# StackOverflow 问答 15891000-15891999

# jquery - 如何等待另一个元素的点击事件的ajax调用完成

> ID：15891001
> 
> 赞同：0
> 
> 时间：2013-04-08T23:49:47.443
> 
> 标签：jquery, ajax

我试图在一个基本上执行 window.location.href = mailto:emailaddress 的点击事件中调用另一个元素的点击事件，但问题是另一个元素有一个 ajax 调用，并且 window.location.href 似乎正在取消阿贾克斯调用。在这种情况下执行 window.location.href 之前，是否有一种简单的方法可以等待 click 事件中的 ajax 调用完成？

以下是 html 和 javascript 的示例：

```
<a id="email-link" href="mailto:emailaddress@email.com">emailaddress</a>

<div class="right" id="list-items">
<ul>
    <li>Item 1</li>
    <li>Item</li>
</ul>
</div>

<script type="text/javascript">
    $('#list-items').live('click', function () {
        jQuery.ajax({
            url: "@Url.Action("Index", "Home")",
            success: function () {
                console.log('done');
            }
        });
    });

    $('#email-link').live('click', function () {
        //Let's just say it's the first item of the li
        var liItem = $('#list-items li').first();
        var thisLink = $(this);

        window.location.href = thisLink.attr("href");

        return false;
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T23:53:23.923

您需要使用回调函数来告知 AJAX 进程何时完成。

```
var emailLinkOnClick = function(e) {
    var liItem = $('#list-items li').first();
    var href = $(this).attr('href');
    listItemsClick(e, function() {
        // this is executed on success of the ajax call
        // inside listItemsClick
        window.location.href = href;
    });

    e.preventDefault();
});

var listItemsClick = function(e, success) {
    $.ajax({
        //does something server side
    }).success(success);
});

$('#list-items').on('click', function(e) {
    listItemsClick(e, function(){
        // you can optionally do something on success here
    });
});

$('#email-link').on('click.redirect', emailLinkOnClick); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T04:33:31.620

您可以将执行主要操作的函数外部化并传递回调函数，而不是模拟点击事件：

```
function doStuff(obj, fn)
{
    jQuery.ajax({
        url: "@Url.Action("Index", "Home")",
        success: function () {
            console.log('done');
            fn && fn();
        }
    });
}

$('#list-items').on('click', function () {
    doStuff(this);
});

$('#email-link').on('click', function () {
    //Let's just say it's the first item of the li
    var liItem = $('#list-items li').get(0),
    url = this.href;

    doStuff(liItem, function() {
        window.location.href = url;
    });

    return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T00:06:12.267

假设你使用的是最新版本的 jQuery，`$.ajax`返回一个 Promise，所以你可以使用`.when`和`.then`

```
$('#email-link').live('click', function () {
    var self = this;   
    var liItem = $('#list-items li').first();

    $.when(liItem.click()).then(function () {
        window.location.href = $(self).attr("href");
    })
}); 
```

[小提琴](http://jsfiddle.net/ethagnawl/e42yK/)

# java - 在我的 java servlet 中找不到为什么循环不进入我的条件

> ID：15891004
> 
> 赞同：-1
> 
> 时间：2013-04-08T23:50:05.387
> 
> 标签：java, jakarta-ee, servlets, web

```
@Override
protected void service(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    // TODO Auto-generated method stub
    WorldDBManager DB = new WorldDBManager();
    String choices = request.getParameter("selectchoice");
    List<WorlPopulationInfo> country = new ArrayList<>();

    country = DB.getResultAsArrayList("world", "select * from country");

    StringBuffer strB = new StringBuffer();

    for(int i=0;i<country.size();i++){
        if(country.get(i).countryName == choices){
            strB.append("<option selected='selected'>" + country.get(i).countryName+"</option>");
            System.out.println(choices + " pareil " + country.get(i).countryName);
        }else if(country.get(i).countryName != choices){
            strB.append("<option>" + country.get(i).countryName+"</option>");
            System.out.println(choices + " " + country.get(i).countryName);
        }
    }

    request.setAttribute("country", strB);

    getServletContext().getRequestDispatcher("/index.jsp").forward(request,  response);

} 
```

我不明白为什么他不去第一个如果条件我知道变量选择的值存在于我的数据库中，通过执行 System.println。我只是不明白为什么无视我的平等。如果有人可以解释我做错了什么。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T23:52:28.713

尝试 -

```
if(country.get(i).countryName.equals(choices)){ 
```

你不需要`else If`那里，`else`就足够了

```
 if(country.get(i).countryName.equals(choices)){
            strB.append("<option selected='selected'>" + country.get(i).countryName+"</option>");
            System.out.println(choices + " pareil " + country.get(i).countryName);
        }else{
            strB.append("<option>" + country.get(i).countryName+"</option>");
            System.out.println(choices + " " + country.get(i).countryName);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T23:52:21.723

使用 .equals() 进行字符串比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T23:53:46.977

我认为您不能将字符串与 == 进行比较（也许在 1.7 中）。你必须使用

```
if(country.get(i).countryName.equals(choices)){} 
```

# javascript - 单击项目时在javascript中删除一个单词

> ID：15891011
> 
> 赞同：7
> 
> 时间：2013-04-08T23:51:05.013
> 
> 标签：javascript, jquery, html, css

单击项目时，在 javascript/jquery 中删除一个单词。

所以我点击和项目，项目淡出，但同时我希望文本删除。

前任。我有一个苹果（图片）和一个苹果（文字）。当我单击苹果时，我希望图像淡出并且文本删除。

```
<div id="items">
  <p>Apple</p>
</div>
<div id="content">
  <div class="box" id="pic1"> <img src = /images/apple.png  /></div>
    <script>
      $("#pic1").click(function () {
        $("#pic1").fadeOut("slow");
       });
    </script> 
```

这是我的代码，直到图像消失，但我不知道如何使文本删除？？？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-08T23:53:45.610

试着把它放在褪色之后。

```
$(this).parents("p").css("text-decoration", "line-through"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T23:56:37.683

**[jsFiddle 演示](http://jsfiddle.net/ab2gy/)**

您可以将文本包装在`<del>`

```
$("#pic1").click(function () {
 $("#items p").wrap("<del>");
 $("#pic1").fadeOut("slow");
}); 
```

# c# - 返回空的 Json 对象

> ID：15891013
> 
> 赞同：3
> 
> 时间：2013-04-08T23:51:11.797
> 
> 标签：c#, asp.net-mvc, json

我正在尝试在 C# 中返回一个 Json 对象。我是 MVC 控制器的新手，第一次使用 Json，我返回这个对象，它是空的。

```
public class A
{
    private string name;
    public void set(string data)
    {
        name = data;
    }
    public string get()
    {
        return name;
    }
}
public JsonResult Hello()
{
    A obj = new A();
    obj.set("Abc");
    JavaScriptSerializer js = new JavaScriptSerializer();
    string jsonVar = js.Serialize(obj);
    return Json(jsonVar, JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T00:46:14.157

在 C# 中，我们有可以自动创建的属性（在 C# 3+ 中）。

```
public class A
{
    public string Name { get; set; }
} 
```

其次，您需要返回包装在新对象中的对象，以便 JSON 正确返回。您不需要自己序列化对象（因为您可以将其作为`ActionResult`其他方式返回）。

```
public JsonResult Hello()
{
    A obj = new A();
    obj.Name = "Abc";
    return Json(new { obj }, JsonRequestBehavior.AllowGet);
} 
```

这将创建一个新的 Json 对象`{"obj":{"Name":"Abc"}}`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T23:54:49.113

您假设框架可以推断出它`get`并`set`设置私有变量`name`的值..它没有。

相反，创建`name`一个公共财产，它应该可以工作：

```
public class A {
    public string Name { get; set; }
}

A obj = new A() { Name = "Abc" };
/* ...etc... */ 
```

从框架的角度考虑这一点。它如何确定正在做什么`get`或`set`正在做什么？他们访问的是同一个变量吗？谁知道......毕竟它的运行时间。这就是为什么不能按照您假设的方式序列化方法的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T00:54:12.213

你不应该命名方法`Get`和`Set`- 甚至不是`GetName`and `SetName`，因为如果我记得我的 C# 读数正确，CLR 在将属性“翻译”为 CIL 代码时会按照惯例这样做（getter 变成“get”方法，setter 变成“设置”方法）。“正确”的方法是使用具有有意义名称的属性 - 你稍后会感谢自己：

```
private string _name;
public string Name { get { return _name; } set { _name=value; } } 
```

# mysql - 在 MySQL 中，哪个更高效：IFNULL 还是 NULLIF？

> ID：15891025
> 
> 赞同：22
> 
> 时间：2013-04-08T23:52:38.157
> 
> 标签：mysql, ifnull, null-test

这两个 MySQL 函数做同样的事情：

```
IFNULL(column_name, 'test') = 'test' 
```

或者

```
NULLIF(column_name, 'test') IS NULL 
```

哪个效率更高？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-08T23:55:48.077

它们彼此一样高效——这些函数的开销大致相同。

但这比任何一个都更有效：

```
(column_name is null 
 or column_name = 'test') 
```

因为不需要调用该函数。

您可能会发现将更常见的测试放在首位可以提高性能。

* * *

对于这样的问题，发现相对性能的最简单、更可靠的方法是尝试它们并比较查询时间。确保您拥有生产规模和实际价值的数据集，以便测试是公平的。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-07-16T15:00:42.927

`NULLIF`和的目的`IFNULL`不一样，所以性能比较没有任何意义。

`NULLIF`用于`null`在表达式具有特定值`IFNULL`时返回，而用于`text`在表达式为时返回`null`。

**例子：**

```
SELECT IFNULL(field,'empty') from table1; 
```

因为`null`对最终用户没有多大意义。

```
insert into table1 (field) values (nullif(field,'empty')); 
```

因为`null`在数据库中有特殊的含义。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-07-06T16:27:21.037

它们用于不同的目的，性能比较没有任何意义。

```
select if(a,b,c);    # a ? b : c       # if a!=0 and a is not null then b else c

select ifnull(a,b);  # a ? a : b       # if a is not null then a else b

select nullif(a,b);  # a=b ? null : a  # if a=b then null else a 
```

[http://dev.mysql.com/doc/refman/5.7/en/control-flow-functions.html](http://dev.mysql.com/doc/refman/5.7/en/control-flow-functions.html)

# matlab-guide - Matlab GUI尝试引用非结构数组的字段

> ID：15891026
> 
> 赞同：0
> 
> 时间：2013-04-08T23:52:42.960
> 
> 标签：matlab-guide, handles

我在 Matlab 上有一个带有 4 个按钮的 GUI 菜单（menu.fig）。然后我有 4 个 .fig 文件，当我单击按钮时要打开它。在这里一切正常，当我从菜单中打开 .fig 并插入值来绘制绘图时，我收到此错误：

> ？？？尝试去引用非结构数组字段。

如果我尝试直接打开 1.fig ，一切正常。

我读到问题出在 eval() 上，但我无法解决。

我更改了每个 .fig 文件上的变量名

一个 1.fig:

```
function pbutton1_Callback(hObject, eventdata, handles)
A1=get(handles.edtSAmp,'String');
f1=get(handles.edtSFreq, 'String');
fi1=get(handles.edtSFase, 'String');
t1=get(handles.popTipo, 'Value');

A1=str2double(A1);
f1=str2double(f1);
fi=str2double(fi1);

SinalSinusoidal(A1,f1,fi,t1); 
```

我在第一行得到了错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-26T14:31:06.383

我想这是 MATLAB GUI 处理不好的东西。我知道它曾经可以工作，但是当您稍微调整您的 UI 或 UI 相关代码并且不小心修改了 MATLAB 告诉您不要触摸的某些区域时，这种问题开始发生。

**工作方法是通过单击运行从 M 编辑器启动 GUI**

我知道它有效，但最初，当我直接启动它时，它也有效。所以，这还没有结束，人们只是没有走到尽头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:06:14.203

问题可能与`handles1`. 它不是您期望的结构数组。`handles`在使用 GUIDE 创建的 GUI 中，如果您同时拥有这两个变量`handles`并`handles1`确保`handles1`包含图中对象的句柄，则该变量通常称为。如果您`handles1`只使用，请确保您正确初始化它。

# python - 2D 网格的 Python 数据结构建议

> ID：15891027
> 
> 赞同：4
> 
> 时间：2013-04-08T23:52:54.260
> 
> 标签：python, data-structures

我希望在 Python 中实现一个蚁群优化算法，尽管对 Python 和面向对象编程都是新手，所以学习曲线相当陡峭。在这一点上，我被困在如何解决以下情况：

*   当蚂蚁在 2D 网格中行走时，它们会遇到障碍物、其他蚂蚁的信息素沉积、食物等。我使用什么数据结构来表示这个 2D 世界以及每个单元的上述属性？

我尝试了一个二维数组，认为它`array[x-coord][y-coord]`可以指向`{} (dictionary)`具有适当属性的 a `(Obstacle: 'Yes / 'No', Pheromone Level: X %, etc.)`。不幸的是，尽管 NumPy 允许我创建一个二维数组，但我无法将字典对象分配给各种坐标。

```
from numpy import *

myArray = array([[1,2,3,4],
                 [5,6,7,8],
                 [9,10,11,12]])

myArray[2][2]={} 
```

回报：

```
Traceback (most recent call last):
  File "/Users/amormachine/Desktop/PythonTest.py", line 7, in <module>
    myArray[2][2]={}
TypeError: long() argument must be a string or a number, not 'dict'
[Finished in 0.6s with exit code 1] 
```

我不致力于使用字典或这种范式来实施这个项目，我当然会欣赏这个小组的智慧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:11:19.993

当然可以，如果你的 dtype 是 int ，你就不能......所以用对象制作你的数组，你可以使用对象......

```
In [43]: a = [[{},{},{}],[{},{},{}]]

In [44]: a = numpy.array(a)

In [45]: a[1][1] = {'hello':'world','something':5}

In [46]: a
Out[46]:
array([[{}, {}, {}],
       [{}, {'hello': 'world', 'something': 5}, {}]], dtype=object) 
```

虽然不确定为什么将 numpy 与对象一起使用会有所收获，但最好将其保留为列表列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:34:36.203

在普通的 Python 中，我会采用 list-of-dicts 方法，但对于 NumPy，我发现使用不同属性的单独数组而不是试图将事物保持在一个结构中更自然。

```
import numpy as np

grid_shape = (120,80)

# example of random initialization with this grid shape
pheremone_level = np.random.rand(*grid_shape)
obstacle = np.random.rand(*grid_shape) > 0.8 
```

正如@bitwise 所说，这完全取决于您要执行的操作。通常，与非 NumPy Python 相比，NumPy 中的“正确”方式更接近于在 Matlab 中编写它的方式。不幸的是，我不熟悉蚁群优化的工作原理，所以我不能说什么更合适。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-20T14:14:09.473

我正在寻找与结构化 2D 网格相关的东西，谷歌将我带到了这个页面。

尽管我的解决方案与问题中所问的网格并不完全相关，而且我不想重复关于“结构化 2D 网格”数据结构的问题，但我在这里发布了我的解决方案。我希望它对搜索二维结构化网格并被搜索引擎重定向到这里的观众有用

注意：该方法只返回单元格顶点和每个单元格的顶点连通性。可以通过添加额外的例程轻松生成应用所需的其他量，如细胞体积、细胞质心、外接圆、内圆等

```
import numpy as np
import matplotlib.pyplot as plt

def create_structured_grid(corner1=None, corner2=None, nx=5, ny=5, plt_=True, annotate=True):
   """
   creates a structured grid of rectangular lattice

   input:
   ------
       corner1 : [x_start, y_start]
       corner2 : [x_end, y_end]
       nx      : numpts in x
       ny      : numpts in y
       plt_    : boolean whether to plot or not
       annotate: whether to annotate the grid points or not
   output:
   -------
       vertex_array : numpy.array((numpts, dim),dtype=float) of vertices
       connectivity : numpy.array((num_cells, 2**dim), dtyp=int) of
                   vertex connectivity for each cell
       plots   : additionally plots if boolean values are true
   """
   #corner1 = np.array([0.0, 0.0])
   #corner2 = np.array([1.0, 1.0])
   dim = len(corner1) #currently only for 2D,
   x_pts = np.linspace(corner1[0], corner2[0], nx)
   y_pts = np.linspace(corner1[1], corner2[1], ny)

   Xv, Yv = np.meshgrid(x_pts, y_pts)
   numpts = nx*ny
   vertex_array = np.zeros((numpts, 2), dtype=float)

   vertex_array[:,0] = np.reshape(Xv, numpts)
   vertex_array[:,1] = np.reshape(Yv, numpts)

   num_cells = int(nx-1)*(ny-1)
   connectivity = np.zeros((num_cells, int(2**dim)), dtype=int)

   rows = ny-1
   cols = nx-1
   for row in range(rows):
       for col in range(cols):
           num = nx*row + col
           connectivity[cols*row + col] = [num+0, num+1, num+nx, num+nx+1]

   if plt_:
       X,Y = vertex_array.T
       fig = plt.figure()
       ax = fig.add_subplot(111)
       ax.set_aspect('equal')
       plt.scatter(X,Y, marker='o', s=50, color='g', alpha=1.0)
       plt.plot(Xv,Yv, linewidth=2, color='k')
       plt.plot(Yv,Xv, linewidth=2, color='k')
       if annotate:
           for idx, cc in enumerate(vertex_array):
               plt.text(cc[0], cc[1],  str(idx), color='k', verticalalignment='bottom', horizontalalignment='right', fontsize='medium')
       plt.show(block=False)

   return vertex_array, connectivity 
```

函数调用可以是这样的：

```
c1 = np.array([0.0, 0.0])
c2 = np.array([1.0, 1.0])
vertices, connctivity = create_structured_grid(corner1=c1, corner2=c2, nx=4, ny=4)

vertices = array([[ 0\.        ,  0\.        ],
                  [ 0.33333333,  0\.        ],
                  [ 0.66666667,  0\.        ],
                  [ 1\.        ,  0\.        ],
                  [ 0\.        ,  0.33333333],
                  [ 0.33333333,  0.33333333],
                  [ 0.66666667,  0.33333333],
                  [ 1\.        ,  0.33333333],
                  [ 0\.        ,  0.66666667],
                  [ 0.33333333,  0.66666667],
                  [ 0.66666667,  0.66666667],
                  [ 1\.        ,  0.66666667],
                  [ 0\.        ,  1\.        ],
                  [ 0.33333333,  1\.        ],
                  [ 0.66666667,  1\.        ],
                  [ 1\.        ,  1\.        ]])
connectivity = array([[ 0,  1,  5,  6],
                      [ 1,  2,  6,  7],
                      [ 2,  3,  7,  8],
                      [ 4,  5,  9, 10],
                      [ 5,  6, 10, 11],
                      [ 6,  7, 11, 12],
                      [ 8,  9, 13, 14],
                      [ 9, 10, 14, 15],
                      [10, 11, 15, 16]]) 
```

[![在此处输入图像描述](https://i.stack.imgur.com/ycxA4.png)](https://i.stack.imgur.com/ycxA4.png)

# php - 致命错误：调用未定义的方法 - 不完全

> ID：15891032
> 
> 赞同：0
> 
> 时间：2013-04-08T23:53:12.430
> 
> 标签：php, mysqli

这就是我希望能够快速轻松地更新的方式，因此我可以从数据库和我拥有的同一时间更新程序内容中进行选择。

这就是我得到这个错误的方式： **致命错误：在第 30 行的 /home/jesperbo/public_html/blabla.dk/admin_forside.php 中调用未定义的方法 mebe::BOXforside()**

Admin_forside.php 在这里向您展示：

```
<?php
  $forside_tekst = $mebe->BOXforside();
?> 
```

进入我获取所有信息的大文件如下所示：*fun_db.php*

```
function BOXforside()
    {
        if ($stmt = $this->mysqli->prepare("SELECT `tekst` FROM `forside_tekst`")) { 
            $stmt->execute();

            $stmt->bind_result($tekst);

            while ($stmt->fetch()) {
            ?>
            <form action="#" method="post">
                <textarea name="tekst" cols="20" rows="15" class="new" style="width:100%;"><?php echo $tekst;?></textarea>
                <input type="submit" name="opret" value="Opret Blog" class="new"></td>
            </form>
            <?php
            }

            $stmt->close();

        } else {
            echo 'Der opstod en fejl i erklæringen: ' . $this->mysqli->error;
        }

            if(isset($_POST["opret"]))
            {

                if ($stmt = $this->mysqli->prepare('UPDATE `forside_tekst` SET `tekst`=? WHERE `id`=?')) { 
                    $stmt->bind_param('si', $tekst, $id);

                    $tekst = $_POST["tekst"]; 
                    $id = 1;

                    $stmt->execute();

                    $stmt->close();

                }
            }

    } 
```

**当我下载文件时，它在 toppe af admin_forside.php**上看起来像这样

 **```
session_start();
require_once ("indhold/inc/fun_db.php"); //download alle my files to it site.
$mebe = new mebe;
$db = $mebe->db_c();
error_reporting(E_ERROR); //take alle error away 
```

**我不明白为什么我不能让它工作。****

# javascript - 在 Google Apps 脚本日志中无法看到完整的抓取网页

> ID：15891033
> 
> 赞同：0
> 
> 时间：2013-04-08T23:53:15.493
> 
> 标签：javascript, dynamic, google-apps-script, urlfetch

几周前，我开始学习 Javascript 和 Google Apps Script API，特别是在电子表格方面。我一直在尝试制作一个电子表格，用于获取网页并为游戏英雄联盟提取关于我朋友的统计数据。但是，我一直在使用我想使用的站点时遇到问题，它基本上是唯一一个经常更新的免费 LoL 统计站点。我对网络开发一点也不熟悉，但是当我尝试访问 lolking.net 上的页面时，例如[http://www.lolking.net/summoner/na/60783](http://www.lolking.net/summoner/na/60783)与 Google 的 UrlFetchApp.fetch()它不加载动态页面。因此，我得到的不是最终来源，而是对我[没有帮助](http://pastebin.com/TgRBKffP)。有没有一种简单的方法可以解决这个问题，还是我只需要使用另一个网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:56:26.150

谢谢你的信息！虽然事实证明我错了。UrlFetchApp 确实返回了完整的源代码，但我使用 GAS 的 Logger 来查看文本。记录器似乎有长度限制，所以当我搜索我想要的统计信息时，它们并不存在，因为源代码被截断了。所以，由于我的疏忽，我一开始就没有遇到过问题。对于阅读此问题的其他人，最后我不知道 UrlFetchApp 如何使用客户端 js 处理动态页面（您可能想与下面的海报交谈或发布一个新问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T03:10:09.220

您将获得包含客户端 js 的原始 html 页面。这不适用于任何系统，而不仅仅是气体。您需要调试该页面 js 并找到它执行 ajax 调用以获取所需数据的位置。然后用你的气体做同样的事情。如果呼叫经过身份验证等可能无法正常工作。

# sql-server - 生产服务器上的 SQL ALTER TABLE SET (LOCK_ESCALATION = TABLE)

> ID：15891035
> 
> 赞同：1
> 
> 时间：2013-04-08T23:53:20.490
> 
> 标签：sql-server, foreign-keys

我需要创建一个具有表外键的新`Users`表。

用户表有 200 万条记录。

当我在我们的测试服务器上运行脚本时，它会锁定此表，并且测试用户在事务期间无法查询此表。

查询开始像；

```
BEGIN TRANSACTION
GO
ALTER TABLE dbo.Users SET (LOCK_ESCALATION = TABLE)
GO
COMMIT
/*CREATE NEW TABLE AND FOREIGN KEYS HERE*/ 
```

在不锁定生产环境的情况下安全运行的方法是什么？

我们是否应该将生产服务器设置为“维护模式”并在 sql 事务完成后重新设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T00:46:41.080

要创建新表及其外键，甚至新表索引，您无需锁定或设置引用表的 lock_escalation（在您的情况下为 dbo.Users）。只需不运行上述事务，只需创建新表和外键即可。

# python - 更改熊猫中的列类型

> ID：15891038
> 
> 赞同：1215
> 
> 时间：2013-04-08T23:53:30.657
> 
> 标签：python, pandas, dataframe, types, casting

我想将表示为列表列表的表格转换为`Pandas DataFrame`. 作为一个极其简化的示例：

```
a = [['a', '1.2', '4.2'], ['b', '70', '0.03'], ['x', '5', '0']]
df = pd.DataFrame(a) 
```

将列转换为适当类型的最佳方法是什么，在这种情况下，第 2 列和第 3 列转换为浮点数？有没有办法在转换为 DataFrame 时指定类型？还是先创建 DataFrame 然后遍历列以更改每列的类型更好？理想情况下，我想以动态方式执行此操作，因为可能有数百列，我不想准确指定哪些列属于哪种类型。我只能保证每一列都包含相同类型的值。

* * *

## 回答 #1

> 赞同：2003
> 
> 时间：2015-02-21T17:37:02.897

在 pandas 中转换类型有四个主要选项：

1.  [`to_numeric()`](https://pandas.pydata.org/docs/reference/api/pandas.to_numeric.html)- 提供安全地将非数字类型（例如字符串）转换为合适的数字类型的功能。（另见[`to_datetime()`](https://pandas.pydata.org/docs/reference/api/pandas.to_datetime.html)和[`to_timedelta()`](https://pandas.pydata.org/docs/reference/api/pandas.to_timedelta.html)。）

2.  [`astype()`](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.astype.html)- 将（几乎）任何类型转换为（几乎）任何其他类型（即使这样做不一定明智）。还允许您转换为[分类](https://pandas.pydata.org/docs/user_guide/categorical.html)类型（非常有用）。

3.  [`infer_objects()`](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.infer_objects.html)- 如果可能的话，一种实用方法，用于将保存 Python 对象的对象列转换为 pandas 类型。

4.  [`convert_dtypes()`](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.convert_dtypes.html)- 将 DataFrame 列转换为支持的“最佳”dtype `pd.NA`（pandas 对象以指示缺失值）。

请继续阅读以了解每种方法的更详细说明和用法。

* * *

# 1.`to_numeric()`

将 DataFrame 的一列或多列转换为数值的最佳方法是使用[`pandas.to_numeric()`](https://pandas.pydata.org/docs/reference/api/pandas.to_numeric.html).

此函数将尝试将非数字对象（如字符串）更改为适当的整数或浮点数。

## 基本用法

的输入[`to_numeric()`](https://pandas.pydata.org/docs/reference/api/pandas.to_numeric.html)是一个系列或 DataFrame 的单列。

```
>>> s = pd.Series(["8", 6, "7.5", 3, "0.9"]) # mixed string and numeric values
>>> s
0      8
1      6
2    7.5
3      3
4    0.9
dtype: object

>>> pd.to_numeric(s) # convert everything to float values
0    8.0
1    6.0
2    7.5
3    3.0
4    0.9
dtype: float64 
```

如您所见，返回了一个新系列。请记住将此输出分配给变量或列名以继续使用它：

```
# convert Series
my_series = pd.to_numeric(my_series)

# convert column "a" of a DataFrame
df["a"] = pd.to_numeric(df["a"]) 
```

您还可以使用它通过以下[`apply()`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.apply.html)方法转换 DataFrame 的多个列：

```
# convert all columns of DataFrame
df = df.apply(pd.to_numeric) # convert all columns of DataFrame

# convert just columns "a" and "b"
df[["a", "b"]] = df[["a", "b"]].apply(pd.to_numeric) 
```

只要您的值都可以转换，这可能就是您所需要的。

## 错误处理

但是如果某些值不能转换为数字类型怎么办？

[`to_numeric()`](https://pandas.pydata.org/docs/reference/api/pandas.to_numeric.html)还接受一个`errors`关键字参数，允许您将非数字值强制为`NaN`，或简单地忽略包含这些值的列。

`s`这是一个使用具有对象 dtype的一系列字符串的示例：

```
>>> s = pd.Series(['1', '2', '4.7', 'pandas', '10'])
>>> s
0         1
1         2
2       4.7
3    pandas
4        10
dtype: object 
```

如果无法转换值，默认行为是引发。在这种情况下，它无法处理字符串“pandas”：

```
>>> pd.to_numeric(s) # or pd.to_numeric(s, errors='raise')
ValueError: Unable to parse string 
```

我们可能希望“熊猫”被视为缺失/错误的数值，而不是失败。我们可以使用关键字参数将无效值强制`NaN`为如下：`errors`

```
>>> pd.to_numeric(s, errors='coerce')
0     1.0
1     2.0
2     4.7
3     NaN
4    10.0
dtype: float64 
```

第三个选项`errors`是在遇到无效值时忽略该操作：

```
>>> pd.to_numeric(s, errors='ignore')
# the original Series is returned untouched 
```

最后一个选项对于转换整个 DataFrame 特别有用，但不知道我们的哪些列可以可靠地转换为数字类型。在这种情况下，只需编写：

```
df.apply(pd.to_numeric, errors='ignore') 
```

该函数将应用于 DataFrame 的每一列。可以转换为数字类型的列将被转换，而不能（例如，它们包含非数字字符串或日期）的列将被单独保留。

## 垂头丧气

默认情况下，转换[`to_numeric()`](https://pandas.pydata.org/docs/reference/api/pandas.to_numeric.html)将为您提供 an`int64`或`float64`dtype （或您的平台本机的任何整数宽度）。

这通常是您想要的，但是如果您想节省一些内存并使用更紧凑的 dtype，例如`float32`或`int8`怎么办？

[`to_numeric()`](https://pandas.pydata.org/docs/reference/api/pandas.to_numeric.html)让您可以选择向下转换为`'integer'`, `'signed'`, `'unsigned'`, `'float'`. 这是一个简单`s`的整数类型系列的示例：

```
>>> s = pd.Series([1, 2, -7])
>>> s
0    1
1    2
2   -7
dtype: int64 
```

向下转换为`'integer'`使用可以容纳值的最小可能整数：

```
>>> pd.to_numeric(s, downcast='integer')
0    1
1    2
2   -7
dtype: int8 
```

向下转换为`'float'`类似地选择比正常浮动类型更小的：

```
>>> pd.to_numeric(s, downcast='float')
0    1.0
1    2.0
2   -7.0
dtype: float32 
```

* * *

# 2.`astype()`

该[`astype()`](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.astype.html)方法使您能够明确说明您希望 DataFrame 或 Series 具有的 dtype。它非常通用，您可以尝试从一种类型转换为任何其他类型。

## 基本用法

只需选择一种类型：您可以使用 NumPy dtype（例如`np.int16`）、一些 Python 类型（例如 bool）或 pandas 特定的类型（例如 categorical dtype）。

调用您要转换的对象上的方法，并[`astype()`](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.astype.html)尝试为您转换它：

```
# convert all DataFrame columns to the int64 dtype
df = df.astype(int)

# convert column "a" to int64 dtype and "b" to complex type
df = df.astype({"a": int, "b": complex})

# convert Series to float16 type
s = s.astype(np.float16)

# convert Series to Python strings
s = s.astype(str)

# convert Series to categorical type - see docs for more details
s = s.astype('category') 
```

请注意，我说的是“尝试”——如果[`astype()`](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.astype.html)不知道如何转换 Series 或 DataFrame 中的值，则会引发错误。例如，如果您有一个`NaN`or`inf`值，您将在尝试将其转换为整数时遇到错误。

从 pandas 0.20.0 开始，可以通过传递`errors='ignore'`. 您的原始对象将原封不动地返回。

## 当心

[`astype()`](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.astype.html)很强大，但它有时会“错误地”转换值。例如：

```
>>> s = pd.Series([1, 2, -7])
>>> s
0    1
1    2
2   -7
dtype: int64 
```

这些都是小整数，那么如何转换为无符号 8 位类型以节省内存？

```
>>> s.astype(np.uint8)
0      1
1      2
2    249
dtype: uint8 
```

转换成功了，但是 -7 被环绕成 249（即 2 ⁸ - 7）！

尝试使用`pd.to_numeric(s, downcast='unsigned')`而不是向下转换可以帮助防止此错误。

* * *

# 3.`infer_objects()`

pandas 0.21.0 版引入了[`infer_objects()`](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.infer_objects.html)将具有对象数据类型的 DataFrame 的列转换为更具体的类型（软转换）的方法。

例如，这是一个包含两列对象类型的 DataFrame。一个保存实际整数，另一个保存表示整数的字符串：

```
>>> df = pd.DataFrame({'a': [7, 1, 5], 'b': ['3','2','1']}, dtype='object')
>>> df.dtypes
a    object
b    object
dtype: object 
```

使用[`infer_objects()`](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.infer_objects.html)，您可以将列 'a' 的类型更改为 int64：

```
>>> df = df.infer_objects()
>>> df.dtypes
a     int64
b    object
dtype: object 
```

列 'b' 被单独留下，因为它的值是字符串，而不是整数。如果您想将两列强制为整数类型，则可以`df.astype(int)`改用。

* * *

# 4.`convert_dtypes()`

1.0 及更高版本包括将 Series 和 DataFrame 列转换为支持缺失值[`convert_dtypes()`](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.convert_dtypes.html)的最佳 dtype的方法。`pd.NA`

这里“最好的”是指最适合保存这些值的类型。例如，这是一个 pandas 整数类型，如果所有值都是整数（或缺失值）：Python 整数对象的对象列转换为`Int64`NumPy`int32`值的列，将成为 pandas dtype `Int32`。

使用我们的`object`DataFrame `df`，我们得到以下结果：

```
>>> df.convert_dtypes().dtypes                                             
a     Int64
b    string
dtype: object 
```

由于列 'a' 保存整数值，它被转换为`Int64`类型（它能够保存缺失值，不像`int64`）。

列“b”包含字符串对象，因此已更改为 pandas 的`string`dtype。

默认情况下，此方法将根据每列中的对象值推断类型。我们可以通过传递来改变它`infer_objects=False`：

```
>>> df.convert_dtypes(infer_objects=False).dtypes                          
a    object
b    string
dtype: object 
```

现在列 'a' 仍然是一个对象列：pandas 知道它可以被描述为一个 'integer' 列（在内部它运行[`infer_dtype`](https://github.com/pandas-dev/pandas/blob/6b2d0260c818e62052eaf535767f3a8c4b446c69/pandas/_libs/lib.pyx#L1188-L1434)）但没有准确推断它应该具有什么 dtype 的整数，因此没有转换它。列 'b' 再次转换为 'string' dtype，因为它被识别为保存 'string' 值。

* * *

## 回答 #2

> 赞同：497
> 
> 时间：2013-04-21T18:15:27.933

这个怎么样？

```
a = [['a', '1.2', '4.2'], ['b', '70', '0.03'], ['x', '5', '0']]
df = pd.DataFrame(a, columns=['one', 'two', 'three'])
df
Out[16]: 
  one  two three
0   a  1.2   4.2
1   b   70  0.03
2   x    5     0

df.dtypes
Out[17]: 
one      object
two      object
three    object

df[['two', 'three']] = df[['two', 'three']].astype(float)

df.dtypes
Out[19]: 
one       object
two      float64
three    float64 
```

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2017-11-15T09:38:01.660

下面的代码将更改列的数据类型。

```
df[['col.name1', 'col.name2'...]] = df[['col.name1', 'col.name2'..]].astype('data_type') 
```

代替数据类型，您可以提供数据类型。您想要什么，例如 str、float、int 等。

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2018-10-12T21:02:28.140

当我只需要指定特定列并且想要明确时，我使用过（每个[DOCS LOCATION](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.astype.html)）：

```
dataframe = dataframe.astype({'col_name_1':'int','col_name_2':'float64', etc. ...}) 
```

因此，使用原始问题，但为其提供列名......

```
a = [['a', '1.2', '4.2'], ['b', '70', '0.03'], ['x', '5', '0']]
df = pd.DataFrame(a, columns=['col_name_1', 'col_name_2', 'col_name_3'])
df = df.astype({'col_name_2':'float64', 'col_name_3':'float64'}) 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2017-06-14T05:42:21.597

这是一个函数，它接受一个 DataFrame 和一个列列表作为其参数，并将列中的所有数据强制转换为数字。

```
# df is the DataFrame, and column_list is a list of columns as strings (e.g ["col1","col2","col3"])
# dependencies: pandas

def coerce_df_columns_to_numeric(df, column_list):
    df[column_list] = df[column_list].apply(pd.to_numeric, errors='coerce') 
```

因此，对于您的示例：

```
import pandas as pd

def coerce_df_columns_to_numeric(df, column_list):
    df[column_list] = df[column_list].apply(pd.to_numeric, errors='coerce')

a = [['a', '1.2', '4.2'], ['b', '70', '0.03'], ['x', '5', '0']]
df = pd.DataFrame(a, columns=['col1','col2','col3'])

coerce_df_columns_to_numeric(df, ['col2','col3']) 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2020-02-18T10:12:48.733

# 熊猫 >= 1.0

这是一张图表，总结了 pandas 中一些最重要的转换。

[![在此处输入图像描述](https://i.stack.imgur.com/tUcdp.jpg)](https://i.stack.imgur.com/tUcdp.jpg)

到字符串的转换是微不足道`.astype(str)`的，图中未显示。

### “硬”与“软”转换

请注意，此上下文中的“转换”可以指将文本数据转换为其实际数据类型（硬转换），或者为对象列中的数据推断更合适的数据类型（软转换）。为了说明差异，请看一下

```
df = pd.DataFrame({'a': ['1', '2', '3'], 'b': [4, 5, 6]}, dtype=object)
df.dtypes                                                                  

a    object
b    object
dtype: object

# Actually converts string to numeric - hard conversion
df.apply(pd.to_numeric).dtypes                                             

a    int64
b    int64
dtype: object

# Infers better data types for object data - soft conversion
df.infer_objects().dtypes                                                  

a    object  # no change
b     int64
dtype: object

# Same as infer_objects, but converts to equivalent ExtensionType
df.convert_dtypes().dtypes 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2017-07-11T05:56:48.583

如何创建两个数据框，每个数据框的列具有不同的数据类型，然后将它们附加在一起？

```
d1 = pd.DataFrame(columns=[ 'float_column' ], dtype=float)
d1 = d1.append(pd.DataFrame(columns=[ 'string_column' ], dtype=str)) 
```

**结果**

```
In[8}:  d1.dtypes
Out[8]: 
float_column     float64
string_column     object
dtype: object 
```

创建数据框后，您可以在第一列中使用浮点变量填充它，在第二列中使用字符串（或您想要的任何数据类型）填充它。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2021-03-24T10:15:14.640

df.info() 为我们提供了 temp 的初始数据类型，即 float64

```
 #   Column  Non-Null Count  Dtype  
---  ------  --------------  -----  
 0   date    132 non-null    object 
 1   temp    132 non-null    float64 
```

现在，使用此代码将数据类型更改为 int64：

```
df['temp'] = df['temp'].astype('int64') 
```

如果您再次执行 df.info()，您将看到：

```
 #   Column  Non-Null Count  Dtype 
 ---  ------  --------------  ----- 
  0   date    132 non-null    object
  1   temp    132 non-null    int64 
```

这表明您已成功更改列 temp 的数据类型。快乐编码！

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2021-09-27T10:34:40.470

```
df = df.astype({"columnname": str}) 
```

#eg - 用于将列类型更改为字符串

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2020-04-06T14:26:33.327

从 pandas 1.0.0 开始，我们有`pandas.DataFrame.convert_dtypes`. 您甚至可以控制要转换的类型！

```
In [40]: df = pd.DataFrame(
    ...:     {
    ...:         "a": pd.Series([1, 2, 3], dtype=np.dtype("int32")),
    ...:         "b": pd.Series(["x", "y", "z"], dtype=np.dtype("O")),
    ...:         "c": pd.Series([True, False, np.nan], dtype=np.dtype("O")),
    ...:         "d": pd.Series(["h", "i", np.nan], dtype=np.dtype("O")),
    ...:         "e": pd.Series([10, np.nan, 20], dtype=np.dtype("float")),
    ...:         "f": pd.Series([np.nan, 100.5, 200], dtype=np.dtype("float")),
    ...:     }
    ...: )

In [41]: dff = df.copy()

In [42]: df 
Out[42]: 
   a  b      c    d     e      f
0  1  x   True    h  10.0    NaN
1  2  y  False    i   NaN  100.5
2  3  z    NaN  NaN  20.0  200.0

In [43]: df.dtypes
Out[43]: 
a      int32
b     object
c     object
d     object
e    float64
f    float64
dtype: object

In [44]: df = df.convert_dtypes()

In [45]: df.dtypes
Out[45]: 
a      Int32
b     string
c    boolean
d     string
e      Int64
f    float64
dtype: object

In [46]: dff = dff.convert_dtypes(convert_boolean = False)

In [47]: dff.dtypes
Out[47]: 
a      Int32
b     string
c     object
d     string
e      Int64
f    float64
dtype: object 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-02-01T09:49:06.350

我以为我有同样的问题，但实际上我有一点不同，这使得问题更容易解决。对于其他查看此问题的人，值得检查输入列表的格式。在我的情况下，数字最初是浮动的，而不是问题中的字符串：

```
a = [['a', 1.2, 4.2], ['b', 70, 0.03], ['x', 5, 0]] 
```

但是通过在创建数据框之前过多地处理列表，我会丢失类型，并且所有内容都变成了字符串。

通过 numpy 数组创建数据框

```
df = pd.DataFrame(np.array(a))

df
Out[5]: 
   0    1     2
0  a  1.2   4.2
1  b   70  0.03
2  x    5     0

df[1].dtype
Out[7]: dtype('O') 
```

给出与问题相同的数据框，其中第 1 列和第 2 列中的条目被视为字符串。然而做

```
df = pd.DataFrame(a)

df
Out[10]: 
   0     1     2
0  a   1.2  4.20
1  b  70.0  0.03
2  x   5.0  0.00

df[1].dtype
Out[11]: dtype('float64') 
```

实际上确实给出了一个数据框，其中的列格式正确

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-01-28T00:52:10.867

如果您有各种对象列，例如 74 个对象列和 2 个 Int 列的 Dataframe，其中每个值都有代表单位的字母：

```
import pandas as pd 
import numpy as np
dataurl = 'https://raw.githubusercontent.com/RubenGavidia/Pandas_Portfolio.py/main/Wes_Mckinney.py/nutrition.csv'
nutrition = pd.read_csv(dataurl,index_col=[0])
nutrition.head(3)

    name    serving_size    calories    total_fat   saturated_fat   cholesterol sodium  choline folate  folic_acid  ... fat saturated_fatty_acids   monounsaturated_fatty_acids polyunsaturated_fatty_acids fatty_acids_total_trans alcohol ash caffeine    theobromine water
0   Cornstarch  100 g   381 0.1g    NaN 0   9.00 mg 0.4 mg  0.00 mcg    0.00 mcg    ... 0.05 g  0.009 g 0.016 g 0.025 g 0.00 mg 0.0 g   0.09 g  0.00 mg 0.00 mg 8.32 g
1   Nuts, pecans    100 g   691 72g 6.2g    0   0.00 mg 40.5 mg 22.00 mcg   0.00 mcg    ... 71.97 g 6.180 g 40.801 g    21.614 g    0.00 mg 0.0 g   1.49 g  0.00 mg 0.00 mg 3.52 g
2   Eggplant, raw   100 g   25  0.2g    NaN 0   2.00 mg 6.9 mg  22.00 mcg   0.00 mcg    ... 0.18 g  0.034 g 0.016 g 0.076 g 0.00 mg 0.0 g   0.66 g  0.00 mg 0.00 mg 92.30 g
3 rows × 76 columns

nutrition.dtypes
name             object
serving_size     object
calories          int64
total_fat        object
saturated_fat    object
                  ...  
alcohol          object
ash              object
caffeine         object
theobromine      object
water            object
Length: 76, dtype: object

nutrition.dtypes.value_counts()
object    74
int64      2
dtype: int64 
```

将所有列转换为数字的一种好方法是使用正则表达式替换单位为空，使用 astype(float) 将列数据类型更改为浮点：

```
nutrition.index = pd.RangeIndex(start = 0, stop = 8789, step= 1)
nutrition.set_index('name',inplace = True)
nutrition.replace('[a-zA-Z]','', regex= True, inplace=True)
nutrition=nutrition.astype(float)
nutrition.head(3)

serving_size    calories    total_fat   saturated_fat   cholesterol sodium  choline folate  folic_acid  niacin  ... fat saturated_fatty_acids   monounsaturated_fatty_acids polyunsaturated_fatty_acids fatty_acids_total_trans alcohol ash caffeine    theobromine water
name                                                                                    
Cornstarch  100.0   381.0   0.1 NaN 0.0 9.0 0.4 0.0 0.0 0.000   ... 0.05    0.009   0.016   0.025   0.0 0.0 0.09    0.0 0.0 8.32
Nuts, pecans    100.0   691.0   72.0    6.2 0.0 0.0 40.5    22.0    0.0 1.167   ... 71.97   6.180   40.801  21.614  0.0 0.0 1.49    0.0 0.0 3.52
Eggplant, raw   100.0   25.0    0.2 NaN 0.0 2.0 6.9 22.0    0.0 0.649   ... 0.18    0.034   0.016   0.076   0.0 0.0 0.66    0.0 0.0 92.30
3 rows × 75 columns

nutrition.dtypes
serving_size     float64
calories         float64
total_fat        float64
saturated_fat    float64
cholesterol      float64
                  ...   
alcohol          float64
ash              float64
caffeine         float64
theobromine      float64
water            float64
Length: 75, dtype: object

nutrition.dtypes.value_counts()
float64    75
dtype: int64 
```

现在数据集是干净的，您只能使用 regex 和 astype() 对此 Dataframe 进行数字运算。

如果您想收集单位并粘贴在标题上，`cholesterol_mg`可以使用以下代码：

```
nutrition.index = pd.RangeIndex(start = 0, stop = 8789, step= 1)
nutrition.set_index('name',inplace = True)
nutrition.astype(str).replace('[^a-zA-Z]','', regex= True)
units = nutrition.astype(str).replace('[^a-zA-Z]','', regex= True)
units = units.mode()
units = units.replace('', np.nan).dropna(axis=1)
mapper = { k: k + "_" + units[k].at[0] for k in units}
nutrition.rename(columns=mapper, inplace=True)
nutrition.replace('[a-zA-Z]','', regex= True, inplace=True)
nutrition=nutrition.astype(float) 
```

# matlab - 如何在 MATLAB 中进行 rank-1 分解？

> ID：15891044
> 
> 赞同：1
> 
> 时间：2013-04-08T23:54:11.870
> 
> 标签：matlab, factorization

我有一个尺寸为 6x6 的矩阵 M，它的秩为 1。我如何将它分解为两个尺寸为 6x1（比如 A）和 1x6（比如 B）的矩阵，以便 M=A*B。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:16:29.763

取最大的特征向量并乘以最大的特征值：

```
 A=[1 2 3 4]'*[1 2 3 4]
 A =

     1     2     3     4
     2     4     6     8
     3     6     9    12
     4     8    12    16

 [v,e] = eigs(A,1);
 sqrt(e)*v
 ans =

   -1.0000
   -2.0000
   -3.0000
   -4.0000 
```

当然，结果是好的只有一个标志的变化。

**编辑**：如果您假设这两个向量可以不同：

```
A=[1 2 3 4]'*[5 6 7 8]
[uu,ss,vv]=svd(A);
u=uu(:,1)*ss(1,1)
v=vv(:,1)
assert(norm(u*v'-A)<1E-10) 
```

现在解决方案更不独特了。您仅根据 n 确定 2*n 值。这是众多解决方案中的一种。

例如，查看另一个更简单的解决方案（假设您的矩阵完全排名 1）：

```
aa=A(:,:)./repmat(A(1,:),[size(A,1),1]);
bb=A(:,:)./repmat(A(:,1),[1,size(A,2)]);
u=aa(:,1);
v=bb(1,:)'*A(1);
assert(norm(u*v'-A)<1E-10) 
```

它会产生完全不同的结果，但这仍然会分解矩阵。如果您只想进行非负分解以稍微减少可能结果的空间，我建议您提出一个新问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T23:57:17.547

如果它的等级为 1，则所有列/行都是第一列/行的倍数（或者实际上是任何非零列/行的倍数）。IE：

```
m = M(:,1);
M = [ a*m, b*m, c*m, d*m, e*m, f*m ]; 
```

希望你能从那里拿走它。

# ninject - 是否可以将 Ninject Factory Extensions 的 ToFactory 方法与开放泛型一起使用？

> ID：15891047
> 
> 赞同：2
> 
> 时间：2013-04-08T23:54:19.427
> 
> 标签：ninject, ioc-container, ninject-extensions, abstract-factory, open-generics

我正在构建之前回答的[问题](https://stackoverflow.com/q/15868820/533958)，其中`ICar`使用[Ninject Conventions Extensions](https://github.com/ninject/ninject.extensions.conventions/wiki)和自定义[IBindingGenerator](https://github.com/ninject/ninject.extensions.conventions/wiki/Projecting-Services-to-Bind#custom-binding-generators)绑定实现，并且使用[Ninject Factory Extensions 的](https://github.com/ninject/ninject.extensions.factory/wiki)方法和[自定义实例提供程序](https://github.com/ninject/ninject.extensions.factory/wiki/Factory-interface%3A-custom-instance-providers)`ICarFactory`绑定接口。 `ToFactory()`

我正在尝试重构，以便我可以绑定和使用 a `IVehicleFactory<T>`，其中`T`被限制为`ICar`，而不是之前的`ICarFactory`. 这样，我可以在泛型类型参数中指定我想要的车辆，而不是在工厂的`CreateCar()`方法中传入车辆类型的名称。

**是否可以使用该`ToFactory()`技术绑定开放的通用接口？**

我有一种感觉，我在吠叫错误的树，但是当我通过它的名称指定一个类型时，将类型本身指定为泛型类型参数`ICar`似乎是自然的演变......`ICar`

这是当前失败的测试：

```
[Fact]
public void A_Generic_Vehicle_Factory_Creates_A_Car_Whose_Type_Equals_Factory_Method_Generic_Type_Argument()
{
    using (StandardKernel kernel = new StandardKernel())
    {
        // arrange
        kernel.Bind(typeof(IVehicleFactory<>))
            .ToFactory(() => new UseFirstGenericTypeArgumentInstanceProvider());

        kernel.Bind(
            scanner => scanner
                           .FromThisAssembly()
                           .SelectAllClasses()
                           .InheritedFrom<ICar>()
                           .BindWith(new BaseTypeBindingGenerator<ICar>()));
        IVehicleFactory<Mercedes> factory 
            = kernel.Get<IVehicleFactory<Mercedes>>();

        // act
        var car = factory.CreateVehicle();

        // assert
        Assert.IsType<Mercedes>(car);
    }
} 
```

和`InvalidCastException`抛出：

```
System.InvalidCastException was unhandled by user code
  Message=Unable to cast object of type 'Castle.Proxies.ObjectProxy' to type 'IVehicleFactory`1[Mercedes]'.
  Source=System.Core
  StackTrace:
       at System.Linq.Enumerable.<CastIterator>d__b1`1.MoveNext()
       at System.Linq.Enumerable.Single[TSource](IEnumerable`1 source)
       at Ninject.ResolutionExtensions.Get[T](IResolutionRoot root, IParameter[] parameters) in c:\Projects\Ninject\ninject\src\Ninject\Syntax\ResolutionExtensions.cs:line 37
       at NinjectFactoryTests.A_Generic_Vehicle_Factory_Creates_A_Car_Whose_Type_Name_Equals_Factory_Method_String_Argument() in C:\Programming\Ninject.Extensions.Conventions.Tests\NinjectFactoryTests.cs:line 37
  InnerException: 
```

和工厂界面：

```
public interface IVehicleFactory<T> where T : ICar
{
    T CreateVehicle();
} 
```

还有自定义实例提供程序，我什至无法让调试器停止其断点，所以我真的不知道那里发生了什么：

```
public class UseFirstGenericTypeArgumentInstanceProvider : StandardInstanceProvider
{
    protected override string GetName(MethodInfo methodInfo, object[] arguments)
    {
        var genericTypeArguments = methodInfo.GetGenericArguments();
        var genericMethodDefinition = methodInfo.GetGenericMethodDefinition();
        var g = genericMethodDefinition.MakeGenericMethod(genericTypeArguments.First());
        return g.MemberType.GetType().Name;
    }

    protected override ConstructorArgument[] GetConstructorArguments(MethodInfo methodInfo, object[] arguments)
    {
        return base.GetConstructorArguments(methodInfo, arguments).Skip(1).ToArray();
    }
} 
```

**编辑 1 - 更改** `IVehicleFactory` **签名和自定义实例提供程序**

这是我将`IVehicleFactory`签名更改为使用通用`Create<T>()`方法，并显式绑定`Mercedes`到自身。

```
public interface IVehicleFactory
{
    T CreateVehicle<T>() where T : ICar;
} 
```

以及返回第一个泛型类型参数名称的新自定义实例提供程序：

```
public class UseFirstGenericTypeArgumentInstanceProvider : StandardInstanceProvider
{
    protected override string GetName(MethodInfo methodInfo, object[] arguments)
    {
        var genericTypeArguments = methodInfo.GetGenericArguments();
        return genericTypeArguments[0].Name;
    }
} 
```

这是新的测试，仍然没有通过：

```
[Fact]
public void A_Generic_Vehicle_Factory_Creates_A_Car_Whose_Type_Name_Equals_Factory_Method_String_Argument()
{
    using (StandardKernel kernel = new StandardKernel())
    {
        // arrange
        kernel.Bind<IVehicleFactory>()
            .ToFactory(() => new UseFirstGenericTypeArgumentInstanceProvider())
            .InSingletonScope();
        kernel.Bind<Mercedes>().ToSelf();
        IVehicleFactory factory = kernel.Get<IVehicleFactory>();

        // act
        var car = factory.CreateVehicle<Mercedes>();

        // assert
        Assert.IsType<Mercedes>(car);
    }
} 
```

}

A`Ninject.ActivationException`被抛出：

```
Ninject.ActivationException: Error activating Mercedes
No matching bindings are available, and the type is not self-bindable.
Activation path:
  1) Request for Mercedes 
```

我不知道为什么它找不到`Mercedes`类，因为我明确地对它进行了自我绑定。你能看出我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:23:57.717

使用泛型方法：

```
public interface IVehicleFactory
{
    CreateVehicle<T>();
} 
```

# java - 如何读取 HTTP POST 请求返回的 XML？

> ID：15891051
> 
> 赞同：1
> 
> 时间：2013-04-08T23:55:02.437
> 
> 标签：java, xml, http, post, httpurlconnection

**不是我其他问题的重复。**

我正在发送这样的`POST`请求：

```
 String urlParameters = "a=b&c=d";
        String request = "http://www.example.com/";

        URL url = new URL(request);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();      
        connection.setDoOutput(true);
        connection.setDoInput(true);
        connection.setInstanceFollowRedirects(false); 
        connection.setRequestMethod("POST");
        connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded"); 
        connection.setRequestProperty("charset", "utf-8");
        connection.setRequestProperty("Content-Length", "" + Integer.toString(urlParameters.getBytes().length));
        connection.setUseCaches(false);

        DataOutputStream wr = new DataOutputStream(connection.getOutputStream());
        wr.writeBytes(urlParameters);
        wr.flush();
        wr.close();
        connection.disconnect(); 
```

如何读取从 HTTP`POST`请求返回的 xml 响应？特别是，我想将响应文件保存为 .xml 文件，然后读取它。对于我通常的`GET`要求，我使用这个：

```
 SAXBuilder builder = new SAXBuilder();
    URL website = new URL(urlToParse);
    ReadableByteChannel rbc = Channels.newChannel(website.openStream());
    FileOutputStream fos = new FileOutputStream("request.xml");
    fos.getChannel().transferFrom(rbc, 0, 1 << 24);
    fos.close();
    // Do the work 
```

**附录**：我正在使用以下代码，它工作得很好。但是，它忽略任何间距和换行，并将完整的 XML 内容视为单行。我如何解决它？

```
 InputStream is = connection.getInputStream();
    BufferedReader br = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb1 = new StringBuilder();
    String line;
    while ((line = br.readLine()) != null) {
        sb1.append(line);
    }
    FileOutputStream f = new FileOutputStream("request.xml");
    f.write(sb1.toString().getBytes());
    f.close();
    br.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:55:36.273

不要使用`Readers`and`readLine()`与 xml 数据。使用`InputStreams`和`byte[]`s。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T01:12:49.137

感谢 Pangea，我修改了他的代码，现在可以使用：

```
 TransformerFactory transFactory = TransformerFactory.newInstance();
    Transformer t= transFactory.newTransformer();
    t.setOutputProperty(OutputKeys.METHOD, "xml");
    t.setOutputProperty(OutputKeys.INDENT,"yes");                
    Source input = new StreamSource(is);
    Result output = new StreamResult(new FileOutputStream("request.xml"));
    transFactory.newTransformer().transform(input, output); 
```

# javascript - 将项目动态添加到 angularjs ng-repeat

> ID：15891052
> 
> 赞同：2
> 
> 时间：2013-04-08T23:55:05.593
> 
> 标签：javascript, angularjs

我有一个指令，可以生成具有添加和删除功能的拖放可重新排序列表。如果您在容器中单击，则会动态添加一个输入，您输入它，当您输入一个逗号时，您输入的值将被推送到与 ng-repeat 一起使用的列表中以构建列表。（这个网站的用户应该有点熟悉:)）

当支持它的初始对象不为空时，这非常有用。但是当对象开始为 null 并且您尝试添加第一项（通过检测 null 和 scope.$apply 初始化）时，不会生成标记。

这是一个笨拙的表达我的意思。 [http://plnkr.co/edit/Momlgpfy82kHRPwXGR8V?p=preview](http://plnkr.co/edit/Momlgpfy82kHRPwXGR8V?p=preview)

在我的应用程序中，数据来自外部来源，因此我无法确保非空列表。如何获得角度以正确响应数组初始化（以及稍后推送）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:15:50.087

将列表设置为空数组...当新项目被推入数组时，角度监听器将更新指令

[http://plnkr.co/edit/h3GOpTX6Chh1wjcM9QrV?p=preview](http://plnkr.co/edit/h3GOpTX6Chh1wjcM9QrV?p=preview)

# xaml - 如何从 Callisto WinRT 工具包显示自定义对话框？

> ID：15891053
> 
> 赞同：2
> 
> 时间：2013-04-08T23:55:06.347
> 
> 标签：xaml, windows-8, customdialog, callisto

我的问题就是这样。我应该如何显示 Callisto 工具包中的 CustomDialog 控件？我有以下 xaml：

```
<controls:LayoutAwarePage
x:Name="pageRoot"
x:Class="HeronClientWindowsStore.Views.SuggestEventDialogPage"
DataContext="{Binding DefaultViewModel, RelativeSource={RelativeSource Self}}"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:HeronClientWindowsStore.Views"
xmlns:controls="using:HeronClientWindowsStore.Controls"
xmlns:callisto="using:Callisto.Controls"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d">

<Page.Resources>
</Page.Resources>

<callisto:CustomDialog 
                     x:FieldModifier="public" 
                     x:Name="suggestEventDialog" 
                     Width="300" Height="500"
                     Title="Suggest an Event" 
                     Background="Teal" 
                     BackButtonVisibility="Visible">
    <StackPanel>
        <TextBlock 
                  Margin="0,0,0,8" 
                  Text="Suggest an event that should be added to Heron."
                  FontSize="14.6667" 
                  FontWeight="SemiLight" 
                  TextWrapping="Wrap" />
        <TextBlock
                  Margin="0,0,0,8"
                  FontSize="14.6667" 
                  FontWeight="SemiLight" 
                  Text="Event URL" />
        <callisto:WatermarkTextBox 
                  HorizontalAlignment="Left" 
                  Watermark="http://www.example.com" 
                  Width="400" 
                  Height="35" />
        <StackPanel 
                  Margin="0,20,0,0" 
                  HorizontalAlignment="Right" 
                  Orientation="Horizontal">
            <Button Content="OK" Width="90" Margin="0,0,20,0" />
            <Button Content="CANCEL" Width="90" />
        </StackPanel>
    </StackPanel>
</callisto:CustomDialog> 
```

它没有显示，我看不到任何触发它的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T04:55:16.680

您必须使用`IsOpen`属性来打开对话框。

我在这里粘贴我的工作代码。

XAML

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <Button Content="Show Dialog" Click="btnShowDialog_Click" />
    <callisto:CustomDialog 
                 x:FieldModifier="public" 
                 x:Name="suggestEventDialog" 
                 Title="Suggest an Event" 
                 Background="Teal" 
                 BackButtonVisibility="Visible"
                 BackButtonClicked="suggestEventDialog_BackButtonClicked_1">
        <StackPanel>
            <TextBlock 
              Margin="0,0,0,8" 
              Text="Suggest an event that should be added to Heron."
              FontSize="14.6667" 
              FontWeight="SemiLight" 
              TextWrapping="Wrap" />
            <TextBlock
              Margin="0,0,0,8"
              FontSize="14.6667" 
              FontWeight="SemiLight" 
              Text="Event URL" />
            <callisto:WatermarkTextBox 
              HorizontalAlignment="Left" 
              Watermark="http://www.example.com" 
              Width="400" 
              Height="35" />
            <StackPanel 
              Margin="0,20,0,0" 
              HorizontalAlignment="Right" 
              Orientation="Horizontal">
                <Button Content="OK" Width="90" Margin="0,0,20,0" />
                <Button Content="CANCEL" Width="90" />
            </StackPanel>
        </StackPanel>
    </callisto:CustomDialog>
</Grid> 
```

C＃

```
private void btnShowDialog_Click(object sender, RoutedEventArgs e)
{
    suggestEventDialog.IsOpen = true;
}

private void suggestEventDialog_BackButtonClicked_1(object sender, RoutedEventArgs e)
{
    suggestEventDialog.IsOpen = false;
} 
```

# salesforce - 将 wordpress 自定义帖子类型数据添加到外部数据库

> ID：15891056
> 
> 赞同：0
> 
> 时间：2013-04-08T23:55:36.633
> 
> 标签：salesforce, wordpress, custom-post-type

此功能将自定义帖子“事件”数据添加到 Salesforce 数据库中。我已经在 Wordpress 之外测试了该功能，它可以完美运行。当我通过添加新事件在 Wordpress 中对其进行测试时，不会产生错误，并且数据不会插入到 SF 数据库中。我还通过打印 $_POST 对此进行了测试，并看到正在收集数据。我怎样才能得到这个显示一些错误，以便我可以解决这个问题？

```
function add_campaign_to_SF( $post_id) {
    global $SF_USERNAME;
    global $SF_PASSWORD;

    if ('event' == $_POST['post-type']) {
        try {
              $mySforceConnection = new SforceEnterpriseClient();
              $mySoapClient = $mySforceConnection->createConnection(CD_PLUGIN_PATH . 'Toolkit/soapclient/enterprise.wsdl.xml');
              $mySFlogin = $mySforceConnection->login($SF_USERNAME, $SF_PASSWORD);

              $sObject = new stdclass();
              $sObject->Name = get_the_title( $post_id );
              $sObject->StartDate = date("Y-m-d", strtotime($_POST["events_startdate"]));
              $sObject->EndDate = date("Y-m-d", strtotime($_POST["events_enddate"]));
              $sObject->IsActive = '1';

              $createResponse = $mySforceConnection->create(array($sObject), 'Campaign');

              $ids = array();
                    foreach ($createResponse as $createResult) {
                        error_log($createResult);
                        array_push($ids, $createResult->id);
                    }

                } catch (Exception $e) {
                        error_log($mySforceConnection->getLastRequest());
                        error_log($e->faultstring);
                        die;
                    }
    }
 }

 add_action( 'save_post', 'add_campaign_to_SF'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:15:17.473

我会[`get_post_type()`](http://codex.wordpress.org/Function_Reference/get_post_type)用来检查“事件”帖子。用于[`error_log()`](http://php.net/manual/en/function.error-log.php)写入 PHP 错误日志以进行额外调试 - 检查您的 Salesforce 登录状态等。

请记住，*每次*[`save_post`](http://codex.wordpress.org/Plugin_API/Action_Reference/save_post)保存帖子（创建或更新）时都会运行，因此您可能需要在 Salesforce 中创建新帖子之前进行一些额外的检查（例如设置元值），否则您最终会出现重复。*`Campaign`*

 *```
function add_campaign_to_SF( $post_id ) {
    $debug = true;
    if ($debug) error_log("Running save_post function add_campaign_to_SF( $post_id )");
    if ( 'event' == get_post_type( $post_id ) ){
        if ($debug) error_log("The post type is 'event'");
        if ( false === get_post_meta( $post_id, 'sfdc_id', true ) ){
            if ($debug) error_log("There is no meta value for  'sfdc_id'");
            // add to Salesforce, get back the ID of the new Campaign object
            if ($debug) error_log("The new object ID is $sfdc_id");
            update_post_meta( $post_id, 'sfdc_id', $sfdc_id );
        }
    }
}
add_action( 'save_post', 'add_campaign_to_SF' ); 
```*

# asp.net-mvc - 无法在 MVC 视图中显示来自 @Html.ValidationSummary() 的验证消息

> ID：15891058
> 
> 赞同：0
> 
> 时间：2013-04-08T23:55:47.323
> 
> 标签：asp.net-mvc, validation, razor

我在局部视图中创建了一个相当简单的表单，并将表单加载到 jquery 对话框中。视图与模型紧密绑定。当用户在没有输入任何输入的情况下单击提交按钮时，我需要显示验证消息。

```
<div>
    <form method="post" enctype="multipart/form-data" id="ssimForm" action="Home/ProcessUploadedFile"
    onsubmit="return false;">
    <div>
        <h3>
            Select the file to be uploaded :</h3>
        <span>
            <input type="file" name="UploadFileName" id="UploadFileName" /></span>
    </div>
    <div>
        <h3>
            Select the date range :</h3>
        <span class="uslabel">From Date(MM/dd/yyyy): </span>
        <input class="usdate" id="usfromdate" name="StartDate" type="date" />
        <span class="uslabel">To Date(MM/dd/yyyy): </span>
        <input class="usdate" id="ustodate" name="EndDate" type="date" />
    </div>    
    <div>
        <br />        
        <input type="submit" id="submitButton" name="submitButton" value="Process File" />
    </div>
    @Html.ValidationSummary()
    <div class="message-success">
        <span>@ViewBag.Confirmation</span>
    </div>
    <div class="message-error">
        <span>@ViewBag.Error</span>
    </div>
    </form>  
</div> 
```

现在来了实际的问题。当我提交表单时，我能够看到填充了消息的validationSummary 对象，但它们没有在屏幕上呈现。

如果我用 jquery ajax 调用的响应替换对话框的内容，我能够看到这些消息，它从服务器端获取整个视图。我不想采用这种方法，因为我相信这不是在 MVC 中返回验证摘要的正确方法。

我错过了什么吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:24:21.643

我不知道你为什么没有`@using (Html.BeginForm()) { }`块。

这是我的博客文章，提供了一种快速简便的方法来设置 MVC3+ 的验证摘要 + 不显眼的验证。
[http://geekswithblogs.net/stun/archive/2011/01/28/aspnet-mvc-3-client-side-validation-summary-with-jquery-validation-unobtrusive-javascript.aspx](http://geekswithblogs.net/stun/archive/2011/01/28/aspnet-mvc-3-client-side-validation-summary-with-jquery-validation-unobtrusive-javascript.aspx)

# html - 谷歌分析一直说没有安装跟踪但

> ID：15891062
> 
> 赞同：1
> 
> 时间：2013-04-08T23:56:04.060
> 
> 标签：html, seo, google-analytics

我对 Google 分析有疑问。最初我在页脚中有它，它显示没有安装跟踪。我只是将它移到头部，分析配置文件仍然显示它未安装（通过谷歌的检查时间确认）但在我正在跟踪的分析配置文件中？我有 3 次访问？

这里发生了什么？

www.kildarepainter.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T19:44:45.427

您网站上的 GA 跟踪代码看起来不正常。它应该是这样的：

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-39945787-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

复制此代码并将其替换为您网站上的代码。转到您的 GA 面板并检查一下

# php - 使用 Select、PHP、FPDF 从数据库显示时出现问题

> ID：15891064
> 
> 赞同：0
> 
> 时间：2013-04-08T23:56:20.207
> 
> 标签：php, mysql, fpdf

我在使用 FPDF 文件中的 select 语句显示数据库中的信息时遇到问题。我创建了两个文件。第一个文件，用户输入 DonorID 并点击创建发票。该文件指向 fpdf 文件，该文件创建一个 pdf 文件并显示发票。它有一个似乎不会产生任何结果的 select 语句。其他所有内容都正确显示，但该表未显示数据库中的任何信息。

这是第一个文件，名为 createinvoice.php：

```
<!DOCTYPE html>
<html>
<title> Create Invoice Page</title>
<head>
</head>
<body>
    <h1>Create Invoice</h1> 
    <form action="invoicereportpdf.php" method="POST">
    <p>Create an invoice by typing in the Donor ID</BR>
    Donor ID: <input type= "text" name="donorid" size="15"/></br>

    <br>
    <div id="container" style="width:900px">
        <br>
        <input type= "submit" name= "submit" value="Create Invoice"/>

        <?php include '/html/includedonations.php'; ?> 
    </div>
</body>
</html> 
```

这是第一个名为 invoicereportpdf.php 的文件调用的第二个文件

```
<?php
define('FPDF_FONTPATH','font/');
require('mysql_table.php');

class PDF extends PDF_MySQL_Table
{
    function Header()
    {
        //Title
        $this->SetFont('Arial','',14);
        $this->Cell(0,6,'Invoice',0,1,'C');
        $this->Ln(10);
        $this->Cell(0,6,'From',0,1,'C');
        $this->Ln(12);
        $this->Cell(0,6,'Vetsports.org',0,1,'C');
        $this->Ln(14);
        $this->Cell(0,6, 'Thank you for your donation to Vetsports.org, your 
        donation is greatly appreciated.',0,1,'L');
        $this->Ln(16);
        $this->Cell(0,6, 'Please keep this receipt for your tax 
        purposes.',0,1,'L');
        $this->Ln(16);
        //Ensure table header is output
        parent::Header();
    }
}

//Connect to database
mysql_connect('localhost','root','');
mysql_select_db('charitabledb');

$donorid=$_POST['donorid'];

$pdf=new PDF();
$pdf->Open();
$pdf->AddPage();
//table: specify 4 columns
$pdf->AddCol('ID',15,'ID','C');
$pdf->AddCol('date',15,'Date','C');
$pdf->AddCol('donorid',25,'Donor ID','C');
$pdf->AddCol('firstname',25,'First Name','L');
$pdf->AddCol('lastname',25,'Last Name','L');
$pdf->AddCol('paymenttype',35,'Payment Type','L');
$pdf->AddCol('organization',30,'Organization','L');
$pdf->AddCol('Income',40,'Amount Donated','L');
$prop=array('HeaderColor'=>array(255,150,100),
'color1'=>array(210,245,255),
'color2'=>array(255,255,210),
'padding'=>2);
$pdf->Table('select ID,date,donorid,firstname,lastname,paymenttype,organization,Income from donations where donorid="$donorid" order by date ',$prop);

$pdf->Output();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:06:20.690

对，所以，我有错误的报价。以下是我必须更改声明的方法" ("select ID,date,donorid,firstname,lastname,paymenttype, organization,Income fromdonations where donorid= '$donorid'",$prop);

# python - Python 的 .group() 仅返回第一个匹配项

> ID：15891065
> 
> 赞同：1
> 
> 时间：2013-04-08T23:56:26.100
> 
> 标签：python, regex

我运行了以下代码，只得到了第一个 ')' 作为匹配项。有人可以帮我解释为什么没有返回常规的贪婪 '))' 吗？

```
r=re.compile('\)')
var=r.search('- hi- ))there')
print var.group() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T00:01:53.413

[`search`](http://docs.python.org/2/library/re.html#re.RegexObject.search)只会返回第一个匹配项。

要查找所有匹配项，请使用[`findall`](http://docs.python.org/2/library/re.html#re.RegexObject.findall)：

```
r=re.compile('\)')
var= r.findall('- hi- )) there')
print (var) 
```

如果您想在一场比赛中找到两个大括号，请使用：

```
r=re.compile('\)+') 
```

`+`与 1 个或多个对象的匹配项。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T23:58:57.740

您的正则表达式并不贪婪。事实上，它被设置为只匹配一个字符。如果您希望它也匹配重复，请添加`+`：

```
>>> r=re.compile('\)+')
>>> var=r.search('- hi- ))there')
>>> print var.group()
)) 
```

# git - Git 子模块：我需要哪个提交（哈希）？

> ID：15891069
> 
> 赞同：1
> 
> 时间：2013-04-08T23:57:38.317
> 
> 标签：git, git-submodules

当我将 git 工作目录回滚到特定提交时，子模块显示为“已修改”。子模块已签入并且没有修改过的文件，但它的提交与需要的不同。如何找出正确提交的名称/哈希？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T00:05:50.390

如果您要做的是让您的子模块也回滚到其适当的提交，那么请尝试：

`git submodule update --recursive`

这会将您的所有子模块更新为它们应该位于的提交（引用您的父存储库随每个提交存储的关于其子模块应该在什么提交的元数据）。

# xml - CSV 到 XML 的修改（XSLT？）

> ID：15891070
> 
> 赞同：1
> 
> 时间：2013-04-08T23:57:49.910
> 
> 标签：xml, xslt, csv

我一直在论坛上搜索我的问题的答案，但没有任何运气。我希望你能帮助我。我有一个简单的 CSV 文件，需要将其转换为 XML（这部分很简单），但我需要对其进行修改以使其包含子元素。例子：

我有的：

```
<Unit>
        <UnitID>K000009107</UnitID>
        <DateLastModified>2003-06-23</DateLastModified>
        <Family>SAPOTACEAE</Family>
        <Genus>Pouteria</Genus>
        <Species>ferrugineo-tomentos</Species>
        <Identifier>Smith, J</Identifier>
        <StartMonth>05</StartMonth>
        <StartYear>1997</StartYear>
        <TypeStatus>Type</TypeStatus>
</Unit> 
```

我需要的：

```
<Unit>
    <UnitID>K000009107</UnitID>
    <DateLastModified>2003-06-23</DateLastModified>
    <Identification StoredUnderName="true">
        <Family>SAPOTACEAE</Family>
        <Genus>Pouteria</Genus>
        <Species>ferrugineo-tomentos</Species>
        <Identifier>Smith, J</Identifier>
        <IdentificationDate>
            <StartMonth>05</StartMonth>
            <StartYear>1997</StartYear>
        </IdentificationDate>
    <TypeStatus>Type</TypeStatus>
    </Identification>
</Unit> 
```

我将需要对大型数据集进行此修改。我猜 XSLT 会完成这项工作，但我不知道它是如何工作的。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:20:41.347

**这是执行此操作的一种方法**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="/*">
  <xsl:copy>
   <xsl:apply-templates select="UnitID|DateLastModified"/>
   <Identification StoredUnderName="true">
    <xsl:apply-templates select=
     "*[not(contains('|UnitID|DateLastModified|StartMonth|StartYear|TypeStatus|',
                    concat('|',name(),'|')))]"/>
    <IdentificationDate>
     <xsl:apply-templates select="StartMonth|StartYear"/>
    </IdentificationDate>
    <xsl:apply-templates select="TypeStatus"/>
   </Identification>
  </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Unit>
        <UnitID>K000009107</UnitID>
        <DateLastModified>2003-06-23</DateLastModified>
        <Family>SAPOTACEAE</Family>
        <Genus>Pouteria</Genus>
        <Species>ferrugineo-tomentos</Species>
        <Identifier>Smith, J</Identifier>
        <StartMonth>05</StartMonth>
        <StartYear>1997</StartYear>
        <TypeStatus>Type</TypeStatus>
</Unit> 
```

**产生了想要的正确结果：**

```
<Unit>
   <UnitID>K000009107</UnitID>
   <DateLastModified>2003-06-23</DateLastModified>
   <Identification StoredUnderName="true">
      <Family>SAPOTACEAE</Family>
      <Genus>Pouteria</Genus>
      <Species>ferrugineo-tomentos</Species>
      <Identifier>Smith, J</Identifier>
      <IdentificationDate>
         <StartMonth>05</StartMonth>
         <StartYear>1997</StartYear>
      </IdentificationDate>
      <TypeStatus>Type</TypeStatus>
   </Identification>
</Unit> 
```

**这种转换可以以失去灵活性为代价缩短一点：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
  <xsl:copy>
   <xsl:copy-of select="UnitID|DateLastModified"/>
   <Identification StoredUnderName="true">
    <xsl:copy-of select=
     "*[not(contains('|UnitID|DateLastModified|StartMonth|StartYear|TypeStatus|',
                    concat('|',name(),'|')))]"/>
    <IdentificationDate>
     <xsl:copy-of select="StartMonth|StartYear"/>
    </IdentificationDate>
    <xsl:copy-of select="TypeStatus"/>
   </Identification>
  </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

> ID：15891075
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# java - 通过与另一个列表进行比较从一个列表中删除重复项

> ID：15891076
> 
> 赞同：9
> 
> 时间：2013-04-08T23:58:34.477
> 
> 标签：java, algorithm, list

我有两个对象列表，我想从另一个列表中的一个列表中删除实例。

例如，我有以下两个列表，并假设每个字母代表对象。

列表列表 A = {A、B、C、D、E、F、G、H、I、J}

列表列表 B= {D, G, K, P, Z}

现在，显然 listB 在 listA 上也有 D 和 G，所以我希望 listA 是这样的

列表A = {A，B，C，E，F，H，I，J}

你们能否建议O（n）或小于O（n2）的解决方案。

我可以遍历两个列表并通过比较删除重复的实例，但我想要更有效的东西。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T00:05:30.680

如果列表未排序，并且是 ArrayLists 或其他具有 O(n) 包含方法的类似列表实现，那么您应该使用 listB 的项目创建一个 HashSet 以执行删除。如果这些项目没有放入一个集合中，那么你最终会得到 O(n^2) 的性能。

因此，做你需要的最简单的方法是：

```
listA.removeAll(new HashSet(listB)); 
```

`ArrayList.removeAll(Collection)`不会为你把物品放入一个集合中（至少在我检查的JDK 1.6和1.7版本中），这就是为什么你需要在上面自己创建HashSet。

removeAll 方法将在遍历列表时将您希望保留的项目复制到列表的开头，从而避免每次删除时都会压缩数组，因此如图所示对传入的 HashSet 使用它是合理的最佳选择，并且是 O(n)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T00:00:03.037

您可以将两个列表元素添加到[Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)

要从另一个列表中删除一个列表中的元素，请尝试`listA.removeAll(listB);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T00:02:34.767

就像 ssantos 回答的那样，您可以使用 Set。

或者，如果列表已排序，那么您可以交替地遍历它们。遍历 ListA 直到到达大于 ListB 的当前元素的元素，然后遍历 ListB 直到到达大于 ListA 的当前元素的元素，依此类推。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T01:25:44.743

**以下是在预期时间`O(n)`**内解决的一些伪C。

```
lenA = length pf listA
lenB = length of listB
shortList = (lenA <= lenB) ? A : B
longList  = (shortList == A) ? B : A

create hash table hashTab with elements of shortList

for each element e in longList:  
    is e present in hashTab:
        remove e from longList

now, longList contains the merged duplicate-free elements 
```

# html - 在页面两侧的同一行上显示按钮

> ID：15891077
> 
> 赞同：0
> 
> 时间：2013-04-08T23:58:35.443
> 
> 标签：html, css, css-float

我有左右按钮，我想在页面上某些内容的顶部和底部显示为导航按钮，如下所示：

```
<div style="float: right;">     
    <button class="right">Right button</button>
</div>
<div>       
    <button class="left">Left button</button>
</div>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus sagittis faucibus
feugiat. Suspendisse felis tortor, sodales quis scelerisque a, malesuada lobortis erat.
Etiam vel lectus vitae nulla imperdiet dapibus. Curabitur accumsan pretium viverra. 
Vivamus sit amet gravida ante. Aenean elit lorem, aliquet porta sollicitudin non, 
elementum aliquam massa. Ut magna arcu, malesuada lacinia rutrum ornare, accumsan sed 
eros.</p>

<div style="float: right;">     
    <button class="right">Right button</button>
</div>
<div>       
    <button class="left">Left button</button>
</div> 
```

我遇到的问题（如此处所示[**）**](http://jsfiddle.net/P2rNC/1/)是，如果我只有右按钮但没有左按钮，则使用 float 将按钮浮动到我的段落右侧（这是正常的，因为这是按钮之后的内容），但是如果我使用 text-align: right 而不是 float right，一切正常。有没有更好的方法可以做到这一点，而无需检查条件以查看我的左按钮是否存在并将我的浮动更改为文本对齐？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:15:47.740

不要使用浮动：对，没关系

```
<div style="text-align: right;clear:left;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:01:36.787

如果你把

```
p {
    float: none;
    clear: both;
} 
```

那应该解决它：http: [//jsfiddle.net/P2rNC/2/](http://jsfiddle.net/P2rNC/2/)

# mysql - 使用现有数据更改变量类型 mysql

> ID：15891079
> 
> 赞同：2
> 
> 时间：2013-04-08T23:58:55.297
> 
> 标签：mysql, variables

嗨，我的 MYSQL 数据库中有一个变量“文本”，它收集状态更新之类的信息。我相信这个变量的限制是 200？

*   这是已经设置好的东西吗？

*   如果是这样的话，如果用户想要详细说明，什么变量既适合快速 150 个字符的更新，也适合 1500 字的文章？

*   如果当前表单中当前存在数据，我如何在 phpmyadmin 中将其更改为所需的新变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T08:05:51.337

[http://dev.mysql.com/doc/refman/5.6/en/string-type-overview.html](http://dev.mysql.com/doc/refman/5.6/en/string-type-overview.html)

VARCHAR

> 一个可变长度的字符串。M 表示以字符为单位的最大列长度。M 的范围是 0 到 65,535。

文本

> 最大长度为 65,535 (216 – 1) 个字符的 TEXT 列。

我认为 VARCHAR(1500) 和 TEXT(1500) 都适合你。

> 如果当前表单中当前存在数据，我如何在 phpmyadmin 中将其更改为所需的新变量？

要更改列的数据类型，我只会使用 SQL，这适用于任何工具。

```
ALTER TABLE  `tablename` CHANGE  `colname` VARCHAR( 1500 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-30T19:08:09.600

`Change`对我们不起作用，我们需要使用`Modify`：

```
ALTER TABLE `tablename` MODIFY `colname` VARCHAR( 1500 ); 
```

# sql - 如何编写 PL/SQL 过程以从另一个帐户复制表和内容

> ID：15891086
> 
> 赞同：0
> 
> 时间：2013-04-08T23:59:30.080
> 
> 标签：sql, database, oracle, plsql, procedure

我需要编写一个 PL/SQL 过程来创建与另一个帐户中的表匹配的表（我有权访问该帐户）。它们需要具有相同的列和类型。此外，它们需要填充相同的数据

帮我！

编辑：

```
SQL> CREATE OR REPLACE PROCEDURE MakeTables
  2  AS
  3  BEGIN
  4  EXECUTE IMMEDIATE
  5  'CREATE TABLE Table1 AS (SELECT * FROM ANOTHER_ACCT.Table1);
  6  CREATE TABLE Table2 AS (SELECT * FROM ANOTHER_ACCT.Table2);
  7  CREATE TABLE Table3 AS (SELECT * FROM ANOTHER_ACCT.Table3);
  8  CREATE TABLE Table4 AS (SELECT * FROM ANOTHER_ACCT.Table4)';
  9  END;
 10  /

Procedure created. 
```

但是当我运行它时，我得到了这个错误：

```
SQL> BEGIN
  2  MakeTables;
  3  END;
  4  /
BEGIN
*
ERROR at line 1:
ORA-00911: invalid character
ORA-06512: at "BS135.MAKETABLES", line 4
ORA-06512: at line 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:06:48.813

当您说另一个“帐户”时，您的意思是另一个“用户/模式”吗？如果是这样，这可能很简单。去阅读/谷歌关于“oracle create table as select”。这使您可以从 select 语句创建一个表，因此您可以发出一个语句，例如

```
create table new_table as select * from other_schema.old_table 
```

除非您想自动化创建许多表的过程，否则您不需要任何 PL/SQL。然后您可以作为驱动程序查询数据字典。

（另外，请阅读如何在这里提出正确的问题： [https](https://stackoverflow.com/questions/how-to-ask) ://stackoverflow.com/questions/how-to-ask ）

# jquery - jquery中的简单图像滑块

> ID：15891088
> 
> 赞同：1
> 
> 时间：2013-04-08T23:59:45.467
> 
> 标签：jquery, slider

我在这个网站上找到了一些“图像滑块”的代码，我正在尝试对其进行更改以满足我的需要。我希望能够遍历 3 或 4 个图像文件，但我会满足于两个，直到我得到这个代码排序。

你能帮我修复这段代码吗？我有两个图像，img1_on.png 和 img2_on.png。

```
<img id ="rotate_images" src="img1_on.png"/>

$('rotate_images').on({
    'click': function() {
         var src = ($(this).attr('src') === 'img1_on.png')
            ? 'img2_on.png'
            : 'img1_on.png';
         $(this).attr('src', src);
    }
}); 
```

当我有 $('img').on 而不是 $('rotate_images').on 时，它起作用了。所以我知道发生了什么-'当您单击页面上的任何图像时，如果当前图像不是 img1_on.png，则显示 img1_on.png ......但我希望代码适用于图像的特定 div，没有任何图像。

任何帮助，将不胜感激。

克里斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T00:01:41.177

将您的选择器更改为：

```
$('#rotate_images').. 
```

你忘了`#`

# extjs - 将值保存为字符串数组，而不是自定义 xtype CQ5 中的逗号分隔字符串

> ID：15891089
> 
> 赞同：0
> 
> 时间：2013-04-08T23:59:48.137
> 
> 标签：extjs, widget, adobe, aem

我已经为多选创建了一个自定义 xtype，但我无法理解需要执行哪些更改才能将值保存为字符串数组而不是逗号分隔的字符串。

目前它存储的值如下

**房地产**行业 **类型** 字符串 **价值** 政府、医疗

相反，我想按如下方式保存信息

**房地产**行业 **类型** String[] **取值** 政府、医疗保健

任何建议，指针高度赞赏。

```
CQ.Ext.form.Multiselect = CQ.Ext.extend(CQ.Ext.form.Field,  {
store:null,
storeUrl:'',
displayField:'text',
valueField:'value',
allowBlank:true,
minLength:0,
blankText:CQ.Ext.form.TextField.prototype.blankText,
copy:false,
allowDup:false,
allowTrash:false,
legend:null,
focusClass:undefined,
delimiter:',',
view:null,
dragGroup:null,
dropGroup:null,
tbar:null,
appendOnly:false,
sortField:null,
sortDir:'ASC',
defaultAutoCreate : {tag: "div"},

initComponent: function(){
    CQ.Ext.form.Multiselect.superclass.initComponent.call(this);
    this.addEvents({
        'dblclick' : true,
        'click' : true,
        'change' : true,
        'drop' : true
    });    
},
onRender: function(ct, position){
    var fs, cls, tpl;
    CQ.Ext.form.Multiselect.superclass.onRender.call(this, ct, position);

    cls = 'ux-mselect';

    fs = new CQ.Ext.form.FieldSet({
        renderTo:this.el,
        title:this.legend,
        height:this.height,
        width:this.width,
        style:"padding:1px;",
        tbar:this.tbar
    });
    if(!this.legend){
    //fs.el.down('.'+fs.headerCls).remove();
    fs.body.addClass(cls);
    }
    tpl = '<tpl for="."><div class="' + cls + '-item';
    if(CQ.Ext.isIE || CQ.Ext.isIE7 || CQ.Ext.isOpera )tpl+='" unselectable=on';
    else tpl+=' x-unselectable"';
    tpl+='>{' + this.displayField + '}</div></tpl>';

     this.store = new CQ.Ext.data.JsonStore({
            autoload:true,
            url: CQ.HTTP.externalize(this.storeUrl),
            fields:['value','text']

    });

     this.store.load();

    this.view = new CQ.Ext.ux.DDView({
        multiSelect: true, store: this.store, selectedClass: cls+"-selected", tpl:tpl,
        allowDup:this.allowDup, copy: this.copy, allowTrash: this.allowTrash,
        dragGroup: this.dragGroup, dropGroup: this.dropGroup, itemSelector:"."+cls+"-item",
        isFormField:false, applyTo:fs.body, appendOnly:this.appendOnly,
        sortField:this.sortField, sortDir:this.sortDir
    });

    fs.add(this.view);

    this.view.on('click', this.onViewClick, this);
    this.view.on('beforeClick', this.onViewBeforeClick, this);
    this.view.on('dblclick', this.onViewDblClick, this);
    this.view.on('drop', function(ddView, n, dd, e, data){
        return this.fireEvent("drop", ddView, n, dd, e, data);
    }, this);

    this.hiddenName = this.name;
    var hiddenTag={tag: "input", type: "hidden", value: "", name:this.name};
    if (this.isFormField) {
        this.hiddenField = this.el.createChild(hiddenTag);
    } else {
        this.hiddenField = CQ.Ext.get(document.body).createChild(hiddenTag);
    }
    fs.doLayout();
},

initValue:CQ.Ext.emptyFn,

onViewClick: function(vw, index, node, e) {
    var arrayIndex = this.preClickSelections.indexOf(index);
    if (arrayIndex  != -1)
    {
        this.preClickSelections.splice(arrayIndex, 1);
        this.view.clearSelections(true);
        this.view.select(this.preClickSelections);
    }
    this.fireEvent('change', this, this.getValue(), this.hiddenField.dom.value);
    this.hiddenField.dom.value = this.getValue();
    this.fireEvent('click', this, e);
    this.validate();       
},

onViewBeforeClick: function(vw, index, node, e) {
    this.preClickSelections = this.view.getSelectedIndexes();
    if (this.disabled) {return false;}
},

onViewDblClick : function(vw, index, node, e) {
    return this.fireEvent('dblclick', vw, index, node, e);
}, 

getValue: function(valueField){
    var returnArray = [];
    var selectionsArray = this.view.getSelectedIndexes();
    if (selectionsArray.length == 0) {return '';}
    for (var i=0; i<selectionsArray.length; i++) {
        returnArray.push(this.store.getAt(selectionsArray[i]).get(((valueField != null)? valueField : this.valueField)));
    }
    return returnArray;
},

setValue: function(values) {
    var index;
    var selections = [];
    this.view.clearSelections();
    this.hiddenField.dom.value = '';

    if (!values || (values == '')) { return; }

    if (!(values instanceof Array)) { values = values.split(this.delimiter); }
    for (var i=0; i<values.length; i++) {
        index = this.view.store.indexOf(this.view.store.query(this.valueField,
            new RegExp('^' + values[i] + '$', "i")).itemAt(0));
        selections.push(index);
    }
    this.view.select(selections);
    this.hiddenField.dom.value = values;
    for (var i=0; i<values.length; i++) {
     this.listOfIndustries=values[i];
     alert(values[i]);
    }
    this.validate();
},   

getRawValue: function(valueField) {
    var tmp = this.getValue(valueField);

    if (!tmp) {

        tmp = [];
    }

    return tmp;
},

setRawValue: function(values){
    setValue(values);
},

validateValue : function(value){
    if (value.length < 1) { // if it has no value
         if (this.allowBlank) {
             this.clearInvalid();
             return true;
         } else {
             this.markInvalid(this.blankText);
             return false;
         }
    }
    if (value.length < this.minLength) {
        this.markInvalid(String.format(this.minLengthText, this.minLength));
        return false;
    }
    if (value.length > this.maxLength) {
        this.markInvalid(String.format(this.maxLengthText, this.maxLength));
        return false;
    }
    return true;
}
});

CQ.Ext.reg("industriesmultiselect", CQ.Ext.form.Multiselect); 
```

环境 CQ 5.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-14T12:56:57.050

**简短的回答：**
您需要使用多个底层`input`元素，而不是使用一个隐藏字段来存储您的值，每个元素都具有相同的`name`属性，以便 Sling Post Servlet 将输出解释为多值属性。有关动态添加新字段的示例，请参阅多字段小部件`setValue`和`addItem`方法。`/libs/cq/ui/widgets/source/widgets/form/MultiField.js`

**更长的解释：**
看起来你`getValue`做了你所期望的，但问题是该方法没有被调用来提供提交的值。如果您在标准对话框中使用此小部件，则父表单面板将提交在 DOM 层次结构中其下方的输入元素中指定的值。

换句话说，您需要将多个值应用于 DOM 元素。

`CQ.Ext.form.Field`您正在扩展的仅定义了一个基础输入元素，您尝试使用以下值数组设置该元素`setValue`：

```
this.hiddenField.dom.value = values; 
```

并且在`onViewClick`

```
this.hiddenField.dom.value = this.getValue(); 
```

由于`hiddenField`是“隐藏”类型的输入标记，它包含一个字符串值，当您尝试以这种方式设置它时，您实际上是在存储调用`toString()`值数组的结果。这就是为什么您最终会提交一串逗号分隔值。

如果您希望此小部件与标准表单提交基础架构一起使用，您将需要维护一整套隐藏字段。或者，您可以在适当的地方实现您自己的提交事件侦听器，并使用 Ext 或 jQuery 以您的数组（直接来自`getValue()`）作为参数之一发布 AJAX 请求。

# web-services - 获取所请求客户端的 IP 地址（Soap 消息）

> ID：15891092
> 
> 赞同：0
> 
> 时间：2013-04-09T00:00:05.233
> 
> 标签：web-services, soap, inbound, clientip

我正在创建肥皂消息，需要找到一个请求的客户端 IP。我一直在寻找一种方法来查找客户端 IP，但仍然无法。你能告诉我在收到客户端请求时如何找到客户端 IP 的步骤吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T00:28:48.070

因此，您希望能够从服务内部查看使用 Web 服务的客户端的 IP 地址吗？

您可以创建一个这样的类来检查您的一些服务器变量，其中一些从 HTTP 标头中提取数据。我发现只需查看 HTTP_X_FORWARDED_FOR 和 REMOTE_ADDR 就可以解决问题（例如在 C# 中）：

```
public class IP
{
    public static String UserHostAddress { get { return HttpContext.Current.Request.UserHostAddress; } }
    public static String REMOTE_ADDR { get { return HttpContext.Current.Request.ServerVariables["REMOTE_ADDR"]; } }
    public static String HTTP_X_FORWARDED_FOR { get { return HttpContext.Current.Request.ServerVariables["HTTP_X_FORWARDED_FOR"]; } }
    public static String HTTP_CLIENT_IP { get { return HttpContext.Current.Request.ServerVariables["HTTP_CLIENT_IP"]; } }
    public static String HTTP_X_FORWARDED { get { return HttpContext.Current.Request.ServerVariables["HTTP_X_FORWARDED"]; } }
    public static String HTTP_X_CLUSTER_CLIENT_IP { get { return HttpContext.Current.Request.ServerVariables["HTTP_X_CLUSTER_CLIENT_IP"]; } }
    public static String HTTP_FORWARDED_FOR { get { return HttpContext.Current.Request.ServerVariables["HTTP_FORWARDED_FOR"]; } }
    public static String HTTP_FORWARDED { get { return HttpContext.Current.Request.ServerVariables["HTTP_FORWARDED"]; } }

    public static String IP_ADDRESS
    {
        get
        {
            if (HTTP_X_FORWARDED_FOR != null)
            {
                return HTTP_X_FORWARDED_FOR;
            }

            return REMOTE_ADDR;
        }
    }
} 
```

# dynamics-crm-2011 - Dynamics CRM 2011 - 查看不显示相关信息

> ID：15891095
> 
> 赞同：1
> 
> 时间：2013-04-09T00:00:23.907
> 
> 标签：dynamics-crm-2011

我正在尝试创建一个显示订单数据的视图。从订单到订单付款存在一对多关系。付款将显示在订单上。我遇到的问题是，当您运行查询时，付款信息不会显示。这是视图中的 XML。

```
<?xml version="1.0"?>
    -<fetch distinct="false" mapping="logical" output-format="xml-platform" version="1.0">
    -<entity name="salesorder"><attribute name="name"/>
         <attribute name="customerid"/>
         <attribute name="totalamount"/>
         <attribute name="salesorderid"/>
         <order descending="false" attribute="name"/>
    -<filter type="and"><condition attribute="totalamountlessfreight" value="0"
           operator="gt"/>
         <condition attribute="ree_orderdate" operator="this-month"/>
     </filter>
    -<link-entity name="ree_salesorderpayment" alias="a_eaddfe488ba0e2118a9d78e3b508542d" link-         type="outer" visible="false" to="ree_payment" from="ree_salesorderpaymentid">
         <attribute name="ree_paymentdate"/>
         <attribute name="ree_paymentamount"/>
     </link-entity> 
     </entity></fetch> 
```

这可能吗？

谢谢，加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:56:15.420

您是否创建了这个 XML？一个很酷的新功能是 Advanced Find，您可以下载 FecthXml。在高级查找中，您可以更改过滤器并查看查询失败的位置。

编辑：在高级查找中，您可以设置所需的所有查询，制作过滤器（只需添加列并应用运算符 AND 和 OR），当您想要过滤相关实体时，您可以进行连接。之后您可以下载 FetchXML，因此我们可以确定 FetchXML 的格式正确。如果没有得到任何记录，问题出在您的数据中，而不是在 FetchXML 中，所以我建议您删除过滤器以了解问题出在哪里。

我不知道您是哪个登录名，但如果您不使用管理员，您可能会发现一些关于安全权限的信息。

您可以尝试更改实体，对 ree_salesorderpayment 实体进行查询，然后与 salesorder 进行联接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:06:45.763

Stunnware [Tools](http://www.stunnware.com/products/tools4/download.htm)应用程序很旧，但仍然适用于 FetchXML。在引用奇怪的查询行为之前，我注意到的一件事是，如果货币字段的行为异常，那么将 transactioncurrencyid 字段添加到列中会有所帮助。

# objective-c - NSTextField 点击率？

> ID：15891098
> 
> 赞同：10
> 
> 时间：2013-04-09T00:00:45.477
> 
> 标签：objective-c, macos, cocoa, interface-builder

`NSTextField`我的OS X 应用程序中有一个覆盖大错误消息的静态信息。我试图让它允许用户单击它下面的控件。

在 IB 中，我取消选中“启用”并选中“拒绝第一响应者”

我也在代码中完成了它，因为那不起作用：

```
[largeErrorText setEnabled:NO];
[largeErrorText setRefusesFirstResponder:YES]; 
```

尽管如此，它还是妨碍了与它下面的对象进行交互。任何想法它可能是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-01-11T09:48:44.663

我发现使对象对单击透明的唯一方法是对该对象进行子类化（在您的情况下为 NSTextField）并覆盖返回 nil 的 hitTest 方法。这样 NSTextField 将不会响应单击，因此下面的 NSView 将响应单击。

```
- (NSView*)hitTest:(NSPoint)aPoint
{
    return nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:42:48.637

我假设您正在描述如下图所示的场景：

![在此处输入图像描述](https://i.stack.imgur.com/zmojs.png)

内部红色矩形是`NSTextField`标签的框架轮廓，您是说即使您禁用了文本字段并设置了拒绝第一响应者，您的点击也不会进入`NSButton`？

此设计方案描述了一种称为“重叠同级视图”的条件。如果可能的话，我通常会尽量避免这种情况。如果不能，您可以通过确保`NSTextField`标签位于您希望能够与之交互的所有其他 UI 对象的“后面”来获得所需的行为。您可以通过选择标签并选择 Editor > Arrange > Send to Back 来做到这一点。这将确保按钮位于文本字段的前面，以便它可以正确拦截鼠标事件。

# android - 由于以下原因，无法将地理点添加到谷歌地图；无法获取连接工厂客户端

> ID：15891099
> 
> 赞同：0
> 
> 时间：2013-04-09T00:00:53.203
> 
> 标签：android, google-maps, mapactivity, mylocationoverlay

尝试在谷歌地图上绘制多个地理点位置时出现此错误。我正在通过 PHP 和 JSON 从 MySQL 数据库中读取纬度和经度。我查看了主要示例，例如[无法获取连接工厂客户端](https://stackoverflow.com/questions/2199403/couldnt-get-connection-factory-client)，[无法获取连接工厂客户端 - 与 Google 地图打架](https://stackoverflow.com/questions/7982320/couldnt-get-connection-factory-client-fighting-with-google-maps)，[Android MapActivity：无法获取连接工厂客户端](https://stackoverflow.com/questions/6006835/android-mapactivity-couldnt-get-connection-factory-client)。
我可以确认它不是无效的 API 密钥，因为我生成了 2 个不同的密钥并返回了相同的错误。这也不是 API 级别的问题，我尝试在 API 级别 17 和级别 8 上运行应用程序，但仍然没有乐趣。当我运行代码时，它显示地图没有问题，然后得到我的异常 toast 消息*“显示内容时出错”*
这是我的 mapview.java 代码：

```
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.graphics.drawable.Drawable;
import android.net.ParseException;
import android.os.Bundle;
import android.util.Log;
import android.widget.Toast;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;

public class mapview extends MapActivity 
{

//protected MapView mapview;

JSONArray jarray;
String result=null;
InputStream is=null;
StringBuilder sb=null;

double LAT;
double LNG;

public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mapview);

    MapView mapview = (MapView) findViewById(R.id.mapview);
    mapview.setBuiltInZoomControls(true);

    //ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

    try 
    {

         HttpClient httpclient = new DefaultHttpClient();
         HttpPost httppost = new HttpPost("http://10.0.2.2/displaymarkers.php");
         //httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
         HttpResponse response = httpclient.execute(httppost);
         HttpEntity entity = response.getEntity();
         is = entity.getContent();

    }

    catch(Exception e)
    {
        Log.e("log_tag", "Error in http connection"+e.toString());
    }

        try{        

        jarray = new JSONArray("$json_output[]");
        JSONObject json_data = null;
                for(int i = 0; i < jarray.length(); i++)
                {
                    json_data = jarray.getJSONObject(i);

                    LAT=json_data.getDouble("lat");
                    LNG=json_data.getDouble("lng");

                    GeoPoint point = new GeoPoint((int)(LAT * 1E6), (int)(LNG * 1E6));
                    OverlayItem overlayitem = new OverlayItem(point, "TEXT", null);

                    List<Overlay> mapOverlays = mapview.getOverlays();
                    Drawable drawable = this.getResources().getDrawable(R.drawable.marker);
                    myItemizedOverlay itemizedoverlay = new myItemizedOverlay(drawable, this);

                    MapController mapController = mapview.getController();

                    //mapController.animateTo(point);
                    mapController.setZoom(8);

                    itemizedoverlay.addOverlay(overlayitem);
                    mapOverlays.add(itemizedoverlay);
                }
            }
            catch(JSONException e1)
            {
            Toast.makeText(getBaseContext(), "Error displaying contents" ,Toast.LENGTH_LONG).show();
            }       
                catch (ParseException e1) 
                {
                e1.printStackTrace();
                }   
    }
    @Override
    protected boolean isRouteDisplayed() 
    {
        return false;
    }
} 
```

这是我的 ItemizedOverlay.java 代码：

```
 import java.util.ArrayList;

    import android.app.AlertDialog;
    import android.content.Context;
    import android.graphics.drawable.Drawable;

    import com.google.android.maps.OverlayItem;
    import com.google.android.maps.ItemizedOverlay;

    public class myItemizedOverlay extends ItemizedOverlay 
    {

        private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();
        private Context mContext;

        public myItemizedOverlay(Drawable marker, Context context) 
        {
            super(boundCenterBottom(marker));
            mContext = context;

        }

        public void addOverlay(OverlayItem overlay) 
        {
            mapOverlays.add(overlay);
            this.populate();
        }

        @Override
        protected OverlayItem createItem(int i) 
        {
          return mapOverlays.get(i);
        }

        @Override
        public int size() 
        {
            return mapOverlays.size();
        }

        @Override
        protected boolean onTap(int index) 
        {
          OverlayItem item = mapOverlays.get(index);
          AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
          dialog.setTitle(item.getTitle());
          dialog.setMessage(item.getSnippet());
          dialog.show();
          return true;
        }

    } 
```

我会很感激我得到的任何帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:39:42.450

如果您最近生成了这些密钥，您将不会得到结果，因为 API v1 已被弃用并且无法工作。

您可能想要切换到 Maps API v2：[https ://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)

不要尝试使用旧代码，因为新 API 不会与 API v1 共享任何代码。

# postgresql - 在 postgres 中定义公共模式的地方

> ID：15891100
> 
> 赞同：3
> 
> 时间：2013-04-09T00:01:00.900
> 
> 标签：postgresql

我确实搜索过，但无法获得明确的线索。postgres 中有“公共”模式。但是模式在哪里定义？我只在创建新数据库时看到它。我想知道的更多是它在哪里定义以及如何更改它。

提前致谢。

杨

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T00:28:15.687

初始化数据库集群时，该命令在和数据库中`public`创建模式。`template0``template1``initdb`

创建新数据库时`template1`，除非您指定不同的模板，否则数据库将被复制（克隆）以创建新数据库。模板数据库的所有内容都被复制，因此新数据库以`public`模式开始。

您可以自定义`template1`数据库 - 或制作新数据库以用作模板，并使用命令`TEMPLATE`选项指定它们`CREATE DATABASE`。

请参阅[有关模板数据库的文档](http://www.postgresql.org/docs/current/static/manage-ag-templatedbs.html)。

如果您想要自定义模板，我建议您将新数据库作为模板并根据需要进行自定义。这对模式来说是完全合理`DROP`的`public`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T00:03:27.430

如您所料；它是在您创建数据库时创建的。

`createdb`除了它是您获得的默认架构并且是默认的 search_path之外，没有什么特别之处。您可以自由使用`DROP`它，创建另一个名为“public”的项目，或者在没有名为“public”的项目的情况下完全运行。

只要确保你的[search_path](http://www.postgresql.org/docs/9.1/static/ddl-schemas.html#DDL-SCHEMAS-PATH)中有一些有用的东西，否则你可能最终不得不整天输入完全限定的名称。

# iphone - iOS 项目设置：几个应用程序之间略有不同。几个目标

> ID：15891102
> 
> 赞同：1
> 
> 时间：2013-04-09T00:01:16.073
> 
> 标签：iphone, ios, xcode, ipad

我有一个 iPhone 应用程序，现在我被要求创建新产品（应用程序），这些新产品（应用程序）将使用这个应用程序的主要代码，除了添加一些新功能。它不仅仅是一个 PAID/LITE 版本，我们想要超过 2 个版本。这是一个政治应用程序，新产品将是同一个应用程序，但有一个带有一些重大事件的新菜单选项（一个应用程序用于大型活动，另一个应用程序用于不同的活动，等等）。除此之外，不同的应用程序（包括原始应用程序和基础应用程序）也需要适用于 iPad。

改变的不仅仅是内容，代码也会改变。不同的菜单，以及具有不同事件的新选项，具体取决于哪个应用程序。该应用程序与具有 4 个选项的 TabController 一起使用。前 3 个在所有应用程序中都相同，第 4 个提供对特定事件的访问，具有不同的内容和逻辑。

应用程序的主题（主要是颜色）也会有所不同。

所以我正在阅读，我得到解决方案是通过设置不同的目标并使用宏来根据目标执行一个或另一个部分来重用大部分代码。但这会导致一个充满“If-Else”的脏代码。是否有另一种解决方案或一种设计模式可以更好地做到这一点？

任何帮助将非常感激。

哈维尔。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T04:19:25.950

在 Xcode 中使用多个目标可以很好地满足您的需求，您可以在 Xcode 中通过右键单击项目设置中现有的一个目标来创建多个目标，然后`Duplicate`.

然后，您应该在重复的目标中添加不同的编译器标志，以便在代码中区分它们。单击您的新目标并将其重命名为您想要的任何名称，转到`Build Settings`并搜索`Apple LLVM compiler 4.2 - Preprocessing`，假设您的第二个目标被命名`TargetB`，然后`Preprocessor Macros`可以是`TARGETB=1`。

在您的代码中，您可以使用`#ifdef`为不同的目标编写不同的代码。

```
#ifdef TARGETB
 //do something for target B
#else
 //do something else
#endif 
```

您不仅可以在不同的目标中使用不同的代码，还可以使用不同的资源文件，进入`Build Phases`每个目标并签出`Copy Bunle Resources`.

# .net - CQRS 匹配事件和命令

> ID：15891103
> 
> 赞同：3
> 
> 时间：2013-04-09T00:01:19.103
> 
> 标签：.net, cqrs, event-sourcing

我开始使用 CQRS，我发现我的 Event 类定义与我的 Command 定义几乎 1 比 1 匹配。除了明显的代码重复之外，我试图找出我做错了什么。当然，在某些情况下，事件与命令不匹配......但并不多。

以简单的 CUD 场景为例：

命令类：

*   创建邮局
*   更新帖子
*   删除帖子

事件类：

*   已创建帖子
*   更新后的帖子
*   已删除的帖子

对此有何建议？

我正在使用事件存储，如果这有什么不同的话。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T12:06:16.893

您通常不会将 CQRS 用于 CRUD 场景。有更简单的工具和模式来创建 CRUDy 应用程序。

CQRS 为行为丰富的场景带来了许多优势，其中动词不是*Create、Read、Update、Delete*，而是类似于真实行为。像*PromoteEmployee*或*BlacklistVendor*。

一旦开始对行为丰富的域进行建模，可能仍然有许多相关的命令/事件——这不是一件坏事——但你也会发现命令和结果事件的大小可能会有很大的不同（包含的数据) 和数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-04T18:11:05.850

为了给 Dennis Traub 的回答添加一点内容，CQRS 超越了您将代码构建到规范领域的方式，即 UI 的工作方式。并不是所有的 UI 都对 CQRS 友好；你想要更多类似于[基于任务的 UI 而不是 CRUD-y UI 的](http://cqrs.wordpress.com/documents/task-based-ui/)东西。

从 CRUD-y UI 开始，您可能会在应用 CQRS 时感到沮丧。

# c++ - C++ 编译器隐式实例化模板类的所有成员函数是否有效？

> ID：15891106
> 
> 赞同：3
> 
> 时间：2013-04-09T00:01:25.830
> 
> 标签：c++, windows, c++11, c++builder

假设我有一个公共类和一个私有实现类（例如 PIMPL 模式），并且我希望用一个带有检查删除的模板智能指针类包装私有类，如下所示：

**`PublicClass.h`**

```
class PrivateClass;

// simple smart pointer with checked delete
template<class X> class demo_ptr
{
public:
    demo_ptr (X* p) : the_p(p) { }
    ~demo_ptr () {
        // from boost::checked_delete: don't allow compilation of incomplete type
        typedef char type_must_be_complete[ sizeof(X)? 1: -1 ];
        (void) sizeof(type_must_be_complete);
        delete the_p;
    }
private:
    X* the_p;
};

// public-facing class that wishes to wrap some private implementation guts
class PublicClass
{
public:
    PublicClass();
    ~PublicClass();

private:
    demo_ptr<PrivateClass> pvt;
}; 
```

**`PublicClass.cpp`**

```
#include "PublicClass.h"

class PrivateClass
{
public:
    // implementation stuff goes here...
    PrivateClass() {}
};
//---------------------------------------------------------------------------
PublicClass::PublicClass() : pvt(new PrivateClass()) {}

PublicClass::~PublicClass() {} 
```

**`main.cpp`**

```
#include "PublicClass.h"

int main()
{
    PublicClass *test = new PublicClass();
    delete test;
    return 0;
} 
```

此代码在 Visual C++ 2008 上编译成功，但在旧版本的 C++ Builder 上编译失败。特别是，`main.cpp`由于`demo_ptr<PrivateClass>::~demo_ptr`被 实例化而`main.cpp`无法编译，并且该析构函数无法编译，因为它不能`sizeof`在不完整的类型上执行`PrivateClass`. 显然，编译器`~demo_ptr`在 消费中实例化是没有用的`main.cpp`，因为它永远无法生成合理的实现（看如何`~PrivateClass`是不可访问的）。（`PublicClass.cpp`在所有经过测试的编译器上都能正常编译。）

我的问题是：C++ 标准对模板类成员函数的隐式实例化有何看法？可能是以下之一？尤其是这些年来，*这种情况发生了变化吗？*

*   如果使用模板类，那么该类的所有成员函数都应该被隐式实例化——无论是否使用？
*   或者：如果实际使用，模板类函数应该一次只隐式实例化一个。如果不使用特定的模板类函数，则不应隐式实例化它——即使使用和实例化了其他模板类函数。

显然，*今天*的第二种情况就是这种情况，因为 PIMPL 及其检查删除使用了相同的模式`unique_ptr`，但也许过去不是这种情况？过去第一种情况是可接受的编译器行为吗？

或者换句话说，编译器是否有问题，或者它是否准确地遵循了 C++98 标准，并且标准多年来发生了变化？

（有趣的事实：如果您在 C++ Builder 中删除选中的删除，并关闭函数内联，项目将愉快地编译。 `PublicClass.obj`将包含正确的`~demo_ptr`实现，`main.obj`并将包含`~demo_ptr`具有未定义行为的错误实现。使用的函数将取决于这些文件提供给链接器的顺序。）

**更新：这是由于编译器错误，正如 Andy Prowl 所指出的，该错误在 C++ Builder XE8 中仍未修复。我已向 Embarcadero 报告了该错误：** [bcc32 编译器在使用带有 PIMPL 习惯用法的 std::auto_ptr 时导致未定义的行为，因为模板实例化规则不遵循 C++ 规范](https://quality.embarcadero.com/browse/RSP-13126)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T00:07:19.897

> 如果使用模板类，那么该类的所有成员函数都应该被隐式实例化——无论是否使用？

**不**，绝对不是这样。根据 C++11 标准的第 14.7.1/10 段（和 C++03 标准的第 14.7.1/9 段）非常清楚地规定：

> 实现不应隐式实例化不需要实例化的类模板的函数模板、成员模板、**非虚拟成员函数**、成员类或静态数据成员。

至于何时需要实例化，第 14.7.1/2 段规定：

> 除非类模板或成员模板的成员已被显式实例化或显式特化，否则**当在需要成员定义存在的上下文中引用特化时，**成员的特化将被隐式实例化；[...]

如果从不引用成员函数，则肯定不是这种情况。

* * *

不幸的是，我无法提供关于 C++03 之前规则的官方参考，但据我所知，在 C++98 中采用了相同的“惰性”实例化机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T00:14:47.883

`unique_ptr`是一个有趣的野兽。

不像`auto_ptr`，它从智能指针析构函数中调用被引用对象的析构函数，`unique_ptr::~unique_ptr`只是调用了一个之前存储的删除函数。

删除函数存储在`unique_ptr` *构造函数*中，每个`PublicClass`构造函数都会调用该函数。用户定义的构造函数是在`PrivateClass::~PrivateClass`可用的上下文中定义的，所以没关系。但是其他隐式生成`PublicClass`的构造函数呢，比如移动构造函数呢？它们是在使用点生成的；他们还需要初始化`unique_ptr`成员，这意味着他们必须提供删除器。但是没有`PrivateClass::~PrivateClass`，他们不能。

等等，你的问题提到了`unique_ptr`，但你的代码没有使用它。奇怪的...

即使从智能指针析构函数调用析构函数，它仍然可以从包含的类*构造函数*中使用 ODR 。这是为了异常安全——构造函数需要能够拆除部分构造的类，其中包括成员的破坏。

看起来 C++Builder 可能正在生成一个`PublicClass`副本或更多构造函数，即使您的程序不使用它。这不违反安迪提到的规则，因为`PublicClass`它不是模板。我认为编译器有权`PublicClass`在处理类定义时生成默认的复制构造函数，因为您不能为默认成员提供类外定义。尊重三的规则`demo_ptr`将排除`PublicClass`复制构造函数，因此可以解决您的问题。

# mysql - mysql 获取 X(point) 和 join

> ID：15891108
> 
> 赞同：0
> 
> 时间：2013-04-09T00:01:37.160
> 
> 标签：mysql, join, point

我正在尝试运行连接多个表的选择查询。表中有一个具有点类型的列坐标。一切正常，但在连接中它不允许我选择 X（坐标）或 X（点（坐标））。

我可以在连接中选择坐标，也可以直接在表格上选择 X（坐标），但两者一起不起作用。

```
select x(coordinate) from location_coordinate 
```

上面的一个作品

```
select ca.campus_id,
ca.campus_name,
ca.status_code,
ca_loc.location_id,
ca_loc.address,
ca_coo.coordinate,
ca_loc.locality_id,
ca_loc.area_id,
ca_loc.city_id,
ca_loc.state_id,
loc_locality.name as locality_name,
loc_area.name as area_name,
loc_city.name as city_name,
loc_state.name as state_name
    from campus_account ca 
     left join location ca_loc 
        on ca_loc.location_id=ca.location_id 
    left join location_coordinate ca_coo
        on ca_loc.location_id=ca_coo.location_id
    left join location_master loc_locality
        on(ca_loc.locality_id = loc_locality.location_master_id)
    left join location_master loc_area
        on(ca_loc.area_id = loc_area.location_master_id)
    left join location_master loc_city
        on(ca_loc.city_id = loc_city.location_master_id)
    left join location_master loc_state
        on(ca_loc.state_id = loc_state.location_master_id); 
```

这也有效。但如果我尝试做

```
select ca.campus_id,
ca.campus_name,
ca.status_code,
ca_loc.location_id,
ca_loc.address,
ca_coo.X(coordinate),
ca_loc.locality_id,
ca_loc.area_id,
ca_loc.city_id,
ca_loc.state_id,
loc_locality.name as locality_name,
loc_area.name as area_name,
loc_city.name as city_name,
loc_state.name as state_name
from campus_account ca 
     left join location ca_loc 
        on ca_loc.location_id=ca.location_id 
    left join location_coordinate ca_coo
        on ca_loc.location_id=ca_coo.location_id
    left join location_master loc_locality
        on(ca_loc.locality_id = loc_locality.location_master_id)
    left join location_master loc_area
        on(ca_loc.area_id = loc_area.location_master_id)
    left join location_master loc_city
        on(ca_loc.city_id = loc_city.location_master_id)
    left join location_master loc_state
        on(ca_loc.state_id = loc_state.location_master_id); 
```

它没有选择并给我一个错误，说 X 不是一列。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:22:14.637

应该`X(ca_coo.coordinate)`不是`ca_coo.X(coordinate)`。

# command-line - 通过 SSH 打开端口 3306

> ID：15891109
> 
> 赞同：0
> 
> 时间：2013-04-09T00:01:38.517
> 
> 标签：command-line, ssh, port, telnet, remote-access

我正在尝试从 GoDaddy VPS 访问远程 MySQL 数据库。我已经在我的服务器上启用了远程访问，但我需要在 GoDaddy 的 VPS 上打开 3306 端口。他们的支持者告诉我，我需要通过 SSH 来执行此操作，但除此之外他们无法为我提供任何帮助。我已通过 SSH 成功连接到我的服务器。我已经运行了以下命令：

```
telnet myserver.com 3306 
```

当我运行该命令时，我收到以下消息，`SHost is not allowed to connect to this MySQL serverConnection closed by foreign host`.

如何打开端口以允许我连接到远程 MySQL 数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T00:26:28.510

使用端口转发。

```
ssh -L 3306:localhost:3306 myserver.com 
```

（我假设您通常通过运行 ssh 到您的服务器`ssh myserver.com`。）

然后，当该连接处于活动状态时，连接到 localhost 而不是 myserver.com 上的数据库（例如使用 测试`telnet localhost 3306`）。

[ssh 手册](http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1)中的更多详细信息。

# entity-framework - 获取模型模式以使用不支持 CreateDatabase 的提供程序以编程方式创建数据库

> ID：15891112
> 
> 赞同：2
> 
> 时间：2013-04-09T00:02:27.703
> 
> 标签：entity-framework

我正在使用 Entity Framework 5 的 SQLite 提供程序，但它不支持 CreateDatabase，因此无法自动创建数据库。（代码优先）

有没有办法在运行时获取模型模式，以便我自己创建 SQL“CREATE TABLE”命令？

如果不是在运行时，还有其他获取模式的方法，以便我知道如何正确创建表？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T01:27:41.360

**A）**关于获得`model schema at runtime`零件

（都是我之前的帖子）

看到这个[我如何以编程方式读取 EF DbContext 元数据？](https://stackoverflow.com/questions/15718301/how-i-can-read-ef-dbcontext-metadata-programmatically/15720297#15720297)

以及[如何通过单元测试检查属性标记为在 ORM 模型中计算？](https://stackoverflow.com/questions/15866272/how-check-by-unit-test-that-properties-mark-as-computed-in-orm-model/15867365#15867365)

[这也是EF5 Code First 迁移中](https://stackoverflow.com/questions/15865767/programmatic-data-transformation-in-ef5-code-first-migration/15869721#15869721)的自定义初始化程序编程数据转换

**话说回来...**

**我看到的问题是您在何处以及在什么时候实际拥有可用数据**。
实际上，我很确定您在任何时候都无法做到这一点。
因为要能够提取该信息，您需要`DbContext`运行 - 所以必须构建数据库等等。

在初始化程序中可能 - 但使用不同的方式获取该信息 - 以上不可用。

**B）** 另一种方法是采用实现提供者、生成器等的方式（例如[这篇文章](https://stackoverflow.com/questions/15887145/entity-framework-migrationsqlgenerator-for-sqlite/15887646#15887646)）。
这样，您应该在正确的时间从 EF/CF 本身获取所有这些信息。
不过我没玩过这么多。

有关更多信息，您可以查看[EF 源代码](http://entityframework.codeplex.com/)

到目前为止，这更像是一个“收集的信息”——以防万一它可以帮助您随时随地使用它。不是真正的解决方案。我明天再补充一些。

**编辑：**

要获得真正的数据库元数据，请查看另一个`DataSpace`，这应该可以让您到达正确的位置......
（注意：事情往往`less exact`从这里得到 - 因为显然没有正确的官方支持）

```
var ssSpaceSet = objectContext.MetadataWorkspace.GetItems<EntityContainer>(DataSpace.SSpace).First()
    .BaseEntitySets
    .First(meta => meta.ElementType.Name == "YourTableName"); 
```

如果您在调试器中查找，`Table`属性应该具有真实的表名。
但是，`reflection`可能需要。

* * *

[如何以编程方式读取 EF DbContext 元数据？](https://stackoverflow.com/questions/15718301/how-i-can-read-ef-dbcontext-metadata-programmatically/15720297#15720297)
[如何通过单元测试检查属性标记为在 ORM 模型中计算？](https://stackoverflow.com/questions/15866272/how-check-by-unit-test-that-properties-mark-as-computed-in-orm-model/15867365#15867365)
[EF5 Code First 迁移中的编程数据转换](https://stackoverflow.com/questions/15865767/programmatic-data-transformation-in-ef5-code-first-migration/15869721#15869721)
[Entity Framework MigrationSqlGenerator for SQLite](https://stackoverflow.com/questions/15887145/entity-framework-migrationsqlgenerator-for-sqlite/15887646#15887646)
[http://entityframework.codeplex.com/](http://entityframework.codeplex.com/)
[Entity Framework - Get Table name from the Entity](https://stackoverflow.com/questions/6106842/entity-framework-get-table-name-from-the-entity)
[ef code first: get entity table name without dataannotations](https://stackoverflow.com/questions/7008212/ef-code-first-get-entity-table-name-without-dataannotations)
[Get Database Table Name from Entity Framework MetaData](https://stackoverflow.com/questions/1895455/get-database-table-name-from-entity-framework-metadata)
[http://www.codeproject.com/Articles/350135/Entity-Framework-Get-mapped-table-name-from-an-ent](http://www.codeproject.com/Articles/350135/Entity-Framework-Get-mapped-table-name-from-an-ent)

# php - 显示特定日期的产品 - 优化 Magento 脚本

> ID：15891115
> 
> 赞同：1
> 
> 时间：2013-04-09T00:02:51.923
> 
> 标签：php, magento-1.6

我正在尝试列出在过去 72 小时内具有特殊起始日期的所有产品。该脚本工作正常，除了超过 400 种产品超时。

我想我加载了太多的集合或者没有正确使用加载的集合，所以我真的只需要一些优化建议。

这是脚本：

```
<?php

set_time_limit(0);
require_once 'app/Mage.php';
Mage::app('default');

try
{
    $products = Mage::getModel('catalog/product')->getCollection()
        ->setStoreId(1);
    $products->addAttributeToFilter('status', 1);
    $products->addAttributeToFilter('visibility', 4);
    $products->addAttributeToSelect('*');
    $prodIds=$products->getAllIds();
    $product_count = 0;
    $products_changed = 0;

    //$product = Mage::getModel('catalog/product');

    echo "Price Changes Last 72 Hours<br><br>";

    foreach($prodIds as $productId) 
    {
        $product_count++;
        //$products->load($productId);

        // load product data
        $product = Mage::getModel('catalog/product')->load($productId);

        $special_price = round($product->getSpecialprice(),2);
        $human_readable_date = $product->getSpecialFromDate();
        $sku = $product->getSku();
        $specialPriceFromDate = strtotime($human_readable_date);
        $time_now = microtime(true);
        $product_link = "http://www.mydomain.com.au/".$product->getUrlPath(); 
        $date_array = explode( ' ', $human_readable_date);
        $short_date = $date_array[0];

        if (($time_now - $specialPriceFromDate) < 259200)
        {
            $products_changed++; 
            echo "SKU: " . '<a href=' . $product_link . '>' . $sku . '</a>' . "  Date Changed: " . $short_date . " New Price $" . $special_price . "<br>";
        }
        //if ($product_count == 400) exit;  
    }
}

catch(Exception $e){
    $headers = 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 
    error_log($e->getMessage(), 1, 'me@mydomain.com.au', $headers);
    die($e->getMessage());
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:49:57.487

您首先加载一个完整的集合，然后再次加载所有产品，一个接一个。这将导致巨大的内存消耗并且会很慢。

此外，您正在加载*所有*产品属性（可能是数百个），但主要似乎只对其中几个感兴趣。

为了优化这两个问题，我建议直接筛选感兴趣的产品：

```
$iNow = strtotime(date('Y-m-d H:i:s'));
$iFrom = $iNow - (60 * 60 * 24 * 3);
$oProductCollecion = Mage::getModel('catalog/product')
    ->getCollection()
    ->setStoreId(1)
    ->addAttributeToSelect(array('sku', 'special_price', 'url_path'))
    ->addAttributeToFilter('status', 1)
    ->addAttributeToFilter('visibility', 4)
    ->addAttributeToFilter(
        'special_from_date',
         array('from' => date('Y-m-d H:i:s', $iFrom))
    );

foreach($oProductCollecion as $oProduct) {
    $product_link = "http://www.mydomain.com.au/" . $oProduct->getUrlPath();
    $sku = $oProduct->getSku();
    $short_date = $oProduct->getSpecialFromDate();
    $special_price = round($oProduct->getSpecialPrice(), 2);
    echo "SKU: " . '<a href=' . $product_link . '>' . $sku . '</a>' . "  Date Changed: " . $short_date . " New Price $" . $special_price . "<br>";
} 
```

# vaadin - 使用 GridLayout 做出响应窗口大小调整的智能布局？

> ID：15891119
> 
> 赞同：7
> 
> 时间：2013-04-09T00:03:08.160
> 
> 标签：vaadin

当用户在我的 Vaadin 6 或 7 Web 应用程序中调整窗口大小时，我希望布局的各个区域调整大小以充分利用可用空间。

GridLayout 似乎是这样做的方法。但是开始使用 GridLayout 可能会很棘手。我阅读了 GridLayout [API 页面](https://vaadin.com/api/com/vaadin/ui/GridLayout.html)，以及 Vaadin 之书（[GridLayout 页面](https://vaadin.com/book/vaadin7/-/page/layout.gridlayout.html)和[Layout Formatting 页面](https://vaadin.com/book/vaadin7/-/page/layout.settings.html)）。

一个展示 GridLayout 的例子会很有帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-09T00:03:08.160

# 瓦丁 7

我创建了一个示例 Vaadin 7 Web 应用程序，展示了`GridLayout`. 两种用法都[`Table`](https://vaadin.com/book/-/page/components.table.html)在布局的四个角中的每一个中放置一个带有虚拟数据的数据。当窗口大小调整为更大或更小时，四个表的大小也会相应改变。

一种用法是由四个单元格、两列和两行组成的简单网格。另一种用法包括在中间列和中间行中带有按钮的嵌套布局，在具有三列和三行的 GridLayout 中，总共九个单元格，其中三个为空。

每种用法的屏幕截图……</p>

![带有象限的 GridLayout 的更简单用法的屏幕截图](https://i.stack.imgur.com/DrYom.png)

![更复杂的 GridLayout 的屏幕截图，象限之间带有按钮](https://i.stack.imgur.com/mffGP.png)

这是两个重要的类，每个类都是 GridLayout 的子类。首先越简单，然后越复杂。

```
/**
 * 
 */
package com.example.quadrantgridlayout;

import com.vaadin.server.Sizeable;
import com.vaadin.ui.GridLayout;
import com.vaadin.ui.Table;

/**
 * An example use of GridLayout in Vaadin 7.1.
 * 
 * Each quadrant of the layout contains a table. Each table resizes in both width and height to fill any available space.
 * 
 * @author Basil Bourque
 * 
 *         Copyright © 2013 Basil Bourque.
 * 
 *         This example source code may be used freely forever by anyone taking full responsibility for doing so.
 * 
 */
public class QuadrantGridLayout extends GridLayout {

    /**
     * Constructor
     */
    public QuadrantGridLayout() {
        super();
        this.setMargin( true ); // Add space around the perimeter.
        this.setSpacing( true ); // Add space between widgets.

        // Make this Layout fill all available space in its container.
        // In this case its container is a UI.
        // In this case, that UI happens to fill its container, the web browser's tab/window.
        this.setWidth( 100, Sizeable.Unit.PERCENTAGE );
        this.setHeight( 100, Sizeable.Unit.PERCENTAGE );

        // Create four cells for our four tables.
        this.setColumns( 2 );
        this.setRows( 2 );

        // Create widgets.
        Table upperLeft = new AstronomersTable( "Upper Left " + new java.util.Date() ); // In real work I would use Joda Time, not j.u.Date.
        Table upperRight = new AstronomersTable( "Upper Right" );

        Table lowerLeft = new AstronomersTable( "Lower Left" );
        Table lowerRight = new AstronomersTable( "Lower Right" );

        // Compose layout.
        upperLeft.setWidth( 100, Sizeable.Unit.PERCENTAGE );
        upperLeft.setHeight( 100, Sizeable.Unit.PERCENTAGE );
        this.addComponent( upperLeft );

        upperRight.setSizeFull(); // Alternate syntax for setting both width and height to 100%, instead of two lines seen earlier above.
        this.addComponent( upperRight );

        // Cursor automatically moved to next row upon reaching the row's last cell.

        lowerLeft.setSizeFull();
        // lowerLeft.setHeight( 72 * 2, Sizeable.Unit.POINTS ); // Use this if you want to play with fixed sizing. 72 points per inch.
        this.addComponent( lowerLeft );

        lowerRight.setSizeFull();
        this.addComponent( lowerRight );

    }

} 
```

这是带有按钮的 GridLayout。

```
/**
 * 
 */
package com.example.quadrantgridlayout;

import com.vaadin.server.Sizeable;
import com.vaadin.ui.Button;
import com.vaadin.ui.GridLayout;
import com.vaadin.ui.HorizontalLayout;
import com.vaadin.ui.Table;
import com.vaadin.ui.VerticalLayout;

/**
 * An example use of GridLayout in Vaadin 7.1.
 * 
 * Each quadrant of the layout contains a table. Each table resizes in both width and height to fill any available space.
 * 
 * @author Basil Bourque
 * 
 *         Copyright © 2013 Basil Bourque.
 * 
 *         This example source code may be used freely forever by anyone taking full responsibility for doing so.
 */
public class QuadrantWithButtonsGridLayout extends GridLayout {

    /**
     * Constructor
     */
    public QuadrantWithButtonsGridLayout() {
        super();
        this.setMargin( true ); // Add space around the perimeter.
        this.setSpacing( true ); // Add space between widgets.

        // Make this Layout fill all available space in its container.
        // In this case its container is a UI.
        // In this case, that UI happens to fill its container, the web browser's tab/window.
        this.setWidth( 100, Sizeable.Unit.PERCENTAGE );
        this.setHeight( 100, Sizeable.Unit.PERCENTAGE );

        // Create 9 cells, like Tic-Tac-Toe. A table goes in each corner.
        this.setColumns( 3 );
        this.setRows( 3 );

        // Create tables.
        Table upperLeft = new AstronomersTable( "Upper Left " + new java.util.Date() ); // In real work I would use Joda Time, not j.u.Date.
        Table upperRight = new AstronomersTable( "Upper Right" );

        Table lowerLeft = new AstronomersTable( "Lower Left" );
        Table lowerRight = new AstronomersTable( "Lower Right" );

        // Create buttons, and collect into a Layout.
        Button alphaButton = new Button( "Alpha" );
        Button betaButton = new Button( "Beta" );
        VerticalLayout upperButtonsLayout = new VerticalLayout();
        upperButtonsLayout.setCaption( " " ); // Add an empty caption (Space character, actually) to force the buttons downwards to line up with tables.
        upperButtonsLayout.setSpacing( true ); // Add space between widgets.
        upperButtonsLayout.addComponent( alphaButton );
        upperButtonsLayout.addComponent( betaButton );

        Button gammaButton = new Button( "Gamma" );
        Button deltaButton = new Button( "Delta" );
        HorizontalLayout leftButtonsLayout = new HorizontalLayout();
        leftButtonsLayout.setSpacing( true );
        leftButtonsLayout.addComponent( gammaButton );
        leftButtonsLayout.addComponent( deltaButton );

        // Compose layout.

        // ----| ROW 1 |------------------------
        // Vaadin 6 & 7 seem to suffer a bug that makes one row wider than another despite being assigned the same ratio.
        // As a workaround, divide the wide column's ratio by half (give or take) to compensate.
        this.setRowExpandRatio( this.getCursorY(), 0.5F / 1.5F );
        // Column 1
        // Vaadin 6 & 7 seem to suffer a bug that makes one column wider than another despite being assigned the same ratio.
        // As a workaround, divide the wide column's ratio by half (or more) to compensate.
        this.setColumnExpandRatio( this.getCursorX(), 1F / 1.5F ); // Notice first argument is soft-coding the column position. Also, index (zero-based) counting .
        upperLeft.setWidth( 100, Sizeable.Unit.PERCENTAGE );
        upperLeft.setHeight( 100, Sizeable.Unit.PERCENTAGE );
        // upperLeft.setHeight( 72 * 2, Sizeable.Unit.POINTS ); // Use this if you want to play with fixed sizing. 72 points per inch.
        this.addComponent( upperLeft );

        // Column 2
        // should not expand or contract with window re-sizing. So set expansion ratio to zero.
        upperButtonsLayout.setSizeUndefined(); // Setting size to be "undefined" is the trick to getting this column to collapse to its own minimal size.
        this.addComponent( upperButtonsLayout );

        // Column 3
        this.setColumnExpandRatio( this.getCursorX(), 1F );
        upperRight.setSizeFull(); // Alternate syntax for setting both width and height to 100%, instead of two lines seen earlier above.
        this.addComponent( upperRight );
        // Cursor automatically moved to next row upon reaching the row's last cell.

        // ----| ROW 2 |------------------------
        // Column 1
        leftButtonsLayout.setSizeUndefined(); // Setting size to be "undefined" is the trick to getting this row to collapse to its own minimal size.
        this.addComponent( leftButtonsLayout );
        this.newLine(); // Move cursor to next row. We have nothing to place in the remaining two cells.

        // ----| ROW 3 |------------------------
        this.setRowExpandRatio( this.getCursorY(), 0.5F );
        // // Column 1
        lowerLeft.setSizeFull();
        this.addComponent( lowerLeft );

        // Column 2
        this.space(); // Move cursor to next cell. We have nothing to place in this middle cell.

        // Column 3
        lowerRight.setSizeFull();
        this.addComponent( lowerRight );

    }

} 
```

这是将 GridLayouts 放到屏幕上的代码。对于 Vaadin 6，将此类的内容移至适当的类。

```
package com.example.quadrantgridlayout;

import com.vaadin.server.VaadinRequest;
import com.vaadin.ui.Layout;
import com.vaadin.ui.TabSheet;
import com.vaadin.ui.UI;

/**
 * 
 * Main UI class
 * 
 * This example app demonstrates the use of GridLayout to build a smart resizing layout.
 * 
 * Built in Vaadin 7.1 (pre-release), but the GridLayout & Table portions should work in Vaadin 6 as well.
 * 
 * * @author Basil Bourque
 * 
 * Copyright © 2013 Basil Bourque.
 * 
 * This example source code may be used freely forever by anyone taking full responsibility for doing so.
 */
public class QuadrantGridLayoutUI extends UI {

    @Override
    protected void init( VaadinRequest request ) {
        // This app demonstrates two versions of a GridLayou made of quadrants, each containing a table.
        // The simpler version contains only the four tables.
        // The other version includes a middle column and row, each containing a Layout with buttons.
        final Layout layoutQuadrant = new QuadrantGridLayout();
        final Layout layoutQuadrantWithButtons = new QuadrantWithButtonsGridLayout();

        // Display content on screen.

        // If for simplicity you want to remove the TabSheet from the situation, swap this next line for all remaining code below.
        // this.setContent( layoutQuadrant ); // Copy-paste either Layout variable to try each version.

        TabSheet tabs = new TabSheet();
        tabs.setSizeFull(); // Make the TabSheet fill all available space. By default the height is fixed.
        tabs.addTab( layoutQuadrant, "Simple" );
        tabs.addTab( layoutQuadrantWithButtons, "With Buttons" );
        this.setContent( tabs );
    }

} 
```

最后，这是虚拟数据的代码，它是 Table 的子类。

```
/**
 * 
 */
package com.example.quadrantgridlayout;

import com.vaadin.ui.Table;

/**
 * 
 * Creates a simple Vaadin table with some dummy data.
 * 
 * @author Basil Bourque
 * 
 *         Copyright © 2013 Basil Bourque, except where noted below.
 * 
 *         This source code may be used freely forever by anyone taking full responsibility for doing so.
 * 
 */
public class AstronomersTable extends Table {

    /**
     * 
     */
    public AstronomersTable() {
        super();
        this.configure();
    }

    /**
     * @param caption
     */
    public AstronomersTable( String caption ) {
        super( caption );
        this.configure();
    }

    private void configure() {
        // This method's source code taken from "The Book of Vaadin 7", plus I added an earlier astronomer.
        // https://vaadin.com/book/vaadin7/-/page/components.table.html

        // Configure options.
        this.setSelectable( true );

        /*
         * Define the names and data types of columns. The "default value" parameter is meaningless here.
         */
        this.addContainerProperty( "First Name", String.class, null );
        this.addContainerProperty( "Last Name", String.class, null );
        this.addContainerProperty( "Year", Integer.class, null );

        /* Add a few items in the this. */
        this.addItem( new Object[] { "Hypatia", "of Alexandria", new Integer( -370 ) }, new Integer( 1 ) );
        this.addItem( new Object[] { "Nicolaus", "Copernicus", new Integer( 1473 ) }, new Integer( 2 ) );
        this.addItem( new Object[] { "Tycho", "Brahe", new Integer( 1546 ) }, new Integer( 3 ) );
        this.addItem( new Object[] { "Giordano", "Bruno", new Integer( 1548 ) }, new Integer( 4 ) );
        this.addItem( new Object[] { "Galileo", "Galilei", new Integer( 1564 ) }, new Integer( 5 ) );
        this.addItem( new Object[] { "Johannes", "Kepler", new Integer( 1571 ) }, new Integer( 6 ) );
        this.addItem( new Object[] { "Isaac", "Newton", new Integer( 1643 ) }, new Integer( 7 ) );

    }

} 
```

# javascript - Javascript：替换字符串后的单个字符

> ID：15891124
> 
> 赞同：0
> 
> 时间：2013-04-09T00:03:49.570
> 
> 标签：javascript, jquery, url

我正在尝试做一些看起来相当基本的事情，但似乎无法让它发挥作用。

我试图在下划线的最后一个实例之后剥离字符。

我有这么长的查询字符串：

```
json_data=demo_title=Demo+title&proc1_script=script.sh+parameters&proc1_chk_make=on&outputp2_value=&demo_input_description=hola+mundo&outputp4_visible=on&outputp4_info=&inputdata1_max_pixels=1024000&tag=&outputp1_id=nanana&proc1_src_compresion=zip&proc1_chk_cmake=off&outputp3_description=&outputp3_value=&inputdata1_description=input+data+description&inputp2_description=bien%3F&inputp3_description=funciona&proc1_cmake=-D+CMAKE_BUILD_TYPE%3Astring%3DRelease+&outputp2_visible=on&outputp3_visible=on&outputp1_type=header&inputp1_type=text&demo_params_description=va+bien&outputp1_description=&inputdata1_type=image2d&proc1_chk_script=off&demo_result_description=win%3F&outputp2_id=nanfdsvfa&inputp1_description=funciona&demo_wait_description=boh&outputp4_description=&inputp2_type=integer&inputp2_id=papapa&outputp1_value=&outputp3_id=nananartrtrt&inputp3_id=pepepe&outputp3_type=header&inputp3_visible=+off&outputp1_visible=on&inputdata1_id=id_lsd&outputp4_value=&inputp2_visible=on&proc1_source=lsd-1.5.zip&inputp3_value=si&proc1_make=-j4+-C+&images_config_file=cfgmydemo.cfg&outputp2_type=header&proc1_subdir=xxx-1.5&proc1_url=http%3A%2F%2Fwww.ipol.im%2Fpub%2Falgo%2F...&inputdata1_image_depth=1x8i&inputp1_id=popopo&inputp1_value=si&inputp2_value=no&demo_data_filename=data_saved.cfg&inputdata1_info=info_lsd&outputp3_info=&inputdata1_image_format=.pgm&outputp1_info=&inputdata1_compress=False&inputp1_visible=on&proc1_id=lsd&outputp4_id=nana&outputp2_description=&outputp4_type=header&outputp2_info=&inputp3_type=float&&tag&inputp4_iddcksmdclk&inputp4_typetext&inputp4_descriptionkldmsclk&inputp4_valueklcdmkl&inputp4_infoclkdmscdl 
```

现在我替换分隔符中的分隔`=`符`%24+`并使用 fr=fr.replace(/\&/g,"+%23+");`&``+%23+`

```
 Separator

javascript              Mako           

  =                       %24+
  &                       +%23+ 
```

但结果是：

```
 json_data%24+demo_title%24+Demo+title+%23+proc1_script%24+script.sh+parameters+%23+proc1_chk_make%24+on+%23+outputp2_value%24++%23+demo_input_description%24+hola+mundo+%23+outputp4_visible%24+on+%23+outputp4_info%24++%23+inputdata1_max_pixels%24+1024000+%23+tag%24++%23+outputp1_id%24+nanana+%23+proc1_src_compresion%24+zip+%23+proc1_chk_cmake%24+off+%23+outputp3_description%24++%23+outputp3_value%24++%23+inputdata1_description%24+input+data+description+%23+inputp2_description%24+bien%3F+%23+inputp3_description%24+funciona+%23+proc1_cmake%24+-D+CMAKE_BUILD_TYPE%3Astring%3DRelease++%23+outputp2_visible%24+on+%23+outputp3_visible%24+on+%23+outputp1_type%24+header+%23+inputp1_type%24+text+%23+demo_params_description%24+va+bien+%23+outputp1_description%24++%23+inputdata1_type%24+image2d+%23+proc1_chk_script%24+off+%23+demo_result_description%24+win%3F+%23+outputp2_id%24+nanfdsvfa+%23+inputp1_description%24+funciona+%23+demo_wait_description%24+boh+%23+outputp4_description%24++%23+inputp2_type%24+integer+%23+inputp2_id%24+papapa+%23+outputp1_value%24++%23+outputp3_id%24+nananartrtrt+%23+inputp3_id%24+pepepe+%23+outputp3_type%24+header+%23+inputp3_visible%24++off+%23+outputp1_visible%24+on+%23+inputdata1_id%24+id_lsd+%23+outputp4_value%24++%23+inputp2_visible%24+on+%23+proc1_source%24+lsd-1.5.zip+%23+inputp3_value%24+si+%23+proc1_make%24+-j4+-C++%23+images_config_file%24+cfgmydemo.cfg+%23+outputp2_type%24+header+%23+proc1_subdir%24+xxx-1.5+%23+proc1_url%24+http%3A%2F%2Fwww.ipol.im%2Fpub%2Falgo%2F...+%23+inputdata1_image_depth%24+1x8i+%23+inputp1_id%24+popopo+%23+inputp1_value%24+si+%23+inputp2_value%24+no+%23+demo_data_filename%24+data_saved.cfg+%23+inputdata1_info%24+info_lsd+%23+outputp3_info%24++%23+inputdata1_image_format%24+.pgm+%23+outputp1_info%24++%23+inputdata1_compress%24+False+%23+inputp1_visible%24+on+%23+proc1_id%24+lsd+%23+outputp4_id%24+nana+%23+outputp2_description%24++%23+outputp4_type%24+header+%23+outputp2_info%24++%23+inputp3_type%24+float+%23++%23+tag+%23+inputp4_iddcksmdclk+%23+inputp4_typetext+%23+inputp4_descriptionkldmsclk+%23+inputp4_valueklcdmkl+%23+inputp4_infoclkdmscdl 
```

现在我对如何`=`在 value 之后替换它感兴趣`jsondata`。说明：在查询字符串中有字符串 json_data+%23+ 而这个 +%23+ 我想替换为 = How?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:07:35.813

去除最后一个下划线实例之后的字符：

```
json_data.substring(0, json_data.lastIndexOf("_")); 
```

将 +%23+ 替换为 =

```
json_data.replace("+%23+", "="); 
```

但是，如果您尝试将所有 %xx 转换为应有的内容，则应改为对字符串进行 url 解码。这可能必须是这样的：

```
decodeURIComponent((json_data).replace('+', '%20')); 
```

# javascript - 返回与链接中的文本匹配的 JSON 节点 onclick

> ID：15891125
> 
> 赞同：0
> 
> 时间：2013-04-09T00:03:54.880
> 
> 标签：javascript, jquery, json, jquery-mobile, jsonp

下面的 JS 在解析 JSON 后为我返回一个电影标题列表。每个电影标题节点都有更多尚未显示的属性和值。当用户单击列表中的电影标题时，我希望它返回该节点中与该标题匹配的其他值。我该怎么做呢？谢谢。

我发布了一个数据示例。JS 创建所有电影标题的 HTML 列表。如您所见，同一电影标题有多个节点，但“位置”不同。我希望能够单击列表中的电影标题并让它在 HTML 中显示特定电影标题的所有不同位置。

这是它现在正在做的事情的 JS 小提琴。[JSfiddle](http://jsfiddle.net/pbpyrojust/4LBvh/)

JSON数据：

```
 fl({
  "nodes" : [
{
  "node" : {
    "title" : "180",
    "ReleaseYear" : "2013",
    "Director" : "Jayendra",
    "Writer" : "Umarji Anuradha, Jayendra, Aarthi Sriram, &amp; Suba ",
    "Address" : "\n \n \n 555 Market St. \n San Francisco, CA\n United States\n \n \n See map: Google Maps \n \n",
    "Actor 1" : "Siddarth",
    "Actor 2" : "Nithya Menon",
    "Actor 3" : "Priya Anand",
    "Latitude" : "37.789952",
    "Longitude" : "-122.400158"
  }
},
{
  "node" : {
    "title" : "180",
    "ReleaseYear" : "2013",
    "Director" : "Jayendra",
    "Writer" : "Umarji Anuradha, Jayendra, Aarthi Sriram, &amp; Suba ",
    "Address" : "\n \n \n Epic Roasthouse (399 Embarcadero) \n San Francisco, CA\n United States\n \n \n See map: Google Maps \n \n",
    "Actor 1" : "Siddarth",
    "Actor 2" : "Nithya Menon",
    "Actor 3" : "Priya Anand",
    "Latitude" : "37.797677",
    "Longitude" : "-122.394339"
  }
},
{
  "node" : {
    "title" : "180",
    "ReleaseYear" : "2013",
    "Director" : "Jayendra",
    "Writer" : "Umarji Anuradha, Jayendra, Aarthi Sriram, &amp; Suba ",
    "Address" : "\n \n \n Mason &amp; California Streets (Nob Hill) \n San Francisco, CA\n United States\n \n \n See map: Google Maps \n \n",
    "Actor 1" : "Siddarth",
    "Actor 2" : "Nithya Menon",
    "Actor 3" : "Priya Anand",
    "Latitude" : "37.791556",
    "Longitude" : "-122.410766"
  }
}
  ]
}) 
```

JAVASCRIPT：

```
 var sort_by = function(field, reverse, primer){
    var key = function(x) {return primer ? primer(x[field]) : x[field]};
    return function(a,b) {
        var A = key(a), B = key(b);
        return ((A < B) ? -1 : (A > B) ? +1 : 0) * [-1,1][+!!reverse];
    }
}

$.ajax({
    type: 'GET',
    url: 'list',
    async: false,
    jsonpCallback: 'fl',
    contentType: 'application/json',
    dataType: 'jsonp',
    success: function(data) {
        var tmp = [];
        for(var i=0;i<data.nodes.length;i++) {
            tmp.push(data.nodes[i].node);
        }
        tmp.sort(sort_by('title', true));
        var div = document.createElement('div');
        $('#film').append(div);
        $(div).attr( 'data-role', 'collapsible' );
        var heading = tmp[0]['title'][0];
        var h3 = document.createElement('h3');
        h3.innerHTML = heading;
        $(div).append(h3);
        h3=null;
        var title = '';
        for(var i=0;i<tmp.length;i++) {
            if(tmp[i]['title'] != title){ title=tmp[i]['title'];
                if(tmp[i]['title'][0] !== heading){
                    heading = tmp[i]['title'][0];
                    var div = document.createElement('div');
                    $('#film').append(div);
                    $(div).attr( 'data-role', 'collapsible' );
                    var h3 = document.createElement('h3');
                    h3.innerHTML = heading; 
                    $(div).append(h3);
                    h3=null;
                    var p = document.createElement('p');
                    $(div).append(p);
                }
                var film = "<a>"+tmp[i]['title']+"</a> <br />";
                $(p).append(film);
                film=null;
                //$("#sf_film").collapsibleset();
                $("#film").collapsibleset("refresh");
            }
        }
    }
});

function fl(json){
     console.log(json);   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:47:40.453

我过去这样做的方法是将对象数组从 json 加载到单个数组对象中，然后使用数组索引从中检索数据。我的[jsfiddle](http://jsfiddle.net/asifrc/FsspP/1/)显示了一个假 ajax 请求的示例，该请求然后将其加载到一个数组中，显示仅包含标题的链接，并在您单击链接时`displayLinks()`显示更多详细信息。`showCast(movieId)`如果您有任何问题，请告诉我。

**更新 1：** 我创建了一个[更新的小提琴](http://jsfiddle.net/asifrc/FsspP/2/)，按标题合并它们。在第一个小提琴简单分配`data`给 的地方`movies`，这个使用了一个额外的数组`movieTitles`来保存唯一的电影标题，并使用一个循环。循环遍历每个`data`元素，检查该`.title`值是否已存在于`movieTitles`. 如果它确实存在，我们使用索引来访问该电影，在`movies`那里您可以根据需要连接您的其他属性。如果它不存在（`movieIndex`为 -1），那么我们将电影添加到`movies`并将电影标题添加到`movieTitles`。然后循环直到数据中的所有元素都已分配。
我的示例没有检查不同的大写字母（因此蝙蝠侠和蝙蝠侠将分别显示），但这很容易，我不想破坏乐趣并为您完成所有工作:)

再次，让我知道您是否有任何问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T01:38:08.020

只需使用 $.parseJSON 解析 JSON 字符串数据。这会将字符串解析为 JS 对象。

如果您的 JSON 字符串具有以下结构：

```
movies: {
    drama: [{ //An array of movies
        movieId: {
            title: 'title',
            rating: '',
            duration: ''
        }]
    },
    terror: [{ //An array of movies
        movieId: {
            title: 'title',
            rating: '',
            duration: ''
        }
    }]
} 
```

然后在点击处理程序中，您可以访问相应的对象。

```
$(movie).on('click', function(){
    movieId = this.id;
    //Get the movie info from JSON parsed obj
    movieObj = movies.drama.movieId;
    // Append info to the DOM element
    $('list').append(movieObj.{attributeId});
}) 
```

# database - Lua - SQLite3 没有在其数据库中插入行

> ID：15891126
> 
> 赞同：0
> 
> 时间：2013-04-09T00:03:56.720
> 
> 标签：database, sqlite, calendar, lua, coronasdk

我正在尝试为 Android 手机构建一个费用应用程序，我需要一种显示费用的方法。计划（对于我当前的步骤）是允许用户查看他们的费用。我想显示一个类似日历的屏幕，如果一天至少有一笔费用，则为按钮使用不同的颜色。

我的问题是在`sqlite3`表中插入信息。这是我的代码：

```
require "sqlite3"

--create path
local path = system.pathForFile("expenses.sqlite", system.DocumentsDirectory )
file = io.open( path, "r" )
if( file == nil )then           
    -- Doesn't Already Exist, So Copy it In From Resource Directory                          
    pathSource = system.pathForFile( "expenses.sqlite", system.ResourceDirectory )  
    fileSource = io.open( pathSource, "r" ) 
    contentsSource = fileSource:read( "*a" )                                  
    --Write Destination File in Documents Directory                                  
    pathDest = system.pathForFile( "expenses.sqlite", system.DocumentsDirectory )                 
    fileDest = io.open( pathDest, "w" )                 
    fileDest:write( contentsSource )                 
     -- Done                      
    io.close( fileSource )        
    io.close( fileDest )         
end
db = sqlite3.open( path )

--setup the table if it doesn't exist
local tableSetup = [[CREATE TABLE IF NOT EXISTS expenses (id INTEGER PRIMARY KEY, amount, description, year, month, day);]]
db:exec(tableSetup)
local tableFill = [[INSERT INTO expenses VALUES (NULL,']] .. 15 .. [[',']] .. "Groceries" .. [[',']] .. 2013 .. [[',']] .. 4 .. [[',']] .. 8 ..[[');]]
db:exec(tableFill)

for row in db:nrows("SELECT * FROM expenses") do
        print("hi")
        if row.year == dateTable[i].year and row.month == dateTable[i].month and row.day == dateTable[i].day then
            flag = dateTabel[i].day
        end
end 
```

我到处查看是否使用了错误的 sqlite3 命令，因为我对它不是很熟悉，但是我尝试了所有找到的东西，但没有任何效果。该`print("hi")` 行不执行，因此告诉我表中没有行。

另外，如果我说`db:nrows("SELECT year, month, day FROM expenses")`， sqlite3 给我一个错误，说没有年份列。我的总体猜测是我没有将信息正确地插入表格中，但我已经尝试了我能想到的一切。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T01:24:55.677

我发现当前版本的 sqlite3 和我计算机上的版本存在问题。无论如何，我改变了几行，它完美无缺。我更改了 select 语句和 for 循环。

```
 --sqlite statement
        local check = "SELECT DISTINCT year, month, day FROM expenses WHERE year = '"..dateTable[i].year.."' AND month = '"..dateTable[i].month.."' AND day = '"..dateTable[i].day.."'"

        --check if there is at least one expense for a given day
        --if there isn't one, the for loop won't execute
        for row in db:nrows(check) do
            flag = row.day
        end 
```

然后，如果天数等于标志变量，我将继续创建一个具有不同颜色的按钮。

这一切都在另一个 for 循环中，该循环创建了 each `dateTable[i]`。

# kendo-ui - 选项卡中的 Kendo-UI 网格

> ID：15891128
> 
> 赞同：1
> 
> 时间：2013-04-09T00:04:22.363
> 
> 标签：kendo-ui, kendo-grid

我正在研究在一个新的 HTML5 Web 应用程序上使用 Kendo UI Web，并且线框要求选项卡内的网格。我在 Telerik 的网站和网络上到处查看，但我没有看到任何这样做的例子。那不可能吗？或者有没有更好的方法，比如简单地使用 Grid 控件将出现的区域上方的 Tab 控件，让它看起来 Grid 是 Tab 的一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T00:50:05.027

应该没有什么可以阻止您在 Kendo UI TabStrip 中使用 Kendo UI Grid。查看[TabStrip](http://demos.kendoui.com/web/tabstrip/index.html)的[演示和 Grid](http://demos.kendoui.com/web/grid/index.html)的演示。希望这能让你上路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-20T11:00:39.553

详细信息模板演示在网格中有一个标签条，其中一个标签是另一个网格，第二个标签有一个模板。

[http://demos.telerik.com/kendo-ui/grid/detailtemplate](http://demos.telerik.com/kendo-ui/grid/detailtemplate)

# jaxb - JAXBException，解组 XML 文档

> ID：15891129
> 
> 赞同：1
> 
> 时间：2013-04-09T00:04:29.447
> 
> 标签：jaxb, unmarshalling

我收到了这个异常：默认构造函数无法处理隐式超级构造函数抛出的异常类型 JAXBException。必须定义显式构造函数

![在此处输入图像描述](https://i.stack.imgur.com/axFLE.png)

![在此处输入图像描述](https://i.stack.imgur.com/vfaBU.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:21:07.933

`JAXBContext.newInstance`抛出一个检查异常。您将无法直接在字段上设置它。您需要将它移动到您的构造函数中并用 try/catch 块包围它。

# css - 如果字符串不为空，则小于条件逻辑

> ID：15891131
> 
> 赞同：2
> 
> 时间：2013-04-09T00:04:42.263
> 
> 标签：css, less, dotless

我正在使用 dotless 从管理页面动态更改网站的外观。

本质上，我使用正则表达式来读取 less 中定义的变量，然后为用户提供更改变量值的选项。

我希望可以选择设置背景图像。本质上，我需要一种方法来检查字符串是否为空，如果不是，则添加背景图像混合。

```
@BackgroundImage: '';

.showBackground(@fileName) when (@fileName != '') {
    background-image: url('../Themes/images/backgrounds/@{fileName}');
}

body {
    .showBackground(@BackgroundImage)
} 
```

所以默认是无背景''当用户设置背景变量@BackgroundImage将被设置为'backgroundImage1.jpg'

我怎样才能让这个空字符串逻辑工作？

PS 我尝试将变量设置为#000000 并使用 isstring() 但它似乎返回 true。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T00:16:44.450

您想使用`when not`而不是否定条件。

**较少的**

```
.showBackground(@fileName) when not (@fileName = '') {
    background-image: url('../Themes/images/backgrounds/@{fileName}');
} 
```

**输出**

```
@BackgroundImage: ''; // No output.
@BackgroundImage: 'foo'; // background-image: url('../Themes/images/backgrounds/foo'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-02T18:14:53.707

这是另一种可能的解决方案，它设置默认值并在不使用变量时检查用例。它试图解决的问题是在某些情况下使用文本作为指示符，在其他情况下使用背景图像。

即使有一些重复，这也很有效。你的旅费可能会改变。

```
    .pointer( @ico ) 当不是 ( @ico ) {
        &:extend(.global-sprite-image);
        .sprite 位置（@ico）；
        .sprite 高度（@ico）；
        . 精灵宽度（@ico）；
        内容： '';
        左边距：2px；
        行高：1；
    }

    .pointer(@ico:'›') when ( default() ) {
        内容：@ico；
        字体大小：130%；
        字体粗细：粗体；
        字体家族：@字体标题；
        填充左：2px；
        行高：1；
    }

```

# perl - 客户端-服务器 2 路通信不成功 (Perl)

> ID：15891134
> 
> 赞同：0
> 
> 时间：2013-04-09T00:05:14.950
> 
> 标签：perl, sockets, network-programming, client-server

**请求流：**

```
____________      LOGIN           ___________
|          |------------------->>|          |
|  CLIENT  |      LOGIN ACK      |  SERVER  |
|__________|<<------------------ |__________| 
```

客户端和服务器发送它们打开的文件的内容。

**代码：**

***服务器***

```
$socket = new IO::Socket::INET ( LocalHost => '127.0.0.1', LocalPort => '0155', Proto => 'tcp', Listen => 1, Reuse => 1 ) or die "Oops: $! \n";

print "Waiting for the Client.\n";

while($clientsocket = $socket->accept()){

print   "Connected from : ", $clientsocket->peerhost();
print   ", Port : ", $clientsocket->peerport(), "\n";

while(<$clientsocket>){
    if($_ ne "\$END\$\n"){
            print"Message received from Client : $_";
        print $clientsocket $_;
}
    else{
    print"\$END\$\n";  
}   
} last;
}

login_ack();
sub login_ack{

# Some code removed for the purpose of posting                          
open (LOGINACK, "login_ack.txt") || die "Cannot open login acknowledgment file $!\n";
my @loginack=<LOGINACK>;
close LOGINACK;                         
open(LOG, ">>logfile.txt");

foreach $loginack(@loginack) {
    if($loginack ne "\$END\$\n"){
        print $clientsocket $loginack;
        print LOG $loginack;
        print $loginack;
    }
    else{
        print"\$END\$\n";   
    }
} 
```

***客户***

```
$socket = new IO::Socket::INET ( PeerHost => '127.0.0.1', PeerPort => '0155', Proto => 'tcp', Reuse => 1) or die "$!\n";

print "Connected to the Server.\n";

send_login();
sub send_login{

# Some code removed for the purpose of posting                              
open (LOGIN, "Login.txt") || die "Cannot open login file $!\n";
my @login=<LOGIN>;
close LOGIN;                            
open(LOG, ">>logfile.txt");

foreach $login(@login) {
     if($login ne "\$END\$\n"){
        print $socket $login;
        print LOG $login;
        print $login;
    }
    else{
    print"\$END\$\n"; 
    }
}
} 
LOGINACK : while(<$socket>){
        print"Message received from Server : $_";
        print $socket $_; 
        last LOGINACK;
} 
```

**目前的输出：**

![在此处输入图像描述](https://i.stack.imgur.com/A1jHC.png)

**期望的输出：**

***客户***

```
Connected to the Server.
this is Login
SAS4
50
SAS_ACTION LOGIN
LOGIN bss
PASSWORD cleint
$END$
Message received from Server : this is Login Ack
Message received from Server : SAS4
Message received from Server : 61
Message received from Server : SAS_ACTION LOGIN_ACK
Message received from Server : ACK_STATUS 0
Message received from Server : ACK_MESSAGE Logged In
Message received from Server : $END$ 
```

***服务器***

```
Waiting for the Client.
Connected from : 127.0.0.1, Port : 1862
Message received from Client : this is Login
Message received from Client : SAS4
Message received from Client : 50
Message received from Client : SAS_ACTION LOGIN
Message received from Client : LOGIN bss
Message received from Client : PASSWORD cleint
Message received from Client : $END$
this is Login Ack
SAS4
61
SAS_ACTION LOGIN_ACK
ACK_STATUS 0
ACK_MESSAGE Logged In
$END$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T02:16:06.960

`accept`用于接受来自`listen`ing（服务器）套接字的连接。客户端套接字由 连接，由`connect`为您调用`new`。

所以，

```
while (my $serversocket = $socket->accept()) {
   print "\nThe line after the while loop is printing\n\n";
   while (<$serversocket>) {
      print "Message received from Server : $_";
      print $serversocket $_;
   }
} 
```

应该

```
while (<$socket>) {
   print "Message received from Server : $_";
} 
```

客户端的输出现在是

```
Connected to the Server.
SAS4
50
SAS_ACTION LOGIN
LOGIN bss
PASSWORD cleint
$END$

The line before the while loop is printing.

Message received from Server : SAS4
Message received from Server : 50
Message received from Server : SAS_ACTION LOGIN
Message received from Server : LOGIN bss
Message received from Server : PASSWORD cleint
Message received from Server : $END$ 
```

然后它等待来自服务器的更多输入。服务器从不调用`login_ack`，因为它正在等待来自客户端的更多输入。你想什么时候打电话`login_ack`？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T17:07:21.763

# 答案修订版

此代码包括 3 个脚本：

1.  `serverJ.pl`这是一个迭代服务器，一次处理一个请求，但继续处理多个请求；
2.  `clientJ.pl`这是一个简单的客户端，它从文件发送登录请求`Login.txt`并回显它从服务器接收到的内容；和
3.  `clientQ.pl`它向服务器发送 QUIT 消息。

我保留了使用老式文件句柄的代码，而不是升级到现代词汇文件句柄，但我更改为`open`. 另一个变化是大多数消息都以`$$:`Perl 进程 ID 为前缀。`INNER:`除了与循环对称之外，我不会标记`OUTER:`循环，这确实需要一个标签。目前尚不清楚中需要的功能`send_login()`和; 他们尊重原始代码。`abc()``clientJ.pl`

### 服务器J.pl

```
#!/usr/bin/env perl
use strict;
use warnings;
use IO::Socket::INET;

my $socket = new IO::Socket::INET (
    LocalHost => '127.0.0.1',
    LocalPort => '1055',
    Proto => 'tcp',
    Listen => 1,
    Reuse => 1
) or die "Oops: $! \n";

print "$$: waiting for clients.\n";
server_loop();
$socket->close();

sub server_loop
{
OUTER:
    while (my $clientsocket = $socket->accept())
    {
        print "$$: connected from : ", $clientsocket->peerhost();
        print ", port : ", $clientsocket->peerport(), "\n";

INNER:
        while (<$clientsocket>)
        {
            print"$$: Message received from Client : $_";
            last INNER if ($_ eq "\$END\$\n");
            last OUTER if ($_ eq "\$QUIT\$\n");
            print $clientsocket $_;
        }

        my $login_ack = "login_ack.txt";
        open LOGINACK, '<', $login_ack or die "Cannot open login acknowledgment file $login_ack ($!)\n";
        my @loginack = <LOGINACK>;
        close LOGINACK;

        my $logfile = "logfile.txt";
        open LOG, ">>", $logfile or die "$$: cannot open $logfile ($!)\n";

        foreach my $loginack (@loginack)
        {
            last if ($loginack eq "\$END\$\n");
            print $clientsocket $loginack;
            print LOG "$$: $loginack";
            print "$$: server to client: $loginack";
        }

        close LOG;
        close $clientsocket;
    }
} 
```

### 客户J.pl

```
#!/usr/bin/env perl
use strict;
use warnings;
use IO::Socket::INET;

my $socket = new IO::Socket::INET (
    PeerHost => '127.0.0.1',
    PeerPort => '1055',
    Proto    => 'tcp',
    Reuse    => 1
) or die "$!\n";

print "$$: connected to the server.\n";

send_login();
abc();
$socket->close();

sub send_login
{
    my $login_txt = "Login.txt";
    open LOGIN, '<', $login_txt or die "Cannot open $login_txt $!\n";
    my @login = <LOGIN>;
    close LOGIN;

    my $logfile = "logfile.txt";
    open LOG, '>>', $logfile or die "Cannot open $logfile ($!)\n";

    foreach my $login (@login)
    {
        print $socket $login;
        print LOG "$$: $login";
        print "$$: sent to server: $login";
        last if ($login eq "\$END\$\n");
    }
    close LOG;
}

sub abc
{
    while (<$socket>)
    {
        print"$$: Message received from Server: $_";
    }
} 
```

### 客户端Q.pl

```
#!/usr/bin/env perl
use strict;
use warnings;
use IO::Socket::INET;

my $socket = new IO::Socket::INET(
  PeerHost => '127.0.0.1',
  PeerPort => '1055',
  Proto    => 'tcp',
  Reuse    => 1
) or die "$!\n";

print $socket "\$QUIT\$\n";

$socket->close(); 
```

### 样本日志

```
$ perl serverJ.pl 2>&1 &
[1] 87610
$ 87610: waiting for clients.

$ perl clientJ.pl | so
87610: connected from : 127.0.0.1, port : 57143
87610: Message received from Client : SAS4
87610: Message received from Client : 50
87610: Message received from Client : SAS_ACTION LOGIN
87610: Message received from Client : LOGIN bss
87610: Message received from Client : PASSWORD cleint
87610: Message received from Client : $END$
87610: server to client: SAS4
87610: server to client: 61
87610: server to client: SAS_ACTION LOGIN_ACK
87610: server to client: ACK_STATUS 0
87610: server to client: ACK_MESSAGE Logged In
87614: connected to the server.
87614: sent to server: SAS4
87614: sent to server: 50
87614: sent to server: SAS_ACTION LOGIN
87614: sent to server: LOGIN bss
87614: sent to server: PASSWORD cleint
87614: sent to server: $END$
87614: Message received from Server: SAS4
87614: Message received from Server: 50
87614: Message received from Server: SAS_ACTION LOGIN
87614: Message received from Server: LOGIN bss
87614: Message received from Server: PASSWORD cleint
87614: Message received from Server: SAS4
87614: Message received from Server: 61
87614: Message received from Server: SAS_ACTION LOGIN_ACK
87614: Message received from Server: ACK_STATUS 0
87614: Message received from Server: ACK_MESSAGE Logged In
$ perl clientJ.pl | so
87610: connected from : 127.0.0.1, port : 57144
87610: Message received from Client : SAS4
87610: Message received from Client : 50
87610: Message received from Client : SAS_ACTION LOGIN
87610: Message received from Client : LOGIN bss
87610: Message received from Client : PASSWORD cleint
87610: Message received from Client : $END$
87610: server to client: SAS4
87610: server to client: 61
87610: server to client: SAS_ACTION LOGIN_ACK
87610: server to client: ACK_STATUS 0
87610: server to client: ACK_MESSAGE Logged In
87617: connected to the server.
87617: sent to server: SAS4
87617: sent to server: 50
87617: sent to server: SAS_ACTION LOGIN
87617: sent to server: LOGIN bss
87617: sent to server: PASSWORD cleint
87617: sent to server: $END$
87617: Message received from Server: SAS4
87617: Message received from Server: 50
87617: Message received from Server: SAS_ACTION LOGIN
87617: Message received from Server: LOGIN bss
87617: Message received from Server: PASSWORD cleint
87617: Message received from Server: SAS4
87617: Message received from Server: 61
87617: Message received from Server: SAS_ACTION LOGIN_ACK
87617: Message received from Server: ACK_STATUS 0
87617: Message received from Server: ACK_MESSAGE Logged In
$ perl clientQ.pl | so
87610: connected from : 127.0.0.1, port : 57147
87610: Message received from Client : $QUIT$
[1]+  Done                    perl serverJ.pl 2>&1
$ 
```

* * *

### 后循环代码执行

> 在服务器脚本中，在发送确认时，`foreach my $loginack (@loginack)`循环之后的代码不会被执行。我认为这是因为代码无法跳出循环。将如何处理？

轻微修改的代码`serverJ.pl`：

```
 foreach my $loginack (@loginack)
        {
            last if ($loginack eq "\$END\$\n");
            print $clientsocket $loginack;
            print LOG "$$: $loginack";
            print "$$: server to client: $loginack";
        }

        print "$$: End of Loop\n";
        close LOG;
        close $clientsocket;
        print "$$: After close\n"; 
```

示例运行：

```
$ perl serverJ.pl &
[1] 6913
$ 6913: waiting for clients.

$ perl clientJ.pl
6915: connected to the server.
6913: connected from : 127.0.0.1, port : 52454
6915: sent to server: This is the file Login.txt
6913: Message received from Client : This is the file Login.txt
6915: sent to server: It contains more than 1 line
6915: sent to server: It also contains this one
6915: sent to server: $END$
6913: Message received from Client : It contains more than 1 line
6913: Message received from Client : It also contains this one
6913: Message received from Client : $END$
6915: Message received from Server: This is the file Login.txt
6915: Message received from Server: It contains more than 1 line
6915: Message received from Server: It also contains this one
6913: server to client: This is the file login_ack.txt
6913: server to client: As with the other file, it contains multiple lines
6913: server to client: Several of them.
6913: server to client: This is one of them.
6915: Message received from Server: This is the file login_ack.txt
6913: End of Loop
6915: Message received from Server: As with the other file, it contains multiple lines
6915: Message received from Server: Several of them.
6915: Message received from Server: This is one of them.
6913: After close
$ perl clientQ.pl
6913: connected from : 127.0.0.1, port : 52455
6913: Message received from Client : $QUIT$
[1]+  Done                    perl serverJ.pl
$ 
```

* * *

# 答案原版

这段代码似乎对我有用（对于“作品”的松散定义）。它与您的代码密切相关，但使用套接字 1055 而不是 0155（我在 Unix 上运行；我必须是 root 才能使用小于 1024 的端口号），并使用`use strict;`和`use warnings;`其他小的清理。

### 服务器.pl

```
#!/usr/bin/env perl
use strict;
use warnings;
use IO::Socket::INET;

my $socket = new IO::Socket::INET( LocalHost => '127.0.0.1', LocalPort => '1055', Proto => 'tcp', Listen => 1, Reuse => 1 ) or die "Oops: $! \n";

print "Waiting for the Client.\n";

my $clientsocket;

while ($clientsocket = $socket->accept())
{
    print   "Connected from : ", $clientsocket->peerhost();
    print   ", Port : ", $clientsocket->peerport(), "\n";

    while (<$clientsocket>)
    {
        if ($_ ne "\$END\$\n")
        {
            print"Message received from Client : $_";
            print $clientsocket $_;
        }
        else
        {
            print"\$END\$\n";  
        }   
    }
    last;
}

login_ack();

sub login_ack
{
    # Some code removed for the purpose of posting                          
    open (LOGINACK, "login_ack.txt") || die "Cannot open login acknowledgment file $!\n";
    my @loginack=<LOGINACK>;
    close LOGINACK;                         
    open(LOG, ">>logfile.txt");

    foreach my $loginack (@loginack)
    {
        if ($loginack ne "\$END\$\n")
        {
            print $clientsocket $loginack;
            print LOG $loginack;
            print $loginack;
        }
        else
        {
            print"\$END\$\n";   
        }
    }
} 
```

### 客户端.pl

```
#!/usr/bin/env perl
use strict;
use warnings;
use IO::Socket::INET;

my $socket = new IO::Socket::INET ( PeerHost => '127.0.0.1', PeerPort => '1055', Proto => 'tcp', Reuse => 1) or die "$!\n";

print "Connected to the Server.\n";

send_login();

sub send_login
{
# Some code removed for the purpose of posting                              
    open (LOGIN, "Login.txt") || die "Cannot open login file $!\n";
    my @login=<LOGIN>;
    close LOGIN;                            
    open(LOG, ">>logfile.txt");

    foreach my $login (@login)
    {
        if ($login ne "\$END\$\n")
        {
            print $socket $login;
            print LOG $login;
            print $login;
        }
        else
        {
            print"\$END\$\n"; 
        }
    }
} 

LOGINACK:
while (<$socket>)
{
    print"Message received from Server : $_";
    print $socket $_; 
    last LOGINACK;
} 
```

### 登录.txt

```
This is the content of the Login.txt file.
$END$ 
```

### login_ack.txt

```
This is the contents of the login_ack.txt file.
It has two lines of text plus the $END$ line.
$END$ 
```

### 样本输出

```
$ perl server.pl &
[1] 74838
$ Waiting for the Client.

$ perl client.pl | so
Connected from : 127.0.0.1, Port : 51109
Message received from Client : This is the content of the Login.txt file.
Message received from Client : This is the content of the Login.txt file.
Connected to the Server.
This is the content of the Login.txt file.
$END$
Message received from Server : This is the content of the Login.txt file.
This is the contents of the login_ack.txt file.
It has two lines of text plus the $END$ line.
$END$
[1]+  Done                    perl server.pl
$ 
```

服务器在响应单个请求后终止。

# grid-computing - Sun Grid Engine 重新提交作业卡在“Rq”状态

> ID：15891141
> 
> 赞同：2
> 
> 时间：2013-04-09T00:05:51.893
> 
> 标签：grid-computing, sungridengine

我有一个我希望是一个非常简单的问题，但我对 Sun Grid 不是很熟悉，所以我一直很难找到答案。我目前正在使用 bash 提交脚本将作业提交到网格，该脚本生成命令然后执行它。我在网上读到，如果太阳网格作业以 99 的代码退出，它会重新提交到网格。我已经成功编写了我的 bash 脚本来执行此操作：

```
[code to generate command, stores in $command]
$command
STATUS=$?
if [[ $STATUS -ne 0 ]]; then
    exit 99
fi
exit 0 
```

当我使用我知道具有非零退出状态的命令将该作业提交到网格时，该作业确实似乎被重新提交，但是调度程序从未将其发送到另一台主机，而是它仍然停留在队列中状态“Rq”：

```
job-ID  prior   name       user         state submit/start at     queue                          slots ja-task-ID
-----------------------------------------------------------------------------------------------------------------
2150015 0.55500 GridJob.sh my_user      Rq    04/08/2013 17:49:00                                    1 
```

我觉得这在队列的配置选项中很简单，但我无法在谷歌上找到任何东西。我已经尝试使用该选项提交这份工作`qsub -r y`，但这似乎并没有改变任何东西。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T16:40:28.507

重新计划的作业只会在其`rerun`属性（默认为 FALSE）设置为 TRUE 的队列中运行，因此请检查您的队列配置 ( `qconf -mq myqueue`)。没有这个，你的工作将无限期地处于重新安排的待定状态，因为它无处可去。

IIRC，提交作业`qsub -r yes`仅使它们有资格在 exec 节点崩溃的情况下自动重新安排，并且以状态 99 退出无论如何都应该触发重新安排。

# .net - CQRS 命令结构

> ID：15891143
> 
> 赞同：3
> 
> 时间：2013-04-09T00:06:11.080
> 
> 标签：.net, domain-driven-design, cqrs

我有这样的 CQRS 命令

```
public sealed class RequestRoute
{
    public RequestRoute(string fromAddressName, double fromLatitude, double fromLongitude, string toAddressName, double toLatitude, double toLongitude, string userId)
    {
        UserId = userId;
        ToLongitude = toLongitude;
        ToLatitude = toLatitude;
        ToAddressName = toAddressName;
        FromLongitude = fromLongitude;
        FromLatitude = fromLatitude;
        FromAddressName = fromAddressName;
    }

    public string FromAddressName { get; private set; }
    public double FromLatitude { get; private set; }
    public double FromLongitude { get; private set; }

    public string ToAddressName { get; private set; }
    public double ToLatitude { get; private set; }
    public double ToLongitude { get; private set; }

    public string UserId { get; private set; }
} 
```

我的程序员的直觉告诉我，我应该将 FromXXX 和 ToXXX 字段分解到一个名为“Address”的单独类中......但我不确定这是否违反了 CQRS 模式......我见过的所有例子都只使用原始类型作为命令和事件的属性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T11:28:14.723

命令是面向数据的，而不是面向对象的。它的属性应该主要是基元。你没有在这里建模任何东西，只是发送平面数据。

使用自定义类型会强制您将类型发布到每个想要使用命令的客户端。它还将阻止您在将来轻松更改这些类型。

然后是可串行化：自定义类型越少越简单。

在命令和事件等消息中，我会尽可能合理地使用原语。重复不是这里的问题，你想要低耦合、可串行化、容错性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T02:45:35.247

就模式而言，在那里提取一个通用类型似乎很好。总体而言，命令一旦发出就不应更改，因此只需确保地址类型是不可变的（与原始类型一样）。

可能有一些实现约束需要考虑，即序列化。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-09T09:48:48.047

在我看来，这样的重构没有真正的价值。

在可读性和维护期间写入`route.ToLatitude`或`route.To.Latitude`不改变任何内容。

但是，我会将`double` **字段**更改为`decimal`（甚至是字符串）以避免在不同平台、机器或架构之间移动 DTO 序列化（无论是否为二进制）时出现任何问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-01T15:03:21.477

您可以安全地将“To”和“From”重构为一个类。命令是您域的 API，所以只要您可以维护它 - 您应该很好。

PS 如果你问关于事件溯源中的事件的相同问题 - 答案会复杂得多

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T07:43:59.953

我认为这里有一点混乱。CQRS 只是意味着拥有单独的读取和“写入”（行为丰富）模型。RequestRoute 是命令，因此是消息而不是模型。CQRS 可以与消息驱动架构一起使用，但它不是必需的，因此这两者不相关。

在这种情况下，你是对的，FromXXX 和 ToXXX 应该是一个 Address 类，但这与 CQRS 无关，所以你没有违反任何东西。

顺便说一句，消息应该包含其处理程序所需的所有必需信息，以便您可以在其中放入很多东西，如果您知道消息将被持久化，唯一的问题是序列化，但消息只不过是 DTO反正。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-15T12:27:08.540

在这里提取一个通用类型并没有错。在大多数情况下，您应该共享模式而不是类型，因此在这方面不会引起问题。

# java - 如何确保 Java Web Start 下载安装最新版本

> ID：15891146
> 
> 赞同：2
> 
> 时间：2013-04-09T00:06:18.873
> 
> 标签：java, jnlp, java-web-start

我在我的机器上安装了 jdk 1.6，但我想在 JRE 1.7+ 上运行我的代码是否有任何方法可以确保使用 JNLP 自动下载和安装最新的 JRE？

这是我的 JNLP 文件的当前内容。

```
 <java  href="http://java.sun.com/products/autodl/j2se"  version="1.7.0_17"  java-vm-args="-ea" initial-heap-size="128m" max-heap-size="512m" /> 
```

我也试过：

```
 <java  href="http://java.sun.com/products/autodl/j2se"  version="1.7+"  java-vm-args="-ea" initial-heap-size="128m" max-heap-size="512m" /> 
```

我在我的 Java Web 启动控制面板中使用直接代理，并启用了自动下载 JRE 的选项。但我总是收到手动安装 JRE 版本和应用程序停止的消息。如果需要任何进一步的信息，请告诉我。我不希望我的客户手动安装 JRE。操作系统：红帽Linux

[使用JaneLA](http://pscode.org/janela/)验证 JNLP 文件

# wordpress - 使用 tax_query 和 meta_query 列出搜索结果

> ID：15891148
> 
> 赞同：0
> 
> 时间：2013-04-09T00:06:32.090
> 
> 标签：wordpress

我不明白为什么我写的过滤器在我使用下一页或上一页时不起作用！例如，当我尝试查看帖子的其余部分时，我选择 minprice= 200 点击搜索，过滤器仅找到价格 > 200 的帖子，页面显示相同的页面。这是代码！！

```
foreach($_POST as $key => $value){
    if($value != ''){
        $item['taxonomy'] = htmlspecialchars($key);
        $item['terms'] = htmlspecialchars($value);
        $item['field'] = 'slug';
        $list[] = $item;
        if ($key == "minprice") {
                $minprice = $key;
                if($value > 0) {
                    $valminprice = $value;
                }
        }
        if ($key == "maxprice") {
                $maxprice = $key;
                if($value > 0) {
                    $valmaxprice = $value;
                }
        }
        if ($key == "minmq") {
                $minmq = $key;
                if($value > 0) {
                    $valminmq = $value;
                }
            }
        if ($key == "maxmq") {
                $maxmq = $key;
                if($value > 0) {
                    $valmaxmq = $value;
                }
            }
        if($key == "location"){
                $lockey = $key;
                $valloc = $value;
            }
        if ($key == "type") {
            $typekey = $key;
            $valtype = $value;
        }
        if ($key == "property") {
            $propkey = $key;
            $valprop = $value;
        }
        if ($key == "range") {
            $rangekey = $key;
            $valrange = $value;
        }

    }       
}  

$args = array (
            'post_type' => 'listings',
            'posts_per_page' => 2,
            'meta_query' => array(
                                array(
                                'key' => 'wtf_price',
                                'value' => array($valminprice, $valmaxprice),
                                'type' => 'NUMERIC',
                                'compare' => 'BETWEEN'
                                ),
                                array(
                                'key' => 'wtf_mq',
                                'value' => array($valminmq,$valmaxmq),
                                'type' => 'numeric',
                                'compare' => 'BETWEEN'
                                )
                            ),

            'tax_query' => array(
                                array(
                                    'taxonomy' => 'location',
                                    'field' => 'slug',
                                    'terms' => $valloc,      
                                ),
                                array(
                                    'taxonomy' => 'type',
                                    'field' => 'slug',
                                    'terms' => $valtype,      
                                ),
                                array(
                                    'taxonomy' => 'property',
                                    'field' => 'slug',
                                    'terms' => $valprop,
                                ),
                                array(
                                    'taxonomy' => 'range',
                                    'field' => 'slug',
                                    'terms' => $valrange,
                                )
                            )
            );

    $the_query = new WP_Query($args);   

<?php while ( $the_query->have_posts() ) : $the_query->the_post();?>
    <div class="post propbox <?php if (++$counter % 2 == 0) { echo "lastbox";}?> clearfix" id="post-<?php the_ID(); ?>">
<div class="archimg">

THE CONTENT....

</div>

    <?php endwhile; wp_reset_postdata(); ?>      

<div class="row page-navigation"> 
     <?php next_posts_link('&laquo; Next page', $the_query->max_num_pages) ?> 
     <?php previous_posts_link('Previous &raquo;') ?> 
</div>

</div><!--end content-->` 
```

有人可以帮助我吗？PS对不起我糟糕的英语！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T00:52:30.960

我相信您需要在`paged`查询中添加一个参数。

```
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$args = array (
            'post_type' => 'listings',
            'posts_per_page' => 2,
            'paged' => $paged,
             // etc.
             ); 
```

[这篇 Codex 文章](https://codex.wordpress.org/Pagination#Adding_the_.22paged.22_parameter_to_a_query)有更多示例可以帮助您进行操作。

# python - Python 全精度除法源码

> ID：15891149
> 
> 赞同：7
> 
> 时间：2013-04-09T00:06:38.657
> 
> 标签：python, c, division

我最近一直在使用任意精度算法，并且非常好奇 Python 是如何处理它的。当我输入一个非常大（600-1000）的数字除以另一个同样大的数字时，它就可以工作并且我喜欢它。我有 Python 源文件，并且对 C 没问题，源代码中的哪个/哪里是管理这个部门的部分，所以我可以查看它，也许可以修改它？我的最终游戏是 C 中的数论类型的工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T03:05:29.090

Python 3.3中实现的核心`long / long`是 in [`longobject.c`](http://hg.python.org/cpython/file/3.3/Objects/longobject.c#l2384)， as 函数`x_divrem`。

该实现仿照 Knuth 的“计算机编程艺术”，卷。2（第 3 版），第 4.3.1 节，算法 D“非负整数除法”，根据来源的评论。

# android - 在设备中捕获 adb 消息

> ID：15891153
> 
> 赞同：0
> 
> 时间：2013-04-09T00:06:51.863
> 
> 标签：android, logging, system, message, adb

有什么方法可以捕获 android 设备内 adb 的所有消息 - 我也想要操作系统消息，而不是日志猫？如果可能的话，我想在测试时查看来自应用程序的消息，并使用算法对它们进行排序以在 maketoast 中显示来自应用程序的消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T00:18:27.173

好的，我找到了我要找的东西

[http://elinux.org/Android_Logging_System](http://elinux.org/Android_Logging_System)

# python - 矢量化照片：寻找适应的算法

> ID：15891158
> 
> 赞同：3
> 
> 时间：2013-04-09T00:07:16.693
> 
> 标签：python, opencv, image-processing, vector, vectorization

作为一个小项目，我决定编写一个小型光栅到矢量转换器。网上有很多很多的资源，但是少得多的实际实现可以给我任何一种起点。我还没有决定我要用哪种语言来做这件事，但 Python 似乎很适应。

第一个问题是大多数论文都针对矢量化徽标或灰度图像，我对这两者都不太感兴趣**。potrace**，其算法在[此处](http://potrace.sourceforge.net/potrace.pdf)描述，就是其中一个库。相同的技术是否适用于照片位图？

我对我的发现感到灰心，直到我偶然发现了[Vector Magic](http://vectormagic.com/home)。结果是惊人的！但是，他们没有提供有关其算法的任何信息。此处描述了一种产生类似质量结果的方法：http: [//eprints.gla.ac.uk/47879/1/ID47879.pdf](http://eprints.gla.ac.uk/47879/1/ID47879.pdf)。策略是在将轮廓绘制为向量之前移除轮廓并对其进行处理。

但是没有提到他们是如何做到这一点的。我可以用 openCV 提取轮廓，但那又如何呢？我无法理解矢量的创建，或者轮廓提取后发生的任何事情。

所以，总而言之，这是我的问题：您为这个项目推荐哪种语言或库？您对实现可以产生令人满意结果的算法有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T01:30:19.657

这里有几种方法：

*   ARDECO：[http](http://alice.loria.fr/index.php/publications.html?Paper=EGSR_Ardeco@2006)
    ://alice.loria.fr/index.php/publications.html?Paper=EGSR_Ardeco@2006 它将问题转换为能量最小化问题，通过类似 Voronoi 的方法解决

*   [http://www.cs.northwestern.edu/~sco590/npar2011.pdf](http://www.cs.northwestern.edu/~sco590/npar2011.pdf)
    它在精神上与你提到的肖像更相似

*   使用渐变网格： [https](https://www.cct.lsu.edu/~fharhad/ganbatte/siggraph2007/CD2/content/papers/011-sun.pdf)
    ://www.cct.lsu.edu/~fharhad/ganbatte/siggraph2007/CD2/content/papers/011-sun.pdf 用网格 表示图像中的渐变

*   使用扩散曲线：
    [http](http://hal.archives-ouvertes.fr/docs/00/27/47/68/PDF/diffusion_curves.pdf)
    ://hal.archives-ouvertes.fr/docs/00/27/47/68/PDF/diffusion_curves.pdf 主要用于通过绘制渐变来创作艺术，他们还提出了矢量化图像的逆问题与他们的原始人。

# java - 如何确定当前应用在 LibGDX 中运行在哪个平台上？

> ID：15891159
> 
> 赞同：13
> 
> 时间：2013-04-09T00:07:17.747
> 
> 标签：java, android, libgdx

我需要根据运行 LibGDX 应用程序的部署平台（即桌面或 Android 等）提供稍微不同的应用程序逻辑，**LibGDX API 是否提供识别当前运行时平台的方法？**

这篇[文章“在 libGDX 中抽象平台特定代码”](http://siondream.com/blog/games/abstracting-platform-specific-code-in-libgdx)提供了一种解决方案，我只是想知道 API 本身是否有直接可用的东西（？）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-09T00:34:15.673

您可能会使用[`Application#getType()`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/Application.html#getType%28%29)，它将返回由 定义的值之一[`Application.ApplicationType`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/Application.ApplicationType.html)：

*   安卓
*   小程序
*   桌面
*   iOS
*   WebGL

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-07-13T00:37:39.120

如果人们无法确定您实际从何处获取 ApplicationType，则可以从以下位置访问它：

```
Gdx.app.getType() 
```

对于一个工作示例，这将是：

```
if(Gdx.app.getType() == ApplicationType.iOS) {
    //Do awesome stuff for iOS here
} 
```

# java - 引用变量和对象上的 java hashCode() 函数

> ID：15891165
> 
> 赞同：0
> 
> 时间：2013-04-09T00:07:40.763
> 
> 标签：java, hashcode

例如，如果我创建一个 A 类型的对象，

```
A a = new A(); 
```

那么 a 是 Stack 上的一个引用，它指向堆上的 A 类型对象。我的问题是，如果我调用a.hashCode()，会返回哪个hashcode，是引用的hashcode还是对象的hashcode？如果它是对象的哈希码，我如何获得引用的哈希码？有人可以给我一些建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T00:09:30.980

`hashCode()`只是一个非静态方法，就像任何其他非静态方法一样。它要么由 定义，要么由(`A`的基类，在最坏的情况下) 定义。所发生的只是在相关实例上调用该方法。`A``Object`

> 我怎样才能得到参考的哈希码？

你不能，因为那没有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-07T17:34:15.417

您可以通过调用获取引用的哈希码：

```
System.identityHashCode(a); 
```

这就是 java.util.IdentityHashMap 等数据结构的基础。

# ruby - “命令-查询分离”规则的例外情况？

> ID：15891172
> 
> 赞同：2
> 
> 时间：2013-04-09T00:09:11.890
> 
> 标签：ruby, command-query-separation

[命令-查询分离](http://en.wikipedia.org/wiki/Command-query_separation)“规定每个方法要么是执行操作的命令，要么是向调用者返回数据的查询，但不能两者兼而有之。换句话说，提出问题不应改变答案。”

```
a = [1, 2, 3]
last = a.pop 
```

在这里，在 Ruby 中，`pop`命令返回从数组中弹出的项目。

这是一个方法中的命令*和*查询示例，似乎有必要这样做。

如果是这种情况，拥有一个本质上既是查询又是命令的方法真的是代码异味吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-22T15:46:03.200

堆栈弹出是 CQS 的一个众所周知的例外。 [Martin Fowler](http://martinfowler.com/bliki/CommandQuerySeparation.html)指出这是打破规则的好地方。

我会说*在这种情况下*它不是代码气味，但总的来说它*是*代码气味。

# jquery - 从 element from the <head> in an ajax response</h1> <div id="body"><p>so I'm pretty sure this question has been answered and I've figured out how to retrieve the text out a <code><title></code> element as st

> ID：15891176
> 
> 赞同：0
> 
> 时间：2013-04-09T00:09:43.283
> 
> 标签：jquery, html, ajax

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:53:40.923

我想你可能需要这个：

```
var url = 'http://google.com';
$.get("get_url.php?url="+url,function(response) {
    var title=(/<title>(.*?)<\/title>/m).exec(response)[1];
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T00:59:13.570

可以`filter()`用来获取`title`标签

```
success: function(data){
     console.log($(data).filter('title').text());

} 
```

# php - 联接查询仅基于一个匹配显示结果

> ID：15891181
> 
> 赞同：1
> 
> 时间：2013-04-09T00:10:28.847
> 
> 标签：php, mysql, zend-framework, join

所以这是我的查询

```
SELECT `c`.`location`, `c`.`id`, `c`.`user_id`, `c`.`date`, `c`.`attachment`, 
`ud`.`first_name`, `ud`.`last_name`, 
`a`.`file_name`, `a`.`folder_name`, `a`.`server_key`, `a`.`type` FROM `content`
AS `c` INNER JOIN `users_details` AS `ud` ON ud.user_id = c.user_id INNER JOIN
`attachments` AS `a` ON c.id = a.content_id WHERE (c.location = 'New York') 
```

我还希望将附件表中的结果数据包含在结果中，问题是表中的任何数据行都没有`content`附件，如果帖子有附件，它会保存在行附件的内容表中，带有 1 , 如果没有附件，则为 0。

现在的问题是我的查询只显示有附件的数据，我猜这个问题来自与附件表的连接。

那么我该如何做到这一点，所以我有以下输出：将数据合并在一起以显示已上传的帖子，也可以显示没有上传的帖子，还显示来自已上传的附件表的数据。有点像这样：

```
 [0] => array(11) {
    ["location"] => string(15) "New York"
    ["id"] => string(2) "25"
    ["user_id"] => string(1) "1"
    ["date"] => string(10) "1364348772"
    ["attachment"] => string(1) "1"
    ["first_name"] => string(8) "John"
    ["last_name"] => string(7) "Doe"
    ["file_name"] => string(36) "c2638acdac24dc2efe4e5971db5f4cc5.jpg"
    ["folder_name"] => string(13) "5133b99030ac4"
    ["server_key"] => string(1) "1"
    ["type"] => string(1) "1"
  }
  [1] => array(11) {
    ["location"] => string(15) "New York"
    ["id"] => string(2) "26"
    ["user_id"] => string(1) "1"
    ["date"] => string(10) "1364348812"
    ["attachment"] => string(1) "0"
    ["first_name"] => string(8) "John"
    ["last_name"] => string(7) "Doe"
    ["file_name"] => string(36) ""
    ["folder_name"] => string(13) ""
    ["server_key"] => string(1) ""
    ["type"] => string(1) ""
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T00:17:26.250

看起来你只需要`LEFT OUTER JOIN`像这样的附件表：

```
SELECT
  `c`.`location`,
  `c`.`id`,
  `c`.`user_id`,
  `c`.`date`,
  `c`.`attachment`, 
  `ud`.`first_name`,
  `ud`.`last_name`, 
  `a`.`file_name`,
  `a`.`folder_name`,
  `a`.`server_key`,
  `a`.`type`
FROM `content` AS `c`
INNER JOIN `users_details` AS `ud`
  ON ud.user_id = c.user_id
LEFT OUTER JOIN `attachments` AS `a`
  ON c.id = a.content_id
WHERE c.location = 'New York' 
```

将`OUTER JOIN`返回所有结果，无论是否存在`a.content_id`与 匹配的`c.id`。附件表中的那些选定字段将简单地显示为`NULL`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T00:17:36.510

尝试使用左外连接：

```
SELECT `c`.`location`, `c`.`id`, `c`.`user_id`, `c`.`date`, `c`.`attachment`, 
`ud`.`first_name`, `ud`.`last_name`, 
`a`.`file_name`, `a`.`folder_name`, `a`.`server_key`, `a`.`type` FROM `content`
AS `c` INNER JOIN `users_details` AS `ud` ON ud.user_id = c.user_id LEFT OUTER JOIN
`attachments` AS `a` ON c.id = a.content_id WHERE (c.location = 'New York') 
```

有一个很好的[关于 joins 的 Wikipedia 页面](http://en.wikipedia.org/wiki/Join_%28SQL%29)。

# java - java中的扫描仪故障

> ID：15891183
> 
> 赞同：0
> 
> 时间：2013-04-09T00:10:36.863
> 
> 标签：java

我正在使用轻量级 Java 游戏库 (lwjgl) 编写各种 obj 查看器，但在读取外部 obj 文件时遇到了一些麻烦。当我运行代码时，它甚至不会向堆栈跟踪打印任何内容，更不用说打印 nextLine 了。这是我的整个代码（以防它是代码块之外的语法错误，或者我把它放在错误的地方。

```
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.util.Scanner;

import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;
import org.lwjgl.opengl.GL11;

public class MainDisplay {

public void start() {
try {
    Display.setDisplayMode(new DisplayMode(800,600));
    Display.create();
}
catch (LWJGLException e) {
    e.printStackTrace();
    System.exit(0);
}

GL11.glMatrixMode(GL11.GL_PROJECTION);
GL11.glLoadIdentity();
GL11.glOrtho(0, 800, 0, 600, 1, -1);
GL11.glMatrixMode(GL11.GL_MODELVIEW);

while (!Display.isCloseRequested()) {
    GL11.glClear(GL11.GL_COLOR_BUFFER_BIT | GL11.GL_DEPTH_BUFFER_BIT);
    GL11.glColor3f(0.5f, 0.5f, 1.0f);

}
}
/**
 * @param args
 * @throws FileNotFoundException 
 */
public static void main(String[] args) throws FileNotFoundException {
    try {
        FileReader obj = new FileReader("test.obj");
        Scanner scanner = new Scanner(obj);
        String line = scanner.nextLine();
    } catch (IOException e) {
        e.printStackTrace();
    }

    MainDisplay mainDisplay = new MainDisplay();
    mainDisplay.start();

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:14:24.607

来，试试这个。

```
while (scanner.hasNextLine()) {
            String line = scanner.nextLine();
            System.out.println(line);
        }
        scanner.close(); 
```

您所做的只是将文件中第一行的值存储在变量中。`while`我设置的循环读取文件中的所有行，它仅在到达`null`或 EOF 后停止。

# java - Java ImageIO.write 到类路径？

> ID：15891187
> 
> 赞同：1
> 
> 时间：2013-04-09T00:11:04.113
> 
> 标签：java, image, file-io, inputstream, javax.imageio

我正在尝试使用`ImageIO`该类来保存图像，然后使用输入流获取资源。我的问题是，`NullPointerException`每当我尝试创建输入流时，我都会得到一个。如果我只是简单地将图像文件放在类路径中，它就可以工作。这是我的代码：

```
ImageIO.write(image, "png", new File("temp.png"));
InputStream imgIs = AptCap.class.getResourceAsStream("temp.png");
byte[] imgData = new byte[imgIs.available()]; // I get null here. 
```

我还尝试为它们指定 C 驱动器上文件的直接位置，但我仍然得到一个空指针异常。无论如何，我宁愿不这样做，而只是将其保留在类路径中（出于多操作系统支持的目的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:24:37.663

```
ByteArrayOutputStream baos = new ByteArrayOutputStream(); // create OutputStream
ImageIO.write(image, "png", baos); // write to OS
InputStream imgIs = new ByteArrayInputStream(baos.toByteArray()); // grab bytes from OS
//.. 
```

# recursion - c ++中的递归回溯骑士之旅

> ID：15891189
> 
> 赞同：0
> 
> 时间：2013-04-09T00:11:14.053
> 
> 标签：recursion, backtracking, knights-tour

所以，简而言之，我正在研究骑士的巡回演出。如果你不知道那是什么，马就会被放到棋盘上，你必须将它移动到棋盘上的每个位置恰好一次。我正在使用递归函数，但无法让我的回溯工作。我可以在 5x5 板上完成 22 步，但程序不会备份并尝试不同的路径。我只发布了我的代码的递归部分（抱歉它有点长）任何见解都会非常有帮助。非常感谢！

```
`bool findPath ( int board[][boardSize + 4], int &currRow, int &currCol, int &currMove,int boardSize )
{
    int i, j;
    bool foundSpot;

    board[currRow][currCol] = currMove;

    if ( currMove == boardSize * boardSize )
        return true;

    for ( i = 0; i < boardSize + 4; i++ )
    {
        for ( j = 0; j < boardSize + 4; j++ )
            cout << setw (3) << board[i][j];
        cout<<endl;
    }
    cout << endl;

    if ( board[currRow - 2][currCol - 1] == 0 )
    {
        currMove += 1;
        board[currRow - 2][currCol - 1] = currMove;
        currRow -= 2;
        currCol -= 1;
        if ( findPath( board, currRow, currCol, currMove, boardSize ) )
            return true;
    }

    if ( board[currRow - 2][currCol + 1] == 0 )
    {
        currMove += 1;
        board[currRow - 2][currCol + 1] = currMove ;
        currRow -= 2;
        currCol += 1;
        if ( findPath( board, currRow, currCol, currMove, boardSize ) )
            return true;
    }

    if ( board[currRow - 1][currCol + 2] == 0 )
    {
        currMove += 1;
        board[currRow - 1][currCol + 2] = currMove ;
        currRow -= 1;
        currCol += 2;
        if ( findPath( board, currRow, currCol, currMove, boardSize ) )
            return true;
    }

    if ( board[currRow + 1][currCol + 2] == 0 )
    {       
        currMove += 1;
        board[currRow + 1][currCol + 2] = currMove ;
        currRow += 1;
        currCol += 2;
        if ( findPath( board, currRow, currCol, currMove, boardSize ) )
            return true;
    }

    if ( board[currRow + 2][currCol + 1] == 0 )
    {
        currMove += 1;
        board[currRow + 2][currCol + 1] = currMove ;
        currRow += 2;
        currCol += 1;
        if ( findPath( board, currRow, currCol, currMove, boardSize ) )
            return true;
    }

    if ( board[currRow + 2][currCol - 1] == 0 )
    {
        currMove += 1;
        board[currRow + 2][currCol - 1] = currMove ;
        currRow += 2;
        currCol -= 1;
        if ( findPath( board, currRow, currCol, currMove, boardSize ) )
            return true;
    }

    if ( board[currRow + 1][currCol - 2] == 0 )
    {       
        currMove += 1;
        board[currRow + 1][currCol - 2] = currMove ;
        currRow += 1;
        currCol -= 2;
        if ( findPath( board, currRow, currCol, currMove, boardSize ) )
            return true;
    }

    if ( board[currRow - 1][currCol - 2] == 0 )
    {       
        currMove += 1;
        board[currRow - 1][currCol - 2] = currMove ;        
        currRow -= 1;
        currCol -= 2;
        if ( findPath( board, currRow, currCol, currMove, boardSize ) )
            return true;
    }
    board[currRow][currCol] = 0;
    currMove -= 2;
    return false;
}` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-12T20:24:24.390

我在 c++ 中制定了以下骑士之旅的实现：

```
#include<cstdio>
#include<iostream>
#define MAX 10

using namespace std;
int tour=1;
int board[MAX][MAX];

bool is_travelled(int,int);
bool knights_tour(int,int,int,int);
void initialize(int);
void display(int);

int main(int argc,char** argv){
    int n;
    scanf("%d",&n);
    for(int i=0;i<10;i++){
        for(int j=0;j<10;j++){
            board[i][j]=-1;
        }
    }
    initialize(n);
    display(n);
    return 0;
}

bool is_travelled(int x,int y){
    if(x<0 || y<0)return true;
    if(board[x][y]==-1)return false;
    return true;
}

bool knights_tour(int i,int j,int n,int k){ // k=number of places remained , n=side of chess_board;
    int x,y;
    if(k==0)return true;
    // hard-coded cases;
    // reordering of the cases have significant effect on the execution time
    x=i+2;y=j+1;
    if((!is_travelled(x,y))&&x<n&&y<n){
        board[x][y]=tour;
        tour+=1;
        if(knights_tour(x,y,n,k-1))return true;
        board[x][y]=-1;
        tour-=1;
    }
    x=i+1;y=j+2;
    if((!is_travelled(x,y))&&x<n&&y<n){
        board[x][y]=tour;
        tour+=1;
        if(knights_tour(x,y,n,k-1))return true;
        board[x][y]=-1;
        tour-=1;
    }
    x=i-1;y=j+2;
    if((!is_travelled(x,y))&&x<n&&y<n){
        board[x][y]=tour;
        tour+=1;
        if(knights_tour(x,y,n,k-1))return true;
        board[x][y]=-1;
        tour-=1;
    }
    x=i-2;y=j+1;
    if((!is_travelled(x,y))&&x<n&&y<n){
        board[x][y]=tour;
        tour+=1;
        if(knights_tour(x,y,n,k-1))return true;
        board[x][y]=-1;
        tour-=1;
    }
    x=i-2;y=j-1;
    if((!is_travelled(x,y))&&x<n&&y<n){
        board[x][y]=tour;
        tour+=1;
        if(knights_tour(x,y,n,k-1))return true;
        board[x][y]=-1;
        tour-=1;
    }
    x=i-1;y=j-2;
    if((!is_travelled(x,y))&&x<n&&y<n){
        board[x][y]=tour;
        tour+=1;
        if(knights_tour(x,y,n,k-1))return true;
        board[x][y]=-1;
        tour-=1;
    }
    x=i+1;y=j-2;
    if((!is_travelled(x,y))&&x+y<n&&x<n&&y<n){
        board[x][y]=tour;
        tour+=1;
        if(knights_tour(x,y,n,k-1))return true;
        board[x][y]=-1;
        tour-=1;
    }
    x=i+2;y=j-1;
    if((!is_travelled(x,y))&&x<n&&y<n){
        board[x][y]=tour;
        tour+=1;
        if(knights_tour(x,y,n,k-1))return true;
        board[x][y]=-1;
        tour-=1;
    }
    return false;
}
void initialize(int n){
    for(int i=0;i<n;i++){
        for(int j=0;j<n;j++){
            board[i][j]=0;
            int r=knights_tour(i,j,n,n*n-1);
            if(r==1)return;
            board[i][j]=-1;
        }
    }
}

void display(int n){
    for(int i=0;i<n;i++){
        for(int j=0;j<n;j++){
            printf("%2d ",board[i][j]);
        }
        printf("\n");
    }
    cout<<endl;
} 
```

希望这可以帮助 。快乐编码！

# php - $_REQUEST['oauth_verifier'] 为空

> ID：15891192
> 
> 赞同：0
> 
> 时间：2013-04-09T00:11:20.380
> 
> 标签：php, codeigniter, twitter, oauth

我正在使用带有 CodeIgniter 的 Abraham 库并遇到了这个问题。

我知道 twitter 最近用他们的 API 改变了一些东西，我试着做提到的修复：

```
$access_token = $connection->getAccessToken($_REQUEST['oauth_verifier']); 
```

但是现在我的脚本告诉我`$_REQUEST['oauth_verifier']`没有设置？

到底是怎么回事？我的网站在 4 天前运行良好？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:52:08.717

我遇到了类似的问题，但使用的是 iOS，而不是 PHP。以下是有关上周 Twitter API 发生变化的详细信息。

[https://dev.twitter.com/discussions/16443](https://dev.twitter.com/discussions/16443)

在您的上下文中，您可能需要检查以确保您传递了有效的回调 url 以获取 oauth_verifier 字符串。

# testing - 如何使用 Cucumber 和 Capybara 测试 Rails 应用程序的远程服务器部署

> ID：15891195
> 
> 赞同：4
> 
> 时间：2013-04-09T00:11:35.247
> 
> 标签：testing, ruby-on-rails-3.2, cucumber, capybara, remote-server

我正在 Windows 7 下开发 Rails 3.x 应用程序，并使用 Cucumber 和 Capybara 进行测试。

我已经设置了一个 Ubuntu 虚拟机并将我的应用程序部署到该虚拟机上。

我想在每次部署后使用 Cucumber / Capybara 在 VM 上测试我的应用程序 - 毕竟，这是一个不同的操作系统，我想利用我的测试套件的强大功能来测试不同的浏览器（Firefox、Chrome 和 IE）部署的站点。

从理论上讲，似乎我有 3 个主要选项：

1) 在本地运行 Cucumber，使用本地浏览器并访问远程服务器 (VM guest) 2) 在本地运行 Cucumber，使用远程浏览器访问远程服务器 3) 连接到 VM guest 并在 VM 下本地运行 Cucumber

在我看来，选项 1) 最能模拟现实世界，即不在远程服务器上运行浏览器。

但是，我不确定这是否可能，或者如何配置东西来实现它。特别是我不清楚在这种情况下是否需要 Selenium Server，如果需要，是否应该在本地（在 Windows 开发机器上）或远程（在部署应用程序的来宾 VM 中）部署它。

我已经对这个问题进行了相当多的谷歌搜索，并查看了以下帖子：

[使用黄瓜远程测试连接到 VM 的问题](https://stackoverflow.com/questions/11880342/problems-with-connecting-to-vm-with-cucumber-remote-test)

[https://github.com/leonid-shevtsov/headless](https://github.com/leonid-shevtsov/headless)

虽然这些提供了一些线索，例如使用（与[http://rubydoc.info/github/jnicklas/capybara](http://rubydoc.info/github/jnicklas/capybara)官方 Capybara 文档中描述的完全一样）

```
 Capybara.app_host = "http://hostname:4444"
  Capybara.default_driver = :selenium
  Capybara.run_server = false 
```

给出的示例似乎是指远程运行的浏览器（例如我的选项 2 或 3），我仍然不确定最好的方法是什么。

# c# - 查找枚举转换为字符串的任何地方

> ID：15891197
> 
> 赞同：12
> 
> 时间：2013-04-09T00:12:08.430
> 
> 标签：c#, string, enums, roslyn

我目前正在尝试在解决方案中找到将特定枚举转换为字符串的任何地方，无论是否显式调用 ToString()。（这些被替换为使用枚举描述的转换以改善混淆。）

示例：我想查找代码，例如`string str = "Value: " + SomeEnum.someValue;`

我尝试将枚举本身替换为包含对枚举类型的隐式转换并覆盖包装器类中的 ToString() 的包装器类，但是当我尝试搜索 ToString() 覆盖的用途时，它给了我一个位置列表在任何东西上调用 ToString() 的解决方案（并且仅在显式调用的地方）。搜索是使用 Visual Studio 中的 ReSharper 完成的。

还有其他方法可以找到这些枚举到字符串的转换吗？手动完成整个解决方案听起来并不有趣。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-09T04:28:55.820

Roslyn 的诀窍是使用`SemanticModel.GetTypeInfo()`然后检查`ConvertedType`以找到这些隐式转换。

一个完整的例子：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Roslyn.Compilers;
using Roslyn.Compilers.CSharp;
using Roslyn.Services;
using Roslyn.Services.CSharp;
using Roslyn.Compilers.Common;

class Program
{
    static void Main(string[] args)
    {
        var code = @"enum E { V } class { static void Main() { string s = ""Value: "" + E.V; } }";
        var doc = Solution.Create(SolutionId.CreateNewId())
            .AddCSharpProject("foo", "foo")
            .AddMetadataReference(MetadataFileReference.CreateAssemblyReference("mscorlib"))
            .AddDocument("doc.cs", code);
        var stringType = doc.Project.GetCompilation().GetSpecialType(SpecialType.System_String);
        var e = doc.Project.GetCompilation().GlobalNamespace.GetTypeMembers("E").Single();
        var v = e.GetMembers("V").Single();
        var refs = v.FindReferences(doc.Project.Solution);
        var toStrings = from referencedLocation in refs
                        from r in referencedLocation.Locations
                        let node = GetNode(doc, r.Location)
                        let convertedType = doc.GetSemanticModel().GetTypeInfo(GetNode(doc, r.Location)).ConvertedType
                        where convertedType.Equals(stringType)
                        select r.Location;
        foreach (var loc in toStrings)
        {
            Console.WriteLine(loc);
        }
    }

    static CommonSyntaxNode GetNode(IDocument doc, CommonLocation loc)
    {
        return loc.SourceTree.GetRoot().FindToken(loc.SourceSpan.Start).Parent.Parent.Parent;
    }
} 
```

# python - 我的 python 函数不会返回或更新值

> ID：15891199
> 
> 赞同：2
> 
> 时间：2013-04-09T00:12:42.170
> 
> 标签：python, function, return, return-value

```
def getMove(win,playerX,playerY):

    #Define variables.
    movePos = 75
    moveNeg = -75
    running = 1

    #Run while loop constantly to update mouse's coordinates.
    while(running):

        mouseCoord = win.getMouse()
        mouseX = mouseCoord.getX()
        mouseY = mouseCoord.getY()
        print "Mouse X = ", mouseX
        print "Mouse Y = ", mouseY

        if mouseX >= playerX:
            playerX = movePos + playerX
            running = 0
        elif mouseX <= playerX:
            playerX = moveNeg + playerX           
            running = 0
        elif mouseY >= playerY:
            playerY = movePos + playerY            
            running = 0
        elif mouseY <= playerY:
            playerY = moveNeg + playerY            
            running = 0
    return playerX,playerY

def main():

    #Create game window.
    win = GraphWin("Python Game", 500, 500)
    drawBoard(win)

    #Define variables.
    playerX = 75
    playerY = 125
    keyX = 325
    keyY = 375
    running = 1

    #Create Key and Player objects, draw the key, but don't draw the player yet.
    key = Text(Point(keyX,keyY),"KEY")
    key.draw(win)

    while(running):
        print "player X = ", playerX
        print "Player Y = ", playerY
        drawBoard(win)
        getMove(win,playerX,playerY)
        player = Circle(Point(playerX,playerY),22)
        player.setFill('yellow')
        player.draw(win)
main() 
```

我正在使用图形库来创建游戏。我的播放器和钥匙被绘制在正确的位置。但是，当调用 getMove 函数时，我的 playerX 和 playerY 没有更新。我添加了调试打印语句以在运行游戏时找到它们的值，它始终是 75 和 125。求助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T00:16:07.937

在 python 中，整数是不可变的——当你为一个变量分配一个新的整数值时，你只是让变量指向一个新的整数，而不是改变它指向的旧整数的值。

（python 中可变对象的一个​​示例是列表，您可以对其进行修改，并且指向该列表的所有变量都会注意到更改 - 因为 LIST 已更改。）

同样，当您将变量传递给 python 中的方法，然后更改该变量在该方法中指向的内容时，您不会更改该变量指向该方法之外的内容，因为它是一个新变量。

为了解决这个问题，将返回的 playerX,playerY 分配给方法外的变量：

`playerX, playerY = getMove(win,playerX,playerY)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T00:15:51.547

当您调用 getMove() 时，您应该明确地重新分配这些变量：

```
playerX, playerY = getMove(win, playerX, playerY) 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T01:21:05.670

如前所述，解决方案是您没有使用返回的值来更新您的值，`playerX, playerY`这可以通过上述方法修复

```
playerX, playerY = getMove(win,playerX,playerY) 
```

我要解决的是您`if`陈述中的逻辑。您构建`if`语句的方式将导致仅更新 X 或 Y，而不是两者。例如，如果`mouseX, mouseY`两者都大于`playerX, playerY`相应，您将到达`if`语句的第一行，它将被评估为`True`并相应地更新`playerX`，但是因为第一个语句已经执行，其他`elif`语句都不会执行，导致你只更新`playerX`变量。

您要做的是将`if`语句拆分为两个单独的语句（一个用于 X，一个用于 Y），以便 X、Y 的调整彼此独立。类似的东西

```
 if mouseX >= playerX:
        playerX = movePos + playerX
        running = 0
    elif mouseX <= playerX:
        playerX = moveNeg + playerX           
        running = 0

    #By having the second if, it allows you to check Y even if X has changed
    if mouseY >= playerY:
        playerY = movePos + playerY            
        running = 0
    elif mouseY <= playerY:
        playerY = moveNeg + playerY            
        running = 0 
```

# java - 当只有类型很重要时，在 JPA 中保留一个成员变量

> ID：15891205
> 
> 赞同：0
> 
> 时间：2013-04-09T00:14:13.813
> 
> 标签：java, jpa, serialization, jpa-2.0

**问题：**当只有类型很重要时如何存储字段。

**描述：**我简化了问题描述以突出问题。该类`Dragon`有一个行为，`Roar`，它被存储为一个成员变量。A`Roar`通常没有状态，也不需要保存。但是，`Dragon`需要知道`Roar`它在重新创建时具有什么特定类型。

```
@Entity
public class Dragon implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    private double height;
    private Roar roar;

    public String roar() {
        return roar.roar();
    }
}

public interface Roar {
    String roar();
}

public class QuietRoar implements Roar {
    public String roar() {
        return "grr.."; // In real scenario, lots of logic occurs here. 
}

public class LoudRoar implements Roar {
    public String roar() {
        return "AHHHGRRRR";  // More logic here.
} 
```

**可能的解决方案：** 使`roar`字段瞬态并存储一个额外的类型字段，该字段`Class`包含该`roar`字段的类类型。然后`Dragon`类变成：

```
@Entity
public class Dragon implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    private double height;
    @Transient
    private Roar roar;
    private Class<? extends Roar> roarType; 

    public void setRoar(Roar roar) {
        this.roar = roar;
        roarType = roar.getClass();
    }

    public String roar() {
        if(roar == null) {
            try {
                roar = roarType.newInstance();
            } catch (InstantiationException | IllegalAccessException ex ) {
                // oo ohh..
            }
        }
        return roar.roar();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:46:26.680

如果您使用的是 EclipseLink，则可以为此使用转换器。

[http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_converter.htm#CHDEHJEB](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_converter.htm#CHDEHJEB)

具体来说，您可以使用 ClassInstanceConverter 将类的名称存储在列中。

JPA 2.1 还将定义一个 Converter 概念。

# java - JOptionPane 窗口中没有文本区域

> ID：15891207
> 
> 赞同：0
> 
> 时间：2013-04-09T00:14:31.507
> 
> 标签：java, swing, jscrollpane, jtextarea, joptionpane

是否有一个没有文本区域但只有滚动条的 JOptionPane 窗口，

```
JTextArea listBox = new JTextArea(aLineFromFile);
    JScrollPane scroll = new JScrollPane(listBox);  
    listBox.setLineWrap(true);  
    listBox.setWrapStyleWord(true); 
    scroll.setPreferredSize(new Dimension(200, 400));
    JOptionPane.showMessageDialog(null, scroll, "Dictionary enteries", JOptionPane.PLAIN_MESSAGE); 
```

我不想要文本后面的白色背景，我只想要滚动条。或者无论如何使文本区域中的文本不可编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T00:18:07.513

“或者无论如何使文本区域中的文本不可编辑。”...

尝试：

`listBox.setEditable(false);`

此外，使用 JLabel 而不是 JTextArea 可能会更好。

# php - 在多维数组中查找值和键

> ID：15891209
> 
> 赞同：0
> 
> 时间：2013-04-09T00:14:41.550
> 
> 标签：php, arrays

我有 2 个数组，我需要查找数组 1 中的值之一是否与数组 2（多维数组）中的值之一匹配。我还需要检查数组一中的值是否在数组二中的特定键中，作为“权限”键的“主”键也可能包含该值。

这是数组一：

```
Array
(
    [0] => 17
    [1] => 6
    [2] => 3
    [3] => 2
) 
```

和数组二 [实际上为了便于阅读而略微截断]：

```
Array
(
    [modAccessResourceGroup] => Array
        (
            [3] => Array
                (
                    [0] => Array
                        (
                            [principal] => 0
                            [authority] => 9999
                            [policy] => Array
                                (
                                    [load] => 1
                                )

                        )

                    [1] => Array
                        (
                            [principal] => 2
                            [authority] => 10
                            [policy] => Array
                                (
                                    [add_children] => 1
                                    [create] => 1
                                    [copy] => 1
                                    [delete] => 1
                                    [list] => 1
                                    [load] => 1
                                    [move] => 1
                                    [publish] => 1
                                    [remove] => 1
                                    [save] => 1
                                    [steal_lock] => 1
                                    [undelete] => 1
                                    [unpublish] => 1
                                    [view] => 1
                                )

                        )

                    .... truncated ....

                    [13] => Array
                        (
                            [principal] => 16
                            [authority] => 9999
                            [policy] => Array
                                (
                                    [load] => 1
                                )

                        )

                )

            [8] => Array
                (
                    [0] => Array
                        (
                            [principal] => 0
                            [authority] => 9999
                            [policy] => Array
                                (
                                    [load] => 1
                                )

                        )

                    [1] => Array
                        (
                            [principal] => 1
                            [authority] => 9999
                            [policy] => Array
                                (
                                    [add_children] => 1
                                    [create] => 1
                                    [copy] => 1
                                    [delete] => 1
                                    [list] => 1
                                    [load] => 1
                                    [move] => 1
                                    [publish] => 1
                                    [remove] => 1
                                    [save] => 1
                                    [steal_lock] => 1
                                    [undelete] => 1
                                    [unpublish] => 1
                                    [view] => 1
                                )

                        )

                    [2] => Array
                        (
                            [principal] => 22
                            [authority] => 9999
                            [policy] => Array
                                (
                                    [add_children] => 1
                                    [create] => 1
                                    [copy] => 1
                                    [delete] => 1
                                    [list] => 1
                                    [load] => 1
                                    [move] => 1
                                    [publish] => 1
                                    [remove] => 1
                                    [save] => 1
                                    [steal_lock] => 1
                                    [undelete] => 1
                                    [unpublish] => 1
                                    [view] => 1
                                )

                        )

                )

        )

) 
```

我正在使用一系列 foreach(){foreach(){foreach(){}}} 但它看起来非常混乱且效率低下。在解决这个问题时遇到了一些麻烦。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:27:06.207

递归函数应该可以解决问题：

```
$values = array(17, 6, 3, 2, 5);

function find($array, &$values) {
    foreach ($array as $key => $element) {
        if (is_array($element)) {
            find($element, $values);
        }

        elseif ($key == 'principal') {
            foreach ($values as $value) {
                if ($element == $value) {
                    echo 'Found' . PHP_EOL;
                    // Do stuff
                }
            }
        }
    }
}

find($array, $values); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T00:32:02.560

有几件事浮现在脑海。首先，在这种情况下，我通常会创建一个仅包含主要值的单独数组，以便我可以遍历第一个数组并使用简单的`in_array()`检查。其次，如果您不想这样做，您可以使用[array_walk_recursive()](http://www.php.net/manual/en/function.array-walk-recursive.php)函数或[array_search()](http://www.php.net/manual/en/function.array-search.php)中的一些递归示例来遍历第二个数组。

# php - MYSQL 查询到 Codeigniter 查询

> ID：15891213
> 
> 赞同：0
> 
> 时间：2013-04-09T00:15:02.867
> 
> 标签：php, mysql, codeigniter

`m.id`当我在 phpMyAdmin 中使用它时，我有下面的查询可以正常工作，当我有etc时，我有点不确定如何在 CI 框架中执行它。

**询问：**

```
SELECT DISTINCT m.name, m.id, c.id, c.name
FROM  `default_ps_products` p
INNER JOIN  `default_ps_products_manufacturers` m ON p.manufacturer_id = m.id
INNER JOIN  `default_ps_product_x_cats` x ON p.id = x.product_id
INNER JOIN  `default_ps_products_categories` c ON x.category_id = c.id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T00:35:09.820

有很多方法。

示例 1：

```
$result = $this->db
    ->select('m.name, m.id, c.id, c.name')
    ->distinct()
    ->join('default_ps_products_manufacturers m', 'p.manufacturer_id=m.id')
    ->join('default_ps_product_x_cats x', 'p.id=x.product_id')
    ->join('default_ps_products_categories c', 'x.category_id=c.id')
    ->get('default_ps_products p')
    ->result();

echo $this->db->last_query(); 
```

有时活动记录不能产生您想要的查询。所以你可以自己写。

示例 2：

```
$query = "SELECT DISTINCT m.name, m.id, c.id, c.name
           FROM  `default_ps_products` p
           INNER JOIN  `default_ps_products_manufacturers` m ON p.manufacturer_id = m.id
           INNER JOIN  `default_ps_product_x_cats` x ON p.id = x.product_id
           INNER JOIN  `default_ps_products_categories` c ON x.category_id = c.id";

$result = $this->db
    ->query($query)
    ->result();

echo $this->db->last_query(); 
```

在第二个示例中，db::query() 可以将数组作为第二个参数，它将 $query 中的任何问号 (?) 替换为相应的值。例如，假设您需要在查询中添加一些 where 值。

示例 3：

```
$query = "SELECT DISTINCT m.name, m.id, c.id, c.name
          FROM  `default_ps_products` p
          INNER JOIN  `default_ps_products_manufacturers` m ON p.manufacturer_id = m.id
          INNER JOIN  `default_ps_product_x_cats` x ON p.id = x.product_id
          INNER JOIN  `default_ps_products_categories` c ON x.category_id = c.id
          WHERE c.id=?";

$result = $this->db
    ->query($query, array(1))
    ->result();

echo $this->db->last_query(); 
```

# php - 在一个文件中混合 PHP 函数和类？

> ID：15891215
> 
> 赞同：1
> 
> 时间：2013-04-09T00:15:24.230
> 
> 标签：php, coding-style

是否有任何强有力的技术理由不在一个 PHP 文件中组合一系列函数和类？或者将多个类合并到一个文件中？

我通常将每个类放在自己的文件中，以保持“干净”。如果我需要非 OOP，那么也许我会将相关功能分组到一个文件中。但是，我见过所有内容都堆放在一个文件中的代码。除了没有组织起来，这种做法还有其他危险吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T00:23:21.023

不这样做的唯一技术原因是支持[PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)（自动加载）。

这强制*每个文件*标准一个类。这不适用于全局的、用户定义的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:31:48.117

分离类被认为是一种好的做法，如果您打算使用任何 PSR 标准，就会强制执行。

没有技术上的理由不这样做，但是如果事情是模块化和有组织的，你可能会发现你的代码更容易维护。

有时我需要将一堆类放在同一个文件中，通常是当我需要为 SOAP 服务或例外声明接口时，无论如何，它仍然是“有组织的”，因为这些 3 行代码类最好聚集在一个文件中文件然后分散在你的代码库中。

对于函数，出于相同的原因，您应该将它们全部声明在一个文件中，但如果您有一堆（50 多个），请考虑以任何方式将它们分组到不同的文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T21:08:52.797

危险在于您可能使您的代码库更难维护、组织和保持版本控制。

我看到人们试图将每个类强制放入一个文件的唯一原因是他们使用了诸如 notepad++ 之类的东西进行开发，这使得打开文件和在类/函数之间跳转非常慢。

开发中的文件很像函数/类，例如，您制作的文件越小越有条理，维护就越容易。

# javascript - jQuery 航点插件

> ID：15891218
> 
> 赞同：0
> 
> 时间：2013-04-09T00:15:49.170
> 
> 标签：javascript, jquery, css, plugins

你好吗？当我向下滚动页面时，我将航点插件用于粘性元素。

但是，我希望在页面的某个位置删除粘性，比如说从它的起始滚动点 30px，然后当用户向上滚动页面时，粘性元素将其带回并返回到其原始起点：

JavaScript：

```
$(function() {

    // Do our DOM lookups beforehand
    var nav_container = $(".nav-container");
    var nav = $("nav");

    nav_container.waypoint({
        handler: function(event, direction) {
            nav.toggleClass('sticky', direction=='down');

            if (direction == 'down') nav_container.css({ 'height':nav.outerHeight() });
            else nav_container.css({ 'height':'auto' });
        },
        offset: 15
    });

}); 
```

我在网上找到的另一个例子是 [http://webdesigntutsplus.s3.amazonaws.com/tuts/313_waypoints/demo/index.html](http://webdesigntutsplus.s3.amazonaws.com/tuts/313_waypoints/demo/index.html)

假设我希望粘性导航在我向下滚动时在第一章被丢弃，然后当我向上滚动时它会被拾起并带到起点。

另外： http: [//imakewebthings.com/jquery-waypoints/#doc-disable](http://imakewebthings.com/jquery-waypoints/#doc-disable) 我试图使用它但没有成功。谢谢

小提琴的任何方向都会有所帮助！

# ruby - Nokogiri 的 XML 命名空间问题

> ID：15891224
> 
> 赞同：3
> 
> 时间：2013-04-09T00:16:30.737
> 
> 标签：ruby, nokogiri

我有以下 XML：

```
<body>
  <hello xmlns='http://...'>
     <world>yes</world>
  </hello>
</body> 
```

当我将它加载到 Nokogiri XML 文档中并调用`document.at_css "world"`时，我会收到`nil`回复。但是当我删除 的命名空间时`hello`，它工作得很好。我知道我可以调用`document.remove_namespaces!`，但为什么它不适用于命名空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:40:35.290

因为 Nokogiri 要求您注册要在其中查询的 XML 命名空间（阅读有关[XML 命名空间](http://en.wikipedia.org/wiki/XML_namespace)的更多信息）。但是，如果您在调用时指定其命名空间，您应该仍然能够查询该元素`at_css`。要查看确切的用法，请查看[`css`方法文档](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-css)。它最终应该看起来像这样：

```
document.at_css "world", 'namespace_name' => 'namespace URI' 
```

# methods - 图片控制器中的未定义方法

> ID：15891226
> 
> 赞同：1
> 
> 时间：2013-04-09T00:16:47.800
> 
> 标签：methods, controller, routes, undefined

警告，我是新手，正在尝试自己学习 RoR。一直在做教程等，现在尝试通过经验学习。长话短说，我正在尝试从他们定义的 url 中附加一张用户图片，如果他们不提供默认图片，则使用默认图片。遇到了各种各样的错误，我想经过几个小时的努力想通了，我现在把它归结为一个主要问题（因为我是新手）。所以现在我得到的错误是：

```
NoMethodError in GravsController#update
undefined method `update_attributes' for nil:NilClass 
```

我知道这意味着我需要执行以下操作：

```
@something = Model.new/build(params[:method]) 
```

但我不知道在我的控制器中在哪里定义它（我猜是 gravs_controller 对吗？）所以这是我的代码，把它拆开看看你能不能帮我让这个图像功能工作，拜托:)

```
class GravsController < ApplicationController
before_filter :signed_in_user 
```

**gravs_controller**

```
def create
    @graver = current_user.gravs.new(params[:content])
    @grav_bool = false
        if @graver.save
            @grav_bool = true
            @grav_bool.save
            flash[:success] = "User Picture Saved!"
            redirect_to faq_path
        else
            @grav_bool = false
            @grav_bool.save
            redirect_to faq_path
        end
end

def update

    if @graver.update_attributes(params[:content])
        @grav_bool = true
        @grav_bool.save
        flash[:success] = "User Picture Saved!"
        redirect_to faq_path
    else
        @grav_bool = false
        @grav_bool.save
        redirect_to faq_path
    end
  end
end 
```

**users_controller**

```
class UsersController < ApplicationController

before_filter :signed_in_user, only: [:index, :edit, :update, :destroy, :gravs]
before_filter :correct_user, only: [:edit, :update, :gravs]
before_filter :admin_user, only: :destroy

def index
    @users = User.paginate(page: params[:page])
end

def show
    @user = User.find(params[:id])
    @microposts = @user.microposts.paginate(page: params[:page])
end

def new
@user = User.new
end

def create
    @user = User.new(params[:user])
    if @user.save
        sign_in @user
        flash[:success] = "Welcome to Inception!"
        redirect_to gravs_path
    else
        render 'new'
    end
end

def edit
end

def update
    if @user.update_attributes(params[:user])
        sign_in @user
        flash[:success] = "Profile updated"
        redirect_to gravsid_path
    else
        render 'edit'
    end
end

    def destroy
        User.find(params[:id]).destroy
        flash[:success] = "User deleted"
        redirect_to users_path
    end

private

def correct_user
    @user = User.find(params[:id])
    redirect_to (root_path), error: "Cannot edit others information!" unless current_user?(@user)
end

def admin_user
    redirect_to(root_path) unless current_user.admin?
end
end 
```

**create.html.erb（在 /views/gravs/ 内）**

```
<% provide(:title, "Edit Picture") %>
<div class="barney">
    <div class="trouble">
<h1>Update Your Picture</h1>

    <%= gravs_display @graver %>
        <%= form_for(:grav) do |f| %>
            <div class="field">
            <%= f.text_field :content, placeholder: "Enter Picture URL" %>
            </div>
            <%= f.submit "Update User Image", class: "btn btn-small btn-primary" %>
        <% end %>
    </div>
</div> 
```

**update.html.erb（在 /views/gravs/ 内）**

```
<% provide(:title, "Edit Picture") %>
<div class="barney">
    <div class="trouble">
        <div class="row">
            <div class="span6 offset3">
                <h1>Update Your Picture</h1>

                <%= gravs_display @graver %>

                <%= form_for(:gravs) do |f| %>
                    <div class="field">
                        <%= f.text_field :content, placeholder: "Update Picture URL" %>
                    </div>
                    <%= f.submit "Update User Image", class: "btn btn-small btn-primary" %>
                <% end %>
            </div>
        </div>
    </div>
</div> 
```

** datenumber_create_gravs.rb**

```
class CreateGravs < ActiveRecord::Migration
def change
create_table :gravs do |t|
  t.string :content
  t.integer :user_id
end
end
end 
```

**架构.rb**

```
ActiveRecord::Schema.define(:version => 20130407202835) do

create_table "gravs", :force => true do |t|
  t.string  "content"
  t.integer "user_id"
end

create_table "microposts", :force => true do |t|
  t.string   "content"
  t.integer  "user_id"
  t.datetime "created_at", :null => false
  t.datetime "updated_at", :null => false
end

add_index "microposts", ["user_id", "created_at"], :name => "index_microposts_on_user_id_and_created_at"

create_table "users", :force => true do |t|
  t.string   "name"
  t.string   "email"
  t.datetime "created_at",                         :null => false
  t.datetime "updated_at",                         :null => false
  t.string   "password_digest"
  t.string   "remember_token"
  t.boolean  "admin",           :default => false
end

add_index "users", ["email"], :name => "index_users_on_email", :unique => true
add_index "users", ["remember_token"], :name => "index_users_on_remember_token"

end 
```

**路线.rb**

```
MydeaSample::Application.routes.draw do
resources :users
resources :sessions, only: [:new, :create, :destroy]
resources :microposts, only: [:create, :destroy]

root to: "static_pages#home"
match '/help', to: 'static_pages#help'
match '/about', to: 'static_pages#about'
match '/contact', to: 'static_pages#contact'
match '/signup', to: 'users#new'
match '/signin', to: 'sessions#new'
match '/signout', to: 'sessions#destroy', via: :delete
match '/message', to: 'static_pages#message'
match '/faq', to: 'static_pages#faq'
match '/gravs', to: 'gravs#create'
match '/gravsid', to: 'gravs#update' 
```

# python - PySide One 插槽到多个小部件

> ID：15891228
> 
> 赞同：0
> 
> 时间：2013-04-09T00:17:21.020
> 
> 标签：python, pyqt, pyside

我正在使用 PySide 在 python 中创建一个小应用程序。我从文本文件中读取行并在单独的 QLineEdit 小部件中显示每一行。每个“条目”有 2 行编辑和 2 个 QPushButtons。对于每一行，我都会添加这些小部件。我的问题是我为 QPushButtons 设置了一个信号槽，但是当生成所有“条目”时，只有最后一个条目 QPushButtons 连接到该槽。可能有人请帮助我。

这是我的代码

```
class ItemLogger(QtGui.QMainWindow, Ui.Ui_MainWindow):
def __init__(self, parent = None):
    super(ItemLogger, self).__init__(parent)
    self.setupUi(self)

    self.parseBossItem()
    self.comboBox.currentIndexChanged.connect(self.parseBossItem)
    self.increase.clicked.connect(self.add_subtract)

def add_subtract(self):
    initial = 1
    print "kajskasdjflsdkjflk"

def addRow(self, item):
    self.frame  = QtGui.QFrame()
    self.layout = QtGui.QHBoxLayout()

    self.itemName   = QtGui.QLineEdit(item)
    self.itemName.setReadOnly(True)

    self.itemCount  = QtGui.QLineEdit()
    self.itemCount.setText("0")
    self.itemCount.setMaximumWidth(40)

    self.decrease   = QtGui.QPushButton("-")
    self.increase   = QtGui.QPushButton("+")

    self.layout.addWidget(self.itemName)
    self.layout.addWidget(self.itemCount)
    self.layout.addWidget(self.decrease)
    self.layout.addWidget(self.increase)

    self.frame.setLayout(self.layout)

    self.verticalLayout_3.addWidget(self.frame)

def parseBossItem(self):
    if self.comboBox.currentText() == "Item_1":
        item_list = open("BossItems/Random_Item")
        for line in item_list.readlines():
            self.addRow(line)

    if self.comboBox.currentText() == "Item_2":
        item_list = open("BossItems/Random_Item_2")
        for line in item_list.readlines():
            self.addRow(line) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:32:18.443

这是因为您只连接了最后一个条目。

这是您实际在做的事情：

1.  您为项目 1 添加行，并将按钮小部件分配给`self.decrease`, `self.increase`。
2.  您为项目 2 添加行`self.decrease`，`self.increase`用新创建的小部件替换 的值。
3.  您 connect `self.increase`，它现在是最后添加的小部件。

如果您在创建小部件后不需要访问它们，您应该考虑使用局部变量（例如不带`self`）并在函数内部连接信号`addRow`。

如果您需要跟踪小部件引用，则可以将它们添加到数组中：

```
# Somewhere in __init__ or in parseBossItem
self.increase = []

# in addRow
self.increase.append(QtGui.QPushButton("+"))
self.layout.addWidget(self.increase[-1])
self.increase[-1].clicked.connect(self.add_subtract)
# and so on... 
```

* * *

要从不同的发送者使用相同的插槽，您需要识别谁发送了信号。你可以这样做：

```
def onIncrease(self):
    button = self.sender()
    if isinstance(button, QtGui.QPushButton):
        buttonName = button.text()
        if buttonName == 'name of button 1':
            self.itemCount[0].setText(str(int(self.itemCount[0])+1))
        elif buttonName == 'name of button 2':
            ... 
```

当然，这是假设您将每个 QLineEdit 放入数组中`self.itemCount`。

* * *

由于您所有的按钮都具有相同的名称，因此我们需要使用另一种方法。

```
# in addRow
self.increase.clicked.connect(lambda: self.onIncrease(itemCount))

def onIncrease(self, edit):
    edit.setText(str(int(edit.text()+1)) 
```

# javascript - 点击javascript中的链接

> ID：15891230
> 
> 赞同：0
> 
> 时间：2013-04-09T00:17:30.300
> 
> 标签：javascript, javascript-events

我的所有页面上都有一个锚标记。

```
<a id='signout' href='//somelocation'>SignOut</a> 
```

我有一个可用于所有页面的 javascript 文件。有一个函数被调用并附加到我试图单击链接的 'click' 、 'touch' 和 'key press' 处理程序。就像是

```
document.addEventListener('click' function(e){
   var signoff = document.getElementById('signout');
   location = signoff.href;  
} 
```

每当有点击事件但不起作用时，这应该只是点击锚标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:23:19.577

一些语法更正使它对我有用：

```
document.addEventListener('click', function(e) {
   var signoff = document.getElementById('signout');
   location = signoff.href;
}); 
```

[http://jsfiddle.net/jjGeJ/](http://jsfiddle.net/jjGeJ/)

# c++ - 为什么我的代码不起作用？

> ID：15891231
> 
> 赞同：1
> 
> 时间：2013-04-09T00:17:32.830
> 
> 标签：c++

我正在为有向图实现一个简单的 DFS 遍历：

```
#include <iostream>
#include <vector>
#include <climits>
#include <utility>
#include <deque>
#include <queue>
#include <algorithm>
#include <iomanip>
#include <list>

using namespace std;

enum class color_type {
    BLACK,
    WHITE,
    GRAY
};

struct vertex {
    char label;
    color_type color;
    int start;
    int finish;
    vertex *parent;
    vector<vertex> adjacents;

    vertex(char label)
        :label(label), start(0), finish(0), color(color_type::WHITE) {
    }

    void add_neighbor(const vertex &v) {
        adjacents.push_back(v);
    }
};

class digraph {
private:
    vector<vertex> vertices;    
    int count;

public:
    digraph() 
        :count(0) {
        vertex a('a');
        vertex b('b');
        vertex c('c');
        add_edge(a, b);
        add_edge(b, c);
        add_edge(c, a);
        vertices.push_back(a);
        vertices.push_back(b);
        vertices.push_back(c);
        for (int i = 0; i < vertices.size(); ++i) {
            vertices[i].color = color_type::WHITE;
            vertices[i].parent = NULL;
        }
    }

    void add_edge(vertex &u, vertex &v) {
        u.add_neighbor(v);
    }

    void dfs() {
        dfs_visit(vertices[0]);
    }

    void dfs_visit(vertex &u) {
        count++;
        u.start = count;
        u.color = color_type::GRAY;
        cout << "??? visit = " << u.label << endl;
        cout << "# neighbors: " << u.adjacents.size() << '\n';
        for (int i = 0; i < u.adjacents.size(); ++i) {
            if (u.adjacents[i].color == color_type::WHITE) {
                cout << "visit neighbor of [" << u.label << "] is: " << u.adjacents[i].label << endl;
                u.adjacents[i].parent = &u;
                dfs_visit(u.adjacents[i]);
            } 
        }
        u.color = color_type::BLACK;
        count++;
        u.finish = count;
    }

public:
    friend ostream& operator <<(ostream& o, const digraph &dg) {
        for (int i = 0; i < dg.vertices.size(); ++i) {
            o << dg.vertices[i].label << ":\n";
            o << "\t start  = " << dg.vertices[i].start << endl;
            o << "\t finish = " << dg.vertices[i].finish << endl;
        }
        return o;
    }
};

int main() {
    digraph dg;
    dg.dfs();
    cout << dg << endl;
    return 0;
} 
```

问题是`dfs_visit()`访问第二个顶点后停止调用。我通过引用传递一个顶点`u`作为`dfs_visit()`函数的参数，但不知何故，顶点的邻居数`b`突然变得`0`非常奇怪。
在我看来，存储在向量`vertices`中的顶点与传递给的顶点不同`dfs_visit`，但我真的不明白这是怎么回事。我使用 Java 已经有一段时间了，现在我对 C++ 真的很生疏了。那么有人可以就这个问题向我解释一下吗？

**编辑** ![在此处输入图像描述](https://i.stack.imgur.com/Q2Awu.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:56:07.780

这可能更接近您正在寻找的内容，使用邻居指针。希望这可以帮助。最终的区别在于主顶点容器内的邻居的逐指针寻址，而不是在您的代码中制作的所有副本。

注意：添加构造只是设置一个节点以将顶点集合中的“下一个”节点作为其邻居，最后一个节点获得邻居的第一个节点。这似乎是你的代码试图完成的。

```
#include <iostream>
#include <vector>
#include <climits>
#include <utility>
#include <deque>
#include <queue>
#include <algorithm>
#include <iomanip>
#include <list>

using namespace std;

enum class color_type {
    BLACK,
    WHITE,
    GRAY
};

struct vertex {
    char label;
    color_type color;
    int start;
    int finish;
    vertex *parent;
    vector<vertex*> adjacents;

    vertex(char label)
    :label(label), start(0), finish(0), color(color_type::WHITE) {
    }

    void add_neighbor(vertex &v) {
        adjacents.push_back(std::addressof(v));
    }
};

class digraph {
private:
    vector<vertex> vertices;
    int count;

public:
    digraph()
    :count(0) {
        vertices.push_back(vertex('a'));
        vertices.push_back(vertex('b'));
        vertices.push_back(vertex('c'));
        for (size_t i=0; i<vertices.size(); ++i)
        {
            vertices[i].color = color_type::WHITE;
            vertices[i].parent = NULL;
            vertices[i].add_neighbor(vertices[(i+1)%vertices.size()]);
        }
    }

    void dfs() {
        dfs_visit(vertices[0]);
    }

    void dfs_visit(vertex &u) {
        count++;
        u.start = count;
        u.color = color_type::GRAY;
        cout << "??? visit = " << u.label << endl;
        cout << "# neighbors: " << u.adjacents.size() << '\n';
        for (int i = 0; i < u.adjacents.size(); ++i) {
            if (u.adjacents[i]->color == color_type::WHITE) {
                cout << "visit neighbor of [" << u.label << "] is: " << u.adjacents[i]->label << endl;
                u.adjacents[i]->parent = &u;
                dfs_visit(*(u.adjacents[i]));
            }
        }
        u.color = color_type::BLACK;
        count++;
        u.finish = count;
    }

public:
    friend ostream& operator <<(ostream& o, const digraph &dg) {
        for (int i = 0; i < dg.vertices.size(); ++i) {
            o << dg.vertices[i].label << ":\n";
            o << "\t start  = " << dg.vertices[i].start << endl;
            o << "\t finish = " << dg.vertices[i].finish << endl;
        }
        return o;
    }
};

int main() {
    digraph dg;
    dg.dfs();
    cout << dg << endl;
    return 0;
} 
```

**输出**

```
??? visit = a
# neighbors: 1
visit neighbor of [a] is: b
??? visit = b
# neighbors: 1
visit neighbor of [b] is: c
??? visit = c
# neighbors: 1
a:
     start  = 1
     finish = 6
b:
     start  = 2
     finish = 5
c:
     start  = 3
     finish = 4 
```

# macos - 写入存档应用程序中的派生数据

> ID：15891233
> 
> 赞同：0
> 
> 时间：2013-04-09T00:17:42.900
> 
> 标签：macos, cocoa

我在我的应用程序中生成了一个 .aiff 文件，它位于我的派生数据文件夹中，位于 /Library 的深处。当我在 Xcode 中运行应用程序时，一切正常。但是，当我将其存档时，程序在尝试写入时会崩溃。我该如何解决这个问题？我需要学习使用 Core Data 还是有一个简单的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T02:41:44.813

您是否尝试写入当前工作目录？

（如果你想做类似的事情`[foo writeToFile:@"output.aiff" …]`，你就是。）

当您在 Xcode 中运行时，CWD 是在 DerivedData 中创建应用程序包的构建产品目录。

当您在 Xcode 之外运行时，CWD 是启动磁盘的根目录，您通常没有写入权限，并且在没有明确的命令和用户许可（通过打开面板或类似的方式）的情况下，您不应该触摸它。

无论哪种方式，CWD 都是放置东西的错误位置。

您可能应该[运行一个保存面板](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSSavePanel_Class/Reference/Reference.html#//apple_ref/occ/instm/NSSavePanel/beginSheetModalForWindow%3acompletionHandler%3a)，然后将完成处理程序中的文件写入[保存面板为您提供的 URL](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSSavePanel_Class/Reference/Reference.html#//apple_ref/occ/instm/NSSavePanel/URL)。

如果您想将文件存储在某个常量目录中，[请向 NSFileManager 询问](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/URLForDirectory%3ainDomain%3aappropriateForURL%3acreate%3aerror%3a)[用户域](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/c/tdef/NSSearchPathDomainMask)（~/Library/Caches）中的[Caches 文件夹](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/doc/c_ref/NSSearchPathDirectory)，然后告诉它在该文件夹中创建一个文件夹，其名称为您的 main bundle's ，然后写入该目录中的文件。`bundleIdentifier`

# php - 在dreamhost中安装imagick php模块

> ID：15891244
> 
> 赞同：2
> 
> 时间：2013-04-09T00:18:59.960
> 
> 标签：php, imagick, dreamhost

我正在尝试在 Dreamhost 的 VPS 中安装 imagick，当我在 imagick-3.0.1 文件夹中键入“phpize”时，我得到以下信息：

```
Configuring for:
PHP Api Version:         20041225
Zend Module Api No:      20060613
Zend Extension Api No:   220060519
configure.in:3: warning: prefer named diversions
configure.in:3: warning: prefer named diversions 
```

我正在关注本教程：[http ://wiki.dreamhost.com/ImageMagick_and_imagick_php_module_on_shared_hosting#Configure_PHP_to_use_this_extension](http://wiki.dreamhost.com/ImageMagick_and_imagick_php_module_on_shared_hosting#Configure_PHP_to_use_this_extension)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:41:03.893

问题是配置脚本在这个目录中寻找 MagickWand.h 文件：

/home/bylifeweb/local/include/ImageMagick/wand/MagickWand.h

但文件实际上在这个目录中

/home/bylifeweb/local/include/ImageMagick-6/wand/MagickWand.h

为了解决这个问题，我只是创建了一个从 ImageMagick 到 ImageMagick-6 的符号链接并再次运行配置脚本，当时它运行良好，然后我就能够运行 make。

库已安装在：/home/bylifeweb/build/imagick-3.0.1/modules

# javascript - 使用 Marionette CollectionView 为每个项目创建多个视图

> ID：15891247
> 
> 赞同：1
> 
> 时间：2013-04-09T00:19:48.300
> 
> 标签：javascript, backbone.js, marionette

我有一个 Marionette.CollectionView，对于某些项目（模型）需要创建 2 个视图才能在模型上运行，Marionette.CollectionView.buildItemView 可以返回 2 个视图吗？

**编辑**：

我不想创建另一个 WrapperItemView，我现在已经有一些解决方案正在运行，但我想让它更标准。

我希望我的代码看起来像这样，有没有一种简单的方法可以让它工作？

```
 buildItemView: function(item){
    // create 2 views based on item type 
    return [view1, view2];
  },
  appendHtml: function(collectionView, itemView, index){
    if (itemView.type === "X" ) 
        collectionView.$el.find(".A").append(itemView.el);
    if (itemView.type === "Y" ) 
        collectionView.$el.find(".B").append(itemView.el);
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T00:33:38.823

为什么你的 itemview 不作为第二个视图的父亲，你可以在项目视图的初始化函数中创建第二个视图。

**编辑**

这次我仍然会创建一个 perent 视图，我会将它设为您的 2 个视图的父级，您的集合将创建父级，而父级将在其中创建两个视图。

这种方式对我来说更自然。

# java - 创建一个多彩多姿的板

> ID：15891250
> 
> 赞同：0
> 
> 时间：2013-04-09T00:19:54.667
> 
> 标签：java, grid

我要创建一个彩色板，从第一个黑色方块开始，然后是蓝色、红色和黄色，这些方块是对角线填充的，没有空的彩色方块。我知道我的算法是错误的，但我不知道如何修复它。目前，我的代码打印出来是这样的

```
import javax.swing.JFrame;
import javax.swing.JPanel;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Insets;

public class Grid extends JPanel {
private static final long serialVersionUID = 1L;
public static final int GRID_COUNT = 8;
private Color[] colors = { Color.black, Color.yellow, Color.red,
        Color.blue };
private int colorIndex = 0;

public void paintComponent(Graphics g) {
    super.paintComponent(g);
    Graphics2D graphics = (Graphics2D) g;
    graphics.setColor(Color.black);

    Dimension size = getSize();
    Insets insets = getInsets();
    int w = size.width - insets.left - insets.right;
    int h = size.height - insets.top - insets.bottom;

    int sqrWidth = (int)((double)w / GRID_COUNT);
    int sqrHeight = (int)((double)h / GRID_COUNT);
    for (int row = 0; row < GRID_COUNT; row++) {
        for (int col = 0; col < GRID_COUNT; col++) {
                int x = (int) (row * (double) w / GRID_COUNT);
                int y = (int) (col * (double) h / GRID_COUNT);
                if ((row + col) % 2 == 0) {
                    int colorIndex = (row + col) % 4;
                    graphics.fillRect(x, y, sqrWidth, sqrHeight);
                    graphics.setColor(colors[colorIndex]);
                    colorIndex = (colorIndex + 1) % colors.length;
    }

}

public static void main(String[] args) {
    Grid grid = new Grid();
    grid.setPreferredSize(new Dimension(400, 400));
    JFrame frame = new JFrame("Grid");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.add(grid);
    frame.pack();
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:31:43.187

有两个错误，我看到了，第一个错误是你的图案，你想从黑色开始，“然后是蓝色，红色和黄色”但你做到了

```
 private Color[] colors = { Color.black, Color.yellow, Color.red, Color.blue }; 
```

改变这个

第二个错误是您的程序计数均匀，这意味着它均匀地填充矩形，2、4、6、8.. 使您的程序将继续执行每个灰色的矩形...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T01:05:12.113

让我们看看模式：

```
Bk Gr Pn Bl
Gr Pn Bl Bk
Pn Bl Bk Gr
Bl Bk Gr Pn 
```

但为了简单起见，让我们调用 Bk 0、Gr 1、Pn 2 和 Bl 3 来得到：

```
0 1 2 3
1 2 3 0
2 3 0 1
3 0 1 2 
```

这种模式很容易通过计算`tile[x][y] = (x + y) % 4`每个图块，并使用查找表将这些数字转换为颜色（使用枚举，或者不给图块分配整数值，而是使用整数作为表中的查找颜色并将颜色分配给瓷砖）

如果您以前从未见过，% 4 表示“除以 4 并返回除法的余数”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T01:24:14.110

我已经快速浏览了代码，并且有很多小事情让我感到困惑..

您的颜色计算被抛出，因为您的原始代码每隔一个单元格跳过...

`if ((row + col) % 2 == 0) {`

这意味着当您尝试确定颜色时，您没有得到您期望的颜色。

您还在行循环中而不是在列循环中设置单元格的颜色，这对我来说似乎很奇怪......

![在此处输入图像描述](https://i.stack.imgur.com/Gosm0.png)

（我添加了文本以进行调试，请随意摆脱它）

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Insets;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class Grid {

    private static final long serialVersionUID = 1L;
    public static final int GRID_COUNT = 8;
    private Color[] colors = {Color.black, Color.yellow, Color.red,
        Color.blue};

    public static void main(String[] args) {
        new Grid();
    }

    public Grid() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Grid");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new GridPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

            }
        });
    }

    public class GridPane extends JPanel {

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D graphics = (Graphics2D) g;
            graphics.setColor(Color.black);

            Dimension size = getSize();
            Insets insets = getInsets();
            int w = size.width - insets.left - insets.right;
            int h = size.height - insets.top - insets.bottom;

            FontMetrics fm = graphics.getFontMetrics();

            int sqrWidth = (int) ((double) w / GRID_COUNT);
            int sqrHeight = (int) ((double) h / GRID_COUNT);
            int colorIndex = 0;
            for (int row = 0; row < GRID_COUNT; row++) {
                for (int col = 0; col < GRID_COUNT; col++) {
                    int x = (int) (col * sqrWidth);
                    int y = (int) (row * sqrHeight);
                    colorIndex = (row + col) % 4;
                    graphics.setColor(colors[colorIndex]);
                    graphics.fillRect(x, y, sqrWidth, sqrHeight);
                    String text = row + "/" + col;
                    graphics.setColor(Color.WHITE);
                    graphics.drawString(
                            text,
                            x + ((sqrWidth - fm.stringWidth(text)) / 2),
                            y + ((sqrHeight - fm.getHeight()) / 2) + fm.getAscent());
                }
            }

        }
    }
} 
```

# facebook - Facebook 帖子数据的隐私字段为空

> ID：15891254
> 
> 赞同：6
> 
> 时间：2013-04-09T00:20:22.770
> 
> 标签：facebook, facebook-graph-api, privacy

我们遇到了一个 Facebook 用户帐户的问题，其中为他的帖子返回的隐私字段始终为空白。我尝试使用我的帐户或测试帐户复制此内容，但在所有情况下都填写了隐私。这是使用图形 api 工具的示例（为简洁起见，删除了一些字段）：

```
{
  "id": "<deleted_for_privacy>", 
  "from": {
    "name": "Joe Blog", 
    "id": "<deleted_for_privacy>"
  }, 
  "story": "Joe Blog added a new photo.", 

  "picture": "<deleted_for_privacy>", 
  "link": "<deleted_for_privacy>", 
  "icon": "<deleted_for_privacy>", 
  "privacy": {
    "value": ""
  }, 
  "type": "photo", 
  "status_type": "added_photos"
}, 
```

根据[隐私文档，该字段](https://developers.facebook.com/docs/reference/api/privacy-parameter/)应始终包含一个值。

我最初的想法是它与正在使用的黑莓应用程序和旧的移动版本设置有关，但从桌面浏览器发布会导致同样的问题。

那么空白设置是什么意思呢？它是公共的、私有的还是错误的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-11T09:52:07.967

> 这是设计使然。您需要页面访问令牌或管理员用户访问令牌来检索此字段。

来源：[https ://developers.facebook.com/bugs/300329193480725/?comment_id=345320875630426](https://developers.facebook.com/bugs/300329193480725/?comment_id=345320875630426)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-02T10:22:56.677

不确定这是您的情况，但如果用户正在向页面、事件、组或其他用户的提要发帖，则隐私字段应为空。

请参阅此处的第一个注释（不是官方的 fb 文档页面，我知道）：

[http://api-portal.anypoint.mulesoft.com/facebook/api/facebook-graph-api/docs/reference/privacy-parameter](http://api-portal.anypoint.mulesoft.com/facebook/api/facebook-graph-api/docs/reference/privacy-parameter)

# javascript - 概念 - 在资源负载上触发事件

> ID：15891256
> 
> 赞同：0
> 
> 时间：2013-04-09T00:20:35.927
> 
> 标签：javascript

有没有这样做的图书馆？

有没有纯代码的方式来做到这一点？

我有我只想在我的库加载后运行的代码。

```
jquery.js -> jqueryui.js. 
```

加载 jqueryui 后，我就有了要执行的应用程序特定代码。我想使用一个事件系统，所以我知道什么时候会发生这种情况。

这是常见的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:23:31.103

如果您以“香草”方式加载库：

```
<script src="path/to/jquery.js"></script>
<script src="path/to/jqueryui.js"></script> 
```

然后放置在这些之后的任何脚本标签将在前面的脚本被加载和解析后执行。

相反，您可以使用诸如[RequireJS](http://requirejs.org/)或[HeadJS 之](http://headjs.com/)类的异步加载器来获得更好的体验，它们提供类似“onload”的回调，您可以在其中执行自己的代码。

# css - IE 8 中的水平菜单消失了

> ID：15891260
> 
> 赞同：1
> 
> 时间：2013-04-09T00:20:50.880
> 
> 标签：css, drop-down-menu, internet-explorer-8

我正在改造镇上避难所的基本场地。我试图给他们一些不错但不浮华或难以让任何人进入和维护的东西。我真的不想为 IE 8 编写代码，但我知道老年人和企业是最后一个更新浏览器的人。无论如何，菜单在 IE 8 中消失了。我可以将鼠标悬停在它上面，然后查看看起来也有问题的子菜单。我不熟悉将`.htc`文件“hack”用于圆角。我真的不想放弃，但我正在最糟糕的时候弄清楚我错过了什么。无奈之下，我`behavior: url(border-radius.htc);`到处乱扔，看看是不是位置问题。

练习网站链接：[http ://www.seenaomi.net/care-corp/pracindex.shtml](http://www.seenaomi.net/care-corp/pracindex.shtml)

我喜欢我最后的结果。希望能够通过 IE8 完成它，任何帮助将不胜感激。

IE 9 中的兼容性视图显示了我在说什么。疯狂。

HTML：

```
 <ul id="coolMenu">

        <li><a href="index.shtml">Home</a></li>
        <li>
            <a href="#">History</a>
            <ul class="noJS">
                <li><a href="facts.shtml">Facts</a></li>
                <li><a href="staff.shtml">Staff</a></li>
            </ul>    
        </li>
        <li>
            <a href="programs.shtml">Programs</a>
            <ul class="noJS">
                <li><a href="gift.shtml">Donate</a></li>
                <li><a href="successstories.shtml">Successes</a></li>
            </ul>
        </li>
        <li>
            <a href="publications.shtml">Events</a>
            <ul class="noJS">
                <li><a href="facility.shtml">Pictures</a></li>
            </ul>    
        </li>
        <li>
            <a href="contact.shtml">Contact</a>
            <ul class="noJS">
                <li><a href="gift.shtml">Donate</a></li>
                <li><a href="Employment.shtml">Career</a></li>
                <li><a href="volunteer.shtml">Volunteer</a></li>
            </ul>    
        </li>
    </ul> 
```

CSS：

```
#coolMenu,
#coolMenu ul {
    list-style: none;
    margin-right: 20px;
}
#coolMenu {
    float: right;
    -moz-border-radius: 15px;
    -webkit-border-radius: 15px;
    border-radius: 15px;
    behavior: url(border-radius.htc);
    border-style: none;
}
#coolMenu > li { float: left }
#coolMenu li a {
    display: block;
    line-height: 2em;
    text-decoration: none;
    padding: 0 2.1em 0 2.1em;
}
#coolMenu ul {
    position: absolute;
    display: none;
    z-index: 999;
}
#coolMenu ul li a { width: 60px }
#coolMenu li:hover ul.noJS { display: block }
/* Main menu
       ------------------------------------------*/
#coolMenu {
    font-family: "Times New Roman", Times, serif;
    font-size: 14px;
    background-color: #5887B1;
    behavior: url(border-radius.htc);
}
#coolMenu > li > a {
    color: #fff;
    font-weight: bold;
}
#coolMenu > li:hover > a {
    background-color: #CCCCCC;
    color: #000000;
    font-style: italic;
    font-weight: bolder;
    -moz-border-radius: 15px;
    -webkit-border-radius: 15px;
    border-radius: 15px;
    behavior: url(border-radius.htc);
    border-style: none;
}
/* Submenu
       ------------------------------------------*/
#coolMenu ul {
    background-color: #CCC;
    -moz-border-radius: 15px;
    -webkit-border-radius: 15px;
    border-radius: 15px;
    behavior: url(border-radius.htc);
    border-style: none;
}
#coolMenu ul li a {
    color: #000;
    font-weight: bold;
    -moz-border-radius: 15px;
    -webkit-border-radius: 15px;
    border-radius: 15px;
    behavior: url(border-radius.htc);
    border-style: none;
}
#coolMenu ul li:hover a {
    font-weight: bolder;
    font-size: 18px;
    font-style: italic;
    -moz-border-radius: 15px;
    -webkit-border-radius: 15px;
    border-radius: 15px;
    behavior: url(border-radius.htc);
    border-style: none;
} 
```

# ajax - 失去第二个字段的焦点时如何通过 f:ajax 验证两个密码字段？

> ID：15891264
> 
> 赞同：4
> 
> 时间：2013-04-09T00:21:07.947
> 
> 标签：ajax, validation, jsf, jsf-2, passwords

我曾经验证两个密码，检查它们是否相同，这样：

```
Password: <h:message id="m_password" for="password" /><br/>
<h:inputSecret id="password" value="#{userC.user.password}" maxlength="15" size="15" required="true">
    <f:validator validatorId="confirmPasswordValidator" />
    <f:attribute name="confirm" value="#{confirmPassword.submittedValue}" />
</h:inputSecret>
<br/>

Password (yes, again): <h:message id="m_confirm_password" for="confirm_password" /><br/>
<h:inputSecret id="confirm_password" binding="#{confirmPassword}" maxlength="15" size="15" required="true">
    <f:ajax event="blur" render="m_password m_confirm_password" />
</h:inputSecret>
<br/> 
```

在验证器中：

```
@FacesValidator("confirmPasswordValidator")
public class ConfirmPasswordValidator implements Validator {

    @Override
    public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException {
        String password = (String) value;
        String confirm = (String) component.getAttributes().get("confirm");

        if (password == null || confirm == null) {
            return; // Just ignore and let required="true" do its job.
        }

        if (!password.equals(confirm)) {
            throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR, null, "passwords don't match"));
        }
    }

} 
```

但是我想在密码的第二个字段失去焦点时进行此验证，这就是我使用该`<f:ajax..>`字段的原因，但这里似乎缺少一些东西。会是什么呢 ？

**更新**

```
<h:form id="change_password_form">
    Password: <h:message id="m_password" for="password" /><br/>
    <h:inputSecret id="password" value="#{userC.user.password}" maxlength="15" size="15" required="true">
        <f:validator validatorId="confirmPasswordValidator" />
        <f:attribute name="confirm" value="#{confirmPassword.submittedValue}" />
    </h:inputSecret>
    <br/>

    Password (yes, again): <h:message id="m_confirm_password" for="confirm_password" /><br/>
    <h:inputSecret id="confirm_password" binding="#{confirmPassword}" maxlength="15" size="15" required="true">
        <f:ajax event="blur" execute="@this password" render="m_password m_confirm_password" />
    </h:inputSecret>
    <br/>

    <h:commandButton id="change_passord" action="#{userC.changePassword}" value="Change Password" />
    <h:messages globalOnly="true" escape="false" />

</h:form> 
```

**更新 2** 有了 BalusC 的建议，一切都很顺利，因为我忘记定义我的`template`：

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">

<ui:composition template="/resources/jsf/include/default.xhtml">
    <ui:define name="content">
        <h:form id="change_password_form">
            Password: <h:message id="m_password" for="password" /><br/>
            <h:inputSecret id="password" value="#{userC.user.password}" maxlength="15" size="15" required="true">
                <f:validator validatorId="confirmPasswordValidator" />
                <f:attribute name="confirm" value="#{confirmPassword.submittedValue}" />
            </h:inputSecret>
            <br/>

            Password(yes, again): <h:message id="m_confirm_password" for="confirm_password" /><br/>
            <h:inputSecret id="confirm_password" binding="#{confirmPassword}" maxlength="15" size="15" required="true">
                <f:ajax event="blur" execute="@this password" render="m_password m_confirm_password" />
            </h:inputSecret>
            <br/>

            <h:commandButton id="change_passord" action="#{userC.changePassword}" value="Change password" />
            <h:messages globalOnly="true" escape="false" />

        </h:form>
    </ui:define>
</ui:composition>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T00:38:12.143

默认情况下`<f:ajax>`仅提交当前组件（如，`execute="@this"`）。如果您还打算提交另一个组件，那么您需要明确指定其客户端 ID：

```
<f:ajax ... execute="@this password" /> 
```

这样，与`password`组件关联的验证器也将被触发。

### 也可以看看：

*   [如何通过ajax验证两个密码字段？](https://stackoverflow.com/questions/7489893/how-validate-two-password-fields-by-ajax/)（一个密切相关的问题，由你自己提出）

* * *

**更新**：根据评论，确保您`<h:head>`在模板中有 a，否则 JSF 将无法自动包含必要的`jsf.js`JavaScript 文件，其中包含负责`<f:ajax>`魔术的代码。

# php - jQuery UI 禁用整个页面上的所有提交按钮

> ID：15891269
> 
> 赞同：0
> 
> 时间：2013-04-09T00:21:44.057
> 
> 标签：php, jquery, html, forms, jquery-ui

感谢您提前提供任何帮助。

请注意我正在使用 jQuery UI 来创建/样式按钮。

当用户单击提交按钮时，我想使用 jQuery 在整个页面上禁用所有表单上的所有提交按钮。

这是我到目前为止所拥有的，目前它只禁用被点击的按钮，当我希望它禁用页面上的所有提交按钮时。

对于 jQuery UI：

```
<script>
$(function() {
$( ".button" )
.button()
});
</script> 
```

对于禁用按钮：

```
 <script>
$(function() {
$('.button').button().click(function() {
    $(this).button('disable');
    $(this).closest('form').submit();
    return false;
});
$('input:submit').button('enable');
});
</script> 
```

提交按钮/表单如下所示：

```
<form enctype="multipart/form-data" action="characters.php" method="post">
<input id="c_xp" class="text" type="text" value="150001" name="c_xp">
<input id="go" class="button ui-button ui-widget ui-state-default ui-corner-all" type="submit" value="Go" role="button" aria-disabled="false">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:25:45.223

做这个 ：

```
<script>
$(function() {
    $('.button').click(function() {
       $("input[type='submit']).button('disable');
       $(this).closest('form').submit();
       return false;
    });
$('input:submit').button('enable');
});
</script> 
```

你可以做任何声明。

```
$("input[type='submit']").button('disable');
OR 
$("input[type='submit']").attr('disabled','disabled'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:25:55.057

此代码将使所有具有`.button`禁用类的按钮

```
$( ".button" ).click(function() {
  $( ".button" ).button({ disabled: true });
}); 
```

这是一个[小提琴](http://jsfiddle.net/trajce/W7PEp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T00:27:09.603

这是一个禁用所有按钮的功能。

```
function disableButtons() {
    $('input[type=button], input[type=submit]').attr('disabled', 'disabled')
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T00:27:45.747

您的代码应如下所示：

```
<script>
$(function() {
$('.button').button()(function() {
    $('input[type=button], input[type=submit]').attr('disabled', 'disabled')
    $(this).closest('form').submit();
    return false;
});
});
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T00:36:29.560

我找到了解决方案，将我们的禁用代码更改为：

```
<script>
$(function() {
$('.button').button().click(function() {
    $('.button').button('disable');
    $(this).closest('form').submit();
    return false;
});
$('input:submit').button('enable');
});
</script> 
```

成功了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-11T12:02:07.970

像这样的东西...

```
$('form').submit(function () {
    $(':submit').attr('disabled', 'disabled');
}); 
```

# regex - sed 路径解析不起作用

> ID：15891274
> 
> 赞同：1
> 
> 时间：2013-04-09T00:22:38.803
> 
> 标签：regex, unix, sed

`pwd | sed "s%^\(/[^/]*/\).*?\(/[^/]+\)$%\1...\2%"`

我不确定为什么这不起作用。在第一个捕获组之后，我尝试了贪婪和非贪婪的明星。我什至没有使用前瞻或任何东西。它适用于正则表达式测试器。我正在尝试获取路径的第一个和最后一个文本部分（在压缩它的同时仍然提供我所在目录的想法）。

这是一个 tmux 提示行，所以我试图避免引入像 perl 这样重量级的东西来完成这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:04:23.623

为什么不使用[参数扩展](http://wiki.bash-hackers.org/syntax/pe)？参数扩展比您拥有的命令、管道和外部命令花费更少*的处理能力：*

```
start="${PWD#/}"; start="${start%%/*}"
end="${PWD/*\//}"
printf '/%s/…/%s $ ' "$start" "$end" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:27:09.307

经过几次尝试，我得到了它：

`pwd | sed "s%^\(/[^/]*/\).*\(/[^/]*\)$%\1...\2%"`

# animation - Three.js morphAnimMesh 动画不更新

> ID：15891277
> 
> 赞同：4
> 
> 时间：2013-04-09T00:23:14.613
> 
> 标签：animation, 3d, three.js, render

最近我花了一些时间研究three.js。我在搅拌机中创建了一个 3d 模型，然后将其导入到 three.js 中。一切正常，morphAnimMesh 中的数据，如 currentKeyframe 和 lastKeyframe 都在更新，但它只是不渲染动画，只是一个静态的 3d 对象。有人可以帮我吗？谢谢。

这是我工作的网址：[http ://www.dustedge.com/mathspace/three_test2.html](http://www.dustedge.com/mathspace/three_test2.html)

我所有的代码都在这里：

```
var scene = new THREE.Scene();
var camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
var histLookVector = new THREE.Vector3(1,1,1);
var currentLookVector = new THREE.Vector3(1,1,1);
var xAxis = new THREE.Vector3(1,0,0);
var yAxis = new THREE.Vector3(0,1,1);
var renderer = new THREE.WebGLRenderer();
var mesh;
var time;
var oldTime;
var delta;
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

camera.position.x = -20;
camera.position.y = 20;
camera.position.z = 20;
camera.lookAt(currentLookVector);
var x=0;
var loader = new THREE.JSONLoader();
loader.load( "nets.js", createGeometry  );
function createGeometry(model){
    var material = new THREE.MeshNormalMaterial({morphTargets:true});

    mesh = new THREE.MorphAnimMesh(model, material);
    mesh.scale.x = mesh.scale.y = mesh.scale.z = 4;
    mesh.position.x = 10;
    mesh.time = 0;
    mesh.duration = 2000;

    oldTime = time = new Date().getTime();
    scene.add(mesh);
    render();
}

function render() {
    requestAnimationFrame(render);
    time= new Date().getTime();
    delta= time-oldTime;
    oldTime=time;

    if(mesh){
        mesh.updateAnimation(delta);
        //console.log('current: ' + geometry.currentKeyframe);
    }

    renderer.render(scene, camera);
} 
```

# javascript - 是否可以检测元素的样式是否只是浏览器默认样式，还是由样式表或内联样式设置？

> ID：15891280
> 
> 赞同：6
> 
> 时间：2013-04-09T00:23:22.653
> 
> 标签：javascript, css, web-applications

我的 javascript 包含在 X 的站点中，但我对她的站点或包含它的位置没有任何其他控制权。如果她有样式`#element`，我想不管它，但如果她没有，我有一个样式表我会注入`<head>`。有没有什么方法可以检测出她是否设计了它？

检查它的高度是 0 还是 1 会失败，因为它有一些内容并且浏览器会做出默认决定。

**javascript/jquery/other 框架告诉 CSS 样式的特殊性的任何方式都可以回答这个问题并且令人难以置信。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:29:35.087

对于内联样式，这很容易：您可以访问`element.style`对象并检查您想要的属性——或者使用它`element.hasAttribute('style')`来检查属性是否在 HTML 中定义。

对于样式表应用的 CSS 规则，我建议您看一下“[是否可以使用 Javascript 检查是否在样式标签内定义了某些 CSS 属性？](https://stackoverflow.com/questions/15667426/is-it-possible-to-check-if-certain-css-properties-are-defined-inside-the-style-t/15669079#15669079) ”这与您的要求非常相似。

如果您想过滤掉任何通用规则（如标记规则） ，使用那里描述的方法也很容易过滤只有`#element`选择器的规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:41:10.247

`style`一种直接但不完美的方法是检查元素的属性是否具有值或元素的`class`属性是否已设置，以了解是否有意为元素设置样式。

[http://jsfiddle.net/YbSpc/](http://jsfiddle.net/YbSpc/)

HTML

```
<div id="test_unstyled"></div>
<div id="test_styled" style="background-color: red;" class="something"></div> 
```

JS

```
var unstyled = document.getElementById('test_unstyled'),
    styled = document.getElementById('test_styled');

console.log('test_unstyled is styled?', !!(unstyled.getAttribute('style') || unstyled.className));
console.log('test_styled is styled?', !!(styled.getAttribute('style') || styled.className)); 
```

但是，此解决方案不会检测通过 CSS 选择器应用的任何样式。如果您想考虑这些，您可能必须找出浏览器应用的所有默认样式并对其进行检查，但这将很难维护，我不建议您尝试实施这种方法，除非您是愿意为此唯一目的开发和维护图书馆。

如果您要发布其他人可能使用的插件，那么实现`API`允许插件的客户端决定是否要应用插件样式可能会更容易。

您还可以始终包含您的样式表，并且用户将能够通过加载他们的自定义样式表来覆盖样式。

# html5-canvas - 使用 Paper.js 将鼠标悬停在特定画布路径上时更改鼠标光标

> ID：15891282
> 
> 赞同：2
> 
> 时间：2013-04-09T00:23:55.533
> 
> 标签：html5-canvas, paperjs

实际上（使用 w3.org 文档的示例[http://www.w3.org/html/wg/drafts/2dcontext/html5_canvas/#dom-context-2d-ispointinpath](http://www.w3.org/html/wg/drafts/2dcontext/html5_canvas/#dom-context-2d-ispointinpath)）我确实想出了如何在原始 HTML5Canvas/ 中完成它JavaScript：http: [//jsfiddle.net/QTu9E/4/](http://jsfiddle.net/QTu9E/4/)

上面我使用`isPointInPath(x, y)`了语法，但根据提到的文档，也可以`isPointInPath(path, x, y[, w ])`在其中给出某些路径来检查。

这可能是问题解决者，但我不能让它工作，只是将 paperjs 的`Path`对象传递给它！

我将继续寻找解决方案，因为与其他任何人一样，我有我的最后期限，但任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-01-30T06:58:33.280

尝试`onMouseEnter`和`onMouseLeave`事件并更改 paperjs 容器 html dom 元素的 css 样式。

[http://paperjs.org/reference/item/#onmouseenter](http://paperjs.org/reference/item/#onmouseenter)

```
yourPath.onMouseEnter = function (event) {
    paperCanvasContainerDiv.style.cursor = "pointer";
}
yourPath.onMouseLeave = function (event) {
    paperCanvasContainerDiv.style.cursor = "default";
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T15:52:29.503

好的，这就是答案！

[http://jsfiddle.net/fqaJM/](http://jsfiddle.net/fqaJM/)

```
<canvas id="myCanvas" width="256" height="128"></canvas>
<div id="xycoordinates"></div> 
```

```
#myCanvas {
    border: 1px solid #c3c3c3;
}
#xycoordinates {
    font: 9pt sans-serif;
} 
```

```
var canvas = document.getElementById("myCanvas"); // Get canvas

// Some initialisation stuff to make things work out of PaperScript context
// Have to have things to be done this way because jsfiddle don't allow to save source with script type="text/paperscript"
paper.install(window); 
paper.setup(canvas);   

var myPath = new paper.Path.Circle([64, 64], 32); // Red one, with 'pointer' cursor on it
myPath.style = {
    fillColor: '#FF0000'
};
var scndPath = new paper.Path.Circle([192, 64], 32); // Green one, without cursor accent
scndPath.style = {
    fillColor: '#00FF00'
};
paper.view.draw(); // Have to call manually when working from JavaScript directly

var hitOptions = { // Trigger hit only on 'fill' part of the path with 0 tolerance
    segments: false,
    stroke: false,
    fill: true,
    tolerance: 0
};

var tool = new paper.Tool(); // Again manually. Life is much easier with script type="text/paperscript"
tool.onMouseMove = function (event) { // Installig paperjs event 
    var x = event.point.x;
    var y = event.point.y;

    document.getElementById("xycoordinates").innerHTML = "Coordinates: (" + x + "," + y + ")";

    var hitResult = myPath.hitTest(event.point, hitOptions); // isPointInPath

    if (hitResult) {
        document.body.style.cursor = "pointer";
    } else {
        document.body.style.cursor = "default";
    }
}; 
```

关键是我错过了 paperjs 有它自己的`onMouseMove`and `hitTest()`，它是`isPointInPath()`包装器。

不知道它是怎么发生的，因为我已经在项目中使用它了！也许需要休息 %)

无论如何，仍然存在一些问题：它看起来`hitTest()`会引发一些奇怪的误报，有时它不会在它应该触发的地方触发。使用 (46,96) 和 (77,64) 坐标检查点！

UPD：刚刚在一个本地 HTML 文件中测试了相同的代码以获得相同的工件： http: [//pastebin.com/HiYgKnw0](http://pastebin.com/HiYgKnw0)

# javascript - Javascript没有执行？

> ID：15891285
> 
> 赞同：-2
> 
> 时间：2013-04-09T00:24:12.163
> 
> 标签：javascript, jquery, html

我真的不明白为什么我的页面上没有执行“警报”javascript...

单击第一步菜单时，第二个菜单按预期很好地显示，但从此时起不再执行 javascript，我无法显示警报。

这个简单的页面使用 Jquery 来删除/添加一个类。

这是代码：

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Hello world with jQuery</title>
    <link href="style.css" rel="stylesheet" type="text/css">
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script type="text/javascript">
        function displayStep2() {
            $("#searchStep1").addClass("displayNone");
            $("#searchStep2").removeClass("displayNone");
        }
        function displayStep3() {
            alert('Hello, world!');step
        }
    </script>
</head>
<body>  
<div id="searchContainer">
    <div id="searchStep1">
        <h2>Step1:</h2>
        <ul id="searchList1">
            <li id="search11" onclick="displayStep2()"><span>1.1</span></li>
            <li id="search12" onclick="displayStep2"><span>1.2</span></li>
        </ul>
    </div>
    <div id="searchStep2" class="displayNone">
        <h2>Step2:</h2>
        <ul id="searchList2">
            <li id="search21" onclick="displayStep3"><span>2.1</span></li>
            <li id="search22" onclick="displayStep3"><span>2.2</span></li>
            <li id="search23" onclick="displayStep3"><span>2.3</span></li>
        </ul>
    </div>
    <div id="searchStep3" class="displayNone">
        <h2>Step3:</h2>
        <ul id="searchList3">
            <li id="search31" onclick=""><span>3.1</span></li>
            <li id="search32" onclick=""><span>3.2</span></li>
        </ul>
    </div>
</div>
</body>
</html> 
```

和CSS：

```
.displayNone{
    display: none   
} 
```

有没有人能帮我不发疯……？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T00:26:59.053

你必须写`displayStep3();`而不是`displayStep3`. 后者是没有函数调用。

# visual-studio-2010 - MSVC2010：为什么我的 C++ Win32 项目需要目标 .Net 框架？

> ID：15891289
> 
> 赞同：0
> 
> 时间：2013-04-09T00:24:57.993
> 
> 标签：visual-studio-2010, visual-c++, unmanaged

我特别避免使用 CLR/托管项目，但它仍然要求我提供目标框架。

![http://s23.postimg.org/gxzh5gqkr/Untitled.png](https://i.stack.imgur.com/A8oMN.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T00:30:48.760

我刚刚在 VS 2012 中创建了一个这样的项目，并且要求同样的事情。**我只是忽略了它**，就我在创建的解决方案中看到的而言，它不依赖于 .net 框架。

看起来像一个 UI 问题，但只是。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T00:31:33.033

.NET 框架有不同的版本，它们支持的平台也不同。

不要引用我的话，但我相信我在某处看到最新的 .NET 框架不支持 Windows XP。

如果是这样的话，有很多理由让你选择目标平台。

# php - Laravel3：必须永远设置的变量

> ID：15891290
> 
> 赞同：0
> 
> 时间：2013-04-09T00:25:06.063
> 
> 标签：php, laravel, laravel-3

```
<meta name="description" content="{{ $description }}" /> 
```

它是一个存储在`custom.config.php`. 该文件可以在任何地方。（我是 Laravel 的新手）

如何确保 Laravel 每次都运行它？我不会`->with('description', $description');`每次调用视图时都使用它。

寻找类似的东西：`{{ Config::get('website_description') }}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:33:26.717

您可以将该变量添加到之前的路由过滤器：

```
Route::filter('before', function()
{
    //Do stuff before every request to your application...
    $website_description = Config::get('website_description');  
    View::share('website_description', $website_description);
}); 
```

然后，您可以在视图中直接访问该变量。

# javascript - 单击由 ajax 加载的锚点上的触发器

> ID：15891297
> 
> 赞同：0
> 
> 时间：2013-04-09T00:25:47.123
> 
> 标签：javascript, jquery, ajax

我正在尝试在由 ajax 动态生成的锚点上使用 ajax 触发器。

这是我没有成功也没有错误的尝试：

```
 $('.excelDL').live('click', function(e){
            $.ajax({
                url: 'exceldl.php',
                data: $('#myForm').serialize(), 
                type: 'POST', 
                success: function(data){
                    $('.xldl').html(data);
                    attach = $('.xldl a').attr("href");

                    $('.xldl a').trigger('click');
                }
            });
        }); 
```

我相信这是因为我使用 AJAX 将新元素插入到 DOM 中，导致触发器不起作用，这就是我尝试使用`live`. 我不确定如何继续和解决这个问题。

我很感激任何建议。

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:31:16.653

使用“on”而不是“live”

```
 $(document).on('click','.excelDL',function(e){
        $.ajax({
            url: 'exceldl.php',
            data: $('#myForm').serialize(), 
            type: 'POST', 
            success: function(data){
                $('.xldl').html(data);
                attach = $('.xldl a').attr("href");

                $('.xldl a').trigger('click');
            }
        });
    }); 
```

jquery 文档：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

jquery live 在 1.7 之后被弃用

# php - 如何保存到本地服务器并将 php webform 以 pdf 格式通过电子邮件发送

> ID：15891302
> 
> 赞同：0
> 
> 时间：2013-04-09T00:26:30.290
> 
> 标签：php, forms, pdf

我为一家在我们的 Intranet 上使用大量 Web 表单的公司工作（基于 apache 服务器）

我需要一种能够从这些 Web 表单生成 pdf 的方法，将其保存到我们服务器上的文件中，并将副本发送到某些指定的电子邮件地址。目前，php 表单被放入 html 电子邮件模板中，并在按下提交按钮时发送。

保存的表单需要有一个单独的文件名（例如 storename.date.formname.submittedby.pfd），这样我们就可以记录重要的表单。

我仍然是编程的菜鸟，所以可能需要非常简单的答案。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T00:49:53.907

你的问题不是 100% 清楚的。您说您以 HTML 格式通过电子邮件发送表单。我假设您的意思是用户输入的数据。看看[wkhtmltopdf](https://code.google.com/p/wkhtmltopdf/)是一个很棒且易于使用的 HTML 到 PDF 转换器。也许这有助于您入门。

# php - pdf文件中的自动求和

> ID：15891304
> 
> 赞同：0
> 
> 时间：2013-04-09T00:26:55.330
> 
> 标签：php, actionscript-3

我想在pdf中获得自动求和，例如，当我勾选复选框时，它会自动计算勾选框的总和。

这是我的代码：

```
if($books){
$i=1;
foreach($books as $b){
    if($b->code){
        $bodyContent .= '<tr><td>'.$i.'</td><td><input type="checkbox" name="g'.$i.'" value="0" /></td><td><input type="checkbox" name="d'.$i.'" value="0" /></td><td><input type="checkbox" name="u'.$i.'" value="0" /></td><td>'.$u->code.': '.$u->name.'</td></tr>';
        $i++;
    }
}
$bodyContent .= '<tr><td></td><td><input type="text" name="g_total" size="3" /></td><td><input type="text" name="d_total" size="3" /></td><td><input type="text" name="u_total" size="3" /></td><td>Totals</td></tr>'; 
```

# sml - 输出文件到标准输入

> ID：15891311
> 
> 赞同：1
> 
> 时间：2013-04-09T00:27:13.933
> 
> 标签：sml, smlnj

究竟如何将文件中的字符输出到 SML/NJ 中的标准输入？这是我到目前为止所拥有的，但我目前被卡住了，因为我收到了编译器向我抛出的错误。

代码：

```
fun outputFile infile =
let
   val ins = TextIO.openIn infile;
   fun helper copt =
   case copt of
      NONE = TextIO.closeIn ins;
      | SOME(c) = TextIO.output1(stdIn,c); 
        helper(TextIO.input1 ins));
in
   helper ins
end; 
```

关于我要去哪里错的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:01:43.907

好吧，这取决于您要对文件输入做什么。如果您只想打印从文件中读取的字符，而不将其输出到另一个文件，那么您可以只打印输出：

```
fun outputFile infile = let
  val ins = TextIO.openIn infile;

  fun helper copt = (case copt of NONE => TextIO.closeIn ins 
                     | SOME c => print (str c); helper (TextIO.input1 ins));
in
  helper (TextIO.input1 ins)
end;

outputFile "outtest";    (*If the name of your file is "outtest" then call this way*) 
```

然而，上面的例子很糟糕，因为它会给你无限循环，因为即使它命中 NONE，也不知道如何终止和关闭文件。因此，这个版本更干净，更易读，并且终止：

```
fun outputFile infile = let
  val ins = TextIO.openIn infile;

  fun helper NONE = TextIO.closeIn ins 
    | helper (SOME c) = (print (str c); helper (TextIO.input1 ins));

in
  helper (TextIO.input1 ins)
end;

outputFile "outtest"; 
```

如果您只想将您的内容输出`infile`到另一个文件，那就是另一回事了，在这种情况下您必须打开一个文件句柄进行输出。

# struts2 - 执行动作没有考虑 Struts2 中的实际结果名称

> ID：15891312
> 
> 赞同：1
> 
> 时间：2013-04-09T00:27:21.997
> 
> 标签：struts2, validation

让我问一个问题，也许很简单，但我是 Struts2 的新手。

我在 ProfileAction 动作中有这个动作方法：

```
@Override
public String execute() throws Exception {
    HttpServletRequest request = ServletActionContext.getRequest();
    HttpSession session = request.getSession();
    String id = (String) session.getAttribute("id");
    if (id != null && !id.equals("") && !id.equals("0")) {
        return SUCCESS;
    }

    return "noSession";
} 
```

这在 XML 中：

```
 <action name="perfil" class="agenda.ProfileAction">
        <result name="success" type="tiles">/profile.tiles</result>
        <result name="noSession" type="tiles">/login.tiles</result>
    </action>        

    <action name="conexion" class="agenda.ProfileAction" method="login">
        <interceptor-ref name="jsonValidationWorkflowStack">
            <param name="validation.excludeMethods">init,input</param>
        </interceptor-ref>
        <result name="loginSuccess" type="tiles">/login/success.tiles</result>
        <result name="loginError" type="tiles">/login/error.tiles</result>
    </action> 
```

如您所见，我在默认方法中有“noSession”结果，但是当我运行页面时，它会引发异常，因为需要“输入”结果。当我用“input”替换 XML 中的“noSession”时，它可以工作，但副作用是 JSON 验证不起作用。

似乎没有调用执行方法。我什至放置了一个抛出异常，事实上，它没有被调用。

我正在准备以这种方式调用该操作：

[http://www.domain.com:8080/AgendaPlus/perfil](http://www.domain.com:8080/AgendaPlus/perfil)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T00:44:13.853

您几乎肯定会遇到验证或类型转换错误。

发生这种情况时，S2 将尝试将您路由到“输入”结果以重新填写表单。

不相关，但是像这样从请求中获取值完全否定了 S2 的很多功能。考虑通过一些教程/等工作。并使用内置的便利。

* * *

查看拦截器堆栈的一种简单、易读的方法是使用分析拦截器。这可以配置为默认值，或基于每个操作进行设置：

```
<action name="themes" class="test.ThemesAction">
  <interceptor-ref name="profiling">
    <param name="profilingKey">profilingKey</param>
  </interceptor-ref>
  <interceptor-ref name="defaultStack"/>
  <result>/WEB-INF/jsps/themes.jsp</result>
</action> 
```

将包含“profilingKey”参数的请求设置为“true”，您的日志将显示：

```
2013-04-09 21:22:25,813 INFO  : [1959ms] - invoke: 
  [1959ms] - interceptor: exception
    [1959ms] - invoke: 
      [1959ms] - interceptor: alias
        [1959ms] - invoke: 
          [1959ms] - interceptor: servletConfig
            [1957ms] - invoke: 
              [1957ms] - interceptor: i18n
                [1957ms] - invoke: 
                  [1957ms] - interceptor: prepare
                    [1956ms] - invoke: 
                      [1956ms] - interceptor: chain
                        [1956ms] - invoke: 
                          [1956ms] - interceptor: debugging
                            [1956ms] - invoke: 
                              [1956ms] - interceptor: scopedModelDriven
                                [1956ms] - invoke: 
                                  [1956ms] - interceptor: modelDriven
                                    [1956ms] - invoke: 
                                      [1956ms] - interceptor: fileUpload
                                        [1956ms] - invoke: 
                                          [1956ms] - interceptor: checkbox
                                            [1956ms] - invoke: 
                                              [1956ms] - interceptor: multiselect
                                                [1956ms] - invoke: 
                                                  [1956ms] - interceptor: staticParams
                                                    [1955ms] - invoke: 
                                                      [1955ms] - interceptor: actionMappingParams
                                                        [1955ms] - invoke: 
                                                          [1955ms] - interceptor: params
                                                            [1954ms] - invoke: 
                                                              [1954ms] - interceptor: conversionError
                                                                [1954ms] - invoke: 
                                                                  [1954ms] - interceptor: validation
                                                                    [1897ms] - invoke: 
                                                                      [1897ms] - interceptor: workflow
                                                                        [1897ms] - invoke: 
                                                                          [7ms] - invokeAction: themes
                                                                          [1889ms] - executeResult: success 
```

# jquery - 附加到正文然后删除 - 无法将其删除

> ID：15891313
> 
> 赞同：3
> 
> 时间：2013-04-09T00:27:23.013
> 
> 标签：jquery

我有一个非常简单的模态窗口，它附加了正文-单击关闭按钮应该将其删除，我认为这样做可以，但没有。我试过 $(this).remove(); 它取出了按钮，但没有取出附加的文字 - 我哪里出错了？

```
$(function(){
var qrCodeDiv='<div id="qrBlock"><a href="#" class="closeQR">X</a></div>'

$(".add").click(function(){ 
$('body').append(qrCodeDiv); 
}); 

$('a.closeQR').live("click", function() {
$('body').remove(qrCodeDiv); 
});
}); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T00:28:50.123

[`.remove()`不接受任意 HTML 字符串](http://api.jquery.com/remove/)。这样的语法对于创建元素特别有用，但事实并非`.remove()`如此。

将其更改为`$('body').remove('#qrBlock')`或`$('#qrBlock').remove()`。

* * *

请注意，当`click`回调运行不止一次时，您问题中的代码将插入具有相同 ID 的多个元素，[这是一个**很大**的禁忌，将导致未定义的行为。](https://stackoverflow.com/a/4789863/139010)

# themes - 所有moodle的主题都不起作用

> ID：15891315
> 
> 赞同：1
> 
> 时间：2013-04-09T00:28:01.887
> 
> 标签：themes, moodle

我在moodle站点（2.2版）中的主题存在很大问题。

我想在站点主题中更改一些菜单和颜色以及其他一些东西，所以我打开了服务器维护模式和主题设计器模式。

所有这些操作都禁用了主题。我试图关闭这些选项，但什么也没发生，该网站仍然没有任何主题。我试图更改主题，但所有主题都不起作用。

请问这是怎么回事，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:41:17.877

有几件事要尝试。

打开调试（*站点管理>开发>调试*），设置为“开发人员：开发人员的额外Moodle调试消息”并选中“显示调试消息”尝试清除缓存（*站点管理>开发>清除所有缓存*）你得到一个当您尝试清除缓存时出现错误消息？如果是这样，您可以粘贴错误吗？

服务器上是否有足够的可用磁盘空间？当存储我的moodledata文件夹的SAN已满时，我遇到了这个问题。

# jquery-mobile - jQuery Mobile 一个对话框中的多个对话框

> ID：15891316
> 
> 赞同：1
> 
> 时间：2013-04-09T00:28:06.547
> 
> 标签：jquery-mobile

我已经搜索并没有找到这样做的例子。我希望能够为 jQM 打开一个对话框，并将它放在一个对话框内进行逐步过程的地方。我认为这需要将多个对话框加载到一个对话框中，并且不知道这是否可能。我们正在使用带有 jQ​​M 的 Backbone，并且希望能够在对话框中为每个步骤加载下划线模板。我想这将是对话框中的 4-5 个步骤。

这可能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:24:44.470

这是一个示例，使用`.show()`and `.hide()`。这里的诀窍是创建几个 div，然后显示/隐藏它们。

[**工作演示**](http://jsfiddle.net/Palestinian/xXQQh/)

标记

```
<div data-role="dialog" id="dialog">
 <div data-role="header" data-theme="d">
  <h1>Dialog</h1>
 </div>

<!-- First Page -->
 <div data-role="content" id="page1">
  <h3>Page 1</h3>
  <p>Text for #page1</p>
  <div class="ui-grid-a">
   <div class="ui-block-a">
    <a href="#" data-role="button" data-theme="b" class="prev">Previous</a>
   </div>
   <div class="ui-block-b">
    <a href="#" data-role="button" data-theme="e" class="next">Next</a>
   </div>
  </div>
 </div>

<!-- Second Page -->

<div data-role="content" id="page2">
  <h3>Page 2</h3>
  <p>Text for #page2</p>
  <div class="ui-grid-a">
   <div class="ui-block-a">
    <a href="#" data-role="button" data-theme="b" class="prev">Previous</a>
   </div>
   <div class="ui-block-b">
    <a href="#" data-role="button" data-theme="e" class="next">Next</a>
   </div>
  </div>
 </div>

<!-- Third Page -->
<div data-role="content" id="page3">
  <h3>Page 3</h3>
  <p>Text for #page3</p>
  <div class="ui-grid-a">
   <div class="ui-block-a">
    <a href="#" data-role="button" data-theme="b" class="prev">Previous</a>
   </div>
   <div class="ui-block-b">
    <a href="#" data-role="button" data-theme="e" class="next">Next</a>
   </div>
  </div>
 </div>

</div> 
```

代码

```
// hide previous button, #page2 and #page3 once opened
$('#dialog').find('#page1 a.prev').hide();
$('#page2, #page3').hide();

// #page1 to #page2
$('#page1 a.next').on('click', function () {
 $('#page1').hide();
 $('#page2').show();
});

// #page2 to #page3
$('#page2 a.next').on('click', function () {
 $('#page1, #page2').hide();
 $('#page3').show();
 $('#dialog').find('#page3 a.next').hide();
});

// #page2 to #page1
$('#page2 a.prev').on('click', function () {
 $('#page2').hide();
 $('#page1').show();
});

// #page3 to #page2
$('#page3 a.prev').on('click', function () {
 $('#page2, #page3').hide();
 $('#page2').show();
}); 
```

# c# - 不能调用 Invoke 或 BeginInvoke 错误

> ID：15891319
> 
> 赞同：2
> 
> 时间：2013-04-09T00:28:17.767
> 
> 标签：c#, multithreading, visual-studio, exception, exception-handling

我有一个全世界客户都在使用的程序。我检查了我的错误日志，并且似乎有很多异常（如下所列）引发了我无法真正弄清楚或追踪的异常。

我有一些调用，但它们都受 InvokeRequired 保护。现在我在想，如果我应该使用 if (HandleCreated) 来代替。

我什至不确定在何处或何时引发异常。

在启动时，在 InitializeComponent(); 之后，我有一些任务需要访问某些控件，例如 datagridview。但是，就像我说的，我尝试使用 InvokeRequired 来保护它们。我不确定这是否是导致问题的地方。

我可以执行哪些建议，以便尝试跟踪此问题？

无论如何，这是我的例外：

```
 System.InvalidOperationException: Invoke or BeginInvoke cannot be called on a 

control until the window handle has been created.
   at System.Windows.Forms.Control.WaitForWaitHandle(WaitHandle waitHandle)
   at System.Windows.Forms.Control.MarshaledInvoke(Control caller, Delegate 

method, Object[] args, Boolean synchronous)
   at System.Windows.Forms.Control.Invoke(Delegate method, Object[] args)
   at System.Windows.Forms.Control.Invoke(Delegate method)
   at ..()
   at ..()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, 

ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:49:55.010

不，如果您使用 InvokeRequired，则不会发生这种情况。仅当句柄有效时才为真。无论如何都非常简单地避免，只是在 Load 事件触发之前不要订阅事件或启动线程。

当窗体*关闭*时会发生此崩溃。您在堆栈跟踪中看不到的东西，因为这发生在另一个线程上。InvokeRequired + Begin/Invoke() 中有一个竞争条件。InvokeRequired 可能会返回 true，并在微秒后关闭表单。您的 Begin/Invoke 调用将因此异常而失败。

这不是你能解决的比赛。在允许表单关闭之前，您**必须**确保线程不能再调用 BeginInvoke()。这总是意味着您必须*防止*表单关闭。背景信息在[这个答案](https://stackoverflow.com/a/1732361/17034)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:03:30.280

我不确定跟踪是否会在这里完全帮助你。在创建句柄之前，您在代码中的某处调用invoke/BeginInvoke 很明显。现在，我的建议可能需要一些工作，但您将确定过早调用未创建句柄的调用者。在尝试跟踪生产中的一些旧 C++ 遗留代码中的锁定/解锁线程问题时，我使用了这种技术。它工作得很好，我只是保持原样。

这是我的技术。创建一个扩展类，该类接受支持 Invoke/BeginInvoke 和 EndInvoke 的对象。它可能看起来像这样：

```
public static class MyInvokeExtension
{
   public static void TempInvoke(this objectthatsupportsinvoke, ...)
   {
        try
        {
           objectthatsupportsinvoke.Invoke(...);
        }
        catch(Exception ex)
        {
           Console.WriteLine();  // put a break-point here
        }
   }

   // add other BeginInvoke and EndInvoke methods and do the same as above.
} 
```

*   现在在整个代码中进行搜索和替换，并将所有类似调用的调用替换为类似 TempInvoke 的调用。
*   在调试中运行您的应用程序。
*   在某些时候，你会遇到一个断点。
*   使用调用堆栈窗口来查找谁在调用您的调用方法之前比他们应该调用的方法早。

我知道这是一项艰巨的工作，但从长远来看，这是值得的，相信我。事实上，您甚至可以使用此代码来验证对象是否可以处理给定时间点的调用。

让我知道事情的后续。

# razor - 剃刀助手智能未显示在 Orchard CMS 上

> ID：15891326
> 
> 赞同：2
> 
> 时间：2013-04-09T00:28:50.157
> 
> 标签：razor, orchardcms-1.6

我无法在 Orchard CMS 的视图中获得 Razor 智能感知？例如，当我在 VS 2012 中为模块中的 Orchard CMS 视图键入 @Html 时，我需要获得智能感知。让我知道我需要安装什么或让 Razor 助手在我的视图中工作 (cshtml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T23:57:59.313

Orchard CMS 模块的项目类型不是 MVC 项目。相反，它们只是 C#、ASP.NET 项目。由于智能感知基于项目类型（在 .csproj 文件中），因此您不会在 Orchard 模块中获得 Razor 语法。

至于不使用 MVC 项目类型 guid，这是设计使然，没有计划将 Guid 添加到 Orchard 到未来或现有的 Orchard 项目中。

有关详细信息，请参阅[https://orchard.codeplex.com/workitem/19328](https://orchard.codeplex.com/workitem/19328)。

# delphi - 是什么导致了这幅奇怪的画“腐败”？

> ID：15891329
> 
> 赞同：0
> 
> 时间：2013-04-09T00:29:16.300
> 
> 标签：delphi

我们的应用程序主要是一个单屏应用程序。当进入某种模式时，我们隐藏 TRibbon 并用一个上面有一些 TSpeedButton 组件的 TPanel 替换它。（见下文）。忽略任何不平整、按钮标题等。

![好的](https://i.stack.imgur.com/PXsg0.gif)

在我回到正常模式然后回到这个特殊模式后，有些东西被破坏了。有什么建议吗？奇怪的是，如果我将鼠标移到按钮上，图像的外观会发生变化。

![坏的](https://i.stack.imgur.com/aPV4f.gif)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:15:47.850

谢谢你们。找到了修复它的方法。

它是通用软件，所以如果低质量的视频驱动程序容易受到这个问题的影响，我们需要改变一些东西。

它不在虚拟机上；那是一台Win7电脑。很高兴知道 VMWare 问题，因为我确实使用 VMWare。

重绘它并没有帮助，但@David Heffernan 的评论给了我一个让我得到答案的想法。这个想法是将面板绘制为位图并在整个过程中将该位图写入文件。

```
 procedure WriteToolbarBitmapFile(sText:string);
  var
    bmp:TBitmap;
  begin
    bmp:=TBitmap.Create;
    try
      bmp.Width:=pnlIMToolbar.Width;
      bmp.Height:=pnlIMToolbar.Height;
      pnlIMToolbar.PaintTo(bmp.Canvas, 0, 0);
      bmp.SaveToFile('c:\tmp\' + FormatDateTime('hh-nn-ss', Now) + ', ' + sText + '.bmp');
    finally
      bmp.Free;
    end;
  end; 
```

当我尝试设置有问题的面板的位置（pnlIMToolbar）以确保其位置高于另一个控件时，问题就直接变得明显了。更改它，以便设置另一个控制位置。

# ios - UITableViewRowAnimation 被忽略

> ID：15891330
> 
> 赞同：4
> 
> 时间：2013-04-09T00:29:20.940
> 
> 标签：ios, animation, nsfetchedresultscontroller

我`NSFetchedResultsController`用来填充我的表。我表中的数据按照时间戳升序排列（最新消息在底部）。更多数据通过“无限滚动”加载到顶部：例如，当用户滚动到顶部时，会加载更多消息。按照苹果文档中的建议， My`NSFetchedResultsControllerDelegate`像往常一样定义：新行通过

```
- (void)controller:(NSFetchedResultsController*)controller
   didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath*)indexPath
     forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath*)newIndexPath
{
    switch(type) {
        case NSFetchedResultsChangeInsert:
            NSLog(@"insertion at row %d", newIndexPath.row);
            [self.table insertRowsAtIndexPaths:@[newIndexPath]
                              withRowAnimation:UITableViewRowAnimationNone];

            break; 
```

现在这是我的问题：当插入新行时，它们总是动画为“向下”滑动。在无限向上滚动时，它看起来很糟糕。无论我是通过还是作为参数`UITableViewRowAnimationNone`，都会发生这种情况- 该选项似乎被完全忽略了。`UITableViewRowAnimationTop``UITableViewRowAnimationBottom`

任何想法如何正确地为表格设置动画？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-07-01T08:44:35.420

请尝试如下。

```
[CATransaction setDisableActions:YES];
[self.table insertRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationNone];
[CATransaction setDisableActions:NO]; // reset to original value 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-17T07:01:56.193

所以我想通了。

WWDC 2011 演讲“高级表格视图技术”明确表示 UITableViewRowAnimationNone 并不意味着没有动画（：

好像说得通似的。

动画参数仅定义行*如何*插入空间（例如从右/左/等滑动），无论用户想要什么，*创建该空间的过渡都是动画的。*

所以是的，*没有*办法插入/删除/刷新单个单元格，`reloadData`这是要走的路。我爱你，苹果。

现在根据stackoverflow上的许多答案，也没有办法在不更改当前视图的情况下在表格顶部插入内容（例如，无缝插入内容而用户看到的内容根本没有变化）。最好的办法是`contentOffset`在新数据到达后更改。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-08-18T09:59:54.933

我找到了一种禁用插入/删除单元格动画的方法。

```
 [UIView setAnimationsEnabled:NO];
    [_tableView beginUpdates];

    [_table insertCell...];
    [_table removeCell...]

    [_table endUpdates];
    [UIView setAnimationsEnabled:YES]; 
```

它完美地完成了工作。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-05-20T17:42:34.900

从 iOS 7.0 开始，您可以将代码包装在一个`performWithoutAnimation:`块中，如下所示：

```
[UIView performWithoutAnimation:^{
                    [self.tableView beginUpdates];
                    [self.tableView deleteRowsAtIndexPaths:rowsToRemove withRowAnimation:UITableViewRowAnimationNone];
                    [self.tableView endUpdates];
                }]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T14:52:33.097

您是否将数据分成多个部分？如果是，请检查您的实现，`controller:didChangeSection:atIndex:forChangeType:`因为新部分插入将使用该方法中使用的动画类型进行动画处理，而不是`controller:didChangeObject:atIndexPath:forChangeType:newIndexPath:`.

# java - Java 集合 - 映射和集合：无法应用 put

> ID：15891332
> 
> 赞同：0
> 
> 时间：2013-04-09T00:29:28.050
> 
> 标签：java, collections, maps, set

我遇到了一些代码问题。我正在尝试创建一个学生数据库。我需要创建一组由课程名称表示的学生。课程名称映射到学生集。我尝试编写“添加”方法，但是当我尝试将其放入数据库时​​，我收到一条错误消息：java.util.Map> 中的 put(java.lang.String,java.util.Set) cannot应用于 (java.lang.Integer,StudentDatabase.Student)。任何帮助是极大的赞赏！！！！

导入 java.util.*；

公共类学生数据库{

```
private Map<String, Set<Integer>> database = new TreeMap<String, Set<Integer>>();

private static class Student extends TreeSet<Integer> {
    public int id;

    public Student(int id){
        this.id = id;
    }
}

public void add(String courseName, Integer student) {
    /* I've tried to use this way to add to the database and it doesn't work too.
    Set<Integer> studentSet = database.get(courseName);
    if (studentSet == null){
        studentSet = new TreeSet<Integer>();
    }
    studentSet.add(student);
    database.put(courseName, student);
    */

   Integer idInt = new Integer(idInt);
   if (database.containsKey(idInt)){
       //if the student is a duplicate, that is ok
    }
    else{
        Student info = new Student(idInt);
        database.put(new Integer(idInt), info);
    }
} // end add 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T00:32:28.173

错误消息中的答案是正确的：`put(java.lang.String,java.util.Set) in java.util.Map> cannot be applied to (java.lang.Integer,StudentDatabase.Student)`. 第二个列表中的哪个类型与第一个列表中的类型不匹配？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:40:22.497

您需要将参数类型`Map#put`与您的声明相匹配`Map<String, Set<Integer>>`：

```
Student info = new Student(idInt);
Set<Integer> searchMap = database.get(courseName);
if (searchMap == null) {
   searchMap = new HashSet<String>();
}

searchMap.add(new Integer(idInt));
database.put(courseName, searchMap); 
```

# sample - 如何将 I/O 采样率设置为超过 65535 ms (FFFF)

> ID：15891336
> 
> 赞同：0
> 
> 时间：2013-04-09T00:29:58.520
> 
> 标签：sample, sampling, rate, xbee

我正在使用带有固件*ZNET2.5 ROUTER/END DEVICE API的*[XBee](http://en.wikipedia.org/wiki/XBee)模块系列 2 。

 *我会发送一个 ADC 样本，但我看到 IR 参数最大可以为 65535 毫秒；我在传输之前阅读了有关收集更多样本的 IR 参数，但在此固件版本中找不到它。

那么有可能我不能使用超过 65535 毫秒的采样率吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:24:20.480

我找到了解决方案，我可以使用 XBee 睡眠​​时间：

我将循环睡眠周期 (SP) 设置为 AF0 (28 s)，将 I/O 断电的周期数 (SN) 设置为 4，将睡眠选项 (SO) 设置为 4，从而启用扩展的循环睡眠。这样，模块每 SP*SN 秒休眠一次，因此 28 s * 4 = 112 s。*

# java - 清理项目未修复 R.java 错误（Android）

> ID：15891338
> 
> 赞同：5
> 
> 时间：2013-04-09T00:30:34.860
> 
> 标签：java, android, eclipse, android-layout, r.java-file

我的 Android 项目刚开始说我所有的 R.blah.blah 引用都是错误的。清理/重新生成 R.java 文件并没有修复它。也没有关闭/重新打开项目/eclipse。我撤消了可能导致它的对 xml 文件的任何更改。这仅发生在我的一项活动中，所有其他活动都没有与 R.blah 相关的任何错误。

注意：R.java 文件中确实包含所有正确的引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T00:36:11.563

检查是否

```
import android.R; 
```

在您的课程中并将其删除然后尝试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:02:47.857

如果你从其他项目复制代码，你会得到一些，比如

```
import android.R.com.example.view.Widget
import android.R.com.hardware.Camera 
```

删除这些行并运行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-27T00:50:01.447

为了避免麻烦，另一个简单的解决方案是重新启动 eclipse。这次更改工作区的目录。并将您的项目从以前的工作区导入新的工作区。Viola.it 有效。只要您没有违反 xml 文件中的命名约定（记住 xml 中的所有 id 必须是小写字母）。这应该有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T06:58:58.973

这可能与您的 xml 数据出错..检查您的 xml 文件[参考此处](http://developer.android.com/reference/android/content/package-summary.html)，然后清理您的项目并构建它..检查 R.java 文件是否自动生成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-07T14:00:19.590

只需在发生错误的特定活动中尝试

```
 import your_package_name.R; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-26T08:55:17.137

该行在`android:text="@string/Get Location"`R.java 中导致错误，因为字符串`Get Location`中有一个间隙。

要更正它，请在两个名称之间使用下划线：`Get_Location`

# c++ - 具有指针成员的类

> ID：15891341
> 
> 赞同：0
> 
> 时间：2013-04-09T00:30:55.757
> 
> 标签：c++, class

```
class Block 
{
    Block *on;
    char *name;
    bool white;
    bool clear;
    bool onTable;
public:
    Block(char *nm);
    Block(const Block &ob);
    void setName(char *nm);
    char *getName() const ;
    bool isClear();
    void setColor(int colour);
    bool isWhite()const;
    bool isOnTable();
    Block *getOn();
    void putOn(Block &block);
    void putOnTable();
    void takeFromTable();
    void makeClear();
    void flipColor();
    void print();
}; 
```

我有这样的课。为什么要像 Block *on 这样声明 *on 指针？我们不必先写 int、float 或类似的东西吗？什么目的？

类声明外面的block *getOn()函数是这样的；

```
Block *Block::getOn()
{
    return on;
} 
```

我需要在这段代码中返回指针。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:32:52.100

`Block * on`声明`on`为指向类型对象的指针`Block`。当您编写类定义（在本例中为定义`class Block`）时，您实际上是在发明*一种全新的数据类型*（在本例中`Block`），描述它包含的数据类型以及可能的操作。

您的`getOn()`代码看起来正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:12:12.027

如果您不想管理原始指针（就像我一样），请改用智能指针。

前任：

```
 // declare type
    typedef std::shared_ptr<Block> BlockPtr;

    class Block 
    {
        BlockPtr on; // using smart pointer instead of raw pointer
        char *name;
        bool white;
        bool clear;
        bool onTable;
    public:
        Block(char *nm);
        Block(const Block &ob);
        void setName(char *nm);
        char *getName() const ;
        bool isClear();
        void setColor(int colour);
        bool isWhite()const;
        bool isOnTable();
        BlockPtr getOn(); // returning smart pointer
        void putOn(Block &block);
        void putOnTable();
        void takeFromTable();
        void makeClear();
        void flipColor();
        void print();
    };   

    // initializing on
    on = BlockPtr(new Block); 
```

# ruby-on-rails - 如何阅读rails中的复选框我有很多参数来发送电子邮件

> ID：15891343
> 
> 赞同：0
> 
> 时间：2013-04-09T00:31:31.987
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试创建一个选择的用户列表，然后在提交表单上将发送一封电子邮件。这样就欢迎这些人访问网站。问题是我似乎无法遍历我的复选框列表以便能够向每封电子邮件发送一封电子邮件。这是我的表格

```
<%= form_tag(invites_path) do %>
  <% @contacts.each do |c|%>
    <div>
    <%= label_tag 'accept', c[:email] %>
    <%= check_box_tag 'accept[]', c[:email], checked = true %>
  <% end %>
  <%= submit_tag "Send Invitations" %>
<% end %> 
```

现在，invites_path 就是控制器所在的位置，c[:email] 是每个所需用户的电子邮件。现在这里是我的控制器以及我遇到问题的地方。

```
# if there is more than one checkbox selected
if not params[':accept'].nil?
  params[':accept'].split.each do |u|
  InvitesMailer.invite_confirm(current_customer, u).deliver
end
else # only one checkbox selected
  InvitesMailer.invite_confirm(current_customer,params[':accept']).deliver
end 
```

为什么我看不懂

如果我只选择一个或多个复选框，我会收到 `wrong number of arguments (2 for 1)`此行的以下错误

```
InvitesMailer.invite_confirm(current_customer,params[':accept']).deliver 
```

参数如下

```
{"utf8"=>"✓", "authenticity_token"=>"dNQPNGrOsw6bxRwAYxjNrC8qoqR+A228YsmTfYUCc3Y=", "accept"=>["example@gmail.com", "example2@gmail.com"],"commit"=>"Send Invitations"} 
```

我还想指出，我尝试按照本教程[在 Rails 上发送电子邮件 ruby](https://stackoverflow.com/questions/11978810/check-box-to-send-email-ruby-on-rails)​​ 复选框，但我对复选框有点困惑

更新：对于我的邮件控制器

```
def invite_confirm(curuser,usemail)
    @greeting = "Hi"
    @user = curuser

    mail to: usemail, subject: "WhereyouWhere Invitation"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:46:29.063

您能否通读以下内容，如果它解决了您的问题，请告诉我。

**首先是参数的名称**

我很确定有一种*骇人听闻*的方式来命名参数，`':accept'`因此它可能是有效的参数名称，但在这种情况下，这不是您想要的。`params[':accept']`更改with`params[:accept]`或的所有实例`params['accept']`。

**其次是 if 块**

将您的`if`块更改为以下代码。因为`params[:accept]`将永远是一个数组。您不需要对其调用 split 并且不需要 else 块。

```
if params[:accept].present?
  params[:accept].each do |email|
    InvitesMailer.invite_confirm(current_customer, email).deliver
  end
end 
```

# c++ - 将 int 转换为 char*

> ID：15891346
> 
> 赞同：0
> 
> 时间：2013-04-09T00:31:41.147
> 
> 标签：c++, char, int

我正在创建一个矩阵，该矩阵将乘以另一个矩阵。矩阵将从参数 (*argv[]) 中获取值。

到目前为止，我创建了这样的东西：

```
for(int i=0; i<2; i++) {
       for(int j=0; j<2; j++) {
          sec[i][j]=argv[gv];
          gv++;
       }
    }

for(int i=0; i<2; i++) {
   for(int j=0; j<2; j++) {
      int a = (int)fir[i][j];
      int b = (int)sec[i][j];
      int r = a*b;
      res[i][j]=(char)(r); //the problem is here
   }
   cout<<endl;
} 
```

问题是当我想显示矩阵时我的代码崩溃了。问题可能在标记的地方。

任何想法如何解决这个简单的问题？:)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T00:45:25.147

## 你问的问题

由于您没有显示任何声明，我无法确定，但如果崩溃发生在指定位置，很可能您没有为`res`. 你确定你是这样声明的吗？

```
char res[2][2]; 
```

## 其他问题

我不确定您在第一个循环中要做什么，但是如果标识符`argv`引用了传递给的参数，`main`例如：

```
int main (int argc, char *argv[]) 
```

`argv`将是一个指向字符串的**指针**数组，而不是包含在这些字符串中的第一个字符的值的数组。因此，您将使用`sec`您的操作系统选择的或多或少的随机值填充您的数组，并且它遵循的 ABI 用于存储在该位置传递给您的函数的参数。

基本上您的设置如下所示：

```
 +---------> "my_program"
 argv -> +--------------+     /              @ anywhere in memory
         | argv [0]    ------+
         +--------------+          +---->  "paramter argc-2"
         | argv [1]    ---------+ /          @ another location in memory
         +--------------+        \
         | ...          |      /   +-----> "paramter 1"
         +--------------+     /              @ some other location again
         | argv[argc-1] |----+
         +--------------+ 
```

虽然它是`@`您正在执行计算的那些位置。

## 不要误解<<输出

在使用类似的结构时

std::cout << argv[1]

将产生与以下相同的输出：

标准::cout << 12

如果您将程序`12`作为第一个参数调用，两者似乎或多或少相同，它们肯定不是！因为只是重载`<<`使它们看起来几乎相同。

然而，当在 int 类型的对象上运行时，在切换`<<`类型的对象上调用时会切换很多不同的代码。`char*`

## 示例的差异

您可能需要检查以下代码段以查看操作上的差异：

```
#include <iostream>
#include <stdio.h>

int main (int argc, char *argv[]) {
  int k;

  for (k=0; k<argc; ++k)
    std::cout << k << ": " << argv[k] << "\n";

  for (k=0; k<argc; ++k)
    printf ("%d: %d\n", k, (int) argv[k]);

  return 0;
} 
```

运行生成的代码`./my_program 12 27 42`将产生如下输出：

```
0: ./my_program
1: 12
2: 27
3: 42

0: -1079747848
1: -1079747840
2: -1079747837
3: -1079747834 
```

差异很大，这是因为当面对`char*` `<<`“知道”类型的值时，它必须执行与面对类型值时不同的操作`int`。

通过在第二个循环中“告诉”实现要执行的正确操作：

```
 for (k=0; k<argc; ++k)
    printf ("%d: %s\n", k, argv[k]); 
```

您将从第二个循环中获得相同的输出。

第一个输出的那些奇怪数字只是将用于表示传递给 main 的参数的指针的位模式解释为整数的那些（位模式）。

改为（无符号）并使用“%x”而不是“%d”会使这一点更加明显，给出如下输出：

```
0: bf92bae9
1: bf92baf6
2: bf92baf9
3: bf92bafc 
```

正如你所看到的，我通过夸大内存位置的随机性在我的照片中“欺骗”了一点。

如果您计算索引，您会在此示例中发现操作系统只是`\0`一个接一个地放置参数（包括终止字符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:53:00.243

正如 Serdalis 所说，如果您只是想输出`int`s，则无需转换它们；只需将它们发送到`cout`.

无论如何，将 a转换`int`为 a`char`可能不会做你想做的事。`char`C 中的 s 无论如何都是数值，它们通过 ASCII 值进行转换。如果您决定将它们变成字符串，您可以使用`itoa`：

```
itoa(r, res[i][j], 10); 
```

这也假设`res`是`char*`s 的二维数组，我不知道，因为您没有提供声明。如果是，则需要在执行此操作之前动态分配它们。

# sql-server-2008 - SSIS：将错误和截断问题都重定向到文件，但转换错误会导致包失败

> ID：15891348
> 
> 赞同：0
> 
> 时间：2013-04-09T00:31:43.697
> 
> 标签：sql-server-2008, ssis

我的源平面文件中有两列，一个整数列和一个 varchar。

在数据流任务中，我选择了源对象，在配置错误部分中，我将“错误”和“截断”列都设置为“重定向”到用于被拒绝记录的输出文件。

如果我使用具有比列长度更长的 varchar 值的一行来装配数据，则该行将按预期重定向到 Rejected 平面文件。但是，当在 INT 列 (ProductID) 中遇到字符串值时，程序包会因以下错误而死。

> [OLEDEST [200]] 错误：SSIS 错误代码 DTS_E_OLEDBERROR。发生 OLE DB 错误。错误代码：0x80040E21。OLE DB 记录可用。来源：“Microsoft SQL Server Native Client 10.0” Hresult：0x80040E21 描述：“多步 OLE DB 操作产生错误。检查每个 OLE DB 状态值（如果可用）。没有完成任何工作。”。
> 
> [OLEDEST [200]] 错误：输入“OLE DB 目标输入”(213) 上的输入列“ProductID”(1084) 存在错误。返回的列状态为：“由于可能丢失数据，无法转换该值。”。

起初我认为我需要更改任务以强制成功返回返回结果以增加最大错误计数，即使我认为“已处理”错误确实应该被视为错误。但是，这只确保了打包成功完成，具有 ProductId varchar 值的行仍然没有最终出现在错误文件中。

我错过了什么？

**更新**

是的，看起来我可以将文件布局的定义更改为仅包含字符串数据类型，并且重定向截断路径将适用于文件源对象。但是，要捕获**转换**错误，我认为我需要使用数据转换转换并从该任务重定向行。

对于数字数据类型，我会在平面文件源对象中定义“足够大”的列来处理任何合理的值，然后将其留给后续的数据转换任务来处理类型转换错误。

这听起来像Preet的建议......

**更新 2** 当我创建一个包含 2 列 int 和 varchar 的简单文件，然后将 char 值放入 int 列并运行从平面文件源对象重定向行的测试包时，将重定向 nopn INT 列。不知道为什么在我最初质疑的其他 pkg 中没有发生这种情况。也许这与这个包是使用 .NET 代码生成的事实有关，并且有些东西搞砸了。

**这篇文章的摘要问题：**

如果我从平面文件源重定向行，是否应该将包含具有非 int 值的整数列的行重定向到平面文件，或者您是否希望这会中止包？（如上所述，我得到不一致的结果，不知道为什么）

# php - zend framework 2 如何链接控制器中的文件（路径是什么）

> ID：15891355
> 
> 赞同：1
> 
> 时间：2013-04-09T00:32:08.813
> 
> 标签：php, zend-framework2

如何链接控制器中的文件

```
$OpenuUserPersonalFile = fopen("/ZendEbayApp/data/usersinformationin/userPersonal.txt", "r");

echo fgets($OpenuUserPersonalFile) . "<br />";

fclose($OpenuUserPersonalFile); 
```

这是正确的吗？

这是我在布局中链接文件的方式`/ZendEbayApp/public/css/MainPageLayout.css`

这是我的控制器所在的位置：`\ZendEbayApp\module\Application\src\Application\Controller`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T00:38:12.817

假设您使用的是 ZF2 Skeleton 应用程序，您会注意到 public/index.php 包含如下行：

```
chdir(dirname(__DIR__)); 
```

这会将目录更改为项目的根目录。

因此，要在您的示例中引用该文件，您只需执行以下操作：

```
$fp = fopen('data/usersinformationin/file.txt', 'r'); 
```

# youtube-api - 有没有办法使用 YouTube API v3 获取“稍后观看”播放列表？

> ID：15891357
> 
> 赞同：11
> 
> 时间：2013-04-09T00:32:23.467
> 
> 标签：youtube-api, android-youtube-api, youtube-data-api

我想知道这在 v3 中是否可用（我知道 v2 可以）？

我尝试`mine=true`在播放列表请求中使用 watch_later 作为 id。指定时，通用播放列表列表结果中不会返回 watch_later 播放列表`mine=true`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-14T00:26:30.340

# 更新

[自 2016 年 9 月 12 日起](https://developers.google.com/youtube/v3/revision_history#august-11-2016)，YouTube 数据 API v3 将无法再进行观看和观看历史记录。

# 原始答案（不再有效）

您可以通过经过身份验证的请求获取您的特殊私人播放列表的 ID

```
GET https://www.googleapis.com/youtube/v3/channels?part=contentDetails&mine=true&key={YOUR_API_KEY} 
```

其中之一是您的*watchLater*播放列表。记下播放列表 ID，并在另一个经过身份验证的请求中使用它来获取*watchLater*列表中所有项目的列表：

```
GET https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId={YOUR_PLAYLIST_ID}&key={YOUR_API_KEY} 
```

# android - 捆绑 putIBinder getIBinder 已弃用

> ID：15891359
> 
> 赞同：0
> 
> 时间：2013-04-09T00:32:32.523
> 
> 标签：android, aidl

似乎 Bundle 已经弃用了 putIBinder 和 getIBinder，我认为这对于将活页夹（通过 Bundles）传递给我的服务非常有用。由于这些已被弃用，是否有替代方法？

我真的需要将一个 IBinder 对象传递给我的服务，我认为 Bundle 方法是最简单（最好）的解决方案。

谢谢，J

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-03T21:19:17.947

发布此内容可能会对处理活页夹的人有所帮助。我使用这种方法，仍然适用`Bundle`

```
// write
bundle.putParcelable(key, new ParcelableBinder(binder));
// read
ParcelableBinder value = bundle.getParcelable(key);
IBinder binder = value == null ? null : value.getBinder();
// or with possible NPE
IBinder binder = bundle.<ParcelableBinder>getParcelable(key).getBinder()

public static class ParcelableBinder implements Parcelable {

    IBinder mBinder;

    public ParcelableBinder(IBinder binder) {
        mBinder = binder;
    }

    private ParcelableBinder(Parcel in) {
        mBinder = in.readStrongBinder();
    }

    public IBinder getBinder() {
        return mBinder;
    }

    @Override
    public int describeContents() {
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeStrongBinder(mBinder);
    }

    public static final Creator<ParcelableBinder> CREATOR = new Creator<ParcelableBinder>() {
        @Override
        public ParcelableBinder createFromParcel(Parcel in) {
            return new ParcelableBinder(in);
        }

        @Override
        public ParcelableBinder[] newArray(int size) {
            return new ParcelableBinder[size];
        }
    };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T16:29:19.457

使用 Parcelable 的实现是否适用于您的情况（Bundle 只是 Parcelable 的一个实现）？

查看有关 Bundle v Parcelable 的这篇文章： [将自定义对象从一个 Activity 传递到另一个 Parcelable vs Bundle](https://stackoverflow.com/questions/12363503/passing-a-custom-object-from-one-activity-to-another-parcelable-vs-bundle)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T05:58:07.163

无需使用 Bundle 跨服务传递 IBinder（我什至看不到您在 javadoc 中提到的 Bundle.{put,get}IBinder 方法）。

导入后，您可以直接在 AIDL 中使用 IBinder 对象。例如，如果您想将 IOtherService 的引用传递给 IService 上的方法，则 IService.aidl 可能如下所示：

```
package com.yourpackage;

import com.yourpackage.IOtherService;

interface IService {
   void doSomething(IOtherService service);
} 
```

# 3d - 是否可以在 WP8 Direct3D 应用程序中使用 AssImp？

> ID：15891361
> 
> 赞同：2
> 
> 时间：2013-04-09T00:32:55.353
> 
> 标签：3d, windows-phone-8, arm, windows-phone, direct3d

我正在制作一个应用程序，它可以从能够导入大量不同的模型文件类型中受益匪浅，因此我对 assimp 很感兴趣。

然而，为 ARM 编译项目似乎比看起来更困难，而且由于我不是编译外国系统的专家，所以在我的 WP8 应用程序中使用它时运气不佳。

有没有人能够在 WP8 应用程序中成功使用 AssImp？我看到[其他人已经能够使其适用于 iOS 应用程序](https://stackoverflow.com/questions/6691927/how-to-build-assimp-library-for-ios-device-and-simulator-with-boost-library)，因此为 WP8 编译它一定不是不可能的，但可能会很困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:43:50.353

长话短说，这是可能的，经过几天的摆弄，我设法将它移植过来。

我这样做的方式可能不是最好的方式，但无论如何我都会在这里解释：

1.  我花了很多时间尝试单独编译库然后链接它。

    一种。我能够成功地为 ARM 和 x86/x64 构建它，但使用这种方法我无法链接它。

    湾。我还设法通过将源文件和依赖项添加到空白 WP8 静态库模板来构建它。

    C。当我确实可以正确链接时，我会收到一个运行时错误，说找不到模块。

2.  通过努力使上述方法发挥作用，我变得非常擅长配置 VS2012 项目以正确编译 AssImp，因此我采用了一种更直接的方法来避免链接并添加 AssImp 源及其依赖项到我的主要 WP8 项目。

    一种。要正确配置 AssImp，您必须做许多奇怪的事情。

    湾。最重要的是确保您拥有所有的依赖项（即 boost）和 AssImp 需要的不在其源代码目录中的附加文件。这包括一些版本标题和一个 contrib 目录。

    C。在您确定包含正确设置并且编译器知道所有必要的代码之后，您将不得不进行一些文件黑客攻击以解决编译器问题。

    d。您必须对其进行移植的大部分细微更改都很容易，但有些更难看，例如您必须在 windows.h 中注释掉一些#include，这样您就不会尝试引入未使用和不兼容的标头。

3.  之后，您应该能够编译和部署整个项目！我已经设法在 WP8 模拟器和设备本身上加载和渲染模型。

如果有人需要帮助，或者如果我可以向您发送没有我的应用程序代码的项目版本，请告诉我！

# java - 尝试在自定义侦听器类中检索 textview 时收到 NullPointerException

> ID：15891362
> 
> 赞同：2
> 
> 时间：2013-04-09T00:33:00.717
> 
> 标签：java, android, android-activity, android-view, android-spinner

我在一页上有两个微调器，每个都从同一条线路/火车检索站。

当用户从微调器中选择一个值时，我想“更新”视图中的信息。我为它们创建了一个自定义微调器侦听器，但我似乎无法访问文本视图以从我的嵌入式类内部进行更新。

我正在描述的活动的代码包含在下面。然而它有很多，所以感兴趣的领域可以在最后的两个嵌入式类中找到：SpinnerActivityDestination 和 SpinnerActivityOrigin。

引发错误的确切行是：

```
EstimatedTime  = (TextView) findViewById(R.id.timeshow); 
```

我正在尝试访问视图中的文本值并显示微调器中的数值。这是它抛出**NullPointerException**的地方，我假设是因为从类内部来看，视图没有膨胀。但我不知道如何绕过它？

任何帮助/建议将不胜感激。

```
public class ChooseStations extends Activity {

public int GlobalSpinnerOrigin;
public int GlobalSpinnerDestination;
public double GlobalStationTime;

private MetroSleepDb db;
private Cursor stations;

SimpleCursorAdapter adapter3;
SimpleCursorAdapter adapter2;
TextView EstimatedTime;

Button b1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_choose_stations);

    // Show the Up button in the action bar.
    getActionBar().setDisplayHomeAsUpEnabled(true);

    Intent intent = getIntent();
    String line_id = intent.getStringExtra("line");

    db = new MetroSleepDb(this);
    stations = db.getStations(line_id);

    GlobalStationTime = 1.3;

    Spinner s1 = (Spinner) findViewById(R.id.spinner1);
    s1.setOnItemSelectedListener(new SpinnerActivityOrigin());
    Spinner s2 = (Spinner) findViewById(R.id.spinner2);
    s2.setOnItemSelectedListener(new SpinnerActivityDestination());

    adapter2 = new SimpleCursorAdapter(this,
            android.R.layout.simple_spinner_item,
            stations, 
            new String[] { "station_name"}, 
            new int[] {android.R.id.text1}, 0); 

    adapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    s1.setAdapter(adapter2);

    adapter3 = new SimpleCursorAdapter(this,
            android.R.layout.simple_spinner_item, 
            stations, 
            new String[] { "station_name"}, 
            new int[] {android.R.id.text1}, 0);

    adapter3.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    s2.setAdapter(adapter3);   

    final Button button = (Button) findViewById(R.id.button1);
    button.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            if (checkSameValues()) {

                showDialog_error();

            } else {

                Intent intent = new Intent(ChooseStations.this, ShowClock.class);
                //intent.putExtra("line", line_value);
                startActivity(intent);

            }
        }
    });

}

public void showDialog_error() {

    AlertDialog.Builder builder = new AlertDialog.Builder(ChooseStations.this);
    builder.setMessage(R.string.dialogue_message)
           .setTitle(R.string.dialog_title)
           .setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {

               public void onClick(DialogInterface dialog, int id) {

               }
           });

    AlertDialog dialog = builder.create();
    dialog.show();
}

public boolean checkSameValues() {

    boolean result = false;

    Spinner s1 = (Spinner) findViewById(R.id.spinner1);
    Spinner s2 = (Spinner) findViewById(R.id.spinner2);

    int v1 = s1.getSelectedItemPosition();
    int v2 = s2.getSelectedItemPosition();

    if(v1 == v2) {
        result =  true;
    }

    return result;
}

public String getItem(int pos) {

    Cursor c = (Cursor) adapter2.getItem(pos);
    String value = c.getString(c.getColumnIndex("line_id"));
    return value;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        // This ID represents the Home or Up button. In the case of this
        // activity, the Up button is shown. Use NavUtils to allow users
        // to navigate up one level in the application structure. For
        // more details, see the Navigation pattern on Android Design:
        //
        // http://developer.android.com/design/patterns/navigation.html#up-vs-back
        //
        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
}

public class SpinnerActivityOrigin extends Activity implements OnItemSelectedListener {

    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {

        GlobalSpinnerOrigin = pos;

    }

    public void onNothingSelected(AdapterView<?> parent) {
        // Another interface callback
    }
}

public class SpinnerActivityDestination extends Activity implements OnItemSelectedListener {

    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {

        GlobalSpinnerDestination = pos;

        if(GlobalSpinnerOrigin != GlobalSpinnerDestination){

            int NewGlobalCalculation = Math.abs(GlobalSpinnerOrigin - GlobalSpinnerDestination);
            int NewTimeArrival = multiply(NewGlobalCalculation,GlobalStationTime);

            EstimatedTime  = (TextView) findViewById(R.id.timeshow);
            // EstimatedTime.setText(NewTimeArrival);

        }

    }

    public int multiply(int a,double b){
        return (int) (a * b); 
        }

    public void onNothingSelected(AdapterView<?> parent) {
        // Another interface callback
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T00:43:35.253

`timeshow`NPE 是由您当前正在查看的布局中不存在的事实引起的。改变 `EstimatedTime = (TextView) findViewById(R.id.timeshow);`

到`EstimatedTime = (TextView) view.findViewById(R.id.timeshow);`哪里`view`是作为参数传入的视图。

# r - 使用 devtools 构建 R 包时找不到对象“Cdqrls”

> ID：15891363
> 
> 赞同：0
> 
> 时间：2013-04-09T00:33:01.513
> 
> 标签：r, package, devtools

如标题所示，我收到错误

```
Error: object 'Cdqrls' not found 
```

我`devtools`用于构建 R 包，在我当前的包中，我使用了一个函数

```
.Call(Cdqrls, x[, id1, drop=FALSE] * w,  w * z, epsilon) 
```

并且还包括`lm.c`文件`src`夹中的一个文件，其中包括：

```
...
SEXP Cdqrls(SEXP x, SEXP y, SEXP tol)
{
    SEXP ans, ansnames;
    SEXP qr, coefficients, residuals, effects, pivot, qraux;
    int n, ny = 0, p, rank, nprotect = 4, pivoted = 0;
    double rtol = asReal(tol), *work;
... 
```

直接从R源文件复制。当我`load_all()`在. `devtools`_ 但是，从 wiki 中，我发现`lm.o``MyPkgName.so``devtools`

```
load_all ignores the package NAMESPACE 
```

如果工作正常，我认为通过运行一些功能，我可以将文件**更新**`NAMESPACE`为包含`useDynLib(MyPkgName, Cdqrls)`. 那是对的吗？我认为这样错误可能会消失......任何建议都非常感谢！

**更新**

根据@mnel 和[这篇](https://stackoverflow.com/questions/8407615/adding-usedynlib-through-roxygen)文章，似乎 using`@useDynLib`应该有效。但是，我使用的函数`.Call()`没有记录，并且使用了几个函数，`.Call`所以我个人不想记录它们，因为它们不用于最终用户。因此，我应该放在`@useDynLib`哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:47:12.187

答案是`@useDynLib PkgName Routine1 Routine2`使用 roxygen2，这样一旦在NAMESPACE 文件中运行`document()`函数将包含，它将完美运行。`devtools``useDynLib(PkgName,Routine1,Routine2)`

# python - Python 和 json，如何打印数据["key"]

> ID：15891364
> 
> 赞同：0
> 
> 时间：2013-04-09T00:33:08.057
> 
> 标签：python, json, key, web-scraping

我有一个简单的抓取代码：

```
import urllib
import re
import json

htmltext = urllib.urlopen("http://dx.com/p/GetProductInfoRealTime?skus=48616")

htmltext = json.load(htmltext)

print htmltext 
```

它输出：

```
{u'data': [{u'sku': 48616, u'isShowDiscount': False, u'currencycode': u'USD', u'issoldout': False, u'adddate': u'10/28/2010', u'discount': 0, u'currencysymbol': u'US$', u'price': u'4.20', u'listprice': u''}], u'success': True} 
```

我不知道如何以正确的格式获取数据，因此我可以使用冒号左侧的术语作为右侧术语的键。

我想

```
print htmltext["sku"] 
48616 
```

或者

```
print htmltext["price"]
4.20 
```

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T00:36:54.243

你有一本带钥匙的字典`data`，

所以访问内部列表：

```
htmltext[u"data"] 
```

然后要访问`"sku"`，您需要访问列表中的字典 in`"data"`的值。

```
inner_dict = htmltext[u"data"][0]

print(inner_dict[u"sku"]) 
```

您可以定义一个函数，例如：

```
def get_data(dict_index, key):
        return htmltext[u"data"][dict_index][key]

print(get_data(0, u"sku")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:16:21.900

你也可以这样做：

```
def get_data(htmltext, sub_key, key='data', indx=0):
    return htmltext[key][indx][sub_key]

print get_data(htmltext, 'sku') 
```

检查默认参数的使用。

干杯!

# c# - 未使用 (READTOEND) 将对象引用设置为对象的实例

> ID：15891367
> 
> 赞同：0
> 
> 时间：2013-04-09T00:33:43.473
> 
> 标签：c#

我有以下代码使用 ftp 下载 txt 文件并写回另一个文件。

```
 ftp = (FtpWebRequest)WebRequest.Create("ftp://" + ftpHost + ftpDIR + "/SAPValidObjects.txt");
 ftp.Method = WebRequestMethods.Ftp.DownloadFile;
 ftp.UseBinary = false;
 ftp.Credentials = new NetworkCredential(ftpUserID, ftpPWD);
 FtpWebResponse response = (FtpWebResponse)ftp.GetResponse();
 Stream sResponse = response.GetResponseStream();
 StreamReader srSAPCostObjects = new StreamReader(sResponse);
 m_swSAPCostCentres.Write(srSAPCostObjects.ReadToEnd());
 m_swSAPCostCentres.Close();
 response.Close();

 m_swSAPCostCentres = new StreamWriter(Properties.Settings.Default.SAPInt + @"\SAPCostCentres" + ".txt"); 
```

出于某种原因，它会在

```
 m_swSAPCostCentres.Write(srSAPCostObjects.ReadToEnd()); 
```

不知道为什么，请有人指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T00:36:45.393

> 它可能是一个`typo`，但你是`initializing`在`m_swSAPCostCentres` 你引用它之后。这可能是问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T00:36:10.753

我想问题是您尝试写入的文件已经存在并且被另一个应用程序打开。

尝试删除文件：

```
Properties.Settings.Default.SAPInt + @"\SAPCostCentres" + ".txt" 
```

如果它存在，在尝试再次创建它之前。

在您的代码中，您还应该添加一个 try catch 并确保您使用 using 语句来包装一次性对象或在 catch 或 finally 块中调用 close 方法，以便始终关闭流和其他对象。

# php - 在 Windows 7 x64 中安装 ffmpeg

> ID：15891369
> 
> 赞同：0
> 
> 时间：2013-04-09T00:33:45.817
> 
> 标签：php, ffmpeg

我在安装 ffmpeg 时遇到问题，我尝试了几个教程但没有。我尝试使用 dll 和可执行文件，但始终无法得到结果。

```
"Fatal error: Call to undefined function dl ()" 
```

我去官网下载了dll，做了在system32和php/ex中播放的过程，并在php.ini中声明了扩展名，但不起作用。我使用的是 php 5.3.13 的版本。我在想这是php的版本你怎么看？我正在使用 WampServer 观察

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T00:56:19.070

[我使用了来自http://partisans9.alamaree.com/chan-5973786/all_p2.html](http://partisans9.alamaree.com/chan-5973786/all_p2.html)的 ffmpeg-20130318-git-519ebb5-win64-static.7z

它正在工作，尽管我通过命令行仅将它用于文件格式转换。

# html - 为什么 span 标签中的文本不居中？

> ID：15891370
> 
> 赞同：0
> 
> 时间：2013-04-09T00:33:55.443
> 
> 标签：html, css

我不确定为什么文本不在标题类跨度中居中。

```
<div id="vid_display">
 <span class="title">SampleText</span></br>
 <span class="desc">Sample Desc</span>
</div> 
```

样式表

```
#vid_display {
height: 500px;
width: 700px;
box-shadow: 10px 10px 5px #888;
}

.title {
font-family: cursive;
font-size: 20px;
font-style: bold;
text-align: center;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:46:00.883

`text-align`对像 span 标签这样的内联元素没有任何影响。您需要将 text-alignment 应用到`display:block;`类似于 the`<div>`或`<p>`包裹 span 的父元素上。

使用这样的方法可能会更好：

**HTML**

```
<div id="vid_display">
 <p class="title">SampleText</p>
 <p class="desc">Sample Desc</p>
</div> 
```

**CSS**

```
.title { text-align: center; } 
```

**更新：**这是一个工作示例：[http ://codepen.io/anon/pen/jEnys](http://codepen.io/anon/pen/jEnys)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T00:58:34.143

是内联元素而不是块。使用 div 代替：

```
<div id="vid_display">
  <div class="title">SampleText</div><br>
  <span class="desc">Sample Desc</span>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T00:41:30.327

利用

```
 <div class="title">SampleText</div></br> 
```

标签用于对文档中的`<span>`内联元素进行分组。标签本身不提供`<span>`视觉变化。 `<span>`默认为 being`display:inline;`而`<div>`默认为 being `display:block;`。

# python - 使用 NDB Expando 模型获取动态属性列表？

> ID：15891373
> 
> 赞同：2
> 
> 时间：2013-04-09T00:34:17.810
> 
> 标签：python, google-app-engine, app-engine-ndb

使用 db，它似乎是 myexpando.dynamic_properties()，但尝试在 ndb 中执行此操作时，我得到了 dynamic_properties 的 AttributeError。

在文档中找不到有关对此进行更改的任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T04:09:00.373

当您使用 ndb 时，您应该使用 _properties 来获取属性列表

```
 The db, ndb, users, urlfetch, and memcache modules are imported.
dev~cash-drawer> class X(ndb.Expando):
...    pass
... 
dev~cash-drawer> 
dev~cash-drawer> 
dev~cash-drawer> y = X()
dev~cash-drawer> y.a = ndb.GenericProperty()
dev~cash-drawer> y.a = 100
dev~cash-drawer> y.a
100
dev~cash-drawer> repr(y.a)
'100'
dev~cash-drawer> type(y.a)
<type 'int'>
dev~cash-drawer> y._properties
{'a': GenericProperty('a')}
dev~cash-drawer> 
```

请参阅文档 [https://developers.google.com/appengine/docs/python/ndb/entities#expando](https://developers.google.com/appengine/docs/python/ndb/entities#expando)

# php - 传递 PHP 变量 onclick

> ID：15891376
> 
> 赞同：1
> 
> 时间：2013-04-09T00:34:35.927
> 
> 标签：php, mysql, ajax

假设我有两个文件，`fileone.php`并且`filetwo.php`.

`fileone.php`生成链接列表，来自 mySQL 数据库的项目，这些项目中的每一个都有一个唯一的整数 ID (1,2,3,4...)。

`filetwo.php`包含一个 PHP 函数，该函数使用此 ID 创建一个显示您单击的项目的页面`fileone.php`。根据您点击的项目，`fileone.php`您会在`filetwo.php`.

我的问题：我如何将 ID 从 发送`fileone.php`到`filetwo.php`？我是否使用带有 $_GET 变量的表单？这纯粹是一种假设情况，我没有要显示的代码，我只需要输入如何处理这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T00:37:17.900

是的，您可以通过 $_GET 传递 ID

fileone.php...

```
<a href="/filetwo.php?id=1">1</a>
<a href="/filetwo.php?id=2">2</a>
<a href="/filetwo.php?id=3">3</a> 
```

文件二.php

```
if(isset($_GET['id']))
{
    //do somethign with $_GET['id']
} 
```

您应该查看 PDO 或 mysqli 以接收和清理输入。不要使用 mysql_ 函数，因为它们已被弃用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T00:37:04.280

是的，你应该使用`$_GET`变量。您的 HTML 代码`fileone.php`如下所示：

```
<a href="filetwo.php?itemId=1">Item 1</a>
<a href="filetwo.php?itemId=2">Item 2</a>
<a href="filetwo.php?itemId=3">Item 3</a> 
```

并在`filetwo.php`您获得 itemId 值`$_GET['itemId']`并输出图像、文本等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T00:37:10.933

是的，取决于信息的敏感性以及您是否关心用户是否会更改地址以查看不同的 ID，您将使用 $_GET，否则使用 $_POST，并且如果您正在处理非常敏感的内容，例如用户状态或一个购物车，然后使用 $_SESSION。

所以，对于 $_GET 你会有一个指向 filetwo.php?id=3 的链接

在 filetwo.php 上，您将连接到基于 $_GET['id'] 的数据库并像这样开发您的视图。

# c++ - C++ 中的 C# 样式枚举

> ID：15891378
> 
> 赞同：1
> 
> 时间：2013-04-09T00:34:54.100
> 
> 标签：c++, design-patterns, iostream, abstraction

我正在尝试编写一个使用外部工具的日志库

我正在寻找一种方便的方法来将键字符串添加到输出流中，以帮助外部工具进行解析，同时对使用库的程序员的影响最小

目标是实现这样的目标：

```
cout << DEBUG::VERBOSE << "A should equal 3" << endl;
cout << DEBUG::WARNING << "something went wrong" << endl; 
```

现在我的数据结构如下

```
struct Debug
{
static const std::string FATAL_ERROR; 
static const std::string ERROR;
static const std::string WARNING;
static const std::string IMPORTANT;
static const std::string INFORMATION;
static const std::string VERBOSE;
static const std::string DEBUG;
}; 
```

这有效，但我想从`std::string`类型中添加一个抽象级别。

在 Java/C# 中，我可以使用 an`enum`来实现写入行为，如何在 C++ 中优雅地实现它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T00:39:50.340

我认为在 C++ iostreams 中，风格的流操纵器`endl`更惯用：

```
#include <iostream>

namespace debug
{
    std::ostream & info(std::ostream & os) { return os << "Info: "; }
    std::ostream & warn(std::ostream & os) { return os << "Warning: "; }
    std::ostream & error(std::ostream & os) { return os << "Error: "; }
}

int main()
{
    std::cout << debug::info << "This is main()\n"
              << debug::error << "Everything is broken\n";
} 
```

# php - 在php中将字符串时间转换为日期时间格式

> ID：15891383
> 
> 赞同：-2
> 
> 时间：2013-04-09T00:35:23.587
> 
> 标签：php, mysql

我从一个拥有超过 100 万条记录的客户那里获得了数据导出。

我编写了一个脚本，将这些数据读入一个数组，我基本上可以将大部分数据导入我的 mysql 数据库，但我正在努力解决一个问题。

我得到的数据库导出中有 4 列是日期。不幸的是，它们被格式化为单词，例如“Mar 31 2013 01:04:47:687AM”

我在从“Mar 31 2013 01:04:47:687AM”转换为“0000-00-00 00:00:00”的 php 脚本之后（yyyy-mm-dd hh:mm:ss）

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T00:39:02.740

我相信 String t time 可以处理该格式，因此以下方法可行：

```
 $formattedDateStr = date(
       "Y-m-d H:i:s",
       strtotime( "Mar 31 2013 01:04:47:687AM" ),
 ); 
```

[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T01:30:05.257

```
$dateString = 'Mar 31 2013 11:04:47:242PM';

$dateTime = datetime::createfromformat('M d Y h:i:s:u A',$dateString);

echo $dateTime->format('Y-m-d H:i:s'); 
```

# ruby - 为什么赋值的值总是参数的值？

> ID：15891389
> 
> 赞同：4
> 
> 时间：2013-04-09T00:36:28.183
> 
> 标签：ruby

有人愿意解释一下为什么在旧版本的 Ruby 中，赋值的结果是属性设置方法返回的值，但是在 Ruby 1.8 之后，赋值的值始终是参数的值；方法的返回值被丢弃。在下面的代码中，旧版本的 Ruby 会将 result 设置为 99。现在 result 将设置为 2。

```
class Test
  def val=(val)
    @val = val
    return 99
  end
end

t = Test.new
result = (t.val = 2)
result # => 2 
```

这种变化背后的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T00:55:25.823

分配*始终*评估为分配的值。这是一个简单而一致的规则，既*在*Ruby 内部保持一致，也与大多数其他基于表达式的编程语言一致。

其他一切都将是一个不一致的特殊情况，这些都是不好的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T02:17:19.137

当您想将相同的值分配给多个变量时，将分配链接在一起并不少见。这在其他语言中更为常见。

```
@user_id = user.id = next_user_id 
```

但是当你不考虑这一点时会发生什么，因此返回值与输入值不同？

```
class User
  def id=(name)
    @id = name
    @modified = true
  end

  def modified?
    @modified
  end
end 
```

这段代码完全可以正常工作，直到有一天你把它放到像上面这样的分配链中，突然之间你会得到意想不到的结果。

因此，解释器做了某种巫术并确保赋值的 RHS 是返回值，丢弃实际的返回值。

# java - Java 动态数组

> ID：15891395
> 
> 赞同：1
> 
> 时间：2013-04-09T00:37:00.097
> 
> 标签：java, arrays, dynamic

我正在学习 Java 编程课程，我需要有关动态数组的帮助。我环顾四周，找不到在我的简单水平上做到这一点的方法。我在课堂上不远，只是学习了基础知识，所以我知道的不多，但我需要知道如何制作动态数组。

以下是我们获得的两个示例程序：

```
public class DynamicArrayOfInt
{
    private int[] data;
    public DynamicArrayOfInt()
    {
        data = new int[1];
    }
    public int get(int position)
    {
        if (position >= data.length)
            return 0;
        else 
            return data[position];
        }
    public void put(int position, int value)
    {
        if (position >= data.length)
        {
            int newSize = 2 * data.length;
            if (position >= newSize)
                newSize = 2 * position;
            int[] newData = new int[newSize];
            System.arraycopy(data, 0, newData, data.length);
            data = newData;
            System.out.println("Size of dynamic array increased to " + newSize);
        }
        data[position] = value;
    }
}
` 
```

2号

```
import java.util.Scanner;
public class ReverseWithDynamicArray
{
    public static void main(Sting[] args)
    {
        DyanamicArrayOfInt numbers;
        int numCt;
        int num;
        Scanner scan = new Scanner(System.in);
        numbers = new DynamicArrayOfInt();
        numCt = 0;
        System.out.println("Enter some postive integers; Enter 0 to end");
        while (true)
        { 
            num = scan.nextInt();
            if (num <= 0)
                break;
            numbers.put(numCt, num); 
            numCt++;
        }
        System.out.println("\nYour numbers in reverse order are:\n");
        for (int i = numCt - 1; i >= 0; i--)
        {
            System.out.println( numbers.get(i) );
        }
    }
} 
```

第二个应该继承第一个，并允许您在键入后创建更多数组。但是当我使用这些时，它说我有一个错误，并且它说`ReverseWithDynamicArray`只有在明确请求注释处理时才接受类名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:47:04.117

将此用于您的第一个示例程序，我在 System.arraycopy 更改了您的参数

```
public class DynamicArrayOfInt
{
private int[] data;
public DynamicArrayOfInt()
{
    data = new int[1];
}
public int get(int position)
{
    if (position >= data.length)
        return 0;
    else 
        return data[position];
    }
public void put(int position, int value)
{
    if (position >= data.length)
    {
        int newSize = 2 * data.length;
        if (position >= newSize)
            newSize = 2 * position;
        int[] newData = new int[newSize];
        System.arraycopy(data, 0, newData, 0, data.length);
        data = newData;
        System.out.println("Size of dynamic array increased to " + newSize);
    }
    data[position] = value;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:30:52.073

你为什么不尝试收藏？因为我认为 LinkedList 最适合它。虽然我不太确定你的要求。我想在这里放一些示例代码：

```
//create a LinkedList object :
LinkedList ll=new LinkedList();

//Add your items in linked list as many as you like
ll.add("item");// you can also add on a specific position by using ll.add(index, item);

//for getting the length of your LinkedList use:
int size=ll.size();

//for reversing the list items use :

Collections.reverse(list);//or you can manually implement it by using size or length of list

/* for printing the list, simply put it in Sop
(As toString method is overriden in Collection Framework to give a output string in
the form like: [collection items separated with comma] ) */ 
```

//注意：ArrayList和Linkedlist的区别在于ArrayList实现了RandomAccess接口，所以它为访问任意随机索引提供了恒定的访问时间。因此使用 ArrayList 进行检索是最好的，但对于在随机位置插入 ArrayList 是不合适的，因为它需要调整 ArrayList 的大小和几个移位操作。

LinkedList 以具有双向链表的节点的形式实现顺序访问。为了访问任何随机索引，它需要访问该节点的下一个地址。所以对于随机检索/阅读 LinkedList 是不合适的。但是对于随机索引上的插入，它只需要维护一个要插入的新节点。因此，对于插入列表之间或列表中的任何位置 LinkedList 是合适的。

我希望它可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-05T09:35:23.793

您在 System.arraycopy() 中缺少一个参数，以下是 java.lang.System.arraycopy() 方法的声明

```
public static void arraycopy(Object src, int srcPos, Object dest, int destPos, int length) 
```

src -- 这是源数组。

srcPos -- 这是源数组中的起始位置。

dest -- 这是目标数组。

destPos -- 这是目标数据中的起始位置。

长度——这是要复制的数组元素的数量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-30T06:34:16.163

看看java中集合的原始实现。有许多可用的库。一个很好的实现是[Trove](http://trove.starlight-systems.com/)

我希望您可以使用原始集合来节省空间和时间。

# php - Laravel3：使用 Laravel 的内置功能提供故障安全图像路径

> ID：15891399
> 
> 赞同：0
> 
> 时间：2013-04-09T00:37:17.367
> 
> 标签：php, laravel, laravel-3

```
background-image: url('home_assets/images/origami/parallax/01.png');
<img alt="" src="home_assets/images/origami/logo.png"> 
```

如果出现以下情况，我会担心 404 问题：

1.  我将我的 Laravel 文件夹移动到一个子文件夹中，
2.  将来重命名 home_assets

我正在寻找类似的解决方案：

```
Url::to_home_assets_image('origami/logo.png'); 
```

`Url`会照顾路径。如果我将 Laravel 移动到`a/b/c/`文件夹中，那么它应该理解公用文件夹应该在`a/b/c/public/`.

`::to_home_assets_image`应该像一个常数一样工作。`home_assets_image`常量/函数/对象（无论你想怎么称呼它）应该参考`'home_assets/image/'`.

像这样的东西：`Url::to_home_assets_image('origami/logo.png');`应该工作。

你怎么看？我太担心了，或者为了避免文件夹问题必须做些什么？

ps：我不能用`HTML::image()`。它将破坏第一个示例，因为它将添加一个标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T00:52:40.933

您可以通过`<img src="{{URL::to_asset('images/original/logo.jpg')}}">`. 在你的 CSS 样式中获取这些 URL 会做更多的工作，但在技术上是可行的。但是，假设您的所有资产都存储在 中`/public`，那么 url('../images/image.ext') 将正常工作。如果您需要更改资产文件夹路径，可以`asset_url`在`/application/config/application.php`.

# clojure - Clojure 2d 列表到哈希映射

> ID：15891401
> 
> 赞同：0
> 
> 时间：2013-04-09T00:37:27.823
> 
> 标签：clojure, hashmap, lazy-sequences

我有一个这样的无限列表：
((1 1)(3 9)(5 17)...)
我想从中制作一个哈希图：
{:1 1 :3 9 :5 17 ... )

基本上“内部”列表的第一个元素是关键字，而第二个元素是值。我不确定在创建时是否更容易创建我使用的列表：

> (迭代 (fn [[ab]] [(计算 a) (计算 b)]) [1 1])

(b) 的计算需要 (a)，所以我相信在这一点上 (a) 不能是关键字……重点是可以很容易地访问给定 (a) 的值 (b)。

任何想法将不胜感激......

--EDIT--
好的，所以我想通了：

> (def my-map (into {} (map #(hash-map (keyword (str (first %))) (first (rest %))) my-list)))

问题是：它似乎并不懒惰......即使我没有消费它，它也会永远存在。有没有办法让它变得懒惰？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T06:56:18.460

问题是哈希映射既不是无限的也不是惰性的。他们设计用于快速键值访问。因此，如果您有一个哈希映射，您将能够执行快速键查找。键值访问是 hash-map 的核心思想，但它使得惰性无限 hash-map 的创建变得不可能。

假设，我们有一个无限的 2d 列表，那么您可以使用它`into`来创建 hash-map：

```
(into {} (vec (map vec my-list))) 
```

但是**没有办法**使这个哈希映射无限。因此，您唯一的解决方案是创建自己的哈希映射，就像[Chouser 建议](https://stackoverflow.com/questions/15891401/clojure-2d-list-to-hash-map/15894383#15894383)的那样。在这种情况下，您将拥有一个无限的二维序列和一个在其中执行惰性键查找的函数。

实际上，他的解决方案可以稍微改进一下：

```
(def my-map (atom {}))

(def my-seq (atom (partition 2 (range))))

(defn build-map [stop]
  (when-let [[k v] (first @my-seq)]
    (swap! my-seq rest)
    (swap! my-map #(assoc % k v))
    (if (= k stop)
        v
        (recur stop))))

(defn get-val [k]
  (if-let [v (@my-map k)]
    v
    (build-map k))) 
```

`my-map`在我的示例中，存储当前的哈希映射并`my-seq`存储尚未处理的元素的序列。`get-val`函数执行惰性查找，使用已处理的元素`my-map`来提高其性能：

```
(get-val 4)
=> 5
@my-map
=> {4 5, 2 3, 0 1} 
```

和加速：

```
(time (get-val 1000))
=> Elapsed time: 7.592444 msecs
(time (get-val 1000))
=> Elapsed time: 0.048192 msecs 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T00:59:15.850

如果您使用 flatten 将其展平为 (kvkvkvkv) 列表，那么您可以使用 apply 使用该列表调用 hash-map，因为它的参数将为您提供您寻找的列表。

```
user> (apply hash-map (flatten '((1 1)(3 9)(5 17))))
{1 1, 3 9, 5 17} 
```

尽管它没有对第一个参数进行关键字化。

至少在 clojure**中，与键关联的最后一个值被称为该键的值**。如果不是这种情况，那么您不能为已经在映射中的键生成具有不同值的新映射，因为查找函数将返回第一个（现在是阴影键）。如果查找函数搜索到最后，那么它不是懒惰的。您可以通过编写自己的使用关联列表的地图实现来解决这个问题，尽管它会缺乏 Clojure 基于 Trei 的地图的性能保证，因为在最坏的情况下它会退化为线性时间。

我不确定保持输入序列惰性会产生预期的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T06:01:24.487

为了变得懒惰，每次请求一个键时，计算机都必须对输入序列进行线性扫描，至少如果该键超出了目前已扫描的范围。一个简单的解决方案是每次都扫描序列，如下所示：

```
(defn get-val [coll k]
  (一些 (fn [[ab]] (当 (= ka) b)) coll))

(get-val '((1 1)(3 9)(5 17))
         3)
*;=> 9*

```

一个稍微不那么天真的解决方案是用来`memoize`缓存 的结果`get-val`，尽管这仍然会扫描输入序列而不是严格必要的。一个更积极的缓存解决方案是使用一个原子（就像`memoize`内部一样）来缓存每对所看到的，从而仅在查找需要尚未看到的内容时消耗更多的输入序列。

无论如何，我不建议将其包装在哈希映射 API 中，因为这意味着可能不需要但难以实现的高效不可变“更新”。我通常也不建议对键进行关键字化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T00:59:05.730

要从您的序列中制作哈希图，您可以尝试：

```
(defn to-map [s] (zipmap (map (comp keyword str first) s) (map second s)))

=> (to-map '((1 1)(3 9)(5 17)))
=> {:5 17, :3 9, :1 1} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T01:00:41.703

您可以稍后通过这种方式将该结构转换为哈希映射

```
(def it #(iterate (fn [[a b]] [(+ a 1) (+ b 1)]) [1 1])) 
(apply hash-map (apply concat (take 3 (it))))
=> {1 1, 2 2, 3 3} 
```

# python - 从 python 中的字符串中安全地删除所有 html 代码

> ID：15891402
> 
> 赞同：5
> 
> 时间：2013-04-09T00:37:45.923
> 
> 标签：python, html, security, parsing, utf-8

我一直在阅读许多关于如何使用 python 从字符串中删除所有 html 代码的问答，但没有一个令人满意。我需要一种方法来删除所有标签，保留/转换 html 实体并与 utf-8 字符串一起工作。

显然 BeautifulSoup 容易受到一些特制的 html 字符串的攻击，我用 HTMLParser 构建了一个简单的解析器来获取文本，但我丢失了实体

```
from HTMLParser import HTMLParser

class MyHTMLParser(HTMLParser):
    def __init__(self):
        HTMLParser.__init__(self)
        self.data = []

    def handle_data(self, data):
        self.data.append(data)

    def handle_charref(self, name):
        self.data.append(name)

    def handle_entityref(self, ent):
        self.data.append(ent) 
```

给了我类似的东西

> [u'Asia, sp', u'cialiste du voyage', ...

在 spécialiste 中失去重音“e”的实体。

使用您可以找到的许多正则表达式之一作为类似问题的答案，它总会有一些未考虑的边缘情况。

我可以使用任何非常好的模块吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T00:42:10.190

[漂白剂](https://pypi.python.org/pypi/bleach)非常适合这项任务。它可以满足您的一切需求。它有一个广泛的测试套件，可以检查标签可能漏掉的奇怪边缘情况。我从来没有遇到过问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T01:58:44.113

也许是pyquery？尝试easy_install / pip install pyquery；然后是一些代码，例如：

```
from pyquery import PyQuery as jQ

dom = jQ("<html>...</html>")
print dom("body").text() 
```

# apache-httpclient-4.x - Apache HTTPClient 不允许超过 1500 个可重用连接

> ID：15891408
> 
> 赞同：1
> 
> 时间：2013-04-09T00:38:12.840
> 
> 标签：apache-httpclient-4.x, apache-commons-httpclient

我正在使用 Apache HTTPClient (4.2.2) / Java7 打开许多与 tomcat 7 服务器的可重用连接（以模拟许多用户反复点击该服务）。Ubuntu 12 上的客户端和服务器（但不同的机器）。我确保 systctl.conf 和 limits.conf 允许这种情况。

这适用于大约 1500 个模拟用户/连接。连接按预期重复使用。然而，在 1500 到 1600 个模拟用户之间的某个地方，连接不再被重用并且一直关闭/重新打开。为什么会这样？

我不认为问题出在服务器端，因为当我在不同机器上针对同一台服务器启动多个模拟客户端时，只要每个客户端不超过 1500 个连接，服务器重用连接就没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:41:35.667

取决于连接管理器或服务器端配置的配置，连接不再被重用的原因可能有多种。找出原因的最简单方法是运行 HttpClient 并启用上下文日志记录，如[日志记录指南中的“用于连接管理/请求执行的上下文日志记录”示例中所述](http://hc.apache.org/httpcomponents-client-ga/logging.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:48:16.450

您可能需要增加可用工作人员的数量，至少在连接用完时通过转到服务器状态检查是否有空闲工作人员

# facebook - 没有所有者的 Facebook 应用程序

> ID：15891410
> 
> 赞同：4
> 
> 时间：2013-04-09T00:38:23.833
> 
> 标签：facebook, facebook-graph-api, facebook-access-token

突然我在开发者应用程序部分找不到我的 Facebook 应用程序，我使用我的“应用程序访问令牌”通过 Facebook Graph API 获取应用程序角色，但令人惊讶的是我的应用程序没有所有者，我想有人得到了我的“应用程序访问权限”令牌'并从应用程序中删除所有管理员，问题是[我的 Facebook 应用程序没有所有者]。有什么想法可以取回吗？ [Facebook 应用程序 API](https://developers.facebook.com/docs/reference/api/application/#roles)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:47:27.173

这显然是一个图形 API 错误，因为 '**必须指定至少一个具有管理员权限的开发人员。**[' 如果您删除https://developers.facebook.com/apps/APP_ID/roles](https://developers.facebook.com/apps/APP_ID/roles)上的最后一个管理员（您），则会弹出错误对话框。[在https://developers.facebook.com/bugs](https://developers.facebook.com/bugs)上报告错误，并询问他们如何联系以恢复您的应用程序。

# erlang - Erlang 中第二条消息的进程崩溃

> ID：15891412
> 
> 赞同：2
> 
> 时间：2013-04-09T00:38:35.037
> 
> 标签：erlang, shadowing

我在 Erlang 中实现了一个简单的汽车流程：

```
-module(cars).
-compile(export_all).

-record(state, {count=1}).

make_car() ->
  spawn_link(fun() -> car_proc(#state{}) end).

car_proc(S) ->
    receive
        {idle, X} ->
            io:format("idling for ~p second(s)~n", [X]),
            timer:sleep(X*1000);
        {move, {X,Y}} ->
            io:format("move; x=~p, y=~p~n", [X,Y]);
        {stop, Reason} ->
            X = S#state.count,
            io:format("stopped with count ~p because ~p~n", [X+1, Reason])
    end,
    X = S#state.count,
    car_proc(S#state{count=X+1}). 
```

我可以让它空闲，但如果我连续两次调用空闲，它会中断：

```
59> C = cars:make_car().
<0.207.0>
60> C!{idle,1}.         
idling for 1 second(s)
{idle,1}
61> C!{idle,1}.         
idling for 1 second(s)
{idle,1}
62> 
=ERROR REPORT==== 9-Apr-2013::00:00:00 ===
Error in process <0.207.0> with exit value: {{badmatch,2},[{cars,car_proc,1,[{file,"cars.erl"},{line,20}]}]}

** exception error: no match of right hand side value 2
     in function  cars:car_proc/1 (cars.erl, line 20) 
```

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T03:12:25.883

错误发生在第 20 行，即

```
X = S#state.count 
```

这是因为模式匹配失败。变量 'X' 已经在这一行中定义，它的值为 1，因为它已经在接收块中确定：

```
receive
        {idle, X} -> 
```

在 Erlang 中，变量的值只能定义一次。当您第一次发送消息 {idle, 1} 时，X 变为 1，S#state.count 的默认值为 1。所以在这种情况下，“X”匹配 S#state.count。当您第二次发送 {idle, 1} 时，X 为 1，S#state.count 为 2（即 X 和 S#state.count 不相等）。所以你会在模式匹配中遇到错误。您可以使用另一个变量来避免该问题。更改最后两行

```
X = S#state.count,
car_proc(S#state{count=X+1}). 
```

到

```
Count = S#state.count,
car_proc(S#state{count=Count+1}). 
```

而且要快乐！

# ruby-on-rails - Sidekiq 延迟邮件程序不发送电子邮件

> ID：15891416
> 
> 赞同：2
> 
> 时间：2013-04-09T00:39:11.023
> 
> 标签：ruby-on-rails, email, actionmailer, sidekiq, delayed-execution

下午好，

我正在尝试使用 Sidekiq/Redis 在后台发送电子邮件。我应该注意以下几点：

1.  我正在使用`devise-async`，它没有问题

2.  我的`ActionMailer`设置很好
    如果我将邮件调用更改为`UserMailer.contact_email(name).deliver!`电子邮件发送就好了。什么不工作是`UserMailer.delay.contact_email(name)`

3.  我可以在我的日志中看到正在处理的工作，你甚至会认为邮件正在通过。只有当我发送给自己时，我才注意到它不起作用：
    `Apr 08 18:36:58 app01-production sidekiq: 2013-04-09T00:36:58Z 31155 TID-1jdwoq Sidekiq::Extensions::DelayedClass JID-6143790ebbf6e8bbc4a7bb85 INFO: done: 4.923 sec`

它显然是在邮件对象上调用 DelayedClass 扩展，但不行。鉴于这`devise-async`行得通，我想知道我是否使用了错误的语法或什么？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-27T18:51:29.820

实际上我在使用 rails 4 版本时也有同样的问题。上面的解决方案对我不起作用，我检查了@benjamin repo 并且找不到它。所以，我尝试了 sidekiq mailer gem [https://github.com/andersondias/sidekiq_mailer](https://github.com/andersondias/sidekiq_mailer)并让它运行良好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:31:29.190

我也遇到了类似的问题。我对延迟扩展调用#deliver 的方式做了一个微小的改变。

试试这个：`gem 'sidekiq', :git => "git@bitbucket.org:benjamintanweihao/sidekiq.git"`。

如果这对您有用，则可能是由于`msg.from`未设置。

相关代码在[这里](https://github.com/mperham/sidekiq/blob/master/lib/sidekiq/extensions/action_mailer.rb?#L23)。

# php - 通过 SMS Globe Labs API 注册/查询时收不到任何 SMS 消息

> ID：15891417
> 
> 赞同：0
> 
> 时间：2013-04-09T00:39:17.087
> 
> 标签：php, nusoap

我正在开发一个基于 SMS 的注册系统，到目前为止我正处于测试我的系统的阶段。突然之间，当我尝试通过 SMS 注册时，我无法从服务器接收任何消息，它必须收到确认消息。这是我在使用 PHP nusoap 时所做的。

**注册.php**

```
 <?php
 // This will allow user to register via SMS.
 error_reporting( E_ALL );
 // load the nusoap libraries. These are slower than those built in PHP5 but         
 require_once('nusoap.php');

// create the client and define the URL endpoint
 $soapclient = new nusoap_client('http://www.mnccyf.info/soap_book.php?wsdl');

 // set the character encoding, utf-8 is the standard.
  $soapclient->soap_defencoding = 'UTF-8';
  $soapclient->call('sendSMS', array( 'uName' => '48dwi5',
   'uPin' => '159597',
   'MSISDN' => '09152886810',
    'messageString' => 'Registered Successfully',
     'Display' => '1',
     'udh' => '',
     'mwi' => '',
     'coding' => '0' ),
      "http://ESCPlatform/xsd");
      ?> 
```

**查询.php**

```
 <?php
   // This will allow user to inquire about the latest news within the organization.
    error_reporting( E_ALL );
   // load the nusoap libraries. These are slower than those built in PHP5 but    
    require_once('nusoap.php');
    $soapclient = new nusoap_client('http://www.mnccyf.info/soapquery_server.php?wsdl');

  // set the character encoding, utf-8 is the standard.
   $soapclient->soap_defencoding = 'UTF-8';
   // Call the SOAP method, note the definition of the xmlnamespace as the third       in the call and how the posted message is added to the message string
  $soapclient->call('sendSMS', array( 'uName' => '48dwi5', 
  'uPin' => '159597', 
  'MSISDN' => '09152886810', 
   'messageString' => 'Summer Camp 2013', 
   'Display' => '1', 
    'udh' => '', 
    'mwi' => '', 
    'coding' => '0' ),  
     "http://ESCPlatform/xsd");

   ?> 
```

**传入短信.php**

```
 <?php
   require_once('nusoap.php');
   function sendSMS($number,$soapclient)  
   {

   $x=sendSMS("09152886810",$soapclient);
   }

   # Load XML string from input

   $xml = simplexml_load_file('php://input');

   # Parse the XML for parameters

  $sms = array();
  $nodes = $xml->xpath('/message/param');

  foreach($nodes as $node)
  {
  $param = (array) $node;

  $sms[$param['name']] = $param['value'];

  }

    if($sms['messageType'] == 'SMS-NOTIFICATION') {
    sendSMS();

    list($action, $messagetype, $source, $type) =explode ("     ",$soapclient); 

    }elseif($sms['messageType'] == 'SMS') {

    sendSMS();   
    list($action, $name, $age, $localchurch, $district) = explode(" ",$soapclient); 

    }elseif($sms['messageType'] == 'SMS') {

    sendSMS(); 
    list($action, $event,$location,$time) = explode("     ", $soapclient);

    }
    else {
    echo "Unsupported Message Type";

   }

   ?> 
```

**register_soapserver.php**

```
<?php
//call library

require_once ('nusoap.php');

//using soap_server to create server object
$server = new nusoap_server;
$server ->configureWSDL('http://iplaypen.globelabs.com.ph:1881/axis2/services/Platform?
wsdl','urn:http://iplaypen.globelabs.com.ph:1881/axis2/services/Platform?wsdl');
//register a function that works on server
$server->register('reg');

// create the function
function reg()
{
$connect = mysql_connect("localhost","root","jya0312@");

if (!$connect)
{
die("Couldnt connect" . mysql_error());
}

mysql_select_db("cyfdb", $connect);

$sql = "INSERT INTO mydb(name, age,localchurch,district) VALUES ('{$_POST  [name]}','{$_POST[age]}','{$_POST[localchurch]}','{$_POST[district]}')";

mysql_close($connect);

}

// create HTTP listener
$server->service($HTTP_RAW_POST_DATA);

exit();

?> 
```

**肥皂查询服务器.php**

```
<?php
//call libraryrequire_once ('nusoap.php');

//using soap_server to create server object
$server = new nusoap_server;
$server ->configureWSDL('http://iplaypen.globelabs.com.ph:1881/axis2/services/Platform?     wsdl','urn:http://iplaypen.globelabs.com.ph:1881/axis2/services/Platform?   wsdl');
//register a function that works on server
$server->register('getquery');

// create the function
function getquery()
{
$link=mysql_connect("localhost", "root", "jya0312@") or die("Cannot connect to DB!");
mysql_select_db("cyfdb") or die("Cannot select DB!");
$sql = "SELECT event,location,time from activity";
while($r = mysql_fetch_array($sql)){
  $items[] = array('event'=>$r['event'],
                      'location'=>$r['location'],
                      'date'=>$r['date']); 
}
return $items;

$mysql_close($link);

}

// create HTTP listener
$server->service($HTTP_RAW_POST_DATA);

exit();
?> 
```

# c# - Windows 7 中的 Global CBT Hook 最终失败

> ID：15891422
> 
> 赞同：1
> 
> 时间：2013-04-09T00:40:12.607
> 
> 标签：c#, c++, winapi, hook, global

我正在使用全局 CBT 挂钩设置来阻止新窗口窃取焦点。我正在从 ac# 应用程序注入 c++ DLL。它可以正常运行一段时间，然后停止工作。我认为它可能会超时，但我在注册表中更改了 LowLevelHooksTimeout 并重新启动。那没有帮助。

我对 C++ 不是很好。所以，也许这是我的代码中的一个错误。什么可能导致它失败？另外，有没有办法处理名称修改并稍微清理一下代码？

窗口监视器.cpp

```
 #include <map>
   #include "stdafx.h"
   #include "header.h"
   using namespace std;

   #pragma data_seg(".TEST")
   HHOOK hook=0;
   #pragma data_seg()
   #pragma comment(linker, "/section:.TEST,rws")

   extern "C"
    {
   __declspec(dllexport) LRESULT CALLBACK CBTProc(int nCode, WPARAM wParam, LPARAM lParam)
        {
    if (nCode<=0)  return CallNextHookEx(hook, nCode, wParam, lParam);
    if (nCode==HCBT_ACTIVATE)
    {
        try {
            CBTACTIVATESTRUCT* stuff=(CBTACTIVATESTRUCT*) lParam;

            if (stuff!=0)
            {
            if (stuff->fMouse==TRUE)
            {

                return 0;
            }
            if (stuff->fMouse==FALSE)
            {
                return 1;
            }
            }
        }
        catch (exception& e)
        {

        }

    }
    return CallNextHookEx(hook, nCode, wParam, lParam);
}
}

BOOL APIENTRY DllMain( HMODULE hModule,
                  DWORD  ul_reason_for_call,
                  LPVOID lpReserved
                  )
{
switch (ul_reason_for_call)
{
case DLL_PROCESS_ATTACH:
case DLL_THREAD_ATTACH:
case DLL_THREAD_DETACH:
case DLL_PROCESS_DETACH:

    break;
}
return TRUE;
}

bool InjectCBTHook()
{

HMODULE hDll;
HOOKPROC cbtProcAddr;
DWORD proc_id;

hDll        = LoadLibraryA("WindowMonitor.dll");
cbtProcAddr = (HOOKPROC)GetProcAddress(hDll, "_CBTProc@12"); 

hook=SetWindowsHookEx(WH_CBT, cbtProcAddr, hDll, 0);

if (hook==0) 
{
    int x=GetLastError();
    return FALSE;
}

return TRUE;
}

bool EjectCBTHooks()
{
 UnhookWindowsHookEx(hook);
 return TRUE;
 } 
```

窗口监视器.h

```
#ifndef WM
#define WM
extern "C" {

#define DLLEXPORT  __declspec(dllexport)
  DLLEXPORT bool InjectCBTHook() ;
  DLLEXPORT bool EjectCBTHooks();
}

#endif 
```

C# P/调用

```
[DllImport("WindowMonitor.dll", CallingConvention = CallingConvention.Cdecl)]
static extern bool InjectCBTHook();
[DllImport("WindowMonitor.dll", CallingConvention = CallingConvention.Cdecl)]
static extern bool EjectCBTHooks(); 
```

# jetty - 我无法让 Jetty8 etc/jetty-webapps.xml extractWars="false" 工作

> ID：15891423
> 
> 赞同：0
> 
> 时间：2013-04-09T00:40:18.027
> 
> 标签：jetty, jetty-8

我正在将我的应用程序从 Jetty 7 迁移到 Jetty 8，但进展并不顺利。战斗目前在 etc/jetty-webapps.xml。在此迁移之前，我们的配置始终将此值设置为“false”

```
<Configure id="Server" class="org.eclipse.jetty.server.Server">
  <Ref id="DeploymentManager">
    <Call id="webappprovider" name="addAppProvider">
      <Arg>
        <New class="org.eclipse.jetty.deploy.providers.WebAppProvider">
          <Set name="monitoredDirName"><Property name="jetty.home" default="." />/webapps</Set>
          <Set name="defaultsDescriptor"><Property name="jetty.home" default="."/>/etc/webdefault.xml</Set>
          <Set name="scanInterval">1</Set>
          <Set name="contextXmlDir"><Property name="jetty.home" default="." />/contexts</Set>
          <Set name="extractWars">false</Set>
        </New>
      </Arg>
    </Call>
  </Ref> 
```

当我尝试 bin/jetty.sh 将此值设置为“false”开始时，Jetty 会发出异常，例如...

```
2013-04-08 17:33:03.380:INFO:oejd.DeploymentManager:Deployable added: /Users/bobk/work/workspace/DM_Server/build/distributions/device-management-1.6.5-DEVELOP-dev/webapps/root.war
2013-04-08 17:33:04.526:WARN:oejw.WebAppClassLoader:EXCEPTION 
java.lang.IllegalArgumentException: !file: jar:file:/Users/bobk/work/workspace/DM_Server/build/distributions/device-management-1.6.5-DEVELOP-dev/webapps/root.war!/WEB-INF/lib/guava-14.0.1.jar
    at org.eclipse.jetty.webapp.WebAppClassLoader.addClassPath(WebAppClassLoader.java:245)
    at org.eclipse.jetty.webapp.WebAppClassLoader.addJars(WebAppClassLoader.java:282)
    blah...blah...blah... 
```

...对于我的 WAR 的 WEB-INF/lib 目录中的每个 Jar 文件。如果我将 etc/jetty-webapps.xml 中的 extractWars 的值从“false”更改为“true”，我可以让 jetty.sh 开始成功加载我的 webapp。不过，就像我说的那样，自 Jetty 6 以来，这个值一直是“错误的”，令人沮丧的是它不再起作用。

“假”甚至是合法的设置吗？如果是，我还需要设置、取消设置、包含在 etc/ 目录、jetty.conf 或 start.ini 文件中以使其正常工作吗？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T23:08:14.110

鲍勃，

jetty-7,8 和 9 的错误跟踪器和所有文档都可以在 Eclipse 上找到，这里： http: [//www.eclipse.org/jetty/](http://www.eclipse.org/jetty/)

IIRC，在 jetty-6 中，尽管将 extractWar 设置为 false，但在幕后的 jetty 正在提取和复制 WEB-INF 目录，以克服 Windows 下的热重新部署问题。因此，即使您认为自己没有撤出整个战争，但无论如何至少有一部分是。

使用 jetty-7,8,9 我们精确地遵循 extractWar、copyWebInf、copyWebDir 的设置。默认是提取 - servlet 规范的每次迭代都鼓励提取，因为有更多的特性在解压战争中真正发挥作用。

简

# java - 使用简单数组通过堆叠数字对数字进行排序？

> ID：15891424
> 
> 赞同：2
> 
> 时间：2013-04-09T00:40:18.293
> 
> 标签：java, arrays, algorithm

这是一道作业题（对不起，我知道这些是不受欢迎的），但我和老师实际上都不知道如何有效地解决它，所以我想把它放在这里，看看SO上的精彩大脑是否可以帮助我们.

给出了一个未指定大小的数组，其中包含随机数。它必须按升序排列。每个元素可以移动到相邻的空白空间，也可以移动到相邻的较大元素的顶部。我需要编写一个方法来返回对给定数组进行排序所需的最小移动次数。

这个问题被标记为“可选”，因为老师意识到这个问题太难了，但我很好奇它是如何解决的。任何大小的数组的任何建议（它可以是长度为 3 的数组，我所关心的）表示赞赏。

编辑：感谢您指出这尚不清楚。我正在使用数组来表示假设的现实世界情况。让我们以硬币为例：它们都排成一排放在桌子上，只能放入指定数量的“空格”。但它们可以放在相邻的较大硬币的顶部，或者滑动到相邻的空白空间（该空间已被一枚可能移动到一堆顶部的硬币腾出）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:05:45.673

我决定用一些假设/更改来检查这个问题，因为它让我觉得它成为一个更有趣的问题：

1）您可以从堆的任何部分向左或向右移动元素。

2）你可以将一个元素堆叠成一堆，无论它是更大、更小还是相同的大小。

3）只要您在较小的数字之前从未遇到过较大的数字，无论您如何通过堆栈，该数组都被视为已排序。所以 _ 11 2 3 已排序，但 _ _ 12 3 不是因为您可以将 2 解释为在 1 之前。

这导致了一个非常有趣的问题，尽管有这个公理：

公理A：你下棋的顺序无关紧要，可以以任何方式重新安排，以仍然达到相同的最终结果。

公理 Ab：如果数组中没有重复，则只需将每个元素移向其最终位置。

特别是，我制定了一个策略，希望您可以仅通过局部检查而无需递归/回溯来解决它，但我已经证明这是没有结果的，稍后会展示它。

我的策略是：

1) 从左到右继续寻找以错误方式翻转的对（在较低数字之前的较大数字）。

2a) 当你找到一个时，如果有一个空白点或堆栈，右手值可以立即填充，将它向左移动直到它填充它。

2b) 否则，将左值右移一位。这会造成您有一堆无关紧要的数字的情况 - 首先，在向下比较之前，根据 1) 的逻辑将您向右移动的值与其新右侧的值进行比较。

2bii) 以与对比较相同的方式处理向下比较 - 如果它可以适合空点或堆栈，则将较低的值向左移动，否则将较高的值向右移动并继续。

例子：

1231 -> 我们将 1b 向左移动，因为它可以放入堆栈。11 2 3 _

1321 -> 我们将 3 向右移动，因为 2 不适合空位/堆栈。我们将 1b 向左移动两次，因为它将适合一个空点/适合堆栈，然后我们将 3 向右移动，因为 2 将不适合一个空点/堆栈。1 1 2 3

1132 -> 我们将 3 向右移动，因为 2 不能向左移动。我们将 2 向左移动，因为它将适合一个空的位置。1 1 2 3

2311 -> 我们将 3 向右移动，因为 1a 不能向左移动。我们将 1b 向左移动两次，因为它将适合一个空白点。我们将 1a 向左移动，因为它会堆叠。我们向右移动 2，因为 1a1b 不能向左移动。我们将 1a2b 向左移动，因为它将填充一个空白点。11 2 3 _

但是，我们遇到了这两个起始数组的问题：

23411 10 步最佳，2r 3r 4r 1al*3 1bl*4 使 11 2 3 4 _。

23111 9 招最优，2r*3 3r*3 1bl 1cl*2 使_ _ 111​​ 2 3 - 与23411 策略相反！我们少移动 1，多移动 23，因为有更多的 1，所以我们尽可能少地移动它们。

这表明我们不能只做一个简单的局部比较来解决这个新问题。

我还在思考这个问题，它看起来很有趣，而且我希望你们中的一些人喜欢和我一起思考这个问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T02:10:51.670

我假设：

*   “排序”意味着剩下一个堆栈
*   如果源堆栈中的最大数字小于目标堆栈中的最小数字，我们只能将堆栈移动到另一个堆栈（或者等效地：堆栈必须以较小的数字在顶部进行排序，并且将堆栈移动到另一个堆栈移动整个堆叠在另一个之上）

然后，如果数组多次包含一个数字，显然没有解决方案。此外，数字的大小并不重要，只有它们的等级才重要。不失一般性，我们因此可以假设数组包含任意顺序的数字 1..n。此外，要确定可能的移动，只有堆栈底部的顶部很重要。因此，存储以下内容就足够了：

```
int[] bottom;
int[] top; 
```

由于我们无法将堆栈分开，因此我们只能将堆栈 i 移动到堆栈 j if `bottom[i] + 1 == top[j]`，否则我们将处于无法解决的状态。但是，如果我们处于可以进行此类移动的游戏状态，则最好立即执行它，因为最终我们将不得不合并这些堆栈，并且移动单个堆栈比移动两个堆栈便宜。

因此，唯一的自由度是如何以最少的移动次数将堆栈移动到适当的位置。目前，我没有看到明显的贪心算法，因此找到最佳解决方案可能需要将游戏的位置编码为图形，并将最短路径算法应用于该图形以找到最短的移动序列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:59:40.013

**编辑：**鉴于每个人似乎都在解决不同的问题，我将说明我正在解决的问题（我认为这是正确的问题（不是我们所有人吗？））：（使用磁盘希望让事情变得更容易了解）

> 给定 n 堆，每堆恰好包含 1 个磁盘，按大小递增的顺序排列这些磁盘。最终结果必须使每个堆包含 1 个磁盘。唯一允许的操作是将单个圆盘从一个堆的顶部移动到相邻堆的顶部，受限于不能将磁盘放置在较小磁盘的顶部。允许将磁盘移动到空堆或从堆中移动最后一个磁盘。总是有 n 个堆，因此： (1) 可能不会创建新堆，因此磁盘可能不会移动到原始序列的范围之外。(2) 空堆仍然存在，因此如果相邻位置是空的，则磁盘可能不会在未首先移动到该位置的情况下移动到该位置。

**笔记：**

一个直径为 x 的圆盘 = 一个数 x。

这可能不是最有效的解决方案，但它应该可以工作，并且可能会给某人一些可以工作的东西。

这是一个纯粹的迭代过程——在每一步之后，我们以所有大小为 1 的堆栈结束；这可能是这种方法的根本效率低下。

**解决方案：**

我将使用 1、2 和 5 来说明以下内容，但这只是表示尺寸排序，对于具有相同排序的任何其他数字，它都相同。

*   重复直到排序：
    *   找到尚未在正确位置的最大元素（`5`在这种情况下）

        *   （实际上它不必是最大的，只要是下面形式的任何东西，但注意不要将元素移动到它们应该在的位置之外）
    *   我们有2个案例：
        *   它在最左边的位置，我们有两种情况：
            *   `512...`-`1`向右移动`5`，向右移动，向左移动`1`2，以`152`
            *   `521...`-`1`向左移动 2，向右移动，`2`向右移动`1`2，向右移动`5`，向左移动`1`2，以`152`
        *   它不在最左边的位置，我们有两种情况：
            *   `...251...`-`1`向左移动 2，`5`向右移动，向右移动`1`，以`215`
            *   `...152...`-`2`向左移动`1`，向右移动，`1`向右移动，`2`向左移动，以结束`251`（之后我们从上一个案例开始）

**编辑2：**

**更有效的解决方案：**

1.  找到不在正确位置的最小磁盘
2.  将其放在右侧的磁盘顶部
3.  将所有磁盘移到该磁盘的左侧 1 位置右侧
4.  将最小的磁盘一直向左移动（直到遇到一个已经在正确位置的较小磁盘）

**可能的预处理步骤：**排序到单独的列表以有效地找到最小元素

**优化：**如果要将磁盘向右移动超过其目标位置，则不要在上一步中将右侧的磁盘向右移动，而只需将这个磁盘放在那个磁盘上。如何在正确的时间有效地做到这一点可能有点复杂。不执行某些动作以提高效率也可能会有所帮助。

**例子：**

```
52413

// put smallest disk (1) on disk to the right
    1
524_3

// shift disks to the left 1 position right (3 moves - moved 4, then 2, then 5)
    1
_5243

// move 1 all the way left (4 moves)
15243

// same as above for 2

   2
15_43

   2
1_543

12543 
```

当最小的磁盘在最右边时（就像现在的情况`3`），这有点问题。2种解决方法：

*   交换`1`并`2`穿上`1`（右、左 2 个位置、`2`左2个位置）。然后你就有了一个可以移动的空地。如果小于 2 个较小的元素，则不是一种选择。在我们对更多元素进行排序之前，不应修复这些元素，以防我们遇到同样的情况。`1``2``1``3`

*   如果我们有`12453`，我们可以简单地`4`打开`5`一个插槽`3`（哪种延迟问题）。如果第一个未排序的磁盘（`5`在这种情况下）大于第二个（`4`），我们可以使用一些策略，就像我在前面的解决方案中描述的那样来移动元素以满足这个条件。

# regex - 正则表达式搜索用单个空格 Notepad++ 替换所有非前导选项卡

> ID：15891428
> 
> 赞同：1
> 
> 时间：2013-04-09T00:40:41.803
> 
> 标签：regex, tabs

正则表达式从来都不是我的强项，所以我需要一些帮助。我有一个文本文件，我想用一个空格替换任何“嵌入式”选项卡，并且只有一个空格用于 x 次出现的选项卡，但不理会任何“前导”选项卡。

所以对于看起来像这样的一行：

```
\t\t\tThis is a\t\ttest to see\thow things\t  will work. 
```

看起来像这样：

```
\t\t\tThis is a test to see how things will work. 
```

因此，文件中剩下的唯一选项卡将位于任何行的开头，并且在任何行的开头可能有 x 个选项卡。有人可以帮我解决这个问题吗？

我正在使用 NotePad++ 搜索/替换来执行此操作，但如果效果更好，我可以使用 Visual Studio 或其他一些工具。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T00:52:27.447

找什么：

```
(?<!\t)(?!^)\t+ 
```

制表符序列`\t+`不能以制表符`(?<!\t)`开头，也不能从行首开始`(?!^)`。

用。。。来代替：

```
<space> 
```

[**regex101 上的演示**](http://www.regex101.com/r/aF1lQ1)（因为 Notepad++ 也使用 PCRE，`t`为了清楚起见，我使用而不是 tab）

# java - java.lang.RuntimeException：注册 MBean 时出现异常，com.scale7.cassandra.pelops.pool:type=PooledNode-my_keyspace-localhost

> ID：15891431
> 
> 赞同：2
> 
> 时间：2013-04-09T00:40:52.267
> 
> 标签：java, cassandra, runtimeexception, pelops

我正在做一个需要将数据插入 Cassandra 数据库的项目。因此，我正在使用`Pelops client`.

我有一个多线程代码，它将使用`Pelops client`. 我正在使用`ExecutorService`它。

在我的程序中，每个线程都会在某个范围内工作，比如

```
Thread1 will work on 1 to 20
Thread2 will work on 21 to 40
...
... 
```

下面是我用来插入 Cassandra 数据库的代码 -

```
private static int noOfThreads = 5;
private static int noOfTasks = 100;
private static int startRange = 1;

    public static void main(String[] args) {

        LOG.info("Loading data in Cassandra database..!!");

        ExecutorService service = Executors.newFixedThreadPool(noOfThreads);

        try {
            // queue some tasks
            for (int i = 0, nextId = startRange; i < noOfThreads; i++, nextId += noOfTasks) {

                service.submit(new CassandraTask(nextId, noOfTasks));
            }

            service.shutdown();

            service.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);
        } catch (InterruptedException e) {
            LOG.warn("Threw a Interrupted Exception in" + CNAME + ".PelopsLnPClient: boss told me to stop...Not my fault!!");
        } catch (Exception e) {
            LOG.error("Threw a Exception in" + CNAME + e);
        } 
    } 
```

下面是`CassandraTask class`实现的`Runnable interface`

```
class CassandraTask implements Runnable {

    private final int id;
    private final int noOfTasks;

    private final String nodes = "localhost";
    private final String thrift_connection_pool = "Test Cluster";
    private final String keyspace = "my_keyspace";
    private final String column_family = "PROFILE_USER";

        public CassandraTask(int nextId, int noOfTasks) {
            this.id = nextId;
            this.noOfTasks = noOfTasks;

        }

        public void run() {

            try {

                cassandraConnection();
                Mutator mutator = Pelops.createMutator(thrift_connection_pool);

                for (int userId = id; userId < id + noOfTasks; userId++) {

                    mutator.writeColumns(column_family, String.valueOf(userId),
                            mutator.newColumnList(
                                    mutator.newColumn("unt", "{\"lv\":[{\"v\":{\"regSiteId\":null,\"userState\":null,\"userId\":" + userId + "},\"cn\":1}],\"lmd\":20130206211109}"), 
                                    mutator.newColumn("rtising", "{\"lv\":[{\"v\":{\"thirdPartyAdsOnhostdomain\":null,\"hostdomainAdsOnThirdParty\":null,\"userId\":" + userId + "},\"cn\":2}],\"lmd\":20130206211109}"), 
                                    mutator.newColumn("selling_price_main_cats", "{\"lv\":[{\"v\":{\"regSiteId\":null,\"userState\":null,\"userId\":" + userId + "},\"cn\":1}],\"lmd\":20130206211109}"), 
                                    mutator.newColumn("and_keyword_rules", "{\"lv\":[{\"v\":{\"regSiteId\":null,\"userState\":null,\"userId\":" + userId + "},\"cn\":1}],\"lmd\":20130206211109}"), 
                                    mutator.newColumn("categories_purchased", "{\"lv\":[{\"v\":{\"regSiteId\":null,\"userState\":null,\"userId\":" + userId + "},\"cn\":1}],\"lmd\":20130206211109}"), 
                                    mutator.newColumn("omer_service", "{\"lv\":[{\"v\":{\"regSiteId\":null,\"userState\":null,\"userId\":" + userId + "},\"cn\":1}],\"lmd\":20130206211109}"), 
                                    mutator.newColumn("graphic", "{\"lv\":[{\"v\":{\"regSiteId\":null,\"userState\":null,\"userId\":" + userId + "},\"cn\":1}],\"lmd\":20130206211109}"), 
                                    mutator.newColumn("rite_searches", "{\"lv\":[{\"v\":{\"regSiteId\":null,\"userState\":null,\"userId\":" + userId + "},\"cn\":1}],\"lmd\":20130206211109}")
                                    ));
                }

                mutator.execute(ConsistencyLevel.ONE);

            } catch (Exception e) {
                System.err.println("Threw a Exception in " + e);
            } finally {
                Pelops.shutdown();
            }
        }

        /**
         * Making a Cassandra Connection by adding nodes
         *
         /
        private void cassandraConnection() {

            Cluster cluster = new Cluster(nodes, 9160);
            Pelops.addPool(thrift_connection_pool, cluster, keyspace);

        }
    } 
```

每当我运行上述程序时，我总是遇到异常 -

```
Threw a Exception in java.lang.RuntimeException: exception while registering MBean, com.scale7.cassandra.pelops.pool:type=PooledNode-my_keyspace-localhost 
```

谁能帮我解决我在这里做错了什么？我相信我在这里犯了一些小错误？如果我跑得很慢，那么我不会得到这个例外。慢，我的意思是，通过在代码中放置断点。不知何故很奇怪。

我正在使用 Cassandra 1.2.3

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:46:55.597

您使用的是哪个客户端版本？据我所见，每个线程都为 cassandra 创建了一个池（同名！），每个线程都关闭了 Pelops 客户端。

在主类中移动池创建，只创建一个池并从线程访问它，并且在最后一个线程执行 execute 方法之前永远不要调用 Pelops.shutdown()。

卡罗

# netbeans - 是否可以在没有 Netbeans 的情况下构建基于 Netbeans Matisse 的项目？

> ID：15891434
> 
> 赞同：1
> 
> 时间：2013-04-09T00:41:10.877
> 
> 标签：netbeans, gui-builder, matisse

我正在进行的项目的一部分有一个 GUI 应用程序，它是使用 Netbeans 使用该 IDE 中的 GUI 设计工具构建的。

但这只是一个更大项目的一部分，需要在没有安装 Netbeans 的环境中构建（它恰好是基于 Jenkins 的基于 Gradle 的构建）。我已经构建（看似）工作，但不断遇到莫名其妙的运行时错误（即，依赖项似乎在类路径上遇到相同的 jar 等等，但尝试从项目 jar 读取资源失败。） .

通过谷歌搜索，看起来这可能与编译 .form 文件有关，然后包含对生成的 java 的一些依赖项。（不过，Netbeans 构建不会在我们的 gradle 构建添加的内容之上添加任何 jar）。

所以问题是......这甚至可以做到吗？还是正确的构建只是依赖于 Netbeans 中正在发生的一些隐藏的构建时魔力？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:49:05.727

是的，您可以在没有 NetBeans 的情况下编译这些类。请确保您没有任何 NetBeans 库，例如`AbsoluteLayout`. 这些`.form`文件用于 NetBeans，向您展示带有 Matisse 的组件，但所有生成的代码都将在`.java`文件中。

# jquery - 如何通过选中一个来选中所有复选框？

> ID：15891439
> 
> 赞同：2
> 
> 时间：2013-04-09T00:42:09.330
> 
> 标签：jquery

当“全选”复选框被选中时，我正在尝试检查所有复选框

我已经尝试了一些代码来让它工作，但仍然不适合我。

当我单击主复选框时，没有任何反应。

这是我到目前为止所做的

```
<script>

$(document).ready(function() {
    if(   $('#selectall').is(':checked')  ){

        $.each($('input[name=activitie]'){
            $('input[type=checkbox]').prop('checked', true)
        }

    }
});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T00:44:52.390

无耻的自我推销：[有一个 jQuery 插件](http://mjball.github.io/jQuery-CheckAll/)。在您的情况下，我认为这可以解决问题：

```
$(function () {
    $('#selectall').checkAll('input[type="checkbox"]');
}); 
```

但是，如果没有看到一些标记，我不能肯定地说......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:00:49.503

您需要一些东西来检测 id 为“selectall”的复选框的状态何时更改，然后确定是否正在检查它。我已经更新了您的代码并修复了您的一些其他错误：

```
$(document).ready(function () {
    $("#selectall").click(function () {
        if ($("#selectall").is(":checked")) {
            $.each($('input[name=activitie]'), function () {
                $('input[type=checkbox]').prop('checked', true);
            });
        }
    });
}); 
```

此外，如果您希望它们在未选中“selectall”时全部取消选中，则只需将复选框设置为未选中或 false 即可添加具有相同内容的 else`$.each`子句`.prop`。使用某种插件可能有一种更简单的方法，但我怀疑这应该会有所帮助。

我整理了一个[jsFiddle](http://jsfiddle.net/bmMfn/)应该有助于演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T01:12:38.187

```
$(document).ready(function() {
    $("#selectall").on("change", function(e) {
        e.preventDefault();
        $("input[type=checkbox][name=activitie]").prop("checked", $(this).prop("checked"));
    });
}); 
```

# .htaccess - .htaccess 代码，这个例子是好的编码习惯吗？

> ID：15891441
> 
> 赞同：-1
> 
> 时间：2013-04-09T00:42:20.457
> 
> 标签：.htaccess

现在我的脚正式被 .htaccess 弄湿了，我有一个新问题。在我收藏的众多教程之一中，作者建议将这段代码放在 .htaccess 文件的开头：

```
AddDefaultCharset UTF-8
RewriteEngine On
RewriteBase / 
```

我可以理解避免第一行解析问题的问题，所以我想知道的是，除了`RewriteEngine On`其他两行是好的做法还是只是增加膨胀？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T00:54:51.533

该`RewriteBase /`行有时用于解析目标和/或`RewriteRule`'s 模式中的相对 URI。例如，如果`/foo`目录中有一个 htaccess 文件，并且您的规则可能如下所示：

```
RewriteEngine On
RewriteBase /foo/
RewriteRule ^bar$ index.php?bar [L] 
```

在这里，规则的目标`index.php?bar`是一个相对 URI，并且*base*被添加到它的前面，从而产生 URI: `/foo/index.php?bar`。当规则的目标是相对的时，apache 会猜测 URI 是文件路径还是 URL 路径，但它并不总是正确猜测。使用`RewriteBase /foo/`，apache 知道`/foo/index.php`是一个 URL 路径。可能存在重写基础与其所在文件夹不匹配的情况，但结果仍然相同。它充当规则中相对 URI 的 URI 基础。

拥有它并没有什么坏处，除非出于某种原因您希望某些相对 URI 实际映射到文件路径。

该**[`AddDefaultCharset`](http://httpd.apache.org/docs/2.2/mod/core.html#adddefaultcharset)**指令不适用于 htaccess 文件的字符集，它是当请求的内容为`text/html`或`text/plain`. *同样，除非您是文本或 html 内容实际上是其他*一些编码（例如 *shift_jis*），否则在您的 htaccess 文件中包含它并没有什么坏处。

# struts2 - struts 2动作链获取同一对象的不同值

> ID：15891442
> 
> 赞同：0
> 
> 时间：2013-04-09T00:42:41.020
> 
> 标签：struts2

我有一个动作类，我从 jsp 传递值，然后在动作类 1 中修改该值，然后由于动作链，正在调用另一个动作 2。在行动 2 中，我得到了原始值

`value= 100// in jsp action 1: value*10= 1000// action 1 go to action 2`

我希望修改后的值转到操作 1`i.e. 1000//`中修改的操作 2 值。但我得到了`10// i.e. original value.`

你能告诉我该怎么做才能使用从操作 1 获得的值吗？

struts.xml

```
<action name="action1" class="vaannila.action.action1">
    <result name="success" type="chain">action2
    </result>
</action>
<action name="action2" class="vaannila.action.action2">
    <result name="success" type="dispatcher">result.jsp
    </result>
</action> 
```

行动 1

```
public class action1 extends ActionSupport implements SessionAware{ 
    public String execute() throws Exception{
        System.out.println("original"+ pSB.getvalue() ); // getting 10
        pSB.getvalue((pSB.getvalue()*10));

        System.out.println("modified"+ pSB.getvalue() ); // getting 100 
                return "success";   
    }
} 
```

行动二：

```
public class action2 extends ActionSupport implements SessionAware{ 
    public String execute() throws Exception{
        System.out.println("original"+ pSB.getvalue() ); // getting 10 instead of 100.
            return "success";   
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:58:31.643

改变动作1如下

```
public class action1 extends ActionSupport implements SessionAware{ 
public String execute() throws Exception{
    System.out.println("original"+ pSB.getvalue() ); // getting 10
    pSB.setvalue((pSB.getvalue()*10));

    System.out.println("modified"+ pSB.getvalue() ); // getting 100 
            return "success";   
} 
```

错误是您已经计算了 action1 类中的值，但没有将其更新回会话

# vb.net - 如何通过字符串从资源中选择图像？

> ID：15891449
> 
> 赞同：0
> 
> 时间：2013-04-09T00:43:31.350
> 
> 标签：vb.net, embedded-resource

我正在编写一个 pokedex 类型的交易作为我班级的练习。基本上，我有一个名为“口袋妖怪”的课程。该类的属性之一是“ImgName”，我想用它来显示来自同名资源的图像。

VB 不允许我将 ImgName 作为字符串调用，然后使用 'My.Resources.ImgName'

我该怎么做，或者有什么替代方案？我希望它由 pokemon 对象中的属性确定，并且我不想在 if-elseif 语句中为每个单独的 pokemon 进行硬编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T00:51:03.757

一种方法是您可以将资源文件添加到您的项目中。然后将资源放入其中。您将能够像这样解决它：

```
My.Resources.Resource1.ImgName 
```

`Resource1`是你的资源文件名，`ImgName`是这里的资源名。但是你需要为每次调用做硬编码。但是，您可以通过类型检查获得完整的智能感知支持。

如果您不想要硬代码，这里是我的生产代码的精简版本：

```
Imports System.Reflection
Imports System.Xml.Linq

Public Class EmbeddedResourceManager
  Private Class EmbeddedResourceManagerCore
    Private Shared _executingAssembly As Assembly
    Private Shared _resourcePrefix As String

    Shared Sub New()
      _executingAssembly = Assembly.GetExecutingAssembly
      _resourcePrefix = _executingAssembly.GetName.Name & "."
    End Sub

    Public Shared Function GetStream(resourceRelName As String) As IO.Stream
      Return _executingAssembly.GetManifestResourceStream(_resourcePrefix & resourceRelName)
    End Function
  End Class

  Public Shared Function GetImage(ByVal resourceName As String) As Bitmap
    Return New Bitmap(EmbeddedResourceManagerCore.GetStream(resourceName))
  End Function
End Class 
```

因此，只要您需要，只需调用`EmbeddedResourceManager.GetImage`并传递资源名称，就像它出现在您的项目中一样（您的图像文件需要附加到项目中）。您需要将有`Build Action`问题的图像设置为`Embedded Resource`.

这会将您的所有资源堆积到一个可执行文件中，根据具体情况，它既有优点也有缺点。不过，它应该可以满足您的需求，因为我假设不同口袋妖怪的数量是有限的，并且在整个游戏中不会改变（即从第 3 方服务器实时下载等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T04:09:05.653

BackgroundImage = My.Resources.ResourceManager.GetObject(aString)

比以前的答案容易 10 倍恕我直言

# php - 使用 PHPUnit 时 PHP 不显示错误

> ID：15891451
> 
> 赞同：0
> 
> 时间：2013-04-09T00:43:37.437
> 
> 标签：php, phpunit

从终端使用 PHPUnit 时，如果 php 文件中存在 PHP 错误，则 PHP 不会报告任何错误。这是我正在使用的示例文件：

```
<?php

class AssertionsTest extends PHPUnit_Framework_TestCase
{
    public function testException()
    {
        new NonExistantClass;
    }
} 
```

显然 NonExistantClass 不存在。运行 PHPUnit 时，我得到的只是：

```
jamesjeffery$ phpunit AssertionsTest.php
    PHPUnit 3.7.19 by Sebastian Bergmann. 
```

没有 PHP 错误。

我正在使用 PHP 5.4.10。我将错误报告设置为 E_ALL 并将 display_errors 设置为 on。

知道会发生什么吗？

# r - 从函数内部获取所有函数参数的列表

> ID：15891459
> 
> 赞同：9
> 
> 时间：2013-04-09T00:44:48.757
> 
> 标签：r

有没有办法从函数中获取*所有*函数参数？

`match.call()`不返回设置了默认值但未覆盖的参数。例如：

```
xf <- function (a, b="Hi", c=TRUE) {
  print(as.list(match.call(expand.dots=FALSE)))
}

>xf(3)
[[1]]
xf

$a
[1] 3 
```

我正在编写一个带有调用现有函数的函数的包，但我希望能够设置不在现有函数上的默认值。（我打算使用来自的列表`match.call`，将其传递给另一个函数`do.call`并返回结果。

**更新：**一个与 S3 方法相关的有趣问题。我创建了一个新的 S3 方法，并使用了@Ferdinand.kraft 的答案。`as.list(environment(), all.names=TRUE)`all.names 参数保留列表中以 a 开头`.`的名称。事实证明，方法调度向函数环境添加了几个参数，包括`.Generic` `.Class` `.Method`和其他几个参数。如果将这些传递给`do.call`. 其他答案之一可能是一个更好的全方位解决方案，但我喜欢`as.list(environment())`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-09T01:38:16.960

您还可以在函数开头返回环境：

```
xf <- function (a, b="Hi", c=TRUE) {
  as.list(environment(), all=TRUE)
} 
```

结果：

```
> xf(a=1)
$a
[1] 1

$b
[1] "Hi"

$c
[1] TRUE 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T00:55:01.643

您可以使用`ls`和`mget`。`ls`将（默认情况下）列出调用框架中的对象（在这种情况下，在函数内），`mget`将获取这些对象。

例如

```
xf <- function(a,b='Hi',c){
  # this gets the current definitions of `a`, `b`, and `c` 
  incall <-mget(ls())
  incall}

 xf(3)
## $a
## [1] 3
## 
## $b
## [1] "Hi"
##
## $c 
```

然后你可以使用`do.call(whatever, incall)`

# jquery - jQuery Ajax 不传递变量

> ID：15891461
> 
> 赞同：0
> 
> 时间：2013-04-09T00:44:58.207
> 
> 标签：jquery

我正在尝试通过 ajax 将一些数据传递给一个函数，以便我可以取消设置 $_SESSION 值并且它不起作用。jQuery 部分正常工作并`<div>`从页面中“删除”。但是，后台的 ajax 不起作用。我添加了用于测试的 javascript 警报，但没有触发。

jQuery代码：

```
 //This function "removes" an individual order item in the basket
      $("#basketItemsWrap").on("click", "li img.delete", function(event) {
        var productIDValSplitter   = (this.id).split("_");
        var productIDVal       = productIDValSplitter[1];  
        $("#notificationsLoader").show();
        $.ajax({  
        type: "POST",  
        url: "includes/ajax/functions.php",
        data: { productID: productIDVal, action: "deleteFromBasket"},  
        success: function(theResponse) {

          $("#order_" + productIDVal).hide("slow",  function() {
            $(this).remove();
            Calc();
          });
          $("#notificationsLoader").hide();
        },
        complete: function(){
        },
        error: function(xhr, status, error){
            var err = eval("(" + xhr.responseText + ")");
            alert(err.Message);
        }
        }); 
      }); 
```

函数.php代码：

```
<?php
session_start();

if ($_POST['action'] == "deleteFromBasket"){
?>
    <script type="text/javascript">
    alert("test");    
    </script>
<?php
    unset($_SESSION['order_parts'][$_POST['productID']]);
}
?> 
```

显然它没有正确传递“deleteFromBasket”，因为它没有进入 if 检查。

另外，如果添加“echo $_POST['action'];” 在functions.php 上它不显示任何内容。

# python - 递归地将文件附加到python中的zip存档

> ID：15891462
> 
> 赞同：0
> 
> 时间：2013-04-09T00:45:17.170
> 
> 标签：python, recursion, zip

在 Windows 上的 Python 2.7.4 中，如果我的目录结构如下：

```
test/foo/a.bak
test/foo/b.bak
test/foo/bar/c.bak
test/d.bak 
```

我使用以下内容将它们添加到**现有**存档中，以使“d.bak”位于存档的根目录：

```
import zipfile
import os.path
import fnmatch

def find_files(directory, pattern):
    for root, dirs, files in os.walk(directory):
        for basename in files:
            if fnmatch.fnmatch(basename, pattern):
                filename = os.path.join(root, basename)
                yield filename

if __name__=='__main__':
    z = zipfile.ZipFile("testarch.zip", "a", zipfile.ZIP_DEFLATED)

    for filename in find_files('test', '*.*'):
        print 'Found file:', filename
        z.write(filename, os.path.basename(filename), zipfile.ZIP_DEFLATED)

    z.close() 
```

zip 文件的目录是平面的。***仅***当其中存在子目录时才会创建`foo/`目录（如果我 exclude ，它不会创建目录。如果包含，则创建但如果有意义则不创建），但没有子目录或文件：*`test/foo/bar/c.bak``foo/``foo/bar/`*

 *```
foo/
a.bak
b.bak
c.bak
d.bak 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T00:50:14.863

问题是您明确要求它展平所有路径：

```
z.write(filename, os.path.basename(filename), zipfile.ZIP_DEFLATED) 
```

如果您查看[文档](http://docs.python.org/2/library/zipfile#zipfile.ZipFile.write)，则默认`arcname`值为：

> 与 相同`filename`，但没有驱动器号并删除了前导路径分隔符

但是你用`os.path.basename(filename)`. （如果您不知道做什么[`basename`](http://docs.python.org/2/library/os.path#os.path.basename)，它会返回“最后一个路径名组件”。如果您不想要最后一个路径名组件，请不要调用`basename`。）

如果您这样做`z.write('test/foo/bar/c.bak')`，它将创建一个名为 zip 的条目`test/foo/bar/c.bak`，但如果您这样做`z.write('test/foo/bar/c.bak', 'c.bak')`，它将创建一个名为 .zip 的 zip 条目`c.bak`。由于您对所有条目都这样做，因此整个事情最终都变平了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:40:21.313

我想到了。正如**abarnet**指出的那样，我误读了 zipfiles 上的文档。使用以下函数，我可以为 zip 文件创建正确的存档名称：

```
def createArchName(path):
    line = path
    if "\\" in line:
        ''' windows '''
        discard, val = line.split("\\", 1)
        return val
    else:
        ''' unix '''
        discard, val = line.split("/", 1)
        return val 
```

对于有兴趣的人，完整的代码如下：

```
import urllib2
import zipfile
import os.path
import fnmatch

def find_files(directory, pattern):
    for root, dirs, files in os.walk(directory):
        for basename in files:
            if fnmatch.fnmatch(basename, pattern):
                filename = os.path.join(root, basename)
                yield filename

def createArchName(path):
    line = path
    if "\\" in line:
        ''' windows '''
        discard, val = line.split("\\", 1)
        return val
    else:
        ''' unix '''
        discard, val = line.split("/", 1)
        return val

if __name__=='__main__':
    if not os.path.exists("test"):
        os.mkdir("test")

    z = zipfile.ZipFile("testarch.zip", "a", zipfile.ZIP_DEFLATED)

    for filename in find_files('test', '*.*'):
        archname = createArchName(filename)
        print 'Found file:', archname
        z.write(filename, archname, zipfile.ZIP_DEFLATED)

    z.close() 
```*

# php - 如何重写 $_REQUEST 中的所有变量？

> ID：15891465
> 
> 赞同：-3
> 
> 时间：2013-04-09T00:45:32.743
> 
> 标签：php, arrays

我想知道是否有一种快速的方法可以`$_REQUEST`通过函数运行它们来循环并更改所有提交的变量。

例如，假设我被赋予了`$_REQUEST['a']`谁的价值`stuff`和`$_REQUEST['b']`谁的价值`more stuff`。我想重写我的整个`$_REQUEST[]`数组，使得 become 的值和become`$_REQUEST['a']`的`myfunction('stuff')`值。我**不**知道传递给的每个元素的名称`$_REQUEST['b']``myfunction('more stuff')`**`$_REQUEST.`**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:47:02.680

您可以使用该`array_walk`函数并传递数组。示例是：

```
<?php
$fruits = array("d" => "lemon", "a" => "orange", "b" => "banana", "c" => "apple");

function test_alter(&$item1, $key, $prefix)
{
    $item1 = "$prefix: $item1";
}

function test_print($item2, $key)
{
    echo "$key. $item2<br />\n";
}

echo "Before ...:\n";
array_walk($fruits, 'test_print');

array_walk($fruits, 'test_alter', 'fruit');
echo "... and after:\n";

array_walk($fruits, 'test_print');
?> 
```

同样，对于您的问题，您可以这样做：

```
function stuff() {
   ///
} 
```

现在`$_REQUEST`以这种方式引导您完成该功能：

```
array_walk($_REQUEST, 'stuff', 'fruit'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T00:52:17.447

就个人而言，我对修改*特殊* `$_REQUEST`数组感觉不好，所以我会创建另一个具有修改值的数组 -*以防万一*：

```
$requestProcessed = array_map('myfunction', $_REQUEST); 
```

这样，您可以获得修改后的值*并且*仍然可以访问原始值（如果您碰巧需要它们）。

如果您可以修改`$_REQUEST`数组本身，那么`array_walk`更好（正如 Praveen Kumar 所建议的那样）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T00:48:04.910

首先，您正在做的事情似乎是个坏消息，因为 REQUEST 存储了各种东西，例如 $_COOKIES、$_POST 和 $_GET 变量等等，但是如果您真的想这样做，那么您可以这样做：

```
foreach ($_REQUEST as $key => $val) {
    $_REQUEST[$key] = myFunction($val);
} 
```**

# java - 如何允许用户输入java

> ID：15891466
> 
> 赞同：1
> 
> 时间：2013-04-09T00:45:37.463
> 
> 标签：java, arrays, list, input, max

我不知道如何制作我的代码以便它允许用户输入信息，我知道如何创建一个数组列表数据库，但不知道如何制作它，以便一旦用户输入信息并按下“输入”数据库已完成...有人可以帮帮我吗？（在Java中）

感谢用户输入的开始提示！他们很有帮助！好的，所以现在我有：

```
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class BestStudent 
{
private String studentName;
private String studentGPA;

public BestStudent()
{

}

public BestStudent(String nName, String nGPA)
{
    this.studentName = nName;
    this.studentGPA = nGPA;
}

public void setStudentName(String newStudentName)
{
    studentName = newStudentName;
}

public void setStudentGpa(String newStudentGPA)
{
    studentGPA = newStudentGPA;
}

public String getStudentName()
{
    return studentName;
}

public String getStudentGPA()
{
    return studentGPA;
}

public static void main(String[] args)
{
    List<BestStudent> students = new ArrayList<BestStudent>();
    Scanner input = new Scanner(System.in);

    System.out.println("Enter number of students");
    int countStudents = input.nextInt();

    for(int i = 0; i < countStudents; i++)
    {
    BestStudent student = new BestStudent();
    System.out.println("Enter student details" + i);

    System.out.println("Enter student name");
    student.setStudentName(input.next());

    System.out.println("Enter student GPA");
    student.setStudentGpa(input.next());
    students.add(student);

    }

}
} 
```

有没有办法让程序计算输入的最高 GPA？我不是在寻找任何人来给我答案，只要朝着正确的方向推动就会很棒，非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:57:44.130

既然你知道如何创建一个，`ArrayList`我就不需要再过一遍了。

在[`Scanner`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)课堂上看。它使输入变得容易。

这是一个简短的例子：

```
Scanner input = new Scanner(System.in);
System.out.print("Input: ");
String str = input.nextLine();
System.out.print(str); 
```

不要忘记导入`java.util.Scanner`.

代码基本上会实例化一个新的 Scanner 对象，然后打印出“Input:”并等待输入。一旦你在尝试了你所拥有的之后按下回车，它就会打印出你输入的内容。

# php - php 用间隔做某事

> ID：15891467
> 
> 赞同：-1
> 
> 时间：2013-04-09T00:45:59.290
> 
> 标签：php, continuous

我有一个表格，这样说：

```
<form name="form1" action="" method="post">
<input type="text" name="tfcari" />
<input type="submit" name="btcari" />
</form>

<?php
if (isset($_POST['btcari'])) {

echo $_POST['tfcari'];  

?> 
```

如何这样做：

> 点击提交 - 回显文本 - 等待 5 秒 - 回显文本（自动） - 等待 5 秒 - 回显文本（自动） - ...

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:12:26.453

PHP 在发送到网站之前进行预处理，所以如果你要设置一个 sleep 方法，它只会延迟页面显示那么长时间。

最简单的方法是使用 jQuery 进行 ajax 调用，然后使用 setTimeout 每 5 秒回显一次文本：

```
// Assuming jQuery is linked
$(function() {
    // Connect to the php file
    $.ajax({
        url: 'php-file-with-tfcari-var.php',
        type: 'POST',
        success: function(data) {
            // data is what the ajax call returns, let's assume it's the $_POST variable from php
            var tfcari = data.tfcari;
            // Now you can loop every 5 seconds with a self calling setTimeout method
            var poll = (setTimeout(function() {
                window.document.write(tfcari);
            }, 5000)();
        }
    });
}); 
```

# c# - 全局 MediaElement 一旦停止就不会重新启动，wp7

> ID：15891468
> 
> 赞同：0
> 
> 时间：2013-04-09T00:45:59.487
> 
> 标签：c#, silverlight, windows-phone-7, xaml, windows-8

我有一个在应用程序级别运行背景音乐的应用程序，因此当用户浏览页面时音乐不会停止。但是，我也使用 VideoBrush。正如我发现的那样，我不能让两者同时运行，因为 VideoBrush 在设置其源时会崩溃。

我发现，如果在用户尝试使用 VideoBrush 时将 MediaElement 的源设置为 null，则一切正常。当然音乐停止了，这让我很懊恼，但没有发生错误。

但是，当用户从 VideoBrush 上轻按时，我试图让音乐重新开始（开始很好）但无济于事。简而言之，我无法让音乐重新开始。

这是我的代码：

**应用程序.xaml**

```
 <Application.Resources>

        <MediaElement x:Key="GlobalMedia" Source="minutelongsong.mp3"
         MediaEnded="MediaElement_MediaEnded" Visibility="Collapsed" />

    </Application.Resources> 
```

**应用程序.xaml.cs**

```
 public static MediaElement GlobalMediaElement
    {
        get { return Current.Resources["GlobalMedia"] as MediaElement; }
    }

    private void Application_Launching(object sender, LaunchingEventArgs e)
    {
        var AppMediaElement = App.GlobalMediaElement;
        AppMediaElement.Position = TimeSpan.Zero;
        AppMediaElement.Play();
    }

    private void MediaElement_MediaEnded(object sender, RoutedEventArgs e)
    {
        var AppMediaElement = App.GlobalMediaElement;
        AppMediaElement.Position = TimeSpan.Zero;
        AppMediaElement.Play();
    } 
```

现在是使用 VideoBrush 的页面。

**主页.xaml**

```
 <Canvas x:Name="viewfinderCanvas" Width="480" Height="800" HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="Collapsed">
        <Canvas.Background>
            <VideoBrush x:Name="videoBrush" Stretch="Fill">
                <VideoBrush.RelativeTransform>
                    <CompositeTransform x:Name="previewTransform"
                        CenterX=".5"
                        CenterY=".5" />
                </VideoBrush.RelativeTransform>
            </VideoBrush>
        </Canvas.Background>
    </Canvas> 
```

**MainPage.xaml.cs**

```
 private void Button_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {

        var AppMediaElement = App.GlobalMediaElement;
        AppMediaElement.Pause();
        AppMediaElement.Stop();
        AppMediaElement.Source = null; //set it to null to allow the cam to be set.

        if ((PhotoCamera.IsCameraTypeSupported(CameraType.Primary)))
        {
           viewfinderCanvas.Visibility = Visibility.Visible;
           cam = new PhotoCamera(CameraType.Primary);
           if (Orientation == PageOrientation.PortraitUp || Orientation == PageOrientation.PortraitDown || Orientation == PageOrientation.Portrait)
           {

               videoBrush.RelativeTransform = new CompositeTransform() { CenterX = 0.5, CenterY = 0.5, Rotation = 90 };
           }

           videoBrush.SetSource(cam);
        } 
```

当用户通过点击屏幕按钮退出相机 VideoBrush 时，将触发此代码。它处理凸轮，并在用户允许音乐的情况下尝试再次播放音乐。**但是，即使使用此代码，音乐也不会播放。**

```
 private void zoomout_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        if (cam != null)
        {
            cam.Dispose();
        }

        viewfinderCanvas.Visibility = Visibility.Collapsed;

        if (allowingamemusic == true)
        {
            var AppMediaElement = App.Current.Resources["GlobalMedia"] as MediaElement;
            AppMediaElement.Source = new Uri("minutelongsong.mp3", UriKind.RelativeOrAbsolute);
            AppMediaElement.Position = TimeSpan.Zero;
            AppMediaElement.Play(); //despite this here, it will not play. No error thrown.
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T18:33:58.280

我在手机应用程序的同一页面中来回切换捕获图像和音频。

您非常接近，但您还必须将 videoBrush 源设置为其他内容，否则它不会释放资源。

因此，当您想使用 MediaElement 时，首先要像这样处理相机：

```
cam.Dispose();
viewfinderBrush.SetSource(new MediaElement()); //so it will let go of cam
cam = null;
//now set source for MediaElemet and do whatever 
```

当您再次使用相机时：

```
mediaElement.Stop();
mediaElement.Source = null; //or else setting the source for the video brush will fail
//now set source for videoBrush and do whatever 
```

老问题，但希望这会对某人有所帮助......我花了几次尝试才弄清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:08:43.823

在昨晚写完这篇文章后，今天早上终于测试了它，我看到可能发生了什么，但仍然遇到音乐停止后无法重播的问题。

MediaElement.MediaFailed 一直被调用。我发现它正在调用：AG_E_NETWORK_ERROR。当 Zune 正在运行并且我的设备通过 USB 连接到同一台计算机时会引发此错误。

有人建议我将我的应用程序部署到我的手机，关闭 zune，然后断开 USB。我试过这个，但我尝试重播后仍然无法播放音乐。这也发生在模拟器上。

仍然抛出相同的 AG_E_NETWORK_ERROR。

从那以后，我已经放弃了这个，因为我花了几个小时没有找到如何做到这一点。所以，我已经使用了 MediaPlayer 类，并将改用它。

------ 如果有人解决了这个问题，我会给你一个正确答案的复选标记。

# ios - 在派生数据中找不到 .app 文件

> ID：15891469
> 
> 赞同：16
> 
> 时间：2013-04-09T00:45:59.903
> 
> 标签：ios, xcode, ios6, xcode4.6

尝试编译我的项目时出现此错误，想知道是否有人知道如何修复它？

我已经阅读了有关此类链接器错误的 SO 和互联网上其他地方的所有答案。我已经尝试了很多解决方案，包括非常流行的 --delete xcode 中的派生数据，完全退出 xcode，在命令行中再次删除它，然后重新启动 xcode - 仍然没有。这是在我尝试将一个设备连接到我的计算机（我已经从组织者中删除）之后开始的，这是一个朋友尝试在他的 iPad 上运行它。我已经束手无策了，不能再在这上面浪费时间了。关于如何解决它的任何想法？

Products 文件夹中的应用文件是红色的。

编辑：更多信息：实际的应用程序没有被构建并放在 Library/Developer/{app}/Build/Product 文件夹中。我尝试重新连接设备并从苹果网站手动添加配置文件，然后在选择设备时尝试构建->存档应用程序。我仍然得到错误。我已经尝试在 Schemes 中从调试更改为发布并执行所有这些操作，但我仍然收到错误消息。我尝试卸载 xcode 并重新安装它，从计算机上完全删除应用程序（包括派生数据），然后从 Git 中拉回来，我得到了同样的错误。

> ld /Users/mischabuckler/Library/Developer/Xcode/DerivedData/TRx-clxlusutxvcrlkddtqwtoxibcmhc/Build/Products/Debug-iphonesimulator/UnitTests.octest/UnitTests normal i386 cd /Users/mischabuckler/Desktop/Git/TRx setenv IPHONEOS_DEPLOYMENT_TARGET 6.1 setenv PATH " /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin :/sbin" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -bundle -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/开发者/SDKs/iPhoneSimulator6.1。sdk -L/Users/mischabuckler/Library/Developer/Xcode/DerivedData/TRx-clxlusutxvcrlkddtqwtoxibcmhc/Build/Products/Debug-iphonesimulator -F/Users/mischabuckler/Library/Developer/Xcode/DerivedData/TRx-clxlusutxvcrlkddtqwtoxibcmhc/Build/Products/ Debug-iphonesimulator -F/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk/Developer/Library/Frameworks -F/Applications/Xcode.app/Contents/Developer/库/框架 -filelist /Users/mischabuckler/Library/Developer/Xcode/DerivedData/TRx-clxlusutxvcrlkddtqwtoxibcmhc/Build/Intermediates/TRx.build/Debug-iphonesimulator/UnitTests.build/Objects-normal/i386/UnitTests.LinkFileList -bundle_loader /用户/mischabuckler/库/开发人员/Xcode/DerivedData/TRx-clxlusutxvcrlkddtqwtoxibcmhc/Build/Products/Debug-iphonesimulator/TRx。app/TRx -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=6.1 -framework SenTestingKit -framework UIKit -framework Foundation -o /Users/mischabuckler/库/开发者/Xcode/DerivedData/TRx-clxlusutxvcrlkddtqwtoxibcmhc/Build/Products/Debug-iphonesimulator/UnitTests.octest/UnitTests
> 
> ld：找不到文件：/Users/mischabuckler/Library/Developer/Xcode/DerivedData/TRx-clxlusutxvcrlkddtqwtoxibcmhc/Build/Products/Debug-iphonesimulator/TRx.app/TRx clang：错误：链接器命令失败，退出代码为 1（使用 - v 查看调用）

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2014-10-13T05:06:37.550

当您重命名主目标并且测试目标尚未更新时会发生这种情况。检查测试目标中的构建设置并确保路径指向新文件夹。例如，如果您将目标 SuperAwesome 重命名为 Super，则您的测试目标在 SuperAwesome.app/ 文件夹中的文件应该更新为 Super.app/

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-27T16:01:36.830

好的，虽然很难发现，但您在上面发布的消息不是构建您的应用程序，而是您的单元测试。它还在输出窗口的顶部提到了它，但人们并不期望它会改变。

您可能已经重命名了您的方案，并且这样做的单元测试指向您的真实构建或其他东西。您的应用程序实际上可能构建得很好，但是您的单元测试目标失败了。

如果问题是您一直在重命名目标，那么在您的 UnitTest 方案中，转到构建设置并搜索 TEST，这应该会显示 TEST HOST 的设置。确保这些值指向您希望调用测试应用程序的任何内容，而不是主可执行文件。

对我来说，这只是在我的测试目标的 TEST_HOST 的调试和发布设置上附加“测试”的情况。

现在这一切都为我构建了，尽管令人讨厌的是它实际上正在构建两个目标 - 至少它们都可以编译。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-20T07:03:28.817

因此，对于发现此问题并感到沮丧的其他人，我最终所做的是删除我的应用程序和单元测试的目标依赖项，然后构建一次应用程序，然后重新添加它们并再次构建应用程序，它运行良好.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-12T08:22:53.147

尝试复制目标，并使用目标的副本运行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-03T21:10:53.463

我讨厌 Mach-o 链接器错误，它令人沮丧，无论如何，我通过创建一个新方案遇到了同样的问题，它对我来说就像魔术一样。 [![添加新方案](https://i.stack.imgur.com/v1WqR.png)](https://i.stack.imgur.com/v1WqR.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-11T08:54:48.840

转到项目 --> 构建设置 --> 测试 --> 测试主机 删除测试主机中的所有路径，然后进行干净的构建。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-09-19T22:16:34.663

尝试运行 Clean 然后构建/运行项目

[![在此处输入图像描述](https://i.stack.imgur.com/jTosN.png)](https://i.stack.imgur.com/jTosN.png)

# javascript - 每次通过 javascript 加载时刷新页面

> ID：15891482
> 
> 赞同：0
> 
> 时间：2013-04-09T00:47:05.157
> 
> 标签：javascript, json

我正在创建一个使用 JQuery 的 Web 应用程序。在我的 javascript 中，我的 HTML 中有一个触发该函数的 onclick 事件调用的函数：

```
$('#secondPage').load('pages/calendar.html'); 
```

它调用的 html 文件包含从 .json 文件加载的 javascript。问题是，当您通过 javascript 离开页面时，当您返回 calendar.html 页面时，它会被缓存，因此不会从 .json 文件刷新。

有没有办法添加一些东西来调用该页面或.json的刷新？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:54:43.677

不确定您使用什么方法在 calendar.html 中加载 JSON 内容，但我假设您使用的是 jQuery 函数。

您可以使用 jQuery.ajax() 加载 JSON 内容并将缓存设置为 false，以便浏览器不缓存结果： [http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:54:41.190

我不知道这是否会这样做，但为了避免缓存 AJAX 调用，我使用随机参数。

浏览器缓存具有相同参数值的调用。所以我在我的调用中添加了一个随机参数，这样浏览器就不会缓存它们。只是为了这个，我不会在任何东西上使用那个参数。

你可以这样做：

```
$('#secondPage').load('pages/calendar.html?random=' + Math.random()); 
```

说得通？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T01:02:47.460

这非常有用：

```
$.ajaxSetup({ cache: false }); 
```

它禁用对 jquery 进行的 ajax 调用的缓存。

# emacs - 如何将emacs中的Cx前缀重新映射到专用键？

> ID：15891483
> 
> 赞同：0
> 
> 时间：2013-04-09T00:47:13.733
> 
> 标签：emacs

许多 emacs 命令以 Cx 或 Cc 开头。我发现我从不使用右移键。所以我在想是否可以将 Cx 重新映射到 Shift。要打开文件，我可以使用 Shift-Ctrl-f 而不是 Cx Cf。在这里，我更喜欢 Shift-Ctrl-f 而不是 Shift Ctrl-f。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:19:46.133

机器之间通过 SSH 创建的链接不传输 shift 键的按下和释放；仅当与 Shift 一起按下另一个键时才会传输一个字符，并且该字符（例如，当按下 Shift 和“h”时为大写 H）对于远程机器来说无论使用左移还是右移看起来都是相同的。

因此，要使右 Shift 可见，您必须告诉终端程序将其视为不同的键——或者甚至可能必须告诉 Mac 系统设置它不再是 Shift？

是否可以向您的 Mac 解释按下 Shift 会发送字符 Control-X？那将用一块石头杀死两只鸟！

# jquery - JQuery 旋转和 Ajax 保存

> ID：15891486
> 
> 赞同：1
> 
> 时间：2013-04-09T00:47:41.567
> 
> 标签：jquery, ajax

有一点 jquery 功能的问题。只是不确定在哪里放置函数的第二部分以使其工作。有人可以帮忙处理流程吗？

```
<div id="image-tools"><button type="button" id="rotate">Rotate</button></div>
    <div id="image-frame"><img id="image" src="../../images/DBImages/<?php echo $image_data['image_id'] ?>.jpg"></div>

    <script type="text/javascript" src="includes/jQueryRotate.2.1.js"></script>

<script type="text/javascript">
    function rotate() {
    var value = 0;
    $("#rotate").rotate({
        bind:
            {
            click: function() {
                value+=90;
                $("#image").rotate({ angle: value });
                }
            }
    },  function() {
                $.post('script/image_rotate_save.php',
                {
                    file: $("#image").attr('src'),
                    value: value
                }, function(response) {
                    console.log(response)
                });
        });
}
</script> 
```

它是做什么的？您单击一个按钮将图像旋转 90 度，旋转功能旋转页面上的图像（这工作正常），然后 ajax 功能将服务器上的图像更新到新的方向。

即使我将 url 更改为 image_rotate_save.php，我也没有收到 404 错误，据我所知，函数的 ajax 部分甚至没有触发。

有任何想法吗？

# c# - 如何在我的 WinForms 应用程序中实施有效的撤消/重做？

> ID：15891487
> 
> 赞同：2
> 
> 时间：2013-04-09T00:47:47.003
> 
> 标签：c#, winforms, visual-studio, richtextbox, undo-redo

我有一个 WinForm 文本编辑器。

我希望能够允许用户在富文本框中撤消和重做更改，就像在 Microsoft Word 中一样。

过去一周左右我一直在研究如何做到这一点，大多数结果似乎都与图形应用程序有关。

标准的richTextBox1.Undo(); 给出令人失望的结果，因为它撤消了用户编写的所有内容。

有人知道我如何实现有效的撤消/重做吗？最好是逐字撤消/重做动作，而不是逐字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:28:05.140

这是一个非常基本的想法，我确信可以进行许多改进。

我将创建一个`String Array`并增量地存储数组中的`RichTextBox`（在`TextChanged`事件中，根据您自己的条件）的值。当你存储值时，增加一个计数器的值，比如说`stackcount`。当用户撤消时，递减`stackcount`并设置`RichTextBox.Text = array(stackcount)`。如果他们重做，则增加计数器的值并再次设置该值。如果他们撤消然后更改文本，则清除所有值。

我相信很多其他人可能对此有更好的建议/更改，所以请在评论中发表，我会更新，或自己编辑！

**C# 中的示例**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace RedoUndoApp
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    public string[] RTBRedoUndo;
    public int StackCount = 0;
    public int OldLength = 0;
    public int ChangeToSave = 5;
    public bool IsRedoUndo = false;

    private void Form1_Load(object sender, EventArgs e)
    {
        RTBRedoUndo = new string[10000];
        RTBRedoUndo[0] = "";
    }

    private void undo_Click(object sender, EventArgs e)
    {
        IsRedoUndo = true;
        if (StackCount > 0 && RTBRedoUndo[StackCount - 1] != null)
        {
            StackCount = StackCount - 1;
            richTextBox1.Text = RTBRedoUndo[StackCount];
        }
    }

    private void redo_Click(object sender, EventArgs e)
    {
        IsRedoUndo = true;
        if (StackCount > 0 && RTBRedoUndo[StackCount + 1] != null)
        {
            StackCount = StackCount + 1;
            richTextBox1.Text = RTBRedoUndo[StackCount];
        }

    }

    private void richTextBox1_TextChanged(object sender, EventArgs e)
    {
        if (IsRedoUndo == false && richTextBox1.Text.Substring(richTextBox1.Text.Length - 1, 1) == " ")//(Math.Abs(richTextBox1.Text.Length - OldLength) >= ChangeToSave && IsRedoUndo == false)
        {
            StackCount = StackCount + 1;
            RTBRedoUndo[StackCount] = richTextBox1.Text;
            OldLength = richTextBox1.Text.Length;
        }
    }

    private void undo_MouseUp(object sender, MouseEventArgs e)
    {
        IsRedoUndo = false;
    }

    private void redo_MouseUp(object sender, MouseEventArgs e)
    {
        IsRedoUndo = false;
    }
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T01:03:52.063

一种方法是使用 TextChanged 事件将richtextbox.text 的内容作为堆栈定期存储在数组或列表中。当您撤消时，“弹出堆栈”并将堆栈上的最新版本复制到richtextbox.text 中。

TextChange 可以确定是否应将更改保存到堆栈中，是新单词、新行还是新字符。

# php - 我的第一个 php 代码使用 GET 出错

> ID：15891491
> 
> 赞同：1
> 
> 时间：2013-04-09T00:48:27.447
> 
> 标签：php, mysql

我正在编写我的第一个服务器端 api，我的代码给了我错误......

这是php代码（我使用的是get方法）

```
<?php 

//Check if there is a function
if(function_exists($_GET['function'])) {

    //If it equals loadAll
    if ($_GET['function']=='loadAll'){

        //Then call the function and pass it the parameter it needs
        $_GET['function']($_GET['entity']);
    }

    //If found, call the function with value as a parameter
   $_GET['function']($_GET['value']);
}

/**
 * This method loads all of an object from the DB
 */
function loadAll($entity){

    //Variables for connecting to database.
    //These variable values come from hosting account.
    $hostname = "------";
    $username = "-----";
    $dbname = "-----";

    //These variable values need to be changed by you before deploying
    $password = "-----";

    //Connecting to your database
    mysql_connect($hostname, $username, $password) OR DIE ("Unable to 
    connect to database! Please try again later.");
    mysql_select_db($dbname);

    //Fetching from your database table.
    $query = "SELECT * FROM $entity";
    $result = mysql_query($query);

    $myJson=array();
    //Parse to array
    while($row = mysqli_fetch_array($result)){
        $myJson[]=$row;
    }

    //Close connection
    mysqli_close($con);

    //Encode and send response
    echo json_encode($myJson);
}
?> 
```

我的获取网址是

```
http://someURL.com/api/index.php?function=loadAll&entity=School 
```

我的错误是：

```
Warning: mysqli_fetch_array() expects parameter 1 to be mysqli_result, resource given in D:\hosting\somenumber\html\api\index.php on line 42

Warning: mysqli_close() expects parameter 1 to be mysqli, null given in D:\hosting\somenumber\html\api\index.php on line 47
[]
Fatal error: Function name must be a string in D:\hosting\somenumber\html\api\index.php on line 14 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T00:51:59.570

mysql 和**mysqli**函数不可互换，您需要使用所有 mysql 或所有 mysqli 函数。

例如

```
//Connecting to your database
mysqli_connect($hostname, $username, $password) OR DIE ("Unable to 
connect to database! Please try again later.");//I changed this
mysqli_select_db($dbname);//I changed this
//Fetching from your database table.
$query = "SELECT * FROM $entity";
$result = mysqli_query($query);//I changed this

$myJson=array();
//Parse to array
while($row = mysqli_fetch_array($result)){  
    $myJson[]=$row;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T00:56:09.983

你混淆了 mysql_query 和 mysqli_fetch_array。只选择 mysqli，重写查询和连接。mysql_query 自 PHP 5.5.0 起已弃用，将来将被删除。

# javascript - 谷歌地图javascript api长按行为被缩放捏分解

> ID：15891493
> 
> 赞同：1
> 
> 时间：2013-04-09T00:48:39.397
> 
> 标签：javascript, google-maps-api-3

我知道谷歌地图中没有“长按”事件。但是我以某种方式使用其他事件的组合来模拟这种行为。按下一段时间后，会出现一个带有选项的上下文菜单。但是，在平板电脑等支持捏合缩放的设备中，当我用两根手指放大或缩小后，当我停止触摸设备时，菜单意外出现。两个并发的触摸事件很可能会干扰另一个。任何有建议的人表示赞赏。以下是相关代码：

```
 var contextMenuOptions={};
        contextMenuOptions.classNames={menu:'context_menu', menuSeparator:'context_menu_separator'};

        var menuItems=[];
        menuItems.push({className:'context_menu_item', eventName:'start_click', label:'From here'});
        menuItems.push({className:'context_menu_item', eventName:'end_click', label:'To here'});                
        menuItems.push({className:'context_menu_item', eventName:'from_current_loc', label:'From my location'});
        menuItems.push({className:'context_menu_item', eventName:'to_current_loc', label:'To my location'});            
//      menuItems.push({className:'context_menu_item', eventName:'center_map_click', label:'Center map here'});
        contextMenuOptions.menuItems=menuItems; 

        //  create the ContextMenu object
        var contextMenu=new ContextMenu(map, contextMenuOptions);

          google.maps.event.addListener(map, "mousedown", function(event){
                contextMenu.hide();
                sayac = setTimeout(function(){ contextMenu.show(event.latLng); }, 500);                 
          });  
          // main refers to map container
          document.getElementById("main").addEventListener("touchend",function(){ clearTimeout(sayac); });
          document.getElementById("main").addEventListener("touchmove", function(){ clearTimeout(sayac); });
          document.getElementById("main").addEventListener("click",function(e){ e.preventDefault(); }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:39:57.130

在对代码进行了一些试验后，我找到了一种解决方法，它不是一个优雅的解决方案，但它确实有效。我编辑了以下行以包括隐藏上下文菜单。

```
document.getElementById("main").addEventListener("touchmove", function(){ clearTimeout(sayac); contextMenu.hide(); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:26:16.633

您可以绑定以下事件以覆盖平板电脑事件，并在处理程序内执行返回。

```
google.maps.event.addListener(map, "touchstart", function(e){
    return;
});

google.maps.event.addListener(map, "touchend", function(e){
    return;
}); 
```

在这里，您可以阅读有关[touchstart](http://www.w3.org/TR/touch-events/#the-touchstart-event)和[touchend](http://www.w3.org/TR/touch-events/#the-touchend-event)事件的更多信息。

# text - NEWBIE - 重新编号 .txt 文件中的行号

> ID：15891494
> 
> 赞同：-1
> 
> 时间：2013-04-09T00:48:46.257
> 
> 标签：text, sed, grep

我有一个经过编辑的简单文本文件，如下所示：

```
1,47:26:23N,121:15:10W,1641M,T,3 Queens Mtn,
2,48:01:19N,119:56:12W,367M,T,Alta Lake,
4,48:40:19N,121:35:35W,1705M,T,Anderson Butte,
5,48:36:52N,122:15:58W,736M,T,Anderson Mtn,
6,48:55:13N,120:13:41W,2518M,T,Andrew Peak,
8,47:58:06N,119:55:15W,907M,T,Arbuckle Mtn,
11,48:39:49N,121:31:14W,2138M,T,Bacon Peak,
12,48:46:38N,121:48:48W,3176M,T,Baker Mtn,
13,48:57:12N,120:15:34W,2419M,T,Bald Mtn, 
```

我想重新编辑此文件，使其内容为：

```
1,47:26:23N,121:15:10W,1641M,T,3 Queens Mtn,
2,48:01:19N,119:56:12W,367M,T,Alta Lake,
3,48:40:19N,121:35:35W,1705M,T,Anderson Butte,
4,48:36:52N,122:15:58W,736M,T,Anderson Mtn,
5,48:55:13N,120:13:41W,2518M,T,Andrew Peak,
6,47:58:06N,119:55:15W,907M,T,Arbuckle Mtn,
7,48:39:49N,121:31:14W,2138M,T,Bacon Peak,
8,48:46:38N,121:48:48W,3176M,T,Baker Mtn,
9,48:57:12N,120:15:34W,2419M,T,Bald Mtn, 
```

任何帮助将不胜感激（如果这是一个非常明显的问题，很抱歉，但经过几次尝试我没有取得太大进展）。

谢谢克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:57:40.737

### # 解决方案 1

```
paste -d, <(seq $(wc -l <input.txt)) <(cut -d, -f 2- input.txt) 
```

### # 解决方案 2

```
awk -F, -vOFS=, '{$1=NR}1' input.txt 
```

### ＃ 结果

```
1,47:26:23N,121:15:10W,1641M,T,3 Queens Mtn,
2,48:01:19N,119:56:12W,367M,T,Alta Lake,
3,48:40:19N,121:35:35W,1705M,T,Anderson Butte,
4,48:36:52N,122:15:58W,736M,T,Anderson Mtn,
5,48:55:13N,120:13:41W,2518M,T,Andrew Peak,
6,47:58:06N,119:55:15W,907M,T,Arbuckle Mtn,
7,48:39:49N,121:31:14W,2138M,T,Bacon Peak,
8,48:46:38N,121:48:48W,3176M,T,Baker Mtn,
9,48:57:12N,120:15:34W,2419M,T,Bald Mtn, 
```

# jquery - 为 Google 翻译添加 jQuery 事件监听器

> ID：15891497
> 
> 赞同：1
> 
> 时间：2013-04-09T00:49:36.967
> 
> 标签：jquery, iframe, drop-down-menu, google-translate, jquery-events

[在有人使用google translate dropdown](http://translate.google.com/manager/website/?hl=en)将我的网站翻译成另一种语言后，我想执行一个 jQuery 函数。这是我没有运气的尝试：

```
$('document').ready(function () {
   $(".goog-te-menu-value").change(function() {
       alert("My code is working!");
   });
}); 
```

在正常的下拉列表中，这可以正常工作，但我无法定位谷歌翻译 div .. 因为我相信它在 iframe 中。无论如何要针对 iframe 中的 div 以在 jQuery 中使用？或者也许是另一种解决方法？如果有人对此有任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-22T11:03:55.813

我知道这是旧的，但我最近一直在研究这个，它可能会帮助一些人。

您的代码的问题是您将侦听器绑定在文档准备就绪时不存在的元素上，尽管该`.change()`方法在技术上是一种快捷方式，因为`.on()`您在 dom 中还没有走得足够高以允许这种“未来” ' 除了 dom。

所以你的代码应该是：

```
$('#google_translate_element').on('change','select.goog-te-combo',function(e){ console.log($(this).val()); /* or  alert($(this).val()); */ }); 
```

这将允许选择框在谷歌添加时绑定更改侦听器。

它在我目前工作的网站上完美运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T17:04:46.233

我也刚刚将谷歌翻译小部件添加到我的网站，当然，它破坏了布局！

所以我查看了小部件使用的脚本。

首先，您不能向按钮添加事件侦听器，因为 Google 翻译小部件已经分配了一个。

其次，我发现在它翻译之后，GT 小部件将标签设置为有一个类。

所以，我给我的标签一个“docstart” id 并创建了以下脚本。

**注意：**这破坏了 Firefox v. 21，但它在 IE 9 中有效。我还没有在任何其他浏览器中测试过它。

```
function LayoutFix() {
// code here to fix your layout
myListener();
};
function waitForGoogle() {
setTimeout (function myListener() {
var e = document.getElementById('docstart').className;
var l = e;
window.setInterval(function() {   
var cN = e.className;
if (cN !== l)
// Call function to fix the layout on class change
LayoutFix();
// Set a 10 second iteration
},10000);
// Set a 10 second wait for GT widget to load
},10000);
}
// Finally, load the listener on document.ready()
$(document).ready(waitForGoogle); 
```

# macos - 以编程方式和从 NIB 初始化自定义控件

> ID：15891498
> 
> 赞同：0
> 
> 时间：2013-04-09T00:49:48.493
> 
> 标签：macos, cocoa, nsview, awakefromnib

我正在编写一个自定义 UI 控件，并且对围绕初始化的标准做法（特别是对控件委托的依赖）感到好奇。像大多数控件一样，我的控件依赖委托来提供有关如何呈现自身的重要信息。

当从 NIB 中使用控件时，会正确调用`initWithCoder:`和`awakeFromNib`方法，并且可以通过`IBOutlet`. `awakeFromNib`调用一个辅助方法`setupControl`，该方法与委托交互以设置我的控件。生活是美好的！

但是，当我使用 , 手动创建控件时`initWithFrame:`，显然`awakeFromNib`不会被调用。我很好奇其他开发人员如何处理支持 IB 和编程控件创建的问题。我可以看到一些支持程序化案例的技术：

*   强制开发人员调用`initWithFrame:`，然后是`setDelegate:`，然后是`setupControl`。不太繁重，但确实暴露了我控制的内部运作（即他们必须知道`setupControl`）
*   修改`initWithFrame:`方法以获取委托。这确实更多地封装了内部工作，但是，我不确定这是一个特别常用的习惯用法（并且似乎基于委托响应操作子视图通常会推迟到视图生命周期的稍后时间，而不是在初始化程序中）
*   覆盖`setDelegate:`访问器以调用该`setupControl`方法。不是这个的忠实粉丝，因为它带有副作用编程的味道。

只是想我会把它扔在那里看看我忽略了哪些技术。想法？

谢谢。克雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:38:59.483

首先： `-awakeFromNib`NIB 完全加载后自动发送到控件。这意味着一旦在 NIB 中封装的整个 UI 被加载，Cocoa 就会发送`-awakeFromNib`到所有 UI 组件。它在加载后发送它的唯一原因是避免 nil IBOutlet。通常，如果您以编程方式添加控件，则在 NIB 解包和加载所有 UI 项之后完成（假设您将 IBOutlet 连接到自定义控件）。`-awakeFromNib`因此，在您的方法结束时调用没有潜在的问题`-initWithFrame:`。

并且：每个人都希望`-setDelegate:`在以编程方式创建控件时调用。`-initWithFrame:`+`-setDelegate:`并不是为了创建一个功能控件，我认为 ;)

# sql - 如何针对搜索结果优化每个类别的计数查询？

> ID：15891506
> 
> 赞同：0
> 
> 时间：2013-04-09T00:50:37.193
> 
> 标签：sql, query-optimization

我的分类网站有九个类别。当用户搜索关键字时，我想显示搜索结果以及每个类别中的搜索结果数量。

如何优化sql查询？

我尝试了什么？为每个类别运行一个循环：

```
select * from ads where title like '%keyword%';
select count(*) from ads where title like '%keyword%' and category_id = 1;
select count(*) from ads where title like '%keyword%' and category_id = 2;
select count(*) from ads where title like '%keyword%' and category_id = 3;
select count(*) from ads where title like '%keyword%' and category_id = 4;
..... 
```

有什么更好的建议可以使 sql 查询更快吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T00:53:26.133

使用 GROUP BY 子句

```
SELECT
   COUNT(*)
   ,category_id 
FROM 
   ads 
WHERE 
   title like '%keyword%' 
GROUP BY category_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T02:16:33.477

nickles80 的查询将起作用。但如果您想在一个查询中同时执行这两项操作，请尝试以下操作：

```
SELECT ads.*, cnt.CountResult
FROM ads
INNER JOIN (
    SELECT category_id, COUNT(1) AS CountResult
    FROM ads 
    where title like '%keyword%' 
    GROUP BY category_id
) cnt ON cnt.category_id = ads.category_id
where title like '%keyword%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T03:54:07.110

您可以通过 IF() （如果是 mysql）或 case/when 更通用的方式 sum() 计数

```
select 
      count(*) as TotalAds,
      sum( case when category_id = 1 then 1 else 0 end ) as TotalCategory1,
      sum( case when category_id = 2 then 1 else 0 end ) as TotalCategory2,
      sum( case when category_id = 3 then 1 else 0 end ) as TotalCategory3,
      sum( case when category_id = 4 then 1 else 0 end ) as TotalCategory4,
      sum( case when category_id = 5 then 1 else 0 end ) as TotalCategory5,
      sum( case when category_id = 6 then 1 else 0 end ) as TotalCategory6,
      sum( case when category_id = 7 then 1 else 0 end ) as TotalCategory7,
      sum( case when category_id = 8 then 1 else 0 end ) as TotalCategory8,
      sum( case when category_id = 9 then 1 else 0 end ) as TotalCategory9
   from
      ads 
   where 
      title like '%keyword%'; 
```

# postgresql - 使用 PostgreSQL 的货币类型而不是数字

> ID：15891507
> 
> 赞同：3
> 
> 时间：2013-04-09T00:50:55.687
> 
> 标签：postgresql, database-schema, currency, money-format

我正在考虑将`numeric`我的 PG 9.2 数据库模式的列转换为`money`，主要是因为我看到（或想象？）在数据库级别而不是应用程序级别处理舍入和格式化的好处。这个决定会有一些缺点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-05T14:12:18.233

坚持使用数字：

1.  比我听说的要快

2.  输出一致。意思是一致的。是否在存储或检索（或在应用程序中）强制舍入的问题留给您。实际上，在许多情况下，您可能想要存储小数美分，而数字可以让您安全地执行此操作。

另一件事是，如果你想添加多币种支持，你会发现 numeric 在这方面比 money 好得多。这是因为货币符号取决于您的语言环境，因此您可以插入 100 美元，更改您的语言环境并让它显示 100 日元，除非发生大规模的经济动荡，否则这不太可能是相同的金额。

我做财务会计软件。我们决定坚持使用数字，我们对此非常满意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-11T13:38:34.393

我正在将 MySQL 迁移到 PostgreSQL。我决定使用“数字”而不是“金钱”，因为：- 1）金钱是本地敏感的，这意味着如果我们需要，默认情况下不可能有 2 种货币。2）如果我希望它作为货币起作用，可以将数字转换为货币。

# java - 读取文件时出现 FileNotFoundException - 没有这样的文件或目录

> ID：15891510
> 
> 赞同：0
> 
> 时间：2013-04-09T00:51:18.177
> 
> 标签：java

我想知道是否有人帮助我发现我的代码有什么问题？

小路： `src/dictionary.txt`

代码：

```
BufferedReader reader = new BufferedReader(new FileReader("src\\dictionary.txt"));` 
```

错误：

```
Exception in thread "main" java.io.FileNotFoundException: src\dictionary (No such file or directory)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:120)
    at java.io.FileInputStream.<init>(FileInputStream.java:79)
    at java.io.FileReader.<init>(FileReader.java:41)
    at p26.WordReconstruction.generateDictionary(WordReconstruction.java:13)
    at p26.WordReconstruction.main(WordReconstruction.java:24) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T00:59:07.373

`/src/dictionary.txt`不一样`src/dictionary.txt`。第一个是在`ROOT`第二个是`RELATIVE`到当前目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:01:20.053

*   检查字符大小写是否正确，文件必须命名为“dictionary.txt”且大小写正确
*   检查相对于运行 java 代码的位置放置文件的位置。默认情况下，如果您指定相对路径，例如“src/dictionary.txt”，java 将从`System.getProperty("user.dir")`

# java - 使用 Map Reduce 查找靠近特定记录的所有记录

> ID：15891514
> 
> 赞同：0
> 
> 时间：2013-04-09T00:51:42.990
> 
> 标签：java, hadoop, mapreduce

我正在尝试实现一个 map reduce 程序来查找 2GB 数据集中的所有记录，这些记录彼此靠近（类似于每个记录及其邻居应该是输出）。接近，我的意思是欧几里得距离。在数据集中，每条记录都有一个 x 和 y 坐标。谁能建议我这样做的一些直觉。我知道地图应该发出每条记录，reduce 可以简单地对输入到它的列表中的每个条目运行一个双循环以查找邻居，但是有没有更好的解决方案，因为我的实现非常慢。提前致谢。

```
map(rid,r):
 emit(key,r)

reduce(key,lst=[r1,r2....]):
 for elm1 in lst:
  for elm2 in lst:
   if elm2 is in range of elm1:
    process(elm1,elm2) 
```

process 函数只是将 elm2 作为邻居或将 elm1 作为 mongodb 数据库。我的 mongodb 数据库中的每条记录的结构如下

记录'R' | 记录“R”的邻居列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:03:10.163

您可以通过索引存储桶中的记录来加快实施速度。假设您的所有记录都在网格 [0,100] x [0, 100] 中。创建 99 个 x 桶 [0, 1), [1, 2), ... [99, 100] 和 99 个 y 桶。对于给定的记录 [x1, y1] 和距离 d，取 x 桶 [x1 - d - 1] 到 [x1 + d + 1] 和 y 桶 [y1 - d - 1] 到 [ y1 + d + 1]，然后根据结果集中的点测试 [x1, y1] 的欧几里德距离。

# qemu - qemu/kvm 支持 ovf 吗？

> ID：15891515
> 
> 赞同：14
> 
> 时间：2013-04-09T00:51:47.790
> 
> 标签：qemu, kvm

qemu/kvm 支持 ovf 吗？它能够引导现有的 ovf 软件包吗？我在 ovf 标准和 qemu/kvm 网站上都找不到任何相关信息。有什么有用的链接吗？谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-20T14:53:44.287

您正在寻找[virt-tools](http://virt-tools.org/)，其中包含`virt-convert`用于将 OVF 转换为可用于 QEMU 的格式。从最新的源代码构建可能会有所帮助。git repo 现在是[https://github.com/virt-manager/virt-manager](https://github.com/virt-manager/virt-manager)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-30T20:38:03.340

`virt-convert`不再是较新版本的一部分`virt-tools`。作为. `virt-v2v`_ `libguestfs`您可能仍会在某些较旧[版本](https://github.com/libguestfs/virt-v2v)`libguestfs`的. 在撰写本文时，我还没有在任何包回购中找到。因此，获取它的直接方法是从源代码构建它。`virt-v2v`

# facebook - 一个人有可能多次喜欢一个对象吗？

> ID：15891523
> 
> 赞同：1
> 
> 时间：2013-04-09T00:52:39.617
> 
> 标签：facebook, counter

Facebook 显示的点赞数由点赞数、评论数和分享数决定，这是否意味着一个人可以将点赞计数器增加不止一个？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:25:17.460

一个人只能喜欢一次，但也可以不喜欢它。这就像一个开/关开关，人们可以随心所欲地轻弹。

# php - PHP5.5 $_SESSION 数组在调用后为空

> ID：15891526
> 
> 赞同：0
> 
> 时间：2013-04-09T00:52:47.803
> 
> 标签：php, forms, session

我定义了一个表格，例如：

```
<form name="form1" method="POST" action="display_info.php"> 
```

当`display_info.php`调用动作文件时`$_POST`，它会从表单中接收到包含正确信息的数组，但该`$_SESSION`数组是空的。我仍然需要来电者的信息`$_SESSION`！

是否有另一种方法可以做到这一点，以便被调用的`php`文件同时接收`$_SESSION`和`$_POST`信息？即使我尝试`method="SESSION"`它仍然是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:00:25.997

如果会话包含数据应该没有问题。只需确保在文档开头使用以下命令开始会话：`session_start();`。

$_POST 和 $_SESSION 全局变量是不同的东西。不要把这两个混在一起。

它们都是数组，因此您可以像访问任何其他数组一样访问它们，但是 $_POST 保存从另一个页面发布的数据，而 $_SESSION 保存过去存储的会话。

因此，即使您有一个将一些数据发布到处理该数据的另一个页面的表单，您也需要启动会话以使用它并通过 $_SESSION 变量访问会话数据。

也试试这个来检查 $_SESSION 是否为空： var_export($_SESSION);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:58:23.690

你有没有把：

```
session_start(); 
```

在你的 php 文件的顶部？

[http://php.net/manual/en/function.session-start.php](http://php.net/manual/en/function.session-start.php)

您确定该会话包含数据吗？

# c# - 将变量绑定到 .net textbox.text 属性

> ID：15891532
> 
> 赞同：0
> 
> 时间：2013-04-09T00:54:28.357
> 
> 标签：c#, asp.net, .net, winforms

我试图做一个简单的变量绑定到一个控制文本框，但我一辈子都不能让它工作。这是两种形式的场景，一种是带有数据网格，另一种是带有两个文本框。当我单击数据网格时，我想将这些变量传递给 FORM1 中的文本框。这是我尝试过的，没有结果。以我的形式1

```
public string myText
    {
        get { return tuidInput.Text; }
        set { tuidInput.Text = value; }
    } 
```

然后我是我的表格二，当我尝试设置值时，我试试这个。

```
private void selectUser(object sender, DataGridViewCellEventArgs e)
    {
        userPicked.tuid = dataGridView1.Rows[dataGridView1.CurrentCell.RowIndex].Cells["spriden_id"].Value.ToString();
        userPicked.Name =  dataGridView1.Rows[dataGridView1.CurrentCell.RowIndex].Cells["spriden_last_name"].Value.ToString();

        Form1 form1 = new Form1();

        form1.myText = userPicked.tuid
     } 
```

我从这里得到了这个例子[http://social.msdn.microsoft.com/forums/en-US/csharpgeneral/thread/7308639f-640b-48bf-8293-abcbfd2292d8/](http://social.msdn.microsoft.com/forums/en-US/csharpgeneral/thread/7308639f-640b-48bf-8293-abcbfd2292d8/)

但是它不更新文本框？我应该做些什么不同？

我做错了什么？我怎样才能正确地做到这一点我已经在这里查看了几篇文章，但其中任何一篇都没有成功。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:00:51.233

我不确定是否是这种情况，但在：
`form1.myText = userPicked.tuid`
您指的是新创建的 Form1 对象，仅在上面的 1 行初始化。如果您检查`form1.myText`属性，您可能会注意到它已分配了值，但它不是您要实际引用的表单对象。如果您的文本框在 Form2 中，则在 Form1 中创建一个 Form2 引用。 `private Form2 form2 = null;`
并创建一个属性

`public Form2 SecondForm { set { this.form2 = value; } }` 正确分配它，然后`form2.tuidInput.Text`在您的 Form1 中正常使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T02:02:51.203

你有没有尝试过：

```
Form1 form1 = new Form1();
form1.myText.Text = userPicked.tuid;
form1.myText.Refresh();
form1.Show(); 
```

您可能需要在重新加载后重新绘制文本框。

另外，您说过要正确执行此操作。做到“正确”（我说得松散，因为“正确”可以被这么多不同的人以多种方式解释！） - 我想建议使用 MVP、MVVM 或 MVC 模式来处理这个而不是这样做GUI 中的业务逻辑。

对于 MVP 示例： [http ://haacked.com/archive/2006/08/09/ASP.NETSupervisingControllerModelViewPresenterFromSchematicToUnitTestsToCode.aspx](http://haacked.com/archive/2006/08/09/ASP.NETSupervisingControllerModelViewPresenterFromSchematicToUnitTestsToCode.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T14:22:11.623

上面的答案都没有回答我终于在这里找到了答案 [http://social.msdn.microsoft.com/forums/en-us/csharpgeneral/thread/9339C805-58C6-4DC2-934F-2A4ADC67ED4D](http://social.msdn.microsoft.com/forums/en-us/csharpgeneral/thread/9339C805-58C6-4DC2-934F-2A4ADC67ED4D) 这就是我所需要的去做。我将文本框更改为公共，然后从 form2 运行它，它就像一个魅力。

```
Form1 form1 = (Form1)Application.OpenForms["Form1"]; 
```

感谢大家的回应。米格尔

# css - html5shiv 不能在 IE8 中工作？

> ID：15891535
> 
> 赞同：10
> 
> 时间：2013-04-09T00:54:41.643
> 
> 标签：css, html, internet-explorer-8, html5shiv

我无法使用 HTML5 元素在 IE8 中获取样式。我搜索了 stackoverflow 和谷歌，没有任何我尝试过的建议。

我从一个更精细的页面开始（我正在将 XHTML 框架转换为 HTML5）并且丝毫不关心，但是在看到模拟和 F12 IE8 标准模式 IE 的零结果之后......这是我可以的简单代码不要开始工作：

```
<!doctype html>
<html>
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta charset="UTF-8" />
        <title>Template</title>
        <style type="text/css">
            header {
                display: block;
                border:1px solid red;
            }
        </style>
    </head>
    <body>
        <header>
            HTML5 HEADER
        </header>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    </body>
</html> 
```

请帮助欧比旺，你是我唯一的希望。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-09T00:59:29.197

将 HTML5Shiv 的`script`元素移动到`head`部分，在**所有**其他元素之前。`style``script`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T01:04:23.560

将 shiv 移到样式声明之前。

为了提高现代浏览器的性能，您可能希望对 shiv 使用条件注释。

```
<!doctype html>
<html>
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta charset="UTF-8" />
        <title>Template</title>

        <!--[if lt IE 9]>
            <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

        <style type="text/css">
            header {
                display: block;
                border:1px solid red;
            }
        </style>
    </head>
    <body>
        <header>
            HTML5 HEADER
        </header>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T00:37:52.537

我有一个类似的问题，但我的问题与 IE 条件注释语法有关。

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HTML5 Shim Test</title>

    <style>
        nav ul { font-weight: bold; }
        /* the links wont be bold in IE8 unless the shim is working */
    </style>

    <!--[if lt IE 9] >
    <script src="html5shiv.js"></script>
    <![endif]-->

</head>
<body>
    <nav>
        <ul>
            <li><a href="#">Link 1</a></li>
            <li><a href="#">Link 2</a></li>
            <li><a href="#">Link 3</a></li>
        </ul>
    </nav>
</body>
</html> 
```

你注意到 和 之间的空间`]`了`>`吗`<!--[if lt IE 9] >`？我也没有……很长一段时间。删除空间，一切正常。

此外，值得一提的是，HTML5 Shim 项目页面确实说 shim 需要位于 中`<head>`，但它可以位于您的样式表之后：

> “它必须包含在`<body>`元素之前（即在 中`<head>`），但它出现在 CSS 之前还是之后都没有关系 - 但为了性能，先包含 CSS 然后再包含这个脚本会更有意义。” 通过[https://code.google.com/p/html5shim/](https://code.google.com/p/html5shim/)

# jquery - jQuery视频插件的问题

> ID：15891540
> 
> 赞同：0
> 
> 时间：2013-04-09T00:55:14.780
> 
> 标签：jquery, video, background

我正在尝试使用 jQuery 插件作为视频背景，来自这个网站：[http ://dfcb.github.io/BigVideo.js/](http://dfcb.github.io/BigVideo.js/)

这就是我在我的 html 中采购库的方式：

```
<script src="jquery-1.6.2.min.js" type="text/javascript"></script>
<script src="jquery-1.9.1.js" type="text/javascript"></script>
<script src="map.js" type="text/javascript"></script>
<script src="jquery.imagesloaded.js" type="text/javascript"></script> 
```

当我预览时，似乎什么都没有发生。我错过了什么吗？有人对如何使用此插件有更好的说明吗？谢谢你！

# c# - 使用标准微软库写入 XML 文件

> ID：15891542
> 
> 赞同：1
> 
> 时间：2013-04-09T00:55:19.273
> 
> 标签：c#, html, xml, asp.net-mvc

我正在尝试使用此函数将值写入 XML 文件。我保留 sql_connection 下的值，但收到错误“对象引用未设置为对象的实例”。我理解错误的含义，但我不知道如何处理 XML 文件。我应该如何解决这个问题？当我单步执行我的代码时，它停在 myNode.Value = sql_connection; 它说我返回一个空值，但 sql_connection 看到我在管理页面上输入的值。提前致谢。

```
 public void SAVEsqlConnection(string sql_Connection)
    {
        XmlDocument myXmlDocument = new XmlDocument();
        myXmlDocument.Load("C:\\Users\\fthompson11\\WebFile.xml");

        XmlNode root = myXmlDocument.DocumentElement;
        XmlNode myNode = root.SelectSingleNode("/connectionString");
        myNode.Value = sql_Connection;
        myXmlDocument.Save("C:\\Users\\fthompson11\\WebFile.xml");
    } 
```

我也试过这样做：

```
 public void SAVEsqlConnection(string sql_Connection)
    {
        XmlDocument myXmlDocument = new XmlDocument();
        myXmlDocument.Load("C:\\Users\\fthompson11\\WebFile.xml");

        string connectionStringXPath = "/ConnectionStrings/add[@connectionString=\"{0}\"]";
        connectionStringXPath = string.Format(connectionStringXPath, sql_Connection);

        XmlNode node = myXmlDocument.SelectSingleNode(connectionStringXPath);
        node.Attributes["ConnectionStrings"].Value = sql_Connection;

        myXmlDocument.Save("C:\\Users\\fthompson11\\WebFile.xml");
    } 
```

干得好：

```
<?xml version="1.0" encoding="UTF-8"?>

<!--This is to write the connection string-->
-<ConnectionStrings> <add connectionString="asdf" Name="sqlConnection1"/>  </ConnectionStrings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:35:01.383

看起来你想做类似的事情：

```
 XmlDocument myXmlDocument = new XmlDocument();

            myXmlDocument.Load(@"..\..\XMLFile1.xml");

            XmlNode root = myXmlDocument.DocumentElement;

            //We only want to change one connection. 
            //This could be removed if you just want the first connection, regardless of name.
            var targetKey = "sqlConnection1";

            //get the add element we want
            XmlNode myNode = root.SelectSingleNode(string.Format("add[@Name = '{0}']", targetKey));

            var sql_Connection = "some sql connection";

            //set the value of the connectionString attribute to the value we want
            myNode.Attributes["connectionString"].Value = sql_Connection;

            myXmlDocument.Save(@"..\..\XMLFile2.xml"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:29:25.667

您的 XPATH 值不正确。

```
XmlNode myNode = root.SelectSingleNode("/connectionString"); 
```

在上面的行`myNode`中是 null，因为方法`SelectSingleNode` **返回**与 XPath 查询匹配的第一个 XmlNode；**如果没有找到匹配的节点**并且没有包含该 XPATH 的节点，则返回 null。看起来像是一个错字，您在 ConnectionStrings 中省略了“s”（或者认为您可以使用属性名称，如元素 [节点] 名称

在您的第二个示例中，XPATH 需要解析为

```
"/ConnectionStrings/add[@connectionString='asdf']" 
```

同样，您似乎有一个错字，您在表达式中使用引号（“）而不是记号（'）。

如果您正在寻找 add 的属性，`element`那么您的 XPATH 表达式将是`/ConnectionStrings/add`，然后您可以获得该节点的属性。这假设您已经从根节点向我们提供了 XML。你可能想看看这个[教程](http://www.w3schools.com/xpath/xpath_syntax.asp)

一旦您通过了`XmlNode`.

```
node.Attributes["ConnectionStrings"].Value = sql_Connection; 
```

在上面的 XML 示例中，属性名称`connectionString`不是`ConnectionStrings`，因此您需要将上面的行更改为。

```
node.Attributes["connectionString"].Value = sql_Connection; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T01:35:58.173

```
node.Attributes["**ConnectionStrings**"].Value = sql_Connection; 
```

应该与 Xml 中的大小写完全相同。Xml 区分大小写

# c++ - 在一行 C++ 中读取固定数量的字符

> ID：15891543
> 
> 赞同：0
> 
> 时间：2013-04-09T00:55:23.133
> 
> 标签：c++

这是一个非常基本的问题，因为我刚刚开始使用 C++。我要从文件（文本）中读取一行的 20 个字符。例子：

```
Wayne, Bruce        0000000 
```

我想将“Wayne，Bruce”及其后面的空格保存为字符串。我已经尝试了一段时间，但我不知道该怎么做。因此，如果有人可以帮助我，我要求答案保持简单。我试着用谷歌搜索这个并认为我找到了一些答案，但其中大多数都超出了我的想象。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:41:48.917

```
#include <algorithm>
#include <fstream>
#include <string>

int main()
{
    std::string str;
    std::ifstream file("test.txt");

    std::copy_n(
        std::istreambuf_iterator<char>(file),
        20,
        std::back_inserter(str)
    );
} 
```

请注意，如果有问题的文件少于 20 个字符，则这是不安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:35:03.337

如果您想从文件中读取 20 个字符的块，那么您可以尝试这样的操作，

```
void readFromFile(char *input)  //Parameter is your filename
{
  ifstream file_input;
  file_input.open(input, ios::in);
  vector<string> vec;         // Optional in case you want to store these
   while (file_input.good()) {
    char arr[21] = "";
    file_input.read (arr,20);
    vec.push_back(arr);        //if you want to store these chunks into vector
 }
 file_input.close();
} 
```

# ruby - Ruby - 对象类的别名

> ID：15891546
> 
> 赞同：-2
> 
> 时间：2013-04-09T00:55:47.360
> 
> 标签：ruby, class, object, alias

对不起我的英语不好。

我的代码...

```
class MyClass

  NewFood = Food

  def index
    @items = NewFood.all
  end
end 
```

`@items.first`是一个 Food 对象，但我想得到一个 NewFood 对象

一些帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:02:51.363

`NewFood`说你想要一个对象是没有意义的。只有两个类：`MyClass`和`Food`。常数`MyClass::NewFood`只是指向`Food`; 仅仅因为您定义了该常量并不意味着您可以期望`Food`类的实例开始表现不同并说它们的类是`NewFood`.

你能缩小并告诉我们大局是什么吗？你想达到什么目的？你想解决什么现实生活中的问题？我们或许可以提供更好的解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T01:24:53.033

举个例子：

```
class Foo
  @@instances = []

  def initialize(value)
    @value = value
    @@instances << self
  end

  def self.all
    @@instances
  end
end

class Bar
  NewFoo = Foo.dup

  def index
    @items = NewFoo.all
  end
end

# Now Bar::NewFoo will instantiate it's own objects
Bar::NewFoo.new(5)
Bar::NewFoo.new('fish')
Bar.new.index
=>  [#<Bar::NewFoo:0x00000002f33cf0 @value=5>,
     #<Bar::NewFoo:0x00000002f65958 @value="fish">] 
```

但是我看不到这种元编程黑客的必要性。
**编辑：**废话，我忘记了类变量（`@@var`）与它的孩子共享，所以这个例子可能会变得混乱。

# python - 请求正文为空

> ID：15891549
> 
> 赞同：3
> 
> 时间：2013-04-09T00:55:52.063
> 
> 标签：python, http, python-requests

为什么以下打印无？

```
import requests
r = requests.request('http://cnn.com', data={"foo":"bar"})
print r.request.body
# None 
```

如果将 cnn.com 更改为 www.cnn.com，它会打印正确的正文。我注意到一个重定向（r.history 中有一个 301）。这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T01:16:46.387

你的代码实际上并不能正常工作——它会立即提出一个`TypeError`问题。但我想我可以猜到你想要做什么。

如果将其更改`request`为 a `post`，它确实会成功返回`None`。

为什么？因为您要的是重定向的正文，而不是原始请求的正文。为此，您想要`r.history[0].request.body`.

阅读[重定向和历史](http://docs.python-requests.org/en/latest/user/quickstart/#redirection-and-history)以获取更多信息。请注意，实际上并没有记录自动重定向可用于 POST 请求，即使它经常这样做。另请注意，在早期版本中`requests`，`history`条目没有完整的`Request`对象。（如果您需要知道版本历史何时更改，则必须查看[版本历史记录](https://github.com/kennethreitz/requests/blob/master/HISTORY.rst)。但它似乎在 1.2.0 中，而不是在 0.14.2 中 - 并且在 1.0 中添加或更改了很多东西.0 并没有真正记录在案，因为它是一次重大的重写。）

* * *

作为旁注......你为什么需要这个？如果你真的需要知道你发送了什么body，为什么不做一个创建请求并发送它的两步过程，这样你就可以事先看到body？（或者，就此而言，只是对数据进行显式编码？）

# verilog - CPLD 上的 VGA 控制器出现问题

> ID：15891552
> 
> 赞同：3
> 
> 时间：2013-04-09T00:56:07.010
> 
> 标签：verilog, fpga, vga

我试图做的是从 Verilog 中的 Lattice MachXO CPLD 创建一个 VGA 控制器。

**问题**

我正在尝试使用 CPLD 内部的 25.175 MHz 时钟以 640x480 @ 60Hz 的分辨率显示红色；但是，当我将 CPLD 插入显示器时，我会收到“超出范围”消息；我尝试的任何显示器都无法理解我想要的分辨率。

**我试过的**

我已经在 ModelSim 中模拟了代码（包括图片），除了一个问题，一切看起来都不错。当我计算从 V-Sync 显示区域（绘制 H-Sync 时）发生的时间步长并将其除以 H-Sync 的频率时，我得到 479 个脉冲 - 比 480 个少一个我应该画的线条。我不明白这可能来自哪里，因为我已经多次检查了我的时间，我怀疑这*可能*是问题的征兆，但我不确定。

我用来生成计时数字的数字来自 Tiny VGA： [tinyvga.com/vga-timing/640x480@60Hz](http://tinyvga.com/vga-timing/640x480@60Hz)

下面是我的代码，以及来自 ModelSim 的时序图片，谢谢。

```
module Top(RESET, H_SYNC, V_SYNC, RED);
    input  wire RESET;
    output wire H_SYNC;
    output wire V_SYNC;
    output wire RED;

    wire rgb_en;

    /*** Test Bench Code ***/
     //reg osc_clk, reset;
     //initial begin
         //#0 reset     = 0;
         //#0 osc_clk = 0;
         //#2 reset     = 1;
     //end

     //always #1 osc_clk = ~osc_clk;

    OSCC        OSCC_1 (.OSC(osc_clk)); /*< IP clock module for Lattice CPLD    >*/
    Controller  CNTRL(.NRST(RESET), .CLK(osc_clk), .H_SYNC(H_SYNC), .V_SYNC(V_SYNC), .RGB_EN(rgb_en));

    assign RED = (rgb_en ? 1:1'bz); 

endmodule

module Controller(CLK, NRST, H_SYNC, V_SYNC, RGB_EN);
    input  wire CLK;        /*< CLK input from Top module   >*/
    input  wire NRST;       /*< Reset input from Top module >*/
    output reg  H_SYNC;     /*< Goes to VGA Horizontal Sync >*/
    output reg  V_SYNC;     /*< Goes to VGA Verical Sync    >*/
    output reg  RGB_EN  ;   /*< Enables RGB values durning display time on H_SYNC   >*/

    reg [10:0] h_counter;   /*< Tracks amount of pulses from CLK                    >*/
    reg [19:0] v_counter;   /*< Tracks amount of pulses from H_SYNC                 >*/

    `define H_SYNC_PULSE        11'd96      /*< Length of Sync Pulse            >*/
    `define H_BACK_PORCH_END    11'd144     /*< Pulse len + Porch Len           >*/
    `define H_FRONT_PORCH_STRT  11'd784     /*< Front Porch Len - Max           >*/
    `define H_COUNT_MAX         11'd799     /*< Max line pulses for resolution          >*/

    `define V_SYNC_PULSE        19'd1600
    `define V_BACK_PORCH_END    19'd28000
    `define V_FRONT_PORCH_STRT  19'd412000
    `define V_COUNT_MAX         19'd419999

    /*** State Machine for H_SYNC ***/
    always @(*) begin
        /* If the vertical sync line is not in the display zone, keep H_Sync low */
        if(!(v_counter > `V_BACK_PORCH_END && v_counter < `V_FRONT_PORCH_STRT)) begin
            H_SYNC = 0;
            RGB_EN = 0;
        end
        /* If the vertical sync line is in display zone, allow H_Sync to go through its procedure */
        else begin
            if (h_counter < `H_SYNC_PULSE) begin
                H_SYNC = 0;
                RGB_EN = 0;
            end
            /* If H_Sync is in the display zone, enable RGB */
            else if (h_counter > `H_BACK_PORCH_END && h_counter < `H_FRONT_PORCH_STRT) begin
                H_SYNC = 1;
                RGB_EN = 1;
            end
            /* During the Front Porch period, disable RGB */
            else begin
                H_SYNC = 1;
                RGB_EN = 0;
            end
        end
    end

    /*** State Machine for V_SYNC ***/
    always @(*) begin
        if (v_counter < `V_SYNC_PULSE) begin
            V_SYNC = 0;
        end
        else begin
            V_SYNC = 1;
        end
    end

    /*** Counter logic ***/
    always @(posedge CLK) begin
        if (h_counter >= `H_COUNT_MAX || !NRST) begin
            h_counter <= 11'b00;
        end
        else begin
            h_counter <= h_counter + 1;
        end
    end

    always @(posedge CLK) begin
        if (v_counter >= `V_COUNT_MAX || !NRST) begin
            v_counter <= 11'b00;
        end
        else begin
            v_counter <= v_counter + 1;
        end
    end

endmodule 
```

/ *< 后廊 h_counter >* / [![](https://i.imgur.com/DOWdcdW.png)](https://i.imgur.com/DOWdcdW.png)

/ *< 计数器翻转和 V_SYNC >* / [![](https://i.imgur.com/nYcfNu4.png)](https://i.imgur.com/nYcfNu4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-01T07:51:28.803

我使用过的每台 VGA 显示器都要求在消隐期间红色、绿色和蓝色信号都为零`(HSYNC | VSYNC)`。而不是分配给 z （高阻抗） try `assign RED = (rgb_en ? 1'b1 : 1'b0);`。您还必须对 GREEN 和 BLUE 执行此操作（或者将它们永久分配为 0）。

如果不是这样，那很可能是时间问题。尝试使用示波器来测量 VSYNC 信号的频率——它应该很好地达到 60Hz。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T19:18:26.603

与@exhausted_engy 响应相关（试图对此发表评论，但不知道在哪里这样做）：很多视频 DAC 都有用于 dac_blank 和 dac_sync 的引脚，正是为了这个目的。

# ios - 调用自定义 Segue 类执行方法，操作不执行任何操作

> ID：15891558
> 
> 赞同：1
> 
> 时间：2013-04-09T00:56:28.120
> 
> 标签：ios, objective-c, xcode, uiviewcontroller, segue

我正在尝试在`ViewController`（第一个视图）和`BrowserController`（第二个视图）之间创建一个自定义 segue。

目前我有...

**CustomSegue.h：**

```
#import <UIKit/UIKit.h>

@interface CustomSegue : UIStoryboardSegue

@end 
```

**CustomSegue.m：**

```
 #import "CustomSegue.h"

@implementation CustomSegue

- (void)perform {

    NSLog(@"Perform Method Running");

    UIViewController *ViewController = (UIViewController *) self.sourceViewController;
    UIViewController *BrowserController = (UIViewController *) self.destinationViewController;

    NSLog(@"Starting duration...");

    [UIView transitionWithView:ViewController.navigationController.view duration:0.2
    options:UIViewAnimationOptionTransitionFlipFromLeft
    animations:^{

                NSLog(@"Animation section");

                [ViewController.navigationController pushViewController:BrowserController animated:NO];

                }
                    completion:NULL];

    NSLog(@"Performance Method Completion");

} 
```

当我单击按钮转到下一个视图时，什么也没有发生。

我将视图 segue 设置为“自定义”（CTRL 拖动）并将我的类定义为“CustomSegue”。我看到在 CTRL 和拖动之后有两个“自定义”选项可供选择 - 我已经尝试了这两个选项以防万一（我两次都重新定义了我的类），但问题仍然存在。我还使用了一个`NSLog`并看到该`perform`方法正在被调用，我没有错误，但是该按钮仍然没有执行下一个视图的转场（或任何转场）。

**触发segue的按钮**

```
- (IBAction)browserButton:(id)sender 
```

这是我可以缩小范围的最后一个区域......我需要添加任何内容`IBAction`来告诉它使用新的 segue 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T01:06:17.900

Xcode 告诉你的是完全正确的：（当然`self`是 type `CustomSegue`）既没有`ViewController`也没有`BrowserController`属性。这是因为你没有在你的`CustomSegue`类中声明这些属性，它的基类`UIStoryboardSegue`也没有它们。

您可以尝试两种解决方案 - 直接使用内置属性，或者使用您想要的名称将它们包装在属性中。

这是第一种方法：

```
UIViewController *ViewController = (UIViewController *) self.sourceViewController;
UIViewController *BrowserController = (UIViewController *) self.destinationViewController; 
```

这是第二种方法：

```
-(UIViewController*) ViewController {
    return self.sourceViewController;
}
-(UIViewController*) BrowserController {
    return self.destinationViewController;
} 
```

第一种方法实现起来更快，但它可能不太可读。第二种方法需要更多的输入，但它为源控制器和目标控制器提供了更好地描述它们在应用程序中的角色的名称。这个选择由你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T00:38:01.997

您无需对 IBAction 执行任何操作。似乎一切都应该正常工作并且你已经尝试了一切 - 我建议你删除工作（或者如果你使用 github 则回滚）并重新开始。从添加类之前的那一点开始，`CustomSegue`并确保重新输入代码（你永远不知道，有时你会捕捉到一些小细节）。

祝你好运。

# html - HTML 帮助：如何使图像的宽度适合整个容器

> ID：15891560
> 
> 赞同：-1
> 
> 时间：2013-04-09T00:56:55.143
> 
> 标签：html

我希望该横幅图像适合白色容器，而不是越过右侧，但我似乎无法忽略左侧的边距。我已经尝试了我所知道的一切；从 max-width 到将边距设置为 0px 但没有任何效果。

这是我目前拥有的代码：

```
<p style="text-align: center;" dir="ltr">
  <img class="aligncenter size-full wp-image-504" title="bannercommunity" 
       src="image.png"
       alt="" width="960" height="140" />
</p> 
```

任何和所有的帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:02:25.793

您只需添加`width: 100%`到`<img>`. 请注意，让浏览器调整图像大小是低效的，因此如果可以的话，您应该避免它，并将图像调整为您想要使用的正确大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:16:15.713

虽然我反对内联样式，但我建议你这样做：

**CSS方式**

```
.body .wp-image-504.aligncenter { width: 100% !important; } 
```

**截屏**

![截屏](https://i.imgur.com/NXkw5wC.png)

删除`width`和`height`值，以这种方式赋予样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T22:46:49.493

感谢大家的帮助，但我发现通过添加

'位置：相对；左：-20px；宽度：960 像素；'

在样式字段中为我做了诀窍。因此，设置图像相对于容器的位置，然后将图像宽度与容器的宽度相匹配（同时添加一个负数以使左边距无效）有效。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-09T01:05:51.133

在您的情况下，您需要添加 style="display: inline-block;" 到图像的父 P 标签。或者你必须删除 style="display: block;" 在此图像的“aligncenter”类中。他们两个都会解决你的问题。

* * *

感谢尼克的建议，我已经在评论中修改了我的答案。

# sql-server - SQL- 带有聚合函数的子查询 (SQL Server)

> ID：15891564
> 
> 赞同：0
> 
> 时间：2013-04-09T00:58:14.680
> 
> 标签：sql-server

我的设置是这样的：我有三张桌子-

*   学生（StudentID、FirstName、LastName 等），
*   StudentSemesters（StudentID、SemID 等），以及
*   学期（SemID，年）

我的要求是获取每个学生的详细信息，但仅限于他们最后一个学期的详细信息。从逻辑上讲，这意味着年数最高的学期。我似乎无法正确查询。为简单起见，“年份”只是一个整数（例如 2000、1998）。以下是我一直坚持的当前查询：

```
SELECT dbo.Student.LastName + ' , ' + dbo.Student.FirstName AS Student, dbo.Student.Defence1Date, dbo.Student.Defence2Date, COUNT(StudentSemesters_1.SemID) 
           AS SemesterCount, dbo.Student.EntrySemester + ' - ' +
               (SELECT dbo.StudentSemesters.SemID
                FROM   dbo.StudentSemesters INNER JOIN
                               dbo.ListSemesters ON dbo.StudentSemesters.SemID = dbo.ListSemesters.SemID
                WHERE (dbo.Student.StudentCode = dbo.StudentSemesters.StudentCode)
                GROUP BY dbo.StudentSemesters.SemID, dbo.ListSemesters.Year
                HAVING (dbo.ListSemesters.Year = MAX(dbo.ListSemesters.Year))) AS Expr1
FROM  dbo.Student INNER JOIN
           dbo.StudentSemesters AS StudentSemesters_1 ON dbo.Student.StudentCode = StudentSemesters_1.StudentCode
GROUP BY dbo.Student.LastName, dbo.Student.FirstName, dbo.Student.Defence1Date, dbo.Student.Defence2Date, dbo.Student.EntrySemester, 
           dbo.Student.StudentCode 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:18:02.173

您可以这样做以仅获取每个学生最后一个学期的详细信息：

```
SELECT 
  s.LastName + ' , ' + s.FirstName   AS Student,  
  s.Defence1Date, 
  s.EntrySemester + ' - ' + s1.SemId AS Expr1
FROM  dbo.Student               AS s
INNER JOIN dbo.StudentSemesters AS S1 ON s.StudentCode = S1.StudentCode
INNER JOIN dbo.ListSemesters    AS lm ON lm.SemID      = s1.SemId
INNER JOIN 
(
    SELECT SemId, MAX(Year) AS MaxYear
    FROM dbo.StudentSemesters
    GROUP BY SemId
) AS s2 ON s2.semId = lm.SemId AND ls.Year = s2.MaxYear; 
```

**但是，**如果您使用的是 SQL Server 2005+，则可以使用窗口函数来执行此操作：

```
WITH CTE
AS
(
    SELECT 
      s.LastName + ' , ' + s.FirstName   AS Student,  
      s.Defence1Date, 
      s.EntrySemester + ' - ' + s1.SemId AS Expr1,
      ROW_NUMBER() OVER(PARTITION BY s1.SemId
                        ORDER BY Year DESC) AS RowNumber
    FROM  dbo.Student               AS s
    INNER JOIN dbo.StudentSemesters AS S1 ON s.StudentCode = S1.StudentCode
    INNER JOIN dbo.ListSemesters    AS lm ON lm.SemID      = s1.SemId
) 
SELECT 
  Student,
  Defence1Date,
  Expr1,
FROM CTE
WHERE RN = 1; 
```

但这不会得到`SemesterCount`，但你也许可以这样（这只是一个猜测）：

```
SELECT 
  s.LastName + ' , ' + s.FirstName   AS Student,  
  s.Defence1Date, 
  s1.SemCount,
  s.EntrySemester + ' - ' + s1.SemId AS Expr1
FROM  dbo.Student               AS s
INNER JOIN
(
   SELECT StudentCode, COUNT(SemId) AS SemCount
   FROM dbo.StudentSemesters 
   GROUP BY StudentCode
) AS S1 ON s.StudentCode = S1.StudentCode
INNER JOIN dbo.ListSemesters    AS lm ON lm.SemID      = s1.SemId
INNER JOIN 
(
    SELECT SemId, MAX(Year) AS MaxYear
    FROM dbo.StudentSemesters
    GROUP BY SemId
) AS s2 ON s2.semId = lm.SemId AND ls.Year = s2.MaxYear; 
```

# javascript - 无法使用 javascript 在 div 中加载内容

> ID：15891568
> 
> 赞同：0
> 
> 时间：2013-04-09T00:58:49.293
> 
> 标签：javascript, html

这是 shan，我是一个 javascript 菜鸟，我正在尝试以 qa 代码为例。我正在尝试将一个小的 javascript 内容加载到一个 div 元素，但它不起作用任何帮助都会很好，这里是代码。

```
<html>
<head>
    <title>
    using d for statement
</title>
<script>
    function displaytext () {
     var loopindex=0;
     var sum=0;
     for (var loopindex=1; loopindex <=100; loopindex++) {
       sum +=loopindex;
     }; 
    document.getElementById('targetdiv').innerhtml="adding 1 to 100 gives "+sum;
    }
</script>
</head>
<body>
    <div id="targetdiv">

    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:04:34.817

您需要调用该函数。等到窗口加载完成也是一个好主意（或者你可以使用一些更高级[的 JS 来检测 DOM 就绪状态](https://stackoverflow.com/a/800010/947478)。）：

```
<html>
<head>
    <title>
    using d for statement
</title>
<script>
    function displaytext() {
     var loopindex=0;
     var sum=0;
     for (var loopindex=1; loopindex <=100; loopindex++) {
       sum +=loopindex;
     }; 
    document.getElementById('targetdiv').innerHTML = "adding 1 to 100 gives "+sum;
    }
    window.onload = function(){
      displaytext();
    }
</script>
</head>
<body>
    <div id="targetdiv">

    </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:11:30.853

3个问题：

1.  你从来没有真正调用过这个函数。它只是被声明的。
2.  该属性是innerHTML 而不是innerhtml。Javascript 区分大小写。
3.  脚本在一个元素上方是引用。由于脚本在找到时执行（页面构建在执行期间暂停），因此您所指的元素永远不会找到。

此外，您两次声明了 loopindex 变量，我认为这会导致 ES5 严格的语法错误。

```
<html>
    <head>
        <title>
        using d for statement
        </title>
    </head>
    <body>
        <div id="targetdiv">

        </div>
    </body>
    <script>
        function displaytext () {
         var sum=0;
         for (var loopindex=1; loopindex <=100; loopindex++) {
           sum +=loopindex;
         }; 
        document.getElementById('targetdiv').innerHTML="adding 1 to 100 gives "+sum;
        }
        displaytext();
    </script>
</html> 
```

# ruby - Radiant CMS 和 MySQL

> ID：15891576
> 
> 赞同：0
> 
> 时间：2013-04-09T00:59:38.750
> 
> 标签：ruby, ubuntu-12.04, radiant

我正在尝试安装 Radiant CMS，但在尝试使用 MySQL 配置它时遇到问题...

我按照下一个 tut ，安装 Radiant

[https://github.com/radiant/radiant/wiki/Installing-on-Ubuntu](https://github.com/radiant/radiant/wiki/Installing-on-Ubuntu)

然后在最后一步：

```
 rake db:bootstrap
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /usr/local/rvm/gems/ruby-1.9.3-p392/gems/rails-2.3.18/lib/rails/gem_dependency.rb:21.
rake aborted!
**adapter:mysql database:dev_earth0 username:root password:dbpass host:localhost database is not configured**
/usr/local/rvm/gems/ruby-1.9.3-p392/gems/activerecord-2.3.18/lib/active_record/connection_adapters/abstract/connection_specification.rb:62:in `establish_connection'
/usr/local/rvm/gems/ruby-1.9.3-p392/gems/activerecord-2.3.18/lib/active_record/connection_adapters/abstract/connection_specification.rb:60:in `establish_connection'
/usr/local/rvm/gems/ruby-1.9.3-p392/gems/activerecord-2.3.18/lib/active_record/connection_adapters/abstract/connection_specification.rb:55:in `establish_connection'
/usr/local/rvm/gems/ruby-1.9.3-p392/gems/rails-2.3.18/lib/initializer.rb:438:in `initialize_database'
/usr/local/rvm/gems/ruby-1.9.3-p392/gems/rails-2.3.18/lib/initializer.rb:141:in `process'
/usr/local/rvm/gems/ruby-1.9.3-p392/gems/rails-2.3.18/lib/initializer.rb:113:in `run'
/usr/local/rvm/gems/ruby-1.9.3-p392/gems/radiant-1.1.3/lib/radiant/initializer.rb:266:in `run'
/home/devdreams/domains/dreamsengineering.com/config/environment.rb:14:in `<top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p392/gems/activesupport-2.3.18/lib/active_support/dependencies.rb:182:in `require'
/usr/local/rvm/gems/ruby-1.9.3-p392/gems/activesupport-2.3.18/lib/active_support/dependencies.rb:182:in `block in require'
/usr/local/rvm/gems/ruby-1.9.3-p392/gems/activesupport-2.3.18/lib/active_support/dependencies.rb:547:in `new_constants_in'
/usr/local/rvm/gems/ruby-1.9.3-p392/gems/activesupport-2.3.18/lib/active_support/dependencies.rb:182:in `require'
/usr/local/rvm/gems/ruby-1.9.3-p392/gems/rails-2.3.18/lib/tasks/misc.rake:4:in `block in <top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/task.rb:246:in `call'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/task.rb:246:in `block in execute'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/task.rb:241:in `each'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/task.rb:241:in `execute'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/task.rb:184:in `block in invoke_with_call_chain'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/task.rb:177:in `invoke_with_call_chain'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/task.rb:205:in `block in invoke_prerequisites'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/task.rb:203:in `each'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/task.rb:203:in `invoke_prerequisites'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/task.rb:183:in `block in invoke_with_call_chain'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/task.rb:177:in `invoke_with_call_chain'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/task.rb:205:in `block in invoke_prerequisites'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/task.rb:203:in `each'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/task.rb:203:in `invoke_prerequisites'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/task.rb:183:in `block in invoke_with_call_chain'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/task.rb:177:in `invoke_with_call_chain'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/task.rb:170:in `invoke'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/application.rb:143:in `invoke_task'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/application.rb:101:in `block (2 levels) in top_level'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/application.rb:101:in `each'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/application.rb:101:in `block in top_level'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/application.rb:110:in `run_with_threads'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/application.rb:95:in `top_level'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/application.rb:73:in `block in run'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/application.rb:160:in `standard_exception_handling'
/usr/local/rvm/gems/ruby-1.9.3-p392@global/gems/rake-10.0.4/lib/rake/application.rb:70:in `run'
/usr/local/rvm/gems/ruby-1.9.3-p392/bin/ruby_noexec_wrapper:14:in `eval'
/usr/local/rvm/gems/ruby-1.9.3-p392/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => db:bootstrap => db:initialize => environment
(See full trace by running task with --trace) 
```

我总是知道没有创建数据库...... :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:06:45.417

看[这里](https://github.com/peritor/webistrano/issues/34)，他们有一个可能对你有用的建议。

```
gem update --system 1.6.2 
```

# ruby-on-rails - 带有谷歌应用程序的heroku邮件程序告诉我通过网络浏览器登录

> ID：15891579
> 
> 赞同：0
> 
> 时间：2013-04-09T00:59:46.373
> 
> 标签：ruby-on-rails, heroku, google-apps

我设置了谷歌应用程序和 heroku 来发送邮件。我从我的应用程序中发送了第一封邮件，一切都很好。然后，我更改了我的 google 应用程序帐户上的电子邮件（从 matt@website.com 到 team@website.com）...确保在 heroku 配置设置中更改它...重新启动...但现在它给了我这个错误：

```
Net::SMTPAuthenticationError (535-5.7.1 Please log in with your web browser and then try again. Learn more at 
```

我尝试通过网络浏览器登录，一切都很好。当我现在尝试发送邮件时，我只是不断收到同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:05:55.290

这应该会有所帮助：[http ://www.rocketideas.com/2012/05/gmail-error-password-not-accepted-from-server-solved/](http://www.rocketideas.com/2012/05/gmail-error-password-not-accepted-from-server-solved/)

我已经对其进行了测试，它对我有用。

# java - 防止冗余随机数

> ID：15891580
> 
> 赞同：1
> 
> 时间：2013-04-09T00:59:47.593
> 
> 标签：java, arrays, loops, random, redundancy

我正在尝试根据用户输入的内容以 2 组的形式获取随机数 0 - 499。比如 234 和 58，这就是一组，但用户可能会提示他们想要 8 组。我试图确保不会出现多余的数字，例如 234 和 58、12 和 444、198 和 58。（58 出现了两次。）

我试图防止这种情况的方法是将找到的数字放入一个数组中，当我绕过下一个匹配项时，我会检查数组以确保它们尚未被使用。只是想知道最好的方法是什么。很明显，在第一次周围没有选择数字，所以我不需要检查。但是接下来如果我得到一个多余的怎么办？我将获取数字然后检查数组，如果它已经在数组中，我该如何返回并获取新数字？一个做while循环可能吗？

这是我在做什么：

```
//now add the specified number of random connections
    System.out.println();
    System.out.println("new connection(s): ");

    //array for keeping track of the new connections to prevent redundant add's
    int redundant [] = new int[con*2];

    for( int i = 1; i <= con; i++ ){
        Random ran = new Random();
        if( i == 1){
            int ran1 = ran.nextInt(sWorld.length-1) + 1;
            int ran2 = ran.nextInt(sWorld.length-1) + 1;
            redundant[i - 1] = ran1;
            redundant[i] = ran2;
            System.out.println("     " + ran1 + " - " + ran2);
        }
        else{
            int ran1 = ran.nextInt(sWorld.length-1) + 1;
            int ran2 = ran.nextInt(sWorld.length-1) + 1;
            //need help
        } 
```

提前致谢！

**编辑。使用下面的方法（使用集合）**

```
 List<Integer> nums = new LinkedList<Integer>();
    for( int i = 0; i <= 499; i++ ){ 
        nums.add(i);
    }

    //shuffle the collection for more randomness

    System.out.println();
    System.out.println("new connection(s): ");
    for (int x = 1; x <= con; x++){
        Collections.shuffle(nums);

        Random ran = new Random();
        int r1 = nums.remove(ran.nextInt(nums));
        int r2 = nums.remove(ran.nextInt(nums)); 
```

但是无法获取随机数，有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T01:02:35.837

只需用所需范围内的所有索引（即 0 到 499）填充一个集合，然后使用[`Collections.shuffle()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T01:33:36.483

一种方法是创建一个从 0-499 的数字列表

```
List<Integer> nums = new LinkedList<Integer>();
for(int i=0; i<=499; i++) nums.add(i); 
```

然后随机播放列表

```
Collections.shuffle(nums); 
```

然后每次你需要一个 0-499 之间的非重复随机数时，只需从列表中删除一个元素

```
int x = nums.remove() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T01:16:39.143

使用`while`循环并使用`array`. 虽然您的索引没有超出范围，但会生成两个数字。如果它们不是多余的，则将它们添加到数组中并相应地增加您的索引。如果它们是多余的，什么也不做，while 循环的下一次迭代无论如何都会生成两个新数字。

# c# - 列表的嵌套哈希集？

> ID：15891582
> 
> 赞同：0
> 
> 时间：2013-04-09T00:59:56.017
> 
> 标签：c#, list, nested, hashset

我正在研究一个项目 Euler 问题，我想采用创建值列表并将列表添加到 Hashset 的方法，这样我可以在恒定时间内评估该列表是否已经存在于 hashset ，最终目标是为我的最终结果计算哈希集中的列表数量。

我遇到的问题是当我以这种方式创建列表时。

```
HashSet<List<int>> finalList = new HashSet<List<int>>();
List<int> candidate = new List<int>();
candidate.Add(5);
finalList.Add(candidate);

if (finalList.Contains(candidate) == false) finalList.Add(candidate);
candidate.Clear();

//try next value 
```

显然，`finalList[0]`当我清除候选人并且没有给我期望的结果时，该项目已清除。是否有可能有一个这样的列表（整数）哈希集？我将如何确保每次都实例化一个新列表并将其作为新项目添加到哈希集中，也许在 for 循环中测试许多值和可能的列表组合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:19:42.997

为什么不使用每个列表唯一的值作为键或标识符？您可以为您的密钥创建一个 HashSet 来解锁您的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:30:59.123

您可以改用字典。唯一的事情是你必须测试一下 Dictionary 是否已经有这个列表。通过创建一个支持这种需求的简单类，这很容易做到。

```
class TheSimpleListManager
{
    private Dictionary<String, List<Int32>> Lists = new Dictionary<String, List<Int32>>();

    public void AddList(String key, List<Int32> list)
    {
       if(!Lists.ContainsKey(key))
       {
           Lists.Add(key, list);
       }
       else
       {
          // list already exists....
       }
    }
} 
```

这只是一种方法的快速示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T02:39:17.103

要解决您的`clear`问题：由于它是一个对象引用，因此您必须创建一个`new List`并将其添加到`HashSet`. 您可以通过将旧列表传递给其构造函数来创建新列表。

```
 HashSet<List<int>> finalList = new HashSet<List<int>>();
        List<int> candidate = new List<int>();

        candidate.Add(5);

        var newList = new List<int>(candidate);
        finalList.Add(newList);

        if (finalList.Contains(newList) == false) //Not required for HashSet
            finalList.Add(newList);

        candidate.Clear(); 
```

***注意***：在添加项目之前在`HashSet`内部执行 a `contains`换句话说，这里即使你执行`finalList.Add(newList);` `n`次数，它也只会添加`newList`一次。因此没有必要进行包含检查。

# animation - SVG动画循环点

> ID：15891583
> 
> 赞同：2
> 
> 时间：2013-04-09T01:00:07.167
> 
> 标签：animation, svg

我有一条带有各种弧线的路径。我想无限期地为一条弧线制作动画。目前，我能做的是：

[](http://jsfiddle.net/gLxkt/1/ "例子")[http://jsfiddle.net/gLxkt/1/](http://jsfiddle.net/gLxkt/1/)

 ````
 <animate id="c1" xlink:href="#p1"     attributeName="d"     attributeType="XML"     
    from="M 300 300 C 300 300 600 300 300 400  "
      to="M 300 300 C 300 300 400 300 300 400  " dur="1s"     fill="freeze"     />      

    <animate id="c2" begin="c1.end" xlink:href="#p1"     attributeName="d"     attributeType="XML"     
    from="M 300 300 C 300 300 400 300 300 400  "
      to="M 300 300 C 300 300 600 300 300 400  " dur="1s"     fill="freeze"     /> 
````  `哪个可以做到这一点。如何使动画无限期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:03:22.927

end="indefinite" 使其重复，而 begin 使其在 0 秒和其他动画结束时开始。在 Firefox 中不断重复。

```
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%"
    >

    <path id="p1" d="M 300 300 C 300 300 600 300 300 400  " stroke="blue" fill="none" stroke-width="4" />
<g>
    <path id="p1" d="M 300 300 C 300 300 600 300 300 400  " stroke="blue" fill="none" stroke-width="4" />

        <animate id="c1" begin="c2.end; 0s" end="indefinite" xlink:href="#p1"     attributeName="d"     attributeType="XML"     
        from="M 300 300 C 300 300 600 300 300 400  "
          to="M 300 300 C 300 300 400 300 300 400  " dur="1s"     fill="freeze"     />      

        <animate id="c2" begin="c1.end" end="indefinite" xlink:href="#p1"     attributeName="d"     attributeType="XML"     
        from="M 300 300 C 300 300 400 300 300 400  "
          to="M 300 300 C 300 300 600 300 300 400  " dur="1s"     fill="freeze"     />
         </g>

</svg> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:40:04.387

一种简单的方法是使用“值”数组——它适用于 Chrome、Firefox 和 Safari（我认为是 Opera），但不适用于不支持 SMIL 的 IE（尽管某处有一个 polyfill 库）。但罗伯特的回答显然更优雅。

```
<animate id="c1" xlink:href="#p1"     attributeName="d"     attributeType="XML"     
values="M 300 300 C 300 300 600 300 300 400;M 300 300 C 300 300 400 300 300 400;M 300 300 C 300 300 600 300 300 400" dur="2s"   repeatCount="indefinite"  fill="freeze"     /> 
```

[http://jsfiddle.net/gLxkt/2/](http://jsfiddle.net/gLxkt/2/)`

# ruby-on-rails - Rails 未正确创建新应用程序 - 与 JSON 1.7.7 冲突？

> ID：15891587
> 
> 赞同：0
> 
> 时间：2013-04-09T01:00:56.007
> 
> 标签：ruby-on-rails

我正在尝试通过在线教程学习 Ruby on Rails。

```
[rails version]: Rails 3.2.13
[ruby version] : ruby 1.9.3p392 (2013-02-22 revision 39386) [x86_64-linux] 
```

当我执行命令时：

```
rails new first_app 
```

我得到：

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /usr/bin/ruby extconf.rb 
mkmf.rb can't find header files for ruby at /usr/share/include/ruby.h

Gem files will remain installed in /home/philippe/.gem/ruby/1.9.1/gems/json-1.7.7 for inspection.
Results logged to /home/philippe/.gem/ruby/1.9.1/gems/json-1.7.7/ext/json/ext/generator/gem_make.out
An error occurred while installing json (1.7.7), and Bundler cannot continue.
Make sure that `gem install json -v '1.7.7'` succeeds before bundling. 
```

果然，我`gem install json -v '1.7.7`按照列出的方式运行，但结果是：

```
[philippe@localhost rails_projects]$ gem install json -v '1.7.7'
Building native extensions.  This could take a while...

ERROR:  Error installing json:
  ERROR: Failed to build gem native extension.

        /usr/bin/ruby extconf.rb
mkmf.rb can't find header files for ruby at /usr/share/include/ruby.h

Gem files will remain installed in /home/philippe/.gem/ruby/1.9.1/gems/json-1.7.7 for inspection.
Results logged to /home/philippe/.gem/ruby/1.9.1/gems/json-1.7.7/ext/json/ext/generator/gem_make.out 
```

有人见过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:06:57.287

如果您在“rpm”系统（`Fedora`或`Red Hat`）中，请使用：

```
sudo yum install -y gcc ruby-devel libxml2 libxml2-devel libxslt libxslt-devel 
```

它为我解决了这个问题。

# c++ - 带有本机库的 Perl 模块：可以让 XSLoader 在 dlopen 上使用 RTLD_GLOBAL？

> ID：15891589
> 
> 赞同：3
> 
> 时间：2013-04-09T01:01:06.530
> 
> 标签：c++, c, perl

标题给出了简短的版本；最重要的是我有一个 C++ API 包装到 C 并通过 XS 暴露给 Perl。这多年来一直运行良好，但我们现在遇到了一个用例，我们怀疑它可能是由公共库的重复加载引起的。

症状是我们有一个围绕 Tibrv 的内部 Perl 包装器。而且，我们对另一个内部使用 Tibrv 的 C++ API 进行了封装。当 Perl 脚本同时使用这两种 API 时，第二个将挂起创建 Tib 传输。单独来说，两者都来自 Perl。

我怀疑，但没有什么可以支持的，它在某种程度上与共享状态有关，而 Perl，默认情况下使用`RTLD_LOCAL`set 加载库，可能会导致问题（这纯粹是预感）。我没有什么可以支持的，但我知道 Tib 非常了解它的周围环境，我认为这可能是一种可能性。

**我的问题：** 是否可以使用`dlopen`标志，例如`RTLD_GLOBAL`Perl 的`XSLoader`？`dlopen`即当一个本地库打开而不重建 Perl/XS 时可以更改标志吗？

到目前为止，我在网上看到的所有内容似乎都表明您需要使用 DynaLoader，这将要求我们以适合从 DynaLoader（目前不是）。

我只有大约 10% 的把握，这甚至可以解决真正的问题，但是**知道我们是否可以`dlopen`轻松地覆盖标志将使我们可能节省几天的精力**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T03:05:56.323

XSLoader 只是 DynaLoader 的前端。

听起来你可以添加

```
sub dl_load_flags { 0x01 } 
```

到你的模块。这被调用并传递给`dl_load_file`in `flags`，它执行以下操作：

```
 if (flags & 0x01)
#ifdef RTLD_GLOBAL
        mode |= RTLD_GLOBAL;
#else
        Perl_warn(aTHX_ "Can't make loaded symbols global on this platform while loading %s",filename);
#endif
    DLDEBUG(1,PerlIO_printf(Perl_debug_log, "dl_load_file(%s,%x):\n", filename,flags));
    handle = dlopen(filename, mode) ; 
```

请注意，`dl_load_file`调用它是为了`.so`从您的`.xs`. 据我所知，XSLoader/DynaLoader 不会调用`dlopen`对象可能使用的库，例如您遇到问题的库。

# python - Pygame：与瓷砖碰撞不起作用

> ID：15891592
> 
> 赞同：1
> 
> 时间：2013-04-09T01:01:40.240
> 
> 标签：python, pygame

我目前正在研究 pygame 的抽象层，并且在尝试检查与地图的碰撞时遇到了问题。我能够加载和显示地图，以及存储可碰撞的矩形。当我打印矩形列表时，我看到一切都准备好了，但是当我遍历每个矩形并尝试检查与另一个矩形的碰撞时，即使矩形没有碰撞，它也总是返回 true。此外，当我尝试通过在每个矩形上绘制一个红色轮廓的矩形来调试所有矩形时，即使在我打印矩形时，它也不会绘制任何内容，它会打印一个存在的矩形。

以下是框架中的一些片段：

```
class Tilemap(object):
"""This is the tilemap object, it takes an array of strings as its object, and places a surface where you have it in the strings. It only supports one surface per map, so you have to make multiple maps for floor, walls, etc."""
def __init__(self, level_surface,level_string = None, string_char = "#", surface = None, surface_dim = Vector2(50, 50),surface_color = (255, 255, 255)):
    self.level = level_string
    self.char = string_char
    self.surface = surface
    if self.surface is None:
        self.surface = pygame.Surface(surface_dim)
        self.surface.fill(surface_color)

    self.surface_width = self.surface.get_rect().w
    self.surface_height = self.surface.get_rect().h
    self.collision_list = []
    for y in xrange(len(self.level)):
        for x in xrange(len(self.level[y])):
            if self.level[y][x] is self.char:
                self.collision_list.insert(len(self.collision_list), Rect((x) * self.surface_width,(y) * self.surface_height, self.surface_width, self.surface_height))
    print self.collision_list
    for y in xrange(len(self.level)):
        for x in xrange(len(self.level[y])):
            if self.level[y][x] is self.char:
                level_surface.blit(self.surface.convert_alpha(), (self.surface_width * x, self.surface_height * y))

def replace_char_with(self, level_surface,char = ".", surface = None):
    for y in xrange(len(self.level)):
        for x in xrange(len(self.level[y])):
            if self.level[y][x] is char:
                level_surface.blit(surface.convert_alpha(), (surface.get_width() * x, surface.get_height() * y))

def check_col(self, rect):
    for tilerect in self.collision_list:
        if rect.x + rect.w > tilerect.x or rect.y + rect.h > tilerect.y or rect.x < tilerect.x + tilerect.w or rect.y < tilerect.y + tilerect.h:
            return True
        else:
            return False

def debug_draw(self, screen):
    for rect in self.collision_list:
        pygame.draw.rect(screen, (255, 0, 0), rect, 2) 
```

片段＃2，测试代码：

```
def main():
from pygame.locals import K_w, K_a, K_s, K_d
pygame.init()
screen = pygame.display.set_mode((640, 480))
clock = pygame.time.Clock()
player = Sprite(pygame.image.load("trapdoor_tile.png"), Vector2(100, 100))
floor = ["########################################",
         "########################################",
         "#####...##.#.#..###.#.###..#############",
         "#####.######.#.#.####.##.#.#############",
         "######.###.#.##..##.#.###.##############",
         "#####.####.########.####################",
         "#####.#.##.###.#.##.#.##.#.#############",
         "########################################",
         "#######################################",
         "########################################",
         "########################################",
         "########################################",
         "########################################",
         "########################################"
         "########################################",
         "########################################",
         "########################################",
         "########################################",
         "########################################",
         "########################################",
         "########################################",
         "########################################",
         "########################################",
         "########################################",
         "########################################",
         "########################################",
         "########################################",
         "########################################",
         "########################################",
         "########################################"]

walls = ["########################################",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "#......................................#",
         "########################################"]

level_surf = pygame.Surface((640, 480))
floor_map = Tilemap(level_surf, floor, "#", pygame.image.load("ground_tile.png").convert_alpha())
floor_map.replace_char_with(level_surf, ".", pygame.image.load("trapdoor_tile.png").convert_alpha())
wall_map = Tilemap(level_surf, walls, "#", pygame.image.load("wall_tile.png").convert_alpha())

while True:
    screen.fill((0, 0, 0))
    milliseconds = clock.tick(60) / 10.

    for event in pygame.event.get():
        if event.type == pygame.locals.QUIT:
            pygame.quit()
            raise SystemExit

    wall_map.debug_draw(screen);

    screen.blit(level_surf, Vector2(0, 0))

    if wall_map.check_col(player.dummyrect):
        player.colliding = True
        print "why!"
    else:
        player.colliding = False

    player.update(milliseconds)
    player.draw(screen)

    keystate = pygame.key.get_pressed()

    player.apply_drag()

    if keystate[K_w]:
        player.set_accel_y(-5)
    elif keystate[K_s]:
        player.set_accel_y(5)
    elif keystate[K_a]:
        player.set_accel_x(-5)
    elif keystate[K_d]:
        player.set_accel_x(5)

    pygame.display.flip() 
```

创建玩家的精灵类：

```
class Sprite(object):
def __init__(self, surface = None, initial_position = (100, 100)):
    self.surface = surface
    self.rect = self.surface.get_rect(center = initial_position)
    self.acceleration = Vector2(0, 0)
    self.delta_time = None
    self.dummyrect = self.rect
    self.colliding = False

def update(self, delta_time):
    self.dummyrect = self.rect.move(self.acceleration.x * delta_time, self.acceleration.y * delta_time)
    if not self.colliding:
        self.rect = self.dummyrect
    else:
        self.dummyrect = self.rect
    self.delta_time = delta_time

def draw(self, screen):
    screen.blit(self.surface, self.rect)

def draw_to_cam(self, screen,camera):
    screen.blit(self.surface, camera.to_camera_coords(Vector2(self.rect.x, self.rect.y)))

def collide(self, rectangle):
    if self.rect.x + self.rect.w > rectangle.x:
        self.rect.x -= 1;
    if self.rect.x < rectangle.x + rectangle.w:
        self.rect.x += 1
    if self.rect.y < rectangle.y + rectangle.h:
        self.rect.y += 1;
    if self.rect.y + self.rect.h > rectangle.y:
        self.rect.y -= 1;

def set_accel_x(self, new_val):
    self.acceleration.x = new_val

def set_accel_y(self, new_val):
    self.acceleration.y = new_val

def apply_drag(self, drag_mul = 1):
    if self.acceleration.x > 0:
        self.acceleration.x -= self.delta_time * drag_mul
    else:
        self.acceleration.x += self.delta_time * drag_mul

    if self.acceleration.y > 0:
        self.acceleration.y -= self.delta_time * drag_mul
    else:
        self.acceleration.y += self.delta_time * drag_mul

    if self.acceleration.x < 0.1 or self.acceleration.x > -0.1:
        self.acceleration.x = 0
    if self.acceleration.x < 0.1 or self.acceleration.x > -0.1:
        self.acceleration.x = 0
    if self.acceleration.y < 0.1 or self.acceleration.y > -0.1:
        self.acceleration.y = 0
    if self.acceleration.y < 0.1 or self.acceleration.y > -0.1:
        self.acceleration.y = 0

def get_center(self):
    return Vector2(self.rect.centerx, self.rect.centery) 
```

这些是涉及的三个主要片段，我不知道为什么每次都会返回碰撞，但似乎确实如此。如果有人有答案，或者至少解释一下为什么会发生这种情况，请帮助兄弟！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:05:51.733

你需要一些`and`'s 在你的碰撞检查。

例如：

```
def check_col(self, rect):
    for tilerect in self.collision_list:
        collide_x = False
        collide_y = False
        # check x axis for collision
        if self.rect.x + self.rect.w > tilerect.x:
            collide_x = True
        elif self.rect.x < tilerect.x + tilerect.w:
            collide_x = True
        # check y axis for collision
        if self.rect.y < tilerect.y + tilerect.h:
            collide_y = True
        elif self.rect.y + self.rect.h > tilerect.y:
            collide_y = True
        # act on a collision on both axis
        if collide_x and collide_y:
            return True
        else:
            return False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:12:25.690

您的 check_col 函数使用所有“或”运算符，这意味着只要满足一个条件，您就会为碰撞返回 true。这是您的代码：

```
def check_col(self, rect):
for tilerect in self.collision_list:
    if rect.x + rect.w > tilerect.x or rect.y + rect.h > tilerect.y or rect.x < tilerect.x + tilerect.w or rect.y < tilerect.y + tilerect.h:
        return True
    else:
        return False 
```

你想要的是更像这样的东西：

```
def check_col(self, rect):
    for tilerect in self.collision_list:
        if ((rect.x + rect.w > tilerect.x and rect.x <= tilerect.x + tilerect.width) or
            (tilerect.x + tilerect.width > rect.x and tilerect.x <= rect.x + rect.width)) and
            ((rect.y + rect.h > tilerect.y and rect.y <= tilerect.y + tilerect.height) or
            (tilerect.y + tilerect.height > rect.y and tilerect.y <= rect.y + rect.height))

            return true
        else:
            return false 
```

此外，值得指出的是，pygame 的 Rect 类有自己的一组碰撞检测函数。要检测 2 个矩形之间的碰撞，您可以使用 rect.colliderect(Rect)。

[http://www.pygame.org/docs/ref/rect.html#pygame.Rect.colliderect](http://www.pygame.org/docs/ref/rect.html#pygame.Rect.colliderect)

# php - 没有if语句的nginx无扩展php url

> ID：15891593
> 
> 赞同：0
> 
> 时间：2013-04-09T01:01:57.393
> 
> 标签：php, nginx, fastcgi

我使用这个配置：

```
root /www/mysite/static
location / {
    try_files $uri @php;
}
location @php {
    fastcgi_pass 127.0.0.1:9000;
    include fastcgi_params;
    fastcgi_param SCRIPT_FILENAME /www/mysite/controller$fastcgi_script_name.php;
} 
```

这将首先检查 /www/mysite/static 是否有该文件。如果找不到该文件，那么它将在“file.php”上运行 fastcgi。

现在，如果我访问 www.mysite.com/asdf，它将尝试使用不存在的 /www/mysite/controller/asdf.php 运行 fastcgi。

我读到如果语句是邪恶的，那么我应该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T13:39:36.763

Finally figured it out:

```
location /info {
    root /usr/share/nginx/www;
    fastcgi_pass unix:/var/run/php5-fpm.sock;
    include fastcgi_params;
    fastcgi_param SCRIPT_FILENAME /usr/share/nginx/www/info.php;
} 
```

Actually makes sense now as I've bothered to read the documentation...

# c++ - FBX 模型的面（某些）未正确渲染

> ID：15891594
> 
> 赞同：-4
> 
> 时间：2013-04-09T01:02:03.743
> 
> 标签：c++, opengl, model, fbx

我在 Maya 中创建了一个基本球体并将其加载到我的 OpenGL 项目中。我遇到的问题如下所示：

![玛雅模型](https://i.stack.imgur.com/Cq4ph.png)

如您所见，球体是三角形的。

但是当模型被加载到我的项目中时，一些面没有正确渲染。

![在此处输入图像描述](https://i.stack.imgur.com/nKScf.png)

这些是我的 Maya FBX 导出设置（选中）：

**常规选项** - 默认文件扩展名 - 保留参考

**当前预设** - 用户定义

**几何** - 平滑网格

**将 NURBS 曲面转换为：** - 软件渲染网格 - 引用的容器内容

**嵌入媒体** - 嵌入媒体

**单位** - 自动

**轴转换** - 上轴：Y

**UI** - 显示警告管理器 - 生成日志数据

**FBX 文件格式** - 类型：二进制 - 版本：FBX 2013

关于为什么会发生这种情况的任何想法？我正在使用 FBX SDK 2013。

**编辑：**

在发布时没有意识到白色三角形（标记为“坏三角形”）是由于简单的光渲染而出现的。但他在右边的扩展栏是实际问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:08:11.700

在我的 youtube 视频上看到了你的问题。

在我看来，您的一些三角形正在扩展条上被剔除。也许吧台上的某些三角形的绕组不正确？要检查的东西。检查三角形上的绕组并使用 opengl 剔除面。

至于阴影，我以前见过类似的东西。看起来您可能需要启用平滑着色，而不是平面着色。尝试调用 glShadeModel(GL_SMOOTH);

也可以尝试调用 glDisable(GL_TEXTURE_2D)。如果启用了纹理并且未给出适当的纹理坐标，则可能会导致您看到的奇怪的扁平阴影三角形。

我能想到的唯一其他可能性就是您的法线设置不正确。以下是可能发生这种情况的几个原因：

1.  您没有正确导出法线。
2.  您没有将法线正确导入顶点缓冲区对象，或者您缓存了信息
3.  您的着色器（假设您没有使用即时模式）没有读取或处理然后正常正常。

希望这可以帮助。祝你好运！

# sql - SQL聚合函数如果只有一个则返回单个值，否则返回null

> ID：15891599
> 
> 赞同：2
> 
> 时间：2013-04-09T01:02:46.990
> 
> 标签：sql, oracle11g, aggregate-functions

我正在寻找实现执行此操作的聚合函数的最佳方法：-

*   如果组仅包含一个重复值，则返回该值
*   如果该组包含任何空值，则返回空值
*   如果组包含多个值，则返回 null

以下是一些示例数据：

```
CREATE TABLE EXAMPLE
( ID  NUMBER(3),
  VAL VARCHAR2(3));

INSERT INTO EXAMPLE VALUES (1,'A');
INSERT INTO EXAMPLE VALUES (2,'A');
INSERT INTO EXAMPLE VALUES (2,'B');
INSERT INTO EXAMPLE VALUES (3,null);
INSERT INTO EXAMPLE VALUES (3,'A');
INSERT INTO EXAMPLE VALUES (4,'A');
INSERT INTO EXAMPLE VALUES (4,'A'); 
```

*   [SQLFiddle 链接](http://www.sqlfiddle.com/#!4/6840a)

SQL应该是这样的： -

```
SELECT ID, ????( VAL ) ONLY_VAL
FROM EXAMPLE 
GROUP BY ID
ORDER BY ID 
```

我追求的结果应该是这样的： -

```
 ID       ONLY_VAL
  1       A
  2       
  3       
  4       A 
```

实际上，我想在多个`VAL`列上执行此操作（按相同的 分组`ID`）。每个将有数百条记录`ID`。

我认为这是一个有趣的问题我唯一的解决方案是 NVL、MIN 和 MAX 的混乱，似乎应该有一个更整洁的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T01:20:11.773

这适用于您的原始数据吗？

```
SELECT  ID, 
        CASE WHEN COUNT(DISTINCT VAL) = 1 AND COUNT(ID) = COUNT(VAL)
             THEN MAX(VAL)
             ELSE NULL
        END ONLY_VAL
FROM    EXAMPLE
GROUP   BY ID
ORDER   BY ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!4/a572b/20)

# python - 如何在python中查找csv文档中的特定行

> ID：15891609
> 
> 赞同：3
> 
> 时间：2013-04-09T01:03:32.780
> 
> 标签：python, csv, python-2.7

我想要做的是读入一个 csv 文档并在 SN 列 > 20 中找到所有值，然后创建一个新文件，其中只有 SN > 20 的行。

我知道我需要这样做：

1.  阅读原始文件
2.  打开一个新文件
3.  迭代原始文件的行

我能够做的是找到 SN > 20 的行

```
import csv
import os

os.chdir("C:\Users\Robert\Documents\qwe")

with open("gdweights_feh_robert_cmr.csv",'rb') as f:
    reader = csv.reader(f, delimiter= ',')
    zerovar = 0
    for row in reader:
        if zerovar==0:
            zerovar = zerovar + 1
        else:
            sn = row [11]
            zerovar = zerovar + 1
            x = float(sn)
            if x > 20:
                print x 
```

所以我的问题是如何获取 SN > 20 的行并将其转换为新文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T01:09:00.383

将数据保存在列表中，然后将列表写入文件。

```
import csv
import os

os.chdir(r"C:\Users\Robert\Documents\qwe")

output_ary = []
with open("gdweights_feh_robert_cmr.csv",'rb') as f:
    reader = csv.reader(f, delimiter= ',')
    zerovar = 0
    for row in reader:
        if zerovar==0:
            zerovar = zerovar + 1
        else:
            sn = row [11]
            zerovar = zerovar + 1
            x = float(sn)
            if x > 20:
                print x
                output_ary.append(row)

with open("output.csv",'w') as f2:
    for row in output_ary:
        for item in row:
            f2.write(item + ",") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:17:13.937

在代码中，行的读取/循环非常复杂。它可以通过以下方式清理（并在 Python 中运行得更快）：

```
with open('gdweights_feh_robert_cmr.csv', 'rb') as f:
    output_ary = [row for row in f if float(row[11]) > 20] 
```

使用列表推导（[row for row if f]）在 python 中进行了优化，因此它将更有效地执行。并且...您避免创建`reader`数组，这将减少所需的内存，如果 csv 文件很大，也非常方便。

然后，您可以按照其他答案中的建议继续写出 outout_ary。

希望这可以帮助！

# asp.net - System.Data.DataRowView' 不包含名为 'ID' 的属性

> ID：15891613
> 
> 赞同：0
> 
> 时间：2013-04-09T01:04:19.830
> 
> 标签：asp.net, sql, gridview

我一直在使用 ASP.NET 时遇到此错误。它似乎还在继续。我修复了一件事，然后导致另一个错误。我有这个以前的问题，我在这里问过：[插入和更新问题](https://stackoverflow.com/questions/15870247/issue-with-inserts-and-updates)。现在在最佳答案中，我被告知很多事情可以帮助修复我的代码；但是，在我按照告知插入“DataKeyNames="ID"" 后，我得到了这个错误......我不知道为什么

现在请注意，在 gridview 中，我有一个`"DataKeyNames="ID"`，然后链接到`<asp:BoundField DataField="ID" Visible="false" />` Here is the Stack Trace：

```
[HttpException (0x80004005): DataBinding: 'System.Data.DataRowView' does not contain a property with the name 'ID'.]
   System.Web.UI.DataBinder.GetPropertyValue(Object container, String propName) +9502089
   System.Web.UI.WebControls.GridView.CreateChildControls(IEnumerable dataSource, Boolean dataBinding) +3140
   System.Web.UI.WebControls.CompositeDataBoundControl.PerformDataBinding(IEnumerable data) +67
   System.Web.UI.WebControls.GridView.PerformDataBinding(IEnumerable data) +14
   System.Web.UI.WebControls.DataBoundControl.OnDataSourceViewSelectCallback(IEnumerable data) +123
   System.Web.UI.DataSourceView.Select(DataSourceSelectArguments arguments, DataSourceViewSelectCallback callback) +33
   System.Web.UI.WebControls.DataBoundControl.PerformSelect() +138
   System.Web.UI.WebControls.BaseDataBoundControl.DataBind() +30
   System.Web.UI.WebControls.GridView.DataBind() +4
   System.Web.UI.WebControls.BaseDataBoundControl.EnsureDataBound() +105
   System.Web.UI.WebControls.CompositeDataBoundControl.CreateChildControls() +75
   System.Web.UI.Control.EnsureChildControls() +83
   System.Web.UI.Control.PreRenderRecursiveInternal() +42
   System.Web.UI.Control.PreRenderRecursiveInternal() +168
   System.Web.UI.Control.PreRenderRecursiveInternal() +168
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +974 
```

我的 ASP.NET：

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="MedicalOffice.aspx.cs" Inherits="MedicalOffice" %>

    <!DOCTYPE html>

    <html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <title></title>

        <link href="StyleSheet.css" rel="stylesheet" />
    </head>
    <body>
        <form id="form1" runat="server">
        <div>
        <h1>Maintain Patients<asp:SqlDataSource ID="sdDoctorList" runat="server" ConnectionString="<%$ ConnectionStrings:MedicalOfficeConnectionString %>" SelectCommand="uspDoctorList" SelectCommandType="StoredProcedure"></asp:SqlDataSource>
            <asp:SqlDataSource ID="sdPatient" runat="server" ConnectionString="<%$ ConnectionStrings:MedicalOfficeConnectionString %>" DeleteCommand="usp_PatientDelete" DeleteCommandType="StoredProcedure" InsertCommand="uspPatientInsert" InsertCommandType="StoredProcedure" SelectCommand="uspPatientSelectByIDOrSelectAll" SelectCommandType="StoredProcedure" UpdateCommand="uspPatientUpdate" UpdateCommandType="StoredProcedure">
                <DeleteParameters>
                    <asp:Parameter Name="ID" Type="Int32" />
                </DeleteParameters>
                <InsertParameters>
                    <asp:Parameter Name="OHIP" Type="String" />
                    <asp:Parameter Name="FirstName" Type="String" />
                    <asp:Parameter Name="LastName" Type="String" />
                    <asp:Parameter DbType="Date" Name="DOB" />
                    <asp:Parameter Name="VisitsPerYear" Type="Int32" />
                    <asp:Parameter Name="DoctorID" Type="Int32" />
                </InsertParameters>
                <SelectParameters>
                    <asp:ControlParameter ControlID="DropDownList1" DefaultValue="0" Name="DoctorID" PropertyName="SelectedValue" Type="Int32" />
                </SelectParameters>
                <UpdateParameters>
                    <asp:Parameter Name="ID" Type="Int32" />
                    <asp:Parameter Name="OHIP" Type="String" />
                    <asp:Parameter Name="FirstName" Type="String" />
                    <asp:Parameter Name="LastName" Type="String" />
                    <asp:Parameter DbType="Date" Name="DOB" />
                    <asp:Parameter Name="VisitsPerYear" Type="Int32" />
                    <asp:Parameter Name="DoctorID" Type="Int32" />
                </UpdateParameters>
            </asp:SqlDataSource>
            </h1>
            <p>Select Patient By Doctor:<asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True" DataSourceID="sdDoctorList" DataTextField="Doctor" DataValueField="ID" AppendDataBoundItems="True">
                <asp:ListItem Value="0">All Doctors</asp:ListItem>
                </asp:DropDownList>
            <asp:GridView ID="GridView1" runat="server" AllowSorting="True" AutoGenerateColumns="False" BackColor="White" BorderColor="#336666" BorderStyle="Double" BorderWidth="3px" CellPadding="4" DataSourceID="sdPatient" GridLines="Horizontal" DataKeyNames="ID">
                    <Columns>
                        <asp:CommandField ShowDeleteButton="True" ShowEditButton="True" />
                         <asp:BoundField DataField="ID" Visible="false" />
                         <asp:TemplateField HeaderText="OHIP" SortExpression="OHIP">
                            <EditItemTemplate>
                                <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("OHIP") %>'></asp:TextBox>
                            </EditItemTemplate>
                            <ItemTemplate>
                                <asp:Label ID="Label1" runat="server" Text='<%# Bind("OHIP") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="First Name" SortExpression="FirstName">
                            <EditItemTemplate>
                                <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("FirstName") %>'></asp:TextBox>
                            </EditItemTemplate>
                            <ItemTemplate>
                                <asp:Label ID="Label2" runat="server" Text='<%# Bind("FirstName") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Last Name" SortExpression="LastName">
                            <EditItemTemplate>
                                <asp:TextBox ID="TextBox3" runat="server" Text='<%# Bind("LastName") %>'></asp:TextBox>
                            </EditItemTemplate>
                            <ItemTemplate>
                                <asp:Label ID="Label3" runat="server" Text='<%# Bind("LastName") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="DOB" SortExpression="DOB">
                            <EditItemTemplate>
                                <asp:TextBox ID="TextBox4" runat="server" Text='<%# Bind("DOB") %>'></asp:TextBox>
                            </EditItemTemplate>
                            <ItemTemplate>
                                <asp:Label ID="Label4" runat="server" Text='<%# Bind("DOB") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Visits Per Year" SortExpression="VisitsPerYear">
                            <EditItemTemplate>
                                <asp:TextBox ID="TextBox5" runat="server" Text='<%# Bind("VisitsPerYear") %>'></asp:TextBox>
                            </EditItemTemplate>
                            <ItemTemplate>
                                <asp:Label ID="Label5" runat="server" Text='<%# Bind("VisitsPerYear") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Doctor" SortExpression="Doctor">
                            <EditItemTemplate>
                                <asp:DropDownList ID="DropDownList2" runat="server" DataSourceID="sdDoctorList" DataTextField="Doctor" DataValueField="ID" SelectedValue='<%# Bind("DoctorID") %>' >
                                </asp:DropDownList>
                            </EditItemTemplate>
                            <ItemTemplate>
                                <asp:Label ID="Label6" runat="server" Text='<%# Bind("Doctor") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                    <FooterStyle BackColor="White" ForeColor="#333333" />
                    <HeaderStyle BackColor="#336666" Font-Bold="True" ForeColor="White" />
                    <PagerStyle BackColor="#336666" ForeColor="White" HorizontalAlign="Center" />
                    <RowStyle BackColor="White" ForeColor="#333333" />
                    <SelectedRowStyle BackColor="#339966" Font-Bold="True" ForeColor="White" />
                    <SortedAscendingCellStyle BackColor="#F7F7F7" />
                    <SortedAscendingHeaderStyle BackColor="#487575" />
                    <SortedDescendingCellStyle BackColor="#E5E5E5" />
                    <SortedDescendingHeaderStyle BackColor="#275353" />
                </asp:GridView> 
```

# .htaccess - .htaccess SEO 升级后重定向页面链接？

> ID：15891620
> 
> 赞同：-1
> 
> 时间：2013-04-09T01:05:03.763
> 
> 标签：.htaccess, seo

我不想在这里用大量 .htaccess 问题来夸大一篇文章，所以我将它们单独分解。这与使用`RedirectMatch`为现有网站的一部分的现有索引页面创建规则有关。

具体来说，我的测试站点已经运行了大约一年，现在我正在使用 .htaccess 重写干净的 URL 以获得更好的 SEO。因此，当我有一个容器页面，其内容基于链接中的查询字符串调用时，如下所示：

`http://www.website.com/departments.php?dep=contact_us`

我正在努力使 URL 看起来更流畅，例如：

`http://www.website.com/contact-us/`

我阅读的教程建议将我的链接更改为新的、更时髦的 SEO 友好样式会导致大量 404 错误和断开的页面链接，直到该站点再次被索引并且记录被更新。

因此，我的问题是：这是一个合理的担忧，还是会在 24-48 小时内获取新链接？

我问是因为我有几个具有多层文件结构的网站，并且我认为我的 .htaccess 文件中需要大量规则来修复我可能正在创建的所有损坏的链接。

如果我在这里制造混乱，请告诉我，我会澄清事情。

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T01:15:18.090

> 因此，我的问题是：这是一个合理的担忧，还是会在 24-48 小时内获取新链接？

如果您使用 301（永久）从外部重定向客户端，您可以更快地实现它。这比在服务器端内部重写要棘手得多，因为您会导致规则冲突。例如，如果您想在服务器内部将 url-a 重写为 url-b，则将浏览器从 url-b 重定向到 url-a（意味着当客户端专门请求 url-b 将其重定向到 url-a 时） ：

```
# internally rewrite url-a (fake URL) to url-b (where the actual content is)
RewriteRule ^url-a$ /url-b [L]

# externally redirect url-b (actual content) to url-a (fake URL)
RewriteRule ^url-b$ /url-a [L,R=301] 
```

由于重写引擎循环，这两条规则将继续相互重写并导致 500 内部服务器错误（如果将第二条规则替换为 a ，也会发生同样的事情`RedirectMatch`）。**要解决此问题，您需要创建一个条件，以便仅当实际请求是针对 "url-b"**时才应用外部重定向（第二条规则）。您可以通过匹配`%{THE_REQUEST}`变量来做到这一点，该变量本质上是 HTTP 请求的第一行。

使用您的示例 URL，您将拥有如下内容：

```
RewriteRule ^contact-us/?$ /departments.php?dep=contact_us [L]

RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ /departments\.php\?dep=contact_us
RewriteRule ^ /contact-us/ [L,R=301] 
```

这意味着当像 google-bot 这样的人尝试解析`http://www.website.com/departments.php?dep=contact_us`时，第二条规则的条件将匹配请求（看起来像`GET /departments.php?dep=contact_us HTTP/1.1`：），并且它会被重定向到`http://www.website.com/contact-us/`. 此时，客户端（google-bot）将请求`/contact-us/`并应用第一条规则并将 URI 内部重写为`/departments.php?dep=contact_us`.

# nhibernate - HBM 映射图像/二进制

> ID：15891623
> 
> 赞同：4
> 
> 时间：2013-04-09T01:05:20.413
> 
> 标签：nhibernate, nhibernate-mapping

我在映射我们的`byte[]`领域时遇到了麻烦。我一直在寻找几种解决方案，但到目前为止都没有。我得到的只是这个例外：

> ```
> The length of the byte[] value exceeds the length configured in the mapping/parameter. 
> ```

下面是我到目前为止在`hbm.xml`

```
<property name="Data" type="BinaryBlob">
    <column name="attachmentData" sql-type="varbinary(max)"/>
</property> 
```

我是不是在做一些不对的事情？

**更新 - 解决方案：**

原来我做错了。我们正在插入`byte[]`via**存储过程**，因此属性映射与它无关。相反，我们需要告诉 NHibernate sprocs 参数的类型，如下所示：

```
query.SetParameter(param.Key, param.Value, NHibernateUtil.BinaryBlob); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T05:45:09.933

NHibernate 不理解 varbinary(max) 并将使用默认的 8000 字节。

因此，您需要提供号码。IE

> varbinary(2147483647)

我认为以前可以工作，但这是一个[回归](https://nhibernate.jira.com/browse/NH-2484)错误。

# c++ - 编译我的脚本语言

> ID：15891626
> 
> 赞同：0
> 
> 时间：2013-04-09T01:05:34.973
> 
> 标签：c++, compiler-construction, scripting, interpreter

我已经为脚本语言开发了一个框架，并且我正在尝试制作一个编译器，以便将自定义十六进制代码输出到某个文件中，以供游戏和电影等应用程序的解释器读取。解释器将读取十六进制并通过循环执行操作，并且几乎为我完成了艰苦的工作。但我需要一种将文本字符串编译成自定义十六进制的方法。这是我的编译器的示例。

```
#include <iostream>
#include <string>
#include <Windows.h>
#include <wincon.h>
#include <fstream>;
using namespace std;

int main(){
    char egScriptpath[999];
    char path[999];
    char title[999];
    ifstream readfile;
    ofstream myfile;
    int optn;

    cout << "Enter the path where your *.egSCRIPT file is: " << endl;
    cin.getline(egScriptpath,999);

    cout << "Enter your path where you want to compile your *.egSCRIPT file: " << endl;
    cin.getline(path,999);

    cout << "Enter your title for your program: ";
    cin.getline(title,999);

    cout << endl << "Enter for your option of file extention:" <<  endl;
    cout << "   Enter 1 for .egGame :" << endl;
    cout << "   Enter 2 for .egMovie: ";
    cin >> optn;

    if(optn==1){
        readfile.open((string)egScriptpath);
        ofstream egMovieFile((string)path+"\\"+(string)title+".egGame");
        myfile.open((string)path+"\\"+(string)title+".egGame");
        while(!readfile.eof()){
            if(readfile.getline("validated()",1)){
              myfile << "              \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\n"
                        "               \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\n"
                        "                \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\n"
                        "                ////////////////\n"
                        "               ////////////////\n"
                        "              ||||||||||||||||\n"
                        "              ||||||||||||||||\n"
                        "              ||||||||||||||||\n"
                        "              \1\1\1\1\1\1\1\1\1\1\1\1\1\1\1\1\n"
                        "              \2\2\2\2\2\2\2\2\2\2\2\2\2\2\2\2\n";
            }
        }
        myfile.close();
        readfile.close();

    }else if(optn==2){
        readfile.open((string)egScriptpath);
        ofstream egGameFile((string)path+"\\"+(string)title+".egMovie");
        myfile.open((string)path+"\\"+(string)title+".egMovie");

        while(!readfile.eof()){
            if(readfile.getline("validated()",1)){
            myfile << "              \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\n"
                      "               \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\n"
                      "                \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\n"
                      "                ////////////////\n"
                      "               ////////////////\n"
                      "              ||||||||||||||||\n"
                      "              ||||||||||||||||\n"
                      "              ||||||||||||||||\n"
                      "              \1\1\1\1\1\1\1\1\1\1\1\1\1\1\1\1\n"
                      "              \2\2\2\2\2\2\2\2\2\2\2\2\2\2\2\2\n";
            }
        }
        myfile.close();
        readfile.close();
    }

    cout << "Compile complete" << endl;
    system("pause");

    return 0;
} 
```

所以我想做的是在 if 语句中说 if(readfile.getline("validated()",1)){} 我希望它把你可以看到的文本写入流变量的“myfile”例如。我希望我清楚我在说什么。如果编译器在我的脚本文件上读取“validated()”，那么它将使用“myfile”变量将“十六进制”代码写入新文件，该变量将由解释器解释，用于游戏和电影等应用程序. 谢谢，如果您知道出了什么问题以及为什么它没有将十六进制代码写入它制作的新文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T01:19:14.257

看起来您的问题位于此处：

```
if(readfile.getline("validated()",1)){ 
```

真诚地，我什至不知道为什么编译器允许您这样做，但我想向您建议以下更改：

代替：

```
while(!readfile.eof()){
    if(readfile.getline("validated()",1)){ 
```

使用这个：

```
std::string buffer;
while (std::getline(readfile, buffer, '\n')){
    if (buffer == "validated()") 
```

此外，由于您使用的是 C++，而不是使用 char 数组，您应该更多地依赖 std::string 类。

# python - 文本文件中的单词列表

> ID：15891628
> 
> 赞同：1
> 
> 时间：2013-04-09T01:05:49.493
> 
> 标签：python, parsing

我需要从文本文件创建一个单词列表。该列表将用于刽子手代码中，需要从列表中排除以下内容：

1.  重复的单词
2.  少于5个字母的单词
3.  包含 'xx' 作为子字符串的单词
4.  包含大写字母的单词

然后需要将单词列表输出到文件中，以便每个单词都出现在自己的行中。程序还需要输出最终列表中的单词数。

这就是我所拥有的，但它无法正常工作。

```
def MakeWordList():
    infile=open(('possible.rtf'),'r')
    whole = infile.readlines()
    infile.close()

    L=[]
    for line in whole:
        word= line.split(' ')
        if word not in L:
            L.append(word)
            if len(word) in range(5,100):
                L.append(word)
                if not word.endswith('xx'):
                    L.append(word)
                    if word == word.lower():
                        L.append(word)
    print L

MakeWordList() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T01:10:52.057

你用这段代码多次附加这个词，
你实际上根本没有过滤掉这些词，只是根据它们通过的数量来添加不同的计时次数`if`。

你应该结合所有`if`的：

```
if word not in L and len(word) >= 5 and not 'xx' in word and word.islower():
    L.append(word) 
```

或者，如果您希望它更具可读性，您可以拆分它们：

```
 if word not in L and len(word) >= 5:
        if not 'xx' in word and word.islower():
            L.append(word) 
```

但不要在每一个之后附加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:16:02.260

想一想：在你的嵌套 if 语句中，任何不在列表中的单词都会在你的第一行出现。然后，如果它是 5 个或更多字符，它将被*再次*添加（我打赌），并且再次等等。您需要重新考虑 if 语句中的逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T01:46:08.923

改进的代码：

```
def MakeWordList():
    with open('possible.rtf','r') as f:
        data = f.read()
    return set([word for word in data if len(word) >= 5 and word.islower() and not 'xx' in word]) 
```

`set(_iterable_)`返回一个没有重复的集合类型对象（所有`set`项目必须是唯一的）。`[word for word...]`是一种列表推导式，它是创建简单列表的一种更短的方式。您可以遍历“数据”中的每个单词（假设每个单词都在单独的行上）。`if len(word) >= 5 and word.islower() and not 'xx' in word`完成最后三个要求（必须超过5个字母，只有小写字母，不能包含'xx'）。

# c# - 如何实例化具有不同基本实现的扩展类？

> ID：15891631
> 
> 赞同：0
> 
> 时间：2013-04-09T01:05:53.790
> 
> 标签：c#, .net, inheritance, reflection

我正在使用一个包含对象及其扩展的基类的二进制文件。我想实例化该对象，但要让它使用我自己的基类实现。我可以在基类中看到我需要扩展哪些方法。

问题是基类实现了一个名为“WriteFeed”的方法，该方法需要网络连接并将数据写入网络流。我希望它使用我的实现，以便 WriteFeed 可以将数据转储到控制台。

我无法更改现有的二进制文件，只能更改我使用和实例化它的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:18:00.563

我唯一的建议是使用复合方法。我不确定这是否会满足您的需求或者您是否具有可见性访问权限，但它可能会起作用。

```
public class SomeBaseClassInSomeBinary
{
   protected virtual void Method1(...) {}
   protected virtual void WriteFeed (...) {}
} 

public class SomeClassInSomeBinary: SomeBaseClassInSomeBinary
{
   protected override void Method1(...) { base.Method1(...); }
   protected override void WriteFeed (...) { base.WriteFeed (...); }
} 

// **** your code
public class MyCode: SomeBaseClassInSomeBinary
{
     private SomeClassInSomeBinary Composite = new SomeClassInSomeBinary();

     protected override void Method1(...) { Composite.Method1(...); }
     protected override void WriteFeed (...) { your implementation }
} 
```

}

您现在需要做的就是使用您的对象。

希望这可以帮助。

# html - 悬停另一张图片时如何更改一张图片的CSS？

> ID：15891633
> 
> 赞同：0
> 
> 时间：2013-04-09T01:06:10.113
> 
> 标签：html, css, image, opacity, fade

所以我很想在使用 html/css 悬停时淡入一个图像，另一个淡出。这些图像彼此重叠。一个是透明的播放按钮（必须在上面？）另一个是图片。悬停时，我希望播放按钮淡入，图片淡出。

我做了无数的研究，以下是我目前拥有的：

```
<div id="videocontainer">
  <a href="#"><img class="playButton" onclick="do something" src="imagesrc" alt="" /></a>
  <img class = "vidImage" src="imagesrc" alt=""/>
</div> 
```

这是我的CSS

```
 #videocontainer
    {
      position: relative;   
      width: 760px; 
      height:400px;
    }

    .playButton
    {
      z-index: 500;
      position: absolute; top: 0; left: 0;
      width:760px;
      height:400px; 
    }

    .vidImage
    {
       position: relative; 
       top: 0; 
       left: 0;
    }

   .playButton:hover ~ .vidImage
   {
     -webkit-opacity: 0.25;
     -moz-opacity: 0.25;
     opacity: 0.25;
     -webkit-transition: all 3s ease;
     -moz-transition: all 3s ease;
     -ms-transition: all 3s ease;
     -o-transition: all 3s ease;
      transition: all 3s ease
   }

   .playButton:hover 
   {
     -webkit-opacity: 0.25;
     -moz-opacity: 0.25;
     opacity: 0.25;
     -webkit-transition: all 3s ease;
     -moz-transition: all 3s ease;
     -ms-transition: all 3s ease;
     -o-transition: all 3s ease;
      transition: all 3s ease;
   } 
```

当播放按钮悬停时，这应该使图像和播放按钮都消失。但它只是淡出播放按钮，vidimage没有发生任何事情。是否有可能因为透明播放按钮比视频图像大一点，所以它完全没有影响它，因为它覆盖了它？我的大部分研究都告诉我在我的 CSS 中使用 ~ 或 + ，但没有一个对我有用。谢谢您的帮助。

这是我目前正在使用的链接：[http ://webdesignog.com](http://webdesignog.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:52:06.537

我建议调整你所拥有的。

HTML：

```
<div id="container">
   <img src="play.jpg" alt="Play Image" class="play" />
   <img src="picture.jpg" alt="Picture Image" class="picture" />
</div> 
```

CSS：

```
#container {
   width: 200px;
   height: 200px;
   position: relative;
}

#container IMG {
   width: 100%;
   height: 100%;
   position: absolute;
   top: 0;
   left: 0;
   -webkit-transition: all 3s ease;
   -moz-transition: all 3s ease;
   -ms-transition: all 3s ease;
   -o-transition: all 3s ease;
   transition: all 3s ease;
}

#container IMG.play {
   opacity: 1;
}

#container IMG.picture {
   opacity: 0;
}

#container:hover IMG.play {
   opacity: 0;
}

#container:hover IMG.picture {
   opacity: 1;
} 
```

当您将鼠标悬停在容器上时，其中一个图像会淡入，而另一个会淡出。如果需要，您应该能够将任何东西包裹在锚中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:54:36.677

不要将`.hover`效果应用到你的`<img class="playButton">`，而是应用在它周围的`<a>`标签上。您的 img 不像图像，而是像一个链接（因为它在`<a>`标签中，就像被它隐藏了一样）。您应该始终采用更外部的选择器。

# php - 我正在尝试使用 PHP、mySQL 和 EXTjs 为吉他教师编写一个简单的 Web 应用程序

> ID：15891635
> 
> 赞同：0
> 
> 时间：2013-04-09T01:06:20.447
> 
> 标签：php, mysql, extjs3

我正在为学校/我自己做一个项目。这是项目描述...

“我正在考虑开办吉他教学业务，并想创建一个网络应用程序，让我能够跟踪学生、他们的课程安排、音乐兴趣、付款历史、年龄、电子邮件地址和电话号码。我还希望能够创建我们在课程中学习的信息的记录，以及学生当前拥有或随着时间推移而发展的技能列表。当学生每月付款时，我希望能够单击处理付款并将发票副本通过电子邮件发送给学生和我自己。为了维护学生记录，我将使用编辑按钮在每节课后更新信息。

我们必须使用 EXTjs 作为我们的表示层，PHP 作为逻辑层，mySQL 作为我们的数据库。

我对能够填充我的网格和页面布局感到非常有信心。***然而，我担心能够确保我可以生成一个学生应该有下一节课的日期（例如，今天是 4 月 8 日，这个学生的下一节课是 4 月 15 日，然后是 22 日等）***

我还没有开始我的 PHP 代码，我想知道是否有人能指出我正确的方向，因为我真的不知道根据学生开始的日期我将如何做我想做的事情。

我的数据库代码如下。

```
use mydatabase;

drop table teacher;
drop table student; 
drop table payment;
drop table skills;
drop table TeacherTrainingLog; 
drop table StudentTrainingLog;

CREATE TABLE teacher
    (TeacherID int,
    TeacherLast varchar(30), 
    TeacherFirst varchar(30),
    TeacherEmail varchar(254),
    TeacherDOB date, 
    TeacherAddress varchar(50), 
    TeacherCity varchar(30), 
    TeacherState char(2), 
    TeacherZip varchar(10), 
    TeacherPhone varchar(12), 
    TeacherUserId varchar(50), 
    TeacherPassword varchar(15));
alter table teacher add constraint TeacherPK primary key (TeacherID); 

CREATE TABLE student
    (StudentID int,
    StudentLast varchar(30), 
    StudentFirst varchar(30),
    StudentEmail varchar(254),
    DateStarted date, 
    StudentDOB date,
    MusicInterest text, 
    StudentAddress varchar(50), 
    StudentCity varchar(30), 
    StudentState char(2), 
    StudentZip varchar(10), 
    StudentPhone varchar(12), 
    StudentUserId varchar(50), 
    StudentPassword varchar(15),
    TeacherID int);
alter table student add constraint StudentPK primary key (StudentID); 
alter table student add constraint TeacherFK foreign key (TeacherID) references teacher(TeacherID);

CREATE TABLE payment
    (PaymentID int,
    PaymentDueDate date,
    PaymentAmount int,
    TeacherID int,
    StudentID int);
alter table payment add constraint PaymentPK primary key (PaymentID); 
alter table payment add constraint TeacherFK foreign key (TeacherID) references teacher(TeacherID);
alter table payment add constraint StudentFK foreign key (StudentID) references student(StudentID);

CREATE TABLE skills
    (SkillID int,
    SkillName varchar(30));
alter table skills add constraint SkillPK primary key (SkillID);

CREATE TABLE TeacherTrainingLog
    (TeacherID int,
    SkillID int,
    TeacherDateStarted date,
    Teacherlevel int,
    TeacherTrainingNotes text);
alter table TeacherTrainingLog add constraint TeachIDfk foreign key (TeacherID) references teacher (TeacherID); 
alter table TeacherTrainingLog add constraint SkillIDfk foreign key (SkillID) references skills (SkillID); 
alter table TeacherTrainingLog add constraint TeacherTraingingLogPK primary key (TeacherID, SkillID); 

CREATE TABLE StudentTrainingLog
    (StudentID int,
    SkillID int,
    StudentDateStarted date,
    Studentlevel int,
    StudentTrainingNotes text);
alter table StudentTrainingLog add constraint StudentIDfk foreign key (StudentID) references student (StudentID); 
alter table StudentTrainingLog add constraint SkillIDfk foreign key (SkillID) references skills (SkillID); 
alter table StudentTrainingLog add constraint StudentTraingingLogPK primary key (StudentID, SkillID); 

insert into teacher values (1, 'Bob', 'Joe','teacher.troxy@gmail.com','1988/5/4', '1120 Sweet St.', 'Boulder', 'CO', '55555', '555-555-5555','capn', 'crunch');

insert into student values (1, 'Joey', 'Bobby','student.troxy@gmail.com','2013/4/8', '1988/9/12', 'Led Zepplin, Taylor Swift', '2120 Garbage Can Ln', 'Boulder', 'CO', '55555', '333-333-333','student1', 

'first', 1);

insert into skills values (1, 'Chord');
insert into skills values (2, 'Strumming');
insert into skills values (3, 'Alternate Picking');
insert into skills values (4, 'Bend');
insert into skills values (5, 'Bend/Release');
insert into skills values (6, 'Hammer-on');
insert into skills values (7, 'Pull-off');
insert into skills values (8, 'Slide');
insert into skills values (9, 'Vibrato');
insert into skills values (10, 'Tapping');
insert into skills values (11, 'Natural Harmonic');
insert into skills values (12, 'Pinch Harmonic');
insert into skills values (13, 'Sweep Picking');
insert into skills values (14, 'Finger Picking'); 
```

谢谢你能给我的任何帮助。我希望这不是含糊的。我试图解释它以及我知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:57:55.373

假设课程将从开始日期开始每周进行一次，您可以在 MySQL 中执行类似的操作以从开始日期开始获取下一课：

```
SELECT DATE_ADD(DateStarted, INTERVAL 7 DAY) FROM `StudentID` WHERE StudentID = ?; 
```

但实际上，您可能想要的是让任何给定的学生知道他们的下一课是什么时候。它可能*不*取决于他们的开始日期，并且上课日期/时间会随着人们的日程安排而变化，所以我建议只使用一个与 StudentID 绑定的课程日期/时间的数据库表。您可以使用可以选择学生的表格来填充表格，输入日期范围以及课程的日期和时间，点击开始，您的 PHP 脚本会将课程日期输入表格。...或者您可以手动输入它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:58:11.673

如果你有固定的时间间隔，为什么不为每个学生节省工作日和上课时间呢？

创建一个名为“lession”的新表并连接学生 ID 和教师 ID。然后每一行都有课程 ID、学生 ID、教师 ID、工作日和时间。

# php - 获取 3 天前发布的帖子的正确方法？

> ID：15891637
> 
> 赞同：2
> 
> 时间：2013-04-09T01:06:28.930
> 
> 标签：php, mysql

我的数据有一个名为“日期”的列，其中包含 unix 日期格式的发布日期。我正在使用此查询来获取 3 天前发布的帖子

```
$result=mysql_query("SELECT * FROM track WHERE  
FROM_UNIXTIME(date,'%Y-%m-%d %h:%m:%s') > NOW() - INTERVAL 3 DAY AND
FROM_UNIXTIME(date,'%Y-%m-%d %h:%m:%s') < NOW() - INTERVAL 2 DAY"); 
```

这可行，但是，它会按日期选择 -48 小时和 -72 小时范围内的帖子。但我想按日期名称获取帖子。我的意思是，例如，如果一个帖子是在 40 小时前添加的，现在理论上它不是 48 小时（2 天），但如果我们查看日期名称，它是 2 天前。我怎样才能获取这样的帖子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T01:07:50.260

```
SELECT * FROM track WHERE  
FROM_UNIXTIME(date,'%Y-%m-%d') = CURDATE() - INTERVAL 2 DAY 
```

# emacs - 如何跟踪emacs菜单？

> ID：15891642
> 
> 赞同：0
> 
> 时间：2013-04-09T01:06:59.977
> 
> 标签：emacs

`emacs`当我从菜单中选择一个动作时，有没有办法查看正在做什么？
例如，我想查看单击时执行了哪些 lisp 命令

```
Tools --> Spell Checking --> Automatic spell checking 
```

这对于学习在初始化文件中包含哪些内容以默认启用自动拼写检查可能很有用。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:28:05.330

菜单被实现为键映射，并且`describe-key`通常处理鼠标事件，因此您可以简单地使用：

`C-h``k`（选择菜单项）

在这种情况下，我们看到：

```
<menu-bar> <tools> <spell> <flyspell-mode> runs the command
flyspell-mode, which is an interactive autoloaded Lisp function in
`flyspell.el'.

It is bound to <menu-bar> <tools> <spell> <flyspell-mode>.

(flyspell-mode &optional ARG)

Toggle on-the-fly spell checking (Flyspell mode).
[...] 
```

实际上跟踪 lisp 调用确实是一个不同的问题（`trace-function`内置`elp`分析库`debug-on-entry`和两个调试器通常都是非常有用的工具），但在这种情况下，单击菜单项只是交互调用它的函数，所以没有什么可做的痕迹 ：）

# jquery - .slideToggle() 上下移动时如何更改图像

> ID：15891644
> 
> 赞同：2
> 
> 时间：2013-04-09T01:07:46.463
> 
> 标签：jquery, image, show-hide

我的网站代码在这里不起作用是小提琴的链接：

*注意*JSFiddle 已为任何需要帮助的人更新...

[jsfiddle](http://jsfiddle.net/thakyZ/jBvSt/3/)

如果我单击图像它会改变但它不会变回来......第 39 行添加了图像：

```
$("#sel" + i).prepend("<img id='ico" + i + "' src='https://dl.dropbox.com/s/5z6muxkoq2ort9l/arrowside.png' width='24' height='24' /> "); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T01:43:55.377

您将点击事件绑定到元素之前，它们存在。您可以将 for 循环移到事件绑定语句之上，或者将它们分组到一个函数中，您可以在脚本的其余部分运行后调用该函数。见这个例子：http: [//jsfiddle.net/TPcHp/](http://jsfiddle.net/TPcHp/)

```
function bindClicks()
{
    $("#ico1").click(function()
    {
       //Rest of your code here
    }
    //More click binding fun
}

for (var i = 1; i < recipes.length + 1; i++)
    {
        $("#sel" + i).attr("data-hidden", i);
        $("#sel" + i).prepend("<img id='ico" + i + "' src='https://dl.dropbox.com/s/5z6muxkoq2ort9l/arrowside.png' width='24' height='24' /> ");
        $("#ico" + i).attr("data-hidden", i);            
    }

bindClicks(); 
```

您的 jsfiddle 的第 12 行还有一个错误，导致 javascript 无法运行。注意行尾的撇号

```
$('.info:not(#res' + hiddenid + ')').slideUp();' 
```

要解决您的切换问题，请在调用 slideToggle 之前尝试测试该元素是否隐藏（因为这将是中间过渡）：http: [//jsfiddle.net/ypAC9/](http://jsfiddle.net/ypAC9/)

```
$("#ico1").click(function()
    {        
        var hiddenid = $(this).data('hidden');
        if ($("#res" + hiddenid).is(":visible"))
        {
            $(this).attr("src", "https://dl.dropbox.com/s/5z6muxkoq2ort9l/arrowside.png");
        }
        else
        {
            $(this).attr("src", "https://dl.dropbox.com/s/hf4i6ww9xvemlc4/arrowdown.png");
        }

        $('#res' + hiddenid).slideToggle();
        $('.info:not(#res' + hiddenid + ')').slideUp();

    }); 
```

# c# - 如何将 C# 中的值序列化以存储在 WordPress 可以反序列化的 mySql 数据库中？

> ID：15891645
> 
> 赞同：1
> 
> 时间：2013-04-09T01:07:48.733
> 
> 标签：c#, mysql, wordpress, serialization

我正在构建一个更新 WordPress 数据库的应用程序；WordPress 在其某些字段中存储序列化值。我需要序列化值并将它们存储在 WordPress 中，以便 WordPress 仍然可以正常反序列化它们，就好像数据是直接输入到 WordPress 中一样。

有谁知道如何做到这一点？

这是在 mySql 中将值存储为序列化数据的示例：_voucherLocations = a:5:{i:0;s:3:"All";i:1;s:0:"";i:2;s:0 :"";i:3;s:0:"";i:4;s:0:"";}

我在 WordPress 表单中输入的所有内容都是“全部”当有人在我的 WinForms 表单中输入“全部”时，它必须以与上面在 mySql 数据库中看到的方式相同的方式存储，以便我在 WordPress 中使用的主题能够识别它并且可以用它。希望这很清楚。

我将 C# 与 Entity Framework 5 和 Microsoft 在 WinForms 应用程序中提供的最新 mySQL 数据适配器一起使用。顺便说一句，如果有人这样做并在尝试执行任何插入、更新或删除操作时遇到异常，那是因为 Entity Framework 将 mySQL 中的标识整数更改为无符号十进制；我不得不手动进入整个实体框架生成的代码，并将所有这些错误的数据声明从无符号十进制更改为 bigint。只是提醒任何尝试它的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:14:13.950

我会为此使用其中一个 JSON 库。[Json.NET](http://james.newtonking.com/pages/json-net.aspx)是ASP.NET MVC 附带的一个流行的，它可以作为 NuGet 包进行安装，如下所示：

```
PM> Install-Package Newtonsoft.Json 
```

您还可以尝试另一个越来越受欢迎的库，[ServiceStack Text](https://github.com/ServiceStack/ServiceStack.Text)：

```
PM> Install-Package ServiceStack.Text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T01:27:07.250

PHP具有[序列化和反序列化数据](http://php.net/serialize)的特殊功能，它不是JSON。我只知道一个可以在 .NET 中序列化和反序列化这些数据的库：[csphpserial](http://sourceforge.net/projects/csphpserial/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T01:12:33.183

看起来它只是 JSON 序列化。您应该能够在 C# 中轻松做到这一点。

看看[JSON.NET](http://james.newtonking.com/projects/json-net.aspx)

# ios - XCode 4.6 OpenGL|ES 集成了性能工具和自定义构建脚本

> ID：15891647
> 
> 赞同：1
> 
> 时间：2013-04-09T01:07:54.183
> 
> 标签：ios, opengl-es, xcode4.6

我有一个大型 iOS 项目，其中包含用 Jam 编写的复杂自定义构建脚本。该应用程序是通过运行脚本构建阶段编译的。

当我从 XCode 在设备上运行应用程序时，Debug Navigator 下带有 fps 计数器的性能托盘不显示。

对于一个简单的 XCode OpenGL|ES 示例应用程序，性能托盘显示得很好。

我可以检查/做些什么来让集成的 OpenGL|ES 性能工具正常工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:45:09.107

答案是转到 Product->Scheme->Edit Scheme 并在 Options 选项卡中将 OpenGL ES Frame Capture 从 Automatically Enabled 更改为 Enabled。

# php - symfony2 语法错误

> ID：15891648
> 
> 赞同：0
> 
> 时间：2013-04-09T01:08:03.890
> 
> 标签：php, symfony

我有以下代码：

```
public function postFormAction(Request $request)
{

    $cityId = $request->request->get('shopiousUserBundle_user')['location']['city']; 
    .....
} 
```

出于某种原因，这给了我一个语法错误，知道为什么吗？当我删除数组索引就像：

```
$cityId = $request->request->get('shopiousUserBundle_user') 
```

工作正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T01:10:19.253

从函数调用的结果中解引用数组仅在 PHP 5.4 或更高版本中可用。

见[http://php.net/manual/en/language.types.array.php#example-88](http://php.net/manual/en/language.types.array.php#example-88)

如果您使用的是较早的 PHP 版本，则必须执行以下操作

```
$data = $request->request->get('shopiousUserBundle_user');
$cityId = $data['location']['city']; 
```

# php - URL 结构 /page.php 与 PHP 中的 /page

> ID：15891653
> 
> 赞同：0
> 
> 时间：2013-04-09T01:09:25.027
> 
> 标签：php

我为我的网站建立了一些网站。它们都以 .php 结尾。

问题是如果您想查看必须输入的页面`website.com/page.php`而不是`website.com/page`. 如何在我的所有主页上实现这一点？

`/pages`有没有一种快速的方法可以做到这一点，或者您是否必须为所有到的设置转发`/page.php`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T01:31:26.770

在大多数情况下，这是使用 MVC 框架和路由实现的。它的工作方式是您不访问您向用户显示的单个网页的单个 .php 文件。每个请求都通过一个文件，您有一个路由器，您可以在其中定义路由，然后定义该路由将调用的操作控制器，然后您可以从那里选择要向用户显示的视图文件。很难用几句话来解释。无论如何，使用 MVC 你会得到很好的 URL-s`www.example.com/controller/action/param`

现在，如果您只想从文件中删除 .php 扩展名，可以将其放入 .htaccess 文件中：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

但是除了隐藏.php之外，它不会有任何好处。

你能做的最好的事情是阅读 MVC 框架、路由和前端控制器模式，然后从那里开始学习，这不仅仅是关于漂亮的 URL-s，还有更多的收获！如果您只想隐藏 .php 扩展名，请使用上面的代码。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:13:47.657

您将第一个文件保存为 index.php（index.php 是默认页面）并在内部包含或重定向所有其他文件。所以没有理由输入文件名。您也可以在 .htaccess 上使用 apache 来重写您的文件，但您必须小心这一点。

# jquery - 单击时jquery更改或切换图像

> ID：15891654
> 
> 赞同：0
> 
> 时间：2013-04-09T01:09:25.417
> 
> 标签：jquery, image, toggle

我正在尝试执行“单击 image1 时显示 image2，单击 image2 时显示 image3，单击 image3 时显示 image1 ...”的事情。

它适用于 2 个图像 - image1 变为 2，image2 变为 1，依此类推，但是当引入第三个图像时，它会变得混乱。我的代码是：

```
 <img id ="rotate_images" src="img1_on.png"/>

<script>

$('#rotate_images').on({
    'click': function() {
         var src = ($(this).attr('src') === 'img1_on.png')
            ? 'img2_on.png'
            : 'img1_on.png';
         $(this).attr('src', src);
         var src = ($(this).attr('src') === 'img2_on.png')
            ? 'img3_on.png'
            : 'img2_on.png';
         $(this).attr('src', src);

     }

}); 
```

我有点知道它为什么会发生 - image1 转到 image3，因为它跳过了第一个代码块，而 image3 转到 image2，出于同样的原因，但是......我可以添加一些东西来修复它吗？谢谢你的帮助。

克里斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T01:14:49.707

固定代码：

```
<img id ="rotate_images" src="img1_on.png"/>

<script>
$('#rotate_images').on({
    'click': function () {
        var origsrc = $(this).attr('src');
        var src = '';
        if (origsrc == 'img1_on.png') src = 'img2_on.png';
        if (origsrc == 'img2_on.png') src = 'img3_on.png';
        if (origsrc == 'img3_on.png') src = 'img1_on.png';
        $(this).attr('src', src);
    }
});
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T01:17:31.393

您可以使用`if`和`else if`。如果第一个条件为假，它只检查第二个条件，`else`如果两个条件都不为真，则进入。

```
$('#rotate_images').on({
    'click': function() {
         var newSrc,
             src = $(this).attr('src');
         if (src === 'img1_on.png') {
             newSrc = 'img2_on.png';
         } else if (src === 'img2_on.png') {
             newSrc = 'img3_on.png';
         } else {
             newSrc = 'img1_on.png';
         }
         $(this).attr('src', newSrc);
     }
}); 
```

但是，如果您想要一个更具可扩展性的解决方案，您可以制作一个使用数组的通用算法：

```
var imageSrcs = ['img1_on.png', 'img2_on.png', 'img3_on.png'];

$('#rotate_images').on({
    'click': function() {
         // find index of src within the array
         var index = imageSrcs.indexOf($(this).attr('src'));
         if (index < 0 || index == (imageSrcs.length - 1)) {
             // reset to first image
             index = 0;
         } else {
             // go to next image
             index++;
         }
         $(this).attr('src', imageSrcs[index]);
     }
}); 
```

# algorithm - AIML 解释器算法

> ID：15891655
> 
> 赞同：2
> 
> 时间：2013-04-09T01:09:29.767
> 
> 标签：algorithm, artificial-intelligence, bots, aiml

我正在尝试编写一个 AIML 解释器来开发 AI 机器人。我经历了几个目标解释器的实现，但我仍然觉得很难理解它背后的算法。

因此，如果有人可以描述一般的目标解释器算法或指出我可以用来理解的正确规范或文档，那将是一个很大的帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-21T06:41:09.693

AIML 解释器使用**模式匹配**技术。它找到关键字的最佳和最长的模式匹配。

基本上，它将在整个知识库的类别中**搜索**`<pattern>`与关键字匹配的标签中包含的值。

然后，它将**返回**`<template>`与匹配的标签对应的标签中包含的值`<pattern>`。

搜索区域也有**优先级。**例如，如果聊天机器人对话在某个特定的范围内`<topic>`，它将首先搜索主题内的匹配项。如果没有找到匹配，它将搜索整个知识库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:41:00.847

[您应该在https://code.google.com/p/program-ab/](https://code.google.com/p/program-ab/)使用更新的 Java AIML 2.0 解释器 Program AB

# jax-ws - 使用 POJO 业务对象项目创建 JAX-WS Web 服务

> ID：15891656
> 
> 赞同：0
> 
> 时间：2013-04-09T01:09:31.643
> 
> 标签：jax-ws, pojo

除了我的 JPA 项目之外，我有一个正在编写的服务，我使用 POJO 在我的无状态会话 bean 和我的 Java Bean webservice 之间充当一种角色。但是，每当我尝试通过向导生成 JAX-WS 服务时，我都会收到一个错误，它基本上告诉我业务对象不在新 Web 服务项目的构建路径中。他们不会是，因为我还没有建立这个项目。
我的问题是如何让向导将我的 POJO 放在构建路径中，这样我就不会得到那个异常？

# android - 关闭屏幕时应用程序强制关闭

> ID：15891659
> 
> 赞同：0
> 
> 时间：2013-04-09T01:10:05.010
> 
> 标签：android, android-logcat

我不知道为什么我的应用程序在我关闭屏幕时强制关闭，这是 logcat 我的应用程序有滚动文本，显示小部件，获取用户位置，有一个寻呼机，获取当前时间，获取电池电量，所以代码很长，所以现在我只发布 logcat，也许你可以用它找出一些东西如果你需要一些代码让我知道

```
04-09 02:57:56.498: D/Evolution Launcher(16574): Stopping
04-09 02:57:56.623: W/IInputConnectionWrapper(16574): getExtractedText on inactive InputConnection
04-09 02:57:56.639: W/IInputConnectionWrapper(16574): getTextBeforeCursor on inactive InputConnection
04-09 02:57:56.655: W/IInputConnectionWrapper(16574): getSelectedText on inactive InputConnection
04-09 02:57:56.662: W/IInputConnectionWrapper(16574): getTextAfterCursor on inactive InputConnection
04-09 02:57:56.670: W/IInputConnectionWrapper(16574): getExtractedText on inactive InputConnection
04-09 02:57:56.670: W/IInputConnectionWrapper(16574): getTextBeforeCursor on inactive InputConnection
04-09 02:57:56.850: D/dalvikvm(16574): GC_EXPLICIT freed 1120K, 6% free 20548K/21696K, paused 3ms+13ms, total 140ms
04-09 02:57:56.959: W/IInputConnectionWrapper(16574): getExtractedText on inactive InputConnection
04-09 02:57:57.053: W/ResourceType(16574): Failure getting entry for 0x7f030004 (t=2 e=4) in package 0 (error -75)
04-09 02:57:57.053: D/AndroidRuntime(16574): Shutting down VM
04-09 02:57:57.053: W/dalvikvm(16574): threadid=1: thread exiting with uncaught exception (group=0x41356930)
04-09 02:57:57.069: E/AndroidRuntime(16574): FATAL EXCEPTION: main
04-09 02:57:57.069: E/AndroidRuntime(16574): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.doublep.evolution/com.doublep.evolution.LauncherActivity}: android.content.res.Resources$NotFoundException: Resource ID #0x7f030004
04-09 02:57:57.069: E/AndroidRuntime(16574):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-09 02:57:57.069: E/AndroidRuntime(16574):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-09 02:57:57.069: E/AndroidRuntime(16574):    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3692)
04-09 02:57:57.069: E/AndroidRuntime(16574):    at android.app.ActivityThread.access$700(ActivityThread.java:141)
04-09 02:57:57.069: E/AndroidRuntime(16574):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1240)
04-09 02:57:57.069: E/AndroidRuntime(16574):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-09 02:57:57.069: E/AndroidRuntime(16574):    at android.os.Looper.loop(Looper.java:137)
04-09 02:57:57.069: E/AndroidRuntime(16574):    at android.app.ActivityThread.main(ActivityThread.java:5041)
04-09 02:57:57.069: E/AndroidRuntime(16574):    at java.lang.reflect.Method.invokeNative(Native Method)
04-09 02:57:57.069: E/AndroidRuntime(16574):    at java.lang.reflect.Method.invoke(Method.java:511)
04-09 02:57:57.069: E/AndroidRuntime(16574):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-09 02:57:57.069: E/AndroidRuntime(16574):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-09 02:57:57.069: E/AndroidRuntime(16574):    at dalvik.system.NativeStart.main(Native Method)
04-09 02:57:57.069: E/AndroidRuntime(16574): Caused by: android.content.res.Resources$NotFoundException: Resource ID #0x7f030004
04-09 02:57:57.069: E/AndroidRuntime(16574):    at android.content.res.Resources.getValue(Resources.java:1014)
04-09 02:57:57.069: E/AndroidRuntime(16574):    at android.content.res.Resources.loadXmlResourceParser(Resources.java:2139)
04-09 02:57:57.069: E/AndroidRuntime(16574):    at android.content.res.Resources.getLayout(Resources.java:853)
04-09 02:57:57.069: E/AndroidRuntime(16574):    at android.view.LayoutInflater.inflate(LayoutInflater.java:394)
04-09 02:57:57.069: E/AndroidRuntime(16574):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-09 02:57:57.069: E/AndroidRuntime(16574):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
04-09 02:57:57.069: E/AndroidRuntime(16574):    at android.app.Activity.setContentView(Activity.java:1881)
04-09 02:57:57.069: E/AndroidRuntime(16574):    at com.doublep.evolution.LauncherActivity.onCreate(LauncherActivity.java:455)
04-09 02:57:57.069: E/AndroidRuntime(16574):    at android.app.Activity.performCreate(Activity.java:5104)
04-09 02:57:57.069: E/AndroidRuntime(16574):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-09 02:57:57.069: E/AndroidRuntime(16574):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-09 02:57:57.069: E/AndroidRuntime(16574):    ... 12 more
04-09 02:57:57.116: I/Process(16574): Sending signal. PID: 16574 SIG: 9 
```

我已将 setContentView 更改为不同的布局（不同的文件，从旧文件复制的内容），它给了我不同的强制关闭

```
04-09 03:34:25.514: D/dalvikvm(18864): GC_EXPLICIT freed 1259K, 6% free 20440K/21728K, paused 2ms+7ms, total 36ms
04-09 03:34:28.553: D/Evolution Launcher(18864): Stopping
04-09 03:34:28.756: W/IInputConnectionWrapper(18864): getExtractedText on inactive InputConnection
04-09 03:34:28.772: W/IInputConnectionWrapper(18864): getTextBeforeCursor on inactive InputConnection
04-09 03:34:28.780: W/IInputConnectionWrapper(18864): getSelectedText on inactive InputConnection
04-09 03:34:28.780: W/IInputConnectionWrapper(18864): getTextAfterCursor on inactive InputConnection
04-09 03:34:28.780: W/IInputConnectionWrapper(18864): getExtractedText on inactive InputConnection
04-09 03:34:28.787: W/IInputConnectionWrapper(18864): getTextBeforeCursor on inactive InputConnection
04-09 03:34:28.795: W/IInputConnectionWrapper(18864): getExtractedText on inactive InputConnection
04-09 03:34:28.795: W/IInputConnectionWrapper(18864): getTextBeforeCursor on inactive InputConnection
04-09 03:34:28.803: W/IInputConnectionWrapper(18864): getSelectedText on inactive InputConnection
04-09 03:34:28.803: W/IInputConnectionWrapper(18864): getTextAfterCursor on inactive InputConnection
04-09 03:34:28.811: W/IInputConnectionWrapper(18864): getExtractedText on inactive InputConnection
04-09 03:34:28.819: W/IInputConnectionWrapper(18864): getTextBeforeCursor on inactive InputConnection
04-09 03:34:28.819: W/IInputConnectionWrapper(18864): getSelectedText on inactive InputConnection
04-09 03:34:28.826: W/IInputConnectionWrapper(18864): getTextAfterCursor on inactive InputConnection
04-09 03:34:28.834: W/IInputConnectionWrapper(18864): beginBatchEdit on inactive InputConnection
04-09 03:34:28.834: W/IInputConnectionWrapper(18864): endBatchEdit on inactive InputConnection
04-09 03:34:28.834: W/IInputConnectionWrapper(18864): getExtractedText on inactive InputConnection
04-09 03:34:28.834: W/IInputConnectionWrapper(18864): getTextBeforeCursor on inactive InputConnection
04-09 03:34:28.842: W/IInputConnectionWrapper(18864): getSelectedText on inactive InputConnection
04-09 03:34:28.842: W/IInputConnectionWrapper(18864): getTextAfterCursor on inactive InputConnection
04-09 03:34:28.858: W/IInputConnectionWrapper(18864): beginBatchEdit on inactive InputConnection
04-09 03:34:28.858: W/IInputConnectionWrapper(18864): endBatchEdit on inactive InputConnection
04-09 03:34:29.569: D/dalvikvm(18864): GC_FOR_ALLOC freed 1154K, 7% free 21232K/22604K, paused 51ms, total 66ms
04-09 03:34:29.819: D/dalvikvm(18864): GC_FOR_ALLOC freed 201K, 7% free 23846K/25416K, paused 25ms, total 25ms
04-09 03:34:30.170: D/dalvikvm(18864): GC_FOR_ALLOC freed 3K, 6% free 26556K/28128K, paused 21ms, total 24ms
04-09 03:34:30.420: D/Evolution Launcher(18864): Loading variables
04-09 03:34:30.420: D/Evolution Launcher(18864): Restoring prefs
04-09 03:34:30.420: D/Evolution Launcher(18864): Screen density actions
04-09 03:34:30.467: W/IInputConnectionWrapper(18864): getExtractedText on inactive InputConnection
04-09 03:34:30.475: I/Choreographer(18864): Skipped 71 frames!  The application may be doing too much work on its main thread.
04-09 03:34:30.631: E/ActivityThread(18864): Activity com.doublep.evolution.LauncherActivity has leaked IntentReceiver com.doublep.evolution.LauncherActivity$4@42858a78 that was originally registered here. Are you missing a call to unregisterReceiver()?
04-09 03:34:30.631: E/ActivityThread(18864): android.app.IntentReceiverLeaked: Activity com.doublep.evolution.LauncherActivity has leaked IntentReceiver com.doublep.evolution.LauncherActivity$4@42858a78 that was originally registered here. Are you missing a call to unregisterReceiver()?
04-09 03:34:30.631: E/ActivityThread(18864):    at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:795)
04-09 03:34:30.631: E/ActivityThread(18864):    at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:596)
04-09 03:34:30.631: E/ActivityThread(18864):    at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1316)
04-09 03:34:30.631: E/ActivityThread(18864):    at android.app.ContextImpl.registerReceiver(ContextImpl.java:1296)
04-09 03:34:30.631: E/ActivityThread(18864):    at android.app.ContextImpl.registerReceiver(ContextImpl.java:1290)
04-09 03:34:30.631: E/ActivityThread(18864):    at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:423)
04-09 03:34:30.631: E/ActivityThread(18864):    at com.doublep.evolution.LauncherActivity.batteryLevel(LauncherActivity.java:144)
04-09 03:34:30.631: E/ActivityThread(18864):    at com.doublep.evolution.LauncherActivity.access$0(LauncherActivity.java:116)
04-09 03:34:30.631: E/ActivityThread(18864):    at com.doublep.evolution.LauncherActivity$1.run(LauncherActivity.java:985)
04-09 03:34:30.631: E/ActivityThread(18864):    at android.os.Handler.handleCallback(Handler.java:725)
04-09 03:34:30.631: E/ActivityThread(18864):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-09 03:34:30.631: E/ActivityThread(18864):    at android.os.Looper.loop(Looper.java:137)
04-09 03:34:30.631: E/ActivityThread(18864):    at android.app.ActivityThread.main(ActivityThread.java:5041)
04-09 03:34:30.631: E/ActivityThread(18864):    at java.lang.reflect.Method.invokeNative(Native Method)
04-09 03:34:30.631: E/ActivityThread(18864):    at java.lang.reflect.Method.invoke(Method.java:511)
04-09 03:34:30.631: E/ActivityThread(18864):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-09 03:34:30.631: E/ActivityThread(18864):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-09 03:34:30.631: E/ActivityThread(18864):    at dalvik.system.NativeStart.main(Native Method)
04-09 03:34:30.701: W/IInputConnectionWrapper(18864): getTextBeforeCursor on inactive InputConnection
04-09 03:34:30.701: D/AndroidRuntime(18864): Shutting down VM
04-09 03:34:30.701: W/dalvikvm(18864): threadid=1: thread exiting with uncaught exception (group=0x41356930)
04-09 03:34:30.709: E/AndroidRuntime(18864): FATAL EXCEPTION: main
04-09 03:34:30.709: E/AndroidRuntime(18864): java.lang.RuntimeException: Error receiving broadcast Intent { act=android.intent.action.BATTERY_CHANGED flg=0x60000010 (has extras) } in com.doublep.evolution.LauncherActivity$4@42858a78
04-09 03:34:30.709: E/AndroidRuntime(18864):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:768)
04-09 03:34:30.709: E/AndroidRuntime(18864):    at android.os.Handler.handleCallback(Handler.java:725)
04-09 03:34:30.709: E/AndroidRuntime(18864):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-09 03:34:30.709: E/AndroidRuntime(18864):    at android.os.Looper.loop(Looper.java:137)
04-09 03:34:30.709: E/AndroidRuntime(18864):    at android.app.ActivityThread.main(ActivityThread.java:5041)
04-09 03:34:30.709: E/AndroidRuntime(18864):    at java.lang.reflect.Method.invokeNative(Native Method)
04-09 03:34:30.709: E/AndroidRuntime(18864):    at java.lang.reflect.Method.invoke(Method.java:511)
04-09 03:34:30.709: E/AndroidRuntime(18864):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-09 03:34:30.709: E/AndroidRuntime(18864):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-09 03:34:30.709: E/AndroidRuntime(18864):    at dalvik.system.NativeStart.main(Native Method)
04-09 03:34:30.709: E/AndroidRuntime(18864): Caused by: java.lang.IllegalArgumentException: Receiver not registered: com.doublep.evolution.LauncherActivity$4@42858a78
04-09 03:34:30.709: E/AndroidRuntime(18864):    at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:657)
04-09 03:34:30.709: E/AndroidRuntime(18864):    at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1339)
04-09 03:34:30.709: E/AndroidRuntime(18864):    at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:445)
04-09 03:34:30.709: E/AndroidRuntime(18864):    at com.doublep.evolution.LauncherActivity$4.onReceive(LauncherActivity.java:121)
04-09 03:34:30.709: E/AndroidRuntime(18864):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:758)
04-09 03:34:30.709: E/AndroidRuntime(18864):    ... 9 more
04-09 03:34:30.741: I/Process(18864): Sending signal. PID: 18864 SIG: 9 
```

当我关闭屏幕时，您会看到日志“正在停止”，在 onCreate 中您会看到“正在加载变量”，因此这意味着这次它正在重新启动，但无论如何都会崩溃

**更新：** 我的应用程序以横向模式运行，所以我的主要布局仅在陆地布局内，显然第一个 logcat 是当我只有横向时，第二个是当我在纵向布局内时

**更新 2** 0x7f030004 是一个名为 numpad.xml 的布局，它没有被使用，删除它后，值重新关联到 settings.xml，同样的问题

**更新3** 我已经注释掉了broadcastReceiver，这是我得到的logcat [http://pastebin.com/CXYA7bJe](http://pastebin.com/CXYA7bJe)

**更新 4 部分解决** 好的，所以，当我只有横向布局时，第一个 logcat 给了我，将它转移到纵向解决了第一个 logcat

第二个logcat通过注释掉broadcastReceiver解决

这就是广播接收器的样子

```
batteryLevelReceiver = new BroadcastReceiver() {
            public void onReceive(Context context, Intent intent) {
                context.unregisterReceiver(this);
                int rawlevel = intent.getIntExtra("level", -1);
                int scale = intent.getIntExtra("scale", -1);
                int level = -1;
                if (rawlevel >= 0 && scale > 0) {
                    level = (rawlevel * 100) / scale;
                }
                if (animToBattery == true) {
                    if (animValue < level * 1.8) {
                        animValue = animValue +2;
                    }
                    else {
                        animToBattery = false;
                    }
                    ArcView.value = (float)(animValue);
                }
                else {
                    ArcView.value = (float)(level * 1.8);
                }

            }
        };
        IntentFilter batteryLevelFilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
        registerReceiver(batteryLevelReceiver, batteryLevelFilter); 
```

有什么问题吗？我在 onStop() 中注销它，我也不知道那里`context.unregisterReceiver(this);`在做什么，但删除它并不能解决任何问题

**更新 5** 初始化变量后

[http://pastebin.com/PAuw5fmd](http://pastebin.com/PAuw5fmd)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:06:38.527

`Caused by: java.lang.IllegalArgumentException: Receiver not registered: com.doublep.evolution.LauncherActivity$4@42858a78`

并且`java.lang.RuntimeException: Error receiving broadcast Intent { act=android.intent.action.BATTERY_CHANGED flg=0x60000010 (has extras) }`看起来很可疑。如果电池电量发生变化，您是否真的注册了广播接收器？

`Activity com.doublep.evolution.LauncherActivity has leaked IntentReceiver com.doublep.evolution.LauncherActivity$4@42858a78 that was originally registered here. Are you missing a call to unregisterReceiver()?`

我越来越倾向于广播接收器存在问题的事实。

**第一个日志猫**

再次通过 logcat 判断，我看到有一个资源未找到异常 -`Caused by: android.content.res.Resources$NotFoundException: Resource ID #0x7f030004`

检查`R.java`文件指向的内容`#0x7f030004`并查看资源是否实际存在。

**第二个日志猫**

`Caused by: java.lang.IllegalArgumentException: Receiver not registered: com.doublep.evolution.LauncherActivity$4@42858a78`

检查您是否在 LauncherActivity 中注册了接收器。

**更新**

尝试制作`IntentFilter batteryLevelFilter`全局然后初始化它`batteryLevel`。我假设这是由于 Android 无法识别您的接收器的分辨率范围。

# c++ - 二进制搜索插入字符字符串。错误在哪里？

> ID：15891661
> 
> 赞同：1
> 
> 时间：2013-04-09T01:10:06.310
> 
> 标签：c++, algorithm, sorting, binary-search

我有字符串数组。我必须通过二进制搜索算法在字符串数组中找到一个字符字符串。如果存在这个字符串，则函数必须返回位置并返回真，否则该函数必须返回在数组中插入字符串的位置和假。我在某个地方有错误，但我不知道在哪里（（

例子：

```
bool Binary_search ( char * arr_strings[], int & position, const char * search_string )
{
    int start = 0 ;
    int end = 10 - 1; // arr_strings [10]
    int for_compare;
    int middle;

    while ( start <= end )
    {
        middle = ( start + end ) / 2;
        for_compare = strcmp ( arr_strings[middle], search_string  );

        if ( for_compare > 0 )
        {
            start = middle + 1;
        } 
        else if ( for_compare < 0 )
        {
            end = middle - 1;
        }
        else
        {
            // if search_string is found in array, then function return position in array of strings and return true
            position = middle;
            return true;
        }
    }
    // if search_string is not found in array, then function must return position for insert string and return false 
    position = middle;
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:16:26.060

问题是您的插入位置不对。

您应该执行以下操作：

```
bool Binary_search ( char * arr_strings[], const char * search_string )
{           //^^^you are not doing recursive, so you don't need position as parameter 
    int start = 0 ;
    int end = 10 - 1; // arr_strings [10]
    int for_compare;
    int middle;
    int position = -1; 

    while ( start <= end )
    {
        middle = ( start + end ) / 2;
        for_compare = strcmp ( arr_strings[middle], search_string  );

        if ( for_compare > 0 )
        {   //^^^here should switch the order
            end = middle - 1;
        } 
        else if ( for_compare < 0 )
        {
            start = middle + 1;
        }
        else
        {
            position = middle;
            return true;
        }
    }

    if (position == -1)
    {
        if(strcmp(arr_strings[middle],search_string) <0 )
        {
            position = middle + 1;
        }else 
        {
            position = middle;
         }
    }

    return position;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T01:20:00.937

我想也许应该是：

```
if ( for_compare > 0 )
{
    end = middle - 1;
} 
else if ( for_compare < 0 )
{
    start = middle + 1;
} 
```

# directoryservices - System.DirectoryServices 在生产中部署时产生 .PageRequestManagerServerErrorException

> ID：15891667
> 
> 赞同：1
> 
> 时间：2013-04-09T01:11:08.433
> 
> 标签：directoryservices

我收到此错误

消息：Sys.WebForms.PageRequestManagerServerErrorException：处理服务器上的请求时发生未知错误。服务器返回的状态码是：500

当我在 IIS 中运行我的应用程序时。

我认为是 System.Directory.Services 产生了错误。这不会在我的本地机器上产生一个。

下面是我的代码片段。

```
string[] a = Request.RequestContext.HttpContext.User.Identity.Name.Split('\\');
System.DirectoryServices.DirectoryEntry ADEntry = new    
     System.DirectoryServices.DirectoryEntry("WinNT://" + a[0] + "/" + a[1]);
string Arranger = ADEntry.Properties["FullName"].Value.ToString(); 
```

产生的错误：

消息：Sys.WebForms.PageRequestManagerServerErrorException：处理服务器上的请求时发生未知错误。从服务器返回的状态码是：500 行：940 字符：13 代码：0 `URI: http://hrmd/ScriptResource.axd? d=qoTxFIEhQnPsyvjBHKKk60V8KyVGjuJO4u_QPoCxnkdWP8h53oPF6xWRYBSVhraJ1rWB7MwHQ0UUukOxxZP-__EfNy8U9HNSn9H4TG_rigG5a2MrWox2WPR4280GIrb57NZ6Ajhx2gKgc0sQKMnAVw2&t=48e38e19`

提前致谢。

# android - NoSuchMethod: isDestroyed()

> ID：15891669
> 
> 赞同：7
> 
> 时间：2013-04-09T01:11:15.213
> 
> 标签：android, android-activity

我只是在**Activity上调用****isDestroyed()**，我得到了这个 ex：

 **```
04-09 03:08:12.692: E/AndroidRuntime(13234): FATAL EXCEPTION: main
04-09 03:08:12.692: E/AndroidRuntime(13234): java.lang.NoSuchMethodError: android.app.Activity.isDestroyed
04-09 03:08:12.692: E/AndroidRuntime(13234):    at hu.illion.beentaps.util.ActivityKiller.killAllPastActivites(ActivityKiller.java:16)
04-09 03:08:12.692: E/AndroidRuntime(13234):    at hu.illion.beentaps.MapBeenActivity$1.onClick(MapBeenActivity.java:75)
04-09 03:08:12.692: E/AndroidRuntime(13234):    at android.view.View.performClick(View.java:4084)
04-09 03:08:12.692: E/AndroidRuntime(13234):    at android.view.View$PerformClick.run(View.java:16966)
04-09 03:08:12.692: E/AndroidRuntime(13234):    at android.os.Handler.handleCallback(Handler.java:615)
04-09 03:08:12.692: E/AndroidRuntime(13234):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-09 03:08:12.692: E/AndroidRuntime(13234):    at android.os.Looper.loop(Looper.java:137)
04-09 03:08:12.692: E/AndroidRuntime(13234):    at android.app.ActivityThread.main(ActivityThread.java:4931)
04-09 03:08:12.692: E/AndroidRuntime(13234):    at java.lang.reflect.Method.invokeNative(Native Method)
04-09 03:08:12.692: E/AndroidRuntime(13234):    at java.lang.reflect.Method.invoke(Method.java:511)
04-09 03:08:12.692: E/AndroidRuntime(13234):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
04-09 03:08:12.692: E/AndroidRuntime(13234):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
04-09 03:08:12.692: E/AndroidRuntime(13234):    at dalvik.system.NativeStart.main(Native Method) 
```

我在列表中有活动，我想遍历它并完成所有活动：

```
for (Activity act : Variables.pastActivites) {
        try {

            Log.i("Killing: ", act.getLocalClassName());
            if (!act.isDestroyed()) {
                act.overridePendingTransition(0, 0);
                act.finish();
            }
            else
            {
                Variables.pastActivites.remove(act);
            }

        } catch (Exception ex) {
            Log.i("KillerAct: ", ex.toString());
        }

    } 
```

我什至可以阅读官方文档，其中有一个名为 isDestroyed() 的函数。现在怎么办？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-09T01:31:10.080

[`Activity.isDestroyed()`](http://developer.android.com/reference/android/app/Activity.html#isDestroyed%28%29)从 API 级别 17 开始可用。如果您的应用程序设置适用于较低的 API，您将获得此`Exception`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-15T07:11:22.247

你可以这样写来避免这个问题：

```
if (Build.VERSION.SDK_INT >= VERSION_CODES.JELLY_BEAN_MR1) {
    if (!act.isDestroyed()) {
        act.overridePendingTransition(0, 0);
        act.finish();
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-09T01:32:27.867

根据[Activity.onDestroyed()](http://developer.android.com/reference/android/app/Activity.html#isDestroyed%28%29)，这在 API 级别 17 及更高版本中可用，这是最新的 Android 版本 4.2+

您尝试在哪个 Android 版本上运行此代码？**

# c - C 指针算术效率

> ID：15891673
> 
> 赞同：4
> 
> 时间：2013-04-09T01:12:11.663
> 
> 标签：c, performance, pointers

我已经看到了指针算术的解释（例如[Pointer Arithmetic](https://stackoverflow.com/questions/394767/pointer-arithmetic)）。但我想知道两者之间是否有真正的区别：
鉴于：

```
int* arr = (int*) malloc(sizeof(int) * 3); 
```

做：

```
&(arr[1]) 
```

和：

```
arr + 1 
```

以任何方式不同，除了语法。两者在技术上更有效吗？是否有特定的上下文可以在第一个上使用指针成瘾？我看到了[**Printing 1 to 1000 without loop or conditionals**](https://stackoverflow.com/questions/4568645/printing-1-to-1000-without-loop-or-conditionals#4568650)的一个例子。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T01:17:03.740

`&arr[1]`和`arr + 1`（和`&1[arr]`！）是相同的，并且都计算相同的指针。根据 C 标准，[§6.5.3.2](http://c0x.coding-guidelines.com/6.5.3.2.html)：

> 一元 & 运算符产生其操作数的地址....
> 
> ...如果操作数是 [] 运算符的结果，则 & 运算符和 [] 所隐含的一元 * 都不会被计算，结果就像 & 运算符被删除并且 [] 运算符被更改到 + 运算符。

因此，根据规范，`&arr[1]`要像编写的一样进行评估`arr + 1`。

使用其中一个通常归结为偏好。就个人而言，`&arr[x]`当我想指代一个指向该元素的指针时，以及`arr + x`当我想引用从`x`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T01:21:57.893

不，没有区别，甚至在性能上也没有（除非我们谈论的是编译时间），因为：

*   `arr[1]`相当于`*(arr + 1)`和
*   在`&(*(arr + 1))`取消引用和地址运算符都没有做任何事情（C 标准明确指出，在这种情况下不会发生取消引用），因此运算符相互抵消。

因此，在解析和 AST 构建阶段之后，编译器最终只能`arr + 1`在两种情况下结束。

# python - 如何锁定和修改每个单元“组”的字典安全性

> ID：15891676
> 
> 赞同：0
> 
> 时间：2013-04-09T01:12:28.603
> 
> 标签：python, python-2.7, thread-safety

以下代码不是我的真实代码。我问这个问题很简单。
这是 Web 应用程序的服务器端代码。

我想做的是在修改组时锁定组，但我不知道如何。
例如，属于“GroupA”的用户向服务器发布了请求，我想将 user_id 添加到“GroupA”安全字典中。
我只想锁定“GroupA”包含的字典。我不想锁定字典“组”包含。
因为属于'GroupB'的用户从不修改'GroupA'包含的字典
请给我建议。

```
# this dictionary is mutable which means new groups could be added anytime
groups = {'GroupA': {}, 'GroupB': {}, 'GroupC': {}}

def request_handler(request):
    # Assuming these come from the user's http post
    user_id = request.userid
    user_group = request.user_group

    group = groups[user_group]  # a group contains user_id's dictionary
    if user_id in group:
        # the value of the key 'user_id' is the number of the user's post
        group[user_id] = group[user_id] + 1
    else:
        group.append(user_id)
        group[user_id] = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:53:04.227

每个组都需要一个单独的锁。例如：

```
groups = {'GroupA': (Threading.Lock(), {}), 'GroupB': (Threading.Lock(), {})}

def request_handler(request):
    # Assuming these come from the user's http post
    user_id = request.userid
    user_group = request.user_group

    glock, group = groups[user_group]
    with glock:
        group[user_id] = group.get(user_id, 0) + 1 
```

如果组也是动态的，则您还需要一个锁`groups`，必须在添加或删除任何组之前获取该锁。

考虑其他方法：

1.  将您自己的映射类用于子类 dict 并适当使用锁的组。
2.  有一个线程负责读取和更新组。让其他线程通过一对[`Queue`s](http://docs.python.org/2/library/queue.html)向它发送任务。（现在您根本不需要锁定。）

# playframework - Play Framework 核心依赖管理/排除

> ID：15891679
> 
> 赞同：5
> 
> 时间：2013-04-09T01:12:43.177
> 
> 标签：playframework, playframework-2.1

我们正在使用 play 2.1.1 (scala)，并且为了限制我们的依赖关系，我们发现有几个较旧的 dep 直接由 play 框架加载。

具体来说， oauth.signpost 引入了 http-components 4.0 （反过来又引入了 commons-codec 1.3 ），而我们对 http-componts 4.1 和 commons-codec 1.6 有其他依赖项

该领域的文档似乎非常稀疏-至少在较旧的 play 1.2.x 中，dependencies.yml 更加明确，但我找不到当前 2.1.x 版本的任何参考。

我不想不得不在 ${PLAY2_HOME}/framework/project 中使用框架的 Build.scala 来删除依赖项（在这个特定的应用程序中我们永远不需要 oauth.signpost ），但到目前为止这似乎是唯一的方法.

任何指针？

（编辑：我也遇到过这个：[Play Framework 2.1 Remove a core dependency](https://stackoverflow.com/questions/15877272/play-framework-2-1-remove-a-core-dependency) which is related to a specific transitive dependency,我希望能够做的是从核心框架中删除整个显式依赖）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T22:57:49.350

谢谢@nico_ekito！

您为我设置了正确的方向，通过为播放版本本身声明明确的排除，我已经能够删除核心框架依赖项：

```
val appDependencies = Seq(
  // play framework drags in quite a few deps we dont need. this is how we pare it back.
  ("play" %    "play_2.10" %   "2.1.1")
     .exclude("oauth.signpost", "signpost-core")
     .exclude("oauth.signpost","signpost-commonshttp4"),

  "com.github.tototoshi" %% "scala-csv" % "0.7.0",
  "se.radley" %% "play-plugins-salat" % "1.2",
  "org.specs2" %% "specs2" % "1.14" % "test"
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T08:15:34.993

我不知道如何排除核心依赖项，但您可以尝试排除`Build.scala`文件中的传递依赖项：

```
val appDependencies = Seq(
     ...
     ("oauth.signpost" % "signpost-commonshttp4" % "1.2.1.2") .exclude("org.apache.httpcomponents", "httpclient")
    ) 
```

或使用[intransitive()](https://github.com/harrah/xsbt/wiki/Library-Management)方法：

```
val appDependencies = Seq(
     ...
     ("oauth.signpost" % "signpost-commonshttp4" % "1.2.1.2") .intransitive()
    ) 
```

这不是完美的解决方案，但它可能会对您有所帮助。

# ios - 从 ViewController 加载故事板（UITableViewController）

> ID：15891682
> 
> 赞同：3
> 
> 时间：2013-04-09T01:13:05.873
> 
> 标签：ios

我想从 ViewController 加载故事板。目前我的代码如下所示：

```
- (IBAction)Button_Action:(id)sender
{
    UIStoryboard * sb = [UIStoryboard storyboardWithName:@"AddReportView" bundle:nil];
    AddReportViewVC * vc = [sb instantiateViewControllerWithIdentifier:@"AddReportView"];
    [self.navigationController pushViewController:vc animated:true];
} 
```

视图被推送，但我没有看到我预期的视图控制器（这是一个 UITableViewController），而是我只看到一个空的灰色视图控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:39:06.163

问题是 xcode 生成的代码的一个功能导致表视图控制器刷新内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T02:39:01.877

请记住，在标识符名称和情节提要名称中，大写都很重要。我错了很多次...

# objective-c - forwardInvocation vs class_addMethod

> ID：15891685
> 
> 赞同：1
> 
> 时间：2013-04-09T01:13:27.417
> 
> 标签：objective-c, cocoa-touch

在我的实现中，我可以选择使用 class_addMethod 在运行时创建新方法，或者我可以依赖 forwardInvocation/NSProxy。当这两种方法都可以作为解决方案时，您更喜欢哪种方法以及如何确定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:20:13.823

我更喜欢`class_addMethod`.

1.  因为它比`forwardInvocation`（搜索方法列表，尝试forwardTarget，create `NSInvocation`，这确实是解析选择器的最后尝试）快得多
2.  添加新方法比在一个地方处理所有动态方法调用更清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T12:41:29.087

`class_addMethod`是最好的选择。因为它可以使用方法搜索缓存来改进查找匹配方法地址。

> 参考自：BOOK“Effective Objective-C 2.0”第 12 期

# javascript - 在加载最后一页之前显示一些 html

> ID：15891686
> 
> 赞同：0
> 
> 时间：2013-04-09T01:13:37.987
> 
> 标签：javascript, jquery, ruby-on-rails, html, angularjs

我正在使用 rails 发出搜索请求。

搜索表单的操作是某个路径 "/results/foo" .. 它会命中一个控制器，该控制器对输入进行一些验证，然后如果搜索文本是干净的，则重定向到 "results/foobar"。

```
<h1 class="center"><progress style="font-size: 160%;">Loading...</progress></h1> 
```

我想显示上面的 html .. 并且只显示上面的 html（在视图中或通过 jquery），直到“results/foobar”完全加载。

有没有办法在最后一页完成加载之前显示这样的进度条动画（html）？

更多细节（搜索栏页面有这样的代码）：

```
<form class="form-search" action="/s_results/iscan" method="POST">
        <div class="input-append">
            <input name="searchtext" type="text" class="span4 search-query" placeholder="Type number here...">
            <button type="submit" class="btn">
                <i class="icon-search"></i>
                Search
            </button>
        </div>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:37:25.390

在这种情况下，您所做的是保持一个完整的窗口占据您的内容的 div，而您的数据在后台加载[http://jsfiddle.net/basarat/qfrJE/](http://jsfiddle.net/basarat/qfrJE/)：

```
.busyPanel {
    /* absolute position all over */
    position: absolute;
    top: 1px;
    bottom: 1px;
    left: 1px;
    right: 1px;
    /* Remove any defaults */
    border: none;
    margin: 0;
    padding: 0;
    /* Make sure it stays on top */
    z-index: 2500;
    /* any image */
    background: grey;
    /* initial visibility */
    display: visible;
} 
```

然后在加载完成后将其删除：

```
$(".busyPanel").fadeOut('slow'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:48:27.623

您最好的选择是在单击显示您的表单条目的链接时使用一些 JS，`div`然后在您的请求处理时它将出现在屏幕上，一旦搜索完成并呈现您的新页面，它将是走了。

```
-- html
<div class="progress">Loading...</div>

-- css
.progress { display: none; }

-- js
$('#search').click(function() {
  $('.progress').show();
  window.location.href = 'foo';
}); 
```

请参阅[JSFiddle](http://jsfiddle.net/PXmrn/)，简单易行。

# php - 在 for 循环中生成数组

> ID：15891691
> 
> 赞同：0
> 
> 时间：2013-04-09T01:14:10.617
> 
> 标签：php, multidimensional-array

我有以下两个变量：

```
$contact_number=array('0123456','65321');
$msg="My Text" ; 
```

我正在尝试使用上述变量创建一个数组，如下所示

```
$myarray =array(
       array("0" => "0123456", "1" => "My Text"),
       array("0" => "65321", "1" => "My Text")
 ); 
```

我已经尝试了以下代码，但它没有在上面创建确切的数组：

```
for($i=0; $i < count($contact_number); $i++ ) {
      $myarray[] =array(array("0" =>$contact_number[$i], "1" =>$msg),);
  }

 var_dump($myarray); 
```

你能告诉我如何解决这个问题吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:17:38.787

您只需要附加新的数组值：

```
 $myarray[] = array("0" => $contact_number[$i], "1" => $msg); 
```

双重嵌套`array( array(0=>.., 1=>..) )`是多余的，因为使用分配`$array[] =`已经创建了一个新的子数组。

见[http://php.net/manual/en/language.types.array.php#~square+bracket+syntax](http://php.net/manual/en/language.types.array.php#~square+bracket+syntax)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T01:20:00.470

您可以遍历每个联系人号码，并附加如下消息：

```
$contact = array('0123456','65321');
$message = "My Text" ;

$array = array();

foreach($contact as $value) {
    $array[] = array($value, $message);
}

var_export($array); 
```

产生这个：

```
array (
  0 => 
  array (
    0 => '0123456',
    1 => 'My Text',
  ),
  1 => 
  array (
    0 => '65321',
    1 => 'My Text',
  ),
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T01:33:45.727

```
$contact_number=array('0123456','65321');
$msg="My Text" ;

foreach($contact_number as $key => $number) {
    $my_array[] = array($key => $number, $key+1 => $msg);
}
var_dump($my_array); 
```

以上将导致

> 数组（大小=2）
> 
> 0 =>
> 
> ```
> array (size=2)
> 
>   0 => string '0123456' (length=7)
> 
>   1 => string 'My Text' (length=7) 
> ```
> 
> 1 =>
> 
> ```
> array (size=2)
> 
>   1 => string '65321' (length=5)
> 
>   2 => string 'My Text' (length=7) 
> ```

拧我的互联网连接，有人已经回答了..

# ios - Facebook 图形 API 将多张照片发布到相册和提要

> ID：15891692
> 
> 赞同：2
> 
> 时间：2013-04-09T01:14:10.707
> 
> 标签：ios, facebook, facebook-graph-api, sdk

我有一个 iOS 应用程序，它使用图形 api 将多张照片发布到 facebook 提要。

我通过发布到图形路径“我/照片”来实现这一点。这会将照片放在默认的应用相册中，并将其显示在用户提要中。正是我想要的。

问题是，如果我创建第二个（或多个）帖子，它会将第二个帖子和后续帖子与第一个帖子合并，并将其显示在提要的顶部。因此，如果我发布 X 个帖子，则提要中只有 1 个条目，并且帖子中的所有图像都会发布到相册中。

而我希望能够发布多个帖子并将它们显示为供稿上的单独帖子。

这是一篇文章的高级代码：

```
while (key = [k nextObject]) {
    item = [self.selectedItemsDict objectForKey:key];
    url = [item objectForKey:kPicURLKey];
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   url, @"url", nil];
    [FBRequestConnection startForPostWithGraphPath:@"me/photos" graphObject:(FBGraphObject*)params completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
        if (!error) {
            NSLog(@"done posting");
        }
    }];
 } 
```

我如何制作多个帖子来供稿（和相册），每个帖子都有一张或多张照片，并让它们在用户墙上显示为单独的帖子？

只是寻找如何使用 Graph api 执行此操作的通用方法，不一定是代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T13:51:58.093

您可以使用`me/albums`创建新相册，`ALBUM_ID/photos`上传照片。

# java - 如何修复不良的双缓冲

> ID：15891698
> 
> 赞同：0
> 
> 时间：2013-04-09T01:14:30.200
> 
> 标签：java, graphics, awt, flicker, double-buffering

我尝试按照双缓冲教程进行操作，但我真的不知道我做错了什么。在我完成教程之前它可以工作，但仍然偶尔会有闪烁。我有两个文件 Game 和 gameLoop

游戏：

```
import java.awt.Graphics;
public class Game extends gameLoop
{
    public void init()
    {
        setSize(854,480);
        Thread th = new Thread(this);
        th.start();
        offscreen = createImage(854,480);
        d = offscreen.getGraphics();
    }
    public void paint(Graphics g)
    {
        d.clearRect(0, 0, 854, 480);
        d.drawImage(disk, x, y, this);
        g.drawImage(offscreen , 0, 0, this);
    }
    public void Update(Graphics gfx)
    {
        paint(gfx);
    }
} 
```

游戏循环

```
import java.applet.Applet;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.MouseInfo;
import java.awt.Point;
import java.awt.PointerInfo;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;

public class gameLoop extends Applet implements Runnable, MouseListener, MouseMotionListener 
{
    public int x, y, counter, mouseX, mouseY;
    public Image offscreen;
    public Graphics d;
    public boolean up, down, left, right, pressed;
    public BufferedImage disk1, disk2, disk3, disk4, disk;
    public int ballSpeedX = -6;
    public int ballSpeedY = -3;

    public void run() 
    {
        x = 400;
        y = 200;
        try {
            disk1 = ImageIO.read(new File("disk1.png"));
            disk2 = ImageIO.read(new File("disk2.png"));
            disk3 = ImageIO.read(new File("disk3.png"));
            disk4 = ImageIO.read(new File("disk4.png"));
        } catch (IOException e1) {
            e1.printStackTrace();
        }
        while(true)
        {
            if(x >= (854 - 150))
            {
                    ballSpeedX = ballSpeedX * -1;
            }
            if(y >= (480 - 140))
            {
                    ballSpeedY = ballSpeedY * -1;
            }
            if(y < (0 - 10))
            {
                    ballSpeedY = ballSpeedY * -1;
            }
            if(x < (0- 10))
            {
                    ballSpeedX = ballSpeedX * -1;
            }

            x = x + ballSpeedX;
            y = y + ballSpeedY;

            counter ++;
            if(counter >= 4)
                counter = 0;

            if(counter == 0)
                disk = disk1;
            if(counter == 1)
                disk = disk2;
            if(counter == 2)
                disk = disk3;
            if(counter == 3)
                disk = disk4;

            System.out.println(counter);

            repaint();

            try {
                Thread.sleep(30);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }

    public void mouseClicked(MouseEvent e) {}
    public void mouseEntered(MouseEvent e) {}
    public void mouseExited(MouseEvent e) {}
    public void mouseMoved(MouseEvent m) {}

    public void mousePressed(MouseEvent m) 
    {

    }

    public void mouseReleased(MouseEvent m) 
    {
        pressed = false;
    }

    public void mouseDragged(MouseEvent e) {
        PointerInfo a = MouseInfo.getPointerInfo();
        Point b  = a.getLocation();
        mouseX = (int)b.getX();
        mouseY = (int)b.getY();
        ballSpeedX = mouseX;
        ballSpeedY = mouseY;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T01:45:20.483

```
public void Update(Graphics gfx)
{
    paint(gfx);
} 
```

应该是小写的，因为您试图覆盖`update(Graphics g)`Applet 中的方法。

所以应该是

```
@Override
public void update(Graphics gfx)
{
    paint(gfx);
} 
```

至于改变背景，背景只是一个覆盖屏幕并使其具有某种颜色的大矩形。在你的`paint`, 你在做`clearRect`，这会清除屏幕。而是`fillRect`在设置颜色后将其切换到。

它可能看起来像

```
public void paint(Graphics g)
{
    //setColor to whatever you want
    //fillRect to cover the screen
} 
```

但是，当您这样做时，您必须记住的一件事是不要混淆您的两个图形对象。作为一个概念，双缓冲的工作原理是先绘制到内存（将其绘制到屏幕外图像上），然后再绘制到屏幕上。您希望始终在此屏幕外图像上绘图，因为它要快得多（并且我们会丢失闪烁）。

因此，请确保您`imageGraphicsObject.setColor`没有`screenGraphicsObject.setColor`使用 imageGraphicsObject.fillRect `not`screenGraphicsObject.fillRect`。否则，您将不再进行双重缓冲。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T02:56:21.863

有许多不同类型的“双缓冲区”。基本是一个简单的屏幕外图像，您可以更新它，然后将其绘制到屏幕上。如果做得好，绘制图像通常比在屏幕上绘制图形要快。

另一种是翻页。也就是说，您有一个始终渲染到屏幕的活动缓冲区和一个您实际渲染到的屏幕外/暂存缓冲区。然后，当您准备好将更新渲染到屏幕时翻转这些缓冲区（这更接近电影动画的工作方式）。

下面的例子是一个非常基本的翻页例子。

![在此处输入图像描述](https://i.stack.imgur.com/Ecnx9.png)

```
import java.applet.Applet;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Panel;
import java.awt.image.BufferedImage;
import static testdoublebuffer.TestDoubleBuffer.UPDATE;

public class AppletDoubleBuffer extends Applet {

    private BufferedPane pane;

    @Override
    public void init() {
        pane = new BufferedPane();
        setLayout(new BorderLayout());
        add(pane);
    }

    @Override
    public void start() {
        pane.start();
    }

    @Override
    public void stop() {
        pane.stop();
    }

    public class BufferedPane extends Panel {

        private BufferedImage activeBuffer;
        private BufferedImage scratch;
        private boolean running = false;

        public BufferedPane() {
        }

        public void start() {
            if (!running) {
                running = true;
                Thread thread = new Thread(new MainLoop());
                thread.setDaemon(true);
                thread.start();
            }
        }

        public void stop() {
            running = false;
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        public void invalidate() {
            synchronized (UPDATE) {
                activeBuffer = null;
                scratch = null;
            }
            super.invalidate();
        }

        @Override
        public void update(Graphics g) {
            if (activeBuffer != null) {
                Graphics2D g2d = (Graphics2D) g.create();
                g2d.drawImage(activeBuffer, 0, 0, this);
                g2d.dispose();
            }
        }

        public class MainLoop implements Runnable {

            private int delay = 1000 / 25;
            private int x = 0;
            private int velocity = 5;
            private int size = 10;

            public void update() {

                x += velocity;
                if (x + size >= getWidth()) {
                    x = getWidth() - size;
                    velocity *= -1;
                } else if (x <= 0) {
                    x = 0;
                    velocity *= -1;
                }

                if (getWidth() > 0 && getHeight() > 0) {
                    synchronized (UPDATE) {
                        if (scratch == null) {
                            scratch = new BufferedImage(getWidth(), getHeight(), BufferedImage.TYPE_INT_ARGB);
                        }
                        Graphics2D g2d = scratch.createGraphics();
                        int y = (getHeight() - size) / 2;
                        g2d.setBackground(Color.BLUE);
                        g2d.clearRect(0, 0, getWidth(), getHeight());
                        g2d.setColor(Color.RED);
                        g2d.fillOval(x, y, size, size);
                        g2d.dispose();

                        // Flip the buffers...
                        BufferedImage tmp = activeBuffer;
                        activeBuffer = scratch;
                        scratch = tmp;
                    }
                }

            }

            @Override
            public void run() {
                while (running) {

                    long startTime = System.currentTimeMillis();

                    update();
                    repaint();

                    long duration = System.currentTimeMillis() - startTime;
                    if (duration < delay) {
                        try {
                            Thread.sleep(delay);
                        } catch (InterruptedException ex) {
                        }
                    }

                }
            }
        }
    }
} 
```

我个人会跳过使用 AWT 并转向为此类事物提供更好/内置功能的 Swing。

# mysql - 使用 JSP 和 Servlet POST 方法查询 MySQL

> ID：15891702
> 
> 赞同：1
> 
> 时间：2013-04-09T01:14:54.243
> 
> 标签：mysql, jsp, servlets

我不确定我是否正在尝试正确“打印”我的结果。我想要做的是使用 JSP 接收变量，然后将其传递给 servlet，它将在其中查询数据库，然后显示结果。我测试了在不同的 java 文件中查询我的数据库，我没有遇到任何问题。任何建议将不胜感激！

JSP 文件：

```
<form method="post" action="HelloServlet"/>
Enter your name:<input name = "exName"/><br>

<input type = "submit" />
</form> 
```

JAVA 文件（servlet）：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws 
ServletException, IOException {

        //response.setContentType("text/html; charset=ISO-8859-1");
        PrintWriter out = response.getWriter();

        java.sql.Connection con = null;
        java.sql.PreparedStatement pst = null;
        ResultSet rs = null;

        String url = "jdbc:mysql://localhost:3306/masters";  
        String user = "christine";
        String password = "password";

        try{
            String exName = request.getParameter("exName");
            con = DriverManager.getConnection(url, user, password);  
            pst = con.prepareStatement("SELECT * FROM exercise WHERE exercise_name ='"+exName+"';");
            rs = pst.executeQuery();  

            while (rs.next()){
                String name = rs.getString("description_txt");

                out.print(exName);
                out.print(name);
            }   
        }catch(SQLException ex){
        }finally {
            try {
                if (rs != null){
                    rs.close();
                }
                if (pst != null){
                    pst.close();
                }
                if (con != null){
                    con.close();
                }
            }catch(SQLException ex){
            }           
        }       
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:21:33.737

您需要在代码中进行一些更改。

正如@BalusC 提到的，不要抑制异常。`out.println(ex);`使用or向浏览器写入异常`throw new ServletException(ex)`。这将帮助您找到问题的原因。

`Class.forName("com.mysql.jdbc.Driver");`之前添加`DriverManager.getConnection()`。

因为您已经在`PreparedStatement`使用

```
pst = con.prepareStatement("SELECT * FROM exercise WHERE exercise_name =?");
pst.setString(1, exName);
rs = pst.executeQuery(); 
```

# git - Git：找出哪个分支包含提交并检查出来？

> ID：15891704
> 
> 赞同：0
> 
> 时间：2013-04-09T01:15:29.383
> 
> 标签：git, git-submodules

根据我在[这里](https://stackoverflow.com/questions/15891069)学到的关于子模块的知识，我现在可以通过使用将我的子模块回滚到正确的提交

```
git submodule update --recursive 
```

但是，现在子模块永远不会（很少？）在分支中。我**认为**没有存储子模块需要的分支。反正我可以用

```
git branch --contains HEAD 
```

在子模块中找出分支然后切换到它。有内置的方法吗？我的目标是回到包含提交的分支（如果有的话）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:20:24.113

默认情况下，Git 不通过分支跟踪子模块，它通过提交来跟踪它们。因此`git submodule update`将导致子模块处于分离的 HEAD 状态（类似于`git checkout`特定的提交哈希）。在做任何工作之前，你必须确保实际检查了一个分支，否则事情可能会变得一团糟。

从 Git 1.8.2 开始，您现在可以让子模块跟踪分支。添加子模块时需要指定此选项：

`git submodule add -b master <git repo url>`

如果您通过分支跟踪子模块，您需要添加`--remote`到更新调用中：

`git submodule update --remote`

[您可以在此处](https://stackoverflow.com/a/9189815/506338)和[此处](http://www.vogella.com/articles/Git/article.html#submodules)阅读有关通过分支跟踪子模块的更多信息。

# google-drive-api - 尝试使用应用程序数据文件夹时出现 updateToken 身份验证错误

> ID：15891705
> 
> 赞同：2
> 
> 时间：2013-04-09T01:15:44.477
> 
> 标签：google-drive-api

我有一个完美的驱动集成应用程序，javascript 和 go-based，具有以下范围：

```
https://www.googleapis.com/auth/userinfo.email
https://www.googleapis.com/auth/userinfo.profile
https://www.googleapis.com/auth/drive 
```

现在我尝试使用 Application 文件夹。如果我不更改我的范围，那么我会按预期得到一个错误，声称应用范围设置不正确。现在我添加以下范围（在 api-console 和我的应用程序中）：

```
https://www.googleapis.com/auth/drive.appdata 
```

现在我不幸在 oauth.updateToken googelapi 函数中收到错误消息，并显示以下错误消息：

```
OAuthError: updateToken: 400 Bad Request 
```

我是否误解了应如何使用 Application 文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:26:35.897

您需要再次向用户显示对话框并检索新令牌而不是更新现有令牌。创建一个新的身份验证代码 URL`config.AuthCodeURL()`并询问用户权限。用户授予权限后，通过调用与 Google 端点交换代码`t.Exchange(code)`。

```
var config = &oauth.Config{
  ClientId:     "YOUR_CLIENT_ID",
  ClientSecret: "YOUR_CLIENT_SECRET",
  Scope:        "YOUR_SCOPES",
  RedirectURL:  "YOUR_REDIRECT_URI",
  AuthURL:      "https://accounts.google.com/o/oauth2/auth",
  TokenURL:     "https://accounts.google.com/o/oauth2/token",
}

authUrl := config.AuthCodeURL("state")
fmt.Printf("Go to the following link in your browser: %v\n", authUrl)
t := &oauth.Transport{
  Config:    config,
  Transport: http.DefaultTransport,
}

// Read the code, and exchange it for a token.
fmt.Printf("Enter verification code: ")
var code string
fmt.Scanln(&code)
_, err := t.Exchange(code)
if err != nil {
  fmt.Printf("An error occurred exchanging the code: %v\n", err)
} 
```

# scala - 如何在 SBT 0.13 项目中设置主类

> ID：15891708
> 
> 赞同：82
> 
> 时间：2013-04-09T01:16:15.403
> 
> 标签：scala, sbt

你们能解释一下如何在 SBT 项目中设置主类吗？我正在尝试使用 0.13 版。

我的目录结构非常简单（不像 SBT 的文档）。在根文件夹中，我有`build.sbt`以下内容

```
name := "sbt_test"

version := "1.0"

scalaVersion := "2.10.1-local"

autoScalaLibrary := false

scalaHome := Some(file("/Program Files (x86)/scala/"))

mainClass := Some("Hi")

libraryDependencies ++= Seq(
    "org.scalatest" % "scalatest_2.10" % "2.0.M5b" % "test"
)

EclipseKeys.withSource := true 
```

我有一个包含以下代码`project`的单个文件的子文件夹`Hi.scala`

```
object Hi {
  def main(args: Array[String]) = println("Hi!")
} 
```

我可以通过调用`sbt compile`但`sbt run`返回来编译它

```
The system cannot find the file C:\work\externals\sbt\bin\sbtconfig.txt.
[info] Loading project definition from C:\work\test_projects\sbt_test\project
[info] Set current project to sbt_test (in build file:/C:/work/test_projects/sbt_test/)
java.lang.RuntimeException: No main class detected.
        at scala.sys.package$.error(package.scala:27)
[trace] Stack trace suppressed: run last compile:run for the full output.
[error] (compile:run) No main class detected.
[error] Total time: 0 s, completed Apr 8, 2013 6:14:41 PM 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-09T01:22:07.680

您需要将应用程序的源代码放入`src/main/scala/`,`project/`用于构建定义代码。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-02-09T12:29:25.307

尝试使用一个对象并从 App 扩展它而不是使用类

```
object Main extends App {
  println("Hello from main scala object")
} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-04-09T03:04:30.540

这是指定主类的方法

`mainClass in (Compile,run) := Some("my.fully.qualified.MainClassName")`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-06-25T05:55:26.383

对于 SBT (0.13) 中的自定义模块，只需在 SBT 控制台上输入：

```
 project moduleX
 [info] Set current project to moduleX (in build file:/path/to/Projects/)
 >   run
 [info] Running main 
```

将范围切换到 moduleX，如 Built.scala 中定义的那样。将自动检测该范围​​内的所有主要类。否则你会得到同样的错误，没有检测到主类。看在上帝的份上，SBT 并没有告诉你没有设置默认范围。它与默认源文件夹与非默认源文件夹无关，但仅与 SBT 没有任何关系，它不知道默认使用哪个模块。

**对类型安全的大提示**：请添加一个默认输出，例如：

```
[info] Project module is not set. Please use ''project moduleX''  set scope 
or set in Built file (LinkToDocu) 
```

在 SBT 结束时开始降低在多模块项目上使用 SBT 时的挫败感.....

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-09-13T06:01:01.697

如果您的项目中有多个主要方法，则可以将以下行添加到 build.sbt 文件中：

```
val projectMainClass = "com.saeed.ApplicationMain"

mainClass in (Compile, run) := Some(projectMainClass) 
```

如果您想指定将应用程序打包为 JAR 文件时将添加到清单中的类，请将此行添加到您的 build.sbt 文件中：

```
mainClass in (Compile, packageBin) := Some(projectMainClass) 
```

您还可以在 sbt 和 activator 中使用 run-main 命令指定主类来运行：

```
sbt "run-main com.saeed.ApplicationMain" 
```

或者

```
activator "run-main com.saeed.ApplicationMain" 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-05-31T06:40:46.343

我有同样的问题：是按照[http://www.scala-sbt.org/0.13/docs/Hello.html](http://www.scala-sbt.org/0.13/docs/Hello.html)教程的模式，在我看来，作为构建工具`sbt`的交互和错误消息可能相当误导新人。

事实证明，几个小时后，我`cd hello`每次都错过了示例中的关键线。:-(

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-12-19T10:05:18.240

## 有4个选项

1.  你有 1 个主要课程

    *   `sbt run`sbt 会为你找到 main
2.  你有 2 个或更多的主要课程

    *   `sbt run`并且 sbt 会建议选择你要运行的那个。

* * *

```
Multiple main classes detected, select one to run:
[1] a.b.DummyMain1
[2] a.b.DummyMain2
Enter number: 
```

* * *

3.  您想手动设置主类。

    ```
    mainClass in run := Some("a.b.DummyMain1") 
    ```

4.  您可以使用主类作为参数运行

    ```
    sbt runMain a.b.DummyMain1 
    ```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-04-22T23:23:11.897

如果 Main 类在不同的项目中，那么通过设置以下命令`build.sbt`将起作用：

```
addCommandAlias("run", "; project_folder/run") 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-02-18T08:37:26.077

我遇到过同样的问题。添加`PlayMinimalJava`插件后解决`build.sbt`。

不确定它是如何解决的，如果有人能强调如何`PlayMinimalJava`解决它，那就太好了。

```
enablePlugins(PlayMinimalJava) 
```

我的`build.sbt`长相是这样的

```
organization := "org"
version := "1.0-SNAPSHOT"
scalaVersion := "2.13.1"
libraryDependencies += guice
enablePlugins(PlayMinimalJava) 
```

日志

```
C:\Users\KulwantSingh\repository\pdfdemo>sbt run
Java HotSpot(TM) Client VM warning: ignoring option MaxPermSize=256m; support was removed in 8.0
[info] Loading settings for project pdfdemo-build from plugins.sbt ...
[info] Loading project definition from C:\Users\KulwantSingh\repository\pdfdemo\project
[info] Loading settings for project pdfdemo from build.sbt ...
[info] Set current project to pdfdemo (in build file:/C:/Users/KulwantSingh/repository/pdfdemo/)
[warn] There may be incompatibilities among your library dependencies; run 'evicted' to see detailed eviction warnings.

--- (Running the application, auto-reloading is enabled) ---

[info] p.c.s.AkkaHttpServer - Listening for HTTP on /0:0:0:0:0:0:0:0:9000

(Server started, use Enter to stop and go back to the console...)

[info] Compiling 6 Scala sources and 2 Java sources to C:\Users\KulwantSingh\repository\pdfdemo\target\scala-2.13\classes ...
[info] p.a.h.EnabledFilters - Enabled Filters (see <https://www.playframework.com/documentation/latest/Filters>):

    play.filters.csrf.CSRFFilter
    play.filters.headers.SecurityHeadersFilter
    play.filters.hosts.AllowedHostsFilter

[info] play.api.Play - Application started (Dev) (no global state) 
```

# sql - 我需要在这个 Sql Server 2012 查询中做 PIVOT 吗？

> ID：15891710
> 
> 赞同：1
> 
> 时间：2013-04-09T01:16:20.513
> 
> 标签：sql, sql-server-2012

我不确定是否需要执行 PIVOT 将我的数据提取到一个简单的结果集中。如果我这样做，那怎么办？

**语境。**

每个位置可以存在于 0<-> 多个县。对于每个位置，以相同的结果显示县（例如 .. 逗号分隔）。

**样本数据**

```
Locations
Id   Name
-------------
 1   Street1
 2   Street2
 3   County1
 4   County2
 5   Neighbourhood12121
 6   Country4

Counties
LocationId CountyId
---------------------
  1          3
  1          4
  2          3
  5          3

eg.
Street1 exists inside County1 and County2
Street2 exists inside County1
Neighbourhood12121 exists inside County1
The rest do not exist in any counties. 
```

**结果**

我会喜欢以下结果：

```
Id   Name                Counties
-------------------------------------------------
 1   Street1             County1, County2
 2   Street2             County1
 3   County1             NULL
 4   County2             NULL
 5   Neighbourhood12121  County1
 6   Country4            NULL 
```

Sql Server 2012 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T01:22:04.070

要获得逗号分隔的列表，我只需使用`STUFF`-`FOR XML PATH('')`技巧：

```
SELECT L.Id, L.Name,
    STUFF((SELECT ', ' + CAST(C.CountyId AS varchar(max)) 
           FROM Counties C 
           WHERE C.LocationId = L.Id 
           FOR XML PATH('')), 1, 2, '') AS Counties
FROM Locations L 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!6/b8bc4/3)

*注意：您没有提供包含县名的表格，所以我只是在这里使用了 ID。我想你可以弄清楚其余的。*

`PIVOT`当您想从基于行的数据中获取*多列时会很有用，但由于您在这里只需要一**列*，我认为它不会有用。

# python - 如何在 Python 2.7 中正确使用字符串格式？

> ID：15891711
> 
> 赞同：0
> 
> 时间：2013-04-09T01:16:20.933
> 
> 标签：python, python-2.7, string-formatting

好的，请耐心等待，我对此完全陌生。这是给学校的，确切的语法在这里对我的作业并不重要，但就我个人的知识而言，我想了解更多关于字符串格式的知识。

每当我使用 %f 时，它默认为 2 位小数。是否有可以在浮点数上使用的字符串格式，以显示浮点数及其实际具有的小数位数？

例如，我的列表包含 2.0、2.01、2.001、2.0001，我想使用字符串格式来打印它们的外观。如果可能，我将使用哪种格式代码或如何正确使用 %f？

这是在 Windows 7 上的 Python 2.7 中（如果重要的话）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:26:40.480

如果您将浮点数转换为字符串，那么当您打印它时，它将按照您编写的方式显示。

```
>>> x = str(2.0)
>>> print(x)
2.0
>>> x = str(2.01)
>>> print(x)
2.01
>>> x = str(2.001)
>>> print(x)
2.001
>>> x = str(2.0001)
>>> print(x)
2.0001 
```

（实际上，准确地说，在 Python 中，您实际上并没有转换浮点对象，而是创建了一个看起来像它的字符串对象。但这有点超出了您的问题范围。）

**更新**

有人在这里发布了一种使用 Decimal 类从浮点数中删除尾随零的方法：[Removing Trailing Zeros in Python](https://stackoverflow.com/questions/5807952/removing-trailing-zeros-in-python)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:56:29.697

`%g`可能是您正在寻找的：

```
>>> "%g, %g, %g, %g" % (2.1, 2.01, 2.001, 2.0001)
'2.1, 2.01, 2.001, 2.0001' 
```

# nhibernate - NHibernate 和自定义 SQL 子查询（使用临时表）

> ID：15891713
> 
> 赞同：2
> 
> 时间：2013-04-09T01:16:33.543
> 
> 标签：nhibernate, hql, queryover

是否可以将自定义 SQL 用于子查询“IN”参数。目前，我们成功构建了子查询 (subQueryEstate)，但它是一个复杂的 SQL 块，可能需要时间来处理更大的数据集。使用我们现有的子查询生成查询的代码如下：

```
session.QueryOver(() => cAlias)
.WithSubquery.WhereProperty(x => x.CPE.ID).In(subQueryEstate)
.JoinAlias(x => x.Costs, () => aCosts, JoinType.LeftOuterJoin)
.JoinAlias(x => x.Open, () => aOpen, JoinType.InnerJoin)
.List(); 
```

为了提高执行速度，我们有一个想法是使用一个临时表（事务生命周期），我们将用 ID 填充该表。这个想法是要么加入临时表，要么使用更简单的子查询（SELECT ID FROM TEMP_TABLE）而不是更复杂的原始查询。

我们可以在 NHibernate 中使用未映射为子查询的表吗？我们可以编写自定义 SQL 或创建一个分离的条件作为参数传递给 IN 子句吗？我们希望保留 NHibernate 为查询的其余部分生成正确 SQL 的事实。

理想情况下是这样的：

```
session.QueryOver(() => cAlias)
.WithSubquery.WhereProperty(x => x.CPE.ID).In("SELECT ID FROM TEMP_TABLE")
.JoinAlias(x => x.Costs, () => aCosts, JoinType.LeftOuterJoin)
.JoinAlias(x => x.Open, () => aOpen, JoinType.InnerJoin)
.List(); 
```

想法？想法？可能有一个我们没有想到的更优雅的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T02:03:46.427

最后我们使用临时表来解决这个问题。由于我们的应用程序使用 firebird 数据库，我们创建了四个具有“事务”生命周期的全局临时表。也就是说，临时表中的数据仅在事务的生命周期内有效。

用于创建临时表的 SQL（注意我们创建了四个以满足我们的用例）

在提交删除行上创建全局临时表 TEMP_TABLE_ID1 (ID BIGINT NOT NULL)；在 TEMP_TABLE_ID1(ID) 上创建索引 IDX_TEMP_TABLE_ID1；

使用临时表，我们现在可以使用来自主查询的 ID 系统地填充它们。通过使用子查询或连接到临时表来过滤后续查询，这比对每个“下游”查询使用大型子查询要快得多。使用临时表可以显着提高性能，因为这些表仅在事务的生命周期内有效，这意味着我们不必担心交叉事务污染和/或清除数据表。

一个非常整洁的解决方案。

全局临时表 (Firebird) [http://www.firebirdsql.org/refdocs/langrefupd21-ddl-table.html](http://www.firebirdsql.org/refdocs/langrefupd21-ddl-table.html)

# android - 在 TextView 的选定状态中包含父填充

> ID：15891717
> 
> 赞同：1
> 
> 时间：2013-04-09T01:16:52.640
> 
> 标签：android, android-relativelayout, textview, selecteditem

我有一个`RelativeLayout`带填充物和一个`TextView`孩子。选择时`TextView`，我希望突出显示的区域扩展到包括父级的填充，以便整个`RelativeLayout`突出显示。

`main.xml`

```
<TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Hello World, MyActivity"
        android:textSize="30dp"
        android:clickable="true"
        android:background="@drawable/myback"
        /> 
```

`myback.xml`

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true" android:drawable="@color/gray" />
    <item android:state_focused="true" android:drawable="@color/gray" />
    <item android:state_pressed="true" android:drawable="@color/gray" />
</selector> 
```

`MyActivity.java`

```
package com.example.TextViewPadding;

import android.app.Activity;
import android.os.Bundle;

public class MyActivity extends Activity {
    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/vXodJl.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:35:21.413

如果您想拥有这种行为，您需要将您的填充添加到`TextView`而不是`RelativeLayout`将父级上的填充保持为 0。

# php - 如何判断请求是从我的电脑到php页面的？

> ID：15891721
> 
> 赞同：1
> 
> 时间：2013-04-09T01:17:13.567
> 
> 标签：php, debugging

如何确定请求是否来自我的计算机到 php 页面？

我想`print_r($GLOABALS)`从我的计算机上调试我的站点，但我不希望其他计算机这样做。

```
<?php
  // can not use ip to judge wheather this computer is mine 
  // for my ip will change always.
  if($is_my_computer){
    echo 'yes';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:35:42.573

我想在您的本地机器上，您的网站位于 localhost/mylocalwebsite 下。如果是这样，只需检查您是否在此环境中即可。

```
<?php
  if($_SERVER['SERVER_NAME'] == 'localhost') {
    echo "foo";
  } 
```

# java - 使用 POST 请求和 Java 客户端库加载到 BigQuery 的任何示例？

> ID：15891729
> 
> 赞同：3
> 
> 时间：2013-04-09T01:18:05.633
> 
> 标签：java, google-bigquery, client-library

有没有人有任何使用这两种方法为 BigQuery 创建新插入作业的示例：

*   bigquery java 客户端库
*   从此处记录的 POST 请求创建加载作业：[https ://developers.google.com/bigquery/loading-data-into-bigquery#loaddatapostrequest](https://developers.google.com/bigquery/loading-data-into-bigquery#loaddatapostrequest)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T16:21:45.190

您需要调用**[bigquery.jobs().insert(...)](https://developers.google.com/resources/api-libraries/documentation/bigquery/v2/java/latest/com/google/api/services/bigquery/Bigquery.Jobs.Insert.html)**方法。

我不知道你已经做了什么，但你至少应该有一个经过身份验证的 API 客户端，例如：

```
bigquery = new Bigquery.Builder(HTTP_TRANSPORT, JSON_FACTORY, credentials)
                .setApplicationName("...").build(); 
```

[这是我使用java 的 google-http-client 库](http://code.google.com/p/google-http-java-client/)和[bigquery-api](http://code.google.com/p/google-api-java-client/wiki/APIs#BigQuery_API)编写的 insertRows 方法的简化版本（您应该检查数据集是否存在，验证 ID 等）：

```
public Long insertRows(String projectId, 
                       String datasetId, 
                       String tableId, 
                       InputStream schema,
                       AbstractInputStreamContent data) {
    try {

        // Defining table fields
        ObjectMapper mapper = new ObjectMapper();
        List<TableFieldSchema> schemaFields = mapper.readValue(schema, new TypeReference<List<TableFieldSchema>>(){});
        TableSchema tableSchema = new TableSchema().setFields(schemaFields);

        // Table reference
        TableReference tableReference = new TableReference()
                .setProjectId(projectId)
                .setDatasetId(datasetId)
                .setTableId(tableId);

        // Load job configuration
        JobConfigurationLoad loadConfig = new JobConfigurationLoad()
                .setDestinationTable(tableReference)
                .setSchema(tableSchema)
                // Data in Json format (could be CSV)
                .setSourceFormat("NEWLINE_DELIMITED_JSON")
                // Table is created if it does not exists
                .setCreateDisposition("CREATE_IF_NEEDED")
                // Append data (not override data)
                .setWriteDisposition("WRITE_APPEND");
        // If your data are coming from Google Cloud Storage
        //.setSourceUris(...);

        // Load job
        Job loadJob = new Job()
                .setJobReference(
                        new JobReference()
                                .setJobId(Joiner.on("-").join("INSERT", projectId, datasetId,
                                        tableId, DateTime.now().toString("dd-MM-yyyy_HH-mm-ss-SSS")))
                                .setProjectId(projectId))
                .setConfiguration(new JobConfiguration().setLoad(loadConfig));
        // Job execution
        Job createTableJob = bigquery.jobs().insert(projectId, loadJob, data).execute();
        // If loading data from Google Cloud Storage
        //createTableJob = bigquery.jobs().insert(projectId, loadJob).execute();

        String jobId = createTableJob.getJobReference().getJobId();
        // Wait for job completion
        createTableJob = waitForJob(projectId, createTableJob);
        Long rowCount = createTableJob != null ? createTableJob.getStatistics().getLoad().getOutputRows() : 0l;
        log.info("{} rows inserted in table '{}' (dataset: '{}', project: '{}')", rowCount, tableId, datasetId, projectId);
        return rowCount;
    }
    catch (IOException e) { throw Throwables.propagate(e); }
} 
```

我不知道您的数据格式，但如果您使用的是文件，您可以添加如下函数：

```
 public Long insertRows(String projectId, String datasetId, String tableId, File schema, File data) {
    try {
        return insertRows(projectId, datasetId, tableId, new FileInputStream(schema),
                new FileContent(MediaType.OCTET_STREAM.toString(), data));
    }
    catch (FileNotFoundException e) { throw Throwables.propagate(e); }
} 
```

# three.js - 三.js OBJLoader 不加载obj文件

> ID：15891731
> 
> 赞同：2
> 
> 时间：2013-04-09T01:18:42.330
> 
> 标签：three.js

我正在尝试使用 OBJloader.js 加载 obj 文件我正在尝试加载存在于 html 文件所在的同一文件夹中的“plane.obj”文件，并且“OBJLoader.js”也存在于同一文件夹中。

页面不显示任何内容。

这是代码：

```
var scene = new THREE.Scene(); 
camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000); 
var renderer = new THREE.WebGLRenderer(); 
renderer.setSize(window.innerWidth, window.innerHeight); 
document.body.appendChild(renderer.domElement); 
var geometry = new THREE.CubeGeometry(1,1,1); 
var material = new THREE.MeshBasicMaterial({color: 0x00ff00}); 
var cube = new THREE.Mesh(geometry, material); scene.add(cube); camera.position.z = 5; 
function render() { 
    requestAnimationFrame(render); 
    cube.rotation.x += 0.01; 
    cube.rotation.y += 0.01; 
    renderer.render(scene, camera); 
}
var texture = THREE.ImageUtils.loadTexture( 'tex.jpg' );
var loader = new THREE.OBJLoader();
loader.load( 'plane.obj', function ( object ) {
    scene.add( object );
} );
render(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T02:38:25.970

这可能是由于尝试从文件系统加载资源造成的。您可能遇到了同源策略安全违规，需要从相同的协议、域和端口提供您的页面和资源。有一些简单的方法可以做到这一点 - 我通过 Node JS 使用一个简单的 http 服务器应用程序。查看[如何在本地运行](https://github.com/mrdoob/three.js/wiki/How-to-run-things-locally)以获取更多选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-16T13:49:18.383

好吧，事实证明我是由于场景中没有光线造成的。此外，不正确的相机位置也可能导致“隐形”OBJ模型。尝试添加以下行：

```
var ambientLight = new THREE.AmbientLight(0xffffff);
scene.add(ambientLight); 
```

# mysql - mysql 从多个表中选择查询返回重复的结果

> ID：15891737
> 
> 赞同：3
> 
> 时间：2013-04-09T01:19:33.917
> 
> 标签：mysql, duplicates

如果这个问题有点模糊，请告诉我，我会提供更多信息。

我编写了一个从多个表中获取数据的查询，但它也没有按照我的预期工作，我完全被难住了。

这是我的代码：

```
SELECT students.student_fname, students.student_lname
FROM  students, enrolments
WHERE enrolments.courseID = 'C001'; 
```

但这只会返回学生表中所有学生的名字和姓氏，并且这些名字会显示两次。

这是两个表的代码：

```
CREATE TABLE students
(
studentID CHAR(10) NOT NULL,
student_fname VARCHAR(15) NOT NULL,
student_lname VARCHAR(15) NOT NULL,
DOB VARCHAR(10) NOT NULL,
CONSTRAINT pk_students PRIMARY KEY (studentID)
);

CREATE TABLE enrolments
(
enrolmentNo int NOT NULL AUTO_INCREMENT,
studentID CHAR(10) NOT NULL,
courseID CHAR(4) NOT NULL,
CONSTRAINT pk_enrolments PRIMARY KEY (enrolmentno),
FOREIGN KEY (studentID) REFERENCES students (studentID),
FOREIGN KEY (courseID) REFERENCES courses (courseID)
)ENGINE = INNODB; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T01:22:07.990

这是因为您尚未定义学生与注册的关系。

您要么需要使用内部联接，要么添加一个 where 子句来显示它们之间的关系。

例如：

```
FROM Students
INNER JOIN enrolments on Students.ID = enrolments.studentID 
```

或者

```
FROM students, enrolements 
WHERE enrolments.studentID = students.ID 
```

第一种方法较新，受到许多人的青睐；但也支持传统方法。

要更好地了解表连接，请查看这篇最出色的文章： http: [//www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

否则，您会得到两个表的笛卡尔积，所有数据都与所有数据相关。

如果您没有关于注册的唯一索引（一个学生只能注册 1 个班级），那么 a `select Distinct field names`or`where... group by fields`也会将您的结果限制为接近您正在寻找的结果。

=============================回应后续评论=============== ====

```
SELECT S.student_fname, S.student_lname 
FROM students S 
INNER JOIN enrolments  E
  ON S.StudentID = E.StudentID
WHERE e.courseID = 'C001'
GROUP BY S.Student_Fname, S.Student_lname
ORDER BY S.Student_LName, S.Student_FName 
```

group by 消除了同一课程的重复项。“ON 语句告诉数据库学生与注册的关系。顺序只是为了提供一个合理的结果顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:22:03.743

您不能以这种方式从两个表中获取数据。你必须加入表格。

# wordpress - 如何存储用户信息并允许用户对其进行编辑、管理和删除

> ID：15891743
> 
> 赞同：1
> 
> 时间：2013-04-09T01:20:10.603
> 
> 标签：wordpress

我目前正在开发一个网站来管理出租物业。我希望用户能够进入一个页面，输入特定属性的信息（地址、所有者等）并“提交”该信息。我遇到的问题是我找不到管理信息的好方法，以及让用户能够随意删除该信息。我希望这一切都在前端完成，因为我想不出一个没有重大 SQL 注入问题的好的解决方案。理想情况下，我希望在每行旁边显示一个小 (x) 的所有信息。

我很抱歉，这听起来可能非常复杂和模糊。

1.  用户向他的许多出租物业提交有关零的信息。
2.  用户转到另一个页面（或同一页面）并可以查看和管理他的属性
3.  用户出售财产；删除他的一个或多个属性

如果有人能指出我正确的方向，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:30:38.170

您可以将[自定义帖子类型](http://wp.smashingmagazine.com/2012/11/08/complete-guide-custom-post-types/)用于属性（您将有一个称为属性的自定义帖子类型）和用于存储与每个属性相关的任意信息的[元数据。](http://codex.wordpress.org/Post_Meta_Data_Section)这是我将如何为这样的项目构建事物的粗略轮廓。

您需要对前端表单、验证、存储/更新/列出数据进行大量编码。好消息是 WordPress 将为您提供许多开箱即用的好东西，例如身份验证/授权、用户管理、列出帖子（也就是您的属性）和分类它们的绝佳机制。

# sql - SQL，如果指定日期没有数据则返回行

> ID：15891748
> 
> 赞同：0
> 
> 时间：2013-04-09T01:20:36.120
> 
> 标签：sql, oracle, join

我在 Oracle DB 中有 2 个表。一种是包含静态数据的`info_table`，另一种是包含每日更新数据的`stats_table`。`info_table`包含每个 WCEL_ID（坐标等）的静态数据，并且每天`stats_table`都会自动更新。

有时，可能无法获得任何 WCEL_ID 的数据，因此在任何特定日期，stats_tabel 中都可能缺少任何 WCEL_ID。我的问题是，例如，当我查询一周的数据时，我只获取指定 WCEL_ID 中有条目的天的数据，但如果没有特定日期的数据，`stats_table`我想获取。`null`以下是我的查询

`select *`
`FROM stats_table a full join info_table e`
`on a.WCEL_ID = e.WCEL_ID`
`where`
`a.period_start_time >= Trunc(sysdate-7) and a.WCEL_ID = '14000004554984'`

这只返回一行，因为我们`a.WCEL_ID = '14000004554984'`6 天没有数据，但我想要一行 + 6 行空值。

如何实现正确的查询？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:30:59.917

只需使用外连接，其次您需要在 info_table 而不是 stats 表上设置条件，因为 stats_table 的数据较少[，所以我将编写这个查询：

```
select *
FROM stats_table a, info_table e
where a.WCEL_ID(+) = e.WCEL_ID
and e.period_start_time >= Trunc(sysdate-7) and e.WCEL_ID = '14000004554984' 
```

请注意我对 "and e.period_start_time >= Trunc(sysdate-7) and e.WCEL_ID = '14000004554984'" 所做的更改，这是基于 info_table 具有所有数据并且 stats_table 可能缺少数据的假设被你声明了。

编辑：用户评论后编辑查询

```
select *
    FROM stats_table a, info_table e
    where a.WCEL_ID(+) = e.WCEL_ID
    and a.period_start_time >= Trunc(sysdate-7) and e.WCEL_ID = '14000004554984' 
```

编辑：

再三考虑，我认为查询不完整，info_table 中必须有一个日期列，否则您无法在 2 个表中按日期行映射数据[没有这个，您将无法实现您想要的]。考虑到这个假设，我正在修改查询如下：

```
select *
    FROM stats_table a, info_table e
    where a.WCEL_ID(+) = e.WCEL_ID
    and e.period_start_time >= Trunc(sysdate-7) and e.WCEL_ID = '14000004554984'
    and a.period_start_time(+) = e.period_start_time 
```

编辑：我现在明白你的意思了。您希望每天都有一行，如果当天存在数据，那么应该显示它，否则应该出现 null。我修改了我的逻辑以包含一个嵌套查询 [具有别名 b]，它将为过去 7 天的每一天生成行并将其与您的主表进行外部连接。试试这个，让我知道它是否能解决您的问题。

```
SELECT * 
FROM stats_table a,
  info_table e,
  (SELECT to_date(sysdate-7,'dd-mon-yyyy') +rownum dates
  FROM all_objects
  WHERE rownum <= to_date(sysdate,'dd-mon-yyyy')-to_date(sysdate-7,'dd-mon-yyyy')
  ) b
WHERE a.WCEL_ID            = e.WCEL_ID
AND a.period_start_time(+) = b.dates
AND a.WCEL_ID              = '14000004554984' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:31:37.097

将 where 子句移动到连接条件或将 or 添加到 and

`and (a.WCEL_ID is null OR a.WCEL_ID = '14....')`

```
select *
FROM stats_table a full join info_table e
on a.WCEL_ID = e.WCEL_ID
and a.period_start_time >= Trunc(sysdate-7) and a.WCEL_ID = '14000004554984' 
```

# git - 如何将 git repo 中的子文件夹导出到单独的 repo

> ID：15891751
> 
> 赞同：0
> 
> 时间：2013-04-09T01:20:50.073
> 
> 标签：git, export, history, directory

我们有包含一些文件和文件夹的 repo “misc”，但随着时间的推移，一个文件夹变得有些成熟，将其从“misc”中移出以拥有 repo 是合理的。

有没有办法从源存储库（包含所有历史记录）中提取到目标/新 repo 文件夹？

# android - 在编写移动应用程序时，有没有办法让该应用程序自动下载另一个指定的应用程序？

> ID：15891752
> 
> 赞同：-1
> 
> 时间：2013-04-09T01:21:04.693
> 
> 标签：android, iphone, ios, mobile

我有一个使用二维码的移动应用程序（称之为我的应用程序）的想法。我不会详细介绍，但由于它的实现方式，用户不必安装我的应用程序和 QR 扫描应用程序，这将是一个巨大的、巨大的好处。废话太多，下载不了。因此，在我决定进一步考虑这个想法之前，我想知道是否可以让安装代码执行以下操作：

```
User downloads My App

My App checks to see if a QR scanner from a given list of possible scanners is already on the user's phone.

if Yes:

    Do nothing

else:

    Download and install a QR scanner (after prompting the user) 
```

我对移动应用程序的开发或使用经验为零，如果这是一个愚蠢的问题，我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:34:40.163

虽然没有从另一个应用程序安装的机制（除了加载适当的 App Store），但您可以使用免费（Apache 许可证 2.0）库[ZXing](https://code.google.com/p/zxing/)将 QR 码处理嵌入到您的 iOS 和/或 Android 应用程序中。

# objective-c - Objective-C 的链接器和加载器

> ID：15891764
> 
> 赞同：-1
> 
> 时间：2013-04-09T01:22:16.863
> 
> 标签：objective-c, linker, symbol-table

我最近看到了 John Levine 的书“Linkers and Loaders”。这本书写于 2000 年。如果有人读过他的书，作者所说的一切是否仍然与 2013 年的 Objective-C 相关？我在问，因为它看起来像是一本好书放在我的书架上，但如果信息已经过时，我可能不想真正研究这本书。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:03:40.870

鉴于 ObjC 自 80 年代后期以来一直作为一种本机编译语言被积极使用（之前，它主要是一种预编译器生成的语言 + 运行时），并且从那时起也支持链接/加载，它将与这本书可以是从 C 派生的任何语言。话虽*如此*，在链接/加载是由系统处理的细节很少 [OS X，OpenStep]对开发人员没有 [iOS] 可配置性。

当然，一个有趣的分歧，以及对链接/加载的深刻理解与任何与编译和执行工具链相关的工作都相关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T02:16:31.760

是与否...

我不知道那本具体的书，但如果它是 2000 年的最新版本，那么其中的材料应该仍然有效，可以了解事物在幕后是如何运作的。

**但是**，您并不需要了解任何有关链接和加载的知识来理解变量和指针。

您也不需要像这样理解符号表。符号表是编译器用于在编译期间跟踪变量的数据结构，作为将您编写的程序代码转换为 CPU 理解的指令的一部分。

编程语言中的变量和指针的概念是对 CPU 级别的内存位置和内存地址概念的抽象（它们本身在某种意义上是对较低级别的东西的抽象，最终是电路，如果你挖得足够深，电子！;-))

您应该寻找的是一本关于*编程语言概念*的书，而不是编译、链接和加载。一本好书将介绍变量和类型，然后是数组和记录等组合，最后是对象（本质上只是您将发现的变量）。类型和变量结合在一起，一个说如何解释位集合，另一个则提供某个位置来保存位集合。指针是某种指针类型的值（位集合），就像整数是某种整数类型的值一样。

变量和指针不是难懂的概念，但它们经常被误解——很多关于 SO 的问题源于对这些概念的误解——所以你的追求很好，去阅读吧！抱歉，但我没有提到手。

# ruby-on-rails-3.1 - 如何在 show.html.erb 中渲染部分内容

> ID：15891766
> 
> 赞同：0
> 
> 时间：2013-04-09T01:22:29.393
> 
> 标签：ruby-on-rails-3.1, partial-views, rails-activerecord

我的 Ruby on Rails 应用程序中有这两个模型——Artist 和 Song。它们的关联如下：

> 类艺术家 < ActiveRecord::Base
> 
> has_many :歌曲
> 
> attr_accessible :artist_name

和

> 类 Song < ActiveRecord::Base
> 
> 属于_to：艺术家
> 
> attr_accessible :title, :track_URL, :artist_id

我在views/artist/show.html.erb中有这段代码：

```
<%=  render 'artist_song'  %>

<table>
    <% @artist.songs.each do |song| %>
        <tr>
          <td><%= song.title %></td>
        </tr>
    <% end %>
</table> 
```

我试图在同一个视图中渲染（_artist_song.html.erb）的部分看起来像这样：

```
<table>
  <% @artist = Artist.all %>
  <% @artist.each do |artist| %>
      <tr>
        <td><%= link_to artist.artist_name, artist %></td>
      </tr>
  <% end %>
</table> 
```

它的工作方式是当我单击通过部分显示的艺术家时，部分下面的代码必须向我显示属于特定艺术家的所有歌曲。table 标记中的 partial 和 code 都是单独工作的。但是当我把它们放在一起时，它们之间似乎存在冲突，并且服务器向我显示了这个 No Method Error：

```
NoMethodError in Artists#show

Showing C:/Sites/OML/app/views/artists/show.html.erb where line #9 raised:

undefined method `songs' for #<Array:0x5fe1418>
Extracted source (around line #9):

6: 
7: 
8: <table>
9:     <% @artist.songs.each do |song| %>
10:         <tr>
11:           <td><%= song.title %></td>
12:         </tr>
Rails.root: C:/Sites/OML

Application Trace | Framework Trace | Full Trace
app/views/artists/show.html.erb:9:in `_app_views_artists_show_html_erb__950110288_54062208'
app/controllers/artists_controller.rb:21:in `show' 
```

我找不到解决方案。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-11T19:22:52.043

您没有使用部分。您需要在`artist`循环内渲染部分内容：

**显示.html.erb**

```
<table>
  <% @artists = Artist.all %>
  <% @artists.each do |artist| %>
    <tr>
      <td><%= link_to artist.artist_name, artist %></td>
    </tr>
    <%= render :partial => 'artist_song', :artist => artist %>
   <% end %>
</table> 
```

这样，您将当前`artist`对象传递到部分内部，因此您可以执行以下操作：

**Artist_song.html.erb**

```
<% artist.songs.each do |song| %>
  <tr>
    <td><%= song.title %></td>
  </tr>
<% end %> 
```

# c# - 修改现有 HTML 表

> ID：15891767
> 
> 赞同：0
> 
> 时间：2013-04-09T01:22:32.167
> 
> 标签：c#, html, asp.net, html-table

我有一个从 C# 中的网络服务器请求的 HTML 表。然后我在我的 aspx 网络表单中显示该页面。如何在*不硬编码先决条件的情况下将****基于课程 ID***的先决条件添加到表中的最后一列？表格设计示例如下。

 *```
<tr bgcolor="#E1E1CC">
   <td width="7%">003597</td>
   <td width="5%">01</td>
   <td width="1%">OPT</td>
   <td width="8%">MT H   </td>
   <td width="16%">2:00 pm - 2:50 pm  </td>
   <td width="17%">08/26/13 - 12/12/13</td>
   <td width="8%">
       <a href="http://www.mnsu.edu/registrar/building.html"target = _blank>
           <b>TR C124</b>
       </a>
   </td>
   <td width="19%">Staff</td>
   <td width="4%">22</td>
   <td width="4%">6</td>
   <td width="4%"><font color="#000000">Open</font></td>
   <td width="7%">
        <a href=Notes.asp?SpclNote=20143+003597+IT+100 target = _blank>
           <b>Notes</b>
        </a>
   </td>
</tr> 
<tr bgcolor="#E1E1CC">
    <td colspan="3">&nbsp;</td>
    <td width="8%">M      </td>
    <td width="16%">10:00 am - 11:50 am</td>
    <td width="17%">08/26/13 - 12/09/13</td>
    <td width="8%">
        <a href="http://www.mnsu.edu/registrar/building.html"target = _blank>
            <b>WH 0119       </b>
        </a>
    </td>
    <td width="19%">Staff</td>
    <td colspan="4">&nbsp;</td>
</tr> 
```

![在此处输入图像描述](https://i.stack.imgur.com/DTgRS.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:53:11.070

如果您将页面 html 作为字符串获取，则可以将 html 插入其中。就像是：

```
private void SetValue(string PageHtml, string ID, string TextToInsert)
{
    string html = PageHtml;
    string sMyHtmlToInsert = TextToInsert;
    int iSplitIndex = html.IndexOf(ID);
    iSplitIndex = html.IndexOf("{tag}",iSplitIndex);
    string sHtml1 = html.SubString(0, iSplitIndex);
    string sHtml2 = html.SubString(iSplitIndex);
    string sFinalHtml = sHtml1 + sMyHtmlToInsert + sHtml2;
} 
```*

# algorithm - 逐位运算在实际编程中是否常见且有用？

> ID：15891768
> 
> 赞同：0
> 
> 时间：2013-04-09T01:22:34.240
> 
> 标签：algorithm, binary

我经常遇到涉及排序/未排序数组的面试问题，他们要求您找到该数组的某种属性。例如[查找数组中出现奇数次的数字](http://www.geeksforgeeks.org/find-the-number-occurring-odd-number-of-times/)，或者[在大小为一百万的未排序数组中查找缺失的数字](http://www.glassdoor.com/Interview/Given-an-array-of-a-999-999-numbers-from-1-to-a-1-000-000-there-s-one-number-missing-The-array-is-not-sorted-and-you-ca-QTN_414872.htm)。通常，问题会带来额外的约束，例如 O(n) 运行时复杂度或 O(1) 空间复杂度。使用逐位操作可以非常有效地解决这两个问题。当然这些还不是全部，这样的问题还有很多。

对我来说，按位编程似乎更像是基于黑客或直觉的，因为它以二进制而不是十进制工作。作为一个没有太多实际编程经验的大学生，我很好奇这类问题在实际工作中是否真的很流行，或者它们只是面试官用来选择最聪明的候选人的脑筋急转弯。如果它们确实有用，它们实际上适用于什么样的场景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:47:27.947

> 逐位运算在实际编程中是否常见且有用？

共性或适用性取决于手头的问题。

一些现实生活中的项目确实受益于按位操作。

一些例子：

1.  您通过直接操作显存来设置屏幕上的单个像素，其中每个像素的颜色由 1 位或 4 位表示。因此，在每个字节中，您可以打包 8 或 2 个像素，您需要将它们分开。基本上，您的硬件决定了按位运算的使用。

2.  您正在处理某种文件格式（例如[GIF](http://en.wikipedia.org/wiki/Graphics_Interchange_Format)）或使用单个位或位组来表示信息片段的网络协议。您的数据决定了按位运算的使用。

3.  您需要计算某种[校验和](http://en.wikipedia.org/wiki/Checksum)（可能是[奇偶校验](http://en.wikipedia.org/wiki/Parity_bit)或[CRC](http://en.wikipedia.org/wiki/Cyclic_redundancy_check)）或[哈希值](http://en.wikipedia.org/wiki/Hash_value)，而一些最适用的算法通过使用位进行操作来做到这一点。

4.  您正在实现（或使用）一个[任意精度的算术](http://en.wikipedia.org/wiki/Arbitrary_precision)库。

5.  您正在实现[FFT](http://en.wikipedia.org/wiki/Fast_Fourier_transform)，您自然需要[在整数中反转位](http://en.wikipedia.org/wiki/Bit_reversal)或在添加时模拟相反方向的进位传播。该算法的性质需要一些按位操作。

6.  您的空间不足，需要使用尽可能少的内存，并且您将多个位值和位组压缩到整个字节、字、双字和四字中。您选择使用按位运算来节省空间。

7.  CPU 上的分支/跳转代价高昂，您希望通过将代码实现为一系列没有任何分支的指令来提高性能，而逐位指令可以提供帮助。这里最简单的示例是从两个整数中选择最小（或最大）整数值。最自然的实现方式是使用某种`if`语句，最终涉及比较和分支。您选择使用按位运算来提高速度。

8.  您的 CPU 支持浮点运算，但计算平方根之类的运算速度很慢，您[可以使用一些快速简单的整数和浮点运算来模拟它](http://en.wikipedia.org/wiki/Fast_inverse_square_root)。同样在这里，您可以从处理浮点格式的位表示中受益。

9.  `OR`您正在模拟 CPU 或整台计算机，并且在解码指令、访问 CPU 或硬件寄存器的一部分、简单地模拟诸如、`AND`、`XOR`、`NOT`等按位指令时，您需要操纵单个位（或位组） 。您的问题完全需要逐位说明。

10.  您正在向网络（例如此处）或书中的其他人解释按位算法或技巧或需要按位操作的东西。:)

在过去的 20 年里，我亲自完成了以上所有工作以及更多工作。不过，YMMV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:44:50.890

Using Bitwise Operations is strictly Dependent on your main concerns.

I was once asked to solve a problem to find the all combinations of numbers which don't

have a repeating digit within them , which are of form N*i, for a given i.

I suddenly made use of bitwise operations and generated all the numbers exactly with better

time , But to my surprise I was asked to rewrite and code with the no use of the Bitwise

Operators , as people find no readability with that , the code which many people has to use

in further . So, If performance is your concern go for Bitwise .

If readability is your concern reduce their use.

If you want both at time , you need to follow a good style of writing code with bitwise

operators in a way it was readable or understandable .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T08:27:08.057

尽管如果您真的不关心它，您通常可以在用户级代码中“避免它”，但它对于内存消耗是一个大问题的情况很有用。通常在处理硬件设备或嵌入式编程时经常需要位操作，甚至需要位操作。

I/O 寄存器通常具有许多不同的配置选项，可通过各种标志样式的位组合进行寻址。或者对于内存相对于现代 PC RAM 大小极为有限的小型嵌入式设备，您可能习惯于在正常工作中使用。

对于热代码中的一些优化，它也非常方便，您希望使用无分支实现可以用条件代码表示的东西，但需要更快的运行时性能。例如，找到给定整数的最接近 2 的幂可以在某些处理器上非常有效地实现，使用比更常见的解决方案的 bit hack。

有一本名为“Hacker's Delight”Henry S. Warren Jr. 的好书，其中包含非常有用的函数，可解决“现实世界”代码中出现的各种问题。网上也有很多类似的文档。

另一个例子是1970 年代 MIT AI 实验室的一份著名文件[HAKMEM](http://www.inwap.com/pdp10/hbaker/hakmem/hacks.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T01:28:50.700

根据我的经验，当您以大型数据集的速度和效率为目标时，它非常有用。

我经常使用位向量来表示非常大的集合，这使得存储非常高效，并且比较和组合等操作非常快速。由于同样的原因，我还发现位矩阵非常有用，例如查找大量大型二进制矩阵的交集。使用二进制掩码来指定子集也非常有用，例如 Matlab 和 Python 的 Numpy/Scipy 使用二进制掩码（本质上是二进制矩阵）从矩阵中选择元素的子集。

# android - Android中的一个简单的实时麦克风表

> ID：15891773
> 
> 赞同：0
> 
> 时间：2013-04-09T01:23:05.960
> 
> 标签：android, audio, real-time

我从 Pro Android media 这本书中得到了帮助...

这是代码：

```
public class MicMeter extends Activity implements OnClickListener {

RecordAudio recordTask;
int blocksize = 256;
int frequency = 8000;
int channelConfig = AudioFormat.CHANNEL_CONFIGURATION_MONO;
int audioEncoding = AudioFormat.ENCODING_PCM_16BIT;
TextView txt;
Button start;
boolean started = false;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_mic_meter);
    start = (Button)findViewById(R.id.button1);
    txt = (TextView)findViewById(R.id.textView1);

    start.setOnClickListener(this);

}

private class RecordAudio extends AsyncTask <Void,double[],Void>{

    @Override
    protected Void doInBackground(Void... params) {
        try{
        int bufferSize = AudioRecord.getMinBufferSize(frequency,channelConfig,audioEncoding);
        AudioRecord audioRecord = new AudioRecord( MediaRecorder.AudioSource.MIC, frequency, channelConfig, audioEncoding, bufferSize);

        short[] buffer = new short[blocksize];
        double[] meter = new double[blocksize];

        audioRecord.startRecording();

        while(started){
            int bufferReadResult = audioRecord.read(buffer, 0, blocksize);

            for (int i = 0; i < blocksize && i < bufferReadResult; i++) { 
                meter[i] = (double) buffer[i] / 32768.0; // signed 16 bit
            }
            publishProgress(meter);
        }
        audioRecord.stop();

    }catch (Throwable t) {
        Log.e("AudioRecord","RecordingFail");
    }

        return null;
    }

    @Override
    protected void onProgressUpdate(double[]... meter) {

        for(int i = 0 ; i < meter[0].length ; i++){
            double[] helper = meter[i];
            txt.setText(Double.toString(helper));
        }

    }

}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

    if(started){
        recordTask.cancel(true);
    }else{
        started = true;
        recordTask = new RecordAudio();
        recordTask.execute();

    }
} 
```

}

当我按下按钮时。它显示 255.0 然后它没有响应......有没有办法解决它？有没有更好的版本？

感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:42:58.863

```
for(int i = 0 ; i < meter[0].length ; i++){
    double helper = i;
    txt.setText(Double.toString(helper)); 
```

setText 覆盖旧值。所以只有最后一个电话会显示。最后一次调用将其设置为 helper，它始终是meter[0].length。由于这是一个固定的数字，它不会改变。

# jquery - 上传文件后自动重新加载页面

> ID：15891775
> 
> 赞同：0
> 
> 时间：2013-04-09T01:23:35.937
> 
> 标签：jquery, dropbox, reload

按照[这篇文章的答案，](https://stackoverflow.com/q/15864618)我能够完成一份非常令人满意的工作。这几乎是完美的。我正在尝试制作一种警告面板，从`txt`我的 Dropbox Public 文件夹中的文件中加载新闻。所以我只是更新那个文件，它的内容就会显示在我的页面上。

我有两个文件来产生这个结果。重要的代码是：

## pag01.html

从包含更新新闻的数据文件中加载`avisos.html`我用来格式化内容的文件。

```
<div id="quadro" class="avisos">
<script>
  var url = 'https://dl.dropbox.com/u/42709342/avisos.html';

// 3\. ok got the data
function afterReadFromDropBox(data) {
$('#quadro').html(data);
}

// 2\. ok the document is ready, lets grab some data from dropbox
function whenDocumentIsReady(){
$.get(url, afterReadFromDropBox );
}

// 1\. when document is ready make the call
$(document).ready( whenDocumentIsReady );
</script>
</div> 
```

## avisos.html

`avisos`只需从我的 Dropbox Public 文件夹中加载数据文件。

```
<div id="avisosmsg" class="avisosmsg">
<script>
   var url = 'https://dl.dropbox.com/u/42709342/avisos';

// 3\. ok got the data
function afterReadFromDropBox(data) {
$('#avisosmsg').html(data);
}

// 2\. ok the document is ready, lets grab some data from dropbox
function whenDocumentIsReady(){
$.get(url, afterReadFromDropBox );
}

// 1\. when document is ready make the call
$(document).ready( whenDocumentIsReady );
</script>
</div> 
```

在我的测试中，我使用标签

```
<meta  http-equiv="Refresh" Content=2; url="pag01.html"> 
```

自动重新加载页面并避免多次按 F5。

**所以这是我的问题：** *每次我将数据文件的新版本上传到 Dropbox 时，如何自动重新加载代码。是否可以做一种待机程序？*

**ps：**我也遇到了编码问题，如下图所示，我的页面的一部分与我的警告面板一起显示。

![在此处输入图像描述](https://i.stack.imgur.com/lZY7j.png)

# c++ - 如何调用在另一个文件中找到的函数？

> ID：15891781
> 
> 赞同：87
> 
> 时间：2013-04-09T01:24:31.167
> 
> 标签：c++, sfml, identifier

我最近开始学习 C++ 和 SFML 库，我想知道我是否在名为“player.cpp”的文件上定义了一个 Sprite，如何在位于“main.cpp”的主循环中调用它？

这是我的代码（请注意，这是 SFML 2.0，而不是 1.6！）。

主文件

```
#include "stdafx.h"
#include <SFML/Graphics.hpp>
#include "player.cpp"

int main()
{
    sf::RenderWindow window(sf::VideoMode(800, 600), "Skylords - Alpha v1");

    while (window.isOpen())
    {
        sf::Event event;
        while (window.pollEvent(event))
        {
            if (event.type == sf::Event::Closed)
                window.close();
        }

        window.clear();
        window.draw();
        window.display();
    }

    return 0;
} 
```

播放器.cpp

```
#include "stdafx.h"
#include <SFML/Graphics.hpp>

int playerSprite(){
    sf::Texture Texture;
    if(!Texture.loadFromFile("player.png")){
        return 1;
    }
    sf::Sprite Sprite;
    Sprite.setTexture(Texture);
    return 0;
} 
```

我需要帮助的地方是它在我的绘图代码`main.cpp`中所说的地方。`window.draw();`在那个括号中，应该有我想要加载到屏幕上的 Sprite 的名称。据我搜索并通过猜测尝试，我还没有成功地使该绘图功能与另一个文件上的精灵一起工作。我觉得我遗漏了一些重要的、非常明显的东西（在任何一个文件上），但话又说回来，每个专业人士都曾经是新手。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-04-09T01:27:32.843

您可以使用头文件。

好习惯。

您可以在该头文件中创建一个名为`player.h`声明其他 cpp 文件所需的所有函数的文件，并在需要时包含它。

**播放器.h**

```
#ifndef PLAYER_H    // To make sure you don't declare the function more than once by including the header multiple times.
#define PLAYER_H

#include "stdafx.h"
#include <SFML/Graphics.hpp>

int playerSprite();

#endif 
```

**播放器.cpp**

```
#include "player.h"  // player.h must be in the current directory. or use relative or absolute path to it. e.g #include "include/player.h"

int playerSprite(){
    sf::Texture Texture;
    if(!Texture.loadFromFile("player.png")){
        return 1;
    }
    sf::Sprite Sprite;
    Sprite.setTexture(Texture);
    return 0;
} 
```

**主文件**

```
#include "stdafx.h"
#include <SFML/Graphics.hpp>
#include "player.h"            //Here. Again player.h must be in the current directory. or use relative or absolute path to it.

int main()
{
    // ...
    int p = playerSprite();  
    //... 
```

* * *

这不是一个好的做法，但适用于小型项目。在 main.cpp 中声明你的函数

```
#include "stdafx.h"
#include <SFML/Graphics.hpp>
// #include "player.cpp"

int playerSprite();  // Here

int main()
{
    // ...   
    int p = playerSprite();  
    //... 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2018-07-14T05:45:55.540

@user995502 关于如何运行程序的答案的小补充。

`g++ player.cpp main.cpp -o main.out && ./main.out`

# javascript - 使用普通锚激活 SWFUpload 触发器

> ID：15891787
> 
> 赞同：0
> 
> 时间：2013-04-09T01:25:48.833
> 
> 标签：javascript, css, ajax, swfupload

这可能是一个简单修复的简单问题，但我无法找出解决方案。

我在网站上使用 SWFUpload 来促进文件上传（显然），但是，它需要使用 span 或类似的东西放置一个占位符：

```
<span id="SWF_Placeholder_etc"></span> 
```

然后调用 SWFUpload ，它基本上用以下内容替换了该跨度：

```
<object id="SWFUpload_1" type="application/x-shockwave-flash" data="/swfupload/Flash/swfupload.swf?preventswfcaching=1365470153721" width="120" height="35" class="swfupload">
  <param name="wmode" value="transparent">
  <param name="movie" value="/swfupload/Flash/swfupload.swf?preventswfcaching=1365470153721">
  <param name="quality" value="high">
  <param name="menu" value="false">
  <param name="allowScriptAccess" value="always">
  <param name="flashvars" value="all settings in here">
</object> 
```

这需要使用带有按钮的各种翻转/活动状态的笨重图像来传递各种闪存变量，以便对其进行“样式化”，我**非常**宽松地使用“样式”一词。

我想基本上有一个隐藏的 flash 对象，我可以使用 javascript 调用来激活 flash 以触发点击（由于安全原因，我认为这不会起作用）或调用 SWFUpload 的代码以实际触发action - 使用漂亮、易于设计的`<a>`标签。

任何人？我不能成为第一个想要这样做的人，我只是希望其他人已经取得了一些成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T23:46:18.487

你可以做类似的事情

```
SWFUpload.instances.SWFUpload_0.selectFiles() or selectFile() 
```

但不幸的是，Flash 10 + 不支持它我要做的就是制作一个 HTML 元素，对其进行样式设置，并将其作为按钮文本图像

# ios - 如何在 Titanium 中偏移标题控件

> ID：15891789
> 
> 赞同：0
> 
> 时间：2013-04-09T01:26:29.060
> 
> 标签：ios, controls, titanium, title, offset

如何抵消钛中的标题控制？

现在我正在尝试在标题控件中的标签上放置一个 left: -100 属性，当您打开视图但随后它移回中心时有效。

关于如何实现这一转变有什么建议吗？

提前致谢！

```
var txtSearch = Titanium.UI.createTextField({
    hintText: 'Keyword to search for',
    height: 'auto',
    width: 220,
    left: -100,
    font: {fontSize: 12},
    enabled: true,
    keyboardType:Titanium.UI.KEYBOARD_EMAIL,  
    returnKeyType:Titanium.UI.RETURNKEY_DEFAULT,  
    borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,
    autocapitalization: Titanium.UI.TEXT_AUTOCAPITALIZATION_NONE,
    clearButtonMode: Titanium.UI.INPUT_BUTTONMODE_ONFOCUS
});
win.setTitleControl(txtSearch);

var btnSearch = Titanium.UI.createButton({
    title: 'Search',
    height: 'auto',
    width: 'auto',
    font: {fontSize: 13}
});
win.rightNavButton = btnSearch; 
```

如果我点击搜索按钮，它把我带到搜索结果页面，然后我点击后退按钮，文本框不会移动并且看起来很好..只有当页面第一次加载时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:15:53.817

尝试将文本字段添加到视图，然后将视图设置为标题控件：

```
var container = Ti.UI.createView({
    width: 320
});

var txtSearch = Titanium.UI.createTextField({
    hintText: 'Keyword to search for',
    height: 'auto',
    width: 220,
    left: 0,
    font: {fontSize: 12},
    enabled: true,
    keyboardType:Titanium.UI.KEYBOARD_EMAIL,  
    returnKeyType:Titanium.UI.RETURNKEY_DEFAULT,  
    borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,
    autocapitalization: Titanium.UI.TEXT_AUTOCAPITALIZATION_NONE,
    clearButtonMode: Titanium.UI.INPUT_BUTTONMODE_ONFOCUS
});
container.add(txtSearch);
win.setTitleControl(container); 
```

# ruby-on-rails - Rails 与 Heroku 配合得天衣无缝

> ID：15891794
> 
> 赞同：1
> 
> 时间：2013-04-09T01:26:48.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3, deployment, heroku

以前有人问过这个问题，但似乎没有答案对我有用。我将把问题分解为 3 个组成部分：

1）我偶尔会收到 Heroku R14 内存（超出内存配额）（即该网站在 Heroku 上已经运行了 2 天，我在大约 10-15 百万的时间内两次收到此错误[我太情绪化了，无法准确计算时间]）。

2）我按照 Heroku 的建议安装了 oink gem。

3）Oink 肯定会记录，因为当我在本地工作时，我会在 heroku 日志和 Webrick 中收到有关此效果的消息。但是，我无法访问显示哪些函数超过内存阈值的日志记录摘要。

返回结果（但错误的）的唯一行是：

```
oink --threshold=0 logfile_for_oink 
```

但它返回空行如下：

```
---- MEMORY THRESHOLD ----
THRESHOLD: 0 MB

-- SUMMARY --
Worst Requests:

Worst Actions:

Aggregated Totals: 
```

其他所有尝试（通常是复制 StackOverflow 上已有的建议）都会返回错误。

在此之后，我将列出我所做的不同尝试（因此没有人发布我可能已经尝试过的建议）。

heroku run bundle exec oink --threshold=75 log/*

此行返回以下错误：

/app/vendor/bundle/ruby/1.9.1/gems/oink-0.10.1/lib/oink/cli.rb:88:in `block in get_file_listing': 找不到“log/development.log”（RuntimeError )

这方面的每一个变化，例如 log/production.rb 或 /log/* 或你有什么失败。

我还尝试了以下链接的建议，但无济于事：

[将 oink gem 与 heroku 一起使用](https://stackoverflow.com/questions/8986144/using-oink-gem-with-heroku)

[oink logs 命令在heroku上不起作用](https://stackoverflow.com/questions/10359552/oink-logs-command-not-working-on-heroku)

[oink logs 命令在heroku上不起作用](https://stackoverflow.com/questions/10359552/oink-logs-command-not-working-on-heroku)

[我怎样才能在heroku中运行oink？](https://stackoverflow.com/questions/13568139/how-can-i-run-oink-in-heroku)

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-22T16:21:35.397

Heroku 在日志文件前面附加了一个时间戳，因此 oink 无法读取它。您可以使用正则表达式来修复它。

[http://arches.io/2013/07/understand-memory-usage-on-heroku-rails-app-using-oink/](http://arches.io/2013/07/understand-memory-usage-on-heroku-rails-app-using-oink/)

# c# - 如何在保持纵横比和居中的同时使我的 XNA 游戏全屏显示？

> ID：15891796
> 
> 赞同：0
> 
> 时间：2013-04-09T01:27:08.527
> 
> 标签：c#, xna, fullscreen, aspect-ratio

我还没有找到任何好的教程来制作全屏游戏，同时保持纵横比。用文字来描述对我来说有点困难，所以我将用两张图片向您展示。

我目前拥有的：
[https ://dl.dropbox.com/u/51911679/Pictures/Whocares/Screenshots/whatIgot.jpg](https://dl.dropbox.com/u/51911679/Pictures/Whocares/Screenshots/whatIgot.jpg)

我想要什么：
[https ://dl.dropbox.com/u/51911679/Pictures/Whocares/Screenshots/whatIwant.jpg](https://dl.dropbox.com/u/51911679/Pictures/Whocares/Screenshots/whatIwant.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T02:51:31.877

该`GraphicsDeviceManager`课程可以为您处理大部分内容：

```
 public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        graphics.IsFullScreen = true;
        graphics.PreferredBackBufferWidth = 1280;
        graphics.PreferredBackBufferHeight = 720;

        //...
    } 
```

现在，您必须确保您实际上是在您的`SpriteBatch`坐标中绘制整个屏幕（基于您的宽度和高度）。

# apache - 对特定目录使用特定的 PHP 文件

> ID：15891803
> 
> 赞同：1
> 
> 时间：2013-04-09T01:27:54.153
> 
> 标签：apache, .htaccess, mod-rewrite

我正在尝试创建基于第一级目录名称重写的 mod_rewrite 规则，加上故障转移以重写到标准文件，以防没有匹配的目录名称。

例子：

我有units.php、models.php 和other.php。other.php 文件应处理所有未分配的请求。

[http://www.mydomain.com/units/4435](http://www.mydomain.com/units/4435) 应该重定向到/units.php?id=4435

[http://www.mydomain.com/models/594](http://www.mydomain.com/models/594) 应该重定向到 /models.php?id=594

[http://www.mydomain.com/anything](http://www.mydomain.com/anything) 应该重定向到 /other.php?id=anything

[http://www.mydomain.com/anything/893](http://www.mydomain.com/anything/893) 应该重定向到 /other.php?id=anything/893

让我知道这是否有意义。我不确定如何构建规则和条件来实现我想要的。

这就是我试图做到的。它适用于以“units”或“models”开头的 URL，但如果我尝试任何其他 URL，则会收到 500 错误：

```
RewriteEngine On  
RewriteCond %{SCRIPT_FILENAME} !-d  
RewriteCond %{SCRIPT_FILENAME} !-f  
RewriteRule ^(units)/(.+)$ /units.php?id=$2 [L,NC] 
RewriteRule ^(models)/(.+)$ /models.php?id=$2 [L,NC]
RewriteRule ^(.+)$ /other.php?id=$2 [L,NC] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T09:35:48.587

我建议这样做：

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/(units|models)/([0-9]+)/?$ /$1.php?id=$2  [L,QSA]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  !^/(units|models)/[0-9]+/?$
RewriteRule ^/[^/]+/([0-9]+)/?$ /other.php?id=$1  [L,QSA] 
```

# c++ - 在 Visual Studio 2012 中链接 zlib

> ID：15891806
> 
> 赞同：0
> 
> 时间：2013-04-09T01:28:14.287
> 
> 标签：c++, visual-studio, visual-c++, zlib, lnk2019

我有一个在 Linux 上编译和运行良好的 C++ 程序，我现在正试图在 Visual Studio 中的 Windows 机器上编译它。我面临的主要问题是以下错误消息：

> 错误 LNK2019：函数中引用了未解析的外部符号 _gzread

我已经下载了 zlib 库并尝试将其链接到我的项目，但显然没有成功。我很感激有关如何将其链接到我的项目的明确说明。您在说明中假设的越少越好，因为我对 Visual Studio 比较陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:04:42.560

找到了解决方案。即使我在 64 位机器上工作，VS 也在 32 位模式下编译。我只是使用了 32 位版本的 zlibwapi 而不是 64 位版本，它可以工作。

# emacs - 如何默认启用自动拼写检查？

> ID：15891808
> 
> 赞同：9
> 
> 时间：2013-04-09T01:28:18.983
> 
> 标签：emacs

我找不到可以添加到 [初始化](https://www.gnu.org/software/emacs/manual/html_node/emacs/Init-File.html) 文件以默认启用自动拼写检查的内容。

可以从菜单中启用自动拼写检查（Flyspell）——可能有一种方法可以了解菜单项的工作原理吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-09T04:48:57.660

我的 init.el 中有以下内容：

```
(add-hook 'text-mode-hook 'flyspell-mode)
(add-hook 'prog-mode-hook 'flyspell-prog-mode) 
```

这很好地满足了我的编辑需求。

如果您习惯于 OOP，钩子就像“事件”或观察者模式：它们是在特定点运行的函数列表。自定义 Emacs 的主要方法之一是将自己的函数添加到这些钩子中。

Emacs 中的大多数模式在启用时都会调用钩子。`prog-mode`是从中派生编程模式的模式，因此添加功能以`prog-mode-hook`自定义所有编程模式。

这些东西的最佳参考是内置的 Emacs Lisp 手册（`C-h r`或`M-x info-emacs-manual`）。它有关于 Emacs Lisp 编程的部分，包括关于钩子的一章。

# ios - ViewController 容器 UIView 的大小

> ID：15891812
> 
> 赞同：0
> 
> 时间：2013-04-09T01:28:34.520
> 
> 标签：ios, objective-c, viewcontroller

我在 iphone5 上有一个 400 高的 ViewController 容器。当我在 iphone4 上使用它时，它会像对所有东西一样挤压视图。在这种情况下，我希望视图在所有手机上显示相同的大小。

vc.h

```
@property (strong, nonatomic) IBOutlet UIView *viewForContainer; 
```

vc.m

```
@synthesize viewForContainer

- (void)viewDidLoad 
{
    [super viewDidLoad];

    CGRect rect = [viewForContainer frame];
    rect.size.height = 400;
    [viewForContainer setFrame:rect];
} 
```

为什么我不能像这样强制高度？..我将不得不为它制作一个新的故事板吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:18:44.360

简短的回答：

选择视图并选择 Editor > Pin > Height。现在摆脱不必要的底部约束。

长答案：

你真的应该停止你正在做的一切，并*了解*你在做什么——特别是关于自动布局。默认情况下，它无处不在，无论我们喜欢与否，所以人们不妨了解一下。

# shopping-cart - Prestashop 运送错误：没有运送到您选择的地址的承运人

> ID：15891814
> 
> 赞同：1
> 
> 时间：2013-04-09T01:28:47.070
> 
> 标签：shopping-cart, prestashop, shipping, carrier

![prestashop 前台](https://i.stack.imgur.com/j7if9.jpg)我是 prestashop 的新手。我已安装产品并将其添加到商店。但是当我尝试结帐时进行测试时，它显示“没有运送到您选择的地址的运营商。”。我需要

> 1.  所有货到付款
> 2.  我们自己的运输
> 3.  固定运费说 2 美元。

我怎样才能达到上述要求。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-02-25T05:27:36.413

在 Prestashop 1.6.1.4 中转到**运输 --> 承运人**

并选择“**您的运营商名称**”并单击以进行编辑。

在第二个选项卡“**运输地点和成本**”选项卡中选择您的范围。（您在 prestashop 安装期间选择）

或者，如果您不知道，则只需单击“**所有**”范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T06:18:00.723

当您选择的国家所在的区域没有分配运营商时，会显示此消息。请注意，在 PS 中，您必须选择运营商可用的区域。而且您必须确保您提供运输的国家/地区在这些区域内。

假设您有两个运营商 A 和 B，并且还考虑位于亚洲的巴基斯坦。现在，如果没有运营商拥有亚洲区，那么对于巴基斯坦，您将收到该消息。

现在如果您已将运营商 A 分配到 Asia zone ，那么只有 A 将显示到巴基斯坦。

如果您将运营商 A 和 B 都分配到亚洲区域，那么对于巴基斯坦，两者都会显示。

我希望这将有所帮助。

谢谢

# powershell-3.0 - 从文本文件中删除最后一个管道

> ID：15891817
> 
> 赞同：0
> 
> 时间：2013-04-09T01:29:02.097
> 
> 标签：powershell-3.0

**目标：**我需要`|`从文件中删除最后一个字符，前提是它确实是`\w`文件中的最后一个字符。

为什么下面的语法是追加而不是替换？

```
[IO.File]::ReadAllText(".\example.txt") -replace '`|$','' > .\example.txt 
```

我也试过

```
[IO.File]::ReadAllText(".\example.txt") -replace '\|$','' > .\example.txt 
```

......似乎没有任何作用。毫不奇怪，等效的 with`Get-Content`也不起作用：

```
(Get-Content .\example.txt) | ForEach-Object {$_ -replace '$\|', ''} | Set-Content .\example.txt 
```

我认为正确解析管道存在一些问题，但我不确定如何补偿它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:47:24.553

感谢 Freenode 上#powershell 的一些帮助，我现在有了。

```
$Content = Get-Content example.txt;
If ($Content[-1] -eq '|') {
    $Content.Substring(0,$Content.Length-1) > example.txt
} 
```

# node.js - Homebrew 不认为 XCode 与旧 XCode 和当前 Homebrew 一起安装

> ID：15891818
> 
> 赞同：0
> 
> 时间：2013-04-09T01:29:06.960
> 
> 标签：node.js, osx-snow-leopard, homebrew, xcode3.2

我正在尝试安装 node.js，但仍在运行 OSX 10.6.8，因此我坚持使用 XCode 3（使用 3.2）。

我的第一个问题是我无法让自制软件识别 XCode 3.2。当我运行时，`brew -v doctor`我得到以下输出（在修复了一些其他问题之后）：

```
Homebrew 0.9.4
Warning: Setting DYLD_* vars can break dynamic linking. 
Set variables:
    DYLD_LIBRARY_PATH

Warning: Xcode not installed
Most stuff needs Xcode to build: http://developer.apple.com/xcode/ 
```

我只能找到 XCode 4.xx 的修复程序，它们对我不起作用。如何将自制软件指向我的 XCode？（我也不太明白我应该如何设置`DYLD_LIBRARY_PATH`......）

当我运行`brew install node`时，我被告知未安装 xcode（肯定是），还有这个错误：`IOError: [Errno 2] No such file or directory: 'out/Release/node'`

我看到的修复与 XCode（各种`xcode-select -switch`修复）有关，但它们对我不起作用，因为这些修复适用于 XCode 4.xx。

当我运行详细版本时，还会显示此错误：

```
creating  ./config.gypi
creating  ./config.mk
sh: /usr/bin/usr/bin/xcodebuild: No such file or directory
/usr/bin/usr/bin/xcodebuild fails with 32512 - Unknown error: 32512

gyp: Error 69 running xcodebuild 
```

我真的很感激这方面的一些帮助。

谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:53:55.403

虽然 homebrew 对于很多包来说都很棒，但我从来没有为 node.js 使用过好运。您可以使用标准的[OSX 二进制文件](http://nodejs.org/dist/v0.10.3/node-v0.10.3.pkg)安装吗？

如果您需要使用多个版本的 node.js，nvm 也非常[好](https://github.com/creationix/nvm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T23:08:51.687

听起来您现在可能已经安装了 Xcode CLI 工具。您可以从 Xcode 首选项安装它们。

# wordpress - Wordpress：使用自定义字段循环发布帖子

> ID：15891819
> 
> 赞同：0
> 
> 时间：2013-04-09T01:29:23.050
> 
> 标签：wordpress

我循环浏览帖子并按 category_name=news，如何显示每个帖子的自定义字段？先感谢您。

```
<?php $preNewsPosts = new WP_Query();
$preNewsPosts->query('posts_per_page=3&category_name=news');
while($preNewsPosts->have_posts()): $preNewsPosts->the_post();
?>
<a href="<?php the_permalink(); ?>" class="atitle" ><?php the_post_thumbnail('thumbnail'); ?><?php the_title(); ?></a>
<?php
the_excerpt();
?>
<hr style="width: 95%; border: 1px solid #e6e6e6; " />
<?php
endwhile;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:34:06.567

这应该可以，只需放在`while`循环内即可。确保更改`custom_field`为自定义字段的名称

```
echo get_post_meta($preNewsPosts->post->ID, 'custom_field', true); 
```

# css - Susy Compass omega 正在添加 #margin-left: -1em;

> ID：15891822
> 
> 赞同：0
> 
> 时间：2013-04-09T01:29:33.010
> 
> 标签：css, sass, compass-sass, susy-compass

我正在使用 Susy 框架为我的网站创建一个网格，我非常喜欢它。我无法弄清楚为什么在跨度列中使用 omega 时会添加 #margin-left: -1em。我似乎找不到任何关于它的信息，当我验证 css 时它会抛出这个错误： .second Parse Error #margin-left: -1em;

我的代码如下所示

```
//this is the default number of columns
$total-columns: 12; 
//width of each column
$column-width   : 4em; 
//space between columns
$gutter-width   : 1em; 
//space on the right and left of the grid
$grid-padding   : $gutter-width;

.first{
    @include span-columns(6,12);
}
.second{
    @include span-columns(6 omega,12);
} 
```

并生成这个

```
.first {
   width: 49.15254%;
   float: left;
   margin-right: 1.69492%;
   display: inline;
}

.second {
   width: 49.15254%;
   float: right;
   margin-right: 0;
   #margin-left: -1em;
   display: inline;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T04:32:53.837

你的代码用 Compass 编译得很好。有问题的行有一个星号，而不是一个井号：

```
*margin-left: -1em; 
```

以星号开头的 CSS 行是仅适用于 IE <= 7 的 hack。

要禁用 IE 6-7 支持，`$legacy-support-for-ie`请在导入 Susy 之前设置为 false：

```
$legacy-support-for-ie: false;
@import "susy"; 
```

# ios - 序列化 JSON 字符串 SBJSON vs NSJSONSerialization vs 其他什么？

> ID：15891825
> 
> 赞同：2
> 
> 时间：2013-04-09T01:30:01.263
> 
> 标签：ios, nsjsonserialization, sbjson

我正在接收这个 JSON 字符串，想知道如何将其序列化为字典，以便将其解析为托管对象。

我已经查看了几种方法（在标题中命名），但似乎找不到最简单、最快的替代方法。我想使用 NSJSONSerialization，但我不确定它是否可以做到这一点？

字符串进来的代码

```
NSString *data = [[NSString alloc]initWithData:response encoding:NSUTF8StringEncoding];
        NSLog(@"String %@",data); 
```

NSLog 消息

```
String [{"0":"1","id":"1","1":"re ee","name":"re ee","2":"http:\/\/ree.com\/images\/re.png","backgroundImageUrl":"http:\/\/ree.com\/images\/re.png","3":"http:\/\/ree.com\/images\/re.png","logoImageUrl":"http:\/\/ree.com\/images\/re.png"}]<br /> 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:54:10.897

[JSONKit](https://github.com/johnezang/JSONKit)是您正在寻找的。

除了易用性之外，它比 SBJSon 更快，甚至比 NSJSONSerialization 更快。

对于您的示例，您可以获得这样的数组：

```
NSArray* arrayFromJson = [data objectFromJSONString];
NSString* id = arrayFromJson[0][@"id"]； 
```

容易吧？

# google-chrome - Chrome API 响应标头

> ID：15891827
> 
> 赞同：6
> 
> 时间：2013-04-09T01:30:15.367
> 
> 标签：google-chrome, google-chrome-extension

基于此文档：[https ://developer.chrome.com/extensions/webRequest.html#event-onHeadersReceived](https://developer.chrome.com/extensions/webRequest.html#event-onHeadersReceived)

我试图通过控制台显示响应，例如：

`console.log(info.responseHeaders);`

但它的回归`undefined`。

但这有效：

`console.log("Type: " + info.type);`

请帮忙，我真的需要获取 responseHeaders 数据。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-09T01:46:51.330

您必须像这样请求响应标头：

```
chrome.webRequest.onHeadersReceived.addListener(function(details){
  console.log(details.responseHeaders);
},
{urls: ["http://*/*"]},["responseHeaders"]); 
```

* * *

使用示例。这是我如何`webRequest`在扩展程序中使用 api 的一个实例。（只显示部分不完整的代码）

我需要间接访问一些服务器数据，我通过使用 302 重定向页面来做到这一点。`Head`我向所需的网址发送请求，如下所示：

```
$.ajax({
  url: url,
  type: "HEAD"
  success: function(data,status,jqXHR){
    //If this was not a HEAD request, `data` would contain the response
    //But in my case all I need are the headers so `data` is empty
    comparePosts(jqXHR.getResponseHeader('redirUrl')); //where I handle the data
  }     
}); 
```

然后我默默地终止重定向，同时`location`使用`webRequest`api 为我自己的用途抓取标题：

```
chrome.webRequest.onHeadersReceived.addListener(function(details){
  if(details.method == "HEAD"){
    var redirUrl;
    details.responseHeaders.forEach(function(v,i,a){
      if(v.name == "Location"){
       redirUrl = v.value;
       details.responseHeaders.splice(i,1);
      }
    });
    details.responseHeaders.push({name:"redirUrl",value:redirUrl});
    return {responseHeaders:details.responseHeaders}; //I kill the redirect
  }
},
{urls: ["http://*/*"]},["responseHeaders","blocking"]); 
```

我实际上在`onHeadersReceived`侦听器内部处理数据，但这种方式显示了响应数据的位置。

# matrix - 矩阵运算？

> ID：15891838
> 
> 赞同：0
> 
> 时间：2013-04-09T01:31:11.590
> 
> 标签：matrix, scheme, rows, reverse, operations

由于我是 SCHEME 初学者，我很难弄清楚如何使用矩阵。

我不确定如何执行以下操作：

A）给定一个矩阵，返回该矩阵的维数

EX://'(2 3 4) (1 0 6)

应该为 2 行，3 列返回 (2.3)

B）反转给定矩阵中的行顺序

EX:// 给定 '((1 2) (3 5) (9 0))

反过来应该是 '((9 0)(3 5)(1 2))

C) 与 B 部分相同，但列的顺序相反

D) 列和行的倒序

提前致谢！如果有人可以提供任何帮助，这真的意味着很多！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T02:06:25.187

标准 R6RS 方案不提供矩阵，但某些实现可能会提供它们。自己实现它们时的常用技巧是使用向量的向量，而不是上面显示的列表列表，因为您通常不希望按顺序访问矩阵的元素，并且向量提供恒定时间访问到它们的每个元素，而列表提供对其每个元素的线性时间访问。

[我的博客上](http://programmingpraxis.com/standard-prelude/#matrices)有一个小型矩阵运算库；您可以通过博客上的搜索功能找到该库的用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T14:05:41.353

就列表操作而言，这很容易实现 - 假设您的矩阵表示只不过是子列表的列表！这显然是一个功课，所以你最好尝试通过自己的方式解决它。但我可以给你一些提示和测试用例：

```
(define (dimensions m)
  (cons <???> <???>)) ; length of m and length of m's first row

(dimensions '((2 3 4) (1 0 6)))
; => (2 . 3)

(define (reverse-rows m)
  <???>) ; just reverse the list

(reverse-rows '((1 2) (3 5) (9 0)))
; => '((9 0)(3 5)(1 2))

(define (reverse-columns m)
  <???>) ; reverse each of the sublists. Hint: use `map`

(reverse-columns '((1 2) (3 5) (9 0)))
; => '((2 1) (5 3) (0 9))

(define (reverse-columns-rows m)
  <???>) ; call previous procedures, the ouput of one is the input of the other

(reverse-columns-rows '((1 2) (3 5) (9 0)))
; => '((0 9) (5 3) (2 1)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T03:38:35.457

```
(define dimensions
  (λ (mat)
    (cons (length mat) (length (car mat))))) 
```

这是有效的，因为矩阵表示为行列表，其中每一行都是一个列表。所以，`(length mat)`是行数。由于每一行都表示为其列中所有项目的列表，因此您可以通过找出其中一行中有多少元素来找出有多少列。为简单起见，您只需查看第一行：`(length (car mat))`.

```
(define reverse-rows reverse) 
```

这是有效的，因为矩阵只是一个行列表。因此，您可以绑定`reverse-rows`到反转任何列表的标准过程。

```
(define reverse-columns
  (λ (mat)
    (map reverse mat))) 
```

这是有效的，因为每一行只是一个项目列表。`map`应用于（即每一行）中的每个项目并返回一个包含新行的新列表`reverse`。`mat`

```
(define reverse-rows-columns
  (λ (mat)
    (reverse-rows (reverse-columns mat)))) 
```

这是有效的，因为在上面，我们已经定义了一种反转行的方法和一种反转列的方法。如果你想两者都做，你可以把它们结合起来。

# c++ - 如何在 C++ 和 Google Test 中测试虚拟纯函数？

> ID：15891840
> 
> 赞同：2
> 
> 时间：2013-04-09T01:31:31.707
> 
> 标签：c++, googletest

按要求编辑，e.1：

我坚持这一点：

我需要在 Google Test 中测试一个虚拟纯函数，但我无法让它工作。我在夹具“ReferenceTest a:”中不断收到此错误：“ReferenceTest”类型必须实现继承的纯虚方法“Bibli::Reference::clone”。这个错误可能是微不足道的，但我只是没有看到它。

谢谢您的帮助。

```
#include <gtest/gtest.h>
#include <Date.h> 
#include <Reference.h>
#include <iostream>
#include <sstream>
#include <fstream>

using namespace Bibli;

//********************IMPLANTATION D'UNE CLASSE CONCRETE***********************

class ReferenceTest: public Reference {

public:
ReferenceTest(const std::string& p_cote,
        const std::string& p_theme,
        const std::string& p_titre,
        const std::string& p_auteurs,
        int p_anneeEdition,
        const util::Date& p_dateAcquisition)
:
Reference(p_cote, p_theme, p_titre, p_auteurs, p_anneeEdition, p_dateAcquisition)
{}; //instancier un objet Reference

ReferenceTest(std::istream& p_is)
:
    Reference(p_is)
{};

virtual void afficher(std::ostream& os) const
{}; // Doit être implantée car la classe est concrète

virtual std::string reqReferenceFormate() const
{
    return Reference::reqReferenceFormate();
};

virtual Reference* clone() const
{
    //return new ReferenceTest(*this);
    return 0;
};

~ReferenceTest();

};

//*********************************FIXTURES************************************

//*****************************************************************************
//  Fixture UneReference pour la création d'un objet Reference afin d'instancier
//  une Reference de test
// ****************************************************************************

class UneReference : public ::testing::Test
{
public:

UneReference()
:
    a("121a", "Informatique", "A Book of Jokes", "Mister Faynman", 2005, util::Date(8, 4, 2013))
{};

ReferenceTest a;

}; 
```

和我的 Reference.h ：

```
#include <iostream>
#include <cstdlib>
#include <fstream>
#include <sstream>
#include <string>

#include "ContratException.h"
#include "ValidationFormat.h"
#include "Date.h"

namespace Bibli
{
class Reference
{
private:
        std::string m_cote;
        std::string m_theme;
        std::string m_titre;
        std::string m_auteurs;
        int m_anneeEdition;
        util::Date m_dateAcquisition;
        void verifieInvariant() const;
public:
// Constructeur
Reference(
const std::string& p_cote,
const std::string& p_theme,
const std::string& p_titre,
const std::string& p_auteurs,
int p_anneeEdition,
const util::Date& p_dateAcquisition);

virtual ~Reference(){};

//Constructeur avec flux d'entrée de la classe. On construit un objet Reference à partir
//de données provenant d'un flux d'entrée. Toutes les données sont supposées valides.
Reference(std::istream& p_is);

bool operator ==(const Reference& uneReference);

virtual std::string reqReferenceFormate() const = 0;
//Le fait de mettre = 0; déclare cette fonction comme étant pur.
//On ne peut plus créer d'objet de cette classe.

virtual Reference* clone() const = 0; //IMPORTANT DE METTRE FONCTIONNEL PLUS TARD

// Fonction d'acquisition des données
//! \fn inline std::string reqCote() const
//! \brief Méthode d'accès au données
//! \return m_cote
inline std::string reqCote() const
{
    return m_cote;
}
//! \fn inline std::string reqTheme() const
//! \brief Méthode d'accès aux données
//! \return m_theme
inline std::string reqTheme() const
{
    return m_theme;
}
//! \fn inline std::string reqTitre() const
//! \brief Méthode d'accès au données
//! \return m_titre
inline std::string reqTitre() const
{
    return m_titre;
}
//! \fn inline std::string reqAuteurs() const
//! \brief Methode d'acces au donnees
//! \return m_auteurs
inline std::string reqAuteurs() const
{
    return m_auteurs;
}
//! \fn inline int reqAnneeEdition() const
//! \brief M√ethode d'acces aux donnees
//! \return m_anneeEdition
inline int reqAnneeEdition() const
{
    return m_anneeEdition;
}
//! \fn inline std::string reqDateAcquisition() const
//! \brief Méthode d'accès au données
//! \return m_dateAcquisition
inline util::Date reqDateAcquisition() const
{
    return m_dateAcquisition;
}
//! \fn inline void asgTheme(const std::string& p_theme)
//! \param[in] p_theme Recoit la nouvelle valeur du theme
//! \brief Change la valeur du th√®me
inline void asgTheme(const std::string& p_theme)
{
    m_theme = p_theme;
}
};
}//----namespace Bibli 
```

源代码编译得很好，它适用于主应用程序。但是每次我在测试中有 ReferenceTest ：

```
ReferenceTest a = ReferenceTest(p_cote, p_theme, p_titre, p_auteurs, p_anneeEdition, p_dateAcquisition); 
```

它在 Eclipse 中带有以下错误消息：

```
The type 'ReferenceTest' must implement the inherited pure virtual method 'Bibli::Reference::clone' 
```

现在，编译器给了我这个错误：

```
"vtable for ReferenceTest", referenced from:
  ReferenceTest::ReferenceTest(std::basic_istream<char, std::char_traits<char> >&)in ReferenceTesteur.o

ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
make: *** [TestReference.exe] Error 1 
```

我知道这与我的虚拟功能有关，但我不知道是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:40:15.900

您更新的问题表明“必须实现继承的纯虚拟方法”错误是您的 IDE 生成的虚假消息，而不是编译器错误。由于第二个错误来自链接器，因此编译成功后，这不可能是真正的错误。恐怕我无法帮助您修复 IDE 的错误检测。

引用缺失 vtable 的链接器错误是因为您声明但未定义派生类的析构函数。看起来派生类不需要在其析构函数中做任何事情，所以只需删除声明`~ReferenceTest();`

# c - 为什么会出现 SEGFAULT？（少量代码）

> ID：15891842
> 
> 赞同：-1
> 
> 时间：2013-04-09T01:31:43.677
> 
> 标签：c

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

#include "mystuff.h"

typedef struct Node
{
        int size;
        int status;
        struct Node *next;
        struct Node *previous;
} Node;

Node *endNode;
Node *rootNode;

void *my_foo(int size)
{
        Node *theNode;
        void *ptr;

        if (rootNode->next == NULL)
        {
                theNode->status = 1;
                ... 
```

它在“rootNode-> == NULL”处出现段错误，但如果我将其更改为“rootNode == NULL”，那么当它命中“theNode->status = 1”并将 theNode 和 rootNode 声明为 NULL 时会出现段错误并没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:37:34.387

> ...并将 theNode 和 rootNode 声明为`NULL`无济于事。

取消引用`NULL`（通常）*会*导致段错误。在开始修改它们之前，您必须将它们设置为更有用的东西（例如分配的结构）！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:34:39.817

我没有看到 rootNode 甚至被分配，它驻留在静态空间中，因此它拥有 nullptr 常量。您正在使用 -> 运算符取消引用它，因此无法完成。首先让它指向某个对象！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T01:34:47.957

取消引用 NULL 指针将导致分段错误。

只能假设`rootNode`为 NULL，因为当您将条件更改为 时，它将进入代码块`if(rootNode == NULL)`。人们会进一步假设这是因为它从未被分配过。

此外，您*显然*从未设置`theNode`指向任何内容，因此该行将`theNode->status`尝试取消引用`theNode`，这指向...谁知道是什么。

解决方案：*为您的变量赋值*。

另见：[http ://en.wikipedia.org/wiki/Segmentation_fault](http://en.wikipedia.org/wiki/Segmentation_fault)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T19:25:51.793

您是否在使用字段之前为 rootNode 分配内存（我的意思是 rootNode-> 下一个操作）？如果没有，请在之前使用 malloc，例如：rootNode = (struct Node *)malloc(sizeof(Node))。似乎你在做双链表，预定义 struct Node *next = NULL; 可能也是一个好主意；

# c++ - 将 Boost Ptime 转换为 EST UTC-5:00

> ID：15891845
> 
> 赞同：2
> 
> 时间：2013-04-09T01:32:14.133
> 
> 标签：c++, boost, boost-date-time

我正在使用以下代码获取当前日期时间（山地时间）

```
const boost::posix_time::ptime now = boost::posix_time::second_clock::local_time();

    //In mountain time I get now = 2013-Apr-08 20:44:22 
```

现在我使用以下方法进行转换

```
ptime FeedConnector::MountaintToEasternConversion(ptime coloTime) 
{

      return boost::date_time::local_adjustor <ptime, -5, us_dst>::utc_to_local(coloTime);
} 
```

//这个函数假设给我纽约的时间（东部标准时间），我得到

```
2013-Apr-08 16:44:22 
```

这个时间是错误的任何建议我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:32:54.373

据我了解`wrong time`，这意味着它与预期相差一小时，即 -4 小时而不是预期的 -5 小时。如果是，那么问题是`us_std`类型被指向为`local_adjustor`声明的最后一个参数。如果指定`no_dst`而不是`use_dst`. 该代码按说明工作，差异为 -5 小时。以下代码演示它（[链接到在线编译版本](http://liveworkspace.org/code/2UCfEu%243)）

```
#include <boost/date_time/posix_time/posix_time.hpp>
#include <boost/date_time/local_time_adjustor.hpp>
#include <iostream>

int main(void) {
   const boost::posix_time::ptime now = boost::posix_time::second_clock::local_time();
   const boost::posix_time::ptime adjUSDST = boost::date_time::local_adjustor<boost::posix_time::ptime, -5, boost::posix_time::us_dst>::utc_to_local(now);
   const boost::posix_time::ptime adjNODST = boost::date_time::local_adjustor<boost::posix_time::ptime, -5, boost::posix_time::no_dst>::utc_to_local(now);
   std::cout << "now: " << now << std::endl;
   std::cout << "adjUSDST: " << adjUSDST << std::endl;
   std::cout << "adjNODST: " << adjNODST << std::endl;
   return 0;
} 
```

# java - java dx 实用程序：意外的顶级错误 java.lang.ExceptionInInitializerError

> ID：15891846
> 
> 赞同：3
> 
> 时间：2013-04-09T01:32:14.967
> 
> 标签：java, android, ide, dx, terminal-ide

我正在尝试转换一个普通的 Java 应用程序库以在 Android 上使用。该库从 Java 1.1 开始，一直在维护、改进等，并且在其他平台上提供服务，因此不太可能涉及源代码。

通常，由于部署的细节，这个库不会封装在一个 jar 中，而只是保存在 CLASSPATH 发挥其魔力的树中。但是，为了将它放在 Android 上，创建了一个 jar。一切顺利 - 没有警告或错误。

由于将有一些新的开发 - 因此调试 - 通过 ProGuard 进行处理的步骤被跳过 - 时间将在稍后到来。

错误出现在下一步，运行 dx 将其转换为与 Android 一起使用。处理继续进行，直到此处描述的致命错误。（有一个小警告。）

错误飞溅：

```
UNEXPECTED TOP-LEVEL ERROR:
java.lang.ExceptionInInitializerError
        at java.io.ByteArrayOutputStream.expand(ByteArrayOutputStream.java:91)
        at java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:201)
        at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:244)
        at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:136)
        at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:113)
        at com.android.dx.command.dexer.Main.processOne(Main.java:247)
        at com.android.dx.command.dexer.Main.processAllFiles(Main.java:183)
        at com.android.dx.command.dexer.Main.run(Main.java:139)
        at com.android.dx.command.dexer.Main.main(Main.java:120)
        at com.android.dx.command.Main.main(Main.java:89)
        at com.spartacusrex.spartacuside.external.dx.main(dx.java:14)
        at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.UnsatisfiedLinkError: native_get
        at android.os.SystemProperties.native_get(Native Method)
        at android.os.SystemProperties.get(SystemProperties.java:47)
        at com.htc.profileflag.ProfileConfig.<clinit>(ProfileConfig.java:168)
        ... 12 more 
```

开发环境是[Terminal-IDE](http://Terminal-IDE.com/)。（[谷歌代码网站在这里。](http://code.google.com/p/terminal-ide/)）

我正在运行 Terminal-IDE v 2.02 - 最新的。我的安卓版本是：

```
Android 4.0.3
Software version 2.14.531.3 71ORD
(the rest aren't likely pertinent, but more on request) 
```

**编辑 - 新信息**

考虑到终端 IDE 环境中缺少某些东西，我开始尝试在运行 Eclipse 的 Windows 7 机器上运行 dx。Eclipse以某种*方式*运行 DX，因为它将代码从普通的 .jar 转换为实际作为 Android 应用程序的一部分运行的东西。但是，我无法让 dx 从命令行运行 - 它抱怨找不到源输入文件！（有什么线索吗？）

同时，在某人的建议下，我开始在 Terminal-IDE 环境中进行整个构建。这意味着为了简化场景而进行一些黑客攻击，而且由于找不到 java.RMI 一直失败，所以我将这些部分注释掉了——我想我可以指向一个 Android-Ready RMI 库吗？...继续，一切正常，直到我再次到达 DX 并出现了一个非常相似的错误，如上所述：

```
UNEXPECTED TOP-LEVEL ERROR:
java.lang.ExceptionInInitializerError
        at com.android.dx.util.FileUtils.readFile(FileUtils.java:72)
        at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:139)
        at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:196)
        at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:127)
        at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:196)
        at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:127)
        at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:113)
        at com.android.dx.command.dexer.Main.processOne(Main.java:247)
        at com.android.dx.command.dexer.Main.processAllFiles(Main.java:183)
        at com.android.dx.command.dexer.Main.run(Main.java:139)
        at com.android.dx.command.dexer.Main.main(Main.java:120)
        at com.android.dx.command.Main.main(Main.java:89)
        at com.spartacusrex.spartacuside.external.dx.main(dx.java:14)
        at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.UnsatisfiedLinkError: native_get
        at android.os.SystemProperties.native_get(Native Method)
        at android.os.SystemProperties.get(SystemProperties.java:47)
        at com.htc.profileflag.ProfileConfig.<clinit>(ProfileConfig.java:168)
        ... 14 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T01:50:49.000

该错误意味着进行了 JNI 调用，但它找不到它试图绑定的本机函数。看起来 android.os.SystemProperties.get 试图调用一个名为 native_get 的本机库函数来实际做一些工作。您是否将库正确包含在项目中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T02:01:30.490

我对`com.htc.profileflag.ProfileConfig.<clinit>`您的堆栈跟踪中的条目非常怀疑。我怀疑您设备上的环境可能与终端 ide 所期望的略有不同，并且它没有包含适用于 HTC 特定事物的正确 jni 库。

要检查这是否真的是特定于设备的问题，您可以尝试在模拟器中设置终端 ide，看看在构建库时是否遇到相同的错误。

# c# - MarkdownSharp 不转换列表

> ID：15891847
> 
> 赞同：1
> 
> 时间：2013-04-09T01:32:16.397
> 
> 标签：c#, markdown, markdownsharp

以下字符串将正确地从降价列表转换为 HTML 列表：

`string list = "* Item1\n* Item 2";`

但是，如果我有其他字符串，然后将列表附加到它，输出是意外的。

`string text = "here is some **bold** text " + list;`

输出：

`here is some <b>bold</b> text * Item1 * Item 2`

似乎问题是试图转换存在于其他文本块中的列表？如果这是问题所在，那是预期的行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:42:42.470

我对 MarkdownSharp 不熟悉，但大多数 Markdown 解析器都希望`\n`在一个段落和另一个段落或新内容之间有两个换行符 ( )。

因此，通过附加`list`，您可以`Item1`从可能开始的新列表中删除。由于只是一个换行符 ( `\n`)，MarkdownSharp 很可能不会将内容视为任何新内容的开始（只是一个杂散的换行符）。

尝试将列表与`\n\n`.

```
string text = "here is some **bold** text\n\n" + list; 
```

# amazon-s3 - 使用 /etc/fstab 自动挂载多个 s3fs 存储桶

> ID：15891849
> 
> 赞同：7
> 
> 时间：2013-04-09T01:32:30.187
> 
> 标签：amazon-s3, s3fs

在 s3fs 指令 wiki 中，我们被告知可以通过输入以下行来自动挂载 s3fs 存储桶`/etc/fstab`

```
s3fs#mybucket /mnt/mybucket fuse    allow_other,use_cache=/tmp,url=https://s3.amazonaws.com 0 0 
```

这适用于 1 个存储桶，但是当我尝试通过 2 行将多个存储桶安装到 1 个 EC2 实例上时：

```
s3fs#mybucket /mnt/mybucket fuse    allow_other,use_cache=/tmp 0 0
s3fs#mybucket2 /mnt/mybucket2 fuse    allow_other,use_cache=/tmp 0 0 
```

只有第二行有效，我尝试将 s3fs 复制到 s3fs2 并：

```
s3fs#mybucket /mnt/mybucket fuse    allow_other,use_cache=/tmp 0 0
s3fs2#mybucket2 /mnt/mybucket2 fuse    allow_other,use_cache=/tmp 0 0 
```

但这仍然不起作用。只有第二个被安装：

如何在`/etc/fstab` 不手动使用的情况下通过 s3fs 自动挂载多个 s3 存储桶：

```
s3fs mybucket /mn/mybucket2-ouse_cache=/tmp 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-05-01T14:12:26.503

也许您的网络没有启动？

最少的条目 - 只有一个选项（`_netdev`= 网络“启动”后挂载）

`<bucket name> <mount point> fuse.s3fs _netdev, 0 0`

我正在运行 Ubuntu 16.04，并且多个挂载在`/etc/fstab`.

类似于我用于 ftp 图像上传的示例（使用额外的存储桶挂载点进行测试）：

```
mybucket1.mydomain.org /mnt/mybucket1 fuse.s3fs _netdev,allow_other,passwd_file=/home/ftpuser/.passwd-aws-s3fs,default_acl=public-read,uid=1001,gid=65534   0 0

mybucket2.mydomain.org /mnt/mybucket2 fuse.s3fs _netdev,allow_other,passwd_file=/home/ftpuser/.passwd-aws-s3fs,default_acl=public-read,uid=1001,gid=65534   0 0 
```

`sudo mount -a`测试新条目并挂载它们（然后进行重新启动测试）。

如果您希望以非 root 身份安装，请按照上述查看 UID、GID 选项。如果使用 fuse 选项，这不是绝对必要的，`allow_other`因为安装时的权限是“0777”。

警告：[Updatedb](https://man7.org/linux/man-pages/man1/updatedb.1.html)（`locate`命令使用它）索引您的系统。您应该检查是否`PRUNEFS`包含您`PRUNEPATHS`的`/etc/updatedb.conf`s3fs 文件系统或 s3fs 挂载点。默认是“修剪”任何 s3fs 文件系统，但值得检查。否则，如果您的存储桶中有很多文件，您的系统不仅会变慢，而且您的 AWS 账单也会增加。有关更多信息，请参阅常见问题解答链接。

参考：
[https ://github.com/s3fs-fuse/s3fs-fuse/wiki/Fuse-Over-Amazon](https://github.com/s3fs-fuse/s3fs-fuse/wiki/Fuse-Over-Amazon)
[https://github.com/s3fs-fuse/s3fs-fuse/wiki/FAQ](https://github.com/s3fs-fuse/s3fs-fuse/wiki/FAQ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T19:36:07.103

您可以尝试启动脚本。这就是我解决在引导时使用 /etc/fstab 安装 s3fs 的问题的方法。

如何制作启动脚本因发行版而异，但有很多关于该主题的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-07T19:24:34.250

这可能不是最干净的方法，但我遇到了同样的问题并以这种方式解决了它：

> **1.创建挂载脚本**

很简单，只需在主目录中为需要挂载存储桶的用户创建一个 .sh 文件（在我的情况下是这样`/home/webuser`，我将脚本命名为`mountme.sh`）

该文件的内容是每个要挂载的存储桶一行：

```
s3fs bucket_one /home/webuser/app/www/bucket_one -o url=https://nyc3.digitaloceanspaces.com -o allow_other
s3fs bucket_two /home/webuser/app/www/bucket_two -o url=https://nyc3.digitaloceanspaces.com -o allow_other 
```

（是的，我使用的是 DigitalOcean 空间，但它们的工作方式与使用 s3fs 的 S3 Buckets 完全一样）

> **2\. 重新启动时按自己的方式运行挂载脚本**

`webuser`我为同一个用户设置了一个 cron ：

```
@reboot /bin/sh /home/webuser/mountme.sh 
```

（是的，你可以预定义 /bin/sh 路径之类的，但是那天我很懒）

我知道这更像是一种解决方法而不是解决方案，但我很快就对 fstab 感到沮丧，所以我回到了好的旧 cron，在那里我感觉更舒服:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-27T02:59:37.253

这就是我对 Ubuntu 18.04 和 DigitalOcean Spaces 所做的

在 /etc/fstab

```
s3fs#<space>  /<dir> fuse _netdev,allow_other,use_cache=/tmp/cache,uid=<usr>,gid=<grp>,url=https://<url> 0 0 
```

.passwd-s3fs 位于 root 的主目录中，其中包含适当的内容

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-15T19:59:04.803

请注意 autofs 以 root 身份启动。然后，凭证文件 .passwd-s3fs 必须在根目录中，而不是在用户文件夹中。

# opengl-es - 任何人都可以帮我将这些从 openGLES1.1 翻译成 openGLES2.0 吗？

> ID：15891850
> 
> 赞同：0
> 
> 时间：2013-04-09T01:32:47.163
> 
> 标签：opengl-es, cocos2d-iphone, opengl-es-2.0

//我对此一无所知，谁能帮帮我//纹理类型是CCTexture2D，_Vertices类型是CGPoint*，_Coords类型是CGPoint*

```
glBindTexture(GL_TEXTURE_2D, texture.name);
glDisableClientState(GL_COLOR_ARRAY);

glColor4f(1, 1, 1, 1);
glVertexPointer(2, GL_FLOAT, 0, _Vertices);
glTexCoordPointer(2, GL_FLOAT, 0, _Coords);
glDrawArrays(GL_TRIANGLE_STRIP, 0, (GLsizei)_nVertices);

glDisable(GL_TEXTURE_2D);
glDisableClientState(GL_COLOR_ARRAY);
glDisableClientState(GL_TEXTURE_COORD_ARRAY);

glEnable(GL_TEXTURE_2D);
glEnableClientState(GL_COLOR_ARRAY);
glEnableClientState(GL_TEXTURE_COORD_ARRAY); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:05:06.160

```
glActiveTexture(GL_TEXTURE1); glBindTexture(GL_TEXTURE_2D, texture.name); glUniform1i(/*insert texture uniform*/0, 1);
glDisableVertexAttribArray(GLKVertexAttribColor);

glUniform4f(/*insert color uniform*/0, 1, 1, 1, 1);
glVertexAttribPointer(GLKVertexAttribPosition, 2, GL_FLOAT, GL_FALSE, 0, _Vertices);
glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, 0, _Coords);
glDrawArrays(GL_TRIANGLE_STRIP, 0, (GLsizei)_nVertices);

//glDisable(GL_TEXTURE_2D);
glDisableVertexAttribArray(GLKVertexAttribColor);
glDisableVertexAttribArray(GLKVertexAttribTexCoord0);

//glEnable(GL_TEXTURE_2D);
glEnableVertexAttribArray(GLKVertexAttribColor);
glEnableVertexAttribArray(GLKVertexAttribTexCoord0); 
```

这应该或多或少相当于 ES2。我希望它能帮助你完成“翻译”。

# module - TypeScript + AMD：如何在模块内声明匿名类？

> ID：15891851
> 
> 赞同：4
> 
> 时间：2013-04-09T01:32:51.983
> 
> 标签：module, dojo, requirejs, typescript, amd

基本上，我想为从 ts 文件访问的 AMD js 模块定义一个接口。问题是 ts 中的模块导入不会返回通常在 AMD js 模块中定义和返回的匿名类。所以我不能使用'new'来实例化它们。

我有一个 AMD 模块（它是包的主文件，我在其他模块中将其称为“a/main”），如下所示：

**main.js**

```
define(function(){   
  var a=function(){...}; //constructor
  a.prototype={...};//body   

  return a;
}); 
```

为了在打字稿中使用 a/main，我创建了**adts**，其中 a 的定义如下：

```
declare module "a/main"{
    //I don't know how to writ this part... 
} 
```

然后我有一个打字稿文件，我想在其中使用：

**其他文件.ts**

```
///<reference path="a.d.ts"/>
import a=module("a/main"); //here a should refer to a inside the main.
//so I should be able to say:
var x=new a(); 
```

问题是模块不是新的。所以， var x=new a(); 不会工作。

您能建议声明“a/main”模块的最佳方式吗？

**注意：**我有很多像 a.js 这样的文件，并且更喜欢找到一种方法来编写 .d.ts 文件，这样我就不需要更改所有 .js 文件，即，更改 .js 文件是最后一个采取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:58:53.837

您对 main 的定义可以包括 a 的类：

```
declare module "a/main" {
    class a {
        exampleFunction(name: string) : void;
    }
} 
```

我添加了一个示例函数来表明，当您使用 declare 关键字时，您不需要任何实现 - 只需方法签名。

这是使用此声明的示例。

```
import main = module("a/main");
var x = new main.a(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-11T17:02:45.963

您可能需要 TypeScript 0.9.1 才能使此解决方案起作用：

**a.js**（你称它为 main.js）

```
define(function(){   
  var a=function(){...}; //constructor
  a.prototype={...};//body   

  return a;
}); 
```

**adts**（放在 a.js 旁边）：

```
declare class ClassA {
    // members of a ...
    toString():string;  // for example
}

declare var classA:typeof iModuleA;
export = classA; 
```

**其他文件.ts**

```
import a=require("a"); // at runtime, a.js is referenced while tsc takes a.d.ts
//so you should be able to say:
var x=new a(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T01:45:09.317

如果要导入在 js 文件中定义的模块而不是 typescript，则不应使用 typescript 模块导入语法。

相反，只需使用标准 AMD 语法来导入模块，就好像您在 otherfile.ts 中编写**Javascript***一样*。然而，这会给你一个非强类型的变量。

 ****更新**示例：

```
require(["main.js"], function(main:any) {
    //This function is called when main.js is loaded.
    //the main argument will hold
    //the module value for "/main".
    var x=new main(); // what you wanted 
}); 
```**

# php - Laravel 4 队列：监听超时

> ID：15891852
> 
> 赞同：7
> 
> 时间：2013-04-09T01:32:58.293
> 
> 标签：php, laravel, laravel-4, symfony-components

我跑了`php artisan queue:listen`大约 27 分钟后，它停止处理更多的工作。在我的错误日志中，我看到了错误：

```
exception 'Symfony\Component\Process\Exception\RuntimeException' with message 'The process timed out.' in /var/www/l4site/vendor/symfony/process/Symfony/Component/Process/Process.php:413
Stack trace:
#0 /var/www/l4site/vendor/symfony/process/Symfony/Component/Process/Process.php(201): Symfony\Component\Process\Process->wait(NULL)
#1 /var/www/l4site/vendor/laravel/framework/src/Illuminate/Queue/Listener.php(63): Symfony\Component\Process\Process->run()
#2 /var/www/l4site/vendor/laravel/framework/src/Illuminate/Queue/Listener.php(50): Illuminate\Queue\Listener->runProcess(Object(Symfony\Component\Process\Process), 128)
#3 /var/www/l4site/vendor/laravel/framework/src/Illuminate/Queue/Console/ListenCommand.php(69): Illuminate\Queue\Listener->listen(NULL, 'default', 0, 128, 60)
#4 /var/www/l4site/vendor/laravel/framework/src/Illuminate/Console/Command.php(108): Illuminate\Queue\Console\ListenCommand->fire()
#5 /var/www/l4site/vendor/symfony/console/Symfony/Component/Console/Command/Command.php(240): Illuminate\Console\Command->execute(Object(Symfony\Component\Console\Input\ArgvInput), Object(Symfony\Component\Console\Output\ConsoleOutput))
#6 /var/www/l4site/vendor/laravel/framework/src/Illuminate/Console/Command.php(96): Symfony\Component\Console\Command\Command->run(Object(Symfony\Component\Console\Input\ArgvInput), Object(Symfony\Component\Console\Output\ConsoleOutput))
#7 /var/www/l4site/vendor/symfony/console/Symfony/Component/Console/Application.php(193): Illuminate\Console\Command->run(Object(Symfony\Component\Console\Input\ArgvInput), Object(Symfony\Component\Console\Output\ConsoleOutput))
#8 /var/www/l4site/vendor/symfony/console/Symfony/Component/Console/Application.php(106): Symfony\Component\Console\Application->doRun(Object(Symfony\Component\Console\Input\ArgvInput), Object(Symfony\Component\Console\Output\ConsoleOutput))
#9 /var/www/l4site/artisan(59): Symfony\Component\Console\Application->run()
#10 {main} 
```

![在此处输入图像描述](https://i.stack.imgur.com/cgK28.png)

这是一个错误吗？我不认为听众应该超时！

* * *

## 更新

侦听器的第二次运行在 3 小时后超时。我正在使用 php-fgm 在 nginx 上运行 Laravel 4。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-11-12T19:18:46.053

无论您将其设置多长时间，它最终都会耗尽内存或超时。您可以使用 supervisor 来保持它的运行。使用起来非常简单。

**首先安装**它：

```
sudo apt-get install supervisor 
```

或使用他们网站上列出的方法，如 easy_install`http://supervisord.org/installing.html`

**现在为主管**添加一个配置文件。**打开`/etc/supervisor/conf.d/queue.conf`（或任何您想要命名文件但将其放入的文件`/etc/supervisor/conf.d/`）并添加：**

 **```
[program:queue]
command=php artisan queue:listen
directory=/var/www/laravel
stdout_logfile=/var/www/laravel/app/storage/logs/supervisor_queue_listener.log
redirect_stderr=true 
```

上面的解释：`program:_____`是我们如何命名运行的。我们稍后会参考。`command`是您要运行的命令。`directory`是它应该运行的地方。就我而言，我在一个名为“laravel”的项目中。`stdout_logfile`是您要重定向从命令接收到的标准输出的文件。`redirect_stderr`设置为 true 以将所有错误定向到指定的同一日志，`stdout_logfile`您也可以将它们设置为转到它们自己的日志文件。

**打开监督控制器**：

```
sudo supervisorctl 
```

**读取`/etc/supervisor/conf.d/`**目录的内容：（仍在supervisorctrl中）

```
reread 
```

**将队列程序添加到 supervisor**：

```
add queue 
```

而已。现在它应该正在运行。如果您有错误，请查看您的日志文件，看看有什么问题。

重新启动服务器后，您将不得不再次使用`sudo service supervisor start`.

[Laracasts 很好地涵盖了主管](https://laracasts.com/lessons/supervise-this)。如果你没有订阅 Laracasts，我强烈推荐它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-05T04:09:13.567

`queue:listen`在 Laravel 4 中有一个`--timeout`选项。如果您想要无限超时，您应该将 --timeout 选项设置为 0。

```
./artisan queue:listen --timeout=0 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-22T11:35:23.883

只需运行 COMPOSER_PROCESS_TIMEOUT=4000 php artisan queue:listen

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-04T23:32:59.017

工匠也没有超时。它的过程包装器。Symfony\Component\Process\Process 类用于运行任何进程（在我的情况下，Knp\Bundle\SnappyBundle\Snappy\LoggableGenerator 使用 wkhtmltoPDF 打印 PDF 的包正在考虑 wkhtmltoPDF 超时只是因为我正在渲染 PDF 11000页，只是需要更多时间）

它与 php.ini 的 max_execution_time = XXX 无关（因为它是 Symfony Process 实例抛出的异常，带有令人困惑的消息）

你必须设法通过对象关系来调用

```
Symfony\Component\Process\Process->setTimeout(null) 
```

这解决了问题。就我而言：

```
 $knp = $this->getContainer()->get('knp_snappy.pdf');
    /* @var $knp \Knp\Bundle\SnappyBundle\Snappy\LoggableGenerator */
    $knp->getInternalGenerator()->setTimeout(null);
    $pdf = $knp->getOutputFromHtml($this->view, $printOptions); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-23T20:37:35.263

您是否考虑过使用[supervisord](http://supervisord.org)来确保您的进程继续运行。安装 supervisord 后，如果您的进程因任何原因死亡，该守护进程将重新启动它。我工作的公司一直在将它与 queue:listen 结合使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-01T07:24:21.620

以下命令就像一个魅力。它现在已经通宵运行了（超过 12 小时）。

```
php artisan queue:listen --timeout=0 
```

感谢 timgws 的回答。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-09T15:17:44.340

我不认为侦听器正在超时，我认为它试图运行的进程正在超时。该异常来自[Symfony\Component\Process](https://github.com/symfony/Process/blob/master/Process.php#L320)。不幸的是，今天的流程代码本身有点超出我的想象。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-09T02:59:15.710

问题是有时间限制。
更改时间限制并解决问题。
set_time_limit(howmanysecondsyouneed)
[http://php.net/manual/en/function.set-time-limit.php](http://php.net/manual/en/function.set-time-limit.php)**

# caching - 在版本或日期上使用哈希来更新文件有什么优势？

> ID：15891855
> 
> 赞同：1
> 
> 时间：2013-04-09T01:33:42.410
> 
> 标签：caching, hash, web, build

在构建网站/应用程序时，在构建过程中向某些文件添加修订标记以破坏缓存是很常见的。例如，文件

`style.css`
`script.js`

可能由构建脚本重命名为

`58198123.style.css`
`87012174.script.js`

通常应用程序使用文件内容的 MD5 散列作为修订标记（例如：Ant 构建脚本、Yeoman、Drupal）。我想知道在版本号、序列修订版或日期字符串上使用哈希有什么好处？每一个都在文件中添加了一些人类可读的信息，我觉得这很愉快。我确信有充分的理由以哈希方式进行操作，我只是没有看到任何明确的描述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:15:44.237

同意@Raymond Chen（对您上面的问题的评论），当更改“恢复”时哈希“恢复”，并且可以在不提交的情况下生成哈希。

但是，恕我直言，对“版本”或“日期”进行哈希处理的最重要原因是为了避免冲突，多个开发人员可能正在工作，但不共享“集中式服务器”来协调修订号更新，或解决意外时间冲突。

例如：

*   如果两个开发人员想同时进行更改*，*更新“时间戳”是不明确的（但哈希不是）。

*   如果两个开发人员正在工作但不共享一个中央“版本号服务器”（例如，其中一个是“离线”），那么更新版本号是不明确的（因为两者都会要求下一个版本号） ，但散列不是模棱两可的。

“分布式”模型是 git/mercurial 转向“哈希”的原因，以放弃对中央版本号服务器的需求。

在您的特定情况下，如果您是*唯一*的开发人员，您可能会争辩说您不需要这个“reconcile-from-distributed-changes”功能。但是，当您分叉/分支然后合并时，版本号会变得混乱/不明确。

*Subversion 通过单调递增整个*存储库的单个数字来处理此问题，但在您的用例中，您正在谈论每个文件的版本号。以前的版本控制系统（如`cvs`、`rcs`、`sccs`等）通过为每个分支/合并“添加”一个“计数器”来处理每个文件的版本号。这些数字变得复杂，并且仍然导致模棱两可。例如，存储库中的一个文件可能具有类似 的版本，`2.3.27`另一个可能具有`3.2`，另一个可能`26`同时*具有*在不同的分支上（它变得混乱）。例如，`2.4.12.37.2``MyFileA.txt`被分支/合并了很多，如果两个文件意外地具有相同的版本`26`（对于一个文件，它是几年前在二十个分支/合并之前，而对于另一个文件，那是当前版本）。

# c++ - openGL中的全屏

> ID：15891856
> 
> 赞同：4
> 
> 时间：2013-04-09T01:33:45.280
> 
> 标签：c++, winapi, opengl, fullscreen

我正在尝试全屏渲染 openGL 窗口，并正在使用 NeHe 教程来学习如何做到这一点。但是我已经达到了在给出的示例代码和我自己的代码中使用完全相同的代码的地步，但是当它到达这一行时：

```
if (ChangeDisplaySettings(&dmScreenSettings,CDS_FULLSCREEN)!=DISP_CHANGE_SUCCESSFUL) 
```

这在我的代码中不会评估为 true，即使它在给出的示例代码中也是如此。这更加令人困惑，因为到目前为止调试所有内容都完全相同。

我是否缺少一些简单的东西，例如项目属性中的某些内容，或者如果没有，有人可以就创建全屏窗口的任何其他方式向我提供建议。

我正在使用的 NeHe 教程：http: [//nehe.gamedev.net/tutorial/creating_an_opengl_window_%28win32%29/13001/](http://nehe.gamedev.net/tutorial/creating_an_opengl_window_%28win32%29/13001/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T04:22:59.707

如果您只是在学习，可以尝试使用 GLUT。您可以用它在几行代码中创建一个窗口，并且您可以只是弄乱您的 OpenGL 代码，直到您对它感到满意，可以实际尝试使用特定平台的 API 来执行此操作，例如 WinAPI。

您需要安装 Freeglut（过时的 GLUT 的实现）和 GLEW（为了便于使用 OpenGL 1.1+ 功能，因为微软`gl.h`从那时起就没有更新过）

最低限度的代码：

```
#define FREEGLUT_STATIC // defined so you can link to freeglut_static.lib when compiling
#define GLEW_STATIC     // defined so you can link to glew's static .lib when compiling

#include <GL/glew.h>     // has to be included before gl.h, or any header that includes gl.h
#include <GL/freeglut.h>

void draw()
{
    // code for rendering here
    glutSwapBuffers();   // swapping image buffer for double buffering
    glutPostRedisplay(); // redrawing. Omit this line if you don't want constant redraw
}

int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGBA); // enabling double buffering and RGBA
    glutInitWindowSize(600, 600);
    glutCreateWindow("OpenGL"); // creating the window
    glutFullScreen();           // making the window full screen
    glutDisplayFunc(draw);      // draw is your function for redrawing the screen

    glutMainLoop();

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T10:07:54.867

Windows 在您放入诸如`DEVMODE`. 看一下`DEVMODE`，这个结构*很大*，并且有很多与显示器完全无关的条目，例如纸张尺寸（事实证明，相同的结构也可以用于打印机）。

现在，如果您自己构建一个 DEVMODE，那么很有可能您正在构建 Windows 不喜欢的东西。这也适用于许多其他此类结构，例如串行端口设置非常挑剔。

以下是我在自己的代码中建议和执行的操作：首先从 Windows 检索一个工作结构，然后对其进行修改并将其传回。如果有枚举功能，首先看一下，Windows 已经知道一种接近你想要的模式。*在**显示设置**的情况下，您**必须**使用其中一种枚举模式*，因为更高版本的 Windows 将不允许任何不同的模式，以免在显示器无法同步到新设置时给用户留下空白屏幕。

要枚举使用函数[EnumDisplaySettings](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162611%28v=vs.85%29.aspx)。然后寻找最接近您需求的设置；或者更好的是，向用户显示可用模式列表并让他从中选择。然后使用Windows交给你的结构来设置显示模式`ChangeDisplaySettings`

# ruby - 由于 rails 循环方法，.each 循环结束时的空项目

> ID：15891858
> 
> 赞同：0
> 
> 时间：2013-04-09T01:33:51.293
> 
> 标签：ruby, ruby-on-rails-3, haml, cycle, link-to

我有这个列表应该显示一个类别中的所有活动，它有点工作，但显示的最后一个元素很奇怪。该特定类别的数据库中有 4 个活动，在列表末尾我得到一个项目`/categories/1/activities`

```
%table.catlist
  - @category.activities.each do |activity|
    %tr{:class => cycle('one','two')}
      %td= link_to activity.name, [@category, activity]
      %td &nbsp; 
```

我也试过：

```
link_to activity.name, category_activity_path(:category_id => @category.id, :id => activity.id) 
```

但这根本不起作用，并给我这个错误：

```
No route matches {:category_id=>1, :action=>"show", :controller=>"activities", :id=>nil} 
```

路由嵌套如下：

```
 resources :categories do
    resources :activities do
      resources :records
    end
  end 
```

它实际上显示了一切正确，但它用这个奇怪的元素关闭了列表，它基本上是活动路径，但没有 id。

# 编辑

我认为这是因为`cycle`应该在 CSS 类之间切换的方法。任何想法如何避免空行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:37:31.617

您很可能正在控制器中构建一个新活动，该活动包含在`@category`. 如果您的控制器中有以下代码，

```
@activity = @category.activities.build 
```

尝试将其更改为

```
@activity = Activity.new category_id: @category.id 
```

或在视图中添加一个检查以仅显示持久的活动。

```
- @category.activities.each do |activity|
  - next if activity.new_record?
  %tr{:class => cycle('one','two')}
    %td= link_to activity.name, [@category, activity]
    %td &nbsp; 
```

# c++ - 无法创建类模板对象

> ID：15891860
> 
> 赞同：2
> 
> 时间：2013-04-09T01:34:09.350
> 
> 标签：c++, class, templates, constructor

我在我的一个类中使用模板，但由于某种原因，当我创建一个对象时，我得到的错误如下： 类模板“Test”的参数列表丢失。

```
template <class T>
class Test
{
 private: 
     T variable;

 public:
     Test(){cout << "CONSTRUCTOR CALLED" << endl;}
}; 
```

在 main.cpp

```
Test object; 
```

编译器显示以下内容：“测试”：使用类模板需要模板参数列表。

```
template <class T>
Test<T>::Test() 
{
  cout << "CONSTRUCTOR CALLED" << endl;
} 
```

那也没用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:35:57.837

您必须指定要实例化 a 的类型`class template`。例如：

```
 Test<int> object; 
```

想想你如何使用来自`std library`like的类模板`vectors`，你必须指定类型，例如`int`，例如`vector<int>`。这是同样的道理。

对于构造函数定义，它应该可以工作，但是，您必须将声明和定义放在同一个头文件中，否则编译器找不到定义。（有些技术可以在不同的文件中分离声明和定义，例如头文件末尾的“export”和“#include cpp file”）

# sql - oracle sql中的join关键字和inner join关键字有什么区别？

> ID：15891863
> 
> 赞同：22
> 
> 时间：2013-04-09T01:34:41.887
> 
> 标签：sql, oracle, join, inner-join

我找不到有关关键字的文档，`join`但我在网上看到了使用它的示例。

我在 Oracle`hr`模式中对它进行了一些实验，其中有表`departments`：

*   `deparment_name`
*   `manager_id`
*   `location_id`

一张桌子`employees`：

*   `first_name`
*   `employee_id`

和表`locations`：

*   `location_id`
*   `city`

查询应返回部门名称，部门经理的名字，以及部门所在的城市。

与使用关键字相比，使用关键字的代码`join`似乎返回了一些结果`inner join`

代码`join`：

```
select d.department_name, e.first_name,l.city
from departments d
   join employees e on d.manager_id=e.employee_id
   join locations l on d.location_id=l.location_id 
```

代码`inner join`：

```
select d.department_name, e.first_name,l.city
from departments d
   inner join employees e on d.manager_id=e.employee_id
   inner join locations l on d.location_id=l.location_id 
```

这两种情况是否有区别，或者我只是偶然发现它们返回相同结果的情况？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-09T01:56:02.487

*   在 1992 ANSI SQL 参考之后，[INNER 是可选的](http://www.contrib.andrew.cmu.edu/~shadow/sql/sql1992.txt)：

> 查询表达式 179 7.5 - 连接表
> 
> 3) 如果指定了限定*连接但未指定**连接类型*，则 INNER 是隐式的。

*   遵循 Oracle 标准（**9i**及更高版本），`INNER`前缀也是可选的。在 9i 之前，Oracle 不遵循 ANSI 规则，甚至不支持`JOIN`语法。

# c# - 如何将 WPF UserControl 从一个窗口移动到另一个窗口？

> ID：15891869
> 
> 赞同：4
> 
> 时间：2013-04-09T01:35:08.833
> 
> 标签：c#, wpf, user-controls, window

假设我在 MainWindow.xaml 中有一个名为 MyVideoControl 的 UserControl：

```
<Window Name="_mainWindow">
    <Grid>
        <MyVideoControl Name="_localVideo"/>
    </Grid>
</Window> 
```

现在用户单击一个按钮，我希望 UserControl 浮动在 MainWindow.xaml 的顶部，在一个名为 PopUp.xaml 的新创建的窗口内。

```
<Window Name="_popUpWindow">
    <Grid>
        <MyVideoControl Name="_localVideo"/>
    </Grid>
</Window> 
```

我该如何做到这一点，所以整个对象都被移动了？目前我使用 XAML 以声明方式将 MyVideoControl 放置在我的窗口中，但我猜我需要以编程方式完成所有操作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T03:21:46.553

是的，您可以通过从`userControl`中删除`Mainwindow`并将其作为逻辑子项添加到`PopupWin`窗口中的任何控件来执行此操作。

![在此处输入图像描述](https://i.stack.imgur.com/XjEkg.png)

***用户控件.xaml：***

```
<UserControl x:Class="WpfApplication1.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="100" d:DesignWidth="100">
    <Grid>
        <TextBox x:Name="txtBlock1" Text="hai"/>
    </Grid>
</UserControl> 
```

***MainWindow.xaml ：***

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:WpfApplication1="clr-namespace:WpfApplication1" Title="MainWindow" Height="550" Width="555">
    <Grid>
        <StackPanel x:Name="mainPanel" Orientation="Vertical ">
            <Button Content="Button" Height="23" Name="button1" Width="75" Click="button1_Click" />
            <WpfApplication1:UserControl1 x:Name="myUserControl" />
        </StackPanel>
    </Grid>
</Window> 
```

***PopupWin.xaml：***

```
<Window x:Class="WpfApplication1.PopupWin"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="PopupWin" Height="300" Width="300">

    <StackPanel x:Name="mainPanel"/>

</Window> 
```

***PopupWin.xaml.cs：***公开一个新的构造函数以接受`userControl`并将其作为子项添加到`mainPanel`

```
public partial class PopupWin : Window
{
    public PopupWin()
    {
        InitializeComponent();
    }

    private UserControl control;

    public PopupWin(UserControl control)
        : this()
    {
        this.control = control;

        this.mainPanel.Children.Add(this.control);
    }
} 
```

***MainWindow.xaml.cs*** On Button_Click 从当前删除 userControl`MainWindow`并将其传递给`PopupWin`，在本例中是通过构造函数。

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {
        this.mainPanel.Children.Remove(this.myUserControl);

        var wind = new PopupWin(this.myUserControl);

        wind.ShowDialog();
    } 
```

***注意：***实例`userControl`都应该是唯一`one`元素的逻辑子元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T02:43:05.037

如果您制作`UserControl`资源，您可以执行此操作。

例子：

应用程序.Xaml

```
<Application x:Class="WpfApplication10.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <ContentControl x:Key="sharedContent">
            <Label Content="StackOverFlow" />
        </ContentControl>
    </Application.Resources>
</Application> 
```

主窗口

```
<Window x:Class="WpfApplication10.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="325" Width="422" Name="UI">

    <StackPanel>
        <Button Content="Open PopUp" Click="Button_Click" />
        <ContentControl Content="{DynamicResource sharedContent}" />
    </StackPanel>
</Window> 
```

弹出窗口

```
<Window x:Class="WpfApplication10.PopupWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="PopupWindow" Height="300" Width="300" xmlns:my="clr-namespace:WpfApplication10">
    <Grid>
        <ContentControl Content="{DynamicResource sharedContent}" />
    </Grid>
</Window> 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/Dw9M6.png) ![在此处输入图像描述](https://i.stack.imgur.com/HiwEX.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T03:04:58.510

另一种方法可以实现，使用动态布局......

```
 public partial class MainWindow : Window
{
    public Button ControlToMove { get; set; }

    public MainWindow()
    {
        InitializeComponent();

        //create button
        ControlToMove = new Button();

        //add text to button
        ControlToMove.Content = "Click to move me to pop up window";

        //add a new routed event to the buttons click property
        ControlToMove.Click += new RoutedEventHandler(MoveControlToPopUp);

        //add control to the layout grid
        MainGrid.Children.Add(ControlToMove);
    }

    //This method moves the button to a popup window
    private void MoveControlToPopUp(object sender, RoutedEventArgs e)
    {
        //get the name of the control from sender
        var control = sender as Button;
        var controlName = control.Name;

        //checks to see if this is the control we want moved
        //if its not, method exits
        if (controlName != ControlToMove.Name) return;

        //create copy of the control
        var copiedControl = control;

        //remove control from existing window
        MainGrid.Children.Remove(control);

        //create pop up window
        var popUpWindow = new PopUpWindow(copiedControl);
        popUpWindow.Show();
    }
}

public class PopUpWindow : Window
{
    public Grid Layout { get; set; }
    public PopUpWindow(Button button)
    {
        //create a grid for the new window
        Layout = new Grid();

        //add control to grid
        Layout.Children.Add(button);

        //add grid to window
        this.AddChild(Layout);
    }
} 
```

}

我没有做的唯一一件事是添加在弹出窗口中单击按钮时将按钮移回主窗口的功能。

# c - 如何在C中写入文件

> ID：15891875
> 
> 赞同：0
> 
> 时间：2013-04-09T01:35:58.033
> 
> 标签：c

我有一个正在开发的程序，它将启动和停止伺服。我可以从命令行发出以下命令并且它可以工作。`echo 2=120 > /dev/servoblaster`这将启动伺服运动。现在我有以下程序

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    FILE *fp;

   fp = fopen("/dev/servoblaster", "w");
   if (fp == NULL) {
       printf("Error opening file\n");
       exit(0); 
 }
   fprintf(fp, "2=120");
   fclose(fp);
   fflush(fp); 
   return 0;
} 
```

但是当我执行它时没有任何反应，现在当我尝试`echo 2=120 > /dev/servoblaster`命令时它会说`Bad input: 2=1202=120`但是如果我重复相同的`echo 2=120 > /dev/servoblaster`命令它会再次工作。如果我在尝试执行`echo`命令时尝试执行上面的程序 3 次输出，`Bad input 2=1202=1202=120 2=120`那么它的输出对我来说似乎是文件没有完成在我的程序中写入。有人可以指出我是否遗漏了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T01:38:40.347

您需要在命令后添加换行符，如下所示`echo`：

```
fprintf(fp, "2=120\n"); 
```

据推测，伺服驱动器会等到它看到换行符后再执行命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:38:45.557

程序没有问题，我运行以下代码

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    FILE *fp;
    fp = fopen("/home/syler/servoblaster", "w");
    if (fp == NULL) {
        printf("Error opening file\n");
        exit(0); 
    }   
    fprintf(fp, "2=120");
    fclose(fp);
    fflush(fp); 
    return 0;
} 
```

结果是

```
cat /home/syler/servoblaster
2=120 
```

所以，肯定是“servoblaster”内核驱动模块的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-31T11:35:09.747

这是一个旧线程，但我刚刚遇到了同样的问题，所以我发布了我所知道的。从我所看到的情况来看，需要“\n”，但是下次会搞砸缓冲区（即，它将“\n”放入缓冲区中，因此即使它是好的，你的下一次写入似乎也是坏数据数据）。我目前的工作是在字符串之前和之后放置一个“\n”。这确保它每次都能正常工作，但由于“\n”，我总是收到“错误数据”消息。仍在寻找正确的方法来执行此操作，但尚未找到来自 C 的调用以使此代码正常工作。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2015-04-09T06:34:59.353

这对我来说很好：

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    FILE *fp;
    fp = fopen("/home/syler/servoblaster", "w");
    if (fp == NULL) {
        printf("Error opening file\n");
        exit(0); 
}   
fprintf(fp, "2=120");
fprintf(fp, "\n");
fclose(fp);
fflush(fp); 
return 0;
} 
```

# jquery - 获取选择元素中的所有选项

> ID：15891878
> 
> 赞同：2
> 
> 时间：2013-04-09T01:36:05.713
> 
> 标签：jquery, html, html-select

我有一个选择元素，用户可以在其中添加和删除选项。用户完成后，他们将单击保存，但我无法弄清楚如何从选择中获取所有选项。我发现 JQuery 可以获得所有选择，但我只需要所有这些。我试过这个：

```
var str = "";    
$("#wordList").each(function () {    
    str += $(this).text() + ",";    
});    
alert(str); 
```

但它只是将所有选项连接到一个以逗号结尾的长字符串。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T01:42:32.877

只需将选项映射到它们的值数组：

```
var options = $("select option").map(function () {
    return $(this).text();
}).get(); 
```

此时你有一个数组。如果您希望它是 CSV，请使用以下`join`方法：

```
options.join(","); 
```

最终结果是一个数组`["One", "Two"]`或一个字符串`"one,two"`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T01:46:38.647

该代码完全按照包装盒上的说明进行操作。通常我希望你会习惯于`$("#wordList option")`获得这些选项。我猜如果选项是“这个”、“那个”和“另一个”，那么你得到了`ThisThatThe Other,`，这就是该代码将执行的操作（即 #wordList 元素内的所有文本，它基本上包括里面的所有选项那个元素。你正在执行的数组`.each()`有一个元素：“ThisThatThe Other”，你迭代它一次并添加一个逗号）。

您想连接 #wordList 中每个 OPTIONS 的文本（我认为），所以请尝试

```
var str = "";    
$("#wordList option").each(function () {    
    str += $(this).text() + ",";    
});    
alert(str); 
```

给你一个所有单词的字符串（比如`This,That,The Other,`）如果你想要一个数组，而不是这样做：

```
var arr = [];    
$("#wordList option").each(function () {    
    arr.push($(this).text());    
});    
alert(arr.join(", ")); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-09T01:44:21.513

“无论是在数组还是 csv 中获取它都没有关系，我只需要从 select 元素中获取所有选项元素”

`$('#your_select_id').prop('options')`将为您返回所有选项的集合。

然后你可以用它做任何你想做的事情......这是一个例子，我们在一个数组中收集所有选项值。

```
var values = [];

$.each($('#your_select_id').prop('options'), function () {
    values.push(this.value);   
}); 
```

# wordpress - 更新 WP 插件和永久链接问题需要 FTP 访问权限

> ID：15891881
> 
> 赞同：0
> 
> 时间：2013-04-09T01:37:04.093
> 
> 标签：wordpress, apache, permalinks

在站点所在的服务器上，尝试更新插件需要 FTP 用户名和密码。

使用默认永久链接 page=x 时帖子正确显示，但当永久链接结构更改为[http://domain.com/2013/04/09/sample-post/时无法正确显示](http://domain.com/2013/04/09/sample-post/)

* * *

`.httaccess`似乎还可以。WordPress 在更改永久链接结构时通知永久链接结构已更新，但尝试使用新结构访问博客页面会出现 404 错误。

我更改了权限`wp-content/`并运行：

```
$ sudo chmod -R a+rx /var/www/* 
```

文档根位于`/var/www/domain/public`

但没有任何结果

如果有帮助，我还注意到`uploads/`WordPress 无法加载现有图像，因为它们没有显示在媒体库中

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:27:43.473

我最近遇到了这个问题，这通常来自 FTP 用户作为与 Apache 不同的用户运行。所以一个用户可以访问这些文件，而另一个用户没有。（理想情况下，他们都可以访问）。

这是我克服它的方法：

1）。我和主人谈过，他们做了一些改变。

2）。我厌倦了在 wp-config.php 中添加以下代码：

```
define('FS_METHOD', 'direct'); 
```

这只是部分解决了这个问题。所以我使用了下面的代码（删除上面的代码后）

3）。我将我的 FTP 详细信息添加到 wp-config.php 文件中，如下所示：

```
define('FS_METHOD', 'ftpsockets');
define('FTP_BASE', '/path/to/wordpress/');
define('FTP_USER', 'username');
define('FTP_PASS', 'password');
define('FTP_HOST', 'ftp.example.org'); 
```

这让 Wordpress 可以很好地发挥作用，也让我可以继续在本地处理文件并远程上传它们。

更多信息在这里： [http](http://codex.wordpress.org/Editing_wp-config.php) ://codex.wordpress.org/Editing_wp-config.php （在“WordPress升级常量”下方查看）

如果您的任何文件被网络用户锁定并且您无法访问它们，请尝试使用此文件管理器：http: [//phpfm.sourceforge.net/](http://phpfm.sourceforge.net/) 我不得不以这种方式删除主题。

# python - Python - 使用`-`作为范围构建动态sql查询

> ID：15891884
> 
> 赞同：2
> 
> 时间：2013-04-09T01:37:23.177
> 
> 标签：python, python-2.7, arcpy

我已经进行了一些搜索，并认为在尝试重新发明轮子之前我会问一下。

我正在寻找使用未知数量的参数构建一个 sql 查询。参数是 int 类型，它们是项目编号。

用户可以输入任意数量的项目，形式为 1、2、3-10、12

我需要构建一个 sql 样式查询（实际上是用于 arcpy），它将返回字段项的所有这些值。

我可以轻松地将这些全部拉到一个列表中，例如 mylist = [1,2,3,4,5,6,7,8,9,10,11,12]

但是然后我需要构建查询，我猜它会像

```
item = 1 or item = 2 or ...... 
```

非常感谢

乔恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:46:33.830

只需您可以这样做，

```
user_input = '1, 2, 3-10, 12'
data = [item for item in user_input.split(', ')]
result = []

for d in data:
    if '-' in d:
        result.extend(range(int(d.partition('-')[0], int(d.partition('-')[2])+2))
    else:
        result.append(int(d)) 
```

检查结果是什么，

```
>>> result
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 12] 
```

查询一下，

```
'SELECT * FROM table WHERE id in (%s)' % ','.join(str(item) for item in result) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:42:57.960

如果完全支持 sql 样式查询，您可以将其放在一个列表中，并生成如下查询：

```
items = [1,2,3,4,5]
query = 'select * from table where item in (%s)' % ','.join(items) 
```

# python - 允许使用命令行参数自定义模块/包而不干扰其用户

> ID：15891889
> 
> 赞同：0
> 
> 时间：2013-04-09T01:38:06.597
> 
> 标签：python, argparse, python-3.3

我很好奇如何在 python 中做到这一点。想象一下，我有一个模块`spam.py`，我想使用选项来控制垃圾邮件`-‍-‍spam_more`。

在使用垃圾邮件模块时，我将如何使用 argparse 或其他一些仍允许主`ham.py`文件可选地使用命令行参数的解析库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:51:44.267

您可以将参数处理内容放在 ' `if __name__ == "__main__":`' 中，该块中的任何代码`if`仅在从命令行或其他方式运行脚本时才会运行，但如果它作为模块导入则不会运行。例如`$ python spam.py`，在命令行中键入将导致块被执行。

这是一个使用 optparse 的示例（因为我之前没有使用过 argparse）：

垃圾邮件.py：

```
def do_stuff(spammy=False):
    if spammy:
        print "wow, this is spammy."
    else:
        print "i've seen spammier."

if __name__ == "__main__":
    from optparse import OptionParser

    p = OptionParser()
    p.add_option("--spam_more", action="store_true", dest="spammy")
    (options, args) = p.parse_args()

    do_stuff(options.spammy) 
```

火腿.py：

```
import spam
# do optparse stuff...

spam.do_stuff() 
```

这是当您`--spam_more`在 spam.py 上使用时，`spammy`将设置为`True`. 但是 ham.py 对此一无所知，并且可以使用它自己的 optparse 内容以及使用垃圾邮件的功能，`do_stuff()`因为`if __name__ == "__main__":`当 spam.py 作为模块导入时，“ ”内的代码永远不会运行。

`import`将语句放在块中可能是不好的做法`if`，但这似乎是最好的方法。

# drupal - Drupal Advanced Poll 模块中的阅读更多链接不尊重路径别名

> ID：15891893
> 
> 赞同：0
> 
> 时间：2013-04-09T01:38:16.660
> 
> 标签：drupal

我的主页上有一个高级投票，由于某种原因，阅读更多 URL 显示为： [http ://www.mydomain.com/node/265](http://www.mydomain.com/node/265)

但是，在投票中，我将 URL 路径设置设置为这个......它直接工作得很好： [http ://www.mydomain.com/poll/name-of-my-poll](http://www.mydomain.com/poll/name-of-my-poll)

有谁知道为什么民意调查不使用路径别名或如何修复它？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:38:23.773

弄清楚了...

我必须在我的 template.php 文件中添加这样的内容：

```
function mytheme_advpoll_view_block_poll($nid) {
    $node = advpoll_view(node_load($nid), FALSE, FALSE);
    $output = '';
    if ($node && $node->status && $node->active && $node->start_date < time() && $node->end_date > time()) {
        $output .= '<h3>' . $node->title . '</h3>';

    unset($node->content['body']); 
        $output .= drupal_render($node->content);
        $output .= l('Read more...', drupal_get_path_alias('node/' . $nid));

    }
    return $output;
} 
```

# mongodb - 带有逗号分隔符的记录未在 mongo DB 中正确导出

> ID：15891895
> 
> 赞同：0
> 
> 时间：2013-04-09T01:38:25.570
> 
> 标签：mongodb, export

我正在使用以下命令将联系人集合的字段 f1 和 f2 导出到 contacts.csv

```
mongoexport --db users --collection contacts --csv  --out /opt/backups/contacts.csv --fields f1,f2 
```

它工作正常，数据导出到 csv。

问题仅在于 f2 字段的记录导出。

f2 字段存储在 db 中，逗号分隔值为 1,samuel,it。

我认为 mongo 正在导出到 csv ，考虑逗号作为分隔符。

所以， 1 ， samuel 和它被导出到 csv 文件中的 3 个不同的单元格中，如下所示，

```
field1  field2
====   ====         ======     ==
1         1                 samuel    it

instead i want it as follows

field1  field2
====   ====        
1         1,samuel,it 
```

顺便说一句，我目前正在使用 mongo 1.6.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:22:34.667

MongoDB 1.6.5 于 2010 年 12 月发布，从那时起发生了*很多变化。*如果不是 2.4，那么至少升级到 MongoDB 2.2 绝对值得。

如果无法完全升级 MongoDB，您可以尝试`mongoexport`从 MongoDB 2.4 对您当前的数据库运行。命令行工具通常应该向后兼容。

看起来`mongoexport`CSV 格式更符合 MongoDB 2.0 的发布和[SERVER-1097 的](https://jira.mongodb.org/browse/SERVER-1097)更改（“mongoimport / export 应遵守 CSV 规范”），但肯定会有后续改进或修复。

我刚刚用 MongoDB 1.6.5 做了一个简单的测试，`mongoexport --csv`格式看起来还可以：

```
field1,field2
1,"1,samuel,it" 
```

另一种可能性是问题在于您尝试用于导入 CSV 的应用程序/工具。[对于“有效”的CSV 格式文件](http://en.wikipedia.org/wiki/Comma-separated_values)的外观，有几种不同的解释。每个人都同意 CSV 包含用逗号分隔的字段，但字段转义可能会有所不同。

# c++ - RegisterClassEx 崩溃 - C++

> ID：15891899
> 
> 赞同：2
> 
> 时间：2013-04-09T01:39:02.553
> 
> 标签：c++, windows, winapi

我正在使用 Windows 库，我是新手，但我遇到了一个错误，我用谷歌搜索了足够多的东西，我不知道发生了什么。

这是我的代码：

```
LRESULT CALLBACK WbWindow::st_wind_callback(HWND hWnd, UINT Message, WPARAM wParam, LPARAM
lParam)
{
 // Code for the callback static function
return 0;
}
WbWMResult WbWindow::Create()
{
// Put in the class values for our window
class_window_instance.cbSize = sizeof(WNDCLASSEX);
class_window_instance.lpfnWndProc=WbWindow::st_wind_callback;
class_window_instance.lpszClassName = window_name;
class_window_instance.style = NULL;
class_window_instance.cbClsExtra = 0;
class_window_instance.cbWndExtra = 0;
class_window_instance.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
class_window_instance.hCursor = LoadCursor(NULL, IDC_ARROW);
class_window_instance.hIcon = LoadIcon(NULL, IDI_APPLICATION);
class_window_instance.hIconSm = LoadIcon(NULL, IDI_APPLICATION);
class_window_instance.hInstance = main_instance;
class_window_instance.lpszMenuName = NULL;

if(!RegisterClassEx(&class_window_instance)){
    MessageBox(0,"There was an error registering the window-classname.","Critical Error!",MB_ICONSTOP | MB_OK);
    return WBE_CLASSREG;
}

window_instance = CreateWindowEx(WS_EX_STATICEDGE,window_name,window_title,WS_OVERLAPPEDWINDOW,CW_USEDEFAULT,CW_USEDEFAULT,window_width,window_height,NULL,NULL,main_instance,NULL);
if(window_instance == NULL){
    MessageBox(0,"There was an error creating a window.","Critical Error!",MB_ICONSTOP | MB_OK);
    return WBE_WINCREATION;
}

created = WbTrue;

return WB_SUCCESS;
} 
```

我得到的错误是来自调试器的错误：未处理的异常，它表示.lpszMenuName 处的指针错误是一个问题，但这在可能的示例中有效，我不知道为什么。

发生了什么事，我该如何解决？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:37:15.043

`lpszClassName`并被`lpWindowName`定义为 LPCSTR——window_name 和 window_title 是否有有效的字符串值？它们在哪里定义？

# vb.net - VB.NET - 在 WebBrowser 中自动填充富文本框？

> ID：15891900
> 
> 赞同：0
> 
> 时间：2013-04-09T01:39:10.803
> 
> 标签：vb.net, browser

**大家好。**

我正在尝试让我的程序在我的 WebBrowser 中自动填写表格。但 HTML 代码如下所示：

```
<body contenteditable="true" class="forum" spellcheck="true" style="height: auto;">
text is here!
<br></body> 
```

我如何让它在这里输入文本？谢谢。

# sockets - Google Chrome 打包应用 - FTP 机制

> ID：15891901
> 
> 赞同：1
> 
> 时间：2013-04-09T01:39:26.463
> 
> 标签：sockets, google-chrome, google-chrome-extension, websocket, google-chrome-app

我正在寻找从 Google Chrome 打包应用程序中在已知服务器位置执行图像的简单 FTP RETR。我正在探索以下途径：

1.  XMLHttpRequest（抛出异常 101：跨域只允许 HTTP）

2.  TCP chrome.socket.write（发送数据包正常，但无法接收 TCP 数据？**编辑：** *错误*）

3.  WebSockets（抛出异常 18：WebSocket 端口 21 被阻塞）

4.  `<webview>`（在沙盒进程中正确提取数据，无法拦截）

我尝试过考虑其他可能的方法（我的设备在端口 23 上运行 telnet 服务器），但我认为这里没有任何捷径。

我的 Chrome 应用程序可能会在 HTML5 画布中捕获 webview 的像素数据吗？

我是否忽略了任何其他通信机制？所有指导表示赞赏。

**编辑：** apsillers/sowbug 的评论`chrome.socket.read`已经重新打开了第 2 大道。哎呀！根据 PASV 响应在端口上使用它允许我执行流并检索图像数据 - 谢谢。

如果它对其他人有帮助，这里是在扩展/应用程序中运行的[套接字对象](https://gist.github.com/anonymous/13a55df447b97b8275cf)和[ftp 客户端的开始。](https://gist.github.com/anonymous/aed60cb84074dbd4d1bd)

用法：`new Ftp('192.168.1.1', 21).retrieve('/path/to/file.ext', eofHandler);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:03:57.910

[chrome.socket.read()](http://developer.chrome.com/apps/socket.html#method-read)应该做得很好。

# javascript - 使用 javascript 的倒数计时器不应在重新加载时重新启动

> ID：15891908
> 
> 赞同：0
> 
> 时间：2013-04-09T01:41:01.017
> 
> 标签：javascript, html

我的结帐页面中有一个计时器，在第 1 步后我们有一个 2 步结帐，网页重新加载到第 2 步，因此计时器重新启动。我需要计时器继续

这是我的代码

这是 javascript

```
 <input type="hidden" id="dealCost" name="dealCost" value="${model.dealCost}"/>
 <script type="text/javascript">
  var dealCst = document.getElementById('dealCost').value;

  if(dealCst < 53){
  zi_inceput1 = new Date();
  ceas_start1 = zi_inceput1.getTime();

  function initStopwatch1() {
      var timp_pe_pag1 = new Date();
      return ((timp_pe_pag1.getTime() + (1000 * 0) - ceas_start1) / 1000);
  }
  var tim = 1200;
  function getSecs1() {
      var tSecs1 = Math.round(initStopwatch1());
      if((tim-tSecs1)>=0)
      {
      var iSecs1 = (tim-tSecs1) % 60;

      var iMins1 = Math.round((tSecs1 - 30) / 60);
      var iHour1 = Math.round((iMins1 - 30) / 60);
      var iMins1 = iMins1 % 60;
      var min = Math.floor((tim-tSecs1) / 60);
      if(min<10){
         min = "0"+min;
      }
      var iHour1 = iHour1 % 24;
      var sSecs1 = "" + ((iSecs1 > 9) ? iSecs1 : "0" + iSecs1);
      var sMins1 = "" + ((iMins1 > 9) ? iMins1 : "0" + iMins1);
      var sHour1 = "" + ((iHour1 > 9) ? iHour1 : "0" + iHour1);
      document.getElementById('checkout_timer').innerHTML = min + ":" + sSecs1;
      window.setTimeout('getSecs1()', 1000);
  }
  else{
      window.location.href="/deals";
  }
  }
  window.setTimeout('getSecs1()', 1000);
  }
 </script> 
```

这是html代码

```
 <c:if test='${model.dealCost < 53}'>
 <div class="timer" style="float: right; width: 210px; font-size: 15px; margin-right: 20px;">
<div style="margin-top:20px;padding-bottom:5px;box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);background: white;overflow:none;">
    <div class="otherheadercheckout"><div class="otherheadertextcheckout"><img src="/images/little_white_shopping_cart-19x19.png">&nbsp;Timer</div></div>
    <p align="center">Time left to checkout</p>
    <div align="center" style="font-weight:600;">
        <span id="checkout_timer"></span>
    </div>

</div>

 </div>
 </c:if> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:53:57.547

如果要将计时器的状态从一页加载到下一页保存，则必须将计时器信息专门存储在从一页到下一页持续存在的某个位置。Javascript 变量不会从一个页面加载保存到下一个页面 - 每次页面加载时它们都会从头开始重新初始化。

您的选择是：

1.  服务器端：使用 ajax 将计时器状态保存到您的服务器，以便可以将其放入后续页面加载中。这很麻烦，因为除非您知道用户何时离开页面并且可以在那一刻可靠地将剩余时间保存到服务器，否则任何类型的计时器保存精度都需要对服务器进行大量 ajax 调用以不断节省时间.

2.  客户端：通过 cookie 或（在较新的浏览器中）本地存储本地存储计时器状态。这很容易，但很容易被黑客操纵（如果你在乎的话）。

# css - CSS - 是否可以将相同的类规范分配给 id

> ID：15891911
> 
> 赞同：0
> 
> 时间：2013-04-09T01:41:47.077
> 
> 标签：css

我正在使用一个自动生成一些 HTML 页面的应用程序，我需要在这些页面中编写一些 CSS 文件。我想重用几个类（由 jquery-ui 主题生成），但**我无法更改任何 HTML 元素**。

那么，是否可以将相同的类规范分配给 id？

如果这是可能的，那么我会很容易地在我的类和 id 之间创建一个映射。

例子：

```
<html>
<head><style>
#charlieID {
    /* I want #charlie to be identical to .alphaClass */
    /* Assume that I can not change the HTML (it will be auto generated by another application)*/
}

.alphaClass {
    font-size: small; 
    color: lime;
}

.betaClass {
    font-size: medium;
    color: blue;
}
</style></head>
<body>
    <p class="alphaClass">Alpha</p>
    <p class="betaClass">Beta</p>
    <p id="charlieID" class="charlieClass">Charlie</p>
<body></html> 
```

我将在整个应用程序中管理数百个（可能是数千个）ID，而不必在一个页面中进行管理。所以，当涉及到 CSS 时，我有完全的自由，因此我可以将它分解为几个 CSS 文件（每个页面一个文件）来控制 ID 和我的类的另一个主 CSS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T01:48:06.010

是的，当然了。一个 CSS 规范可能有多个目标。要将相同的规则定位到 class 和 id，只需执行以下操作：

```
#charlieID, .alphaClass {
    font-size: small; 
    color: lime;
} 
```

注意分隔目标的逗号。

* * *

## 补充回答：

如果您有数十万个 id 要匹配，那么这个标准方法（不需要额外的脚本或库，只需常规 CSS）实际上比任何可能的替代方法都要小。考虑：

```
/* Standard CSS */
#charlieID1, #charlieID2, #charlieID3, #charlieID4, #charlieID5,
#charlieID6, #charlieID7, #charlieID8, #charlieID9, #charlieID10,
#charlieID11, #charlieID12, #charlieID13, #charlieID14, #charlieID15,
#charlieID16, #charlieID17, #charlieID18, #charlieID19, .alphaClass {
    font-size: small; 
    color: lime;
} 
```

并将其与：

```
/* LESS CSS. Needs to be compiled with LESS */
.alphaClass {
    font-size: small; 
    color: lime;
}

#charlieID1 {
    .alphaClass
}
#charlieID2 {
    .alphaClass
}
#charlieID3 {
    .alphaClass
}
#charlieID4 {
    .alphaClass
}
#charlieID5 {
    .alphaClass
}
#charlieID6 {
    .alphaClass
}
#charlieID7 {
    .alphaClass
}
#charlieID8 {
    .alphaClass
}
#charlieID9 {
    .alphaClass
}
#charlieID10 {
    .alphaClass
}
#charlieID11 {
    .alphaClass
}
#charlieID12 {
    .alphaClass
}
#charlieID13 {
    .alphaClass
}
#charlieID14 {
    .alphaClass
}
#charlieID15 {
    .alphaClass
}
#charlieID16 {
    .alphaClass
}
#charlieID17 {
    .alphaClass
}
#charlieID18 {
    .alphaClass
}
#charlieID19 {
    .alphaClass
} 
```

这只是 19 个 ID。

然而，有一个更好的解决方法。如果您确实有数十万个可能的 id，那么针对这些 id 可能是错误的做法。相反，您应该真正查看文档的结构，看看您想要定位的东西是否可以通过其他方式定位。

一种替代方法是根据事物的父对象编写目标。例如，如果您有这样的结构：

```
<div class='foo'>
    <span id='charlieID'></span>
</div> 
```

然后你可以像这样定位它：

```
div.foo span, .alphaClass {
    font-size: small; 
    color: lime;
} 
```

创造性地寻找可以定位的常见结构。您还可以使用其他技巧，例如使用子选择器或兄弟选择器。我强烈建议至少阅读一篇高级 CSS 教程。但请注意，一些较旧的浏览器不支持一些更有用的规则。不过，既然您提到 CSS3，您可能还是针对较新的浏览器。

如果一切都失败了，没有什么可以说您不能生成 CSS 文件而不是手动输入它：

```
#! /usr/bin/env tclsh

# Sample script to print rule with thousands of target.
# (note: I have no idea what thousands of targets do to various browsers)

set targets {}
foreach {name idx} {"#charlie" 1000 ".alphaClass" "" "#jane" 500} {
    if {$idx == ""} {
        lappend targets $name
    } else {
        for {set i 0} {$i < $idx} {incr i} {
            lappend targets "$name$i"
        }
    }
}
puts [join $targets ","]
puts "{font-size:small; color:lime;}"

# should print a rule with the following targets:
# #charlie0..#charlie999, .alphaClass and #jane0..#jane499 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T01:48:22.460

AFAIK 没有办法在纯 CSS 中“继承”现有类的样式。

如果可以接受客户端脚本，则可以动态添加类。jQuery 示例：

```
$(document).ready(function() {$('#charlieID').addClass('alphaClass');}); 
```

* * *

请注意，如果您*确实*有能力更改现有的 CSS，那么我误解了您的问题。在这种情况下，您不必显式重写样式，只需使用逗号分隔的列表：

```
#charlieID, 
.alphaClass {
    font-size: small; 
    color: lime;
} 
```

* * *

由于您确实*能够*编辑 CSS，因此您还可以查看更高级别的语言，例如[LESS](http://lesscss.org/)。在 LESS 中，您可以执行以下操作：

```
.alphaClass {
    font-size: small; 
    color: lime;
}

#charlieID {
    .alphaClass
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T02:02:41.227

对于您的问题：不，您不能继承样式。如果您使用像@slebetman 建议的多个选择器，那么您可以实现效果，但这需要您修改（可能缩小的）jquery ui css 文件，这可能很麻烦。

如果您能够安装 ruby​​（或有可用的 ruby​​），那么您可以安装 sass，它是一个“高级 CSS”（总而言之，它更多的是在本质上）。

这可以使用和 viola来完成，`gem install sass`然后只需编译您的文件。`sass filename.scss:filename.css`

最后，这样做的好处是可以让您轻松继承这些样式，假设您有两个文件，`cannotedit.css`并且`mycss.scss`. 首先，将您的名称重命名`cannotedit.css`为`_cannotedit.scss`（不需要任何额外更改，因为所有 CSS 都是有效的 SCSS）。添加的下划线防止它被单独编译，这使您最终受益于所有这些都在一个 CSS 文件中。

_cannotedit.scss

```
.center {
  margin: 0 auto;
} 
```

并且您希望将这些样式应用于 ID 但重用它们（请原谅过于简单的示例）：

mycss.scss

```
@import "cannotedit";

#someId {
  @extend .center;
  color: red;
} 
```

而且bam，您编译的文件将具有两者的内容，`_cannotedit.scss`并且`mycss.scss`扩展ID将从样式中“继承”样式。这可能（或可能不会）对您的项目来说太过分了，但我想将它添加到您的选项列表中。

**最后说明**

如果您无法使用 ruby​​，还有其他选项，例如 LESS 或 Stylus，我知道 Stylus 在 Node.js 上运行，但我不确定 LESS 在什么上运行（可能是 Node.js，不记得了）会执行大致相同的操作我只是推荐 Sass，因为它很容易而且我更喜欢它（主要归功于指南针插件）。

**资源**

1.  [萨斯](http://sass-lang.com/)
2.  [较少的](http://lesscss.org/)
3.  [手写笔](http://learnboost.github.io/stylus/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T01:45:09.243

以下是关于何时使用 ID 和 CLASS 的一个很好的解释：http: [//css-tricks.com/the-difference-between-id-and-class/](http://css-tricks.com/the-difference-between-id-and-class/)

对于您的问题，一个元素可以同时具有 ID 和类。

# clojure - Clojure：文档

> ID：15891912
> 
> 赞同：2
> 
> 时间：2013-04-09T01:41:54.970
> 
> 标签：clojure

我正在完成本教程： http: [//moxleystratton.com/clojure/clojure-tutorial-for-the-non-lisp-programmer](http://moxleystratton.com/clojure/clojure-tutorial-for-the-non-lisp-programmer)

并遇到了这个片段：

```
user=> (loop [i 0]
  (when (< i 5)
    (println "i:" i)
    (recur (inc i))))
i: 0
i: 1
i: 2
i: 3
i: 4
nil 
```

在我的口译员上效果很好！

```
❯ lein repl
nREPL server started on port 50974
REPL-y 0.1.10
Clojure 1.5.1 
```

现在我正在寻找一些关于什么`recur`的文档。

不在这里！ [http://clojure.github.io/clojure/api-index.html](http://clojure.github.io/clojure/api-index.html)

我花了一段时间才弄清楚它是一种“特殊形式”，因此在[此页面](http://clojure.org/special_forms)中进行了描述。

是否有一个具有单一连贯索引的汇编？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T02:05:48.310

尝试使用 REPL 中的内置文档：

```
user=> (doc recur)
-------------------------
recur
  (recur exprs*)
Special Form
  Evaluates the exprs in order, then, in parallel, rebinds
  the bindings of the recursion point to the values of the exprs.
  Execution then jumps back to the recursion point, a loop or fn method.

  Please see http://clojure.org/special_forms#recur 
```

它适用于函数、宏、特殊形式、变量——几乎所有东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T01:46:51.160

clojuredocs.org 上的搜索框是一个很好的起点，它们提供了非常[完整](http://clojuredocs.org/clojure_core)的表单和功能列表。请注意，目前 Clojure Docs 尚未与最新版本的 clojure 保持同步，因此存在一些细微差别。在实践中，[官方 api 页面](http://clojure.github.io/clojure/)已经足够完整并且是最新的。它没有所有的特殊形式，尽管 clojure 中的特殊形式很少，所以这通常不是问题

# ruby-on-rails - 以字符串形式传递时修改变量列表

> ID：15891914
> 
> 赞同：-5
> 
> 时间：2013-04-09T01:42:01.110
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个类 (X) 的 ruby​​ 实例和一个作为字符串 ["var1", "var2", .. , "varn" ] 的变量列表。我有一个函数可以修改这些值，以便净效果是这样的：

```
def modify(instance_obj, arrray_of_variables)
  # do something
end 
```

净效应应该是：

```
X.var1 = modifyVar(X.var1)
X.var2 = modifyVar(X.var2)
..
X.varn = modifyVar(X.varn) 
```

所有变量都假定为字符串。

编辑（更多信息）：我要解决的实际问题是，对于我的大约 10 个模型类，我有一些字符串变量作为 JSON 字符串存储在数据库中。所以我有两个函数parse_from_json（应该称为after_find）和serialize_to_json（称为before_save）。由于这将针对相当多的模型类（大约 10 个模型类和总共 30 个左右的变量）完成，所以我想将它移到一个单独的函数中，而不是为每个模型类定义这些函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:54:58.853

你可以试试这个。

```
def modify(instance_obj, arrray_of_variables)
  arrray_of_variables.each do |variable|
    instance_obj.send("#{variable}=", modifyVar(instance_obj.send(variable)))
  end
end 
```

# python - 如何在两个标记内查找字符串

> ID：15891915
> 
> 赞同：0
> 
> 时间：2013-04-09T01:42:10.770
> 
> 标签：python, regex

我正在使用 python 进行文本处理。基本上我想提取两个地标之间的内容。具体内容如下。如何设计正则表达式以获取“查找意图漏洞”和“打印意图摘要”之间的文本。谢谢

```
 Find component vulnerabilities
    ******************************************************************************************
    !!!@methods_for_class[org.apache.cordova.BatteryListener$1*org/apache/cordova/BatteryListener/execute(Ljava/lang/String;Lorg/json/JSONArray;Lorg/apache/cordova/api/CallbackContext;)@70!] is nil
    !!!@methods_for_class[org.apache.cordova.CordovaWebView$1*org/apache/cordova/CordovaWebView/setup()@124!] is nil
    !!!@methods_for_class[org.apache.cordova.NetworkManager$1*org/apache/cordova/NetworkManager/initialize(Lorg/apache/cordova/api/CordovaInterface;Lorg/apache/cordova/CordovaWebView;)@57!] is nil
    !!!@methods_for_class[org.apache.cordova.Device$1*org/apache/cordova/Device/initTelephonyReceiver()@29!] is nil
    Protected Receiver: org.apache.cordova.BatteryListener$1*org/apache/cordova/BatteryListener/execute(Ljava/lang/String;Lorg/json/JSONArray;Lorg/apache/cordova/api/CallbackContext;)@70!, 0
    Protected Receiver: org.apache.cordova.CordovaWebView$1*org/apache/cordova/CordovaWebView/setup()@124!, 0
    Possible Malicious Broadcast Injection: org.apache.cordova.NetworkManager$1*org/apache/cordova/NetworkManager/initialize(Lorg/apache/cordova/api/CordovaInterface;Lorg/apache/cordova/CordovaWebView;)@57, 0
    Possible Malicious Broadcast Injection: org.apache.cordova.Device$1*org/apache/cordova/Device/initTelephonyReceiver()@29, 0

    Find intent vulnerabilities
    ******************************************************************************************
    Possible Activity Hijacking: org/apache/cordova/CordovaWebView/showWebPage(Ljava/lang/String;ZZLjava/util/HashMap;)@147, Source Line: 664, hasExtras=false, hasRead=false, hasWrite=false
    Possible Activity Hijacking: org/apache/cordova/CordovaWebView/showWebPage(Ljava/lang/String;ZZLjava/util/HashMap;)@201, Source Line: 676, hasExtras=false, hasRead=false, hasWrite=false
    Possible Activity Hijacking: org/apache/cordova/CordovaWebViewClient/shouldOverrideUrlLoading(Landroid/webkit/WebView;Ljava/lang/String;)@83, Source Line: 131, hasExtras=false, hasRead=false, hasWrite=false
    Possible Activity Hijacking: org/apache/cordova/CordovaWebViewClient/shouldOverrideUrlLoading(Landroid/webkit/WebView;Ljava/lang/String;)@161, Source Line: 142, hasExtras=false, hasRead=false, hasWrite=false
    Possible Activity Hijacking: org/apache/cordova/CordovaWebViewClient/shouldOverrideUrlLoading(Landroid/webkit/WebView;Ljava/lang/String;)@239, Source Line: 153, hasExtras=false, hasRead=false, hasWrite=false
    Possible Activity Hijacking: org/apache/cordova/CordovaWebViewClient/shouldOverrideUrlLoading(Landroid/webkit/WebView;Ljava/lang/String;)@368, Source Line: 185, hasExtras=true, hasRead=false, hasWrite=false
    Possible Activity Hijacking: org/apache/cordova/CordovaWebViewClient/shouldOverrideUrlLoading(Landroid/webkit/WebView;Ljava/lang/String;)@544, Source Line: 209, hasExtras=false, hasRead=false, hasWrite=false
    Possible Service Hijacking: org/apache/cordova/api/LegacyContext/bindService(Landroid/content/Intent;Landroid/content/ServiceConnection;I)@22, Source Line: 142, hasExtras=false, hasRead=false, hasWrite=false
    Possible Activity Hijacking: org/apache/cordova/api/LegacyContext/startActivity(Landroid/content/Intent;)@20, Source Line: 82, hasExtras=false, hasRead=false, hasWrite=false
    Possible Service Hijacking: org/apache/cordova/api/LegacyContext/startService(Landroid/content/Intent;)@20, Source Line: 136, hasExtras=false, hasRead=false, hasWrite=false

    Print intent summary
    ******************************************************************************************
    **************************
    org/apache/cordova/Capture/captureAudio()@8
    invoke-direct   {v0,v1},android/content/Intent/<init>   ; <init>(Ljava/lang/String;)V
    Explicit: false
    Destination Type: 
    Done: false
    ************************** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T01:49:20.983

你需要使用正则表达式吗？使用 str.find 或 str.index 查找每个标记然后使用切片提取它们之间的内容可能更简单。

但是，使用正则表达式：

```
re.search(r"(?s)Find intent vulnerabilities\n(.*?)Print intent summary\n", text).group(1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T01:51:33.150

正则表达式在这里可能有点矫枉过正。为什么不使用索引和切片？

```
>>> l = len('test123')
>>> s = '  test123 somestuff here test456   '
>>> s.index('test123')
2
>>> s.index('test456')
25
>>> s[2+l:25]
' somestuff here ' 
```

# android - 使用 OnClickListener 在 AlertDialog 中设置项目时遇到问题

> ID：15891917
> 
> 赞同：0
> 
> 时间：2013-04-09T01:42:20.947
> 
> 标签：android

尝试使用 AlertDialog 设置微调器时遇到问题，不断收到错误消息“AlertDialog.Builder 类型中的方法 setItems(int, DialogInterface.OnClickListener) 不适用于参数 (String[], new View.OnClickListener() {})"

我对 Android 编程相当陌生，我仍然习惯它，任何帮助将不胜感激！谢谢

```
AlertDialog.Builder b = new Builder(this);
    b.setTitle("Select Day");
    String[] types = {"1", "2", "3"};
    b.setItems(types, new OnClickListener){
        public void onClick(DialogInterface dialog, int which){
            dialog.dismiss();
            switch(which){
            case 0:
                day = "1";
                break;
            case 1:
                day = "2";
                break;
            }
        }

    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T01:44:13.253

改变：

```
b.setItems(types, new OnClickListener){ 
```

至

```
b.setItems(types, new DialogInterface.OnClickListener){ 
```

你将不得不分开

```
String[] types = {"1", "2", "3"}; 
```

到单个整数或 CharSequence 数组。

您的代码中的某个地方可能有另一个普通视图的 OnClickListener，并将其包含在您的导入中。由于所有 OnClickListener 类共享相同的名称，Eclipse 会自动将它们全部解析为当前导入的类。在这种情况下，您可以指定父类。

此外，Eclipse 已解析的[setItems()](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setItems%28int,%20android.content.DialogInterface.OnClickListener%29)方法将单个 int 用作第一个参数，而不是 String 数组。不过，您可以使用其他[setItems()](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setItems%28java.lang.CharSequence%5B%5D,%20android.content.DialogInterface.OnClickListener%29)方法，该方法采用 CharSequence 数组。在这种情况下，改变

```
String[] types = {"1", "2", "3"}; 
```

至

```
CharSequence[] types = {"1", "2", "3"}; 
```

# php - 使用 jquery ajax 显示所有记录

> ID：15891920
> 
> 赞同：0
> 
> 时间：2013-04-09T01:42:31.550
> 
> 标签：php, jquery

我已经编写了用于在同一页面上显示记录的代码，但它不起作用。实际上，我希望在插入同一页面的页面中以表格格式显示所有记录，并且还显示最近添加的记录而不刷新页面。

ajaxinsert.php

```
<script type="text/javascript" src="../jquery.js"></script>

<script type="text/javascript" >
$(document).ready(function() {
    $("#insert").click(function() {
       var name  = $("#name").val();
       var rno  = $("#rno").val();
    var address = $("#address").val();

    //var dataString = "&name="+name"+&address="+address;
    $.ajax({
      type:'POST',
      data:{name: name,
            rno:rno,
            address:address},
      url:'demo_insert.php',
      success:function(data){
       if(data="inserted") {
          alert("Insertion Success");
        } else {
          alert("Not Inserted"); 
        }
     } 
   });  
    });
});
</script>
</head>

<body>
<form id="myform" action="demo_insert.php"> 
<label>Name: </label> <input id="name" type="text" />
<label>Rno: </label> <input id="rno" type="text" />
<label>Address: </label> <input id="address" type="text" />
<input name="Submit" type="button"  id="insert" value="Submit"/>
<!--<a id="insert" title="Insert Data" href="#">Push into mysql</a>-->
 <!-- For displaying a message -->

<div id="message"></div>
</form>
</body> 
```

demo_insert.php

```
<?
    include('connection.php');
 //Pull data from home.php front-end page

 $name=mysql_escape_string($_POST['name']);
 $rno=mysql_escape_string($_POST['rno']);
 $address=mysql_escape_string($_POST['address']);
 //Insert Data into mysql
$query=mysql_query("INSERT INTO school(name,rno,address) VALUES('$name','$rno','$address')");

$dispquery=mysql_query("select * from school"); 
echo "<table border=1>";

   echo "<tr>";
   echo"<td>Srno</td>";
   echo "<td>Name</td>";
   echo"<td>Rno</td>";
   echo "<td>Address</td>";  
   echo"</tr>";
$i=1;
while($result=mysql_fetch_array($dispquery))
{
    echo "<tr>";
    echo "<td>" .$i."</td>";
    echo "<td>" .$result['name'] ."</td>";
     echo "<td>" .$result['rno'] ."</td>"; 
    echo "<td>" .$result['address'] ."</td>";   
    echo "</tr>";
    $i++;
}
   echo"</table>";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:45:59.490

您必须实际将内容添加到 DOM。在您的 Ajax 调用的回调函数中，您将获得数据，您可以使用这些数据使用[`.append()`](http://api.jquery.com/append/)或之类的函数来填充您的表[`.html()`](http://api.jquery.com/html/)。要查看您的 Ajax 调用从您的 PHP 脚本返回的内容，请`console.log(data)`输入回调，然后您可以使用它来确定您想要如何生成内容。

此外，不推荐使用 PHP`mysql`扩展。[`mysqli`](http://php.net/manual/en/book.mysqli.php)请用或[PDO](http://php.net/manual/en/book.pdo.php)替换它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T01:57:18.133

首先，请使用 mysqli 或 PDO 连接到数据库，mysql 方法已被弃用，并且很快就会停止工作并破坏所有代码。

其次，你几乎一直到那里，虽然不完全。我建议采取稍微不同的方法，也许可以使用您的 jQuery 和 JSON。

像这样更改第一个文件：

```
<script type="text/javascript" >
    $(document).ready(function() {
        $.ajax({
            type:'POST',
            data: {
                name: $("#name").val(),
                rno: $("#rno").val(),
                address: $("#address").val()
            },
            dataType: 'json',
            url:'demo_insert.php',
            success: function(data) {
                if(data.insert) {
                    alert("Insertion Success");
                    // All your content will be in data.output now which you can append wherever
                } else {
                    alert("Not Inserted"); 
                }
            } 
        }); 
    });
</script> 
```

和你的 php 一样，请注意我没有将你的代码更改为 PDO 或 mysqli，但你应该调查一下！

```
<?php
include('connection.php');
//Pull data from home.php front-end page

$response = new StdClass();

$name=mysql_escape_string($_POST['name']);
$rno=mysql_escape_string($_POST['rno']);
$address=mysql_escape_string($_POST['address']);

//Insert Data into mysql
$query=mysql_query("INSERT INTO school(name,rno,address) VALUES('$name','$rno','$address')");

// Add the insert to the response
$response->insert = !$query ? false : true;

// Only continue if its true
if ($response->insert) {
$dispquery=mysql_query("select * from school");
    $response->output = '';
    $response->output .= "
        <table border=1>
        <tr>
        <td>Srno</td>
        <td>Name</td>
        <td>Rno</td>
        <td>Address</td>
        </tr>";
    $i=1;

    while($result=mysql_fetch_array($dispquery)) {
        $response->output .= "
        <tr>
        <td>$i</td>
        <td>{$result['name']}</td>
        <td>{$result['rno']}</td>
        <td>{$result['address']}</td>
        </tr>";
        $i++;
    }
    $response->output .= "</table>";
}

header('Content-Type: application/json');
echo json_encode($response); 
```

?>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T01:48:47.227

您的`if`陈述与您返回的内容不符。您正在响应一个 html 表格，并在您的成功回调中将其视为一个简单的变量。

```
success:function(data){
       if(data="inserted") {
          alert("Insertion Success");
        } else {
          alert("Not Inserted"); 
        }
     } 
```

您想附加`data`到您的 DOM 或用它做其他事情。根据您的 php，您希望将其附加到某处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T01:57:16.480

几件事，对我看到的一些问题的概括回答

通常，如果您遵循某种 php 编码的 MVC 结构，您将希望将您的读取查询逻辑与更新、插入逻辑等分开

因此，在您的 php 上，如果您将插入封装在一个函数或单独的页面中，如果插入成功，您可以返回一个布尔值，然后通过成功函数中的另一个 ajax getJson 调用您的读取表查询

在 php 中，您通常希望返回查询结果集 echo json_encode($results)

然后在你的 javascript 中，一旦 ajax 完成（）（用于处理 ajax json 成功的最新 jquery 方法）或 success()，你可以使用 $.each 来遍历结果集

如果您有兴趣，我可以提供更多代码示例

# python - 最小化具有共同值的行，为附加值添加列

> ID：15891921
> 
> 赞同：1
> 
> 时间：2013-04-09T01:42:32.127
> 
> 标签：python, numpy, pandas

我有一个数组，格式如下：

```
564387.29   7371625.14  0.00    33030.00    -132.96 -1031.50

564387.29   7371625.14  0.00    1530.00     -133.85 -1039.27

564387.29   7371625.14  0.00    47970.00    -138.35 -1044.40

564387.32   7371625.14  0.00    47970.00    -166.41 -999.27

564387.32   7371625.14  0.00    33030.00    -241.74 -1889.71

564387.32   7371625.14  0.00    1530.00     -135.42 -857.31

564387.35   7371625.14  0.00    33030.00    -174.06 -990.66

564387.35   7371625.14  0.00    1530.00     -178.17 -927.11

564387.35   7371625.14  0.00    47970.00    -116.65 -1810.97 
```

我将数组设为 pandas 数据框，并根据第 1、2 和 4 列对它们进行排序：

```
564387.29   7371625.14  0.00    1530.00     -133.85 -1039.27

564387.29   7371625.14  0.00    33030.00    -132.96 -1031.50

564387.29   7371625.14  0.00    47970.00    -138.35 -1044.40

564387.32   7371625.14  0.00    1530.00     -135.42 -857.31

564387.32   7371625.14  0.00    33030.00    -241.74 -1889.71

564387.32   7371625.14  0.00    47970.00    -166.41 -999.27

564387.35   7371625.14  0.00    1530.00     -178.17 -927.11

564387.35   7371625.14  0.00    33030.00    -174.06 -990.66

564387.35   7371625.14  0.00    47970.00    -116.65 -1810.97 
```

最后一步是通过在 4 个附加列上添加变量来减少行数，以获得以下结果：

```
564387.29   7371625.14  0.00    1530.00 -133.85 -1039.27    -132.96 -1031.50    -138.35 -1044.40

564387.32   7371625.14  0.00    1530.00 -135.42 -857.31     -241.74 -1889.71    -166.41 -999.27

564387.35   7371625.14  0.00    1530.00 -178.17 -927.11     -174.06 -990.66     -116.65 -1810.97 
```

但我似乎找不到办法——我看了很多 numpy 和 pandas 的讨论，但没有任何想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:17:17.700

1.  根据特定的列对其进行排序
2.  将它们分组，然后应用我们的自定义功能

以下是示例：

```
In [121]: def func(df):
   .....:     df = df.reset_index(drop=True)
   .....:     s = [df.ix[0][3]]
   .....:     for index, rw in df.iterrows():
   .....:         s.append(rw[4])
   .....:         s.append(rw[5])
   .....:     return pd.Series(s)
   .....: 

In [122]: df.sort([0, 1, 3]).reset_index(drop=True).groupby([0, 1, 2]).apply(func)
Out[122]: 
                           0       1        2       3        4       5        6   
0         1          2                                                         
564387.29 7371625.14 0  1530 -133.85 -1039.27 -132.96 -1031.50 -138.35 -1044.40
564387.32 7371625.14 0  1530 -135.42  -857.31 -241.74 -1889.71 -166.41  -999.27
564387.35 7371625.14 0  1530 -178.17  -927.11 -174.06  -990.66 -116.65 -1810.97 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:57:27.493

@waitingkuo 谢谢，这会产生我想要的；我尝试将它与我的实际数据一起使用，需要将更多行转换为列（每个数据集总共 7 行，而在示例中只有 3 行），现在我得到了这种格式：

564387.29 7371625.14 0 0 1530.00000

```
 1     -133.84641

                      2    -1039.27338

                      3     -133.48476

                      4    -1036.76991

                      5     -307.65603

                      6    -1747.01828

                      7     -132.95704

                      8    -1031.49587

                      9     -138.35364

                      10   -1044.39817

                      11    -119.70329

                      12    -981.84015

                      13     -89.65443

                      14    -919.83924 
```

...

看起来一切都可以分组工作，然后行不会被附加......

# iphone - 如何知道这个块何时完成执行

> ID：15891922
> 
> 赞同：0
> 
> 时间：2013-04-09T01:42:32.050
> 
> 标签：iphone, ios, ios6, abaddressbook

我正在尝试根据 recordID 访问一个人的 ABAddressBook 属性，但是每次我尝试获取一个属性时，我都会得到一个空值。

这是我尝试过的代码。

```
 ABAddressBookRef addressBook = NULL;
    addressBook = ABAddressBookCreateWithOptions(addressBook, nil);
    ABRecordRef person = ABAddressBookGetPersonWithRecordID(addressBook, (ABRecordID) [[object valueForKey:@"recordId"] description]);
    NSString *firstName = (__bridge NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty);
    NSLog(@"First Name %@", firstName);
    NSString *lastName = (__bridge NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty);
    NSString *name = [NSString stringWithFormat:@"%@" "%@", lastName, firstName];
    NSLog(@"Full Name %@", name); 
```

我在这里做错了什么？

编辑：我已经想通了上述问题。这是我用过的。现在我遇到的问题是，只有当这段代码完成执行时，我才需要重新加载我的 UITableView。但我无法弄清楚这个块何时完成执行。需要帮助。

```
CFErrorRef myError = NULL;
ABAddressBookRef addressBook = ABAddressBookCreateWithOptions(NULL, &myError);
ABAddressBookRequestAccessWithCompletion(addressBook,
                                         ^(bool granted, CFErrorRef error) {
                                             if (granted) {

                                                 ABRecordID recID = [recordId intValue];

                                                 ABRecordRef person = ABAddressBookGetPersonWithRecordID(addressBook, recID);
                                                 NSString *firstName = (__bridge NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty);

                                                 NSString *lastName = (__bridge NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty);
                                                 if(!firstName){
                                                     firstName = @"";
                                                 }
                                                 if(!lastName){
                                                     lastName = @"";
                                                 }

                                                 NSString *name = [NSString stringWithFormat:@"%@ %@", lastName, firstName];
                                                 if([firstName length] < 1 && [lastName length] < 1){
                                                     name = @"No Name";
                                                 }
                                                 self.personName = name;
                                                 NSData  *imageData = (NSData *)CFBridgingRelease(ABPersonCopyImageData(person));
                                                 if(imageData){
                                                     self.personImage = [UIImage imageWithData:imageData];
                                                 }
                                                 else{
                                                     self.personImage = [UIImage imageNamed:@"default.png"];
                                                 }

                                                 NSMutableArray *array = [NSMutableArray array];
                                                 [array addObject:self.personName];
                                                 [array addObject:self.personImage];

                                                 [self.personDetailsArray addObject:array];
                                                 [self.tableView reloadData];

                                             } else {
                                                 // Handle the error
                                             }
                                         }); 
```

更新块内的 UIElements 是否正确？如果不是，还有什么选择。

我想要的是仅在执行块后才加载/更新我的 UITableView。还没有找到任何有用的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:46:20.843

我认为您创建地址簿是错误的。尝试使用以下方法创建您的通讯录：

```
 ABAddressBookRef addressBook = ABAddressBookCreate(); 
```

您不需要在第一行中声明为 NULL，因此请删除它。然后尝试获取`person`对象并查看它是否返回有效引用。

另外，我相信`ABAddressBookCreateWithOptions`参数如下：

```
ABAddressBookRef ABAddressBookCreateWithOptions (
   CFDictionaryRef options,
   CFErrorRef* error
); 
```

但是您传递的不是选项，而是对地址簿的引用。我没有太多运气，`ABAddressBookCreateWithOptions`所以我只使用`ABAddressBookCreate`. 它在 iOS 6 中已被弃用，但这对我来说并不是什么大问题。

# c++ - 可能的操作错误，随机单个数字输出

> ID：15891928
> 
> 赞同：1
> 
> 时间：2013-04-09T01:43:26.960
> 
> 标签：c++

我为一个要求正数的类编写了这个程序，并根据该数字执行计算。上周我从堆栈人员那里得到了一些很大的帮助，但我的教授要求我重写它并简化我的代码。我已经这样做了，现在数学计算不正确。我已经运行了调试器，但我看不到传递的值在哪里不正确。此外，所有数字都未通过“if (number > 0)”测试。

即使我收到成功的构建消息，这可能是编译错误吗？

提前致谢！

这是代码。

```
#include <iostream>
#include <string>
#include <fstream>  
#include <iomanip>
#include <stdexcept>
#include <cstdlib>

using namespace std;

int main ()
{
    system ("color F0");

    int number, countIf = 0, countWhile = 0, countDo = -1, h = 0, i = 0, x = 0, y = 0;
    char repeat = 'y';

    do {

        cout << "Please enter a positive integer or zero to quit: ";
        cin >> number;
        x = number, y = number;
        cin.ignore();

        if (number < 0) 
            cout << "Error: The integer entered was either not positive or a zero.\n" << endl;

        else if (number > 0)
        {
            if (number%2 == 0 && number%5 == 0)
                for (y%5; countIf <= y; countIf +=5)
                    {
                        i = y / 10;
                        i += countIf;
                        cout << countIf << " ";
                    }

            else if 
                (countWhile < x && number%2 == 0) 
                    {
                        countWhile += 2;
                        cout << countWhile << " ";
                    }

            else 
                {
                    countDo +=2;
                    cout << countDo << " ";
                }
        } 

            cout << "\n\nDo you wish to continue? (Y or N): ";
            cin >> repeat;
}
        while (number != 0 && repeat == 'y' || repeat == 'Y');

    //cout << "\nThanks for playing!" << endl;
    system ("pause");
    return 0;

} 
```

输出应类似于：

![在此处输入图像描述](https://i.stack.imgur.com/ZVjFA.png)

我得到的是：

![在此处输入图像描述](https://i.stack.imgur.com/c8F90.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:10:54.440

我像这样修改了你的代码：

```
 else if
            (countWhile < x && number%2 == 0)
                {
                    for(countWhile+=2; countWhile<x; countWhile+=2)
                        cout << countWhile << " ";
                }

        else
            {
                    for(countDo+=2; countDo<x; countDo+=2)
                        cout << countDo << " ";
            } 
```

我得到如下输出：

```
Please enter a positive integer or zero to quit: 82
2 4 6 8 10 12 14 16 18 20 22 24 26 28 30 32 34 36 38 40 42 44 46 48 50 52 54 56 58 60 62 64 66 68 70 72 74 76 78 80

Do you wish to continue? (Y or N): y
Please enter a positive integer or zero to quit: 75
1 3 5 7 9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45 47 49 51 53 55 57 59 61 63 65 67 69 71 73 
```

希望这可以帮助。

# ssis - AdventureWorks2012 数据库缺少“DimTime”表

> ID：15891930
> 
> 赞同：1
> 
> 时间：2013-04-09T01:43:57.717
> 
> 标签：ssis, etl, adventureworks

我正在执行**microsoft technet**教程中的**“创建简单 ETL 包”**。它指的是数据库中不可用的**“DimTime”表。**我知道在**2008 版本**中，“DimTime”被重命名为**“DimDate”**。

 ******1.  这是否也适用于**2012**版？
2.  本教程适用于 2012 版还是仅适用于**2008 或 2088R2**版？

我试图在 Microsoft 问题跟踪器中问这个问题，但还没有答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-30T16:11:20.937

您必须使用 DimDate 而不是 DimTime。

DimTime 表已重命名为 DimDate，因为该表实际上包含日期而不是时间。

资源：

[http://msftdbprodsamples.codeplex.com/wikipage?title=AWDW2008Details](http://msftdbprodsamples.codeplex.com/wikipage?title=AWDW2008Details)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T10:01:21.907

找到#1 的答案：是的，它确实适用于 2012 版。

对于 #2：教程网页有一个“其他版本”下拉菜单，您可以在其中选择您正在使用的 SQL Server 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-23T15:25:30.213

我认为您可以使用 DimTime。我试过了。有用。******

# ios - iPad模拟器中的UILocalNotification声音设置

> ID：15891932
> 
> 赞同：0
> 
> 时间：2013-04-09T01:44:12.393
> 
> 标签：ios, notifications, settings, simulator, audio

我正在 iPad 模拟器上测试我的应用程序。但是通知声音播放有一些问题。

当应用程序在前台运行而不是在后台运行时，将播放通知声音。它显示没有任何声音的横幅类型通知。我想知道 iPad 模拟器中的通知设置是否决定了这种情况。iPhone 的设置应用程序有“通知”菜单，我们可以设置通知类型-无、横幅、警报-和声音等。我无法弄清楚 iPad 设备设置应用程序，因为没有 iPad :(

iPhone 模拟器和 iPhone 设备正常工作。但不是 iPad 模拟器。

```
 -(void) registerNoti {
      localNotif.fireDate = noti.date;
      localNotif.timeZone = [NSTimeZone defaultTimeZone];

      //Payload
      localNotif.alertBody = [NSString stringWithFormat:@"%@",cell.textLabel.text];
      localNotif.alertAction = @"Run App";
      localNotif.soundName = @"sound.mp3";
      [[UIApplication sharedApplication] scheduleLocalNotification:localNotif];
 } 
```

有没有办法找出 iPad 模拟器通知声音问题？或者我可以忽略这个问题，一切都好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T19:53:12.403

尝试定义 mp3 文件的完整路径：

`localNotif.soundName = [[NSBundle mainBundle] pathForResource:@"sound" ofType:@"mp3"];`

它可能会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T02:12:52.083

如果您没有 iPad（或有 iPad 的朋友可以为您测试），请不要为 iPad 发布此应用。永远不要依赖模拟器。您最终*必须在设备上进行测试。*你的问题就是一个例子：你现在通过猜测进行编程，这是在自找麻烦。你不知道你的应用真正做了什么（因为“真的”只能表示“在设备上”）。

# ruby-on-rails - 无法运行 localhost:3000 (Ubuntu 12.10)

> ID：15891935
> 
> 赞同：0
> 
> 时间：2013-04-09T01:44:34.627
> 
> 标签：ruby-on-rails, ubuntu, localhost

我找到了一些与我相关的帖子......但现有的答案都没有奏效......所以这是一个来自 Newbee 的新帖子：

我刚刚安装了 Ubuntu 12.10 并尝试按照各种教程（[http://rubyonrails.org/download](http://rubyonrails.org/download)）在 Rails 上安装 Ruby，我什至尝试了 RVM ......所以最后当我尝试启动我的服务器时，我的 localhost:3000 是不工作。

这是我启动服务器时的终端：

```
laslo@ubuntu:~$ rails s
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': iconv will be deprecated in the future, use String#encode instead.
/usr/lib/ruby/vendor_ruby/railties/lib/rails_generator/generators/applications/app/app_generator.rb:7: Use RbConfig instead of obsolete and deprecated Config.
      exists  
      exists  app/controllers
      exists  app/helpers
      exists  app/models
      exists  app/views/layouts
      exists  config/environments
      exists  config/initializers
      exists  config/locales
      exists  db
      exists  doc
      exists  lib
      exists  lib/tasks
      exists  log
      exists  public/images
      exists  public/javascripts
      exists  public/stylesheets
      exists  script/performance
      exists  test/fixtures
      exists  test/functional
      exists  test/integration
      exists  test/performance
      exists  test/unit
      exists  vendor
      exists  vendor/plugins
      exists  tmp/sessions
      exists  tmp/sockets
      exists  tmp/cache
      exists  tmp/pids
   identical  Rakefile
   identical  README
   identical  app/controllers/application_controller.rb
   identical  app/helpers/application_helper.rb
   identical  config/database.yml
   identical  config/routes.rb
   identical  config/locales/en.yml
   identical  db/seeds.rb
   identical  config/initializers/backtrace_silencers.rb
   identical  config/initializers/inflections.rb
   identical  config/initializers/mime_types.rb
   identical  config/initializers/new_rails_defaults.rb
overwrite config/initializers/session_store.rb? (enter "h" for help) [Ynaqdh] y
       force  config/initializers/session_store.rb
overwrite config/initializers/cookie_verification_secret.rb? (enter "h" for help) [Ynaqdh] y
       force  config/initializers/cookie_verification_secret.rb
   identical  config/environment.rb
   identical  config/boot.rb
   identical  config/environments/production.rb
   identical  config/environments/development.rb
   identical  config/environments/test.rb
   identical  script/about
   identical  script/console
   identical  script/dbconsole
   identical  script/destroy
   identical  script/generate
   identical  script/runner
   identical  script/server
   identical  script/plugin
   identical  script/performance/benchmarker
   identical  script/performance/profiler
   identical  test/test_helper.rb
   identical  test/performance/browsing_test.rb
   identical  public/404.html
   identical  public/422.html
   identical  public/500.html
   identical  public/index.html
   identical  public/favicon.ico
   identical  public/robots.txt
   identical  public/images/rails.png
   identical  public/javascripts/prototype.js
   identical  public/javascripts/effects.js
   identical  public/javascripts/dragdrop.js
   identical  public/javascripts/controls.js
   identical  public/javascripts/application.js
   identical  doc/README_FOR_APP
   identical  log/server.log
   identical  log/production.log
   identical  log/development.log
   identical  log/test.log
      exists  vendor/rails 
```

任何的想法？当然我错过了一些巨大的东西......但是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:47:55.790

## 导轨 3+

`bundle exec script/rails server`从项目根目录尝试。

例如

```
durrantm.../linker$ bundle exec script/rails server
=> Booting WEBrick
=> Rails 3.1.8 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2013-04-08 21:48:24] INFO  WEBrick 1.3.1
[2013-04-08 21:48:24] INFO  ruby 1.9.3 (2012-11-10) [i686-linux]
[2013-04-08 21:48:24] INFO  WEBrick::HTTPServer#start: pid=9187 port=3000 
```

## 导轨 2

从项目根目录：

```
$ script/server
=> Booting WEBrick
=> Rails 2.3.8 application starting on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2013-04-08 21:58:11] INFO  WEBrick 1.3.1
[2013-04-08 21:58:11] INFO  ruby 1.9.3 (2012-11-10) [i686-linux]
[2013-04-08 21:58:11] INFO  WEBrick::HTTPServer#start: pid=10473 port=3000 
```

如果失败，也许可以重新开始：

```
cd                  # Go to your home directory
rails new abc       # Create the app
cd abc              # cd into the project's directory.
                    # Change the config/database.yml if desired.
script/rails server # for rails 3 or use the rails 2 command above. 
```

更多版本信息：

Ruby，您应该使用 1.9.2+ 大多数人现在使用 1.9.3+。
我建议您使用 RVM 来维护您的 ruby​​ 版本。其他人也使用 rbenv。

rvm: [https://rvm.io/](https://rvm.io/) # 是的，这是一个真实的 URL！
rbenv：[https ://github.com/sstephenson/rbenv/](https://github.com/sstephenson/rbenv/)

Rails 你应该在 rails 3.1+ 检查`rails -v`
你可以安装一个较新的版本，并`gem install rails`使用`-v 3.1.2`来指定那个版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:51:54.403

Rails 服务器适用于特定的应用程序。您在根路径中启动了 rails sever，当然这不起作用。

您首先需要创建一个新应用程序。

```
$ rails new myapp
$ cd myapp
# Install the gems needed at first
$ bundle install
# Then start server
$ rails s 
```

**添加**

从您的代码中，我发现真正的原因是您使用的是 Ruby 1.9.1。您刚刚下载的最新 Rails 不支持此版本。

尝试至少将 Ruby 升级到 1.9.3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T01:54:21.070

你的 Ruby 版本是什么？`Ruby-v`显示它？你应该首先执行这些命令。

```
bundle update
bundle install 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-04T04:48:16.640

我和你有同样的问题，这就是我解决这个问题的方法。在您创建的项目的 cd 中键入*script/server 。*一世

# c++ - ASM I/O 引脚 HCS12 微控制器

> ID：15891936
> 
> 赞同：0
> 
> 时间：2013-04-09T01:44:40.803
> 
> 标签：c++, c, assembly, microcontroller

我正在使用 HCS12 微控制器。我拥有的以下程序从板载键盘获取输入，并根据按下的键向板载 LCD 显示字母（我只附加了处理输入/输出的代码部分，如果需要，但这样对眼睛更容易）。

我想做的是摆脱用作输入的键盘，并使用我拥有的传感器通过 3 个单独的引脚发送低电平有效信号。这样，每次传感器读取其中一个读数（PortA1、2 或 3）时，它都会显示正确的字母，而不必每次都按下键盘。

init_keypad 函数将 PortA0-PortA3 设置为输入。

在 getkey 函数中，我不确定如何将 if 语句更改为单独读取 PortA0-PortA3

```
void init_keypad(void){
    DDRA = 0xf0;  // PA7-PA4 output; PA3-PA0 input
    DDRB = 0xf0;
    PUCR |= 1;   // PUPAE =1 (enable pull-up on all PORTA inputs) 
}

char getkey(void){
    PORTA = 0xe0;       // selects row 0     
    if ((PORTA & 1) == 0){
    cmdwrt(0x01);
      delay(20);
      if ((PORTA & 1) == 0) return('L');//true if '1' key still active after 20 ms
    }
    PORTA = 0xd0;
    if ((PORTA & 1) == 0){
    cmdwrt(0x01);
      delay(20);
      if ((PORTA & 1) == 0) return('S');//true if '1' key still active after 20 ms
    }
    PORTA = 0xb0;  
    if ((PORTA & 1) == 0){
    cmdwrt(0x01);
      delay(20);
      if ((PORTA & 1) == 0) return('R');//true if '1' key still active after 20 ms
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:14:08.460

假设您已将 PORTA 的输入读入我们将命名的变量中`input`。

在这种情况下，测试的各个位`input`看起来像：

```
if (input & 1) { 
   // bit 0 was set
}
if (input & 2) {
   // bit 1 was set
}
if (input & 4) {
   // bit 2 was set
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T04:06:33.350

如果您使用 CodeWarrior IDE 之类的工具进行 HCS12 编程，您会注意到 HCS12 项目中包含一个头文件。它将是您要为其编译的芯片的名称，例如。`mc9s12c32.h`. 在该文件中，您可以看到地址的定义以及您可用的每个寄存器的内容。`PORTA`例如被定义为指向`0x0`内存中的变量。为了能够读取端口 A 上的特定引脚，可以使用以下内容来帮助减轻任何混淆。

```
if(PORTA & PORTA_BIT0_MASK)
{
    //Do something if bit 0 was set
}
if(PORTA & PORTA_BIT1_MASK)
{
    //Do something if bit 1 was set
}
if(PORTA & PORTA_BIT2_MASK)
{
    //Do something if bit 2 was set
} 
```

上面所做的是测试端口 A 的全部内容，以及该端口上是否设置了每个单独的位。`PORTA_BIT0_MASK`恰好被定义为`1`、`PORTA_BIT1_MASK`as`2`和`PORTA_BIT2_MASK`as `4`。

# python - 网格中的 tkinter 画布有额外的空间

> ID：15891938
> 
> 赞同：3
> 
> 时间：2013-04-09T01:45:04.307
> 
> 标签：python, canvas, grid, tkinter, tk

我在框架内有一个画布，我说过画布应该是 250x250。但由于某种原因，它被创建得更大，右侧和底部有额外的空间。这是我的代码......有什么想法吗？

```
from tkinter import *
from tkinter import ttk
from player import player0

alpha = ('A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z')

class GUI(Frame):

    def __init__(self, master):
        Frame.__init__(self, master)
        self.boardsize = 250
        self.sqsize = self.boardsize//5
        master.title("Canvas with extra space")
        self.initialdraw()
        self.grid(row=0,column=0)

    def initialdraw(self):
        mainframe = ttk.Frame(self, padding=(5,5,5,5))
        mainframe.grid(column=0, row=0, sticky=(N, S, E, W))

        self.board = Canvas(mainframe, width=self.boardsize, height=self.boardsize,bg='white')
        self.board.grid(row=1,column=0)

        for row in range(5):
            for col in range(5):
                top = row * self.sqsize
                left = col * self.sqsize
                bottom = row * self.sqsize + self.sqsize -2
                right = col * self.sqsize + self.sqsize -2
                rect = self.board.create_rectangle(left,top,right,bottom,outline='gray',fill='')

        self.board.focus_set()

if __name__ == '__main__':
    tk = Tk()
    gui = GUI(tk)
    tk.mainloop() 
```

结果是这样的：

![带有额外空间的画布](https://i.imgur.com/dGLa5VY.png)

在绘制较小的正方形后，我宁愿避免画布右侧和底部的白色排水沟。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T02:15:18.800

画布有一个由`borderwidth`属性控制的边框。它还有另一个由`highlightthickness`属性控制的边框。将这两个都设置为零，您的画布应该与您设置的大小完全相同。

该`border`属性通常用于提供 3D 效果——凸起的边框、下沉的边界或其他几种变体。( `highlightthickness`and `highlightcolor`) 属性定义了一个实心轮廓，用于表示小部件具有键盘焦点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T02:08:45.173

我做了这些改变：

```
self.boardsize = 249
self.sqsize = 50#self.boardsize//5 
```

和

```
top = row * self.sqsize +2
left = col * self.sqsize +2
bottom = row * self.sqsize + self.sqsize
right = col * self.sqsize + self.sqsize 
```

它会正确绘制。您可以看到灰色边框线在所有 4 个边上都是正确的：

![在此处输入图像描述](https://i.stack.imgur.com/XJq1y.jpg)

# javascript - 如何在Javascript中循环十六进制？

> ID：15891945
> 
> 赞同：-2
> 
> 时间：2013-04-09T01:45:21.843
> 
> 标签：javascript, c++, c, hex

在 C 中，输出是我所期望的。在 Javascript 中，输出不是我所期望的。在 Javascript 中，十六进制以十进制而不是十六进制循环。

C：

```
#include<stdio.h>
int main(){
for(int i=0x1000;i<=0x109F;i++){
    printf("%x\n",i);
}
return 0;
} 
```

Javascript：

```
<script type="text/javascript">
for(var i=0x1000;i<=0x109F;i++){
document.write(i+"<br>");
}
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T01:47:03.147

您可以使用以下`toString`方法：

```
document.write(i.toString(16)+"<br>"); //base 16 (hex) 
```

# asp.net - ASP.NET 4.5，ImageButton OnClick 未在 MasterPage 上触发

> ID：15891951
> 
> 赞同：1
> 
> 时间：2013-04-09T01:46:20.723
> 
> 标签：asp.net, onclick, master-pages

我在 MasterPage 中有一个 ImageButton，它没有触发 OnClick 事件。在没有母版页的页面中它可以工作。

[http://www.quotehd.com/default.aspx](http://www.quotehd.com/default.aspx)没有母版页，如果您在搜索中输入“有趣”一词，它可以工作，但如果您尝试从[http://www.quotehd.com/topics](http://www.quotehd.com/topics)搜索它使用母版页它不会触发母版页中的代码。

这是 MasterPage aspx 代码：

```
<asp:ImageButton ID="lnkGo1" runat="server" CssClass="searchsubmit" 
     ImageUrl ="/content/themes/pin/images/search.png" OnClick="lnkGo1_Click" 
     CausesValidation="False" ViewStateMode="Disabled" EnableViewState="False">  
</asp:ImageButton> 
```

C# MasterPage 代码：

```
protected void lnkGo1_Click(object sender, ImageClickEventArgs e)
{
   Response.Redirect("~/quotes/search/words/" + HttpUtility.HtmlEncode(txtSearch1.Text));
} 
```

相同的代码适用于没有母版页的 /default.aspx，但前提是您使用 default.aspx 访问主页

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:52:57.267

我已将此行添加到 MasterPage OnLoad，现在它可以工作了。

```
form1.Action = Request.Url.PathAndQuery; 
```

# matlab - 如何在matlab中提示输入矩阵元素的输入对话框？

> ID：15891956
> 
> 赞同：0
> 
> 时间：2013-04-09T01:46:50.657
> 
> 标签：matlab

我想问有没有什么方法可以让用户在输入对话框中输入矩阵元素（例如 3x3 矩阵），该对话框在 matlab 中以方形方式共有 9 个框。我知道 matlab 有一个 inputdlg 函数，但输入框只会是垂直的。所以我想知道除了使用GUI之外还有其他选择。我的概念就像问用户矩阵大小，然后我会提示矩阵元素对应的框数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-24T22:32:55.810

这就是我所做的（用于求解联立方程），但是我现在的问题是使用矩阵中的数据我不认为这实际上会创建一个矩阵，因为它不会找到 det ` clear clc

```
prompt={'x:','y:','z:'}
dlg_title='MATRIX A'
num_lines=[1 50]
def={'3','4','8'}
A=inputdlg(prompt,dlg_title,num_lines,def)

dlg_title='MATRIX B'
def={'4','3','-3'}
B=inputdlg(prompt,dlg_title,num_lines,def)

dlg_title='MATRIX C'
def={'5','-4','-2'}
C=inputdlg(prompt,dlg_title,num_lines,def)

D=[A,B,C]'` 
```

# java - Cassandra 数据库中的 DateType 列元数据列

> ID：15891964
> 
> 赞同：0
> 
> 时间：2013-04-09T01:47:32.800
> 
> 标签：java, cassandra

我正在使用 Cassandra 数据库。我创建了一个下面的列族

```
create column family USER
with comparator = 'UTF8Type'
and default_validation_class = 'UTF8Type'
and column_metadata = [
                {column_name : account, validation_class : 'UTF8Type'}
                {column_name : lmd, validation_class : 'DateType'}

]; 
```

现在我正在尝试使用插入 Cassandra 数据库`Pelops client`

```
mutator.writeColumns(column_family, String.valueOf(userId),
                        mutator.newColumnList(
                        mutator.newColumn("account", "hello"), 
                        mutator.newColumn("lmd", String.valueOf(new Date().getTime()))                  
                    )); 
```

就我而言，我`DateType`在列族中创建了 lmd，所以我不确定如何`datetype`通过代码添加它。目前我将它添加为字符串，但我需要确保它与`DateType`.

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:50:02.417

好吧，您已经使用 cli 创建了一个列族。现在尝试使用这些

```
SET USER['somekey']['account']='AC-46113';
SET USER['somekey']['lmd']=1365490146534;
LIST USER; 
```

现在你已经使用 pelops 做了同样的事情

```
mutator.writeColumns(column_family, String.valueOf(userId),
                    mutator.newColumnList(
                    mutator.newColumn("account", "hello"), 
                    mutator.newColumn("lmd", Bytes.fromLong(System.currentTimeMillis()))                  
                )); 
```

# asp.net - 使用 LINQ 更新项目

> ID：15891966
> 
> 赞同：0
> 
> 时间：2013-04-09T01:47:40.650
> 
> 标签：asp.net, linq

我希望使用 LINQ 更新项目。我试过这个查询。

```
string option = "new value here";

(jt.SummarySpecs.Select(x => x.DocSpecs)
    .FirstOrDefault()
    .Where(
        y => y.DelItemID == docSpc.DelItemID &&
        y.ItemCode == docSpc.ItemCode
    )
    .FirstOrDefault().FinishingOptionsDesc[0]
) = option; 
```

我希望更新“FinishingOptionDesc”的值，这是一个字符串值的集合，但我只希望更新第一个。

但是上面的代码不起作用。

类属性：

```
"SummarySpecs.cs"
    public DocSpec[] DocSpecs { get; set; }

"DocSpecs.cs"
    public string[] FinishingOptionsDesc { get; set; } 
```

* * *

我唯一关心的是更新 FinishingOptionDesc 第一个字符串。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:58:45.130

阻止此代码段工作的代码部分是`Select(/*...*/)`方法。这会创建一个新的引用，并将执行从表达式树带回对象上下文。

你必须这样写：

```
jt.SummarySpecs
.Where(y => 
    y.DocSpecs.First().DelItemID = docSpc.DelItemID
    && y.DocSpecs.First().ItemCode == docSpc.ItemCode)
.First().DocSpecs.First().FinishingOptionsDesc.First() = option; 
```

它不是很漂亮，但实现目标的唯一方法。要获得更漂亮的代码，请使用 QES：

```
(from item in jt.SummarySpecs
let searchItem = item.DocSpecs.First()
where searchItem.DelItemID = docSpc.DelItemID
&& searchItem.ItemCode = docSpc.ItemCode
select item)
.First().DocSpecs.First().FinishinOptionsDesc.First() = option; 
```

这种方式可确保您在语句结束之前“不离开表达式树”，因此您可以直接修改您的引用，而不会丢失给定的数据。

# c++ - 使用模板时继承不能正常工作

> ID：15891968
> 
> 赞同：3
> 
> 时间：2013-04-09T01:47:51.783
> 
> 标签：c++, templates, inheritance, this

我有继承的问题。我创建了这个例子来或多或少地展示我的问题。问题是，如果我从公开派生自类的类公开派生，那么我必须一直访问原始类中的受保护成员。但是，当我使用模板时，情况似乎并非如此。

事实上，下面的例子在 where 'n++;' 的行上抱怨 说'n'没有在范围内声明。但是，如果我在没有模板的情况下这样做。代码编译得很好。到底是怎么回事？

```
#include<iostream>
template<typename T> 
class base{
 protected:
    T n;
 public:
    T getn();
    base();
};

template<typename T>  
T base<T>::getn(){
   return n; 
}

template<typename T> 
base<T>::base(){
   n = 8; 
}

template<typename T> 
class daddy: public base<T>{
protected: 
public:
};

template<typename T>
class granny: public daddy<T>{
protected:
public:
    T plusone();
};

template<typename T> 
T granny<T>::plusone(){ 
    //this->n = this->n + 1;
   n++;
   return n;
}

int main(){
   granny<int> oldmommy;

   int su = oldmommy.getn();   
   std::cout << su << std::endl;
   su = oldmommy.plusone();
   std::cout << "plusone" << su << std::endl;
   return 0;
} 
```

顺便提一句。告诉我是否应该发布没有模板来比较的代码..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T02:00:42.183

一个快速的解决方法是`this`在变量之前应用：

```
 this->n = this->n + 1;
 return this->n; 
```

原因是编译器不对模板基类成员（`n`在这种情况下，取决于类型 T）做任何假设，以防基类的部分特化不包括其中一些成员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T02:00:35.537

`n`在这里是一个[从属名称](https://stackoverflow.com/questions/1527849/how-do-you-understand-dependent-names-in-c)。您必须明确指出它的`n`来源，否则编译器不知道`n`您指的是哪个（请注意，可能有一些`base`专业化没有名为 的成员`n`）。

您可以使用以下方法实现此目的：

```
this->n; 
```

或者：

```
base<T>::n; 
```

而不是`n`在您的代码中。

# ruby-on-rails - 使用 has_many 访问属性：虽然

> ID：15891969
> 
> 赞同：1
> 
> 时间：2013-04-09T01:47:53.630
> 
> 标签：ruby-on-rails, associations, has-many-through

在下面的代码中，我有两个模型通过`has_many :through`. `Component`模型也是`belongs_to Category`模型。我正在尝试从 a 访问该属性`Category.title`，例如：`Collection``Component``@collection.components[:id].category.title`

在下面的代码“：组件”中放置：

```
[#<Component id: 23, name: "l-shaped-desks", title: "L-Shaped Desks", category_id: 10, created_at: "2013-04-07 00:18:07", updated_at: "2013-04-07 00:18:07">, #<Component id: 25, name: "writing-tables", title: "Writing Tables", category_id: 10, created_at: "2013-04-07 00:18:29", updated_at: "2013-04-07 00:18:29">] 
```

其中每`"#<Component>"`一个都是从生成的复选框中选中的。

问题是我不知道如何访问这些信息。我试过`:components[0].category.title`但得到错误：

```
undefined method `category' for :components:Symbol 
```

**_form.html.haml**

```
= form_for @collection do |f|
  - if @collection.errors.any?
    #error_explanation
      %h1= "#{pluralize(@collection.errors.count, "error")} prohibited this collection from being saved:"
      %ul
        - @collection.errors.full_messages.each do |msg|
          %li= msg

  - Category.products.each_slice(2) do |column|
    .column
      - column.each do |category|
        .column-group
          %h1 
            = category.title
          - category.components.each do |component|
            .checkbox
              = check_box_tag "component#{component.id}", component.id, @collection.components.include?(component), :name => 'collection[component_ids][]'
              = label_tag "component#{component.id}", component.title

  .field
    = f.label :title
    = f.text_field :title
  .field
    = f.label :components
    = f.text_field :components //This will fill a text_input with [#<Component...
    / = f.text_field :components[0].category.title //This does not work
  .actions
    = f.submit 'Save' 
```

**类别.rb**

```
class Category < ActiveRecord::Base
  default_scope order('id ASC')

  CATEGORY_KINDS = [["Product", 0],["Page", 1]]

  scope :products, where(:kind => 0)
  scope :pages, where(:kind => 1)

  attr_accessible   :name, 
                    :title, 
                    :kind,
                    :section, 
                    :component

  has_many          :sections
  has_many          :components

  before_save       :create_name

  private

  def create_name
    self.name = title.parameterize
  end
end 
```

**组件.rb**

```
class Component < ActiveRecord::Base
  default_scope order('components.id ASC')

  attr_accessible         :category_id, 
                          :name, 
                          :title,
                          :collection_ids,
                          :style_ids

  has_many                :collection_components, :dependent => :destroy
  has_many                :collections,   :through => :collection_components

  has_many                :component_styles
  has_many                :styles,        :through => :component_styles

  belongs_to              :category

  validates_presence_of   :category
  validates_presence_of   :title

  before_save             :create_name

  private

  def create_name
    self.name = title.parameterize
  end
end 
```

**集合.rb**

```
class Collection < ActiveRecord::Base
  default_scope order('collections.id ASC')

  attr_accessible               :style_id, 
                                :name, 
                                :title,
                                :component_ids

  has_many                      :collection_components, :include => :component
  has_many                      :components,            :through => :collection_components
  accepts_nested_attributes_for :collection_components, :allow_destroy => true

  belongs_to                    :style

  validates_presence_of         :style
  validates_presence_of         :title
  validates_presence_of         :component_ids

  before_save                   :create_name

  private

  def create_name
    self.name = title.parameterize
  end
end 
```

**集合组件.rb**

```
class CollectionComponent < ActiveRecord::Base
  attr_accessible :collection_id, 
                  :component_id

  belongs_to      :collection
  belongs_to      :component
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T04:16:59.800

如果您尝试编辑相关模型的属性，通常可以`fields_for`为关联模型使用嵌套。[有关详细信息，请参阅Rails Form Helpers 指南](http://guides.rubyonrails.org/form_helpers.html)`fields_for`中的文档。

但是，如果您主要只是对引用`title`关联类别实例的属性的正确方法感兴趣，那么这应该可以工作（用于访问第*一个*组件的类别）：

```
@collection.components.first.category.title 
```

（请注意，我已替换`[0]`为`first`，但它们实际上是相同的。）

# jquery-plugins - cufon.js 与 fabric.js 冲突

> ID：15891986
> 
> 赞同：0
> 
> 时间：2013-04-09T01:50:18.017
> 
> 标签：jquery-plugins, cufon, fabricjs

我正在使用 cufon.js 来呈现一些文本。文本不在页面上也存在的织物画布中。删除fabric.js 可以使文本呈现正常，但是当我放回fabric.js 时会中断。渲染文本的脚本是：

```
<script type="text/javascript">
Cufon.replace('#signature');
</script> 
```

我怎样才能解决这个问题？

**更新：**

这些是我在页面上的脚本链接（fabric.js 是 dist 文件夹中的 all.min.js 版本 1.1.0）

```
<script type="text/javascript" src="../scripts/cufon-yui.js" type="text/javascript"></script>
<script type="text/javascript" src="../scripts/font.js" type="text/javascript"></script>
<script type="text/javascript" src="../scripts/fabric.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:00:41.627

您需要渲染所有字体替换。看看这个：

```
$("#signature").change(function(e){
    var object = canvas.getActiveObject();
    if(object && object.type == "text"){
        object.fontFamily = $(this).val();
        canvas.renderAll();
    }
}); 
```

或者

```
Cufon.replace('#signature', {fontFamily: '<font_name>'}); 
```

检查这个：

[http://jsfiddle.net/ptCoder/tcVUt/](http://jsfiddle.net/ptCoder/tcVUt/)

# c# - WPF：如何使图像一起缩放

> ID：15891988
> 
> 赞同：0
> 
> 时间：2013-04-09T01:51:08.633
> 
> 标签：c#, wpf, bitmapimage, viewbox, uniformgrid

我正在使用视图框将图像动态添加到`UniformGrid`.

```
for (int i = 0; i < count; i++)
{
    var viewbox = new Viewbox();
    var filePath = "myFilePath";

    if (!File.Exists(filePath)) continue;

    var newImage = new Image();
    var bitmapImage = new BitmapImage(new Uri(filePath));
    newImage.Source = bitmapImage;

    viewbox.Child = newImage;
    viewbox.SetValue(Grid.RowProperty, i);

    ImageGrid.Children.Add(viewbox);
} 
```

我遇到的问题是图像大小不同，水平或垂直。

可视化正在发生的事情的好方法。如果屏幕上有两张图片，第一张图片比第二张图片宽和短。当我水平收缩窗口时，第一个图像将独立收缩，其宽度与第二个相同。现在，当我垂直收缩窗口时，第二个图像将独立收缩，直到其高度与第一个相同。

如何在不将视图框拉伸属性设置为填充的情况下使 2 个图像一起缩放？

# mysql - 创建一个包含 num_rows 列的视图 - MySQL

> ID：15891993
> 
> 赞同：8
> 
> 时间：2013-04-09T01:52:04.553
> 
> 标签：mysql, views

我需要创建一个视图，其中有一个名为 row_num 的列，它将在其中插入行号，就像普通表中的自动增量一样。

假设我有这张普通的桌子：

```
| country | name | age | price |
--------------------------------
| US      | john | 22  | 20    |
| France  | Anne | 10  | 15    |
| Sweden  | Alex | 49  | 10    | 
```

等等...

我要创建的视图是：

```
 | country | name | price | row_num |
    ------------------------------------
    | US      | john |  20   |    1    |
    | France  | Anne |  10   |    2    |
    | Sweden  | Alex |  5    |    3    | 
```

等等...

我可以通过一次选择生成 row_num：

```
SELECT @i:=@i+1 AS row_num, testing.country, testing.name, testing.price
FROM testing testing,(SELECT @i:=0) derivedTable
order by name 
```

但我的问题是将上面的查询与创建视图的查询结合起来。这是我正在尝试的组合查询：

```
CREATE OR REPLACE view vwx (country, name, price, num_row) AS SELECT mytable.country, mytable.name, mytable.price, @i:=@i+1 AS row_number
    FROM testing testing,(SELECT @i:=0) derivedTable
    order by name; 
```

我收到以下错误：#1351 - 视图的 SELECT 包含变量或参数

我知道我不能在带有视图的选择中使用选择，但我看不到其他方法可以按照我想要的方式执行此视图，但我确信有办法做到这一点，但我只是不知道如何。可能是函数或过程，但我对它们真的很陌生，所以我不习惯在 mysql 中创建函数或过程。

我希望我说清楚了，否则我很乐意更详细地解释自己。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-02T18:06:40.093

我找到了一个解决方案：

首先创建一个函数：

```
delimiter //

CREATE FUNCTION `func_inc_var_session`() RETURNS int
    NO SQL
    NOT DETERMINISTIC
     begin
      SET @var := @var + 1;
      return @var;
     end
     //

delimiter ; 
```

然后将@var 设置为您要开始的数字。在这种情况下为零。

> 设置@var=0；

然后创建如下视图：

```
CREATE OR REPLACE VIEW myview (place, name, hour, price, counter) 
AS SELECT place, name, hour, price, func_inc_var_session() 
FROM yourtable
WHERE input_conditions_here; 
```

这里的诀窍是您可能会在 counter 列上看到 NULL。如果发生这种情况，请再次将 @var 设置为您的号码，然后再次执行 SELECT *，您将看到计数器列正确填充。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-04T17:43:45.970

我尝试了该`func_inc_var_session`功能的示例。

我使用 mysql`IFNULL`函数解决了会话变量初始化的一个小问题。

下面是增强`func_inc_var_session`功能。

```
CREATE DEFINER=`root`@`localhost` FUNCTION `func_inc_var_session`() RETURNS int(11)
begin
  SET @var := IFNULL(@var,0) + 1;
  return @var;
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-19T13:06:52.823

使用@dazito 的解决方案时，您可能会遇到计数器在查询之间不断增加的问题，例如，当您的应用程序重用会话时，例如使用 JPA / Hibernate。例如：

查询一：

```
| 国家 | 姓名 | 价格 | 行数 |
----------------------------------
| 美国 | 约翰 | 20 | 1 |
| 法国 | 安妮 | 10 | 2 |
| 瑞典 | 亚历克斯 | 5 | 3 |

```

查询 2：

```
| 国家 | 姓名 | 价格 | 行数 |
----------------------------------
| 美国 | 约翰 | 20 | 4 |
| 法国 | 安妮 | 10 | 5 |
| 瑞典 | 亚历克斯 | 5 | 6 |

```

等等

对此的一种解决方案是将主查询与（一次）对计数器函数的调用结合起来，并参数化该函数（下面的“重置”参数），让它知道这是第一次调用。

```
分隔符 //
CREATE FUNCTION `func_inc_var_session`(reset BIT) RETURNS int
    没有 SQL
    不确定的
     开始
      IF 重置 THEN
        SET @var := 0;
      别的
        SET @var := IFNULL(@var,0) + 1;
      万一;
      返回@var；
     结尾
     //
分隔符；

```

现在，您可以在视图查询中调用该函数，将 reset 参数设置为 1 以将函数的计数器变量设置回 0，并使用 0 递增计数器。该函数在加入时只会以 1 作为参数调用一次，如下所示：

```
创建或替换视图 country_view（国家、名称、价格、row_num）
AS SELECT 国家、名称、价格、func_inc_var_session(0)
来自国家
加入 (SELECT func_inc_var_session(1)) r

```

现在，您每次都可以保证第 1、2、3 行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-09T20:07:18.393

或者试试这个-> 创建一个临时表并将您的数据插入其中，如下所示

```
CREATE OR REPLACE TEMPORARY TABLE myview (
    country VARCHAR(250), 
    name VARCHA(50), 
    price VARCHAR(50), 
    row_num int(11)
);

SET @row_num = 0;
INSERT INTO myview (country,name,price,row_num)
    SELECT @row_num:=@row_num+1 
        as country,name,price,row_num 
    FROM testing;

SELECT * FROM myview;

+---------+------+------+-------+---------+
| country | name | age  | price | row_num |
+---------+------+------+-------+---------+
| Sweden  | Alex |   49 |    10 |       1 |
| France  | Anne |   10 |    15 |       2 |
| France  | Anne |   11 |    16 |       3 |
| US      | john |   22 |    20 |       4 |
+---------+------+------+-------+---------+ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T12:35:08.803

尝试将此查询应用于您的视图 -

```
CREATE TABLE testing (
  id int(11) NOT NULL DEFAULT 0,
  country varchar(255) DEFAULT NULL,
  name varchar(255) DEFAULT NULL,
  age int(11) DEFAULT NULL,
  price int(11) DEFAULT NULL,
  PRIMARY KEY (id)
);

INSERT INTO testing(id, country, name, age, price) VALUES
  (1, 'US', 'john', 22, 20),
  (2, 'France', 'Anne', 10, 15),
  (3, 'Sweden', 'Alex', 49, 10),
  (4, 'France', 'Anne', 11, 16);

SELECT
  t1.*, COUNT(*) row_num
FROM testing t1
  LEFT JOIN testing t2
    ON t2.name < t1.name OR (t2.name = t1.name AND t2.id <= t1.id)
 GROUP  BY t1.name, t1.id;

+----+---------+------+------+-------+---------+
| id | country | name | age  | price | row_num |
+----+---------+------+------+-------+---------+
|  3 | Sweden  | Alex |   49 |    10 |       1 |
|  2 | France  | Anne |   10 |    15 |       2 |
|  4 | France  | Anne |   11 |    16 |       3 |
|  1 | US      | john |   22 |    20 |       4 |
+----+---------+------+------+-------+---------+ 
```

*   这个查询不使用任何用户变量，所以它在视图中起作用。
*   ON 子句中的附加条件有助于实现`name`字段中的重复值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-07T21:41:04.907

MySql 从 8.0 版本开始支持`ROW_NUMBER()`创建视图的功能。旧方法（这是对所需行为的模拟）的问题在于，在创建视图时，会`@`混淆`(@row_number:=@row_number + 1)`视图创建的语法并引发 #1351 错误。

```
CREATE OR REPLACE view vwx (country, name, price, num_row) AS 
    SELECT 
        country, 
        name,    
        price,
        ROW_NUMBER() OVER (ORDER BY final_score) row_num
    FROM 
        testing
    ORDER BY 
        name 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-10T08:12:11.853

```
CREATE OR REPLACE view vwx (country, name, price, num_row) AS
SELECT country, name, price, @index := @index + 1 AS num_row
FROM testing, (SELECT @index := 0) temp 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2017-03-07T19:23:18.143

**将行号添加到查询结果 - 无需查看 - 一个查询**

```
SELECT country, name, price, @ID := @ID + 1 AS row_num
FROM testing,
     (SELECT @ID := 0) temp 
```

将以下内容添加到您的 MySQL 连接字符串中：`Allow User Variables=True;`

不要在查询中添加“**交叉连接**”来更新您的 @ID 变量。

注意：尝试在视图中使用它会导致：`View's SELECT contains a variable or parameter`

# python - wxpython：示例中的布局问题

> ID：15891994
> 
> 赞同：0
> 
> 时间：2013-04-09T01:52:05.980
> 
> 标签：python, wxpython

我正在尝试学习 wxPython，但当我从 wiki 运行示例代码时遇到问题：

![在此处输入图像描述](https://i.stack.imgur.com/KhrmD.png)

主框架未正确调整大小。少了什么东西？

我在 Enthought Python Distribution 7.3-2 (Python 2.7.3) 下运行

```
# from http://wiki.wxpython.org/Getting%20Started
import wx
class ExamplePanel(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)

        # create some sizers
        mainSizer = wx.BoxSizer(wx.VERTICAL)
        grid = wx.GridBagSizer(hgap=5, vgap=5)
        hSizer = wx.BoxSizer(wx.HORIZONTAL)

        self.quote = wx.StaticText(self, label="Your quote: ")
        grid.Add(self.quote, pos=(0,0))

        # A multiline TextCtrl - This is here to show how the events work in this program, don't pay too much attention to it
        self.logger = wx.TextCtrl(self, size=(200,300), style=wx.TE_MULTILINE | wx.TE_READONLY)

        # A button
        self.button =wx.Button(self, label="Save")
        self.Bind(wx.EVT_BUTTON, self.OnClick,self.button)

        # the edit control - one line version.
        self.lblname = wx.StaticText(self, label="Your name :")
        grid.Add(self.lblname, pos=(1,0))
        self.editname = wx.TextCtrl(self, value="Enter here your name", size=(140,-1))
        grid.Add(self.editname, pos=(1,1))
        self.Bind(wx.EVT_TEXT, self.EvtText, self.editname)
        self.Bind(wx.EVT_CHAR, self.EvtChar, self.editname)

        # the combobox Control
        self.sampleList = ['friends', 'advertising', 'web search', 'Yellow Pages']
        self.lblhear = wx.StaticText(self, label="How did you hear from us ?")
        grid.Add(self.lblhear, pos=(3,0))
        self.edithear = wx.ComboBox(self, size=(95, -1), choices=self.sampleList, style=wx.CB_DROPDOWN)
        grid.Add(self.edithear, pos=(3,1))
        self.Bind(wx.EVT_COMBOBOX, self.EvtComboBox, self.edithear)
        self.Bind(wx.EVT_TEXT, self.EvtText,self.edithear)

        # add a spacer to the sizer
        grid.Add((10, 40), pos=(2,0))

        # Checkbox
        self.insure = wx.CheckBox(self, label="Do you want Insured Shipment ?")
        grid.Add(self.insure, pos=(4,0), span=(1,2), flag=wx.BOTTOM, border=5)
        self.Bind(wx.EVT_CHECKBOX, self.EvtCheckBox, self.insure)

        # Radio Boxes
        radioList = ['blue', 'red', 'yellow', 'orange', 'green', 'purple', 'navy blue', 'black', 'gray']
        rb = wx.RadioBox(self, label="What color would you like ?", pos=(20, 210), choices=radioList,  majorDimension=3,
                         style=wx.RA_SPECIFY_COLS)
        grid.Add(rb, pos=(5,0), span=(1,2))
        self.Bind(wx.EVT_RADIOBOX, self.EvtRadioBox, rb)

        hSizer.Add(grid, 0, wx.ALL, 5)
        hSizer.Add(self.logger)
        mainSizer.Add(hSizer, 0, wx.ALL, 5)
        mainSizer.Add(self.button, 0, wx.CENTER)
        self.SetSizerAndFit(mainSizer)

    def EvtRadioBox(self, event):
        self.logger.AppendText('EvtRadioBox: %d\n' % event.GetInt())
    def EvtComboBox(self, event):
        self.logger.AppendText('EvtComboBox: %s\n' % event.GetString())
    def OnClick(self,event):
        self.logger.AppendText(" Click on object with Id %d\n" %event.GetId())
    def EvtText(self, event):
        self.logger.AppendText('EvtText: %s\n' % event.GetString())
    def EvtChar(self, event):
        self.logger.AppendText('EvtChar: %d\n' % event.GetKeyCode())
        event.Skip()
    def EvtCheckBox(self, event):
        self.logger.AppendText('EvtCheckBox: %d\n' % event.Checked())       

app = wx.App(False)
frame = wx.Frame(None)
panel = ExamplePanel(frame)
frame.Show()
app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T02:31:09.847

啊哈，想通了。在 frame.Show() 之前缺少对 frame.Fit() 的调用。

代替

```
app = wx.App(False)
frame = wx.Frame(None)
panel = ExamplePanel(frame)
frame.Show()
app.MainLoop() 
```

它应该是

```
app = wx.App(False)
frame = wx.Frame(None)
panel = ExamplePanel(frame)
frame.Fit()
frame.Show()
app.MainLoop() 
```

# php - 尝试保存用户选择数据时出错

> ID：15891998
> 
> 赞同：0
> 
> 时间：2013-04-09T01:52:42.903
> 
> 标签：php, forms, html-select

我试图保存用户在“POST”表单操作在同一页面上运行后选择的状态，但我不断收到意外的 T_IS_EQUAL，期待“}”错误。我错过了什么？

我有以下代码：

```
<select style='width:50px; float:left; position:relative; left:-160px; top:2px; border-radius:3px; ' project='statelist' class='statelist' name='statelist'>

$state = array( 'AZ','AL','AK','AR', 'CA','CO', 'CT','DE','DC','FL', 'GA', 'HI','ID','IL', 'IN','IA','KS','KY','LA','ME','MT','NV','NH','NJ','NM','NY','NC', 'ND','OH', 'OK', 'OR', 'MD','MA', 'MI','MN','MS', 'MO','PA', 'RI', 'SC','SD','TN', 'TX', 'UT', 'VT', 'VA','WA', 'WV','WI','WY');

foreach($state as $name) {
$selected = '';
if {$_POST['statelist'] == $name}{
$selected = 'selected';}
echo '<option value="'.$name.'"'.$selected.">{$name}</option>\n";
}
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T01:54:31.837

你太高兴了。

```
if {$_POST['statelist'] == $name}{ 
```

应该

```
if ($_POST['statelist'] == $name){ 
```

# javascript - 在 javascript1.3 之前使用 === 的后果是什么？

> ID：15891999
> 
> 赞同：0
> 
> 时间：2013-04-09T01:52:48.123
> 
> 标签：javascript, operators, backwards-compatibility

该`Strict equal`运算符仅[出现](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)在 Javascript1.3 和 ECMAscript 第 3 版中。

我拥有的最古老的浏览器是 IE6，它[实现](http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/16907f1c-6f59-4c68-b763-d6e3028903bd/)了1.3。所以我没有任何实用的方法来测试`===`这些浏览器的结果。

如果我使用`===`javascript1.2 浏览器会发生什么？

他们今天仍然存在到我应该关心的程度吗？

编辑 1：人们建议我应该只用`<script language="JavaScript1.2">`. 好吧，它不是那样工作的。

我在现代 Firefox 和 Chrome 上执行了这个：

```
<script language="JavaScript1.2">
    alert( "1" === 1 );
</script> 
```

它只是返回`False`。这绝对不是 javascript1.2 上会发生的事情（它将是语法错误或`True`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T02:01:08.307

你真的，真的不应该关心他们。我们谈论的是 Netscape 4 的早期版本，它于 1997 年发布，现在已经没有人使用了。老实说，如果您必须编写与此类浏览器兼容的代码，那么您会遇到比严格相等运算符更大的问题。

所以，除非你有一个真正的用例——我真的希望你没有——我才不在乎。我可能会威胁诸如“未启用 JavaScript”之类的浏览器，向他们显示网站的纯文本版本或警告消息以升级他们的浏览器。