# StackOverflow 问答 12926000-12926999

# windows - 如何使用命令行（wmi、netsh、vbscript 等）更改网络适配器的绑定顺序

> ID：12926002
> 
> 赞同：1
> 
> 时间：2012-10-17T01:54:58.113
> 
> 标签：windows, registry, wmi, windows-administration

我有几个连接到不同网络的网络连接。我想确保某个网络连接位于列表的顶部。所以我想以编程方式对 Windows 的网络适配器的绑定顺序进行脚本更改（win 2008 服务器和 win 2003 服务器）

有没有办法以编程方式更改绑定顺序？只需使用 wmi、netsh、vbscript、编辑 regstry 或其他脚本或命令行工具。

我发现编辑注册表注册表 HKLM\system\currentcontrolset\services\TCPIP\linkage\ -> 绑定值，是 Windows 2008 服务器上的一种方式。使用“netstat -rn”可以发现绑定顺序发生了变化。但是在网络高级 UI(ncpa.cpl) 上，顺序没有改变。并且看起来它在 Windows 2003 服务器上不起作用。

有人知道如何使用命令行更改网络适配器的绑定顺序吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-21T13:44:01.747

这看起来就是你所追求的： [http ://realworldwindows.blogspot.com/2006/11/sharing-network-provider-order-in.html](http://realworldwindows.blogspot.com/2006/11/changing-network-provider-order-in.html)

或者，您可以轻松编写一个批处理文件来禁用主适配器，以便您希望成为主适配器的适配器接管。然后重新启用原来的。

例子：

```
@echo off
netsh interface set interface "Local Area Connection" DISABLED
:: do something here on the secondary connection
netsh interface set interface "Local Area Connection" ENABLED 
```

# html - 我可以仅使用 html 和 css 自动缩小图片下方的文本吗？

> ID：12926003
> 
> 赞同：1
> 
> 时间：2012-10-17T01:55:18.733
> 
> 标签：html, css

我需要自动缩小图像下方的文本包装宽度。

例如：

```
<figure>
    <img src="mypicture.jpg" />
    <figcaption>
        This is a long description.This is a long description.This is a long description.
    </figcaption>
</figure> 
```

现在我想要一个`border`around `img`and `figcaption`，因为我有很多不同宽度的图像。所以我想自动缩小`figcaption`宽度以适应图像的宽度。也就是说，如果我有一个宽度为 100 像素的图像，那么我`figcaption`也想要我的 100 像素。

你能告诉我我是否可以在没有 js 的情况下做到这一点，只使用纯 html 和 css 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:24:23.837

它确实需要一些技巧。您可以将容器显示设置为**table**并给它一个小宽度。它将自动对齐其内容宽度（如表格）。

这是一个[例子](http://jsfiddle.net/8jwaU/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:33:56.440

```
figure {
    display: table;
}
.page-content figure figcaption {
    display: table-caption;
    caption-side: bottom;
} 
```

这完成了事情。如果我使用 css 指定固定图像，@Chris Lee 的答案是正确的。对于我的情况，我不想指定每个图像的宽度，因为它的数量很大并且它们的宽度是随机的。

顶级CSS对我很有用。

# c# - 在匿名方法中配置 Timer

> ID：12926005
> 
> 赞同：0
> 
> 时间：2012-10-17T01:55:32.747
> 
> 标签：c#, .net, timer, dispose, anonymous

我有一段代码会被相对频繁地调用。在它被调用之前，我需要一个 2000 毫秒的延迟。

想到的第一件事是每次调用该方法时创建/处理一个计时器。

为此，我使用了一个计时器（参见代码）。我的问题是......在下面的匿名方法中调用 Dispose 有任何危险/问题吗？更好的方法的建议？

执行以下操作有什么缺点吗？馊主意？

```
delayTimer = new Timer() { Interval = 2000 };
{
    delayTimer.Tick += (sender2, e2) => 
    { 
        ((Timer)sender2).Stop();     
        MessageBox.Show("Do something after 2000ms"); 
        delayTimer.Dispose(); 
    };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:42:06.997

非常奇怪的任务，但还可以。

如果你真的需要这样做，你真的想使用一个计时器，并且那个代码块真的会被非常频繁地调用，而不是你应该考虑使用一个计时器缓存。

每次调用代码块时，您应该检查缓存是否包含空闲计时器。如果是，则仅使用第一个可用的，否则，创建一个新的并将其放入缓存中。此外，您将需要另一个计时器，该计时器将一直工作，并会定期检查缓存中未使用的计时器。如果某些计时器或计时器在 10 秒内未使用，则将其丢弃并从缓存中删除。这种方法将显着减少创建的计时器实例的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T03:58:49.843

仅当您非常频繁地创建计时器（每秒数百次）时才需要缓存，因为多次创建和处置诸如 Timer 之类的重对象（它使用一些系统资源）可能会导致性能问题。但是从您的详细描述来看，很明显您不会经常创建计时器，因此您可以保留您的解决方案。[但是您可以使用RX 的](http://msdn.microsoft.com/en-us/data/gg577609) [Interval](http://msdn.microsoft.com/en-us/library/hh229027%28v=vs.103%29.aspx)可观察集合而不是使用计时器，并且您的所有代码都将缩短为 1 个字符串：

```
Observable.Interval(TimeSpan.FromSeconds(2)).Take(1).Subscribe(_ => MessageBox.Show("Do something after 2000ms")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T22:45:56.417

您可以做的不同的一件事是将计时器的 Dispose 移到匿名方法的前面。这样，即使您稍后在方法中抛出异常，您仍然已 Disposed 计时器。我以前使用过这种模式，这是一种获得延迟回调的相当干净的方法。

如果您使用 C#5，有一个非常好的[Task.Delay](http://msdn.microsoft.com/en-us/library/hh160377.aspx)方法，您可以等待在异步方法中获取计时器回调。这通常用于结合调用 WaitAny 来实现超时，如下所示：

```
 public static async Task WithTimeout(this Task task, int timeout, string timeoutMessage = null, params object[] args)
    {
        var timeoutTask = Task.Delay(timeout);
        if (await Task.WhenAny(task, timeoutTask) == timeoutTask)
            throw new TimeoutException(timeoutMessage == null ? "Operation timed out" : string.Format(timeoutMessage, args));

        await task;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T23:41:25.383

使用您的代码创建一千个计时器时，我没有任何严重的性能问题。

在匿名方法中处理 a `Timer`（或 any ）完全没有问题。`IDisposable`

但是，您的代码并不是以最好的方式编写的。试试这个实现：

```
 var delayTimer = new Timer()
    {
        Interval = 2000,
        Enabled = true,
    };
    EventHandler tick = null;
    tick = (_s, _e) => 
    { 
        delayTimer.Tick -= tick;
        delayTimer.Stop();     
        delayTimer.Dispose(); 
        MessageBox.Show("Do something after 2000ms");
    };
    delayTimer.Tick += tick; 
```

在尝试处理计时器之前分离事件总是一个好主意。事实上，可能有很多次未能分离不会让 GC 正确清理，并且您可能会出现内存泄漏。

不过，我确实喜欢 Rx 对这个问题的回答是最干净的方法。尽管使用 Rx 不会编组 UI 线程上的回调，除非您这样做：

```
Observable
    .Timer(TimeSpan.FromSeconds(2.0))
    .ObserveOn(this) // assuming `this` is your form
    .Subscribe(_ => MessageBox.Show("Do something after 2000ms")); 
```

简单得多。

# ios - 来自核心数据的随机 URL 网站地址，其中包含要在 iOS 的 UIImage 中显示的图片？

> ID：12926010
> 
> 赞同：0
> 
> 时间：2012-10-17T01:56:10.910
> 
> 标签：ios, core-data, uiimage

我是使用 xcode 的新手，所以任何信息或链接都会有所帮助。如果我在 coredata 中有一个 RANDOM 网站 url，我将如何指导我的 UIImage 从该网站获取照片以在 iOS 中显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:31:16.163

假设`imageURL`是`NSString *`您保存 URL 的 ivar 或属性。要获取图像，这应该可以工作：

```
NSURL *url = [NSURL URLWithString:imageURL];
NSData *imageData = [NSData dataWithContentsOfURL:url];
UIImage *myImage = [UIImage imageWithData: imageData]; 
```

当然，您应该添加一些错误检查，但这应该会让您进入正确的方向。

# c - C - irc 机器人骨架

> ID：12926012
> 
> 赞同：0
> 
> 时间：2012-10-17T01:56:15.053
> 
> 标签：c, winapi, bots, irc

```
#include <winsock2.h>
#include <stdio.h>

const int PORT = 6667;
const char *SERVER = "irc.freenode.org";
const char *CHAN = "#channela";
const char *NICK = "loveMilk";

const int MAX_BUFF_SIZE = 512;

int sock_conn(SOCKET *socketn, const char *HOST, int portn);
int sock_send(SOCKET *socketn, char* msg, ...);

int main(int argc, char *argv[])
{
    WSADATA wsadata;
    char buff[MAX_BUFF_SIZE];
    char oBuff[MAX_BUFF_SIZE];
    int buffRec;

    if (WSAStartup(MAKEWORD(2,2), &wsadata) != 0)
        return 0;

    SOCKET sock;

    if(sock_conn(&sock, SERVER, PORT) != 0)
    {
        WSACleanup();
        return 0;
    }

    printf("connected.\n");

    sock_send(&sock, "USER %s \"\" \"127.0.0.1\" :%s\r\n", NICK, NICK);
    sock_send(&sock, "NICK %s\r\n", NICK);
    Sleep(100);

    sock_send(&sock, "JOIN %s\r\n", CHAN);
    printf("Joined channel.\n");

    while(1)
    {
        memset(buff, 0, MAX_BUFF_SIZE);
        memset(oBuff, 0, MAX_BUFF_SIZE);

        buffRec = recv(sock, buff, MAX_BUFF_SIZE, 0);
        if((buffRec == 0) || (buffRec == SOCKET_ERROR)) break;

        if(buff[0] != ':')
        {
            strcpy(oBuff, "PONG :");
            printf("PONG");
            sock_send(&sock, oBuff);
        }
        else
        {
            if(strstr(buff, "PRIVMSG"))
            {
                int i, num = 0;
                for(i = 0; i < strlen(buff); ++i) if(buff[i] = ' ') ++num;
                char** parts = malloc(sizeof(char*) * num);
                char *p;
                p = strtok(buff, " ");
                int j = 0;
                while(p != NULL)
                {
                    parts[j] = p;
                    j++;
                    p = strtok(NULL, " ");
                }

                free(parts);
            }
        }
    }
    closesocket(sock);
    return 1;
}

int sock_conn(SOCKET *socketn, const char *HOST, int portn)
{
    WSADATA wsadata;
    SOCKADDR_IN sockA;
    LPHOSTENT hostE;

    if(WSAStartup(MAKEWORD(2,2), &wsadata) == -1) return -1;
    if(!(hostE = gethostbyname(HOST)))
    {
        WSACleanup();
        return -1;
    }
    if ((*socketn = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP)) == INVALID_SOCKET)
    {
        WSACleanup();
        return -1;
    }

    sockA.sin_family = AF_INET;
    sockA.sin_port = htons(portn);
    sockA.sin_addr = *((LPIN_ADDR)*hostE->h_addr_list);

    if(connect(*socketn, (LPSOCKADDR)&sockA, sizeof(struct sockaddr)) == SOCKET_ERROR)
    {
        WSACleanup();
        return -1;
    }
}

int sock_send(SOCKET *socketn, char* msg, ...)
{
    char buff[MAX_BUFF_SIZE];
    va_list va;
    va_start(va, msg);
    vsprintf(buff, msg, va);
    va_end(va);
    send(*socketn, buff, strlen(buff), 0);
    return 1;
} 
```

如果我在它崩溃`buff`后尝试打印。`if(strstr(buff, "PRIVMSG"))`

`strtok`如果我尝试达到它，则while将无法正常工作`parts[0]`。

我试图打印`parts[0]`，但什么也没显示，在 while 循环期间尝试打印，什么也没显示。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:01:33.767

你不会终止你的字符串！

编辑接收部分如下：

```
buffRec = recv(sock, buff, MAX_BUFF_SIZE, 0);
if((buffRec == 0) || (buffRec == SOCKET_ERROR)) break;

/* New line: Terminate buffer as a string */
buff[buffRec] = '\0'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T18:44:03.710

正如另一个答案指出的那样，字符数组必须以 '\0' 结尾才能被视为字符串。我认为 C 不区分两者，但你需要 '\0' 来表示字符串的结尾。这可能就是为什么`strstr(buff, "PRIVMSG"))`不返回任何东西的原因。它可能默认为 null （因此不满足您的`if`），因为它认为它没有被传递一个字符串。

'strtok(string, delimiter)' 使用分隔符将输入字符串分解为标记。在这里，您已将 NULL 作为其字符串传递给它，并将 " " 作为其分隔符。我不熟悉许多字符串函数（我自己还在学习 C），但我认为这是您代码中的错误用法。

`parts[]`您提供的代码中似乎没有定义。它的第一个用途是您尝试在其中存储数据以供内部`while`循环使用。程序中是否还有其他未显示的部分？

# c - -fpic 与 -fPIC powerpc 混淆

> ID：12926013
> 
> 赞同：2
> 
> 时间：2012-10-17T01:56:26.970
> 
> 标签：c, powerpc

我正在尝试使用一些更简单的代码重现我遇到的问题。我编写了一个小脚本来生成一个如下所示的 C 文件：

```
int SYM_0 = 0;
int SYM_1 = 1;
int SYM_2 = 2;
int SYM_3 = 3;
int SYM_4 = 4;
.
.
.
int SYM_16384 = 16384; 

int main() {
  int sum = 0;
  sum += SYM_0;
  sum += SYM_1;
  sum += SYM_2;
  sum += SYM_3;
  sum += SYM_4;
  .
  .
  .
  sum += SYM_16384;
  return sum;
} 
```

所以基本上 16385 个全局变量。当我现在用 -fpic 编译它时，它编译没有错误。但是，当我使用 -fPIC 编译时，我得到：

```
/tmp/ccCB1pty.s: Assembler messages:
/tmp/ccCB1pty.s:229412: Error: operand out of range (0x00008000 is not between 0xffff8000 and 0x00007fff) 
```

我很困惑，因为根据我的阅读，-fPIC 应该允许最大数量的 GOT 条目，每个函数有 16k 个条目，其中 -fpic 总共有 16k 个条目。那么，为什么我会得到 fPIC 而不是 fpic 的错误？

# java - 如何命名我自己项目的包？

> ID：12926016
> 
> 赞同：4
> 
> 时间：2012-10-17T01:57:12.323
> 
> 标签：java

常见的[命名约定](http://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html)是：

```
[com/org/...].[companyName/organizationName/....].[projectName] 
```

我曾经为自己的项目提供我喜欢的任何包名称。个人项目是否存在任何命名约定？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T02:01:23.753

您可以为您的个人、私人项目选择您喜欢的任何命名约定。

但是，我建议尽可能坚持标准的 Java 命名约定：

*   如果您将来发布代码，它将有助于避免命名空间冲突
*   遵循标准做法总是好的（如果只是为了保持良好的习惯！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T02:02:27.283

与其说是使用公司或其他组织的名称，不如说是使用**域名**。域通常以公司命名，但许多开发人员拥有自己的私有域名，用于在个人项目中命名 Java 包。因此，相同的约定可以应用于所有包裹，无论是个人包裹还是其他包裹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T02:02:42.363

不，这是标准的。这是因为，任何现有的域将始终是唯一的。这也保证了包名称的唯一性。

所以我建议依赖现有域进行打包是一个很好的做法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T03:38:56.167

只要您不发布您的软件，任何冲突都与您自己无关。如果您有个人域名，我建议您使用它。否则，弥补一些你认为不太可能发生冲突的东西。

当您决定发布您的软件时，最好为您的项目获取一个域名，或者我们根据（例如）您发布源代码的地方的 DNS 名称获取一个真实或虚构的域名；例如“net.sourceforge.myproject” ... 其中“myproject”是您的官方 sourceforge 项目名称。

# redirect - 使用 webapp 的 web.xml 重定向到 SSL 的登录页面

> ID：12926020
> 
> 赞同：0
> 
> 时间：2012-10-17T01:57:21.817
> 
> 标签：redirect, ssl, tomcat7, web.xml

我有一个在 Tomcat 7 上运行的 Web 应用程序，并且通过直接使用 https 和适当的端口，我已经成功地获得了 SSL 和基于表单的身份验证。但是，我希望登录页面需要 SSL，如果我导航到我的 Web 应用程序的根目录，它似乎无法正常工作。例如，如果我转到`http://localhost:8080/ProjectManagementSystem/login.html`它会重定向到 SSL，但如果我转到`http://localhost:8080/ProjectManagementSystem`则不会，后者会重定向到登录页面，但不会更改为 SSL。

如果不将登录页面移动到它自己的目录（如在[这个问题](https://stackoverflow.com/questions/1840211/setup-ssl-for-form-login-only-on-tomcat-webapp)中），这是否可能？

web.xml 中的相关部分是：

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>PMS</web-resource-name>
        <url-pattern>/login.html</url-pattern>
    </web-resource-collection>
    <user-data-constraint>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
</security-constraint>

<login-config>
        <auth-method>FORM</auth-method>
        <realm-name>ProjectManagementSystem</realm-name>
        <form-login-config>
                <form-login-page>/login.html</form-login-page>
                <form-error-page>/error.html</form-error-page>
        </form-login-config>
</login-config> 
```

我尝试了许多不同的配置（例如添加额外的 url 模式，如 /），但是当我转到 web 应用程序的根目录时，无法重定向任何内容。我真的很感激知道这是不可能的，或者我只是做错了什么。谢谢。

ETA：我实际上继续尝试将 login.html 移动到 login/login.html 并将其更改为`<url-pattern>/login/*</url-pattern>`，但它仍然无法正常工作。所以我想我一定做错了什么，但我一辈子都想不通是什么。

ETA2：我也尝试过，`<url-pattern>/*</url-pattern>`但这些都没有奏效......`<url-pattern>*</url-pattern>``<url-pattern>*.html</url-pattern>`

ETA3：我也尝试更改 web-resource-name，以防它与 web.xml 的另一部分冲突，但这仍然不起作用。我快没主意了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T08:16:26.540

我让它在 JBOSS 7.1.1 中工作，如下所示：

```
 <security-constraint>
     <web-resource-collection>
         <web-resource-name>*</web-resource-name>
         <url-pattern>/logon.jsp</url-pattern>
         <url-pattern>/logonReconnect.jsp</url-pattern>
         <url-pattern>/logoff.do</url-pattern>
     </web-resource-collection>
    <user-data-constraint>
       <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
    </security-constraint> 
```

例如，有 3 个页面允许登录，加上standalone.xml 中的 SSL 配置，这会强制登录页面和会话使用 SSL，但不会对其他内容施加限制。这是为了解决 IE8 和更早版本中的一种奇怪问题，如果我们对所有内容设置约束，活动内容（热点）将被禁用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T13:25:19.780

我有同样的问题：只有根页面没有重定向到 https，所有其他页面都这样做了。我设法通过在安全约束中使用两个 url 模式来修复它，比如

`<security-constraint> <web-resource-collection> <web-resource-name>PMS</web-resource-name> <url-pattern>*.xhtml</url-pattern> <url-pattern>/</url-pattern> </web-resource-collection> <user-data-constraint> <transport-guarantee>CONFIDENTIAL</transport-guarantee> </user-data-constraint> </security-constraint>`

# c++ - 使用 UDP 和 Boost ASIO 的文件套接字 I/O

> ID：12926026
> 
> 赞同：4
> 
> 时间：2012-10-17T01:58:10.443
> 
> 标签：c++, boost, udp, boost-asio

因此，我尝试在我的 FreeBSD 服务器上将 boost.log 与 syslog sink 一起使用，该服务器运行 rsyslogd 并在文件套接字上侦听 UDP 数据。显然这适用于 FreeBSD 领域。实际上，文件套接字是一个 dgram 套接字（telnet 到文件套接字是在 FreeBSD 中工作的另一件事）：

```
$ telnet /var/run/log
Trying /var/run/log...
/var/run/log: Protocol wrong type for socket 
```

无论如何，boost.log 不会与文件套接字通信，只会与 IP 地址通信。我的计划是在我的应用程序中继到文件套接字的常规基于 IP 的 UDP 服务器之间代理信息。从理论上讲，这应该可以正常工作。

但是，我找不到任何方法让 ASIO 通过 UDP 与文件套接字甚至文件套接字进行通信。我知道可能有使用 ASIO 处理文件 I/O 的方法，但这似乎是一个很难的谷歌搜索 - 没有相关的东西出现。充其量只有少数东西（在这个站点上）必须处理 Windows 文件 I/O 和 ASIO。

理想情况下，我会寻找这样的东西（虽然这根本不存在）：

```
socket.send_to(boost::asio::buffer(data, length),
               boost::asio::ip::udp::endpoint(boost::asio::ip::file_address("/var/run/log"), port); 
```

但我会接受任何可行的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T02:27:06.750

您正在寻找[`local::datagram_protocol::endpoint`](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/local__datagram_protocol/endpoint.html)和[`local::datagram_protocol::socket`](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/local__datagram_protocol/socket.html)。

# jquery - 如何从 KnockoutJS 中的模型数组中删除项目

> ID：12926030
> 
> 赞同：1
> 
> 时间：2012-10-17T01:58:58.047
> 
> 标签：jquery, knockout.js

我已经为此挣扎了一段时间，我需要一些帮助。我有一个用于渲染视图的 KO 模型和视图模型。在这种情况下，对象是一个带。这个乐队有一系列可观察的专辑。我只是不知道如何从乐队模型中删除专辑。

```
function band(item) {
    var self = this;
    self.name = ko.observable(item.name);
    self.country = ko.observable(item.country);
    self.state = ko.observable(item.state);
    self.city = ko.observable(item.city);
    self.emailAddress = ko.observable(item.emailAddress);
    self.albums = ko.observableArray(item.albums);
}

function User() {
    var self = this;
    self.bands = ko.observableArray([]);
    self.singleBand = ko.observable();

    //Get Bands from data source and create new models to add to bands array
    $.getJSON("/api/band", function (allData) {       
        $.each(allData, function (index, item) {
            self.bands.push(new band(item));
        });
    });

    //function to get a single band from a rendered list
    self.getThisBand = function (item) {
        self.bands = ko.observableArray(null);
        self.singleBand(item); 
    };

    //remove band from singleBands' album array
    self.removeAlbum = function (albumToDelete) {

        //how to delete album from band model
    };
}

ko.applyBindings(new User()); 
```

逻辑非常简单，我得到一个乐队列表并将它们绑定到 UI 中的列表（没有问题）。当我在 UI 中单击乐队名称时，我会加载 getThisBand 方法并填充 UI（同样没有问题）。我已将 singleBand.albums 数组绑定到一个列表，并且该列表具有 femoveAlbum onclick 函数。传递给函数的数据也是正确的对象。

我缺少一些基本的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:03:12.557

看起来`self.singleBand()`将等于当前波段，因此在您的`removeAlbum`函数中您可以执行以下操作：

```
//remove band from singleBands' album array
self.removeAlbum = function (albumToDelete) {
    var band = self.singleBand();
    band.albums.remove(albumToDelete);
}; 
```

# javascript - 使用纯 JavaScript 而非 jQuery 使 IFrame 可调整大小

> ID：12926032
> 
> 赞同：-1
> 
> 时间：2012-10-17T01:59:25.477
> 
> 标签：javascript, html, resizable

我有 iframe

```
<iframe class="myframe" src="some_page.html" width="800px" height="600px" /> 
```

我如何使其可调整大小与`<textarea></textarea>`标签可调整大小的方式相同？

我不想只使用 jQuery，请只使用 JavaScript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T02:05:44.600

以下是如何做到这一点的总体思路：

*   在调整大小目标上的 mousedown 上：
    *   创建一个蒙版并将其放在整个窗口上
    *   保存鼠标坐标
    *   保存 iframe 的当前尺寸
*   在面具上的 mousemove 上：
    *   获取新坐标
    *   将它们与起始坐标进行比较
    *   将差异添加到 iframe 的起始尺寸并调整 iframe 的宽度和高度
*   在面具上的 mouseup 上：
    *   取下面具

试一试，如果您有任何更具体的问题，请告诉我。

# django - Django-taggit prefetch_related

> ID：12926036
> 
> 赞同：7
> 
> 时间：2012-10-17T02:00:34.207
> 
> 标签：django, django-taggit

我现在正在构建一个基本的时间记录应用程序，并且我有一个使用 django-taggit 的 todo 模型。我的 Todo 模型如下所示：

```
class Todo(models.Model):
    project = models.ForeignKey(Project)
    description = models.CharField(max_length=300)
    is_done = models.BooleanField(default=False)
    billable = models.BooleanField(default=True)
    date_completed = models.DateTimeField(blank=True, null=True)
    completed_by = models.ForeignKey(User, blank=True, null=True)
    tags = TaggableManager()

    def __unicode__(self):
        return self.description 
```

我正在尝试获取项目中所有 Todos 的唯一标签列表，并且我已经设法使用集合理解使其工作，但是对于项目中的每个 Todo，我必须查询数据库以获取标签。我的理解是：

```
unique_tags = { tag.name.lower() for todo in project.todo_set.all() for tag in todo.tags.all() } 
```

这很好用，但是对于项目中的每个待办事项，它都会运行一个单独的查询来获取所有标签。我想知道是否有任何方法可以执行类似于 prefetch_related 的操作，以避免这些重复查询：

```
unique_tags = { tag.name.lower() for todo in project.todo_set.all().prefetch_related('tags') for tag in todo.tags.all() } 
```

运行前面的代码会给我错误：

```
'tags' does not resolve to a item that supports prefetching - this is an invalid parameter to prefetch_related(). 
```

我确实看到有人在这里问了一个非常相似的问题：[Optimize django query to pull foreign key and django-taggit relationship](https://stackoverflow.com/questions/12204511/optimize-django-query-to-pull-foreign-key-and-django-taggit-relationship)但它看起来并没有得到明确的答案。我希望有人可以帮助我。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-10T06:56:28.043

Taggit 现在`prefetch_related`直接支持标签字段（在 0.11.0 及更高版本中，发布于 2013-11-25）。

[此拉取请求](https://github.com/alex/django-taggit/pull/140)中引入了此功能。在[它的测试用例中](https://github.com/alex/django-taggit/pull/140/files#diff-61d51a325171d97c8a56e59ea525339bR344)，请注意在使用 预取标签后`.prefetch_related('tags')`，还有 0 个额外的查询用于列出标签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T10:21:16.390

有点骇人听闻的解决方案：

```
ct = ContentType.objects.get_for_model(Todo)
todo_pks = [each.pk for each in project.todo_set.all()]
tagged_items = TaggedItem.objects.filter(content_type=ct, object_id__in=todo_pks)   #only one db query
unique_tags = set([each.tag for each in tagged_items]) 
```

### 解释

我说这是 hackish，因为我们必须使用 taggit 在内部使用的 TaggedItem 和 ContentType。

Taggit 没有为您的特定用例提供任何方法。原因是因为它是通用的。taggit 的目的是可以标记任何模型的任何实例。因此，它为此使用了 ContentType 和 GenericForeignKey。

taggit 内部使用的模型是 Tag 和 TaggedItem。模型标签只包含标签的字符串表示。TaggedItem 是用于将这些标签与任何对象相关联的模型。由于标签应该与任何对象相关联，因此 TaggedItem 使用模型 ContentType。

taggit 提供的 api 如*tags.all()*、*tags.add()*等在内部使用 TaggedItem 和此模型上的过滤器为您提供特定实例的标签。

因为，您的要求是获取特定对象列表的所有标签，我们必须使用 taggit 使用的内部类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-27T08:31:52.710

使用[django-tagging](https://code.google.com/p/django-tagging/)和方法 usage_for_model

```
 def usage_for_model(self, model, counts=False, min_count=None, filters=None):
    """
    Obtain a list of tags associated with instances of the given
    Model class.

    If ``counts`` is True, a ``count`` attribute will be added to
    each tag, indicating how many times it has been used against
    the Model class in question.

    If ``min_count`` is given, only tags which have a ``count``
    greater than or equal to ``min_count`` will be returned.
    Passing a value for ``min_count`` implies ``counts=True``.

    To limit the tags (and counts, if specified) returned to those
    used by a subset of the Model's instances, pass a dictionary
    of field lookups to be applied to the given Model as the
    ``filters`` argument.
    """ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-03T15:44:38.613

比akshar 的回答稍微不那么骇人听闻，但只是稍微......

只要您自己遍历 tagged_item 关系，您就可以使用 prefetch_related ，使用该子句`prefetch_related('tagged_items__tag')`。不幸的是，`todo.tags.all()`不会利用该预取-“标签”管理器最终仍会执行自己的查询-因此您也必须跨过 tagged_items 关系。这应该做的工作：

```
unique_tags = { tagged_item.tag.name.lower()
    for todo in project.todo_set.all().prefetch_related('tagged_items__tag')
    for tagged_item in todo.tagged_items.all() } 
```

# c# - Gridview 中的 List<> 启动时会创建列，但 Dictionary<> 不会。(WPF)

> ID：12926040
> 
> 赞同：1
> 
> 时间：2012-10-17T02:01:12.663
> 
> 标签：c#, wpf, list, gridview, dictionary

将 List<> 设置为 Gridview(WPF) 的 itemssource 时，会在应用程序启动时创建列。

请参阅以 List 作为 itemssource 的示例代码。这会在运行程序时正确生成列：“文件”、“持续时间”和“状态”，而没有将任何对象添加到列表中。

```
 public MainWindow()
         {
          InitializeComponent();
          DataGrid.ItemsSource = LoadFiles();
         }

 public class Files
        {
            public string File { get; set; }
            public string Duration { get; set; }
            public string Status { get; set; }
        }

        List<Files> files = new List<Files>();

        private List<Files> LoadFiles()
        { 
            return files;
        } 
```

现在我重写了代码以将 GridView 与 Dictionary 类型绑定，因为我需要存储值/键对。但是在加载应用程序时，不会生成列。这些列仅在 Dictionary 填充内容后生成：

```
 public MainWindow()
    {
        InitializeComponent();
        DataGrid.ItemsSource = LoadFile();   
    }
 public class Files
        {
            public string File { get; set; }
            public string Duration { get; set; }
            public string Status { get; set; }  
        }

Dictionary<Files, string> files = new Dictionary<Files, string>();

        private Dictionary<Files, string> LoadFiles()
        {
            return files;
        } 
```

即使 Dictionary<> 为空，我也希望创建列。有什么建议吗？

# asp.net - 对每个请求执行代码

> ID：12926043
> 
> 赞同：3
> 
> 时间：2012-10-17T02:01:57.860
> 
> 标签：asp.net, asp.net-web-api

我需要运行一个验证例程，以查找对服务器的每个请求的一些标头信息。我会在 ASP.NET MVC 或 ActionInvoker 中使用 OnActionExecuting 来运行每个请求，但我一直在寻找 Web API，但没有找到特定的东西。

如果可以为同步和异步实现某些东西，那将是最好的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T02:16:48.780

对于 Web API，您应该求助于`MessageHandlers`

消息处理程序总是首先运行，在管道中的任何其他内容之前运行，并且它们也能够最后运行（在 Web API 返回响应之后，就在响应到达客户端之前）。

可以在此处找到有关消息处理程序的更多信息 - [http://www.asp.net/web-api/overview/working-with-http/http-message-handlers](http://www.asp.net/web-api/overview/working-with-http/http-message-handlers)。

这是一个简单的示例，验证 API 密钥：

```
public class WebApiKeyHandler : DelegatingHandler
{
    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        string apikey = HttpUtility.ParseQueryString(request.RequestUri.Query).Get("apikey");
        if (apikey != "something")
        {
            HttpResponseMessage response = request.CreateErrorResponse(HttpStatusCode.Forbidden, "You can't use the API without the key.");
            throw new HttpResponseException(response);
        }
        else
        {
            return base.SendAsync(request, cancellationToken);
        }
    }
} 
```

在此示例中，仅使用键“something”请求：即*/api/values/?apikey=something*将被允许，所有其他将被拒绝。

在您的情况下，您可以简单地访问*request.Headers*并验证您需要的任何内容。

# objective-c - 我应该创建一个类而不是结构，以便可以将数据放入 NSArray 吗？

> ID：12926044
> 
> 赞同：2
> 
> 时间：2012-10-17T02:02:15.473
> 
> 标签：objective-c, struct, nsarray

`struct`是否可以为 Objective-C创建类似 C 的东西？我需要能够使用它，`NSArray`所以它不能是传统的`struct`. 现在我宣布一个完整的班级只是为了完成这个，我想知道是否有更简单的方法。

我目前拥有的：

```
@interface TextureFile : NSObject
@property NSString *name;
@property GLKTextureInfo *info;
@end

@implementation TextureFile
@synthesize name = _name;
@synthesize info = _info;
@end

NSMutableArray *textures; 
```

我想做的事：

```
typedef struct {
    NSString *name;
    GLKTextureInfo *info;
} TextureFile;

NSMutable array *textures; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:05:41.097

这取决于您使用的是哪种数据，您在问题中使用的示例对于结构来说似乎没问题。

如果您需要将 C 结构存储在`NSArray`需要对象的 中，您可以将 C-struct 转换为`NSValue`并像这样存储它，然后在读取时转换回其 C 结构类型。

检查 Apple[文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSValue_Class/Reference/Reference.html)。

鉴于此结构：

```
typedef struct {
    NSString *name;
    GLKTextureInfo *info;
} TextureFile; 
```

要存储它：

```
TextureFile myStruct;
// set your stuct values

NSValue *anObj = [NSValue value:&myStruct withObjCType:@encode(TextureFile)];
NSArray *array = [NSArray arrayWithObjects:anObj, nil]; 
```

再读一遍：

```
NSValue *anObj = [array objectAtIndex:0];
TextureFile myStruct;
[anObj getValue:&myStruct]; 
```

# git - git diff 使用“--”时将文件视为新添加的文件 “ 旗帜

> ID：12926048
> 
> 赞同：1
> 
> 时间：2012-10-17T02:02:50.997
> 
> 标签：git, diff, git-diff

注意到一个奇怪的行为`git diff`：

我想用 HEAD 来区分我的一些工作文件，比如`dir/a.h`和`dir/a.cc`.

当我使用`git diff HEAD`它时效果很好，但是我更改的文件不止这两个。所以我将命令更改为`git diff HEAD -- * a.*`. 令人惊讶的是，它在 HEAD 中找不到这两个文件并将它们视为新添加的。

```
$ git diff --stat HEAD
 dir/a.cc |   32 ++++++++++----------------
 dir/a.h  |   12 +++++-----
 2 files changed, 18 insertions(+), 26 deletions(-)

$ git diff --stat HEAD -- *a.*
 dir/a.cc |  208 +++++++++++++++++++++++++++
 dir/a.h  |  142 ++++++++++++++++++
 2 files changed, 350 insertions(+), 0 deletions(-) 
```

==================================================== ======================

更新：为了避免我的代码库有任何特殊之处，我添加了一个新目录和 2 个新文件，仅用于测试。

首先我提交了 dir2/bh 和 dir2/b.cc，这两个文件只有一行内容。然后我对这些文件做了一些小改动并测试了 git diff。

这是正确的行为：

```
$ git diff --stat HEAD 
 dir2/b.cc |    2 +-
 dir2/b.h  |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-) 
```

这也是正确的：

```
$ git diff --stat HEAD -- dir2/*b.*
 dir2/b.cc |    2 +-
 dir2/b.h  |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-) 
```

但这很奇怪（将两个文件都视为新文件）：

```
$ git diff --stat HEAD -- *b.*
 dir2/b.cc |    1 +
 dir2/b.h  |    1 +
 2 files changed, 2 insertions(+), 0 deletions(-) 
```

@Chronial，我在我的回购的根目录中。@jszakmeister，因为这两个文件是新的，似乎它与重命名/移动无关......

“git 状态”是正确的：

```
$ git status
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   dir2/b.cc
#       modified:   dir2/b.h
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

我认为这可能是与 bash "*" 匹配有关的问题。但仍然不明白这种行为......

# python - 在 setup.py 要求中提供 pytz 版本

> ID：12926052
> 
> 赞同：5
> 
> 时间：2012-10-17T02:03:32.130
> 
> 标签：python, distutils, setup.py, pytz

## 问题

我想在我的库中包含对脚本的要求`pytz`，`setup.py`但也想设置所需的最低版本。但是模块使用的版本号`pytz`（例如“ `2012f`”）似乎与`distutils`想要提供的内容不兼容（例如“ `1.1.3`”）。

有没有办法在不改变或的情况下包括对特定版本`pytz`（例如）的要求？`>=2012f``pytz``distutils`

## 细节

为此，我在`setup.py`文件中做了类似的事情：

```
setup(
    # ... basic data here ...
    requires=[
        'pytz (>=2012f)',
    ],
    # ... some other data here ...
) 
```

但是当我在做的时候`sudo python setup.py install`，出现了以下错误：

```
Traceback (most recent call last):
  File "setup.py", line 25, in <module>
    long_description=long_description,
  File "/usr/lib/python2.7/distutils/core.py", line 112, in setup
    _setup_distribution = dist = klass(attrs)
  File "/usr/lib/python2.7/distutils/dist.py", line 259, in __init__
    getattr(self.metadata, "set_" + key)(val)
  File "/usr/lib/python2.7/distutils/dist.py", line 1220, in set_requires
    distutils.versionpredicate.VersionPredicate(v)
  File "/usr/lib/python2.7/distutils/versionpredicate.py", line 115, in __init__
    self.pred = [splitUp(aPred) for aPred in str.split(",")]
  File "/usr/lib/python2.7/distutils/versionpredicate.py", line 25, in splitUp
    return (comp, distutils.version.StrictVersion(verStr))
  File "/usr/lib/python2.7/distutils/version.py", line 40, in __init__
    self.parse(vstring)
  File "/usr/lib/python2.7/distutils/version.py", line 107, in parse
    raise ValueError, "invalid version number '%s'" % vstring
ValueError: invalid version number '2012f' 
```

似乎问题是由`distutils`试图匹配这个正则表达式引起的：

```
version_re = re.compile(r'^(\d+) \. (\d+) (\. (\d+))? ([ab](\d+))?$',
                        re.VERBOSE) 
```

当它不匹配时，会引发上述错误。

我见过有人修改源代码`pytz`（将版本更改为更像 的东西`2012.6`），但这对我来说似乎是个非常糟糕的主意。我希望还有另一种我错过的方式。

更改`pytz (>=2012f)`为`pytz`作品，但它并不将要求限制为特定版本的`pytz`模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:18:36.173

使用[`install_requires`setuptools 选项](http://packages.python.org/distribute/setuptools.html#declaring-dependencies)：

```
setup(
    # ... basic data here ...
    install_requires='pytz>=2012f', # distutils ignores it with a warning, pip uses it
    # ... some other data here ...
) 
```

# sql - 操作数应包含 1 列 WHERE IN HAVING

> ID：12926053
> 
> 赞同：1
> 
> 时间：2012-10-17T02:03:50.340
> 
> 标签：sql

我有一个查询，我正在针对选择测试“IN”。

我收到“操作数应包含 1 列”错误，我认为这是因为我在“输入”选择中选择了超过 1 列。我需要第二列作为我的选择器的一部分，因为我需要对照“有”语句检查它。

我怎样才能使这项工作达到我想要的效果？

```
SELECT DISTINCT c.ID, Title, URLSegment
FROM ListingCategory c
LEFT JOIN SiteTree_Live ON c.ID = SiteTree_Live.ID
JOIN ListingCategory_Listings lc
      ON c.ID = lc.ListingCategoryID
        WHERE lc.ListingID IN (
            SELECT Listing.ID,
( 6371 * ACOS( COS( RADIANS(-45.0227996) ) * COS( RADIANS( Location.Latitude ) ) * COS( RADIANS( Location.Longitude ) - RADIANS(168.6991149) ) + SIN( RADIANS(-45.0227996) ) * SIN( RADIANS( Location.Latitude ) ) ) ) AS distance
FROM Listing
LEFT JOIN Location ON Listing.LocationID = Location.ID
having distance < 5
        ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:21:52.253

简单 - 只是不要选择计算列。此外，它应该是`WHERE`，而不是`HAVING`：

```
...
WHERE lc.ListingID IN (
    SELECT Listing.ID
    FROM Listing
    LEFT JOIN Location ON Listing.LocationID = Location.ID
    WHERE 6371 * ACOS( COS( RADIANS(-45.0227996) ) * COS( RADIANS( Location.Latitude ) ) * COS( RADIANS( Location.Longitude ) - RADIANS(168.6991149) ) + SIN( RADIANS(-45.0227996) ) * SIN( RADIANS( Location.Latitude ) ) )
        < 5
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T02:15:54.647

你想做的事是做不到的。IN 子查询必须返回单个列。

我的建议是您将表 LINSTING 添加到连接链然后询问`Listing.ID is not null`。

另外： HAVING 适用于具有 GROUP BY 子句的查询。

# f# - F# 类型提供程序打印

> ID：12926058
> 
> 赞同：2
> 
> 时间：2012-10-17T02:04:13.120
> 
> 标签：f#, type-providers

我目前正在尝试`SqlDataConnection`类型提供程序，并且想知道如何显示这些类型。

有什么方法可以让我的调用`printfn "%A"`显示比类型名称更有意义的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T22:45:14.600

我认为没有办法拦截`printfn "%A"`类型提供程序生成的现有类型的行为（您无法修改）。如果您可以修改类型提供程序，那么您可以更改它`StructuredFormatDisplay`以为生成的类型生成属性，但这对于`SqlDataConnection`.

如果您在 F# Interactive 中使用它，那么您可以使用它`fsi.AddPrintTransformer`来定义当单个值是某些计算的结果时如何打印它们。例如：

```
// Using Northwind database as a sample
type DB = SqlDataConnection<"Data Source=.\\SQLExpress;Initial Catalog=Northwind;...">
let db = DB.GetDataContext()

// A simple formatter that creates a list with property names and values
let formatAny (o:obj) = 
  [ for p in o.GetType().GetProperties() ->
      p.Name, p.GetValue(o) ]

// Print all Northwind products using the formatter
fsi.AddPrintTransformer(fun (p:DB.ServiceTypes.Products) ->
  formatAny p |> box)

// Take the first product - will be printed using custom formatter
query { for p in db.Products do head } 
```

`PrintTransformer`仅当您在 F# 交互中获取值作为结果时才使用指定的值。当您编写`query { .. } |> List.ofSeq`返回多个对象的查询时，它也将起作用。但是对于`printfn "%A"`，您必须`formatAny`显式调用转换函数（如 ）...

# kinect - PCL 创建 pcd 云

> ID：12926060
> 
> 赞同：1
> 
> 时间：2012-10-17T02:04:45.577
> 
> 标签：kinect, point-clouds, point-cloud-library

这是我到目前为止所拥有的，我想从中保存 pcd 文件我知道我必须做这样的事情，但不完全确定 pcl::PointCloud::PointPointXYZRGBA> cloud; pcl::io:;savePCDFileASCII("test.pcd",cloud);

我必须在我当前的代码中添加什么 test.pcd 谢谢

```
 #include <pcl/point_cloud.h>
    #include <pcl/point_types.h>
    #include <pcl/io/openni_grabber.h>
    #include <pcl/visualization/cloud_viewer.h>
    #include <pcl/common/time.h>

    class SimpleOpenNIProcessor
    {
        public:
            SimpleOpenNIProcessor () : viewer ("PCL OpenNI Viewer") {}
            void cloud_cb_ (const pcl::PointCloud<pcl::PointXYZRGBA>::ConstPtr &cloud)
            {
                static unsigned count = 0;
                static double last = pcl::getTime ();
                if (++count == 30)
                {
                    double now = pcl::getTime ();
                    std::cout << "distance of center pixel :" << cloud->points [(cloud->width >> 1) * (cloud->height + 1)].z << " mm. Average framerate: " << double(count)/double(now - last) << " Hz" <<  std::endl;
                    count = 0;
                    last = now;
                }
                if (!viewer.wasStopped())
                    viewer.showCloud (cloud);
            }

            void run ()
            {
                // create a new grabber for OpenNI devices
                pcl::Grabber* interface = new pcl::OpenNIGrabber();

                // make callback function from member function
                boost::function<void (const pcl::PointCloud<pcl::PointXYZRGBA>::ConstPtr&)> f =
                    boost::bind (&SimpleOpenNIProcessor::cloud_cb_, this, _1);

                // connect callback function for desired signal. In this case its a point cloud with color values
                boost::signals2::connection c = interface->registerCallback (f);

                // start receiving point clouds
                interface->start ();

                // wait until user quits program with Ctrl-C, but no busy-waiting -> sleep (1);
                while (true)
                    boost::this_thread::sleep (boost::posix_time::seconds (1));

                // stop the grabber
                interface->stop ();
            }

            pcl::visualization::CloudViewer viewer;
    };

    int main ()
    {
      SimpleOpenNIProcessor v;
      v.run ();
      return (0);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:41:17.157

```
#include <iostream>
#include <string>
#include <sstream>

#include <pcl/io/pcd_io.h>
#include <pcl/point_types.h>
#include <pcl/io/openni_grabber.h>
#include <pcl/visualization/cloud_viewer.h>

using namespace std; 

const string OUT_DIR = "D:\\frame_saver_output\\"; 

class SimpleOpenNIViewer 
{ 
public: 
    SimpleOpenNIViewer () : viewer ("PCL Viewer") 
    { 
                frames_saved = 0; 
                save_one = false; 
    } 

    void cloud_cb_ (const pcl::PointCloud<pcl::PointXYZRGB>::ConstPtr &cloud) 
    { 
                if (!viewer.wasStopped()) { 
                        viewer.showCloud (cloud); 

                        if( save_one ) { 
                                save_one = false; 
                                std::stringstream out; 
                                out << frames_saved; 
                                std::string name = OUT_DIR + "cloud" + out.str() + ".pcd"; 
                                pcl::io::savePCDFileASCII( name, *cloud ); 
                        } 
                } 
    } 

    void run () 
    { 
                pcl::Grabber* interface = new pcl::OpenNIGrabber(); 

                boost::function<void (const pcl::PointCloud<pcl::PointXYZRGB>::ConstPtr&)> f = 
                        boost::bind (&SimpleOpenNIViewer::cloud_cb_, this, _1); 

                interface->registerCallback (f); 

                interface->start (); 

                char c; 

                while (!viewer.wasStopped()) 
                { 
                        //sleep (1); 

                        c = getchar(); 
                        if( c == 's' ) { 
                                cout << "Saving frame " << frames_saved << ".\n"; 
                                frames_saved++; 
                                save_one = true; 
                        } 
                } 

                interface->stop (); 
        } 

        pcl::visualization::CloudViewer viewer; 

        private: 
                int frames_saved; 
                bool save_one; 

}; 

int main () 
{ 
    SimpleOpenNIViewer v; 
    v.run (); 
    return 0; 
} 
```

干得好。

# javascript - 为什么这条线会阻塞我的 jQuery 数据表？

> ID：12926061
> 
> 赞同：2
> 
> 时间：2012-10-17T02:04:49.663
> 
> 标签：javascript, jquery, datatables

我有一个像这样编码的[jQuery dataTable ：](http://datatables.net)

```
$("#my-datatable").dataTable( {
    "bProcessing" : true,
    // Commenting out next line
    //"sDom" : 't',
    "sAjaxSource" : "some/url/on/my/server",
    "sAjaxDataProp" : "",
    "bDestroy" : true,
    "fnServerData" : function(sSource, aoData, fnCallback) {
        aoData.push({
            "name" : "asking",
            "value" : "yes"
        });

        request = $.ajax({
            "dataType" : "json",
            "type" : "GET",
            "url" : sSource,
            "data" : aoData,
            "success" : fnCallback
        });
    },

    "aoColumns" : [
        {
            "mDataProp" : "name"
        },
        {
            "mDataProp" : "expr"
        },
        {
            "mDataProp" : "seq"
        }
    ]
}); 
```

注意注释掉的行。当此代码按原样运行时，表格呈现精美。不幸的是，它显示了很多我**不想**显示的东西，例如分页信息、搜索栏等。

在阅读文档并遵循示例之后，我确信被注释掉的行是我需要配置 dataTable 以便只有表本身呈现/显示的内容。

但是，当我将其注释掉时，我在 Firebug 中收到一个错误，并且没有数据填充我的表：

```
TypeError: an is undefined
[Break On This Error]   

for ( var i=0, iLen=an.length ; i<iLen ; i++ ) 
```

似乎也在抱怨`jQuery.dataTables.js`第 2895 行。有人能发现为什么会这样吗？我的`sDom`属性配置不正确吗？请记住，我只想绘制表格及其标题（以及其中的所有数据）。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-06T11:48:47.437

When setting `"bProcessing": true`, you have to make sure the `'r'` is defined inside the `sDom`, otherwise the error will be generated.

Example :

```
var oTable = $('#example').dataTable( {
    "bProcessing": true,
    "iDisplayLength": 10,
    "bLengthChange": false,
    "bFilter": false,
    "aoColumnDefs": [{ "bSortable": false, "aTargets": [ 0, 4, 5 ] }],  
    "sDom": "t<'row-fluid'<'span4'i><'span8'pP>r>",
    "sPaginationType": "bootstrap",
    "oLanguage": {  "sLengthMenu": "_MENU_ records per page"    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T02:44:17.223

我想你所追求的也许是这个

[http://datatables.net/examples/basic_init/filter_only.html](http://datatables.net/examples/basic_init/filter_only.html)

你可以离开 sDom: T （默认）并手动关闭一切

```
 "bPaginate": false,
        "bLengthChange": false,
        "bFilter": true,
        "bSort": false,
        "bInfo": false,
        "bAutoWidth": false 
```

# android - 如何让状态栏不被拉到我的活动中？

> ID：12926065
> 
> 赞同：0
> 
> 时间：2012-10-17T02:05:13.660
> 
> 标签：android

我想让状态栏可见但不能在我的活动中拉出，这可能吗？

如果使用`getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);`

状态栏是不可见的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:20:08.993

不要这样做。

我以前去过那里 - 你认为你有一个需要覆盖一些默认系统行为（后退按钮、主页按钮等）的交互。

用户期望这些按钮（和状态栏）以某种方式运行，并且如果您覆盖它会感到恼火。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:50:03.597

您能告诉我们为什么要阻止 StatusBar 被拉出吗？[正如theelfismike](https://stackoverflow.com/users/1337412/theelfismike)正确指出的那样，这不是最佳实践。

我怀疑您正在尝试实现其他方式可以优雅地完成的事情。

# sql - 有未提交的交易

> ID：12926066
> 
> 赞同：-1
> 
> 时间：2012-10-17T02:05:26.813
> 
> 标签：sql, sql-server

```
SET XACT_ABORT ON

BEGIN TRY
  BEGIN TRAN    

   INSERT INTO dbo.Student
     (FirstName, LastName)
   VALUES 
     ('Jon','Ye')

   IF XACT_STATE() = 0
     COMMIT TRAN

END TRY
BEGIN CATCH

  IF XACT_STATE() <> 1
    ROLLBACK TRAN
  ELSE
    COMMIT TRANSACTION

END CATCH

RETURN
GO 
```

错误信息：

> 有未提交的事务。

只有在关闭 SQL Server 时才能看到结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:15:42.750

问题就在这里

```
 IF XACT_STATE() = 0
        COMMIT TRAN 
```

XACT_STATE() 仅在不存在活动用户事务时返回 0。由于 BEGIN TRAN 启动的打开事务，XACT_STATE 必须返回 1，因此 COMMIT TRAN 不会执行。您应该检查返回值 1

# mysql - SQL INSERT 语句的字段名中的问号

> ID：12926070
> 
> 赞同：0
> 
> 时间：2012-10-17T02:05:41.247
> 
> 标签：mysql, sql, insert

这可能是一个徒劳的问题，但无论如何我都会问。我现在了解到，在字段名称的末尾使用问号是不好的做法，就像`Paid?`以下语句中的字段一样：

```
$sql = "INSERT INTO `tblAppeals` 
( 
`#`,
`Year`,
`Property#`,
`Paid?`,
`Outcome`,
`ResolvedBy`,
`AppealCategory`
) 
VALUES (?,?,?,?,?,?,?)"; 
```

当我尝试运行该语句时，我收到一个错误，因为问号处理不正确。我无法找到任何解决方法来避免不得不返回并更改字段名称。

有什么方法可以保持字段名称相同`Paid?`，并且仍然在 INSERT 语句中使用它？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:16:41.473

看起来它是您的查询层的问题，而不是 MySQL 本身的问题。也就是说，无论在做什么绑定参数处理都是急切地寻找`?`SQL 中的所有内容，而不仅仅是`VALUES`子句部分中的内容。

您使用的是什么数据库驱动/查询框架？

# php - Gmail SMTP 问题

> ID：12926072
> 
> 赞同：4
> 
> 时间：2012-10-17T02:05:49.433
> 
> 标签：php, smtp, phpmailer

我在使用 gmail 的 smtp 服务器发送电子邮件时遇到问题

让我解释一下我的情况。1 周前，我可以使用 smtp 使用 php 发送电子邮件。昨天，我的主机将他们的网站（包括我的）转移到了另一台服务器。之后我无法发送电子邮件。我在本地机器上测试了电子邮件脚本，它工作得很好。

我目前正在使用 phpmailer 发送电子邮件。发生错误时，我在 php 脚本上启用了调试。我在远程 Web 服务器和本地计算机上运行了调试启用版本。

这是输出： **本地机器（工作）**

```
SMTP -> FROM SERVER:220 mx.google.com ESMTP dj6sm9229359qab.3 
SMTP -> FROM SERVER: 250-mx.google.com at your service, [155.41.29.55] 250-SIZE 35882577 250-8BITMIME 250-AUTH LOGIN PLAIN XOAUTH XOAUTH2 250 ENHANCEDSTATUSCODES 
SMTP -> FROM SERVER:250 2.1.0 OK dj6sm9229359qab.3 
SMTP -> FROM SERVER:250 2.1.5 OK dj6sm9229359qab.3 
SMTP -> FROM SERVER:354 Go ahead dj6sm9229359qab.3 
SMTP -> FROM SERVER:250 2.0.0 OK 1350437987 dj6sm9229359qab.3 
Message sent! 
```

**远程服务器（不起作用）**

```
SMTP -> FROM SERVER:220-gds-wh1.get-sourced.net ESMTP Exim 4.80 #2 Tue, 16 Oct 2012 21:00:32 -0500 220-We do not authorize the use of this system to transport unsolicited, 220 and/or bulk e-mail. 
SMTP -> FROM SERVER: 250-gds-wh1.get-sourced.net Hello gds-wh1.get-sourced.net [63.141.244.218] 250-SIZE 52428800 250-8BITMIME 250-PIPELINING 250-AUTH PLAIN LOGIN 250 HELP 
SMTP -> ERROR: Password not accepted from server: 535 Incorrect authentication data 
SMTP -> FROM SERVER:250 Reset OK 
SMTP Error: Could not authenticate. Mailer Error: SMTP Error: Could not authenticate. 
```

如果你仔细看。在我的本地机器中，调试信息中似乎有 google 的 mx-server 地址，但在远程机器中，它有托管服务提供商信息。我不知道这是否正常。我完全一无所知

你能帮我或给我一个关于什么问题的线索吗？

谢谢， 维杜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T03:34:58.160

您的托管服务提供商似乎正在捕获出站 SMTP 请求并将它们转发到他们自己的 SMTP 服务器。

您是否在端口 25 上连接到 Google？相反，连接[587 端口，即 SMTP 提交端口](http://mostlygeek.com/tech/smtp-on-port-587/)。如果您已经在使用 587，并且您的托管服务提供商正在捕获此流量，那么请向他们发送一封非常讨厌的电子邮件，威胁如果他们不立即停止干扰您的 Web 应用程序，他们就会更换托管服务提供商。住宅拨号和 DSL 用户可能会容忍这种 BS，但它完全不适合网络托管和托管。

如果您的提供商在球上，他们会道歉并指出您的条款和条件中的部分，即出站 SMTP 流量现在将被自动重定向，直到通过支持票提出删除请求。

哦，顺便说一句，您的新托管服务提供商现在已经捕获了您向 Google 进行身份验证所使用的身份验证凭据。是时候更改密码并实施 TLS，但据我所知，phpMailer 不支持 TLS。

也许是时候看看[Swiftmailer](http://swiftmailer.org/)或像 Postmark 这样的商业提供商[了](https://postmarkapp.com/)？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T03:10:16.570

据我所知，我认为您必须检查您是否已经放置了正确的 google SMTP（通常：smtp.gmail.com）？并且要使用 google smtp，它需要来自您的 google 帐户的用户和密码等身份验证。

# eclipse - 由于存储了错误的用户名，无法使用 Egit 从 Github 获取或提取

> ID：12926073
> 
> 赞同：1
> 
> 时间：2012-10-17T02:05:51.893
> 
> 标签：eclipse, github, egit

关于这个有一个类似的问题。但基本上，我试图从 github 获取并输入了错误的用户名。它被保存在某个地方，我无法弄清楚在哪里更改我一生的凭据。

现在每次我进行提取时，都会出现未经授权的错误。有谁知道在哪里更改凭据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T06:41:30.710

首选项 -> 常规 -> 安全 -> 安全存储 -> 内容。您应该能够在树中找到并删除您的 git 存储库 URL 和凭据。

# sql-server - 将日期增加到下个月的特定日期

> ID：12926074
> 
> 赞同：1
> 
> 时间：2012-10-17T02:05:53.370
> 
> 标签：sql-server, fastreport

我想取当前日期并将其增加到下个月的 15 日。

```
[<Date> #dmmm 15, yyyy]

Result:
Oct 15, 2012

DESIRED RESULT:
Nov 15, 2012 
```

预先感谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T02:22:57.240

好吧，如果您开始的日期是 15 日，那么您可以执行此操作：

```
SELECT DATEADD(mm, 1, [DateField]) 
```

但是，如果我们不知道开始日期是哪一天，我们将不得不构建一个可以首先开始的日期，因此您可以执行以下操作：

```
SELECT DATEADD(mm, 1,
    CAST(
        CAST(DATEPART(mm, [DateField]) AS VARCHAR) +
        '/15/' +
        CAST(DATEPART(yy, [DateField]) AS VARCHAR)
    AS DATETIME)) 
```

来自 Aaron - 为了避免速记、地区问题和不当演员，我会这样写：

```
SELECT DATEADD(MONTH, 1, CONVERT(CHAR(6), DateColumn, 112) + '15')
FROM ... 
```

# javascript - 使 Javascript 私有化

> ID：12926076
> 
> 赞同：3
> 
> 时间：2012-10-17T02:06:17.057
> 
> 标签：javascript, private

> **可能重复：**
> [如何混淆 JavaScript？](https://stackoverflow.com/questions/194397/how-can-i-obfuscate-javascript)

是否可以将某些 Javascript 设为私有和机密，以便某些事情可以保密？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T02:09:22.907

如果您问是否可以阻止用户查看您的源，答案基本上是否定的。

有时您可以使*右键单击/查看源代码*成为不可能，但人们可以简单地使用像 Firebug 这样的工具。

您可以*缩小*代码，但这并不能隐藏它。只会让人更难理解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T02:19:58.727

我认为您所追求的是加密/混淆javascript代码；您无法避免，只能将您的 JavaScript 代码发送给客户端。

您能做的最好的事情就是混淆它，这本质上使人更难阅读它。如果你想走那条路，这里是 SO 参考

[如何混淆（保护）JavaScript？](https://stackoverflow.com/questions/194397/how-can-i-obfuscate-javascript)

我不确定你为什么要这样做，是为了保护你自己的一些代码，如果是这样，那没关系，但如果你打算将敏感数据（如用户名/密码）嵌入到你的 javascript 中，那么请不要这样做，可以去服务器获取更好的安全性:-) 快乐编码。

# spring - Jboss6.1 ClassNotFound in WEB/lib for listener

> ID：12926079
> 
> 赞同：0
> 
> 时间：2012-10-17T02:06:31.247
> 
> 标签：spring, jakarta-ee, jboss

我使用jboss6.1。当我尝试部署 web 应用程序时，它说尝试加载 spring 时找不到类。

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

错误是

```
Caused by: java.lang.ClassNotFoundException: org.springframework.context.ApplicationListener 
```

我把弹簧放在WEB/lib 中。那是错的吗？或者应该是别的什么？

* * *

感谢您的友好回复。让我困惑的是我把弹簧罐放在我的 webapp 的 WEB/lib 文件夹中。这还不够吗？

* * *

以下是 web.xml 和 jars。（我把抓到的都放在spring3.1的dist文件夹里）

但我想知道可能是因为我使用 jboss 并且其中有一些特别的东西？我用谷歌搜索了一些帖子类加载器，但不明白。

* * *

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:jsp="http://java.sun.com/xml/ns/javaee/jsp"
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="CMDB_WS_HOST" version="3.0">
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
    <session-config>
        <session-timeout>99999999</session-timeout>
    </session-config>
    <context-param> 
        <param-name>contextConfigLocation</param-name>
        <param-value>WEB-INF/beans.xml</param-value>
    </context-param>
    <servlet>
        <servlet-name>CXFServlet</servlet-name>
        <servlet-class>org.apache.cxf.transport.servlet.CXFServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>CXFServlet</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>
    <listener>
        <listener-class>com.inspur.cmdb.system.StartupListener</listener-class>
    </listener>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
</web-app> 
```

* * *

web/lib 中的 spring jars

org.springframework.aop-3.1.0.M2.jar

org.springframework.asm-3.1.0.M2.jar

org.springframework.aspects-3.1.0.M2.jar

org.springframework.beans-3.1.0.M2.jar

org.springframework.context.support-3.1.0.M2.jar

org.springframework.context-3.1.0.M2.jar

org.springframework.core-3.1.0.M2.jar

org.springframework.expression-3.1.0.M2.jar

org.springframework.instrument.tomcat-3.1.0.M2.jar

org.springframework.instrument-3.1.0.M2.jar

org.springframework.jdbc-3.1.0.M2.jar

org.springframework.jms-3.1.0.M2.jar

org.springframework.orm-3.1.0.M2.jar

org.springframework.oxm-3.1.0.M2.jar

org.springframework.test-3.1.0.M2.jar

org.springframework.transaction-3.1.0.M2.jar

org.springframework.web.portlet-3.1.0.M2.jar

org.springframework.web.servlet-3.1.0.M2.jar

org.springframework.web.struts-3.1.0.M2.jar

org.springframework.web-3.1.0.M2.jar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:20:18.240

确保您的服务器类路径已包含 Spring jar 库。在 Spring 3 中，spring-web.jar

检查您是否在 WEB/lib 中有这些 jar

```
commons-logging-1.1.1.jar
jstl-1.2.jar
spring-asm-3.0.3.RELEASE.jar
spring-beans-3.0.3.RELEASE.jar
spring-context-3.0.3.RELEASE.jar
spring-core-3.0.3.RELEASE.jar
spring-expression-3.0.3.RELEASE.jar
spring-web-3.0.3.RELEASE.jar
spring-webmvc-3.0.3.RELEASE.jar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:55:46.297

没关系。`JBoss 7`效果很好`classloading`。

配置：`/WEB-INF/jboss-web.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE jboss-web PUBLIC
    "-//JBoss//DTD Web Application 4.2//EN"
    "http://www.jboss.org/j2ee/dtd/jboss-web_4_2.dtd">
<jboss-web>
    <class-loading java2ClassLoadingCompliance="false">
        <loader-repository>
                   myapp:loader=anyUniqueName
            <loader-repository-config>java2ParentDelegation=false</loader-repository-config>
        </loader-repository>
    </class-loading>
</jboss-web> 
```

**否则**

我[在这里](http://static.springsource.org/spring-framework/docs/3.2.0.M2/api/org/springframework/instrument/classloading/jboss/JBossLoadTimeWeaver.html)参考。

我还没有尝试过`JBoss 6`。但是，我希望以下配置对`JBoss 6`.

**笔记：**

在 JBoss 6.0 上，为了避免容器在应用程序实际启动之前加载类，需要将 WEB-INF/jboss-scanning.xml 文件添加到应用程序存档中 - 具有以下内容：

配置：`/WEB-INF/jboss-scanning.xml`

```
<scanning xmlns="urn:jboss:scanning:1.0"/> 
```

# django - Django 在 HttpResponseRedirect 中显示消息参数

> ID：12926080
> 
> 赞同：1
> 
> 时间：2012-10-17T02:06:32.307
> 
> 标签：django, redirect, httpresponse, messages

我正在处理一个询问用户姓名和电话号码的基本网页，如果成功提交，它将重定向到显示用户姓名和电话号码的页面。当我尝试提交姓名和电话号码时，我不断收到 403 错误。这是代码：

这是views.py中的代码：

```
def homeform(request):
 if request.method == "POST":
form = PhoneForm(request.post)
if form.is_valid():
    cd = form.cleaned_data
    messages.success(request, "%s, you have recorded your phone number as %d. Thanks for the update.") %(cd["name"],cd["phone"])
    return HttpResponseRedirect('/success/')
 else:
    form = PhoneForm()
 return render_to_response('phone_form.html',{'form': form})

def success(request):
  return render_to_response('success.html',{'messages': messages}) 
```

这是 urls.py 中的代码：

```
urlpatterns = patterns('',
('^home/$',homeform),
('^success/$', success), 
```

)

这是我在视图中用于成功功能的 html 文件：

```
<html>
<head>
<title>Success</title>
<head>
<body>
  {% if messages %}
  <ul class="messages">
  {% for message in messages %}
  <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
  {% endfor %}
  </ul>
  {% endif %}
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T02:49:04.083

我不明白您的问题标题，但是如果您收到 403，则很可能是 CSRF 错误（您会看到）。您应该发布发布的视图，而不是成功视图/模板。

`{% csrf_token %}`在任何 POST 表单上添加`<form>`标签，否则 django 会抱怨 CSRF 错误。

# android - Android上的MessagePack序列化对象错误

> ID：12926081
> 
> 赞同：3
> 
> 时间：2012-10-17T02:06:33.923
> 
> 标签：android, msgpack, messagepack

在android上使用messagepack，可以序列化/反序列化一个类，但不是绝对正确的。

简单的测试类：

```
 @Message
public class Account {

    public String Code;
    public int Sequence;
    public float Lot;

    public String toString(){
        return "Seq:"+Sequence;
    }
} 
```

测试代码：</p>

```
MessagePack msgpack = new MessagePack();
    msgpack.register(Account.class);
    try {
    Account a = new Account();
    a.Code ="name";
    a.Sequence = 105;
    a.Lot = (float)1.05;
    byte[] b = msgpack.write(a);
    //byte[] c = MessagePack.pack(a);
    Account aa = msgpack.read(b, Account.class );
    System.out.println(new String(b));
    System.out.println("test00: aa.Lot "+aa.Lot);
    }catch(IOException e){
        e.printStackTrace();
    } 
```

运行后“byte[] b = msgpack.write(a);” 在 android 上，输出字节数组 b[] 不正确（与 java 相比）

```
[-109, -92, 110, 97, 109, 101, 105, -54, 63, -122, 102, 102]   on java

[-109, -92, 110, 97, 109, 101, -54, 63, -122, 102, 102, 105]   on android 
```

我已经审查[了将 MessagePack 与 Android 一起使用](https://stackoverflow.com/questions/7529522/using-messagepack-with-android)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:48:00.097

MessagePack 本质上不是对象序列化程序。它旨在序列化定义良好的数据结构。在 Java 中，对象的字段之间没有顺序的概念。这些 MessagePack 实现可能会引入一个，以便它们可以序列化和反序列化对象，但不能保证它在不同的机器上是相同的。

如果你解压你的字节数组，下面是它们实际包含的内容：

```
["name", 105, 1.05] on Java
["name", 1.05, 105] on Android 
```

如果您想以可移植的方式序列化对象，请编写具有明确定义的成员顺序的特定序列化方法，或者使用与对象更紧密对应的映射类型。

请注意，这是此处报告的错误：http: [//jira.msgpack.org/browse/MSGPACK-51](http://jira.msgpack.org/browse/MSGPACK-51)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T07:49:20.433

MessagePack-Java v0.6.7 正式支持Android。

*   [变更日志](https://github.com/msgpack/msgpack-java/blob/master/CHANGES.txt#L3)

它于 2012 年 12 月 9 日发布。请升级您的 msgpack 库。

# cakephp - cakephp 2.1 和创建 pdf

> ID：12926085
> 
> 赞同：2
> 
> 时间：2012-10-17T02:07:01.863
> 
> 标签：cakephp, pdf

大家好，我正在尝试创建一个发票系统，但是当我转到相关的 url 时，我得到一个空白页，而标题只是 url。我已按照以下教程进行操作`[http://bakery.cakephp.org/articles/kalileo/2010/06/08/creating-pdf-files-with-cakephp-and-tcpdf]`

这是我在发票控制器中的 viewPdf 函数

```
 function viewPdf($id = null) 
    { 
        if (!$id) 
        { 
            $this->Session->setFlash('Sorry, there was no property ID submitted.'); 
            $this->redirect(array('action'=>'index_admin'), null, true); 
        } 
        Configure::write('debug',0); // Otherwise we cannot use this method while developing 

        $id = intval($id); 

        $property = $this->__view($id); // here the data is pulled from the database and set for the view 

        if (empty($property)) 
        { 
            $this->Session->setFlash('Sorry, there is no property with the submitted ID.'); 
            $this->redirect(array('action'=>'index'), null, true); 
        } 

        $this->layout = 'pdf'; //this will use the pdf.ctp layout 
        $this->render(); 
    } 

//End of Controller
} 
```

这是我的 viewPdf 视图

```
<?php 
App::import('Vendor','xtcpdf');  
$tcpdf = new XTCPDF(); 
$textfont = 'freesans'; // looks better, finer, and more condensed than 'dejavusans' 
$fpdf->xheadertext = 'YOUR ORGANIZATION';
$tcpdf->SetAuthor("KBS Homes & Properties at http://kbs-properties.com"); 
$tcpdf->SetAutoPageBreak( false ); 
$tcpdf->setHeaderFont(array($textfont,'',40)); 
$tcpdf->xheadercolor = array(150,0,0); 
$tcpdf->xheadertext = 'KBS Homes & Properties'; 
$tcpdf->xfootertext = 'Copyright Â© %d KBS Homes & Properties. All rights reserved.'; 

// add a page (required with recent versions of tcpdf) 
$tcpdf->AddPage(); 

// Now you position and print your page content 
// example:  
$tcpdf->SetTextColor(0, 0, 0); 
$tcpdf->SetFont($textfont,'B',20); 
$tcpdf->Cell(0,14, "Hello World", 0,1,'L'); 
// ... 
// etc. 
// see the TCPDF examples  

echo $tcpdf->Output('filename.pdf', 'D'); 

?> 
```

据我所知，它应该创建一个包含“hello world”字样的 pdf 文件。

在遵循关于过时的建议后，我使用了 github 的链接，现在将它放在我的控制器中

```
 public function view($id = null) {
    $this->set('title_for_layout', 'Invoices');
    $this->set('stylesheet_used', 'homestyle');
    $this->set('image_used', 'eBOXLogoHome.png');
    $this->layout='home_layout';
            $this->Invoice->id = $id;
            if (!$this->Invoice->exists()) {
                throw new NotFoundException(__('Invalid invoice'));
            }
            $this->pdfConfig = array(
                'orientation' => 'potrait',
                'filename' => 'Invoice_' . $id
            );

            $this->set('invoice', $this->Invoice->read(null, $id));

        }
    } 
```

和我的观点.ctp

```
<html>
<head></head>
<title></title>
<body>
<?php $this->pdfConfig = array('engine' => 'CakePdf.WkHtmlToPdf') ?>
<?php echo $invoice; ?>
</body>
</html> 
```

它打印出 Array 但不会将其呈现为 pdf 文件

这是 github pagw 的链接

[https://github.com/ceeram/CakePdf](https://github.com/ceeram/CakePdf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:27:10.873

使用这个插件，设置在 github 页面上；）

[https://github.com/ceeram/CakePdf](https://github.com/ceeram/CakePdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:11:28.793

这是一个过时的教程，这是一个 Cakephp 1.2 的教程，而您使用的是 2.1。

Matus Edko 给你的 GitHub 链接中的代码要好得多。

顺便说一句，通过将 de“调试”设置为 3，在开发和测试时显示所有错误和通知总是更好。

```
Configure::write('debug',3); 
```

# php - IIS PHP 配置

> ID：12926093
> 
> 赞同：0
> 
> 时间：2012-10-17T02:08:19.680
> 
> 标签：php, cakephp, iis-7

我正在为一个使用 cakePHP 的客户端开发一个项目，但我很难让它在我的集群上运行。该应用程序连接到数据库就好了，但是一直显示 php 代码而不是解析它。

例子

```
link('Download a Catalogue',array('controller'=>'catalogues','action'=>'index', 'admin'=>false),array('class'=>'aaa'))?> 
```

有没有人有任何想法？我怀疑这行代码不包含';' 在最后。也就是说，这段代码完全可以在他的 unix 服务器上找到。有没有办法覆盖 IIS 不需要';' 在一行的末尾？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:22:50.177

我现在感觉很笨......以前的开发人员使用的是简写的 PHP 标签。在 PHP.INI 和 bam 中启用简写。

多谢你们。

# ruby-on-rails - 重组笨重的类

> ID：12926095
> 
> 赞同：0
> 
> 时间：2012-10-17T02:08:25.100
> 
> 标签：ruby-on-rails, ruby, activerecord, refactoring

我有一个 ActiveRecord 模型`Reservation`。
它已经到了班级太大并且做得太多的地步。
我想将它分成几个不同的并将它们放在`Reservation`模块下。

不幸的是，这会破坏应用程序。

此刻，我看到以下选项：

*   将其命名为类似`ReservationConcerns`或类似的东西
*   将功能添加到`Reservation`类本身，但将其物理移动到子目录（`Reservation`将在`app/models/reservation.rb`，`Reservation::Pipeline`将在`app/models/reservation/pipeline.rb`等）。

所以问题是**如何在**不破坏应用程序的情况下，将已经拥有的功能的不同关注点构建为一个单一的、庞大的类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T03:02:10.997

If you want to split up a Ruby class into different components without changing its public interface, one solution is to use modules:

```
# app/models/reservation.rb
class Reservation < ActiveRecord::Base
  # associations, validations, etc.

  include Pipeline
end

# app/models/reservation/pipeline.rb
module Reservation::Pipeline
  def some_pipeline_method
    # ...
  end

  def other_pipeline_method
    # ...
  end
end 
```

ActiveRecord also provides [observers](http://api.rubyonrails.org/classes/ActiveRecord/Observer.html), which "is a great way to reduce the clutter that normally comes when the model class is burdened with functionality that doesn't pertain to the core responsibility of the class". Observers often make heavy use of the [ActiveModel::Dirty](http://api.rubyonrails.org/classes/ActiveModel/Dirty.html) methods.

These suggestions are complimentary: modules can help you group your interface into more local chunks, while observers can make backend details more self-contained. From here, it's difficult to be more specific without knowing exactly what pieces you have that you're trying to break out.

# c# - 创建 COM 互操作类的实例

> ID：12926102
> 
> 赞同：4
> 
> 时间：2012-10-17T02:09:28.000
> 
> 标签：c#, reflection, .net-assembly, com-interop, coreldraw

我正在尝试使用 C# 从我的程序中打开 CorelDRAW。到目前为止，我已经能够通过引用适当的 com 库并调用

```
CorelDRAW.Application draw = new CorelDRAW.Application();
draw.Visible = true; 
```

但是，我希望我的程序可以与支持互操作的任何版本的 CorelDRAW 一起使用。我正在尝试使用反射在运行时加载互操作库，其中可以为正确的版本选择特定的 dll。从环顾四周，我尝试了以下方法。

```
string path = "Interop.CorelDRAW.dll";
Assembly u = Assembly.LoadFile(path);
Type testType = u.GetType("CorelDRAW.Application");

if (testType != null)
{
    object draw = u.CreateInstance("CorelDRAW.Application");

    FieldInfo fi = testType.GetField("Visible");
    fi.SetValue(draw, true);
} 
```

该程序在失败时`u.CreateInstance...`失败，因为`CorelDRAW.Application`它是一个接口，而不是一个类。当我浏览 Interop.CorelDRAW 作为资源时，我也尝试替换`CorelDRAW.Application`为可用的，但随后失败。`CorelDRAW.ApplicationClass``u.getType...`

我怎样才能让它工作？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T21:52:37.307

您可以使用以下构造创建已注册 ActiveX 对象的实例：

```
Type type = Type.GetTypeFromProgID("CorelDRAW.Application", true);
object vc = Activator.CreateInstance(type); 
```

然后你有 3 个选项，关于如何使用返回的对象。

1.  将返回的对象转换为真正的 CorelDRAW.Application 接口，但为此您需要引用一些包含它的 CorelDraw 库，这可能会产生版本控制问题。

2.  反射，您在问题中提到。

3.  使用 dynamic 关键字，这样您就可以像调用真正的 CorelDraw 类/接口一样调用现有方法和属性。

    ```
    Type type = Type.GetTypeFromProgID("CorelDRAW.Application", true);
    dynamic vc = (dynamic)Activator.CreateInstance(type);
    vc.Visible = true; 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T16:43:52.910

```
 System.Reflection.Assembly assembly = System.Reflection.Assembly.LoadFrom(fullPath);
  dynamic app = assembly.CreateInstance("CorelDRAW.ApplicationClass", true); 
```

这会奏效

# c# - 你能有太多的用户控件吗

> ID：12926104
> 
> 赞同：3
> 
> 时间：2012-10-17T02:09:58.087
> 
> 标签：c#, winforms

我正在整理一个 winforms 项目，并且正在考虑将用户控件与一个表单一起使用。例如，对客户列表、客户详细信息、产品列表、产品详细信息等进行用户控制。

如果这是一个好主意，如果用户从一个屏幕移动到另一个屏幕，您只是让用户控件可见 = false 还是将其设为空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:14:30.767

似乎您正在对功能进行分组，所以我认为您不需要很多。我做过的一些项目有大量资源的页面，我将它们转换为用户控件，并在每次展示它们时创建，否则如果它们相对轻量级，改变它们的可见性就可以了。这一切都归结为你想要完成的事情。

# c# - 将图像源保存到数据库

> ID：12926105
> 
> 赞同：0
> 
> 时间：2012-10-17T02:10:00.403
> 
> 标签：c#, wpf

我有一个`WPF Image`从图片对话框分配的源；

```
this.imgProduct.Source = new BitmapImage(new Uri(op.FileName)); 
```

如何检索源，将其转换为`byte array`并将其保存到`database`?

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:21:01.177

您必须将 BitmapImage 转换为 byte[] 然后将其保存到数据库中。

```
var imageSource = this.imgProduct.Source as BitmapImage;
var stream = imageSource.StreamSource;
Byte[] buffer = null;

if (stream != null && stream.Length > 0)
{
    using (BinaryReader br = new BinaryReader(stream))
    {
        buffer = br.ReadBytes((Int32)stream.Length);
    }
}

// write buffer to the database 
```

PS我没有测试过代码，但我认为它有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:14:13.527

只要您可以访问其中的图像文件，`op.FileName`就可以很容易地通过例如获取文件内容

```
byte[] imageBuffer = File.ReadAllBytes(op.FileName); 
```

如果图像是从文件 Uri 加载的（如您的示例中所示），您也可以这样做：

```
byte[] imageBuffer = File.ReadAllBytes(image.UriSource.AbsolutePath); 
```

如果您只有 BitmapImage 而没有有关从中加载它的文件的信息（例如，当它从临时文件或 Web 资源加载时），则必须通过 WPFs [BitmapEncoders](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapencoder.aspx)之一对其进行编码：

```
byte[] imageBuffer;
PngBitmapEncoder encoder = new PngBitmapEncoder();
encoder.Frames.Add(BitmapFrame.Create(image));

using (MemoryStream stream = new MemoryStream())
{
    encoder.Save(stream);
    imageBuffer = stream.GetBuffer();
} 
```

# android - 网页从安卓市场抓取应用信息

> ID：12926107
> 
> 赞同：1
> 
> 时间：2012-10-17T02:10:21.933
> 
> 标签：android, web, web-crawler

我想获取一个Android应用信息的数据集，其中包括应用名称、包名称、版本、请求的权限等。

官方的 Android 应用市场是 Google Play。市场上有数以百万计的应用程序。我想从中获取至少数万条应用信息，并将其存储到 csv 文件中。例如，这是一个应用程序的链接： [https ://play.google.com/store/apps/details?id=de.ralphsapps.snorecontrol](https://play.google.com/store/apps/details?id=de.ralphsapps.snorecontrol)

*   问题是如何获取应用程序的 url 列表？
*   如何解析网页中的信息？

有没有适合这种工作的好的网络爬虫？或者有没有脚本语言，比如python，有这样的爬取功能？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T02:18:44.050

`Google Play Store`有自己的格式来显示 HTML 中的信息对象。为所有这些编写您自己的 HTML 解析器以获取您需要的信息。

最好在 JSoup.org 上使用[JSoup](http://jsoup.org)**来**完成这项工作，

`JSoup`或作为解析器 参考我的示例教程： [Parsing HTML using JSoup](http://xjaphx.wordpress.com/2012/02/04/android-xml-adventure-parsing-html-using-jsoup/)

# browser - org.eclipse.swt.browser.Browser 未在 Eclipse RAP 应用程序中打开

> ID：12926108
> 
> 赞同：2
> 
> 时间：2012-10-17T02:10:32.167
> 
> 标签：browser, eclipse-rap

想知道是否有人可以帮助我。我正在尝试在 Eclipse RAP 应用程序中打开嵌入式浏览器。我见过的所有示例都类似于：

```
link.addSelectionListener(new SelectionAdapter() {
    @Override
    public void widgetSelected(SelectionEvent event) {
        try {
            Browser b = new Browser(parent, SWT.NONE);
            b.setText("<html><body>This is Unicode HTML content from memory</body></html>"); 
        } catch (SWTError e) {
            // Error handling here
        }

    }
}); 
```

但这并没有做任何事情（视觉上）。当我像这样用 ExternalBrowser 替换浏览器时：

```
link.addSelectionListener(new SelectionAdapter() {
    @Override
    public void widgetSelected(SelectionEvent event) {
        try {
            int browserStyle = ExternalBrowser.LOCATION_BAR;
            ExternalBrowser.open( "myPage", "http://www.stackoverflow.com", browserStyle );
        } catch (SWTError e) {
              // Error handling here
        }

    }
}); 
```

有用。虽然并不完全如愿。

我在 OS X 10.8.2 上使用 Eclipse RCP 1.4.2。

任何见解都受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:55:04.493

创建新小部件时，您必须触发重新布局以使其可见。根据您的布局，调用`parent.layout()`. 如果父级也包含在布局中并缩小到其首选大小，则必须调用`layout()`其父级。如果不确定，请布局顶层 shell。

# c# - 将 c++ OpenBLAS 库添加到 c# 项目

> ID：12926109
> 
> 赞同：0
> 
> 时间：2012-10-17T02:10:32.790
> 
> 标签：c#, c++, dll, import, blas

我正在尝试在 ac# 项目中使用 OpenBLAS（更具体地说，我正在尝试通过 Math.NET 使用它`MathNet.Numerics.Control.LinearAlgebraProvider`）。我已经成功创建了[https://github.com/xiayi/OpenBLAS/wiki/How-to-use-OpenBLAS-in-Microsoft-Visual-Studio](https://github.com/xianyi/OpenBLAS/wiki/How-to-use-OpenBLAS-in-Microsoft-Visual-Studio)之后的文件。

现在我在一个新目录中有一个 .lib 和 .dll 文件（根据**在 Visual Studio 中使用 OpenBLAS .dll 库的**小节），但我不知道从这里去哪里！

有谁知道我应该从这里做什么？我无法直接将生成的 dll 添加到我的项目中，并且从进一步阅读看来我需要使用 Visual Studio 生成一个新的 dll。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:00:02.600

使用 MathNet 提供的 NativeWrappers 解决方案文件。

MKL 和 ACML 的类似说明在这里： [http ://mathnetnumerics.codeplex.com/wikipage?title=Native%20Providers&referringTitle=Documentation](http://mathnetnumerics.codeplex.com/wikipage?title=Native%20Providers&referringTitle=Documentation)

# algorithm - 使用什么来创建流式免费游戏随机关卡？

> ID：12926111
> 
> 赞同：32
> 
> 时间：2012-10-17T02:10:39.887
> 
> 标签：algorithm, coronasdk, graph-algorithm

我需要一些建议。我正在开发一款类似于 Flow Free 的游戏，其中游戏板由网格和彩色点组成，用户必须将相同颜色的点连接在一起，而不会重叠其他线，并用完棋盘中的所有空闲空间。

我的问题是关于关卡创建的。我希望使关卡随机生成（并且至少应该能够自行解决，以便它可以给玩家提示）并且我对使用什么算法感到困惑。有什么建议么？

![游戏目标](../Images/5d58597da86fc25adda38d52b76320b2.png)

注意：图片显示了 Flow Free 的目标，这与我正在开发的目标相同。

谢谢你的帮助。:)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-17T04:03:21.133

考虑使用一对更简单、更易于管理的算法来解决您的问题：一种算法可以可靠地创建简单的、预先解决的板，另一种算法可以重新排列流程以使简单板更复杂。

如果您在x网格上使用`n`流，则第一部分构建一个简单的预求解板是微不足道的（如果您愿意的话） ：`n``n`

*   对于每个流...
    *   将头部点放在第一个开放列的顶部。
    *   将尾点放在该列的底部。

或者，您可以提供自己的手工入门板以传递到第二部分。这个阶段的唯一目标是构建一个有效的电路板，即使它只是微不足道的或预先确定的，所以保持简单是值得的。

第二部分，重新​​排列流，涉及循环每个流，查看哪个流可以与其相邻的流一起工作以增长和缩小：

*   对于一些迭代...
    *   选择随机流`f`。
    *   如果`f`是最小长度（比如 3 个方格长），则跳到下一次迭代，因为我们现在不能收缩`f`。
    *   如果 的头部点`f`在另一个流中的点旁边`g`（如果有多个`g`可供选择，则随机选择一个）...
        *   将`f`的头部点沿其流程移动一格（即，将其向尾部移动一格）。`f`现在短了一个方格，还有一个空方格。（这个谜题现在没有解决。）
        *   将相邻的点从`g`移到由 腾出的空方格中`f`。现在有一个空的正方形`g`' 点从哪里移动。
        *   用来自 的流量填充那个空白点`g`。现在`g`比本次迭代开始时长一平方。（谜题也重新得到解决。）
    *   `f`对' 的尾点重复上一步。

目前的方法是有限的（点总是邻居），但很容易扩展：

*   添加一个步骤来遍历 flow 的主体`f`，寻找更巧妙的方法来与其他流交换空间......
*   添加一个防止点移动到旧位置的步骤...
*   添加您提出的任何其他想法。

这里的整体解决方案可能不如您所追求的理想解决方案，但现在您有两个简单的算法，您可以进一步充实它们，以充当一个大型、包罗万象的算法。最后，我认为这种方法是易于管理的，不神秘，而且易于调整，如果不出意外，这是一个很好的起点。

* * *

*更新：*我根据上述步骤编写了一个概念验证。从下面的第一个 5x5 网格开始，该过程产生了随后的 5 个不同的板。有些很有趣，有些则不是，但它们对于一种已知的解决方案总是有效的。

初始点
![图 1 - 起始帧](../Images/cff30a483a00b32bab204a1a136f5104.png)

5 个随机结果*（抱歉截图不对齐）*
![图 2](../Images/288394a3c9cb165315c25b5ca1a17b65.png) ![图 3](../Images/a788efeee8d10e588cbadce1f731b67a.png) ![图 4](../Images/00b462840f6c46825a6abaa39f8d743f.png) ![图 5](../Images/ae70498f1f516bc48f649d10766c2567.png) ![图 6](../Images/98918b46686d48105160dc5d9d01aeeb.png)

和一个随机的 8x8 的好测量。起点是与上面相同的简单列方法。

![图 7](../Images/1679165c68b50a32befbf6a8da872757.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-24T09:36:44.130

创建这样一个关卡最直接的方法是找到解决它的方法。这样，您基本上可以生成任何随机启动配置，并通过尝试解决它来确定它是否是有效关卡。这将产生最多样化的关卡。

即使您找到了一种以其他方式生成关卡的方法，您仍然需要应用此求解算法来证明生成的关卡是好的；）

### 蛮力枚举

如果电路板有 NxN 单元大小，并且还有 N 种颜色可用，那么暴力枚举所有可能的配置（无论它们是否形成起始节点和结束节点之间的实际路径）将需要：

*   总共 N^2 个单元格
*   2N 个单元已被起始节点和结束节点占用
*   N^2 - 2N 个颜色尚未确定的单元格
*   N种颜色可供选择。
*   N^(N^2 - 2N) 种可能的组合。

所以，

*   对于 N=5，这意味着 5^15 = 30517578125 个组合。
*   对于 N=6，这意味着 6^24 = 4738381338321616896 组合。

换句话说，可能的组合数量一开始就相当多，但一旦你开始让棋盘变大，它的增长速度也会快得离谱。

### 限制每种颜色的单元格数量

显然，我们应该尽量减少配置的数量。这样做的一种方法是考虑每种颜色的开始和结束单元格之间的最小距离（“dMin”） - 我们知道至少应该有这么多具有​​该颜色的单元格。可以使用简单的洪水填充或 Dijkstra 算法来计算最小距离。（注意，整个下一节只讨论单元的*数量*，但没有说明它们的*位置*）

在您的示例中，这意味着（不计算开始和结束单元格）

```
dMin(orange) = 1
dMin(red) = 1
dMin(green) = 5
dMin(yellow) = 3
dMin(blue) = 5 
```

这意味着，在尚未确定颜色的 15 个单元中，必须至少有 1 个橙色、1 个红色、5 个绿色、3 个黄色和 5 个蓝色单元，也就是总共 15 个单元。对于这个特定的例子，这意味着通过最短路径（其中一个）连接每个颜色的开始和结束单元格会填满整个电路板 - 即，在用最短路径填充电路板后，不会留下未着色的单元格。（这应该被认为是“运气”，并非每个板的启动配置都会导致这种情况发生）。

通常，在这一步之后，我们有许多可以自由着色的单元格，我们称这个数字为 U。对于 N=5，

```
U = 15 - (dMin(orange) + dMin(red) + dMin(green) + dMin(yellow) + dMin(blue)) 
```

因为这些单元格可以采用任何颜色，所以我们还可以确定可以具有特定颜色的单元格的最大数量：

```
dMax(orange) = dMin(orange) + U
dMax(red)    = dMin(red) + U
dMax(green)  = dMin(green) + U
dMax(yellow) = dMin(yellow) + U
dMax(blue)   = dMin(blue) + U 
```

（在此特定示例中，U=0，因此每种颜色的最小单元数也是最大的）。

### 使用距离约束的寻路

如果我们要使用这些颜色约束强制枚举所有可能的组合，我们需要担心的组合就会少得多。更具体地说，在这个特定的示例中，我们将拥有：

```
 15! / (1! * 1! * 5! * 3! * 5!)
= 1307674368000 / 86400
= 15135120 combinations left, about a factor 2000 less. 
```

但是，这仍然没有给我们实际的路径。所以一个更好的想法是回溯搜索，我们依次处理每种颜色并尝试找到所有路径：

*   不穿过已经着色的单元格
*   不短于 dMin（颜色）且不长于 dMax（颜色）。

第二个标准将减少每种颜色报告的路径数量，这导致尝试的路径总数大大减少（由于组合效应）。

在伪代码中：

```
function SolveLevel(initialBoard of size NxN)
{
    foreach(colour on initialBoard)
    {
        Find startCell(colour) and endCell(colour)
        minDistance(colour) = Length(ShortestPath(initialBoard, startCell(colour), endCell(colour)))
    }

    //Determine the number of uncoloured cells remaining after all shortest paths have been applied.
    U = N^(N^2 - 2N) - (Sum of all minDistances)

    firstColour = GetFirstColour(initialBoard)
    ExplorePathsForColour(
        initialBoard, 
        firstColour, 
        startCell(firstColour), 
        endCell(firstColour), 
        minDistance(firstColour), 
        U)
    }
}

function ExplorePathsForColour(board, colour, startCell, endCell, minDistance, nrOfUncolouredCells)
{
    maxDistance = minDistance + nrOfUncolouredCells
    paths = FindAllPaths(board, colour, startCell, endCell, minDistance, maxDistance)

    foreach(path in paths)
    {
        //Render all cells in 'path' on a copy of the board
        boardCopy = Copy(board)
        boardCopy = ApplyPath(boardCopy, path)

        uRemaining = nrOfUncolouredCells - (Length(path) - minDistance)

        //Recursively explore all paths for the next colour.
        nextColour = NextColour(board, colour)
        if(nextColour exists)
        {
            ExplorePathsForColour(
                boardCopy, 
                nextColour, 
                startCell(nextColour), 
                endCell(nextColour), 
                minDistance(nextColour), 
                uRemaining)
        }
        else
        {
            //No more colours remaining to draw
            if(uRemaining == 0)
            {
                //No more uncoloured cells remaining
                Report boardCopy as a result
            }
        }
    }
} 
```

### 查找所有路径

这只留下 FindAllPaths(board, colour, startCell, endCell, minDistance, maxDistance) 被实现。这里的棘手之处在于我们不是在搜索最短路径，而是在由 minDistance 和 maxDistance 确定的范围内的*任何路径。*因此，我们不能只使用 Dijkstra 或 A*，因为它们只会记录到每个单元格的最短路径，而不是任何可能的弯路。

找到这些路径的一种方法是对电路板使用多维数组，其中每个单元格能够存储多个航路点，并且航路点被定义为一对（前一个航路点，到原点的距离）。一旦我们到达目的地，之前的航路点需要能够重建整个路径，并且到原点的距离防止我们超过 maxDistance。

然后可以通过从 startCell 向外使用类似洪水填充的探索来查找所有路径，其中对于给定的单元格，递归地探索每个未着色或与当前颜色相同的邻居（除了那些形成我们当前到原点的路径），直到我们到达 endCell 或超过 maxDistance。

该策略的一个改进是我们不从 startCell 向外探索到 endCell，而是从 startCell 和 endCell 向外并行探索，使用 Floor(maxDistance / 2) 和 Ceil(maxDistance / 2) 作为各自的最大距离。对于较大的 maxDistance 值，这应该将探索的单元数从 2 * maxDistance^2 减少到 maxDistance^2。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-22T23:54:06.643

**更新的答案：**我使用“双重谜题”的想法实现了一个新的生成器。这比我知道的任何以前的方法都允许更稀疏和更高质量的谜题。代码[在 github 上](https://github.com/thomasahle/numberlink/blob/master/gen/gen.py)。我会尝试写更多关于它是如何工作的细节，但这里有一个示例拼图： ![在此处输入链接描述](../Images/3d02204638e014009235a0a340d0c7b9.png)

**旧答案：** 我在[numberlink 求解器和生成器](https://github.com/thomasahle/numberlink)中实现了以下算法。In 强制执行规则，路径永远不能触及自身，这在大多数“硬核”数字链接应用程序和谜题中是正常的

1.  首先，棋盘以简单、确定的方式用 2x1 多米诺骨牌平铺。如果这是不可能的（在奇数区域纸上），则右下角将保留为单例。
2.  然后通过旋转随机的邻居对来随机打乱多米诺骨牌。在宽度或高度等于 1 的情况下不会这样做。
3.  现在，在一张奇数区域纸的情况下，右下角连接到它的相邻多米诺骨牌之一。这将永远是可能的。
4.  最后，我们可以开始寻找穿过多米诺骨牌的随机路径，并在我们通过时将它们组合起来。特别注意不要连接“邻居流”，这会产生“双重回归”的谜题。
5.  在打印拼图之前，我们会尽可能“压缩”使用的颜色范围。
6.  通过用 . 替换所有不是流头的位置来打印拼图。

我的 numberlink 格式使用 ascii 字符而不是数字。这是一个例子：

```
$ bin/numberlink --generate=35x20
Warning: Including non-standard characters in puzzle

35 20
....bcd.......efg...i......i......j
.kka........l....hm.n....n.o.......
.b...q..q...l..r.....h.....t..uvvu.
....w.....d.e..xx....m.yy..t.......
..z.w.A....A....r.s....BB.....p....
.D.........E.F..F.G...H.........IC.
.z.D...JKL.......g....G..N.j.......
P...a....L.QQ.RR...N....s.....S.T..
U........K......V...............T..
WW...X.......Z0..M.................
1....X...23..Z0..........M....44...
5.......Y..Y....6.........C.......p
5...P...2..3..6..VH.......O.S..99.I
........E.!!......o...."....O..$$.%
.U..&&..J.\\.(.)......8...*.......+
..1.......,..-...(/:.."...;;.%+....
..c<<.==........)./..8>>.*.?......@
.[..[....]........:..........?..^..
..._.._.f...,......-.`..`.7.^......
{{......].....|....|....7.......@.. 
```

在这里我通过我的求解器（相同的种子）运行它：

```
$ bin/numberlink --generate=35x20 | bin/numberlink --tubes
Found a solution!
┌──┐bcd───┐┌──efg┌─┐i──────i┌─────j
│kka│└───┐││l┌─┘│hm│n────n┌o│┌────┐
│b──┘q──q│││l│┌r└┐│└─h┌──┐│t││uvvu│
└──┐w┌───┘d└e││xx│└──m│yy││t││└──┘│
┌─z│w│A────A┌┘└─r│s───┘BB││┌┘└p┌─┐│
│D┐└┐│┌────E│F──F│G──┐H┐┌┘││┌──┘IC│
└z└D│││JKL┌─┘┌──┐g┌─┐└G││N│j│┌─┐└┐│
P──┐a││││L│QQ│RR└┐│N└──┘s││┌┘│S│T││
U─┐│┌┘││└K└─┐└─┐V││└─────┘││┌┘││T││
WW│││X││┌──┐│Z0││M│┌──────┘││┌┘└┐││
1┐│││X│││23││Z0│└┐││┌────M┌┘││44│││
5│││└┐││Y││Y│┌─┘6││││┌───┐C┌┘│┌─┘│p
5││└P│││2┘└3││6─┘VH│││┌─┐│O┘S┘│99└I
┌┘│┌─┘││E┐!!│└───┐o┘│││"│└─┐O─┘$$┌%
│U┘│&&│└J│\\│(┐)┐└──┘│8││┌*└┐┌───┘+
└─1└─┐└──┘,┐│-└┐│(/:┌┘"┘││;;│%+───┘
┌─c<<│==┌─┐││└┐│)│/││8>>│*┌?│┌───┐@
│[──[└─┐│]││└┐│└─┘:┘│└──┘┌┘┌┘?┌─^││
└─┐_──_│f││└,│└────-│`──`│7┘^─┘┌─┘│
{{└────┘]┘└──┘|────|└───7└─────┘@─┘ 
```

我已经测试了用迭代随机合并两条相邻路径的函数替换步骤 (4)。然而，它游戏的谜题要密集得多，我已经认为上面的内容几乎太密集了，很难。

这是我生成的不同大小的问题列表：[https ://github.com/thomasahle/numberlink/blob/master/puzzles/inputs3](https://github.com/thomasahle/numberlink/blob/master/puzzles/inputs3)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-17T04:03:09.363

我认为您需要分两步执行此操作。步骤 1）找到一组连接所有点的非相交路径，然后 2）增长/移动这些路径以填充整个电路板

我对第 1 步的想法是基本上同时在所有点上执行类似 Dijkstra 的算法，使路径一起增长。与 Dijkstra 类似，我认为您会希望从每个点中填充填充，使用一些启发式方法选择下一个要搜索的节点（我的直觉是，首先选择自由度最小的点，然后是距离，可能是一个很好的）。与 Dijkstra 非常不同，尽管我认为当我们有多个路径试图增长到同一个节点时，我们可能会不得不回溯。（这在较大的地图上当然可能会有相当大的问题，但在像上面那样的小地图上可能不是什么大问题。）

在开始上述算法之前，您还可以解决一些更简单的路径，主要是为了减少所需的回溯次数。具体来说，如果您可以在棋盘边缘的点之间进行跟踪，则可以保证以这种方式连接这两个点不会干扰其他路径，因此您可以简单地填写它们并将这些人带出方程。然后，您可以进一步迭代，直到通过沿着板的边界或现有路径的边界跟踪找到所有这些“快速和简单”的路径。该算法实际上将完全解决上述示例板，但无疑会在其他地方失败.. 尽管如此，执行起来会非常便宜，并且会减少您对先前算法的搜索时间。

*或者*

您可以简单地在每组点之间执行真正的 Dijkstra 算法，首先找出最近的点（或以一些随机顺序尝试它们几次）。这可能适用于相当多的情况，当它失败时，只需扔掉地图并生成一个新地图。

一旦你解决了第 1 步，第 2 步应该会更容易，尽管不一定是微不足道的。为了发展你的路径，我认为你会想要向外扩展你的路径（所以首先是最靠近墙壁的路径，向墙壁生长，然后是向外的其他内部路径，等等）。要成长，我认为你将有两个基本操作，翻转角落，并扩展到相邻的空方块对..也就是说，如果你有一条线

```
.v<<.
v<...
v....
v.... 
```

首先，您需要翻转角落以填充边缘空间

```
v<<<.
v....
v....
v.... 
```

然后你会想要扩展到相邻的开放空间对

```
v<<v.
v.^<.
v....
v....

v<<v.
>v^<.
v<...
v.... 
```

ETC..

请注意，如果存在解决方案，我所概述的内容不能保证解决方案，但我认为如果存在解决方案，您应该能够在大多数情况下找到解决方案，然后在地图没有解决方案或算法无法解决的情况下找到一张，扔掉地图，换一张试试：）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-10T14:09:47.027

你有两个选择：

1.  编写自定义求解器
2.  蛮力它。

我使用选项 (2) 来生成 Boggle 类型的板，并且非常成功。如果您选择选项 (2)，您可以这样做：

所需工具：

*   编写一个 A* 求解器。
*   写一个随机板创建者

要解决：

1.  生成仅包含端点的随机棋盘
2.  虽然板子没有解决：
    *   获得两个彼此最近但尚未解决的端点
    *   运行 A* 生成路径
    *   更新电路板，以便下一个 A* 知道新电路板布局，新路径标记为不可遍历。
3.  在循环退出时，检查成功/失败（是否使用了整个板/等）并在需要时再次运行

10x10 上的 A* 应该在百分之一秒内运行。您可能可以解决 1k+ 板/秒。所以 10 秒的运行应该让你得到几个“可用”的板。

奖励积分：

*   在为 IAP（应用内购买）关卡包生成关卡时，请记住检查镜像/旋转/反射/等，这样您就没有一个板与另一个板的副本（这只是蹩脚）。
*   提出一个衡量标准，以确定两个板是否“相似”，如果是，则放弃其中一个。

# android - 如何防止用户更改系统日期/时间（在 Android 中）？

> ID：12926118
> 
> 赞同：23
> 
> 时间：2012-10-17T02:11:51.020
> 
> 标签：android, datetime, system

我已经用谷歌搜索了，但我找不到任何建议来防止用户在 android 中更改系统日期/时间。

我们正在开发一个企业应用程序，我们希望防止设备的用户能够设置时间设置。换句话说，我们想设置一个策略来定义，用户不能在 android 设备中更改日期和时间。有什么建议可以做到这一点吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-24T19:50:51.020

这是第三种可以显着节省电池寿命的替代方案：

在用户更改时间时注册广播接收器。然后禁用应用程序，直到根据网络时间或服务器时间检查设备时间。

那些广播接收器存在。我刚刚在 Google Play 上找到了这个名为[Internal Broadcast Monitor的应用程序。](https://play.google.com/store/apps/details?id=lt.andro.broadcastlogger)

![在此处输入图像描述](../Images/bec2763f7ff1ee4bbe71ffa48c2e9438.png)

**下面是有趣的部分，我更改了时间和日期：**

![在此处输入图像描述](../Images/4e8c33d9b0eeb942b8057cf034ae1428.png)

**以下是我更改时区的部分：** ![在此处输入图像描述](../Images/3ad5f7dd0769127d40123a339b920a36.png) .

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T02:17:47.033

由于设备管理员框架中没有对此的策略支持，因此您不能。提交功能请求，它可能会在下一个版本中添加。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-15T16:28:20.217

您可以在应用程序启动时将当前时间保存到 db，如果当前时间不等于 db time+60，则每 1 分钟检查一次，将系统时间设置为 db time+60。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T03:24:52.830

我不知道有什么方法可以更改设备的默认行为。
但是，如果系统时间与网络时间不同，您可以阻止应用程序运行。或者您可以在应用程序中使用网络时间而不是系统时间。

这篇文章的答案解释了如何访问网络时间。

[如何获取“网络”时间（来自名为“使用网络提供的值”的“自动”设置），而不是手机上的时间？](https://stackoverflow.com/questions/8049912/how-can-i-get-the-network-time-from-the-automatic-setting-called-use-netw)

# javascript - Cookie 每 30 天显示一个弹出窗口

> ID：12926119
> 
> 赞同：2
> 
> 时间：2012-10-17T02:12:23.663
> 
> 标签：javascript, jquery, cookies

```
<script type="text/javascript">
jQuery(document).ready(function(){
if (document.cookie.indexOf('visited=false') == -1)
{
var fifteenDays = 1000*60*60*24*30;
var expires = new Date((new Date()).valueOf() + fifteenDays);
document.cookie = "visited=true;expires=" + expires.toUTCString();
$.colorbox({width:"400px", inline:true, href:"#exestylepopups"});
}
});
</script> 
```

我的上述代码有什么问题，每次在我的博客中加载页面时都会调用我的 facebook 之类的弹出窗口。我只是每 30 天只显示一次。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T02:24:47.297

您的特定实现看起来像是让您检查 cookie `'visited=false'`，但将 cookie 设置为，`'visited=true'`以便您的`if`语句永远不会匹配。

* * *

我建议您使用一组经过验证的 cookie 操作功能，然后您的任务将非常容易。

以下是我在环境中还没有 cookie 时使用的函数：

```
function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function eraseCookie(name) {
    createCookie(name,"",-1);
} 
```

一旦你有了这些，你可以这样做：

```
jQuery(document).ready(function() {
    var visited = readCookie('visited');
    if (!visited || visited !== "true") {
        createCookie('visited', "true", 30);
        $.colorbox({width:"400px", inline:true, href:"#exestylepopups"});
    }
}); 
```

# ruby-on-rails - find_by_column 与 where 之间的 Rails 差异

> ID：12926123
> 
> 赞同：0
> 
> 时间：2012-10-17T02:13:06.000
> 
> 标签：ruby-on-rails, activerecord

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T03:28:11.013

`.where`方法返回一个 ActiveRecord 关系，这意味着它们可以与其他此类方法和范围链接，如`Model.where(:user_id => id).published`. 动态查找器（`.find_by_name`等）返回模型实例或数组，它们不能与其他范围链接。

如果与感叹号一起使用，则动态查找器可以`ActiveRecord::RecordNotFound`在未找到预期记录（而不是 、 或空关系）时返回错误`nil`，例如)`。`[]``User.find_by_email!('example@email.com`

它们各有各的用途；您可以根据调用方法的情况来决定。

# ruby-on-rails - 在 Rails 中计算直到下一个生日的天数

> ID：12926126
> 
> 赞同：7
> 
> 时间：2012-10-17T02:13:30.160
> 
> 标签：ruby-on-rails, ruby

我有一个模型，其`date`列名为`birthday`.

我将如何计算距离用户下一个生日的天数？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-17T03:00:20.033

这是一个简单的方法。您需要确保抓住今年已经通过的案例（以及尚未通过的案例）

```
class User < ActiveRecord::Base
  attr_accessible :birthday

  def days_until_birthday
    bday = Date.new(Date.today.year, birthday.month, birthday.day)
    bday += 1.year if Date.today >= bday
    (bday - Date.today).to_i
  end
end 
```

并证明！（我添加的只是[timecop gem](https://github.com/travisjeffery/timecop)以保持今天的计算准确（2012-10-16）

```
require 'test_helper'

class UserTest < ActiveSupport::TestCase

  setup do
    Timecop.travel("2012-10-16".to_date)
  end

  teardown do 
    Timecop.return
  end

  test "already passed" do
    user = User.new birthday: "1978-08-24"
    assert_equal 313, user.days_until_birthday
  end

  test "coming soon" do
    user = User.new birthday: "1978-10-31"
    assert_equal 16, user.days_until_birthday
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T05:34:42.967

试试这个

```
require 'date'

def days_to_next_bday(bday)
  d = Date.parse(bday)

  next_year = Date.today.year + 1
  next_bday = "#{d.day}-#{d.month}-#{next_year}"

 (Date.parse(next_bday) - Date.today).to_i
end

puts days_to_next_bday("26-3-1985") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T03:03:19.887

对此进行滑动：

```
require 'date'
bday = Date.new(1973,10,8)  // substitute your records date here.
this_year  = Date.new(Date.today.year,   bday.month, bday.day )
if this_year > Date.today 
  puts this_year - Date.today
else
   puts Date.new(Date.today.year + 1,   bday.month, bday.day ) - Date.today
end 
```

我不确定 Rails 是否为您提供了任何使这更容易的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-14T14:43:43.060

这是另一种使用鲜为人知的方法来解决此问题的方法，但它们使代码更加不言自明。此外，这适用于 2 月 29 日的出生日期。

```
class User < ActiveRecord::Base
  attr_accessible :birthday

  def next_birthday
    options = { year: Date.today.year }
    if birthday.month == 2 && birthday.day == 29 && !Date.leap?(Date.today.year)
      options[:day] = 28
    end
    birthday.change(options).tap do |next_birthday|
      next_birthday.advance(years: 1) if next_birthday.past?
    end
  end
end 
```

当然，距离下一个生日的天数是：

```
(user.next_birthday - Date.today).to_i 
```

# javascript - jQuery UI 对话框未正确显示

> ID：12926127
> 
> 赞同：1
> 
> 时间：2012-10-17T02:13:32.507
> 
> 标签：javascript, jquery, jquery-ui-dialog

我试图让我的第一个[jQuery UI 对话框](http://jqueryui.com/dialog/)在用户单击按钮时弹出在用户屏幕的中心。我希望它看起来像上面那个链接的示例中的那个（就风格而言，*而不是*内容）。

在我的页面顶部，我定义了一个内部 CSS`<style>`标记，它定义了以下规则：

```
#add-btn-dlg-panel {
    display: none;
} 
```

此规则确保对话框在页面加载时不可见。

接下来，我有`<div>`定义对话框 UI 的标签：

```
<div id="add-btn-dlg-panel" title="Add new attribute value">
    <div id="attrib-type-input">
        <select id="attrib-type-sel"></select>
    </div>

    <div id="attrib-value-input"></div>

    <div id="add-config-dlg-btn-panel">
        <input id="add-config-dlg-ok-btn" type="button" value="OK"/>
        <input id="add-config-dlg-cancel-btn" type="button" value="Cancel"/>
    </div>
</div> 
```

它由一个`<select>`div 组成，该 div 将根据其他事件（在此问题的上下文之外）填充，然后是两个按钮，确定和取消。

最后，当用户单击“添加”按钮时，我有尝试绘制 UI 对话框的 jQuery：

```
$("#add-config-btn").click(function() {
    $("#add-btn-dlg-panel").show();
    $("#add-btn-dlg-panel").dialog('open');
}); 
```

据我所知，一切看起来都不错。但是当我启动浏览器 (FF) 并运行它时，当我单击“添加”按钮时，UI 对话框会在我的屏幕中间绘制（不是 CENTERED），没有边框，或者类似于 UI 对话框在上述链接中以任何方式、形状或形式。

所以我问：

*   如何使 UI 对话框居中？
*   如何设置 UI 对话框的样式，使其类似于链接中的对话框？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T02:20:39.523

**工作演示** [http://jsfiddle.net/rES7j/show/#](http://jsfiddle.net/rES7j/show/#) **或** [http://jsfiddle.net/rES7j](http://jsfiddle.net/rES7j)

**脚本**

```
 <script type='text/javascript' src='http://code.jquery.com/jquery-1.5.js'></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.js"></script>

  <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.0/themes/blitzer/jquery-ui.css"> 
```

**代码**

```
$(document).ready(function() {
    $('#theLink').click(function(){
                $( "#add-btn-dlg-panel" ).dialog( "open" );    
    });

    $( "#add-btn-dlg-panel" ).dialog({
            modal: true,
            autoOpen: false,
            height: 255,
            width: 300,
            buttons: {
                "Retrieve": function() {
                    document.forms["forgotform"].submit();
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            },
    });

}); 
```

**chrome中的工作图像**

![在此处输入图像描述](../Images/f92bf43ccee4aa73373db8b7f5b62379.png) ​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T02:23:18.937

jQuery UI 支持 position() 方法：

[jQuery 位置（）](http://jqueryui.com/position/)

# ruby - 如何按日期对约会列表进行分组？

> ID：12926129
> 
> 赞同：1
> 
> 时间：2012-10-17T02:13:54.010
> 
> 标签：ruby, ruby-on-rails-3, activerecord

我正在返回一份约会清单。

现在它们看起来像这样：

```
-Jan 1
--appointment @230
-Jan 1
--appointment @3
-Jan 1
--appointment @4
-Jan 2
--appointment @4
-Jan 2
--appointment @5 
```

我想返回列表

```
-Jan 1
--appointment @230
--appointment @3
--appointment @4
-Jan 2
--appointment @4
--appointment @5 
```

约会有一个“start_at”字段，它是一个日期时间。比较简单。只是不确定如何遍历集合，然后以最合理的方式对其进行分组。

谢谢。

用户（是用户或培训师） has_many :appointments has_many :trainer_appointments, :class_name => "Appointment", :foreign_key => "trainer_id"

预约

```
# Table name: appointments
#
#  id         :integer          not null, primary key
#  trainer_id :integer
#  start_at   :datetime
#  created_at :datetime         not null
#  updated_at :datetime         not null
#  user_id    :integer 
```

这是一些播放代码：u.trainer_appointments

```
=> [#<Appointment id: 6, trainer_id: 1, start_at: "2012-11-18 13:08:00", created_at: "2012-10-17 02:01:42", updated_at: "2012-10-17 02:01:42", user_id: 2>, #<Appointment id: 7, trainer_id: 1, start_at: "2012-11-18 13:08:00", created_at: "2012-10-17 02:02:00", updated_at: "2012-10-17 02:02:00", user_id: 2>, #<Appointment id: 8, trainer_id: 1, start_at: "2012-11-24 13:08:00", created_at: "2012-10-17 02:03:28", updated_at: "2012-10-17 02:03:28", user_id: 2>] 
```

返回 3 个约会。两个在同一天。1 在不同的日子。

想以按日期分组的方式返回它。我尝试过这样的事情来弄清楚但迷路了：

```
u.trainer_appointments.collect {|each| each.start_at}.uniq.collect {|each| u.trainer_appointments.find_by_start_at(each.to_date.beginning_of_day..each.to_date.end_of_day)} 
```

其中返回了两个约会。两个日期之间。第一天错过了第二个。

我知道代码在很多层面上都是错误的。我只是想玩弄迭代。虽然没有得到我想要的。可能是因为 uniq 以某种方式限制了返回大小，即使我期望在最终数组中返回一个范围。

我不确定迭代分组需要什么实际结构。这不是我的专长。数组中的数组分组？我将如何在视图中迭代它？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:30:38.487

您收藏的用户`group_by`。

[Ruby 实现](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-group_by)要求传递给它的表达式计算为布尔值。

[Rails 实现](http://api.rubyonrails.org/classes/Enumerable.html#method-i-group_by)允许您传入一个列，并按该列对它进行分组。

您的代码应如下所示

```
u.trainer_appointments.
  collect {|a| a.start_at}.
  uniq.collect {|b| 
    u.trainer_appointments.
    group_by(b.to_date.beginning_of_day..b.to_date.end_of_day)
  } 
```

替换`find_by_start_at`为`group_by`

**编辑**：扩大范围！

```
# in User model (or the model for current_user)
class User < ActiveRecord::Base
  scope :mine, where(:trainer_id => current_user)
  scope :days!, where(:start_at.to_date.beginning_of_day)
  # the ! is there because "days" is a Ruby method
end

# in controller...
@client_appointments = @client.appointments.mine.group_by(&:days!) 
```

注意：我不确定是`group_by(days!)`,`group_by(:days!)`还是`group_by(&:days!)`. 你可能不得不玩弄它，看看什么对你有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T02:56:18.657

如果您不使用数据库的分组功能，最简单的方法是使用块：

```
require 'date'

# Make some test data
Appointment = Struct.new(:start_at)
data = ['2012-01-01 14:30', '2012-01-01 15:00', '2012-01-01 16:00',
 '2012-01-02 16:00', '2012-01-02 17:00']

appointments = data.map do |time|
  Appointment.new DateTime.parse(time)
end

# Use chunk to group array elements
appointments.
  sort { |a,b| b.start_at <=> a.start_at }. # always sort before chunking
  chunk { |appt| appt.start_at.to_date }. # chunk on day of the appointment
  each do |day, appts| # chunk emits two-element arrays
    puts
    puts "Day " + day.to_s
    appts.each { |appt| puts appt.start_at.strftime('%H:%M') }
  end 
```

输出：

```
Day 2012-01-02
17:00
16:00

Day 2012-01-01
16:00
15:00
14:30 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T08:43:37.907

最终使用以下内容：

```
 @client_appointments = @client.appointments.find(:all, :conditions => {:trainer_id => current_user}).group_by {|a| a.start_at.to_date.beginning_of_day } 
```

然后像这样迭代它：

```
- @client_appointments.sort.each do |month, appointments|
  %h2
    = month.to_s(:day_month)
  = render appointments 
```

# android - 顶点属性未传递给着色器

> ID：12926132
> 
> 赞同：3
> 
> 时间：2012-10-17T02:14:25.187
> 
> 标签：android, opengl-es, opengl-es-2.0, glsl

我刚刚将我的代码切换为使用单独的着色器，而不是传递一个布尔统一来决定使用哪种算法。不幸的是，经过激烈的测试，我发现其中一个属性（光晕）没有通过新的着色器。但是，它使用的另一个属性（位置）**是**通过的。

缩略代码如下：

```
Java code:
    // Attributes
    protected static int position = 0;
    protected static int colour = 1;
    protected static int texture = 2;
    protected static int halo = 3;
    protected static int normal = 4;

    protected static int program1;
    protected static int program2;

    ...

    // Linking shader1
    GLES20.glBindAttribLocation(program1, position, "position");
    GLES20.glBindAttribLocation(program1, colour, "colour");
    GLES20.glBindAttribLocation(program1, texture, "texCoord");
    GLES20.glBindAttribLocation(program1, normal, "normal");

    GLES20.glLinkProgram(program1);         

    ...

    // Linking shader2
    GLES20.glBindAttribLocation(program2, position, "position");
    GLES20.glBindAttribLocation(program2, halo, "halo");

    GLES20.glLinkProgram(program2);         

    ...

    GLES20.glUseProgram(program1);

    GLES20.glVertexAttribPointer(
        position,
        3,
        GLES20.GL_FLOAT,
        false,
        0,
        buffer);

    ...

    //Render with program1

    ...

    GLES20.glUseProgram(program2);

    GLES20.glVertexAttribPointer(
        halo,
        1,
        GLES20.GL_FLOAT,
        false,
        0,
        doHaloBuffer);

    GLES20.glEnable(GLES20.GL_BLEND);
    GLES20.glDisable(GLES20.GL_DEPTH_TEST);

    ...

    // Using lines for testing purposes
    GLES20.glDrawElements(GLES20.GL_LINE_LOOP, haloIndexCount, GLES20.GL_UNSIGNED_SHORT, haloIndexBuffer);

    ... 
```

片段着色器只是简单的“渲染你得到的纹理和颜色”着色器

```
shader1.vsh:
    attribute vec3 position;
    attribute vec4 colour;
    attribute vec2 texCoord;
    attribute vec3 normal;

    ...

    varying vec2 fragTexCoord;
    varying vec4 fragColour;

    ...

    // All attributes used at some point

shader2.vsh:
    attribute vec3 position;
    attribute float halo;

    varying vec4 fragColour;

        ...
        vec4 colour = vec4(1.0, 1.0, 0.0, 1.0);

        if(halo > 0.5){
            colour.g = 0.0;

        ...

        }

        fragColour = colour;

        ... 
```

如果我更改`halo > 0.5`或`halo == 0.0`交换上述语句中的绿色值，则呈现红色，否则呈现黄色。我尝试将输入缓冲区更改为全部 1.0 以进行测试，但没有任何区别。*光环*似乎没有被穿过。

以前，我将两个着色器合并，并有一个布尔统一来决定运行哪个代码，它运行良好。其他一切都没有改变；输入缓冲区相同，计数相同，只是我现在使用单独的着色器不同。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T02:57:05.433

在使用 glDrawElements 渲染之前检查是否启用了 halo 属性

# mysql - mysql 在多行条件下的不同列

> ID：12926135
> 
> 赞同：4
> 
> 时间：2012-10-17T02:14:34.903
> 
> 标签：mysql

我有一个带有下表的mysql数据库（item_preset）：

```
+-----+-----------+---------+-------+ 
| id  | preset_id | item_id | value |
+-----+-----------+---------+-------+
| 1   | 1         | 1       | 2     | 
| 2   | 1         | 2       | 1     | 
| 3   | 1         | 4       | 60    | 
| 4   | 1         | 3       | 16    | 
| 5   | 1         | 3       | 17    | 
| 6   | 1         | 3       | 18    |
| 7   | 1         | 3       | 25    |
| 8   | 1         | 3       | 26    | 
| 9   | 1         | 3       | 27    | 
| 10  | 2         | 1       | 3     | 
| 11  | 2         | 2       | 0     | 
| 12  | 2         | 4       | 0     | 
| 13  | 2         | 3       | 16    | 
| 14  | 2         | 3       | 17    | 
| 15  | 2         | 3       | 19    | 
| 16  | 2         | 3       | 20    | 
| 17  | 2         | 3       | 21    | 
| 18  | 3         | 1       | 2     | 
| 19  | 3         | 2       | 0     | 
| 20  | 3         | 4       | 0     | 
| 21  | 3         | 3       | 25    | 
| 22  | 3         | 3       | 28    | 
| 23  | 4         | 1       | 1     | 
| 24  | 4         | 2       | 1     | 
| 25  | 4         | 4       | 120   | 
| 26  | 4         | 3       | 16    | 
| 27  | 4         | 3       | 17    |         
| 28  | 4         | 3       | 18    | 
| 29  | 4         | 3       | 22    | 
| 30  | 4         | 3       | 23    | 
| 31  | 4         | 3       | 24    | 
| 32  | 6         | 1       | 3     | 
| 33  | 6         | 2       | 1     | 
| 34  | 6         | 4       | 90    | 
| 35  | 6         | 3       | 18    | 
| 36  | 6         | 3       | 22    | 
| 37  | 6         | 3       | 23    | 
| 38  | 6         | 3       | 24    | 
| 39  | 6         | 3       | 29    | 
| 40  | 6         | 3       | 30    | 
+-----+-----------+---------+-------+ 
```

我想做的是根据多行的条件获取不同的 preset_id。例如，要获得 preset_id 1，我需要所有条件为真（item_id = 1 和 value_id = 2）、（item_id = 2 和 value = 1）等...

我尝试使用以下方法：从 item_preset 中选择不同的预设 ID，其中 (item_id = 1 和 value = 2) 和 (item_id = 2 和 value = 1) 和 (item_id = 4 和 value = 60);

但得到一个空集。如果我尝试使用 Or's 而不是，我会得到所有符合任何条件的预设 ID。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T02:30:26.017

你可能想试试这个东西，

```
SELECT   preset_id
FROM    tableName
WHERE   (item_id = 1 and value = 2) OR 
        (item_id = 2 and value = 1) OR
        (item_id = 4 and value = 60)
GROUP BY preset_id
HAVING COUNT(*) = 3 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/c9679/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T02:26:07.503

更多括号，

```
select distinct(preset_id) from item_preset where ((item_id = 1 and value = 2) or (item_id = 2 and value = 1) or (item_id = 4 and value = 60)); 
```

并且 value 是 a `keyword`- 不要将 value 用作 a`column name`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T02:27:01.307

你可以尝试这样的事情：

```
 select distinct preset_id from item_preset 
where preset_id in (select preset_id from item_preset where item_id = 1 and value = 2) 
and preset_id in (select preset_id from item_preset where item_id = 2 and value = 1) 
and preset_id in (select preset_id from item_preset where item_id = 4 and value = 60); 
```

# android - content://mms-sms/conversations/ 在 Android ICS 三星返回 NullPointerException

> ID：12926141
> 
> 赞同：6
> 
> 时间：2012-10-17T02:15:30.663
> 
> 标签：android, sms, uri, android-contentprovider

我正在开发 SMS 应用程序，需要列出 SMS 对话。尝试使用 uri 访问内容提供者时发现问题`content://mms-sms/conversations/`。它在 Android 2.3 上运行良好，但在 Android 4.0.3 Samsung Galaxy Tab 2 上运行时返回错误：

```
 10-17 09:04:51.035: E/AndroidRuntime(22600): FATAL EXCEPTION: main
 10-17 09:04:51.035: E/AndroidRuntime(22600):
 java.lang.RuntimeException: Unable to start activity
 ComponentInfo{com.yooi/com.yooi.ui.MainActivity}:
 android.view.InflateException: Binary XML file line #6: Error
 inflating class fragment 10-17 09:04:51.035: E/AndroidRuntime(22600):
    at
 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
 10-17 09:04:51.035: E/AndroidRuntime(22600):   at
 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
 10-17 09:04:51.035: E/AndroidRuntime(22600):   at
 android.app.ActivityThread.access$600(ActivityThread.java:128) 10-17
 09:04:51.035: E/AndroidRuntime(22600):     at
 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
 10-17 09:04:51.035: E/AndroidRuntime(22600):   at
 android.os.Handler.dispatchMessage(Handler.java:99) 10-17
 09:04:51.035: E/AndroidRuntime(22600):     at
 android.os.Looper.loop(Looper.java:137) 10-17 09:04:51.035:
 E/AndroidRuntime(22600):   at
 android.app.ActivityThread.main(ActivityThread.java:4514) 10-17
 09:04:51.035: E/AndroidRuntime(22600):     at
 java.lang.reflect.Method.invokeNative(Native Method) 10-17
 09:04:51.035: E/AndroidRuntime(22600):     at
 java.lang.reflect.Method.invoke(Method.java:511) 10-17 09:04:51.035:
 E/AndroidRuntime(22600):   at
 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
 10-17 09:04:51.035: E/AndroidRuntime(22600):   at
 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557) 10-17
 09:04:51.035: E/AndroidRuntime(22600):     at
 dalvik.system.NativeStart.main(Native Method) 10-17 09:04:51.035:
 E/AndroidRuntime(22600): Caused by: android.view.InflateException:
 Binary XML file line #6: Error inflating class fragment 10-17
 09:04:51.035: E/AndroidRuntime(22600):     at
 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
 10-17 09:04:51.035: E/AndroidRuntime(22600):   at
 android.view.LayoutInflater.rInflate(LayoutInflater.java:739) 10-17
 09:04:51.035: E/AndroidRuntime(22600):     at
 android.view.LayoutInflater.inflate(LayoutInflater.java:489) 10-17
 09:04:51.035: E/AndroidRuntime(22600):     at
 android.view.LayoutInflater.inflate(LayoutInflater.java:396) 10-17
 09:04:51.035: E/AndroidRuntime(22600):     at
 android.view.LayoutInflater.inflate(LayoutInflater.java:352) 10-17
 09:04:51.035: E/AndroidRuntime(22600):     at
 com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:273)
 10-17 09:04:51.035: E/AndroidRuntime(22600):   at
 android.app.Activity.setContentView(Activity.java:1835) 10-17
 09:04:51.035: E/AndroidRuntime(22600):     at
 com.yooi.ui.MainActivity.onCreate(MainActivity.java:17) 10-17
 09:04:51.035: E/AndroidRuntime(22600):     at
 android.app.Activity.performCreate(Activity.java:4465) 10-17
 09:04:51.035: E/AndroidRuntime(22600):     at
 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
 10-17 09:04:51.035: E/AndroidRuntime(22600):   at
 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
 10-17 09:04:51.035: E/AndroidRuntime(22600):   ... 11 more 10-17
 09:04:51.035: E/AndroidRuntime(22600): Caused by:
 java.lang.NullPointerException 10-17 09:04:51.035:
 E/AndroidRuntime(22600):   at
 android.os.Parcel.readException(Parcel.java:1334) 10-17 09:04:51.035:
 E/AndroidRuntime(22600):   at
 android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:181)
 10-17 09:04:51.035: E/AndroidRuntime(22600):   at
 android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:135)
 10-17 09:04:51.035: E/AndroidRuntime(22600):   at
 android.content.ContentProviderProxy.query(ContentProviderNative.java:358)
 10-17 09:04:51.035: E/AndroidRuntime(22600):   at
 android.content.ContentResolver.query(ContentResolver.java:311) 10-17
 09:04:51.035: E/AndroidRuntime(22600):     at
 com.yooi.ui.SmsThreadListActivity.getThreadListCursor(SmsThreadListActivity.java:146)
 10-17 09:04:51.035: E/AndroidRuntime(22600):   at
 com.yooi.ui.SmsThreadListActivity.onCreateView(SmsThreadListActivity.java:95)
 10-17 09:04:51.035: E/AndroidRuntime(22600):   at
 android.app.FragmentManagerImpl.moveToState(FragmentManager.java:806)
 10-17 09:04:51.035: E/AndroidRuntime(22600):   at
 android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1010)
 10-17 09:04:51.035: E/AndroidRuntime(22600):   at
 android.app.FragmentManagerImpl.addFragment(FragmentManager.java:1108)
 10-17 09:04:51.035: E/AndroidRuntime(22600):   at
 android.app.Activity.onCreateView(Activity.java:4243) 10-17
 09:04:51.035: E/AndroidRuntime(22600):     at
 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:673)
 10-17 09:04:51.035: E/AndroidRuntime(22600):   ... 21 more 
```

我花了很多时间在谷歌上搜索它，但仍然没有找到答案。任何知道的人请帮助我，我被这个烦人的问题困住了:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T07:40:34.997

可以通过此查询检索对话列表：

```
Uri.parse("content://mms-sms/conversations?simple=true"); 
Cursor cursor = context.getApplicationContext().getContentResolver().query(uri, null, null, null, null); 
```

这里的关键点是 URI `content://mms-sms/conversations?simple=true`。

看[这里](https://stackoverflow.com/questions/13553046/sgs-3-bug-related-to-sms-conversations-list)

# java - 输入键上的 JTextField 闪烁黑色

> ID：12926146
> 
> 赞同：1
> 
> 时间：2012-10-17T02:16:20.570
> 
> 标签：java, swing, jtextfield

我正在使用 swing 制作游戏画布，并决定使用`JTextField`'s 在面板中输入用户名和密码。

我正在缓冲图像，然后将其渲染到屏幕上，而不是实时将所有内容直接绘制到面板上。

虽然我遇到了一个问题，我画了一个背景并将我的两个文本字段都设置为不透明，但似乎每当我在这些文本字段中输入一些内容时，它都会闪烁一个黑框`JTextField`。

它发生在我的用户名和密码字段中。知道这可能是什么原因吗？

其他有用信息：每当我单击文本框时，两个组件都会在第一个字符所在的位置闪烁黑色。

编辑 - 我刚刚注意到我的登录按钮在 和 时也闪烁`MOUSE_ENTERED`黑色`MOUSE_EXIT`。

```
public class GamePanel extends JPanel implements Runnable {

public GamePanel(int width, int height) {
    this.pWidth = width; 
    this.pHeight = height;

    setController(new LoginGameController(this));

    setPreferredSize( new Dimension(pWidth, pHeight));
    setBackground(Color.BLACK);

    setFocusable(true);
    requestFocus();    // the JPanel now has focus, so receives key events

    // create game components

    addMouseListener(this);
    addKeyListener(this);

    setLayout(null);

    startGame();
}
 private void startGame()
  // initialise and start the thread 
  { if (animator == null) {
      animator = new Thread(this);
      animator.start();
    }
  }

public void run() {
    while(true) {
          gameUpdate(); 
          if(getGraphics() != null){
              gameRender();   // render the game to a buffer
              paintScreen();  // draw the buffer on-screen
          }
          try {
            Thread.sleep(28);
          } catch (InterruptedException e) {}
    }
}

private void paintScreen() {
    Graphics2D g = (Graphics2D) getGraphics();

    if ((g != null) && (img != null))
            g.drawImage(img, 0, 0, null);

    Toolkit.getDefaultToolkit().sync();
    g.dispose();
}

private void gameRender() {
    if(getWidth() > 0 && getHeight() > 0)
        img = createImage(getWidth(), getHeight());

    if(img != null) {
        Graphics2D g = (Graphics2D) img.getGraphics();
        g.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
        g.setColor(Color.BLACK);
        g.fillRect(0, 0, pWidth, pHeight);

        getController().render(img);

        paintComponents(img.getGraphics());

    }
}

} 
```

这是文本字段：（从一个使用 getPanel() 完全调用 GamePanel 的单独类...）

```
//Setup Login fields
    usernameTF = new JTextField();
    usernameTF.setOpaque(false);
    usernameTF.getCaret().setBlinkRate(0);
    usernameTF.setForeground(Color.WHITE);
    usernameTF.setBounds(USERNAME_FIELD);
    usernameTF.setBorder(null);
    getPanel().add(usernameTF);

    passwordTF = new JPasswordField();
    passwordTF.setOpaque(false);
    passwordTF.getCaret().setBlinkRate(0);
    passwordTF.setForeground(Color.WHITE);
    passwordTF.setBounds(PASSWORD_FIELD);
    passwordTF.setBorder(null);
    getPanel().add(passwordTF);

    loginBtn = new JButton();
    loginBtn.setOpaque(false);
    loginBtn.setBackground(null);
    loginBtn.setBorder(null);
    loginBtn.setBounds(LOGIN_BUTTON);
    loginBtn.addMouseListener(getPanel());
    getPanel().add(loginBtn); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T02:56:22.547

基本问题是，您在更新图形时绕过了 Swings 重绘过程并且不遵守 EDT。

`JComponent#getGraphics`是一个临时/临时缓冲区，将在下一次重绘时重新绘制。此外，如果您没有创建图形，则不应丢弃它！

```
public void run() {
    while(true) {
          gameUpdate(); 
          if(getGraphics() != null){
              gameRender();   // render the game to a buffer
              try {
                  SwingUtilities.invokeAndWait(new Runnable() {
                      public void run() {
                          paintScreen();  // draw the buffer on-screen
                      }
                  });
              } catch (Exception exp) {
                  exp.printStackTrace(); // please clean this up
              }
          }
          try {
            Thread.sleep(28);
          } catch (InterruptedException e) {}
    }
} 
```

我不知道这是否会解决它，但它不会受到伤害。（这会影响你的 FPS，你应该考虑绘画需要多长时间以及你想等待多长时间）

或者，`paintScreen()`您可以调用`repaint`（或已经`paintScreen`这样做）并覆盖该`paintComponent`方法来绘制缓冲区，而不是调用。

这将允许 Swing 正确地恢复对绘制过程的控制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T03:17:10.627

一个窗口或组件至少有三种重绘方式。

1.  当操作系统丢失部分窗口缓冲区时，根据需要从操作系统请求。
2.  当库组件改变其状态时，根据需要从库组件中获取。
3.  通过手动操作自己的帧缓冲区。

通常，以下途径是活跃的：

操作系统可以请求更新特定的矩形。这是由工具包拾取的。`repaint`此外，组件也可以通过其方法向工具包发出其更改的信号。该工具包会持续收集合并传入的重绘请求一段时间，然后要求窗口重绘特定的矩形。窗口的默认操作是通过调用其`paintComponent`不与实体子级重叠的方法来绘制自身，然后递归绘制其组件。

如果您自己进行渲染，*工具包也会这样做*。由于您没有覆盖您的`paintComponent`，因此当此方法运行时，它将作为默认值。默认操作是什么都不做。该工具包然后拾取空帧缓冲区并在其上绘制按钮（不绘制其背景）。

您可以禁用工具包的渲染过程并自己进行所有渲染（获取缓冲区，在其中绘制，然后提交）。您可以调用该[`setIgnoreRepaint(true)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Component.html#setIgnoreRepaint%28boolean%29)方法来忽略操作系统的请求。

# visual-studio - 将命令行参数添加到 TeamCity 中的 Visual Studio 项目

> ID：12926147
> 
> 赞同：0
> 
> 时间：2012-10-17T02:16:38.117
> 
> 标签：visual-studio, teamcity, command-line-arguments

如果我在 Visual Studio 中使用命令行选项“--xx”运行 c++ 项目/解决方案，如何从 TeamCity 执行完全相同的操作？

我已经搜索并找不到任何选项。

看起来像“命令行参数”的一件事实际上是为 MSBuild 指定的。

我必须运行解决方案 - 而不仅仅是解决方案生成的可执行文件。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:32:23.637

您的 Visual Studio 构建是使用服务器上的 MSBuild 执行的，名称可能有点令人困惑，但参数的功能应该与使用 MSBuild 参数框的方式相同，就像将它们传递给 Visual Studio 一样。

如果使用该参数框使其工作存在问题，我们将需要有关您需要运行的命令和您需要的行为的更多信息。

**编辑以下提问者的评论**

实际上这里的问题是，Visual Studio 构建实际上并不*存在*于 TeamCity 中，Visual Studio 构建实际上只是针对您的 Visual Studio 解决方案运行 MsBuild，就 Google 测试而言，它与您的问题有很大不同。

要解决此问题，您可能必须将构建运行程序更改为仅构建您的解决方案并运行 Google 测试的 MsBuild 脚本。值得庆幸的是，互联网提供了：

[http://code.google.com/p/msbuildteamcitytasks/wiki/RunGoogleTests](http://code.google.com/p/msbuildteamcitytasks/wiki/RunGoogleTests)

以上是一些声称将 GoogleTest 结果与 TeamCity 完全集成的 MsBuild 任务，为您完成这方面的所有工作。这样做的结果是您只需要一个非常简短的构建脚本，在您的解决方案上调用 MsBuild，然后根据需要调用该 MsBuild Task。由于我没有使用它们，我无法确认它们的工作情况或设置的容易程度，但页面上的文档暗示它应该相当容易组合在一起。

下面是一个 MsBuild 的片段，它将构建您的解决方案

```
<MSBuild Projects="@(BuildProjects)" Targets="Rebuild" BuildInParallel="true" Properties="Configuration=Debug;Platform=$(Platform)">
  <Output ItemName="DebugOutputs" TaskParameter="TargetOutputs"/>
</MSBuild> 
```

其中每个 $() 变量是 TeamCity 配置中的系统属性 @(BuildProjects) 是使用此生成的解决方案列表：

```
<ItemGroup>
   <BuildProjects Include="$(WorkingArea)\**\*.sln" />
</ItemGroup> 
```

您当然可以对所有这些变量进行硬编码，或者根据需要更改参数，但是这个示例将给您一些在其他项目上重用脚本的自由（它不是一个完整的脚本，还有一些额外的结构内容可以解决外部）。

您当然可以根据需要为脚本构建更多功能，或者使其尽可能简单以使其易于理解。

可从以下位置获得有关 MsBuild 脚本的更多文档： [http ://www.universalthread.com/ViewPageArticle.aspx?ID=61](http://www.universalthread.com/ViewPageArticle.aspx?ID=61) [http://codingcockerel.co.uk/2008/04/15/automating-the- build-with-msbuild/](http://codingcockerel.co.uk/2008/04/15/automating-the-build-with-msbuild/) [http://www.codeproject.com/Articles/12985/Practical-NET2-and-C-2-An-introduction-to-MSBuild](http://www.codeproject.com/Articles/12985/Practical-NET2-and-C-2-An-introduction-to-MSBuild)

如果你需要的话，我敢肯定还有更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:46:08.537

好吧，在**TeamCity**中（*我使用的是 6.5.x 版本*），当您添加新的构建步骤时，根据您的要求选择构建运行器作为**Visual Studio (sln)**或**Visual Studio 2003**，然后您将获得通过的选项命令行参数。

您使用什么版本的 TeamCity？

# android - Http删除在Android中收到错误请求

> ID：12926151
> 
> 赞同：0
> 
> 时间：2012-10-17T02:16:54.770
> 
> 标签：android, http

我正在使用 Android http 东西来注册/注销服务器。我有一个使用 HttpDelete 的 DELETE 请求。当我尝试调用它时，我收到 Http401 'Bad request' 错误。我不知道为什么会这样。请帮我。

这是我的代码：

```
HttpUtils.java

private BasicHttpParams mParams;
private UsernamePasswordCredentials mCredentials = null;
private ResponseHandler mResponseHandler = null;

public void setUserCredentials(String userName, String password) {
     this.mCredentials = new UsernamePasswordCredentials(userName, password);
}

public void setResponseHandler(ResponseHandler responseHandler){
    this.mResponseHandler = responseHandler;
}

public Result<String> delete(String url){
    Result<String> result = new Result<T>();
    result.setStatus(Result.FAIL);

        try {
         DefaultHttpClient httpClient = new DefaultHttpClient(mParams);
         httpClient.setParams(mParams);
         httpClient.getCredentialsProvider().setCredentials(new AuthScope(null, -1), mCredentials);

         HttpResponse response = httpClient.execute(new HttpDelete(url));
         result.setResult(mResponseHandler.handleResponse(response));
         result.setStatus(Result.SUCCESS);
    } catch (IllegalArgumentException e) {
          e.printStackTrace();
          result.setMessage(e.getMessage());
    } catch (ClientProtocolException e) {
          e.printStackTrace();
          result.setMessage(e.getMessage());
    } catch (ConnectTimeoutException e) {
          result.setMessage("Connection timed out.");
    } catch (IOException e) {
          e.printStackTrace();
          result.setMessage(e.getMessage());
    } 

    return result;
}

UnregisterTask.java
    @Override
    protected Void doInBackground(String... urls) {
        if (urls==null || urls.length!=1)
            return null;

        String url = urls[0];

                HttpUtils httpUtils = new HttpUtils();
                httpUtils.setUserCredentials("userid", "password");
                httpUtils.setResponseHandler(new UnrgisterHandler());
        httpUtils.delete(url);

        Result<String> result = aClient.delete(url);
        if (result!=null || result.result != null){
                     //Do Something
                 }

    }

//UnrgisterActivity.java

public void onUnregisterButtonClick(View view){
     UnregisterTask task = new UnregisterTask(this);
     task.execute(ServerConfig.getIdmServer() + ServerConfig.DELETE_DEVICE + "myid");
} 
```

收到错误：

Apache Tomcat/7.0.26 - 错误报告

# HTTP 状态 400 -

**类型**状态报告

**信息**

**描述**客户端发送的请求语法错误（）。

### Apache Tomcat/7.0.26

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:51:19.967

我自己修复了它，但我不清楚为什么会发生错误。在搜索如何设置基本身份验证后，我更改了代码。

```
public Result<T> delete(String url)

        Result<T> result = new Result<T>();
        result.setStatus(Status.FAIL);

        try {
            DefaultHttpClient http = new DefaultHttpClient();

            if (this.mCredentials!=null){
                CredentialsProvider credProvider = new BasicCredentialsProvider();
                credProvider.setCredentials(new AuthScope(AuthScope.ANY_HOST, AuthScope.ANY_PORT), this.mCredentials);
                http.setCredentialsProvider(credProvider);
            }

            HttpDelete delete = new HttpDelete(url);
            //delete.setEntity(new StringEntity(data, "UTF8"));
            delete.addHeader("Content-type", JSON_TYPE);
            HttpResponse response = http.execute(delete);
            result.setResult(mResponseHandler.handleResponse(response));
            result.setStatus(Result.Status.SUCCESS);

        } catch (IllegalArgumentException e) {
            e.printStackTrace();
            result.setMessage(e.getMessage());
        } catch (ClientProtocolException e) {
            e.printStackTrace();
            result.setMessage(e.getMessage());
        } catch (ConnectTimeoutException e) {
            result.setMessage("Connection timed out.");
        } catch (IOException e) {
            e.printStackTrace();
            result.setMessage(e.getMessage());
        } 

        return result;
    } 
```

还是有点混乱。无论如何，现在它的魅力。

# asp.net - 为什么我的 ASP GridView 分页不起作用？

> ID：12926152
> 
> 赞同：0
> 
> 时间：2012-10-17T02:16:57.673
> 
> 标签：asp.net, gridview, postback, paging

我有一个相当简单的 asp 网格视图，绑定到对象数据源。我想要的是按钮单击时的此gridview 更新，其结果是动态的，具体取决于文本框中的值（它是搜索屏幕的基础）。

到目前为止，一切都是这样工作的：

ASPX 文件：

```
<h3>Search Parameters</h3>
<div>
   Account Name
   <asp:TextBox runat="server" ID="AccountName"></asp:TextBox>
</div>

<asp:Button ID="Search" runat="server" Text="Search" OnClick="Search_Click" />

<asp:GridView runat="server" ID="SearchGrid" DataSourceID="ObjectDataSource1" AutoGenerateColumns="False" Width="100%" AllowPaging="True" CellPadding="4" ForeColor="#333333" GridLines="None" >
   <Columns>
      <asp:BoundField DataField="PartyID" HeaderText="Party ID" SortExpression="PartyID" />
      <asp:BoundField DataField="PartyName" HeaderText="Party Name" SortExpression="PartyName" />
       <asp:BoundField DataField="CompleteAddress" HeaderText="Address" SortExpression="CompleteAddress" />
     </Columns>
     <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
 </asp:GridView>

 <asp:ObjectDataSource ID="ObjectDataSource1" runat="server" OldValuesParameterFormatString="original_{0}" SelectMethod="GetData" TypeName="DIS.Data.DataSetAccountsTableAdapters.GetAccountsBySearchParametersTableAdapter">
   <SelectParameters>
      <asp:Parameter Name="PartyName" Type="String" />
   </SelectParameters>
</asp:ObjectDataSource> 
```

ASPX.CS 文件：

```
protected void Search_Click(object sender, EventArgs e)
{
   ObjectDataSource1.SelectParameters["PartyName"].DefaultValue = AccountName.Text;
 } 
```

从表面上看，一切正常。用户在帐户名称框中输入文本，点击搜索，网格视图将更新为适当的值。

当我们获得足够的行来生成分页时，就会出现问题。页面链接显示在 GridView 上，但单击它们根本没有效果 - 值将在第 1 页上保持一致。

我相信这可能与单击页面链接时的回发有关，但不幸的是，我在这方面的知识还不够强大，无法真正诊断到底发生了什么。

任何帮助将不胜感激最好的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:59:53.680

好的，在进一步测试中，它似乎不是 GridView 特定的问题。

我们也使用 JQuery mobile，似乎是那些脚本导致了问题。禁用它们消除了问题。

# ruby-on-rails - 为什么 request.remote_ip.encoding 是 ASCII-8BIT？

> ID：12926153
> 
> 赞同：2
> 
> 时间：2012-10-17T02:17:15.830
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sqlite, encoding

的输出`<%= request.remote_ip.encoding %>`是`ASCII-8BIT`。

当我将`request.remote_ip`值存储在 SQLite 中时，会出现“为[列 'remote_ip' 上](https://stackoverflow.com/questions/12912285/binary-data-inserted-for-string-type-on-column-remote-ip/)[的类型插入二进制数据`string`](https://stackoverflow.com/questions/12912285/binary-data-inserted-for-string-type-on-column-remote-ip/)”消息。

那么，我应该在存储到 SQLite 之前“强制编码”吗？或者，有没有我可以`request.remote_ip`默认`UTF-8`（或可能`ASCII-7BIT`）的配置？

```
OS X Lion
ruby 1.9.3p194 
Rails 3.2.8
sqlite3 (1.3.6)
sqlite3-ruby (1.3.2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-14T07:25:42.447

我遇到了类似的问题并在这里阅读了讨论：[https](https://github.com/rails/rails/issues/2743) ://github.com/rails/rails/issues/2743 。我唯一的解决方法是使用 force_encoding('UTF-8') 来确保 remote_ip 字符串编码是 utf-8。

# javascript - 允许用户在浏览器上选择和播放音频或视频文件

> ID：12926159
> 
> 赞同：0
> 
> 时间：2012-10-17T02:18:11.967
> 
> 标签：javascript, html, audio, input

我想允许用户选择一个音频文件并在浏览器上播放。首先，我使用文件输入来获取音频文件数据

```
<input type='file'/> 
```

假设 X 代表那个输入，所以如果用户选择一个文件，我可以从 X.files 获取文件数据

然后，我想将数据发送到这个标签

```
<audio ...></audio> 
```

并提供 UI 以允许用户控制音频

我怎么能在不通过服务器的情况下做这件事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T02:22:24.463

**如果不通过服务器，您将无法做到这一点！**

请检查：

> [如何从 Firefox 3 中的 HTML 输入表单中获取文件路径](https://stackoverflow.com/questions/81180/how-to-get-the-file-path-from-html-input-form-in-firefox-3)

* * *

`"<input type="file" />"`最显着地用于在远程服务器上上传文件。

如果您希望创建一个网站，用户可以在其中播放他们上传的音乐或观看他们的视频，您应该考虑使用一些服务器端技术来实现文件上传。

您可以从以下其中一项开始：

*   [PHP](http://www.php.net/)
*   [Python](http://www.python.org/)
*   [Ruby On Rails](http://rubyonrails.org/)
*   [ASP.NET / 微软网络技术](http://www.asp.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T02:29:34.017

将音频文件存储在您选择和上传的服务器中

`<input type-"file">`标签。

在此过程中，保留该音频的路径供您参考，并将该路径提供给您的音频标签以播放它。

希望有帮助。

# jquery - 计算动态创建元素的数量

> ID：12926165
> 
> 赞同：0
> 
> 时间：2012-10-17T02:19:17.743
> 
> 标签：jquery

我已经使用下面的代码来动态地用 span 换行字符。

```
 $("span.count").children().andSelf().contents().each(function(){
    if (this.nodeType == 3) {
        var $this = $(this);
        $this.replaceWith($this.text().replace(/(\w)/g, "<span>$&</span>"));
    }
}); 
```

我正在尝试（一旦完成）计算包装元素的数量，以便我可以根据数量将一个类附加到它们的容器中。我尝试了各种方法（认为我的问题是试图计算动态创建的内容），但似乎没有一个有效。以下是我到目前为止的内容：

```
 var n = $("span.count").live().children().length;
if (n < 3) {
    $(".counter").addClass("four");
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:23:24.007

您可以向`<span>`要插入的类添加一个类，然后计算该类的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T02:41:30.910

你不能使用`.live()`你试图做的方式。它现在已被弃用，仅用于委托事件处理，而不用于 DOM 更改。如果您向要添加的跨度添加一个类，那么您可以简单地计算它：

```
$("span.count").children().andSelf().contents().each(function(){
    if (this.nodeType == 3) {
        var $this = $(this);
        $this.replaceWith($this.text().replace(/(\w)/g, "<span class="letter">$&</span>"));
    }
});

var cnt = $(".letter").length; 
```

或者，您可以使用自定义替换函数并在每次替换时增加一个计数器：

```
var spanCnt = 0;
$("span.count").children().andSelf().contents().each(function(){
    if (this.nodeType == 3) {
        var $this = $(this);
        $this.replaceWith($this.text().replace(/(\w)/g, function(match) {
            ++spanCnt;
            return("<span>" + match + "</span>");
        }));
    }
}); 
```

# c# - 如何同时从同一代码执行多任务处理？

> ID：12926167
> 
> 赞同：0
> 
> 时间：2012-10-17T02:19:29.533
> 
> 标签：c#, visual-studio-2010, webforms

对不起，如果标题不清楚或不正确，不知道我应该放什么标题。如有错误请指正。
我有这个代码可以从 IP 摄像机下载图像，它可以下载图像。
问题是，如果我有两个或多个摄像头，如何同时为所有摄像头执行图像下载过程？

```
private void GetImage()
{
   string IP1 = "example.IPcam1.com:81/snapshot.cgi;
   string IP2 = "example.IPcam2.com:81/snapshot.cgi;
   .
   .
   .
   string IPn = "example.IPcamn.com:81/snapshot.cgi";

   for (int i = 0; i < 10; i++)
   {
       string ImagePath = Server.MapPath("~\\Videos\\liveRecording2\\") + string.Format("{0}", i, i + 1) + ".jpeg";
       string sourceURL = ip;
       WebRequest req = (WebRequest)WebRequest.Create(sourceURL);
       req.Credentials = new NetworkCredential("user", "password");
       WebResponse resp = req.GetResponse();
       Stream stream = resp.GetResponseStream();
       Bitmap bmp = (Bitmap)Bitmap.FromStream(stream);
       bmp.Save(ImagePath);
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T02:30:00.223

您不应该从 ASP.NET 应用程序中运行像这样的长时间运行的代码。它们旨在简单地响应请求。

您应该将此代码放在服务中（Windows 服务很简单），并通过在其中运行的 WCF 服务来控制服务。

你也会遇到麻烦，因为你没有`using`块中的 WebResponse 和 Stream。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T02:25:15.620

有几种方法取决于您希望如何向用户报告反馈。这一切都归结为多线程。

这是一个示例，使用`ThreadPool`. 请注意，这在整个过程中缺少一堆错误检查......这里是作为如何使用的示例`ThreadPool`，而不是作为一个健壮的应用程序：

```
private Dictionary<String, String> _cameras = new Dictionary<String, String> {
    { "http://example.IPcam1.com:81/snapshot.cgi", "/some/path/for/image1.jpg" },
    { "http://example.IPcam2.com:81/snapshot.cgi", "/some/other/path/image2.jpg" },
};

public void DoImageDownload() {
    int finished = 0;

    foreach (KeyValuePair<String, String> pair in _cameras) {
        ThreadPool.QueueUserWorkItem(delegate {
            BeginDownload(pair.Key, pair.Value);
            finished++;
        });
    }

    while (finished < _cameras.Count) {
        Thread.Sleep(1000);  // sleep 1 second
    }
}

private void BeginDownload(String src, String dest) {
    WebRequest req = (WebRequest) WebRequest.Create(src);
    req.Credentials = new NetworkCredential("username", "password");
    WebResponse resp = req.GetResponse();
    Stream input = resp.GetResponseStream();
    using (Stream output = File.Create(dest)) {
        input.CopyTo(output);
    }
} 
```

这个例子只是将你在 for 循环中所做的工作卸载到线程池中进行处理。该`DoImageDownload`方法将很快返回，因为它没有做太多实际工作。

根据您的用例，您可能需要一种机制来等待图像从`DoImageDownload`. 一种常见的方法是在`BeginDownload`下载完成时使用事件回调来通知下载完成。我在`while`这里放了一个简单的循环，它将等到图像完成......当然，这需要错误检查，以防图像丢失或`delegate`永远不会返回。

请务必在整个过程中添加错误检查...希望这为您提供了一个开始的地方。

# scripting - 日志在当前日期只读，错误附加到文本文件作为输出

> ID：12926168
> 
> 赞同：1
> 
> 时间：2012-10-17T02:19:57.163
> 
> 标签：scripting, vbscript, automation, batch-file

我在远程计算机上有以下文本（50 个服务器的列表）保存在 e:\logs\action.log 这个 action.log 将包含一个日期和时间，每次执行的操作都会被跟踪并附加日期和时间.....下一行将有相关的动作，比如工作，不工作......

示例 action.log 文件文本.....

```
[10/15/2012 09:33:56:248 qwe rtd] {some text will be there here}

this time it is working on the task and taken: 2.31 seconds

[10/15/2012 09:34:55:248 qwe rtd] {some text will be there here}

this time it is working on the task and taken: 3.31 seconds

[10/16/2012 09:33:56:248 qwe rtd] {some text will be there here}

this time it is working on the task and taken: 2.31 seconds

[10/16/2012 09:34:55:248 qwe rtd] {some text will be there here}

this time it is working on the task and taken: 3.31 seconds

[10/16/2012 09:34:55:248 qwe rtd] {you got error}
You got error as file missing.. 
```

我正在寻找一个脚本来从当前日期读取 action.log 的脚本（上面示例日期中的今天日期是 10/16/2012）。如果发现任何文本称为“你有错误”或“文件丢失错误..”然后输出后跟服务器名称到 excel 或文本文件。

（基本标准是仅搜索当前日期文本......因为过去的错误无效......）从论坛寻找一些脚本......我是脚本的新手......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:06:59.480

尝试这样的事情：

```
computer = CreateObject("WScript.Network").ComputerName

today = Right("0" & Month(Date), 2) & "/" & Right("0", Day(Date), 2) & "/" _
  & Year(Date)

Set fso = CreateObject("Scripting.FileSystemObject")

Set in  = fso.OpenTextFile("action.log", 1)
Set out = fso.OpenTextFile("error.log", 2)

Do Until in.AtEndOfStream
  line = in.ReadLine
  If Left(line, Len(today)+1) = "[" & today Then
    ' line timestamped with today's date
    If InStr(line, "error") > 0 Then
      ' line contains "error"
      out.WriteLine line & vbTab & in.ReadLine & vbTab & computer
    End If
  End If
Loop

in.Close
out.Close 
```

# xml - 如何保护或验证对 XML 文件的访问？

> ID：12926176
> 
> 赞同：0
> 
> 时间：2012-10-17T02:20:45.187
> 
> 标签：xml, security, authentication

我有一个保存电子邮件模板信息的 XML 文件，其中包含的一件事是用户电子邮件。有没有办法确保只有登录的用户才能访问这个文件？例如，我想为 PHP 页面做这样的事情：

```
require("checklogin.php") 
```

# android - 获取当前日期作为字符串警告已弃用 toGmtString() 问题

> ID：12926178
> 
> 赞同：4
> 
> 时间：2012-10-17T02:20:58.290
> 
> 标签：android, calendar, android-calendar, android-date

我想在Android中获取当前日期日/月/年分钟：秒，所以我使用了以下代码

```
String data="";
Calendar c = Calendar.getInstance(); 
data=c.getTime().toGMTString(); 
```

但是 Eclipse 通知我该方法`.toGMTString();`已被弃用。

我怎样才能将当前日期作为格式化字符串来避免使用这种不推荐使用的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T02:28:06.317

来自 Android 文档：

> 此方法已弃用。
> 采用[`DateFormat`](http://developer.android.com/reference/java/text/DateFormat.html)

由于 GMT 字符串表示为`22 Jun 1999 13:02:00 GMT`，我们可以像这样使用`SimpleDateFormat`（抽象的子类`DateFormat`）：

```
SimpleDateFormat df = new SimpleDateFormat("dd MMM yyyy HH:mm:ss");
String asGmt = df.format(c.getTime()) + " GMT"; 
```

~~可能需要仔细检查该格式，但这会让你开始。~~看看[这个 IDEOne 代码](http://ideone.com/8y5xn)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T03:08:37.857

Date 类型的方法`toGMTString()`已弃用。

您可以检查[不同](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)类型的日期格式。

在你的情况下使用

```
SimpleDateFormat dfDate  = new SimpleDateFormat("dd/MMM/yyyy HH:mm:ss");
String data="";
Calendar c = Calendar.getInstance(); 
data=dfDate.format(c.getTime());
System.out.println(data);//==========> 17/Oct/2012 08:36:52 
```

如果要打印月份编号而不是月份名称

采用

```
SimpleDateFormat dfDate  = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss");
String data="";
Calendar c = Calendar.getInstance(); 
data=dfDate.format(c.getTime());
System.out.println(data);//==========> 17/10/2012 08:36:52 
```

# python - 如何在 Python 3.2 中检测小写字母？

> ID：12926180
> 
> 赞同：0
> 
> 时间：2012-10-17T02:21:26.083
> 
> 标签：python, string, lowercase, letters

好的，我并没有真正得到我正在寻找的答案，所以我会尝试重新措辞。我需要知道是否有一个函数可以检测字符串中的小写字母。假设我开始编写这个程序：

```
s = input('Type a word') 
```

是否有一个函数可以让我检测字符串 s 中的小写字母？可能最终将这些字母分配给不同的变量，或者只打印小写字母或小写字母的数量。

虽然这些是我想做的，但我最感兴趣的是如何检测小写字母的存在。欢迎使用最简单的方法，我只参加 Python 入门课程，所以我的老师不想在我参加期中考试时看到复杂的解决方案。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:02:21.000

Using a regular expression is probably the simplest way:

```
# Python 3 version

import re

txt = 'MarMaLadE'

# Replace uppercase with "" - an empty string
ltxt,n = re.subn(r'[A-Z]', "", txt) 

print("lower case letters:"," ".join(set(ltxt)))
print("number of lc letters:", n) 
```

The use of `set` removes duplicate lowercase letters, you might not want that. You might also want to consider which characters are uppercase, is `A-Z` sufficient? See also the `re.LOCALE` flag.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T02:49:07.240

希望这会有所帮助，请记住 python 对缩进很谨慎。这不是一个很好的解决方案，但它有效。

```
def doWhatYouWantToDo(input):
 newString = ""
 alphabet = "abcdefghijklmnopqrstuvwxyz"
 for letter in input:
  if letter in alphabet:
   newString += letter
 return newString

yourString = 'MarMaLadE'
print doWhatYouWantToDo(yourString)
print len(doWhatYouWantToDo(yourString) 
```

# ios6 - 如何在存折 ios6 中结合基于位置的服务？

> ID：12926183
> 
> 赞同：1
> 
> 时间：2012-10-17T02:21:48.927
> 
> 标签：ios6, passbook

我懂了

> 当应用程序认为您想要使用 Passbook 时，Passbook 可以使用位置和时间数据来启动 Passbook。

在苹果文档中。

那么，当我的客户接近特定位置时，我可以发送推送通知吗？如果是，我该怎么做？
网上有教程吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:59:00.217

在您的 pass.json 文件中添加位置标签

```
"locations" : [
        {"latitude" : 8.5682,
            "longitude" : 76.87349,
            "relevantText" : "Store nearby on 3rd and Main."}

    ], 
```

将 iphone 常规位置设置更改为 ON

浏览苹果编程指南

[https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/PassKit_PG/Chapters/Creating.html#//apple_ref/doc/uid/TP40012195-CH4-SW53](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/PassKit_PG/Chapters/Creating.html#//apple_ref/doc/uid/TP40012195-CH4-SW53)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:48:06.767

简而言之，不会。这是因为当触发位置警报时，Passbook 不会进行任何回调。

Apple 将位置警报称为“被动警报”。他们的目的是识别用户可能需要通行证并将其提供给他。没有直接或间接的数据可以告诉我们位置警报已被触发，当然也没有任何数据可以触发推送通知。

# c# - dynamic 比 value 类型慢得多，而且 MiscUtils Generic Operators 有很大的性能问题？

> ID：12926186
> 
> 赞同：2
> 
> 时间：2012-10-17T02:22:16.677
> 
> 标签：c#, .net

我正在尝试使用 MiscUtils 实现一些通用数学类。示例代码不使用 MiscUtils，只是简单地包装了一个类型，它存在一些主要的性能问题：

在内置值类型上使用数学至少快 15 倍。简单地将值类型包装在结构中大约慢 2 倍。使用动态绕过运算符类型约束大约慢 30 倍！！！！

我的目标是有一个简单的类

```
class Vector<T> { ... } 
```

并且能够使用 Vector 之类的东西来添加 T 列表而不会显着影响性能（T 将是原始类型）。

结果：

带调试的调试模式：

```
 V  = 1.0x    (Direct ValueType addition)
    WE = 6.4x    (Wrapped ValueType empty addition)
    WA = 17.9x   (Wrapped ValueType MiscUtils addition)
    D  = 17.8x   (Dynamic ValueType addition)
    DE = 37.1x   (Dynamid Wrapped Valuetype empty addition)
    DA = 37.7x   (Dynamid Wrapped Valuetype MiscUtils addition) 
```

无需调试的释放模式：

```
V  - 0.36s
WE - 0.27s
WA - 1.25s
D  - 1.34s
DE - 7.74s
DA - 7.22s
    V  = 1.3x
    WE = 1.0x
    WA = 4.5x
    D  = 4.9x
    DE = 28.2x
    DA = 26.3x

V  - 0.18s
WE - 0.14s
WA - 0.62s
D  - 0.66s
DE - 3.01s
DA - 3.65s
    V  = 1.3x
    WE = 1.0x
    WA = 4.5x
    D  = 4.8x
    DE = 21.9x
    DA = 26.6x

V  - 0.12s
WE - 0.09s
WA - 0.41s
D  - 0.44s
DE - 2.17s
DA - 2.42s
    V  = 1.3x
    WE = 1.0x
    WA = 4.4x
    D  = 4.8x
    DE = 23.7x
    DA = 26.5x 
```

无论如何，可以看出 MiscUtils 比预期的要慢（网站说几个百分比）并且动态非常糟糕。

## 任何想法发生了什么或如何改善结果？

```
#define __MiscUtils
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Diagnostics;
#if __MiscUtils
using MiscUtil;
#endif

namespace GenericNumerics
{

    struct num1<T> where T : struct
    {
        public readonly T a;
        public num1(T v) { a = v; }
        public static num1<T> operator +(num1<T> c1, num1<T> c2) { return new num1<T>(); }
        public static implicit operator num1<T>(T d) { return new num1<T>(); }
    }
    #if __MiscUtils
    struct num2<T> where T : struct
    {
        public readonly T a;
        public num2(T v) { a = v; }
        public static num2<T> operator +(num2<T> c1, num2<T> c2) { return Operator.Add(c1.a, c2.a); }
        public static implicit operator num2<T>(T d) { return new num2<T>(); }
    }
    #endif

    class Program
    {
        public static Stopwatch Stopwatch = new Stopwatch();

        static void Main(string[] args)
        {
            var cntV = 0L; var cntWE = 0L; var cntWA = 0L; var cntD = 0L; var cntDE = 0L; var cntDA = 0L;
            double time = 2000;         

            for (int k = 0; k < 1; k++)
            {

                {
                    Console.Write("V  - ");
                    var x = 1D; var y = 0D; var z = 0D;
                    Stopwatch.Restart();
                    while(Stopwatch.ElapsedMilliseconds < time)
                    {
                        x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; z = x + z; x = x + z; x = y + z; y = y + z; z = x + z;
                        x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; z = x + z; x = x + z; x = y + z; y = y + z; z = x + z;
                        cntV++;
                    }
                    Console.WriteLine(String.Format("{0:0.00}s", time/cntV*1000));
                }

                {
                    Console.Write("WE - ");
                    num1<double> x = 1D; num1<double> y = 0D; num1<double> z = 0D;
                    Stopwatch.Restart();                    
                    while (Stopwatch.ElapsedMilliseconds < time)
                    {
                        x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; z = x + z; x = x + z; x = y + z; y = y + z; z = x + z;
                        x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; z = x + z; x = x + z; x = y + z; y = y + z; z = x + z;
                        cntWE++;
                    }
                    Console.WriteLine(String.Format("{0:0.00}s", time / cntWE * 1000));
                }

                #if __MiscUtils
                {
                    Console.Write("WA - ");
                    num2<double> x = 1D; num2<double> y = 0D; num2<double> z = 0D;
                    Stopwatch.Restart();
                    while (Stopwatch.ElapsedMilliseconds < time)
                    {
                        x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; z = x + z; x = x + z; x = y + z; y = y + z; z = x + z;
                        x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; z = x + z; x = x + z; x = y + z; y = y + z; z = x + z;
                        cntWA++;
                    }
                    Console.WriteLine(String.Format("{0:0.00}s", time / cntWA * 1000));
                }
                #endif

                {
                    Console.Write("D  - ");
                    dynamic x = 1D; dynamic y = 0D; dynamic z = 0D;
                    Stopwatch.Restart();
                    while (Stopwatch.ElapsedMilliseconds < time)
                    {
                        x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; z = x + z; x = x + z; x = y + z; y = y + z; z = x + z;
                        x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; z = x + z; x = x + z; x = y + z; y = y + z; z = x + z;
                        cntD++;
                    }
                    Console.WriteLine(String.Format("{0:0.00}s", time / cntD * 1000));
                }

                #if __MiscUtils
                {
                    Console.Write("DE - ");
                    dynamic x = new num2<double>(0); dynamic y = new num2<double>(0); dynamic z = new num2<double>(0);
                    Stopwatch.Restart();
                    while (Stopwatch.ElapsedMilliseconds < time)
                    {
                        x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; z = x + z; x = x + z; x = y + z; y = y + z; z = x + z;
                        x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; z = x + z; x = x + z; x = y + z; y = y + z; z = x + z;
                        cntDE++;
                    }
                    Console.WriteLine(String.Format("{0:0.00}s", time / cntDE * 1000));
                }

                {
                    Console.Write("DA - ");
                    dynamic x = new num2<double>(0); dynamic y = new num2<double>(0); dynamic z = new num2<double>(0);
                    Stopwatch.Restart();
                    while (Stopwatch.ElapsedMilliseconds < time)
                    {
                        x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; z = x + z; x = x + z; x = y + z; y = y + z; z = x + z;
                        x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; y = y + z; z = x + z; x = x + z; x = y + z; z = x + z; x = x + z; x = y + z; y = y + z; z = x + z;
                        cntDA++;
                    }
                    Console.WriteLine(String.Format("{0:0.00}s", time / cntDA * 1000));
                }
                #endif

                var m = (double)Math.Max(cntV, Math.Max(cntWE, Math.Max(cntWA, Math.Max(cntD, Math.Max(cntDE, cntDA)))));
                Console.WriteLine(string.Format("\tV  = {0:0.0}x\n\tWE = {1:0.0}x\n\tWA = {2:0.0}x\n\tD  = {3:0.0}x\n\tDE = {4:0.0}x\n\tDA = {5:0.0}x\n", m / cntV, m / cntWE, m / cntWA, m / cntD, m / cntDE, m / cntDA));
            }

            Console.ReadKey();
            return;
        }
    }
} 
```

# ruby-on-rails-3 - heroku pg:reset 破坏了一切

> ID：12926193
> 
> 赞同：0
> 
> 时间：2012-10-17T02:22:36.497
> 
> 标签：ruby-on-rails-3, heroku

我试图在我的 heroku 数据库中为我正在构建的应用程序重置种子数据，heroku 的开发人员网站说`heroku pg:reset DATABASE`要这样做。

执行此操作并再次迁移我的数据库，`heroku run rake db:migrate`然后重新播种后，`heroku run rake db:seed`我无法迁移任何应用程序。甚至是新的。我不知道架构是否会有所帮助。这不是我试图修复的数据库问题，只是删除了重复记录。

# forms - 验证文本框值以包含某些字符串

> ID：12926194
> 
> 赞同：0
> 
> 时间：2012-10-17T02:22:42.267
> 
> 标签：forms, validation, vb.net-2010

我有一个 VB.NET 表单，用户可以从 40 个不同的值中进行选择。我希望使用一个文本框来验证用户给出的搅拌是否是这 40 个单词中的一个值，而不是一个包含所有 40 个值的保管箱。

因此，例如，我需要用户写一些东西并验证字符串是 40 个保留字之一，例如“urgent”、“post”……也许这些字存储在一个数组中，然后比较用户写的内容？

```
TextBox1.Text.Contains("urgent")
TextBox1.Text.Contains("post")
TextBox1.Text.Contains("standard")
TextBox1.Text.Contains("stay") 
```

也许是一种方法

```
Public Function Contains(ByVal value As String) As Boolean   
    Return (   TextBox1.Text(value, ...) >= 0)
End Function 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:49:49.270

您可以使用 Contains 方法创建保留字的 List(of String)，以使用类似的 Contains 函数检查键入的内容是否是其中之一。我不确定您要解析的文本有多大，所以我将其拆分为单个单词。

```
Public Class Form1
    Dim reservedWords As List(Of String) = New List(Of String)({"urgent", "post", "standard", "stay"})

    Private Sub TextBox1_TextChanged(sender As System.Object, e As System.EventArgs) Handles TextBox1.TextChanged
        Dim text As String = CType(sender, TextBox).Text
        If ContainsReservedWord(text) Then Beep()
    End Sub

    Public Function ContainsReservedWord(value As String) As Boolean
        Dim x As Integer
        Dim stringSplit As String() = value.Split
        If stringSplit.Count > 0 Then
            For x = 0 To stringSplit.Count - 1
                If reservedWords.Contains(LCase(stringSplit(x))) Then  Return True
            Next
        End If
        Return False
    End Function

End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T02:47:53.323

使用下面的代码来验证是否属于保留字的字符串。

```
var lstReservedWords = new List<string> {"urgent", "post", "standard", "stay", .......};
bool isReservedWord = lstReservedWords.Any(r => String.Compare(r, TextBox1.Text, true) == 0); 
```

希望这可以帮助。

# c# - sql server varbinay(max) 截断错误

> ID：12926199
> 
> 赞同：1
> 
> 时间：2012-10-17T02:23:34.477
> 
> 标签：c#, sql-server, varbinary

我有一个表，其中有一列类型为 varbinary(max)，我试图用字节数组对其进行更新。我想我用下面的代码正确地做，但我总是得到“数据将被截断”错误。info.logoBin 是 byte[] ，它的大小约为 200k （它是一个图像文件）。

```
using (SqlConnection conn = OpenConnection())
{
    using (SqlCommand cmd = conn.CreateCommand())
    {
        cmd.CommandText = "UPDATE COMPANIES SET LOGO_TYPE=@param1, LOGO_HASH=@param2, " +
            "LOGO_BIN=@param3 WHERE ID=@param4";
        cmd.Parameters.AddWithValue("@param1", info.LogoType);
        cmd.Parameters.AddWithValue("@param2", info.LogoHash);
        if (info.LogoBin != null)
        {
            cmd.Parameters.Add("@param3", SqlDbType.VarBinary, -1).Value = info.LogoBin;
        }
        else
        {
            cmd.Parameters.Add("@param3", SqlDbType.VarBinary, -1);
            cmd.Parameters["@param3"].Value = DBNull.Value;
        }
        cmd.Parameters.AddWithValue("@param4", id);

        ExecNonQuery(cmd);
    }
    conn.Close();
} 
```

我试过指定一个大小，我试过使用 SqlDbType.Image，我什至试过只给值 new byte[] { 0xff, 0xfa }，但我总是得到同样的错误。最后，我在 sql server mgmt server 中尝试了以下操作，效果很好：

```
insert into COMPANIES (LOGO_BIN) values (0xfffa); 
```

顺便说一句，我使用的是 vs 2008 pro 和 sql server 2012 express。有任何想法吗？

# javascript - jQuery dataTables 和选择一行

> ID：12926200
> 
> 赞同：4
> 
> 时间：2012-10-17T02:23:48.297
> 
> 标签：javascript, jquery, datatables

我试图让[jQuery dataTable](http://datatables.net)以这样一种方式运行，即用户可以选择一行然后单击一个按钮（位于页面上的其他位置，但*不在*表格上或其中）并弹出一个 JS 警报。

这是我的数据表：

```
$("#my-datatable").dataTable( {
    "bProcessing" : true,
    // Commenting out next line
    //"sDom" : 't',
    "sAjaxSource" : "some/url/on/my/server",
    "sAjaxDataProp" : "",
    "bDestroy" : true,
    "fnServerData" : function(sSource, aoData, fnCallback) {
        aoData.push({
            "name" : "asking",
            "value" : "yes"
        });

        request = $.ajax({
            "dataType" : "json",
            "type" : "GET",
            "url" : sSource,
            "data" : aoData,
            "success" : fnCallback
        });
    },

    "aoColumns" : [
        {
            "mDataProp" : "name"
        },
        {
            "mDataProp" : "expr"
        },
        {
            "mDataProp" : "seq"
        }
    ]
}); 
```

这是我的按钮：

```
<div id="bam-btn-div">
    <input type="button" id="bam-btn" value="BAM!" onclick="bam();"/>
</div> 
```

当用户在 dataTable 中选择一行，然后单击按钮时，我希望调用以下函数：

```
function bam() {
    alert("Deleting the selected row");

    // Delete the selected row in the dataTable
} 
```

最后，jQuery dataTable 试图填充的 HTML 表：

```
<div id="datatable-div">
    <table id="optconfig-datatable">
        <thead>
            <tr>
                <th>Name</th>
                <th>Expression</th>
                <th>Sequence</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div> 
```

我尝试按照[此处](http://datatables.net/examples/api/select_single_row.html)的示例进行操作，但无法正常工作。任何人都可以发现我需要添加哪些配置（到 dataTable 和/或其他）？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T02:32:59.673

您正在使用 jQuery，您不妨保持正轨。

```
$('#bam-btn').on('click', function(){
    alert("BAM!");
}); 
```

附带说明一下，ID 必须是唯一的，但我相信您知道这一点，因此请确保您不要一遍又一遍地重复使用相同的 ID。

此外，如果此元素在执行后添加到 DOM 中`.ready()`，则需要将事件处理程序附加到静态父元素，以便它可以正确委托 click 事件。

```
$(document).on('click', '#bam-btn', function(){
    alert("BAM");
}); 
```

**我将保留上述内容，我不想删除我的答案的整个部分，因为您永远不知道将来谁会觉得它有帮助**

首先，我们需要创建一个可用于所有函数的所有作用域的变量。这样，我们可以引用变量来获取我们想要删除的元素。

*我们应该将此变量**放在**文档就绪函数之外*

```
var theRow = '';
$(document).ready(function(){ 
    //existing code here
}); 
```

现在我们已经准备好一个“全局范围”变量，我们可以随时修改和访问它。

```
var theRow = '';
$(document).ready(function(){ 
    $('tr').click(function(){
        //we need to store a unique piece of information about this row.
        //Without much to go on, I'm going to rely on the index.
        theRow = $(this).index();
    });

    $('#bam-btn').click(function(){
       $('tr').eq(theRow).remove(); 
    });
});​ 
```

[这是你*体面的*工作 jsFiddle 作为一个例子](http://jsfiddle.net/B9BW8/)

**对于未来的用户，以及其他可能觉得这很有用的人**

`:eq()`jQuery 提供的选择器**无法**利用`.querySelectorAll()`来获得相当大的性能提升。因此，暂时，您应该始终使用`.eq()`over `:eq()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T02:29:36.300

请检查您的：

```
function bam() {
    alert("BAM!");
} 
```

不在此声明中：

```
$(document).ready(function() {
    // STATEMENT
}); 
```

如果您的函数在 中`$(document).ready()`，则意味着它仅在该范围内可用，在特定的`function()`.

将代码移动到`$(document).ready()`语句的上方或下方，`onclick`按钮中的事件处理程序将能够**找到并调用**它。

要从数据表中删除特定元素，请尝试使用以下 JavaScript：

```
$(document).ready(function() {
    var oTable = $("#my-datatable").dataTable( {
        "bProcessing" : true,
        // Commenting out next line
        //"sDom" : 't',
        "sAjaxSource" : "some/url/on/my/server",
        "sAjaxDataProp" : "",
        "bDestroy" : true,
        "fnServerData" : function(sSource, aoData, fnCallback) {
            aoData.push({
                "name" : "asking",
                "value" : "yes"
            });

            request = $.ajax({
                "dataType" : "json",
                "type" : "GET",
                "url" : sSource,
                "data" : aoData,
                "success" : fnCallback
            });
        },

        "aoColumns" : [
            {
                "mDataProp" : "name"
            },
            {
                "mDataProp" : "expr"
            },
            {
                "mDataProp" : "seq"
            }
        ]
    });$("#my-datatable").dataTable( {
        "bProcessing" : true,
        // Commenting out next line
        //"sDom" : 't',
        "sAjaxSource" : "some/url/on/my/server",
        "sAjaxDataProp" : "",
        "bDestroy" : true,
        "fnServerData" : function(sSource, aoData, fnCallback) {
            aoData.push({
                "name" : "asking",
                "value" : "yes"
            });

            request = $.ajax({
                "dataType" : "json",
                "type" : "GET",
                "url" : sSource,
                "data" : aoData,
                "success" : fnCallback
            });
        },

        "aoColumns" : [
            {
                "mDataProp" : "name"
            },
            {
                "mDataProp" : "expr"
            },
            {
                "mDataProp" : "seq"
            }
        ]
    });

    $('button#bam-btn').on('click', function() {
        var anSelected = fnGetSelected( oTable );
        oTable.fnDeleteRow( anSelected[0] );
    } );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T08:04:16.523

我对动态数据加载的表也有类似的问题。每次我添加内容时，旧节点都会消失，失去链接的事件。我解决了数据加载后调用函数的问题：

```
 function insertevents(table_id){
        var oTable = jQuery('#'+tableid).dataTable( {"bRetrieve": true });
        oTable.$('tr').click(function(){
            jQuery(this).toggleClass('row_selected');
        } );
        // Extra code here
    } 
```

添加“bRetrieve”参数很重要，因为该表之前已初始化。

此外，我还改进了控制键盘事件以实现可访问性的功能：

```
 oTable.$('tr').keyup( function(event) {
            if (event.which == 13 || event.which == 32) {
                event.preventDefault();
                jQuery(this).toggleClass('row_selected');
            }       
        } ); 
        oTable.$('tr').keydown( function(event) {
            if (event.which == 13 || event.which == 32) {
                event.preventDefault(); // Desactivamos este efecto
            }
        }); 
```

这一堆行应该替换第一个示例的注释行。现在可以通过键盘使用表格，使用 intro 或空格键进行选择。记得给表格中插入的元素添加 tabindex=0，这样我们就可以使用 tab 键导航。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-21T20:02:16.293

[http://editor.datatables.net/release/DataTables/extras/Editor/examples/index.html](http://editor.datatables.net/release/DataTables/extras/Editor/examples/index.html)

这与您想要的相似。

# php - 根据数组中的第一项组合两个数组

> ID：12926205
> 
> 赞同：0
> 
> 时间：2012-10-17T02:24:30.267
> 
> 标签：php

好的，所以我计划了两个数组 - 将根据日期或时间戳进行排序，如下所示：

```
array([date] => "8/12/12", [rating] => 300) 
```

让我们说第二个数组看起来像这样：

```
array([date] => "8/12/12", [rating2] => 600) 
```

我想将这两者结合起来：

```
array([date] => "8/12/12", [rating] => 300, [rating2] => 600) 
```

最有效的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:26:50.037

您可以在数组上使用 use`+`符号 ...

```
$a = array("date" => "8/12/12","rating" => 300);
$b = array("date" => "8/12/12","rating2" => 600);
var_dump($a + $b); 
```

输出

```
array
  'date' => string '8/12/12' (length=7)
  'rating' => int 300
  'rating2' => int 600 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T02:28:25.347

实验`array_merge`和`+`操作员

```
$a = array( 'key' => 'abc', 'foo' => true);
$b = array( 'key' => 'abc', 'bar' => true);
print_r( $a + $b );
print_r( array_merge( $a, $b ) ); 
```

# asp.net-mvc-3 - 如何在 Telerik MVC Treeview 的节点单击上调用控制器操作

> ID：12926212
> 
> 赞同：0
> 
> 时间：2012-10-17T02:26:25.357
> 
> 标签：asp.net-mvc-3, telerik-mvc

如何在选择或单击 Telerik MVC 树视图的节点时调用控制器操作？

```
<%
= Html.Telerik().TreeView()
            .Name("TreeView1")
            .ClientEvents(events => events
                        .OnSelect("onSelect")
                    )
            .BindTo(Model, mappings =>
            {
                mappings.For<Models.Samples>(binding => binding
                        .ItemDataBound((item, mno) =>
                        {
                            item.Text = mno.A;
                            item.Value = mno.B;
                        }));                     
            })            
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:01:49.677

试试这个它通过点击节点调用你的控制器动作

```
<%
= Html.Telerik().TreeView()
            .Name("TreeView1")
            .ClientEvents(events => events
                        .OnSelect("onSelect")
                    )
            .BindTo(Model, mappings =>
            {
                mappings.For<Models.Samples>(binding => binding
                        .ItemDataBound((item, mno) =>
                        {
                            item.Text = mno.A;
                            item.Value = mno.B;
                        }));                     
            })            
%>

<script type="text/javascript">
    function onSelect(e) {
        window.location = "/Controller/Action"
    }
</script> 
```

# java - 在 Java Applet 中执行 cmd 命令

> ID：12926213
> 
> 赞同：2
> 
> 时间：2012-10-17T02:26:30.130
> 
> 标签：java, applet

我正在尝试在 Java 小程序中执行 cmd 命令，我尝试了这段代码

```
import java.io.InputStream;
import java.io.IOException;
import java.applet.Applet;
import java.awt.*;
public class execute extends Applet{
String output="";
public void init(){ 
try {
// Execute command
String command = "MYCMDCOMMAND";
Process child = Runtime.getRuntime().exec(command);
// Get the input stream and read from it
InputStream in = child.getInputStream();
int c= in.read();
while ((c = in.read()) != -1) {
output =output+((char)c);
}
in.close();
}   
catch (IOException e) {
}
System.out.println(output);
}
public void paint(Graphics g){
g.drawString(output,60,100);
}
} 
```

然后写了这个html文件并保存在同一个目录下：

```
<html>
<head><title>Applet</title>
<body>
<applet code="execute.class",height="200" width="200">
</body>
</html> 
```

我在这里尝试做的是在小程序中运行 ls shell 命令并显示结果。

代码编译没有错误。但是当我在浏览器中打开 html 文件时，我只得到一个灰色方块。

这是因为我没有得到任何东西的安全问题吗？还是因为代码错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-14T14:42:50.310

你必须小心一些事情。

1.  编译后，您必须将 Html 文件复制并粘贴到 .bin 文件
2.  你的 HTML 文件名是 Applet 和你的类名 execute.class 所以这意味着你没有包，如果你有你必须将你的 html 文件保存为“PACKAGENAME/execute.class”，
3.  在控制面板/Java 你必须禁用安全

# c++ - 模板如何假定数据类型？

> ID：12926215
> 
> 赞同：0
> 
> 时间：2012-10-17T02:26:59.880
> 
> 标签：c++, templates

我编写了一个模板，只有在 a重载时才具有有效用法`struct`，否则会出现编译器错误，`class``bool operator==`

```
namespace atn {
    template <typename T>
    bool find( std::vector<T>& cont, T find ) {
        for( std::vector<T>::iterator it = cont.begin(); it != cont.end(); ++it ) {
            if( (*it) == find )
                return true;
        }
        return false;
    }
}; 
```

很好，没关系，例如：

```
struct sPlayer {
    u_int idPlayer;
    sPlayer() : idPlayer(0) {};
    bool operator==( const sPlayer& ref ) const {
        return ref.idPlayer == this->idPlayer;
    };
};

int _tmain(int argc, _TCHAR* argv[]) {
    std::vector<sPlayer>a;
    sPlayer player;
    player.idPlayer = 5;
    a.push_back(player);
    if(atn::find(a, player)){
        std::cout << "Found" << std::endl;
    }
    return 0;
} 
```

问题是，如果我这样使用它：

```
vector<int>hold;
if(atn::find(hold, 4)) 
```

我在这部分迷路了，模板假定 T 的类型`vector<T>`由传递的第二个参数的值分配？或者它会从传递的矢量引用的类型中假设？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T02:30:30.770

两个参数必须匹配。模板参数推导尝试为每个模板参数找到一个类型，使函数参数类型与提供的参数的类型匹配。

有时这会变得有点棘手，而应该工作的事情却没有。例如：

```
std::vector<int> v;
atn::find(v, 1U); 
```

这失败了，因为第一个参数想要推断`T = int`，但第二个参数想要`T = unsigned int`。推演失败，代码无法编译。（如果这是一个问题，那么解决方案是使除一个函数参数以外的所有参数都*为非推导*。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T02:31:09.410

> 模板假定通过传递的第二个参数的值在向量处分配 T 的类型？或者它会从传递的矢量引用的类型中假设？

两者都不。编译器将分别推断每个参数的类型，然后验证推断的类型对于所有情况都是相同的。如果推断的类型对于所有参数都不相同，它将无法编译。

一个常见的例子是`std::max`（或`std::min`）模板：

```
template <typename T>
T min( T lhs, T rhs ) {
   return (lhs < rhs? lhs : rhs);
}
int main() {
   min(1,1u);  // error
} 
```

# python - 带有可选字段的 WTForms FieldList

> ID：12926220
> 
> 赞同：3
> 
> 时间：2012-10-17T02:27:11.053
> 
> 标签：python, flask, wtforms

我有以下表格，

```
class AddForm(wtf.Form):
    tags = TagListField("Tags (comma separated)", validators=[wtf.Required()])
    question = wtf.TextField("Question", validators=[wtf.Required()])
    answers = wtf.FieldList(wtf.TextField("Answer", validators=[wtf.Required()]), min_entries=2, max_entries=5) 
```

我有一个表单设置来显示这个表单以及一个动态添加更多“答案”输入的按钮（通过用户单击按钮）。但是，当表单被提交时，任何添加但未填写的字段都被视为错误。

具体来说，如果我有 3 个“答案”输入，但我只填写前两个，那么第三个会出现错误，即使我已指定最小条目数为 2。看起来应该忽略这个数据。

由于我将它与[Flask](http://flask.pocoo.org)一起使用，我将只修改`request.form`数据以忽略空白字段。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T17:42:08.107

可能是你的

```
 validators=[wtf.Required()]) 
```

是个问题？您是否尝试将其更改为

```
validators=[wtf.Optional()]) 
```

# javascript - 如何通过 style 属性显式设置 css 属性？

> ID：12926225
> 
> 赞同：1
> 
> 时间：2012-10-17T02:28:41.407
> 
> 标签：javascript, css

如何找到通过 style 属性显式设置的所有 css 属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T02:46:11.507

假设您想要获取名为“myp”的元素的样式：

```
var stylez = document.getElementById("myp").style;
var ix;
for (ix = 0;  ix < stylez.length;  ++ix) {
    console.log(stylez.item(ix) + ": " + stylez.getPropertyValue(stylez.item(ix)));
} 
```

在这里工作[的 JSFiddle](http://jsfiddle.net/uk9Tw/1/)会产生输出：

```
font-weight: bold 
```

仅输出样式中的信息，即使一个类设置了字体大小并且 CSS 直接应用了背景颜色。

您还可以阅读样式属性文本并自己解析它，这不太准确，但如果您想包含无效语句，则需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T03:01:08.300

*element .style.cssText 返回**element*的 style 属性的文本值

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T06:00:36.077

我认为没有真正的跨浏览器方法可以做到这一点，我想知道你是否真的需要获得这些属性。但是您可以迭代元素属性的`style`属性。问题是在某些浏览器上，该`style`属性具有类似数组的属性和“cssText”属性。您可以显式删除它们（请参阅[jsfiddle](http://jsfiddle.net/Gdd8Y/)）：

```
var s = document.getElementById('s');
var styles = document.getElementById('myp').style; 
var prop, value;
function CSSify(val) {
  var i, ch;
  var css = '';
  for(i = 0; i < val.length; i++) {
    ch = val.charAt(i);
    if(ch.toUpperCase() === ch) { 
      css += '-' + ch.toLowerCase();
    } else {
      css += ch;
    }
  }
  return css;
  } 
for(prop in styles) {
  value = styles[prop];
  if(typeof value === 'string' && value !== '' && prop !== 'cssText' && 
     isNaN(parseInt(prop)) ) { 
    s.innerHTML += CSSify(prop) + ': ' + value + '<br>';
    }
}​ 
```

但是，浏览器在解释`style`属性值的方式与它们无法识别的属性或属性值方面有所不同。IE 版本之间甚至存在差异：IE 9 删除了具有无法识别的属性名称的属性，而 IE 7 删除了具有无法识别的属性值的属性。此外，IE似乎添加了`accelerator: false`.*

# java - endsWith 是否考虑路径的文件扩展名，这是一个安全漏洞吗？

> ID：12926229
> 
> 赞同：0
> 
> 时间：2012-10-17T02:29:34.513
> 
> 标签：java, security

当我打电话时`endsWith(".pdf")`，这会打开malware.pdf.exe 还是仅仅打开malware.pdf？

```
String sFileName = request.getParameter("fName");
if (sFileName.toLowerCase().endsWith(".pdf"))
// open file
else
// don’t open the file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:35:37.420

`.endsWith("string")`将按您的意愿执行。但是，这并不意味着该文件实际上是 pdf。查看[这个 SO question](https://stackoverflow.com/questions/3108201/detect-if-pdf-file-is-correct-header-pdf)或其他有关如何检查标题的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:00:47.950

`String.endsWith`按记录工作。但是，这里有几个明显的问题。

*   就 OS 文件 API 而言， NUL 字符`\0`通常会终止字符串（因为它将使用 C 字符串）。

*   如果提供服务，可能会因扩展而丢失内容，可能会被转换为不同的类型。

*   从本地文件系统运行从 Internet 下载的 PDF 通常很危险。（Chrome 对此提出警告，请参阅 Billy Rios on [Content Smuggling](http://xs-sniper.com/blog/2012/10/11/content-smuggling/)）。

# android - 安卓平板方向

> ID：12926231
> 
> 赞同：0
> 
> 时间：2012-10-17T02:29:45.043
> 
> 标签：android, orientation, tablet

我试过用

```
res/layout/my_layout.xml         // layout for normal screen size ("default")
res/layout-small/my_layout.xml       // layout for small screen size
res/layout-large/my_layout.xml       // layout for large screen size
res/layout-xlarge/my_layout.xml      // layout for extra large screen size
res/layout-xlarge-land/my_layout.xml // layout for extra large in landscape 
```

当我启动我的应用程序时，它能够看到 res/layout-xlarge/my_layout.xml 但是当我转动方向（视图确实转动）时，它不显示 res/layout-xlarge-land/my_layout.xml而是肖像之一。（对不起，我的英语不好）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T02:51:30.820

根据文档，xlarge 分辨率至少需要 960dp x 720dp

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

由于您只为 xlarge 定义了横向布局，因此您的设备可能没有足够大的显示器来使用它。

我建议添加

res/layout-small-land/my_layout.xml

res/layout-large-land/my_layout.xml

此外，您可以使用此帖子的答案来确定设备的尺寸类别：

[如何在 android 中以编程方式获取 ScreenSize](https://stackoverflow.com/questions/11252067/how-do-i-get-the-screensize-programmatically-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T02:45:36.223

并非所有版本的 SDK 都支持所有方向。我找不到说明 xlarge-land 可用的 SDK 版本的信息，但我敢打赌，如果您将最低 SDK 版本更改为 16 并将目标构建为 16，它将起作用。尝试从那里开始，看看你是否能找到它何时停止工作。

相关：http: [//developer.android.com/guide/topics/resources/providing-resources.html#Compatibility](http://developer.android.com/guide/topics/resources/providing-resources.html#Compatibility)

# php - php数组不工作

> ID：12926232
> 
> 赞同：0
> 
> 时间：2012-10-17T02:29:53.157
> 
> 标签：php, arrays, wordpress

这是我第一次尝试自定义 WP 评论表单，这给我带来了一些麻烦。理想情况下，我想要一个包含 3 个字段的评论表单：名称、位置和评论。为方便起见，我正在使用数组：

```
<?php comment_form(array(
    'title_reply'=> 'Please feel free to share your home owning hopes and dreams.',
    'fields' => apply_filters( 'comment_form_default_fields', $fields ),
    'label_submit' => 'Share',
    )); 
    ?> 
```

在评论列表中，我希望显示评论，并且在评论下方有“名称|位置”

```
<div class="comment-content"><?php comment_text(); ?><?php comment_author(); ?> | <?php echo $comment_author_url ?> </div> 
```

正如您在[现场网站](http://zoparealty.com/share/)上看到的那样，它并没有完全以这种方式出现。任何想法为什么会这样？提示和见解表示赞赏。

函数.php

```
<?php 

if ( ! function_exists( 'twentyeleven_comment' ) ) :
/**
 * Template for comments and pingbacks.
 *
 * To override this walker in a child theme without modifying the comments template
 * simply create your own twentyeleven_comment(), and that function will be used instead.
 *
 * Used as a callback by wp_list_comments() for displaying the comments.
 *
 * @since Twenty Eleven 1.0
 */
function twentyeleven_comment( $comment, $args, $depth ) {
    $GLOBALS['comment'] = $comment;
    switch ( $comment->comment_type ) :
        case 'pingback' :
        case 'trackback' :
    ?>
    <li class="post pingback">
        <p><?php _e( 'Pingback:', 'twentyeleven' ); ?> <?php comment_author_link(); ?><?php edit_comment_link( __( 'Edit', 'twentyeleven' ), '<span class="edit-link">', '</span>' ); ?></p>
    <?php
            break;
        default :
    ?>
    <li <?php comment_class(); ?> id="li-comment-<?php comment_ID(); ?>">
        <article id="comment-<?php comment_ID(); ?>" class="comment">

            <div class="comment-content"><?php comment_text(); ?><?php comment_author(); ?> | <?php echo $comment_author_url ?> </div>

        </article><!-- #comment-## -->

    <?php
            break;
    endswitch;
}
endif; // ends check for twentyeleven_comment()

// Custom callback to list comments in the your-theme style
function custom_comments($comment, $args, $depth) {
  $GLOBALS['comment'] = $comment;
    $GLOBALS['comment_depth'] = $depth;
  ?>
    <li id="comment-<?php comment_ID() ?>" <?php comment_class() ?>>
        <div class="comment-author vcard"><?php commenter_link() ?></div>
        <div class="comment-meta"><?php printf(__('Posted %1$s at %2$s <span class="meta-sep">|</span> <a href="%3$s" title="Permalink to this comment">Permalink</a>', 'your-theme'),
                    get_comment_date(),
                    get_comment_time(),
                    '#comment-' . get_comment_ID() );
                    edit_comment_link(__('Edit', 'your-theme'), ' <span class="meta-sep">|</span> <span class="edit-link">', '</span>'); ?></div>
  <?php if ($comment->comment_approved == '0') _e("\t\t\t\t\t<span class='unapproved'>Your comment is awaiting moderation.</span>\n", 'your-theme') ?>
          <div class="comment-content">
            <?php comment_text() ?>
        </div>
        <?php // echo the comment reply link
            if($args['type'] == 'all' || get_comment_type() == 'comment') :
                comment_reply_link(array_merge($args, array(
                    'reply_text' => __('Reply','your-theme'),
                    'login_text' => __('Log in to reply.','your-theme'),
                    'depth' => $depth,
                    'before' => '<div class="comment-reply-link">',
                    'after' => '</div>'
                )));
            endif;
        ?>
<?php } // end custom_comments

// Custom callback to list pings
function custom_pings($comment, $args, $depth) {
       $GLOBALS['comment'] = $comment;
        ?>
            <li id="comment-<?php comment_ID() ?>" <?php comment_class() ?>>
                <div class="comment-author"><?php printf(__('By %1$s on %2$s at %3$s', 'your-theme'),
                        get_comment_author_link(),
                        get_comment_date(),
                        get_comment_time() );
                        ?></div>
    <?php if ($comment->comment_approved == '0') _e('\t\t\t\t\t<span class="unapproved">Your trackback is awaiting moderation.</span>\n', 'your-theme') ?>
            <div class="comment-content">
                <?php comment_text() ?>
            </div>
<?php } // end custom_pings

// Produces an avatar image with the hCard-compliant photo class
function commenter_link() {
    $commenter = get_comment_author_link();
    if ( ereg( '<a[^>]* class=[^>]+>', $commenter ) ) {
        $commenter = ereg_replace( '(<a[^>]* class=[\'"]?)', '\\1url ' , $commenter );
    } else {
        $commenter = ereg_replace( '(<a )/', '\\1class="url "' , $commenter );
    }
    $avatar_email = get_comment_author_email();
    $avatar = str_replace( "class='avatar", "class='photo avatar", get_avatar( $avatar_email, 80 ) );
    echo $avatar . ' <span class="fn n">' . $commenter . '</span>';
} // end commenter_link

if (!function_exists('iweb_reverse_comments')) {
    function iweb_reverse_comments($comments) {
        return array_reverse($comments);
    }
}
add_filter ('comments_array', 'iweb_reverse_comments');

// custom comment field
function my_fields($fields) {
$fields['Location'] = '';
return $fields;
}
add_filter('comment_form_default_fields','my_fields');

?> 
```

分享.php

```
<?php
/*
Template Name: Share
*/
?>

<?php get_header(); ?>

<div class="content-left">

    <?php comments_template(); ?> 

</div><!-- end content-left -->
<div class="content-right">

    <?php wp_list_comments( array( 'callback' => 'twentyeleven_comment' )); ?></ul>

</div><!-- end content-right -->

<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:05:41.407

我认为您不必编辑第二十一条评论。尝试在第二十一个评论中回显，看看它是否是正确的功能。

```
echo "twentyeleven_comment ";
exit; 
```

我认为 211_comment 在帖子视图中显示帖子的所有评论，而不是帖子列表。

# python - RPSLS 的 Python 编码

> ID：12926243
> 
> 赞同：-1
> 
> 时间：2012-10-17T02:30:54.053
> 
> 标签：python

尝试学习python的总编程新手。我为在线免费课程编写了 RPSLS 代码，但无论如何都无法理解为什么计算机会显示“PLAYER WINS”。电脑正在改变，但玩家没有改变……即使打成平局，玩家也会“获胜”。

有人可以指出我正确的方向 - 这是代码链接吗？我已经尝试了一切，但没有任何效果。提前致谢！这真让我抓狂。

[http://www.codeskulptor.org/#user2-WEFezkBMoi-3.py](http://www.codeskulptor.org/#user2-WEFezkBMoi-3.py)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T02:38:56.313

Python 读起来不像英语：

```
if mod == 3 or 4: 
```

这被解释为：

```
if (mod == 3) or (4): 
```

既然你有`or 4`那个`if`条件，即使`mod`不是`3`，`or 4`也会使条件永远是`True`因为`4`是真实的。

要解决这个问题，只需使用列表或元组并检查是否`mod`是该对象的成员：

```
if mod in [3, 4]:
if mod in (3, 4): 
```

# c - 在 GLUT 函数中处理异常的最佳实践

> ID：12926246
> 
> 赞同：2
> 
> 时间：2012-10-17T02:31:13.923
> 
> 标签：c, exception, exception-handling, glut

我正在关注来自 openglbook.com 的 openGL 教程，并尝试在请求的 OpenGL 上下文在计算机上不可用时模拟场景。我的笔记本电脑 opengl 视频驱动程序版本是 3.0，我要求 3.3。目标是优雅地从错误中恢复。这是代码：

```
glutInitContextVersion(3, 3);
glutInitContextFlags(GLUT_FORWARD_COMPATIBLE);
glutInitContextProfile(GLUT_CORE_PROFILE);
glutSetOption(GLUT_ACTION_ON_WINDOW_CLOSE,GLUT_ACTION_GLUTMAINLOOP_RETURNS);
glutInitWindowSize(CurrentWidth, CurrentHeight);
glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);

WindowHandle = glutCreateWindow(WINDOW_TITLE_PREFIX);

if (WindowHandle < 1) {
    fprintf(
            stderr,
            "ERROR: Could not create a new rendering window.\n"
            );
    return -1;
} 
```

我遇到的问题是我的程序中断了：

```
WindowHandle = glutCreateWindow(WINDOW_TITLE_PREFIX); 
```

而且我什至无法检查返回码，因为 glutCreateWindow() 似乎只是自行执行了 exit() 。在 C 中处理这些类型的情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T21:57:23.520

我曾经遇到过这个问题，我解决了删除这些代码行的问题：

```
glutInitContextVersion(3, 3);
glutInitContextFlags(GLUT_FORWARD_COMPATIBLE);
glutInitContextProfile(GLUT_CORE_PROFILE); 
```

（虽然我使用的是freeglut）

# windows-7 - 如何在 Windows 7 64 位的 PyPy 中使用 Tkinter

> ID：12926255
> 
> 赞同：2
> 
> 时间：2012-10-17T02:32:51.253
> 
> 标签：windows-7, python-2.7, tkinter, 64-bit, pypy

我正在使用 Eclipse 和为 PyPy 解释器（2.7 python）配置的 PyDev 插件。我无法将 Tkinter 包含到我的项目中。错误，我在 Eclipse 中得到如下：

```
File "C:\PyPy\lib-python\2.7\lib-tk\Tkinter.py", line 39, in <module>
import _tkinter # If this fails your Python may not be configured for Tk
ImportError: No module named _tkinter 
```

我尝试使用 easy_install 安装 tkinter，但由于引用 vcvarsall.bat 文件失败（我的计算机上安装了 VS 2010）

我试图从这篇文章[python 中应用解决方案 - 如何将 easy_install 指向 vcvarsall.bat](https://stackoverflow.com/questions/6551724/how-do-i-point-easy-install-to-vcvarsall-bat) 我使用 GCC (C++) 编译器安装了 MinGW。导出 DLL 但仍无法编译...我的 tkinter 编译失败并出现以下错误：

`src/_tkinter.c:74:17: fatal error: tcl.h: No such file or directory` `compilation terminated.`

`error: Setup script exited with error: command 'gcc' failed with exit status 1`

我将 ActiveTcl Community Edition 安装到 Tcl 文件夹，其中包含所有需要的文件...

有没有办法将 gcc 指向 ActiveTcl 以完成编译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T18:07:00.067

我已经让 tkinter 在 Windows 上编译（在 Windows 8 64 位上进行了测试，但我相信它也可以在 Windows 7 上运行）。

以下是我采取的步骤：

安装 Microsoft Visual Studio C++ 2008 SP1 速成版

**KS：可在此处获得：http: [//go.microsoft.com/ ?linkid=7729279](http://go.microsoft.com/?linkid=7729279)

安装 TclTk 8.5（ActiveTcl 社区版 8.5.13）

**KS：如果您安装了 pypy 32 位，请确保安装 32 位版本。

解压 pypy-c-jit-latest-win32（或 2.0 beta 之一）

下载[http://python-distribute.org/distribute_setup.py](http://python-distribute.org/distribute_setup.py)

运行 pypy.exe Distribute_setup.py

下载并解压[https://bitbucket.org/pypy/tkinter/get/default.zip](https://bitbucket.org/pypy/tkinter/get/default.zip)

修改pypy-tkinter/setup.py如下：

将“c:/tcl”替换为用于 ActiveTcl 的安装位置，将“c:/pypy-c-jit-latest-win32”替换为 pypy 的安装位置

更改库以使用它们的 Windows 文件名，并引用 pypy 中包含的“python27”库：（我的条目如下所示）

```
library_dirs=["c:/tcl/lib", "c:/pypy-c-jit-latest-win32/include"]
include_dirs=["c:/tcl/include", "c:/pypy-c-jit-latest-win32/include"]
libraries=["tk85", "tcl85", "python27"] 
```

从 pypy-tkinter 目录运行 pypy.exe setup.py install。它应该编译并安装 site-packages\tkinter_pypy-0.1-py2.7-win32.egg。

**注意：我还将 Python 2.7.3 (CPython) 安装中的“tcl”文件夹复制到包含 pypy.exe 可执行文件的文件夹中。**

我刚刚在我的 pypy 安装上运行了 lib-tk\test\runtktests.py，结果如下：

```
testLoadTk (test_tkinter.test_loadtk.TkLoadTest) ... skipped 'No $DISPLAY set.'
testLoadTkFailure (test_tkinter.test_loadtk.TkLoadTest) ... ok
test_search (test_tkinter.test_text.TextTest) ... ok
test_horizontal_range (test_ttk.test_extensions.LabeledScaleTest) ... ok
test_initialization (test_ttk.test_extensions.LabeledScaleTest) ... ok
test_resize (test_ttk.test_extensions.LabeledScaleTest) ... ok
test_variable_change (test_ttk.test_extensions.LabeledScaleTest) ... ok
test_widget_destroy (test_ttk.test_extensions.LabeledScaleTest) ... FAIL
test_initialization (test_ttk.test_extensions.OptionMenuTest) ... ok
test_menu (test_ttk.test_extensions.OptionMenuTest) ... ok
test_widget_destroy (test_ttk.test_extensions.OptionMenuTest) ... FAIL
test_convert_stringval (test_ttk.test_functions.InternalFunctionsTest) ... ok
test_dict_from_tcltuple (test_ttk.test_functions.InternalFunctionsTest) ... ok
test_format_elemcreate (test_ttk.test_functions.InternalFunctionsTest) ... ok
test_format_layoutlist (test_ttk.test_functions.InternalFunctionsTest) ... ok
test_format_mapdict (test_ttk.test_functions.InternalFunctionsTest) ... ok
test_format_optdict (test_ttk.test_functions.InternalFunctionsTest) ... ok
test_list_from_layouttuple (test_ttk.test_functions.InternalFunctionsTest) ... ok
test_list_from_statespec (test_ttk.test_functions.InternalFunctionsTest) ... ok
test_script_from_settings (test_ttk.test_functions.InternalFunctionsTest) ... ok
test_val_or_dict (test_ttk.test_functions.InternalFunctionsTest) ... ok
test_multivalues (test_ttk.test_functions.TclObjsToPyTest) ... ok
test_nosplit (test_ttk.test_functions.TclObjsToPyTest) ... ok
test_unicode (test_ttk.test_functions.TclObjsToPyTest) ... ok
test_configure (test_ttk.test_style.StyleTest) ... ok
test_layout (test_ttk.test_style.StyleTest) ... ok
test_lookup (test_ttk.test_style.StyleTest) ... ok
test_map (test_ttk.test_style.StyleTest) ... ok
test_theme_use (test_ttk.test_style.StyleTest) ... ok
test_identify (test_ttk.test_widgets.WidgetTest) ... ok
test_widget_state (test_ttk.test_widgets.WidgetTest) ... ok
test_invoke (test_ttk.test_widgets.ButtonTest) ... ok
test_invoke (test_ttk.test_widgets.CheckbuttonTest) ... ok
test_invoke (test_ttk.test_widgets.RadiobuttonTest) ... ok
test_postcommand (test_ttk.test_widgets.ComboboxTest) ... ok
test_values (test_ttk.test_widgets.ComboboxTest) ... ok
test_virtual_event (test_ttk.test_widgets.ComboboxTest) ... ok
test_bbox (test_ttk.test_widgets.EntryTest) ... ok
test_identify (test_ttk.test_widgets.EntryTest) ... ok
test_revalidation (test_ttk.test_widgets.EntryTest) ... ok
test_validation (test_ttk.test_widgets.EntryTest) ... ok
test_validation_options (test_ttk.test_widgets.EntryTest) ... ok
test_add (test_ttk.test_widgets.PanedwindowTest) ... ok
test_forget (test_ttk.test_widgets.PanedwindowTest) ... ok
test_insert (test_ttk.test_widgets.PanedwindowTest) ... ok
test_pane (test_ttk.test_widgets.PanedwindowTest) ... ok
test_sashpos (test_ttk.test_widgets.PanedwindowTest) ... ok
test_custom_event (test_ttk.test_widgets.ScaleTest) ... ok
test_get (test_ttk.test_widgets.ScaleTest) ... ok
test_set (test_ttk.test_widgets.ScaleTest) ... FAIL
test_add_and_hidden (test_ttk.test_widgets.NotebookTest) ... ok
test_forget (test_ttk.test_widgets.NotebookTest) ... ok
test_index (test_ttk.test_widgets.NotebookTest) ... ok
test_insert (test_ttk.test_widgets.NotebookTest) ... ok
test_select (test_ttk.test_widgets.NotebookTest) ... ok
test_tab (test_ttk.test_widgets.NotebookTest) ... ok
test_tab_identifiers (test_ttk.test_widgets.NotebookTest) ... ok
test_tabs (test_ttk.test_widgets.NotebookTest) ... ok
test_traversal (test_ttk.test_widgets.NotebookTest) ... ok
test_bbox (test_ttk.test_widgets.TreeviewTest) ... ok
test_children (test_ttk.test_widgets.TreeviewTest) ... ok
test_column (test_ttk.test_widgets.TreeviewTest) ... ok
test_delete (test_ttk.test_widgets.TreeviewTest) ... ok
test_detach_reattach (test_ttk.test_widgets.TreeviewTest) ... ok
test_exists (test_ttk.test_widgets.TreeviewTest) ... ok
test_focus (test_ttk.test_widgets.TreeviewTest) ... ok
test_heading (test_ttk.test_widgets.TreeviewTest) ... ok
test_heading_callback (test_ttk.test_widgets.TreeviewTest) ... skipped 'skipping pending resolution of Issue #10734'
test_index (test_ttk.test_widgets.TreeviewTest) ... ok
test_insert_item (test_ttk.test_widgets.TreeviewTest) ... ok
test_set (test_ttk.test_widgets.TreeviewTest) ... ok
test_tag_bind (test_ttk.test_widgets.TreeviewTest) ... ok
test_tag_configure (test_ttk.test_widgets.TreeviewTest) ... ok

======================================================================
FAIL: test_widget_destroy (test_ttk.test_extensions.LabeledScaleTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\pypy-c-jit-latest-win32\lib-python\2.7\lib-tk\test\test_ttk\test_extensions.py", line 25, in test_widget_destroy
    self.assertRaises(Tkinter.TclError, x.tk.globalgetvar, var)
AssertionError: TclError not raised

======================================================================
FAIL: test_widget_destroy (test_ttk.test_extensions.OptionMenuTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\pypy-c-jit-latest-win32\lib-python\2.7\lib-tk\test\test_ttk\test_extensions.py", line 202, in test_widget_destroy
    self.assertRaises(Tkinter.TclError, optmenu.tk.globalgetvar, name)
AssertionError: TclError not raised

======================================================================
FAIL: test_set (test_ttk.test_widgets.ScaleTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\pypy-c-jit-latest-win32\lib-python\2.7\lib-tk\test\test_ttk\test_widgets.py", line 522, in test_set
    self.assertEqual(self.scale.get(), max + 10)
AssertionError: 6.0 != 11.0

----------------------------------------------------------------------
Ran 73 tests in 2.214s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:51:40.243

tkinter 本身不附带 pypy，有一个包可以使它在 pypi 上工作

[http://pypi.python.org/pypi/tkinter-pypy/](http://pypi.python.org/pypi/tkinter-pypy/)

# html - 图像作为按钮 - 单击时更改图像

> ID：12926256
> 
> 赞同：1
> 
> 时间：2012-10-17T02:32:55.497
> 
> 标签：html, button, image

我正在使用 html 和非常基本的 jQuery 的组合来制作一个功能类似于按钮的 img，这样当单击 img 时，图像的 src (src1) 会更改为另一个 src (src2，即图像按钮已被按下）。我正在尝试这样做，以便如果单击相同的图像（现在是 src2），那么它会变回原始的 src（src1）。

我希望这不会让人头疼，如果需要我可以澄清一下。

这是我的代码：

```
<!--Html-->
<body>
<img id="pixelbutton" src="images/pixelbutton.png" onClick="pixelbuttonclick()" />
</body>

/* jQuery */

function pixelbuttonclick() {
var pixelbutton = document.getElementById("pixelbutton");

if (pixelbutton.style.src=="images/pixelbutton.png") {
    document.getElementById("pixelbutton").src="images/pixelbutton_press.png";
    }

else if (pixelbutton.style.src=="images/pixelbutton_press.png") {
    document.getElementById("pixelbutton").src="images/pixelbutton.png";
    }

} 
```

我是一个巨大的菜鸟，所以如果可能的话，不那么复杂的答案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T02:39:34.080

可以使用具有 background-image css 属性的 div 来代替替换 URL，并在单击 div 时将另一个类设置为另一个图像作为背景图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:31:07.117

如果您没有，我建议将您的功能放在头部以保持一致性。

您的“pixelbutton.style.src”是错误的，因为 src 是一个属性，而不是在 css 中，但操作 URL 相当困难。我同意 Amareswar 在 CSS 中使用背景图像的回答。

我这样做的另一种方法是使用 jQuery 代码：

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#pixelbutton").click(function(){
            $("#pixelbutton").css({'display':'none'})
            $("#pixelbutton2").css({'display':'block'});
        })
        $("#pixelbutton2").click(function(){
            $("#pixelbutton2").css({'display':'none'})
            $("#pixelbutton").css({'display':'block'});
        })
    })
</script> 
```

并修改您的正文代码：

```
<img id="pixelbutton" src="images/pixelbutton.png" />
<img id="pixelbutton2" src="images/pixelbutton_press.png" style="display: none;" /> 
```

# php - PHP链接不起作用

> ID：12926258
> 
> 赞同：0
> 
> 时间：2012-10-17T02:33:01.947
> 
> 标签：php, ajax, include, require, require-once

我正在尝试`require_once`在文档中创建文件；这是我当前的语法：

```
$path = $_SERVER['DOCUMENT_ROOT'];
require_once("includes/save-email.php");
```

问题是，当我在浏览器中重新加载页面时，每个元素都消失了，我收到以下两条消息：

```
警告：require_once(/includes/connect.php) [function.require-once]：无法打开流：/homepages/3/[my db name]/htdocs/includes/save-email.php 中没有这样的文件或目录在第 2 行

致命错误：require_once() [function.require]：在 /homepages/3/[my db name]/htdocs 中打开所需的 '/includes/connect.php' (include_path='.:/usr/lib/php5') 失败/includes/save-email.php 在第 2 行
```

我已经尝试了我能想到的所有链接变体，包括`../link`、`./link`、`/link`和`link`. 奇怪的是，当我使用相同的整体语法（替换`require_once`为`include`）包含布局的元素时，即使它位于同一目录中，该元素也会加载而不会出现任何错误。

我不确定这是否重要，但我的服务器由 1&1 运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T02:35:53.037

设置 $path 不会做任何事情。您需要将包含文件夹与此 php 文档放在同一文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T02:46:37.960

require_once(/includes/connect.php) 将在您的服务器根目录中查找文件，而不是在当前文件夹中

替换

```
require_once(/includes/connect.php) 
```

经过

```
require_once(includes/connect.php) 
```

在第 2 行的 save-email.php 中

# c# - Alchemy Websocket Server - 如何强制断开客户端？

> ID：12926259
> 
> 赞同：5
> 
> 时间：2012-10-17T02:33:06.977
> 
> 标签：c#, websocket

我正在尝试 Alchemy Websocket 服务器，到目前为止它正在工作，但是我无法弄清楚如何强制断开客户端。

WebSocketServer 类上没有 Disconnect() 方法或任何类似的方法。作为服务器回调的一部分返回的 UserContext 对象上也没有 Disconnect 方法或任何类似的方法。

```
WebSocketServer _server;

public TestServer()
{
    _server = new WebSocketServer(90, IPAddress.Any);
    _server.OnConnect = OnConnect;

    _server.Start();
}

public void OnConnect(UserContext context)
{
    //no context.Disconnect() here
    //no _server.Disconnect(context) type method either  
} 
```

我只是错过了什么，还是没有办法强行断开客户端的连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T14:08:50.360

根据客户端-服务器逻辑，服务器不能断开客户端，但可以拒绝向未经身份验证的客户端提供服务。拒绝对客户端的服务与断开客户端的连接几乎相同。

# javascript - 按用户状态过滤表是否处于活动状态

> ID：12926261
> 
> 赞同：0
> 
> 时间：2012-10-17T02:33:31.050
> 
> 标签：javascript, jquery, asp.net-mvc, boolean, kendo-ui

模型

```
 public bool? IsActive { get; set; } 
```

linq 语句伪代码

```
 var userstatus = Users.Select(e => e.IsActive).Distinct().select();
   if (userstatus(bool) is DBNull)
        {
            e.Item.Text = "inactive";
            e.Item.Value = "0";
        }
        else if ((bool)["Bool"])
        {
            e.Item.Text = "active";
            e.Item.Value = "1";
        } 
```

通过下拉列表选择它

```
 <select >
     <option value="">All</option>
     <option id="active">Active</option>
      <option id="inactive">InActive</option>
      </select> 
```

过滤

```
 if($("#active").val()){

        $filter.push({ field: "IsActive", operator: "eq", value: true });
    }
     if($("#inactive").val()){

        $filter.push({ field: "IsActive", operator: "eq", value: false  });
    } 
```

所以linq是错误的，过滤也是错误的，任何人都可以帮助我或之前做过

我想按用户状态过滤列是否处于活动状态

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:38:09.303

对于过滤改变你的逻辑是这样的

```
if($("select").val() == 'active'){

        $filter.push({ field: "IsActive", operator: "eq", value: true });
    }
    else if  if($("select").val() == 'inactive'){

        $filter.push({ field: "IsActive", operator: "eq", value: false  });
    } 
```

# django - Django-Voting：解决 AttributeError

> ID：12926262
> 
> 赞同：0
> 
> 时间：2012-10-17T02:33:48.170
> 
> 标签：django, django-templates, django-views

我正在尝试在我的项目中实现[Django Reddit Style Voting 。](http://code.google.com/p/django-voting/wiki/RedditStyleVoting)过去几天我一直在搜索互联网，试图拼凑如何实现它，但不清楚如何设置我的 urlconf 来处理`confirm_vote.html`，以及该文件的内容可能是什么？我点击投票时遇到的错误是：

```
Generic vote view must be called with either post_vote_redirect, a 
"next" parameter in the request, or the object being voted on must 
define a get_absolute_url method or property. 
```

这与[这部分 Django-Votings' Code](https://github.com/brosner/django-voting/blob/master/voting/views.py#L76-82)相对应。我的项目设置几乎与 Github 页面上列出的示例项目相同。

我意识到我需要设置一个confirm_vote.html 页面，并进行了大量搜索以了解如何设置urlconf 来处理它。我找到了[This Blog Post](http://www.justinlilly.com/python/django_voting.html)，但它似乎没有回答我的问题。

谁能帮我弄清楚在 confirm_vote.html 和 url 正则表达式中添加什么来处理它？感谢您的帮助！

编辑

* * *

实际上刚刚意识到confirm_vote.html 的urlconf 在示例教程中。

```
(r'^links/(?P<object_id>\d+)/(?P<direction>up|down|clear)vote/?$',
    vote_on_object, dict(model=Link, template_object_name='link',
        template_name='kb/link_confirm_vote.html',
        allow_xmlhttprequest=True)), 
```

但仍然对感谢任何想法`AttributeError`的内容和内容感到困惑！`confirm_vote.html.`

编辑：link_list.html

* * *

```
url(r'^links/?$', object_list, dict(queryset=Link.objects.all(),
    template_object_name='link', template_name='links/link_list.html',
    paginate_by=15, allow_empty=True)),

{% for link in link_list %}<tr class="{% cycle odd,even %}">
<td class="vote">

  {% dict_entry_for_item link from vote_dict as vote %}
  {% dict_entry_for_item link from score_dict as score %}

  <form class="linkvote" id="linkup{{ link.id }}" action="/links/{{ link.id }}/{% if vote and vote.is_upvote %}clear{% else %}up{% endif %}vote/" method="POST">
    <input type="image" id="linkuparrow{{ link.id }}" src="{{ MEDIA_URL }}img/aup{% if vote and vote.is_upvote %}mod{% else %}grey{% endif %}.png">
    {% csrf_token %}
  </form>

  <form class="linkvote" id="linkdown{{ link.id }}" action="/links/{{ link.id }}/{% if vote and vote.is_downvote %}clear{% else %}down{% endif %}vote/" method="POST">
    <input type="image" id="linkdownarrow{{ link.id }}" src="{{ MEDIA_URL }}img/adown{% if vote and vote.is_downvote %}mod{% else %}grey{% endif %}.png">
    {% csrf_token %}
  </form>

</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:23:22.027

看起来您没有传递访问视图`?next=http://example.com/return_to_this_page_after_vote/`的 URL（不是 urls.py）`vote_on_object`。请检查您的模板或在此处发布。

**供参考：** 相反，您可以在重新发明轮子之前使用[django-ratings 。](https://github.com/dcramer/django-ratings)它易于使用和实施。

* * *

**编辑**

尝试这个：

```
<form class="linkvote" id="linkup{{ link.id }}" action="/links/{{ link.id }}/{% if vote and vote.is_upvote %}clear{% else %}up{% endif %}vote/?next=/" method="POST">
    <input type="image" id="linkuparrow{{ link.id }}" src="{{ MEDIA_URL }}img/aup{% if vote and vote.is_upvote %}mod{% else %}grey{% endif %}.png">
    {% csrf_token %}
  </form>

  <form class="linkvote" id="linkdown{{ link.id }}" action="/links/{{ link.id }}/{% if vote and vote.is_downvote %}clear{% else %}down{% endif %}vote/?next=/" method="POST">
    <input type="image" id="linkdownarrow{{ link.id }}" src="{{ MEDIA_URL }}img/adown{% if vote and vote.is_downvote %}mod{% else %}grey{% endif %}.png">
    {% csrf_token %}
  </form> 
```

我只添加`?next=/`到动作的末尾。我不确定它是否会起作用 - 但请试一试。

# asp.net - ASP.NET 4.5 GridView.AllowCustomPaging 属性如何使这更简单？

> ID：12926266
> 
> 赞同：3
> 
> 时间：2012-10-17T02:34:19.793
> 
> 标签：asp.net, gridview, paging, .net-4.5

我有一个 ASP.NET 4 GridView 控件，它使用以下 2 篇文章中讨论的逻辑：

*   [高效地对大量数据进行分页](http://www.asp.net/web-forms/tutorials/data-access/paging-and-sorting/efficiently-paging-through-large-amounts-of-data-vb)
*   [对自定义分页数据进行排序](http://www.asp.net/web-forms/tutorials/data-access/paging-and-sorting/sorting-custom-paged-data-vb)

ASP.NET 4.5`GridView.AllowCustomPaging`属性如何使这更简单？

非常欢迎提供有关如何使用它的文章的链接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T10:25:46.167

根据我最近的经验，它没有。

[具体来说：在使用 ASP.NET 4.5 的模型绑定](http://blogs.msdn.com/b/webdev/archive/2012/11/15/asp-net-webforms-model-binding-overview.aspx)系统时，在实现高效的 GridView 自定义分页（仅从一个非常大的数据库表中检索所需的数据页面）时，`GridView.AllowCustomPaging`属性没有进入它。

设置[GridView.SelectMethod](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.databoundcontrol.selectmethod.aspx)属性会导致使用模型绑定，这为我们提供了“ObjectDataSource 样式”功能（如您的链接中所述），而不需要 ObjectDataSource。在这种方法中，有两种选择：

**(1) 指定的方法`GridView.SelectMethod`返回一个`IQueryable`**，例如：

```
public IQueryable<MyClass> MySelectMethod1()
{
    return myService.GetAll(someCriteria);
} 
```

如果您不介意将 IQueryable 暴露给您的表示层，那么这是实现非常有效的分页的一种非常快速的方法。在运行时，框架会根据 GridView和属性自动将[Skip() 和 Take()方法应用于您的源。](https://stackoverflow.com/a/2380427/483655)仅从数据库返回所需的结果页面。简单的！`PageIndex``PageSize`

**(2) 指定的方法`GridView.SelectMethod`返回一些其他的可绑定对象**，例如：

```
public IList<MyClass> MySelectMethod2(int startRowIndex, int maximumRows, out int totalRowCount)
{
    totalRowCount = myService.GetCount(someCriteria);
    return myService.GetPage(someCriteria, startRowIndex, maximumRows);
} 
```

通过设置 totalRowCount，我们现在已经为 GridView 提供了正确呈现其 Pager 所需的所有信息，同时仅从数据库中检索了所需的数据页。

我曾期望使用该[`VirtualItemCount`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.virtualitemcount.aspx)属性（如此[处](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.allowcustompaging.aspx)所述），但据我所知，`totalRowCount`out-parameter 排除了该`VirtualItemCount`属性。

如果**(1)**或**(2)**未实现，则 GridView 将抛出异常：
**当 DataBoundControl 启用分页时，SelectMethod 应返回 IQueryable 或应具有所有这些强制参数：int startRowIndex、int maximumRows、out整数总行数**

所以，我们已经在 ASP.NET 4.5 中实现了 GridView 自定义分页......但是却`GridView.AllowCustomPaging`无处`GridView.VirtualItemCount`可寻！

# c - scanf 什么时候开始和停止扫描？

> ID：12926268
> 
> 赞同：7
> 
> 时间：2012-10-17T02:34:38.187
> 
> 标签：c, io, buffer, scanf

它似乎在按下键`scanf`时开始扫描输入，我想用下面的代码来验证这一点（为简单起见，我消除了错误检查和处理）。`Enter`

```
#include <stdio.h>

int main(int argc, char **argv) {
    /* disable buffering */
    setvbuf(stdin, NULL, _IONBF, 0);
    int number;

    scanf("%d", &number);
    printf("number: %d\n", number);

    return 0;
} 
```

另一个问题是，在我禁用输入缓冲之后（只是为了验证结果；我知道实际上我应该永远不要这样做，以防它干扰结果），输出是（注意额外的提示）：

```
$ ./ionbf
12(space)(enter)
number: 12
$
$ 
```

这与启用输入缓冲时的输出不同（没有额外提示）：

```
$ ./iofbf
12(space)(enter)
number: 12
$ 
```

启用缓冲区时似乎消耗了换行符。我在两台不同的机器上进行了测试，一台安装了 gcc 4.1.2 和 bash 3.2.25，另一台安装了 gcc 4.4.4 和 bash 4.1.5，两者的结果相同。

问题是：

1.  如何解释启用和禁用输入缓冲时的不同行为？
2.  回到最初的问题，什么时候`scanf`开始扫描用户输入？输入字符的那一刻？还是缓冲直到一行完成？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T03:59:12.903

有趣的问题——冗长的答案。如有疑问，我正在描述我认为在 Unix 上发生的事情；我把 Windows 留给其他人。我认为行为会相似，但我不确定。

使用 时，您使用系统调用`setvbuf(stdin, NULL, _IONBF, 0)`强制`stdin`流一次读取一个字符。`read(0, buffer, 1)`当您使用`_IOFBF`or运行时`_IOLBF`，管理流的代码将尝试一次读取更多字节（如果您使用`setvbuf()`或`BUFSIZ`不使用，则最多可达您提供的缓冲区的大小）。这些观察结果加上输入中的空格是解释发生了什么的关键。我假设您的终端处于正常或规范输入模式 - 请参阅[规范与非规范终端输入](https://stackoverflow.com/questions/358342/canonical-vs-non-canonical-terminal-input/358381#358381)以进行讨论。

您是正确的，在您键入 return 之前，终端驱动程序不会使任何字符可用。这允许您在键入时使用退格键等来编辑该行。

当您按下回车键时，内核有 4 个字符可用于发送给任何想要读取它们的程序：`1` `2` `space` `return`.

在您*不*使用的情况下，这 4 个字符会通过诸如 的调用`_IONBF`一次性读入标准 I/O 缓冲区。然后从缓冲区中收集、 the和字符，并将空间放回缓冲区中。（请注意，内核已将所有四个字符都传递给程序。）程序打印其输出并退出。shell 恢复，打印一个提示并等待更多输入可用 - 但在用户键入另一个 之前，不会有任何输入可用，可能（通常）前面有一些其他字符。`stdin``read(0, buffer, BUFSIZ)``scanf()``1``2``space``return`

在您使用 的情况下*，*程序`_IONBF`一次读取一个字符。它`read()`调用获取一个字符并获取`1`; 它再次`read()`调用并获得`2`; 它再次`read()`调用并获取`space`角色。（请注意，内核仍然有`return`准备好等待。）它不需要空间来解释数字，所以它把它放回它的推回缓冲区（推回缓冲区中保证至少有一个字节的空间），为下一个标准做好准备 I /O 读操作，并返回。程序打印其输出并退出。shell 恢复，打印提示，并尝试从终端读取新命令。内核通过返回正在等待的换行符来强制执行，shell 会说“哦，这是一个空命令”并给你另一个提示。

`1` `2` `x` `p` `s` `return`您可以通过键入( `_IONBF`) 程序来证明这就是发生的情况。当你这样做时，你的程序读取值 12 和“x”，留下“ps”和换行符由 shell 读取，然后 shell 将执行`ps`命令（不回显它读取的字符），然后提示再次。

您还可以使用`truss`or`strace`或类似的命令来跟踪程序执行的系统调用，以查看我建议发生的事情的真实性。

# ruby-on-rails - 在 Rails 中使用通配符和重定向路由时出错

> ID：12926269
> 
> 赞同：3
> 
> 时间：2012-10-17T02:34:44.543
> 
> 标签：ruby-on-rails

```
match "/myroute*" => redirect("http://google.com"), :as => :myroute 
```

上面的行`routes.rb`导致以下错误

```
/Users/user/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/racc/parser.rb:349:in `on_error':      (Racc::ParseError)
parse error on value ")" (RPAREN)
    from /Users/user/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/racc/parser.rb:99:in `_racc_do_parse_c'
    from /Users/user/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/racc/parser.rb:99:in `do_parse' 
```

看起来是因为我添加了通配符 (*)。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T02:45:39.283

通配符组件也需要有一个“标签”，例如

```
match "/myroute*something" => redirect("http://google.com"), :as => :myroute 
```

将分别匹配`/myrouteblah`和`/myroute/hello/world`where `params[:something]`is`blah`和`/hello/world`。

编辑：如果您还没有，请查看[http://guides.rubyonrails.org/v3.2/routing.html#route-globbing 。](http://guides.rubyonrails.org/v3.2/routing.html#route-globbing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T02:42:06.293

试试这个：

```
match ':redirect' => redirect("http://google.com"), :as => :myroute , :constraints => { :redirect => /myroute.?/i } 
```

# php - 使用 strpos() 查找可能包含 CRLF 的字符串

> ID：12926272
> 
> 赞同：0
> 
> 时间：2012-10-17T02:35:44.550
> 
> 标签：php

我有大量文本（最初来自文本文件）并且正在使用 strpos() 来查找它的小片段。这在大多数情况下都可以正常工作，但是当没有找到提取之前或之后（或可能两者）之前或之后存在 CRLF 时（strpos() 返回 false）。

有什么提示或指示可以帮助我找到解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:41:29.117

修剪掉 crlf

```
$idx = strpos($target, trim($my_text)); 
```

# php - 验证后将表单变量发布到另一个 php 文件

> ID：12926273
> 
> 赞同：0
> 
> 时间：2012-10-17T02:35:46.400
> 
> 标签：php

```
<?php
//index.php
session_start(); 
if (isset($_SESSION['username'])) {
header('Location: Pro_Lesson.php');
}
if (isset($_POST['username'], $_POST['password'])){
    if(empty($_POST['username']) || empty( $_POST['password'])){
        echo "username or password are empty";
    }else {
header('Location: login.php');
    }
}
?>
<html>
<head>
</head>
<body>
<h3>User Login</h3>
<table border="0">
<form method="POST" action="index.php">
<tr><td>Username</td><td>:</td><td><input type="text" name="username" size="20"></td></tr>
<tr><td>Password</td><td>:</td><td><input type="password" name="password" size="20"></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td><input type="submit" value="Login"></td></tr>
</form>
</table>
</body> 
</html> 
```

成功验证用户名和密码后，如何将表单数据发布到另一个 php 页面？它安全吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T02:40:01.053

你可以做到这一点：

```
$_SESSION['posted'] = $_POST; 
```

在其他 php 页面中：

```
print_r($_SESSION['posted']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T02:43:24.550

我不确定你在问什么，但我会试一试。

您可能只关心用户名（或用户 ID）。您应该做的是将经过身份验证的用户存储在 cookie（或基于会话的 cookie）中。仅将用户的用户名（或用户 ID）存储在用户可编辑的 cookie 中是一个非常糟糕的主意 (tm)。您应该做的是在会话 ID 的后端有一个表，cookie 存储主 ID 的随机哈希，然后您可以使用它来查找您存储的有关该用户的信息。看似复杂，其实不然。如果您愿意，我可以对此进行更多扩展。

您可以按照 felipsmartins 的建议进行操作，但不应将用户密码存储在任何地方。

# java - 使用 Prepared Statement 进行选择性更新

> ID：12926277
> 
> 赞同：0
> 
> 时间：2012-10-17T02:36:25.970
> 
> 标签：java, mysql, prepared-statement

我有一个更新 MySQL 表的函数。我需要根据参数是否存在对字段进行选择性更新。这就是我现在编码的方式。

```
 String sql =  "";
        if (employerId > 0) sql = sql + "employerid=?,";
        if (status != null) sql += " status=?,";
        if(printurl != null) sql += " url=?";
        if (sql.endsWith(",")) sql = sql.substring(0, sql.length()-1);
        PreparedStatement ps = con.prepareStatement("update employer set "
                + sql
                + "where id=?");

       if (employerId > 0) ps.setInt(1, employerId);
       if (status != null) ps.setString(2,status); 
```

当我这样做时，如何确定参数索引？根据存在的参数（如果条件），参数索引也会有所不同，对吧？我该如何解决这个问题？有没有更好的方法在 Java 中处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T03:04:32.410

您可以尝试如下静态查询吗？

```
String sql =  "update employer set employerid=IF(?=0,employerid,?),"+
              "status=IFNULL(?,status), url=IFNULL(?,url) " +
              "where id=?"; 
```

`0`从概念上讲，如果它是或，我建议使用自身更新列`null`。这样，您无需创建动态查询字符串或动态设置参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T02:47:11.857

SqlBuilder库提供了一种更好的方法来在 java 程序中生成动态 SQL 查询[。](http://openhms.sourceforge.net/sqlbuilder/)QueryPreparer类通过为您跟踪索引[来](http://openhms.sourceforge.net/sqlbuilder/apidocs/com/healthmarketscience/sqlbuilder/QueryPreparer.html)专门解决您在此处遇到的问题。

免责声明，我是 SqlBuilder 项目的主要开发者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T03:11:43.483

使用**arraylist**怎么样？当你第一次检查参数是否存在时，添加到arraylist。之后，迭代数组列表并设置参数。在这种情况下，

> 它不仅确定了参数索引，而且避免了再次检查参数是否存在。

像那样

```
List paramList = new ArrayList<Object>();

         if (employerId > 0) {
             sql = sql + "employerid=? ,";
             paramList.add(employerId);
         }
         if (status != null) { 
             sql += " status=? ,";
             paramList.add(status);
         }
         if(printurl != null) {
             sql += " url=? ";
             paramList.add(printurl);
         }
         if (sql.endsWith(",")) 
             sql = sql.substring(0, sql.length()-1);

         PreparedStatement ps = con.prepareStatement("update employer set " + sql + "where id=?");

         for(int i=0; i< paramList.size(); i++) {
             if(paramList.get(i) instanceof Integer) {
                 ps.setInt((i + 1), (Integer)paramList.get(i));
             }
             else if(paramList.get(i) instanceof String) {
                 ps.setString((i + 1), (String)paramList.get(i));
             }
         }
         System.out.println(ps); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T02:50:51.173

请看以下代码：

```
 String sql =  "update employer set ";
        boolean hasParam = false;
        if (employerId > 0){
                sql += " employerid=? ";
                hasParam = true;
        }
        if (status != null){
            if(hasParam){
                sql += " , ";
            }
            sql += " status=? ";
            hasParam = true;
        }
        if(printurl != null){
            if(hasParam){
                sql += " , ";
            }
            sql += " url=?";
        }
        sql += " where id=?";
        PreparedStatement ps = con.prepareStatement(sql);

       int index = 1;
       if(employerId > 0){
           ps.setInt(index++, employerId);
       }
       if(status != null){
           ps.setString(index++, status);
       }
       if(printurl != null){
           ps.setString(index++, printurl);
       }
       ps.setInt(index, id); 
```

# iphone - xcode 4.5 启动图像奇怪的名称问题（现有项目）

> ID：12926280
> 
> 赞同：1
> 
> 时间：2012-10-17T02:37:06.533
> 
> 标签：iphone, objective-c, xcode4.5

这更像是一个问题，而不是一个问题。我尝试将所有**启动图像**添加到我现有的项目（iPhone、iPhone 3.5“retina 和 iPhone5 4”）并且 xcode 不断在图像文件名的末尾添加额外的“@2x”。例如，现在我所有的新启动图像都这样命名

iPhone 320x480 = 默认@2x.png

iPhone 视网膜 640x960 = 默认@2x@2x.png

iPhone 视网膜 4" 640x1136 = 默认@2x-568h@2x.png

在添加之前，我从图像文件夹中删除了所有引用和文件，并从项目摘要页面中添加了新的。该应用程序运行良好我只是担心启动图像的奇怪文件名。有没有人遇到过这个？这只发生在现有项目中。如何为现有项目解决此问题？

**当前具有奇怪名称的图像文件夹**

[http://postimage.org/image/4kyy6pj6d/](http://postimage.org/image/4kyy6pj6d/)

**尝试添加时的xcode警告**

[http://postimage.org/image/dhebodz6d/](http://postimage.org/image/dhebodz6d/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T18:26:09.943

听起来存储启动图像文件名的属性已被不当修改。在 Xcode 中，在 Target 配置的 Info 选项卡上，确认“Launch image (iPhone)”的值是`Default.png`，而不是（现在听起来可能是这样）`Default@2x.png`。您也可以在 Xcode 外部验证这一点；在 中`YourProject-Info.plist`，确认`UILaunchImageFile~iphone`键的字符串值为`Default.png`。

该值表示 bog-standard、pre-iPhone 5、non-retina-display iPhone 的启动图像的文件名，并由 Xcode 自动修改以获得变体文件的名称。如果该值包含 extra `@2x`，则所有派生文件名都将包含 extra `@2x`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T02:59:29.557

在最新的 Xcode 中，任何名为“Default.png”或“icon.png”且尺寸符合 Retina 设备要求的图像都会自动在文件名末尾添加“@2x”后缀。

因此，您无需为基本使用的图像手动添加@2x 后缀。

# ios - 如何计算/迭代 NSManagedObject 具有的所有属性？

> ID：12926281
> 
> 赞同：2
> 
> 时间：2012-10-17T02:37:16.333
> 
> 标签：ios, uitableview, core-data, attributes

我有一个 NSManageObject 设置为核心数据中的实体。获取实体后，我希望能够提取所有属性并将它们放入 NSMutableArray 以填充 UITableView。

例如： **实体：** 项目

**属性：**开始日期（必需）；完成日期（可选）；项目名称（必填）；ETC....

如何将所有这些放入 NSMutableArray？或者有没有更好的方法来填充 UITableView？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T02:58:58.527

你可以通过询问`NSEntityDescription`它的`NSAttributeDescription`对象来得到它：

```
NSManagedObject *object = ...;
NSEntityDescription *entity = [object entity];
NSDictionary *attributes = [entity attributesByName];

NSMutableArray *values = [NSMutableArray array];
for (NSString *attributeName in attributes) {
  id value = [object valueForKey:attributeName];
  if (value != nil) {
    [values addObject:value];
  }
} 
```

注意：这仅包含*属性*，不包含关系。如果您只需要关系值，则可以使用`-relationshipsByName`. 如果你想要属性和关系，你可以使用`-propertiesByName`.

决定这是否是一个好主意留给读者作为练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T02:39:22.990

**编辑**

只需向您的实体添加一个返回非空属性数组的方法：

```
- (NSMutableArray*)nonNullAttributes {
    NSMutableArray *mutableArray = [[NSMutableArray alloc] initWithCapacity:0];

    //Pretend you have an attribute of startDate
    if (startDate && startDate != null) {
        [mutableArray addObject:startDate]
    }

    //Do this for all of your attributes.
    //You might want to convert the attributes to strings to allow for easy display in the tableview.

    return mutableArray;
} 
```

你可以在你的 NSManagedObject 子类中添加它。然后，您可以使用数组的计数来知道要拥有多少行。

**原始答案**

为什么还要费心将属性放入数组中？只需在填充表格视图时直接从实体访问它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T02:45:11.113

你不能只`executeFetchRequest`用来获取数组吗？

```
NSEntityDescription *entity = [NSEntityDescription
                                   entityForName:@"Project"    
                                   inManagedObjectContext:someContext];
[fetchRequest setEntity:entity];
NSArray *fetchedObjects = [someContext executeFetchRequest:fetchRequest error:&error]; 
```

# mysql - 使用别名在mysql中将多个表链接在一起

> ID：12926283
> 
> 赞同：1
> 
> 时间：2012-10-17T02:37:26.833
> 
> 标签：mysql

我很接近，但我无法弄清楚。我有一个数据库，其中包含工作人员、他们的头衔、与他们相关的位置（其中可能有几个）。我用一些测试信息以及我的 sql 语句的一部分制作了一个 SQL fiddle。我缺少的另一部分是试图让所有位置与相应的工作人员及其头衔一起出现。我之前在工作人员表中使用了另一列，但我想删除标题列并将其放在小提琴中。我为contact1、contact2 和partner 创建了别名。但我不能去工作的是如何获得他们的头衔。我一次只能得到一个联系人。有什么想法吗？

[MySQl Fiddle 在这里](http://sqlfiddle.com/#!2/04326/2)

所以不能真正做页面的屏幕截图，但期望的结果是所有位置都显示与其关联的联系人。所以它会是这样的：

*   地点
*   地址
*   电话号码
*   联系方式 1
*   联系方式 2
*   伙伴

我有一个 php 格式的东西，我只需要它来显示该信息。如果该位置没有联系人 1 或联系人 2，我会让它通过 php.ini 消失。在示例中，应显示 6 个位置，以及所有联系信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T03:40:27.617

使用左连接加入contact1/2/partner，如小提琴[http://sqlfiddle.com/#!2/04326/23](http://sqlfiddle.com/#!2/04326/23)

# google-drive-api - 什么是 fileid 规范？

> ID：12926284
> 
> 赞同：2
> 
> 时间：2012-10-17T02:37:37.573
> 
> 标签：google-drive-api

我将从 Google Drive 中检索一个文件并将其保存到我的本地目录中。然后我想将文件命名为 titlename_fileid。在这种情况下，我假设分隔符是“_”。要决定哪个字符应该作为分隔符，请告诉我哪个字符不用于 fileid。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:18:27.137

从我所看到的情况来看，使用了下划线“_”和破折号“-”。

# c# - ListView 列的两位十进制格式

> ID：12926289
> 
> 赞同：1
> 
> 时间：2012-10-17T02:38:20.483
> 
> 标签：c#, wpf

如何格式化`TotalPrice`小数点后 2 位？

我将一个 double 值传递给`<TextBlock Text="{Binding TotalPrice}" FontFamily="Segoe WP" />`

例如我传入 10，我想在 ListView 列中显示 10.00？

代码：

```
 <GridViewColumn Header="Price" Width="50">
     <GridViewColumn.CellTemplate>
         <DataTemplate>
             <StackPanel Width="50" >
                 <TextBlock Text="{Binding TotalPrice}" FontFamily="Segoe WP" />
             </StackPanel>
         </DataTemplate>
     </GridViewColumn.CellTemplate>
 </GridViewColumn> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:41:30.187

这行得通吗？

```
DisplayMemberBinding="{Binding Path=TotalPrice, StringFormat=Now {0:c}!}" 
```

请参见[BindingBase.StringFormat 属性](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.stringformat.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T12:26:24.803

也可以使用 this 来绑定小数点后两位

```
DisplayMemberBinding="{Binding Path=TotalPrice, StringFormat=Now {0:.00}!}" 
```

在这里你也可以这样

# erlang - Erlang从节点分离shell/退出shell而不杀死节点

> ID：12926291
> 
> 赞同：10
> 
> 时间：2012-10-17T02:38:50.453
> 
> 标签：erlang, rebar

我觉得我错过了一些明显的愚蠢的东西，但我已经看了一遍，找不到我的问题的答案。

假设我有一个使用 rebar 构建的应用程序版本，然后我开始了它

```
rel/my_app/bin/my_app start 
```

我让它愉快地忙了一阵子，然后我想附加一个控制台来检查东西，所以我做了

```
rel/my_app/bin/my_app attach 
```

并得到一个外壳。我乱七八糟，然后当我完成后，我想退出 shell，但让应用程序继续运行。如果我这样做`^G q`or `q().`，它会降低整个应用程序。

我也玩过启动应用程序`+Bi`以阻止它允许某人意外关闭它，但是一个人甚至如何退出附加的外壳呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T04:19:41.060

我不使用钢筋，我从来不明白它要解决什么问题，但我认为当你“附加”时你正在做与运行相同的事情`to_erl`。要退出，请键入 control-D (EOF)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T05:09:32.183

`CTRL-D`应该让你离开并保持应用程序运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-26T08:54:33.030

Eshell V10.7（使用 ^G 中止）

$ Ctrl ^ G $ q

在这里，你可以退出远程控制台

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-10-17T04:30:27.647

如果它是一个普通的远程 shell，按两次 Ctrl-C 应该可以解决问题。

# mysql - 我的数据库没有更新，我的代码有什么问题？

> ID：12926292
> 
> 赞同：-1
> 
> 时间：2012-10-17T02:38:50.377
> 
> 标签：mysql, vb.net

**晚上好，**

我正在使用下面的代码来更新我的 MySQL 数据库中的值。在运行时，代码一直执行，没有错误，但是，当我查看数据库时，记录没有受到影响。有人可以告诉我我做错了什么吗？谢谢。

我最近自学了如何使用参数，所以也许我做错了——不知道。

**这是我的代码：**

```
 Private Sub updateCard()
    Call encryptCard()
    Dim ConnectionString As String = String.Format("Server={0};Port={1};Uid={2};Password={3};Database=accounting", FormLogin.ComboBoxServerIP.SelectedItem, My.Settings.DB_Port, My.Settings.DB_UserID, My.Settings.DB_Password)
    Dim myQuery As String = "UPDATE cc_master " & _
                           "SET ccType = @ccType, ccNumber = @ccNumber, ccExpireMonth = @ccExpireMonth, " & _
                           "ccExpireYear = @ccExpireYear, ccCode = @ccCode, ccAuthorizedUseStart = @ccAuthorizedUseStart, " & _
                           "ccAuthorizedUseEnd = @ccAuthorizedUseEnd, ccZipcode = @ccZipcode, dateModified = @dateModified, modifiedBy = @modifiedBy " & _
                           "WHERE ccID = @ccID"

    Using dbConn As New MySqlConnection(ConnectionString)
        Using dbComm As New MySqlCommand()
            With dbComm
                .Connection = dbConn
                .CommandType = CommandType.Text
                .CommandText = myQuery
                .Parameters.AddWithValue("@ccID", ListViewCard.SelectedItems(0).ToString)
                .Parameters.AddWithValue("@ccType", ComboBoxCardType.Text)
                .Parameters.AddWithValue("@ccNumber", encryptedCard)
                .Parameters.AddWithValue("@ccExpireMonth", TextBoxExpireMonth.Text)
                .Parameters.AddWithValue("@ccExpireYear", TextBoxExpireYear.Text)
                .Parameters.AddWithValue("@ccCode", TextBoxCVV2.Text)
                .Parameters.AddWithValue("@ccAuthorizedUseStart", Format(DateTimePickerStartDate.Value, "yyyy-MM-dd HH:MM:ss"))
                .Parameters.AddWithValue("@ccAuthorizedUseEnd", Format(DateTimePickerEndDate.Value, "yyyy-MM-dd HH:MM:ss"))
                .Parameters.AddWithValue("@ccZipcode", TextBoxZipCode.Text)
                .Parameters.AddWithValue("@dateModified", Format(DateTime.Now, "yyyy-MM-dd HH:MM:ss"))
                .Parameters.AddWithValue("@modifiedBy", FormLogin.TextBoxUsername.Text)
            End With

            Try
                dbConn.Open()
                dbComm.ExecuteNonQuery()
                MessageBox.Show("Card info SUCCESSFULLY updated!")
            Catch ex As Exception
                MessageBox.Show("A DATABASE ERROR HAS OCCURED" & vbCrLf & vbCrLf & ex.Message & vbCrLf & _
                                    vbCrLf + "Please report this to the IT/Systems Helpdesk at Ext 131.")
            End Try
        End Using
    End Using

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T02:49:43.660

尝试改变`dbComm.ExecuteNonQuery()`成为：

```
Try 
   Dim affectedRow As Integer
   dbConn.Open() 
   affectedRow = dbComm.ExecuteNonQuery() 
   if affectedRow > 0 then
       MessageBox.Show("Card info SUCCESSFULLY updated!") 
   else
       MessageBox.Show("No data to be updated!") 
   End If
Catch ex As Exception
   ....
   ....
End Try 
```

这将告诉您应该更新了多少行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:31:26.480

**早上好，**

经过几个小时的调试和来自 www.bpforums.com 的 Brandon 的一些帮助，找到了以下解决方案。查询现在可以正确执行，并且数据库会受到相应的影响。

**解决方案：**

Bradon @ bpforums.com 向我指出，我的数据库中 ccID 的 DataType 是 INT - 因此，我需要将 listview selecteditem 的值转换为整数。然后我意识到我需要调用*.text*而不是*.ToString*来获取索引的实际文本值，然后才能转换为整数。

```
.Parameters.AddWithValue("@ccID", CInt(ListViewCard.SelectedItems(0).Text)) 
```

感谢@habibillah、@Laurence 和@Adrian Cornish。你为我指明了正确的方向。

# ruby-on-rails - Ruby on Rails - 如何管理对共享文件的多重访问

> ID：12926294
> 
> 赞同：3
> 
> 时间：2012-10-17T02:39:17.270
> 
> 标签：ruby-on-rails, file-io, concurrency, read-write

我对 Rails 很陌生，我需要为我的大学实施一个项目。该项目由一个使用二进制文件作为数据库的网站组成。

所以我需要知道一种线程安全的方式来读写这个文件，考虑到同一个文件（数据库）将被多个进程使用（每次有人访问该站点时，它应该读写数据到文件中） .

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T03:30:17.283

确实*没有*一种优雅的方式来处理它。你最好采用更传统的方法，使用像[mySQL](https://www.mysql.com/)或[PostgreSQL](http://www.postgresql.org/)这样的 SQL 服务器，它们基本上做同样的事情。

编辑：

我没有意识到您可以[在多线程模式下使用 sqlite](https://www.sqlite.org/threadsafe.html)。这似乎满足了这两个要求......

# android - 应用内结算订阅 EXPIRED 订单 ID 是否应该与 PURCHASED 订单 ID 相同？

> ID：12926298
> 
> 赞同：0
> 
> 时间：2012-10-17T02:39:25.887
> 
> 标签：android

我终于有一个每月订阅到期，但在 3 个具有多个设备的案例中，有 2 个订单 ID 不同。PURCHASED 订单 ID 为“123.abc”，而 EXPIRED 订单 ID 仅为“abc”。在其中一台设备上，订单 ID 相同。我不确定哪个设备是一个月前的原始购买设备。我刚刚购买了新的每月订阅，它的订单 ID 是“456.def”。

似乎没有一种合理的方法来测试应用内订阅到期的完整周期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:57:21.667

答案似乎是肯定的。

就我而言，我清除了强制恢复交易的应用数据。这仅包括 EXPIRED 订单 ID。此外，新的订阅购买包括 2 个订单 ID 分别为“456.def”和“def”的订单。我想这是对 Google Play 端的某种修复。

# gwt - gwt i18n LocalizableResource 文件路径

> ID：12926301
> 
> 赞同：0
> 
> 时间：2012-10-17T02:40:10.820
> 
> 标签：gwt, localization, internationalization

我正在尝试设置资源属性文件来本地化我的应用程序。

```
public static interface MenuConstants extends Constants {

    String categoryCells();

} 
```

我有相应的`LocalizableResource_en.properties`：

```
categoryCells = Cell Widgets 
```

但它在这一行失败了：

```
MenuConstants constants = GWT.create(MenuConstants.class); 
```

随着消息：

```
[TRACE] [XX] - Generating method body for categoryCells()
    [ERROR] [XX] - No resource found for key 'categoryCells '
    [WARN] [XX] - Searched the following resources: 
```

我想知道我应该把`*.properties`文件放在哪里让 GWT 找到资源？

我的`gwt.xml`文件：

```
<inherits name="com.google.gwt.i18n.I18N"/> 
<inherits name="com.google.gwt.i18n.CldrLocales"/>

<extend-property name="locale" values="en"/>
<extend-property name="locale" values="fr"/>
<set-property-fallback name="locale" value="en"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T03:29:54.533

[根据开发指南](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinderI18n?hl=en#Bonjour)，如果您希望常量可以在 UiBinder 模板和 Java 代码中访问，您必须命名您的文件`LocalizableResource_<locale>.properties`并将它们放入包中`com.google.gwt.i18n.client`。为我工作。

# python - 解释“[c for c in cEdges if secString in c[0]]”

> ID：12926302
> 
> 赞同：2
> 
> 时间：2012-10-17T02:40:41.850
> 
> 标签：python, syntax, list-comprehension

在我试图查找的程序的前面有一个错误，但被要求解释这部分代码中发生了什么。下面是代码以及我认为它在做什么，但在某些方面尚不清楚。一些帮助理解将不胜感激。

```
for title in titles:
    secString = 'sec_%02d' % (title)
    titleCitations = [c for c in cEdges if secString in c[0]]
    intraCitations = [c for c in titleCitations if secString in c[1]]
    print title, len(titleCitations), len(intraCitations), len(titleCitations) - len(intraCitations) 
```

首先， secString 获取`'sec_%02d'`与标题相关的余数，（我认为这只是查找所有引用标题的字符串？）。然后它会创建一个标题引用列表。

尽管我对括号中的部分感到困惑。如果我理解正确，它会采用 cEdge，我认为它只是来自给定美国法律代码参考的一对数字列表，即 26 USC 501 变为 (26, 501)，并询问 secString 在 c 中是否有值[0] 点。

（这是我感到困惑的地方；我猜 c[0] 点可能对应于上面示例中的 26，而 c[1] 对应于 501？当然我什至不确定我是否理解c 部分正确。）

如果 c[0] 位置已满，则将其放入 titlecitations 中。然后它会创建引文列表。此列表查看 titlecitations 列表并询问 secString 中是否填充了 c[1]，如果是，则将其放入此列表中。

我知道有些东西有问题，因为那时标题引用和引用似乎是同一个列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:53:38.970

```
secString = 'sec_%02d' % (title) 
```

字符串上的`%`运算符不是模数，它是一个格式化运算符，其行为类似于 C 的 printf()。`%02d`是格式化`title`为两位数的格式化代码。如果`title`只有一个数字，则用 a 填充`0`（例如 9 变为`09`）。

> （这是我感到困惑的地方；我猜 c[0] 点可能对应于上面示例中的 26，而 c[1] 对应于 501？当然我什至不确定我是否理解c 部分正确。）

那是对的。

```
titleCitations = [c for c in cEdges if secString in c[0]] 
```

这将搜索其中的项目`cEdges`并找到其中标题包含字符串的项目，`sec_XY`其中 XY 是前面的两位数。

```
intraCitations = [c for c in titleCitations if secString in c[1]] 
```

现在它搜索我们在上一步中找到的东西，再次搜索 sub-string `sec_XY`。

最终结果是`intraCitations`包含所有项目的列表，`cEdges`其中第一项和第二项都包含 substring `sec_XY`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T02:47:50.893

列表理解，例如：

```
result = [element for element in list if element in set] 
```

相当于：

```
result = []
for element in list:
    if element in set:
        result.append(element) 
```

表达式`element in set`（在您的情况下，`c[0]`and `c[1]`）是成员资格测试，如果`element`包含在`set`.

至于您的代码的具体细节，请`titleCitations`参阅文档引用的来源 [1] `title`。`intraCitations`包含由（因为它们是从 中选择的`titleCitations`）和 reference引用的文本`title`。

[1] 实际上，`titleCitations`两者`intraCitations`都包含`c`满足这些约束的元组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T02:48:40.200

```
for title in titles:

    secString = 'sec_%02d' % (title) 
```

将整数标题插入用零填充的此字符串中，使其长度为两个字符

```
 titleCitations = [c for c in cEdges if secString in c[0]] 
```

遍历 cEdges 的每个元素（它们本身就是列表）并且只包括那些第一个元素包含刚刚构建的字符串的元素

```
 intraCitations = [c for c in titleCitations if secString in c[1]] 
```

同样，构建一个 titleCitations 子列表，其中包含第二个元素包含 secString 的那些元素

```
 print title, len(titleCitations), len(intraCitations), len(titleCitations) - len(intraCitations) 
```

打印书名、titlecitations 中的元素数量（大概是被引用的次数）、Intracitations 的数量以及不是 intracitations 的 titleCitations 的数量（这表明一个是另一个的子集）

# vbscript - 在 Vbscript 中查找文本

> ID：12926306
> 
> 赞同：0
> 
> 时间：2012-10-17T02:41:10.647
> 
> 标签：vbscript

我正在寻求帮助以读取日志文件，其中日志文件在日志中具有当前日期，我想从那里读取所有行并查找错误以输出当前日期的错误。

**我的示例日志文件**

```
[10/12/2012 testing the app1
[10/13/2012 testing the app2
[10/14/2012 testing the app3
[10/15/2012 testing the app4 
```

**我未完成的 vbscript：**

```
Const ForReading = 1

Dim strSearchFor

strSearchFor = "currentdate in the log file"

Set objFSO = CreateObject("Scripting.FileSystemObject")

Set objTextFile = objFSO.OpenTextFile("mylogfile.log", ForReading)

strLine = objTextFile.ReadLine

If log contains (inside mylogfile.log file the) current date then ' I am looking help to write the code here...

  Wscript.Echo "we found current date"

Else

  Wscript.Echo "We did not found current date"

End If 
```

在这方面寻求帮助......非常感谢......提前......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:39:04.623

[`InStr`](http://msdn.microsoft.com/en-us/library/wybb344c%28v=vs.84%29.aspx)将在字符串中找到子字符串

```
Const ForReading = 1

Dim strSearchFor
strSearchFor = "currentdate in the log file"

Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objTextFile = objFSO.OpenTextFile("mylogfile.log", ForReading)

do until objTextFile.AtEndOfStream
    strLine = objTextFile.ReadLine()

    If InStr(strLine, strSearchFor) <> 0 then
        Wscript.Echo "we found current date"
    Else
        Wscript.Echo "We did not found current date"
    End If
loop
objTextFile.Close 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T07:46:16.997

这是Powershell的方式（我写的时候的问题也被标记为Powershell ...）

```
$log = get-content c:\path\mylogfile.log

$find = $log | select-string '10/15/2012' #the date you need to find

if ($find)
{
"we found current date"
}
Else
{
"We did not found current date"
} 
```

# c# - 为什么不能将迭代器块与 IOrderedEnumerable 一起使用

> ID：12926313
> 
> 赞同：2
> 
> 时间：2012-10-17T02:41:35.703
> 
> 标签：c#, .net, linq, mono, iterator

我写了这个：

```
using System;using System.Linq;
static class MyExtensions
{
    public static IEnumerable<T> Inspect<T> (this IEnumerable<T> source)
    {
        Console.WriteLine ("In Inspect");
        //return source;    //Works, but does nothing
        foreach(T item in source){
            Console.WriteLine(item);
            yield return item;
        }
    }
} 
```

然后用这个去测试它：

```
var collection = Enumerable.Range(-5, 11)
    .Select(x => new { Original = x, Square = x * x })
    .Inspect()
    .OrderBy(x => x.Square)
    //.Inspect()
    .ThenBy(x => x.Original)
    ;
foreach (var element in collection)
{
Console.WriteLine(element);
} 
```

第一次使用`Inspect()`效果很好。第二个，注释掉，不会编译。的回报`OrderBy`是`IOrderedEnumerable`。我`IOrderedEnumerable` *原以为是* `IEnumerable`-a，但是，我用拳头打滚，我试过：

```
public static IOrderedEnumerable<T> Inspect<T> (this IOrderedEnumerable<T> source)
{
    Console.WriteLine ("In Inspect (ordered)");
    foreach(T item in source){
        Console.WriteLine(item);
        yield return item;
    }
} 
```

但这也不会编译。我被告知我不能有迭代器块，因为 System.Linq.IOrderedEnumberable 不是迭代器接口类型。

我错过了什么？我不明白为什么人们不想像处理原始集合一样迭代有序集合。

（使用 Mono 2.10.8.1，它实际上是 C# 4.0，和 MonoDevelop 2.8.6.3）

**更新：**

正如 joshgo 好心指出的那样，我可以采用 的输入参数`IOrderedEnumerable`，它确实起到*了* `IEnumerable`-a 的作用。但是要迭代我必须返回`IEnumerable`，而我原来的错误是由`ThenBy`，坚持给定的`IOrderedEnumerable`。也很合理。但是这里有办法满足`ThenBy`吗？

**更新2：**

在玩过两个答案中的代码之后（这两个答案都非常有帮助），我终于明白为什么我不能使用带有 IOrderedEnumerable 返回的 yield：没有意义，因为这些值必须完全可用才能执行种类。因此，与其使用带有 yield 的循环，不如使用循环打印出所有项目，然后在最后只返回一次 source 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:12:45.733

如果你想在操作后应用你的扩展方法，返回`IOrdereEnumerable`并继续排序，那么你需要创建第二个重载扩展：

```
public static IOrderedEnumerable<T> Inspect<T>(this IOrderedEnumerable<T> source)
{
    Console.WriteLine("In Ordered Inspect");
    // inspected items will be unordered
    Func<T, int> selector = item => { 
              Console.WriteLine(item); 
              return 0; };

    return source.CreateOrderedEnumerable(selector, null, false);    
} 
```

这里有趣的是：

*   您需要返回`IOrderedEnumerable`才能申请`ThenBy`或`ThenByDescending`
*   `IOrderedEnumerable`不是通过创建的`yield return`。在您的情况下，可以通过从源代码创建它来实现
*   您应该创建虚拟选择器，它不会破坏项目的顺序
*   输出将不包含有序项，因为选择器的执行顺序与输入序列相同。

如果您想查看订购的商品，您需要执行您的`OrderedEnumerable`. 这将强制执行之前出现的所有运算符`Inspect`：

```
public static IOrderedEnumerable<T> Inspect<T>(this IOrderedEnumerable<T> source)
{
    Console.WriteLine("In Ordered Inspect");            
    var enumerable = source.CreateOrderedEnumerable(x => 0, null, false);    
    // each time you apply Inspect all query until this operator will be executed
    foreach(var item in enumerable)
        Console.WriteLine(item);
    return enumerable;    
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T03:19:23.407

我相信可以在这里找到对错误的解释：[一些有助于理解“产量”](https://stackoverflow.com/questions/317462/some-help-understanding-yield)

引用 Lasse V. Karlsen 的话：

> 使用 yield return 的方法必须声明为返回以下两个接口之一：IEnumerable 或 IEnumerator

问题似乎与`yield`运算符和第二个函数的返回类型有关， `IOrderedEnumerable`.

如果将返回类型从 更改`IOrderedEnumerable`为`IEnumerable`，则第二次 Inspect() 调用将不再是错误。但是，该`ThenBy()`调用现在将引发错误。如果您暂时将其注释掉，它会编译，但您确实无法访问该`ThenBy()`方法。

```
var collection = Enumerable.Range(-5, 11)
    .Select(x => new { Original = x, Square = x * x })
    .Inspect()
    .OrderBy(x => x.Square)
    .Inspect()
    //.ThenBy(x => x.Original)
    ;
foreach (var element in collection)
{
    Console.WriteLine(element);
} 
```

...

```
public static IEnumerable<T> Inspect<T> (this IOrderedEnumerable<T> source)
{
    Console.WriteLine ("In Inspect (ordered)");
    foreach(T item in source){
        Console.WriteLine(item);
        yield return item;
    }
} 
```

# java - 如何在 eclipselink 中禁用缓存

> ID：12926319
> 
> 赞同：2
> 
> 时间：2012-10-17T02:42:50.203
> 
> 标签：java, caching, jpa-2.0, eclipselink

我已经尝试通过在 persistence.xml 中使用以下属性来禁用 EclipseLink 中的 L2 缓存和 Eclipse indigo：-

```
<property name="eclipselink.cache.shared.default" value="false"/>

<shared-cache-mode>NONE</shared-cache-mode> 
```

基本上我正在测试一个场景，无论是在两个不同的会话中创建的同一个对象两次访问数据库还是两个会话都引用在内存缓存中的早期会话中创建的同一个对象。这不应该是因为通过在 persistence.xml 中提及上述属性禁用了 L2 缓存

我的代码如下： -

```
 Session session = DataAccessManager.getManager().openSession();
 ReferenceObjectRepository referenceObjectRepository =     ReferenceObjectRepository.getInstance();
 ReferenceObjectKey referenceObjectKey = new ReferenceObjectKey(getStringValue("testCacheByPass.input"));
 //load object first time.
 ReferenceObject referenceObject = referenceObjectRepository.load(ReferenceObject.class, referenceObjectKey);
 logger.log(Level.SEVERE, "Cache ReferenceObject: " + referenceObject);

 //load object in another session
 Session sessionNew = DataAccessManager.getManager().openNewSession();
 Object dbObject = referenceObjectRepository.load(ReferenceObject.class,    referenceObjectKey);
 logger.log(Level.SEVERE, "DB loaded ReferenceObject: " + dbObject); 
```

请帮助我是否错过了什么？还是我需要以其他方式做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:33:35.247

在进行调用的每个函数中添加此行。在查阅视图时，我在查找功能中使用。

```
((JpaEntityManager)em.getDelegate()).getServerSession().getIdentityMapAccessor().invalidateAll(); 
```

此行在运行 de 查询之前清除缓存。

```
public Entity find(Object id) {
    ((JpaEntityManager)em.getDelegate()).getServerSession().getIdentityMapAccessor().invalidateAll();
    return em.find(Entity.class, id);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T05:23:42.777

您已禁用对象缓存，但我认为您仍然有查询缓存在使用。您应该也可以禁用查询缓存

```
<property name="eclipselink.query-results-cache" value="false"/>
<property name="eclipselink.refresh" value="true"/> 
```

同样的事情也可以用查询提示来设置。如果 persistence.xml 配置似乎不起作用，您也可以尝试使用查询提示。

另请注意，本质上，即使没有缓存，您也会比较同一个对象，因此除非它被分离，否则它*应该*是相同的。

相关问题：

*   [禁用 eclipselink 缓存和查询缓存 - 不起作用？](https://stackoverflow.com/questions/2921424/disable-eclipselink-caching-and-query-caching-not-working)
*   [在 JPA 中禁用缓存（eclipselink）](https://stackoverflow.com/questions/2809275/disable-caching-in-jpa-eclipselink)

# ruby-on-rails - rails - grouped_collection_select 与 3 个表

> ID：12926321
> 
> 赞同：2
> 
> 时间：2012-10-17T02:43:26.183
> 
> 标签：ruby-on-rails, select

grouped_collection_select 的 Rails 文档示例的设置与我需要的类似，但我想使用 2 个选择。第一个将列出大陆。然后，根据大陆选择，我想显示一个城市列表。

```
class Continent < ActiveRecord::Base
  has_many :countries
  # attribs: id, name
end
class Country < ActiveRecord::Base
  belongs_to :continent
  # attribs: id, name, continent_id
end
class City < ActiveRecord::Base
  belongs_to :country
  # attribs: id, name, country_id
end 
```

我知道第一个选择会写成：

```
<%= f.collection_select :continent_id, Continent.order(:name), :id, :name %> 
```

第二个给我带来了问题：

```
<%= f.grouped_collection_select :city_id, Continent.order(:name), :countries, :name, :id, :name %> 
```

对乡村餐桌的需求让我失望。有什么建议么？

# jquery - rails 3.2.8 的可搜索下拉列表？

> ID：12926330
> 
> 赞同：0
> 
> 时间：2012-10-17T02:45:35.497
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, simple-form

在新的订单表单上，用户需要从包含数十个客户的下拉列表中选择一个客户，并且通过上下滚动很难找到和选择。这就是为什么我们要构建一个可搜索的`drop down list`. 当用户输入客户姓名的几个字母时，下拉列表会过滤掉所有其他字母，只留下包含刚刚键入的字母的客户姓名。我们使用`simple_form`和`rails 3.2.8`。我们可以做的一种方法是添加一个`text box`用于输入搜索字符串并调用`ajax`以相应地加载下拉列表。这需要额外的文本字段，这是多余的。有没有用户可以直接在下拉框中输入并相应过滤掉列表的解决方案？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:54:36.053

看看 JQuery UI 自动完成组合框。它提供下拉功能以及搜索（自动完成）功能。它应该与 simple_form 一起工作得很好。

[http://jqueryui.com/autocomplete/#combobox](http://jqueryui.com/autocomplete/#combobox)

我发现的最佳实施示例是： [http ://babinho.net/2011/05/autocomplete-fields-in-rails-3-1-with-jquery-ui/](http://babinho.net/2011/05/autocomplete-fields-in-rails-3-1-with-jquery-ui/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T17:25:47.283

我在[https://github.com/seatgeek/soulmate](https://github.com/seatgeek/soulmate)找到的 Soulmate gem 上取得了相当大的成功。还有一篇写得很好的文章也描述了 gem： http: [//patshaughnessy.net/2011/11/23/finding-your-soulmate-autocomplete-with-redis-in-rails-3-1](http://patshaughnessy.net/2011/11/23/finding-your-soulmate-autocomplete-with-redis-in-rails-3-1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T17:36:27.833

如果您尚未在项目中使用（或不想使用）jQuery UI，您可以使用 select2：http: [//ivaynberg.github.com/select2/](http://ivaynberg.github.com/select2/)

# api - Eventbrite API - event_search - 寻找最佳匹配

> ID：12926340
> 
> 赞同：1
> 
> 时间：2012-10-17T02:46:36.587
> 
> 标签：api, events, search, eventbrite

我注意到对于某些关键字，Eventbrite 网站会显示相关事件，但 API 会返回很多不相关的事件。

一些例子是：“艺术”、“健康”、“拍卖”

网站上显示的结果都有关键字出现在事件的标题/名称中，但是只要关键字在标题和/或描述中，API 就会返回事件。

我的问题是：如何使用 API 只取回标题中出现关键字的事件？

我正在尝试获得最佳匹配事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:59:52.463

[event_search](http://developer.eventbrite.com/doc/events/event_search)当前对标题和描述字段进行全文搜索。

Eventbrite 目前正致力于将他们的[event_search接口连接到为其](http://developer.eventbrite.com/doc/events/event_search)[基于 Web 的目录服务提供](http://eventbrite.com/directory)支持的同一后端

我相信他们会在准备好后通过[@EventbriteAPI发布公告。](http://twitter.com/EventbriteAPI)

# math - 如何将平均法线的长度视为角度偏差的函数？

> ID：12926345
> 
> 赞同：0
> 
> 时间：2012-10-17T02:47:00.390
> 
> 标签：math, graphics, gaussian, deviation

最近我阅读了 NVidia 的[Mipmapping_Normal_Maps](http://developer.download.nvidia.com/whitepapers/2006/Mipmapping_Normal_Maps.pdf) ，它说我们可以使用未重新归一化的平均法线来计算平均法线和样本法线之间角度的标准偏差。第一步，它假设角度偏差的高斯分布并给出一个数字（对不起，我不能以新用户的身份发布图像，请参阅该论文中的图 2）。

那么我的问题是，平均法线的长度如何用角度的标准偏差函数表示（高斯分布的原始函数，图中的红色曲线）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:00:58.977

我相信你的问题的答案是论文中的等式（1）。它显示了平均法线如何等于 1 + sigma^2 的倒数。Sigma 是标准差。有时 sigma^2 被称为方差。

无论如何，如果您知道标准偏差，那就是方程式中 sigma 的值。平方它以获得方差，sigma^2。

# python - Python Image Shuffle Failure - 我哪里出错了？

> ID：12926349
> 
> 赞同：2
> 
> 时间：2012-10-17T02:47:15.073
> 
> 标签：python, numpy, python-imaging-library, random-sample

我试图打乱图像中的所有像素，而我对 Knuths shuffle（以及其他人的）的实现似乎失败了。似乎每行都在工作。我不知道为什么——就是看不到。

这是发生的事情：

![在此处输入图像描述](../Images/51b0e3a2c7e82ceffb08273219255787.png)![在此处输入图像描述](../Images/70222f21dacff325183b52408fe812cb.png)

这不是很混乱！好吧，它可能会更加混乱，而且需要更加混乱。

这是我的代码：

```
import Image
from numpy import *

file1 = "lhooq"
file2 = "kandinsky"

def shuffle(ary):
    a=len(ary)
    b=a-1
    for d in range(b,0,-1):
      e=random.randint(0,d)
      ary[d],ary[e]=ary[e],ary[d]
    return ary

for filename in [file1, file2]:
    fid = open(filename+".jpg", 'r')
    im = Image.open(fid)

    data = array(im)

    # turn into array
    shape = data.shape
    data = data.reshape((shape[0]*shape[1],shape[2]))

    # Knuth Shuffle
    data = shuffle(data)

    data = data.reshape(shape)
    imout = Image.fromarray(data)

    imout.show()

    fid.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:25:39.733

When`ary`是 2D 数组，`ary[d]`是该数组的*视图*，而不是内容的副本。

因此，`ary[d],ary[e]=ary[e],ary[d]`等价于赋值`ary[d] = ary[e]; ary[e] = ary[e]`，因为`ary[d]`在 RHS 上只是一个指向`d`第 th 元素的指针`ary`（而不是像素值的副本）。

为了解决这个问题，您可以使用*高级索引*：

```
ary[[d,e]] = ary[[e,d]] 
```

# php - PHP多维数组对象到Javascript Json

> ID：12926350
> 
> 赞同：3
> 
> 时间：2012-10-17T02:47:44.060
> 
> 标签：php, javascript, arrays, json, multidimensional-array

我有一个多维度数组作为 PHP 中的一个对象，并且喜欢用 Javascript 打印它。这是我已经达到的。

PHP：

```
$words = $wordlist->getWordlist($var1,$var2); 
```

现在我通常在 PHP 中打印这样的数组：

```
foreach ($words as $section => $items)
    foreach ($items as $key => $value)
        echo "$key\t = $value"; 
```

这就是我在 Javascript 中尝试做的事情：

```
var coders= <?php print json_encode($words); ?>;

for(var i = 0, l =coders.length; i < l; i++) {
    for(var j = 0, l2 = coders[i].length; j < l2; j++) {
        var value = coders[i][j];
        document.write(value);
    }
} 
```

这是我打印时的结果：

```
document.write(coders);
[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object] 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T03:04:44.860

如果你不介意使用 jquery，你可以使用这个：

```
var json_obj = $.parseJSON(data);
$.each(json_obj , function(k, v) {  
    $.each(v, function(k2, v2) {
        alert("key is " +k2);
        alert("value is " +v2);         
    });
}); 
```

你的 json 字符串在哪里`data`，就像你从 PHP 脚本`echo json_encode($nested_array)`ajax 调用中收到的一样

# php - JavaScript 弹出密码检查

> ID：12926351
> 
> 赞同：1
> 
> 时间：2012-10-17T02:47:45.417
> 
> 标签：php, javascript, html, jquery

我正在尝试为我的网站制作一个注册表单，它会要求用户输入一次密码，当他们单击提交时，会弹出一个 JavaScript 框并再次向用户询问，并与旧的进行检查，如果他们是不一样，它停留在加入页面上并告诉他们密码不匹配。我该怎么做呢？

这是我拥有的 HTML 文档：

```
<h2>New Account Registration.</h2>

            <table width="600" cellpadding="1" style="text-align:center;">
  <form action="join.php" method="get"  >
    <tr>
      <td colspan="1"><font color="#FF0000"></font></td>
    </tr>
    <tr>
      <td>Company Name:</td>
      </tr>
      <tr>
      <td><input style="background-color: #FFF;" name="companys_name" type="text" placeholder="Google" required /></td>
    </tr>
    <tr>
      <td>First Name:</td>
      </tr>
      <tr>
      <td ><input style="background-color: #FFF;" name="admin_first_name" type="text" placeholder="John" required /> 
        </td>
    </tr>
    <tr>
      <td>Last Name: </td>
      </tr>
      <tr>
      <td>
        <input style="background-color: #FFF;" name="admin_last_name" type="text" placeholder="Doe" required />
      </td>
    </tr>

    <tr>
      <td>Phone Number:</td>
      </tr>
      <tr>
      <td><input style="background-color: #FFF;" type="tel" name="admin_phone" pattern="[0-9]{3}-?[0-9]{3}-?[0-9]{4}" required placeholder="123-123-1231"></td>
    </tr>
    <tr>
      <td>Website: </td>
      </tr>
      <tr>
      <td><input style="background-color: #FFF;" type="url" id="orderWebsite" placeholder="http://domain.com"  /></td>
    </tr>

    <tr>
      <td>Email: </td>
      </tr>
      <tr>
      <td><input style="background-color: #FFF;" type="email" id="orderEmail" placeholder="name@domain.com" required /></td>
    </tr>
    <tr>
      <td> Password: </td>
      </tr>
      <tr>
      <td> <input style="background-color: #FFF;" name="admin_password" type="password" required /> 
      </td>
    </tr>   
    <tr>
      <td><input type="submit" name="Submit" value="Register!" onclick="register()" /></td>
    </tr>
  </form>
</table> 
```

这是它连接到的 PHP 页面：

```
<?php

$errorMsg = "";

// First we check to see if the form has been submitted 

if (isset($_POST['companys_name'])){

    //Connect to the database through our include 

    include_once "connect_to_mysql.php";

    // Filter the posted variables

    $companys_name = preg_replace("[^A-Za-z0-9]", "", $_POST['companys_name']); // filter everything but numbers and letters

    $admin_first_name = preg_replace("[^A-Za-z]", "", $_POST['admin_first_name']); // filter everything but letters

    $admin_phone = preg_replace("[^0-9]", "", $_POST['admin_phone']);// Filters everything except numbers

    $admin_email = preg_replace("[^A-Z a-z0-9]", "", $_POST['admin_email']); // filter everything but spaces, numbers, and letters

    $admin_url = preg_replace("[^A-Z a-z0-9]", "", $_POST['admin_url']); // filter everything but spaces, numbers, and letters

    $admin_last_name = preg_replace("[^A-Z a-z]", "", $_POST['admin_last_name']); // filter everything but spaces, numbers, and letters

    $admin_email = stripslashes($_POST['admin_email']);

    $admin_email = strip_tags($admin_email);

    $admin_email = mysql_real_escape_string($admin_email);

    $admin_password = preg_replace("[^A-Za-z0-9]", "", $_POST['admin_password']); // filter everything but numbers and letters

    // Check to see if the user filled all fields with

    // the "Required"(*) symbol next to them in the join form

    // and print out to them what they have forgotten to put in

    if((!$companys_name) || (!$admin_first_name) || (!$admin_phone) || (!$admin_last_name) || (!$admin_email) || (!$admin_password)){

        $errorMsg = "You did not submit the following required information!<br /><br />";

        if(!$companys_name){

            $errorMsg .= "--- Company Name";

        } else if(!$admin_first_name){ 

           $errorMsg .= "--- Phone Number 10 Digits"; 

        } else if(!$admin_phone){ 

           $errorMsg .= "--- Phone Number 10 Digits"; 

       } else if(!$admin_last_name){ 
           $errorMsg .= "--- Last Name"; 

       } else if(!$admin_email){ 

           $errorMsg .= "--- Email Address"; 

       } else if(!$admin_password){ 

           $errorMsg .= "--- Password"; 

       } 

    } else {

    // Database duplicate Fields Check

    $sql_companys_name_check = mysql_query("SELECT id FROM toc_companys WHERE companys_name='$companys_name' LIMIT 1");

    $sql_admin_email_check = mysql_query("SELECT id FROM toc_companys WHERE admin_email='$admin_email' LIMIT 1");

    $companys_name_check = mysql_num_rows($sql_companys_name_check);

    $admin_email_check = mysql_num_rows($sql_admin_email_check); 

    if ($companys_name_check > 0){ 

        $errorMsg = "<u>ERROR:</u><br />Your company name is already in use inside our system. Please try another.";

    } else if ($admin_email_check > 0){ 

        $errorMsg = "<u>ERROR:</u><br />Your Email address is already in use inside our system. Please try another.";

    } else {

        // Add MD5 Hash to the password variable

       //$hashedPass = md5($password); 

        // Add user info into the database table, claim your fields then values 

        $sql = mysql_query("INSERT INTO  toc_companys (companys_name, admin_first_name, admin_phone, admin_url, admin_last_name, admin_email, admin_password ) 

        VALUES('$companys_name', '$admin_first_name', '$admin_phone','$admin_url','$admin_last_name', '$admin_email','$admin_password', now())") or die (mysql_error());

        // Get the inserted ID here to use in the activation email

        $id = mysql_insert_id();

        // Create directory(folder) to hold each user files(pics, MP3s, etc.) 

        mkdir("memberFiles/$id", 0755); 

        // Start assembly of Email Member the activation link

        $to = "$admin_email";

        // Change this to your site admin email

        $from = "admin@5mutny.com";

        $subject = "Activate your account!";

        //Begin HTML Email Message where you need to change the activation URL inside

        $message = '<html>

        <body bgcolor="#FFFFFF">

        Hi ' . $admin_first_name . ' at ' . $companys_name . ',

        <br /><br />

        You must complete this step to activate your account with us.

        <br /><br />

        Please click here to activate now &gt;&gt;

        <a href="http://www.testsite.com/activation.php?id=' . $id . '">

        ACTIVATE NOW</a>

        <br /><br />

        Your Login Data is as follows: 

        <br /><br />

        E-mail Address: ' . $admin_email . ' <br />

        Password: ' . $admin_password . ' 

        <br /><br /> 

        Thanks! 

        </body>

        </html>';

        // end of message

        $headers = "From: $from\r\n";

        $headers .= "Content-type: text/html\r\n";

        $to = "$to";

        // Finally send the activation email to the member

        mail($to, $subject, $message, $headers);

        // Then print a message to the browser for the joiner 

        print "<br /><br /><br /><h4>OK $firstname, one last step to verify your email identity:</h4><br />

        We just sent an Activation link to: $admin_email<br /><br />

        <strong><font color=\"#990000\">Please check your email inbox in a moment</font></strong> to click on the Activation <br />

        Link inside the message. After email activation you can log in.";

        exit(); // Exit so the form and page does not display, just this success message

    } // Close else after database duplicate field value checks

  } // Close else after missing vars check

} //Close if $_POST

?> 
```

我的老师希望我这样做，所以当有人点击注册时，会弹出一个 JavaScript 框，要求用户重新输入他们的密码，以便它检查与输入框的密码，如果它们相同，它将创建他们的帐户，如果不是它不会离开页面，但它会告诉他们他们的密码不一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T03:05:31.093

Pseudocode via JQuery:

```
$('#submit').click(function(){
  $('#box').show();
});

$('#box > #confirm').click(function(){
  var firstInput = $('#firstInput').val();
  var secondInput = $('#secondInput').val();
  if(!firstInput.equal(secondInput)) {
    //do something if they are not the same
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T04:45:33.293

为您的表单设置 id，并添加一个框：

```
<form id="myform" action="join.php" method="get"  >
...
</form>
<div id="box" style="display: none; width: 100px; height: 100px; backgournd-color: #FFFFFF;">
  <input id="confirmPassword"/>
  <span id="info"></span>
  <button id="confirm">confirm</button>
</div 
```

在 .html 底部添加脚本

```
$('#myform').submit(function(){
  $('#box').show();
  return false; // cancel the submit action
});
$('confirm').click(function(){
  if($('input[value="admin_password"]').val().equal($('#confirmPassword').val())) {
    $('#myform').submit(); // to submit the form here
  } else {
    $('#info').text("passwords are not the same!").show().fadeOut(1000);
  }
}); 
```

# java - 从文本文件中读取会引发异常

> ID：12926363
> 
> 赞同：0
> 
> 时间：2012-10-17T02:49:33.107
> 
> 标签：java, eclipse, loading, save

所以我用过DataInputStream、FileInputStream、BufferInputStream、FileReader、BufferedReader、Scanner，随便你说。它们都抛出 FileNOtFoundException 或 CorruptedStreamException。

异常 java.io.FileNotFoundException: java.io.FileReader@253498.data (The system cannot find the file specified) 被抛出在 FileReader 使用文件名“Accounts.txt”初始化的行，这是一个文件我已经在 bin 中使用所需的文本进行了初始化。

```
import java.io.*;
import java.util.ArrayList;

/**
 * Class to load account files
 */
public class AccountLoader {

    /**
     * Add an account file
     * @param newAccount 
     */
    public static void addAcountFile(Account newAccount) {
        try {
            PrintWriter out = new PrintWriter(new File("Accounts.txt"));

            out.print(" " + newAccount.getOwner().getName());
            System.out.println("saved account " + newAccount.getOwner().getName());
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
    }

    public static ArrayList<Account> loadAccountsList() throws EOFException, IOException, ClassNotFoundException{
        ArrayList<Account> accounts = new ArrayList();

            FileReader load = new FileReader("Accounts.txt");

            String file = load.toString();

           String[] accountsload = file.split(" ");
           for (String string : accountsload){
               accounts.add(loadAccount(string + ".data"));
           }
           load.close();
           return accounts;

    }
    public static void save(Account account) {

        String filename = account.getOwner().getName() + ".data" ; 
            if (filename != null) {         
          try {
             FileOutputStream fos = new FileOutputStream(filename); 

            ObjectOutputStream out = new ObjectOutputStream(fos); 

            out.writeObject(account);    

            out.flush();                    
            out.close();                        
          }

          catch (IOException e) { System.out.println(e); }
        }

      }

     public static Account loadAccount(String filename) {   
           Account newAccount = null;
            if (filename != null) {           
              try {

                FileInputStream fis = new FileInputStream(filename); 

                ObjectInputStream in = new ObjectInputStream(fis);  

                newAccount = (Account)in.readObject();
                in.close();                                     
              }

              catch (Exception e) { System.out.println(e); }
            }
            return newAccount;
          }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:58:07.310

您可能需要将文本文件放在“项目根”文件夹（包含`src`and的文件夹`bin`）中，而不是`bin`文件夹中。如果您从 Eclipse 运行它，那肯定是您需要做的，因为从 Eclipse 运行的 Java 项目的上下文始终是该项目的 Eclipse 项目文件夹。

当您要求 Java 按名称打开文件而不提供路径时，JVM 将在其当前工作目录中查找该文件。当前工作目录会根据您运行程序的方式而变化，在您的情况下，“bin”文件夹看起来不是您当前的工作目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T02:52:24.493

尝试将文本文件移动到其他文件夹。bin 文件夹中的一个文件夹可能是正确的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T03:19:45.123

如果您使用的是命令行，请将文件放在运行 java 命令的文件夹中，并`.`在 CLASSPATH 中添加为

```
 set CLASSPATH=%CLASSPATH%;. 
```

然后运行你的java程序。

如果您使用的是 eclipse，请尝试将文件放在项目的根文件夹中或使用相对于根文件夹的相对路径。

# entity-framework - EF4 Code First 预生成视图在其他机器中具有不同的哈希值

> ID：12926365
> 
> 赞同：4
> 
> 时间：2012-10-17T02:49:46.037
> 
> 标签：entity-framework, ef-code-first, t4

[我使用此T4 模板](http://visualstudiogallery.msdn.microsoft.com/ae7730ce-ddab-470f-8456-1b313cd2c44d)为 EF4 Code First 预先生成的视图在构建服务器中不起作用。我没有在构建服务器中重新生成视图，只是编译并运行 MSTest。运行测试时抛出错误：

> System.Data.MappingException：EntityContainer 'DB' 的映射和元数​​据信息不再匹配用于创建预生成视图的信息

我在另一台机器上运行相同的模板，哈希值不同。我想这就是它在构建服务器中不起作用的原因。其他机器运行时哈希值不同，因此验证失败并抛出异常。

我在用着：

*   VS 2010 专业版
*   .Net 框架 v4.0.30319
*   实体框架 v4.2（代码优先）
*   [适用于 C# (v1.0.1) 的 EF CodeFirst 视图生成 T4 模板](http://visualstudiogallery.msdn.microsoft.com/ae7730ce-ddab-470f-8456-1b313cd2c44d)- 稍微修改了 GetEdmxSchemaVersion 以为我的设置返回正确的 EntityFrameworkVersions 版本。
*   使用类库项目模板

我正在运行的测试连接到使用代码签入的 SQL DB 文件。

我已经检查了构建服务器及其使用相同的 EF dll 版本和 .Net Framework 版本。

知道为什么哈希值不同吗？

**更新：** 我使用*EdmxWriter.WriteEdmx()*从两台开发机器生成并比较了两个 XML 文件。

这是架构版本（两台机器都相同）：

```
<?xml version="1.0" encoding="utf-8"?>
<Edmx Version="2.0" xmlns="http://schemas.microsoft.com/ado/2008/10/edmx"> 
```

明显的区别是 XML 文件中某些节点的顺序。这是一个例子：

机器1：

```
<EntityType Name="PersonEntity" BaseType="Self.Entity" />
<EntityType Name="CompanyEntity" BaseType="Self.Entity" /> 
```

机器2：

```
<EntityType Name="CompanyEntity" BaseType="Self.Entity" />
<EntityType Name="PersonEntity" BaseType="Self.Entity" /> 
```

知道为什么它们的顺序不同吗？

**更新 2：** 来自构建服务器的 Edmx (xml) 对于其他 2 台开发机器也不同。同样，一些节点的顺序是不同的。

机器 1 和构建服务器在 %windir%\Microsoft.NET\assembly\GAC_MSIL\System.Data.Entity\v4.0_4 中都有 System.Data.Entity.dll （相同的文件和产品版本 -- *v4.0.30319.1* ） .0.0.0__b77a5c561934e089。

**更新 3：** 我还查看了 System.Data.Entity.Design.dll 的版本。T4 模板引用此程序集。机器 1 有此 dll 的两个副本...在 GAC (v4.0.30319.233) 和 C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0 (v4.0.30319.1) . 在构建服务器和机器 2 中也是如此。我想知道运行时期间的哈希验证函数是否正在使用这个 dll，因为它在我的项目中没有被引用。如果是，则使用哪个版本。但是话又说回来，哈希验证在机器 1 中是成功的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:26:27.517

我在回答我自己的问题。以下是我们解决主要问题的方法（如何在 EF Code First 中预先生成可在不同机器上使用的视图）。我现在正在使用 .Net 运行时 4.0.30319.17929。

1.  在MyContext.cs所在的ABC.csproject中，删除T4模板和MyContext.Views.cs。

2.  编译 ABC.cs 项目

3.  创建一个将生成视图的控制台应用程序。我复制了大部分 Pawel 的 T4 模板。引用 ABC.dll（和其他必需的 dll）。这是其中一项更改：

    var edmx = GetEdmx(typeof(MyContext));

4.  将 GenerateViews() 的字符串输出保存到文本文件中。

5.  运行控制台应用程序。

6.  将名为 MyContext.Views.cs 的新文件添加到 ABC.csproject 并将文本文件的内容复制到此类。
7.  重新编译 ABC.csproject

我发现我的解决方案很疯狂，必须简化或自动化，但它确实有效。

# django - 重用来自另一个 Django 应用程序模型的对象

> ID：12926368
> 
> 赞同：1
> 
> 时间：2012-10-17T02:49:51.327
> 
> 标签：django, django-models

我对 python 比较陌生，对编写“网络应用程序”也比较陌生，但对这个行业并不陌生。

我正在Mezzanine 中构建一个站点，这是一个Django 项目。我想为“投资组合”构建一个内容类型，它将为每个画廊内容类型提取一个图像。

我的问题是（请记住，根据我不能将 GalleryImage 类型子类化的文档）：

*   我应该将对象和特定属性复制到我的模型吗？
*   有更好的方法吗？

这是数据模型： http: [//mezzanine.jupo.org/docs/_images/graph.png](http://mezzanine.jupo.org/docs/_images/graph.png)

这是关于自定义内容类型的文档：http: [//mezzanine.jupo.org/docs/content-architecture.html#the-page-model](http://mezzanine.jupo.org/docs/content-architecture.html#the-page-model)

# 编辑

我想进一步澄清我正在尝试做的事情。

我想要这个“内容类型”做的是从每个“画廊”创建一个缩略图，这个“画廊”是这个“内容类型”的孩子。将每个缩略图显示为每个画廊的链接。

例子：

作品集页面 - 显示“风景摄影”和“城市生活摄影”中的单张照片 | |----风景摄影（7张）|----城市生活摄影（7张）|----等

也许我在问一个愚蠢的问题。

我应该将文件路径从“画廊”模型复制到我的“组合”模型吗？

# vb.net - 如何从数据库中获取日期并将其加载到 VB Windows 窗体中的自定义 DataGridView 列中

> ID：12926369
> 
> 赞同：1
> 
> 时间：2012-10-17T02:49:57.990
> 
> 标签：vb.net, winforms, datagridview

我是 VB.NET WindowsForm 的初学者，我正在使用 Visual Studio 2010 并且需要有关 DGV 上 DateTimePicker 的几个问题的帮助，我已经设法使用 http://msdn.microsoft.com 在数据绑定 DGV 上创建了 DatetimePickerColumn (DTPColumn) /en-us/library/7tas5c80.aspx，我的第一个问题是如何将日期从我的数据库加载到添加到 dgv 中的 DTPcolumn 而不用 DTPCell 替换原始日期？谢谢，麻烦您了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:45:38.227

这可能不是最好的方法，但至少它有效。设置数据源后，您可以执行以下操作：

```
For i As Integer = 0 To DataGridView1.Rows.Count - 1
      Dim gridComboBox As New CalendarCell
      DGV.Item(<Date column index>, i) = gridComboBox
Next 
```

这会将您拥有日期的列重写为日历单元格。但是，如果带有日期的列实际上不是日期，这将引发错误。当然是要改成合适的索引。有了这个，就不需要手动创建的列。

# html - 单击链接时防止页面转到顶部

> ID：12926371
> 
> 赞同：4
> 
> 时间：2012-10-17T02:50:49.847
> 
> 标签：html

如何防止每次单击链接时页面“跳起来”？例如，我在页面中间某处有一个链接，当我单击它时，页面会跳到顶部。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T02:58:03.727

是锚`href="#"`？您可以将其设置为`href="javascript:void(0);"`。

如果您要阻止默认设置，请改用这个：

`event.preventDefault ? event.preventDefault() : event.returnValue = false;`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T02:58:27.987

假设这是您的链接 HTML：

```
<a href="#something" id="some_id">Some link goes somewhere...</a> 
```

如果您使用的是[jQuery](http://jquery.com/)，请尝试这样：

```
$(document).ready(function() {
    $('a#some_id').click(function(e) {
        e.preventDefault();
        return false;
    });
}); 
```

> **演示：http: [//jsfiddle.net/V7thw/](http://jsfiddle.net/V7thw/)**

如果您不使用 jQuery 药物，请尝试使用这个纯[DOM JavaScript](http://www.w3schools.com/jsref/default.asp)：

```
window.onload = function() {
    if(document.readyState === 'complete') {
        document.getElementById('some_id').onclick = function(e) {
            e.preventDefault();
            return false;
        };
    }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T02:52:43.307

`href`如果您将链接属性设置为，它将跳转到顶部，`#`因为它正在寻找锚标记。只需离开该`href`属性，它就不会去任何地方，但它看起来也不再像一个链接（并确保`click`在 javascript 中处理偶数，否则它真的没有多大用处）。

另一个选项是在 javascript 和事件处理程序中处理单击，取消默认操作并返回 false。

```
 e.preventDefault();
   return false; 
```

# javascript - Javascript构造函数

> ID：12926373
> 
> 赞同：1
> 
> 时间：2012-10-17T02:51:09.967
> 
> 标签：javascript, prototype

尝试分别执行以下两个代码块时：第一个：

```
function Hallo() {

}
var some_obj = {
    name: "Fred",
    age: 23,
}
Hallo.prototype = some_obj;
var obj = new Hallo();
obj.constructor; 
```

第二个：

```
 function Hallo() {

    }
    Hallo.prototype.name = 'Khanh';
    Hallo.prototype.age = 23;
    var obj = new Hallo();
    obj.constructor; 
```

我在萤火虫的控制台中得到的结果是第一个是“Object{}”，第二个是“Hallo()”。虽然第二个很容易理解，但第一个真的很奇怪。因为据我所知，第一个 obj 对象的构造函数仍然相同（即 Hallo() 函数）。但是我得到了 Object() 函数。我真的不明白为什么。你能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T03:05:46.577

***原因是：***

当你这样做`var obj = new Hallo();`时

```
console.log(obj.constructor === Hallo.prototype.constructor); // true 
```

在您的第一个示例中，您分配`Hallo.prototype`了一个新对象，其`constructor`为函数`Object`( `function Object(){...}`)。

在您的第二个示例中，`Hallo.prototype.constructor`仍然是`function Hallo() {...}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T03:04:46.703

默认情况下prototype会得到一个指向构造函数的引用，在第一个函数中你将原型覆盖为some_obj，构造函数引用同时改变为some_obj的构造函数引用--Object的构造函数Object()

# python - 如何通过 Python 计算 Linux 上具有特定标题的窗口数量？

> ID：12926374
> 
> 赞同：3
> 
> 时间：2012-10-17T02:51:17.857
> 
> 标签：python, linux, x11

这是我的解决方案，但我认为这不是一个好的解决方案。任何人都可以建议我新的解决方案，我想枚举窗口，并通过仅使用 python 的核心库而不是 wnck 或 pygtk 来比较 Title 属性...

```
def linux_CountWindowsByTitle(title):
    import commands
    XWinInfoOutput = commands.getoutput("xwininfo -all -root")
    resArray = XWinInfoOutput.split("\n")
    resRange = len(resArray) - 1
    res = 0
    #Parse each line of output
    for i in range(0, resRange):
        index = resArray[i].find("\"")   #Get index of Double quote
        if (index < 0):
            continue    #This line does not have title we need

        tmp = resArray[i].split("\": (")[0] #Remove tail
        windowName = tmp.split("\"",1)[1]   #Remove head
        if (UTILITY.Compare(title, windowName)):
            #LIBRARY.Report(windowName)
            res += 1

    return res 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T03:32:23.857

您可以使用该模块`wnck`。

```
import wnck

screen = wnck.screen_get_default()
window_list = wnck.Screen.get_windows(screen)

window_names = [ w.get_name() for w in window_list ] 
```

为了计算相似的窗口，您可以创建一个字典：

```
count = window_names.count
wcounts = { item: item.count(item) for item in set(window_names) } 
```

字典将窗口标题作为键，值将是相同名称的重复次数。

略有不同，但您可能会觉得有趣的是：

```
wdict = { w.get_name(): w for w in window_list }
wdict.has_key(title) 
```

如果您以后需要该窗口进行其他处理，您仍然可以在`wdict`. 例如，您可以检查属性、最大化属性、最小化属性以及窗口管理器会执行的所有典型操作。

**注意**：对于`wnck`(>=3.0) 的较新版本，您必须使用 PyGObject (GObject Introspection)，但您明白了。

# php - 我如何在php中的txt中隐藏字符串中的一些单词

> ID：12926376
> 
> 赞同：2
> 
> 时间：2012-10-17T02:51:19.253
> 
> 标签：php, text, show-hide, words

我是 php 新手，并且有以下代码来显示我网站中 .txt 文件中的字符串：

```
<?php
$file = "file.txt";
$f = fopen($file, "r");
while ( $line = fgets($f, 1000) ) {
    print $line;
}
?> 
```

我想知道如何选择一些要隐藏的单词。就我而言，我想隐藏行中的数字 (01,02,03,04,05,1,2,3,4,5)。我还想将整行替换为另一行，以防它以某个单词开头。例如，如果该行以单词“example”开头，则替换整行并仅显示单词“hello world”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T03:07:18.723

要删除数字：

```
$str = preg_replace("/\d/", "", "This 1 is 01 2 a 2 test 4 45 aaa");
echo $str; 
```

**输出：**
这是一个测试 aaa

[*指向 fiddler 的链接*](http://codepad.org/xmFIaw8u)

* * *

用“hello world”替换整行（仅当它以“example”开头时）：

```
$str =  "example This 1 is 01 2 a 2 test 4 45 aaa";
echo preg_replace("/^example.*/", "hello world", $str); 
```

**输出：**

你好世界

[*链接到提琴手*](http://codepad.org/OtUmT0tz)

* * *

将两者结合在一起将为我们提供：

```
 $file = "file.txt";
   $f = fopen($file, "r");
   while ( $line = fgets($f, 1000) ) {
      $line = preg_replace("/^example.*/", "hello world", $line);
      $line = preg_replace("/\d/", "", $line);
     print $line;

   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T03:10:55.887

```
<?php
   $hideStartWith = "example";
   $replaceWith = "hello world";
   $hideText = array("01","02","03","04","05","1","2","3","4","5");

   $file = "file.txt";
   $f = fopen($file, "r");
   while ( $line = fgets($f, 1000) ) {
      if(substr($line, 0, strlen($hideStartWith)) === $hideStartWith){
         $line = $replaceWith;  //print "hello world" if the line starts with "example"
     } else {
         foreach($hideText as $h)
             $line = str_replace($h, "", $line); //filtering the numbers
     }

     print $line;

   }
?> 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T03:02:51.040

对于整行替换​​，请尝试：

```
if (stripos($my_line, "example")===0){
     $my_line = "example";
} 
```

[http://php.net/manual/en/function.str-replace.php](http://php.net/manual/en/function.str-replace.php)

# java - 如何配置弹性搜索

> ID：12926377
> 
> 赞同：1
> 
> 时间：2012-10-17T02:51:20.830
> 
> 标签：java, distributed, elasticsearch

我们正在使用负载均衡器的两台服务器上运行弹性搜索，我只想知道什么是最好的服务器配置，我可以在该服务器上以最少的问题工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:04:05.887

很难说，但如果你的预算没有限制，我会说：

*   您可以拥有的 RAM 越多（比如说 128 Gb）
*   最快的硬盘 (SSD)

这取决于您的文档。您将拥有多少个文档？你要运行什么样的查询（你要使用构面，排序）？

一条评论：你为什么认为你需要一个负载均衡器？

# php - 创建最近查看列表、MySQL 或 Redis

> ID：12926380
> 
> 赞同：5
> 
> 时间：2012-10-17T02:51:36.007
> 
> 标签：php, mysql, memcached, redis

我有一个用户浏览搜索结果的网站。记住用户查看了哪些结果并将它们标记为 将很有用`Viewed`。

**问题：**要实现这样的`Recently Viewed`列表功能，推荐的方法是什么？

1.  使用像 MySQL 这样的 RDBMS。每次用户单击链接时，都会向服务器发出 AJAX 调用，以将新行插入到包含、、、`views`列的表中。在显示任何搜索结果之前，将根据表格检查每个项目，以确定该列表是否将标记为。 *（如果这有帮助，我的 PHP 框架 Laravel 可以使用数据库或 redis 作为会话驱动程序，而不是使用 cookie）*`id``user_id``item_id``timestamp``id``views``viewed`

**   使用像 Redis 这样的内存数据存储。我对redis/memcached没有经验，想到用这个的原因是因为对`viewed`表的写入量很大，而读取主要是通过主键选择的（Redis中有索引的概念吗？）* 

 *感谢您的任何建议和意见，尤其是那些对这两种技术有经验的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:44:49.107

在您提到的技术之间进行选择时没有经验法则，至少在没有更全面的上下文（例如服务器负载、访问量、数据量、数据库写入与读取比率等）的情况下，因为没有它们比另一个“更好”，它们只是不同的工具。

**除非您指望拥有数以万计的并发**（即同时访问站点，同时访问该站点）用户，否则每个页面视图一个 MySQL`INSERT`不太可能对性能造成哪怕是最轻微的影响。我建议：专注于 MySQL，因为这似乎是你最了解的，因为你会更快地移动，并且更早地完成你正在做的任何事情。如果它真的最终成为瓶颈，您以后总是可以切换到不同的方法。

 **话虽这么说：如果您喜欢冒险并且时间不是问题：

*   redis 将非常适合您尝试做的事情。基本上，每个用户都有一个排序集，其中包含以时间戳作为分数的 itemid。这很容易检索（在用户 id 之后命名每个键，例如 user:$userid:recentviews），易于分页（ZREVRANGE 将为您提供最近的 x 视图）并且易于过期（ZREMRANGEBYRANK 范围在 0 到 a例如，现在 30 天的时间戳以删除所有早于 30 天的条目），并且与其 MySQL 对应部分相比应该具有相对的内存效率。如果现在这一切听起来像胡言乱语，请不要担心，一旦您学习了 redis，这一切实际上都非常直观。

*   Memcached 被严格设计为缓存而不是数据存储，因此它的数据类型有点不灵活（您很可能必须存储 json 字符串并随时解析/字符串化它们，这有增加的不便是无法部分编辑列表而不首先完全检索它）并且与redis相反，它不会将数据持久化到磁盘，因此我个人不建议将它用于您最近的视图系统。如果您最近的视图数据不稳定且很小，它可能适合，但我认为 memcached 无论如何都不会比 redis 快得多。

如果你有时间，我建议你搜索和阅读更多关于 redis 和 memcached 的内容，直到你对它们是什么以及如何使用它们有一个很好的了解；只有这样，您才能做出明智的决定。但正如我之前提到的，请记住，除非您的需求非常特殊，否则 MySQL 可能会很好地完成这项工作，而不会出现性能问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:16:19.107

我有类似的东西，但它应该适用于你想要得到的东西。您不能通过在每个页面中包含一个文件来存储他们访问的页面。如果您有一个 session.php 文件或包含在每个页面上的类似文件，您可以将以下代码放入其中

```
$insert = mysql_query("INSERT INTO views VALUES
('$user_id','$itemid','$timestamp')"); 
```

（id 应该在数据库中自动递增）

这将插入页面及其当前所在的 id。您将需要在该页面中定义页面 ID。对我来说这很容易，因为我使用类似`profile.php?id=1`. 然后在哪里显示搜索结果..

```
$checkid = mysql_query("SELECT * FROM views WHERE user_id='$userid' & itemid='$itemid');
$views = mysql_num_rows($checkid);

if($views > 1){
$viewed = "false";
}else{
$viewed = "true";
} 
```

然后在您的页面上显示结果，您可能会有类似 if($viewed = "true"){ echo "You have seen this page $views time(s)"; }elseif($viewed = "false"){ echo "你还没有浏览过这个页面"; }

如果你遇到一些没有意义的事情告诉我，我的睡眠时间不多了！哈哈（而且我并不是一个 PHP 高手）***

# c++ - C++ 中的意外异常（空白处异常）

> ID：12926387
> 
> 赞同：-1
> 
> 时间：2012-10-17T02:52:20.623
> 
> 标签：c++, c++11

C++ 异常可以“突然出现”吗？不是字面意思。当 C++ 运行时可以从不是函数显式调用的地方抛出异常时，有人知道不明显的特殊情况吗？

平台特定的经验和偏离标准的实现信息也很有趣。

**请不要发布有关以下内容的答案：**

1.  隐藏函数调用的宏处理器技巧；
2.  默认构造函数；
3.  析构函数；
4.  重载运算符；
5.  重载转换；
6.  未重载的运算符`new`和`new[]`;

MSVC 提供了一个选项，允许将硬件异常（GPF、被零除等）作为 C++ 异常处理。任何人都可以评论如何在其他平台上处理这个问题，或者也许有人知道标准中的一个正确位置来讨论这个问题吗？

对于否决这个问题的人：请有勇气说出这里出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T03:27:49.573

不，不，没有，它只是一个 MSVC 选项。只有 Windows 将硬件错误视为异常，并且这些结构化异常只有在您要求时才会转换为 C++ 异常。其他平台使用信号。

例外不是凭空出现的。当您或标准库中定义明确的位置（以及像`dynamic_cast`. C++ 运行时不会把它们扔掉。如果你有一个未知来源的异常，那就找一个更好的调试器并学习如何使用它，直到它没有未知来源。

# android - eclipse中的android应用测试；ini文件的位置

> ID：12926390
> 
> 赞同：2
> 
> 时间：2012-10-17T02:52:34.430
> 
> 标签：android, eclipse, directory, ini

当尝试在虚拟 android 上运行 eclipse 中的 hello world html 站点测试时，我收到一条奇怪的恐慌错误消息，它找不到该虚拟 android 的相关 ini 文件。

我发现这样的文件存在于 Documents.android\avd 文件夹中。

问题是eclipse在一个似乎无法创建的文件夹中搜索：

C:\Documents and Settings\user.android/avd/

我想创建这样一个文件夹并将ini文件移到那里，但是windows不允许我创建一个名为“.android”的文件夹。我能做什么？eclipse 是否有设置这些 ini 文件的位置？

# python - 通过 scipy.integrate.ode 使用自适应步长

> ID：12926393
> 
> 赞同：26
> 
> 时间：2012-10-17T02:52:46.250
> 
> 标签：python, scipy, ode

的（简要）文档`scipy.integrate.ode`说两种方法（`dopri5`和`dop853`）具有步长控制和密集输出。查看示例和代码本身，我只能看到一种从集成器获取输出的非常简单的方法。即，看起来您只是将积分器向前推进某个固定的 dt，获取当时的函数值，然后重复。

我的问题有相当多变的时间尺度，所以我想在需要评估的任何时间步骤获取值以达到所需的容差。也就是说，在早期，事情正在缓慢变化，因此输出时间步长可能很大。但随着事情变得有趣，输出时间步长必须更小。我实际上并不想要等间隔的密集输出，我只想要自适应函数使用的时间步长。

# 编辑：密集输出

一个相关的概念（几乎相反）是“密集输出”，其中所采取的步数与步进器一样大，但函数的值被插值（通常精度与步进器的精度相当）到任何你要。fortran 底层`scipy.integrate.ode`显然能够做到这一点，但`ode`没有接口。 `odeint`另一方面，它基于不同的代码，并且显然会进行密集输出。（您可以在每次调用右侧时输出以查看何时发生，并查看它与输出时间无关。）

所以我仍然可以利用适应性，只要我可以提前决定我想要的输出时间步长。不幸的是，对于我最喜欢的系统，我什至不知道作为时间函数的大致时间尺度是什么，直到我运行集成。因此，我必须将采取积分器步骤的想法与密集输出的概念结合起来。

# 编辑2：再次密集输出

显然，scipy 1.0.0 通过一个新接口引入了对密集输出的支持。特别是，他们建议远离`scipy.integrate.odeint`和接近[`scipy.integrate.solve_ivp`](https://docs.scipy.org/doc/scipy/reference/generated/scipy.integrate.solve_ivp.html)作为关键字的`dense_output`。如果设置为`True`，则返回的对象具有一个属性`sol`，您可以使用时间数组调用该属性，然后返回这些时间的集成函数值。这仍然不能解决这个问题的问题，但在许多情况下它很有用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-01-25T17:42:40.637

从[SciPy 0.13.0 开始](http://scipy.github.io/devdocs/release.0.13.0.html)，

> `dopri`现在可以通过`solout`回调函数访问 ODE 求解器系列的中间结果。

```
import numpy as np
from scipy.integrate import ode
import matplotlib.pyplot as plt

def logistic(t, y, r):
    return r * y * (1.0 - y)

r = .01
t0 = 0
y0 = 1e-5
t1 = 5000.0

backend = 'dopri5'
# backend = 'dop853'
solver = ode(logistic).set_integrator(backend)

sol = []
def solout(t, y):
    sol.append([t, *y])
solver.set_solout(solout)
solver.set_initial_value(y0, t0).set_f_params(r)
solver.integrate(t1)

sol = np.array(sol)

plt.plot(sol[:,0], sol[:,1], 'b.-')
plt.show() 
```

结果： [![使用 DOPRI5 求解的逻辑函数](../Images/0b1ff7d2e4430b90500e5b1e11b91f4f.png)](https://i.stack.imgur.com/X3eTb.png)

结果似乎与 Tim D 的略有不同，尽管他们都使用相同的后端。我怀疑这与`dopri5`. 在 Tim 的方法中，我认为第七阶段的结果 k7 被丢弃，因此重新计算 k1。

注意：[如果在设置初始值之后设置 set_solout ，则存在一个已知错误](https://stackoverflow.com/questions/26738676/does-scipy-integrate-ode-set-solout-work)。[自SciPy 0.17.0](http://scipy.github.io/devdocs/release.0.17.0.html)起已修复。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-22T22:01:50.330

我一直在看这个试图得到相同的结果。事实证明，您可以通过在 ode 实例化中设置 nsteps=1 来使用 hack 来获得逐步结果。它将在每一步生成一个 UserWarning（这可以被捕获和抑制）。

```
import numpy as np
from scipy.integrate import ode
import matplotlib.pyplot as plt
import warnings

def logistic(t, y, r):
    return r * y * (1.0 - y)

r = .01
t0 = 0
y0 = 1e-5
t1 = 5000.0

#backend = 'vode'
backend = 'dopri5'
#backend = 'dop853'

solver = ode(logistic).set_integrator(backend, nsteps=1)
solver.set_initial_value(y0, t0).set_f_params(r)
# suppress Fortran-printed warning
solver._integrator.iwork[2] = -1

sol = []
warnings.filterwarnings("ignore", category=UserWarning)
while solver.t < t1:
    solver.integrate(t1, step=True)
    sol.append([solver.t, solver.y])
warnings.resetwarnings()
sol = np.array(sol)

plt.plot(sol[:,0], sol[:,1], 'b.-')
plt.show() 
```

结果： ![](../Images/f9612a2770d0392b85d2cb3a793a2ba3.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-17T13:36:31.257

该`integrate`方法接受一个布尔参数，该参数`step`告诉该方法返回单个内部步骤。但是，“dopri5”和“dop853”求解器似乎不支持它。

以下代码显示了在使用“vode”求解器时如何获取求解器所采取的内部步骤：

```
import numpy as np
from scipy.integrate import ode
import matplotlib.pyplot as plt

def logistic(t, y, r):
    return r * y * (1.0 - y)

r = .01

t0 = 0
y0 = 1e-5
t1 = 5000.0

backend = 'vode'
#backend = 'dopri5'
#backend = 'dop853'
solver = ode(logistic).set_integrator(backend)
solver.set_initial_value(y0, t0).set_f_params(r)

sol = []
while solver.successful() and solver.t < t1:
    solver.integrate(t1, step=True)
    sol.append([solver.t, solver.y])

sol = np.array(sol)

plt.plot(sol[:,0], sol[:,1], 'b.-')
plt.show() 
```

结果： ![解的情节](../Images/3c21233350a4f729c9bd848a8974c6fb.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-04T01:54:21.800

仅供参考，虽然答案已经被接受，但我应该指出历史记录，[PyDSTool 原生](http://pydstool.sf.net)支持从计算轨迹的*任何地方*进行密集输出和任意采样。这还包括求解器内部使用的所有自适应确定的时间步长的记录。这与[dopri853 和 radau5](http://www.ni.gsu.edu/~rclewley/PyDSTool/Generators.html)接口，并自动生成与它们接口所需的 C 代码，而不是依赖（慢得多）python 函数回调来进行右侧定义。据我所知，任何其他以 python 为中心的求解器都没有原生或有效地提供这些功能。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-12-01T17:10:49.800

这是另一个也应该与`dopri5`and一起使用的选项`dop853`。基本上，求解器将`logistic()`根据需要经常调用该函数来计算中间值，以便我们存储结果：

```
import numpy as np
from scipy.integrate import ode
import matplotlib.pyplot as plt

sol = []
def logistic(t, y, r):
    sol.append([t, y])
    return r * y * (1.0 - y)

r = .01

t0 = 0
y0 = 1e-5
t1 = 5000.0
# Maximum number of steps that the integrator is allowed 
# to do along the whole interval [t0, t1].
N = 10000

#backend = 'vode'
backend = 'dopri5'
#backend = 'dop853'
solver = ode(logistic).set_integrator(backend, nsteps=N)
solver.set_initial_value(y0, t0).set_f_params(r)

# Single call to solver.integrate()
solver.integrate(t1)
sol = np.array(sol)

plt.plot(sol[:,0], sol[:,1], 'b.-')
plt.show() 
```

# operating-system - 为什么有扇区时需要块，为什么块大小是扇区大小的倍数？

> ID：12926396
> 
> 赞同：2
> 
> 时间：2012-10-17T02:53:32.060
> 
> 标签：operating-system, block, disk, sector

在阅读磁盘结构时，我发现块大小是扇区大小的倍数。第一个想法是为什么当你有扇区时你甚至需要块，其次为什么块大小是扇区的倍数，比如 1、2、4？

为什么不能是扇区的一半？这里的理由是什么？这不是为了家庭作业。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:02:17.147

块是文件系统的抽象。所有文件系统操作只能在多个块中访问。换句话说，文件系统的最小逻辑可寻址单元是块，而不是扇区。

块设备上最小的可寻址单元是扇区。扇区大小是块设备的物理属性，是所有块设备的基本单位。

大多数块设备都有 512 字节的扇区（尽管其他大小也很常见。例如，一些 CD-ROM 光盘有 2 KB 的扇区），而块大小通常为 512 字节、1 KB 或 4 KB。这就是块大小是扇区的倍数的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T02:59:53.990

在计算行业的早期，术语“块”被松散地用来指代一小块数据。后来，数据区域的术语被扇区取代，块与不同类型的数据流以各种大小传递的数据包相关联。

在这里阅读更多：[http ://en.wikipedia.org/wiki/Disk_sector](http://en.wikipedia.org/wiki/Disk_sector)

# eclipse - “无法在 JNDI 中找到 SessionFactory”在 Eclipse Juno 下的 Jetty 中使用 Hibernate

> ID：12926398
> 
> 赞同：3
> 
> 时间：2012-10-17T02:53:55.270
> 
> 标签：eclipse, hibernate, gwt, ubuntu-12.04

我花了几天时间了解这个问题，但我还没有想出解决方案。以下是有类似问题的帖子： [Similar Post 1](https://stackoverflow.com/questions/7714899/jetty-data-source-hibernate-datasource-not-found)，[Similar Post 2](https://stackoverflow.com/questions/1620612/problems-using-eclipse-hibernate-plugin-could-not-locate-sessionfactory-in-jnd)，[Similar Post 3](https://stackoverflow.com/questions/8818198/hibernate-sessionfactory-as-a-global-jndi-resource)。我在那里尝试了一些部分解决方案，但没有解决问题。

## 问题

我正在开发一个 Google Web 应用程序并使用 Hibernate 作为持久层来连接到 Postgresql 数据库。我使用 GWT Eclipse 插件附带的内置 Jetty 服务器在开发模式下运行它。在配置 Jetty 服务器方面，我从这篇[文章中获得了一些帮助。](https://stackoverflow.com/questions/5454421/gwt-jetty-jndi-lookup-fails)

我已经使用 Hibernate Tools 进行逆向工程并导出以下内容：

*   域代码 (.java)
*   休眠 XML 映射 (.hbm.xml)
*   DAO 代码 (.java)
*   休眠 XML 配置

这些都已导出到 src 文件夹，并且我已经使用 Hibernate Tool 验证了配置至少能够提取模式信息。

现在问题出现在 Jetty 服务器开始运行之后。一旦您访问与应用程序关联的站点，它就会在 Eclipse 的调试控制台中报告以下错误：

```
 com.site.application.<reverse engineered DAO> getSessionFactory
    SEVERE: Could not locate SessionFactory in JNDI
    javax.naming.NameNotFoundException; remaining name 'SessionFactory'
        at org.mortbay.naming.NamingContext.lookup(NamingContext.java:578)
        at org.mortbay.naming.NamingContext.lookup(NamingContext.java:680)
        at org.mortbay.naming.local.localContextRoot.lookup(localContextRoot.java:164)
        at javax.naming.InitialContext.lookup(InitialContext.java:411)
        at com.site.application.<reverse engineered DAO>.getSessionFactory(<reverse engineered DAO>.java:31) 
```

结尾：

```
 [ERROR] 500 - POST <application path> (127.0.0.1) xxxx bytes 
```

如果您需要更多详细信息，请告诉我。我不想用调试信息淹没页面。

## 环境

*   Ubuntu 12.04 LTS
*   Eclipse Juno 4.2 构建 ID：20120614-1722
*   GWT SDK 2.4.0
*   休眠 4.0
*   PostgreSQL 9.1

# c - 在 MIFARE DESFire EV1 卡上创建应用程序

> ID：12926402
> 
> 赞同：2
> 
> 时间：2012-10-17T02:54:00.060
> 
> 标签：c, smartcard, mifare, smartcard-reader

我有一个使用 MIFARE DESFIRE EV1 卡创建考勤系统的项目。

我需要用于此项目的读卡器品牌仅支持 ISO 7816-x，因此我需要使用 DESFIRE ISO7816-4 APDU Wrapping 模式向读卡器发送命令。

我还可以访问 NXP 文档资源。

到目前为止，我可以运行一些命令，例如 Get Version、Get Application IDs、Free Memory on card。所有这些命令都可以直接运行，不需要安全性。但是我还不能在这张卡上创建应用程序。

我确定我创建应用程序的命令是正确的，但它失败了，代码为 0x7E（长度错误）。

这是我失败的创建应用程序代码。

```
-> 90 CA (00 00 05) 414141 0F 0E (00)
<- 91 7E 
```

我想知道：

*   我是否以正确的顺序运行命令？
*   在卡中创建应用程序之前是否需要进行身份验证

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:55:09.430

此命令为我创建了一个应用程序（使用 AES 密钥，因此 num_keys 字节中的 0x80 位）。

```
(90) ca (00 00 05) 33 22 11 0b 84 (00) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:50:47.157

最后一个字节表示您要在该应用程序中使用的密钥数。对于每张 Desfire 卡，每个应用程序只能创建 14 个密钥。所以，键的数量应该是从 0x01 到 0x0E。

# php - 从查询中显示表名

> ID：12926406
> 
> 赞同：1
> 
> 时间：2012-10-17T02:54:59.883
> 
> 标签：php, mysql

我有一个 SELECT 语句，我在其中加入 2 个单独的表。

```
$result = mysql_query('SELECT * FROM (SELECT * FROM gslil0009) as table1 UNION SELECT * FROM (SELECT * FROM gslil0028) as table2' . ' ORDER BY lname');

while($row = mysql_fetch_array($result)) {
  echo $row['fname'];
} 
```

如何打印出该行来自哪个表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T02:58:57.013

```
$result = mysql_query('SELECT *,'tbl1' FROM (SELECT * FROM gslil0009) as table1 
               UNION SELECT *,'tbl2' FROM (SELECT * FROM gslil0028) as table2' 
               . ' ORDER BY lname');

while($row = mysql_fetch_array($result)) {
  echo $row['fname'];
  echo $row['tbl1'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:30:58.647

我使用了与 sel 相同的解决方案，只是添加了反斜杠以避免错误，并在表名中添加了一个名称。

```
$result = mysql_query('SELECT *,\'table1\' AS tablename FROM (SELECT * FROM gslil0009) as table1 
               UNION SELECT *,\'table2\' AS tablename FROM (SELECT * FROM gslil0028) as table2' 
               . ' ORDER BY lname');

while($row = mysql_fetch_array($result)) {
  echo $row['fname'];
  echo $row['tablename'];
} 
```

我无法对他的帖子发表评论。

# ios - Why does my tabbar controller execute code from a different view controller than the active one?

> ID：12926407
> 
> 赞同：0
> 
> 时间：2012-10-17T02:55:13.557
> 
> 标签：ios, uiviewcontroller, delegates, uitabbarcontroller, ios6

Firstly, I have set both viewcontrollers to be UITabBarController delegates. Both are part of a tab bar controller. I did this by putting the following code into each viewDidLoad:

```
self.tabBarController.delegate = self; 
```

Then I added the following delegate method to CalculatorsViewController:

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController {
[self presentCalculatorsView];
} 
```

Where presentCalculators view simply reveals a subview within the same view controller.

I also added the following delegate method to the OptionsViewController:

```
-(void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController {

    [self presentHomeScreen];

} 
```

Again this method simply reveals another subview within the viewController.

The problem I am having is that the OptionsViewController presentHomeScreen method is only called if I do not visit the CalculatorsViewController. Once I do visit the CalculatorsViewController in the app and then return to OptionsViewController,

```
[self presentHomeScreen] 
```

is never called. In fact, it appears that it still calls the method from the CalculatorsViewController. I tested it with an NSLog statement.

Any ideas why one method overrides the other? Or why the tab bar button executes code from another viewController, other than the one that is active?

EDIT* It is almost as if the one viewController 'steals' the delegate from the other.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:40:38.140

By calling `self.tabBarController.delegate = self;` on each `viewDidLoad` method, you are basically telling the tab bar controller to use abandon the current delegate and use the current view controller as delegate.

Note that the `viewDidLoad` method is called only once under normal circumstances. (It may be called again when the view of your view controller is unloaded due to memory warning, for example, then you access the view of your view controller again, which calls `loadView`/`awakeFromNib` and `viewDidLoad`. I'm not entirely sure on this scenario though.) In your scenario:

1.  Open OptionsViewController for the first time - tab bar controller's delegate is OptionsViewController
2.  Open CalculatorsViewController for the first time - tab bar controller's delegate is now CalculatorsViewController
3.  Go back to OptionsViewController - tab bar controller's delegate is still CalculatorsViewController, as the `viewDidLoad` is not called again

If you must change the delegate, you can do it instead in the `viewWillAppear` method.

# java - 开发支持多语言的java客户端时优化jar文件大小（图片）

> ID：12926408
> 
> 赞同：0
> 
> 时间：2012-10-17T02:55:23.013
> 
> 标签：java, image, optimization, internationalization

我正在开发应该支持多种语言的 Java 客户端。对于文本的翻译，我使用 Java ResourceBoundle，它可以正常工作。

现在的问题是图像。客户端应加载大约 50 张图像，这些图像是棋盘游戏的特定卡片。每个图像都有一个标题。因此，如果我有 N 种语言，我应该准备 50*N 个图像，然后放入 jar 文件中。

每种语言支持都会使 jar 文件的大小增加大约 1 Mb。

你觉得我应该

1.  生成支持所有语言的jar？
2.  生成许多​​支持英语和本地语言的罐子？
3.  有一组没有标题的图像并使用 Java JLabel 将标题附加到图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T03:02:21.957

我完全建议另一种选择。

有一组没有文本的图像，并使用 AWT 的[Graphics2D](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics2D.html)以必要的语言添加文本（而不是使用 JLabel 这样做）。

```
Graphics2D g = imageBase.createGraphics();
// color, font, etc settings
g.drawString("title", 0, 0);
g.dispose(); 
```

您可以`g.drawString`根据需要修改参数以在正确的坐标处绘制正确的标题。如果你希望标题居中，你可以[在这里](http://www.leepoint.net/notes-java/GUI-appearance/fonts/18font.html)找到一个很好的教程。

# php - 单元测试 FuelPHP 模型

> ID：12926411
> 
> 赞同：1
> 
> 时间：2012-10-17T02:56:11.527
> 
> 标签：php, unit-testing, activerecord, fuelphp

所以我有一个非常简单（至少现在是这样）的模型，它通过它的主键 ID 返回一个联系人：

```
class Model_Contact extends \Fuel\Core\Model
{
    public function get_by_id($contact_id)
    {
        return Entity_Contact::find_by_pk($contact_id);
    }
} 
```

该类`Entity_Contact`看起来像这样（省略了无关的数组内容）：

```
class Entity_Contact extends \Core\Entity_Base
{
    protected static $_table_name = 'contacts';
    protected static $_properties = array(...);
    protected static $_public_settable_properties = array(...);
    protected static $_rules = array(...);
} 
```

注意：`\Core\Entity_Base`扩展`\Fuel\Core\Model_Crud`

我可能会在这样的控制器中使用它：

```
$model = new Model_Contact();
$contact = $model->get_by_id(4); 
```

我知道为了对此进行单元测试，我应该模拟出实际的数据库调用 ( `Entity_Contact::find_by_pk`)，但我不确定如何执行此操作。由于我使用的是 Fuel 的`Model_crud`功能（其中 DB 访问器实际上是域对象模型的一部分），我不确定我是否可以完全模拟数据库——或者我可能遗漏了一些东西。

所以问题是：您将如何编写测试`Model_Contact::get_by_id()`？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-09T06:48:03.917

You can mock it easily if you use AspectMock. [https://github.com/Codeception/AspectMock](https://github.com/Codeception/AspectMock)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:21:11.047

您的测试可能必须创建对象，以便您可以测试您的方法。

1.  Create the objects that get stored to the database.
2.  Test get_by_id
3.  Delete your created object

It's not the most glorious thing in the world, but it would accomplish testing your method... meh?

# c# - 如何在 EF4 中为多个 ObjectContext 实现单个 SQL 事务

> ID：12926412
> 
> 赞同：4
> 
> 时间：2012-10-17T02:56:15.093
> 
> 标签：c#, entity-framework

我有一个相当大的数据库，其中包含为不同业务模块创建的表。

我们决定分别为不同的模块创建不同的 edmx 文件。

但是，在尝试为将导致写入不同 edmx 中的多个表的逻辑操作实现 TransactionScope 时，如何防止使用 MSDTC？同样，底层数据库是相同的，我不想在这种情况下使用 MSDTC。

有没有办法通过活动事务传递打开的 SQL 连接？

提前感谢您的帮助。

问候，威廉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T03:04:54.110

`TransactionScope` enlists the MSDTC when the databases are different and/or the connection strings are different.

Rick Strahl has a [great article](http://www.west-wind.com/weblog/posts/2009/Jul/14/LINQ-to-SQL-and-Transactions) on this (his perspective is LINQ to SQL, but it's applicable to EF). The money paragraphs:

> TransactionScope is a high level Transaction wrapper that makes it real easy to wrap any code into a transaction without having to track transactions manually. Traditionally TransactionScope was a .NET wrapper around the Distributed Transaction Coordinator (DTC) but it’s functionality has expanded somewhat. One concern is that the DTC is rather expensive in terms of resource usage and it requires that the DTC service is actually running on the machine (yet another service which is especially bothersome on a client installation).
> 
> However, recent updates to TransactionScope and the SQL Server Client drivers make it possible to use TransactionScope class and the ease of use it provides without requiring DTC as long as you are running against a single database and with a single consistent connection string. In the example above, since the transaction works with a single instance of a DataContext, the transaction actually works without involving DTC. This is in SQL Server 2008.

See also this [SO question/answer](https://stackoverflow.com/questions/1155941/transactionscope-has-it-gotten-better) where I found the link to Rick's blog.

So if you're connecting to the same database and are using the same connection string, the DTC should not be involved.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:00:33.343

感谢以上所有回复！

顺便说一句，刚刚设法找到一个解决方案，即明确使用 EntityConnection 和 EntityTransaction 。一个样本是这样的：

```
 string theSqlConnStr = "data source=TheSource;initial catalog=TheCatalog;persist security info=True;user id=TheUserId;password=ThePassword";

    EntityConnectionStringBuilder theEntyConnectionBuilder = new EntityConnectionStringBuilder();
    theEntyConnectionBuilder.Provider = "System.Data.SqlClient";
    theEntyConnectionBuilder.ProviderConnectionString = theConnectionString;
    theEntyConnectionBuilder.Metadata = @"res://*/";

    using (EntityConnection theConnection = new EntityConnection(theEntyConnectionBuilder.ToString()))
    {
        theConnection.Open();
        theET = null;

        try
        {
            theET = theConnection.BeginTransaction();

            DataEntities1 DE1 = new DataEntities1(theConnection);
            //DE1 do somethings...

            DataEntities2 DE2 = new DataEntities2(theConnection);
            //DE2 do somethings...

            DataEntities3 DE3 = new DataEntities3(theConnection);
            //DE3 do somethings...

            theET.Commit();
        }
        catch (Exception ex)
        {
            if (theET != null) { theET.Rollback(); }
        }
        finally
        {
            theConnection.Close();
        }
    } 
```

通过显式使用 EntityConnection 和 EntityTransaction，我可以实现单个数据库的多个 ObjectContext 的单个连接和事务的共享，而无需使用 MSDTC。

希望这些信息有帮助。祝你好运！！

# node.js - socket.io 安装错误

> ID：12926416
> 
> 赞同：3
> 
> 时间：2012-10-17T02:56:30.203
> 
> 标签：node.js, installation, socket.io

当我尝试安装 socket.io 时，我遇到了一堆错误。当找不到节点路径时，我不确定这意味着什么。终端输出如下，npm-debug 文件位于： http: [//pastebin.com/B5TfUyWr](http://pastebin.com/B5TfUyWr)。我已经删除了 node-modules 文件夹，并尝试重新安装 socket.io。我也尝试过全局安装，但这也不起作用。我将不胜感激任何人可能拥有的任何见解。

```
$npm install socket.io
npm http GET https://registry.npmjs.org/socket.io
npm http 304 https://registry.npmjs.org/socket.io
npm http GET https://registry.npmjs.org/socket.io-client/0.9.10
npm http GET https://registry.npmjs.org/policyfile/0.0.4
npm http GET https://registry.npmjs.org/redis/0.7.2
npm http 304 https://registry.npmjs.org/redis/0.7.2
npm http 304 https://registry.npmjs.org/policyfile/0.0.4
npm http 304 https://registry.npmjs.org/socket.io-client/0.9.10
npm http GET https://registry.npmjs.org/hiredis
npm http 304 https://registry.npmjs.org/hiredis
npm WARN package.json hiredis@0.1.14 No README.md file found!

> hiredis@0.1.14 preinstall /media/sf_Data/webSites/exoLang/sites/all/modules/exoticlang_chat/node_modules/socket.io/node_modules/redis/node_modules/hiredis
> make || gmake

cd deps/hiredis && make static
make[1]: Entering directory `/media/sf_Data/webSites/exoLang/sites/all/modules/exoticlang_chat/node_modules/socket.io/node_modules/redis/node_modules/hiredis/deps/hiredis'
npmcc -std=c99 -pedantic -c -O3 -fPIC  -Wall -W -Wstrict-prototypes -Wwrite-strings -g -ggdb net.c
 http GET https://registry.npmjs.org/uglify-js/1.2.5
npm http GET https://registry.npmjs.org/ws
npm http GET https://registry.npmjs.org/xmlhttprequest/1.4.2
npm http GET https://registry.npmjs.org/active-x-obfuscator/0.0.1
cc -std=c99 -pedantic -c -O3 -fPIC  -Wall -W -Wstrict-prototypes -Wwrite-strings -g -ggdb hiredis.c
cc -std=c99 -pedantic -c -O3 -fPIC  -Wall -W -Wstrict-prototypes -Wwrite-strings -g -ggdb sds.c
cc -std=c99 -pedantic -c -O3 -fPIC  -Wall -W -Wstrict-prototypes -Wwrite-strings -g -ggdb async.c
ar rcs libhiredis.a net.o hiredis.o sds.o async.o
make[1]: Leaving directory `/media/sf_Data/webSites/exoLang/sites/all/modules/exoticlang_chat/node_modules/socket.io/node_modules/redis/node_modules/hiredis/deps/hiredis'
node-waf configure build
Setting srcdir to                        : /media/sf_Data/webSites/exoLang/sites/all/modules/exoticlang_chat/node_modules/socket.io/node_modules/redis/node_modules/hiredis 
Setting blddir to                        : /media/sf_Data/webSites/exoLang/sites/all/modules/exoticlang_chat/node_modules/socket.io/node_modules/redis/node_modules/hiredis/build 
Checking for program g++ or c++          : /usr/bin/g++ 
Checking for program cpp                 : /usr/bin/cpp 
Checking for program ar                  : /usr/bin/ar 
Checking for program ranlib              : /usr/bin/ranlib 
Checking for g++                         : ok  
Checking for node path                   : not found 
Checking for node prefix                 : ok /usr 
'configure' finished successfully (0.213s)
Waf: Entering directory `/media/sf_Data/webSites/exoLang/sites/all/modules/exoticlang_chat/node_modules/socket.io/node_modules/redis/node_modules/hiredis/build'
[1/3] cxx: hiredis.cc -> build/Release/hiredis_1.o
npm http 304 https://registry.npmjs.org/uglify-js/1.2.5
npm http 304 https://registry.npmjs.org/active-x-obfuscator/0.0.1
npm http 304 https://registry.npmjs.org/xmlhttprequest/1.4.2
npm http 304 https://registry.npmjs.org/ws
npm http GET https://registry.npmjs.org/zeparser/0.0.5
[2/3] cxx: reader.cc -> build/Release/reader_1.o
npm http 304 https://registry.npmjs.org/zeparser/0.0.5
[3/3] cxx_link: build/Release/hiredis_1.o build/Release/reader_1.o -> build/Release/hiredis.node
npm http GET https://registry.npmjs.org/commander
npm http GET https://registry.npmjs.org/tinycolor
npm http GET https://registry.npmjs.org/options
Waf: Leaving directory `/media/sf_Data/webSites/exoLang/sites/all/modules/exoticlang_chat/node_modules/socket.io/node_modules/redis/node_modules/hiredis/build'
'build' finished successfully (10.809s)
npm http 304 https://registry.npmjs.org/tinycolor
npm http 304 https://registry.npmjs.org/commander
npm http 304 https://registry.npmjs.org/options
npm ERR! error rolling back Error: UNKNOWN, unlink '/media/sf_Data/webSites/exoLang/sites/all/modules/exoticlang_chat/node_modules/socket.io/node_modules/socket.io-client/node_modules/active-x-obfuscator/node_modules/zeparser/benchmark.html'
npm ERR! error rolling back  socket.io-client@0.9.10 { [Error: UNKNOWN, unlink '/media/sf_Data/webSites/exoLang/sites/all/modules/exoticlang_chat/node_modules/socket.io/node_modules/socket.io-client/node_modules/active-x-obfuscator/node_modules/zeparser/benchmark.html']
npm ERR! error rolling back   errno: -1,
npm ERR! error rolling back   code: 'UNKNOWN',
npm ERR! error rolling back   path: '/media/sf_Data/webSites/exoLang/sites/all/modules/exoticlang_chat/node_modules/socket.io/node_modules/socket.io-client/node_modules/active-x-obfuscator/node_modules/zeparser/benchmark.html' }
npm ERR! error rolling back Error: UNKNOWN, unlink '/media/sf_Data/webSites/exoLang/sites/all/modules/exoticlang_chat/node_modules/socket.io/node_modules/socket.io-client/node_modules/active-x-obfuscator/node_modules/zeparser/benchmark.html'
npm ERR! error rolling back  socket.io@0.9.10 { [Error: UNKNOWN, unlink '/media/sf_Data/webSites/exoLang/sites/all/modules/exoticlang_chat/node_modules/socket.io/node_modules/socket.io-client/node_modules/active-x-obfuscator/node_modules/zeparser/benchmark.html']
npm ERR! error rolling back   errno: -1,
npm ERR! error rolling back   code: 'UNKNOWN',
npm ERR! error rolling back   path: '/media/sf_Data/webSites/exoLang/sites/all/modules/exoticlang_chat/node_modules/socket.io/node_modules/socket.io-client/node_modules/active-x-obfuscator/node_modules/zeparser/benchmark.html' }
npm ERR! Error: EROFS, symlink '../ws/bin/wscat'
npm ERR! If you need help, you may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>

npm ERR! System Linux 3.2.0-32-generic-pae
npm ERR! command "nodejs" "/usr/bin/npm" "install" "socket.io"
npm ERR! cwd /media/sf_Data/webSites/exoLang/sites/all/modules/exoticlang_chat
npm ERR! node -v v0.8.12
npm ERR! npm -v 1.1.63
npm ERR! path ../ws/bin/wscat
npm ERR! code EROFS
npm ERR! errno 56
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /media/sf_Data/webSites/exoLang/sites/all/modules/exoticlang_chat/npm-debug.log
npm ERR! not ok code 0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T05:47:34.833

我的问题是 Ubuntu 无法在 NTFS 分区上编译或安装本机扩展。然后我在 Windows 中安装了节点。因为我没有在 Windows 中安装编译器，所以它安装了（未编译的？）扩展。Ubuntu 中的 Node 能够读取和使用这些扩展，它很高兴（我也很高兴）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:02:19.830

这是一个疯狂的猜测：

试试这个：

```
npm install --production socket.io 
```

# filesystems - 文件存储库（带有文件历史记录） - 使用什么实现？

> ID：12926422
> 
> 赞同：0
> 
> 时间：2012-10-17T02:57:01.230
> 
> 标签：filesystems, repository

我正在编写一个文件备份实用程序：
（1）备份您当前的文件；(
2) 允许您检索此类文件的过去版本（类似于代码存储库修订版）。

我正在考虑使用源代码存储库（SVN、Git、Mercurial 是主要候选者），因为它们提供了类似的功能，但源代码除外。

与编写我自己的专有代码（例如，对于每个文件，保留当前文件并将二进制差异链保持到最旧的修订版）相比，这样做的优点/缺点是什么？

鉴于性能方面的考虑，您会推荐什么方法？

如果重要的话，服务器程序将用 Python 编写，性能关键区域由 C 扩展完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T03:22:37.137

使用源代码存储库可以完美地完成您的要求。你可以重复使用它们。

许多项目是开源的，您可以根据需要对其进行修改。

编辑：

对于小的频繁提交，我认为这取决于频率和存储库的大小。如果存储库非常大并且经常提交，那么我认为很难达到您的目标。但是如果要备份的文件数量不大或者频率不高，那就可以了。

# php - WordPress 开发

> ID：12926424
> 
> 赞同：-1
> 
> 时间：2012-10-17T02:57:12.203
> 
> 标签：php, wordpress

我有一个要在 wordpress 中开发的博客网站项目。我没有 wordpress 工作的经验，我阅读了 Codex 文档，但没有找到我的问题的答案，所以项目要求是，

1：发布带有缩略图的电影、下载或流媒体网站的链接、类型（分类）、Youtube 电影轨迹、

2：用户可以喜欢，评分，评论，添加到观看列表，与朋友分享

3：我有超过 3000 条记录的数据库，由于某些原因，我不想将其插入 wp_posts 表中。

4：如何将javascript添加到小部件或插件（也许这是一个愚蠢的问题）

我的问题是我不知道写方法是什么。WP中有两个主要的东西

```
1: Plugin

2: Widgets 
```

我如何在我的项目中使用它们？我应该从哪里开始首先，我已经完成了主题开发，以及一些wordpress的基本概念，例如，`Action,Filters`. 我可以使用 PHP 和 JS 轻松创建这个项目。不要向我推荐任何预制的 wordpress 插件或小部件，我想自己编写代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T03:04:55.600

What do you mean add javascript to widgets or plugins? You can include javascript by adding it to the Theme of the page.

Most of your development should be on a Theme. A Theme is essentially a collection of different page templates, styling and functions that will be used. Theme can also handle taxonomy and meta data.

Since you have a DB already what you could do is make a page template called "movie" that pulls an ID/Slug and retrieves it from the database to get the relevant information.

Helpful Links:

Taxonomy - [http://codex.wordpress.org/Taxonomies](http://codex.wordpress.org/Taxonomies)

Queuing Scripts - [http://codex.wordpress.org/Function_Reference/wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)

WPDB (Database Class) - [http://codex.wordpress.org/Class_Reference/wpdb](http://codex.wordpress.org/Class_Reference/wpdb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:32:46.610

我认为可能已经有一些主题具有您想要的功能。您是否搜索了股票主题？我遇到过一些带有评分、社交分享等的视频/电影显示。所以你的开发工作会大大减少。

# java - 了解线程 + 异步

> ID：12926425
> 
> 赞同：6
> 
> 时间：2012-10-17T02:57:14.197
> 
> 标签：java, multithreading, asynchronous

因此，我制作了一个程序，需要向 URL 发送大量（例如 10,000 多个）GET 请求，并且我需要它尽可能快。当我第一次创建程序时，我只是将连接放入一个 for 循环中，但它真的很慢，因为它必须等待每个连接完成才能继续。我想让它更快，所以我尝试使用线程，它使它更快一些，但我仍然不满意。

我猜想解决这个问题并使其真正快速的正确方法是使用异步连接并连接到所有 URL。这是正确的方法吗？

另外，我一直在尝试理解线程以及它们是如何工作的，但我似乎无法理解。我使用的计算机具有 Intel Core i7-3610QM 四核处理器。根据英特尔网站上关于这款处理器的规格，它有 8 个线程。这是否意味着我可以在 Java 应用程序中创建 8 个线程并且它们都将同时运行？超过8个就不会提速了？

任务管理器“性能”选项卡下“线程”旁边的数字到底代表什么？目前，我的任务管理器显示“线程”超过 1,000。为什么它是这个数字，如果我的处理器支持它，它怎么能超过 8？我还注意到，当我尝试使用 500 个线程作为测试的程序时，任务管理器中的数字增加了 500，但它的速度与我将其设置为使用 8 个线程的速度相同。因此，如果数量根据我在 Java 应用程序中使用的线程数而增加，那么为什么速度相同？

另外，我尝试用 Java 中的线程做一个小测试，但输出对我来说没有意义。这是我的测试课：

```
import java.text.SimpleDateFormat;
import java.util.Date;

public class Test {

    private static int numThreads = 3;
    private static int numLoops = 100000;
    private static SimpleDateFormat dateFormat = new SimpleDateFormat("[hh:mm:ss] ");

    public static void main(String[] args) throws Exception {

        for (int i=1; i<=numThreads; i++) {
            final int threadNum = i;
            new Thread(new Runnable() {
                public void run() {
                    System.out.println(dateFormat.format(new Date()) + "Start of thread: " + threadNum);
                    for (int i=0; i<numLoops; i++)
                        for (int j=0; j<numLoops; j++);
                    System.out.println(dateFormat.format(new Date()) + "End of thread: " + threadNum);
            }
            }).start();
            Thread.sleep(2000);
        }

    }
} 
```

这会产生如下输出：

```
[09:48:51] Start of thread: 1
[09:48:53] Start of thread: 2
[09:48:55] Start of thread: 3
[09:48:55] End of thread: 3
[09:48:56] End of thread: 1
[09:48:58] End of thread: 2 
```

为什么第三个线程立即开始和结束，而第一个和第二个线程各需要 5 秒？如果我添加了 3 个以上的线程，那么 2 以上的所有线程都会发生同样的事情。

对不起，如果这是一个长篇阅读，我有很多问题。提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T03:26:43.600

您的处理器有 8 个内核，而不是线程。这实际上意味着在任何给定时刻只能运行 8 件事情。但是，这并不意味着您仅限于 8 个线程。

当一个线程同步打开到一个 URL 的连接时，它通常会在等待远程服务器返回时休眠。当该线程处于休眠状态时，其他线程可以工作。如果您有 500 个线程并且所有 500 个线程都在休眠，那么您没有使用 CPU 的任何内核。

另一方面，如果您有 500 个线程并且所有 500 个线程都想做某事，那么它们就不能同时运行。为了处理这种情况，有一个特殊的工具。处理器（或者更可能是操作系统或两者的某种组合）有一个调度程序，该调度程序确定哪些线程在任何给定时间在处理器上主动运行。有许多不同的规则，有时是随机活动来控制这些调度程序的工作方式。这可以解释为什么在上面的示例中线程 3 似乎总是先完成。也许调度程序更喜欢线程 3，因为它是主线程调度的最新线程，有时可能无法预测行为。

现在回答您关于性能的问题。如果打开连接从不涉及睡眠，那么同步或异步处理事情都无关紧要，您将无法获得超过 8 个线程的任何性能提升。实际上，打开连接所涉及的很多时间都花在了睡觉上。异步和同步之间的区别在于如何处理睡眠所花费的时间。从理论上讲，您应该能够在两者之间获得几乎相同的性能。

使用多线程模型，您只需创建比内核更多的线程。当线程进入睡眠状态时，它们会让其他线程工作。这有时会更容易处理，因为您不必编写线程之间的任何调度或交互。

使用异步模型，您只需为每个内核创建一个线程。如果该线程需要休眠，那么它不会休眠，但实际上必须有代码来处理切换到下一个连接。例如，假设打开连接（A、B、C）有三个步骤：

```
while (!connectionsList.isEmpty()) {
  for(Connection connection : connectionsList) {

    if connection.getState() == READY_FOR_A {
      connection.stepA();
      //this method should return immediately and the connection
      //should go into the waiting state for some time before going
      //into the READY_FOR_B state
    }
    if connection.getState() == READY_FOR_B {
      connection.stepB();
      //same immediate return behavior as above
    }
    if connection.getState() == READY_FOR_C {
      connection.stepC();
      //same immediate return behavior as above
    }
    if connection.getState() == WAITING {
      //Do nothing, skip over
    }
    if connection.getState() == FINISHED {
      connectionsList.remove(connection);  
    }
  }
} 
```

请注意，线程在任何时候都不会休眠，因此线程数多于内核数是没有意义的。归根结底，是采用同步方法还是异步方法是个人喜好问题。只有在绝对极端情况下，两者之间才会存在性能差异，您需要花费很长时间进行分析才能达到应用程序的瓶颈。

听起来您正在创建很多线程并且没有获得任何性能提升。这可能有很多原因。

*   您建立连接可能实际上并未处于休眠状态，在这种情况下，我不希望看到超过 8 个线程的性能提升。我认为这不太可能。
*   可能所有线程都在使用一些公共共享资源。在这种情况下，其他线程无法工作，因为休眠线程拥有共享资源。是否有所有线程共享的对象？这个对象有任何同步方法吗？
*   您可能有自己的同步。这可能会产生上述问题。
*   有可能每个线程都必须执行某种设置/分配工作，这会破坏您通过使用多个线程获得的好处。

如果我是你，我会在使用少量线程 (20) 运行时使用 JVisualVM 之类的工具来分析你的应用程序。JVisualVM 有一个漂亮的彩色线程图，可以显示线程何时运行、阻塞或休眠。这将帮助您了解线程/核心关系，因为您应该看到正在运行的线程数少于您拥有的核心数。此外，如果您看到很多阻塞的线程，那么这可以帮助您找到瓶颈（如果您看到很多阻塞的线程使用 JVisualVM 在那个时间点创建线程转储并查看线程被阻塞的位置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T03:44:24.420

**一些概念：**

您可以在系统中有许多线程，但在任何时间点，只有其中一些（在您的情况下最多 8 个）会在 CPU 上“调度”。因此，您无法获得比 8 个并行运行的线程更高的性能。事实上，由于创建、销毁和管理线程所涉及的工作，性能可能会随着线程数量的增加而下降。

线程可以处于不同的状态：[http](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.State.html) : //docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.State.html 在这些状态中，RUNNABLE 线程可以得到一部分CPU时间。操作系统决定将 CPU 时间分配给线程。在具有 1000 个线程的常规系统中，某个线程何时获得 CPU 时间以及它将在 CPU 上停留多长时间是完全不可预测的。

**关于您要解决的问题：**

您似乎已经找到了正确的解决方案 - 发出并行异步网络请求。但是，实际上，同时启动 10000 多个线程和如此多的网络连接可能会对系统资源造成压力，并且可能无法正常工作。这篇[文章](https://stackoverflow.com/questions/3142915/how-do-you-create-an-asynchronous-http-request-in-java)对使用 Java 的异步 I/O 有很多建议。（提示：不要只看接受的答案）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:20:39.127

此解决方案更具体地解决了尝试尽可能快地发出 10k 个请求的一般问题。我建议您放弃 Java HTTP 库并改用 Apache 的[HttpClient](http://hc.apache.org/httpcomponents-client-ga/index.html)。他们有一些关于最大化性能的[建议](http://hc.apache.org/httpclient-3.x/performance.html)，这些建议可能很有用。我听说 Apache HttpClient 库通常也更快，重量更轻，开销更少。

# ios - iPad iOS 6 崩溃

> ID：12926430
> 
> 赞同：1
> 
> 时间：2012-10-17T02:57:51.110
> 
> 标签：ios, ipad, crash, crash-log

由于某些神秘的原因，我的游戏在 iPad 上发布时因某些用户而崩溃。但它在 iPhone 上运行良好（iPad 和 iPhone 版本是不同的应用程序，但技术上是相同的构建，只是不同的目标）它发生在将应用程序更新到版本 1.1.1 后

该游戏有以前的更新，可以正常工作。（几个月前更新 1.0 -> 1.1 是完美的）

版本 1.1.1 是为 iOS 6 兼容性而创建的 - Landscape GameCenter 错误 + 添加了一些 SDK（Urban Airship、Flurry、TapJoy 等）+ 更改了应用名称

据我所知 - 将 iPad 更新到 iOS 6.0 并在此之后更新游戏的用户会发生崩溃。

应用程序更新过程对我和其他少数测试设备运行良好，但很多用户经历了崩溃并在 App Store 中写了 1* 评论。错误无法重现。

还有一件奇怪的事：

我只有一个崩溃报告。请帮助我阅读它，我将不胜感激！

**[在此处下载崩溃报告](https://www.dropbox.com/s/j3g9kek2pobye43/ttf2HD_2012-10-12-003303_iPad.crash)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:50:07.280

我在 Flurry 中遇到过类似的问题，只是在向我的应用程序添加崩溃报告 SDK 后才发现它。我试过几个。这是一个体面的免费：

www.crittercism.com

# mysql - MySQL 查询优化和/或调整

> ID：12926431
> 
> 赞同：0
> 
> 时间：2012-10-17T02:58:01.107
> 
> 标签：mysql, sql, mysqli, sql-optimization

我有以下查询，这两个表都很大。查询非常慢，我需要您的想法来优化此查询，或者您有其他解决方案吗？

```
SELECT c.EstablishmentID,
   (SELECT COUNT(ID) 
    FROM cleanpoi 
    WHERE EstablishmentID=c.EstablishmentID OR EstablishmentID 
    IN (SELECT ChildEstablishmentID 
        FROM crawlerchildren 
        WHERE ParentEstablishmentID=c.EstablishmentID)
    ) POI 
FROM crawler c 
GROUP BY c.EstablishmentID 
```

顺便说一句，我应用了适当的索引。

**更新：**

好的，我已经附上了解释结果。![在此处输入图像描述](../Images/85cc655c105fd1fc9511568401a65a83.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:26:18.550

**IN() 和 NOT IN() 子查询的优化很差：**

MySQL 将子查询作为外部查询中每一行的依赖子查询执行。这是 MySQL 5.5 和更早版本中严重性能问题的常见原因。查询可能应该分别重写为 JOIN 或 LEFT OUTER JOIN。

**非确定性 GROUP BY：** SQL 检索既不在聚合函数中也不在 GROUP BY 表达式中的列，因此这些值在结果中将是不确定的。

**GROUP BY 或 ORDER BY 在不同的表上：**

这将强制使用临时表和文件排序，这可能是一个巨大的性能问题，并且会消耗大量内存和磁盘上的临时空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:53:37.707

尝试使用`JOIN`

```
SELECT  c.EstablishmentID, COUNT(d.ID)
FROM    crawler c
        LEFT JOIN cleanpoi d
            ON c.establishmentid = d.establishmentID
        LEFT JOIN
        (
            SELECT DISTINCT ChildEstablishmentID
            FROM crawlerchildren
        ) e ON e.ParentEstablishmentID = c.EstablishmentID
GROUP BY c.EstablishmentID 
```

# java - 不使用 @valid 的 Spring bean 验证

> ID：12926433
> 
> 赞同：1
> 
> 时间：2012-10-17T02:58:03.227
> 
> 标签：java, spring, spring-mvc, bean-validation

我以传统方式使用了弹簧验证，如下所示：

```
@RequestMapping(value="userRegistration", method = RequestMethod.POST)
public ModelAndView registerUser(@Valid UserAccountVO userAccountVO, BindingResult result,Model model){
    if (result.hasErrors()){
    // Do something
    }
//Do something else
} 
```

这很好用。

但是现在我遇到了无法提交表单的情况，而是在 javascript 中获取值并在单击按钮时使用 Ajax 发送它们，就像这样。

```
var nameStr = $("#usrnmbx").val();
var emailidStr = $("#emailidbx").val()
//and more and then send them using ajax 
```

所以要实现 bean 验证，我的新方法看起来像这样。

```
@RequestMapping(value = "/userRegistration", method = RequestMethod.POST)
public @ResponseBody JSONresponse registerUser(HttpServletRequest request,@RequestParam(value = "name") String name, // and more){

UserAccountVO userAccountVO = new UserAccountVO(name, emailId,password, confirmPassword);
BindingResult result = new BeanPropertyBindingResult(userAccountVO,"userAccount");
userAccountValidator.validate(userAccountVO, result); //userAccountValidator is spring Validator implementation 
if (result.hasErrors()) {
 //Do something
}
//Do something else
} 
```

但这看起来很脏。我绝对认为有更好的方法来做到这一点。这似乎不像我在 POJO 中放置的验证注释。你们中的任何人都可以提出更好的实施方案吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:30:05.683

您可以使用 ajax 提交整个表单。在这种情况下，您的命令对象应该填充为普通的表单提交。

这是我的方法

```
 function submitAjaxForm(form, url) {  
        $.post(url, $(form).serialize(),function(data) {
              ...........
            }); 
} 
```

# java - SWT 复合对齐

> ID：12926435
> 
> 赞同：1
> 
> 时间：2012-10-17T02:58:20.283
> 
> 标签：java, swt, margin, composite

我想知道 SWT Composite 对象的正常/常见做法是什么。

我发现，每当我添加一个 Composite（使用任何 UI 示例：TextBox 或 Button）时，在 Composite 中创建的 UI 都不会与 Composite 的起始边缘对齐。（您可以通过设置 Composite 的背景颜色来观察这一点）

在 TextBox UI 之前的 Composite 中有一些空间/填充。如果之前的 UI 不是在 Composite 中创建的，这会导致我正在创建的 GUI 表单出现错位。

我想知道使它们对齐的常见做法是什么？通过设置一些负填充来将 Composite 向后移动，以便其中的 UI 看起来像是对齐的？

下面的示例代码！

```
public static void main(String[] args) {
        Display display = new Display();
        Shell shell = new Shell(display);
        GridLayout layout = new GridLayout();
        layout.numColumns = 1;
        layout.makeColumnsEqualWidth = false;
        shell.setLayout(layout);

        Text t1 = new Text(shell, SWT.SINGLE | SWT.BORDER);
        t1.setText("Test box...");

        Composite c = new Composite(shell, SWT.NONE);
        // c.setBackground(new Color(shell.getDisplay(), 255,0,0));
        layout = new GridLayout();
        layout.numColumns = 2;
        layout.makeColumnsEqualWidth = true;
        c.setLayout(layout);

        Text t2 = new Text(c, SWT.SINGLE | SWT.BORDER);
        t2.setText("Test box within Composite... not aligned to the first textbox");

        Button b = new Button(c, SWT.PUSH);
        b.setText("Button 1");

        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }
        display.dispose();
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T08:10:11.610

这将解决它：

```
public static void main(String[] args) {
    Display display = new Display();
    Shell shell = new Shell(display);
    shell.setLayout(new GridLayout(1, false));

    Text t1 = new Text(shell, SWT.SINGLE | SWT.BORDER);
    t1.setText("Test box...");

    Composite c = new Composite(shell, SWT.NONE);
    GridLayout layout = new GridLayout(2, true);

    layout.marginWidth = 0; // <-- HERE

    c.setLayout(layout);

    Text t2 = new Text(c, SWT.SINGLE | SWT.BORDER);
    t2.setText("Test box within Composite... not aligned to the first textbox");

    Button b = new Button(c, SWT.PUSH);
    b.setText("Button 1");

    shell.open();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
    display.dispose();
} 
```

只需将`marginWidth`if设置`GridLayout`为`0`。

![在此处输入图像描述](../Images/0976e02b865c5a0b6263bdc0d7a20fc7.png)

只是一个提示：您可以在`GridLayout`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T05:51:05.333

`GridLayout`具有与之关联的默认边距。我建议你阅读这篇文章

[http://www.eclipse.org/articles/article.php?file=Article-Understanding-Layouts/index.html](http://www.eclipse.org/articles/article.php?file=Article-Understanding-Layouts/index.html)

# objective-c - 使用数组传递数据，但在表视图委托中显示为空

> ID：12926436
> 
> 赞同：2
> 
> 时间：2012-10-17T02:58:24.460
> 
> 标签：objective-c, ios, uitableview, ios4, nsarray

我的应用程序基于 a`UISplitViewController`并且它是通用应用程序。
我的应用程序中有这段代码，它可以从网络服务器查找数据。

结果显示计数为 100，但`NSMutableArray`在`nil`之后`[myTable reloadData]`。

我该如何解决？

**场景** Page1：一个搜索引擎，将值传递给另一个视图 Page2：从 [Page1] 接收值然后传递给实例`sendData`。通过 JSON 获取结果，然后将它们转换为`NSMutableArray', using this`NSMutableArray `to populate`UITableView'`viewdidload`

代码：

```
- (void)configureView
{
    if (self.detailItem) {
        NSLog(@"ConfigureView");
        [self sendData];
        [self refreshTable];
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"viewdidload");
    [self configureView];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(void) refreshTable 
{
    NSLog(@"Refresh Table");
    [myTable reloadData];
    NSLog(@"Counter:%i",allFilteredItemsArray.count);
}

#pragma mark - Table

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"numberOfRowsInSection: %i", allFilteredItemsArray.count);
    return [allFilteredItemsArray count];
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"fileredCell";
    UITableViewCell *cell = [myTable dequeueReusableCellWithIdentifier:CellIdentifier];
    HardwareCell *hardwareCell = [[HardwareCell alloc] init];

    // Configure the cell...
    NSDictionary *item = [allFilteredItemsArray objectAtIndex:[indexPath row]];
    hardwareCell.lbl_model = [item objectForKey:@"name"];

    return cell;

}

#pragma mark - Searching Asset

-(void)sendData
{    
    NSString *searchString = [self.detailItem description];

    .........ignored some of the code............

    allFilteredItemsArray = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];

    NSLog(@"Search Count: %i", allFilteredItemsArray.count);
    NSLog(@"End Searching Data.");

} 
```

结果：

```
2012-10-17 10:45:54.535 Portal[10753:c07] viewdidload
2012-10-17 10:45:54.536 Portal[10753:c07] Value to be sent: %/%/%/%/%/1
2012-10-17 10:45:54.537 Portal[10753:c07] ConfigureView
2012-10-17 10:45:54.537 Portal[10753:c07] Start Seraching Data...
2012-10-17 10:45:54.923 Portal[10753:c07] Search Count: 100
2012-10-17 10:45:54.923 Portal[10753:c07] End Searching Data.
2012-10-17 10:45:54.923 Portal[10753:c07] Refresh Table
2012-10-17 10:45:54.924 Portal[10753:c07] Counter:100
2012-10-17 10:45:54.924 Portal[10753:c07] numberOfRowsInSection: 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:33:00.427

You need to alloc your array compulsorily though it's class-level object. Alloc allFilteredItemsArray in viewdidload & write it as self.allFilteredItemsArray. Check the following code:

-(void)viewDidLoad {

[super viewDidLoad];

NSMutableArray *tempArray=[[NSMutableArray alloc] init];

self.allFilteredItemsArray=tempArray;

[tempArray release];

NSLog(@"viewdidload");

[self configureView];

}

Also You can use %d for array count as follow:

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

NSLog(@"numberOfRowsInSection: %d",[allFilteredItemsArray count]);

return [allFilteredItemsArray count];

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T04:12:40.537

如果`allFilteredItemsArray`是您的子类的属性，您应该将其称为`[self allFilteredItemsArray]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T04:21:36.387

您应该将 allFilteredItemsArray 作为 self.allFilteredItemsArray 访问，这可能会解决问题；-)

# php - Cake 控制台无法在 Mac OS X Lion 上运行

> ID：12926439
> 
> 赞同：0
> 
> 时间：2012-10-17T02:58:44.263
> 
> 标签：php, mysql, cakephp, pdo, cake-console

我刚刚下载了 CakePHP 2.1 并完成了数据库的所有设置和其他所有设置，但是我无法使用 cake 控制台，我收到以下错误：

```
Error: Database connection "Mysql" is missing, or could not be created. 
```

如果我在浏览器上打开该网站，我会看到：

![在此处输入图像描述](../Images/16a3ebe0af8eed3e8e4bef0965031930.png)

这是我的database.php：

```
public $default = array(                                                                                                                                              
  'datasource' => 'Database/Mysql',                                                                                                                                   
  'persistent' => false,                                                                                                                                              
  'host' => '127.0.0.1',                                                                                                                                              
  'login' => 'user',                                                                                                                                                  
  'password' => 'password',                                                                                                                                        
  'database' => 'database_schema',                                                                                                                                    
  'prefix' => '',                                                                                                                                                     
  'encoding' => 'utf8',                                                                                                                                               
  'port' => ' /Applications/xampp/xamppfiles/var/mysql/mysql.sock',                                                                                                   
); 
```

我正在使用 XAMPP 1.7.3，我读到这个问题可能与 PDO 有关，但我不知道如何正确设置它，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:57:45.850

您应该在 php.ini 中启用 php_pdo_extension。该文件默认位于 `/Applications/XAMPP/etc/php.ini`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T07:29:14.180

我的是 Mac OS Yosemite，MAMP PHP 5.6.1，花了将近两天时间尝试所有可用的修复程序。最后它与 php.ini extension_dir 有关

旧值是'.../no-debug-non-zts-20121212'，它不在指定的路径中，所以我将路径更改为可用目录，如下所示......并且成功！

php.ini 位于 MAMP - /Applications/MAMP/bin/php/php5.6.1/conf （也可以使用“配置文件（php.ini）路径”下的 phpinfo() 找到）

php.ini 中的固定路径

```
; Directory in which the loadable extensions (modules) reside. 
```

extension_dir = "/Applications/MAMP/bin/php/php5.6.1/lib/php/extensions/no-debug-non-zts-20131226/"

# c++ - 实现 TreeModel 时 Gtk::TreeModel::iterator 的使用

> ID：12926440
> 
> 赞同：0
> 
> 时间：2012-10-17T02:58:46.083
> 
> 标签：c++, model-view-controller, gtk, gtkmm, gtktreeview

我正在尝试实现自己的 TreeModel 以在 TreeView 中使用。

我已经子类化`Gtk::TreeModel`并且目前正在尝试用我自己的实现来覆盖虚拟方法。

但我对它的基本知识有疑问。说，我们有

```
virtual bool iter_next_vfunc(const iterator &iter, iterator &iter_next) const; 
```

我应该读取`iter`变量的函数，以某种方式了解它指向的位置并基于此，`iter_next`在当前点旁边填充点。

但我不明白该怎么做。

什么是“索引”、“指针”或任何基于我能理解`iter`的指向的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:44:54.923

通过 gobj() 直接访问底层 GtkTreeIter 结构，并用相关数据填充它（'stamp' 在同一模型的所有迭代中应该是相同的）。（[参考](http://developer.gnome.org/gtk/2.24/GtkTreeModel.html#GtkTreeIter-struct)）

# spring - Maven没有下载，正确的版本jar

> ID：12926447
> 
> 赞同：1
> 
> 时间：2012-10-17T02:59:42.293
> 
> 标签：spring, maven-3, maven-dependency-plugin

我是 Maven 新手，遇到了一个问题。我的项目正在使用 maven 构建，但它下载了不同版本的 jar (Spring core 2.5.6.SEC03.jar)，尽管我在 POM.xml 中指定了 3.1.1 版本。

Maven 在下载 jar 时是否引用任何其他位置/配置文件？

我正在使用 Maven3，我的 Pom.XML 看起来像

```
<properties>
    <spring.version>3.1.1.RELEASE</spring.version>             
</properties>

<dependencies>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
         <version>${spring.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
         <version>${spring.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jms</artifactId>
         <version>${spring.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${spring.version}</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context-support</artifactId>
         <version>${spring.version}</version>
    </dependency>
    <dependency> 
```

它正确下载了 Spring Tx、JDBC、JMS，但我得到的是版本为“2.5.6 SEC03”的 Spring Aop、core、bean、context、web。这五个 jar 根本没有改变，即使我在 Pom 中升级/降级版本。

我不确定可能是什么原因，我已尝试删除存储库并再次下载。任何帮助都会很棒谢谢索尼娅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T12:11:21.593

我们也遇到过类似的问题。

尝试`mvn -Dverbose=true dependency:tree`查看哪些依赖项正在使用 Spring jar 版本 2.5.6 SEC03。然后删除这些依赖项或排除 Spring jar 版本 2.5.6 SEC03。

希望它能解决问题。

# spring - 在 Cloud Foundry 中找不到 MySQL 服务器

> ID：12926454
> 
> 赞同：0
> 
> 时间：2012-10-17T03:01:01.177
> 
> 标签：spring, cloud, vmware, cloud-foundry

我正在尝试在 Cloud Foundry 云上部署我的 spring 3 + tomcat 6 + mysql 5.5 应用程序。我能够使用 Cloudfoundry 的 STS 插件从 Eclipse 部署应用程序。现在我得到的问题是我的应用程序无法连接到数据库。我已经配置了一个 mysql 服务并启动了一个隧道。我使用隧道用户名/密码和 URL 连接到应用程序上下文文件中的数据库。

```
<Resource name="jdbc/myDB" auth="Container" type="javax.sql.DataSource"
           maxActive="10" maxIdle="3" maxWait="10000"
           username="xxx" password="xxx" driverClassName="com.mysql.jdbc.Driver"
           url="jdbc:mysql://127.0.0.1:10100/xxx?autoReconnect=true"/> 
```

我收到错误。

```
Could not get JDBC Connection; nested exception is org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Could not create connection to database server. Attempted reconnect 3 times. Giving up.) 
```

有人可以帮帮我吗。还让我知道如何在 Cloud Foundry DB 上上传我的本地 sql 数据库转储，因为我认为一旦我能够连接这将是另一个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:33:07.187

Spring 应用程序应该自动配置与绑定到应用程序的服务的 JDBC 连接。我建议您仔细阅读以下 wiki 页面；

[http://docs.cloudfoundry.com/frameworks/java/spring/spring.html#determining-whether-your-application-can-be-auto-configured](http://docs.cloudfoundry.com/frameworks/java/spring/spring.html#determining-whether-your-application-can-be-auto-configured)

至于外部连接服务，您可以使用 VMC 客户端隧道连接到 MySQL，然后使用 MySQL 加载 SQL 转储，这将在以下 wiki 页面中进行说明；

[http://docs.cloudfoundry.com/tools/vmc/caldecott.html](http://docs.cloudfoundry.com/tools/vmc/caldecott.html)

# java - (Android) 在非活动类中使用 SharedPreferences 写入/读取时出错

> ID：12926455
> 
> 赞同：0
> 
> 时间：2012-10-17T03:01:05.030
> 
> 标签：java, android, oop, sharedpreferences

您好，感谢您的阅读。

我正在尝试采用 OOP 方法来使用 SharedPreferences 在我正在开发的 android 应用程序中保存和检索数据。我相信下面的代码是正确的，因为当它直接用于非 OOP 庄园时，它可以在 java 类中工作。但是，在我创建的这个 SharedPref 类中，我在 Eclipse 中的 MODE_PRIVATE 出现错误，我不知道为什么。谢谢。

```
import android.content.Context;
import android.content.SharedPreferences;
import android.preference.PreferenceManager;

public class SharedPref {

    public static String File = "DPFile";

    public static void saveToSP(String key, String value) {
        SharedPreferences saveData = getSharedPreferences(File, MODE_PRIVATE);
        SharedPreferences.Editor editor = saveData.edit();
        editor.putString(key, value);
        editor.commit();
    }

    public static String getSavedData(String key) {
         SharedPreferences preferences = getSharedPreferences(File, MODE_PRIVATE);
         return preferences.getString(key, null);
    }
} 
```

此外，如果我扩展 Activity 类 getSharedPreferences 成为错误行和以下消息：

“无法从 ContextWrapper 类型对非静态方法 getSharedPreferences(String, int) 进行静态引用”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T03:06:10.537

解决此问题的最简单方法可能是将 Context 传递给您的两个方法，并使其看起来像这样：

```
public static void saveToSP(Context context, String key, String value) {
    SharedPreferences saveData = context.getSharedPreferences(File, Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = saveData.edit();
    editor.putString(key, value);
    editor.commit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:07:14.297

使用 Context.MODE_PRIVATE。它不是一个活动，所以你必须从上下文中检索它。

# objective-c - 子类实现自己的协议委托

> ID：12926457
> 
> 赞同：0
> 
> 时间：2012-10-17T03:01:09.637
> 
> 标签：objective-c, inheritance, objective-c-protocol

我是iOS新手，不知道这是否可能。

基本上我有两个班级父母和孩子。

Parent 有一个符合 ParentProtocol 的委托。但是，Child 中的委托不仅符合 ParentProtocol，还符合另一个 ChildProtocol。

那么是否可以做到以下几点？

```
@interface Parent {
  @property (nonatomic, unsafe_unretained) id<ParentProtocol> delegate;
}

@interface Child : Parent {
  @property (nonatomic, unsafe_unretained) id<ParentProtocol, ChildProtocol> delegate;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T03:42:30.663

是的，这是有效的代码。这相当于声明方法

```
- (id<ParentProtocol>)delegate;
- (void)setDelegate:(id<ParentProtocol>)delegate; 
```

在接口中并在接口中为相同的选择器（和）`Parent`声明方法`-delegate``-setDelegate``Child`

```
- (id<ParentProtocol, ChildProtocol>)delegate;
- (void)setDelegate:(id<ParentProtocol, ChildProtocol>)delegate; 
```

这是允许的（并且不会导致警告），因为`id<ParentProtocol>`and`id<ParentProtocol, ChildProtocol>`是兼容的类型。`Child`（这与在's 声明中声明`delegate`为 type的情况形成对比`NSArray *`。你会收到警告`Property type 'NSArray *' is incompatible with type 'id<ParentProtocol>' inherited from 'Parent'`。）

顺便说一句，值得注意的是，您可以通过编写来定义`ChildProtocol`继承自`ParentProtocol`

```
@protocol ParentProtocol <NSObject>
//....
@end 
```

和

```
@protocol ChildProtocol <ParentProtocol>
//....
@end 
```

反过来，这将允许您在`Child`

```
@property (nonatomic, unsafe_unretained) id<ChildProtocol>; 
```

而不是

```
@property (nonatomic, unsafe_unretained) id<ParentProtocol, ChildProtocol>; 
```

# android - Calculating distance using Linear acceleration android

> ID：12926459
> 
> 赞同：8
> 
> 时间：2012-10-17T03:01:16.207
> 
> 标签：android, accelerometer, android-sensors

> **Possible Duplicate:**
> [Android accelerometer accuracy (Inertial navigation)](https://stackoverflow.com/questions/7829097/android-accelerometer-accuracy-inertial-navigation)

I am using the following code to calculate the distance. `tnew` and `anew` are `arraylists` containing **timestamps** and **accelerations** respectively.

```
 double distance=0;
 double init_vel=0;
long time_prev=tnew.next();
   while(anew.hasNext())
   {
    float temp_acc=anew.next();
    long temp_time=tnew.next();

    interval=(temp_time-time_prev)/1000f;   //milliseconds to seconds
    double fin_vel=init_vel+(temp_acc*interval);
    distance+=(init_vel*interval)+0.5f*temp_acc*interval*interval;

    init_vel=fin_vel;
    time_prev=temp_time;
   } 
```

Is there any logical mistake in the code? Because I am getting values much smaller than the actual length.

Output of `LogCat` :

```
--------- beginning of /dev/log/system

--------- beginning of /dev/log/main

V/PhonetapeActivity( 8842): Sensor Listener Registered

V/PhonetapeActivity( 8842): Sensor Unregistered

V/PhonetapeActivity( 8842): No. of Iterations : 49

V/PhonetapeActivity( 8842): Value of acceleration : 3.5762787E-7

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665585965

V/PhonetapeActivity( 8842): Value of acceleration : -0.15275347

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665586017

V/PhonetapeActivity( 8842): Value of acceleration : 0.15585232

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665586077

V/PhonetapeActivity( 8842): Value of acceleration : 1.075269

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665586138

V/PhonetapeActivity( 8842): Value of acceleration : 3.6529458

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665586199

V/PhonetapeActivity( 8842): Value of acceleration : 9.645137

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665586257

V/PhonetapeActivity( 8842): Value of acceleration : 17.022213

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665586316

V/PhonetapeActivity( 8842): Value of acceleration : 9.721476

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665586376

V/PhonetapeActivity( 8842): Value of acceleration : -18.729362

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665586437

V/PhonetapeActivity( 8842): Value of acceleration : -22.868385

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665586497

V/PhonetapeActivity( 8842): Value of acceleration : -16.777517

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665586557

V/PhonetapeActivity( 8842): Value of acceleration : -7.0492268

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665586617

V/PhonetapeActivity( 8842): Value of acceleration : -3.860828

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665586677

V/PhonetapeActivity( 8842): Value of acceleration : 1.7244682

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665586737

V/PhonetapeActivity( 8842): Value of acceleration : 5.0734243

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665586797

V/PhonetapeActivity( 8842): Value of acceleration : 6.4193974

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665586857

V/PhonetapeActivity( 8842): Value of acceleration : 2.739545

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665586917

V/PhonetapeActivity( 8842): Value of acceleration : 5.559997

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665586977

V/PhonetapeActivity( 8842): Value of acceleration : 4.2290807

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665587037

V/PhonetapeActivity( 8842): Value of acceleration : 5.0012918

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665587097

V/PhonetapeActivity( 8842): Value of acceleration : 5.9317436

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665587157

V/PhonetapeActivity( 8842): Value of acceleration : 5.20226

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665587217

V/PhonetapeActivity( 8842): Value of acceleration : 7.1381693

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665587276

V/PhonetapeActivity( 8842): Value of acceleration : 7.6460614

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665587337

V/PhonetapeActivity( 8842): Value of acceleration : 5.566694

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665587396

V/PhonetapeActivity( 8842): Value of acceleration : 3.355657

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665587457

V/PhonetapeActivity( 8842): Value of acceleration : 1.8876343

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665587517

V/PhonetapeActivity( 8842): Value of acceleration : -0.8815446

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665587577

V/PhonetapeActivity( 8842): Value of acceleration : -0.9595623

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665587646

V/PhonetapeActivity( 8842): Value of acceleration : -4.233544

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665587697

V/PhonetapeActivity( 8842): Value of acceleration : -1.9580669

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665587765

V/PhonetapeActivity( 8842): Value of acceleration : -1.4569702

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665587822

V/PhonetapeActivity( 8842): Value of acceleration : -0.6058636

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665587876

V/PhonetapeActivity( 8842): Value of acceleration : -0.21207428

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665587937

V/PhonetapeActivity( 8842): Value of acceleration : 0.5068469

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665587997

V/PhonetapeActivity( 8842): Value of acceleration : 5.614555

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665588057

V/PhonetapeActivity( 8842): Value of acceleration : -4.5297813

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665588122

V/PhonetapeActivity( 8842): Value of acceleration : -0.29250193

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665588178

V/PhonetapeActivity( 8842): Value of acceleration : -2.4922757

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665588237

V/PhonetapeActivity( 8842): Value of acceleration : -1.7652755

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665588297

V/PhonetapeActivity( 8842): Value of acceleration : -2.3279366

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665588357

V/PhonetapeActivity( 8842): Value of acceleration : -1.8127642

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665588419

V/PhonetapeActivity( 8842): Value of acceleration : -1.956768

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665588477

V/PhonetapeActivity( 8842): Value of acceleration : -0.8337221

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665588537

V/PhonetapeActivity( 8842): Value of acceleration : -0.24841261

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665588601

V/PhonetapeActivity( 8842): Value of acceleration : 0.23997736

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665588657

V/PhonetapeActivity( 8842): Value of acceleration : 0.14441395

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665588723

V/PhonetapeActivity( 8842): Value of acceleration : 0.23150349

V/PhonetapeActivity( 8842): Value of timestamp(milli) : 1350665588777

V/PhonetapeActivity( 8842):  1st while loop ended

V/PhonetapeActivity( 8842): 2nd while loop ended

V/PhonetapeActivity( 8842): Avg value : 0.4006781578063965

V/PhonetapeActivity( 8842): Max Value : 17.022213

V/PhonetapeActivity( 8842): Min Value : -22.868385

V/PhonetapeActivity( 8842): Standard Deviation : -0.0031174493

V/PhonetapeActivity( 8842): 3rd while loop started

V/PhonetapeActivity( 8842): startpos=3 endpos=8

V/PhonetapeActivity( 8842): acceleration=0.1558523178100586 interval=0.061000000685453415

V/PhonetapeActivity( 8842): distance=5.799264876044276E-4

V/PhonetapeActivity( 8842): next init velocity=0.009506991493243078

V/PhonetapeActivity( 8842): acceleration=1.0752689838409424 interval=0.061000000685453415

V/PhonetapeActivity( 8842): distance=0.005160928954000712

V/PhonetapeActivity( 8842): next init velocity=0.07509840024458736

V/PhonetapeActivity( 8842): acceleration=3.6529457569122314 interval=0.057999998331069946

V/PhonetapeActivity( 8842): distance=0.021805144861910285

V/PhonetapeActivity( 8842): next init velocity=0.2869692480489858

V/PhonetapeActivity( 8842): acceleration=9.645136833190918 interval=0.05900000035762787

V/PhonetapeActivity( 8842): distance=0.07231105232279186

V/PhonetapeActivity( 8842): next init velocity=0.8560323246566197

V/PhonetapeActivity( 8842): acceleration=17.022212982177734 interval=0.05999999865889549

V/PhonetapeActivity( 8842): distance=0.18495295465057213

V/PhonetapeActivity( 8842): next init velocity=1.8773650807587172

V/PhonetapeActivity( 8842): 3rd while loop ended

V/PhonetapeActivity( 8842): final distance=0.18495295465057213

V/PhonetapeActivity( 8842): values of acceleration, timestamp, distance, start_time and calibrating reset 
```

If you observe the logcat, first it iterates through 49 values of acceleration and their respective time stamps in milliseconds. Then there is a avg, sum, max, min etc.
Then if you see there is a `startpos=3` and `endpos=8`. This is the iteration number range, I am using to calculate the distance .i.e I am using the values of acceleration and timestamp only from iteration 3 to 8\.
This is because, I detect the start of distance calculation from a **rise in acceleration** to a **sudden change** in the opposite direction. You can see that the values from 3-8 fit into the logic. From 3 there is a considerable rise in acceleration and after 8 there is a sudden decrease.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T03:04:15.283

加速度计非常精确，但不擅长航位推算。陀螺仪擅长于此，但随着时间的推移它们会“漂移”。“**[传感器融合](http://www.youtube.com/watch?v=C7JQ7Rpwn2k)**”是串联使用加速度/陀螺仪数据来纠正对方不足的过程。AFAIR，Galaxy Ace 上未启用“传感器融合”。`LINEAR_ACCELERATION`只不过是`ACCELEROMETER`-重力分量。在没有陀螺仪的设备上，根据定义，融合是不可能的，它需要加速度+陀螺仪。

加速度计数据包含 9.8 的重力分量。这可以通过简单地确定加速度计数据的 2 个连续样本之间的差异来过滤掉。这给了我们`LINEAR_ACCELERATION`数据。

检查一下实际的内部代码：
**[frameworks/base/services/sensorservice/LinearAccelerationSensor.cpp](https://android.googlesource.com/platform/frameworks/base/+/671a6ff4be11b3e2d8eb017e0c7a78e6133fb2b8/services/sensorservice/LinearAccelerationSensor.cpp)**上述文件中感兴趣
的函数。`LinearAccelerationSensor::process()`

此外，上述链接和视频所讨论的过滤/平均等基本操作也需要在您的应用程序中获得的加速度数据上执行。以这种方式获得的处理值将比原始值更好（尽管不如您的设备上存在传感器融合所获得的值）。然后可以使用这些来更准确地计算速度和位置。

也就是说，每秒 16 个样本（@poll-rate=60ms）本身就相对不准确。您可能想尝试注册`sensorEventListner`using`SENSOR_DELAY_FASTEST`以查看您可以在设备上获得的最大样本数。

另请注意，手机上的加速度计被限制在某个 MAX 灵敏度（通常为 -/​​+ 2/4/8 G 范围）。虽然正常的步行/跑步可能会在这些范围内运行，但突然的加速冲动（例如在自行车上）肯定会被限制在 MAX 上，并且您将在航位推算中失去同步。这可以通过注意非常接近 -/+MAX 的样本数来检查。-/+MAX 处的大量样本意味着您肯定会失去与实际位置的同步。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T20:24:18.623

我要检查的第一件事是您的时间间隔。我不确定它是否被正确转换。时间戳如下所示：

> public long timestamp 事件发生的时间，以纳秒为单位

所以在文档中，我们看到转换是通过除以 10 亿而不是 1000 来完成的。

```
float dT = (event.timestamp - timestamp) / 1000000000.0f;
timestamp = event.timestamp; 
```

也就是说，我认为更改只会缩小值，但要计算真实世界的距离，您需要注意您的单位。

接下来，在阅读这些内容时，人们总是在讨论您需要如何知道每次读数的初始位置，以便对现实世界的线性测量有意义。我没有看到您跟踪您之前的加速度，这将使每个后续测量的积分基于瞬时加速度或加速度的变化，而不是完全加速度。

尝试这样的事情：

```
final int X = 0;
double distance[];
double init_vel[];
double total_Accel[];

void dblIntegrate(SensorEvent event){
    double data[] = new double[3];
    for(int i = 0; i < event.lenght; i++){
        data[i] = (double)event[i];
        total_Accel[i] += data[i];
        vel[i] = init_vel[i] + (total_Accel[i] * dt);
        init_vel[i] = vel[i];

        ....rinse and repeate to get distance
        (not using the accel data of course)
    }
} 
```

我意识到您理解这一点，但对于其他正在阅读此内容的人 => 请记住，您不能在每次调用 dblIntegrate() 时重新实例化计数变量 total_Accel 或 init_vel。

如果你做得对，你应该看到 total_Accel 从零到某个最大值，然后在每次移动设备时回到零。这意味着每次设备向任何方向移动时，您都在添加等量的正加速度和负加速度。

我相信这是最难正确理解的加速度属性，因为要让设备从静止状态变为静止状态，您的 total_acceleration 将从零到最大 pos/neg 值回到零到相反的最大值，然后回到零。

> 例如，如果我将手机背面放在桌子上，底部朝向我的胸部，向右移动一米，你会得到这样的结果：
> 
> total_Accel = 0.0（0 米）
> 
> 总加速度 = 0.5
> 
> total_Accel = 1.0
> 
> total_Accel = 1.5（约 0.25 米）
> 
> total_Accel = 1.0
> 
> 总加速度 = 0.5
> 
> total_Accel = 0.0（如果加速度完全分布，0.5 米）
> 
> total_Accel = -0.5
> 
> total_Accel = -1.0
> 
> total_Accel = -1.5（约 0.75 米）
> 
> total_Accel = -1.0
> 
> total_Accel = -0.5
> 
> total_Accel = 0.0（1 米）

在示例中，您可以开始了解为什么简单地对加速度变化进行双重积分不会给您带来速度/位移的真正变化。

无论如何我希望如此，因为写这篇文章比我想象的要长得多！:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T15:54:24.547

这是对您问题的回答：

> 为什么我需要跟踪我之前的加速度。onSensorChanged(MotionEvent event){} 在加速度发生变化时调用。它提供了新的加速度，而不是加速度的变化。

简短的回答是，在不包括初始条件（您之前的总加速度）的情况下整合读数，您最终将得到一个不包括所有信息的值。另外，你走得越久，你的价值就越远离真实价值，因为你失去了越来越多的信息。

我不认为你想要解释加速度、速度和位移（这不是那个地方）所以也许我可以通过扩展我上面包含的例子来展示它。

一部手机靠在桌子上，底部朝向我的胸部，它向右移动任意距离并停止。如果你查看你的数据，你会得到类似的东西。当然，实际数字会有很大差异，但它们的符号会是相同的，比例会是一样的，但会像你预期的那样开始小于它们的峰值（除非你用枪射在墙上或其他什么地方） .:

时间…………加速度读数…………总加速度…………总速度

00 毫秒............. 0.0............0.0............ …………0.000……

10 毫秒............ 0.5............ 0.5............ ............0.005 米/秒..

20 毫秒............ 0.5............ 1.0............ ............0.015 米/秒..

30ms............ 0.5............1.5............ ............0.030 米/秒..

40ms............ -0.5............1.0............ ............0.040 米/秒..

50ms............ -0.5............0.5............ ............0.045 米/秒..

60ms............ -0.5............0.0............ ............0.045 米/秒..

70ms............ -0.5............-0.5............ ............0.040 米/秒..

80ms............ -0.5............ -1.0............ ............0.030 米/秒..

90ms............ -0.5............ -1.5............ ............0.015 米/秒..

100ms............ 0.5............-1.0............ ............0.005 米/秒..

110ms............ 0.5............-0.5............ ............0.000 米/秒..

120 毫秒............ 0.5......................0.0............ ............0.000 米/秒..

您可以看到，如果您不跟踪总加速度，您的总速度将是上面标记为 Total Accel 的列。这意味着您的手机将始终沿 x 轴的正方向移动，但您的速度将在运动的后半部分为负（向后移动）。

我希望这能证明我的情况，即使它不能解释加速度或加速度计背后的机制。

如果您想了解加速度计的工作原理，它们是 MEMS 类型的传感器，我认为它们使用带有加重端的悬挂悬臂梁来测量加速度的力。

# java - Visually Display progress of algorithm

> ID：12926463
> 
> 赞同：4
> 
> 时间：2012-10-17T03:02:11.497
> 
> 标签：java, processing

I'm trying to visually show some algorithms in Processing (but really, this question applies to any language with a GUI framework). My question is, a program with a draw loop that updates based on frames per second, how do you execute an algorithm and update a visual display of it?

An example is if I display an array of random values as a bar graph. I want to sort this array using different sorts (bubble sort, quicksort, merge sort). How do I display each step of the algorithm by showing each swap in a new animation frame?

Or another example is path finding. I want to show the steps of BFS, DFS, A*, and not only the final solution path (all the pats searched).

Examples of the visual affect I'm looking for can be found on Wikipedia articles on these algorithms:

[http://en.wikipedia.org/wiki/Quicksort](http://en.wikipedia.org/wiki/Quicksort)

[http://en.wikipedia.org/wiki/File:Astar_progress_animation.gif](http://en.wikipedia.org/wiki/File:Astar_progress_animation.gif)

The issue is by the time the algorithm finishes, the draw loop has only looped once, so the user doesn't see the progress.

The only thing I can think of is to have a "State" object which contains the relevant values for each step of the algorithm. When it finishes, loop through each state and visually show it. Is there a better way?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:49:55.520

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

/**
 * A panel that can show a demonstration of Quicksort in action. The items to be
 * sorted are the hues of a set of vertical bars. When sorted, the bars form a
 * spectrum from red to violet. Initially, the bars are sorted. There is a Start
 * button. When the user clicks this button, the order of the bars is randomized
 * and then Quicksort is applied. During the sort, a black bar marks the
 * location of an empty space from which the "pivot" element has been removed.
 * The user can abort the sort by clicking the button again.
 * <p>
 * The main point of this program is to demonstrate threads, with very simple
 * inter-thread communication. The recursive Quicksort algorithm is run in a
 * separate thread. The abort operation is implemented by setting the value of a
 * volatile variable that is checked periodically by the thread. When the user
 * aborts the sort before it finishes, the value of the variable changes; the
 * thread sees the change and exits.
 * <p>
 * This class contains a main() routine that allows the demo to be run as a
 * stand-alone application.
 */
public class QuicksortThreadDemo extends JPanel {

    /**
     * This main routine just shows a panel of type QuicksortThreadDemo.
     */
    public static void main(String[] args) {
        JFrame window = new JFrame("Demo: Recursion in a Thread");
        QuicksortThreadDemo content = new QuicksortThreadDemo();
        window.setContentPane(content);
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        window.pack();
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        window.setLocation((screenSize.width - window.getWidth()) / 2,
                (screenSize.height - window.getHeight()) / 2);
        window.setVisible(true);
    }

    private final static int ARRAY_SIZE = 150; // The number of colored bars.

    private int[] hue = new int[ARRAY_SIZE]; // The array that will be sorted.
    private Color[] palette = new Color[ARRAY_SIZE]; // Colors in spectral
                                                        // order.
    private Display display; // The panel that displays the colored bars.
    private JButton startButton; // The button that starts and stops the demo.

    private Runner runner; // The thread that runs the recursion.

    private volatile boolean running; // Set to true while recursion is running;
                                        // This is set to true as a signal to
                                        // the
                                        // thread to abort.

    /**
     * When the user aborts the recursion before it finishes, an exception of
     * this type is thrown to end the recursion cleanly.
     */
    private class ThreadTerminationException extends RuntimeException {
    }

    /**
     * A subpanel of type Display shows the colored bars that are being sorted.
     * The current pivot, if any, is shown in black. A 3-pixel gray border is
     * left around the bars.
     */
    private class Display extends JPanel {
        Display() {
            setPreferredSize(new Dimension(606, 206));
            setBackground(Color.GRAY);
        }

        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            double barWidth = (double) (getWidth() - 6) / hue.length;
            int h = getHeight() - 6;
            for (int i = 0; i < hue.length; i++) {
                int x1 = 3 + (int) (i * barWidth + 0.49);
                int x2 = 3 + (int) ((i + 1) * barWidth + 0.49);
                int w = x2 - x1;
                if (hue[i] == -1)
                    g.setColor(Color.BLACK);
                else
                    g.setColor(palette[hue[i]]);
                g.fillRect(x1, 3, w, h);
            }
        }
    }

    /**
     * The constructor sets up the panel, containing the Display and the Start
     * button below it.
     */
    public QuicksortThreadDemo() {
        for (int i = 0; i < ARRAY_SIZE; i++) {
            palette[i] = Color.getHSBColor((i * 230) / (ARRAY_SIZE * 255.0F),
                    1, 1);
            hue[i] = i;
        }
        setLayout(new BorderLayout());
        display = new Display();
        add(display, BorderLayout.CENTER);
        startButton = new JButton("Start");
        JPanel bottom = new JPanel();
        bottom.add(startButton);
        bottom.setBackground(Color.WHITE);
        add(bottom, BorderLayout.SOUTH);
        startButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                if (running)
                    stop();
                else
                    start();
            }
        });
    }

    /**
     * This method is called when the user clicks the Start button, while no
     * thread is running. It starts a new thread and sets the signaling
     * variable, running, to true; Also changes the text on the Start button to
     * "Finish".
     */
    private void start() {
        startButton.setText("Finish");
        runner = new Runner();
        running = true; // Set the signal before starting the thread!
        runner.start();
    }

    /**
     * This method is called when the user clicks the button while a thread is
     * running. A signal is sent to the thread to terminate, by setting the
     * value of the signaling variable, running, to false.
     */
    private void stop() {

        /*
         * Set the value of the signaling variable to false as a signal to the
         * thread to terminate.
         */

        running = false;

        /*
         * Wake the thread, in case it is sleeping, to get a more immediate
         * reaction to the signal.
         */

        runner.interrupt();

        /*
         * Wait for the thread to stop before setting runner = null. One second
         * should be plenty of time for this to happen, but in case something
         * goes wrong, it's better not to
         */

        try {
            runner.join(1000); // Wait for thread to stop. One second should be
                                // plenty of time.
        } catch (InterruptedException e) {
        }

        runner = null;
    }

    /**
     * This method is called frequently by the thread that is running the
     * recursion, in order to insert delays. It calls the repaint() method of
     * the display to allow the user to see what is going on; the delay will
     * give the system a chance to actually update the display. Since this
     * method is called regularly while the recursion is in progress, it is also
     * used as a convenient place to check the value of the signaling variable,
     * running. If the value of running has been set to false, this method
     * throws an exception of type ThreadTerminatedException. This exception
     * will cause all active levels of the recursion to be terminated. It is
     * caught in the run() method of the thread.
     * 
     * @param millis
     *            The number of milliseconds to sleep.
     */
    private void delay(int millis) {
        if (!running)
            throw new ThreadTerminationException();
        display.repaint();
        try {
            Thread.sleep(millis);
        } catch (InterruptedException e) {
        }
        if (!running)
            throw new ThreadTerminationException();
    }

    /**
     * The basic non-recursive QuickSortStep algorithm, which uses hue[lo] as a
     * "pivot" and rearranges elements of the hue array from positions lo
     * through hi so that positions the pivot value is in its correct location,
     * with smaller items to the left and bigger items to the right. The
     * position of the pivot is returned. In this version, we conceptually
     * remove the pivot from the array, leaving an empty space. The space is
     * marked by a -1, and it moves around as the algorithm proceeds. It is
     * shown as a black bar in the display. Every time a change is made, the
     * delay() method is called to insert a 1/10 second delay to let the user
     * see the change.
     */
    private int quickSortStep(int lo, int hi) {
        int pivot = hue[lo]; // Save pivot item.
        hue[lo] = -1; // Mark location lo as empty.
        delay(100);
        while (true) {
            while (hi > lo && hue[hi] > pivot)
                hi--;
            if (hi == lo)
                break;
            hue[lo] = hue[hi]; // Move hue[hi] into empty space.
            hue[hi] = -1; // Mark location hi as empty.
            delay(100);
            while (lo < hi && hue[lo] < pivot)
                lo++;
            if (hi == lo)
                break;
            hue[hi] = hue[lo]; // Move hue[lo] into empty space.
            hue[lo] = -1; // Mark location lo as empty.
            delay(100);
        }
        hue[lo] = pivot; // Move pivot item into the empty space.
        delay(100);
        return lo;
    }

    /**
     * The recursive quickSort algorithm, for sorting the hue array from
     * positions lo through hi into increasing order. Most of the actual work is
     * done in quickSortStep().
     */
    private void quickSort(int lo, int hi) {
        if (hi <= lo)
            return;
        int mid = quickSortStep(lo, hi);
        quickSort(lo, mid - 1);
        quickSort(mid + 1, hi);
    }

    /**
     * This class defines the treads that run the recursive QuickSort algorithm.
     * The thread begins by randomizing the array. It then calls quickSort() to
     * sort the entire array. If quickSort() is aborted by a
     * ThreadTerminationExcpetion, which would be caused by the user clicking
     * the Finish button, then the thread will restore the array to sorted order
     * before terminating, so that whether or not the quickSort is aborted, the
     * array ends up sorted.
     */
    private class Runner extends Thread {
        public void run() {
            try {
                for (int i = hue.length - 1; i > 0; i--) { // Randomize array.
                    int r = (int) ((i + 1) * Math.random());
                    int temp = hue[r];
                    hue[r] = hue[i];
                    hue[i] = temp;
                }
                delay(1000); // Wait one second before starting the sort.
                quickSort(0, hue.length - 1); // Sort the whole array.
            } catch (ThreadTerminationException e) { // User aborted quickSort.
                for (int i = 0; i < hue.length; i++)
                    hue[i] = i;
            } finally {// Make sure running is false and button label is
                        // correct.
                running = false;
                startButton.setText("Start");
                display.repaint();
            }
        }
    }

} // end QuicksortThreadDemo 
```

`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:10:08.850

您可以采取以下两种方法：

重写你的算法，以便它可以用一个变量递增。然后在draw中增加“循环”的每次迭代。这是某人在处理中尝试这种方法的示例。

[http://www.processing.org/discourse/alpha/board_Programs_action_display_num_1059766998.html](http://www.processing.org/discourse/alpha/board_Programs_action_display_num_1059766998.html)

写入屏幕外缓冲区并保存循环的每一帧/迭代，然后再显示它们。我已经离开了上面示例中的冒泡排序算法和每帧绘制的方法，因此您可以看到我如何修改结构以使用缓冲区。

```
int[] myArray;
PGraphics pg;
ArrayList<PImage> frameBufferList;

void setup() {
 size(400, 400);
 frameRate(15);
 frameBufferList = new ArrayList<PImage>();
 myArray = randomArray(20);
 bubbleSortSaveFrame(myArray);
}

void draw() {
  background(127);
  image(frameBufferList.get(frameCount % frameBufferList.size()), 0, 0);
}

int[] randomArray(int numOfElements) {
  int[] returnArray = new int[numOfElements];
  for (int i = 0; i < returnArray.length; i++) {
    returnArray[i] = floor(random(0, height));
  }
  return returnArray;
}

void displayArray(int[] arrToDisplay) {
  float step = float(width) / float(arrToDisplay.length);
  for (int i = 0; i < arrToDisplay.length; i++) {
    rectMode(CORNERS);
    rect(i*step, height, (i+1)*step, height-arrToDisplay[i]);
  }
}

void displayArrayBuffer(int[] arrToDisplay) {
  pg = createGraphics(width, height, P2D); // setup buffer
  pg.beginDraw(); // start buffer
  pg.background(127);  
  float step = float(width) / float(arrToDisplay.length);
  for (int i = 0; i < arrToDisplay.length; i++) {
    pg.rectMode(CORNERS);
    pg.rect(i*step, height, (i+1)*step, height-arrToDisplay[i]);
  }
  pg.endDraw(); // end buffer
  frameBufferList.add(pg);
}

void bubbleSort(int array[]) 
{ 
  int i, j; 
  boolean sorted = false;  
  // while the array isn't sorted 
  while (!sorted) { 
    sorted = true; 
    // loop through array 
    for (i=0;i<array.length-1;i++) { 
     if (array[i] > array[i+1]) { 
       // swap values 
       j = array[i]; 
       array[i] = array[i+1]; 
       array[i+1] = j; 
       //println(array); 
       // trigger's been hit, array isn't sorted. 
       sorted = false; 
     } 
    } 
  } 
} 

void bubbleSortSaveFrame(int array[]) 
{ 
  int i, j; 
  boolean sorted = false; 
  // while the array isn't sorted 
  while (!sorted) { 
    sorted = true; 
    // loop through array 
    for (i=0;i<array.length-1;i++) { 
             displayArrayBuffer(array); // save the frame
     if (array[i] > array[i+1]) { 
       // swap values 
       j = array[i]; 
       array[i] = array[i+1]; 
       array[i+1] = j; 
       //println(array); 
       // trigger's been hit, array isn't sorted. 
       sorted = false; 
     } 
    } 
  }
} 
```

注意：通常您每帧使用一个缓冲区，在这种情况下，我们为每个要保存的图像创建一个缓冲区，因此如果您创建数千个图像，您可能会耗尽内存。有没有人有另一种解决方案来使用 PGraphics / buffer 而不会受到内存影响？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T03:20:12.453

我认为一种方法（但可能不是最好的方法）是为单独的步骤编写代码，然后使用 sikuli 或其他一些 GUI 脚本来自动输出。

或者干脆在 MATLAB 脚本中编写代码，然后使用 + 和 - 按钮查看下一次迭代。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T05:24:31.037

您的问题没有一般性答案（gr8 question btw）。这取决于算法。让我们以冒泡排序为例。该算法在完成之前具有有限数量的步骤（即，您可以假设它是最坏情况下的性能）。

**从维基百科窃取：**

```
 procedure bubbleSort( A : list of sortable items )
     repeat     
       swapped = false
       for i = 1 to length(A) - 1 inclusive do:
         /* if this pair is out of order */
         if A[i-1] > A[i] then
           /* swap them and remember something changed */
           swap( A[i-1], A[i] )
           swapped = true
         end if
       end for
     until not swapped
 end procedure 
```

您知道（在最坏的情况下）**重复**循环有 n 个循环，**for**循环有n 个循环（n 平方复杂度）。for 中的循环很快，您不必为每个循环更新状态栏（用户不会看到进度，甚至 GUI 也不够快，无法更新 for 中的所有状态）。因此，您的进度步骤将是 n/100。在每个 while 循环结束时，按该进度更新状态栏，并在**重复**完成后，更新为 100%。
您将不得不分析每种算法并为每种算法找到类似的解决方案。正如我所说，没有通用的魔术解决方案。

# jquery - jquery中的缓存与链式选择器？

> ID：12926467
> 
> 赞同：3
> 
> 时间：2012-10-17T03:02:34.017
> 
> 标签：jquery, performance, caching, jquery-selectors, chaining

我想知道使用缓存选择器和使用链式选择器之间是否存在性能差异？

如果我理解正确，则链接有效，因为每个函数都返回 jquery 对象，该对象与缓存选择器中包含的内容完全相同。因此，在下面的两个示例中，性能方面不会有差异吗？

* * *

**缓存选择器**

```
$(function(){

    $.on('click', '.disabled', function(){
        $toggle = $(this);
        $toggle.attr('title', 'Object Enabled');
        $toggle.toggleClass('disabled enabled');
        $toggle.html('Enabled');
    });
}); 
```

* * *

**链式选择器**

```
$(function(){

    $.on('click', '.disabled', function(){
        $(this)
            .attr('title', 'Object Enabled')
            .toggleClass('disabled enabled')
            .html('Enabled');
    });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T03:05:50.787

你可以在这里看到

[http://jsperf.com/jquery-chaining](http://jsperf.com/jquery-chaining)

差异可以忽略不计。

链式

```
$('#theDiv').addClass('test').removeClass('test');

59,874 Operations / Second 
```

单独调用（缓存）

```
var d = $('#theDiv');
d.addClass('test');
d.removeClass('test');

62,021 Operations / Second 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T03:04:38.437

如果有任何差异，它将具有**最小的差异**，并且取决于正在执行的浏览器。

*“我们应该忘记小的效率，说大约 97% 的时间：**过早优化是万恶之源**”*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T03:09:02.700

它认为两者之间的性能没有太大差异..

检查这个

[jsperf 性能](http://jsperf.com/jquery-chaining-vs-caching)

# php - Working with object Zend\View\Helper\Url, from the controller

> ID：12926468
> 
> 赞同：7
> 
> 时间：2012-10-17T03:02:42.353
> 
> 标签：php, zend-framework2

sorry for my bad english, i'm from Russia

began to learn zend framework 2... Sample in controller, readAction():

```
use Zend\View\Helper\Url;

....

$helperUrl = new Url();
$address  = $helperUrl('news', array('action' => 'index')); 
```

**As a result, thrown exception:**

```
Zend\View\Exception\RuntimeException

File:
    W:\home\zf2\vendor\zendframework\
       zendframework\library\Zend\View\Helper\Url.php:80
Message:
    No RouteStackInterface instance provided 
```

Please, help me. what I'm doing wrong?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-17T07:18:14.473

你不能在控制器中使用 viewhelper - 你也不需要。还有一个`Url`控制器插件几乎可以做到这一点。

控制器插件是可调用的类，你可以像这样使用它们（控制器的动作上下文）：

```
$url = $this->url()->fromRoute($route, $params, $options, $reuseMatchesParams); 
```

所有参数都是可选的。有关更多信息，请检查代码`Zend\Mvc\Controller\Plugin\Url`或阅读[文档](http://zf2.readthedocs.org/en/latest/modules/zend.mvc.plugins.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T03:40:52.287

帮助程序和插件虽然可以直接实例化，但通常不应该，因为它们通常由 PluginManager 管理。PluginManager 是 ServiceManager 的子类，因此，它提供了很多关于插件创建的功能，包括标准协作者的注入、使用工厂提供依赖注入等等。

在 Url 助手的情况下，有一个工厂确保它注入了配置的路由器 - 如果您直接实例化它，您将不会拥有它，并且它无法完成它的工作，正如您所注意到的！

正如 Daniel 指出的那样，您还需要确保获得适合上下文的插件。如果您在控制器中，请检查是否有控制器插件可以为您完成这项工作。Daniel 在他的帖子中链接到文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T09:37:19.043

我知道已经有一个公认的答案，但我仍然会发布这个以减轻像我这样的初学者的负担。

我使用 smarty 作为视图渲染器，而在 smarty 中，您不能在视图中使用 php 代码，因此，一切都必须在控制器中完成，将它们分配到变量中，然后将它们传递给视图。

你可以使用这个：

```
$url = $this->url()->fromRoute('route',array('name'=>'route-name')); 
```

如果你按照zend 2的教程，它会是这样的：

```
$url = $this->url()->fromRoute('album',array('action'=>'add'));
$url = $this->url()->fromRoute('album',array('action'=>'edit'));
$url = $this->url()->fromRoute('album',array('action'=>'delete')); 
```

这将具有以下值：

```
/zf2/index.php/album/add
/zf2/index.php/album/edit
/zf2/index.php/album/delete 
```

如您所见，您需要将服务器名称添加到其中，您可以在生成路由 url 之前使用这些来完成：

```
$url = $uri = $this->getRequest()->getUri();
$url = sprintf('%s://%s', $uri->getScheme(), $uri->getHost()); 
```

总体而言，代码片段应如下所示：

```
$url = $uri = $this->getRequest()->getUri();
$url = sprintf('%s://%s', $uri->getScheme(), $uri->getHost());
$url .= $this->url()->fromRoute('album',array('action'=>'add')); 
```

生产：

```
http://yourservername/zf2/index.php/album/add 
```

希望这可以帮助初学者 zf2 用户

# c++ - C++ Error with Class pointers as a data member in another class

> ID：12926470
> 
> 赞同：1
> 
> 时间：2012-10-17T03:02:51.777
> 
> 标签：c++, class, pointers

I keep getting weird C4430 and C2143 errors when I try to compile my code. My class has data members which point to different classes and the errors are saying that it is expecting a ";" in between the class name and "*". Here's a summary of my class:

```
#include "CarStack.h"
#include "CarQueue.h"    
#include "CarDeque.h"
#include "base_class.h"

class my_class : public base_class
{
public:
    //Member Functions
private:
    //Other data members
    CarStack* car_stack;
    CarQueue* car_queue;
    CarDeque* car_deque;
}; 
```

The errors are coming up with those class pointers. Why would I get errors like this? Is there something important I'm missing?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T04:16:47.250

如果基类或任何汽车类调用此列表中的其中之一，您将获得循环依赖。有很多解决方案。

我发现最好的解决方案：从我最近的 opengl 项目“Include.h”中复制粘贴包含：

```
#ifndef _INCLUDE_H
#define _INCLUDE_H

#include <Windows.h>
#include "SDL.h"
#include "gl/gl.h"
#incldue "gl/glu.h"

#include "Most Derived Classes"
#include "Most Derived Classes"

#endif 
```

然后，只需`#include "Include.h"`在项目的主驱动程序文件的开头使用。然后，仅包含派生类的基本标头。

我认为这是一个更好的解决方案，一堆前向声明，IMO。

# symfony1 - Symfony How to implement Models

> ID：12926471
> 
> 赞同：0
> 
> 时间：2012-10-17T03:02:52.117
> 
> 标签：symfony1

I am using Symfony 1.4 and already created schema.yml, 3 of them, and created the database.yml with multiple connection.

And executed the build --model of symfony and created classes one of them is "Schedule" which came from the schema having columns: id, name, description....

How do use that class to use its method or function, the setter and getters? Books says that there are setters and getter if a model was generated.

How do I retrieve data with filters?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:10:18.443

你的问题有点含糊。但是从您的模型中，您可以执行以下操作：

**创建条目：**

```
$schedule = new Schedule();
$schedule->setName('foo');
$schedule->setDescription('bar');
$schedule->save(); 
```

**查找所有条目**

```
$schedules = Doctrine_Core::getTable('Schedule')->findAll(); 
```

**检索一项**（如果我们假设`Schedule`存在 id 为 1 的一项）

```
$schedule = Doctrine_Core::getTable('Schedule')->find(1);
$schedule = Doctrine_Core::getTable('Schedule')->findOneByName('foo'); 
```

**访问模型内​​的字段**

```
$name        = $schedule->getName();
$description = $schedule->getDescription(); 
```

* * *

**编辑：**

**自定义吸气剂**，在`ScheduleTable.class.php`：

```
public function findByStatusAndRangeTime($status, $start, $end)
{
  $q = $this->createQuery('s');
  $q->where('s.status = ? AND s.time_start < ? AND s.time_end > ?', array($status, $start, $end));

  return $q->execute();
} 
```

然后，您可以使用以下方法调用它：

```
$schedule = Doctrine_Core::getTable('Schedule')->findByStatusAndRangeTime('pending', '1:00', '5:00'); 
```

# hadoop - Hadoop ChainMapper, ChainReducer

> ID：12926474
> 
> 赞同：5
> 
> 时间：2012-10-17T03:03:07.720
> 
> 标签：hadoop, mapreduce, chaining

I'm relatively new to Hadoop and trying to figure out how to programmatically chain jobs (multiple mappers, reducers) with ChainMapper, ChainReducer. I've found a few partial examples, but not a single complete and working one.

My current test code is

```
public class ChainJobs extends Configured implements Tool {

public static class Map extends MapReduceBase implements Mapper<LongWritable, Text, Text, IntWritable> {

    private final static IntWritable one = new IntWritable(1);
    private Text word = new Text();

    public void map(LongWritable key, Text value, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException {
        String line = value.toString();
        StringTokenizer tokenizer = new StringTokenizer(line);
        while (tokenizer.hasMoreTokens()) {
            word.set(tokenizer.nextToken());
            output.collect(word, one);
        }
    }
}

public static class Map2 extends MapReduceBase implements Mapper<Text, IntWritable, Text, IntWritable> {

    private final static IntWritable one = new IntWritable(1);
    private Text word = new Text();

    @Override
    public void map(Text key, IntWritable value, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException {
        String line = value.toString();
        StringTokenizer tokenizer = new StringTokenizer(line);
        while (tokenizer.hasMoreTokens()) {
            word.set(tokenizer.nextToken().concat("Justatest"));
            output.collect(word, one);
        }
    }
}

public static class Reduce extends MapReduceBase implements Reducer<Text, IntWritable, Text, IntWritable> {

    @Override
    public void reduce(Text key, Iterator<IntWritable> values, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException {
        int sum = 0;
        while (values.hasNext()) {
            sum += values.next().get();
        }
        output.collect(key, new IntWritable(sum));
    }
}

@Override
public int run(String[] args)  {

    Configuration conf = getConf();
    JobConf job = new JobConf(conf);

    job.setJobName("TestforChainJobs");
    FileInputFormat.setInputPaths(job, new Path(args[0]));
    FileOutputFormat.setOutputPath(job, new Path(args[1]));

    JobConf map1Conf = new JobConf(false);
    ChainMapper.addMapper(job, Map.class, LongWritable.class, Text.class, Text.class, IntWritable.class, true, map1Conf);

    JobConf map2Conf = new JobConf(false);
    ChainMapper.addMapper(job, Map2.class, Text.class, IntWritable.class, Text.class, IntWritable.class, true, map2Conf);

    JobConf reduceConf = new JobConf(false);
    ChainReducer.setReducer(job, Reduce.class, Text.class, IntWritable.class, Text.class, IntWritable.class, true, reduceConf);

    JobClient.runJob(job);
    return 0;

     }

}

public static void main(String[] args) throws Exception {
    int res = ToolRunner.run(new Configuration(), new ChainJobs(), args);
    System.exit(res);
} 
```

But it fails with

```
MapAttempt TASK_TYPE="MAP" TASKID="task_201210162337_0009_m_000000" TASK_ATTEMPT_ID="attempt_201210162337_0009_m_000000_0" TASK_STATUS="FAILED" FINISH_TIME="1350397216365" HOSTNAME="localhost\.localdomain" ERROR="java\.lang\.RuntimeException: Error in configuring object
    at org\.apache\.hadoop\.util\.ReflectionUtils\.setJobConf(ReflectionUtils\.java:106)
    at org\.apache\.hadoop\.util\.ReflectionUtils\.setConf(ReflectionUtils\.java:72)
    at org\.apache\.hadoop\.util\.ReflectionUtils\.newInstance(ReflectionUtils\.java:130)
    at org\.apache\.hadoop\.mapred\.MapTask\.runOldMapper(MapTask\.java:389)
    at org\.apache\.hadoop\.mapred\.MapTask\.run(MapTask\.java:327)
    at org\.apache\.hadoop\.mapred\.Child$4\.run(Child\.java:268)
    at java\.security\.AccessController\.doPrivileged(Native Method)
    at javax\.security\.auth\.Subject\.doAs(Subject\.java:396) 
```

Any hints or a very simple working example much appreciated.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-11-19T13:12:53.443

我已经基于链映射器编写了一个字数统计作业。该代码已在新 API 上编写，并且运行良好 :)

```
import java.io.IOException;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.conf.Configured;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Job;
import org.apache.hadoop.mapreduce.Mapper;
import org.apache.hadoop.mapreduce.Reducer;
import org.apache.hadoop.mapreduce.lib.chain.ChainMapper;
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;
import org.apache.hadoop.util.Tool;
import org.apache.hadoop.util.ToolRunner;

//implementing CHAIN MAPREDUCE without using custom format

//SPLIT MAPPER
class SplitMapper extends Mapper<Object,Text,Text,IntWritable>
{
    private IntWritable dummyValue=new IntWritable(1);
    //private String content;
    private String tokens[];
    @Override
    public void map(Object key,Text value,Context context)throws IOException,InterruptedException{
        tokens=value.toString().split(" ");
        for(String x:tokens)
        {
        context.write(new Text(x), dummyValue);
        }
    }   
}

//UPPER CASE MAPPER
class UpperCaseMapper extends Mapper<Text,IntWritable,Text,IntWritable>
{
    @Override
    public void map(Text key,IntWritable value,Context context)throws IOException,InterruptedException{
        String val=key.toString().toUpperCase();
        Text newKey=new Text(val);
        context.write(newKey, value);
    }
}

//ChainMapReducer
class ChainMapReducer extends Reducer<Text,IntWritable,Text,IntWritable>
{
    private int sum=0;
    @Override
    public void reduce(Text key,Iterable<IntWritable>values,Context context)throws IOException,InterruptedException{
        for(IntWritable value:values)
        {
            sum+=value.get();
        }
        context.write(key, new IntWritable(sum));
    }
}
public class FirstClass extends Configured implements Tool{
    static Configuration cf;
    public int run (String args[])throws IOException,InterruptedException,ClassNotFoundException{
        cf=new Configuration();

        //bypassing the GenericOptionsParser part and directly running into job declaration part
        Job j=Job.getInstance(cf);

        /**************CHAIN MAPPER AREA STARTS********************************/
        Configuration splitMapConfig=new Configuration(false);
        //below we add the 1st mapper class under ChainMapper Class
        ChainMapper.addMapper(j, SplitMapper.class, Object.class, Text.class, Text.class, IntWritable.class, splitMapConfig);

        //configuration for second mapper
        Configuration upperCaseConfig=new Configuration(false);
        //below we add the 2nd mapper that is the lower case mapper to the Chain Mapper class
        ChainMapper.addMapper(j, UpperCaseMapper.class, Text.class, IntWritable.class, Text.class, IntWritable.class, upperCaseConfig);
        /**************CHAIN MAPPER AREA FINISHES********************************/

        //now proceeding with the normal delivery
        j.setJarByClass(FirstClass.class);
        j.setCombinerClass(ChainMapReducer.class);
        j.setOutputKeyClass(Text.class);
        j.setOutputValueClass(IntWritable.class);
        Path p=new Path(args[1]);

        //set the input and output URI
        FileInputFormat.addInputPath(j, new Path(args[0]));
        FileOutputFormat.setOutputPath(j, p);
        p.getFileSystem(cf).delete(p, true);
        return j.waitForCompletion(true)?0:1;
    }
    public static void main(String args[])throws Exception{
        int res=ToolRunner.run(cf, new FirstClass(), args);
        System.exit(res);
    }
} 
```

部分输出如下所示

```
A       619
ACCORDING       636
ACCOUNT 638
ACROSS? 655
ADDRESSES       657
AFTER   674
AGGREGATING,    687
AGO,    704
ALL     721
ALMOST  755
ALTERING        768
AMOUNT  785
AN      819
ANATOMY 820
AND     1198
ANXIETY 1215
ANY     1232
APACHE  1300
APPENDING       1313
APPLICATIONS    1330
APPLICATIONS.   1347
APPLICATIONS.ï¿½        1364
APPLIES 1381
ARCHITECTURE,   1387
ARCHIVES        1388
ARE     1405
AS      1422
BASED   1439 
```

您可能会看到一些特殊或不需要的字符，因为我没有使用任何清理来删除标点符号。我只是专注于链映射器的工作。谢谢 ：）

# c# - .NET CIL manipulation of evaluation stack

> ID：12926476
> 
> 赞同：5
> 
> 时间：2012-10-17T03:03:30.823
> 
> 标签：c#, .net, cil, mono.cecil

I have this sequence of CIL codes which I injected through the use of `Mono.Cecil`. However, the modified .NET C# application will not run.

**Objective: Manually load and pop values from stack to display in `Console.WriteLine`**

```
 for (int i = 0; i < 3; i++)
        {
            int z = some value popped manually from stack;                 
            Console.WriteLine(z);
        } 
```

**This is the simple main() program I modified:**

```
.method private hidebysig static void Main(string[] args) cil managed
{

    .entrypoint
    .maxstack 5
    .locals init (
        [0] int32 num,
        [1] int32 num2)
    L_0000: ldc.i4.6 //manually push value 6 to stack
    L_0001: ldc.i4.5 //manually push value 5 to stack
    L_0002: ldc.i4.4 //manually push value 4 to stack
    L_0003: ldc.i4.0 //push int i initial value 0 to stack 
    L_0004: stloc.0 //pop and store to int i variable to variable num
    L_0005: br.s L_0013
    L_0007: nop 
    L_0008: stloc.1 //pop the pushed values 6,5 and 4 to variable num2
    L_0009: ldloc.1 //load value of num2 to stack
    L_000a: call void [mscorlib]System.Console::WriteLine(int32) //pop value of num2 and print
    L_000f: ldloc.0 //load previous value in variable num to stack
    L_0010: ldc.i4.1 //load incremental value 1 to stack
    L_0011: add //pop and add the top 2 values, result is pushed to stack
    L_0012: stloc.0 //store the new result to variable num. (int i)
    L_0013: ldloc.0 //push int i variable value to stack
    L_0014: ldc.i4.3 //push value 3 to stack as number of times to loop
    L_0015: blt.s L_0007 //branch less than (pop and cmp the top 2 values in stack)
    L_0017: ret 
} 
```

**However, the above code cannnot run. I tried changing `blt.s` to `clt` and `br_true.s` but it doesn't work either. Does anyone know if it is possible to attain my objective? Thanks.**

EDIT: According to ECMA-335, III.1.7.5, there might be a backward branch constraint. Not sure if this is the case.

> In particular, if that single-pass analysis arrives at an instruction, call it location X, that immediately follows an unconditional branch, and where X is not the target of an earlier branch instruction, then the state of the evaluation stack at X, clearly, cannot be derived from existing information. In this case, the CLI demands that the evaluation stack at X be empty.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:20:48.233

你的 IL 代码看起来不错，但我认为 CLR 可能无法在方法完成后检查堆栈是否损坏。当某些东西被压入堆栈时，CLR 会检查该值是否也从堆栈中弹出。

因此，如果您将 3 个值压入堆栈，CLR 可能无法检查您的循环是否运行了 3 次，因此当方法返回时，CLR 不知道堆栈上是否仍有值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-11T02:38:14.233

非常有趣的问题。您正在尝试使用**IL**执行堆栈来存储任意数据项的队列。**与传统的IL**代码相比，这引入了一种不寻常的情况，其中堆栈的正确平衡关键取决于***运行时***循环迭代的数量与烧入 IL的***ILAsm 时间数据项的数量完全匹配。***正如您所指出的，该程序（在此重复）不起作用。

（事实上​​，在我使用`link.exe`with`/LTCG`的构建中，链接器甚至无法生成程序集，给出“ `fatal error C1352: Invalid or corrupt MSIL in function`.”）

```
.method public static void ExecStackResidual()      // !!! FAILS - BAD EXAMPLE - NO !!!
{
    .locals init (int32 i, int32 cur)

    ldc.i4.6        // enqueue item  -- NO!
    ldc.i4.5        // enqueue item  -- NO!
    ldc.i4.4        // enqueue item  -- NO!

    ldc.i4.0
    stloc i
    br _next

_more:
    stloc cur       // de-queue item  -- NO!

    ldloc cur
    box int32
    call void Debug::WriteLine(object)

    ldloc i
    ldc.i4.1
    add
    stloc i

_next:
    ldloc i
    ldc.i4.3
    blt _more
    ret 
} 
```

由于您的代码中有一个简单的逻辑缺陷或一个错误，问题是*n̲o̲t̲ 。*这可以通过以下事实证明有争议的部分**工作正常**，打印 3 个零。

```
 //-- ldc.i4.6       // commented out
    //-- ldc.i4.5       // commented out
    //-- ldc.i4.4       // commented out

    ldc.i4.0
    stloc i
    br _next

_more:
    //-- stloc cur      // commented out

    ldloc cur
    box int32
    call void Debug::WriteLine(object)

    ldloc i
    ldc.i4.1
    add
    stloc i

_next:
    ldloc i
    ldc.i4.3
    blt _more
    ret 
```

OP 做了一些调查并发现了**ECMA-335, III.1.7.5**，这似乎与这里有关，因为工作示例和失败示例之间的主要区别在于后者存在需要有一个**非空的评估堆栈**（又名“序列点”）在位置`_more`，并且该位置确实如此，以引用规范......

> “...立即遵循无条件分支 [此处，`br _next`]，其中 [ `_more`] 不是先前分支指令的目标。”

然而不幸的是，这似乎不是完整的解释，因为只要您以可以静态识别的平衡方式删除排队的项目，评估堆栈显然***不必***在 location 为空`_more`。下面的代码证明了这一点，它**也可以正常工作，打印 3 个零，尽管****ECMA-335, III.1.7.5** -vulnerable location的执行堆栈上有几个项目`_more`。

```
 ldc.i4.6       // enqueue item  -- ok
    ldc.i4.5       // enqueue item  -- ok
    ldc.i4.4       // enqueue item  -- ok

    ldc.i4.0
    stloc i
    br _next

_more:
    //-- stloc cur      // de-queue item  -- still commented out

    ldloc cur
    box int32
    call void Debug::WriteLine(object)

    ldloc i
    ldc.i4.1
    add
    stloc i

_next:
    ldloc i
    ldc.i4.3
    blt _more

    pop         // de-queue item  -- required
    pop         // de-queue item  -- required
    pop         // de-queue item  -- required
    ret 
```

OP 还使用术语“向后分支约束”，但不清楚该短语是在规范中找到还是在原始贡献中找到。规范中出现“...***较早的***分支指令”这句话似乎可能暗示了这一点。无论哪种方式，它都会引发一个诱人的问题，即是否可以通过重新排列代码来避免错误，以便没有（技术上）与**ECMA-335，III.1.7.5**约束中的“早期”（技术性）匹配的位置。

一个相关的想法是规范中的“无条件分支”仅表示`br`家庭指令。为了解决这个问题`br`，我们可以在方法主体中嵌入一条`ret`指令，如下所示。正如您可能猜到的那样，这无济于事。尽管规范没有明确说明，但它显然打算`ret`作为“无条件分支”包含在内。这是常识，因此以下示例仍然***不起作用***：

```
 // !!! FAILS - BAD EXAMPLE - NO
    ldc.i4.6        // enqueue item  -- NO!
    ldc.i4.5        // enqueue item  -- NO!
    ldc.i4.4        // enqueue item  -- NO!

    ldc.i4.0
    stloc i

_next:
    ldloc i
    ldc.i4.3
    blt _more
    ret 

_more:
    stloc cur       // de-queue item  -- NO! -- still follows an "unconditional branch"

    ldloc cur
    box int32
    call void Debug::WriteLine(object)

    ldloc i
    ldc.i4.1
    add
    stloc i
    br _next 
```

总而言之，我认为你不会让这项技术发挥作用，因为它的基本要求是（a.）硬编码到**IL**中的事实（即，排队数据项的数量）必须完全符合 (b.) 需要运行时解释的事实（即循环迭代次数）。

我认为这个问题的一个更基本的总结，与**ECMA**描述相反，是所有失败的例子都意味着**一个（或多个）方法指令所经历的执行堆栈上的项目数不是固定的**，而是在方法执行时在不同时间获取不同的值，无论您如何实现，这是始终严格禁止的基本情况。对我来说，这似乎是更普遍的不可侵犯的约束。

例如，在`_more`演示方法中的指令处——并且都在单个调用的范围内——执行堆栈上将首先有 2 个，然后是 1，然后是 0 个“多余”项（请注意，我每次迭代都从你可能已经预料到了，这是因为我之前使用了“ *excess* ”这个词，试图强调这样一个事实，即*在每个单独的循环迭代*中，一个项目在 location*是*正确预期的，也是必需的`_more`，即用于假定的出队操作`stloc cur`）。

我推测，为了使**IL**方法有效，它的任何指令都必须无法体验到执行堆栈的主要深度的变化。换句话说，必须有一个唯一的堆栈深度值，可以静态确定并分配给每个方法的指令。直观地说，否则这种情况可能会使**JIT**任务变得非常棘手，甚至可能被证明是不可能的。

# java - how to parse arguments from console and check if they are valid in a method

> ID：12926478
> 
> 赞同：2
> 
> 时间：2012-10-17T03:03:37.323
> 
> 标签：java

My code worked when it was in the main method, but once I try to put it in its own method, I get "args cannot be resolved to a variable" Also, I am very new to java, is there a way to simplify this code block, I have a book that shows modularized code, but it is not explained in detail.

```
 private static boolean validateInput() {

    //if invalid character is entered ie. a letter, will go to the catch
    try 
    {
        number1 = Integer.parseInt(args[0]);          
    }
    catch (Exception e)
    {
        System.out.println("Input #1 is not a valid integer.");
        return false;
    }

    try
    {
        number2 = Integer.parseInt(args[1]);
    }
    catch (Exception e)
    {
        System.out.println("Input #2 is not a valid integer.");
        return false;
    }

    try
    {
        number3 = Integer.parseInt(args[2]);
    }
    catch (Exception e)
    {
        System.out.println("Input #3 is not a valid integer.");
        return false;

    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T03:06:12.237

您可以将您的`String[] args`作为参数传递给`validateInput()`.

```
public static void main(String[] args) {
    if (validateInput(args)) {
        ...
    }
}

private static boolean validateInput(String[] args) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T03:06:54.853

您需要将 传递`args`给该方法，否则它不知道它是什么。

`validateInput`将您的方法重新声明为

```
private static boolean validateInput(String[] args) { 
```

从您的主要方法中，将其称为....

```
public static void main(String[] args) {
    //...Pre init...
    boolean isValid = validateInput(args);
    //...Post init...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T03:08:09.897

改变

```
 private static boolean validateInput() { 
```

至

```
 private static boolean validateInput(String[] args) { 
```

并将其`main`称为

```
 boolean result = validateInput(args); 
```

# javascript - My Javascript only works in FireFox, why?

> ID：12926482
> 
> 赞同：1
> 
> 时间：2012-10-17T03:04:09.920
> 
> 标签：javascript, internet-explorer, firefox, google-chrome

```
<script type="text/javascript">
function toggleMe(a,b){
  var div=document.getElementById(a);
  var button=document.getElementById(b);
  if(!div)return true;
    if(div.style.display=="block"){
      div.style.display="none"
      button.value="Expand"
    }
  else{
    div.style.display="block"
    button.value="Shrink"
  }
  return true;
}
</script>
<div id="para1" class="toggleMe">
    <p>"Text Blob"</p>
</div>
<input id="para1button" onclick="return toggleMe('para1','para1button')" type="button" value="Expand" /> 
```

The above is my script, and it only works in Firefox. I've googled myself silly, but I can't figgure out why its only working in FF.

Anyone got any hints?

If you want to see the exact implementation, its here: [http://www.techonline.co.nz/modules/navigator/navto.php?unique_ID=16](http://www.techonline.co.nz/modules/navigator/navto.php?unique_ID=16)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:17:23.447

如果没有 e，它可以在大多数浏览器中使用。

```
<!doctype html>
<html lang="en">
<head>
<meta charset= "utf-8">
<title>toggle display</title>
<script type="text/javascript">
function toggleMe(a,b){
    var div= document.getElementById(a);
    var button= document.getElementById(b);
    if(div.style.display== "block"){
        div.style.display= "none"
        button.value= "Expand"
    }
    else{
        div.style.display= "block"
        button.value= "Shrink"
    }
    return true;
}
</script>
<div id="para1" style="display:none">
    <p>"Text Blob"</p>
</div>
<input id="para1button" onclick="toggleMe('para1','para1button')" type="button" value="Expand">

</body>
</html> 
```

# c# - How does Dispose work with Entity Framework

> ID：12926483
> 
> 赞同：2
> 
> 时间：2012-10-17T03:04:18.560
> 
> 标签：c#, .net, asp.net-mvc, entity-framework

Can someone explain to me how and why do we need to use Dispose()? It's part of the default controller template that comes with ASP.NET MVC 4\. Shouldn't the garbage collector in .NET automatically kick in when the object, in this case data from a database is no longer in use?

Is it correct that Dispose() should be used when loading from a database but not regular object assignments?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T03:10:21.557

垃圾收集在任何托管内存资源上自动工作。但是，有时有些类使用非托管内存或需要释放的文件句柄等特殊非内存资源。

实体框架上下文可以访问来自共享连接池的连接，并且需要告知它们何时可以放弃这些连接，因为它们将不再被使用。

> 从数据库加载而不是常规对象分配时应该使用 Dispose() 是否正确？

Dispose 方法只能由可能使用非托管内存或非内存资源的类实现。如果一个类确实实现了该接口，那么当您完成该对象时`IDisposable`，您应该始终调用它。`Dispose`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T03:10:48.087

`Dispose`在处理非托管资源时使用（可以说是 Disposable 模式）。是的，.NET 垃圾收集器将清理 .NET 托管对象，但数据库连接是不由 .NET Framework 管理的较低级别的对象。文件处理程序也是如此——当您打开/写入文件时使用 Dispose 模式，因为实际的文件句柄不是由 .NET 管理的。

[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)描述了`IDisposable`你为什么要实现它。

EF 使用它是因为它下面`DbContext`是一个`DbDataConnection`，它适用于非托管资源。在这些情况下，最好相应地实施`IDisposable`和处理非托管资源的清理。

# ruby - 需要后的Ruby默认类操作

> ID：12926489
> 
> 赞同：1
> 
> 时间：2012-10-17T03:04:49.197
> 
> 标签：ruby, goliath

我记得这个问题以前出现过，但我找不到答案。

我需要这样的文件：

```
#lib/tm/agent/server.rb
require 'tm/agent/server' 
```

而且，在没有显式调用 Listen 类的情况下，它`initialize`会被执行：

```
module Tm
  module Agent
    module Server

      require 'goliath'

      class Listen < Goliath::API
        def initialize
          puts "WHAT"
        end
        def response(env)
          [200, {}, "Hello World"]
        end
      end

    end #end Server
  end #end Agent
end #end Tm 
```

如何避免在 require 上初始化类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T03:15:40.747

这是因为 Goliath 服务器中的一个钩子会在您直接运行脚本时自动启动服务器——这不是 Ruby 的正常特性。

为了避免它，不要调用`require 'goliath'`，而是使用`require 'goliath/api'`。

# c++ - DirectX game with no prerequisite software to run

> ID：12926493
> 
> 赞同：2
> 
> 时间：2012-10-17T03:05:11.760
> 
> 标签：c++, xna, directx

I'm new to programming with DirectX and I want to know how should I create a DirectX game.

Will there be a way to package all the required files for people to run without the need for additional software? I'll add the exception that they'll need to install DirectX. What I mean is, when I try to run an executable version of a DirectX program on a computer that isn't setup to create DirectX projects, I get an error like "d3dx10_43.dll is missing" and I have directX version 11 installed on that machine. Now I know I can just place d3dx10_43.dll inside the folder people will download but are there any legal issues when I do this?

Basically I want to make games with the least amount of prerequisite software required, or at least be able to include it in their download without any legal issues. (The reason why I say legal issues, is because I know XNA requires its framework in order to run games with it... and I know you're not allowed packaging the XNA framework with your download.)

Thanks.

Jason

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:40:11.930

1.  如果使用原生 DirectX，可以分发运行时库，它是免费的，安装 DirectX SDK 时可以查看详细信息。
2.  无论如何，最终用户需要安装 dll 才能运行您的程序，因此要么他们自己安装运行时库，要么您将其与您的程序一起提供。

这是 DirectX SDK 2010（六月）的 ELUA

> 湾。可分发代码。如果您遵守以下条款，该软件包含您被允许在您开发的程序中分发的代码。
> 
> > 一世。使用权和分发权。下面列出的代码和文本文件是“可分发代码”。
> > 
> > > • DIRECTX REDIST.TXT 文件。您可以复制和分发 DIRECTX REDIST.TXT 文件中列出的代码的目标代码形式

以及 DIRECT REDIST.TXT 所说的

> 可再发行代码被标识为 DirectX SDK CD/Download 上以下“Redist”目录中的所有文件：
> 
> 重发/

redist 文件夹包含运行程序所需的运行时 dll 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:38:59.053

通常，您只需捆绑（或在安装时下载）来自 Microsoft 的适当可再发行包。

您绝对不应该为绝大多数 Microsoft 库重新分发松散的 DLL 文件。

更正您的 XNA 示例：您不能合法地重新分发 XNA *Game Studio*（Visual Studio 组件）。但是您***可以***重新分发[XNA 框架](http://www.microsoft.com/en-us/download/details.aspx?id=27598)。我假设 DirectX SDK 和可再发行组件之间存在类似的区别。

您如何实际下载或捆绑，然后调用可再发行组件实际上取决于您使用的安装程序技术。

# ios - OpenGL ES application crashes when locked screen or entered background

> ID：12926495
> 
> 赞同：5
> 
> 时间：2012-10-17T03:05:24.537
> 
> 标签：ios, opengl-es, crash

My application is an OpenGL heavily employed one, which is being used to process images, rendering scenes, display previews, etc. However, after I implemented multi-task as Apple's official document 'OpenGL ES Programming Guide for iOS', weird crashes still came up sporadically. Debug Navigator Stack trace shows something like 'sgxPatchDeferredFramebufferOffsets', 'presentRenderbuffer EXC_BAD_ACCESS', 'gpus_ReturnNotPermittedKillClient', etc.

So, I would like to know what exactly one should implement OpenGL ES Multi-task.

**=============UPDATE: Problem Solved============**

Thanks for your answer, CStreel, and other guys who tried to help.

After reading 'Background Applications May Not Execute Commands on the Graphics Hardware' part in'OpenGL ES Programming Guide for iOS' a second time, line by line, I have a new understanding with this issue.

The big problem with my app is I **should not implement OpenGL ES multi-task in a notification method.** Since, unlike delegate methods, notification methods will be called asynchronously, these stopping animation actions and glFinish() calls may not take effect when the application has already moved into the background. This may happen more frequently when I hit the lock-screen button as soon as I am performing a series of OpenGL ES related actions.

If you guys found some other issues, feel free to contact me.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T03:18:53.823

当您的应用程序即将进入后台时，如果您的应用程序调用任何 OGLES 函数，操作系统将立即终止您的应用程序

阅读[应用程序状态和多任务处理](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)以获取更多信息 阅读[成为负责任的后台应用程序](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

以下是该文档的一些摘录：

```
(Required) When moving to the background, make sure your app adjusts its behavior appropriately. 
```

关于 OGLES

```
 ...the app should stop calling OpenGL ES functions. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T11:57:52.857

通知可以是同步的或异步的。如果注册通知指定 NSOperationQueue，回调将是异步的，否则我相信它总是同步的。

我遇到了一些崩溃，并在我的代码中发现了一些错误：

1.  共享的 EAGLContext，尽管是“多线程的”，但并不总是在所有使用它的线程上设置。似乎每次离开 RunLoop 以输入您的应用程序代码并发出任何 openGL 命令时，您都必须在主线程上设置上下文。
2.  iOS 6 在更改缓冲区时需要额外的“glFlush()”，这显然是由于 iOS 6 中的一个错误。iOS 5 和 7 不受影响。
3.  “DidEnterBackground”通知与其他代码/线程之间缺乏同步，这意味着通知应用程序状态更改的主线程提前返回，而其他线程仍在使用 openGL。保持通知线程，直到您完成调用 openGL。只有在允许返回后，iOS 才会在 openGL 上启动“看门狗”。

我使用 DidEnterBackground/WillEnterForeground 通知（不是回调）来停止/重新启动 openGL 操作。我仍然遇到非常罕见的崩溃（我必须使用自动化并锁定/解锁/旋转 20-30 分钟才能得到它），但使用 WillResignActive/DidBecomeActive 没有任何区别；他们无论如何都会发生。

# http - 阻止热链接到字体文件时的 404 与 403

> ID：12926498
> 
> 赞同：2
> 
> 时间：2012-10-17T03:05:44.620
> 
> 标签：http, iis-7.5, url-rewrite-module

我一直在网上搜索，但找不到这个特定问题的答案。

我正在使用 IIS 重写模块来阻止对 WOFF 和 EOT 文件的直接访问，以阻止盗链和字体文件的盗窃。如果 HTTP_REFERER 与服务器名称不匹配，我会通过拒绝请求来做到这一点。

阻塞工作正常。但是，我有点不确定哪个是返回给客户端的最合适的响应代码。

这与阻止受限制的文件类型（如 .config、.asax 等）并不完全相同。因为浏览器请求这些文件是完全合理和合法的，但前提是请求被正确引用。

从逻辑上讲，我认为 403 是最正确的响应，因为服务器理解请求，但由于接收请求的方式（直接未提及）而拒绝提供内容。

我主要关心 404 是浏览器或代理等是否可能确定 URL 无效，并停止对资源发出进一步的请求。

我特别关注 403 的另一个问题是，如果某些浏览器可能会错误地解释这一点，并尝试从用户那里获得请求的额外身份验证。

另一种选择是简单地中止请求，这会导致套接字连接被丢弃。虽然做起来非常简单，但我不知道所有客户会如何回应。例如，我想知道某些浏览器或搜索引擎是否会将此视为临时网络故障，因此会继续尝试重新发出请求。

基本上我想确保对这些字体文件的合法请求将始终正常工作，同时（尽可能）保护文件不被误用。

任何想法将不胜感激。

谢谢，尤金

# directx - Direct3D 中的世界空间坐标

> ID：12926501
> 
> 赞同：0
> 
> 时间：2012-10-17T03:05:53.507
> 
> 标签：directx, direct3d, direct3d11

我在 Direct3D 画布上有一个背景图像。我正在背景的特定位置画一个圆圈。使用相机（使用世界/视图/投影）缩放/平移画布后，更新背景。

现在的问题是，我在图像上找不到以前的位置来重画圆圈。我正在使用以下函数（DirectX 11.1）来查找坐标。但它不起作用。

```
XMVECTOR Camera::Unproject(Windows::Foundation::Rect viewPort, Windows::Foundation::Point location)
{
XMFLOAT3 worldPosition(location.X, location.Y, 0.0f);
XMVECTOR worldVector = XMLoadFloat3(&worldPosition);
return XMVector3Unproject(worldVector, viewPort.X, viewPort.Y, viewPort.Width, viewPort.Height, 0.0f, 1.0f, this->Projection(), this->View(), this->World());   
} 
```

我什至尝试将 XMMatrixIdentity 作为世界。但没有成功。谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:58:40.190

对于您提供的信息，这是一个不小的问题。

屏幕上的一个 2D 点不能映射到场景中的一个 3D 点。每个二维点映射到一整条射线。因此，如果您在特定的 2D 位置绘制一个圆，则该圆可以放置在场景中的各个位置。这可能就是为什么你会得到一些奇怪的结果。

如果移动相机，光线可能会变得“更明显”。即它不会映射到单个 2D 点，而是映射到 2D 射线。而你的圆被放置在这条射线的某个地方。你看，没有办法用提供的信息得到圆圈的新位置。你只能说它在某条射线上的某个地方。

但也许你可以指定圆的位置。也许它被放置在一个物体上，一个虚拟平面上或类似的东西上。那么这个问题是可以解决的。

首先，您必须找到圆的 3D 位置。使用`XMVector3Unproject`两次。一次 Z 坐标为 0，一次为 1。这将为您提供一个非常靠近相机的点和一个远离相机的点。这是你的光芒。然后，您必须计算圆在该射线上的位置。例如，通过将射线与平面相交。这个 3D 位置可以`XMVector3Project`使用新的相机参数投影回屏幕 ( ) 并定义新的圆位置。

是的，您可能应该将身份矩阵定义为世界矩阵。

# c# - 在 Metro 中使用 NHibernate

> ID：12926502
> 
> 赞同：5
> 
> 时间：2012-10-17T03:05:53.357
> 
> 标签：c#, nhibernate

我正在将一个应用程序从 iOS 移植到 Win8，并希望在应用程序中使用 NHibernate 来存储关系数据，但是每当我添加`NHibernate.dll`&时，`lesli.Collections.dll`都会出现以下错误：

错误 2 在模块 mscorlib.dll 中找不到类型 System.ApplicationException。

错误 1 ​​无法解析程序集或 Windows 元数据文件“System.Data.dll”

如果有人能指出我可能会很棒的解决方案的方向，我还没有找到一个

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T12:31:10.793

似乎 System.Data 不适用于 Windows 应用商店应用程序。[http://visualstudiomagazine.com/blogs/data-driver/2012/09/data-devs-local-access-windows-store.aspx](http://visualstudiomagazine.com/blogs/data-driver/2012/09/data-devs-local-access-windows-store.aspx) NHibernate 严重依赖 System.Data。

# jquery - jquery 序列化多选

> ID：12926503
> 
> 赞同：1
> 
> 时间：2012-10-17T03:06:01.773
> 
> 标签：jquery, html

如何获取所有表单值并使用给定变量或数组序列化多项选择？输出参数必须是；

```
id=1&name_1=John&name_2=Juan&name_3=Isabel&name_4=Doe 
```

**名称**在**多选中**的位置

 *** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T03:33:21.887

正如[这个答案](https://stackoverflow.com/questions/5118716/jquery-serialize-and-multi-select-dropdown)所示，jQuery 将在通过以下方式进行序列化时使用相同的“名称”值作为每个选择的键`$(form).serialize()`：

```
id=1&name=John&name=Juan&name=Isabel&name=Doe 
```

并且由服务器来了解如何处理它。您的服务器可能会很好地处理它。

如果你绝对需要你提到的格式，你应该能够使用这样的东西（未经测试）一起破解它：

```
var elementArray = $(form).serializeArray();
var modifiedArray = [];
var counts = {};
var multipleValues = {};
$.each(elementArray, function(index, value) {
  if (counts[value.name]){ counts[value.name] += 1; } else { counts[value.name] = 1; }
});
$.each(elementArray, function(index, value) {
  if (multipleValues[value.name] || counts[value.name] > 1){ 
    if (!multipleValues[value.name]) { multipleValues[value.name] = 0; } else { multipleValues[value.name] += 1; }
    modifiedArray.push({name: value.name + "_" + multipleValues[value.name], value: value.value});
  } else {
    modifiedArray.push({name: value.name, value: value.value});
  }
});
var result = $.param(modifiedArray); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-30T14:23:05.107

PHP 不会处理同名的多个请求值。您可以将它们作为数组发布。为此，只需将 [] 添加到 html 元素的名称标签的末尾。

```
user[]=John&user[]=Bill&user[]=Adam 
```

在 PHP 中它看起来像：

```
大批
(
    [用户] => 数组
        (
            [0] => 约翰
            [1] => 比尔
            [2] => 亚当
        )
)

```**

# php - 冲突，包括具有相对路径的文件

> ID：12926506
> 
> 赞同：3
> 
> 时间：2012-10-17T03:06:29.743
> 
> 标签：php, include, relative-path

我正在尝试在我的 php 脚本中动态包含。这是我的目录树：

```
-index.php
-sources/
--hello.php
--bye.php 
```

在我`index.php`的中，我包含了 hello.php：

```
include("sources/hello.php"); 
```

在我的`hello.php`我还有另一个包括：

```
include("bye.php"); 
```

当我访问`index.php`它时，它会抛出一个错误：

> 消息：require_once(bye.php) [function.require-once]：打开流失败：没有这样的文件或目录

有没有办法让它工作但没有绝对路径？因为路径可以从一个目录更改到另一个目录但保持结构：

```
-index.php
-sources/
--hello.php
--bye.php 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T03:11:27.410

利用

```
dirname(__FILE__); 
```

像这样

```
include(dirname(__FILE__)."/bye.php"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T03:10:48.947

为什么不使用**[getcwd()](http://php.net/manual/en/function.getcwd.php)**？

内容`index.php`：

```
include(getcwd() . "/sources/hello.php"); 
```

内容`hello.php`：

```
include(getcwd() . "/sources/bye.php"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T03:19:45.720

由于“hello.php”被包含在“index.php”中，“bye.php”需要被包含在“hello.php”中，就好像它被包含在“index.php”中一样。像这样：

```
include("sources/hello.php"); 
```

但是，如果您想在所有地方都包含“hello.php”，而不仅仅是在“index.php”目录中，您可以在“hello.php”中设置一个变量，每次都为您提供正确的路径。像这样：

```
$webroot = "http://".$_SERVER['HTTP_HOST'].dirname($_SERVER['PHP_SELF'])."/";
include($webroot."sources/bye.php");

OUTPUT -->http://website.com/sources/bye.php 
```

# backbone.js - 如何覆盖/封装主干“设置”方法

> ID：12926507
> 
> 赞同：3
> 
> 时间：2012-10-17T03:06:31.310
> 
> 标签：backbone.js

如果我想去掉一些额外的空格，并确保在进行这样的调用时将 http:// 添加到任何输入之前

```
 myModel.set('url','www.google.com'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T09:18:27.123

同意@rjsvaljean，但如果你真的想覆盖 myModel 的 set 方法，那就这样做：

```
var MyModel = Backbone.Model.extend({
    set: function(attributes, options) {    
        // 'strip out some extra spaces, and ensure http is prepended' here

        return Backbone.Model.prototype.set.call(this, attributes, options);
    }
}); 
```

# java - 学习如何在 Android 中的视图上设置标志

> ID：12926514
> 
> 赞同：2
> 
> 时间：2012-10-17T03:07:28.023
> 
> 标签：java, android, flags

我正在尝试`SYSTEM_UI_FLAG_LOW_PROFILE`在视图上使用此标志。我的问题比这更深。我真正的问题是我真的不擅长浏览文档以了解如何实际实现这一点。我发现自己经常处于这种困境中。谁能告诉我如何学习如何设置标志，但是通过使用文档而不是寻找某人发布一些示例代码让我“窃取”？假设我只有 eclipse 和所有下载的 android 文档，我不知道如何设置它，我该如何学习？这更像是“学习编程”类型的问题，但仍然是一个真正的问题，我希望有人能帮助我。

从阅读文档中我能想到的最好的：

```
setContentView(R.layout.start);
setSystemUiVisibility(SYSTEM_UI_FLAG_LOW_PROFILE): 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T08:28:09.530

我必须经常离线工作（旅行时），并且仅凭参考文档就可以解决问题；所以这是可能的！我将从 Android SDK 参考的快速概述开始，并轻松了解有关标志的一些信息，同时保留您自己解决特定问题的机会（希望是工具）。

大多数 API 参考文档，尤其是那些使用 Javadoc 类型工具生成的文档，都遵循类似的约定；因此，一旦您对 Android 的参考文档感到满意，您也应该能够翻译其他文档。

我建议您将参考文档的包索引页面（如果您还没有的话）添加为*书签：*

*   http://developer.android.com/reference/packages.html *- 或 -*
*   {您的本地“android-sdk”文件夹}/docs/reference/packages.html。

在 Windows 上，完整的默认路径应类似于：

*   file:///C:/Program%20Files/Android/android-sdk/docs/reference/packages.html -或*-*
*   file:///C:/Program%20Files%20(x86)/Android/android-sdk/docs/reference/packages.html

> *   **标题搜索框**：右上角的搜索框非常适合搜索文档。
> *   *在线*时，搜索“标志”将导致整个文档中的所有引用。
> *   *离线*时，搜索框只会提供包形式和类名的提示/链接；输入“intent”将提供“android.content.Intent”，但您会发现“flags”毫无帮助。

# 包索引页面

在左侧，您会找到包含指向每个包的链接的 Android 包列表，而页面的主体列出了包含简短介绍和每个包的链接的包。

# 包页

单击一个包（例如“android.content”）将打开一个页面，该页面总结了包及其内容，并使用包的构成接口、异常和类填充包内容列表（在 Android 包列表下方）比如“意图”。

# 课程页面

*示例：意图类*

*   http://developer.android.com/reference/android/content/Intent.html
*   android-sdk/docs/reference/android/content/Intent.html

点击一个接口、异常或类（例如“Intent”）会弹出一个非常长的页面信息。在每个类页面的顶部，您会找到类定义（又名签名），然后是类概述部分，该部分解释了对象的用途和实现。还有指向页面其他部分的跳转链接列表：

> 嵌套类 | 常数 | 继承常量 | 领域 | 托斯 | 方法 | 继承的方法

# 寻找有用的参考资料

如果您不知道自己在寻找什么，我想您几乎可以在任何地方开始阅读；但考虑到特定需求，例如实现标志，OOP 的基本知识将帮助您入门。由于您想了解如何将标志（操作是方法）添加到视图（对象），因此查看视图的方法是开始搜索的好地方，视图的类概述部分也是如此。

既然您说您想学习如何学习，我将把 View 留给您稍后阅读 :)

> **浏览器搜索**：不要忘记使用浏览器的内置搜索功能，在 Windows 上通常是 [CTRL]+[F]。搜索诸如“flag”之类的术语可以让我们快速浏览页面上所有出现的它（217 of flag！），但您可以快速尝试一些相关的术语和短语（越精确越好）以获得一个更精细/简化的匹配集，然后迭代一些。通过快速尝试更多的术语，我能够找到我想要的：“flags”（67）、“add flag”（0）和“addflag”（6 个匹配项 - 获胜者！）

# 导航课程页面

继续以 android.content.Intent 类页面为例，点击 Methods 的跳转链接会很快显示**addFlags()**，稍微滚动一下会显示**setFlags()**。两种方法都以一个*int*作为参数；然而，文本使用复数名称“flags”来引用这个单个*int*是有充分理由的：您可以将很多标志压缩到单个 int 中，因为每个标志都存储为一个特定位！（我将在下面对此进行更多解释。）

每个方法的底部都有一个“另见”小节，通常包含有用的相关链接。我们发现的标志方法 addFlags() 和 setFlags() 在其“另见”部分中相互引用，并且 setFlags() 还包含指向所有相关标志常量的链接。这些标志常量，按照惯例，每个都有一个以“FLAG_”开头的名称。以下是几个常用意图标志的“常量”条目：

> *   int FLAG_ACTIVITY_NEW_TASK 如果设置，此活动将成为此历史堆栈上新任务的开始。
>     
>     
> *   int FLAG_ACTIVITY_CLEAR_TOP 如果设置，并且正在启动的 Activity 已经在当前任务中运行，那么不会启动该 Activity 的新实例，而是关闭它之上的所有其他 Activity，并且此 Intent 将被传递到 (现在在顶部）作为新意图的旧活动。

单击常量的名称将使我们跳转到页面的下方，其中将更详细地解释每个常量，包括以 base-10（十进制）和 base-16（十六进制）列出它们的实际值。

*请记住，Java 使用 C 风格的前缀 '0x' 来区分十六进制数字，并且这个前缀不会影响值，除了标识它的数字基数。*

> *   FLAG_ACTIVITY_NEW_TASK 显示常量值 268435456 (0x10000000)。
> *   FLAG_ACTIVITY_SINGLE_TOP 的常量值为 536870912 (0x20000000)。

这些数字可能看起来是随机的和任意的，但它们不是——每个实际上都是一个零字节中的单个开启位，使得我们在 base-2（二进制）中的标志看起来更合乎逻辑：

> *   000100000000000000000000000000000 和
> *   001000000000000000000000000000000。

# 如何在位掩码中添加和设置标志

要将两者都应用于一个意图，您可以使用 setFlags（丢弃预先存在的标志）或 addFlags（保留所有标志），如下所示：

> *   someExampleIntent.setFlags(FLAG_ACTIVITY_NEW_TASK | FLAG_ACTIVITY_SINGLE_TOP);
> *   *请特别注意我们的标志之间的竖线“|”；在 Java 中，它是“按位或”运算符。*

基本上，按位或对输入 int 进行逐位比较，如果任何比较位为真，则返回 true(1)，否则返回 false(0)。按位或，是的！

所以我们的位掩码的按位或比较将产生：

> *   000100000000000000000000000000000 |
> *   00100000000000000000000000000000 =
> *   001100000000000000000000000000000

小心**不要将加法 (+) 与位掩码一起使用**！它非常适合创建间歇性错误；它将产生与按位或合并两个数字时相同的结果..（保持异常 - 从字面上看）：

> *   000100000000000000000000000000000 +
> *   00100000000000000000000000000000 =
> *   00110000000000000000000000000000（与按位或结果相同）

..除非您添加的掩码有任何共同的设置位，例如将 FLAG_ACTIVITY_SINGLE_TOP 添加到已经包含它的位掩码中 - 然后我们会得到哭泣的小猫或一些诸如此类的废话的图片**：**

> *   001100000000000000000000000000000 +
> *   00100000000000000000000000000000 =
> *   010100000000000000000000000000000 /!\ 哎呀。
> 
> 意外删除了FLAG_ACTIVITY_SINGLE_TOP，意外添加了FLAG_ACTIVITY_NO_HISTORY；*一次按键的价格有两个错误！*

**请做正确的事（tm）并使用'|' （不是“+”）用于合并位掩码。**

[这是一个简单的按位或](http://snipt.org/vgxg5)Java 示例以及在它们上使用加法的陷阱。

[刚刚也找到了对位掩码](http://softwareblog.alcedo.com/post/2011/05/31/Using-e2809core2809d-to-combine-A-and-B-Explaining-that-bitmask-thing.aspx)的出色解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:13:17.730

[Android 开发者网站](http://developer.android.com)上的文档实际上非常适合“学习如何通过 Android 编程”的人群。

我会先看一下与 sdk 捆绑在一起的示例项目，或者会按照我的方式完成在线教程，从这里开始：http: [//developer.android.com/training/basics/firstapp/creating-project。 html](http://developer.android.com/training/basics/firstapp/creating-project.html)

就个人而言，我通过一些现有的项目并开始做一些小的调整来学习东西是如何工作的，从而学得最好。

我猜想您要设置的“标志”实际上是在一个活动上，但是通过教程/示例代码工作也将帮助您学习该术语。

希望能帮助你入门，祝你好运！

# javascript - scrollTop 仅从滚动条顶部测量，需要整个页面

> ID：12926515
> 
> 赞同：0
> 
> 时间：2012-10-17T03:07:34.670
> 
> 标签：javascript, jquery, scroll, height, scrolltop

我正在尝试将用户在页面上滚动的百分比作为 var 传递（[参见 fiddle](http://jsfiddle.net/AndDZ/)）。`$(document).scrollTop() / $(document.height() * 100`非常适合从 0 开始——页面顶部——但是当你到达底部时，它只返回滚动条顶部的位置，而不是 100%。请参阅小提琴以了解我的意思。

有谁知道在顶部获得 0 并在底部获得 100 的方法？主要的是它必须即时计算：如果有人在页面的 45.2667% 处，我希望传递该值，而不是仅在顶部或底部传递。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:21:02.373

Sactor 是正确的，但它不适用于所有位置。

如果你也想考虑页面的结尾，我认为你想计算“查看”而不是“滚动”的页面数量

如果您正在考虑查看的页面量而不是滚动量，那么您可以使用以下内容：

从逻辑上讲，当您打开页面时，您会查看一定数量的页面。所以你总能得到，

```
( ( $(document).scrollTop() + $(window).height() ) / $(document).height() ) * 100 
```

别的：

如果您只想单独滚动，请使用

```
var extreme = $(document).height() - $(window).height(),
percent = 0;
if( $(document).scrollTop() <  extreme )
   percent = $(document).scrollTop() / $(document.height() * 100;
else
   percent = 100; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:51:53.753

当滚动到底部时，您希望获取从页面顶部到滚动条顶部的百分比。尝试：

```
($(document).scrollTop() / ($(document).height() - $(window).height())) * 100 
```

# spring - Hibernate + Spring事务回滚不起作用

> ID：12926516
> 
> 赞同：1
> 
> 时间：2012-10-17T03:07:57.997
> 
> 标签：spring, hibernate, transactions, rollback

当服务抛出配置为回滚（rollbackfor）的异常时，此回滚不起作用。

服务等级：

```
@Service("bookService")
@Transactional(propagation = Propagation.REQUIRED, rollbackFor = { BusinessException.class }, readOnly = true)
public class BookServiceImpl implements BookService {

    @Autowired
    private BookRepository bookDAO;

     @Override
     @Transactional(readOnly = false)
     public void transactionTest(Book book) throws BusinessException {
          try {
               bookDAO.test(book);
          } catch (DAOException e) {
               throw new BusinessException("test rollback - service");
          }
     }
} 
```

存储库类：

```
@Repository("bookRepository")
public class BookRepositoryImpl implements BookRepository {

    @Autowired
    private SessionFactory sessionFactory;

@Transactional(readOnly = false)
@Override
public Book saveOrUpdate(Book book) {
    if (book.getId() != null) {
        getSession().merge(book);
    } else {
        getSession().save(book);
    }
    return book;
}

@Transactional(readOnly = false)
@Override
public void test(Book book) throws DAOException {

    saveOrUpdate(book);
    System.out.println(book.getTitle() + " inserted!");
    throw new DAOException("Test rollback");
}

} 
```

回滚在一种情况下有效。为此，我需要更改 BookServiceImpl 删除 readOnly = true 并删除“transactionTest”方法的“@Transactional(readOnly = false)”。但出于安全原因，我希望对所有类使用 readOnly = true 并指定什么是方法使用 readOnly = false

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:16:00.630

目前对于整个`BookServiceImpl`交易配置是 `@Transactional(propagation = Propagation.REQUIRED, rollbackFor = { BusinessException.class }, readOnly = true)`

并且对于`transactionTest`被覆盖的注解是`@Transactional(readOnly = false)`，当您使用类覆盖注解以更新整个注解而不是仅指定属性时。

而不是这个，你应该在下面作为代码`BookServiceImpl`

```
@Service("bookService")
@Transactional(readOnly = true)
public class BookServiceImpl implements BookService {

    @Autowired
    private BookRepository bookDAO;

     @Override
     @Transactional(propagation = Propagation.REQUIRED, rollbackFor = { BusinessException.class },readOnly = false)
     public void transactionTest(Book book) throws BusinessException {
          try {
               bookDAO.test(book);
          } catch (DAOException e) {
               throw new BusinessException("test rollback - service");
          }
     }
} 
```

此外，如果您想要在 DAO（存储库）级别上进行相同类型的事务，则指定它或让服务来处理事务（假设存储库不会直接与客户端交互）。

# c# - 如何重构这个巨大的 switch 语句？

> ID：12926518
> 
> 赞同：3
> 
> 时间：2012-10-17T03:08:17.767
> 
> 标签：c#, refactoring, switch-statement

我继承了一些代码，其中有一个 500 行的 switch 语句。基本上，它打开一个`string`任务并执行相应的动作。

从那以后，我将每个 case 语句移到了新类中它们自己的方法中。巨大的 switch 语句仍然存在，但不是内联每个案例的逻辑，而是调用一个方法，所以它更整洁。

问题是这些方法修改了很多不同的东西。50% 的方法需要传入 0 个参数。约 40% 需要 5 个参数，其余 10% 需要 10 个参数。

目前这*可行*，但我想让它变得更好。要么摆脱 switch 语句，要么以某种方式降低传入参数的数量。

我正在考虑使用将s`Dictionary`映射`string`到`Action`s 来消除整个开关，但这不起作用，因为我使用了很多 ref 参数（原始类型）并且无法将它们传递给构造函数，并让它们稍后被引用修改。

该问题的明显解决方案是将所有 16 个左右的变量放入一个单独的类中并传递它，但其中很多不是很相关，所以它只是用另一个问题替换一个问题（带有非内聚数据的长参数列表班级）。

想知道是否还有其他方法可以改进此代码。谢谢阅读。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T03:32:13.047

在无法查看任何类型的代码的情况下，我能给您的唯一建议是您应该考虑使用[SOLID 设计原则](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)进行重构并考虑测试。我会尝试为每个逻辑模块（或开关的条件）创建不同的类，通过这些对象的构造函数（而不是作为方法的参数）传递依赖关系，并尝试创建一些可以用来工作的统一接口在一些测试中。您可能希望通过投入工厂来提取这些对象的条件创建。不过听起来很乱。祝你好运。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T03:46:33.310

由于您的问题不包含代码，因此答案也不能。我认为最好的做法是向您指出有史以来最好的软件书籍之一的第 82 页：[重构：改进现有代码的设计](https://rads.stackoverflow.com/amzn/click/com/0201485672)。

“面向对象代码最明显的症状之一是它相对缺乏 switch 语句。大多数时候你看到一个 switch 语句，你应该考虑多态性。”

然后，他列出了一些用于帮助实现这一目标的特定模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T03:36:05.560

您可以`ref`在委托中使用参数，但不能使用内置`Action`或`Func`通用委托。您必须像这样定义自己的：

```
public delegate void DelegateWithRefParameters(ref int i, ref long l, ref bool b, ref object o);

public class Program
{
    public static void Main(string[] args)
    {
        int i = 0;
        long l = 0;
        bool b = false;
        object o = null;

        var lookup = new Dictionary<string, DelegateWithRefParameters>() 
        {
            { "object", ModifyObject },
            { "int", ModifyInt },
            { "bool", ModifyBool },
        };

        string s = "object";

        lookup[s](ref i, ref l, ref b, ref o);
    }

    private static void ModifyObject(ref int i, ref long l, ref bool b, ref object o)
    {
        o = new object();
    }

    private static void ModifyInt(ref int i, ref long l, ref bool b, ref object o)
    {
        i++;
    }

    private static void ModifyBool(ref int i, ref long l, ref bool b, ref object o)
    {
        b = !b;
    }              

} 
```

您只需修改所有方法以使用相同的签名。

# lua - 返回 Lua string.format 中的百分号

> ID：12926519
> 
> 赞同：2
> 
> 时间：2012-10-17T03:08:26.440
> 
> 标签：lua

在我为在线游戏开发的修改脚本中，我试图显示数字的当前百分比。

```
function()
    local z = math.max(0, UnitPower("player")) / math.max(1, UnitPowerMax("player")) * 100;
    return string.format("%.f", z);
end 
```

**上面的代码正确显示了百分比。**

但是，我很难在不到处抛出错误的情况下显示实际的百分比符号。

我试过`print("%%")`在结束函数之前和函数之后添加，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T05:25:29.963

与 C 中的函数`string.format`一样`printf`，当您想要逐字显示时，需要将百分号加倍。对于or函数，情况*并非如此！*`print``io.write`

所以你当然想要这个：

```
function()
  local z = math.max(0, UnitPower("player")) / math.max(1, UnitPowerMax("player")) * 100;
  return string.format("%.f %%", z);
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T03:46:37.997

弄清楚了。

```
function()
    local z = math.max(0, UnitPower("player")) / math.max(1, UnitPowerMax("player")) * 100;
    return string.format("%.f", z) .. "%%";
end 
```

刚刚添加`.. "%%"`；显示的值现在是**100%**（其中 100 是当前百分比。

超级后期编辑：
这是一些自定义代码的一部分，被输入到视频游戏魔兽世界的插件中，这是我想要实现的目标的解决方案，因为作者正在调用`string.format()`“自定义代码”输入。有关标准解决方案，请参阅此问题的其他答案`Lua`。

# c# - 固定间隔后刷新更新面板

> ID：12926523
> 
> 赞同：3
> 
> 时间：2012-10-17T03:08:43.417
> 
> 标签：c#, javascript, jquery, asp.net

这是我的脚本：

```
 <script type="text/javascript">
    $(document).ready(
    function (){

        setTimeout('myFun()', 10000);
     });

    function myFun() {
        var btn = document.getElementById('<%=myBtn.ClientID %>');
        alert(btn);
        btn.click();
     }
</script> 
```

我的标记：

```
<asp:UpdatePanel ID="upMain" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <asp:Label ID="lblValue" runat="server" Text=""></asp:Label>
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="myBtn" EventName="Click" />
     </Triggers>
</asp:UpdatePanel>
<asp:Button ID="myBtn" runat="server" Text="hit" /> 
```

代码背后：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        lblValue.Text = "0";
    }
    else
    {
        lblValue.Text = Convert.ToString(Convert.ToInt32(lblValue.Text) + 1);
    }
} 
```

我需要每 10 秒刷新一次更新面板。但是在页面加载之后，只有一次我能够做到这一点。有什么我想念的吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:35:35.917

尝试

```
 __dopostback('<%=myBtn.UniqueID%>',0); 
```

安装点击

```
 var btn = document.getElementById('<%=myBtn.ClientID %>');         
             btn.click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:25:54.777

为什么不试试 AJAX 定时器控制呢？这是一种以固定间隔回发的简单方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T03:10:47.380

删除`if (!IsPostBack)`，正因为如此，它只更新了一次，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T03:26:06.677

IsPostBack 表示页面已回传给自身

!IsPostBack 表示第一次加载页面时只是刷新页面，它不是从自己发布的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T03:55:27.377

你为什么不使用 AJAX Timer 控件来代替。它将以简洁、简洁和高效的方式实现相同的目的。

无论如何， setTimeout() 和 setInterval() 的工作方式相同。

关键区别在于：

*   **setTimeout**将等待指定的时间段，运行我们给它的代码，然后停止。
*   **另一方面，**setInterval将等待，运行代码——然后再次等待并再次运行代码——永远重复（或者直到我们告诉它停止）。****

 **简而言之，setTimeout() 在指定的时间间隔后只运行一次提供的代码，而 setInterval() 在指定的时间间隔后再次运行代码。

所以使用：

```
<script type="text/javascript">     
$(document).ready(    
     function ()
     {          
             setInterval('myFun()', 10000);      
     });
     function myFun() 
     {         
             var btn = document.getElementById('<%=myBtn.ClientID %>');         
             alert(btn);
             btn.click();      
     } 
</script> 
```

资料来源：jQuery - 忍者新手**

# php - suPHP 会话安全性

> ID：12926524
> 
> 赞同：0
> 
> 时间：2012-10-17T03:08:49.377
> 
> 标签：php, security, session, session-hijacking, suphp

我试图更好地理解 suPHP。

我显然在 google 上找到了 suPHP 文档，并找到了关于它是什么和做什么的通用答案，但我对它如何帮助会话安全和防止会话劫持感到困惑。

如果有人能为我澄清这一点，我将不胜感激。谷歌没有产生任何好的结果！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T21:33:40.587

`suphp`隔离共享主机上的 PHP 进程。它允许在不同的用户帐户下在每个虚拟主机上运行脚本。

这通过使同一服务器上的共享帐户无法访问会话存储来提高安全性。[`session_save_path`](http://php.net/session_save_path)有时，PHP 会话处理程序可能会使用一个全球可读的目录（请参阅参考资料）来存储序列化的`$_SESSION`blob。（例如`/tmp/session/`，这是一个低于标准的配置开始）。使用 suphp，这是受限制的。

[然而，这对会话劫持](http://www.google.com/search?q=session%20hijackin)无济于事，因为它源于 HTTP 数据包嗅探或跨站点脚本攻击。本地访问或仅读取会话存储目录是会话重放攻击的一种可能载体，但很少见。

# api - Foursquare 是否刚刚从场地列表中删除了特价商品？

> ID：12926526
> 
> 赞同：0
> 
> 时间：2012-10-17T03:09:16.187
> 
> 标签：api, foursquare

今天早些时候，我能够在完整的场地对象中获得“特价”对象。现在看来这是一个（因此破坏了我的应用程序的一部分），但我在“初始化日期”之后使用它们的版本化 api（我的是 20120813）。

这是今天的巧合还是我应该期待更多的事情发生？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:29:08.723

感谢您的报告！这是我们这边的一个错误，应该很快就会修复。同时，您可以假设不包含特价商品的场所没有特价商品（特价商品对象丢失，因为没有）。

# ios - 电池监控不定期更新

> ID：12926528
> 
> 赞同：2
> 
> 时间：2012-10-17T03:09:35.077
> 
> 标签：ios, cocoa-touch, uidevice, batterylevel

我正在监视电池事件`UIDeviceBatteryLevelDidChangeNotification`和`UIDeviceBatteryStateDidChangeNotification`. 我专门寻找**20%**和**10%**，但是，我看到这些事件以 23% 和 13% 触发，它们应该以**0.05**间隔或每**5%**触发。

## 问题

有没有其他人遇到过这种情况，或者有没有更好的方法来确保水平更准确？

## 例子

```
-(void)startMonitoringForBatteryChanges
{
    // Enable monitoring of battery status
    [[UIDevice currentDevice] setBatteryMonitoringEnabled:YES];

    // Request to be notified when battery charge or state changes
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(checkBatteryStatus) name:UIDeviceBatteryLevelDidChangeNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(checkBatteryStatus) name:UIDeviceBatteryStateDidChangeNotification object:nil];
}

- (void)checkBatteryStatus
{
    float warningLevel = [[UIDevice currentDevice] batteryLevel] * 100;

    if ( warningLevel == 20.0 ) // 20%
    {
        NSLog(@"20% Warning.");
    }

    if ( warningLevel == 10.0 ) // 10%
    {
        NSLog(@"10% Warning.");
    }
} 
```

# javascript - 数组中每个索引的函数调用之间的 javascript 延迟

> ID：12926531
> 
> 赞同：1
> 
> 时间：2012-10-17T03:10:14.953
> 
> 标签：javascript, jquery

## 目标：

*   对数组中的每个元素执行逻辑。
*   `X`在下一次执行之间等待毫秒。
*   `mouseover(#slider)`暂停延迟 - 如果延迟 = 1000 毫秒，并且已经过去 300 毫秒，`mouseout(#slider)`将触发恢复对剩余的 700 毫秒延迟进行倒计时。
*   在最后一个元素上执行后，循环回来再次执行 - 永远。

**这是一个视觉解释：**

```
var = s Array(1,2,3)

var x = s[1];   //get first element   
console.log(x); //do something to it
wait();         //START wait timer 1000ms

//------------> timer : 300ms
//------------> user  : mouseover (#slider) : pause timer
//------------> user  : waited 5000ms
//------------> user  : mouseout  (#slider) : resume timer
//------------> timer : 300ms --> still 700ms to go!
//------------> timer : 500ms
//------------> user  : mouseover (#slider) : pause timer
//------------> user  : waited 10000ms
//------------> user  : mouseout  (#slider) : resume timer
//------------> timer : 500ms --> still 500ms to go!

var x = s[2];   //get second element   
console.log(x); //do something to it
wait();         //START wait timer 1000ms

//------------> timer : 200ms
//------------> user  : mouseover (#slider) : pause timer
//------------> user  : onclick   (.slideButton1) : change index of array and clear timer
//------------> user  : waited 6000ms
//------------> user  : mouseout  (#slider) : resume timer
//------------> timer : 0ms --> still 1000ms to go!

var x = s[1];   //get first element   ( index was changed by clicking button )
console.log(x); //do something to it
wait();         //START wait timer 1000ms

// ... s[2] ... s[3] ...
//theres nothing else in the array, lets start back from s[1] again! 
```

## 解决方案：

**jQuery：**

[http://jsfiddle.net/zGd8a/8/](http://jsfiddle.net/zGd8a/8/)

该解决方案来自相关[**帖子**](https://stackoverflow.com/questions/13002674/jquery-each-index-when-passed-self)。这个插件的官方来源可以在[**这里**](http://roxon.in/scripts/fademe_jquery_plugin/)找到。

**原生 JS：**

[http://jsfiddle.net/SyTFZ/4/](http://jsfiddle.net/SyTFZ/4/)

**[Aadit M Shah](https://stackoverflow.com/users/783743/aadit-m-shah)**的这个**[回答](https://stackoverflow.com/questions/12926531/javascript-recursive-loop-through-array-with-delay-between-elements#12926811)**真的很有帮助。他还详细介绍了**Delta Timing**以及它在类似情况下的用途。

 **## 新目标：

抽象出这些方法中的任何一种以允许用于其他事物。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T03:13:41.387

好的，既然您已经完全简化了问题，这里有一个通用数组迭代器函数，它在数组的每个元素的迭代之间放置一个延迟，并且它会永远循环，直到回调函数返回`false`：

```
function iterateArrayWithDelay(arr, delay, fn) {
    var index = 0;

    function next() {
        // protect against empty array
        if (!arr.length) {
            return;
        }

        // see if we need to wrap the index
        if (index >= arr.length) {
            index = 0;
        }

        // call the callback
        if (fn(arr[index], arr, index) === false) {
            // stop iterating
            return;
        }

        ++index;

        // schedule next iteration
        setTimeout(next, delay);
    }
    // start the iteration
    next();
} 
```

而且，对于您的示例，您可以像这样使用它：

```
iterateArrayWithDelay(s, 1000, myFunction); 
```

您定义`myFunction`为处理每个元素的回调函数。回调传递了三个项目：

```
myFunction(item, array, i){
    // your code here to process item
} 
```

* * *

`.delay()`仅适用于使用动画队列的 jQuery 方法。在您的代码示例中，`.delay('1000')`由于在同一对象上没有 jQuery 动画方法，因此没有做任何事情。

至于内存泄漏，很难跟踪您正在做的事情的整体上下文，因为我们看不到由它表示的对象的生命周期`this`及其属性。这个序列看起来很奇怪：

```
var x = t.s[i];
...
delete t.s[i];
t.s.push(x); 
```

特别是，我看不到该`delete`语句实际上是如何做任何事情的，因为您仍然可以引用其中的内容，`x`因此不会对任何内容进行垃圾收集。此外，`delete`在 javascript 中使用摆脱对象属性，而不是释放对象或删除数组元素。要释放对象，您必须删除对该对象的所有引用（将它们设置为其他值，以便它们不再包含引用或让它们超出范围）。因此，由于您永远不会摆脱对 in 的任何内容的引用`t.s[i]`，因此不会释放任何内容。

* * *

您的使用`setTimeout()`不会导致递归。当您调用 时`setTimeout()`，它会设置一个计时器并将函数引用放入与该计时器关联的数据结构中。然后，调用函数继续运行并完成它的执行。因此，它在 setTimeout() 触发并再次调用它之前执行完毕。所以，它实际上不是递归。这是一堆连续的函数调用，由一个时间间隔分隔，一个在下一个可以运行之前完成（因为 javascript 是单线程的并且因为计时器是为将来设置的）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T03:45:45.373

好的，我不使用 jquery，而且很可能我不知道你想要实现什么。但是据我了解，我认为您应该这样做：

```
var i = 0;
var t = this;

var timer = new DeltaTimer(function (time) {
    // your animation
    var x = t.s[i];
    x.delay("1000").css("background-color", "#FAAF16");
    delete t.s[i];
    t.s.push(x);
    // increment i
    i++;
}, 1000);

var start = timer.start(); 
```

您会注意到这里我使用了一个名为`DeltaTimer`. 此构造函数在此[gist](https://gist.github.com/2056987 "JavaScript 的 Delta Timing — 要点")中定义。它允许您使用`start`和`stop`功能精确控制动画。传递的`render`函数有一个`time`参数，它是 a `Date`。该表达式`time - start`给出了调用函数的确切时间（例如`4`, `1000`, `2000`, ...）。

使用`DeltaTimer`over `setTimeout`or的好处`setInterval`是：

1.  它[会自行纠正](http://en.wikipedia.org/wiki/Delta_timing "Delta 计时 - 维基百科，免费的百科全书")。这意味着动画更流畅，延迟更少。
2.  可以通过启动和停止计时器来控制动画。
3.  函数调用的确切时间被传递给函数。这有助于跟踪正在渲染的帧，应该在哪里渲染精灵等。
4.  动画的逻辑与时序控制的逻辑是分开的。因此，代码更具凝聚力和更松散的耦合。

[您可以在此处](https://stackoverflow.com/a/11521360/783743 "javascript - setTimeOut() 或 setInterval() 。 4种方法来应用相同的东西。 哪个最好？ - 堆栈溢出")、[此处](https://stackoverflow.com/a/11624239/783743 "javascript - 重复setTimeout - 代码日志")和[此处](https://stackoverflow.com/a/11490193/783743 "javascript - 同时按下的键 - 代码日志")阅读我关于增量计时的其他答案。

**编辑1：**这实际上很简单。我们只需移出数组的第一个元素，对其进行处理，然后在最后将其推回。这是逻辑：

```
function loopIterate(array, callback, interval) {
    var timer = new DeltaTimer(function (time) {
        var element = array.shift();
        callback(element, time - start);
        array.push(element);
    }, interval);

    var start = timer.start();
}; 
```

现在我们可以创建一个数组并循环遍历它，如下所示：

```
var body = document.body;

loopIterate([1, 2, 3], function (element, time) {
    body.innerHTML += element + ": " + time + "<br/>";
}, 1000); 
```

你可以在这里看到输出：http: [//jsfiddle.net/aGQfr/](http://jsfiddle.net/aGQfr/)

**编辑2：**糟糕，我发现了一个问题。据我了解，您希望在当前元素*完成处理**后*的一段时间内处理下一个元素。我的增量计时脚本没有这样做。它仅以固定的时间间隔执行功能。

 *所以，你根本不需要增量时间。您需要在`setTimeout`处理完每个元素后调用：

```
function loopIterate(array, callback, interval) {
    var start = + new Date;
    process();

    function process() {
        var element = array.shift();
        callback(element, new Date - start);
        array.push(element);

        setTimeout(process, interval);
    }
}; 
```

之后只需创建一个数组并循环遍历它，如下所示：

```
loopIterate([1, 2, 3], function (element, time) {
    alert(element);
}, 1000); 
```

你可以在这里看到演示（注意你的浏览器可能不喜欢它）：http: [//jsfiddle.net/aGQfr/1/](http://jsfiddle.net/aGQfr/1/)

**编辑3：**您还可以组合方法一和方法二，以便您拥有一个脚本：

1.  在将下一个要处理的元素添加到事件队列之前等待处理完成。
2.  可以使用`start`和`stop`功能进行控制。
3.  给出调用回调的确切时间。
4.  将处理与时序控制分开。

我们将创建一个名为的构造函数`LoopIterator`，它返回一个带有`start`和`stop`方法的迭代器对象：

```
function LoopIterator(array, callback, interval) {
    var start, iterate, timeout;

    this.start = function () {
        if (!iterate) {
            start = + new Date;
            iterate = true;
            loop();
        }
    };

    this.stop = function () {
        if (iterate) {
            clearTimeout(timeout);
            iterate = false;
        }
    };

    function loop() {
        var element = array.shift();
        callback(element, new Date - start);
        array.push(element);

        if (iterate) timeout = setTimeout(loop, interval);
    }
} 
```

现在我们可以创建并启动一个新的迭代器，如下所示：

```
var iterator = new LoopIterator([1, 2, 3], function (element, time) {
    alert(element);
}, 3000);

iterator.start(); 
```

如果您希望您甚至可以分别在鼠标移到元素上或移出元素时停止和启动迭代器：

```
var div = document.getElementsByTagName("div")[0];
div.addEventListener("mouseout", iterator.start, false);
div.addEventListener("mouseover", iterator.stop, false); 
```

当停止时，迭代器的状态被保留，当再次启动时，它从停止的地方继续。

您可以在这里看到演示：http: [//jsfiddle.net/PEcUG/](http://jsfiddle.net/PEcUG/)

**编辑 4：**所以你想创建一个简单的滑块？让我们从 HTML 开始，然后是 CSS，然后是 JavaScript。

**的HTML：**

```
<div class="slider">
    <div class="slide">Slide 1</div>
    <div class="slide">Slide 2</div>
    <div class="slide">Slide 3</div>
</div> 
```

我们有一个`div`元素，其类名为`slider`（因为页面上可能有多个滑块）。每个滑块都有零个或多个`div`带有 class 的元素`slide`。每张幻灯片可能有任意内容。滑块也会有按钮，但我们不将其包含在 HTML 中，因为它将由 JavaScript 自动生成。没有冗余。另请注意，没有一张幻灯片是手动编号的。一切都由 JavaScript 处理。

**CSS：**

```
.slide {
    background-color: #EEEEEE;
    -moz-border-radius: 0.25em;
    -webkit-border-radius: 0.25em;
    border-radius: 0.25em;
    display: none;
    padding: 1em;
}

.slider-button {
    background-color: #CCCCCC;
    -moz-border-radius: 0.25em;
    -webkit-border-radius: 0.25em;
    border-radius: 0.25em;
    cursor: pointer;
    float: right;
    height: 1.25em;
    margin: 0.5em;
    width: 1.25em;
} 
```

您可以提供任意 CSS 以满足您的口味。然而，重要的一点是`.slide`必须有`display: none;`，因为幻灯片最初必须是隐藏的。也`.slider-button`必有`float: right;`。这很重要，因为向右浮动的元素的顺序颠倒了。因此，第一个按钮实际上是最后一个按钮。这必须由 JavaScript 正确处理，因此除非您知道自己在做什么，否则不要更改它。

**JavaScript：**

好吧，我将自下而上解释：

```
window.addEventListener("DOMContentLoaded", function () {
    var sliders = document.querySelectorAll(".slider");
    var length = sliders.length;

    for (var i = 0; i < length; i++)
        new Slider(sliders[i], 2000);
}, false); 
```

这`Slider`是一个构造函数，它初始化并启动它传递的滑块元素。它接受两张幻灯片之间的时间间隔作为第二个参数。这是代码`Slider`：

```
function Slider(slider, interval) {
    var slides = slider.querySelectorAll(".slide");
    var iterate, start, timeout, delay = interval;
    slides = Array.prototype.slice.call(slides);
    var buttons = [], numbers = [], goto = [];
    var length = slides.length;

    for (var i = 0; i < length; i++) {
        var button = document.createElement("div");
        button.setAttribute("class", "slider-button");
        slider.appendChild(button);
        buttons.unshift(button);
        numbers.push(i + 1);

        var handler = getHandler(length - i);
        button.addEventListener("click", handler, false);
        goto.unshift(handler);
    }

    this.goto = function (index) {
        var gotoSlide = goto[index];
        if (typeof gotoSlide === "function")
            gotoSlide();
    };

    slider.addEventListener("mouseover", stop, false);
    slider.addEventListener("mouseout", start, false);

    this.start = start;
    this.stop = stop;

    showSlide();
    start();

    function start() {
        if (!iterate) {
            iterate = true;
            start = + new Date;
            timeout = setTimeout(loop, delay);
        }
    }

    function stop() {
        if (iterate) {
            iterate = false;
            clearTimeout(timeout);
            delay = interval - new Date + start;
        }
    }

    function loop() {
        hideSlide();
        slideSlider();
        showSlide();

        if (iterate) {
            start = + new Date;
            timeout = setTimeout(loop, interval);
        }
    }

    function hideSlide() {
        slides[0].style.display = "none";
        buttons[0].style.backgroundColor = "#CCCCCC";
    }

    function slideSlider() {
        slides.push(slides.shift());
        buttons.push(buttons.shift());
        numbers.push(numbers.shift());
    }

    function showSlide() {
        slides[0].style.display = "block";
        buttons[0].style.backgroundColor = "#FAAF16";
    }

    function getHandler(number) {
        return function () {
            hideSlide();
            while (numbers[0] !== number) slideSlider();
            showSlide();
        };
    }
} 
```

该代码非常不言自明。的每个实例`Slider`都有一个`start`,`stop`和`goto`用于更好控制的方法。该`goto`方法采用幻灯片索引号。对于`n`幻灯片，索引范围从`0`到`n - 1`。而已。

滑块的演示在这里：http: [//jsfiddle.net/SyTFZ/4/](http://jsfiddle.net/SyTFZ/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T06:38:07.547

[插件 jquery-timing](http://creativecouple.github.com/jquery-timing/)可以帮助您使用非常短的代码完成此效果。已经有一个[等待 mouseover 的例子](http://creativecouple.github.com/jquery-timing/examples/pause-cycle-on-hover.html)。

我相信这也可以适应您的用例：

```
function noHover() {
   return this.is(':hover') ? this.wait('mouseleave') : this;
}

$('.images').repeat().each($).fadeIn($).wait(1000).wait(noHover).fadeOut($); 
```***

# php - 损坏的文件 - 在 div 中加载联系表单时 php 文件的路径错误（使用 jquery 加载功能） - 出了什么问题？

> ID：12926534
> 
> 赞同：-3
> 
> 时间：2012-10-17T03:10:29.217
> 
> 标签：php, javascript, jquery, web

好的，所以我在 www.mydomain.com/contact.html 的 div 中加载这个（这是一个联系表格）

```
<script type="text/javascript">
     $(document).ready(function() {
     $('#result').load('http://www.mydomain.com/support/contact.php #ticketForm');
      });
</script> 
```

它显示了联系表单，但是由于路径错误地设置为 www.mydomain.com/captcha.php （当我右键单击验证码“损坏的文件”图片时显示）而不是www.mydomain.com/support/captcha.php。似乎也缺少一些样式，很可能是因为路径错误的相同问题。

contact.php 需要的所有文件和文件夹都位于 www.mydomain.com/support 目录中，而不是 www.mydomain.com。

如何在不移动所有文件的情况下解决此问题？我不是编码员，所以请尽可能多地解释。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T03:37:01.783

由于我正在回复的答案评论被删除....

> `captcha.php`in的链接`contact.php`是错误的。

实际上...根据他所说的“它显示了联系表格，但是由于路径错误地设置为 www.mydomain.com/captcha.php （当我右键单击时显示），所以没有加载验证码图片验证码“损坏的文件”图片）而不是 www.mydomain.com/support/captcha.php”，这个答案是正确的，但没有尝试修复它。在您的`contact.php`中，将`captcha.php`链接更改为`support/captcha.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:38:12.173

尝试以下操作，相应地重命名文件路径。这将允许后续脚本的内联执行。

```
$(document).ready(function(){
    $.get(  
        'path/to/contact.php', 
        function(responseText){  
            $("#result").html(responseText);  
        }   
    );  
}); 
```

# python - Django 获取更具体的小时范围数据

> ID：12926542
> 
> 赞同：1
> 
> 时间：2012-10-17T03:11:01.077
> 
> 标签：python, django, django-queryset

这是我的模型：

```
class People(models.Model):
    Name = models.CharField(max_length=100)
    Lastname = models.CharField(max_length=100)
    Record_Date=models.DateTimeField() 
```

在views.py

```
"""Takes an integer value representing the day of week from 1 (Sunday) to 7 (Saturday)."""

    People.objects.filter(Record_Date__week_day=1) 
```

它给了我所有 Sunday Record_Date 的信息。那也行。但是，我想在每个星期天的数据中获得更具体的时间。例如，每周日 10:30-11:55。如何使用查询或其他替代方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:33:19.823

您始终可以将结果取出并在 python 中过滤。

```
results = People.objects.filter(Record_Date__week_day=1)
filtered = [r for r in results if 55 <= r.Record_Date.minute <= 30 and 10 <= r.Record_Date.hour <= 11] 
```

并拆分成一个循环以便于调试：

```
results = People.objects.filter(Record_Date__week_day=1)
filtered = []
for r in results:
    print r.Record_Date
    if 55 <= r.Record_Date.minute <= 30:
        print r.Record_Date.minute, r.Record_Date.hour
        if 10 <= r.Record_Date.hour <= 11:
            print "Found!"
            filtered.append(r) 
```

# objective-c - iOS 中的照片和视频浏览器

> ID：12926543
> 
> 赞同：0
> 
> 时间：2012-10-17T03:11:12.523
> 
> 标签：objective-c, ios, photo-gallery

是否有任何**iOS**外部库支持*照片浏览*和*视频浏览*，如 iPhone 中的原生 photoAlbum？

我知道很少有仅支持照片浏览的库，例如：[MWPhotoBrowser](https://github.com/mwaterfall/MWPhotoBrowser)、[EGOPhotoBrowser](https://github.com/enormego/PhotoViewer)等。

我正在寻找类似的东西，但也包括视频支持。

非常感谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:00:02.190

[PTShowcaseViewController](https://github.com/exalted/PTShowcaseViewController)支持图像、视频和 PDF。

# iphone - 关于在 Objective-C 中访问实例属性的最佳实践？

> ID：12926544
> 
> 赞同：1
> 
> 时间：2012-10-17T03:11:19.047
> 
> 标签：iphone, objective-c, ios, cocoa-touch, cocoa

> **可能重复：**
> [self.ivar 和 ivar 之间的区别？](https://stackoverflow.com/questions/4142177/difference-between-self-ivar-and-ivar)

我想知道，如果我在 Obj-C 中定义一个实例变量作为属性，例如，

```
@property (copy) NSString *str; 
```

和

```
@synthesize str = _str; 
```

我应该在实例方法中访问它吗

```
_str = @"ABC"; 
```

或者我应该使用访问器，即

```
[self setStr:@"ABC"]; 
```

有没有关于这方面的一般指导方针？

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T03:21:30.597

可以从类内部*读取*实例变量：

```
NSLog(@"str = %@", _str); 
```

但不要直接设置实例变量：

```
_str = @"ABC"; // No! 
```

这绕过了`copy`您在财产上如此小心放置的机制。所以改为这样做：

```
[self setStr:@"ABC"]; // Ok
self.str = @"ABC";    // Ok, shorter 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T03:41:59.493

I somewhat disagree with @Dietrich in drawing such a hard line. Utilizing property getters and setters are highly effective and provide extra stuff as a benefit such as automatic support for key value coding, however they also have drawback of doing extra stuff. As a practice, no external objects should ever access an objects member variables directly however you have the control and choice of whether to directly access and set the member variables within a class.

PROS for direct access:

1) faster - it may not seem like much but every time you use a method instead of directly access a variable you incur function overhead - do this in a loop and the cost is not insignificant.

2) explicit - you know exactly what is changing when you set the variable

CONS for direct access:

1) Loss of polymorphism on the getter and setter - by accessing the variable directly you lose the ability for subclasses to extend the functionality of those getters and setters which may be undesirable from an OOP perspective (but then again, that could also be a benefit depending on your architecture)

2) Loss of KVO (or at least making it harder) - key value observing can be very cool way to bind the changing of a member variables value to a method callback to cause some sort of event driven change (mostly things like binding a property to a UI layout/display). KVO is not for everyone though.

3) Loss of automatic synchronization (when declared as atomic) - sometimes you need your member variables to be thread safe. This is a major benefit to properties by them removing boiler plate code.

Ultimately, it's up to you as a developer. In practice, I tend to lean toward direct member variable access with the exception of when I am building an object that is to be thread safe OR to be architecturally robust for extension and KVO.

Hope this helps, the choice is yours! :)

# c# - 在 Windows7 (C#) 中运行管理进程

> ID：12926545
> 
> 赞同：0
> 
> 时间：2012-10-17T03:11:25.617
> 
> 标签：c#, windows-7, uac, runas

我需要（根据用户需求）从我的应用程序中多次运行管理进程。我希望用户只输入一次管理员凭据 - 所以我必须以某种方式存储凭据。

但是我听说由于 UAC 的设计方式，不可能做到这一点。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:14:21.683

您不能存储管理员凭据。相反，只需运行一次您的管理进程，然后将其提升并在后台运行，以防您需要执行更多操作。您可以通过 NamedPipes 或套接字与其通信。

有关如何使用 WCF 进行通信的示例，这里有一个非常简单的示例：http: [//bloggingabout.net/blogs/dennis/archive/2007/04/20/wcf-simple-example.aspx](http://bloggingabout.net/blogs/dennis/archive/2007/04/20/wcf-simple-example.aspx)

您可能应该在管理进程中创建 WCF ServiceHost。

# android - 什么是 Android 支持库？

> ID：12926548
> 
> 赞同：22
> 
> 时间：2012-10-17T03:11:33.173
> 
> 标签：android, android-support-library

Android 支持库的目的是什么？

这是什么意思`http://developer.android.com/tools/extras/support-library.html`？

目前我的应用 minSdkVersion 被限制在 10 级。

我正在尝试使用`ViewPager`，它不适用于更高的 API（例如 16 级）...

这个支持库是什么意思？是不是说我可以使用`ViewPager`，API级别低于16的手机用户仍然可以看到`ViewPager`widget？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T03:13:01.953

从支持库的描述：

> 支持包包含静态“支持库”，您可以将其添加到 Android 应用程序中，以便使用旧平台版本不可用的 API，或者提供不属于框架 API 的“实用程序”API。目标是通过提供更多可以与应用程序捆绑的 API 来简化您的开发，从而减少对平台版本的担忧。

当然，您只能使用较低的 SDK 可用功能。您还应该查看为旧 SDK 提供一些新功能的 Google 支持库。 [http://developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-17T03:13:15.897

是的，支持包将允许您将大部分片段小部件使用回 Android 1.6。使用`NineOldDroids`( [http://nineoldandroids.com/](http://nineoldandroids.com/)`ActionBarSherlock` ) 和来自同一开发人员的( [http://actionbarsherlock.com/](http://actionbarsherlock.com/) )等其他软件包，您可以从 ICS 及更高版本获得很多好东西，以便在旧的 Android 设备上工作。

您所要做的就是导入兼容性库。他们的工作方式是，对于新设备，他们将使用官方的 Android API，对于旧设备，他们将以兼容的方式模拟和运行它们，因此看起来可能会有所不同。

# jquery - 使用单个 CSS 选择器选择多个 div ID

> ID：12926550
> 
> 赞同：0
> 
> 时间：2012-10-17T03:12:12.003
> 
> 标签：jquery, css

我很少有相同的潜水，但它们有不同的 div ID。有没有办法使用某种选择器将 CSS 样式应用于所有 div ID，即跨浏览器兼容？我的 HTML 看起来像这样

```
<div id="field_0_dd"></div>
<div id="field_1_dd"></div>
<div id="field_2_dd"></div>
<div id="field_3_dd"></div>
<div id="field_4_dd"></div>
<div id="field_5_dd"></div> 
```

谢谢大家:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T03:15:08.307

您可以使用属性选择器（以选择`^=`器*开头，以*选择器`$=`结尾*）*：

```
$('div[id^="field_"][id$="_dd"]') 
```

尽管拥有这么多唯一 ID 很难管理。也给他们上课。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T03:16:53.867

如果您正在寻找与正则表达式匹配的 CSS 选择器，那么我认为您无法以跨浏览器兼容的方式获得它（尽管[带有 Regex 的 CSS2 属性选择器](https://stackoverflow.com/questions/49368/css2-attribute-selectors-with-regex)允许您选择，例如以.*开头*`field_`的所有内容）受 IE<=6 支持，但你去）。

但是，jQuery 具有过滤功能，可以使用它轻松完成此操作：

```
$('div')
    .filter(function() {
        return this.id.match(/field_\d+dd/);
    })
    .html("Matched!")
; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T03:28:28.903

只给他们上同一堂课！

```
<div class="common-class" id="field_0_dd"></div>
<div class="common-class" id="field_1_dd"></div>
<div class="common-class" id="field_2_dd"></div>
<div class="common-class" id="field_3_dd"></div>
<div class="common-class" id="field_4_dd"></div>
<div class="common-class" id="field_5_dd"></div>

.common-class{background:green;margin:auto;etc} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T03:14:44.567

添加一个`class`然后选择它。

例如`class = "dummy"`

在jQuery中

`$('.dummy')`...任何你想要的，例如`$('.dummy').css('color','red')`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T03:15:45.180

```
$('div[id^="field"]').addClass('styleyouwant'); 
```

在你的 CSS 中

```
.styleyouwant{

/**styles here**/
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-17T03:14:09.020

能做

*   这样做：http: [//jsfiddle.net/uznDG/](http://jsfiddle.net/uznDG/) **或**
*   添加一个类** [http://jsfiddle.net/JH4QQ/](http://jsfiddle.net/JH4QQ/)
*   链他们：http: [//jsfiddle.net/ZXBQM/](http://jsfiddle.net/ZXBQM/)

或下面的其他几个。

希望它适合原因`:)`

**代码**

```
$(document).ready(function() {
   $('div').css('color','green');

}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-17T03:14:21.917

[以选择器开头。](http://api.jquery.com/attribute-starts-with-selector/)

```
$('div[id^=field_]') 
```

# r - 热图按样本组排序，然后聚集在 R 中的组内

> ID：12926551
> 
> 赞同：6
> 
> 时间：2012-10-17T03:12:39.653
> 
> 标签：r, plot, heatmap

基本上，我想创建一个热图，其中将列细分为两组，然后在组中使用树状图，以便我们可以确定每个基因的上调和下调。

我正在处理每组大约 n>150 个患者样本的 RNA HT12 微阵列数据。虽然我在组之间实现了显着的差异表达，但在使用默认树状图时，我的热图并没有分成不同的病例/对照组。我使用的代码示例如下。{我尝试添加热图，但我还没有积分}

```
#Code for Heatmap
library(gplots) 
selected <- p.adjust(fit$p.value[, 2], "fdr") <0.005
esetSel <- HT_H_N[selected, ]
color.map <- function(STAT) { if (STAT=="case") "#00FF00" else "#0000FF" }
patientcolors <- unlist(lapply(esetSel$STAT, color.map))
heatmap(exprs(esetSel),ColSideColors=patientcolors) 
```

起初我认为组之间的差异表达程度很低，但当我为每个组单独生成热图时，病例组的表达似乎低于对照组。

所以我想把我的比较分成几组，然后通过聚类进行排序。起初，我喜欢对每个组执行 hclustering，然后创建一个新的 phenodata 字段，其中包含每个组的聚类顺序。然后使用该字段重新排序我的列。

有没有更简单的方法来实现这一点？

# delphi - .Net 公钥文件 (.pke) 到 OpenSSL PEM

> ID：12926554
> 
> 赞同：0
> 
> 时间：2012-10-17T03:13:03.797
> 
> 标签：delphi, encryption, openssl, bignum

我们正在尝试将公钥文件读入我们的 Delphi 应用程序，以便我们可以使用它来使用 OpenSSL 加密一些数据。我们一直试图在 libeay32.pas 中填充 pRSA 结构。

基本上，我们已经从 pke 文件中读取了模数和指数，以 64 为基数对它们进行解码，并将解码后的值存储在 Byte 类型的缓冲区中。

据我们所知，现在需要将这些转换为 BIGNUM 结构。Libeay32 提供了一个函数 BN_bin2bn 函数，它接受一个指针并输出一个 pBIGNUM。

问题是，我们可以将模数和指数缓冲区直接传递给 BN_bin2bn 还是首先需要将它们转换为与 BN_bin2bn 函数兼容的格式？

我们使用的是 Delphi 2007。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:04:16.117

我已经解决了这个问题。不需要转换。模数和指数可以以 64 为基数解码到缓冲区中，然后按原样直接传递给 BN_bin2bn 函数

# javascript - 附加选项以使用 jQuery 进行选择不起作用

> ID：12926558
> 
> 赞同：7
> 
> 时间：2012-10-17T03:13:34.637
> 
> 标签：javascript, jquery, html

所以，我正在尝试使用 jquery 将选项附加到 HTML5 选择，但由于某种原因它不起作用。以下是我的代码：

```
 for (var i = 0; i < itemsList.length; i++) {
        WL.Logger.debug(itemsList[i]);
        var elem = $("<option/>").val(itmesList[i]).text(itemsList[i]);     
        $('#itemsList').append(elem);
    } 
```

这里的 itemsList 是一个项目数组，我想将其值附加到 id 也是 itemsList 的选择下拉框中。这是html代码：

```
<div id="wrapper">
<label for="itmesList">Select item: </label>
<select id="itmesList"></select>
<div id="info"></div>
</div> 
```

有什么想法我在这里做错了吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T03:20:07.477

是的。

```
<select id="itmesList">
$('#itemsList')
itmesList != itemsList 
```

*编辑*

也在这里。

```
itmesList[i] 
```

当你见到它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T03:54:39.620

**HTML：**

```
<div id="wrapper">
<label for="itmesList">Select item: </label>
<select id="selectItem"></select>
<div id="info"></div>
</div> 
```

**查询：**

```
var itemsList = ['a', 'b', 'c'];
var options = "";
for (var i = 0; i < itemsList.length; i++) {
    alert(itemsList.length);

    options += '<option value= "' + itemsList[i] + '">' + itemsList[i] + '</option>';

}
$('#selectItem').html(options); 
```

**演示：http:** [//jsfiddle.net/Simplybj/WKfak/](http://jsfiddle.net/Simplybj/WKfak/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T03:23:11.500

以下将附加到选择的末尾

```
var i = 0;
        $(inputitemlist).each(function () {    // the input data....
            var itmesListValue= inputitemlist[i].Value;

            $('#itmesList').append($("<option></option>")
                                        .attr("value", itmesListValue)
                                        .text(itmesListValue));
            i = i + 1;
        }); 
```

# javascript - 斜体 Java 文本框

> ID：12926560
> 
> 赞同：-5
> 
> 时间：2012-10-17T03:13:49.413
> 
> 标签：javascript, italics

我需要通过在以下句子中以斜体显示名称来更新代码。
我将在innerHTML 中的什么位置放置标签？

```
`enter code here`
<html>
 <head>
  <title>
   Greetings
  </title>
  <meta charset="us-ascii">
 </head>
 <body>
  <h2>Greetings</h2>
  <p>
   Enter your name:
   <input type="text" id="nameBox" size=12 value="">
  </p>
  <input type="button" value="Click for Greeting"
   onclick="
    document.getElementById('outputDiv').innerHTML=
     'Hello '
     + document.getElementById('nameBox').value
     + ', welcome to my page.<br>Do you mind if I call you '
     + document.getElementById('nameBox').value
     + '?';
    ">
   <hr>
   <div id="outputDiv">
  </div>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:08:01.400

我测试了以下代码，它应该使回复斜体。仅供参考，对输出外观的所有更改都可以使用 CSS（样式标签）来完成。此外，保持 HTML、JavaScript 和 CSS 组件相互隔离也是一个好主意。

```
<!DOCTYPE html>
<html>
     <head>
        <title> Greetings</title>
        <meta charset="us-ascii">
        <script type="text/javascript">
            function greeting(){
                document.getElementById('outputDiv').innerHTML=
                'Hello <span class="name">'
                + document.getElementById('nameBox').value
                + '</span>, welcome to my page.<br>Do you mind if I call you <span class="name">'
                + document.getElementById('nameBox').value
                + '</span>?';
           }
        </script>
         <style type="text/css">
            span.name{
                font-style:italic;
            }
         </style>
     </head>
     <body>
         <h2>Greetings</h2>
         <p>
            Enter your name:<input type="text" id="nameBox" size=12 value="">
         </p>  
         <input type="button" value="Click for Greeting" onclick="greeting()">
          <hr>
          <div id="outputDiv">
         </div>
     </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T04:15:13.390

斜体的标签是`<i>`。您可以将它包裹在元素周围，使其以斜体显示。 `your name is <i> unknown to us </i>`

**不要使用这个标签！**

* * *

这适用于 (1) 需要保存每个字节的应用程序，或 (2) 需要支持像 Netscape 1.0 这样的古老浏览器的情况。
甚至电子邮件客户端也支持`<em>`标签或嵌入式 CSS。

更好的方法是使用`<em>`标签。
它的意思是“强调”。大多数浏览器以斜体显示此类文本。不同之处在于无法呈现斜体的浏览器。当遇到这样的浏览器时`<i>`，它会跳过标签并渲染其内容而没有效果。当它遇到`<em>`它时，它会通过任何可用的方式强调文本。改用粗体，更改文本颜色，插入空格...... 对于屏幕阅读器，它可能意味着“减慢 10% 并将音量增加 5%”。

现代方式是按语义标记，按 CSS 样式标记：

```
your name is <span class="name"> unknown to us </span> 
```

并在一个单独的 CSS 文件中

```
span.name { font-style: italic; } 
```

# arrays - 在 VTL 中对字符串数组进行排序

> ID：12926562
> 
> 赞同：2
> 
> 时间：2012-10-17T03:14:15.927
> 
> 标签：arrays, sorting, velocity, vtl

作为主要的 VB.NET 程序员，我对 VTL（速度模板语言）非常陌生。我目前正在尝试自定义使用 Velocity 模板和 Jython 的应用程序。

我在现有文件中有以下 VTL 代码。此代码从 JSON 文件中获取一些键值对，并将它们以整齐的表格形式输出到浏览器：

```
<table class="meta">
    #set($keySet = $metadata.getJsonObject().keySet())
    #foreach($key in $keySet)
    <tr>
        <th width="25%">$parent.getFriendlyName($key)</th>
        <td>
            #set($valueList = $metadata.getList($key))
            #if($valueList.size() > 1)
                #foreach($value in $valueList)
                    <span class="meta-value">$self.escape($value)</span><br/>
                #end
            #else
                $self.escape($valueList.get(0))
            #end
        </td>
    </tr>
    #end
</table> 
```

我可以显示 $keySet 数组：

```
[field1, field2, field3, field4] 
```

我试图做的是按字母顺序对 $keySet 数组中的字符串进行排序。

我尝试通过更改来使用 SortTool（[http://velocity.apache.org/tools/devel/javadoc/org/apache/velocity/tools/generic/SortTool.html](http://velocity.apache.org/tools/devel/javadoc/org/apache/velocity/tools/generic/SortTool.html)）

```
#foreach($key in $metadata.getJsonObject().keySet()) 
```

至

```
#foreach($key in $sorter.sort($metadata.getJsonObject().keySet())) 
```

但是 sort() 函数返回的数组是空的。

此外，我不认为[http://www.liferay.com/community/forums/-/message_boards/message/11146823](http://www.liferay.com/community/forums/-/message_boards/message/11146823)中列出的解决方案适用，因为我没有尝试对子字段进行排序。

任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-06T16:03:12.250

首先要检查的是您是否已添加`SortTool`到速度上下文中，使用如下代码：

```
VelocityContext velocityContext = new VelocityContext();
velocityContext.put("sorter", new SortTool()); 
```

话虽如此，最佳实践是在 Java 代码中而不是在模板逻辑中完成此类工作。有关更多详细信息和原因，请参阅我[的](https://stackoverflow.com/a/31249622/993262)答案。

# html - Chrome 图片不显示

> ID：12926565
> 
> 赞同：1
> 
> 时间：2012-10-17T03:14:32.933
> 
> 标签：html, google-chrome

我有一个奇怪的问题，图像没有显示在 chrome 中，但它在 Firefox 中显示得很好。当我查看 html 代码时，完整且正确的路径就在那里，但没有显示图像。相同的路径在 Firefox 中，图像显示得很好。

当我右键单击 chrome 图像占位符以从 chrome 下载图像时，我可以看到文件名，但是当我单击下载时，chrome 给我“没有文件”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:19:13.797

更改您的 chrome 设置。允许显示图像。
转到 - `chrome://chrome/settings/content`，在图像部分，允许显示图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:30:00.293

你写的图片的路径是什么

```
<img src=" "> 
```

?

您可能以非标准化的方式键入它...

# ios - NSLayoutConstraints 是可动画的吗？

> ID：12926566
> 
> 赞同：202
> 
> 时间：2012-10-17T03:14:41.113
> 
> 标签：ios, animation, autolayout

我正在尝试为一些视图设置动画，以便它们被横向的巨型键盘挡住。如果我只是为帧设置动画效果很好，但其他人认为这会适得其反，我应该更新 NSLayoutConstraints。但是，它们似乎不是可动画的。有没有人让他们成功地工作？

```
//heightFromTop is an NSLayoutConstraint referenced from IB
[UIView animateWithDuration:0.25 animations:^{
    self.heightFromTop.constant= 550.f;
}]; 
```

结果是立即跳到有问题的高度。

* * *

## 回答 #1

> 赞同：489
> 
> 时间：2012-10-17T03:25:31.227

只需遵循这个确切的模式：

```
self.heightFromTop.constant = 550.0f;
[myView setNeedsUpdateConstraints];

[UIView animateWithDuration:0.25f animations:^{
   [myView layoutIfNeeded];
}]; 
```

添加到哪里`myView`的视图在哪里`self.heightFromTop`。您的视图正在“跳跃”，因为您在动画块中所做的唯一一件事就是设置约束，这不会立即导致布局。在您的代码中，布局发生在您 set 之后的下一个运行循环中`heightFromTop.constant`，到那时您已经超出了动画块的范围。

在斯威夫特 2 中：

```
self.heightFromTop.constant = 550
myView.setNeedsUpdateConstraints()

UIView.animateWithDuration(0.25, animations: {
   myView.layoutIfNeeded()
}) 
```

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2014-01-23T11:15:59.130

Apple 建议的方式有点不同（[请参阅“自动布局所做的动画更改”部分中的示例](https://developer.apple.com/library/ios/documentation/userexperience/conceptual/AutolayoutPG/AutolayoutPG.pdf)）。首先你需要在动画之前调用 layoutIfNeeded。然后在动画块中添加你的动画内容，然后在最后再次调用 layoutIfNeeded。对于像我这样正在过渡到自动布局的人来说，它更类似于我们之前使用动画块内的帧所做的动画。我们只需要调用 layoutIfNeeded 两次——在动画之前和动画之后：

```
[self.view layoutIfNeeded]; // Ensures that all pending layout operations have been completed

[UIView animateWithDuration:1.0f animations:^{

  // Make all constraint changes here
  self.heightFromTop.constant= 550.f;

  [self.view layoutIfNeeded]; // Forces the layout of the subtree animation block and then captures all of the frame changes

}]; 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-01-24T00:59:05.523

我尝试了@Centurion 的方法，但是如果从情节提要中加载，我的视图会以某种方式动画到错误的帧。如果我将第一个替换为 ，问题就会消失`layoutIfNeeded`，`updateConstraintsIfNeeded`尽管我不知道为什么。如果有人能给出解释，将不胜感激。

```
[self.view updateConstraintsIfNeeded];
[UIView animateWithDuration:1.0 animations:^{
    self.myConstraint.constant= 100;
    [self.view layoutIfNeeded];
}]; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-11-01T19:49:44.857

我遇到了类似的问题，这个线程对克服它很有帮助。

erurainon 的回答让我走上了正轨，但我想提出一个稍微不同的答案。erurainon 建议的代码对我不起作用，因为我仍然有一个跳跃而不是动画过渡。cnotethegr8 提供的链接给了我有效的答案：

**自动布局指南** [https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/AutolayoutPG/AutoLayoutbyExample/AutoLayoutbyExample.html](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/AutolayoutPG/AutoLayoutbyExample/AutoLayoutbyExample.html) （一直到页面底部）。

**与 erurainon 的答案有一些不同之处：**

1.  在调用动画方法之前在容器视图上调用 layoutIfNeeded（而不是 myView 上的 setNeedsUpdateConstraints）。
2.  在动画块中设置新的约束。
3.  在动画方法中（在设置约束之后）对容器视图调用 layoutIfNeeded，而不是在 myView 上调用。

这将遵循 Apple 在上面的链接中建议的模式。

**一个例子**

我想为特定视图设置动画，单击按钮即可关闭或展开它。由于我使用的是自动布局并且不想在代码中硬编码任何尺寸（在我的情况下为高度），我决定在 viewDidLayoutSubviews 中捕获高度。使用自动布局时，您需要使用此方法而不是 viewWillAppear。由于 viewDidLayoutSubviews 可能会被多次调用，所以我使用了一个 BOOL 来让我知道我的初始化的第一次执行。

```
// Code snippets

@property (weak, nonatomic) IBOutlet UIView *topView; // Container for minimalView
@property (weak, nonatomic) IBOutlet UIView *minimalView; // View to animate

@property (nonatomic) CGFloat minimalViewFullHeight; // Original height of minimalView

@property (weak, nonatomic) IBOutlet NSLayoutConstraint *minimalViewHeightConstraint;

@property (nonatomic) BOOL executedViewDidLayoutSubviews;

- (void)viewDidLayoutSubviews
{
    [super viewDidLayoutSubviews];

    // First execution of viewDidLayoutSubviews?
    if(!self.executedViewDidLayoutSubviews){
        self.executedViewDidLayoutSubviews = YES;

        // Record some original dimensions
        self.minimalViewFullHeight = self.minimalView.bounds.size.height;

        // Setup our initial view configuration & let system know that 
        // constraints need to be updated.
        self.minimalViewHeightConstraint.constant = 0.0;
        [self.minimalView setNeedsUpdateConstraints];

        [self.topView layoutIfNeeded];
    }
} 
```

**调整完整动作片段的大小**

```
// An action to close our minimal view and show our normal (full) view
- (IBAction)resizeFullAction:(UIButton *)sender {

    [self.topView layoutIfNeeded];

    [UIView transitionWithView:self.minimalView
                  duration:1.0
                   options:UIViewAnimationOptionTransitionCrossDissolve
                animations:^{
                    self.minimalViewHeightConstraint.constant = 0.0;

                    // Following call to setNeedsUpdateConstraints may not be necessary
                    [self.minimalView setNeedsUpdateConstraints];

                    [self.topView layoutIfNeeded];

                } completion:^(BOOL finished) {
                    ;
                }];

    // Other code to show full view
    // ...
} 
```

**调整小动作片段的大小**

```
// An action to open our minimal view and hide our normal (full) view
- (IBAction)resizeSmallAction:(UIButton *)sender {

    [self.topView layoutIfNeeded];

    [UIView transitionWithView:self.minimalView
                  duration:1.0
                   options:UIViewAnimationOptionTransitionCrossDissolve
                animations:^{
                    self.minimalViewHeightConstraint.constant = self.minimalViewFullHeight;
                    [self.minimalView setNeedsUpdateConstraints];

                    [self.topView layoutIfNeeded];

                } completion:^(BOOL finished) {
                    ;
                }];

        // Other code to hide full view
        // ...
    } 
```

如果您愿意，可以使用 animateWithDuration 而不是 transitionWithView。

希望这可以帮助。

# objective-c - 我可以使用 NSKeyedArchiver 保存一组 NSMutableDictionary

> ID：12926568
> 
> 赞同：0
> 
> 时间：2012-10-17T03:14:46.703
> 
> 标签：objective-c, ios

假设我创建了一个自定义类来保存一个**NSMutableDictionary**数组。

```
 @interface CustomStore : NSObject
{
    NSMutableArray *allDictionary;
} 
```

我可以使用 archiveRootObject:toFile 来保存列表吗？

如果我想从字典中检索自定义类怎么办。我需要在自定义类中确认 encodeObject:forKey: 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:20:44.280

是的，是的。这是一个不错的教程： [http ://cocoadevcentral.com/articles/000084.php](http://cocoadevcentral.com/articles/000084.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:28:59.417

您的自定义类需要遵守 NSCoding 协议。就像实现 initWithCoder: 和 encodeWithCoder: 一样简单。一旦你的自定义类实现了 NSCoding 协议，你就可以开始了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T03:30:55.567

通过使用 NSKeyArchiver，要存储的对象必须通过 NSCoding 确认实现。

```
@interface YouClassName : NSObject <NSCoding> 
```

并实施

```
- (id)initWithCoder:(NSCoder *)aDecoder;
- (void)encodeWithCoder:(NSCoder *)aCoder; 
```

因此，在您的自定义类实现上述功能后，就可以将它们成功保存在列表中。

# tree - TreeCtrl 中的等效命令

> ID：12926573
> 
> 赞同：0
> 
> 时间：2012-10-17T03:15:32.460
> 
> 标签：tree, tcl

我已经使用 Bwidgets 构建了一个树视图，现在我正在尝试将其转换为 TreeCtrl，但我无法在 TreeCtrl 中找出 Bwidget 命令的等效命令：

```
$tree itemcget $node -data 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:12:58.383

似乎没有任何机制可以将用户指定的数据直接附加到[TkTreeCtrl](http://tktreectrl.sourceforge.net/treectrl.html)中的节点。解决这个问题的最简单方法是将数据存储在一个数组中，而不是由节点的 ID（以及树小部件名称，如果您在应用程序中使用多个）索引。

```
# Set the value (assuming you're only making one item here)
set id [$tree item create ...]
set ::userdata($tree,$id) $yourDataItem 
```

```
# Get the value for a particular item
set id [$tree item id $itemDesc]
puts "the data for $id is $::userdata($tree,$id)" 
```

```
# Remove the value when removing the item
set id [$tree item id $itemDesc]
unset ::userdata($tree,$id)
$tree item delete $id 
```

我看到很多人建议将 TkTreeCtrl 包装在一个类中（例如，Snit、TclOO、XOTcl），以使其在特定情况下更易于使用。这是那种包装得很好的东西……</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:55:10.617

关于这个问题，我的项目负责人提出了一个非常简单的解决方案，用于将用户指定的数据附加到 Treectrl 节点，

您创建嵌入数据的节点

```
$tree item element configure $itemID $columnID elemText -text $text -data $data 
```

然后，当您想将数据用于任何目的时

```
set dataObj [$tree item element cget $itemID $columnID elemText -data] 
```

现在数据保存在 dataObj 中，您可以将其用于任何操作、操作，它为我提供了 Bwidget tree 命令的确切功能 -

```
$tree itemcget $node -data ------> which i thought was not directly possible in TreeCtrl. 
```

我将在下面发布一个示例程序供您进行实验，并对格式表示抱歉：

```
package require treectrl
package require TclOO

oo::class create Foo {
    method test { obj } {
        puts "This is otuput from test method in instant of class D. $obj"
    }
}

treectrl .t -showheader 0 -selectmode single -showroot 0 -yscrollcommand {.y set}
scrollbar .y -ori vert -command ".t yview"
pack .y  -side right -fill y
pack .t  -side right -fill both -expand 1
set columnID [.t column create -text "Column 0"]
.t configure -treecolumn $columnID

.t element create el1 text
.t element create el2 rect -showfocus yes

.t style create s1
.t style elements s1 [list el1 el2]

.t style layout s1 el2 -union el1

.t configure -defaultstyle s1

# easily add a node with text $text as a child of $parent (the root is specified by the string "root")

proc add_node {parent text data} {
    set itemID [.t item create -button yes ]
    .t item element configure $itemID 0 el1 -text $text -data $data
    .t item collapse $itemID
    .t item lastchild $parent $itemID
    return $itemID
}

set sample abcdef
set data1 $sample
set id1 [add_node root "This is data 1" $data1]
set id4 [add_node root "This is data 4" $data1]
set id5 [add_node root "This is data 5" $data1]
set id6 [add_node root "This is data 6" $data1]
set id7 [add_node root "This is data 7" $data1]
set id8 [add_node root "This is data 8" $data1]
set id9 [add_node root "This is data 9" $data1]
set id10 [add_node root "This is data 10" $data1]
set sample2 $id1
set sample3 $sample2

set dataObj [.t item element cget $sample3 0 el1 -data]
puts "--- $dataObj"

set dObj [Foo new]
set id2 [add_node $id1 "This is object Foo node" $dObj]

set dObj_1 [.t item element cget $id2 0 el1 -data]
$dObj test $dObj_1 
```

在以下示例中使用值 dataObj 和 dObj_1 不仅可以在该程序中使用，而且可以在正确包含包和方法调用的多个命名空间之间使用。

# python - 在 Python 中加快字符串与对象的配对

> ID：12926575
> 
> 赞同：33
> 
> 时间：2012-10-17T03:15:42.563
> 
> 标签：python, performance, algorithm, optimization, cython

我试图找到一种有效的方法来将包含整数点的数据行配对在一起，并将它们存储为 Python 对象。数据由坐标点`X`和`Y`坐标点组成，以逗号分隔的字符串表示。这些点必须成对，例如`(x_1, y_1), (x_2, y_2), ...`等，然后存储为对象列表，其中每个点都是一个对象。下面的函数`get_data`生成这个示例数据：

```
def get_data(N=100000, M=10):
    import random
    data = []
    for n in range(N):
        pair = [[str(random.randint(1, 10)) for x in range(M)],
                [str(random.randint(1, 10)) for x in range(M)]]
        row = [",".join(pair[0]),
               ",".join(pair[1])]
        data.append(row)
    return data 
```

我现在的解析代码是：

```
class Point:
    def __init__(self, a, b):
        self.a = a
        self.b = b

def test():
    import time
    data = get_data()
    all_point_sets = []
    time_start = time.time()
    for row in data:
        point_set = []
        first_points, second_points = row
        # Convert points from strings to integers
        first_points = map(int, first_points.split(","))
        second_points = map(int, second_points.split(","))
        paired_points = zip(first_points, second_points)
        curr_points = [Point(p[0], p[1]) \
                       for p in paired_points]
        all_point_sets.append(curr_points)
    time_end = time.time()
    print "total time: ", (time_end - time_start) 
```

目前，100,000 个点需要将近 7 秒，这似乎非常低效。部分低效率似乎源于对和- 的计算`first_points`以及将它们转换为对象。`second_points``paired_points`

效率低下的另一部分似乎是`all_point_sets`. 取出`all_point_sets.append(...)`线似乎使代码从〜7秒变为2秒！

如何加快速度？谢谢。

**跟进**感谢大家的好建议-他们都很有帮助。但即使进行了所有改进，处理 100,000 个条目仍然需要大约 3 秒。我不确定为什么在这种情况下它不仅仅是即时的，以及是否有另一种表示可以使它即时。在 Cython 中编码会改变事情吗？有人可以举个例子吗？再次感谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-17T04:26:16.613

在处理*大量*对象的创建时，通常可以使用的最大性能增强是关闭垃圾收集器。每一“代”对象，垃圾收集器都会遍历内存中的所有活动对象，寻找属于循环的一部分但活动对象未指向的对象，从而有资格进行内存回收。有关一些信息，请参阅[Doug Helmann 的 PyMOTW GC 文章](http://www.doughellmann.com/PyMOTW/gc/)（更多信息可能可以通过 google 和一些决心找到）。默认情况下，垃圾收集器每 700 个左右创建但未回收的对象运行一次，后续生成的运行频率稍低（我忘记了确切的细节）。

使用标准元组而不是 Point 类可以节省一些时间（使用命名元组介于两者之间），巧妙的拆包可以节省一些时间，但在创建批次之前关闭 gc 可以获得最大的收益您*知道*不需要 gc'd 的对象，然后再将其重新打开。

一些代码：

```
def orig_test_gc_off():
    import time
    data = get_data()
    all_point_sets = []
    import gc
    gc.disable()
    time_start = time.time()
    for row in data:
        point_set = []
        first_points, second_points = row
        # Convert points from strings to integers
        first_points = map(int, first_points.split(","))
        second_points = map(int, second_points.split(","))
        paired_points = zip(first_points, second_points)
        curr_points = [Point(p[0], p[1]) \
                       for p in paired_points]
        all_point_sets.append(curr_points)
    time_end = time.time()
    gc.enable()
    print "gc off total time: ", (time_end - time_start)

def test1():
    import time
    import gc
    data = get_data()
    all_point_sets = []
    time_start = time.time()
    gc.disable()
    for index, row in enumerate(data):
        first_points, second_points = row
        curr_points = map(
            Point,
            [int(i) for i in first_points.split(",")],
            [int(i) for i in second_points.split(",")])
        all_point_sets.append(curr_points)
    time_end = time.time()
    gc.enable()
    print "variant 1 total time: ", (time_end - time_start)

def test2():
    import time
    import gc
    data = get_data()
    all_point_sets = []
    gc.disable()
    time_start = time.time()
    for index, row in enumerate(data):
        first_points, second_points = row
        first_points = [int(i) for i in first_points.split(",")]
        second_points = [int(i) for i in second_points.split(",")]
        curr_points = [(x, y) for x, y in zip(first_points, second_points)]
        all_point_sets.append(curr_points)
    time_end = time.time()
    gc.enable()
    print "variant 2 total time: ", (time_end - time_start)

orig_test()
orig_test_gc_off()
test1()
test2() 
```

一些结果：

```
>>> %run /tmp/flup.py
total time:  6.90738511086
gc off total time:  4.94075202942
variant 1 total time:  4.41632509232
variant 2 total time:  3.23905301094 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-22T09:48:21.527

简单地用 pypy 运行会产生很大的不同

```
$ python pairing_strings.py 
total time:  2.09194397926
$ pypy pairing_strings.py 
total time:  0.764246940613 
```

禁用 gc 对 pypy 没有帮助

```
$ pypy pairing_strings.py 
total time:  0.763386964798 
```

点的命名元组使情况变得更糟

```
$ pypy pairing_strings.py 
total time:  0.888827085495 
```

使用 itertools.imap 和 itertools.izip

```
$ pypy pairing_strings.py 
total time:  0.615751981735 
```

使用 int 的记忆版本和迭代器来避免 zip

```
$ pypy pairing_strings.py 
total time:  0.423738002777 
```

这是我完成的代码。

```
def test():
    import time
    def m_int(s, memo={}):
        if s in memo:
            return memo[s]
        else:
            retval = memo[s] = int(s)
            return retval
    data = get_data()
    all_point_sets = []
    time_start = time.time()
    for xs, ys in data:
        point_set = []
        # Convert points from strings to integers
        y_iter = iter(ys.split(","))
        curr_points = [Point(m_int(i), m_int(next(y_iter))) for i in xs.split(",")]
        all_point_sets.append(curr_points)
    time_end = time.time()
    print "total time: ", (time_end - time_start) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-21T19:51:43.690

我会

*   使用`numpy`数组来解决这个问题（`Cython`如果这仍然不够快，将是一个选项）。
*   将点存储为向量而不是单个`Point`实例。
*   依赖现有的解析器
*   （如果可能）解析数据一次，然后以二进制格式（如 hdf5）存储以进行进一步计算，这将是最快的选择（见下文）

Numpy 内置了读取文本文件的函数，例如[`loadtxt`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html). 如果您将数据存储在结构化数组中，则不一定需要将其转换为另一种数据类型。我将使用[Pandas](http://pandas.pydata.org/)，它是基于`numpy`. 处理和处理结构化数据更方便一些。`Pandas`有自己的文件解析器[`read_csv`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.io.parsers.read_csv.html#pandas.io.parsers.read_csv)。

为了计时，我将数据写入文件，就像在您的原始问题中一样（它基于您的`get_data`）：

```
import numpy as np
import pandas as pd

def create_example_file(n=100000, m=20):
    ex1 = pd.DataFrame(np.random.randint(1, 10, size=(10e4, m)),
                       columns=(['x_%d' % x for x in range(10)] +
                                ['y_%d' % y for y in range(10)]))
    ex1.to_csv('example.csv', index=False, header=False)
    return 
```

这是我用来读取 a 中数据的代码[`pandas.DataFrame`](http://pandas.pydata.org/pandas-docs/stable/api.html#dataframe)：

```
def with_read_csv(csv_file):
    df = pd.read_csv(csv_file, header=None,
                     names=(['x_%d' % x for x in range(10)] +
                            ['y_%d' % y for y in range(10)]))
    return df 
```

（请注意，我假设您的文件中没有标题，因此我必须创建列名。）

读取数据速度很快，它应该更节省内存（请参阅[这个问题](https://stackoverflow.com/q/993984/1301710)），并且数据存储在一个数据结构中，您可以以一种快速、矢量化的方式进一步使用：

```
In [18]: %timeit string_to_object.with_read_csv('example.csv')
1 loops, best of 3: 553 ms per loop 
```

开发分支中有一个新[的基于 C 的解析器](http://wesmckinney.com/blog/?p=543)，在我的系统上需要 414 毫秒。您的测试在我的系统上花费了 2.29 秒，但实际上并没有可比性，因为数据不是从文件中读取的，而是您创建了`Point`实例。

如果您曾经读过数据，则可以将其存储在`hdf5`文件中：

```
In [19]: store = pd.HDFStore('example.h5')

In [20]: store['data'] = df

In [21]: store.close() 
```

下次你需要数据时，你可以从这个文件中读取它，这真的很快：

```
In [1]: store = pd.HDFStore('example.h5')

In [2]: %timeit df = store['data']
100 loops, best of 3: 16.5 ms per loop 
```

但是，它仅适用于您多次需要相同数据的情况。

`numpy`当您进行进一步计算时，使用具有大型数据集的基于数组将具有优势。`Cython`如果您可以使用矢量化`numpy`函数和索引，不一定会更快，如果您真的需要迭代，它会更快（另请参见[这个答案](https://stackoverflow.com/a/12877257/1301710)）。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-10-23T22:45:00.597

更快的方法，使用 Numpy（加速约**7x**）：

```
import numpy as np
txt = ','.join(','.join(row) for row in data)
arr = np.fromstring(txt, dtype=int, sep=',')
return arr.reshape(100000, 2, 10).transpose((0,2,1)) 
```

性能对比：

```
def load_1(data):
    all_point_sets = []
    gc.disable()
    for xs, ys in data:
        all_point_sets.append(zip(map(int, xs.split(',')), map(int, ys.split(','))))
    gc.enable()
    return all_point_sets

def load_2(data):
    txt = ','.join(','.join(row) for row in data)
    arr = np.fromstring(txt, dtype=int, sep=',')
    return arr.reshape(100000, 2, 10).transpose((0,2,1)) 
```

`load_1`在我的机器上运行 1.52 秒；`load_2`运行时间为**0.20**秒，提高了 7 倍。这里最大的警告是，它要求您 (1) 提前知道所有内容的长度，以及 (2) 每行包含完全相同数量的点。这适用于您的`get_data`输出，但可能不适用于您的真实数据集。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-10-21T01:41:26.247

通过使用数组和一个在访问时懒惰地构造 Point 对象的持有者对象，我得到了 50% 的改进。我还“开槽”了 Point 对象以获得更好的存储效率。但是，元组可能会更好。

如果可能的话，更改数据结构也可能会有所帮助。但这永远不会是瞬间的。

```
from array import array

class Point(object):
    __slots__ = ["a", "b"]
    def __init__(self, a, b):
        self.a = a
        self.b = b

    def __repr__(self):
        return "Point(%d, %d)" % (self.a, self.b)

class Points(object):
    def __init__(self, xs, ys):
        self.xs = xs
        self.ys = ys

    def __getitem__(self, i):
        return Point(self.xs[i], self.ys[i])

def test3():
    xs = array("i")
    ys = array("i")
    time_start = time.time()
    for row in data:
        xs.extend([int(val) for val in row[0].split(",")])
        ys.extend([int(val) for val in row[1].split(",")])
    print ("total time: ", (time.time() - time_start))
    return Points(xs, ys) 
```

但是在处理大量数据时，我通常会使用 numpy N 维数组（ndarray）。如果可以更改原始数据结构，那么这可能是最快的。如果它可以被构造成线性读取 x,y 对，然后重塑 ndarray。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-10-17T04:01:37.947

1.  进行（约 10%`Point`的`namedtuple`加速）：

    ```
    from collections import namedtuple
    Point = namedtuple('Point', 'a b') 
    ```

2.  在迭代期间解包（~2-4% 加速）：

    ```
    for xs, ys in data: 
    ```

3.  使用`n`-argument 形式`map`来避免 zip（约 10% 加速）：

    ```
    curr_points = map(Point,
        map(int, xs.split(',')),
        map(int, ys.split(',')),
    ) 
    ```

鉴于点集很短，生成器可能是矫枉过正，因为它们具有更高的固定开销。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-10-24T06:51:11.843

cython 能够将速度提高 5.5 倍

```
$ python split.py
total time:  2.16252303123
total time:  0.393486022949 
```

这是我使用的代码

### 分裂.py

```
import time
import pyximport; pyximport.install()
from split_ import test_

def get_data(N=100000, M=10):
    import random
    data = []
    for n in range(N):
        pair = [[str(random.randint(1, 100)) for x in range(M)],
                [str(random.randint(1, 100)) for x in range(M)]]
        row = [",".join(pair[0]),
               ",".join(pair[1])]
        data.append(row)
    return data

class Point:
    def __init__(self, a, b):
        self.a = a
        self.b = b

def test(data):
    all_point_sets = []
    for row in data:
        point_set = []
        first_points, second_points = row
        # Convert points from strings to integers
        first_points = map(int, first_points.split(","))
        second_points = map(int, second_points.split(","))
        paired_points = zip(first_points, second_points)
        curr_points = [Point(p[0], p[1]) \
                       for p in paired_points]
        all_point_sets.append(curr_points)
    return all_point_sets

data = get_data()
for func in test, test_:
    time_start = time.time()
    res = func(data)
    time_end = time.time()
    print "total time: ", (time_end - time_start) 
```

### split_.pyx

```
from libc.string cimport strsep
from libc.stdlib cimport atoi

cdef class Point:
    cdef public int a,b

    def __cinit__(self, a, b):
        self.a = a
        self.b = b

def test_(data):
    cdef char *xc, *yc, *xt, *yt
    cdef char **xcp, **ycp
    all_point_sets = []
    for xs, ys in data:
        xc = xs
        xcp = &xc
        yc = ys
        ycp = &yc
        point_set = []
        while True:
            xt = strsep(xcp, ',')
            if xt is NULL:
                break
            yt = strsep(ycp, ",")
            point_set.append(Point(atoi(xt), atoi(yt)))
        all_point_sets.append(point_set)
    return all_point_sets 
```

* * *

进一步探索，我可以大致分解一些 cpu 资源

```
 5% strsep()
         9% atoi()
        23% creating Point instances
        35% all_point_sets.append(point_set) 
```

如果 cython 能够直接从 csv（或其他）文件中读取，而不必通过 Python 对象拖网，我希望可能会有改进。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-10-25T22:25:47.053

您对将坐标作为`.x`和`.y`属性访问的依附程度如何？令我惊讶的是，我的测试表明最大的单一时间接收器不是对 的调用`list.append()`，而是`Point`对象的构造。它们构建一个元组需要四倍的时间，而且数量很多。只需在代码中替换`Point(int(x), int(y))`为元组即可`(int(x), int(y))`节省超过 50% 的*总*执行时间（Win XP 上的 Python 2.6）。也许您当前的代码仍有优化空间？

如果您真的打算使用`.x`and访问坐标`.y`，您可以尝试使用`collections.namedtuple`. 它不如普通元组快，但*似乎*比代码中的 Pair 类快得多（我在对冲，因为单独的时序基准给了我奇怪的结果）。

```
Pair = namedtuple("Pair", "x y")  # instead of the Point class
...
curr_points = [ Pair(x, y) for x, y in paired_points ] 
```

如果你需要走这条路，从元组派生一个类也是值得的（比普通元组的成本最低）。如果需要，我可以提供详细信息。

**PS**我看到@MattAnderson 很久以前就提到过对象元组问题。但这是一个重大影响（至少在我的盒子上），甚至在禁用垃圾收集之前。

```
 Original code: total time:  15.79
      tuple instead of Point: total time:  7.328
 namedtuple instead of Point: total time:  9.140 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-10-17T04:02:34.087

您可以剃掉几秒钟：

```
class Point2(object):
    __slots__ = ['a','b']
    def __init__(self, a, b):
        self.a = a
        self.b = b

def test_new(data):
    all_point_sets = []
    for row in data:
        first_points, second_points = row
        r0 = map(int, first_points.split(","))
        r1 = map(int, second_points.split(","))
        cp = map(Point2, r0, r1)
        all_point_sets.append(cp) 
```

这给了我

```
In [24]: %timeit test(d)
1 loops, best of 3: 5.07 s per loop

In [25]: %timeit test_new(d)
1 loops, best of 3: 3.29 s per loop 
```

通过预先分配空间，我可以间歇性地再缩短 0.3 秒，`all_point_sets`但这可能只是噪音。当然还有让事情变得更快的老式方法：

```
localhost-2:coding $ pypy pointexam.py
1.58351397514 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-10-22T14:00:27.167

> 数据是一个制表符分隔的文件，由逗号分隔的整数列表组成。

使用示例`get_data()`我制作了一个`.csv`这样的文件：

```
1,6,2,8,2,3,5,9,6,6     10,4,10,5,7,9,6,1,9,5
6,2,2,5,2,2,1,7,7,9     7,6,7,1,3,7,6,2,10,5
8,8,9,2,6,10,10,7,8,9   4,2,10,3,4,4,1,2,2,9
... 
```

然后我通过 JSON 滥用 C 优化解析：

```
def test2():
    import json
    import time
    time_start = time.time()
    with open('data.csv', 'rb') as f:
        data = f.read()
    data = '[[[' + ']],[['.join(data.splitlines()).replace('\t', '],[') + ']]]'
    all_point_sets = [Point(*xy) for row in json.loads(data) for xy in zip(*row)]
    time_end = time.time()
    print "total time: ", (time_end - time_start) 
```

我的盒子上的结果：你原来的`test()`~8s，禁用 gc ~6s，而我的版本（包括 I/O）分别给出 ~6s 和 ~4s。即大约 50% 的加速。但是查看分析器数据很明显，最大的瓶颈在于对象实例化本身，因此**Matt Anderson**的回答将使您在 CPython 上获得最大收益。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-10-17T03:19:52.717

我不知道你能不能做很多事情。

您可以使用生成器来避免额外的内存分配。这给了我大约 5% 的加速。

```
first_points  = (int(p) for p in first_points .split(","))
second_points = (int(p) for p in second_points.split(","))
paired_points = itertools.izip(first_points, second_points)
curr_points   = [Point(x, y) for x,y in paired_points] 
```

即使将整个循环折叠成一个庞大的列表理解也没有多大作用。

```
all_point_sets = [
    [Point(int(x), int(y)) for x, y in itertools.izip(xs.split(','), ys.split(','))]
    for xs, ys in data
] 
```

如果你继续迭代这个大列表，那么你可以把它变成一个生成器。这将分散解析 CSV 数据的成本，因此您不会受到很大的前期打击。

```
all_point_sets = (
    [Point(int(x), int(y)) for x, y in itertools.izip(xs.split(','), ys.split(','))]
    for xs, ys in data
) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-10-25T16:48:37.237

这里有很多很好的答案。然而，目前尚未解决的这个问题的一方面是 python 中各种迭代器实现之间的列表到字符串的时间成本差异。

[在Python.org 的文章](http://www.python.org/doc/essays/)中，有一篇文章测试了不同迭代器在列表到字符串转换方面的效率：[list2str](http://www.python.org/doc/essays/list2str/)。请记住，当我遇到类似的优化问题，但具有不同的数据结构和大小时，本文中提供的结果并没有以相同的速度扩展，因此值得为您的特定用例测试不同的迭代器实现。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-10-25T06:07:11.610

由于内置函数（例如长度为 2000000 的数组`zip(a,b)`或`map(int, string.split(","))`数组）所花费的时间可以忽略不计，我不得不假设最耗时的操作是*append*。

因此，解决问题的正确方法是递归连接字符串：
10 个 10 个元素的字符串到一个更大的字符串
10 个 100 个元素的字符串 10
个 1000 个元素的字符串

最后到`zip(map(int,huge_string_a.split(",")),map(int,huge_string_b.split(",")));`

然后只需微调即可找到*追加和征服*方法的最佳基数 N。

# r - 如何通过在 Ubuntu 上设置语言环境来绘制带有中文文本的 R barplot？

> ID：12926581
> 
> 赞同：1
> 
> 时间：2012-10-17T03:16:25.950
> 
> 标签：r, unicode, plot

这是参考我在这个论坛上的上一个问题，[如何在输入文件中绘制带有中文名称的条形图？](https://stackoverflow.com/questions/12892335/how-to-plot-bar-plot-with-chinese-names-in-input-file)

我已经`sessionInfo`像这样编辑了我的：

```
> sessionInfo()
R version 2.14.1 (2011-12-22)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
[1] LC_CTYPE=zh_CN.UTF-8       LC_NUMERIC=C              
[3] LC_TIME=zh_CN.UTF-8        LC_COLLATE=zh_CN.UTF-8    
[5] LC_MONETARY=zh_CN.UTF-8    LC_MESSAGES=zh_CN.UTF-8   
[7] LC_PAPER=C                 LC_NAME=C                 
[9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=zh_CN.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

loaded via a namespace (and not attached): 
```

但是当我运行我的脚本时`a.txt`

**一个.txt**

```
x <- read.csv(textConnection("名称,类,学生  
木材,2,2 
表,3,4 
笔,4,2 
垃圾桶,5,6 
杯,6,3"), header = TRUE) 
rownames(x) <- x[,1] 
x <- x[,-1] 
barplot(t(x), horiz = TRUE, beside = TRUE, legend.text = TRUE, xlab="名称类学生") 

source("a.txt",encoding="UTF-8") 
```

我得到了一些奇怪的字符而不是汉字（见下图）。我怎样才能避免它们？

![在此处输入图像描述](../Images/4650ab4c42589b8fd07ec5dce8022a2e.png)

# sql - VB6将文件路径插入SQL FROM子句

> ID：12926585
> 
> 赞同：5
> 
> 时间：2012-10-17T03:17:03.463
> 
> 标签：sql, vb6, ado

我在 Windows 7 桌面上使用 VB6 来阅读和处理文本文件，但在将变量传递给 SELECT 语句时遇到了问题。我的代码是：

```
Dim conn As ADODB.Connection
Dim rs As ADODB.Recordset
Dim cm As ADODB.Command

Set conn = New ADODB.Connection
conn.Open _
    "Provider=Microsoft.Jet.OLEDB.4.0;" & _
    "Data Source=" & App.Path & ";" & _
    "Extended Properties=""text;HDR=No;FMT=Delimited( )"""

inputFile = "C:\test data\test data.asc"

Set cm = New ADODB.Command
cm.ActiveConnection = conn
cm.CommandType = adCmdText

cm.CommandText = "SELECT * FROM " & inputFile 
Set rs = New ADODB.Recordset
rs.Open cm, , adOpenKeyset, adLockOptimistic 
```

问题是输入文件的路径名包含空格，当我运行上面的代码时，它在 rs.OPen 行失败，并出现错误，指出 FROM 子句中的语法错误。如果 inputFile 中的路径不包含空格，则一切正常。

我在 inputFile 周围尝试了许多 " ' [] 等组合，但总是出现语法错误或另一个错误，提示找不到 inputFile.txt。

谁能给我正确的方法来处理 SQL 语句中带有空格的路径/文件名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T09:41:16.810

应始终引用为数据源提供的值以避免此类问题。您可以使用引号 " 或撇号 ' 来执行此操作，就像您对扩展属性值所做的一样。

然后使用数据源目录中的文件名作为表名*，至少*使用方括号 [] 将其“引用”，并最好替换 . # 字符为文件扩展名。

没有“用于文本文件的 OLEDB 提供程序”，但您的示例显示了使用 Jet 4.0 OLEDB 提供程序及其 Text Installable ISAM，这很好。

[处理文本数据库](http://www.xtremevbtalk.com/showthread.php?t=298926)提供了关于这个主题的大量信息，大多数示例使用 VBScript，但它几乎都适用于 VB6。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T07:50:53.657

显然，如果您使用方括号，文件名中的空格[应该可以工作](http://blogs.msdn.com/b/spike/archive/2008/07/17/syntax-error-in-from-clause-when-using-text-based-datasources.aspx)`[` `]`。

```
cm.CommandText = "SELECT * FROM [" & inputFile & "]" 
```

您在问题中说您尝试过方括号-您可以仔细检查一下吗？我不知道目录名称中的空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:01:29.500

刚刚对遥远的过去有记忆，如果我没记错的话，数据源是文件所在的文件夹，在选择中你只有文件名而没有路径。

```
Dim conn As ADODB.Connection
Dim rs As ADODB.Recordset
Dim cm As ADODB.Command

Set conn = New ADODB.Connection
conn.Open _
"Provider=Microsoft.Jet.OLEDB.4.0;" & _
"Data Source=" & App.Path & ";" & _
"Extended Properties=""text;HDR=No;FMT=Delimited( )"""

inputFile = "test data.asc"

Set cm = New ADODB.Command
cm.ActiveConnection = conn
cm.CommandType = adCmdText

cm.CommandText = "SELECT * FROM [" & inputFile & "]"
Set rs = New ADODB.Recordset
rs.Open cm, , adOpenKeyset, adLockOptimistic 
```

（假设文件在`App.Path`）

# html - jsoup 选择排除

> ID：12926595
> 
> 赞同：0
> 
> 时间：2012-10-17T03:18:40.713
> 
> 标签：html, jsoup

```
<li><div class="a">xxx<div></li>
<li><div class="b">xxx<div></li>
<li><div class="b">xxx<div></li> 
```

如何选择`li`不包含的元素

```
<div class="a"> 
```

预期的结果是：

```
<li><div class="b">xxx<div></li>
<li><div class="b">xxx<div></li> 
```

```
select("li").not(has("div.a")) 
```

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T03:44:02.690

将 id 和 value 添加到 li 然后，

```
 <html>
    <head>
        <script>
            function check(){
                var li = document.getElementById("li").value;
            if(li == 1){
                document.getElementById('result').innerHTML= "result = "+"<div class='b' style='border:1px solid red;'>abc</div>";
            }
              alert(li);

        }
        </script>
    </head>
    <body onload="check()">
    <li id="li" value="1">
        <div class='a'>abc</div>
    </li>
    <li id="li" value="2">
        <div class="b">bcd</div>
    </li>

    <span id="result">

    </span>
    </body>
</html> 
```

# php - 从 Zend 框架中的控制器访问模型中声明的函数中的变量

> ID：12926597
> 
> 赞同：0
> 
> 时间：2012-10-17T03:19:00.180
> 
> 标签：php, oop, zend-framework, methods

我对 OOPS 和 Zend 很陌生。我正在将 Web 应用程序代码的一部分转换为 Zend 框架，我不能在这里发布所有代码，因为它很长。我在下面的代码中创建了一个模型（我只能发布两个函数），我想从控制器访问函数内部的变量，然后在 HTML 表中打印出来（我想我将不得不使用“视图”那”，下面是我的模型：

```
 public function getVenueTypes()
 {
$poiTypes = array();
    if($this->_cache)
    {

        $key = $this->getCacheKey()."poiTypes_stats:{$this->language}";
    }
    if(!$poiTypes)
    {
        $sql = "SELECT poi_type_id, poi_type_name_".$this->language."
                AS
                poi_type_name
                FROM
                poi_types
                ORDER BY
                poi_type_name_".$this->language." ASC";
        $result = mysql_query($sql);
        if(!$result)
        {
            $message  = 'Invalid query: ' . mysql_error() . "\n";
            $message .= "Whole query: \n\n$sql\n";
            die($message);
        }
        while($row = mysql_fetch_array($result))
        {
            $poiTypes[] = array('id' => $row['poi_type_id'] ,'name' => $row['poi_type_name']);
        }
        print_r($poiTypes);
        if ($this->_cache)
        {
            $this->_cache->save($key, $poiTypes);               

        }    
    } 
foreach($poiTypes as $poiType)
    {
        $count_type = null;
        if($this->_cache)
        {
    $key = $this->getCacheKey()."poiTypeCount:{$poiType['id']}:{$this->metro_id}";
            $count_type = $this->_cache->load($key);
        }
        if(!$count_type)
        {
    $sql = "SELECT COUNT(*) FROM
                poi
                WHERE
                find_in_set('{$poiType['id']}', poi_type_id_array)
                AND poi_status = 1 AND poi_address_prefecture_id = '$this->metro_id'";
            $result = mysql_query($sql) or die(mysql_error());
        }  
        if(!$result)
            {
                $message  = 'Invalid query: ' . mysql_error() . "\n";
                $message .= "Whole query: \n\n$sql\n";
                die($message);
            }

        while($count = mysql_fetch_array($result))
        {
            $count_type[$poiType['id']][$this->metro_id] = $count['COUNT(*)'];
        }
        if($this->_cache)
        {
    $this->_cache->save($key, $count_type);
        }
    } 
 } 
```

任何帮助都非常感谢，我希望我足够清楚并提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:42:42.733

I'm noy sure if this will help you, but you have several options to access those values.

Option 1: return an array with the variables you need

```
return array($myVar1, $myVar2, ..., $myVarN); 
```

Option 2 (less modular): create the html string inside that function and then echo or return the string.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T04:53:53.980

我假设你对 Zend 有基本的了解

Zend 框架的基本思想是控制器、模型和视图之间的链接

你的模型文件，BlaBla.php

```
Class Namespace_models_BlaBla extends Zend_Db_Table_Abstract{

   public function foo(){
       return 'hello world';
    }
} 
```

你的控制器说 BarController 和一个动作说测试

```
class BarController extends extends Zend_Controller_Action{  

      public function testAction(){
           $class = new Namespace_models_BlaBla();
           $this->view->string = $class->foo(); 

         }

    } 
```

你的 html 端 // test.phtml

```
<?php echo $this->string; ?> /**this will output hello world **/ 
```

# regex - 反转 FilesMatch？

> ID：12926604
> 
> 赞同：11
> 
> 时间：2012-10-17T03:19:45.550
> 
> 标签：regex, .htaccess

我正在为文件设置缓存控制标头。我想`max-age=86400`为所有`.css`和`.js`以及`max-age=3600`所有其他人设置。

```
<FilesMatch "\.(css|js)$">
    Header append Cache-Control max-age=86400
</FilesMatch>

<FilesMatch "???">
    Header append Cache-Control max-age=3600
</FilesMatch> 
```

我不知道我应该写什么正则表达式来反转`\.(css|js)$`匹配。或者也许还有其他方法可以做到这一点？

**更新**。基于[这个问题](https://stackoverflow.com/questions/12115652/htaccess-caching-with-filesmatch)的答案，我找到了可行的解决方案：

```
<FilesMatch "(?<!\.css|\.js)$">
    Header append Cache-Control max-age=3600
</FilesMatch> 
```

不幸的是，找不到将点留`\.`在括号外的方法。但这个解决方案对我来说仍然很好。

附带说明一下，*所有其他文件都*包括根本没有文件名的文件，例如`http://example.com/`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T02:27:55.947

基于[这个问题](https://stackoverflow.com/questions/12115652/htaccess-caching-with-filesmatch)的答案，我找到了可行的解决方案：

```
<FilesMatch "(?<!\.css|\.js)$">
    Header append Cache-Control max-age=3600
</FilesMatch> 
```

不幸的是，找不到将点留`\.`在括号外的方法。但这个解决方案对我来说仍然很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T08:41:00.943

您应该检查字符串末尾的真实文件扩展名（这是最后一个不包含点的子字符串）

```
.+\.(?!(css|js)$)[^\.]+?$ 
```

解释：

*   `.+\.`贪婪地搜索整个字符串以找到最后一个点。
*   `(?!(css|js)$)`跳过任何`.css`或`.js`终止到行尾（但保留例如`.jsx`）
*   `[^\.]+?$`获取扩展部分（直到字符串末尾没有点）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T03:36:27.030

你可以试试这个。

```
.+?\.(?!(css$|js$)).+ 
```

第一组`.+?`获取文件名，第二组否定前瞻组`?!(css$|js$)`检查文件结尾不是 css 或 js。这仅匹配没有 .css 或 .js 扩展名的文件。您可以替换第一个和最后一个。基于允许的文件名字符的字符类。

编辑：这将匹配 test.cssx 或 test.jxabc

# android - Android中的HttpPost - 无法识别的字符

> ID：12926613
> 
> 赞同：4
> 
> 时间：2012-10-17T03:20:54.773
> 
> 标签：android, http, http-post

我正在尝试将消息（包含英文和中文）发布到 servlet。如果我使用 Java 应用程序发布消息，它运行良好。

```
 public class PostText
       {
        public final static String HTTP_PORT = "...";

        public static void main(String[] args) throws Exception
        {
            String message = "...";
            System.out.println(post(message));
        }

        public static String post(String message)
        {

            HttpPost httpRequest = new HttpPost(HTTP_PORT);

            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("input", message));

            try {
                httpRequest.setEntity(new UrlEncodedFormEntity(params, "UTF-8"));

                org.apache.http.HttpResponse httpResponse = new DefaultHttpClient().execute(httpRequest);

                if (httpResponse.getStatusLine().getStatusCode() == 200) {

                    String strResult = EntityUtils.toString(httpResponse.getEntity());
                    return strResult;
                } else {
                    System.out.println(httpResponse.getStatusLine().getStatusCode());
                }
            } catch (ClientProtocolException e) {
               // ...
            } catch (UnsupportedEncodingException e) {

            } catch (IOException e) {
               // ...
            }
            return null;
        }
    } 
```

当我在 Android 中使用 HttpPost 时，服务器会收到无法识别的字符，例如“æ¸åå¤§å¦”。我尝试使用 HttpURLConnection 发布消息，结果还包含无法识别的字符。Java 应用程序中的 HttpClient 和 Android 应用程序中的 HttpClient 有什么区别？这很奇怪。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:17:39.247

问题解决了。我使用 Wireshark 来捕获发送到服务器的包。Java 应用程序中 HttpClient 的头部是：

```
User-Agent: Apache-HttpClient/4.2.1(java 1.5) 
```

而 Android 应用程序中 HttpClient 的标头是：

```
User-Agent: Apache-httpclient/unavailable (java 1.4) 
```

所以我猜想android中HttpClient的版本不是最新的。从[Apache HttpClient 4.1](https://stackoverflow.com/questions/3577035/apache-httpclient-4-1-on-android) 我下载了一个 Pre-compiled.jar 库并在我的项目中使用它。问题解决了。谢谢大家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:34:28.917

不同之处可能在于 Android 处理字符串的方式。

如果您的源代码不是 UTF-8 格式，这可能会导致问题： String message = "...";

我会尝试将字符串外部化为

```
String message = myContext.getString(R.string.message); 
```

# colors - 通过 rgb 值隔离棕色

> ID：12926614
> 
> 赞同：3
> 
> 时间：2012-10-17T03:20:58.637
> 
> 标签：colors, photoshop

我希望通过 rgb 值来隔离“棕色”颜色。不仅仅是一种棕色，而是被认为是棕色的各种颜色 - 棕褐色、绒面革、污垢等。

关于如何做到这一点的任何想法？我在想，如果红色小于 128，绿色在 70 到 138 之间，蓝色小于 128，那么它看起来是棕色的。类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T18:35:38.450

在 pythony 伪代码中，一个非常简单的启发式方法类似于

```
def isBrown(red, green, blue):

  # Kind of maximum lightness
  if blue > parameter_1
    return False

  # how green or red tinted can it be
  if absolute_value(red - green) > parameter_2:
    return False

  # Light brown is just yellow or orange
  if maximum_of(red, green) > parameter_3:
    return False
  else:
    return True 
```

调整参数 1 到 3 直到它运行良好。也许替换`if absolute_value(red - green) > parameter_2:`为`if absolute_value(red - green*parameter_2b) > parameter_2a:`以便根据 选择更多绿色或红色的`parameter_2b`。也许换成`maximum_of`别的东西。等等等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T03:32:49.840

这真的取决于你认为什么是棕色的。这是一个颜色类别，具有相当高的主体间可变性和强烈的上下文影响（旁边的颜色会改变它的外观）。

认为您需要使用以下内容：http: [//www.colorpicker.com/](http://www.colorpicker.com/)并查看您决定的颜色的形状，然后找出如何通过算法表达。

# .net - IIS 似乎要休眠到下一个请求

> ID：12926615
> 
> 赞同：2
> 
> 时间：2012-10-17T03:21:01.340
> 
> 标签：.net, iis, web-config, httpmodule

我已经为我的 Web 应用程序创建了一个 httpModule，它基本上是由特定时间表上的计时器触发的，它运行良好，并且在我在 IIS 中发布它之后调用我想要的方法但是如果没有请求会发生什么，它看起来像 Web 应用程序停下来静止不动，使任何预定的事件不运行，只有当我提出新请求时它才会再次运行。我究竟做错了什么？我可以让我的网站不休眠，以便在没有请求的时候，调度的 httpModule 会按要求运行吗？我希望我说清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:23:08.003

您应该在那里检查您的应用程序池设置，以确保它不会回收工作过程

**编辑** 不确定您的IIS是什么版本，但以IIS7.5为例，在应用程序池的高级设置中，有一个名为“空闲超时（分钟）”的设置，这意味着在您的应用程序空闲之后关闭的时间，也是回收部分中名为“定期时间间隔（分钟）”的设置，表示池将被回收的时间段。

# ios - UITableView 不在设备上显示文本

> ID：12926619
> 
> 赞同：1
> 
> 时间：2012-10-17T03:21:08.320
> 
> 标签：ios, uitableview, delegates, datasource

我开发的应用程序包含 UITableView（不是 Controller），它是通过编程方式添加的。我没有使用任何 nib 文件。并发现在模拟器中工作正常，但是当我在显示的设备表上构建但没有看到任何文本时。数据源和委托已连接。

这里有一些代码

```
if (kPortrait) {
        optionTV = [[UITableView alloc] initWithFrame:CGRectMake(568, 75, 200, 44 * [optionArray count]) style:UITableViewStylePlain];
    } else {
        optionTV = [[UITableView alloc] initWithFrame:CGRectMake(824, 75, 200, 44 * [optionArray count]) style:UITableViewStylePlain];
    }
    [optionTV setAutoresizesSubviews:YES];
    [optionTV setAutoresizingMask:(UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight)];
    [optionTV setDataSource:self];
    [optionTV setDelegate:self];
    optionTV.alpha = 0.0f;
    optionTV.backgroundColor = [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:0.50];
    [self.view addSubview:optionTV];
    [UIView animateWithDuration:0.5f animations:^{
        trafficBT.transform = CGAffineTransformMakeTranslation(-200, 0);
        optionTV.alpha = 0.8;
    }]; 
```

对于委托方法：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    NSLog(@"tableView Data num row: %d", [optionArray count]);
    return [optionArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }
    cell.textLabel.backgroundColor = [UIColor clearColor];
    if (kIsIPhone) {
        cell.textLabel.font = [UIFont systemFontOfSize:18];
    } else {
        cell.textLabel.font = [UIFont systemFontOfSize:20];
    }

    cell.textLabel.text = [optionArray objectAtIndex:indexPath.row];
    return cell;
} 
```

# algorithm - 主方法 - 分析

> ID：12926620
> 
> 赞同：0
> 
> 时间：2012-10-17T03:21:11.443
> 
> 标签：algorithm, analysis, master-theorem

这是关于算法分析：比如说，一个问题的运行时间是：

```
T(n) = { 1, for n == 1 | T(n/3) + THETA(1), for n > 1} 
```

现在，这是`THETA(log base3 n)`

但是，如果我使用主方法，我评估为`THETA(log base2 n)`，使用案例 II

我应该如何从主方法中得到正确的答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:53:04.860

他们是一样的。对于任意两个基数`a`和`b`，所以我们通常根本不提基数，只说。`Θ(log[a] n) = Θ(log[b] n)``Θ(log n)`

这是因为，所以它们的不同之处在于 是恒定的。`log[a] n = (1 / log[b] a) * log[b] n``1 / log[b] a``n`

# sql - 约束，我如何将一个属性的值与另一个进行比较？

> ID：12926623
> 
> 赞同：1
> 
> 时间：2012-10-17T03:22:08.603
> 
> 标签：sql, ddl

这是一个非常初学者的问题，但我的谷歌技能让我失望了，我似乎在我的笔记中找不到任何东西。

在我的作业中，我必须根据教授给出的标准创建几个约束条件。

我们有一个名为 Employee 的表。员工有一个等级（字符），该等级可以是“DB Guru”、“DB 专家”或“DB rookie”。他们也有薪水（整数）。这个约束我很容易做到。

随之而来的限制是确保任何具有“DB guru”级别的人的薪水高于 200。

我很困惑如何检查 rank 的值是否为“DB guru”，并检查薪水是否高于 200。这是检查排名的代码，我似乎无法找到如何做。

这是我迄今为止尝试过的：

```
IC2: The salary of a 'DB guru' is above 200\. 
*/ 
CONSTRAINT IC2 CHECK(rank IN('DB guru') AND  salary > 200)), 
```

这给了我错误：第 14 行的错误：ORA-00922：缺少或无效选项

第 14 行是我发布的 Cconstraint，所以我猜这是一个语法错误。

有人可以向我展示一个比较这些值的正确语法示例吗？

提前谢谢你的帮助。

编辑：这是整个 Create 语句，以及我对每个约束的尝试。

```
-- IMPORTANT: use the names IC1, IC2, etc. as given below. 
-- -------------------------------------------------------------------- 
DROP TABLE Employee CASCADE CONSTRAINTS; 
DROP TABLE Dependent CASCADE CONSTRAINTS; 
-- 
CREATE TABLE Employee 
( 
id      INTEGER PRIMARY KEY, 
name    CHAR(10)  NOT NULL,  
rank    CHAR(10) NOT NULL, 
salary  INTEGER NOT NULL, 
/* 
IC1: The rank is one of: 'DB guru', 'DB expert', or 'DB rookie' 
*/ 
COnstraing IC1 CHECK(rank IN('DB guru', 'DB expert', 'DB rookie')),

IC2: The salary of a 'DB guru' is above 200\. 
*/ 
CONSTRAINT IC2 CHECK(rank IN('DB guru') AND salary > 200)),
/* 
IC3: The salary of a 'DB expert' is between 80 and 220 (inclusive). 
*/ 
CONSTRAINT IC3 CHECK(rank IN('DB expert) AND salary >= 80 AND salary <= 220),
/* 
IC4: The salary of a 'DB rookie' is less than 100\. 
*/ 
CONSTRAINT IC4 CHECK(rank IN('DB rookie') AND salary < 100))
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:20:41.340

再次考虑一下这张支票的含义：

```
CONSTRAINT IC2 CHECK(rank IN('DB guru') AND salary > 200)) 
```

这就是说，对于*每一*行，`rank`必须完全等于`'DB Guru'`，并且`salary`必须大于 200。这*不是*您想要的。您需要反过来考虑 - 如果`rank`是 以外的任何东西*，*那么`'DB Guru'`您不在乎（在此约束中）他们的薪水是多少。所以你实际上想要：

```
CONSTRAINT IC2 CHECK(rank != 'DB guru' OR salary > 200) 
```

最后你还有一个额外`)`的（计算`()`第一个例子中的 s，你会发现它们不平衡）。结尾处有类似的错误`IC4`。

* * *

@wildplasser 的侧边栏 - 正如我所说，我们的两个`IC2`s 是等价的，使用一点布尔逻辑：

```
NOT( zrank IN('DB guru') AND salary <= 200) --Your IC2 
```

等于：

```
(NOT zrank IN ('DB guru')) OR (NOT salary <= 200) --De Morgan's law 
```

等于：

```
(zrank != 'DB guru') OR (NOT salary <= 200) --Simplification of first 
```

等于：

```
(zrank != 'DB guru') OR (salary > 200) --Simplification of second 
```

等于：

```
zrank != 'DB guru' OR salary > 200 --Removal of brackets, my IC2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:41:15.287

```
-- -------------------------------------------------------------------- 
-- IMPORTANT: use the names IC1, IC2, etc. as given below. 
-- -------------------------------------------------------------------- 

DROP TABLE Employee CASCADE ;
-- 
CREATE DOMAIN dbarank AS CHAR(10) CHECK (VALUE IN ('DB guru', 'DB expert', 'DB rookie') );

CREATE TABLE Employee
( id      INTEGER PRIMARY KEY
, name    CHAR(10)  NOT NULL
, zrank    dbarank NOT NULL -- "rank" is a reserved name
, salary  INTEGER NOT NULL

-- IC2: The salary of a 'DB guru' is above 200\. 
, CONSTRAINT IC2 CHECK ( NOT( zrank IN('DB guru') AND salary <= 200))

-- IC3: The salary of a 'DB expert' is between 80 and 220 (inclusive). 
, CONSTRAINT IC3 CHECK ( NOT (zrank IN ('DB expert') AND ( salary < 80 OR salary > 220)))
-- IC4: The salary of a 'DB rookie' is less than 100\. 
, CONSTRAINT IC4 CHECK ( NOT (zrank IN('DB rookie') AND salary >= 100))
);
INSERT INTO Employee(id,name,zrank,salary) VALUES(1, 'Pipo', 'Clown', 1);
INSERT INTO Employee(id,name,zrank,salary) VALUES(1, 'Lutser', 'DB rookie', 110);
INSERT INTO Employee(id,name,zrank,salary) VALUES(1, 'Prutser', 'DB rookie', 90); 
```

注意：由于我使用的是 Postgres，因此语法略有不同。Oracle 确实有域，因此将 IC1 实现为域约束的“技巧”仍然有效。

结果：

```
CREATE DOMAIN
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "employee_pkey" for table "employee"
CREATE TABLE
ERROR:  value for domain dbarank violates check constraint "dbarank_check"
ERROR:  new row for relation "employee" violates check constraint "ic4"
INSERT 0 1 
```

更新：修复了 NOT(AND/OR) 的东西，使约束排他性。

# ef-code-first - EF Code First 在 SQL Azure 联合中创建引用表而不是联合表

> ID：12926628
> 
> 赞同：0
> 
> 时间：2012-10-17T03:22:39.883
> 
> 标签：ef-code-first, azure-sql-database

我正在尝试使用实体框架代码优先方法连接到 SQL Azure 联合。当我尝试写入联合表时，EF 抛出一个错误，提示“数据库中已经有一个名为 [pluralized table name] 的对象”

我收到此错误是因为我在运行应用程序代码之前创建了联合表。如果我删除表，那么 EF 将为我创建它们而不会引发异常，但这次它们不会被联合。它们将是参考表。

我该如何解决这个问题？我可以先阻止 EF 代码尝试创建表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:17:34.903

自己找到了答案。

```
class CreateDatabaseIfNotExists<TContext> : IDatabaseInitializer<TContext> where TContext : DbContext
{
   public void InitializeDatabase(TContext context)
   {
   }
} 
```

我在我的 DBContext 类中这样称呼它：

```
static EVENTContext()
{
    Database.SetInitializer(new CreateDatabaseIfNotExists<EVENTContext>());
} 
```

# ios6 - 如何为存折创建推送令牌？

> ID：12926629
> 
> 赞同：1
> 
> 时间：2012-10-17T03:23:01.323
> 
> 标签：ios6, push-notification, passbook

**我的问题：** 如何为 Passbook 创建推送令牌？是否需要 APN 注册？*如果是这样，当用户将通行证安装到存折中时，是否会在第一次 REST 调用向提供者注册通行证之前自动*执行创建推送令牌的 APN 注册步骤（例如，无需开发人员干预）？Apple 的 Passbook 文档没有指定推送令牌如何到达 Passbook 设备。它只是提到它是设备呈现的东西。

**背景：** 我一直在查看 Apple 提供的有关更新 Passbook 中的 Passes 的文档，但它没有具体说明如何生成推送令牌以将通知推送到 Passbook。根据 Web 服务参考部分，推送令牌与设备库标识符、身份验证令牌、传递类型 ID 和序列号一起在注册和注销 RESTful 服务的技术规范中传递。

我对自定义 iOS 应用程序的推送令牌持久性的理解是，应用程序本身需要向 APN 服务器注册，以便在设备上为该应用程序创建一个推送令牌，以准备推送通知，然后应用程序才能发送推送提供者的令牌（例如我的网络服务器）。这可确保 APN 接收来自 APN 本身在设备上生成的提供程序的推送令牌。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:17:57.167

不需要 APN，Passbook 本身负责推送通知 当注册 Web 服务被调用时，推送令牌作为 json 对象中的有效负载发送

Passbook 在添加通行证后立即调用注册 Web 服务（以及在其他情况下）

值得一提的是，您必须在服务器端使用来自`certificate.p12`用于生成通行证的 .pem 证书

这是如何在 php 中获取推送令牌

```
$data = json_decode(file_get_contents("php://input"));
$pushtoken=$data->pushToken; 
```

# awk - 在 awk 中使用 for 循环后缺少字段和额外空间

> ID：12926634
> 
> 赞同：1
> 
> 时间：2012-10-17T03:23:31.453
> 
> 标签：awk

我需要使用 awk 脚本从文件中提取一些信息。我有一个包含 11 个字段的标题行，我将其拆分为一个名为`titleList`.

```
Student Number:Name:Lab1:Lab2:Lab3:Lab4:Lab5:Lab6:Exam1:Exam2:Final 
```

找到合适的行后，我需要打印按标题进行的字段，例如，如果结果是：

```
92839342:Robert Bloomingdale:9:26:18:22:9:12:25:39:99 
```

我必须以这种方式打印它：

```
Student Number:92839342 Name:Robert Bloomingdale Lab1:9 Lab2:26 Lab3:18
Lab4:22 Lab5:9 Lab6:12 Exam1:25 Exam2:39 Final:99 
```

我使用 for 循环来管理它：

```
for (i=0 ;i<=NF ;i++)
{
    printf "%s %s %s %s",titleList[i],":",$i," "
} 
```

一切看起来都不错，除了有两个问题的结果：首先，每个结果之间有一个额外的空格，其次，搜索行的最后一个字段丢失

```
 Student Number : 92839342  Name : Robert Bloomingdale  Lab1 : 9  Lab2 : 26
    Lab3:18  Lab4 : 22  Lab5 : 9  Lab6 : 12  Exam1 : 25  Exam2 : 39  Final 
```

我该怎么办？`\n`搜索结果末尾有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:34:59.410

您可以通过更正`printf`语句来更正字段之间的额外空格量：

```
awk -F ":" 'NR == 1 { split($0, array, FS) } NR >= 2 { for (i=1; i<=NF; i++) printf "%s:%s ", array[i], $i; printf "\n" }' file.txt 
```

内容`file.txt`：

```
Student Number:Name:Lab1:Lab2:Lab3:Lab4:Lab5:Lab6:Exam1:Exam2:Final
92839342:Robert Bloomingdale:9:26:18:22:9:12:25:39:99 
```

结果：

```
Student Number:92839342 Name:Robert Bloomingdale Lab1:9 Lab2:26 Lab3:18 Lab4:22 Lab5:9 Lab6:12 Exam1:25 Exam2:39 Final:99 
```

***编辑：***

此外，您缺少最后一个值，因为您正在使用的文件可能具有 Windows 换行符结尾。要解决此问题，请在运行代码`dos2unix file.txt`之前运行：。`awk`或者，您可以设置`awk`'s 记录分隔符，以便它理解换行符结尾：

```
awk 'BEGIN { RS="\r\n"; FS=":" } NR == 1 { split($0, array, FS) } NR >= 2 { for (i=1; i<=NF; i++) printf "%s:%s ", array[i], $i; printf "\n" }' file.txt 
```

***编辑：***

以上需要 GNU awk，split() 默认在 FS 上拆分，因此不需要将其用作 arg，通常使用 "next" 而不是指定相反的条件，并且通常使用 print "" 而不是 printf " \n" 所以你使用 ORS 设置而不是在输出语句中硬编码它的值。因此，应将上述内容调整为：

```
gawk 'BEGIN { RS="\r\n"; FS=":" } NR == 1 { split($0, array); next } { for (i=1; i<=NF; i++) printf "%s:%s ", array[i], $i; print "" }' file.txt 
```

# objective-c - 什么是回调处理程序

> ID：12926638
> 
> 赞同：0
> 
> 时间：2012-10-17T03:24:21.457
> 
> 标签：objective-c, ios

当消息从服务器到达时，客户端框架使用回调机制通知应用程序。发送的一些事件示例包括登录成功或失败、订阅成功或失败或对 MBO 的更改。

通过执行注册回调对象：

MyCallbackHandler* theCallbackHandler = [MyCallbackHandler new]; [SampleApp_SampleAppDB registerCallbackHandler:theCallbackhandler];

这是什么意思..请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:29:28.933

这意味着该方法`registerCallbackHandler:`接受一个符合协议（例如）的对象，该协议需要在您的类定义`SampleAppHandlerProtocol`上实现一些方法。`MyCallbackHandler`实际例子：

```
@protocol CallbackHandler
-(void)reportSomethingFinished;
@end

@class SampleApp
{
  CallbackHandler *handler;
}

-(void)registerCallbackHandler:(CallbackHandler*)handler;
-(void)doSomething;
@end 
```

这样，您必须实现一个符合的类，`CallbackHandler`以便可以从其代码`SampleApp`中调用您。`reportSomethingFinished`

# .htaccess - 将文件重写到子域

> ID：12926641
> 
> 赞同：2
> 
> 时间：2012-10-17T03:24:50.497
> 
> 标签：.htaccess, url, mod-rewrite, url-rewriting, subdomain

我们使用了这个规则

```
RewriteCond %{HTTP_HOST} ^mydomain\.com [NC]
RewriteCond %{QUERY_STRING} ^n=(.+)$
RewriteRule ^news\.php$ http://news.mydomain.cop/news.php?n=%1 [L,R=301] 
```

用于重定向

*   `http://mydomain.com/news.php?n=100`

    至

*   `http://news.mydomain.com/news.php?n=100`

但我们需要

*   `http://mydomain.com/news.php?n=100`

    和

*   `http://news.mydomain.com/news.php?n=100`

重定向 301 到

*   `http://news.mydomain.com/100.html`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:01:34.437

尝试：

```
RewriteCond %{HTTP_HOST} ^(news\.)?mydomain\.com [NC]
RewriteCond %{QUERY_STRING} ^n=(.+)$
RewriteRule ^news\.php$ http://news.mydomain.com/%1.html? [L,R=301] 
```

如果有人键入：`http://mydomain.com/news.php?n=100`或`http://news.mydomain.com/news.php?n=100`在其浏览器的 URL 地址栏中，他们将被重定向到`http://news.mydomain.com/100.html`，从而更改地址栏中的 URL。

# c# - 从两个整数创建一个列表

> ID：12926643
> 
> 赞同：4
> 
> 时间：2012-10-17T03:24:55.893
> 
> 标签：c#

我有一些看起来像这样的代码：

```
int A = 3;
int B = 5;
List<int> TheList = new List<int>();

TheList.Add(A);
TheList.Add(B);

SomeFunction(TheList); 
```

有没有办法写这样的东西：

```
SomeFunction((A,B).ToList()); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T03:26:36.503

是的：

```
new List<int>{A, B} 
```

生成一个包含您指定的两个元素的列表。您可以将该列表传递给函数或对其执行任何其他操作。

请注意，如果您的目标函数采用`IList<int>`而不是 a `List<int>`，您可以通过发送一个新的 s 数组来进一步缩短语法`int`，因为数组`T[]`实现了它们相应的`IList<T>`接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T03:27:29.860

```
SomeFunction(new List<int> { A, B }); 
```

# c++ - 使用 IGroupPolicyObject 更新 Windows 7 中的本地计算机策略

> ID：12926644
> 
> 赞同：2
> 
> 时间：2012-10-17T03:25:24.600
> 
> 标签：c++, windows-7, group-policy, gpo

我只是希望能够以编程方式执行该`gpedit.msc`操作。我正在尝试将这些键的值设置为 1 并更新本地组注册表。

**在 gpedit.msc 中：**

*本地计算机策略/计算机配置/管理模板/系统/可移动存储访问*

**ValueName：**所有可移动存储类：拒绝所有访问

**值：** 1（将此设置为 1）

*本地计算机策略/计算机配置/管理模板/Windows 组件/自动播放策略*

**ValueName** : 关闭自动播放

**值：** 1（将此设置为 1）

我认为关键是`IGroupPolicyObject`在 C++ 中使用。但是，我找不到任何我可以理解的文档。

我的应用程序需要禁用/启用所有 USB 访问，而无需重新启动 Windows 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:06:24.033

我认为这些链接将对您有所帮助：

*   C/C++ 具有完整描述的方式来更改 LGPO 中的设置：[Pete 的博客 - 在 Windows 上以编程方式设置和应用本地组策略](http://pete.akeo.ie/2011/03/porgramatically-setting-and-applying.html)

*   通过 ComImport 机制更改 LGPO 对象的 C# 代码[软件开发人员的字节 - 通过 .NET\C# 的组策略对象](http://sdbytes.blogspot.com/2012/10/group-policy-object-via-netc.html)

# ios - 我应该在原始 C 数组中释放对象吗

> ID：12926645
> 
> 赞同：0
> 
> 时间：2012-10-17T03:25:29.963
> 
> 标签：ios, memory-management

### 说你有类 Block

```
Class Block : NSObject 
```

### 现在，您想以 C 风格创建数组

```
Block *blocks[5]; // or calling malloc()
Block *aBlock = [[Block alloc] init];
blocks[0] = aBlock; 
// at this point, aBlock will be hand over to array blocks slot.
// not like NSArray, object of 'Block' will not retain by @property(retain)
// or should I call retain before hand over the value into its array and release afterward?
// should I still call below code to release object ?
// [aBlock release]; 
```

### 有人可以向我解释我之后是否还需要释放 aBlock 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T03:31:54.797

不，因为原始数组不会保留每个`Block`对象。所以如果你释放它，所有`Block`对象都会在函数退出作用域的那一刻被清理掉

# iphone - -[EngineerModel _isNaturallyRTL]：无法识别的选择器发送到实例

> ID：12926649
> 
> 赞同：0
> 
> 时间：2012-10-17T03:26:20.700
> 
> 标签：iphone, objective-c, ios5, memory-management, automatic-ref-counting

收到此错误：

'NSInvalidArgumentException'，原因：'-[EngineerModel _isNaturallyRTL]：无法识别的选择器发送到实例

我已阅读[如何解决“无法识别的选择器发送到实例”？](https://stackoverflow.com/questions/861626/how-to-resolve-unrecognized-selector-sent-to-instance)和别的。

将 Xcode 4.5.1 与 arc 一起使用（我第一次使用 arc）

这是我的代码，它基于早期的非弧项目，效果很好

数据库.m

```
// Models for data
#import "EngineerModel.h"

- (NSArray *)returnEngineers
{
    NSMutableArray *retval = [[NSMutableArray alloc] init];

    NSString *query = @"SELECT * FROM engineers";

    stmt = nil;

    if (sqlite3_prepare_v2(_database, [query UTF8String], -1, &stmt, nil) == SQLITE_OK) {
        while (sqlite3_step(stmt) == SQLITE_ROW) {

            char *engineerIDChr =         (char *) sqlite3_column_text(stmt, 0);
            char *engineerNameChr =         (char *) sqlite3_column_text(stmt, 1);
            char *engineerSigFileChr =         (char *) sqlite3_column_text(stmt, 2);
            char *engineerPhoneChr =   (char *) sqlite3_column_text(stmt, 3);
            char *engineerEmailChr =          (char *) sqlite3_column_text(stmt, 4);
            char *engineerRegNoChr =            (char *) sqlite3_column_text(stmt, 5);

            NSString *engineerID = [[NSString alloc] initWithUTF8String:engineerIDChr];
            NSString *engineerName = [[NSString alloc] initWithUTF8String:engineerNameChr];
            NSString *engineerSigFile = [[NSString alloc] initWithUTF8String:engineerSigFileChr];
            NSString *engineerPhone = [[NSString alloc] initWithUTF8String:engineerPhoneChr];
            NSString *engineerEmail = [[NSString alloc] initWithUTF8String:engineerEmailChr];
            NSString *engineerRegNo = [[NSString alloc] initWithUTF8String:engineerRegNoChr];

            EngineerModel *info = [[EngineerModel alloc] initWithUniqueId:engineerID
                                                               engineerName:engineerName
                                                                     engineerSigFile:engineerSigFile
                                                         engineerPhone:engineerPhone
                                                                engineerEmail:engineerEmail
                                                                  engineerRegNo:engineerRegNo];

            [retval addObject:info];            
        }
        sqlite3_finalize(stmt);
    }
    return retval;
} 
```

数据库有两个条目

和模型

```
//  EngineerModel.h
#import <Foundation/Foundation.h>

@interface EngineerModel : NSObject
{
    NSString *_engineerID;
    NSString *_engineerName;
    NSString *_engineerSigFile;
    NSString *_engineerPhone;
    NSString *_engineerEmail;
    NSString *_engineerRegNo;
}

@property (nonatomic, copy) NSString *engineerID;
@property (nonatomic, copy) NSString *engineerName;
@property (nonatomic, copy) NSString *engineerSigFile;
@property (nonatomic, copy) NSString *engineerPhone;
@property (nonatomic, copy) NSString *engineerEmail;
@property (nonatomic, copy) NSString *engineerRegNo;

- (id)initWithUniqueId:(NSString *)AengineerID
          engineerName:(NSString *)AengineerName
       engineerSigFile:(NSString *)AengineerSigFile
         engineerPhone:(NSString *)AengineerPhone
         engineerEmail:(NSString *)AengineerEmail
         engineerRegNo:(NSString *)AengineerRegNo;

- (id) init;

@end

//  EngineerModel.m
#import "EngineerModel.h"

@interface EngineerModel ()

@end

@implementation EngineerModel

@synthesize engineerID, engineerName, engineerSigFile, engineerPhone, engineerEmail, engineerRegNo;

- (id)initWithUniqueId:(NSString *)AengineerID
          engineerName:(NSString *)AengineerName
       engineerSigFile:(NSString *)AengineerSigFile
         engineerPhone:(NSString *)AengineerPhone
         engineerEmail:(NSString *)AengineerEmail
         engineerRegNo:(NSString *)AengineerRegNo
{

    if ((self = [super init]))
    {
        self.engineerID = AengineerID;
        self.engineerName = AengineerName;
        self.engineerSigFile = AengineerSigFile;
        self.engineerPhone = AengineerPhone;
        self.engineerEmail = AengineerEmail;
        self.engineerRegNo = AengineerRegNo;

     }
    return self;
}

- (id) init {
    self = [super init];
    return self;
}

@end 
```

最后

我已将 -ObjC 和 -all_load 添加到其他链接器标志

添加了@synthesize（我不认为我必须为弧？）

如果我将其简化为

```
- (id)initWithId:(NSString *)AengineerID
{
    NSLog(@"AengineerID %@",AengineerID);

    if ((self = [super init]))
    {
        self.engineerID = AengineerID;
    }
    return self;
} 
```

它跟踪 AengineerID 然后崩溃

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T03:29:24.623

`_isNaturallyRTL`是一个私有方法`NSString`。所以不知何故，你有一个`EngineerModel`实例，其中一些其他代码期待`NSString`.

您如何处理`EngineerModel`从该方法返回的对象数组`returnEngineers`？

* * *

就像建议一样……像这样自己使用 sqlite3 C API 是令人沮丧的一课。我强烈建议改用[FMDB](https://github.com/ccgus/fmdb)之类的东西。

# php - 根据性能设置不同的行表颜色

> ID：12926653
> 
> 赞同：2
> 
> 时间：2012-10-17T03:26:40.500
> 
> 标签：php, sql

我正在用 SQL 记录学生的表现。只有2列。

```
sl no. Name    Points
1      Admam    89
2      Russel   86
3      Andy     79
4      Lance    76
5      Steve    75
6      jack     74
7      Phil     70
8      mark     67
9      kevin    65
10     andrew   65
11     brian    64
12     pat      63 
```

这是 SQL 报告格式。我需要为每 3 名学生的表格着色。前 3 名学生（1、2、3）被称为“钻石”，因此 3 行需要为灰色。接下来的 3 名学生 (4,5,6) 称为“白金”，因此 3 行需要涂成绿色。

但在下一行，Phi、Mark、Kevin 需要将颜色设为黄色。但安德鲁也加入了凯文，因为同样的观点。所以现在 4 行应该被着色为黄色.. 请让我知道该怎么做....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T03:45:42.987

看看这个小提琴[phpfiddle](http://codepad.viper-7.com/FLCkzA)

```
 <?php
        $points=array(1,1,1,2,2,3,3,3,3);
        $color= array(1=>'red',2=>'green',3=>'yellow');
    ?>

        <table width="100%">
            <?php
        foreach($points as $key=>$grade)
        {?>
        <tr>
        <td style="color:<?php if( $key!=0 &&  $points[$key]!=$points[$key-1] )
        {echo $color[$grade];} else{ if(($key+1)%3==0)
{ echo $color[$grade];} else {echo $color[$grade];} } ?>">
student <?php echo $key;  ?></td>
        </tr>
        <?php }?>
    </table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:54:43.113

像这样为每个范围点使用颜色

```
$colors = array(
    1 => 'grey',
    2 => 'green',
    3 => 'yellow',
    4 => 'black'
);
$i = 0;
$color_id = 0;
$lastpoint = -1;
foreach($students as $id=>$student) {
   $color_id += ($i % 3 == 0 && $student['point'] != $lastpoint) ? 1 : 0;
   $lastpoint = $student['point'];
?>
<tr>
    <td style="color:<?php echo colors[$color_id];?>";>
        <?php echo $student['name']; ?>
    </td>
</tr>
<?php
} 
```

# javascript - 如何添加 javascript 代码以进行自定义弹出显示？

> ID：12926656
> 
> 赞同：-1
> 
> 时间：2012-10-17T03:26:56.283
> 
> 标签：javascript, class, hyperlink, popup

我创建的是一个带有 CSS 的自定义弹出窗口，这不是一个实际的 Windows 弹出窗口。此自定义弹出窗口只能在其网页中打开或显示。不幸的是，我找不到正确的 JavaScript 代码来打开弹出窗口。任何人都可以很高兴帮助我解决这个问题吗？

HTML 代码说明：这是用于打开/显示弹出窗口的类...

> 类=“弹出弹出管理器”

HTML 代码链接描述：这是我希望人们能够单击以使弹出窗口显示的链接...

> a href="#">成为会员

我是 javascript 的初学者，所以如果你能提供完整的代码...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T03:33:48.227

您可以使用 javascript 显示和隐藏您的窗口。如果您使用的是 jQuery：

```
$('.popup').show();
$('.popup').hide(); 
```

要使其与您的链接一起使用：

```
<a href="#" onClick="showPopup();">Become a member</a> 
```

你可以有一个JS函数：

```
function showPopup(){
    $('.popup').show();
} 
```

# sql - SQL 获取某个表的唯一键计数值

> ID：12926658
> 
> 赞同：0
> 
> 时间：2012-10-17T03:27:05.597
> 
> 标签：sql, count, sql-server-2008-r2, unique

我有一个 SQL 表，它有一个唯一的键列，当我插入一条新记录时，这个键增加 1，假设我删除了这个表中的所有记录，所以如果我在删除所有记录后添加一条记录，计数将继续，我会得到例如，该记录的 id 为 97，问题是在 sql 中是否有办法在添加记录之前获得 97 的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T03:29:23.110

是的。使用`IDENT_CURRENT(TABLE_NAME)`函数获取 table 的当前标识值`TABLE_NAME`。

# python - 将整数索引从 Fama-French 因子转换为 pandas 中的日期时间索引

> ID：12926660
> 
> 赞同：1
> 
> 时间：2012-10-17T03:27:29.443
> 
> 标签：python, datetime, pandas

我从 Ken French 的数据库中使用 获取 Fama-French 因子`pandas.io.data`，但我不知道如何将整数年月日期索引（例如`200105`）转换为`datetime`索引，以便我可以利用更多`pandas`功能。

以下代码运行，但我在最后一个未注释行中的索引尝试删除了 DataFrame 中的所有数据`ff`。我也试过`.reindex()`了，但这不会将索引更改为`range`. 方法是什么`pandas`？谢谢！

```
import pandas as pd
from pandas.io.data import DataReader
import datetime as dt

ff = pd.DataFrame(DataReader("F-F_Research_Data_Factors", "famafrench")[0])
ff.columns = ['Mkt_rf', 'SMB', 'HML', 'rf']

start = ff.index[0]
start = dt.datetime(year=start//100, month=start%100, day=1)
end = ff.index[-1]
end = dt.datetime(year=end//100, month=end%100, day=1)
range = pd.DateRange(start, end, offset=pd.datetools.MonthEnd())
ff = pd.DataFrame(ff, index=range)
#ff.reindex(range) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T05:48:07.940

`reindex`将现有索引与给定索引重新对齐，而不是更改索引。`ff.index = range`如果您确定长度和对齐方式匹配，您就可以这样做。

解析每个原始索引值要安全得多。简单的方法是通过转换为字符串来做到这一点：

```
In [132]: ints
Out[132]: Int64Index([201201, 201201, 201201, ..., 203905, 203905, 203905])

In [133]: conv = lambda x: datetime.strptime(str(x), '%Y%m')

In [134]: dates = [conv(x) for x in ints]

In [135]: %timeit [conv(x) for x in ints]
1 loops, best of 3: 222 ms per loop 
```

这有点慢，所以如果你有很多观察结果，你可能想在 pandas 中使用优化 cython 函数：

```
In [144]: years = (ints // 100).astype(object)

In [145]: months = (ints % 100).astype(object)

In [146]: days = np.ones(len(years), dtype=object)

In [147]: import pandas.lib as lib

In [148]: %timeit Index(lib.try_parse_year_month_day(years, months, days))
100 loops, best of 3: 5.47 ms per loop 
```

这里`ints`有 10000 个条目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-03T08:29:09.217

试试这个列表推导，它对我有用：

```
ff = pd.DataFrame(DataReader("F-F_Research_Data_Factors", "famafrench")[0])
ff.columns = ['Mkt_rf', 'SMB', 'HML', 'rf']    
ff.index = [dt.datetime(d/100, d%100, 1) for d in ff.index] 
```

# regex - gtksourceview 关键字转义

> ID：12926661
> 
> 赞同：1
> 
> 时间：2012-10-17T03:27:37.723
> 
> 标签：regex, escaping, gedit, gtksourceview

在我的语言中，关键字是文字`#list-empty?`，所以我想与之匹配。我正在使用 gtksourceview 提供语法高亮，并使用以下定义

`<keyword>list-empty?</keyword>`

但是，这匹配`list-empt`and `list-empty`（但不匹配文字`list-empty?`）。对我来说，这表明 gktsourceview 将其中的内容`<keyword>`视为正则表达式。所以我想逃避`?`并从字面上匹配它。然而，类似的东西：`<keyword>list-empty\?<keyword>`根本不起作用。

[https://github.com/espringe/wisp/blob/bf1aed13/resources/wisp.lang#L67](https://github.com/espringe/wisp/blob/bf1aed13/resources/wisp.lang#L67)

那么我如何逃避`?`并与之匹配

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T10:43:45.980

将此添加到您的`keyword`上下文中：

```
<suffix>(?!\w)</suffix> 
```

...然后继续逃避问号：

```
<keyword>list-empty\?</keyword> 
```

默认后缀是`\b`, 假设每个关键字都以单词字符结尾。你的大多数人都这样做，并且`(?!\w)`就像`\b`在那些情况下一样，但它也在问号之后匹配，同时仍然不允许下一个字符是单词字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:43:30.680

`?`匹配它之前的单个字符

`/list-empty?/`将匹配 list-empt 和 list-empty。

您可能希望使用前瞻：

`<keyword>(?=list\-empty).+`匹配具有 <keyword> 后跟 list-empty 的行。

# eclipse - 在 Eclipse 中打开单个文件时禁用编辑器选项卡重复

> ID：12926668
> 
> 赞同：0
> 
> 时间：2012-10-17T03:28:29.140
> 
> 标签：eclipse, editor, settings

我有这个问题困扰了我一段时间，我没有在 SO 或其他资源上找到任何帮助。

在 Eclipse Java EE（版本：Indigo Service Release 2 Build id：20120216-1857）中，当在 Package Explorer 中双击文件（类、XML 或其他）以在编辑器中打开它时，它将打开一个新的每次双击文件时，即使该文件之前已在另一个选项卡中打开过。因此，例如，在 Package Explorer 中连续双击单个文件 3 次将在编辑器中为该单个文件打开 3 个选项卡。

我找到了一些关于如何在公共选项卡中显示搜索结果，或者如何在两个不同的编辑器中打开单个文件的信息，但没有关于这个问题，我找不到任何设置来禁用这种烦人的行为。

有人对这个问题有一些线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:23:10.047

把 Eclipse 的默认设置放回去后，现在好像没问题了。我会更新这篇文章，以防以后发生同样的问题。

# c - 从寄存器中读取 2 位

> ID：12926670
> 
> 赞同：1
> 
> 时间：2012-10-17T03:28:35.223
> 
> 标签：c, bit-manipulation

我正在查看 NIC 的数据表规范，它说：

寄存器的位 2:3 包含 NIC 速度，4 包含链接状态等。如何使用按位隔离这些位？

例如，我已经看到了隔离链接状态的代码，类似于：

(link_reg & (1 << 4))>>4

但我不太明白为什么正确的转变。我必须说，我仍然对按位运算不太满意，即使我了解如何转换为二进制以及每个操作的作用，但它并不实用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T03:45:05.453

这取决于你想用那个位做什么。链接状态，称之为 L 在某处的变量/寄存器中

```
 43210
xxxxLxxxx 
```

要使用 1 隔离您想要的那个位，按位运算：

```
 xxLxxxx
& 0010000
=========
  00L0000 
```

1<<4 = 1 有 4 个零或 0b10000，你想要的数字。

```
status&(1<<4) 
```

这将给出零或 0b10000 的结果。您可以进行布尔比较以确定它是假（零）还是真（非零）

```
if(status&(1<<4))
{
   //bit was on/one
}
else
{
   //bit was off/zero
} 
```

如果您希望结果为 1 或零，则需要将结果移至个列

```
 (0b00L0000 >> 4) = 0b0000L 
```

如果 and 的结果为零，则移位仍然为零，如果结果为 0b10000，则右移 4 给出 0b00001

所以

```
(status&(1<<4))>>4 gives either a 1 or 0;

(xxxxLxxxx & (00001<<4))>>4 =
(xxxxLxxxx & (10000))>>4 = 
(0000L0000) >> 4 = 
0000L 
```

另一种使用更少操作的方法是

```
(status>>4)&1;
xxxxLxxxx >> 4 = xxxxxxL
xxxxxxL & 00001 = 00000L 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T03:35:13.183

最容易看一些二进制数。

这是一个可能的寄存器值，下面是位索引：

```
 00111010
  76543210 
```

所以，第 4 位是 1。我们如何得到那个位？我们构造一个仅包含该位的*掩码*（我们可以通过将 1 移到正确的位置来做到这一点，即`1<<4`），并使用`&`：

```
 00111010
& 00010000
----------
  00010000 
```

但我们想要一个 0 或 1。所以，一种方法是将结果向下移动：`00010000 >> 4 == 1`。另一种选择是`!!val`，它将 0 变为 0 并将非零变为 1（请注意，这仅适用于单个位，而不是像链接速度这样的两位值）。

现在，如果您想要位 3:2，您可以使用设置了这两个位的掩码。您可以写入`3 << 2`获取`00001100`（因为 3 设置了两个位）。然后我们`&`用它：

```
 00111010
& 00001100
----------
  00001000 
```

并向下移动 2 以获得`10`所需的两位。因此，获得两位链接速度的语句将是`(link_reg & (3<<2))>>2`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T03:32:45.090

您可以使用它来确定位置的位`pos`是否设置在`val`：

```
#define CHECK_BIT(val, pos) ((val) & (1U<<(pos)))

if (CHECK_BIT(reg, 4)) {
    /* bit 4 is set */
} 
```

如果两个操作数的相应位设置为 1，则按位与运算符 (&) 将结果中的每个位设置为 1。否则，结果位为 0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T03:35:19.970

如果您想将第 2 位和第 3 位（从 0 开始计数）视为一个数字，您可以这样做：

```
unsigned int n = (link_get & 0xF) >> 2; 
```

按位加 15（二进制为 0b1111）将除底部四位以外的所有位设置为零，然后右移 2 位得到第 2 位和第 3 位中的数字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T03:36:29.330

问题是隔离位是不够的：您需要移动它们以获得正确的值大小顺序。

在您的示例中，您的大小为 2 位和 3 位（我假设最低有效位为 0 位），这意味着它是 [0,3] 范围内的值。`reg & (0x03<<2)`现在您可以使用or, 转换来屏蔽这些位，`(reg & 0x12)`但这还不够：

```
reg   0110 1010 &
0x12  0000 1100
---------------
0x08  0000 1000 
```

如您所见，结果`1000b`是 8，超出范围。要解决这个问题，您需要将结果移回，以便您感兴趣的值的最低有效位对应于包含字节的最低有效位：

```
0000 1000 >> 2 = 10b = 3 
```

现在是正确的。

# jquery - JQuery 移动页面参数

> ID：12926671
> 
> 赞同：4
> 
> 时间：2012-10-17T03:28:53.563
> 
> 标签：jquery, jquery-mobile

只是想知道如何将一些参数传递给 JQuery Mobile 页面？

例如

```
<div data-role="page-content">                                                      
         <ul class="gallery">   
                    <li><a href="#mypage?01"><img src="1.jpg"/></a></li>
                    <li><a href="#mypage/02"><img src="2.jpg"/></a></li>                           
         </ul>                        
</div><!-- /content --> 
```

如您所见，我尝试了 # 和 ? 但是它们不起作用

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T04:10:24.893

您可以通过更改以下内容来实现它。

一、删除`<a>`

二、内部页面到外部页面

```
"#mypage" to "mypage.html" 
```

三、将图像的“单击”事件绑定到调用页面的函数

```
$("#img1").click(function () {
      $.mobile.changePage("mypage.html", { data: { [...parameters...] } });
//eg: $.mobile.changePage("mypage.html", { data: { "param1": "value1" } });
}); 
```

四。在 MyPage.html 中使用这个

```
<div data-role="page" id="newPageId">
  <script type="text/javascript">
    $("#newPageId").on("pageshow", onPageShow);
    function onPageShow(e,data)
    {
        var url = $.url(document.location);

        var param1 = url.param("param1");
        var param2 = url.param("param2");
        :
    }
  </script>
</div> 
```

您可以在此处遵循详细[的教程](http://ramkulkarni.com/blog/passing-data-between-pages-in-jquery-mobile/)

您还可以[在此处查看此问题](https://stackoverflow.com/questions/9738948/jquery-mobile-change-page)以了解一些变化。*看答案*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T04:10:47.807

这些是一些可以帮助您或至少让您开始的链接

[http://ramkulkarni.com/blog/passing-data-between-pages-in-jquery-mobile/](http://ramkulkarni.com/blog/passing-data-between-pages-in-jquery-mobile/)

[http://blog.digitalbackcountry.com/2011/12/passing-data-between-pages-in-jquery-mobile/](http://blog.digitalbackcountry.com/2011/12/passing-data-between-pages-in-jquery-mobile/)

[如何在 Jquery Mobile 中的两个页面之间传递和获取参数？](https://stackoverflow.com/questions/7582781/how-to-pass-and-get-parameters-between-two-pages-in-jquery-mobile)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-13T05:10:05.850

我认为问题是在链接到内部页面时如何处理参数。

当我发现这个问题时，这是我解决问题的方法：

```
 <div data-role="page-content">                                                      
      <ul class="gallery">   
        <li><a href="#mypage" data-my_param=1><img src="1.jpg"/></a></li>
        <li><a href="#mypage" data-my_param=2><img src="2.jpg"/></a></li>                           
      </ul>                        
    </div><!-- /content --> 
```

然后...

```
 $('ul').on('click', 'a', function(e){
        myParam = $(this).data('my_param');            
        //do what ever needs to be done to the page with the param
    }); 
```

# ipad - iPad 上多任务手势选项的默认状态是什么？

> ID：12926674
> 
> 赞同：0
> 
> 时间：2012-10-17T03:29:04.450
> 
> 标签：ipad, multitasking-gestures

iPad 开箱即用的多任务手势选项的默认状态是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T03:37:55.800

默认情况下启用多任务手势。

# asp.net-mvc - ASP.NET MVC 4 引用单个父实体的多个外键

> ID：12926675
> 
> 赞同：3
> 
> 时间：2012-10-17T03:29:04.047
> 
> 标签：asp.net-mvc, foreign-keys, entity, poco

我正在尝试开发一个 ASP.NET MVC 4 应用程序，玩家可以在其中根据他们的进攻、防守和助攻技能进行评分。Offence、Defense 和 Assist 是 Player 表上的外键，引用相同的查找表 - Rating。

我有以下父实体：

```
public class Rating
{
    public int Id { get; set; }

    public string Name { get; set; }

    public virtual ICollection<Player> Players { get; set; }
} 
```

和子实体：

```
public class Player
{
    public int Id { get; set; }

    public string Name { get; set; }

    public int OffenceRatingId { get; set; }
    [ForeignKey("OffenceRatingId")]
    public virtual Rating OffenceRating { get; set; }

    public int DefenceRatingId { get; set; }
    [ForeignKey("DefenceRatingId")]
    public virtual Rating DefenceRating { get; set; }

    public int AssistRatingId { get; set; }
    [ForeignKey("AssistRatingId")]
    public virtual Rating AssistRating { get; set; }
} 
```

构建和搭建脚手架一切正常，但是当我运行应用程序时，出现以下错误：

```
Introducing FOREIGN KEY constraint 'FK_dbo.Players_dbo.Ratings_DefenceRatingId' on table 'Players' may cause cycles or multiple cascade paths. Specify ON DELETE NO ACTION or ON UPDATE NO ACTION, or modify other FOREIGN KEY constraints. 
```

我是 MVC 的新手，不知道我在这里缺少什么。对此的任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T03:38:06.173

默认情况下，Entity Framework 有一个 Cascade on Delete 约定。当两个实体彼此具有外键时，会导致循环引用，并且删除时的级联不能应用于两个实体。

最简单的解决方案是删除[删除约定的级联](http://geekswithblogs.net/danemorgridge/archive/2010/12/17/ef4-cpt5-code-first-remove-cascading-deletes.aspx)，并根据具体情况应用它。

# c# - 使用 jQuery 驱动的“选择”下拉的双向数据绑定

> ID：12926676
> 
> 赞同：6
> 
> 时间：2012-10-17T03:29:08.580
> 
> 标签：c#, jquery, .net, asp.net-mvc-4, jquery-chosen

好的，我有一个 jQuery 版本的 Chosen 应用于`select`在我的页面上正确显示，我使用以下代码完成了此操作。首先，我有一个`BaseController`设置`ViewBag`列出所有可能类别的属性：

```
protected override void OnActionExecuted(ActionExecutedContext filterContext)
{
    try
    {
        _connection.Open();
        this.ViewBag.AvailableCategories = new MultiSelectList(_connection.Query<Category>("select * from Category"), "CategoryID", "Name");
    }
    catch (Exception ex)
    {
        throw new HttpException(500, ex.Message);
    }
    finally
    {
        _connection.Close();
    }

    base.OnActionExecuted(filterContext);
} 
```

接下来，当导航到`/Event/View/1`我有`EventController`设置（**注意**这个控制器基于上述控制器）时，使用以下`View`方法。

```
public ActionResult View(int id)
{
    Event evt = null;

    try
    {
        evt = Event.Where(_connection, id);
        if (evt == null)
        {
            throw new HttpException(404, "Oops! The event you're looking for does not exist.");
        }
    }
    catch (Exception ex)
    {
        throw new HttpException(500, ex.Message);
    }

    return View(evt);
} 
```

如您所见，它将模型设置为以下模型。

```
public class Event
{
    public int EventID { get; set; }
    public int BusinessID { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public int NeighborhoodID { get; set; }

    public IEnumerable<int> CategoryIds
    {
        get
        {
            if (Categories == null) { return new List<int>(); }
            return Categories.Select(c => c.CategoryID).AsEnumerable();
        }
    }

    public List<EventCategory> Categories { get; set; }
    public List<EventHours> Hours { get; set; }

    public static Event Where(IDbConnection connection, int id)
    {
        Event result = null;

        try
        {
            connection.Open();

            var sql =
                @"  select * from Event where EventID = @EventID
                    select * from EventCategory where EventID = @EventID
                    select * from EventHours where EventID = @EventID";
            using (var multiResult = connection.QueryMultiple(sql, new { EventID = id }))
            {
                result = multiResult.Read<Event>().FirstOrDefault();
                if (result != null)
                {
                    result.Categories = multiResult.Read<EventCategory>().ToList();
                    result.Hours = multiResult.Read<EventHours>().ToList();
                }
            }
        }
        finally
        {
            connection.Close();
        }

        return result;
    }
} 
```

最后，我在视图中有以下标记。

```
@Html.DropDownListFor(m => m.CategoryIds,
    ViewBag.AvailableCategories as MultiSelectList,
    new { multiple = "multiple", @class = "chzn-container" }) 
```

现在，正如我一开始所说，它可以正确显示并按预期列出所有类别。但是，即使该`CategoryIds`属性实际上列出了两个选定的类别，它也没有将它们设置（或就此显示它们）在加载时选择的下拉列表中选择。

我不得不进一步假设，如果用户从选择的下拉列表中选择了一个值，它也不会在帖子上正确绑定，因为它不会在选择项目时更改 HTML。

所以，我的问题是，如何正确地将双向数据绑定到 MVC 中的选择下拉列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T12:58:40.863

`ListBoxFor`是您应该用于多选列表的助手

更换

```
@Html.DropDownListFor(m => m.CategoryIds,
    ViewBag.AvailableCategories as MultiSelectList,
    new { multiple = "multiple", @class = "chzn-container" }) 
```

和

```
@Html.ListBoxFor(m => m.CategoryIds,
    ViewBag.AvailableCategories as MultiSelectList,
    new { multiple = "multiple", @class = "chzn-container" }) 
```

应该做的伎俩

# c# - 从多值字典中删除特定值

> ID：12926678
> 
> 赞同：1
> 
> 时间：2012-10-17T03:29:21.673
> 
> 标签：c#, collections, dictionary

我在这里看到了有关如何制作每个键具有多个值的字典的帖子，例如此链接中提供的解决方案之一：

[多值字典](https://stackoverflow.com/questions/3850930/multi-value-dictionary)

看来我必须使用 List<> 作为键的值，以便一个键可以存储多个值。

如果您想添加值，链接中的解决方案很好。但我现在的问题是如何从单个键中删除特定值。

我有这段代码用于向字典添加值：

```
private Dictionary<TKey, List<TValue>> mEventDict;
    // this is for initializing the dictionary

public void Subscribe(eVtEvtId inEvent, VtEvtDelegate inCallbackMethod)
    {
        if (mEventDict.ContainsKey(inEvent))
        {
            mEventDict[inEvent].Add(inCallbackMethod);
        }
        else
        {
            mEventDict.Add(inEvent, new List<TValue>() { v });
        }
    }
// this is for adding values to the dictionary.
// if the "key" (inEvent) is not yet present in the dictionary,
// the key will be added first before the value 
```

我现在的问题是从键中删除特定值。我有这个代码：

```
public void Unsubscribe(eVtEvtId inEvent, VtEvtDelegate inCallbackMethod)
    {
        try
        {
            mEventDict[inEvent].Remove(inCallbackMethod);
        }

        catch (ArgumentNullException)
        {
            MessageBox.Show("The event is not yet present in the dictionary");
        }
    } 
```

基本上，我所做的只是将 Add() 替换为 Remove() 。这行得通吗？

此外，如果您对代码有任何问题或疑问（初始化等），请随时提出。

感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:09:54.547

TylerOhlsen 的回答是朝着正确方向迈出的一步，但它有 6 个键查找（调用 Remove、ContainsKey 和索引器）。使用 TryGetValue 可以将其减少到三个：

```
private Dictionary<TKey, List<TValue>> mEventDict;

public void Subscribe(TKey inEvent, TValue inCallbackMethod)
{
    List<TValue> list;

    if (mEventDict.TryGetValue(inEvent, out list))
        list.Add(inCallbackMethod);
    else
        mEventDict.Add(inEvent, new List<TValue> { inCallbackMethod });
}

public bool Unsubscribe(TKey inEvent, TValue inCallbackMethod)
{
    List<TValue> list;

    if (!mEventDict.TryGetValue(inEvent, out list))
        return false;

    bool removed = list.Remove(inCallbackMethod);

    if (list.Count == 0)
        mEventDict.Remove(inEvent);

    return removed;
} 
```

如果您不关心删除空列表：

```
public bool Unsubscribe(TKey inEvent, TValue inCallbackMethod)
{
    List<TValue> list;

    if (!mEventDict.TryGetValue(inEvent, out list))
        return false;

    return list.Remove(inCallbackMethod);
} 
```

如果您不需要报告该项目是否在列表中（因此从列表中删除），请将返回类型更改为 void，并且（在第一个版本中）删除该`removed`变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T04:01:09.393

它会起作用吗？不完全是你想要的方式......

*   您的方法参数需要是泛型类型。
*   List(T).Remove 不会引发 ArgumentNullException。
*   如果您的列表为空，您可能需要清理您的字典。
*   调用者可能不关心回调是否在他们取消订阅时被订阅，但您拥有该信息，因此您不妨返回它。此信息可能有助于故障排除/记录目的。

这就是我要推荐的...

```
private Dictionary<TKey, List<TValue>> mEventDict;

public void Subscribe(TKey inEvent, TValue inCallbackMethod)
{
    if (!mEventDict.ContainsKey(inEvent))
        mEventDict.Add(inEvent, new List<TValue>());

    mEventDict[inEvent].Add(inCallbackMethod);
}

public bool Unsubscribe(TKey inEvent, TValue inCallbackMethod)
{
    if (!mEventDict.ContainsKey(inEvent))
        return false;

    bool removed = mEventDict[inEvent].Remove(inCallbackMethod);

    if (mEventDict[inEvent].Count == 0)
        mEventDict.Remove(inEvent);

    return removed;
} 
```

注意：我没有测试过这段代码，所以试试吧。此外，此代码**不是**线程安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T22:59:15.500

@phoog - 所以我想将 Unsubscribe 方法保留为`void`. 修改代码后，这就是我想出的......

```
public void Unsubscribe(TKey inEvent, TValue inCallbackMethod)
{
    List<TValue> list;

    bool mRemoved = false.

    if (mEventDict.TryGetValue(inEvent, out list))
    {
        list.Remove(inCallbackMethod);
        mRemoved = true;
    }
} 
```

`listRemoved`变量是必要的吗？但是话又说回来，我认为如果`inCallbackMethod`无法在列表中找到，什么都不会发生。

# sql-server - 我可以将函数名称或数据源作为参数传递给 T-SQL 函数或存储过程吗？

> ID：12926693
> 
> 赞同：0
> 
> 时间：2012-10-17T03:31:32.447
> 
> 标签：sql-server

我可以将函数名称或数据源作为参数传递给 T-SQL 函数或存储过程吗？以便重用函数或存储过程。如果可能的话可以给我一些例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T03:38:05.953

是的，您可以，这是通过一种称为动态 sql 的方法。现在您知道要回答的真正问题是您应该这样做。如果要使用该方法，则需要注意动态 sql 的许多警告和危险。

网络上有很多非常好的信息，可以为您提供更多信息。一个很好的起点就在这里。一段时间以来，这一直是网络上的一个很好的指南。

[http://www.sommarskog.se/dynamic_sql.html](http://www.sommarskog.se/dynamic_sql.html)

这也是另一个值得阅读的好系列。

[http://www.mssqltips.com/sqlservertip/1160/execute-dynamic-sql-commands-in-sql-server/](http://www.mssqltips.com/sqlservertip/1160/execute-dynamic-sql-commands-in-sql-server/)

要清楚动态 sql 有一些很好的用途......只是要小心和明智。

# iis - 具有多个主机头的 MS 网络负载平衡

> ID：12926695
> 
> 赞同：1
> 
> 时间：2012-10-17T03:31:51.377
> 
> 标签：iis, load-balancing

目前，我有一个运行多个网站的网络服务器。所有这些网站都有一个主机名 xxx.domain.com。我被告知要在服务器上实现 MS 负载平衡。在我实现 NLB 以集群到 2 个服务器之后，我应该如何使用主机名绑定网站？以下是我的 NLB 配置：

webserver01 IP：10.10.0.1

webserver02 IP：10.10.0.2

集群IP IP：10.10.0.3

网站 1 的主机名是 web1.domain.com

网站 2 的主机名是 web2.domain.com

谢谢

乔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T14:42:38.930

它非常简单，只需更换 IP

web1.domain.com 的网站 1 主机名与 DNS 中的集群 IP

web2.domain.com 的网站 2 主机名与 DNS 中的集群 IP

在您的情况下 ClusterIP IP ：`10.10.0.3`

因为当我们创建 NLB 时，集群 IP 直接将您的请求传输到节点

有用。我已经检查过了。

# python - 最有效的相关数据输入方式

> ID：12926710
> 
> 赞同：0
> 
> 时间：2012-10-17T03:33:49.467
> 
> 标签：python, database, google-app-engine, optimization, google-cloud-datastore

我正在使用 Python 中的 Google App Engine 构建一个网站，但是这个问题应该适用于任何类似的东西，而不仅仅是这个特定的框架。我试图在两种相关数据模型之间做出决定。

它们涉及一个 Location 数据库类，每个 Location 实体都有多个与其挂钩的 Experience 数据库实体。

现在我在自己的内存缓存中有 Locations 类，并且我引用了存储在 expRef IntegerProperty 中的每个体验。然后我执行 Experience.get_by_id(expRef) 以获取所有体验并将它们显示在位置页面上。

```
class Location(ndb.Model):
    #a bunch of other properties
    expRefs = ndb.IntegerProperty(repeated=True)
class Experience(ndb.Model):
            #a bunch of other properties with no ref to Location

#here is the handler for the Location page
location = individual_location_cache(keyid)
exps= []
            if location.expRefs != []:
                for ref in location.expRefs:
                    records.append(Record.get_by_id(ref)) 
```

我想知道这是否是最好的选择，或者最好给每个体验一个对 Location 属性的引用，然后将所有引用存储在 Memcached 中并对 memcached 进行两次调用，一次用于 Location，然后一次用于所有那里的经历。

```
class Location(ndb.Model):
        #a bunch of other properties but no ref to experiences
class Experience(ndb.Model):
        #a bunch of other properties
        locationRef = ndb.IntegerProperty()

#the Location page handler starts here
location = individual_location_cache(keyid)
exps= exp_location_cache(keyid) 
```

是否有很大的不同或我忘记了任何选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:23:04.423

您存储它的方式看起来不错 - 您想要优化的一件非常明显的事情是批量获取体验：

```
exps= []
        if location.expRefs != []:
            for future in [Record.get_by_id_async(ref) for ref in location.expRefs]:
                records.append(future.get_result()) 
```

这样，NDB 将尝试通过一个查询获取您的所有体验 - 并自动将它们缓存在 memcache 中。

# c++ - 取消引用预先递增的指针会产生奇怪的结果

> ID：12926711
> 
> 赞同：1
> 
> 时间：2012-10-17T03:33:54.740
> 
> 标签：c++, pointers, dereference, pre-increment

这一定是一个愚蠢的问题，但我无法理解为什么会发生这种情况

```
int main()
{
    int i=20;
    int *p=&i;
    cout<<"old p="<<p<<endl;
    *(++p) = 10;
    cout<<"p="<<p<<endl;

} 
```

在这段代码中，我得到的输出为： old p=0x22ff08 p=oxa

为什么指针的值被更改为 10(0xa) 而不是增加较早的地址并将 10 分配给该位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T03:38:38.733

> 为什么指针的值被更改为 10(0xa) 而不是增加较早的地址并将 10 分配给该位置？

到什么位置？*没有这样的位置*。`p`指向*一个* `int`，而不是 s 的数组`int`。这种增量产生的指针并不指向您可以执行间接操作的位置。像这段代码那样尝试这样做有未定义的行为，这意味着绝对有可能发生任何事情。编译器可以随心所欲地做任何事情，因为对需要发生的事情没有任何要求。不要这样做。

在您的特定实验中，这两个变量*似乎*彼此相邻，并且当递增时，变量`p`最终指向自身，然后分配了 10，即十六进制的 A。当您使用不同的编译器版本或编译器选项进行编译时，或者即使您对代码进行看似无害的更改，也无法保证这种情况会再次发生。不要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T03:39:28.247

您正试图通过递增指针来访问可能已被占用或正在被另一个程序/进程使用的位置，并且您正试图覆盖该值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T03:44:12.690

通过将指针增加一个元素，实际上您正在访问同一个指针并将其值修改为 0xA，因为它们按顺序位于内存中。

# python - Box-API 在 python 中给出 401 但在 cURL 中没有

> ID：12926712
> 
> 赞同：0
> 
> 时间：2012-10-17T03:34:10.137
> 
> 标签：python, curl, box-api

`curl https://api.box.com/2.0/folders/0 -H "Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN"`

这工作并返回完全符合我的期望。

```
request = urllib2.Request("https://api.box.com/2.0/folders/0")
request.addheaders = [("Authorization: BoxAuth", "api_key="+apikey+"&auth_token="+auth_token)]
response = urllib2.urlopen(request) 
```

这不会并返回 401 错误。（PYTHON）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T03:37:21.840

它应该是：

```
request.add_header("Authorization", "BoxAuth api_key="+apikey+"&auth_token="+auth_token) 
```

# java - 如何递归创建数组？

> ID：12926713
> 
> 赞同：0
> 
> 时间：2012-10-17T03:34:15.677
> 
> 标签：java, recursion

这是一个来自学校的作业问题：创建一个名为 toBinary 的递归方法，该方法将单个整数作为参数并以二进制形式输出等价物。

这是我的代码：

```
import java.util.*;
class MethodAssign6{
static void toBinary(int a){
    if(a==0){
        System.out.print("theArrayOrStringIWant");
    }
    else{
        System.out.println(a%2);
        toBinary(a/2);
    }
}
public static void main(String[]args){
    toBinary(24);
}
} 
```

如您所见，当问题只希望我将单个整数作为参数时，我不知道如何创建一个数组来保存所有 a%2 值。任何人请帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T03:43:49.010

我认为您走在正确的轨道上，但是您当前的方法会将数字向后打印。尝试进行递归调用，*然后*打印：

```
static void toBinary(int a){
    if(a!=0) {
        toBinary(a/2);
        System.out.print(a%2);
    }
} 
```

您也可以使用字符串获得类似的效果：

```
static String toBinary(int a){
    if(a==0) {
        return "";
    }
    else {
        return toBinary(a/2) + (a%2);
    }
}

public static void main(String[]args){
    System.out.println(toBinary(24));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T03:39:28.553

通常，像这样的递归方法将有一个公共方法和一个用于完成计算的私有方法。所以公共方法接受一个整数，然后设置数组来保存这些值。私有数组接受整数和当前数组，因此它可以将其值添加到数组中。最后，当私有方法返回时，公共方法会解析数组并返回结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T03:42:16.587

如果您所要做的只是打印这些位，那么您实际上不需要将它们保存在一个数组中。您可以随时使用 System.out.print。确保注意调用 print 和递归调用的顺序，以免向后打印数字。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-17T03:57:16.123

```
// static String[] valsbyte = new String[10]; // global variable if you return a string
static byte[] valsbyte = new byte[10]; // global variable

// static String[] toBinary(int a){ // if you return a string
static byte[] toBinary(int a){
n++;
if(n>10){ // check recursion to jump over process and internal method call

// valsbyte[n] = a%2; // if you reurn a string

valsbyte[n] = new Integer(ax).byteValue(); // convert to byte

//LAST LINE OF METHOD
return valsbyte[n]; 
```

# html - 在“for”循环中使用的html5 jcanvas点击功能出错了

> ID：12926714
> 
> 赞同：2
> 
> 时间：2012-10-17T03:34:25.280
> 
> 标签：html, canvas, jcanvas

我使用 jcanvas 插件进行 2d tagcloud 研究。我希望我可以在画布上绘制几个标签，每个标签都链接到不同的页面。所以，我需要一个 for 循环来显示标签，这是我的代码。

```
 for(i=1;i<=5;i++){

    $("canvas").drawText({
      layer: true,
      fillStyle: "#9cf",
      strokeStyle: "#000",
      strokeWidth: 1,
      x: 100, y: 30*i,
      text: "tag"+i,
      font: "20pt 'Trebuchet MS', sans-serif",

      // Event bindings
      mouseover: function() {
        $("canvas").css({cursor: "pointer"});
      },
      mouseout: function() {
        $("canvas").css({cursor: "default"});
      },
      // Click link to open it
      click: function(layer) {
        window.open("http://www.google.com/?"+i);
      }
    });
 } 
```

但事实证明，每个标签都链接到同一个 url，这不是我期望的结果。这里的任何人都可以帮助我！多谢 ！！！

你可以在[这里](http://calebevans.me/projects/jcanvas/sandbox.php#for%28i=1;i%3C=5;i++%29%7B%0A%0A%20%20%20%20%24%28%22canvas%22%29.drawText%28%7B%0A%20%20%20%20%20%20layer%3a%20true,%0A%20%20%20%20%20%20fillStyle%3a%20%22#9cf%22,%0A%20%20%20%20%20%20strokeStyle%3a%20%22#000%22,%0A%20%20%20%20%20%20strokeWidth%3a%201,%0A%20%20%20%20%20%20x%3a%20100,%20y%3a%2030%2ai,%0A%20%20%20%20%20%20text%3a%20%22tag%22+i,%0A%20%20%20%20%20%20font%3a%20%2220pt%20%27Trebuchet%20MS%27,%20sans-serif%22,%0A%0A%20%20%20%20%20%20//%20Event%20bindings%0A%20%20%20%20%20%20mouseover%3a%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%24%28%22canvas%22%29.css%28%7Bcursor%3a%20%22pointer%22%7D%29;%0A%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20mouseout%3a%20function%28%29%20%7B%0A%20%20%20%20%20%20%20%20%24%28%22canvas%22%29.css%28%7Bcursor%3a%20%22default%22%7D%29;%0A%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20//%20Click%20link%20to%20open%20it%0A%20%20%20%20%20%20click%3a%20function%28layer%29%20%7B%0A%20%20%20%20%20%20%20%20window.open%28%22http://www.google.com/?%22%2bi%29;%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%29;%0A%20%7D)测试它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:08:38.390

添加属性 ID（或任何其他名称）并更改功能。
`...`
`font: "20pt 'Trebuchet MS', sans-serif",`
`id: i,`
`...`
`click: function(data) {` `window.open("http://www.google.com/?"+data.id);` `}`

# date - Coldfusion：cfspreadsheet 读取日期不正确

> ID：12926719
> 
> 赞同：1
> 
> 时间：2012-10-17T03:35:12.640
> 
> 标签：date, coldfusion, locale, spreadsheet, cfspreadsheet

我使用 cfspreadsheet 从我的一个应用程序中的电子表格中读取数据。我在处理日期列时遇到了很大的困难。如果我将单元格格式化为日期英语 (NZ)，它会直接显示在电子表格中，但是当我尝试上传时，它会切换日期和月份。但是，如果我将格式更改为自定义的“dd/mm/yyyy”格式，它将毫无问题地上传。

为什么在电子表格中使用默认日期格式会弄乱格式，而自定义格式却没有？有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T03:53:10.127

我使用的是日期类型“*14/03/2001”。

* 表示它将： 响应为操作系统指定的区域日期和时间设置的更改。

所以它一定是在某个地方被 java 或 CF 改变了。我将其更改为没有星号的相同日期掩码，问题停止发生。

# c++ - 指向数组的 C++ 指针

> ID：12926724
> 
> 赞同：3
> 
> 时间：2012-10-17T03:35:23.377
> 
> 标签：c++, arrays, pointers

我知道在 C++ 中，数组的名称只是指向数组第一个元素的指针。例如：

```
int foo[5]; 
```

=> **foo**是一个int类型的指针，它指向数组的第一个元素，即a[0]

但是，我们有这个：

```
int (*foo)[5] 
```

这里，**foo**是指向类型数组的指针。那么**foo**是指向（int 类型）指针的指针吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T03:37:14.903

这是一个由五个整数组成的数组：

```
int a[5]; 
```

这是一个指向五个整数数组的指针：

```
int (*p)[5] = &a; 
```

这是一个指向 int 的指针：

```
int * q = a;  // same as &a[0] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T03:37:36.990

> 在 C++ 中，数组的名称只是指向数组第一个元素的指针

这是不正确的：数组的名称可以“免费”*转换*为相应的指针类型，但它绝对*不是*指针。最简单的方法是比较指针和数组的大小：

```
int foo[5];
int *ptr;
cout << sizeof(foo) << endl;
cout << sizeof(ptr) << endl; 
```

`int`您的第二个示例是指向大小为 5 的 s数组的指针。

```
cout << sizeof(foo) << endl;
cout << sizeof(*foo) << endl; 
```

在 32 位环境中，[这会按预期打印](http://ideone.com/p48h4) `4`和`20`。

# objective-c - 我如何从 NSMutableDictionary 子类化

> ID：12926726
> 
> 赞同：1
> 
> 时间：2012-10-17T03:35:38.583
> 
> 标签：objective-c

> **可能重复：**
> [如何从 NSDictionary 继承？](https://stackoverflow.com/questions/1191329/how-to-inherit-from-nsdictionary)

根据 API，我必须重写方法：

```
setObject:forKey:
removeObjectForKey:
initWithObjects:forKeys:
count
objectForKey:
keyEnumerator 
```

你能提供一个关于如何覆盖它们的例子吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T04:02:06.203

这实际上比仅仅继承 NSMutableDictionary 更复杂。NSMutableDictionary（以及同样的 NSMutableArray）是不透明的类。也就是说，它们只是隐藏动态数据结构的接口，这些数据结构不像普通的具体类那样符合。特别是当你创建一个 NSMutableDictionary 时，你会得到一个使用 NSMutableDictionary 接口的类，但它实际上并不是一个 NSMutableDictionary！这意味着返回的课程实际上不会是您的课程，Yikes！继承 NSMutableDictionary 实际上是实现具有自定义功能的 NSMutableDictionary 接口。

您需要做的是让您的子类有一个数据结构作为成员变量（最简单的就是一个 NSMutableDictionary），并在您实现覆盖方法时使用该类。

例子：

```
@interface MyMutableDictionary : NSMutableDictionary

... interface methods ...

@end 
```

和

```
@implementation MyMutableDictionary
{
    NSMutableDictionary* _proxy;
}

- (id) init {
    if (self = [super init]) {
        _proxy = [[NSMutableDictionary alloc] init];
    }
    return self;
}

... implementation of methods ...

- (void) setObject:(id)obj forKey:(id)key {
    if (obj) {
        [_proxy setObject:obj forKey:key];
    } else {
        [_proxy removeObjectForKey:key];
    }
}

@end 
```

这个例子是一个人为的例子，它展示了如何实现一个自定义的 NSMutableDictionary，它在设置 nil 对象时不会抛出异常，而是使用该键删除对象。对于您需要直接使用 forwardingTargetForSelector: 方法的任何剩余方法，这样您就可以让您的 _proxy 成员接管任何未实现的方法（尽管您需要改为子类化 NSObject 并显式声明您想要的可变字典所需的所有方法- 这是因为否则将使用真正的 NSMutableDictionary 方法，这将不起作用）。

```
- (id) forwardingTargetForSelector:(SEL)aSelector
{
    return _proxy;
} 
```

# grails - Grails SpringSecurity 用户对象

> ID：12926727
> 
> 赞同：0
> 
> 时间：2012-10-17T03:35:40.943
> 
> 标签：grails, groovy, spring-security

我有一个与 SpringSecurityCore 插件一起设置的基本 Grails 2 应用程序。这似乎工作正常。但是，当我尝试通过扩展类向我的 User.groovy 文件添加其他属性时，我似乎无法在我的控制器中引用这些属性。

为了更好地说明这个问题，请看一下我扩展 User.groovy 的基本类：

用户信息.groovy：

```
class UserInfo extends User {

String firstname
String lastname
} 
```

在我想引用当前用户名的页面上，我只是在编写一个方法，如下所示：

```
def index() { 

        def uname = springSecurityService.currentUser.username
        def firstname = springSecurityService.currentUser.firstname

        render uname

    } 
```

这可以很好地呈现用户名，我相信这是因为在基本 User.groovy 文件中引用了用户名：

```
class User {

transient springSecurityService

String username
String password 
```

但是，当我尝试将名字定义为 springSecurityService.currentUser.firstname 的一部分时，上述“def index()”方法会失败。

如果我将额外的属性注入到基本 User.groovy 类中，那么我可以通过 springSecurityService.currentUser.[property] 引用它们

为了说明这一点：

```
class User {

transient springSecurityService

String username
String password
    String firstname
    ... 
```

然后我可以在上述索引方法中引用我的用户的名字属性。

是否可以引用我的 User 的扩展属性而不在基 User 类中注入值？我的目标是尽量保持 User 类尽可能干净，同时仍然能够调用 UserInfo.groovy 文件中引用的值。

提前感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T02:48:16.627

如果您确实需要将用户信息的某些属性放入另一个域并且希望这些属性仍然可以从 springSecurityService.currentUser 访问，则必须实现自己的[UserDetailsS](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/11%20Custom%20UserDetailsService.html) ​​ervice以将 UserInfo 属性与 User 打包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T06:31:06.517

如果您扩展`User`该类，则 SpringSecurity 插件对您的扩展类一无所知`UserInfo`。

如果你打电话给`springSecurityService.currentUser`你，你会得到一个`User`not of `UserInfo`- 所以你没有属性`firstname`。

如果您不喜欢向其中添加几个新属性，`User`可以添加对该`UserInfo`类的引用。

```
class UserInfo {
    static belongsTo = [user: User]

    String firstname
    String lastname
    ...
}

class User {
   ...
   UserInfo userInfo
   ... 
} 
```

您应该记住，此引用向您的数据库添加了一个额外的表，如果您想访问您的用户实例，这会导致额外的连接操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T07:11:45.000

当您最初安装 Spring Security 插件并创建您的 User 类时，它应该在 Config.groovy 中添加一些属性，告诉它使用哪个类作为默认用户类。扩展默认 User 类时，您应该更新 Config.groovy 中的属性以反映这一点。您要更新的属性（如果不存在则添加）如下：

```
grails.plugins.springsecurity.userLookup.userDomainClassName = 'your.package.UserInfo'

```

如果您扩展/更新任何默认值，则此页面中大约有一些与用户和角色/权限相关的[属性。](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/4%20Required%20and%20Optional%20Domain%20Classes.html)

# javascript - JavaScript Twitter按钮代码不起作用

> ID：12926728
> 
> 赞同：0
> 
> 时间：2012-10-17T03:35:57.493
> 
> 标签：javascript, jquery, twitter

我正在尝试显示 twitter 按钮，但 twitter 按钮的代码显示为文本链接。我一直在尝试解决这个问题，但它不会变回按钮。我究竟做错了什么？请帮忙。

```
var i = 0;

var a;
var b;
var c;
var d;

function calculate() {

  console.log(1);
  var activity = $("#txtActivity").val();

  var days = parseInt( $("#txtDays").val(), 10);
  var hours = parseInt( $("#txtHours").val(), 10);
  var minutes = parseInt( $("#txtMinutes").val(), 10);
  var seconds = parseInt( $("#txtSeconds").val(), 10);

  var MoneyMadeDuringActivity = (days * 21464) + (hours * 2683) + (minutes * 44.72) + (seconds * 0.74);
  MoneyMadeDuringActivity = MoneyMadeDuringActivity.toFixed(2);

  if (isNaN(MoneyMadeDuringActivity)) {
    MoneyMadeDuringActivity = 0.00;
  }

  if (i < MoneyMadeDuringActivity) {
    if (a < MoneyMadeDuringActivity) { i = i + a; }
    if (b < MoneyMadeDuringActivity) { i = i + b; }
    if (c < MoneyMadeDuringActivity) { i = i + c; }
    if (d < MoneyMadeDuringActivity) { i = i + d; }
  } else if (i > MoneyMadeDuringActivity) {
    if (a < MoneyMadeDuringActivity) { i = i - a; }
    if (b < MoneyMadeDuringActivity) { i = i - b; }
    if (c < MoneyMadeDuringActivity) { i = i - c; }
    if (d < MoneyMadeDuringActivity) { i = i - d; }
  }

  $.getScript("http://platform.twitter.com/widgets.js");
  var twit_link = $('<a/>', {
    href : 'https://www.twitter.com/share',
    'class' : 'twitter-share-button',
    url : 'http://www.twitter.com/obamamakes',
    'data-count' : 'none',
    'data-via' : 'ObamaMakes',
    'data-text' : 'In the time it takes me to ' + activity + ', Barack Obama makes $' + i.toFixed(1)
  }).text('Tweet');

  $("#CalcOutput").html("In the time it takes me to <span class=\"num\">" + activity + "</span>,<br /> Barack Obama makes <span class=\"num\">" + "$" + i.toFixed(1) + "</span><br />");
  $("#CalcOutput").append( twit_link );
}

  $("#txtDays").focus(function() {
    $(this).val('');
  });
  $("#txtDays").keyup(function(event) {
    a = 2683;
    setInterval(calculate, 5);
  });

  $("#txtHours").focus(function(){
    $(this).val('');
  });
  $("#txtHours").keyup(function(event) {
    b = 670.75;
    setInterval(calculate, 5);
  });

  $("#txtMinutes").focus(function() {
    $(this).val('');
  });
  $("#txtMinutes").keyup(function(event) {
    c = 22.36;
    setInterval(calculate, 5);
  });

  $("#txtSeconds").focus(function(){
    $(this).val('');
  });
  $("#txtSeconds").keyup(function(event) {
    d = 0.37;
    setInterval(calculate, 5);
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:00:04.300

在[Twitter 的所有示例](https://dev.twitter.com/docs/tweet-button)中，加载的脚本都位于`<a>`标记标记之后。由于您首先加载脚本，因此它可能会立即执行，而不是响应`DOMContentReady`事件，因此可能找不到任何要创建的按钮。尝试在附加标记后包含脚本。或者尝试完全使用 Twitter 的非 jQuery 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:48:35.407

您缺少 css ，在您的脚本中，您正在设置与类的链接，`twitter-share-button` 您需要一个包含该类的样式表。您可能已经知道如何将 css 表链接到 HTML，但这里有一个示例：这介于两者之间`<head>`

```
 <link href="controls/ControlStyles.css" rel="stylesheet" type="text/css" /> 
```

编辑：

确保这在您的 HTML 中，就像在[Twitter 文档中一样](https://dev.twitter.com/docs/tweet-button)

```
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

根据您希望按钮的外观，有不同的`<script>`标签选项，如果可能的话，我仍然会尝试将该样式合并到您自己服务器上的 CSS 中

# objective-c - 将Objective-C编译成运行时形式？

> ID：12926733
> 
> 赞同：3
> 
> 时间：2012-10-17T03:36:26.983
> 
> 标签：objective-c, c, compilation, messaging, objective-c-runtime

> **可能重复：**
> [是否可以从 Objective-C 获得中间 C 代码？](https://stackoverflow.com/questions/5900838/is-it-possible-to-obtain-an-intermediate-c-code-from-objective-c)

如何获取 Objective-C 源代码 (.m) 并将其编译为原始运行时形式？

```
e.g [(id)target performSelector:(SEL)selector withObject:(id)obj]; 
```

至

```
objc_msgSend(target, @selector(selector), obj); 
```

# jquery - IE上的jquery多个切换

> ID：12926735
> 
> 赞同：0
> 
> 时间：2012-10-17T03:36:30.953
> 
> 标签：jquery, internet-explorer, slidetoggle

我面临着在 IE 上多次切换的问题。它适用于除 IE (-_-) 之外的所有其他浏览器。下面是我的代码的摘要。基本上，当我单击第一个超链接时，我**只能获得弹出警报。**当我点击后续链接时没有弹出窗口

```
 $(document).ready(function(){

$("a#toggleFruitSlideBox").click(function() {
          alert($(this).text());
      return false;
  });
});

<div id="bodykit_slidebox">
<div style="padding:5px 0px 0px 5px;">
    <a id="toggleFruitSlideBox" href="#" class="nav2">apple</a>
    <a id="toggleFruitSlideBox" href="#" class="nav2">orange</a>
    <a id="toggleFruitSlideBox" href="#" class="nav2">DURIAN</a>
    <a id="toggleFruitSlideBox" href="#" class="nav2">papaya</a>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T03:38:21.837

您有多个相同的元素，`id`这是无效的 HTML！

在这里检查我的答案：
[jQuery id 选择器仅适用于第一个元素](https://stackoverflow.com/q/11114622/601179)

您的代码与另一个问题中的代码之间的唯一区别是您使用了错误的选择器：

```
$("a#toggleFruitSlideBox") 
```

这导致 jQuery 不使用`document.getElementById`，所以这就是它在其他浏览器中工作的原因。

来自 jQuery 文档：

> 对于 id 选择器，jQuery 使用 JavaScript 函数 document.getElementById()，效率极高。当另一个选择器附加到 id 选择器时，例如 h2#pageTitle，jQuery 在将元素识别为匹配之前执行额外的检查。

删除重复的 id 并使用其他选择器，如类选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T03:40:25.707

看起来问题是你所有的身份证都是一样的。ID应该是唯一的。如果您不关心它是否在所有 a 标签上触发，请使用类或仅使用 a 选择器。

# android - 如何以编程方式创建接入点

> ID：12926738
> 
> 赞同：20
> 
> 时间：2012-10-17T03:37:02.100
> 
> 标签：android

我已经编写了代码来为安卓设备创建一个接入点。我已经在模拟器和真实设备上进行了测试。但它不起作用。我哪里弄错了？

```
public class MainWAP extends Activity {

    WifiManager wifiManager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_wap);
    }

    public void openWifi(View v) {
        createWifiAccessPoint();
    }

    private void createWifiAccessPoint() {
        if (wifiManager.isWifiEnabled()) {
            wifiManager.setWifiEnabled(false);
        }
        Method[] wmMethods = wifiManager.getClass().getDeclaredMethods();
        boolean methodFound = false;
        for (Method method: wmMethods) {
            if (method.getName().equals("setWifiApEnabled")) {
                methodFound = true;
                WifiConfiguration netConfig = new WifiConfiguration();
                netConfig.SSID = "AccessPoint";
                netConfig.allowedAuthAlgorithms.set(
                    WifiConfiguration.AuthAlgorithm.OPEN);
                try {
                    boolean apstatus = (Boolean) method.invoke(
                        wifiManager, netConfig, true);
                    for (Method isWifiApEnabledmethod: wmMethods) {
                        if (isWifiApEnabledmethod.getName().equals(
                                "isWifiApEnabled")) {
                            while (!(Boolean) isWifiApEnabledmethod.invoke(
                                    wifiManager)) {};
                            for (Method method1: wmMethods) {
                                if (method1.getName().equals(
                                        "getWifiApState")) {
                                    int apstate;
                                    apstate = (Integer) method1.invoke(
                                        wifiManager);
                                }
                            }
                        }
                    }
                    if (apstatus) {
                        Log.d("Splash Activity",
                            "Access Point created");
                    } else {
                        Log.d("Splash Activity",
                            "Access Point creation failed");
                    }

                } catch (IllegalArgumentException e) {
                    e.printStackTrace();
                } catch (IllegalAccessException e) {
                    e.printStackTrace();
                } catch (InvocationTargetException e) {
                    e.printStackTrace();
                }
            }
        }
        if (!methodFound) {
            Log.d("Splash Activity",
                "cannot configure an access point");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T12:36:43.573

你`WiFiManager`的肯定没有初始化。

在您的`onCreate`方法中添加以下内容：

```
wifiManager = (WiFiManager) getSystemService(Context.WIFI_SERVICE); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T12:18:50.717

你需要很少的东西来使这个代码工作。

1) 初始化 wifiManager `onCreate()`：

```
WifiManager wifiManager = (WiFiManager) getSystemService(Context.WIFI_SERVICE); 
```

2）您需要向您请求此权限`AndroidManifest.xml`：

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
<uses-permission android:name="android.permission.WRITE_APN_SETTINGS" /> 
```

3) 您的应用程序需要使用系统证书进行签名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T04:30:46.010

使用您使用反射利用未记录 API 的方法，事情可能无法在所有场景中正常工作。好吧，您可以尝试将这些添加到清单文件中并尝试一下。

```
android.permission.ACCESS_WIFI_STATE
android.permission.CHANGE_WIFI_STATE
android.permission.WRITE_APN_SETTINGS 
```

# git - 如何在 pre-recive 钩子中找出新 GIT 分支的父提交？

> ID：12926750
> 
> 赞同：4
> 
> 时间：2012-10-17T03:38:21.393
> 
> 标签：git, hook

我尝试在 GIT 中实现预接收挂钩，以防止大尺寸文件和指定的扩展文件（*.jar、*.zip）。

> pre-receive 钩子为接收操作执行一次。它不接受任何参数，但对于每个要更新的 ref，它会在标准输入上接收以下格式的一行：
> 
> (旧值) SP (新值) SP (参考名称) LF
> 
> 其中 (old-value) 是存储在 ref 中的旧对象名称，(new-value) 是要存储在 ref 中的新对象名称，(ref-name) 是 ref 的全名。当创建一个新的 ref 时，（旧值）是 40 0。

如果用户更新现有分支中的文件，我们可以使用“git diff”命令获取更新文件列表。然后我只需要检查更新的文件。

但是对于新分支的创建，用户可以基于现有的提交创建一个新的分支，并在本地存储库中进行一些更改，然后推送。对于这种情况，我只想检查现有提交后所做的更改使用。任何 GIT 命令都可以帮助找出新分支的来源？

例如，用户根据分支 1 中的最新提交创建分支 2。之后，创建 commit2 和 commit3。然后推分支 2。

在钩子中，（旧值）是 40 0；（新值）是 commit3；(ref-name) 是 branch2。我想得到commit1。

> 提交3--分支2
> 
> 提交2
> 
> 提交1——分支1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T21:45:19.353

我认为您正在寻找之前被推送的最近的祖先。但是，如果正在推送合并，则可能有多个这样的祖先。所以我认为你想检查这个命令输出的每个提交的差异：

```
git rev-list --boundary <new-commit> --not --all | sed -n 's/^-//p' 
```

# java - 错误：无法使用 XML 找到或加载主类

> ID：12926752
> 
> 赞同：1
> 
> 时间：2012-10-17T03:38:30.650
> 
> 标签：java, xml, ant

我正在尝试实现我的 build.xml 文件，以便可以使用 ANT 编译和创建 Jar。为了运行一些 JUnit 测试，我需要首先在端口 7777 上手动启动一个自定义服务器。但是，我在使用 XML 启动服务器时遇到了麻烦。到目前为止，这是我的代码：

```
<property name="server" location="cs.hw4.Server"/> 
<target name="run">
    <java fork="true" failonerror="yes" classname="${server}">
        <classpath refid="cs.hw4.classpath"/>
        <arg line="7777"/>
        </java>
</target> 
```

我运行 build.xml 并得到：错误：`Could not find or load main class F:...`

我发现错误是试图在目录中查找类：

> ...\cs.hw4\cs.hw4.Server

当它实际上在：

> ...\cs.hw4\ **bin** \cs.hw4.Server

有趣的是，类路径`refid= "cs.hw4.classpath"`包含“bin”文件夹。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:11:39.413

你可以试试这个方法。右键单击 ant 构建文件并运行，您应该会看到一个带有 Classpath 和 Jar 文件路径的窗口。删除它并手动添加。这次您应该看不到任何冲突。

# ffmpeg - 如何将 .jpg 转换为 .yuv

> ID：12926755
> 
> 赞同：0
> 
> 时间：2012-10-17T03:38:38.887
> 
> 标签：ffmpeg

将 .jpg 转换为 .yuv 有什么帮助吗？

我有一个 .jpg 文件，我想读取该文件并转换为 a.yuv。我怎样才能通过使用 ffmpeg 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:35:49.610

来自`man ffmpeg`（稍作修改）：

> 您可以输出到原始 YUV420P 文件：
> 
> ```
> ffmpeg -i mydivx.avi hugefile.yuv 
> ```
> 
> hugefile.yuv 是一个包含原始 YUV 平面数据的文件。每一帧由 Y 平面组成，然后是 U 和 V 平面，具有一半的垂直和水平分辨率。

请记住，ffmpeg 使用问题更适合 superuser.com（因此您可能也会在那里获得更好、更详细的答案）。

# r - 在 R 中，如何使用 read.table 读取复杂（如复数）数据

> ID：12926756
> 
> 赞同：3
> 
> 时间：2012-10-17T03:38:53.090
> 
> 标签：r, file-io, complex-numbers

我对 R 很陌生。我有一个数据文件，它有一个复数矩阵，每个格式都是 123+123i，当我尝试使用 read.table() 读取 R 中的数据时，它返回字符串，它不是我想要的。有什么方法可以读取复数文件吗？

我可以做的一件可能的事情，因为生成矩阵的程序可供我使用，我可以修改它以生成两个实数而不是单个复数，并且在读入 R 后，我可以将它们变成一个复数号码，现在这是做我想做的事的规范方式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T03:47:44.683

请参阅`?read.table`，特别是您要使用的`colClasses="complex"`参数。

# powerbuilder - PB8 命令按钮已启用

> ID：12926760
> 
> 赞同：0
> 
> 时间：2012-10-17T03:39:05.767
> 
> 标签：powerbuilder

我使用的是 PB 版本 8，虽然我也使用了更高版本的 PB，但我们有这个在版本 8 中开发的应用程序。我创建了一个外部数据窗口并在其中分配了 3 个命令按钮，我刚刚发现没有启用属性在数据窗口设计中。我构造了一行脚本：dw_1.Object.b_edit[1].Enabled = False 并将其放在 dw_1 的构造函数事件中。编译它并运行程序。不幸的是，它返回了一条错误消息“访问外部对象属性 b_edit 时出错...”

关于如何启用驻留在 PB 8 中的数据窗口内的命令按钮，还有其他方法吗？我还检查了更高版本的 PB 是否可以在数据窗口中启用命令按钮的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:39:37.617

我认为你应该试试这两个：

```
<DW Control Name>.Modify("<Buttonname>.Enabled=<Yes or No>") 
```

或者

```
<DW Control Name>.Object.<Buttonname>.Enabled='<Yes or No>' 
```

您的代码的问题可能在于 [1] 和“错误”。您还可以在以下菜单中浏览数据窗口控件和设置的属性：

文件\新建\工具\数据窗口语法

在您的示例中，它应该如下所示：

```
dw_1.Modify("b_edit.Enabled=No") 
```

如果 b_edit 是您的按钮控件的名称！

溴

加博尔

# sql - 当前主键在防止重复方面无效。这听起来像是重新设计我的表格的好方法吗？

> ID：12926763
> 
> 赞同：0
> 
> 时间：2012-10-17T03:39:37.713
> 
> 标签：sql

每隔一段时间，我就会用那些回复我们 Craigslist 广告的人更新我们的研究招聘数据库。每个受访者都有一个唯一的`respondentID`，这是主键。

有时，人们会多次回复这些 Craigslist 广告。我认为我们的数据库中可能有重复的人，这很糟糕。

我想将我所有招聘表的主键从`respondentID`更改为`Email`，这将防止重复并更容易查找信息。我的数据库中可能已经有重复的电子邮件记录，如果有，我需要清理它。

这是我的三个招聘表的当前架构：

1.  人口统计 - 包含类似的列`RespondentID (PK)`，`Email`（我希望这是 PK）`Phone`，等
2.  流派 - 包含`RespondentID (PK)`,`Horror`等列
3.  platform - 包含`RespondentID (PK)`,`TV`等列。

我想在某个时候将所有三个表连接在一起，以便我们更好地了解某人。

以下是我的问题：

1.  如何消除数据库中已有的重复受访者？（我可以判断它们是否重复，因为它们将具有相同的电子邮件值。）
2.  鉴于我当前的架构，如何在不弄乱数据的情况下将我的数据库转换为以电子邮件作为主键？
3.  转换到新架构后，在将 Craigslist 广告电子表格中的重复项添加到演示、类型和平台表之前，我可以使用什么流程删除它们？

以下是我对解决方案的想法：

1.  创建备份表。将三个表连接起来，将大表导出到 Excel。在 Excel 中，使用数据过滤和条件格式查找重复条目，然后手动删除它们。不幸的是，我有 20,000 条记录会导致 Excel 崩溃。:( 主要问题是我不知道如何使用 SQL 删除表中的重复条目。（另外，如果我有两个来自 bobdole@republican.com 的条目，则应该保留一个条目。）你能想出一个涉及 SQL 和 Access 的更智能的解决方案？

2.  在每条电子邮件记录都是唯一的后，我将创建新表，每个表都使用电子邮件作为主键。

3.  当我想删除要导入的数据中的重复项时，我应该能够在 Excel 中轻松完成。接下来，我将使用此 SQL 命令在当前数据库和传入数据之间进行重复数据删除：

    ```
    DELETE * from newParticipantsList
    WHERE Email in (SelectEmail from Demo) 
    ```

我将尝试在 Access 的一个小测试表中复制我当前的体系结构，看看我是否能弄清楚。总的来说，我在SQL中加入表和删除数据的经验并不多，所以有点吓人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T03:42:27.150

也许我只是厚脸皮，但你为什么不在现有的表中创建一个新的身份列呢？您始终可以删除那些您认为重复的记录，但身份列在任何情况下都保证是唯一的。

您可以通过检查电子邮件列来确保插入到表中的任何新记录都不重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T04:03:12.560

要从人口统计表中删除重复项，您可以执行以下操作：

```
WITH RecordsToKeep AS (
SELECT  MIN(RespondentID) as RespondentID
    FROM    demographic 
GROUP BY Email 
) DELETE  demographic
FROM        demographic
LEFT JOIN   RecordsToKeep on RecordsToKeep.RespondentID = demographic.RespondentID
where   RecordsToKeep.RespondentID IS NULL 
```

这将保留每个电子邮件地址的第一条记录并删除其余记录。在删除源之前，您需要重新映射流派和平台表。

就将来要做什么而言，您可以让 SQL 为您完成所有重复数据删除，方法是将数据导入临时表，然后仅当地址不在人口统计中时才将不同的记录导入到最终表中桌子。

没有理由将电子邮件地址更改为主键。出于多种原因，字符串不是很好的主键。您遇到的问题不在于重复键，问题在于您如何插入数据。

# 3d - 计算通过 3D 空间中的点数组的样条曲线

> ID：12926767
> 
> 赞同：1
> 
> 时间：2012-10-17T03:40:18.803
> 
> 标签：3d, space, points, curve, spline

给定 3D 空间中的点列表，我想计算一个样条曲线（或类似的东西），它可以平滑地依次通过所有这些点。有谁知道可以做到这一点的现有工具？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:06:11.623

[SISL](http://www.sintef.no/sisl)是一个 C 库，可以满足您的要求。

# javascript - 全局变量未从 onclick 定义？

> ID：12926771
> 
> 赞同：1
> 
> 时间：2012-10-17T03:40:48.183
> 
> 标签：javascript

我已经像这样在全局范围内声明了我的数组：

```
window.onload = function(){
   var test = 'test';
   var sel = new Array();
   login_check();
}; 
```

几乎所有东西都继承`login_check()`自我引擎中的功能。问题是当我在函数中使用它时未设置while`var test`设置。`var sel`

我在我的函数中使用它：

```
console.log(test); //displays as intended
if(sel.length > 0){  //ERROR Uncaught ReferenceError: sel is not defined 
 //do something
} 
```

我应该提到 sel 在这一点上通常是空的。JS 是否有些不允许设置全局数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:43:18.277

我建议将变量移到函数之外，例如

```
var test;
var sel;
window.onload = function(){
    test = 'test';
    sel = new Array();
    login_check();
  }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:42:04.117

### 而是让它真正全球化：

```
window.onload = function(){
   var window.test = 'test';
   var window.sel = new Array();
   login_check();
}; 
```

在**函数**中：

```
console.log(window.test); //displays as intended
if(window.sel.length > 0) {
 //do something
} 
```

如果还是同样的问题，可能是这个原因，因为`window.sel`是空数组，可以认为是`null`.

尝试另一种方法将变量声明保留在函数之外：

```
var test;
var sel;
window.onload = function(){
   test = 'test';
   sel = new Array();
   login_check();
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T03:47:19.293

要制作`Objects/Variables`全局，您可以使用在功能块之外声明它的简单方法

**样本**

```
var test;
var sel;

window.onload = function(){
   test = 'test';
   sel = new Array();
   login_check();
}; 
```

希望这可以帮助！

# eclipse - Eclipse 在 Ubuntu 上对 javadoc 工具提示的格式化非常糟糕

> ID：12926774
> 
> 赞同：17
> 
> 时间：2012-10-17T03:41:16.277
> 
> 标签：eclipse, javadoc

我一直在 Windows 上使用 Eclipse，最近开始在 Ubuntu 上使用它来工作。

我的问题是，Javadoc 工具 til 大多是未格式化的，例如`<code>`标签、链接等没有效果。似乎只呈现了由`b`、`br`或 、标记加粗体的行变化。`pre`（`pre`不要更改字体。）。请参见下面的第一个示例。

我可以做任何调整以获得第二张图片吗？

额外：修复颜色也很棒，但不那么重要。

谢谢。

* * *

***我现在看到的：*** ![我所看到的](../Images/d46ffbb9a752fe56d6b089dddd019544.png)

***我想看什么***

来源：http : [//codeblessyou.com/wp-content/uploads/2011/07/2011-07-01_115631.jpg](http://codeblessyou.com/wp-content/uploads/2011/07/2011-07-01_115631.jpg)

![我想看的](../Images/142268914d9479175190cfda0201ecf9.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-06T19:49:03.963

在工具提示中呈现 HTML 时遇到了同样的问题。经过一番摆弄，我得到了解决方案：

从官方 Ubuntu 存储库安装 libwebkitgtk-1.0-0。eclipse（以及很可能其他 GTK 应用程序）使用它来呈现 HTML，但既没有预装在 Kubuntu 上，也没有在 eclipse 包中列为依赖项。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-04T17:26:19.430

事实证明，这是由两个问题引起的：

1.  Eclipse 需要 webkitgtk
2.  Eclipse 配色方案在 ubuntu 上搞砸了。

因此，解决方案是双重的。

## 第 1 部分：安装 webkitgtk

只需在终端中运行此命令

```
sudo apt-get -y install libwebkitgtk-1.0-0 libwebkitgtk-3.0-0 
```

*感谢 Johannes H. 的这一点*

## 第 2 部分：更新配色方案

首先在您的主目录中创建一个新配置。

```
gedit ~/.gtkrc-eclipse 
```

并粘贴此内容：

```
# Customs color settings for Eclipse.
# Load Eclipse as follows:
# GTK2_RC_FILES=~/.gtkrc-eclipse eclipse
#
# Sources:
# http://stackoverflow.com/a/24043778/722929
# http://askubuntu.com/a/131348/18533
# http://weblog.avp-ptr.de/20120728/how-to-fix-eclipse-colors-for-autocompletion-and-tooltips/

# Tooltip background color.
style "eclipse-tooltips" {
bg[NORMAL] = "#f5f5b5"
fg[NORMAL] = "#000000"
}

# Load settings.
widget "gtk-tooltip*" style "eclipse-tooltips" 
```

找到`eclipse43.desktop`文件并编辑它（如果您使用的 Eclipse 版本不是 4.3，请相应地更新命令）：

```
locate eclipse43.desktop
# Use the location from above
sudo gedit /usr/share/applications/eclipse43.desktop 
```

找到以开头的行`Exec=...`并将其更改为：

```
Exec=/usr/bin/eclipse43 
```

像这样

```
Exec=/bin/bash -c "GTK2_RC_FILES=~/.gtkrc-eclipse /usr/bin/eclipse43" 
```

**瞧，美丽的色彩。**（或者和 Eclipse 一样漂亮）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-11T08:18:01.543

对于背景颜色的问题，问题肯定来自GTK的设置。

你应该在这里得到一个解决方案[https://askubuntu.com/questions/70599/how-to-change-tooltip-background-color-in-unity](https://askubuntu.com/questions/70599/how-to-change-tooltip-background-color-in-unity)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-10T06:16:03.300

对于带有 GTK2 的 Eclipse Mars 方法不再起作用。您应该只编辑`usr/share/themes/Ambiance/gtk-3.0/gtk-main.css`带有 name 的部分`/*default color scheme */`。更改`@define-color tooltip_bg_color`并`@define-color tooltip_fg_color`为您喜欢的颜色。

# java - 错误：PreparedStatement 类型中的方法 setString(int, String) 不适用于参数 (int, Object)

> ID：12926778
> 
> 赞同：0
> 
> 时间：2012-10-17T03:41:36.630
> 
> 标签：java

我有以下类文件。如果我尝试将值从 Vector 插入数据库，那么它将显示以下错误。我想在这种情况下使用 Vector 并寻找如何解决这个问题。

```
error : The method setString(int, String) in the type PreparedStatement is not applicable for the arguments (int, Object) 
```

下面是类代码：

```
public class ReadExcelFile {

        public static void main(String[] args) {

                String fileName = "C:\\excelFile.xls";
                Vector dataHolder = ReadCSV(fileName);
                printCellDataToConsole(dataHolder);
        }

        public static Vector ReadCSV(String fileName) {
                Vector cellVectorHolder = new Vector();

                try {
                        FileInputStream myInput = new FileInputStream(fileName);

                        POIFSFileSystem myFileSystem = new POIFSFileSystem(myInput);

                        HSSFWorkbook myWorkBook = new HSSFWorkbook(myFileSystem);

                        HSSFSheet mySheet = myWorkBook.getSheetAt(0);

                        Iterator rowIter = mySheet.rowIterator();

                        while (rowIter.hasNext()) {
                                HSSFRow myRow = (HSSFRow) rowIter.next();
                                Iterator cellIter = myRow.cellIterator();
                                Vector cellStoreVector = new Vector();
                                while (cellIter.hasNext()) {
                                        HSSFCell myCell = (HSSFCell) cellIter.next();
                                        cellStoreVector.addElement(myCell);
                                }
                                cellVectorHolder.addElement(cellStoreVector);
                        }
                } catch (Exception e) {
                        e.printStackTrace();
                }
                return cellVectorHolder;
        }

        public static void printCellDataToConsole(Vector dataHolder) {

                for (int i = 0; i < dataHolder.size(); i++) {
                        Vector cellStoreVector = (Vector) dataHolder.elementAt(i);
                     //   System.out.println(cellStoreVector);
                        for (int j = 0; j < cellStoreVector.size(); j++) {
                              HSSFCell myCell = (HSSFCell) cellStoreVector.elementAt(j);
                              String stringCellValue = myCell.toString();
                              System.out.print(stringCellValue + "\t\t");
                        }
                        System.out.println();
                }
        }

} 
```

//下面是数据库查询

```
String sql = "INSERT INTO table_name(EMP_ID,FNAME, LNAME, CATEGORY, DEPARTMENT, Title, REASON, Manager, sDate, eDate, ID) VALUES(?,?,?,?,?,?,?,?,?,?,?)";
PreparedStatement pst1 = conn.prepareStatement(sql);
pst1.setString(1, cellStoreVector.get(0));
pst1.setString(2, cellStoreVector.get(1));
pst1.setString(3, cellStoreVector.get(2));
pst1.setString(4, cellStoreVector.get(3));
pst1.setString(5, cellStoreVector.get(4));
pst1.setString(6, cellStoreVector.get(5));
pst1.setString(7, cellStoreVector.get(6));
pst1.setString(8, cellStoreVector.get(7));
pst1.setString(9, cellStoreVector.get(8));
pst1.setString(10, cellStoreVector.get(9));
pst1.setString(11, "555");  //Hardcoded for testing. 
pst1.execute(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:48:40.523

你`Vector`被定义为持有`Objects`。

将`Vector#get`返回一个`Object`.

该`PreparedStatement#setString`方法需要一个`String`，这是一个简单的类型不匹配问题。

您可以声明您`Vector`，使其仅包含`String`...

```
Vector<String> myVector = new Vector<String>(25); 
```

......但我认为你不能从你的例子中......

您可以将值`Vector`转换为`String`

```
pst1.setString(1, (String)cellStoreVector.get(0)); 
```

但这很危险，因为直到运行时您才会发现`Vector`它不包含元素`String`

或者你可以让他`PreparedStatement`处理它...

```
pst1.setObject(1, cellStoreVector.get(0)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T04:02:54.917

您`cellStoreVector`包含`HSSFCell`. 但是，由于您使用的是非泛型集合，因此当您检索元素时，您会将它们获取为`Object`，这就是编译器抱怨的原因，因为`String`应该使用 an 。

由于细胞可以是不同类型的，你应该如何处理它实际上取决于它们是什么类型的细胞。

例如，如果所有单元格都用于字符串数据，那么有一个方法可以将单元格中的值作为`String`.

[`HSSFCell#getStringCellValue`](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFCell.html#getStringCellValue%28%29)

> 将单元格的值作为字符串获取 - 对于数字单元格，我们会抛出异常。对于空白单元格，我们返回一个空字符串。对于不是字符串公式的公式单元格，我们抛出异常

所以如果它们都是字符串单元，我认为这就是你可以做的

```
pst1.setString(1, ((HSSFCell) cellStoreVector.get(0)).getStringCellValue()); 
```

将从向量中获得的对象转换为`HSSFCell`，然后将值作为`String`.

但是，这只是一个想法，你将确保你得到什么。此外，在处理集合时，最好使用泛型版本来保证类型安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T03:46:24.090

这是一个基本的编程错误，错误消息是不言自明的。该方法的第二个参数是字符串，而不是对象。所以你必须把它转换成一个字符串，如果它真的是一个字符串，在这种情况下不是。您需要检查您的数据类型。您应该为 cellStoreVector 使用泛型以使其更清晰和更类型安全。

# python - 如何在 R 或 Python 中制作旭日形图？

> ID：12926779
> 
> 赞同：49
> 
> 时间：2012-10-17T03:41:44.060
> 
> 标签：python, r, ggplot2, data-visualization, sunburst-diagram

到目前为止，我一直无法找到可以创建像[John Stasko](http://www.cc.gatech.edu/gvu/ii/sunburst/)那样的旭日形图的 R 库。任何人都知道如何在 R 或 Python 中实现这一点？

![森伯斯特](../Images/dac61fad515d4d68b86abe9852e9af15.png)

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2017-10-17T13:00:58.353

在极坐标投影中使用 matplotlib 条的 Python 版本的旭日形图：

```
import numpy as np
import matplotlib.pyplot as plt

def sunburst(nodes, total=np.pi * 2, offset=0, level=0, ax=None):
    ax = ax or plt.subplot(111, projection='polar')

    if level == 0 and len(nodes) == 1:
        label, value, subnodes = nodes[0]
        ax.bar([0], [0.5], [np.pi * 2])
        ax.text(0, 0, label, ha='center', va='center')
        sunburst(subnodes, total=value, level=level + 1, ax=ax)
    elif nodes:
        d = np.pi * 2 / total
        labels = []
        widths = []
        local_offset = offset
        for label, value, subnodes in nodes:
            labels.append(label)
            widths.append(value * d)
            sunburst(subnodes, total=total, offset=local_offset,
                     level=level + 1, ax=ax)
            local_offset += value
        values = np.cumsum([offset * d] + widths[:-1])
        heights = [1] * len(nodes)
        bottoms = np.zeros(len(nodes)) + level - 0.5
        rects = ax.bar(values, heights, widths, bottoms, linewidth=1,
                       edgecolor='white', align='edge')
        for rect, label in zip(rects, labels):
            x = rect.get_x() + rect.get_width() / 2
            y = rect.get_y() + rect.get_height() / 2
            rotation = (90 + (360 - np.degrees(x) % 180)) % 360
            ax.text(x, y, label, rotation=rotation, ha='center', va='center') 

    if level == 0:
        ax.set_theta_direction(-1)
        ax.set_theta_zero_location('N')
        ax.set_axis_off() 
```

例如，如何使用此功能：

```
data = [
    ('/', 100, [
        ('home', 70, [
            ('Images', 40, []),
            ('Videos', 20, []),
            ('Documents', 5, []),
        ]),
        ('usr', 15, [
            ('src', 6, [
                ('linux-headers', 4, []),
                ('virtualbox', 1, []),

            ]),
            ('lib', 4, []),
            ('share', 2, []),
            ('bin', 1, []),
            ('local', 1, []),
            ('include', 1, []),
        ]),
    ]),
]

sunburst(data) 
```

[![python matplotlib旭日形图](../Images/00fb9bc841d76ccacfc2ff4e4f62cc69.png)](https://i.stack.imgur.com/9978Z.png)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2015-10-01T13:14:47.733

现在，您甚至可以使用 R 轻松构建交互式版本：

```
# devtools::install_github("timelyportfolio/sunburstR")

library(sunburstR)
# read in sample visit-sequences.csv data provided in source
# https://gist.github.com/kerryrodden/7090426#file-visit-sequences-csv
sequences <- read.csv(
  system.file("examples/visit-sequences.csv",package="sunburstR")
  ,header=F
  ,stringsAsFactors = FALSE
)

sunburst(sequences) 
```

[![在此处输入图像描述](../Images/1477812fdda12246da999758de12aa4e.png)](https://i.stack.imgur.com/MYNwl.jpg)

...当你将鼠标移到上面时，神奇的事情发生了：

[![在此处输入图像描述](../Images/28654d57007ef79ef1824c75e368c2d3.png)](https://i.stack.imgur.com/LBbYa.jpg)

**编辑**
这个包的官方网站可以在这里找到（有很多例子！）：[https ://github.com/timelyportfolio/sunburstR](https://github.com/timelyportfolio/sunburstR)

向创建了这段令人印象深刻的代码的@timelyportfolio 致敬！

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-10-17T05:49:19.777

`geom_tile`您可以使用`ggplot2`软件包中的旭日图来创建一些东西。让我们首先创建一些随机数据：

```
require(ggplot2); theme_set(theme_bw())
require(plyr)
dat = data.frame(expand.grid(x = 1:10, y = 1:10),
                 z = sample(LETTERS[1:3], size = 100, replace = TRUE)) 
```

然后创建光栅图。这里，图中的轴与变量 in`x`耦合，轴与变量耦合，像素的填充与变量耦合。这会产生以下图：`x``dat``y``y``z`

```
p = ggplot(dat, aes(x = x, y = y, fill = z)) + geom_tile() 
print(p) 
```

![在此处输入图像描述](../Images/41507cbca26f63fba56bfebf542691ab.png)

该`ggplot2`包支持各种坐标变换，其中一种取一个轴并将其投影在一个圆上，即极坐标：

```
p + coord_polar() 
```

![在此处输入图像描述](../Images/f16fd58e54fa543047cb73af5c12510c.png)

这大致可以满足您的需求，现在您可以进行调整`dat`以获得所需的结果。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-09-22T15:55:16.540

有一个包叫`ggsunburst`. 遗憾的是不在 CRAN 中，但您可以按照网站上的说明进行安装：[http](http://genome.crg.es/~didac/ggsunburst/ggsunburst.html) ://genome.crg.es/~didac/ggsunburst/ggsunburst.html 。

[![在此处输入图像描述](../Images/675459495e528eb0758bd632a68c1d8e.png)](https://i.stack.imgur.com/zPrK7.png)

希望它对仍在寻找这样一个好包的人有所帮助。

问候，

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-12-21T22:30:55.997

这是一个`ggplot2`有两层的旭日形。

基本思想是为每一层制作不同的条，并使外层的条更宽。我还弄乱了 x 轴，以确保内部饼图的中间没有孔。因此，您可以通过更改宽度和 x 轴值来控制旭日形的外观。

```
library(ggplot2)

# make some fake data
df <- data.frame(
    'level1'=c('a', 'a', 'a', 'a', 'b', 'b', 'c', 'c', 'c'), 
    'level2'=c('a1', 'a2', 'a3', 'a4', 'b1', 'b2', 'c1', 'c2', 'c3'), 
    'value'=c(.025, .05, .027, .005, .012, .014, .1, .03, .18))

# sunburst plot
ggplot(df, aes(y=value)) +
    geom_bar(aes(fill=level1, x=0), width=.5, stat='identity') + 
    geom_bar(aes(fill=level2, x=.25), width=.25, stat='identity') + 
    coord_polar(theta='y') 
```

[![在此处输入图像描述](../Images/405cf46829871fb88820a7b7860a80a5.png)](https://i.stack.imgur.com/JqpVK.png)

与 sunburst 特定软件相比，它的唯一缺点是它假设您希望外层是集体详尽的（即没有间隙）。“部分穷举”外层（如在其他一些示例中）肯定是可能的，但更复杂。

为了完整起见，这里使用更好的格式和标签对其进行了清理：

```
library(data.table)

# compute cumulative sum for outer labels
df <- data.table(df)
df[, cumulative:=cumsum(value)-(value/2)]

# store labels for inner circle
inner_df <- df[, c('level1', 'value'), with=FALSE]
inner_df[, level1_value:=sum(value), by='level1']
inner_df <- unique(text_df[, c('level1', 'level1_value'), with=FALSE])
inner_df[, cumulative:=cumsum(level1_value)]
inner_df[, prev:=shift(cumulative)]
inner_df[is.na(prev), position:=(level1_value/2)]
inner_df[!is.na(prev), position:=(level1_value/2)+prev]

colors <- c('#6a3d9a', '#1F78B4', '#33A02C', '#3F146D', '#56238D', '#855CB1', '#AD8CD0', '#08619A', '#3F8DC0', '#076302', '#1B8416', '#50B74B')
colorNames <- c(unique(as.character(df$level1)), unique(as.character(df$level2)))
names(colors) <- colorNames

ggplot(df, aes(y=value, x='')) +
    geom_bar(aes(fill=level2, x=.25), width=.25, stat='identity') + 
    geom_bar(aes(fill=level1, x=0), width=.5, stat='identity') + 
    geom_text(data=inner_df, aes(label=level1, x=.05, y=position)) + 
    coord_polar(theta='y') + 
    scale_fill_manual('', values=colors) +
    theme_minimal() + 
    guides(fill=guide_legend(ncol=1)) +
    labs(title='') + 
    scale_x_continuous(breaks=NULL) + 
    scale_y_continuous(breaks=df$cumulative, labels=df$level2, 5) + 
    theme(axis.title.x=element_blank(), axis.title.y=element_blank(), panel.border=element_blank(), panel.grid=element_blank()) 
```

[![在此处输入图像描述](../Images/4a40588a1abb573797e7725f708f534a.png)](https://i.stack.imgur.com/tzpo3.png)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-17T04:33:09.767

据我所知，只有几个库本身可以做到这一点：

*   [Javascript Infovis Toolkit](http://philogb.github.com/jit/) ( jit)（[示例](http://philogb.github.com/jit/static/v20/Jit/Examples/Sunburst/example2.html)）。
*   [D3.js](http://mbostock.github.com/d3/ex/sunburst.html)
*   OCaml 的[简单绘图工具](http://code.google.com/p/caml-spt/)(SPT)。

这些都不是在 Python 或 R 中，但是让一个 python/R 脚本写出一个可以由任何一个 javascript 库加载的简单 JSON 文件应该是可以实现的。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-05-07T09:07:51.570

由于 jbkunst 提到了 ggsunburst，所以我在这里发布了一个使用 sirex 再现 sunburst 的示例。

这并不完全相同，因为在 ggsunburst 中，节点的角度等于其子节点的角度之和。

```
# install ggsunburst package
if (!require("ggplot2")) install.packages("ggplot2")
if (!require("rPython")) install.packages("rPython")
install.packages("http://genome.crg.es/~didac/ggsunburst/ggsunburst_0.0.9.tar.gz", repos=NULL, type="source")
library(ggsunburst)

# dataframe
# each row corresponds to a node in the hierarchy
# parent and node are required, the rest are optional attributes
# the attributes correspond to the node, not its parent
df <- read.table(header = T, sep = ",", text = "
parent,node,size,color,dist
,/,,B,1
/,home,,D,1
home,Images, 40,E,1
home,Videos, 20,E,1
home,Documents, 5,E,1
/,usr,,D,1
usr,src,,A,1
src,linux-headers, 4,C,1.5
src,virtualbox, 1,C,1.5
usr,lib, 4,A,1
usr,share, 2,A,1
usr,bin, 1,A,1
usr,local, 1,A,1
usr,include, 1,A,1
")

write.table(df, 'df.csv', sep = ",", row.names = F)

# compute coordinates from dataframe
# "node_attributes" is used to pass the attributes other than "size" and "dist", 
# which are special attributes that alter the dimensions of the nodes
sb <- sunburst_data('df.csv', sep = ",", type = "node_parent", node_attributes = "color")

# plot
sunburst(sb, node_labels = T, node_labels.min = 10, rects.fill.aes = "color") +
  scale_fill_brewer(palette = "Set1", guide = F) 
```

[![在此处输入图像描述](../Images/8c311a8ea46d0b0d8bdb9a102610c15c.png)](https://i.stack.imgur.com/j6W2r.png)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-10-21T09:04:36.593

这是一个使用 R 和[plotly](https://github.com/ropensci/plotly)的示例（基于我[在此处](https://stackoverflow.com/questions/57395424/how-to-format-data-for-plotly-sunburst-diagram/58481176#58481176)的回答）：

```
library(datasets)
library(data.table)
library(plotly)

as.sunburstDF <- function(DF, valueCol = NULL){
  require(data.table)

  colNamesDF <- names(DF)

  if(is.data.table(DF)){
    DT <- copy(DF)
  } else {
    DT <- data.table(DF, stringsAsFactors = FALSE)
  }

  DT[, root := names(DF)[1]]
  colNamesDT <- names(DT)

  if(is.null(valueCol)){
    setcolorder(DT, c("root", colNamesDF))
  } else {
    setnames(DT, valueCol, "values", skip_absent=TRUE)
    setcolorder(DT, c("root", setdiff(colNamesDF, valueCol), "values"))
  }

  hierarchyCols <- setdiff(colNamesDT, "values")
  hierarchyList <- list()

  for(i in seq_along(hierarchyCols)){
    currentCols <- colNamesDT[1:i]
    if(is.null(valueCol)){
      currentDT <- unique(DT[, ..currentCols][, values := .N, by = currentCols], by = currentCols)
    } else {
      currentDT <- DT[, lapply(.SD, sum, na.rm = TRUE), by=currentCols, .SDcols = "values"]
    }
    setnames(currentDT, length(currentCols), "labels")
    hierarchyList[[i]] <- currentDT
  }

  hierarchyDT <- rbindlist(hierarchyList, use.names = TRUE, fill = TRUE)

  parentCols <- setdiff(names(hierarchyDT), c("labels", "values", valueCol))
  hierarchyDT[, parents := apply(.SD, 1, function(x){fifelse(all(is.na(x)), yes = NA_character_, no = paste(x[!is.na(x)], sep = ":", collapse = " - "))}), .SDcols = parentCols]
  hierarchyDT[, ids := apply(.SD, 1, function(x){paste(x[!is.na(x)], collapse = " - ")}), .SDcols = c("parents", "labels")]
  hierarchyDT[, c(parentCols) := NULL]
  return(hierarchyDT)
}

DF <- as.data.table(Titanic)
setcolorder(DF, c("Survived", "Class", "Sex", "Age", "N"))
sunburstDF <- as.sunburstDF(DF, valueCol = "N")

# Sunburst
plot_ly(data = sunburstDF, ids = ~ids, labels= ~labels, parents = ~parents, values= ~values, type='sunburst', branchvalues = 'total')

# Treemap
# plot_ly(data = sunburstDF, ids = ~ids, labels= ~labels, parents = ~parents, values= ~values, type='treemap', branchvalues = 'total') 
```

[![结果](../Images/4a0fd0ea82173878bf590587817aa1a5.png)](https://i.stack.imgur.com/3BXnh.gif)

可以在[此处](https://plotly.com/r/sunburst-charts/)找到一些附加信息。

# ruby-on-rails - 缓存的片段不会留在（Memcachier）缓存中

> ID：12926781
> 
> 赞同：1
> 
> 时间：2012-10-17T03:42:03.273
> 
> 标签：ruby-on-rails, memcached

在 Heroku、Dalli 和 Memcachier 上使用 Rails 3.1.1。

**生产.rb**

```
 config.cache_store = :dalli_store 
  config.action_controller.perform_caching = true 
```

**宝石文件**

```
 gem 'memcachier'
  gem 'dalli' 
```

**控制器#显示**

```
unless fragment_exist?("gift-show--" + @gift.slug)
 # Perform complicated database query at 4-5 sec
end 
```

**看法**

```
<% cache('gift-show--' + @gift.slug, :expires_in => 3456000) do # 40 days %>
  # Create an HTML
<% end %> 
```

**加载缓存页面时的日志输出**

```
2012-10-17T03:15:43+00:00 app[web.2]: Started GET "/present/baka-kaka-set" for 23.20.90.66 at 2012-10-17 03:15:43 +0000
2012-10-17T03:15:43+00:00 app[web.2]: Could not find fragment for gift-show--baka-kaka-set # my log comment
2012-10-17T03:15:44+00:00 heroku[router]: GET www.mydomain.com/present/baka-kaka-set dyno=web.2 queue=0 wait=0ms service=195ms status=200 bytes=17167
2012-10-17T03:15:43+00:00 app[web.2]: cache: [GET /present/baka-kaka-set] miss
2012-10-17T03:15:43+00:00 app[web.2]:   Processing by GiftsController#show as */*
2012-10-17T03:15:43+00:00 app[web.2]:   Parameters: {"id"=>"baka-kaka-set"}
2012-10-17T03:15:43+00:00 app[web.2]: Exist fragment? views/gift-show--baka-kaka-set (1.5ms)
2012-10-17T03:15:43+00:00 app[web.2]: Read fragment views/gift-show--baka-kaka-set (1.5ms)
2012-10-17T03:15:43+00:00 app[web.2]: Write fragment views/gift-show--baka-kaka-set (4.0ms) 
```

每个页面在创建后几乎都是静态的，因此有效期很长（40 天）。

如果我加载这样的页面，它似乎被写入缓存，我可以通过重新加载页面来验证这一点，并看到它绕过了控制器（如我所料）并非常快速地传递页面。

**我的问题**

问题是如果我几分钟后返回该页面，它已经从缓存中删除了！`fragment_exist?('gift-show--gift-baka-kaka-set')`返回 false （也是如此`Rails.cache.exist?('views/gift-show--gift-baka-kaka-set')`）

我可以在 Memcachier 分析中看到键的数量正在减少。即使我运行一个加载每个页面的脚本（以创建片段缓存），Memcachier 中的键数也不会以相同的速度增加。

我在 Memcachier 中的内存使用量约为 34%，所以我没有接近极限。

**我的问题**

我做错了什么吗？我应该怎么做？

可能是我正在写入两个不同的缓存或其他东西吗？

日志文件的最后一行让我有点困惑。似乎即使在读取片段之后，仍在写入新片段？这很奇怪吗？

**更新1**：我意识到我已经注释掉了这一行：

```
 # Set expire header of 30 days for static files
  config.static_cache_control = "public, max-age=2592000" 
```

前。这会导致问题吗？缓存的操作是否被视为“静态资产”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:23:44.887

原来是 Memcachier 中的一个错误。Memcachier 支持得出了这个结论，它与 Memcache 配合得很好。Memcachier 将尝试修复该错误。

# xna - XNA 内容 DLL

> ID：12926783
> 
> 赞同：0
> 
> 时间：2012-10-17T03:42:09.590
> 
> 标签：xna

内容 DLL 在哪里？当我尝试构建我的游戏（对我的游戏和内容使用设置向导的主要输出）时，它给了我这个错误：

'找不到文件'C:\Users\XXXX\Documents\XNA\PowerChampions\PowerChampions\PowerChampionsContent\obj\x86\Release\PowerChampionsContent.dll' '系统找不到指定的文件。'

有人知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:06:55.773

您需要检查以解决此错误的事项列表。让我们从**清理和重建**整个 XNA 解决方案开始，这个解决方案包含一个 XNA 项目和一个 XNA 内容项目（您的项目中都有这两个项目对吗？）。

# php - 实现 reCaptcha 时出现 Codeigniter require_once() 错误

> ID：12926786
> 
> 赞同：0
> 
> 时间：2012-10-17T03:42:28.433
> 
> 标签：php, codeigniter, recaptcha

实施 recaptcha 时出现以下错误。我不确定如何清除路径错误。

致命错误：require_once()：在 F:\xampp\htdocs\ 中打开所需的 'F:\xampp\htdocs\cyoa\application\controllers/recaptchalib.php' (include_path='.;\xampp\php\PEAR') 失败cyoa\application\controllers\cyoa.php 在第 132 行

控制器：

```
public function register_insert()
{
    require_once ('/recaptchalib.php');
    $privatekey = "xxx";
    $resp = recaptcha_check_answer ($privatekey,
                                    $_SERVER["REMOTE_ADDR"],
                                    $_POST["recaptcha_challenge_field"],
                                    $_POST["recaptcha_response_field"]);

    if (!$resp->is_valid) { 
```

看法：

```
<?php
require_once('recaptchalib.php');
$publickey = "xxx";
echo recaptcha_get_html($publickey); 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:38:36.503

您使用了错误的斜线。'\' 至 '/'。如果 captcha.php 位于您刚刚使用的同一目录中

```
 require_once('recaptchalib.php'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:45:06.233

控制器线是问题。如果它与控制器文件位于同一目录中，只需：`require_once ('recaptchalib.php');`

# javascript - JavaScript OOP动态getter setter - 我做错了什么

> ID：12926788
> 
> 赞同：0
> 
> 时间：2012-10-17T03:42:42.567
> 
> 标签：javascript, oop

我整天都在努力寻找一种方法来完成这项工作。这真的让我很烦。我已经阅读了大量关于**OOP**的文章，虽然我知道我的代码并不完美，但我似乎无法解决我在下面的代码中概述的最初问题。

除动态代码外，所有代码都有效`getter/setter`- 如果您阅读我在代码中的注释或运行代码，您可以很容易地看到原因。

我有一种感觉，我正在尝试做的事情无法完成。有人可以告诉我哪里出错了，或者如果不能按照我建议的方式完成。

```
 var ext = {
        db: {
            string: function(def){
                def=def || {};
                def.type = "string";
                return def;
            },
            autoId: function(def){
                def=def || {};
                def.defaultvalue = function(){
                    return Math.uuid(def.length, def.radix)
                    return def;
                }
            }
        },
    }
    /*
     * @ext.base:       base class I can build out with common methods
     *                  
     */
    ext.base = function(){
        /*
         * place holder for the raw object data - 
         * 
         * {a:"martin webb",b:"is struggling with this"
         * 
         */
        this._rawdata={}; // this can later be strigified for storage; 

    };
    ext.base.prototype ={
        init:function(o){
            // pass in rawdata;
            this.load(o);
        },
        put:function(){
            //code removed
        },
        load: function(rawdata){
            this._rawdata=rawdata || {};
        }

    }
    /*
     * @ext.kind:       builds a new object we can use to make entities from our kind
     *                  martin=new people();
     * 
     */
    ext.db.kind=function(o){
        this._kind=function(o){this.init(o);} //this will pass any passed in object in the base class at init;
        this._kind.prototype = ext.base.prototype;

        var self=this;

        var prop,i=97; //ascii for "a";
        for (prop in o){
            if (o.hasOwnProperty(prop)) {
                /*
                 * This is like a dynamic getter setter, we are adding it to the prototype;
                 * 
                 * if you run the code when the function below is called
                 * value="martin webb" I need the var i to equal 97, and prop to = "name"
                 * in the function. I need a way to pass in and conserver these dynamic values
                 */
                this._kind.prototype[prop] = 
                    function(value){
                        if (value) {
                            self.rawdata[i] = value; //ERROR i=99!
                        }
                        return self.rawdata[i] ; //get the correct data using the key 
                    };

                    i++;
                }

        }
        return this._kind; // return our new object so we can use it like var martin=new people();
    }
    debugger;
    //lets make a new kind;
    var people={};
    people.name=ext.db.string();
    people.info=ext.db.string();
    people = new ext.db.kind(people);
    //and now make some entities usinhg it;
    var martin=new people();

    //THE CODE WILL GO WRONG HERE, THE SETTER WILL NOT WORK (SEE ABOVE)

    martin.name("martin webb")
    martin.info("is struggling with this code")

    var mike = new people({
        a: "mike",
        b: "has the solution"
    });
    console.log(mike.name()) //--> mike 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:00:52.553

我找到了解决方案。答案是使用外壳并捕获循环索引 (i)。

这在文章中得到了很好的解释

[解释 javascript 范围和闭包](http://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/)

对我的代码的更改如下，非常有用！

```
 var prop, i = 97; //ascii for "a";
            //loop each property and make our own get/setter that works
            //off our underlying compressed rawdata;
            for (prop in o) {
                if (o.hasOwnProperty(prop)) {
                    /*
                     * this is the trick
                     * use an enclosure and pass our loop index in the bottom
                     * with a self calling function, this locks the value of i;
                     */
                    this._kind.prototype[prop] = function(k){
                        return function(value){
                            var key=String.fromCharCode(k);
                            //if we have a value passed in set it!
                            if (value){
                                this._rawdata[key]=value;
                            }
                            //always return our value;
                            return this._rawdata[key];
                        };
                      }(i); //here we call our function and lock index i;

                    i++;
                }//end loop; 
```

# clojure - 如何使用 clojure.java.io 从特定的 .jar 文件加载资源

> ID：12926790
> 
> 赞同：1
> 
> 时间：2012-10-17T03:43:19.040
> 
> 标签：clojure

在`clojure.java.io`，有一个`io/resource`函数，但我认为它只是加载当前正在运行的 jar 的资源。有没有办法指定`.jar`资源所在的文件？

例如：

*   我有一个 jar 文件：`/path/to/abc.jar`
*   `abc.jar`解压时包含`some/text/output.txt`在解压目录的根目录中
*   `output.txt`包含字符串`"The required text that I want."`

我需要可以执行这些操作的函数：

```
(list-jar "/path/to/abc.jar" "some/text/")
;; => "output.txt"

(read-from-jar "/path/to/abc.jar" "some/text/output.txt")
;; => "The required text that I want" 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:28:04.120

根据 Ankur 的评论，我设法拼凑出我需要的功能：

`java.util.jar.JarFile`对象完成工作。

您可以调用该方法`(.entries (Jarfile. a-path))`来提供文件列表，而不是返回树结构：

IE：

```
/目录-1
  /文件-1
  /文件-2
  /目录-2
    /文件-3
  /目录-3
    /文件-4

```

它返回文件名的枚举：

`/dir-1/file-1, /dir-1/file-2, /dir-1/dir-2/file-3, /dir-1/dir-3/file-4`

我需要的以下功能定义如下：

```
（导入 java.util.jar.JarFile）
(defn list-jar [jar-path inner-dir]
  (if-let [jar (JarFile.jar-path)]
    (let [inner-dir (if (and (not= "" inner-dir) (not= "/" (last inner-dir)))
                         (str 内部目录 "/")
                         内部目录）
          条目（枚举序列（.entries jar））
          名称（map (fn [x] (.getName x)) 条目）
          snames (过滤器 (fn [x] (= 0 (.indexOf x inner-dir))) 名称)
          fsnames (map #(subs % (count inner-dir)) snames)]
      fsnames)))

(defn read-from-jar [jar-path inner-path]
  (if-let [jar (JarFile.jar-path)]
    (if-let [entry (.getJarEntry jar inner-path)]
      (slurp (.getInputStream jar 条目)))))

```

### 用法：

```
（从 jar 中读取“/Users/Chris/.m2/repository/lein-newnew/lein-newnew/0.3.5/lein-newnew-0.3.5.jar”
               “莱宁根/new.clj”）

;=> "内置模板列表可以用`lein help new`来显示....."

(list-jar "/Users/Chris/.m2/repository/lein-newnew/lein-newnew/0.3.5/lein-newnew-0.3.5.jar" "leiningen")
;; => (new/app/core.clj new/app/project.clj .....)

```

# ruby-on-rails - 错误消息未出现在视图中

> ID：12926795
> 
> 赞同：1
> 
> 时间：2012-10-17T03:44:07.093
> 
> 标签：ruby-on-rails, activerecord, ruby-on-rails-3.2

我正在编写代码以确保在有关联的子记录时不会删除父记录。

代码如下

```
class Customer < ActiveRecord::Base
  attr_accessible :name, :number
  has_many :customer_bills

  before_destroy :check_for_bills

  private

  def check_for_bills
    if customer_bills.count > 0
     errors.add :base, "cannot delete customer while Bills exist"
      return false
    end
  end
end 
```

## 看法

```
<% if flash[:error] -%>
    <p class='error'><%=h flash[:error] %></p>
  <% end -%> 
```

## 控制器

```
def destroy
..
flash[:error] = @customer.errors
..
end 
```

但是尽管代码工作正常，但我没有收到错误消息？似乎是什么问题？任何指导都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:50:35.873

我认为在 Rails 3.2 中我们必须使用`notice`而不是`flash`.

## 看法

```
<% if notice %>
<p id="notice"><%= notice %></p>
<% end %> 
```

只需尝试上面的代码和适当的样式

## CSS

```
#notice {
color: #000 !important;
border: 2px solid red;
padding: 1em;
margin-bottom: 2em;
background-color: #f0f0f0;
font: bold smaller sans-serif;
} 
```

您可以像以前一样添加错误

## 添加错误

```
def ensure_not_referenced_by_any_line_item
  if line_items.empty?
    return true
  else
    errors.add(:base, 'Line Items present')
    return false
  end
end 
```

我正在学习rails，不确定上面是否是完美的解决方案....

# asp.net - vb.net 中的折扣和利率程序

> ID：12926796
> 
> 赞同：0
> 
> 时间：2012-10-17T03:44:07.513
> 
> 标签：asp.net, vb.net

我试图弄清楚如何完成这个程序并让计算结果显示在文本框中。这是我到目前为止所拥有的，基本上代码将采用购买价格和赎回率并计算折扣和利率。不知道我做错了什么。

```
Option Strict On

Public Class _Default
    Inherits System.Web.UI.Page

    Dim Purchase As Double
    Dim Redemption As Double
    Dim DiscountRate As Double
    Dim InterestRate As Double

    Protected Sub btnCalculate_Click(sender As Object, e As EventArgs) _
                                            Handles btnCalculate.Click

        Double.TryParse(txtPurchase.Text, Purchase)
        Double.TryParse(txtRedemption.Text, Redemption)
        Double.TryParse(txtDiscount.Text, DiscountRate)
        Double.TryParse(txtInterest.Text, InterestRate)

        If (CDbl(txtPurchase.Text) <= 0) Then
            MsgBox("Please enter an amount greater than 0")

        End If

        If (CDbl(txtRedemption.Text) <= 0) Then
            MsgBox("Please enter an amount greater than 0")
        End If

        DiscountRate = Purchase - Redemption / Purchase
        InterestRate = Purchase - Redemption / Redemption

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:53:28.677

看起来您遇到了[运算符优先级](http://msdn.microsoft.com/en-us/library/fw84t893%28v=VS.80%29.aspx)问题，您需要一些括号。在第一种情况下，您将您的兑换除以购买，然后从您的购买中减去。在第二个中，您将赎回除以赎回，然后从您的购买中减去结果 1。尝试这个。您还需要将结果分配给您正在显示的控件。

```
DiscountRate = (Purchase - Redemption) / Purchase
InterestRate = (Purchase - Redemption) / Redemption
txtDiscount.Text = DiscountRate.ToString
txtInterest.Text = InterestRate.ToString 
```

或更简单地说

```
txtDiscount.Text = ((Purchase - Redemption) / Purchase).ToString
txtInterest.Text = ((Purchase - Redemption) / Redemption).ToString 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:51:12.950

当您解析它们时，它们的变量不会自动绑定到控件。看起来你只需要在计算后添加这个：

```
txtDiscount.Text = DiscountRate
txtInterest.Text = InterestRate 
```

# linux - 后台作业更改为没有 nohup/disown 的守护进程？

> ID：12926799
> 
> 赞同：2
> 
> 时间：2012-10-17T03:44:28.823
> 
> 标签：linux, bash, daemon, nohup

一个脚本while.sh对我来说很奇怪，它的内容是：

```
while [ 1 ];do
sleep 1
echo `date`
done 
```

run as $while.sh >& while.log & (没有nohup or disown or setsid or double fork()) 退出再登录可以看到这个进程还在，ppid是1，tty是？

我的系统是rhel6（rhel5也是一样，bash

在 centos5.x 中它必须使用 nohup 或 disown 或在代码中执行 double fork()

rhel6 发生了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:52:13.420

是否设置了`huponexit`shell 选项？

```
$ shopt
...
huponexit      off 
```

如果 Bash 自己收到 SIGHUP 信号，它将向其作业发送一个 SIGHUP 信号，但它不会在正常退出时向它们发送信号，除非您启用此选项。

值得一提的是，这在 RHEL6 和 RHEL5 上都被禁用了，至少在我刚刚测试的系统上是这样。我试过这个命令：

```
$ sleep 1000 & 
```

当我注销并重新登录时它没有被杀死，除非我故意启用`shopt -s huponexit`.

# .net - 将 $(BuildId) 设置为变量

> ID：12926801
> 
> 赞同：0
> 
> 时间：2012-10-17T03:44:52.677
> 
> 标签：.net, tfs

我创建了一个构建定义变量，它应该包含我的 AssemblyInfo 版本。我想将 $(BuildId) 设置为最后一个版本。我该怎么做？我试图将默认值设置为`"1.0.0.$(BuildId)"`和，`String.Format("1.0.0.{0}", $(BuildId))`但两种方式都失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:50:05.060

您必须创建自定义活动来执行此操作，签出、编辑版本号然后签入。您可以按照[自定义 Team Build 2010 – 第 5 部分：增加 AssemblyVersion](http://www.ewaldhofman.nl/post/2010/05/13/Customize-Team-Build-2010-e28093-Part-5-Increase-AssemblyVersion.aspx)来执行此操作。无论如何，我建议您阅读并遵循该列表中的所有 16 个部分。

# animation - 重复 CCAction 一定次数？

> ID：12926802
> 
> 赞同：0
> 
> 时间：2012-10-17T03:45:02.613
> 
> 标签：animation, cocos2d-iphone, repeat, ccaction

在 Cocos2D 2.x 中，我正在做 runAction 来在我的游戏中做一些动画。它工作得很好，但我希望动画重复一定次数。

所以几乎我的伪代码是这样的：

```
CCSequence... action1, action2
[sprite runAction:theSequence]; 
```

所以我只想重复这个动作（让我们说3次），我该怎么做？我没有看到任何 API 可以做到这一点，但也许我只是没有看到任何东西。如果有人知道如何做到这一点并且可以分享很棒的信息！

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T04:52:08.243

您可以使用*CCRepeat 多次*重复操作：

```
id repeatAction = [CCRepeat actionWithAction:theSequence times:3];
[sprite runAction:repeatAction]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-08T11:04:38.657

## $$ 你可以使用 CCRepeatForever 来重复动作：$$

id scaleAction = [CCEaseInOut actionWithAction:[CCScaleTo actionWithDuration:3.0f scaleX:1.0 scaleY:1.0] rate:2.0];

```
id scaleUpAction =  [CCEaseInOut actionWithAction:[CCScaleTo actionWithDuration:1.0f scaleX:4.8 scaleY:4.8] rate:2.0];

id scaleUpAction1 =  [CCEaseInOut actionWithAction:[CCScaleTo actionWithDuration:12 scaleX:4.8 scaleY:4.8] rate:2.0];

CCSequence *scaleSeq = [CCSequence actions:scaleAction,scaleUpAction,scaleUpAction1, nil];

[scaleleft runAction:[CCRepeatForever actionWithAction:scaleSeq]]; 
```

# java - 如何在 android 中发布对 SOAP 服务的请求？

> ID：12926805
> 
> 赞同：2
> 
> 时间：2012-10-17T03:45:10.073
> 
> 标签：java, android, soap

> **可能重复：**
> [Android，通过 HTTP POST (SOAP) 发送 XML](https://stackoverflow.com/questions/2559948/android-sending-xml-via-http-post-soap)

如何在 android 中发布对 SOAP 服务的请求？

请给我一些例子

谢谢你给我分享知识

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:42:32.913

使用[KSoap 库](http://ksoap2.sourceforge.net/)，这是我项目中的代码片段：

```
SoapObject soapObject = new SoapObject(NAMESPACE_NIST_IMPORT,
                METHOD_NAME_NIST_IMPORT);

        ImportNistFileReq nistReq = new ImportNistFileReq(nistFile);

        PropertyInfo pi = new PropertyInfo();
        pi.setName("req");
        pi.setValue(nistReq);
        pi.setType(nistReq.getClass());
        soapObject.addProperty(pi);

        SoapSerializationEnvelope soapSerializationEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        new MarshalBase64().register(soapSerializationEnvelope);

        soapSerializationEnvelope.setOutputSoapObject(soapObject);

        soapSerializationEnvelope.addMapping(NAMESPACE_NIST_IMPORT, "ImportNistFileReq", new ImportNistFileReq().getClass());

        soapSerializationEnvelope.dotNet = true;
        Object objectResult = null;

        try {
            HttpTransportSE httpTransportSE = new HttpTransportSE(
                    URL_NIST_IMPORT);

            httpTransportSE.debug = true;
            httpTransportSE.call(SOAP_ACTION_NIST_IMPORT, soapSerializationEnvelope);

            String host = httpTransportSE.getPath();
            Log.i("HOST: ", host);

            objectResult = (Object) soapSerializationEnvelope.getResponse();

        } catch (IOException e) {
            Log.e("IO: ", e.getMessage());
        } catch (XmlPullParserException e) {
            Log.e("XML: ", e.getMessage());
        } 
```

这段代码发送一个[NIST 文件](http://fingerprint.nist.gov/NFIS/)，表示为 Web 服务的`byte array`编码`Byte64`。像这样的请求应该在一个单独的线程中调用，比如[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html) ..

常数：

*   NAMEPSPACE_NIST_IMPORT
*   方法名_NIST_IMPORT
*   URL_NIST_IMPORT
*   SOAP_ACTION_NIST_IMPORT

指的是我的.NET服务提供的[wsdl文件。](http://www.w3.org/TR/wsdl)[这是一个](http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap/)很棒的教程。如果有什么不清楚的，就问吧。祝你好运。

# min - 基本上我正在尝试获取表示电影标题和 min(cost) 的一行，这将是 cost 列中的最小值

> ID：12926807
> 
> 赞同：0
> 
> 时间：2012-10-17T03:45:34.127
> 
> 标签：min, oracle9i

```
What are the names for the least expensive movies in the collection?  Show both the title of the film and the cost. 
```

表名是电影，我试图从中获取 min() 的列名是“COST”

我已经尝试了我所知道的一切来解决它，从电影中选择标题，分钟（成本）。

基本上，我试图获得表示电影标题的一行和 min(cost)，这将是 cost 列中的最小值，任何帮助都会对我有很大帮助。

我正在使用 sql i9

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T03:49:03.657

尝试这个：

```
SELECT TITLE, MIN(COST) FROM movies GROUP BY TITLE LIMIT 1; 
```

# pymongo - 在 pymongo 中结合 or 和 gte 和 lt 的高级查询

> ID：12926808
> 
> 赞同：0
> 
> 时间：2012-10-17T03:45:40.667
> 
> 标签：pymongo

它如何在 pymongo 中实现这一点？

```
number == 100 or (number >=10000 and number < 10100)? 
```

目前，我正在做

```
*condition['number'] = {'$gte':input_number * 100, '$lt':(input_number + 1) * 100}* 
```

然后查询条件。

但我不知道如何添加“数字 == 100”。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:18:06.120

答案是：

```
condition['$where'] = '(this.number + "").substr(0, 3) == "%d"' % input_number 
```

我从中学到的只是，您可以查询 where 以及 where 的内容是 javascript 函数或其他内容。
但请注意，这种愚蠢的方法非常缓慢。

# ruby-on-rails - 可以在 Facebook 服务器登录请求中使用 Rails CSRF 令牌吗？

> ID：12926814
> 
> 赞同：1
> 
> 时间：2012-10-17T03:45:53.987
> 
> 标签：ruby-on-rails, facebook, security, csrf

在实现 Facebook 服务器端登录时，[文档](http://developers.facebook.com/docs/howtos/login/server-side-login/#step3)说我们的服务器应该提供一个**状态**字符串，Facebook 将在回调期间将其发回给我们。然后我们可以检查字符串是否匹配，以防止 CSRF 攻击。

由于 Rails 已经有一个在一个会话期间未更改的 CSRF 令牌，在 Facebook 或任何第 3 方授权过程中重复使用它是否存在安全风险？

我认为这可能没问题，因为第 3 方没有用户的 cookie，因此令牌将无用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T08:17:23.660

我建议不要与第 3 方提供者共享 CSRF 令牌，因为由于第 3 方提供者的实施，您无法知道外部攻击者是否可以看到 CSRF 令牌。请注意，即使您能够验证 CSRF 令牌现在不可见，它也可能在 3rd 方提供者更改其实现后在未来可见。

（如果由于第三方实现，外部攻击者可以看到 CSRF 令牌，则攻击者可以获得访问者 cookie 的匹配 CSRF 令牌，并对您的站点发起 CSRF 攻击。当然，这样的攻击会比没有 CRSF 更难完全保护，但您问这是否存在安全风险。）

如果您不想为服务器存储额外的状态，您可以通过使用静态 3rd 方可配置机密并使用真正的 Rails CSRF 令牌和该机密执行 HMAC-SHA1 来创建特定于 3rd 方的 CSRF 值。使用生成的哈希作为第 3 方 CRSF 值。如果您支持许多第三方提供商，则稍微偏执的版本可以为每个 3rd 方提供者使用加盐和单独的秘密。这个想法是即使对第 3 方也隐藏真正的 CSRF 令牌。

我不知道在使用 Rails 的 3rd 方登录过程中使用自定义 CSRF 验证会有多难...

# html - no-cache 不适用于 require.js

> ID：12926816
> 
> 赞同：1
> 
> 时间：2012-10-17T03:46:23.733
> 
> 标签：html, css, backbone.js, requirejs, browser-cache

我的下面有`<head>`

.css 不会被缓存，每次刷新都会加载新的。但由于我使用**Backbone.js**和**Require.js**，模块仍然被缓存。我还没有使用优化器。我将文件上传到 Apache 服务器，然后直接运行 html/js。

我怎样才能在这里消除缓存？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T11:27:31.580

只需在导入 require.js 之前添加它。

```
 var require = {
            waitSeconds: 1,
            urlArgs : "bust="+new Date().getTime()
        }; 
```

urlArgs 在它获取的所有内容之后放置一个时间戳并打破 require.js 缓存。

[如此处](http://requirejs.org/docs/api.html#config-urlArgs)所见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:31:19.503

我发现如果 Firebug 正在运行并且在 Firebug 中的 Net 选项卡下的缓存已关闭，您可以关闭每个网站的缓存。

# gnuplot - Gnuplot - 使用直方图样式时如何将 y 值放在条形上方？

> ID：12926827
> 
> 赞同：2
> 
> 时间：2012-10-17T03:48:31.330
> 
> 标签：gnuplot, histogram

我目前正在使用脚本来生成直方图，例如，通过执行以下操作：

```
set style histogram cluster gap 4
plot for [COL=2:10] 'example.dat' u COL:xticlabels(1) title columnheader(COL) 
```

现在我希望在直方图中的条形上方添加 y 值（数字），但添加`w labels`会给出“没有足够的列用于这种样式”错误。

```
plot for [COL=2:10] 'example.dat' u COL:xticlabels(1) title columnheader(COL), \
    for [COL=2:10] 'example.dat' u COL title '' w labels 
```

是否可以使用直方图样式添加 y 标签？

注意：我知道有一些绘图示例`with boxes`。如果可能的话，我希望使用直方图样式来完成这项工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T13:12:18.587

这是我想出的测试数据文件：

例子.dat

```
 hi world foo bar baz qux
 1   2     3   4   5   6    
 4   5     7   3   6   5 
```

这是我用来绘制它的脚本：

```
set yrange [0:*]
GAPSIZE=4
set style histogram cluster gap 4
STARTCOL=2                 #Start plotting data in this column (2 for your example)
ENDCOL=6                   #Last column of data to plot (10 for your example)
NCOL=ENDCOL-STARTCOL+1     #Number of columns we're plotting 
BOXWIDTH=1./(GAPSIZE+NCOL) #Width of each box.
plot for [COL=STARTCOL:ENDCOL] 'example.dat' u COL:xtic(1) w histogram title columnheader(COL), \
    for [COL=STARTCOL:ENDCOL] 'example.dat' u (column(0)-1+BOXWIDTH*(COL-STARTCOL+GAPSIZE/2+1)-0.5):COL:COL notitle w labels 
```

每个直方图簇在 x 轴上的总宽度为 1 个单位。我们知道我们需要多少宽度（盒子的数量+4，因为那是间隙大小）。我们可以计算每个框的宽度（`1/(N+4)`）。然后我们照常绘制直方图。（请注意，我添加`with histogram`了 plot 命令）。

根据内置帮助，标签需要 3 列数据 ( `x y label`)。在这种情况下，y位置和标签相同，可以直接从列中读取`COL`。第一个块的 x 位置以 0 为中心（总宽度为 1）。因此，第一个块将位于`x=-0.5+2*BOXWIDTH`。这里的 2 是因为间隙是 4 个框宽——左边两个，右边两个。下一个块将位于`-0.5+3*BOXWIDTH`等处。通常，（作为 的函数`COL`）我们可以将其写为

```
-0.5+BOXSIZE*(COL-STARTCOL+1+GAPSIZE/2) 
```

对于我们读取的每个附加块，我们需要将其向右移动 1 个单位。由于每个块对应于数据文件中的 1 行，因此我们可以为此使用伪列`0`（即`column(0)`或`$0`），因为它会随着 gnuplot 读取的每个“记录/行”而递增。第 0 条记录保存标题，第 1 条记录保存第一个块。由于我们想要一个为第一条记录返回 0 的函数，我们使用`column(0)-1`. 综上所述，我们发现 x 位置为：

```
(column(0)-1-0.5+BOXSIZE*(COL-STARTCOL+1+GAPSIZE/2)) 
```

这相当于我上面的内容。

# typescript - TypeScript compiling as a single JS file

> ID：12926830
> 
> 赞同：55
> 
> 时间：2012-10-17T03:48:58.433
> 
> 标签：typescript

I have a test project on TypeScript, code can found [here](https://stackoverflow.com/questions/12913238/cannot-load-class-from-file-in-typescript).

When I'm creating new project with VS2012, an `app.ts` file is created. When I'm changing it's content as shown by the link and adding new module called `GameModule`, I'm getting compile error. When I'm deleting `app.ts` and creating `Main.ts` instead, everything compiling fine, but there is a problem - only `Main.ts` is compiled to `Main.js`, and `GameModule.ts` stays uncompiled.

How can I make compiler to merge all the code in one JS?

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2014-01-06T13:42:38.540

## Using the GUI

If you have Visual Studio 2013 and the TypeScript extension installed, right-click your project in the solution explorer and chose `Properties`. Click on the `TypeScript Build` tab. Select `Combine JavaScript output into file:` and type in a name to use for your combined file in the input field right next to the option. Remember you can use variables in this field. For example: "$(ProjectDir)dist\js\myCombinedFile.js".

## Manually

If you cannot find this GUI option anywhere, then modify your project configuration file manually. Go to your project folder; right-click the project in the solution explorer and click on `Open folder in File Explorer`. In the folder that pop up, you'll see a couple of files. Edit file `myProject.csproj` with any text editor of your choice. Find two lines that reads like so:

```
<PropertyGroup Condition="'$(Configuration)' == 'Debug'"> 
```

and

```
<PropertyGroup Condition="'$(Configuration)' == 'Release'"> 
```

Within the two tree of child nodes, add a new child to each parent:

```
<TypeScriptOutFile>$(ProjectDir)dist\js\myCombinedFile.js</TypeScriptOutFile> 
```

When you get back to Visual Studio, he *should* ask you whether or not to reload the project. Of course this is something that has to be done for the changes to take effect!

The manual procedure I just described is exactly what the GUI procedure would do for you. My thoughts around the manual procedure originates from [this source](http://www.stevefenton.co.uk/Content/Blog/Date/201301/Blog/Getting-The-Right-Set-Up-For-TypeScript/).

## Finally

Build your project as you would do normally. If it doesn't work, try reloading your project.

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-10-18T07:19:13.707

You have to use command line arguments of compiler

`--outFile FILE` Concatenate and emit output to single file

## example

```
 tsc --outFile modules.js main.ts app.ts 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-10-18T05:54:16.313

You do not need any third-party tool or library for this.
You can use Microsoft's [System.Web.Optimization](http://www.nuget.org/packages/Microsoft.Web.Optimization):

```
BundleTable.Bundles.Add(new ScriptBundle("~/scripts/bundle.js").IncludeDirectory("~/scripts/", "*.js", true)); 
```

All the *.js files (results of compiling your *.ts files) will be combined and accessible at runtime at:
http:// .../scripts/bundle.js

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-04-06T13:07:52.970

You can use `tsc --project ./` to build an concatenated output file if you use `tsconfig.json` configuration file in the current directory.

The `tsconfig.json` file may look like this :

```
{
  "compileOnSave": true,
  "compilerOptions": {
    "module":"system",
    "target": "es5",
    "sourceMap": true,
    "outFile": "dist/app-build.js"
  },
  "files":[
    "./src/index.ts",
    "./typings/browser.d.ts"
  ]
} 
```

Classic files layout would be :

```
project/
   - src/ 
        - index.ts
        ... all my ts files
   - dist /
       - vendor.js        # angular, jquery...
       - app-build.js     # our build project
       - system.js        # Module loader we used
       - index.html       # call all js
   - typings/
       - browser.d.ts
       - main.d.ts     # for node.js server side, not included
   - package.json
   - tsconfig.json 
```

The bad news is that we need a call to [SystemJS](https://xkcd.com/927/) (works the same with RequireJS, but as of Tsc 1.8, CommonJS is not accepted for concatenated build)

So let's learn quickly about SystemJS : Add SystemJS, and call a module in `index.html` :

```
<html lang="en" ng-app="skeleton">
<head>
    <script src="system.js" type="text/javascript"></script>
    <script src="angular.min.js"></script>
    <script src="app-build.js" type="text/javascript"></script>
</head>
<body>

   <skeletonDirective></skeletonDirective>

<script type="text/javascript">

    System.import('index')

</script></body></html> 
```

A big advantage is that you can also let your ide bundle it for you. The IDE need anyway to compile to understand types, so we may avoid to compile it twice. You don't need Gulp, browserify or anything for the moment. SystemJS might do most of the stuff like loading a html template.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-17T09:27:39.093

If I got you right, there is another way to produce a single JS file:

1.  Create a new HTML file and include all your .ts files using:

    `<script type="text/typescript" src="GameModule.ts"></script>`

    `<script type="text/typescript" src="app.ts"></script>`

2.  Add [TypeScript Compile](https://github.com/niutech/typescript-compile) .js files:

    `<script type="text/javascript" src="http://niutech.github.com/typescript-compile/js/typescript.min.js"></script>`

    `<script type="text/javascript" src="http://niutech.github.com/typescript-compile/js/typescript.compile.min.js"></script>`

3.  Open this HTML file in a browser. The automatically compiled JS code will be injected into a single `<script type="text/javascript"></script>` tag at the end of the body. You can preview and copy it using Web Inspector or Firebug.

Here is a working [demo](http://jsfiddle.net/yZnZm/).

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-17T04:52:56.727

Add a postbuild that executes Browserify.js

# python - 使用 Python 的 AVI 视频和音频播放器和管道不起作用

> ID：12926832
> 
> 赞同：2
> 
> 时间：2012-10-17T03:49:18.170
> 
> 标签：python, audio, video, pipeline

我一直在寻找使用 avidemux、管道和 python 来显示单个 avi 视频文件中的视频和音频的方法。我可以使用 gst-launch 来做到这一点，但我想在代码中实现它。现在它说所有元素都已创建，但它不会从 avidemux 或解码器访问任何动态分配的焊盘。

python的完整代码如下。

谢谢，

```
 #!/usr/bin/env python
    import gobject, pygst
    pygst.require("0.10")
    import gst

    def allocate_muxer_pad(dbin, pad, islast):
        print "allocate prog entered"   

        if pad.get_caps()[0].to_string().startswith("a"):
            pad.link(audioqueue.get_pad("sink"))
            print 'audio Mux connected' 
        elif pad.get_caps()[0].to_string().startswith("v"):  
            pad.link(videoqueue.get_pad("sink"))    
            print 'Video Mux connected'

    def new_Adecode_pad(dbin, pad, islast):
        pad.link(audioconvert.get_pad("sink"))  
        print 'audio decode connected'

    def new_Vdecode_pad(dbin, pad, islast):  
        pad.link(videoconvert.get_pad("sink"))
        print 'video decode connected'

    pipeline = gst.Pipeline("PIPELINE")
    Bin = gst.Bin("pipeline")

    src = gst.element_factory_make("filesrc", "source")
    src.set_property("location", "testav.avi")

    demux = gst.element_factory_make("avidemux","avi-demuxer")
    audioqueue = gst.element_factory_make('queue', 'Audioqueue')
    videoqueue = gst.element_factory_make('queue','videoqueue')
    audiodecoder = gst.element_factory_make("decodebin2","Adecoder")
    videodecoder = gst.element_factory_make("decodebin2","Vdecoder")
    audioconverter = gst.element_factory_make("audioconvert","Audio_Converter") 
    videoconverter = gst.element_factory_make("ffmpegcolorspace","Video_Converter")
    audioSink = gst.element_factory_make("autoaudiosink","Sink_Audio")
    videoSink = gst.element_factory_make("ximagesink","Sink_Video")

    Bin.add(src)
    Bin.add_many(demux,audioqueue,videoqueue,audiodecoder,audioconverter,videodecoder,videoconverter,audioSink,videoSink)

    src.link(demux)
    gst.element_link_many(audioqueue,audiodecoder)
    gst.element_link_many(audioconverter,audioSink)
    gst.element_link_many(videoqueue,videodecoder)
    gst.element_link_many(videoconverter,videoSink)

    if (not(src) or not(demux) or not(audioqueue) or not(videoqueue) or not(videodecoder) or not(audiodecoder) or not(audioconverter) or not(videoconverter) or not(audioSink) or not(videoSink) ):
        print "Elements not Created"
    else:
        print "Elements Created"

    demux.connect("pad-added", allocate_muxer_pad)
    demux.connect("pad-added", allocate_muxer_pad)

    audiodecoder.connect("new-decoded-pad", new_Adecode_pad)
    videodecoder.connect("new-decoded-pad", new_Vdecode_pad)

    pipeline.set_state(gst.STATE_PLAYING)
    print "Pipeline Playing" 
    # enter into a mainloop
    loop = gobject.MainLoop()

    loop.run() 
```

# c# - 从对象列表中获取名称列表

> ID：12926834
> 
> 赞同：0
> 
> 时间：2012-10-17T03:49:40.380
> 
> 标签：c#

我有一个`Person`包含 String 字段的对象`Name`。我需要按字母顺序从人员列表中列出姓名。有没有更聪明的方法可以在不运行循环的情况下做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T03:51:03.293

您可以使用 select 和 orderby 扩展，例如：

```
 var result = list.Select(i => i.Name).OrderBy(j => j); 
```

# sql - 使用 row_number() 查询花费太多时间

> ID：12926836
> 
> 赞同：1
> 
> 时间：2012-10-17T03:49:57.087
> 
> 标签：sql, sql-server, sql-server-2008

我的数据库中有大约 90k 条记录，我运行以下查询：

这需要太多时间（大约 4 秒）：

```
SELECT * FROM (SELECT 
    ROW_NUMBER() OVER (Order By DocumentID desc) peta_rn, peta_query.* From 
    (
            Select   d.DocumentID, d.IsReEfiled, d.IGroupID, d.ITypeID, d.RecordingDateTime, dbo.GetLatestStatusDateTime(d.DocumentID) as LatestStatusDatetime, 
                    dbo.FnCanChangeDocumentStatus(d.DocumentStatusID,d.DocumentID) as CanChangeStatus, d.IDate, d.InstrumentID, d.DocumentStatusID,ig.Abbreviation as IGroupAbbreviation, 
                    u.Username, j.JDAbbreviation, inf.DocumentName,
                    it.Abbreviation as ITypeAbbreviation, d.DocumentDate, ds.Abbreviation as DocumentStatusAbbreviation,
                    dbo.GetFlatDocumentName(d.DocumentID) as FlatDocumentName 
                    From Documents d Inner Join IGroupes ig On d.IGroupID = ig.IGroupID 
                            Left Join ITypes it On d.ITypeID = it.ITypeID 
                            Left Join Users u On u.UserID = d.UserID 
                            Left Join DocumentStatuses ds On d.DocumentStatusID = ds.DocumentStatusID 
                            Left Join InstrumentFiles inf On d.DocumentID = inf.DocumentID 
                            Inner Join Jurisdictions j on j.JurisdictionID = d.JurisdictionID                           
    ) as peta_query) peta_paged WHERE peta_rn>12000 AND peta_rn<=12100 
```

但是，第二个查询在 1 秒内执行：

```
SELECT * FROM (SELECT 
    peta_query.* From 
    (
            Select  ROW_NUMBER() OVER (Order By d.DocumentID desc) peta_rn, d.DocumentID, d.IsReEfiled, d.IGroupID, d.ITypeID, d.RecordingDateTime, dbo.GetLatestStatusDateTime(d.DocumentID) as LatestStatusDatetime, 
                    dbo.FnCanChangeDocumentStatus(d.DocumentStatusID,d.DocumentID) as CanChangeStatus, d.IDate, d.InstrumentID, d.DocumentStatusID,ig.Abbreviation as IGroupAbbreviation, 
                    u.Username, j.JDAbbreviation, inf.DocumentName,
                    it.Abbreviation as ITypeAbbreviation, d.DocumentDate, ds.Abbreviation as DocumentStatusAbbreviation,
                    dbo.GetFlatDocumentName(d.DocumentID) as FlatDocumentName 
                    From Documents d Inner Join IGroupes ig On d.IGroupID = ig.IGroupID 
                            Left Join ITypes it On d.ITypeID = it.ITypeID 
                            Left Join Users u On u.UserID = d.UserID 
                            Left Join DocumentStatuses ds On d.DocumentStatusID = ds.DocumentStatusID 
                            Left Join InstrumentFiles inf On d.DocumentID = inf.DocumentID 
                            Inner Join Jurisdictions j on j.JurisdictionID = d.JurisdictionID                           
    ) as peta_query) peta_paged WHERE peta_rn>12000 AND peta_rn<=12100 
```

我的问题是：

**1）**您能否建议为什么我的第一个查询需要这么长时间才能执行？我想优化我的第一个查询，因为它是由一个自动化程序生成的（我确实有它的源，但我不能在 Select 中移动 RowNumber）。

**2)**执行时间也取决于 peta_rn。如果我给 peta_rn > 50000 和 peta_rn <= 50100，则执行所需的时间非常长。您能否还建议为什么执行时间取决于我尝试获取的行，因为最终我一次只尝试获取 100 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:09:54.470

只是为了好玩——你能试试这个 CTE 看看它的表现如何？我不完全明白为什么你在那里有三个嵌套的子查询......

```
;WITH PetaQuery AS
(
    SELECT 
        ROW_NUMBER() OVER (ORDER BY d.DocumentID DESC) peta_rn, 
        d.DocumentID, d.IsReEfiled, d.IGroupID, d.ITypeID, d.RecordingDateTime, 
        dbo.GetLatestStatusDateTime(d.DocumentID) as LatestStatusDatetime, 
        dbo.FnCanChangeDocumentStatus(d.DocumentStatusID,d.DocumentID) as CanChangeStatus, 
        d.IDate, d.InstrumentID, d.DocumentStatusID,ig.Abbreviation as IGroupAbbreviation, 
        u.Username, j.JDAbbreviation, inf.DocumentName,
        it.Abbreviation as ITypeAbbreviation, d.DocumentDate, ds.Abbreviation as DocumentStatusAbbreviation,
        dbo.GetFlatDocumentName(d.DocumentID) as FlatDocumentName 
    FROM 
        Documents d 
    INNER JOIN 
        IGroupes ig On d.IGroupID = ig.IGroupID 
    LEFT OUTER JOIN 
        ITypes it On d.ITypeID = it.ITypeID 
    LEFT OUTER JOIN 
        Users u On u.UserID = d.UserID 
    LEFT OUTER JOIN 
        DocumentStatuses ds On d.DocumentStatusID = ds.DocumentStatusID 
    LEFT OUTER JOIN 
        InstrumentFiles inf On d.DocumentID = inf.DocumentID 
    INNER JOIN 
        Jurisdictions j on j.JurisdictionID = d.JurisdictionID                           
) 
SELECT * FROM PetaQuery
WHERE peta_rn > 12000 AND peta_rn <= 12100 
```

这是否与您的原始查询具有相同的响应时间？

如果是这样，请检查：

*   你的所有外键（`IGroupID`, `ITypeID`, `UserID`, `DocumentStatusID`, `DocumentID`, `JurisdictionID`）都有索引吗？这对于快速 JOIN 性能至关重要

# c++ - 关于 GDB 和 CRC 不匹配

> ID：12926839
> 
> 赞同：5
> 
> 时间：2012-10-17T03:50:19.833
> 
> 标签：c++, gcc, gdb

我想用来`gdb`调试代码。当我写命令时：

```
gdb gdns_processor 
```

它将从以下位置输出警告消息`gdb`：

```
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from /usr/local/gdnscenter/bin/gdns_processor...
warning: the debug information found in "/usr/lib/debug//usr/local/gdnscenter/bin/gdns_processor.debug" does not match "/usr/local/gdnscenter/bin/gdns_processor" (CRC mismatch).
warning: the debug information found in "/usr/lib/debug/usr/local/gdnscenter/bin/gdns_processor.debug" does not match "/usr/local/gdnscenter/bin/gdns_processor" (CRC mismatch).

(no debugging symbols found)...done. 
```

我不明白 CRC 不匹配。为什么`gdb`找不到符号？

PS：我的`gcc`选项设置了`-g`标志。

```
CPPFLAGS="-D_LIBC_REENTRANT $CPPFLAGS -g" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T05:41:20.420

> 我不明白 CRC 不匹配

要理解该消息，您需要阅读有关 GDB 使用“单独的调试文件”的信息，例如[此处](http://sourceware.org/gdb/onlinedocs/gdb/Separate-Debug-Files.html)。

> 我的 Gcc 选项设置了 -g。`CPPFLAGS="-D_LIBC_REENTRANT $CPPFLAGS -g"`

很可能你没有告诉我们整个故事。您的构建过程可能会生成`gdns_processor`二进制文件，以及它的`gdns_processor.debug`“单独的调试文件”。

然后，您将复制`gdns_processor`到`/usr/local/gdnsceter/bin/`，但（显然）忽略复制`gdns_processor.debug`到`/usr/lib/debug/usr/local/gdnscenter/bin/`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T05:04:10.947

考虑重新编译程序，您调试的程序可能与源代码不匹配。PS：如果你想要更详细的调试信息，你可以使用 -ggdb 选项。

# android - 在onCreate（）之外读取android中的文件

> ID：12926845
> 
> 赞同：1
> 
> 时间：2012-10-17T03:51:38.117
> 
> 标签：android

我想知道在 android 中读取文件是否只能在活动的 onCreate() 下工作？我有这个问题是因为当阅读过程在 onCreate() 一侧或在 onCreate 下调用的方法一侧时，我的阅读过程有效。

以下是我用来读取文件的内容

```
try {
            file="";
            InputStream ish =     this.getResources().openRawResource(R.drawable.regular_hero_deck);
            BufferedReader brh = new BufferedReader(new     InputStreamReader(ish));
            if(ish!=null){
                while ((data = brh.readLine()) != null)   {
                    file+=data;
                }
            }
            ish.close();
            regularDeckHero =new Deck<Hero>("heroDeck",file);
        }catch (Exception e){//Catch exception if any
            System.err.println("Error : reading hero deck");} 
```

解决方法：是问题

```
InputStream ish =     this.getResources().openRawResource(R.drawable.regular_hero_deck); 
```

this.getResources() 没有给出我想要的，您需要的资源是来自您的 MainActivty 的资源，将这些资源传递给它应该可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T03:58:05.483

它适用于任何地方，甚至在活动之外。

可能是以下行

```
InputStream ish =     this.getResources().openRawResource(R.drawable.regular_hero_deck); 
```

导致问题..因为你使用这个（当前实例是一个活动）..

相反，通过获取应用程序上下文引用，您仍然可以说

```
InputStream ish =     context.getResources().openRawResource(R.drawable.regular_hero_deck); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T04:32:45.527

改变这一行..

```
InputStream ish =     this.getResources().openRawResource(R.drawable.regular_hero_deck); 
```

至

```
InputStream ish =     YourActivityname.this.getResources().openRawResource(R.drawable.regular_hero_deck); 
```

例如 YourActivityname 就像 mainActivity

# java - Java 编译器 super() 构造函数将军

> ID：12926853
> 
> 赞同：6
> 
> 时间：2012-10-17T03:52:41.797
> 
> 标签：java, class, inheritance, compiler-construction, constructor

> **可能重复：**
> [访问非覆盖超类方法时使用“super”关键字](https://stackoverflow.com/questions/12803346/use-of-super-keyword-when-accessing-non-overridden-superclass-methods)

我是 Java 新手，最近阅读了很多关于它的内容，以获取有关该语言的更多知识和经验。当编译器插入自动代码时，我有一个关于继承方法和扩展类的问题。

我一直在阅读，如果我使用一些方法创建类 A，包括让我们说一个名为 的方法`checkDuePeriod()`，然后创建一个扩展类 A 及其方法的类 B。

如果我然后`checkDuePeriod()`在不使用`super.checkDuePeriod()`语法的情况下调用 B 类中的方法，则在编译期间编译器将包含`super.`之前的内容，或者编译器在编译类时自动包含构造函数`checkDuePeriod()`这一事实意味着调用 B 类从 A 类调用的方法?`super()``super.`

我对此有点困惑。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T04:04:14.587

超类对常规方法的实现*不会*在子类中自动调用，但必须在子类的构造函数中调用超类构造函数的一种形式。

在某些情况下，调用`super()`是隐含的，例如当超类具有默认（无参数）构造函数时。但是，如果超类中不存在默认构造函数，则子类的构造函数必须直接或间接调用超类构造函数。

默认构造函数示例：

```
public class A {
    public A() {
        // default constructor for A
    }
}

public class B extends A {
    public B() {
        super(); // this call is unnecessary; the compiler will add it implicitly
    }
} 
```

没有默认构造函数的超类：

```
public class A {
    public A(int i) {
        // only constructor present has a single int parameter
    }
}

public class B extends A {
    public B() {
        // will not compile without direct call to super(int)!
        super(100);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T04:22:07.893

如果你`checkDuePeriod()`在没有的情况下调用B `super.`，意味着你想调用属于B的this实例（由`this`B内表示）的方法。所以，它相当于说`this.checkDuePeriod()`，所以编译器添加是没有意义`super.`的前方。

`super.`是您必须显式添加的内容，以告诉编译器您要调用 A 的方法版本（特别需要在 B 覆盖 A 为该方法提供的实现的情况下）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T04:22:08.933

作为默认构造函数（没有参数的构造函数）调用 super() 可以是直接的或非直接的，但它**保证可扩展类的字段已正确初始化**。

例如：

```
public class A {
    StringBuilder sb;
    public A() {
        sb = new StringBuilder();
    }
}

public class B extends A {
    public B() {
        //the default constructor is called automatically
    }
    public void someMethod(){
        //sb was not initialized in B class, 
        //but we can use it, because java garants that it was initialized
        //and has non null value
        sb.toString();
    }
} 
```

但在方法的情况下：

方法实现了一些逻辑。如果我们需要重写超类的逻辑，我们使用

```
public class B extends A {
    public B() {
    }
    public boolean checkDuePeriod(){
       //new check goes here
    }
} 
```

如果我们只想实现一些额外的检查，使用从超类的 checkDuePeriod() 返回的值，我们应该做这样的事情

```
public class B extends A {
    public B() {
    }
    public boolean checkDuePeriod(){
       if(super.checkDuePeriod()){
            //extra check goes here
       }else{
            //do something else if need
       }
       return checkResult;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T05:05:45.237

首先关于`Constructors`**：**

**-**当`object`一个类的 an 被创建时，它`constructor`被初始化并且**在那个时候它的 s 被立即**调用`constructor`，`uper-class`直到这个`Object`类，

**-**在这个过程中，所有的实例变量都被声明和初始化。

**-**考虑这种情况。

**Dog**是**Canine**`sub-class`的一个，Canine 是**Animal**的一个**`sub-class`**

 ****现在初始化Dog对象时，在对象实际形成之前，必须形成Canine类对象，并且在Canine对象形成之前，要形成Animal类对象，并且在形成Object类对象之前，

**所以形成的对象的顺序是：**

`Object ---> Animal ---> Canine ---> Dog`

所以`Constructor of the Super-Class is Called before the Sub-Class`.

现在有了`Method`**：**

`The most specific version of the method that class is called.`

**例如：**

```
public class A{

  public void go(){

  }

}

class B extends A{

   public static void main(String[] args){

   new B().go();  // As B has not overridden the go() method of its super class,
           // so the super-class implementation of the go() will be working here
    }
} 
```****

# php - 解析具有独特元素的 RSS 提要

> ID：12926854
> 
> 赞同：3
> 
> 时间：2012-10-17T03:53:00.897
> 
> 标签：php, parsing, rss, simplexml

我之前已经使用 PHP 和 simplexml 来使用标准元素解析 RSS，`<title> <pubDate>`但是我将如何解析一些自定义到 feed`<xCal:location>`或者`<xCal:dtstart>`使用 xCal 数据元素的东西？

类似的东西`$item->xCal:dtstart` 会出错。我将如何收集此数据元素？

像这样的提要示例： [http ://www.trumba.com/calendars/vd.rss?mixin=236393%2c236288](http://www.trumba.com/calendars/vd.rss?mixin=236393%2c236288)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T04:55:52.533

试试这样：

```
$feedUrl = 'http://www.trumba.com/calendars/vd.rss?mixin=236393%2c236288';
$rawFeed = file_get_contents($feedUrl);
$xml = new SimpleXmlElement($rawFeed);

$ns = $xml->getNamespaces(true);

//print_r($ns);
$xCal = $xml->channel->children($ns['xCal']);
echo ($xCal->version)."<br />";

foreach($xml->channel->item as $item)
{
    //print_r($item);
    $itemxTrumba=$item->children($ns['x-trumba']);
    echo $itemxTrumba->masterid."<br />";
}
//print_r($xCal); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:02:18.727

“自定义的东西”是一个 XML 命名空间。搜索有关 SimpleXML 和命名空间的现有答案。

基本上，您需要的是`->children()`方法：`$item->children('xCal', true)->dtStart`

# java - 网络中断后http会恢复吗？

> ID：12926857
> 
> 赞同：3
> 
> 时间：2012-10-17T03:53:18.933
> 
> 标签：java, android, ios, http

我正在测试`Http connection`，我发现这种行为很奇怪。`I want to test whether the http connect will continue after network is enabled/disabled`. 我对此进行测试的唯一方法是禁用网络适配器。

例如，在我按下按钮启动http连接之前，我先禁用了网络适配器，在代码执行之后`http.connect()`，我重新启用了网络适配器（在允许的超时内），但最后仍然抛出超时，我认为连接在超时之前仍然有效吗？

你们如何处理这个问题，因为现在移动应用程序（android，IOS）在短时间内无法使用 3G 时需要克服大量网络故障。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T13:00:34.543

是和不是。

实际上，这取决于许多不同的组件，因此很难回答。

一个工作示例：考虑建立网络连接，然后它关闭并重新启动。途中仍有数据包，重启后到达目标。现在有可能 TCP 中的纠错系统简单地赶上并继续连接。从计算机上拔下以太网电缆并在几秒钟后重新连接它，您将看到这是可行的。但是：通常移动设备会获得一个新的 IP 用于重新连接，这使得这不可能。

在您的设备和网络之间有许多组件，包括路由器、透明代理、防火墙等。所有这些都有不同的超时时间，有些发送的消息可以停止或断开连接，有些则不能。有些甚至阻止此类消息。因此，尽管有可能，但它并不可靠。

您的示例：当您`connect()`在网络中断时执行操作时，我通常会期望立即拒绝。但也许 DNS 在这里会导致延迟，所以你会得到一个超时。我怀疑在某些情况下，`connect()`当线路再次联机时，停机期间的 a 会自行继续。

# jquery - jqgrid - postData 提交以前的请求参数和数据

> ID：12926858
> 
> 赞同：6
> 
> 时间：2012-10-17T03:53:27.347
> 
> 标签：jquery, jqgrid

我一直在使用`postData`动态设置请求参数。单击某个外部按钮时，我更改了网格 URL 并设置了一些附加参数，`postData`如下所示。JqG​​rid 似乎附加了所有这些参数，它是所有后续请求的数据。有没有办法可以控制或避免每次都发送这些参数？

我的网格定义：

```
jQuery(function() {
    $('#grid').jqGrid({
    url: 'rates.html',
    postData: {
        name: function() { return $("#name").val(); },
        rate: function() { return $("#rate").val(); },
                .....
        }
        ....
    });
}); 
```

在帖子请求中：我看到`name`, `rate`params 与其他标准 jqGrid 参数（如`sortname`, `sidx`,`rows`等）一起使用...

现在，如果单击外部按钮，如果我更改网格 URL，如下所示

```
$('#changeReqBtn').click(function() {
       $('#grid').setGridParam({ url: 'changeReq.html', 
                              postData: { msgIds: msgIds } });
       $('#grid').trigger("reloadGrid");     

}); 
```

现在 jqGrid 发送`name`, rate, `msgIds`params

现在，如果我将 URL 更改回 rates.html，例如，单击刷新图标时，jqGrid 会发送前一个`msgIds`参数以及前一个值。当 URL 更改时，我不想在新请求中发送以前的请求参数。有没有办法我们可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T15:24:58.947

如果我正确理解您的问题，您应该避免使用`setGridParam`并执行以下操作。您可以使用`$('#grid').jqGrid("getGridParam", "postData")`来获取对内部参数**的引用**`postData`。例如，

```
var myPostData = $('#grid').jqGrid("getGridParam", "postData"); 
```

因此，您可以使用`delete myPostData.msgIds`删除之前添加的方法的任何属性`setGridParam`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-07T04:53:39.090

我在保留以前请求的 postdata 参数时遇到了同样的问题。

我通过先清除 postData 然后用新参数设置 postData 来修复它。

清除 postData => $('#grid1').setGridParam({ postData: ""});

使用新参数设置 postData =>

var formValues = {searchVal: "abc", country: "US"} $('#grid1').setGridParam({ postData: formValues});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-15T13:45:35.427

我能够通过这种方式解决它：

```
function triggerRefresh(wsParams) {
    // determine ws path
    var myGrid=$('#myjsTreeView');
    var urlData = "/myWebService.asmx/myWebServiceMethod";
    // note: you need to pass url, datatype, postdata
    var gridParam = { url: urlData, datatype: "json", postData: wsParams, page: 1 };                        
    myGrid.jqGrid('setGridParam', gridParam).trigger("reloadGrid");
} // function 
```

不同之处在于我在我的请求中指定`datatype`了 , the`url`和`page`total ——这使它起作用了！

我这样称呼这个函数：

```
var myparams = $.toJSON({ para1: someValue, para2: someOtherValue });
triggerRefresh(myparams); 
```

当我需要更新数据时。例如，省略数据类型将导致刷新以静默方式失败。

# uistoryboard - iPad 和 iPod/iPhone 设备只有一个 Storyboard

> ID：12926863
> 
> 赞同：1
> 
> 时间：2012-10-17T03:54:05.203
> 
> 标签：uistoryboard, maintenance-plan

我刚刚开始构建一个通用的 iOS 应用程序，看起来为 iPad 和 iPod/iPhone 提供两个独立的故事板可能会有点维护问题，因为大多数视图控制器之间的唯一区别是大小。当 iPad 'mini' 到货时，可能还需要另一个故事板......

我正在考虑只为两种设备使用一个故事板。我发现通过使用支柱和弹簧，所有视图都可以正确调整大小和重新定位。对于任何特定于设备的视图控制器，我可以只创建其中两个，然后以编程方式加载特定于设备的一个，而不是使用情节提要链接到它们。

我知道这可能是不好的做法，但我能逃脱惩罚吗？我可能会遇到哪些问题？

# android - 使用 MenuItem.setActionView 在 ActionBarSherlock 中保留默认的 selectableItemBackground

> ID：12926864
> 
> 赞同：3
> 
> 时间：2012-10-17T03:54:27.193
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在使用拆分 ActionBar 来显示一些简单的媒体控件。见下文：

![具有正确背景的媒体控件](../Images/937e59d3f85d29d2696e34777fd2cc91.png)

我使用 MenuItem.setActionView 来覆盖快进和倒带按钮的默认视图，因为我需要检测用户何时最初触摸控件（开始倒带）并随后释放控件（完成倒带）。请参见下面的代码：

```
 ImageView rewindButton = new ImageView(getBaseContext());
        rewindButton.setId(rewindViewID);
        rewindButton.setClickable(true);
        rewindButton.setImageResource(R.drawable.ic_action_rewind);
        rewindButton.setOnTouchListener(forwardBackwardListener);
        MenuItem rewindMenu = menu.findItem(R.id.menu_rewind);
        rewindMenu.setActionView(rewindButton);
        return true; 
```

这对我来说一切都很好，但产生了意想不到的副作用。当我触摸快进或快退按钮时，我没有获得默认的蓝色背景（如上面的向后跳过控件所示）。它根本不显示背景。我尝试在 onTouch 处理程序中设置背景，但背景不会以与默认方式相同的方式填充 ActionBar 的高度（参见下面的示例图），似乎有一些填充或边距，但我没有不知道怎么去掉。

![带有短背景的菜单](../Images/d7ebfe8f23dfe6098b8cab3fae56682e.png)

我试过以下没有运气：

*   手动设置 ImageView 的高度以尝试填充 ActionBar
*   从 onTouch 处理程序返回 True 或 False

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:17:02.820

我想出了一个解决方法，即在选择项目时将所有项目的背景设置为一个小的径向渐变。渐变仍然被切断了一点，但几乎不明显。它使自定义按钮和常规按钮看起来几乎相同。

![你最终会得到这样的东西](../Images/41674ffeaa6f64b2fe2ba8fad11d56af.png)

首先，我在一个名为 res/drawable/radialbackground.xml 的文件中创建了径向渐变。请注意，最终颜色是透明的，这对于将渐变淡入淡出很重要，因此它不会填充整个矩形。

```
<?xml version="1.0" encoding="utf-8"?>

<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">

      <gradient
        android:centerX="0.5"
        android:centerY="0.5"
        android:endColor="#00FFFFFF"
        android:gradientRadius="35"
        android:startColor="@color/Gray"
        android:type="radial"
         />
</shape> 
```

然后我创建了一个名为 res/drawable/actionitembackground.xml 的 StateListDrawable

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android"
                  android:exitFadeDuration="@android:integer/config_mediumAnimTime" >
        <item android:state_pressed="true" android:drawable="@drawable/radialbackground" />
        <item android:drawable="@android:color/transparent" />
</selector> 
```

然后我将该 statelistdrawable 分配给我的自定义 ActionViews 的背景：

```
rewindButton.setBackgroundResource(R.drawable.actionitembackground); 
```

然后我更改了操作栏的样式，以包含常规操作栏项目的新径向填充。

所以，在 values/styles.xml 我添加了：

```
<style name="Theme.MyTheme" parent="Theme.Sherlock.Light">
        <item name="android:selectableItemBackground">@drawable/actionitembackground</item>
        <item name="selectableItemBackground">@drawable/actionitembackground</item>
</style> 
```

在我的例子中，基本风格是 Theme.Sherlock.Light 但你可以用你想要修改的任何风格来替换它。

然后我将该样式设置为我在 AndroidManifest.xml 中的应用程序的样式

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.MyTheme" 
        android:uiOptions="splitActionBarWhenNarrow" > 
```

这似乎比尝试调试背景被切断的原因更容易。也许改天我会花更多的时间在这上面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T14:57:31.350

我遇到了完全相同的问题，但是在操作栏上有一个微调器，您需要将您的视图的 de minHeight 设置为 actionBar 高度：

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/drop_down"
android:minHeight="?android:attr/actionBarSize"
>
<Spinner
    android:id="@+id/category_spinner"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/default_selector"
    android:minHeight="?android:attr/actionBarSize"
    android:gravity="center_vertical|right"
    android:paddingRight="5dp"
    /> 
```

# mysql - 左连接让我难过

> ID：12926870
> 
> 赞同：1
> 
> 时间：2012-10-17T03:55:23.857
> 
> 标签：mysql, left-join

我有 2 张桌子，人物和电影

person 表有 ID 和性别，Movie 表有 ID、movie_type 和 movie_attended。genderID 和movie_attended 可以为空。

我想创建一个返回 3 列的查询：gender、movie_attended（但它必须是一部浪漫电影）以及具有该性别和 movie_attended 的人数。

现在我有

```
select person.gender, movie.movie_attended, count(person.gender)
from person left join movie
on person.ID = movie.ID
where movie.movie_type = "romance"
order by person.gender DESC 
```

不幸的是，这只给了我一行信息。如果我删除 count(person.gender) 我会得到太多行。假设只有 3 部爱情电影可供选择。我希望我的第一行阅读男 - 笔记本 - 12。第二行：男 - 卡萨布兰卡 - 8。第三行：男 - 罗密欧与朱丽叶 - 2。第四行：男 - 空 - 2

然后从女性重新开始

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:04:37.443

我很惊讶您设法运行该查询，因为您缺少使用聚合函数时始终需要的“分组依据”语句。“group by”语句应包含与“select”语句相同的字段，但不包含聚合函数。

```
select person.gender, movie.movie_attended, count(person.gender)
from person left join movie
on person.ID = movie.ID
where movie.movie_type = "romance"
group by person.gender, movie.movie_attended
order by count (person.gender) DESC 
```

我已经更改了您的“order by”语句，因为您提供的数据表明查询是按结果数量而不是按性别排序的。

person.id 应该等于 movie.id 对我来说似乎很奇怪。在数据库结构上，人表、电影表和people.id和movie.id组成的连接表似乎更实用，其中存储了哪些人看过哪些电影的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:57:29.507

```
select gender, count(person.gender), movie.movie_attended
from person left join movie
on person.movie_id = movie.movie_id # or whatever it is called.
where movie.movie_type = "romance"
group by person.gender 
```

# javascript - 从 JavaScript 调用控制器操作

> ID：12926875
> 
> 赞同：-5
> 
> 时间：2012-10-17T03:55:57.770
> 
> 标签：javascript, asp.net-mvc-3

我的银行控制器（“BankController”）名称中有控制器操作添加如下所示：

```
public ActionResult Add()
{
    return View();
} 
```

现在我如何从 java 脚本调用我的操作。注意：我的动作返回类型是“ActionResult”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T03:58:10.193

只需使用 AJAX 调用：

```
<div id='some-container'>Loading...</div>

<script type='text/javascript'>
    $(document).ready(function() {
        $.get('@Url.Action("Add", "BankController")', function(viewResult) {
            $("#some-container").html(viewResult);
            alert(viewResult);
        });
    });
</script> 
```

# ruby-on-rails - 使用 ruby on rails 为 cpanel 创建电子邮件帐户

> ID：12926876
> 
> 赞同：1
> 
> 时间：2012-10-17T03:56:05.997
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, ruby-on-rails-3.2, cpanel

有谁知道我可以如何创建电子邮件帐户，并可能使用 rails 应用程序从我的 cpanel 读取邮件，而无需直接进入 cpanel 创建电子邮件帐户。这真的很有帮助，它可以为我节省很多登录 cpanel 的时间。这意味着我应该能够使用我的 rails 应用程序创建电子邮件帐户。谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T19:42:07.587

cPanel 有一个 API，您可以访问它来为您完成工作

[http://docs.cpanel.net/twiki/bin/view/SoftwareDevelopmentKit/](http://docs.cpanel.net/twiki/bin/view/SoftwareDevelopmentKit/)

您所要做的就是构建请求并调用它们的 API。

为了构建请求：

```
require 'net/http'

url = URI.parse('http://www.example.com/index.html')
req = Net::HTTP::Get.new(url.path)
res = Net::HTTP.start(url.host, url.port) {|http|
  http.request(req)
}
puts res.body 
```

以下是 API 的 XML 或 JSON 版本的链接：

[http://docs.cpanel.net/twiki/bin/view/SoftwareDevelopmentKit/XmlApi](http://docs.cpanel.net/twiki/bin/view/SoftwareDevelopmentKit/XmlApi)

然后，您在请求后解析 JSON 并将其显示在您的 rails 应用程序中。

只是为了让您知道，创建电子邮件的功能在 API1 中：

[http://docs.cpanel.net/twiki/bin/view/SoftwareDevelopmentKit/CallingAPIFunctions](http://docs.cpanel.net/twiki/bin/view/SoftwareDevelopmentKit/CallingAPIFunctions)

我希望这可以帮助您入门。

# mysql - 在 MySQL 中检查外键

> ID：12926878
> 
> 赞同：2
> 
> 时间：2012-10-17T03:56:46.123
> 
> 标签：mysql, foreign-keys, referential-integrity

有没有办法检查 MySQL 中的外键完整性？例如; 是否可以通过 information_schema 中的数据库检查每个表是否违反约束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-13T19:26:58.440

我写了一些 SQL 来做到这一点。

首先，必须收集约束、表、列和子表信息的列表：

```
SELECT DISTINCT KEY_COLUMN_USAGE.CONSTRAINT_NAME, KEY_COLUMN_USAGE.TABLE_NAME, KEY_COLUMN_USAGE.COLUMN_NAME, KEY_COLUMN_USAGE.REFERENCED_TABLE_NAME, KEY_COLUMN_USAGE.REFERENCED_COLUMN_NAME 
FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS 
INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE 
ON TABLE_CONSTRAINTS.CONSTRAINT_NAME=KEY_COLUMN_USAGE.CONSTRAINT_NAME 
WHERE TABLE_CONSTRAINTS.CONSTRAINT_TYPE="FOREIGN KEY" AND TABLE_CONSTRAINTS.CONSTRAINT_SCHEMA=<YOUR_DATABASE>; 
```

一旦收集了这些信息，您就可以使用以下 SQL 遍历返回的数据：

```
SELECT PARENT_TABLE.COLUMN AS CHILD_ID, CHILD_TABLE.CHILD_REFERENCED_COLUMN AS PARENT_ID FROM <YOUR_DATABASE>.<THE_TABLE> 
LEFT JOIN <YOUR_DATABASE>.CHILD_TABLE ON PARENT_TABLE.COLUMN=CHILD_TABLE.CHILD_REFERENCED_COLUMN 
WHERE CHILD_TABLE.CHILD_REFERENCED_COLUMN IS NULL; 
```

执行此操作的 Python 代码如下：

```
self.dbcur.execute("SELECT DISTINCT KEY_COLUMN_USAGE.CONSTRAINT_NAME, KEY_COLUMN_USAGE.TABLE_NAME, KEY_COLUMN_USAGE.COLUMN_NAME, KEY_COLUMN_USAGE.REFERENCED_TABLE_NAME, KEY_COLUMN_USAGE.REFERENCED_COLUMN_NAME FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE ON TABLE_CONSTRAINTS.CONSTRAINT_NAME=KEY_COLUMN_USAGE.CONSTRAINT_NAME WHERE TABLE_CONSTRAINTS.CONSTRAINT_TYPE=\"FOREIGN KEY\" AND TABLE_CONSTRAINTS.CONSTRAINT_SCHEMA=%s", (self.database,))
prep = self.dbcur.fetchall()

# 0 = CONSTRAINT_NAME
# 1 = TABLE_NAME
# 2 = COLUMN_NAME
# 3 = REFERENCED_TABLE_NAME
# 4 = REFERENCED_COLUMN_NAME
# 5 = DATABASE
for row in prep:
    query = "SELECT {1}.{2} AS CHILD_ID, {3}.{4} AS PARENT_ID FROM {5}.{1} LEFT JOIN {5}.{3} ON {1}.{2}={3}.{4} WHERE {3}.{4} IS NULL".format(row[0], row[1], row[2], row[3], row[4], self.database)
    self.dbcur.execute(query)
    results = self.dbcur.fetchall()

    if len(results) > 0:
        for baddata in results:
            bad_data = ({"CONSTRAINT_NAME": row[0], "TABLE_NAME": row[1], "COLUMN_NAME": row[2], "REFERENCED_TABLE_NAME": row[3], "REFERENCED_COLUMN_NAME": row[4], "CHILD_ID": baddata[0], "PARENT_ID": baddata[1], "DATABASE": self.database})
            self.badforeignkeys.append(bad_data)

return(self.badforeignkeys) 
```

# spring-batch - 在春季批处理中处理 xlsx / xls 输入的最有效方法

> ID：12926880
> 
> 赞同：0
> 
> 时间：2012-10-17T03:57:08.740
> 
> 标签：spring-batch

我必须编写一个应该处理 excel 输入的 spring 批处理程序。

是否有用于 excel 文件的 itemreader。

特殊情况：如果我不确定文件的输入格式怎么办。它可以是 xlsx 或 xls 中的任何一个，并且程序应该能够同时处理这两者。

我手中的解决方案：使用 poi 或 jexcel 读取 excel 并写入一个 dat 文件，然后可以使用 FlatFileItemReader 处理该文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:53:17.763

编写您自己的 ExcelFileItemReader 实现[ResourceAwareItemReaderItemStream](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/item/file/ResourceAwareItemReaderItemStream.html)接口并在那里使用 poi/jexcel 库。

不要忘记查看[FlatFileItemReader](https://github.com/SpringSource/spring-batch/blob/master/spring-batch-infrastructure/src/main/java/org/springframework/batch/item/file/FlatFileItemReader.java)源代码。

# c# - 有没有办法对 SMTP 服务器进行基于应用程序的循环轮换？

> ID：12926882
> 
> 赞同：0
> 
> 时间：2012-10-17T03:57:18.253
> 
> 标签：c#, load-balancing, smtpclient

我正在使用`SMTPClient`在`app.config`

```
 <system.net>
    <mailSettings>
      <smtp from="mailer &lt;no_reply@mysite.com&gt;">
        <network defaultCredentials="true" host="192.168.1.101" port="25"/>
      </smtp>
    </mailSettings>
  </system.net> 
```

有没有办法添加更多的 SMTP 服务器（比如 4 个服务器）并让代码循环使用哪个 SMTP 服务器？

例如，我有 4 个 SMTP 服务器：**192.168.1.101、192.168.1.102、192.168.1.103、192.168.1.104，**我有**8 封电子邮件**要发送。

我希望实现的是：

```
Mail 1 sent using 192.168.1.101
Mail 2 sent using 192.168.1.102
Mail 3 sent using 192.168.1.103
Mail 4 sent using 192.168.1.104
Mail 5 sent using 192.168.1.101
Mail 6 sent using 192.168.1.102
Mail 7 sent using 192.168.1.103
Mail 8 sent using 192.168.1.104 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:01:27.493

实施一些事情来做到这一点将是相当微不足道的（并且有一百万种方法可以解决这个问题，所以我相信有人有更好的方法），但这将是一种快速/简单的方法来获得你正在寻找的效果。我假设你有办法在你的应用程序中把它变成一个持久对象。

```
public class SmtpQueue
{
    private Queue<string> _queue;

    public SmtpQueue(string[] ips)
    {
        _queue = new Queue<string>();

        LoadIps(ips);
    }

    private void LoadIps(string[] ips)
    {
        // load the ips
        foreach (string ip in ips)
            _queue.Enqueue(ip);
    }

    public string GetNext()
    {
        string nextIp = _queue.Dequeue();
        _queue.Enqueue(nextIp);
        return nextIp;
    }
} 
```

你会像这样消费它：

```
System.Net.Mail.SmtpClient client = new System.Net.Mail.SmtpClient();
client.Host = mySmtpQueueInstance.GetNext(); 
```

无论你最终做什么，都不要过度复杂化。一般来说，这将是您使用 DNS 完成的事情，如果可能，我会推荐这种方法。

# objective-c - 自定义分段控件中选定分段的颜色

> ID：12926884
> 
> 赞同：5
> 
> 时间：2012-10-17T03:57:40.337
> 
> 标签：objective-c, xcode, ios6, background-color, uisegmentedcontrol

如何自定义/更改分段控件中选定分段的颜色？我尝试使用[UISegmentedControl selected segment color](https://stackoverflow.com/questions/2270526/uisegmentedcontrol-selected-segment-color)提供的方法。它适用于 iOS 5 及更低版本，但不适用于 iOS 6。感谢任何帮助。

基本上，我希望将所选分段的颜色更改为一些明亮的颜色，以便选定/未选定的分段清晰可见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T20:38:17.343

我们使用了 siddarth 提到的方法。

子类化分段控制器并覆盖 drawrect() 方法。像这样的东西：

```
- (void)drawRect:(CGRect)rect
{
[super drawRect:rect];

for (int i=0; i<[self.subviews count]; i++)
{
    if ([[self.subviews objectAtIndex:i]isSelected] )
    {
        UIColor *tintcolor=[UIColor redColor];
        [[self.subviews objectAtIndex:i] setTintColor:tintcolor];
    } else {
        UIColor *tintcolor=[UIColor grayColor]; // default color
        [[self.subviews objectAtIndex:i] setTintColor:tintcolor];
    }
   }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T04:27:50.303

您可以覆盖该特定视图的子类，然后覆盖其 drawRect() 方法以使其在屏幕上自定义外观。

# github - 确定给定 Github 令牌的授权范围

> ID：12926885
> 
> 赞同：6
> 
> 时间：2012-10-17T03:57:55.150
> 
> 标签：github, github-api

我的应用程序使用[Github 的 Oauth](http://developer.github.com/v3/oauth/)。假设：

*   在版本 1 中，应用程序只需要基本授权（范围 = []）
*   在版本 2 中，应用程序需要对公共存储库进行 R/W 访问（范围 = ['public_repo']）

自升级以来，一些用户尚未登录。

现在我有一些比其他令牌具有更大授权能力的令牌。我如何区分它们？换句话说，我怎么能问 Github：“嘿，我有这个 oauth 令牌……我能用它做什么？”

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-18T23:53:25.113

您可以发出任何 GitHub API 请求并读取 X-OAuth-Scopes 标头的值，以查看令牌提供了哪些范围。使用 /rate_limit 不会计入您应用的速率限制。

```
curl -I -H 'Authorization: token <token>' https://api.github.com/rate_limit
HTTP/1.1 200 OK
Server: nginx
Date: Thu, 18 Oct 2012 23:48:37 GMT
Content-Type: application/json; charset=utf-8
Connection: keep-alive
Status: 200 OK
Content-Length: 61
X-GitHub-Media-Type: github.beta
X-RateLimit-Remaining: 4999
X-RateLimit-Limit: 5000
X-OAuth-Scopes: public_repo
Cache-Control: 
X-Content-Type-Options: nosniff 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-05T08:54:11.140

（2014 年 2 月）：[增强了 SSH 密钥的 OAuth 安全性](https://github.com/blog/1786-enhanced-oauth-security-for-ssh-keys)

> 我们刚刚添加了[更精细的权限](http://developer.github.com/v3/oauth/#scopes)，因此[第三方应用程序](https://help.github.com/articles/connecting-with-third-party-applications)可以专门请求对您的公共 SSH 密钥的只读访问、读/写访问或完全管理员访问权限。

* * *

请注意，`access-token`现在（2013 年 10 月）也返回范围。

这在“[即将发生的 OAuth 更改](http://developer.github.com/changes/2013-10-04-oauth-changes-coming/)”（2013 年 10 月，由[Tim Cleam - tclem 撰写](https://github.com/tclem)）中有详细说明：

> 从今天开始，我们将返回已授予的范围作为 access_token 响应的一部分。
> 例如，如果您`POST`使用`application/json`mime-type 创建 a，您将看到授予范围的附加字段。

```
{
  "access_token":"e72e16c7e42f292c6912e7710c838347ae178b4a",
  "scope":"repo,gist",
  "token_type":"bearer"
  } 
```

> 目前，这些范围将与您请求的相同，但**我们正在朝着允许 GitHub 用户编辑其范围的功能集发展，从而有效地授予您的应用程序比您最初请求的更少的访问权限**。
> 您应该意识到这种可能性并相应地调整您的应用程序行为。

### 一些需要注意和牢记的事情：

> *   大多数使用 GitHub OAuth 来识别用户的第三方应用程序在采用方面取得了最大的成功，首先是请求应用程序可能获得的最低访问权限。
>     像没有范围或只是`user:email`非常理智的东西。
>     
>     
> *   处理用户选择授予您的访问权限少于您最初请求的访问权限的错误情况非常重要。
>     现在我们在`access_token`响应中显示了授予的范围，应用程序可以警告或以其他方式与其用户通信，他们将看到功能减少或无法执行某些操作。
>     
>     
> *   应用程序始终可以通过流程再次将用户送回以获得额外的权限，但不要忘记用户始终可以拒绝。

# c# - 如何在foreach循环的arraylist中获取字典的键和值

> ID：12926892
> 
> 赞同：3
> 
> 时间：2012-10-17T03:58:32.140
> 
> 标签：c#, asp.net, .net

我想循环一个包含字典的数组列表。

```
foreach(Dictionary<string, string> tempDic in rootNode) 
{ 
    Response.Write(tempDic.key + "," tempDic.value + "<br>"); 
} 
```

如何访问字典键和值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T04:00:23.330

您还需要在字典中循环，为此您可以迭代`tempDic`using `Foreach`。

```
foreach(Dictionary<string, string> tempDic in rootNode) 
{
    foreach(KeyValuePair<string, string> _x in tempDic)
    {
        Response.Write(_x.key + "," + _x.value + "<br>");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T04:23:28.240

您可以先使用 LINQ 来获取`IEnumerable<KeyValuePair<string, string>>`所有`KeyValuePair`s 的列表（实际上）：

```
var pairs = rootNode.OfType<Dictionary<string, string>>()
                    .SelectMany(d => d.AsEnumerable());
foreach (KeyValuePair<string, string> tempPair in pairs)
{
    Response.Write(tempPair.Key + "," + tempPair.Value + "<br>");
} 
```

所以，只做一个 foreach 循环就足够了。另一个将由 LINQ 为您完成。

# android - Eclipse 的模拟器（ArcGIS Android 应用程序）？

> ID：12926894
> 
> 赞同：1
> 
> 时间：2012-10-17T03:58:48.770
> 
> 标签：android, eclipse, emulation, arcgis

我是 Eclipse 的新手。我正在尝试一步一步地学习它。我正在尝试使用“ **Eclipse IDE for Java EE Developers** ”为 Android 创建一个 ArcGIS 应用程序。我按照本[教程](http://help.arcgis.com/en/arcgismobile/10.0/apis/android/help/index.html#//011900000005000000)进行操作，并注意到这句话：

> “请务必将 Android 设备连接到机器。我们不支持在模拟器中运行。”

我的问题是 >>> 如何测试我的应用程序？说的都是真的吗？！我认为本教程很旧，因为他们在谈论旧的 SDK 版本。

我想用 Eclipse 的模拟器，我试过了，但是应用程序不能正常工作！！我现在很困惑；因为我不知道问题是否在于：

1.  ArcGIS 应用程序无法在模拟器上运行！
2.  我的代码错了！

我的详细问题：[Hello World Map (ArcGIS) - Eclipse's Emulator doesn't run ArcGIS app proper](https://stackoverflow.com/questions/12927772/hello-world-map-arcgis-eclipses-emulator-doesnt-run-arcgis-app-properly)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:11:58.447

由于 ArcGIS 页面声明它们不支持在模拟器上运行的应用程序，请尝试在实际设备上运行它。此外，由于它使用 GPS，您可能必须在模拟器上启用这些设置才能使其工作。

还可以帮助我们理解为什么它不能在模拟器上运行？是崩溃还是没有响应？Logcat 也可能有助于我们调试。

# ios6 - 存折中的通行证可以没有条形码吗？

> ID：12926895
> 
> 赞同：1
> 
> 时间：2012-10-17T03:58:49.383
> 
> 标签：ios6, passbook

我想在我的通票中显示条形码，但只显示一张优惠券。
它可以工作吗？

比如去掉pass.json中的这段代码：
`"barcode" : {
"message" : "All you need is love",
"format" : "PKBarcodeFormatPDF417",
"messageEncoding" : "iso-8859-1"
}`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T13:00:46.833

要从 Pasbook 的通行证中删除条形码，只需从 pass.json 中删除整个条形码部分并重建通行证。

# python - numpy 唯一没有排序

> ID：12926898
> 
> 赞同：31
> 
> 时间：2012-10-17T03:58:57.333
> 
> 标签：python, numpy

如何使用 numpy unique 而不对结果进行排序，而只是按照它们在序列中出现的顺序？像这样的东西？

`a = [4,2,1,3,1,2,3,4]`

`np.unique(a) = [4,2,1,3]`

而不是

`np.unique(a) = [1,2,3,4]`

使用幼稚的解决方案应该可以编写一个简单的函数。但是由于我需要多次执行此操作，是否有任何快速简洁的方法来执行此操作？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-10-17T04:11:20.400

您可以使用以下`return_index`参数执行此操作：

```
>>> 将 numpy 导入为 np
>>> a = [4,2,1,3,1,2,3,4]
>>> np.unique(a)
数组（[1, 2, 3, 4]）
>>> 索引 = np.unique(a, return_index=True)[1]
>>> [a[index] for index in sorted(indexes)]
[4、2、1、3]

```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-17T04:13:44.763

您可以通过执行以下操作使用 numpy 执行此操作，mergsort 是稳定的，因此它可以让您挑选出每个值的第一次或最后一次出现：

```
def unique(array, orderby='first'):
    array = np.asarray(array)
    order = array.argsort(kind='mergesort')
    array = array[order]
    diff = array[1:] != array[:-1]
    if orderby == 'first':
        diff = np.concatenate([[True], diff])
    elif orderby == 'last':
        diff = np.concatenate([diff, [True]])
    else:
        raise ValueError
    uniq = array[diff]
    index = order[diff]
    return uniq[index.argsort()] 
```

这个答案非常类似于：

```
def unique(array):
    uniq, index = np.unique(array, return_index=True)
    return uniq[index.argsort()] 
```

但是， numpy.unique 在内部使用不稳定的排序，因此不能保证您获得任何特定的索引，即第一个或最后一个。

我认为有序的字典也可能有效：

```
def unique(array):
    uniq = OrderedDict()
    for i in array:
         uniq[i] = 1
    return uniq.keys() 
```

# java - java.lang.NoClassDefFoundError: org.slf4j.LoggerFactory

> ID：12926899
> 
> 赞同：72
> 
> 时间：2012-10-17T03:59:07.150
> 
> 标签：java

在运行提要实用程序时，我收到了如下所述的错误。我正在尝试加载图像“ **logo.png** ”。`slf4j`jar 文件也可在运行时类路径中找到。但我仍然收到此错误。

```
Oct 16, 2012 7:34:11 PM com.ibm.commerce.foundation.dataload.FeedRetriever  invokeDataLoad
SEVERE: An error occurred while performing data load.
Throwable occurred: com.ibm.commerce.foundation.dataload.exception.DataLoadException: 
An error occurred while executing the data load. 

java.lang.NoClassDefFoundError: org.slf4j.LoggerFactory

    at com.ibm.commerce.foundation.dataload.DataLoaderMain.execute(DataLoaderMain.java:664)
    at com.ibm.commerce.content.commands.DataLoadInvoker.execute(DataLoadInvoker.java:101)
    at com.ibm.commerce.foundation.dataload.FeedRetriever.invokeDataLoad(FeedRetriever.java:244)
    at com.ibm.commerce.foundation.dataload.FeedRetriever.execute(FeedRetriever.java:172)
    at com.ibm.commerce.foundation.dataload.FeedRetriever.main(FeedRetriever.java:321)
Caused by: java.lang.RuntimeException: java.lang.NoClassDefFoundError: org.slf4j.LoggerFactory
    at com.ibm.commerce.foundation.dataload.DataLoaderMain.execute(DataLoaderMain.java:488)
    ... 4 more
Caused by: java.lang.NoClassDefFoundError: org.slf4j.LoggerFactory
    at org.apache.wink.client.ClientConfig.<clinit>(ClientConfig.java:52)
    at java.lang.J9VMInternals.initializeImpl(Native Method)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:200)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:167)
    at com.ibm.commerce.foundation.dataload.feedreader.AtomReader.getFeed(AtomReader.java:104)
    at com.ibm.commerce.foundation.dataload.feedreader.AtomReader.getEntries(AtomReader.java:147)
    at com.ibm.commerce.foundation.dataload.feedreader.AtomReader.getEntries(AtomReader.java:1)
    at com.ibm.commerce.foundation.dataload.feedreader.BaseFeedReader.init(BaseFeedReader.java:252)
    at com.ibm.commerce.foundation.dataload.AbstractBusinessObjectLoader.initializeDataReaders(AbstractBusinessObjectLoader.java:1344)
    at com.ibm.commerce.foundation.dataload.AbstractBusinessObjectLoader.init(AbstractBusinessObjectLoader.java:369)
    at com.ibm.commerce.foundation.dataload.BusinessObjectLoader.init(BusinessObjectLoader.java:65)
    at com.ibm.commerce.foundation.dataload.DataLoaderMain.execute(DataLoaderMain.java:431)
    ... 4 more
Caused by: java.lang.ClassNotFoundException: org.slf4j.LoggerFactory
    at java.lang.ClassNotFoundException.<init>(ClassNotFoundException.java:76)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:396)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:660)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:358)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:626)
    ... 16 more
Oct 16, 2012 7:34:11 PM com.ibm.commerce.foundation.dataload.FeedRetriever main
SEVERE: An error occurred while performing data load.
Throwable occurred: com.ibm.commerce.foundation.dataload.exception.DataLoadException: An error has occurred.  If this problem persists, contact product support.
    at com.ibm.commerce.foundation.dataload.FeedRetriever.invokeDataLoad(FeedRetriever.java:247)
    at com.ibm.commerce.foundation.dataload.FeedRetriever.execute(FeedRetriever.java:172)
    at com.ibm.commerce.foundation.dataload.FeedRetriever.main(FeedRetriever.java:321) 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2014-09-02T10:23:53.207

[添加一个 SLF4J 实现（因为您只有它的 API）：](http://mvnrepository.com/artifact/org.slf4j/slf4j-log4j12)

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-log4j12</artifactId>
    <version>1.7.26</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-10-17T04:00:58.950

您必须在类路径中提供各种 SLF4J 实现 .jar 文件之一，以及接口 .jar 文件。这是记录在案的。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-11-21T07:28:55.463

[下载slf4j-1.7.5.zip](http://www.slf4j.org/download.html)

它包含不同的 jar 文件。

解压缩 zip 后转到 -> 集成文件夹并包含以下 jar 文件

1.  slf4j-api-2.0.99
2.  slf4j-simple-1.6.99
3.  junit-3.8.1

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-09-17T08:51:03.973

右键单击项目属性并按照以下步骤“项目属性”->“部署程序集”，添加“Java 构建路径条目-> Maven 依赖项”

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2020-03-11T10:37:00.820

我尝试了其他解决方案，但异常并没有消失。所以我用 Java Decomplier 反编译了整个`jose4j 0.6.5 jar`文件并查看了它的 pom.xml。

我意识到它对**slf4j-api, version 1.7.21**有特定的依赖关系： [![在此处输入图像描述](../Images/3e7f57427ac5a7330cd1e955050ea0bf.png)](https://i.stack.imgur.com/73LS8.png)

所以在我项目的 pom.xml 中，我添加了完全相同的依赖项，更新了我的 Maven 项目，以便它将这个 jar 下载到我的存储库中并且异常消失了。

但是它可能会引发另一个由 slf4j 本身引起的错误：

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details. 
```

为了克服这个问题，我将以下内容添加到我的项目的 pom.xml 中。因此，您总共需要将以下内容添加到您的 pom.xml 和我的`jose4j`运行中没有任何问题：

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-api</artifactId>
    <version>1.7.21</version>
</dependency>   

<dependency>
   <groupId>org.slf4j</groupId>
   <artifactId>slf4j-simple</artifactId>
   <version>1.6.4</version>
</dependency> 
```

请记住在修改`pom.xml`.

（右键单击 Eclipse `->`Maven`->`更新项目中的项目文件夹..）

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-12-14T06:52:34.477

我也有类似的问题。我有一个 Maven 项目，正在测试 rabbitmq。首先它向我显示了类似的错误，然后我在 maven 项目中添加了所有 SLF4J 依赖项，然后错误更改为“Maven SLF4J：类路径包含多个 SLF4J 绑定”。这是 pom.xlm 的完整依赖项列表

```
<dependencies>
    <dependency>
        <groupId>com.rabbitmq</groupId>
        <artifactId>amqp-client</artifactId>
        <version>4.0.0</version>
    </dependency>
    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-lang3</artifactId>
        <version>3.0</version>
    </dependency>
    <dependency>
       <groupId>org.slf4j</groupId>
       <artifactId>slf4j-simple</artifactId>
       <version>1.7.21</version>
       <scope>compile</scope>
    </dependency>
</dependencies> 
```

它终于奏效了。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-08-25T15:52:47.410

我遇到了类似的问题，下面的行为我解决了这个问题。

```
 <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
    </dependency> 
```

编辑：我意识到我正在使用 spring boot，并且依赖的版本是从 spring-boot-starter-parent 中提取的。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-07-25T07:20:42.517

将以下 jars 添加到类路径或 lib 文件夹中

1.  [slf4j-api-1.7.2.jar](https://mvnrepository.com/artifact/org.slf4j/slf4j-api/1.7.2)
2.  [slf4j-jdk14-1.7.2.jar](https://mvnrepository.com/artifact/org.slf4j/slf4j-jdk14/1.7.2)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-06-09T19:20:25.050

毫无疑问，完美的解决方案是将这些包添加到您的应用程序中：
[https ://mvnrepository.com/artifact/org.slf4j/slf4j-api/1.7.2](https://mvnrepository.com/artifact/org.slf4j/slf4j-api/1.7.2)
[http://archive.apache.org/dist/logging /log4j/1.2.16/](http://archive.apache.org/dist/logging/log4j/1.2.16/)

添加后，您可能会遇到以下警告，您可以忽略！

*SLF4J：未找到 SLF4J 提供程序。SLF4J：默认为无操作 (NOP) 记录器实现 SLF4J：有关详细信息，请参阅[http://www.slf4j.org/codes.html#noProviders](http://www.slf4j.org/codes.html#noProviders)。*

学分： [https ://www.javacodegeeks.com/2018/02/fix-exception-thread-main-java-lang-noclassdeffounderror-org-slf4j-loggerfactory-java.html](https://www.javacodegeeks.com/2018/02/fix-exception-thread-main-java-lang-noclassdeffounderror-org-slf4j-loggerfactory-java.html)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-06-25T16:42:39.000

您可以使用波纹管依赖

```
<dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.17</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.7.7</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.7.7</version>
    </dependency> 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-08-05T05:08:19.750

发生此错误是因为未在我们项目的订单和导出选项卡中检查引用的 jar。

选择 Project ->ALT+Enter->Java Build Path ->Order and Export->将必要的 jar 文件检查到您的项目中。

最后清理您的项目并运行。它将成功运行。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-11-01T07:46:46.147

当我们使用 slf4j api jar 时，我们需要任何像 log4j 这样的记录器实现。在我的系统上，我们有完整的设置，它工作正常。

```
1\. slf4j-api-1.5.6.jar
2\. slf4j-log4j12-1.5.6.jar
3\. **log4j-1.2.15.jar** 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-05-29T08:36:39.493

更具体地说，如果您缺少**com.vaadin.external.org.slf4j.LoggerFactory**类，请添加以下依赖项。

```
<dependency>
    <groupId>com.vaadin.external.slf4j</groupId>
    <artifactId>vaadin-slf4j-jdk14</artifactId>
    <version>1.6.1</version>
</dependency> 
```

如果您缺少任何其他**org.slf4j.LoggerFactory**，只需转到[Maven 中央类名搜索](http://search.maven.org/#advancedsearch%7Cgav)并搜索确切的类名以确定您缺少的确切依赖项。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-12-02T16:44:49.513

我相信 slf4j 网站上概述了答案（[Failed to load class org.slf4j.impl.StaticLoggerBinder](http://www.slf4j.org/codes.html#StaticLoggerBinder)）

对于一个非常快速的解决方案，我建议添加无操作 (NOP) 记录器实现 (slf4j-nop.jar)

例如，如果使用 Maven：

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-nop</artifactId>
    <version>${slf4j-nop-version}</version>
</dependency> 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-05-22T12:14:56.357

确保您的**MANIFEST.MF**包含我的应用程序中引用的 jar 的名称是**slf4j-api-*。罐子**。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-09-09T21:00:04.893

你需要 slf4j-api 库。大多数情况下，只需要 slf4j-api 和 slf4j-jkd14：

[在这里](https://hub.jazz.net/project/morenoli/hangmangame/overview#https://hub.jazz.net/gerrit/plugins/gerritfs/list/morenoli%252Fhangmangame/refs%252Fheads%252Fmaster/WebContent/WEB-INF/lib)你可以下载1.7.2版本：

```
slf4j-api-1.7.2.jar
slf4j-jkd14-1.7.2jar 
```

如果您需要一个示例来了解如何使用它们，请参阅本教程： [http ://www.ibm.com/developerworks/java/library/j-hangman-app/index.html](http://www.ibm.com/developerworks/java/library/j-hangman-app/index.html)

教程的所有[代码](https://hub.jazz.net/project/morenoli/hangmangame/overview?utm_source=developerWorks&utm_medium=article&utm_content=j-hangman-app&utm_campaign=dW%20CloudOE%20content)都可用

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-12-26T15:09:29.117

使用 maven 它将为您下载所有必需的 jar 文件。

在这种情况下，您需要以下 jar 文件：

slf4j-log4j12-1.6.1.jar slf4j-api-1.6.1.jar

这些 jars 也将取决于您正在运行的 cassandra 版本。您使用的 cassandra 版本、jar 版本和 jdk 版本存在依赖关系。

您可以使用：jdk1.6 和：cassandra 1.1.12 和上述罐子。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-11-09T19:33:05.090

这对我有用 /properties/maven 取消选中解决来自工作区项目的依赖项。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-04-17T12:55:09.290

当您从 Maven 存储库复制依赖项时，有：

```
<scope>test</scope> 
```

尝试像这样从 pom.xml 中的依赖项中删除它。

```
<!-- https://mvnrepository.com/artifact/ch.qos.logback/logback-classic -->
<dependency>
    <groupId>ch.qos.logback</groupId>
    <artifactId>logback-classic</artifactId>
    <version>1.2.3</version>
</dependency> 
```

这对我有用。我希望它对其他人有帮助。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-01-09T10:54:07.587

获取此 jar slf4j-jdk14 的兼容版本并将其添加为依赖项。这为我解决了问题。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-11-29T15:27:14.527

首先，检查依赖层次结构，而不是将所有 slf4j jar 从其他依赖项中排除，并添加单独的 slf4j 作为依赖项。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-01-16T14:49:03.830

你需要 slf4j-api 库和 slf4j-log4j12-1.7.25 jar。将此jar复制到您的项目-> WEBINF-> lib文件夹和tomcat服务器lib文件夹中以成功执行。

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2020-12-31T10:55:18.667

如果您面临 java.lang.NoClassDefFoundError: org.slf4j.LoggerFactory

在项目的library文件夹中添加slf4j-log4j12 jar

* * *

## 回答 #24

> 赞同：-3
> 
> 时间：2012-10-17T04:12:27.623

LoggerFactory 类正在根据错误消息进行调整：

> java.lang.NoClassDefFoundError: org.slf4j.LoggerFactory

显然，由于`slf4j.jar`某种原因，该文件没有被加载。

# javascript - 一个关于javascript闭包和匿名函数的案例

> ID：12926900
> 
> 赞同：1
> 
> 时间：2012-10-17T03:59:06.867
> 
> 标签：javascript

先看代码

```
var name = "The Window"; 
var object = { 
  name : "My Object", 
  getNameFunc : function(){ 
    return function(){ 
      return this.name; 
    }; 
   } 
}; 

alert(object.getNameFunc()()); 
```

结果是`"The Window"`；我想知道每一步发生了什么。我认为`this`是指向调用此函数的对象；正确的？但是为什么在这种情况`this`下`window`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:03:39.010

第二次函数调用不是从对象的上下文中发生的，而是从第一次调用返回的函数中发生的。

因为没有对象上下文，所以该值就像任何其他函数一样`this`成为默认值。`window`

```
 //   v-----------------v------function has context
alert(object.getNameFunc()());
            // -----------^----second function was returned from the first
            //                   and invoked so there's no object context 
```

如果我们将返回的函数分配给`object`，然后从该上下文中调用它，`this`那么将是对 的引用`object`。

```
obj.foo = object.getNameFunc();
obj.foo();  // "My Object" 
```

完全相同的函数，但现在它作为 的属性被调用`object`，隐式将其`this`值设置为`object`。

* * *

的规则`this`非常简单易懂，但可能不是您一开始所期望的。

该`this`值是非常动态的，并且完全基于函数的调用方式*。*

```
foo();            // 'this' is 'window'

object.foo();     // 'this' is 'object'

foo.call(object); // 'this' is 'object'
foo.apply(object);// 'this' is 'object'

var bar = foo.bind(object);
bar();            // 'this' is 'object' 
```

因此，您可以看到默认情况是`window`在调用函数时没有任何类型的与另一个对象的连接。

但是当我们把函数作为一个对象的属性来调用时，`this`突然就引用了那个对象。

或者我们可以使用`.call`,`.apply`或者`.bind`手动设置`this`函数调用的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T04:04:36.343

由于它是一个新的闭包，因此`this`失去了意义。`this`一直是一件棘手的事情，所以我更喜欢总是启动这样的函数，`var that = this`以确保在闭包中不会丢失含义。

# sql - 转置表

> ID：12926901
> 
> 赞同：1
> 
> 时间：2012-10-17T03:59:10.643
> 
> 标签：sql, sql-server-2008, tsql, pivot, transpose

我到处找，没有发现任何有用的东西。

我有一张桌子为员工提供捕获帮助。

看起来像这样的表：

```
ID   | DATE     | ATTENDANCE
________________
2524 | 20121001 | ASISTANCE
2525 | 20121001 | ABSCENCE
2526 | 20121001 | ASISTANCE
2527 | 20121001 | ASISTANCE
2524 | 20121002 | ASISTANCE
2525 | 20121002 | ABSCENCE
2526 | 20121002 | ASISTANCE
2527 | 20121002 | ASISTANCE
2524 | 20121003 | ASISTANCE
2525 | 20121003 | DAY OFF
2526 | 20121003 | DAY OFF
2527 | 20121003 | ASISTANCE 
```

我想要一个返回一个看起来像这样的表的查询：

```
ID   | 20121001  | 20121002  | 20121003
________________
2524 | ASISTANCE | ASISTANCE | ASISTANCE
2525 | ABSCENCE  | ABSCENCE  | DAY OFF
2526 | ASISTANCE | ASISTANCE | ASISTANCE
2527 | ASISTANCE | ASISTANCE | DAY OFF 
```

我尝试了单独的查询并加入它们，但由于它们有很多日期，所以这样做需要太多时间。

我怎样才能做到高效并且可以存储到视图或函数中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:08:33.563

使用 PHP 等服务器端语言获取数据和处理数据会更容易。然后构建数组将是一件小事：

```
$entry[$id][$date] = $status; 
```

然后：

```
echo "ID";
foreach(array_keys(array_values($entry)[0]) as $date) {
    // requires some temporary variables in PHP before 5.4
    echo "\t".$date;
}
foreach($entry as $id=>$days) {
    echo "\n".$id;
    foreach($days as $day) echo "\t".$day;
} 
```

您现在有一个制表符分隔的表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:23:34.823

实际上，这可以通过`PIVOT`函数来​​完成。有两种使用方式`PIVOT`，静态的或动态的。

Static Pivot，您将硬编码值以转换为列：

```
create table tablea
(
    id int,
    dt datetime,
    attendance varchar(20)
);

insert into tablea values
(2524 , '20121001' , 'ASISTANCE'),
(2525 , '20121001' , 'ABSCENCE'),
(2526 , '20121001' , 'ASISTANCE'),
(2527 , '20121001' , 'ASISTANCE'),
(2524 , '20121002' , 'ASISTANCE'),
(2525 , '20121002' , 'ABSCENCE'),
(2526 , '20121002' , 'ASISTANCE'),
(2527 , '20121002' , 'ASISTANCE'),
(2524 , '20121003' , 'ASISTANCE'),
(2525 , '20121003' , 'DAY OFF'),
(2526 , '20121003' , 'DAY OFF'),
(2527 , '20121003' , 'ASISTANCE');

select *
from
(
    select id, dt, attendance
    from tablea
) x
pivot
(
    max(attendance)
    for dt in ([2012-10-01], [2012-10-02], [2012-10-03])
) p; 
```

动态`PIVOT`将在运行时获取值列表，如果列表发生变化，将更加灵活：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(convert(char(10), dt, 120)) 
                    from tablea
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT id, ' + @cols + ' from 
             (
                select id, dt, attendance
                from tablea
            ) x
            pivot 
            (
                max(attendance)
                for dt in (' + @cols + ')
            ) p '

execute(@query) 
```

两者都会给出相同的结果：

```
id   | 2012-10-01 | 2012-10-02 | 2012-10-03
-------------------------------------------
2524 | ASISTANCE  | ASISTANCE  | ASISTANCE
2525 | ABSCENCE   | ABSCENCE   | DAY OFF
2526 | ASISTANCE  | ASISTANCE  | DAY OFF
2527 | ASISTANCE  | ASISTANCE  | ASISTANCE 
```

# css - 在部分视图中调用 jquery ajax 后，css 不会加载

> ID：12926908
> 
> 赞同：1
> 
> 时间：2012-10-17T04:00:14.797
> 
> 标签：css, asp.net-mvc, jquery

每当用户单击按钮时，我都会尝试更改菜单的内容。CSS 最初加载很好，但是一旦我按下按钮启动 ajax 调用，菜单栏就会返回，但没有应用任何 CSS。所有代码都在 MVC 4 局部视图中。

![在我按下按钮之前](../Images/8306fc4fa8a331f53d7dcaefdc3e0238.png)

![在我按下按钮后](../Images/4ba9ac4dd4ad69b10a8f5055604584db.png)

这是我的 JS

```
$(document).ready(function () {

    $("#menu").wijmenu({
        orientation: 'vertical'
    });

    $("#TDButtons a").click(function () {
        var href = $(this).attr("href");
        $('#menuAjax').fadeOut('slow', LoadAjaxContent(href));
        return false;
    });

    function LoadAjaxContent(href) {

        $.ajax(
            {
                url: href,
                success: function (data) {
                    $("#menuAjax").html(data).fadeIn('slow');
                }
            });

    }
}); 
```

这是导航标签

```
 <nav id="menuAjax">
        <ul id="menu">
            <li><a href="#">Breaking News</a>
                <ul>
                  ... 
```

这是用于启动 AJAX 的按钮的 HTML

```
 <div class="navDiv">
        <div id="TDButtons">
            <a href="@Url.Action("_menu", "Home", new { TakeoutDelivery = "TakeOut" }, null)">
                <img class="headerLogo" src="../../Content/Images/TakeoutButton.jpg" alt="Take Out" /></a>
            <a href="@Url.Action("_menu", "Home", new { TakeoutDelivery = "Delivery" }, null)">
                <img class="headerLogo" src="../../Content/Images/DeliveryButton.jpg" alt="Delivery" /></a>
        </div> 
```

如果您需要其他任何东西，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T04:05:19.143

把它放在页面上。

```
function pageLoad(sender, args) {
 $('#OutsideDiv').trigger('create');
} 
```

这将在页面加载时重新附加 css。我认为的问题是它只是部分帖子，因此您正在丢失样式表。在进行部分回发调用时，我在 jquery-mobile 中的移动网站遇到了非常相似的问题。这修复了部分回发.....

注意：它的渲染延迟非常小......不确定这是否会给您带来问题......

希望能帮助到你

干杯罗宾

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T04:36:01.360

我需要添加

```
$("#menu").wijmenu({
    orientation: 'vertical'
}); 
```

进入 LoadAjaxContent 函数。

```
function LoadAjaxContent(href) {
    $.ajax({
        url: href,
        success: function(data) {
            $("#menuAjax").html(data).fadeIn('slow');
            $("#menu").wijmenu({
                orientation: 'vertical'
            });
        }
    });
}​ 
```

# c - 引用数组。递增和保存索引

> ID：12926910
> 
> 赞同：0
> 
> 时间：2012-10-17T04:00:26.340
> 
> 标签：c, arrays, function, pointers

通过“Learning C the hard way”学习C，并做一些我自己的练习。我偶然发现了以下问题。

假设我有以下结构：

```
struct Person {
  char name[MAX_INPUT];
  int age;
} 
```

在 main() 中，我声明了以下数组：

```
int main(int argc, char *argv[]) { 
  struct Person personList[MAX_SIZE];
  return 0;
} 
```

现在假设有 2 个函数（main 调用 function1，后者调用 function2）我想将一个人保存在我在 main 函数中声明的数组中，如下所示：

```
int function2(struct Person *list) {
  struct Person *prsn = malloc(sizeof(struct Person));
  assert(prsn != NULL); // Why is this line necessary?

  // User input code goes here ... 

  // Now to save the Person created
  strcpy(prsn->name, nameInput);
  ctzn->age = ageInput;
  list = prsn; // list was passed by reference by function1, does main need to pass the array by
               // reference to function1 before?

  // This is where I get lost:
  // I want to increment the array's index, so next time this function is called and a 
  // new person needs to be saved, it is saved in the correct order in the array (next index)
} 
```

因此，如果我返回我的主要功能并想像这样打印保存在其中的前三个人：

```
...
int i = 0;
for(i = 0; i < 3; i++) {
  printf("%s is %d old", personList[i].name, personList[i].age);
}
... 
```

基本上如何在应用程序中引用数组，同时保持它的持久性。请记住，main 不一定直接调用使用数组的函数。我怀疑有人可能会建议将其声明为全局变量，那么替代方案是什么？双指针？双指针是如何工作的？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:30:09.330

这里有一些提示（不是双关语！）可以帮助您：

1.  就目前而言，该行为结构数`struct Person personList[MAX_SIZE];`分配内存。如果这是您正在做的事情，您实际上不需要分配更多内存。`MAX_SIZE``Person``malloc`

2.  但是，您可以通过仅在实际需要人员时分配内存来节省一些内存。在这种情况下，您希望`personList`数组包含*指向*结构的指针，`Person`而不是结构本身（您使用创建的`malloc`）。

    那是：`struct Person * personList[MAX_SIZE];`

    创建人员时：

    `struct Person * person = (struct Person *) malloc(sizeof(struct Person));`

    `personList[index] = person;`

    当您使用人员列表时：`printf("%s", personList[index]->name);`

3.  数组不会神奇地记录任何特殊索引。你必须自己做。一种方法是始终将数组的长度传递给需要它的每个函数。

    `void function1(struct Person * personList, int count);`

    如果您想在返回调用函数时修改 count 变量，可以通过引用传递它：

    `void function1(struct Person * personList, int * count);`

    一种可能更健壮的方法是将计数和数组一起封装到另一个结构中。

    `struct PersonList { struct Person * list[MAX_SIZE]; int count; }`

    这样，您可以编写一组始终连贯地处理列表数据的函数——每当您添加一个新人时，您总是递增计数，等等。

    `int addNewPerson(struct PersonList * personList, char * name, int age);`

我认为这应该对你有帮助。如果您想更详细地解释某些内容，请发表评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T04:15:59.833

首先，malloc 不保证从内存中分配新空间并返回。如果无法分配请求的内存，则返回 NULL 值。这就是为什么需要检查指针的原因。

在调用函数 2 时，您可以使用一个保存函数 1 中数组当前计数的变量来传递下一个元素的地址；

function2(&personList[count++]);

然后将当前计数从 function1 返回到主函数；

int size=function1(personList);

# ssl - 如何在 EasyPHP 中安装安全证书？

> ID：12926911
> 
> 赞同：0
> 
> 时间：2012-10-17T04:00:42.793
> 
> 标签：ssl, easyphp

我想使用 cURL 网站上的 cacert.pem 证书，以便我的 EasyPHP 服务器可以使用 cURL 来使用 SSL 检索站点。我该如何安装它，这就是我需要做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:06:24.560

我按照这里的说明解决了这个问题：http: [//kb.ucla.edu/articles/how-do-i-use-curl-in-php-on-windows](http://kb.ucla.edu/articles/how-do-i-use-curl-in-php-on-windows)

# visual-studio-2010 - 使用 Visual Studio 2010 安装

> ID：12926914
> 
> 赞同：3
> 
> 时间：2012-10-17T04:01:20.607
> 
> 标签：visual-studio-2010, installation

我需要创建安装文件来安装这些：
-Web 应用程序
-Win 服务-运行
一些 sql 脚本。

我想在一个设置中完成所有操作。例如，我想制作像 CreateSetup 这样的方法，并在该方法中创建安装文件，该文件将包含上述三件事的安装/运行。

如果您有一些链接或想法如何做到这一点，请分享。

先感谢您。如果我遇到一些解决方案，我也会在这里发布给其他人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:24:14.253

[坐下来学习WIX](http://wixtoolset.org/)可能非常值得您花时间，这似乎是处理更复杂设置的首选方法。我还没有完成这里列出的任务，但我确实设法拥有一个在 Windows Mobile 设备上设置应用程序的安装程序。

环顾四周，您似乎可以安装 Web 应用程序：http: [//www.codeproject.com/Articles/115036/Creating-WIX-Installer-for-ASP-NET-Web-Application](http://www.codeproject.com/Articles/115036/Creating-WIX-Installer-for-ASP-NET-Web-Application)

还有一个 Windows 服务：[http ://blog.tentaclesoftware.com/archive/2009/01/01/21.aspx](http://blog.tentaclesoftware.com/archive/2009/01/01/21.aspx)

并运行 SQL 脚本：[How to run sql script to create database using Wix](https://stackoverflow.com/questions/6906716/how-to-run-sql-script-to-create-database-using-wix)

看起来您甚至可以通过 Windows 安装程序 GUI 捕获构建 SQL 字符串所需的内容，并使用它来知道在哪里运行 SQL 脚本，并设置任何需要的连接字符串。

# python - 如何设置具有两种不同属性的用户类型的 Django 模型

> ID：12926922
> 
> 赞同：6
> 
> 时间：2012-10-17T04:02:48.120
> 
> 标签：python, database-design, heroku, django-models, django-1.4

*注意：鉴于 Django 用户模型自 1.5 版以来的更新，我[再次问了这个问题。](https://stackoverflow.com/questions/20779068/setting-up-two-different-types-of-users-in-django-1-5-1-6)*

我正在重建和改进现有的 Django 站点，并将其从 Webfaction 转移到 Heroku，从 Amazon 的 SimpleDB 转移到 Heroku Postgres（尽管在开发时在 Sqllite3 上进行本地测试）。我正在做的很多事情都是转而使用内置的 Django 功能，例如 Django 管理员、用户身份验证等。

从概念上讲，该网站有两种用户：学生和企业。这两种类型的用户具有完全不同的权限和存储的有关他们的信息。情况如此之多，以至于在网站的原始结构中，我们设置数据模型如下：

```
Users
    ID (primary_key)
    Business_or_Student ('B' if business, 'S' if student)
    email (unique)
    password (hashed, obviously)
    ...

Students
    ID (Foreignkey on Users)
    <more information>
    ...

Businesses
    ID (Foreignkey on Users)
    <more information>
    ... 
```

这对我们来说效果很好，我们在用户表中有基本的用户信息，然后在学生和企业表中有更详细的信息。获取用户的完整个人资料需要以下伪代码：

```
def get_user_profile(id):
    if Users(id=id).Business_or_Student = 'B':
        return Businesses(id=id)
    else:
        return Students(id=id) 
```

在移动过程中，我发现 Django 的内置`User`对象的功能非常有限，我不得不使用`UserProfile`我创建的类对其进行扩展，然后添加额外`Student`的和`Business`表。鉴于我在 Django 管理员中对此进行的所有修补，并且由于我总是以不同的方式进行操作，因此对 Django 模型相对不熟悉，我不确定这是否是最好的方法，或者我是否应该只需将企业和学生的*所有*信息粘贴在`UserProfile`表中，然后将两者与不同的组区分开来，或者如果甚至有某种方法可以在内置`User`对象中完成这一切。

由于企业和学生也有不同的界面，我正在认真考虑在我的 Django 项目中将两者设置为不同的应用程序，从而完全分离它们的视图、模型等。这看起来像：

```
MyProject/
    MyProject/ (project folder, Django 1.4)
    mainsite/
    students/
    businesses/ 
```

我最担心的问题之一是 Django Admin。在扩展`User`中，我已经添加了以下代码：

```
class UserProfileInline(admin.StackedInline):
    model = UserProfile
    can_delete = False
    verbose_name_plural = 'profile'

class UserAdmin(UserAdmin):
    inlines = (UserProfileInline, ) 
```

但是，我希望用户的业务或学生方面的信息在`User`被拉起时显示在 Django 管理员中，但是模型的`ForeignKey`一部分在`Student`and`Business`模型中，因为每个`Student`/`Business`都有一个`User`但每个`User`只有一个`Student` **或**`Business`与之相关的一个物体。我不确定如何为管理员添加条件内联。

**问题：鉴于这种结构和这些问题，建立这个站点的最佳方式是什么，尤其是数据模型？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T04:17:56.933

这不是一个完整的解决方案，但它会让您知道从哪里开始。

*   在 中创建`UserProfile`模型`mainsite`。这将包含两种类型用户的任何共同属性。将其`User`与具有`OneToOne(...)`字段的模型相关联。
*   在每个应用程序中再创建两个模型，（学生/企业）`Business`和`Student`，它们都`OneToOne`与`UserProfile`（或继承自`UserProfile`）有关系。这将包含特定于该类型用户的属性。文档：[多表继承](https://docs.djangoproject.com/en/dev/topics/db/models/#multi-table-inheritance)/ [OneToOne 关系](https://docs.djangoproject.com/en/dev/topics/db/examples/one_to_one/)
*   您*可以*添加一个字段`UserProfile`来区分它是企业还是学生的个人资料。

然后，对于内容管理：

*   定义`save()`自动检查冲突的功能（例如，两者都有一个条目`Business`并`Student`与 a 相关联`UserProfile`，或者没有条目）。
*   `__unicode__()`在必要时定义表示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T09:49:33.913

我希望我理解你的问题......也许这可以工作？您创建一个抽象的 CommonInfo 类，该类继承到不同的子类（学生和企业）中

```
class CommonUser(models.Model):      
    user = models.OneToOne(User)
    <any other common fields>

    class Meta:
        abstract = True

class Student(CommonUser):
    <whatever>

class Business(CommonUser):
    <whatever> 
```

在这种情况下，模型将在数据库中创建，每个表中都有基类字段。因此，当您与学生一起工作时，您会运行一个

```
students = Students.objects.get.all() 
```

获取所有学生，包括公共信息。

然后为每个学生做：

```
for student in students:
    print student.user.username 
```

业务对象也是如此。

要让学生使用用户：

```
student = Student.objects.get(user=id) 
```

The username will be unique thus when creating a new Student or Business it will raise an exception if an existing username is being saved.

Forgot to add the [link](https://docs.djangoproject.com/en/dev/topics/db/models/#model-inheritance)

# python - WinUSB.DLL 和 Python：特别是 WinUsb_Initialize

> ID：12926923
> 
> 赞同：1
> 
> 时间：2012-10-17T04:02:50.127
> 
> 标签：python, python-2.7, ctypes, windows-7-x64

我一直在[这里](http://msdn.microsoft.com/en-us/library/windows/hardware/ff540174%28v=vs.85%29.aspx)关注 WinUsb MSDN HowTo ，到目前为止它运行良好。我已经在指南中指出我必须从 WinUsb DLL 调用 WinUsb_Initialize() 函数。这就是我卡住的地方。到目前为止，我的代码是这样的，你无疑会确定我已经从 PyWinUSB 的 WinAPI.py 模块中撕下了很多东西。[在此处](https://github.com/rene-aguirre/pywinusb)插入无偿感谢并感谢 PyWinUSB 的创建者。

```
import ctypes
import platform
from ctypes import byref, POINTER, Structure, sizeof, c_ulong
from ctypes.wintypes import DWORD, WORD, BYTE, HANDLE, LPCWSTR, ULONG, WCHAR, \
BOOL
TCHAR = WCHAR

winUSB          = ctypes.windll.winusb
winHID          = ctypes.windll.hid
kernel32        = ctypes.windll.kernel32
setupAPI        = ctypes.windll.setupapi

GENERIC_READ    = (-2147483648)
GENERIC_WRITE   = (1073741824)
FILE_SHARE_READ = 1
FILE_SHARE_WRITE = 2
OPEN_EXISTING   = 3
FILE_FLAG_OVERLAPPED    = 1073741824

if platform.architecture()[0].startswith('64'):
    WIN_PACK = 8
else:
    WIN_PACK = 1

class GUID(ctypes.Structure):
    """GUID Windows OS Structure"""
    _pack_ = 1
    _fields_ = [("data1", DWORD),
                ("data2", WORD),
                ("data3", WORD),
                ("data4", BYTE * 8)]

    def __init__(self, data1 = None, data2 = None, data3 = None, data4 = None):
        if data1 is not None:
            self.data1 = data1
        if data2 is not None:
            self.data2 = data2
        if data3 is not None:
            self.data3 = data3
        if data4 is not None:
            self.data4 = data4

class SP_DEVICE_INTERFACE_DATA(Structure):
    """
    typedef struct _SP_DEVICE_INTERFACE_DATA {
        DWORD       cbSize;
        GUID        InterfaceClassGuid;
        DWORD       Flags;
        ULONG_PTR   Reserved;
        } SP_DEVICE_INTERFACE_DATA,  *PSP_DEVICE_INTERFACE_DATA
    """
    _pack_ = WIN_PACK
    _fields_ = [("cb_size",                 DWORD),
                ("interface_class_guid",    GUID),
                ("flags",                   DWORD),
                ("reserved",                POINTER(ULONG))]

    def __init__(self):
        self.cb_size = sizeof(SP_DEVICE_INTERFACE_DATA)

class SP_DEVICE_INTERFACE_DETAIL_DATA(Structure):
    """
    typedef struct _SP_DEVICE_INTERFACE_DETAIL_DATA {
        DWORD cbSize;
        TCHAR DevicePath[ANYSIZE_ARRAY];
    } SP_DEVICE_INTERFACE_DETAIL_DATA, *PSP_DEVICE_INTERFACE_DETAIL_DATA;
    """

    _pack_ = WIN_PACK
    _fields_ = [("cb_size", DWORD),
                ("device_path", TCHAR * 1)] #device_path[1]

    def __init__(self):
        self.cb_size = sizeof(SP_DEVICE_INTERFACE_DETAIL_DATA)

    def get_string(self):
        """Retreive stored string"""
        return ctypes.wstring_at(byref(self, sizeof(DWORD)))

class SP_DEVINFO_DATA(Structure):
    """
    typedef struct _SP_DEVINFO_DATA {
      DWORD     cbSize;
      GUID      ClassGuid;
      DWORD     DevInst;
      ULONG_PTR Reserved;
    } SP_DEVINFO_DATA, *PSP_DEVINFO_DATA;
    """
    _pack_ = WIN_PACK
    _fields_ = [("cb_size",     DWORD),
                ("class_guid",  GUID),
                ("dev_inst",    DWORD),
                ("reserved",    POINTER(ULONG))]

    def __init__(self):
        self.cb_size = sizeof(SP_DEVINFO_DATA)

class DIGCF:
    """
    Flags controlling what is included in the device information set
    built by SetupDiGetClassDevs
    """
    DEFAULT         = 0x00000001
    PRESENT         = 0x00000002
    ALLCLASSES      = 0x00000004
    PROFILE         = 0x00000008
    DEVICEINTERFACE = 0x00000010

def GetHidGuid():
    "Get system-defined GUID for HIDClass devices"
    hid_guid = GUID()
    winHID.HidD_GetHidGuid(byref(hid_guid))
    return hid_guid

SetupDiGetClassDevs             = setupAPI.SetupDiGetClassDevsW
SetupDiGetClassDevs.restype     = HANDLE
SetupDiGetClassDevs.argtypes    = [
    # __in_opt      const GUID *ClassGuid,
    # __in_opt      PCTSTR Enumerator,
    # __in_opt      HWND hwndParent,
    # __in          DWORD Flags,
    POINTER(GUID),
    LPCWSTR,
    HANDLE,
    DWORD]

SetupDiGetDeviceInterfaceDetail             = setupAPI.SetupDiGetDeviceInterfaceDetailW
SetupDiGetDeviceInterfaceDetail.restype     = BOOL
SetupDiGetDeviceInterfaceDetail.argtypes    = [
    # __in          HDEVINFO DeviceInfoSet,
    # __in          PSP_DEVICE_INTERFACE_DATA DeviceIn,
    # __out_opt     PSP_DEVICE_INTERFACE_DETAIL_DATA DeviceInterfaceDetailData,
    # __in          DWORD DeviceInterfaceDetailDataSize,
    # __out_opt     PDWORD RequiredSize
    # __out_opt     PSP_DEVINFO_DATA DeviceInfoData
    HANDLE,
    POINTER(SP_DEVICE_INTERFACE_DATA),
    POINTER(SP_DEVICE_INTERFACE_DETAIL_DATA),
    DWORD,
    POINTER(DWORD),
    POINTER(SP_DEVINFO_DATA)]                                   

devGuid     = GUID(0x2518E22E, 0x0F35, 0x11E2, (BYTE * 8)(0xB1, 0xD5, 0x6C, 0xF0,
                                                          0x49, 0x73, 0x78, 0x72))
classGuid   = GetHidGuid()
                #GUID(0x745A17A0, 0x74D3, 0x11D0, (BYTE * 8)(0xB6, 0xFE, 0x00, 0xA0,
                #                                            0xC9, 0x0F, 0x57, 0xDA))

derp        = SetupDiGetClassDevs(
                byref(classGuid), None, None,
                (DIGCF.PRESENT | DIGCF.DEVICEINTERFACE))

def stepDevices(herp, index = 0):
    devInterfaceData = SP_DEVICE_INTERFACE_DATA()
    if setupAPI.SetupDiEnumDeviceInterfaces(
        herp, None, byref(classGuid), index, byref(devInterfaceData)):
        yield devInterfaceData
        del devInterfaceData
    else:
        print(kernel32.GetLastError())

def enumDevices(herp):
    index               = 0    
    devInterfaceData    = SP_DEVICE_INTERFACE_DATA()
    while setupAPI.SetupDiEnumDeviceInterfaces(
        herp, None, byref(classGuid), index, byref(devInterfaceData)):        
        print(kernel32.GetLastError())
        yield devInterfaceData
        index += 1
    del devInterfaceData

def getDetail(herp, devData, devInfo = None):

    reqSize     = c_ulong(0)
    devDetail   = SP_DEVICE_INTERFACE_DETAIL_DATA()

    SetupDiGetDeviceInterfaceDetail(
        herp, byref(devData), None, 0, byref(reqSize), None)

    ctypes.resize(devDetail, reqSize.value)

    SetupDiGetDeviceInterfaceDetail(
        herp, byref(devData), byref(devDetail),
        reqSize, None, byref(devInfo))

    return devDetail.get_string()

dev = stepDevices(derp).next()
devInfo = SP_DEVINFO_DATA()
devString = getDetail(derp, dev, devInfo)

winUSBHandle = kernel32.CreateFileW(
    devString, GENERIC_READ | GENERIC_WRITE, FILE_SHARE_READ | FILE_SHARE_WRITE, None, OPEN_EXISTING, FILE_FLAG_OVERLAPPED, None)

#winUSB.WinUsb_Initialize(winUSBHandle, <what goes here?>) 
```

我尝试创建一个简单的句柄并将 byref(handle) 作为第二个参数传递给函数，但句柄值保持为 None。我不知道 Python 和 WinUSB.DLL 做了多少工作，但如果有人能指出我正确的方向，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:46:53.777

文档说它是一个 PWINUSB_INTERFACE_HANDLE，它是一个 PVOID，它是一个`c_void_p`in `ctypes`，所以这*应该可以*工作：

```
h = ctypes.c_void_p()
winUSB.WinUsb_Initialize(winUSBHandle, ctypes.byref(h)) 
```

外观是否`winUSBHandle`有效（不是 0 或 -1 或 0xFFFFFFFF）？

**编辑**

如果失败，请确保使用`ctypes`副本，`GetLastError`否则可能不正确。使用以下方法进行库引用：

```
winUSB = ctypes.WinDLL('winusb',use_last_error=True) 
```

并使用：

```
ctypes.get_last_error() 
```

# java - 有 OpenGrok API 吗？

> ID：12926927
> 
> 赞同：12
> 
> 时间：2012-10-17T04:03:13.703
> 
> 标签：java, perl, api, search, opengrok

[OpenGrok](http://opengrok.github.io/OpenGrok/)有 API吗？我有兴趣在 Perl 或 Java 中挖掘结果。目前，我可以对结果执行 HTML 报废，但似乎不太理想。

根据其网站，它利用了 Lucene，但除了通过 HTML 之外，没有关于如何连接到它的真实信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-04-17T17:51:25.790

从 OpenGrok 0.13 开始，有一个简单的 REST API。

OpenGrok 1.0 有一个[JSON API](https://github.com/oracle/opengrok/wiki/Web-services)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T18:28:48.173

Opengrok 支持一个[命令行界面](https://github.com/OpenGrok/OpenGrok/wiki/How-to-install-OpenGrok#wiki-CLI__Command_Line_Interface_Usage)，它可以提供你正在寻找的东西。

例子：

```
$ java -cp ./opengrok.jar org.opensolaris.opengrok.search.Search -R /var/opengrok/etc/configuration.xml -f "My Search" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-31T14:02:50.863

这个 fork 有一个 JSON API：[https://github.com/Goyaka/OpenGrok/blob/f70d78e743a0a389b46ea36c4785182ee8f03e13/src/com/goyaka/opengrok/web/SearchServlet.java](https://github.com/Goyaka/OpenGrok/blob/f70d78e743a0a389b46ea36c4785182ee8f03e13/src/com/goyaka/opengrok/web/SearchServlet.java)

本期讨论它：[https ://github.com/OpenGrok/OpenGrok/issues/422](https://github.com/OpenGrok/OpenGrok/issues/422)

# flv - 如何在 mp4 中使用 elst atom？

> ID：12926932
> 
> 赞同：1
> 
> 时间：2012-10-17T04:03:40.273
> 
> 标签：flv, mp4, transcoding

当我将 mp4 转换为 flv 时，如何计算 elst 列表中的时间偏移量？在 mp4 文件中插入 elst atom 的场景有哪些？

# php - 如何在组件 joomla 2.5 中调用模块时设置布局

> ID：12926935
> 
> 赞同：1
> 
> 时间：2012-10-17T04:04:03.137
> 
> 标签：php, joomla, joomla2.5

在组件中如何调用模块：

```
tmpl
---default.php
---hello.php
mod_hello.php
mod_hello.xml
helper.php    

$module = JModuleHelper::getModule('mod_hello');
echo JModuleHelper::renderModule ($module ); 
```

当我`echo`使用 layout 的结果时`default`，如何显示模块 mod_hello 的布局是`hello`layout

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:07:02.920

How I did it:

There is an $attribs array which is in the module's context so you can use it to pass the layout

```
$module = JModuleHelper::getModule('mod_hello');
$attribs = array('layout'=>'hello');
echo JModuleHelper::renderModule ($module,$attribs); 
```

And after that in mod_hello.php:

```
$layout = isset($attribs['layout'])?$attribs['layout']:'default';
require(JModuleHelper::getLayoutPath('mod_hello',$layout)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T05:13:42.683

阅读下面的论坛帖子，这可能会对您有所帮助

[http://forum.joomla.org/viewtopic.php?f=544&t=356176](http://forum.joomla.org/viewtopic.php?f=544&t=356176)

```
$modules =& JModuleHelper::getModules('mod_hello'); 
foreach ($modules as $module) 
{ 
echo JModuleHelper::renderModule($module); 
} 

$document = &JFactory::getDocument();
$renderer = $document->loadRenderer('modules');
$options = array('style'=>'raw');
echo $renderer->render('mod_hello',$options,null); 
```

有两种调用 Module 的方法：

在 Content/Article 中调用模块：您可以使用 {loadposition position}（感谢 plgContentLoadModule - /plugins/content/loadmodule.php）

以编程方式调用模块（模块调用另一个模块或组件调用模块）：

```
A. Call Module by position :

$position = 'left';
$contents = '';
foreach (JModuleHelper::getModules($position) as $mod) {
$contents .= $renderer->render($mod, $params);
}

B. Call Module by name :

$modName = 'mostread '; // not mod_mostread 
$modTitle = 'Popular';
$mod = JModuleHelper::getModule($modName, $modTitle);
$content = JModuleHelper::renderModule($mod); 
```

# sql - vb.net中的sql语法错误

> ID：12926937
> 
> 赞同：0
> 
> 时间：2012-10-17T04:04:10.583
> 
> 标签：sql, vb.net, sql-server-2008-r2, sqlcommand

我有以下 vb.net 函数，它在 sql 命令文本中有一个语法错误，我似乎无法弄清楚

```
Private Sub addsupporderidsinbookedtoinprocess()
        Try
            Dim cnn3 As New SqlConnection(connetionString)
            Dim sqlcmd3 As New SqlCommand("SELECT supporderidinprocess FROM ordersinprocess", cnn3)
            sqlcmd3.CommandText = "INSERT INTO ordersinprocess(supporderidinprocess) VALUES(SELECT IDENT_CURRENT('[supporder]'))"
            cnn3.Open()
            sqlcmd3.ExecuteNonQuery()
            sqlcmd3.Parameters.Clear()
            cnn3.Close()
        Catch ex As SqlException
            MsgBox(ex.Message)
        End Try
    End Sub 
```

错误在这部分

```
...VALUES(SELECT IDENT_CURRENT('[supporder]')) 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T04:05:06.833

语句中不应有`VALUES`关键字。`INSERT INTO...SELECT`试试这样的，

```
INSERT INTO ordersinprocess(supporderidinprocess) 
SELECT IDENT_CURRENT('[supporder]') 
```

# javascript - 使用 Rails 和 Slim 自定义 Javascript 类型

> ID：12926940
> 
> 赞同：3
> 
> 时间：2012-10-17T04:04:22.550
> 
> 标签：javascript, ruby-on-rails, slim-lang

在 Rails 中，javascript_tag 和 javascript_include_tag 都将 type 属性呈现为

> 类型="文本/javascript"

我需要自定义这个属性。我们的应用程序使用[Slim](https://github.com/stonean/slim)语法，这使得这变得更加困难。

> 脚本 src="mathjax_config" type="text/x-mathjax-config"

^ 不会出错，但甚至不包含文件

> javascript_tag[type="text/x-mathjax-config"] javascript 代码在这里

^ 抛出错误

我希望避免将文件从苗条中分离出来。

Ruby 版本 1.9.3 Rails 版本 3.2.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:54:10.183

由于您正在修改 type 属性，因此您需要覆盖 javascript_tag 帮助器或编写自己的帮助器以使其正常工作。这种语法不那么优雅，但应该可以工作：

脚本 src=asset_path("mathjax_config") type="text/x-mathjax-config"

请注意，这是 slim/haml 语法 - erb 中的 YMMV。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:43:50.270

未包含的文件不是 Slims 的错误。Slim 对属性的内容是不可知的，所以它会愉快地渲染

```
script src="mathjax_config" type="text/x-mathjax-config" 
```

进入

```
<script src="mathjax_config" type="text/x-mathjax-config"></script> 
```

此外，据我所知，浏览器应该很乐意加载类型不是“text/javascript”的脚本，并且您应该能够使用它们的 id 访问它们。

您的方法是正确的，并且未包含的脚本必须有不同的原因（例如找不到 src 中指定的文件）。

# c++ - 多维数组动态分配内存图

> ID：12926945
> 
> 赞同：0
> 
> 时间：2012-10-17T04:04:55.900
> 
> 标签：c++, dynamic, multidimensional-array

这是我知道的动态分配多维数组的两种方法：

```
int (*numbers)[4] = new int[3][4] 
```

和

```
int **numbers = new int*[3]; 
```

这两个在内存中代表相同的东西吗？实际上，它们代表什么以及如何代表？（内存图真的很有帮助！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T04:10:08.670

不，第一个将创建 12 个整数 (3*4)，在内存中它们将按顺序排列。第二个创建3个指向整数的指针

即第一个将像

```
[1,2,3,4][5,6,7,8][9,10,11,12] 
```

所以你有 3 个 4 元素的整数数组，而第二个例子看起来更像

```
[0x12345678,0x12345678,0x12345678] 
```

即，3个未初始化的整数指针

# list - 在 common lisp 中复制结构列表

> ID：12926946
> 
> 赞同：3
> 
> 时间：2012-10-17T04:04:59.343
> 
> 标签：list, struct, copy, common-lisp, pass-by-value

我有一个结构列表，我想编写一个函数来改变结构中的一些槽而不影响原始列表。我尝试使用复制列表，但它不够深；插槽值也在原始列表中更改。我的问题是，是否有一个内置函数可以满足我的需求？还是我应该自己编写一个？谢谢你。

编辑：

我继续编写自己的函数，是否有内置函数可以做到这一点？

```
(defun deep-copy (li)
    (if (null li)
        nil
        (cons (copy-structure (car li)) (deep-copy (rest li))))) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T06:43:00.320

预定义该功能几乎没有价值。

您的代码只是：

```
(mapcar #'copy-structure some-list) 
```

# build - 在错误的本地 POM 处找不到工件和“parent.relativePath”点的不可解析父 POM

> ID：12926952
> 
> 赞同：27
> 
> 时间：2012-10-17T04:05:48.447
> 
> 标签：build, maven-3, packaging, pom.xml

我是新手。

我有一个项目，我尝试使用 maven3 构建。

当我运行命令时，`mvn -X clean install`我得到了错误。

```
[root@localhost]# mvn -X clean install
Apache Maven 3.0.4 (r1232337; 2012-01-17 14:14:56+0530)
Maven home: /usr/local/maven
Java version: 1.6.0_24, vendor: Sun Microsystems Inc.
Java home: /usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre
Default locale: en_US, platform encoding: UTF-8
OS name: "linux", version: "2.6.32-279.9.1.el6.x86_64", arch: "amd64", family: "unix"
[INFO] Error stacktraces are turned on.
[DEBUG] Reading global settings from /usr/local/maven/conf/settings.xml
[DEBUG] Reading user settings from /root/.m2/settings.xml
[DEBUG] Using local repository at /root/.m2/repository
[DEBUG] Using manager EnhancedLocalRepositoryManager with priority 10 for /root/.m2/repository
[INFO] Scanning for projects...
[DEBUG] Could not find metadata com.test.ctrl:ctrl-build:0.0.17-SNAPSHOT/maven-metadata.xml in local (/root/.m2/repository)
[ERROR] The build could not read 1 project -> [Help 1]
org.apache.maven.project.ProjectBuildingException: Some problems were encountered while processing the POMs:
[FATAL] Non-resolvable parent POM for org.openstack:openstack-rhel-rpms:2012.1-SNAPSHOT: Could not find artifact com.test.ctrl:ctrl-build:pom:0.0.17-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ org.openstack:openstack-rhel-rpms:2012.1-SNAPSHOT, /root/test/devenv/openstack-rhel/pom.xml, line 8, column 13

        at org.apache.maven.project.DefaultProjectBuilder.build(DefaultProjectBuilder.java:363)
        at org.apache.maven.DefaultMaven.collectProjects(DefaultMaven.java:636)
        at org.apache.maven.DefaultMaven.getProjectsForMavenReactor(DefaultMaven.java:585)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:234)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
[ERROR]
[ERROR]   The project org.openstack:my-tar:2012.1-SNAPSHOT (/root/test/devenv/mytar/pom.xml) has 1 error
[ERROR]     Non-resolvable parent POM for org.openstack:openstack-rhel-rpms:2012.1-SNAPSHOT: Could not find artifact com.test.ctrl:ctrl-build:pom:0.0.17-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ org.openstack:openstack-rhel-rpms:2012.1-SNAPSHOT, /root/test/devenv/openstack-rhel/pom.xml, line 8, column 13 -> [Help 2]
org.apache.maven.model.resolution.UnresolvableModelException: Could not find artifact com.test.ctrl:ctrl-build:pom:0.0.17-SNAPSHOT
        at org.apache.maven.project.ProjectModelResolver.resolveModel(ProjectModelResolver.java:159)
        at org.apache.maven.model.building.DefaultModelBuilder.readParentExternally(DefaultModelBuilder.java:813)
        at org.apache.maven.model.building.DefaultModelBuilder.readParent(DefaultModelBuilder.java:664)
        at org.apache.maven.model.building.DefaultModelBuilder.build(DefaultModelBuilder.java:310)
        at org.apache.maven.model.building.DefaultModelBuilder.build(DefaultModelBuilder.java:232)
        at org.apache.maven.project.DefaultProjectBuilder.build(DefaultProjectBuilder.java:410)
        at org.apache.maven.project.DefaultProjectBuilder.build(DefaultProjectBuilder.java:379)
        at org.apache.maven.project.DefaultProjectBuilder.build(DefaultProjectBuilder.java:343)
        at org.apache.maven.DefaultMaven.collectProjects(DefaultMaven.java:636)
        at org.apache.maven.DefaultMaven.getProjectsForMavenReactor(DefaultMaven.java:585)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:234)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.sonatype.aether.resolution.ArtifactResolutionException: Could not find artifact com.test.ctrl:ctrl-build:pom:0.0.17-SNAPSHOT
        at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:538)
        at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:216)
        at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArtifact(DefaultArtifactResolver.java:193)
        at org.sonatype.aether.impl.internal.DefaultRepositorySystem.resolveArtifact(DefaultRepositorySystem.java:286)
        at org.apache.maven.project.ProjectModelResolver.resolveModel(ProjectModelResolver.java:155)
        ... 22 more
Caused by: org.sonatype.aether.transfer.ArtifactNotFoundException: Could not find artifact com.test.ctrl:ctrl-build:pom:0.0.17-SNAPSHOT
        at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:528)
        ... 26 more
[ERROR]
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException
[ERROR] [Help 2] http://cwiki.apache.org/confluence/display/MAVEN/UnresolvableModelException 
```

我检查`pom.xml`但无法理解问题所在。我的一些行`pom.xml`如下。

```
 1 <?xml version="1.0"?>
  2 <project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"
  3     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  4   <modelVersion>4.0.0</modelVersion>
  5
  6 <parent>
  7     <groupId>org.openstack</groupId>
  8     <artifactId>openstack-rhel-rpms</artifactId>
  9     <version>2012.1-SNAPSHOT</version>
 10     <relativePath>../openstack-rhel</relativePath>
 11 </parent>
 12
 13     <groupId>org.openstack</groupId>
 14     <artifactId>my-tar</artifactId>
 15     <version>2012.1-SNAPSHOT</version>
 16   <packaging>pom</packaging>
 17   <name>my tar</name>
 18 
```

我还检查了stackoverflow中某些问题的解决方案，例如[不可解析的父POM：找不到工件](https://stackoverflow.com/questions/11677734/non-resolvable-parent-pom-could-not-find-artifact)但无法帮助解决问题。

如果您需要与此问题相关的更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-06-18T06:23:19.537

我遇到了同样的问题。在模块项目中设置父级的相对路径解决了这个问题。

采用`<relativePath>../Parent Project Name/pom.xml</relativePath>`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-17T19:19:19.863

你需要有文件`/root/test/devenv/openstack-rhel/pom.xml`

该文件需要具有以下元素：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.openstack</groupId>
    <artifactId>openstack-rhel-rpms</artifactId>
    <version>2012.1-SNAPSHOT</version>
    <packaging>pom</packaging>
</project> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-18T08:42:19.973

我在使用 Maven 发布插件时遇到了这样的问题。在这种情况下，使用相对路径（即子模块中的父 pom ../parent/pom.xml）解析似乎不起作用，它一直在 Nexus 存储库中寻找已发布的父 pom。将父 pom 移动到模块的父文件夹解决了这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-02T15:12:47.660

我们有同样的问题。

父 pom 文件在我们的本地存储库中可用，但 maven 仍然无法成功尝试从中央存储库或*relativePath*下载它（相对路径中没有文件）。

事实证明，本地存储库中有一个名为*“_remote.repositories”*的文件，它导致了这种行为。从完整的本地存储库中删除所有具有此名称的文件后，我们可以构建我们的模块。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-02T09:09:58.680

你提到的任何方式/root/.m2/settings.xml。

但在我的情况下，我错过了在 Maven 首选项中配置的 settings.xml。 [![在此处输入图像描述](../Images/25f46a038c8691458539bdf85b96b9b3.png)](https://i.stack.imgur.com/fjk1t.png)这样 maven 将从在 settings.xml 中配置的 remote_repository 中搜索 relative_path pom.xml

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-13T06:02:06.590

确保您有 settings.xml。当我错误地删除它时，我遇到了同样的问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-06-17T10:58:10.307

在项目的 pom.xml 文件中，

```
<parent>
<groupId>org.springframework.boot</groupId>
<artifactId>spring-boot-starter-parent</artifactId>
<version>X.X.X.RELEASE</version>
<relativePath> ../PROJECTNAME/pom.xml</relativePath>
</parent> 
```

将相对路径指向同一个 MAVEN 项目 POM 文件为我解决了这个问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-06-20T20:04:26.830

就我而言，原因是一个简单的错字。

```
<parent>
    <groupId>org.sringframework.boot</groupId>
    <artifactId>spring-boot-starter-parent</artifactId>
    <version>2.1.5.RELEASE</version>
</parent> 
```

org.s(p)ringframework中缺少字符`groupId`会导致此错误。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-12-31T09:23:37.727

将相对路径 URL 值赋予 pom.xml 文件
../parentfoldername/pom.xml

# ruby-on-rails-3 - Rails3 ActiveMerchant Paypal Express Checkout Money Transfer

> ID：12926956
> 
> 赞同：1
> 
> 时间：2012-10-17T04:06:13.243
> 
> 标签：ruby-on-rails-3, paypal, activemerchant, express-checkout

我正在尝试在基于 Rails3 的电子商务应用程序中实现 PaypalExpressCheckout。

应用程序中将有两个角色 - 卖方和买方

*   卖家可以创建产品，他可以添加他有效的 Paypal 电子邮件地址来代表他销售的产品获取金额。
*   买家可以购买商品并可以通过Paypal结账，一旦用户交易成功，金额将转入卖家账户。

我在这里面临的问题是，当买家结账时，金额已成功转入卖家账户，但并未从买家账户中扣除。

我从 Paypal 沙箱配置了 API 凭据，下面是我在 ActiveMerchant gem 中使用的方法：

从控制器：

```
def checkout    
values = {:ip => request.remote_ip, 
          :return_url => confirm_paypal_url(@payment), 
          :cancel_return_url => root_url, :shipping => 0, 
          :handling => 0, :tax => 0, 
          :items => get_items(session[:cart])}

response = @payment.setup_purchase(values)                         
redirect_to @payment.redirect_url_for(response.token)   
end    

## CALL BACK
def paypal
# session[:product_users] = [{:amount => '100', :email => 'xx@x.com'}]
session[:product_users].each do |user|
  @payment = if user.last.nil?
    @payment.purchase(:token => params[:token], :payer_id => params[:PayerID], :ip => request.remote_ip)
  else
    @payment.transfer(user[:amount], user[:email])        
  end
  @payment.save  
end

redirect_to billing_thank_you_url(@payment)  
end 
```

从型号：

```
def setup_purchase(options)
  gateway.setup_purchase(amount * 100, options)
end

def transfer(amount, receiver)
 response = gateway.transfer(amount * 100, receiver, :subject => "Payment from XXX")
end 
```

如果有人在这方面帮助我，我将不胜感激。

谢谢你

# sql - 按子句顺序排列不明确的列名错误

> ID：12926957
> 
> 赞同：0
> 
> 时间：2012-10-17T04:06:28.037
> 
> 标签：sql, sql-server, sql-server-2008

为什么这个查询不起作用？

```
SELECT ROW_NUMBER() OVER (
        ORDER BY DocumentID
        ) peta_rn
    , d.DocumentID
    , d.IsReEfiled
    , d.IGroupID
    , d.ITypeID
    , d.RecordingDateTime
    , dbo.GetLatestStatusDateTime(d.DocumentID) AS LatestStatusDatetime
    , dbo.FnCanChangeDocumentStatus(d.DocumentStatusID, d.DocumentID) AS CanChangeStatus
    , d.IDate
    , d.InstrumentID
    , d.DocumentStatusID
    , ig.Abbreviation AS IGroupAbbreviation
    , u.Username
    , j.JDAbbreviation
    , inf.DocumentName
    , it.Abbreviation AS ITypeAbbreviation
    , d.DocumentDate
    , ds.Abbreviation AS DocumentStatusAbbreviation
    , dbo.GetFlatDocumentName(d.DocumentID) AS FlatDocumentName
FROM Documents d
INNER JOIN IGroupes ig
    ON d.IGroupID = ig.IGroupID
LEFT JOIN ITypes it
    ON d.ITypeID = it.ITypeID
LEFT JOIN Users u
    ON u.UserID = d.UserID
LEFT JOIN DocumentStatuses ds
    ON d.DocumentStatusID = ds.DocumentStatusID
LEFT JOIN InstrumentFiles inf
    ON d.DocumentID = inf.DocumentID
INNER JOIN Jurisdictions j
    ON j.JurisdictionID = d.JurisdictionID
WHERE 1 = 1 
```

而这个有效：

```
SELECT ROW_NUMBER() OVER (
        ORDER BY d.DocumentID
        ) peta_rn
    , d.DocumentID
    , d.IsReEfiled
    , d.IGroupID
    , d.ITypeID
    , d.RecordingDateTime
    , dbo.GetLatestStatusDateTime(d.DocumentID) AS LatestStatusDatetime
    , dbo.FnCanChangeDocumentStatus(d.DocumentStatusID, d.DocumentID) AS CanChangeStatus
    , d.IDate
    , d.InstrumentID
    , d.DocumentStatusID
    , ig.Abbreviation AS IGroupAbbreviation
    , u.Username
    , j.JDAbbreviation
    , inf.DocumentName
    , it.Abbreviation AS ITypeAbbreviation
    , d.DocumentDate
    , ds.Abbreviation AS DocumentStatusAbbreviation
    , dbo.GetFlatDocumentName(d.DocumentID) AS FlatDocumentName
FROM Documents d
INNER JOIN IGroupes ig
    ON d.IGroupID = ig.IGroupID
LEFT JOIN ITypes it
    ON d.ITypeID = it.ITypeID
LEFT JOIN Users u
    ON u.UserID = d.UserID
LEFT JOIN DocumentStatuses ds
    ON d.DocumentStatusID = ds.DocumentStatusID
LEFT JOIN InstrumentFiles inf
    ON d.DocumentID = inf.DocumentID
INNER JOIN Jurisdictions j
    ON j.JurisdictionID = d.JurisdictionID
WHERE 1 = 1 
```

如您所见，唯一的区别是我指定了 d.DocumentID。无论如何我可以避免指定`d.DocumentID`，而是只指定`DocumentID`而不使用额外的选择？因为毕竟所有 documentID 都引用同一个值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T04:09:35.780

问题在于这`DocumentID`两个表`InstrumentFiles`和`Documents`，那么查询引擎如何知道您指的是哪一个？

所以简而言之，**否**，您必须`d.DocumentID`在这种情况下指定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T04:10:09.387

不。

您应该提供别名`d`，因为多个表包含`DocumentID`. 引擎对应该在哪里（*或哪个表*）执行订单感到困惑。

# ruby-on-rails - collection_select onchange 事件和选择的 ruby on rails

> ID：12926959
> 
> 赞同：2
> 
> 时间：2012-10-17T04:06:50.850
> 
> 标签：ruby-on-rails, ruby

我正在学习 ruby​​ on rails。在我的项目中，我使用 collection_select。我的代码是

```
<%= collection_select(:sport_name,count,Sport.find( :all, :order => 'id' ), :id, :sport_name, {} ,
    {:selected      => ps.sport.id,
     :include_blank => "Select Sport",
     :onchange      => "hidvalue("+ps.sport.id.to_s+","+count.to_s+")",
     :style         => "margin:1px 0 0;width:210px;" }) %> 
```

`onchange`有效 -`selected`无效

如果我改为

```
<%= collection_select(:sport_name,count,Sport.find( :all, :order => 'id' ),:id, :sport_name,
    {:selected      => ps.sport.id,
     :include_blank => "Select Sport",
     :onchange      => "hidvalue("+ps.sport.id.to_s+","+count.to_s+")" },
    {:style         => "margin:1px 0 0;width:210px;" }) %> 
```

`onchange`不工作，但`selected`工作。我想`onchange`和`selected`一起使用。这段代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T04:39:02.183

好吧，“selected”是一个选项，但“onchange”是您要分配给生成的 HTML 的 HTML 属性。这两种不同类型的东西*应该*在不同的参数中传递给 collection_select。

特别是，“selected”应该作为第五个（“options”）散列中的键/值对传入，而“onchange”应该作为第六个（“html_options”）散列的一部分传入。

有关更多信息，请参阅[http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select)

# javascript - javascript - 如何正确初始化 timezone-js

> ID：12926960
> 
> 赞同：0
> 
> 时间：2012-10-17T04:07:00.867
> 
> 标签：javascript, timezone

我试图学习我从[这里](https://github.com/mde/timezone-js)得到的 timezone-js 。我想我遵循了如何开始的说明。我下载了所有必要的文件，包括 Olson 文件，但是当我检查我的 Firefox 控制台时出现此错误：`Error: Error: Error retrieving "../files/tz/northamerica" zoneinfo files`.

我的代码是（**`jtimezone.html`**）：

```
<html>
<head>
<script type="text/javascript" src="../javascript/jquery/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="../javascript/timezone-js/src/date.js"></script>
<script type="text/javascript">
$(document).ready(function () {
    timezoneJS.timezone.zoneFileBasePath = "../files/tz";
    timezoneJS.timezone.defaultZoneFile = "asia";
    timezoneJS.timezone.init();

    var dt = new timezoneJS.Date('10/31/2008', 'America/New_York');
    alert(dt);
});
</script>
</head>
<body>
</body>
</html> 
```

我想我已经为 zoneFileBasePath 设置了文件路径。无论如何，我的 html 位于 `/home/idiotboy/Documents/timzone_test/html`. 下载的 timezone-js 位于`/home/idiotboy/Documents/timzone_test/javascript`. `tz`文件位于`/home/idiotboy/Documents/timzone_test/files`.

请帮忙。如果您可以建议一种更好/更简单的方法来处理 javascipt 中的时区，请这样做。我还是个初学者。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:24:21.657

浏览器不允许 AJAX 访问本地文件系统。您需要通过 Apache 或 Nginx 为您提供页面，并使用 URL localhost 或 127.0.0.1 打开您的 html

# css - css 文件的动态加载在 IE 中不起作用

> ID：12926962
> 
> 赞同：0
> 
> 时间：2012-10-17T04:07:19.530
> 
> 标签：css, asp.net-mvc, internet-explorer, razor

我发现的几乎解决方案是使用 javascript/jquery，而对我而言，它应该是 MVC 中的视图。一个参考是[here](https://stackoverflow.com/questions/1184950/dynamically-loading-css-stylesheet-doesnt-work-on-ie)

所以我以这种方式设置了我的css文件：

```
@{
ViewBag.Stylesheets = new string[] {
    "global/style.css",
    "global/links.css",
    .
    .
    .
    . 40 plus more css files...
}; 
```

并加载它们：

```
@foreach (string stylesheet in
ViewBag.Stylesheets is string[] ? ViewBag.Stylesheets : new string[] { @"style.css" })
{ 
    <link href="@Url.ContentArea("~/css/" + stylesheet)" rel="stylesheet" />
} 
```

所有这些都是内部观点。我有 48 个 css 文件，我注意到 IE9 只加载 37 个 css 文件。由于某些原因，目前无法在一些文件中组合 css 代码。那么如何在 IE 中加载所有这些 css 文件呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T06:05:46.953

[`has a limit`](http://blogs.telerik.com/aspnetmvcteam/posts/10-05-03/internet-explorer-css-limits.aspx)每页 31 个 CSS 文件的Internet Explorer 。此限制已在 IE 10 中删除。

因此，如果您需要支持 IE <= 9，您有 2 种可能性：

1.  重新组织您的 CSS 规则，使您的文件少于 31 个
2.  结合它们（推荐）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T04:20:36.617

`~`是不需要的。你可以有`href="/css/file.css"`

# php - 您可以将资源传递给 PHP 中的查询参数吗？

> ID：12926966
> 
> 赞同：-2
> 
> 时间：2012-10-17T04:07:55.403
> 
> 标签：php, mysql, database

所以我有一个声明：

```
 $r = mysql_query("Select type from boats where type like '%speed%'"); 
```

然后我可以将构造的资源应用于另一个查询吗？

```
 $r2 = mysql_query("select * from assets where type in ".$r); 
```

我正在尝试做类似的事情

```
 select * from assets where type in (select type from boats where type like '%speed%') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T04:14:17.360

不，你不能这样做。

但是你可以结合sql。

```
$sql = "Select type from boats where type like '%speed%'";
$r = mysql_query($sql);
$r2 = mysql_query("select * from assets where type in ($sql)"); 
```

或者，您可以使用联接来代替子查询。

```
$r2 = mysql_query("select a.* from assets a 
                   join boats b on a.type = b.type and b.type like '%speed%'"); 
```

# mediawiki - MediaWiki 中当前用户的变量

> ID：12926969
> 
> 赞同：7
> 
> 时间：2012-10-17T04:08:20.413
> 
> 标签：mediawiki, mediawiki-templates

在 MediaWiki 中，您可以使用变量（“Magic Word”），例如

```
{{PAGENAME}} 
```

或者

```
{{REVISIONDAY}} 
```

获取与正在查看的当前页面相关的特定信息。是否有类似的变量（或者可能是不同的方式）来获取登录到 wiki 的当前用户，例如

```
{{USERNAME}} 
```

*上下文：尝试使用 Semantic MediaWiki 中的#ask 查询来缩小结果页面的列表，以显示只有用户创建或编辑的页面：*

```
{{#ask: [[Case Reflection:+]] [[Contributing User::{{USERNAME}}]]
 | format=template
 | template=Case Reflection Form Summary
 | link=all
 | sort=Last Edited
 | order=DESC
 | default=You have no case reflections related to this Case Study.}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:40:13.000

有很多扩展，例如[GetUserName](https://www.mediawiki.org/wiki/Extension%3aGetUserName)、[MyVariables](https://www.mediawiki.org/wiki/Extension%3aMyVariables)、[UserInfo](https://www.mediawiki.org/wiki/Extension%3aUserInfo)。但是，显示用户名的整个概念与页面缓存不兼容（每次有人查看页面时都需要再次解析页面），因此通常不是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-06T05:53:35.190

我只是在寻找同样的东西，看看我是否可以在没有扩展的情况下做到这一点。看起来有一个默认功能允许这样做，*只要您希望它作为将静态版本写入页面的一部分，*而不是说“你好，用户名！” （最后一种情况是他们没有将其作为标准变量实现的原因，因为它会导致缓存问题。）

[维基媒体功能请求 T14733](https://phabricator.wikimedia.org/T14733)解析为：

```
{{subst:REVISIONUSER}} 
```

{{REVISIONUSER}} 将动态显示最后一个编辑器，这通常不是您想要的。但是，例如，如果您想制作一个包含用户句柄作为某些插入文本的一部分的模板，这应该可以完成工作。我认为在你上面的例子中，

```
[[Contributing User::{{subst:REVISIONUSER}}]] 
```

（我不确定 Semantic Mediawiki 是否会让你摆脱替换，但如果确实如此，进一步的说明在[手册：替换，多级替换部分](http://www.mediawiki.org/wiki/Manual:Substitution#Multilevel_substitution)。）

# clojure - 除了 eclipse 之外，还有什么好的编辑器可以打印 clojure 代码？

> ID：12926972
> 
> 赞同：4
> 
> 时间：2012-10-17T04:08:38.100
> 
> 标签：clojure

我喜欢 clojure 并使用 textmate/sublime 文本，但每次我打印出源代码时，它都不是语法颜色，而且行都搞砸了。是否有可以完成这项工作的在线/离线编辑器？每次我想打印一些东西时，我都不想加载 Eclipse

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T04:57:56.810

我之前非常成功地从 Emacs 打印了代码。`M-x print-buffer`应该这样做。

您也可以将代码粘贴到[refheap](https://www.refheap.com)并单击“最大化”链接并从那里打印，但它不会自动换行。

有关 Emacs 彩色打印，请参阅[http://stuff.mit.edu/people/lucylim/emacs_print_syntaxhighlighting.html](http://stuff.mit.edu/people/lucylim/emacs_print_syntaxhighlighting.html)。

# c# - 写入只读访问器c#

> ID：12926973
> 
> 赞同：4
> 
> 时间：2012-10-17T04:08:40.730
> 
> 标签：c#, asp.net, accessor

我正在尝试制作类似于 ASP.NET 的 User.Identity.Name 的东西。我已经让类来保存信息，但我不知道如何写入变量，因为我只添加了 get{};

```
private static string _firstName; 
public static string FirstName 
{ 
    get { return _firstName; } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T04:14:50.943

有两种方法可以做到这一点。第一种方法是添加私有设置器。

```
private static string _firstName; 
public static string FirstName 
{ 
    get { return _firstName; }
    private set { _firstName = value; }
} 
```

另一个选项是向您的构造函数添加一个参数并在其中设置值。

```
public YourClass(string firstName)
{
    _firstName = firstName;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T04:12:55.970

```
public class YourAwesomeClass
  {
      private static string _firstName;
      public static string FirstName
       {
            get { return _firstName; }
        }
    public YourAwesomeClass(string firstName)
     {
     _firstName=firstName;
     }
  } 
```

或者如果您使用的是 Dotnet 3.0 或更高版本，您可以使用自动属性，编译器会自动为您创建支持字段。

```
public class YourAwesomeClass
      {

          public static string FirstName
           {
                get;private set;
            }
        public YourAwesomeClass(string firstName)
         {
         FirstName=firstName;
         }
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T04:17:36.263

编写一个setter方法：

```
public static string FirstName
{
    get { return _firstName; }
    set { _firstName = value; }
} 
```

# javascript - 使用 jQuery 为 iPad 等移动设备解析 XML

> ID：12926974
> 
> 赞同：3
> 
> 时间：2012-10-17T04:08:46.727
> 
> 标签：javascript, jquery, xml, parsing

我已经使用 jQuery 构建了一个 Web 应用程序，它可以在计算机上的浏览器中完美运行，但我终生无法让它在我的移动 iPad 上运行。它是网站的关键部分，预计会有大量来自移动设备的流量，所以我真的需要它来工作。我对编程非常陌生，因此感谢您提供任何帮助以使其正常工作:)。谢谢！

我在 Drupal 工作以布置我的网站，所以 jQuery 被写出来而不是 $ 符号。如果我不写出来，javascript 将无法工作。

这是在计算机上运行的 Web 应用程序：

[http://www. Famousartistprints.com/content/select-house-design](http://www.famousartistprints.com/content/select-house-design)

这是代码：

```
 <div id="settingHeight"><ul data-role="listview" id="list" class="tilelist" > </ul><div> 
```

```
 jQuery(document).ready(function() {
     jQuery.get('http://www.famousartistprints.com/xml/designs.xml',function(data){

         jQuery(data).find('slide').each(function(){
                var slide = jQuery(this);
                var caption = slide.find('caption').text();
                var source = slide.find('source').text()
                var html = '<li class="mySlides"><a href="' + caption + '_Letterpress_Wedding_Invitation"><img src="/sites/aerialist.localhost/files/images/selectThumbs/' + source + '"/><p>' + caption + '</p><a>';      
                 jQuery('#list').append(html);
                   jQuery('#list').hide();
                jQuery('#list').fadeIn(800);
    });
    return false;
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:19:04.587

这可能是因为不同的浏览器处理语法错误的方式，你的代码有。

即使您在桌面上运行它，请注意浏览器控制台会在第 584 行告诉您语法错误。修复此问题，您应该没问题。

![控制台截图](../Images/62bd1ad3a16f169194b5d0889ce9ae99.png)

# javascript - JavaScript 中的最近对算法

> ID：12926975
> 
> 赞同：8
> 
> 时间：2012-10-17T04:09:18.903
> 
> 标签：javascript, performance, algorithm

我正在尝试实现一种分而治之的算法，以使用 JavaScript 在随机生成的一组点中找到最近的一对点。该算法应该在 O(n log n) 时间内运行，但它的运行时间比简单的蛮力算法要长得多，后者应该是 O(n^2)。

我创建了两个 jsfiddles，为 16000 个点的数组计时算法：

*   [分而治之](http://jsfiddle.net/kaangs10/rfSz5/2/)
*   [蛮力](http://jsfiddle.net/kaangs10/eFgSA/2/)

我的假设是分而治之非常慢，因为 JavaScript 数组实际上是哈希表。是否可以显着加快 JavaScript 中的算法速度？如果是这样，这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T04:39:54.170

乍一看，您的合并函数分配了太多的内存（大约为 O(n^2)）。[我在这里](http://jsfiddle.net/rfSz5/3/)做了一个 hacky 方法来测量这个。基本思路是我只是在全局范围内有一个计数器，每次调用merge生成的数组的大小相加。希望这些信息足以让您修复它，如果您遇到更多问题，我很乐意提供一些额外的指示。

此外，只需使用数字，就很容易排除它是哈希表问题* - 哈希表减慢的算法不会表现出比 O(n log n) 更快的增长率，它只会开始缓慢并增长沿着同样的路线。但是，如果您尝试一系列值，应该会发现它的增长速度比这更快，这表明存在不同的问题。

* javascript 数组的内部实现比它们只是对象要复杂一些，但就这一点而言，我试图让它并不重要

# sql - 显示与任何 SH 和 CH 电影在同一年制作的所有电影的名称和年份

> ID：12926976
> 
> 赞同：0
> 
> 时间：2012-10-17T04:09:23.547
> 
> 标签：sql, movies

显示与任何 SH 和 CH 电影在同一年制作的所有电影的名称和年份。

我将如何调出一个结果表，显示与流派列中的电影在同一年制作的电影的标题？

表名（电影）年份列（YR）流派列（流派）流派（SH）（CH）我真的不知道如何将所有这些放在一起任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:31:04.577

这样的事情怎么样？

```
SELECT m1.year, m1.title
FROM movies m1
WHERE EXISTS (SELECT 1
                FROM movies m2
               WHERE m2.genre IN ('SH', 'CH')
                 AND m2.year = m1.year); 
```

# http-headers - 为什么缓存控制：最大年龄不起作用？

> ID：12926977
> 
> 赞同：4
> 
> 时间：2012-10-17T04:09:24.610
> 
> 标签：http-headers

我正在学习 http 标头，我想在“缓存控制”字段上运行测试，所以我建立了一个只有默认页面的 asp.net 网站。在这个页面中，我正在测试“缓存控制” " 下面 Page_Load 中带有代码的字段：

```
Response.AddHeader("Cache-Control","max-age=3600");
Response.Write(new Random().Next(0,9999).ToString()); 
```

我认为每次刷新页面时它都会给我相同的数字，因为当页面收到“Cache-Control：max-age = 3600”标头时，页面被浏览器缓存在本地，但令我惊讶的是，它给了我每次按下刷新按钮（不是 ctrl+f5）时都会出现一个新数字，就像缓存控制根本不起作用一样。

我使用提琴手捕获请求/响应信息，并看到请求标头中有一个“Cache-Control：max-age = 0”，而响应标头中有一个“Cache-Control：max-age = 3600”。看起来"Cache-Control: max-age=0" 阻止缓存，但为什么呢？我错过了什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T22:18:19.623

在浏览器中，F5 执行“条件刷新”，它通过条件请求访问服务器（仅当服务器通过 HTTP/304 要求这样做时才使用缓存文件）。要查看缓存标头的效果，请改为打开同一页面的新选项卡。如果您正确配置了所有内容，您将看到相同的值。

在此处了解有关浏览器刷新的更多信息：http: [//blogs.msdn.com/b/ieinternals/archive/2010/07/08/technical-information-about-conditional-http-requests-and-the-refresh-button.aspx](http://blogs.msdn.com/b/ieinternals/archive/2010/07/08/technical-information-about-conditional-http-requests-and-the-refresh-button.aspx)

# jquery - jQuery Confirm（外部插件）无法正常工作

> ID：12926987
> 
> 赞同：1
> 
> 时间：2012-10-17T04:11:03.483
> 
> 标签：jquery, plugins, confirm

我的网站上的 jQuery Confirm 代码一直有一个非常奇怪的问题。我一直在使用 Nadia Alramli 设计的插件（[http://nadiana.com/jquery-confirm-plugin](http://nadiana.com/jquery-confirm-plugin)）

这个插件停止它所应用的元素的动作，并首先提供一个确认对话框。我将它用于我开发的资金申请管理系统上的“操作按钮”。直到最近，一切都运行良好，从字面上看，出乎意料的是，代码刚刚**停止工作**。确认对话框显示，但是当您单击“是”时，按钮的操作不会执行。

我检查并重新检查了代码，与最初实现的方式相比没有任何改变。我还创建了一个示例页面，在其中删除了所有其他不必要的代码，但我仍然遇到同样的问题。这是我的示例页面的链接：http: [//www.greeleyw2w.org/admin/example2.html](http://www.greeleyw2w.org/admin/example2.html)

什么可能导致这样的事情？我唯一能想到的要么是我的网络主机 (GoDaddy) 的问题，要么是 Google 托管的 jQuery 版本的问题。

```
//Actions for the status change buttons
$(document).ready(function(){
$("#test").click(function(){ //The action of the button
    alert("You confirmed the button click.");
});

$('.confirm').confirm({ //Captures button action, asks for confirmation.
    msg:'Are you sure?',
    wrapper:'<span style="color:#099"></span>',
    dialogShow:'fadeIn',
    dialogSpeed:'slow',
    buttons: {
        wrapper:'<button></button>',
        separator:'  '
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T01:41:12.063

它与 JQuery 1.8 不兼容。

在第 43 行左右，将代码更改为：

var events = jQuery.data(target, 'events');

至

var events = jQuery._data(target, "events");

由于移除了 api，事件模型在 1.8 中中断。

[http://blog.jquery.com/2012/08/09/jquery-1-8-release](http://blog.jquery.com/2012/08/09/jquery-1-8-release)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T04:43:32.350

on jquery confirm replace the code with this:

```
/**
 * Confirm plugin 1.3
 *
 * Copyright (c) 2007 Nadia Alramli (http://nadiana.com/)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 */

/**
 * For more docs and examples visit:
 * http://nadiana.com/jquery-confirm-plugin
 * For comments, suggestions or bug reporting,
 * email me at: http://nadiana.com/contact/
 */

jQuery.fn.confirm = function(options) {
  options = jQuery.extend({
    msg: 'Are you sure?',
    stopAfter: 'never',
    wrapper: '<span></span>',
    eventType: 'click',
    dialogShow: 'show',
    dialogSpeed: '',
    timeout: 0
  }, options);
  options.stopAfter = options.stopAfter.toLowerCase();
  if (!options.stopAfter in ['never', 'once', 'ok', 'cancel']) {
    options.stopAfter = 'never';
  }
  options.buttons = jQuery.extend({
    ok: 'Yes',
    cancel: 'No',
    wrapper:'<a href="#"></a>',
    separator: '/'
  }, options.buttons);

  // Shortcut to eventType.
  var type = options.eventType;

  return this.each(function() {
    var target = this;
    var $target = jQuery(target);
    var timer;
    var saveHandlers = function() {
      var events = jQuery.data(target, 'events');
      if (!events && target.href) {
        // No handlers but we have href
        $target.bind('click', function() {document.location = target.href});
        events = jQuery.data(target, 'events');
      } else if (!events) {
        // There are no handlers to save.
        return;
      }
      target._handlers = new Array();
      for (var i in events[type]) {
        target._handlers.push(events[type][i]);
      }
    }

    // Create ok button, and bind in to a click handler.
    var $ok = jQuery(options.buttons.wrapper)
      .append(options.buttons.ok)
      .click(function() {
      // Check if timeout is set.
      if (options.timeout != 0) {
        clearTimeout(timer);
      }
      $target.unbind(type, handler);
      $target.show();
      $dialog.hide();
      // Rebind the saved handlers.
      if (target._handlers != undefined) {
        jQuery.each(target._handlers, function() {
          $target.click(this.handler);
        });
      }
      // Trigger click event.
      $target.click();
      if (options.stopAfter != 'ok' && options.stopAfter != 'once') {
        $target.unbind(type);
        // Rebind the confirmation handler.
        $target.one(type, handler);
      }
      alert("You confirmed the button click.");
      return false;
    })

    var $cancel = jQuery(options.buttons.wrapper).append(options.buttons.cancel).click(function() {
      // Check if timeout is set.
      if (options.timeout != 0) {
        clearTimeout(timer);
      }
      if (options.stopAfter != 'cancel' && options.stopAfter != 'once') {
        $target.one(type, handler);
      }
      $target.show();
      $dialog.hide();
      return false;
    });

    if (options.buttons.cls) {
      $ok.addClass(options.buttons.cls);
      $cancel.addClass(options.buttons.cls);
    }

    var $dialog = jQuery(options.wrapper)
    .append(options.msg)
    .append($ok)
    .append(options.buttons.separator)
    .append($cancel);

    var handler = function() {
      jQuery(this).hide();

      // Do this check because of a jQuery bug
      if (options.dialogShow != 'show') {
        $dialog.hide();
      }

      $dialog.insertBefore(this);
      // Display the dialog.
      $dialog[options.dialogShow](options.dialogSpeed);
      if (options.timeout != 0) {
        // Set timeout
        clearTimeout(timer);
        timer = setTimeout(function() {$cancel.click(); $target.one(type, handler);}, options.timeout);
      }
      return false;
    };

    saveHandlers();
    $target.unbind(type);
    target._confirm = handler
    target._confirmEvent = type;
    $target.one(type, handler);
  });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T04:26:41.073

尝试更改您的代码

```
$('.confirm').confirm({
   ....
}); 
```

至

```
$('#test').confirm({
   ....
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T04:28:46.447

我认为您错过了“是”按钮上的 ID。这是您的代码：

```
<span style="color: rgb(0, 153, 153); display: none;">
Are you sure?
<button>Yes</button>
<button>No</button>
</span>
<input id="test" class="confirm" type="button" style="display: inline;" value="Test Confirm Function" /> 
```

因此，通过将 ID 属性添加到 Yes Button 来更改您的 HTML 代码。看看下面修改后的代码：

```
<span style="color: rgb(0, 153, 153); display: none;">
Are you sure?
<button id="test">Yes</button>
<button>No</button>
</span>
<input class="confirm" type="button" style="display: inline;" value="Test Confirm Function" /> 
```

或者您可以将您的 javascript 操作部分更改为：

```
$('button').click(function(){
  alert("You confirmed the button click."); 
}); 
```

查看“第二个示例”的[插件文档](http://nadiana.com/jquery-confirm-plugin)，它与您的情况类似。

# android - android on touch 画线

> ID：12926990
> 
> 赞同：3
> 
> 时间：2012-10-17T04:11:26.177
> 
> 标签：android, android-canvas, draw, touch-event, ontouchlistener

我有一个获取图像视图坐标的代码，当用户在图像视图中触摸 2 次时，我想画一条线。imageview 有一个来自可绘制的位图。有关更多详细信息，这是我的代码：

```
public class MainActivity extends Activity implements OnTouchListener {
   ImageView tampil;
   Matrix matrix = new Matrix();
   Matrix savedMatrix = new Matrix();
   private static final String TAG = "Touch";
   static final int NONE = 0;
   static final int DRAG = 1;
   static final int ZOOM = 2;
   int mode = NONE;

   // Remember some things for zooming
   PointF start = new PointF();
   PointF mid = new PointF();
   float oldDist = 1f;
   float x1, y1, x2, y2;
   Bitmap bmp;
   int i = 1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    tampil = (ImageView)findViewById(R.id.imageView1);
    tampil.setOnTouchListener(this);
    Drawable d = getResources().getDrawable(R.drawable.enigma);
    bmp = ((BitmapDrawable)d).getBitmap();
    tampil.setImageBitmap(bmp);
}

@Override
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub
    //ImageView view = (ImageView) v;

      // Handle touch events here...
      switch (event.getAction() & MotionEvent.ACTION_MASK) {
      case MotionEvent.ACTION_DOWN:
         savedMatrix.set(matrix);
         start.set(event.getX(), event.getY());
         Log.d(TAG, "mode=DRAG");
         mode = DRAG;
         Log.i(TAG, "("+String.valueOf((int)event.getX())+","+String.valueOf((int)event.getY())+")");
         if (i==1){
             x1 = event.getX();
             y1 = event.getY();
             i = 2;
             Log.i(TAG, "coordinate x1 : "+String.valueOf(x1)+" y1 : "+String.valueOf(y1));
         } else if (i==2){
             x2 = event.getX();
             y2 = event.getY();
             i = 3;
             Log.i(TAG, "coordinate x2 : "+String.valueOf(x2)+" y2 : "+String.valueOf(y2));
             onDraw();
         } 
        break;
      }
    return true;
}

public void onDraw(){
    Bitmap tes = Bitmap.createBitmap(bmp.getWidth(), bmp.getHeight(), Bitmap.Config.RGB_565);
    tes = bmp;
    Canvas cvs = new Canvas(tes);
    Paint pnt = new Paint();
    pnt.setColor(Color.RED);
    Log.i(TAG, "draw line");
    cvs.drawLine(x1, y1, x2, y2, pnt);
    i=1;
    tampil.setImageBitmap(tes);
}
} 
```

但是当用户触摸2次时，应用程序没有画线..任何人都可以给出解决方案

这是日志猫说：

```
10-17 12:08:21.082: I/ActivityManager(70): Displayed com.example.tesontouch/.MainActivity: +3s139ms
  10-17 12:08:24.103: D/Touch(796): mode=DRAG
  10-17 12:08:24.103: I/Touch(796): (113,145)
  10-17 12:08:24.123: I/Touch(796): coordinate x1 : 113.26723 y1 : 145.2766
  10-17 12:08:26.243: D/dalvikvm(264): GC_EXPLICIT freed 8K, 55% free 2595K/5703K, external 1625K/2137K, paused 88ms
  10-17 12:08:26.323: D/Touch(796): mode=DRAG
  10-17 12:08:26.323: I/Touch(796): (306,284)
  10-17 12:08:26.343: I/Touch(796): coordinate x2 : 306.67017 y2 : 284.45056
  10-17 12:08:26.423: D/dalvikvm(796): GC_EXTERNAL_ALLOC freed 4K, 53% free 2559K/5379K, external 3064K/4342K, paused 81ms
  10-17 12:08:26.473: I/Touch(796): draw line
  10-17 12:08:31.413: D/dalvikvm(473): GC_EXPLICIT freed 6K, 52% free 2697K/5511K, external 3502K/4752K, paused 183ms 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T08:37:52.697

这是正确的工作代码:)

```
package com.example.stackdrawline;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.Bitmap.Config;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Matrix;
import android.graphics.Paint;
import android.graphics.PointF;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.Drawable;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.ImageView;

public class StackActivity extends Activity implements OnTouchListener {
ImageView tampil;
   Matrix matrix = new Matrix();
   Matrix savedMatrix = new Matrix();
   private static final String TAG = "Touch";
   static final int NONE = 0;
   static final int DRAG = 1;
   static final int ZOOM = 2;
   int mode = NONE;

   // Remember some things for zooming
   PointF start = new PointF();
   PointF mid = new PointF();
   float oldDist = 1f;
   float x1, y1, x2, y2;
   Bitmap bmp;
   int i = 1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_stack);
    tampil = (ImageView)findViewById(R.id.imageView1);
    tampil.setOnTouchListener(this);
    Drawable d = getResources().getDrawable(R.drawable. enigma);
    bmp = ((BitmapDrawable)d).getBitmap();
    tampil.setImageBitmap(bmp);

}

@Override
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub
    switch (event.getAction() & MotionEvent.ACTION_MASK) {
      case MotionEvent.ACTION_DOWN:
         savedMatrix.set(matrix);
         start.set(event.getX(), event.getY());
         Log.d(TAG, "mode=DRAG");
         mode = DRAG;
         Log.i(TAG, "("+String.valueOf((int)event.getX())+","+String.valueOf((int)event.getY())+")");
         if (i==1){
             x1 = event.getX();
             y1 = event.getY();
             i = 2;
             Log.i(TAG, "coordinate x1 : "+String.valueOf(x1)+" y1 : "+String.valueOf(y1));
         } else if (i==2){
             x2 = event.getX();
             y2 = event.getY();
             i = 3;
             Log.i(TAG, "coordinate x2 : "+String.valueOf(x2)+" y2 : "+String.valueOf(y2));
             onDraw();
         } 
        break;
      }
    return true;
}
public void onDraw(){
    bmp = Bitmap.createBitmap(tampil.getWidth(), tampil.getHeight(), Config.ARGB_8888);
    Canvas c = new Canvas(bmp);
    tampil.draw(c);

    Paint pnt = new Paint();
    pnt.setColor(Color.RED);
    c.drawLine(x1, y1, x2, y2, pnt);
    tampil.setImageBitmap(bmp);
    i = 1;
}

} 
```

# c - 在c中使用pthreads，由于某种原因，每个pthread都有一个不同的锁实例

> ID：12926995
> 
> 赞同：1
> 
> 时间：2012-10-17T04:11:58.153
> 
> 标签：c, pthreads, semaphore

所以基本上我正在做一个类项目，我们自己实现一个锁。我相当确定我的锁码是正确的，但是我的测试码不能正常工作。我们正在使用我的教授给班级的一个名为 sthreads 的 pthreads 版本。这是我的测试代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include "sync.h"
#include "sthread.h"

sthread_mutex_t *mutex;
int locktest(void* arg){
    int threadNum = (int)arg;
    //int i;
    for(;;){ 
        int x  = sthread_mutex_lock(mutex);
        printf("return value: %d\n", x);
        //sleep(1);
        printf("thread %d has the lock\n", threadNum);
        sleep(1);
        sthread_mutex_unlock(mutex);
    }
    return 0;
}

int main(){
sthread_t thr1, thr2, thr3, thr4, thr5;

if (sthread_init() == -1){
    return -1;
}

if(sthread_mutex_init(mutex)){
    return -1;
}

sthread_mutex_lock(mutex);

if (sthread_create(&thr1, locktest, (void *)1) == -1){
    return -1;
}
if (sthread_create(&thr2, locktest, (void *)2) == -1){
    return -1;
}
if (sthread_create(&thr3, locktest, (void *)3) == -1){
    return -1;
}
if (sthread_create(&thr4, locktest, (void *)4) == -1){
    return -1;
}
if (sthread_create(&thr5, locktest, (void *)5) == -1){
    return -1;
}

sleep(100);
sthread_mutex_unlock(mutex);
sthread_mutex_destroy(mutex);
return 0;

} 
```

我发现由于某种原因，即使互斥锁是全局的，每个线程都有不同的实例。我知道这一点是因为函数 locktest（每个线程运行）中对 sthread_mutex_lock(mutex) 的每次调用的返回值不是 0。这表明锁尚未初始化，因此是一个空指针，即使您看到我已初始化它主要在第二个 if 语句中。

有没有人知道为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T04:16:37.923

You never initialize `mutex` to point at anything, so it has the value `NULL`. `sthread_mutex_init(mutex)` isn't going to work, since it was basically passed the value `NULL`.

You *probably* want `sthread_mutex_init(&mutex)` (declare `sthread_mutex_init` as taking a `sthread_mutex_t **`).

# javascript - 如何在现代浏览器中临时禁用 XSS 保护以进行测试？

> ID：12926997
> 
> 赞同：36
> 
> 时间：2012-10-17T04:12:17.543
> 
> 标签：javascript, html, security, xss

是否可以出于测试目的暂时禁用现代浏览器中的 XSS 保护？

我正在尝试向同事解释当将其发送到易受 XSS 攻击的 Web 表单时会发生什么：

```
<script>alert("Danger");</script> 
```

但是，Chrome 和 Firefox 似乎都在阻止 XSS 弹出窗口。我可以禁用此保护，以便我可以完全查看我的操作的结果吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-17T04:37:12.253

在 Chrome 中有一个标志，您可以使用它来启动浏览器。如果你用这个标志启动浏览器，你可以做你想做的事：

```
--disable-web-security 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-07-08T14:45:01.573

为了方便不知道的人......

"C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" --args --disable-web-security

使用上面的作为快捷方式的路径

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-11-12T11:10:30.247

如果你只是不想禁用 XSS，你应该使用`--disable-xss-auditor`. 一个完整的论点是这样的：

> "C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" --disable-xss-auditor

确保在运行命令之前杀死所有 chrome.exe 进程，否则它将不起作用。如果您愿意，您还可以传递更多参数，例如我经常使用代理参数，因为我不想为我的整个系统启用代理。

> "C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" --disable-xss-auditor --proxy-server=127.0.0.1:8080

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-03T19:58:06.330

您可以在提交表单时将用户重定向到另一个本地网页并打印受感染的数据。Chrome 不会检测到这一点。

提示：您可以使用会话/cookies 在两个页面之间存储受感染的数据。

**PHP 中的示例：**

索引.php

```
<?php    
    setcookie('infected', $_POST['infected']);

    if($_POST['infected'])
        header('location: show.php');
?>

<form action="index.php" method="POST" />
    <p>
        Username: <input type="text" name="infected" />
        <input type="submit" value="Add Comment" />
    </p>
</form> 
```

显示.php

```
echo $_COOKIE['data']; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-12T14:03:43.983

使用禁用参数是临时的吗？在有限的测试中，它似乎是永久性的。 **XSS-Auditor**在没有任何 xss-auditor 参数的情况下在 Chrome 窗口中保持禁用状态。要重新打开使用“C:\Program Files (x86)\Google\Chrome\Application\chrome.exe”--enable-xss-auditor

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-04-07T16:07:31.263

我知道这并不能解决它，但它现在可能只需要在网站上发布一条消息，直到 Google 修复它。类似“如果使用 Chrome，您可能会遇到......”。我发现即使我收到内容确实进入数据库的错误屏幕。我只是回击回到网站。然后转到仪表板，它就在那里。痛苦的是，但这是一种不需要设置站点的解决方法。

# c++ - std lib 对象作为返回类型和函数参数

> ID：12926999
> 
> 赞同：0
> 
> 时间：2012-10-17T04:12:35.500
> 
> 标签：c++, oop, header-files, std

我是 C++ 新手，头文件定义类的想法对我来说很陌生。我有一个多项式类的以下头文件，它给了我很多错误。

```
#ifndef POLYNOMIAL_H
#define POLYNOMIAL_H

class Polynomial {
public:
    Polynomial(std::vector <int>&);
    Polynomial(const Polynomial& orig);
    virtual ~Polynomial();

    std::vector <int> getCoeffs();
    Polynomial getIntegral(int, int, int);
    Polynomial getDerivative(int);
    std::string toString();

    void integrate(int, int);
    void derive();
private:
    std::vector<int> coeffs;
};

 #endif /* POLYNOMIAL_H */ 
```

在其返回类型定义中包含标准库中某些内容的所有类方法都给我错误：命名空间“std”中的“vector”（或“string”）没有命名类型

此外，将向量作为参数的构造函数会在 '<' 标记之前给出错误：预期的 ')'。

我确信这是非常明显的事情，但是无论我所做的教程是什么，都没有深入到类和类定义来遇到这样的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T04:17:52.643

`std::vector`在标头*向量*中定义。您需要添加语句

```
#include <vector> 
```

在头文件的顶部。这会导致预处理器（有效地）粘贴该文件的内容来代替`#include`语句。因此，编译器知道`std::vector`类定义中的类型指的是什么。

这同样适用于`std::string`，它又在标题*字符串*中定义。所以添加`#include <string>`该标题。

[cppreference.com](http://en.cppreference.com/w/cpp)是搜索类型及其各自标题的良好参考；它也是一个很好的 C++ 在线参考。

这是你的头文件应该是这样的：

```
#ifndef POLYNOMIAL_H
#define POLYNOMIAL_H

#include <string>
#include <vector>

class Polynomial {
  ...
};

#endif /* POLYNOMIAL_H */ 
```