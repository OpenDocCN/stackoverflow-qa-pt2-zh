# StackOverflow 问答 14632000-14632999

# facebook - Graph API 如何获取 facebook 页面成员/喜欢

> ID：14632000
> 
> 赞同：23
> 
> 时间：2013-01-31T17:49:42.430
> 
> 标签：facebook, facebook-graph-api, facebook-fql

![在此处输入图像描述](../Images/af97dff7237594b0f3f2e1bffb7687f3.png) [Facebook喜欢检查](http://www.sterntv-experimente.de/FacebookLikeCheck/#)

我发现了一个有趣的应用程序。这个 fb 应用程序从任何粉丝页面获得所有喜欢，并按质量和国家分类！

> **我的问题：**

# 这些应用程序如何从图形 api 获取数据？

**第一：** 获取 fanpage-object 不需要访问令牌

[https://graph.facebook.com/cocacola/](https://graph.facebook.com/cocacola/)

```
{
   "about": "The Coca-Cola Facebook Page is a collection of your stories showing how people from around the world have helped make Coke into what it is today.",
   "checkins": 146,
   "description": "Created in 1886 in Atlanta, Georgia, by Dr. John S. Pemberton, Coca-Cola was first offered as a fountain beverage at Jacob's Pharmacy by mixing Coca-Cola syrup with carbonated water. \n\nCoca-Cola was patented in 1887, registered as a trademark in 1893 and by 1895 it was being sold in every state and territory in the United States. In 1899, The Coca-Cola Company began franchised bottling operations in the United States. \n\nCoca-Cola might owe its origins to the United States, but its popularity has made it truly universal. Today, you can find Coca-Cola in virtually every part of the world.\n\nCoca-Cola Page House Rules: http://CokeURL.com/q28a",
   "founded": "1886",
   "is_published": true,
   "location": {
      "street": "",
      "zip": "",
      "latitude": 48.886763644968,
      "longitude": 2.2428464993582
      },
  "talking_about_count": 903212,
  "username": "coca-cola",
  "website": "http://www.coca-cola.com",
  "were_here_count": 0,
  "category": "Food/beverages",
  "id": "40796308305",
  "name": "Coca-Cola",
  "link": "https://www.facebook.com/coca-cola",
  "likes": 58345623, 
  "cover": {
     "cover_id": "10152037156953306",
     "source": "http://sphotos-b.ak.fbcdn.net/hphotos-ak-ash4/s720x720/602289_10152037156953306_1443207674_n.jpg",
     "offset_y": 0
  }
} 
```

**第二**：从 facebook 对象中获取喜欢：

[https://graph.facebook.com/cocacola/likes?access_token=xxxxxxx](https://graph.facebook.com/cocacola/likes?access_token=xxxx)

现在我将收到所有“可口可乐”喜欢的粉丝页面，但我需要所有喜欢可口可乐的用户！

可能只有 FQL 查询才有可能？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2016-06-07T16:26:11.693

使用 FB 2.6 API，您可以获得总点赞`fan_count`数。

[http://graph.facebook.com/cocacola/?fields=fan_count&access_token=](http://graph.facebook.com/cocacola/?fields=fan_count&access_token=) {value}

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-01T01:21:15.517

Facebook will not give you a list of users who like a page. You don't need this to create this app. You can get this data by querying publicly available [insights](https://developers.facebook.com/docs/reference/api/insights/) data.

This URL will get you the raw data this app uses to create this graph:

```
https://graph.facebook.com/cocacola/insights/page_fans_country?access_token=XXXXXX 
```

You can get this information with any valid `access_token`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-01T01:07:52.087

[https://graph.facebook.com/cocacola/?fields=fan_count&access_token=#######](https://graph.facebook.com/cocacola/?fields=fan_count&access_token=#######)

> 您可以使用字段 fan_count 获取 Facebook 页面成员的喜欢。但是您必须传递页面访问令牌而不是用户 access_token。

# .net - 如何使用 Microsoft.VisualBasic.Devices.Network ping 网站

> ID：14632001
> 
> 赞同：1
> 
> 时间：2013-01-31T17:49:42.733
> 
> 标签：.net, qtp

我有以下用 QTP 编写的代码

```
Set oNetwork = DotNetFactory( "Microsoft.VisualBasic.Devices.Network" ,"Microsoft.VisualBasic")
bFlag=oNetwork.ping(strWebSiteName)
If bFlag Then
   MsgBox( "Website is avilable" )
Else
   MsgBox( "Website not avilable" )
End If

Set oNetwork=nothing 
```

但是当我执行此代码时，我收到以下错误

```
Cannot load Assembly Microsoft.VisualBasic.Devices
Line (27): "Set oNetwork = DotNetFactory( "Microsoft.VisualBasic.Devices.Network" ,"Microsoft.VisualBasic.Devices")" 
```

谁能告诉我，出了什么问题？

.NET Framework 4 已安装在我的系统中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:36:24.480

程序集名称是`Microsoft.VisualBasic`，不是`Microsoft.VisualBasic.Devices`。您的错误消息中的代码与您发布的代码示例不匹配。

另外，看看： http: [//www.advancedqtp.com/ping-a-specified-server/](http://www.advancedqtp.com/ping-a-specified-server/)

# javascript - 从 AJAX 检索 XML 数据，提示用户下载？

> ID：14632004
> 
> 赞同：0
> 
> 时间：2013-01-31T17:50:04.173
> 
> 标签：javascript, jquery, ajax, http, response-headers

我正在处理一个项目的客户端部分，并且遇到一种当前从服务器接收 XML 数据块的情况，我正在尝试获取该信息并提示用户下载。这可能吗？

这是我的代码：

```
 var holder =
    jQuery.ajax({
                type: "POST",
                url: "xml_comes_back.json",
                data: {param : info,
                        param2 : info2
                },
                dataType: ($.browser.msie) ? "text" : "xml",
                success: function(data) { 
                    $('#selector').prev().empty().html('<a href="' + data + '" id="download">Ready for Download</a>');

                    $('#download').click(function() {
                       //Prompt download for xml stored in 'data' here
                    });

                },
                error:function (xhr, ajaxOptions, thrownError) {
                   alert('error')

                }
            });
} 
```

我在尝试实现这一目标时遇到了重大问题。是否可以在没有服务器创建并通过 URL 存储的情况下下载此文件？我只想使用正确的标题动态接收数据并让下载链接正常工作。

这是从 ajax 调用成功返回的响应标头：

```
Content-Disposition:attachment; filename=theFile.xml
Content-Type:application/force-download;charset=UTF-8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:21:50.080

将它们链接到生成文件的页面，包括内容类型标头，以便强制它们下载（或使用 JavaScript 重定向它们）。我相信现代浏览器会简单地下载它而无需实际打开新窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T19:45:33.653

如果您从 ajax 获得的信息是一个 url，那么不仅仅是使用“window.location = data”将用户重定向到一个页面，该页面将具有正确的内容类型和内容配置，这将迫使用户下载。我想它不会打开一个新的标签/窗口。

# php - 未找到/错误包含magento模型文件

> ID：14632008
> 
> 赞同：0
> 
> 时间：2013-01-31T17:50:14.217
> 
> 标签：php, magento, autoloader

我正在尝试向我们的 magento 商店添加一个模块（称为 paypal 支付费用），但一旦安装它，它就会在每个商店网站上产生错误。

```
Warning: include(FlyWebdesign_PaypalFee_Model_Sales_Quote_Address_Total_Paymentcharge.php) [function.include]: failed to open stream: No such file or directory  in /var/www/magento/includes/src/Varien_Autoload.php on line 93 
```

似乎自动加载器试图包含带有下划线而不是斜杠的文件，但在文档中它说下划线由自动加载器自动替换为斜杠，所以我不明白是什么导致了错误。

提前致谢

塞缪尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:07:51.477

您的商店可能已启用编译。当您安装一个新模块时，代码必须重新编译，否则会发生这种错误。

尝试禁用编译，重新安装您的模块并再次启用编译。

# ruby-on-rails - 为什么 rake 资产预编译在 rails 3.2.11 时会失败

> ID：14632011
> 
> 赞同：0
> 
> 时间：2013-01-31T17:50:22.660
> 
> 标签：ruby-on-rails, rake, asset-pipeline

在部署到 heroku 之前，我似乎总是需要预编译我的资产。我最近将 rails 升级到 3.2.11，因为它说它修复了安全补丁。我还更新了一些我的宝石。

我正在尝试使用以下命令在本地预编译我的资产，`RAILS_ENV=production bundle exec rake assets:precompile --trace`但出现以下错误并 rake aborts。

```
RAILS_ENV=production bundle exec rake assets:precompile --trace
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:197: warning: Insecure world writable dir /usr/local in PATH, mode 040777
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:197: warning: Insecure world writable dir /Users/mwallace/.rvm in PATH, mode 040757
** Invoke assets:precompile (first_time)
** Execute assets:precompile
/Users/mwallace/.rvm/rubies/ruby-1.9.3-p362/bin/ruby /Users/mwallace/.rvm/gems/ruby-1.9.3-p362/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:197: warning: Insecure world writable dir /Users/mwallace/.rvm in PATH, mode 040757
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
rake aborted!
no block given (yield)
  (in /Users/mwallace/Sites/venueblast/app/assets/javascript/live/templates/main_view.handlebars.erb)
/Users/mwallace/Sites/venueblast/app/assets/javascript/live/templates/main_view.handlebars.erb:11:in `evaluate_source'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/tilt-1.3.3/lib/tilt/template.rb:209:in `instance_eval'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/tilt-1.3.3/lib/tilt/template.rb:209:in `evaluate_source'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/tilt-1.3.3/lib/tilt/template.rb:144:in `cached_evaluate'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/tilt-1.3.3/lib/tilt/template.rb:127:in `evaluate'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/tilt-1.3.3/lib/tilt/template.rb:76:in `render'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/context.rb:193:in `block in evaluate'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/context.rb:190:in `each'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/context.rb:190:in `evaluate'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/processed_asset.rb:12:in `initialize'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/base.rb:249:in `new'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/base.rb:249:in `block in build_asset'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/base.rb:270:in `circular_call_protection'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/base.rb:248:in `build_asset'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/index.rb:93:in `block in build_asset'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/caching.rb:19:in `cache_asset'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/index.rb:92:in `build_asset'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/base.rb:169:in `find_asset'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/index.rb:60:in `find_asset'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/bundled_asset.rb:16:in `initialize'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/base.rb:252:in `new'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/base.rb:252:in `build_asset'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/index.rb:93:in `block in build_asset'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/caching.rb:19:in `cache_asset'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/index.rb:92:in `build_asset'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/base.rb:169:in `find_asset'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/index.rb:60:in `find_asset'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/environment.rb:78:in `find_asset'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.11/lib/sprockets/static_compiler.rb:19:in `block in compile'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/base.rb:219:in `block in each_logical_path'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/base.rb:206:in `block (2 levels) in each_file'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/base.rb:196:in `each'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/base.rb:196:in `each_entry'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/base.rb:204:in `block in each_file'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/base.rb:203:in `each'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/base.rb:203:in `each_file'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/sprockets-2.2.2/lib/sprockets/base.rb:217:in `each_logical_path'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.11/lib/sprockets/static_compiler.rb:18:in `compile'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.11/lib/sprockets/assets.rake:56:in `internal_precompile'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.11/lib/sprockets/assets.rake:70:in `block (3 levels) in <top (required)>'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/Users/mwallace/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.11/lib/sprockets/assets.rake:60:in `block (3 levels) in <top (required)>'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/Users/mwallace/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:143:in `invoke_task'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:101:in `block (2 levels) in top_level'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:101:in `each'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:101:in `block in top_level'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:110:in `run_with_threads'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:95:in `top_level'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:73:in `block in run'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/bin/rake:19:in `load'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/bin/rake:19:in `<main>'
Tasks: TOP => assets:precompile:primary
rake aborted!
Command failed with status (1): [/Users/mwallace/.rvm/rubies/ruby-1.9.3-p36...]
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/file_utils.rb:53:in `block in create_shell_runner'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/file_utils.rb:45:in `call'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/file_utils.rb:45:in `sh'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/file_utils_ext.rb:40:in `sh'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/file_utils.rb:80:in `ruby'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/file_utils_ext.rb:40:in `ruby'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.11/lib/sprockets/assets.rake:12:in `ruby_rake_task'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.11/lib/sprockets/assets.rake:21:in `invoke_or_reboot_rake_task'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/gems/actionpack-3.2.11/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:228:in `call'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:228:in `block in execute'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:223:in `each'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:223:in `execute'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:166:in `block in invoke_with_call_chain'
/Users/mwallace/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:159:in `invoke_with_call_chain'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/task.rb:152:in `invoke'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:143:in `invoke_task'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:101:in `block (2 levels) in top_level'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:101:in `each'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:101:in `block in top_level'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:110:in `run_with_threads'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:95:in `top_level'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:73:in `block in run'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362@global/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/bin/rake:19:in `load'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/bin/rake:19:in `<main>'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/bin/ruby_noexec_wrapper:14:in `eval'
/Users/mwallace/.rvm/gems/ruby-1.9.3-p362/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => assets:precompile 
```

我的主要布局模板中的第 11 行似乎是原因。<%= yield %> 在哪里。

```
 <div id="tophead">
        <div class="container">
          <div id="wrapper_main">
          <div id="top_aurora"></div>
            <div class="header">
            <a href="/" alt="Venueblast - your ticket to live music online"><div id="logo"></div></a>
          </div>
</div>

    <div id="video_area" class="video_area">
        <%= yield %>
     </div>

<div id="footer" class="live_footer">
    <div id="cornrows" class="cornrows">

        <div class="center" id="live_trademark"><p>&reg;Venueblast.com All Rights Reserved. <img src="../images/venueblast_footer_logo.png" height="15" width="93"></p>
        <p>Interested in finding out more? <a href="contact.html">Contact Us</a></p>
        </div>
    </div>
</div> 
```

# php - 在后台运行 PHP 脚本

> ID：14632017
> 
> 赞同：0
> 
> 时间：2013-01-31T17:50:31.180
> 
> 标签：php, database, video, background, save

我有一个运行的弹出窗口，它保存了我的视频。另一个窗口打开，让我知道该窗口已被保存，但它非常难看。有什么方法可以在后台运行它并打开一个javascript弹出窗口或可能是我可以摆脱的固定位置div？

我试过的都没有用。我真的不知道该去哪里。这是我的点击代码：

```
onclick="var my_window = window.open('/saving.php?token=<?=$token?>', 'mywindow1',       'width=300,height=200,toolbar=0,menubar=0,location=0,status=1,scrollbars=0,resizable=0,left=0,    top=0');" 
```

我可以在后台运行 /saving.php 并给出不同的通知吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:53:17.983

您正在询问 Ajax，因此您将访问此页面“运行”它并等待回复返回并使用它来触发您的警报。

阿贾克斯 101：[http ://www.sitepoint.com/ajax-jquery/](http://www.sitepoint.com/ajax-jquery/)

简单示例（使用 jQuery）

```
$(document).ready(function(){
    $().load("saving.php", function(data){
        alert("Finished running")
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:55:23.507

[您可以通过 jQuery Form-plugin](http://malsup.com/jquery/form/)上传视频。

然后，您可以定义一个成功处理程序来显示您的通知 DIV（或其他任何内容）。但是，用户必须在视频上传期间停留在页面上。

# powershell-2.0 - Powershell：如果值不正确，如何从输入文件中包含对 get-service 的条件评估。

> ID：14632026
> 
> 赞同：0
> 
> 时间：2013-01-31T17:51:01.107
> 
> 标签：powershell-2.0

我写了下面的脚本。它工作得很好。但是我错过了重要的一步。评估服务名称是否为：错误/拼写错误。我已经捕获了其中一个拼写错误，并想在我的脚本中添加逻辑来处理它。这是我的脚本。谢谢

```
 Set-ExecutionPolicy -ExecutionPolicy Unrestricted
$Services = Import-Csv '\\wnp6636\d$\Scripts\ProdList(1).csv' | foreach-object {$_}
$ErrorActionPreference = "SilentlyContinue"
foreach ($Serve in $Services) {
get-service -computername $Serve.Server -name      $Serve.Services,$Serve.Services_A,$Serve.Services_B,$Serve.Services_C,`
    $Serve.Services_D,$Serve.Services_E,$Serve.Services_F,$Serve.Services_G,$Serve.Services_H |`
foreach-object {if($_.Status -eq "Stopped")`
{write-host $Serve.Server $_.Displayname $_.Status -Fore "Red"}
else
{write-host $Serve.Server $_.Displayname $_.Status -Fore "Green"}
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T03:39:22.130

我希望我明白你想要什么...

switch 可能更容易使用？

```
switch($_.status)
{
 "Stopped"{whatever code you want when it matches stopped;break}
 "Running"{whatever code you want when it matches running:break}
 Default{whatever code you want when it matches none of expected results:break}
} 
```

所以摆脱 if 和 else 并用你的 for 循环提供开关

你可以随心所欲地使用它。另外（我认为 $services 是一个数组）如果是这样，那么您可以将数组提供给包含 get-services 的 do 循环，然后使用 switch

希望我没有浪费你的时间祝你好运

刚刚意识到您可能需要更多关于默认 {read-host "No such service found: Please check spelling and try again"} 的帮助，这应该可以帮助您

# android - 将 ScrollView 中的按钮对齐到屏幕底部，并在打开软键盘时位于上面的视图下方

> ID：14632027
> 
> 赞同：1
> 
> 时间：2013-01-31T17:51:01.790
> 
> 标签：android, android-layout

在一个 Android 活动中，我有一些输入字段，下面有一些按钮。因为我不使用软键盘来推动所有内容，并且希望让用户能够非常轻松地导航到不同的输入字段，所以我将输入字段和按钮放入 ScrollView。

现在我希望按钮位于屏幕底部，当软键盘关闭时
，在 ScrollView 中的输入字段下方，当键盘打开时。
如果我添加

```
android:layout_below="@id/input_fields" 
```

按钮始终位于输入字段下方，但不在屏幕底部。

```
android:layout_alignParentBottom="true" 
```

将它们与底部对齐，但是当键盘打开时，它们位于最后一个输入字段的前面。

有人知道该怎么做吗？

我的布局文件示例：

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <RelativeLayout
            android:id="@+id/input_fields"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" 
            android:layout_alignParentTop="true" >

                   <!-- some input-fields -->

        </RelativeLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"

            android:layout_alignParentBottom="true"
            android:layout_below="@id/input_fields"

            android:padding="5dp">

            <!-- 2 buttons -->

        </LinearLayout>
</RelativeLayout> 
```

如果您需要更多信息：请问！
提前感谢您的帮助！

编辑：一些进一步的信息：

“在前面”是指按钮“隐藏”输入字段，因为它们没有与输入字段布局对齐，而是与父布局的末尾对齐（这是一个相对布局内滚动视图）。当我使用你的建议时，这已经消失了，但是按钮总是在键盘上方可见（我以前也是这样做的，但我想做一点不同，以节省一些空间）。当键盘打开时，我希望在输入字段之后的 ScrollView 中有按钮。这样你就可以看到 ScrollView，如果你滚动到它的末尾，在底部（在输入字段之后）你应该看到按钮。不会有问题的，但我希望按钮在键盘关闭时保持在屏幕底部，无论 ScrollView 是否填满所有空间。如果你有一些想法会很好！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-31T18:04:20.520

添加您的字段`ScrollView`并将您的按钮放在外面`ScrollView`，如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1" >

    <LinearLayout
        android:id="@+id/input_fields"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <!-- some input-fields -->

        <EditText
            android:id="@+id/editText1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10" >

            <requestFocus />
        </EditText>

        <EditText
            android:id="@+id/editText2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10" />
    </LinearLayout>
</ScrollView>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:padding="5dp" >

    <!-- 2 buttons -->

    <Button
        android:id="@+id/button1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Button" />
</LinearLayout>

</LinearLayout> 
```

也使用

```
<activity android:windowSoftInputMode="adjustResize" . . . > 
```

在您的活动标签中。请检查这个[http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft](http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft)

# c# - 自定义字符串格式谜题

> ID：14632035
> 
> 赞同：1
> 
> 时间：2013-01-31T17:51:34.610
> 
> 标签：c#, string, format

我们需要显示带有星号的银行路由/帐户数据，最后 4 个数字除外。直到我在单元测试中发现这一点之前，这似乎很简单：

```
string.Format("{0:****1234}",61101234)
```

```
正确显示为：“****1234”
```

但

```
string.Format("{0:****0052}",16000052)
```

```
显示不正确（由于零？？）：“****1600005252”
```

如果您在 C# 中使用以下内容，它可以正常工作，但我无法使用它，因为当您设置不带花括号的显示格式时，DevExpress 会自动将其包装为“{0: ... }”：

```
string.Format("****0052",16000052)
```

谁能想到一种让这种格式在大括号内正常工作的方法（传入完整的 8 位数字）？

更新：上面的 string.format 只是测试我要解决的问题的一种方式。这不是完成的代码。我必须将大括号内的字符串格式传递给 DevExpress，以便正确格式化路由号码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:56:07.273

很遗憾您没有包含*构建*格式字符串的代码。让格式字符串以看起来像你的方式依赖于数据是非常奇怪的。

我*不会*尝试在格式字符串中执行此操作；相反，我会编写一个将信用卡号转换为“模糊”字符串形式的方法，很可能只是使用`Substring`字符串连接。例如：

```
public static string ObscureFirstFourCharacters(string input)
{
    // TODO: Argument validation
    return "****" + input.Substring(4);
} 
```

（不清楚你的信用卡号的数据类型是什么。如果是数字类型，需要先转成字符串，需要注意最后得到一个固定大小的字符串，左填充零。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:15:41.723

我想你正在寻找这样的东西：

```
string.Format("{0:****0000}", 16000052); 
```

但是我还没有看到像这样的 * 内联。如果不知道更好，我可能会这样做：

```
string.Format("{0}{1}", "****", str.Substring(str.Length-4, 4); 
```

*如果我知道*长度，甚至可以放弃格式调用。

这些方法值得一读：[用 *? 屏蔽掉字符串的前 12 个字符？](https://stackoverflow.com/questions/9035192/mask-out-part-first-12-characters-of-string-with)

正如您在评论中提到的那样，这也应该有效：

```
string.Format("{0:****####}", 16000052); 
```

不同之处在于，如果没有数字，使用 0 将显示零，# 不会。在你的情况下应该没有实际意义。

如果由于某种原因您想打印文字零，请使用：

```
string.Format("{0:****\0\052}", 16000052); 
```

但请注意，这根本不会对您的输入做任何事情。

# php - Laravel 4 路由

> ID：14632038
> 
> 赞同：0
> 
> 时间：2013-01-31T17:51:42.817
> 
> 标签：php, laravel, laravel-4

我是 Laravel 4 的新手，很难掌握路线。我的网站有一个前端和一个后端。我希望在后端显示的所有内容都显示在`example.com/dashboard/...`. 我也想使用足智多谋的控制器。我需要设置什么`routes.php`才能拥有它，以便我始终可以引用我的`users`控制器，但所有这些都发生`dashboard`在 URL 中？

例子：

我链接到`users/edit/1`但在 URL 中看起来像`example.com/dashboard/users/edit/1`. 仪表板应该有一个索引页面（因此`example.com/dashboard`实际上显示了一个页面），但所有其他 URL 都附加到该页面上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T18:42:17.893

我认为这在[Larvel 4 文档](http://four.laravel.com/docs/routing)中得到了很好的介绍。

除非我有误解，否则这应该会为您的示例案例提供所需的结果：

```
Route::get('dashboard', 'DashboardController@index');
Route::get('dashboard/users/edit/{id}', 'UsersController@edit');
etc. 
```

**// 编辑**

或者，使用闭包回调，您可以执行以下操作：

```
Route::get('dashboard/users/{var1}/{var2?}', function($var1, $var2 = null)
{
    $controller = new UsersController;
    return $controller->{$var1}($var2);
}); 
```

这不需要您指定每条路线。或者，正如我在下面的评论中提到的，如果它适合您的需要，您可以使用[资源控制器。](http://four.laravel.com/docs/controllers#resource-controllers)

# mysql - 如何在 MySQL 中执行连接

> ID：14632040
> 
> 赞同：0
> 
> 时间：2013-01-31T17:51:46.710
> 
> 标签：mysql, mysql-workbench

我正在尝试打印 2 个分支中的帐户列表。数据来自 2 个表：帐户和分支。如何让数据库从帐户表中打印客户 ID、帐号和帐户类型以及从分支表中打印分支名称？我认为某处需要有一个 JOIN 命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:01:02.577

我不知道你的字段名称，但如果你有 branch_id 帐户，你需要这样的东西：

```
SELECT account.cust_id, account.account_id, account.product_cd, branch.name INNER JOIN branch ON branch.id = account.branch_id FROM account 
```

或者，如果您在分支上有 account_id：

```
SELECT account.cust_id, account.account_id, account.product_cd, branch.name INNER JOIN account ON branch.account_id = account.id FROM branch 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:02:11.740

如果假设您在两个表上都有一个名为“branch_id”的字段，这将起作用。否则插入链接字段名称。

```
SELECT  a.`customer id`, a.`account number`, a.`account type`, b.`branch name`

FROM    account AS a

        JOIN branch AS b
        ON a.branch_id = b.branch_id 
```

如果您的字段名称没有空格，您可以删除反引号 (`)。

# azure - 无法使用模拟器在本地运行 Azure Web 角色

> ID：14632041
> 
> 赞同：9
> 
> 时间：2013-01-31T17:51:47.607
> 
> 标签：azure, iis-express, azure-web-roles

我有一个网络角色，我正在尝试使用模拟器在本地运行。我让它在另一台计算机上工作，但我无法让它在另一台计算机上工作，并且已经重新格式化它并从头开始。

当我从 Visual Studio 启动站点时，Chrome 显示以下消息：

`This webpage is not available`

`The connection to 127.0.0.1 was interrupted.`

底部还列出了一个错误代码：

`Error 101 (net::ERR_CONNECTION_RESET): The connection was reset.`

构建输出中的一件有趣的事情是这些行：

`Starting process 'C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\Extensions\Microsoft\Windows Azure Tools\v1.8\Debugger\WindowsAzureDebugger.exe' with arguments '"C:\Program Files\IIS Express\iisexpress.exe" /trace:error /config:"C:\Users\brian\AppData\Local\dftmp\Resources\159c7254-b7d0-4076-a4fd-820b00feca5f\temp\temp\RoleTemp\applicationHost.config" /site:"deployment18(27).AzureApp.MyApp.Web_IN_0_Web"'...`

`Process 'C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\Extensions\Microsoft\Windows Azure Tools\v1.8\Debugger\WindowsAzureDebugger.exe' exited with exit code 0.`

如果我从命令行运行`C:\Program Files\IIS Express\iisexpress.exe" /trace:error /config:"C:\Users\brian\AppData\Local\dftmp\Resources\159c7254-b7d0-4076-a4fd-820b00feca5f\temp\temp\RoleTemp\applicationHost.config" /site:"deployment18(27).AzureApp.MyApp.Web_IN_0_Web"`，我会收到以下消息：

`The system cannot find the file specified. Unable to start IIS Express in background.`

我不知道它找不到哪个文件，但我已经验证我传递的配置文件确实存在。任何人都知道这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:38:26.587

虽然我无法告诉您问题的实际根本原因是什么，但我可以建议一些解决问题的方法：

1.  尝试将 IIS Express 更改为 Full IIS，看看它是否会改变行为。您可以通过转到 Windows Azure 应用程序项目属性并查看“Web”选项来完成此操作。
2.  尝试在不调试的情况下运行应用程序
3.  在命令提示符处使用 /run 选项的 /launchDebugger 参数启动 CSrun，以验证调试器是否运行没有任何问题
4.  尝试使用 IE 作为默认浏览器
5.  完全清理 dftemp 文件夹以获取任何剩余配置，然后单独启动 Azure 模拟器以验证没有问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T22:18:23.690

Procmon“ [http://technet.microsoft.com/en-us/sysinternals/bb896645](http://technet.microsoft.com/en-us/sysinternals/bb896645) ”可以帮助您找到丢失的文件...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-27T03:32:24.733

希望有人偶然发现具有类似症状的答案。在角色缓存中删除时，该`<dataCacheClients>`部分已从 . 不知何故`<dataCacheClients>`，web.config 中还剩下一个部分。一切并成功编译并部署到模拟器。但是，由于缺少 applicationHost.config，该角色将无法启动。修复只是`<dataCacheClients>`从 web.config 文件中删除不必要的部分。

# php - 在mysql中从日期中选择年份时的零值

> ID：14632045
> 
> 赞同：0
> 
> 时间：2013-01-31T17:51:55.033
> 
> 标签：php, mysql, database

我正在尝试使用 PHP 在 MySQL 中选择年份：

```
session_start();
$school_id = $_SESSION['school_id'];
$section_id = $_POST['section_id'];
$today  = date("Y");

$select_grades_deped = "SELECT * 
             FROM deped_grade_archive 
             WHERE school_id='$school_id'
             AND section_id='$section_id'
             AND year(submission_date) ='$today' ";

$query_check_grades= mysql_query($select_grades_deped) or die (mysql_error());

$check_count = mysql_num_rows($query_check_grades);

if($check_count == 0){
    $return['checked'] = "0";
}
else{
    $return['checked'] = "1";
}

echo json_encode($return); 
```

但不幸的是，当我尝试以下操作时：

```
SELECT year( submission_date )
FROM deped_grade_archive
WHERE school_id = '$school_id'
AND section_id = '$section_id' 
```

它从我的表中返回零值。我将数据类型更改为数据类型，`submission_date`因为`date`它是`varchar`以前的但仍然没有用。请帮助各位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:53:36.347

将其更改为`date`数据类型时，如果不为列设置默认值（如`CURRENT_TIMESTAMP`），则该值将为`0000-00-00`。因此，`YEAR`操作将返回`0`，如图所示。

您需要将`submission_date`列更新为您希望为每一行指定的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:22:29.533

像这样试试

```
 SELECT YEAR('submission_date') 
```

[参考](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_year)

# javascript - jQuery live("click", function() {...}) 不适用于正文

> ID：14632046
> 
> 赞同：1
> 
> 时间：2013-01-31T17:51:56.747
> 
> 标签：javascript, jquery

我在[这里](http://jsfiddle.net/Cupidvogel/CRYDV/)尝试这个简单的代码。它不适用于实际`click`事件或被注释掉的事件。谁能解释为什么？我`not`以前也遇到过问题...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T17:53:07.487

这仅仅是因为这个`live`长期被弃用的函数现在已经从 jQuery 中删除了。

代替

```
$("body").live("click",function() { alert("coo"); }); 
```

和

```
$("body").on("click",function() { alert("coo"); }); 
```

[查看此页面](http://api.jquery.com/live/)的右上角：“已删除 1.9”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-31T17:59:38.940

[`.live`](http://api.jquery.com/live/)自 v1.7 起已在 jQuery 中弃用，并已在 v1.9 中删除。

您应该将其替换为[`.on()`](http://api.jquery.com/on/).

`.on`有 2 种用于绑定元素的语法，而`.live`只有 1 种。

如果元素在您绑定时存在，您可以这样做：

```
$('.element').on('click', function(){
}); 
```

您甚至可以使用速记：

```
$('.element').click(function(){
}); 
```

如果该元素当时不存在，或者将添加新元素（这是`.live`通常使用的），则需要使用“事件委托”：

```
$(document).on('click', '.element', function(){
}); 
```

注意：您希望绑定到最近的静态元素，而不是总是`document`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T17:53:29.280

该`live()`方法已被弃用并删除。使用`on()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T17:54:43.927

如果您使用的是版本，那么您也`jquery 2.0`必须获得`migrate 1.0`

看到这个：http: [//jsfiddle.net/CRYDV/1/](http://jsfiddle.net/CRYDV/1/)

否则，您必须`.on()`按照上述答案中的建议使用处理程序。

# android - 使用 MapView 时 HoloEverywhere 中的 ClassNotFoundException

> ID：14632049
> 
> 赞同：1
> 
> 时间：2013-01-31T17:51:58.497
> 
> 标签：android, google-maps, android-fragments, android-holo-everywhere

我想将地图作为标题添加到 ListFragment。除非设备方向发生变化，否则一切似乎都运行良好。

ListFragment：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    if (container == null) {
        return null;
    }

    mHeader = inflater.inflate(R.layout.map_header, null);      
    mMapView = (MapView) mHeader.findViewById(R.id.map);

    if (mMap == null) {
        mMap = mMapView.getMap();
        if (mMap != null) {
            mMap.setMyLocationEnabled(true);
        }      
    }

    return (LinearLayout) inflater.inflate(R.layout.my_fragment, container, false);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {              
    super.onActivityCreated(savedInstanceState);
    mMapView.onCreate(savedInstanceState);

    mListView = getListView();
    mListView.addHeaderView(mHeader);                       

    String[] array = new String[] {"Android", "Android"};

    setListAdapter(new ArrayAdapter<String>(getActivity(), R.layout.list_item, R.id.text1, array));
} 
```

错误：

```
Class not found when unmarshalling: org.holoeverywhere.widget.ListView$SavedState, e: java.lang.ClassNotFoundException: org.holoeverywhere.widget.ListView$SavedState
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.i906.mpt/com.i906.mpt.Main}: android.os.BadParcelableException: ClassNotFoundException when unmarshalling: org.holoeverywhere.widget.ListView$SavedState 
```

如果我更改为，则不会发生此问题，`mMapView.onCreate(null);`但每次方向更改时地图都会重新加载。任何想法如何解决这个问题？

谢谢。

# cakephp-2.0 - Cakephp ：按显示的值排序

> ID：14632052
> 
> 赞同：0
> 
> 时间：2013-01-31T17:52:03.647
> 
> 标签：cakephp-2.0

我的视图中有一个表，其中一个列由助手返回。如何按此列排序？

谢谢

**编辑**

```
Controller
$this->set('myArray', $this->paginate('MyModel'));

View
foreach($myArray as $line) {
    echo $line['MyModel']['col1'];
    echo $line['MyModel']['col2'];
    echo $line['MyModel']['col3'];
    echo $line['MyModel']['col4'];
    echo $this->MyModel->someHelper($line['MyModel']['id']);
} 
```

我想按 $this->MyModel->someHelper($line['MyModel']['id']); 对表格进行排序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:43:10.930

如果您的数据来自分页，请使用。

```
echo $this->Paginator->sort('you_field_name'); 
```

在你的桌子头上。

# grails - 具有belongsTo关系的多个域类

> ID：14632053
> 
> 赞同：0
> 
> 时间：2013-01-31T17:52:07.513
> 
> 标签：grails, grails-2.0, grails-domain-class

我有3个课程如下...

```
Class A
{
      E objE;
}

Class B
{
   E objE;
}

Class E 
{
   E objE;
   belongsTo:[
               a : A,
               b : B
             ]
   static constraints = {
        a nullable: true
        b nullable: true
        c nullable: true
   }
} 
```

当我试图通过 null 异常来保存 A 类的对象时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:58:11.397

尝试删除 Class Incidents, Problems, Requests 上的 hasOne 并将其替换为

```
 E eObj
   static constraints = {eObj: unique: true, nullable:true}       
   static mapping = {
    eObj cascade: "delete"
    } 
```

# jquery - JQPlot - 基于区域的格式刻度

> ID：14632054
> 
> 赞同：5
> 
> 时间：2013-01-31T17:52:08.740
> 
> 标签：jquery, jqplot, number-formatting

如何格式化 jqplot 中的刻度以处理 , 和 . 和“”取决于我所在的地区。

例如。

*   欧洲 - 1.000,00
*   美国 - 1,000.00
*   其他 1 000,00

我的示例 jqplot 初始化看起来像....

```
plot3 = $.jqplot('saturationChart', lineArray, 
         { 
          title:m_Language.saturationChartName,
          series:lineColor,
          legend:{show:true, location:'se'},
          // You can specify options for all axes on the plot at once with
          // the axesDefaults object.  Here, we're using a canvas renderer
          // to draw the axis label which allows rotated text.
          axes:{
            xaxis:{
//            label:'Minutes',
              renderer: $.jqplot.LogAxisRenderer,
              tickDistribution:'power',
              labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
              labelOptions: {
                //fontSize: '12pt'
              },
            },
            yaxis:{
//            label:'Megaohms',
              renderer: $.jqplot.LogAxisRenderer,
              tickDistribution:'power',
              labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
              labelOptions: {
                //fontSize: '12pt'
              }
            },
          }
      }); 
```

我查看了文档，但我不确定我需要寻找哪些关键字......任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-02T10:18:06.003

基于[此](https://groups.google.com/forum/?fromgroups#!topic/jqplot-users/Tj737KIhsPo)，您可以使用如下格式字符串：

```
yaxis: {
    tickOptions: { formatString: "%'.2f" },
    min : 0
} 
```

该格式字符串与值一起作为对`$.jqplot.sprintf`. 然后，您可以按如下方式设置分隔符：

```
$.jqplot.sprintf.thousandsSeparator = ',';
$.jqplot.sprintf.decimalMark = '.'; 
```

所以这段代码：

```
var value = 10000;
$.jqplot.sprintf.thousandsSeparator = '.';
$.jqplot.sprintf.decimalMark = ',';
console.log($.jqplot.sprintf("European %'.2f", value));

$.jqplot.sprintf.thousandsSeparator = ' ';
$.jqplot.sprintf.decimalMark = ',';
console.log($.jqplot.sprintf("Other %'.2f", value));

$.jqplot.sprintf.thousandsSeparator = ',';
$.jqplot.sprintf.decimalMark = '.';
console.log($.jqplot.sprintf("US %'.2f", value)); 
```

会产生这个：

```
European 10,000.00 
Other 10 000,00 
US 10,000.00 
```

但是，看看欧洲的和美国的一样吗？当这些分隔符设置被更改时，它会导致字符串替换，因此为什么欧洲人会像这样结束：用句点替换逗号，然后用逗号替换句点会给您返回原始字符串。

因此，您需要提供自定义刻度格式化方法，以便您可以即时应用这些设置，然后进行字符串替换：

```
yaxis: {
    tickOptions: {
        tickOptions: { formatString: "%'.2f" },
        formatter: function(format, value){
            return FormatTick(format, value);
        }
    }
}

....

function FormatTick(format, value) {
    var prevThousandsSeparator = $.jqplot.sprintf.thousandsSeparator;
    var prevDecimalMark = $.jqplot.sprintf.decimalMark;

    $.jqplot.sprintf.thousandsSeparator = '#';
    $.jqplot.sprintf.decimalMark = '_';

    var formattedValue = $.jqplot.sprintf(format, value);
    formattedValue = formattedValue.replace($.jqplot.sprintf.decimalMark, Language.DecimalMark)
        .replace($.jqplot.sprintf.thousandsSeparator, Language.ThousandsSeparator);

    $.jqplot.sprintf.thousandsSeparator = prevThousandsSeparator;
    $.jqplot.sprintf.decimalMark = prevDecimalMark;

    return formattedValue;
} 
```

这意味着您还需要一些方便的机制来建立用户的区域设置和要使用的正确分隔符。我以这种方式保存和恢复`thousandsSeparator`and`decimalMark`字符只是为了确保以这种方式设置它们不会在其他地方造成意外问题。

另请注意，我的解决方案假定`#`and`_`字符不会在您要格式化的值中。如果不是这样，请将`FormatTick`方法中的分隔符修改为更合适的内容。

# asp.net-mvc - 我们如何基于子域创建 ASP.NET MVC4 路由？

> ID：14632057
> 
> 赞同：0
> 
> 时间：2013-01-31T17:52:14.803
> 
> 标签：asp.net-mvc, asp.net-mvc-4, url-rewriting, routing

我们如何制作一个使用子域信息来确定其路由的 ASP.NET MVC4 路由？例如：

`website1.domain.com`去`domain.com\websites\1`

`website2.domain.com`去`domain.com\websites\2`

这是一个像这样的动态映射：`websiteN.domain.com`转到`domain.com\websites\N`

我有一个用户名参数，我如何通过控制器/动作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T19:03:33.817

ASP.NET 的内置路由不直接支持子域路由。但幸运的是，有[AttributeRouting](http://attributerouting.net/)，这是一个非常流行的路由附加库，它允许您进行许多花哨的路由，包括子域路由。

以下是 Attribute Routing 站点的示例：

```
[RouteArea("Users", Subdomain = "users")]
public class SubdomainController : Controller
{
    [GET("")]
    public ActionResult Index() { /* ... */ }
} 
```

# dll - Mingw 编译器是否生成具有相对路径的 dll。？

> ID：14632059
> 
> 赞同：1
> 
> 时间：2013-01-31T17:52:17.360
> 
> 标签：dll, makefile, mingw32

编译器：Mingw GCC 编译器

在 make 文件中，我指定了 src 目录位置，如下所示..

```
dirsrc = ./src 
```

所以这里我提到了当前目录。问题是生成的 DLL 具有源目录的**绝对路径。**有什么方法可以通知编译器应该是相对的。？

因为我正在使用 Codecoverage 信息生成这个 DLL。如果我将整个项目结构移动到某个地方意味着在模拟 DLL 到目标时，那时 DLL 指的是源目录的绝对路径。

我需要具有源目录相对路径的 DLL。？如何使用源目录的相对路径编写 make 文件？

**真正的问题是**，

我正在使用 gcov 进行代码覆盖率分析。我遵循以下步骤：

1.) 我使用 GNU CC 选项编译了我的程序：`-fprofile-arcs -ftest-coverage'。2.) 我在同一目录中获得了 2 个附加文件，后缀为 *.bb 和 *.bbg。 3.) 运行程序将导致生成配置文件输出。

对于每个用`-fprofile-arcs', an accompanying` .da' 编译的源文件，文件都将放在源目录中。`.da' file is stored as an *_absolute pathname_* in the resulting object file. This path name is derived from the source file name by substituting a` .da' 后缀的名称。

这里的问题是我在一台机器上编译并在另一台机器上运行。每个“.da”文件在生成的目标文件中都有绝对路径名。所以它在另一台机器上找不到相同的路径。

是否有可能`fprofile-arcs`在 GCC 中拥有和任何其他与分析相关的选项以使文件名相对而不是绝对。请让我尽快。！提前致谢。

# javascript - 使用 Hyphenator.js 的 Android 完全对齐和自动断字

> ID：14632060
> 
> 赞同：3
> 
> 时间：2013-01-31T17:52:23.087
> 
> 标签：javascript, android, html, android-webview, hyphenation

我正在尝试通过自动连字符来完全证明 Android 中的文本。[如here](https://stackoverflow.com/questions/1292575/android-textview-justify-text/4314724#4314724)所述，我已经使用 WebView 实现了充分的理由。我已经阅读了几个关于 Android 中自动连字的线程，但没有一个适用于 WebViews。我尝试使用新的 CSS3 连字符：auto（包括 -webkit-hyphens:auto），但 Android WebKit 还不支持它。

我在[这里](http://smarter-than-the-average-pierre.blogspot.ch/2011/10/bad-android-typography-tale-of-text.html?showComment=1359645234484#c4633403689292386631)找到了一篇博客文章，其中提到了使用连字符 JavaScript，但我不知道如何实现它（JavaScript 和 HTML 是待办事项列表中的下一个）。由于 .js 文件的大小，我不想简单地使用`webView.loadUrl("javascript:someFunction()");`

这是我目前正在使用的代码：

```
public class TestWebView extends Activity {
@Override
public void onCreate (Bundle savedState) {
    WebView webView;
    super.onCreate(savedState);
    webView = new WebView(this);
    setContentView(webView);
    WebSettings webSettings = webView.getSettings();
    webSettings.setJavaScriptEnabled(true);
    webView.loadUrl("file:///android_asset/WorkingExample.html");
    }
} 
```

这是HTML：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
    <head>
        <title>Hyphenator.js</title>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <style type="text/css">
            body {
                width:30%;
                margin-left:35%;
                margin-right:35%;
            }
            .text {
                text-align:justify;
            }
    </style>
    <script src="Hyphenator.js" type="text/javascript"></script>
    <script type="text/javascript">
        Hyphenator.config({
            displaytogglebox : true,
            minwordlength : 4
        });
        Hyphenator.run();
        </script>
    </head>
    <body>
        <h1>Example of using Hyphenator.js</h1>
        <h2>Deutsch</h2>
        <p class="hyphenate text" lang="de">Deutschsprachige Beispieltexte haben natürlicherweise längere Wortzusammensetzungen als englischsprachige. Aber auch <span lang="en">“hyphenation”&lt;/span> ist ein ziemlich langes Kompositum.</p>
        <p class="hyphenate text" lang="de">Verändern Sie die Fenstergrösse um den Effekt der Silbentrennung zu sehen.</p>
        <h2>English</h2>
        <p class="hyphenate text" lang="en">English words are shorter in the average then german words. <span lang="de">«Silbentrennungsalgorithmus»</span> for example is quite long.</p>
        <p class="hyphenate text" lang="en">Resize the window to see hyphenation in effect.</p>
        <h2>Links</h2>
        <p class="hyphenate text" lang="en">Not only words but also links like <a href="http://code.google.com/p/hyphenator/">http://code.google.com/p/hyphenator/</a> are processed. But in a special manner (using zero width space).</p>
    </body>
</html> 
```

与 html 文件一起存储的是 Hyphenator.js 文件。在我的计算机浏览器中打开 HTML 文件按预期工作，但在电话上我没有运气：![计算机浏览器 (FF) 与 WebView](../Images/a5592bd69601d579d2fe2a1ac068aaf2.png) 最终，我希望动态生成文本，但让它工作将是一个巨大的帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-14T21:05:39.373

以下库支持连字符。它为您执行所有类型的文本对齐（左/右/居中/对齐）和断字。并非所有语言都已添加，但可以根据需要添加。该库不使用**WEBVIEWS**和**SUPPORTS SPANNABLES**并允许**LONG TEXT**。

**图书馆**：[https ://github.com/bluejamesbond/TextJustify-Android](https://github.com/bluejamesbond/TextJustify-Android)

**安卓**：2.2 到 5.X

**设置**

```
DocumentView documentView = addDocumentView(new StringBuilder("Your long text content"), DocumentView.PLAIN_TEXT);
documentView.getDocumentLayoutParams().setTextAlignment(TextAlignment.JUSTIFIED);
documentView.getDocumentLayoutParams().setHyphenator(new Hyphenator(HyphenPattern.PT));
documentView.getDocumentLayoutParams().setHyphenated(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T13:24:28.100

所以你`WorkingExample.html`有`Hyphenator.js`吗`file:///android_asset/`？我想你忘了下载“模式”文件夹（在你的情况下你需要`de.js`和`en-us.js`下`file:///android_asset/patterns/`）。你可以[在这里](https://code.google.com/p/hyphenator/downloads/detail?name=Version%204.2.0.zip&can=2&q=)得到它们。

**更新：** 获取您需要的一切并将其放入您的资产中：

![在此处输入图像描述](../Images/2e8956a2462f142975ba4d7545e6e184.png)

工作示例.html：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
    <head>
        <title>Hyphenator.js</title>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <script src="Hyphenator.js" type="text/javascript"></script>
        <script type="text/javascript">
            Hyphenator.config({
                minwordlength : 4
            });
        </script>
    </head>
    <body>
        <p id="text" class="hyphenate text" lang="en"></p>
    </body>
</html> 
```

主要活动：

```
public class MainActivity extends Activity {

    WebView mWebView;
    String mText;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mText = "English words are shorter in the average then german words. <span lang=\"de\">Silbentrennungsalgorithmus</span> for example is quite long.";

        mWebView = (WebView) findViewById(R.id.mWebView);
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.loadUrl("file:///android_asset/WorkingExample.html");
        mWebView.setWebViewClient(new WebViewClient() {
            @Override
            public void onPageFinished(WebView view, String url) {
                mWebView.loadUrl("javascript:(function() { "
                        + "document.getElementById('text').innerHTML='" + mText
                        + "';" + "Hyphenator.run();" + "})()");
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

活动主：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <WebView
        android:id="@+id/mWebView"
        android:layout_width="100dp"
        android:layout_height="match_parent"
        android:layout_centerHorizontal="true" />

</RelativeLayout> 
```

# ios - 自定义容器控制器：transitionFromViewController：动画前视图布局不正确

> ID：14632064
> 
> 赞同：24
> 
> 时间：2013-01-31T17:52:31.537
> 
> 标签：ios, xcode, uiviewcontroller, uiappearance

这既是一个问题，也是**部分**解决方案。

* * *

*这里的示例项目：

[https://github.com/JosephLin/TransitionTest](https://github.com/JosephLin/TransitionTest)

* * *

## **问题1：**

使用 时，由's`transitionFromViewController:...`完成的布局不会在过渡动画开始时显示。换句话说，预布局视图在动画期间显示，并且它的内容在动画之后捕捉到布局后位置。`toViewController``viewWillAppear:`

## **问题2：**

如果我自定义导航栏的背景`UIBarButtonItem`，则栏按钮在动画前以错误的大小/位置显示，并在动画结束时捕捉到正确的大小/位置，类似于问题 1。

* * *

为了演示这个问题，我制作了一个简单的自定义容器控制器，它可以进行一些自定义视图转换。它几乎是一个 UINavigationController 副本，它确实交叉溶解而不是在视图之间推送动画。

“推送”方法如下所示：

```
- (void)pushController:(UIViewController *)toViewController
{
    UIViewController *fromViewController = [self.childViewControllers lastObject];

    [self addChildViewController:toViewController];
    toViewController.view.frame = self.view.bounds;

    NSLog(@"Before transitionFromViewController:");
    [self transitionFromViewController:fromViewController
                      toViewController:toViewController
                              duration:0.5
                               options:UIViewAnimationOptionTransitionCrossDissolve
                            animations:^{}
                            completion:^(BOOL finished) {
                                [toViewController didMoveToParentViewController:self];
                            }];
} 
```

现在，`DetailViewController`（我推送的视图控制器）需要将其内容布局为`viewWillAppear:`. 它不能这样做，`viewDidLoad`因为当时它没有正确的框架。

出于演示目的，`DetailViewController`将其标签设置为 、 和 中的不同位置`viewDidLoad`和`viewWillAppear`颜色`viewDidAppear`：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"%s", __PRETTY_FUNCTION__);
    CGRect rect = self.descriptionLabel.frame;
    rect.origin.y = 50;
    self.descriptionLabel.frame = rect;
    self.descriptionLabel.text = @"viewDidLoad";
    self.descriptionLabel.backgroundColor = [UIColor redColor];
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    NSLog(@"%s", __PRETTY_FUNCTION__);
    CGRect rect = self.descriptionLabel.frame;
    rect.origin.y = 200;
    self.descriptionLabel.frame = rect;
    self.descriptionLabel.text = @"viewWillAppear";
    self.descriptionLabel.backgroundColor = [UIColor yellowColor];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    NSLog(@"%s", __PRETTY_FUNCTION__);
    CGRect rect = self.descriptionLabel.frame;
    rect.origin.y = 350;
    self.descriptionLabel.frame = rect;
    self.descriptionLabel.text = @"viewDidAppear";
    self.descriptionLabel.backgroundColor = [UIColor greenColor];
} 
```

* * *

现在，当按下 时`DetailViewController`，我希望`y =200`在动画开始时看到标签（左图），然后`y = 350`在动画完成后跳转（右图）。

![在此处输入图像描述](../Images/de00b5095b50a749a38a893ac47d175b.png) ![在此处输入图像描述](../Images/4f115a2314f4c26b9d2adeccf3e854cd.png) **动画前后的预期视图。**

* * *

但是，标签位于`y=50`，就好像在`viewWillAppear`动画发生之前制作的布局没有完成（左图）。但请注意，标签的背景设置为黄色（由 指定的颜色`viewWillAppear`）！

![在此处输入图像描述](../Images/27c60d1a85fe7a6cfef607d5688a16e8.png) ![在此处输入图像描述](../Images/4f115a2314f4c26b9d2adeccf3e854cd.png) **动画开头的布局错误。请注意，条形按钮也以错误的位置/大小开始。**

* * *

**控制台日志**
TransitionTest[49795:c07] -[DetailViewController viewDidLoad]
TransitionTest[49795:c07] 在 transitionFromViewController 之前：
TransitionTest[49795:c07] -[DetailViewController viewWillAppear:]
TransitionTest[49795:c07] -[DetailViewController viewWillLayoutSubviews]
TransitionTest[49795:c07 ] -[DetailViewController viewDidLayoutSubviews]
TransitionTest[49795:c07] -[DetailViewController viewDidAppear:]
**注意在*之后*`viewWillAppear:`调用 *`transitionFromViewController:`***

 ** * *

## **问题 1 的解决方案**

好的，这里是*部分*解决方案部分。通过显式调用`beginAppearanceTransition:`and `endAppearanceTransition`，`toViewController`视图将在过渡动画发生之前具有正确的布局：

```
- (void)pushController:(UIViewController *)toViewController
{
    UIViewController *fromViewController = [self.childViewControllers lastObject];

    [self addChildViewController:toViewController];
    toViewController.view.frame = self.view.bounds;

    [toViewController beginAppearanceTransition:YES animated:NO];

    NSLog(@"Before transitionFromViewController:");
    [self transitionFromViewController:fromViewController
                      toViewController:toViewController
                              duration:0.5
                               options:UIViewAnimationOptionTransitionCrossDissolve
                            animations:^{}
                            completion:^(BOOL finished) {
                                [toViewController didMoveToParentViewController:self];
                                [toViewController endAppearanceTransition];
                            }];
} 
```

**请注意，`viewWillAppear:`现在称为 BEFORE`transitionFromViewController:`** TransitionTest[18398:c07] -[DetailViewController viewDidLoad]
TransitionTest[18398:c07] -[DetailViewController viewWillAppear:]
TransitionTest[18398:c07] Before transitionFromViewController:
TransitionTest[18398:c07] -[DetailViewController viewWillLayoutSubviews]
TransitionTest [18398:c07] -[DetailViewController viewDidLayoutSubviews]
TransitionTest[18398:c07] -[DetailViewController viewDidAppear:]

* * *

## **但这并不能解决问题 2！**

无论出于何种原因，导航栏按钮在过渡动画开始时仍然以错误的位置/大小开始。我花了很多时间试图找到正确的解决方案，但没有运气。我开始觉得这是一个错误`transitionFromViewController:`或`UIAppearance`什么。请，非常感谢您对这个问题提供的任何见解。谢谢！

* * *

**我尝试过的其他解决方案**

*   打电话`[self.view addSubview:toViewController.view];`之前`transitionFromViewController:`

它实际上为用户提供了完全正确的结果，解决了问题 1 和 2。问题是，`viewWillAppear`两者`viewDidAppear`都会被调用两次！如果我想在`viewDidAppear`.

*   打电话`[toViewController viewWillAppear:YES];`之前`transitionFromViewController:`

我认为这与 call 几乎相同`beginAppearanceTransition:`。它解决了问题 1，但没有解决问题 2。另外，医生说不要直接打电话`viewWillAppear`！

*   使用`[UIView animateWithDuration:]`代替`transitionFromViewController:`

像这样：[self addChildViewController:toViewController]; [self.view addSubview:toViewController.view]; toViewController.view.alpha = 0.0;

```
[UIView animateWithDuration:0.5 animations:^{
    toViewController.view.alpha = 1.0;
} completion:^(BOOL finished) {
    [toViewController didMoveToParentViewController:self];
}]; 
```

它解决了问题 2，但视图从布局开始`viewDidAppear`（标签为绿色，y=350）。此外，交叉溶解不如使用`UIViewAnimationOptionTransitionCrossDissolve`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T17:11:16.033

好的，将 layoutIfNeeded 添加到 toViewController.view 似乎可以解决问题 - 这可以在视图显示在屏幕上之前正确布局（没有添加/删除），并且不再有奇怪的双 viewDidAppear: 调用。

```
- (void)pushController:(UIViewController *)toViewController
{
    UIViewController *fromViewController = [self.childViewControllers lastObject];

    [self addChildViewController:toViewController];

    toViewController.view.frame = self.view.bounds;
    [toViewController.view layoutIfNeeded];

    NSLog(@"Before transitionFromViewController:");
    [self transitionFromViewController:fromViewController
                      toViewController:toViewController
                              duration:0.5
                               options:UIViewAnimationOptionTransitionCrossDissolve
                            animations:^{}
                            completion:^(BOOL finished) {
                            }];

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-03T21:13:15.930

有同样的问题，你只需要转发外观事务和 UIView.Animate。这种方法解决了所有问题，不会产生新问题。这是一些 C# 代码（xamarin）：

```
var fromView = fromViewController.View;
var toView = toViewController.View;

fromViewController.WillMoveToParentViewController(null);
AddChildViewController(toViewController);

fromViewController.BeginAppearanceTransition(false, true);
toViewController.BeginAppearanceTransition(true, true);

var frame = fromView.Frame;
frame.X = -viewWidth * direction;
toView.Frame = frame;
View.Add(toView);

UIView.Animate(0.3f,
    animation: () =>
    { 
        toView.Frame = fromView.Frame; 
        fromView.MoveTo(x: viewWidth * direction);
    },
    completion: () =>
    {
        fromView.RemoveFromSuperview();

        fromViewController.EndAppearanceTransition();
        toViewController.EndAppearanceTransition();

        fromViewController.RemoveFromParentViewController();
        toViewController.DidMoveToParentViewController(this);
    }
); 
```

当然，您应该禁用外观方法的自动转发并手动进行：

```
public override bool ShouldAutomaticallyForwardAppearanceMethods
{
    get { return false; }
}

public override void ViewWillAppear(bool animated)
{
    base.ViewWillAppear(animated);
    CurrentViewController.BeginAppearanceTransition(true, animated);
}

public override void ViewDidAppear(bool animated)
{
    base.ViewDidAppear(animated);
    CurrentViewController.EndAppearanceTransition();
}

public override void ViewWillDisappear(bool animated)
{
    base.ViewWillDisappear(animated);
    CurrentViewController.BeginAppearanceTransition(false, animated);
}

public override void ViewDidDisappear(bool animated)
{
    base.ViewDidDisappear(animated);
    CurrentViewController.EndAppearanceTransition();
} 
```*

# php - 如果用户被阻止 php 包含页面，否则包含其他？

> ID：14632068
> 
> 赞同：0
> 
> 时间：2013-01-31T17:52:41.953
> 
> 标签：php, mysql

有人可以帮助我吗，我正在尝试合并这段代码：

```
<?php
$blocked_users = blocked_users();
while ($block = mysql_fetch_array($blocked_users)) {
if ($block['blocked'] == '1')  {
include("includes/mod_profile/mod_blocked.php");
}
}
?> 
```

将这段代码作为 else 语句：

```
$profile_info_set = get_profile_info();
while ($profile = mysql_fetch_array($profile_info_set)) 

        if (isset ($profile_id))
        if ($user['account_status'] == "Active")
        if ($user['account_type'] == "Escort") {
        include("includes/mod_profile/mod_profile.php");

        } 
```

我的数据库中有一个表，将用户阻止状态从 0 设置为 1。如果用户阻止某人并且该用户尝试访问他们的个人资料，那么我正在尝试让用户转到另一个显示阻止的页面. 我正在这样做`<?php include(.. ?>`

目前，我只是尝试将其放在页面顶部：

```
<?php
$blocked_users = blocked_users();
while ($block = mysql_fetch_array($blocked_users)) {
if ($block['blocked'] == '1')  {
include("includes/mod_profile/mod_blocked.php");

                }
}
?> 
```

虽然它正在工作并包括页面 mod_blocked.php 它也带来了 mod_profile.php 这是默认配置文件页面和重叠。所以基本上，如果用户没有被阻止，他们应该去 mod_profile.php，如果用户被阻止，他们应该去 mod_blocked.php。

有人可以告诉我我哪里出了问题以及如何实现这一目标吗？

这是整个页面的代码：

```
<?php
        $page_title = "Profile";
        include('includes/headerframe.php');

    // GET PROFILE ID FROM URL
    if (isset ($_GET['id'])) {
        $profile_id = $_GET['id'];
    }
    ?>
    <?php
    $blocked_users = blocked_users();
    while ($block = mysql_fetch_array($blocked_users)) {
    if ($block['blocked'] == '1')  {
    include("includes/mod_profile/mod_blocked.php");

                    }
    }
    ?>

    <?php
    $user_info_set = get_user_info();
    if (!$user = mysql_fetch_array($user_info_set)) {
        include ('includes/mod_profile/mod_noprofile.php');

    }

        else if (!isset($profile_id)) {
                        include("includes/mod_profile/mod_noprofile.php");
                    }

    $profile_info_set = get_profile_info();
    while ($profile = mysql_fetch_array($profile_info_set)) 

        if (isset ($profile_id))
        if ($user['account_status'] == "Active")
        if ($user['account_type'] == "Escort") {
                        include("includes/mod_profile/mod_profile.php");

                    }

                    else if ($block['blocked'] == '1')  {
                        include("includes/mod_profile/mod_noprofile.php");
                    }

                    $profile_info3_set = get_profile_info3();
    while ($profile = mysql_fetch_array($profile_info3_set)) 

        if (isset ($profile_id))
        if ($user['account_status'] == "Active")
        if ($user['account_type'] == "Client") {
                        include("includes/mod_profile/mod_account.php");
                    } 

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:19:34.613

这里有几个选项。

添加`break`或`die()`喜欢这样

```
<?php
$blocked_users = blocked_users();
while ($block = mysql_fetch_array($blocked_users)) {
if ($block['blocked'] == '1')  {
include("includes/mod_profile/mod_blocked.php");
break;
}
}
?> 
```

或者，将其包围在`else`

```
<?php
$page_title = "Profile";
include ('includes/headerframe.php');

// GET PROFILE ID FROM URL
if (isset($_GET['id'])) {
    $profile_id = $_GET['id'];
    die();
}

$blocked_users = blocked_users();
while ($block = mysql_fetch_array($blocked_users)) {
    if ($block['blocked'] == '1') {
        include ("includes/mod_profile/mod_blocked.php");
    } else {
        $user_info_set = get_user_info();
        if (!$user = mysql_fetch_array($user_info_set)) {
            include ('includes/mod_profile/mod_noprofile.php');
        } else if (!isset($profile_id)) {
            include ("includes/mod_profile/mod_noprofile.php");
        }

        $profile_info_set = get_profile_info();
        while ($profile = mysql_fetch_array($profile_info_set))

            if (isset($profile_id))
                if ($user['account_status'] == "Active")
                    if ($user['account_type'] == "Escort") {
                        include ("includes/mod_profile/mod_profile.php");
                    } else if ($block['blocked'] == '1') {
                        include ("includes/mod_profile/mod_noprofile.php");
                    }

        $profile_info3_set = get_profile_info3();
        while ($profile = mysql_fetch_array($profile_info3_set))

            if (isset($profile_id))
                if ($user['account_status'] == "Active")
                    if ($user['account_type'] == "Client") {
                        include ("includes/mod_profile/mod_account.php");
                    }
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:35:08.040

我不确定我是否完全理解您在做什么，但是当我正确回答您的问题时，您可以通过以下方式进行操作：

```
$page_title = "Profile";
include('includes/headerframe.php');

// stores the correct include file...
$toInclude = false;

// GET PROFILE ID FROM URL
if (isset ($_GET['id'])) {
    $profile_id = $_GET['id'];
}

// look up for blocked user..
$blocked_users = blocked_users();
while ($block = mysql_fetch_array($blocked_users)) {
    if ($block['blocked'] == '1')  {
        // don't do the include inside the loop
        // we simply set the $toInclude
        $toInclude = "includes/mod_profile/mod_blocked.php";
        break;
    }
}
$user_info_set = get_user_info();
// in case no include is set, and there is no profile...
if ( !$toInclude  && (!$user = mysql_fetch_array($user_info_set) || 
     !isset($profile_id)) ) {
    // we set the $toInclude now
    $toInclude = 'includes/mod_profile/mod_noprofile.php';
}

if($toInclude) {
    // either blocked or no-profile
    include($toInclude);
} else {
    // user is not blocked, and you have a profile
    // proceed with your code for normal user handling here
} 
```

# javascript - 是否可以让按钮开始下载 dom 元素？

> ID：14632069
> 
> 赞同：2
> 
> 时间：2013-01-31T17:52:46.230
> 
> 标签：javascript, svg, dojo, d3.js

我有一个在页面中生成的 svg，我不是从外部来源引入的。我希望这个 svg 可以下载打印。有没有办法（使用客户端 Javascript）将 dom 节点下载为文本文件？我仅限于这个项目的 dojo 和 d3 库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T18:10:32.123

假设客户端使用的是 HTML5 网络浏览器，这可以很容易地使用[`<a>`](https://developer.mozilla.org/en-US/docs/HTML/Element/a)s[*下载*属性](http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#attr-hyperlink-download)来实现。如果您希望通过其他方式调用该行为，则需要在此元素上使用[*MouseEvent*](https://developer.mozilla.org/en-US/docs/DOM/document.createEvent)[模拟单击](https://developer.mozilla.org/en/docs/DOM/event.initMouseEvent)​​，但不必将节点附加到文档中。[我之前已经回答过一个](https://stackoverflow.com/a/12718755/1615483)[类似](https://stackoverflow.com/a/12718755/1615483)[**的问题**](https://stackoverflow.com/a/12718755/1615483)，但是在这里，将s *href*设置为 svg 的文件位置，除非它是动态创建的——在这种情况下，您将对描述它的文本进行编码以创建一个[*数据 URI*](https://developer.mozilla.org/en-US/docs/data_URIs)。[](https://developer.mozilla.org/en-US/docs/DOM/document.createEvent)*[](https://stackoverflow.com/a/12718755/1615483)**`<a>`*[](https://developer.mozilla.org/en-US/docs/data_URIs)****

 *****可以使用[*XMLSerializer从它的*](https://developer.mozilla.org/en-US/docs/XMLSerializer)[*SVGSVGElement*](https://developer.mozilla.org/en-US/docs/DOM/SVGSVGElement)节点获取描述 SVG 的 XML 文本。[](https://developer.mozilla.org/en-US/docs/XMLSerializer)

 *```
var serializer = new XMLSerializer();
serializer.serializeToString(svg); // xml string for `svg` (your node) 
```

请注意，任何“另存为”对话框都取决于客户端的配置。

```
// assuming var `svg` for your SVG node
var a = document.createElement('a'), xml, ev;
a.download = 'my_svg.svg'; // file name
xml = (new XMLSerializer()).serializeToString(svg); // convert node to xml string
a.href = 'data:application/octet-stream;base64,' + btoa(xml); // create data uri
// <a> constructed, simulate mouse click on it
ev = document.createEvent("MouseEvents");
ev.initMouseEvent("click", true, false, self, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
a.dispatchEvent(ev); 
```******

# javafx-2 - TextArea - 是否可以获得行数？

> ID：14632071
> 
> 赞同：3
> 
> 时间：2013-01-31T17:52:51.633
> 
> 标签：javafx-2

我想知道是否有任何方法可以知道 textarea 有多少行文本。而且，如果可以监听行数的变化。我正在尝试开发一个组件，它起初只显示一行，然后随着写入行数的增加而开始增长。如果还不够清楚，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T09:56:29.153

计算 textArea 的当前行数：

作为一个字符串：

```
String.valueOf(textArea.getText().split("\n").length); 
```

作为整数：

```
textArea.getText().split("\n").length; 
```

`System.getProperty("line.separator")`可以用来代替`"\n"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T04:39:29.037

要监视行数，您可以将侦听器或绑定添加到`TextArea#textProperty`.

要跟踪高度，您可以使用存储实际文本`TextArea`的样式类将侦听器添加到子节点的边界。`content`请参见下一个示例：

```
public void start(Stage primaryStage) {
    final TextArea txt = new TextArea("hi");

    // find subnode with styleclass content and add a listener to it's bounds
    txt.lookup(".content").boundsInLocalProperty().addListener(new ChangeListener<Bounds>() {
        @Override
        public void changed(ObservableValue<? extends Bounds> ov, Bounds t, Bounds t1) {
            txt.setPrefHeight(t1.getHeight());
        }
    });

    Button btn = new Button("Add");
    btn.setOnAction(new EventHandler<ActionEvent>() {
        @Override
        public void handle(ActionEvent event) {
            txt.setText(txt.getText() + "\n new line");
        }
    });

    VBox root = new VBox();
    root.getChildren().addAll(btn, txt);

    primaryStage.setScene(new Scene(root, 300, 250));
    primaryStage.show();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T20:41:14.557

> 它一开始只显示一行，然后随着写入行数的增加而开始增长。

只需将新行文本附加到带有前缀换行符的 TextArea`\n`

```
textArea.appendText("\n This is new line Text"); 
```

示例代码：

```
for (int i = 1; i < 100; i++) {
            textArea.appendText("\n This is Line Number : " +i);
        } 
```

结果 ：

![在此处输入图像描述](../Images/80c1e8cde7ae48f179a0b671b2858a0d.png)

我误解了你的问题吗？

# javascript - 为什么动作（在 ASP.NET MVC 4 中）不与 onclick 事件一起运行？

> ID：14632079
> 
> 赞同：0
> 
> 时间：2013-01-31T17:53:21.057
> 
> 标签：javascript, asp.net-mvc-4, onclick, actionlink

我的操作在没有 onclick 事件的情况下运行，但它没有在 onclick 事件下运行（只有 JavaScript 函数运行良好）。

我在视图中使用它：

```
@Html.ActionLink(item.Name, "Documents", "Home", New With {.id = item.Id}, New With {.id = item.Id, .onclick="return showMenu("+item.Id+")"}) 
```

这是 JavaScript 函数：

```
<script type="text/javascript">
function showMenu(id) {
    if (document.getElementById(id).parentNode.getElementsByClassName("subItem")[0] != undefined) {
        if (document.getElementById) {
            thisMenu = document.getElementById(id).parentNode.getElementsByClassName("subItem")[0].style
            if (thisMenu.display == "block") {
                thisMenu.display = "none"
            }
            else {
                thisMenu.display = "block"
            }
            return false
        }
        else {
            return true
        }
    }
    else {
        return false
    }
} 
```

为什么不运行号召性用语？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:54:33.180

如果`showMenu`返回 false，表单将不会发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:56:38.393

当您在`onclick`链接（`<a>`标签）事件上返回 false 时，您是在告诉浏览器不要跟随该链接。如果你希望链接被关注，你应该确保你返回 true。

# visual-studio - 打字稿：VisualStudio 2012 中的 --out 指令

> ID：14632085
> 
> 赞同：1
> 
> 时间：2013-01-31T17:53:38.920
> 
> 标签：visual-studio, compilation, typescript

我已经看到可以`js`使用该`--out`指令将所有打字稿文件编译成一个目标文件。不过，我没有找到在 VisualStudio 2012 中执行此操作的方法。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:56:53.740

您需要编辑项目文件。在接近底部的地方，您会发现一堆命名为 XML 元素`TypeScript....`，它们改变了各种编译选项——它应该是不言自明的。

# android - 在 android 上使用内置的充气城堡库

> ID：14632092
> 
> 赞同：0
> 
> 时间：2013-01-31T17:54:11.123
> 
> 标签：android, sdk, certificate

我现在正致力于在 android 上创建 PKCS#10 CSR。

但是，以下类无法在带有 Android sdk10 的 eclipse IDE 上编译（下面的代码适用于带有 PC 的充气城堡 1.47）

我觉得我的 android SDK 不包括充气城堡库

因为无法识别函数“PKCS10CertificationRequest”

```
public class PKCS10Generater
{
public static PKCS10CertificationRequest generateRequest(
        KeyPair pair)
        throws Exception

        {           
         return new PKCS10CertificationRequest(
                 "SHA256withRSA",
                 new X500Principal("CN=Test CA Certificate"),
                 //new X500Principal("CN=end"),
                 pair.getPublic(),
                 null,
                 pair.getPrivate());
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:12:04.957

Android 中没有内置的 Bouncy castle 库。我你需要使用 Bouncy castle，你必须包含库。

有一些内置的加密库，所以最好的可能是你可以使用它们。 [http://developer.android.com/reference/javax/crypto/package-summary.html](http://developer.android.com/reference/javax/crypto/package-summary.html)

# javascript - 如何替换正则表达式中的变量

> ID：14632101
> 
> 赞同：0
> 
> 时间：2013-01-31T17:54:43.177
> 
> 标签：javascript, regex

我有一个函数可以从传递给函数的字符串中提取特殊修饰符

```
function parseContext(record, txtInput) {
    var context = String((txtInput.match(/(^\@[\w\n]*)/g) || [""])[0]).replace("@", "");
    record.entry = txtInput;
    if (command && command.length) {
        txtInput = String(txtInput).replace("/" + command, "");
        record.command = command;
        record.entry = txtInput;
    }
    return record;
} 
```

我不确定该怎么做（在这种情况下）是如何抽象它，以便我可以解析出任意前导字符，如下所示：

```
function parseModifier(record, modifier, txtInput) {
    var command = String((txtInput.match(/(^\  ---what goes here? --- [\w\n]*)/g) || [""])[0]).replace(modifier, ""); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T17:57:29.437

```
var re = new RegExp('(^\\' + anyVariable + '[\w\n]*)', 'g');
var command = String((txtInput.match(re || [""])[0]).replace(modifier, ""); 
```

使用[RegExp](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)构造函数允许您使用任何变量，因为它需要一个字符串作为输入。

# node.js - Socket.io 安装失败 | 视窗 7 64 位

> ID：14632104
> 
> 赞同：0
> 
> 时间：2013-01-31T17:55:02.820
> 
> 标签：node.js, socket.io

我已经安装了 NodeJs 和模块“express”。现在我想安装socket.io，但它不起作用。我尝试了不同的 NodeJS 版本，但所有安装都失败了。

这是日志： http: [//pastebin.com/T8ZZRTML](http://pastebin.com/T8ZZRTML)

这是截图：[http ://www10.pic-upload.de/31.01.13/ld98apo58e.jpg](http://www10.pic-upload.de/31.01.13/ld98apo58e.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:25:36.687

看起来像本机插件构建错误。您是否设置了[适当的构建环境](https://github.com/TooTallNate/node-gyp#installation)？

> *   Python（推荐 v2.7.3，不支持 v3.xx）
> *   Microsoft Visual Studio C++ 2010（Express 版本运行良好）
> *   对于节点和本机模块的 64 位构建，您还需要 Windows 7 64 位 SDK
> *   如果安装失败，请尝试卸载您首先安装的任何 C++ 2010 x64&x86 Redistributable。
> *   如果您收到未安装 64 位编译器的错误，您可能还需要 Windows SDK 7.1 的编译器更新

# sql - 在sql server中加入额外的行

> ID：14632107
> 
> 赞同：0
> 
> 时间：2013-01-31T17:55:22.373
> 
> 标签：sql

这个查询：

```
select distinct a.id, a.caminho, c.indexObr, d.id, d.tamanho, d.mask, d.idName
from gedaidb.dbo.sistema_Documentos as a
join gedaidb.dbo.sistema_DocType as b on a.idDocType = b.id
join gedaidb.dbo.sistema_DocType_Index as c on b.id = c.docTypeId
join gedaidb.dbo.sistema_Indexes as d on c.indexId = d.id
join gedaidb.dbo.sistema_Indexacao as e on a.id = e.idDocumento
where a.id = 97 
```

返回此结果集：

```
id  caminho                                                     indexObr    id  tamanho    mask     idName
97  C:\Users\Guilherme\Desktop\Guilherme\Tipo 3\SkypeSetup.exe  0           25  10         NULL     Numérico
97  C:\Users\Guilherme\Desktop\Guilherme\Tipo 3\SkypeSetup.exe  0           26  10         NULL     AlfaNumérico
97  C:\Users\Guilherme\Desktop\Guilherme\Tipo 3\SkypeSetup.exe  1           24  10         NULL     Caracter 
```

现在如果我在查询中添加 e.valor ：

```
select distinct a.id, a.caminho, c.indexObr, d.id, d.tamanho, d.mask, d.idName, e.valor
from gedaidb.dbo.sistema_Documentos as a
join gedaidb.dbo.sistema_DocType as b on a.idDocType = b.id
join gedaidb.dbo.sistema_DocType_Index as c on b.id = c.docTypeId
join gedaidb.dbo.sistema_Indexes as d on c.indexId = d.id
join gedaidb.dbo.sistema_Indexacao as e on a.id = e.idDocumento
where a.id = 97 
```

我得到了返回的那些行：（唯一的额外列是最后一个，勇气）

```
97  C:\Users\Guilherme\Desktop\Guilherme\Tipo 3\SkypeSetup.exe  0   25  10  NULL    Numérico    11111
97  C:\Users\Guilherme\Desktop\Guilherme\Tipo 3\SkypeSetup.exe  0   25  10  NULL    Numérico    aaaa111
97  C:\Users\Guilherme\Desktop\Guilherme\Tipo 3\SkypeSetup.exe  0   25  10  NULL    Numérico    ccccc
97  C:\Users\Guilherme\Desktop\Guilherme\Tipo 3\SkypeSetup.exe  0   26  10  NULL    AlfaNumérico    11111
97  C:\Users\Guilherme\Desktop\Guilherme\Tipo 3\SkypeSetup.exe  0   26  10  NULL    AlfaNumérico    aaaa111
97  C:\Users\Guilherme\Desktop\Guilherme\Tipo 3\SkypeSetup.exe  0   26  10  NULL    AlfaNumérico    ccccc
97  C:\Users\Guilherme\Desktop\Guilherme\Tipo 3\SkypeSetup.exe  1   24  10  NULL    Caracter    11111
97  C:\Users\Guilherme\Desktop\Guilherme\Tipo 3\SkypeSetup.exe  1   24  10  NULL    Caracter    aaaa111
97  C:\Users\Guilherme\Desktop\Guilherme\Tipo 3\SkypeSetup.exe  1   24  10  NULL    Caracter    ccccc 
```

所有加入的表都有 1-N 关系，据我所知，如果没有 NN 关系，我不应该得到那些额外的行

这个问题背后的理论是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:07:41.110

除非您在 e.valor 上放置一个聚合函数（最小值、最大值等），或者将表 'e' 转换为派生表，从而将其与表 'a' 建立一对一的关系，否则你得到的结果集是正确的—— e.valor 使这些行`distinct`彼此不同。

gedaidb.dbo.sistema_Indexacao（表'e'）显然（至少）与gedaidb.dbo.sistema_Documentos（表'a'）存在一对多关系。因此，您应该预料到当您在 e.valor（或表 e 中的任何其他字段）中引入不同的值时所看到的“多”效应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:55:45.700

如果提供了表创建/插入语句，那么我们将尝试使用 sqlfiddle。尽管如此，请尝试一下：-（仅未经测试和逻辑，因此请对其进行测试并发表评论）

注意：您可以根据需要调整`x.r`where 条件和字段`order by`内。`row_number()`

```
select x.id, x.caminho, x.indexObr, x.id, x.tamanho, x.mask, x.idName, x.valor
from      
(     
    SELECT  a.id, a.caminho, c.indexObr, d.id, d.tamanho, d.mask, d.idName, e.valor
    row_number() over ( partition by b.val3 e.valor                 
    order by a.id, a.caminho, c.indexObr, d.id, d.tamanho, d.mask, d.idName) r     
    from gedaidb.dbo.sistema_Documentos as a
    join gedaidb.dbo.sistema_DocType as b on a.idDocType = b.id
    join gedaidb.dbo.sistema_DocType_Index as c on b.id = c.docTypeId
    join gedaidb.dbo.sistema_Indexes as d on c.indexId = d.id
    join gedaidb.dbo.sistema_Indexacao as e on a.id = e.idDocumento
    where a.id = 97    
) x     
where x.r > 1 -- 
```

# vim - 将映射中的寄存器名称传递给 ex 命令

> ID：14632109
> 
> 赞同：4
> 
> 时间：2013-01-31T17:55:35.057
> 
> 标签：vim

假设我想在 vim 中创建一个地图，它将调用 ex 命令作为其工作的一部分。并假设 ex 命令将寄存器名称作为输入。

这是一个玩具示例：

```
nmap <leader>p :put x 
```

问题在于“x”寄存器将始终被使用。但是在打字时，我希望能够写：

```
"a<leader>p 
```

要使用“a”寄存器，或者：

```
"b<leader>p 
```

使用'b'寄存器。

有没有办法可以将“当前正常模式寄存器”传递给“ex”命令？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T18:08:42.763

啊，我想通了。

诀窍是`<expr>`在映射中使用。

所以，对于我的例子，答案是：

```
nnoremap <expr> <leader>p ':put ' . v:register . '<CR>' 
```

检查`:h map-expression`并`:h v:register`了解更多信息。

# javascript - 使用文本填写某些字段时启用提交按钮

> ID：14632110
> 
> 赞同：2
> 
> 时间：2013-01-31T17:55:41.557
> 
> 标签：javascript, html, forms, button, submit

我有以下表格和javascript：

```
<script type="text/javascript">
function toggleButton(ref,bttnID){
  document.getElementById(bttnID).disabled= ((ref.value !== ref.defaultValue) ? false : true);
}
</script>

<form action="" method="post" id="subscribe" name="subscribe">
<label>NAME:</label>
<input type="text" name="name" class="subName" onkeyup="toggleButton(this,'bttnsubmit');">
<label>EMAIL:</label>
<input type="text" name="email" class="subEmail" id="sub_email">
<input type="button" name="button" value="Subscribe" disabled='disabled' id='bttnsubmit'/>
</form> 
```

当我第一次加载我的网站时，提交按钮被禁用，正如我所愿，因为文本字段中没有文本。现在我想在文本字段中放置一些文本后启用该按钮。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T18:21:14.620

问题中的现有代码运行良好，但在删除文本时被禁用。这可能是其他人所需要的，但您可以进行一些小的更改以将其永久删除而无需 jquery（jquery 不在标签中）

```
function toggleButton(ref,bttnID){
  document.getElementById(bttnID).removeAttribute("disabled");
} 
```

并添加`onkeyup="toggleButton(this,'bttnsubmit')`到需要启用按钮的任何字段

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T18:00:55.527

使用 jQuery：

```
$(document).ready(function() {
     $('#bttnsubmit').attr('disabled','disabled');
     $('input[type="text"]').keyup(function() {
        if($(this).val() != '') {
           $('input[type="submit"]').removeAttr('disabled');
        }
     });
 }); 
```

来源：[jQuery 禁用/启用提交按钮](https://stackoverflow.com/questions/1594952/jquery-disable-enable-submit-button)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T18:13:20.377

添加完成此操作的最终代码：

```
<script type="text/javascript">
$(document).ready(function() {
     $('#bttnsubmit').attr('disabled','disabled');
     $('#subEmail').keyup(function() {
        if($(this).val() != '') {
           $('#bttnsubmit').removeAttr('disabled');
        }
        else {
        $('#bttnsubmit').attr('disabled','disabled');
        }
     });
 });
</script> 
```

# java - Java Eclipse 构建路径错误 Maven

> ID：14632119
> 
> 赞同：2
> 
> 时间：2013-01-31T17:56:23.723
> 
> 标签：java, eclipse, maven, m2eclipse

我刚开始使用 Maven。有什么方法可以将 Maven 依赖项添加到 Eclipse 项目的构建路径中？截至目前，我的项目充满了红色 x，因为 Eclipse 无法包含来自这些依赖项之一的一些外部类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:08:12.017

首先，您需要设置 M2_REPO 变量。这是一个类路径变量，它告诉 eclipse 您指定的 maven 存储库所在的位置。您可以通过在工作区中运行以下命令来设置 M2_REPO。

```
mvn -Declipse.workspace="replace with your Eclipse Workspace" eclipse:configure-workspace 
```

接下来确保您的项目通过运行以下命令应用了一个 Maven 事实

```
mvn eclipse:eclipse 
```

在项目的工作区中。跑

```
mvn clean package 
```

只是为了确保在重新启动 Eclipse 之前解决所有依赖项并可用。

一旦你再次重新启动 eclipse 并启动你的项目，你的问题应该得到解决。

您应该查找有关这 2 个命令以及如何有效使用它们的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T21:01:28.823

为自己省去大量麻烦并获得 M2Eclipse 插件。该插件将为您处理所有项目设置，您不必担心执行`mvn eclipse:eclipse`命令。

[http://www.sonatype.org/m2eclipse/](http://www.sonatype.org/m2eclipse/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T17:59:39.630

你执行了吗

```
mvn eclipse:configure-workspace -Declipse.workspace=/path/to/workspace 
```

?

你需要执行它所以maven设置了`M2_REPO`eclipse的路径。或者您可以手动设置。

这样做后请记住重新启动eclipse：P

# javascript - 现有 html 内容的 Kendo 编辑器和胡萝卜位置

> ID：14632123
> 
> 赞同：-1
> 
> 时间：2013-01-31T17:56:38.933
> 
> 标签：javascript, html, model-view-controller, kendo-ui

我有使用 html 内容预先填充编辑器的场景。例如

```
<P>The <ins>black</ins> spotted fox <del>leaped</del> 
```

如果用户现在想要在 word jumped 旁边添加额外的内容，那么元素的格式将被保留，因此任何额外的文本都会默认应用删除线。有没有办法避免这种情况，而无需用户手动重置工具中的删除线选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:34:45.590

你可以在最后添加一个空格吗？

```
<textarea id="editor">
  <P>The <ins>black</ins> spotted fox <del>leaped</del>&nbsp;
</textarea> 
```

我不知道你为什么会因为这个而被否决。

# ios - SEL 作为 iOS 中的 IBOutlet

> ID：14632124
> 
> 赞同：1
> 
> 时间：2013-01-31T17:56:40.977
> 
> 标签：ios, interface-builder

如何向自定义视图添加操作？与 UIButton 的操作类似，我可以在 Inteface Builder 中进行连接。我不能使用像下面这样的 SEL，因为它不是一个对象，我该用什么？

```
 @property(nonatomic, weak) IBOutlet SEL action; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:05:39.283

您想让您的自定义对象成为 UIControl 的子类（它是 UIView 的子类）。然后你得到所有的目标/动作方法......如果你在代码中这样做，那么要探索的将是

```
– addTarget:action:forControlEvents: 
```

如果您制作自定义 UIControl 对象，则可以在情节提要中拖出自定义视图并将其自定义类设置为您的 customControl。然后，您可以将 IBAction 链接拖到您的 viewController 中，就像它是一个按钮一样。

以下是如何在代码中制作...

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UIControl* customControl = [[UIControl alloc]initWithFrame:CGRectMake(20, 20, 200, 200)];
    customControl.backgroundColor = [UIColor redColor];
    [customControl addTarget:self 
                      action:@selector(customAction:) 
            forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:customControl];
}

- (void)customAction:(id)sender
{
    NSLog (@"touched");
} 
```

# javascript - 从 javascript 函数返回 true 或 false

> ID：14632125
> 
> 赞同：4
> 
> 时间：2013-01-31T17:56:43.543
> 
> 标签：javascript, return-value

我正在对函数中的字符串进行正则表达式检查：

```
function ValidateZipCodeString(listOfZipCodes) {
    var regex = /^([, ]*\d{5})+[, ]*$/,
    matches = regex.exec(listOfZipCodes);

    if (regex.exec(listOfZipCodes) === null) {
        console.log('validation failed');
        return false;
    } else {
        console.log('validation passed');
        return true;
    }
} 
```

正则表达式正确检测有效/无效的邮政编码列表。

我用这个调用函数：

```
console.log('zip code: ' + listOfZipCodes);
if (ValidateZipCodeString(listOfZipCodes)) {
    $tr.find('label#lblCoverageEditError').text('There is invalid text in the list of zip codes. Only 5-digit zip codes allowed.').show();
} else {
    console.log('validate function returned true');
} 
```

问题是，当验证函数中的控制台输出显示“验证失败”时，上述 if/else 转到 else 子句。所以我一定不能正确调用该函数。

做我想做的事情的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T18:00:01.403

您的功能可以大大简化为：

```
function ValidateZipCodeString(listOfZipCodes) {
    var regex = /^([, ]*\d{5})+[, ]*$/;

    if (regex.test(listOfZipCodes)) {
        console.log('validation passed');
        return true;
    } else {
        console.log('validation failed');
        return false;
    }
} 
```

...或者：

```
function ValidateZipCodeString(listOfZipCodes) {
    var regex = /^([, ]*\d{5})+[, ]*$/;
    return regex.test(listOfZipCodes);
} 
```

...甚至只是：

```
function ValidateZipCodeString(listOfZipCodes) {
    return /^([, ]*\d{5})+[, ]*$/.test(listOfZipCodes);
} 
```

...但真正的问题（正如 Teemu[指出的那样](https://stackoverflow.com/a/14632273/152648)）不在于您的功能，而在于使用它。你的函数回答了这个问题，“这是一个有效的邮政编码字符串吗？”，但你使用它是说，“如果我的函数说这是无效的，就说这是无效的。”

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T18:05:57.380

`true`实际上，当验证失败时，您的验证功能不会返回。您只是错误地检查了该值，它应该是：

```
if (!ValidateZipCodeString(listOfZipCodes)) {
    $tr.find('label#lblCoverageEditError').text('There is invalid text in the list of zip codes. Only 5-digit zip codes allowed.').show();
} else {
    console.log('validate function returned true');
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T18:19:30.593

其他人正确地指出您只是以错误的顺序进行了测试。但是，更重要的是，您的正则表达式不正确，例如它会为“1234567890”返回 true。

这是一个建议：

```
function ValidateZipCodeString(listOfZipCodes) {
    return /^\d{5}(\s*,\s*\d{5})*$/.test(listOfZipCodes);
} 
```

# c# - 每次我对项目进行更改时，SQLCLR 数据库名称都会添加 _1

> ID：14632130
> 
> 赞同：28
> 
> 时间：2013-01-31T17:56:54.663
> 
> 标签：c#, sql, visual-studio-2012, sqlclr

这是我看到的一个新现象，我的数据库名称是：MySQLCLR，有一个脚本总是在其中给出这个名称：

```
:setvar DatabaseName "MySQLCLR" 
```

突然之间，每次我对我的 sqlclr 项目代码进行任何更改并重新编译时，新的输出脚本的名称中都会添加一个 _1，如下所示：

```
:setvar DatabaseName "MySQLCLR_1" 
```

对代码和后续构建的另一个更改将生成：

```
:setvar DatabaseName "MySQLCLR_1_1" 
```

等等……

知道为什么会这样吗？

Windows 2008 R2 上的 VS2012、MSSQL2008 R2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:18:35.073

转到项目的属性，转到*Debug*并在*Target Connection String*部分下，单击***Restore Default***。

也许您需要安装[SQL Server Data Tools - 2012 年 12 月更新](http://msdn.microsoft.com/en-us/jj650015)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T15:02:07.940

我已经看到 Visual Studio 也导致其他 SQL 项目文件出现此问题。就我而言，这是因为它们是已经在该位置的文件，并且名称与您尝试提供的名称相同。检查该目录并查看文件是否已存在。如果是这样，请删除它们，然后您的脚本应该按预期运行。

当人们进行错误的 TFS 合并并将生成的文件挂在本地计算机上时，我遇到了这个问题。当他们重新生成它们时，生成器以与您所描述的类似的方式递增所有文件名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T14:02:42.910

我认为这是因为它将数据库保存在同一位置而不会覆盖旧数据库，您的数据库是否在 Visual Studio 中连接？如果是，试试这个：

在解决方案资源管理器示例中搜索您的数据库：“database.sdf”。单击数据库并查看属性。可能应该有一个属性是默认的“不复制”或其他东西，如果更新，则将其更改为复制，然后重新编译。那么问题仍然存在吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-29T06:24:30.313

我也遇到了这个。您必须更改的设置位于左侧的 Project Properties / DEBUG 选项卡中。（右键单击您的数据库项目，选择属性。）在那里，您将看到一个目标连接字符串。在那里，您将看到讨厌的 _1（或 _2）附加到您的数据库名称。这是您需要进行编辑的地方，以便在部署步骤中生成的部署脚本（例如 mydatabase.sql）具有正确的数据库名称。

是的，这个设置甚至会影响 RELEASE 版本，即使它位于调试选项卡中。去搞清楚。

只需选择“恢复默认”按钮，附加的数字就会消失。点击绿色 > 按钮或 f5（即使在发布模式下），您将获得一个漂亮干净的部署脚本，其中包含正确的名称。

# cakephp-2.1 - Cakephp 2 按最近日期分页顺序

> ID：14632131
> 
> 赞同：0
> 
> 时间：2013-01-31T17:56:58.387
> 
> 标签：cakephp-2.1

我试图从我的 CakePhp 2.x 应用程序中的 Orders 表中获取结果列表，以便按最接近今天的日期对自己进行排序。

在通常的 mysql 查询中，我使用了类似的方法，使用以下语法：

```
ABS(DATEDIFF(Order.duedate, NOW())) 
```

但是在 Cake 我不确定如何让这样的自定义查询在分页助手中工作。这是我可能需要在模型的查找器查询中设置的吗？

这是我目前拥有的控制器（设置为沼泽标准降序）

```
 public function index() {
           $this->paginate = array( 
                    'conditions' => array (
                        'Order.despatched' => array('Not Despatched' , 'Split Despatched')
                    ),
                    'limit' => 25,
                    'order' => array('Order.duedate' => 'DESC')
            );

           $data = $this->paginate('Order');
           $this->set('orders', $data);
} 
```

编辑：使用下面评论中的信息，我在控制器中添加了一个虚拟字段，这会导致 sql 错误。起初我认为这是由于模型内的关联，为了尝试纠正这一点，我将 virtualField 添加到订单模型和关联帐户模型的构造函数中。但是，这对中断的 sql 部分没有任何改变。完整的sql错误是：

```
Error: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'AS `Order__closestdate`, `Account`.`id`, `Account`.`company`, `Account`.`contac' at line 1

SQL Query: SELECT `Order`.`id`, `Order`.`order_id`, `Order`.`orderdate`,
 `Order`.`duedate`, `Order`.`rework`, `Order`.`rework_notes`, `Order`.`comments`, 
`Order`.`status`, `Order`.`customer`, `Order`.`last_edited`, `Order`.`value`, 
`Order`.`quantity`, `Order`.`order_for`, `Order`.`warehouse`, `Order`.`haulier`, 
`Order`.`terms`, `Order`.`type`, `Order`.`despatched`, `Order`.`despatched_date`, 
`Order`.`invoiced`, `Order`.`invoice_date`, `Order`.`bookingref`, 
`Order`.`purchaseref`, `Order`.`payment_due`, `Order`.`payment_status`, 
`Order`.`payment_date`, (ABS(DATEDIFF(duedate, NOW())) AS `Order__closestdate`, 
`Account`.`id`, `Account`.`company`, `Account`.`contact`, `Account`.`phone`, 
`Account`.`email`, `Account`.`postcode`, `Account`.`created`, `Account`.`modified`, 
`Account`.`customer`, `Account`.`address1`, `Account`.`address2`, `Account`.`town`, 
`Account`.`county`, (ABS(DATEDIFF(duedate, NOW())) AS `Account__closestdate` FROM 
`hunter_om`.`orders` AS `Order` LEFT JOIN `hunter_om`.`accounts` AS `Account` ON 
(`Order`.`customer` = `Account`.`customer`) WHERE `Order`.`despatched` IN ('Not 
Despatched', 'Split Despatched') ORDER BY (ABS(DATEDIFF(duedate, NOW())) DESC LIMIT 25 
```

作为参考，模型中的代码是：

```
//Order Model
public $virtualFields = array(
   'closestdate' => 'ABS(DATEDIFF(duedate, NOW())'
);

//Account Model
  public function __construct($id = false, $table = null, $ds = null) {
   parent::__construct($id, $table, $ds);
   $this->virtualFields['closestdate'] = $this->Order->virtualFields['closestdate'];
   } 
```

感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T15:24:26.600

在分页之前，您需要在 Order 模型中添加一个“virtualField”；

```
$this->Order->virtualFields['closestdate'] = "ABS(DATEDIFF(Order.duedate, NOW()))"; 
```

然后将该字段用作查询/分页中的常规字段

```
public function index() {

    $this->Order->virtualFields['closestdate'] = "ABS(DATEDIFF(Order.duedate, NOW()))";

    $this->paginate = array( 
        'conditions' => array (
            'Order.despatched' => array('Not Despatched' , 'Split Despatched')
        ),
        'limit' => 25,
        'order' => array('Order.closestdate' => 'DESC')
    );

    $data = $this->paginate('Order');
    $this->set('orders', $data);
} 
```

# java - Java程序随机结束，没有给出错误

> ID：14632132
> 
> 赞同：0
> 
> 时间：2013-01-31T17:57:01.713
> 
> 标签：java, filewriter, bufferedwriter

我的程序使用包裹在 FileWriter 周围的 BufferedWriter ，每次运行时都会在某个位置结束。我终其一生都无法弄清楚为什么。

下面是我的代码。我已经考虑过内存泄漏，但我确信这会引发异常（当然，除非我已经阻止它出现）。如果它应该引发错误，我该如何解决？谢谢

```
import java.io.*;

public class BuffProcess {

static BufferedReader brOne, brTwo;
static FileReader inOne, inTwo;
//static FileInputStream fOne, fTwo;
static FileWriter out;
static BufferedWriter bw;
static StringBuffer sbOne, sbTwo;
static String stOne, stTwo, tech;
static char cOne, cTwo;
static boolean bOne, bTwo;
static int count, intOne, intTwo, intThree, intFour, intFive, intSix, maxSet, lineCount;
static int pCount, check;

public static void p(String s) {

    try {
        inOne = new FileReader(s + ".ck2");
        inTwo = new FileReader(s + ".ck2");
        brOne = new BufferedReader(inOne);
        brTwo = new BufferedReader(inTwo);
        out = new FileWriter(s + "_edit.ck2");
        bw = new BufferedWriter(out);
    } catch (FileNotFoundException e) {
        System.out.println("FileNotFoundException");
    } catch (IOException e) {
        System.out.println("IOException");
    }

    stOne = "Start";
    stTwo = "Start";
    tech = "Pants";
    bOne = true;
    bTwo = false;
    count = 0;
    pCount = 929;

    try {

        while (stOne != null) { //For entire file
            lineCount++;
            //print("Lines processed=" + lineCount);
            stOne = brOne.readLine();
            brTwo.readLine();
            bw.write(stOne); bw.newLine();

            // Find settlements area of file
            if (stOne.contains("name=\"Vestisland\"")) { //Vestisland action (settlements section)

                for (int i = 2; i > 0; i--) {
                    stOne = brOne.readLine();
                    brTwo.readLine();
                    bw.write(stOne); bw.newLine();

                }

                stOne = brOne.readLine();
                brTwo.readLine();

                if (stOne.contains("max_settlements=")) {//For Vestisland only

                    while (bOne) { //Find tech levels
                        stTwo = brTwo.readLine();
                        count++;

                        if (stTwo.contains("technology=")) {

                            for (int i = 4; i > 0; i--) {
                                stTwo = brTwo.readLine();
                                count++;
                            }
                            tech = stTwo;
                            bOne = false;
                        }
                    }
                    bOne = true;
                    maxSet();
                    bw.write(maxSetBlank + maxSet + "\n"); bw.newLine();
                    pCount--;
                    //print("Number of provinces remaining=" + pCount);
                    //print("Number of provinces done=" + (929 - pCount));
                    print("Vestisland" + ++check);

                    while (count !=0) {
                        brOne.readLine();

                        count--;
                    }
                }
                bw.flush();
                out.flush();

                while (pCount > 0) {// For provinces section
                    stOne = brOne.readLine();
                    //print(stOne);
                    brTwo.readLine();
                    bw.write(stOne); bw.newLine();

                    if (stOne.contains("name=")) {
                        names:
                        switch (stOne) {

                        case nullOne: case nullTwo: case nullThree: case nullFour: case nullFive:
                            print(test + "null");
                            pCount--;
                            //print("Number of provinces remaining=" + pCount);
                            //print("Number of provinces done=" + (929 - pCount));
                            print("Desert" + ++check);
                            break names;

                        default:

                            for (int i = 2; i > 0; i--) {
                                stOne = brOne.readLine();
                                brTwo.readLine();
                                bw.write(stOne); bw.newLine();
                            }

                            stOne = brOne.readLine(); print(stOne);
                            brTwo.readLine();

                            if (!stOne.contains("max_settlements")) {

                                while (bOne) { //Find tech levels
                                    stTwo = brTwo.readLine();
                                    count++;

                                    if (stTwo.contains("technology=")) {

                                        for (int i = 4; i > 0; i--) {
                                            stTwo = brTwo.readLine();
                                            count++;
                                        }
                                        tech = stTwo;
                                        bOne = false;
                                    }
                                } //Find tech levels
                                bOne = true;
                                maxSet();
                                bw.write(maxSetBlank + maxSet + "\n"); bw.newLine();
                                bw.write(stOne); bw.newLine();
                                pCount--;
                                //print("Number of provinces remaining=" + pCount);
                                //print("Number of provinces done=" + (929 - pCount));
                                print("Without max_settlements" + ++check);
                            } else {

                                while (bOne) { //Find tech levels
                                    stTwo = brTwo.readLine();
                                    //print(stTwo);
                                    count++;

                                    if (stTwo.contains("technology=")) {

                                        for (int i = 4; i > 0; i--) {
                                            stTwo = brTwo.readLine();
                                            //print(stTwo);
                                            count++;
                                        }
                                        tech = stTwo;
                                        bOne = false;
                                    }
                                }
                                bOne = true;
                                maxSet();
                                bw.write(maxSetBlank + maxSet + "\n"); bw.newLine();
                                pCount--;
                                //print("Number of provinces remaining=" + pCount);
                                //print("Number of provinces done=" + (929 - pCount));
                                print("With max_settlements" + ++check);
                            }
                            break names;
                        }
                }

            } //While provinces remain

                try {
                    while (stOne != null) {
                        bw.write(brOne.readLine()); bw.newLine();
                    }
                } catch (NullPointerException e) {
                    stOne = null;
                }

        }
        }
    } catch (IOException e) {
        System.out.println("IOException");
    } catch (NullPointerException e) {

    } finally {
        try { bw.close(); } catch (IOException e) {
            System.out.println("IOException");
        } finally { }
    }
    System.out.println("Provinces=" + pCount);
}

private static void maxSet() {
    int avg;
    intOne = Integer.parseInt(tech.substring(16, 17));
    intTwo = Integer.parseInt(tech.substring(18, 19));
    intThree = Integer.parseInt(tech.substring(22, 23));
    intFour = Integer.parseInt(tech.substring(24, 25));
    intFive = Integer.parseInt(tech.substring(30, 31));
    intSix = Integer.parseInt(tech.substring(46, 47));
    avg = Math.round((intOne+intTwo+intThree+intFour+intFive+intSix)/6);
    maxSet = avg + 2;
    //print(maxSet);
}

private static void print(Object o) {
    System.out.println(o);
}

static int pCheck = 0;
static String test = "This line is reached";
static final String maxSetBlank = "\t\tmax_settlements=";
static final String nullOne = "\t\tname=\"Western Sahara\"\n";
static final String nullTwo = "\t\tname=\"Adrar Plateau\"\n";
static final String nullThree = "\t\tname=\"Siberia\"\n";
static final String nullFour = "\t\tname=\"Sahara Desert\"\n";
static final String nullFive = "\t\tname=\"Sharawrah\"\n"; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T18:00:43.157

我怀疑它抛出了你忽略的 NullPointerException 。

我建议删除*所有*异常捕获并让方法处理`throws`这些异常。只有当你打算对它们做一些有用的事情时，才值得捕获一个异常。

顺便说一句：我怀疑您的任何字段都不需要是静态的，如果可以的话，我会制作局部变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:08:14.497

您在底部附近的捕获 NullPointerException 没有打印任何内容。

忠告...使用自动记录错误的 IDE，例如 Eclipse。它将使您的生活轻松十亿倍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T18:22:28.743

首先，在您的 catch 块中打印堆栈跟踪，例如，替换

```
} catch (IOException e) {
    System.out.println("IOException");
} 
```

经过

```
} catch (IOException e) {
    e.printStackTrace();
} 
```

并避免在不重新抛出或记录异常的情况下捕获异常。您当前在调试过程中面临的问题就是后果。

顺便说一句，如果您在某一时刻不知道如何处理异常，请不要捕获它。例如，`IOException`一般不应该被抓住和忽视。

也不要捕获逻辑错误，如`NullpointerException`,或. 这些几乎总是编程错误。当你抓住它们并忽略它们时，你隐藏了问题，但你还没有解决它。`IllegalStateException``IllegalArgumentException``AssertionError`

# silverlight - 将 x:Name 分配给厚度会引发异常

> ID：14632133
> 
> 赞同：0
> 
> 时间：2013-01-31T17:57:05.663
> 
> 标签：silverlight, xaml

谁能解释为什么这会引发异常？

```
<UserControl>
    <Grid>
        <Grid.Margin>
            <Thickness x:Name="thickness" />
        </Grid.Margin>
    </Grid>
</UserControl> 
```

如果我删除该`x:Name`属性，那么它会成功运行。

错误详情：

> 消息：Silverlight 应用程序代码中未处理的错误：4004
> 类别：ManagedRuntimeError
> 消息：System.NullReferenceException：对象引用未设置为对象的实例。在 SilverlightBindingTest.MainPage.InitializeComponent() 在 SilverlightBindingTest.MainPage..ctor() 在 SilverlightBindingTest.App.Application_Startup(Object sender, StartupEventArgs e) 在 MS.Internal.CoreInvokeHandler.InvokeEventHandler(UInt32 typeIndex, Delegate handlerDelegate, Object sender, Object args ) 在 MS.Internal.JoltHelper.FireEvent (IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName, UInt32 flags)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:41:35.430

Name 属性是一个 DependencyObject，因此只能在另一个 DependencyObject 上设置。

厚度不是 DependencyObject，因此您不能使用 Name 属性。

# javascript - Google Maps APIv3 绘图管理器的 onChange 事件

> ID：14632134
> 
> 赞同：6
> 
> 时间：2013-01-31T17:57:11.420
> 
> 标签：javascript, google-maps-api-3, dom-events, shapes

我正在使用 GMaps API v 3[绘图管理器](https://developers.google.com/maps/documentation/javascript/reference#DrawingManager)让用户在地图上绘制形状。

`complete`当形状添加到地图时，我可以使用这些事件来触发操作（例如`overlaycomplete`或`polygoncomplete`）——但我也允许用户编辑完成的形状。

有没有办法在形状改变时触发动作？修改形状时，我看不到任何触发另一个功能的方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T18:34:58.943

可在此处找到编辑事件列表：

[可编辑事件](https://developers.google.com/maps/documentation/javascript/shapes#editable_events)

[拖动事件](https://developers.google.com/maps/documentation/javascript/shapes#dragging_events)

这是一个示例，当圆的半径发生变化时，如何将其与 DrawingManager 一起使用：

```
google.maps.event.addListener(drawingManager, 'circlecomplete', function (circle) {
  google.maps.event.addListener(circle, 'radius_changed', function () {
    console.log('radius changed');
  });
}); 
```

[http://jsfiddle.net/Vvk4d/](http://jsfiddle.net/Vvk4d/)

您可以对多边形/矩形使用相同的方法。

# android - 尝试在android中更新sqlite数据库行时出现空指针异常

> ID：14632136
> 
> 赞同：3
> 
> 时间：2013-01-31T17:57:20.887
> 
> 标签：android, nullpointerexception, sql-update

首先，我查看了数小时的 google 和 SO 搜索显示的所有类似问题。没运气。

我有一个名为 PropertiesDatabase 的数据库助手类，它扩展了 SQLiteOpenHelper，如下所示：

```
private static final class PropertiesDatabase extends SQLiteOpenHelper{

            static final int DATABASE_VERSION = 1;
    private static final String KEY_PROPERTIES_TABLE = "PropertiesTable";
    static final String KEY_ID = "_id";
    static final String KEY_NAME = "name";   
    static final String KEY_SIZE = "size";    
    static final String KEY_PASSWORD = "password";      

    static final String [] columnsProperties = new String[] { KEY_NAME, 
        KEY_SIZE, KEY_PASSWORD};

    private static String CREATE_TABLE;

    public PropertiesDatabase(Context context) {
        super(context, KEY_PROPERTIES_TABLE, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        CREATE_TABLE = "create table " 
                + KEY_PROPERTIES_TABLE + "(" 
                + KEY_ID + " integer primary key autoincrement, " 
                + KEY_NAME + " text not null, "  
                + KEY_SIZE + " integer," 
                + KEY_PASSWORD + " text" + ");";
        db.execSQL(CREATE_TABLE);
    }

            public void changeName(String oldName, String newName){
        SQLiteDatabase db = this.getReadableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, newName);

        db.update(KEY_PROPERTIES_TABLE, values, KEY_NAME + "=?",
                new String[] {oldName});
        db.close();
    }

            public void changeSize(String name, int n){
        SQLiteDatabase db = this.getReadableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_SIZE, n);

        db.update(KEY_PROPERTIES_TABLE, values, KEY_NAME + "=?", 
                          new String[] {name});
        db.close();
    }
} 
```

类中还有更多方法，但我包含了 changeName 和 changeSize 因为它们几乎相同，但第一个有效，第二个抛出空指针异常。logcat 说调用

```
db.update(KEY_PROPERTIES_TABLE, values, KEY_NAME + "=?", new String[] {name}); 
```

在 changeSize() 方法中是罪魁祸首。我在该调用之前立即使用 db.isOpen() 进行了检查，并且数据库未打开。但是，在 changeName() 中的更新调用之前，它是打开的。

我不明白为什么一种方法可以正常工作而另一种方法不行。任何帮助解决这个谜团将不胜感激。

感谢您抽出时间来阅读。

**编辑：**

以下是相关的 logcat 信息：

```
01-31 13:37:17.315: E/AndroidRuntime(1978): FATAL EXCEPTION: main
01-31 13:37:17.315: E/AndroidRuntime(1978): java.lang.NullPointerException
01-31 13:37:17.315: E/AndroidRuntime(1978):     at          
android.database.sqlite.SQLiteStatement.releaseAndUnlock(SQLiteStatement.java:290)
01-31 13:37:17.315: E/AndroidRuntime(1978):     at   
android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:115)
01-31 13:37:17.315: E/AndroidRuntime(1978):     at   
android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1825)
01-31 13:37:17.315: E/AndroidRuntime(1978):     at  
android.database.sqlite.SQLiteDatabase.replace(SQLiteDatabase.java:1744)
01-31 13:37:17.315: E/AndroidRuntime(1978):     at   
com.LN.AppName.DatabaseHandler$PropertiesDatabase.changeSize(DatabaseHandler.java:767) 
```

当然，第 767 行是更新的调用。

再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:24:23.430

我认为问题是你的类是静态的，因为我知道只有嵌套类可能是静态的。尝试使用标准方法来处理数据库，像[这样](https://github.com/gobozov/voici/blob/master/src/com/voici/database/DatabaseAdapter.java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:25:14.907

`getReadableDatabase()`首先：当你想写入数据库时​​不要使用- 更新是写入。改为使用`getWritableDatabase()`。大多数情况下，这不会导致任何问题，但*它可以*！

此外，您通常应该在代码中保留**一个**SQLiteDatabase 实例。[`SQLiteOpenHelper`请参阅代码](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/database/sqlite/SQLiteOpenHelper.java)中的此注释：

`// Darn! The user closed the database by calling mDatabase.close().`

首次使用时创建一个*可写* 对象，并在所有方法中使用它。当您真正完成与数据库相关的代码时，请注意您的游标并关闭数据库。`SQLiteDatabase``SQLiteOpenHelper`

# batch-file - 批量使用带有 IF 条件的 CALL 命令

> ID：14632137
> 
> 赞同：1
> 
> 时间：2013-01-31T17:57:21.360
> 
> 标签：batch-file, conditional, call

我正在尝试使用密码设置代码，其中不同的密码会将您带到不同的目录。所有目录都在同一个 .bat 文件中，但我想使用另一个 .bat 来调用密码并将我带到目录。我不知道该怎么做，并且发现很难在主题搜索中找到。

我的代码如下所示：

```
@echo off
:takemeto
cls
echo Enter Password
set /p name=
call C:\Users\Username\Desktop\Batch files\passwords.bat

:password1
cls
echo You have chosen Password 1

:password2
cls
echo You have chosen Password 2 
```

CALL 旨在通过密码查找和使用我的文件。这些文件具有密码和目录，如下所示：

```
:Passwords
if "%name%" == "password1" goto password1
if "%name%" == "password2" goto password2
/end 
```

希望这很清楚，谢谢-Rob

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:25:45.617

让您的外部批处理脚本回显其输出。用`for /f`循环捕获它。

```
@echo off
setlocal
set extbat=C:\Users\Username\Desktop\Batch files\passwords.bat

:takemeto
cls
set /p name="Enter Password: "
for /f %%I in ('"%extbat%" %name%') do goto %%I

:invalid
echo Invalid password entered.
set name=
pause
goto takemeto

:password1
cls
echo You have chosen Password 1
goto :EOF

:password2
cls
echo You have chosen Password 2
goto :EOF 
```

示例`C:\Users\Username\Desktop\Batch files\passwords.bat`：

```
@echo off
if #%1==# (
    echo takemeto
) else if #%1==#correct1 (
    echo password1
) else if #%1==#correct2 (
    echo password2
) else echo invalid 
```

...您希望用户输入的密码在哪里`correct1`以及在哪里。`correct2`

# codeigniter - 从同一个控制器调用函数不传递 $data

> ID：14632138
> 
> 赞同：0
> 
> 时间：2013-01-31T17:57:22.200
> 
> 标签：codeigniter, jquery-mobile

我正在使用 Jquery Mobile 构建一个 HTML 移动应用程序。到目前为止它令人惊叹。

然而，在构建我的动态模板时，我遇到了一些障碍。

这是我的控制器：

```
function index()
{
        $data['page'] = "home";
        $page['head'] = $this->load->view('template/head',$data,TRUE);
        $page['header'] = $this->load->view('template/header', $data, TRUE);
        $page['footer'] = $this->load->view('template/footer', $data, TRUE);
        $page['nav'] = $this->nav($data['page']);
        $this->load->view("pages/home", $page);
}

function nav($page)
{
        $data['page'] = $page;
        $page['header'] = $this->load->view('template/header', $data, TRUE);
        $page['footer'] = $this->load->view('template/footer', $data, TRUE);
        return $this->load->view('template/nav',$page,TRUE);
} 
```

不管我为什么以这种方式设置它，为什么在`function nav($page)`视图中会返回`Undefined variable: header`和`Undefined variable: footer`错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T19:25:22.987

这是因为您试图用数组索引覆盖基于字符串的变量。您正在传递`$page`给该方法，但随后尝试创建一个调用`$page`以传递给视图的数组。您需要重命名数组以传递给视图：

```
function nav($page)
{
    $data['page'] = $page;

    // you should rename the array to pass to the view (from $page to $my_page)
    $my_page['header'] = $this->load->view('template/header', $data, TRUE);
    $my_page['footer'] = $this->load->view('template/footer', $data, TRUE);
    return $this->load->view('template/nav',$my_page,TRUE);
} 
```

# javascript - Javascript移动打开器窗口

> ID：14632143
> 
> 赞同：0
> 
> 时间：2013-01-31T17:57:34.173
> 
> 标签：javascript, html, frames

我有两个窗户；一个在框架集中，另一个在新窗口中从另一个打开（window.open(...)）。

我正在尝试将打开的窗口的左边缘移动到开启窗口的右边缘。

以下是要求：

1.  必须在 IE8 下工作。
2.  无法修改开启程序窗口中的代码。
3.  打开的窗口应该是完全可见的（见右上角的 X）

我能够找到一个获得正确宽度和高度（带有滚动条）的 IE8 窗口的解决方案。它涉及移动窗口并检查它的值，但是当我运行 window.opener.moveTo() 时，它会移动框架而不是实际的窗口，因此不会记录正确的值。

这是我目前正在使用的代码：

```
function moveAway()
{
    //Array Style
    var main = getWindowSize(window.opener)
    var child = getWindowSize(window)

    //How to move
    var topAvail  = main.top;
    var bottomAvail = window.opener.screen.availHeight - main.bottom;
    var leftAvail = main.left;
    var rightAvail = window.opener.screen.availWidth - main.right;

    var choice = Math.max(topAvail,bottomAvail,leftAvail,rightAvail)

    if(choice == rightAvail)
    {
        window.moveTo(main.right,main.top)
        window.resizeTo(rightAvail,main.bottom)
    }else if(choice == bottomAvail)
    {
        window.moveTo(main.left,main.bottom)
        window.resizeTo(window.opener.document.body.clientWidth,bottomAvail-36)
    } else if(choice == leftAvail)
    {
        window.moveTo(0,main.top)
        window.resizeTo(leftAvail,main.bottom)
    } else if(choice == topAvail)
    {
        window.moveTo(main.left,0)
        window.resizeTo(main.right,topAvail)
    }
    //return "item\ttop\tleft\tbottom\tright\nmain\t" + main.join("\t") + "\nchild\t" + child.join("\t")
}

function getWindowSize(windowObj) {
    var wW, wH;
    var wT = windowObj.screenTop;
    var wL = windowObj.screenLeft;
    if (windowObj.outerWidth) {
        wW = windowObj.outerWidth;
        wH = windowObj.outerHeight;
    } else {
        var cW = windowObj.document.body.offsetWidth;
        var cH = windowObj.document.body.offsetHeight;
        windowObj.resizeTo(500,500);
        var barsW = 500 - windowObj.document.body.offsetWidth;
        var barsH = 500 - windowObj.document.body.offsetHeight;
        wW = barsW + cW;
        wH = barsH + cH;
        windowObj.resizeTo(wW,wH);
    }
    return { right: wW, bottom: wH, top : wT, left : wL };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:55:13.280

[How do I get JavaScript to open a popup window on current monitor](https://stackoverflow.com/questions/57652/how-do-i-get-javascript-to-open-a-popup-window-on-the-current-monitor/57684#57684)处理定位弹出窗口并包含很多关于获取屏幕和窗口坐标以及定位窗口的见解

您必须注意，许多浏览器会禁止有趣的行为，例如

*   离屏窗口
*   比屏幕宽的窗户
*   跨越多个屏幕的窗口

使用我对上述问题的回答中的代码，您可以开始以下操作

```
// Pops a window relative to the current window position
function popup(url, winName, xOffset, yOffset, width, height) {
    width = width || 100;
    height = height || 100;  
    var x = (window.screenX || window.screenLeft || 0) + (xOffset || 0);
    var y = (window.screenY || window.screenTop || 0) + (yOffset || 0);
    return window.open(url, winName, 'top=' +y+ ',left=' +x + ',width=' + width + ',height='+ height);
}

var size = getWindowSize(window);
var popupWin = popup("http://www.google.com", "popup", size.right -  size.left); 
```

我没有解决您对弹出窗口必须全部显示在屏幕上的担忧。那是因为我不知道如果主窗口是全屏的，你可能会做什么。

弹出窗口已过时，我知道有些人想使用它，但浏览器确实在与它作斗争（通过强加来自选项卡式窗口环境的规则）。你在这里逆流而上。

最后一点，您不需要移动窗口，您只需指定顶部/左侧和宽度/高度，而不是让窗口在显示后四处移动。请参阅我的弹出功能。

[这是一个 jsfiddle](http://jsfiddle.net/MpL2k/4/)让您开始向我们展示您的问题

# sql - 自定义报告谁行是 SQL Server 中的列

> ID：14632147
> 
> 赞同：0
> 
> 时间：2013-01-31T17:57:48.997
> 
> 标签：sql, sql-server, report

我需要在 SQL Server 中制作一份自定义报告。我有一张名为 ProductsTable 的表，在这张表中有价格的产品表。

```
| id | description |
| 1  |   TABLE A   |
| 2  |   TABLE B   |
| 3  |   TABLE C   |
| 4  |   TABLE D   | 
```

现在，我有表格 ProductsTablePrices 与所有产品价格和他的表格。

```
| id | idproduct | idtable | price |
| 1  | 1         | 1       | 1.00  |
| 1  | 1         | 2       | 1.50  |
| 1  | 1         | 3       | 2.00  |
| 1  | 1         | 4       | 5.00  | 
```

最后，我有 Products 表。

```
| id |   name   |
| 1  | Paper    | 
```

我需要创建一个选择来获得这样的一个结果......

```
| name  | TABLE A | TABLE B | TABLE C | TABLE D |
| Paper |  1.00   |   1.50  |   2.00  |   5.00  | 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:10:08.620

试试这个：

```
SELECT
   P.name,
   SUM(CASE WHEN PT.description = 'TABLE A' THEN PP.price END) [TABLE A],
   SUM(CASE WHEN PT.description = 'TABLE B' THEN PP.price END) [TABLE B],
   SUM(CASE WHEN PT.description = 'TABLE C' THEN PP.price END) [TABLE C],
   SUM(CASE WHEN PT.description = 'TABLE D' THEN PP.price END) [TABLE D]
FROM Products P
   JOIN ProductsTablePrices PP
      ON P.id = PP.idproduct
   JOIN ProductsTable PT
      ON PP.idtable = PT.id
GROUP BY P.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:23:34.783

我用它来解决我的问题。

```
DECLARE @NameColumnTable VARCHAR(100)
DECLARE @CountColumns INT
DECLARE @ColumnsPivot varchar(6000)
DECLARE @Flag INT

SELECT @CountColumns = count(*) FROM ProductsTable
SET @Flag = 0

WHILE (@Flag <= @CountColumns)
BEGIN
    SELECT @NameColumnTable = Name FROM ProductsTable
    WHERE id = @Flag
    ORDER BY Name ASC

    SET @ColumnsPivot = ISNULL(@ColumnsPivot,'') + 'SUM(CASE WHEN PT.description = ''' + @NameColumnTable + ''' THEN PP.price END) [' + @NameColumnTable + ']'

    IF @Flag <> @CountColumns
    BEGIN
      SET @ColumnsPivot = @ColumnsPivot + ','
    END

    SET @ColumnsPivot = @ColumnsPivot + CHAR(13)

SET @Flag = @Flag + 1
END

DECLARE @SQLFINAL VARCHAR(5000)

SET @SQLFINAL = 'SELECT  
                   P.name,
                   ' + @ColumnsPivot + '
                FROM Products P
                JOIN ProductsTablePrices PP
                    ON P.id = PP.idproduct
                JOIN ProductsTable PT
                    ON PP.idtable = PT.id
                GROUP BY P.name
                ORDER BY P.name'
EXEC(@SQLFINAL) 
```

我不知道这是否是一个好习惯，但效果很好，性能也很好。

谢谢！

# php - 脚本 php：使用 phpmailer 发送邮件

> ID：14632150
> 
> 赞同：0
> 
> 时间：2013-01-31T17:58:02.693
> 
> 标签：php, apache2, phpmailer

我正在尝试使用 phpmailer 发送一封简单的电子邮件。我真的不知道它是否相关，因为我只是在做一个 php 脚本，但是我有 apache2 和 sendmail，apache2 正在运行，并且 sendmail 包含在 php.ini 中（sendmail_path=etc）。

所以这是我的代码：

```
<?php
$mail             = new PHPMailer(); // defaults to using php "mail()"

$body             = "<h1>Coucou</h1>";
$body             = eregi_replace("[\]",'',$body);

$mail->AddReplyTo("totest@test.com","First Last");

$mail->SetFrom('fromtest@test.com', 'First Last');

$mail->AddReplyTo("totest2@test.com","First Last");

$address = "XXXX@gmail.com";
$mail->AddAddress($address, "XXXXX");

$mail->Subject    = "PHPMailer Test Subject via mail(), basic";

$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test

$mail->MsgHTML($body);

//$mail->AddAttachment("./test.doc");      // attachment

if(!$mail->Send()) {
echo "Mailer Error: " . $mail->ErrorInfo;
} else {
echo "Message sent!";
}
?> 
```

所以问题是我的输出总是“消息已发送！”，即使脚本需要很长时间才能执行（最多 10 分钟！），但邮件从未到达我的邮箱（我检查了垃圾邮件文件夹） .

好吧，我希望有人能解释这个烦人的问题！还是非常感谢。

问候， Bdloul

# c# - ASP.NET/C# 中的类似 Gmail 的通知服务

> ID：14632157
> 
> 赞同：1
> 
> 时间：2013-01-31T17:58:27.267
> 
> 标签：c#, wcf, notifications

我有一个基于 Web 的应用程序在`ASP.NET`. 这是一个商业应用程序，人们通过这个门户进行定期交易和交易。

该应用程序有两种类型的用户：

1) 前台用户 - 进行交易 2) 后台用户 - 查看交易的所有会计和凭证生成工作

目前的问题是，要查看前台用户创建的新交易，后台用户需要每隔几分钟刷新一次网页，非常耗时。

我想开发一个基于 Windows 的小型通知服务，通过它我可以在不使用浏览器的情况下向他们显示通知。它将以与`Gtalk`桌面工具相同的方式通知我们新收到的邮件。

那么要实现上述目标，我应该使用什么以及如何使用和实施解决方案？

我需要使用 .Net 框架开发解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:07:18.177

我会研究 SignalR 并使用它来保持与服务器的持久连接，并在新数据可用时通知客户端。如果您使用 SignalR，您甚至不需要 Windows 应用程序，您可以使用他们的 javascript 客户端并直接在浏览器中显示通知（当然您仍然可以使用 Windows 应用程序路线）。

如果您在云托管环境中，您的云提供商也应该为您提供使用服务。

# iis - IIS 6.0 W3C 日志文件夹

> ID：14632161
> 
> 赞同：2
> 
> 时间：2013-01-31T17:59:00.217
> 
> 标签：iis, logging, iis-6, iis-manager

在 IIS 6.0 管理器中为网站设置日志记录属性时，我选择了 W3C 扩展日志文件格式。我已经选择了一个日志文件目录，但也希望能够更改自动生成的日志文件夹的名称（即 W3SVCXXXXXXXX\exyymmdd.log）。

是否可以更改 W3SVC 文件夹的名称？如果有怎么办？

更新：

经过进一步研究，我发现文件夹名称为 W3SVC#。# 指的是该站点的实例，也称为标识符。默认网站将始终为 1，并且每个其他站点都将分配一个随机数。

如果这是真的，那么将无法选择此文件夹的名称。谁能证实这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:56:10.247

随机生成的数字也是可以自定义的网站标识。

# c# - C# - 通过部分名称杀死进程

> ID：14632162
> 
> 赞同：10
> 
> 时间：2013-01-31T17:59:02.817
> 
> 标签：c#

我正在寻找如何在 C# 中执行此操作，如下所示：

```
foreach (Process proc in Process.GetProcessesByName("cheatengine-x86_64"))
{
    proc.Kill();
} 
```

我正在使用这个语句，但是程序有不同的版本，比如cheatengine 或cheatengine-x86，我想关闭其中的任何一个，以'cheat' 开头，或者只是'cheat'，只是为了避免使用旧版本。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-31T18:07:11.017

```
 System.Diagnostics.Process.GetProcesses()
                     .Where(x => x.ProcessName.StartsWith("cheate", StringComparison.OrdinalIgnoreCase))
                     .ToList()
                     .ForEach(x => x.Kill()); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-31T18:01:50.603

您可以遍历每个进程名称，然后将其与正则表达式匹配，如果匹配则将其终止。

```
Regex regex = new Regex(@"cheate.*");
 foreach (Process p in Process.GetProcesses(".")){
    if(regex.Matches(p.ProcessName))
      p.Kill();
 } 
```

像这样的东西。

这样做的好处是，您可以终止任何以特定正则表达式开头或结尾的进程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T18:07:04.457

改编自这里： http: [//www.howtogeek.com/howto/programming/get-a-list-of-running-processes-in-c/](http://www.howtogeek.com/howto/programming/get-a-list-of-running-processes-in-c/)

```
using System.Diagnostics;

Process[] processlist = Process.GetProcesses();

foreach(Process theprocess in processlist)
{

    if(theprocess.ProcessName.StartsWith("cheat");
         theprocess.Kill(); 
} 
```

这只是一个粗略的想法，你可以使用任何你想匹配的方法来处理。我推荐一些忽略大小写的东西，但我会对误报非常谨慎。如果它关闭了不应该关闭的东西，我不会对你的程序感到满意。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T18:03:26.690

使用`Process.GetProcesses()`并使用 Linq 过滤您想要杀死的那些。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-10-17T06:33:31.440

当它包含特定字符串时，这将终止该进程

```
System.Diagnostics.Process.GetProcesses()
                         .Where(x => x.ProcessName.ToLower()
                                      .Contains("chrome"))
                         .ToList()
                         .ForEach(x => x.Kill()); 
```

# wpf - 具有串联值的 WPF XamComboBox DisplayMemberPath

> ID：14632164
> 
> 赞同：1
> 
> 时间：2013-01-31T17:59:05.750
> 
> 标签：wpf, xaml, combobox, infragistics

我有以下代码 -

```
<igEditors:XamComboEditor ItemsSource="{Binding Instances}"
                                          Margin="5,2,5,2" Width="175" HorizontalAlignment="Left"
                                          SelectedItem="{Binding SelectedInstance,Mode=TwoWay,NotifyOnValidationError=True,ValidatesOnDataErrors=True,ValidatesOnExceptions=True}"
                                          >
                    <igEditors:XamComboEditor.ComboBoxStyle>
                        <Style TargetType="ComboBox">
                            <Setter Property="ItemTemplate">
                                <Setter.Value>
                                    <DataTemplate>
                                        <TextBlock>
                                            <TextBlock.Text>
                                                <MultiBinding StringFormat="{}{0} ({1})">
                                                    <Binding Path="Name" />
                                                    <Binding Path="Id" />
                                                </MultiBinding>
                                            </TextBlock.Text>
                                        </TextBlock>
                                    </DataTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>                        
                    </igEditors:XamComboEditor.ComboBoxStyle>
                </igEditors:XamComboEditor> 
```

当我从我的视图模型中设置 SelectedInstance 时，组合框正在显示对象的类型。如果我然后进行选择，它会正确显示，但我单击组合框，失去焦点，它会恢复为对象类型。如果我手动将 DisplayMemberPath 设置为 Name，它可以正常工作，但我确实需要它作为 displaymemberpath 的串联值。

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:22:00.260

这个问题的答案是使用 ValueToDisplayTextConverter 和自定义转换器。更多详情可在这找到 -

[http://www.infragistics.com/community/forums/p/77378/390782.aspx](http://www.infragistics.com/community/forums/p/77378/390782.aspx)

# windows-runtime - 在 WinRT 中获取当前的 VisualState

> ID：14632165
> 
> 赞同：2
> 
> 时间：2013-01-31T17:59:09.230
> 
> 标签：windows-runtime, winrt-xaml, visualstatemanager

我正在尝试获取对象的当前 VisualState。我在 SO 上找到了一个答案，这是不可能的，在其他地方的另一个博客中我应该能够像这样得到这些：

```
var currentState = VisualStateManager.GetVisualStateGroups(ContainerGrid); 
```

然而，curentState 似乎什么也没得到。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T00:51:52.273

我发现这个答案对我来说效果更好，因为我不需要任何外部的东西：[Silverlight: VisualStateManager.GetVisualStateGroups 不需要，我怎样才能得到它们？](https://stackoverflow.com/questions/6753279/silverlight-visualstatemanager-getvisualstategroups-doesnt-how-can-i-get-them/12835139#12835139)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T19:39:10.583

WinRT XAML 工具包具有此扩展方法 -[`AwaitableUI.ControlExtensions.GoToVisualStateAsync()`](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/4d568d4e4c6a#WinRTXamlToolkit/AwaitableUI/ControlExtensions.cs)使用您提到的方法 ( ) 查找用于视觉状态转换的情节提要，并在调用常规方法`VisualStateManager.GetVisualStateGroups()`后等待其完成。`VisualStateManager.GoToState()`到目前为止，它对我来说效果很好。唯一需要注意的是，您需要调用`GetVisualStateGroups()`指定视觉状态组的元素，因此在大多数情况下，您可能需要深入了解控件模板的视觉树，因为它们通常是在其中定义的——模板中更深的地方比实际的逻辑控制。

这是我的完整示例课程：

```
using System;
using System.Linq;
using System.Threading.Tasks;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Media.Animation;

namespace WinRTXamlToolkit.AwaitableUI
{
    /// <summary>
    /// Extension methods for Control class.
    /// </summary>
    public static class ControlExtensions
    {
        #region GoToVisualStateAsync()
        /// <summary>
        /// Goes to specified visual state, waiting for the transition to complete.
        /// </summary>
        /// <param name="control">
        /// Control to transition.
        /// </param>
        /// <param name="visualStatesHost">
        /// FrameworkElement that defines the visual states
        /// (usually the root of the control's template).
        /// </param>
        /// <param name="stateGroupName">
        /// Name of the state group
        /// (speeds up the search for the state transition storyboard).
        /// </param>
        /// <param name="stateName">
        /// State to transition to.
        /// </param>
        /// <returns>
        /// Awaitable task that completes when the transition storyboard completes.
        /// </returns>
        /// <remarks>
        /// If a state transition storyboard is not found - the task
        /// completes immediately.
        /// </remarks>
        public static async Task GoToVisualStateAsync(
            this Control control,
            FrameworkElement visualStatesHost,
            string stateGroupName,
            string stateName)
        {
            var tcs = new TaskCompletionSource<Storyboard>();

            Storyboard storyboard =
                GetStoryboardForVisualState(visualStatesHost, stateGroupName, stateName);

            if (storyboard != null)
            {
                EventHandler<object> eh = null;

                eh = (s, e) =>
                {
                    storyboard.Completed -= eh;
                    tcs.SetResult(storyboard);
                };

                storyboard.Completed += eh;
            }

            VisualStateManager.GoToState(control, stateName, true);

            if (storyboard == null)
            {
                return;
            }

            await tcs.Task;
        } 
        #endregion

        #region GetStoryboardForVisualState()
        /// <summary>
        /// Gets the state transition storyboard for the specified state.
        /// </summary>
        /// <param name="visualStatesHost">
        /// FrameworkElement that defines the visual states
        /// (usually the root of the control's template).
        /// </param>
        /// <param name="stateGroupName">
        /// Name of the state group
        /// (speeds up the search for the state transition storyboard).
        /// </param>
        /// <param name="stateName">
        /// State to transition to.
        /// </param>
        /// <returns>The state transition storyboard.</returns>
        private static Storyboard GetStoryboardForVisualState(
            FrameworkElement visualStatesHost,
            string stateGroupName,
            string stateName)
        {
            Storyboard storyboard = null;

            var stateGroups = VisualStateManager.GetVisualStateGroups(visualStatesHost);
            VisualStateGroup stateGroup = null;

            if (!string.IsNullOrEmpty(stateGroupName))
            {
                stateGroup = stateGroups.FirstOrDefault(g => g.Name == stateGroupName);
            }

            VisualState state = null;

            if (stateGroup != null)
            {
                state = stateGroup.States.FirstOrDefault(s => s.Name == stateName);
            }

            if (state == null)
            {
                foreach (var group in stateGroups)
                {
                    state = group.States.FirstOrDefault(s => s.Name == stateName);

                    if (state != null)
                    {
                        break;
                    }
                }
            }

            if (state != null)
            {
                storyboard = state.Storyboard;
            }

            return storyboard;
        } 
        #endregion
    }
} 
```

这就是我所说的：

```
await this.GoToVisualStateAsync(_layoutRoot, PopupStatesGroupName, OpenPopupStateName); 
```

`this`我的[`InputDialog`](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/4d568d4e4c6a#WinRTXamlToolkit/Controls/InputDialog/InputDialog.cs)控件在哪里，并且`_layoutRoot`是其[模板](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/4d568d4e4c6a#WinRTXamlToolkit/Controls/InputDialog/InputDialog.xaml)的一部分，定义如下：

```
<Setter
    Property="Template">
    <Setter.Value>
        <ControlTemplate
            TargetType="controls:InputDialog">
            <Grid
                x:Name="LayoutRoot"
                Background="{TemplateBinding BackgroundScreenBrush}">
                <VisualStateManager.VisualStateGroups>
                    <VisualStateGroup
                        x:Name="PopupStates">
                        <VisualState
                            x:Name="OpenPopupState">
                            <Storyboard>
... 
```

提取该视觉状态组后，您可以通过获取`stateGroup.CurrentState`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-02T14:47:35.730

在 UWP XAML 中，只需将 de VisualStateGroup 命名为：

```
<VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="PopupStates">
                <VisualState x:Name="Mobile">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="0"/>
                    </VisualState.StateTriggers> 
```

你得到的名字使用：

```
PopupStates.CurrentState.Name 
```

# trigger.io - trigger.io 顶部栏，移动 web 上的标签栏

> ID：14632168
> 
> 赞同：2
> 
> 时间：2013-01-31T17:59:22.673
> 
> 标签：trigger.io

我只是在深入研究 trigger.io，并一直试图发现在移动 Web 上查看时原生元素发生的细微差别。到目前为止，我还无法让 topbar 或 tabbar 进行渲染。我假设这是因为它们都不是移动网络的原生。

触发器中是否有大多数人使用的标准选项卡栏或选项卡类型系统？我也从骨干网和 zepto 开始。

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:34:19.810

Jquerymobile 有一个顶部栏和页脚栏，看起来与 trigger.io iOS 和 Android 原生栏非常相似。

和你一样，我从 Trigger.io 开始对为什么在为 web 构建时没有等效的顶部栏/标签栏感到困惑。

# jquery - jQuery 选项卡：关闭动画

> ID：14632169
> 
> 赞同：4
> 
> 时间：2013-01-31T17:59:35.033
> 
> 标签：jquery, jquery-tabs

我有一个带有 jquery 选项卡的页面，其中我将一个函数绑定到了 show 事件。显然，通过这样做：

```
$(function() {
    $('#myTabs').tabs({ show: function() {} });    
}); 
```

它在选项卡之间切换时打开动画效果（[http://jsfiddle.net/22unj/](http://jsfiddle.net/22unj/)）

我如何在不删除我的显示处理程序的情况下关闭它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:37:42.980

你不能。[选项 show](http://api.jqueryui.com/tabs/#option-show)用于确定如何为选项卡设置动画。也许你想要的是[Method activate](http://api.jqueryui.com/tabs/#event-activate)？

```
$(function() {
    $('#myTabs').tabs({ activate: function() {doSomething();}, create: function() {doSomething();} });    

    function doSomething() {
        console.log('hello world!');
    }

}); 
```

# ios - 即使在应用程序属性中设置了标志“位置”，CLLocationManager 也会停止在后台更新位置

> ID：14632172
> 
> 赞同：1
> 
> 时间：2013-01-31T17:59:40.313
> 
> 标签：ios, objective-c, cllocationmanager

我的问题是当应用程序进入后台模式时，我的应用程序不会更新用户位置。

我已经阅读了很多内容，并且已经在应用程序属性中为 UIBackgroundModes 设置了 flan“位置”。

即使在那之后，我的应用程序也会在后台删除位置管理器并停止更新用户位置。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:24:32.413

在 iOS5 中一定要使用`locationManager:didUpdateToLocation:fromLocation:`. 这种方法使您的应用即使在后台也能请求位置服务。在 iOS6 中，您应该使用在 iOS6`locationManager:didUpdateLocations:`中`locationManager:didUpdateToLocation:fromLocation:`已弃用的 as。

在 iOS6 中，请确保添加以下内容，否则当系统认为您没有使用它时，定位服务将被关闭：

```
if ([self.locationManager respondsToSelector:@selector(pausesLocationUpdatesAutomatically)]) {
    self.locationManager.pausesLocationUpdatesAutomatically = NO;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:15:26.993

在 iOS 中，在后台模式下使用应用程序受到严格限制。通常，当在 UIBackgroundModes 中设置正确的属性时，您的应用程序将在每次位置更新时被调用。通过将所需的准确度设置为低（例如`kCLLocationAccuracyBest`），即使位置稍有更新，您的应用也会启动。

**然而**，在一段时间后，应用程序没有回到前台，应用程序将被完全杀死，位置服务将被关闭（后者仅从 iOS 6 开始）。由于无法让应用程序在后台不断地从 iOS 获取更新，这让我放弃了我的项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-05T04:17:57.837

我遇到了同样的问题，基本上你必须在你的 CLLocationManager 上将 pausesLocationUpdatesAutomatically 标志设置为“NO”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T18:23:56.187

没有位置变化意味着没有位置，意味着没有事件，也没有行动。

如果 iphone 移动并设置了标准定位模式 ( `startUpdatingLocation`)，您通常会每秒获得一次 GPS 定位。（期望准确度 =`kCLLocationAccuracyBest` 或`kCLLocationAccuracyBestForNavigation`）

如果定位服务已启动，`startMonitoringSignificantLocationChanges`那么您将只能获得由手机信号塔变化确定的位置。

此外，由于 ios6 存在延迟模式，因此您的应用程序在后台时不会更改位置，但稍后会同时更改所有位置。（我对这种模式没有个人经验）。但这也是在 ios6 及更高版本中要考虑的

来自 CLLocationManager 描述

> 在 iOS 6 及更高版本中，您可以在应用处于后台时延迟位置数据的传递。建议您在您的应用程序可以稍后处理数据而没有任何问题的情况下使用此功能。例如，跟踪用户在远足路径上的位置的应用程序可以推迟更新，直到用户远足一定距离，然后一次性处理所有点。延迟更新可以让您的应用程序在更长的时间内保持休眠状态，从而有助于节省电量。

# java - Java：听取本地程序的指令

> ID：14632174
> 
> 赞同：1
> 
> 时间：2013-01-31T17:59:52.557
> 
> 标签：java, event-handling, communication

我有一个第三方服务器，我可以连接到（在我的本地网络上）为我正在处理的项目做一些我需要做的整洁的事情。我使用第三方提供的 Java 库来连接所有的东西，我可以使用他们的代码成功地将命令发送到服务器。他们的代码还提供了一些事件侦听器接口，只要我的程序正在运行，我就可以实现这些接口以从服务器获取状态更改。我想做的是创建一个程序，该程序将作为（或类似）服务运行，永久监听服务器上的事件并将它们写入数据库，但我还需要能够监听来自本地机器的连接所以我可以使用命令行程序告诉我的服务向服务器发送消息（服务器一次只允许一个连接）。

我已经（简要地）查看了 JMS 和 RMI，但它们似乎都比我认为我需要在本地进行通信的更复杂和重量级。是否有一种更简单的方法可以在同一台机器上的两个正在运行的应用程序之间发送简单的消息（简单的意思是一个管道分隔的字符串就可以了）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:14:07.853

如果您想要比 RMI 和 JMS 更简单的东西，您可以使用套接字进行进程间通信。

[关于套接字](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)的 java 教程可能是一个不错的起点。

一个简单的单消息客户端-服务器，服务器等待客户端加入，然后从客户端接收消息，如下所示：

```
public class SocketsServer {

    public static void main(String[]rags) throws Exception
    {
        ServerSocket ss1 = new ServerSocket();
        ss1.bind(new InetSocketAddress("localhost",9992));
        //accept blocks until someone connects
        Socket s1 = ss1.accept();
        BufferedReader br = new BufferedReader(new InputStreamReader(s1.getInputStream()));
        String line;
        while( (line = br.readLine()) != null )
        {
            System.out.println(line);
        }
        s1.close();
        ss1.close();
    }
} 
```

对于客户端：

```
public class SocketsClient {

    public static void main(String[]args) throws Exception
    {
        Socket ss = new Socket();
        ss.connect(new InetSocketAddress("localhost", 9992));
        PrintWriter pw = new PrintWriter(ss.getOutputStream(), true);
        pw.println("hello socket");
        ss.close();
    }
} 
```

# json - Jquery 表单没有提交到 IE7 和 IE8

> ID：14632176
> 
> 赞同：0
> 
> 时间：2013-01-31T17:59:57.073
> 
> 标签：json, jquery, jquery-plugins, internet-explorer-7

我目前正在使用**[此](http://malsup.com/jquery/form/#file-upload)**插件将图像作为电子邮件的附件以及其他一些 json 数据发送，并且我得到了正确的结果。但只是不是来自 IE7 和 IE8，它根本不发送..我不知道为什么..

建议任何人？

这是**[jsFiddle](http://jsfiddle.net/dawidvdh/DSknd/)**。

然后是javascript：

```
var g_counter = 1;
var dependant = ["dependant"];
var group;
var upload_input_passport = ["upload-passport-1"];
var upload_input_id = ["upload-id-1"];
var surname_input_groups = ["surname-group-1"];
var input_groups = ["group-1"];
var name_fields=[0];
var id_upload_input = "<input class='id_up'   name='myfile[]' type='file'  />";
var passport_upload_input = "<input class='passport_up'   name='myfile[]' type='file' />";
var surname_input = "<input id='surname' class='surname' name='surname' type='text' data-error='Surname error' />";
//Dependants Inputs
jQuery(document).ready(function(e) {
    jQuery(name_fields).each(function() {
        jQuery(id_upload_input).appendTo('#upload-id-1');
    });
    jQuery(name_fields).each(function() {
        jQuery(passport_upload_input).appendTo('#upload-passport-1');
    });
    jQuery(name_fields).each(function() {
        jQuery(surname_input).appendTo('#surname-group-1');
    });

    jQuery('#clone').click(function(e) {
        e.preventDefault();
        clone_dependant();
    });

    function clone_dependant() {
        var oldId = g_counter;
        g_counter++;
        currentdep ='dependant-'+g_counter;
        var $clonedDiv = jQuery('#dependant-1').clone(false).attr('id', currentdep);
        var id_up_newDiv = 'upload-id-'+ g_counter;
        var passport_up_newDiv = 'upload-passport-'+ g_counter;
        var surname_newDiv = 'surname-group-'+ g_counter;
        // Find div's inside the cloned object and set a new id's
        $clonedDiv.find('#upload-id-1').attr('id',"upload-id-" + g_counter );
        $clonedDiv.find('#upload-passport-1').attr('id',"upload-passport-" + g_counter );
        $clonedDiv.find('#surname-group-1').attr('id',"surname-group-" + g_counter );
        $clonedDiv.find('#dep_num').html(g_counter);
        // You don't need to Loop thru the inputs to set the value
        $clonedDiv.find('input[type="file"]').val('');

        // Insert the cloned object 
        $clonedDiv.insertAfter("#dependant-" + oldId);
        upload_input_id.push(id_up_newDiv);
        upload_input_passport.push(passport_up_newDiv);
        surname_input_groups.push(surname_newDiv);
    }

var result = {};
var dependants;
var mainmember;
var dep_counter = 0;
function getValues(){   
    result['dependants'] = [];
    jQuery('div[class*="dependant"]').each(function(k, v){
        dep_counter++
        dependants = {};
        dependants['surname'] = jQuery(v).find('.surname').val();
        dependants['id_upload'] = jQuery(v).find('.id_up').val();
        dependants['passport_upload'] = jQuery(v).find('.passport_up').val();
        result['dependants'].push(dependants);
    });

};
jQuery('#submit').click(function(){
    getValues();
    var jsonData = JSON.stringify(result);  
    (function() {
    var bar = jQuery('.bar');
    var percent = jQuery('.percent');
    var status = jQuery('#status');

    jQuery('form').ajaxForm({
        type: "POST",
        url: "mail.php",
        dataType: "json",
        //iframe: true,
        data: {parameters: jsonData},
        beforeSend: function() {
            status.empty();
            var percentVal = '0%';
            bar.css("width", percentVal)
            percent.html(percentVal);
        },
        uploadProgress: function(event, position, total, percentComplete) {
            var percentVal = percentComplete + '%';
            bar.css("width", percentVal)
            percent.html(percentVal);
        },
        complete: function(xhr) {
            status.html(xhr.responseText);
        }
    }); 

    })();   
});
}); 
```

和 HTML：

```
<form enctype="multipart/form-data">
    <div class="dependant-1" id="dependant-1">
        <div class="title">dependant <span id="dep_num">1</span>:</div>
        <div class="block_wrap left border_right">
                <div class="block">'surname'<div id="surname-group-1" class="right"></div></div>
        </div>
        <div class="block_wrap left border_right no_b">
             <div class="block">dep_passport<div id="upload-id-1" class="right"></div>
        </div>
       </div>

       <div class="block_wrap right no_b">
       <div class="block">dep_id<div id="upload-passport-1" class="right"></div>
       </div>
            </div>
    </div>
    <button id="submit">sub</button>
</form>
<button id="clone">duplicate</button>

<div class="progress">
    <div class="bar"></div >
    <div class="percent">0%</div >
</div>

<div id="status"></div> 
```

最后是 PHP 用来发送它：

```
<?php /*?><?php
$newdirectory = "tmp";
$count = 0;
foreach ($_FILES['myfile']['name'] as $filename)
{
    $temp = $_FILES['myfile']['tmp_name'][$count];
    move_uploaded_file($temp, $newdirectory . '/' . $filename);
    $count++;
}
print_r($_FILES);
?><?php */?>
<?
    function printMember($member) {
        foreach($member as $key=>$value) {
            //Fill the aux string first
            $str.= "$key : $value <br />";
        }
        //string that will be added to $msg variable inside the loop
        return $str;
    }

    $json = $_POST['parameters'];
    $json_string = stripslashes($json);
    $data = json_decode($json_string, true);
    $depCount = count($data["dependants"]);

    $msg .= "<h2>Main member data:</h2>";
    $msg .= printMember($data["mainmember"]);
    $msg .= "<h2>There are $depCount Dependants</h2>";

    foreach ($data["dependants"] as $index => $dependant) {
       $msg .= "<h2>Dependant $index</h2>";
       $msg .= printMember($dependant);
    }

    $strTo = "chante@jamfactory.co.za";
    $strSubject = "Image Testing";
    $strMessage = nl2br($msg);

    //*** Uniqid Session ***//
    $strSid = md5(uniqid(time()));

    $strHeader = "";
    $strHeader .= "From: Dawid<test@testme.co.za>\nReply-To:test@testme.co.za";

    $strHeader .= "MIME-Version: 1.0\n";
    $strHeader .= "Content-Type: multipart/mixed; boundary=\"".$strSid."\"\n\n";
    $strHeader .= "This is a multi-part message in MIME format.\n";

    $strHeader .= "--".$strSid."\n";
    $strHeader .= "Content-type: text/html; charset=utf-8\n";
    $strHeader .= "Content-Transfer-Encoding: 7bit\n\n";
    $strHeader .= $strMessage."\n\n";

    //*** Attachment ***//
    $count = 0;
    foreach($_FILES['myfile']['name'] as $filename)
    {
        $temp = $_FILES['myfile']['tmp_name'][$count];
        $strFilesName = $filename;
        $strContent = chunk_split(base64_encode(file_get_contents($temp))); 
        $strHeader .= "--".$strSid."\n";
        $strHeader .= "Content-Type: application/octet-stream; name=\"".$strFilesName."\"\n"; 
        $strHeader .= "Content-Transfer-Encoding: base64\n";
        $strHeader .= "Content-Disposition: attachment; filename=\"".$strFilesName."\"\n\n";
        $strHeader .= $strContent."\n\n";
        $count++;
    }

    $flgSend = @mail($strTo,$strSubject,null,$strHeader);  // @ = No Show Error //

    if($flgSend)
    {
        echo "Mail send completed.";
    }
    else
    {
        echo "Cannot send mail.";
    }
?> 
```

非常感谢任何帮助:)..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:03:01.387

[`.clone()`](http://api.jquery.com/clone/)jQuery (1.6.4+) 中jQuery 方法的行为发生了变化，因此较旧的 IE 版本会出现问题。

在 1.6.4 中，jQuery 更改了它们的内部行为以使用`.cloneNode()`旧 IE 版本存在问题的 JavaScript 方法。

对于 IE7 及以下版本，这种“hack”似乎可以解决这个问题。[http://jsfiddle.net/GZffK/3/](http://jsfiddle.net/GZffK/3/)

关键部分是使用旧的 jQuery 方式……在遇到 IE7 时使用 .outerHTML 属性。

```
 if($.browser.msie && (parseInt($.browser.version) < 8)){
        /*
            Dirty ugly hack to overcome bugs in IE with .cloneNode() method
            that is now used in jQuery 1.6.4+
        */
        var copiedDOMStr = $('#orig_test_0').get(0).outerHTML;    
        var copiedDOM = $(copiedDOMStr);    
    } else {
        var copiedDOM = $('#orig_test_0').clone();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T11:53:53.803

解决了这个问题...

它就像添加`method="post" action="http://globalgeorgia.co.za/modules/mod_appform/js/mail.php"`然后添加`type="submit"`到提交函数一样简单，它在 IE 7 和 IE 8 中完美运行。

谢谢大家的帮助...

# css - 仅当另一个元素存在时如何向左浮动

> ID：14632178
> 
> 赞同：1
> 
> 时间：2013-01-31T18:00:04.673
> 
> 标签：css, css-float

首先，请耐心等待，因为我的英语不太好，我不知道我是否能很好地解释解决方案。所以...

我有这个 HTML

```
<div id='container'>

    <div class='picture'>
        <img src='...'>
    </div>

    <div class='description'>
        <div id='attrb1' class='clearfix'>...</div>
        <div id='attrb2' class='clearfix'>...</div>
        <div id='attrb3' class='clearfix'>...</div>
        <div id='attrb4' class='clearfix'>...</div>
    </div>

</div> 
```

clearfix 类的实现如[here所述](http://www.webtoolkit.info/css-clearfix.html)

我希望 .picture div 留在左边， .description div 留在右边。所以我写了这个 CSS

```
.picture { float: left; width: 100px; }
.picture img { width: 100px; height: auto; }
.description { float: right; width: 815px; } 
```

到现在为止，一切正常。

但有时，**没有图片**。在这种情况下，我希望 .description div 扩展到所有 .container div 宽度。所以我试图删除两个 div 的宽度：

```
.picture { float: left; }
.picture img { width: 100px; height: auto; }
.description { float: right; } 
```

但是 .description div 在 .picture div 下方流动（如果图片存在）

这是一个屏幕截图： ![两个 .container div：第一个带有 .picture div，第二个没有](../Images/36ccda4a38cf1c42f59bee1fe50d6058.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:27:57.130

[http://jsfiddle.net/UQngw/](http://jsfiddle.net/UQngw/)

当我禁用 css

```
.clearfix {
    #display: inline-block;
} 
```

看起来`display: line-block;`让 div 尽可能宽。

**更新**
好吧，我只是发现我的代码在文本这么长时出现了一些问题......
[http://jsfiddle.net/HbCaK/3/](http://jsfiddle.net/HbCaK/3/) 我在这次尝试中禁用了以下css，但我不确定这是否是适合您的情况：

```
.description {
    #float: right;
}
.clearfix:after {
    content:".";
    #display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
}
.clearfix {
    #display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:11:32.823

对 .picture 使用 min-width 代替：

```
.picture { float: left; min-width: 100px; }
.picture img { width: auto height: auto; }
.description { float: right; width: 815px; } 
```

当从图片 div 中删除 img 标签时，布局应该像我认为你所要求的那样折叠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T19:37:28.067

`float: right;`从 .picture 类中删除。由于浮动左侧，它将自动排列在另一个旁边。

我创建了一个新的 jsfiddle：http: [//jsfiddle.net/mu2MV/](http://jsfiddle.net/mu2MV/)

如果内容太大，这也会增加垂直滚动。否则它会破裂并包裹在图片下方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T03:48:59.580

我想这会解决你的问题......

```
.picture img { width: 100px; height: auto; }
#container > div:nth-of-type(1){
    float: left;    
}
#container > div:nth-of-type(2) {
    float: right;     
} 
```

[http://jsfiddle.net/vYwYe/5/](http://jsfiddle.net/vYwYe/5/)

[http://jsfiddle.net/vYwYe/6/](http://jsfiddle.net/vYwYe/6/)

# javascript - 鼠标离开视口时 JS/Jquery 触发？

> ID：14632182
> 
> 赞同：0
> 
> 时间：2013-01-31T18:00:34.593
> 
> 标签：javascript, jquery, firefox, mouseleave

当我的鼠标离开视口时如何触发功能？

我从“html”中收听“mouseleave”事件。但是在firefox中，“mouseleave”也是在两种情况下触发的。1\. 是弹出警报的时候（我现在通过添加模糊/焦点侦听器来解决它） 2\. 当我右键单击页面时，鼠标移动到显示菜单。

似乎 Firefox 将此行为视为“mouseleave”，即使我的鼠标仍在页面中。

这是我的代码。

```
$('html').bind('mouseleave',bouncehandler);
var visted = 1;
var bouncehandler = function(e){  
    var yheight = $(window).height();
    if(e.pageX<$('body').width() && e.pageY < yheight ){
       alert('leaving');
       $('html').unbind('mouseleave',bouncehandler);
    }
}

$(window).blur(function(){
   $('html').unbind('mouseleave',bouncehandler);
}).focus(function(){
   if(visited){
       $('html').bind('mouseleave',bouncehandler);
    }
}); 
```

我怎么解决这个问题 ？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:03:47.893

您只能在视口内获取鼠标位置和任何鼠标事件。

您可以设置在浏览器关闭时执行的函数，如下所示：

```
function confirmExit(){
    alert("confirm exit is being called");
    return false;
}

window.onbeforeunload = confirmExit; 
```

# spring-mvc - 使用 ROO MVC 撤消 --disallowedOperations

> ID：14632186
> 
> 赞同：0
> 
> 时间：2013-01-31T18:00:46.100
> 
> 标签：spring-mvc, spring-roo

作为一个更大的基于 ROO 的 MVC 项目的一部分，我之前发布了以下 ROO 命令：

```
web mvc scaffold ~.domain.Yyy --class ~.web.YyyController --disallowedOperations update 
```

要求发生了变化，我现在想“撤消”“--disallowedOperations”选项；即我确实想要'Yyy'的更新选项。

我尝试了以下命令：

```
web mvc scaffold ~.domain.Yyy --class ~.web.YyyController 
```

不幸的是，ROO 不会自动添加“更新”选项。

创建 'update,jspx' 并将其添加到 views.xml 也没有帮助。

如何将更新选项添加​​到基于 MVC 的 UI？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:39:17.837

所有 --disallowedOperations 所做的就是在注释中将这些值设置为 false。

因此，例如，如果我说 --disallowedOperations 删除、更新、创建，我会将以下内容放入我的控制器中：

```
@RooWebScaffold(path = "myPath", formBackingObject = MyClass.class, create = false, 
                update = false, delete = false) 
```

如果我删除“create = false”，并且 Roo Shell 正在运行，那么 Roo shold 的魔力会识别我删除它并重新生成 AspectJ 文件以现在包含 create 方法。这直接来自[他们的文档](http://static.springsource.org/spring-roo/reference/html/base-web.html)，顺便说一句。

# asp.net - Asp.net 3.5 和 JSON 中的 Web 服务

> ID：14632189
> 
> 赞同：0
> 
> 时间：2013-01-31T18:00:52.163
> 
> 标签：asp.net, ajax, json, jsonp, asmx

我在 ASP.Net 3.5 中有一个 Web 服务，但无法正确生成 JSON。格式正确，但在尝试访问 $ 时仍然不起作用。阿贾克斯。我怀疑标题仍然是 xml，我不明白为什么。以下代码：

网络服务：

```
Imports System.Web
Imports System.Web.Services
Imports System.Web.Services.Protocols
Imports System.Data
Imports System.IO
Imports System.Runtime.Serialization.Json

<System.Runtime.Serialization.DataContractAttribute()> _
Public Class Estado

    Dim _ID As Integer = 0
    <System.Runtime.Serialization.DataMemberAttribute()> _
    Public Property ID() As Integer
        Get
            Return _ID
        End Get
        Set(value As Integer)
            _ID = value
        End Set
    End Property

    Dim _Descricao As String = ""
    <System.Runtime.Serialization.DataMemberAttribute()> _
    Public Property Descricao() As String
        Get
            Return _Descricao
        End Get
        Set(value As String)
            _Descricao = value
        End Set
    End Property

    Dim _UF As String
    <System.Runtime.Serialization.DataMemberAttribute()> _
    Public Property UF() As String
        Get
            Return _UF
        End Get
        Set(value As String)
            _UF = value
        End Set
    End Property

End Class

' To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line.
' <System.Web.Script.Services.ScriptService()> _
<WebService(Namespace:="http://tempuri.org/")> _
<WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
<Global.Microsoft.VisualBasic.CompilerServices.DesignerGenerated()> _
Public Class Service
    Inherits System.Web.Services.WebService

    <WebMethod()> _
    Public Function HelloWorld() As String
        Return "Hello World"
    End Function

    <WebMethod()> _
    <Script.Services.ScriptMethod(ResponseFormat:=System.Web.Script.Services.ResponseFormat.Json)> _
    Public Function getStates() As String
        Try
            Dim ds As New System.Data.DataSet

            Dim strConexao As String = ""
            strConexao = ConfigurationManager.ConnectionStrings("ConnectionString").ConnectionString

            Dim conexao As System.Data.SqlClient.SqlConnection = New Data.SqlClient.SqlConnection()
            conexao.ConnectionString = strConexao
            conexao.Open()

            Dim cmd As System.Data.SqlClient.SqlCommand = New Data.SqlClient.SqlCommand
            cmd.CommandText = "Select ID, Descricao, UF From dbo.States"
            cmd.CommandTimeout = 120
            cmd.Connection = conexao

            Dim adp As System.Data.SqlClient.SqlDataAdapter = New Data.SqlClient.SqlDataAdapter()
            adp.SelectCommand = cmd
            adp.Fill(ds)

            Dim obj As List(Of Estado) = New List(Of Estado)
            For Each dr As DataRow In ds.Tables(0).Rows
                Dim e As Estado = New Estado()
                e.ID = dr.Item("ID")
                e.Descricao = dr.Item("Descricao")
                e.UF = dr.Item("UF")

                obj.Add(e)
            Next

            Dim strRetorno As String = getJSON(obj)

            Return strRetorno
        Catch ex As Exception
            Return "Deu Merda: " + ex.Message
        End Try

    End Function

    Private Function getJSON(obj As Object) As String
        'yourobject is your actual object you want to serialize to json
        Dim serializer As DataContractJsonSerializer = New DataContractJsonSerializer(obj.GetType())

        'create a memory stream
        Dim ms As MemoryStream = New MemoryStream()

        'serialize the object to memory stream
        serializer.WriteObject(ms, obj)

        'convert the serizlized object to string
        Dim jsonString As String = Encoding.Default.GetString(ms.ToArray())

        'close the memory stream
        ms.Close()

        Return jsonString
    End Function
End Class 
```

网页：

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="Default.aspx.vb" Inherits="WS_JSON_Teste._Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

    </div>
    </form>
</body>

<link rel="stylesheet" href="http://code.jquery.com/ui/1.8.22/themes/base/jquery-ui.css" type="text/css" media="all" />
<link rel="stylesheet" href="http://static.jquery.com/ui/css/demo-docs-theme/ui.theme.css" type="text/css" media="all" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.8.22/jquery-ui.min.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function ($) {
        $.ajax({
            type: "POST",
            url: "http://localhost:27916/WS_JSON/Service.asmx/getStates",
            contentType: "application/jsonp; charset=utf-8",
            dataType: "jsonp",
            success: function (data) {
                alert("success!");
            },
            failure: function (error) {
                alert("failure!");
            }
        });
    });

</script> 
```

我用这个[链接](http://www.codeproject.com/Articles/37727/Prepare-a-JSON-Web-Service-and-access-it-with-JQue)作为参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:56:03.507

首先... ASMX 是当前运行良好的技术。总是忽略那些说“那是旧的，所以它行不通”的人

其次，您正在自己进行序列化，这就是导致问题的原因。你不必那样做。如果您的请求正确完成，并且服务知道您需要 JSON，您所要做的就是返回该对象，它会为您将其转换为 JSON。

看到这篇文章：[http ://encosia.com/asp-net-web-services-mistake-manual-json-serialization/](http://encosia.com/asp-net-web-services-mistake-manual-json-serialization/)

您的 Web 服务基本上可以看起来像这样：

```
Public Function getStates() as List(Of Estado)
  Dim myStates as List(Of Estado)

  //do the SQL to create the List object - same as above
  //then just do this!
  return myStates
End 
```

那会容易得多！

如果您在阅读文章后有不明白的地方，请告诉我。如果有帮助，我很乐意添加更多细节。我现在有以这种方式运行的服务，所以我知道它们可以工作，而且它们并没有过时。

# xcode - 以编程方式将 checkboxcell 添加到 NSTableView

> ID：14632193
> 
> 赞同：2
> 
> 时间：2013-01-31T18:01:12.530
> 
> 标签：xcode, cocoa, checkbox, cell, nstableview

我正在使用以下代码将单元格添加到 NSTableView。但这是添加文本框单元格。我需要改为添加 CheckboxCells。有人可以告诉我我该怎么做吗？

谢谢！

```
//add cells
for (NSManagedObject *a in sortedArray)
{    
    NSTableColumn *newcolumn = [[NSTableColumn alloc] initWithIdentifier:[NSString stringWithFormat:@"%@",[a valueForKey:@"Name"]]];
    [[newcolumn headerCell] setStringValue:[NSString stringWithFormat:@"%@",[a valueForKey:@"Name"]]];
    [newcolumn setWidth:50];

[table addTableColumn:newcolumn];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T21:03:27.330

复选框被实现为一个按钮。您只需设置 NSTableColumn 的 dataCell 属性来指示默认的 dataCell。

```
//add cells
for (NSManagedObject *a in sortedArray)
{    
    NSTableColumn *newcolumn = [[NSTableColumn alloc] initWithIdentifier:[NSString stringWithFormat:@"%@",[a valueForKey:@"Name"]]];
    [[newcolumn headerCell] setStringValue:[NSString stringWithFormat:@"%@",[a valueForKey:@"Name"]]];
    [newcolumn setWidth:50];

    NSButtonCell * checkBox = [[NSButtonCell alloc] init];
    [checkBox setButtonType:NSSwitchButton];
    [newColumn setDataCell:checkBox];
    [table addTableColumn:newcolumn];
} 
```

# jquery - jquery：slideToggle 和 scrollTo 在 ajax 加载的 html 文件中不起作用

> ID：14632194
> 
> 赞同：0
> 
> 时间：2013-01-31T18:01:13.270
> 
> 标签：jquery, css, ajax, slidetoggle, scrollto

我目前正在研究我的新作品集。要检查我遇到的问题，您可以访问[http://www.zeiteffekt.de/relaunch/#mmd](http://www.zeiteffekt.de/relaunch/#mmd)并单击“详细信息”。会发生什么情况是通过 ajax 加载一个新的 html 文件的滑动切换效果。

```
$(".show_details").click(function(){            
        $("#mmd_details").slideToggle("slow");
    });

$(document).ready(function() {
      // select all the links with class="load_content", when one of them is clicked, get its "href" value
      // adds a "loading..." notification, load the content from that URL and
      $('a.load_content').click(function() {
        var url = $(this).attr('id');
        $('#mmd_details').html('Laden...').load(url);
        return false;
      });
    }); 
```

我的问题如下：我在 ajax 加载的 html 文件中有一个简单的“关闭”链接，它根本不会切换 div 容器。当我单击初始“详细信息”链接时，它将关闭 div。加载的 html 中的相同链接不会这样做。

在 ajax 加载的 html 文件中使用时，scrollTo 也不起作用。

这是滚动功能：

```
$(document).ready(function() {
        $(".scroll").click(function(event){     
        event.preventDefault();
        $('html,body').animate({scrollTop:$(this.hash).offset().top}, 700);
        });
    }); 
```

我完全不知道为什么 jquery 脚本在 ajax 文件中不起作用。我希望你能帮助我。

干杯，蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:04:27.627

当页面完成加载时，jQuery 将它的事件处理程序绑定到 dom。如果你之后*添加*到 dom，比如通过 ajax，jQuery 不知道新元素。

您需要根据您的 jQuery 版本使用“ [on ”或“live”。](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T19:29:28.773

我没有使用过`jQuery.load()`，但文档 ( [http://api.jquery.com/load/](http://api.jquery.com/load/) ) 并未表明加载的 HTML 中的任何内联脚本都会被评估。

它确实指定您可以将回调函数传递给`load()`，我会说这是您最好的选择：

```
$('#mmd_details').html('Laden...').load(url, function() {
  $(".scroll").click(function(event){     
     event.preventDefault();
     $('html,body').animate({scrollTop:$(this.hash).offset().top}, 700);
  });
}); 
```

每当我使用 jQuery 的“on”绑定方法时，我总是需要至少有一个元素与 DOM 中的选择器匹配，以便它绑定到未来的元素。我可能使用不正确，所以我愿意更正:)

# ruby - 使用 RSpec 测试 HTTPS (SSL) 请求的简单方法

> ID：14632197
> 
> 赞同：2
> 
> 时间：2013-01-31T18:01:24.020
> 
> 标签：ruby, rspec, sinatra

我希望 Rspec 使用 https 请求根目录。这是我目前拥有的：

```
it "requesting root (/) with HTTPS should return 200" do
  get "https://test.host/"
  last_response.should be_ok
end 
```

尝试[在 RSpec Rails 中测试 HTTPS (SSL) 请求中](https://stackoverflow.com/questions/6785261/test-an-https-ssl-request-in-rspec-rails)提出的解决方案会返回以下错误：

```
wrong number of arguments (0 for 1) 
```

我会假设我可以做类似的事情：

```
get "/", :https => "on" 
```

有没有办法在不指定主机的情况下请求根？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T18:26:35.673

使用 Sinatra 和 RSpec 时，您使用的是`#get/#post`提供的方法`Rack::Test`，因此我建议您查看它们的工作原理：[https://github.com/brynary/rack-test/blob/master/lib/rack/test。 rb](https://github.com/brynary/rack-test/blob/master/lib/rack/test.rb)

如您所见，它们采用可选的`env`Hash，您可以在其中将“HTTPS”设置为“on”，如下所示：

```
get '/', {}, {'HTTPS' => 'on'} 
```

如果您想为所有请求默认设置它，则需要覆盖该`Rack::Test::Session#default_env`方法，并且必须`'HTTPS' => 'on'`这样做（我建议在您的 中进行`spec_helper.rb`），如下所示：

```
class Rack::Test::Session
  def default_env
    { "rack.test" => true, "REMOTE_ADDR" => "127.0.0.1", "HTTPS" => 'on' }.merge(headers_for_env)
  end
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-19T04:29:06.717

先前的更改答案`Rack::Test:Session`在 rails 4.1.1 中对我不起作用。相反，我现在使用 Rails RSpec 绑定来强制所有集成测试进入 https。为此，将以下代码添加到`spec_helper.rb`：

```
class ActionDispatch::Integration::Session
  def https?
    true
  end
end 
```

# shell - php exec() 函数不适用于 ubuntu + nginx + fpm 上的所有命令

> ID：14632198
> 
> 赞同：3
> 
> 时间：2013-01-31T18:01:31.627
> 
> 标签：shell, php

我可以看到结果：

```
echo exec("whoami"); // will output "www-data" 
```

但是，如果我尝试运行真实世界的命令：

```
echo exec("casperjs myscript.js /foo/bar"); 
```

然后什么也没有发生：

*   没有输出（casperjs 脚本应该输出一些标准输出日志消息）
*   无操作（脚本应该使用绝对路径创建图像，但它没有）
*   PHP没有错误
*   shell命令没有输出

我在 StackOverflow 上进行了搜索，并尝试了其他方法（首先在 shell 中进行了测试，以确保它们有效）：

```
echo exec("casperjs /absolute/path/to/myscript.js");
echo exec("/usr/local/bin/casperjs /absolute/path/to/myscript.js"); 
```

我还测试了其他组合，使用`system()`，`shell_exec()`甚至`passthru()` ，但它总是一样的：没有错误，没有输出，甚至在 php 日志文件中，所以很难理解这个问题:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:05:16.463

尝试`echo exec("casperjs myscript.js /foo/bar 2>&1");`将标准错误重定向到标准输出，否则不会显示。

这可能是您的 cmdline 中的错误，或者 casperjs 可能不在您的 $PATH 中，等等。

# iphone - iPhone 应用程序将数据发送回网络服务器

> ID：14632199
> 
> 赞同：0
> 
> 时间：2013-01-31T18:01:37.320
> 
> 标签：iphone, barcode, barcode-scanner, zbar-sdk, zbar

你的一点时间。我必须开发一个从网页调用的条形码应用程序。现在我已经编写了用于调用应用程序的 javascript。应用程序读取完条形码后，我必须返回我的网页，条形码数据应保存在网页的某个文本框中。

我的麻烦是： - >当网页触发应用程序时，我将页面发送到后台。现在，当应用程序返回数据时，我如何在不刷新页面的情况下使用内容填充网页的文本框对象。（页面内还有其他数据，还有一个luser登录）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:43:06.310

```
Here goes the page which calls the app..<html>
<head>

<script src="/Users/User_admin/Downloads/appl/src/main/webapp/static/scripts/gtx/jquery.min.js"></script>
<script type="text/javascript">

$(document).ready(function() {
$('#fill').click(function(){
$('#div2').load('/Users/User_admin/Desktop/scanner/barcodescanner/local html files/dummy.html #url');
});
});

function startMyApp()
{
  document.location = 'scannerApp://';
}

</script>

</head>

<body align="center">

<h3> Product Info </h3>
<br><br><br>
<label> Product Name </label>
<input type="text"/>
<br><br>
<label> Product Category </label>
<input type="text"/>
<br><br>
<label> Serial Number </label> <div id="div2">[]</div>

<input id="launch" type="button" onclick='startMyApp()' value="Launch Application to scan serial number"> </input>

<br>

<input id="fill" type="button" value="Press button to fill the detail"></input>

</body>

</html> 
```

# jquery - Jquery Iframe 删除所有元素，除了 我有，例如：

[/top_list.html](/top_list.html)

如何从该框架中删除除 table .. 之外的所有内容，或者用户如何仅看到该页面中的表格内容？

> ID：14632200
> 
> 赞同：0
> 
> 时间：2013-01-31T18:01:38.780
> 
> 标签：jquery, replace

我有，例如：

```
 <iframe width="700px" src="/top_list.html"></iframe> 
```

如何从该框架中删除除 table .. 之外的所有内容，或者用户如何仅看到该页面中的表格内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:18:29.137

如果没有唯一标识符并且您无法更改 top_list 页面，您可以使用 jquery .hide() 隐藏您不想显示的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:19:12.423

您需要一些 jquery 工具：

*   [http://api.jquery.com/contents/](http://api.jquery.com/contents/)获取 iframe 内容
*   [http://api.jquery.com/next/](http://api.jquery.com/next/) next 获取后面的下一个元素`.main`
*   定位其余元素并隐藏它们。如果没有一个可靠的例子，我会尽力证明它是如何完成的

我的示例对查询非常明确。没有链接，所以你可以看到发生了什么。我希望它有所帮助。

```
$(window).on('load', function() // wait for load event, so the iframe is fully loaded in
{
  var $iframe = $('iframe'); // assuming only one?  You need to target the right iframe, perahps with iframe[src="/top_list.html"] if that's your only option

  var $contents = $iframe.contents();
  var $main = $contents.find('.main');
  var $tbl = $main.next(); // now we have the table

  $contents.find('*').hide(); // hide everything
  $tbl.show(); // show table and...

  var $parent = $tbl.parent(); // get/show all parents of the tbl

  while($parent.length)
  {
     $parent.show(); // show parent
     $parent = $parent.parent(); // move up the hierarchy
  }
}); 
```

# objective-c - 向上取整浮点值 ios

> ID：14632202
> 
> 赞同：4
> 
> 时间：2013-01-31T18:01:48.427
> 
> 标签：objective-c

例如`int value1 = 11`，在除以 2 ( `value1 / 2`) 后，我有一个值，它返回 5。float 中的实际值是 5.5，在这种情况下或其他情况下，谁能帮我返回 6..？一般来说，我想将值四舍五入到下一个更高的值..

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-31T18:05:05.437

如果您*总是*想四舍五入，并且您有一个`float`值，请使用`ceilf`（来自`<math.h>`库）。

如果您想将整数除以`n`，请执行`(value + n-1) / n`。因此，除以 2 时，变为`(value + 1) / 2`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-31T18:05:15.367

有函数 ceil(<#(double)#>) 或 ceilf(<#(float)#>) 将值四舍五入到更高

此外，您应该明确地将计算转换为 float/double 以获得值 5.5，该值可以四舍五入到更高。

```
ceilf(value1 / 2.0f); 
```

或者

```
ceilf(1.0f * value1 / 2); 
```

如果你不这样做 - 它可能会在下一个序列中呈现：

```
ceilf(11/2) = 
1) 11/2 = result int = 5
2) ceilf(5)
3) 5 ->int implicitly cast to float -> 5.0f
4) result 5.0f 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T18:03:47.980

好吧，通常，您只需添加 1：

int half = (value1+1)/2

所以，你总是会四舍五入。应该是整数的最简单方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T18:05:11.693

```
ceil(value1 / 2) 
```

向上舍入到最接近的 int

# android - 不同的android视图有不同的敏感性吗？

> ID：14632207
> 
> 赞同：1
> 
> 时间：2013-01-31T18:01:54.647
> 
> 标签：android

我现在正在构建一个应用程序，我正在使用`Button`视图并使用选择器 xml 文件将按钮的背景设置为我的图像。但是我发现这些按钮对触摸不是很敏感，而且由于它们有点小，所以要花点力气才能按下。

我的问题是不同的android视图元素有不同的敏感度吗？是否有更好的视图可以使用更敏感或更有用，甚至可以调整灵敏度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:15:28.047

据我所知，所有视图的触摸灵敏度都是相同的。建议任何触摸目标（例如您的按钮）的最短边距至少为 48dp。如果你的按钮比这个小，增加它们可能会有所帮助。`android:minWidth`使用和`android:minHeight`属性可以做到这一点：

```
<Button android:id="@+id/my_button
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:minHeight="48dp"
    android:minWidth="48dp"
    android:text="My Button" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:32:38.283

也可能是您注意到按钮选择的延迟。Android（无论好坏——我个人觉得它慢得令人讨厌）在您按下可按下项目和它在 UI 上反映该按下状态之间增加了延迟。我相信它主要用于 ListViews 之类的东西，否则您可能会在按下某个项目然后移动手指之间看到闪烁（例如，您打算做出滚动手势，但它首先显示被按下的项目）。

您可以在 onTouch 事件中处理设置状态，在 ACTION_DOWN 上将按下状态设置为 true，在 ACTION_UP 上设置为 false。

# matlab - Matlab中的循环图？

> ID：14632220
> 
> 赞同：0
> 
> 时间：2013-01-31T18:02:50.637
> 
> 标签：matlab, plot, cycle

Matlab 是否有等效的 R 函数“月图”？有谁知道如何在 Matlab 中制作循环图/每月循环？

这是我想做的一个例子（但每月而不是每天）：

[http://peltiertech.com/WordPress/wp-content/img200806/WPStatsDayOfWeek.png](http://peltiertech.com/WordPress/wp-content/img200806/WPStatsDayOfWeek.png)

我有 10 年的月度数据，我想创建一个图，其中显示每个月的 10 年趋势。

谢谢！

# java - 如何在 for 的每个循环中重置 arrylist？

> ID：14632222
> 
> 赞同：-1
> 
> 时间：2013-01-31T18:02:53.960
> 
> 标签：java

我有一个整数数组列表。我想在每个 for 中清除它，然后再次填充它。我的代码是：

```
private static int myMethod(int prim){

    ArrayList<ArrayList<Integer>> number = new ArrayList<ArrayList<Integer>>();
    ArrayList<Integer> sublist = new ArrayList<Integer>();
    ArrayList<Integer> temp = new ArrayList<Integer>();

    for (int x = 2; x < prim; x++ ){

        for (int power = 0; power < prim - 1; power++){ 
            // in this loop sublist 
            //will be fill
            int i=(int)((Math.pow(x, power))%prim);
            sublist.add(i);     
        }

        number.add(sublist);

    }
} 
```

prim 是例如 7，所以我想要数字数组列表，所以这个 =>

```
[[1,2,4,1,2,4][1, 3, 2, 6, 4, 5]...] 
```

但是 number arraylist 具有这种形式：

```
[[1,2,4,1,2,4,1, 3, 2, 6, 4, 5][1,2,4,1,2,4,1, 3, 2, 6, 4, 5]] 
```

请帮我 ：（

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T18:05:23.780

你不能只是清除`sublist`；您必须`sublist`每次通过循环创建一个新的。

```
for (int x=2;x<prim;x++ ){
    sublist = new ArrayList<Integer>();
    for (int power=0;power<prim-1;power++){ // in this loop sublist //will be fill
        int i=(int)((Math.pow(x, power))%prim);
        sublist.add(i);     
    }

    number.add(sublist);

} 
```

添加`sublist`到`number`时，添加*参考*；`sublist`不被*复制*。如果您只是调用，则每次都`sublist.clear()`将添加一个空列表。`number`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:05:32.033

在 for 循环中创建列表...

```
ArrayList<ArrayList<Integer>>  number=new ArrayList<ArrayList<Integer>>();
       for (int x=2;x<prim;x++ ){
    // create sublist rather than outside the loop
    ArrayList<Integer> sublist = new ArrayList<Integer>();
            for (int power=0;power<prim-1;power++){ // in this loop sublist //will be fill
                int i=(int)((Math.pow(x, power))%prim);
                sublist.add(i);     
            }

            number.add(sublist);

            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T18:06:16.087

```
ArrayList<ArrayList<Integer>>  number=new ArrayList<ArrayList<Integer>>();
    ArrayList<Integer> sublist=null;
    ArrayList<Integer> temp=new ArrayList<Integer>();

    for (int x=2;x<prim;x++ ){
     sublist=new ArrayList<Integer>();
        for (int power=0;power<prim-1;power++){ // in this loop sublist //will be fill
             int i=(int)((Math.pow(x, power))%prim);
            sublist.add(i);     
        }

        number.add(sublist);

        } 
```

# jquery - 通过jquery从元素中删除类时触发事件？

> ID：14632230
> 
> 赞同：2
> 
> 时间：2013-01-31T18:03:24.850
> 
> 标签：jquery

我有一段代码使用 jquery 从`<div>`. 删除类时是否可以通过事件触发另一个 jquery 函数？

html

```
<div class="square"></div> <br/>
<div class="square test"></div><br/>
<div class="square"></div> <br/>
<div class="square"></div>
<button>test</button> 
```

css

```
.square{
width: 100px;
height: 100px;
background-color: red;
}
.pink{
background-color:pink;
} 
```

javascript

```
$(document).on("*changedtopink*", "div", function(){
   alert("it changed");
});
$(document).on("click","button",function(){
   $(".test").addClass("pink");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:20:34.200

您可以[`trigger`](http://api.jquery.com/trigger/)自己的活动：

**HTML**

```
<div class="square"></div> <br/>
<div class="square"></div> <br/>
<div class="square"></div> <br/> 
<div class="square"></div> 
```

**CSS**

```
.square{
    width: 100px;
    height: 100px;
    background-color: red;
}

.rectangle{
    width: 200px;
    height: 100px;
    background-color: green;
} 
```

**jQuery**

```
$("div").on("changedClass", function(){
    $(this).addClass("rectangle");
});

$(document).on("click", "div", function(){
    $(this).removeClass("square");               
    $(this).trigger("changedClass");
}); 
```

在此示例中单击红色方块将删除`.square`该类并触发我新定义 的`changedClass`事件。此事件为给定触发`div`并添加一个新类或`.rectangle`.

**[例子](http://jsfiddle.net/ChaseWest/9nYyJ/1/)**

**编辑**：

**HTML**

```
<div class="square"></div> <br/>
<div class="square"></div> <br/>
<div class="square"></div> <br/> 
<div class="square"></div>  
<input type="hidden" value="N" /> 
```

**jQuery**

```
//When the input is changed, add the rectangle class
$("input").on("change", function(e, divEl){
    $(divEl).addClass("rectangle");
});

//when a div is clicked, trigger a change event for the input place holder.
$(document).on("click", "div", function(){             
    $("input").trigger("change", [this]);
});

//regualr click event for your div
$(document).on("click", "div", function(){             
    $(this).removeClass("square");
}); 
```

**[例子](http://jsfiddle.net/ChaseWest/9nYyJ/3/)**

这是另一个使用按钮的**[示例。](http://jsfiddle.net/ChaseWest/9nYyJ/4/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:12:04.520

有 Dom Change 事件，但并非所有浏览器都广泛支持。如果适合您的用例，我认为最安全的方法是检查计时器上的类，并在检测到类更改时运行一个函数。

```
var hasClass = false;

setInterval(function(){
  if($('#selector').hasClass('myClass') != hasClass){
    hasClass = $('#selector').hasClass('myClass')
    // fun your custom function here
  }
},100) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-08T01:57:25.967

在 2021 年执行此操作的正确（标准跟踪）方法是使用 MutationObserver：[https ://developer.mozilla.org/en-US/docs/Web/API/MutationObserver](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)

阅读上面的链接，然后当您调用`observer.observe()`时传入一组选项作为第二个参数 - 如果您`{attributes: true}`作为选项传入，突变观察者将监视相关元素上的所有属性更改。由于`class`是一个属性，当从元素中添加或删除类时，您的突变观察者将触发其回调 - 只需检查`classList`回调中的元素以过滤您想要的类。

有关如何使用 MutationObserver 的更多信息：[https ://developer.mozilla.org/en-US/docs/Web/API/MutationObserver/MutationObserver](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver/MutationObserver)

# grails - 访问外部配置中的应用程序属性 (${appName})

> ID：14632234
> 
> 赞同：8
> 
> 时间：2013-01-31T18:03:33.280
> 
> 标签：grails

我已经按照配置文件建议的方式将我的 Grails 配置外部化了。我一直在用我的 1.3 项目和生产线做到这一点

```
grails.serverURL = "http://localhost:8080/${appName}" 
```

在外部配置中效果很好。现在我遇到了 2.0 的问题，即 Grails 似乎无法解决 ${appName} - 它会在重定向中使用 [:] 代替。

一旦我将这条线移回内部配置，一切正常。

有什么办法可以将此配置行移至外部配置？难道我做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-31T18:43:12.247

你可以`${grails.util.Metadata.current.getApplicationName()}`改用。

请注意，由于`Metadata`实现了`Map`您不能将其缩短为，`${grails.util.Metadata.current.applicationName}`因为密钥不是`applicationName`.

# css - HTML 5 Doctype 声明与 IE 混淆

> ID：14632235
> 
> 赞同：2
> 
> 时间：2013-01-31T18:03:39.430
> 
> 标签：css, html, internet-explorer

我在主页上使用 jquery 滑动框动画：http: [//sandstonetombstonesuppliers.co.za/](http://sandstonetombstonesuppliers.co.za/)

现在我使用标准的 HTML 5 文档类型：这会在 IE（8 和 9）中产生我的 CSS 问题。访问链接时您会看到，前两个框具有可见的透明文本动画，应该部分隐藏。将鼠标悬停在两个顶部框上以了解我的意思

删除它时效果很好，但我的总体布局向左移动（不再是中心），我的菜单链接不再有蓝色下划线 - 请参阅此链接：[http ://sandstonetombstonesuppliers.co.za/index2.html](http://sandstonetombstonesuppliers.co.za/index2.html)

*为什么这样做？*

这是我的标记：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Bluegig Distribution</title>

    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <link rel="shortcut icon" href="/images/favicon.ico"/>
    <link rel="stylesheet" type="text/css" media="screen" href="css/slidingboxes.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="css/style.css" />   
    <link href='http://fonts.googleapis.com/css?family=Ubuntu' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>  
        <!--[if lt IE 9]>
            <script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
        <![endif]-->
        <!--[if lte IE 7]>
            <link rel="stylesheet" type="text/css" href="css/ie.css" media="screen" />
        <![endif]-->
</head> 
```

更新：似乎使用与 Chrome 和 FF 中的滑动框产生相同的问题？

```
Javascript:

$(document).ready(function(){
                //To switch directions up/down and left/right just place a "-" in front of the top/left attribute

                //Horizontal Sliding
                $('.boxgrid.slideright').hover(function(){
                    $(".cover", this).stop().animate({left:'446px'},{queue:false,duration:500});
                }, function() {
                    $(".cover", this).stop().animate({left:'0px'},{queue:false,duration:500});
                });
                //Diagnal Sliding
                $('.boxgrid.thecombo').hover(function(){
                    $(".cover", this).stop().animate({top:'357px', left:'325px'},{queue:false,duration:500});
                }, function() {
                    $(".cover", this).stop().animate({top:'0px', left:'0px'},{queue:false,duration:500});
                });

                //Full Caption Sliding (Hidden to Visible)
                $('.boxgrid.captionfull').hover(function(){
                    $(".cover", this).stop().animate({top:'257px'},{queue:false,duration:250});
                }, function() {
                    $(".cover", this).stop().animate({top:'357px'},{queue:false,duration:250});
                });
                //Caption Sliding (Partially Hidden to Visible)
                $('.boxgrid.caption').hover(function(){
                    $(".cover", this).stop().animate({top:'120px'},{queue:false,duration:250});
                }, function() {
                    $(".cover", this).stop().animate({top:'317px'},{queue:false,duration:250});
                });
            }); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:03:48.697

首先，您的文档类型和名称空间声明搞砸了。你有没有尝试过？

```
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]--> 
```

您正在设置一个**html5 doctype**，然后引用**xhtml 命名空间**。这可能会给您在 IE 中带来问题...

我通常建议克隆 h5bp 的最新 git 分支（html5 样板）以设置所有 html5 项目。否则，事情会变得很糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:53:12.827

我认为问题出在插件上。我使用了另一个很好用的马赛克 jquery 插件，它带有 XHTML 1.0 过渡文档类型：

[http://buildinternet.com/project/mosaic/1.0/](http://buildinternet.com/project/mosaic/1.0/)

谢谢你的帮助

# ios - 以编程方式添加时 UISearchDisplayController 不显示

> ID：14632237
> 
> 赞同：0
> 
> 时间：2013-01-31T18:03:41.933
> 
> 标签：ios, objective-c

我现在创建了一个 UISearchDisplayController，同时以编程方式添加它没有显示。

[自我presentModalViewController：self.searchDisplayController动画：YES]；

所以我检查了苹果指南，发现这个类不是从 UIViewController 继承的，而是从 NSObject 继承的！

那么是否有任何解决方案可以实现这一目标？

任何机构以前都这样做过吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:08:54.573

`UISearchDisplayController`无法隐藏或显示 - 它只是`UISearchBar`. `UISearchBar`继承自`UIView`，这是您想要使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:48:10.627

正如@SAE 所说，`UISearchDisplayController`只管理一个`UISearchBar`. 您必须创建一个单独的视图控制器，添加一个搜索栏作为子视图并呈现它。

# php - 使用 PHP 和 Javascript 进行多步发布？

> ID：14632248
> 
> 赞同：0
> 
> 时间：2013-01-31T18:04:40.450
> 
> 标签：php, jquery, multi-step

我有一个 4 步表单，我把它做成了 4 页 formstep1.php、formstep2.php、formstep3.php。这些表格属于数据库上的不同表。

我想让它像例如；当我提交第一个表单时，当前页面不应该刷新，而是更改 div 内容并使用加载图像调用第二个表单。我的意思是

如果第一个表单发布成功{调用第二个表单并将图像加载到 div..}

如果第二个表单发布成功{调用第三个表单并将图像加载到 div..}

我该怎么做？什么是最好的方法？对不起我的英语，谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:07:36.920

与其拥有多个表单，不如拥有一个包含所有输入字段的表单。根据您所处的步骤，使用 CSS 隐藏 div 以显示特定 setp 的相关输入。在最后一步提交表单。

例如：

```
div 1 - > step 1 - > contains input 1,2,3
div 2 - > step 2 - > contains input 4,5,6
div 3 - > step 3 - > contains input 7,8,9
div 4 - > step 4 - > contains input 10,11,12 -> submit the form 
```

当您在第 1 步时，显示 div 1 并隐藏所有其他 div。同样，您可以继续。

CSS：

`display : none;`隐藏 div。

查询：

根据步骤将特殊类添加到 div，因此特定的 div 将被隐藏。

如果您需要验证，您可以使用 jquery 来完成它。

在 PHP 级别，您可以根据需要将数据插入到不同的表中。

拥有一个表单帖子而不是多次刷新页面会非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:19:11.660

为什么不尝试 AjaxForms：- [http://jquery.malsup.com/form/](http://jquery.malsup.com/form/)

```
 <html>
 <head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="http://malsup.github.com/jquery.form.js"></script> 
 <script type="text/javascript">
 $(document).ready(function() { 
      $("#form2").fadeOut('slow',function(){
      $("#form2").css({"visibility":"hidden"});
      });
      $("#form3").fadeOut('slow',function(){
      $("#form3").css({"visibility":"hidden"});
      });
      $("#form4").fadeOut('slow',function(){
      $("#form4").css({"visibility":"hidden"});
      });

                  // bind 'myForm1' and provide a simple callback function 
        $('#myForm1').ajaxForm(function() { 
            $("#form1").fadeOut('slow',function(){
             $("#form2").fadeIn('slow',function(){
             $("#form1").css({"visibility":"hidden"});
             $("#form2").css({"visibility":"visible"});
             });
           });
            }); 

   $('#myForm2').ajaxForm(function() { 
            $("#form2").fadeOut('slow',function(){
              $("#form3").fadeIn('slow',function(){
             $("#form2").css({"visibility":"hidden"});
             $("#form3").css({"visibility":"visible"});
             });
           });
            }); 

  }); 
</script>
</head>
<body>
<div id="form1">
<form id="myForm1" action="formstep1.php" method="post"> 
Name: <input type="text" name="name" /> 
Comment: <textarea name="comment"></textarea> 
<input type="submit" value="Submit Comment" /> 
</form>
</div>
<div id="form2">
<form id="myForm2" action="formstep2.php" method="post"> 
Likes: <input type="text" name="name" /> 
Adress: <textarea name="comment"></textarea> 
<input type="submit" value="Submit Data" /> 
</form>
</div>
</body>
</html> 
```

我觉得对你有用...

# c# - ASP.NET MVC 4 如何使用自定义的 membersprovider 和 roleprovider 实现 Oauth

> ID：14632249
> 
> 赞同：10
> 
> 时间：2013-01-31T18:04:41.177
> 
> 标签：c#, asp.net, asp.net-mvc-4, security

经过大量搜索和尝试后，我终于弄清楚了如何让人们在我的网站上注册和登录（并赋予他们角色等并进行授权）。我继承了 ExtendedMembershipProvider 和 RoleProvider 类，为它们创建了一个自定义类，但现在我仍然无法让 Oauth 正常工作（主要是 OpenID）。我在 AuthConfig 中注册了 GoogleClient，但是一旦我尝试登录，就会出现以下问题（在 AccountController.cs 中）：

```
 if (OAuthWebSecurity.Login(result.Provider, result.ProviderUserId, createPersistentCookie: false)) 
```

然后它说尚未实现，现在我检查了扩展会员资格，我无法覆盖登录（因为它不存在，但它在哪里）。我也搜索了很多谷歌，但没有运气，任何让 oauth 使用的说明都会是汗水（我想我需要制作第三个 CustomOathprovider，但我无法找到继承的内容）！

PS：我制作了一个 custommembershiprpovder 和 customroleprovider，因为我想使用不同的数据库方案。

格言

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-02T14:12:07.710

我必须在我的自定义 memberbershipprovider 中覆盖另外 3 个方法

```
public override void CreateOrUpdateOAuthAccount(string provider, string providerUserId, string userName)

public override int GetUserIdFromOAuth(string provider, string providerUserId)
//return -1 if User got no OauthAccount

public override string GetUserNameFromId(int userId) 
```

现在它正在工作。（我通过覆盖成员资格提供程序中的所有方法来解决这个问题，然后在每个方法上设置一个断点，并且无论它走到哪里，我都根据我的自定义数据库填写方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T01:00:06.507

如果我有足够的声誉发表评论，这将是一个评论。

这不是使 OAuth 在您的场景中工作的方法，但如果它有帮助，OAuthWebSecurity.Login 的来源位于[http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/5cb74eb3b2f3#src/Microsoft.Web。 WebPages.OAuth/OAuthWebSecurity.cs](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/5cb74eb3b2f3#src/Microsoft.Web.WebPages.OAuth/OAuthWebSecurity.cs)并查看 SimpleMembership 如何实现 OAuth，您可以查看[http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/5cb74eb3b2f3#src/WebMatrix.WebData/SimpleMembershipProvider.cs](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/5cb74eb3b2f3#src/WebMatrix.WebData/SimpleMembershipProvider.cs)。

你的项目听起来很酷，祝你好运。

# scheme - 如何映射哈希表的值（球拍）

> ID：14632251
> 
> 赞同：8
> 
> 时间：2013-01-31T18:04:51.757
> 
> 标签：scheme, hashtable, racket

我想在哈希表中的值上映射一个函数，如下所示：

```
(hash-map add1 (hash "apple" 1 "pear" 2))
=> #hash(("apple" . 2) ("pear" . 3)) 
```

是否有库函数可以做到这一点？最好有一个也可以处理不可变哈希表。

我查看了PlaneT，但没有看到任何东西。

现在，如果这真的不存在，我会继续写下去。把这个带入球拍的礼仪是什么？我只是在 github 上 fork 并将其添加到标准库（和文档！）并提交拉取请求？还是我应该先把它变成一个planeT，然后再要求它搬进来？我想帮忙，但我只是不知道什么是“正确”的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T18:58:21.253

有一个哈希映射，但它返回一个列表 [ [1](http://docs.racket-lang.org/reference/hashtables.html?q=hash-map#%28def._%28%28quote._~23~25kernel%29._hash-map%29%29) ]

您必须自己编写`hash-map`才能完全按照您的意愿进行操作。

```
#lang racket

(define (new-hash-map f h)
  (make-immutable-hash (hash-map h (λ (k v) (cons k (f v))))))

(new-hash-map add1 (hash "apple" 1 "pear" 2))

; => '#hash(("pear" . 3) ("apple" . 2)) 
```

您可能感兴趣的另一种形式是 for/hash [ [2](http://docs.racket-lang.org/reference/for.html?q=for/hash&q=hash-map#%28form._%28%28lib._racket/private/base..rkt%29._for/hash%29%29) ]：

```
#lang racket

(define (new-hash-map2 f h)
  (for/hash ([(k v) (in-hash h)]) (values k (f v))))

(new-hash-map2 add1 (hash "apple" 1 "pear" 2))

; => '#hash(("pear" . 3) ("apple" . 2)) 
```

如果你觉得这个功能应该包含在 Racket 中，欢迎使用补丁！最好的贡献方式是在 github 上 fork 并提交拉取请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T18:54:51.213

在 Racket 中，您可以使用[`hash-map`](http://docs.racket-lang.org/reference/hashtables.html?q=hash-map#%28def._%28%28quote._~23~25kernel%29._hash-map%29%29)高阶过程，它通常返回一个列表，其中包含作为参数接收的过程的应用程序产生的值，但它可以适用于就地修改地图。例如：

```
(define h (make-hash))
(hash-set! h "apple" 1)
(hash-set! h "pear" 2)

h
=> '#hash(("pear" . 2) ("apple" . 1)) 
```

诀窍是传递`lambda`具有适当功能的 a ：

```
(hash-map h (lambda (key value)
              (let ((newval (add1 value)))
                (hash-set! h key newval)
                newval)))

h
=> '#hash(("pear" . 3) ("apple" . 2)) 
```

对于更通用的解决方案，请尝试以下实现：

```
(define (mutable-hash-map! hash proc)
  (hash-map hash (lambda (key value)
                   (hash-set! hash key (proc value))))
  (void)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T18:58:55.403

[您可以使用in-hash-values](http://docs.racket-lang.org/reference/sequences.html#%28def._%28%28lib._racket/private/base..rkt%29._in-hash-values%29%29)遍历哈希表的值，并使用常规[for 循环](http://docs.racket-lang.org/guide/for.html)来映射它们。该函数`in-hash-values`接受一个散列并返回一个值序列，然后可以用`for`循环遍历它。

例子：

```
(for/list ([elt (in-hash-values (hash "apple" 1 "pear" 2))])
  (add1 elt)) 
```

同样，您可以使用[sequence-map](http://docs.racket-lang.org/reference/sequences.html#%28def._%28%28lib._racket/sequence..rkt%29._sequence-map%29%29)，尽管您得到的是另一个序列而不是列表：

```
(sequence-map add1 (in-hash-values (hash "apple" 1 "pear" 2))) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-31T21:11:29.763

由于**hash-map**创建了一个此处不需要的列表，我宁愿使用**hash-for-each**。

```
(define (hash-update-all! h func)
  (hash-for-each
    h
    (lambda (k v) (hash-set! h k (func v)))))

(define table (make-hash '((a . 1) (b . 2) (c . 3))))

(hash-update-all! table (curry * 100))

table

 ==> '#hash((c . 300) (a . 100) (b . 200)) 
```

编辑：我忘记了**for**可以处理哈希表：

```
(define (hash-update-all! h func)
  (for ([(k v) h])   (hash-set! h k (func v))))

(hash-update-all! table (curryr / 10))

table

 ==> '#hash((c . 30) (a . 10) (b . 20)) 
```

# java - Servlet 重定向到带有错误消息的同一页面

> ID：14632252
> 
> 赞同：14
> 
> 时间：2013-01-31T18:04:55.260
> 
> 标签：java, jsp, servlets, redirect, scope

我有一个关于 servlet 重定向到同一初始页面的问题。场景如下：假设用户想购买商品，填写金额并提交。表单被提交给一个 servlet，可用的数量与数据库中的可用数量进行核对。因此，如果订购的商品数量多于可用商品，则 servlet 将重定向到同一页面，但会显示“商品不可用”之类的消息。所以我的问题是如何实施这种情况。如何使用错误消息重定向到相同的初始页面。我不想在这里使用ajax。

以下是我的想法： 1.) 如果生成错误，我是否应该设置上下文属性，然后在重定向后在初始页面中再次检查它并显示已设置的消息。

此类事件的最佳做法是什么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-01T02:07:28.677

最常见和推荐的场景（用于 Java servets/JSP 世界中的服务器端验证）是将一些错误消息设置为**请求属性**（在*请求范围内*），然后使用[表达式语言](https://stackoverflow.com/tags/el/info)在 JSP 中输出此消息（参见下面的示例）。如果未设置错误消息 - 将不显示任何内容。

但是当在请求中存储错误消息时，您应该**将请求转发**到初始页面。重定向时不适合设置请求属性，因为如果您使用重定向，它将是一个**全新**的请求，并且**请求属性会在请求之间重置**。

如果您想**将请求重定向**到引用页面（您从中提交数据的页面），那么您可以将错误消息存储在会话中（在*会话范围内*），即设置**会话属性**。但是在这种情况下，您还需要**在提交的请求正确时从会话中删除该属性**，否则只要会话存在，就会出现错误消息。

至于**context 属性**，它适用于整个 Web 应用程序（*应用程序范围*）和所有用户，而且只要 Web 应用程序存在，它就存在，这在您的情况下几乎没有用。如果您将错误消息设置为应用程序属性**，它将对所有用户可见**，而不仅仅是提交错误数据的用户。

* * *

好的，这是一个原始示例。

*web.xml*

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
                        http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0">

    <display-name>Test application</display-name>

    <servlet>
        <servlet-name>Order Servlet</servlet-name>
        <servlet-class>com.example.TestOrderServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>Order Servlet</servlet-name>
        <url-pattern>/MakeOrder.do</url-pattern>
    </servlet-mapping>

</web-app> 
```

*订单.jsp*

```
<!DOCTYPE html>
<html>
<head>
    <title>Test Page</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
    <h1>Test page</h1>
    <form action="MakeOrder.do" method="post">
        <div style="color: #FF0000;">${errorMessage}</div>
        <p>Enter amount: <input type="text" name="itemAmount" /></p>
        <input type="submit" value="Submit Data" />
    </form>
</body>
</html> 
```

## 选项№1：将错误消息设置为请求属性

```
package com.example;

import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.ServletException;

import java.io.IOException;

public class TestOrderServlet extends HttpServlet {

    protected void doPost(HttpServletRequest request, HttpServletResponse response)
                    throws ServletException, IOException {
        int amount = 0;
        try {
            amount = Integer.parseInt(request.getParameter("itemAmount"));
        } catch (NumberFormatException e) {
            // do something or whatever
        }

        if ((amount > 0) && (amount < 100)) {   // an amount is OK
            request.getRequestDispatcher("/index.jsp").forward(request, response);
        } else {                                // invalid amount
            // Set some error message as a request attribute.
            if (amount <= 0) {
                request.setAttribute("errorMessage", "Please submit an amount of at least 1");
            } 
            if (amount > 100){
                request.setAttribute("errorMessage", "Amount of items ordered is too big. No more than 100 is currently available.");
            }
            // get back to order.jsp page using forward
            request.getRequestDispatcher("/order.jsp").forward(request, response);
        }
    }
} 
```

## 选项№2：将错误消息设置为会话属性

*TestOrderServlet.java*

```
package com.example;

import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.ServletException;

import java.io.IOException;

public class TestOrderServlet extends HttpServlet {

    protected void doPost(HttpServletRequest request, HttpServletResponse response)
                    throws ServletException, IOException {
        int amount = 0;
        try {
            amount = Integer.parseInt(request.getParameter("itemAmount"));
        } catch (NumberFormatException e) {
            // do something or whatever
        }

        if ((amount > 0) && (amount < 100)) {   // an amount is OK
            // If the session does not have an object bound with the specified name, the removeAttribute() method does nothing.
            request.getSession().removeAttribute("errorMessage");
            request.getRequestDispatcher("/index.jsp").forward(request, response);
        } else {                                // invalid amount
            // Set some error message as a Session attribute.
            if (amount <= 0) {
                request.getSession().setAttribute("errorMessage", "Please submit an amount of at least 1");
            } 
            if (amount > 100){
                request.getSession().setAttribute("errorMessage", "Amount of items ordered is too big. No more than 100 is currently available.");
            }
            // get back to the referer page using redirect
            response.sendRedirect(request.getHeader("Referer"));
        }
    }
} 
```

* * *

**相关阅读：**

*   [如何选择合适的bean范围？](https://stackoverflow.com/a/7031941/814702)
*   [java.lang.IllegalStateException：提交响应后无法转发](https://stackoverflow.com/a/2125045/814702)

# java - startActivityForResult 两次

> ID：14632253
> 
> 赞同：0
> 
> 时间：2013-01-31T18:04:55.747
> 
> 标签：java, android, android-intent

我有两个按钮和音频列表视图，对于第一个按钮，我使用 LongClick 和 startActivityForResult 方法从 MediaPlayer 的另一个活动中获取字符串。但我也想使用第二个按钮。我需要使用 startActivityForResult 为另一个 MediaPlayer 获取另一个字符串，这是我的代码：

```
public class MainActivity extends Activity {
String setData, gotArnswer,s,s1;
MediaPlayer mMediaPlayer;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mMediaPlayer = new MediaPlayer();
        Button b1 =(Button) findViewById(R.id.button1);
        Button b2 =(Button) findViewById(R.id.button2);
        b2.setOnLongClickListener(new View.OnLongClickListener() {

            public boolean onLongClick(View arg0) {
                // TODO Auto-generated method stub

                return false;
            }
        });
        b1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                try {
                    if (mMediaPlayer.isPlaying()) {
                          mMediaPlayer.reset();
                 }
                  mMediaPlayer.setDataSource(s); //using string here
                  mMediaPlayer.prepare();
                 mMediaPlayer.start();
            } catch (Exception e) {

            }
            }
        });
        b1.setOnLongClickListener(new View.OnLongClickListener() {

            public boolean onLongClick(View v) {
                // TODO Auto-generated method stub
                Intent i = new Intent(MainActivity.this, Activityone.class);
                startActivityForResult(i, 0);
                return false;

            }
        });

    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);
        if (resultCode == RESULT_OK){
            Bundle basket = data.getExtras();
             s = basket.getString("arnswer");

        }
    } 
```

我的 ListView `onClick()`：

```
public void onItemClick(AdapterView parent, View v, int position,
                        long id) {
  System.gc();
  music_column_index = musiccursor
    .getColumnIndexOrThrow(MediaStore.Audio.Media.DATA);
  musiccursor.moveToPosition(position);
  String filename = musiccursor.getString(music_column_index);
  Intent person = new Intent();
  Bundle backpack = new Bundle();
  backpack.putString("arnswer", filename);
  person.putExtras(backpack);
  setResult(RESULT_OK, person);
  finish();
}

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:25:48.650

所以基本上你需要知道请求代码，这是你传递给 startActivityForResult 的第二个参数。从第一个按钮调用时可以使用 0 作为请求代码，从第二个按钮调用时可以使用 1。

在第一次单击按钮时启动结果活动

```
 startActivityForResult(i, 0); 
```

在第二个按钮单击时启动结果活动

```
 startActivityForResult(i, 1); 
```

并且您需要在 onActivityResult(..) 方法中添加检查，以了解哪个活动返回的意图结果如下所示。

```
 @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);
        if (resultCode == RESULT_OK){
           if(requestCode == 0) {
            // handling code of startActivityForResult of first button
           Bundle basket = data.getExtras();
             s = basket.getString("arnswer");
            }
           if(requestCode == 1) {
            // handling code of startActivityForResult of second button
            Bundle basket = data.getExtras();
             s1 = basket.getString("arnswer");
             }

        }
    } 
```

编辑：- 不要使用 0 和 1 作为请求代码，而是定义常量以便将来阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:23:34.613

您的代码部分没用

```
b1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                try {
                    if (mMediaPlayer.isPlaying()) {
                          mMediaPlayer.reset();
                 }
                  mMediaPlayer.setDataSource(s); //using string here
                  mMediaPlayer.prepare();
                 mMediaPlayer.start();
            } catch (Exception e) {

            }
            }
        }); 
```

只有这部分工作

```
 b1.setOnLongClickListener(new View.OnLongClickListener() {

        public boolean onLongClick(View v) {
            // TODO Auto-generated method stub
            Intent i = new Intent(MainActivity.this, Activityone.class);
            startActivityForResult(i, 0);
            return false;

        }
    }); 
```

使用两个监听器 一个长按监听器 b1.setOnLongClickListener(new View.OnLongClickListener() {})

和其他类似的 b1.setOnClickListener(new OnClickListener(){})

然后您将能够一键完成两项工作

# imagemagick - 如何使用 ImageMagick 查找每英寸像素 (PPI)

> ID：14632254
> 
> 赞同：5
> 
> 时间：2013-01-31T18:04:55.913
> 
> 标签：imagemagick, png, image-manipulation

我可以使用以下命令获取 JPEG 图像的 PPI：

```
$ identify -format "%w x %h %x x %y" mypic.jpg 
1600 x 1200 72 PixelsPerInch x 72 PixelsPerInch 
```

但是，当我在 PNG 格式上运行相同的命令时，我得到每厘米像素数：

```
$ identify -format "%w x %h %x x %y" mypic.png 
1600 x 1200 28.35 PixelsPerCentimeter x 28.35 PixelsPerCentimeter 
```

有没有办法更改命令以获取 PNG 格式的每英寸像素 (PPI)，或者根据每厘米像素计算 PPI？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-04-12T18:10:11.567

您可以简单地添加选项

```
-units PixelsPerInch 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:08:10.553

使用的分辨率和单位存储在文件中，因此如果分辨率存储在 PixelsPerCentimeter 中，`identify`将显示它。没有办法通过`identify`. 但这只是厘米到英寸的转换数学：

```
PixelsPerInch = PixelsPerCentimeter * 2.54 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-13T08:03:03.583

您可以`fx`在输出中使用运算符和一些智能格式，`identify`如下所示：

```
identify -format "%[fx:int(resolution.x*2.54)]" image.png
299 
```

Of course, the true joy of this is that it is platform-independent, so you don't have to shell out to `dc` on OS X and Linux, or do whatever muppetry is required on Windows to do the maths.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T18:08:46.650

1 英寸 =~ 2.54 厘米。所以在两者之间转换是微不足道的。

# mysql - ASP.NET MVC 3 C# MySQL，在 CONTROLER 中使用 ON DELETE CASCADE 功能还是 DELETE 行？

> ID：14632256
> 
> 赞同：0
> 
> 时间：2013-01-31T18:05:10.563
> 
> 标签：mysql, asp.net-mvc, cascade, sql-delete

我需要有经验的人的意见，

mySQL情况，2张表，一对多关系：

我有一张带有 A_id(PK) 和 A_name 的表 A，还有一张带有 B_id(PK) 和 B_foto 和 A_id(FK 到表 A(A_id) 的表 B。

如果我把 FK ON DELETE CASCADE 选项，然后我删除表 A 中的一个 ROW，表 B 中引用 A_id 的所有行都将被删除，对吗？好的。

但是，如果 B_foto 是带有某个文件图像路径的字符串，并且我也想删除该文件，那么最好不要使用 ON DELETE CASCADE 选项，如果表 B 有一些引用，请在 Controler(C#) 中手动检查到 A 并手动删除行，因为我也想删除 de 文件..

如果我使用 ON DELETE CASCADE 选项，我将失去对我要删除的文件的引用.. 对吗？

也许如果我保留 ON DELETE CASCADE 选项，并首先检查表 B 中对表 A 的引用只是为了删除文件，然后我删除表 A 中的 ROW 并且它（mySQL）删除表 B 中的 de ROWS ..

希望你能解释我这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T22:09:44.553

后者似乎是更可靠的解决方案，因为除非删除成功，否则您不需要将更改提交到数据库。

虽然没有单一的方法可以解决这个问题，但使用级联删除仍然是一个有效的选项，您只需要查看执行顺序；）遍历文件，处理删除，成功删除父行。

# java - Java.NullPointerException null（再次）

> ID：14632258
> 
> 赞同：1
> 
> 时间：2013-01-31T18:05:12.617
> 
> 标签：java, null, nullpointerexception

我遇到了 NullPointerException 的另一个问题。这次是突出显示`tellen = telno.length()`。在你问之前：

*   文本文件中有要读取到该变量的数据。
*   所有变量均已初始化。
*   缓冲阅读器也被初始化。
*   这是我的代码片段：

    ```
    while((telno = br.readLine()) != null){
        name = br.readLine();

        surname = br.readLine();

        company = br.readLine();

        house = br.readLine();

        street = br.readLine();

        locality = br.readLine();

        postcode = br.readLine();

        telno = br.readLine();
        tellen = telno.length();

        mobno = br.readLine();

        sep = br.readLine();

        if(tellenx > tellen) tellen = tellenx;

    } 
    ```

请帮忙。谢谢。文本文件：

*   姓名
*   姓
*   公司
*   房子
*   街道
*   地方性
*   电话号码
*   手机号码

问题出在电话 (tellen) 所有这些名字都是虚构的，这个程序是电话簿

```
George
Farrugia
Some Company 
9, Flowers
Quail Street
Bubaqra
BBQ 1569
21369854
79825643
--------------------------------------------
Paul
Zammit

9
Bird Street
St. Julians
STJ 0000
21545796
79745247
--------------------------------------------
Peter
Spiteri
Oak Company
Trees
Birch Street
Oakgrove
TRE 3333
21323323
99323323
-------------------------------------------- 
```

后面`Zammit`的空格是空格。如果没有数据来避免这样的问题，就会放置它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:09:03.777

很可能它是文件的结尾，并且您`bufferedReader.readLine()`正在返回**null**并且您只是在一个为 null 的实例上调用了一个方法，这会导致**NPE**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:58:01.893

之所以会出现此错误，是因为您正在读取`11`一行`while loop`而不是您只需要读取`10`行。

所以在某个时候`br.readLine()`会回来`null`。

您需要根据需要读取文件，这意味着一次性（您的 while 循环）读取 10 行，然后读取接下来的 10 行，依此类推。

```
while((telno = br.readLine()) != null){ // first line
    name = br.readLine();   // secondline I think this should be first line

    surname = br.readLine();

    company = br.readLine();

    house = br.readLine();

    street = br.readLine();

    locality = br.readLine();

    postcode = br.readLine();

    telno = br.readLine();
    tellen = telno.length();

    mobno = br.readLine();

    sep = br.readLine();  // eleventh line

    if(tellenx > tellen) tellen = tellenx;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T18:11:03.953

我猜您正在尝试使用 readLine() 读取而不使用 null check.Definitel，它会给出 NPE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T18:22:48.980

添加 if 语句来检查是否有任何空引用是检查代码中的错误的好习惯。

伪代码的一个例子是：

```
 telno = br.readLine();

   if(telno == null)
       System.out.println("this will cause null pointer exception  "+ telno.length()); 
   else
       tellen = telno.length(); 
```

# angularjs - 您可以即时更改 templateUrl 吗？

> ID：14632260
> 
> 赞同：27
> 
> 时间：2013-01-31T18:05:14.237
> 
> 标签：angularjs, angularjs-directive

是否可以通过在指令范围内传递值来动态更改 templateUrl？我想将数据传递给控制器​​，该控制器将根据从指令传递的数据呈现页面

可能看起来像这样的东西：

```
<div> 
   <boom data="{{myData}}" />
</div> 

.directive('boom', function {
        return {
            restrict: 'E',
            transclude: true,
            scope: 'isolate',
            locals: { data: 'bind' },
            templateUrl: "myTemplate({{boom}}})" // <- that of course won't work.
        }
    }); 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-31T18:09:04.970

这是可能的，但是当您要加载的模板依赖于某些范围数据时，您将无法再使用指令的`templateUrl`属性，您将不得不使用较低级别的 API，即`$http`and `$compile`。

您需要做的大致（仅在链接功能中可能）是使用`$http`（不要忘记涉及`$templateCache`！）检索模板的内容，然后“手动”编译模板的内容。

听起来可能需要做很多工作，但实际上它相当简单。我建议查看使用此模式的`ngInclude`指令[源。](https://github.com/angular/angular.js/blob/master/src/ng/directive/ngInclude.js)

这是这样一个指令的框架：

```
app.directive('boom', function($http, $templateCache, $compile, $parse) {
        return {
            restrict: 'E',
            link: function(scope , iElement, iAttrs) {                            
              var boom = $parse(iAttrs.data)(scope);
              $http.get('myTemplate'+boom, {cache: $templateCache}).success(function(tplContent){
                iElement.replaceWith($compile(tplContent)(scope));                
              });              
            } 
        }
    }); 
```

假设它将被用作`<boom data='name'></boom>`. 在这里工作：[http ://plnkr.co/edit/TunwvhPPS6MdiJxpNBg8?p=preview](http://plnkr.co/edit/TunwvhPPS6MdiJxpNBg8?p=preview)

请注意，我已经将属性评估从属性解析更改`{{name}}`为属性解析，因为可能一个模板应该只在开始时确定一次。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-07-29T03:33:14.683

这是 Angular 版本 1.1.4+ 中的一项新功能，我刚刚发现如果我使用当前的不稳定 (1.1.5)，您可以将函数传递到指令的模板 url。该函数的第二个参数是属性指令的值，如下所示。

这是显示官方更改的[未发布文档的链接。](https://github.com/lrlopez/angular.js/commit/df1e2712e4babc01fc242c0be22e779081e57859)

用作`partials/template1.html`模板 url

html:

```
<div sub_view="template1"></div> 
```

指示：

```
.directive('subView', [()->
  restrict: 'A'
  # this requires at least angular 1.1.4 (currently unstable)
  templateUrl: (notsurewhatthisis, attr)->
    "partials/#{attr.subView}.html"
]) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-23T11:11:02.943

我有类似的问题

```
 return {
        restrict: 'AE',
        templateUrl: function(elm,attrs){return (attrs.scrolled='scrolled' ?'parts/scrolledNav.php':'parts/nav.php')},
        replace: true,
```

```
partnersSite.directive('navMenu', function () {
    return {
        restrict: 'AE',
        templateUrl: function(elm,attrs){return (attrs.scrolled='scrolled' ?'parts/scrolledNav.php':'parts/nav.php')},
        replace: true,
        link: function (scope, elm, attrs) {
            scope.hidden = true;
            //other logics
        }
    };
});
```

```
<nav-menu scrolled="scrolled"></nav-menu>
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-23T09:28:39.513

我稍微改变了 pkozlowski.opensource 的答案。

从：

```
var boom = $parse(iAttrs.data)(scope); 
```

至：

```
var boom = scope.data.myData 
```

这对我有用，可以使用

```
<boom data="{{myData}}" /> 
```

在指令中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-04-29T09:17:33.023

这个问题将通过 ng-include 解决，如下所示：

```
MyApp.directive('boom', function() {
    return {
      restrict: 'E',
      transclude: true,
      scope: 'isolate',
      locals: { data: 'bind' },
      templateUrl: '<div ng-include="templateUrl"></div>',
      link: function (scope) {
        function switchTemplate(temp) {
          if (temp == 'x')
          { scope.templateUrl = 'XTemplate.html' }
          else if (temp == 'y')
          { scope.templateUrl = 'YTemplate.html' }
        }
      }
    }
}); 
```

在指令的链接函数中调用带有任意 temp 参数的 switchTemplate 函数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-12-30T21:41:12.653

这是一个后续答案，解决了先前答案的一些问题。值得注意的是，它只会编译一次模板（如果您的页面上有很多模板，这一点很重要，并且它会在模板链接后监视模板的更改。它还将类和样式从原始元素复制到模板（尽管当您使用“replace：true”时，Angular 不会以非常优雅的方式在内部执行。与当前使用模板或 templateUrl 的函数的 Angular 支持方法不同，您可以使用范围信息来确定要加载的模板。

```
.directive('boom', ['$http', '$templateCache', '$compile', function ($http, $templateCache, $compile) {
    //create a cache of compiled templates so we only compile templates a single time.
    var cache= {};
    return {
        restrict: 'E',
        scope: {
            Template: '&template'
        },
        link: function (scope, element, attrs) {
            //since we are replacing the element, and we may need to do it again, we need
            //to keep a reference to the element that is currently in the DOM
            var currentElement = element;
            var attach = function (template) {
                if (cache[template]) {
                    //use a cloneAttachFn so that the link function will clone the compiled elment instead of reusing it
                    cache[template](scope, function (e) {
                        //copy class and style
                        e.attr('class', element.attr('class'));
                        e.attr('style', element.attr('style'));
                        //replace the element currently in the DOM
                        currentElement.replaceWith(e);
                        //set e as the element currently in the dom
                        currentElement = e;
                    });
                }
                else {
                    $http.get('/pathtotemplates/' + template + '.html', {
                        cache: $templateCache
                    }).success(function (content) {
                        cache[template] = $compile(content);
                        attach(template);
                    }).error(function (err) {
                        //this is something specific to my implementation that could be customized
                        if (template != 'default') {
                            attach('default');
                        }
                        //do some generic hard coded template
                    });
                }
            };

            scope.$watch("Template()", function (v, o) {
                if (v != o) {
                    attach(v);
                }
            });
            scope.$on('$destroy', function(){
                currentElement.remove();
            });
        }
    };
} ]) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-22T16:04:31.270

这些答案很好，但不专业。有一种 using 的语法`templateUrl`，我们不经常使用。**它可以是一个返回 url 的函数。该**函数有一些参数。如果你想要更多这里是一篇很酷的文章

[http://www.w3docs.com/snippets/angularjs/dynamically-change-template-url-in-angularjs-directives.html](http://www.w3docs.com/snippets/angularjs/dynamically-change-template-url-in-angularjs-directives.html)

# java - java 如何知道你是否正在运行 javaw.exe 与 java.exe

> ID：14632272
> 
> 赞同：10
> 
> 时间：2013-01-31T18:05:49.597
> 
> 标签：java, windows

[与从 java 代码中以编程](https://stackoverflow.com/questions/9006127/find-absolute-java-exe-path-programatically-from-java-code)方式查找绝对 java.exe 路径相关，有什么方法可以知道您正在运行的 java 进程是作为“java.exe”还是“javaw.exe”启动的？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T18:17:46.217

如果 VM 没有可用的控制台（例如，因为您使用 javaw.exe 启动它），则调用`System.console()`将返回 null。

编辑：即，

```
final boolean amRunningJavaW = System.console() == null; 
```

# jquery - JavaScript "if" 和 "else" 错误

> ID：14632281
> 
> 赞同：-4
> 
> 时间：2013-01-31T18:06:16.360
> 
> 标签：jquery

这段代码有什么问题我错过了什么吗？:( 我认为问题出在 if 和 else ..

```
$(function () {
    if ($("a#toggle_sidebar").length > 0) {
        $('#toggle_sidebar').click(function () {
            $('#dw_right').show();
            $('#content-container div#container').css('width', '83%');
        });
    } else {
        $('#toggle_sidebar').click(function () {
            $('#dw_right').hide();
            $('#content-container div#container').css('width', '100%');
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:14:57.260

问题是显示或隐藏的点击事件只会被处理一次，但不会被逆转。如果在单击处理程序中添加 if/else，则可以轻松切换元素。准备好的文档只会运行一次。

```
$(function () {
    if ($("a#toggle_sidebar").length > 0) {
        $('#toggle_sidebar').click(function () {
            if(!$(this).is(':visible'))
            {
                $('#dw_right').show();
                $('#content-container div#container').css('width', '83%');
            }
            else
            {  
                $('#dw_right').hide();
                $('#content-container div#container').css('width', '100%');
            }
        });
    }
}); 
```

# android - AdMob：膨胀类 com.google.ads.AdView 时出错

> ID：14632282
> 
> 赞同：1
> 
> 时间：2013-01-31T18:06:23.920
> 
> 标签：android, exception, layout, admob, ads

我有一个简单的线性布局，上面有一个广告。当我启动应用程序时，我遇到了这个错误：

```
01-31 19:00:02.337: E/AndroidRuntime(11395): FATAL EXCEPTION: main
01-31 19:00:02.337: E/AndroidRuntime(11395): android.view.InflateException: Binary XML file line #34: Error inflating class com.google.ads.AdView
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.LayoutInflater.createView(LayoutInflater.java:613)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at com.devspark.sidenavigation.SideNavigationView$SideNavigationAdapter.getView(SideNavigationView.java:248)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.widget.AbsListView.obtainView(AbsListView.java:2159)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.widget.ListView.makeAndAddView(ListView.java:1831)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.widget.ListView.fillDown(ListView.java:674)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.widget.ListView.fillGap(ListView.java:638)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.widget.AbsListView.trackMotionScroll(AbsListView.java:4930)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.widget.AbsListView.scrollIfNeeded(AbsListView.java:3087)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.widget.AbsListView.startScrollIfNeeded(AbsListView.java:3032)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.widget.AbsListView.onTouchEvent(AbsListView.java:3357)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.View.dispatchTouchEvent(View.java:7239)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2168)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1903)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1953)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1405)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.app.Activity.dispatchTouchEvent(Activity.java:2410)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1901)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.View.dispatchPointerEvent(View.java:7419)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3220)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3165)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4292)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4271)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4363)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:179)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.InputEventReceiver.nativeConsumeBatchedInputEvents(Native Method)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.InputEventReceiver.consumeBatchedInputEvents(InputEventReceiver.java:171)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.ViewRootImpl.doConsumeBatchedInput(ViewRootImpl.java:4342)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.ViewRootImpl$ConsumeBatchedInputRunnable.run(ViewRootImpl.java:4382)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.Choreographer.doCallbacks(Choreographer.java:562)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.Choreographer.doFrame(Choreographer.java:530)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.os.Handler.handleCallback(Handler.java:725)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at android.os.Looper.loop(Looper.java:137)
01-31 19:00:02.337: E/AndroidRuntime(11395):    at andr 
```

两次都引用了最新的 AdMob 库。jar 位于`libs`文件夹中，我将其添加到 Java 构建路径中。

这是布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    xmlns:app="http://schemas.android.com/apk/res/com.natinusala.pebkac" 
    xmlns:ads="schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:paddingBottom="@dimen/side_navigation_item_padding_topbottom"
    android:paddingLeft="0dp"
    android:paddingRight="@dimen/side_navigation_item_padding_leftright"
    android:paddingTop="@dimen/side_navigation_item_padding_topbottom"
     >

    <com.google.ads.AdView
        android:id="@+id/advert"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:visibility="gone"
        app:backgroundColor="#000000"
        app:keywords="Android game"
        app:textColor="#FFFFFF"
        ads:addSize="BANNER" />

</LinearLayout> 
```

你可以帮帮我吗 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:14:23.367

我认为

而不是 android:visibility="gone"

使用 android:visibility="invisible"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:35:01.223

转到 Eclipse 项目的属性、Java Build Path、Order 和 Export，检查 GoogleAdMobAdsSdk-6.2.1.jar 条目并将其移至列表顶部。

这对我有同样的问题有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-18T07:33:58.747

我认为您应该必须将 admob jar 文件添加到项目库（lib 文件夹）中。只需将其复制并粘贴到项目的 lib 文件夹中即可。这有时有效。

如果上述解决方案不起作用，则右键单击项目，选择选项 Build Path-->Configure Build Path 然后选择添加 jar 选项，选择您的项目，选择项目的 lib 文件夹，选择您想要的 .jar 文件，然后单击 OK 和重新启动 Eclipse 一次。（此过程适用于 Eclipse IDE）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-31T15:39:21.083

我注意到你的代码：

```
xmlns:ads="schemas.android.com/apk/lib/com.google.ads" 
```

在谷歌开发者页面中，示例代码是：

```
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads" 
```

并记住选择 Order and Export(Properties>Java Build Path) 选项卡；然后，检查 Google Mobile Ads JAR 以在编译项目时将其包含在内。

看看有没有帮助

# c - 链表中所有节点的最后一个节点值更新

> ID：14632299
> 
> 赞同：-9
> 
> 时间：2013-01-31T18:07:10.767
> 
> 标签：c, linux, linked-list

```
#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>
#include <dirent.h>
#include <string.h>
#include <stdlib.h>
#include <time.h>
#include <sys/stat.h>

struct node
{
    char *s_xmlfile;
    char *s_file_mod_time;
    struct node *link;
};

struct node* head = NULL;

int table(char *);
struct node *getnode();
void readnode(struct node *, char *, char *);
void add_table(struct node **, char *);
void delete_node(struct node**);
void display(struct node *);
char* modification( char*);
const char *getExt (const char *);
void scan_directory (char *);
char* modified_time(char *);

int main(int argc, char *argv[])
{
    printf("\n");
    scan_directory(argv[1]); //enter the directory full path from command line
    display(head);
    return 0;
}

/***scan directory and get all files**/
void scan_directory (char *dir_location)
{
    DIR *dir_ptr;
    struct dirent *file_ptr;     
    chdir(dir_location);
    dir_ptr = opendir (dir_location);
    int dir_len = strlen(dir_location);
    if (dir_ptr != NULL){
        while (file_ptr = readdir (dir_ptr)){
                if( !strcmp((getExt (file_ptr->d_name)), ".xml") ){
                table(file_ptr->d_name);
            }
        }

        (void) closedir (dir_ptr);
    }
    else
        perror ("Couldn't open the directory");

}

/**load only xml file**/
const char *getExt (const char *fspec) 
{
    char *e = strrchr (fspec, '.');
        if (e == NULL)
            e = "";
    return e;
}

/**creating a table to store xml files and
   last file modified time using linked list**/
int table(char *xml_file)
{
    add_table(&head, xml_file);
    //display(head);
}

void add_table(struct node **headptr, char *xml_file)
{
    char *mod_time;
    struct node *loc_head, *last, *newnode;
    loc_head = *headptr;

    mod_time = modified_time(xml_file);
    printf("TIME : %s FILE : %s\n", mod_time, xml_file);
    newnode = getnode();

    newnode -> s_xmlfile = xml_file;
    newnode -> s_file_mod_time = mod_time; 
    newnode -> link = NULL;

    if(loc_head == NULL){
        printf("Debug: Empty table \n");
        loc_head = newnode;
    }
    else{
        last = loc_head;
        while(last ->link != NULL){
        last = last -> link;}
        last->link = newnode;
    }
    *headptr = loc_head;
}

struct node *getnode()
{
    struct node *newnode;
    newnode = (struct node*)malloc(sizeof(struct node));
    return (newnode);
}

void display(struct node *q)
{
    printf("\nDISPLAY\n");
        if(q==NULL){
        //printf("\nEmpty Table.");
        return;
        }
        while(q!=NULL){
        printf("%s\t", q -> s_xmlfile);
        printf("%s\n", q -> s_file_mod_time);
        q=q->link;
        }
    printf("\n");
}

/**identifying last modified time of file**/
char* modified_time(char *xml_file)
{
    struct stat sb;
    char *temp_time;;
    if(stat(xml_file, &sb) == -1)
            perror("stat");
    temp_time = ctime(&sb.st_mtime);
    return temp_time;
} 
```

实际问题是链表中所有时间字段的最后文件时间更新

说明：该程序将扫描目录中的xml文件，并获取xml文件的最后更新时间，然后进入链表。

实际 o/p :

```
TIME : Mon Jan 28 22:29:42 2013
 FILE : HLM2.xml
Debug: Empty table
TIME : Mon Jan 28 17:41:28 2013
 FILE : HLM1.xml
TIME : Thu Jan 31 22:57:36 2013
 FILE : HLM3.xml

DISPLAY
HLM2.xml    Thu Jan 31 22:57:36 2013

HLM1.xml    Thu Jan 31 22:57:36 2013

HLM3.xml    Thu Jan 31 22:57:36 2013 
```

预期 o/p ：

```
TIME : Mon Jan 28 22:29:42 2013
FILE : HLM2.xml
Debug: Empty table
TIME : Mon Jan 28 17:41:28 2013
 FILE : HLM1.xml
TIME : Thu Jan 31 22:57:36 2013
 FILE : HLM3.xml

DISPLAY
HLM2.xml    Thu Jan 31 22:57:36 2013

HLM1.xml    Mon Jan 28 17:41:28 2013

HLM3.xml    Thu Jan 31 22:57:36 2013 
```

我提供的目录有 3 个 xml 文件，我的链表程序是否有任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:14:16.330

这是经典的“让我们指向一个本地字符数组的指针”问题。

代替：

```
newnode -> s_xmlfile = xml_file; 
```

你需要：

```
newnode -> s_xmlfile = strdup(xml_file); 
```

或者：

```
int len = strlen(xmlfile);
char *name = malloc(len+1);
strcpy(name, xmlfile);
newnode -> s_xmlfile = name; 
```

`newnode->s_xmlfile`最后清理时不要忘记释放你的。

或者只是- 确保 MAX_FILE_NAME_SIZE 足够大`s_xmlfile`。`char s_xmlfgile[MAX_FILE_NAME_SIZE]``strcpy(newnode->s_xmlfile, xmlfile);`

# linux - 将带有文件列表的 shell 脚本转换为 ant build.xml

> ID：14632301
> 
> 赞同：0
> 
> 时间：2013-01-31T18:07:23.933
> 
> 标签：linux, windows, shell, ant

我正在尝试将 linux shell 脚本的功能移植到 Windows ant build.xml。在 linux 脚本中，我被困在这一行，其中 $* 是文件列表 (*.txt)：

```
java -classpath $myClasspath com.myProgram.Main /destinationDirectory $* 
```

所以现在，在 ant 中，我传递了以空格分隔的文件名列表，但是 ant java 任务认为这只是一个文件名，所以它会窒息。有没有办法传入 *.txt 所以我不必在单独的嵌套元素中列出每个文件名？有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:32:58.013

这个问题很有帮助：

*   [将 Ant 文件集转换为多个应用参数](https://stackoverflow.com/questions/2148390/converting-an-ant-fileset-to-multiple-apply-args)

使用它，我能够创建这个 ant java 任务：

```
<path id="myFiles">
  <fileset dir="src" includes="*.txt" />
</path>

<!-- convert fileset into a single property that is a space separated list of the file paths-->
<pathconvert pathsep=" " property="myFilesPathConverted" refid="myFiles" />

<java classname="com.myProgram.Main">
  <classpath refid="classpath"/>
  <arg value="${outputDirectory}" />
  <arg line="${myFilesPathConverted}" />
</java> 
```

# ruby - 使用 ruby 生成字母来表示数字？

> ID：14632304
> 
> 赞同：18
> 
> 时间：2013-01-31T18:07:34.153
> 
> 标签：ruby, math, numerical

我想生成对应于数字的字母序列，即“A”、“DE”、“GJE”等。前 26 个很简单，所以 3 返回“C”，26 返回“Z”，27 返回“AA”，28 返回“AB”，依此类推。

我不太清楚的是如何做到这一点，所以它可以处理传入的任何数字。所以如果我传入 4123，我应该取回 3 个字母的组合，因为 (26 * 26 * 26) 最多允许+17,000 种组合。

有什么建议么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-31T18:50:40.967

```
class Numeric
  Alph = ("a".."z").to_a
  def alph
    s, q = "", self
    (q, r = (q - 1).divmod(26)); s.prepend(Alph[r]) until q.zero?
    s
  end
end

3.alph
# => "c"
26.alph
# => "z"
27.alph
# => "aa"
4123.alph
# => "fbo" 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-01-17T04:30:40.637

对 Ruby 2.0 的 @sawa 原始答案进行了调整，因为我无法让他按原样工作：

```
class Numeric
  Alpha26 = ("a".."z").to_a
  def to_s26
    return "" if self < 1
    s, q = "", self
    loop do
      q, r = (q - 1).divmod(26)
      s.prepend(Alpha26[r]) 
      break if q.zero?
    end
    s
  end
end 
```

在这里它从字符串到整数是相反的：

```
class String
  Alpha26 = ("a".."z").to_a

  def to_i26
    result = 0
    downcased = downcase
    (1..length).each do |i|
      char = downcased[-i]
      result += 26**(i-1) * (Alpha26.index(char) + 1)
    end
    result
  end

end 
```

用法：

```
1234567890.to_s26 
# => "cywoqvj"

"cywoqvj".to_i26  
# => 1234567890

1234567890.to_s26.to_i26
# => 1234567890

"".to_i26
# => 0

0.to_s26
# => "" 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-31T19:44:52.000

字符串确实有一个`succ`方法，因此它们可以在 Range 中使用。“Z”的继任者恰好是“AA”，所以这行得通：

```
h = {}
('A'..'ZZZ').each_with_index{|w, i| h[i+1] = w } 
p h[27] #=> "AA" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-05-18T13:21:49.050

我喜欢这个答案：[https ://stackoverflow.com/a/17785576/514483](https://stackoverflow.com/a/17785576/514483)

```
number.to_s(26).tr("0123456789abcdefghijklmnopq", "ABCDEFGHIJKLMNOPQRSTUVWXYZ") 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-31T19:26:56.577

[使用此处](http://www.mathsisfun.com/base-conversion-method.html)找到的基本转换方法。我还更改了它，因为我们在这个编号系统中缺少“0”。最终案例已得到解决。

```
def baseAZ(num)
  # temp variable for converting base
  temp = num

  # the base 26 (az) number
  az = ''

  while temp > 0

    # get the remainder and convert to a letter
    num26 = temp % 26
    temp /= 26

    # offset for lack of "0"
    temp -= 1 if num26 == 0

    az = (num26).to_s(26).tr('0-9a-p', 'ZA-Y') + az
  end

  return az
end 
```

irb 输入输出：

```
>> baseAZ(1)
=> "A"
>> baseAZ(26^2 + 1)
=> "Y"
>> baseAZ(26*26 + 1)
=> "ZA"
>> baseAZ(26*26*26 + 1)
=> "YZA"
>> baseAZ(26*26*26 + 26*26 + 1)
=> "ZZA" 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-07-01T04:54:56.753

```
def letter_sequence(n)
    n.to_s(26).each_char.map {|i| ('A'..'Z').to_a[i.to_i(26)]}.join
end 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-22T11:29:45.023

### 这是一个基于短期性能递归的解决方案

```
class Numeric
  # 'z' is placed in the begining of the array because 26 % 26 is 0 not 26
  Alph = ['z'] + ("a".."y").to_a

  def to_alph

    # if self is 0 or negative return a blank string.
    # this is also used to end the recursive chain of to_alph calls
    # so don't replace this with raising an error or returning anything else

    return '' if self < 1

    # (otherwise) return two concatenated strings:
    # the right side is the letter for self modules 26
    # the left side is comprised of:
    #  1\. minus one, because this is not a zero-based numbering system.
    #     therefore, round numbers (26, 52...) should return one digit 'z'
    #     instead of two digits 'aa' or 'ba'.
    #  2\. divide by 26 and call to_alph on that.
    #     this repeats recursively for every digit of the final string,
    #     plus once more that will return '' to end the recursion chain.

    return ((self - 1) / 26).to_alph + Alph[self % 26]
  end
end 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-23T10:46:49.923

根据sawa的回答，我想要一种独立工作的方法，尽管是递归的，以达到预期的结果：

```
def num_to_col(num)
  raise("invalid value #{num} for num") unless num > 0
  result, remainder = num.divmod(26)
  if remainder == 0
    result -= 1
    remainder = 26
  end
  final_letter = ('a'..'z').to_a[remainder-1]
  result > 0 ? previous_letters = num_to_col(result) : previous_letters = ''
  "#{previous_letters}#{final_letter}".upcase
end 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-28T19:10:42.643

您可以通过从其序数中减去 96 来获得字母表中字符的数字位置，如下所示：

```
"a".ord - 96
=> 1

"z".ord - 96
=> 26 
```

您还可以通过添加 96 通过其数字位置获取字母字符，如下所示：

```
(1 + 96).chr
=> "a"

(26 + 96).chr
=> "z" 
```

# r - sweave、xtable、longtable 和交替行颜色...`add.to.row` 的问题

> ID：14632307
> 
> 赞同：4
> 
> 时间：2013-01-31T18:07:41.173
> 
> 标签：r, latex, sweave, longtable

[这个现有的问题](https://stackoverflow.com/questions/11777586/customize-xtable)涵盖了一种通过对来自 的输出进行后处理来在乳胶表中交替行颜色的方法`print.xtable()`，但我认为可以通过使用[stats.stackexchange](https://stats.stackexchange.com/a/7953)上描述的`add.to.row`参数来实现相同的目的，从而避免了对 post-处理，这对 Sweave 来说很好。该答案涉及为特定行的背景着色，但我认为它可以扩展到为所有奇数行着色。`print.xtable()`

我遇到的问题与`add.to.row`参数有关，使 list`pos`的长度等于 character vector 的长度`command`。帮助文件`print.xtable()`描述：

> add.to.row：两个组件的列表。第一个组件（应该称为“pos”）是一个列表，其中包含应在末尾添加额外命令的行的位置，第二个组件（应该称为“command”）是相同的字符向量包含应添加到指定行末尾的命令的第一个组件的长度。默认值为'NULL'，即不添加命令。

使用 longtable 环境时，您可以使用此`add.to.row`参数来定义应在每一页上打印的表的“标题”行，如下所示：

```
library(xtable)
my.df=data.frame(a=c(1:10),b=letters[1:10])
print(xtable(my.data.frame,caption="My Table"),
      tabular.environment="longtable",
      floating=FALSE,
      hline.after=c(-1,nrow(my.data.frame)),
      add.to.row=list(pos=list(0),command="\\hline \\endhead ") 
```

我需要保留此功能，并添加每隔一行应获取命令的附加功能`\\rowcolor[gray]{0.8}`

听起来很简单。`pos`应该是这样的`list=(0,1,3,5,7,9)`，`command`应该是这样的`c("\\hline \\endhead ","\\rowcolor[gray]{0.8}","\\rowcolor[gray]{0.8}","\\rowcolor[gray]{0.8}","\\rowcolor[gray]{0.8}","\\rowcolor[gray]{0.8}")`

当然，我想利用一些内置函数来构建奇数行序列和重复`"\\rowcolor[gray]{0.8}"`，所以我想到了：

```
pos=list(0,seq(from=1,to=nrow(my.df),by=2)) 
```

和

```
command=c("\\hline \\endhead ",
          rep("\\rowcolor[gray]{0.8}",length(seq(from=1,to=nrow(my.df),by=2)))) 
```

我的问题是`pos`上面的列表评估为：

```
> pos
[[1]]
[1] 0

[[2]]
[1] 1 3 5 7 9 
```

它的长度为 2 ...在这种情况下它需要长度为 6。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T18:07:41.173

诀窍是使列表变平。可能有一种更漂亮的方法，下面的方法可以解决问题。

```
pos=list(as.list(c(0,seq(from=1,to=nrow(my.df),by=2))))[[1]] 
```

整个包是：

```
library(xtable)
my.df=data.frame(a=c(1:10),b=letters[1:10])

print(xtable(my.df,caption="My Table"),
      tabular.environment="longtable",
      floating=FALSE,
      hline.after=c(-1,nrow(my.df)),
      add.to.row=list(
      pos=list(as.list(c(0,seq(from=1,to=nrow(my.df),by=2))))[[1]],
      command=c("\\hline \\endhead ",
      rep("\\rowcolor[gray]{0.8}",length(seq(from=1,to=nrow(my.df),by=2)))))
      ) 
```

产生

```
% latex table generated in R 2.14.2 by xtable 1.7-0 package
% Thu Jan 31 12:52:55 2013
\begin{longtable}{rrl}
  \hline
 & a & b \\ 
  \hline \endhead 1 &   1 & a \\ 
   \rowcolor[gray]{0.8}2 &   2 & b \\ 
  3 &   3 & c \\ 
   \rowcolor[gray]{0.8}4 &   4 & d \\ 
  5 &   5 & e \\ 
   \rowcolor[gray]{0.8}6 &   6 & f \\ 
  7 &   7 & g \\ 
   \rowcolor[gray]{0.8}8 &   8 & h \\ 
  9 &   9 & i \\ 
   \rowcolor[gray]{0.8}10 &  10 & j \\ 
   \hline
\hline
\caption{My Table}
\end{longtable} 
```

乳胶的格式有点难看，因为`\rowcolor`应该在行*之前*，即使我们指定了 1、3、5、9，我们也会在输出的 2、4、6、8 上着色。

# permissions - 修复 BZR 的权限

> ID：14632312
> 
> 赞同：0
> 
> 时间：2013-01-31T18:08:01.783
> 
> 标签：permissions, bazaar, chmod

最近服务器上有大量 chown-ing root:root，所以现在我正在尝试修复 BZR 权限。

将代码提交到主分支时出现下一个错误：

```
Run command: bzr commit -m "[new commit msg]"
Committing to: sftp://goce@[IP:PORT]/usr/local/www/data/bzr/pr1/goce/ 
```

* * *

```
bzr: ERROR (ignored): 'sftp://goce@[IP:PORT]/usr/local/www/data/bzr/.bzr/repository/upload/e9sb7n5enoi59nixasq6.pack'

bzr: ERROR: Permission denied: "/usr/local/www/data/bzr/.bzr/repository/upload/e9sb7n5enoi59nixasq6.pack": [Errno 13] Permission denied 
```

* * *

查看报告的文件显示：

```
$ pwd
/usr/local/www/data/bzr/.bzr/repository/upload
$ ls -al
total 1212
drwxrwxr-x 2 root bzr    4096 Jan 30 14:02 .
-rw-r--r-- 1 goce bzr  204814 Jan 30 12:45 e9sb7n5enoi59nixasq6.pack
…
-rw-rw-r-- 1 root root     42 May  2  2011 umxv2mvk79n72bkjjae9.pack
... 
```

* * *

这个错误的主要原因是什么？

难道是e9sb7n5enoi59nixasq6.pack应该有g-rw权限，而BZR不能创建g-rw文件？（猜测是因为那里g-rw文件很少，如示例所示）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:06:02.410

一方面，用户`goce`对父目录没有写权限这一事实`/usr/local/www/data/bzr/.bzr/repository/upload`可能会导致一些问题。例如，这将防止从目录中删除文件。

我认为你应该做一个`chown -R goce /usr/local/www/data/bzr`清理权限问题。

最干净的解决方案是用干净的新副本替换分支：

```
cd /usr/local/www/data
mv bzr bzr-bak
bzr branch --no-tree bzr-bak bzr 
```

结果，`/usr/local/www/data/bzr`将是旧版本的闪亮新干净副本，其中所有文件都具有正确的权限。

# iphone - 模拟位置 Xcode 4.5

> ID：14632322
> 
> 赞同：0
> 
> 时间：2013-01-31T18:08:33.910
> 
> 标签：iphone, xcode4.5

我正在尝试使用 Xcode 4.5 和 Iphone Simulator 6.0 模拟位置

我使用以下代码获取 localeIdentifier

```
NSString *locale = [[NSLocale currentLocale] localeIdentifier]; 
```

我在我的 Iphone 上尝试该应用程序，我的语言环境是 IT（我在罗马）......当我在 Iphone 模拟器上使用“不模拟位置”时，我的语言环境是美国......但我收到了其他模拟位置总是美国它不起作用...知道吗？！...是否有一些设置可以设置为使用模拟位置？！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:24:43.567

据我所知 NSLocale 不是指位置，而是指语言设置等。请参阅：[here](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSLocale_Class/Reference/Reference.html#//apple_ref/occ/clm/NSLocale/currentLocale)

如果您想检索位置，请查看以下问题： [How can I get current location from user in iOS](https://stackoverflow.com/questions/4152003/how-can-i-get-current-location-from-user-in-ios)

# python - urlparse 在每个 url 上都完全失败

> ID：14632333
> 
> 赞同：2
> 
> 时间：2013-01-31T18:09:05.667
> 
> 标签：python

以下代码不返回单个非空 urlparse.netloc 或 urlparse.scheme。scheme 和 netloc 被附加到 path 组件中。请问我做错了什么？

```
#! /usr/bin/python
# -*- coding: UTF-8 -*-

from urllib import urlopen  
from urlparse import urlparse, urljoin 
import re   
link_exp = re.compile("href=(.+?)(?:'|\")", re.UNICODE)  

flux = urlopen("http://www.w3.org") 
links = [urlparse(x) for x in link_exp.findall(flux.read())]
for x in links : 
    print x 
```

这会提取每个（？也许我的正则表达式是错误的）url，并打印它，除了“http://”总是在路径中，而不是在方案中。怎么会？当我完成解决这个问题时，我可能应该重新实现 urlparse 功能，因为这是一个课程练习，而不是真实世界的场景。很抱歉没有更清楚地说明这一点！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:16:02.747

你的正则表达式是错误的：

```
x = "<a href='http://www.bbcnews.com'>foo</a>"
link_exp.findall(x)
# ["'http://www.bbcnews.com"] 
```

请注意，您包括开场白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:19:43.537

用这个：

```
link_exp = re.compile(r"href=\"(.+?)(?:'|\")", re.UNICODE) 
```

输出：

```
...
ParseResult(scheme='http', netloc='ev.buaa.edu.cn', path='/', params='', query='', fragment='')
... 
```

# extjs - 禁用网格 extjs 上的默认排序

> ID：14632335
> 
> 赞同：1
> 
> 时间：2013-01-31T18:09:08.670
> 
> 标签：extjs

我希望能够自己处理排序事件并将数据重新加载到网格，但是，我不希望 extjs srcipts 在我这样做之后重新排序我的表，因为我已经在 mysql 上这样做了。

如何禁用默认排序并保持 sortchange 事件触发？

不幸的是，将列设置为不可排序并没有帮助

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T19:17:42.533

排序由商店控制，您的网格只是将排序请求推迟到商店的排序方法。我没有机会对此进行测试，但理论上如果您将其包含`sortOnLoad: false`在您的商店配置中，加载后将不会使用它。

如文档中所述[。](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-cfg-sortOnLoad)

# javascript - AJAX 调用后 JQuery 工具提示不起作用

> ID：14632336
> 
> 赞同：1
> 
> 时间：2013-01-31T18:09:16.097
> 
> 标签：javascript, ajax, jquery

我遇到了类似的问题：[JavaScript not working inside AJAX loaded DIV](https://stackoverflow.com/questions/4476064/javascript-not-working-inside-ajax-loaded-div)但我的问题是我没有任何要绑定的事件。我有这个：

```
$('[title]').colorTip({color:'yellow'}); 
```

将所有具有 'title' 属性的元素绑定到该对象。它在页面重新加载时工作正常。但在来自 AJAX 调用的元素上，故事有所不同，它显示为 javascript 不存在。我知道使用 AJAX 将元素绑定到其他事件`live()`，但是如何绑定没有“事件”的元素？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T18:10:46.057

您必须在 ajax 调用后重新绑定工具提示。

```
$( document ).ajaxStop( function() {
    $('[title]').colorTip({color:'yellow'});
}); 
```

或者按照 jbabey 的建议，您可以使用完整的回调来重新绑定工具提示（[此处](http://www.bennadel.com/resources/presentations/jquery/demo21/index.htm)的简化版本）：

```
$(
function(){
    // Get a reference to the content div (into which we will load content).
    var jContent = $( "#content" );             
    // Hook up link click events to load content.
    $( "a" ).click(
        function( objEvent ){
            var jLink = $( this );
            // Clear status list.
            $( "#ajax-status" ).empty();
            // Launch AJAX request.
            $.ajax(
                {
                    // The link we are accessing.
                    url: jLink.attr( "href" ),
                    // The type of request.
                    type: "get",
                    // The type of data that is getting returned.
                    dataType: "html",
                    complete: function(){
                        console.log("finalized ajax request");
                        //re-bind the tooltip
                        $('[title]').colorTip({color:'yellow'});
                    },
                    success: function( strData ){
                        console.log("ajax success");
                        console.log(strData);
                        // to something with the received data
                        jContent.html( strData );
                    }
                }                           
                );
            // Prevent default click.
            return( false );                    
        }
        );

}
); 
```

根据您的评论，我包括以下内容：您还必须确保在页面加载时绑定工具提示：

```
$( document ).ready( function() {
    $('[title]').colorTip({color:'yellow'});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:12:41.253

您可以在元素上创建更改事件。

```
$('title').live('change', function () {
whatever you want to do here
}) 
```

然后，只要您希望属性生效，您就可以触发更改。

```
$('title').trigger('change'); 
```

# google-chrome - 为什么 Chrome 不允许我保存样式修订？

> ID：14632339
> 
> 赞同：0
> 
> 时间：2013-01-31T18:09:41.373
> 
> 标签：google-chrome, developer-tools

我最近发现了能够将样式修订保存回源文件的 Chrome 开发人员工具功能。唯一的问题是，我的似乎不起作用。这令人沮丧。有什么我做错了吗？

我使用放大镜检查一个对象，在右侧的“元素”样式面板中更改其样式，单击拉出“源”选项卡的样式表的名称（我在 Windows 上。我认为它拉在 Mac 上打开“资源”，除非我正在观看的视频可能只是旧的并且这就是它过去所做的），在这个选项卡中我查看样式表并确认它已被更改。我右键单击左侧面板中的样式表，它显示样式表在我的计算机上的位置并查看修订，我确认有修订，然后我再次右键单击并转到“另存为”并保存旧样式表。我刷新页面。它可以回到编辑样式之前的方式 -.- 每次都会发生。

我已尝试更新我的 Chrome 并重新启动计算机。还有其他想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:36:32.547

同样的事情发生在我身上（我使用的是 Windows 8、x64）。此外，在另一个 IDE 中打开我正在处理的 .css 文件仍然会导致它询问我是否要“重新加载文件？（检测到更改）”。但是，这样做之后，变化仍然不存在。

我想我应该尝试关闭所有 Chrome 窗口，然后将兼容模式设置为“Windows 7”。这行得通！

在研究如何让[**Tin.cr 扩展**](https://bitbucket.org/ryanackley/tincr)工作时，我实际上想到了这个修复，有人建议用同样的方法修复 Tin.cr。不能 100% 确定这是同一个根本问题，但显然，[**这是由 Chrome 在 Windows 8 上禁用 NPAPI 插件引起的**](https://groups.google.com/d/msg/tincr-for-chrome-devtools/q_cXN5l6kkU/ru_Jl3GWMl4J)。

无论如何，我希望这对您有用，前提是您使用的是 Windows 8！

# c++ - Poco::Net 服务器和客户端 TCP 连接事件处理程序

> ID：14632341
> 
> 赞同：12
> 
> 时间：2013-01-31T18:09:53.077
> 
> 标签：c++, networking, network-programming, poco-libraries

我正在开始一个新项目，同时刚刚发现 Poco Library，我觉得这绝对是惊人的。但是我有点迷茫，因为例子不多。

如示例所示，我有一个 ServerApplication->TCPServer->ServerSocket + TCPServerConnectionFactory->TCPServerconnection 方法。我按照指示从 PocoNet 类继承。现在我可以将我的服务器作为服务运行，并接收传入的连接。

我想对以下内容采取事件处理方法：在每个连接（或每个客户端）的基础上，处理诸如可在客户端套接字上读取的数据、客户端套接字上发生错误（断开连接或超时）、发送客户端套接字上的数据没有错误。

我该怎么做呢？Poco/Foundation/Events 是我正在寻找的，还是在 Poco::Net 中实现了一些机制？

我见过 Poco::Net::NetExpections 但当 netcat 连接关闭时，它们似乎没有被抛出到我的 TCPServerConnection 派生类中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-04T20:53:18.400

我最终使用的是一种不同的方法，因为 TCPServer 完全是一种不同的野兽。按照[此处](https://github.com/pocoproject/poco/blob/develop/Net/samples/EchoServer/src/EchoServer.cpp)发布的示例，我最终得到了一个继承自*ServerApplication的类，以及一个本质上成为**SocketReactor*的连接*处理程序*的类。

 *除雾器标头：

```
class Daemon : public ServerApplication
{
  public:
    Daemon();
    /// @Brief The main loop of the daemon, everything must take place here
    int main();
}; 
```

除雾器实现：

```
int Daemon::main()
{
  // Server Socket
  ServerSocket svs(2222);
  // Reactor-Notifier
  SocketReactor reactor;
  Poco::Timespan timeout(2000000); // 2Sec
  reactor.setTimeout(timeout);
  // Server-Acceptor
  SocketAcceptor<ConnectionHandler> acceptor(svs, reactor);
  // Threaded Reactor
  Thread thread;
  thread.start(reactor);
  // Wait for CTRL+C
  waitForTerminationRequest();
  // Stop Reactor
  reactor.stop();
  thread.join();
  return Application::EXIT_OK;  
} 
```

处理程序类可以是任何东西，只要它具有符合要求的构造函数（参见 Poco::Net 文档）。在我的情况下，标题如下所示：

```
class ConnectionHandler
{
  public:

    /**
     * @Brief Constructor of the Connection Handler
     * @Note Each object is unique to an accepted connection
     * @Param SteamSocket is the socket accepting the connections
     * @See SocketAcceptor http://pocoproject.org/docs/Poco.Net.SocketAcceptor.html
     * @Param SocketReactor is the reacting engine (threaded) which creates notifications about the socket
     */
    ConnectionHandler(StreamSocket &, SocketReactor &);

    /**
     * @Brief Destructor
     */
    ~ConnectionHandler();

    /**
    * @Brief Event Handler when Socket becomes Readable, i.e: there is data waiting to be read
    */
    void onSocketReadable(const AutoPtr<ReadableNotification>& pNf);

    /**
    * @Brief Event Handler when Socket was written, i.e: confirmation of data sent away (not received by client)
    */
    void onSocketWritable(const AutoPtr<WritableNotification>& pNf);

    /**
    * @Brief Event Handler when Socket was shutdown on the remote/peer side
    */
    void onSocketShutdown(const AutoPtr<ShutdownNotification>& pNf);

    /**
    * @Brief Event Handler when Socket throws an error
    */
    void onSocketError(const AutoPtr<ErrorNotification>& pNf);

    /**
    * @Brief Event Handler when Socket times-out
    */
    void onSocketTimeout(const AutoPtr<TimeoutNotification>& pNf);

  private:

    /**
     * @Brief Read bytes from the socket, depending on available bytes on socket
     */
    void readBytes();

    /**
     * @Brief Send message to the socket
     * @Param std::string is the message (null terminated)
     */
    void sendMessage(std::string);

    /// Stream Socket
    StreamSocket _socket;

    /// Socket Reactor-Notifier
    SocketReactor& _reactor;

    /// Received Data Buffer
    std::vector<char *> in_buffer;
}; 
```

您如何实现处理程序取决于您，前提是您唯一需要做的就是注册处理事件的类方法，如下所示：

```
 _reactor.addEventHandler(_socket,NObserver<ConnectionHandler, ReadableNotification>(*this, &ConnectionHandler::onSocketReadable));
  _reactor.addEventHandler(_socket,NObserver<ConnectionHandler, ShutdownNotification>(*this, &ConnectionHandler::onSocketShutdown));
  _reactor.addEventHandler(_socket,NObserver<ConnectionHandler, ErrorNotification>(*this, &ConnectionHandler::onSocketError));
  _reactor.addEventHandler(_socket,NObserver<ConnectionHandler, TimeoutNotification>(*this, &ConnectionHandler::onSocketTimeout)); 
```

总而言之，两个类，几行代码，简单干净。绝对开始爱上 Poco 图书馆了！:)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-01T12:47:38.453

试试这个：

```
#include <iostream>
#include "Poco/Net/TCPServer.h"
#include "Poco/Net/TCPServerParams.h"
#include "Poco/Net/TCPServerConnectionFactory.h"
#include "Poco/Net/TCPServerConnection.h"
#include "Poco/Net/Socket.h"
using namespace std;

class newConnection: public Poco::Net::TCPServerConnection {
public:
    newConnection(const Poco::Net::StreamSocket& s) :
        Poco::Net::TCPServerConnection(s) {
    }

    void run() {
        cout << "New connection from: " << socket().peerAddress().host().toString() <<  endl << flush;
        bool isOpen = true;
        Poco::Timespan timeOut(10,0);
        unsigned char incommingBuffer[1000];
        while(isOpen){
            if (socket().poll(timeOut,Poco::Net::Socket::SELECT_READ) == false){
                cout << "TIMEOUT!" << endl << flush;
            }
            else{
                cout << "RX EVENT!!! ---> "   << flush;
                int nBytes = -1;

                try {
                    nBytes = socket().receiveBytes(incommingBuffer, sizeof(incommingBuffer));
                }
                catch (Poco::Exception& exc) {
                    //Handle your network errors.
                    cerr << "Network error: " << exc.displayText() << endl;
                    isOpen = false;
                }

                if (nBytes==0){
                    cout << "Client closes connection!" << endl << flush;
                    isOpen = false;
                }
                else{
                    cout << "Receiving nBytes: " << nBytes << endl << flush;
                }
            }
        }
        cout << "Connection finished!" << endl << flush;
    }
};

int main(int argc, char** argv) {

    //Create a server socket to listen.
    Poco::Net::ServerSocket svs(1234);

    //Configure some server params.
    Poco::Net::TCPServerParams* pParams = new Poco::Net::TCPServerParams();
    pParams->setMaxThreads(4);
    pParams->setMaxQueued(4);
    pParams->setThreadIdleTime(100);

    //Create your server
    Poco::Net::TCPServer myServer(new Poco::Net::TCPServerConnectionFactoryImpl<newConnection>(), svs, pParams);
    myServer.start();

    while(1);

    return 0;
} 
```*

# c - 在 LINUX 上打开 C 中的 O_NONBLOCKING

> ID：14632346
> 
> 赞同：3
> 
> 时间：2013-01-31T18:10:18.083
> 
> 标签：c, linux, sockets, tcp

***背景**** 我是 TCP 新手，所以我的问题可能有点基本。我正在尝试在接收数据的套接字上打开 O_NONBLOCK。到目前为止，我已经尝试了不同的方法来设置 O_NONBLOCK、itcl() 和 fcntl()。现在我正试图让 fcntl() 工作。

我的问题：你应该在连接套接字之前还是之后设置 O_NONBLOCK ？

**我当前的 fcntl() 实现基于代码之前的链接：

[如何将套接字重置为阻塞模式（在我将其设置为非阻塞模式之后）？](https://stackoverflow.com/questions/2149798/how-to-reset-a-socket-back-to-blocking-mode-after-i-set-it-to-nonblocking-mode)

```
//set socket to NONBlocking
on = fcntl(Socket,F_GETFL);
on = (on | O_NONBLOCK);
if(fcntl(Socket,F_SETFL,on) < 0)
    {
       perror("turning NONBLOCKING on failed\n");
    }

// DO CONNECT
rc = connect() 
```

感谢您花时间看这个

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T18:17:47.187

您应该随时设置`O_NONBLOCK`。如果你在之前这样做`connect`，那么`connect`也将是非阻塞的（返回`EINPROGRESS`；你可以`select`或`poll`可写状态等待其完成）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T22:05:09.503

要回答第二部分，请使用相同的代码，但将 O_NONBLOCK 位关闭而不是打开。

# java - 如何在 Java 中进行反向 dns 查找

> ID：14632352
> 
> 赞同：4
> 
> 时间：2013-01-31T18:10:45.390
> 
> 标签：java, network-programming

我有一个 IP 列表。我需要做reveres DNS，即我想要网站名称。

我尝试了以下方法：

```
InetAddress addr = InetAddress.getByName("98.138.253.109");
String host = addr.getCanonicalHostName();
System.out.println(host); 
```

但是，我的示例中的 IP 是 yahoo.com，当我运行代码时，我得到：ir1.fp.vip.ne1.yahoo.com

我需要一种方法，这样我就可以通过输入 IP 来获取域名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T18:23:13.300

您提供的代码中的 IP 地址解析为 yahoo，因为它由 yahoo 持有。

您使用的 IP 地址仅指定给一台主机。你可以想象雅虎可能有成千上万的服务器。他们被分配了一个 ipaddresses 分配，然后在他们认为适合内部分配的情况下重用这些 ipaddresses。yahoo 域下的不同服务器具有不同的名称，因此当您从特定服务器引用 IP 地址时，您将获得该特定服务器的名称。对于可能隐藏的 yahoo.com 的一般 IP 地址，除非您想要进行 nslookup 并查询整个 IP 地址范围以查找 yahoo.com 分配并从那里进行概括。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T18:28:00.867

使用 IP 地址获取域名（以您期望的方式）可能是不可能的。雅虎将有多个服务器，它们都将映射到域名 yahoo.com。但他们会有单独的 IP 地址和主机名。addr.getCanonicalHostName() 返回主机名而不是域名！

# operating-system - 被称为 8051 的 RTOS 的基本要求

> ID：14632355
> 
> 赞同：2
> 
> 时间：2013-01-31T18:10:51.403
> 
> 标签：operating-system, embedded, microcontroller, rtos, 8051

我想为 8051 制作一个 RTOS，并且非常困惑在 8051 中制作一个操作系统应该遵循什么最低要求，因为在 RAM 和 ROM 的情况下 8051 的资源非常有限。这只是分配类型的问题，但我真的很困惑，因为我们为 8051 制作软件，它们不是操作系统吗？哪些功能将微控制器的正常常规编码与 RTOS 区分开来？请帮忙谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T23:44:18.603

典型的 RTOS 至少提供以下功能：

*   确定性任务调度
*   任务同步机制
*   进程间通信机制
*   定时器服务

RTOS 调度程序通常基于优先级和抢占式 - 准备运行的最高优先级任务将运行，而不管低优先级任务的状态如何。

[Jack Ganssle 在 TechOnline 上](http://www.techonline.com/education-training/fundamentals/4213896/Fundamentals-of--Real-Time-Operating-Systems)有一个关于 RTOS 基础的演讲，可能对您有用。它由 Micrium 赞助并使用 uC/OS-II 作为案例研究，但它普遍适用于大部分。

特别是 8051 能够特别高效地切换任务上下文，因为它具有多个寄存器组，可通过单个指令进行切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:23:23.850

RTOS的[功能](http://en.wikipedia.org/wiki/Real-time_operating_system)很大程度上取决于它以确定性和及时的方式执行特定工作负载的能力。这些通常包括线程、同步操作和具有专门算法的调度程序，该算法旨在以确定的方式执行线程。

在 8051 中实现这一点将是一项艰巨的任务（由于处理器的硬件架构，甚至可能是不可能的）。此类 uC 上更常见的方法是使用[循环执行](http://en.wikipedia.org/wiki/Cyclic_executive)程序和中断处理程序的优先级嵌套来强制执行优先级。您可以将这种方法视为某种 RTOS。

# python - 如何告诉 subprocess 停止转义我的引号？

> ID：14632356
> 
> 赞同：5
> 
> 时间：2013-01-31T18:10:51.793
> 
> 标签：python, vim, subprocess

我正在尝试使用子进程调用 Vim，并传递一个参数。例如：

```
subprocess.call(['gvim.exe', ''' "+map <F5> :echo 'Hello!'<cr>" ''']) 
```

此命令适用于命令行：

```
> gvim.exe "+map <F5> :echo 'Hello!'<cr>" 
```

然后我打了`F5`它，它告诉我你好。

子进程调用不起作用。当我在任务管理器中查看进程时，我看到我的字符串现在是：

```
"\" +map <F5> :echo 'Hello!'<cr>\"" 
```

完全不是我所期望的，我也不认为这是 Vim 所期望的。*看起来*subprocess以某种方式逃避了我的报价，但我不知道为什么。

有什么办法可以让它像我期望的那样工作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T18:12:30.643

引号不是必需的，因为`subprocess.call`将参数直接传递给进程而不使用外壳（除非您设置`shell=True`）。

所以，`subprocess.call(['gvim.exe', "+map <F5> :echo 'Hello!'<cr>"])`就够了。

# mysql - SQL - 直到特定结果的列计数

> ID：14632361
> 
> 赞同：2
> 
> 时间：2013-01-31T18:11:10.977
> 
> 标签：mysql, sql, count

我有一个表格，其中包含有关联系人呼叫尝试的信息。相关字段如下：

```
Contact     Date        Result
John Smith  1/8/2013    VM
John Smith  1/9/2013    VM
John Smith  1/10/2013   Busy Signal
John Smith  1/11/2013   Hang Up                   <--- Connect
Jane Smith  1/8/2013    VM
Jane Smith  1/9/2013    Scheduled Call Back       <--- Connect
Jane Smith  1/10/2013   VM
John Doe    1/8/2013    Not Interested            <--- Connect
Jane Doe    1/8/2013    Busy Signal
Jane Doe    1/9/2013    Busy Signal
Jane Doe    1/10/2013   Busy Signal 
```

我正在尝试计算通过联系连接之前的尝试次数（而不是第一次连接后的任何尝试），或者如果没有建立连接，那么到目前为止的尝试次数，我遇到了麻烦。在这种情况下，表示连接的结果将是挂断、预定回叫和不感兴趣。

我想要得到的看起来像：

```
Contact       Attempts
John Smith    4
Jane Smith    2
John Doe      1
Jane Doe      3 
```

有没有办法做到这一点？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:13:57.723

您需要考虑使用`GROUP BY`：

```
SELECT Contact, COUNT(*) Attempts
FROM Contacts 
WHERE Result NOT IN ('Hang Up','Scheduled Call Back','Not Interested')
GROUP BY Contact 
```

- 编辑

没有意识到OP的要求。在他接受另一个答案之前无法完成这个......

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:52:39.213

对于 MySQL：

```
SELECT 
    t.Contact, COUNT(*) AS Attempts
FROM 
    tableX AS t
  JOIN 
          ( SELECT DISTINCT contact
            FROM tableX
          ) AS d
      LEFT JOIN
          ( SELECT contact, 
                   MIN(date) AS date 
            FROM tableX
            WHERE result IN ('Hang Up', 'Scheduled Call Back', 'Not Interested')
            GROUP BY contact
          ) AS g
        ON d.contact = g.contact
    ON  t.contact = d.contact
    AND t.date <= COALESCE(g.date, '9999-12-31')
GROUP BY
    t.contact ; 
```

# tsql - 如何在 Insert 语句中定义 T-SQL 变量

> ID：14632371
> 
> 赞同：1
> 
> 时间：2013-01-31T18:11:56.450
> 
> 标签：tsql

我有这个示例插入语句，用于将匹配的行从 Table2 复制到 Table1：

```
INSERT INTO Table1 SELECT * FROM Table2 WHERE ID='555' 
```

当此语句起作用时，两个表都具有相同的三列，FirstName、LastName 和 EmailAddr1。

我已经在 Table1 中添加了一个列 EmailAddr2，它没有出现在 Table2 中，并且我想确保我修改后的插入语句能够按预期工作。

这会实现我的目标吗？

```
SELECT @EmailAddr2 = 'bill@mail.gov'
INSERT INTO Table1 SELECT FirstName, LastName, EmailAddr1, @EmailAddr2 
  FROM Table2 WHERE ID='555' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T18:14:31.403

你应该做：

```
declare @emailAddr2 varchar(50)
set @emailAddr2 = 'Bill@mail.gov'

Insert into Table1 ( firstname, lastname, emailaddr1, emailaddr2 ) 
select firstname, lastname, emailaddr1, @emailAddr2
from table2 where id = '555' 
```

# objective-c - 断言消息被发送到自己的 OCUnit

> ID：14632372
> 
> 赞同：0
> 
> 时间：2013-01-31T18:11:58.657
> 
> 标签：objective-c, tdd, ocunit, ocmock

我对 OCUnit 相当陌生，我正在尝试将测试用例添加到如下所示的方法中：

```
- (void) processMessageBody:(XMPPMessage *)message
                   fromNick:(NSString *)nick;
{
    BOOL isEcho;

    SBEventMessage *eventMessage = [self parseMessageBody:message
                                                 fromNick:nick
                                                   isEcho:&isEcho];    
    if (isEcho)
    {
        NSString *requestID = [[message attributeForName:kSBMessageIDField] stringValue];

        [self processResponse:eventMessage
                        error:nil
                   forRequest:requestID];
    }
} 
```

我已经成功地为该方法编写了测试用例`parseMessageBody:fromNick:isEcho:`，因此我确信该方法可以正常工作。但是我想测试`processResponse:error:forRequest:`在正确的场景中调用它。我正在考虑可能定义一个全局变量并调整该方法，以便它像他们[在这里](http://iosunittesting.com/how-to-test-calls-to-super/#respond)建议的那样写，但我认为这可能太不优雅了。没有办法使用 OCMock 做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T00:44:22.850

使用 OCMock，您可以使用部分模拟来做到这一点：

```
-(void)testProcessMessageBodyCallsProcessResponse {
    // let's pretend this initializer exists
    XMPPMessage *bar = [XMPPMessage messageWithRequestId:@"baz"]; 

    Foo *processor = [[Foo alloc] init];
    id mockProcessor = [OCMockObject partialMockForObject:processor];
    [[mockProcessor expect] processResponse:OCMOCK_ANY error:nil forRequest:@"baz"];

    [processor processMessageBody:bar fromNick:@"nick"];

    [mockProcessor verify];
} 
```

您还可以模拟对 的调用`parseMessageBody:fromNick:isEcho:`，在这种情况下，您可以验证是否将正确`responseBody`的传递给`processMessageBody:fromNick:`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T02:22:19.560

子类和覆盖方法。在您的测试文件中直接定义以下内容。假设您的班级名称是 Foo。

```
@interface TestFoo : Foo
@property (assign, nonatomic) NSUInteger processResponseCount;
@property (strong, nonatomic) SBEventMessage *processResponseEventMessage;
@property (strong, nonatomic) id processResponseError;
@property (copy, nonatomic) NSString *processResponseRequestID;
@end

@implementation TestFoo

- (void)processResponse:(id)eventMessage error:(id)error forRequest:(id)requestID
{
    ++_processResponseCount;
    _processResponseEventMessage = eventMessage;
    _processResponseError = error;
    _processResponseRequestID = requestID;
}

@end 
```

现在在您的测试中，创建一个 TestFoo 而不是 Foo。然后，您可以为

*   这个方法被调用了多少次
*   上次调用时的参数

…也就是说，考虑是否应该提取另一个类，并将这个方法移到它上面。然后，您可以改用像 OCMock（或 OCMockito）这样的模拟框架。

# playframework - 带有游戏框架的 cassandra

> ID：14632373
> 
> 赞同：2
> 
> 时间：2013-01-31T18:11:59.350
> 
> 标签：playframework, playframework-2.0, cassandra

我正在尝试开发一个由两部分组成的应用程序：Web 服务和 android 应用程序。我打算用 java play 框架和 cassandra noSQL 数据库来实现我的 web 服务。

我一直在寻找它2天，我仍然不知道我该怎么做。我需要集成一个java客户端（hector）作为应用程序层（Play2.0）和数据库层之间的桥梁，但我不清楚如何去做。

现在，我无法从 play 连接 cassandra；我无法进行我的应用程序需要的查询，我不知道我是否可以像以前的版本一样使用 play2.x（没有 scala 语言，只有 java 和 groovy 模板）。

好吧，我正在尝试开发一种可以轻松横向扩展的 Web 服务。因为会有很多请求，可能大部分同时来自手机。这就是为什么我选择与 cassandra 一起玩的原因（上学期我在拼贴中获得了足够的关于玩关系数据库的知识）。我的网络服务将根据客户端的位置信息向客户端返回一些数据。这就是为什么从数据库中搜索时间必须尽可能短的原因。实际上我已经为 cassandra 设计了我的数据库模型，因为我已经定义了我的应用程序需要什么样的查询，并且我获得了有关 cassandra 数据模型的足够信息。我认为我为我的应用程序选择的工具是正确的并且可以维护它。很快，我就不能像在游戏中使用 MySQL 一样使用 cassandra 了:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:34:07.357

没有什么能阻止您将 Cassandra 与 Play 一起使用，就像您可以将它与 Jetty 或 Tomcat 或任何其他前端一起使用一样。Play 有一些工具可用于抽象流行关系数据库的使用，但这些工具不是 Play 的核心，因此您不必使用它们。您将需要创建您的 DAL 以使用您选择的库（Hector、Astyanax 等）与 Cassandra 对话，然后像在任何其他应用程序中一样使用该 DAL。也许您正在尝试做一些不同的事情？如果是这样，请非常具体地说明您需要了解的内容。

此外，Play2 与第一个版本完全不同，因此您在旧版 Play 中所做的任何事情都需要重新审视。它仍然支持 Java，所以这不是问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T16:22:58.483

此外，Cassandra 的 PlayOrm 有一个 1.2 和 2.0 的 playframework 插件，并在 playframework 重新加载时自动重新加载，因此注释在开发中立即生效。最后，它还具有内存中的 nosql db 实现，因此您可以在没有 cassandra 的情况下启动 playframework 并有效地工作并在 QA 和生产中连接到 cassandra。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T18:34:35.437

看看它是否有帮助，一个托管在 github 上的示例应用程序： [https ://github.com/firekat/play-kundera](https://github.com/firekat/play-kundera)

-维维克

# ant - 存储过滤属性的 Ant 写入属性文件

> ID：14632377
> 
> 赞同：1
> 
> 时间：2013-01-31T18:12:25.303
> 
> 标签：ant, properties

我面临一个非常简单的 ANT 脚本问题。我有一个脚本，可以加载和设置从文件系统中的多个属性文件加载的许多属性。此属性用于预配置新项目。

问题是：我可以编写一个新的属性文件来保存所有以给定前缀开头的属性（例如“ref.proj.*”）吗？

属性的数量和名称是可变的，所以我不能使用

```
 <propertyfile file="my.properties">
      <entry  key="ref.proj.first" value="${ref.first}"/>
       ...
      <entry  key="ref.proj.n" value="${ref.n}"/>
    </propertyfile> 
```

可以将过滤器应用于属性文件任务吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T21:00:36.577

我花了太长时间来解决所有的问题。对不起...

你应该看看[`<echoproperties>`](http://ant.apache.org/manual/Tasks/echoproperties.html)任务。*这将允许您选择各种属性并以property* = *value*格式打印出来。

您可以将其用作属性文件本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:26:44.157

以下示例使用[groovy ANT 任务](http://groovy.codehaus.org/The+groovy+Ant+Task)：

```
 <path id="build.path">
        <pathelement location="lib/groovy-all-2.1.0.jar"/>
    </path>

    <target name="create-properties">
        <taskdef name="groovy" classname="org.codehaus.groovy.ant.Groovy" classpathref="build.path"/>

        <groovy>
            new File("my.properties").withWriter { writer ->
                properties.findAll { it.key.startsWith("ref.proj") }.each {
                    writer.println it
                }
            }
        </groovy>
    </target> 
```

# ruby-on-rails - 创建数据库后 Heroku 应用程序出错

> ID：14632381
> 
> 赞同：0
> 
> 时间：2013-01-31T18:12:40.827
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, ruby-on-rails-3.2

我的 heroku 日志中出现此错误。数据库已创建，但此错误不断被记录

```
2013-01-31T18:06:06+00:00 heroku[run.9334]: Starting process with command `bundle exec rake db:migrate`
2013-01-31T18:06:06+00:00 heroku[run.9334]: Awaiting client
2013-01-31T18:06:06+00:00 heroku[run.9334]: State changed from starting to up
2013-01-31T18:06:02+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by overallduka@hotmail.com
2013-01-31T18:06:10+00:00 heroku[run.9334]: Client connection closed. Sending SIGHUP to all processes
2013-01-31T18:06:11+00:00 heroku[run.9334]: Process exited with status 0
2013-01-31T18:06:11+00:00 heroku[run.9334]: State changed from up to complete
2013-01-31T18:06:16+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=youimports.herokuapp.com fwd=189.73.162.46 dyno= queue= wait= connect= service= status=503 bytes= 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:37:48.440

您的日志没有显示 postgres 的任何问题，尽管它在`rake db:migrate`.

我会验证是否`DATABASE_URL`指向您的数据库`heroku config --app <your-app>`。如果不是，只需推广您的数据库。为此，请通过 找出您的数据库的“颜色” `heroku pg:info --app <your-app>`，然后通过`heroku pg:promote <color> --app <your-app>`.

# java - 光标定稿。关闭（）问题

> ID：14632383
> 
> 赞同：0
> 
> 时间：2013-01-31T18:12:42.497
> 
> 标签：java, android

查询数据库后，我正在尝试通过游标对象从数据库中检索数据。我的 cursor.close() 和关闭数据库时似乎出现错误。这一直很好，但是当我从不同的意图访问类时，我开始收到“游标终结器”错误。

目前，我的光标对象似乎以不正确的方式关闭。

作为一个例子，我如何尝试检索所有数据以在我的类的 onCreate 方法中填充列表视图。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

setContentView(R.layout.appointmentview);

    searchedAppView = (ListView)findViewById(android.R.id.list);

    DBHandlerApp DBAppointments = new DBHandlerApp(this, null, null);

    DBHandlerApp searchApps = new DBHandlerApp(this, null, null);

    searchApps.open();

    Cursor cursor = searchApps.getAppointmentsData();

    startManagingCursor(cursor);

    @SuppressWarnings("static-access")
    String [] from = new String [] {DBAppointments.KEY_NAMEAPP, DBAppointments.KEY_TYPEAPP, DBAppointments.KEY_TIMEAPP, DBAppointments.KEY_DATEAPP, DBAppointments.KEY_COMMENTAPP};
    int [] to = new int [] {R.id.txtAppointName, R.id.txtAppointType, R.id.txtAppointTime, R.id.txtAppointDate, R.id.txtAppointCom};

    @SuppressWarnings("deprecation")

    SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this, R.layout.setappointviews, cursor, from, to);
    searchedAppView.setAdapter(cursorAdapter);

    searchAppoints = (ImageButton) findViewById(R.id.btnSearchAppointName); 
    searchAppName = (EditText) findViewById(R.id.inputAppointName); 

    searchAppoints.setOnClickListener(this);

} 
```

下面是 DBHandlerApp 类的方法“getAppointmentData”：

```
 public Cursor getAppointmentsData() {
        String [] columns = new String[]{KEY_ROWAPPID, KEY_NAMEAPP, KEY_TYPEAPP, KEY_TIMEAPP, KEY_DATEAPP, KEY_COMMENTAPP};
        Cursor c = ourDatabase.query(DATABASE_TABLEAPP, columns, null, null, null, null, KEY_NAMEAPP + " ASC", null);

                    //*****Closing the cursor object.*****
        c.close();
        return c; 
```

日志错误：

```
01-31 17:44:34.220: E/AndroidRuntime(269): FATAL EXCEPTION: main
01-31 17:44:34.220: E/AndroidRuntime(269): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.flybase2/com.example.flybase2.ViewAppointments}: java.lang.IllegalStateException: attempt to re-open an already-closed object: android.database.sqlite.SQLiteQuery (mSql = SELECT _id, app_name, app_type, app_time, app_date, app_comments FROM appointmentsTable ORDER BY app_name ASC) 
01-31 17:44:34.220: E/AndroidRuntime(269):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
01-31 17:44:34.220: E/AndroidRuntime(269):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-31 17:44:34.220: E/AndroidRuntime(269):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-31 17:44:34.220: E/AndroidRuntime(269):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-31 17:44:34.220: E/AndroidRuntime(269):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-31 17:44:34.220: E/AndroidRuntime(269):  at android.os.Looper.loop(Looper.java:123)
01-31 17:44:34.220: E/AndroidRuntime(269):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-31 17:44:34.220: E/AndroidRuntime(269):  at java.lang.reflect.Method.invokeNative(Native Method)
01-31 17:44:34.220: E/AndroidRuntime(269):  at java.lang.reflect.Method.invoke(Method.java:521)
01-31 17:44:34.220: E/AndroidRuntime(269):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-31 17:44:34.220: E/AndroidRuntime(269):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-31 17:44:34.220: E/AndroidRuntime(269):  at dalvik.system.NativeStart.main(Native Method)
01-31 17:44:34.220: E/AndroidRuntime(269): Caused by: java.lang.IllegalStateException: attempt to re-open an already-closed object: android.database.sqlite.SQLiteQuery (mSql = SELECT _id, app_name, app_type, app_time, app_date, app_comments FROM appointmentsTable ORDER BY app_name ASC) 
01-31 17:44:34.220: E/AndroidRuntime(269):  at android.database.sqlite.SQLiteClosable.acquireReference(SQLiteClosable.java:34)
01-31 17:44:34.220: E/AndroidRuntime(269):  at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:64)
01-31 17:44:34.220: E/AndroidRuntime(269):  at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:283)
01-31 17:44:34.220: E/AndroidRuntime(269):  at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:264)
01-31 17:44:34.220: E/AndroidRuntime(269):  at android.support.v4.widget.CursorAdapter.getCount(CursorAdapter.java:202)
01-31 17:44:34.220: E/AndroidRuntime(269):  at android.widget.ListView.setAdapter(ListView.java:436)
01-31 17:44:34.220: E/AndroidRuntime(269):  at com.example.flybase2.ViewAppointments.onCreate(ViewAppointments.java:54)
01-31 17:44:34.220: E/AndroidRuntime(269):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-31 17:44:34.220: E/AndroidRuntime(269):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
01-31 17:44:34.220: E/AndroidRuntime(269):  ... 11 more 
```

目前我不使用 .searchApps.close(); 关闭数据库。如果这样做，我会收到以下 logcat 错误：

```
01-31 17:52:17.324: E/AndroidRuntime(277): FATAL EXCEPTION: main
01-31 17:52:17.324: E/AndroidRuntime(277): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.flybase2/com.example.flybase2.ViewAppointments}: java.lang.IllegalStateException: attempt to re-open an already-closed object: android.database.sqlite.SQLiteQuery (mSql = SELECT _id, app_name, app_type, app_time, app_date, app_comments FROM appointmentsTable ORDER BY app_name ASC) 
01-31 17:52:17.324: E/AndroidRuntime(277):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
01-31 17:52:17.324: E/AndroidRuntime(277):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-31 17:52:17.324: E/AndroidRuntime(277):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-31 17:52:17.324: E/AndroidRuntime(277):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-31 17:52:17.324: E/AndroidRuntime(277):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-31 17:52:17.324: E/AndroidRuntime(277):  at android.os.Looper.loop(Looper.java:123)
01-31 17:52:17.324: E/AndroidRuntime(277):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-31 17:52:17.324: E/AndroidRuntime(277):  at java.lang.reflect.Method.invokeNative(Native Method)
01-31 17:52:17.324: E/AndroidRuntime(277):  at java.lang.reflect.Method.invoke(Method.java:521)
01-31 17:52:17.324: E/AndroidRuntime(277):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-31 17:52:17.324: E/AndroidRuntime(277):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-31 17:52:17.324: E/AndroidRuntime(277):  at dalvik.system.NativeStart.main(Native Method)
01-31 17:52:17.324: E/AndroidRuntime(277): Caused by: java.lang.IllegalStateException: attempt to re-open an already-closed object: android.database.sqlite.SQLiteQuery (mSql = SELECT _id, app_name, app_type, app_time, app_date, app_comments FROM appointmentsTable ORDER BY app_name ASC) 
01-31 17:52:17.324: E/AndroidRuntime(277):  at android.database.sqlite.SQLiteClosable.acquireReference(SQLiteClosable.java:34)
01-31 17:52:17.324: E/AndroidRuntime(277):  at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:64)
01-31 17:52:17.324: E/AndroidRuntime(277):  at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:283)
01-31 17:52:17.324: E/AndroidRuntime(277):  at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:264)
01-31 17:52:17.324: E/AndroidRuntime(277):  at android.support.v4.widget.CursorAdapter.getCount(CursorAdapter.java:202)
01-31 17:52:17.324: E/AndroidRuntime(277):  at android.widget.ListView.setAdapter(ListView.java:436)
01-31 17:52:17.324: E/AndroidRuntime(277):  at com.example.flybase2.ViewAppointments.onCreate(ViewAppointments.java:56)
01-31 17:52:17.324: E/AndroidRuntime(277):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-31 17:52:17.324: E/AndroidRuntime(277):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
01-31 17:52:17.324: E/AndroidRuntime(277):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:18:26.830

您将光标关闭在错误的位置。您应该在完全使用完游标后关闭它，在填充它之后立即关闭它，然后从您的`getAppointmentData`方法返回它。

简单地`close`从该方法中删除调用应该可以解决您的问题，因为当您使用 时`startManagingCursor`，活动会处理关闭它。

顺便说一句，`startManagingCursor`折旧有利于使用[Loaders](http://developer.android.com/reference/android/app/LoaderManager.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:16:22.167

我不完全知道问题是什么。但是，该方法`startManagingCursor(...)`已弃用，不应使用，请参阅：http: [//developer.android.com/reference/android/app/Activity.html#startManagingCursor(android.database.Cursor)](http://developer.android.com/reference/android/app/Activity.html#startManagingCursor(android.database.Cursor))

更好的方法是使用`CursorLoader`.

# c# - 绑定到我的 Listbox ItemTemplate 中 DataTemplate 项的“索引”

> ID：14632386
> 
> 赞同：0
> 
> 时间：2013-01-31T18:12:58.333
> 
> 标签：c#, wpf, mvvm, observablecollection, enumeration

我有一个带有 ItemTemplate 的 ListBox，它使用 DataTemplate 来包装我的每个视图模型对象。

它看起来像这样：

```
 <ListBox (Style stuff....)>
      .
      .
      .
      <ListBox.ItemTemplate>
           <DataTemplate DataType="{x:Type vm:MyViewModel}">
                <Label Content={Binding MyFirstProperty, Mode=TwoWay}" />
                <Label Content={Binding MySecondProperty, Mode=TwoWay}"/> 
```

如何返回填充我的列表框的每个 DataTemplated“行”项目的项目编号？我想在我的内部绑定它`DataTemplate`（所以每一行都用适当的索引值编号）。

我目前正在听包装`OnCollectionViewCurrentChanged` `EventHandler`的。`ICollectionView``ObservableCollection``MyViewModels`

提前致谢！

# timer - Powershell 计时器，无需暂停表单

> ID：14632389
> 
> 赞同：0
> 
> 时间：2013-01-31T18:13:11.243
> 
> 标签：timer, powershell-2.0

美好的一天

像往常一样，我被困住了，我有一个简单的脚本，旨在向您显示系统 bitlocker 列表的状态。给它一个系统名称的 txt，剩下的就交给它了。所有作品按预期进行；但是，它会在滴答作响的计时器上更新列表，执行时会使窗口无响应并且似乎已损坏（对于那些不了解它在做什么的用户）。有没有办法以某种方式将其分支以避免这种挂断？

我考虑过做一个分支，但我现在知道如何让该分支更新其父级中的一个对象......如果那是可能的话。

代码：

```
[void] [Reflection.Assembly]::LoadWithPartialName( 'System.Windows.Forms' ) 
$d = New-Object Windows.Forms.OpenFileDialog 
$d.ShowHelp = $true 
$d.filter = "System ID List (*.txt)| *.txt"
$result = $d.ShowDialog( )
$names = @()
$names = Get-Content $d.filename

[System.Reflection.Assembly]::LoadWithPartialName("System.Drawing")
[System.Reflection.Assembly]::LoadWithPartialName("System.windows.forms")

$myWindow = new-object System.Windows.Forms.form
$myDataGrid = new-object System.windows.forms.DataGridView
$myDataGrid.Location = new-object System.Drawing.Size(20,30)
$myDataGrid.size = new-object System.Drawing.Size(450,480)
$myDataGrid.AllowUserToAddRows = $False
$myDataGrid.AutoSizeColumnsMode = [System.Windows.Forms.DataGridViewAutoSizeColumnsMode]::Fill
$myDataGrid.RowsDefaultCellStyle.BackColor = [System.Drawing.Color]::Bisque
$myDataGrid.AlternatingRowsDefaultCellStyle.BackColor = [System.Drawing.Color]::Beige
$myDataGrid.BorderStyle = [System.Windows.Forms.BorderStyle]::Fixed3D
$myDataGrid.ColumnHeadersDefaultCellSTyle.ForeColor = [System.Drawing.Color]::Maroon
$myDataGrid.ColumnHeadersDefaultCellStyle.BackColor = [System.Drawing.Color]::Tan
$myDataGrid.RowHeadersDefaultCellStyle.BackColor = [System.Drawing.Color]::Tan
$myDataGrid.ColumnHeadersHeightSizeMode = [System.Windows.Forms.DataGridViewColumnHeadersHeightSizeMode]::AutoSize
$myWindow.Controls.Add($myDataGrid)

# Define menus
$myMenuStrip = new-object System.Windows.Forms.MenuStrip
$FileExit = new-object System.Windows.Forms.ToolStripMenuItem("&Exit")
$FileExit.add_Click({ $myWindow.close() })
$myMenuStrip.Items.Add($FileMenu)
$myWindow.Controls.Add($myMenuStrip)

$timer = New-Object System.Windows.Forms.Timer
$timer.Interval = 1000
$timer.add_tick({
    $dataTable = New-Object System.Data.DataTable            
    $dataTable.Columns.Add("System")  | Out-Null
    $dataTable.Columns.Add("BitLocker % (C:)")   | Out-Null        
    foreach ($name in $names) {
        $stat = (manage-bde.exe -cn $name -status C:)[11].split(":")[1]
        $row = $dataTable.NewRow()
        $row["System"] = $name
        $row["BitLocker % (C:)"]  = $stat
        $dataTable.Rows.Add($row)
    }  
    $myDataGrid.DataSource = $dataTable
})

# main program body
$myWindow.Text = "BitLocker Status"
$myWindow.size = new-object System.Drawing.Size(500,600)
$myWindow.autoscroll = $true
$myWindow.Add_Shown({$myWindow.Activate()})
$timer.Start()
$myWindow.ShowDialog() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:10:35.030

我不敢相信没有人回答这个问题，也许我不清楚。

无论哪种方式，解决方案都很简单，写入输出 $object，然后接收作业。完毕

# drupal - 使用 SMTP 模块的 Drupal Commerce 站点上的 Amazon SES 无法发送电子邮件

> ID：14632392
> 
> 赞同：0
> 
> 时间：2013-01-31T18:13:32.737
> 
> 标签：drupal, smtp, amazon, commerce

我使用 Amazon SES 从 Drupal Commerce 发送电子邮件。我安装了 SMTP 模块。已验证的电子邮件 ID 用于此服务。但无法发送电子邮件。同样从日志中可以看出，电子邮件是通过“站点信息”下给出的电子邮件 ID 发送的，而不是通过 SES 验证的电子邮件 ID 存储在 SMTP 设置中。还会出现类似错误：SMTP 错误：无法连接到 SMTP 主机。

# jquery - 将cookie加载到html字段jquery

> ID：14632394
> 
> 赞同：0
> 
> 时间：2013-01-31T18:13:33.960
> 
> 标签：jquery, html, cookies

我想在加载页面时将 cookie 值直接加载到具有特定类的所有 html 字段。我创建了一个与字段 ID 同名的 cookie。

这样做是行不通的。

```
$(".class").val(function(){
    el=$(this);
    id=el.attr("id");
    cookie_val=$.cookie(id);
    el.val(cookie_val);
}); 
```

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:19:24.937

将函数传递给[jQuery 的`.val()`](http://api.jquery.com/val/)方法时，函数应返回所需的值。

正如您的代码所代表的那样，您的函数正在运行，它确实设置了值。然后它返回`undefined`，然而，这将它设置为空。

这应该有效：

```
$('.class').val(function () {
    return $.cookie($(this).attr('id'));
}); 
```

或者，您可以使用`.each()`让您的函数进行值设置而无需返回：

```
$('.class').each(function () {
    var el = $(this);
    el.val($.cookie(el.attr('id')));
}); 
```

FWIW，我写了一个 cookie 库，它为这个功能提供了 jQuery 插件（用同名 cookie 保存的值填充一个字段）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:19:36.163

here´s a function you can send the parameter/cookiename and return value

```
function findnameGetvalue(n){
    a = document.cookie;
    while(a != ''){
        cookiename = a.substring(0,a.search('='));
        cookievalue = a.substring(a.search('=')+1,a.search(';'));
        if(cookievalue == cookiename+'='){
            cookievalue = a.substring(a.search('=')+1,a.length);
        }
        if(cookiename == n){ // if found return value
            return cookievalue;
        }
        i = a.search(';');
        if(i == -1){ // not found do stuff
            i = a.length
        }
        else{
            i += 2;
        }
        a = a.substring(i,a.length);
    }
} 
```

# c - ISO C90 禁止混合声明和代码 - 为什么

> ID：14632395
> 
> 赞同：1
> 
> 时间：2013-01-31T18:13:35.073
> 
> 标签：c, ansi, c89

> **可能重复：**
> [为什么在 C99 之前禁止混合声明和代码？](https://stackoverflow.com/questions/7859424/why-was-mixing-declarations-and-code-forbidden-up-until-c99)

有一些与此警告相关的问题：`ISO C90 forbids mixed declarations and code`但它们没有首先解决为什么这是 C90 标准中的问题。

那么 - 为什么有这个规定？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T18:17:17.990

我知道的最大原因是它简化了语言语法和解析器。

有了前面的声明，代码块必须看起来像

```
{
    <declarations>
    <stmts>
} 
```

因此， 的定义`<stmts>`被简化了，因为它不必涉及声明。这反过来又简化了解析器，因为它只需要在块的开头消除声明与声明的歧义。

事实上，代码块的这个特定定义已编入标准：

```
3.6.2 Compound statement, or block

Syntax

          compound-statement:
                  {  declaration-list<opt> statement-list<opt> }

          declaration-list:
                  declaration
                  declaration-list declaration

          statement-list:
                  statement
                  statement-list statement 
```

# jquery - Jquery textarea没有将值返回给函数

> ID：14632399
> 
> 赞同：1
> 
> 时间：2013-01-31T18:14:08.547
> 
> 标签：jquery, textarea

StackOverflow 上有一些参考资料，例如：
- [textarea 不返回值](https://stackoverflow.com/questions/2776910/textarea-doesnt-return-value)
- 以及其他 ..

但即使有了这些，我仍然无法让它工作。

我只是不尊重地把我的代码放在下面。对不起。

**预期行为：**
控制台应在输入内容时返回文本区域的值。

**实际行为：**
控制台返回*"(一个空字符串)"*。
当我只是写`msg = "This IS going through";` 而不是我试图获得 .val() 的行时......它工作得很好。函数传递那个“msg”变量就好了。

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
        <title>why oh why</title>
        <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>

        <script type="text/javascript">
            $(function(){

                msg = $(".mymsg").val();
                $('.hitme').on("click", {param1: msg}, sendNotif);

                function sendNotif(event) {
                    msg = event.data.param1;
                    console.log(msg);
                }

            });
        </script>
     </head>
<body>

<textarea class="mymsg" cols="5" rows="10"></textarea>
<span class="hitme">click here</span>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T18:20:12.533

您正在获取值 onload，因此`var msg`将是空的，您需要在单击事件时获取它，而不是在加载页面时

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T18:19:41.033

问题是`msg`仅在`$(function() { … })`页面加载处理程序触发时设置一次。该行不再执行。将您的代码更改为：

```
$('.hitme').on("click", {param1: $(".mymsg").val()}, sendNotif); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T18:18:31.287

您需要在触发事件时提取 mymsg 的值。我会这样做：

```
$(".hitme").click(function() {
  console.log( $(".mymsg").val() );
}); 
```

# firefox - 如何比 firebug/chrome 开发工具网络面板“更深入”？

> ID：14632401
> 
> 赞同：3
> 
> 时间：2013-01-31T18:14:12.333
> 
> 标签：firefox, networking, firebug, google-chrome-devtools

与开发人员工具网络面板提供的相比，我如何更深入地了解 Web 浏览器的网络级别发生的情况？例如，我现在正在尝试在 Firefox (18.0.1) 中调试页面上的问题，在该页面完成加载后，加载“微调器”会持续很长时间。

firebug net 面板显示所有资源已加载（“200 OK”），但选项卡上的加载图标仍在旋转，窗口底部的文本仍显示“Transferring data..”。我将如何仔细查看并查看据称仍在传输的内容？请注意，这似乎只发生在 Firefox 上，并且只在新加载时发生（而不是在缓存资源时）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T20:29:37.237

在检查了您与 Wireshark 和 HTTPScoup（另一种工具）的链接后，我从两者得出的结论是所有数据都已成功到达，并且没有与您的服务器 IP 保持打开的连接。我认为FF中的问题与其他问题有关

谷歌透露，在某些情况下，有可能将 FF 混淆为这种状态。它不必与打开的网络连接相关。

例如看一下这个问题： [FireFox 位于“从...传输数据”或“读取...”](https://stackoverflow.com/questions/304471/firefox-sits-on-transferring-data-from-or-read)

HTML正文中存在未封闭标签的问题..所以也尝试找到这样的问题。你可以尝试通过运行一个验证器来修复一些验证错误，比如[这个](http://validator.w3.org/check?uri=http%3A%2F%2Fwww.dinolite.us%2Ffeatures%2Fpolarization&charset=%28detect+automatically%29&doctype=Inline&group=0)。由于您有大约**200 个**验证错误，我建议您首先删除一半的 HTML 代码，直到问题消失，这样才能在问题位置归零。然后进去修复标签混乱..在 HTML 源代码中看一下让我头疼:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T18:15:23.450

我会使用[Fiddler](http://www.fiddler2.com/fiddler2/)或[Wireshark](http://www.wireshark.org/)之类的工具来执行此操作。这两个工具都提供了更多的低级数据包信息。

我将从提琴手开始。Fiddler 用于 http 流量分析，而 Wireshark 是一个成熟的数据包嗅探工具，用于所有层的网络流量。

这两种工具的另一个优点是您可以将它们与任何浏览器一起使用。提琴手的一个缺点是我相信它仅适用于 Windows。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T18:19:19.123

我会推荐一个非常好的 Firefox 扩展，叫做[HttpFox](https://addons.mozilla.org/en-us/firefox/addon/httpfox/)，它比wireshark 和朋友更容易使用

它可以让您更详细地查看页面进行的 HTTP 调用，以及页面之间的流程（快速重定向等）。这是它的样子：

![在此处输入图像描述](../Images/272e590b5dc380252cc912a528e666bd.png)

# java - 将列表转换为包含 10 个项目的列表列表

> ID：14632402
> 
> 赞同：7
> 
> 时间：2013-01-31T18:14:12.933
> 
> 标签：java

我有一份 pojos 列表。将此 pojo 列表转换为列表列表，其中每个子列表的大小为 10 或更小。例如，一个大小为 13 的 List 被转换为一个包含两个元素的 List。第一个元素是一个包含 10 个项目的列表，第二个元素是一个包含 3 个项目的列表。

所以数据结构是`List<List<pojo>>`

要创建此列表列表：

```
List<List<pojo>> pojoList
counter = 0;
initialise new tempList
iterate list
add current pojo to temp list
if counter = 10 then add tempList to pojoList
reset counter and tempList and continue until list is iterated 
```

有替代解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T18:21:41.930

考虑 Guava 的[Lists.partition()](https://google.github.io/guava/releases/19.0/api/docs/com/google/common/collect/Lists.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:21:10.230

使用[子列表](http://docs.oracle.com/javase/6/docs/api/java/util/AbstractList.html#subList%28int,%20int%29)

```
List<Pojo> originalList.... //your list of POJOs  
List<List<Pojo>> pojoList = new ArrayList<List<Pojo>>(originalList/10 + 1);  
for(int i = 0; i < originalList.size(); i+=10){  
    if(i + 10 > originalList.size()){  
         pojoList.add(originalList.subList(i, originalList.size()));
    }
    else{
         pojoList.add(originalList.subList(i, i + 10));  
    }  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T18:19:22.047

您可能可以使用[`subList`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/List.html).

您仍然需要迭代，但您不需要创建`tempList`

# web-services - Sage sdata Web服务问题

> ID：14632408
> 
> 赞同：0
> 
> 时间：2013-01-31T18:14:30.643
> 
> 标签：web-services, sdata

我正在研究 Sage SData 集成。不幸的是，向服务器发送数据时出现了问题。我能够检索数据并删除合同，但是当我通过添加新合同`POST`或通过更新时`PUT`，它会给出一个错误：

> 错误 ApplicationDiagnosis Index 超出范围。必须是非负数且小于集合的大小。参数名称：索引 System.ArgumentOutOfRangeException：索引超出范围。必须是非负数且小于集合的大小

有人有添加新合同的 PHP 或 JSON 示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:42:27.490

你有一个你试图到达的端点的例子吗？

我的猜测是您尝试访问不返回任何内容的端点，Web 服务器仍尝试为您提供 atom 提要但失败。在使用 SData 时，我已经多次遇到这种情况，直到找到我想要使用的资源种类的正确端点。

几个小贴士

SData URL 采用以下形式；

`<protocol>://<hostname>:<port>/sdata/<application>/<contract>/<resourcekind>?<queryparameters>`

几个有用的系统 url，可以帮助您更轻松地发现已注册的端点；

*   `<protocol>://<hostname>:<port>/sdata/$system`（列出所有系统端点）
*   `<protocol>://<hostname>:<port>/sdata/$system/adapters`（列出已安装的适配器）
*   `<protocol>://<hostname>:<port>/sdata/$system/registry/endpoints`（注册端点列表）

您可以从以下资源中更容易地获得帮助；

> [http://sdata.sage.com/](http://sdata.sage.com/) (Sage SData 门户)
> 
> [http://sage.github.io/SData-2.0/pages/core/0100/（Sage](http://sage.github.io/SData-2.0/pages/core/0100/) SData核心规范1.1）
> 
> ~~[http://sdata.sage.com/SDataForum/（Sage](http://sdata.sage.com/SDataForum/) SData 论坛 - 有用资源）~~ *（可惜论坛已经下架）*

# image-processing - 是否可以使用轮廓变换从边缘检测中获取方向 theta 值？（像 sobel 算子）

> ID：14632411
> 
> 赞同：1
> 
> 时间：2013-01-31T18:14:51.623
> 
> 标签：image-processing, contour, edge-detection, wavelet

我的轮廓工具箱处于运行状态（Matlab）

> [http://www.ifp.illinois.edu/%7Eminhdo/software/contourlet_toolbox.zip](http://www.ifp.illinois.edu/%7Eminhdo/software/contourlet_toolbox.zip)

我已经看到了轮廓变换的金字塔结构，并在应用于图像时运行了一些示例演示函数。
我的问题是得到一个矩阵作为结果，其中包含检测到的原始信息的边缘信息，这样我就可以在图像中边缘发生变化时获得方向/θ值。这可能吗？

# c++ - MPEG ADTS 格式识别

> ID：14632415
> 
> 赞同：0
> 
> 时间：2013-01-31T18:15:07.610
> 
> 标签：c++, detection, mpeg, identification

我需要检测文件是否为 MPEG ADTS 文件。我已经四处寻找它，但无论我寻找不好还是其他东西，但我找不到使用它的签名，我可以肯定地说某些文件具有 MPEG ADTS 格式。

例如，如果文件以这样的签名 00 00 00 nn 66 74 79 70 6D 70 34 开头，我们可以肯定地说该文件是 MP4。如何使用 MPEG ADTS 来完成？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T09:47:26.940

ADTS 标头通常用于独立的 aac、mpeg-ts 文件。（流媒体场景） ADIF 主要用于 MP4 文件

adts 文件头以 12 位“同步工作”开头，始终为 (111111111111) 下 1 位是 ID - 下 2 位（始终为 0）

[http://developer.longtailvideo.com/trac/browser/providers/adaptive/doc/adts.pdf?rev=1460](http://developer.longtailvideo.com/trac/browser/providers/adaptive/doc/adts.pdf?rev=1460)（提供完整的标题）

所以你要检测的算法是 -

1.  搜索 12 位同步工作
2.  验证下一个字段是否包含有效值

# ruby-on-rails - 在带有布局的视图中，为什么我们使用“provide”和“yield”而不是传递即时变量？

> ID：14632416
> 
> 赞同：1
> 
> 时间：2013-01-31T18:15:08.827
> 
> 标签：ruby-on-rails, railstutorial.org

我正在研究 Rails 教程，我到达了布局部分。指示在视图中使用“provide”，在布局文件中使用“yield”。为什么我们不在代码中只使用即时变量：查看：

```
<% @title = 'about' %> 
```

应用程序布局

```
<title>Website Name | <%= @title %></title> 
```

这本书使用了更复杂的语法，并且肯定是有充分理由的

查看：

```
<% provide(:title, 'Help') %> 
```

应用程序布局

```
<title>Website Name | <%= yield(:title) %></title> 
```

两个都试了，都很好用。但我不明白为什么不使用更简单的即时变量方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:48:32.037

您可以使用 content_for 并传递一段代码，而不是提供。然后 yield 将能够执行这个代码块——它不只是打印一个变量。

这很有用，因为在更复杂的视图中，您将使用另一个称为“助手”的概念。继续做好工作，我相信将来事情会变得清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:15:19.413

您需要使用`provide`或`content_for`当您无法事先确定变量的值时。

例子：

*   渲染布局
    *   yield 标题 <-- 尚未定义
    *   产出主模板
        *   提供标题 <-- 在此处定义

# sql - 临时查询中使用的表的索引

> ID：14632418
> 
> 赞同：0
> 
> 时间：2013-01-31T18:15:14.310
> 
> 标签：sql, sql-server, tsql, indexing

我有一张带有结构的表：

```
 CREATE TABLE [dbo].[rx](
            [pat_id] [int] NOT NULL,
            [fill_Date] [date] NOT NULL,
            [script_End_Date]  AS (dateadd(day,[dayssup],[filldate])),
            [drug_Name] [varchar](50) NULL,
            [days_Sup] [int] NOT NULL,
            [quantity] [float] NOT NULL,
            [drug_Class] [char](3) NOT  NULL,
            [ofInterest] bit
            CHECK(fill_Date <=script_End_Date
PRIMARY KEY CLUSTERED 
(
            [clmid] ASC
)

CREATE TABLE [dbo].[Calendar](
             [cal_date] [date] PRIMARY KEY,
[Year] AS YEAR(cal_date) PERSISTED,
[Month] AS MONTH(cal_date) PERSISTED,
[Day] AS DAY(cal_date) PERSISTED,
             [julian_seq] AS 1+DATEDIFF(DD, CONVERT(DATE, CONVERT(varchar,YEAR(cal_date))+'0101'),cal_date),
     id int identity); 
```

我在这个查询中使用了这些表：

```
;WITH x 
     AS (SELECT rx.pat_id, 
                c.cal_date, 
                Count(DISTINCT rx.drug_name) AS distinctDrugs 
         FROM   rx, 
                calendar AS c 
         WHERE  c.cal_date BETWEEN rx.fill_date AND rx.script_end_date 
                AND rx.ofinterest = 1 
         GROUP  BY rx.pat_id, 
                   c.cal_date 
         --the query example I used having count(1) =2, but to illustrate the non-contiguous intervals, in practice I need the below having statement
         HAVING Count(*) > 1), 
     y 
     AS (SELECT x.pat_id, 
                x.cal_date 
                --c2.id is the row number in the calendar table. 
                , 
                c2.id - Row_number() 
                          OVER( 
                            partition BY x.pat_id 
                            ORDER BY x.cal_date) AS grp_nbr, 
                distinctdrugs 
         FROM   x, 
                calendar AS c2 
         WHERE  c2.cal_date = x.cal_date) 
SELECT *, 
       Rank() 
         OVER( 
           partition BY pat_id, grp_nbr 
           ORDER BY distinctdrugs) AS [ranking] 
FROM   y 
```

日历表运行了三年，而 rx 表中有大约 800k 行。在前面的查询运行了几分钟后，我决定向它添加一个索引以加快速度。我添加的索引是

```
create index ix_rx
on rx (clmid)
include (pat_id,fill_date,script_end_date,ofinterest) 
```

该索引对查询的运行时间影响为零。谁能帮助解释为什么没有使用上述索引？这是一个回顾性数据库，不会向其中添加更多数据。如果需要，我可以添加执行计划。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T19:19:51.767

`clmid`查询中根本不使用该字段。因此，如果优化器仅考虑包含列，我会感到惊讶。

如果要使用索引加快查询速度，请从使用表的查询开始。使用的字段是`pat_id`、`drug_name`、`rx_ofinterest`、`fill_date`和`script_end_date`。由于介于两者之间，最后两个具有挑战性。你可以试试这个索引： `rx(pat_id, drug_name, ofinterest, fill_date, script_end_date)`.

拥有索引中的所有引用字段将可以在不加载数据页面的情况下访问数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T19:20:29.243

因为它不是一个合适的索引。创建两个索引，一个在 [pat_id] 上，另一个在 drug_name 上。——</p>

# qtip2 - qTip 样式不适合我，在任何 qtips 上，由任何人制作，在任何浏览器上？

> ID：14632426
> 
> 赞同：0
> 
> 时间：2013-01-31T18:15:29.937
> 
> 标签：qtip2

我试图让 qTip 在我自己的项目上工作，并且 qTips 确实出现了，但没有样式。我试过谷歌搜索并在 Stackoverflow 上闲逛，但无济于事。

例如，如果我查看 qTip 演示页面，[在这里](http://craigsworks.com/projects/qtip2/demos/#imagemap)，我*可以*看到样式。但是当我单击`jsfiddle`左上角的按钮时（将我带到[这里](http://jsfiddle.net/craga89/v2WPz/)），样式就消失了。

有谁知道发生了什么？它使我无法设计自己的 qTips！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:42:32.820

那是因为这两页上的代码有点不同

在它使用的原始/样式中`classes: 'qtip-tipsy qtip-shadow'`

在 jsfiddle 上它使用`classes: 'ui-tooltip-tipsy ui-tooltip-shadow'`

将jsfiddle更改为`classes: 'qtip-tipsy qtip-shadow'`一切都很好......

# css - ZURB Foundation 的半流体设计？

> ID：14632437
> 
> 赞同：2
> 
> 时间：2013-01-31T18:15:58.180
> 
> 标签：css, twitter-bootstrap, zurb-foundation

我是 Foundation 的新手，但是否有可能使默认网格宽度更大，或者更好，只是屏幕宽度的 80%，并增加一个最小宽度？

如果Foundation不可能，那么Bootstrap有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:41:32.593

使用 Foundation 4 我只是添加了

```
.row { max-width: 100%; } 
```

到样式。适用于`rows`以及`top-bar`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:41:00.573

Foundation 3 的优点之一是它是用[SASS](http://sass-lang.com/)构建的，因此网格系统的 CSS 完全依赖于变量。

行宽的样式为[`scss/foundation/components/_grid.scss`](https://github.com/zurb/foundation/blob/06a8f20433420c231f6a294ee1999e87ff8c69c3/scss/foundation/components/_grid.scss)：

```
/* The Grid ---------------------- */

.row { width: $rowWidth; max-width: 100%; min-width: $screenSmall; margin: 0 auto;
  .row { width: auto; max-width: none; min-width: 0; margin: 0 (-($columnGutter/2)); }

  &.collapse {
    .column, .columns { padding: 0; }
  }
  .row { width: auto; max-width: none; min-width: 0; margin: 0 (-($columnGutter/2));
    &.collapse { margin: 0; }
  }
} 
```

行的总宽度取决于`$rowWidth`变量，该变量又定义在[`scss/foundation/_settings.scss`](https://github.com/zurb/foundation/blob/06a8f20433420c231f6a294ee1999e87ff8c69c3/scss/foundation/_settings.scss)：

```
// Grid Settings

$rowWidth: 1000px !default;
$columnGutter: 30px !default;
$totalColumns: 12 !default;
$mobileTotalColumns: 4 !default;
$blockGridElements: 12 !default; // Highest number of block grid elements, Maximum of 24 supported 
```

因此**，您需要将`$rowWidth`变量更改为您需要的任何大小**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-02T01:27:10.647

如果您使用 SASS 和基础版本 5，您可以自定义行：

```
$row-width: 100%; 
```

# c# - 带有扩展名的文件名的 C# 正则表达式

> ID：14632443
> 
> 赞同：0
> 
> 时间：2013-01-31T18:16:24.940
> 
> 标签：c#, regex

我很讨厌正则表达式，但我需要一个能够理解文件格式的文件，其扩展名是： Anycharacter.threecharachter 扩展名 我可以使用*.* 如果编译器得到它

我试过

```
Regex ex = new regex(".*\\..*") 
```

和

```
Regex ex = new regex(".*\\...."); 
```

应该通过的例子：

```
 ex.IsMatch("test.zip"); 
```

感谢@Alice 的留言；我更改了文件浏览器现在显示的代码：-rwxr-x--- 1 root nto 1007 Jan 10 14:28 chat.sh

或者

drwxr-x--- 1 root nto 1007 Jan 10 14:28 个帐户

或者

lrwxrwxrwx 1 root nto 9 Jan 15 06:43 lib -> /base/lib

d 是在行首定义目录的内容。我想读这样的一句话并得到回报

布尔Isdirectory;

字符串 fName;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:24:33.067

```
[^\.]    //Not a period once
.*       //Anything 0..more times
\.       //Period
.{1,3}   //Anything, up to three times 
```

All together:

```
[^\.].*\..{1,3} 
```

If the entire line/text has to match, put it in `^$`:

```
^[^\.].*\..{1,3}$ 
```

Note that files without extensions are also valid filenames, so you may need to relax the period `.` requirement at some point :) Plus, period matches symbols that aren't valid in a filename, like `*`, `/`, etc. so you may be asking the wrong question here.

EDIT: Now that you added the flags, the question makes more sense. It is very easy to do the new check:

```
if( line.StartsWith( "d" ) )
    return true; //It's a directory. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:20:46.463

I guess this is what you are looking for

```
^.*\.[^.]{3}$ 
```

* * *

If you want to match a particular character n number of times you can use `{}` quantifier

so `.{3}` would match three characters

`x{2}` would match 2 x

`x{1,5}` would match 1 to 5 x

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T19:23:47.363

This is the file name Regex I use for windows file names

```
^[^/\\:*""<>|]+?\.\w{1,3}$ 
```

These symbols`^/\:*"<>|` represent the disallowed character for file names on windows.

If you dont want more than one period in your file name you can use this one:

```
^[^/\\:*""<>|.]+?\.\w{1,3}$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T02:13:50.470

```
 string x = "drwx------+ 1 Administrators Domain Users        0 Nov 30  2011 VSWebCache";
    Match m = Regex.Match(x, @"^(?<dir>d)?.*?(?<name>\w+(?:\.\w{3})?)$");

    if(m.Success)
    {
        string name = m.Groups["name"].Value;
        bool isDir = m.Groups["dir"].Success;
    } 
```

"name" is now a string containing the filename or directory name. "isDir" now contains a bool whether the listing starts with "d" for directory or not.

Your regex is as follows:

```
^(?<dir>d)?.*?(?<name>\w+(?:\.\w{3})?)$ 
```

It is saying this: Create 2 groups named "dir" and "name". If starts with "d" then group "dir" will contain "d". Group "name" will contain either the file name or directory name. There is some play in the name as it will match a "filename" and "filename.ext" if a "." exists in the name.

This will also work if

```
string x = @"-rwx------+ 1 Administrators Domain Users    72080 Dec 16  2011 g2mdlhlpx.exe"; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-31T18:19:44.790

试试这个：

```
.+\.(.{1,3})+ 
```

`.+` will look for file name, and will make sure that file name contains at least 1 character. `\.` will look for a period. `.{1,3}` will look for extension that could be one to three characters long. `(.{1,3})+` will take care of file names that have extensions like filename.tar.gz.

so the regex will validate filename.z, filename.gz, filename.zip, filename.tar.gz, etc.

# c# - 如何在调用其他构造函数之前抛出 ArgumentNullException

> ID：14632446
> 
> 赞同：3
> 
> 时间：2013-01-31T18:16:33.640
> 
> 标签：c#, syntax, exception-handling, constructor

我有一个与构造函数的语法和在构造函数中抛出异常有关的问题。

如何在调用 CreateAnotherOne() 之前为参数 b 抛出 ArgumentNullException 并在第二个构造函数中抛出异常，而不在检查后复制代码？我可以将代码提取到一个单独的私有方法中，但我需要从两个构造函数主体中调用它......还有其他选择来实现这一点吗？

```
public class MyClass
{
    public MyClass(IWhatEver a, ISomeThingElse b)
        : this(a, b != null ? b.CreateAnotherOne() : null)
    {
        // or should I call :this(a, b.CreateAnotherOne()) instead? this could cause a NullReferenceException => how to verify that b is not null?
        // don't want to call CallMeFromConstructor() instead of call to other constructor

        // would not do the following (why should I check a/c twice?) and the check is too late here (because already called a method on b, b.CreateAnotherOne())
        if (a == null)
        {
            throw new ArgumentNullException("a");
        }

        if (b == null)
        {
            throw new ArgumentNullException("b");
        }
    }

    public MyClass(IWhatEver c, IAnotherOne d)
    {
        if (c == null)
        {
            throw new ArgumentNullException("c");
        }
        if (d == null)
        {
            throw new ArgumentNullException("d");
        }

        // the cool code comes here, I could put it into
        // the CallMeFromConstructor method but is there another way?
    }
    ...

    private void CallMeFromConstructors()
    {
        // the cool code could be here, too (but is there another way?)
    } 
```

如果我用 : this(a, b != null ? b.CreateAnotherOne() : null) 调用第二个构造函数，我会得到一个 ArgumentNullException for d int 第二个构造函数。这对我来说听起来很奇怪并且可能会产生误导，因为我调用了第一个（只能在堆栈跟踪中看到）。

问题是我不会写

```
:this(a, b == null ? b.CreateAnotherOne() : throw new ArgumentNullException("b")); 
```

如果我将检查放入构造函数的主体中，在这种情况下它会被检查到很晚。

**任何语法糖的想法来解决这个问题？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T18:22:14.003

私有方法可以做到这一点，但您也可以创建另一个私有构造函数：

```
 private MyClass(IWhatEver a)
    {
        if (a == null)
        {
            throw new ArgumentNullException("a");
        }

        // the cool code comes here, I could put it into
        // the CallMeFromConstructor method but is there another way?
    }

    public MyClass(IWhatEver a, ISomeThingElse b) : this(a)
    {
        if (b == null)
        {
            throw new ArgumentNullException("b");
        }
    }

    public MyClass(IWhatEver a, IAnotherOne b) : this(a)
    {
        if (b == null)
        {
            throw new ArgumentNullException("b");
        }
    } 
```

# c# - 当搜索词的数量可变时使用 linq 执行基于文本的搜索

> ID：14632454
> 
> 赞同：0
> 
> 时间：2013-01-31T18:17:21.453
> 
> 标签：c#, .net, linq-to-sql

> **可能重复：**
> [LINQ To SQL 异常：本地序列不能在查询运算符的 LINQ to SQL 实现中使用，但 Contains 运算符](https://stackoverflow.com/questions/1712105/linq-to-sql-exception-local-sequence-cannot-be-used-in-linq-to-sql-implementati)

我正在尝试以下查询：

```
var data = (from bk in DataContext.Book
             where ((searchArray.Count() == 0 || searchArray.ToList().Any(x => bk.Name.Contains(x))) ||
                       (searchArray.Count() == 0 || searchArray.ToList().Any(x => bk.Genre.Contains(x))))) 
```

其中 searchArray 是一个包含我要搜索的单个单词的数组，我拆分用户输入的字符串并将结果放入此数组中。每当我尝试运行它时，我都会收到以下错误：“本地序列不能用于查询运算符的 LINQ to SQL 实现中，但包含运算符除外。”

谁能告诉我我做错了什么以及执行此搜索的正确方法是什么？

简而言之，我试图允许用户输入像“Hello World”这样的字符串，并生成一个查询，该查询将查找 hello 或 world 或两者。但是，用户可以输入任意数量的单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:13:26.357

最简单的选择可能是手动构建 lambda 表达式：

```
static class ContainsAny
{
    private static readonly MethodInfo StringContains 
       = typeof(string).GetMethod("Contains", new[] { typeof(string) });

    public static Builder<T> Words<T>(IEnumerable<string> words)
    {
        return new Builder<T>(words);
    }    

    public static Builder<T> Words<T>(params string[] words)
    {
        return new Builder<T>(words);
    }    

    public sealed class Builder<T>
    {
        private static readonly ParameterExpression Parameter 
           = Expression.Parameter(typeof(T), "obj");

        private readonly List<Expression> _properties = new List<Expression>();
        private readonly List<ConstantExpression> _words;

        internal Builder(IEnumerable<string> words)
        {
            _words = words
                .Where(word => !string.IsNullOrEmpty(word))
                .Select(word => Expression.Constant(word))
                .ToList();
        }

        public Builder<T> WithProperty(Expression<Func<T, string>> property)
        {
            if (_words.Count != 0)
            {
                _properties.Add(ReplacementVisitor.Transform(
                    property, property.Parameters[0], Parameter));
            }

            return this;
        }

        private Expression BuildProperty(Expression prop)
        {
            return _words
              .Select(w => (Expression)Expression.Call(prop, StringContains, w))
              .Aggregate(Expression.OrElse);
        }

        public Expression<Func<T, bool>> Build()
        {
            if (_words.Count == 0) return (T obj) => true;

            var body = _properties
                .Select(BuildProperty)
                .Aggregate(Expression.OrElse);

            return Expression.Lambda<Func<T, bool>>(body, Parameter);
        }
    }

    private sealed class ReplacementVisitor : ExpressionVisitor
    {
        private ICollection<ParameterExpression> Parameters { get; set; }
        private Expression Find { get; set; }
        private Expression Replace { get; set; }

        public static Expression Transform(
            LambdaExpression source, 
            Expression find, 
            Expression replace)
        {
            var visitor = new ReplacementVisitor
            {
                Parameters = source.Parameters,
                Find = find,
                Replace = replace,
            };

            return visitor.Visit(source.Body);
        }

        private Expression ReplaceNode(Expression node)
        {
            return (node == Find) ? Replace : node;
        }

        protected override Expression VisitConstant(ConstantExpression node)
        {
            return ReplaceNode(node);
        }

        protected override Expression VisitBinary(BinaryExpression node)
        {
            var result = ReplaceNode(node);
            if (result == node) result = base.VisitBinary(node);
            return result;
        }

        protected override Expression VisitParameter(ParameterExpression node)
        {
            if (Parameters.Contains(node)) return ReplaceNode(node);
            return Parameters.FirstOrDefault(p => p.Name == node.Name) ?? node;
        }
    }
} 
```

使用此代码，您可以调用：

```
Expression<Func<Book, bool>> filter = ContainsAny
    .Words<Book>(searchArray)
    .WithProperty(book => book.Name)
    .WithProperty(book => book.Genre)
    .Build();

var data = DataContext.Book.Where(filter); 
```

例如，如果`searchArray`contains `{ "Hello", "World" }`，生成的 lambda 将是：

```
obj => (obj.Name.Contains("Hello") || obj.Name.Contains("World")) 
   || (obj.Genre.Contains("Hello") || obj.Genre.Contains("World"))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:25:39.150

如果我理解您要正确执行的操作，您应该能够将查询压缩为：

```
from bk in DataContext.Book
where searchArray.Contains(bk.Name) || searchArray.Contains(bk.Genre)
select bk 
```

这基本上等同于 SQL：

```
select bk.*
from Book bk
where bk.Name in (...) or bk.Genre in (...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T18:36:04.377

在您的情况下，您必须结合可能会损害性能的解释查询和本地查询，或者通过在数据库上创建 CLR 函数来使用 SQL CLR 集成。

# ruby-on-rails - 如何从Ruby中的另一个数组中删除一个数组？

> ID：14632457
> 
> 赞同：0
> 
> 时间：2013-01-31T18:17:32.960
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在 Ruby 中有一个嵌套数组：

```
array = [["a", "b"], ["c", "d"]] 
```

我可以使用什么命令从数组中删除包含“a”的嵌套数组？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T18:21:16.147

`array.delete_if{|ary| ary.kind_of?(Array) and ary.include?('a') }` 删除所有包含的数组`"a"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T18:26:43.823

您是否特别想删除`["a", "b"]`，知道它到底是什么，或者您想删除任何和所有包含 的数组，`"a"`无论它们的剩余值如何？目前尚不清楚您的意思是“包含“a”的嵌套数组”作为问题规范的一部分，还是只是一种指示特定示例中的哪些元素您希望得到目标答案的方式。

对于第一个，您可以使用 DigitalRoss 的答案。

第二种，你可以使用 Huluk，但它在另一种方式上过于具体；我会避免`kind_of? Array`测试。如果您知道元素都是数组，那么只需假设它并继续前进，依靠异常来捕获任何异常：

```
array.delete_if { |sub| sub.include? 'a' } 
```

如果您确实需要测试，我会使用鸭子类型而不是显式的类检查：

```
array.delete_if { |item| item.respond_to? :include? and item.include? 'a' } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T18:19:59.510

```
> [["a", "b"], ["c", "d"]] - [["a", "b"]]
 => [["c", "d"]] 
```

如果除了知道它包含“a”之外，您还没有该元素的句柄，您可以执行以下操作：

```
array - [array.find { |x| x.include? "a" }] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T18:26:11.093

试试这个：

```
 array.delete_if { |x| x.include? "a" } 
```

# drupal - 在浏览器中禁用自动完成表单

> ID：14632458
> 
> 赞同：1
> 
> 时间：2013-01-31T18:17:38.303
> 
> 标签：drupal, autocomplete

我有 Drupal 站点，我尝试禁用由浏览器（如 Firefox）生成的自动完成功能。我在表单/输入中输入了 Autocomplete="false" 但没有任何反应，我总是得到自动完成。

这是我的代码

```
<form id="tools-form" accept-charset="UTF-8" method="post" action="/" autocomplete="false">
<div>
<div class="form-item form-type-select form-item-field-specialites">
<input type="hidden" value="form-SRCZMjW2TL0BmIMj1iFynwQk4_QmrVgFr8zzTSIh_a8" name="form_build_id">
<input type="hidden" value="tools_form" name="form_id">
<div class="form-item form-type-radios form-item-field-pays">
<div class="form-item form-type-textfield form-item-field-code-postal" role="application">
<label for="edit-field-code-postal">
<input id="edit-field-code-postal" class="form-text required form-autocomplete" type="text" maxlength="128" size="60" value="" name="field_code_postal" autocomplete="OFF" aria-autocomplete="list"> 
```

* * *

这是我的代码

```
<form id="tools-form" accept-charset="UTF-8" method="post" action="/" autocomplete="false">
<div>
<div class="form-item form-type-select form-item-field-specialites">
<input type="hidden" value="form-SRCZMjW2TL0BmIMj1iFynwQk4_QmrVgFr8zzTSIh_a8" name="form_build_id">
<input type="hidden" value="tools_form" name="form_id">
<div class="form-item form-type-radios form-item-field-pays">
<div class="form-item form-type-textfield form-item-field-code-postal" role="application">
<label for="edit-field-code-postal">
<input id="edit-field-code-postal" class="form-text required form-autocomplete" type="text" maxlength="128" size="60" value="" name="field_code_postal" autocomplete="OFF" aria-autocomplete="list"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:26:36.287

你可以发布一个例子吗？

还可以尝试以下方法：

```
<input type="text" autocomplete"off" /> 
```

[Mozilla](https://developer.mozilla.org/en-US/docs/Mozilla/How_to_Turn_Off_Form_Autocompletion?redirectlocale=en-US&redirectslug=How_to_Turn_Off_Form_Autocompletion)建议使用`"off"`not `"false"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:25:53.880

在 Firefox 中，您可以使用 AutoComplete ="off"

[http://www.hanselman.com/blog/TurningOffAutoCompleteForTextBoxesInIEAndFireFox.aspx](http://www.hanselman.com/blog/TurningOffAutoCompleteForTextBoxesInIEAndFireFox.aspx)

# .htaccess - 更改网站域和重定向

> ID：14632459
> 
> 赞同：1
> 
> 时间：2013-01-31T18:17:40.850
> 
> 标签：.htaccess, redirect, seo

我们正在将一个相当大的网站从已存在很长时间的**domain.one移至****domain.two**。如果人们仍然找到**domain.one**的链接，我们希望他们重定向到**domain.two上的***适当*位置（如果可能）。

 ****切换后不再需要**Domian.one 。**我对移动整个域一无所知，因此可以使用一些建议，了解如何在保持多年来获得的 SEO 的同时进行切换的最佳方式。**

 **任何帮助表示赞赏。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:20:05.727

把它放在你的 web 根目录中的一个 htaccess 文件中。它会将您的用户和搜索引擎转发到新域上的新 URL。

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule (.*) http://www.newdomain.com/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T06:28:16.003

添加 John 发布的以下行。

同时登录google站长工具->配置->地址变更

并在那里更改您的网址，以便 seacrh 引擎结果也随之更改。 **这个非常重要******

# rtsp - 可以在 SETUP 请求之前接收 RTSP TEARDOWN 请求吗？

> ID：14632465
> 
> 赞同：0
> 
> 时间：2013-01-31T18:18:02.113
> 
> 标签：rtsp

我的印象是，由于 TEARDOWN 请求会释放通常在进行 SETUP 时分配的资源，因此仅在 SETUP 请求之后才需要 TEARDOWN 请求。

但是，我只有一个 Android 设备，它在收到 DESCRIBE 请求的响应后立即发送 TEARDOWN（在 SETUP 请求之前，请求的 Session: 参数为空）。

这是出乎意料的，即使重新阅读 RFC，我也无法确认这是否合法。

有人可以提供这方面的信息吗？理想情况下是官方参考...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:31:05.467

服务器通常应该准备好与各种客户端通信，并且设计易于出错的服务器是一个好主意：客户端可能会发送奇怪的命令，服务器应该做出合理的响应。TEARDOWN 停止流式传输，因此在 SETUP 之前发出它是没有意义的，但是在没有 SETUP 的情况下发送此命令仍然是*合法*的，接收它的服务器将无事可做，没有资源可释放。由服务器决定是否响应 200 OK 或指示该命令在此上下文中没有意义的其他状态（例如，提供的会话标识符无效）。

# ruby-on-rails-3 - Rails 路由：一个控制器。一种型号。多条路线

> ID：14632471
> 
> 赞同：3
> 
> 时间：2013-01-31T18:18:22.640
> 
> 标签：ruby-on-rails-3, routing

我有一个名为 Factors 的模型，它有两种类型：`['personal', 'advisor']`

我想要一个控制器`FactorsController`，它对两种类型都具有所有相同的操作`Factors`，但只使用一种类型。它使用的类型基于到达那里的路线。例如，

`/personal`将路由到`factors#index`并填充`@factors`将`Factor.personal` `/advisors`路由到并`factors#index`填充`@factors``Factor.advisors`

我将如何进行设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-27T05:39:32.817

您可以添加到路线

```
type_regexp = Regexp.new([:personal, :advisor].join("|"))
resources :factors, path: ':type', constraints: { type: type_regexp } 
```

并且您将能够`params[:type]`在控制器中使用，这为您提供了灵活性，以防您将来想要更改路线。

这也使您能够`factors_path(type: :personal)`在视图中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T18:41:53.210

您可以将其添加到您的路线：

```
resources :factors, :path => :personal
resources :factors, :path => :advisor 
```

这将同时具有 /personal 和 /advisor。然后，您需要让 factor#index 确定使用了哪个路径（您可以使用`request.url`）并相应地填充`@factors`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-30T23:37:52.667

我将创建三个控制器：

```
class PersonalController < FactorController
  def factor
    Factor.personal
  end
end

class AdvisorController < FactorController
  def factor
    Factor.advisors
  end
end

class FactorController < ApplicationController
  #all the shared stuff here, using the factor method from each in your methods
end 
```

然后路线将是：

```
route '/personal' => PersonalController#index
route '/advisors' => AdvisorController#index 
```

# xml - 我怎样才能获得与 Delphi 7 一起使用的 delphi 数据绑定向导之类的东西？

> ID：14632473
> 
> 赞同：1
> 
> 时间：2013-01-31T18:18:28.900
> 
> 标签：xml, delphi, class, xsd, delphi-7

我需要从 xsd 文件生成 Delphi 7 类，以便我们可以将强类型的 xml 数据导入 Delphi 7 Pro。我们有一个 xml 文件和一个 xsd 文件。

我们只有 Delphi 7 Pro。我听说数据绑定向导（在 D7 Enterprise 中可用）可以通过 XSD 创建这个“xml 类”，因此我们可以将 Xml 导入到强类型的 Delphi 7 类对象中。我们获得数据绑定向导的最经济有效的方法是什么？还是有其他方法？我们不需要 D7 Enterprise 的其他功能。

如果我们使用 C#，我们还可以使用基于 xsd (xsd.exe) 的 ac# 类 DLL... Delphi 7 能否轻松使用 .NET DLL 导入 XML？Microsoft xsd.exe 工具可让您免费生成类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:52:01.110

[Delphi 可以通过Delphi .NET](http://sourceforge.net/projects/delphinet/)包与 .NET 包交互和工作。我过去曾使用过它，尽管它没有得到积极维护，但它很稳定，并且在 Delphi 和 .NET 之间进行通信时效果很好。

虽然我不知道数据绑定向导，因为我只有专业版可用，尽管我在 Torry 的站点上看到了用于解析 XML 的组件，这些组件可以直接在 Delphi 中使用。

# soundcloud - 通过 SoundCloud 的 API 以编程方式设置安静模式选项（评论/统计）

> ID：14632476
> 
> 赞同：1
> 
> 时间：2013-01-31T18:18:33.097
> 
> 标签：soundcloud

我正在将我公司的音频从旧的托管服务提供商迁移到 SoundCloud。我编写了一个脚本来自动化这个过程，它上传音频文件、它的缩略图，并写入所有相关的元数据。

但是，似乎没有任何方法可以以编程方式设置安静模式选项，例如禁用评论或隐藏统计信息。

我从 2012 年 4 月发现[这篇文章](https://stackoverflow.com/questions/10124423/soundcloud-api-tweeting-on-upload-and-disable-comments)，其中提到 API 不支持它。我想知道它是否已经更新了？如果是这样，需要指定哪些字段？例如。类似于 track[title] 或 track[asset_data]。

任何帮助，将不胜感激！

**更新（2013 年 3 月 8 日）**

SoundCloud 的人员已经确认，目前无法通过他们的 API 切换静音模式选项。

# c# - 尝试在数据库中查找值时出错

> ID：14632478
> 
> 赞同：1
> 
> 时间：2013-01-31T18:18:42.267
> 
> 标签：c#, database, compiler-errors

所以我有一个`textbox`和一个`button`。我想在其中输入一个值，它会从被调用的“票证”`textbox`中找到我在其中输入的值。然后我还想在一个名为“Rebateslip”的文件中创建一个“rebateslip”。这有 2 个字段 - 一个是自动递增的，一个是我在其中输入的值（所以基本上我只是将我刚刚找到的值传递到“RebateSlip”表中）。我将所有函数放在一个名为“模型”中，然后在事件处理程序中调用它们。`row``table``object``table``table``id``ticketId``textbox``ticketId``class``button`

```
 public bool rebateslip(int ticketID)
    {
        SqlCommand myCommand = new SqlCommand("SELECT ID FROM ticket WHERE ID = @ticketID", con);
        SqlDataAdapter sqlDa = new SqlDataAdapter(myCommand);

        myCommand.Parameters.AddWithValue("@ticketID", ticketID);
        var reader = myCommand.ExecuteReader();
        return reader.HasRows;

    }

    public void createRebateslip(int ticketId)
    {
        SqlCommand myCommand = new SqlCommand("INSERT INTO RebateSlip (ticketId) VALUES (@ticketId); SELECT SCOPE_IDENTITY();", con);
        myCommand.Parameters.AddWithValue("@ticketId", ticketId);
        string insertID = (myCommand.ExecuteScalar()).ToString();
        rebateSlipList.Add(new RebateSlip(Int32.Parse(insertID), ticketId));
    } 
```

它适用于一个数字，但如果我尝试在其中输入另一个数字，`textbox`则会收到错误消息，已经有一个`DataReader`与命令关联的打开，必须先关闭。这是按钮的代码。如果在表中找到该值，则应创建一个“rebatelip”，但这也不起作用。

```
 private void buttonPrintRebateSlip_Click(object sender, EventArgs e)
    {

        int id;
        if (!int.TryParse(textBoxRebateSlip.Text, out id))
        {
            return;
        }
        if (model.rebateslip(id))
        {
            MessageBox.Show("Found ticket");
            //create rebate slip object
            model.createRebateslip(id);
            textBoxRebateSlip.Clear();
        }
        else
        {
            MessageBox.Show("Ticket not in database");
            textBoxRebateSlip.Clear();
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:22:13.397

[SqlDataReader.Close 方法](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.close.aspx)的摘录：

> 当您通过使用 SqlDataReader 以将关联的 SqlConnection 用于任何其他目的时，您必须显式调用 Close 方法。

你应该使用[`using Statement`](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx).

```
public bool rebateslip(int ticketID)
{
    using(SqlCommand myCommand = new SqlCommand("SELECT ID FROM ticket WHERE ID = @ticketID", con))
    {
        using(SqlDataAdapter sqlDa = new SqlDataAdapter(myCommand))
        {

            myCommand.Parameters.AddWithValue("@ticketID", ticketID);
            using(var reader = myCommand.ExecuteReader())
            {
                return reader.HasRows;
            } 
        }
    }
} 
```

无论如何，您的`sqlDa`SqlDataAdapter 在上下文中毫无意义。可能你只需要：

```
public bool rebateslip(int ticketID)
{
    using(SqlCommand myCommand = new SqlCommand("SELECT ID FROM ticket WHERE ID = @ticketID", con))
    {
        myCommand.Parameters.AddWithValue("@ticketID", ticketID);
        using(var reader = myCommand.ExecuteReader())
        {
            return reader.HasRows;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:23:34.500

`reader.close`一旦你完成它。

另外——你应该使用 a `using`or`try...catch`块

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T18:38:52.590

这样你就永远不会有一个 reader 变量。仍然使用范例更好。

```
 public bool rebateslip(int ticketID)
    {
        SqlCommand myCommand = new SqlCommand("SELECT ID FROM ticket WHERE ID = @ticketID", con);
        SqlDataAdapter sqlDa = new SqlDataAdapter(myCommand);

        myCommand.Parameters.AddWithValue("@ticketID", ticketID);
        return myCommand.ExecuteReader().HasRows;
    }

    public void createRebateslip(int ticketId)
    {
        SqlCommand myCommand = new SqlCommand("INSERT INTO RebateSlip (ticketId) VALUES (@ticketId); SELECT SCOPE_IDENTITY();", con);
        myCommand.Parameters.AddWithValue("@ticketId", ticketId);
        int insertID = (int)myCommand.ExecuteScalar();
        rebateSlipList.Add(new RebateSlip(insertID, ticketId));
    } 
```

此外，您似乎将ticketID 存储在Insert 表中（来自insertID），而insertID 存储在Ticket 表中（来自ticketID）。相反，您应该使用仅存储 insertID 和 ticketID 的第三个表，允许多对多关系，同时允许通过单个操作更改/删除它们。

# web - 寻找一个好的数据可视化网络框架

> ID：14632480
> 
> 赞同：0
> 
> 时间：2013-01-31T18:18:59.083
> 
> 标签：web, data-visualization, graph-visualization

只是想知道是否有人可以为我指出一个用于显示大型网络的好的 Web 框架

*   需要仅显示一小部分网络的能力，但允许以交互方式深入了解网络的某些节点/部分。

*   可选择允许对网络/图形进行交互式编辑；例如，连接节点或断开边。

*   越简单越好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:31:38.210

这是我们的库[mxGraph](http://www.jgraph.com/mxgraph.html)。如果您想要开源，您可以尝试[JIT](http://philogb.github.com/jit/)或[D3](http://d3js.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:26:26.077

我有类似的要求，我测试了大约四个库，包括 d3 和 infoVis/JIT。

我在 d3 和 infoVis 中都使用了强制导向布局。它们都非常接近，但我最终选择了 infoVis/JIT，因为我在 d3 中遇到了一些问题，解决这些问题并不容易。

1：当您在 d3 中有一个包含许多节点的图形时，该图形将在相当长的时间内保持移动/动画。我发现这是因为 d3 图形每刻都有动画。我在这里和论坛中找到了一些解决方案，但解决这个问题并不容易，而且它们对我不起作用。

2：一旦图形被渲染，如果你尝试拖动一个节点，整个图形会移动并动画自己。而我的要求是能够独立拖动和定位单个节点，保持图形不变，以便用户可以根据需要重新排列节点。我在 d3 中找不到任何简单的解决方案。

这两个问题都在 infoVis/JIT 中得到了解决。

@“需要仅显示一小部分网络的能力，但允许以交互方式深入了解网络的某些节点/部分。” 我已经使用 infoVis 实现了这个功能。

# calculator - 卡西欧计算器编程

> ID：14632497
> 
> 赞同：0
> 
> 时间：2013-01-31T18:19:51.000
> 
> 标签：calculator

想为我的卡西欧 fx-9860GII 创建几个程序，但在计算器键盘上打字需要很长时间。是否有任何适用于卡西欧的 SDK 可以让我在计算机上打字？我尝试使用 FX-9860G Manager PLUSS，但这不允许我将应用程序导出到模拟器之外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-15T02:37:54.707

有更好的方法来做到这一点。您可以使用 Casio SDK 编译 C、C++ 和 ASM 程序。这也可以在他们的网站上找到，它们编译成一个插件，当你使用 FA-124 复制它时，它应该出现在菜单上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:11:56.963

我想到了。模拟设备使用 SD 卡（与我的设备不同）。这使我能够将项目从主存储器传输到 SD 卡。尝试这样做可以让我将文件保存在我的计算机上。然后我可以使用 FA-124 应用程序将其传输到我的计算器。

花了几个小时弄清楚这一切......可怕的卡西欧网站。

# ruby - 将 nils 放在数组前面

> ID：14632503
> 
> 赞同：1
> 
> 时间：2013-01-31T18:20:01.833
> 
> 标签：ruby, arrays

我有几个要放入 nil 的数组，以便根据我使用数组的方式，我的索引将进一步放入数组中。有没有更快、更高效、更优雅的方式？

```
(1..@epgroup_overide_count.to_i).each do 
    @grp['Overides'].unshift(nil)
    @grp['channel_overides'].unshift(nil)
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:26:13.770

`#unshift`需要一个 splatted arg 列表来添加多个元素，所以：

```
@group['Overides'].unshift(*([nil]*@epgroup_override_count.to_i)) 
```

这样就可以了（第二个类似）

* * *

分解一个衬里：

`[nil] * @epgroup_override_count.to_i`

将一个数组乘以一个数字会多次复制该数组，但作为一个单一的平面数组 ( `[1,2,3]*3 #=> [1,2,3,1,2,3,1,2,3]`)。要注意的一件事是，如果数组具有变量引用，它会创建对同一对象的多个引用，而不是重复的。

`*(above_multiplied_array)`

使用 splat 运算符将数组传播到方法的 args 中

`arr.unshift(multiple, args, here)`

通过使用 splat 运算符，我们将数组扩展为多个 args 到`#unshift`. 当`#unshift`给定多个参数时，它将所有参数添加到数组中，这是所需的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:44:21.707

您可以执行以下操作：

```
 @grp['Overides'] +=([nil]*@epgroup_override_count.to_i).flatten
 @grp['channel_overides'] += ([nil]*@epgroup_override_count.to_i).flatten

 or

 nil_array = ([nil]*@epgroup_override_count.to_i).flatten
 @grp['Overides'] += nil_array
 @grp['channel_overides'] += nil_array 
```

# javascript - 在 Arshaw FullCalendar 中更改时区

> ID：14632504
> 
> 赞同：6
> 
> 时间：2013-01-31T18:20:03.930
> 
> 标签：javascript, jquery, date, timezone, fullcalendar

据我了解，Arshaw FullCalendar 根据本地计算机操作系统的时区显示事件。我假设这是由 javascript Date() 对象完成的，该对象也基于本地计算机的操作系统。我有一个具有组日历和组时区的应用程序，我希望能够强制每个本地 Arshaw 日历根据该组的时区显示，无论该计算机是什么时区。你怎么做到这一点？

注意：我已经相当彻底地查看了文档，但没有发现这样的选项。我希望 javascript 具有与 php 的 date_default_timezone_set() 等效的功能，在我看来，这就是可以解决的方法。

*编辑 2013 年 1 月 31 日下午 12:23 CST：我将所有内容作为 unix 时间戳发送到日历，所以我假设选项 ignoreTimezone 不会在这里应用，如此 stackoverflow 线程中所述： [jQuery FullCalendar timezone synchronization](https://stackoverflow.com/questions/8840466/jquery-fullcalendar-timezone-synchronization)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T12:24:49.810

您可能应该尝试将选项“ignoreTimezone”设置为“false”，并在 ISO8601 中提供 Arshaw FullCalendar 日期。

您可以在此处获得更多信息：http: [//arshaw.com/fullcalendar/docs/event_data/ignoreTimezone/](http://arshaw.com/fullcalendar/docs/event_data/ignoreTimezone/)

要将 unix 时间戳转换为 ISO8601，您可以在 javascript 中使用它：

```
var d = new Date(1360412434000).toISOString(); 
```

这是 ECMAScript 5。有关兼容性和后备代码，请参见此处：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toISOString](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toISOString)

# jsf - primefaces p：按钮问题

> ID：14632506
> 
> 赞同：0
> 
> 时间：2013-01-31T18:20:12.180
> 
> 标签：jsf, primefaces

当我单击我的按钮时，我在 glassfish 中收到此错误

```
WARNING: #{UserBean.buttonToTutorial}: javax.el.PropertyNotFoundException: /GUI/index.xhtml @61,77 action="#{UserBean.buttonToTutorial}": Target Unreachable, identifier 'UserBean' resolved to null 
```

代码是：

```
 <p:commandButton action="#{UserBean.buttonToTutorial}"/> 
```

在 xhtml 文件中

并在 UserBean.java

```
 public String buttonToTutorial() {
    System.out.println("buttonToTutorial invoked");
    return "tutorial.xhtml";
} 
```

我想做的只是一种将用户从一个页面带到另一个页面的奇特方式，我做错了什么？

UserBean.java 位于根目录/richard.fileupload/UserBean.java

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:42:57.873

在 xhtml 文件中更改`UserBean`为。`userBean`托管 bean 的默认名称是具有较低首字母的类名。

# php - Mysql搜索多行，多表多关键字

> ID：14632509
> 
> 赞同：2
> 
> 时间：2013-01-31T18:20:17.887
> 
> 标签：php, mysql, search

如果可能，我想调整以下 mysql 查询：

```
SELECT * FROM artists,tags WHERE tags.tag_title LIKE '$q' AND artists.art_id=tags.art_id 
```

*   `$q`是用户输入的关键字
*   艺术家是包含艺术家基本信息的表
*   tags 是包含与艺术家相关的关键字的表格（艺术家可以添加多个关键字 - 或短语 - 并且每个关键字存储在不同的行中）

与此查询`tags.tag_title`必须匹配的确切搜索。例如“另类摇滚”将在表格标签中显示所有带有关键字“另类摇滚”的艺术家。没关系。

所以，问题是对于关键字“另类摇滚”，我还想在表格标签的不同行中显示关键字“另类”和“摇滚”的艺术家，而不是关键字“另类”的艺术家和“金属”或关键字“独立”和“摇滚”的艺术家。

这有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:30:57.610

显然这只是一个例子，但我认为你追求的是这样的：

```
SELECT * FROM artisits artist LEFT JOIN tags tag ON tag.artist_id = artist.id WHERE artist.name LIKE '$q' OR tag.name = $q 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:27:36.633

你在寻找这样的东西，

```
 SELECT * FROM artists
 INNER JOIN tags 
 ON artists.art_id=tags.art_id
 WHERE tags.tag_title LIKE '% $q1 %' OR  tags.tag_title LIKE '% $q2 %' 
```

q1 和 q2 是关键字 1 和关键字 2

# html - 是否可以在没有 php 的情况下编写 Wordpress 主题？

> ID：14632510
> 
> 赞同：6
> 
> 时间：2013-01-31T18:20:19.823
> 
> 标签：html, css, wordpress, wordpress-theming

今天刚刚注册了 Wordpress，已经遇到了几个问题。我是前端开发人员，所以我对 php 了解不多（我知道一些非常基础的知识）。我厌倦了弄清楚如何将自己的主题添加到 Wordpress（基本上我听说你只是像往常一样使用 html、css 和 javascript 编写网站，然后将文件上传到 Wordpress）。但是我在任何地方都找不到这个选项，我只能在 Wordpress 中可用的当前主题的 GUI 编辑器中进行更改。谁能解释它是如何工作的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T18:28:19.833

一般的答案是否定的。Wordpress 是用 PHP 构建的，内容使用 PHP 提供给用户。

现在，如果您刚刚开始并且不想学习 PHP，这是我的建议。

找到一个与您希望网站外观相近的主题。然后你可以只修改支持主题的 HTML、CSS 和 JS。如果您不进行重大更改，则应该相当简单。

# php - 复选框、javascript 和 php。不加载结果

> ID：14632511
> 
> 赞同：-1
> 
> 时间：2013-01-31T18:20:26.207
> 
> 标签：php, javascript, checkbox, checked

我有一个javascript代码，它从一组复选框中读取并加载一个php，以防一个或多个复选框被选中。此 php 将仅加载选定的项目。

但是，现在我单击复选框并没有任何反应。我不确定问题是在 php 中还是在 javascript 中。

以下是代码：

复选框：

```
function echoCheckboxSet($header, $divClass, $columnName, $setName) {
include ("../commonItems/connection.php");
$checkboxes = $con -> prepare("SELECT DISTINCT $columnName FROM item_descr ORDER BY $columnName ASC");
$checkboxes->execute();
<?php
while ($box = $checkboxes->fetch(PDO::FETCH_ASSOC)):
$boxColumnName = str_replace('_',' ',$box[$columnName]);
?>
<input type='checkbox' class='regularCheckbox' name='<?php echo $setName; ?>' value='<?php echo $box[$columnName]; ?>' />
<font class='similarItemsText'><?php echo $boxColumnName; ?></font>
<br />
<?php
endwhile;
echoCheckBoxSet("COLOR", "colors", "color_base1", "color");
echoCheckBoxSet("PRICE", "prices", "price", "price");
?> 
```

JAVASCRIPT

```
$(function() {
    $("input[type='checkbox']").on('change', function() {
        var boxes = [];
        // You could save a little time and space by doing this:
        var name = this.name;
        // critical change on next line
        $("input[type='checkbox'][name='"+this.name+"']:checked").each(function() {
            boxes.push(this.value);
        });
        if (boxes.length) {
            $(".loadingItems").fadeIn(300);
            // Change the name here as well
            $(".indexMain").load('indexMain.php?'+this.name+'=' + boxes.join("+"),
            function() {
                $(".indexMain").fadeIn('slow');
                $(".loadingItems").fadeOut(300);
            });

        } else {
            $(".loadingItems").fadeIn(300);
            $(".indexMain").load('indexMain.php', function() {
                $(".indexMain").fadeIn('slow');
                $(".loadingItems").fadeOut(300);
            });
        }
    });
}); 
```

索引（indexMain.php）

```
include('../commonItems/connection.php');
if ($colors != '')
 {

            $colors = explode(' ', $colors);
            $parameters = join(', ', array_fill(0, count($colors), '?'));
            $items = $con -> prepare("SELECT * FROM item_descr WHERE color_base1 IN ({$parameters})");
            $items ->execute($colors);
            $count = $items -> rowCount();

}
while($info = $items->fetch(PDO::FETCH_ASSOC)) 
{
......... echo everything.... 
```

在某些时候，代码工作正常......但现在不是......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:42:33.053

indexMain.php 没有得到传递的变量。

在顶部添加它使其工作：

```
$colors = $_GET['color']; 
```

# ruby - 控制台中未定义的方法？

> ID：14632514
> 
> 赞同：0
> 
> 时间：2013-01-31T18:20:35.287
> 
> 标签：ruby

这是另一个 Codecademy 问题：

提出了以下挑战。

> 在编辑器中定义两个方法：
> 
> 一个接受单个字符串参数 name 并返回一个字符串问候该人的 greeter 方法。（确保使用 return 并且不要使用 print 或 puts。）
> 
> 一个by_three？该方法接受一个整数参数，数字，如果该数字能被三整除，则返回 true，否则返回 false。请记住，使用问号结束产生布尔值的方法名称是 Ruby 的最佳实践。

我在 re: 中输入的代码是..

```
def greeter(name)
   return "Greet #{name}"
end

def by_three?(x)
   if x % 3==0
      returns true
   else
      return false
end

greeter("Brant")
by_three?(6) 
```

然后控制台给我以下错误：

```
Did you define your greeter method? 
```

好像我有。我错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:06:28.993

就是这样：

```
def greeter(name)
  "Greet #{name}"
end

def by_three?(x)
  x % 3 == 0
end

greeter("Brant") # => "Greet Brant"
by_three?(6) # => true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-26T07:15:40.857

看起来您没有在 else 语句后添加“end”。干得好。

```
#For the greeter method, i decided to use this format

def greeter(name)
    return name
end

greeter("Hello Jane, good morning")

def by_three?(number)
    if number % 3 != 1
    return true
    else
        return false
    end #Add end here to end your statement
end

by_three?(5) 
```

# formula - 二次公式程序Java？

> ID：14632517
> 
> 赞同：0
> 
> 时间：2013-01-31T18:20:40.737
> 
> 标签：formula, quadratic

我正在编写一个程序，它从等式中获取 a、b 和 c，并使用它们使用以下公式找到 x： [http](http://www.purplemath.com/modules/quads/qform01.gif) ://www.purplemath.com/modules/quads/qform01.gif 。

我遇到的问题是，当我插入方程 1x^2 +3x +4 时，我得到 x = -Infinity 和 x = infinity 而不是 x = 1 和 x = -4。

这是我的代码：

第一类：

```
 public class quadratictest
    {
        public static void main(String args[])
        {
            DecimalFormat df = new DecimalFormat("#.###");
            System.out.println("--------------------------------------------------");
            System.out.println("               ~Quadratic Formula~");
            System.out.println("--------------------------------------------------");
            System.out.println("in a polynomial, there are 3 important numbers used");
            System.out.println("to figure out x. they are a, b, and c, shown below.\n");
            System.out.println("\t\t1x^2 +3x +4");
            System.out.println("\t\t^     ^   ^");
            System.out.println("\t\ta     b   c");
    Scanner input = new Scanner(System.in);
           System.out.print("\nPlease type a, b, and c here[a b c]: ");
            int a = input.nextInt();
            int b = input.nextInt();
            int c = input.nextInt();
            mathey quad = new quadsong(a,b,c);
        System.out.println("------------");
        System.out.println(quad.solveb());
        System.out.println(quad.solvea());
        //System.out.println("x =" +df.format(quad.solvea()));
        //System.out.println("x =" +df.format(quad.solveb()));
        System.out.println("------------");
    }
} 
```

第 2 类：

```
 import java.util.*;
    import java.io.*;
    import java.text.DecimalFormat;
            /**
     * Write a description of class quadsong here.
     * 
     * @author (your name) 
     * @version (a version number or a date)
     */
    public class mathey
    {
        int a;int b;int c;
        double solution1;
        double solution2;
          public mathey(int aN, int bN, int cN)
        {
            int a  = aN;
            int b = bN;
            int c = cN;
            solvea();
            solveb();
        }
        public double solvea()
        {
         solution1 = ( (b*-1) + Math.sqrt((b^2)-(4*a*c)))/(a+a);
          if (solution1 == Math.floor(solution1))
         {
         return solution1;
        }
        else
        {
            return 0;
        }
        }
            public double solveb()
        {
         solution2 = ( (b*-1) - Math.sqrt((b^2)-(4*a*c)))/(2*a);
         if (solution2 == Math.floor(solution2))
         {
         return solution2;
        }
        else
        {
            return 0;
        }
        }
    } 
```

这是我的输出：

```
 --------------------------------------------------
                   ~Quadratic Formula~
    --------------------------------------------------
    in a polynomial, there are 3 important numbers used
    to figure out x. they are a, b, and c, shown below.

            1x^2 +3x +4
            ^     ^   ^
            a     b   c

    Please type a, b, and c here[a b c]: 1 3 4
    ------------
    x =Infinity
    x =-Infinity
    ------------ 
```

怎么了？提前致谢！PS对不起代码格式，idk为什么它不能像我想要的那样工作哈哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:46:57.133

您在这里遇到的问题是： 1x^2 + 3x + 4 没有根。这更像是一个数学错误。

# mysql - 过度索引 MySQL 表。我该如何补救？

> ID：14632520
> 
> 赞同：0
> 
> 时间：2013-01-31T18:20:48.643
> 
> 标签：mysql, indexing

我有一个有 300 万行和 6 列的表。问题是我的 mysqld 服务器不会为任何查询生成输出，它只会超时。 [然后我在这里](https://stackoverflow.com/a/5446142/157880)
读到，过度索引可能涉及过多地将数据从内存交换到磁盘，并可能导致服务器速度变慢。 所以我运行了一个查询。此查询已运行 10 小时，尚未完成。
`ALTER TABLE <Tbl_name> DROP INDEX <Index_name>;`

1.  这预计会运行这么长时间吗？
2.  有没有更好的方法来删除/更改我的索引？

**编辑 - 添加了 SHOW CREATE TABLE 输出**

```
| Sample | CREATE TABLE `sample` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `FiMD5` varchar(32) NOT NULL,
  `NoMD5` varchar(32) NOT NULL,
  `SeMD5` varchar(32) NOT NULL,
  `SeesMD5` varchar(32) NOT NULL,
  `ImMD5` varchar(32) NOT NULL,
  `Ovlay` tinyint(1) NOT NULL DEFAULT '1',
  PRIMARY KEY (`ID`),
  KEY `FiMD5_3` (`FiMD5`),
  KEY `ID` (`ID`),
  KEY `ID_2` (`ID`),
  KEY `pIndex` (`FiMD5`),
  KEY `FiMD5_` (`FiMD5`,`NoMD5`)
) ENGINE=InnoDB AUTO_INCREMENT=3073630 DEFAULT CHARSET=latin1 | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:26:59.953

也许执行以下操作会更快：

1.  `SELECT ... INTO OUTFILE`第一的
2.  用于`TRUNCATE TABLE`删除所有内容
3.  修改表格
4.  用于`LOAD`恢复数据

如果第 2 步花费的时间太长，可能会删除表并重新创建它。

# r - R 中是否有任何等效的 C/C++ __FILE__ 和 __LINE__ 宏？

> ID：14632521
> 
> 赞同：0
> 
> 时间：2013-01-31T18:20:48.590
> 
> 标签：r, s-plus

我正在尝试在 R（或 S+）中获得 C 或 C++ 中的**FILE**或**LINE宏的等价物。**有任何想法吗？

**FILE**当前源文件的假定名称（字符串文字）。

**LINE**当前源行的假定行号（在当前源文件中）（一个整数常量）。

至于上下文 - 我将日志消息从代码的不同部分刷新到控制台，并且鉴于消息本身是在运行时构建的，通常很难找出该日志消息的来源（使用R 代码的大小增长到数千行并在分布式网格上运行）。但是，如果我可以将 FILE 和 LINE 编号连同日志消息一起转储，那么跟踪日志会容易得多......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:38:17.337

使用`#line`指令。结构是`#line nn "filename"`。有关更多信息，请参阅 Duncan 的 Murdoch[关于源参考的文章](http://journal.r-project.org/archive/2010-2/RJournal_2010-2_Murdoch.pdf)。

# ios - 在首次加载期间将 ios mapview 置于放大模式

> ID：14632522
> 
> 赞同：0
> 
> 时间：2013-01-31T18:20:48.957
> 
> 标签：ios, annotations, mkmapview, html, zooming

你好，我正在做一个 iOS6 内部 iPad 应用程序。在我的 ViewController 上，我有一个滚动视图。在左下角我有一个地图视图（20,594,360,347）。我的滚动视图上的地图视图位置。我有一个获取位置按钮。在放大模式下正确显示位置（它在地图上清楚地显示了我的办公室）。工作正常。我保存记录并打开另一个记录并保存该记录。所以我现在有 2 条记录。这是我的问题。我打开我的第一张唱片，它把地图带入了世界观。我可以看到我的办公室在哪里的注释，然后我放大……放大，我看到我的办公室。它不会将位置直接带入放大模式。我关闭第一条记录并打开第二条记录，它以放大模式进入位置（可以看到我的办公室）。我现在打开第一条记录，我进入放大模式（我可以清楚地看到我的办公室）。

摘要：第一次打开保存的记录以世界视图显示地图，而不是放大模式。

```
- (void)setMap:(CLLocationCoordinate2D)currentCoordinates{ 
....code
[self.nwMapView setMapType:MKMapTypeSatellite];

[self.nwMapView setScrollEnabled:YES];

MKCoordinateRegion extentsRegion = MKCoordinateRegionMakeWithDistance(currentCoordinates, 80, 80);
extentsRegion.span.longitudeDelta = 0.002f;
extentsRegion.span.latitudeDelta = 0.002f;

[self.nwMapView setRegion:extentsRegion animated:NO];
ITMAnnotation *annotation = [[ITMAnnotation alloc] initWithCoordinate:currentCoordinates addressDictionary:nil];
annotation.title = @"Drag to Move Pin";
annotation.subtitle = [NSString stringWithFormat:@"%f %f", annotation.coordinate.latitude, annotation.coordinate.longitude];
NSLog(@"subtitle change at 314");

[self.nwMapView addAnnotation:annotation];
self.tempMapView = self.nwMapView;
} 
```

我应该启用什么设置才能使地图处于放大模式。？如果您需要更多信息，请询问。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:37:42.373

你在什么时候打电话`setMap`？如果您在 viewDidLoad 之前执行此操作，那么您将丢失对 UI 所做的所有设置，因为它尚未加载。加载 VC 后，您可以`setRegion`在地图上执行任何操作。我怀疑您正在使用第二条记录重用 VC，因此它正在调用`setRegion`要使用的地图。

# java - 设置 JButton 动作会改变按钮的大小？

> ID：14632524
> 
> 赞同：1
> 
> 时间：2013-01-31T18:20:58.903
> 
> 标签：java, swing, ssh, jbutton, actionlistener

尝试使用 Netbeans 的可视化 UI 构建器设置 UI，但我想稍后添加动作侦听器和动作事件；在所有组件都已初始化之后。奇怪的是，在我向它们添加动作侦听器之前，所有按钮的大小都是正确的。注意到高度异常的按钮了吗？这些是我添加动作事件的那些。可以在[这里](http://pastebin.com/uDNE0A2D)找到代码。我希望图像在添加动作之前和之后保持其原始高度。 ![注意具有异常高度的按钮。](../Images/b57cfdbc20ac19dd44f7ae32c08cb60c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:25:06.233

更新：改变

```
btnEditCancel.setAction(new AbstractAction() {

    @Override
    public void actionPerformed(ActionEvent e) {
        jpEditSavedLogins.setVisible(false);
    }
}); 
```

到

```
btnEditCancel.addActionListener(new AbstractAction() {

    @Override
    public void actionPerformed(ActionEvent e) {
        jpEditSavedLogins.setVisible(false);
    }
}); 
```

似乎可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T19:09:10.637

更好的是调用`revalidate()`和`repaint()`容器方法，在您将操作设置为按钮后，它会保留您的按钮。

# c# - 使用下拉列表设置字段以选择值

> ID：14632527
> 
> 赞同：1
> 
> 时间：2013-01-31T18:21:12.047
> 
> 标签：c#, asp.net-mvc, web-applications, razor

我正在使用 asp.net mvc 4 web app c#。我有以下模型：

```
 public class Job
{
    public int id { get; set; }
    public string description { get; set; }
    public string company { get; set; }
    public JobType jobType { get; set; }

    //public int JobTypeId { get { return this.jobType.id; } }
} 
```

现在我想编写一个创建操作，其中通过 DropDownList 设置 jobType 属性。创建动作：

```
//
    // GET: /Job/Create

    public ActionResult Create()
    {
        IEnumerable<JobType> jobtypes = db.JobTypes.ToList();
        ViewData.Add("jobTypeList", new SelectList(jobtypes , "id", "name"));
        return View();
    }

    //
    // POST: /Job/Create

    [HttpPost]
    public ActionResult Create(Job job)
    {
        if (ModelState.IsValid)
        {
            db.Jobs.Add(job);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(job);
    } 
```

看法：

```
<div class="editor-label">
        @Html.LabelFor(model => model.jobType)
    </div>
    <div class="editor-field">
        @Html.DropDownList("jobTypeList")
        @Html.ValidationMessageFor(model => model.jobType)
    </div> 
```

DropDownList 可以很好地列出现有的作业类型。但是，当创建作业时，未设置作业的作业类型（作业类型 ID 未在已创建作业的作业行中设置）。由于我是 asp.net mvc 的新手，我不确定表单传递给 post create 操作的内容：它传递的是 jobtype 对象还是 jobtype id？为什么它没有为创建的作业设置jobtype id？我是否必须在创建后操作中设置我自己的作业类型 ID？如果是这样，我如何获得 DropDownList 的选定值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:18:06.960

编辑：

因此，要在下拉列表中获取所选值的 id，我只有这样的一行：

```
int contentId= APIFactory.getContentAPI().getID(department.SelectedValue); 
```

其中函数 getId() 采用名称（下拉列表中的值），然后对所选部门的 id 进行数据库查询。这是我的 getID() 函数

```
public int getID(String deptName)
{
    Dictionary<string, object> where = new Dictionary<string, object>();
    where.Add(DEPTNAME, deptName);
    DataTable dt = db.Query(ID, TABLE, where);
    return (int)dt.Rows[0][ID];
} 
```

注意：您不需要整个 APIFactory 的东西，您可以只输入查询而不是我的行，它也可以正常工作。但是，如果您经常使用相同的查询，我会推荐它。

编辑：由于您使用的是cshtml页面而不是aspx页面，请使用此处描述的方法获取值，然后使用我的方法获取id： [如何获取Dropdownlist选定值](https://stackoverflow.com/questions/7513149/how-to-get-dropdownlist-selected-value)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T19:23:04.433

您现在设置视图的方式，只会发布所选工作类型的 ID。

您可以将 Create 方法更新为仅接受，`int jobTypeList`然后根据提供的值创建添加作业。

# php - 使用变量或不使用 PHP 获取

> ID：14632529
> 
> 赞同：0
> 
> 时间：2013-01-31T18:21:15.427
> 
> 标签：php, variables, fetch

```
$url = isset($_GET["url"]) ? $this->checkValues($_GET["url"]) : $this->jDie();
$query = $this->query("SELECT * FROM `torrents` WHERE `url` = '".$url."'");
$fetch = $this->fetch($query) or $this->rURL('/#invalid-url'); 
```

**版本 1：**

```
<label><input type="checkbox" name="age" value="3" '.($this->contains("3", $fetch['age']) ? 'checked="checked"' : '').' class="age"/><span>3+</span></label>
<label><input type="checkbox" name="age" value="7" '.($this->contains("7", $fetch['age']) ? 'checked="checked"' : '').' class="age"/><span>7+</span></label>
<label><input type="checkbox" name="age" value="12" '.($this->contains("12", $fetch['age']) ? 'checked="checked"' : '').' class="age"/><span>12+</span></label> 
```

**版本 2：**

```
$age = $fetch['age']; 
```

[...]

```
<label><input type="checkbox" name="age" value="3" '.($this->contains("3", $age) ? 'checked="checked"' : '').' class="age"/><span>3+</span></label>
<label><input type="checkbox" name="age" value="7" '.($this->contains("7", $age) ? 'checked="checked"' : '').' class="age"/><span>7+</span></label>
<label><input type="checkbox" name="age" value="12" '.($this->contains("12", $age) ? 'checked="checked"' : '').' class="age"/><span>12+</span></label> 
```

哪种方式更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:23:49.983

由你决定。如果 $this->fetch(query) 不执行任何清理或验证，那么进入 $_GET[] 或 $fetch 基本上是同一件事。尽管进入 $_GET[] 然后使用未经处理的输入通常被看不起，因为它可能导致错误和漏洞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:51:31.803

在确定要编写哪个版本的代码时，我建议您问自己一系列问题。

1.  一个版本是否提供任何类型的性能优势？
2.  一个版本比另一个版本更具可读性吗？
3.  一个版本比另一个版本更易于维护吗？

**对于 #1**，两者基本相等。您在第二个版本中声明了一个新变量，这对性能的影响很小，但不如执行附加查询、读取远程文件等。这将使我更*倾向于*第一个版本，但是这不像我要回顾我的所有代码来尝试删除不必要的声明变量的每个实例以尝试提高性能。

**对于 #2**，在上面的代码中，两者本质上是相等的。另一方面，如果你做了很多`echo`s，你可能想要选择声明变量，因为它*更*容易阅读：

```
echo "You have $num $currency remaining in your $where"; 
```

而不是阅读：

```
echo 'You have ' . $fetch['num'] . ' ' . $fetch['curency'] . ' remaining in your ' . $fetch['where']; 
```

但无论哪种方式，这都不是什么大问题。

**对于 #3**，它并不真正适用，因为它是如此之小且微不足道。但是，在使用 时`$fetch`，维护代码的人对变量的来源比您一直定义新变量有更好的了解，所以我再次*倾向于*第一个，但同样，这没什么大不了的。

# android - Android：在 Shake Listener 类中使用 SharedPreferences

> ID：14632531
> 
> 赞同：3
> 
> 时间：2013-01-31T18:21:15.680
> 
> 标签：android, sharedpreferences

首先，我对 Android 和编程很陌生，所以请放轻松 ;-) 其次，我认为这个网站是救命稻草！好的，现在进入问题的实质......

在我努力尝试更多地了解 Android 开发和使用用户偏好的过程中，我创建了一个运行良好的小应用程序，并且有许多选项可供用户更改以使其看起来不同。但是，我在尝试设置它以允许自定义抖动检测的灵敏度和抖动检测之间的时间时遇到了一些障碍。

我让一切正常，所以如果用户摇晃手机，它就会做我想做的事。以下是我为摇晃检测所做的基础知识（基于 stackoverflow 上的一篇很棒的帖子（[Android：我想摇晃它](https://stackoverflow.com/questions/2317428/android-i-want-to-shake-it)））：

创建了一个名为 ShakeDetector 的新类，并将以下代码放入其中：

```
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.util.FloatMath;

public class ShakeDetector implements SensorEventListener {

/*
 * The gForce that is necessary to register as shake.
 * Must be greater than 1G (one earth gravity unit).
 * You can install "G-Force", by Blake La Pierre
 * from the Google Play Store and run it to see how
 *  many G's it takes to register a shake
 */
private static final float SHAKE_THRESHOLD_GRAVITY = 2.7F;
private static final int SHAKE_SLOP_TIME_MS = 500;
private static final int SHAKE_COUNT_RESET_TIME_MS = 3000;

private OnShakeListener mListener;
private long mShakeTimestamp;
private int mShakeCount;

public void setOnShakeListener(OnShakeListener listener) {
    this.mListener = listener;
}

public interface OnShakeListener {
    public void onShake(int count);
}

@Override
public void onAccuracyChanged(Sensor sensor, int accuracy) {
    // ignore
}

@Override
public void onSensorChanged(SensorEvent event) {

    if (mListener != null) {
        float x = event.values[0];
        float y = event.values[1];
        float z = event.values[2];

        float gX = x / SensorManager.GRAVITY_EARTH;
        float gY = y / SensorManager.GRAVITY_EARTH;
        float gZ = z / SensorManager.GRAVITY_EARTH;

        // gForce will be close to 1 when there is no movement.
        float gForce = FloatMath.sqrt(gX * gX + gY * gY + gZ * gZ);

        if (gForce > SHAKE_THRESHOLD_GRAVITY) {
            final long now = System.currentTimeMillis();
            // ignore shake events too close to each other (500ms)
            if (mShakeTimestamp + SHAKE_SLOP_TIME_MS > now) {
                return;
            }

            // reset the shake count after 3 seconds of no shakes
            if (mShakeTimestamp + SHAKE_COUNT_RESET_TIME_MS < now) {
                mShakeCount = 0;
            }

            mShakeTimestamp = now;
            mShakeCount++;

            mListener.onShake(mShakeCount);
        }
    }
}
} 
```

接下来，我将以下内容放入主要活动的 onCreate 方法中：

```
 // ShakeDetector initialization
    mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
    mAccelerometer = mSensorManager
            .getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
    mShakeDetector = new ShakeDetector();
    mShakeDetector.setOnShakeListener(new OnShakeListener() {

        @Override
        public void onShake(int count) {
            /*
             * The following method, "handleShakeEvent(count):" is a stub //
             * method you would use to setup whatever you want done once the
             * device has been shook.
             */
            handleShakeEvent(count);
        }
    }); 
```

同样，此时一切都按预期工作。但是，我不确定如何在 ShakeDetector 类中设置 SHAKE_THRESHOLD_GRAVITY 和 SHAKE_COUNT_RESET_TIME_MS 以使用我已经在应用程序中设置的共享首选项。一切都在应用程序中配置（并且有效）以允许用户进入并为这两个设置选择不同的值，但我不确定如何将 SharedPreferences 设置从活动传递到此类。我尝试了许多不同的事情，但没有运气，我似乎无法在网上找到任何详细说明如何做到这一点的东西。这可能是相当简单的事情，但我没有太多运气弄清楚。

简而言之，我尝试在 ShakeDetector 类中创建另一个方法（例如 setShakePreferences()），然后在其中放入类似于以下内容的代码：

```
 public void setShakePreferences() {

    shake_sensitivity = myPrefs.getString(SHAKE_THRESHOLD_GRAVITY2, "2.7");
    shake_time_between = myPrefs.getString(SHAKE_COUNT_RESET_TIME_MS2, "3000");
    float shake_threshold_gravity = Float.valueOf(shake_sensitivity);
    int shake_count_reset_time_ms = Integer.valueOf(shake_time_between);

} 
```

我尝试过以各种不同的方式传入 SharedPreferences（例如 setShakePreferences(SharedPreferences myPrefs)），但是，我为使 myPrefs 实际包含 SharedPreferences 所做的一切似乎最终都以 myPrefs 的空值结束。我的主要活动中有一些设置是通过用户首选项控制的，并且我有与上面类似的方法工作得很好。我只是不确定如何将 myPrefs 设置为 ShakeDetector 类中的实际 SharedPreferences 值。

请帮忙。解决方案的详细代码示例最能帮助我理解如何实现这一点。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:11:08.473

在阅读了有关如何实现接口的更多信息后，弄清楚了这一点。一旦我弄清楚它实际上非常简单（不知道为什么我一开始就没有抓住它）。

基本上，我修改了 onCreate() 以按如下方式传递 sharedPreferences（只是添加了“this.myPrefs”作为参数）：

```
 // ShakeDetector initialization
    mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
    mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
    mShakeDetector = new ShakeDetector();
    mShakeDetector.setOnShakeListener(new OnShakeListener() {

        @Override
        public void onShake(int count) {
            /*
             * The following method, "handleShakeEvent(count):" is a stub //
             * method you would use to setup whatever you want done once the
             * device has been shook.
             */
            handleShakeEvent(count);
        }
    }, this.myPrefs); // <<<--- ADDED IT HERE 
```

然后我必须修改 ShakeDetector 类中的 setOnShakeListener 以接受 myPrefs 作为参数并添加所有内容，以便它可以正确处理变量。这就是我最终得到的结果：

```
import android.content.SharedPreferences;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.util.FloatMath;
import android.util.Log;

public class ShakeDetector implements SensorEventListener {

/*
 * The gForce that is necessary to register as shake.
 * Must be greater than 1G (one earth gravity unit).
 * You can install "G-Force", by Blake La Pierre
 * from the Google Play Store and run it to see how
 *  many G's it takes to register a shake
 */
private static final String SHAKE_THRESHOLD_GRAVITY = "<replace this with the android:key value you have configured in you preferences XML file.>";
private static final String SHAKE_COUNT_RESET_TIME_MS = "<replace this with the android:key value you have configured in you preferences XML file.>";
private static final String SHAKE_SLOP_TIME_MS = "<replace this with the android:key value you have configured in you preferences XML file.>";

private OnShakeListener mListener;
private long mShakeTimestamp;
private int mShakeCount;
private SharedPreferences myPrefs;

public void setOnShakeListener(OnShakeListener listener, SharedPreferences myPrefs) {
    this.mListener = listener;
    this.myPrefs = myPrefs;
}

public interface OnShakeListener {
    public void onShake(int count);
}

@Override
public void onAccuracyChanged(Sensor sensor, int accuracy) {
    // ignore
}

@Override
public void onSensorChanged(SensorEvent event) {

    if (mListener != null) {
        float x = event.values[0];
        float y = event.values[1];
        float z = event.values[2];

        float gX = x / SensorManager.GRAVITY_EARTH;
        float gY = y / SensorManager.GRAVITY_EARTH;
        float gZ = z / SensorManager.GRAVITY_EARTH;

        // gForce will be close to 1 when there is no movement.
        float gForce = FloatMath.sqrt(gX * gX + gY * gY + gZ * gZ);

        if (gForce > Float.parseFloat(myPrefs.getString(SHAKE_THRESHOLD_GRAVITY, "2.7F"))) {
            final long now = System.currentTimeMillis();
            // ignore shake events too close to each other (500ms)
            if (mShakeTimestamp + Integer.parseInt(myPrefs.getString(SHAKE_SLOP_TIME_MS, "500")) > now) {
                return;
            }

            // reset the shake count after 3 seconds of no shakes
            if (mShakeTimestamp + Integer.parseInt(myPrefs.getString(SHAKE_COUNT_RESET_TIME_MS, "3000")) < now) {
                mShakeCount = 0;
            }

            mShakeTimestamp = now;
            mShakeCount++;

            mListener.onShake(mShakeCount);
        }
    }
}
} 
```

如果其他人想知道，希望这会有所帮助。

# sql-server - 使用 Access MDB 文件的 SSIS 先有鸡还是先有蛋的情况

> ID：14632532
> 
> 赞同：2
> 
> 时间：2013-01-31T18:21:23.690
> 
> 标签：sql-server, ssis

我开发了一个 SSIS 2012 包，它：

1) 运行可执行文件以创建 Access MDB 文件（基于从 PDF 中提取的数据）

2) 使用数据流将MDB文件中的表加载到SQL Server表中。

我遇到的问题是，第一次运行作业时，MDB 文件不存在，因为创建它的可执行文件尚未运行。因此，如果我尝试运行该程序包，它无法验证 Access 数据库并且它会失败。

我想也许如果我在 Access 数据源上设置“延迟验证”属性可能会有所帮助，但没有骰子。

我发现解决此问题的唯一方法是将 MDB 文件的空副本放在服务器上。然后包验证 OK 并继续用新副本覆盖 MDB。

这有效，但看起来很俗气。一定会有更好的办法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:33:57.283

Connection Manager 将 DelayValidation 设置为 true，但是包中的可执行文件仍会尝试验证并失败。在包的属性中，将`DelayValidation`属性更改为`True`。

# perl - 错误：不能使用未定义的值作为数组引用

> ID：14632534
> 
> 赞同：3
> 
> 时间：2013-01-31T18:21:33.303
> 
> 标签：perl

我正在编写必须通过或失败测试用例的脚本。所以我在一个变量中有一些价值，这个变量是 undef。

我正在检查这样的事情：

我有一个`$val`哈希数组。现在我正在检查该数组是否为空：

```
if(@$val<=0){do something} 
```

因此，如果那样`$val = undef`，则会引发错误：

> 不能使用未定义的值作为 ARRAY 引用

我应该如何检查我`$val`的是否为空？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T18:27:37.290

如果要检查标量是否为 undef，请使用[`defined`](http://perldoc.perl.org/functions/defined.html)运算符。

```
if ( not defined $val ) { 
    # do something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T18:27:24.847

回答您可能提出的问题有两个部分。

首先，无条件地创建数组引用。如果您可能会被传入`undef`，`$val`请将其提升为代码中的空数组引用，例如`$val // []`.

然后，检查是否`@$val`为非零。非零表示数组中有元素。按照惯例，这被表述为真值测试：

```
unless (@{ $val // [] }) {
    ... # stuff to do if the array is empty
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T18:23:16.987

利用

```
 use strict;
 use warnings; 
```

在文件的顶部，他们可能会告诉您问题所在。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-03-01T14:34:48.220

您可以为此尝试“存在”功能：http: [//perldoc.perl.org/functions/exists.html](http://perldoc.perl.org/functions/exists.html)

此函数检查您的数组引用是否存在于哈希数组中

```
 if(exists @$val<=0) {do something}
    else {print "$val is an undefined reference";} 
```

# .net - MVC4 Azure 网站上的 STS

> ID：14632543
> 
> 赞同：2
> 
> 时间：2013-01-31T18:22:23.197
> 
> 标签：.net, azure, asp.net-mvc-4, claims-based-identity

我一直试图让 STS 在 Azure 网站上运行。所以我使用默认的 Internet 模板创建了一个 MVC4 应用程序。然后，我在 Azure 中创建了一个 STS，并使用 Identity and Access 菜单来设置联合安全性。然后，我将 [Authorize] 标记添加到控制器中的方法中，并且浏览器被正确重定向到 STS，我可以在其中输入我的 LiveId 帐户。但后来我得到这个错误

```
 An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code

[CryptographicException: The data protection operation was unsuccessful. This may have been caused by not having the user profile loaded for the current thread's user context, which may be the case when the thread is impersonating.]

[InvalidOperationException: ID1074: A CryptographicException occurred when attempting to encrypt the cookie using the ProtectedData API (see inner exception for details). If you are using IIS 7.5, this could be due to the loadUserProfile setting on the Application Pool being set to false. ] 
```

我已经尝试了很多方法来让它工作，我认为我缺少一些小东西。有没有人遇到过这个问题并有解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T08:34:02.867

通过关注这个博客解决了这个问题

[http://blogs.msdn.com/b/vbertocci/archive/2013/01/28/running-wif-based-apps-in-windows-azure-web-sites.aspx](http://blogs.msdn.com/b/vbertocci/archive/2013/01/28/running-wif-based-apps-in-windows-azure-web-sites.aspx)

> 如果您使用的是 VS2012 的身份和访问工具，只需转到“配置”选项卡并选中“启用 Web 场就绪 cookie”框</p>

# javascript - 如何在浏览器打开新选项卡上捕获目标网址

> ID：14632547
> 
> 赞同：2
> 
> 时间：2013-01-31T18:22:30.483
> 
> 标签：javascript, jquery

是否可以在浏览器打开新选项卡事件中使用 JavaScript 或 Jquery 捕获超链接的属性？

假设我有一个超链接`<a href="http://example.com/something">MyLink</a>`，使用右键单击链接并打开新标签应该首先提醒“ `http://example.com`”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:27:53.260

我认为这只能通过编写浏览器扩展来实现。你无法用 JavaScript 控制这类事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T18:52:48.420

好的，所以这是我能想到的最好的，但它并不漂亮。

让页面上的所有链接都指向另一个页面（我们称之为redir.html）。redir.html 通过 URL 传递了一个参数，该参数定义了它应该打开的页面，例如`redir.html?page=www.example.com/something`. redir.html 然后执行您想要的任何 JavaScript，也许只有在新选项卡/窗口中打开它时。这可以通过检查是否 来检测`window.history.length === 1`。

*redir.html：*

```
<script>
function getParameter(param) {
            var val = document.URL;
            var url = val.substr(val.indexOf(param))  
            var n=url.replace(param+"=","");
            return n;
}
var page = getParameter("page");
if(window.history.length === 1)
{
    alert("I opened in a new tab or window");
}

window.location.href = page;
</script> 
```

*源页面上的示例锚标记：*

```
<a href="redir.html?page=http://example.com/something">My link</a> 
```

（我`getParameter`从[这个 SO 帖子](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)中得到了这个功能。）

# c# - GridView 中的超链接列

> ID：14632548
> 
> 赞同：1
> 
> 时间：2013-01-31T18:22:32.933
> 
> 标签：c#, asp.net, gridview, hyperlink

我在 GridView`FirstName`和`LastName`. 我希望 FirstName 列中的所有行都位于超链接中。我已经尝试过了，但没有奏效。我该怎么做 ？

解析器错误

```
Parser Error Message: Databinding expressions are only supported on objects 
that have a  DataBinding event. System.Web.UI.WebControls.HyperLinkField does not
have a DataBinding event. 
```

代码：

```
<asp:GridView ID="CustomersGridView" runat="server" AutoGenerateColumns="False">
        <Columns>

        <asp:BoundField DataField="FirstName" HeaderText="First Name" />
        <asp:BoundField DataField="LastName" HeaderText="Last Name" />

        <asp:HyperLinkField Text='<%# Eval("FirstName") %>' />

    </Columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T18:31:31.347

试试这个..

```
<asp:HyperLinkField 
      DataTextField="FirstName" 
      HeaderText="First Name" 
      SortExpression="FirstName" 
      DataNavigateUrlFields="FirstNameID" 
      DataNavigateUrlFormatString="PersonDetails.aspx?FirstNameID={0}" /> //use if you want to nevigate to other page 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:24:50.307

尝试使用该[`DataTextField`属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlinkfield.datatextfield.aspx)：

```
<asp:HyperLinkField DataTextField="FirstName" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T18:25:26.810

您需要将其转换为模板字段：

```
<asp:GridView ID="CustomersGridView" runat="server" AutoGenerateColumns="False">
   <Columns>
      <asp:BoundField DataField="FirstName" HeaderText="First Name" />
      <asp:BoundField DataField="LastName" HeaderText="Last Name" />
      <asp:TemplateField HeaderText="FirstName" SortExpression="FirstName">
         <asp:itemtemplate>
            <asp:HyperLinkField Text='<%# Eval("FirstName") %>' />
    ... 
```

# android - 将 ListView 项目设置为列表顶部的动画

> ID：14632551
> 
> 赞同：1
> 
> 时间：2013-01-31T18:22:41.760
> 
> 标签：android

我正在开展一项活动，您可以在其中与联系人共享内容。我显示了一个由光标支持的联系人列表。

要求是在单击时将项目（联系人）动画到列表顶部。看起来像这样

![在此处输入图像描述](../Images/ab66aa6115da451871c34dbe28600d1d.png)

我面临的问题是 1\. 如何通过列表视图制作动画和项目。2.如何从光标中删除和项目。我得到这样的联系方式

```
contentResolver.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,null,null, null); 
```

让列表以这种方式工作有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T15:49:51.507

为了滚动到所选项目，您可以使用以下侦听器

```
 private AdapterView.OnItemClickListener clickListener = new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
            int initial_position = adapterView.getFirstVisiblePosition();
            int delta = i - initial_position;

            ((ListView)adapterView).smoothScrollByOffset(delta);
        }
    }; 
```

（请注意需要 API 11 级）。

相反，要从光标中删除项目，您应该删除相关的联系人，但我认为这不是您想要的。

# xslt - 在谓词的 XSLT 2.0 中，如何比较具有命名空间的属性？

> ID：14632554
> 
> 赞同：3
> 
> 时间：2013-01-31T18:22:50.260
> 
> 标签：xslt

我有以下部分 xpath 表达式

```
IAAXML:party[@xsi:type='IAAXML:Organization'] 
```

我的源 XML 是：

```
<IAAXML:party xsi:type="IAAXML:Organization"> 
```

使用这样声明的命名空间：

```
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
```

我收到以下错误：

```
The operand types are not compatible for the = operator 
```

如何使用命名空间对该属性进行比较？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T22:58:46.887

JLRishe 基本上已经给了你答案，但我会放大它。该`xsi:type`属性的类型为 QName。因此，在模式感知处理器中，您的比较是 QName 和字符串之间的类型比较，出于非常好的原因，这是不允许的。毕竟，您的应用程序逻辑不应该真正依赖于源文档使用名称空间前缀 IAAXML 而不是作者选择的其他前缀这一事实。鉴于您有一个类型感知处理器，最好进行 QName 比较：

```
[@xsi:type = QName("http://the-iaaxml-namespace/", "Organization")] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T03:49:09.973

Michael Kay 更彻底地解释了这个问题的原因，但正如我推测的那样，某些处理器将`xsi:type`属性视为对模式类型的引用（正如 Michael 澄清的那样，它由它们的 QName 标识）。所以这就是为什么处理器不会让你只将它与字符串值进行比较。假设您在源文档和该字符串值中对该类型的名称空间使用相同的名称空间前缀，听起来这很有效（并且应该适用于任何处理器）：

```
IAAXML:party[string(@xsi:type) = 'IAAXML:Organization'] 
```

但是 Michael 的建议将 QName 与命名空间 URI 一起使用在像您这样的模式感知处理器中将是一种更强大的方法。

# algorithm - 生成所有可能的 0 和 1 组合的算法，用于任意长度的数字

> ID：14632555
> 
> 赞同：6
> 
> 时间：2013-01-31T18:23:11.730
> 
> 标签：algorithm

我想知道如何打印 n 个 1 和 0 的组合。组合的数量`n`是用户定义的。预期的输出是；

n=1；

```
0,1 
```

n=2；

```
00,01,10,11 
```

n=3；

```
000,001,010,011,100,101,110,111 
```

等等……等等……

输出将具有`2^n`多种组合（其中 n 是单个组合中的预期位数）。

如何在不使用任何内置函数的情况下做到这一点？这个问题与语言无关，是针对算法的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-31T18:24:56.860

您可以枚举所有数字，直到`2^n - 1`二进制。这将使您获得相同的组合。

`n = 2`枚举直到`2^3 - 1`=`7` 转换为二进制：

```
000 --> 0
001 --> 1
010 --> 2
011 --> 3
100 --> 4
101 --> 5
110 --> 6
111 --> 7 
```

**编辑**：也修复了位数。这有效

```
#include <stdio.h>
#define LENGTH 3
void print_binary(int n)
{
        int bit = 1<<LENGTH - 1;
        while ( bit ) {
        printf("%d", n & bit ? 1 : 0);
        bit >>= 1;
        }
        printf("\n");
}
int main(){
    int n = 1<<LENGTH, i; 
    for(i=0;i<n;i++)
        print_binary(i);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T21:29:58.313

如果你不关心速度和内存，你冷使用递归，这会导致一个小而短的解决方案：

```
public static void print01PermutationsUpToLength(final String currentString, final int upTo) {
    if (upTo == 0) {
        System.out.println(currentString);
        return;
    }
    print01PermutationsUpToLength(currentString + "0", upTo - 1);
    print01PermutationsUpToLength(currentString + "1", upTo - 1);
} 
```

（java。显然，这可以在允许递归和按值调用或字符串副本的每种语言中完成）

如果你不喜欢这个`String`参数，你可以添加一个 start 函数：

```
public static void print01PermutationsUpToLength(final int upTo) {
    print01PermutationsUpToLength("", upTo);
} 
```

结果：

```
final int upToLength = 3;
print01PermutationsUpToLength(upToLength);
000
001
010
011
100
101
110
111 
```

可以根据需要更改格式，这只是为了更好地查看结果。如果您切换字符串构造 ( )
的部分，则可以更改顺序。`currentString + "0"`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T18:42:44.267

```
void print_digit(int n,int digits)
{
   int i;
   for(i=0;i<digits;i++)
   { 
       if(n&(1<<(digits-i-1)))
       {
           putchar('1');
       }
       else
       {
           putchar('0');
       }
   }
}

print all_digits(int e)
{
   for(i=0;i<(1<<e);i++)
   {
        print_digit(i,e);
        putchar('\n');
   }
   fflush(stdout);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-09T15:50:44.773

这是我对这个问题的看法。给定一个字符数组，并且您想使用整个数组找到它的 k 个组合。为了解决这个问题，我们的数组包含：`['0','1']`。

假设我们有一个`char set[] = new {'0','1'};`

以下方法将为您提供任意数量的零和一组合。我已经用 0 和 1 的组合以及 50 个字符的数据集对其进行了测试。

```
public  void printLengthRec(char[] inputSet, String prefix, int k) {
    int sizeOfInputArray=inputSet.length;
    //TerminationCase: k is 0, print prefix
    if (k == 0) {
        System.out.println(prefix);
        return;
    }    
    // One by one add all characters from set and recursively 
    // call for k equals to k-1
    for (int i = 0; i < 2; ++i) {
        // Next character of input added
        String newPrefix = prefix + set[i]; 
        printLengthRec(inputSet, newPrefix, k - 1); 
    }
} 
```

# mysql - Mysql：从列表中查找大多数的所有者

> ID：14632566
> 
> 赞同：0
> 
> 时间：2013-01-31T18:23:34.860
> 
> 标签：mysql, sql, query-optimization

我正在尝试从列表中找到尽可能多的项目的所有者。

现在看起来像：

```
SELECT Players.`name` FROM `Items` INNER JOIN `Players` ON Players.`id` = Items.`ownerId`
WHERE Players.`lvl` < Y 
GROUP BY `ownerId` HAVING SUM(lookId IN(81411,81421 (lots of it) 81551,81611)) > X 
```

它返回列表中拥有超过 X 个项目的玩家的姓名。

如果它不会返回任何行，这意味着我们需要太多的项目，所以我用 X-1 再试一次。

如果它将返回 >15 行，我们可以尝试从列表中查找拥有超过 X+1 个项目的玩家。

起始 X 是根据列表的大小计算的。

项目有大约 600k 行。

还有其他方法吗？现在需要> 1秒，所以当启动X错误时，整个过程可能需要几秒钟......

编辑：

项目：

```
CREATE TABLE IF NOT EXISTS `Items` (
  `id` int(11) NOT NULL,
  `ownerId` int(11) NOT NULL,
  `itemType` int(11) NOT NULL,
  `itemClass` int(11) NOT NULL,
  `itemId` int(11) NOT NULL,
  `itemColor` int(11) NOT NULL,
  `attrId1` int(11) NOT NULL,
  `attrId2` int(11) NOT NULL,
  `attrId3` int(11) NOT NULL,
  `attr1` int(11) NOT NULL,
  `attr2` int(11) NOT NULL,
  `attr3` int(11) NOT NULL,
  `isArtifact` tinyint(1) NOT NULL,
  `armor` int(11) NOT NULL,
  `minDmg` int(11) NOT NULL,
  `maxDmg` int(11) NOT NULL,
  `lookId` mediumint(7) NOT NULL,
  PRIMARY KEY (`id`,`ownerId`),
  KEY `ownerId` (`ownerId`),
  KEY `lookId` (`lookId`)
) ENGINE=InnoDB; 
```

我不明白样本数据和所需输出的意思。查询看起来和这个完全一样，只是 IN() 列表有 1 到 3200 个成员。需要的输出？列表中包含最多项目的玩家名称列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:53:38.920

如果没有问题的更多细节（表结构、示例数据、所需输出等），就不可能给出具体的答案，但是在字里行间阅读我建议将 lookId 标准添加到 where 子句 -

```
SELECT
    `Players`.`name`,
    COUNT(`lookId`) AS `num_items`
FROM `Items`
INNER JOIN `Players` ON `Players`.`id` = `Items`.`ownerId`
WHERE `Players`.`lvl` < Y
AND `lookId` IN (81411,81421 (lots of it) 81551,81611)
GROUP BY `ownerId`
ORDER BY `num_items` DESC
LIMIT 15 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:59:39.680

像这样的东西可能会起作用：

```
SELECT Players.`name` 
FROM `Items` INNER JOIN `Players` ON Players.`id` = Items.`ownerId`
WHERE Players.`lvl` < Y 
GROUP BY `ownerId` 
HAVING SUM(lookid) >= 
(select max(ownersum) - optional number goes here

from 

(select ownerid, sum(lookid) ownersum
FROM `Items` INNER JOIN `Players` ON Players.`id` = Items.`ownerId`
WHERE Players.`lvl` < Y 
group by ownerid
) 
) 
```

我实际上没有尝试过这个。一个或两个子查询可能需要别名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T19:07:25.540

在这一点上，如果您正在寻找该列表中拥有最多物品的玩家，或者您正在寻找列表中拥有超过 X 个物品的玩家，我也有点困惑？

在前者的情况下，以下可能就足够了：

```
SELECT p.name,
       COUNT(*) itemCount
FROM   players p 
       JOIN items i ON p.id=i.ownerid 
WHERE  p.lvl < _your_Y-value_
       AND lookID IN ( _your_list_ )
GROUP BY i.ownerid
ORDER BY itemCount DESC
LIMIT 1 
```

# javascript - 调整 Twitter bootsrap Dropdown Nav 菜单运行时的一些 CSS

> ID：14632568
> 
> 赞同：0
> 
> 时间：2013-01-31T18:23:37.253
> 
> 标签：javascript, jquery, twitter-bootstrap

当 Twitter Bootsrap 中的导航下拉菜单完成操作后，我想使用 JS 对 CSS 进行一些调整。（即当它完全关闭、完全打开或子菜单操作之一完成时）。

我想我想做的并不是特别相关，但它基本上只是与改变背景 div 的高度以匹配下拉菜单的高度有关。

我已经查看了引导程序崩溃 jquery，但它真的太复杂了，我无法弄清楚。如果有更简单的方法可以实现这一目标，谁能告诉我应该关注什么。

这是相关代码：我想要做的是在这个下拉列表完全扩展时触发一些东西

```
<div class="navbar">
<div class="navbar-inner">
<div class="container">

<!-- .btn-navbar is used as the toggle for collapsed navbar content -->
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</a>

<!-- Be sure to leave the brand out there if you want it shown -->
<a class="brand" href="#">Project name</a>

<!-- Everything you want hidden at 940px or less, place within here -->
<div class="nav-collapse collapse">
<nav >
<ul class="nav">
    <li ><a href="#">Home</a></li>
    <li ><a href="#">About</a></li>
    <li ><a href="#">Pages</a></li>
    <li >Pages</a>
    <ul class="sub-menu">
        <li ><a href="">Quamquam tu hanc copiosiorem</a></li>
        <li ><a href="">Quamquam tu hanc copiosiorem</a></li>
        <li ><a href="">Quamquam tu hanc copiosiorem</a></li>
    </ul>
    </li>
</ul> 
```

```
</div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:55:10.613

您需要查看代码的“下拉**类定义**”部分下的 boostrap.js 文件。

在查看代码时，类似这样的内容应该可以帮助您入门。

```
$("a.dropdown-toggle").on('click.dropdown.data-api','', function(r) { 
      console.log(r) 
}) 
```

从 bootstrap.js 中的代码来看，这将在下拉菜单被隐藏时触发。

```
$('html').on('click.dropdown.data-api', function () { 
   ///... 
}) 
```

如果您正在寻找折叠的东西，那么您需要查看“ **COLLAPSIBLE DATA-API** ”选项。

# javascript - 主干视图的声明式授权（权限）

> ID：14632572
> 
> 赞同：3
> 
> 时间：2013-01-31T18:24:04.220
> 
> 标签：javascript, templates, backbone.js, cancan, declarative

前言：任何来自 Rails 社区的人都可能熟悉服务器端的 cancan 用于声明模型操作的授权。IE。可以吗？（：阅读，项目）

背景：但是，在前端的 UI 层中，我没有找到任何提供相同类型的抽象来处理用户看到的内容和他们有权做的事情（显然总是有一个后端身份验证层）。例如，您是否向用户显示按钮？我们是否包含“contenteditable”元素属性？如果用户点击“喜欢”，我们是尝试注册还是向他们显示登录对话框？

问题：有谁知道处理此类 UI 问题的框架/工具/库/最佳实践？

跟进：问题是否在视图或模板中得到评估？这是模板语言的特性还是我们传入模板的一组布尔变量？

顺便说一句：我有一个 cancan 模仿工具的想法，其中方法签名类似于 App.can('like',project,user)，其中 project 和 user 是 BB 模型对象。但问题可能是用户可能能够对任何给定对象执行的不同操作的数量。IE。喜欢项目、编辑项目、评论项目、邀请朋友加入项目等。其中一些可以简化为 RESTful 操作，但我认为大多数人会同意 UI 呈现更多类型的操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-30T16:15:18.320

我们在项目中遇到了同样的情况，页面中的所有内容都应该根据授予用户的权限显示和隐藏，这是我想出的解决方案。

您需要先在用户中保存权限并在客户端加载它们；然后您可以按如下方式检查它们

1-在基本视图中声明“filterByPermission”函数（所有视图都应该继承这个）

```
class SampleProject.Views.BaseView extends Backbone.View

  filterByPermission:=>
    #these views will be removed incase user does not have a specific permission
    if @views_permissions?
      for permission, selector of @views_permissions
        unless SampleProject.current_user.has_permission permission
          @$(selector).remove()

    #these views will be removed incase user has a specific permission
    if @remove_views_permissions?
      for permission, selector of @remove_views_permissions
        if SampleProject.current_user.has_permission permission
          @$(selector).remove() 
```

2-然后您可以进入另一个继承基本视图的视图并在“views_permissions”中定义您的权限（类似于事件哈希）

```
class SampleProject.Views.UsersIndex extends SampleProject.Views.BaseView
  views_permissions:
    "create_users":  "#js_create_user_li, #new_user_modal"
    "import_users": "#js_import_btn_li, #import_form_li"
    "edit_users"  :  "#edit_user_modal"
    "delete_users"  :  "#js_delete_user_li, .js-user-selector-header"

  render:=>
    #render your view here
    @filterByPermission() 
```

3 渲染视图后调用@filterByPermission()。

这样您就可以在一个地方根据权限控制视图，而无需在整个代码中添加 if 语句

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:08:58.743

不确定到底有哪些框架，但您可以让 Rails 或您使用的任何服务器端框架将您的权限呈现为`JavaScript`对象。

例如：

```
var userAuth = { userId: 1234, userType: 'Admin',
                 /** A little more complex permission scenario */
                 privileges: [{ProjectA: 'admin'}, 
                              {ProjectB: 'user'}, 
                              {ProjectC: 'noaccess'}]}; 
```

因此，在您的视图或模板中，您可以根据当前登录用户的权限以声明方式呈现一段 UI 元素。`Underscore`例如，使用模板，您可以执行一些 JavaScript 逻辑和检查。

```
/** Operate using a declared variable */
<% if (userAuth.userType === 'Admin') {%>
    <div>This is only shown to admin.</div>
<% } %>

/** OR operate on the actual property on the working model */
<% if (myModelProperty === 'Admin') {%>
    <div>This is only shown to admin.</div>
<% } %> 
```

这种类型的检查也可以在实际中进行，`View`以根据用户等限制某些功能。

# c++ - Code::Blocks_Linker 错误无法找到 C0X32.obj

> ID：14632581
> 
> 赞同：0
> 
> 时间：2013-01-31T18:24:37.433
> 
> 标签：c++, codeblocks

我正在使用 Code::Blocks IDE 以 Borland 5.5 作为编译器来编写 C++ 程序。当我构建一个程序时，它显示：'致命：无法打开文件'C0X32.OBJ'

我在网上搜索，他们说我应该在“属性”选项卡下的“编译器和调试器”下的链接器设置中包含它的路径。

我这样做了，但错误仍然存​​在。

此外，在构建日志中，它与其他 lib 文件一起显示 C0X32.obj 的路径：' -------------- Clean: Debug in Proj -------- --------

清理“项目 - 调试”

-------------- 构建：在 Proj 中调试 ---------------

```
bcc32.exe -q -w -x  -v    -I"C:\Program Files\Borland\BDS\4.0\include" -  
IC:\Borland\BCC55\Include -IC:\Borland\BCC55\Bin -IC:\Borland\BCC55\Lib -
IC:\Borland\BCC55\Lib\PSDK  -oobj\Debug\main.obj -c main.cpp
main.cpp:

bcc32.exe -q -w -x  -v    -I"C:\Program Files\Borland\BDS\4.0\include" -
IC:\Borland\BCC55\Include -IC:\Borland\BCC55\Bin -IC:\Borland\BCC55\Lib -
IC:\Borland\BCC55\Lib\PSDK  -oobj\Debug\Helloworld.obj -c Helloworld.cpp
Helloworld.cpp: 
```

//这里还提到了其他lib文件。基本上所有存在于lib文件夹中的文件都包含在链接器设置中。........ C:\Borland\BCC55\Lib\C0X32.OBJ

我不明白，C0X32.obj 存在，它出现在构建日志中，但仍然显示找不到 C0X32.obj。这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-27T13:14:42.253

在 Borland IDE 中，单击 Options-->Project-->Directories 并在 Include 和 Library 字段中分别输入完整路径为 C:\Borland\BCC55\include 和 C:\Borland\BCC55\lib （通常只有“C :" 从完整路径中丢失）。单击确定以保存更改。您已完成并准备好使用编译器。

当安装过程中出现一些问题（报告）并且无法记录完整路径时，可能会出现此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-16T19:29:59.573

如果您正在命令行上进行编译，这就是我似乎正在做的事情，那么解决方案非常简单：使用 -L 选项作为编译器命令行（bcc32.exe）来引用目录所在的目录编译器库位于。查看您的编译命令行，我们清楚地注意到您正在使用 -I 选项，因此只需将其更改为 -L (-LC:\Borland\BCC55\Lib)。

# django - 从不同视图访问时，Django request.user 变为匿名

> ID：14632590
> 
> 赞同：0
> 
> 时间：2013-01-31T18:25:31.753
> 
> 标签：django, request

我在此视图中对用户进行身份验证：

```
def note_edit_auth(request):
        if request.method == 'POST':
                form = EditAuthForm(request.POST)
                if form.is_valid():
                        email = form.cleaned_data['email']
                        password = form.cleaned_data['password']
                        user = auth.authenticate(username = email, password = password)

                        if user and user.is_authenticated():
                                request.session['email'] = email
                                request.session['password'] = password
                                request.session['user'] = user
                                return HttpResponseRedirect('/note_edit')
                        else:
                                return HttpResponse('User or password is either incorrect or does not exist.') 
```

它有效。`user`确实是经过认证的。所以然后我尝试`request.user`从上面的视图重定向到这样的另一个视图访问：

```
def note_edit(request):
        if request.method == 'POST' and request.user.is_authenticated():
                form_edit = EditForm(request.POST)
                user = request.session['email']
                auth.logout(request)
                return HttpResponse('Done!')
        elif request.method == 'GET' and request.user.is_authenticated():
                form_edit = EditForm(irrelevantfoofoo)
        else:
                return HttpResponse('User not authenticated.')
        return render_to_response('editnote.htm', {'form': form_edit}, context_instance = RequestContext(request)) 
```

突然我得到用户未通过身份验证的响应。当我尝试打印`request.user`到控制台时，它显示为 AnonymousUser。我骗你，这昨晚工作得很好。今天我醒来，做了一些改变，它开始行为不端。我还原了所有更改，但它仍然行为不端。

为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:10:41.003

`auth.authenticate()`只检查提供的用户凭据是否有效。要实际登录用户，您必须使用[`login()`](https://docs.djangoproject.com/en/dev/topics/auth/default/#django.contrib.auth.login).

# c# - MVC 4 强类型视图不为控制器传递模型

> ID：14632593
> 
> 赞同：2
> 
> 时间：2013-01-31T18:25:39.790
> 
> 标签：c#, asp.net, asp.net-mvc-4, model-binding

不久前，我在当前的 MVC 4 项目中构建了一个维护请求功能。它工作得很好，所以当我需要添加另一个类似的工具请求功能时，我遵循相同的组合，只是稍微修改了表和模型属性等。现在由于某种原因，在工具请求控制器中，模型绑定似乎都不起作用（每个 httppost 方法接收到正在传递的模型的空值）。

对于该功能，我创建了 3 个模型。本质上，一个包含所有请求的列表，一个是每个请求本身的模型以及与之关联的注释列表，然后第三个是注释模型。

楷模：

```
 namespace TeamPortal.Models
{
    public class ToolingRequestModels
    {
        public List<ToolingRequestModel> ToolingRequests { get; set; }
        public SelectList Sources { get; set; }
        public SelectList Assignees { get; set; }
        public SelectList DefectTypes { get; set; }

        public ToolingRequestModels()
        {
            TeamPortalService TPsvc = new TeamPortalService();

            Sources = new SelectList(TPsvc.GetToolingRequestSources(), "Text", "Value");
            Assignees = new SelectList(TPsvc.GetToolingRequestAssignees(), "Text", "Value");
            DefectTypes = new SelectList(TPsvc.GetToolingRequestDefectTypes(), "Text", "Value");
        }

        public ToolingRequestModels(string ListType)
        {
            ToolingRequestModels baseModel = new ToolingRequestModels();

            TeamPortalService TPsvc = new TeamPortalService();

            List<int> RequestIDList = TPsvc.GetToolingRequests(ListType);

            List<ToolingRequestModel> tempToolingRequests = new List<ToolingRequestModel>();
            foreach (int requestID in RequestIDList)
            {
                ToolingRequestModel tempToolingRequestModel = new ToolingRequestModel(requestID, baseModel.Sources, baseModel.Assignees, baseModel.DefectTypes);
                tempToolingRequests.Add(tempToolingRequestModel);
            }
            ToolingRequests = tempToolingRequests;
        }
    }

    public class ToolingRequestModel
    {
        public int RequestID { get; set; }
        public string Requester { get; set; }
        public DateTime RequestDate { get; set; }
        public string Summary { get; set; }

        public SelectList Sources { get; set; }
        public string Source { get; set; }

        public string Description { get; set; }

        public SelectList Assignees { get; set; }
        public string AssignedTo { get; set; }

        public SelectList DefectTypes { get; set; }
        public string DefectType { get; set; }

        public string Status { get; set; }
        public string Model { get; set; }
        public DateTime? CompletionDate { get; set; }
        public bool CloseRequest { get; set; }

        public string AddNote { get; set; }
        public List<ToolingNoteModel> Notes { get; set; }

        public ToolingRequestModel()
        {
            TeamPortalService TPsvc = new TeamPortalService();

            Sources = new SelectList(TPsvc.GetToolingRequestSources(), "Text", "Value");
            Assignees = new SelectList(TPsvc.GetToolingRequestAssignees(), "Text", "Value");
            DefectTypes = new SelectList(TPsvc.GetToolingRequestDefectTypes(), "Text", "Value");
        }

        public ToolingRequestModel(int requestID, SelectList slSources, SelectList slAssignees, SelectList slDefectTypes)
        {
            TeamPortalService TPsvc = new TeamPortalService();

            ToolingRequestModel modelDetails = TPsvc.GetToolingRequestDetails(requestID);

            RequestID = requestID;
            Requester = modelDetails.Requester;
            RequestDate = modelDetails.RequestDate;
            Summary = modelDetails.Summary;
            Sources = slSources;
            Source = modelDetails.Source;
            Description = modelDetails.Description;
            Assignees = slAssignees;
            AssignedTo = modelDetails.AssignedTo;
            DefectTypes = slDefectTypes;
            DefectType = modelDetails.DefectType;
            Status = modelDetails.Status;
            Model = modelDetails.Model;
            CompletionDate = modelDetails.CompletionDate;

            Notes = TPsvc.GetToolingRequestNotes(requestID);

        }
    }

    public class ToolingNoteModel
    {
        public int ToolingNoteID { get; set; }
        public int RequestID { get; set; }
        public string NoteText { get; set; }
        public string NoteAuthor { get; set; }
        public DateTime NoteCreateDate { get; set; }
    }
} 
```

为了简化事情，我们可以只查看控制器和视图以添加新请求，但是模型绑定在尝试更新请求时也会失败。相当直接的输入表单，它确实有一个检查来验证我们是否有模型输入的记录，并且没有找到记录，调用 get 控制器方法并显示错误消息。

控制器：

```
 [ValidateInput(false)]
    public virtual ActionResult ToolingRequestAdd(bool? requestAdd, bool? badModel)
    {
        ToolingRequestModel model = new ToolingRequestModel();

        if (requestAdd == true)
        {
            ViewBag.RequestAdd = true;
        }
        else
        {
            ViewBag.RequestAdd = false;
        }

        if (badModel == true)
        {
            ViewBag.BadModel = true;
        }
        else
        {
            ViewBag.BadModel = false;
        }

        return View(model);
    }

    [HttpPost]
    [ValidateInput(false)]
    public virtual ActionResult ToolingRequestAdd(ToolingRequestModel model)
    {
        TeamPortalService TPsvc = new TeamPortalService();
        GP10Service gp10svc = new GP10Service();

        model.Requester = User.Identity.Name;
        model.RequestDate = DateTime.Now;
        model.Status = "New";

        if (gp10svc.CheckModelCode(model.Model))
        {
            return RedirectToAction("ToolingRequestAdd", new
            {
                requestAdd = false,
                badModel = true
            });
        }

        TPsvc.SaveToolingRequest(model);

        return RedirectToAction("ToolingRequestAdd", new
        {
            requestAdd = true
        });
    } 
```

这是视图：

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/FixedColumn.Master" Inherits="System.Web.Mvc.ViewPage<TeamPortal.Models.ToolingRequestModel>" %>

<asp:Content ID="Content3" ContentPlaceHolderID="HeadContent" runat="server">
</asp:Content>

<asp:Content ID="Content4" ContentPlaceHolderID="LeftContent" runat="server">
        <% Html.RenderPartial("LocalNavToolingRequests"); %>
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="RightContent" runat="server">

<div class="box">
        <!-- box / title -->
        <div class="title">
            <h5>
                Add Tooling Request</h5>
        </div>
        <%if (ViewBag.RequestAdd)
          { %>
              <div class="messages"><div id="successes0" class="message message-success"><div class="image"><img height="32" src="/Content/images/icons/success.png"></div><div class="text"><h6>Success</h6><span>Tooling Request Saved Successfully.</span></div><div class="dismiss"><a href="#successes0"></a></div></div></div>
        <%  } %>
        <%if (ViewBag.BadModel)
          { %>
              <div class="messages"><div id="errors0" class="message message-error"><div class="image"><img height="32" src="/Content/images/icons/error.png"></div><div class="text"><h6>Error</h6><span>The Spa Model Code Entered Was Invalid.  Verify The Model Is Still Active And The 3 Digits Are Correct.</span></div><div class="dismiss"><a href="#errors0"></a></div></div></div>
        <%  } %>

        <% using (Html.BeginForm())
           { %>

           <div class="form">
            <div class="fields">

            <div class="field  field-first">
                <div class="label">
                    <label>Request Summary:</label>
                </div>
                <div class="textbox">
                    <%: Html.TextBoxFor(m=>m.Summary) %>
                </div>
            </div>

            <div class="field">
                <div class="label">
                    <label>Model:</label>
                </div>
                <div class="textbox">
                    <%: Html.TextBoxFor(m=>m.Model) %>
                </div>
            </div>

            <div class="field">
                <div class="label">
                    <label>Source:</label>
                </div>
                <div class="select">
                    <%: Html.DropDownListFor(m => m.Source, Model.Sources)%>
                </div>
            </div>

            <div class="field">
                <div class="label">
                    <label>Defect Type:</label>
                </div>
                <div class="select">
                    <%: Html.DropDownListFor(m => m.DefectType, Model.DefectTypes)%>
                </div>
            </div>

            <div class="field">
                <div class="label">
                    <label>Description:</label>
                </div>
                <div class="textarea textarea-editor">
                    <%: Html.TextAreaFor(m => m.Description, 12, 70, new { @class = "tinymce-simple" })%>
                </div>
            </div>

            <% if (HttpContext.Current.User.IsInRole("Tooling"))
               { %>
            <div class="field">
                <div class="label">
                    <label>Assign Request To:</label>
                </div>
                <div class="select">
                    <%: Html.DropDownListFor(m => m.AssignedTo, Model.Assignees)%>
                </div>
            </div>
            <%} %>

            </div>
           </div>
           <input id="submit" name="submit" type="submit" value="Submit Request" />
       <%} %>

</div>

</asp:Content> 
```

作为一种解决方法，我可以使用 FormCollection 重新创建一个新模型并在保存或重定向之前填充所需的属性，但是我真的很想知道我在哪里出错了（加上 FormCollection 很痛苦）。

很奇怪，在维护请求正常工作的情况下这会失败。我认为复制我以前的过程会节省我的时间......

希望这个问题不是“过于本地化”，似乎它可能取决于解决方案，如果是这种情况，我可以在其他地方重新发布。

任何帮助都会很棒，如果我包含了足够（或太多）的代码/信息，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:42:50.630

当默认模型绑定器无法解析要绑定到哪个控制器参数时，它将无法绑定（返回 null）。

从您的 View 代码看来，您还必须有一个名为 的模型属性`Model`。我会说这是在默认模型绑定器中与您`model`在`ToolingRequestAdd`HttpPost 控制器中的参数名称发生冲突。

如果您将参数名称从更改为`model`其他名称`toolingRequestModel`，我想这会解决问题。

例如：

```
[HttpPost]
[ValidateInput(false)]
public virtual ActionResult ToolingRequestAdd(ToolingRequestModel toolingRequestModel)
{
    TeamPortalService TPsvc = new TeamPortalService();
    GP10Service gp10svc = new GP10Service();

    toolingRequestModel.Requester = User.Identity.Name;
                         .
                         .
                         . 
```

# jquery - jQuery中的输入问题

> ID：14632595
> 
> 赞同：2
> 
> 时间：2013-01-31T18:25:47.723
> 
> 标签：jquery, syntax, input

对学习 jQuery 有点陌生，我写了这个脚本。

```
<script type="text/javascript">
    $(document).ready(function(){
        alert($("#myInput").value);
        alert($("#myInput").length);
    });
</script>

<input id="myInput" value="Hello, World!" type="text" /> 
```

我不知道为什么它总是向我显示：

```
undefined
1 
```

虽然预期的输出是：

```
Hello, World!
13 
```

请给我建议。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T18:27:09.180

`value`不是有效的 jQuery 方法。你可能想要：

```
$(document).ready(function() {
    alert($("#myInput").val());
    alert($("#myInput").val().length);
}); 
```

该`.val`方法（没有传递参数）返回匹配元素的当前值（如果适用）。使用普通/基本 Javascript，您将`.value`在元素对象上使用，但`$()`返回一个与`HTMLElement`(从 中返回的内容`document.getElementById`) 完全不同的“jQuery 对象”。因此 jQuery 对象没有`value`属性并返回`undefined`. 而`document.getElementById("myInput").value`（并`.length`在最后添加）会为你工作。

该`.length`属性是 Javascript（和数组）中字符串变量的基本属性。由于从返回的结果`$()`是一个类似数组的对象，它有一个`length`属性表示有多少元素匹配您的选择器。在您的情况下，它匹配 1，即 id 为“myInput”的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:29:17.473

您可以使用`val()`jQuery 对象的方法，尝试这样的事情：

```
$(document).ready(function(){
    var value = $("#myInput").val()
    alert('Value: ' + value);
    alert('Value: ' + value.length);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T18:27:12.300

此类问题已被多次讨论和回答。总是，在回答之前做一个搜索。让我给你一些建议。

1.  当你有不同类型的它们，如文本框、复选框、单选、文本区域时，你有内置函数[`.val()`](http://api.jquery.com/val/)，主要用于获取表单输入的当前值，并且它们中的每一个都使用不同的类型。因此，以这种方式更改您的第一个脚本：

    ```
    alert($("#myInput").val()); 
    ```

2.  返回的对象`$("#myInput")`将是一个 jQuery 元素集合。所以，只有一个`<input type="text" id="myInput" />`。您需要使用`$("#myInput").val().length`, 并给出文本框中值的长度。因此，将您的第二个脚本更改为：

    ```
    alert($("#myInput").val().length); 
    ```

# c# - 绑定到布尔值的可见性的 TargetNullValue

> ID：14632597
> 
> 赞同：8
> 
> 时间：2013-01-31T18:25:49.400
> 
> 标签：c#, .net, wpf, xaml, visibility

我有一个`Grid`其`Visibility`属性使用 a 绑定到某个模型的布尔属性`Converter`：

```
<Grid Visibility="{Binding ElementName=MyTreeView, Path=SelectedItem.MyBoolProperty, Converter={StaticResource boolToVisConverter}}">
    <!-- child elements -->
</Grid> 
```

选择my 中的元素时效果很好`TreeView`，但如果未选择任何内容或`TreeView`为空，则默认为可见。我需要默认隐藏它。我试过使用`TargetNullValue=Hidden`，但它不起作用。我想我只是不明白`TargetNullValue`在这种情况下该属性应该如何工作。

有人知道如何获得我正在寻找的功能吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-31T18:39:39.983

我花了几个小时试图弄清楚这一点。然后，当然，在我发布问题之后，我就`FallbackValue=Hidden`可以`Binding`使用`Grid`.

# php - 您能否帮助修改此代码以允许地址和邮政编码搜索？

> ID：14632606
> 
> 赞同：0
> 
> 时间：2013-01-31T18:26:22.347
> 
> 标签：php, regex

我仍在为以下这些规则而苦苦挣扎。

规则：如果满足以下条件之一，任何 6 个或更多字符的搜索文本都将被解释为 ID：所有字符都是数字，或除第三个字符（D 或 N）外的所有数字，或除第三个字符外的所有数字除第 10 和第 11 个字符为 GG 之外的字符 除第 3 个字符为 D 或 N 以及第 10 和第 11 个字符为 GG 之外的所有数字

ID 将被重新格式化如下： 如果所有数字，在第二个数字后插入空格（例如，67 00488780011） 如果第三个字符是 D 或 N，第二个数字后没有空格（例如，14N00339902009） 如果第 10 个和第 11 个字符是 GG，两个空格在 GG 之前（例如，14 8725 GG0544）如果第 3 个字符是 D 或 N，并且第 10 个和第 11 个字符是 GG，则在第 2 个数字之后没有空格，但在 GG 之前有两个空格（例如，14N0156 GG0390）

这是我到目前为止的代码。

```
function format($matches)
{
    return $matches[1][0].(strlen($matches[2][0])>0?$matches[2][0]:" ").$matches[3][0].(strlen($matches[4][0])>0?"  ".$matches[4][0]:"");
}

// CONSTRUCT A REGULAR EXPRESSION
$pattern
= '/'         // regex delimiter
. '('         // START of a capture group
. '\d{2}'     // exactly two digits
. ')'         // END of capture group
. '('         // START SECOND capture group
. '[\sND]?'     // letters "D" OR "N" in any order or number - This is optional
. ')'         // END SECOND capture group
. '('         // START THIRD capture group
. '\d*'       // any number of digits
. ')'         // END THIRD capture group
. '('         // START FOURTH capture group
. 'GG'        // the letters "GG" EXACTLY
. '[\d]*'     // any number of digits
. ')'         // END THIRD capture group
. '?'         // make the LAST capture group OPTIONAL
. '/'         // regex delimiter
;

// create an array of matches
preg_match_all($pattern, $_GET['id'], $matches);

// REFORMAT the array
$id = format($matches); 
```

现在，我需要的只是将 $id 添加到我的查询中作为搜索过滤器。

这应该工作的方式是您在搜索框中输入一个 ID，然后点击 GO。如果该 ID 有效，则该 ID 应根据上述规则重新格式化并显示为链接。

我上面的正则表达式可以很好地重新格式化，但有一些问题我无法解决。

1，如果代码正常工作，每次搜索应该只显示 ID。但是，搜索会产生多个 ID，而您搜索的 ID 恰好是其中之一。2、用户还可以通过5位邮政编码和地址进行搜索，例如123 Gregory drive。使用上述代码重新格式化后，用户将无法再使用地址或邮政编码进行搜索。

代码肯定有问题，但我似乎无法弄清楚。

提前感谢您对我的耐心和您的帮助。

```
$patterns = array(
    '/^(\d\d)(\d{4,})$/',
    '/^(?=.{6,}$)(\d\d[\dDN]\d*)(GG\d*)$/'
);

$replacements = array( '$1 $2', '$1  $2' );

$_GET['id'] = $id;

$id = preg_replace( $patterns, $replacements, $_GET['id'] ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:30:17.407

更新了以下评论反馈：

据我所知，以下将执行所需的替换：

```
$patterns = array(
    '/^(\d\d)(\d{4,})$/',
    '/^(?=.{6,}$)(\d\d)(\d*)(GG\d*)$/',
    '/^(?=.{6,}$)(\d\d[DN]\d*)(GG\d*)$/'
); 

$replacements = array( '$1 $2', '$1 $2  $3', '$1  $2' );    

$id = preg_replace( $patterns, $replacements, $_GET['id'] ); 
```

`/^(\d\d)(\d{4,})$/`如果字符串包含 6 个或更多数字，则 第一个正则表达式 ,将匹配。

如果字符串包含 6 个或更多字符且所有字符都是数字，则第二个表达式将匹配，但在第二个字符之后 GG 可能会出现一次而不是两个数字。

如果字符串包含 6 个或更多字符，其中除第三个字符为 D 或 N 之外的所有字符都是数字，并且第三个字符之后 GG 可能出现一次代替两位数，则第三个表达式将匹配。

如果字符串与任一表达式都不匹配，则不进行替换。

在`$replacements`数组 items 中，`$1`指的是第一个捕获组中的数字，`$2`第二个和`$3`第三个。

在将输入传递给`preg_replace`.

# php - 在服务器上安装了 APC php 扩展，但找不到文件来编辑设置 - apc.ini

> ID：14632609
> 
> 赞同：0
> 
> 时间：2013-01-31T18:26:32.600
> 
> 标签：php, apc, whm

我已经在专用服务器上安装了 APC 扩展 - 管理员使用 WHM，扩展已启用，但我可以找到一个文件来编辑基本设置 - 如果我尝试将除 extension=apc.so 之外的任何内容添加到 php.ini文件网站崩溃..？

我跑了 ~find 。-name apc.ini 但没有找到文件..

任何想法谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:44:32.490

这是将 apc 设置添加到我不包括 apc.enabled=1 的 php.ini 文件时的配置错误

# android - 在android中的单个片段内的gridviews之间进行通信

> ID：14632611
> 
> 赞同：0
> 
> 时间：2013-01-31T18:26:37.153
> 
> 标签：android, android-fragments, android-gridview

我有一个使用 Android 支持框架的 ViewPager，它加载了三个片段。用户可以通过滑动在它们之间导航。

第二个片段包含两个 GridView，每个都使用一个 Adapter 填充 Button。

这两个 GridView 被命名为（在 XML 中）left_buttons 和 right_buttons。left_buttons 由扩展 BaseAdapter 的 CategoryAdapter 控制，而 right_buttons 由也扩展 BaseAdapter 的 ItemAdapter 控制。

我遇到的问题是，当用户单击 CategoryAdapter 中的按钮时，我想在 ItemAdapter 上调用 notifyDataSetChanged()，然后在关联的 GridView 上调用 invalidateViews()。因为这两个适配器是在同一个片段 MenuFragment 中创建的，所以我正在努力寻找在它们之间进行通信的最佳方式。

我已经看到了很多关于片段之间、片段和活动之间的通信等等的答案。我尝试从 CategoryAdapter 中获取对 R.id.right_buttons 的引用，但找不到解决方案（因为无法访问 findViewById 等）。

然后，我阅读了一些建议我需要在 Fragment 中创建方法的答案，因此我在 MenuFragment.class 中尝试了以下操作：

```
public void updateRightGrid() {

//grab a reference to the right hand grid right_buttons
GridView rightButtons = (GridView) getView().findViewById(R.id.right_buttons);

    //get the adapter that is controlling right_buttons
ItemAdapter menuItemAdapter = (ItemAdapter) rightButtons.getAdapter();

    //tell this adapter that we have some new data, so please refresh
menuItemAdapter.notifyDataSetChanged();

//force the grid to refresh
rightButtons.invalidateViews();

} 
```

问题是我仍然找不到从 CategoryAdapter 调用此方法的方法。我创建了一个实现 OnClickListener 的内部类，并且在 public void onClick(View v) 中我试图调用该片段的方法 updateRightGrid()。我可以通过变量 mContext 访问上下文，但这似乎没有帮助。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:36:16.447

您可能在适配器中有活动的上下文，因此您可以在活动中创建一个方法，例如：

```
//your activity code
public void notifyItemAdapter() {
    itemAdapter.notifyDataSetChanged() ;
} 
```

然后在您的 CategoryAdapter 中：

```
//adapter code
activityContext.notifyItemAdapter(); 
```

# php - 名称的正则表达式匹配

> ID：14632612
> 
> 赞同：-1
> 
> 时间：2013-01-31T18:26:37.653
> 
> 标签：php, regex

我有这样的名字和姓氏验证

```
regex_match[/^[a-zA-Z \'-()]{0,25}+$/] 
```

有没有我错过的角色？我怎么知道名字和姓氏可以例外的字符。

还是名称有 regex_match？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:28:24.777

尝试这个

```
regex_match[^[A-Z]'?[- a-zA-Z]( [a-zA-Z])*$] 
```

如果你需要像 Jérémie O'Co-nor 这样的名字

尝试这个

```
regex_match[^([ \u00c0-\u01ffa-zA-Z'\-])+$] 
```

# sql - 来自 UPDATE 查询的“SQL 命令未正确结束”错误

> ID：14632621
> 
> 赞同：0
> 
> 时间：2013-01-31T18:27:08.057
> 
> 标签：sql, sql-server

我正在尝试在 VB.NET 代码中更新 SQL Server 表中的多行。`SELECT`但是，在包含更多语句之前，我专注于更新一行。我了解以下方法非常灵活，但会抛出错误“SQL 命令未正确结束”：

```
UPDATE ndcs 
SET    PACKAGE_TYPE_CODE = x.package_type_code, 
       PACKAGE_DESC = x.package_desc, 
       COMMENTS = x.comments 
FROM   hub_non_dcs_product_pkgtype ndcs 
       INNER JOIN (SELECT PRODUCT_ID = 'SEN0982_pdf_1', 
                          PACKAGE_TYPE_CODE = '', 
                          PACKAGE_DESC = '', 
                          COMMENTS = 'DPDC LITERATURE') x 
               ON x.product_id = ndcs.product_id 
```

我的语法有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:52:08.363

尝试这个：

```
UPDATE ndcs 
SET (PACKAGE_TYPE_CODE, PACKAGE_DESC, COMMENTS )  = (
SELECT
    x.package_type_code, 
    x.package_desc, 
    x.comments 
FROM   
    hub_non_dcs_product_pkgtype ndcs 
    INNER JOIN (SELECT PRODUCT_ID = 'SEN0982_pdf_1', 
                      PACKAGE_TYPE_CODE = '', 
                      PACKAGE_DESC = '', 
                      COMMENTS = 'DPDC LITERATURE') x 
           ON x.product_id = ndcs.product_id 
) 
```

# python - 对电子邮件的优先级列表进行排名

> ID：14632624
> 
> 赞同：1
> 
> 时间：2013-01-31T18:27:09.813
> 
> 标签：python, machine-learning, regression, ranking

我正在尝试用 Python 制作一个简单的电子邮件排名程序（类似于优先收件箱）。根据从发件人收到电子邮件的频率，例如有一个训练集，比如说 50%，其中计算发件人的频率，然后是一个 50% 的测试集，它根据训练按顺序排列（所以一封电子邮件来自发送大量消息的发件人排名很高）。

我编写了一些 Python 代码来接收电子邮件并从中提取“发件人”地址。我已将此信息放在一个列表中，该列表显示了最常见的电子邮件发件人（下面此列表中的示例片段）。

```
 //(Email address, frequency of emails received from this sender)//Not Code
 ('tester1@csmining.org', 244)
 ('tester2@csmining.org', 162)
 ('tester3@csmining.org', 154)
 ('tester4@csmining.org', 75)
 ('tester5@csmining.org', 50) 
```

我知道可以有效地使用许多机器学习算法来训练和测试我的数据以完成我需要的工作。但是，我不确定我可以使用其中哪些来给我最好的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T20:44:11.067

仅基于发件人的排名绝不是一个好主意。对于我自己，我从 github commit 订阅电子邮件通知。由于同事的代码提交，我每天都会收到数百封电子邮件。

这从来都不是一个简单的问题，根据我的经验，即使是 Gmail 优先收件箱也做得不好。一个好的电子邮件优先级排名或评分系统需要好的功能。我将建议从以下功能开始。请参阅[Gmail 优先收件箱背后的学习](http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//pubs/archive/36955.pdf)：

*   社交功能。发件人或发件人域；
*   线程功能。此电子邮件是否在活动线程中？这封邮件在线程中的序号是多少？如果有的话，谁是抄送的用户？
*   时间特征。这封邮件是什么时候收到的？如果您有权访问所有者的回复，则可能需要跟踪所有者回复所需的时间。
*   内容功能。这是垃圾邮件过滤中使用的词袋模型。
*   行为。这是电子邮件帐户所有者对电子邮件的响应方式。回复了吗？还是从没读过？还是立即删除？或归档到不同的文件夹？标记？如果回复了，您可能还想进行一些内容分析。回复的长度也可能是一个很好的功能。

对于回归模型，Gmail 使用线性逻辑回归来保持学习和预测的可扩展性。

最后，就像 Gmail 所做的那样，您可以要求用户通过为他们提供标记重要电子邮件的选项来帮助您改进系统。

进一步阅读：

*   [了解电子邮件使用：预测对消息的操作](http://sfussell.hci.cornell.edu/pubs/Manuscripts/Dabbish_CHI2005.pdf)
*   [Gmail 优先收件箱背后的学习](http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//pubs/archive/36955.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T19:51:41.207

我的理解是，您想将电子邮件分类为重要或不重要。因此，首先您必须手动将每封电子邮件标记为重要或不重要。然后您需要定义每封电子邮件的特征并提取它们。在您的情况下，您要考虑的一项功能是发件人。所以你最终会得到如下数据：

`('tester1@csmining.org', important)
('tester1@csmining.org', normal)
('tester1@csmining.org', important)
('tester1@csmining.org', normal)
('tester1@csmining.org', normal)
('tester2@csmining.org', normal)
('tester3@csmining.org', important)
('tester4@csmining.org', important)
('tester5@csmining.org', normal)
...`

然后你可以应用一个学习算法，如（线性回归、逻辑回归等），你将能够在你的测试集上测试结果。问题是任何算法最终都会将来自发件人 X 的电子邮件分类为重要或正常（可能基于训练集中来自该发件人的重要/正常邮件的比率）。为了获得更有意义的结果，您需要从数据中提取更多特征，例如消息中的特定单词、发送时间等。

# php - 从我的托管站点连接到数据库即服务时如何解决错误？

> ID：14632628
> 
> 赞同：0
> 
> 时间：2013-01-31T18:27:17.967
> 
> 标签：php, mysql, web-hosting, dbaas

我使用了一个名为 00webhost.com 的免费托管服务来托管 php-MySQL 应用程序。然后将该数据库上传到提供数据库即服务的 xeround.com。xeround.com 给出了 url=instancexxxxxx.db.xeround.com:57xx 以及用户名和密码。但是 00webhost.com 给出了以下错误：

> 无法连接到“instancexxxxx.db.xeround.com”上的 MySQL 服务器 (4)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:43:39.570

我要检查的第一件事是数据库是否打开了外部访问选项，从连接字符串判断它可能是......但你永远不知道

# python - 使用pywin32打开Word doc并读取已有的文本框变量

> ID：14632629
> 
> 赞同：2
> 
> 时间：2013-01-31T18:27:20.240
> 
> 标签：python, ms-word, pywin32

我正在尝试使用 pywin32 打开 Word 文档并从某些文本框中复制值并打印出来。代码和错误如下。非常感谢任何帮助。对于这个可能很简单的问题，我已经看了很久很久，没有答案。

```
import win32com.client as win32

word = win32.gencache.EnsureDispatch('Word.Application')
word.Visible = 0
doc = word.Documents.Open('C:/testdoc.docm')
question2 = ActiveDocument.Variables("txtQuestion02").Value

print question2 
```

* * *

Traceback（最近一次通话最后一次）：文件“C：/Users/rjudge/SkyDrive/Programming/SAP 作业分级/Grade MS Word - Doc version.py”，第 18 行，有问题 2 = ActiveDocument.Variables（“txtQuestion02”）。值 NameError：未定义名称“ActiveDocument”

伯尼建议后的最新错误： Traceback（最近一次通话最后一次）：文件“C：/Users/Robert/SkyDrive/Programming/SAP Assignment grading/Grade MS Word - Doc version.py”，第 18 行，in question2 = word. ActiveDocument.Variables("txtQuestion02").Value

文件“C:\Python27\lib\site-packages\win32com\client__init__.py”，第 463 行，在**getattr** return self. *应用类型*(*args)

文件“C:\Python27\lib\site-packages\win32com\client__init__.py”，第 456 行，在*ApplyTypes* self. *oleobj* .InvokeTypes(dispid, 0, wFlags, retType, argTypes, *args), pywintypes.com_error: (-2147352567, '发生异常。', (0, u'Microsoft Word', u'对象已被删除。', u'C:\Program Files (x86)\Microsoft Office\Office12\1033\WDMAIN11.CHM', 25305, -2146822463), 无)

进程以退出代码 1 结束

**在 Word 中设置 txtQuestion02 的方式（文本框的 VBA 代码）：**

`

私有子 txtQuestion02_Change()

Me.txtAnswer02.Value = Me.txtQuestion02.Value

结束子`

当我查看局部变量时，该变量确实显示它具有正确的值，并且只要我更改文本框中的内容，它就会立即更改。txtQuestion02.value 似乎确实在做它应该做的事情。我似乎无法使用 pywin32 访问。现在我正走上一条糟糕的打印文本的道路，我可以用 python 操作它。但这完全是错误的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:03:39.117

`ActiveDocument`尚未在您的代码中定义，但已在 Word 应用程序中定义为 Document 类的实例（`word`在您的代码示例中调用）。请尝试：

```
question2 = word.ActiveDocument.Variables("txtQuestion02").Value 
```

# c# - 为什么在 C# 中是 ("" + null = "") 而在 Java 中是 ("" + null = "null")？

> ID：14632630
> 
> 赞同：-1
> 
> 时间：2013-01-31T18:27:21.820
> 
> 标签：c#, java, null, string

我不明白的部分是让 null 的字符串表示为字符串“null”。Java 中该功能背后的基本原理是什么？

有没有比 Java 中的“就是这样”更深层次的答案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T18:30:38.503

如果你想看到一个值是空的，你希望看到空。

```
System.out.println(null); 
```

印刷

```
null 
```

和

```
Integer a = null;
System.out.println("a= " + a); 
```

如您所愿打印

```
a= null 
```

至于为什么 C# 不这样做，我不知道。我想设计师们对意味着什么做出了不同的假设`null`。恕我直言，它不应该与空字符串相同。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-31T18:29:32.560

因为字符串“null”不等于对象null。

当您执行此“”+ null 时，将 null 对象强制转换为字符串，然后我可以比较搅拌“null”

# python - python - 尝试/排除脚本中的所有错误，如 php 的 set_error_handler

> ID：14632635
> 
> 赞同：2
> 
> 时间：2013-01-31T18:27:33.497
> 
> 标签：python, exception, exception-handling

python 是否有一个“包罗万象”的解决方案，如果在脚本中的任何地方触发错误/异常，错误将传递给类似于 PHP 的 set_error_handler() 函数工作方式的自定义函数？

我熟悉 try/catch 方法，但它有点麻烦，因为 try/catch 仅适用于其中的直接代码。

```
def sample_function():
    # some code that causes error, breaks script, does not pass error back to try/catch

try:
    sample_function()
except Exception, e: 
    print str(e) 
```

我正在寻找一个简单的 try/except**一切**，即使在从函数内部调用的函数中触发了错误，而不必用 try/except 包装每个代码块。

有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T18:29:16.980

代码中的某处是主要入口点。只需将 try/except 包装起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:31:10.137

在我看来，您可以将 3 个参数函数分配给[`sys.excepthook`](http://docs.python.org/2/library/sys.html#sys.excepthook)

# android - 如何为 AlertDialog 设置不同的图标？

> ID：14632637
> 
> 赞同：0
> 
> 时间：2013-01-31T18:27:33.203
> 
> 标签：android, android-emulator

例如，如果我们得到一个错误，那么它会为此行为显示适当的图标，例如错误和正确的图标。

```
if(condition true)
{
  //here i need set right icon
}
if(condition false)
 {
 //here i need set wrong icon
AlertDialog ad = new AlertDialog.Builder(MainActivity.this).create();
ad.seticon();//how to set for different behavior 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:31:15.443

您可以将`int`可绘制的 id 设置为 false/wrong（作为默认值），然后如果它是 true/right，则更改`resId`指向的内容。如果您不希望将图标作为默认值，`resId`请将其设为 0。然后在制作 AlertDialog 后设置图标。

```
int resId = R.drawable.false;

if(condition == true)
{
  resId = R.drawable.true;
}

 //here i need set wrong icon
AlertDialog ad = new AlertDialog.Builder(MainActivity.this).create();
ad.setIcon(resId);//how to set for different behavior 
```

当然，请确保您的文件夹中有`true`和`false`图片。`res/drawable`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T19:05:12.850

`resource id`一组`correct/wrong`图像，只需调用该方法并显示带有适当图标的对话框。

```
int res_id=0;

  if(condition true)
  {
       res_id = R.drawable.correct;
       myDialog(res_id);
  }

 if(condition false)
  {

        res_id = R.drawable.wrong;
        myDialog(res_id);
   }

  void myDialog(int resId){

        AlertDialog ad = new AlertDialog.Builder(MainActivity.this).create();
        ad.setIcon(resId);

   } 
```

# c# - 使用文件夹浏览对话框选择文件并将其保存到定义的位置

> ID：14632641
> 
> 赞同：0
> 
> 时间：2013-01-31T18:27:44.063
> 
> 标签：c#, winforms, folderbrowserdialog

我已经为用户制作了这个代码来选择一个文件夹，以便将我的两个文件复制到该文件夹​​。代码是这样的：

```
string sourcePath = @"C:\Documents and Settings\akib\";
string fileName1 = @"untitled.jpg";
string fileName2 = @"Copyuntitled.jpg";
DialogResult result = folderBrowserDialog1.ShowDialog();
if (result == DialogResult.OK)
{
    var destinationFolderName = folderBrowserDialog1.SelectedPath;
    if (Directory.Exists(destinationFolderName))
    {
        File.Copy(sourcePath + "/" + fileName1, destinationFolderName
                  + "/" + fileName1);
        File.Copy(sourcePath + "/" + fileName2, destinationFolderName 
                  + "/" + fileName2);
    }
} 
```

但现在我想扭转它。也就是说，如果用户在某个位置有两个文件，我想将其复制到`c:\programfiles\myfolder`. 那么`FolderBrowseDialog`在这种情况下可以使用吗？如果是怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T19:26:52.707

为此，您需要使用 OpenFileDialog 类，并将 Multiselect 属性设置为 true：

```
string destination = @"c:\programfiles\myfolder";
OpenFileDialog ofd = new OpenFileDialog();
ofd.Multiselect = true;
if (DialogResult.OK == ofd.ShowDialog()) {
    foreach (string file in ofd.FileNames)  {
        File.Copy(file, Path.Combine(destination, Path.GetFileName(file)));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T19:17:24.350

FolderBrowseDialog 可以以完全相同的方式用于获取用于读取或写入文件的文件夹。

# android - back button 和 finish 和有什么不一样？

> ID：14632645
> 
> 赞同：11
> 
> 时间：2013-01-31T18:27:58.470
> 
> 标签：android

我在 details 活动中，我想返回 home 活动，按 back 按钮和在 details 活动上调用完成方法有什么区别？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-31T18:39:01.107

如果您的 then 还没有 Override`onBackPressed()`方法`Activity`，它将`finish()`为您的`Activity`. 你不需要`finish()`显式调用..

因此，它将显示`Activity`位于`Activity Stack`. 然后你会`empty Stack`很从应用程序。

如果您有 Override`onBackPressed()`方法，那么您必须`finish()`显式调用以销毁活动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T18:29:51.210

您可以`finish()`从您的代码中调用；你不能从代码中按下后退按钮。通常，按下后退按钮会调用`finish()`. 区别在于您是希望您的代码还是用户启动操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T18:33:42.573

当我得到完成和后退按钮时，会破坏活动。我发现的唯一区别是，当您按下返回按钮时，它会被调用。onBackPress 事件

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-29T02:32:12.347

**onBackPressed：**

如果您在活动中定义 onBackPressed() 方法，则意味着您将覆盖 backButton 的默认行为，因为当您按下后退按钮时会调用 onBackPressed() 方法。

如果您还没有从您的 Activity 中覆盖 onBackPressed() 方法，那么它将为您的 Activity 调用 finish()。您不需要显式调用finish()。它将显示位于 Activity Stack 顶部的 Activity，并且有空的 Stack，然后您将完全脱离应用程序。如果您有 Override onBackPressed() 方法，那么您必须显式调用 finish() 来销毁活动。

**结束：**

如果你实现了 finish() 方法，它打算关闭当前的 Activity。如果您的应用程序没有 top backstack 将重定向到 android 主屏幕。在活动上调用 finish() 时，会执行 onDestroy() 方法。此方法可以执行以下操作：

*   关闭活动正在管理的任何对话框。
*   关闭活动正在管理的所有游标。
*   关闭任何打开的搜索对话框

此外， onDestroy() 不是析构函数。它实际上并没有破坏对象。它只是一种基于某种状态调用的方法。因此，在超类的 onDestroy() 运行并返回之后，您的实例仍然存在并且非常好*。Android 会保留进程以防用户想要重新启动应用程序，这使得启动阶段更快。该进程将不会做任何事情，如果需要回收内存，该进程将被杀死

# c++ - 通过 msbuild exec 在 C++ 中输出颜色控制台

> ID：14632650
> 
> 赞同：1
> 
> 时间：2013-01-31T18:28:11.333
> 
> 标签：c++, msbuild, console-application, windows-console

**问题**

我很容易找到一种使用 windows.h 和 std::cout 在 C++ 中设置控制台颜色的方法。此处显示了一种这样的方法：

```
HANDLE stdout = GetStdHandle(STD_OUTPUT_HANDLE); //get handle of console
CONSOLE_SCREEN_BUFFER_INFO bufferInfo;
GetConsoleScreenBufferInfo(stdout, &bufferInfo); //save current color scheme
SetConsoleTextAttribute(stdout, 0x4); //change console color
std::cout << "This is red text" << std::endl; 
SetConsoleTextAttribute(stdout, bufferInfo.wAttributes); //restore old colors 
```

果然，当我从控制台窗口运行我的程序时，颜色会按预期改变。问题是，当这是从 msbuild 脚本运行时，我使用 exec：

```
<Exec Command="myExecutable.exe" /> 
```

从 msbuild 脚本运行时，颜色不受程序影响。文本仍然在对 std::cout 的调用中输出，但它只是正常的控制台窗口颜色。

* * *

**假设**

我的猜测是对 exec 的调用通过与 STD_OUTPUT_HANDLE 不同的句柄写入标准输出。要么，要么 msbuild exec 设置自己的控制台属性。我试过让父控制台，但没有任何运气。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:36:12.370

最有可能的是 MSBuild 将您的可执行文件连接到管道。当您向管道写入内容时，MSBuild 从另一端读取它，然后它可能会进行一些处理：例如写入屏幕、写入日志等......问题是您无法通过管道传输颜色。实际上，您可以`stdout`使用 来检查您的句柄是否不是控制台缓冲区`GetFileType`，这将返回`FILE_TYPE_CHAR`控制台，但`FILE_TYPE_PIPE`如果我的假设是正确的。您还应该检查您的控制台函数调用是否成功。

# eclipse - Spring Tool Suite/Eclipse：缺少 Spring 文档：可以安装吗？

> ID：14632658
> 
> 赞同：0
> 
> 时间：2013-01-31T18:28:46.703
> 
> 标签：eclipse

**弹簧工具套件**

**版本：3.1.0.RELEASE**

**内部版本号：201210061306**

**Spring Tool Suite 3.1.0.RELEASE - 基于 Eclipse Juno 4.2.1**

**spring-tool-suite-3.1.0.RELEASE-e4.2-win32-installer.exe**

**微软视窗 XP 专业版**

你好。我刚刚安装了上面的。

当我去帮助 | 帮助内容 有一些有用的“书籍”解释了如何做事的基础知识。

其中之一的标题是**“Spring Documentation”**

但是，所有的分支和节点都是空白的。按下它们或占位符网页时，我会收到 404 错误。

有什么方法可以将缺少的教程安装到 Eclipse 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:24:08.753

**来自 Spring 网络板：**

```
You are right, the Spring documentation part in the help contents of STS is broken (this needs to be fixed by us). In the meantime I would like to recommend you our "Getting Started" collection of links here:

http://forum.springsource.org/showthread.php?124335-Getting-Started

As well as the official "Getting started" section on the web here:

http://www.springsource.org/get-started

It also contains the links for the official Spring framework documentation. 
```

# javascript - 寻道后视频 readyState 总是 HAVE_ENOUGH_DATA

> ID：14632672
> 
> 赞同：4
> 
> 时间：2013-01-31T18:29:59.800
> 
> 标签：javascript, html5-video

嗨，

我正在尝试使用 HTML5 实现两个视频的同步播放。因此，在寻找一个视频时，应等待另一个到 HAVE_ENOUGH_DATA，然后再开始播放两个视频。

在`currentTime = seekPosition;`我立即暂停两个视频并检查 readyState 之后。两个视频的 readySates 总是 HAVE_ENOUGH_Data，所以我`.play()`都是。

我认为，这`.play()`两个视频都会立即开始播放，但有时它们必须加载几秒钟才能播放。

我在 Chrome 中对此进行了测试，所以在我看来，在搜索操作之后没有使用 readyState？感谢您的任何想法。

**编辑**

找到这个错误报告[http://code.google.com/p/chromium/issues/detail?id=73609](http://code.google.com/p/chromium/issues/detail?id=73609)。所以看起来整个 readystate / canplaythroug 的事情在 Chrome 中实现得很差。根据这篇文章[https://bugzilla.mozilla.org/show_bug.cgi?id=627153，Mozilla](https://bugzilla.mozilla.org/show_bug.cgi?id=627153)的人正在更准确地实施它。

# java - 如何让一个执行程序 FixedThreadPool 等待另一个执行程序 SingleThreadExecutor？

> ID：14632675
> 
> 赞同：1
> 
> 时间：2013-01-31T18:30:17.123
> 
> 标签：java, multithreading, executorservice, executors

我有 3 个任务要做：

*   首先：在同一个执行器中依次下载 htmlFile --------\ ，它工作正常。
*   二：解压html文件---------/

*   第三：下载图像 ------> 在另一个执行程序中，我需要下载分成 5 个文件的图像，为此我使用的是 FixedThreadPool(5)，即 5 个并行下载。

但是当我点击下载时，我的图像下载开始而不等待 htmlDownload 完成，我怎么能对我的 executorPool 等待我的另一个 executor singleThread？

主类：

```
ExecutorService e = Executors.newSingleThreadExecutor();

            //Download HTML and Unzip Threads
            typeDownloaded = "html";
            DownloadUtil.downloadHtml(e, this, dns, port, uuid, filePathHtmlDownload, cookies, typeDownloaded);
            UnzipUtil.unZipHtml(e, this, filePathHtmlDownload, outputFolder, typeDownloaded);
            typeDownloaded = "images";
            DownloadUtil.downloadImages(e, this, dns, port, numImg, uuid, cookies, typeDownloaded); 
```

我的 DownloadUtil 类：

```
public class DownloadUtil {

    private static Logger log = Logger.getLogger(LoginLocalServiceImpl.class.getName());

    public static void downloadHtml(Executor e, MainViewController controller, String dns, int port,
            String offlineUUID, String filePath, Map<String, String> cookies, String type) throws IOException {

        String urlHtml = "http://" + dns + ":" + port + Constants.TARGET_SERVICE_DOWNLOADFILES + offlineUUID;

        System.out.println(urlHtml);

        e.execute(new DownloaderTask(controller, urlHtml, filePath, cookies, type));

    }

    public static void downloadImages(Executor e, MainViewController controller, String dns, int port, int numImg,
            String uuid, Map<String, String> cookies, String type) throws SystemException, IOException {

        String filePath;
        String urlImages;

        if (numImg == 1) {
            filePath = System.getProperty("user.home") + File.separator + "Documents" + File.separator + "TargetApp" + File.separator + "TempImageDownload.zip";
            urlImages = "http://" + dns + ":" + port + Constants.TARGET_SERVICE_DOWNLOADIMAGES + uuid;
            e.execute(new DownloaderTask(controller, urlImages, filePath, cookies, type));

        } else {

            ExecutorService exec = Executors.newFixedThreadPool(numImg);

            for (int i = 0; i < numImg; i++) {
                filePath = System.getProperty("user.home") + File.separator + "Documents" + File.separator + "TargetApp" + File.separator + "TempImage" + i + "Download.zip";
                urlImages = "http://" + dns + ":" + port + Constants.TARGET_SERVICE_DOWNLOADIMAGES + uuid + "/?pos=" + (i);
                exec.execute(new DownloaderTask(controller, urlImages, filePath, cookies, type));

            }

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T19:01:51.693

您可以延迟图片下载任务的提交，直到 html 下载完成，如下所示：

```
 final ExecutorService htmlDownloadExecutor = Executors.newSingleThreadExecutor();
    final ExecutorService imageDownloadExecutor = Executors.newFixedThreadPool(5);
    ...
    //Download HTML and Unzip Threads
    typeDownloaded = "html";
    final DownloaderTask htmlTask = DownloadUtil.downloadHtml(mainViewController, dns, port, uuid, filePathHtmlDownload, cookies, typeDownloaded);
    typeDownloaded = "images";
    final List<DownloaderTask> imageTasks = DownloadUtil.downloadImages(mainViewController, dns, port, numImg, uuid, cookies, typeDownloaded);

    // submit the html download escape
    htmlDownloadExecutor.execute(new Runnable() {
        @Override
        public void run() {
            // first run the html task
            htmlTask.run();
            // now submit the image tasks to run
            for (DownloaderTask imageTask : imageTasks) {
                imageDownloadExecutor.execute(imageTask);
            }

        }
    }); 
```

帮助函数已更改为返回任务实例，然后在适当的时候将任务实例提交给适当的执行器服务实例。html下载任务立即提交下载html，下载完成后提交图片下载任务。此解决方案中不涉及线程阻塞操作 (CountDownLatch.await())，因此它应该更具可扩展性/性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:39:52.737

谷歌的 Guava`ListenableFuture`将在其任务完成后执行其他任务。另一种方法是使用 a`CountDownLatch`让图像下载线程等待，但这会在它们等待时占用这些线程。

# php - HttpWebRequest，发布方法

> ID：14632680
> 
> 赞同：0
> 
> 时间：2013-01-31T18:30:37.003
> 
> 标签：php, post, httpwebrequest, windows-phone-7.1

我的 wp 7.1 应用程序中的 HttpWebRequest 有一个小问题。应用程序通过 POST 方法将一些游戏统计数据发送到 php 服务器，但服务器不获取它。**$_POST 数组保持为空。**在 WireShark 的帮助下，我可以看到数据在发送到服务器的数据包中，但服务器没有收到任何数据。

这是发送数据的方法的代码：

```
 private void SendStatisticsToServer()
    {
        if (this.stat.Name == String.Empty || Object.ReferenceEquals(this.stat.Name, null))
        {
            this.OnEmptyNameEvent();
        }
        else
        {
            HttpWebRequest request = WebRequest.Create(ADDRESS) as HttpWebRequest;
            request.Method = "POST";
            request.ContentType = "text/plain";
            request.AllowReadStreamBuffering = false;

            request.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallBack), request);
        }
    }

    private void GetRequestStreamCallBack(IAsyncResult requestRes)
    {
        StringBuilder builder = new StringBuilder("user=");
        builder.Append(this.stat.Name);
        builder.Append("&won=");
        builder.Append(this.stat.Won == true ? "1" : "0");
        builder.Append("&scores=");
        builder.Append(this.stat.Scores.ToString());

        Byte[] byteArray = Encoding.UTF8.GetBytes(builder.ToString());

        HttpWebRequest request = requestRes.AsyncState as HttpWebRequest;
        Stream stream = request.EndGetRequestStream(requestRes);
        stream.Write(byteArray, 0, byteArray.Length);
        stream.Flush();
        stream.Close();

        request.BeginGetResponse(new AsyncCallback(GetResponseCallback), request);
    }

    private void GetResponseCallback(IAsyncResult requestRes)
    {
        HttpWebRequest request = requestRes.AsyncState as HttpWebRequest;

        HttpWebResponse response = request.EndGetResponse(requestRes) as HttpWebResponse;
        Stream stream = response.GetResponseStream();
        StreamReader streamRead = new StreamReader(stream);
        String responseString = streamRead.ReadToEnd();
        stream.Close();
        streamRead.Close();

        response.Close();
        this.OnExitButtonPressedEvent(ButtonType.Exit);
    } 
```

（我很抱歉没有评论的代码，但我认为这是不言自明的）

如您所见，它几乎是从 msdn 复制过来的。

这是 php -server 代码：

```
 <?php
     header('Content-type: text/plain'); 
     // HTTP/1.1
     header("Cache-Control: no-store, no-cache, must-revalidate");
     // HTTP/1.0
     header("Pragma: no-cache");
     $logfile = 'postdata.txt';
     $firstData = $_POST["user"];
     $secondData = $_POST["won"];
     $thirdData = $_POST["scores"];
     $file = fopen($logfile, "a+");

     fwrite($file, "Post received - data: firstData=". $firstData . "   
     secondData=" . $secondData . " thirdData=" . $thirdData . "\r\n");
     fclose($file);

     ?> 
```

如您所见，该服务器并没有做太多事情——只接收数据并将其推送到日志文件中。

这绝对不是服务器的错误，因为用 Qt 编写的旧应用程序在相同条件下工作正常，并且 $_POST 数组不为空。

请你告诉我，哪里可能出现错误？

目标平台是 WP 7.1。

预先感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T22:16:07.563

我将不得不这样做作为答案，但我不完全确定这是正确的。我相信对于文本/普通帖子，参数的格式是：

```
user=d
won=1
scores=3 
```

如果您执行 application/x-www-form-urlencoded，那么您将使用

```
user=d&won=1&scores=3 
```

PHP 也有可能不支持 text/plain。

# java - 在 RAD 中保存失败错误

> ID：14632685
> 
> 赞同：1
> 
> 时间：2013-01-31T18:31:06.597
> 
> 标签：java, eclipse, jsp, rad

我在 RAD 的工作空间中签出了一个现有项目。每次我尝试对现有 JSP 页面进行任何更改时，我都会不断收到以下错误。我能够添加一个新的 jsp 页面，但是如果我进行任何更改，它就不起作用并给我同样的错误。我已经尝试了一切（刷新，干净的构建）我什至重新安装了 RAD。

请帮忙！

错误：

Save Failed 在索引初始化期间出现双重错误。原因：com.ibm.etools.references.management.ReferenceException：索引初始化期间出现异常，无法创建或打开索引 BY_SOURCELINKID-REFERENCE。异常原因：ReferenceExceptioncom.ibm.etools.references.management.ReferenceException：ExtentManager 检测到空索引文件。索引 BY_SOURCELINKID-REFERENCE.e0 的大小为 0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:40:26.720

“清洁项目”将是我的第一个建议——但你已经尝试过了 :(

B计划：

1) 退出 RAD 开发者

2) 保存当前工作区的备份

3)*删除* `<workspace>\.metadata\.plugins\com.ibm.etools.references`

4）重启RAD开发者，重复“Project, Clean”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:48:19.893

当我强行终止 RAD 进程而不是关闭它时遇到了类似的问题。索引以某种方式损坏。

我更改了我的工作区以指向一个新位置并且它起作用了。

希望这可以帮助 ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-09T10:45:14.397

我也面临同样的问题。在 RAD 中保存 Web 文件（.jsp 文件）时出现以下错误

![在此处输入图像描述](../Images/498802be268fc90c17820efb97897fab.png)

错误即将到来，因为默认情况下您的 JSP 页面使用“**页面编辑器”打开**

解决方案是 - 无需删除插件，只需在其各自的编辑器中打开您的 Web 文件。**在“JSP 编辑器**”中打开 JSP 文件。你的问题是固定的。

# java - 一个类的类成员被垃圾回收，即使应用程序有它的引用

> ID：14632689
> 
> 赞同：2
> 
> 时间：2013-01-31T18:31:26.510
> 
> 标签：java, android, garbage-collection

我看到了一种我没想到的关于 Android 上的垃圾收集的行为。

我有一个扩展名为 App 的应用程序并修改清单的类，以便

<应用程序 android:name=".App" ...

为了方便起见，我之前使用过它，以便能够通过静态方法获取应用程序上下文，但也存储了一些小而重要的信息，这些信息只应在整个应用程序被垃圾收集时进行。此信息存储在已初始化的单例对象中，并且引用存储在应用程序类中：

```
public class App extends Application {

Context mContext;
Info info;

@Override
public void onCreate() {
    super.onCreate();
    mContext = this;

    info = Info.getInstance();

    this.setTheme(R.style.MyTheme);
}

public static Context getContext(){
    return mContext;
}
} 
```

当 Info 被初始化时，一个简单的成员对象也被初始化：

```
public class Info {

    public Profile profile;

    (...)

    private Info() {
       profile = new Profile();
    }

    (...)
 } 
```

我遇到的问题是，当应用程序暂停并运行另一个内存密集型应用程序（强制垃圾收集）时，当我返回应用程序时，尝试访问配置文件 var 时出现 NullPointerException

Info.getInstance().profile

应用程序持有对“信息”单例的引用以及单例持有对“配置文件”的引用这一事实不应该阻止它被垃圾收集吗？

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:02:34.187

进一步了解 android 中的应用程序生命周期。如果您启动另一个需要内存的应用程序，其他应用程序将在后台终止。

然后 OnCreate 应该再次运行，所以它不能是垃圾收集器，因为 Info 将从头开始再次创建。

[活动生命周期](http://developer.android.com/reference/android/app/Activity.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T18:44:05.800

**单例**意味着只会实例化一个对象，垃圾回收与单例没有关系，请参阅此[**链接**](https://stackoverflow.com/questions/4979023/why-are-there-java-singleton-classes-when-would-you-need-to-use-one)以更好地了解[**单例**](https://stackoverflow.com/questions/4979023/why-are-there-java-singleton-classes-when-would-you-need-to-use-one)

查看如何在本地存储数据的答案 如何[在应用程序中存储数据？](https://stackoverflow.com/a/6501843/519718)

# javascript - 使用 Modernizr 加载 HTML5 Shiv 的性能

> ID：14632691
> 
> 赞同：6
> 
> 时间：2013-01-31T18:31:32.037
> 
> 标签：javascript, performance, modernizr

我的网站使用 Modernizr 并且需要带有 PrintShiv 的 HTML5Shiv。不使用 Modernizr 加载这些 shiv，而是通过 IE 条件加载它们是否有任何性能优势？显然使用 Modernizr 更干净，但我更关注性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T19:25:43.767

我自己很好奇，所以我设置了一些测试页面来查看。

如果您的网站只需要来自modernizr 的带有PrintShiv 的HTML5Shiv，那么使用IE 条件加载html5shiv-printshiv.js 会比总是为所有其他浏览器加载modernizr（lt IE 9）执行得更好。因此，在您的情况下，您可能应该停止使用modernizr，而只在条件中使用shiv。

对于需要 shiv 的 IE 浏览器，负载/性能在使用modernizr 和仅使用 html5shiv 之间是相等的。仅在现代 IE 浏览器（IE9 和 IE10）上可以看到使用 html5shiv 的性能提升

测试页面：

*   仅 html5shiv-printshiv：http: [//jsbin.com/upozar/1](http://jsbin.com/upozar/1)
*   定制modernizr：http: [//jsbin.com/erodog/1](http://jsbin.com/erodog/1)

使用 IE9/Cable 的测试报告：

*   仅 html5shiv-printshiv：[http ://www.webpagetest.org/result/130131_PG_11S8/](http://www.webpagetest.org/result/130131_PG_11S8/)
*   定制modernizr：[http ://www.webpagetest.org/result/130131_JG_11SE/](http://www.webpagetest.org/result/130131_JG_11SE/)

比较那些完全加载的测试，我们使用 html5shiv-printshiv.js 节省了 1.677 秒

**Modernizr 更新**：阅读Modernizr 的 GitHub 项目的问题单中正在起草的[有关性能注意事项的文档以获取更多详细信息。](https://github.com/Modernizr/Modernizr/issues/878)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T20:54:10.807

可以自定义 Modernizr 的最新版本以仅包含您需要的功能。如果您担心性能，这可能是要走的路。

Modernizr 核心在性能方面并不昂贵。费用在于它所做的所有测试。如果您将其自定义为仅执行您需要执行的测试，您将节省大部分负载，但您仍将拥有 Modernizr 核心和您需要的部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T18:58:35.780

我更喜欢将 HTML5Shiv 与 Modernizr 一起使用，并避免使用条件。通过这种方式，我的代码更清晰，避免了不必要或重复的内容。在 IE 中的性能是相同的，因为 HTML5SHiv 只会在 IE 小于 9 的情况下加载，直接使用 Modernizr 或 HTML5Shiv。但是 HTML5Shiv 对其他浏览器来说不是必需的，所以，也许，它是性能使用条件的好主意

# ios - iPod Touch 上的录音应用程序背景和终止

> ID：14632692
> 
> 赞同：1
> 
> 时间：2013-01-31T18:31:36.080
> 
> 标签：ios, audio-recording, ipod-touch

我有一个可以录制音频的应用程序，该应用程序已经运行了一段时间。它使用 iOS 中的低级 AudioQueue/AudioSession API。但是对于最近的型号（“第 4 代”）iPod Touch，当应用程序开始录制时，iPod 会在一分钟后使屏幕变暗，然后在一分钟后黑屏并锁定。按“主页”并解锁应用程序已终止。

请注意，不能用 Xcode 真正调试它，因为如果将 iPod 插入 Xcode，它就不会变暗。

Apple 是否在最新版本的 iOS 中进行了一些更改，或者更新的 iPod Touch 型号有什么奇怪的地方？

**添加：**

如果我只查看控制台日志，应用程序运行良好，直到我看到`UserEventAgent[12] <Warning>: DEBUG: Changing screen blanked state: 1`

接下来我看到记录仪收到了停止命令。`applicationWillTerminate`这显然是来自or的调用的结果`applicationDidEnterBackground`。

`<Notice>`（实际上，在 UserEventAgent 之前还有一些其他消息，来自 SpringBoard -`Posting 'com.apple.iokit.hid.displayStatus' notifyState=0`和 " `ultitouchHID: detection mode: 0->255`。）

（并且该应用程序最终崩溃，因为它试图干净地关闭录制会话并且操作系统希望它现在退出。但这是在事情变得糟糕之后。）

**将进行调查**

UIApplication idleTimerDisabled

plist“所需的背景模式”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:57:32.940

iOS 版本之间的行为发生了变化（不知道具体是什么版本）。以前活动的音频应用程序不会被后台处理，但现在它们是。据说录制仍然可以在后台继续进行，但所有 UI 活动必须停止，否则会毫不客气地拍摄。

目前我正试图弄清楚如何处理新行为，这是一组不同的问题。

# python - 在基于 python 的 Web 框架中扫描用户上传的文件中的恶意软件

> ID：14632696
> 
> 赞同：4
> 
> 时间：2013-01-31T18:31:45.303
> 
> 标签：python, django, web2py, python-module, virus-scanning

我想问一下 web2py 和 django 用户，他们使用哪些工具/模块来扫描用户上传的文件中是否存在恶意软件、病毒等。您能否根据您的个人经验提供任何建议？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-02T20:18:16.957

我自己也处于同样的决定点。找到这个 看起来像是在 2009 年最后一次更新的[django-antivirus项目？](https://code.google.com/p/django-antivirus/)

这个[python clamd](https://pypi.python.org/pypi/clamd/1.0.2)项目看起来更加最新（2014 年 8 月）。它可以扫描流，这可能是我在上传文件时扫描文件的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T18:59:21.677

经过进一步思考，并回到不同的项目 - 这是我给你的发现：

您可以在生产服务器上加载 Clamscan。它是基于 UNIX 的，免费的，并且会定期更新。[http://www.clamav.net/lang/en/](http://www.clamav.net/lang/en/)

Clam 扫描是基于控制台的 - 因此您可以在用户上传文件时使用 python 进行所需的命令行调用。快速且不占用资源，因为您只扫描一个文件 - 而不是整个服务器。

# asp.net - gridview 新属性页面和排序事件

> ID：14632698
> 
> 赞同：0
> 
> 时间：2013-01-31T18:31:48.610
> 
> 标签：asp.net, gridview

我搜索了一种将属性添加到 asp.net gridview 的方法。该属性的值将在页面更改 (PageIndexChanging) 和排序事件 (Sorting) 时更改。

该属性将用于 javascript。

在我有一个隐藏字段之前，但回帖不会改变隐藏字段的值。

我试试

```
mygrid.Rows(0).Cells(0).Attributes.Add("myAttribute", "test") 
```

如果您有想法或需要更多详细信息以供理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:50:13.240

这应该可以将属性添加到行中。但是，属性在回发时将不可用，并且不会在回发时保存。跨回发保存的唯一方法是隐藏字段。`<asp:HiddenField>`控件将在回发时保存其值；您必须将其显式更改为新值。但是，它至少会在页面回发时将值发送到后端服务器。

# c# - 列表框+ IMG中的快速排序随机数

> ID：14632699
> 
> 赞同：-1
> 
> 时间：2013-01-31T18:31:48.627
> 
> 标签：c#

我正在尝试对列表框中的 10 个随机数进行快速排序。但我不能在我的随机 iar 上使用该方法，谁能给我一些建议。

按钮后面的代码：

```
 private void btnSort_Click(object sender, EventArgs e)
    {
        Random r = new Random();
        int n = 10;
        int[] iar = new int[n];
        for (int i = 0; i < iar.Length; i++)
        {
            iar[i] = r.Next(0, 20);
            lb1.Items.Add(iar[i]);

        //here is the error i want to fill lb2 with the quicksorted array 
        // using the quicksort method

            Quicksort(iar, 0, iar.Length - 1);
        }
        for (int i = 0; i < iar.Length; i++)
        {
            lb2.Items.Add(iar[i]);
        }
    } 
```

快速排序方法

```
 public static void Quicksort(IComparable[] elements, int left, int right)
    {
        int i = left, j = right;
        IComparable pivot = elements[(left + right) / 2];

        while (i <= j)
        {
            while (elements[i].CompareTo(pivot) < 0)
            {
                i++;
            }
            while (elements[j].CompareTo(pivot) > 0)
            {
                j--;
            } 
            if (i <= j)
            {
                // Swap
                IComparable tmp = elements[i];
                elements[i] = elements[j];
                elements[j] = tmp;

                i++;
                j--;
            }
        }
        // Recursive calls
        if (left < j)
        {
            Quicksort(elements, left, j);
        }
        if (i < right)
        {
            Quicksort(elements, i, right);
        }
    }

} 
```

错误：

错误 2 参数 1：无法从 'int[]' 转换为 'System.IComparable[]'
错误 1 ​​'Quicksort.FrmQuicksort.Quicksort(System.IComparable[], int, int)' 的最佳重载方法匹配有一些无效论据

谢谢你看:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:16:27.373

在给定的上下文中，没有真正需要指定`IComparable`，而是`int`因为您只使用整数。`QuickSort`如果您在已生成的列表上运行算法，则在生成每个数字时效果最佳时，您也会调用，`QuickSort`因此将语句移到循环之外。还要记住，有更好的排序算法可以对这样的少量数据进行排序。

### 单击事件处理程序：

```
private void btnSort_Click(object sender, EventArgs e)
{
    Random r = new Random();
    int n = 10;
    int[] iar = new int[n];

    //Generate random numbers and store them in the Unsorted ListBox
    for (int i = 0; i < iar.Length; i++)
    {
        iar[i] = r.Next(0, 20);
        lb1.Items.Add(iar[i]);
    }

    //Sort the random numbers array
    Quicksort(iar, 0, iar.Length - 1);

    //Now the array is sorted put it in the Sorted Listbox
    for (int i = 0; i < iar.Length; i++)
    {
        lb2.Items.Add(iar[i]);
    }
} 
```

### 快速排序功能

```
//Take an array of integers not an array of IComparable
public static void Quicksort(int[] elements, int left, int right)
{
    int i = left;
    int j = right;

    int pivot = elements[(left + right) / 2];

    while (i <= j)
    {
        while (elements[i].CompareTo(pivot) < 0)
        {
            i++;
        }
        while (elements[j].CompareTo(pivot) > 0)
        {
            j--;
        }

        if (i <= j)
        {
            // Swap
            int tmp = elements[i];
            elements[i] = elements[j];
            elements[j] = tmp;

            i++;
            j--;
        }
    }
    // Recursive calls
    if (left < j)
    {
        Quicksort(elements, left, j);
    }
    if (i < right)
    {
        Quicksort(elements, i, right);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T19:51:53.590

由于您已声明您的`Quicksort`方法采用`IComparable`对象数组，因此您需要向其传递`IComparable`对象数组，而不是`int`s 数组。一个明显的解决方案是声明一个包装类：

```
 class MyQuicksortableInt : IComparable
    {
        public int Value { get; set; }
        // Implementation of IComparable left as an exercise for the reader;
        // see http://msdn.microsoft.com/en-us/library/System.IComparable.aspx for details
    } 
```

更改`iar`为 type `MyQuicksortableInt[]`，您现有的`Quicksort`代码将愉快地接受它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T11:26:02.310

你需要这样做：

```
public static void Quicksort<T>(T[] elements, int left, int right) where T:IComparable<T> 
```

代替

```
public static void Quicksort(IComparable[] elements, int left, int right) 
```

然后在任何地方都使用 T 而不是 IComparable

# canvas - 我可以访问通过canvg导入的svg文件中定义的路径吗？

> ID：14632700
> 
> 赞同：0
> 
> 时间：2013-01-31T18:31:59.590
> 
> 标签：canvas, svg, path, click, canvg

我有一个 svg 文件中的图像，我使用 canvg ( [http://code.google.com/p/canvg/](http://code.google.com/p/canvg/) ) 将其导入到 <canvas> 对象中。

```
canvg('canvas', '../path/to/your.svg') 
```

每当用户在 svg 文件中定义的路径之一内单击时，我都需要执行一项操作。那可能吗？

不需要画布，如果没有它也可以做到，请告诉我（有类似的东西吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:40:42.847

是的，你可以用 Kinetic.js 试试这个。请查看[HTML5 Canvas World Map SVG Path with KineticJS 示例](http://www.html5canvastutorials.com/labs/html5-canvas-world-map-svg-path-with-kineticjs/)。

# modx - MODX 革命 - elRTE 输出文本行而不是页面内容

> ID：14632701
> 
> 赞同：0
> 
> 时间：2013-01-31T18:32:07.867
> 
> 标签：modx, elrte

我认为在我的 MODX Revolution 2.2.4 安装中出现了一些冲突。在我使用 TinyMCE 之前一切正常，但是当我安装 elRTE 并将其设置为系统设置中的默认富文本编辑器时，它会给出一个奇怪的输出——当我单击任何资源进行编辑时，它只显示以下文本行：

```
 modX Object ( [context] => modContext_mysql Object ( [config] => Array ( [allow_tags_in_post] => 1 [modRequest.class] => modManagerRequest ) [aliasMap] => Array ( ) [resourceMap] => Array ( ) [webLinkMap] => Array ( ) [eventMap] => Array ( [OnDocFormPrerender] => Array ( [3] => 3 ) [OnManagerPageBeforeRender] => Array ( [3] => 3 ) [OnRichTextBrowserInit] => Array ( [11] => 11 ) [OnRichTextEditorInit] => Array ( [11] => 11 ) [OnRichTextEditorRegister] => Array ( [11] => 11 ) [OnSiteRefresh] => Array ( [6] => 6 ) [OnTVInputPropertiesList] => Array ( [3] => 3 ) [OnTVInputRenderList] => Array 
```

...等等。另一方面，当我在干净的 Revo 上安装 elRTE 时，一切正常。任何人都知道可能导致问题的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:52:53.423

您在安装 elRTE 之前删除了 TinyMCE？

# ubuntu - boost::posix_time' 尚未声明

> ID：14632702
> 
> 赞同：2
> 
> 时间：2013-01-31T18:32:10.807
> 
> 标签：ubuntu, boost

当我尝试使用以下行编译代码时：（我正在使用`boost 1.51`, with `gcc 4.6.3`in `UBuntu 12.04 LTS 64 bits`）

```
 #include <boost/date_time/posix_time/posix_time.hpp>

 dotFile << "// " << boost::posix_time::second_clock::local_time() << std::endl; 
```

我收到此错误：

```
sources/sctg/src/main.cc: In function 'void printDot(sctg::Configuration*, std::string, std::vector<sctg::Task*>*, std::vector<sctg::Event*>*)':
sources/sctg/src/main.cc:1029:31: error: 'boost::posix_time' has not been declared 
```

知道如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:36:27.263

以下最小测试用例对我有用：

```
$ cat posix_time.cpp

#include <boost/date_time/posix_time/posix_time.hpp>
#include <iostream>

int main()
{
    std::cout << boost::posix_time::second_clock::local_time() << std::endl;
    return 0;
}

$ g++ -Wall posix_time.cpp 
$ ./a.out 
2013-Jan-31 21:34:31
$ 
```

试试这个，看看它是否适用于您的系统。如果它失败了，那么我怀疑你的 boost 安装有问题（可能是一个空的标题）。

# sql - 在 SQL 2008 中设置满足 IF 条件的列中的默认值

> ID：14632703
> 
> 赞同：1
> 
> 时间：2013-01-31T18:32:20.260
> 
> 标签：sql, sql-server-2008, tsql, create-table, getdate

首先，我对SQL查询很陌生，所以如果我听起来很无知，我很抱歉......

我有一个数据库，它有一个存储的作业，每小时删除和创建一个表。该表看起来像这样，除了在 1 到 24 之间的每个小时都有数据

```
Name         Hour1  Hour24
Point 1 OUT  4      5
Point 1 IN   26     22
Point 2 OUT  46     44    
Point 2 IN   0      0
Point 3 OUT  18     19
Point 3 IN   56     51
Point 4 OUT  111    100
Point 4 IN   0      0
Point 5 OUT  0      0
Point 5 IN   42     46
Point 6 IN   210    211 
```

在删除和创建之后，数据库会在末尾添加一个名为 date 的列，并将今天的日期设置为默认值。我的问题是在上午 12:00 导入数据时，当前日期实际上是明天。出于会计目的，我需要该数据具有同一天。

我在黑暗中拍摄并尝试了这个，但语法都是错误的......

```
[Date] [datetime] DEFAULT if(DATEPART(hh)=24) CONVERT(GETDATE(DATEPART(dd)-1)) 
```

在创建表查询中是否可以使用这样的 if 语句？有没有更好的方法来解决这个问题？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:10:28.260

是的，您可以设置默认值，但您希望语法正确：

```
[date] datetime default (case when datepart(hh, getdate()) = 24 then getdate() - 1 else getdate() end) 
```

但是，我认为您不应该`datetime`在名为“日期”的字段中设置值。怎么样：

```
AsOfDate date default (case when datepart(hh, getdate()) = 24 then cast(getdate() - 1 as date) else cast(getdate() as date) end) 
```

# apc - APC 中的 1 个大段与许多较小段之间有什么区别？

> ID：14632704
> 
> 赞同：2
> 
> 时间：2013-01-31T18:32:21.437
> 
> 标签：apc

这两个示例之间是否有任何区别：

*   1 个共享内存段 @ 256MB
*   4 个共享内存段 @ 64MB

多个段是否使 APC 更容易清理过时的条目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T19:15:13.813

默认情况下，某些系统（包括大多数 BSD 变体）对共享内存段的大小限制非常低，因此要让 APC 访问更多内存，因为你不能增加每个段的大小，你必须增加段数。

似乎应该只有 1 个设置，你说“给 APC 这么多内存”，它会根据你的系统配置自动计算出要做什么......但这需要检查你的配置等，所以他们只是把它留了下来让您正确配置它:)

因为似乎只有 2 个设置可以解释某些系统在允许的大小方面是 gimpy 的事实，所以我会尽可能选择 1 个大段。

不过，它似乎不应该以一种或另一种方式影响性能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T21:03:30.943

APC 实际上不再喜欢多个细分市场。

默认的 MMAP 模式完全忽略该设置并使用速度更快的单个段。

因此，除非您使用的是旧的 BSD 机器，否则默认情况下它使用单个段并避免为同一内存维护 4 个锁而不是 1 个。

# c# - c#stackoverflow在基本代码中出于某种奇怪的原因

> ID：14632707
> 
> 赞同：0
> 
> 时间：2013-01-31T18:32:29.767
> 
> 标签：c#, sql, exception, stack-overflow

*   我有一个 RoundedSum 对象，它基本上检查产品的价格和一个整数和到数据库中。
*   我有一个 UnRoundedSum 对象，它基本上继承了 RoundedSum 并覆盖了 checkinsum 函数，并将与最接近的整数的差异检查为未计入
*   UnRoundedSum 调用 base 的 checkinsum(productid,int) 将价格值检查到 DB 这是我的命名空间 SumRounding，它有 2 个类

* * *

```
namespace DatabasePricing.SumRounding
{
    public class Roundedsum
    {
        public void checkinsum(int productid,int sum)
        {
            //Checks in price in the price table
            //dbobject("price",productid,sum);
            int temp_int = sum;    
        }
    }

    public class UnRoundedSum : Roundedsum
    {
        public void checkinsum(int productid,float sum)
        {
            //Since the sum is a float it will check the difference 
            //into unroundedsum table in the database 
            int intsum = (int)sum;
            float tempfloat = sum - intsum;
            //Check this remaining float into the database under unaccounted
            // dbobject("unroundedsum",productid,tempfloat);                
            //Now call the integer checksum with the integer value
            checkinsum(productid,intsum);
        }
    }
} 
```

**这让我们假设我现在为测试 rite 创建了一个主要功能，因为它在我的项目中不起作用。这就像上述类的测试对象。**

```
using DatabasePricing.SumRounding;
    namespace DatabasePricing
    {
        class testingrounding
        {
            static void Main() { 
            int product_id = 1;
            float float_value = 1.1f;
            UnRoundedSum obj1 = new UnRoundedSum();
            //This call produces StackOverflow Exception
            obj1.checkinsum(1, float_value);
            int price = 200;
            //I tried with integer value to test RoundedSum object
            //it is still throwing an exception
            //This call also produces StackOverflow Exception
            obj1.checkinsum(1, price);        
            }
        }
    } 
```

* * *

![堆栈溢出异常图像](../Images/e43b9fd6a13b9621e60527b9685a7703.png)

* * *

*当我尝试调试时，它总是在 checkinsum() 引发 StackOverflow 错误之前被捕获。当我尝试调试时，即使在执行后它也会返回到 checkinsum() 中。由于某种原因，它不断回来。我不知道会出什么问题。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T18:35:26.837

```
 checkinsum(productid,intsum); 
```

应该

```
 base.checkinsum(productid,intsum); 
```

在 UnRoundedSum 类中

编辑：解释，没有基础。（这是去基类，然后调用那里的方法）它会在UnRoundedSum中调用自己，所以这将是一个无限循环，会导致stackoverflow

编辑2：

阅读您的评论后，我认为您想要这个：

```
public class sum
{
    public void checkinsum(int productid, float sum)
    {
        //Since the sum is a float it will check the difference 
        //into unroundedsum table in the database 
        int intsum = (int)sum;
        float tempfloat = sum - intsum;
        //Check this remaining float into the database under unaccounted
        // dbobject("unroundedsum",productid,tempfloat);                
        //Now call the integer checksum with the integer value
    }
    public void checkinsum(int productid, int sum)
    {
        //Checks in price in the price table
        //dbobject("price",productid,sum);
        int temp_int = sum;
    }
} 
```

然后它将执行您想要的方法，或者它是 int int 或 int float。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:34:26.310

你有一个无限递归调用`checkinsum`。

你可能想`base.checkinsum`打电话`UnRoundedSum.checkinsum`

```
public void checkinsum(int productid,float sum)
{
    //Since the sum is a float it will check the difference 
    //into unroundedsum table in the database 
    int intsum = (int)sum;
    float tempfloat = sum - intsum;
    //Check this remaining float into the database under unaccounted
    // dbobject("unroundedsum",productid,tempfloat);                
    //Now call the integer checksum with the integer value
    base.checkinsum(productid,intsum);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T18:54:46.487

C# 标准规定“如果派生类中的任何方法适用，则基类中的方法不是候选方法”。换句话说，调用时`checkinsum(int,float)`总是优先于`base.checkinsum(int,int)`调用`checkinsum(1,1)`，因为前者在派生类中，而 C# 允许将 an`int`隐式转换为 a `float`。

请参阅：http: [//blogs.msdn.com/b/ericlippert/archive/2007/09/04/future-break-changes-part-three.aspx](http://blogs.msdn.com/b/ericlippert/archive/2007/09/04/future-breaking-changes-part-three.aspx)

# php - 导入任何 custom.js 文件时 JSON 提要中断

> ID：14632711
> 
> 赞同：3
> 
> 时间：2013-01-31T18:32:39.377
> 
> 标签：php, javascript, html, json, instagram

我使用 instagram API 在我的网站上提供实时提要，可以在此处查看[@The Dirty Cookie](http://dirtycookie.co)。

```
<script>

    $(function() {
        $.ajax({
            type: "GET",
            dataType: "jsonp",
            cache: false,
            url: "https://api.instagram.com/v1/users/<?=$user_id?>/media/recent/?access_token=13137.f59def8.1a759775695548999504c219ce7b2ecf",
            success: function(data) {
                for (var i = 0; i < <?=$num_to_display?>; i++) {
            $(".instagram").append("<div class='instagram-placeholder'><a target='_blank' href='" + data.data[i].link +"'><img class='instagram-image' src='" + data.data[i].images.low_resolution.url +"' /></a></div>");   
                }     

            }
        });
    });

    </script> 
```

这完美地工作......直到我添加

```
<script type="text/javascript">

            jQuery(function($){

                $.supersized({
                    slides  :   [ {image : 'slides\background1.jpg', title : ''} ]
                });
            });

</script> 
```

我的问题是为什么在世界上添加那个 js 会破坏 JSON 提要？Firebug 表明它甚至没有尝试从 instagram API 获取图像。在试验过程中，我发现将几乎任何其他 JavaScript 放在站点上的任何位置都会破坏该 JSON 提要。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:09:57.793

尝试在图片中使用完整的网址：`slides\background1.jpg`？

# c++ - 如何在 WinRT 中从 C++ 获取堆栈跟踪？

> ID：14632713
> 
> 赞同：8
> 
> 时间：2013-01-31T18:32:49.500
> 
> 标签：c++, exception, windows-runtime, stack-trace, windows-store-apps

我需要从 C++ 应用程序中获取堆栈跟踪，并将其序列化为字符串，以便以后对其进行解析。我在 Windows 上听说过的唯一 API 是 StackWalk64，它似乎不受支持。

如何在 Windows 应用商店应用程序中从 C++ 获取堆栈跟踪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T15:36:21.640

我能够调试复杂 WINRT 问题的唯一方法是使用 ETW 跟踪因果链。虽然设置起来有点乏味这篇文章（同时参考 c#）重点介绍了该方法：

*   [安德鲁·斯塔修克。异步因果链跟踪](http://msdn.microsoft.com/en-us/magazine/jj891052.aspx)

这里有一些关于 C/C++ 的 ETW 的不错的介绍。

*   Insung Park 博士和 Ricky Buch 撰写的 MSDN 文章中的 [Windows 事件跟踪章节“使用 ETW 改进调试和性能调整”](http://msdn.microsoft.com/en-us/magazine/cc163437.aspx#S1)
*   SO问题[如何从C ++ Windows客户端使用ETW](https://stackoverflow.com/questions/2134384/how-to-use-etw-from-a-c-windows-client)

使用此方法，您应该能够创建 ETW 事件，然后在应用程序中侦听它们并将它们作为序列化字符串包含在以后进行分析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-08T18:41:31.460

对我有用的是下面的asm代码。这仅适用于 x86 平台，因此仅在模拟器上调试时有用。返回的帧指针可用于反汇编窗口跳转到源代码。我认为应该可以使用地图文件来获取确切的源代码位置。

我使用这段代码来查找内存泄漏，结合 crtdbg 它在具有大量分配的非常大的应用程序中运行良好。VS 2013 内存分析器最多可以处理 1 分钟的数据记录。

```
 FINLINE static DWORD GetCallerFrameNum(int index) {
#if defined(_DEBUG) && defined(_MSC_VER) && defined(_M_IX86)

    DWORD caller = 0;
    __asm
    {
      mov ebx, ebp
        mov ecx, index
        inc ecx
        xor eax, eax
      StackTrace_getCaller_next :
      mov eax, [ebx + 4]
        mov ebx, [ebx]
        dec ecx
        jnz StackTrace_getCaller_next
        mov caller, eax
    }
    return caller;

#else

    return 0;

#endif
  }

  template<class T>
  void RecordStackTrace(T& vecOut) {
    vecOut.clear();
    vecOut.reserve(32);
    for (INT iInitLevel = 1; iInitLevel < 32; ++iInitLevel) {
      DWORD dwFrameNum = GetCallerFrameNum(iInitLevel);
      if (!dwFrameNum)
        return;
      vecOut.push_back(dwFrameNum);
    }
  } 
```

# backbone.js - 将 Backbone 结构转换为 TypeScript

> ID：14632714
> 
> 赞同：3
> 
> 时间：2013-01-31T18:32:53.937
> 
> 标签：backbone.js, typescript

查看 Backbonejs 的[extend 函数](http://backbonejs.org/docs/backbone.html#section-186)实现，它表明它不是一个基本的原型扩展，并且当主干扩展直接转换为 TypeScript 类时，有些东西会停止运行。将 Backbonejs 的每个组件（模型、集合、路由、视图、历史）转换为 typescript 类并确保没有损坏的正确方法是什么？

谢谢！

**更新：**[此 Q/A](https://stackoverflow.com/a/14699633/450913)中 的答案也适用于其他骨干结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T02:23:26.187

这是因为 TypeScript 生成的代码首先调用了 Router 构造函数，然后声明了路由。

*TypeScript 编译器生成的代码*

```
...
function AppRouter() {
    _super.apply(this, arguments);

    this.routes = { // <= routes defined after _super constructor
        "*actions": "defaultRoute"
    };
}
... 
```

`_bindRoutes()`要解决这个问题，只需在 TypeScript 对象构造函数上调用 Backbone Router 函数。

例子：

```
class AppRouter extends Backbone.Router {
    routes = {
        "*actions": "defaultRoute"
    }

    constructor(){
        super();
        // call _bindRoutes() here function to bind your routes
        (<any>this)._bindRoutes();
    }

    defaultRoute() {
        document.write("Default Route Invoked");
    }
}

var app_router = new AppRouter();

Backbone.history.start(); 
```

[在此处](https://github.com/Diullei/ts-backbone)下载示例代码

# android - Android安全项目的想法

> ID：14632717
> 
> 赞同：-1
> 
> 时间：2013-01-31T18:33:06.837
> 
> 标签：android, security

我是计算机科学专业的学生。作为期末项目的一部分，我需要在 Android 的安全方面做一个项目，比如演示攻击或补救措施。我搜索了可以在 2-3 个月内在 Android 上实施的不同想法。任何人都可以为我可以在 2-3 个月内开发的简单安全应用程序提出一些想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:51:07.820

在android中制作学生考勤系统。使用`ZXing library`.

每个学生都应该在其身份证上分配一个条形码或二维码，每次学生到达学院时，学生都会扫描存储学生日期和时间的卡片。如果学生没有准时来，应用程序应该自动计算迟到者，如果学生缺席，那么它应该计算总缺勤。应用程序还应该有一个 SQlite 数据库连接，它应该记录每个学生。

您只需要从[这里下载 ZXing 库](http://code.google.com/p/zxing/downloads/list)

将其导入您的项目中。

一个 Sqlite 数据库连接。

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:52:49.147

移动设备（不仅仅是 Android）的主要问题之一是隐私。这不仅需要窥视的隐私，还需要人们嗅探数据包。据说一所大学/组织（我不记得是哪一个）做了一个测试，看看他们是否可以从空中抓取数据并将其拼凑起来以获得某种信息......我认为你可以在 2- 3个月？也许，但可能不是。

在两部安卓手机之间建立安全的点对点数据连接怎么样？通过此管道，创建成功发送从文本到不同大小文件的任何内容的能力。有两个版本：一个加密，另一个不加密。通过展示从未加密线路获取数据的能力来证明加密管道实际上是安全的。

如果这太耗时，也许只是简单地显示通用 Android 系统中的所有漏洞，无论是普通 Android 版本还是某个公司的版本。我不是说你必须打破手机，但也许你可以证明你可以获取敏感数据！

# file-io - 如何在 Go 中写入文件

> ID：14632718
> 
> 赞同：1
> 
> 时间：2013-01-31T18:33:08.193
> 
> 标签：file-io, go

我已经看到[如何使用 golang 读取/写入文件？](https://stackoverflow.com/q/1821811/984260)和[http://golang.org/pkg/os/#File.Write](http://golang.org/pkg/os/#File.Write)但无法得到答案。

有没有办法，我可以直接将浮点/整数数组写入文件。还是我必须将其更改为字节/字符串才能写入。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T18:52:47.327

为此，您可以使用[encoding/binary包中的函数。](http://golang.org/pkg/encoding/binary/)

就一次写入整个数组而言，没有任何功能。您将不得不迭代数组并单独写入每个元素。理想情况下，您应该在这些元素前面加上一个整数，表示数组的长度。

如果您想要更高级别的解决方案，您可以尝试[encoding/gob](http://golang.org/pkg/encoding/gob/)包：

> 包 gob 管理 gob 流 - 在编码器（发送器）和解码器（接收器）之间交换的二进制值。一个典型的用途是传输远程过程调用 (RPC) 的参数和结果，例如由包“rpc”提供的那些。

# iphone - 从 IOS 应用程序注销的完美方法是什么？

> ID：14632719
> 
> 赞同：4
> 
> 时间：2013-01-31T18:33:11.513
> 
> 标签：iphone, ios, logout

下面的代码正在运行，但有一个错误。场景是，我首先登录进入应用系统。登录成功后，应用程序将设置 UserDefaults (UserId)。之后，我可以使用存储的 UserId 导航应用程序视图。一旦我进入设置和选项卡注销，这将清除 UserId 并进入登录视图。

BUG：当我再次登录应用程序并单击主页按钮转到iPhone桌面并关闭应用程序，然后返回再次打开它仍然存储用户ID。因此，如果我进入设置并注销，这将清除 UserId 并且不会进入登录视图。我不知道为什么。

编码：

```
- (IBAction)resetKeychain:(id)sender {

    UIActionSheet *actionSheet = [[UIActionSheet alloc] 
                 initWithTitle:@"Are you sure you want to logout?" 
                 delegate:self 
                 cancelButtonTitle:@"Cancel" 
                 destructiveButtonTitle:@"Logout"
                 otherButtonTitles:nil];
    actionSheet.actionSheetStyle = UIActionSheetStyleDefault;
    [actionSheet showFromTabBar:self.tabBarController.tabBar];
    [actionSheet release];

}

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    if (buttonIndex ==0) {
        //logout
        NSUserDefaults * defaults = [NSUserDefaults standardUserDefaults];
        //delete user ID fro user Defaults
        [defaults setObject:nil forKey:@"UserId"];
        //redirect to login view

        NewClassMoonAppDelegate * appsDelegate =[[UIApplication sharedApplication] delegate];
        [appsDelegate.window addSubview:[appsDelegate.login view]];

    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T18:44:53.683

从我*可以*从你的问题中解释出来，顺便说一下，这个问题需要格式化和连贯，我相信：

a）您的`@"UserID"`值未同步，`NSUserDefaults`因为您没有调用该`-synchronize`方法。`NSUserDefaults`将更新其内存键值存储，但不会将其写入磁盘，这意味着它会在任意时间丢失。

b）它不会发生的事实`loginView`可能与任何几个原因有关，很可能它已经是您的`UIWindow`. `login`因此，不要在您的应用程序委托中重用该属性，而是创建一个新的实例变量`View Controller`，并将其设置为`rootViewController`。

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {

    if (buttonIndex == 0) {
        NSUserDefaults * defaults = [NSUserDefaults standardUserDefaults];
        [defaults setObject:nil forKey:@"UserId"];
        [defaults synchronize];
        //redirect to login view

        NewClassMoonAppDelegate * appsDelegate =[[UIApplication sharedApplication] delegate];
        LoginViewController *login = [[LoginViewController alloc] initWithNibName...];
        [appsDelegate.window setRootViewController:nil];
        [appsDelegate.window setRootViewController:login];

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-16T02:35:44.510

**斯威夫特**：

从*max_*的回答中进行了一些更改：

```
let objectsToSave: [String] = [obj1, obj2, obj3]
for key in objectsToSave {
    NSUserDefaults.standardUserDefaults().removeObjectForKey(key)
}

 let appsDelegate = UIApplication.sharedApplication().delegate
 let storyboard = UIStoryboard(name: "MainStoryboard", bundle: nil)
 let newLoginVC: LoginViewController = storyboard.instantiateInitialViewController() as! LoginViewController
 appsDelegate?.window!!.rootViewController = nil
 appsDelegate?.window!!.rootViewController = newLoginVC 
```

编辑：我所做的唯一更改是我通过情节提要初始化 newLoginVC 而不是*initWitName*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-06T13:22:59.620

制作 UINavigation 控制器的属性并合成它，并在注销按钮上编写以下代码

```
AppDelegate * appDelegateObj =[[UIApplication sharedApplication] delegate];
    login *loginObj = [[login alloc]initWithNibName:@"login" bundle:nil];
    [appDelegateObj.window setRootViewController:nil];
    navObj=[[UINavigationController alloc]initWithRootViewController:loginObj];
    [appDelegateObj.window setRootViewController:navObj]; 
```

# ruby-on-rails - 资产管道无法编译

> ID：14632723
> 
> 赞同：1
> 
> 时间：2013-01-31T18:33:25.537
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sass, asset-pipeline

我有一个应用程序，它具有三个不同的 CSS 主题，每个主题都有十几种配色方案。在开发中一切正常，但资产管道给了我一些奇怪的问题。

基本上我有几个这样的文件

```
/themes
  /cool-theme
    _theme.scss
    /color-schemes
      red.scss 
```

这个想法是我预编译所有 *.scss 文件，除了部分文件（以下划线开头），因为它们包含在 SASS 中。所以我正在使用这段代码：

```
stylesheets_directory = "#{Rails.root}/app/assets/stylesheets"
config.assets.precompile += Dir.glob("#{stylesheets_directory}/**/*.scss").
                            map{|f| f[stylesheets_directory.size+1..-1]}.
                            select do |file|
                            if config.assets.precompile.include?(file)
                              puts "Already have #{file}"
                              false
                            elsif File.basename(file)[0...1] == "_"
                              puts "Partial detected #{file}"
                              false
                            else
                              puts "Including #{file}"
                              true
                            end
                          end 
```

代码运行良好，并在 assets:precompile 期间显示了我期望的输出。排除应有的一切，并包括应有的一切。

问题是 /public/assets 目录从不包含除 application.css 之外的任何 css 文件。它缺少 red.css、blue.css 等...

我在看什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T19:26:00.513

管道适用于 Javascript 文件和样式表的方式是默认情况下它只会为您预编译一个`application.js`和文件。`application.css`这就是您尝试将更多资产附加到`config.assets.precompile`数组的原因。你在正确的轨道上，但犯了一些错误。

### 文件扩展名

你需要重命名

```
app/assets/stylesheets/themes/cool-theme/color-schemes/red.scss 
```

至

```
app/assets/stylesheets/themes/cool-theme/color-schemes/red.css.scss 
```

这告诉管道您希望`.css`它在完成编译后成为一个文件。

### 资产路径

目前，您正在附加一条路径，例如

```
/Path/To/Your/app/assets/stylesheets/themes/cool-theme/color-schemes/red.scss 
```

到`config.assets.precompile`阵列。相反，您需要以这种格式传递路径

```
themes/cool-theme/color-schemes/red.css 
```

当您预编译资产时，您会看到`themes`在其中创建了一个新文件夹，`public/assets/`其中包含目录树的其余部分，并带有一个已编译的`red.css`文件。

* * *

我将保留您的代码以将路径附加`config.assets.precompile`到您，因为您似乎完全有能力进行上述必要的更改。

# javascript - 为 JavaScript 对象定义属性

> ID：14632724
> 
> 赞同：0
> 
> 时间：2013-01-31T18:33:33.503
> 
> 标签：javascript

这种属性的 getter 和 setter 声明是否正确且最有效？

```
var AxisRange = (function(){
    function AxisRange(){
        this._userMaxValue = 0.0;

        Object.defineProperty(AxisRange.prototype, "UserMaxValue", {
            get : function(){
                return this._userMaxValue;
            },
            set  : function(value){
                if(value != this._userMaxValue){
                    this._userMaxValue = value;
                    this.validateUserMaxValue();
                    this.validateUserStep();

                    this.synchronizeActualRange();
                }
            }
        });
    }

    AxisRange.prototype.validateUserMaxValue = function(){
        alert("validateUserMaxValue");
    };

    return AxisRange;
})(); 
```

另外，我正在使用 JetBrains WebStorm 编写我的 JS 代码，它警告我

1.  `AxisRange.prototype` 中使用的`Object.defineProperty`不可分配给参数类型 Object。
2.  一行`if(value != this._userMaxValue)`是说“可能无效使用这个”。

在我进一步输入代码之前，我需要确保我使用的是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:23:51.000

您正在构造函数中定义原型属性。这意味着每次创建新的 AxisRange 对象时都会重新定义它。将其移出构造函数。

您可能还想摆脱该闭包，因为您没有使用它来命名任何局部变量，并且它会使优化 JavaScript 的尝试变得复杂。（如果你曾经使用过 Google Closure Compiler，它会特别抱怨。）

# python - 您必须在密码中输入什么才能显示正确？

> ID：14632725
> 
> 赞同：-2
> 
> 时间：2013-01-31T18:33:37.690
> 
> 标签：python

我是 python 新手，我的一个朋友给了我这段代码。我已经搜索`\b`并`\r`发现它们分别是词尾字符和返回。但是，我完全按原样输入了它`a`，甚至在文本编辑器上复制了它，但它仍然说我失败了。那么，究竟`a`应该如何输入呢？

```
#!/usr/bin/env python
a = "password \b\b\b\b\b " + "\b\b\b " + "\b\r "
b = "123456789"
c = "qwertyuiooo"
d = "sdfghjkl;"
e = "zxcvbnm,."
b = raw_input("Password: ")
if b == a:
  print("Correct")
else:
  print "YOUR A FAILURE!!!" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:48:05.063

`\b`正如 Martijn Pieters 指出的那样，当您键入退格键时，大多数终端都不会发送字符。所以用键盘输入密码是不可能的。

但是，键盘并不是您输入数据的唯一选择。您还可以通过管道输入来自另一个文件的数据。创建一个包含密码的文件，`\b`以及所有：

```
file = open("thePassword.txt", "w")
file.write("password \b\b\b\b\b " + "\b\b\b " + "\b\r ")
file.close() 
```

然后使用`<`将您的密码文件通过管道传输到您朋友的脚本中。

```
C:\Users\AwesomeDude>myFriendsScript.py < thePassword.txt
Password: Correct 
```

# git - Git Merge：2 个开发人员合并彼此的更改

> ID：14632726
> 
> 赞同：1
> 
> 时间：2013-01-31T18:33:38.150
> 
> 标签：git, github, git-branch

我有两个开发人员同时工作，一个在 master (dev1) 上，一个在另一个分支 (dev2) 上。主人被视为“主线”。Dev1 定期合并来自 dev2 分支的更改，如下所示：

```
git checkout master
git merge origin/branch1
git push origin master 
```

这会将分支与 master 合并以进行部署，但 dev2 还希望在合并完成后从 master 获取最新更改。我认为这是最好的方法：

```
git checkout branch1
git rebase master 
```

这个对吗？

在 Github 中，我注意到他们正在处理的分支不再出现，也没有人删除它。我很确定 rebase 或 merge 不会删除分支，除非你告诉它。否则让我知道。

基本上，图表看起来像：

```
 b1  b2   b3 b4...
    /      \ /     \
   m1   m2  m3  m4  m5... 
```

m3 和 m5 是 dev1 将分别合并 b2 和 b4 的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:58:25.047

`dev2`仅当对未*发布*的提交进行变基时，变基才有效。

但是`dev2`rebased 提交已经推送到 origin （并且可能已经被合并`dev1`到`master`），那么这不是正确的方法，因为 SHA1 已更改，并且`branch1`by的下一次合并`dev1`不仅会合并*新*提交，还会合并*所有*提交，甚至那些已经合并了。

在这种特定情况下，需要`dev2`合并**——** 这将避免那些问题。`master``git merge master`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T19:14:03.793

Github 不会显示合并的分支。
利用：

```
git branch --merged 
```

列出所有合并的分支

你可以使用

```
git log --graph 
```

查看您的提交图以查看每个分支的合并位置

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T22:26:00.343

在对此进行了更多研究之后，我确实找到了一篇博客文章，该文章似乎完全涵盖了我最初在问题中提出的问题： http: [//mettadore.com/analysis/a-simple-git-rebase-workflow-explained/](http://mettadore.com/analysis/a-simple-git-rebase-workflow-explained/)。也就是说，不合并，而是将分支与主分支变基，反之亦然。主要区别在于您永远不会推送本地分支。

这种方法的主要原因是，它会将您的分支历史记录保留在主分支中，并防止出现“当多个人在一个分支上工作时，因为如果其他人在您拉动的同时拉动主分支进行合并怎么办？合并的主分支？”

我将此添加为另一种可能的选项，但如果有人发现博客中描述的内容有问题，我会很好奇。

# python - Matplotlib：使 x 轴更长

> ID：14632729
> 
> 赞同：12
> 
> 时间：2013-01-31T18:33:44.710
> 
> 标签：python, graph, matplotlib, plot

在`Matplotlib`我需要绘制一个图形，其中 x 轴上的每个整数在 y 轴之间`1`和`5000`y 轴上的点仅在非常有限的范围内。

`Matplotlib`自动压缩所有内容以让所有数据适合（横向）页面。就我而言，我希望 x 轴尽可能大，以便所有点都清晰可见。现在只有一条粗彩色线，而不是分散的点。

我怎样才能做到这一点？

（我正在保存为pdf，如果有帮助的话）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-31T18:48:59.463

您始终可以尝试指定您正在创建的图形的尺寸（以英寸为单位）。以下内容可能会有所帮助：

```
fig = plt.figure(figsize=(20, 2))
ax = fig.add_subplot(111)
ax.plot(x, y) 
```

`figsize`需要一个以英寸为单位的宽度和高度的元组。

# ehcache - ehcache write-behind 如何处理：关机、eviction b/c 缓存已满、eviction b/c TTL 过期？

> ID：14632731
> 
> 赞同：1
> 
> 时间：2013-01-31T18:33:55.373
> 
> 标签：ehcache

我们正在切换到使用 EhCache 的 write-behind 功能，但我无法从文档中看出这三种情况是如何处理的。

如果我通过 putWithWriter() 将某些内容放入缓存中并且我的 cacheWriter 尚未被调用，如果元素被驱逐（由于空间或由于 ttl）会发生什么？我的 cacheWriter 是否会在驱逐之前自动使用此项目调用？

程序退出时的类似问题....如果我调用 getCacheManager.shutdown() 是否所有未写项目都发送到我的缓存写入器？

# jqgrid - jqGrid，搜索日期

> ID：14632735
> 
> 赞同：4
> 
> 时间：2013-01-31T18:34:04.757
> 
> 标签：jqgrid

我的数据在服务器端，我编写了代码来执行所有搜索/过滤/排序。

我的 jqGrid 有一个 filterToolbar 和一个搜索按钮。

不幸的是，当我搜索时，我为日期选择的值并未在请求中发送。然而，奇怪的是，当它是 filterToolbar 的选定日期时它会发送它？！？

为什么这里没有数据？

`{"groupOp":"AND","rules":[{"field":"RunDate","op":"le","data":""}]}`

这是我的网格代码。

```
var loadFileInfoList = function (fileInfoList, pager) {
    fileInfoList.jqGrid({
        url: 'GetFiles',
        datatype: 'json',
        mtype: 'POST',
        colNames: ['Id', 'Name', 'Interface', 'Amount', 'Type', 'Created', 'Status'],
        colModel: [
                { jsonmap: 'Id', name: 'Id', formatter: 'integer', align: 'right', hidden: true },
                { jsonmap: 'Name', name: 'Name', align: 'right', hidden: true },
                { jsonmap: 'InterfaceName', name: 'InterfaceName', align: 'left', width: '100%', sorttype: 'text', frozen: true,
                    search: true,
                    searchoptions: {
                        sopt: ['cn']
                    }
                },
                { jsonmap: 'Amount', name: 'Amount', formatter: 'currency', align: 'right', width: '100%', sorttype: 'number',
                    search: true,
                    searchoptions: {
                        sopt: ['ge', 'le']
                    }
                },
                { jsonmap: 'Type', name: 'Type', align: 'right', width: '100%', sorttype: 'text',
                    search: true, stype: 'select',
                    searchoptions: {
                        value: getTypeFilterOptions(),
                        sopt: ['eq']
                    }
                },
                { jsonmap: 'RunDate', name: 'RunDate', formatter: 'date', align: 'right', width: '100%', sorttype: 'date',
                    search: true,
                    datefmt: 'dd/mm/yyyy',
                    searchrules: {
                        date: true
                    },
                    searchoptions: {
                        sopt: ['ge', 'le'],
                        dataInit: function (elem) {
                            $(elem).datepicker({
                                dateFormat: 'dd/mm/yy',
                                changeYear: true,
                                changeMonth: true,
                                showButtonPanel: true,
                                onSelect: function () {
                                    $(this).keydown();
                                }
                            });
                        }
                    }
                },
                { jsonmap: 'Status', name: 'Status', align: 'right', width: '100%', sorttype: 'text', formatter: formatStatus,
                    search: true, stype: 'select',
                    searchoptions: {
                        value: getStatusFilterOptions(),
                        sopt: ['eq']
                    }
                }
            ],
        autoencode: true,
        sortname: 'RunDate',
        sortorder: 'desc',
        pager: pager,
        rowNum: 5,
        viewrecords: true,
        height: '100%',
        autowidth: true,
        ignoreCase: true,
        jsonReader: {
            repeatitems: false,
            root: "rows"
        },
        altRows: true,
        altclass: 'jqGridAltRow',
        loadComplete: function () {
            $("tr.jqgrow:odd").addClass('jqGridAltRow');
        }
    });

    fileInfoList.jqGrid('navGrid', pager,
        { edit: false, add: false, del: false },
        {},
        {},
        {},
        { closeOnEscape: true, closeAfterSearch: true, multipleSearch: true, multipleGroup: false }
    );

    fileInfoList.jqGrid('filterToolbar', { searchOnEnter: false, enableClear: true, stringResult: true });
};

loadFileInfoList($('#jqgFileInfoList'), '#jqgPagerFileInfoList'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T18:42:46.333

我想你可以通过改变`onSelect`datepicker 的回调来解决这个问题。你可以改变

```
onSelect: function () {
    $(this).keydown();
} 
```

至

```
onSelect: function () {
    $(this).trigger('change');
} 
```

[您还可以使用我在答案](https://stackoverflow.com/a/13009927/315935)中发布的更复杂的构造，或者从[这里](https://stackoverflow.com/a/6876951/315935)使用更简单的形式。

# ajax - 如何使用 VB.NET Web 服务返回的对象

> ID：14632737
> 
> 赞同：0
> 
> 时间：2013-01-31T18:34:10.860
> 
> 标签：ajax, vb.net, web-services

我有一个将字符串传递给 VB.NET Web 方法的 Javascript 函数。这是Javascript

```
function jQuerySerial() {
//I SET A VARIABLE TO THE STRING I IS PASSED INTO MY WEB METHOD
var str = "{ 'str': 'hello world'}";

//THEN I PASS IT INTO MY VB.NET WEB METHOD
$.ajax({
 type: "POST",
url: "test_WebService.asmx/testWebService",
data: str,
contentType: "application/json; charset=utf-8",
dataType: "json",
success: function (e) {
    alert("It worked: " + e);
},
error: function (e) {
    alert("There was an error retrieving records: " + e);
}
});
}//END jQuerySerial 
```

这是 VB.NET 网络方法。Web 方法只是获取字符串并将其发送回 Javascript：

```
 <WebMethod( )> _
Public Function testWebService(str As String) As String
    Return str
End Function 
```

当 Web 方法成功返回时，我的 AJAX 块返回以下消息：

```
"It worked: [object Object]" 
```

所以我的问题是，如何使用返回的对象？该对象应该是一个包含单词“hello world”的字符串，但我如何访问字符串值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:36:15.240

ASP.Net WebMethods 将它们的返回值包装在一个带有`d`属性的 JSON 对象中。（您可以在浏览器开发者工具的响应正文中看到这一点）

您需要编写`e.d`以获取实际值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:37:40.997

如果你这样做：

```
$(e).text() 
```

你会得到你的文字；

所以将其更改为：

```
function jQuerySerial() {
//I SET A VARIABLE TO THE STRING I IS PASSED INTO MY WEB METHOD
var str = "{ 'str': 'hello world'}";

//THEN I PASS IT INTO MY VB.NET WEB METHOD
$.ajax({
 type: "POST",
url: "test_WebService.asmx/testWebService",
data: str,
contentType: "application/json; charset=utf-8",
dataType: "json",
success: function (e) {
    alert("It worked: " + $(e).text());
},
error: function (e) {
    alert("There was an error retrieving records: " + e);
}
});
}//END jQuerySerial 
```

# web-services - .htaccess 重写条件

> ID：14632747
> 
> 赞同：0
> 
> 时间：2013-01-31T18:34:55.573
> 
> 标签：web-services, apache, .htaccess

任何人都可以用这个 .htaccess 文件阻止我吗，我一直在尝试做一个例外，所以我可以访问我的子域 form.domain.com 我尝试使用 RewriteCond %{REQUEST_URI} !^/form/?$ 和其他几个命令但没有运气

.htaccess：

```
#######################
#   N - T H I N G !   #
#######################

# Apache options
Options +FollowSymLinks -Indexes
RewriteEngine on

# Allow only GET and POST verbs
RewriteCond %{REQUEST_METHOD} !^(GET|POST)$ [NC,OR]

# Ban Typical Vulnerability Scanners and others
# Kick out Script Kiddies
RewriteCond %{HTTP_USER_AGENT} ^(java|curl|wget).* [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^.*(libwww-perl|curl|wget|python|nikto|wkito|pikto|scan|acunetix).* [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^.*(winhttp|HTTrack|clshttp|archiver|loader|email|harvest|extract|grab|miner).* [NC,OR]

# Error Page
ErrorDocument 404 /404

# Redirect attachments
RewriteRule ^files/attachments/(.*)/(.*)/(.*)$ files/attachments/$1/$2/$3 [L]

# Redirect all requests to index.php
RewriteRule ^(.*)$ index.php [L,QSA] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:32:12.423

要匹配域，您应该使用 %{HTTP_HOST}，如下所示：

```
RewriteCond %{HTTP_HOST} ^form.domain.com$
RewriteRule ^.*$ - [L] 
```

也就是说，如果域与 form.domain.com 匹配，则允许 URL 并停止处理规则。

有关更多详细信息，请参阅[Apache 文档](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond)。

# jquery - jQuery ajax 页面重新加载

> ID：14632753
> 
> 赞同：4
> 
> 时间：2013-01-31T18:35:12.340
> 
> 标签：jquery, ajax, asynchronous, reload, synchronous

我们正在发出多个 ajax 请求以在 Web 应用程序中“保存”数据，然后重新加载页面。我们遇到了这样一种情况，即（因为请求是异步发出的）在 ajax 调用完成时或之前重新加载页面。对此的简单解决方案是使用 "async": false 选项进行 ajax 调用，强制同步调用。这似乎可行，但是在执行任何调用之前运行的对话框代码会延迟运行。

任何意见是极大的赞赏！

还应该注意的是，在重新加载之前放置一个 alert() 允许发出 ajax 请求。（警报显然会延迟重新加载足够长的时间以使请求成功通过）

更新了代码示例：

```
$(".submit_button").click(function(){ 
    popupMessage();
    sendData(); //the ajax calls are all in here
    location.reload();
});

function sendData() {
    //a bunch of these:
    $.ajax({
    "dataType": "text",
    "type": "POST",
    "data": data,
    "url": url,
    "success": function (msg) {}
    }).done(function( msg ) {

    }); 
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-25T06:18:50.723

来到这里寻求类似的问题并决定回答，即使对于可能最终遇到同样问题的其他人来说已经很晚了。

我相信您需要的是 Ajax 全球事件。 [请参阅 API 文档](http://api.jquery.com/Ajax_Events/)

尤其是这里；

> 全球活动
> 
> 这些事件在文档上触发，调用任何可能正在侦听的处理程序。你可以像这样监听这些事件：

```
$(document).bind("ajaxSend", function(){

     // You should use "**ajaxStop**" instead of "ajaxComplete" if there are more
     // ongoing requests which are not completed yet

     }).bind("ajaxStop", function(){

     // call your reload function here

     }); 
```

现在对于您的情况，如果您使用“ajaxStop”，而不是绑定“ajaxComplete”事件，这将在所有正在处理的 Ajax 请求完成时触发。

我在小提琴上复制粘贴了您的原始代码，并添加了我刚刚推荐的部分和一些日志。[jsfiddle.net/Tt3jk/7/](http://jsfiddle.net/Tt3jk/7/)`SendData2()`出于测试目的，我从您的第一个函数的成功事件中调用了一个类似的函数来模拟丑陋的异步请求场景。如果您在真实环境中测试此代码（或将 SendData2 与您的 url 一起放置，该 url 以您的数据类型“文本”响应，您应该在控制台上看到此输出。（1-是来自 console.log`SendData()`和 2-来自`SendData2()`）：

```
1-sending...
waiting for all requests to complete...
1-success:!
2-sending...
waiting for all requests to complete...
1-done:
2-success:!
2-done:
completed now! 
```

事实上，当你的 reload 函数被调用时，你甚至可以在小提琴上看到它（请求上有错误）。如果你使用“ajaxComplete”，你的 jQuery .click() 函数中的 reload 函数很早就被调用了。但是，如果您使用“ajaxStop”并在触发“ajaxStop”事件时调用reload函数，则在所有请求完成后会调用reload函数。

我不知道小提琴是否会在一段时间后消失，所以我也会在这里发布我所做的更改，而无需控制台日志：

```
$(".submit_button").click(function () {
            popupMessage();
            sendData(); //the ajax calls are all in here

            // consider reloading somewhere else
});

$(document).bind("ajaxSend", function () {
            console.log("waiting for all requests to complete...");
            // ajaxStop (Global Event)
            // This global event is triggered if there are no more Ajax requests being processed.
}).bind("ajaxStop", function () {
            // maybe reload here?
            location.reload();
});

function popupMessage() {
            alert("Pop!");
}

function sendData() {
        //a bunch of these:
        $.ajax({
            "dataType": "text",
                "type": "POST",
                "data": "temp",
                "url": "your url here!",
                "beforeSend": function (msg) {
                    console.log("1-sending...");
                },
                "success": function (msg) {
                console.log("1-success!");
                sendData2(); // again
            },
                "error": function (msg) {
                console.log("1-error!");
            }
        }).done(function (msg) {
            console.log("1-done!");
        });
}

function sendData2() {
        //a bunch of these:
        $.ajax({
            "dataType": "text",
                "type": "POST",
                "data": "temp",
                "url": "your url here!",
                "beforeSend": function (msg) {
                    console.log("2-sending...");
                },
                "success": function (msg) {
                console.log("2-success!");
            },
                "error": function (msg) {
                console.log("2-error!");
            }
        }).done(function (msg) {
            console.log("2-done!");
        });
} 
```

PS。不确定从请求中发出另一个请求是否是一种好习惯，可能不是。但我把它放在那里是为了展示“ajaxStop”事件是如何延迟触发的，直到所有正在进行的请求都完成（或至少完成但有错误）......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T18:52:19.573

这取决于您执行请求的方式例如（您不提交表单。否则您需要阻止表单提交）

```
$.ajax({
   url: 'some_url',
   type:    'GET',
   data: 'var1=value1&var2=value2',
 success: function(){
   //do smth
 },
 error: function(){
   alert(w.data_error);
   document.location.reload(); 
 }
 complete: function(){ //A function to be called when the request finishes (after success and error callbacks are executed) - from jquery docs
   //do smth if you need
   document.location.reload(); 
 }
}); 
```

看看完整的块

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-19T13:37:08.207

这会有所帮助；

```
$("body").load("default.aspx"); 
```

描述：从服务器加载数据并将返回的 HTML 放入匹配的元素中。 [http://api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-05T13:54:10.210

我还没有看到这里提到它，所以我将添加这个：

如果在使用带有 document.location.reload() 的 ajax 调用时您的内容似乎没有刷新，则将 true 作为参数添加到 reload 函数 - 这将告诉它不要使用页面的缓存版本，而是强制重新调用服务器。

因此，重新加载页面的脚本应如下所示：

document.location.reload(true);

# iphone - 循环 UIScrollView 但继续减速

> ID：14632754
> 
> 赞同：4
> 
> 时间：2013-01-31T18:35:14.790
> 
> 标签：iphone, ios, uiscrollview

我设置了一个无限滚动视图，当它达到 0 内容偏移量时，我将其设置为最大内容偏移量，反之亦然。

IE

```
[scrollView setContentOffset:CGPointMake(0,0) animated:NO]; 
```

这可行，但它会阻止 UIScrollView 减速。

有没有办法做到这一点，但保持 UIScrollView 减速？

我试过这个...

```
float declerationRate = scrollView.decelerationRate;
[scrollView setContentOffset:CGPointMake(scrollView.frame.size.width, 0) animated:NO];
scrollView.decelerationRate = declerationRate; 
```

但它没有用。

**编辑**

我刚刚意识到 decelerationRate 是确定减速的慢/快的设置。

我需要的是从滚动视图中获取当前速度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T19:38:17.720

是的，我不得不稍微调整一下这个想法。

事实证明，尝试设置 UIScrollView 的速度很困难……非常困难。

所以无论如何，我有点调整它。

这实际上是一个迷你项目，在回答了别人的 SO 问题并认为我会尝试自己解决之后。

我想创建一个微调器应用程序，我可以滑动它来旋转箭头，使其旋转并减速到一个点。

我所做的是设置一个 UIImageView，箭头指向上方。

然后覆盖UIImageView的是一个UIScrollView。

然后在代码中...

```
@interface MyViewController () <UIScrollViewDelegate>

@property (nonatomic, weak) IBOutlet UIScrollView *scrollView;
@property (nonatomic, weak) IBOutlet UIImageView *arrowView;

@end

@implementation MyViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    //make the content size really big so that the targetOffset of the deceleration will never be met.
    self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * 100, self.scrollView.frame.size.height);
    //set the contentOffset of the scroll view to a point in the center of the contentSize.
    [self.scrollView setContentOffset:CGPointMake(self.scrollView.frame.size.width * 50, 0) animated:NO];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)rotateImageView
{
    //Calculate the percentage of one "frame" that is the current offset.

    // each percentage of a "frame" equates to a percentage of 2 PI Rads to rotate
    float minOffset = self.scrollView.frame.size.width * 50;
    float maxOffset = self.scrollView.frame.size.width * 51;

    float offsetDiff = maxOffset - minOffset;

    float currentOffset = self.scrollView.contentOffset.x - minOffset;

    float percentage = currentOffset / offsetDiff;

    self.arrowView.transform = CGAffineTransformMakeRotation(M_PI * 2 * percentage);
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    //the scrollView moved so update the rotation of the image
    [self rotateImageView];
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    //the scrollview stopped moving.
    //set the content offset back to be in the middle
    //but make sure to keep the percentage (used above) the same
    //this ensures the arrow is pointing in the same direction as it ended decelerating

    float diffOffset = scrollView.contentOffset.x;

    while (diffOffset >= scrollView.frame.size.width) {
        diffOffset -= scrollView.frame.size.width;
    }

    [scrollView setContentOffset:CGPointMake(scrollView.frame.size.width * 50 + diffOffset, 0) animated:NO];
}

@end 
```

这给出了像命运之轮一样的旋转器的预期效果，它将在任一方向无休止地旋转。

虽然有一个缺陷。如果用户不停地旋转和旋转而不让它停止，那么它只会在任一方向旋转 50 次，然后才会停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:45:13.630

正如我在评论中所说，您正在做的事情是产生预期的结果，做您想做的一种方法是将内容偏移设置为顶部，然后通过使用内容大小高度和减速值，您可以制作动画再次偏移内容，看看这个答案：[https ://stackoverflow.com/a/6086521/662605](https://stackoverflow.com/a/6086521/662605)

在感觉正确之前，您将不得不玩一些数学，但我认为这是一个合理的解决方法。

减速度越低，动画（时间）越长，动画越多（距离）。让我知道你的想法。

正如你所说，减速可能不是你唯一需要的。因此，您可以尝试在 contentOffset 上使用 KVO 来计算半秒内的平均速度，或许可以了解速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-27T22:09:07.307

可能有几种不同的方法可以做到这一点。理想情况下，您不必进行任何类型的计算来模拟剩余的减速物理或完全弄乱`UIScrollView`的内部结构。它很容易出错，而且不太可能完全符合`UIScrollView`每个人习惯的物理原理。

相反，对于滚动视图只是手势驱动程序的情况（即，您实际上不需要在其中显示任何内容），我认为最好只有一个非常宽的滚动视图。将其初始内容偏移设置为其内容大小的中心。在`scrollViewDidScroll(_:)`中，计算遍历屏幕宽度的百分比：

```
let pageWidth = scrollView.frame.width
let percentage = (scrollView.contentOffset.x % pageWidth) / pageWidth 
```

这将基本上循环从`0.0`到`1.0`（向右移动）或从`1.0`到`0.0`（向左移动）循环。您可以将这些标准化值转发给其他可以响应它的函数，也许是为了驱动动画。只需构建任何响应于此的代码，以便在从`0.0`to`1.0`或 from `1.0`to跳转时看起来无缝`0.0`。

当然，如果您需要循环播放的速度比正常的滚动视图速度更快或更慢，只需使用屏幕宽度的更小或更大的比例。我就是随便挑的。

如果您担心碰到可滚动内容的边缘，那么当滚动视图完全停止¹时，将其内容偏移重置为相同的初始中心值，加上屏幕宽度的任何剩余部分（或任何你想要的使用）滚动视图在它停止滚动时所在的位置。

鉴于上面的重置方法，即使对于托管可见内容的滚动视图，只要您更新任何视图框架/模型值以考虑重置滚动偏移量，您就可以有效地实现无限滚动视图。

* * *

¹要正确捕获这一点，请实现`scrollViewDidEndDecelerating(_:)`and `scrollViewDidEndDragging(_:willDecelerate:)`，仅在后一种情况下调用您的“完全休息”函数`willDecelerate`is `false`。总是在前一种情况下调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-28T03:46:31.703

我发现如果你打电话

```
[scrollView setContentOffset:CGPointMake(0,0) animated:NO]; 
```

在点（0,0），它会触发 UIScrollView 的反弹动作，然后减速将停止。`setContentOffset`当您调用内容的绑定时，也会发生相同的情况。

因此，您可以调用`setContentOffset`point(10,10) 或其他地方以轻松保持减速。

# git - Jenkins 在 GitHub 上构建“找不到当前版本”

> ID：14632760
> 
> 赞同：2
> 
> 时间：2013-01-31T18:35:49.347
> 
> 标签：git, github, jenkins, git-submodules

我在 GitHub 有一个（私人）项目，它有一个子模块。当我在终端（OSX）的命令行调用 ant 构建时，构建很好。但是当`build.xml`通过 Jenkins 调用相同的主项目时，主项目是可以的，但是对于子模块，我得到：

> /usr/local/git/bin/git submodule update --init --recursive 返回状态码 1：stdout：stderr：致命：需要单个修订版无法在子模块路径“mysubmodule”中找到当前修订版

终端中命令行上的相同 git 命令返回

> 子模块路径“mysubmodule”：签出“e9a04b127f40ba4c11f45718761a0e7965638394”

我是 Jenkins 和 GitHub 的相对初学者，坦率地说，我不确定该去哪里。我在网上搜索过，但发现关于此错误的内容很少且明显不相关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-17T10:47:18.840

我的 Windows 从站上有相同的错误消息，我发现我根本没有读取受保护存储库的权限。将私钥添加到`Git\.ssh`目录可解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-04T00:28:21.410

尝试使用`git submodule update --remote --recursive`来更新您的子模块。

# c# - 有什么方法可以减少这两个 linq 查询中的重复

> ID：14632761
> 
> 赞同：6
> 
> 时间：2013-01-31T18:35:52.763
> 
> 标签：c#, linq, entity-framework

建立一堆报告，必须对不同的领域一遍又一遍地做同样的事情

```
 public List<ReportSummary> ListProducer()
    {
        return (from p in Context.stdReports                    
                group p by new { p.txt_company, p.int_agencyId }
                    into g
                    select new ReportSummary
                    {
                        PKi = g.Key.int_agencyId,
                        Name = g.Key.txt_company,
                        Sum = g.Sum(foo => foo.lng_premium),
                        Count = g.Count()
                    }).OrderBy(q => q.Name).ToList();
    }

    public List<ReportSummary> ListCarrier()
    {
        return (from p in Context.stdReports
                group p by new { p.txt_carrier, p.int_carrierId }
                    into g
                    select new ReportSummary
                    {
                        PKi = g.Key.int_carrierId,
                        Name = g.Key.txt_carrier,
                        Sum = g.Sum(foo => foo.lng_premium),
                        Count = g.Count()
                    }).OrderBy(q => q.Name).ToList();
    } 
```

我的脑海里一片空白，我如何才能将这两者结合在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:49:34.120

你可以这样做：

```
public List<ReportSummary> GetList(Func<Record, Tuple<string, int>> fieldSelector)
{
    return (from p in Context.stdReports                    
        group p by fieldSelector(p)
            into g
            select new ReportSummary
            {
                PKi = g.Key.Item2
                Name = g.Key.Item1,
                Sum = g.Sum(foo => foo.lng_premium),
                Count = g.Count()
            }).OrderBy(q => q.Name).ToList();
} 
```

然后你可以这样称呼它：

```
var summary = GetList(rec => Tuple.Create(rec.txt_company, rec.int_agencyId)); 
```

或者：

```
var summary = GetList(rec => Tuple.Create(rec.txt_carrier, rec.int_carrierId)); 
```

当然，您需要用实际返回`Record`的任何类型进行替换。`Context.stdReports`

我还没有检查它是否会编译，但你明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:42:49.320

看起来唯一改变的是分组参数的名称。你能写一个包装函数来接受指定分组参数的 lambdas 吗？或者甚至是一个接受两个字符串然后构建原始 T-SQL 的包装函数，而不是使用 LINQ？

或者，我不知道这是否会编译，您能否为 group 语句中的字段设置别名，以便始终可以以相同的方式引用分组构造，例如`g.Key.id1`and `g.Key.id2`？然后，您可以将分组构造传递给构造`ReportSummary`函数，并在一个地方进行左手/右手赋值。（你需要将它作为动态传递，因为它在调用站点是一个匿名对象）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T19:42:12.440

由于两个查询之间的所有变化都是组键，因此对其进行参数化。由于它是一个复合键（其中包含多个值），因此您需要创建一个简单的类来保存这些值（具有通用名称）。

在这种情况下，要对其进行参数化，请将键选择器作为函数的参数。它必须是一个表达式和方法语法才能使它工作。然后，您可以将其概括为一个函数：

```
public class GroupKey
{
    public int Id { get; set; }
    public string Name { get; set; }
}

private IQueryable<ReportSummary> GetReport(
    Expression<Func<stdReport, GroupKey>> groupKeySelector)
{
    return Context.stdReports
        .GroupBy(groupKeySelector)
        .Select(g => new ReportSummary
        {
            PKi = g.Key.Id,
            Name = g.Key.Name,
            Sum = g.Sum(report => report.lng_premium),
            Count = g.Count(),
        })
        .OrderBy(summary => summary.Name);
} 
```

然后只需使用适当的键选择器在您的查询中使用此功能。

```
public List<ReportSummary> ListProducer()
{
    return GetReport(r =>
        new GroupKey
        {
            Id = r.int_agencyId,
            Name = r.txt_company,
        })
        .ToList();
}

public List<ReportSummary> ListCarrier()
{
    return GetReport(r =>
        new GroupKey
        {
            Id = r.int_carrierId,
            Name = r.txt_carrier,
        })
        .ToList();
} 
```

我不知道您为实体映射了哪些类型，所以我做了一些假设。使用适合您情况的任何内容。

# java - GWT SplitLayoutPanel 不显示

> ID：14632763
> 
> 赞同：0
> 
> 时间：2013-01-31T18:35:59.453
> 
> 标签：java, gwt

作为 GWT 的新手，我无法使用 GWT 2.5.0 和 Eclipse Juno 插件在 Google Chrome 版本 24.0.1312.57 m 中显示 SplitLayoutPanel。为了了解它是如何工作的，我逐字遵循[http://www.giantflyingsaucer.com/blog/?p=2324](http://www.giantflyingsaucer.com/blog/?p=2324)上的示例，除了将 RootLayoutPanel 更改为 RootPanel 以及以下任何链接中建议的其他一些内容：

[当我使用 SplitLayoutPanel 时，GWT 小部件未显示](https://stackoverflow.com/questions/7337924/gwt-widget-not-showing-when-i-use-a-splitlayoutpanel)

[UiBinder 和 SplitLayoutPanel 不显示](https://stackoverflow.com/questions/3463706/uibinder-and-splitlayoutpanel-not-displaying)

[无法让 SplitLayoutPanel 工作 - GWT + UIBinder 让我发疯](https://stackoverflow.com/questions/2495457/cant-get-splitlayoutpanel-working-gwt-uibinder-are-driving-me-crazy/2495577#2495577)

[将 TabLayoutPanel 放入 SplitLayoutPanel 时为空页](https://stackoverflow.com/questions/7230766/empty-page-when-put-tablayoutpanel-to-splitlayoutpanel)

无论我尝试什么，SplitLayoutPanel 都不会显示；我得到的只是一个空白页。对我所缺少的有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T03:51:49.533

你不能这样混合/匹配。[https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels#LayoutPanels](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels#LayoutPanels)

RootPanel 系统是较旧的方法，不适合 LayoutPanel 的概念。

SplitLayoutPanel 不应与 RootPanel 一起使用。**期间**。

# python - 如何在 Numpy/Scipy 中获得向量与平面的正交距离？

> ID：14632769
> 
> 赞同：6
> 
> 时间：2013-01-31T18:36:15.527
> 
> 标签：python, numpy, scipy, distance, orthogonal

我有一组向量作为 numpy 数组。我需要从由 2 个向量 v1 和 v2 定义的平面中获取每个平面的正交距离。我可以使用 Gram-Schmidt 过程轻松获得单个向量。有没有一种方法可以非常快速地处理许多向量，而无需遍历每个向量或使用 np.vectorize？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T18:45:09.870

您需要构造平面的单位法线：

在三个维度上，这很容易做到：

```
nhat=np.cross( v1, v2 )
nhat=nhat/np.sqrt( np.dot( nhat,nhat) ) 
```

然后用你的每个向量点这个；我假设是一个`Nx3`矩阵`M`

```
result=np.zeros( M.shape[0], dtype=M.dtype )
for idx in xrange( M.shape[0] ):
    result[idx]=np.abs(np.dot( nhat, M[idx,:] )) 
```

所以这`result[idx]`就是`idx'th`向量到平面的距离。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T21:51:51.073

实现@Jaime 答案的更明确的方法是，您可以明确说明投影运算符的构造：

```
def normalized(v):
    return v/np.sqrt( np.dot(v,v))
def ortho_proj_vec(v, uhat ):
    '''Returns the projection of the vector v  on the subspace
    orthogonal to uhat (which must be a unit vector) by subtracting off
    the appropriate multiple of uhat.
    i.e. dot( retval, uhat )==0
    '''
    return v-np.dot(v,uhat)*uhat

def ortho_proj_array( Varray, uhat ):
     ''' Compute the orhogonal projection for an entire array of vectors.
     @arg Varray:  is an array of vectors, each row is one vector
          (i.e. Varray.shape[1]==len(uhat)).
     @arg uhat: a unit vector
     @retval : an array (same shape as Varray), where each vector
               has had the component parallel to uhat removed.
               postcondition: np.dot( retval[i,:], uhat) ==0.0
               for all i. 
    ''' 
    return Varray-np.outer( np.dot( Varray, uhat), uhat )

# We need to ensure that the vectors defining the subspace are unit norm
v1hat=normalized( v1 )

# now to deal with v2, we need to project it into the subspace
# orhogonal to v1, and normalize it
v2hat=normalized( ortho_proj(v2, v1hat ) )
# TODO: if np.dot( normalized(v2), v1hat) ) is close to 1.0, we probably
# have an ill-conditioned system (the vectors are close to parallel)

# Act on each of your data vectors with the projection matrix,
# take the norm of the resulting vector.
result=np.zeros( M.shape[0], dtype=M.dtype )
for idx in xrange( M.shape[0] ):
    tmp=ortho_proj_vec( ortho_proj_vec(M[idx,:], v1hat), v2hat )             
    result[idx]=np.sqrt(np.dot(tmp,tmp))

 # The preceeding loop could be avoided via
 #tmp=orhto_proj_array( ortho_proj_array( M, v1hat), v2hat )
 #result=np.sum( tmp**2, axis=-1 )
 # but this results in many copies of matrices that are the same 
 # size as M, so, initially, I prefer the loop approach just on
 # a memory usage basis. 
```

这实际上只是对 Gram-Schmidt 正交化过程的概括。请注意，在此过程结束时，我们有`np.dot(v1hat, v1hat.T)==1`, `np.dot(v2hat,v2hat.T)==1`, `np.dot(v1hat, v2hat)==0`（在数值精度范围内）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T06:21:44.493

**编辑**我写的原始代码不能正常工作，所以我把它删除了。但是遵循相同的想法，下面解释，如果你花一些时间思考它，就不需要克莱默规则，代码可以简化如下：

```
def distance(v1, v2, u) :
    u = np.array(u, ndmin=2)
    v = np.vstack((v1, v2))
    vv = np.dot(v, v.T) # shape (2, 2)
    uv = np.dot(u, v.T) # shape (n ,2)
    ab = np.dot(np.linalg.inv(vv), uv.T) # shape(2, n)
    w = u - np.dot(ab.T, v)
    return np.sqrt(np.sum(w**2, axis=1)) # shape (n,) 
```

为了确保它正常工作，我将 Dave 的代码打包到一个函数中，`distance_3d`并尝试了以下操作：

```
>>> d, n = 3, 1000
>>> v1, v2, u = np.random.rand(d), np.random.rand(d), np.random.rand(n, d)
>>> np.testing.assert_almost_equal(distance_3d(v1, v2, u), distance(v1, v2, u)) 
```

但当然它现在适用于任何`d`：

```
>>> d, n = 1000, 3
>>> v1, v2, u = np.random.rand(d), np.random.rand(d), np.random.rand(n, d)
>>> distance(v1, v2, u)
array([ 10.57891286,  10.89765779,  10.75935644]) 
```

* * *

你必须分解你的向量，我们称之为`u`，在两个向量之和中，`u = v + w`，`v`在平面内，因此可以分解为`v = a * v1 + b * v2`，而`w`垂直于平面，因此`np.dot(w, v1) = np.dot(w, v2) = 0`。

如果你用 和 写并`u = a * v1 + b * v2 + w`取这个表达式的点积，你会得到两个有两个未知数的方程：`v1``v2`

```
np.dot(u, v1) = a * np.dot(v1, v1) + b * np.dot(v2, v1)
np.dot(u, v2) = a * np.dot(v1, v2) + b * np.dot(v2, v2) 
```

由于它只是一个 2x2 系统，我们可以使用[Cramer 规则](http://en.wikipedia.org/wiki/Cramer%27s_rule#Explicit_formulas_for_small_systems)解决它：

```
uv1 = np.dot(u, v1)
uv2 = np.dot(u, v2)
v11 = np.dot(v1, v2)
v22 = np.dot(v2, v2)
v12 = np.dot(v1, v2)
v21 = np.dot(v2, v1)
det = v11 * v22 - v21 * v12
a = (uv1 * v22 - v21 * uv2) / det
b = (v11 * uv2 - uv1 * v12) / det 
```

从这里，您可以获得：

```
w = u - v = u - a * v1 - b * v2 
```

到平面的距离是 的模数`w`。

# linux - /proc/iomem 显示的“系统 RAM”是否像未分配的内存？

> ID：14632771
> 
> 赞同：4
> 
> 时间：2013-01-31T18:36:46.730
> 
> 标签：linux, linux-kernel, linux-device-driver

我可以找出其他内存映射信息，例如我想知道的设备总线特定内存，例如这里的系统 RAM 是什么意思..

```
0000000-0000ffff : reserved
00010000-0009c3ff : System RAM
0009c400-0009ffff : reserved
000a0000-000bffff : PCI Bus 0000:00
  000a0000-000bffff : Video RAM area
000c0000-000c7fff : Video ROM
000d0000-000d0fff : Adapter ROM
000d2000-000d3fff : reserved
000d4000-000d7fff : PCI Bus 0000:00
000d8000-000dbfff : PCI Bus 0000:00
000dc000-000dffff : PCI Bus 0000:00
000e0000-000fffff : reserved
  000f0000-000fffff : System ROM
00100000-bb27bfff : System RAM
  01000000-015b0afb : Kernel code
  015b0afc-01878c3f : Kernel data
  01939000-01a11fff : Kernel bss
bb27c000-bb281fff : reserved
bb282000-bb3e9fff : System RAM
bb3ea000-bb40efff : reserved
bb40f000-bb46efff : System RAM
bb46f000-bb46ffff : reserved
bb470000-bb4f0fff : ACPI Non-volatile Storage
bb4f1000-bb70efff : reserved
bb70f000-bb716fff : System RAM
bb717000-bb71efff : reserved
bb71f000-bb77dfff : System RAM
bb77e000-bb79efff : ACPI Non-volatile Storage
bb79f000-bb7e1fff : System RAM
bb7e2000-bb7fefff : ACPI Tables
bb7ff000-bb7fffff : System RAM
bb800000-bfffffff : reserved
c0000000-dfffffff : PCI Bus 0000:00
  c0000000-c04fffff : PCI Bus 0000:04
  c0500000-c06fffff : PCI Bus 0000:03
  c0700000-c08fffff : PCI Bus 0000:02
  c0900000-c0afffff : PCI Bus 0000:02
  c0b00000-c0b00fff : Intel Flush Page
  d0000000-dfffffff : 0000:00:02.0
e0000000-efffffff : PCI MMCONFIG 0000 [bus 00-ff]
  e0000000-efffffff : reserved
    e0000000-efffffff : pnp 00:09
f0000000-febfffff : PCI Bus 0000:00
  f0000000-f03fffff : 0000:00:02.0
  f0400000-f04fffff : PCI Bus 0000:03
    f0400000-f0403fff : 0000:03:00.0
  f0700000-f0703fff : 0000:00:1b.0
    f0700000-f0703fff : ICH HD audio
  f0704000-f0704fff : reserved
    f0704000-f0704fff : 0000:00:1f.6
      f0704000-f0704fff : ips thermal sensor
  f0705000-f07057ff : 0000:00:1f.2
    f0705000-f07057ff : ahci
  f0705800-f070580f : 0000:00:16.0
    f0705800-f070580f : mei
  f0706000-f07063ff : 0000:00:1a.0
    f0706000-f07063ff : ehci_hcd
  f0706400-f07067ff : 0000:00:1d.0
    f0706400-f07067ff : ehci_hcd
  f0706800-f07068ff : 0000:00:1f.3
  f0800000-f08fffff : PCI Bus 0000:04
    f0800000-f080ffff : 0000:04:00.0
      f0800000-f080ffff : r8169
    f0810000-f0810fff : 0000:04:00.0
      f0810000-f0810fff : r8169
    f0820000-f083ffff : 0000:04:00.0
  feaff000-feafffff : reserved
    feaff000-feafffff : pnp 00:09
fec00000-fec0ffff : reserved
  fec00000-fec003ff : IOAPIC 0
fed00000-fed003ff : HPET 0
  fed00000-fed003ff : reserved
fed10000-fed13fff : pnp 00:09
fed18000-fed18fff : pnp 00:09
fed19000-fed19fff : pnp 00:09
fed1c000-fed8ffff : reserved
  fed1c000-fed1ffff : pnp 00:09
  fed20000-fed3ffff : pnp 00:09
  fed40000-fed44fff : pnp 00:09
  fed45000-fed8ffff : pnp 00:09
fee00000-fee00fff : Local APIC
  fee00000-fee00fff : reserved
ff000000-ffffffff : reserved
  ff000000-ffffffff : pnp 00:09
100000000-17bffffff : System RAM
180000000-1bbffffff : System RAM 
```

那是未分配的用户空间内存..？

请说清楚。

请不要将此帖子与此处的帖子混淆：

[系统 RAM 是堆/堆栈所在的唯一部分吗？](https://stackoverflow.com/questions/5774889/is-system-ram-the-only-section-where-heap-stack-resides)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T18:58:16.560

```
0000000-0000ffff : reserved      // Reserved = not used, not available for anything.
00010000-0009c3ff : System RAM   // Regular memory - can be used to store code or data/
0009c400-0009ffff : reserved    
000a0000-000bffff : PCI Bus 0000:00   // PCI device memory case
  000a0000-000bffff : Video RAM area   // (graphics/video memory in this)
000c0000-000c7fff : Video ROM          // VGA BIOS memory
000d0000-000d0fff : Adapter ROM        // General area for "boot ROM", e.g. Network boot
000d2000-000d3fff : reserved    
000d4000-000d7fff : PCI Bus 0000:00   // Some other PCI device
000d8000-000dbfff : PCI Bus 0000:00   // as above
000dc000-000dffff : PCI Bus 0000:00
000e0000-000fffff : reserved
  000f0000-000fffff : System ROM      // System BIOS
00100000-bb27bfff : System RAM        // Regular RAM
  01000000-015b0afb : Kernel code     // Kernel "code" uses this bit.
  015b0afc-01878c3f : Kernel data     // Kernel "data"
  01939000-01a11fff : Kernel bss      // Kernel "initialized to zero" data.
bb27c000-bb281fff : reserved    
bb282000-bb3e9fff : System RAM
bb3ea000-bb40efff : reserved    
bb40f000-bb46efff : System RAM  
bb46f000-bb46ffff : reserved
bb470000-bb4f0fff : ACPI Non-volatile Storage    // Advanced Control and Power Interface memory (doesn't got away when power is off!)
bb4f1000-bb70efff : reserved
bb70f000-bb716fff : System RAM
bb717000-bb71efff : reserved
bb71f000-bb77dfff : System RAM
bb77e000-bb79efff : ACPI Non-volatile Storage 
bb79f000-bb7e1fff : System RAM
bb7e2000-bb7fefff : ACPI Tables
bb7ff000-bb7fffff : System RAM
bb800000-bfffffff : reserved
c0000000-dfffffff : PCI Bus 0000:00
  c0000000-c04fffff : PCI Bus 0000:04     // PCI bus bridge device 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T18:50:37.663

iomem 是映射到物理内存和设备寄存器的地址。

引用系统 RAM 的地址称为物理地址（用于存储内核或用户空间代码和数据），引用设备映射的地址称为总线地址。

这在很大程度上取决于架构。

![在此处输入图像描述](../Images/ef6cd867f657a4cebf7bec2958bffb89.png)

# .net - SSCLI 参考

> ID：14632772
> 
> 赞同：1
> 
> 时间：2013-01-31T18:36:47.490
> 
> 标签：.net, vb.net, command-line-interface

我知道共享[源公共语言基础结构](http://en.wikipedia.org/wiki/Shared_Source_Common_Language_Infrastructure)以及[MethodImplOptions](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.methodimploptions.aspx)枚举。我有兴趣了解有关如何实现 .NET 运行时的更多信息。

例如，在他对以下问题的回答中；Hans Passant 在 clr/src/vm/ecall.cpp: [How is Math.Pow() in .NET Framework 中谈到了 Math.Pow() 是如何在 C++ 中实现的？](https://stackoverflow.com/questions/8870442/how-is-math-pow-implemented-in-net-framework/8870593#8870593). 我的问题是：你怎么知道首先要查看该文件？是因为您非常了解代码还是在某处有参考？即说明 Math.Pow() 在以下位置实现的参考：ecall.cpp

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T12:37:37.637

好吧，您可以在 SSCLI 的源代码中四处寻找。但我想那不是你想要的:-)

但是，您可以缩小 plain 的误报范围`findstr /s /i "pow" *.*`。

您将从反编译（或反汇编，如果您愿意的话）`System.Math`类开始。您可以在 中找到它，如果您不知道`mscorlib.dll`，[MSDN会告诉您。](http://msdn.microsoft.com/en-us/library/system.math.pow.aspx)

如果这样做，您将看到该方法实际上并没有在那里定义主体，而只是签名。不过，它有`MethodImplAttribute`分配的。其中具有 的价值`MethodImplOptions.InternalCall`。再一次，看 MSDN[告诉你](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.methodimploptions.aspx)，这种方法是

> “调用是内部的，即调用的是 **在公共语言运行库中实现**的方法。” （强调补充）。

这应该给你一个重要的提示：它可能是用 C 或更像 C++ 实现的，因为那是用于实现 CLR 本身的语言。

知道这一点后，您可以搜索 SSCLI 的所有 C++ 源文件。

`findstr /s /i "pow" *.cpp`

这大大缩小了点击范围，但仍然有很多东西。知道现在是试验的时候了，比如让搜索区分大小写，只查找整个单词（排除“power”之类的东西）。

`findstr /s /r "\<Pow\>" *.cpp`

在本例中，这样做只会返回两个命中：

```
clr\src\classlibnative\float\comfloat.cpp:FCIMPL2_VV(double, COMDouble::Pow, double x, double y)
clr\src\vm\ecall.cpp:    FCFuncElement("Pow", COMDouble::Pow) 
```

输出几乎把它泄露了：`Pow`似乎与 有某种关系`COMDouble::Pow`，这也是 show 。

坦率地说，我不记得我是如何真正`InterallCall`想到可以在 中找到 / instrinct 函数（或查找表，如果你愿意的话）的知识`clr\src\vm\ecall.cpp`，但如果我需要再做一次，以上是我会做的。

为了补充 Hans 对您研究 SSCLI 的问题的评论，我想说，总的来说，它总是具有教育意义，如果您足够极客，甚至可以“娱乐”，阅读和探索其他代码库。特别是当它们与您当前工作的技术领域相关时。我想很多人一直在探索 BCL 和其他 .NET 库，使用反编译或公共可用资源，甚至有评论。但是 CLR 本身也很有趣，即使 SSCLI 已经过时了。恕我直言，另一个有趣的事情是随 Visual Studio 安装的 CRT（C/C++ 运行时库）源（例如`C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\crt`）。

# shell - 我可以自动化一个 shellscript 来运行一个要求用户输入的 python 文件吗？

> ID：14632787
> 
> 赞同：1
> 
> 时间：2013-01-31T18:37:47.207
> 
> 标签：shell, terminal

我知道如何很容易地运行 shell 脚本。

我会让我的文件说：

```
#!/bin/zsh
python somefile.py 
```

但是文件 somefile 在这种情况下需要输入。例子：

```
What is the password? 
```

您可以编写一个脚本来输入该密码，或者在等待输入时暂停吗？

我的总体目标是运行隧道 python 脚本来建立连接并监视端口，通过隧道提取一些数据，然后关闭 python 脚本。

理想情况下：我想在备用终端中使用这个 shellscript 选项 somefile.py ，因为我不知道我是否可以在不再需要它之前停止使用，然后终止进程。

第一件事是第一件事。你能有这样的脚本吗：

```
#!/bin/zsh
python somefile.py
echo admin12345 
```

或类似于自动输入信息的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:59:19.487

假设 python 脚本从标准输入读取，只需执行“echo admin12345 | somefile.py”。

然而，通常情况并非如此，读取密码的脚本需要从终端读取，而不仅仅是任何标准输入。

在这种情况下，请查看“期望”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T19:22:20.227

它适用于我的`java`例子`python`：

```
#!/bin/bash
echo "1234" | python somefile.py 
```

只需给您的脚本一些权限`chmod +x yourscript.sh`，然后运行它`./yourscript.sh`。

# iphone - Objective-c：一个 .m 文件中的多个类定义，以及调用方法

> ID：14632791
> 
> 赞同：0
> 
> 时间：2013-01-31T18:38:14.633
> 
> 标签：iphone, objective-c, xcode, class

我在一个 m 文件中定义了两个类，第一个是 UIView 的子类，第二个是 UIViewController。UIViewController 在某个时候被实例化，而 vc 是实例化我的第一个类的人。

第一个类实现了 touchesEnded 方法，以模拟一个按钮。当在第一类中触发 touchesEnded 方法时，是否可以轻松调用第二类中定义的方法，而无需进入委托等？

我试过玩选择器但没有运气

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:40:13.163

> 是否可以轻松调用第二类中定义的方法

是的，假设您正在创建第二个类的实例并调用该实例上的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:42:17.563

无论这两个类是相同类型的子类，还是在相同或不同的文件中，您都需要对该类的实例的引用来调用它的方法，或者强制它执行选择器。

正确的 OO 方法是使用委托，但理论上您可以在创建视图时将视图 2 的引用传递给视图 1。如果您在 IB 中创建它们，您可以创建出口，以便它们以这种方式相互引用。

简而言之：是的，这是可能的并且很容易做到，但是如果没有更具体的情况示例，我不能在具体代码方面给你太多

# vb.net - 程序不能在 Win XP 上运行，但会在 Win7 上运行

> ID：14632792
> 
> 赞同：1
> 
> 时间：2013-01-31T18:38:17.690
> 
> 标签：vb.net, windows-7, windows-xp, stack-trace, invalidoperationexception

因此，我在 Win7 机器上使用 Visual Studio 2010 设计了一个程序。为此，该程序称为 Test.exe

当另一个用户使用 Win XP 试图打开这个程序时，它会弹出一个 Just In Time Debugger 窗口并且永远不会运行。我可以在我的 Win7 盒子和其他 Win7 盒子上打开程序，并且每次打开程序。

我不确定从哪里开始找出 Win XP 机器无法运行该程序的原因。

有什么建议么？

**编辑**

这是我们在 XP 机器上运行调试器时遇到的异常错误。

System.InvalidOperationException 未处理 Message=创建表单时出错。有关详细信息，请参阅 Exception.InnerException。错误是：调用的目标已引发异常。*Source= WinApp* StackTrace：在 WinApp.My.MyProject.MyForms.Create_Instance*_[T](T Instance) at WinApp.My.MyProject.MyForms.get_Form1() at WinApp.My.MyApplication.OnCreateMainForm() at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.OnRun() at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase .DoApplicationModel() at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.Run(String[] commandLine) at WinApp.My.MyApplication.Main(String[] Args) InnerException: System.Reflection.TargetInvocationException Message=Exception has been throwed by the target的调用。Source=mscorlib StackTrace：在 System.RuntimeMethodHandle._SerializationInvoke(IRuntimeMethodInfo 方法，对象目标，SignatureStruct& declaringTypeSig，SerializationInfo 信息，*

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:41:32.497

您需要确保 Windows XP 系统安装了适当版本的 .NET Framework。

此外，有许多类型不适用于 .NET 框架 4 中的 XP。例如，如果您使用[MD5Cng](http://msdn.microsoft.com/en-us/library/system.security.cryptography.md5cng.aspx)类，您会看到（在文档的“平台”部分）它仅在 Vista+ 上受支持，不在XP上。如果在 XP 上运行，在程序中使用此类将导致异常。

* * *

编辑：

从您的堆栈跟踪来看，您的表单 ( `WinApp.Form1`) 似乎正在使用图标 (.ico)，这是一种 Windows XP 不支持的格式。例如，如果您使用全彩图标，这可能会在 XP 上引发异常。确保它是 256 色图标文件，以便在 XP 上正常工作。*

# wpf - VisualStateManager -- 当控件获得焦点时显示鼠标悬停状态

> ID：14632796
> 
> 赞同：9
> 
> 时间：2013-01-31T18:38:51.547
> 
> 标签：wpf, styling, controltemplate, visualstatemanager

我正在使用 Windows 8 样式（以前称为 Metro）创建 WPF 按钮。

我希望按钮的聚焦状态以纯色背景显示。当鼠标悬停在控件上时，我希望背景稍微变暗以创建可以单击按钮的视觉提示。

不幸的是，我在下面编写的 XAML 不起作用。聚焦状态正确显示，但是当鼠标悬停在控件上时，背景不会像我希望的那样变暗。

```
<Color x:Key="DoxCycleGreen">
    #FF8DC63F
</Color>

<!-- Soft Interface : DoxCycle Green --> 
<Color x:Key="DoxCycleGreenSoft">
    #FFC0DC8F
</Color>

<Style x:Key="MetroButton" TargetType="{x:Type Button}">
    <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Border Name="RootElement">
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup Name="CommonStates">
                            <VisualState Name="Normal" />
                            <VisualState Name="MouseOver">
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="BackgroundColor" Storyboard.TargetProperty="Color" To="{StaticResource DoxCycleGreen}" Duration="0:0:0.150" />
                                    <ColorAnimation Storyboard.TargetName="FontColor" Storyboard.TargetProperty="Color" To="White" Duration="0:0:0.150" />
                                </Storyboard>
                            </VisualState>
                            <VisualState Name="Focused">
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="BackgroundColor" Storyboard.TargetProperty="Color" To="{StaticResource DoxCycleGreenSoft}" Duration="0:0:0.150" />
                                    <ColorAnimation Storyboard.TargetName="FontColor" Storyboard.TargetProperty="Color" To="White" Duration="0:0:0.150" />
                                </Storyboard>
                            </VisualState>
                            <VisualState Name="Pressed">
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="BackgroundColor" Storyboard.TargetProperty="Color" To="Transparent" Duration="0:0:0.150" />
                                    <ColorAnimation Storyboard.TargetName="FontColor" Storyboard.TargetProperty="Color" To="{StaticResource DoxCycleGreen}" Duration="0:0:0.150" />
                                </Storyboard>
                            </VisualState>
                            <VisualState Name="Disabled">
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="BorderColor" Storyboard.TargetProperty="Color" To="DarkGray" Duration="0:0:0.1" />
                                    <ColorAnimation Storyboard.TargetName="FontColor" Storyboard.TargetProperty="Color" To="DarkGray" Duration="0:0:0.1" />                                        
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>

                    <Grid Background="Transparent" >
                        <Border BorderThickness="1,1,1,1" Padding="2">
                            <Border.BorderBrush>
                                <SolidColorBrush x:Name="BorderColor" Color="{StaticResource DoxCycleGreen}"/>
                            </Border.BorderBrush>
                            <Border.Background>
                                <SolidColorBrush x:Name="BackgroundColor" Color="White"/>
                            </Border.Background>

                            <ContentPresenter 
                                              x:Name="ContentSite" 
                                              VerticalAlignment="Center" 
                                              HorizontalAlignment="Center" 
                                              ContentSource="Content">
                                <TextBlock.Foreground>
                                    <SolidColorBrush x:Name="FontColor" Color="{StaticResource DoxCycleGreen}"/>
                                </TextBlock.Foreground>
                            </ContentPresenter>
                        </Border>
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-01T19:23:16.710

我现在已经测试了你的代码。你在这里有几个问题。但**主要问题是 WPF 控件一次只能处于特定状态组的一种视觉状态。** 在您遇到的情况下，控件既可以*聚焦*也可以鼠标悬停，WPF 必须选择应用哪个状态（它不能同时应用两个状态，因为它们在同一个状态组中）。所以在这种情况下，它只是将其保持在 Focused 状态，而不是将其发送到 MouseOver 状态。

*如果每个状态都在不同*的状态组中，则控件*可以*处于多个状态。从此[文档](http://msdn.microsoft.com/en-us/library/system.windows.visualstatemanager.aspx)：

 *> 每个 VisualStateGroup 都包含一组互斥的 VisualState 对象。也就是说，控件始终处于每个 VisualStateGroup 中的一种状态。

因此，我们纠正此代码的第一步是包含适当的状态组，使按钮能够显示其 Focused 状态，然后显示其 MouseOver 状态（此更改可以纠正其他可能性，但这就是您在特别是您以前的方法没有得到）。

为此，我们需要小心地正确命名我们的州组和（尤其是）我们的州名。这是因为 Button 类的内部代码可能会发出类似的调用`VisualStateManager.GoToState(this, "VerySpecificStateName", true);`（我没有检查 Button 类的实际源代码来验证这一点，但是在我需要启动状态更改的地方编写了自定义控件，我知道它一定是这样的）。为了获得我们需要的状态组和状态名称的列表，我们可以使用 Expression Blend 来“编辑”控制模板的副本（它将为我们填充所需的状态），或者在[这里找到它们](http://msdn.microsoft.com/en-us/library/ms753328.aspx). 该文档向我们展示了我们需要一个名为“FocusStates”的状态组和该组中的两个状态，称为“Focused”和“Unfocused”（以及其他状态组和状态）。顺便说一句，为了说明 Button 类如何通过这些特定的命名状态来启动其状态更改，如果您通过将“Focus”状态名称替换为“MisspelledFocus”来更改原始代码，您将看到您的按钮永远不会进入状态。

实施第一个更改，我们最终可能会得到类似的结果：

```
<VisualStateManager.VisualStateGroups>
    <VisualStateGroup x:Name="CommonStates">
        <VisualState x:Name="Normal" />
        <VisualState x:Name="MouseOver">
            <Storyboard>
                <ColorAnimation Storyboard.TargetName="BackgroundColor" 
                                                Storyboard.TargetProperty="Color" 
                                                To="{StaticResource DoxCycleGreen}" Duration="0:0:0.150" />
                <ColorAnimation Storyboard.TargetName="FontColor"                                           Storyboard.TargetProperty="Color" 
                                                To="White" Duration="0:0:0.150" />
            </Storyboard>
        </VisualState>
        <VisualState x:Name="Pressed">
            <Storyboard>
                <ColorAnimation Storyboard.TargetName="BackgroundColor" 
                                                Storyboard.TargetProperty="Color" 
                                                To="Transparent" Duration="0:0:0.150" />
                <ColorAnimation Storyboard.TargetName="FontColor" 
                                                Storyboard.TargetProperty="Color" 
                                                To="{StaticResource DoxCycleGreen}" Duration="0:0:0.150" />
            </Storyboard>
          </VisualState>
          <VisualState x:Name="Disabled">
              <Storyboard>
                <ColorAnimation Storyboard.TargetName="BorderColor" 
                                                Storyboard.TargetProperty="Color" To="DarkGray" Duration="0:0:0.1" />
                <ColorAnimation Storyboard.TargetName="FontColor" 
                                                Storyboard.TargetProperty="Color" To="DarkGray" Duration="0:0:0.1" />                                        
              </Storyboard>
          </VisualState>
      </VisualStateGroup>
  <!-- Focus States -->
      <VisualStateGroup x:Name="FocusStates">
            <VisualState x:Name="Focused">
                <Storyboard>
                    <ColorAnimation Storyboard.TargetName="BackgroundColor" 
                                                Storyboard.TargetProperty="Color" 
                                                To="{StaticResource DoxCycleGreenSoft}" Duration="0:0:0.150" />
                    <ColorAnimation Storyboard.TargetName="FontColor" 
                                                Storyboard.TargetProperty="Color" 
                                                To="White" Duration="0:0:0.150" />
                  </Storyboard>
            </VisualState>
            <VisualState x:Name="Unfocused"/>
       </VisualStateGroup>
  </VisualStateManager.VisualStateGroups> 
```

这在一定程度上解决了问题。但是，如果您在 Expression Blend 中查看此内容，您会注意到状态组标题中的警告：

![关于在多个状态组中更改相同对象属性的 Expression Blend 警告](../Images/0cf43863c65a4d3e811ab7a6cfaefea7.png)

我们收到此警告是因为我们在多个状态组中更改了相同属性/对象对的值 - 在本例中是名为“BackgroundColor”的对象的“Color”属性。为什么这会是一个问题？因为我之前说过 - 如果这些状态位于不同的状态组中，一个控件可以同时处于多个状态。因此，如果用户已经给了按钮焦点并且用户也将鼠标悬停在按钮上，那么 WPF 可能会不清楚要应用哪个动画，因为两种状态都表示要以不同的方式为相同的属性设置动画。

此外，这第一个更改并没有完全得到我们想要的。如果您尝试给按钮焦点，然后将鼠标悬停在它上面，它会正确地从“正常”变为“焦点”，再到“鼠标悬停”。但是，如果您现在停止悬停，您会看到该按钮不会返回到“Focused”状态。

您可以使用多种方法来解决此问题并实现与您想要的类似的东西，但作为示例，我们可以做这样的事情。（这可能不是最干净的实现，但它修复了常见的对象/属性问题。）：

```
<Color x:Key="DoxCycleGreen">
    #FF8DC63F
</Color>

<SolidColorBrush x:Key="DoxCycleGreenBrush" Color="{StaticResource DoxCycleGreen}" />

<!-- Soft Interface : DoxCycle Green --> 
<Color x:Key="DoxCycleGreenSoft">
    #FFC0DC8F
</Color>

<SolidColorBrush x:Key="DoxCycleGreenSoftBrush" Color="{StaticResource DoxCycleGreenSoft}" />

<Style x:Key="ButtonStyle1" TargetType="{x:Type Button}">
    <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Border Name="RootElement">
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal" />
                            <VisualState x:Name="MouseOver">
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="BackgroundColor" 
                                                    Storyboard.TargetProperty="Color" 
                                                    To="{StaticResource DoxCycleGreen}" Duration="0:0:0.150" />
                                    <ColorAnimation Storyboard.TargetName="FontColor" 
                                                    Storyboard.TargetProperty="Color" 
                                                    To="White" Duration="0:0:0.150" />
                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="MouseOverBorder">
                                        <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
                                    </DoubleAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Pressed">
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="BackgroundColor" 
                                                    Storyboard.TargetProperty="Color" 
                                                    To="Transparent" Duration="0:0:0.150" />
                                    <ColorAnimation Storyboard.TargetName="FontColor" 
                                                    Storyboard.TargetProperty="Color" 
                                                    To="{StaticResource DoxCycleGreen}" Duration="0:0:0.150" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Disabled">
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="BorderColor" 
                                                    Storyboard.TargetProperty="Color" To="DarkGray" Duration="0:0:0.1" />
                                    <ColorAnimation Storyboard.TargetName="FontColor" 
                                                    Storyboard.TargetProperty="Color" To="DarkGray" Duration="0:0:0.1" />                                        
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <!-- Focus States -->
                        <VisualStateGroup x:Name="FocusStates">
                            <VisualStateGroup.Transitions>
                                <VisualTransition GeneratedDuration="0:0:0.15"/>
                            </VisualStateGroup.Transitions>
                            <VisualState x:Name="Focused">
                                <Storyboard>

                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" 
                                                                   Storyboard.TargetName="FocusBorder">
                                        <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
                                    </DoubleAnimationUsingKeyFrames>
                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ContentSiteWhiteForeground">
                                        <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
                                    </DoubleAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Unfocused"/>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>

                    <Grid Background="Transparent" >
                        <Border x:Name="BaseBorder" BorderThickness="1,1,1,1">
                            <Border.BorderBrush>
                                <SolidColorBrush x:Name="BorderColor" Color="{StaticResource DoxCycleGreen}"/>
                            </Border.BorderBrush>
                            <Border.Background>
                                <SolidColorBrush x:Name="BackgroundColor" Color="White"/>
                            </Border.Background>
                        </Border>
                        <Border x:Name="FocusBorder" 
                                BorderThickness="1,1,1,1" 
                                Background="{DynamicResource DoxCycleGreenSoftBrush}" 
                                Opacity="0" />

                        <Border x:Name="MouseOverBorder" 
                                BorderThickness="1,1,1,1"
                                Background="{DynamicResource DoxCycleGreenBrush}" 
                                Opacity="0" />

                        <ContentPresenter 
                            x:Name="ContentSite" 
                            VerticalAlignment="Center" 
                            HorizontalAlignment="Center" 
                            ContentSource="Content" Margin="2">
                            <TextBlock.Foreground>
                                <SolidColorBrush x:Name="FontColor" Color="{StaticResource DoxCycleGreen}"/>
                            </TextBlock.Foreground>
                        </ContentPresenter>

                        <ContentPresenter 
                            x:Name="ContentSiteWhiteForeground"

                            VerticalAlignment="Center" 
                            HorizontalAlignment="Center" 
                            ContentSource="Content" Margin="2" Opacity="0">
                            <TextBlock.Foreground>
                                <SolidColorBrush Color="White" />
                            </TextBlock.Foreground>
                        </ContentPresenter>
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

现在您会看到我们已经消除了 WPF 的歧义。我们看到它现在可以正确处理从“Normal”到“Focus”到“MouseOver”再回到“Focus”的状态变化的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T23:47:42.967

这是对杰森答案的一个小修改。事实证明，他使用两个 ContentPresenter 的方法破坏了快捷键的操作。我做了一个小的调整......快捷键现在可以工作了，但是过渡动画不太好......

```
<Style x:Key="MetroButton" TargetType="{x:Type Button}">
    <Setter Property="SnapsToDevicePixels" Value="true"/>
    <Setter Property="OverridesDefaultStyle" Value="true"/>
    <Setter Property="MinHeight" Value="23"/>
    <Setter Property="MinWidth" Value="75"/>
    <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Border Name="RootElement">
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal" />
                            <VisualState x:Name="MouseOver">
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="BackgroundColor" 
                                                    Storyboard.TargetProperty="Color" 
                                                    To="{StaticResource DoxCycleGreen}" Duration="0:0:0.150" />
                                    <ColorAnimation Storyboard.TargetName="FontColor" 
                                                    Storyboard.TargetProperty="Color" 
                                                    To="White" Duration="0:0:0.150" />
                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="MouseOverBorder">
                                        <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
                                    </DoubleAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Pressed">
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="BackgroundColor" 
                                                    Storyboard.TargetProperty="Color" 
                                                    To="Transparent" Duration="0:0:0.150" />
                                    <ColorAnimation Storyboard.TargetName="FontColor" 
                                                    Storyboard.TargetProperty="Color" 
                                                    To="{StaticResource DoxCycleGreen}" Duration="0:0:0.150" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Disabled">
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="BorderColor" 
                                                    Storyboard.TargetProperty="Color" To="DarkGray" Duration="0:0:0.1" />
                                    <ColorAnimation Storyboard.TargetName="FontColor" 
                                                    Storyboard.TargetProperty="Color" To="DarkGray" Duration="0:0:0.1" />                                        
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <!-- Focus States -->
                        <VisualStateGroup x:Name="FocusStates">
                            <VisualStateGroup.Transitions>
                                <VisualTransition GeneratedDuration="0:0:0.15"/>
                            </VisualStateGroup.Transitions>
                            <VisualState x:Name="Focused">
                                <Storyboard>
                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" 
                                                                   Storyboard.TargetName="FocusBorder">
                                        <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
                                    </DoubleAnimationUsingKeyFrames>
                                    <ColorAnimationUsingKeyFrames Storyboard.TargetName="FontColor" Storyboard.TargetProperty="Color">
                                        <EasingColorKeyFrame KeyTime="0" Value="White"/>
                                    </ColorAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Unfocused"/>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>

                    <Grid Background="Transparent" >
                        <Border x:Name="BaseBorder" BorderThickness="1,1,1,1">
                            <Border.BorderBrush>
                                <SolidColorBrush x:Name="BorderColor" Color="{StaticResource DoxCycleGreen}"/>
                            </Border.BorderBrush>
                            <Border.Background>
                                <SolidColorBrush x:Name="BackgroundColor" Color="White"/>
                            </Border.Background>
                        </Border>
                        <Border x:Name="FocusBorder" 
                                BorderThickness="1" 
                                Background="{DynamicResource DoxCycleGreenSoftBrush}" 
                                Opacity="0" />

                        <Border x:Name="MouseOverBorder" 
                                BorderThickness="1"
                                Background="{DynamicResource DoxCycleGreenBrush}" 
                                Opacity="0" />

                        <ContentPresenter x:Name="ContentSite" 
                                          VerticalAlignment="Center" 
                                          HorizontalAlignment="Center" 
                                          RecognizesAccessKey="True"
                                          ContentSource="Content" Margin="8,4">
                            <TextBlock.Foreground>
                                <SolidColorBrush x:Name="FontColor" Color="{StaticResource DoxCycleGreen}"/>
                            </TextBlock.Foreground>
                        </ContentPresenter>
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```*

# database-design - 简单的数据库设计足以满足很多用户

> ID：14632799
> 
> 赞同：-1
> 
> 时间：2013-01-31T18:38:55.300
> 
> 标签：database-design

我正处于构建赛车游戏的设计阶段。每个用户最多可以拥有 100 辆汽车，其中每辆汽车的数据都存储在我的汽车表中的记录中。表中的字段包括：

```
<car_id, user_id, top_speed, colour, handling, acceleration ...> 
```

- 其中 user_id 是映射到车主的外键。

我的问题：这个简单的设计可以将我所有用户的汽车存储在一个表中吗？假设该应用程序很成功，大约有 10,000 名用户，每个用户拥有 100 辆汽车。那将是我的汽车表中的 1,000,000 条记录。是性能方面的问题吗？我可以通过数据库的设计来提高性能吗？

最后，我计划使用 MySQL 作为我的 DBMS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:11:23.297

把它放在同一张桌子上。

除非您[对代理键有特定原因，](https://stackoverflow.com/tags/surrogate-key/info)否则请确定关系...

![在此处输入图像描述](../Images/605863ba3ddfeb243b005a88e9674ad8.png)

...并将表[聚集](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)在`car`生成的 natural key 上`{user_id, car_no}`。这样，属于同一用户的汽车将在**物理上紧密**地存储在数据库中，并且可以非常快速地回答诸如“给我给定用户的汽车”之类的查询。

* * *

最重要的是，考虑您是否真的需要 1:N 关系（而不是 M:N）。用户是否会共享汽车（或至少汽车的某些“共同点”）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:44:07.703

如果您计划按用户进行大量汽车查找，请向 user_id 添加索引。除此之外，没有更清晰的方法可以优化此设计。

# .net - 在 for 循环中，建议一次又一次地转换常量，而不是在循环开始之前声明另一个变量

> ID：14632804
> 
> 赞同：1
> 
> 时间：2013-01-31T18:39:20.843
> 
> 标签：.net, performance, c#-3.0

```
for(int i=0;i<someDomain.count;i++)
{
   if(someDomain.someValue != Convert.ToInt32(DomainConstants.PaymentPending))
   {
      Dosomething...
    }
} 
```

在这种情况下，如果计数更多，建议在循环开始之前为“DomainConstants.PaymentPending”声明一个整数，否则不会导致任何性能损失。有时计数可能会达到 100。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T18:43:03.913

将常量值转换一次可能会提高此循环的性能。

话虽如此，这不太可能成为性能瓶颈。在您分析您的应用程序并发现这是一个实际问题之前，我不一定会担心这种级别的微优化。

相反，我会专注于使您的代码尽可能地具有可读性。就我个人而言，在这种情况下，我认为创建一个变量会更具可读性和可维护性。我会把上面写成：

```
// Why is this the wrong type in the first place?
var paymentPending = Convert.ToInt32(DomainConstants.PaymentPending); 

foreach(var domain in someDomains.Where(sd => sd.Value != paymentPending)
{
   // Do something with domain 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T18:55:35.410

通常，您的担忧是完全正确的，并且您的思维方式是正确的，因为计算一次然后“缓存”它是提高程序性能的有效技术。但是，它通常适用于计算量大且复杂的事物，例如从文件中解析的结构、动态生成的图像等。

简单的数字解析不会导致任何容易观察到的性能瓶颈，因此将其移出循环不会带来任何可观察到的改进，至少如果循环重复计数符合您要求的顺序。

在这个特定的示例中，您应该或多或少地追求可读性。如果您曾经参与过一个对执行时间有要求的项目，那么您很可能已经了解了更多实现性能提升的技术（其中一些技术将比所讨论的技术更有效）以及如何应用每种技术一。

# map - map.find() 时间复杂度

> ID：14632806
> 
> 赞同：0
> 
> 时间：2013-01-31T18:39:34.693
> 
> 标签：map, vector, big-o, time-complexity

如果我有地图：

```
map myMap<string,vector<int>> 
```

找到一个键，然后遍历向量以找到一个特定的 int，最佳、平均和最坏情况的时间复杂度是多少？

我知道 map.find() 方法是 O(log n)，但是我必须在向量中搜索 int 的事实是否会改变时间复杂度？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:48:16.240

如果你说这是 C++ 会有所帮助。std::map 通常实现为二叉树，这就是查找操作的 O(log(n)) 的来源。

它是 O(log(n) + m)，其中 n 是地图的大小，m 是（每个）向量的大小。我假设您只进行一次查找，然后遍历与您的键对应的整个向量。

由于 log(n) 增长缓慢，除非你的向量非常小，否则 log(n) 应该 < m，因此你的算法应该是 O(m)。

# objective-c - 在文档加载时执行objective-c方法

> ID：14632808
> 
> 赞同：1
> 
> 时间：2013-01-31T18:39:45.067
> 
> 标签：objective-c, cocoa, methods, call

这里很困惑的新手：

我有一个类，这个类正在向表中添加列。在第一步中，这是通过点击按钮来完成的。我已经向界面构建器添加了一个通用对象，分配了将列添加到表中并建立连接的类；这样，当我点击按钮时，就会添加列。现在我需要修改这个程序并在加载文档时运行该方法（基于文档的应用程序），所以我需要从方法内部调用我的`- (void)windowControllerDidLoadNib:(NSWindowController *)aController`方法。现在让我感到困惑的是：如何调用连接到接口构建器的对象的方法？

- - 编辑 - -

如果您觉得必须投反对票，请至少说明原因！因为我是一个新手，对你来说听起来像是一个愚蠢的问题对我来说是一个非常高级的问题。

--- 编辑 2 ---

发现问题，检查我自己的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:44:36.540

您需要创建一个出口。
控制从 IB（界面生成器）拖动到视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:10:45.300

我发现了问题所在：我的班级通过从 NSarraycontroller 读取信息来向表中添加列。这个 NSArraycontroller 由核心框架填充。但它仅在加载视图后才会填充，因此如果不使用计时器或类似的东西，我无法在启动时填充表格！

# android - 未找到不满意的链接错误库

> ID：14632812
> 
> 赞同：0
> 
> 时间：2013-01-31T18:39:59.413
> 
> 标签：android, android-ndk, shared-libraries

我想从图像中提取文本，只需使用库 LEPTONICA 和 TESSERACT 在 Android 中实现 OCR（光学字符识别）。我已成功将开源库添加到我的示例项目但是当我运行我的应用程序但在运行时应用程序强制关闭和错误是.... ExceptioninInitialization UnspecifiedLink Error...Library Not found

任何建议如何解决此错误...我被困在这个问题上

# vb.net - 我可以使用什么工具从 VB6 类中提取复杂的接口？

> ID：14632813
> 
> 赞同：1
> 
> 时间：2013-01-31T18:40:02.480
> 
> 标签：vb.net, vb6, vb6-migration

我有一组相对复杂的 VB6 表单和类需要转换为 VB.NET。这些类跨越 COM 边界是复杂的，提供接口和事件，以及接收来自其他 COM 类的事件。

没有一个类跨 COM 边界编组变体或其他复杂数据类型，所以我不需要尝试对接口做任何真正困难的事情。

有没有可用的工具，免费的或商业的，可以自动化，给定一个 VS2010 的副本和一个装满公用事业钱的钱包，但不是咨询服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:47:22.587

请在此处查看我曾经问过的与此类似的问题：[VB6 code upgrade](https://stackoverflow.com/questions/10252998/vb6-code-upgrade)。查看 Olivier Jacot-Descombes 的回答，他谈到了 Visual Studio 中可用的工具。

我建议重写代码，因为根据我的经验，这是值得的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:24:10.040

我有类似的任务要做，对我来说最简单的方法是使用 Visual Studio 2005 中的向导将 VB6 代码升级到 .Net。然后将项目升级到 Visual Studio 2010，然后使用重构工具提取接口。

无需昂贵的第三方工具，尽管您仍然必须手动检查所有接口以确保没有遗漏任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T21:02:32.517

您显然需要解析 VB6 代码，并提取名称和类型定义。周围没有很多强大的 VB6 解析器。

我们有其中之一，建立在我们的再造工具基础 DMS 之上。您可以将它们作为产品获取，并根据您的目的对其进行配置。VB6 前端提供对所有详细信息的完整 AST 的解析；DMS 提供了用于构建符号表、进行类型分析和支持数据流分析的附加机制，如果您想知道哪些接口使用哪些接口，这可能是您需要的。这不是一件容易的事，因为这些机器相当复杂（因为 VB6 等真正的编程语言很复杂）；大多数人对服务更感兴趣，只是为了实现迁移，但情况各不相同。请参阅[VB6 迁移工具](http://www.semanticdesigns.com/Products/Services/VB6Migration.html)。（我是 DMS 背后的 CTO）。

您总是可以编写一个 Perl 脚本来尝试提取这些信息。这可能会在 70% 的情况下正确处理；你的精力将花在试图找出哪个 70% 是正确的，如何修补其他 30%。如果您的系统非常小，这可能会更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T08:50:17.763

花钱购买[VB Migration Partner](http://www.vbmigration.com/)或[Artinsoft VB Upgrade Companion](http://www.artinsoft.com/pr_vbcompanion.aspx)，让工具转换代码以及提取接口。

# xmpp - strophe.js - XMPP 使用 X-OAUTH2 连接到 Google 帐户

> ID：14632816
> 
> 赞同：0
> 
> 时间：2013-01-31T18:40:25.970
> 
> 标签：xmpp, oauth-2.0, strophe, google-talk

我正在使用 strophe.js 来实现 XMPP 以使用谷歌帐户进行连接。我已经在使用 Google OAuth 使用 OAuth 令牌登录我的应用程序。如何使用 X-OAUTH2 机制`<auth>`使用 strophe 发出请求，而不是向 XMPP 服务提供身份验证密码。Google 的 X-OAUTH2 身份验证文档指出这是最初的`<auth>`请求：

```
<auth xmlns="urn:ietf:params:xml:ns:xmpp-sasl"
    mechanism="X-OAUTH2"
    auth:service="oauth2"
    xmlns:auth="http://www.google.com/talk/protocol/auth">
  base64("\0" + user_name + "\0" + oauth_token)
</auth> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T00:12:09.403

我开始使用 strophe 构建一个客户端，我也是新手。我想您需要使用适当的 BOSH 连接管理器来使用 oauth2 对 xmpp 服务器进行身份验证。我知道旁遮普语很受欢迎，您可以尝试使用它，但我正在查看 Node BOSH，如此处所述[XMPP 客户端未连接 - 使用 Node Bosh 服务器](https://stackoverflow.com/questions/11600455/xmpp-client-not-connecting-using-node-bosh-server)

# c# - 匹配冒号和分号之间的值

> ID：14632818
> 
> 赞同：3
> 
> 时间：2013-01-31T18:40:30.017
> 
> 标签：c#, regex

我有一个简单的问题：我的长文本充满了：`text:value;text:value;...`。我的问题是你如何获得和之间的所有`:`值`;`

我的一半正确（？）模式是： `text:(.*);.text:`

有人可以告诉我一个更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T18:44:25.240

这是您正在搜索的正则表达式：

```
text:([^;]*); 
```

Where`[^;]`匹配除分号之外的所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T18:45:19.683

图案：`\w+:(?<value>\w+);`

```
Regex pattern = new Regex(@"\w+:(?<value>\w+);");

foreach (Match match in pattern.Matches("text:bar;text:foo;"))
    Console.WriteLine(match.Groups["value"].Value); 
```

印刷：

```
bar
foo 
```

# android - Android GCM Intent Service - 如何获取应用程序类

> ID：14632820
> 
> 赞同：0
> 
> 时间：2013-01-31T18:40:42.437
> 
> 标签：android, google-cloud-messaging

我有一个自我实现的应用程序类。

我正在尝试从我的应用程序 GCMIntentService 中获取对它的引用。

由于某种原因，它返回 null：

```
public class GCMIntentService extends GCMBaseIntentService {

    private AppVariables app;
    private GCMMessageReceiver gcmMessageReceiver;

    public GCMIntentService()
    {
        super(GCMManager.SENDER_ID);
        this.app = (AppVariables) getApplication();
        this.gcmMessageReceiver = new GCMMessageReceiver(app);
    }          
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:02:54.257

你可以从`onRegistered()`方法做到这一点。

```
 @Override
    public void onRegistered(Context context, String registration) {
         this.app = (AppVariables) context;
         DeviceRegistrar.registerWithServer(context, registration);
    } 
```

因为我们不能更改构造函数`GCMIntentService()`来传递上下文以供使用。

# c# - 确定连接表外键列名的约定

> ID：14632822
> 
> 赞同：0
> 
> 时间：2013-01-31T18:40:54.300
> 
> 标签：c#, entity-framework-4, ef-code-first

我注意到 EF 发生了一个奇怪的事件，以及它确定在评估`.Include(x=x.T)`语句时将使用哪些字段的方式。

在我们的项目中，我们所有的数据库表（以及 EF 的 POCO）都以 为前缀`DB`，而有问题的两个表是`DBTemplates`和`DBItems`。每个项目都有一个（可选）与之关联的模板。

我们的相关行`DbContext`是这样的：

```
public IDbSet<DBTemplate> Templates {get;set;}
public IDbSet<DBItem> Items {get;set;} 
```

为简单起见，假设两个表都包含 Id 和 Name 属性，并且 DBItems 表具有返回 DBTemplates 的外键。这（现在）被称为`Template_Id`（我稍后会解释为什么），但一般来说我们会命名它`DBTemplateId`。

一般来说，我们有一个名为的变量`db`，它是我们的`DbContext`.

最初创建`DBItem`定义的开发人员添加了链接到相关的虚拟属性`DBTemplate`，但省略了外键。属性如下所示：

```
public class DBItem
{
    public System.Guid Id { get; set; }
    public string Name { get; set; }
    public virtual DBTemplate Template { get; set; }
}

public class DBTemplate
{
    public System.Int32 Id { get; set; }
    public string Name { get; set; }
} 
```

查询 Items 时，命中以下语句

```
db.Items.Include(i=>i.Template) 
```

并生成以下SQL

```
SELECT 
[Extent1].[Id] AS [Id], 
[Extent1].[Name] AS [Name], 
[Extent2].[Id] AS [Id1], 
[Extent2].[Name] AS [Name1], 
FROM  [dbo].[DBItems] AS [Extent1]
LEFT OUTER JOIN [dbo].[DBTemplates] AS [Extent2] ON [Extent1].[Template_Id] = [Extent2].[Id] 
```

到目前为止，一切都很好。但是，我现在需要（并且应该拥有）`Template_Id`DBItem 对象。当我将它添加到 DBItem 类时，它看起来像这样：

```
public class DBItem
{
    public System.Guid Id { get; set; }
    public string Name { get; set; }
    public Nullable<System.Int32> Template_Id { get; set; }
    public virtual DBTemplate Template { get; set; }
} 
```

命中同一行，但生成的 SQL 现在看起来像这样

```
SELECT 
[Extent1].[Id] AS [Id], 
[Extent1].[Name] AS [Name], 
[Extent1].[Template_Id] AS [Template_Id],
[Extent2].[Id] AS [Id1], 
[Extent2].[Name] AS [Name1], 
FROM  [dbo].[DBItems] AS [Extent1]
LEFT OUTER JOIN [dbo].[DBTemplates] AS [Extent2] ON [Extent1].[Template_Id1] = [Extent2].[Id] 
```

（注意连接的**Template_Id1**）

现在，这很容易解决，因为我可以告诉模型构建器查找名为 的外键`Template_Id`，一切都很好。

```
builder.Entity<DBItem>().HasOptional(x => x.Template).WithMany().HasForeignKey(x => x.Template_Id); 
```

**但是**，如果遵循约定，并且名为 的字段`DBTemplateId`和 DBItem 类看起来像这样：

```
public class DBItem
{
    public System.Guid Id { get; set; }
    public string Name { get; set; }
    public Nullable<System.Int32> DBTemplateId { get; set; }
    public virtual DBTemplate Template { get; set; }
} 
```

在不修改 ModelBuilder 属性的情况下（让 EF 完全按照惯例接管），它正确地将 DBTemplateId 属性作为外键，并生成如下 SQL：

```
SELECT 
[Extent1].[Id] AS [Id], 
[Extent1].[Name] AS [Name], 
[Extent1].[DBTemplateId] AS [DBTemplateId],
[Extent2].[Id] AS [Id1], 
[Extent2].[Name] AS [Name1], 
FROM  [dbo].[DBItems] AS [Extent1]
LEFT OUTER JOIN [dbo].[DBTemplates] AS [Extent2] ON [Extent1].[DBTemplateId] = [Extent2].[Id] 
```

并且查询按预期工作（也不易出错的 C# 代码）。

显然这里的教训是遵循字段命名的模式，但是为什么 EF 在命名时会自动查找并使用属性名称作为连接键，但在 POCO 上存在时会`DBTemplateId`查找重复项？`Template_Id1``Template_Id`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:48:55.997

当 Entity Framework Code First 检测到关系时，它会尝试通过遵循一些约定来发现应该用作外键的属性。

它将查找名称与以下 3 个规则之一匹配的属性：

*   `[Targettype key property name]`
*   `[Targettype name]+[Targettype key property name]`
*   `[Foreignkey navigation property name]+[Targettype key property name]`

因此，当您添加一个名为`DBTemplateId`第二条规则的属性时，Code First 将正确使用该属性作为外键，并在数据库中使用该名称生成一个外键列。

但是，如果您`Template_Id`改为调用该属性，则不会匹配任何规则，并且 Code First 将自动为外键生成一个名称。

按照惯例，生成的名称将是`[Navigation property name]_[Targettype key property name]`，在您的情况下会导致`Template_Id`. 但是因为已经存在具有该名称的属性，所以它将附加数字 1。

在我看来，Code First 有一个第四条规则来匹配它自己自动创建的相同名称是有意义的。如果它这样做了，那`Template_Id`将是一个合法的名称，并且您不必使用该`HasForeignKey`方法对其进行配置。

# c# - 将实体组合到 ViewModel 中并使用实体框架

> ID：14632826
> 
> 赞同：1
> 
> 时间：2013-01-31T18:40:57.343
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, entity-framework

大多数教程根本没有真正涵盖这一点。他们只是说将您的实体链接到控制器，您就完成了。

在我的业务模型中，我有客户，我有客户联系人 1 个客户到 >1 个客户联系人。我如何为这些创建一个视图模型，以允许它们从同一个视图中编辑/创建/任何内容？

```
public class Customer
{
    public Customer()
    {
        this.CustomerContacts = new List<CustomerContact>();
        this.Systems = new List<System>();
        this.CreatedByCustomerTickets = new List<Ticket>();
        this.CustomerTickets = new List<Ticket>();
    }

    public long CustomerID { get; set; }
    public Nullable<bool> BusinessCustomer { get; set; }
    public string CustomerName { get; set; }
    public string CustomerNotes { get; set; }
    public virtual ICollection<CustomerContact> CustomerContacts { get; set; }
    public virtual ICollection<System> Systems { get; set; }
    public virtual ICollection<Ticket> CreatedByCustomerTickets { get; set; }
    public virtual ICollection<Ticket> CustomerTickets { get; set; }
}

public class CustomerContact
{
    public long CustomerContactID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int Phone { get; set; }
    public string AddressLine1 { get; set; }
    public string AddressLine2 { get; set; }
    public string City { get; set; }
    public string State { get; set; }
    public Nullable<int> Zip { get; set; }
    public Nullable<long> CustomerID { get; set; }
    public string Email { get; set; }
    public bool PromotionalEmails { get; set; }
    public virtual Customer Customer { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:06:44.560

好吧，我会从这个开始

```
public class CustomerViewModel
{
  public Customer Customer {get; set;}
  public CustomerContact CustomerContact {get; set;}
} 
```

并从那里工作。

如果您不需要域对象的所有属性，您可以考虑更多类似的东西：

```
public class CustomerViewModel
    {
       public long CustomerID { get; set; }
       public ICollection<CustomerContact> CustomerContacts { get; set; }
    } 
```

以满足特定项目需求的方式构建视图模型真的取决于您。

# java - 从 vanilla Adob e CQ5 生成 XML 的好方法是什么？

> ID：14632827
> 
> 赞同：4
> 
> 时间：2013-01-31T18:41:09.883
> 
> 标签：java, xml, jaxb, apache-felix, aem

我当前的实现使用 JSP 生成 XML，但是我使用的不同记录类型的数量已经增加，而且 JSP 模板的数量也变得难以维护。

所以我使用 javax.xml.bind 编写了一个解决方案，但很快发现该代码可以编译但不能在 OSGi 中运行。长话短说，有一个本地编译的依赖项——com.sun.*——默认情况下不包含在 Felix 引导类路径中。包含此依赖关系是修改 sling.properties 以在 org.osgi.framework.bootdelegation 配置行中包含 com.sun.* 的问题。但是，我在大型企业生产环境中工作，因此管理额外配置块的想法并不理想。

所以，我的问题是：有没有更好的方法在 Adob​​e CQ 中以编程方式生成自定义 XML？我应该使用的堆栈中是否有不同的 JAXB impl，而不是 javax.xml.bind？是否有另一个对 CQ/Felix 更友好的 XML 编组 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T22:38:40.880

我还没有这方面的任何具体文档，但可以包含 com.sun.* 而不更改 Sling 引导委托。

我已经在这个[pom.xml](https://github.com/antonyh/cq5-cxf/blob/master/pom.xml)中使用 CQ5 中的 CXF 作为 OSGi 服务的演示项目完成了它。它是 maven-bundle-plugin 中的 the`<dependency>`或 the `<Import-Package>`。

整个项目可在 GitHub 上的[https://github.com/antonyh/cq5-cxf](https://github.com/antonyh/cq5-cxf) - 它构建、安装和工作，无需更改 CQ5.4 / CQ5.5 上的引导委托。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:25:19.703

CQ5.5 osgi bundles include org.apache.cocoon.cocoon-xml which exports packages:

```
org.apache.cocoon.xml.dom,version=2.0.0
org.apache.cocoon.xml.sax,version=2.0.0 
```

Which are available for use in other osgi bundles or component jsp files.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T06:54:17.833

对于“vanilla” XML，您可以简单地将 .xml 扩展名添加到您的内容 URL，然后将输出内容的 XML 表示。这可以通过 HTTP 获取。

# git - 为什么 git 有时会显示文件已更改但未更改？

> ID：14632828
> 
> 赞同：2
> 
> 时间：2013-01-31T18:41:13.847
> 
> 标签：git, git-commit, gitweb

DragonFly BSD 使用 git 作为其 SCM，为内核和整个用户空间提供一个单一的存储库和分支。

在 2011 年 11 月 26 日，有人做了一个提交，以某种方式触及了存储库中的每个文件，尽管大多数文件根本没有更改。

这是 2011 年 11 月 26 日的违规提交：http:
[//gitweb.dragonflybsd.org/dragonfly.git/commitdiff/86d7f5d305c6adaa56ff4582ece9859d73106103](http://gitweb.dragonflybsd.org/dragonfly.git/commitdiff/86d7f5d305c6adaa56ff4582ece9859d73106103)
[https://github.com/DragonFlyBSD/DragonFlyBSD/commit/86d7f5d305c6adaa56ff4562ece939](https://github.com/DragonFlyBSD/DragonFlyBSD/commit/86d7f5d305c6adaa56ff4582ece9859d73106103)

从那时起，使用一些工具，如果您查看存储库中任何文件的文件历史记录，您可以看到它在 2011 年 11 月 26 日随该提交而更改，但它仅显示在某些工具中，而未显示在其他。

例如，以下工具**不会显示虚假的 2011-11-26 提交：**

*   `git log sys/sys/sensors.h`

*   [https://github.com/DragonFlyBSD/DragonFlyBSD/commits/master/sys/sys/sensors.h](https://github.com/DragonFlyBSD/DragonFlyBSD/commits/master/sys/sys/sensors.h)

但是，虚假提交**错误地显示**如下：

*   `git whatchanged --pretty=%at sys/sys/sensors.h`

    ```
    1322296064

    :000000 100644 0000000... 554cfc2... A  sys/sys/sensors.h
    1191329821

    :000000 100644 0000000... 554cfc2... A  sys/sys/sensors.h 
    ```

    1322296064 时间是假的，请注意文件是如何被 dd 的`A`而从未被删除，并且`dst`sha1 是相同的。另一个更具代表性的例子，它表明`src`sha1 总是`0000000...`在这样的虚假提交中，尽管当你考虑到该文件从未被删除并且仍然具有相同的`dst`sha1 时它几乎没有意义：

    ```
    % git whatchanged --pretty=%at sys/sys/sysctl.h | head -9
    1322296064

    :000000 100644 0000000... 6659977... A  sys/sys/sysctl.h
    1296826445

    :100644 100644 94b8d96... 6659977... M  sys/sys/sysctl.h
    1292413105

    :100644 100644 8c9deaa... 94b8d96... M  sys/sys/sysctl.h 
    ```

*   [http://gitweb.dragonflybsd.org/dragonfly.git/history/HEAD:/sys/sys/sensors.h](http://gitweb.dragonflybsd.org/dragonfly.git/history/HEAD:/sys/sys/sensors.h)

我的**问题**如下：

*   如何在不首先删除文件的情况下添加文件？允许这样的事情是/是git中的一个错误吗？

*   为什么有些工具会压缩此类虚假提交（并向用户隐藏它们），而有些工具却没有？

*   有没有办法在实际上没有修改的文件上进行`git-whatchanged`和`gitweb`忽略此类虚假提交，就像`git-log`这样`github`做一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T23:24:51.223

我查看了有问题的提交并找到了答案：

这是一个“根提交”——它没有任何父级。通常，repo 中唯一具有此属性的提交是第一次提交。

所以这个提交中的每个文件都是新的，因为不存在旧版本。

`git log`过滤掉这个提交，因为它不是合并点的第一个父级。我不知道导致`git log`相信首先有一些东西可以忽略的逻辑。

不，没有办法让其他工具忽略此类提交，因为它们只是在做他们的工作。

这里出了问题的是，这个提交不应该在没有父级的情况下创建，如果有人创建了这样的提交，它不应该在任何地方合并。

# c# - 将查询字符串字典（或关联数组）转换为字典

> ID：14632829
> 
> 赞同：2
> 
> 时间：2013-01-31T18:41:23.623
> 
> 标签：c#, dictionary, asp.net-mvc-4, asp.net-web-api, query-string

我正在尝试接受表单的查询字符串

```
?param[key1]=value1&param[key2]=value2 
```

并将其转换为 C# MVC 4 中的字典。这在 PHP 中是微不足道的，但我无法找到在 C# 中重现它的任何方法。

我知道我可以通过

```
?param=value1&param=value2 
```

但这留下了订购问题，并且对我的目的几乎没有用处。

希望这不是框架的限制，我如何在 C# 中实现字典式转换？

> 澄清一下：我不想将查询字符串转换为 NVC，而是将查询字符串参数转换为他们自己的 NVC。这不像 ParseQueryString() 或 Request.QueryString 对象那么简单*。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:44:13.827

您不能只使用`Request.QueryString`Asp.Net 为您提供的集合吗？由于您使用的是 MVC，它将位于您的控制器`ControllerContext`属性（位于该对象的`HttpContext`属性上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:52:23.223

在这里，我修复了一些适合您的代码，虽然不是最好的解决方案，但它应该可以工作。

```
 string basestring = "?param[key1]=value1&param[key2]=value2";
        string newstring = basestring.Replace("?", "").Replace("param[", "").Replace("]", "");
        var array = newstring.Split('&');
        var dictionary = new Dictionary<string, string>();
        foreach (var onestring in array)
        {
            var splitedstr = onestring.Split('=');
            dictionary.Add(splitedstr[0],splitedstr[1]);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T18:47:27.517

你也可以试试这样的

```
 public ActionResult SubmitFormWithFormCollection(FormCollection parameters)
    {
        foreach (string param in parameters)
        {
            ViewData[param] = parameters[param];
        }

        return View();
    } 
```

# blogger - 获取动态博主网页的源代码

> ID：14632831
> 
> 赞同：0
> 
> 时间：2013-01-31T18:41:31.370
> 
> 标签：blogger, blogspot

Blogger/Blogspot 有这个精彩的动态模板。我更喜欢使用标准模板，但我非常喜欢马赛克动态页面设计。是否可以获取马赛克模板的源代码并将其用作标准模板中的主页？

我试过这样做，但它只是加载而不加载。

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:02:26.777

那么你必须尝试这些步骤。我做了很多博客模板来在普通的博客模板 html 上使用它。

应用**动态模板**后，只需转到您的博客**编辑 html 页面**。

 **现在复制整个代码并将其保存在文本文档中。

将文本文档**.txt 的扩展名更改为 .xml**

现在我们正在将 xml 转换为 html，这非常容易。

这是[w3school](http://www.w3schools.com/xml/xml_to_html.asp)文章和帮助，您可以轻松地将 xml 转换为 html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T06:26:51.237

我认为你只需要修改一些 xml，它就可以解决问题。**

# php - 无法从 Steam XML 解析节点

> ID：14632833
> 
> 赞同：0
> 
> 时间：2013-01-31T18:41:33.680
> 
> 标签：php, xml, xml-parsing, steam

我正在尝试从[http://steamcommunity.com/id/crafz?xml=1解析 steamID64](http://steamcommunity.com/id/crafz?xml=1)

```
$sxml = simplexml_load_file('http://steamcommunity.com/id/crafz?xml=1') or die("died"); 
$result = $sxml->profile[0]->steamID64[0];
settype($result, "string");
echo $result; 
```

错误：注意：尝试在第 8 行的 D:\xampp\htdocs\tfpickup\php\first.php 中获取非对象的属性

我尝试了几个小时的不同变体，但无法弄清楚为什么它不起作用。感谢您提前提供任何答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:46:59.420

`<profile>`Steam 配置文件 XML 的根节点 ( ) 将被忽略。所以它实际上比你想象的要容易一些：

```
$sxml = simplexml_load_file(...);
$result = (string) $sxml->steamID64; 
```

# android - Android GCM Intent Service 类名

> ID：14632841
> 
> 赞同：1
> 
> 时间：2013-01-31T18:42:24.240
> 
> 标签：android, google-cloud-messaging

GCMIntentService 是否必须这样命名？

它必须位于我的根包中吗？

这个 IntentService 是从哪里调用的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T18:48:55.230

请参阅[文档](http://developer.android.com/google/gcm/gs.html)

> 此意图服务将由 GCMBroadcastReceiver（由 GCM 库提供）调用，如下一步所示。它必须是 com.google.android.gcm.GCMBaseIntentService 的子类，必须包含公共构造函数，并且应该命名为 my_app_package.GCMIntentService（除非您使用覆盖用于命名服务的方法的 GCMBroadcastReceiver 的子类）。

如链接中所述，从`GCMBroadcastReceiver`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:50:32.110

> GCMIntentService 是否必须这样命名？

嗯，是吗..？如果您使用[GCM 帮助程序库](http://developer.android.com/reference/gcm-packages.html)。因为它都与那个库相关，所以我认为你应该遵循如何使用它的步骤，先生 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-08T15:01:01.040

IntentService 被广播接收器调用。广播接收器有助于接收来自 android 系统的推送通知。当消息到达时，android 操作系统会广播一个通知，我们的任务是捕捉该通知，我们会将这个通知传递给**intent-service**，以便我们可以进一步处理接收到的 json 消息。

资料来源：[http ://techlovejump.com/how-to-get-data-from-gcm-google-cloud-messaging-notification-in-android/](http://techlovejump.com/how-to-get-data-from-gcm-google-cloud-messaging-notification-in-android/)

# php - datediff 在 php 中导致错误

> ID：14632842
> 
> 赞同：0
> 
> 时间：2013-01-31T18:42:23.827
> 
> 标签：php, mysql, datediff

我有在 mysql 中运行良好的 sql 语句，我正在使用 datediff。当我尝试在 php 中使用它时，我得到一个“mysql_fetch_arrary() 期望参数 1 是一个资源，boolean given in”

这个说法是...

```
$result = mysql_query("select hname, hsn, hmodel, hmake, htype, hwar, datediff(`hwar`, now()) from host where stype='physical';",$db); 
```

我知道该语句在 mysql 中有效

```
mysql> select hname, hsn, hmodel, hmake, htype, hwar, datediff(`hwar`, now()) from servers.host where stype='physical';
+--------------+---------+--------+-----------+-------+------------+-------------------------+
| hname        | hsn     | hmodel | hmake     | htype | hwar       | datediff(`hwar`, now()) |
+--------------+---------+--------+-----------+-------+------------+-------------------------+
| moscow       | XXXXXXX | Dell   | PowerEdge | R710  | 2013-09-13 |                     225 |
| sydney       | XXXXXXX | Dell   | PowerEdge | R710  | 2013-09-15 |                     227 | 
```

当我删除`datediff(`hwar`, now())`时，我的页面可以工作。我想用它作为字段

```
$datediff=$row['datediff']; 
```

关于为什么它不起作用的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:52:01.017

尝试限制您的查询

```
 $result = mysql_query("select hname, hsn, hmodel, hmake, htype, hwar, datediff(`hwar`, now()) as dif from host where stype='physical' LIMIT 0,10 ;",$db); 
```

看[这个帖子](https://stackoverflow.com/questions/1770851/inconsistent-mysql-datediff-behavior)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:53:58.610

试试这个：

替换这条sql语句：datediff( `hwar`, now())

用：datediff( `hwar`, now()) 作为 Diffdate

并以这种方式恢复它： $datediff=$row['Diffdate'];

再见XD

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T18:54:11.633

你应该给选择器一个别名：

```
select hname, hsn, hmodel, hmake, htype, hwar, datediff(`hwar`, now()) AS diff from host where stype='physical'; 
```

然后您可以访问名为“diff”的列

# java - 在 Eclipse 中我正在使用 JFrame 但没有出现窗口

> ID：14632844
> 
> 赞同：0
> 
> 时间：2013-01-31T18:42:33.407
> 
> 标签：java, swing, jframe

我开始了一个新项目，所有代码都是正确的（我认为）并且没有出现任何窗口。没有编译错误，每当我运行程序时都没有任何反应。

```
import javax.swing.*;
import java.awt.*;

public class Frame extends JFrame{

    public static String title = "Tower Defense";  
    public static Dimension size = new Dimension(700, 550);  

    public static void main(String args[]){ 

        Frame frame = new Frame(); 
    }

    public Frame()  { 

        setTitle(title);
        setSize(size);
        setResizable(false);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public void init(){

        setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T18:45:33.067

你永远不会调用`init()`方法。您的框架如何可见？

只需将您的`main`方法更改为：

```
public static void main(String args[]){ 

    Frame frame = new Frame(); 
    frame.init();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T18:49:54.867

您永远不会在框架构造函数中调用 init() ：

```
public Frame() { 
    setTitle(title);
    setSize(size);
    setResizable(false);
    setLocationRelativeTo(null);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    **init();**
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-01T17:02:46.593

`init()`方法永远不会在你的程序中被调用。

`Frame()`在构造函数本身中设置可见性。

```
import javax.swing.*;              
import java.awt.*;        

public class Frame extends JFrame{

public static String title = "Tower Defense";  
public static Dimension size = new Dimension(700, 550);  

public static void main(String args[]){ 

    Frame frame = new Frame(); 
}

public Frame(){

    setTitle(title);
    setSize(size);
    setResizable(false);
    setLocationRelativeTo(null);
    setVisible(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}
} 
```

# ios - 在 Objective C 中将两个单独的 JSON 数据对象合并为一个

> ID：14632846
> 
> 赞同：0
> 
> 时间：2013-01-31T18:42:34.047
> 
> 标签：ios, objective-c, json, nsdata, nsmutabledata

我试图获取包含 2 个 twitter 用户提要的 2 个单独的 JSON 数据对象，但遇到了很多麻烦。我想同时处理它们并将它们放在一张桌子上，但我遇到了困难。

我有一个全局 NSMutableData 获取附加到它的每个 JSON 请求。一旦所有这些都在一个地方，我会尝试使用全局 NSMutableData 更新表。allTheData 是全局 NSMutable 对象。

```
if ([twitterAccounts count] > 0) {
    while (accountsize != [twitterAccounts count]) {
      [request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {

           [allTheData appendData:responseData];
      }];
      accountsize = accountsize + 1;
   }}

   dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

      [self performSelectorOnMainThread:@selector(receiveData:) withObject:allTheData waitUntilDone:YES];
   });

- (void)receiveData:(NSData *)data {
  self.tweets = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:nil];
  [self.TwitterTableView reloadData];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   UITableViewCell *cell = [[UITableViewCell alloc] init];
   NSDictionary *tweet = [self.tweets objectAtIndex:indexPath.row];

   cell.textLabel.text = [tweet objectForKey:@"text"];

   return cell;
} 
```

每当我运行此代码时，它都会崩溃并吐出以下内容

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'data parameter is nil' 
```

*** First throw call stack: (0x2622012 0x131ae7e 0x2621deb 0xe4f817 0x568c 0x132e6b0 0xd5b035 0x25a5f3f 0x25a596f 0x25c8734 0x25c7f44 0x25c7e1b 0x290d7e3 0x290d668 0x26265c 0x258d 0x24b5) libc++abi.dylib: terminate called throwing an exception

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:29:39.473

这对我来说没有意义：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
      [self performSelectorOnMainThread:@selector(receiveData:) withObject:allTheData waitUntilDone:YES];
   }); 
```

您在主线程上调用一个方法，为什么要执行 dispatch_async 呢？**您应该只将调用包装在`reloadData`主`dispatch_async`队列中。**

同样，我会调用`JSONObjectWithData:options:error:`每条推文，然后将它们添加到数组中。
我认为附加原始数据字节可能会破坏它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:49:24.117

您应该解析每个 json 对象并将它们附加到 NSMutableArray。将 NSMutableData 对象与未解析的 json 连接起来似乎令人难以置信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T18:49:24.917

从 Apple 文档中关于`performRequestWithHandler`：

> 执行异步请求并在完成后调用指定的处理程序。

这意味着您的请求处理程序只会被调用一次，并且不需要附加块。您很可能会崩溃，因为代码未按您期望的顺序执行。我会尝试将调用移动`receiveData`到处理程序块中，以便仅在您实际拥有数据时才执行它：

```
 [request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {

                dispatch_async(dispatch_get_main_queue,^{
                       [self receiveData:responseData];
                });

            }];
            accountsize = accountsize + 1;
        }
     } 
```

# fortran - PARALLEL DO 有或没有 CRITICAL？

> ID：14632849
> 
> 赞同：0
> 
> 时间：2013-01-31T18:42:45.630
> 
> 标签：fortran, openmp

着眼于代码的并行部分，下面给出的哪个选项是首选？有更好的解决方案吗？我正在尝试对独立实现进行平均`do_something`

选项 1：使用 CRITICAL

```
 resultado%uno = 0.d0
  !$OMP PARALLEL DO shared(large) private(i_omp) schedule(static,1)
  do i_omp=1, nthreads
     call do_something(large, resultadoOmp(i_omp))
     !$OMP CRITICAL (forceloop)
     resultado%uno = resultado%uno + resultadoOmp(i_omp)%uno
     !$OMP END CRITICAL (forceloop)
  enddo
  !$OMP END PARALLEL DO
  resultado%uno  = resultado%uno/nthreads 
```

选项 2：避免`CRITICAL`（和`ATOMIC`）

```
 !$OMP PARALLEL DO shared(large) private(i_omp) schedule(static,1)
  do i_omp=1, nthreads
     call do_something(large, resultadoOmp(i_omp))
  enddo
  !$OMP END PARALLEL DO

  uno = 0.d0
  !$OMP PARALLEL DO shared(resultado) private(i_omp) schedule(static,1) &
  !$OMP & REDUCTION(+:uno)
  do i_omp=1, nthreads
     uno = uno + resultadoOmp(i_omp)%uno
  end do
  !$OMP END PARALLEL DO
  resultado%uno  = uno/nthreads 
```

在这方面我不能使用，`REDUCTION(+:resultado%uno)`也不能使用`REDUCTION(+:resultado)`，只允许使用数字类型。

这种方法的缺点，IMO，是必须`resultadoOmp`用线程数来确定派生的尖端。好处是避免了`CRITICAL`可能影响性能的子句，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T19:50:24.920

> IMO 这种方法的缺点是必须使用线程数来确定派生的tipe resultadoOmp 的尺寸。优点是避免了可能影响性能的 CRITICAL 子句，我是对的吗？

是的你是对的。看起来您无论如何都在用线程数来确定 resultadoOmp 的尺寸，所以这不是一个缺点吗？第二部分的性能确实应该更好，尽管两个并行区域可能会再次吃掉这个优势。因此，您应该只对两个部分使用一个并行区域。根据 do_something 的运行时间，我什至可能完全忽略归约操作的并行性，并在并行计算所有 uno 条目后在单个线程上进行求和：

```
!$OMP PARALLEL DO shared(large) private(i_omp) schedule(static,1)
do i_omp=1, nthreads
   call do_something(large, resultadoOmp(i_omp))
end do
!$OMP END PARALLEL DO

resultado%uno = sum(resultadoOmp(:)%uno)/nthreads 
```

您将需要使用实际设置来衡量各种实现以得出结论。

# ios - 使用 renderInContext 的 Obj-C

> ID：14632854
> 
> 赞同：0
> 
> 时间：2013-01-31T18:42:53.607
> 
> 标签：ios, objective-c, image, uiview

我试图将视图渲染到图像，我一直在关注这个例子： [Render a full UIImageView to a bitmap image](https://stackoverflow.com/questions/8788376/render-a-full-uiimageview-to-a-bitmap-image)

以及其他人。

我的问题是当我排队时

```
[view.layer renderInContext:UIGraphicsGetCurrentContext()]; 
```

我收到一条警告，指出“-instance method '-renderInContex:' not found

我看到的每个呈现图像视图的示例都使用这条线。那么为什么我的例子不起作用？

这是完整的代码：

```
-(void)RenderViewToImage:(UIView *)view
{    
     UIGraphicsBeginImageContextWithOptions(view.bounds.size, NO, 0.0);
     [view.layer renderInContext:UIGraphicsGetCurrentContext()];
     UIImage *bitmapImage = UIGraphicsGetImageFromCurrentImageContext();
     UIGraphicsEndImageContext();

     NSArray *documentsPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,    NSUserDomainMask, YES);
     NSString *documentsDir = [documentsPaths objectAtIndex:0];
     [UIImagePNGRepresentation(bitmapImage) writeToFile:[documentsDir stringByAppendingString:@"num1.png"] atomically:YES]; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T18:45:19.277

确保链接到 QuartzCore 框架。

确保导入以下标头：

```
#import <QuartzCore/QuartzCore.h> 
```

# java - 检查 servlet 建立的数据库连接

> ID：14632855
> 
> 赞同：1
> 
> 时间：2013-01-31T18:42:53.590
> 
> 标签：java, servlets, oracle10g

我负责维护一堆涉及多个已部署 servlet 的遗留代码；一些通过 Tomcat 5.5（是的，我知道 - 我确实说过遗留代码！）还有一些通过 Glassfish 3.3。全部使用 ojdbc14 驱动程序连接到 Oracle 10 数据库。所有使用池连接。

但是，有时，与数据库的连接断开，数据库重新启动等，并且 servlet 失败，直到有人注意到并重新部署它们。不是。凉爽的。我知道有一些方法可以监视 servlet 建立的数据库连接，这样，在连接丢失的情况下，servlet '知道' - 我该如何做到这一点？而且，我可以通过重新启动数据库连接来使 servlet 足够智能以恢复自身吗？我一直在寻找答案，但我没有成功。非常感谢您的建议和指点。我在这方面有点新手。谢谢！

# python - 什么更快，递归或全局变量？

> ID：14632862
> 
> 赞同：0
> 
> 时间：2013-01-31T18:43:20.877
> 
> 标签：python

在python中，如果我有一个修改整数列表的递归函数，并假设列表很大，这样做会更快：将列表保留为全局变量，而不是将其作为参数传递，或者将其作为参数传递争论而不是全球化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:02:39.230

对于快速和干净的代码，您应该使用自定义堆栈而不是全局变量来使用迭代方法进行递归（只要没有算法替代方案）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T19:09:11.917

如果列表是通过引用传递的，并且在递归函数中没有重复，那么性能差异将可以忽略不计，您应该使用任何一种方法都会产生更清晰和可维护的代码。通常这会将数组作为参数传递，但并非总是如此。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T18:47:20.420

列表是通过地址传递的，因此额外的开销只是单个函数参数（指针）。我不认为这很明显。

您必须测试自己，但如果它很重要，我会感到惊讶。

# php - 如何让 Zend Studio 自动完成使用 CakePHP 模型？

> ID：14632869
> 
> 赞同：2
> 
> 时间：2013-01-31T18:43:53.467
> 
> 标签：php, cakephp, zend-studio, eclipse-pdt, cakephp-2.2

我希望 Zend Studio 在 CakePHP 2.x 项目中识别所有控制器模型的类类型。

这就是我目前的做法。

```
class MyController extends AppController
{
      public $uses = array('Scan');

      public function index()
      {
          /* @var $scan Scan */
          $scan = $this->Scan;
          // do stuff...
      }
} 
```

以上工作正常，Zend 将正确重构对 Scan 类的所有引用，但这很痛苦，因为它必须在每个操作中完成。

我想改为这样做。

```
class MyController extends AppController
{
      public $uses = array('Scan');

      /** @var Scan */
      public $Scan;

      public function index()
      {
          // do stuff...
          $this->Scan->.....
      }
} 
```

当我尝试将其声明为属性时， $this->Scan 是`null`，并且 Cake 没有加载模型。

有没有办法在不破坏 CakePHP 的情况下将其声明为 phpDoc 类型的属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:33:12.103

CakePHP 会自动将此变量附加到您的控制器上，而您实际上所做的是重新声明它。

我不完全确定这是如何在 Cake 内部完成的，但你`$Scan`之前尝试过声明`$uses`吗？另一种方法是重新声明控制器的构造函数来解决这个问题，但这似乎有点牵强。

完全重构能力是我们仍在等待的东西，它将伴随对 PSR 标准的完全采用，尤其是命名空间。

编辑：这是一种在视图中为助手添加自动完成的漂亮（hack）方法。这**将适用于 CakePHP >= 2**并且**仅适用于 Views**。我也只在 Eclipse 中使用过它，但我想它应该在任何 IDE 中工作，因为它是基于 OOP 和 PHPDoc 的。

`app/View`“您需要做的就是：在目录（不是在）中创建一个名为“ThisHelper.php”的文件`View/Helper`，其内容如下：

```
App::uses('AppHelper', 'Helper');
/**
 * this Helper
 *
 * @property Html $Html
 * @property Session $Session
 * @property Form $Form
 */
class this extends AppHelper
{
    var $Html;
    var $Session;
    var $Form;

    public function __contruct()
    {
        $this->Html = new HtmlHelper($View);
        $this->Session = new SessionHelper($View);        
        $this->Form = new FormHelper($View);        
    }
}

$this = new this(); 
```

要添加对其他助手的支持（是否有蛋糕核心），只需将它们作为变量添加到此类中，例如，如果您想添加 PaginatorHelper，请执行以下操作：

```
@property Paginator $Paginator
....
var $Paginator;
.....
public function __contruct()
{
    .............
    $this->Paginator = new PaginatorHelper($View);
} 
```

最好的办法可能是为 CakePHP 中所有可用的 CoreHelper 添加属性。当然，如果您添加它们，它将与任何自定义助手一起使用。您不需要在任何 PHP 脚本中包含此文件 - 只需将其添加到`app/View/`目录中即可。

# compiler-construction - 创建编译器：学习 OCaml 或坚持使用 Java/C/C++

> ID：14632870
> 
> 赞同：5
> 
> 时间：2013-01-31T18:43:55.020
> 
> 标签：compiler-construction, programming-languages, ocaml

我必须为本学期要上的一门课创建一种新语言和该语言的编译器——这意味着截止日期大约是 3.5 个月。我读过 OCaml 是编写编译器的更好的语言之一，但我以前没有这方面的经验。因此，我的问题如下：尝试使用我已经熟悉的语言（Java、C、C++）创建编译器，或者花一些时间学习 OCaml 并改用它，对我来说是一个更好的主意吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T19:09:20.047

这取决于您如何评估每个选择的兴趣。

如果您的目标是尽快完成课程项目，那么坚持使用您已经熟悉的工具可能是最佳选择。语言很重要，我确实相信 ML 语言最适合编写编译器，但在短期内，对语言、工具、错误消息和常见习语感到满意可能会胜过与语言相关的生产力优势。或者至少在垃圾收集语言中；您可以使用 C 来提高效率，但您必须*非常*了解该语言（在这种情况下，可能不会将其与 C++ 和 Java 混为一谈）。

如果您对构建编译器和更一般的语言工具感兴趣，或者在课程结束后学习编程语言，那么学习静态类型的函数式语言肯定是值得的投资，而编译器课程是这样做的绝佳借口。

### 编辑：一些指针

rgrinberg 的有用评论提醒我指出[MinCaml](http://min-caml.sourceforge.net/index-e.html)作为一种可能的灵感来源。

我的第一个想法是 Andrew Appel 的“{C,Java,ML} 中的编译器实现”一书，但正如亚马逊评论所说，这本书太先进了，不能用作编译器或 ML 的介绍。

Andrej 的 Bauer [Programming Language Zoo也是一个很好的资源，但它更倾向于通过](http://andrej.com/plzoo/)*解释器*实现来发现各种编程语言，而不是编译本身（尽管一些动物园动物被编译成抽象机器）。

# php - 将第一个引用 URL 与 $_SERVER['HTTP_REFERER'] 一起存储在另一个变量中

> ID：14632872
> 
> 赞同：0
> 
> 时间：2013-01-31T18:44:01.313
> 
> 标签：php, http-referer

我使用下面的两个函数将引用信息存储在插入表单电子邮件正文的变量中。我需要将第一个引用站点或 URL 存储在一个变量中，将正常的引用 URL 存储在另一个变量中。基本上，我需要获取推荐访问者的第一页或搜索引擎，然后在访问联系表之前将最后一页存储在他们访问的我的网站上。第二部分与获取 HTTP_REFERRER 的第一个函数一起使用。但是我获取原始推荐人的函数（函数 getFirstPage）只是在变量中将联系页面 URL 发送给我。

```
function getRefererPage( $form_tag )
{
        if ( $form_tag['name'] == 'referer-page' ) {
                $form_tag['values'][] = $_SERVER['HTTP_REFERER'];
        }
        return $form_tag;
}
function getFirstPage( $form_tag )
{
session_start();
        if (!isset($_SESSION["origURL"]))
            $_SESSION["origURL"] = $_SERVER["HTTP_REFERER"];

        if ( $form_tag['name'] == 'first-page' ) {
            $form_tag['values'][] = $_SESSION["origURL"];
        }
        return $form_tag;
}
if ( !is_admin() ) {
        add_filter( 'wpcf7_form_tag', 'getRefererPage' );
}
if ( !is_admin() ) {
        add_filter( 'wpcf7_form_tag', 'getFirstPage' );
} 
```

我可以更改哪些内容以将原始推荐人添加到我的函数 getFirstPage 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:35:36.080

您可以将此代码放在所有页面中（或者放在包含在所有其他页面中的 PHP 文件中。如果使用框架或 CMS，您可以将其放在 index.php 中）。此代码将在 20 分钟不活动后第一次保存参考页面。意味着几乎任何时候有人打开您的网站。

```
if (isset($_COOKIE['firstPageRef'])){
    setcookie('firstPageRef', $_COOKIE['firstPageRef'], time() + 1200); // Extend for an other 20Min
}else{
    setcookie('firstPageRef', $_SERVER['HTTP_REFERER'], time() + 1200); // Save ref page for first time
} 
```

然后使用此代码，您可以找出将用户重定向到您的网站的站点：在需要时调用它：

```
function GetFirstRef(){
    if (isset($_COOKIE['firstPageRef'])
        return $_COOKIE['firstPageRef'];
    return false;
} 
```

# python - Django：ValueError：解包的值太多

> ID：14632877
> 
> 赞同：1
> 
> 时间：2013-01-31T18:44:16.977
> 
> 标签：python, django, debugging, django-forms, django-queryset

我得到了一个 ValueError，我无法终生解决这个错误。我知道该错误意味着传递给变量的值比预期的要多（即`(x, y) = 1, 2, 3`），但我不明白为什么这里会出现问题。

这是错误所在（在 views.py 文件中）：

```
## image_pks is just a list of ImageItem primary keys (eg, [1, 2] or [5])
queryset = ImageItem.objects.filter(pk__in=image_pks)
ImageInfoFormset = modelformset_factory(ImageItem, fields=('title', 'caption'), extra=0)
formset = ImageInfoFormset(queryset) ## Error happening here!!! 
```

这是 ImageItem 模型的样子：

```
class ImageItem(models.Model):
    user = models.ForeignKey(User)
    upload_date = models.DateTimeField(auto_now_add=True)
    last_modified = models.DateTimeField(auto_now=True)
    library = models.ForeignKey(Library)
    img_big = models.ImageField(upload_to=img_get_file_path)
    img_363 = models.ImageField(upload_to=img_get_file_path)
    title = models.CharField(max_length=50,
                             blank=True)
    caption = models.CharField(max_length=1000,
                               blank=True) 
```

这是有关回溯的信息：

![在此处输入图像描述](../Images/67ff42072f0417f5c735cad6df8f6ca0.png) ![在此处输入图像描述](../Images/89e88b36f6b8ed96e640ccec4c64acdd.png)

以下是回溯中的局部变量：

![在此处输入图像描述](../Images/7ade3131d8c877caf829de4a085ae7dc.png)

如果您需要更多信息，请告诉我，谢谢！

**编辑：这是提供的整个回溯：**

```
Traceback:
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Users/sgarza62/riotry_master/riotry/backboard_general/views.py" in Backboard_Home
  44\.                 formset = ImageInfoFormset(queryset) # TOO MANY VALUES ERROR HERE!
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/forms/models.py" in __init__
  424\.         super(BaseModelFormSet, self).__init__(**defaults)
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/forms/formsets.py" in __init__
  50\.         self._construct_forms()
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/forms/formsets.py" in _construct_forms
  114\.         for i in xrange(self.total_form_count()):
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/forms/formsets.py" in total_form_count
  88\.             return self.management_form.cleaned_data[TOTAL_FORM_COUNT]
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/forms/formsets.py" in _management_form
  74\.             if not form.is_valid():
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/forms/forms.py" in is_valid
  124\.         return self.is_bound and not bool(self.errors)
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/forms/forms.py" in _get_errors
  115\.             self.full_clean()
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/forms/forms.py" in full_clean
  270\.         self._clean_fields()
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/forms/forms.py" in _clean_fields
  281\.             value = field.widget.value_from_datadict(self.data, self.files, self.add_prefix(name))
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/forms/widgets.py" in value_from_datadict
  205\.         return data.get(name, None)
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/db/models/query.py" in get
  358\.         clone = self.filter(*args, **kwargs)
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/db/models/query.py" in filter
  624\.         return self._filter_or_exclude(False, *args, **kwargs)
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/db/models/query.py" in _filter_or_exclude
  642\.             clone.query.add_q(Q(*args, **kwargs))
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/db/models/sql/query.py" in add_q
  1250\.                             can_reuse=used_aliases, force_having=force_having)
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/db/models/sql/query.py" in add_filter
  1056\.         arg, value = filter_expr

Exception Type: ValueError at /backboard/
Exception Value: too many values to unpack 
```

**编辑2**：我正在玩它，并且发生了一些奇怪的事情。当我将行更改`queryset = ImageItem.objects.filter(pk__in=image_pks)`为`queryset = ImageItem.objects.get(pk=10)`（其中 10 是任意 id）时，我收到以下错误：`AttributeError: 'ImageItem' object has no attribute 'get'`，而*最初有问题的行正在抛出错误！*

这是一个奇怪的错误，因为 ImageItem 只是一个普通模型。当然它有属性`'get'`。这是否与首先在有问题的行（`formset = ImageInfoFormset(queryset)`）上评估查询集的事实有关？ImageItem 是否在编写查询之后但在评估之前被分配给其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:05:58.727

尝试摆脱`queryset=`定义（您的第一行）并改为执行以下操作：

```
ImageInfoFormset = modelformset_factory(ImageItem, fields=('title', 'caption'), extra=0)
formset = ImageInfoFormset(queryset=ImageItem.objects.filter(pk__in=image_pks)) 
```

您必须明确定义您正在更改查询集，否则您只是将另一个变量传递给表单集。

请参阅此处的文档[。](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#changing-the-queryset)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T19:19:57.430

我会尝试使用 `formset = ImageInfoFormset(queryset.values())

```
formset = ImageInfoFormset(queryset.values()) 
```

代替

`formset = ImageInfoFormset(queryset)`

# c++ - 为 keyPress 上的指针分配一个新值

> ID：14632879
> 
> 赞同：0
> 
> 时间：2013-01-31T18:44:20.810
> 
> 标签：c++, algorithm, pointers

我有一个程序，我正在使用以下代码在屏幕上绘制一些图像。

```
ImageViewer : Image {
public:
ImageViewer(string path){
}
void drawImage(){
Image::draw(widthHeight);
}
private:
Rectangle widthHeight;
} 
```

现在，在我的主程序中，我以以下方式使用图像查看器-

```
string imgP = "someImage.png";
ImageViewer *imgV = new ImageViewer(imgP); 
```

在按键时，我必须更改图像路径，所以我执行以下操作：
imgV = new ImageViewer(newImagePath);

我的应用程序运行良好，但有时会停止在屏幕上显示图像，我一直在试图找出原因。我想问的一件事是关于指针
当我为指针分配 a`new ImageViewer(newImagePath)`时`imgV`，前一个`imgV`值去哪里了？（它是自毁还是我应该手动做？）

我不确定我是否正在获取graggae值或类似的东西，因为图像可能不会出现，但只是想检查这是否也是一个可能的原因。（仍在检查图像内部绘图和其他功能的内部实现）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T07:54:49.987

您必须安全地删除以前的对象。

在 keyPress 做这样的事情。

```
string newImagePath= "someNewImage.png";
ImageViewer *imgV_temp = new ImageViewer(newImagePath);
delete imgV;
imgV = imgV_temp; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:48:20.960

C++ 本身并不是一种托管语言。每次你说

```
imgV = new ImageViewer(); 
```

您分配该类的一个新实例`ImageViewer`并将其内存地址分配给`imgV`. 之前存储的内存地址`imgV`会丢失，并且永远不会被释放。

`delete`您必须在`imgV`为其分配新值之前显式调用

# .net - 将代码分成 dll 会导致什么样的开销

> ID：14632882
> 
> 赞同：1
> 
> 时间：2013-01-31T18:44:28.700
> 
> 标签：.net, visual-studio, visual-studio-2012

我有一个包含 78 个项目的解决方案。

该解决方案大量使用 Prism，而 prism 喜欢使用单独的 dll 中的内容。

我正在进行的当前迭代让我添加了更多的 UI 组件。这组特定的 UI 组件可以与现有组放在同一个项目中。

我想知道是否应该这样做，或者是否应该创建一个新项目（因为它是一组单独的 UI 控件）。

**有人能告诉我将代码放在单独的 dll 中有什么缺点吗？**

通过缺点，我正在关注用户体验和构建速度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T18:46:22.223

> 有人能告诉我将代码放在单独的 dll 中有什么缺点（性能方面）吗？

主要区别在于 CLR 如何加载程序集。加载额外的程序集需要更多的开销。

话虽如此，程序集不会在启动时加载（除非它在启动时使用），这意味着应用程序的整体启动时间实际上可能会有所改善。

加载并运行所有内容后，使用单个程序集或多个程序集之间应该没有性能差异。

与其关注分离项目的性能方面，我建议关注部署和维护的差异。如果项目作为单独的项目有意义，并且将它们分开使您的解决方案更易于维护，我会将它们分开。如果它只是在您的部署和构建环境中增加复杂性，并且这些类型将始终一起使用，我会将它们放在一起。

# asp.net - AddObject 上的 Entity Framework 4.0 并发异常

> ID：14632883
> 
> 赞同：1
> 
> 时间：2013-01-31T18:44:39.707
> 
> 标签：asp.net, entity-framework, entity-framework-4, concurrency, webforms

每当我在上下文中执行对象时，我都会遇到并发异常的问题

我有这个：（我在网络表单上使用它顺便说一句）

```
using(entities ctx = new entities()){
    EventModel newEvent = new EventModel{
      Name = "name",
      Description = "description",
      CreationDate = DateTime.Now,
      CreatedBy = CurrentUserId()
    };

    try{
         ctx.EventModels.AddObject(newEvent);
         ctx.SaveChanges();
    }catch(OptimisticConcurrencyException ocex){
         if(ctx.ObjectStateManager.GetObjectStateEntry(newEvent).State == EntityState.Added){
               // proves that it is added.
         }
    }catch(Exception ex){
          throw ex;
    }
} 
```

我现在不确定在哪里看。我尝试了 sql profiler，我唯一注意到的是它尝试插入新实例两次。就是这样。没有错误或类似的东西。

想法？

**顺便说一句：这是我得到的错误**

> 存储更新、插入或删除语句影响了意外数量的行 (0)。自加载实体后，实体可能已被修改或删除。刷新 ObjectStateManager 条目。

**编辑：这是在探查器上执行的 sql。相同的 sql 执行了两次。**

```
exec sp_executesql N'insert [dbo].[EventModel]([Name], [Description], [CreationDate], [CreatedBy]) values (@0, @1, @2, @3)', @0="Name", @1="description", @2="2013-01-31 11:41:41.5231006", @3="1" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:03:41.377

Solved the issue. It was because of the trigger on the table. When you do an addobject, entity framework expects an Id, and if it doesn't get that Id, it thinks that it's an update that have been modified by two instances which will then throw that error.

# jquery - 将箭头图像添加到 jQuery 手风琴

> ID：14632886
> 
> 赞同：1
> 
> 时间：2013-01-31T18:44:58.613
> 
> 标签：jquery, jquery-ui, accordion, jquery-ui-accordion

我在摆弄[jQuery 手风琴](http://jqueryui.com/accordion/)

我复制粘贴了默认手风琴的最小代码并将其粘贴到本地html文件中，在本地下载了jquery-1.8.3.js、jquery-ui.js和jquery-ui.css。我还包括了collapsed.png 和expanded.png 图像（在图像文件夹中）并将它们全部放在适当的文件夹中并正确链接它们。一切都很好，只是箭头图像根本没有出现。

**手风琴Demo.html**

```
<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Accordion - Default functionality</title>
  <link rel="stylesheet" href="styles/jquery-ui.css" />  
  <script src="scripts/jquery-1.8.3.js"></script>
  <script src="scripts/jquery-ui.js"></script>
  <script>
  $(function() {
        //-------------------notice---------------------------------------//
    var icons = {
              header: "ui-icon-circle-arrow-e",
              activeHeader: "ui-icon-circle-arrow-s"
            };
        //----------------------------------------------------------------//
    $( "#accordion" ).accordion({
        icons: icons  //<<<<---------------------------notice---------//
    });
  });
  </script>
      //-------------------notice---------------------------------------//
  <style type="text/css">
    .ui-icon-circle-arrow-e
    {
        background-image: url("images/collapsed.png");
    }
    .ui-icon-circle-arrow-s
    {
        background-image: url("images/expanded.png");
    }
  </style>
      //----------------------------------------------------------------//    
</head>
<style>
    #accordion
    {
        width:650px;
    }
</style>
<body>

<div id="accordion">
  <h3>Section 1</h3>
  <div>
    <p>
    Mauris mauris ante, blandit et, ultrices a, suscipit eget, quam. Integer
    ut neque. Vivamus nisi metus, molestie vel, gravida in, condimentum sit
    amet, nunc. Nam a nibh. Donec suscipit eros. Nam mi. Proin viverra leo ut
    odio. Curabitur malesuada. Vestibulum a velit eu ante scelerisque vulputate.
    </p>
  </div>    
  <h3>Section 4</h3>
  <div>
    <p>
    Cras dictum. Pellentesque habitant morbi tristique senectus et netus
    et malesuada fames ac turpis egestas. Vestibulum ante ipsum primis in
    faucibus orci luctus et ultrices posuere cubilia Curae; Aenean lacinia
    mauris vel est.
    </p>
    <p>
    Suspendisse eu nisl. Nullam ut libero. Integer dignissim consequat lectus.
    Class aptent taciti sociosqu ad litora torquent per conubia nostra, per
    inceptos himenaeos.
    </p>
  </div>
</div>   
</body>
</html> 
```

输出是这样的：

![在此处输入图像描述](../Images/31b5817fcf2b33e8c2edbd556f9f95a7.png)

**[编辑：添加文件夹层次结构快照]**我的文件夹层次结构看起来像这样，我的代码在 tempaccr.html 中：

![在此处输入图像描述](../Images/7d3f9f516365ac9d266fbdb6dce5896e.png)

如您所见，我已经正确设置了所有链接和样式，并且还定义了 CSS 类以在该部分折叠和展开时切换箭头，为什么没有出现箭头？任何原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:14:31.297

我认为你应该试试这个：

```
<style type="text/css">
.ui-icon-circle-arrow-e
{
    background-image: url("../images/collapsed.png");
}
.ui-icon-circle-arrow-s
{
    background-image: url("../images/expanded.png");
}
</style> 
```

# assembly - 切换语句 AVR-GCC

> ID：14632888
> 
> 赞同：0
> 
> 时间：2013-01-31T18:45:11.200
> 
> 标签：assembly, switch-statement, avr, avr-gcc

嘿，这里只是我用c写的一个简单的程序，在avr-gcc下编译。相应的汇编代码也贴出来了。

仍然无法理解 switch 语句的汇编代码在做什么，任何帮助都会很棒。谢谢。

```
int main()
{

char myinput;

printf("Which option will you choose:\n");
printf("a) Program 1 \n");
printf("b) Program 2 \n");
scanf("%c", &myinput);

switch (myinput)
    {
                case 'a':
                printf("Run program 1\n");
                break;
        case 'b':
            {
                printf("Run program 2\n");
                printf("Please Wait\n");
                break;
            }
        default:
                printf("Invalid choice\n");
                break;
    }
    return 0; 
```

返回0；

}

汇编代码：

```
 switch (myinput)
+00000147:   900F        POP       R0             Pop register from stack
+00000148:   900F        POP       R0             Pop register from stack
+00000149:   900F        POP       R0             Pop register from stack
+0000014A:   900F        POP       R0             Pop register from stack
+0000014B:   8189        LDD       R24,Y+1        Load indirect with displacement
+0000014C:   3681        CPI       R24,0x61       Compare with immediate
+0000014D:   F019        BREQ      PC+0x04        Branch if equal
+0000014E:   3682        CPI       R24,0x62       Compare with immediate
+0000014F:   F459        BRNE      PC+0x0C        Branch if not equal
+00000150:   C003        RJMP      PC+0x0004      Relative jump
22:                         printf("Run program 1\n");
+00000151:   E38D        LDI       R24,0x3D       Load immediate
+00000152:   E092        LDI       R25,0x02       Load immediate
+00000153:   C009        RJMP      PC+0x000A      Relative jump
26:                         printf("Run program 2\n");
+00000154:   E48B        LDI       R24,0x4B       Load immediate
+00000155:   E092        LDI       R25,0x02       Load immediate
+00000156:   940E02A9    CALL      0x000002A9     Call subroutine
27:                         printf("Please Wait\n");
+00000158:   E589        LDI       R24,0x59       Load immediate
+00000159:   E092        LDI       R25,0x02       Load immediate
+0000015A:   C002        RJMP      PC+0x0003      Relative jump
31:                         printf("Invalid choice\n");
+0000015B:   E685        LDI       R24,0x65       Load immediate
+0000015C:   E092        LDI       R25,0x02       Load immediate
+0000015D:   940E02A9    CALL      0x000002A9     Call subroutine
38:       }
+0000015F:   E080        LDI       R24,0x00       Load immediate
+00000160:   E090        LDI       R25,0x00       Load immediate
+00000161:   900F        POP       R0             Pop register from stack
+00000162:   91CF        POP       R28            Pop register from stack
+00000163:   91DF        POP       R29            Pop register from stack
+00000164:   9508        RET                      Subroutine return 
```

多谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-18T20:19:05.423

## 以下是这些行的含义的详细说明：

```
+0000014B:   8189        LDD       R24,Y+1        Load indirect with displacement 
```

这里 myinput 的值从内存复制到寄存器 r24。在内存中，它位于地址 Y+1。Y 中的值是 myinput 字符之前的字节地址。

```
+0000014C:   3681        CPI       R24,0x61       Compare with immediate
+0000014D:   F019        BREQ      PC+0x04        Branch if equal 
```

这里 myinput 的值（在 r24 中）与 0x61='a'（在 ascii 中）进行比较。如果它们相等（myinput=='a'），则执行在`+00000151:`（0x14D+0x4=0x0x151）处继续。否则继续执行下一条指令。

```
+0000014E:   3682        CPI       R24,0x62       Compare with immediate
+0000014F:   F459        BRNE      PC+0x0C        Branch if not equal
+00000150:   C003        RJMP      PC+0x0004      Relative jump 
```

这里再次将 myinput 的值（在 r24 中）与 0x62='b'（在 ASCII 中）进行比较，但现在只有当它们**不**相等时（默认情况），才会在`+0000015B:`(0x14F+0xC=0x0x15B) 处继续执行。否则 (myinput=='b') 下一条指令是跳转到`+00000154:`(0x150+0x4=0x0x154)。

```
22:                         printf("Run program 1\n");
+00000151:   E38D        LDI       R24,0x3D       Load immediate
+00000152:   E092        LDI       R25,0x02       Load immediate
+00000153:   C009        RJMP      PC+0x000A      Relative jump 
```

在“a”情况下，printf 命令的参数（实际上是字符串的内存地址）存储在 r25:r24 中。然后执行分支到 switch 语句结束之前的最后一个 printf 调用`+0000015D:`。

```
26:                         printf("Run program 2\n");
+00000154:   E48B        LDI       R24,0x4B       Load immediate
+00000155:   E092        LDI       R25,0x02       Load immediate
+00000156:   940E02A9    CALL      0x000002A9     Call subroutine
27:                         printf("Please Wait\n");
+00000158:   E589        LDI       R24,0x59       Load immediate
+00000159:   E092        LDI       R25,0x02       Load immediate
+0000015A:   C002        RJMP      PC+0x0003      Relative jump 
```

在“b”情况下，与之前类似，要打印的字符串的地址存储在 r25:r24 中。然后执行调用内存地址处的 printf 子例程`0x000002A9`。然后第二个字符串的地址被加载到 r25:r24 并且执行跳转到 switch 语句结束之前的最后一次 printf 调用 at `+0000015E:`。

*在这里可以很好地看到，字符串存储在内存中，因为第一个字符串是 14 (0xE) 字节 (chars) 长，位于`0x3D02`; 下一个字符串位于`0x3D02+0xE=0x4D02`!!*

```
31:                         printf("Invalid choice\n");
+0000015B:   E685        LDI       R24,0x65       Load immediate
+0000015C:   E092        LDI       R25,0x02       Load immediate
+0000015D:   940E02A9    CALL      0x000002A9     Call subroutine 
```

在默认情况下，和以前一样，字符串被加载到 r25:r24 并调用 printf。

```
38:       }
+0000015F:   E080        LDI       R24,0x00       Load immediate
+00000160:   E090        LDI       R25,0x00       Load immediate
+00000161:   900F        POP       R0             Pop register from stack
+00000162:   91CF        POP       R28            Pop register from stack
+00000163:   91DF        POP       R29            Pop register from stack
+00000164:   9508        RET                      Subroutine return 
```

清理并返回...

*我希望这可以帮助你一点（即使很晚），如果没有，它可以帮助有人在搜索中找到这篇文章，同时遇到类似的问题！*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T18:54:00.857

偏移量 0000014C 将“myInput”与“a”（ASCII 97，十六进制 0x61）进行比较，如果相等则跳转到偏移量 00000151（在 BREQ 点处为 PC+4，偏移量 0000014D，因为管道的 FETCH 部分在执行部分）。

如果比较失败，则与“b”（偏移量 0000014E）进行比较，并相应地再次分支。

如果失败，我们跳到最后一种情况。

请注意，我们如何调用 printf (CALL 0x2A9) 以及它返回的位置有一些微妙之处。

# java - 将 int 转换为 long

> ID：14632893
> 
> 赞同：3
> 
> 时间：2013-01-31T18:45:22.853
> 
> 标签：java, int, long-integer

我有一个关于在 java 中从 int 转换为 long 的问题。为什么浮动没有问题：

```
float f = (float)45.45;//compiles no issue.
float f = 45.45f; //compiles no issue. 
```

但是对于长类型，这似乎是一个问题：

```
 long l = (long)12213213213;
    //with L or l at the end it will work though. 
    long l = (long)12213213213L; 
```

似乎一旦编译器由于超出范围的问题而通知错误，它就会阻塞在那里，而不检查程序员可能计划的任何可能的转换。

你怎么看？为什么会这样，有什么特别的原因？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T18:46:45.947

> 但是对于长类型，这似乎是一个问题：

那是因为`12213213213`没有`L`是一个`int`，而不是`long`。并且由于该值超出了 的范围`int`，因此您会收到错误消息。

尝试类似的东西： -

```
System.out.println(Integer.MAX_VALUE);
System.out.println(12213213213L); 
```

你会更好理解。

就情况`float`而言： -

```
float f = (float)45.45; 
```

该值`45.45`是一个`double`值，并且适合 的大小`double`。所以，编译器不会有问题，然后它会执行一个`cast`to `float`。

> 似乎一旦编译器由于超出范围的问题而通知错误，它就会阻塞在那里，而不检查程序员可能计划的任何可能的转换。

确切地。编译器首先在此处检查有效值`int`，然后才能通过强制转换操作进一步移动。

所以，基本上在和的情况下`long`：`int`-

```
long l = (long)12213213213; 
```

您不会因为`cast`操作而出错，而是因为您`numeric literal`无法表示为`int`. 因此，编译器没有在那里获得有效值来执行强制转换操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T18:57:38.823

Java doesn't consider what you do with a value only what it is. For example if you have a long value which is too large it doesn't matter that you assign it to a double, the long value is checked as valid first.

# android - Android：自定义 ArrayList 不起作用

> ID：14632894
> 
> 赞同：0
> 
> 时间：2013-01-31T18:45:22.763
> 
> 标签：android, listview

三天以来我一直在寻找这个问题。请帮忙！

我正在尝试在 AsynTask 中制作自定义的 ArrayList，但不要在意，因为它在外面也不起作用。

首先我使用了 setListAdapter，但它对我的类来说是未定义的，甚至我的类也扩展了 ListActivity。然后，我尝试使用 ListView setAdapter，但它总是返回 nullpointerexception。

这是我的第一个代码：

```
package Comments;
import java.util.ArrayList;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.Window;
import android.view.WindowManager;
import android.widget.ListView;
import android.widget.Toast;
import com.example.helloandroid.R;
import com.example.podcastq.ListActivity;

public class PrepareComments extends ListActivity {

static String titulo;
static String parentid;
static Context contexto;
static ArrayList<String> resultado;
ListView lv;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.buscar_listview);

}

public PrepareComments(Context contexto) {
    super();
    PrepareComments.contexto=contexto;
}

public void SetParams(String titulo, String parentid) {
    PrepareComments.titulo = titulo;
    PrepareComments.parentid = parentid;
}

public void ShowComments() {

    new AsyncTaskSearchName().execute(titulo, parentid);
}

private class AsyncTaskSearchName
extends
AsyncTask<String, String, SubmitResponseResult> {

    ProgressDialog dialog;

    @Override
    protected void onPreExecute() {
        try {
            dialog = new ProgressDialog(PrepareComments.contexto);
            dialog.setTitle(R.string.cargando);
            dialog.setMessage(PrepareComments.contexto.getString(R.string.obtInfoServer));
            dialog.setCancelable(false);
            dialog.show();
        } catch (final Exception e) {
            runOnUiThread(new Runnable() {
                public void run() {
                    Toast.makeText(PrepareComments.contexto, e.getMessage(),Toast.LENGTH_SHORT).show();
                    Log.e("ERROR", e.getStackTrace().toString());
                }
            });
        }
    }

    @Override
    protected SubmitResponseResult doInBackground(String... strings) {

        JoomlaServices oc = new JoomlaServices();

        try {
            SubmitResponseResult sr = oc.getComments(PrepareComments.titulo);
            PrepareComments.resultado = sr.getResult();

            PrepareComments.parentid = sr.getId();

        }  catch (final Exception e) {
            runOnUiThread(new Runnable() {
                public void run() {
                    Toast.makeText(PrepareComments.contexto,PrepareComments.contexto.getString(R.string.connectionError), Toast.LENGTH_SHORT).show();
                    Log.e("ERROR", e.getCause().toString());

                }
            });
        }
        return null;
    }

    @Override
    protected void onProgressUpdate(String... responses) {

        runOnUiThread(new Runnable() {
            public void run() {
                try {
                    ListView lv = (ListView) findViewById(android.R.id.list); //NULLPOINTEREXCEPTION IN THIS LINE!!

                    ListViewSuggestionAdapter lvSuggestionAdapt = new ListViewSuggestionAdapter(
                            PrepareComments.contexto, R.layout.listview_item_left, PrepareComments.resultado);  

                    lv.setAdapter(lvSuggestionAdapt);
                } catch (Exception e) {
                    Log.i("MI_ERROR", e.getMessage());
                }
            }
        });
    }

    @Override
    protected void onPostExecute(final SubmitResponseResult result) {

        runOnUiThread(new Runnable() {
            public void run() {
                try {
                    dialog.dismiss();
                } catch (Exception e) {
                    Log.i("MI_ERROR", e.getMessage());
                }

            }
        });
    }
}

} 
```

在这行有问题：

```
ListView lv = (ListView) findViewById(android.R.id.list); //NULLPOINTEREXCEPTION IN THIS LINE!!

                    ListViewSuggestionAdapter lvSuggestionAdapt = new ListViewSuggestionAdapter(
                            PrepareComments.contexto, R.layout.listview_item_left, PrepareComments.resultado);  

                    lv.setAdapter(lvSuggestionAdapt); 
```

这是我的第二个代码：

```
package Comments;
import java.util.ArrayList;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.Window;
import android.view.WindowManager;
import android.widget.ListView;
import android.widget.Toast;
import com.example.helloandroid.R;
import com.example.podcastq.ListActivity;

public class PrepareComments extends ListActivity {

static String titulo;
static String parentid;
static Context contexto;
static ArrayList<String> resultado;
ListView lv;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.buscar_listview);

}

public PrepareComments(Context contexto) {
    super();
    PrepareComments.contexto=contexto;
}

public void SetParams(String titulo, String parentid) {
    PrepareComments.titulo = titulo;
    PrepareComments.parentid = parentid;
}

public void ShowComments() {

    new AsyncTaskSearchName().execute(titulo, parentid);
}

private class AsyncTaskSearchName
extends
AsyncTask<String, String, SubmitResponseResult> {

    ProgressDialog dialog;

    @Override
    protected void onPreExecute() {
        try {
            dialog = new ProgressDialog(PrepareComments.contexto);
            dialog.setTitle(R.string.cargando);
            dialog.setMessage(PrepareComments.contexto.getString(R.string.obtInfoServer));
            dialog.setCancelable(false);
            dialog.show();
        } catch (final Exception e) {
            runOnUiThread(new Runnable() {
                public void run() {
                    Toast.makeText(PrepareComments.contexto, e.getMessage(),Toast.LENGTH_SHORT).show();
                    Log.e("ERROR", e.getStackTrace().toString());
                }
            });
        }
    }

    @Override
    protected SubmitResponseResult doInBackground(String... strings) {

        JoomlaServices oc = new JoomlaServices();

        try {
            SubmitResponseResult sr = oc.getComments(PrepareComments.titulo);
            PrepareComments.resultado = sr.getResult();

            PrepareComments.parentid = sr.getId();

        }  catch (final Exception e) {
            runOnUiThread(new Runnable() {
                public void run() {
                    Toast.makeText(PrepareComments.contexto,PrepareComments.contexto.getString(R.string.connectionError), Toast.LENGTH_SHORT).show();
                    Log.e("ERROR", e.getCause().toString());

                }
            });
        }
        return null;
    }

    @Override
    protected void onProgressUpdate(String... responses) {

        runOnUiThread(new Runnable() {
            public void run() {
                try {
                                       ListViewSuggestionAdapter lvSuggestionAdapt = new ListViewSuggestionAdapter(
                            PrepareComments.contexto, R.layout.listview_item_left, PrepareComments.resultado);  

                                            PrepareComments.setListAdapter(lvSuggestionAdapt); //UNDEFINED FUNCTION FOR PREPARECOMMENTS IN THIS LINE

                } catch (Exception e) {
                    Log.i("MI_ERROR", e.getMessage());
                }
            }
        });
    }

    @Override
    protected void onPostExecute(final SubmitResponseResult result) {

        runOnUiThread(new Runnable() {
            public void run() {
                try {
                    dialog.dismiss();
                } catch (Exception e) {
                    Log.i("MI_ERROR", e.getMessage());
                }

            }
        });
    }
}

} 
```

在这行有问题：

```
ListViewSuggestionAdapter lvSuggestionAdapt = new ListViewSuggestionAdapter(
                            PrepareComments.contexto, R.layout.listview_item_left, PrepareComments.resultado);  

                                                PrepareComments.setListAdapter(lvSuggestionAdapt); //UNDEFINED FUNCTION FOR PREPARECOMMENTS IN THIS LINE 
```

我对 ListView 的 xml 定义是：

```
<ListView
            android:id="@android:id/list"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:clickable="false"
            android:longClickable="false" >
        </ListView> 
```

谢谢！

编辑：LogCat

```
01-31 22:10:08.995: E/AndroidRuntime(283): FATAL EXCEPTION: main
01-31 22:10:08.995: E/AndroidRuntime(283): java.lang.NullPointerException
01-31 22:10:08.995: E/AndroidRuntime(283):  at Comments.PrepareComments$AsyncTaskSearchName$3.run(PrepareComments.java:141)
01-31 22:10:08.995: E/AndroidRuntime(283):  at android.os.Handler.handleCallback(Handler.java:587)
01-31 22:10:08.995: E/AndroidRuntime(283):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-31 22:10:08.995: E/AndroidRuntime(283):  at android.os.Looper.loop(Looper.java:123)
01-31 22:10:08.995: E/AndroidRuntime(283):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-31 22:10:08.995: E/AndroidRuntime(283):  at java.lang.reflect.Method.invokeNative(Native Method)
01-31 22:10:08.995: E/AndroidRuntime(283):  at java.lang.reflect.Method.invoke(Method.java:521)
01-31 22:10:08.995: E/AndroidRuntime(283):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-31 22:10:08.995: E/AndroidRuntime(283):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-31 22:10:08.995: E/AndroidRuntime(283):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:52:56.593

利用

```
ListView lv = (ListView)PrepareComments.this.findViewById(android.R.id.list); 
```

代替

```
ListView lv = (ListView) findViewById(android.R.id.list); 
```

`lv`在 onProgressUpdate 中使用 ListView进行初始化

**注意：**不需要在`runOnUiThread`内部使用`onPreExecute`，`onPostExecute`因为这些方法在 UI 线程上调用，所以我们可以在不使用 runOnUiThread 的情况下访问或更新 UI 元素

# javascript - 将 HTML DOM 集合转换为数组

> ID：14632898
> 
> 赞同：-1
> 
> 时间：2013-01-31T18:45:38.933
> 
> 标签：javascript, jquery, arrays, dom

一组“dl”列表：

```
<div class = "container">
   <dl class = "list">
       <dt class = "title">title 1-1</dt>
       <dd class = "detail">detail 1-1</dd>

       <dt class = "title">title 1-2</dt>
       <dd class = "detail">detail 1-2</dd>
   </dl>
</div>

<div class = "container">
   <dl class = "list">
       <dt class = "title">title 2-1</dt>
       <dd class = "detail">detail 2-1</dd>

       <dt class = "title">title 2-2</dt>
       <dd class = "detail">detail 2-2</dd>
   </dl>
</div> 
```

我需要访问“dt”标签中的所有标题。节点列表返回了两个节点，但是一旦我将它转换为一个数组，它在 console.log 中什么也没有显示。

```
var myContainer = document.getElementsByClassName('container');

for(var i=0; i<myContainer.length; i++) {
    var nodelist = myContainer[i].getElementsByTagName('dt');

    console.log(nodelist);   //returns HTMLcollection []
                             // 0 - dt.title
                             // 1 - dt.title

    var arr = Array.prototype.slice.call(nodelist, 0);

    console.log(arr);        //returns []
                             //there are no child objects.
} 
```

这是为什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-01T03:34:25.610

[`nodelist (HTMLCollection)`](https://developer.mozilla.org/en-US/docs/DOM/HTMLCollection)不是数组。另请参阅[为什么我不能在 NodeList 上使用 forEach 或 map？](https://developer.mozilla.org/en-US/docs/DOM/NodeList#Why_can%27t_I_use_forEach_or_map_on_a_NodeList.3F)

> NodeList 的使用与数组非常相似，并且很想在它们上使用 Array.prototype 方法。然而，这是不可能的。

访问它

```
for (var j = 0; j < nodelist.length; j++)
    console.log(nodelist[j].innerHTML); 
```

[JSFiddle](http://jsfiddle.net/94ALa/)

因为这也被标记为[jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")

```
$('.container .title').each(function(index, title) {
    console.log($(title).text());
}); 
```

[JSFiddle](http://jsfiddle.net/g6nRm/)

*更新*：

我终于找到了罪魁祸首

在 for 循环末尾添加

```
var titles = arr.map(function(dt) { return dt.innerHTML; });
console.log(titles); 
```

这显示了`dt.title`的文本

```
["title 1-1", "title 1-2"]
["title 2-1", "title 2-2"] 
```

[JSFiddle](http://jsfiddle.net/uSyMP/)

# c# - 如果我有一个对某种类型的未知指针引用，我如何获得底层的某种类型？

> ID：14632899
> 
> 赞同：2
> 
> 时间：2013-01-31T18:45:42.233
> 
> 标签：c#, .net, wcf, pointers, types

我正在使用以下代码：

```
Type type = info.ParameterType;
object activatedType = Activator.CreateInstance(type);
arguments[info.Position] = activatedType; 
```

问题是它`type`可能最终成为对某种类型的指针引用，比如`System.String&`（注意 &），那么我怎样才能获得 的基础类型`System.String`？

本质上，我如何将未知类型取消引用到其基础类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T18:49:14.057

```
if(type.IsByRef)
{
   type = type.GetElementType();
} 
```

如果要从其他类型获取引用类型，可以使用[MakeByRefType](http://msdn.microsoft.com/en-gb/library/system.type.makebyreftype.aspx)：

```
Type stringRefType = typeof(string).MakeByRefType(); 
```

# regex - 拆分所有单词但保留拆分字符

> ID：14632901
> 
> 赞同：0
> 
> 时间：2013-01-31T18:45:46.787
> 
> 标签：regex, perl

在 Perl 中，我试图从一段文本中构建一个包含所有单词的数组。

现在我正在使用`@tokens = split /[^\w']+/, $mytext;`

它似乎正在获取所有字母数字单词，但我希望所有标点符号都被视为除下划线之外的单词。例子

`hi. my name is first_last ...`

应该变成的话：hi , . , 我的 , 名字 , 是 , first_last , . , . , .

一共9个字。

我怎样才能做到这一点？我尝试拆分标点符号，但没有保存标点符号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:55:52.367

匹配往往比拆分容易；听起来您想匹配任何一系列单引号/单词字符（包括_）或任何其他非空白字符：

```
my $mytext = 'hi. my name is first_last ...';
my @tokens = $mytext =~ /([\w']+|\S)/g;
print join( ' , ',  @tokens ),"\n"; 
```

产生：

```
hi , . , my , name , is , first_last , . , . , . 
```

`[\w']`是允许任何单词字符（字母、数字或下划线）或单引号的字符类；可以添加其他字符，但有些可能需要转义（例如`[\w'\-]`添加连字符）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T19:45:58.320

如果这是你的话

```
hi. my name is first_last ...
11  22 3333 44 5555555555 
```

这些不是你的分隔符

```
hi. my name is first_last ...
  11  22   33 4          5555 
```

那么您实际上并没有拆分单词（并且`split`可能效果不佳）。你实际上需要一个标记器。

这是构建标记器的通用方法：

```
my @tokens;
for ($mytext) {
   /\G \s+ /xgc;
   if (/\G ( [\w']+   ) /xgc) { push @tokens, $1; redo; }
   if (/\G ( [^\s\w'] ) /xgc) { push @tokens, $1; redo; }
   die "Bad code";
} 
```

但我们可以简化它。

```
my @tokens = $mytext =~ /\G\s*([\w']+|[^\S\w'])/g; 
```

甚至

```
my @tokens = $mytext =~ /\G\s*([\w']+|\S)/g; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T20:36:33.910

扩展 ysth 的想法：

```
my $mytext = 'hi. My name22222 is first_last!? 2,0 #@/';
my @tokens = $mytext =~ /([a-zA-Z_]+|[0-9]+|[.?!,])/g;
print join ":", @tokens,"\n"; 
```

输出：

```
hi:.:My:name:22222:is:first_last:!:?:2:,:0: 
```

这更容易理解，因为它避免了使用 \w 和 \S。\w 涵盖的内容比您想象的要多，因为它包含令人困惑的 _。\S 不仅匹配标点符号。

以上显示了如何使用 | 拆分可以组成单词的字符集，并明确定义字符。不属于任何单词的“垃圾”会被过滤掉。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T18:57:44.820

```
perldoc -f split 
==>
    split /PATTERN/,EXPR,LIMIT
    split /PATTERN/,EXPR
    split /PATTERN/
    split   Splits the string EXPR into a list of strings and returns that
            list. By default, empty leading fields are preserved, and empty
            trailing ones are deleted. (If all fields are empty, they are
            considered to be trailing.)
    ...
            If the PATTERN contains parentheses, additional list elements
            are created from each matching substring in the delimiter.

                split(/([,-])/, "1-10,20", 3);

            produces the list value

                (1, '-', 10, ',', 20)
    ... 
```

添加：

在代码中：

```
my $inp   = 'hi. my name is first_last ...';
my @parts = split /(\W)/, $inp;
printf "%d parts: (%s)\n", scalar @parts, join('), (', @parts);
@parts = grep {$_ gt ' '} @parts;
printf "%d parts: (%s)\n", scalar @parts, join('), (', @parts); 
```

输出：

```
18 parts: (hi), (.), (), ( ), (my), ( ), (name), ( ), (is), ( ), (first_last), ( ), (), (.), (), (.), (), (.)
9 parts: (hi), (.), (my), (name), (is), (first_last), (.), (.), (.) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T18:50:03.923

一种方法是使用[环视断言](http://www.regular-expressions.info/lookaround.html)：您想在空白处拆分 (1)；(2) 每当前一个字符出现时`[^\w']`（字符串结尾除外）；(3) 每当下一个字符出现时`[^\w']`（字符串开头除外），因此您可以编写：

```
@tokens = split /\s+|(?<=[^\w'])|(?=(?!^)[^\w'])/, $mytext; 
```

# php - 覆盖magento块

> ID：14632904
> 
> 赞同：0
> 
> 时间：2013-01-31T18:45:51.377
> 
> 标签：php, magento, magento-1.7

你好我试图用我自己的模块来做一个块：

Block:age_Downloadable_Block_Customer_Products_List 但它不工作这个块代码：

```
 class module_name_Block_Customer_Products_List extends    Mage_Downloadable_Block_Customer_Products_List
{

    /**
     * Class constructor 
```

结束模块的配置文件是：

```
 <global>
        <blocks>
            <module_name> <!-- class group -->
                <class>module_name</class> <!-- path to class -->
            </module_name>            
        </blocks>
        <blocks>
            <downloadable>
            <customer>
                 <rewrite>
                     <products_list>module_name_Block_Customer_Products_List</products_list>
                 </rewrite>
            </customer>
            </downloadable>
     </blocks> 
```

我已经在后端刷新了缓存一个反应模块，但它不工作。

你能帮我一把吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:23:38.427

您的 XML 有点偏离，这应该适合您：

```
<blocks>
   <downloadable>
      <rewrite>
         <customer_products_list>Module_Name_Block_Customer_Products_List</customer_products_list>
      </rewrite>
   </downloadable>
</blocks> 
```

您要覆盖的模块名称应该是节点内的第一个节点。接着是rewrite，最后rewrite里面的节点应该是从“Block_”到类末尾的路径。

多一点：您也可以使用相同的结构来覆盖助手或模型。

# emacs - 为 Clojure 模式向 TAB 添加新功能

> ID：14632914
> 
> 赞同：1
> 
> 时间：2013-01-31T18:46:49.777
> 
> 标签：emacs, clojure, tabs

我知道 TAB 想在 Emacs 中变得聪明。然而，它对我的​​口味还不够聪明。而且因为它是“智能”的，所以扩展起来似乎很复杂。

我希望 Clojure 模式下的 TAB 完全按照它的行为行事，*除非*我在位于第`defn, defmacro`0 列的 a 等的第一个括号中。

当它在那里时，我希望它改为从*hs-minor-mode调用**hs-toggle-hiding*。

 *但是，我越来越疯狂地试图让它发挥作用。

我首先尝试修改分配给 TAB 的快捷方式，以便仅在 Clojure 模式下时，它会首先调用我的函数，然后调用*indent-for-tab-command*但更改 TAB 快捷方式似乎非常复杂。并且由于 Emacs 已经计划了模式可以在 lisp-indent-function 中注册其 TAB 函数的情况，我希望修改*clojure-indent-function*，它说：

```
(defun clojure-indent-function (indent-point state)
  "This function is the normal value of the variable `lisp-indent-function'. 
```

然而，这个函数显然只*在光标位于函数内部*时才被调用。当光标位于“(defn ...”) 的第一个 '(' 上时不会。

`hs-toggle-hiding`在 Clojure 模式下并在括号上指向第 0 列时，如何让 TAB 调用？

我不希望这影响 org-mode 或任何其他模式。只是 Clojure 模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T19:11:20.667

一般的答案是：

```
(eval-after-load 'clojure-mode
  '(define-key clojure-mode-map [tab] 'my-tab-command)) 
```

正如您所描述的，定义：

```
(defun my-tab-command (&optional arg)
  (interactive "P")
  (if (and (zerop (current-column)) (eq (char-after) ?\())
      (hs-toggle-hiding)
    (indent-for-tab-command arg))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T19:25:47.800

`clojure-indent-function`是 的一个实现`lisp-indent-function`，它*不*应该缩进而是*计算*缩进。任何对可能的缩进感兴趣的代码都可以随时调用它，因此我们当然不想将我们想要的`TAB`行为挂钩到这个地方。

考虑到`TAB`在一个有趣的点上它的智能可能不是你想要的，最好重新绑定`TAB`以将我们的逻辑放在*所有*可能的智能之前：

```
(defun clojure-hs-tab (arg)
  (interactive "P")
  (if (and (<= (current-column) 1)
           (save-excursion
             (beginning-of-line)
             (looking-at "\(")))
      (hs-toggle-hiding)
    (indent-for-tab-command arg)))

(define-key clojure-mode-map (kbd "TAB") 'clojure-hs-tab) 
```

我冒昧地修改了您的要求并允许第 1 列，因为这是 hs-toggle-hiding 在隐藏后放置点的地方。您不想通过第二次`TAB`按键取消隐藏吗？

“标签智能”的下一个级别是`indent-line-function` 变量。*当完成或缩进*选项卡确定*缩进*而不是完成时，这就是所谓的。有一个强烈的理由不在这里使用它：`indent-line-function`可能会被多次调用以缩进*region*。即使我们决定只覆盖 indenting 和 complete 的*缩进*行为， `TAB`最好还是建议`indent-for-tab-command` （全局建议并检查`major-mode`仅在该模式下执行我们想要的操作）。*

# c - 如何关闭 C 中整数变量的第三个最低有效位？

> ID：14632917
> 
> 赞同：-2
> 
> 时间：2013-01-31T18:46:56.923
> 
> 标签：c

> **可能重复：**
> [如何取消设置整数中的特定位](https://stackoverflow.com/questions/8557105/how-to-unset-a-specific-bit-in-an-integer)

想象一下，我有一个这样的变量：

```
int n = 465; 
```

如何关闭第三个最低有效位？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:48:20.523

第三个最低有效位是 (1<<2)。要关闭，除此之外的所有位都为 1。

n &= ~(1 << 2)

（编辑：丹的评论是正确的，我的错：它是 1<<2，而不是 1<<3）

# c# - 无法加载文件或程序集“工具，版本=4.5.0.0，文化=中性，PublicKeyToken=f7660c0f5438cda5”或其依赖项之一

> ID：14632921
> 
> 赞同：1
> 
> 时间：2013-01-31T18:47:18.383
> 
> 标签：c#

最初在 Visual Studio 2012 中打开一个项目，现在在 Visual Studio 2010 中打开它时出现此错误：

> Reference.svcmap：无法加载文件或程序集“工具，版本=4.5.0.0，文化=中性，PublicKeyToken=f7660c0f5438cda5”或其依赖项之一。该系统找不到指定的文件。

在 2012 年再次打开它也提示同样的错误，我的项目是 3.5 版。我不知道为什么它要求4.5？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T10:12:48.183

也许这会对你有所帮助。我遇到了类似的错误，它提到了 Reference.svcmap，而我在项目中唯一的服务参考是 Bing 翻译服务。我打开了配置屏幕，注意到您可以在下面的屏幕截图中看到红色突出显示的复选框：“在引用的程序集中重用类型”。我真的不知道设置做了什么，但我试图取消选中它，点击 OK 并猜猜是什么......项目编译并运行得很好！

在阅读了一些关于设置的文档后，我实际上变得更加困惑。如果你问我，这个错误应该发生在我的 Windows 7 + Visual Studio 2010 设置以及我的 Windows 8 + Visual Studio 2010 设置上。虽然只有后者给了我错误......

更新：图像消失了。所以打开服务的配置（右键）。我所指的复选框具有标签：“在引用的程序集中重用类型”

再附上图。![图片](../Images/df780f3409c0b779c67f3c006051950d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T19:00:50.920

从 中`Reference.svcmap`，这看起来像是一个 WCF 参考。也许它需要在 .NET 3.5 下重新生成？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-03T16:22:20.710

对我来说，这个错误是因为项目使用了一个外部库，当我调用一个函数时它没有引用它。在我的例子中，这个库是用另一种语言 (c++) 开发的。为了解决这个问题，我卸载了项目并打开了 cspproj 文件，并检查了这个库

```
<ItemGroup>
    <Content Include="Lib\.......\Tools.dll">
      <CopyToOutputDirectory>Always</CopyToOutputDirectory>
    </Content>
    <Content Include="Lib\Lib2.dll" />
  </ItemGroup> 
```

# .net - 特定类型错误的 ValidationForm 消息

> ID：14632926
> 
> 赞同：1
> 
> 时间：2013-01-31T18:47:30.353
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-3

当任何表单字段未填写时，我希望 ValidationSummary 显示消息“所有字段都是必需的”，但是当发生其他类型的错误（如错误的电子邮件格式或无效日期）时，我想要它显示完整的错误列表。

例如：

```
Name: Raphael_________
Age: _________________
E-mail: me@example.com

"All fields are required." 
```

但是当所有字段都已填写，但其中一个或多个具有无效值时：

```
Name: Raphael_________
Age: twenty-four______
E-mail: me at example.com

- The Age field has an invalid number;
- Please enter a valid e-mail address; 
```

有没有办法做到这一点？

# php - Drupal Views 模块没有从外部数据库中获取表

> ID：14632931
> 
> 赞同：1
> 
> 时间：2013-01-31T18:47:47.600
> 
> 标签：php, drupal, drupal-7, views, drupal-views

我一直在关注 Drupal 7 的 Views 3 帮助文件，但我有点坚持需要添加到我的模块以使其对 Views 可见，以便我可以使用 Views 在我的外部显示数据数据库。

当然，我的真实数据库有更多有用的字段，但我在显示时遇到了麻烦——所以在我尝试更复杂的东西之前，我将这个测试数据库改为“hello world”。这是架构。

```
database name = other

create table strings (
id int primary key auto_increment,
mystring varchar(50)
); 
```

这是我的 settings.php 以包含数据库：

```
<?php
// ...

$databases = array (
  'default' =>
  array (
    'default' =>
    array (
      'database' => 'drupal',
      'username' => 'drupal_user',
      'password' => 'my_other_pass',
      'host' => 'localhost',
      'port' => '',
      'driver' => 'mysql',
      'prefix' => '',
    ),

    array (
        'database' => 'other',
        'username' => 'my_user',
        'password' => 'my_pass',
        'host' => 'localhost',
        'port' => '',
        'driver' => 'mysql',
        'prefix' => '',
    ),
  ),
);

//...

?> 
```

这是我的名为 test （已启用）的自定义模块的 test.views.inc 文件，它向 Drupal 描述了 mystrings 的表结构是什么样的。

```
<?php
//useful site explaining all of this: http://groups.drupal.org/node/17236
function test_views_data() {
    $data = array(
        'strings' => array(
            'table' => array(
                'group' => t('views test'),

                'base' => array(
                    'field' => 'id',
                    'title' => t("I guess node"),
                    'help' => t("help for I guess node I guess"),
                    'weight' => -10,
                    'database' => 'others',
                ),
            ),

            'id' => array(
                'title' => t('id'),
                /*'field' => array(
                    'handler' => 'views_handler_field_node',
                    'click sortable' => TRUE,
                ),*/
                'relationship' => array(
                    'label' => t("node I think"),
                    'base' => 'node',
                    'base_field => 'id',
                ),
                /*'argument' => array(
                    'handler' => 'view_handler_argument_node_nid',
                    'name field' => 'id for strings',
                    'numeric' => TRUE,
                    'validate type' => 'nid',
                ),*/

                /*'filter' => array(
                    'handler' => 'views_handler_filter_numeric',
                ),*/

                /*'sort' => array(
                    'handler' => 'views_handler_sort',
                ),*/
            ),

            'mystring' => array(
                'title' => t('mystring'),
                'field' => array(
                    'handler' => 'views_handler_field',
                    'click sortable' => TRUE,
                ),
                'filter' => array(
                    'handler' => 'views_handler_filter_string',
                ),
                'argument' => array(
                    'handler' => 'views_handler_argument_string',
                ),
                'sort' => array(
                    'handler' => 'views_handler_sort',
                ),
            ),
        ),
    );

    return $data;
} 
```

这是我的 test.module 文件：

```
<?php

function test_help($section) {
    switch($section) {
        case "admin/help#test":
        return "<p>hello from test</p>";

        case "admin/modules#description":
        return "hello from test inside the admin help thing";
    }
}

function test_page() {
    return "<p>hello from the actual test page</p>";
}

function test_views_api() {
    return array('api' => 3.0);
} 
```

**这是当前的问题**：当我尝试创建新视图时，我看不到任何此类信息或与我的数据库和表 mystrings 相关的任何内容。有人知道我在自定义模块代码/视图使用中做错了什么吗？任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T02:25:35.127

我只是设置了一个基本模块来测试它，它工作正常。我可以看到您的代码的主要问题是 settings.php 文件。

设置.php

```
<?php
$databases = array (
  'default' => array (
      'default' => array (
      'database' => 'drupaldev',
      'username' => 'drupal_user',
      'password' => '',
      'host' => 'localhost',
      'port' => '',
      'driver' => 'mysql',
      'prefix' => '',
    ),
  ),

  'testdb' => array(
    'default' => array (
      'database' => 'testdb',
      'username' => 'testdb_user',
      'password' => '',
      'host' => 'localhost',
      'port' => '',
      'driver' => 'mysql',
      'prefix' => '',
    ),
  ),
); 
```

so_views.module

```
<?php

/**
 * Implements hook_views_api().
 * 
 * @return array
 */
function so_views_views_api() {
  return array(
    'api' => 3,
  );
}

/**
 * Implements hook_views_data().
 *
 * @return array
 */
function so_views_views_data() {
  return array(
    'example_table' => array(
      'table' => array(
        'group' => t('SO View Table'),
        'base' => array(
          'field' => 'nid',
          'title' => t('SO new Table'),
          'help' => t('Table contains data'),
          'weight' => -10,
          'database' => 'testdb',
        ),
        'join' => array(
          'node' => array(
            'left_field' => 'nid',
            'field' => 'nid',
          ),
        ),
      ),
      'nid' => array(
        'title' => t('Node Id'),
        'help' => t('This is the node Id'),
        'relationship' => array(
          'base' => 'node',
          'base field' => 'nid',
          'handler' => 'views_handler_relationship',
          'label' => t('Default label for the relationship'),
          'title' => t('Title shown when adding the relationship'),
          'help' => t('More information on this relationship'),
        ),
      ),
      'plain_text_field' => array(
        'title' => t('Plain text field'),
        'help' => t('Just a plain text field.'),
        'field' => array(
          'handler' => 'views_handler_field',
          'click sortable' => TRUE, // This is use by the table display plugin.
        ),
        'sort' => array(
          'handler' => 'views_handler_sort',
        ),
        'filter' => array(
          'handler' => 'views_handler_filter_string',
        ),
        'argument' => array(
          'handler' => 'views_handler_argument_string',
        ),
      ),
      'numeric_field' => array(
        'title' => t('Numeric field'),
        'help' => t('Just a numeric field.'),
        'field' => array(
          'handler' => 'views_handler_field_numeric',
          'click sortable' => TRUE,
        ),
        'filter' => array(
          'handler' => 'views_handler_filter_numeric',
        ),
        'sort' => array(
          'handler' => 'views_handler_sort',
        ),
      ),
      'boolean_field' => array(
        'title' => t('Boolean field'),
        'help' => t('Just an on/off field.'),
        'field' => array(
          'handler' => 'views_handler_field_boolean',
          'click sortable' => TRUE,
        ),
        'filter' => array(
          'handler' => 'views_handler_filter_boolean_operator',
          // Note that you can override the field-wide label:
          'label' => t('Published'),
          // This setting is used by the boolean filter handler, as possible option.
          'type' => 'yes-no',
          // use boolean_field = 1 instead of boolean_field <> 0 in WHERE statment.
          'use equal' => TRUE,
        ),
        'sort' => array(
          'handler' => 'views_handler_sort',
        ),
      ),
      'timestamp_field' => array(
        'title' => t('Timestamp field'),
        'help' => t('Just a timestamp field.'),
        'field' => array(
          'handler' => 'views_handler_field_date',
          'click sortable' => TRUE,
        ),
        'sort' => array(
          'handler' => 'views_handler_sort_date',
        ),
        'filter' => array(
          'handler' => 'views_handler_filter_date',
        ),
      ),
    ),
  );
} 
```

所有与视图相关的代码都来自文档。我建议安装 advanced_help 模块并查看 yoursite.com/views/api-tables。

如果您想在不同的模块中进行设置，请创建一个信息文件，所需的 sql 可以在[此处找到](http://drupalcontrib.org/api/drupal/contributions!views!views.api.php/function/hook_views_data/7)

# c# - 当方法有参数时，Ajax 回调失败

> ID：14632932
> 
> 赞同：0
> 
> 时间：2013-01-31T18:47:51.720
> 
> 标签：c#, javascript, asp.net, ajax

我有以下 javascript：

```
<script type="text/javascript">
    $(document).ready(function() {
        $.ajax({
            type: "POST",
            url: "WebForm3.aspx/sayHello",
            contentType: "application/json; charset=utf-8",
            data: "{}",
            dataType: "json",
            success: AjaxSucceeded,
            error: AjaxFailed
        }); 
    });
    function AjaxSucceeded(result) {
        alert(result.d);
    }
    function AjaxFailed(result) {
        alert(result.status + ' ' + result.statusText);
    }  
</script> 
```

我的代码中有以下内容。

```
[WebMethod]
public static string sayHello() 
{
    return "hello";
} 
```

这有效并显示你好。

现在，如果我这样做：

```
[WebMethod]
public static string sayHello(string args) 
{
    return "hello";
} 
```

然后我得到内部服务器错误 500 作为回复。

如何更改它以允许我将实际数据发送到服务器端？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T18:50:14.093

```
data: {
    args: "hello world"
}, 
```

此外，同时删除`contentType`和`dataType`。
另外，请添加`traditional: true`. 您产生的请求将是：

```
$.ajax({
    type: "POST",
    url: "WebForm3.aspx/sayHello",
    traditional: true,
    data: {
        args: "hello world"
    },
    success: AjaxSucceeded,
    error: AjaxFailed
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T19:18:37.497

好，

这有效：

```
 $(document).ready(function() {

      $.ajax({
          type: "POST",
          url: "WebForm3.aspx/Test",
          data: '{"data":"abc"}',
          contentType: "application/json; charset=utf-8",
          dataType: "json",
          success: function (response) {
              alert(response.d);
          }
      });
}); 
```

# php - 如何显示帖子的特色图片

> ID：14632939
> 
> 赞同：-1
> 
> 时间：2013-01-31T18:48:32.610
> 
> 标签：php, html, css, wordpress

这是用于显示与 wp_ai1ec_events 相关的相应帖子的插件代码

```
function draw_event($atts ) {

            global $wpdb;

            $event = $wpdb->get_results("SELECT * FROM  wp_ai1ec_events ORDER BY start");

            foreach ( $event as $events ) 

{

     $events1=$events->post_id;

     $wpdb->show_errors();

    $list=$wpdb->get_row("SELECT * FROM $wpdb->posts WHERE ID =$events1");

    $url = site_url();

    $title=str_replace(' ', '-', $list->post_title);

    $title=str_replace('/', '', $title);

    $start = explode(" ", $events->start);

    $end = explode(" ", $events->end);
    $img_src=wp_get_attachment_image($events1);
    $result.=$img_src."<p><strong><a style='color:#FFF' href='".$url."/ai1ec_event/".$title."' >".$list->post_title."</a></strong></p> <img src='".$img_src."'/>  Start date:".$start[0]."<br> Time:".$start[0]."</br>End date:".$end[0]."<br> Time:".$end[1]."<br><br><br>";  

}

    return $result;     

        //print_event($events,$list);

            }

add_shortcode( 'listtheevent', 'draw_event'); 
```

现在我想展示相应帖子的特色图片。我正在使用 wp_get_attachment_image($events1); 为了这。但这不起作用

有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:55:25.763

查看 CODEX 以获取帖子缩略图（特色图片）

[http://codex.wordpress.org/Post_Thumbnails](http://codex.wordpress.org/Post_Thumbnails)

# html - 仅使用 CSS 单击 div 时如何显示另一个 div

> ID：14632940
> 
> 赞同：1
> 
> 时间：2013-01-31T18:48:35.397
> 
> 标签：html, css

我只想在单击另一个 div 时使用 CSS 来显示一个 div

这是我的 HTML 代码

```
<div id="contentmenu">
                <div class="show">
                    <a class="show">
                        My Student
                    </a>
                </div>
                <div class="hidden">
                        <a href="#">Link 1</a><br/>
                        <a href="#">Link 2</a><br/>
                        <a href="#">Link 3</a><br/>
                </div>
</div> 
```

我的 CSS 代码是

```
#contentmenu{
    margin-top: 79px;
    background-color: #E9D4B5;
    width: 25%;
    height: 100%;
}
.show{
    margin-top: 2%;
    background-color: #CE9127;
    width: 96%;
    height: 10%;
    padding-left: 4%;
    color: white;
    text-decoration: none;
}
.hidden{
    display: none;
    padding-left: 8%;
    margin-top: 1%;
} 
```

那么如何在仅使用CSS单击div（class = show）时显示div（class = hidden）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T18:57:29.873

您可以使用[Checkbox Hack](http://css-tricks.com/the-checkbox-hack/)来做到这一点，但请确保确保浏览器支持足够。它看起来像这样：

```
#contentmenu{
    margin-top: 79px;
    background-color: #E9D4B5;
    width: 25%;
    height: 100%;
}
.show{
    margin-top: 2%;
    background-color: #CE9127;
    width: 96%;
    height: 10%;
    padding-left: 4%;
    color: white;
    text-decoration: none;
    display: block;
}
.hidden{
    display: none;
    padding-left: 8%;
    margin-top: 1%;
}
input[type=checkbox] {
   position: absolute;
   top: -9999px;
   left: -9999px;
}
input[type=checkbox]:checked ~ .hidden {
   display: block;
} 
```

使用此 HTML：

```
<div id="contentmenu">
    <label for="toggle-1"><a class="show">
      My Student
      </a></label>
<input type="checkbox" id="toggle-1">
  <div class="hidden">
    <a href="#">Link 1</a><br/>
    <a href="#">Link 2</a><br/>
    <a href="#">Link 3</a><br/>
  </div>
</div> 
```

这是一个演示：http: [//jsbin.com/exuvez/1/edit](http://jsbin.com/exuvez/1/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T19:20:21.457

对于没有 hack，也没有 javascript，您可以通过悬停事件实现您想要的。只是对 css 的一个小改动和补充：

```
#contentmenu{
    margin-top: 79px;
    background-color: #E9D4B5;
    width: 25%;
    height: 100%;
}
.show{
    margin-top: 2%;
    background-color: #CE9127;
    width: 96%;
    height: 10%;
    padding-left: 4%;
    color: white;
    text-decoration: none;
}
.hidden{
    display: none;
    padding-left: 8%;
    margin-top: 1%;
  width:100%;
}

.show:hover + .hidden {
  display:block;
}
.hidden:hover {
 display:block; 
} 
```

因此 width:100% 已添加到 .hidden 中，并为悬停事件添加了两条规则。

[http://codepen.io/anon/pen/eCmox](http://codepen.io/anon/pen/eCmox)

# c# - 订购通用列表不能按预期工作？

> ID：14632942
> 
> 赞同：-1
> 
> 时间：2013-01-31T18:48:52.357
> 
> 标签：c#, linq

为了简化我的问题，我将举一个例子。假设我有一个`objects`包含一个`datetime`和一个`integer`属性的列表。我首先按`datetime`字段排序列表项，然后按`integer`属性排序。

```
Item #   Date Value  Int Value
  1      2012-01-01     0
  2      2012-01-01     4
  3      2012-01-01     6
  4      2012-01-01     13 
```

假设我有这 4 件物品`list`（起初未订购，以上是我希望它最终的样子）。

我只是通过以下方式订购它们：

```
myList = myList.OrderBy(v=>v.MyDateValue).ThenBy(v=>v.MyIntValue).ToList(); 
```

执行上面的行后，结果如下：

```
Item #   Date Value  Int Value
  1      2012-01-01     0
  4      2012-01-01     13
  2      2012-01-01     4
  3      2012-01-01     6 
```

起初我认为它会将我的`int`值解释为一个`string`可能（可能不是一个合乎逻辑的陈述，只是在相当长的一段时间内对此感到困惑）然后我将我的`int`值更改为 10、11、12、13，但结果仍然相同。

知道为什么这不起作用吗？或者我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:59:46.173

`v => v.DateValue.Date`解决方案：如果您对时间不感兴趣，请将您的键选择器更改为。

我无法复制您描述的行为。以下按预期工作：

```
 private class Foo
    {
        public DateTime Date { get; set; }
        public int Id { get; set; }
    }

    static void Main(string[] args)
    {
        var myList = new List<Foo>
                         {
                             new Foo {Date = new DateTime(2012, 01, 01), Id = 12},
                             new Foo {Date = new DateTime(2012, 01, 01), Id = 1},
                             new Foo {Date = new DateTime(2012, 01, 03), Id = 7},
                             new Foo {Date = new DateTime(2012, 01, 01), Id = 4},
                         };

        var newList = myList.OrderBy(v => v.Date).ThenBy(v => v.Id).ToList();
        foreach (var f in newList)
        {
            Console.WriteLine("{0}, {1}", f.Date, f.Id);
        }

        Console.ReadLine();
    } 
```

输出项目顺序为 1、4、12 和 7。（7 是最后一个，因为它的日期较晚。）

我怀疑你的`DateTime`值`Time`不是 0。

通过将您的密钥选择器更改为 来验证这一点`v => v.DateValue.Date`。

# java - Java - else if 和 else without if？

> ID：14632946
> 
> 赞同：-6
> 
> 时间：2013-01-31T18:49:00.710
> 
> 标签：java, comments, if-statement

嘿，所以我在添加注释之前让这个 Java 程序工作，但现在我收到 else if 和 else 语句的错误，说它们没有 if，这些注释是否干扰了 if 语句的读取方式？任何帮助深表感谢。

```
/**
  * A class that takes 2 different times in military time as input and 
  * outputs the difference in hours and minutes.
  *
  * @author Name
  */
import java.util.Scanner;
public class Assignment1Q3
{
    public static void main(String[] args) 
    { 
    Scanner in = new Scanner(System.in);
    System.out.print("Please enter the first time: ");
    int fTime = in.nextInt();
    System.out.print("Please enter the second time: ");
    int lTime = in.nextInt();
    int tDifference = Math.abs(fTime - lTime);//Calculates the absolute difference.
    String strTDiff = String.valueOf(tDifference);//Converts the value to a String.
    int length = strTDiff.length();//Obtains the length of the value.
    String hours = "";//Declares the values to be initialized in the if statement.
    String minutes = "";
    if (length == 4)
    {
        hours = strTDiff.substring(0, 2);/**If the number of digits is 4, the first
        minutes = strTDiff.substring(2, 4);*two are the hour.
     }                                      */
    else if (length == 3)
    {
        hours = strTDiff.substring(0, 1);/**If the number of digits is 3, the first
        minutes = strTDiff.substring(1, 3);*one is the hour.
    }                                      */
    else
    {
        hours = ("0");                   /**If the number of digits is not 4 or  3,
        minutes = strTDiff.substring(0, 1);*the value is less than 1 hour.
    }                                      */
    System.out.println(hours + " hours " + minutes + " minutes");
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T18:50:34.437

那是因为`}`就在您的最后一个之前在and`else`之间进行了评论。`/*``*/`

任何适当的代码编辑器的颜色都应该使它明显，就像它在问题中一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T18:50:36.180

您已经评论了 if、else 和 elseif 的右大括号。删除它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T18:50:48.177

正如您可以在网站上直接看到的那样（语法突出显示），您确实已经注释掉了其中的一些：`}`. 三，如果我没记错的话。这就是导致错误的原因。您还注释掉了三行代码（这可能是故意的，但我想我会提到它）。我建议你使用一些IDE。我自己使用 Eclipse for Java。

您可以在 Java 中使用双斜杠 , 注释掉单行`//`（双斜杠右侧的所有内容都将被注释掉）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T18:50:56.853

您的所有 if、else if 和 else 语句中的右括号都被注释掉了

```
if (length == 4)
{
    hours = strTDiff.substring(0, 2);/**If the number of digits is 4, the first
    minutes = strTDiff.substring(2, 4);*two are the hour.
}                                      */ 
```

看起来你并不确切地知道块评论是如何工作的。您假设注释仅适用`*`于每行字符之后的文本。实际上，所有字符，包括换行符和回车符，都会被注释掉，直到到达`*/`. 您可能想要更改您的代码，以便每个条目看起来像这样：

```
if (length == 4)
{
    /* If the number of digits is 4, the first
     * two are the hour.
     */
    hours = strTDiff.substring(0, 2);
    minutes = strTDiff.substring(2, 4);
} 
```

注意注释第二行的星号不是必需的，这可能会有所帮助。例如：

```
/* If the number of digits is 4, the first
   two are the hour.
 */ 
```

这仍然是有效的块注释。（虽然不那么可读）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-31T18:50:58.007

是的。您的（关闭评论）与（关闭块）`*/`在同一行，因此使其成为评论的一部分。它还注释掉了一些我假设你想要执行的代码。`}``if`

块注释标记`/*`并将`*/`它们之间的所有内容变成注释，包括换行符。代码开头注释中每个新行上的星号仅用于样式和对齐，并没有实际意义。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-02T10:47:06.313

You have inserted comment in a way that your most of the programming is enclosed into that comment. Just remove your comments and then compile the program. You should rather use `BlueJ` or `Net Beans` which will show you with its different color schemes that what is wrong with your programming pattern.

# android - AsyncTask onPostExecute 收到错误的参数

> ID：14632951
> 
> 赞同：0
> 
> 时间：2013-01-31T18:49:19.290
> 
> 标签：android

我在 Android 上有一个简单的 AsyncTask 类，我注意到我总是将肯定的结果传递给 onPostExecute 方法，即使我知道 doInBackground 返回的是否定的。

请看一下我的代码。我在调试时运行此代码，并确认我落在异常块上并返回 false。但它没有反映在 onPostExecute 上。

```
public class AsyncSendOSCTask extends AsyncTask<OSCMessage, Void, Boolean> {

private OSCPortOut oscPortOut;
private Activity activity;

public AsyncSendOSCTask(Activity activity, OSCPortOut oscPortOut) {
    this.activity = activity;
    this.oscPortOut = oscPortOut;
}   

@Override
protected Boolean doInBackground(OSCMessage... message) {
    try {

        this.oscPortOut.send(message[0]);
        return Boolean.TRUE;
    }
    catch(Exception exp) {
        return Boolean.FALSE;
    }
}

@Override
protected void onPostExecute(final Boolean result) {
    if(!result.booleanValue()) { // this is always true!!!          
        Toast.makeText(this.activity, "Error Sending OSC", Toast.LENGTH_SHORT).show();
    }
} 
```

}

我在这里想念什么？谢谢你的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:03:34.417

如果您的问题仍然存在：

请试试这个：

> 公共类 AsyncSendOSCTask 扩展 AsyncTask {
> 
> 私有 OSCPortOut oscPortOut；私人活动活动；布尔示例布尔；//添加示例bool
> 
> 公共 AsyncSendOSCTask（活动活动，OSCPortOut oscPortOut）{ this.activity = 活动；this.oscPortOut = oscPortOut; }
> 
> @Override protected Boolean doInBackground(OSCMessage... message) { try {
> 
> ```
>  this.oscPortOut.send(message[0]);
>     examplebool=true; // added
>     return(examplebool); //edited
> }
> catch(Exception exp) {
>     examplebool=false; //added
>     return(examplebool); //edited
> } } 
> ```
> 
> @Override protected void onPostExecute(final Boolean result) { if(!result.booleanValue()) { // 这总是正确的！！！
> Toast.makeText(this.activity, "错误发送 OSC", Toast.LENGTH_SHORT).show(); } }

它是快速手工编码且未经测试的，您也可以更改 onPostExecute。

# opengl - OpenGL着色器 - 重叠多个纹理

> ID：14632953
> 
> 赞同：0
> 
> 时间：2013-01-31T18:49:20.440
> 
> 标签：opengl, fragment-shader, multitexturing

我无法找到一种模式来相互绘制纹理。我需要使结果片段颜色如下：

tex1 + (1-tex1alpha)*tex2 + (1-tex1alpha-tex2alpha)*tex3

不是混合纹理，而是在图像编辑器中将一个放在其他类似图层上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:18:44.300

我并没有真正使用 OpenGL，因此 GLSL 代码可能并不完全有效。但是您正在寻找的着色器应该看起来像这样。随时纠正任何错误。

```
vec4 col;
col = texture2D(tex3, uv)
if(col.a == 1) { gl_FragColor = col; return; }
col = texture2D(tex2, uv)
if(col.a == 1) { gl_FragColor = col; return; }
col = texture2D(tex1, uv)
if(col.a == 1) { gl_FragColor = col; return; } 
```

也就是说，如果纹理的数量是固定的。如果您有可变数量的纹理，您可以将它们放入纹理数组并执行以下操作：

```
vec4 col;
for(int i = nTextures - 1; i >= 0; --i)
{
    col = texture2DArray(textures, vec3(uv, i));
    if(col.a == 1)
    {
        gl_FragColor = col;
        return;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:50:33.073

You can write the formula you posted directly in to the shader. The following will work:

```
uniform sampler2D sampler1;
uniform sampler2D sampler2;
uniform sampler2D sampler3;

varying vec2 texCoords;

void main()
{
    vec4 tex1 = texture(sampler1, texCoords);
    vec4 tex2 = texture(sampler2, texCoords);
    vec4 tex3 = texture(sampler3, texCoords);
    gl_FragColor = tex1 + (1 - tex1.a) * tex2 + (1 - tex1.a - tex2.a) * tex3;
}; 
```

However the 3rd argument could turn negative, which would have undesired results. Better would be:

```
gl_FragColor = tex1 + (1 - tex1.a) * tex2 + max(1 - tex1.a - tex2.a, 0) * tex3; 
```

# ruby-on-rails-3 - 如何使用 Rails Actionmailer 发送多种语言的电子邮件？

> ID：14632956
> 
> 赞同：0
> 
> 时间：2013-01-31T18:49:24.620
> 
> 标签：ruby-on-rails-3, actionmailer

我的网站有两种语言（英语和西班牙语）。我有表单，当用户提交它时，它会向他的电子邮件帐户发送一封 HTML 电子邮件（英文）。

如何配置我的 actionmailer 以便它能够以正确的语言向用户发送电子邮件？

我已经创建了视图

```
confirmation_email.es.html.erb
confirmation_email.en.html.erb 
```

我在哪里指定要使用的模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:03:20.123

这应该由 rails 模板解析自动处理。

尝试以下以西班牙语发送：

```
 I18n.with_locale :es do
    UserMailer.confirmation_email(user).deliver!
  end 
```

# django - 如何在某些模型管理员中禁用 mptt 的 TreeForeignKey 字段的 Select 小部件中的某些选项？

> ID：14632961
> 
> 赞同：3
> 
> 时间：2013-01-31T18:49:37.507
> 
> 标签：django, django-mptt

`MyModel`有一个mptt的`TreeForeignKey`字段`category`。在 admin 中`MyModel`，如何禁用`Select`此`category`字段小部件中的某些选项？

谢谢

```
class Category(MPTTModel):
    parent = TreeForeignKey('self', blank=True, null=True, related_name='children')
    nom = models.CharField(max_length=100)

class MyModel(models.Model):
    category = TreeForeignKey(Category)
    # more fields 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-03T18:59:44.967

我不得不覆盖 MyModelAdminForm 并为该`forms.ChoiceField`字段使用带有[SelectWithDisabled](http://djangosnippets.org/snippets/2453/)小部件的`category`字段。就我而言，我只希望可以选择树的叶子。

```
class MyModelAdminForm(forms.ModelForm):

    class Meta:
        model = MyModel

    def __init__(self, *args, **kwargs):
        self.level_indicator = kwargs.pop('level_indicator', u'---')
        super(MyModelAdminForm, self).__init__(*args, **kwargs)

        queryset = Category.objects.all()
        mptt_opts = queryset.model._mptt_meta
        queryset = queryset.order_by(mptt_opts.tree_id_attr, mptt_opts.left_attr)

        choices = []
        for item in queryset:
            level = getattr(item, item._mptt_meta.level_attr)
            value = item.id
            label = mark_safe(conditional_escape(self.level_indicator) * level + smart_unicode(item.nom))
            if item.is_leaf_node():
                choices.append((value, label))
            else:
                choices.append((value, {'label': label, 'disabled': True}))

        self.fields['category'] = forms.ChoiceField(choices=choices, widget=SelectWithDisabled)

class MyModelAdmin(admin.ModelAdmin):
    form = MyModelAdminForm

samsic_site.register(MyModel, MyModelAdmin) 
```

# r - R中的ifelse“意外符号”错误

> ID：14632967
> 
> 赞同：0
> 
> 时间：2013-01-31T18:49:59.633
> 
> 标签：r

它只是一个基本的 ifelse，但它返回错误：“意外符号”并指向最后一行的第一个字符。有任何想法吗？

```
input1<-readline("using C:/Users/HouseGroup/Desktop/betterformat.csv as the target csv file.
  Is this correct?  Y/N" )
ifelse (input1=="Y",
theData <- read.csv("C:/Users/HouseGroup/Desktop/betterformat.csv"),
rightDir<- readline("please input the proper file path") 
theData<-  read.csv(rightDir)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T19:01:28.533

您应该使用[R 语言定义](http://cran.r-project.org/doc/manuals/R-lang.html#if)`if`中定义的标准和`else`构造。

> 当 if 语句不在块中时，else（如果存在）必须与语句 2 的结尾出现在同一行。否则 statement2 末尾的新行完成 if 并产生一个被评估的语法完整语句。一个简单的解决方案是使用括在大括号中的复合语句，将 else 与标记语句结束的右大括号放在同一行

```
if (input1=="Y") {
  theData <- read.csv("C:/Users/HouseGroup/Desktop/betterformat.csv")
} else {
  rightDir <- readline("please input the proper file path") 
  theData <- read.csv(rightDir)
} 
```

该命令`ifelse`接受向量并返回向量。请参阅`?ifelse`示例。

```
x <- c(6:-4)
sqrt(x)  #- gives warning
sqrt(ifelse(x >= 0, x, NA))  # no warning 
```

# capybara - 使用 Capybara 的 HTTP 响应 200

> ID：14632971
> 
> 赞同：11
> 
> 时间：2013-01-31T18:50:05.503
> 
> 标签：capybara

我尝试使用几种变体来检查 Capybara 的 200 Ok HTTP 响应，但它们都不起作用：

```
response.should be_success
page.status.should be(200)
page.response.status.should == 200 
```

还有一个吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-03T11:16:15.583

I found it:

```
page.status_code.should be 200 
```

And it's work fine!!!

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-11-21T16:10:22.007

由于当前的 RSpec 版本发出弃用警告，我建议将您的解决方案更改为：

```
expect(page.status_code).to be(200) 
```

这个对我有用。

PS 弃用警告如下：

> 弃用：不推荐使用`should`from rspec-expectations 的旧`:should` 语法而不显式启用该语法。改用新`:expect`语法或显式启用`:should`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-14T13:41:37.907

两个答案和提问者都没有说他们使用的是哪个驱动程序。它是一个重要的信息，这使得差异。只是为了提供完整的信息，这**不适用于 selenium webdriver**，尽管它确实**适用于 poltergeist 和 capybara-webkit**驱动程序

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-26T02:05:32.813

作为一种替代方式，您可以使用 Ruby 的 Http 客户端 API 来检查响应代码或类型

单程 ：

```
response = Net::HTTP.get_response(URI.parse(current_url))

expect(response.kind_of? Net::HTTPSuccess).to be_truthy 
```

第二种方式：

```
response = Net::HTTP.get_response(URI.parse(current_url))

expect(response.code.to_i.eql?(200)).to be_truthy #response.code returns the code as a string 
```

PS：您不需要下载任何外部 gem，因为它带有 Ruby 库

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-21T17:00:51.090

Selenium 令人讨厌地不提供任何标头或 HTTP 状态数据，所以我编写了这个中间件来注入一个 HTML 注释，其中包含与 Capybara 一起使用的 HTTP 状态代码。

```
module Vydia
  module Middleware
    class InjectHeadersForSelenium

      def initialize(app)
        @app = app
      end

      def call(env)
        @status, @headers, @response = @app.call(env)

        if @headers["Content-Type"] && @headers["Content-Type"].include?("text/html")
          @prepend = "<!-- X-Status-Code=#{@status} -->\n"
          @headers = @headers.merge(
            "Content-Length" => (@headers["Content-Length"].to_i + @prepend.size).to_s
          )
        end

        [@status, @headers, self]
      end

      def each(&block)
        if @prepend
          yield(@prepend)
          @prepend = nil
        end

        @response.each(&block)
      end

    end
  end
end 
```

在测试中，您可以像这样获得状态代码：

```
def get_http_status
  begin
    page.driver.status_code
  rescue Capybara::NotSupportedByDriverError
    matches = /<!-- X-Status-Code=(\d{3}) -->/.match(page.body)
    matches && matches[1] && matches[1].to_i
  end
end

get_http_status 
```

# c++ - 我如何用 cin 读取一行用户输入，将该行用空格分割，然后将这些标记存储到一个字符串数组中？

> ID：14632973
> 
> 赞同：0
> 
> 时间：2013-01-31T18:50:14.400
> 
> 标签：c++, arrays, token, cin

基本上，是的，一切都如上所述。但我想在不使用矢量类的情况下做到这一点。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:36:50.053

三个步骤：

1.  使用 getline() 读取一行。确保您使用的是 free 函数，而不是 istream 的成员。
2.  确定行中的字符串数。您可以将 stringstream 与 istream_iterators 和 distance() 结合使用。
3.  分配一个足够大的数组并复制输入元素。您可以再次使用带有 istream_iterators 和 copy() 的字符串流。

作为第 2 步和第 3 步的替代方法，您还可以动态扩大阵列或使用最大尺寸。请注意，我故意不告诉您如何执行所有这些操作，以免破坏您的学习体验。如果您有具体的代码，欢迎您提出更具体的问题。

# c++ - 如何以编程方式确定程序是否在用户的 PATH 中

> ID：14632974
> 
> 赞同：1
> 
> 时间：2013-01-31T18:50:15.373
> 
> 标签：c++

我有一个用于调试目的的应用程序启动一个带有日志文件的编辑器。编辑器设置为 kedit。在 RedHat 版本更新之后，我们不再拥有 kedit。我们只是更改了默认编辑器并添加了一个环境变量，让用户选择他们喜欢的编辑器。

问题是，如果用户将环境变量设置为不存在或不是他们的路径的编辑器，则不会发生任何事情。我想看看编辑器是否存在，如果不存在，请通知他们。有没有办法在 C++ 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T19:02:13.643

在手册中查看这些功能

```
char *getenv(const char *name);

int stat(const char *path, struct stat *buf); 
```

或`open`和`fopen`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T19:21:40.407

您可以使用`execlp`启动编辑器，它会在当前环境的`PATH`. 它还会在失败时设置`errno`为`ENOENT`（“没有这样的文件或目录”），因此您可以捕获不存在的编辑器条件。

```
char *editor = getenv ("EDITOR");
if(execlp(editor, "foo.txt", (char *) 0))
    perror("Error launching editor"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T19:28:48.917

我假设您正在申请`fork()`or`forkpty()`后跟`execlp()`or `execvp()`。基本上，您只需要检查是否`exec?p()`返回（仅在失败时返回）。如果是这样，您只需向父进程发出失败发生的信号。一种方法是使用`exit()`状态。`wait()`父进程可以通过使用收割子进程来捕获此状态。

```
#define EXEC_FAIL_MAGIC 177
void edit (const char *e) {
    int status = 0;
    pid_t p = fork();
    switch (p) {
    default: /* parent */
        while (wait(&status) != p) {}
        break;
    case 0:  /* child */
        execlp(e, e, "foo.txt", (char *)0);
        exit(EXEC_FAIL_MAGIC);
    case -1: /* error */
        fail("fork() failed");
    }
    if (!WIFEXITED(status)) fail("abnormal termination of editor");
    if (WEXITSTATUS(status) == EXEC_FAIL_MAGIC) fail("execlp failed");
    if (WEXITSTATUS(status) != EXIT_SUCCESS) fail("editor had failure");
} 
```

# ajax - Ajax 调用不适用于 Jquery 1.7.2？

> ID：14632975
> 
> 赞同：1
> 
> 时间：2013-01-31T18:50:17.503
> 
> 标签：ajax, jquery

将 Jquery 库从 1.4.4 升级到 1.7.2 后，这个 ajax 调用不再进入成功函数？有什么建议么？TIA

```
$.ajax({
    type: 'GET',
    async: true,
    url: myURL,
    dataType: 'json',
    data: {},
    beforeSend: function (xhr) {
        // add basic authorization
        xhr.setRequestHeader("Authorization", auth);
        xhr.setRequestHeader("Accept", "application/json");
    },
    success: function (dataItem) {
        //Do success work 
    },
    complete: function (dataItem) {
        //Do complete work
    },
    error: function (dataItem) {
        //error message
    }
}); // end $.ajax 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:56:22.160

如果要更新，为什么不更新到最新版本。

**这是 jQuery 如何告诉你修复它的：**

我们意识到现有的站点和插件可能会受到这些更改的影响，并且正在为过渡升级路径提供 jQuery Migrate 插件。下面的个别描述表明是否可以使用 jQuery Migrate 插件恢复 1.9 中更改的行为。请注意，jQuery 1.9 中的所有更改也将适用于 jQuery 2.0，并且 jQuery Migrate 插件也将在那里可用。

jQuery Migrate 插件的未压缩开发版本包括控制台日志输出，用于在使用特定已弃用和/或删除的功能时发出警告。这使得它作为一种迁移调试工具很有价值，用于查找和修复现有 jQuery 代码和插件中的问题。它可以用于 jQuery 核心版本的诊断，一直到 1.6.4。

该插件的压缩版本不会生成任何日志输出，并且可以在需要 jQuery 1.9 或更高版本但还必须使用较旧的不兼容 jQuery 代码或插件时在生产站点上使用。理想情况下，这只会用作短期解决方案，但这是由您做出的决定。

[链接在这里](https://github.com/jquery/jquery-migrate/)

**其他选项**

*   与插件开发人员核实插件是否已升级
*   查找具有相同或相近功能的更新版本的插件
*   通过用相关的替换代码替换折旧的代码，自己更新插件代码。

# java - 是什么导致过多的数据存储写入操作（即使它们被禁用！）？

> ID：14632976
> 
> 赞同：0
> 
> 时间：2013-01-31T18:50:18.950
> 
> 标签：java, google-app-engine, google-cloud-datastore

我有一个（基于检票口的）网络应用程序，它有一个自动刷新面板（它每 5 秒刷新一次）。我的数据存储区写入操作计数每小时增加约 5%（即约 2500 次操作/小时）。但是 Appstat 仅显示 datastore_v3.RunQuery 操作，这是预期的行为。这些写操作从何而来？

为了调查此问题，我从应用程序设置中禁用了数据存储写入。我开始在日志中收到以下警告：

```
2013-01-31 10:17:53.672
/wicket/
com.google.apphosting.api.ApiProxy$CapabilityDisabledException: The API call datastore_v3.Put() is temporarily unavailable: Datastore writes have been disabled by an application administrator. Writes can be re-enabled in the admin console.
    at com.google.apphosting.runtime.ApiProxyImpl$AsyncApiFuture.success(ApiProxyImpl.java:487)
    at com.google.apphosting.runtime.ApiProxyImpl$AsyncApiFuture.success(ApiProxyImpl.java:392)
    at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher$1.runInContext(RpcStub.java:781)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
    at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher.rpcFinished(RpcStub.java:823)
    at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher.success(RpcStub.java:808)
    at com.google.net.rpc3.impl.client.RpcClientInternalContext.runCallbacks(RpcClientInternalContext.java:898)
    at com.google.net.rpc3.impl.client.RpcClientInternalContext.finishRpcAndNotifyApp(RpcClientInternalContext.java:803)
    at com.google.net.rpc3.impl.client.RpcNetChannel.afterFinishingActiveRpc(RpcNetChannel.java:1092)
    at com.google.net.rpc3.impl.client.RpcNetChannel.finishRpc(RpcNetChannel.java:940)
    at com.google.net.rpc3.impl.client.RpcNetChannel.handleResponse(RpcNetChannel.java:2300)
    at com.google.net.rpc3.impl.client.RpcNetChannel.messageReceived(RpcNetChannel.java:2101)
    at com.google.net.rpc3.impl.client.RpcNetChannel.access$2100(RpcNetChannel.java:145)
    at com.google.net.rpc3.impl.client.RpcNetChannel$TransportCallback.receivedMessage(RpcNetChannel.java:3171)
    at com.google.net.rpc3.impl.client.RpcChannelTransportData$TransportCallback.receivedMessage(RpcChannelTransportData.java:614)
    at com.google.net.rpc3.impl.wire.RpcBaseTransport.receivedMessage(RpcBaseTransport.java:417)
    at com.google.apphosting.runtime.udrpc.UdrpcTransport$ClientAdapter.receivedMessage(UdrpcTransport.java:425)
    at com.google.apphosting.runtime.udrpc.UdrpcTransport.dispatchPacket(UdrpcTransport.java:266)
    at com.google.apphosting.runtime.udrpc.UdrpcTransport.readPackets(UdrpcTransport.java:218)
    at com.google.apphosting.runtime.udrpc.UdrpcTransport$1.run(UdrpcTransport.java:82)
    at com.google.net.eventmanager.AbstractFutureTask$Sync.innerRun(AbstractFutureTask.java:260)
    at com.google.net.eventmanager.AbstractFutureTask.run(AbstractFutureTask.java:121)
    at com.google.net.eventmanager.EventManagerImpl.runTask(EventManagerImpl.java:578)
    at com.google.net.eventmanager.EventManagerImpl.internalRunWorkerLoop(EventManagerImpl.java:1002)
    at com.google.net.eventmanager.EventManagerImpl.runWorkerLoop(EventManagerImpl.java:884)
    at com.google.net.eventmanager.WorkerThreadInfo.runWorkerLoop(WorkerThreadInfo.java:136)
    at com.google.net.eventmanager.EventManagerImpl$WorkerThread.run(EventManagerImpl.java:1855) 
```

这是否意味着某些东西正在尝试写操作？如您所见，堆栈中没有来自我的应用程序的类。

更奇怪的是，即使在这段时间（大约一个小时）我禁用了写入操作，我的写入操作配额也增长了 2%！这个怎么可能？

# regex - Clojure 正则表达式匹配

> ID：14632977
> 
> 赞同：1
> 
> 时间：2013-01-31T18:50:24.353
> 
> 标签：regex, clojure

我正在尝试匹配字符串中**某个位置 k**（下例中的 k=3）的模式。

我试过了

```
(re-seq #"^alex" (str (drop 3 "xxxalexandre"))) 
```

但它不匹配任何东西 ( `=> nil`)

Clojure 的方法是什么？（我在 Clojure 1.4.0 上）

一个很好的选择是在任何地方匹配模式，但是我需要它在输入中找到模式的**位置。**我可以在不访问`java.util.regex.Matcher`实例的情况下执行此操作吗？（我被告知这是非常糟糕的，因为它是可变的）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T19:11:05.247

表达式`(str (drop 3 ...`应该是`(apply str (drop 3 ...`。

但是，最好使用`subs`：

```
user=> (re-seq #"^alex" (subs "xxxalexandre" 3))
("alex") 
```

或者，如果您愿意，可以在正则表达式中输入三个字符：

```
user=> (map second (re-seq #"^...(alex)" "xxxalexandre"))
("alex") 
```

对于您的后续行动，找到匹配的位置，一种方法（对于简单的情况）是`.indexOf`在结果上使用：

```
user=> ((fn [s p] (let [[m] (re-seq p s)] [m (.indexOf s m)])) "xxxalexandre" #"alex")
["alex" 3] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T19:26:54.567

试试看`(str (drop 3 "xxxalexandre"))`返回什么：

```
=> (str (drop 3 "xxxalexandre"))
"clojure.lang.LazySeq@a65bc80b" 
```

由于 drop 返回的是惰性序列，所以 str 的参数是惰性序列，返回的是该惰性序列的 .toString，即对象引用的字符串。

```
=> (drop 3 "xxxalexandre")
(\a \l \e \x \a \n \d \r \e)

=> (str (lazy-seq `(\a \l \e \x \a \n \d \r \e)))
"clojure.lang.LazySeq@a65bc80b" 
```

用于`apply`实现lazy seq并将集合作为多个参数放入str函数中。

```
=> (apply str (lazy-seq '(\a \l \e \x \a \n \d \r \e)))
"alexandre"

=> (apply str (drop 3 "xxxalexandre"))
"alexandre" 
```

现在您的正则表达式将匹配：

```
=> (re-seq #"^alex" (apply str (drop 3 "xxxalexandre")))
("alex") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T18:53:23.697

正则表达式中的 $ 映射到行尾.. 你可能想要 ^alex

# opengl-es - OpenGL 片段着色器如何知道要在纹理中采样的像素？

> ID：14632979
> 
> 赞同：5
> 
> 时间：2013-01-31T18:50:33.280
> 
> 标签：opengl-es, webgl, shader, fragment-shader, vertex-shader

所以我有一个三角形：

[![](../Images/093b83f67af585402aee9e02f6596811.png "由 imgur.com 主办")](https://imgur.com/lSjgHPI)

我有一个顶点着色器：

```
uniform mat4 uViewProjection;
attribute vec3 aVertexPosition;
attribute vec2 aTextureCoords;
varying vec2 vTextureCoords;

void main(void) {
  vTextureCoords = aTextureCoords;
  gl_Position = uViewProjection * vec4(aVertexPosition, 1.0);
} 
```

我有一个片段着色器：

```
precision mediump float;
uniform sampler2D uMyTexture;
varying vec2 vTextureCoords;

void main(void) {
  gl_FragColor = texture2D(uMyTexture, vTextureCoords);
} 
```

我输入三组顶点和 UV，交错：

```
# x,  y,    z,   s,   t
0.0,  1.0,  0.0, 0.5, 1.0
-1.0, -1.0, 0.0, 0.0, 0.0 
1.0, -1.0,  0.0, 1.0, 0.0 
```

片段着色器如何知道绘制像素 A 与像素 B 不同？有什么变化？

[![](../Images/7c04e0eba8446655e930c9bc99e110bd.png "由 imgur.com 主办")](https://imgur.com/Dg8DpXE)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T18:57:05.280

据我了解，GL 管道的光栅化阶段在三角形面上进行插值，使用插值在每个像素上运行片段着色器[。](http://en.wikipedia.org/wiki/Barycentric_coordinate_system_%28mathematics%29) `vTextureCoords`

# android - 在android中使用drawable设置按钮的边距

> ID：14632981
> 
> 赞同：4
> 
> 时间：2013-01-31T18:50:35.950
> 
> 标签：android, xml, android-layout, android-xml, margins

我正在eclipse中开发一个android应用程序。我有一组按钮，我想在它们之间插入一些空间。我正在使用可绘制对象中的 xml 文件（background.xml）设置这些按钮的背景。对于插入空格，我对主 xml 文件中的所有按钮 seperatley 使用以下代码行。

```
 android:layout_marginLeft = "10dip"
    android:layout_marginRight = "10dip"
    android:layout_marginTop = "10dip"
    android:layout_marginBottom = "10dip" 
```

我的问题是，有没有办法通过修改 background.xml 文件来设置边距。否则，每当我修改边距时，我都必须编辑所有按钮。提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T18:55:10.307

这是在哪里使用样式的完美示例。样式只是您希望应用于大量对象的一组通用属性。例如，您可以`buttonStyle`使用以下代码创建一个名为的样式，这将完全符合您的要求。如果您决定要更改边距，只需更改样式即可。如果您决定要为不同尺寸的手机设置不同的边距值，只需创建两种样式，一种用于普通，一种用于大号，如果需要，还可以添加更多样式。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="buttonStyle">
        <item name="android:layout_marginLeft">10dip</item>
        <item name="android:layout_marginRight">10dip</item>
        <item name="android:layout_marginTop">10dip</item>
        <item name="android:layout_marginBottom">10dip</item>
    </style>
</resources> 
```

然后按钮代码可以简化为：

```
style="@style/buttonStyle" 
```

当您更改样式时，所有按钮都会自动更改。你也可以做嵌套样式。有关更多信息，请参阅[API](http://developer.android.com/guide/topics/ui/themes.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T03:37:33.567

我遵循了不同的语法，因为@PearsonArtPhoto 的代码片段在我的环境中不起作用：

```
<style android:id="@+id/tab_main" >
    <item android:layout_marginTop="10dp"></item>
    <item android:layout_marginBottom="10dp"></item>
    <item android:layout_marginLeft="10dp"></item>
    <item android:layout_marginRight="10dp"></item>
</style> 
```

希望这可以帮助！

# ios - 如何为整个 App 设置 UIKeyboard-Style？

> ID：14632984
> 
> 赞同：4
> 
> 时间：2013-01-31T18:50:37.777
> 
> 标签：ios, objective-c, cocoa-touch, uitextfield, uiappearance

我目前正在尝试全局设置键盘样式，但我的方法不起作用。我尝试使用`UIAppearance`并将这行代码放在 AppDelegate 中：

```
[[UITextField appearance] setKeyboardAppearance:UIKeyboardAppearanceAlert]; 
```

但是我在控制台上得到的是以下内容：

```
[UISearchBarTextField _UIAppearance_setKeyboardAppearance:]: unrecognized selector sent to instance 0xa1897e0 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-17T09:49:27.313

iOS7 扩展了`UIAppearance`UITextFields 的协议，所以你现在可以在 UITextField 上设置keyboardAppearance。

```
[UITextField appearance].keyboardAppearance = UIKeyboardAppearanceDark; 
```

不过，`UITextView`不支持。对于这门课，我会选择 jszumski 的解决方案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T13:03:51.133

`UIAppearance`仅适用于专门用宏标记`UI_APPEARANCE_SELECTOR`为兼容的方法，不幸`keyboardAppearance`的是不是其中之一。

获得你想要的东西的最好方法是子类化`UITextField`并`keyboardAppearance = UIKeyboardAppearanceAlert;`在子类`init`和`initWithFrame:`方法中设置。然后在应用程序中使用的任何地方专门使用您的课程`UITextField`。

# php - 如何保护我网站中的 URL/目录？

> ID：14632987
> 
> 赞同：0
> 
> 时间：2013-01-31T18:50:45.140
> 
> 标签：php, .htaccess

我想保护我网站中的 URL 例如：www.mysite.com/admin 使用用户“登录”我不想让任何人看到“管理员”目录中的任何内容，甚至是图片或任何其他文件。这怎么可能？我已经阅读了有关会话的信息，但所有这些都可以阻止用户访问网页。我熟悉PHP。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:08:06.840

我不太确定你的目的是什么所以

如果用户知道所有特定路径，.htaccess 是帮助您保护数据的一种解决方案，但此解决方案需要一些努力来学习

但是如果您认为没有人知道您的具体路径，那么一种快速简便的方法是创建简单的 index.php 以在您拥有的每个文件夹中向想要访问该文件夹的人回应一些措辞可以帮助您保护您的目录列表文件夹路径

希望这有帮助；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T19:31:40.263

这有点难看，但最简单的方法是对目录进行密码保护，这会在浏览器中弹出一个身份验证弹出类型框。如果您使用的是 Apache，您可以在[Apache 文档](http://httpd.apache.org/docs/2.2/howto/auth.html)中找到更多信息。如果您使用的是另一台服务器，他们可能会在某处提供类似的文档。这也可以由 PHP 通过发送[正确的标头](http://php.net/manual/en/features.http-auth.php)直接完成，以便针对数据库进行身份验证，而不是将用户信息存储在文本文件中。

如果您希望使其无缝集成到您的站点中（即没有丑陋的弹出窗口），这有点困难，但可行。PHP 文件很简单。只需编写某种代码来确定用户是否已登录，如果没有，则不显示内容。但是对于图像或其他静态文件，我建议这样做：[Echo/print a jpg-image with php，为了安全？](https://stackoverflow.com/questions/1422510/echo-print-a-jpg-image-with-php-for-safety)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T18:54:12.183

看看[这个](http://corz.org/serv/tricks/htaccess.php)，你可以根据需要隐藏

# c++ - 比较 C++ 中字符串向量的向量

> ID：14632996
> 
> 赞同：0
> 
> 时间：2013-01-31T18:51:17.633
> 
> 标签：c++

我是 C++ 的新手（来自 Python），我试图找出一种比较两个不同大小的向量的好方法，每个向量都包含字符串向量，以找到它们之间的匹配向量。我试过 == 但这显然只是比较迭代器而不是它们的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:14:59.490

找出共同的子向量：

```
#include <vector>
#include <iostream>
#include <string>

int main()
{
    std::vector<std::vector<std::string> > data1; // init here
    std::vector<std::vector<std::string> > data2; // init here

    std::vector<std::vector<std::string> > results;

    // common sub vectors put in result
    std::set_union(data1.begin(),data1.end(), data2.begin(), data2.end(),
                   std::back_inserter(results));
} 
```

但这可能无法回答您的基本问题：

行间阅读：
您正在使用迭代器对两个向量进行迭代：

```
 std::vector<std::vector<std::string> >::const_iterator loop1 = /* Get some part of data1 */;
  std::vector<std::vector<std::string> >::const_iterator loop2 = /* Get some part of data2 */;

  // loop1/loop2 are iterators in-to your vec/vec/string
  // Thus de-referencing them will give you a (const) reference to vec/string
  // Thus you should be able to compare them with `==`

  if ((*loop1) == (*loop2))
  {
      std::cout << "They are the same\n";
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T19:02:49.480

所以你想比较内部向量？像这样的东西应该可以工作（使用 gcc 4.7）：

```
typedef vector< vector<string> > VectorOfVector;
VectorOfVector v1 = { {"ab", "cd"}, { "ab" } }, v2 = { {"xy"}, {"ab"}};

for(vector<string> & v1item : v1) { 
  for(vector<string> & v2item : v2) { 
    if (v1item == v2item) cout << "found match!" << endl;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T19:05:21.863

```
#include <algorithm>
#include <vector>
#include <string>
#include <iostream>

using namespace std;

int main()
{
    vector<vector<string>> v1 = { {"abc", "012"}, {"xyz", "9810"}};
    vector<vector<string>> v2 = { {"pqr", "456"}, {"abc", "012"}, {"xyz", "9810"}};

    vector<pair<size_t, size_t>> matches;

    for (auto it1 = v1.cbegin(); it1 != v1.cend(); ++it1)
    {
        auto it2 = find(v2.cbegin(), v2.cend(), *it1);
        if (it2 != v2.cend())
        {
            matches.push_back(make_pair(it1 - v1.cbegin(), it2 - v2.cbegin()));
        }
    }

    for_each(matches.cbegin(), matches.cend(), [](const pair<size_t, size_t> &p)
    {
        cout << p.first << "\t" << p.second << endl;
    });
} 
```

这会将两个向量中的所有匹配索引值成对打印。您可以使用相应向量的 [ ] 运算符读取匹配向量的内容。

# css - Primefaces AccordionPanel - 如何扩展选项卡之间的空间？

> ID：14632997
> 
> 赞同：1
> 
> 时间：2013-01-31T18:51:17.570
> 
> 标签：css, jsf, jsf-2, primefaces, accordion

如何扩展[Primefaces AccordionPanel](http://www.primefaces.org/showcase/ui/accordionPanel.jsf)的选项卡之间的空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T19:20:12.670

根据我的 Chrome 网络开发者工具集，

![在此处输入图像描述](../Images/9f1a3fa21917575846be1b72b8f732c4.png)

你只需要改变`margin-top`.`.ui-accordion .ui-accordion-header`

例如，到 20px：

```
.ui-accordion .ui-accordion-header {
    margin-top: 20px;
} 
```

### 也可以看看：

*   [如何使用自定义样式覆盖默认的 PrimeFaces CSS？](https://stackoverflow.com/questions/8768317/how-do-i-override-those-classes-defined-in-primefaces-css/8774997#8774997)

# java - java中的jFrame GetGraphics在绘制图像时为空

> ID：14632998
> 
> 赞同：0
> 
> 时间：2013-01-31T18:51:31.777
> 
> 标签：java, image, swing, graphics, jframe

将图像绘制到 jframe 时出现空异常错误。我调试代码并检查图像和框架不为空，但在将图像绘制到框架时仍然抛出 NULL 异常。

请看一看 ：

```
public void run(){
    try{

        ObjectInputStream objVideoIn = new ObjectInputStream(serVideoIn);
        byte[] imgbytes=null;
        ByteArrayInputStream barrin=null;

        JFrame jf = new JFrame();
        Graphics ga=jf.getGraphics(); //Getting null exception 
                //Thread.sleep(10000);
        jf.setVisible(true);
        jf.setSize(400, 400);

        while(true){
                    int index=0;
                    //Thread.sleep(300);
                    int size= (int)objVideoIn.readObject();
                    imgbytes = new byte[size];
                    barrin = new ByteArrayInputStream(imgbytes);
                    System.out.println("image size" + size);
                    //Thread.sleep(200);
                    while(index<size)
                    {
                        System.out.println("reading image");
                        int bytesread = objVideoIn.read(imgbytes, index, size-index);
                        if(bytesread<0){
                            System.out.println("error in receiving bytes yar");
                        }
                        index+=bytesread;
                    }
                    //barrin.read(imgbytes, 0, imgbytes.length);
                    barrin = new ByteArrayInputStream(imgbytes);

                    buffImg = ImageIO.read(barrin);

                        if(buffImg==null)
                        {
                            System.out.println("null received");
                        }
                        else {
                            System.out.println("image received");

                        **ga.drawImage(buffImg, 0, 0, null);**

                        }
                    }

            }
    }
    catch(Exception ex)
    {
        System.out.println("error reading video" +ex.getMessage());
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T18:53:48.733

NPE 可能来自这里：

```
Graphics ga=jf.getGraphics(); 
```

根据[文档](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#getGraphics%28%29)：

> 为此组件创建图形上下文。如果此组件当前不可显示，此方法将返回 null。

1）不要将`Component#getGraphics`其用作不良做法/不持久，`null`除非组件可见，否则将返回。

2）宁可使用`JPanel`和覆盖`paintComponent(Graphics g)`不要忘记`super.paintComponent(g);`在 overriden 中调用作为第一个调用`paintComponent`。

3) 覆盖`getPreferredSize()`并返回正确`Dimension`的 s 以适合正在绘制的图像。

4）添加`JPanel`到框架中以使图像当然可见。

或者，您也可以使用 a `JLabel`，它只需要一个`setIcon(..)`调用并添加到`JFrame`.

以下是我的一些例子：

使用`JPanel`：

*   [从 C 驱动器加载 Java 代码中的图像](https://stackoverflow.com/questions/13237908/loading-image-in-java-code-from-c-drive/13238468#13238468)

*   [图像绘图适用于 JFrame，但不适用于 JPanel](https://stackoverflow.com/questions/13073828/image-drawing-works-for-jframe-but-not-jpanel/13074097#13074097)

*   [如何在框架中显示图像？](https://stackoverflow.com/questions/12996501/how-to-display-an-image-in-a-frame/12996718#12996718)

*   [将 JPanel 转换为 JScrollPane 中的图像](https://stackoverflow.com/questions/14551646/convert-a-jpanel-to-an-image-in-a-jscrollpane/14551679#14551679)

使用`JLabel`：

*   [在 JPanel 或 JLabel 中调整图像大小和显示而不损失质量](https://stackoverflow.com/questions/12660122/image-resizing-and-displaying-in-a-jpanel-or-a-jlabel-without-loss-of-quality/12660146#12660146)