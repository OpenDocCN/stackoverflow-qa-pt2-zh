# StackOverflow 问答 14303000-14303999

# jsf - 如何使用 为了 编辑

> ID：14303000
> 
> 赞同：0
> 
> 时间：2013-01-13T11:29:51.837
> 
> 标签：jsf, jsf-2, primefaces, watermark, in-place-editor

我想`<p:watermark>`用作`<p:inplace>`编辑器。我试过如下

```
<p:watermark for="txtSvcName" value="Please enter service name..." />
<p:inplace id="ipSvcName" editor="true" >                                   
    <p:inputText id="txtSvcName" value="#{service.serviceName}"  maxlength="50" 
     readonly="#{not subMerchantManagement.editPerspective}"    converter="UpperCaseConverter" />                                   
</p:inplace> 
```

但不幸的是，这不起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:37:57.303

根据[Primefaces Showcase](http://www.primefaces.org/showcase/ui/watermark.jsf)`p:watermark` ，当某些事件发生时，您必须通过 javascript 调用。`p:inputText`您可以在哪里拨打电话有很多事件： `onblur`，`onchange`...只需`PrimeFaces.showWatermarks();`在您需要的事件发生时调用函数。您也应该查看[Primefaces 文档](http://primefaces.org/documentation.html)，因为还有另一个功能可以在您需要时清除水印。祝你好运。

**已编辑**

当用户保存 inplace 内容时，您可以触发 ajax 事件。处理该请求后，只需调用 show 函数并更新主容器。我想这会很有用。

```
<p:panel id="panel">
    <p:watermark for="txtSvcName" value="Please enter service name..." />
    <p:inplace id="ipSvcName" editor="true" emptyLabel="Please enter service name..." >                                   
        <p:inputText id="txtSvcName" value="#{service.serviceName}" maxlength="50" 
            readonly="#{not subMerchantManagement.editPerspective}"    converter="UpperCaseConverter" /> 
        <p:ajax event="save" listener="#{subMerchantManagement.handleSave}" 
            oncomplete="PrimeFaces.showWatermarks();" update="panel" />  
    </p:inplace>
</p:panel> 
```

# c# - 在异步方法体中获取当前任务实例

> ID：14303003
> 
> 赞同：10
> 
> 时间：2013-01-13T11:30:04.423
> 
> 标签：c#, .net, asynchronous

如果我有一个像这样的异步方法体 -

```
public async Task GetSomething() {

    await SendText("hi");
    await SendImage("bla.bmp");

} 
```

当等待启动时​​，如何在将 Task 对象返回给用户之前获取它

IE..

```
public async Task GetSomething() {

    myTasks.Add(Task.Current);
    await SendText("hi");
    await SendImage("bla.bmp");

    //some processing

} 
```

这样我就可以在其他地方做

```
 await Task.WhenAll(myTasks);
 Console.WriteLine("All tasks complete"); 
```

这样我就可以在关闭之前等待所有任务完成

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T11:55:44.027

这不是直接可能的，因为该语言没有访问“当前”任务的工具。

不过有一个解决方法：将您的异步方法包装在另一个方法中。一旦异步方法返回（大约在第一个等待点发生），这种*其他方法就可以获取任务。*

在所有情况下，我都建议让调用者将异步任务添加到您的列表中，而不是异步方法本身。即使从封装的角度来看，这也是有用的。

# php - 致命错误：允许的内存大小为 268435456 字节已用尽

> ID：14303004
> 
> 赞同：2
> 
> 时间：2013-01-13T11:30:04.250
> 
> 标签：php, runtime-error

我最近在通过插件 SuperSlider-login 的设置时在我的网站上收到了这个消息：

> 致命错误：第 487 行 /home/content/78/9634878/html/wp-includes/script-loader.php 中允许的内存大小为 268435456 字节已用尽（尝试分配 261900 字节）**

我不确定是什么触发了这个消息。我尝试了以下方法：

1.  如果您有权访问您的 PHP.ini 文件，请更改 PHP.ini 中的行 如果您的行显示 32M，请尝试 64M： `memory_limit = 128M ;`脚本可能消耗的最大内存量 (128MB)

2.  如果您无权访问 PHP.ini，请尝试将其添加到`.htaccess`文件中：

    `php_value memory_limit 128M`

3.  尝试将此行添加到您的 wp-config.php 文件中：增加分配给 PHP 的内存 `define('WP_MEMORY_LIMIT', '128M');`

但没有变化。另外，我在几分钟前升级到了 WordPress 3.5。这会影响网站吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-05-14T23:23:03.183

检查并查看您是否正在递归调用函数：

```
// ---  DON'T DO THIS: ---
function myFunction(){
  $out.=myFunction();
  return $out;
} 
```

# razor - Umbraco 在 Razor 中通过 ID 获取节点

> ID：14303006
> 
> 赞同：1
> 
> 时间：2013-01-13T11:30:06.010
> 
> 标签：razor, umbraco

我正在尝试通过 Razor 脚本通过其 ID 获取节点，但我不断收到此错误：

> 错误 CS0118：“umbraco.MacroEngines.BaseContext.Node”是“属性”，但用作“类型”

这是我的代码：

```
@inherits umbraco.MacroEngines.DynamicNodeContext
@{
var node = new Node(Parameter.newsnode);
} 
```

我觉得我在这里遗漏了一些非常基本的东西，似乎无法弄清楚。

Umbraco 4.11.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T22:46:44.283

这是我通常这样做的方式：

```
@inherits umbraco.MacroEngines.DynamicNodeContext
@{
  // Get some default node id if this is null or empty
  var newsNodeId = String.IsNullOrEmpty(Parameter.newsnode) ? "1022" : Parameter.newsnode;

  // Get the node using this helper method on DynamicNode
  var newsNode = @Model.NodeById(newsNodeId);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T16:13:31.883

It was as simple as including Umbraco.NodeFactory

```
@using umbraco.NodeFactory 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-23T20:15:37.697

有这个简单的功能：

```
@{
    var node = @Library.NodeById(Model.Id);
} 
```

@* 或者 *@

```
@{
    var node = @Library.NodeById(1250);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-04T08:37:20.893

如果您正在为 Umbraco 编程并且想快速了解 Razor 代码的可用选项，您可以使用备忘单：http: [//our.umbraco.org/projects/developer-tools/razor-dynamicnode-cheat-sheet](http://our.umbraco.org/projects/developer-tools/razor-dynamicnode-cheat-sheet)。另请阅读此文档： http: [//our.umbraco.org/wiki/reference/code-snippets/razor-snippets](http://our.umbraco.org/wiki/reference/code-snippets/razor-snippets)

# arrays - 当我运行我的程序时， fgets() 被忽略并且 scanf() 不向结构输入数据

> ID：14303008
> 
> 赞同：2
> 
> 时间：2013-01-13T11:30:26.990
> 
> 标签：arrays, gcc, structure, scanf, fgets

当我运行它时 fgets() 被简单地忽略并且 scanf() 不会将数据输入到结构中。

我的代码：

```
#include"stdio.h"
#include"stdlib.h"

typedef struct {
  char nazv[50];
  int numr;
  int date[3];
  int time[2];
} train;

void input(train*rasp,int n);
void print(train*rasp,int n);
void output(train*rasp, int n, int*date, int*time);

main() {
  int n;
  int t[2];
  int d[3];
  printf("How much? ");
  scanf("%d",&n);
  train* rasp=(train*)malloc(n*sizeof(train));
  input(rasp,n);
  printf("Enter date: ");
  for (int date=0;date<3;date++) {
    scanf("%d",&d[date]);
  }
  printf("Enter time: ");
  for (int time=0;time<2;time++) {
    scanf("%d",&t[time]);
  }
  for (int i=0;i<n;i++)
    print(rasp,n);
  output(rasp,n,d,t);
  free(rasp);
  return 0;
}
void input(train*rasp,int n) {
  for (int i=0;i<n;i++) {
    printf("Train #%d\n",i+1);
    printf("Enter train's name: ");
    fgets(rasp[i].nazv,50,stdin);
    printf("Enter train's number: ");
    scanf("%d",&rasp[i].numr);
    printf("Enter date: ");
    for (int d=0;d<3;d++) {
      scanf("%d",&rasp[i].date[d]);
    }
    printf("Enter time: ");
    for (int t=0;t<2;t++) {
      scanf("%d",&rasp[i].time[t]);
    }
  }
  printf("\nOK.");
}
void print(train*rasp,int n) {
  printf("Name: ");
  printf("%s",rasp[n].nazv);
  printf("\nNumber: %d",rasp[n].numr);
  printf("\nDate: %d.%d.%d", rasp[n].date[0],rasp[n].date[1],rasp[n].date[2]);
  printf("\nTime: %d:%d\n", rasp[n].time[0],rasp[n].time);
}
void output(train*rasp,int n,int*date,int*time) {
  for (int i=0;i<n;i++) {
    if (rasp[n].date[2]<date[2])
      continue;
    if (rasp[n].date[2]>date[2]) {
      print(rasp,n);
    } else {
      if (rasp[n].date[1]<date[1])
    continue;
      if (rasp[n].date[1]>date[1]) {
    print(rasp,n);
      } else {
    if (rasp[n].date[0]<date[0])
      continue;
    if (rasp[n].date[0]>date[0]) {
      print(rasp,n);
    } else {
      if (rasp[n].time[0]<time[0])
        continue;
      if (rasp[n].time[0]>time[0]) {
        print(rasp,n);
      } else {
        if (rasp[n].time[1]<=time[1])
          continue;
        print(rasp,n);
      }
    }
      }
    }
  }
} 
```

input() 函数应该将火车放入数据库。output() 函数应该只打印数据库中日期晚于用户之前提供的火车。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:43:34.537

```
scanf("%d",&n); 
```

`scanf`在输入缓冲区中留下将输入发送到程序的换行符。

```
train* rasp=(train*)malloc(n*sizeof(train));
input(rasp,n);

void input(train*rasp,int n) {
  for (int i=0;i<n;i++) {
    printf("Train #%d\n",i+1);
    printf("Enter train's name: ");
    fgets(rasp[i].nazv,50,stdin); 
```

`fgets`在输入缓冲区中找到一个换行符作为第一个字符并且不进一步查看，将火车的名称留在输入缓冲区中。

```
 printf("Enter train's number: ");
    scanf("%d",&rasp[i].numr); 
```

无法`scanf`转换为`int`.

由于不同的换行行为，混合`scanf`和`fgets`用户输入很容易出错。除非您清除 a`scanf`和 a following`fgets`之间的输入缓冲区，否则`fgets`大多数情况下只会从 the 中剩余换行符`scanf`（有一些`scanf`格式会消耗换行符）。

您可以清除缓冲区

```
void clear_input_buffer(void) {
    int c;
    while((c = getchar()) != EOF && c != '\n');
    if (c == EOF) {
        // input stream broken, what now?
        exit(EXIT_FAILURE);
    }
} 
```

或`fgets`用于所有输入并使用`sscanf`（`strtol`和朋友）解析输入。

# kernel - 在 WFP 中标注的分类 Fn 中指定的 IP 地址的字节顺序是什么？

> ID：14303012
> 
> 赞同：2
> 
> 时间：2013-01-13T11:31:39.043
> 
> 标签：kernel, ip-address, firewall, endianness, wfp

在标注的classifyFn中，可以使用以下代码获取远程IP地址：

```
inFixedValues->
incomingValue[FWPS_FIELD_ALE_AUTH_CONNECT_V4_IP_REMOTE_ADDRESS].value.uint32;
// IPv4 
```

或者

```
inFixedValues->
incomingValue[FWPS_FIELD_ALE_AUTH_CONNECT_V6_IP_REMOTE_ADDRESS].value.byteArray16; 
// IPv6 
```

但是，我找不到任何文档来指定来自 MSDN、OSR 等的 IP 地址的“字节顺序”。

以下链接与我的问题相同，但没有答案。

[http://www.osronline.com/showthread.cfm?link=225090he](http://www.osronline.com/showthread.cfm?link=225090he)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:12:31.333

我没有使用 IPv6 地址，但[WFP 以“主机顺序”](http://social.msdn.microsoft.com/Forums/en/wfp/thread/a3cfd784-ca61-49e5-835a-f934a5348787)（小端序）为您提供 IPv4 地址。如果您需要将其更改为“网络顺序”（大端），您可以调用[htonl()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738556%28v=vs.85%29.aspx)函数，或者如果您正在编写内核模式驱动程序，您可以使用[RtlUlongByteSwap()](http://msdn.microsoft.com/en-us/library/windows/hardware/ff562886%28v=vs.85%29.aspx)。

# javascript - 将谷歌图表连接到 Internet Explorer 中的 JavaScript 计算器时出现问题

> ID：14303016
> 
> 赞同：0
> 
> 时间：2013-01-13T11:31:53.970
> 
> 标签：javascript, internet-explorer, google-visualization

我一直致力于用 JavaScript 设计一个计算器，将数据提供给谷歌柱形图。基本思想是计算的结果决定了图表中某一列的高度。它在 Firefox 和 Chrome 中以应有的方式工作，但在 Internet Explorer 中则不然，图表根本不显示。我已经尝试解决这个问题两天了，但没有成功，所以如果有人可以帮助n00b，那将非常感激。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>
      Google Visualization API Sample
    </title>
    <SCRIPT LANGUAGE="JavaScript">
function CalculateSum(Atext, Btext, Ctext, form)
{
var A = parseFloat(Atext);
var B = parseFloat(Btext);
var C = parseFloat(Ctext);
form.Answer.value = A * B * C;
}
function ClearForm(form)
{
form.input_A.value = "";
form.input_B.value = "";
form.input_C.value = "";
form.Answer.value = "";
}
</script>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load('visualization', '1', {packages: ['corechart']});
    </script>
    <script type="text/javascript">
      function drawVisualization() {
        // Create and populate the data table.
        var data = google.visualization.arrayToDataTable([
          ['Task', 'Hours per Day'],
          ['Work', Number(a.value)],
          ['Eat', 2],
          ['Commute', 2],
          ['Watch TV', 2],
          ['Sleep', 7]
        ]);

        // Create and draw the visualization.
        new google.visualization.ColumnChart(document.getElementById('visualization')).
            draw(data, {title:"So, how was your day?"});
      }

      google.setOnLoadCallback(drawVisualization);
    </script>
  </head>
  <body style="font-family: Arial;border: 0 none;">
    <FORM NAME="Calculator" METHOD="post">
<P>Population (billions): <INPUT TYPE=TEXT NAME="input_A" SIZE=10></P>
<P>Affluence (PPP US$): <INPUT TYPE=TEXT NAME="input_B" SIZE=10></P>
<p>Technology (tonnes per $): <Input TYPE=TEXT NAME="input_C" SIZE=10></p>
<P><INPUT TYPE="button" VALUE="Calculate" name="AddButton" onClick="CalculateSum(this.form.input_A.value, this.form.input_B.value, this.form.input_C.value, this.form); drawVisualization()"></P>
<P><INPUT TYPE="button" VALUE="Clear Fields" name="ClearButton" onClick="ClearForm(this.form)"></P>
<P>Impact (billions of tonnes): <INPUT TYPE=TEXT NAME="Answer" SIZE=12 id="a"></P>
</FORM>
    <div id="visualization" style="width: 600px; height: 400px;"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T11:41:26.503

`['Work', Number(a.value)],`应该`['Work', Number(document.getElementById("a").value)],`

代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>
      Google Visualization API Sample
    </title>
  </head>
  <body style="font-family: Arial;border: 0 none;">
    <FORM NAME="Calculator" METHOD="post">
<P>Population (billions): <INPUT TYPE=TEXT NAME="input_A" SIZE=10></P>
<P>Affluence (PPP US$): <INPUT TYPE=TEXT NAME="input_B" SIZE=10></P>
<p>Technology (tonnes per $): <Input TYPE=TEXT NAME="input_C" SIZE=10></p>
<P><INPUT TYPE="button" VALUE="Calculate" name="AddButton" onClick="CalculateSum(this.form.input_A.value, this.form.input_B.value, this.form.input_C.value, this.form); drawVisualization()"></P>
<P><INPUT TYPE="button" VALUE="Clear Fields" name="ClearButton" onClick="ClearForm(this.form)"></P>
<P>Impact (billions of tonnes): <INPUT TYPE=TEXT NAME="Answer" SIZE=12 id="a"></P>
</FORM>
    <div id="visualization" style="width: 600px; height: 400px;"></div>

    <script type="text/javascript">
function CalculateSum(Atext, Btext, Ctext, form)
{
var A = parseFloat(Atext);
var B = parseFloat(Btext);
var C = parseFloat(Ctext);
form.Answer.value = A * B * C;
}
function ClearForm(form)
{
form.input_A.value = "";
form.input_B.value = "";
form.input_C.value = "";
form.Answer.value = "";
}
</script>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load('visualization', '1', {packages: ['corechart']});
    </script>
    <script type="text/javascript">
      function drawVisualization() {
        // Create and populate the data table.
        var data = google.visualization.arrayToDataTable([
          ['Task', 'Hours per Day'],
          ['Work', Number(document.getElementById("a").value)],
          ['Eat', 2],
          ['Commute', 2],
          ['Watch TV', 2],
          ['Sleep', 7]
        ]);

        // Create and draw the visualization.
        new google.visualization.ColumnChart(document.getElementById('visualization')).
            draw(data, {title:"So, how was your day?"});
      }

      google.setOnLoadCallback(drawVisualization);
    </script>
  </body>
</html> 
```

# php - 如何在php文件中解码通过jquery ajax方法发送的json对象？

> ID：14303019
> 
> 赞同：0
> 
> 时间：2013-01-13T11:32:49.220
> 
> 标签：php, jquery, json

这是我将 json 数据发送到 php 文件的 jquery ajax 部分。

```
$(function () {
 $('form').submit(function () {
   var fields = $(this).serializeArray();
   var ans_json = JSON.stringify(fields);
   console.log(ans_json);

   $.ajax({
     url: "results.php",
     type: "POST",
     data: ans_json,
     dataType: "json",
     success: function (result) {
       console.log(result);
     }
   });
   return false;
 });
}); 
```

现在我想使用这个发送到 php 页面的 json 数据。我该怎么做？我已经这样做了，但它返回null。

```
<?php
   echo json_decode('ans_json');
?> 
```

我有一组 10 个问题需要回答。回答了 3 个问题，所以得到了以下结果。这就是我在控制台中得到的。

```
 [{"name":"answer_9","value":"a"},{"name":"answer_10","value":"a"}] quizzes.php:14 
```

> 空值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:51:55.490

如果正确编码参数，则无需在服务器端解码任何 JSON 字符串。

您可以使用[`.serialize()`](http://api.jquery.com/serialize/)为您执行表单序列化，并准备好发送。

```
$(function () {
  $('form').submit(function () {
    var serialized = $(this).serialize();

    $.ajax({
      url: "results.php",
      type: "POST",
      data: serialized,
      ...
    });

    return false;
  });
}); 
```

您的参数将在您`$_POST`的任何正常 POST 请求中可用。例如，

```
$ninth_answer = $_POST["answer_9"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T11:36:44.047

您需要解码 POST 变量。目前，您正在解码的只是一个甚至不是有效 JSON 的字符串。

```
<?php
$json_arr = json_decode($_POST['my_json'], true);
var_dump($json_arr);
echo "First name in json is:". $json_arr[0]['name'];
?> 
```

并编辑您的 javascript 以反映以下内容：这会将 my_json 参数与您的 json 作为值一起发布。这使得 PHP 很容易使用 $_POST 接收它。

```
$.ajax({
 url: "results.php",
 type: "POST",
 data: {"my_json": ans_json},
 dataType: "json",
 success: function (result) {
   console.log(result);
 }
}); 
```

我建议阅读一些关于这些事情的内容：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

[http://ee1.php.net/manual/en/function.json-decode.php](http://ee1.php.net/manual/en/function.json-decode.php)

# jquery - 替换 html 正文时，输入文本未清除且自动完成功能不起作用

> ID：14303021
> 
> 赞同：1
> 
> 时间：2013-01-13T11:33:12.003
> 
> 标签：jquery, autocomplete

我正在发送发布请求并将当前的 html 正文替换为响应正文。问题是鼠标单击时输入文本不清除，并且没有自动完成功能可用。

我正在使用自动完成库。

当响应来自服务器而不对正文进行任何修改时，此代码有效。

这是相关代码：

```
$(document).ready(function() { 
    $('input, textarea').each(function () {
    if ($(this).val() == '') {
        $(this).val($(this).attr('Title'));
    }
}).focus(function () {
    $(this).removeClass('inputerror');
    if ($(this).val() == $(this).attr('Title')) {
        $(this).val('');
    }
}).blur(function () {
    if ($(this).val() == '') {
        $(this).val($(this).attr('Title'));
    }
});
};

window.onload = function()
{
$("#search_type").autocomplete("/company/autocomplete/",{
    minChars: 2
 });
}; 
```

这似乎可行，但是在单击该值后始终执行的模糊功能不清楚：

```
 $('input, textarea').live('click',function() {
     // CLEAR INPUT VALUE  ---------------------------------------------------------------------------------------------------
    $('input, textarea').each(function () {
        if ($(this).val() == '') {
            $(this).val($(this).attr('Title'));
        }
    }).focus(function () {
        $(this).removeClass('inputerror');
        if ($(this).val() == $(this).attr('Title')) {
            $(this).val('');
        }
    }).blur(function () {
        if ($(this).val() == '') {
            $(this).val($(this).attr('Title'));
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T11:56:24.247

After replacing the HTML, you need to call `autocomplete()` again if you've replaced the DOM element that it was originally bound to.

# xml - XML 多模式位置

> ID：14303037
> 
> 赞同：2
> 
> 时间：2013-01-13T11:36:23.800
> 
> 标签：xml, xsd, schema

我有一个 XSD 架构，但我需要它位于两个可能的位置 - 一个用于开发（即我的 PC 和一个用于生产。

是否有一个简单的机制来做到这一点。例如开发 XML 将是：

```
<?xml version="1.0" encoding="utf-8"?>
<Request xmlns="http://www.example.com/xml"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://dev.example.com/ Request.xsd\">
  <GetLocations />
</Request> 
```

和生产

```
<?xml version="1.0" encoding="utf-8"?>
<Request xmlns="http://www.example.com/xml"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://www.example.com/ Request.xsd\">
  <GetLocations />
</Request> 
```

这是为了使 XSD 中的行`<xs:include schemaLocation="DataTypes.xsd" />`能够拾取正确的文件。

**附录**

让我们做一个例子

假设我使用 PHP`file_get_contents`来检索 XML 文件。想要对照 XSD 文件检查它（通过 HTTP）。在那个文件中它有`<xs:include schemaLocation="DataTypes.xdf" />`. PHP 脚本如何知道从何处获取此文件？

**还有更多**

我正在做以下事情

```
$xml = file_get_contents(<URL FOR XML FILE>);
$xsd = file_get_contents(<URL FOR XSD FILE>);

// The XSD has the include bit in it

$request = new DOMDocument();  
$request->loadXML($xml, LIBXML_NOBLANKS);
file_put_contents(<some temporary filename>, $xsd);
if (!$request->schemaValidate(<some temporary filename>))
{

etc... 
```

问题是如何确保 XSD 文件选择正确的`include`文件。我有两个架构副本。一个用于生产，另一个用于添加额外的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T11:44:13.347

解释`schemaLocation`: It(XML) 与位于同一文件夹中的 XSD 文件配对（除非您指定了完整的文件路径/URL）。现在您知道从哪里加载 XSD 文件了。

现在在您的示例中，如果您通过 XML 解析器加载 XML，schemaLocation 就会出现，其中每对中的第一个 URI 引用是命名空间名称，第二个是描述该命名空间的模式的位置。

如果您将 XML 作为 Doc 加载并针对提供完整路径的 XSD 文件进行验证，`schemaLocation`则将被覆盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T12:24:36.197

import 元素的作用与 include 元素相同。但是，import 元素允许您访问来自可能属于不同目标命名空间的相同/多个模式的组件。这是语法：

```
<import id="ID" namespace="namespace" schemalocation="filename"/> 
```

include 元素用于包含或引用位于确定地址的外部模式。这是语法：

```
<include id="ID" schemaLocation="anyURI" any attributes/> 
```

include 元素允许引用在相同目标命名空间的上下文中定义的任何外部模式。架构的目标命名空间是使用架构元素的 targetNamespace 属性声明的。在 include 元素中不需要 namespace 属性，因为包含模式和包含模式的目标命名空间是相同的。

@infantpro'aravind' 已经解释了 schemaloaction 行为

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T07:53:45.600

PHP 脚本不会知道包含在哪里，除非您解析 xsd 文件以查找`schemaLocation`属性，该属性可能存在也可能不存在，因为**它完全是可选的**。

当您将一个模式导入另一个模式时，您不需要提供该模式的路径。大多数 XSD 验证器将在相同/子文件夹中查找具有与 import 语句匹配的命名空间的任何 xsd 文件。有些人甚至会完全忽略 schemaLocation 属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T15:54:08.487

如果架构保持不变，您可以将其托管在公共位置，提供其绝对 URI 而不是相对 URI，每个人都可以在那里找到它。

如果架构更改（您说您正在向架构的开发版本添加“额外的东西”？什么样的东西？）您正在查看 XML 架构版本控制问题。除了能够找到架构之外，还有更多内容，请参阅[有关 xml 架构版本控制的文档以](http://www.xfront.com/Versioning.pdf)获取一些建议。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T08:07:31.887

据我所知..
这个：

```
$xml = file_get_contents(<URL FOR XML FILE>);
$xsd = file_get_contents(<URL FOR XSD FILE>);
.............
...........
file_put_contents(<some temporary filename>, $xsd);
if (!$request->schemaValidate(<some temporary filename>)) 
```

将覆盖这个：

```
<Request xmlns="http://www.example.com/xml"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://www.example.com/ Request.xsd\"> 
```

关于

> 如何确保 XSD 文件选择正确的包含文件

没有现成的方法来检查和验证在`schemaValidate`. 我想建议的是在开发环境中快速测试它（只是为了确定）。

在这两个位置保留不同的副本：
location1：从中选择 XML 的服务器路径，一个 XSD 将驻留在那里。
location2：在脚本中明确指定的 XSD 路径，第二个驻留在此处。

一个应该有错误的代码（故意的），另一个应该有一个通过验证的正常代码..

解析您的 XML 并检查错误.. 错误的代码显然会引发错误..

重复相同的交换两个 XSD 文件..

通过这个你会知道哪个在扮演这个角色:)

希望能帮助到你..

## 更新：

在我的 asp.net 网站上进行了测试，这是我的发现：

将 XML 作为流输入传递：

```
<?xml version="1.0" encoding="utf-8"?>
<root
  xmlns="http://www.example.com/xml"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.example.com/ Request.xsd\">
  <branch>data</branch>
</root> 
```

XSD 也是如此：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://www.example.com/xml" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="root">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="branch" type="xs:string" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

验证失败并出现以下错误：

```
Cannot load the schema for the namespace 'http://www.example.com/' - Could not find file 'c:\windows\system32\inetsrv\Request.xsd\'.. Line: 1 Column:40 
```

`Request.xsd`这意味着，它正在寻找`schemaLocation`. 相对路径 ( `c:\windows\system32\inetsrv\`) 是运行服务的位置。

希望这可以帮助..

# asp.net - 在服务器端控件中使用 <%= %> 会导致无法修改 Controls 集合，因为控件包含代码块（即 <% ... %>）

> ID：14303038
> 
> 赞同：0
> 
> 时间：2013-01-13T11:36:30.693
> 
> 标签：asp.net, .net, asp.net-4.0

我正在使用`<%= %>`内部服务器控件并给我错误：

> 无法修改 Controls 集合，因为该控件包含代码块（即 <% ... %>）。

这是我的代码：

```
 <asp:Menu runat="server" >
        <Items>
            <asp:MenuItem Text="Candidates" NavigateUrl="<%=Constants.AccountPageUrl %>" />
        </Items>
 </asp:Menu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T11:48:30.067

尝试以下..它可能会帮助你

```
NavigateUrl="<%#Constants.AccountPageUrl %>" 
```

# java - 文件和多线程

> ID：14303050
> 
> 赞同：0
> 
> 时间：2013-01-13T11:37:26.700
> 
> 标签：java, eclipse, multithreading

我需要使用多个线程读取两个文件并在控制台中打印文件的内容。用户将输入文件路径并使用线程读取文件的内容。我很难理解文件。谁能建议我在运行方法中应该做什么？

```
import java.io.*;

public class Ch3Ex4 implements Runnable
 {
  public void ReadFile(String str,Thread thread)
   {
    try
     {
      File inputFile = new File(str);
      FileInputStream in = new FileInputStream(inputFile);
     }
    catch(Exception e)
    {
        e.printStackTrace();
    }
  } 
    public void run()
      {

      } 

 public static void main (String[] args)
  {
    try
    {
    Ch3Ex4 obj = new Ch3Ex4();
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    System.out.println("Enter the two file paths:");
    String s1 = br.readLine();
    String s2 = br.readLine();
    Thread thread1 = new Thread(obj);
    Thread thread2 = new Thread(obj);
    obj.ReadFile(s1, thread1);
    obj.ReadFile(s2, thread2);
    thread1.start();
    thread2.start();
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
  }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:41:49.470

该`run`方法旨在包含由该线程执行的代码。因此，当您想从两个不同的线程读取两个文件时，您需要使用方法`run`来执行您正在执行的任何操作`ReadFile`。

请注意，您需要创建一个`Ch3Ex4`类的实例并调用该`start`方法才能开始启动一个新线程。

编辑：在这种情况下，您可以使用这样`BufferedReader`的方法内部`run`：（来自[mkyong](http://www.mkyong.com/java/how-to-read-file-from-java-bufferedreader-example/)的网站）

```
 BufferedReader br = null;

    try {

        String sCurrentLine;

        br = new BufferedReader(new FileReader("C:\\testing.txt"));

        while ((sCurrentLine = br.readLine()) != null) {
            System.out.println(sCurrentLine);
        }

    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            if (br != null)br.close();
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:11:08.820

如前所述，您应该将 ReadFile 中的代码移动到 run 方法中，或者从 run() 中调用 ReadFile() 方法。此外，您需要为文件名创建一个实例变量，并为两个线程创建两个对象。请参阅突出显示的更改：

```
import java.io.*;

public class Ch3Ex4 implements Runnable
{
     String s1;

     Ch3Ex4(String s){
           s1=s;
     }

     public void ReadFile(String str){
       //existing code 
     } 

     public void run()
     {
        ReadFile(s1);
     } 

     public static void main (String[] args)
     {
        try
        {
           BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
           System.out.println("Enter the two file paths:");
           String s1 = br.readLine();
           String s2 = br.readLine();
           Ch3Ex4 obj1 = new Ch3Ex4(s1);
           Ch3Ex4 obj2 = new Ch3Ex4(s2);

           Thread thread1 = new Thread(obj1);
           Thread thread2 = new Thread(obj2);

           thread1.start();
           thread2.start();
       }
       catch(Exception e)
       {
           e.printStackTrace();
       }
    }
 } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-13T12:05:01.410

希望下面的代码是您所期待的。

```
 public class Ch3Ex4 implements Runnable
 {
    String file;
    public void Ch3Ex4 (String file)
    {
       this.file = file;
    } 
    public void run()
    {
    try
       {
        File inputFile = new File(file);
        FileInputStream in = new FileInputStream(inputFile);
        int data;
        while((data = in.read()) != null){
                System.out.println(data);
           }
       }
       catch(Exception e)
      {
          e.printStackTrace();
      }
  } 

   public static void main (String[] args)
   {
    try
       {

        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        System.out.println("Enter the two file paths:");
        String s1 = br.readLine();
        String s2 = br.readLine();
        Ch3Ex4 thread1 = new Ch3Ex4(s1);
        Ch3Ex4 thread2 = new Ch3Ex4(s2);
        thread1.start();
        thread2.start();
       }
       catch(Exception e)
       {
           e.printStackTrace();
       }
    }
  } 
```

# intel-fpga - 如何在 Nios 2 IDE v12 中查找系统库属性？

> ID：14303051
> 
> 赞同：0
> 
> 时间：2013-01-13T11:37:29.710
> 
> 标签：intel-fpga, nios

我正在尝试根据[规范](http://www.ict.kth.se/courses/IS1500/2012/labos/index.html)制作一个项目， 但对话框似乎在版本 12 中已经完全改变。

在 Nios 2 IDE v12 中，我几乎没有得到类似的对话框。

这就是我搜索的内容：

![在此处输入图像描述](../Images/503e2d24370eabdcea2efa69b20b397d.png)

这就是我得到的，没有什么会导致像规范中那样的对话框：

![在此处输入图像描述](../Images/3fa4c1e8546090704cfad379087e66df.png)

如何找到版本 12 中的系统库属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:45:05.380

如果选择`File->New->Project`怎么办？我在`NIOS2IDE 12.0`，这似乎工作。

![在此处输入图像描述](../Images/af2182112efaa639bc9f09574395aa30.png)

下一个对话框显示了这一点，我在其中指定了已经存在的 BSP 的位置。

![在此处输入图像描述](../Images/90b2360fa13564918fa9990ac922914c.png)

然后选择`Your BSP (left column, right click)->NIOS2->BSP Editor`

![在此处输入图像描述](../Images/8d56e77a274dc3485fa44ecf301b86d3.png)

# android - 滚动时有 20 个项目的 ListView 滞后

> ID：14303054
> 
> 赞同：2
> 
> 时间：2013-01-13T11:37:58.430
> 
> 标签：android, listview, android-arrayadapter

安卓 4.1.2。我有`LinearLayout`一个`ListView`带孩子的。我在这个列表视图中添加了 20 行，其中包含三个`TextView`控件的自定义行布局。这些行中有一半是可见的，所以我需要滚动才能看到其余的行。**问题是当我从顶部或底部**开始滚动时，应用程序似乎挂起几秒钟（中间看起来还可以）。

我知道有几种优化可以使用。到目前为止，我已经尝试过这个：

1.  在我的自定义`ArrayAdapter`中，我使用 a`ViewHolder`来避免调用`findViewById`.
2.  在`getView()`中，`LayoutInflater`is 仅在`convertView`is时使用`null`。
3.  `getViewTypeCount()`返回 1，`getItemViewType(...)`返回 0。
4.  删除对我的文本视图的`setText()`所有调用。`setColor()`
5.  断开调试器。

列表视图还有哪些其他可能的瓶颈？

**我的行布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
    <TextView
        android:id="@+id/my_text1"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textColor="@android:color/white"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/my_text2"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="4"
        android:ellipsize="end"
        android:textColor="@android:color/white" />

    <TextView
        android:id="@+id/my_text3"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="2"
        android:gravity="right"
        android:textColor="@android:color/white" />
</LinearLayout> 
```

我确实怀疑该`layout_weight`属性，但删除它们并*没有*帮助！在另一个解决这个滞后问题的尝试中，我`ListView`有以下风格：

```
<ListView
        android:id="@+id/my_list"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_margin="3dip"
        android:background="@android:color/transparent"
        android:cacheColorHint="@android:color/transparent"
        android:persistentDrawingCache="scrolling"
        android:scrollingCache="false" /> 
```

如您所见，我几乎尝试了所有方法。尽管如此，当我滚动浏览这 20 行时，UI 在到达顶部/底部时会挂起 2-4 秒。因此，来回滚动会使应用程序冻结！

**我在这里想念什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T11:51:48.673

Another thing to consider is the possible overdraw in your list items, which can be made visible by an option in the developer settings on your device.

For general performance issues, especially in a `ListView`, I can only recommend Romain Guy's "epic" article: [Android Performance Case Study](http://www.curious-creature.org/2012/12/01/android-performance-case-study/). Overdraw is also referenced there as one major issue.

# android - 什么是好的跨平台点对点移动视频流框架？

> ID：14303056
> 
> 赞同：3
> 
> 时间：2013-01-13T11:38:36.683
> 
> 标签：android, ios, video-streaming, p2p, video-processing

存在哪些框架/库可用于实现在多个移动平台（至少是 iO 和 Android）上运行的视频聊天/通话（如 Skype）？

我的理解是视频通话有两个主要组成部分： 1\. 网络，我认为点对点对这个应用程序最有意义 2\. 视频处理和流式传输

这里我找到了一些相关的框架：

*   Doubango - [http://www.doubango.org/](http://www.doubango.org/)（据我所知，这可以完成这项工作）
*   XMPP - [http://xmpp.org/about-xmpp/](http://xmpp.org/about-xmpp/)（不确定这是否支持视频并且不是 p2p）
*   LIBAV - [http://libav.org](http://libav.org)（这似乎处理视频处理但不处理网络）

还有其他框架吗？我还想了解做好视频通话/聊天的挑战。

我需要的视频通话应该包括语音，而不是依赖电话服务。

# c# - 将加载放在电子邮件发送中

> ID：14303058
> 
> 赞同：2
> 
> 时间：2013-01-13T11:38:49.287
> 
> 标签：c#, razor, asp.net-mvc-4

我有一次发送 5 个人的电子邮件功能。我在名为的控制器中调用此函数`submitemail`。我想在电子邮件功能触发时加载。我想向用户显示电子邮件发送是否成功的消息。怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T11:45:17.727

使用 ajax 调用控制器的操作...在 ajax 调用之前显示加载图像...并在 ajax 函数的 oncomplete 事件中隐藏加载图像...并显示适当的成功和错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T13:35:40.770

您可以使用

```
@using (Ajax.BeginForm("ActionName", null, new AjaxOptions
            {UpdateTargetId = "dialog-model", InsertionMode = InsertionMode.Replace
            }, new { id ="AjaxForm" }))
{
...form here
} 
```

AjaxOptions 是一个可以在成功中获得成功的对象，您可以显示消息

```
new AjaxOptions()
 {
     UpdateTargetId = "divPlaceholder",
     InsertionMode = InsertionMode.Replace,
     OnSuccess = "alert('OnSuccess')",
     OnBegin = "alert('OnBegin')",
     OnComplete = "alert('OnComplete')",
     OnFailure = "alert('OnFailure')"

 } 
```

# jquery - ExtJS 4 中的 slimScroll bar

> ID：14303059
> 
> 赞同：2
> 
> 时间：2013-01-13T11:39:01.627
> 
> 标签：jquery, extjs4

我需要自定义我的滚动条。怎么做？我有一个简单的网格面板。我想要一个slimScroll bar.....如果只能通过JQuery，那么slimScroll bar怎么调用jquery呢？

这是我到目前为止得到的

```
Ext.define('TestApplication.view.display.DisplayOne' ,{
    extend     : 'Ext.grid.Panel',
    alias      : 'widget.displayOne',
    height     : 280,
    width      : 742,
    padding    : 4,
    viewConfig : {
        stripeRows : true,
        forceFit   : true,
        emptyText  : 'No Records to display',
        getRowClass: function(record, index) {
            if (record.get('empNo') == '000') {
                return 'display-false';
            } 
        }
    },
    initComponent: function () {
        this.store   = 'RegistrationStore';
        this.columns = [
            {
                xtype    : 'rownumberer',
                width    : 40,
                sortable : false
            },
            {
                text     : 'Employee ID',
                sortable : false,
                dataIndex: 'empNo',
                sortable : false
            },
            {
                text     : 'Employee Name',
                sortable : false,
                dataIndex: 'fname',
                sortable : false,
                flex     : 1
            },
            {
                text     : 'Gender',
                sortable : true,
                dataIndex: 'gender',
                sortable : false
            },       
            {
                text     : 'Branch',
                sortable : true,
                dataIndex: 'branch',
                sortable : false
            },
            {
                text     : 'Religion',
                sortable : true,
                dataIndex: 'religion',
                sortable : false
            },
            {
                text     : 'Marital',
                sortable : true,
                dataIndex: 'marital',
                sortable : false
            }
        ];

        this.callParent(arguments);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T07:43:52.587

您可以通过更新 sass 文件并使用 compass 重建 css 来自定义滚动条。

# c# - Gridview PageIndexChanging 未触发

> ID：14303064
> 
> 赞同：0
> 
> 时间：2013-01-13T11:40:14.177
> 
> 标签：c#, gridview, data-binding, page-index-changed

我正在为 in 编写自己的事件处理程序`GridView`，`PageIndexChanging event`我没有`DataSourceID`为 my显式设置`GridView`，这是我的代码：

GridView 数据绑定代码：

```
protected void DetailsView_DataBound (object sender, EventArgs e ) 
{
    Customer cust = (Customer)DetailsView.DataItem;
    this.GridView.DataSource = cust.Orders;
    this.GridView.DataBind();
} 
```

这部分代码允许我在`GridView`数据绑定时显示订单详细信息`DetailsView`。然后我自己写`GridView_PageIndexChanging event handler`，但对我不起作用：

```
protected void GridView_PageIndexChanging(object sender, EventArgs e)
{
    GridView.PageIndex = e.NewPageIndex();
    GridView.DataBind();
} 
```

如果我点击下一个页码，网站什么也没有显示。但是，如果我更改`GridView.DataBind()`为`DataBind()`分页工作。

任何人都知道为什么第二种`Databind`方法有效，原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T13:54:27.493

你是否设置了gridview的allowPaging="True"。如果不是，则将其设置为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:57:45.740

第二个数据绑定是 DataBind(Page.DataBind)，它引用当前页面绑定所有页面控件及其子控件。

# ios - 具有 UITabBar 行为的 UISplitview

> ID：14303066
> 
> 赞同：0
> 
> 时间：2013-01-13T11:40:30.490
> 
> 标签：ios, uitabbarcontroller, uisplitviewcontroller, uitabbar, uisplitview

我已经从 UITabBar 转移到我的 iPad 应用程序上的拆分视图。

视图控制器由 master 发送到将它们放入 UINavigationController 的详细信息。

```
// Detail manager called when a cell is selected on the master
UINavigationController *detailNavigationController = [[UINavigationController alloc] initWithRootViewController:_detailViewController];

UIViewController *mainNavigationViewController = [self.splitViewController.viewControllers objectAtIndex:0];
NSArray *viewControllers = [[NSArray alloc] initWithObjects:mainNavigationViewController, detailNavigationController, nil];
self.splitViewController.viewControllers = viewControllers; 
```

现在每次选择主单元格时，详细视图上的导航控制器都会从根开始。

相反，我希望选项卡栏控制器具有相同的行为：当您从一个选项卡移动到另一个选项卡时，每个选项卡的导航堆栈都会保持不变。当您选择两次相同的选项卡时，导航堆栈会弹出到根视图控制器。

如何使用基于拆分视图的应用程序以正确的方式实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:53:10.907

您应该为主表中的每个单元格创建一个导航控制器。点击一个单元格时，您会相应地切换它。如果点击选定的单元格，则调用`popToRootViewController:animated:`可见的导航控制器。当然，您必须进行子类化`UISplitViewController`以保留对导航控制器的引用。您还必须创建一个`MaterTableDelegate`告诉您拆分 VC，他应该在详细信息方面更改 navcon。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:55:35.930

从 Levi 的建议开始，我实施了一个可行的解决方案。总结一下：

*   子类`UISplitViewController`
*   `UINavigationController`在其上创建您需要的每个公共参考
*   在您的`UISplitViewController`子类的 init 中，使用它们各自的根初始化所有导航控制器`UIViewControllers`
*   根据您的主从实现，确保每次在主视图中选择一个单元格时，正确的导航控制器（在您在`UISplitviewcontroller`子类中声明的所有控制器中）都会显示在详细视图上。我使用`NSinteger`详细信息管理器上的一个属性（在主单元格选择上设置）来管理它，以告诉它要在详细视图上显示哪个导航控制器。
*   如果两次选择相同的主视图单元格，则将相应的导航控制器弹出到根目录以模拟相同的`UITabBar`行为。

希望这会对某人有所帮助。

# php - 使用 PHP 请求重新排序 div 位置

> ID：14303068
> 
> 赞同：1
> 
> 时间：2013-01-13T11:41:06.293
> 
> 标签：php, javascript, jquery, mysql, ajax

我只是想问你系统中的顺序如何让我能够

```
first get data -> animated (remove old divs) -> 
and put new to old's place. 
```

想象一个对数据库的 php 请求（可能是 ajax），假设在线商店和用户想按价格订购产品。发生这种情况时，我的请求是从数据库中获取第一个数据并按大小排序，然后我想删除旧 div（默认情况下，我在页面上显示）并用包含信息的新 div 替换它们。我认为这里的 gr8 会有一点 jquery 帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:49:55.753

您可以阅读这篇关于 jquery 中 ajax 的完美文章： [5 Ways to Make Ajax Calls with jQuery](http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/)

*   **load()**：将一段 html 加载到容器 DOM 中。
*   **$.getJSON()**：使用 GET 方法加载 JSON。
*   **$.getScript()**：加载 JavaScript。
*   **$.get()**：如果您想进行 GET 调用并广泛使用响应，请使用它。
*   **$.post()**：如果您想进行 POST 调用并且不想将响应加载到某些容器 DOM，请使用此选项。
*   **$.ajax()**：如果您需要在 XHR 失败时执行某些操作，或者您需要动态指定 ajax 选项（例如 cache: true），请使用此选项。

# android - Android TextView 背景

> ID：14303072
> 
> 赞同：20
> 
> 时间：2013-01-13T11:41:14.880
> 
> 标签：android, textview

我有一个设计需要像下图一样的背景作为右侧的数字。我们可以在 Android 中实现这一点吗？

![在此处输入图像描述](../Images/df9478401a5707d72c63778f1f7bb159.png)

我需要制作 9 个补丁图像并将其设置为背景吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-13T11:46:32.127

首先，创建一个具有圆角的形状。

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="#FFFFFF"/>
    <corners android:radius="5px"/>
    <padding android:left="0dp" android:top="0dp" android:right="0dp" android:bottom="0dp" /> 
</shape> 
```

然后将此作为背景应用于您的视图：

```
<LinearLayout
    android:orientation="vertical"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/rounded_edges">
    <TextView 
        android:id="@+id/mytext"
        android:layout_width="200dip"
        android:layout_height="wrap_content"
        android:text="blah blah blah blah"
        android:padding="6dip"
        android:textColor="#000000" />
</LinearLayout> 
```

您可能需要进行一些调整。您甚至可以丢弃 the`LinearLayout`并将 the设置`android:background`为`TextView``@drawable/rounded_edges`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T11:49:15.710

首先创建一个可绘制资源。

```
<?xml version="1.0" encoding="utf-8"?>
<!--  res/drawable/rounded_textview.xml -->
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle" android:padding="10dp">
 <solid android:color="#cccccc"/>
    <corners
     android:bottomRightRadius="15dp"
     android:bottomLeftRadius="15dp"
  android:topLeftRadius="15dp"
  android:topRightRadius="15dp"/>
</shape> 
```

然后在你的布局中引用这个drawable：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<TextView  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:padding="5dip"
    android:gravity="center"
    android:background="@drawable/rounded_textview" />
</LinearLayout> 
```

**好的参考之一：**

[带圆角的 TextView](http://jeviss.wordpress.com/2011/08/08/textview-with-rounded-corners/)

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-29T16:13:52.313

我知道这是一个老问题，但对于任何为此苦苦挣扎的人，我强烈推荐[ViewBadger 库](https://github.com/jgilfelt/android-viewbadger)

# c++ - 在 opencv 中使用 Mat::at(i,j) 获取二维 Mat 对象

> ID：14303073
> 
> 赞同：7
> 
> 时间：2013-01-13T11:41:14.883
> 
> 标签：c++, opencv, image-processing

我正在使用 Ubuntu 12.04 和 OpenCV 2

我写了以下代码：

```
IplImage* img =0;
img = cvLoadImage("nature.jpg");
if(img != 0)
{
    Mat Img_mat(img);
    std::vector<Mat> RGB;
    split(Img_mat, RGB);

    int data = (RGB[0]).at<int>(i,j)); /*Where i, j are inside the bounds of the matrix size .. i have checked this*/ 
} 
```

问题是我在数据变量中得到负值和非常大的值。我想我在某个地方犯了一些错误。你能指出来吗？
我一直在阅读文档（我还没有完全完成它。它很大。）但是从我所读的内容来看，这应该可以工作。但它不是。这里出了什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-13T13:36:00.850

`Img_mat`是一个 3 通道图像。每个通道由`uchar`数据类型的像素值组成。因此，`split(Img_mat, BGR)`被`Img_mat`分成蓝色、绿色和红色的 3 个平面，它们共同存储在一个向量`BGR`中。`BGR[0]`具有数据类型像素的第一个（蓝色）平面也是如此`uchar`......因此它将是

```
int dataB = (int)BGR[0].at<uchar>(i,j);
int dataG = (int)BGR[1].at<uchar>(i,j); 
```

很快...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T12:33:14.997

您必须为`cv::Mat::at(i,j)`. 您正在以 访问像素`int`，而它应该是 的向量`uchar`。您的代码应如下所示：

```
IplImage* img = 0;
img = cvLoadImage("nature.jpg");
if(img != 0)
{
  Mat Img_mat(img);
  std::vector<Mat> BGR;
  split(Img_mat, BGR);

  Vec3b data = BGR[0].at<Vec3b>(i,j);
  // data[0] -> blue
  // data[1] -> green
  // data[2] -> red
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T12:08:57.940

为什么要先加载 IplImage？您正在混合 C 和 C++ 接口。直接用 imread 加载 cv::Mat 会更直接。

这样，您还可以指定类型并在您的通话中使用相应的类型。

# ruby-on-rails - 在嵌套路由中使用 Destroy 时出现路由错误

> ID：14303077
> 
> 赞同：1
> 
> 时间：2013-01-13T11:41:49.437
> 
> 标签：ruby-on-rails

我在嵌套资源中有一个奇怪的 BUG。我有一个卖家/汽车关系，其中一个卖家有_many Cars。现在我需要从属于卖方的汽车中删除汽车（卖方通过 Sessions#create 进行身份验证，其 id 存储在 session[:seller_id] 中：

这是汽车索引视图，列出了属于该特定卖家的所有汽车：

```
<%= @cars.each do |car| %>
<tr>
<td><%= car.brand %></tr></td>
<td><%= link_to 'Edit', edit_seller_car_path(session[:seller_id], car) %></td>
<td><%= link_to 'Destroy', seller_car_path(session[:seller_id], car) %></td>
</tr>
<% end %> 
```

在列出所有属于经过身份验证的卖家的汽车的汽车索引上，URL 看起来像 localhost:3000/sellers/2/cars。此页面显示带有编辑和销毁按钮的汽车列表（编辑工作正常）

这是汽车#destroy：

```
@seller = Seller.find(params[:seller_id])
@car = @seller.cars.find(params[:id])
@car.destroy
flash[:notice] = "Deleted"
redirect_to seller_cars_url(session[:seller_id]) 
```

这是 Cars#edit（编辑时工作正常）：

```
@seller  = Seller.find(params[:seller_id])
@car = @seller.cars.find(params[:id]) 
```

当我单击销毁按钮时，会发生此 BUG：

1）奇怪的是，车子还是删除成功了。

2）我得到路由错误：

```
No route matches {:action => "edit", :controller => "cars", :seller_id=>nil, id=>#<Car id:23, brand:"Opel"... 
```

看起来这里的问题出现在索引页面的“编辑”按钮中。它所指的汽车是表中的第一辆汽车，而这里的seller_id为nil，这意味着seller_id不再保存在session[:seller_id]中，这是Sessions#destroy的行为

3) 我注意到卖家已登出。好像 Car 控制器中的 destroy 调用了清除会话的 Sessions 控制器中的 Destroy。

4) 这个 URL 似乎是 Cars 索引的正确一个：localhost:3000/sellers/2/cars，但我仍然看到 2 中提到的路由错误。

如果您能帮助指导我处理这种奇怪的行为，我将不胜感激。谢谢你。

# regex - 正则表达式：查找不包括特定短语的匹配项

> ID：14303079
> 
> 赞同：0
> 
> 时间：2013-01-13T11:42:05.263
> 
> 标签：regex

我已经尝试了一些类似问题的答案，但没有一个适合我想要做的事情。

我正在尝试查找与特定短语（使用通配符）匹配的文本，但不包括任何包含第二个短语的文本。

> *正确：*约翰打哈欠。
> 
> *不正确：*约翰张大嘴打哈欠。

本质上，我想匹配“（某人）打哈欠”。但不是关闭“（某人）张大嘴巴并打哈欠。” 所以“张大嘴巴”是排斥的匹配，但我似乎无法让它发挥作用。

可悲的是，我正在使用日志解析应用程序，所以我不知道正在使用什么语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T11:54:00.263

You probably want a negative lookbehind, as in `(?<!opens his mouth wide and )yawns`. Beware that these can slow down the regex matching algorithm, and are not available everywhere.

You really should reduce your test-case to simple patterns (e.g. .*bc but not abc)

# spring - UserDetails getPassword 在 Spring Security 3.1 中返回 null。如何获取当前登录用户的密码？

> ID：14303081
> 
> 赞同：15
> 
> 时间：2013-01-13T11:42:08.133
> 
> 标签：spring, spring-security

我已经使用 spring security 实现了更改密码功能，但是 ((UserDetails) principal).getPassword()) 为登录用户返回 null。

如果我没记错的话，这曾经在 3.0 的早期版本中起作用。这在 3.1 中是否已更改，因此无法检索登录用户的当前密码？

在下面的代码中，我正在检查从网页输入的用户密码的当前密码。然后我正在检查登录用户的密码是否与输入的密码匹配。如果是这样，那么我想设置 oldPasswordMatchNewPassword = true。

如何实现此功能？

```
@RequestMapping(value = "/account/changePassword.do", method = RequestMethod.POST)
    public String submitChangePasswordPage(
            @RequestParam("oldpassword") String oldPassword,
            @RequestParam("password") String newPassword) {
        Object principal = SecurityContextHolder.getContext()
                .getAuthentication().getPrincipal();
        String username = principal.toString();
        if (principal instanceof UserDetails) {
            username = ((UserDetails) principal).getUsername();
            System.out.println("username: " + username);
            System.out.println("password: "
                    + ((UserDetails) principal).getPassword());
            if (((UserDetails) principal).getPassword() != null) {
                if (((UserDetails) principal).getPassword().equals(oldPassword)) {
                    oldPasswordMatchNewPassword = true;
                }
            }
        }
    if (oldPasswordMatchNewPassword == true) {
        logger.info("Old password matches new password. Password will be updated.");
        changePasswordDao.changePassword(username, newPassword);
        SecurityContextHolder.clearContext();
        return "redirect:home.do";
    } else {
        logger.info("Old password did not match new password. Password will be not be updated.");
        return null;
    }
} 
```

我放了几个 sysout() 以便我可以看到返回的值。对于 ((UserDetails) principal).getUsername() 我可以看到正确的登录用户。((UserDetails) principal).getPassword() 它返回 null。

如何获得 ((UserDetails) principal).getPassword() 这个值？

提前致谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-13T21:53:33.007

我使用这段代码（erase-credentials="false"）来解决这个问题。我不知道这是否是一个优雅的解决方案，但它解决了我的问题：

```
<authentication-manager alias="authenticationManager" erase-credentials="false">
    <!-- authentication-provider user-service-ref="userService" -->
    <authentication-provider>
        <jdbc-user-service data-source-ref="dataSource" />
    </authentication-provider>
</authentication-manager> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-13T12:24:14.363

是的，这在 3.1 版中已更改。默认情况下，身份验证成功后会清除凭据。您可以将其设置`eraseCredentialsAfterAuthentication`为 false`ProviderManager`以防止这种情况发生。在此处查看详细信息：http: [//static.springsource.org/spring-security/site/docs/3.2.x/reference/core-services.html#core-services-erasing-credentials](http://static.springsource.org/spring-security/site/docs/3.2.x/reference/core-services.html#core-services-erasing-credentials)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T22:30:57.977

由于用户通过身份验证后密码不会保留在内存中（通常是一件好事），因此您需要显式重新加载它才能使用它。另一种更灵活的策略是注入一个实例`AuthenticationManager`并直接使用它：

```
String name = SecurityContextHolder.getContext().getAuthentication();

try {
    authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(name, oldPassword));
    // Update password here with your dao
} catch (AuthenticationException e) {
    // Old password was wrong
} 
```

这样您就不必担心密码编码策略之类的事情。请注意，您不应该以纯文本形式存储密码。它们应该使用[bcrypt 或类似的东西](https://stackoverflow.com/a/8528804/241990)进行散列。

# php - mysql 查询导致警告

> ID：14303084
> 
> 赞同：0
> 
> 时间：2013-01-13T11:42:49.003
> 
> 标签：php, mysqli

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源问题](https://stackoverflow.com/questions/2697438/mysql-fetch-array-expects-parameter-1-to-be-resource-problem)

当谈到使用 php 编程时，我是一个初学者。目前我正在一个带有数据库的项目中工作。当我尝试调用我的查询时出现问题：`$r = mysqli_query($db, $q);`我收到此错误： ![在此处输入图像描述](../Images/27050184cd89fd36ce2204c391e4190e.png)

这是我连接到数据库的课程：

```
class conectDB{
var $dbUser;
var $dbPassword;
var $dbHost;
var $dbName;

function __construct() {
    $this->dbUser ='root';
    $this->dbPassword = '';
    $this->dbHost = 'localhost';
    $this->dbName = 'db';
    $dbc = mysqli_connect($this->dbHost, $this->dbUser, $this->dbPassword, $this->dbName) or die('Fatal error!');
 }
} 
```

在这里我调用我的查询：

```
$db = new conectDB();
$q='SELECT * FROM categories ORDER BY category';
$r = mysqli_query($db, $q);
while(list($id, $category) = mysqli_fetch_array($r, MYSQLI_NUM)){
 echo '<li><a href="category.php?id='.$id.'" title="'.$category.'">'.$category.'</a></li>';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:53:18.003

您正在提供`conectDB`类的实例而不是返回的链接`mysqli_connect`。

你可以做类似的事情（注意你缺少的回报）：

```
class conectDB {
    protected $dbUser;
    protected $dbPassword;
    protected $dbHost;
    protected $dbName;
    protected $link;

    function __construct() {
        $this->dbUser ='root';
        $this->dbPassword = '';
        $this->dbHost = 'localhost';
        $this->dbName = 'db';

        $this->link = mysqli_connect($this->dbHost, $this->dbUser, $this->dbPassword, $this->dbName) or die('Fatal error!');
     }

    public function getLink() {
      return $this->link;
    }
} 
```

然后使用它

```
$db = new conectDB();
$q='SELECT * FROM categories ORDER BY category';
$r = mysqli_query($db->getLink(), $q); 
```

在侧节点上，您不应再使用`var`关键字：http: [//php.net/manual/en/language.oop5.properties.php](http://php.net/manual/en/language.oop5.properties.php)

# jquery - jQuery UI 自动完成：没有鼠标选择

> ID：14303087
> 
> 赞同：1
> 
> 时间：2013-01-13T11:43:11.867
> 
> 标签：jquery, wordpress, jquery-ui

我正在为我的网站开发一个搜索表单，我计划使用 JQuery UI 自动完成小部件在用户键入时建议值。到目前为止，这些建议确实有效。

问题是当用户从列表中选择一个值时，输入字段不会更新。之前似乎已经报告过同样的问题，例如：[Jquery UI Autocomplete 不再允许使用鼠标选择选项，](https://stackoverflow.com/questions/13379439/jquery-ui-autocomplete-doesnt-allow-options-to-be-selected-with-mouse-anymore)但没有发布解决方案。

代码尽可能简单：

```
<script> 
jQuery(document).ready(function(){

    var availableTags = [
        "ActionScript",
        "AppleScript",
        "Asp",
        "BASIC",
        "C",
        "C++",
        "Clojure",
        "COBOL",
        "ColdFusion",
        "Erlang",
        "Fortran",
        "Groovy",
        "Haskell",
        "Java",
        "JavaScript",
        "Lisp",
        "Perl",
        "PHP",
        "Python",
        "Ruby",
        "Scala",
        "Scheme"
    ];

    jQuery("#tbauthor").autocomplete({
        source: availableTags,
    });   

});
</script>
<div id="primary" class="aside main-aside sidebar">
    <form style="font-size: 10px;" name="search-news" action="." method="get">
    <table border= "0">

        <tr class="advanced"><td>Cerca per autor</td><td><input type="text" id="tbauthor" name="autor" /></td></tr>

    </table>
</form>
</div> 
```

我正在使用带有 Arras 主题的 wordpress 3.5、JQuery 1.8.3 和 jQuery UI 1.9.2（已经包含在 wordpress 安装中）。为了加载自动完成库，我在 header.php 中调用 wp_enqueue_script 这是一个摘录（header.php）。我唯一的猜测是加载的库有问题：

```
wp_enqueue_script('jquery');
wp_enqueue_script('jquery-ui-tabs', null, array('jquery-ui-core', 'jquery'), null, false); 
wp_enqueue_script('jquery-ui-autocomplete', null, array('jquery-ui-core', 'jquery'), null, false); 
```

**更新，随着问题的解决，该示例不再是非工作示例**：最后，~~您可以在我的网站中看到非工作示例：http: [//www.cabanyal.com/nou/resultat/?id= 1994](http://www.cabanyal.com/nou/resultat/?id=1994)~~

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:52:38.220

您的 WordPress 主题包含一个过时版本的 jQuery 验证器插件，这会导致与自动完成功能发生冲突：

```
<script type='text/javascript' src='http://www.cabanyal.com/nou/wp-content/themes/arras/js/jquery.validate.min.js'></script> 
```

我能够在这里复制这个问题： [jsfiddle.net/VAna6/1](http://jsfiddle.net/VAna6/1)

将脚本更改为[最新版本](https://raw.github.com/jzaefferer/jquery-validation/master/jquery.validate.js)，自动完成功能应如下所示：http: [//jsfiddle.net/VAna6/2/](http://jsfiddle.net/VAna6/2/)。

# magento - 如何在结账页面添加指定分类下的商品？

> ID：14303090
> 
> 赞同：0
> 
> 时间：2013-01-13T11:43:28.603
> 
> 标签：magento, magento-1.6

我想在结帐/购物车/页面上执行以下操作：

当访客购买超过 100 美元的商品时，我会为其添加免费产品。免费产品来自指定的类别。它会显示在购买的产品下。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T13:23:58.657

最简单的方法是通过观察者收听报价保存并以这种方式添加/删除免费产品。首先，设置一个名为 Yrcrz/AddFreeProduct 的新模块。在 config.xml 中，添加：

```
<?xml version="1.0"?>
<config>
    <modules>
        <Yrcrz_AddFreeProduct>
            <version>0.0.1</version>
        </Yrcrz_AddFreeProduct>
    </modules>
    <global>
        <events>
            <sales_quote_save_before>
                <observers>
                    <Yrcrz_AddFreeProduct_Observer>
                        <type>singleton</type>
                        <class>Yrcrz_AddFreeProduct_Model_Observer</class>
                        <method>sales_quote_save_before</method>
                    </Yrcrz_AddFreeProduct_Observer>
                </observers>
            </sales_quote_save_before>
        </events>
    </global>
</config> 
```

这定义了`sales_quote_save_before`我们将要监听的事件。然后，添加一个 Observer.php 文件并添加以下内容：

```
<?php

class Yrcrz_AddFreeProduct_Model_Observer
{
    public function sales_quote_save_before(Varien_Event_Observer $observer)
    {
        $quote = $observer->getQuote();
        $freeProductId = 182;
        $threshold = 100;
        $freeProductExists = false;
        $items = $quote->getAllItems();
        foreach ($items as $item) {
            if ($item->getProduct()->getId() == $freeProductId) {
                $realGrandTotal = $quote->getGrandTotal() - $item->getRowTotalInclTax();
                if ($realGrandTotal < $threshold) {
                    $quote->removeItem($item->getId());
                    return false;
                }
                $freeProductExists = true;
            }
        }

        if ($freeProductExists || !$items) {
            return false;
        }

        $cart = Mage::getSingleton('checkout/cart');
        if ($quote->getGrandTotal() >= $threshold) {
            $product = Mage::getModel('catalog/product')->load($freeProductId);
            if ($product && $product->getId()) {
                $params = array();
                $cart->addProduct($product, $params);
                $cart->save();
                Mage::getSingleton('checkout/session')->setCartWasUpdated(true);
            }
        }
    }
} 
```

此代码检查是否达到阈值（100 美元），如果达到，则添加产品。如果总计低于阈值或没有产品，它也会删除免费产品。请注意，您需要使用 定义免费产品的 ID `$freeProductId`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:59:38.320

您可以查看 MageWorld 免费礼品扩展。根据您的描述，我相信这会满足您的需求。但是，扩展程序不是免费的。 [http://www.mage-world.com/free-gift-magento-extension.html](http://www.mage-world.com/free-gift-magento-extension.html)

如果您想自己开发此功能，我建议您扩展购物车促销规则。规则本身将检查订单是否超过 100 美元。您只需要开发将从您指定的类别中选择免费产品的部分。

# zope - 使用 Python 代码连接模板表单操作

> ID：14303092
> 
> 赞同：0
> 
> 时间：2013-01-13T11:43:54.457
> 
> 标签：zope

我正在一个网站上工作，该网站有一个“注册”页面，应该可以从网站的任何地方调用。

我为“用户”产品提供了以下虚拟接口和实现：

界面：

```
 ##
 ## located in bahmanm/sampleapp/interfaces.py
 ##
 class ISampleAppUser(Interface):
        """
        """ 
```

执行：

```
 ##
 ## located in bahmanm/sampleapp/implementation/SampleAppUser.py
 ##
 class SampleAppUser:
      """
      """

      implements(ISampleAppUser)

 # Note that this method is outside of the implementation class.
 #
 def manage_addSampleAppUser(self, id, title):
    # ... 
```

现在，暂时让我们假设`index`页面上有一个链接指向以下模板（注册模板）：

```
 <html xmlns="http://www.w3.org/1999/xhtml"
        xmlns="http://xml.zope.org/namespaces/tal">
   <head><title>Add a new User</title></head>
   <body>
    <h2>Add a user instance</h2>
    <form action="#" method="POST"
          tal:attributes="action python:'manage_addSampleAppUser'">
       <p>Id: <input type="text" name="id"/></p>
       <p>Title: <input type="text" name="title"/></p>
       <input type="submit" value="Add"/>
    </form>
   </body>
  </html> 
```

但是，我无法为;的`action`财产找到合适的价值。`form`我得到的只是“找不到资源”。

老实说，我认为这是我理解 Zope 机制的问题。我真的很感激关于我应该去哪里挖掘解决方案、`configure.zcml`实现或模板本身的任何提示/线索。TIA,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:56:35.200

您真的想为此创建一个视图；您也可以从 URL 调用这样的产品工厂，但不建议这样做。

使用视图，您可以结合表单和代码在一个地方创建新用户：

```
from zope.publisher.browser import BrowserPage
from sampleapp.implementation.SampleAppUser import manage_addSampleAppUser

class NewUserSignup(BrowserPage):
    def __call__(self):
        # called when the view is being rendered
        if 'submit' in self.request:
            # form was submitted, handle
            self.addUser()
        return self.index()  # render the template

    def addUser(self):
        # extract form fields from self.request.form
        # validation, error handling, etc.
        if someerror:
            self.error = 'Error message!'
            return

        user = manage_addSampleAppUser(self.context, id, title)
        # add things to this new user if needed

        # all done, redirect to the default view on the new user object
        self.request.response.redirect(user.absolute_url()) 
```

然后使用以下内容注册此视图：

```
<browser:page
    for="*"
    name="signup"
    class=".signup.NewUserSignup"
    template="signup.pt"
    permission="zope.public"
    /> 
```

当您的新页面被注册时，named`template`将作为`index`属性添加到您的`NewUserSignup`类中，因此该`__call__`方法可以调用它 ( `self.index()`) 并返回结果。

因为您将注册处理和模板结合在一起，所以您现在可以轻松地合并错误处理。当有人第一次加载页面时`self.request.form`会是空的，但是一旦有人点击提交按钮，你就可以检测到这一点并调用该`addUser`方法。

该方法可以创建用户然后从该页面重定向，或者设置错误消息并返回，此时重新呈现表单。

这使得`action`易于设置；您可以将其留空，或者您可以将其设置为当前上下文 URL 加上视图的名称。然后，模板一起变成：

```
<html xmlns="http://www.w3.org/1999/xhtml"
        xmlns="http://xml.zope.org/namespaces/tal">
   <head><title>Add a new User</title></head>
   <body>
    <h2>Add a user instance</h2>
    <div class="errormessage" tal:condition="view/error|nothing" tal:content="view/error">
        Conditional error message appears here
    </div>

    <form action="#" method="POST"
          tal:attributes="action string:${context/absolute_url}/@@${view/__name__}">
       <p>Id: <input type="text" name="id"
                      tal:attributes="value request/form/id|nothing" /></p>
       <p>Title: <input type="text" name="title"
                      tal:attributes="value request/form/title|nothing" /></p>
       <input type="submit" value="Add" name="submit"/>
    </form>
   </body>
</html> 
```

请注意表单输入是如何预先填充来自请求的现有数据的，从而使您的访问者更容易纠正他们可能犯的任何错误。

# jquery - 为什么我的 LocalStorage 数据有时不会第一次加载，但如果我刷新它总是加载？

> ID：14303097
> 
> 赞同：2
> 
> 时间：2013-01-13T11:44:42.463
> 
> 标签：jquery, ios, html, jquery-mobile, local-storage

我正在使用 jQuery Mobile 构建一个移动应用程序，在 iOS 上进行测试。这是一个简单的清单应用程序（至少现在是这样），它使用 HTML5`LocalStorage`来保存`checkbox`关于哪些项目已完成的数据。起初我遇到了一些麻烦，但我已经让它大部分工作了。

它大部分时间都可以工作，但有时页面只是正常加载，除了没有任何复选框数据存在。一切都是假的。但是，如果您刷新页面，它会恢复正常并填充数据。

有什么理由`LocalStorage`不能在第一次加载时工作但在刷新时工作？然而，有时它在第一次加载时效果很好。

我的测试站点在这里： http: [//gojustin.net/acchecklist/](http://gojustin.net/acchecklist/)

通常情况下，它似乎会在 Bugs 页面上中断。（目前只有 Fish and Bugs 可以操作，不要打扰绘画和化石）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T11:46:56.260

PhoneGap 在 iOS 上实现了自己的 HTML5 本地存储版本，因为从`UIWebView`.

`deviceready`为确保本地存储正常工作，请在访问之前等待事件。

由于 PhoneGap 初始化和尝试使用`localStorage`. 重新加载有效，因为它已经加载了第二次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T11:50:21.877

It is probably a caching issue: use the following to disable caching, then clear your browser cache, and then reload the page to see if your problem is fixed.

```
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" /> 
```

# android - 在 Android SDK 中生成吉他和弦图像

> ID：14303104
> 
> 赞同：-1
> 
> 时间：2013-01-13T11:46:09.193
> 
> 标签：android, sdk, guitar, music-notation

有什么方法可以在 Android SDK 中生成吉他和弦的图像，还是我需要在 Photoshop 等中为每个和弦创建图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:20:23.387

查看[`Canvas`](http://developer.android.com/reference/android/graphics/Canvas.html)课程。它允许您以编程方式绘制图像。通过这种方式，您可以使用 x 数量的音品和琴弦复制指板，当然还有与指板相关的和弦位置。
我想您为指板制作了一个绘图功能，并为不同类型的和弦制作了一个绘图功能。

玩得开心！

# java - 一对一删除：Hibernate 3 + Spring 3 + PostgreSQL 9.1

> ID：14303107
> 
> 赞同：2
> 
> 时间：2013-01-13T11:46:43.937
> 
> 标签：java, spring, hibernate, one-to-one, hibernate-cascade

这是我的第一篇文章，我是 Hibernate + Spring 的新手。我在 applicationContext.xml 文件中使用 XML 进行 Hibernate 映射声明。

简而言之，我正在尝试做：

```
parent.setChild(null);
parentDao.update(parent); 
```

希望它会删除孩子。但它不起作用。:(

相反，我有这个例外：

> 引起：在 org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:232) 在 org.hibernate.engine.EntityEntry.getLoadedValue(EntityEntry.java:255) 在 org.hibernate.engine.Cascade 的 java.lang.NullPointerException .cascade(Cascade.java:161) 在 org.hibernate.engine.Cascade.cascade(Cascade.java:127) 在 org.hibernate.event.def.DefaultSaveOrUpdateEventListener.cascadeOnUpdate(DefaultSaveOrUpdateEventListener.java:376) 在 org.hibernate。 event.def.DefaultSaveOrUpdateEventListener.performUpdate(DefaultSaveOrUpdateEventListener.java:350) at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsDetached(DefaultSaveOrUpdateEventListener.java:246) at org.hibernate.event.def.DefaultUpdateEventListener.performSaveOrUpdate(DefaultUpdateEventListener.java: 57) 在 org.hibernate.event.def。DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:93) at org.hibernate.impl.SessionImpl.fireUpdate(SessionImpl.java:742) at org.hibernate.impl.SessionImpl.update(SessionImpl.java:730) at org.hibernate.impl .SessionImpl.update(SessionImpl.java:722) at org.springframework.orm.hibernate3.HibernateTemplate$14.doInHibernate(HibernateTemplate.java:708) at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:406)在 org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374) 在 org.springframework.orm.hibernate3.HibernateTemplate.update(HibernateTemplate.java:705) 在 org.springframework.orm.hibernate3.HibernateTemplate.update (HibernateTemplate.java:701) 在 fr.gouv.travail.gestionAccords.server.dao。implementations.DossierDAOImpl.update(DossierDAOImpl.java:163) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl。 java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318) 在 org.springframework.aop.framework.ReflectiveMethodInvocation .invokeJoinpoint(ReflectiveMethodInvocation.java:183) 在 org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150) 在 org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110) 在 org. springframework.aop。framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202) at $Proxy38.update(Unknown Source) at fr.gouv.travail.gestionAccords.server .business.gestionDossiers.detailsDossier.commons.implementations.DetailsDossierBusinessImpl.update(DetailsDossierBusinessImpl.java:396)

我已经看到我必须`delete-orphan`在我的 XML 映射文件中声明，但这让我抓狂，因为它不想工作。你能看看有什么问题吗？

因此，在我当前的项目中，我有一个一对一的关系：这是我为名为***DossierBean***的父级的 XML 映射。

***档案Bean.hbm.xml***

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
    <class name="fr.gouv.travail.gestionAccords.server.dao.beans.pojo.DossierBean" table="dos">
    <id name="numeroDossier" type="string">
        <column name="num_dos" />
            <generator class="assigned" />
    </id>

    <one-to-one name="travailleurHandicape" class="fr.gouv.travail.gestionAccords.server.dao.beans.pojo.TravailleurHandicapeBean" cascade="all,delete-orphan" lazy="false" />
    // Other properties...
    </class>
</hibernate-mapping> 
```

***TravailleurHandicapeBean.hbm.xml***

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
    <class name="fr.gouv.travail.gestionAccords.server.dao.beans.pojo.TravailleurHandicapeBean" table="tha">
        <id name="numeroDossier" type="string">
            <column name="num_dos" />
                <generator class="foreign">
                    <param name="property">dossier</param>
                </generator>
        </id>
        <one-to-one name="dossier" class="fr.gouv.travail.gestionAccords.server.dao.beans.pojo.DossierBean" constrained="true" />
        <property name="dateAgrement" column="dt_agrement" type="date"/>
        <property name="dureeAgrement" column="dur_agrement" type="integer"/>
        <property name="indicateurRenouv" column="ind_renouv" type="character"/>
    </class>
</hibernate-mapping> 
```

***DossierBean.java（父 bean）***：

```
@Named("dossierBean")
@Scope("prototype")
public class DossierBean
{
     private String numeroDossier;  // PK
     private TravailleurHandicapeBean travailleurHandicape; // One-to-one relation

   /**
    * @return the numeroDossier
    */
    public String getNumeroDossier()
    {
            return numeroDossier;
    }

   /**
    * @param numeroDossier the numeroDossier to set
    */
    public void setNumeroDossier(String numeroDossier) 
    {
            this.numeroDossier = numeroDossier;
    }

   /**
    * @return the travailleurHandicape
    */
    public TravailleurHandicapeBean getTravailleurHandicape() 
    {
            return travailleurHandicape;
    }

   /**
    * @param travailleurHandicape the travailleurHandicape to set
    */
    public void setTravailleurHandicape(TravailleurHandicapeBean travailleurHandicape)
    {
            this.travailleurHandicape = travailleurHandicape;
    }
} 
```

***TravailleurHandicapeBean.java（子豆）：***

```
@Named("travailleurHandicapeBean")
@Scope("prototype")
public class TravailleurHandicapeBean
{
    private String numeroDossier;
    private DossierBean dossier;
    private Date dateAgrement;
    private Integer dureeAgrement;
    private Character indicateurRenouv;

   /**
    * @return the numeroDossier
    */
    public String getNumeroDossier()
    {
            return numeroDossier;
    }

   /**
    * @param numeroDossier the numeroDossier to set
    */
    public void setNumeroDossier(String numeroDossier)
    {
            this.numeroDossier = numeroDossier;
    }

   /**
    * @return the dateAgrement
    */
    public Date getDateAgrement()
    {
            return dateAgrement;
    }

   /**
    * @param dateAgrement the dateAgrement to set
    */
    public void setDateAgrement(Date dateAgrement)
    {
            this.dateAgrement = dateAgrement;
    }

   /**
    * @return the dureeAgrement
    */
    public Integer getDureeAgrement()
    {
            return dureeAgrement;
    }

   /**
    * @param dureeAgrement the dureeAgrement to set
    */
    public void setDureeAgrement(Integer dureeAgrement)
    {
            this.dureeAgrement = dureeAgrement;
    }

   /**
    * @return the indicateurRenouv
    */
    public Character getIndicateurRenouv() 
    {
            return indicateurRenouv;
    }

   /**
    * @param indicateurRenouv the indicateurRenouv to set
    */
    public void setIndicateurRenouv(Character indicateurRenouv)
    {
            this.indicateurRenouv = indicateurRenouv;
    }

   /**
    * @return the dossier
    */
    public DossierBean getDossier() 
    {
            return dossier;
    }

   /**
    * @param dossier the dossier to set
    */
    public void setDossier(DossierBean dossier)
    {
            this.dossier = dossier;
    }
} 
```

谢谢你的帮助！

没有答案？感谢您的贡献...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:05:37.173

请参阅有关 Hibernate 的此错误报告： [https](https://hibernate.onjira.com/browse/HHH-5267) ://hibernate.onjira.com/browse/HHH-5267 似乎正是您的问题。我不确定它是否也只影响版本 3.5 或 4.x。

解决方法似乎是调用 session.merge() 而不是 session.saveOrUpdate()

# c# - 实体框架 - 如果该值已经存在，如何不插入新值

> ID：14303112
> 
> 赞同：0
> 
> 时间：2013-01-13T11:47:12.000
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework

我正在用 MVC 4 写一个博客网站。我的 CommentController 中有以下操作方法来为文章添加评论。评论具有导航属性 - 作者（由电子邮件地址标识）。我想要做的是如果作者的电子邮件地址已经存在于数据库中，我只插入新评论。如果是新的电子邮件地址，则还需要创建新作者。

--------下面是我的创建动作--------

```
 public ActionResult Create(Comment comment)
            {
                if (ModelState.IsValid)
                {
                    comment.CreatedDate = DateTime.Now;
                    myDb.Comments.Add(comment);

                    myDb.SaveChanges();
                    return RedirectToAction("Details", "Blog", new {id = comment.BlogId });
                }
                return View(comment);
            } 
```

--------下面是我的评论课--------

```
public class Comment
    {
        [Key]
        public int CommentId { get; set; }

        [Required(ErrorMessage="Please enter your comment")]
        public string CommentContent { get; set; }
        public DateTime CreatedDate { get; set; }

        [Required]
        public int AuthorId { get; set; }
        public virtual Author Author { get; set; }

        [Required]
        public int BlogId { get; set; }
        public virtual Blog Blog { get; set; }

    } 
```

谢谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:52:35.173

```
var authors = myDb.Authors;
if((comment.AuthorId != null || comment.AuthorId !=0) && !authors.Exists(a=>a.AuthorID == comment.AuthorId))
{
   //do your creation of new Author and then post the article
}
else//author exists
{
   //just post article
} 
```

这假设您的 myDb 有一个名为 Authors 的表（我认为确实如此），并且您可能需要调整布尔 Exists lambda 以正确匹配 AuthorId

# java - Hibernate删除父子记录

> ID：14303113
> 
> 赞同：0
> 
> 时间：2013-01-13T11:47:22.593
> 
> 标签：java, database, hibernate, hibernate-mapping

我有两个带有这样注释的表：

**公司：**

```
@OneToMany(mappedBy="company",fetch=FetchType.LAZY)
private List<Employees> employees; 
```

和

**雇员：**

```
@ManyToOne(cascade=CascadeType.ALL)
@JoinColumn(name="idCompany")
private Company company; 
```

当我尝试删除父（公司）时，它不会删除任何一个。感谢帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:24:30.137

将此注释添加到您的字段

```
@Cascade(value = {org.hibernate.annotations.CascadeType.ALL,
org.hibernate.annotations.CascadeType.DELETE_ORPHAN}) 
```

# c++ - 头文件 c++ windows 到 linux 的转换

> ID：14303114
> 
> 赞同：0
> 
> 时间：2013-01-13T11:47:32.407
> 
> 标签：c++, linux, header-files

我已经将一些文件从我的 windows 机器复制并粘贴到我的 linux 机器上，并在 conio.h 和 Windows.h 头文件中遇到了一些可以理解的问题，但我不记得它们需要什么。

它们只在主函数中，所以我将它们注释掉并再次运行程序，认为错误会告诉我需要它们的位置，这样我就可以用谷歌搜索哪些标题对 linux 有类似的作用。

我遇到的问题是我得到的所有错误都在我包含在主函数中的头文件中，但没有包含 Windows.h 或 conio.h 头文件。

我的问题是如何/为什么： - 编译器是否依次查看每个头文件，进入 windows.h 头文件并停止，然后当它被注释掉时，它会进入我的“Chapter_7.h”头文件并找到所有问题在那里。

或者 main.cpp 中标题的注释会以某种方式影响我编写的标题。

或者（可能更有可能）我忽略了另一种选择吗？

感谢您的任何回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:50:33.333

这是由于`.h`文件在`.cpp`. 在编译过程**中，头文件中的所有文本都被复制粘贴到包含`.cpp`文件**中。这意味着**以后`.h`的文件可以访问较早的文件**。

这看起来就是您的情况正在发生的事情，**`windows.h`本来是第一个 include**，并且后续的标头一直在使用它。

```
//#include <window.h>  
//#include <conio.h>
#include "myheader.h"    // can no longer use windows.h or conio.h
#include "myheader2.h" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T11:52:44.203

你可以说标题内容被复制粘贴到它们包含的文件中，如果这就是你的意思的话。

> 或者 main.cpp 中标题的注释会以某种方式影响我编写的标题。

确实。认为：

```
//header1.h
#define X 1

//header2.h
#ifdef X
int a = 0;
#else
int a = 1;
#endif 
```

`a``header1.h`如果包含在之前或之后，将有不同的定义`header2.h`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T12:02:06.467

修复“我正在使用我无法在这台机器上使用的头文件”的第一步是删除这些文件，编译代码并查看问题所在 - 它几乎总是会产生编译器错误，所以你应该能够找到这很容易。

`conio.h`允许控制台 io，并且可能需要一些工作才能将其修复到 Linux 中。完全取决于您使用的是什么。

`windows.h`解释起来要复杂得多，因为它本质上为您提供了所有的 Windows API 函数，以及大量的类型声明，而且其中有很多。您的程序可能永远不会[直接]使用其中的大多数。

“使用其他地方不存在的头文件”的常见问题之一是您最终使用了头文件中声明的某些类型。例如，`windows.h`将声明 LONG、HANDLE 和大量其他类型。然后这些类型在其他地方的结构和函数声明中使用，当您删除`windows.h`它时，将导致各种后续问题。

我的方法总是先解决第一个问题，然后再编译。这样做的原因是，如果出现奇怪的东西，编译器经常会“混淆”。这有点像如果你要告诉一个朋友如何开车去你家，你会说“当你看到左边的大橡树时，你就走下一个右边”。你不知道，这棵橡树已经被砍倒了，因为它快死了，现在已经不存在了。所以你的朋友开车到原来那棵橡树的地方，然后在路上的另一棵橡树后面右转。当然，现在所有其他指令都完全没用了，因为你的朋友离正确的道路很远，如果没有新的指令，你永远不会找到你的房子。当编译器在源文件中发现“令人惊讶的”或“缺失的”位时，也会发生同样的事情。因此，修复第一个错误，然后编译、修复、编译，通常可以让您达到代码编译的程度。有时这涉及编写这样的新函数：

```
int GetTimeOfDay(void)
{
    printf("%s:%d:%s: doesn't work yet, exiting...", __FILE__, __LINE__, __func__);
    exit(1);
    return 0;  // to keep compiler happy. 
} 
```

编译完所有代码后，您就开始研究如何实现/替换您添加以使其编译的那些函数。

# php - PHP pg_query_params() 记录 SQL 错误

> ID：14303115
> 
> 赞同：0
> 
> 时间：2013-01-13T11:47:41.377
> 
> 标签：php, postgresql

我认为所有 pg_* 函数都会在错误时返回 false，检查它是你的工作。但是，如下所示，我的服务器正在向 PHP 日志输出一条错误消息。我如何防止这种情况发生，因为我显然不希望这些消息污染日志，因为我通过检查查询结果对象的错误代码来处理这些异常。

`Warning: pg_query_params(): Query failed: ERROR: duplicate key value violates unique constraint "email" DETAIL: Key (email)=(email@example.com) already exists. in /xxx.php on line 100`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T17:06:54.683

从 PHP 的角度来看，至少有两种方法可以避免错误消息，一种是“快速而肮脏”，另一种是更复杂但干净。

**解决方案#1**：在调用前添加@符号以静音任何错误消息

```
@pg_query_params($db, $query, $params); 
```

缺点是无论失败的原因是什么，都不会有日志。

**解决方案#2**：使用**pg_send_query_params** ()，处理错误代码，检查它是否是预期错误，仅在这种情况下忽略它，否则引发错误。示例代码：

```
if (pg_send_query_params($db, $query, $params)) {
  $res=pg_get_result($db);
  if ($res) {
    $state = pg_result_error_field($res, PGSQL_DIAG_SQLSTATE);
    if ($state==0) {
      // success
    }
    else {
      // an error happened
      if ($state=="23505") { // unique_violation
        // process or ignore expected error
      }
      else {
        // process other errors
        trigger_error (pg_last_error(), E_USER_ERROR);  
      }
    }
  }  
}
else { 
 trigger_error ("pg_send_query_params failed:".pg_last_error(), E_USER_ERROR);
} 
```

在这两种情况下，PostgreSQL 错误日志中都会有错误的痕迹，除非你也在那里将其静音，但这是一个单独的问题，通常可以通过在程序代码中使用带有错误捕获的服务器端 INSERT 而不是客户端。

# jquery - Jquery - 如何选择包含 html 的 div 标签属性的特定标签？

> ID：14303120
> 
> 赞同：0
> 
> 时间：2013-01-13T11:48:18.740
> 
> 标签：jquery

我有一个 div，它有一个名为“data-prototype”的属性。该属性“数据原型”包含一些 html。嵌套在该 html 中的是我要提取的选择标记。我知道如何使用 jquery 获取整个属性内容，但不知道如何获取特定标签（在我的例子中是 select 标签）。先感谢您。干杯。马克

JsFiddle：http: [//jsfiddle.net/gpsw3/](http://jsfiddle.net/gpsw3/)

我的html：

```
<div id="some-div" data-prototype="<div><span>something</span><select><option>opt1</option><option>opt2</option></select></div>"></div>

<a id="btn">click</a> 
```

我的jQuery：

```
$(document).on({
            click: function() { 
                $container = $('#some-div');
                alert($container.attr('data-prototype'));
            }
}, '#btn'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:01:30.540

您可以从 的内容创建一个 DOM 元素`data-prototype`，然后找到给定的元素。

```
var $container = $('#some-div');
var $prototype = $("<div/>").append($container.attr("data-prototype"));
var $select    = $prototype.find("select"); 
```

或者，您可以使用`.data()`而不是`.attr()`访问`data-*`属性。

[**看这里。**](http://jsfiddle.net/V6Y57/)

* * *

澄清`$("<div/>").append(...)`。该`.find()`函数适用于后代，因此您需要包装您的内容以便能够选择`data-prototype`属性中的最顶层（根）元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:09:14.823

将您的数据属性内容放在 DOM 选择器中，然后定位它

工作示例：http: [//jsfiddle.net/gpsw3/3/](http://jsfiddle.net/gpsw3/3/)

```
$(document).on({
    click: function() {
        $container = $('#some-div');
        $nestedHTML = $("<div/>").append($container.attr('data-prototype'));
        $select = $nestedHTML.find('select');
        console.log( $select);
    }
}, '#btn'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T11:58:49.107

试试这个：http: [//jsfiddle.net/gpsw3/1/](http://jsfiddle.net/gpsw3/1/)

```
$(document).on({
        click: function() { 
            $container = $('#some-div');
            var a = $container.attr('data-prototype');
    var b = a.substr(0, a.indexOf('</div>'));
    var c = b.substr(b.indexOf('<select>'));
    alert(c);
        }
    }, '#btn'); 
```

我认为没有其他方法可以做到这一点（不确定），但这样你就可以提取你正在寻找的东西。

# php - JavaScript 和 PHP 的文本压缩

> ID：14303124
> 
> 赞同：1
> 
> 时间：2013-01-13T11:48:49.367
> 
> 标签：php, javascript, jquery

> **可能重复：**
> [Gzip 的 JavaScript 实现](https://stackoverflow.com/questions/294297/javascript-implementation-of-gzip)

我正在寻找一种适用于 JavaScript 和 PHP 的文本（字符串）压缩方法，类似于它在 JSON 中的工作方式。不知道有没有类似的技术。

例如，我想用 JavaScript 压缩文本，然后在另一个页面用 PHP 解压缩。

如果这篇文章似乎是重复的，我提前道歉，但我已经搜索并没有找到任何与我需要的类似的东西。我只发现只在一种技术（PHP 或 JavaScript，而不是两者中）中工作的函数。一个例子：

```
<script>
var text=aaaaa;
 text=functionForCompress(text){}
 text-> for example 5a
<script> 
```

在页面 php 中：

```
$decompresedText=functionForDeCompress(request->data);
$decompresedText -> aaaaa 
```

request->data 包含脚本的可变文本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:08:50.860

javascript压缩先下载jsmin-php，可以从[https://github.com/rgrove/jsmin-php下载](https://github.com/rgrove/jsmin-php)

示例 php：

```
<?php
require 'jsmin.php';

$jsmin_php = JSMin::minify(file_get_contents("your_javascript_file.js"));

echo $jsmin_php;
?> 
```

# qt - 将 QMatrix4x4 与 OpenGL 函数一起使用

> ID：14303126
> 
> 赞同：4
> 
> 时间：2013-01-13T11:48:52.187
> 
> 标签：qt, opengl

有没有一种简单的方法来使用`QMatrix4x4`OpenGL 函数，特别是`glMultMatrixf`？

如果我理解这一点，我将不得不转置矩阵，并确保将`qreal`（可以是`float`或`double`取决于底层系统）转换为`GLfloat`. 没有一个功能可以为我做这件事吗？

我也有同样的问题`QVector3D`，我再次需要`GLfloat`在函数中作为数组`glVertex3fv`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T18:19:55.873

首先我想提一下，它`QMatrix4x4`具有用于矩阵乘法的内置运算符（带有第二个矩阵、向量或标量）。但是，您的问题仍然需要答案，因为您希望迟早将矩阵传递给 OpenGL。

`QMatrix4x4`用于`qreals`内部表示。虽然该类旨在直接与 OpenGL 一起使用（`constData()`如 Bart 在他的回答中所建议的那样使用），但如果您想保持平台兼容性（在嵌入式设备上），您可以确保根据类型将其传递给相应的 OpenGL 函数,`qreal`是`float`!):

```
// these are defined in the OpenGL headers:
void glMultMatrixf(const GLfloat *m);
void glMultMatrixd(const GLdouble *m);

// add overloaded functions which call the underlying OpenGL function
inline void glMultMatrix(const GLfloat  *m) { glMultMatrixf(m); }
inline void glMultMatrix(const GLdouble *m) { glMultMatrixd(m); }

// add an overload for QMatrix4x4 for convenience
inline void glMultMatrix(const QMatrix4x4 &m) { glMultMatrix(m.constData()); } 
```

您也可以将此机制用于向量，这里是`glVertex*`系列，由于“原始指针”重载需要考虑的组件数量，它更有意义，但面向对象的重载可以自动为您完成：

```
inline void glVertex2v(const GLfloat  *v) { glVertex2fv(v); }
inline void glVertex2v(const GLdouble *v) { glVertex2dv(v); }
inline void glVertex3v(const GLfloat  *v) { glVertex3fv(v); }
inline void glVertex3v(const GLdouble *v) { glVertex3dv(v); }
inline void glVertex4v(const GLfloat  *v) { glVertex4fv(v); }
inline void glVertex4v(const GLdouble *v) { glVertex4dv(v); }

// Note that QVectorND use floats, but we check this during compile time...
Q_STATIC_ASSERT(sizeof(QVector2D) == 2*sizeof(float));
Q_STATIC_ASSERT(sizeof(QVector3D) == 3*sizeof(float));
Q_STATIC_ASSERT(sizeof(QVector4D) == 4*sizeof(float));
inline void glVertex(const QVector2D &v) { glVertex2v(reinterpret_cast<const float*>(&v)); }
inline void glVertex(const QVector3D &v) { glVertex3v(reinterpret_cast<const float*>(&v)); }
inline void glVertex(const QVector4D &v) { glVertex4v(reinterpret_cast<const float*>(&v)); }

// Even for QPointF we can do it!
Q_STATIC_ASSERT(sizeof(QPointF) == 2*sizeof(qreal));
inline void glVertex(const QPointF &v) { glVertex4v(reinterpret_cast<const qreal*>(&v)); } 
```

因此，如果进行以下更改，您的代码将保持有效：

*   Qt 将`QVector*`/的表示更改为`QMatrix`分别使用浮点数 / 双精度数，
*   您的代码更改了向量的分量数

...而在使用原始 OpenGL 命令（如`glVertex3f`.

上面代码中的`Q_STATIC_ASSERT`离子是从 Qt 5.0 开始定义的。如果您使用的是 Qt4（或具有 Qt4 兼容性的代码），请将其添加到一些全局头文件中/在您的定义之前：[http](http://ideone.com/VDPUSg) ://ideone.com/VDPUSg [来源：Qt5 / qglobal.h]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T11:56:56.693

`qreal`在所有平台上都被定义为双精度，ARM 架构除外。所以对你来说，他们很可能是双打。

也就是说，是的，您可以使用该方法将 QMatrix4x4 与 OpenGL 完美结合使用[`constData()`](http://doc.qt.digia.com/qt/qmatrix4x4.html#constData)。当然，对于 double 类型，您要么必须使用`glMultMatrixd`，要么从中创建一个浮点矩阵。这可能不是您想要做的。Qt 有各种示例在他们的 OpenGL 演示中使用矩阵类型。

我个人从不在我的 OpenGL 代码中使用 Qt 的矩阵和向量类型（即使我广泛使用 Qt），而是选择像 Eigen、GLM 或其他合适的库。

# java - Java 套接字连接在读取最后一行之前挂起 60 秒

> ID：14303128
> 
> 赞同：0
> 
> 时间：2013-01-13T11:49:06.677
> 
> 标签：java, sockets

我已经通过Java套接字手动开发了一个soap连接（这是一个非常简单的soap请求，Axis给出了很多构建问题）。

为了实现这一点，我基本上复制了我从 Soap UI 中获取的 HTTP 标头，并编写了以下代码：

```
String hostname = "aaaaa";
int port = 11111;
InetAddress  addr = InetAddress.getByName(hostname);
Socket sock = new Socket(addr, port);
sock.setSoTimeout(100000);
BufferedWriter  wr = new BufferedWriter(new OutputStreamWriter(sock.getOutputStream(),"UTF-8"));
wr.write("POST " + "http://aaaa:11111/servicePath" + " HTTP/1.1\r\n");
wr.write("Host: aaaaa:11111\r\n");
wr.write("Accept-Encoding: gzip,deflate\r\n");
wr.write("Content-Length: " + soapXml.length() + "\r\n");
wr.write("Content-Type: text/xml; charset=\"UTF-8\"\r\n");
//wr.write("Connection: Keep-Alive\r\n");
wr.write("SOAPAction: \"/someSoapAction\"\r\n");
wr.write("User-Agent: Apache-HttpClient/4.1.1 (java 1.5)\r\n");
wr.write("\r\n");
wr.write(soapXml);
wr.flush(); 
```

请求成功，这意味着我从服务中得到了我期望的响应。例如，当我手写“soapXml”一些无效参数时，我得到一个 500 错误返回 XML 解释问题，如果我正确设置所有内容，我得到一个 200 OK，标题后面有一个 xml 正文。

**问题是套接字在 200OK 的情况下在读取 HTTP 正文之前挂起 60 秒。**

它基本上读取完整的标头，然后等待 60 秒，然后（我认为某些协议超时并且）最后读取 xml 正文。

这是我阅读响应的代码：

```
String line;
BufferedReader rd = new BufferedReader(new java.io.InputStreamReader(sock.getInputStream(),"UTF-8"));
while ((line = rd.readLine()) != null) { 
            i++;
            LOG.debug("cycle: "+i+" -------- "+line);
                     //after printing the header, it hangs 60 seconds before printing the follwing XML  
            if ((line.length() >0) && (line.charAt(0) == '<'))
            {
                responseXML = line;
            }
} 
```

这是一个示例 200 OK 标头：

```
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Content-Type: text/xml;charset=utf-8
Content-Length: 1052
Date: Sun, 13 Jan 2013 08:33:45 GMT -- hanging 60 seconds here
-- blank line
<?xml version="1.0" encoding="UTF-8"?>................</SOAP-ENV:Envelope> 
```

有没有人遇到过这种情况？请注意，这显然不是服务器问题，因为使用肥皂 UI 会立即提供答案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T11:56:42.343

服务器为 HTTP keep-alive 保持连接打开，显然是 60 秒超时。要么更改为 HTTP 1.0，要么记下返回的 Content-length 标头并停止读取那么多字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:44:32.370

服务器环境变化（提供了一台新机器）解决了这个问题。

现在 200OK 的响应时间也低于 1 秒。

不幸的是，我没有关于环境技术堆栈的任何详细信息。无论如何感谢您的帮助。

# ios - GameCenter 实时比赛无法开始，卡在连接上，在应用商店中而不是在沙盒中

> ID：14303131
> 
> 赞同：0
> 
> 时间：2013-01-13T11:49:35.620
> 
> 标签：ios, ios5, ios6, ios-simulator, game-center

当然，我在提交之前进行了测试，它在 iOS 6 上的模拟器上工作，但在 5.1 上它不会工作，因为 expectedPlayerCount 总是出现 1 而不是 0 ！就在5.1！！我搜索了这个问题，开发人员说它的网络问题和沙盒问题，所以我提交了我的应用程序并获得了批准！现在我试了一下，它总是卡在连接上！！！

*   (void)findMatchWithMinPlayers:(int)minPlayers maxPlayers:(int)maxPlayers viewController:(UIViewController *)viewController delegate:(id)theDelegate {

    如果（！gameCenterAvailable）返回；

    比赛开始=否；self.match = nil; self.presentingViewController = viewController; 委托=委托；

    if (pendingInvite != nil) {

    ```
    [presentingViewController dismissModalViewControllerAnimated:NO];
    NSLog(@"findmatch");
    GKMatchmakerViewController *mmvc = [[GKMatchmakerViewController alloc] initWithInvite:pendingInvite] ;
    mmvc.matchmakerDelegate = self;
    [presentingViewController presentModalViewController:mmvc animated:YES];

    self.pendingInvite = nil;
    self.pendingPlayersToInvite = nil; 
    ```

    } 别的 {

    ```
    [presentingViewController dismissModalViewControllerAnimated:NO];
    NSLog(@"findmatch2");
    GKMatchRequest *request = [[GKMatchRequest alloc] init] ;
    request.minPlayers = minPlayers;
    request.maxPlayers = maxPlayers;
    request.playersToInvite = pendingPlayersToInvite;

    GKMatchmakerViewController *mmvc = [[GKMatchmakerViewController alloc] initWithMatchRequest:request];
    mmvc.matchmakerDelegate = self;

    [presentingViewController presentModalViewController:mmvc animated:YES];

    self.pendingInvite = nil;
    self.pendingPlayersToInvite = nil; 
    ```

    }

}

*   (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFindMatch:(GKMatch *)theMatch { NSLog(@"%d",theMatch.expectedPlayerCount); [presentingViewControllerdismissModalViewControllerAnimated:YES]; NSLog(@"didfind"); self.match = theMatch; NSLog(@"%d",match.expectedPlayerCount); match.delegate = 自我；if (!matchStarted && match.expectedPlayerCount == 0) { NSLog(@"准备开始比赛！"); [自我查找玩家]; } }

请帮助我得到这么多不好的评论！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:51:49.277

现在可能为时已晚，但您确定在 iTunes Connect 的两个地方都启用了 Game Center 吗？这篇文章：[https ://devforums.apple.com/thread/66773?tstart=0](https://devforums.apple.com/thread/66773?tstart=0)

告诉您在“管理游戏中心”部分和要上传的版本中启用（否则它可能在沙盒中有效，但在应用商店中无效）

希望能帮助到你！

# c# - 避免在 .Net DataContractSerializer 中使用“http://www.w3.org/2001/XMLSchema-instance”命名空间

> ID：14303134
> 
> 赞同：5
> 
> 时间：2013-01-13T11:49:49.197
> 
> 标签：c#, .net, xml, datacontractserializer, netdatacontractserializer

我有一系列类，我在 .NET 4.0 中使用 .NET 的 DataContractSerializer 将它们转换为 XML。序列化工作正常，我可以解析 XML 并稍后重新创建 .NET 对象，没有任何困难。

但是，大多数 DataMember 不是必需的。[DataMember(IsRequired = false)]。这对反序列化 XML 非常有效，您可能会错过文档中的 XML 节点，但是当将现有对象序列化为 XML 时，DataContractSerializer 坚持写出具有空值的属性作为具有属性的节点，例如

```
[DataContract(Name = "response", Namespace = "http://domain.com/name")]
public class MyResponseClass
{
    [DataMember(Name = "count", IsRequired = true, Order = 0)]
    public int Count { get; set; }

    [DataMember(Name = "info", IsRequired = false, Order = 1)]
    public InfoClass Info { get; set; }

    [DataMember(Name = "metadata", IsRequired = false, Order = 2)]
    public MetadataList Metadatas { get; set; }

} 
```

可以从序列化

```
<response xmlns="http://domain.com/name">
    <count>4</count>
</response> 
```

但是，如果我序列化对象，它会创建：

```
<response xmlns="http://domain.com/name" xmlns:i="http://www.w3.org/2001/XmlSchema-instance">
    <count>4</count>
    <info i:nil="true" />
    <metadata i:nil="true" />
</response> 
```

当 DataContractSerializer 具有空值时，有没有办法让 DataContractSerializer 不写入节点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T10:07:40.567

用于`EmitDefaultValue = false`跳过 XML 中的默认值：

```
[DataContract(Name = "response", Namespace = "http://domain.com/name")]
public class MyResponseClass 
{
    [DataMember(Name = "count", IsRequired = true, Order = 0, EmitDefaultValue = false)]
    public int Count { get; set; }

    [DataMember(Name = "info", IsRequired = false, Order = 1, EmitDefaultValue = false)]
    public InfoClass Info { get; set; }

    [DataMember(Name = "metadata", IsRequired = false, Order = 2, EmitDefaultValue = false)]
    public MetadataList Metadatas { get; set; }
} 
```

要删除`xmlns:i="http://www.w3.org/2001/XmlSchema-instance"`，您必须使用例如`Replace()`下面的示例

```
public void Write(string filePath, MyResponseClass myResponse)
{
    var serializer = new DataContractSerializer(typeof(MyResponseClass));

    var sb = new StringBuilder();
    using (var writer = new StringWriter(sb))
    using (var xmlWriter = XmlWriter.Create(writer))
    {
        serializer.WriteObject(xmlWriter, myResponse);
    }

    using (StreamWriter stream = new StreamWriter(filePath))
    {
        sb = sb.Replace(" xmlns:i=\"http://www.w3.org/2001/XMLSchema-instance\"", "");
        stream.Write(sb);
    }
} 
```

带着敬意 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-27T14:53:25.823

（我不小心在错误的问题中发布了这个答案，但我认为它在这里也很有帮助，所以我暂时不删除它）

```
[DataContract(Namespace = "")] 
```

在每个类的顶部使它变得更好。它删除了 datacontract 命名空间和丑陋的节点前缀。但是，标准命名空间仍然存在。这对我来说没问题。

前：

```
<?xml version="1.0" encoding="utf-8"?>
<root xmlns:i="http://www.w3.org/2001/XMLSchema-instance"
  xmlns="http://schemas.datacontract.org/2004/07/MyClassname">
  <prop1>true</prop1>
  <prop2 xmlns:d2p1="http://schemas.datacontract.org/2004/07/MySubclassname">
    <d2p1:sub>true</d2p1:sub>
  </prop2>
</root> 
```

后：

```
<?xml version="1.0" encoding="utf-8"?>
<root xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
  <prop1>true</prop1>
  <prop2>
    <sub>true</sub>
  </prop2>
</root> 
```

# javascript - setting a "value" attribute in html with a variable containing spaces

> ID：14303138
> 
> 赞同：2
> 
> 时间：2013-01-13T11:50:12.190
> 
> 标签：javascript, html

I am very new to HTML/JS so I appologize if this is a basic question... I tried to look this up on the web and was unable to find a solution.

I am using a JS code to create an HTML. I am trying to set a "value" attribute with a var containing spaces (string with spaces). when inspecting the value in chrome I can see that the string is not set correctly.

This is my JS code:

```
var templateArray = templateString.split("\t");
for (var i = 0; i < templateArray.length; i++) {
  htmlTemplate.push("<option value="+templateArray[i]+">"+templateArray[i]+"</option>");
} 
```

This is the templateArray:

```
templateArray[0] = template_member_information
templateArray[1] = template - member information 
```

This is what I get when inspecting in chrome:

```
<option value="template" -="" member="" information="">template - member information</option>
<option value="template_member_information">template_member_information</option> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:03:12.897

不要编写原始 HTML，而是只存储值，然后动态创建 DOM 元素。

假设您在名为数组的所有值`values`都有这样的代码来填充具有这些值的项目的下拉列表：（和文本等于该值）

```
var oDDL = document.getElementById("MyDropDownList");
for (var i = 0; i < values.length; i++) {
    var option = new Option();
    option.value = option.text = values[i];
    oDDL.appendChild(option);
} 
```

这样您就不必乱用引号，并且代码更加灵活。

[现场测试用例](http://jsfiddle.net/k2QTa/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T11:52:30.217

Why don't you simply put your value between quotes ?

```
htmlTemplate.push("<option value=\""+templateArray[i]+"\">"+templateArray[i]+"</option>"); 
```

Note that this would still fail with values containing quotes, but there would be less failings.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T11:53:20.053

You forgot the quotes:

```
var str = "<option value='"+templateArray[i]+"'>"+templateArray[i]+"</option>";
htmlTemplate.push(str); 
```

# android - A simple "how to" document for Firefox Android add-on development

> ID：14303144
> 
> 赞同：2
> 
> 时间：2013-01-13T11:50:39.343
> 
> 标签：android, mobile, firefox-addon

Its almost 24 hours to see atleast one simple addon working on my android emulator firefox. Seems like all in vain. I wanted to create an add-on using [cfx tool](https://addons.mozilla.org/en-US/developers/docs/sdk/1.12/dev-guide/tutorials/mobile.html). I'm able to install the plugin but I don't know how to debug the add-on (as it is not working), I tried to put some `console.log` in the code and tried to see it in `logcat`, but nothing there..

I've searched extensively to find atleast one simple example for the same, but unfortunately I didn't get anything.

Bytheway my add-on's motive is to modify the html content in the page.

Any help is highly appreciated. Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T20:40:29.500

好的，伙计们，我想通了，并在我的模拟器上完成了一个工作插件。

这里有几个链接会有所帮助..

[Mozilla cfx 附加 sdk 1.5 zip 文件](https://ftp.mozilla.org/pub/mozilla.org/labs/jetpack/addon-sdk-1.5.zip)

[Mozilla cfx 附加 sdk 文档](https://addons.mozilla.org/en-US/developers/docs/sdk/1.12/dev-guide/tutorials/mobile.html)

[移动插件开发](https://blog.mozilla.org/addons/2012/02/06/mobile-add-on-development-using-the-add-on-sdk/)

[工作示例](https://github.com/ZER0/penny-arcade-comics)

我希望这些信息会有所帮助。

# wpf - WPF Drag and Drop - thumbnail when dragging

> ID：14303145
> 
> 赞同：1
> 
> 时间：2013-01-13T11:50:48.810
> 
> 标签：wpf, drag-and-drop

I have been Googling for thumbnails, opaque images, etc and found nothing. I think I'm just searching for the wrong thing...

I have two listboxes and you can drag from the left list to the right. The left list is composed of a bunch of user controls... what I want is while the user is dragging to show a small thumbnail/image of the user control that they are dragging. Like when you drag a file in Windows, you can see a thumbnail of the file you're dragging.

What is this called? Just the name would be great! Any links would also be appreciated, but if I know what I'm searching for I should be okay... thanks.

# java - 从 KeyEvent 获取所有键映射

> ID：14303157
> 
> 赞同：0
> 
> 时间：2013-01-13T11:52:40.983
> 
> 标签：java, reflection, awt, keylistener, key-events

有没有办法从`java.awt.event.KeyEvent`映射中获取所有键？

我尝试使用反射，例如：

```
 for (Field f : KeyEvent.class.getDeclaredFields()) {
            try 
            {
                map.put((int)f.getInt(f), f.getName());
            } 
            catch (IllegalArgumentException | IllegalAccessException ex) {
                Logger.getLogger(KeyCollection.class.getName()).log(Level.SEVERE, null, ex);
            }
        } 
```

但我得到了：

```
java.lang.IllegalAccessException: Class com.util.KeyCollection can not access a member of class java.awt.event.KeyEvent with modifiers "private" 
```

**更新：这是我想出的使用 assylias 代码示例：**

```
 for (Field f : KeyEvent.class.getDeclaredFields()) {
            try {
                if (java.lang.reflect.Modifier.isStatic(f.getModifiers()) && f.getType() == int.class && f.getName().startsWith("VK")) {
                    f.setAccessible(true);
                    map.put((int)f.get(null), f.getName());
                }
            } catch (IllegalArgumentException | IllegalAccessException ex) {
                ex.printStackTrace();
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T11:55:28.020

使用您的方法，您需要首先使该字段可访问：

```
f.setAccessible(true); 
```

但是，您尝试获得该领域的方式也存在问题。下面的示例运行良好，您可以根据需要进行调整：

```
public static void main(String[] args) {
    Map<Object, String> map = new HashMap<>();

    for (Field f : KeyEvent.class.getDeclaredFields()) {
        try {
            if (java.lang.reflect.Modifier.isStatic(f.getModifiers())) {
                f.setAccessible(true);
                map.put(f.get(null), f.getName());
            }
        } catch (IllegalArgumentException | IllegalAccessException ex) {
            ex.printStackTrace();
        }
    }
    System.out.println(map);
} 
```

# ruby-on-rails - Unable to obtain stable firefox connection in 60 seconds (127.0.0.1:7055)

> ID：14303161
> 
> 赞同：76
> 
> 时间：2013-01-13T11:53:00.683
> 
> 标签：ruby-on-rails, cucumber, capybara, selenium-webdriver, rspec-rails

While testing scenario by `cucumber` i'm getting the following error when running `rspec` tests

> > unable to obtain stable firefox connection in 60 seconds (127.0.0.1:7055) (Selenium::WebDriver::Error::WebDriverError)

Using `ruby (1.9.2)` `selenium-webdriver (2.27.2)` and `firefox (19.0)`

Using `rspec-rails (2.12.1)`, `capybara (2.0.2)` and several other gems, Also i have added `launchy` gem but they don't seem to be a problem. And i am using `Windows 7`.

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-01-27T20:59:17.027

我有同样的问题（在 Linux 上）。固定：

```
gem update selenium-webdriver 
```

现在我正在使用 ruby​​ 1.9.3-p286、selenium-webdriver 2.29.0、firefox 18.0 以及 rspec-rails 2.9.0、capybara 1.1.2 和 capybara-webkit 0.12.1

为了安全起见，我将 selenium-webdriver 2.29.0 添加到了我的 Gemfile 中。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-08-15T22:47:28.777

Selenium Webdriver 似乎经常更新以跟上 Firefox。但是你怎么知道你需要哪个版本？希望即使版本更改，此过程也能正常工作：

1.  访问[http://www.seleniumhq.org/download/](http://www.seleniumhq.org/download/)。

2.  向下滚动到**Selenium Client & WebDriver Language Bindings**。

3.  在该部分的**Ruby**语言行中，单击“更改日志”（[直接链接](https://raw.githubusercontent.com/SeleniumHQ/selenium/master/rb/CHANGES)）。

4.  在更改日志中，确定您的 Firefox 版本需要哪个版本的 Selenium。

如果您使用的是 Bundler，请运行`bundle show selenium-webdriver`以查看您拥有的版本。要更新，例如更新到 2.35.0，请将此行添加到您的`Gemfile`：

```
gem 'selenium-webdriver', '2.35.0' 
```

然后运行`bundle update`安装。如果您使用的是 Spork，请记住在重新运行测试之前重新启动它。

**更新**[StackOverflow](https://stackoverflow.com/a/13372388/550712)的 一个回答表明，源代码存储库中的更改日志可能会比 seleniumhq.org 更早更新。Ruby 的存储库更改日志在这里： [https](https://github.com/SeleniumHQ/selenium/blob/master/rb/CHANGES) ://github.com/SeleniumHQ/selenium/blob/master/rb/CHANGES 。

## 降级 Firefox

如果您需要在 Ubuntu 12.04 上降级 Firefox，[这个答案](https://askubuntu.com/a/303261/184420)解释了如何回到 Firefox 20。[这里](https://www.liberiangeek.net/2012/04/how-to-install-previous-versions-of-firefox-in-ubuntu-12-04-precise-pangolin/)给出了关于切换到任何版本的 Firefox 的更一般的描述。然后使用[此答案](https://askubuntu.com/a/23382/184420)暂停 Firefox 更新，直到 Selenium 发布适用于更高版本 Firefox 的更新。

就我而言，我降级了 Firefox，只是发现 Selenium Webdriver 最近已更新以处理最新版本，因此请先检查 Selenium 更新！

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-01-30T15:32:19.133

```
bundle update selenium-webdriver 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-07-30T15:42:08.017

刚刚在CI服务器上碰到这个，发现是因为Firefox没有显示器可以用。我曾认为 selenium webdriver 无需进一步干预即可使其工作，但事实并非如此。

将 Xvfb 添加到混合中使其工作。

对于运行 Cucumber 功能的 Rails：

```
gem 'headless' 
```

然后在 features/support/env.rb

```
Before do
  if Capybara.current_driver == :selenium
    require 'headless'

    headless = Headless.new
    headless.start
  end
end 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-10-10T18:27:19.933

当 selenium 和 firefox 版本不兼容时会发生此错误。

有两种选择。

1.  更新硒：

    `gem update selenium-webdriver`

    如果仍然失败，则 selenium 尚未更新到最新版本。

2.  降级firefox版本：

    `sudo apt-get purge firefox`

    查看可供下载的软件包 `apt-cache showpkg firefox`

    `sudo apt-get install firefox=#older_version#`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-21T12:27:01.067

对我有用的神奇组合是 Firefox 19.0 和 selenium web-driver 2.32.1（在撰写本文时最新）。Firefox 20.x 和 21.x 不起作用。我不得不降级 Firefox。还要记住（至少在 Mac OS 上），如果您转到 FireFox 菜单 -> 关于 Firefox，它将自动升级到最新版本。不要那样做。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-26T00:58:45.313

如果上述方法现在有效，就像我的情况一样，请试一试。

我在一台机器上而不是另一台机器上遇到超时错误。两台机器都是瘦客户端，运行完全相同的版本。这样就排除了不兼容的 Firefox 版本（错误发生在一台机器上而不是另一台机器上）

原来，headless 使用的端口存在问题。有另一个进程使用该端口。

下面为我​​解决了这个问题：在**.zshenv** 文件
中添加以下行， 然后在终端中运行命令以设置更改 **`export XVFB_DISPLAY='new-port-number'`
`zsh`**

 *** * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-27T14:52:28.447

当我从一个终端启动 irb 时，我遇到了这个问题，我将自己起诉到另一个用户。当我以该用户身份运行 irb 时，我会收到此错误。但如果我以 root 身份运行，则不会。而不是当我退出到登录用户拥有的外壳时。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-07T11:06:07.797

对我来说，我已经更新了 gems，但随后需要更新我的包。

在 powershell 中，导航到您的目录，然后更新捆绑包：

```
cd D:\Projects\LazyAutomation
bundle update 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-04T14:23:27.533

降级火狐。

`gem 'headless'`如果现在不希望已经使用和更新 gems，那么您需要降级 firefox。

对于 Ubuntu（但其他 linux 发行版会非常相似），您应该：

删除 Ubuntu 最新版本附带的 firefox

```
sudo apt-get purge firefox 
```

[您可以按照此处](https://askubuntu.com/a/16763/339127)的说明删除一些相关数据来补充

现在，安装旧版本的 Firefox。对我来说，版本 42.0 有效（我们的 Travis.ci 使用它）

```
$ export FIREFOX_SOURCE_URL='https://download.mozilla.org/?product=firefox-42.0&lang=en-US&os=linux64'
$ wget --no-verbose -O /tmp/firefox-42.0.tar.bz2 $FIREFOX_SOURCE_URL
$ tar xvC ~/. -f /tmp/firefox-42.0.tar.bz2
ln -s ~/firefox/firefox ~/bin/firefox 
```

打开一个新的终端选项卡并运行您的黄瓜规格/硒规格。

您现在可以下载最新版本的 Firefox 并在其中创建一个`.desktop`文件 `/usr/share/applications/`以从 Dock 访问它。并让 Selenium 默认查找旧版本。[以此作为参考](https://askubuntu.com/a/144210/339127)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-09-26T02:26:04.853

对于使用 Vagrant 的任何人，如果您登录启用 XServer firefox 可以正确启动，这为我解决了这个问题。流浪者 ssh -- -X

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2013-05-17T23:03:57.777

遵循 ballPointPenguin 的建议后，我现在可以使用 watir-webdriver 检索本地文件，或本地 apache 安装的 htdocs 目录中的文件，或网络上的文件：

```
1) file:///Users/me/jquery_programs/1.htm
2) 'http://localhost:8080/my.html'
3) 'http://www.google.com'

require 'watir-webdriver'

browser = Watir::Browser.new :firefox
browser.goto 'http://localhost:8080/my.html' 
```

在更新之前，我收到了错误：

> `connect_until_stable': 无法在 60 秒内获得稳定的 firefox 连接 (127.0.0.1:7055) (Selenium::WebDriver::Error::WebDriverError)**

# drupal-7 - where is unique memcache key prefix?

> ID：14303162
> 
> 赞同：1
> 
> 时间：2013-01-13T11:53:03.720
> 
> 标签：drupal-7, memcached

I have installed memcached and drupal module memcache and in linux command line :

```
-bash-4.1# netstat -tap | grep memcached 
```

tcp 0 0 *:memcache *:* LISTEN 8431/memcached
tcp 0 0 *:memcache *:* LISTEN 8431/memcached

Seems like it is listening to IP and Port but now the part where I get it to work with drupal 7.18 so I can see what is going on?

Following these instruction:

```
$conf['cache_backends'][] = 'sites/all/modules/memcache/memcache.inc';
$conf['cache_default_class'] = 'MemCacheDrupal';
$conf['memcache_key_prefix'] = 'something_unique';

 /* note : Replace the "something_unique" in the last line with your own unique memcache key prefix. */ 
```

Where do I find "your own unique memcache key prefix"?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T01:11:02.150

[该模块的文档](http://drupal.org/node/1131468)说：

> 如果你想让多个 Drupal 安装共享 memcached 实例，你需要在 settings.php 的 $confarray 中为每个 Drupal 安装包含一个唯一的前缀：
> 
> ```
> $conf['memcache_key_prefix'] = 'something_unique'; 
> ```

仅当您使用同一个 memcached 实例安装多个 Drupal 时才需要该参数；如果只有 Drupal 安装，则不需要它。
只要您为每个 Drupal 安装使用不同的值，您就可以使用您想要的值。您也可以使用域名（包括子域名）。

# algorithm - Timecomplexity analysis of function, Big O

> ID：14303163
> 
> 赞同：-1
> 
> 时间：2013-01-13T11:53:03.843
> 
> 标签：algorithm

What time-complexity will the following code have in respect to the parameter size? Motivate.

```
// Process(A, N) is O(sqrt(N)). 

Function Complex(array[], size){
    if(size == 1) return 1;
    if(rand() / float(RAND_MAX) < 0.1){
        return Process(array, size*size)
             + Complex(array, size/2)
             + Process(array, size*size);
    }
} 
```

I think it is O(N), because if Process(A, N) is O(sqrt(N)), then Process(A, N*N) should be O(N), and Complex(array, size/2) is O(log(n)) because it halves the size every time it runs. So on one run it takes O(N) + O(log(N)) + O(N) = O(N).

Please correct me and give me some hints on how I should think / proceed an assignment like this.

I appreciate all help and thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:38:38.083

该算法的时间复杂度`O(N)`确实是，但原因不同。

函数的复杂度可以表示为`T(n)`：

```
T(n) = T(n/2)       +       2*n
        ^                   ^
      recursive          2 calls to 
      invokation        Process(arr,n*n),
                          each is O(n( 
```

众所周知，这种递归是 O(n)：

```
T(n) = T(n/2) + 2*n = 
     = T(n/4) + 2*n/2 + 2*n = 
     = T(n/8) + 2*n/4 + 2*n/2 + 2*n
     = ....
     = 2*n / (2^logN) + ... + 2*n/2 + 2*n
     < 4n
     in O(n) 
```

让我们正式证明它，我们将使用数学归纳法：

**基数：** T(1) < 4（检查）
**假设：**对于`n`，并且对于每个`k<n`声明`T(k) < 4k` 都成立。
对于`n`：

```
T(n) = T(n/2) + n*2 = (*) 
     < 2*n + 2*n 
     = 4n 
```

**结论**：`T(n)`在`O(n)`

(*) 从归纳假设

# nosql - Cassandra：复制整行

> ID：14303167
> 
> 赞同：1
> 
> 时间：2013-01-13T11:53:15.970
> 
> 标签：nosql, cassandra, thrift, hector, pelops

有没有推荐的方法，使用 Java 客户端，复制/克隆 Cassandra 列族中的一行？

我目前正在将 Hector (1.0-2) 与 Cassandra 1.1.8 一起使用，但切换到另一个客户端库应该不成问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T15:04:38.583

不，通过发送键列表获取所有行（在磁盘上并行发生，因此 i/o 更快）。循环遍历内存中的所有行（无论如何这真的很快）并执行一次写入操作将所有行写回磁盘。（同样，写入是在所有磁盘上并行完成的，因此磁盘写入速度很快）。

无论如何，i/o 是您需要担心的，因为内存中的操作通常很快。如果您正在进行大量复制，则需要切换到 map/reduce。

如果您在 cassandra 上使用 PlayOrm，只需在要复制的实体上编写一个复制方法以保持代码干净。

# css - page-break-* doesn't work on Google chrome

> ID：14303178
> 
> 赞同：18
> 
> 时间：2013-01-13T11:55:41.513
> 
> 标签：css, google-chrome, printing

I just like the `divs` under `.wp_left_col` `div` be placed in separate pages. This is my css code.

```
.wpi_left_col > div {
     page-break-after: always !important;
     page-break-inside: avoid !important;
} 
```

It works on Firefox. How come it doesn't work on Google Chrome?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-12-13T17:01:00.643

所以，经过一番挫折，我找到了解决办法。这是一个 hack，但 Chrome 不正确支持分页符，所以.. 您必须将所有父元素设置为显式浮动：无。在此示例中，我正在打印选项卡式内容。

```
<body>
    <main role="main">
        <section class="tabs">
            <div class="tabbed-content">
                <div class="tab">print page 1</div>
                <div class="tab">print page 2</div>
                <div class="tab">print page 3</div>
            </div>
        </section>
    </main>
</body> 
```

然后您的 CSS 看起来与此类似。

```
html, body, .main-content, .tabs, .tabbed-content { float: none; }

.tab {
    display: block; /* unhide all tabs */
    break-before: always;
    page-break-before: always;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-17T20:48:20.487

现在是 2014 年 7 月，截至今天做 float: none; 对于所有父元素对我有用：

```
@media print {
  table {float: none !important; }
  div { float: none !important; }
  .page-break { page-break-inside: avoid; page-break-before: always; }
  .dont-print { display: none; }  
} 
```

此解决方案适用于 Firefox、Chrome 和 Safari。我有 !important 因为我正在使用 Bootstrap，并且 bootstrap 做了一个浮动：默认情况下在 div 上离开。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-02-02T13:03:33.923

3 年后`float:none !important`for`div`是在 chrome 中进行休息的解决方案。并非`float:none`所有父母都需要 (`body`或`html`)

```
@media print {
    div {
        float: none !important;
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-13T13:07:28.127

`<div style="display: inline-block; ">`据报道，这是一种避免在 YMMV 中间出现分页的方法。另外，尝试删除边框，并确保没有浮动。另请参阅[CSS Page-Break Not Working in all Browsers](https://stackoverflow.com/questions/4884380/css-page-break-not-working-in-all-browsers/5314590#5314590)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-31T18:54:43.377

这是将所有父元素设置为不在打印时浮动的更简单的解决方案：

```
@media print {
  * { 
    float: none !important; 
  }
  .tab {
    display: block;
    break-before: always;
    page-break-before: always;
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-13T12:31:13.617

Chrome 在处理 page-break-after 时存在问题，并且 page-break-inside 这是一个已知的错误，Google 曾多次表示要避免使用这种样式，因为不仅 Chrome，而且更多浏览器在使用它时遇到问题。

您应该考虑为表格设置样式，而不是表格本身。就个人而言，在当今时代，通常最好避免使用表格，因为它们不像 DIV 样式那样灵活。

如上所述的 DIV 样式更灵活且易于使用，并且在所有浏览器上看起来几乎相同，因为浏览器倾向于在不同浏览器之间呈现不同的表格。

这是一个简单的示例，说明如何为您在 DIV 中拥有的第一个表格设置样式，并且到目前为止像素完美，但应该给您一个想法。几乎相同，有一些改进，但没有你使用的字体看起来不太好，不使用图像作为背景是 ++ :P

**CSS**

```
#page {margin:0 auto;width:960px;padding:20px;background:#99deea;}
.myblock {background:#c1ebf2;padding:20px;border-radius:10px;}
.innerblock {width:33.3%;float:left;}
.innerblock h3 {font-size:20px;text-align:center;color:#424242;font-weight:bold;text-shadow:0 0 3px #FFFFFF;}
.innerblock h4 {font-size:14px;padding:10px 0 0 0;color:#778A2C;text-shadow:0 0 3px #FFFFFF;}
.innerblock p {font-size:16px;color:#7A8634;font-weight:bold;padding:0 0px 15px 75px;text-shadow: 0 1px 1px #FFFFFF;} 
```

**HTML**

```
<div id="page">
<div class="myblock">
<div class="innerblock">
<h3>Spencer Hill</h3>
<h4>Recent Work:</h4>
  <p>Example Work Number 1</p>
  <p>Example Work Number 2</p>
  <p>Example Work Number 3</p>
</div>
<div class="innerblock">
<h3>Becca Ward $500</h3>
<h4>Recent Work:</h4>
  <p>Example Work Number 1</p>
  <p>Example Work Number 2</p>
  <p>Example Work Number 3</p>
</div>
<div class="innerblock">
<h3>Rachel Tourville $150</h3>
<h4>Recent Work:</h4>
 <p>Example Work Number 1</p>
 <p>Example Work Number 2</p>
 <p>Example Work Number 3</p>  
</div>
<div style="clear:both;"></div>
</div>
</div> 
```

我已经在网上保存了这段代码供你查看和测试，看看[http://jsfiddle.net/tsd4V/](http://jsfiddle.net/tsd4V/)

同样，这只是一种更好的方法，您可以使用表格样式，但如果您想要良好的跨浏览器兼容性，请不要使用分页符。

# asp.net - 将此转换为验证表达式驾驶执照号码

> ID：14303180
> 
> 赞同：0
> 
> 时间：2013-01-13T11:55:49.487
> 
> 标签：asp.net, expression, validation, license-key

嗨，我正在创建一个注册页面。它有“输入许可证号：”我想创建一个验证表达式，如果用户在该字段中输入错误的格式。表格将不会提交。在他们提交之前必须对其进行更正。我在我的网站中拖动了“正则表达式验证器”。但是他们没有许可证号的默认表达式。我必须自定义表达式以拥有自己的表达式。

现在我只想知道这个示例许可证号的验证表达式是什么：

**G11-11-004064** -- 菲律宾驾驶执照样本。
LetterNumberNumber - NumberNumber - NumberNumberNumberNumberNumberNumber

你能转换它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T11:59:53.483

这是一个正则表达式编辑器。它针对 Ruby，但也适用于 .NET：

*   [http://rubular.com/](http://rubular.com/)

我不知道您要查找的许可证号的详细规范，但我根据您的示例创建了一个正则表达式：`^[A-Z]\d{2}-\d{2}-\d{6}$`.

你可以在这里修改它：

*   [http://rubular.com/r/7bHsX1tJ23](http://rubular.com/r/7bHsX1tJ23)

**该示例解释：**

```
^[A-Z]\d{2}-\d{2}-\d{6}$ 
```

`^`= 行首

`[A-Z]`= 一个大写字母

`\d{2}`= 任何 2 位数字

`\d{6}`= 任何 6 位数字

`$`= 行尾

如果你想确保你不会错过开始许可证使用的小写字母，`[A-Za-z]`而不是`[A-Z]`

（感谢保罗沙利文）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T12:01:09.053

```
/[A-Za-z][0-9][0-9]-[0-9][0-9]-[0-9][0-9][0-9][0-9][0-9][0-9]/ 
```

我确信这是最基本的，但它会匹配

见[在线正则表达式测试](http://www.online-toolz.com/tools/regexp-editor.php)

# php - 当所有 url 重定向到索引页面时，如何更改下面的重写 url 以允许更多子文件夹？

> ID：14303192
> 
> 赞同：1
> 
> 时间：2013-01-13T11:57:30.807
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting

我正在尝试更改以下重写规则以接受更多文件夹。目前任何其他 url`mydomain.com\test` 将被定向到`index.php`.

```
RewriteRule ^((?!test).)*$ index.php [QSA,L] 
```

我需要添加更多的子文件夹，例如等`test1`，`test2`以便我可以访问 url`\test1`等`\test2`。

**重写规则**

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^((?!test).)*$ index.php [QSA,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:06:07.613

多种方式之一：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !^/test/
RewriteCond %{REQUEST_URI} !^/test1/
RewriteCond %{REQUEST_URI} !^/test2/
RewriteRule ^(.*)$ index.php [QSA,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:06:34.020

好...

您已经拥有的内容也匹配`/test1`，`/test2`因为您拥有的正则表达式仅检查某些内容是否不以 开头，并且`/test`两者都以.`/test1``/test2``/test`

但是，如果您希望它检查多个并非都以相同内容开头的文件夹，请`|`在表达式中使用。假设您还想排除`/blah`and `/bleh`：

```
RewriteRule ^((?!test|blah|bleh).)*$ index.php [QSA,L] 
```

# sdk - “这是一个'在线'格式结构。”究竟是什么意思？

> ID：14303193
> 
> 赞同：2
> 
> 时间：2013-01-13T11:57:42.310
> 
> 标签：sdk, coding-style, comments

以下代码摘自 Windows SDK 中的 in6addr.h：

```
//
// IPv6 Internet address (RFC 2553)
// This is an 'on-wire' format structure.
//
typedef struct in6_addr {
    union {
        UCHAR       Byte[16];
        USHORT      Word[8];
    } u;
} IN6_ADDR, *PIN6_ADDR, FAR *LPIN6_ADDR; 
```

我不是以英语为母语的开发人员。所以请原谅我问了一个看起来很愚蠢的问题：

**“这是一个'在线**'格式结构”究竟是什么意思。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T12:00:15.170

这意味着它描述了信息在传输时的样子。

# c++ - clang_complete 没有完成构造函数

> ID：14303195
> 
> 赞同：3
> 
> 时间：2013-01-13T11:57:45.837
> 
> 标签：c++, vim, clang-complete

考虑这个源片段：

```
class Z
{
  public:
    Z(int){}
    void foo() {}
}; 
```

这按预期工作：

```
int main()
{
  Z a(1);
  a.        // <- at this point, a list of functions appears in a menu 
```

这根本不起作用：

```
 Z b       // <- at this point, nothing happens if I press <Tab> or C-X C-U
            // except a "pattern not found" message
  Z b(      // <- same here 
```

但这确实：

```
 Z b = Z   // a list of constructors appears in a menu when <Tab> is pressed 
```

是否可以设置 clang_complete 使得构造函数完成在两种情况下都有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T16:35:24.333

这是`clang`（和`libclang`）问题，而不是 Vim 的插件`clang_complete`问题。

`clang`AFAIK 现在处于积极开发阶段，因此，您可以在[http://llvm.org/bugs](http://llvm.org/bugs)提交错误报告。但是，我自己在一个多月前提交了几个与代码完成相关的错误（例如[这个](http://goo.gl/jR5h7)），但仍然没有解决。

当我需要获取可用的构造函数列表时，我会编写类似你的代码`Z b = Z`，选择构造函数，然后转换`Z b = Z`为我真正需要的东西。不是很好，但总比没有好。

# c - TCP 100% 可靠吗？

> ID：14303198
> 
> 赞同：3
> 
> 时间：2013-01-13T11:58:04.683
> 
> 标签：c, linux, tcp

虽然 TCP 是一个提供重传和确认机制的可靠协议，但我认为它不是 100% 可靠的，因为 send() 的成功返回并不能确保数据已经到达目标端点，仅意味着数据被复制到内核缓冲区。

应用程序是否有任何机制可以知道数据是否已成功到达目的地？

一种可能的解决方案是在应用层中建立一些确认机制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T12:06:19.337

TCP 是可靠的，因为发送的消息要么

1.  在发送时收到（相同的顺序，相同的内容）；假设内置校验和不会发生失败，它可能会失败，因为它只有 16 位**或**
2.  根本收不到

使用 TCP，接收到的消息绝不应该是乱序或丢失中间消息。

要区分情况 1 和 2，您应该实现确认机制。还可以确保优于 CRC 消息完整性的一个好主意是发回传入消息的 MD5 或其他散列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T12:03:43.927

您可以构建自己的应用程序，由接收者向发送者回复成功消息，如果没有收到成功消息，则根据需要重新发送。

在 Java 中，JMS 做这项工作，我相信一些现有的库应该在 C 中做同样的事情。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-13T12:02:33.700

当然 TCP 是可靠的协议，如果你想知道通过网络端口发送和接收的数据，使用 Wireshark 软件捕获发送和接收的数据。通过wireshark，您可以追踪数据包。

# mysql - 我的光标程序不起作用

> ID：14303200
> 
> 赞同：5
> 
> 时间：2013-01-13T11:59:01.687
> 
> 标签：mysql, stored-procedures

我有下一个程序：

```
BEGIN
  DECLARE retribAn INTEGER DEFAULT 0; 
  DECLARE cPost INTEGER(11);     
  DECLARE done INT DEFAULT 0;
  DECLARE curTipo CURSOR FOR
          SELECT RETRIBUCION_ANUAL*1.05 AS RET_AN
          FROM EMPLEADOS  
          WHERE ID_CPOSTAL%2=0;
  DECLARE CONTINUE HANDLER FOR NOT FOUND SET done=1;
  OPEN curTipo;
  REPEAT
    FETCH curTipo INTO retribAn, cPost;
    IF NOT done THEN       
      UPDATE EMPLEADOS 
      SET RETRIBUCION_ANUAL=retribAn  
      WHERE ID_CPOSTAL%cPost;  
    END IF;
  UNTIL done END REPEAT;
  CLOSE curTipo;    
END 
```

当我执行它时，sql管理器输出：

> FETCH 变量的数量不正确

我不懂为什么。

我是mysql的菜鸟=D，对不起我的英语。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T12:03:17.090

您在游标查询中仅选择一列并将数据提取到 FETCH 中的两个变量中

尝试这个

```
BEGIN
  DECLARE retribAn INTEGER DEFAULT 0; 
  DECLARE cPost INTEGER(11);     
  DECLARE done INT DEFAULT 0;
  DECLARE curTipo CURSOR FOR
          SELECT RETRIBUCION_ANUAL*1.05 AS RET_AN
          FROM EMPLEADOS  
          WHERE ID_CPOSTAL%2=0;
  DECLARE CONTINUE HANDLER FOR NOT FOUND SET done=1;
  OPEN curTipo;
  REPEAT
    FETCH curTipo INTO retribAn; --remove cPost here
    IF NOT done THEN       
      UPDATE EMPLEADOS 
      SET RETRIBUCION_ANUAL=retribAn  
      WHERE ID_CPOSTAL%cPost = 0;  --change this to value you want to check
    END IF;
  UNTIL done END REPEAT;
  CLOSE curTipo;    
END 
```

# jquery - 接受政策隐私，然后使用 jQuery 启用表单提交

> ID：14303202
> 
> 赞同：1
> 
> 时间：2013-01-13T11:59:05.587
> 
> 标签：jquery, forms

> **可能重复：**
> [禁用表单提交，直到（两个）复选框被选中](https://stackoverflow.com/questions/8828006/disable-form-submit-until-two-checkboxes-are-checked)

必须强制标记“我接受隐私政策”按钮以提交表格。

```
<form id="form" action="">
  <label for="accept">Accept Policy Privacy</label>
  <input id="accept" type="checkbox" > 
  <input type="submit" id="Send" value="Send" > 
</form> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:05:48.137

在 HTML5 中，您可以使用 required 属性：（[小提琴）](http://jsfiddle.net/DJDavid98/m86nz/)

```
 <input id="accept" type="checkbox" required> 
```

如果你想要一个 jQuery 解决方案，在这里：（[小提琴）](http://jsfiddle.net/DJDavid98/LPhGr/)

```
$('#form').submit(function(event){
    event.preventDefault();
    if ( $('#accept').is(':checked') ){
        $(this).submit();
    }
    else {
        alert('You must accept the policy to continue!')
    }
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T12:08:02.983

尝试只做modyfi：

```
<form id="form" action="">
  <label for="accept">Accept Policy Privacy</label>
  <input id="accept" type="checkbox" required="required" aria-required="true"> 
  <input type="submit" id="Send" value="Send" > 
</form> 
```

它可以在现代浏览器中使用，但对于较旧的浏览器（尤其是 ie），您将需要一些 Js 在发送之前对其进行检查：

```
$(document).ready(function(){
    $("#Send").click(function(){
        if(! $("#accept").attr("checked")) {
             alert ("You must accept the Policy Privacy");
             return false;}
    })
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T12:01:33.067

```
$(function(){
  $('input#send', this).attr('disabled', 'disabled');
  $('input#accept').click(function(){
    var disabled=$('input#send').attr('disabled'); 
    if(disabled) {
      $('input#send').attr('disabled', false);
    }else{
      $('input#send').attr('disabled', 'disabled');
    }
  }); 
}); 
```

你必须先搜索，在stackoverflow中有类似的问题

[禁用表单提交，直到（两个）复选框被选中](https://stackoverflow.com/questions/8828006/disable-form-submit-until-two-checkboxes-are-checked)

# ruby-on-rails - 从头开始编写用户身份验证或使用 Gem - Rails？

> ID：14303206
> 
> 赞同：3
> 
> 时间：2013-01-13T11:59:37.630
> 
> 标签：ruby-on-rails, authentication

我很想听听你对你喜欢什么的想法和意见，为什么？如果您计划在 Rails 网站上为您的 ruby​​ 编写用户身份验证系统，您会从下到上编写，还是会使用像 authlogic、devise、restful_ authentication 等的 gem？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T13:07:56.450

这取决于您想要达到的目标。

如果您知道自己在做什么并且只需要功能，为什么要重新发明轮子？我使用了很多[设计，并认为它是一个完美的标准认证系统。](https://github.com/plataformatec/devise)

但是，如果您仍在学习 Rails 或只是了解身份验证系统的原理，最好先从头开始自己构建一个。正如[设计文档](http://devise.plataformatec.com.br)中所说：

> 如果您正在构建您的第一个 Rails 应用程序，我们建议您不要使用 Devise。设计需要对 Rails 框架有很好的理解。在这种情况下，我们建议您从头开始一个简单的身份验证系统，今天我们有两个资源：
> 
> Michael Hartl 的在线书籍：[http](http://railstutorial.org/chapters/modeling-and-viewing-users-two#top)
> ://railstutorial.org/chapters/modeling-and-viewing-users-two#top Ryan Bates ' Railscast：[http](http://railscasts.com/episodes/250-authentication-from-scratch)
> 
> ://railscasts.com/episodes/250-authentication-from-scratch 一旦你巩固了对 Rails 和身份验证机制的理解，我们向你保证，使用 Devise 会非常愉快。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T13:21:49.257

我建议您使用 Devise GEM，因为没有必要重新发明轮子，而且 Devise 具有很大的灵活性和可扩展性。

查看[https://github.com/plataformatec/devise以了解 gem 包含，您可以在](https://github.com/plataformatec/devise)[https://github.com/plataformatec/devise/wiki/_pages](https://github.com/plataformatec/devise/wiki/_pages)查看 HOW TO

祝你的项目好运。

# c# - 单眼快照

> ID：14303208
> 
> 赞同：1
> 
> 时间：2013-01-13T11:59:49.193
> 
> 标签：c#, opencv, emgucv

我已经使用以下代码检测到眼睛：

```
MCvAvgComp[][] eyes = gray1.DetectHaarCascade(eye, 1.1, 1, 
       Emgu.CV.CvEnum.HAAR_DETECTION_TYPE.DO_CANNY_PRUNING, new Size(20, 20));
gray1.ROI = Rectangle.Empty;
foreach (MCvAvgComp eyesnap in eyes[0])
{
    Rectangle eyeRect = eyesnap.rect;
    eyeRect.Offset(f.rect.X, f.rect.Y);
    nextFrame.Draw(eyeRect, new Bgr(Color.Green), 2);
} 
```

我想在不同的图片框中拍摄两只眼睛的快照。任何人都可以帮助我了解如何拍摄单个眼睛的快照吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:30:13.130

您可以使用*GetSubRect*函数来获取子图像：

```
IImage eyeImg = nextFrame.GetSubRect(eyeRect); 
```

或者

```
Bitmap eyeBmp = nextFrame.GetSubRect(eyeRect).Bitmap; 
```

**编辑**

为左眼加载*HaarCascade ：*

```
HaarCascade leftEye = new HaarCascade("leftEye.xml");

MCvAvgComp[][] foundLeftEyes = gray1.DetectHaarCascade(leftEye, 1.1, 1, 
       Emgu.CV.CvEnum.HAAR_DETECTION_TYPE.DO_CANNY_PRUNING, new Size(20, 20));
gray1.ROI = Rectangle.Empty;
foreach (MCvAvgComp eyesnap in foundLeftEyes[0])
{
    Rectangle eyeRect = eyesnap.rect;
    eyeRect.Offset(f.rect.X, f.rect.Y);
    nextFrame.Draw(eyeRect, new Bgr(Color.Green), 2);
} 
```

右眼也一样...

例如，您可以使用：

[左眼 HaarCascade](https://github.com/nzaillian/Qt-OpenCV-Integration-Demo/blob/master/resources/eye_left.xml)和[右眼 HaarCascade](https://raw.github.com/nzaillian/Qt-OpenCV-Integration-Demo/master/resources/eye_right.xml)

# delphi - 获取变量

> ID：14303213
> 
> 赞同：3
> 
> 时间：2013-01-13T12:00:22.643
> 
> 标签：delphi, variables

我获得了一个关于如何在创建主表单之前创建登录屏幕的示例。但是我不知道如何在登录屏幕关闭之前获取变量。我正在尝试传递变量

```
SelectedUserName : String;
SelectedUserIdNo, SelectedCoyId : Integer; 
```

从 loginfrm 到主窗体进行进一步处理。

有任何想法吗。

提前致谢。

这是主要代码：

```
program Pac;

{$R *.res}

uses
  ExceptionLog, Forms,
  MainForm in 'Main\MainForm.pas' {MainFormFrm} ,
  Datamodule in 'Main\Datamodule.pas' {DataModuleFrm: TDataModule} ,
  Login in 'Security\Login.pas' {LoginFrm};

begin
  if tLoginFrm.Execute then
  begin
    Application.Initialize;
    Application.MainFormOnTaskbar := True;
    Application.CreateForm(TMainFormFrm, MainFormFrm);
    Application.CreateForm(TDataModuleFrm, DataModuleFrm);
    Application.Run;
  end
  else
  begin
    Application.MessageBox
      ('You are not authorized to use the application. The password is "delphi".',
      'Password Protected Delphi application');
  end;
end. 
```

我的登录代码是：

```
unit Login;

interface

uses
  Windows, .. .. ..;

type
  TLoginFrm = class(TForm)
    Label1: TLabel;
    ButtOk: TButton;
    ButtCancel: TButton;
    cxMaskEditUserId: TcxMaskEdit;
    cxMaskEditPw: TcxMaskEdit;
    ButtReset: TButton;
    Label2: TLabel;
    QueryUser: TMSQuery;
    MSConnectionMain: TMSConnection;
    procedure ButtOkClick(Sender: TObject);
    procedure CheckMenuAccess;
    procedure ButtResetClick(Sender: TObject);
    procedure FormShow(Sender: TObject);
  public
    SelectedUserName: String;
    SelectedUserIdNo, SelectedCoyId: Integer;
    { Public declarations }
    class function Execute: boolean;
  end;

implementation

uses DataModule, MainForm, OutletListing;

{$R *.dfm}

class function TLoginFrm.Execute: boolean;
begin
  with TLoginFrm.Create(nil) do
    try
      Result := ShowModal = mrOk;
    finally
      Free;
    end;
end;

procedure TLoginFrm.FormShow(Sender: TObject);
begin
  MSConnectionMain.Connected := True;
end;

procedure TLoginFrm.ButtOkClick(Sender: TObject);
begin
  { Verify users are in list of users }
  With QueryUser Do
  Begin
    Active := False;
    if cxMaskEditUserId.EditValue = Null then
      ParamByName('UserId').Clear
    ELSE
      ParamByName('UserId').AsString := cxMaskEditUserId.EditValue;
    if cxMaskEditUserId.EditValue = Null then
      ParamByName('Userpassword').Clear
    ELSE
      ParamByName('Userpassword').AsString := cxMaskEditPw.EditValue;
    Active := True;
    If (FieldByName('UserId').IsNull) or
      (cxMaskEditUserId.EditValue = Null) Then
    Begin
      cxMaskEditUserId.EditValue := Null;
      cxMaskEditPw.EditValue := Null;
      cxMaskEditUserId.SetFocus;
    End
    Else
    Begin
      OutletListingFrm := TOutletListingFrm.Create(Self);
      SelectedUserIdNo := FieldByName('UserIdNo').AsInteger;
      SelectedUserName := FieldByName('UserName').AsString;
      OutletListingFrm.SelectedUserId := FieldByName('UserIdNo').AsInteger;
      IF OutletListingFrm.ShowModal = mrOk THEN
      BEGIN
        SelectedCoyId := FieldByName('CoyId').AsInteger;
        ModalResult := mrOk;
      END
      ELSE
        ModalResult := mrCancel;
      OutletListingFrm.Free;
    End;

 End;

 end. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T12:11:29.487

创建一条记录，其中包含要从登录表单返回的信息：

```
type
  TLoginInfo = record
    SelectedUserName: string;
    SelectedUserIdNo: Integer;
    SelectedCoyId: Integer;
  end; 
```

`Execute`然后从登录类的方法中返回这样一条记录：

```
function Execute(out LoginInfo: TLoginInfo): Boolean; 
```

如果登录成功，那么`Execute`方法的实现需要填写这些细节。

然后将信息传递给主窗体。您不能在对 的调用中这样做`Application.CreateForm`。因此，您需要一个不同的方法`TMainFormFrm`，可以在创建主表单后调用。该方法将接收`TLoginInfo`成功登录返回的记录。

所以`TMainFormFrm`你会添加一个名为的公共方法`InitialiseWithLoginInfo`，比如说。

```
procedure InitialiseWithLoginInfo(const LoginInfo: TLoginInfo); 
```

然后您的 .dpr 文件将如下所示：

```
var
  LoginInfo: TLoginInfo;

begin
  if tLoginFrm.Execute(LoginInfo) then
  begin
    Application.Initialize;
    Application.MainFormOnTaskbar := True;
    Application.CreateForm(TMainFormFrm, MainFormFrm);
    MainFormFrm.InitialiseWithLoginInfo(LoginInfo);
    Application.CreateForm(TDataModuleFrm, DataModuleFrm);
    Application.Run;
  end
  else
  begin
    Application.MessageBox
      ('You are not authorized to use the application. The password is "delphi".',
      'Password Protected Delphi application');
  end;
end. 
```

# ruby - Ruby 块 - NoMethodError：未定义的方法 `-' for nil:NilClass

> ID：14303218
> 
> 赞同：2
> 
> 时间：2013-01-13T12:01:14.973
> 
> 标签：ruby, ruby-on-rails-3, syntax, block

开始使用 Rails，我被块操作困住了。我想通过计算两个日期时间字段之间的差异来遍历模型并更新新字段的整数值。在控制台中执行此操作：

```
MyModel.all.each do |m|
  m.new_integer_field = m.existing_datetime_field - m.parent_object.existing_datetime_field
  m.save!
end 
```

结果是

```
 NoMethodError: undefined method `-' for nil:NilClass 
```

如果我这样做，它适用于一张唱片：

```
m = MyModel.find(1)
m.new_integer_field = m.existing_datetime_field - m.parent_object.existing_datetime_field
m.save 
```

我想这是一个基本的语法问题，但找不到明显的解释。很高兴得到一些指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:27:11.807

其中一个实例中的 m.existing_datetime_field 为 nil，因此该操作不起作用。如果不确定，您需要检查 nil 值：

```
MyModel.all.each do |m|
  unless m.existing_datetime_field == nil
    m.new_integer_field = m.existing_datetime_field - m.parent_object.existing_datetime_field
  m.save!
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T19:13:26.750

正如我已经说过的，实例的属性之一可能是`nil`.

`#inspect`要在实例上检查此用法：

```
MyModel.all.each {|i| puts i.existing_datetime_field.inspect } 
```

似乎这些对象之一是`nil`然后`-`方法未定义。

正如您所建议的，您可以在计算差异之前检查操作数。

# gwt - 进行 RPC 调用时出现序列化异常

> ID：14303223
> 
> 赞同：1
> 
> 时间：2013-01-13T12:02:00.683
> 
> 标签：gwt, gwt-2.5

我创建了一个非常基本的应用程序。我只有一个服务类和一个相应的 Async 类，它只包含 Java 类型而没有自定义类。但我仍然得到序列化异常。

我的服务类看起来像这样。

```
public interface MyService extends RemoteService {
  public String getName();
  public Object getAdditionalDetials(ArrayList<String> ids);
  public Date getJoiningDate();
} 
```

我的异步界面看起来像这样

```
public interface MyServiceAsync {
  public void getName(AsyncCallback<String> callback);
  public void getAdditionalDetials(ArrayList<String> ids, AsyncCallback<Object> callback);
  public void getJoiningDate(AsyncCallback<Date> callback);
} 
```

我知道我犯了一些愚蠢的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:12:52.803

我对 gwt rpc 和序列化机制很幼稚，但会尝试回答您的问题。

每当您编写涉及 RPC 的类时，GWT 都会创建一个`Serialization Policy File`. 序列化策略文件包含可以序列化的允许类型的白名单。

在您的 Service 方法中，如果您提到和引用的所有类型都实现了[`IsSerializable`](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/rpc/IsSerializable.html). 在您的情况下，您使用了以下两种方法，

```
public String getName();
public Date getJoiningDate(); 
```

在这里，您使用`String`and`Date`作为您的返回类型，因此它被添加到您的`Serialization Policy File`. 但是在下面的方法中，他们存在一个问题，

```
public Object getAdditionalDetials(Arraylist<String> ids); 
```

在这里您使用`ArrayList and String`了这不是问题，它们将被添加到您的白名单中，但问题是您提到返回类型为`Object`. 在这里，GWT 编译器不知道要添加什么类型`whitelist or Serialization Policy`，因此它不会通过您的 RPC 调用。解决方案是使用提及实现的类而[`IsSerializable`](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/rpc/IsSerializable.html)不是提及类型的返回类型`Object`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T05:10:04.547

FWIW，我遇到了这个问题，但我的“对象”类型**隐藏在泛型类后面**。

因此，如果您的 rpc 方法之一涉及一个类：

```
class Xxx<T> implements IsSerializable {... 
```

它需要更改为：

```
class Xxx<T extends IsSerializable> implements IsSerializable {... 
```

# html - 将侧边栏一分为二

> ID：14303230
> 
> 赞同：1
> 
> 时间：2013-01-13T12:02:37.903
> 
> 标签：html, css, menu, split, sidebar

希望大家能帮忙:)

我的网站上有一个侧边栏，但是因为我不希望它被折叠起来，所以我想将这 10 li 侧边栏分成两个 5 li 侧边栏，它们之间有一个 div，使用 Jquery 显示内容。我已经对网站进行了编码，所以它看起来不错，但是我需要侧边栏充当一个菜单而不是两个，因此一次只能进行一个选择，一个当前课程等。有人知道该怎么做吗？我的标记如下：

```
<div id="sidebar">
<ul class="list2"><em>
    <li class="current1"><a href="#tab1">Bilgorajski</a></li>
    <li><a href="#tab2">Rzeszowski</a></li>
    <li><a href="#tab3">Kasuby</a></li>
    <li><a href="#tab4">Mazur</a></li>
    <li><a href="#tab5">Lubelski</a></li>
    </em>   
</ul>
</div>

<div id="repcontent">

</div>

<div id="sidebar">
<ul class="list2"><em>
    <li><a href="#tab6">Powislainski</a></li>
    <li><a href="#tab7">Podhalainski</a></li>
    <li><a href="#tab8">Kujuwiak Oberek</a></li>
    <li><a href="#tab9">Krakowiak</a></li>
    <li><a href="#tab10">Szlansk</a></li>
    </em>   
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:46:32.063

You just have to remove tags that commented in the following code:

```
<div id="sidebar">
<ul class="list2"><em>
    <li class="current1"><a href="#tab1">Bilgorajski</a></li>
    <li><a href="#tab2">Rzeszowski</a></li>
    <li><a href="#tab3">Kasuby</a></li>
    <li><a href="#tab4">Mazur</a></li>
    <li><a href="#tab5">Lubelski</a></li>
    </em>   
</ul>
<!-- </div> -->

<div id="repcontent">

</div>

<!-- <div id="sidebar"> -->
<ul class="list2"><em>
    <li><a href="#tab6">Powislainski</a></li>
    <li><a href="#tab7">Podhalainski</a></li>
    <li><a href="#tab8">Kujuwiak Oberek</a></li>
    <li><a href="#tab9">Krakowiak</a></li>
    <li><a href="#tab10">Szlansk</a></li>
    </em>   
</ul>
</div> 
```

**Edited:** To get three columns layout, I will use [zurb-foundation](/questions/tagged/zurb-foundation "show questions tagged 'zurb-foundation'") CSS framework as follows:

```
<body>
<div id="header" class="row">
 <div class="twelve columns">
Header
 </div>
</div>
<div class="row">
 <div id="left-sidebar" class="three columns">
   <ul class="list2"><em>
    <li class="current1"><a href="#tab1">Bilgorajski</a></li>
    <li><a href="#tab2">Rzeszowski</a></li>
    <li><a href="#tab3">Kasuby</a></li>
    <li><a href="#tab4">Mazur</a></li>
    <li><a href="#tab5">Lubelski</a></li>
    </em>   
   </ul>
  </div>
 <div id="repcontent" class="six columns">
  Middle contents
 </div>
 <div id="right-sidebar" class="three columns">
 <ul class="list2"><em>
    <li><a href="#tab6">Powislainski</a></li>
    <li><a href="#tab7">Podhalainski</a></li>
    <li><a href="#tab8">Kujuwiak Oberek</a></li>
    <li><a href="#tab9">Krakowiak</a></li>
    <li><a href="#tab10">Szlansk</a></li>
    </em>   
  </ul>

 </div>
</div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:19:23.370

放轻松..使用

```
-webkit-column-count: 2; 
```

这会将您的内容分成两列。或者，如果您想分别在两侧显示侧边栏，则使用 2 个单独的分区和**float:left|right;** 财产。或者您可以使用 JQuery 进行查询。

```
 <body>
  <div class="container">
 <div class="sidebar1">
<ul class="nav">
  <li><a href="#">Link one</a></li>
  <li><a href="#">Link two</a></li>
  <li><a href="#">Link three</a></li>
  <li><a href="#">Link four</a></li>
</ul>
<p>  </p>
<!-- end .sidebar1 --></div>
 <div class="content">

<!-- end .content --></div>
<div class="sidebar2">
<!-- end .sidebar2 --></div>
<!-- end .container --></div>
</body> 
```

css

```
 .sidebar1 {
float: left;
width: 20%;
background-color: #93A5C4;
padding-bottom: 10px;
   }
 .content {
padding: 10px 0;
width: 60%;
float: left;
 }
 .sidebar2 {
float: left;
width: 20%;
background-color: #93A5C4;
padding: 10px 0;
} 
```

试试这个代码。这可以澄清你的问题。

# ruby - 仅在此类中救援 NameError

> ID：14303234
> 
> 赞同：0
> 
> 时间：2013-01-13T12:03:03.590
> 
> 标签：ruby, exception, rescue

我有一个 Ruby 脚本，我正在这样做

```
module MyModule
    class MyClass
        def do_something
            begin
                deployer_object = Object.const_get("MyModule").const_get("#{class_name}Deployer").new(@config, @directory).deploy
            rescue NameError => e
                MyModule::Logger.error("Error loading the deployer #{class_name}. This deployer it's not installed!")
            end
        end
    end
end 
```

现在它拯救了这个类中的所有 NameError 异常以及第五行中加载的异常。我怎样才能使它只挽救 MyModule::MyClass 中的异常，而不是在第 5 行初始化的异常？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:14:34.077

您无需`begin`再次将所有内容打包在 a 中。这以相同的方式工作：

```
module MyModule
    class MyClass
        def do_something
            deployer_object = Object.const_get("MyModule").const_get("#{class_name}Deployer").new(@config, @directory).deploy
        rescue NameError => e
            MyModule::Logger.error("Error loading the deployer #{class_name}. This deployer it's not installed!")
        end
    end
end 
```

我不完全理解你的问题。你想拯救什么？您不想从 `Deployer's`初始化程序中捕获异常吗？

# ruby - Ruby on rails - Apache 配置文件错误

> ID：14303237
> 
> 赞同：0
> 
> 时间：2013-01-13T12:03:14.977
> 
> 标签：ruby, ruby-on-rails-3, apache

我正在阅读一本关于“Ruby on Rails”的书，现在我必须使用 Apache 和 Passenger 部署我的应用程序。一切似乎都已正确安装，但是当我最终在 Apache 配置文件中添加以下代码时：

```
<VirtualHost *:80>
   ServerName depot.yourhost.com
   DocumentRoot /home/gotqn/Aptana Projects/depot/public/

   <Directory /home/gotqn/Aptana Projects/depot/public>
      AllowOverride all
      Options -MultiViews
      Order allow,deny
      Allow from all
   </Directory>
</VirtualHost> 
```

并尝试重新启动 Apache：

> $ sudo apachectl 重启

我收到以下错误：

> /etc/apache2/apache2.conf 第 245 行的语法错误：
> 
> DocumentRoot 有一个参数，文档树的根目录
> 
> 操作“重新启动”失败。
> 
> Apache 错误日志可能包含更多信息。

第 245 行是指以下行：

```
DocumentRoot /home/gotqn/Aptana Projects/depot/public/ 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:43:53.817

您在目录路径中使用了空格，您需要转义空格或创建不带空格的路径。**不要将其添加到 apache2.conf 中，而是在/etc/apache2/site-available**中创建一个文件（称为 newsite 或其他内容）并在该文件中写入相同的内容。然后运行以下命令：

```
 sudo a2ensite newsite 
```

然后重新启动服务器并将您的服务器名称添加到 /etc/hosts

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T13:44:06.233

此行不允许有空格，只需将整个路径放在双引号中即可

```
DocumentRoot "/home/gotqn/Aptana Projects/depot/public/" 
```

# php - 使用贝宝订阅按钮进行定期付款时跟踪用户活动

> ID：14303240
> 
> 赞同：1
> 
> 时间：2013-01-13T12:03:34.550
> 
> 标签：php, payment-gateway, paypal-ipn, paypal-subscriptions

我有一个有效的 IPN 脚本。它正在根据登录的用户正确更新数据库中的数据。因此，一旦付款成功，用户帐户将升级为付费会员。而且由于我使用的是贝宝订阅按钮。因此，从下个月开始计费流程将自动进行。
所以，我认为（我不确定），Paypal 不会与存储在我的服务器中的 IPN 脚本进行交互。

所以，我的问题是：-

如果我对 IPN 脚本的假设是正确的，那么我如何跟踪哪个用户为下一个计费周期付款？（我不想参与手动工作，例如从我的 Paypal 商家帐户跟踪用户付款信息。我只想通过脚本来完成。因此，一旦从用户 Paypal 帐户中扣除订阅金额，他的帐户就在我的网站将升级为付费会员。）

作为参考，我想通过我的 ipn 脚本更新什么。下面是我的 IPN 脚本。

```
<?php

// STEP 1: Read POST data

// reading posted data from directly from $_POST causes serialization 
// issues with array data in POST
// reading raw POST data from input stream instead. 
$raw_post_data = file_get_contents('php://input');
$raw_post_array = explode('&', $raw_post_data);
$myPost = array();
foreach ($raw_post_array as $keyval) {
  $keyval = explode ('=', $keyval);
  if (count($keyval) == 2)
     $myPost[$keyval[0]] = urldecode($keyval[1]);
}
// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';
if(function_exists('get_magic_quotes_gpc')) {
   $get_magic_quotes_exists = true;
} 
foreach ($myPost as $key => $value) {        
   if($get_magic_quotes_exists == true && get_magic_quotes_gpc() == 1) { 
        $value = urlencode(stripslashes($value)); 
   } else {
        $value = urlencode($value);
   }
   $req .= "&$key=$value";
}

// STEP 2: Post IPN data back to paypal to validate

$ch = curl_init('https://www.sandbox.paypal.com/cgi-bin/webscr');
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Connection: Close'));

// In wamp like environments that do not come bundled with root authority certificates,
// please download 'cacert.pem' from "http://curl.haxx.se/docs/caextract.html" and set the directory path 
// of the certificate as shown below.
// curl_setopt($ch, CURLOPT_CAINFO, dirname(__FILE__) . '/cacert.pem');
if( !($res = curl_exec($ch)) ) {
    // error_log("Got " . curl_error($ch) . " when processing IPN data");
    curl_close($ch);
    exit;
}
curl_close($ch);

// STEP 3: Inspect IPN validation result and act accordingly

if (strcmp ($res, "VERIFIED") == 0) {
    // check whether the payment_status is Completed
    // check that txn_id has not been previously processed
    // check that receiver_email is your Primary PayPal email
    // check that payment_amount/payment_currency are correct
    // process payment

    // assign posted variables to local variables
    $item_name = $_POST['item_name'];
    $item_name=strip_tags($item_name);
    $item_number = strip_tags($_POST['item_number']);
    $payment_status = strip_tags($_POST['payment_status']);
    $payment_amount = strip_tags($_POST['mc_gross']);
    $payment_currency = strip_tags($_POST['mc_currency']);
    $txn_id = strip_tags($_POST['txn_id']);
    $user_id=strip_tags($_POST['custom']);
    $receiver_email = strip_tags($_POST['receiver_email']);
    $payer_email = strip_tags($_POST['payer_email']);
    //if(strcmp($receiver_email, "h_1356964205_per@gmail.com") == 0)
    //{
        /*if($payment_status != "Completed")
        {
            $msg="Transaction with id ".$txn_id." status is not completed..";
            mail("support@example.com","Transaction with the same id already exists in database.",$msg,"From:admin@leadstool.net");
    exit();

        }*/
        include_once('connection.php');
        //$user_id=getfield('id');
        // Query to check the duplicate transaction id.
        $query="SELECT `User_id` FROM `transaction` WHERE `Transaction_id`='".mysql_real_escape_string($txn_id)."'";
        if($query_run=mysql_query($query))
        {
            $num=mysql_num_rows($query_run);
            if($num == 0)
            {
                // Query to check the number of times for subscription.
                $query="SELECT `Transaction_id` FROM `transaction` WHERE `User_id`='".mysql_real_escape_string($user_id)."'";
                if($query_run=mysql_query($query))
                {
                    $num=mysql_num_rows($query_run);
                    if($num>=1)
                    {
                        $type_of_subscription=2;// This 2 will denote the user is rnewing his account
                    } else {
                        $type_of_subscription=1;// Here 1 is denoting that user has subscribed for the 1st time.
                        }
                    $query="SELECT `B_ad_no_paid_user`,`T_ad_no_paid_user` FROM `WebsiteContent` WHERE `Creator_id`='1' ORDER BY `Date_of_update` DESC LIMIT 1";
                    if($query_run=mysql_query($query))
                    {
                        while($rows=mysql_fetch_array($query_run))
                        {
                            $banner_ad_limit=$rows['B_ad_no_paid_user'];
                            $text_ad_limit=$rows['T_ad_no_paid_user'];
                        }
                    }   
                }// Query to check the number of times for subscription ends here.
        //Query to insert the transaction details in database.
        $query="INSERT INTO `transaction` VALUES('".$txn_id."','".$user_id."','".$payment_amount."','".$type_of_subscription."','".$payment_status."','1','".$payer_email."',now())";
        if($query_run=mysql_query($query))
        {
            $query="UPDATE `user` SET `User_type`='1', `Banner_ad_limit`='".$banner_ad_limit."', `Text_ad_limit`='".$text_ad_limit."' WHERE `id`='".mysql_real_escape_string($user_id)."'";
            if($query_run=mysql_query($query))
            {
                $msg="Thank you for subscribing to our service. Your Transaction Id is $txn_id.";
            mail("$payer_email","Subscription confirmation mail",$msg,"From:admin@example.com");
            } else {
                $msg="Thank you! Your transaction is successful with transaction id:- $txn_id. But we are unable to upgrade your profile right now. Please contact admin to resolve the problem.";
                mail("$payer_email","Subscription confirmation mail",$msg,"From:admin@example.com");
                }

        } else {
            $msg="For Transaction with id ".$txn_id." failed to update in database.";
            mail("support@example.com","Unable to update the details in database.",$msg,"From:admin@example.com");
    exit();
            }
        // Query to insert data in database ends here.

            } else {
                $msg="Transaction with id $txn_id already exists in database. Admin please verify the details manually and contact the user. Email id of user is: $payer_email";
                mail("support@example.com","Transaction with the same id already exists in database.",$msg,"From:admin@example.com");
    exit();
        }// Query to check the duplicate transaction id ends here.
        }

    //} else {
        //$msg="Investigate the reason why the registered email id with paypal does not matched with this id $receiver_email";
        //mail("support@example.com","Receiver email address do not matched",$msg,"From:admin@example.com");
    //exit();
        //}

} else if (strcmp ($res, "INVALID") == 0) {
    // log for manual investigation

    $msg="Dear administrator please verify the reason why the transaction failure occures. The details is:- $res";
    mail("support@example.com","IPN interaction was not verified.",$msg,"From:admin@example.com");
    exit();
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T13:33:43.137

这可以使用 IPN 和 notify_url 来实现。

这是一个很好的教程：

[http://www.techrepublic.com/article/handling-recurring-payments-with-paypal-subscriptions-and-ipn/5331883](http://www.techrepublic.com/article/handling-recurring-payments-with-paypal-subscriptions-and-ipn/5331883)

# sql - 标量值函数不返回任何内容

> ID：14303241
> 
> 赞同：1
> 
> 时间：2013-01-13T12:03:37.537
> 
> 标签：sql, sql-server, tsql

> **可能重复：**
> [SQL 存储过程参数已损坏？](https://stackoverflow.com/questions/5380350/sql-stored-procedure-parameters-being-corrupted)

我陷入了一个简单的 SQL Server 标量值函数返回 0 的情况。谁能告诉我我做错了什么。

```
set ANSI_NULLS ON
set QUOTED_IDENTIFIER ON
go

ALTER FUNCTION [dbo].[OpeningBalance]
(
    @AccountCode AS varchar,
    @FromDate AS datetime
)
RETURNS numeric
AS
BEGIN
    DECLARE @Balance AS numeric

    SELECT     
      @Balance = SUM(Debit) - SUM(Credit)
    FROM 
    (
        SELECT     
            CASE 
               WHEN Debit - Credit > 0 THEN Debit - Credit 
               ELSE 0 
            END AS Debit, 
            CASE 
              WHEN Credit - Debit > 0 THEN Credit - Debit 
              ELSE 0 
            END AS Credit
        FROM
        (
             SELECT     
               SUM(VoucherDetail.Debit) AS Debit, 
               SUM(VoucherDetail.Credit) AS Credit
             FROM          VoucherMaster AS VoucherMaster 
             INNER JOIN VoucherDetail AS VoucherDetail 
                     ON VoucherMaster.ID = VoucherDetail.VoucherMasterID
             WHERE (VoucherDetail.AccountCode = @AccountCode) 
               AND (VoucherMaster.VoucherDate < @FromDate)
        ) AS Data
        UNION ALL
        SELECT     
          CASE 
            WHEN OpeningBalance > 0 THEN OpeningBalance 
            ELSE 0 
          END AS Debit, 
          CASE 
            WHEN OpeningBalance < 0 THEN OpeningBalance * - 1 
            ELSE 0 
          END AS Credit
        FROM ChartofAccounts
        WHERE (AccountCode = @AccountCode)
    ) AS OpeningData
    RETURN @Balance
END 
```

但是，如果我在查询分析器中运行此查询，它会给我所需的答案。

# php - PHP 函数范围。难以应对 $this 与全局声明

> ID：14303246
> 
> 赞同：0
> 
> 时间：2013-01-13T12:04:54.087
> 
> 标签：php

> **可能重复：**
> [从类中访问全局变量](https://stackoverflow.com/questions/1877136/access-global-variable-from-within-a-class)

我想加强我在 PHP 方面的知识。但大多数时候我很难理解范围。我不确定何时在我的函数上使用 $this 和全局声明关键字。

这只是一个示例类，我只是省略了 __construct()

```
 class myClass{
    public myVariable;

       public function1() {
          $this->myVariable=1;
       }

       public function2(){
          global $myVariable;
          $myVariable=1;
       }
    } 
```

在函数内分配预先声明的变量时，哪一种是最好的方法？我对 PHP 主要出版商的不同书籍感到困惑。我不确定我问的是正确的问题还是相关的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:25:11.347

首先，正如 Jared Farrish 已经说过的那样，这不是有效的 PHP。它`public $myvar`而不是`public myvar`. 变量名*总是*以 .开头`$`。

在类中声明变量时：

```
<?php
class A
{
    private $var;
} 
```

如果通过访问该变量将在所有方法中自动可用`$this`（除非方法是静态的，但这是另一回事）。所以这会起作用：

```
<?php
class A
{
    private $var;

    public function foo () {
        // This works 
        $this->var = 1;

        // This is a completely different thing and does not change
        // the contents of A::$var
        $var = 1; 
    }
} 
```

现在`global`完全不同了。在 PHP 中，你不能这样做：

```
<?php
$global_a = 123;

function myfunc ()
{
    // You wont actually change the value of $global_a with this
    $global_a = 1234;
}
echo $global_a; // still 123 
```

你会认为这会起作用，但全局变量不会自动用于函数。这就是`global`进来的地方：

```
<?php 
$global_a = 123;

function myfunc ()
{
    global $global_a;
    $global_a = 1234;
}
echo $global_a; // now it will be 1234 
```

我建议您[阅读 PHP 中的变量范围](http://php.net/manual/en/language.variables.scope.php)，然后您可以继续阅读 PHP[中的 OOP](http://php.net/oop)。

PHP 是一种非常古怪的语言。仅仅因为某些东西在*大多数*语言中以某种方式工作并不意味着它可以在 PHP 中工作。大多数时候，它不会。因此，最好尽可能多地教育自己。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:19:13.293

哪个最好通常取决于具体情况。一般来说，最好避免使用全局变量，因为它们会带来不知道它们在哪里使用的风险。

如果变量特定于该类的实例，则使用类变量是一个不错的选择。（不过，您必须为其添加前缀`$`。即，`public $myVariable;`）。

如果变量仅与类外的函数和实例相关，则最好将其作为引用传递。这是通过在参数空间中添加一个`&`之前完成的。`$`IE：

```
public function3(&$myVariable) {
    $myVariable = 1;
} 
```

或者只是返回您想要的值并将其设置在函数之外。IE，：

```
class MyClass {
    public function3() {
        return 1;
    }
}

$myObject = new MyClass();
$myVariable = $myObject->function4(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T12:33:12.973

尽量避免传递全局变量，因为有很多很好的理由：

1.  **重用脚本的某些部分是不可能的**：如果某个函数依赖于全局变量，那么在不同的上下文中使用该函数几乎是不可能的。另一个问题是您不能使用该功能，并在另一个脚本中使用它。

2.  **解决错误要困难得多**：跟踪全局变量比非全局变量要困难得多。

3.  **在一年内理解代码将变得更加困难**：全局变量使得很难看到变量来自哪里以及它做了什么。

现在你的问题：

**在函数内分配预先声明的变量时，哪一种是最好的方法？**
您可以在函数内**通过值或引用传递它们**

**按价值**

```
$firstVar = 1;

function abc($firstVar){
    echo $firstVar ; // will give you 1
} 
```

**引用**

```
function abc(&$firstVar){
    $firstVar = 3;   // this will give utility to change that variable even
    echo $firstVar ; // will give you 3
} 
```

**现在在哪里使用 $this 变量：**

$this 用于引用当前对象。例子：

```
class abc{
    private $firstVar;

    function abc(){
        $this->firstVar = 2;
    }
} 
```

# r - 如何绘制通过某些点的平滑曲线

> ID：14303251
> 
> 赞同：12
> 
> 时间：2013-01-13T12:05:42.457
> 
> 标签：r, plot, curve

我有

```
plot(rnorm(120), rnorm(120), col="darkblue", pch=16, xlim=c(-3,3), ylim=c(-4,4))
points(rnorm(120,-1,1), rnorm(120,2,1), col="darkred", pch=16)
points(c(-1,-1.5,-3), c(4,2,0), pch=3, cex=3) 
```

我想通过绘制一条穿过一组点的平滑曲线来描绘图形的一部分。我可以定义 3-4 组点，但我不能定义一个函数。我想在 R（而不是 GIMP）中执行此操作，因为我想以 SVG 提交。我想要实现的是以下

![在此处输入图像描述](../Images/2083ee2a9bfa4106a0df122e46d674bf.png)

这可能吗？我知道这不是一个复杂的绘图问题，但任何基本的 R 解决方案都可以。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-13T12:40:01.590

如果我理解正确的问题，通过控制点绘制样条线应该可以完成这项工作：

```
xspline(c(-1,-1.5,-3), c(4,2,0), shape = -1) 
```

![应该是这样的：](../Images/4182f30ca28973d9b36e37f9da265380.png)

# java-me - 将图像存储在 RMS 或包中的区别

> ID：14303254
> 
> 赞同：0
> 
> 时间：2013-01-13T12:06:14.937
> 
> 标签：java-me, rms

我是 J2ME 开发的新手，所以在 RMS 中存储图像时遇到了一些问题。

将图像存储在包中和将其存储在 RMS 中有什么区别，是相同的还是有任何区别。此外，如果我将图像存储在 RMS 上，那么最终我也必须将它保存在包中，这样它会在两个不同的地方占用空间。

请帮助我解决这个问题并帮助我使用最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:20:20.387

RMS 用于存储需要稍后再次加载的数据，例如用户输入的变量或游戏中获得的高分。

在我看来，如果图像已经被用户编辑过，那么将图像存储在 RMS 中才有意义。但即便如此，我可能还是会将它们保存在文件系统上。

MIDlet 不能附带 RMS 中预定义的数据。为了将数据放入 RMS，您需要首先从某个地方获取该数据，例如在 jar 文件资源文件夹中，或从 Web 下载。

# ios - 如何更改 iOS SDK？

> ID：14303256
> 
> 赞同：-1
> 
> 时间：2013-01-13T12:06:16.663
> 
> 标签：ios, sdk, xcode4.3

> **可能重复：**
> [如何更改我的 iOS SDK](https://stackoverflow.com/questions/14240013/how-can-i-change-my-ios-sdk)

我有 xCode 4.3.3 和 iOs SDK 5.1 我需要 iOS SDK 4.3。我怎样才能改变我的sdk？可能你有同样问题的链接？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:09:24.277

在项目设置中有两个字段，分别称为 Base SDK 和 Deployment Target。您的 Base SDK 应该是最新的可用版本（当前为 6.0），并且您的部署目标可以是所需的版本（4.3）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T12:22:22.330

转到首选项并检查是否安装了 iOS SDK 4.3，否则您可以下载并安装。

```
Xcode-> Preferences-> Downloads 
```

在这里您可以看到可用下载列表。然后点击安装。

下载安装完成后只需重新启动 X-code。

然后选择您的部署目标。

```
Project --> info-->iOS Deployment target 

Targets-->Summary-->Deployment target 
```

选择所需的 SDK。

# javascript - 从自定义提示中获取价值

> ID：14303261
> 
> 赞同：1
> 
> 时间：2013-01-13T12:06:30.200
> 
> 标签：javascript, jquery, html

我无法在 PHP 中获取自定义提示的值。我实际上制作了一个由两个输入框组成的自定义提示并将其存储在一个变量中。当我单击一个按钮时，我会调用它。我对此没有任何问题，因为它运行良好。

```
var popup = "div id='overlay'>
 <div id='box_frame'>
  <div id='box'><a href='javascript:closeDialog()'>close</a>
     <h2>Edit Material</h2>
     <h1>"+projName+"</h1>
    <label>Material</label>
    <input name='boxMatName' type='textbox' value='"+matName+"'   disabled />
    <br>
    <label>Quantity</label>
    <input id='boxEstVal' type='textbox' value='"+estQty+"'  />
    <br>
    <button onclick='javascript:saveDesc()'>Save</button>
    <div id='try'></div>
  </div>
 </div>
</div> 
```

";

我试过这个从提示中获取值：

```
 function saveDesc(){
    var mat = ('#boxMatName').val();
    var est = ('#boxMatName').text();

    alert(mat+est); 
```

但是，我没有得到任何结果。你能帮我理解我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:08:23.790

您正在使用`<input>`，所以您需要`val()`而不是`text()`：

```
var mat = $("input[name=boxMatName]").val();
var est = document.getElementById('boxEstVal').value; // or $('#boxEstVal').val(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T12:14:41.143

你为什么不给你的输入另一个ID：

```
var popup = "div id='overlay'>
<div id='box_frame'>
<div id='box'><a href='javascript:closeDialog()'>close</a>
 <h2>Edit Material</h2>
 <h1>"+projName+"</h1>
<label>Material</label>
<input name='boxMatName' id="boxMatName" type='textbox' value='"+matName+"'   disabled />
<br>
<label>Quantity</label>
<input id='boxEstVal' type='textbox' value='"+estQty+"'  />
<br>
<button onclick='javascript:saveDesc()'>Save</button>
 <div id='try'></div>
 </div>
</div>
</div> 
```

那么，这应该工作。

```
function saveDesc(){
  var mat = $('#boxMatName').val();
  var est = $('#boxEstVal').val();
  alert(mat + ' - ' + est);
} 
```

顺便说一句，您是否在 html 文件的头部包含了 jquery？

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script> 
```

# facebook - 可以获取 Facebook 帖子但不能获取状态消息

> ID：14303265
> 
> 赞同：0
> 
> 时间：2013-01-13T12:06:42.160
> 
> 标签：facebook, api, facebook-graph-api

我想使用 Facebook 图形 API 获取用户状态消息。我创建了一个 APP，在 APP ID/APP 密码的帮助下，我可以获取访问令牌，然后使用以下 URL 成功获取用户的帖子：

```
https://graph.facebook.com/USERID?fields=posts&access_token=XXX 
```

但是，我无法获取用户的状态消息。我正在尝试以下操作：

```
https://graph.facebook.com/USERID/statuses?access_token=XXX 
```

我收到以下错误：

```
{
   "error": {
      "message": "A user access token is required to request this resource.",
      "type": "OAuthException",
      "code": 102
   }
} 
```

如何获取用户的状态消息？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T12:11:17.740

清楚地读出错误信息：

它说您没有正确传递 access_token。

```
https://graph.facebook.com/**UserID**/statuses?access_token=**PASS_ACCESS_TOKEN_HERE** 
```

我希望你的令牌有 'user_status' 和 'friend_status' 权限。

希望能帮助到你。

# emacs - Emacs 保存所有缓冲区

> ID：14303266
> 
> 赞同：0
> 
> 时间：2013-01-13T12:06:59.730
> 
> 标签：emacs

如何使用 Emacs 保存当前打开的会话和缓冲区？ `(desktop-save-mode 1)`仅在有一个打开的缓冲区时保存

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-12T17:27:45.173

部分答案：保存所有缓冲区运行 save-some-buffers （例如通过文件菜单“执行命令”或更方便的 Mx 组合键）然后回答“！” 到第一个查询（意味着保存并且不再询问）。如果没有这样的提示，那么无论如何都不需要保存缓冲区。

至于“开放会话”，如果这意味着窗口布局、拆分位置等，那么三元组指向的问题很有用。但这比编辑器中通常的“全部保存”命令做得更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T13:10:37.063

您可以在这里阅读更多相关信息：http: [//tsdh.wordpress.com/2006/11/26/conveniently-save-and-restore-frame-configuration/](http://tsdh.wordpress.com/2006/11/26/conveniently-save-and-restore-frame-configuration/)

> 在 emacs 中，您可以在多个窗口中分割每一帧。这样的配置称为窗口配置。所有框架的窗口配置构成一个框架配置。这里有一些功能可以让您一键保存和恢复这样的框架配置。首先，我们定义一个寄存器，默认情况下将使用它来保存帧配置：
> 
> ```
> (defparameter th-frame-config-register ?°   
>     "The register which is used for storing and restoring frame
>   configurations by `th-save-frame-configuration' and 
>   `th-jump-to-register'.") 
> ```
> 
> 接下来是保存功能。如果您使用前缀 arg 调用它，您可以选择不同的寄存器：
> 
> ```
> (defun th-save-frame-configuration (arg)   
>     "Stores the current frame configuration in register 
>    `th-frame-config-register'. If a prefix argument is given, you 
>    can choose which register to use."  
>    (interactive "P")   
>      (let ((register (if arg
>                          (read-char "Which register? ")
>                        th-frame-config-register)))
>         (frame-configuration-to-register register)
>         (message "Frame configuration saved in register '%c'."
>                  register))) 
> ```
> 
> 现在我们需要一个函数来恢复帧配置。默认情况下，它使用 th-frame-config-register，但使用前缀 arg 您可以选择任何寄存器。（您不仅可以使用此功能来恢复帧配置，还可以使用跳转到注册来执行所有操作……）
> 
> ```
> (defun th-jump-to-register (arg)   
>     "Jumps to register `th-frame-config-register'. If a prefix 
>   argument is given, you can choose which register to jump to."   
>     (interactive "P")   
>     (let ((register (if arg
>                         (read-char "Which register? ")
>                       th-frame-config-register)))
>      (jump-to-register register)
>      (message "Jumped to register '%c'."
>               register))) 
> ```
> 
> 好的，我们要做的最后一件事是创建一些键绑定。我选择`F5`和`F6`：
> 
> ```
>  (global-set-key (kbd "<F5>")
>                   'th-save-frame-configuration) 
>   (global-set-key (kbd "<F6>")
>                   'th-jump-to-register) 
> ```
> 
> 现在，每当您有一个复杂的窗口/框架配置时，按 F5 保存它并按 F6 恢复它。

# android - 导入现有项目时出错

> ID：14303267
> 
> 赞同：0
> 
> 时间：2013-01-13T12:07:00.200
> 
> 标签：android

当我将新的现有项目导入 Eclipse 时，在尝试作为 Android 项目执行时收到以下错误消息：

1)项目没有default.properties文件！编辑项目属性以设置一个。

2) 由于构建路径不完整，因此项目未构建。找不到 java.lang.Object 的类文件。修复构建路径，然后尝试构建此项目

3) java.lang.Object 类型无法解析。它是从所需的 .class 文件 Utils.java 中间接引用的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:23:01.073

尝试像这样修复你的 default.properties 问题：

1.  右键单击您的项目（在项目资源管理器中），添加一个新文件并将其命名为 default.properties。
2.  打开您的 project.properties 文件并将内容复制粘贴到新的 default.properties 文件中

如果您没有 project.properties 文件，那么只需将您的项目目标添加到新的 default.properties 文件中。例如，将 api 级别 17 作为您的目标，它看起来像这样：

目标=android-17

希望至少可以解决您的第一个问题-对我有用！

# ios - UITableView 改变内容大小

> ID：14303268
> 
> 赞同：1
> 
> 时间：2013-01-13T12:07:08.157
> 
> 标签：ios, cocoa-touch, uitableview

我有一个表格视图，最初在其中显示 N 个图像，当用户向下滚动时，它会在到达底部时加载 N 个更多图像。现在，当用户触摸其中一个图像时，我使用模态 segue 打开另一个视图，当用户返回时，表格仍保留在触摸的单元格中（这是其中一个图像位于前 N 个加载图像中的时候）。但是当用户触摸随后加载的任何一个时，表格大小会恢复为原始大小（加载前 N 个图像时）。

这仅发生在表大小上，而不发生在我用于表数据的 NSMutableArray 上。我使用了以下语句，即使这样也会发生：

```
// in viewDidLoad

[self.flowTable setDataSource:self];
[self.flowTable setDelegate:self];

// whenever new images are loaded

[self.flowTable reloadData]; 
```

当我试图检查发生这种情况的确切时间时，我发现内容大小在调用 segue 之后才会改变。并且在调用“viewDidAppear”方法时，表格的内容大小会减小。知道为什么会发生这种情况吗？

**编辑**

好吧，我从互联网上懒惰地加载，每当我加载更多数据时，代码看起来像这样：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
   // connection finishes loading and the data is prepared to be updated

     NSDictionary *flowArr = [NSJSONSerialization JSONObjectWithData:receivedData options:0 error:nil];

    [self storeImageData: flowArr];

    [self.flowTable reloadData];

}

- (void) storeImageData:(NSMutableArray *)arr
{
     for(NSDictionary* data in arr)
    {

        // image data is stored as convenient and the NSMutableArray is updated as such

        [self.imageData addObject: det];

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T13:00:31.527

我看不出你在这里做的任何不寻常的事情。表格视图的内容大小基于每个部分的行数乘以每个单元格的高度。只要这些数字是正确的，您就会得到正确的内容大小。

如果您真的想确切知道内容大小何时发生变化，您可以将键值观察添加到表视图的内容大小，使用类似：

```
[tableView addObserver:self forKeyPath:@"contentSize" options:0 context:NULL]; 
```

然后，您可以断点`observeValueForKeyPath:ofObject:change:context:`以准确查看更改发生的时间。

# macos - 将多线程 Delphi 应用程序移植到 Mac：我的选择是什么？

> ID：14303271
> 
> 赞同：12
> 
> 时间：2013-01-13T12:07:20.747
> 
> 标签：macos, delphi, delphi-xe2, lazarus, omnithreadlibrary

我需要将应用程序（**用 XE2 编写**）移植到 Mac。

我的应用程序分为简单`UI executable`（单线程）和不可见`engine`（**严重依赖 OmniThreadLibrary 3.02**和**[Cromis DirectoryWatch](http://www.cromis.net/blog/downloads/directory-watch/)**）

两个 EXE 都通过**Cromis.IPC进行通信**

这就是说我主要对这 3 个组件（OmniThreadLibrary、Cromis IPC 和 DirectoryWatch）有问题

我现在的重点是引擎，它拥有大部分代码。

**我的问题是：**有没有类似于**OmniThreadLibrary、Cromis DirectoryWatch 和 Cromis.IPC** for Mac 的东西？（无论是 Lazarus 还是 XE2 都以 Mac 作为目标编译器）

答案将对我决定是否应该使用 Delphi XE2 或 Lazarus（我完全不熟悉的 IDE）有很大帮助**，**并了解**什么是提供/支持 Windows 和 Mac 的最佳长期方法，且头痛最小**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:02:51.603

我正在回答您关于编译器/IDE 的部分问题。我用过 Lazarus，我必须说你不会花太长时间来加快速度（除了你的确切要求）。Lazarus 越来越专业了；许多开发人员都是专业的 Delphi / XE2 编码员。我认为既然你想让你的应用程序在 Mac 上可用，那么无论如何你都会有一些工作要做。但是，如果您决定使用 Lazarus，您可以在大多数情况下为 Linux、Mac 和 Windows 构建应用程序而无需付出太多努力……大多数东西只是从相同的、几乎未修改的源代码为每个平台构建正确的。当然，正如您所说，您的代码严重依赖于 OTL 由于 OTL 是一个仅限 Windows 的库，我认为您将完成您的工作。（读 ...

我希望这个能有一点帮助。干杯

这个[Lazarus 教程](http://wiki.lazarus.freepascal.org/Multithreaded_Application_Tutorial)展示了内置的线程功能。我不知道您正在搜索的等效库。干杯

# android - RelativeLayout 未正确处理“toLeftOf”和/或 toRightOf

> ID：14303272
> 
> 赞同：4
> 
> 时间：2013-01-13T12:07:44.337
> 
> 标签：android, android-layout, android-relativelayout

在使用 RelativeLayout 时，我一直在寻找“toLeftOf”和“toRightOf”问题的解决方案，但还没有找到真正的解决方案或对此行为的良好答案：

基本上，“toLeftOf”不太好用。

我有两个 EditText，我希望在每个 EditText 的左侧显示一个图像。当我尝试这样做时，我得到以下结果（Eclipse 编辑器）：

![在此处输入图像描述](../Images/14b09b8faec1fbe48bbf4c87a8eab5f9.png)

如您所见，图像根本没有显示。这是使用的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="30dp"
    android:layout_marginRight="30dp"
    android:layout_marginTop="35dp"
    android:background="#010101"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/login_carNumber"
        style="@style/EditTextDark"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@string/prompt_carNumber"
        android:inputType="phone"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textCursorDrawable="@null" >

        <requestFocus />
    </EditText>

    <ImageView
        android:id="@+id/login_car_icon"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:src="@drawable/user"
        android:layout_toLeftOf="@id/login_carNumber" />

    <EditText
        android:id="@+id/login_password"
        style="@style/EditTextDark"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/login_carNumber"
        android:layout_marginTop="10dp"
        android:hint="@string/prompt_password"
        android:inputType="phone"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textCursorDrawable="@null" >
    </EditText>

    <ImageView
        android:id="@+id/login_lock_icon"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:src="@drawable/lock"
        android:layout_toLeftOf="@id/login_password" />

</RelativeLayout> 
```

**首先，为什么这不起作用？**

如果我更改 XML，并在 EditTexts 上使用“toRightOf”而不是在图像上使用“toLeftOf”，那么我会得到以下结果：

![在此处输入图像描述](../Images/6376b03fceb51cb8edbabb6a73f1db98.png)

如您所见，两个图像都显示了，但它们“在彼此之上”，此时挂锁应位于第二个 EditText 的左侧。这是 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="30dp"
    android:layout_marginRight="30dp"
    android:layout_marginTop="35dp"
    android:background="#010101"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/login_carNumber"
        style="@style/EditTextDark"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/login_car_icon"
        android:hint="@string/prompt_carNumber"
        android:inputType="phone"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textCursorDrawable="@null" >

        <requestFocus />
    </EditText>

    <ImageView
        android:id="@+id/login_car_icon"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:src="@drawable/user" />

    <EditText
        android:id="@+id/login_password"
        style="@style/EditTextDark"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/login_carNumber"
        android:layout_marginTop="10dp"
        android:layout_toRightOf="@+id/login_lock_icon"

        android:hint="@string/prompt_password"
        android:inputType="phone"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textCursorDrawable="@null" >
    </EditText>

    <ImageView
        android:id="@+id/login_lock_icon"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:src="@drawable/lock" 
        />

</RelativeLayout> 
```

**第二个问题；为什么“挂锁”图像位于第一个图像的顶部，而不是直接位于第二个 EditText 的左侧？**

如果我现在将以下行添加到最后一个 ImageView（挂锁图像）：

```
android:layout_below="@+id/login_car_icon" 
```

它放置正确，但我认为它是“黑客”，不应该是必要的，对吧？

因此，最后一个 ImageView 具有以下 XML 工作：

```
<ImageView
    android:id="@+id/login_lock_icon"
    android:layout_width="40dp"
    android:layout_height="40dp"
    android:src="@drawable/lock" 
    android:layout_below="@+id/login_car_icon"
    /> 
```

结果：

![在此处输入图像描述](../Images/980fa071ba66586f77955daa3e7bd5c1.png)

最后; 为什么需要将图像制作到最后一个 EditText 的左侧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T12:41:01.753

> 我有两个 EditText，我希望在每个 EditText 的左侧显示一个图像。当我尝试这样做时，我得到以下结果（Eclipse 编辑器）：[...]首先，为什么这不起作用？

`RelativeLayout`会做这样的事情：

*   获取第一个元素，`EditText`它被设置为填充父元素的宽度（将从左上角开始定位（默认定位在 a 中`RelativeLayout`）），它基本上填充了屏幕的所有宽度
*   获取`ImageView`, 定位在 的左侧`EditText`，但是由于`EditText`从屏幕的左边缘开始并填充了整个屏幕，因此 ImageView 将被放置在可见屏幕区域`EditText` **外部的左侧**

一种定位视图的方法是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="30dp"
    android:layout_marginRight="30dp"
    android:layout_marginTop="35dp"
    android:background="#010101"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/login_car_icon"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:src="@drawable/user"
        />  

    <EditText
        android:id="@+id/login_carNumber"
        style="@style/EditTextDark"
        android:layout_toRightOf="@id/login_car_icon"  
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@string/prompt_carNumber"
        android:inputType="phone"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textCursorDrawable="@null" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/login_password"
        style="@style/EditTextDark"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/login_carNumber"
        android:layout_alignLeft="@id/login_carNumber"
        android:layout_marginTop="10dp"
        android:hint="@string/prompt_password"
        android:inputType="phone"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textCursorDrawable="@null" >
    </EditText>

    <ImageView
        android:id="@+id/login_lock_icon"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:src="@drawable/lock"
        android:layout_alignTop="@id/login_password"
    />

</RelativeLayout> 
```

> 第二个问题；为什么“挂锁”图像位于第一个图像的顶部，而不是直接位于第二个 EditText 的左侧？

将从屏幕的`RelativeLayout`左上角开始放置其子项（没有对其设置规则）。如果你没有规则，你最终会得到质押的孩子。

> 最后; 为什么需要将图像制作到最后一个 EditText 的左侧？

那不是黑客攻击。您需要告诉`RelativeLayout`第二个`ImageView`的位置低于第一个`ImageView`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T12:32:29.350

试试这个代码这个显示布局如图所示。

这是为你工作。

![在此处输入图像描述](../Images/6c011c6938f2d2ae948d4020cd214a91.png)

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="30dp"
    android:layout_marginRight="30dp"
    android:layout_marginTop="35dp"
    android:background="#010101"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/login_carNumber"
        style="@style/EditTextDark"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@string/prompt_carNumber"
        android:inputType="phone"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textCursorDrawable="@null"
        android:layout_alignParentTop="true"
        android:layout_alignParentRight="true"
        android:layout_toRightOf="@+id/login_car_icon" >

        <requestFocus />
    </EditText>

    <ImageView
        android:id="@+id/login_car_icon"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:src="@drawable/user"
        android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true" />

    <EditText
        android:id="@+id/login_password"
        style="@style/EditTextDark"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"        
        android:layout_marginTop="10dp"
        android:hint="@string/prompt_password"
        android:inputType="phone"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textCursorDrawable="@null"
        android:layout_toRightOf="@+id/login_lock_icon"
        android:layout_below="@+id/login_car_icon" >
    </EditText>

    <ImageView
        android:id="@+id/login_lock_icon"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:src="@drawable/lock"
        android:layout_below="@+id/login_car_icon" />

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T12:44:01.710

合乎逻辑的方法是首先加载图像，然后将编辑文本小部件加载到它们的右侧。

# android - 不同智能手机中同一应用程序之间的通信

> ID：14303274
> 
> 赞同：0
> 
> 时间：2013-01-13T12:08:03.843
> 
> 标签：android, google-cloud-messaging

我想开发一个应用程序。这可能是一场游戏或其他什么。我会在两个或更多设备上使用相同的应用程序。当其中一个完成他的任务时，另一个“客户”必须收到他有任务要做的通知，并且他的数据应该随着最后的更改自动更新。我想我需要一个中间的服务器，我可以在其中保存模型和数据并将其发送给智能手机通过它进行通信的地方。它可能像纸牌游戏或类似的游戏。

所以,,,, 1\. 具有相同应用程序的两个或多个客户端。2\. 当他们中的一个完成他的任务或轮到时，另一个客户应该收到通知，其中包含他的日期更新。

我一直在研究 GCM，但我不知道我是否可以通过它发送复杂的数据，也许有更好的方法来制作这些东西。

有人能告诉我从哪里开始吗？

谢谢！。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:21:17.133

在您的架构中，您必须分离出应用程序的控制和数据方面。

您不需要云来启动整个数据的推送。如果您在任何特定设备上的应用程序收到更新待处理的通知，则它可以在方便时启动下载。只需使用 GCM 推送应用程序的某些任务待处理的通知。

# javascript - 我的脚本没有生成随机图像。有人可以告诉我可能是什么原因吗？

> ID：14303275
> 
> 赞同：1
> 
> 时间：2013-01-13T12:08:18.813
> 
> 标签：javascript, random

```
<script type="text/javascript" >

var mediaArray = new Array (
"images/Lab13/toshiba.jpg",
"images/Lab13/dell.jpg",
"images/Lab13/acer.jpg"
);

var max = mediaArray.length;
var randomIndex=0;

function showMedia()
{
randomIndex   = Math.floor((Math.random()*max));
document.getElementById("mediaimage").src= mediaArray[randomIndex];
setTimeout("showMedia()",1500);

}
</script>
</head>

<body onLoad="ShowMedia();">
<div><a href="Javascript:mediaClick(randomIndex);">
<img src="images/Lab13/toshiba.jpg" id="mediaimage" /></a>
</div>
</body> 
```

我认为当我加载它加载第一个图像“toshiba.jpg”的页面时该功能无法正常工作，但它并没有像它应该改变的那样改变图像

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:12:42.863

没有功能`ShowMedia()`。JS 区分大小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T12:44:49.750

您正在调用`ShowMedia()`页面加载：

```
<body onLoad="ShowMedia();"> 
```

它不存在，因为 javascript 区分大小写。

所以正确的代码是：

```
<body onLoad="showMedia();"> 
```

# mysql - 在 ubuntu 和 rake db:create 中安装 mysql

> ID：14303278
> 
> 赞同：0
> 
> 时间：2013-01-13T12:08:31.490
> 
> 标签：mysql, ruby-on-rails, ruby, rake

所以我有一个大问题我想开始使用 rails 2.3.11 和 ruby​​ 1.8.7 firs 我安装了我的 sql

```
 gem install mysql 
```

然后我跑

```
 rake db:create 
```

但我有一个错误

```
 Couldn't create database for {"adapter"=>"mysql", "database"=>"test_development", "encoding"=>"utf8", "reconnect"=>false, "username"=>"root", "pool"=>5, "host"=>"localhost", "password"=>nil}, charset: utf8, collation: utf8_unicode_ci (if you set the charset manually, make sure you have a matching collation) 
```

经过一番搜索，我找到了一个解决方案来运行这些命令，我​​卸载 mysql 并运行这些行

```
 gem install mysql -- --with-mysql-dir=/usr/local \ --with-mysql-config=/usr/local/bin/mysql_config 
```

但我遇到了另一个错误

```
 ERROR:  Error installing mysql:
ERROR: Failed to build gem native extension.

    /home/asnad/.rvm/rubies/ruby-1.8.7-p370/bin/ruby extconf.rb --with-mysql-dir=/usr/local  --with-mysql-config=/usr/local/bin/mysql_config
    extconf.rb:5: command not found: /usr/local/bin/mysql_config --cflags

    *** extconf.rb failed ***
    Could not create Makefile due to some reason, probably lack of
    necessary libraries and/or headers.  Check the mkmf.log file for more
    details.  You may need configuration options.

    Provided configuration options:
--with-opt-dir
--without-opt-dir
--with-opt-include
--without-opt-include=${opt-dir}/include
--with-opt-lib
--without-opt-lib=${opt-dir}/lib
--with-make-prog
--without-make-prog
--srcdir=.
--curdir
--ruby=/home/asnad/.rvm/rubies/ruby-1.8.7-p370/bin/ruby
--with-mysql-config 
```

我正在尝试过去两天，请在我刹车笔记本电脑之前帮助我提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:11:16.233

尝试使用`mysql2 gem`.
如果您打算为您的应用程序使用 mysql2 gem，那么您需要`libmysqlclient-dev`在执行此操作之前安装该软件包。更多详情： [http ://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:25:19.883

我已经解决了这个问题

```
gem uninstall mysql
export PATH=$PATH:/usr/local/mysql/bin
sudo gem install mysql 
```

# native - 更新到 JRE7，无法加载 nativelib jar，但 JRE6 工作正常

> ID：14303279
> 
> 赞同：19
> 
> 时间：2013-01-13T12:08:34.053
> 
> 标签：native, java, jnlp

对于我的 JNLP 文件，有一些 nativelib 信息，如下所示：

```
<resources os="Windows">
    <nativelib href="lib/x264-win.jar" />
</resources>
<resources os="SunOS" arch="sparc">
    <nativelib href="lib/x264-SunOS-sparc.jar" />
</resources>
<resources os="SunOS" arch="x86">
    <nativelib href="lib/x264-SunOS-x86.jar" />
</resources> 
```

当我更新到 JRE7 时，无法加载 nativelib jar，但 JRE6 工作正常。

加载 nativelib 代码如下：

```
String source = "x264.jar";
ClassLoader cl = Thread.currentThread().getContextClassLoader();
URL url= cl.getResource(source); 
```

“x264.jar”是 x264-win.jar、lib/x264-SunOS-sparc.jar 或 lib/x264-SunOS-x86.jar 中的一个 jar。

当我使用 JRE6 加载 x264.jar 时，它运行良好。但是当我更新到 JRE7 时，它无法加载 x264.jar。

使用 JRE6 时，url 为“x264.jar”信息，如 jar：[http://test.local:8080/JNLP.jar!/x264.jar](http://test.local:8080/JNLP.jar!/x264.jar)，但使用 JRE7，url 将为空，我发现代码不是加载 nativelib “x264.jar”

有没有人发现JRE7无法加载nativelib.jar？是使用 Thread.currentThread().getContextClassLoader() 加载“x264.jar”的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T04:05:22.310

确保您有正确的按位本机二进制文件来匹配您的 JRE。如果您在 64 位 JRE 上进行测试，则需要 64 位本机二进制文件。如果您在 32 位 JRE 上进行测试，则需要 32 位本机二进制文件。您可能需要为这三个中的每一个包括资源：

```
<resources os="Windows" arch="amd64">
<resources os="Windows" arch="x86_64">
<resources os="Windows" arch="x86"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T21:42:47.347

以下“依赖 dll”[小程序](http://code.google.com/p/java-simple-serial-connector/wiki/jSSC_Terminal)工作正常（除了使用 1.7.0_51 时的安全问题（由于它是自签名的，您需要将安全设置降低到中等））。因此，如果 jnlp 文件的本机 lib 加载机制被破坏，那么您可以将 .dll 文件与普通 jar 文件一起分发，如上例所示。

1.  将 dlls/sos 放入您的 jar 文件中，如示例中所示：[jssc.jar](https://java-simple-serial-connector.googlecode.com/svn/trunk/js_terminal/lib/jssc.jar)
2.  `System.load(libFolderPath + fileSeparator + libName);`使用like used [here](https://github.com/technicalmachine/node-jssc/blob/master/jSSC-2.6.0-Release/src/src/jssc/SerialNativeInterface.java)加载库。
3.  正如 Joseph 所提到的，请注意 win、solaris、linux、arm 以及 i86 和 amd64 位系统之间的细粒度版本差异。因此，如果您不提供 64 位 dll 并使用 64 位 Java 运行它，它将无法工作......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-19T12:38:05.923

我有类似的麻烦；然而，即使在 JRE 6 中，这也无法正常工作。

发现了一个可能与此相关的错误：

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6758884](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6758884)

显然 JRE 在下载 nativelib 资源时会遇到问题。

该错误仍处于打开状态，并针对 Java 版本 8 ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-30T14:47:41.450

我忘记了我不久前解决了这个问题。我发现我必须在 Java 代码中使用 System.loadLibrary("jarNameNoExtension");

希望这对其他人有帮助。

# cucumber - 场景会话中的 Cucumber 不会持续存在

> ID：14303281
> 
> 赞同：1
> 
> 时间：2013-01-13T12:08:44.847
> 
> 标签：cucumber

尝试测试用户登录（管理员）然后创建更多用户的场景。

在日志中，我可以看到控制进入登录页面，然后管理员用户登录，当控制重定向到进一步的用户创建页面时，登录过滤器停止并将控制重定向回登录页面。

黄瓜新手，所以代码质量不好，所以任何测试登录用户服务的指南都会有所帮助

这是我的场景

```
Feature: Create user from LMS
  In order to create lms user with multiple groups
  As a author
  I want to create lms user with multipl groups

  Scenario: Add  new user with multiple groups
      Given the following user information
      And I am logged in as author "gulled" with password "thebest"
      When I request for new lms user creation
      Then the new user "user1" should be created 
```

这是定义

```
Given /^the following user information$/ do 
  # Factory(:login)
  # Factory(:author)
end

Given /^I am logged in as author "([^"]*)" with password "([^"]*)"$/ do |username, password|
  visit "account/login"
  fill_in "loginfield", :with => username   
  fill_in "password", :with => password
  click_button "submit_button"  
end

When /^I request for new lms user creation$/ do
  visit "/author_backend_lms/new_user"  
  fill_in "login_first_name", :with => ""
  fill_in "login_last_name", :with => ""
  fill_in "login_login", :with => ""
  fill_in "login_email", :with => ""
  fill_in "login_password_confirmation", :with => ""
  click_button "create_user_form_submit_button"
end

Then /^the new user "([^"]*)" should be created$/ do |user_login|
  login = Login.find_by_login user
  assert_no_nil login, "Record creation failed" 
end 
```

在“请求创建新的 lms 用户”中，当尝试访问 lms 用户创建页面时，控件会重定向回登录页面。

这是我的宝石测试清单

```
gem "capybara", "1.1.1"
gem "cucumber", "1.1.0"
gem "cucumber-rails", "0.3.2" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:40:27.520

我有一个示例项目，它说明了使用 Cucumber 做这类事情的更好（IMO）方法。我认为它可能会提供您要求的一些指导

[看这里](https://github.com/diabolo/r3-mongo-devise)

希望它有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:01:00.463

看起来您没有在该`Given the following user information`步骤中事先创建管理员用户，这导致该`And I am logged in as author "gulled" with password "thebest"`步骤失败。

尝试使用[`save_and_open_page`方法](http://jeffkreeftmeijer.com/2010/ever-heard-of-capybaras-save_and_open_page-method/)来调试每个步骤之后发生的事情。

我将重写场景如下（没有太多不需要的细节）：

```
Scenario: Add  new user with multiple groups
  Given I am logged in as an admin user
  When I request for new lms user creation
  Then a new user should be created 
```

请查看[http://aslakhellesoy.com/post/11055981222/the-training-wheels-came-off](http://aslakhellesoy.com/post/11055981222/the-training-wheels-came-off)以获得一些关于如何编写更好场景的好建议。

***编辑***

这是我的一个项目中的 step_definitions 示例，用于预先创建用户并登录：

```
Given /^the user has an account$/ do
  @user = FactoryGirl.create( :user )
end

When /^the user submits valid signin information$/ do
  fill_in "user_email",    with: @user.email
  fill_in "user_password", with: @user.password 
  click_button "Sign in"
  page.should have_link('Logout', href: destroy_user_session_path)
end 
```

使用实例变量使用户工厂对象跨步骤持续存在。`logout`并检查步骤末尾是否有链接可确保登录确实成功。希望这有助于微调您的步骤定义。

# android - 如何在 Android 中处理屋顶下的 GPS

> ID：14303284
> 
> 赞同：0
> 
> 时间：2013-01-13T12:09:06.603
> 
> 标签：android, gps

我创建了获取相关纬度和经度并在数据库中更新的应用程序。问题是当我在房子或商场这样的屋顶下时......我不断在我的应用程序上获得 GPS 搜索图标。

我正在使用一个按钮来触发 Mylocation() 并且它是侦听器。

该按钮具有以下内容：

```
locationListener = new MyLocationListener();                        
location.requestLocationUpdates(LocationManager.GPS_PROVIDER, 5000, 5, locationListener); 
```

在 mylocationlistener 方法下我有

```
private class MyLocationListener implements LocationListener {
    @Override
    public void onLocationChanged(Location loc) {
        try {
            Thread.sleep(1000);
            Toast.makeText(getBaseContext(),"Location: Lat:" + loc.getLatitude() + " Lng:" + loc.getLongitude(),Toast.LENGTH_SHORT).show();
            location.removeUpdates(locationListener);
            location = null;
            finish();
          }
            catch (InterruptedException e) {
            e.printStackTrace();
        }
       } 
```

我得到了正确烘烤的价值，没有任何问题，应用程序完成后，GPS 图标消失了，但是当我在屋顶内时，顶部的 GPS 图标一直在搜索 GPS。图标不会消失。

我该如何解决？如果 Gps 信号良好，我是否需要设置一个条件，如果不只是消息 GPS 信号不好，则启动 GPS。如果是这样怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:12:42.690

如这个问题中所述[如何在 Android 上测量 GPS 信号强度](https://stackoverflow.com/questions/3551697/how-to-measure-gps-signal-strength-on-android)，

> 所以假设你真的是指信号强度，你可以得到`GpsStatus`via `LocationManager.getGpsStatus()`，这会给你一个卫星列表 via `getSatellites()`，每个卫星都有一个信噪比 ( `getSnr()`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:39:33.823

您可以考虑使用网络定位服务以及或代替 GPS。您还可以考虑添加超时。

# java - 将 JSON 文件转换为 YAML 文件

> ID：14303289
> 
> 赞同：-3
> 
> 时间：2013-01-13T12:10:15.553
> 
> 标签：java, json, yaml

我必须创建一个可以将 JSON 文件转换为 YAML 文件的 java 代码，然后比较它是否正确

我可以得到任何语言的代码吗，因为我不允许使用 selenium、web 驱动程序或任何工具

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T13:27:25.377

这是一个技巧问题吗？

来自[YAML 1.2 规范](http://www.yaml.org/spec/1.2/spec.html)：

> 因此，YAML 可以被视为 JSON 的自然超集，提供更好的人类可读性和更完整的信息模型。实践中也是如此；**每个 JSON 文件也是一个有效的 YAML 文件**。如果/当需要附加功能时，这使得从 JSON 迁移到 YAML 变得容易。

根据定义，任何正确的 JSON 文件都是正确的 YAML 文件 - 您无需转换或比较任何内容......

# c++ - 将 eigen::matrixXf 映射到数组

> ID：14303290
> 
> 赞同：1
> 
> 时间：2013-01-13T12:10:23.843
> 
> 标签：c++, eigen

在本征中，我[需要](https://stackoverflow.com/questions/12003692/mapping-array-back-to-an-existing-eigen-matrix)将 MatrixXf 放置到现有数组中。现在，这有效：

```
 MatrixXf Um=FFMatBas(xi,CalcMetod);
    Map<VectorXf>Uv(Um.data(),ppp);
    Map<VectorXf>(Q,ppp)=Uv; 
```

但它似乎有点复杂（Q 是一个现有的长度 ppp 数组）。我们可以一步完成最后两行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:14:10.957

```
MatrixXf Um=FFMatBas(xi,CalcMetod);
Map<VectorXf>(Q,ppp)=Map<VectorXf>Uv(Um.data(),ppp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T09:47:49.483

假设 Q 大到足以包含矩阵，您也可以将其写为：

```
MatrixXf Um = FFMatBas(xi,CalcMetod);
Map<MatrixXf>(Q, Um.rows(), Um.cols()) = Um; 
```

# android - Zxing 如何使扫描结果传播回调用活动

> ID：14303291
> 
> 赞同：2
> 
> 时间：2013-01-13T12:10:26.823
> 
> 标签：android, zxing

我已将 ZXing 代码集成到我的应用程序中。我被告知不要将整个库复制并粘贴到我的应用程序中，而是获取我需要的部分。我从捕获活动开始，然后将它的依赖项复制到我的应用程序中。我将意图过滤器从 zxing one 更改为我的意图过滤器。哦，我不得不更改 capture.xml 中的包名称。

它似乎工作正常，当我的活动调用 startActivityForResult() 扫描仪启动。问题是当我扫描二维码时，扫描结果不会传播回我的呼叫活动，而是询问如何完成操作，例如短信、电子邮件等。

如何让扫描结果返回到我的活动的 onActivityResult？

在此先感谢马特

```
 Button signin = (Button)findViewById(R.id.buttonsignin);

        alpha = new AlphaAnimation(0.3F, 0.8F); //Set opacity - Range 0.0 to 1.0
        alpha.setDuration(0); // Set animation duration
        alpha.setFillAfter(true); // Maintaining the effect to the button
        signin.startAnimation(alpha);
        signin.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Log.e(TAG, "onclicked sign in");

                Intent intent = new Intent(
                        "com.carefreegroup.SCAN");
                intent.putExtra("SCAN_MODE", "QR_CODE_MODE");

                startActivityForResult(intent, 0);

            }
        }); 
```

.

```
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
        Log.e(TAG, "in onActivityResult");
        if (requestCode == 0) {
            if (resultCode == RESULT_OK) {
                Log.e(TAG, "result ok");

//              
                ///////////////////////////////

                tagScanTime  = new DateTime();

                DateTimeFormatter df = DateTimeFormat.forPattern("dd/MMM/yy h:mmaa");
                String formattedScanTime = df.print(tagScanTime);
                Log.e(TAG, "formatted tag scan time = " + formattedScanTime);

                 contents = intent.getStringExtra("SCAN_RESULT");
//              Toast.makeText(this, "scanner has found " + contents,
//                      Toast.LENGTH_LONG).show();

                 //get info from tag that has been just scanned
                    String[] splitPayload = contents.split(",");

                    tagType = splitPayload[0];
                    tagCompany = splitPayload[1];
                    tagCompany = nfcscannerapplication.getCompId();
                    //tagPerson = splitPayload[2];
                    cursor = nfcscannerapplication.loginValidate.queryAllFromCarer();
...............
..............
.............. 
```

.

```
<activity android:name=".CaptureActivity" >
            <intent-filter>
                <action android:name="com.carefreegroup.SCAN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity> 
```

# http - 带有“If-Match”和 ETag 的 GET 请求

> ID：14303295
> 
> 赞同：4
> 
> 时间：2013-01-13T12:11:08.183
> 
> 标签：http, rest, http-headers, etag, http-caching

我正在为 RESTful 服务实现 ETag 功能，我希望尽可能接近 HTTP 规范。然而，规范并不像它应该的那样清晰。具体来说：

**标`If-Match`头 - GET 请求的语义是什么？**

`If-Match`据推测，如果该值与 ETag 的值**匹配**，则带有标头的 GET将返回具有*200 OK*（而不是 304）的实际资源。如果值**不匹配**，则应返回*412 Precondition Failed以及 ETag 的新值且没有内容？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:26:31.493

这是正确的，期望`ETag`对 a 的 412 响应的新值`If-Match`不是[规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.24)要求的。你可以省略它。仅[建议](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.26)在对`If-None-Match`. 也许这就是造成你困惑的地方。

# android - 菜单项不起作用

> ID：14303297
> 
> 赞同：1
> 
> 时间：2013-01-13T12:11:15.227
> 
> 标签：android, menu, menuitem

我正在做菜单项。但我无法在屏幕上查看菜单项。谁能告诉我出了什么问题或需要添加什么其他内容才能使代码正常工作。我完全被卡住了。

```
 package com.example.androiddemo;

          import android.app.Activity;
          import android.os.Bundle;
          import android.view.Menu;
          import android.view.MenuInflater;

           public class MenuItem extends Activity {

     @Override
         protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
                setContentView(R.menu.menupage);
      }

    public boolean  onCreateOptionsMenu(Menu menu){
        MenuInflater inflater = getMenuInflater();
            inflater.inflate(R.menu.menupage, menu);
            return true;
       }
        } 
```

xml

```
 <?xml version="1.0" encoding="utf-8"?>
   <menu xmlns:android="http://schemas.android.com/apk/res/android">
   <item
        android:id="@+id/about"
        android:icon="@drawable/images"
        android:title="About"
        android:showAsAction="ifRoom"
      />
   <item
        android:id="@+id/setting"
        android:icon="@drawable/ic_launcher"
        android:title="App Setting"
        />
   </menu> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:26:32.620

在这里，您必须设置活动的 xml 文件。

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
                setContentView(R.layout.main); // Your activity's xml file.
      }

public boolean  onCreateOptionsMenu(Menu menu){
        MenuInflater inflater = getMenuInflater();
            inflater.inflate(R.menu.menupage, menu); // Here you are setting the menu whatever options you want.
            return true;
       }
        } 
```

运行此程序后，只需按菜单，它应该会显示您的选项。如果不回帖。

# python - python打印失败

> ID：14303300
> 
> 赞同：2
> 
> 时间：2013-01-13T12:11:24.683
> 
> 标签：python, output, memory-address

> **可能重复：**
> [Python __str__ 和列表](https://stackoverflow.com/questions/727761/python-str-and-lists)

python打印对象的地址而不是对象本身的原因是什么？

例如打印指令的输出是这样的：

```
[< ro.domain.entities.Person object at 0x01E6BA10>, < ro.domain.entities.Person object at 0x01E6B9F0>, < ro.domain.entities.Person object at 0x01E6B7B0>] 
```

我的代码如下所示：

```
class PersonRepository:
    """
    Stores and manages person information.
    """
    def __init__(self):
        """
        Initializes the list of persons.
        """
        self.__list=[]

    def __str__(self):
       """
       Returns the string format of the persons list.
       """
       s=""
       for i in range(0, len(self.__list)):
            s=s+str(self.__list[i])+"/n"
       return s

    def add(self, p):
        """
        data: p - person.
        Adds a new person, raises ValueError if there is already a person with the given id.
        pos: list contains new person.
        """
        for q in self.__list:
            if q.get_personID()==p.get_personID():
                raise ValueError("Person already exists.")
        self.__list.append(p)

    def get_all(self):
        """
        Returns the list containing all persons.
        """
        l=str(self.__list)
        return l 
```

我也有一个带有 get_personID() 函数的 Person 类。在我添加了一些元素并尝试使用 get_all() 打印它们之后，它返回上面的行，而不是我添加的人员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:14:18.780

您正在查看`repr()`自定义类的表示，默认情况下包括`id()`（== CPython 中的内存地址）。

这是打印列表时使用的默认值，任何内容都使用以下表示：

```
>>> class CustomObject(object):
...     def __str__(self):
...         return "I am a custom object"
... 
>>> custom = CustomObject()
>>> print(custom)
I am a custom object
>>> print(repr(custom))
<__main__.CustomObject object at 0x10552ff10>
>>> print([custom])
[<__main__.CustomObject object at 0x10552ff10>] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:14:42.467

Python 为每个列表项调用每个列表项的**repr** () 输出。

请参阅[Python __str__ 和列表](https://stackoverflow.com/questions/727761/python-str-and-lists)

# linux - 为什么通过执行'curl -r'输出文件超过一个字节

> ID：14303304
> 
> 赞同：0
> 
> 时间：2013-01-13T12:11:57.763
> 
> 标签：linux, curl

我的英语很差！ ：）

我想`curl -r`部分下载一个 2G 文件。

```
curl -r 0-1234567       -o file.part1 http://xxx
curl -r 1234567-2469134 -o file.part2 http://xxx 
```

然后我得到：

```
file.part1 : 1234567 bytes
file.part2 : 1234568 bytes 
```

file.part2 超过一个字节，所以我尝试截断第一个字节：

```
tail +2c file.part2 > file.part2.truncated 
```

然后：

```
cat file.part1 file.part2.truncated > myfile 
```

myfile 是我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T12:24:53.943

字节范围包括在内，因此应该是：

```
curl -r 0-1234567       -o file.part1 http://xxx
curl -r 1234568-2469134 -o file.part2 http://xxx
cat file.part1 file.part2 > myfile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T12:29:52.773

的`--range`标志`curl`包括整个范围，因此您将获得两次“1234567”字节。

此外，因为它是一个基于 0 的索引，所以范围的末尾应该少 1。也就是说，它们应该是 1234566 和 2469133，因为范围 0-1234566 是 1234567 个数字，1234567-2469133 也是如此。

```
curl -r 0-1234566       -o file.part1 http://xxx
curl -r 1234567-2469133 -o file.part2 http://xxx
cat file.part1 file.part2 > myfile 
```

# javascript - D3.js、csv 和 foreach 未定义值

> ID：14303322
> 
> 赞同：2
> 
> 时间：2013-01-13T12:14:23.020
> 
> 标签：javascript, csv, d3.js

我正在尝试 D3.js，我有一个小问题。这是我的脚本：

```
<!DOCTYPE html>
<meta charset="utf-8">
<body>
    <script src="http://d3js.org/d3.v3.js"></script>
    <script>
        d3.csv("result-do-nothing.csv", function(error, data) {
            data.forEach(function(d) {
                console.log(d);
                console.log(d.nb);
                console.log(d.memory);
                console.log(d.memory_peak);
            });
        });
    </script>
</body> 
```

这是CSV

```
nb, memory, memory_peak
0,0.809,0.822,
100,0.779,1.072,
200,0.656,1.072,
300,0.656,1.072,
400,0.656,1.072,
500,0.656,1.072, 
```

所以，当我运行脚本时，

*   `console.log(d)`输出`Object {nb: "0", memory: "0.809", memory_peak: "0.822"}`=> 不错
*   `console.log(d.nb)`输出`0`=> 不错
*   `console.log(d.memory)`输出`undefined`=> 为什么？
*   `console.log(d.memory_peak)`输出`undefined`=> 为什么？

我对 FF 和 chrome 有同样的问题。我真的不明白为什么。顺便说一句，我也尝试`d['memory']`重命名列，删除/添加`,`csv 中的尾随。没有任何效果

**编辑**：我是个菜鸟。csv 标头中有多余的空格：`memory`而不是`memory`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T20:22:23.490

csv 标头中有多余的空格：`memory`而不是`memory`

# c# - C++ 中的多播委托

> ID：14303327
> 
> 赞同：4
> 
> 时间：2013-01-13T12:14:44.597
> 
> 标签：c#, c++

我正在将一些 C# 代码转换为 C++。我最初想用 C 风格的回调替换委托。但是，在进一步检查代码时，我意识到这是行不通的，因为委托以多播方式使用，带有（伪 C# 代码）语句，例如：

```
DelegateTypeOne one = new DelegateTypeOne(someCallbackFunc1)
one += new DelegateTypeOne(someCallbackFunc2) 
```

我知道，如果要移植的代码以单次强制转换方式使用委托，那么使用常规 C 风格的函数指针可能会奏效。关于这一点，我有一个问题，以下 C++ 代码是否有效？

```
typedef std::vector<int> (CallbackTypeOne*) (const std::string& s, const bool b);
std::vector<int> foo (const std::string& s, const bool b);

CallbackTypeOne func_ptr = NULL;

func_ptr =  new CallbackTypeOne(foo);  // Note: new being used on a typedef not a type

// or should I just assign the func the normal way?
func_ptr =  foo;   // this is what I am doing at the moment 
```

我对实现委托的最初想法是编写一个名为 Delegate 的 ABC，它是一个函子。所有其他委托都将从这个 ABC 派生，并且他们将有一个 STL 容器（很可能是一个列表），其中将包含任何已分配函数的列表，以按顺序调用。

这似乎是相当多的工作，我什至不相信它是最合适的方法。以前有没有人做过这种 C# 到 C++ 的转换，在 C++ 中实现多播委托的推荐方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T12:18:44.520

我有两个可能的解决方案建议

1.  使用函数指针向量，而不是函数指针。定义一个类，该类包含一个回调向量并具有 operator()，在调用时将调用回调
2.  使用[升压信号](http://www.boost.org/doc/libs/1_52_0/doc/html/signals.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-14T22:02:49.990

试试这个多播委托的例子。它假定 C++11 => gcc 4.7 或更高版本。

```
////////////////////////////////////////////////////////////
//
//      Bind and Function
//
////////////////////////////////////////////////////////////

#include <vector>
#include <string>
#include <iostream>
#include <functional>
using namespace std;

class Greeting
{
public:
    Greeting(const string& name) : name(name) {}
    string Hello() { return "Hello " + name; }
    string Wait() { return "Wait " + name; }
    string Goodbye() { return "Goodbye " + name; }
private:
    string name;
};

template <typename T>
struct Delegate
{
    vector<T> list;

    void operator+=(T item)
    {
        list.push_back(item);
    }

    void operator() ()
    {
        for(unsigned i = 0; i < list.size(); i++)
        {
            T item;
            item = list[i];
            cout << item() << endl;
        }
    }
};

//////

int main()
{
    // create pointer to function objects
    function<string()> f;
    Delegate<function<string()>> d;
    Greeting john("John");
    Greeting sue("Sue");

    // load up multicast delegate
    d += bind(&Greeting::Hello, john);
    d += bind(&Greeting::Goodbye, sue);
    d += bind(&Greeting::Wait, john);

    // fire delegate
    d();

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T14:11:58.887

最简单的方法是使用例如`std::vector< std::function<TSignature> >`作为多播委托的支持结构。但是，即使`std::function`作为任何可调用类型的包装器，细节也会变得非常尴尬，因此我也建议使用`boost::signals`...

# javascript - CSS：对 js 注入的样式表没有表现的特异性？

> ID：14303328
> 
> 赞同：0
> 
> 时间：2013-01-13T12:14:54.057
> 
> 标签：javascript, css, ajax, responsive-design

作为移动优先构建的一部分，我以阻塞方式动态加载“桌面”css

```
<script type="text/javascript">
    var mq = window.matchMedia("(min-width: 640px)");
    if(mq.matches){
        var stylesheet = document.createElement('link');
        stylesheet.href = '<?php echo $src ?>';
        stylesheet.rel = 'stylesheet';
        stylesheet.type = 'text/css';
        document.getElementsByTagName('head')[0].appendChild(stylesheet);
    }
</script> 
```

但是，webkit 和 ff 为加载 css 的预注入提供了更多功能。

![在此处输入图像描述](../Images/0bca9598cd7de9d8d73064df6da71bf6.png)

即使`SetTimeout`在加载 mboxes.css 前 3 秒，浏览器仍然支持未注入的 css 规则。

我怎样才能让 css 特异性规则表现出来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:23:16.423

问题是正在加载的 CSS 的顺序，它将 event_core 的值作为主加载，因此要覆盖它，您有 2 个简单的选项而无需重写 js。

您可以在 event_core.css 之前或之后执行 Javascript，具体取决于您目前拥有的内容。

或者最简单的方法，但实际上取决于您在 mboxes.css 中有多少 CSS 将在 CSS 中使用 !important ，这将告诉浏览器这些是最重要的并成为新的主人。

例如

```
.mob p {
color:white!important;
} 
```

或者对规则进行编辑，使两者相同，例如 .content > .mbox p

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:15:27.797

好的，解决了这个问题。

为了让 CSS 表现“正常”，它需要被注入到`<body>`not `<head>`.

```
document.getElementsByTagName('body')[0].appendChild(stylesheet); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-13T12:22:55.657

这个问题与 css 文件的加载方式无关，更多的是与 css 优先级规则有关。基本上，选择器越具体，规则的优先级就越高。在您的情况下，两个选择器具有相同的优先级（类和元素选择器），~~因此某些浏览器会选择一个，其他~~最后加载的另一个应该覆盖第一个，但这不是我所指望的。

解决方法是使 mboxes.css 中的规则更具体，例如`.mbox.main_content p`.

第二种选择是`!important`在每种样式之后添加 (like `color: white !important`)，但我建议不要这样做。

# java - Bouncy Castle J2ME 加载现有私钥

> ID：14303333
> 
> 赞同：2
> 
> 时间：2013-01-13T12:15:40.083
> 
> 标签：java, java-me, rsa, bouncycastle, private-key

我有一个 PEM 或 DER 私钥，一个现有的密钥。如何加载此密钥

`PrivateKeyFactory.createKey or into an AsymmetricCipherKeyPair`?

我试过这个：

```
InputStream inKey = getClass().getResourceAsStream("/samsjava/user_key_pk8.der");
                byte[] binKey = new byte[inKey.available()];
                inKey.read(binKey, 0, binKey.length);
                inKey.close();

                privKey = PrivateKeyFactory.createKey(binKey);
                keyPair = new AsymmetricCipherKeyPair(new AsymmetricKeyParameter(false), privKey);

                rsaPriv = (RSAPrivateCrtKeyParameters)keyPair.getPrivate();
                rsaPub = (RSAPrivateCrtKeyParameters)keyPair.getPublic(); 
```

接下来我可以尝试什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T07:45:52.250

我在 Java 中尝试了这个东西，这应该让我走上 J2ME 的正确轨道。这是代码：

```
public class EncrypDecrypt {
private RSAPrivateCrtKey rsaPriv;
private RSAPublicKey rsaPub;
private BASE64Decoder decoder;
private BASE64Encoder encoder;

public EncrypDecrypt(){
    decoder = new BASE64Decoder();
    encoder = new BASE64Encoder();
    byte[] buffer;
    try {
        FileInputStream in = new FileInputStream("pathtofile.pfx");
        KeyStore kStore = KeyStore.getInstance("PKCS12");
        kStore.load(in, null);

        PrivateKey privKeyEntry = (PrivateKey)kStore.getKey("Key Alias", null); 
        rsaPriv = (RSAPrivateCrtKey) privKeyEntry;
    } catch (Exception ex) {
        Logger.getLogger(EncrypDecrypt.class.getName()).log(Level.SEVERE, null, ex);
    }       
}

public String encrypt(String data){
    try{
        AsymmetricBlockCipher eng = new RSAEngine();
        eng = new PKCS1Encoding(eng);
        RSAKeyParameters publicKey = new RSAKeyParameters(true, rsaPriv.getModulus(), rsaPriv.getPublicExponent());
        eng.init(true, publicKey);

        byte[] encrypted = eng.processBlock(data.getBytes(), 0, data.getBytes().length);
        return encoder.encode(encrypted);
    }
    catch(Exception err){
        return "";
    }
}

public String decrypt(String data){
    try
    {
        byte[] encrypted = decoder.decodeBuffer(data);
        AsymmetricBlockCipher eng = new RSAEngine();
        eng = new PKCS1Encoding(eng);
        RSAKeyParameters privateKey = new RSAKeyParameters(true, rsaPriv.getModulus(), rsaPriv.getPrivateExponent());
        eng.init(false, privateKey);

        byte[] decrypted = eng.processBlock(encrypted, 0, encrypted.length);
        return new String(decrypted);
    }
    catch(Exception err){
        return "";
    }
}
} 
```

# key - panda3d - key.accept 做了一些有趣的事情

> ID：14303336
> 
> 赞同：0
> 
> 时间：2013-01-13T12:16:11.403
> 
> 标签：key, panda3d

我正在使用 panda3d 进行游戏，但是，我在接受时遇到了一些困难：

```
 def acceptKeys(self):

    base.accept("arrowLeft", self.setKeys, ["arrowLeft",1])
    base.accept("arrowRight", self.setKeys, ["arrowRight",1])
    base.accept("arrowUp", self.setKeys, ["arrowUp",1])
    base.accept("arrowDown", self.setKeys, ["arrowDown",1])
    base.accept("space", self.setKeys, ["space",1]) 
```

问题是，它对空间来说绝对适用。它不适用于任何其他键，我也尝试过使用字符键（例如 wasd）！

按下键时似乎什么也没有发生。

我确实使用了 panda3d 手册中给出的键名。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:21:11.220

该[手册](https://www.panda3d.org/manual/index.php/Keyboard_Support)指出您应该使用：

```
 arrow_left
   arrow_right
   arrow_up
   arrow_down 
```

也许就这么简单？

# prolog - prolog显示权重

> ID：14303337
> 
> 赞同：0
> 
> 时间：2013-01-13T12:16:14.437
> 
> 标签：prolog

我将如何在 prolog 中编写一个规则，允许它打印两个节点之间的边缘成本/权重列表？

我的边缘事实输入为

```
edge(X,Y,Weight).
edge(Y,X,Weight). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:33:12.297

You can define a path predicate like this one :

```
path(Node1,Node2,W,Path_Weight) :- edge(Node1,Node2,Tmp), Path_Weight = W+Tmp.
path(Node1,Node2,W,Path_Weight) :- edge(Node1,NextNode,A), path(NextNode,Node2,A+W,Path_Weight). 
```

This should provide you the solution in Path_Weight variable. Hope it helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T13:52:33.573

简而言之，您需要一个规则，该规则将搜索所有`edge`事实以查找匹配项`X to Y`并打印与之相关的重量成本。

如果您确定每个节点都有一个反向事实（这实际上意味着对于每个事实，您的代码中都`edge(X,Y,Edge_Weight)`应该存在一个事实`edge(Y,X,Edge_Weight)`）并且假设这两条边之间的权重与您提供的不同，那么这里是一个代码这将打印 之间所有可能的边缘的重量成本`X and Y`：

```
 find_edge_weight(X,Y, [D]):-
                 edge(X, Y, EdgeCost), /* Checking for an existing edge */
                 find_edge_weight(X,Y,[EdgeCost|D]), /* Adding weight to the list */
                 printList([D]). /* Printing list */

  /* A rule used to print the list */
  printList([EdgeCost|D]):-
                 write_ln(EdgeCost),
                 printList(D). 
```

# ios - 为什么我的 NSDateFormatter 返回 null？

> ID：14303339
> 
> 赞同：3
> 
> 时间：2013-01-13T12:16:50.193
> 
> 标签：ios, nsdateformatter

为什么我的 NSDateFormatter 返回 null？这是我的代码：

```
 NSString *dateString = @"21-12-2012 11:05:15";
  NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
  [dateFormatter setDateFormat:@"dd-MM-yyyy hh:mm:ss"];
  NSDate *dateFromString = [[NSDate alloc] init];
  dateFromString = [dateFormatter dateFromString:dateString];

  [dateFormatter setDateFormat:@"dd/MM/yyyy"];
  NSString *strDate = [dateFormatter stringFromDate:dateFromString]; 
```

我的`strDate`回报

```
21/12/2012 
```

但当：

```
NSString *dateString = @"13-12-2012 13:17:58"; 
```

我的`strDate`回报`null`

这很奇怪，有人遇到过吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T12:18:56.383

使用 HH 代替 hh。

hh 通常是 12 小时时间，而 HH 通常是 24 小时时间。

```
[dateFormatter setDateFormat:@"dd-MM-yyyy HH:mm:ss"]; 
```

一个很好的官方参考，[由苹果自己链接](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html#//apple_ref/doc/uid/TP40002369-SW13)，在[这里](http://www.unicode.org/reports/tr35/tr35-25.html#Date_Format_Patterns)。正如 Zaph 所提到的，另一张好桌子在[这里。](http://userguide.icu-project.org/formatparse/datetime)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T12:20:07.583

你应该使用

```
[dateFormatter setDateFormat:@"dd-MM-yyyy HH:mm:ss"]; 
```

# sql-server - 无法访问数据库

> ID：14303342
> 
> 赞同：0
> 
> 时间：2013-01-13T12:17:16.677
> 
> 标签：sql-server, vb.net, sql-server-2005

我有一个小型 VB.Net 2005 应用程序和 MS SQL 2005 数据库。

这是一个小型 ADO.Net 应用程序，令我惊讶的是，我 100% 完成了这个项目
，而且它对我来说工作得很好，但是在我将项目与数据库一起发送给朋友之后。那没起效。我将数据库发送为`[DB_name].bak`，我的朋友试图恢复它，它给出了错误。他试图在他的本地机器上创建数据库，当他试图将它连接到数据库时，它给了他一个奇怪的错误：

> `(login failed for user 'win7-PC\Win7'), maybe this error occurred' because there is no (win7-PC\Win7) user in SQL Security`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:48:53.327

You are getting the error because your app is using windows authentication to connect to the database. Simply add the user (win7-PC\win7) to SQL as a database owner for that database.

# php - 如何忽略图像路径的 public_html

> ID：14303349
> 
> 赞同：0
> 
> 时间：2013-01-13T12:18:25.290
> 
> 标签：php, url-rewriting, relative-path

我已经设置了自己的简单框架，文件结构如下：

```
root
    libs
    public_html
        product-images
            image1.jpg
            image2.jpg
            etc...
        controllers
        models
        views
        scripts 
```

问题是，我的产品图像 src 必须以一个或两个 ../ 开头，具体取决于您所在的页面。在某些情况下，我必须声明图像的完整路径，如下所示：

```
http://www.mysite.com/public_html/product-images/image1.jpg 
```

显然，这对 SEO 来说不是很好。

我的问题是如何删除 public_html 位但保持所有图像正常工作，而不改变我网站的文件结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:20:36.837

您的 Web 服务器文档根目录应该是 public_html，而不是根目录。

# php - 双引号不能正常复制。我该如何编辑它们？

> ID：14303353
> 
> 赞同：0
> 
> 时间：2013-01-13T12:18:44.623
> 
> 标签：php, wordpress

当我复制带有双引号的单词时，.php 页面显示错误。双引号不会被正常复制。我该如何解决？我可以编辑哪些代码？（我的脚本是 Wordpress。）

例子：`$goster = getenv(“HTTP_USER_AGENT”);`

在上面的示例中，在 HTTP 之前和 AGENT 双引号之后。这是我的用户的问题。我想我必须在 Wordpress 的块引用功能中进行编辑。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:25:34.483

这些是*智能引号*( `e2 80 9c`)，并且不被 PHP 词法分析器视为字符串分隔符，您似乎已经知道了。

将它们替换为单引号`'`或双引号`"`。如果你从一个用智能引号替换普通引号的程序中复制这些，它绝对不是为代码设计的，你应该停止使用它来达到这个目的。

# c++ - 作为可变参数模板参数的方法

> ID：14303356
> 
> 赞同：0
> 
> 时间：2013-01-13T12:19:02.200
> 
> 标签：c++, templates, c++11, function-pointers, variadic-templates

我正在尝试将[这里](https://stackoverflow.com/a/6017872/643005)解释的函数技术扩展到方法。问题是方法签名模板参数。例如，sin 函数的包装器是这样创建的：

```
template<typename Sig, Sig& S> struct wrapper;

template<typename Ret, typename... Args, Ret(&P)(Args...)>
struct wrapper<Ret(Args...), P> {
    // blah
} 
```

然后被实例化

```
wrapper<decltype(sin), sin> 
```

但是对于一种方法，`bool Foo::blah(int)`这种技术被拒绝：

```
template<class C, typename Sig, Sig& S> struct wrapper;

template<class C, typename Ret, typename... Args, Ret(C::*P)(Args...)>
struct wrapper<Ret(C::)(Args...), P> {
    // blah
}

wrapper<decltype(Foo::blah), &Foo::blah> 
```

那么正确的语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:24:39.417

成员函数没有类似的自由函数类型。您需要直接使用指向成员函数的指针。

尝试这样的事情：

```
template <typename C, typename MFP, MFP> struct wrapper;

template <typename C, typename R, typename ...Args, R (C::*MFP)(Args...)>
struct wrapper<C, R (C::*)(Args...), MFP>
{
    // ...
}; 
```

请注意，如果您想承认 CV 和右值限定的所有可能组合，这将变得有点冗长。

# android - Android SimpleDateFormat 解析错误

> ID：14303364
> 
> 赞同：3
> 
> 时间：2013-01-13T12:19:54.800
> 
> 标签：android, sqlite, simpledateformat

我有一个日期解析问题。在我的应用程序中，我从我们的服务器检索新评论。检索到的纪元长时间戳是正确的，但是当我尝试将它们保存到 sqlite db 时，有时最后的评论会解析错误的日期。

简单日期格式：

```
this.dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
this.dateFormat.setTimeZone(TimeZone.getTimeZone("GMT")); 
```

解析：

```
Log.v("GET COMMENT TIME A", ""+cu.getString(cu.getColumnIndex("creation_time")));
try {
    Log.v("GET COMMENT TIME B",""+dateFormat.parse(cu.getString(cu.getColumnIndex("creation_time"))));
    c.setCreation_time(dateFormat.parse(cu.getString(cu.getColumnIndex("creation_time"))));
    Log.v("GET COMMENT TIME C", ""+c.getCreation_time());
} catch (ParseException e) {} 
```

Logcat：以前的评论解析好

```
01-13 13:01:58.009: V/GET COMMENT TIME A(10536): 2013-01-13 12:01:37
01-13 13:01:58.017: V/GET COMMENT TIME B(10536): Sun Jan 13 13:01:37 CET 2013
01-13 13:01:58.017: V/GET COMMENT TIME C(10536): Sun Jan 13 13:01:37 CET 2013 
```

Logcat：最后一条评论解析错误：

```
01-13 13:01:58.064: V/GET COMMENT TIME A(10536): 2013-01-13 12:01:41
01-13 13:01:58.064: V/GET COMMENT TIME B(10536): Sun Jan 13 13:01:41 CET 2013
01-13 13:01:58.064: V/GET COMMENT TIME C(10536): Tue Jan 01 13:01:41 CET 2013 
```

因此，当您查看 logcat GET COMMENT TIME B 和 C 时，您可以看到

```
dateFormat.parse(cu.getString(cu.getColumnIndex("creation_time"))) 
```

首先返回一个更正的解析时间，然后再返回 1 行它解析另一个错误的时间？或者为什么 getCreation_time() 有时会返回错误解析的日期？

编辑：评论只有getter和setter

```
public Date getCreation_time() {
    return creation_time;
}

public void setCreation_time(Date creationTime) {
    this.creation_time = creationTime;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:24:12.463

那么，解析 2 次完全相同的`String`结果有时会产生不同的结果？我能想到的唯一原因`SimpleDateFormat` [是不是线程安全](http://www.codefutures.com/weblog/andygrove/2007/10/simpledateformat-and-thread-safety.html)的。
经常吗？如果您使用变量而不是实例字段会发生什么？

```
DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
dateFormat.setTimeZone(TimeZone.getTimeZone("GMT")); 
Log.v("GET COMMENT TIME A", ""+cu.getString(cu.getColumnIndex("creation_time")));
try {
    Log.v("GET COMMENT TIME B",""+dateFormat.parse(cu.getString(cu.getColumnIndex("creation_time"))));
    c.setCreation_time(dateFormat.parse(cu.getString(cu.getColumnIndex("creation_time"))));
    Log.v("GET COMMENT TIME C", ""+c.getCreation_time());
} catch (ParseException e) {} 
```

# c# - 为什么我们应该在 C# 中使用 hex 定义的 int 的逆版本

> ID：14303365
> 
> 赞同：1
> 
> 时间：2013-01-13T12:20:05.627
> 
> 标签：c#

引用[这篇文章](http://www.codeproject.com/Articles/35134/How-to-calculate-CRC-in-C)：

> 在许多行业中，第一个多项式用于创建 CRC 表，然后将其应用于性能目的。IEEE 802.3 定义的默认多项式是 0xA001（16 位）和 0×04C11DB7（32 位）。**我们在 C# 中，因此我们应该使用它的反转版本**，即 0×8408 用于 16 位，0xEDB88320 用于 32 位。我们还将在示例中使用这些多项式。

为什么我们要在 C# 中使用 hex 定义的 int 的逆版本？
引用文章的作者如何将**04C11DB7**反转为**0xEDB88320**？

我还研究了其他 crc32 C# 和 C 实现。在所有这些中，C 使用 04C11DB7，C# 使用 0xEDB88320

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T14:03:54.357

请避免假设您在 codeproject.com 文章中阅读的任何内容都是准确的，它不是经过同行评审的网站，并且那里往往有很多废话，无法使用 SO 提供的那种工具轻松修复。

它与语言没有任何关系，当您实现 CRC32 时，位顺序是一个可用的选择，就像多项式是一个选择一样。一个例子是使用反向位顺序的 BZip2 和不使用反向位顺序的 GZip。当您将 0xedb88320 写为位并颠倒它们的顺序时，您可以很容易地看到 0xedb88320 与 0x04c11db7 相反：

```
0xedb88320 = 1110 1101 ... 0010 0000
reversed   = 0000 0100 ... 1011 0111
to hex     = 0    4    ... B    7 
```

有关它的更多信息，请参阅此[Wikipedia 文章部分](http://en.wikipedia.org/wiki/Cyclic_redundancy_check#Commonly_used_and_standardized_CRCs)。

# mediaelement.js - 如何播放 .mov 文件？

> ID：14303369
> 
> 赞同：1
> 
> 时间：2013-01-13T12:20:22.997
> 
> 标签：mediaelement.js, mov

我无法使用 mediaelement.js 2.10.1 在 Safari 中播放 .mov 文件（例如用 iPhone 录制的文件）。

我只得到一个黑匣子：

![](../Images/dbb2bd3f97709fa3e85d82c85b15932f.png)

mediaelement.js 是否支持播放 .mov 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:30:32.417

它本身不支持它，但您可以通过在您希望使用的插件下添加对视频/快速时间的支持来修改 MediaElementJS。

但由于 MOV 可能包含并非所有浏览器和插件都支持的编解码器组合，因此不建议这样做。

但是，如果您知道一个事实，您只会查看使用 H.264 和 safari 录制的 MOV 文件，您可以在进行修改时牢记这一点

# opengl - 是否可以比屏幕刷新率更快地进行 GPU 加速 3D 渲染？

> ID：14303372
> 
> 赞同：3
> 
> 时间：2013-01-13T12:20:51.567
> 
> 标签：opengl, render, gpu

*   是否可以比屏幕刷新率更快地进行 GPU 加速 3D 渲染？

*   可以用OpenGL来做吗？如果是，如何，如果不是，使用什么工具？

**笔记**

因为我希望渲染速度快于屏幕刷新率，所以我不介意没有输出到屏幕。事实上，没有输出窗口将是一个优势。

我将以编程方式（例如通过）使用渲染输出`glReadPixels`，或者将其作为视频输出到文件供人们稍后观看。

**我为什么要这样做**

我想做计算机视觉机器人的计算机模拟。模拟机器人将有一个虚拟摄像头来观察这个世界，并将根据摄像头输入采取行动。因此，我希望模拟尽可能快地运行，而不考虑屏幕刷新率。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T12:24:07.950

是的，这绝对可以通过 OpenGL 实现。渲染率与屏幕刷新率无关（这就是为什么您可以看到以 500 FPS 等速度运行的演示）。

至于机制，您可以渲染到屏幕外帧缓冲区并将生成的图像读回主内存。然后，您可以随心所欲地处理/分析它。看：

*   [是否可以让 OpenGL 在内存表面上绘制？](https://stackoverflow.com/questions/7548556/is-it-possible-to-have-opengl-draw-on-a-memory-surface)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:32:14.923

要使用 OpenGL 来完成，我必须简单地将回调函数`glutSwapBuffers`末尾的`display``glFlush`

`glutSwapBuffers`确保显示每个计算的帧，因此在屏幕刷新之前停止程序，此时它将后缓冲区放入可以在屏幕上看到的前缓冲区。

`glFlush`另一方面，仅确保已计算场景并使用新场景更新后台缓冲区（在屏幕上看不到）。因此，新场景计算仅在新场景被渲染之前停止。`glutSwapBuffers`在交换缓冲区之前调用 `glFlush`以确保已计算场景。

**笔记**

在我的应用程序上，`glReadPixels`即使没有 ，我也可以正确读取像素`glutSwapBuffers`，因此它是从后缓冲区读取的。

然而，仅仅调用来检索 700 像素会有很大的性能损失`glReadPixels`：FPS 下降到 200FPS。我猜这是因为后备缓冲区必须位于 GPU 内存的某个位置（请更正/确认这一点），并且`glReadPixels`正在进行 GPU -> CPU 通信，这非常昂贵。

这意味着无论渲染计算的速度有多快，我的应用程序仍然会在 200FPS 时遇到瓶颈，除非我长大并学习如何在 GPGPU 上进行处理并从那里访问后台缓冲区。

# c# - 在弹跳球中使用位图

> ID：14303373
> 
> 赞同：0
> 
> 时间：2013-01-13T12:20:56.390
> 
> 标签：c#, .net, winforms, bitmap, paintevent

我有一个`WinForm`应用程序*'Bouncing Balls'*，我需要在 a 上绘制球`bitmap`并在此表单上显示位图。

我有一个`plusButton`添加新球的，我将每个新球保存在一个列表中。

现在，该`Form_Paint`方法告诉每个球自己画，它工作正常，直到有很多球并且所有应用程序变得非常慢..

这是我的代码：

表单代码的paint方法：

```
 private void Form1_Paint(object sender, PaintEventArgs e)
 {
     ballsArray.drawImage(bmp,e, ClientRectangle);
 } 
```

**注意：** `ballsArray`来自 type `AllBalls`，这是一个包装球方法的类，在他的 c'tor 中，我正在创建一个保存每个球的列表。,`bmp`是在表单加载时创建的 - on`Form_Load()`方法。

代码的drawImage `ballsArray`：

```
 public void drawImage(Bitmap bmp,PaintEventArgs e, Rectangle r)
 {
     foreach (Ball b in allBalls)
     {
         b.drawImage(bmp,e, r);
     }
 } 
```

`drawImage`球码：

```
 public void drawImage(Bitmap bmp, PaintEventArgs e, Rectangle r)
  {
      using (Graphics g = Graphics.FromImage(bmp))
      {
          e.Graphics.FillEllipse(brush, ballLocation);
          g.DrawImage(bmp, 0, 0);
      }
  } 
```

**注意：** `ballLocation`是一个矩形，表示每一步运动中球的位置。

那么我做错了什么？是什么导致应用程序缓慢？

我有一个约束要在位图上绘制所有内容并将其呈现在表单上。我还传递了加载表单时创建的位图，因为我需要在其上绘制每个位图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T13:22:20.160

一些使这个速度更快的基本技术：

*   不要对自己进行双重缓冲，尤其是不要双重缓冲两次。通过将表单的 DoubleBuffer 属性设置为 true 获得的双缓冲优于您自己进行的大多数双缓冲。缓冲区经过高度优化，可以有效地与您的视频适配器设置配合使用。因此，完全删除您的`bmp`变量并绘制到您从 Paint 事件处理程序参数中获得的 e.Graphics。

*   您没有使用传递的`r`参数。可能旨在支持剪切隐形球。您要传递的是 e.ClipRectangle，您可以跳过完全超出此矩形的画球。虽然这是一种优化，但当您使用 Aero 主题时它并不是通常有用的，而且您确实会得到不一致的重绘率，因此您可能想跳过那个。

*   目前还不清楚为什么在绘制球时同时使用 Graphics.FillEllipse 和 Graphics.DrawImage。图像应该与圆圈重叠，因此只需删除 FillEllipse。

*   非常注意存储球图形的 Bitmap 对象。您要确保的第一件事是它是按照图像的确切大小绘制的，因此不必重新缩放。重新缩放非常昂贵。虽然您在 DrawImage() 调用中没有任何重新缩放，但如果位图的分辨率与视频适配器的分辨率不同，您仍然会得到它。下一步将解决

*   球位图的像素格式*非常*重要。您需要一个允许将位图直接复制到视频内存而无需任何格式转换的设备。在任何现代机器上，该格式都是 PixelFormat.Format32bppPArgb。差异是巨大的，它的绘制速度比其他任何一个都快十倍。您不会从您添加的图像资源中获得这种格式，您必须在程序启动时创建该位图。检查[此答案](https://stackoverflow.com/a/2016509/17034)以获取所需的代码。

当您遵循这些准则时，您应该能够将渲染速度至少提高 15 倍。如果这仍然足够，那么您确实需要转向 DirectX，它具有无与伦比的优势，能够将球图形存储在视频内存中，因此您不会将昂贵的 blt 从主内存转移到视频内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:25:43.970

`DrawImage`on `Paint`（或就此而言 on `MouseMove`）是非常糟糕的设计。

[Graphics.DrawImage](http://msdn.microsoft.com/en-us/library/42807xh1.aspx)是昂贵的操作，而且对屏幕来说是额外的昂贵。为了改善您的用户体验（缓慢），您应该在 MouseDown/MouseUp 事件上进行绘制。

此外，首先在您的`drawImage`方法中绘制到 MemoryBuffer 并在准备好最终图像后，在 UI 上绘制一次。这种技术称为[双缓冲](http://msdn.microsoft.com/en-us/library/b367a457.aspx)。

[不要闪烁！双缓冲！- 代码项目](http://www.codeproject.com/Articles/12870/Don-t-Flicker-Double-Buffer)

此外，您还可以查看[BitBlit](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183370%28v=vs.85%29.aspx) Native API 以快速将颜色/图像传输到屏幕。

一个简约的 c# 示例在[这里](http://www.java2s.com/Code/CSharp/Windows/BitBlt.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T12:32:16.833

在表单上启用双缓冲 ( `DoubleBuffered = true`)。

# android - 从片段中保存和获取数据

> ID：14303375
> 
> 赞同：0
> 
> 时间：2013-01-13T12:21:06.883
> 
> 标签：android, android-fragments, savestate

我有一个`ViewPager`带有 4 个片段的片段，在最后一个片段中我想进行验证并保存插入到先前片段中的值。

我试图用数据覆盖`onSaveInstanceState`并保存 a`Bunble`但该方法没有接到电话（仅当屏幕熄灭时）。

如何保存数据并从父活动访问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:32:15.697

我认为鉴于您的要求，您最好将模型对象从 Activity 依次传递给每个片段。每个片段都将存储模型中所需的数据，一旦最后一个片段完成，就可以对其进行验证。

作为旁注，我相信 onSaveInstanceState 用于存储 Activity / Fragment 的当前状态，以便可以重新初始化它而无需调用可能的长时间运行的后台任务，而不是共享数据的方式。

# python - list() 和 sort() 函数需要帮助

> ID：14303376
> 
> 赞同：-1
> 
> 时间：2013-01-13T12:21:08.897
> 
> 标签：python

我是 Python 的新手，完全被卡住了。基本上，我的列表中有如下信息：

```
[a, b, c, d]

[e, f, g, h, i] 
```

等等....

从每个列表中，我想获取第二个和最后一个数据，以便它返回以下内容

```
b,d
f,i 
```

我一直在研究使用 sort() 函数或 split() 函数，但老实说我不知道​​从哪里开始。

请有人可以帮助我或指出正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T12:23:07.103

```
for lis in lists:
    print(lis[1], lis[-1]) 
```

Where`[1]`给出第二个元素并`[-1]`给出最后一个。列表索引从 开始`0`，这就是`[1]`给出第二个元素的原因。负索引也是有效的，并且从 开始`-1`，它们从列表的末尾倒数。负索引在处理可变长度列表时特别有用。

在你的情况下`lists`是`[[a, b, c, d], [e, f, g, h, i]]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:24:18.710

你应该做这个：

```
# Assuming the letters below actually have values,
# otherwise you must make these characters
mylist = [a,b,c,d]

secondElement = mylist[1]
lastElement = mylist[-1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T16:04:50.090

`list[-1]`将返回列表的最后一个元素，`list[1]`并将返回列表的第二个元素，例如

```
>>>a = [1,2,3,4]
>>>b = [5,6,7,8]

>>>print a[1],a[-1]
4,2
>>>print b[1],b[-1]
6,8

index from left:  0, 1, 2, 3
list           : [5, 2, 2, 4]
index fro right: -4,-3,-2,-1 
```

# java - Android PreferenceScreen“颜色选择器”实现

> ID：14303378
> 
> 赞同：7
> 
> 时间：2013-01-13T12:21:16.737
> 
> 标签：java, android, live-wallpaper, preferenceactivity

有人能帮我吗？我需要对偏好屏幕（动态壁纸设置）实施一些颜色选择器。有什么解决方案吗，一些开源的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-07-28T20:42:48.357

对于我期望的原始提问者来说为时已晚，但这是我在这里找不到我需要的东西后写的库。它可以这样使用：

```
<PreferenceScreen
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">

    <com.rarepebble.colorpicker.ColorPreference
        android:key="myColor"
        android:title="@string/pref_title"
        android:defaultValue="#f00"
        />
</PreferenceScreen> 
```

更多信息在这里：

[适用于 Android 的 HSV-Alpha 颜色选择器](https://github.com/martin-stone/hsv-alpha-color-picker-android)(GitHub)。

[HSV-Alpha 颜色选择器演示](https://play.google.com/store/apps/details?id=com.rarepebble.colorpickerdemo)(Google Play)。

我希望它对其他人有用。

[![颜色偏好](../Images/1ecc3e70f9335d7b8d42e5b3cafb3ff6.png)](https://i.stack.imgur.com/GS8xx.png) [![选色器](../Images/cedde03c1ab68afb11f8a14ce2714a8c.png)](https://i.stack.imgur.com/Ominz.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-13T12:43:11.283

我试过这个：

1.  [mColorPicker](http://code.google.com/p/color-picker-view/)

2.  [mColorPicker2](http://code.google.com/p/android-color-picker/)

这是非常容易使用。您可以下载代码并查看示例。

这是它的外观：

![在此处输入图像描述](../Images/8dcd56f1f7896c4a2154fa11cedaa992.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-08-03T23:05:36.680

如果有人正在寻找一个很棒的新的使用材料设计的安卓颜色选择器，我已经从 github 分叉了一个很棒的项目，并制作了一个简单易用的安卓颜色选择器对话框。

这是项目：[Android Color Picker](https://github.com/Pes8/android-material-color-picker-dialog)

[![Android 颜色选择器示例](../Images/525e1b1891320d8da7e4232cdd3aee04.png)](https://i.stack.imgur.com/8S7V0.jpg)

很容易自己实现。有一个完整的 android studio 项目可供下载，看看它是如何工作的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-25T13:38:43.750

你可以检查这个：

[颜色选择器集合](https://github.com/gabrielemariotti/colorpickercollection)

如果您想让用户从一组颜色中进行选择，您可以使用 ColorPickerCollection 库。

# spring - 如何记录 Spring 加载的属性？

> ID：14303381
> 
> 赞同：13
> 
> 时间：2013-01-13T12:22:08.970
> 
> 标签：spring

是否可以简单地记录 spring 加载的属性文件的所有内容`<context:property-placeholder />`？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-07-17T04:45:20.403

您可以将日志级别设置`org.springframework.core.env.PropertySourcesPropertyResolver`为“调试”。然后，您将能够在解析过程中看到属性的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T13:44:32.353

你可以这样做：

```
<context:property-placeholder properties-ref="myProperties"/>

<bean id="myProperties"
      class="org.springframework.beans.factory.config.PropertiesFactoryBean">
  <property name="locations">
    <list>
      .. locations
    </list>
  </property>
</bean> 
```

并添加一个类似于下面的日志记录bean（这里基于注释并使用slf4j api）：

```
@Component
public class PropertiesLogger {
  private static Logger logger = LoggerFactory.getLogger(PropertiesLogger.class);

  @Resource("myProperties")
  private Properties props;

  @PostConstruct
  public void init() {
    for (Map.Entry<Object, Object> prop : props.entrySet()) {
      logger.debug("{}={}", prop.getKey(), prop.getValue());
    }
  }
} 
```

# opengl - OpenGL 2.1+ 中的 FBO 深度纹理

> ID：14303384
> 
> 赞同：1
> 
> 时间：2013-01-13T12:22:24.450
> 
> 标签：opengl, glsl

我目前正在学习使用 GLSL 创建 shadown，但我在这里遇到了一些麻烦：
1\. 在 GLSL 3.3 中，我们可以在片段着色器中使用此语句：

```
layout(location = 0) out float fragmentdepth; 
```

只将深度 16 位写入纹理（`GL_DEPTH_COMPONENT16`如前所述），但我怎样才能在 OpenGL 2.1（GLSL 1.20）中做类似的事情？

1.  据我所知，对于渲染深度缓冲区，我们只需将相机位置更改为光照位置，将相机方向更改为光照方向，如果我们正在绘制真实场景，则需要更改回来，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T19:26:45.377

> 在 GLSL 3.3 中，我们可以在片段着色器中使用此语句：
> 
> 仅将深度 16 位写入纹理（之前设置为 GL_DEPTH_COMPONENT16）

不，你不能。

这将设置`fragmentdepth`为写入*颜色缓冲区*。并且您不能将具有`GL_DEPTH_COMPONENT16` [图像格式](http://www.opengl.org/wiki/Image_Format)的图像附加到FBO[的`GL_COLOR_ATTACHMENTi`附加点](http://www.opengl.org/wiki/Framebuffer_Object#Framebuffer_Object_Structure)。试图这样做[会给你一个`GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT`错误](http://www.opengl.org/wiki/Framebuffer_Object#Attachment_Completeness)。

在*所有*版本的 GLSL 中，写入附加深度缓冲区的唯一方法是写入`gl_FragDepth`. 在*所有*版本的 GLSL 中，您只能将一个深度缓冲区附加到 FBO。尽管[图像加载/存储](http://www.opengl.org/wiki/Image_Load_Store)确实允许您解决这个问题，但是您会失去深度测试等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T13:28:12.693

如此处所述[，](http://www.opengl.org/discussion_boards/showthread.php/164387-Are-EXT-s-necessary-for-FBO-use-in-OpenGL-2-1)如果针对 OpenGL 2.1，您需要使用 FBO 扩展 (EXT)。另外，为什么您仍在使用固定管道？它已被弃用。如果您的硬件允许 - 使用 OpenGL 3.3+，然后利用（核心）FBO您可以在其中绘制深度缓冲区数据的纹理附件（或渲染缓冲区）。是的，您仍然可以对已弃用的配置文件执行相同操作，但是从那时起，现代 OpenGL 向前迈出了一大步。

无论如何，[这](http://www.opengl.org/discussion_boards/showthread.php/163855-Render-to-depth-texture)是您的版本所需要的。

# arrays - Perl - 将哈希转换为数组而不使用其他变量

> ID：14303389
> 
> 赞同：0
> 
> 时间：2013-01-13T12:23:16.237
> 
> 标签：arrays, perl, hash, casting

是否可以在 perl 中将哈希转换为数组但不使用其他变量？这按预期工作，但使用了另一个变量（@arr）：

```
perl -wlae '%hash=(name=>"linus", forename=>"torvalds "); @arr=%hash; print "@arr"' 
```

我已经尝试过这些但都没有奏效（顺便说一句，他们做了什么？）：

```
perl -wlae '%hash=(name=>"linus", forename=>"torvalds "); print "@hash"'
perl -wlae '%hash=(name=>"linus", forename=>"torvalds "); print "%@hash"'
perl -wlae '%hash=(name=>"linus", forename=>"torvalds "); print "@%hash"' 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-13T12:49:37.890

```
perl -wlae '%hash=(name=>"linus", forename=>"torvalds "); print (%hash);' 
```

将表达式放在括号中会在列表上下文中对其进行评估，就像分配给列表变量一样。

在 的情况下`print`，这种转换是不必要的，因为它对数组和散列都使用列表上下文。但是如果你想用哈希做其他数组风格的事情，你可以使用它，例如

```
$first = (%hash)[0];
echo $first; 
```

# c# - 类中的 C# 代码块

> ID：14303391
> 
> 赞同：-1
> 
> 时间：2013-01-13T12:23:19.873
> 
> 标签：c#, class, syntax

在java中，我可以编写这样的代码。

```
public class Map1 extends MapInfo {

    {
        // I can access fields of the super class
    }

} 
```

目前在sharpdevelop中编写此代码，代码完成没有出现。

```
public class Map1 : MapInfo {

    {
        // It gives error.
        // Invalid token '{' in class, struct, or interface member declaration (CS1519) - C:\Users\sriharshach....st\Map.cs:10,3
    }

} 
```

有没有办法在 c# 中编写相同的代码？（即，不在构造函数中）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T12:31:06.717

在 C# 领域它会是

```
public class Map1 : MapInfo
{
   // You can access protected and public fields / methods from the SuperClass
   // and internal + protected internal 
} 
```

**编辑：**有太多花括号并修正了评论

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:28:17.750

与 Java 一样，答案取决于字段的访问级别。假设这些字段不是私有的，您应该能够访问超类字段，就好像它们属于子类一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T12:29:07.177

在 C# 中，您可以在派生类中随处访问超类的非私有字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T12:32:27.257

在 C# 中，您可以使用 继承/实现基类`:`，但不能在类中立即使用 {}。您需要方法或构造函数名称后跟 {}

例如

```
public class ParentFoo {
  public Parentfoo() {}
}

public class ChildFoo:ParentFoo -- inheriting parentfoo
{
   public ChildFoo(){}
} 
```

# java - 用java自动登录到安全网站？

> ID：14303394
> 
> 赞同：1
> 
> 时间：2013-01-13T12:23:48.023
> 
> 标签：java, login, automation, httpclient

作为我正在做的一个小项目的一部分，我将永远不会真正投入“生产”，我需要能够登录到一个非常安全的网站并检索 html。

我一直在研究使用 apache commons HTTPCLient 来做到这一点。但是我只是想确保它甚至是可能的，因为这个网站非常安全并且可能有 sso 登录方法？如果可能，最好的方法是什么？登录后，我需要能够浏览大约三个页面，因此需要以某种方式存储 cookie 或会话。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T12:28:12.977

是的，它可以使用 apache http 组件来做到这一点，但是对于与复杂网站的交互，没有什么（我知道）能胜过[HtmlUnit](http://htmlunit.sourceforge.net/)。要使用 httpcomponents，您需要“编写”整个 http 请求序列，如果中间的任何内容依赖于动态内容/javascript，您就会遇到问题。

另一方面，HtmlUnit 是一个几乎完整的“盒子里的鲍泽”，您可以在更高级别上编写交互脚本 - 单击它，填写这些值，提交等。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-10T11:21:43.237

您需要 jsoup.jar 文件将响应发送到特定网站通过检查元素查看 gmail 表单数据以进行元素验证

```
 package com.kowthal;

import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.net.CookieHandler;
import java.net.CookieManager;
import java.net.URL;
import java.net.URLEncoder;
import java.util.ArrayList;
import java.util.List;
import javax.net.ssl.HttpsURLConnection;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

public class HttpUrlConnectionExample {

  private List<String> cookies;
  private HttpsURLConnection conn;

  private final String USER_AGENT = "Mozilla/5.0";

  public static void main(String[] args) throws Exception {

    String url = "https://accounts.google.com/ServiceLoginAuth";
    String gmail = "https://mail.google.com/mail/";

    HttpUrlConnectionExample http = new HttpUrlConnectionExample();

    // make sure cookies is turn on
    CookieHandler.setDefault(new CookieManager());

    // 1\. Send a "GET" request, so that you can extract the form's data.
    String page = http.GetPageContent(url);
    String postParams = http.getFormParams(page, "username@gmail.com", "password");

    // 2\. Construct above post's content and then send a POST request for
    // authentication
    http.sendPost(url, postParams);

    // 3\. success then go to gmail.
    String result = http.GetPageContent(gmail);
    System.out.println(result);
  }

  private void sendPost(String url, String postParams) throws Exception {

    URL obj = new URL(url);
    conn = (HttpsURLConnection) obj.openConnection();

    // Acts like a browser
    conn.setUseCaches(false);
    conn.setRequestMethod("POST");
    conn.setRequestProperty("Host", "accounts.google.com");
    conn.setRequestProperty("User-Agent", USER_AGENT);
    conn.setRequestProperty("Accept",
        "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
    conn.setRequestProperty("Accept-Language", "en-US,en;q=0.5");
    for (String cookie : this.cookies) {
        conn.addRequestProperty("Cookie", cookie.split(";", 1)[0]);
    }
    conn.setRequestProperty("Connection", "keep-alive");
    conn.setRequestProperty("Referer", "https://accounts.google.com/ServiceLoginAuth");
    conn.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
    conn.setRequestProperty("Content-Length", Integer.toString(postParams.length()));

    conn.setDoOutput(true);
    conn.setDoInput(true);

    // Send post request
    DataOutputStream wr = new DataOutputStream(conn.getOutputStream());
    wr.writeBytes(postParams);
    wr.flush();
    wr.close();

    int responseCode = conn.getResponseCode();
    System.out.println("\nSending 'POST' request to URL : " + url);
    System.out.println("Post parameters : " + postParams);
    System.out.println("Response Code : " + responseCode);

    BufferedReader in = 
             new BufferedReader(new InputStreamReader(conn.getInputStream()));
    String inputLine;
    StringBuffer response = new StringBuffer();

    while ((inputLine = in.readLine()) != null) {
        response.append(inputLine);
    }
    in.close();
    // System.out.println(response.toString());

  }

  private String GetPageContent(String url) throws Exception {

    URL obj = new URL(url);
    conn = (HttpsURLConnection) obj.openConnection();

    // default is GET
    conn.setRequestMethod("GET");

    conn.setUseCaches(false);

    // act like a browser
    conn.setRequestProperty("User-Agent", USER_AGENT);
    conn.setRequestProperty("Accept",
        "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
    conn.setRequestProperty("Accept-Language", "en-US,en;q=0.5");
    if (cookies != null) {
        for (String cookie : this.cookies) {
            conn.addRequestProperty("Cookie", cookie.split(";", 1)[0]);
        }
    }
    int responseCode = conn.getResponseCode();
    System.out.println("\nSending 'GET' request to URL : " + url);
    System.out.println("Response Code : " + responseCode);

    BufferedReader in = 
            new BufferedReader(new InputStreamReader(conn.getInputStream()));
    String inputLine;
    StringBuffer response = new StringBuffer();

    while ((inputLine = in.readLine()) != null) {
        response.append(inputLine);
    }
    in.close();

    // Get the response cookies
    setCookies(conn.getHeaderFields().get("Set-Cookie"));

    return response.toString();

  }

  public String getFormParams(String html, String username, String password)
        throws UnsupportedEncodingException {

    System.out.println("Extracting form's data...");

    Document doc = Jsoup.parse(html);

    // Google form id
    Element loginform = doc.getElementById("gaia_loginform");
    Elements inputElements = loginform.getElementsByTag("input");
    List<String> paramList = new ArrayList<String>();
    for (Element inputElement : inputElements) {
        String key = inputElement.attr("name");
        String value = inputElement.attr("value");

        if (key.equals("Email"))
            value = username;
        else if (key.equals("Passwd"))
            value = password;
        paramList.add(key + "=" + URLEncoder.encode(value, "UTF-8"));
    }

    // build parameters list
    StringBuilder result = new StringBuilder();
    for (String param : paramList) {
        if (result.length() == 0) {
            result.append(param);
        } else {
            result.append("&" + param);
        }
    }
    return result.toString();
  }

  public List<String> getCookies() {
    return cookies;
  }

  public void setCookies(List<String> cookies) {
    this.cookies = cookies;
  }

} 
```

# android - InAppBrowser 不显示键盘 [Cordova 2.3.0]

> ID：14303397
> 
> 赞同：1
> 
> 时间：2013-01-13T12:24:04.957
> 
> 标签：android, cordova, childbrowser

我正在使用 Cordova 2.3.0 的新 InAppBrowser。有一些与之相关的问题。

第一：当我点击地址栏更改网址时，键盘不显示[我在Android上运行]。

它仅在我在文本框中单击很长时间并选择全选，复制和粘贴...然后显示键盘[有时即使我这样做也不会显示]。

第二：当我从浏览器打开一个pdf文件时，它没有打开......为什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:39:42.500

可以通过将桥接模式设置为 iframe 来修复 PDF 问题

科尔多瓦问题可以在[这里找到](https://issues.apache.org/jira/browse/CB-2102?page=com.atlassian.jira.plugin.system.issuetabpanels%3aall-tabpanel)

# mysql - MySQL 重复输入错误 #1062

> ID：14303401
> 
> 赞同：1
> 
> 时间：2013-01-13T12:24:17.150
> 
> 标签：mysql

我正在运行修剪查询以删除 slug 列中带有尾随“-”的任何行。

我有重复的行，但现在是必需的。

如何修复错误以便它运行修剪查询？

```
UPDATE terms
SET slug = TRIM(TRAILING '-' FROM slug); 
```

错误：`#1062 - Duplicate entry 'system' for key 'slug'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:28:07.257

看起来 column slug 被定义为 UNIQUE 或 Primary KEY。如果您想保留重复记录，您可能需要从该列中删除 UNIQUE 或 PRIMARY KEY 或/并引入不同的 PRIMARY KEY/UNIQUE 列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T12:30:21.627

如果您`UNIQUE`在列上设置了约束`slug`，则必须删除它：

```
ALTER TABLE terms DROP INDEX my_unique_constraint 
```

请注意，上述内容仅适用于 MySQL - 该语句因数据库而异。

# ember.js - 删除记录后列表未更新

> ID：14303406
> 
> 赞同：13
> 
> 时间：2013-01-13T12:24:30.517
> 
> 标签：ember.js, ember-data

我有一个 ArrayController，其内容是在这样的路由中定义的：

```
App.UsersRoute = Ember.Route.extend({
  model: function() {
    return App.User.find();
  },

  setupController: function(controller, model) {
    this._super(controller, model);
    this.controllerFor('application').set('currentRoute', 'users');
  }
}); 
```

我在模板中列出数据：

```
<ul>
  {{#each user in arrangedContent}}
  <li>
    {{user.lastName}} {{user.firstName}}
    {{#linkTo "users.edit" user class="btn btn-primary btn-small"}}EDIT{{/linkTo}}
  </li>
  {{/each}}
</ul> 
```

它工作正常。

如果我创建一个新项目，它会自动添加到模板中的列表中：

```
App.UsersNewRoute = Ember.Route.extend({
  model: function() {
    return App.User.createRecord({firstName: '', lastName: ''});
  }
}); 
```

但是当我在“编辑”视图中删除一个项目时，它不起作用：

```
App.UsersEditController = Ember.ObjectController.extend({
  ...

  destroy: function() {
    this.get('content').deleteRecord();
    this.get('store').commit();
    this.transitionToRoute("users.index");
  }
}); 
```

但是在“新”视图中，如果我删除新创建的项目，它会起作用（没有提交）。

在编辑控制器中，如果我删除“提交”，列表会更新，但是当我执行另一个操作时，列表会重新加载，并且删除的项目会重新出现（正常）。

那么，如何删除一个项目呢？

注意：我使用的是刚刚刷新的 ember 和 ember-data 的“主”代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-11T17:08:21.017

我刚刚在完全不同的情况下遇到了类似的问题。

我正在使用“ [grunt-ember-boilerplate](https://github.com/lsdafjklsd/grunt-ember-boilerplate) ”（如果您喜欢 CoffeeScript 和 Ember，强烈推荐）。它带有一个 Ember Data 版本，该版本有一个奇怪的错误，即正确删除的记录会保留在缓存中，因此不会从列表中删除。

我没有时间弄清楚到底发生了什么。所以我只是尝试获取最新版本的 Ember Data (2013-05-10 10:20:34 -0700) 并立即解决了问题。

只是在这里发布以防其他人遇到类似问题。

此外，当 Jakub Arnold 谈到不提交“存储”并使用事件侦听器来确保干净的状态时，我同意他的观点。就在今天，我发现了一篇关于该主题的非常有用的博客文章“ [Ember Data 的模式和反模式](http://nragaz.com/post/44226445908/patterns-and-anti-patterns-for-ember-data)”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T09:30:22.063

您还应该仅在删除记录后进行转换，因为提交是异步发生的。

```
var user = this.get("content");

user.one("didDelete", this, function() {
  this.transitionTo("users.index");
});

user.deleteRecord();
user.get("transaction").commit(); 
```

另请注意，提交交易优于提交商店。如果您稍后决定将记录添加到它自己的事务中，您将有更少的工作要做，如果您不这样做，它仍将使用与`defaultTransaction`提交存储相同的方式。

# javascript - 预加载图像数组以加快加载速度

> ID：14303412
> 
> 赞同：1
> 
> 时间：2013-01-13T12:25:11.697
> 
> 标签：javascript, jquery, html

我在 SO 中阅读了关于预加载图像数组以更快地加载网页的信息，这样当应用程序需要显示它们时，它们就会被加载并可以立即显示。但我的疑问是在哪里包含代码片段：

*   在页面底部或

*   在开始（`<head>`）？

    因为，我还读到，为了快速加载，应该在底部包含所有 javascript。哪个会是更好的方法？还是我必须在这两种方式上妥协？

javascript代码：

```
<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
<script type="text/javascript">
function preload(arrayOfImages) {
    $(arrayOfImages).each(function(){
        $('<img/>')[0].src = this;
    });
}
preload([
    'images/bg.jpg',
    'images/logo1.png',
]);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:47:57.127

Even though all the other answers are inherently correct. They don't seem to address you directly.

Your script is not making use of any DOM elements. Which means that waiting for the DOM to load is not a concern at all.

The halt of the layout rendering while downloading a `<script/>` is always a concern (unless you use new HTML5 capabilities such as `async`), that's why they prefer to place it before `</body>`.

By placing it before `</body>`, your rendering will not be halted. Performance-wise, iterating such a tiny array may only be a micro-optimization.

By the way, you don't need to wrap the array in `$()` to use `.each()`, you should use `$.each`.

```
function preload(arrayOfImages) {
    $.each(arrayOfImages, function(index, image){
        $('<img/>')[0].src = image;
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:51:02.403

Why not making a DIV on the very begining of the BODY section and move that DIV outside of the visible area?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T12:38:00.413

一般来说，把你的函数调用和页面加载完成后你想做的所有事情都放在里面

```
$(document).ready(function() {
  // Handler for .ready() called.
}); 
```

（见[文档](http://api.jquery.com/ready/)）。

这也适用于您对`preload(...)`. 当你使用`$('<img/>')[0].src = this`时，浏览器会根据这个注释缓存图片：[Preloading images with jQuery](https://stackoverflow.com/questions/476679/preloading-images-with-jquery#comment5548708_476681)

**编辑：**`<script/>`正如 Konstantin 指出的那样，标签在 DOM 树中的位置只起次要作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T12:44:15.617

HTML 页面的顶部和底部是相关的，因为这是浏览器读取页面的方式。顶部的东西在底部的东西之前完成。

关于图像预加载，您应该在`<head>`. **为什么？**因为你还不需要使用它。页面的其余部分还没有准备好，很可能您要放置图像的地方甚至还不存在。

我们通常将 JavaScript 放在页面底部，因为我们想在 DOM 准备好时做一些事情。你也可以把它放在上面！但是您必须使用`$(document).ready(function(){});`才能确定它会按预期工作。

因此，在页面的其余部分也在加载时，在顶部（或使用 window.onload）启动预加载。除非您使用 CSS 执行此操作，或者如果您绑定发生在页面顶部的特定 div 的加载事件并在那里预加载您的图像，否则您不会真正从顶部执行此操作获得太多好处。

# python - python解析流中的音频

> ID：14303417
> 
> 赞同：0
> 
> 时间：2013-01-13T12:25:55.830
> 
> 标签：python, audio, stream, analyzer

我想用python分析我的音频输入流。
包含来自无线电接收器的数据。

有时无线电信号包含一个 5 个音调的块。我需要分析这个块的流。
他们看着像是：

![原则](../Images/0e9c4a48553ca9d5427673f41f0ba414.png)

频率如下所示：

```
number       1    2    3    4    5    6    7    8    9    0    R
Frequency/Hz 1060 1160 1270 1400 1530 1670 1830 2000 2200 2400 2600 
```

python中实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T18:03:25.293

将所有数据短时间存储到一个 70 ms 的缓冲区中，并不断使用 FFT 搜索您要搜索的每个频率的尖峰。连续收集5个数字以完成序列。每次收集一个值时，请等待 70 毫秒，然后再收集下一个数字。

# python - 如何使用Python将注释插入pdf

> ID：14303418
> 
> 赞同：5
> 
> 时间：2013-01-13T12:25:57.010
> 
> 标签：python, pdf

我想在现有的 pdf 文件中添加文本或注释来解释一些关键词。

起初我尝试使用 pyPdf 和 reportlib 来合并原始 pdf 文件和新生成的解释 pdf 文件，但它不起作用。因为原始文件挡住了所有解释pdf的文字，使新的pdf文件不可见。不知道为什么？如果我测试将两个新生成的解释 pdf 文件合并为一个，则效果很好。

所以我想尝试使用另一种方式通过python将注释插入到现有的pdf文件中。有相关经验的可以给我建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-06T07:50:52.810

使用 PyPDF 向现有 pdf 添加水印当然对我有用：

```
template = PdfFileReader(file("template.pdf", "rb")) #template pdf
output=PdfFileWriter() #writer for the merged pdf
for i in range(new.getNumPages()):
    page=template.getPage(i)
    page.mergePage(new.getPage(i))
    output.addPage(page) 
```

阅读我的其他 SO[答案](https://stackoverflow.com/questions/20221991/pypdf-watermarking-returns-error/20262007#20262007)以供参考。

阅读我的完整[文章](http://www.prahladyeri.com/2013/11/how-to-generate-pdf-in-python-for-google-app-engine/)，了解更多关于 python 生成和合并的信息。

# google-visualization - 使用不同的数据系列作为柱形图列的静态标签

> ID：14303426
> 
> 赞同：1
> 
> 时间：2013-01-13T12:26:44.140
> 
> 标签：google-visualization

我目前有一个柱形图，显示特定产品的销售数量占所有销售额的百分比。理想情况下，我希望用我拥有的附加数据系列的实际销售产品价值来标记每一列。有没有办法做到这一点？我最接近的是有一个带有两个不同垂直轴的折线图，但我真的想要一些带有列的东西 - 以及静态显示的数据标签。

非常感谢您对此的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:58:32.380

您可以使用 {v: .2, f: '234 units'} 来区分值（20%，绘制的内容）和鼠标悬停时显示的格式（234 个单位，突出显示数据时显示的内容）。

例如：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = new google.visualization.DataTable();
  data.addColumn('string', 'Product');
  data.addColumn('number', 'Percent');
  data.addRows([
    ['A', {v: .1, f: '123 units'}],
    ['B', {v: .2, f: '234 units'}],
    ['C', {v: .3, f: '345 units'}],
    ['D', {v: .4, f: '456 units'}],
    ['E', {v: .5, f: '567 units'}],
  ]);

  // Create and draw the visualization.
  new google.visualization.ColumnChart(document.getElementById('visualization')).
      draw(data,{
        width:600,
        height:400,
        vAxis: {
          format:'#,###%'
        }
      }
          );
} 
```

我想这就是你要找的。如果您正在寻找不同的东西，请告诉我。

# javascript - 我网站上的 Javascript 语法错误

> ID：14303427
> 
> 赞同：-3
> 
> 时间：2013-01-13T12:27:03.093
> 
> 标签：javascript, syntax-error

```
<script type="text/javascript">
$('.star').mouseover(function (){
var star = $(this).index() 1;
$(this).parent().css("background-position","0 -" (32 * star) "px");
});

$('.star-rating').mouseout(function (){
var originalresult = $(this).attr('id').split('result')[1];
$(this).css("background-position","0 -" (32 * originalresult) "px");
});
</script>

<div class="star-rating" id="rating1result0">
<div class="star"></div>
<div class="star"></div>
<div class="star"></div>
<div class="star"></div>
<div class="star"></div>
</div>
<div class="result">
<span style="color:green">0</span> (0)
</div> 
```

我收到以下 2 条错误消息：

SyntaxError: missing ) 在参数列表之后

```
$(this).parent().css("background-position","0 -" (32 * star) "px"); 
```

和语法错误：缺失；声明之前

```
var star = $(this).index() 1; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T12:28:54.117

```
("background-position","0 -" (32 * star) "px"
                            X           X 
```

错误消息有点误导。它正在寻找`)`与我引用的代码开头的匹配。如果你要添加一个，你只会得到一个不同的错误。问题是您需要在标记的两个地方有一个操作员`X`。

您可能正在寻找一个`+`（尽管其他在语法上是有效的，尽管在上下文中不太有用）

```
var star = $(this).index() 1; 
```

你在这里也有类似的问题。同样，您似乎想要添加`1`到索引中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T12:33:05.390

在 JavaScript 中，您必须使用 + 作为 concat 运算符。

[http://www.w3resource.com/javascript/operators/string-operator.php](http://www.w3resource.com/javascript/operators/string-operator.php)

```
<script type="text/javascript">
$('.star').mouseover(function (){
    var star = $(this).index() + 1;
    $(this).parent().css("background-position","0 -" + (32 * star) + "px");
});

$('.star-rating').mouseout(function (){
    var originalresult = $(this).attr('id').split('result')[1];
    $(this).css("background-position","0 -" + (32 * originalresult) + "px");
});
</script>

<div class="star-rating" id="rating1result0">
<div class="star"></div>
<div class="star"></div>
<div class="star"></div>
<div class="star"></div>
<div class="star"></div>
</div>
<div class="result">
<span style="color:green">0</span> (0)
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T12:39:24.287

您需要引入连接运算符`+`，因此这是正确的代码行：

```
var star = $(this).index() + 1;
$(this).parent().css("background-position","0 -" +(32 * star)+ "px");
$(this).css("background-position","0 -" +(32 * originalresult) +"px"); 
```

试试这个代码：

```
<script type="text/javascript">
$('.star').mouseover(function (){
var star = $(this).index() + 1;
$(this).parent().css("background-position","0 -" +(32 * star)+ "px");
});

$('.star-rating').mouseout(function (){
var originalresult = $(this).attr('id').split('result')[1];
$(this).css("background-position","0 -" +(32 * originalresult) +"px");
});
</script>

<div class="star-rating" id="rating1result0">
<div class="star"></div>
<div class="star"></div>
<div class="star"></div>
<div class="star"></div>
<div class="star"></div>
</div>
<div class="result">
<span style="color:green">0</span> (0)
</div> 
```

# c# - 编码不转换

> ID：14303428
> 
> 赞同：2
> 
> 时间：2013-01-13T12:27:05.560
> 
> 标签：c#, asp.net, encoding

ASP.NET 页面 (ashx) 接收`GET`带有 UTF8 字符串的请求。它使用 Windows-1255 数据读取 SqlServer 数据库。

我似乎无法让他们一起工作。我使用了在 SO 上收集的信息（主要是[Convert a string's character encoding from windows-1252 to utf-8](https://stackoverflow.com/questions/5568033/convert-a-strings-character-encoding-from-windows-1252-to-utf-8)）以及有关该主题的[msdn 。](http://msdn.microsoft.com/en-us/library/kdcak6ye%28v=vs.100%29.aspx)

当我通过以下函数运行任何东西时 - 它总是以与开始时相同的方式结束 - 根本没有转换。

是不是做错了什么？

**编辑**

我特别想做的事情（`getData`返回 a `Dictionary<int, string>`）：

```
getData().Where(a => a.Value.Contains(context.Request.QueryString["q"])) 
```

结果为空，除非我发送“中性”字符，例如“'”或“，”。

**代码**

```
 string windows1255FromUTF8(string p)
    {
        Encoding win = Encoding.GetEncoding(1255);
        Encoding utf8 = Encoding.UTF8;

        byte[] utfBytes = utf8.GetBytes(p);
        byte[] winBytes = Encoding.Convert(utf8, win, utfBytes);
        return win.GetString(winBytes);
    }

    string UTF8FromWindows1255(string p)
    {
        Encoding win = Encoding.GetEncoding(1255);
        Encoding utf8 = Encoding.UTF8;

        byte[] winBytes = win.GetBytes(p);
        byte[] utfBytes = Encoding.Convert(win, utf8, winBytes);
        return utf8.GetString(utfBytes);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:39:35.727

这些功能没有任何问题，它们根本没用。

这些函数所做的是将字符串编码为字节，将数据从一种编码转换为另一种编码，然后将字节解码回字符串。除非字符串包含无法使用 windows-1255 编码进行编码的字符，否则返回的值应与输入相同。

.NET 中的字符串没有编码。如果您从使用例如 UTF-8 对文本进行编码的源获取字符串，则一旦将其解码为字符串，它将不再具有该编码。当目标具有特定编码时，您不必对字符串执行任何操作即可使用它，您使用的任何库都将处理编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T08:02:33.517

由于某种原因，这有效：

```
byte[] fromBytes = (fromEncoding.UTF8).GetBytes(myString);
string finalString = (Encoding.GetEncoding(1255)).GetString(fromBytes); 
```

在不转换的情况下切换编码...

# rsa - 我的 i-7 处理器需要多长时间才能分解一个 1024 位数字（仅包含 2 个质因数）

> ID：14303431
> 
> 赞同：3
> 
> 时间：2013-01-13T12:27:32.407
> 
> 标签：rsa, public-key-encryption, factorization

我们正在研究 RSA 算法，想知道英特尔 i-7 内核 (@ 2.50 gHz) 分解 RSA 公钥需要多长时间。

我们为此写了一段java，不知道效果如何

```
public static String factorise(long l)
{
    double a = Math.floor(Math.sqrt(l));
    while(l/a != Math.round(l/a))
    {
        a--;
    }
    return (long)a + ", " + (long)(l/a);    
} 
```

对于 2^45 左右的数字，PC 花费了大约 33 毫秒。理论上，分解一个 2^1024 左右的数需要多长时间？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-13T12:34:52.750

您的算法是 O(2^n)，其中 n 是原始数字中的位数`l`。`a`（这意味着多一点将使运行时间加倍，因为必须检查两倍的数字- 平均而言）

如果 45 位需要 33 毫秒，那么 1024 位将需要大约 1024 位。2^1024 / 2^45 * 33ms = 5.34654 * 10^285 年。

当然，这假设 1024 位代码与长数字（64 位？）的代码一样有效。这是一个大胆的声明，考虑到 10^285 年的时间足以切换到[通用数域筛](http://en.wikipedia.org/wiki/General_number_field_sieve)并刮掉那段时间的几百万年......

* * *

2009 年，使用大约 1000 个内核和 2 年的计算破解了 768 位数字 rsa-768。假设他们使用通用数字域筛（一个非常公平的假设），他们需要 7481 年才能使用相同的硬件破解 1024 位数字。

或者只使用你的 i7 和这个算法：大约 300 万年。还有很长一段时间.... ;)

# php - Mysql：按兰特订购一次

> ID：14303432
> 
> 赞同：1
> 
> 时间：2013-01-13T12:27:49.847
> 
> 标签：php, mysql, random, sql-order-by

我需要按 rand 订购，但我不希望它在每次刷新时都改变，我只需要一个随机数，这有意义吗？

这是我的代码：

```
function findSimilarByTag($gid,$limit=5) {
  $gid=$this->quotesmart($gid);
  $limit=$this->quotesmart($limit); //yes, this is senseless

  $db =& JFactory::getDBO();
  $query ="SELECT count( a.cid ) , a.gid, b.* \r\n";
  $query.="FROM `#__yfl_game2cat` a \r\n";
  $query.="JOIN #__yfl_game b ON a.gid = b.id
        WHERE a.cid
        IN (
        SELECT cid
        FROM #__yfl_game2cat
        WHERE gid = '$gid'
        )
        AND a.gid != '$gid'
        GROUP BY a.gid
        ORDER BY rand()
        LIMIT ".$limit;

  $db->setQuery($query);
  $games=$db->loadObjectList();
  if($db->getErrorMsg()) $games=$db->getErrorMsg();
  return $games; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:34:29.270

**让所有用户看到相同的随机顺序**

如果您希望每个人都使用相同的随机顺序，只需添加另一列，在其中放入随机生成的数字并按该列排序。

**每个用户：**

如果结果集相同（即没有其他数据更改），您可以将整个结果集存储在会话中。

```
session_start();// top of all php files that need to use session

if (isset($_SESSION['findSimilarByTag'])) $rs=$_SESSION['findSimilarByTag'];
else $rs=$_SESSION['findSimilarByTag']=findSimilarByTag($gid);
// ... go ahead and use $rs 
```

如果结果中的其他数据发生变化，或者该结果集将包含大量数据，则可以存储唯一 ID 并使用该 ID，`ORDER BY FIELD(fieldname, 1,2,3...)`而不是`ORDER BY RAND()`该会话值是否存在

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T12:36:48.490

不是在 SELECT 上随机化，而是为随机值创建一个列，在 SELECT 时在 INSERT 和 ORDER BY 上填充它。

这样，您的结果将始终以预定义的“随机”顺序返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T12:35:09.003

我不知道您的意思，但我可以告诉您，您可以`RAND()`使用整数参数进行操作。like`RAND(10,15)`将创建 10 到 15 之间的随机数。至于返回“一个随机数”，我将存储`$rand = "ORDER by RAND()";`然后设置一个会话并检查`isset()`RAND 是否已经设置过一次。

# c - 命令行解释器

> ID：14303437
> 
> 赞同：-4
> 
> 时间：2013-01-13T12:28:17.257
> 
> 标签：c, unix

任务是创建一个简单的命令行解释器。它应该说像'$>'这样的提示，表明它已准备好接受用户命令。它必须从接受的命令列表中执行用户命令。

```
1\. The "nl" command. Parameters that need to be implemented are: -s, -d

2\. The "mv" command. Parameters that need to be implemented are: -i, -t -s

3\. The "cd" command. No parameters need to be implemented. 
```

> nl 命令 -s, --number-separator=string 用字符串将行号与输出中的文本行分开（默认为 TAB 字符）。
> 
> 命令 nl-d, --section-delimiter=cc 设置两个分隔符，表示逻辑页段的开始；如果只给出一个，则第二个仍然是'：'。要输入“\”，请使用“\”。mv 重命名文件或将其从一个目录移动到另一个目录。
> 
> 命令 mv-i 在覆盖另一个文件之前提示，对于另外两个我找不到任何规范。cd 命令用于返回主目录。

放屁就是我所知道的。它必须用 C 语言编写，但适用于 UNIX。我还没有开始任何事情，我将不胜感激任何帮助和建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:37:35.923

system() 方法用于在 C/C++ 中运行控制台命令：

```
system(name of the command); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:42:13.530

使用现有的开源应用程序。

我认为busyBox包含这样的行为

# objective-c - 如何在objective-c中以最少的行数逐行读取文件

> ID：14303446
> 
> 赞同：1
> 
> 时间：2013-01-13T12:29:25.490
> 
> 标签：objective-c, file, handle

在 Objective-C 中逐行读取文件的最简单和最简洁的方法是什么？

如果您认为使用 C/C++ 中的方法更好，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T12:50:24.287

如果您有小文件，您可以执行以下操作：

```
NSString *fileContents = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:NULL];
for (NSString *line in [fileContents componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]]) {
    // Do something
} 
```

否则，请参阅[此](https://stackoverflow.com/questions/3707427/how-to-read-data-from-nsfilehandle-line-by-line)问题以获得更强大的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:30:56.597

好吧，分两行：

```
NSString *s = [NSString stringWithContentsOfFile:@"foo.txt" encoding:NSUTF8StringEncoding error:NULL];
NSArray lines = [s componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]]; 
```

# c# - C#语言设计——鸭式

> ID：14303456
> 
> 赞同：7
> 
> 时间：2013-01-13T12:30:40.973
> 
> 标签：c#, language-design

C# 主要是 stronglt 类型，但是，有一些奇怪的行为：

例如，当滚动您自己的枚举器类时，您不必实现 IEnumerable，您只需实现一个名为 GetEnuerator() 的方法，您仍然可以`foreach`覆盖它。

一些 Linq 支持也是如此，您可以通过提供一些`select` `where`方法等来编写自己的 Linq 提供程序。

那么为什么`using(x){}`声明需要 IDisposable 呢？

我确实明白为什么可以以这种方式编写 linq 提供程序，因为没有要完成的固定合同，只有一种方法模式。

为什么 C# 编译器（或语言规范？）的设计方式是某些内置语言结构需要接口，而其他语言结构不需要接口？

# c# - 不包含定义并且找不到接受类型的第一个参数的扩展方法

> ID：14303460
> 
> 赞同：1
> 
> 时间：2013-01-13T12:30:51.520
> 
> 标签：c#, wcf

我正在尝试使用 Web 服务将数据插入数据库，但遇到以下错误：

```
'Remarks' does not contain a definition for 'UserName' and no extension method 'UserName' accepting a first argument of type 'Remarks' could be found (are you missing a using directive or an assembly reference?) 
```

在 IService.cs 文件中，我有以下内容：

```
[ServiceContract]
public interface IService
{

    [OperationContract]
    int UpdateRemark(Remarks updateRemark);
}

[DataContract]
public class Remarks
{
    string _content = string.Empty;
    int _poNum;
    string _UserName = string.Empty;

    [DataMember]
    public string remarkContent
    {
        get { return _content; }
        set { _content = value; }
    }

    [DataMember]
    public int poNum
    {
        get { return _poNum; }
        set { _poNum = value; }
    }

    [DataMember]
    public string UserName
    {
        get { return _UserName; }
        set { _UserName = value; }
    }
} 
```

在 service.cs 文件中：

```
public class service : Iservice 
{
    private String errMsg;
    private DlDbConn dbConn;

    public int UpdateRemark(Remarks updateRemark)
    {
        SqlConnection conn;
        StringBuilder sql;
        SqlCommand sqlCmd;
        int result;

        result = 0;

        dbConn = new DlDbConn();

        conn = dbConn.GetConnection();
        sql = new StringBuilder();
        sql.AppendLine("INSERT INTO Remarks(poNum, remarkContent, UserName, date)");
        sql.AppendLine("VALUES (@poNum, @remarkContent, @UserName, getdate())");

        try
        {
            conn.Open();
            sqlCmd = new SqlCommand(sql.ToString(), conn);

            sqlCmd.Parameters.AddWithValue("@poNum", updateRemark.poNum);
            sqlCmd.Parameters.AddWithValue("@remarkContent", updateRemark.remarkContent);
            sqlCmd.Parameters.AddWithValue("@UserName", updateRemark.UserName);

            result = sqlCmd.ExecuteNonQuery();
        }
        catch (Exception ex)
        {
            errMsg = ex.Message;
        }
        finally
        {
            conn.Close();
        }

        return result;
    }
} 
```

在 aspx 文件中，（该方法将使用按钮 onClick 事件调用）：

```
protected void SendBtn_Click(object sender, EventArgs e)
{
    foreach (ListViewDataItem item in ListView1.Items) 
    {
        // accessing  Control
        Label poNum = (Label)item.FindControl("poLabel");
        TextBox remark = (TextBox)item.FindControl("BodyLabel");
        String currentUserId = HttpContext.Current.User.Identity.Name;

        Remarks updateRemark = new Remarks();

        updateRemark.poNum = Int32.Parse(poNum.Text);  // the error occur here
        updateRemark.remarkContent = remark.Text;  // the error occur here
        updateRemark.UserName = currentUserId.ToString(); // the error occur here

        IServiceClient client = new IServiceClient();
        client.UpdateRemark(updateRemark); 
    } 
} 
```

似乎系统无法找到用户名，我只是不明白哪里出了问题。

# c++ - 将分数转换为二进制的 C++ 代码

> ID：14303469
> 
> 赞同：0
> 
> 时间：2013-01-13T12:32:09.583
> 
> 标签：c++, stl, floating-point, double, precision

我刚刚编写了以下 C++ 代码，以便将小数转换为其相应的二进制格式。

```
double get_decimal_part(double num) {
   long x = static_cast<long>(num);
   return (num - static_cast<double>(x));
}

long get_real_part(double num) {
   return static_cast<long>(num);
}

string fraction_to_binary(double num) {
   string decimal_binary = "";
   double decimal_part = get_decimal_part(num);
   while ( decimal_part > 0 ) {
      double temp = decimal_part * 2;
      if ( get_real_part(temp) == 0 ) decimal_binary += "0";
      else                            decimal_binary += "1";
      decimal_part = get_decimal_part(temp); 
   }
   return decimal_binary;
}

int main() {
   cout << "3.50 - " << fraction_to_binary(3.50) << endl;
   cout << "3.14 - " << fraction_to_binary(3.14) << endl;
} 
```

输出将是： -

```
3.50 - 1
3.14 - 001000111101011100001010001111010111000010100011111 
```

我对此有以下疑问：-

1.  在“3.50”的情况下，我的实现将给出“1”作为输出——我该如何修改我的实现以解释 3.50 中的尾随“0”？
2.  如果有任何库函数可以帮助我获得浮点数的精度？我猜我可以使用这些信息来修改我的实现。

[编辑] 我也尝试使用以下方法将浮点数转换为字符串，但它也无济于事。

```
 stringstream ss;
   ss << my_float;
   cout << string(ss.str()) << endl; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T13:41:19.810

在回答您的具体问题之前，这有什么问题 `modf`？

关于您的具体问题：

1.  什么尾随`"0"`？您在这里谈论的是文本表示。在机器内部，`"3.5"`和`"3.50"` 对应的编号相同，具有相同的表示。

2.  有一个库函数可以返回浮点数的精度：（`std::numeric_limits<double>::digits` 除了它不是函数，而是常数）。但是，如果您想将一个数字分解为其整数部分和整数部分，`modf`则完全符合要求。与您的代码不同，对于`double`.

## 编辑：

仔细观察您正在尝试做的事情的大图：我的方法是使用`frexp`以提取 2 为底的指数，然后`ldexp`将数字缩放到范围 `[0.5...1)`然后循环`std::numeric_limits<double>::digits` 时间，每次乘以`2`，并检查：如果乘法的结果小于1，则插入0位；否则，插入 1 位并减 1。（请注意，如果机器浮点是以 2 为底或 2 的幂，则上述所有操作都是精确的。）

# android - Twilio 发送语音消息

> ID：14303470
> 
> 赞同：1
> 
> 时间：2013-01-13T12:32:13.717
> 
> 标签：android, twilio

是否可以使用[twilio](http://www.twilio.com)发送**语音消息**？我需要录制语音并将其从 android 发送给特定用户。

我可以使用[Twilio 发送消息 API 发送短信](http://www.twilio.com/docs/quickstart/php/sms/sending-via-rest)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T04:26:47.530

是的，这是可能的。

您首先需要记录一条消息 - 请参阅[docs/api/rest/recording](http://www.twilio.com/docs/api/rest/recording)和[docs/quickstart/php/twiml/record-caller-leave-message](http://www.twilio.com/docs/quickstart/php/twiml/record-caller-leave-message)。

然后，您需要播放该录音 - 请参阅[docs/api/rest/making-calls](http://www.twilio.com/docs/api/rest/making-calls)和[docs/quickstart/php/rest/call-request](http://www.twilio.com/docs/quickstart/php/rest/call-request)进行通话。前面提到的[docs/quickstart/php/twiml/record-caller-leave-message](http://www.twilio.com/docs/quickstart/php/twiml/record-caller-leave-message)也应该有助于回放录音。

[其中一些可能在docs/howto/voicemail](http://www.twilio.com/docs/howto/voicemail)的 HowTo Voicemail 文档中有相关记录。

您也可以使用[Twilio Client](http://www.twilio.com/client)而非[Twilio Voice](http://www.twilio.com/voice)来完成部分/全部操作。

# java - 我想使用 Java 通过 CP2102 发送和接收数据

> ID：14303475
> 
> 赞同：0
> 
> 时间：2013-01-13T12:32:28.570
> 
> 标签：java

我正在尝试连接到 CP2102 UART 桥以发送和接收数据我如何在 java 中实现它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:45:58.867

一般来说，您不能（或*不应该*）在 Java 中这样做 - [CP2102](http://www.silabs.com/products/interface/usbtouart/Pages/usb-to-uart-bridge.aspx)是一个 USB 转串口设备，Java 不太擅长与 USB 设备通信，至少不是开箱即用、便携且不可靠问题。

诚然，这在很大程度上与一般用户空间 USB 驱动程序的困难有关，但 Java 使相当多的事情变得更加困难。此外，您必须为您的桥接芯片编写 Java 驱动程序，这通常*不是*一件容易的事。

在您的位置，我只需为我的操作系统安装 CP2102 驱动程序并将该设备用作普通串行端口，例如使用[RXTX](http://rxtx.qbang.org/wiki/index.php/Main_Page)。

如果您*确实*坚持直接与 USB 芯片通话，您可以为漫长而累人的过程做好准备，然后看看这些：

*   [如何在java中访问USB端口](https://stackoverflow.com/q/2121508/507519)
*   [如何在 Windows 和 Java 下与 USB 设备通信？](https://stackoverflow.com/q/544507/507519)
*   [http://www.ibm.com/developerworks/library/j-usb/index.html](http://www.ibm.com/developerworks/library/j-usb/index.html)

# php - 尝试传递时 MySQL 语法错误，当包含在数据中时使用 ' 符号

> ID：14303477
> 
> 赞同：0
> 
> 时间：2013-01-13T12:32:37.943
> 
> 标签：php, mysql, facebook

> **可能的重复：**
> [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)
> [无法使用“插入”将文本发布到 MySQL](https://stackoverflow.com/questions/8315711/unable-post-text-to-mysql-using-insert-into)

使用 PHP 将电影标题传递到 MySQL 数据库时，出现以下错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your 
MySQL server version for the right syntax to use near 's Dreams' )' at line 10 
```

这是我的代码：

```
//Getting a list of all the users friends
$MyFriends=$facebook->api('/me/friends');

//Loop through friends array to identify each friend
$c=0;
while ($c<count($MyFriends['data']))
{
    $N=$MyFriends['data'][$c]['name'];
    $I=$MyFriends['data'][$c]['id'];
    mysql_query("INSERT INTO UserFriends
    (
        UserFBID, 
        FriendFBID,
        DisplayName
    ) VALUES
    (
        '$FBID', 
        '$I',
        '$N'
    ) ") or die(mysql_error()); 

    //Getting a list of friends each movie likes
    $friendId = "/" . $I . "/movies";
    $myFriendsMovies=$facebook->api($friendId);

    //Loop through to identify each movie
    $x=0;
    while ($x<count($myFriendsMovies['data']))
    {
        $r = $myFriendsMovies['data'][$x]['id'];
        $s = $myFriendsMovies['data'][$x]['name'];
        mysql_query("INSERT INTO LinkedMovies 
        (
            UserFBID, 
            MovieFBID,
            MovieName
        ) VALUES
        (
            '$I', 
            '$r',
            '$s'
        ) ") or die(mysql_error());         
        $x=$x+1;
    }
    $c=$c+1;
} 
```

似乎变量 $s 已经拿起了电影“Akira Kurosawa's Dreams”并不断轰炸，出现上述错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:36:05.993

```
$N=$MyFriends['data'][$c]['name']; 
```

应该：

```
$N = mysql_real_escape_string($MyFriends['data'][$c]['name']); // sanitize the data, do this for all external data input 
```

还：

[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T12:38:25.257

在执行 sql 查询之前，您应该使用类似以下`mysql_real_escape_string`函数的代码进行安全 sql 查询和转义字符串

```
//Getting a list of all the users friends
$MyFriends=$facebook->api('/me/friends');

//Loop through friends array to identify each friend
$c=0;
while ($c<count($MyFriends['data']))
{
    $N=mysql_real_escape_string( $MyFriends['data'][$c]['name'] );
    $I=mysql_real_escape_string( $MyFriends['data'][$c]['id'] );
    mysql_query("INSERT INTO UserFriends
    (
        UserFBID, 
        FriendFBID,
        DisplayName
    ) VALUES
    (
        '$FBID', 
        '$I',
        '$N'
    ) ") or die(mysql_error()); 

    //Getting a list of friends each movie likes
    $friendId = "/" . $I . "/movies";
    $myFriendsMovies=$facebook->api($friendId);

    //Loop through to identify each movie
    $x=0;
    while ($x<count($myFriendsMovies['data']))
    {
        $r = mysql_real_escape_string( $myFriendsMovies['data'][$x]['id'] );
        $s = mysql_real_escape_string( $myFriendsMovies['data'][$x]['name']);
        mysql_query("INSERT INTO LinkedMovies 
        (
            UserFBID, 
            MovieFBID,
            MovieName
        ) VALUES
        (
            '$I', 
            '$r',
            '$s'
        ) ") or die(mysql_error());         
        $x=$x+1;
    }
    $c=$c+1;
} 
```

# android - 带有自定义字体的Android果冻豆文本视图，不合适

> ID：14303481
> 
> 赞同：0
> 
> 时间：2013-01-13T12:33:07.960
> 
> 标签：android, textview, android-4.2-jelly-bean, bounds

只是为了提供信息，我已经使用了所有说明如何在界限内放置文本的资源

1.  [自动缩放 TextView 文本以适应边界](https://stackoverflow.com/questions/5033012/auto-scale-textview-text-to-fit-within-bounds)
2.  [如何缩放/调整文本以适合 TextView？](https://stackoverflow.com/questions/2596452/how-to-scale-resize-text-to-fit-a-textview)
3.  [如何调整文本字体大小以适合 textview](https://stackoverflow.com/questions/2617266/how-to-adjust-text-font-size-to-fit-textview)
4.  [姜饼和果冻豆的Android字体大小差异问题](https://stackoverflow.com/questions/14010644/android-font-size-difference-issue-on-gingerbread-and-jellybeans)

但我的主要问题是我不想调整字体大小以适应文本边界。我所拥有的是一个从文件夹`TextView`中获取的。此外，用户可以通过.All 低于那里的设备更改字体大小似乎没问题，但是设备上的文本不符合图像中 的边界`Custom Font``assets``slider``Jelly Bean``Jelly Bean``TextView`![文本视图不合适](../Images/5340e6af7d62bb4df304bb7f778fdfc9.png)

此外，`stackoverflow`答案中所述的有目的的解决方案都没有任何好处。不知何故，一些解决方案只是降低了`font`尺寸以适应范围。我不想降低字体大小，而是想执行以下操作

1.  计算适合屏幕宽度的文本长度
2.  然后以该特定长度将换行符附加到字符串
3.  由于文本长度会很大，我害怕使用 StringBuffer 和 StringBuilder 因为它们很容易导致`out of memory exception`
4.  所以`TextView`当达到可见长度时自动计算插入新闻行的因子。

到目前为止，我能够分解文本，通过计算一个有助于找到适合屏幕宽度的最小单词数量的因子。但是，这会导致单词被破坏，含义`Hello`可能会导致`Hel`一行和另一行继续`lo`。

```
public class AutoResizeTextView extends TextView {

private boolean forFirstTime = true;

    @Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
    if (forFirstTime)
        monitorChanges();
}

private void monitorChanges() {
    final int widthLimit = getMeasuredWidth() - getCompoundPaddingLeft()
            - getCompoundPaddingRight();
    if (widthLimit <= 0) {
        return;
    }
    final String mainText = getText().toString();
    final float actualTextWidth = getPaint().measureText(mainText);

    forFirstTime = false;

    setText("");
    String[] overallText = inputText.split("\\n");

    for(int j=0;j<overallText.length;j++){
        String mainText =overallText[j];
        int length = mainText.length();
        int lineNumber = Math.round(getPaint().measureText(mainText)/ widthLimit);
        int wordLimit = (int) Math.round(length / (lineNumber * 1.3));
        //wordLimit+=2;
        if (wordLimit < length) {
            int count = Math.round(length / wordLimit);
            int startIndex = -1, endIndex = -1;
            for (int i = 0; i < count; i++) {
                startIndex = wordLimit * i;
                endIndex = wordLimit * (i + 1);
             append(mainText.substring(startIndex, endIndex) + "\n");
            }
        append(mainText.toString().substring(endIndex, length)+"\n");
        }
   }
} 
```

现在我希望单词不会被破坏，如默认 android `EditText`on `wrap_content`params 所展示的那样，如果它变得大到适合，整个文本将移动到下一行。而且计算公式`wordLimit`不准确，我只想找出`string`适合的`widthLimit`确切长度`TextView/EditText`

我也在努力，如果有任何事情发生，我一定会发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:08:06.293

我不知道这是否是正确的解决方案。但到目前为止，文本呈现良好并且没有文本被截断，即显示在边界内的文本。

```
public class AutoResizeTextView extends TextView {

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
    if (forFirstTime)
        monitorChanges();
}

private boolean forFirstTime = true;
    // Text view line spacing multiplier
    private float mSpacingMult = 1.0f;

    // Text view additional line spacing
    private float mSpacingAdd = 0.0f;

private void monitorChanges() {
    int widthLimit = getMeasuredWidth() - getCompoundPaddingLeft()
            - getCompoundPaddingRight();

    if (widthLimit <= 0) {
        return;
    }
    String inputText = getText().toString();

    forFirstTime = false;

    setText("");
    String[] overallText = inputText.split("\\n");

    TextPaint textPaint = getPaint();
    for(int j=0;j<overallText.length;j++){
        String mainText =overallText[j];
        StaticLayout layout = new    StaticLayout(mainText,textPaint,widthLimit,Alignment.ALIGN_NORMAL,
                mSpacingMult,mSpacingAdd,false);        
        if(layout.getLineCount()>0){
            for(int i=0;i<layout.getLineCount();i++){
                int start =layout.getLineStart(i);
                int end =layout.getLineEnd(i);
                append(mainText.substring(start, end)+"\n");
            }
        }

    }   
}
} 
```

但我对结果并不完全满意；）

# php - 需要在重复时使用新的 PK 更新 FK

> ID：14303485
> 
> 赞同：0
> 
> 时间：2013-01-13T12:34:26.480
> 
> 标签：php, mysql, foreign-keys, primary-key

我有两张桌子——今晚我真的相信我有一个金发碧眼的时刻。

# 标题

```
HeadingID, HeadingName, TopicID 
```

# 小标题

```
SubHeadingID, SubHeadingName, HeadingID 
```

我想做的是复制标题中的所有条目，`SubHeadings`其中`TopicID`= 1 到 = 2。

我写过：

```
INSERT INTO Headings (HeadingName, TopicID)
SELECT HeadingName, 2 FROM Headings WHERE TopicID = 1  //(Duplicating Headings and assigning TopicID 2). 
```

我被困在`SubHeadings`; 我想放入`HeadingID`刚刚创建的新的，我不知道。我可以使用相同的插入/选择语句来完成其余的字段，但是我很难过。

有人可以帮我举个例子或一些文档吗？

简化后的数据如下所示：

```
HeadingID = 1
HeadingName = 'News'
TopicID = 1
HeadingID = 2
HeadingName = 'Sport'
TopicID = 1

SubHeadingID = 1
SubHeadingName = 'Local'
HeadingID = 1
SubHeadingID = 2
SubHeadingName = 'National'
HeadingID = 1
SubHeadingID = 3
SubHeadingName = 'International'
HeadingID = 1
SubHeadingID = 4
SubHeadingName = 'Baseball'
HeadingID = 2
SubHeadingID = 5
SubHeadingName = 'Cricket'
HeadingID = 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T13:09:49.610

以下查询将为您提供帮助:)

```
INSERT INTO SubHeadings (SubHeadingName, HeadingID) 
SELECT subhdng.SubHeadingName, hdng.HeadingID 
FROM Headings hdng
INNER JOIN SubHeadings subhdng ON hdng.HeadingID = subhdng.HeadingID 
WHERE hdng.TopicID = 2 
```

# javascript - clearInterval() 不起作用。奇怪的

> ID：14303489
> 
> 赞同：0
> 
> 时间：2013-01-13T12:34:42.687
> 
> 标签：javascript, jquery, function, console, clearinterval

这是代码：

```
var LOAD = window.setInterval("LOADING()", 50);

function LOADING()   {
  var y = document.getElementById("cse");
  var str = y.innerHTML;
  if (str !== "Loading") {
    setTimeout('INPUTAI()', 100);
    window.clearInterval(LOAD);
    console.log('Google paieška užsikrovė');
  }  
} 
```

然后页面加载，然后“加载”dissmises，在我的 Google Chrome 控制台中，我看到“Google paieška užsikrovė”，但它一直在向控制台写入，并且正在写入......所以 clearInterval 不起作用。

**问题解决**：改为

> var LOAD = window.setInterval(LOADING, 50);

谢谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:40:56.380

`setInterval`不需要函数的`()`：

```
 var LOAD = window.setInterval(LOADING, 50);
  setTimeout(INPUTAI, 100); 
```

此外，正如许多人指出的那样，问题*可能*在于`#cse`元素的内容不完全是`"Loading"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:40:45.350

试试这个？

```
var LOAD = setInterval(LOADING, 50);

function LOADING()   {
  var y = document.getElementById("cse");
  var str = y.innerHTML;
  if (str !== "Loading") {
    setTimeout(INPUTAI, 100);
    clearInterval(LOAD);
    console.log('Google paieška užsikrove');
  }  
} 
```

# android - Android 和 mp4 问题上的电影兼容性

> ID：14303490
> 
> 赞同：0
> 
> 时间：2013-01-13T12:34:43.480
> 
> 标签：android, mp4, webm

我正在编写一个在 Android 中播放小型卡通电影的应用程序。我选择了 mp4，因为它似乎在手机上运行良好，并且似乎可以针对不同的屏幕分辨率动态重新缩放。伟大的。

问题是当我使用 Bluestacks 时，电影会损坏：

[https://getsatisfaction.com/bstk/topics/my_mp4_movies_dont_work_in_bluestacks](https://getsatisfaction.com/bstk/topics/my_mp4_movies_dont_work_in_bluestacks)

我认为我有一个解决方案，因为我只需要使用 imagemagick 将电影的大小调整为 400 或更少像素宽，它修复了大多数电影，但有些仍然顽固地损坏，我不知道如何让它们持续工作. 我花了两个星期尝试不同的事情。电影在我的手机上播放得很好。

我现在正在查看电影的“webm”格式，它似乎在 Bluestacks 中有效，但在 Froyo 及以下版本中无效。我当然可以忽略 Bluestacks 问题，但它似乎很受欢迎，我将它用作开发模拟器。

我的问题是：

有谁知道为什么 Bluestacks 不能正常播放 mp4 电影？这似乎是一个重新调整的错误。

如果我将 mp4 电影放在“drawable”中，将 webm 电影放在“drawable-mdpi”（Bluestacks 拾取）中，那么 mdpi Froyo 手机会看到哪部电影？它会因为无法播放而忽略 webm 电影，而是播放 mp4 电影，还是会说它无法识别类型？

# methods - 在 main 方法之外使用变量

> ID：14303497
> 
> 赞同：0
> 
> 时间：2013-01-13T12:35:42.940
> 
> 标签：methods

好的，所以我有这个简单但巨大的问题，我真的找不到解决方案。我已经在 main 方法之外声明了所有变量，然后在 main 方法中为它们赋值，但我似乎无法链接它们，所以当我在其他类中调用它们时，字符串 author1 和 2 为空，我的数组也是艺术家。我将非常感谢您的任何帮助，这让我发疯，我很着急。

```
package Medienbibliothek; 
```

导入 java.util.Arrays；导入 java.util.Scanner；

公共类艺术家扩展作者{

```
 static String FirstName1;
 static String NickName1;
 static String LastName1;
 static String artist1;

 static String FirstName2;
 static String NickName2;
 static String LastName2;
 static String artist2;

public static String[] artists = new String[]{artist1, artist2};

public static void main(String args[]){

Scanner Person = new Scanner(System.in);

System.out.println("Enter FirstName: ");
FirstName1 = Person.nextLine();

System.out.println("Enter LastName: ");
LastName1 = Person.nextLine();

System.out.println("Enter NickName: ");
NickName1 = Person.nextLine();

String artist1 = (FirstName1 + " " + "\"" + NickName1 + "\"" + " " + LastName1);

System.out.println("Your first artist is: " + artist1);

System.out.println("Enter FirstName: ");
FirstName2 = Person.nextLine();

System.out.println("Enter LastName: ");
LastName2 = Person.nextLine();

System.out.println("Enter NickName: ");
NickName2 = Person.nextLine();

String artist2 = (FirstName2 + " " + "\"" + NickName2 + "\"" + " " + LastName2);

System.out.println("Your second artist is: " + artist2);

System.out.println("Your artists are: " + "\n1." + artist1 + "\n2." + artist2);

final String[] artists = new String[]{artist1, artist2};

System.out.println(Arrays.asList(artists)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:42:23.630

当您`String artist1`在函数内部编写时，它会声明新的局部变量，即 'shadows' `static String artist1;`。这意味着在下面的代码`artist1`中将引用局部变量而不是静态变量。删除这些不必要的声明。

# python - 变量类型检查

> ID：14303498
> 
> 赞同：0
> 
> 时间：2013-01-13T12:35:47.910
> 
> 标签：python, python-2.7

我有一个包含字符串的列表。这些字符串是单词或整数值。例如，此列表可能如下所示：

```
['0', 'Negate', '-3', '2', 'SPECIALCASE', '3'] 
```

现在，根据它们的类型（整数或字符串），我想区别对待它们。但是，正如您所注意到的，我不能使用`isinstace()`. 我仍然可以使用`type()`并尝试使用该`int()`函数转换整数值，并将整个事物放在 try-except 方法中，以避免引发单词转换错误。但这对我来说似乎很骇人听闻。你知道处理这种情况的正确方法吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T13:03:54.067

我会采取不同的方法。如果您知道所有可能的“特殊”词，请检查这些词。其他所有内容都必须是 int：

```
keywords = {'Negate', 'SPECIALCASE'}
tmp = []
for i in lis:
    if i in keywords:
        tmp.append(i)
    else
        tmp.append(int(i)) 
```

当然，如果您想在不转换的情况下接受除整数以外的任何内容，那么尝试转换并退回到未转换的使用是要走的路。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-13T13:23:24.697

“不要请求许可，请求原谅”的pythonic方式：

```
lst = ['0', 'Negate', '-3', '2', 'SPECIALCASE', '3']

for item in lst:
    try:
        int_number = int(item)
    except ValueError:
        # handle the special case here 
```

请注意，如果您希望列表中只有少数项目将成为“特殊”案例项目，则应该这样做。否则按照@doomster 的建议进行检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T13:30:23.413

作为参考，这是一种正则表达式方法。这可能是矫枉过正。

```
mylist = ['0', 'Negate', '-3', '2', 'SPECIALCASE', '3']

import re
p = re.compile(r'-?\d+')
[p.match(e) is not None for e in mylist]
# returns [True, False, True, True, False, True] 
```

这将返回一个列表，其中包含`True`可选地以 a 开头的任何字符串`-`，然后包含一个或多个数字；`False`对于任何其他字符串。

或者，如果您不需要列表但只想执行不同的操作：

```
for item in mylist:
    if p.match(item):
        # it's a number
    else:
        # it's a string 
```

The above works becasue `None` (i.e. no match) evaluates to `False` and anything else (when it comes to regex matches) evaluates to `True`. If you want to be more explicit you can use `if p.match(item) is not None:`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T13:31:03.527

You can just use type conversion to check whether it's an integer or string,

```
def is_integer(input):
  try:
    int(input)
    return True
  except:
    return False

for item in ['0', 'Negate', '-3', '2', 'SPECIALCASE', '3']:
  if is_integer(item):
     ...
  else:
     ... 
```

# ruby - 散列在散列上

> ID：14303499
> 
> 赞同：11
> 
> 时间：2013-01-13T12:35:49.243
> 
> 标签：ruby, hash, ruby-1.9, null, splat

*   散列上的 splat 将其转换为数组。

    `[*{foo: :bar}] # => [[:foo, :bar]]`

    这里是否存在一些隐藏机制（例如隐式类转换），或者它是一个内置的原始特性？

*   除了数组之外，`nil`在 Ruby 1.9 下，splat 运算符是和散列唯一消失/改变的东西吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-14T01:45:32.777

splat 将尝试将对象显式转换为数组。

为此，它将发送`to_a`并期待`Array`一个结果。

```
class Foo
  def to_a
    [1,2,3]
  end
end

a, b, c = *Foo.new
a # => 1 
```

如果对象不响应`to_a`，则没有效果，例如`[*42] == [42]`

许多内置类实现`to_a`. 尤其：

*   （因为它们包括`Enumerable`）
    *   `Array`
    *   `Hash`
    *   `Range`
    *   `IO`和`File`
    *   `Enumerator`
    *   `Enumerator::Lazy`（红宝石 2.0）
    *   `Set`和`SortedSet`
*   （附加课程）
    *   `NilClass`
    *   `MatchData`
    *   `OpenStruct`
    *   `Struct`
    *   `Time`
    *   `Matrix`和`Vector`

因此，所有这些都可以被喷溅：

```
match, group, next_group = *"Hello, world".match(/(.*), (.*)/)
group # => "Hello" 
```

# java - 如何使用杰克逊序列化瞬态字段？

> ID：14303506
> 
> 赞同：7
> 
> 时间：2013-01-13T12:36:38.147
> 
> 标签：java, json, serialization, jackson

我们使用 JSON 序列化和 Jackson 来公开系统的内部状态以调试属性。

默认情况下，杰克逊不序列化瞬态字段 - 但我也希望序列化它们。如何序列化这些字段？

我知道的一种方法是为这些字段提供吸气剂 - 但我不想这样做，因为我有一些我不想被调用的 getX 方法（例如，有一些吸气剂会改变对象状态 ）。

我知道我可以创建一个注释，但我真的想避免它。

所以我的问题是：有没有办法设置杰克逊来序列化**所有**对象字段？包括瞬态的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-03-17T21:12:34.753

我对 Jackson 2.4.3 的解决方案：

```
 private static final ObjectMapper mapper =
        new ObjectMapper(){{

            Hibernate4Module module = new Hibernate4Module();
            module.disable(Hibernate4Module.Feature.USE_TRANSIENT_ANNOTATION);
            registerModule(module);

        }}; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-13T14:04:54.230

我认为杰克逊不支持任何类型的配置来使其能够序列化瞬态字段。添加该功能有一个未解决的问题，但它已经过时并且尚未解决（据我所知）：http: [//jira.codehaus.org/browse/JACKSON-623](http://jira.codehaus.org/browse/JACKSON-623)

> 所以我的问题是：有没有办法设置杰克逊来序列化所有对象字段？包括瞬态的。

所以回答你的问题，不。

其他一些 Java JSON 工具，例如 GSON，*确实支持*序列化瞬态字段的配置选项。如果您可以使用其他工具，您可以研究一下（对于 GSON，请参阅：[https](https://sites.google.com/site/gson/gson-user-guide) ://sites.google.com/site/gson/gson-user-guide ）。

要扩展一点，您可以尝试不同的方法。

首先，您不应该尝试序列化瞬态字段。毕竟瞬态的定义是“不要序列化这个”。尽管如此，我还是可以想到一些可能需要或至少方便的特定情况（例如在使用无法修改的代码时）。尽管如此，在 99% 的情况下，答案是不要那样做。如果您需要对其进行序列化，请更改该字段以使其不是瞬态的。如果您有多个使用相同字段的上下文，并且您希望它在一个（例如 JSON）中序列化，而不是在另一个（例如 java.io）中序列化，那么您应该为以下情况创建一个自定义序列化程序你不想要它，而不是滥用关键字。

其次，关于使用 getter 并拥有“一些改变对象状态的 getter”，你也应该尽量避免这种情况。这可能会导致各种意想不到的后果。而且，从技术上讲，这不是吸气剂，而是二传手。我的意思是，如果它改变了状态，你就有了一个 mutator（setter）而不是 accessor（getter），即使你按照“get”约定命名它并返回一些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-19T14:39:48.403

您可以为该瞬态字段创建自定义 getter 并使用 @XmlElement 属性。那个吸气剂的名字并不重要。

例如：

```
public class Person {

     @XmlTransient private String lastname;

     @XmlElement(name="lastname")
     public String getAnyNameOfMethod(){
         return lastname;
     }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-10T15:35:28.800

让 Jackson 序列化属性的另一种方法是在`@JsonProperty`其上方添加注释。我想这是更好的方法，因为您不需要禁用所有`@Transient`字段的默认行为，就像 Gere 的回答一样。

# c - 如何为 UHF 电视信号建模？

> ID：14303508
> 
> 赞同：4
> 
> 时间：2013-01-13T12:36:43.150
> 
> 标签：c, model, emulation, television

这可能是一个奇怪的问题，但我想以编程方式为 UHF 电视接收器建模。任何人都可以给我一些指示吗？我一直在查看模拟器中的代码，但它们现在对我的目的来说太具体了。

更具体地说：给定一些（可能是合成的）UHF 模拟信号（在 NTSC 或 PAL 中），我想解码该信号并在窗口上显示图像，例如使用 X11 窗口。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T12:56:58.150

看看[XScreenSaver](http://www.jwz.org/xscreensaver/)中的 xanalogtv ，它会生成一个模拟信号，然后对其进行解码和显示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T05:26:22.803

UHF只是一个频率范围，可以携带任何东西。视频本身的格式称为复合视频或 CVBS（彩色、视频、消隐、同步），其中 PAL、NTSC 等可以说是子格式。电视接收到的信号是一些 UHF 载波频率，该载波频率是用视频和声音信号进行频率调制的。UHF 承载许多电视台，电视所做的第一件事就是调谐特定频道以隔离视频信号，然后将其馈送到其 PAL 或 NTSC 解码电路，进而生成驱动 CRT 的信号。

话虽如此，我认为一个人要做的就是用电视的框图武装自己（就像这个[http://smendes.com/el31l/blockdiagram.jpg](http://smendes.com/el31l/blockdiagram.jpg).) 并为每个盒子编写一个软件仿真:) （当然除了 CRT 的东西。）“幸运的是”，在它下面都是“只是”数学，大多数部分都适合一个很好的数学描述，涉及很多微分方程式（我认为这就是电子产品最初的设计方式，即在原型制作和/或批量生产之前。电子产品的每个分支（例如，声学、滤波器设计、放大器设计等等）都有某种与相关的数学装置它。）最后，您的程序将解析 PAL，就像模拟电视一样，它是模拟计算机））您还可以查看 SDR，它代表“软件定义的无线电”，我认为这是相同的原理.

# php - 如果在 try 语句中没有输出，则捕获 PHP 异常.. 很奇怪

> ID：14303514
> 
> 赞同：0
> 
> 时间：2013-01-13T12:37:01.190
> 
> 标签：php, try-catch, facebook-php-sdk

这真是一个奇怪的功能..我不确定这是否与 Facebook 或 PHP 有关..我会假设后者..？

我的问题如下。如果授权我的 facebook 帐户的用户访问包含以下代码的页面，则输出“hello”并设置 $me。

```
if($user)
{
    try
    {
        $me = $CI->facebook->api('/me');
        $CI->our_fb['is_fb']='YES';
        echo "hello";
    }
        catch(FacebookApiException $e) 
    {               
        echo $e;
    }
}
else
{
    echo "nouser";
} 
```

但是，如果用户访问一个页面，代码是：

```
if($user)
{
    try
    {
        $me = $CI->facebook->api('/me');
        $CI->our_fb['is_fb']='YES';
        //echo "hello";
    }
        catch(FacebookApiException $e) 
    {               
        echo $e;
    }
}
else
{
    echo "nouser";
} 
```

然后输出“nouser”。

编辑

该错误实际上与 try/catch 语句无关，而是与条件 if 语句相关联。道歉。

似乎情况是，如果`if($user)`条件内没有输出任何内容，则正在执行 else 语句。条件的目的是设置一个变量不输出任何东西。

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:55:47.057

请使用以下代码收集有关异常的更多信息：

```
catch(FacebookApiException $e) {
    echo $e->getType();    
    echo $e->getMessage();
} 
```

**提示：**您在第二个示例中显示**空白页。**可能是 facebook 希望您在您的应用程序中显示某些内容（而不是空白页面）。

# php - 在 php/mysql codeigniter 中执行多个数据库插入时显示进度

> ID：14303519
> 
> 赞同：0
> 
> 时间：2013-01-13T12:37:29.610
> 
> 标签：php, jquery, hook, codeigniter-2

**php**

```
 foreach($this->input->post('dx') as $dx){  
        $r=$this->general->insert_record('prescriptions',$dx);
    }
    foreach($this->input->post('mf') as $mf){               
       $r=$this->general->insert_record('visit_inputs',$mf);
    }
    $r=$this->general->update_record('visits',$array3); 
```

在 html 页面上，我使用 ajax 提交给这个 php 函数。

我的问题是，如何在每次插入后将 $r[] 显示回用户？

每次插入后的 $r 示例

```
<ul><!--after first insert-->
<li>Dx inserted</li>
</ul>

<ul><!--after 2nd insert-->
<li>Dx inserted</li>
<li>mf inserted</li>
</ul>

<ul><!--after 3rdinsertion-->
<li>Dx inserted</li>
<li>mf inserted</li>
<li>record updated</li>
</ul> 
```

我是否必须将每个插入拆分为不同的函数并通过ajax一个接一个地调用它？或者有没有办法在进行中回显 $r ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T13:51:46.947

捕获 'onreadystatechange' 事件并查找 'readyState' = 4 且响应 = 200。然后读取该值并将其放入 div 或具有唯一 ID 的某个实体中。让您的服务器端代码返回 necc 值。

更多信息：[这里](http://www.w3schools.com/ajax/ajax_xmlhttprequest_onreadystatechange.asp)。

# html - Rails hidden_ field 名称

> ID：14303522
> 
> 赞同：1
> 
> 时间：2013-01-13T12:37:42.410
> 
> 标签：html, ruby-on-rails, hidden-field

我有这样的代码：

```
= hidden_field(:user_id, nil, :value => params[:user_id]) 
```

但它正在生成这样的html：

```
<input id="user_id_" name="user_id[]" type="hidden" value="1"> 
```

但是我需要写什么来生成这样的html代码：

```
<input id="user_id" name="user_id" type="hidden" value="1"> 
```

没有任何数组？另外，如果我只写一个输入，没有任何表单标签，我会在参数中看到这个值，还是我必须写完整：form_tag，然后有隐藏字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:49:30.010

使用 hidden_​​field_tag

```
hidden_field_tag 'user_id', 1
# => <input id="user_id" name="user_id" type="hidden" value="1" /> 
```

# jquery - 多个实例覆盖值

> ID：14303526
> 
> 赞同：0
> 
> 时间：2013-01-13T12:37:59.890
> 
> 标签：jquery

我创建了一个非常简单的 jQuery 徽标旋转插件，但第二个实例覆盖了第一个实例的值。

```
(function($){
    $.fn.clientRoll = function(settings) {

      var config = {
        'speed': 10000,
        'items': 3
    };

  var settings = $.extend(config, settings);

  var itemRoll = $(this); 

  var childHeight = $(itemRoll).children().eq(0).outerHeight();
  $(itemRoll).height(childHeight);

  $.fn.clientRollLeft = function() {
    var logoWidth = $(this).children(':first').innerWidth();

    $(this).children(':first').not(':animated').clone().css({ opacity: 0, marginLeft: "" }).insertAfter($(this).children(':last'))/*.delay(200).animate({ opacity: 1 })*/;

    $(this).children(':first').not(':animated').animate({ 
      marginLeft: -(logoWidth), opacity: 0 }, function () {   
        $(this).remove();
    });

    $(this).children(":gt(" + (config.items - 1) + ")").css({ opacity: 0, background: "#FF0" }).delay(300).animate({ opacity: 1, background: "#FFF" });
}

};
})(jQuery); 
```

所以每当我写这样的东西时： $(".client-roll div > ul").clientRoll({ 'speed': 2000, 'items': 4 }); $(".article-roll").clientRoll({ 'items': 3, 'speed': 1500 });

第一个实例的“items”值被第二个实例的值 3 覆盖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:47:55.727

The [`extend` method](http://api.jquery.com/jQuery.extend/) extends the object that you pass as the first parameter, and returns it.

Supply a new object as the first parameter if you want to merge two objects into a new one:

```
var settings = $.extend({}, config, settings); 
```

# preon - 使用 Preon 获取对象字段的大小和偏移量

> ID：14303534
> 
> 赞同：1
> 
> 时间：2013-01-13T12:38:57.897
> 
> 标签：preon

我正在使用 Preon 为 Eclipse 开发一个共享对象编辑器/查看器。编辑器看起来像：

![编辑器视图](../Images/c929ab607d058f8bf7347acbeb448bef.png)

为了改进它，我想实现一个功能，一旦在顶部面板上选择了一个条目，它就会在底部面板上突出显示相应的字节。为此，使用 Preon 检索我的对象的给定字段的大小和偏移量会非常有趣。

我怎样才能做到这一点？还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:10:49.030

很难说出您到底想要实现什么（屏幕截图相当小），但它可能与[此](http://wilfred.home.xs4all.nl/preon/hello.html)有关。

[![在此处输入图像描述](../Images/6746b0bee7768fb1ec67c3e3f33a5d9f.png)](http://wilfred.home.xs4all.nl/preon/hello.html)

它是使用[`preon-emitter`](http://preon.github.com/preon-emitter/)模块完成的，在解码器运行时，在它解码的不同数据片段上发出元数据。如您所见，它允许您构建一个 HTML 页面，当您将鼠标悬停在字节上时，它会为您提供有关它解码的数据结构的信息。

在这种特殊情况下，它显示了类文件的内容。左边的粗体字是解码的值，其余的是该值在类文件数据结构中的位置。

# database - 企业库异常处理“处理”方法

> ID：14303535
> 
> 赞同：0
> 
> 时间：2013-01-13T12:39:10.580
> 
> 标签：database, logging, exception-handling, enterprise-library, fluent-interface

我有一个关于使用企业库异常处理应用程序块的问题。

首先是“ExceptionManager.Process”方法。我从文档中了解到的是，您可以执行所需的方法，如果它有异常，则 ExceptionManager 会处理它，并且它不需要任何 try-catch 块。但是当我使用它时，它会抛出异常。

```
builder.ConfigureExceptionHandling()
                .GivenPolicyWithName("Data Access Policy")
                .ForExceptionType<Exception>()
                .LogToCategory("General")
                .WithSeverity(System.Diagnostics.TraceEventType.Error)
                .UsingEventId(9000)
                .WrapWith<InvalidOperationException>()
                .UsingMessage("MyMessage").ThenDoNothing();
        #endregion

        var configSource = new DictionaryConfigurationSource();
        builder.UpdateConfigurationWithReplace(configSource);
        EnterpriseLibraryContainer.Current = EnterpriseLibraryContainer.CreateDefaultContainer(configSource);

        #endregion

        var exManager = EnterpriseLibraryContainer.Current.GetInstance<ExceptionManager>();
        exManager.Process(GenerateException, "Data Access Policy");
    }

    private static void GenerateException()
    {
        throw new NullReferenceException();
    } 
```

我已经使用 fluent-API 来配置应用程序块。我想将异常记录到数据库中，并且我已经很好地配置了它。ExeptionManager.HandleException 运行良好，但它需要位于 try-catch 块中。

如何使用“处理”方法来处理不中断且不使用 try-catch 块的异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T01:22:53.810

您需要配置日志记录块。您没有发布您收到的异常，但如果您检查 InnerException 属性，您会发现以下消息：

> LogWriter 类型没有可访问的构造函数。

要使用异常处理块记录到数据库，您需要配置异常处理块、记录块和数据访问块。在您的情况下，它看起来像这样：

```
var builder = new ConfigurationSourceBuilder();

builder.ConfigureExceptionHandling()
    .GivenPolicyWithName("Data Access Policy")
    .ForExceptionType<Exception>()
    .LogToCategory("General")
    .WithSeverity(System.Diagnostics.TraceEventType.Error)
    .UsingEventId(9000)
    .WrapWith<InvalidOperationException>()
    .UsingMessage("MyMessage").ThenDoNothing();

builder.ConfigureLogging()
    .WithOptions
        .DoNotRevertImpersonation()
    .LogToCategoryNamed("General")
        .WithOptions.SetAsDefaultCategory()
        .SendTo.Database("Database Trace Listener")
        .UseDatabase("Logging")
        .WithAddCategoryStoredProcedure("AddCategory")
        .WithWriteLogStoredProcedure("WriteLog");

builder.ConfigureData()
    .ForDatabaseNamed("Logging")
    .ThatIs.ASqlDatabase()
    .WithConnectionString(@"Data Source=.\SQLEXPRESS;DataBase=LoggingDefault;Integrated Security=True;")
    .AsDefault();

var configSource = new DictionaryConfigurationSource();
builder.UpdateConfigurationWithReplace(configSource);
EnterpriseLibraryContainer.Current = EnterpriseLibraryContainer.CreateDefaultContainer(configSource);

var exManager = EnterpriseLibraryContainer.Current.GetInstance<ExceptionManager>();
exManager.Process(GenerateException, "Data Access Policy"); 
```

另外，请注意，您不需要`Wrap<>`配置中的 ，因为您正在吞下异常而不是抛出或重新抛出。

# php - 从mysql中动态选择列

> ID：14303538
> 
> 赞同：0
> 
> 时间：2013-01-13T12:39:23.393
> 
> 标签：php, mysql, dynamic

我有几个查询导致动态部分，但我认为这应该是有道理的

```
$memberID = 7;
$oreVolumePriceQuery = "SELECT od.oreID, od.oreType, od.name, od.inGameID, od.size, ir.officialCorpRate FROM oreData od JOIN itemRates ir ON od.inGameID = ir.typeID order by od.oreID asc";
$oreVolumePriceResult = mysql_query($oreVolumePriceQuery);
while($row = mysql_fetch_assoc($oreVolumePriceResult)){
    $oreType = $row['oreType'];
    $getRefiningRateQuery = "SELECT '$oreType' FROM memberData WHERE member_id = '$memberID'";
    $getRefiningRateResult = mysql_query($getRefiningRateQuery);
    while($row = mysql_fetch_assoc($getRefiningRateResult)){
    $refiningRate = $row['$oreType']; 
```

第一个查询返回类似于下面的结果（实际上是 31 行，但 2 行就足够了）

```
oreID | oreType | name     | inGameID | size | officialCorpRate
 1    | veld    | veldspar | 1230     | 0.1  | 10.21
 2    | scor    | scordite | 1228     | .15  | 10.2 
```

根据第一行，第二个查询最终是

```
SELECT veld FROM memberData WHERE member_ID = '7' 
```

这个查询返回正确的结果

```
veld
 .7 
```

但这一切都在最后一行分崩离析，它动态地选择从查询中提取哪一列。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:46:06.080

您正在定义两个相同的 $row 名称，将第二个 fetch 重命名为 $row1 forexample

```
 while($row = mysql_fetch_assoc($oreVolumePriceResult)){
$oreType = $row['oreType'];
$getRefiningRateQuery = "SELECT '$oreType' FROM memberData WHERE member_id = '$memberID'";
$getRefiningRateResult = mysql_query($getRefiningRateQuery);
while($row1 = mysql_fetch_assoc($getRefiningRateResult)){
$refiningRate = $row1[$oreType]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:47:26.397

Variables in single quotes won't be evaluated, so instead of

```
$refiningRate = $row['$oreType']; 
```

you probably want

```
$refiningRate = $row[$oreType]; 
```

Also, is there a reason you aren't just joining the memberData table to the original query?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T12:46:19.950

根据经验，您应该始终`mysql_error();`在查询因未知原因失败时添加。所以，试试这个，因为我做了 3/4 的改变：

```
$oreVolumePriceQuery = "SELECT od.oreID, od.oreType, od.name, od.inGameID, od.size, ir.officialCorpRate FROM oreData od JOIN itemRates ir ON od.inGameID = ir.typeID order by od.oreID asc";
$oreVolumePriceResult = mysql_query($oreVolumePriceQuery) or die(mysql_error());
while($row = mysql_fetch_assoc($oreVolumePriceResult)){
    $memberID = 7;
    $oreType = $row['oreType'];
    $getRefiningRateQuery = "SELECT '$oreType' FROM memberData WHERE member_id = '$memberID'";
    $getRefiningRateResult = mysql_query($getRefiningRateQuery) or die(mysql_error());
    while($row = mysql_fetch_assoc($getRefiningRateResult)){
    $refiningRate = $row['$oreType']; 
```

# code-generation - 比较 Ecore 类和类型

> ID：14303543
> 
> 赞同：0
> 
> 时间：2013-01-13T12:39:46.080
> 
> 标签：code-generation, xtend

我想比较 if 子句中的 eCore 数据类型和 eCore 类。像这样的东西：

if (ent == "Entity"){}

“实体”是 eCore-Class，“ent”是此类的实际对象。

eCore Datatypes 也有同样的问题。

if(ent.eType == "EBolean"){}

我怎样才能做到这一点？目前我只将名称与字符串操作进行比较。

与此类似：

if(ent.name.toString.equals("Entity")) {} 或 eType.name.toString.equals("EBoolean") 但这对我来说只是一个临时解决方案。

对于这个问题，还有其他可能的更专业的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T20:38:33.057

您是否为 EMF 模型生成了 Java 类？如果是，那么 instanceof 应该可以工作。

```
switch ent {
  Entity : {
     ...
  }
} 
```

如果您想比较 EClass 实例而不是生成的 EPackage 中的常量，您可以使用。那将是这样的：

```
if (ent.eClass == MyEcorePackage::Entity) {
   ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T15:27:15.353

首先过滤 EObject 的类型`class`。进一步拆分它`typeof(className)`。

```
for (clazz : p.EClassifiers.filter(typeof(EClass))) {
         if (clazz.name == typeof(ClassA).simpleName) { clazz.callMethodA;
  } else if (clazz.name == typeof(ClassB).simpleName) { clazz.callMethodB; }
} 
```

`EDataTypes`对...做同样的事情

# android - zAdjustment="top" 对 TableRow 内的按钮没有影响？

> ID：14303544
> 
> 赞同：1
> 
> 时间：2013-01-13T12:39:51.873
> 
> 标签：android, android-animation

我有一个`Fragment`（使用支持库，是的，我已经阅读[了这篇](https://stackoverflow.com/questions/12155845/fragments-androidzadjustment-z-order-and-animations)文章）。在这个片段中，我在（B）中有一个`ImageButton`（A `TableRow`）。我正在尝试制作动画`A`- 扩展它，然后再次缩小它。这是使用的动画：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator" >

    <scale
        android:duration="250"
        android:fromXScale="1.0"
        android:fromYScale="1.0"
        android:pivotX="50%"
        android:pivotY="50%"
        android:repeatCount="1"
        android:repeatMode="reverse"
        android:toXScale="1.25"
        android:toYScale="1.25"
        android:zAdjustment="top"/>
</set> 
```

它的工作原理是在`A`增长时被`B`. 因此，`android:zAdjustment`似乎没有任何效果。（`B`此布局是必需的，因此我无法在动画期间更改/删除它。）

**问：如何在所有其他视图之上为我的按钮设置动画？**

# c# - Linq 查询 'and' 'or' 运算符

> ID：14303545
> 
> 赞同：11
> 
> 时间：2013-01-13T12:39:57.123
> 
> 标签：c#, .net, linq

我编写了一个带有“或”条件和“和”的 LINQ 查询，但它运行不正常。

```
from x in db.fotoes.Where(x => x.uid == NewsId && 
x.ukat == 'fukat1' || x.ukat == 'fukat2') 
```

我不知道为什么它不起作用，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-13T12:41:28.177

试试这样，你需要使用括号来分组你的条件：

```
from x in db.fotoes.Where(x => x.uid == NewsId && 
(x.ukat == 'fukat1' || x.ukat == 'fukat2')) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-13T12:41:28.807

通过添加括号对条件进行分组：

```
from x in db.fotoes.Where(x => (x.uid == NewsId) && 
                         (x.ukat == 'fukat1' || x.ukat == 'fukat2')) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-13T12:42:39.160

```
from x in db.fotoes.Where(x => x.uid == NewsId && (
x.ukat == 'fukat1' || x.ukat == 'fukat2')) 
```

这是你想要做的吗？您可以通过将一组条件放在括号内来对它们进行分组。

# python - 捕获由 ftplib 中的连接错误导致的异常

> ID：14303548
> 
> 赞同：2
> 
> 时间：2013-01-13T12:40:12.840
> 
> 标签：python, exception, ftplib

我正在尝试使用 python 上传大量文件`ftplib`。
我应该捕获什么样的异常以确保问题是连接错误（以便我可以重新连接）？

* * *

编辑：我在这种情况下
尝试过：`all_errors`

*   `ftplib`在文件上传之前通过和暂停应用程序（通过调试器） 连接到 FTP 服务器
*   通过服务器关闭连接
*   恢复申请

使用此代码：

```
 try:        
            self.f.cwd(dest)
            return self.f.storbinary(('STOR '+n).encode('utf-8'), open(f,'rb'))
        except ftplib.all_errors as e:
            print e 
```

异常捕获但`all_errors`为空：

```
e   EOFError:   
    args    tuple: ()   
    message str: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:42:09.600

您可以在文档中查找它：http: [//docs.python.org/2/library/ftplib.html#ftplib.error_reply](http://docs.python.org/2/library/ftplib.html#ftplib.error_reply)

也不要忘记：[http ://docs.python.org/2/library/ftplib.html#ftplib.all_errors](http://docs.python.org/2/library/ftplib.html#ftplib.all_errors)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T12:46:14.903

像这样试试

```
import socket
import ftplib

try:
    s = ftplib.FTP(server , user , password) 
except ftplib.all_errors as e:
    print "%s" % e 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-30T02:37:52.763

捕获进出 ftp 服务器的异常的一种简单方法可能是：

```
import ftplib, os

def from_ftp( server, path, data, filename = None ):
    '''Store the ftp data content to filename (anonymous only)'''
    if not filename:
        filename = os.path.basename( os.path.realpath(data) )

    try:
        ftp = ftplib.FTP( server )
        print( server + ' -> '+ ftp.login() )        
        print( server + ' -> '+ ftp.cwd(path) ) 
        with open(filename, 'wb') as out:
            print( server + ' -> '+ ftp.retrbinary( 'RETR ' + data, out.write ) ) 

    except ftplib.all_errors as e:
        print( 'Ftp fail -> ', e )
        return False

    return True

def to_ftp( server, path, file_input, file_output = None ):
    '''Store a file to ftp (anonymous only)'''
    if not file_output:
        file_output = os.path.basename( os.path.realpath(file_input) )

    try:
        ftp = ftplib.FTP( server )
        print( server + ' -> '+ ftp.login() )        
        print( server + ' -> '+ ftp.cwd(path) ) 
        with open( file_input, 'rb' ) as out:
            print( server + ' -> '+ ftp.storbinary( 'STOR ' + file_output, out ) ) 

    except ftplib.all_errors as e:
        print( 'Ftp fail -> ', e )
        return False

    return True 
```

# redirect - 如何在 zend 框架 2 中重定向到上一页？

> ID：14303558
> 
> 赞同：8
> 
> 时间：2013-01-13T12:41:22.407
> 
> 标签：redirect, zend-framework2

对于这些情况，我想自动重定向回我发出请求的页面：

1.  完成任何操作（CRUD 等）后 - 我认为我们需要重定向到“HTTP_REFERER”
2.  在冲浪或购物时，如果需要登录，则在完成身份验证过程后，它应该重定向回同一页面

另一种情况（不是“重定向到上一页”）：

*   在查询中传递一个重定向 URL（登陆页面地址），例如：如果我发送一个（外部）/URL（ofc 编码）作为 GET 查询参数（或路由部分），登录后，它应该将我重定向到这个 URL

我已经在网上搜索过这个并找到[了一些解决方案](https://stackoverflow.com/questions/1249274/redirect-to-previous-page-in-zend-framework)，但它们不是根据**Zend Framework 2**的。我希望所有这些都以 zf2 方式完成。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-13T15:08:09.720

这对我有用：

```
$url = $this->getRequest()->getHeader('Referer')->getUri();
$this->redirect()->toUrl($url); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-13T13:10:09.513

好吧，对于 CRUD 的东西，我会简单地重定向到前一个动作的路线，通常是类似的`admin-index`，`administrate`或者其他什么。我真的不明白为什么`HTTP_REFERER`在这种情况下你会需要。但是，如果您仍然想访问`HTTP_REFERER`它，就像这样简单：

```
//SomeController.php
$redirectUrl = $this->getRequest()->getHeader('HTTP_REFERER', $defaultValue); 
```

有关更多信息，请参阅[`Zend\Http\Request`](https://github.com/zendframework/zf2/blob/master/library/Zend/Http/Request.php#L358)

重定向将[`redirect()`](https://github.com/zendframework/zf2/blob/master/library/Zend/Mvc/Controller/Plugin/Redirect.php#L65)使用[`Zend\Mvc\Controller\AbstractActionController`](https://github.com/zendframework/zf2/blob/master/library/Zend/Mvc/Controller/AbstractActionController.php)

```
$this->redirect()->toUrl($redirectUrl); //or using a route:
$this->redirect()->toRoute('some/route'); 
```

要查看更多用例的实时示例，我建议您查看一些非常适合您的用例的模块。这里最合适的可能是[Zf-Commons\ZfcUser](https://github.com/ZF-Commons/ZfcUser/blob/master/src/ZfcUser/Controller/UserController.php)和[bjyoungblood\BjyAuthorize](https://github.com/bjyoungblood/BjyAuthorize/blob/master/src/BjyAuthorize/Guard/Controller.php#L135)。对于这些示例中的每一个，我都链接了相关的代码示例，这些示例可能会深入了解您的需求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-27T13:20:53.183

我认为仅在您单击链接并让自己被重定向到应得的页面时才设置引用字段。以[http://www.whatismyreferer.com/](http://www.whatismyreferer.com/)为例。当您使用谷歌搜索并单击链接时，该链接会将您带到该站点，引用者将是谷歌。但是，如果您将此 url 复制并粘贴到您的网络浏览器，则引用页面将是未定义的。我错了吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-28T13:51:17.290

这是一个很酷的技巧。

首先创建一个特征：

```
<?php

namespace Application\Controller\Plugin;

use Zend\Session;

trait RefererRedirect
{
    /**
     * @var Session\Container
     */
    private $sessionContainer;

    /**
     * @param Session\Container $sessionContainer
     */
    public function setSessionContainer(Session\Container $sessionContainer)
    {
        $this->sessionContainer = $sessionContainer;
    }

    protected function clearReferer()
    {
        $this->sessionContainer->offsetUnset('referer');
    }

    protected function registerReferer()
    {
        if (!$this->sessionContainer->offsetExists('referer')) {
            $this->sessionContainer->offsetSet('referer', $this->getRequest()->getHeader('Referer')->uri()->getPath());
        }
    }

    protected function redirectToRefererOrDefaultRoute($defaultRoute, $defaultParams = [])
    {
        if ($this->sessionContainer->offsetExists('referer')) {
            $url = $this->sessionContainer->offsetGet('referer');
            $this->clearReferer();

            return $this->redirect()->toUrl($url);
        }

        return $this->redirect()->toRoute($defaultRoute, $defaultParams);
    }
} 
```

然后是一个界面：

```
<?php

namespace Application;

use Zend\Session;

interface RefererAwareInterface
{
    /**
     * @param Session\Container $sessionContainer
     */
    public function setSessionContainer(Session\Container $sessionContainer);
} 
```

然后使用接口注入SessionContainer：

```
<?php

namespace Application;

class Module
{
    public function getControllerConfig()
    {
        return [
            'factories' => [
            ],
            'initializers' => array(
                function ($instance, $sm) {
                    if ($instance instanceof RefererAwareInterface) {
                        $instance->setSessionContainer(new Session\Container('Referer'));
                    }
                }
            )
        ];
    }
} 
```

然后在你的控制器中：

```
<?php

namespace Auth\Controller;

class UsersController extends AbstractActionController implements RefererAwareInterface
{
    use RefererRedirect;

    public function indexAction()
    {
        $this->clearReferer();

        // do stuff
    }

    public function addAction()
    {
        $this->registerReferer();

        // do stuff

        return $this->redirectToRefererOrDefaultRoute('auth/users');
    }

    public function backAction()
    {
        return $this->redirectToRefererOrDefaultRoute('auth/users');
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-28T20:42:29.387

上面的一个对我有用，但是这个：

```
$url = $this->getRequest()->getHeaders('cookie')->original_url;
$this->redirect()->toUrl($url); 
```

[不过，如果有人澄清了我，我会很感激，为什么“推荐人方式”对我不起作用！：） 谢谢！]

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-28T13:23:42.153

只是想从我的最终代码中分享一个片段，如果用户来自另一个页面：

```
$referer = $this->getRequest()->getHeader('Referer');
if ($referer) {
    $refererUrl = $referer->uri()->getPath(); // referer url
    $refererHost = $referer->uri()->getHost(); // referer host
    $host = $this->getRequest()->getUri()->getHost(); // current host

    // only redirect to previous page if request comes from same host
    if ($refererUrl && ($refererHost == $host)) {
        return $this->redirect()->toUrl($refererUrl);
    }
}
// redirect to home if no referer or from another page
return $this->redirect()->toRoute('home'); 
```

# regex - xquery 正则表达式...有没有更简单的方法

> ID：14303559
> 
> 赞同：0
> 
> 时间：2013-01-13T12:41:22.893
> 
> 标签：regex, xquery

嗨，我是 xquery 和 xquery 中正则表达式的新手。我有一个 xml 标签，我想找到它的某个部分..即。somethingjpg 但不让它寻找.jpg。问题是 somethingjpg 并不总是在同一个空间中。

这是一个 xml 示例：

```
 <book title="Harry Potter">
    <description
   xlink:type="simple"
   xlink:href="http://book.com/2012/12/28/20121228-there_is_somethingjpg_123456789a1s23e4.jpg"
  xlink:show="new">
 As his fifth year at Hogwarts School of Witchcraft and
  Wizardry approaches, 15-year-old Harry Potter is.......
    </description>
   </book> 
```

或者 xlink:href 可以是这样的..

```
 <book title="Harry Potter">
    <description
   xlink:type="simple"
   xlink:href="http://book.com/2012/12/28/20121228-there_is_always_more_to_somethingelsejpg_123456789a1s23e4.jpg"
  xlink:show="new">
 As his fifth year at Hogwarts School of Witchcraft and
  Wizardry approaches, 15-year-old Harry Potter is.......
    </description>
   </book> 
```

我想要实现的（如果可能的话）是一段 xquery 代码，它将查找 somethingjpg 或 somethingelsejpg。然后修复somethingjpg 或somethingelsejpg 只说一些东西或其他东西，再次将链接全部连接在一起，并在eXist-db中的旧链接上替换新链接

代码明智我有..

```
let $a := collection('/db/articles/')//book
for $b in $a//@xlink:href[contains(.,'jpg_')]
let $c := tokenize(replace($b, 'Some sort of redex I can't figure out', '$1;$2;$3'), ';')
let $d := $c[2]
let $e := replace(substring-before($d, 'jpg_'). '_')
let $f := concat ($c[1]. $e, $c[3])
return update replace $b with $f 
```

我就是想不通剩下的……救命！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:11:16.213

您可能希望使用[eXist 的 XQuery 更新工具](http://exist-db.org/exist/update_ext.xml)

特别是，`update replace expr with exprSingle`文档表明

> 如果 [expr] 是属性或文本节点，则将属性或文本节点的值设置为 exprSingle 中所有节点的串联字符串值

所以像你一样找到其值包含'jpg_'字符串的属性节点，然后用空字符串简单地替换'jpg_'（你甚至不需要正则表达式）：`replace($attr, 'jpg_', '')`

```
for $attr in $a//@xlink:href[contains(.,'jpg_')]
  let $newval = replace ($attr, 'jpg_', '')
    return update replace $attr with $newval 
```

另请参阅[XQuery 更新工具文档](http://www.w3.org/TR/xquery-update-10/)（当然，eXist 可能会或可能不会完全实现，尽管它似乎支持得足够多）

目前尚不清楚您究竟想要替换什么以及为什么要尝试标记化 - 您需要添加更多详细信息，以防您不想简单地从属性值中删除“jpg_”。

# ruby-on-rails - 想要对数据库中的照片进行排序

> ID：14303562
> 
> 赞同：0
> 
> 时间：2013-01-13T12:41:43.727
> 
> 标签：ruby-on-rails

```
<div class="interface_wrapper">
 <div class="interface">
  <% current_user.friends.each do |f| %>
  <% f.photos.each do |p| %>
  <div class='image_wrapper'>
   <div class='image'>
    <div class="img">
     <%= image_tag(p.url) %> 
```

我要排序 |p| 在创建时间。模型（照片）中的属性是 created_time。有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:45:36.067

你可以这样做：

```
<div class="interface_wrapper">
 <div class="interface">
  <% current_user.friends.each do |f| %>
  <% f.photos.order("created_time desc").each do |p| %>
  <div class='image_wrapper'>
   <div class='image'>
    <div class="img">
     <%= image_tag(p.url) %> 
```

但是，我认为这不是正确的方法。排序逻辑不应该在视图中决定。而是在您的照片模型中定义一个范围，并使用它来获取订购的照片。

# java - 向量索引OutOfBoundsException

> ID：14303568
> 
> 赞同：2
> 
> 时间：2013-01-13T12:42:27.733
> 
> 标签：java, exception, vector

我成功添加了第一个学生，但是当我添加第二个学生时，线程“ ”
中出现异常：数组索引超出范围：11 `main``java.lang.ArrayIndexOutOfBoundsException`

```
at java.util.Vector.get(Unknown Source)  
    at business.StudentCollection.UseArray(StudentCollection.java:58  
    at business.Application.main(Application.java:30) 
```

代码段

```
 public class StudentCollection {  
private Vector<Student> collection;  
private int count;  

public StudentCollection ()
{  
collection=new Vector<Student>(10,2);  
count=0;  
for( int i=0;i< collection.capacity(); i++) //i read that object cannot be added to 
vectors if empty  
collection.add(i,new Student(0,"No Student",0));

}  

public void addStud(int ID,String name,int Credits)
   {    

for(int i=0;i< collection.capacity();i++)  
 if(collection.get(i)==null)  // new Error
collection.add(i,new Student(0,"No Student",0)); //making sure vector new index are   filled

collection.add(count,new Student(ID,name,Credits));  
count++;  

  }  
public Student UseArray(int x){  \\ Error here line 58
return collection.get(x);  

                      }

 public int getlengthh(){  
    return collection.capacity();  
                }  
}  
 public static void main (String [] args ){  
 StudentCollection C=new StudentCollection();  

        System.out.println("Enter Student's ID");  
        x=scan.nextInt();  
        for (int i=0;i< C.getlengthh();i++){    
if(C.UseArray(i).getID()==x){  // Error here
        System.out.println("A student with this ID already exists.Do you want to overwrite the existing student?yes/no");  
        scan.nextLine();  
        ans=scan.nextLine();  

        if (ans.equalsIgnoreCase("yes")){
            C.delete(x);
        continue;
        }
        else {
            System.out.println("Enter Student's ID");
        x=scan.nextInt();
        }
            }
        }

        System.out.println("Enter Student's name");
        Str=scan.nextLine();
        Str=scan.nextLine()+Str;
        System.out.println("Enter number of credits");
        y=scan.nextInt();
        C.addStud(x,Str,y);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:45:51.830

修改为

```
 public Student UseArray(int x){  \\ Error here line 58
     if(collection.size() > x)
        return collection.get(x); 
     return null; 

    } 
```

容量和大小是有区别的。容量返回由创建的数组的长度`Vector`以保存当前和传入元素。而 size 是已经放入向量中的元素的数量。话虽如此，在检查元素是否存在时，不使用容量使用大小，如下所示：

```
 public int getlengthh(){  
    return collection.size();  
                } 
```

即使`capacity`大于`index`仍然添加会抛出异常。看[这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Vector.html#get%28int%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T13:05:10.030

The whole point of collection classes like `Vector` is that you don't need to manually index into them like an array. You don't need to maintain a count variable, either -- when you want to know how many students you have, simply call `size()` on the Vector. Now, unless you need Vector's thread-safety, I would go with ArrayList instead, but they are both implementations of List, which means all you need to do is call `add(Student)`.

I would take a good look at the [Java Collections Trail](http://docs.oracle.com/javase/tutorial/collections/index.html) before continuing.

Also, on a stylistic note, clean up your source formatting. Having inconsistent indentation will make it very hard to review your code for bugs.

# sql - 加入两个不同的表并删除重复的条目

> ID：14303573
> 
> 赞同：3
> 
> 时间：2013-01-13T12:42:54.090
> 
> 标签：sql, postgresql

我是 sql 查询的新手。我有两张桌子：

**表格1：**

```
id_s  name   post_code     city     subject
------------------------------------------
1     name1  postal1    city1    subject1
2     name2  postal2    city2    subject2
3     name3  postal3    city3    subject3
4     name4  postal4    city4    subject4
...
~350 
```

**表2：**

```
id_p  name   post_code     city     subject
------------------------------------------
1     name1  postal1    city1    subject1
2     name2  postal2    city2    subject2
3     name3  postal3    city3    subject3
4     name4  postal4    city4    subject4 
...
~1200 
```

我想加入这两个表，并删除具有相同名称和邮政编码的条目。我找到了一些关于如何做到这一点的答案，但它们太复杂了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T12:46:09.270

您可以使用`UNION`子句，`UNION`将检查重复项，并且只返回不同的行

```
SELECT * FROM table1
UNION
SELECT * FROM Table2 
```

编辑：要存储两个表中的数据而不重复，请执行此操作

```
INSERT INTO TABLE1
SELECT * FROM TABLE2 A
WHERE NOT EXISTS (SELECT 1 FROM TABLE1 X 
                  WHERE A.NAME = X.NAME AND 
                  A.post_code = x.post_code) 
```

这将插入 table2 中与 table1 中的名称、邮政编码不匹配的行

另一种选择是您也可以创建新表而不是触摸 table1 和 table2

```
CREATE TABLE TABLENAME AS
SELECT * FROM table1
UNION
SELECT * FROM Table2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T13:01:27.263

你可以给出这样的`SELECT INTO` 命令

```
SELECT * INTO newtable FROM table1
UNION
SELECT * FROM table2; 
```

这将从 table1 和 table2 创建一个新表，没有任何重复

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-25T10:36:08.960

试试这个简单的：

```
(select * from table1 MINUS select * from table2)
UNION
(select * from table2 MINUS select * from table1) 
```

# sql - Sql 2005 Express：这是否可以在循环插入场景中跳过插入触发器后？

> ID：14303575
> 
> 赞同：1
> 
> 时间：2013-01-13T12:43:09.193
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我有一个问卷，有多个部分，每个部分有 N 个问题。每个部分都有 10 个问题。我正在将一组 10 个问题的结果保存到`Answers`使用`for loop`. 另外，我有一个标准来在所有问题都得到回答时禁用正在运行的部分，以便在管道中加载下一个部分。

在向“答案”表提交 10 个问题时，我使用触发器计算“QuestionMaster”主表中的问题总数以及保存在 中的问题`Answers`。如果两者相等，则当前部分状态为假，以便选择下一部分。

我的触发器是：

```
ALTER Trigger [dbo].[GetAnsweredQuestionCount]
On [dbo].[Answers]
After Insert
As
Begin
    Declare @sectionid as int
    Declare @companyid as int 
    Declare @Count_Inserted as int
    Declare @Count_remaining as int
Declare @userid as varchar(50)

Set @sectionid = (Select Top(1) SectionId from inserted)
Set @companyid = (Select Top(1) CompanyId from inserted)

Set @userid= (Select Top(1) UserId from inserted )

Set @Count_inserted = (Select count(id) from inserted where SectionId = @sectionid and companyid = @companyid and userid=@userid)

Set @Count_remaining = (Select count(id) from SectionQuestionMap where SectionId = @sectionid and companyid = @companyid and userid=@userid)

If @Count_inserted = @Count_remaining
    begin
        Update SectionCompanyRateMap Set IsCompleted =1 Where SectionId=@sectionid and CompanyId=@companyid
    end
End 
```

我的问题是，因为我使用循环来插入记录，所以触发器触发了 10 次，这是我不想要的。我想知道是否有任何方法可以跳过前 9 次触发器，这样，当我的所有问题都保存时，它只会执行一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:55:51.160

**第一种方法：**

您可以在一个插入查询中完成每个部分后进行插入，而不是循环。因此，触发器只会运行一次。

**第二种方法**（如果第一种方法不可能）：

您可以定义一个包含标志的附加位列，并在您的触发器中检查它以确定是否应该使用触发器。

**使用[NOT FOR REPLICATION选项可以](http://msdn.microsoft.com/en-gb/library/ms152529%28v=sql.105%29.aspx)**禁用触发器**，但我怀疑这会对您有所帮助。因此，我会尝试考虑一种类似于第一种/第二种方法中描述的方法。**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:37:58.953

另一种选择和简单的例子

```
IF OBJECT_ID('dbo.test10') IS NOT NULL DROP TABLE dbo.test10
CREATE TABLE dbo.test10
 (
  Id int IDENTITY
  )
GO  

CREATE TRIGGER dbo.tr_test10 ON dbo.test10
FOR INSERT
AS
BEGIN
  SELECT 'Catch!' AS ColumnInTrigger
END
GO

SELECT Id AS [Start]
FROM dbo.test10

DECLARE @dsql nvarchar(max),
        @i int = 1
SET @dsql = 'DISABLE TRIGGER dbo.tr_test10 ON dbo.test10'
EXEC sp_executesql @dsql

WHILE (@i != 10)
BEGIN
  IF @i = 9
  BEGIN
    SET @dsql = 'ENABLE TRIGGER dbo.tr_test10 ON dbo.test10'
    EXEC sp_executesql @dsql        
  END

  INSERT dbo.test10
  DEFAULT VALUES

  SET @i += 1
END

SELECT Id AS [End]
FROM dbo.test10 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/eba17/2)上的演示[](http://sqlfiddle.com/#!3/eba17/2)**

# mysql - 一步插入mysql复杂数据

> ID：14303580
> 
> 赞同：1
> 
> 时间：2013-01-13T12:43:27.453
> 
> 标签：mysql, insertion

我有一个 html/javascript 页面，它创建了一些类似于图形的数据，它是一个节点数组，不同类型，具有不同的属性，包括节点之间的多个交叉引用，有时还有文本，必须存储在单独的表，因为它可能被翻译成其他语言。

json stringify 可能如下所示：

```
[{"type":"bid-rama","parent":-1,"child":1,"color":"silver","state":{"bid":[0,0,1],"length":3,"turn":"lho","main":{"s":"a83","h":"kq84","d":"jt52","c":"94"},"rho":{"s":"kj92","h":"j3","d":"q93","c":"qj83"},"lho":{"s":"t7","h":"9765","d":"k87","c":"at76"},"cho":{"s":"q654","h":"at2","d":"a64","c":"k52"}}},{"type":"bid-nodo","parents":[0],"fila":2,"children":{"0":2,"-1":4,"5":6},"options":{"0":"mog","-1":"mop","5":"mor","4":"blue","7":"red"},"texts":{"blue":"texto axu","red":"testo roho"},"state":{"bid":[0,0,1],"turn":"main"}},{"type":"bid-rama","parent":1,"child":3,"color":"green","state":{"bid":[0,0,1,0],"length":0,"turn":"lho"}},{"type":"bid-nodo","parent":2,"fila":3},{"type":"bid-rama","parent":1,"child":5,"color":"purple","state":{"bid":[0,0,1,-1],"length":0,"turn":"lho"},"texts":{"0":"blalb","1":"hrhrhr ","2":"meee[r][s] fas","3":"[10] is 10 [d] no"}},{"type":"red-dot","parent":4,"fila":3},{"type":"bid-rama","parent":1,"child":7,"color":"green","state":{"bid":[0,0,1,5,0,0,0],"length":0,"turn":"lho"}},{"type":"bid-ctr","parent":6,"fila":3,"state":{"bid":[0,0,1,5,0,0,0],"contract":5,"declarer":"south"},"color":"yellow","playnode":8},{"type":"cpl-ctr","parents":[7],"fila":1,"trump":"n","declarer":"main","color":"yellow","child":9,"state":{"main":{"s":"a83","h":"kq84","d":"jt52","c":"94"},"rho":{"s":"kj92","h":"j3","d":"q93","c":"qj83"},"lho":{"s":"t7","h":"9765","d":"k87","c":"at76"},"cho":{"s":"q654","h":"at2","d":"a64","c":"k52"},"turno":"lho","trick":"","history":"","trNS":0,"trEW":0}},{"type":"cpl-rama","parent":8,"child":10,"fila":2,"color":"yellow","state":{"main":{"s":"a83","h":"kq84","d":"jt52","c":"94"},"rho":{"s":"kj92","h":"j3","d":"q93","c":"qj83"},"lho":{"s":"t7","h":"9765","d":"k87","c":"at76"},"cho":{"s":"q654","h":"at2","d":"a64","c":"k52"},"turno":"lho","trick":"","history":"c6c2cqc4c3c9ca","trNS":0,"trEW":0}},{"type":"red-dot","parent":9,"fila":2}] 
```

我使用 ajax 将其发送到 php 页面进行存储。

到目前为止，我只进行了基本的 mysql 查询，例如插入用户名、密码等。

但是现在看起来我必须在一个表中插入东西，然后查看另一个表，从那里插入以前寄存器的 id，这样几次，等等。

我对插入过程中发生的一些不好的事情感到困扰，使我的数据库中的数据不一致，我记得我被告知应该一步完成以避免这种情况，但我想不出一种方法来做到这一点.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:03:41.230

> 我对插入过程中发生的一些不好的事情感到困扰，使我的数据库中的数据不一致，我记得我曾被告知应该一步完成以避免这种情况，但我想不出一种方法来做到这一点.

您需要在“交易”中完成所有这些工作。使用 InnoDB 表类型，学习事务。这不是火箭科学，但需要一些理论。

见[http://www.mysqltutorial.org/mysql-transaction.aspx](http://www.mysqltutorial.org/mysql-transaction.aspx) 然后[http://dev.mysql.com/doc/refman/5.1/en/ansi-diff-transactions.html](http://dev.mysql.com/doc/refman/5.1/en/ansi-diff-transactions.html)

# apache - mod_proxy/mod_proxy_ajp 日志记录

> ID：14303581
> 
> 赞同：1
> 
> 时间：2013-01-13T12:43:41.047
> 
> 标签：apache, mod-proxy

我正在尝试将 mod_proxy 请求记录到单独的日志中，以识别其将请求转发到哪个 tomcat 服务器。

*虚拟主机配置：*

```
LoadModule proxy_ajp_module modules/mod_proxy_ajp.so
<Proxy balancer://appcluster>
        BalancerMember ajp://192.168.1.1:8009/ route=tomcat01 keepalive=on retry=300 ttl=30
        BalancerMember ajp://192.168.1.2:8009/ route=tomcat01 keepalive=on retry=300 ttl=30
</Proxy>

NameVirtualHost *:80

<VirtualHost *:80>
 ServerName xyz.abc.com
 DocumentRoot /www
 ErrorLog logs/app_stg-error_log
 TransferLog logs/app_stg-access_log
 ProxyPass / balancer://appcluster/app_stg/ stickysession=JSESSIONID|jsessionid
 ProxyPassReverse / balancer://appcluster/app_stg/
</VirtualHost> 
```

我想登录我的请求已被转发到哪个 Balancer 成员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:43:58.530

它是通过在 LogFormat 下添加来实现的。

```
LogFormat "%h \"%{BALANCER_WORKER_NAME}e\" %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-agent}i\"" custom 
```

您可以将此格式添加到 httpd.conf 或虚拟主机中。

```
LoadModule proxy_ajp_module modules/mod_proxy_ajp.so
<Proxy balancer://appcluster>
        BalancerMember ajp://192.168.1.1:8009/ route=tomcat01 keepalive=on retry=300 ttl=30
        BalancerMember ajp://192.168.1.2:8009/ route=tomcat01 keepalive=on retry=300 ttl=30
</Proxy>

NameVirtualHost *:80

<VirtualHost *:80>
 ServerName xyz.abc.com
 DocumentRoot /www
 LogFormat "%h \"%{BALANCER_WORKER_NAME}e\" %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-agent}i\"" custom
 ErrorLog logs/app_stg-error_log
 CustomLog logs/app_stg-access_log custom
 ProxyPass / balancer://appcluster/app_stg/ stickysession=JSESSIONID|jsessionid
 ProxyPassReverse / balancer://appcluster/app_stg/
</VirtualHost> 
```

日志文件片段：

```
2xx.1xx.1xx.1xx "ajp://10.220.102.94:8009/" - [13/Jan/2013:08:36:54 -0500] "GET / HTTP/1.1" 400 - "-" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.52 Safari/537.17" 
```

# php - jquery自动完成，加入显示数据的最佳方式

> ID：14303583
> 
> 赞同：2
> 
> 时间：2013-01-13T12:43:50.500
> 
> 标签：php, javascript, jquery-ui, jquery-autocomplete, jquery-ui-autocomplete

为了简单起见，我有 jquery 自动完成工作，最好的方法是什么，在同一输入字段中加入/显示数组中的多行。

我的 php 看起来像这样

```
$return_arr = array();

/* If connection to database, run sql statement. */
if ($conn)
{
    $fetch = mysql_query("SELECT * FROM alltickets where name like '%" . mysql_real_escape_string($_GET['term']) . "%'");

    /* Retrieve and store in array the results of the query.*/
    while ($row = mysql_fetch_array($fetch, MYSQL_ASSOC)) {
        $row_array['id'] = $row['id'];
        $row_array['value'] = $row['name'];
        $row_array['thedate'] = $row['date'];

        array_push($return_arr,$row_array);
    }
}

/* Free connection resources. */
mysql_close($conn);

/* Toss back results as json encoded array. */
echo json_encode($return_arr); 
```

我的 html 页面看起来像

```
>Please enter what you are looking for</p>

<p class="ui-widget">

<label for="event">Please start entering your event </label>

<input type="text" id="event"  name="event" /></p>

<input type="hidden" id="mysqlid" name="mysqlid" />

<p><input type="submit" name="submitBtn" value="Submit" /></p>

</fieldset>
</form>

<script type="text/javascript">
$(function() {

            $("#event").autocomplete({
                source: "autocomp.php",
                minLength: 2,
                select: function(event, ui) {
                    $('#mysqlid').val(ui.item.id);
                }
            });

        });
</script> 
```

什么是让“日期”显示在名为事件的文本输入字段中的最有效方法，就在“名称”之后

所以现在如果我搜索，“cam”结果将如下所示

```
camera 
```

我希望结果看起来像

```
camera 17/09/2013 
```

我可以看到有几种方法可以做到这一点，最好的方法是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:05:23.880

最简单的方法可能是在`select`事件处理程序中进行。请记住也要防止事件的默认操作：

```
$("#event").autocomplete({
    source: "autocomp.php",
    minLength: 2,
    select: function(event, ui) {
        event.preventDefault();
        this.value = ui.item.value + " " + ui.item.thedate;

        $('#mysqlid').val(ui.item.id);
    }
}); 
```

**示例：http:** [//jsfiddle.net/J5rVP/33/](http://jsfiddle.net/J5rVP/33/)

* * *

如果您想在建议列表中显示日期，您有几个选项：

1.  `value`使用要显示的整个字符串填充属性（在服务器上执行工作）
2.  处理从服务器获得的响应以`value`正确填充属性
3.  覆盖该`_renderItem`功能以按照您想要的方式显示项目。

在您的情况下，似乎＃3 可能是最好的方法，因此您可以这样做：

```
$("#event").autocomplete({
    source: "autocomp.php",
    select: function (event, ui) {
        event.preventDefault();
        this.value = ui.item.value + " " + ui.item.thedate;
    }
}).data("autocomplete")._renderItem = function (ul, item) {
    return $("<li>")
        .data("item.autocomplete", item)
        .append("<a>" + item.label + " " + item.thedate + "</a>")
        .appendTo(ul);
}; 
```

**示例：http:** [//jsfiddle.net/J5rVP/34/](http://jsfiddle.net/J5rVP/34/)

# database - 拦截 Windows 对 thumbcache.db 文件的访问

> ID：14303585
> 
> 赞同：0
> 
> 时间：2013-01-13T12:44:08.667
> 
> 标签：database, windows, security, caching, thumbnails

我想创建一个软件来拦截资源管理器对缩略图缓存的访问。软件应接受资源管理器的请求并根据特定条件（例如是否安装了驱动器以及请求的缩略图是什么文件）返回肯定或否定结果。此外，安装的驱动器包含一个用于解密自定义缩略图的密钥。如果驱动器或密钥文件不可用，该工具将告诉资源管理器不存在缩略图。

我的问题：

*   哪种语言能够拦截这样的请求？有没有一些标准的方法来做到这一点？我可以伪造整个文件吗？例如，对文件的所有访问都被路由到我的应用程序？

*   thumbnailcache.db 的文件格式是否记录在案？资源管理器是否将整个文件拉入内存？拦截通信的最聪明方法是什么？

我感谢任何提示，即使它们只是部分解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:30:28.087

关于拦截访问 - 您需要创建/使用[文件系统过滤器驱动程序](http://msdn.microsoft.com/en-us/library/windows/hardware/gg462968.aspx)。您可以自己编写或使用我们的[CallbackFilter](http://www.eldos.com/cbflt/)产品。

使用过滤器驱动程序，您可以拒绝请求、修改请求、提供虚假文件内容等。

# ruby-on-rails - 运行 assets:precompile 只是挂起，只在生产中

> ID：14303588
> 
> 赞同：5
> 
> 时间：2013-01-13T12:44:32.243
> 
> 标签：ruby-on-rails, asset-pipeline, rails-admin

我不知道现在有什么不同，但是从几天前开始，跑步`rake assets:precompile`就永远挂起。这只发生在我设置`RAILS_ENV=production`.

如果我`tail -f` `production.log`，我可以看到：

```
Compiled rails_admin/jquery.pjax.js  (0ms)  (pid 28704)
Compiled jquery_nested_form.js  (0ms)  (pid 28704)
Compiled rails_admin/ra.nested-form-hooks.js  (233ms)  (pid 28704)
Compiled bootstrap.js  (10ms)  (pid 28704)
Compiled rails_admin/ra.widgets.js  (240ms)  (pid 28704)
Compiled rails_admin/ui.js  (100ms)  (pid 28704)
Compiled rails_admin/themes/default/ui.js  (0ms)  (pid 28704)
Compiled rails_admin/custom/ui.js  (0ms)  (pid 28704)
Compiled rails_admin/rails_admin.js  (1121ms)  (pid 28704)
Compiled rails_admin/jquery.colorpicker.css  (50ms)  (pid 28704)
Compiled rails_admin/imports.css  (9460ms)  (pid 28704)
Compiled rails_admin/rails_admin.css  (9472ms)  (pid 28704) 
```

由于`rails_admin/rails_admin.css`是最后出现的东西，它似乎`rails_admin.css`可能是罪魁祸首。唯一要做的`rails_admin.css`就是包含一个名为 的文件`imports.css.scss.erb`，如果您[查看该文件](https://github.com/sferik/rails_admin/blob/master/app/assets/stylesheets/rails_admin/imports.css.scss.erb)，那里的内容太多了，几乎可以是任何东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T14:09:42.780

制作`rails_admin.css`不包括任何制作的预编译工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T18:12:06.540

你有没有机会升级到最新的 3.1.x 版本的 Rails？您可能需要将 sass-rails 降级到 3.1.4 ....

有关更多信息，请参阅此评论... [“rake aborted！stack level too deep”同时部署到 Heroku](https://stackoverflow.com/questions/9779456/rake-aborted-stack-level-too-deep-while-deploying-to-heroku/9828925#9828925)

# c# - 读取期间 WinRT UDP 通信异常

> ID：14303590
> 
> 赞同：2
> 
> 时间：2013-01-13T12:44:45.057
> 
> 标签：c#, udp, windows-runtime, windows-phone-8

我正在开发一个 WP8 项目，该项目应该通过 UDP 将数据传输到连接的应用程序（WP8 也是）。我决定使用 DatagramSocket 来与 Windows 8 共享代码。

服务器和客户端应用程序可以相互连接。在客户端连接到服务器后，它会发送一个命令，该命令应该相应地回答服务器。客户端连接和命令发送代码如下：

```
var stream = await _udpSocket.GetOutputStreamAsync(server, UdpCommunication.Port);
var writer = new DataWriter(stream);
writer.UnicodeEncoding = UnicodeEncoding.Utf8;

uint messageSize = writer.MeasureString(UdpCommunication.ReceiveImageCommand);
writer.WriteUInt32(messageSize);
await writer.StoreAsync();

writer.WriteString(UdpCommunication.ReceiveImageCommand);
await writer.StoreAsync();
await writer.FlushAsync(); 
```

因此，我将传输消息大小，然后传输字符串命令名称。到目前为止，一切都很好。

服务器从 DatagramSocket 接收 MessageReceived 事件，我让 DataReader 和 trz 读取 4 bztes。在调用它的过程中，我收到以下异常消息：“操作标识符无效。” （结果-2147020579）

MessageReceived 事件的代码：

```
DataReader reader = args.GetDataReader();
reader.UnicodeEncoding = UnicodeEncoding.Utf8;

await reader.LoadAsync(4);
uint messageSize = reader.ReadUInt32();

await reader.LoadAsync(messageSize);
string message = reader.ReadString(messageSize); 
```

有没有人知道为什么会抛出这个异常以及如何解决它？我已经完成了 TCP、蓝牙和 NFC，并且都在工作并且有类似的代码。但是UDP让我发疯了......

感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T19:32:22.843

你不应该调用`LoadAsync`从调用`DataReader`返回的`DatagramSocketMessageReceivedEventArgs.GetDataReader()`。似乎数据报已经在那里加载了。如果你检查`UnconsumedBufferLength`那个阅读器，你会看到它包含你的数据报的完整大小。

实际上，这对于 UDP 套接字是有意义的，因为在 WinSock 库（我猜，这是 WinRT 套接字的底层实现）中，您总是在一次`recvfrom`调用中接收到整个数据报（如果您为它提供了足够大的缓冲区，但我希望 WinRT 为我们处理这个问题）。无需异步读取流 - 您的所有数据都已经存在。

因此，请继续从该流中读取您的值。您的代码将转换为：

```
DataReader reader = args.GetDataReader();
reader.UnicodeEncoding = UnicodeEncoding.Utf8;
uint messageSize = reader.ReadUInt32();
string message = reader.ReadString(messageSize); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T09:47:45.843

实际上，尽管您随代码一起提供了正确答案，但上面的代码不起作用。以下是如何让它工作：

```
var reader = args.GetDataReader();
reader.UnicodeEncoding = Windows.Storage.Streams.UnicodeEncoding.Utf8;
var size = reader.UnconsumedBufferLength;
var message = reader.ReadString(size); 
```

# c# - 如何在 ASP .NET MVC 中验证特定模型实例的特定字段/属性？

> ID：14303593
> 
> 赞同：0
> 
> 时间：2013-01-13T12:45:03.030
> 
> 标签：c#, asp.net, asp.net-mvc, model

我有一个具有 4 个属性的模型类：

```
public class ModelClass
    {
        [Required]
        public string Prop1 { get; set; }

        [MaxLength(5)]
        public string Prop2 { get; set; }

        [MinLength(5)]
        public string Prop3 { get; set; }

        [MinLength(5)]
        public string Prop4 { get; set; }
    } 
```

查看，我只输入prop2：

```
@model ModelClass
@Html.TextBoxFor(m => m.Prop2) 
```

还有一些控制器：

```
[HttpPost]
        public ActionResult Index(ModelClass postedModel)
        {
            var originalModel = Session["model"] as ModelClass;
            return View();
        } 
```

**问题是：**整个模型都存储在 中`Session`，因为它填充在单独的视图中。我需要的是仅验证`Prop1`模型，该模型存储在`Session`. 如果验证失败，我需要重定向到其他一些`View1`if `Prop1`is invlaid 或`View3`if `Prop3`is invalid 等。在控制器中，我只发布了模型`Prop2`和来自`Session`. 我不能使用`ModelState`它的方法`ModelState.IsValidField()`，例如，因为它将是发布模型的验证信息。我也不能使用`controller.TryValidateModel(originalModel)`，因为我只是得到`false`并且我不会得到关于它为什么是的信息`false`，所以我将无法重定向到`View1`if `Prop1`is invalid 或 to `View3`if `Prop3`is invalid。**那么我怎样才能只验证 originalModel 的 Prop1 呢？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:51:31.423

Use view models:

```
public class Step1ViewModel
{
    [Required]
    public string Prop1 { get; set; }
} 
```

and then make your view strongly typed to the view model:

```
@model Step1ViewModel
@Html.TextBoxFor(m => m.Prop1) 
```

and finally have your HttpPost controller action take the view model as action argument so that you could successfully validate it only in the context of the current wizard step:

```
[HttpPost]
public ActionResult Index(Step1ViewModel postedModel)
{
    if (!ModelState.IsValid)
    {
        // validation for this step failed => redisplay the view so that the 
        // user can fix his errors
        return View(postedModel);
    }

    // validation passed => fetch the model from the session and update the corresponding
    // property
    var originalModel = Session["model"] as ModelClass;
    originalModel.Prop1 = postedModel.Prop1;

    return RedirectToAction("Step2");
} 
```

# jquery - 禁用对除connectWith之外的可排序元素的排序

> ID：14303594
> 
> 赞同：4
> 
> 时间：2013-01-13T12:45:18.857
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

这是否可以禁用 'sortable' 元素上的排序但 sort 仍然适用于 'connectWith' ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-01T19:23:56.263

如果 list1 中的元素没有放在 list2 上，这会将它返回到它的原始位置（我称之为自删除）。

```
$("#list1").sortable({
    connectWith: ".connected-fields",
    beforeStop: function(event, ui) {
        // Don't allow resorting in list1... would call cancel here, but there is a jquery 1.7 bug so we
        // need to do the check here but do the cancel in "stop" below. @see http://bugs.jqueryui.com/ticket/6054
        $(this).sortable("option", "selfDrop", $(ui.placeholder).parent()[0] == this);
    },
    stop: function(event, ui) {
        var $sortable = $(this);
        if ($sortable.sortable("option", "selfDrop")) {
            $sortable.sortable('cancel');
            return;
        }
    }
});

$("#list2").sortable({
    connectWith: ".connected-fields"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T02:43:07.360

然后我将删除原始的可排序逻辑，并应用一个附加到单个可排序的类。因此，例如，对于要排序的两个列表，您有三个函数。如果一个是 sort=disabled，则删除具有选项 conenctWith 的可排序类，并将单个排序类应用于您连接的列表。如果要停止那个，那么对另一个做同样的事情。

例子：

```
$('sortBoth').sortable({connectWith: $('.sortListToConnect)});

$('.sortList2').sortable();

$('.sortList3').sortable(); 
```

根据您需要它的功能，相应地将类删除或添加到每个列表中。一个简单的方法来处理它。希望我以快速的方式表达得足够清楚。快乐编码:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-25T10:10:18.027

您可以从自排序中取消左列中的项目，并且仍然将它们用于 connectWith

[http://api.jqueryui.com/sortable/#option-cancel](http://api.jqueryui.com/sortable/#option-cancel)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-13T17:46:15.323

您可以尝试以下代码`disable sortable`：

```
$( ".selector" ).sortable( "disable" ); 
```

您可以从此[链接了解更多信息](http://api.jqueryui.com/sortable/)

还有这个[链接](http://api.jqueryui.com/sortable/#method-disable)方法`disable`。

# javascript - 无法修改原型数组内部

> ID：14303595
> 
> 赞同：0
> 
> 时间：2013-01-13T12:45:24.937
> 
> 标签：javascript, prototype

问题出在游戏的 rects 实例上：[]，它应该是 Rect 对象数组。当我访问 Game 中的 rects 属性时，会给出未定义的结果。

[http://jsbin.com/ibilec/34/edit](http://jsbin.com/ibilec/34/edit)

```
(function(window, document, console) {
  'use strict';

  function Rect() {
    this.x = 0;
    this.y = 0;
    this.width = 20;
    this.height = 20;
  }

  Rect.prototype.draw = function(ctx) {
    ctx.fillRect(this.x, this.y, this.width, this.height);
  };

  var Game = Object.create({    
    rects: [],  /// PROBLEM IS WITH this

    draw: function() {
      console.log('Draw called', this.rects);
      if (this.rects) {
        this.rects.forEach(function(rect, index) {
          console.log(rect);
          rect.draw(this.ctx);
        });
      }

      //window.setInterval(function() { this.ctx.clearRect(0, 0, 200, 200); }, 1000);

    },

    genRect: function() {
      var newRect = new Rect();
      newRect.x = parseInt(Math.random() * 200, 10);
      newRect.y = parseInt(Math.random() * 200, 10);

      this.rects.push(newRect);
    },

    loop: function() {
      //Game.draw();
      // Frame rate about 30 FPS

      window.setInterval(this.draw, 1000 / 30);
    },

    init: function() {
      this.canvas = document.getElementById('game'); 
      this.height = this.canvas.height;
      this.width = this.canvas.width;

      window.ctx = this.canvas.getContext('2d');

      this.genRect();
      this.loop(); //start loop
    }
  });

  var game = Object.create(Game);
  game.init();
})(window, document, console); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:57:31.977

该`draw`方法不是作为对象的方法调用的，而是作为全局范围内的函数调用的，因此`this`将是对 的引用`window`，而不是对 Game 对象的引用。

复制`this`到一个变量，并使用它从函数中调用方法：

```
var t = this;
window.setInterval(function() { t.draw(); }, 1000 / 30); 
```

# c++ - 如何在 C++ 中输入一个数组？

> ID：14303597
> 
> 赞同：-7
> 
> 时间：2013-01-13T12:45:33.813
> 
> 标签：c++, arrays, string, input

如何在 C++ 中输入一个数组？input - 2 3 56\. 需要存入数组 A[0]=2, A[1]=3, A[2]=56？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T12:49:05.920

```
vector<int> v;
copy(istream_iterator<int>(cin), istream_iterator<int>(), back_inserter(v)); 
```

Or if you can do it at the time the vector is constructed, it's just one line (thanks to @chris):

```
vector<int> v(istream_iterator<int>(cin), istream_iterator<int>()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:50:25.730

Simpler to comprehend that the one with `back_inserter`:

```
std::vector<int> V;
int Temp;

while (cin >> Temp)
    V.push_back(Temp); 
```

Note that we aren't using statically allocated array, because you didn't really specify how many elements you are going to read, and in that case it's usually better and safer to use `vector`.

# mysql - 在 AWS MySQL 中存储表情符号字符

> ID：14303600
> 
> 赞同：1
> 
> 时间：2013-01-13T12:45:50.563
> 
> 标签：mysql, amazon-web-services, emoji, utf8mb4

我有一个使用标准 MySQL 数据库的 Amazon Web Services 托管 Spring + Hibernate 应用程序。该应用程序用作 iPhone 应用程序的后端。我正在尝试将在 iPhone 上输入的表情符号字符存储在 MySQL 数据库中。我做了一些研究，发现它需要 4 字节 UTF-8 存储，自 MySQL 5.5 起支持 utf8mb4 字符集。但是，AWS 尚不支持将其作为组参数中的一个选项。

我正在寻找一个很好的解决方法，它仍然使这成为可能。我知道一种解决方法是将文本作为 BLOB 存储在数据库中，但是我不能再对该文本执行文本查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:48:44.477

utf8mb4 支持取决于您使用的 mysql 版本。

检查以下是否有效

```
create database test
default character set utf8mb4; 
```

如果这没有给你一个错误，你很高兴。如果是这样，您可能需要升级 mysql。

一旦设置正确，您就可以开始升级需要从 utf8 向上移动到 utf8mb4 的表和列。

# php - 从表中选择与预定义不匹配的值

> ID：14303603
> 
> 赞同：0
> 
> 时间：2013-01-13T12:45:58.523
> 
> 标签：php, mysql

我有几个值，由 PHP 生成。像 1, 10, 15, 17, 20。我还有一个包含多个值的表，例如：

```
id
1
3
10
12
15 
```

我想写一个查询，它会给我所有的数字，这些数字在表格`id`列中不存在。在我的示例中，应该返回`17`和的值。`20`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:47:43.863

如果您将这些数字存储在临时表中，这样您就可以加入，例如

```
SELECT  a.*
FROM    temporaryTable a
        LEFT JOIN tableWithNumbers b
            ON a.ID = b.ID
WHERE   b.ID IS NULL 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/ae804/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T12:58:11.577

我会

```
SELECT id FROM table WHERE id IN (1, 10, 15, 17, 20) 
```

这会让你得到你的集合中的那些。

然后使用一些 PHP 数组函数来获取数组的减法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-13T12:49:07.653

您可以为此使用 IN：

```
SELECT id FROM table WHERE id NOT IN (1, 10, 15, 17, 20) 
```

[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in)

# php - 在每个循环中插入语句之前转义数组值

> ID：14303606
> 
> 赞同：0
> 
> 时间：2013-01-13T12:46:05.903
> 
> 标签：php, mysql, ajax

> **可能重复：**
> [“每个引用前的斜线”问题](https://stackoverflow.com/questions/3006407/slash-before-every-quote-problem)

我有一个奇怪的情况，我的代码在本地计算机上工作时就像在 localhost 中一样，但是当我在 Web 服务器上发布它时它的行为不同。

我有一个带有复选框的学生列表，以便用户可以选择复选框，然后单击删除按钮后，这些复选框将从列表中删除，这意味着我将它们插入到不同的表格中。

**注意：studentid 带有斜杠，如 KNC/2012/sem1/BSC/125**

现在我的javascript函数发出一个ajax请求并将值作为参数发送到我的php文件，该文件通过数组并使用foreach循环插入它们。

javascript代码：

```
function flagRemovedStudents(iar){
displayBox = document.getElementById("studentBox");
elements = document.getElementsByName('stids[]');  
data = [];
for (i = 0; i < elements.length; i++){
 if (elements[i].checked){
    data.push('stids[]='+encodeURIComponent(elements[i].value));
 }
 }
 params = "iars="+encodeURIComponent(iar)+"&fl="+encodeURIComponent(1)+"&"+data.join('&');
 alert(params); // just to check what values are being passed to php script
 if (window.XMLHttpRequest)
 {
 xmlhttp=new XMLHttpRequest();
 }
else
 {
 xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
 }
xmlhttp.onreadystatechange=function()
 {
if (xmlhttp.readyState==4 && xmlhttp.status==200)
 {
result = xmlhttp.responseText;  
alert(result);
displayBox.className = "dimBox";
setTimeout(function(){showStudentsAfterRemoval(iar);},200); 
}
 }
xmlhttp.open("POST","remst.php",true);
xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xmlhttp.send(params);
} 
```

现在我的 php 工作如下：

```
 $session = $_SESSION['sess'];
 $iarsid = mysql_real_escape_string($_POST['iars']);
 $studentid = $_POST['stids'];
 $num = 0;

 foreach ($studentid as $value ) {
$val = mysql_real_escape_string($value);
$q1 = "insert into removedstudents(sessionid,iarsid,studentid)     values('$session','$iarsid','$value')";
$r1 = mysql_query($q1) or die(mysql_error());
if(mysql_affected_rows() > 0){
$num = $num + 1;
}
  }
echo $num." student(s) have been removed from the responsibility."; 
```

问题是在网络服务器上正在插入学生 ID，因为`KNC\/2012\/sem1\/BSC\/125`这会影响我的进一步查询。

令人惊讶的部分是它以我需要的格式插入到本地主机上，即我的开发环境，但是当我将相同的代码放在网络服务器上时，它的行为很奇怪。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T13:08:20.540

`mysql_real_escape_string`将按设计执行此操作（请参阅[文档](http://php.net/manual/en/function.mysql-real-escape-string.php)）。

在这种特殊情况下，您最好使用正则表达式在 php 中验证 ID 的格式，然后不要在数据库中对其进行转义。显然，您需要非常小心，不要通过这样做打开安全漏洞。

mysql_* 函数现在也已弃用，因此您还应该考虑使用 mysqli_* 代替。

# javascript - 鼠标悬停在其他元素上时元素上的jQuery事件

> ID：14303614
> 
> 赞同：0
> 
> 时间：2013-01-13T12:47:08.210
> 
> 标签：javascript, jquery, css

基本上，我得到了一堆图片和一张有名字的表格。当有人将鼠标悬停在图片上时，我希望该图片的名称（表格中的名称）亮起，发光，等等。我的问题是当不同的事件被聚焦/“鼠标悬停”时，我不知道如何触发元素的事件。

请帮忙？（JS 或 jquery 都可以）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:58:57.867

不完全是你问的，它不会触发事件。但是，如果您需要突出显示图像的某些相应标题，这是可能的解决方案。无论如何，请参阅此示例[http://jsfiddle.net/qYsu9/](http://jsfiddle.net/qYsu9/)

```
$('ul img').hover(function() {
  var index = $(this).data('title');
  $('table .title').removeClass('active').filter('.title-' + index).addClass('active');
}); 
```

因此，您只需将一个活动类添加到相应的标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T12:53:34.973

也许`$('#caption').trigger('mouseovere');`是你需要的。

阅读更多：[http ://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

# html - 如何使网站的内容主体响应

> ID：14303617
> 
> 赞同：0
> 
> 时间：2013-01-13T12:47:14.707
> 
> 标签：html, css, layout, responsive-design

我有一个网站，我试图做出响应，当我申请时`@media only screen and (min-width: 180px) and (max-width: 267px)`，内容区域在右侧被切断。下面是我应用到页面的 CSS。请问我做错了什么？

谢谢你。

这

**CSS**

```
.content_body{
margin: 0 auto;
width: 100%;
overflow: hidden;
padding-top: 30px;
 background:    #C9C7BB;
color:    #555;
font-family:  Tahoma, Arial, sans-serif;
font-size:    14px;
min-height: 200px;  
}

.bio_wrapper{
line-height: 25px;
 padding: 20px 0px 500px 50px;
}

 .bio_left{
 width: 800px;
 float: left;
 font-family: lato;
 color: black; 
}

.bio_images{
margin: 0;
margin-top: 30px;
margin-bottom: 90px;
}

.bio_images li{
padding-right: 35px;
display: inline;
list-style-type: none;
}

.bio_images li:last{
   padding-right: none; 
 }

 .bio_images img{
border: 4px solid #999966;
border-radius: 5px; 
}

.bio_mainimage{
float:right;
width: 20%; 
}

  @media only screen and (min-width: 180px) and (max-width: 267px) {

 .bio_mainimage{
  display: none;
  }

.content_body{
margin: 0 auto;
width: 50%;
overflow: hidden;
padding-top: 30px;
 background:    #C9C7BB;
color:    #555;
font-family:  Tahoma, Arial, sans-serif;
font-size:    14px;
min-height: 200px;  
 }

.bio_images img{
display: block;
}
} 
```

[示例页面](http://i.stack.imgur.com/M16ch.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T13:10:49.290

`.bio_left`绝对宽度为 800px。因为`.content_body`已将溢出设置为隐藏且其宽度为 100%，所以内容会被剪掉。

出现在页面底部的 bios.png 图像更适合作为背景图像。它没有呈现任何内容，只是在狭窄的设备上看起来很奇怪（不，`display: none`让它从狭窄的设备中隐藏起来并不是“删除”它的好方法）。

这种布局确实会受益于首先为窄设备设计样式，然后将所有浮动、绝对宽度和奇数边距隐藏在检查更宽设备的媒体查询中。

此外，媒体查询不需要最小宽度和最大宽度。您可以指定最大宽度。我不认为有任何设备宽度小于 180 像素。

# php - echo data with text decoration

> ID：14303624
> 
> 赞同：-5
> 
> 时间：2013-01-13T12:48:00.423
> 
> 标签：php, mysql, text-decorations

I want to display or echo my php mysql data with text decoration like underline or dotted line with css/html

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:50:45.433

```
<p style="text-decoration:underline;">
<?php echo $text ?>
</p> 
```

anyway you can use css. If this not help, show me your sample code where u use echo.

# java - 接受带分数并返回双精度数的 Java 方法

> ID：14303626
> 
> 赞同：0
> 
> 时间：2013-01-13T12:48:25.423
> 
> 标签：java, methods, fractions

我需要帮助让这种方法接受混合数字，例如（2 1/2）存储为一个变量而不是两个。目前我有来自两个单独的文本字段的 int 和 frac。

```
public double convertFrac(int whole, String frac){
        if (frac == null || frac.equals(""))
            return whole;
        String[] parts = frac.split("/");
        return whole + (double)Integer.parseInt(parts[0]) / (double)Integer.parseInt(parts[1]);
    } 
```

感谢 Bohemian 的建议，编辑了代码。

按照您的某些标准，它可能很笨重，但我让它工作了=D

```
public static double convertFrac(String frac){
        String wholeStr, num, denom, fraction;
        int whole = 0;
        String[] parts = frac.split(" ");
        wholeStr = parts[0];
        whole = Integer.parseInt(wholeStr);

        if(parts.length == 1){
            return whole;
        }

        wholeStr = parts[0];
        whole = Integer.parseInt(parts[0]);
        fraction = parts[1];
        String[] fracParts = fraction.split("/");
        num = fracParts[0];
        denom = fracParts[1];

        return whole + (double)Integer.parseInt(fracParts[0]) / (double)Integer.parseInt(fracParts[1]);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T12:56:05.923

这是错误 #1：

```
if(frac == ""){ // tests if frac is the same object as the blank constant 
```

你必须使用

```
if(frac.equals("")){ // tests if fraq is blank 
```

这是错误 #2：

```
num = Integer.parseInt(frac); // will explode if frac is actually a fraction 
```

* * *

而不是你所拥有的，我会将其简化为：

```
public double convertFrac(int whole, String frac) {
    if (frac == null || frac.equals(""))
        return whole;
    String[] parts = frac.split("/");
    return whole + (double)Integer.parseInt(parts[0]) / (double)Integer.parseInt(parts[1]);
} 
```

你不应该考虑`frac`只有一个数字，因为它没有意义。要么是空白，要么是一小部分。

# php - html表格中显示的数据不正确

> ID：14303627
> 
> 赞同：0
> 
> 时间：2013-01-13T12:48:30.390
> 
> 标签：php, html

我的输出没有`Total Marks`正确插入数据，似乎缺少问题 1 的总分，这是因为每个问题的分数如下所示：

```
Question 1: 3
Question 2: 5
Question 3: 2 
```

现在表格包含不正确的答案，所以表格看起来像我发现的这个小提琴[http://phpfiddle.org/main/code/7j1-we2](http://phpfiddle.org/main/code/7j1-we2)，如果您查看结果，您会发现问题 1 和 2 都包含问题2 标记，并且 queston 3 包含它的标记。但是我怎样才能得到正确的标记来显示，为什么它缺少第一个问号？

**更新 1：**

```
$query = "SELECT q.QuestionNo, an.Answer, q.TotalMarks, o.OptionType
FROM 
Question q INNER JOIN Answer an ON q.QuestionID = an.QuestionID
INNER JOIN Option_Table o ON o.OptionID = q.OptionID
ORDER BY q.QuestionId, an.Answer
   ";

   // prepare query
   $stmt=$mysqli->prepare($query);
   // execute query
   $stmt->execute(); 

       // This will hold the search results
    $searchQuestionNo = array();
    $totalMarks = array();
    $incorrect_ans = array();

    // Fetch the results into an array

   // get result and assign variables (prefix with db)
$stmt->bind_result($dbQuestionNo, $dbAnswer, $dbTotalMarks $dbOptionType);

$specialOptionTypes = array('Yes or No' => array( 'Yes', 'No' ),'True or False' => array( 'True', 'False' ));

while ($stmt->fetch()) {

// Do this for each row:
if ( array_key_exists( $dbOptionType, $specialOptionTypes ) ) {
    $options = $specialOptionTypes[$dbOptionType];
} else if ( preg_match( '/^([A-Z])-([A-Z])$/', $dbOptionType, $match ) ) {
    $options = range( $match[1], $match[2] );
} else {
    // issue warning about unrecognized option type
    $options = array();
}
$right = str_split( $dbAnswer ); 
$wrong = array_diff( $options, $right );  

        $searchQuestionNo[] = $dbQuestionNo;
        $totalMarks[] = $dbQuestionMarks;
      } 
```

以上是检索错误答案的代码。对于每个问题会发生什么，它会检索每个问题`$dbOptionType`并显示可能的答案列表。例如，如果问题 1`$dbOptionType`是`A - D`，那么`Answers`它显示的列表是`A, B, C, D`。`$dbQuestionNo`上面的代码还使用and检索每个问题的编号和总分`$TotalMarks`。

但是，如果一个问题有多个答案，它会显示两组答案并从一组答案中删除一个。这是因为在数据库中，要获得具有多个答案和单个答案的问题的正确答案，如下所示：

```
QuestionNo  Answer  TotalMarks OptionType
1           B       3          A-D
2           A       5          A-D
2           C       5          A-D
3           D       2          A-D 
```

**更新 2：**

对于问题 2，因为它是多个答案，这就是为什么它在数组中显示两组数据。因为如果一个问题中有多个答案，它删除正确答案的方式如下：

```
Question 2: Answers: A, B, C, D  Remove Correct Answer: A  Incorrect Answers: B, C, D
Question 2: Answers: A, B, C, D  Remove Correct Answer: C  Incorrect Answers: A, B, D 
```

如果问题有多个正确答案，则删除正确答案的方式如上所述。这是：

*   显示可能的答案
*   删除 1 个正确答案`A`
*   显示不正确的答案`B, C, D`

要删除第二个正确答案，它会重复该过程：

*   显示可能的答案
*   删除 1 个正确答案`C`
*   显示不正确的答案`A, C, D`（我们知道`A`不正确，但因为它一次只删除一个正确的答案并显示所有可能的答案，所以它`A`在第二组中表现得好像不正确但在第一组中正确）

更新 3：

该错误是由于您使用 for() 在 $ques_ans 上迭代的数组在键中存在间隙。

```
var_dump($ques_ans) gives us:
array(3) {
  ... skipped for brevity
  [2]=>
  array(2) {
    [0]=>
    string(1) "B"
    [2]=>
    string(1) "D"
  }
  ... skipped for brevity
} 
```

没有键为[1](https://i.stack.imgur.com/GNjty.png)的元素。这是因为我在第 49 行使用的函数 array_intersect 保留了键。

为了快速修复代码以使其正常工作，我在第 51 行添加了 array_values()： `$ques_ans[$questionNo] = array_values($q_incorrect_ans); //store the array of incorrect ans`反对 ques no 作为键。

但我仍然得到奇怪的差距`$keys`。

**这是代码：**

下面是代码：

```
 $query = "SELECT q.SessionId, s.SessionName, q.QuestionId, q.QuestionNo, q.QuestionContent, an.Answer, an.AnswerId, q.QuestionMarks, q.OptionId, o.OptionType 
FROM  
Question q INNER JOIN Answer an ON q.QuestionID = an.QuestionID 
INNER JOIN Option_Table o ON o.OptionID = q.OptionID 
INNER JOIN Session s ON s.Sessionid = q.Sessionid 
WHERE s.SessionName = ? 
ORDER BY q.QuestionId, an.Answer 
   "; 

   // prepare query 
   $stmt=$mysqli->prepare($query); 
   // You only need to call bind_param once 
   $stmt->bind_param("s", $assessment); 
   // execute query 
   $stmt->execute();  

       // This will hold the search results 
    $searchQuestionNo = array(); 
    $searchQuestionContent = array(); 
    $totalMarks = array(); 
    $searchAnswerId = array(); 
    $incorrect_ans = array(); 
    $searchMarks = array(); 

    // Fetch the results into an array 

   // get result and assign variables (prefix with db) 
$stmt->bind_result($dbSessionId, $dbSessionName, $dbQuestionId, $dbQuestionNo, $dbQuestionContent, $dbAnswer, $dbAnswerId, $dbQuestionMarks, $dbOptionId, $dbOptionType); 

$specialOptionTypes = array('Yes or No' => array( 'Yes', 'No' ),'True or False' => array( 'True', 'False' )); 

while ($stmt->fetch()) { 

// Do this for each row: 
if ( array_key_exists( $dbOptionType, $specialOptionTypes ) ) { 
    $options = $specialOptionTypes[$dbOptionType]; 
} else if ( preg_match( '/^([A-Z])-([A-Z])$/', $dbOptionType, $match ) ) { 
    $options = range( $match[1], $match[2] ); 
} else { 
    // issue warning about unrecognized option type 
    $options = array(); 
} 
$right = str_split( $dbAnswer );  
$wrong = array_diff( $options, $right );   

        $searchQuestionNo[] = $dbQuestionNo; 
        $searchQuestionContent[] = $dbQuestionContent; 
        $incorrect_ans[] = $wrong; 
        $searchAnswerId[] = $dbAnswerId; 
        $totalMarks[] = $dbQuestionMarks; 
        $searchMarks[] = $dbQuestionMarks; 
      }     

?> 

</head> 

<body> 

<?php

$ques_ans = array(); //to store incorrect answers against ques no.

$q_occ_count = array_count_values($searchQuestionNo);
foreach ($searchQuestionNo as $key => $questionNo) {
    if (!array_key_exists($questionNo, $ques_ans)) {
        if ($q_occ_count[$questionNo] === 1) //if a ques has only one correct ans
            {
            $ques_ans[$questionNo] = $incorrect_ans[$key]; //store the array of incorrect ans against the ques no as key 
        } else //if a ques has more than 1 correct ans
            {
            //find the intersection of incorrect_ans arrays for this ques
            $q_keys          = array_keys($searchQuestionNo, $questionNo);
            $q_incorrect_ans = $incorrect_ans[$q_keys[0]];
            foreach ($q_keys as $q_key) {
                $q_incorrect_ans = array_intersect($q_incorrect_ans, $incorrect_ans[$q_key]);
            }
            $ques_ans[$questionNo] = array_values($q_incorrect_ans); //store the array of incorrect ans against the ques no as key
        }
    }
}
var_dump($ques_ans);
?> 
<table id='penaltytbl'> 
<thead> 
<tr> 
<th class='questionth'>Question No.</th> 
<th class='questionth'>Question</th> 
<th class='incorrectanswerth'>Incorrect Answer</th> 
<th class='answermarksth'>Marks per Answer</th> 
<th class='totalmarksth'>Total Marks</th> 
<th class='noofmarksth'>Marks Remaining</th> 
</tr> 
</thead> 
<tbody> 
<?php

foreach ($ques_ans as $questionNo => $inc_ans) {
    $q_row_span = count($inc_ans);
    $row_count  = 0;

?> 

<tr class="questiontd"> 

<td class="questionnumtd q<?php
    echo $questionNo;
?>_qnum" rowspan="<?php
    echo $q_row_span;
?>"><?php
    echo $questionNo;
?> 
<input type="hidden" name="numQuestion" value="<?php
    echo $questionNo;
?>" /> 
    <input type="hidden" name="q<?php
    echo $questionNo;
?>_ans_org" class="q<?php
    echo $questionNo;
?>_ans_org" value="<?php
    echo $searchMarks[array_search($questionNo, $searchQuestionNo)];
?>"> 
    <input type="hidden" name="q<?php
    echo $questionNo;
?>_ans" class="q<?php
    echo $questionNo;
?>_ans" value="<?php
    echo $searchMarks[array_search($questionNo, $searchQuestionNo)];
?>"> 
    </td> 

    <td class="questioncontenttd" rowspan="<?php
    echo $q_row_span;
?>"><?php
    echo $searchQuestionContent[array_search($questionNo, $searchQuestionNo)];
?> </td> 

<td class="answertd"><?php
    echo $inc_ans[$row_count];
?> 
<input type="hidden" id="hiddenincorrect" name="incorrect[]" value="<?php
    echo $inc_ans[$row_count];
?>"> 
</td> 

<td class="answermarkstd"> 
<input class="individualMarks q<?php
    echo $questionNo;
?>_mark"  q_group="1" name="answerMarks[]" type="text" data-type="qmark" data-qnum="<?php
    echo $questionNo;
?>" onkeypress="return isNumberKey(event)" maxlength="3" /> 
</td> 

<td class="totalmarkstd" rowspan="<?php
    echo $q_row_span;
?>"><?php
    echo $totalMarks[array_search($questionNo, $searchQuestionNo)];
?></td> 

<td class="noofmarkstd q<?php
    echo $questionNo;
?>_ans_text"  q_group="1" rowspan="<?php
    $q_row_span;
?>"><?php
    echo "<strong>" . $searchMarks[array_search($questionNo, $searchQuestionNo)] . "</strong>";
?></td> 
</tr> 
    <?php
    //remaining incorrect answers in separate row (if any) follows here
    if ($row_count < $q_row_span - 1) {
        for ($i = ($row_count + 1); $i < $q_row_span; $i++) {
?>         
            <tr> 
            <td class="answertd"><?php
            echo $inc_ans[$i];
?> 
            <input type="hidden" id="hiddenincorrect" name="incorrect[]" value="<?php
            echo $inc_ans[$i];
?>"> 
            </td> 

            <td class="answermarkstd"> 
            <input class="individualMarks q<?php
            echo $questionNo;
?>_mark"  q_group="1" name="answerMarks[]" type="text" data-type="qmark" data-qnum="<?php
            echo $questionNo;
?>" onkeypress="return isNumberKey(event)" maxlength="3" /> 
            </td> 
            </tr> 
    <?php
        }
    }
}

?> 
</tbody> 
</table> 

<p> 
<input type='hidden' id='num_groups' name='num_groups' value='<?php
echo $questionNo;
?>'> 
<input id="submitBtn" name="submitPenalty" type="submit" value="Submit Marks" /> 
</p> 

</form> 
```

**截屏：**

![在此处输入图像描述](../Images/8b3b13d2d137a61b2ec5179619ff7ebf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:59:52.447

问题在于您检索总分的方式。您正在使用`$totalMarks`as`$questionNo`索引访问，但应该使用该问题的实际数组索引。

工作代码：

```
<td class="totalmarkstd" rowspan="<?php echo $q_row_span?>">
    <?php echo $totalMarks[array_search($questionNo, $searchQuestionNo)]?>
</td> 
```

更新1：

```
$ques_ans[$questionNo] = array_values($q_incorrect_ans);    //store the array of incorrect ans against the ques no as key 
```

更新 2：

使用数组值。

```
foreach($ques_ans as $questionNo => $inc_ans)
{
    $inc_ans = array_values($inc_ans); 
```

更新了 phpFiddle：[http ://phpfiddle.org/main/code/get-rps](http://phpfiddle.org/main/code/get-rps)

# java - java中的两个线程调用join

> ID：14303630
> 
> 赞同：2
> 
> 时间：2013-01-13T12:48:58.350
> 
> 标签：java

示例我有 2 个线程：t1 和 t2，我的代码是

```
t1.start();
t2.start();

t1.join();
t2.join(); 
```

我已经知道join方法的概念。但在这种情况下，我不知道 join 方法的机制。哪个线程将等待其他完成？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T12:50:03.887

`t1`分别启动、`t2`等待`t1`和`t2`完成的线程（main，implicit） 。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-01-05T16:22:32.833

该`join()`方法等待线程死亡。换句话说，它会导致当前正在运行的线程停止执行，直到它加入的线程完成其任务。

主线程将等待所有子线程完成。主线程将启动`t1`并加入`t2`它。一旦线程`t2`完成，它的任务`t1`将再次执行。

# java - 签署我的 Jar 文件

> ID：14303644
> 
> 赞同：3
> 
> 时间：2013-01-13T12:50:04.540
> 
> 标签：java, jar, digital-signature, signing

我已经制作了一个 Java Swing GUI 并试图将其放到网站上，我已将我的 html 文件放在 lwjgl_jar 文件夹中，这解决[了我之前](https://stackoverflow.com/questions/14297678/putting-my-java-slick-game-onto-a-website)无法找到 AppletLoader 的问题，但我现在遇到了一个新错误：

```
Permissions for Applet Refused. Please accept the permissions dialogue to allow the applet to continue the loading process. 
```

告诉Java“这次运行”后出现错误。所以我在网上搜索，发现我的问题的解决方案是我的 jar 文件尚未签名，考虑到我使用的是我认为应该已经签名的 Slick 和 lwjgl 文件，这很奇怪，但是我的 racegame.jar 包含我的小程序可能需要签名，所以我按照[本指南对 jars 进行签名](http://wiki.plexinfo.net/index.php?title=How_to_sign_JAR_files)：

并进入最后一步并输入：`jarsigner -keystore myKeystore racegame.jar myself` 签署我的racegame.jar，但它说：

```
jarsigner: unable to open jar file: racegame.jar 
```

我尝试使用的任何其他 jar 文件也会发生此错误。

为什么不打开 jar 文件并对其进行签名？遵循并测试了所有其他步骤，与指南中显示的完全一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:35:04.303

我曾经在网上找到这篇关于 的文章`How to sign the JAR Files`，这可能有一些内容，可以在某种程度上帮助你。请看一看 ：

```
Sign All Applet JAR files

Applets are back! And now applets can do more than ever before thanks to 
signed JAR files. By signing your JARs, you can get access to the filesystem 
and other resources that were previously off-limits, provided the user 
grants your applet those privileges. And signing JAR files is now very easy 
thanks to tools bundled with the JDK. However, be certain to sign all JAR files 
used by your Java applet. If you sign the JAR file with your main applet class, 
your applet will launch. If it later uses classes from another JAR file, though, 
you can run into trouble. If the newly-loaded class tries a restricted operation 
and its JAR file isn't signed, your applet will fail at that point with a 
security exception. Rather than waiting for this and debugging it when it occurs, 
save yourself the trouble and sign all of your JAR files up front.

You can create your own certificate using tools provided by the JDK. 
keytool -genkey -alias mykey lets you create your own certificate. Be sure to 
specify an expiration date far in the future with -validity 1000\. The default is 
only 6 months.

Sign your JAR files with jarsigner my.jar mykey (where my.jar is the name of 
the jar file to sign).

Deploy all of your JAR files to a folder on your web server, add an HTML page 
with the applet tag, and let the world enjoy your new applet with powerful 
permissions.

keytool -genkey -v -key store mycompany.keystore -alias myalias_goes_here -keyalg RSA -keysize 2048 -validity 10000 
```

# html - drawImage() 和标签

> ID：14303650
> 
> 赞同：1
> 
> 时间：2013-01-13T12:50:43.453
> 
> 标签：html, canvas, image, drawimage

我正在使用 HTML5 进行说明。

当我将图像加载到浏览器上时，我可以使用普通的 HTML`<img>`标签，而在 HTML5 中，我还可以使用 -canvas-drawImage()。

我不知道在浏览器中加载网页 之间`<img>`和何时有什么区别。`drawImage()`

谁能帮我说清楚？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T13:16:29.040

该`<img>`标签获取一个图像源并将其放置在您的 DOM 中。然后可以从您的文档对象模型中选择 DOM 元素`JavaScript`并对其进行修改（可以添加或删除属性，可以更改源等）

`drawImage()`获取像素数据并将其可视化为`<canvas>`元素。之后，只能与 canvas 元素交互（使用 javascript 选择）。像素数据可以修改，但您不能像使用标签一样使用开箱即用的属性，如 、 等`title`。`alt``<img>`

`<img>`如果您只想在网页中呈现图像，请使用该标签。如果`<canvas>`您想在图像渲染后与图像进行交互并且想要对像素数据进行修改（例如在图像顶部绘制），请使用。

例子：

`<img>`：

```
<!-- When hovered it would display a tooltip saying "This is an image" -->
<img id="test" src="some/src.png" alt="error" title="This is an image" />
<!-- The image will fit precisely in it's container --> 
```

帆布：

```
// In this example if the canvas dimensions are larger/smaller
// than the image dimensions, the image will be clipped or
// it would not fill the entire space
var c = document.getElementById("myCanvas");
var ctx = c.getContext("2d");
var img = document.getElementById("test");
ctx.drawImage(img, 0, 0); // On hover nothing will show
// unless you implement a custom tooltip functionality 
```

# jquery - Unable to send data from view (razor) to controller via ajax post request

> ID：14303653
> 
> 赞同：0
> 
> 时间：2013-01-13T12:50:55.933
> 
> 标签：jquery, ajax, asp.net-mvc, razor

here is the controller

```
public ViewResult AddNewRow(ProjectBudgetModel model)
{
   //Some oprations goes here on the passed model the return to the same view 
   return View("AddNewProjectBudget", model);
} 
```

here is the view which has the ajax call like

```
$.ajax({
            url: '@Url.Action("AddNewRow", "ProjectBudget")',
            type: 'post',
            data: {model: '@Model'},
            contentType: 'application/json; charset=utf-8;',
            dataType: 'json',
            success: function (response) {
                alert(response.success)
                return;
            },
            error: function (x) {                
                alert(x.status);
            }
        }); 
```

@Model which is passed in the data header in the ajax call is ProjectBudgetModel

something goes wrong here specifically while i pass the data to the controller it even doesn't hit the brekpoint of the addNewRow function in controller

any help?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T12:53:14.233

```
data: {model: '@Model'}, 
```

doesn't do at all what you think it does. Look at the generated markup to see that this emits some broken values.

It should be like that:

```
data: JSON.stringify(@Html.Raw(Json.Encode(Model))), 
```

The `JSON.stringify` method is natively built-into modern browsers. If for some reasons you need to support browsers from the stone age, you could include the [json2.js](https://github.com/douglascrockford/JSON-js) script to your page which will define the method.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-08T10:49:27.357

我能够将数据从视图发送到控制器上的模型的唯一方法是使用：

`data: $("#FORM_ID").serialize(),`

如果我使用：数据：`JSON.stringify(@Html.Raw(Json.Encode(Model))),`控制器收到一个空模型。

# php - 如何在 MySQL 的左外连接中有序显示类别

> ID：14303656
> 
> 赞同：1
> 
> 时间：2013-01-13T12:51:55.450
> 
> 标签：php, mysql, sql, sql-order-by

我怎样才能显示这个查询，由 qi​​d 排序？

```
 $newcount=$db->get_results("
        SELECT  s2.qcategory, 
                s1.id, 
                count(s1.na) as na_count 
        FROM    (
                    select  distinct `qcategory` 
                    from    store 
                    where   survey_name='$userID' and 
                            dateone='$dateVal' and 
                            branch='$branch'
                ) s2 
                left join store s1 
                    on s1.`qcategory` = s2.`qcategory` and 
                        s1.`na` = '1' 
        group by 1 
        order by s1.qid"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:03:48.900

你可能想订购 ASC 或 DESC

试试这个

```
 ORDER BY s1.qid  ASC 
```

或者

```
 ORDER BY s1.qid  DESC 
```

为什么你做`GROUP BY 1`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T13:00:30.280

由于数据类型是`VARCHAR`您需要将其转换为数字，例如

```
ORDER BY CAST(s1.qid AS SIGNED) ASC 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/98ed0/2)

# android - Android Google Maps API v2 上带有文本的多个标记

> ID：14303667
> 
> 赞同：13
> 
> 时间：2013-01-13T12:53:36.803
> 
> 标签：android, google-maps, google-maps-android-api-2

**我的目标是在 Android Google Maps API v2**地图上使用多个带有文本的标记。信息窗口方法 (showInfoWindow()) 不适合，因为一次只显示一个信息窗口。例如，我想要这样的东西：![在此处输入图像描述](../Images/f4a904927fe5512e37e2ec7d87bec818.png)

如您所见，每个标记都有自己的数据（本例中的数字）一直显示。如何使用 Android Google Maps API **v2**实现这一目标？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T13:08:56.970

为此，您必须将每个标记的图标自定义为您所需要的。这是链接：[https ://developers.google.com/maps/documentation/android/marker#customize_a_marker](https://developers.google.com/maps/documentation/android/marker#customize_a_marker)

然后你可以放一些PNG资源（一个蓝色，一个黄色和一个红色），并在运行时得到正确的Bitmap，通过代码将文本写在位图上，然后用`fromBitmap (Bitmap image)`方法设置为自定义标记。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-13T13:13:35.743

试试这些链接最好使用它，它将有助于如何**在 Android Google Maps API v2 上添加带有文本的多个标记**

1.  [链接1](https://stackoverflow.com/questions/13763545/android-maps-api-v2-with-custom-markers)
2.  [链接2](https://stackoverflow.com/questions/13855049/how-to-show-multiple-markers-on-mapfragment-in-google-map-api-v2)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-02T06:23:04.153

试试这个

```
LinearLayout tv = (LinearLayout) this.getLayoutInflater().inflate(R.layout.marker_dialog, null, false);

tv.measure(View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED),
        View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED));
tv.layout(0, 0, tv.getMeasuredWidth(), tv.getMeasuredHeight());

tv.setDrawingCacheEnabled(true);
tv.buildDrawingCache();
Bitmap bm = tv.getDrawingCache();

LatLng latLng = new LatLng(latitudemy, longitudemy);

BitmapDescriptor icon = BitmapDescriptorFactory.fromBitmap(bm);
BitmapDescriptorFactory.fromResource(R.mipmap.ic_launcher);
map.addMarker(new MarkerOptions().position(new LatLng(latitudemy, longitudemy)).title("origin").snippet("Srivastava").icon(icon));
// Showing the current location in Google Map
map.addMarker(new MarkerOptions().position(new LatLng(latitude, longitude)).title("destination").snippet("Srivastava").icon(icon)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-20T11:27:25.070

您可能还想尝试开箱即用的集群解决方案：[Android Maps Extensions](http://code.google.com/p/android-maps-extensions/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-01T14:36:18.937

作为**更新**：
android maps utils 现在有一个 Marker Clustering Utility
[https://developers.google.com/maps/documentation/android/utility/marker-clustering](https://developers.google.com/maps/documentation/android/utility/marker-clustering)

[https://github.com/googlemaps/android-maps-utils](https://github.com/googlemaps/android-maps-utils)

# c# - how to get parent id by using a child id in hierarchy?

> ID：14303668
> 
> 赞同：0
> 
> 时间：2013-01-13T12:53:41.843
> 
> 标签：c#, asp.net, hierarchy

```
Item 01
  Item 01 01
  Item 01 02
     Item 01 02 01
     Item 01 02 02 <-----
     Item 01 02 03
  Item 01 03
Item 02
  Item 02 01
  Item 02 01 
```

I'm using asp.net and C#. This is my main menu. I want to show some item of main menu in left sidebar menu. for example if a user selected [Item 01 02 02] i want to show all sub menu items of [Item 01] in left sidebar menu. I access to the id of [Item 01 02 02].

thanks for any idea.

# ios - 获取屏幕图像并导出为 PDF、JPG、PNG

> ID：14303669
> 
> 赞同：0
> 
> 时间：2013-01-13T12:53:42.493
> 
> 标签：ios, cocoa-touch

我想拍摄 iPad 屏幕上的图像并将其导出为 JPG、PNG 或 PDF 文件。

简单来说，用户在屏幕上创建了一些东西，例如，他单击“导出为 PNG”，然后创建了一个 PNG 文件。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:59:06.153

如果它是您正在谈论的 UIImage - 它确实具有用于将其内容写入文件并将图像作为 png 或 jpeg 数据流获取的内置方法。有关详细信息，请参阅 UIImage 类参考。

AFAIK 没有用于导出为 PDF 的 bild-in 功能。您当然可以创建 PDF 并将图像绘制到其中。这是一个易于理解的教程，它确实包括绘制图像： http: [//www.ioslearner.com/generate-pdf-programmatically-iphoneipad/](http://www.ioslearner.com/generate-pdf-programmatically-iphoneipad/)

编辑以回应您的评论。响应太大，无法发表评论：

我曾经对 GL 层做过类似的事情。在你的情况下，它应该更容易。如何从视图层获取 UIImage 将在此处[将 UIView 图层转换为 UIImage](https://stackoverflow.com/questions/14275859/convert-uiview-layer-to-uiimage)和[如何将 UIView 转换为 UIImage？](https://stackoverflow.com/questions/5469351/converting-uiview-as-image). 将其存储在 UIImage 中后，请在此处查看其参考[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)。它告诉您有可用的 UIKit 函数（不是我之前所说的方法）将 UIImages 转换为 JPEG 和 PNG：`UIImagePNGRepresentation`并且`UIImageJPEGRepresentation`记录在这里：http: [//developer.apple.com/library/ios/#documentation/uikit/参考/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIImagePNGRepresentation](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIImagePNGRepresentation). 这些函数返回 NSData 对象。

NSData 记录在这里：[https](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html) ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html 它带有将数据写入文件的方法。`writeToFile:atomically:`例如。

这是一个例子。就我而言，我只需要一个唯一的文件名并决定采用时间戳。您可能希望在此处使用一些对用户更友好的文件名。

```
// Use current time stamp for some unique photo ID
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *pathToDocuments=[paths objectAtIndex:0];  // this returns the path to the App's document directory
NSString *photoID = [NSString stringWithFormat:@"%f", [[NSDate date] timeIntervalSince1970]];  // this is just a time stamp. This is what you are most likely to do different. 
NSString *fileName = [NSString stringWithFormat:@"%@/%@.jpg", pathToDocuments, photoID]; // now you have a fully qualified path to a file within that part of the file system that belongs to your app. It will be overwritten if it exists. 

// Actually save the image (JPEG)
NSData *imgData = UIImageJPEGRepresentation(theImage, 1); // convert to jpeg - 1.0 represents 100%
[imgData writeToFile:fileName atomically:YES]; // actually save the data. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T13:18:30.620

我为 UIView 编写了这个类别，从不记得的来源获得了一些帮助：

```
@interface UIView (Rendering)

+ (UIImage *)renderImageFromLayer:(CALayer *)layer withRect:(CGRect)frame;
- (UIImage *)renderImageWithRect:(CGRect)frame;

@end

@implementation UIView (Rendering)

+ (UIImage *)renderImageFromLayer:(CALayer *)layer withRect:(CGRect)frame
{
    // Create a new context of the desired size to render the image
    UIGraphicsBeginImageContextWithOptions(frame.size, YES, 1.0);
    CGContextRef context = UIGraphicsGetCurrentContext();

    // Translate it, to the desired position
    CGContextTranslateCTM(context, -frame.origin.x, -frame.origin.y);

    // Render the view as image
    [layer renderInContext:context];

    // Fetch the image
    UIImage *renderedImage = UIGraphicsGetImageFromCurrentImageContext();

    // Cleanup
    UIGraphicsEndImageContext();

    return renderedImage;
}

- (UIImage *)renderImageWithRect:(CGRect)frame
{
    return [UIView renderImageFromLayer:self.layer withRect:frame];
}

@end 
```

# sql - 我有一个网格视图。我想将它与不同的表一起使用。一次一个

> ID：14303673
> 
> 赞同：1
> 
> 时间：2013-01-13T12:54:00.303
> 
> 标签：sql, asp.net, sql-server, gridview

我正在研究 asp.net gridview (WEB.UI.Contorl)。我只想使用一个gridview。单击按钮时，gridview1 应由 table1 填充。单击第二个按钮时，gridview1 应由 table2 填充。

这可能吗..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:44:23.550

你试过这个

```
<asp:Button ID="Button1" runat="server" onclick="Button1_Click" 
        Text="Button 1" />
    <asp:Button ID="Button2" runat="server" onclick="Button2_Click" 
        Text="Button 2" />
    <br />
    <asp:GridView ID="GridView1" runat="server">
    </asp:GridView> 
```

在后面的代码中

```
protected void Button1_Click(object sender, EventArgs e)
    {
        GridView1.DataSource = CallToMethodThatReturnFirstDatatable();
        GridView1.DataBind();
    }

    protected void Button2_Click(object sender, EventArgs e)
    {
        GridView1.DataSource = CallToMethodThatReturnSecondDatatable();
        GridView1.DataBind();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T13:38:12.537

是的，调用存储过程： MyProc(@ParamTable, ....) 然后在 proc 中有 if 语句根据@Param 的值选择表。然而，这不是一个好方法，原因有很多：Linq 不会生成你的类，除非你做更多的 jigery pokery。虽然学习曲线很好......当您使用asp net时，您很可能正在生成回发以获取另一个表，因此respose重定向到另一个页面绝对没有开销可言。如果您坚持在没有回发的情况下进行异步操作，那么您需要使该过程执行诸如插入表变量之类的操作，然后将表变量变量上的选择与硬编码的列变量行联合起来，这些列变量以某种方式被排除在外没退……

# c++ - How to center text vertically in an EDIT control in pure win32?

> ID：14303675
> 
> 赞同：1
> 
> 时间：2013-01-13T12:54:08.790
> 
> 标签：c++, winapi

Is it possible to center text vertically in an edit control in pure win32 api ? The controls are already super-classed so a sub/super classing solution is not a problem. But shifting/changing to some custom control is not an option.

I am working in c++;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T13:20:41.830

您必须手动插入适当数量的空格。

如果要使文本居中，“RichEdit”是合适的 Win32 控件。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-14T22:34:13.377

您可以将`ES_CENTER`窗口样式应用于 EDIT 控件。如果它具有`ES_MULTILINE`窗口样式，则它的所有线条都将居中。

# ios - ios CLGeocoder。异步地理编码

> ID：14303676
> 
> 赞同：-2
> 
> 时间：2013-01-13T12:54:15.013
> 
> 标签：ios, objective-c, mapkit

假设我有几个地址。我需要获取循环中每个地址的坐标。但是获取一个地址的坐标需要一些时间。如何在一个周期内异步获取坐标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T13:44:07.317

您可以编写一个例程，对可变数组中的单个地址进行地理编码，然后让它自己调用以处理完成块中的下一个地址。因此：

```
- (void)nextGeocodeRequest {
    // if we're done, dp whatever you want

    if ([self.addresses count] == 0) {
        // do whatever you want when we're done (e.g. open maps)

        return;
    }

    // if not, get the next address to geocode from NSMutableArray and
    // remove it from list of addresses to process

    NSString *address = self.addresses[0];
    [self.addresses removeObjectAtIndex:0];

    // geocode the address

    CLGeocoder *geocoder = [[CLGeocoder alloc]init];

    [geocoder geocodeAddressString:address completionHandler:^(NSArray *placemarks, NSError *error) {

        // do whatever you want for the individual geocode process

        // when all done, queue up the next geocode address

        [self nextGeocodeRequest];
    }];
} 
```

或者，更复杂的是，您可以使用操作队列：

```
- (void)geocodeAddresses:(NSArray <NSString *>*)addresses {
    CLGeocoder *geocoder = [[CLGeocoder alloc]init];

    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    queue.maxConcurrentOperationCount = 1;
    queue.name = @"com.domain.app.geocode";

    NSOperation *finalCompletionOperation = [NSBlockOperation blockOperationWithBlock:^{
        // do whatever you want when all done
        NSLog(@"done");
    }];

    for (NSString *address in addresses) {
        // create a block for the geocode request completion block

        NSOperation *geocodeOperation = [[GeocodeOperation alloc] initWithGeocoder:geocoder Address:address geocodeCompletionHandler:^(NSArray<CLPlacemark *> * _Nullable placemarks, NSError * _Nullable error) {
            if (error) {
                NSLog(@"error = %@", error);
            } else {
                NSLog(@"placemarks = %@", placemarks);
            }
        }];

        // The final completion block is contingent on the completion of this geocode request completion block

        [finalCompletionOperation addDependency:geocodeOperation];

        // let's queue the geocode request

        [queue addOperation:geocodeOperation];
    }

    [queue addOperation:finalCompletionOperation];
} 
```

其中，`GeocodeOperation.h`：

```
#import "AsynchronousOperation.h"
@import CoreLocation;

NS_ASSUME_NONNULL_BEGIN

@interface GeocodeOperation : AsynchronousOperation

@property (readonly, nonatomic, copy) NSString *address;

- (instancetype)initWithGeocoder:(CLGeocoder *)geocoder Address:(NSString *)address geocodeCompletionHandler:(CLGeocodeCompletionHandler) geocodeCompletionHandler;

@end

NS_ASSUME_NONNULL_END 
```

并且，`GeocodeOperation.m`：

```
#import "GeocodeOperation.h"

@interface GeocodeOperation ()
@property (nonatomic, strong) CLGeocoder *geocoder;
@property (nonatomic, copy, nonnull) NSString *address;
@property (nonatomic, copy) CLGeocodeCompletionHandler geocodeCompletionHandler;
@end

@implementation GeocodeOperation

- (instancetype)initWithGeocoder:(CLGeocoder *)geocoder Address:(NSString * _Nonnull)address geocodeCompletionHandler:(CLGeocodeCompletionHandler) geocodeCompletionHandler  {
    self = [super init];
    if (self) {
        self.geocoder = geocoder;
        self.address = address;
        self.geocodeCompletionHandler = geocodeCompletionHandler;
    }
    return self;
}

- (void)main {
    [self.geocoder geocodeAddressString:self.address completionHandler:^(NSArray<CLPlacemark *> * _Nullable placemarks, NSError * _Nullable error) {
        self.geocodeCompletionHandler(placemarks, error);
        [self completeOperation];
    }];
}

- (void)cancel {
    [self.geocoder cancelGeocode];
    [super cancel];
}

@end 
```

并且`AsynchronousOperation.h`：

```
@interface AsynchronousOperation : NSOperation

/// Complete the asynchronous operation.
///
/// This also triggers the necessary KVO to support asynchronous operations.

- (void)completeOperation;

@end 
```

并且`AsynchronousOperation.m`：

```
//
//  AsynchronousOperation.m
//

#import "AsynchronousOperation.h"

@interface AsynchronousOperation ()

@property (getter = isFinished, readwrite)  BOOL finished;
@property (getter = isExecuting, readwrite) BOOL executing;

@end

@implementation AsynchronousOperation

@synthesize finished  = _finished;
@synthesize executing = _executing;

- (instancetype)init {
    self = [super init];
    if (self) {
        _finished  = NO;
        _executing = NO;
    }
    return self;
}

- (void)start {
    if (self.isCancelled) {
        if (!self.isFinished) self.finished = YES;
        return;
    }

    self.executing = YES;

    [self main];
}

- (void)completeOperation {
    if (self.isExecuting) self.executing = NO;
    if (!self.isFinished) self.finished  = YES;
}

#pragma mark - NSOperation methods

- (BOOL)isAsynchronous {
    return YES;
}

- (BOOL)isExecuting {
    @synchronized(self) { return _executing; }
}

- (BOOL)isFinished {
    @synchronized(self) { return _finished; }
}

- (void)setExecuting:(BOOL)executing {
    [self willChangeValueForKey:@"isExecuting"];
    @synchronized(self) { _executing = executing; }
    [self didChangeValueForKey:@"isExecuting"];
}

- (void)setFinished:(BOOL)finished {
    [self willChangeValueForKey:@"isFinished"];
    @synchronized(self) { _finished = finished; }
    [self didChangeValueForKey:@"isFinished"];
}

@end 
```

# fonts - Google Web Fonts 字体中的“latin”与“latin-extended”字形支持的语言？

> ID：14303677
> 
> 赞同：81
> 
> 时间：2013-01-13T12:54:24.867
> 
> 标签：fonts, webfonts, google-webfonts, glyph

![Google Web 字体选择字符集](../Images/e55ea7e4054dd87ad34185bee807040a.png)

Google Web Fonts 上的某些字体支持多个“字符集”。问题是，如果我使用的网络字体只提供“拉丁”字形，将页面翻译成不支持字形的语言的用户会清楚地注意到混乱的文本。

我希望我的网络字体支持除英语之外世界上最流行的语言，例如西班牙语、德语、法语等。

为此，我想知道，“拉丁语”和“拉丁语扩展”分别适合哪些语言。

我希望答案看起来像：

```
Latin Character Set & Supported Languages:

- ..........
- ..........
- ..........

Latin-Extended Character Set & Supported Languages:

- ..........
- ..........
- .......... 
```

我在 Google Web Fonts 文档或谷歌搜索中找不到此信息。

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2013-02-15T15:24:04.327

## 拉丁

又名 Unicode [Latin1-Supplement](https://www.unicode.org/charts/PDF/U0080.pdf)（U+0080 到 U+00FF）旨在主要支持西欧语言（正如您提到的法语、德语、西班牙语、葡萄牙语、意大利语、爱尔兰语、冰岛语、斯堪的纳维亚国家的语言以及无意中的其他语言在下面的列表中提到）。标准 ASCII 支持英语。ASCII（前 127 个字符，其中 95 个是 U+0020 到 U+007E 的字形）被放置为 Unicode 中名为 Basic Latin 的第一个块。该块被认为是“拉丁”的一部分，即使在非拉丁字体中也通常受支持，允许它们用作系统字体（大多数非本地化的低级程序都有 ASCII 硬编码）。

## 拉丁语扩展

谷歌字体上的拉丁语扩展意味着实际上阻止了[拉丁语扩展-A](https://www.unicode.org/charts/PDF/U0100.pdf)（U+0100 到 U+017F）应该（与“Latin”结合）支持所有基于欧洲的拉丁文字。互联网出现在美国，因此 ASCII 是它的本机代码。然后为 8 位代码页的上半部分定义了 ISO-8859-1 (Latin1) 标准以支持西欧，并将其转换为 Latin1-Supplement Unicode 块。其他 8 位 ISO-8859 欧洲拉丁标准（Latin 2 East、Latin 3 South、Latin 4 North）被合并并移至 Latin-Extended-A 块。这些拉丁语标准与拉丁语 1 共享许多字符，因此“拉丁语扩展”范围内的几乎所有欧洲语言（马耳他语、拉脱维亚语、立陶宛语除外）也需要 Latin1-Supplement。这意味着“拉丁扩展”字体通常但不一定是“拉丁”类别的超集。

在 Unicode 中，还有 Latin-Extended-B 块，主要增加了对非欧洲拉丁字母、阿塞拜疆语 Ə 和罗马尼亚语 Ș, Ț 的支持（以[修复之前的错误](https://en.wikipedia.org/wiki/T-comma)），但这些字符通常被替换为 Ä、Ş、Ţ 从Extended-A（尽管我的罗马尼亚朋友告诉我这是不可接受的替代品）。支持还包括越南语Ơ、Ư（但这在 Google 字体上有自己的类别）和一些非洲语言，这些语言也需要拉丁扩展附加块。

Google 的拉丁语扩展类别大多不支持非洲拉丁语（兼容的 Google 字体列表如下）。还有更多奇特的 C、D 和 E 扩展名（总共 252 个字符），其中包含过时且如今大多无用的字母和符号。下表总结了这一点（不是 100% 正确，只是为了了解块的主要意图）：

```
--------------------------------------------------------------------
| Unicode Latin Set         | Latin Support       | Google Name    |
|==================================================================|
| Basic Latin (aka ASCII)   | English             |                |
| Latin1-Supplement         | Western European    | Latin          |
|------------------------------------------------------------------|
| Latin Extended A          | European based      | Latin Extended |
|------------------------------------------------------------------|
| Latin Extended B          | non-European        | Vietnamese     |
|------------------------------------------------------------------|
| Latin Extended Additional | African             |                |
|------------------------------------------------------------------|
| Latin Extended C, D, E    | Historical, Exotic  |                |
-------------------------------------------------------------------- 
```

## Google 如何对字体进行分类

大多数作者通过 Unicode 块创建他们的字体，其中一些只支持选定的语言。如果语言包含拉丁语扩展 A 块中的某些字符，Google 会将其置于拉丁语扩展类别中。例如，Lato 字体仅支持波兰字符（作者是波兰人），但它属于 Google 的“拉丁扩展”类别，并且在网络上没有关于它的信息。（现在字体详细信息中有*字形*选项卡，但它不会显示字体中的所有字形。）

Google 字体上的“语言”过滤器相当混乱和不清楚：它包含梵文（不是一种语言，而是书写系统和 Unicode 块）、“拉丁语”和“拉丁扩展”（不是语言，而是 Google 的伪块）以及一些使用其他块中的某些字符的语言。那里没有明确的区分块支持和语言支持，也没有完全或部分支持。暂时，找出这一点的唯一方法是尝试显示下面列表中的字符。

## 语言支持

从下面在[Omniglot](https://omniglot.com)和其他来源 检查[的拉丁字母列表中](https://en.wikipedia.org/wiki/List_of_Latin-script_alphabets)，我不计算：

*   **拉丁语扩展的二合字母，**通常被单独的字符替换（Æ 由 Latin1-Supplement 支持，ß 曾经是二合字母）
*   **非拉丁字母**，因为问题是关于拉丁语与拉丁语扩展的。有些语言使用两种书写系统：我不包括那些拉丁语很少见的语言（如阿布哈兹语），直到正式采取措施（如哈萨克语）
*   **少数民族和死语言**（阿迪格语、阿拉贡语、阿奇语、阿伦特语、旧波罗的海语言、比斯拉马语、辛布里亚语、查莫罗语、楚瓦什语、塞浦路斯语、达莱卡利语、埃斯特雷马杜兰语、法拉语、埃尔夫达利语、法罗语、弗里斯兰语、吉尔伯特语、热那亚语、格洛萨语、海达语和爱斯基摩-阿留申语）语言, Ikizu, Iñupiaq, Latgalian, Istriot, Livonian, Ladin, Kashubian, Marshallese, Mirandese, Old Norse, Nuxalk, Occitan, Romansh, Rotokas, Sami languages, Samoan, Upper and Lower Sorbian, Tahitian, Tawlu, Tetum, Tongan, Ulithian , Yapese, Zuni, 印度本土拉丁字母)
*   **政治**上宣布的语言，它们只是其他语言的一种方言，并且具有相同的拼写法（美式英语、波斯尼亚语、黑山语）
*   **洋泾浜和克里奥尔语**（如阿尔萨斯语），因为它们很难在两种语言之间进行分类和混合，而字母表是这两种语言的子集（它们往往会在其原始语言中及时溶解）
*   **最新版本的字母表中未使用的历史字符**（如双重音符、ſ、ĸ）
*   **不是语言不可分割的一部分的**货币符号****
***   **几乎是语言学家专有的**音译字符，即拼音、国际音标、UPA******

 ****如果缺少重要内容或在电子通信中使用了某些少数民族语言，请发表评论。**粗体**是官方的主要国家语言。在此列表中，至少有数十万人使用的语言。

**ASCII（基本拉丁文，即使在非拉丁字体中也经常支持）**

古典拉丁语、艾马拉语（玻利维亚）**南非荷兰语**（南非）、阿斯图里亚斯语（西班牙）、科苏语（法国）、**荷兰语**、**斐济语**、**英语**、**格陵兰**语、盖尔语（苏格兰）、**吉尔伯特**语（基里巴斯）、**海地**语、希利盖农语（菲律宾）、伦巴第语（意大利）、马来语、绍纳语（津巴布韦）、西西里语、斯瓦希里语（中非）。

**拉丁**

*   罗马尼亚语（巴尔干） Ã
*   布列塔尼 (法国) Â, Ê, Î, Ô, Û, Ù, Ü, Ñ
*   **阿尔巴尼亚语**Ç, Ë（Ç 不是 Arbëresh 方言）
*   加泰罗尼亚语 À, É, È, Í, Ï, Ŀ, Ó, Ò, Ú, Ü, Ç （来自 Ext-A 的 Ŀ 可以写成 L，带有插断·字符）
*   宿务（菲律宾）Ñ
*   **丹麦语**Æ, Å, Ø
*   **芬兰语**Å, Ä, Ö, Š, Ž (Š, Ž 来自 Ext-A 很少使用，可以使用 S, Z)
*   **菲律宾语**Á, À, Â, É, È, Ê, Ë, Í, Ì, Î, Ñ, Ó, Ò, Ô, Ú, Ù, Û
*   **法语**Æ, Œ, Â, À, É, È, Ê, Ë, Ç, Î, Ï, Ô, Ù, Û, Ü, Ÿ, », «（来自 Ext-A 的 Œ 用于路标，但人们通常使用oe 在消息中，罕见的来自 Ext-A 的 Ÿ 仅在法语名称中，其余包括 ÿ 在 Latin1-supplement 中，[背后的故事 [fr]](http://cahiers.gutenberg.eu.org/cg-bin/article/CG_1996___25_65_0.pdf)，[维基百科上的注释 [en]](https://en.wikipedia.org/wiki/ISO/IEC_8859-1#History)）
*   **德语**Ä、Ö、Ü、ß
*   **冰岛语**Æ, Á, É, Í, Ó, Ö, Ú, Ý, Þ, Ð
*   **爱尔兰语**Á, É, Í, Ó, Ú
*   **意大利语**Ì, Ù, ª, º（最后两个有时会加下划线，在英语中也流行于 Numero - Nº）
*   卡西语（印度） Ñ, Ï
*   **卢森堡语**Ä, Ë, É
*   **挪威语**Æ, Å, Ø
*   皮埃蒙特语（意大利）Ë, Ò
*   盖丘亚语（玻利维亚）Ñ
*   **葡萄牙语**Á, Â, Ã, À, Ç, É, Ê, Ó, Ô, Õ, Ú, ª, º
*   撒丁岛（意大利）Ç
*   **西班牙语**、加利西亚语和巴斯克语（又名 Eskara）（西班牙）Ñ、¿、¡、ª、º
*   **瑞典语**Å、Ä、Ö

**拉丁语扩展**

*   **阿塞拜疆**Ç、Ğ、I（无点小写）、İ、Ö、Ş、Ü、Ə（Ext-B 中的Ə 可替换为 Ä，然后与土耳其语相同）
*   克里米亚鞑靼语（俄罗斯）Â、Ç、Ğ、I（无点小写）、İ、Ñ、Ö、Ş、Ü
*   **捷克语**Á, Č, Ď, Ě, É, Í, Ň, Ó, Ř, Š, Ť, Ú, Ů, Ý, Ž
*   **爱沙尼亚语**Ä、Ö、Õ、Ü、Š、Ž
*   世界语（国际）Ĉ, Ĝ, Ĥ, Ĵ, Ŝ, Ŭ
*   弗留利语（意大利） Â, Ê, Î, Ô, Û
*   **Gagauz** (摩尔达维亚) Ä, Ç, Ê, I (无点小写), İ, Ö, Ş, Ţ, Ü
*   **Guaraní** (巴拉圭) Á, Í, Ó, Ã, Ẽ, G̃, Ĩ, Ñ, Õ, Ũ, Ỹ (Ĩ, Ũ 来自 Ext-A, Ẽ, Ỹ 来自 Ext-Additional, G̃ 不在 Unicode 中，只有结合变音符号）超出 Ext-A 范围的字符通常用抑扬符（Ê、Ĝ、Î、Û、Ŷ）转录
*   夏威夷语 Ā, Ē, Ī
*   **匈牙利语**Á、É、Í、Ó、Ö、Ő、Ú、Ü、Ű
*   **哈萨克语**（2017-2025 计划从西里尔字母转移）Ä、Ç、Ğ、I（无点小写）、İ、Ŋ、Ö、Ş、Ü（多次修订，[2019 版](https://astanatimes.com/2019/11/fourth-version-of-kazakh-latin-script-will-preserve-language-purity-linguists-say/)）
*   **库尔德语**Ç, Ê, Î, Ş, Û
*   **拉脱维亚语**Ā, Č, Ē, Ģ, Ķ, Ī, Ļ, Ņ, Ō, Ū, Ŗ, Š, Ž
*   **立陶宛语 Ą, Č** , Ę, Ė, Į, Š, Ų, Ū, Ž
*   **马耳他语**Ċ, Ġ, Ħ
*   毛利人 Ā、Ē、Ī、Ō、Ū（少数民族，但自 2015 年以来更广为人知和流行）
*   **波兰语**Ą, Ć, Ę, Ł, Ń, Ó, Ś, Ź, Ż
*   罗姆语（国际）Č，Š，Ž（口语，但很少书面语言）
*   **罗马尼亚语**Ă, Â, Î, Ș, Ț（Ș, Ț 来自拉丁语 Ext-B，可以使用 Ş, Ţ 来自 Ext-A）
*   萨米语（北方，少数民族语言，但在 Ext-A 中有一个专属的 Ŧ）Á, Č, Đ, Ŋ, Š, Ŧ, Ž
*   **塞尔维亚-克罗地亚语**Ć, Č, Đ, Š, Ž
*   **斯洛伐克语**Ä, Á, Č, Ď, É, Í, Ĺ, Ľ, Ň, Ó, Ô, Ú, Š, Ŕ, Ť, Ý, Ž
*   **斯洛文尼亚**Č, Š, Ž
*   鞑靼语（自 2012 年起）Ä、Ç、Ğ、İ、I（无点小写）、Ñ、Ö、Ş、Ü
*   **土耳其语**Ç、Ğ、I（无点小写）、İ、Ö、Ş、Ü
*   **越南语**Ă, Â, Đ, Ê, Ô, Ơ, Ư (Ơ, Ư 在 Ext-B 中加上组合音调 0x300 重音 À, 0x301 锐音 Á, 0x303 波浪线 Ã, 0x309 钩上 Ả, 0x323 点下 Ạ, 见结合下面的变音符号，在谷歌字体上有一个特殊的类别）
*   威尔士语 Â, Ê, Î, Ô, Û, Ŵ, Ŷ

**拉丁扩展，非洲（拉丁扩展字体大多不支持）**。完全支持[非洲字母](https://en.wikipedia.org/wiki/Africa_Alphabet)的有 Ubuntu、Fira Sans、EB Garamond、Tinos、News Cycle、Didact Gothic、M Plus、Sawarabi、Cousine、Caudex、Judson、Andika（当然还有 Noto，见下文）

*   **巴里**（刚果）Ŋ, Ö
*   **班巴拉**（马里）Ɛ、Ɲ、Ɔ（全部来自 Ext-B）
*   **柏柏尔语 (Tuareg)** (撒哈拉) Ă, Ḍ, Ɣ, Ǝ, Š, Ž, Ḥ, Ḷ, Ṣ, Ṭ, Ẓ (Ɣ, Ǝ 来自 Ext-B, chars with dot below from Ext-Additional)
*   **奇切瓦（切瓦）**（东非） Ŵ
*   **Dagbani** (刚果) Ɛ, Ɣ, Ɔ, Ŋ, Ʒ (Ɛ, Ɣ, Ɔ 来自 Ext-B)
*   **丁卡**语（苏丹） Ä, Ë, Ɛ, Ɛ̈, Ɣ, Ï, Ŋ, Ö, Ɔ, Ɔ̈（Ɛ, Ɣ, Ɔ 来自 Ext-B，Ɛ̈, Ɔ̈ 不在 Unicode 中，只能结合变音符号）
*   **Fula**（西非）Ɓ、Ɗ、Ƴ、Ŋ（Ŋ 来自 Ext-A，其余来自 Ext-B）
*   **豪萨语**(乍得) Ɓ, Ɗ, Ƴ, Ƙ, R̃ (R̃ 不在 Unicode 中，只有组合变音符号，其余来自 Ext-B)
*   **伊博语**(尼日利亚) Ṅ, Ị (Ext-Additional)
*   **马达加斯加**语（马达加斯加） N̈（Unicode 中没有，只有结合变音符号，可以用拉丁语中的 Ñ 代替）
*   **泛尼日利亚**语 Ɓ、Ɗ、Ǝ、Ẹ、Ị、Ƙ、Ṣ、Ụ（Ɓ、Ɗ、Ǝ、Ƙ 来自 Ext-B，Ẹ、Ị、Ṣ、Ụ 来自 Ext-Additional）
*   **Wolof** (塞内加尔) À, É, Ë, Ñ, Ŋ, Ó
*   **约鲁巴语**（西非）Ẹ, Ọ, Ṣ （Ext-Additional + 组合声调 Á, À, Ā）

## 组合变音符号

或者，字体可能支持组合变音符号块：U+0300 到 U+036F。例如，`Ř`可以输入为`U+0158`（aka *precomposed character*）或`R`+ `U+030C`。支持 Unicode 的程序应该同时显示和处理相同的内容，并提供一些 API 来处理它 - 比如[String.normalize()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize)来分解变音符号 - 但是如果程序或字体不支持*曲目*，组合变音符号可能会结束一点错位（~~比如Ɛ̈上的变音符号太低~~，它似乎在这个字体中得到了修复），请参阅这个关于这个主题的非常详细[的 Unicode Q&A 。](http://unicode.org/faq/char_combmark.html)

## 拉丁语中的非拉丁字符

许多拉丁字体支持拉丁范围之外的一些字符，因为它们在拉丁文本中很常见，即：

*   **希腊语 μ**（用作希腊语和科普特语 Unicode 块 U+0370 到 U+03FF 的*微*）以及可能用作常用符号的其他一些字母（λ、π、α、β、γ、δ、ε、Σ、Ω）- 一半谷歌的拉丁扩展字体缺乏对这一字体的支持
*   **项目符号**（用于从 Unicode 块 U+2000 到 U+206F 的列表中）
*   **开始和结束引号“，”，'，'以及它们的低开始版本“和” - 请参阅**[维基百科](https://en.wikipedia.org/wiki/Quotation_mark)上引号的正确使用
*   **破折号**U+2010 到 U+2015，请参阅[Wikipedia上破折号的正确用法](https://en.wikipedia.org/wiki/Dash)
*   可能是从 U+20A0 到 U+20CF 的一些**货币符号（€ 在 Google 字体中最常见且得到很好的支持）**

如果您的字体不支持它们，我建议您尝试看看它如何与这句话中的后备字体结合使用（复制和粘贴，包括项目符号）

> • “我们销售μF-mF 范围内的‘便宜’电容器，每包2 欧元”</p>

## 自定义字体

您可能希望通过[Font Squirrel](https://www.fontsquirrel.com)服务自定义一些字体（如果他们的许可证允许）或将它们用作备份。

具有大量字符的字体：

*   我真的很喜欢漂亮的 serif [Quivira](http://www.quivira-font.com)开放式字体，11+k 个字符，1.5 MB
*   许多计算机都安装了 Arial Unicode（MS Office 的一部分，50+k 个字符，22 MB）
*   谷歌有一个[Noto 项目](https://www.google.com/get/noto/)，其中包含衬线、无衬线和 UI 字体中的所有但最新的 unicode 字符，按块支持很好地排序（1.1 GB）
*   作为最后的备用字体，你可能会考虑丑陋的[Unifont](http://unifoundry.com/unifont/index.html)（50+k 个字符，但只有 11 MB 和嵌入式设备友好）

如果你真的喜欢一些不支持某些变音符号的字体，使用 Font Forge 很容易添加支持。在那种情况下，请仔细阅读字体许可：从法律的角度来看，字体是软件。****

# php - 列出 X 日期的所有文件

> ID：14303678
> 
> 赞同：-1
> 
> 时间：2013-01-13T12:54:37.380
> 
> 标签：php

我正在尝试制作一个脚本，该脚本将列出在 $_GET 请求中给出的日期创建（或修改）的目录中的所有文件。

我有一个脚本，列出了所有文件和日期，但是如何。我是否能够将它们“订购”成一种我可以使用我的 $_GET 请求的方式。了解我这很简单，这就是我已经拥有的：

```
<?php putenv("TZ=Europe/London");
if ($handle = opendir('./Images/')) {
    while (false !== ($entry = readdir($handle))) {
        if ($entry != "." && $entry != "..") {
           echo "$entry : " . date ("d/m/y", filemtime($entry))."<br />";
        }
    }
closedir($handle);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:30:10.480

这将在当前目录中查找文件时间时引发 stat 错误。

注意 filetime 函数包含目录 (filemtime($dir.$entry)

尝试这个

```
$dir = './Images'; // use a variable so you can easily use this again

if ($handle = opendir($dir)) {
while (false !== ($entry = readdir($handle))) {
    if ($entry != "." && $entry != "..") {
       if(filemtime($dir.$entry) == $_GET['date']) // set date paramter in the format of d/m/y
          echo "$entry : " . date ("d/m/y", filemtime($dir.$entry))."<br />"; // notice './Images'
    }
}
closedir($handle);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:36:47.280

这是此页面中**完整**的PHP LIST FILES 脚本 -

```
http://stackoverflow.com/questions/3062154/php-list-of-specific-files-in-a-directory/15678731#15678731 
```

**但是，在第 135 行，而不是**

```
echo $line; 
```

**使用这个** *（将日期更改为您想要的）*

```
if ( $new_array[$i][2] > strtotime('2013-03-19 17:14:40') ) {
echo $line;
} 
```

# r - 根据 id 有条件地拆分时变变量的值序列

> ID：14303680
> 
> 赞同：2
> 
> 时间：2013-01-13T12:54:55.327
> 
> 标签：r

在我分析的数据管理步骤中，我遇到了以下问题。

在实践中，每个`id`记录最多 5 次，我有一个感兴趣的时变变量，`tv = 1, 2, 3, 4`. 假设我的数据是：

```
dat <- read.table(text = "

        id      tv    
        1       2
        1       2
        1       1
        1       4
        2       4
        2       1
        2       4
        3       1
        3       2
        3       3
        3       3
        3       2", 

    header=TRUE) 
```

我需要做的是从 开始创建两组新的变量`tv`，以获得：

```
 id     tv     tv1   tv2   tv3   tv4   tv5    dur1  dur2  dur3  dur4  dur5 
    1      2      2     1     4     0     0       2     1     1     0     0
    1      2      2     1     4     0     0       2     1     1     0     0
    1      1      2     1     4     0     0       2     1     1     0     0
    1      4      2     1     4     0     0       2     1     1     0     0
    2      4      4     1     4     0     0       1     1     1     0     0
    2      1      4     1     4     0     0       1     1     1     0     0
    2      4      4     1     4     0     0       1     1     1     0     0
    3      1      1     2     3     2     0       1     1     2     1     0
    3      2      1     2     3     2     0       1     1     2     1     0
    3      3      1     2     3     2     0       1     1     2     1     0
    3      3      1     2     3     2     0       1     1     2     1     0
    3      2      1     2     3     2     0       1     1     2     1     0 
```

对于每个`id`， in `tv1`-`tv5`我们有*不同*（非重复）记录的有序序列`tv`，而 in `dur1`-`dur5`我们有原始数据集中各个不同记录出现的次数`dat`。

我真的不知道如何在这里进行。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T13:08:40.627

这应该这样做：

```
require(plyr)
dat <- structure(list(id = c(1L, 1L, 1L, 1L, 2L, 2L, 2L, 3L, 3L, 3L, 
         3L, 3L), tv = c(2L, 2L, 1L, 4L, 4L, 1L, 4L, 1L, 2L, 3L, 3L, 2L
         )), .Names = c("id", "tv"), class = "data.frame", row.names = c(NA, 
         -12L))

out <- ddply(dat, .(id), function(x) {
    this.rle <- rle(x$tv)

    val <- this.rle$values
    val <- c(val, rep(0, 5-length(val)))
    val <- matrix(rep(val,nrow(x)), byrow=T, nrow=nrow(x))
    val <- as.data.frame(val)
    names(val) <- paste("tv", 1:5, sep="")

    len <- this.rle$lengths
    len <- c(len, rep(0, 5-length(len)))
    len <- matrix(rep(len,nrow(x)), byrow=T, nrow=nrow(x))
    len <- as.data.frame(len)
    names(len) <- paste("dur", 1:5, sep="")
    cbind(data.frame(tv=x$tv), val, len)
})

> out
   id tv tv1 tv2 tv3 tv4 tv5 dur1 dur2 dur3 dur4 dur5
1   1  2   2   1   4   0   0    2    1    1    0    0
2   1  2   2   1   4   0   0    2    1    1    0    0
3   1  1   2   1   4   0   0    2    1    1    0    0
4   1  4   2   1   4   0   0    2    1    1    0    0
5   2  4   4   1   4   0   0    1    1    1    0    0
6   2  1   4   1   4   0   0    1    1    1    0    0
7   2  4   4   1   4   0   0    1    1    1    0    0
8   3  1   1   2   3   2   0    1    1    2    1    0
9   3  2   1   2   3   2   0    1    1    2    1    0
10  3  3   1   2   3   2   0    1    1    2    1    0
11  3  3   1   2   3   2   0    1    1    2    1    0
12  3  2   1   2   3   2   0    1    1    2    1    0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T19:48:47.350

这是一个完全在基础 R 中的解决方案。它与@Arun 的答案非常相似，但可能比使用“plyr”更快：

```
out <- cbind(dat, do.call(
    rbind, 
    lapply(split(dat$tv, dat$id), function(x) {
        OUT <- matrix(0, ncol = 10, nrow = 1)
        T1 <- rle(x)
        OUT[1, seq_along(T1$values)] <- T1$values
        OUT[1, 6:(5+length(T1$lengths))] <- T1$lengths
        colnames(OUT) <- paste(rep(c("tv", "dur"), 
                                   each = 5), 1:5, sep ="")
        OUT[rep(1, length(x)), ]
    })))
out
#    id tv tv1 tv2 tv3 tv4 tv5 dur1 dur2 dur3 dur4 dur5
# 1   1  2   2   1   4   0   0    2    1    1    0    0
# 2   1  2   2   1   4   0   0    2    1    1    0    0
# 3   1  1   2   1   4   0   0    2    1    1    0    0
# 4   1  4   2   1   4   0   0    2    1    1    0    0
# 5   2  4   4   1   4   0   0    1    1    1    0    0
# 6   2  1   4   1   4   0   0    1    1    1    0    0
# 7   2  4   4   1   4   0   0    1    1    1    0    0
# 8   3  1   1   2   3   2   0    1    1    2    1    0
# 9   3  2   1   2   3   2   0    1    1    2    1    0
# 10  3  3   1   2   3   2   0    1    1    2    1    0
# 11  3  3   1   2   3   2   0    1    1    2    1    0
# 12  3  2   1   2   3   2   0    1    1    2    1    0 
```

以下是正在发生的事情的摘要：

1.  `split(dat$tv, dat$id)`在“tv”中为每个“id”创建一个值列表。

2.  我们应用一个匿名函数，其中我们：

    1.  创建一个由零组成的空单行矩阵。我们已经知道我们需要 10 列。
    2.  存储输出，`rle()`因为我们需要“值”和“长度”
    3.  使用基本子集将“值”插入矩阵的前五列，将“长度”插入最后五列。
    4.  添加您的列名
    5.  使用一个小技巧将矩阵“扩展”到指定的行数，在这种情况下，行数与每组的行数相同。
3.  `do.call(rbind...`将所有矩阵放在一起，按行绑定它们。

4.  `cbind(dat...`将原件绑定`data.frame`到步骤 1 到 3 的结果。

同样，从概念上讲，这与 Arun 的答案非常相似——使用的`rle()`可能是你所缺少的。

# node.js - 轻松的访客账户 = 轻松的滥用？

> ID：14303682
> 
> 赞同：0
> 
> 时间：2013-01-13T12:55:08.650
> 
> 标签：node.js, socket.io

**设想**

我正在构建一个 node.js/socket.io（express.js、mongodb、passport.js、socket.io）网络游戏。用户必须先登录才能玩。

我正在考虑在首页上有一个大的“TRY NOW”按钮，它使用 socket.io 在 mongodb 中创建一个随机命名的访客帐户，并使用它让玩家登录游戏。除非用户注册，否则此访客帐户会在 48 小时内销毁。

滥用它的一种方法可能是编写一个脚本，该脚本反复单击“立即尝试”按钮，以用访客帐户淹没我的数据库。

**问题**

如果没有完整的注册，有没有办法避免这种情况？我可以在“TRY NOW”旁边放一个验证码，但除非我真的需要，否则我宁愿不使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:25:23.743

有一些方法可以在没有 CAPTCHA 的情况下做到这一点，但这并不是完美的解决方案。

1.  您可以为该客户端设置一个带有 sessionid 的 cookie，该 cookie 随时间持续存在。如果用户有会话，则此会话 ID 可能会阻止“立即尝试”按钮。这可能会被另一个不会存储您的 cookie 的浏览器绕过。或者只是当用户删除 cookie
2.  不推荐，如果您扫描用户 IP 地址并实施洪水保护（例如，此 IP 地址可能会在 10 分钟内点击该按钮，否则会阻止它）。但这对于共享和 NAT 下是非常不愉快的。考虑*不这样做*。
3.  否则，您可以考虑扫描新形成的用户的活动，如果在最初几分钟内没有任何活动，则他们的帐户被销毁，应该重新创建。

几乎这些都是可能有效的想法。

# javascript - JavaScript 在返回的数据上添加 rel="nofollow"

> ID：14303689
> 
> 赞同：-1
> 
> 时间：2013-01-13T12:56:17.913
> 
> 标签：javascript, jquery

我从输入文本字段中获取数据，将其发送到另一个文件进行处理并使用此函数显示返回的信息；

```
$(function() {
  $("#showitems").on("click",function() {
        var url = $("#url").val();
        if (url && $(this).is(":checked")) {

      $.post("details.php",
        { "url": url },
        function(data){
      $('.itemdetails').html(data);
        }
      ); 

    } else {

    }
  });
}); 
```

返回的数据是一个类似下面的无序列表：

```
<li><a href="http://www.google.com" title="Google" target="_blank">Google</li>
<li><a href="http://www.yahoo.com" title="Yahoo" target="_blank">Yahoo</li>
<li><a href="http://www.bing.com" title="Bing" target="_blank">Bing</li>
<li><a href="http://www.facebook.com" title="Facebook" target="_blank">Facebook</li>
<li><a href="http://www.twitter.com" title="Twitter" target="_blank">Twitter</li> 
```

现在，如何在每个返回的`<a href="">`标签上附加一个 'rel="nofollow"' ？

对不起`rel="_blank"`，应该是`target="_blank"`。那是我的错误。

输出将在 php 页面上，并且可以很容易地被搜索引擎抓取，这就是 nofollow 会很好的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T13:00:54.493

`rel="nofollow"`使用 JavaScript添加是没有意义的。搜索引擎不会看到它，因为它们不执行 AJAX 请求并且通常不执行 JavaScript。

但是，理论上这应该可以完成这项工作：

```
$('.itemdetails').html(data).find('a').attr('rel', 'nofollow'); 
```

但同样，**搜索引擎根本不会看到这一点**。

顺便说一句，如果您希望它在新的选项卡/窗口中打开，`rel="_blank"`很可能应该是`target="_blank"`（顺便说一句，您不应该这样做——这应该取决于用户是否愿意）。

# node.js - 没有端口号的nodejs域

> ID：14303690
> 
> 赞同：16
> 
> 时间：2013-01-13T12:56:28.150
> 
> 标签：node.js, url, port

我已经在 VPS（ubuntu 10.04）上部署了我的 nodejs 应用程序。我将它托管在一个子域 (subdomain.myapp.com:3000) 上，我只有一个 IP 地址

默认情况下，apache 默认使用端口 80。我只希望我的应用程序应该在端口 3000 上运行，但 URL 应该是 (subdomain.myapp.com)

这在nodejs中是否可行，还是我必须调整我的虚拟主机或apache的文件。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-13T13:01:41.840

是的，有可能

在您的 apache 虚拟主机文件中配置以下内容

```
<VirtualHost *:80>
    ServerName subdomain.myapp.com

    ProxyRequests off

    <Proxy *>
            Order allow,deny
            Allow from all
    </Proxy>

    ProxyPass / http://localhost:3000/
    ProxyPassReverse / http://localhost:3000/
    ProxyPreserveHost on
</VirtualHost> 
```

你应该有

```
NameVirtualHost *:80 
```

在您的文件以及为 apache 安装的代理模块之上（我认为这是 ubuntu 的默认配置）

```
LoadModule proxy_module lib/httpd/modules/mod_proxy.so 
```

它必须在您的 httpd.conf 文件中

那么你应该重新启动apache，它一定没问题！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-02T16:38:59.153

只是使用**Apache 2.4 更新 @drinchev 答案。***

启用代理模式：

```
a2ensite proxy_http
a2ensite proxy 
```

然后 ：

```
<VirtualHost *:80>
    ServerName subdomain.myapp.com

    ProxyRequests off

    <Proxy *>
            Require all granted
    </Proxy>

    ProxyPass / http://localhost:3000/
    ProxyPassReverse / http://localhost:3000/
    ProxyPreserveHost on
</VirtualHost> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-04T23:39:10.560

我需要做同样的事情，@drinchev 的回答几乎对我有用，但因为我在我的开发盒上运行了几个虚拟主机，所以它并不完全。一些小的调整使它不会破坏我所有的其他虚拟主机。

```
<Proxy *> 
```

需要是

```
<Proxy mynodejs.mydevbox.local> 
```

和

```
<VirtualHost *:80> 
```

需要是

```
<VirtualHost mynodejs.mydevbox.local:80> 
```

所以我的本地开发机器被命名为“mydevbox.local”并且我的节点虚拟主机正在监听端口 3000，我的最终配置看起来更像：

```
<VirtualHost mynodejs.mydevbox.local:80>
    DocumentRoot "/Library/WebServer/Documents/mynodejs"
    ServerName mynodejs.mydevbox.local
    ServerAlias mynodejs.mydevbox.local

    ProxyRequests off

    <Proxy mynodejs.mydevbox.local>
            Order allow,deny
            Allow from all
    </Proxy>

    ProxyPass / http://localhost:3000/
    ProxyPassReverse / http://localhost:3000/
    ProxyPreserveHost on
    ErrorLog "/private/var/log/apache2/mynodejs_error_log"
    CustomLog "/private/var/log/apache2/mynodejs_access_log" common
</VirtualHost>

<VirtualHost myothervhost.mydevbox.local:80>
    DocumentRoot "/Library/WebServer/Documents/myothervhost"
    ServerName myothervhost.mydevbox.local
    ServerAlias myothervhost.mydevbox.local
    ErrorLog "/private/var/log/apache2/myothervhost_error_log"
    CustomLog "/private/var/log/apache2/myothervhost_access_log" common
</VirtualHost> 
```

其他虚拟主机可以跟随

# java - 为什么 JSoup 会删除元素 ID？

> ID：14303691
> 
> 赞同：1
> 
> 时间：2013-01-13T12:56:30.613
> 
> 标签：java, html-parsing, jsoup

我正在使用 JSoup 来清理一些不受信任的 HTML。我发现如果我打电话

```
String html = "<div id='foo'><script type='text/javascript'>alert('hello');</script></div>";
String cleanedHtml = Jsoup.clean(html, Whitelist.relaxed()); 
```

此时`cleanedHtml`是

```
<div><div> 
```

所以`<script>`标签已被正确删除，但神秘的`id`是，`<div>`. 有什么好的理由应该删除它还是一个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T13:29:01.010

默认情况下，该`id`属性已被删除；将其添加为允许的属性：

```
Whitelist whitelist = Whitelist.relaxed().addAttributes("div", "id");
System.out.println(Jsoup.clean(html, whitelist));

=> <div id="foo"></div> 
```

它是一个错误吗？不是 AFAIC；它在源代码中。不过，IMO 存在文档错误。

是否有“任何充分的理由”为什么应该删除它？不确定那个，但是像这样的属性不是结构性的：删除它不会改变 DOM。这就是白名单的问题——它们明确允许，并且必须根据您的确切需求进行策划。

# sharepoint - Access 2013 和 Sharepoint 2013 Web 集成

> ID：14303692
> 
> 赞同：5
> 
> 时间：2013-01-13T12:56:34.287
> 
> 标签：sharepoint, ms-access

首先，这个问题有点高级（或者我也喜欢称之为......模糊）。我曾在几个 IT 部门工作过，每到一个地方，我似乎看到的都是一样的东西，用户正在寻找一种方法，将旧的访问数据库用于 IT 库存和任务管理等内容带到 Web 上。SharePoint 是显而易见的选择，但它似乎可以实现 90% 的开箱即用。然后突然之间你走到了死胡同，你唯一的选择就是退出 Visual Studio 来完成剩下的工作，当最终用户自己完成前 90% 时显然不是很好！真正的限制似乎是链接列表、单个列表列的权限等

我看到 SharePoint 2013 和 Access 2013 现在可以链接/集成，有没有人尝试过这种东西，对于像微软这样的最终用户来说真的可行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-22T23:41:46.560

Access 2013 与 Sharepoint“Web 应用程序”相比的功能感觉有限。**您不能在任何表单中使用 VBA 代码，只能处理 SQL 和宏命令**。因此，如果您使用大量 VBA，您将不得不重做大部分项目并学习如何使用宏。就我个人而言，我使用 VBA 完成了我的大部分工作，但就像你现在需要它在网络上一样。

我花时间使用 Access 和 Sharepoint 的主要担心是无法自定义代码片段。如果我遇到限制，我不相信还有其他选择。

*   [示例网络应用程序](https://011588-f782957bb760fe.sharepoint.com/personal/jsharpe_011588_onmicrosoft_com/My%20New%20App/default.aspx#Tile=Contacts&View=Contacts%20List)
*   [当 Access web 应用程序 2013 让 Johnny 感到沮丧时......](http://social.msdn.microsoft.com/Forums/office/en-US/0ac978d6-51f1-47f7-8e01-4523f0fe49fb/when-access-web-apps-2013-gets-johnny-frustrated)
*   [Access 2013 中已停产的功能和修改的功能](http://office.microsoft.com/en-us/access-help/discontinued-features-and-modified-functionality-in-access-2013-HA102749226.aspx)

界面不同，从概述上看，对于简单的输入和查看表单似乎更有效，在手机上很容易使用。例如，这是 Access 编辑视图中的默认联系表单。

![界面图1](../Images/ec9680f0d7df8fe13df9309da2f28e26.png)

您的大部分控件都以顶部的自定义按钮为中心，我发现这些按钮仅限于点击宏和简单的编辑/保存数据操作。

![界面图2](../Images/b4cbb0d4a47b35b4ed8cb261df411d10.png)

您对论坛设计的选择也是有限的，但是基于桌面的项目中没有自动完成搜索输入栏的额外好处。

![界面图2](../Images/100537dc51a6339e987aea170fa4f90c.png)

此外，宏列表选项也减少了一些。

![宏列表](../Images/30de59cf1f45f5e55756bfe81c07c319.png)

# php - 来自jquery`if`语句中的php echo的数据

> ID：14303693
> 
> 赞同：0
> 
> 时间：2013-01-13T12:56:34.733
> 
> 标签：php, jquery, if-statement

```
function(data, textStatus, jqXHR) {
    $("#info").html(data);
    if ((data).substr(0, 5)=="Please") {$("#imgOk").fadeIn();} // doesn't work 
```

`data`是来自另一个页面的 php 回显。成功放入div `#info`，内容为：
`Please, check your Inbox`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T12:59:42.783

假设没问题`data`，`substr`的第二个参数是要检索的字符数，而不是结束索引。由于“请”是 6 个字母，所以应该是`.substr(0, 6)`.

有关详细信息，请参阅[http://www.w3schools.com/jsref/jsref_substr.asp](http://www.w3schools.com/jsref/jsref_substr.asp)。

# java - 当文本更改修改 textField 的文本时 JTextField 侦听器

> ID：14303695
> 
> 赞同：3
> 
> 时间：2013-01-13T12:56:36.830
> 
> 标签：java, swing, listener, jtextfield, documentlistener

知道如何将文本侦听器添加到 JTextField，当文本更改时触发并作为操作修改 JTextField 的文本。

我试过使用`addInputMethodListener`which 似乎是合适的，但它似乎不起作用。我也尝试过，但是当我尝试修改 textField 的文本时`textField.getDocument().addDocumentListener()`会抛出这个问题。`java.lang.IllegalStateException: Attempt to mutate in notification`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-13T12:59:16.617

`DocumentListeners`不允许修改`JTextComponent`. 您正在寻找[DocumentFilter](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/DocumentFilter.html)。

[例子](http://www.java2s.com/Tutorial/Java/0260__Swing-Event/CustomDocumentFilter.htm)

# ios - 启动图像的 iOS 通用应用程序

> ID：14303700
> 
> 赞同：0
> 
> 时间：2013-01-13T12:57:44.500
> 
> 标签：ios, uiviewcontroller

我正在编写一个支持旋转的通用应用程序。当应用程序启动时，它需要从互联网下载一些数据，所以我推送一个带有活动指示器的 UIViewController，因为它不可能有动画启动图像或添加标签或对象。

我希望“正在加载”的 VC 具有与启动相同的 bg 图像，但是，因为它是一个通用应用程序，我不能设置一个简单的 [UIImage imageNamed:@"Default.png"] 因为它可以在 iPhone 或iPad 以及 iPad 是否可以纵向或横向启动（iPhone 应用程序始终以纵向启动）。

问题是：有办法知道哪个 Default.png 已用作启动图像？有可能

*   Default.png (@2x 如果视网膜)
*   Default-Portrait.png (@2x 如果视网膜)
*   Default-Landscape.png (@2x 如果视网膜)
*   默认-568h@2x.png

如果现在有办法，我将检查 currentDevice 和方向并手动设置 imageNamed。

谢谢，马克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:03:54.320

纵向和横向没有后缀。您必须使用 手动检查方向`[[UIDevice currentDevice] orientation]`。

要为 iPad 和 iPhone/iPod Touch 显示不同的图像，您可以添加`~ipad`到 iPad 图像`~iphone`的末尾和 iPhone/iPod Touch 图像的末尾。例子：

Default~iphone.png 将在 iPhone/iPod Touch 上加载，而 Default~ipad.png 将在 iPad 上加载：

```
[UIImage imageNamed:@"Default.png"]; 
```

不过，iPhone 5 也没有说明符。因此，您必须检查并再次手动`[[UIScreen mainScreen] bounds].size.height`加载。`UIImage`

* * *

**完整（未经测试）示例：**

```
UIImage *image;

if ([UIScreen mainScreen].bounds.size.height == 568.0)
{
    if (UIInterfaceOrientationIsLandscape([[UIApplication sharedApplication] statusBarOrientation]))
    {
        image = [UIImage imageNamed:@"Default-568h-Landscape"];
    }
    else
    {
        image = [UIImage imageNamed:@"Default-568h-Portrait"];
    }
}
else
{
    if (UIInterfaceOrientationIsLandscape([[UIApplication sharedApplication] statusBarOrientation]))
    {
        image = [UIImage imageNamed:@"Default-Landscape"];
    }
    else
    {
        image = [UIImage imageNamed:@"Default-Portrait"];
    }
}
// check suggested by Guy Kogus
if (image == nil) image = [UIImage imageNamed:@"Default"]; 
```

* * *

要在评论中回答您的问题：

不，您无法查询运行时使用的启动图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T13:07:10.853

@2x 后缀是自动选择的，因此您无需担心。您需要实施一些检查：

```
- (NSString *)defaultImage
{
    NSString *imageName = nil;
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
    {
        if ([UIScreen mainScreen].bounds.size.height == 568.0)
        {
            imageName = @"Default-568h";
        }
        else
        {
            imageName = @"Default";
        }
    }
    else // ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad)
    {
        if (UIInterfaceOrientationIsLandscape([UIApplication sharedApplication].statusBarOrientation))
        {
            imageName = @"Default-Landscape";
        }
        else // if (UIInterfaceOrientationIsPortrait([UIApplication sharedApplication].statusBarOrientation))
        {
            imageName = @"Default-Portrait";
        }
    }
    return [UIImage imageNamed:imageName];
} 
```

# html - HTML5画布路径绘制问题

> ID：14303708
> 
> 赞同：2
> 
> 时间：2013-01-13T12:58:35.897
> 
> 标签：html, canvas, path, line, draw

我在尝试用画布画线时注意到一个奇怪的问题。我有一个简单的脚本，当你第一次点击时保存点（这将是路径的起点），当你再次点击并且第一个点已经保存时，它会保存终点。所以我有路径的起点和终点，这没关系。在此之后，我使用 .moveTo()、.lineTo() 和 .stroke() 函数来绘制一条线。这里出现了问题：X 坐标总是比原始坐标（起点和终点）多 1.4 倍，Y 坐标少​​ 0.8 倍。我不知道是什么导致了这个问题。我正在跟踪变量并且它们工作正常， .moveTo() 和 .lineTo() 函数获得了正确的坐标，但它们绘制了转换后的线。

这是我的代码的一部分：

```
var points = [null, null];
var canvas = $('canvas#myid');
var ctx = canvas[0].getContext("2d");
var end = false;

$(canvas).click(function(event) {
   if ( null == points[0] ) { 
      // First click - first coordinates
      points[0] = [event.pageX, event.pageY];
   } else if ( null == points[1] && null != points[0] ) {
      // Second click - second coordinates
      points[1] = [event.pageX, event.pageY];
      ctx.fillStyle = "black";
      ctx.moveTo(points[0][0], points[0][1]);
      ctx.lineTo(points[1][0], points[1][1]);
      ctx.stroke();
      end = true;
   } else if ( null != points[0] && null != points[1] ) end = true;

   if ( true === end ) {
      points = [null, null];
   }
} 
```

不知道，希望各位大神帮忙，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:23:04.603

您忘记在代码末尾关闭括号，`);`无需使用`$(canvas).`您应该像`canvas.`

[**jsFiddle Live Demo一样使用它**](http://jsfiddle.net/BlackSRC/Sjwzz/1/)

```
$(function()
{
    var points = [null, null];
    var canvas = $('canvas#myid');
    var ctx = canvas[0].getContext("2d");
    var end = false;
    canvas.click(function(event) 
    {
           if ( null == points[0] ) 
           { 
                  // First click - first coordinates
                  points[0] = [event.pageX, event.pageY];
           } 
           else if ( null == points[1] && null != points[0] ) 
           {
                  // Second click - second coordinates
                  points[1] = [event.pageX, event.pageY];
                  ctx.fillStyle = "black";
                  ctx.moveTo(points[0][0], points[0][1]);
                  ctx.lineTo(points[1][0], points[1][1]);
                  ctx.stroke();
                  end = true;
           } 
           else if ( null != points[0] && null != points[1] ) 
           {
                 end = true;
           }
           if ( true === end ) 
           {
                points = [null, null];
           }
    }); // Here you missed
}); 
```

# css - 如何自定义 twitter 小部件样式？

> ID：14303710
> 
> 赞同：16
> 
> 时间：2013-01-13T12:58:50.670
> 
> 标签：css, twitter

我刚刚在我的网站上实现了列表小部件：[https ://dev.twitter.com/docs/embedded-timelines](https://dev.twitter.com/docs/embedded-timelines)

我只想将背景颜色从白色覆盖为透明。由于它是一个嵌入式小部件，我无法直接对其进行编辑。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-21T09:43:56.983

[https://dev.twitter.com/docs/embedded-timelines](https://dev.twitter.com/docs/embedded-timelines)

您可以更改小部件的 Chrome，以隐藏页眉/页脚/边框或背景。

```
<a class="twitter-timeline" href="https://twitter.com/twitterapi" data-widget-id="<YOUR ID>" data-theme="dark" data-link-color="#000" data-chrome="noheader nofooter noborders transparent"  data-related="twitterapi,twitter" data-aria-polite="assertive" width="300" height="300" lang="EN">Tweets by @twitterapi</a> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-21T17:03:12.217

从 twitter>settings>widgets 创建一个小部件。

复制粘贴提供的代码。

```
<a
class="twitter-timeline"
href="https://twitter.com/YourNickname"
data-widget-id="xxxxxxxxxxxxxxxxxxx" <!--you will haveyour own number http://stackoverflow.com/questions/16375116/what-is-data-widget-id-in-twitter-api-how-i-can-get-the-data-widget-id-->
data-chrome="noheader nofooter noborders noscrollbar transparent" <!--tweak these for the looks-->
data-tweet-limit="5"
data-link-color="#FFFFFF"
data-border-color="#FFFFFF"
lang="EN" data-theme="light" <!--light or dark-->
height="447"
width="255"
data-screen-name="yourName"
data-show-replies="false"
data-aria-polite="assertive">

Tweets by @YourName

</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

对于答案，我使用了来自[http://tweetsdecoder.net/](http://tweetsdecoder.net/)的作品。由于脚本，他的片段显然不起作用。

干杯!

编辑：那里有我的昵称

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-13T13:19:58.610

我正在使用类似下面的东西（现在找不到太多参考，但它仍然有效）（`<YOUR_TWIITER_NAME>`用你的改变）：

```
<script type="text/javascript" src="//widgets.twimg.com/j/2/widget.js"></script>
<script type='text/javascript'>
new TWTR.Widget({
  version: 2,
  type: 'profile',
  rpp: 4,
  interval: 6000,
  width: 300,
  height: 288,
  theme: {
    shell: {
      background: 'transparent',
      color: '#2c458f'
    },
    tweets: {
      background: 'transparent',
      color: '#525252',
      links: '#ad1111'
    }
  },
  features: {
    scrollbar: false,
    loop: false,
    live: false,
    hashtags: true,
    timestamp: true,
    avatars: true,
    behavior: 'all'
  }
}).render().setUser('<YOUR_TWIITER_NAME>').start();
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-23T02:59:46.800

如果您需要进一步的自定义，请尝试使用Jason Mayes 的[TwitterPostFetcher](https://github.com/jasonmayes/Twitter-Post-Fetcher)。它允许时间线推文的完整样式 - 远远超过股票推特小部件提供的默认样式参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-05T11:20:13.173

目前，这就是 twitter 在您的网页中呈现的内容。 ![推文小部件解码](../Images/690b1c02b6c681714186a184a465888b.png)

由于您知道所有 id 和 class 属性，因此您可以使用 css 或 JavaScript 来控制它，这个链接[http://tweetsdecoder.net](http://tweetsdecoder.net)对于如何自定义 twitter 小部件也可能很有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-16T18:48:45.737

使用 CSS 背景色更改元素的背景`a.twitter-timeline add data-chrome="transparent"`并将锚点放置在元素内

# wordpress - 如何修改我的自定义小部件以支持 qtranslate？

> ID：14303711
> 
> 赞同：3
> 
> 时间：2013-01-13T12:58:55.797
> 
> 标签：wordpress, qtranslate

我有一个网站，我必须修改我的小部件以使用 qTranslate 插件。有人可以指出我正确的方向吗？

基本上我想让我的输入字段显示每种语言，以便用户轻松知道在哪里输入信息，而不是在神秘的刺痛中输入信息

`[:en]English only[:fr]Francais only`

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:19:13.480

AFAIK，您必须使用自定义翻译字段复制您想要的小部件。

以下是对***Search Widget***的改编，抄自[`/wp-includes/default-widgets.php`](http://core.trac.wordpress.org/browser/tags/3.5/wp-includes/default-widgets.php#L185).

请注意，您可以优化所有`FIELD_language`选项值，`foreach`在所有可用语言中执行。

```
add_action( 'widgets_init', 'qtrans_search_widget_so_14303711' );

function qtrans_search_widget_so_14303711()
{
    unregister_widget( 'WP_Widget_Search' );
    register_widget( 'QT_Widget_Search' );
}

class QT_Widget_Search extends WP_Widget {

    function __construct() {
        $widget_ops = array('classname' => 'widget_search', 'description' => __( "A search form for your site") );
        parent::__construct('search', __('Search'), $widget_ops);
    }

    function widget( $args, $instance ) {
        extract($args);
        $title_en = empty( $instance['title_en'] ) ? '' : $instance['title_en'] ;
        $title_fr = empty( $instance['title_fr'] ) ? '' : $instance['title_fr'] ;

        // THIS PART CAN BE GREATLY OPTIMIZED
        $lingo = qtrans_getLanguage();
        if ( 'en' == $lingo )
            $title = $title_en;
        else
            $title = $title_fr;

        echo $before_widget;
        if ( $title )
            echo $before_title . $title . $after_title;

        // Use current theme search form if it exists
        get_search_form();

        echo $after_widget;
    }

    function form( $instance ) {
        $instance = wp_parse_args( (array) $instance, array( 'title_en' => '', 'title_fr' => '') );
        $title_en = $instance['title_en'];
        $title_fr = $instance['title_fr'];
?>
        <p><label for="<?php echo $this->get_field_id('title_en'); ?>"><?php _e('Title English:'); ?> <input class="widefat" id="<?php echo $this->get_field_id('title_en'); ?>" name="<?php echo $this->get_field_name('title_en'); ?>" type="text" value="<?php echo esc_attr($title_en); ?>" /></label></p>
    <p><label for="<?php echo $this->get_field_id('title_fr'); ?>"><?php _e('Title Français:'); ?> <input class="widefat" id="<?php echo $this->get_field_id('title_fr'); ?>" name="<?php echo $this->get_field_name('title_fr'); ?>" type="text" value="<?php echo esc_attr($title_fr); ?>" /></label></p>
<?php
    }

    function update( $new_instance, $old_instance ) {
        $instance = $old_instance;
        $new_instance = wp_parse_args((array) $new_instance, array( 'title_en' => '', 'title_fr' => ''));
        $instance['title_en'] = strip_tags($new_instance['title_en']);
        $instance['title_fr'] = strip_tags($new_instance['title_fr']);
        return $instance;
    }

} 
```

它呈现：

![qTranslate 的自定义搜索小部件](../Images/1e86eceec3c9c8860c37bf50e31a2330.png)

# c# - 如何在 C# 库中创建全局对象

> ID：14303715
> 
> 赞同：15
> 
> 时间：2013-01-13T12:59:11.923
> 
> 标签：c#, dll, initialization, globals

> **可能重复：**
> [使整个应用程序可以访问数据（可能在运行时更改）的最佳方法？](https://stackoverflow.com/questions/11781131/best-way-to-make-data-that-may-change-during-run-time-accessible-to-the-whole)

我有一个 C# 库。

1.  库可以有全局对象/变量吗？
2.  运行主项目时，是否可以从库中自动执行这些对象的初始化方法，还是必须将其设为静态方法并从主项目运行？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-13T13:06:35.660

在 C# 中，我总是使用静态类来提供此功能。[此处](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.90%29.aspx)详细介绍了静态类，但简要地说，它们仅包含静态成员且未实例化——本质上它们是通过类名（和命名空间）访问的全局函数和变量。

这是一个简单的例子：

```
public static class Globals
{
    public static string Name { get; set; }
    public static int aNumber {get; set; }
    public static List<string> onlineMembers = new List<string>();

     static Globals()
     {
        Name = "starting name";
        aNumber = 5;
     }
} 
```

请注意，我还使用了一个静态初始化程序，它保证在使用/调用任何成员或函数之前的某个时间点运行。

在您的程序的其他地方，您可以简单地说：

```
Console.WriteLine(Globals.Name);
Globals.onlineMemeber.Add("Hogan"); 
```

静态对象只“创建”一次。因此，您的应用程序使用该对象的任何地方都将来自同一位置。根据定义，它们是全球性的。要在多个地方使用此对象，只需引用对象名称和要访问的元素。

* * *

您可以将静态成员添加到任何类，它们将在全球范围内可用，但我认为为全局变量设置一个位置是一种更好的设计。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-13T13:00:39.803

您可以将类上的公共[静态属性](http://msdn.microsoft.com/en-us/library/aa664451%28v=vs.71%29.aspx)用作全局对象/变量。

[您可以在类的静态构造函数](http://msdn.microsoft.com/en-us/library/k9x6w0hc%28v=vs.80%29.aspx)中初始化静态属性，该构造函数将在第一次访问属性之前直接调用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-13T13:03:43.350

> 库可以有全局对象/变量吗？

是的，c# 可以有静态类、静态成员。但是在类之外不能存在任何变量。

> 运行主项目时，是否可以从库中自动执行这些对象的初始化方法，还是必须将其设为静态方法并从主项目运行？

您可以内联初始化，也可以在静态构造函数中进行初始化。在首次访问任何静态成员或实例成员之前调用它们。如果未访问静态成员并且未创建实例，则有可能不会进行初始化。

[与静态初始化器相关的有趣文章](http://csharpindepth.com/Articles/General/Beforefieldinit.aspx)

# java - 将字符串转换为 JSONObject 时解析错误

> ID：14303720
> 
> 赞同：0
> 
> 时间：2013-01-13T13:00:00.297
> 
> 标签：java, json, xmlhttprequest

我正在制作一个 android 应用程序，这是它抛出的第一个错误：

`Error parsing data org.json.JSONException: Value <br of type java.lang.String cannot be converted to JSONObject`

这是我的类功能：

```
package com.ernest.httppost;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.utils.URLEncodedUtils;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    // function get json from url
    // by making HTTP POST or GET method
    public JSONObject makeHttpRequest(String url, String method,
            List<NameValuePair> params) {

        // Making HTTP request
        try {

            // check for request method
            if(method == "POST"){
                // request method is POST
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            }else if(method == "GET"){
                // request method is GET
                DefaultHttpClient httpClient = new DefaultHttpClient();
                String paramString = URLEncodedUtils.format(params, "utf-8");
                url += "?" + paramString;
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();
            }          

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

我认为它`jObj = new JSONObject(json);`在最后一个`try-catch`块中返回了该错误。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T13:15:22.223

看起来您的响应`<br`不是 JSON，因此预计会出现此解析错误。

您是否在请求中使用正确的有效负载访问了正确的 URL？尝试调试以查看您正在请求什么以及响应是什么 - 错误可能很明显。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T13:21:43.710

评论提升回答：

我认为您用来构造 JSONObject 的字符串应该是有效的 json 字符串。由于错误状态值`<br`无法转换，我猜您正在尝试从 HTML 字符串构造一个 json 对象。确保您传递的是格式正确的 json 字符串。例如：

```
"{\"name\":\"John Ernest Guadalupe\", \"reputation\":181, \"messages\":[\"msg 1\",\"msg 2\",\"msg 3\"]}" 
```

就像 davnicwil 所说：问题可能是由 URL 引起的，而不仅仅是返回格式正确的 JSON 字符串。

# c# - 通过计时器事件显示登录表单

> ID：14303721
> 
> 赞同：0
> 
> 时间：2013-01-13T13:00:14.430
> 
> 标签：c#, winforms

我有一个要加载的主表单，当 20 分钟过去后，出于安全原因，我希望打开一个登录表单。我想验证正确的用户正在使用该软件，所以我考虑过使用计时器并给计时器一个 20 分钟的间隔。这是我的代码：

```
private void timer1_Tick_1(object sender, EventArgs e)
{
    foreach (Form f in Application.OpenForms)
    {
        if (f.Name != "login2")
        {
            login2 lss = new login2();
            lss.ShowDialog(); 
        } 
    }
} 
```

这里的问题是它每 20 分钟打开一次表单。这意味着如果用户没有做任何事情，它只是显示一个又一个登录表单，导致出现多个登录表单，这是我不想要的。我已经使用了循环，但它仍然无法正常工作。我不知道为什么。

*除此之外，我是否可以实现如果表单空闲 20 分钟然后显示登录表单并且 id 不空闲然后不显示登录表单的功能？实施起来容易吗？我不希望有任何复杂性，因为我是第一次接触 c# 的新手*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:42:43.957

如果您正在寻找的是在一段时间不活动后有效地将用户从您的应用程序中注销（或至少看起来像是被注销），那么您可以 p/invoke`GetLastInputInfo`以满足您的要求。

在 Timer 滴答事件中，您可以使用`GetLastInputInfo`返回最后一次检测到任何用户输入的时间。从 Environment.TickCount 中减去它会给你不活动的时间。如果它符合您注销用户的标准，那么您可以显示您的登录表单。

```
[DllImport("User32.dll")]
private static extern bool GetLastInputInfo(ref LASTINPUTINFO plii);

[StructLayout(LayoutKind.Sequential)]
internal struct LASTINPUTINFO
{
    public uint cbSize;
    public uint dwTime;
}

private void timer1_Tick_1(object sender, EventArgs e)
{
    var lastInputInfo = new LASTINPUTINFO();
    lastInputInfo.cbSize = (uint)Marshal.SizeOf(lastInputInfo);

    GetLastInputInfo(ref lastInputInfo);

    int inactivityThreshold = 20 * 60 * 1000;

    if ((Environment.TickCount - lastInputInfo.dwTime) > inactivityThreshold)
    {
        login2 lss = new login2();
        lss.ShowDialog(); 
    } 
} 
```

要解决表单出现多次的问题，只需使用布尔值来指示您当前是否正在登录用户，并将其用作您是否显示登录表单的标准的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T13:59:33.017

首先，添加一个函数来重置你的计时器：

```
private void ResetTimer()
{
    timer1.Stop();
    timer1.Start();
} 
```

调用时，它将重置计时器。

其次，为避免打开多个对话框，请使用相同的实例。将该登录表单的实例添加为类成员，然后使用它而不是每次都创建新的：

```
login2 lss = new login2();
private void timer1_Tick(object sender, EventArgs e)
{
    if (!lss.Visible)
    {
        lss.ShowDialog();
        ResetTimer();
    }
} 
```

如您所见，它将调用对话框，并且仅在它不可见时才调用以避免错误。它还会在用户退出对话框后重置计时器。

最后，要让它仅在“空闲”时倒计时，您需要在有任何操作时重置计时器。简单的情况是表单中每个控件的鼠标移动和按键：

```
this.Controls.Cast<Control>().ToList().ForEach(c =>
{
    c.MouseMove += (s1, e1) => ResetTimer();
    c.KeyPress += (s1, e1) => ResetTimer();
}); 
```

在主窗体的 Load 事件中，这将为所有控件分配事件处理程序，但如果您有嵌套控件，则必须使用递归来获取所有控件。

# php - 创建完整的 Google Chart JSON 数据表 - 从 MySQL 数据 - 使用自定义 PHP 函数 - 提供的工作示例 - 我需要这样做吗？

> ID：14303723
> 
> 赞同：1
> 
> 时间：2013-01-13T13:00:20.490
> 
> 标签：php, google-visualization, json

我正在做一个个人项目 - 使用 php 从 MySQL 获取数据，然后将其编码为 JSON 格式（包括列），然后通过 Ajax 将其加载到谷歌数据表中以进行可视化。

项目进展顺利，但我在 php.ini 中通过纯字符串操作进行了 JSON 编码。只需一条 SQL 和一个 php 函数即可为图表制作多个数据源。

我觉得我需要这个的原因有 1 个不好的原因，还有 2 个真正的原因 -

*   我是 Javascript 的新手
*   JSON_ENCODE（php 函数）似乎产生了日期值所需的错误格式。
    *   它输出日期（和日期时间）为：“2013-01-01 01:00:00”
    *   谷歌的文档似乎需要：“日期（2013,1,1,0,0,0）”
*   并且 JSON_Encode 没有为所需的列生成输出 - 包括根据 MySQL 结果数据类型分配数据类型。

问题：

在 JSON 的日期格式和列输出的上下文中（包括基于结果的数据类型）——我能比纯字符串操作更容易解决这些问题吗？

我已经在下面发布了我的代码 - 虽然很可怕 - 它的工作就像一个魅力。如果由于某种原因我确实做了一些好事，欢迎社区使用它。

它是 3 个 php 文件（尽管最后一个应该是 html），第一个文件只是填充了要在第二页中使用的自定义函数。

第二个 php 文件以 JSON/GoogleChart 格式从 My_SQL (echo DATA;) 转储数据。

最后一个文件/页面使用 ajax 从第二页获取数据，并将其插入到带注释的时间轴中。Jquery 设置在第三页，第一页是 MySQL 连接，第二页是你的 SQL。

```
<?php
// First Page/File: mysql_gc_functions.php
function mysql_loadresult($sql, $type){

// $sql - a string containing SQL to run against database
// $type - 0 for standard array load, 1 for JSON formatted string

$debug = false;

$result = mysql_query($sql) or die(mysql_error());
$numfields = mysql_num_fields($result);
$numrows = mysql_num_rows($result);
$br = '</br>';

$arr; // Array to Load Data Into where first index will contain headers
      // Where x is the column and y is the row
      // Row '0' contains Header Names

$datatypes; // Array to Load in Data Types

// Standard Array Loading

// Load Field Names
for ($x=0; $x < $numfields; $x++){
    $arr[$x][0] = mysql_field_name($result,$x);
    $datatypes[$x] = mysql_field_type($result,$x);
    if($debug == true){echo 'data type for ' . $arr[$x][0] . ': ' . $datatypes[$x] . '</br>';}
}

$y = 0; // Row Index
while ($data = mysql_fetch_array($result, MYSQL_NUM)) {// For Each Row
    $y++;
    for ($x=0; $x<$numfields; $x++){ // For Each Field
        $arr[$x][$y] = $data[$x]; // Load Query into php array
    }
}

// JSON formatted string
if ($type == 1) {
    /* JSON Format Example
    {
      "cols": [
            {"label":"Topping","type":"string"},
            {"label":"Slices","type":"number"}
          ],
      "rows": [
            {"c":[{"v":"Mushrooms"},{"v":3},
            {"c":[{"v":"Onions"},{"v":1}]},
            {"c":[{"v":"Olives"},{"v":1}]},
            {"c":[{"v":"Zucchini"},{"v":1}]},
            {"c":[{"v":"Pepperoni"},{"v":2}]}
          ]
    }

    mysql data type / google field type / Json value example:

        date:               date:           "Date(2012,12,1)"
        datetime:           datetime:       "Date(2012,12,1,23,59,59)"  <- Y,M,D,H,M,S - can do milliseconds as well (but not built)
        number:             int/real:       123456
        everything else:    string:         "EXAMPLE TEXT"

    */      
    $sColJason = '{"cols":[';
    $eColJason = '],';
    $ColExprS = '{"label":"';
    $ColExprE = '","type":"XXX"}';
    $colbuild = '';

    // Build Column Structure for JSON
    for ($x=0;$x<$numfields;$x++){

        if ($datatypes[$x] == 'date'){
            $tvar = str_replace('XXX', 'date', $ColExprE);
        } else if ($datatypes[$x] == 'int' OR $datatypes[$x] == 'real'){
            $tvar = str_replace('XXX','number',$ColExprE);
        } else if ($datatypes[$x] == 'datetime'){
            $tvar = str_replace('XXX','datetime',$ColExprE);
        } else {
            $tvar = str_replace('XXX','string',$ColExprE);
        }

        $str = $ColExprS . $arr[$x][0] . $tvar;
        if ($x != ($numfields - 1)){
            $str = $str . ",";
        }
        $colbuild = $colbuild . $str;
    }

    if($debug == true){echo $sColJason . $colbuild . $eColJason . '</br>';}

    $sRowJason = '"rows": [';
    $eRowJason = ']}';
    $RowExpr = '{"v":"XXX"}';
    $RowStart = '{"c":[';
    $RowEnd = ']}';
    $RowBuild = '';

    // Build Row Structure for JSON
    for ($y = 1; $y<$numrows;$y++){
        // build each column of row (field of record)
        $RowFieldBuild = '';
        for ($x=0;$x<$numfields;$x++){  
            $var = $arr[$x][$y];

            // assess how the data type needs to be treated
            if ($datatypes[$x] == 'date'){
                $var = mysql_googledate($var);
            } else if ($datatypes[$x] == 'int' OR $datatypes[$x] == 'real'){
                $var = $var;
            } else if ($datatypes[$x] == 'datetime') {
                $var = mysql_googleDtTm($var);
            } else {
                $var = '"' . $var . '"';
            }

            // concatenate the row string with populated values
            $RowFieldBuild = $RowFieldBuild . str_replace('"XXX"',$var,$RowExpr);
            if ($x != ($numfields-1)){
                $RowFieldBuild = $RowFieldBuild . ',';
            }
        }
        // Encapsulate the Record
        $RowBuild = $RowBuild . $RowStart . $RowFieldBuild . $RowEnd;
        if($y != ($numrows-1)){
            $RowBuild = $RowBuild . ',';
        }
    }
    // Encapsulate Entire Row Data
    $RowBuild = $sRowJason . $RowBuild . $eRowJason;
    if($debug == true){echo $RowBuild . '</br>';}

    return ($sColJason . $colbuild . $eColJason . $RowBuild);

} else { // Return Standard Array of Table Data
    return $arr;
}
}

function mysql_googledate($var){
$arr = preg_split("/-/",$var);
$month = intval($arr[1]);
$newStr = '"Date(' . $arr[0] . ',' . $month . ',' . $arr[2] . ')"';
return $newStr;
}
function mysql_googleDtTm($var){
$arr = preg_split("/-/",$var);
$tmArr = preg_split("/:/",$arr[2]);
$cm = ',';

$yr = intval($arr[0]);
$mon = intval($arr[1]);
$day = intval(substr($arr[2],0,2));

$hr = intval(substr($tmArr[0],-2));
$min = intval($tmArr[1]);
$sec = intval($tmArr[2]);

$newStr = '"Date(' . $yr . $cm . $mon . $cm . $day . $cm . $hr . $cm . $min . $cm . $sec . ')"';
return $newStr;
}

function mysql_localcon(){
$con = mysql_connect("localhost","root","1234");
if (!$con)  {
    die('Could not connect: ' . mysql_error());
}
return $con;
}

?>

<?php
// Second Page/File: data_ATL.php
Include('mysql_gc_functions.php');
  $sql = 'SELECT DATE_FIELD, VALUE_FIELD FROM DATABASE.TABLE';
  $con=mysql_localcon();
  $dataJason = mysql_loadresult($sql, 1);
  echo $dataJason;
?>

// THIS IS THE FINAL (3rd) OUTPUT FILE/PAGE - DISPLAYS ANNOTATED TIME LINE
<html>  
<head>   
<script type='text/javascript' src='http://www.google.com/jsapi'></script>
<script type="text/javascript" src="jquery.js"></script>  
<script type='text/javascript'>    
    google.load('visualization', '1', {'packages':['annotatedtimeline']});  
    google.setOnLoadCallback(drawChart);   
    function drawChart() {
        var jsonData = $.ajax({
            url: "data_ATL.php",
            dataType:"json",
            async: false
            }).responseText;

        var data = new google.visualization.DataTable(jsonData);    
        var chart = new google.visualization.AnnotatedTimeLine(document.getElementById('chart_div'));    
        chart.draw(data, 
            {
                displayAnnotations: true,
                annotationsWidth: 20,
                scaleType: 'maximized'      
            }
        );
    }
</script>  
</head>
<body>  
<div id='chart_div' style='width: 700px; height: 240px;'></div> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:56:22.350

我最近有这个完全相同的任务，并且能够创建一个基于 MySQL 查询返回的任何数据生成 Google 数据表的函数。**我只使用json_encode()**构建 JSON 有效负载- 没有特定的字符串操作。注意，我使用 mysqli 而不是 mysql，所以下面的一些内容可能与 mysql 略有不同。

以下是一些不太明显的方面：

*   为了确定 Google DataTable 列的“类型”，我使用了**mysqli_fetch_fields()** (http://php.net/manual/en/mysqli-result.fetch-fields.php)返回的数组的“类型”值. 然后，我编写了一个小函数，将这个 mysqli 类型与 Google 的 DataTable API 的等价物相匹配。因此，例如，如果 mysqli_fetch_fields() 返回：

    ```
    [0] => stdClass Object
    (
        [name] => Date
        [orgname] => date
        [table] => c
        [orgtable] => users
        [def] => 
        [db] => main
        [catalog] => def
        [max_length] => 10
        [length] => 10
        [charsetnr] => 63
        [flags] => 20617
        [type] => 10
        [decimals] => 0
    ) 
    ```

    您可以看到*类型*值为 10，对应于**MYSQLI_TYPE_DATE**。可以在此处找到类型常量的完整列表：http: [//php.net/manual/en/mysqli.constants.php](http://php.net/manual/en/mysqli.constants.php)

*   日期类型确实需要一些操作，因为 JSON 不支持 Javascript 日期对象（但 Google 的 API 确实支持“日期（Y，m，d，[h，i，s]）”，正如您所指出的。需要注意的一点是***MySQL 日期的月份参数应减 1***，因为 Javascript 日期对象从第 0 个月开始。为了提取日期，我使用了这个：

    ```
    $mysql_date = explode("-", $row[$i]);
    $mysql_date[1] = $mysql_date[1] - 1;
    if ($mysql_date[1] < 0) $mysql_date[1] = 11;
    $mysql_date = implode(",", $mysql_date);
    $value = "Date(" . $mysql_date . ")";
    array_push($c, array("v" => $value)); 
    ```

    **preg_split**工作正常，但请注意它速度较慢（如果您有一个非常大的数据集，这只是一个问题）。更多信息在这里： http: [//micro-optimization.com/explode-vs-preg_split](http://micro-optimization.com/explode-vs-preg_split)

*   到目前为止，唯一的字符串操作是处理日期，其他所有内容都存储在 PHP 数组中。收集完所有数据后，您可以调用 json_encode()。这样做的问题是，对于为 Google 表定义为“数字”的列， json_encode() 倾向于返回用双引号括起来的数字。为了强制数字被这样对待，我使用了一个简单的正则表达式：

    ```
    $json = json_encode($j);
    $json = preg_replace('/"(-?\d+\.?\d*)"/', '$1', $json); 
    ```

希望这可以帮助！

# cocoa-touch - 使用 iCloud 的 CoreData 中显示相同的默认数据

> ID：14303729
> 
> 赞同：0
> 
> 时间：2013-01-13T13:01:09.477
> 
> 标签：cocoa-touch, core-data, icloud

当应用程序在最合适的时间启动时，我将一个默认数据插入 coredata 数据库。之后，将应用程序安装到具有相同 Apple ID 的另一台设备时，会发生其他默认数据插入。结果，有 2 个默认数据。

我该如何解决这个问题？

# iis - 在 ASP.NET 上使用 wininet 读取 cookie

> ID：14303732
> 
> 赞同：0
> 
> 时间：2013-01-13T13:01:30.187
> 
> 标签：iis, wininet

我的 ASP.NET 应用程序需要 cookie 检查功能。应用程序将检查 Internet Explorer 中是否存在来自外部站点（SharePoint Online 站点）的 cookie。

我遵循了[这篇文章](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/0c6a0ab4-ac8c-4dfb-8e67-f07118d7d7db)`wininet.dll` `InternetGetCookie`中的方法，并且在我运行调试模式时它可以工作。但是，当我在此方法上部署应用程序时，无法再读取 cookie，它总是返回空 cookie。`IIS`

是否`wininet`适用于 ASP.NET Web 应用程序？如果是这样，上面的 get cookie 方法有什么问题？如果没有，是否有任何其他解决方案可以从外部站点读取 cookie（我已经尝试过`WinHTTP`，但它带有一些安全警告）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T13:04:38.273

> wininet 是否适用于 ASP.NET Web 应用程序？

您无需使用任何`wininet.dll`来读取 cookie。在 ASP.NET 应用程序中，您可以直接使用该[`Request.Cookies`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.cookies.aspx)属性来检查传入的 cookie。

例如：

```
protected void Page_Start(object sender, EventArgs e)
{
    var cookie = Request.Cookies["cookie_name"];
    if (cookie != null)
    {
        string cookieValue = cookie.Value;
        ...
    }
} 
```

# regex - 通过 id 重定向没有任何作用，django 让我发疯

> ID：14303737
> 
> 赞同：1
> 
> 时间：2013-01-13T13:02:17.317
> 
> 标签：regex, django

我有一些 Python 的背景知识，并且一直在尝试编写一些 Django 教程，因为虽然我了解了大致的概念，但我仍然是初学者，所以我认为遵循一些示例是一种很好的做法。

我目前正在研究如何构建一个简单的博客应用程序的“Django by example”教程（这里有一个链接： http: [//lightbird.net/dbe/blog.html](http://lightbird.net/dbe/blog.html)），我已经到达了我的部分'正在处理每个帖子的页面。

他在那里用重定向链接做了一件非常奇怪的事情，所以我认为最好按照 Django 文档对它的民意调查应用程序所做的事情。事情就是这样 - 它根本不起作用。不仅如此，我没有收到错误，所以我无法判断出了什么问题，而真正发生的事情对我来说绝对是零意义。

所以这是我的 urls.py 代码：

```
urlpatterns = patterns('',
    url(r'^blog/', 'blog.views.main'),
    url(r'^blog/(?P<post_id>\d+)/$', 'blog.views.post'),
) 
```

这是我的views.py 代码：

```
def main(request):
    """Main listing."""
    posts = Post.objects.all().order_by("-created")
    paginator = Paginator(posts, 2)

    try: page = int(request.GET.get("page", '1'))
    except ValueError: page = 1

    try:
        posts = paginator.page(page)
    except (InvalidPage, EmptyPage):
        posts = paginator.page(paginator.num_pages)

    return render_to_response("list.html", dict(posts=posts, user=request.user))

def post(request, post_id):
    post = Post.objects.get(pk=post_id)
    d = dict(post=post, user=request.user)
    return render_to_response("post.html", d) 
```

这是（我的一部分）html代码：

```
{% for post in posts.object_list %}
    <div class="title">
        <a href="/blog/{{ post.id }}/">{{ post.title }}</a></div>
            <ul>
                <div class="time">{{ post.created }}</div>
                <div class="body">{{ post.body|linebreaks }}</div>
            </ul>
{% endfor %} 
```

所以我的主页看起来不错，它的开发 url 现在是 127.0.0.1:8000/blog，当我点击帖子标题（比如帖子编号 3）时，它会转到 127.0.0.1:8000/blog/3，就像它应该的那样。

但它并没有得到新的“post.html”模板，而是停留在该死的主页上。尝试更改 url 并直接找到它也不起作用。

就好像 url 模式查找并找到了第一个选项，说“是的，足够好”并且没有费心去运行其他选项。奇怪的是，如果我更改 urls.py 中的帖子视图 url 并去掉“博客”部分，如下所示：

```
url(r'^(?P<post_id>\d+)/$', 'blog.views.post') 
```

它太棒了。但我想在我的网址中保留“博客”部分，无论如何我都不知道自己做错了什么，所以即使我只是“随心所欲”，我仍然想尝试了解发生了什么在这。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:08:48.720

我认为您应该`$`在第一个网址的末尾添加一个：

```
urlpatterns = patterns('',
    url(r'^blog/$', 'blog.views.main'),
    url(r'^blog/(?P<post_id>\d+)/$', 'blog.views.post'),
) 
```

或者您可以将第二个网址放在第一个网址之前。Django 正在从上到下寻找匹配项，并将选择第一个匹配项。

```
urlpatterns = patterns('',
    url(r'^blog/(?P<post_id>\d+)/$', 'blog.views.post'),
    url(r'^blog/$', 'blog.views.main'),
) 
```

# java - 当我按 # 拆分字符串的 ArrayList 时，最后一个字段不正确

> ID：14303739
> 
> 赞同：2
> 
> 时间：2013-01-13T13:03:22.417
> 
> 标签：java, string, text, split

这里是java新手。我正在尝试将字符串拆分为对象中的变量。正如标题所说，字符串中的最后一个字段与第一个字段一起拆分。

我的 txt 文件中的一行所有其他行都是相同的。

这是输出：

```
Rolling Stone#Jann Wenner#Bi-Weekly#Boston#9000
Rolling Stone#Jann Wenner#Bi-Weekly#Philadelphia#8000
Rolling Stone#Jann Wenner#Bi-Weekly#London#10000
The Economist#John Micklethwait#Weekly#New York#42000
The Economist#John Micklethwait#Weekly#Washington#29000
Nature#Philip Campbell#Weekly#Pittsburg#4000
Nature#Philip Campbell#Weekly#Berlin#6000

    Exception in thread "main" java.lang.NumberFormatException: For input string: "9000 Rolling Stone" 
```

9000 应该是一个整数值。最后一个索引跳到下一行，因为没有 # 我该怎么办？

我相信这么多代码就足够了

```
 static ArrayList<String> al = new ArrayList<String>(); // Consists of lines of the text file
    static ArrayList<Magazine> bl = new ArrayList<Magazine>(); // Consists of Magazine objects

for (int i = 0; i < al.size(); i++) {
                String result[] = al.get(i).split("\\#");
                for (int j = 0; j < result.length; j++) {
                    System.out.println(result[0] + "1 " + result[1] + "2 " +  result[2] + "3 " +  result[3] + "4 "+  result[4]);
                    int num = Integer.parseInt(result[4]); 
```

我在 split("\#") 附近有蜘蛛感觉，但我不知道是什么......

粘贴箱：http : [//pastebin.com/Vp9T6aSd](http://pastebin.com/Vp9T6aSd)

```
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.Scanner;

public class Magazine {

    private String MagazineName;
    private String Publisher;
    private String Frequency;
    private String City;
    private String objectName = "mg" + loopCount;
    private int Distribution;
    private static int loopCount = 0;

    static ArrayList<String> al = new ArrayList<String>(); // Consists of lines of the text file
    static ArrayList<Magazine> bl = new ArrayList<Magazine>(); // Consists of Magazine objects

    private static void readData() throws FileNotFoundException {
        java.io.File file = new java.io.File(
                "/Users/henrydang/Desktop/Zines.txt");
        Scanner sc = new Scanner(file);
        while (sc.hasNext()) {
            sc.useDelimiter("\\n");
            String line = sc.next();
            System.out.println(line);
            al.add(line);
            Magazine objectName;

            for (int i = 0; i < al.size(); i++) {
                String result[] = al.get(i).split("#");
                for (int j = 0; j < result.length; j++) {
                    System.out.println(result[0] + "1 " + result[1] + "2 " +  result[2] + "3 " +  result[3] + "4 "+  result[4]);
                    int num = Integer.parseInt(result[4]);

                    objectName = new Magazine();
                    objectName.setMagazine(result[0]);
                    objectName.setPublisher(result[1]);
                    objectName.setFrequency(result[2]);
                    objectName.setCity(result[3]);
                    objectName.setDistribution(num);
                    bl.add(objectName);             
                }

            }
            loopCount++;
            sc.close();

        }
    }

    public Magazine() {

    }

    public void setMagazine(String name) {
        this.MagazineName = name;
    }

    public void setPublisher(String name) {
        this.Publisher = name;
    }

    public void setFrequency(String name) {
        this.Frequency = name;
    }

    public void setCity(String name) {
        this.City = name;
    }

    public void setDistribution(int num) {
        this.Distribution = num;
    }

    public String getMagazine() {
        return MagazineName;
    }

    public String getPublisher() {
        return Publisher;
    }

    public String getFrequency() {
        return Frequency;
    }

    public String getCity() {
        return City;
    }

    public int getDistribution() {
        return Distribution;
    }

    public static void main(String args[]) throws FileNotFoundException {
        readData();
    }

} 
```

编辑：更多信息已解决：文本文件以 /r/n 而不是“/n”结尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T13:09:40.683

所以亨利...

您的代码有几个问题：

1.  `while (sc.hasNext()){}`sc.close() 在循环内被调用。
2.  在 sc.hasNext() 内部调用 sc.setDelimiter() 有点阴暗，但我猜它`.next()`在设置分隔符后调用它会起作用。
3.  我们发现问题出在输入文件本身，而不是您的代码本身。如果您正在编写一些特定于平台的代码（例如使用`\n`分隔符），请务必仔细检查您的文件。

这是您的代码，我会以正确/理想的方式为您的代码使用扫描仪：

```
private static void readData() throws FileNotFoundException {  
  java.io.File file = new java.io.File("Zines.txt");  
  Scanner sc = new Scanner(file);  
  while (sc.hasNextLine()) {  
    String line = sc.nextLine();  
  }  
  sc.close();  
} 
```

希望这一切都有帮助！

编辑：忽略下面的评论对话。我们没有生气，我重做了答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T13:11:00.020

我想你可以试试：

```
String result[] = al.get(i).split("#\\s*"); 
```

每当出现“#”时，它将分隔子字符串。

# sql-server - 为什么不加载 SQL Server CE？

> ID：14303740
> 
> 赞同：0
> 
> 时间：2013-01-13T13:03:24.580
> 
> 标签：sql-server, windows, sql-server-ce

我在 Windows 7 上安装了 SQL Server Compact 3.5（它是在 IIS 之前首先安装的，但我在 IIS 运行后重新安装了它）。然后我创建了一个虚拟目录并将其配置为匿名访问，并为用户选择了我的 Windows 登录名。当我尝试通过在浏览器上加载“pcname/sqlce/sqlcesa35.dll”来测试安装时，它会尝试加载很长时间，然后才会收到“超时”消息。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:03:40.867

通过重新安装使其正常工作，但出现 401.2 错误。通过添加和配置 IUSR 用户（默认在 Web Syn 向导中）到 sqlce 虚拟目录的权限（通过 IIS 完成）来修复该问题。

# iphone - 通过命令行将 IPA 推送到设备（在 xcodebuild 之后）？

> ID：14303741
> 
> 赞同：13
> 
> 时间：2013-01-13T13:03:24.673
> 
> 标签：iphone, ipad, command-line, synchronization, xcodebuild

是否可以通过命令行将 IPA 推送到设备？

IPA 是使用开发人员证书从命令行构建的，`xcodebuild`并使用开发人员证书进行签名。该设备没有越狱，并且已被配置用于开发。在交付 Bundle 的情况下，我[使用 xcrun 按 Ad-Hoc 和 App Store IPA](http://www.bdunagan.com/2011/12/12/ad-hoc-and-app-store-ipas-with-xcrun/)修复它。

我知道[fruitstrap](https://github.com/ghughes/fruitstrap)。我不想从 IPA 中剥离 App Bundle（[fruitstrap](https://github.com/ghughes/fruitstrap)要求），也不想使用[fruitstrap](https://github.com/ghughes/fruitstrap)提供的“调试钩子” 。

问题类似于[通过命令行在 iphone 设备中安装应用程序](https://stackoverflow.com/questions/7481456/install-application-in-iphone-device-through-command-line)，但我需要 Apple 工具。

到目前为止，我只找到了使用 iTunes 的手动方法。（正如@fanneyward 提供的 - 移动野生动物园）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T08:29:06.740

看看他的回答：

[如何使用命令行将 ipa/app 文件安装到 iPhone 中？](https://stackoverflow.com/a/14652288/1040553)

libimobiledevice 的第三个解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:43:22.563

如果您考虑使用[Test Flight App](http://testflightapp.com)将构建分发到设备（从您的问题中不清楚它是为您自己还是为 beta 测试人员），[Ray Wenderlich](http://raywenderlich.com)有[一篇关于自动化测试的精彩帖子](http://www.raywenderlich.com/22816/beginning-automated-testing-with-xcode-part-22)，向您展示如何自动使[Jenkins](http://jenkins-ci.org/)推送构建试飞。这并不完全符合您的要求，但绝对是一个不错的选择。

# c# - 取决于 table.Tablename

> ID：14303744
> 
> 赞同：0
> 
> 时间：2013-01-13T13:03:43.383
> 
> 标签：c#, for-loop, datatable, dataset

`loop`如果相关表被调用，我想运行`table1`or `table2`。目前，我正在这样做：

```
foreach (DataTable table in DtSet.Tables)
{
    if ((table.TableName == "table1")||(table.TableName == "table2"))
    {
        foreach (DataRow sourceRow in table.Rows)
        {
        }
    }
} 
```

有没有办法修改此代码，以便在不必遍历整个数据集的情况下完成名称检查？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:09:11.263

您可以访问接受表名作为参数的`TableName`使用[索引器。](http://msdn.microsoft.com/en-us/library/58st33fb.aspx)索引器仍然在内部使用循环。

```
var table1 = dtSet.Tables["table1"];
var table2 = dtSet.Tables["table2"];

if (table1 != null)
{
    DoOperation(table1);
}

if (table2 != null)
{
    DoOperation(table2);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T13:11:52.387

您可以遍历两个名称（而不是遍历所有表），并且对于每个名称，尝试`DtSet.Tables`按名称获取表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T13:08:15.630

使用包含：

```
 if ((table.TableName.Contains("table1"))||(table.TableName.Contains("table2"))) 
{
    foreach (DataRow sourceRow in table.Rows) 
    {
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T13:08:51.760

你可以写

```
if ((DtSet.Tables.Contains("table1")
{
    foreach (DataRow sourceRow in DtSet.Tables["table1"])
    {
    }
} 
```

它内部仍然会有一个循环。但会更干净。

完全没有循环是不可能的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-13T13:20:57.867

诸如此类的东西怎么样......

```
ProcessTableData(DtSet.Tables["table1"]);
ProcessTableData(DtSet.Tables["table2"]);    

void ProcessTableData(DataTable dataTable)
{
    if (dataTable == null)
        return;

    foreach (DataRow sourceRow in dataTable.Rows)
    {
    }
} 
```

# php - 确定字符串或数组中的潜在重复项

> ID：14303745
> 
> 赞同：0
> 
> 时间：2013-01-13T13:03:44.487
> 
> 标签：php

我正在使用 PHP 将 RSS 提要解析到 MySQL 数据库中。在将新条目插入数据库之前，我想检查（通过比较项目的标题）在 MySQL 数据库中是否已经有类似的条目可用并相应地标记它们。现在我不知道如何确定所列示例中的候选者是源的潜在重复项。

**例子：**

资源：

*   CES: Panasonic und Technisat neu in der Smart TV Alliance

候选人：

*   Panasonic、IBM、Specific Media、ABOX42 和 TechniSat ... - 区域 DVD
*   CES 2013：松下、IBM、特定媒体、ABOX42 和 TechniSat ...
*   Panasonic ABOX42 IBM 特定媒体和 TechniSat ExpandBuild Once ...
*   松下、IBM、Specific Media、ABOX42 和 TechniSat erweitern die ...
*   ...

已经尝试过array_intersect和levenshtein()，但是结果不是很准确。如果没有更多的想法。

最好的，安德烈亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T13:09:45.297

只是大声思考并给出一些指示：

*   删除除数字、字母和空格之外的所有内容

    ```
    $title = preg_replace('/[^\w\d ]+/', '', $title); 
    ```

*   分解成一个数组

    ```
    $parts = preg_split('/\s+/', $title); 
    ```

*   您现在可以选择计算重复的单词：`array_count`

*   最后，您可以将生成的数组相互比较并检查重复项，例如 80% 的可能性（80% 的数组项匹配）

# php - 如何使图像回声与表格行中的下一个图像对齐

> ID：14303750
> 
> 赞同：0
> 
> 时间：2013-01-13T13:03:54.940
> 
> 标签：php, css, mysql, html-table

我在让我的图像从我的 mySQL 数据库中正确排列时遇到问题。我遇到的问题是，我基本上想从 CMS 加载此页面上的 24 张图像。我将图像加载到一个设计为每行有 4 个图像的表格中。问题：第一行有 2 个图像，第二行有 1 个图像，第三行有 3 个图像，第四行有 1 个图像，第五行有 3 个图像，第六和第七行每行有 1 个图像。我每行无法获得 4 张图像。任何人都可以帮忙吗？

```
<!-- IMAGE GALLERY -->

    <h2 class="text1">Image Gallery</h2>
    <p>Click any image to open up a larger version</p>
    <div class="gallery">
        <?php
            $dbc = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME); 
            $query = "SELECT * FROM cmhimage ORDER BY id DESC";
            $data = mysqli_query($dbc, $query);
            ?><table><?php 
            $level = 1;
            while ($row = mysqli_fetch_array($data)) { 
                $description = $row['capt'];
                $photo = $row['file'];
                $count = 1;
                $level = $level + $count;

                if (($level == 4) || ($level == 8) || ($level == 12) || ($level == 16) || ($level == 20) || ($level == 24)){
                    echo '<tr>';
                }

                 // Display the data
                echo '<td><table><tr><td><a href="manage/image/' . $photo . '" target="_blank"><img class="imgcontain" src="manage/image/' . $photo .'" border="0"/></a></td></tr></td><br/>';  
                echo '<td><tr><td><p class="caption">' . $description .'</p></tr></td></table></td>';  
                if (($level == 4) || ($level == 8) || ($level == 12) || ($level == 16) || ($level == 20) || ($level == 24)){
                    echo '</tr>';   
                    }

            }
            mysqli_close($dbc);

        ?>
       </table> 
```

如果这是问题，这里是 CSS。

```
.gallery {
width: 525px;
}
.imgcontain {
padding-right:15px; 
float: left;
width: 110px;
height: 110px
}
.caption {
font:bold 78% arial,helvetica,sans-serif; 
text-align:center; 
position: relative;
right: 10px;
color:#056063;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:42:15.800

尝试这个

```
<h2 class="text1">Image Gallery</h2>
<p>Click any image to open up a larger version</p>
<div class="gallery">
    <?php
        $dbc = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME); 
        $query = "SELECT * FROM cmhimage ORDER BY id DESC";
        $data = mysqli_query($dbc, $query);
        ?>
    <table><tr>
        <?php 
        $level = 1;
        while ($row = mysqli_fetch_array($data)) { 
            $description = $row['capt'];
            $photo = $row['file'];
            $count = 4; //items per row

            if (($level > $count) && $level%$count==1){
                echo '
        </tr>
        <tr>';
            }

             // Display the data
//part of code from mercsen
echo '<td>';
echo ' <table>';
echo '  <tr>';
echo '    <td>';
echo '       <a href="manage/image/' . $photo . '" target="_blank"><img class="imgcontain" src="manage/image/' . $photo .'" border="0"/></a>';
echo '   </td>';
echo '   <td>';
echo '     <p class="caption">' . $description .'</p>';
echo '   </td>';
echo '  </tr>';
echo ' </table>';
echo '</td>';
            $level++;
        }
        mysqli_close($dbc);

    ?>
       </tr>
   </table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T13:29:43.297

有很多问题。首先代码几乎不可读

使用这种结构，第一个 tr 不显示而不是

```
 if (($level == 4) || ($level == 8) || ($level == 12) || ($level == 16) || ($level == 20) || ($level == 24)) 
```

尝试

```
if($level == 1 || $level % 4 == 0) 
```

而不是

```
echo '<td><table><tr><td><a href="manage/image/' . $photo . '" target="_blank"><img class="imgcontain" src="manage/image/' . $photo .'" border="0"/></a></td></tr></td><br/>';
echo '<td><tr><td><p class="caption">' . $description .'</p></tr></td></table></td>'; 
```

尝试这个

```
echo '<td>';
echo ' <table>';
echo '  <tr>';
echo '    <td>';
echo '       <a href="manage/image/' . $photo . '" target="_blank"><img class="imgcontain" src="manage/image/' . $photo .'" border="0"/></a>';
echo '   </td>';
echo '   <td>';
echo '     <p class="caption">' . $description .'</p>';
echo '   </td>';
echo '  </tr>';
echo ' </table>';
echo '</td>'; 
```

和

```
if (($level == 4) || ($level == 8) || ($level == 12) || ($level == 16) || ($level == 20) || ($level == 24)){
                    echo '</tr>';   
                    } 
```

像第一个。

尝试格式化您的代码。有了这个空间，您会看到许多单元格和行没有关闭。

编辑：在 while 开始之前放置 $count = 1 ！在while的最后一行：

```
$count++; 
```

# java - 带有按钮和 EditText 的 ListView

> ID：14303753
> 
> 赞同：0
> 
> 时间：2013-01-13T13:04:34.100
> 
> 标签：java, android, xml

我有一个 XML 布局，其中包含一个 EditText，用户可以在其中键入一个人名，然后是一个按钮，它将在数据库中搜索它，然后在其下方的 ListView 中显示结果。

我在 OnClickListener 上遇到错误：

```
searchButton.setOnClickListener(this); 
```

我读过需要使用不同的“OnClickListener”导入？但是我已经改变了它，它仍然给我一个 NullPointerException 错误。

谁能告诉我如何使这个布局一起工作？

这是我的 XML 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/inputSearchName"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/txtsearch"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Type Name To Search:"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/inputName"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10" >

    <requestFocus />
</EditText>

<Button
    android:id="@+id/btnSearchName"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Search" />

<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView>

</LinearLayout> 
```

我的搜索类：

```
package com.example.flybase2;

import android.app.Activity;
import android.app.ListActivity;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.widget.SimpleCursorAdapter;
import android.view.View;

// Imported OnClickListener
import android.view.View.OnClickListener;

import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;

//Extends ListActivity, Implements OnClickListener. Above Import for OnClickListener in     imports.
public class search extends ListActivity implements OnClickListener {

Button searchButton;
EditText searchName;
ListView searchedListResults;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.search);

    searchButton = (Button) findViewById(R.id.btnSearch);   
    searchName = (EditText) findViewById(R.id.inputName);   

    //ERROR: OnClickListener is causing a crash.
    searchButton.setOnClickListener(this);

}

@Override
public void onClick(View clickedSearchButton) {

String searchedName = searchName.getText().toString();

searchedListResults = (ListView)findViewById(android.R.id.list);

DBHandler DBsearchRef = new DBHandler(this, null, null);

DBHandler search = new DBHandler(this, null, null);

search.open();
Cursor cursor = search.searchOnName(searchedName);

startManagingCursor(cursor);

@SuppressWarnings("static-access")
String [] from = new String [] {DBsearchRef.KEY_NAME, DBsearchRef.KEY_TEL, DBsearchRef.KEY_EMAIL, DBsearchRef.KEY_COMMENTS};
int [] to = new int [] {R.id.txtNameList, R.id.txtTelList, R.id.txtEmailList, R.id.txtCommentsList};

@SuppressWarnings("deprecation")
SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this, R.layout.search, cursor, from, to);
searchedListResults.setAdapter(cursorAdapter);

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:09:18.627

在你的 onCreate 你必须改变

```
searchButton = (Button) findViewById(R.id.btnSearch); 
```

和

```
searchButton = (Button) findViewById(R.id.btnSearchName); 
```

# jquery - 选择文件时获取文件列表对象Jquery

> ID：14303756
> 
> 赞同：2
> 
> 时间：2013-01-13T13:05:06.357
> 
> 标签：jquery, filelist

当拖放文件`<div>`以获取我使用的文件列表对象`var files=e.originalEvent.dataTransfer.files;`时，但从上传窗口中选择文件时，我不知道该使用什么。

检查[这个](http://jsfiddle.net/qdJ2T/)jsfiddle。

我应该使用什么来获取文件列表`<input type="file">`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T13:10:49.160

任何 jQuery 对象都可以使用 [] 访问它的 DOM 元素，例如

```
$('input[type=file]')[0].files; 
```

对于您的小提琴，它将是：

```
var files = this.files; 
```

在这种情况下不需要 jQuery，因为`change`事件

查看更新的小提琴[http://jsfiddle.net/qdJ2T/1/](http://jsfiddle.net/qdJ2T/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-21T07:15:06.323

访问 FileList 对象的不同方法：

```
$("#btStartUpload").on("click", function(evt) {        

        var filesSelected = document.getElementById('btInput').files; // FileList object
        var filesSelected = $('#btInput').prop('files'); // with jQuery
        var filesSelected = $('#btInput')[0].files; // with jQuery
        var filesSelected = $('input[type=file]')[0].files;  // with jQuery
        console.log(filesSelected);

        // action
    }); 
```

# hibernate - Hibernate 3.6 sessionFactory.getAllClassMetadata() 为空

> ID：14303758
> 
> 赞同：2
> 
> 时间：2013-01-13T13:05:14.980
> 
> 标签：hibernate, persistence, seam

我已经建立了几个实体，例如。

```
@Entity
@Table
public class Question implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    private String question;

    @OneToMany(mappedBy = "question", fetch = FetchType.EAGER)
    private List<Answer> answers = new ArrayList<>();

    //getter, setter, custom methods
} 
```

**组件.xml**：

```
 [...]

    <persistence:hibernate-session-factory name="sessionFactory"/>
    <persistence:managed-hibernate-session name="session"
                                           session-factory="#{sessionFactory}"/>
    [...] 
```

**持久性.xml**：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- Persistence deployment descriptor for dev profile -->
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
             version="2.0">

    <persistence-unit name="seam_helloworld" transaction-type="JTA">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <jta-data-source>java:/firstjsf</jta-data-source>
        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
            <property name="hibernate.hbm2ddl.auto" value="update"/>
            <property name="hibernate.show_sql" value="true"/>
            <property name="hibernate.format_sql" value="true"/>
            <property name="jboss.entity.manager.factory.jndi.name" value="java:/seam_helloworldEntityManagerFactory"/>
            <property name="hibernate.connection.useUnicode" value="true"/>
            <property name="hibernate.connection.characterEncoding" value="UTF-8"/>
            <property name="jboss.as.jpa.providerModule" value="org.hibernate:3"/>
        </properties>
    </persistence-unit>

</persistence> 
```

当我调用 sessionFactory.getAllClassMetadata() 时，我得到的只是一个零大小的地图，同样 sessionFactory.getClassMetadata(Question.class) 返回 null。

我该如何解决这个问题？我使用 Hibernate 3.6、Seam 2.3、JBoss AS 7.1.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:36:06.037

尝试在 persistence.xml 中包含 Question 和 Answer 类

# ios5 - Apple 对程序化下载的要求

> ID：14303760
> 
> 赞同：2
> 
> 时间：2013-01-13T13:05:38.867
> 
> 标签：ios5, download, connection

我的应用程序正在从 Web 下载数据，例如 JSON、图片等。安装时数据量应该超过 50mb。

对于那些使用 3G 连接的人来说，这将是昂贵的。我想我的应用程序需要找出互联网连接的类型，我被告知 Apple 对下载有自己的要求，但我无法从互联网上找到任何有用的信息。

除此之外，我的应用程序提供了一个将壁纸下载到图片库的选项，我想我此时也需要检查连接类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:40:03.783

我从您的另一个问题中推测您已经发现了[Reachability](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)，您可以从中确定您是如何连接到 Internet 的。

在回答您的另一个问题时，是的，据报道，Apple 不鼓励通过蜂窝连接下载过多数据的应用程序。关于在 mobileorchard.com上[避免 iPhone 应用被拒绝，他们建议：](http://mobileorchard.com/avoiding-iphone-app-rejection-from-apple/)

> 如果您的应用程序通过蜂窝网络下载数据，请确保您没有使用太多带宽。多少是太多了？好吧，没有确切的数字，但 Apple 的技术支持人员建议我每 5 分钟的活动不要超过 4.5 兆数据。您可以通过进入您的 iPhone 设置、选择 General->Usage 菜单并清除统计信息来测试您的应用程序的使用情况。然后运行您的应用程序 5 分钟，返回此屏幕并查看统计信息。此外，为了获得最准确的数字，您应该在运行测试时关闭手机上的任何其他网络活动（例如电子邮件或 MobileMe 更新）。

我在其他地方也看到了每五分钟活动 4.5 mb 的蜂窝带宽限制，尽管没有任何正式的 Apple 指南（例如他们的[App Store 指南](https://developer.apple.com/appstore/resources/approval/guidelines.html)）。

# javascript - 读取选择框的选定值并将其传递给jsp

> ID：14303761
> 
> 赞同：-1
> 
> 时间：2013-01-13T13:05:39.933
> 
> 标签：javascript, jsp, drop-down-menu, selectedvalue

我对 JSP、HTML 很陌生……并且有一个问题：

我有一个 JSP，我正在尝试从 HTML 选择框中读取选定的值，例如使用 JavaScript：

```
<form name="ListForm" action=""> 
<select name="country" size="6">
<%
    String[] testArray = {"Germany", "Russia", "China", "Iran", "USA", "Israel"};
    for (int i = 0; i < testArray.length; i++) {
%>
        <option value=<%=testArray[i]%>>
        <%= testArray[i] %> 
        </option>
<%
    }
%>
</select> 
</form> 
```

这是 JavaScript：

```
<script type="text/javascript">
    function getSelectedValue() {
        var e = document.getElementById("country");
        return e.options[e.selectedIndex].text;
    }
</script> 
```

现在我想将此字符串传递给另一个 JSP：

```
<% 
    String testVar = request.getParameter("country");
    session.setAttribute("varName", testVar); 
%> 
```

但这不起作用。你知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T13:20:57.313

一个可能的问题是您的选择菜单有名称`country`但没有 id `country`。因此你不会得到选择菜单`document.getElementById("country");`

您可以通过在`<select>`标签中添加 id 来解决此问题：

```
<select id="country" name="country" size="6"> 
```

但是，您不需要 javascript 将所选值发送到服务器。

您应该在表单中添加一个提交按钮：

```
<input type="submit" /> 
```

并且不要忘记`action`在您的`<form>`标签中配置：

```
<form name="ListForm" action="[server url]"> 
```

# node.js - setTimeout 在 nodeJS 中不起作用

> ID：14303762
> 
> 赞同：3
> 
> 时间：2013-01-13T13:06:18.840
> 
> 标签：node.js, settimeout

我正在编写一个基于模块（作业分配）的小型动态 HTTP 服务器，如果服务器用户在两秒钟后没有调用`net`，它会发送响应。`408``response.end()`

无论我尝试什么，都不会调用该函数。这是另一个代码，演示了我在程序中尝试做的事情：

```
var NET = require("net"); 
var server = NET.createServer(function(socket){
    console.log("In connectionHandler");
    socket.on('data',function(data) {
        console.log("New data");
        var timer = setTimeout(function(end){
            console.log("INSIDE TIMEOUT FUNCTION");
            if (end) {
                return;
            }
            throw new ERROR.ServerError('408',' Request Timeout','The \
            server has timedouted');
            },10,true);
        for (var t = 0 ; t < 100000000000 ; t++){}
        clearTimeout(timer);
    })

});

server.listen(4000, function() {
    console.log("server bound");
}); 
```

因此，超时设置为 10 毫秒，然后是一个很长的循环，但这不起作用。

为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T13:22:46.037

回调永远不会被调用，因为 setTimeout 是异步的。当这个“回合”结束时，计时器被激活，你在回合结束前清除超时。

您应该首先阅读有关 javascript 的事件驱动架构的信息。[这个教程](http://javascript.info/tutorial/events-and-timing-depth)将是一个好的开始。这对于解决您的超时问题至关重要。

# python - 将两个 matplotlib figure.Figure 或 axes.Axes 对象合并为一个新对象

> ID：14303766
> 
> 赞同：3
> 
> 时间：2013-01-13T13:06:28.123
> 
> 标签：python, matplotlib

我有一个返回 Figure 对象的外部函数，在这种情况下，每个 Figure 对象都由一个 Axes 对象组成。
我想组成一个由这两个图形组成的新图形（比如说水平连接）。
所以理想情况下，我想说：

```
fig1, fig2, joined = CreateFig( data1 ), CreateFig( data2 ), Figure()
subp1, subp2 = joined.add_subplot( 121 ), joined.add_subplot( 122 )
subp1, subp2 = fig1.get_axes()[0], fig2.get_axes()[0]
joinedFig.savefig( 'joined.eps' ) 
```

显然，这不起作用，因为检索到的轴属于`fig1`and `fig2`，而不是`joinedFig`。
轴也不能仅由 复制`copy.deepcopy()`。

在我的示例中，我指的是`figure.Figure()`实例化。虽然搜索确实让我看到这`pyplot.figure()`是开发团队推荐的实例化技术，但它并没有改变问题：有没有办法通过复制的组合来进行`Axes`/`Figure`复制构造和构造？`Figure``Axes`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T14:26:08.433

可以修改`CreateFig`吗？如果是这样，有一个简单的解决方案：首先创建所需的图形和轴，然后将轴传递给`CreateFig`，然后让`CreateFig`操作`axes`对象：

```
import matplotlib.pyplot as plt
import numpy as np

def CreateFig(data, ax):
    ax.plot(data)

fig, axs = plt.subplots(1, 2)
data = np.sin(np.linspace(0,2*np.pi,100))
CreateFig(data, axs[0])
data = np.linspace(-2,2,100)**2
CreateFig(data, axs[1])
plt.show() 
```

![在此处输入图像描述](../Images/08dcff48c1c19e2d169ecbdbfc92ce3d.png)

# android - 广播接收者意图过滤器

> ID：14303770
> 
> 赞同：1
> 
> 时间：2013-01-13T13:07:17.350
> 
> 标签：android, intentfilter

当我希望服务每 5 分钟运行一次而不需要重新启动时，我应该在广播接收器中使用哪个意图过滤器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:32:59.877

使用 AlarmManager 的示例

设置闹钟

```
private void setAlarm(Context ctx, long timeToRestoreLivesInMillis) {
        int perion = 1000;
        AlarmManager am = (AlarmManager)ctx.getSystemService(Context.ALARM_SERVICE);

        Intent i = new Intent(ctx, OnAlarmReceiver.class);
        PendingIntent pi = PendingIntent.getBroadcast(ctx, 0, i, 0);

        am.set(AlarmManager.RTC_WAKEUP, period, pi);
} 
```

和一些接收者将收到一个意图

```
public class OnAlarmReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        // do something
    }
} 
```

并且不要忘记在`Manifest.xml`

```
<receiver
    android:name=".utils.OnAlarmReceiver"
    android:enabled="true"
    android:exported="false" >
</receiver> 
```

阅读文档以获取方法解释，我很久以前就使用过它。

# c - C中的一流标签？

> ID：14303771
> 
> 赞同：0
> 
> 时间：2013-01-13T13:07:27.273
> 
> 标签：c, jvm, label

嘿，我想知道是否有人可以帮助我使用 C 中的一流标签。

我目前正在尝试从内存（AVR 设备的闪存）中读取 java 字节码，我想将每条指令视为一个标签，并通过使用 goto 语句并跳转到适当的标签来调度指令。

但问题是我用来从内存中读取指令的函数返回一个无符号字节。

```
u08_t nvmfile_read08(void *addr) {
  u08_t val;
  addr = NVMFILE_ADDR(addr);  // remove marker (if present)
  memcpy_P((u08_t*)&val, (PGM_P)addr, sizeof(val));
  return val;
}

instr = nvmfile_read08(pc); 
```

所以我的问题是如何将 instr 转换为：

```
void *ptr;
ptr = &&instr;
goto *ptr; 
```

然后这段代码将理想地跳转到这个标签：（假设 iload 是最后读取的指令）

```
iload:
   // Execute the iload jvm instruction. 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T13:17:12.123

有两种方法：`switch`语句或函数指针数组。

的情况`switch`可以由枚举器命名，如下所示：

```
enum jvm_opcodes {
    push = 0,
    pop = 1,
    /* etc */
    blah = 254
}; 
```

然后开关看起来像这样：

```
switch ( instr ) {
    case push: {
    } break;

    case pop: {
    } break;
} 
```

函数指针数组将直接分派给其他函数，而无需写出`switch`. 如果源代码分布在更多文件中，可能会更方便。

```
/* dispatch.c */

typedef void (*jvm_dispatch)(); /* function pointer type */
jvm_dispatch insn_dispatch_table[] = { /* define array */
    handle_push, /* opcode 0 */
    handle_pop, /* opcode 1 */
    /* etc */
};

insn_dispatch_table[ insn ](); /* call an entry from the array */

/* push.c */
void handle_push() {
}

/* pop.c */
void handle_pop() {
} 
```

# java - BouncyCastle 签名值与 dotNET 签名值不匹配

> ID：14303778
> 
> 赞同：1
> 
> 时间：2013-01-13T13:08:19.760
> 
> 标签：java, .net, cryptography, rsa, bouncycastle

我`"SHA1withRSA"`在 Android 上使用 Bouncy Castle 的签名存在问题：Bouncy Castle 签名值与 .NET 签名值不匹配。

我尝试使用许多算法，例如`"SHA1withRSA"`，`"SHA1withRSAAndMGF1"`或者`"SHA1withRSA/ISO9796-2"`没有令人满意的结果。

如果我使用相同的消息、相同的算法和相同的私钥，那么 .NET 和 Bouncy Castle 中的结果必须相同......不是吗？我的代码有什么问题？？？

获取私钥：

```
... 
ks = KeyStore.getInstance("PKCS12"); 
... 
key = ks.getKey(alias, senha.toCharArray()); 
if (key instanceof PrivateKey) { 
    privateKey = (PrivateKey) key; 
} 
```

签名方式：

```
public String signer(String txt, String alg) throws Exception { 
    Signature signer = Signature.getInstance(alg, new BouncyCastleProvider()); 
    signer.initSign(privateKey); 
    signer.update(txt.getBytes("UTF-8")); 
    return Base64.encodeToString(signer.sign(), Base64.NO_WRAP); 
} 
```

我的应用程序必须使用 XMLDSIG 协议将 XML 发送到政府的 Web 服务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T13:17:11.287

被签名的值可以有一些随机填充数据（你的签名在一侧总是相同的吗？）。您应该在一侧生成签名并尝试在另一侧进行验证。

对于以下算法尤其如此：

```
"SHA1WITHRSAANDMGF1"
"SHA224WITHRSAANDMGF1"
"SHA256WITHRSAANDMGF1"
"SHA384WITHRSAANDMGF1"
"SHA512WITHRSAANDMGF1" 
```

安装 Bouncy Castle 提供程序并查看是否可以使用公钥验证签名。

# php - 使用 PHP 和 jQuery 更改 CSS 样式

> ID：14303780
> 
> 赞同：10
> 
> 时间：2013-01-13T13:08:26.813
> 
> 标签：php, javascript, jquery, html, css

我正在执行 PHP if/else 语句。

但是，我希望代码执行以下操作：

```
<?php 

    if ($condition == true){ 
       echo 'ITS TRUE!'; 
    }else { 
       #id-element.css('display':'none'); 
    } 

?> 
```

**请注意，ELSE 语句执行的 jQuery 行会更改所涉及元素的 css 样式。**

我该怎么做呢？

任何人都对我如何实现 PHP if/else 并在 PHP if/else 语句中使用 jQuery 更改 css 样式有任何建议/示例？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-13T13:10:56.240

您可以回显样式元素的 HTML 并将 CSS 放入其中。

```
else {
    echo '<style type="text/css">
        #id-element {
            display: none;
        }
        </style>';
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-13T13:12:19.310

估计你可以做这样的事情：

```
<?php
    if ($condition == true): 
         echo 'ITS TRUE!'; 
    else: 
?> 
    //put whatever html/style/script you want here, for example
    <script>
        $( '#id-element' ).css('display', 'none');
    </script>
<?php endif; ?> 
```

# bash - bash 逐行读取文件并使用行作为参数

> ID：14303790
> 
> 赞同：1
> 
> 时间：2013-01-13T13:09:34.297
> 
> 标签：bash

我有一个文件“列表”，其中包含我要解压缩的档案列表。我的脚本是：

```
#!/bin/bash
while read line
do
   echo 'string has been read'
   grep -e '**.zip' | xargs -d '\n' unzip -o
done < 'list' 
```

但它仅适用于列表中的第一个 zip-archive 并忽略列表中的其他字符串。如果我注释掉`'grep -e '**.zip' | xargs -d '\n' unzip -o'`脚本会读取所有行。

我不明白为什么它会这样工作，以及如何解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T13:22:48.007

我认为，即使没有循环也可以完成。

```
grep '\.zip$' < yourfile.txt | xargs -n1 unzip -o 
```

或者，从标准输入：

```
grep '\.zip$' | xargs -n1 unzip -o 
```

-n1 告诉 xargs 每个参数使用 1 个命令行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T13:13:19.343

您没有`$line`在循环中引用。因此它不会按照你想要的方式工作。

关于什么：

```
#!/bin/bash
while read line; do
    if [[ "$line" =~ "\.zip$" ]]; then
        unzip -o $line
    fi
done < list 
```

# haskell - 折叠结果 - Haskell

> ID：14303791
> 
> 赞同：1
> 
> 时间：2013-01-13T13:09:36.300
> 
> 标签：haskell

您能否逐步向我解释第二条指令的结果？

我知道 foldr 在这种情况下是如何工作的：

```
foldr (*) 1 [-3..-1]
-6 
```

但我不知道如何处理 foldr 表达式中的函数 (\yz -> y*3 + z)。

```
foldr (\y z -> y*3 + z) 0 [1..4]
30 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T13:19:27.543

我们来看看foldr的定义：

```
foldr f z []     = z 
foldr f z (x:xs) = f x (foldr f z xs) 
```

现在，在你的例子中，

```
f y z = y*3 + z 
```

因此，只需使用定义：

```
foldr f 0 [1..4] = 
f 1 (foldr f 0 [2..4]) =
f 1 (f 2 (foldr f 0 [3,4])) =
f 1 (f 2 (f 3 (foldr f 0 [4]))) =
f 1 (f 2 (f 3 (f 4 (foldr f 0 [])))) =
f 1 (f 2 (f 3 (f 4 0))) =
f 1 (f 2 (f 3 12))) = 
f 1 (f 2 21) =
f 1 27 =
30 
```

# javascript - Youtube Iframe：未调用 onYouTubePlayerAPIReady()

> ID：14303795
> 
> 赞同：10
> 
> 时间：2013-01-13T13:09:58.300
> 
> 标签：javascript, iframe, youtube, youtube-api

我有一个带有 iframe 的页面，它加载了一个 youtube 视频（iframe 的 src 在运行时被修改）。我基于 Rob W 提供的关于此主题的不同答案中的代码

```
<iframe id="browser" class="browser" scrolling="no" name="navigation"  
src="http://www.youtube.com/embed/nOEw9iiopwI?enablejsapi=1" application="youtube" style="display:  
inline;"></iframe> 
```

然后，当加载 iframe 时，将执行以下代码：

```
$('.browser').load(function() {
dispose_ytplayer();
}); 
```

被调用的函数 dispose_ytplayer() 是：

```
function dispose_ytplayer() {
    (function(){
    var s = document.createElement("script");
    s.src = "http://www.youtube.com/player_api";
    var before = document.getElementsByTagName("script")[0];
    before.parentNode.insertBefore(s, before);
     })();

    alert('called yt_dispose');

    var ytIframeplayer;

    function onYouTubePlayerAPIReady() {
        alert('called onYouTubePlayerAPIReady');
        ytIframeplayer = new YT.Player('browser', {
             events: {
                "onStateChange": stopCycle
             }
        });
    }
} 
```

但第二个警报（“称为 onYouTubePlayerAPIReady”）从未被调用，我的 chrome console.log 显示来自**www-embed_core_module-vflNmuGQq.js:26 的**此错误消息：

不安全的 JavaScript 尝试从 URL [http://www.youtube.com/embed/nOEw9iiopwI?enablejsapi=1的框架访问具有 URL](http://www.youtube.com/embed/nOEw9iiopwI?enablejsapi=1) [http://mysite.com](http://mysite.com)的框架。域、协议和端口必须匹配。

有任何想法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-13T13:15:39.587

`onYouTubePlayerAPIReady`应该在`window`对象上。

尝试：

```
window.onYouTubePlayerAPIReady = function() {
        alert('called onYouTubePlayerAPIReady');
        ytIframeplayer = new YT.Player('browser', {
             events: {
                "onStateChange": stopCycle
             }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T13:19:43.237

似乎您没有正确关闭这些功能。

最后`}`是关闭`onYouTubePlayerAPIReady()`，不是`dispose_ytplayer()`。

固定代码：

```
function dispose_ytplayer() {
    (function(){
        var s = document.createElement("script");
        s.src = "http://www.youtube.com/player_api";
        var before = document.getElementsByTagName("script")[0];
        before.parentNode.insertBefore(s, before);
    })();

    alert('called yt_dispose');

    var ytIframeplayer;

    function onYouTubePlayerAPIReady() {
        alert('called onYouTubePlayerAPIReady');
        ytIframeplayer = new YT.Player('browser', {
            events: {
                "onStateChange": stopCycle
            }
        });
    }
} 
```

# iphone - Coredata iPhone 到带有 iCloud 的 iPad/Mac？

> ID：14303804
> 
> 赞同：0
> 
> 时间：2013-01-13T13:10:45.950
> 
> 标签：iphone, objective-c, cocoa, core-data, icloud

我们已经完成了使用 coredata 的 iPhone 应用程序的编写。在进一步的版本中，我们计划添加一个 iPad 应用程序，该应用程序能够显示 iPhone 应用程序收集的数据（以及修改，使用它），从而为用户提供更多交互可能性。

我的问题是：是否可以将现有的核心数据（iPhone 上已安装的应用程序）移动到云端并使用 iPad 应用程序读取该数据？

如果是的话：你能指出我从哪里开始的正确方向吗？

如果不是：是否有另一种替代方法来访问使用 iPhone 应用程序和 iPad 应用程序创建的核心数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T22:53:08.170

使用 Core Data 内置的 iCloud 支持时，您使用哪种设备并不重要，只是 Core Data 堆栈以相同的方式初始化。任何 iOS 设备或 Mac 都可以使用同一个 iCloud 存储，并且在一台设备上创建的数据可以在另一台设备上读取。

但有一个关键细节：如果您已经拥有数据存储并添加了 iCloud 支持，那么这些预先存在的记录不会自动迁移到云中。iCloud 基于事务日志工作，事务日志仅在您保存更改时创建。不会立即更改的现有数据不会生成任何事务，因此不会进入云端。

如果您在添加 iCloud 时有现有数据，则需要将数据迁移到新的数据存储以强制对这些现有记录进行事务处理。`NSPersistentStoreCoordinator`您可以使用's`migratePersistentStore:toURL:options:withType:error:`方法相当容易地做到这一点。这并不难，但它的必要性并不总是很明显。

首先，我建议在 iCloud 上观看 Apple 的 WWDC 视频——尤其是 WWDC 2012 的第 227 节，**将 iCloud 与 Core Data 结合使用**。接下来，我建议*格外*小心，因为截至今天，Core Data 的 iCloud 支持仍然，容我们说，远非 Apple API 中最可靠的。

# c - c libxml 列出特定内容

> ID：14303810
> 
> 赞同：0
> 
> 时间：2013-01-13T13:11:06.427
> 
> 标签：c, xml, libxml2

我有一个包含以下内容的 xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<vm_list>
<vm name="Win2k_SQL2000 (1)" type="VM">53370afc-7b57-360c-a7a1-236f40535064</vm>
<vm name="WinXP_PRO_SP3_en_x86 (1)" type="VM">89b6d54c-4015-119b-db11-bfecf42688e6</vm>    
</vm_list> 
```

这是我获取节点“vm”内容的代码的一部分

```
cur = xmlDocGetRootElement(doc); 
while(cur ! = NULL){
puts("loop");
if (cur->type == XML_ELEMENT_NODE)
    {
      if (!(xmlStrcmp(cur->name, (const xmlChar *) "vm")))
        {
          key = xmlNodeListGetString(doc, cur->xmlChildrenNode, 1);
          puts((char *) key);
          xmlFree(key);
        }
    }
 cur = cur->next;
 } 
```

但它给了我以下结果：

```
loop
loop
53370afc-7b57-360c-a7a1-236f40535064
loop
loop
89b6d54c-4015-119b-db11-bfecf42688e6
loop 
```

当然我可以通过 xPath 检索它，但我想知道这段代码有什么问题..

# shell - 递归 grep 搜索文件中的特殊字符（C++ 运算符）

> ID：14303816
> 
> 赞同：1
> 
> 时间：2013-01-13T13:11:49.303
> 
> 标签：shell, command-line, grep

我正在尝试在目录中进行递归搜索，以查找在我的代码文件中出现以下字符序列的实例：

**-=**

我在 CLI 中使用以下命令：

```
grep -rn -= --include=*.hpp . 
```

我收到以下错误消息：

```
grep: invalid option -- '='
Usage: grep [OPTION]... PATTERN [FILE]...
Try `grep --help' for more information. 
```

不幸的是，这些帮助对解决我的问题没有多大帮助（或者至少，我看不出它是如何解决我的问题的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T13:17:43.363

尝试：

```
grep -rn --include=*.hpp -- -= . 
```

问题在于它`-=`被解释为命令行选项。用于`--`表示命令行选项的结束，因此`-=`被解释为模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T13:16:49.063

`grep -r -- -= .`也许？将`--`选项（以 - 开头）与命令行的其余部分分开。顺便说一句：您可能必须从外壳中隐藏星号，即使用`--include=\*.hpp`

# android - 为什么重新启动应用程序时未从 SQLite 数据库中检索值

> ID：14303818
> 
> 赞同：0
> 
> 时间：2013-01-13T13:12:13.037
> 
> 标签：android, database, android-sqlite

我正在开发一个 android 应用程序，我必须在其中存储联系人信息。该应用程序存储联系人并正确检索它们，除非并且直到我重新启动应用程序。重新启动应用程序后，当我尝试检索值时，程序意外崩溃。如果我重新输入值或插入新值，然后尝试检索值，则会检索所有联系人，包括以前的联系人。

任何人都可以解释这个问题的原因和设备解决方案吗？提前致谢。

这是联系人类：

```
public class Contact {
    //private variables 
    int _id; 
    String _name; 
    String _phone_number; 

    // Empty constructor 
    public Contact(){ 

    } 
    // constructor 
    public Contact(int id, String name, String _phone_number){ 
        this._id = id; 
        this._name = name; 
        this._phone_number = _phone_number; 
    } 

    // constructor 
    public Contact(String name, String _phone_number){ 
        this._name = name; 
        this._phone_number = _phone_number; 
    } 
    // getting ID 
    public int getID(){ 
        return this._id; 
    } 

    // setting id 
    public void setID(int id){ 
        this._id = id; 
    } 

    // getting name 
    public String getName(){ 
        return this._name; 
    } 

    // setting name 
    public void setName(String name){ 
        this._name = name; 
    } 

    // getting phone number 
    public String getPhoneNumber(){ 
        return this._phone_number; 
    } 

    // setting phone number 
    public void setPhoneNumber(String phone_number){ 
        this._phone_number = phone_number; 
    } 
} 
```

这是数据库处理程序类：

```
public class DatabaseHandler extends SQLiteOpenHelper{

    // Database Version 
    private static final int DATABASE_VERSION = 1; 

    // Database Name 
    private static final String DATABASE_NAME = "contactsManager"; 

    // Contacts table name 
    private static final String TABLE_CONTACTS = "contacts"; 

    // Contacts Table Columns names 
    private static final String KEY_ID = "id"; 
    private static final String KEY_NAME = "name"; 
    private static final String KEY_PH_NO = "phone_number"; 

    public DatabaseHandler(Context context) { 
        super(context, DATABASE_NAME, null, DATABASE_VERSION); 
    } 

    // Creating Tables 
    @Override
    public void onCreate(SQLiteDatabase db) { 
        String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
                + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
                + KEY_PH_NO + " TEXT" + ")"; 
        db.execSQL(CREATE_CONTACTS_TABLE); 
    } 

    // Upgrading database 
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) { 
        // Drop older table if existed 
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_CONTACTS); 

        // Create tables again 
        onCreate(db); 
    }

    public void addContact(Contact contact) { 
        SQLiteDatabase db = this.getWritableDatabase(); 

        ContentValues values = new ContentValues(); 
        values.put(KEY_NAME, contact.getName()); // Contact Name 
        values.put(KEY_PH_NO, contact.getPhoneNumber()); // Contact Phone Number 

        // Inserting Row 
        db.insert(TABLE_CONTACTS, null, values); 
        db.close(); // Closing database connection 
    }

    public void delete() { 
        SQLiteDatabase db = this.getWritableDatabase(); 
        db.execSQL("delete * from "+ TABLE_CONTACTS); 
        db.close(); // Closing database connection 
    }

    // Getting All Contacts 
    public List<Contact> getAllContacts() { 
       List<Contact> contactList = new ArrayList<Contact>(); 
       // Select All Query 
       String selectQuery = "SELECT  * FROM " + TABLE_CONTACTS; 

       SQLiteDatabase db = this.getWritableDatabase(); 
       Cursor cursor = db.rawQuery(selectQuery, null); 

       // looping through all rows and adding to list 
       if (cursor.moveToFirst()) { 
           do { 
               Contact contact = new Contact(); 
               contact.setID(Integer.parseInt(cursor.getString(0))); 
               contact.setName(cursor.getString(1)); 
               contact.setPhoneNumber(cursor.getString(2)); 
               // Adding contact to list 
               contactList.add(contact); 
           } while (cursor.moveToNext()); 
       } 

       // return contact list 
       return contactList; 
   }
} 
```

这是LogCat：

```
 01-13 18:46:36.734: D/dalvikvm(1166): GC_EXTERNAL_ALLOC freed 70K, 50% free 2692K/5379K, external 1859K/2108K, paused 20ms
    01-13 18:46:38.687: D/AndroidRuntime(1166): Shutting down VM
    01-13 18:46:38.687: W/dalvikvm(1166): threadid=1: thread exiting with uncaught exception (group=0x40015578)
    01-13 18:46:38.687: E/AndroidRuntime(1166): FATAL EXCEPTION: main
    01-13 18:46:38.687: E/AndroidRuntime(1166): java.lang.NullPointerException
    01-13 18:46:38.687: E/AndroidRuntime(1166):     at com.example.tourguide_final.TourGuide$1.onClick(TourGuide.java:75)
    01-13 18:46:38.687: E/AndroidRuntime(1166):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:159)
    01-13 18:46:38.687: E/AndroidRuntime(1166):     at android.os.Handler.dispatchMessage(Handler.java:99)
    01-13 18:46:38.687: E/AndroidRuntime(1166):     at android.os.Looper.loop(Looper.java:123)
    01-13 18:46:38.687: E/AndroidRuntime(1166):     at android.app.ActivityThread.main(ActivityThread.java:3687)
    01-13 18:46:38.687: E/AndroidRuntime(1166):     at java.lang.reflect.Method.invokeNative(Native Method)
    01-13 18:46:38.687: E/AndroidRuntime(1166):     at java.lang.reflect.Method.invoke(Method.java:507)
    01-13 18:46:38.687: E/AndroidRuntime(1166):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
    01-13 18:46:38.687: E/AndroidRuntime(1166):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
    01-13 18:46:38.687: E/AndroidRuntime(1166):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:26:20.930

您在 TourGuide$1.onClick 第 75 行有一个 NPE。如果您使用的是 Eclipse，只需双击日志中的这一行，它将带您到问题行。仅通过目视检查，您就可以确定哪个变量没有正确初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T06:28:14.150

```
 1.) Remove void delete() method .What it is doing at the end of the program it is deleting data from the database .Whwn you restart your program ,coompiler doesn't get any data and throws exception

2.)OR What you can do after restarting 1st call void delete method then insert method and then at last call select query method 
```

# javascript - 如何在 Ipad 中调试应用程序？

> ID：14303821
> 
> 赞同：1
> 
> 时间：2013-01-13T13:12:31.680
> 
> 标签：javascript, ios, ipad, debugging, cordova

我创建了一个应用程序并将其安装在我的 iPad 上。不幸的是，部分功能不起作用：当我按下某个按钮时，它应该执行一些 JS 代码，但事实并非如此。在我用来创建它的工具中，没有错误，没有异常，没有任何导致错误的东西。在使用开发者工具的 Chrome 中也是如此。

由于该工具允许我为 Android 生成文件，因此我在三星 Galaxy SII 和 Nexus 7 中安装了该应用程序。它在那里完美运行！

我认为这一定是PhoneGap的问题。是否有任何工具可以在 iPad 上调试应用程序（不在 Xcode 中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:08:27.693

如果正在生成相关日志，则可以将设备连接到 Mac 并查看通用控制台，您将在其中看到这些日志（以及许多其他系统相关事件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:58:43.020

我下载并安装了适用于 Windows 的 Safari 并发现了这个错误。不幸的是，没有适用于 Windows 的版本 6，因此我可以使用最新的开发工具。

# c# - 为每个项目绑定具有相同图标的 ListView (WPF) 的最佳方法是什么

> ID：14303822
> 
> 赞同：0
> 
> 时间：2013-01-13T13:12:33.103
> 
> 标签：c#, wpf-controls

我有一个绑定到我创建的某个对象的列表视图。绑定工作完美，但我想为列表中的每个项目添加图标。所有项目都应具有相同的图标（应事先定义为“file.ico”）。最好的实施方式是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:22:09.737

使用[ItemTemplate](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemtemplate.aspx)，例如：

```
<ListBox ItemsSource="{Binding MyItems}">
   <ListBox.ItemTemplate>
      <DataTemplate>           
         <Grid>
            <Grid.ColumnDefinitions>
               <ColumnDefinition Width="Auto" />
               <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Image Grid.Column="0" Source="/Images/.." Width=".." Height=".." />
            <TextBlock Grid.Column="1" Text="{Binding Name}" />
         </Grid>
      </DataTemplate>
   </ListBox.ItemTemplate>
</ListBox> 
```

您应该使用 a `ListBox`，除非您有特定的理由使用 a `ListView`。

# c# - CRM 2011 Online - 插件中的无限循环错误 - 找不到

> ID：14303823
> 
> 赞同：1
> 
> 时间：2013-01-13T13:12:51.917
> 
> 标签：c#, plugins, dynamics-crm-2011

我正在使用以下插件，该插件在更新机会时执行：

```
public class PreOpportunityWin : Plugin
{
    public PreOpportunityWin() : base(typeof(PreOpportunityWin))
    {
        base.RegisteredEvents.Add(
        new Tuple<int, string, string, Action<LocalPluginContext>>(20, "Update", "opportunity", new Action<LocalPluginContext>(ExecuteAutonumber)));
    }

    protected void ExecuteAutonumber(LocalPluginContext localContext)
    {
        Microsoft.Xrm.Sdk.IPluginExecutionContext context = (Microsoft.Xrm.Sdk.IPluginExecutionContext)localContext.PluginExecutionContext;
        if (context.InputParameters.Contains("Target") && context.InputParameters["Target"] is Entity)
        {
            //Organization Service
            IOrganizationService service = localContext.OrganizationService;
            //Tracing Service
            ITracingService trace = (ITracingService)localContext.TracingService;

            Entity Target = (Entity)context.InputParameters["Target"];
            var entity = service.Retrieve(
            Target.LogicalName, Target.Id, new ColumnSet(true));
            var entityStatusCode = (OptionSetValue)entity.Attributes["statuscode"];
            if (entityStatusCode.Value == 3)
            {
                //Code to execute if opportunity won
                trace.Trace("In the execute block...");

                //Depending on the retrieved name, generate the appropriate fetch xml
                string fetchXml = null;
                fetchXml = @"<fetch mapping='logical'> 
                <entity name='my_autonumber'><all-attributes/>
                <filter type=""and"">
                <condition attribute=""my_autonumberentity"" operator=""eq"" value=""opportunity"" />
                <condition attribute=""my_name"" operator=""eq"" value=""The Autonumber Record"" />
                </filter></entity></fetch>";

                try
                {
                    //Fetch the approiate autonumber record
                    EntityCollection result = service.RetrieveMultiple(new FetchExpression(fetchXml));
                    string nextIncrementNumber = string.Empty;
                    if (result.Entities.Count == 1)
                    {
                        Entity autoNumber = result.Entities[0];

                        //Lock the autonumber enity
                        lock (autoNumber)
                        {
                            if (!autoNumber.Attributes.Contains("my_counter"))
                                throw new InvalidPluginExecutionException("my_counter must contain a value");
                            if (!autoNumber.Attributes.Contains("my_incrementunit"))
                                throw new InvalidPluginExecutionException("my_IncrementUnit must contain a value");
                            int counter = Int32.Parse(autoNumber.Attributes["my_counter"].ToString());
                            int incrementUnit = Int32.Parse(autoNumber.Attributes["my_incrementunit"].ToString());
                            string prefix = autoNumber.Attributes.Contains("my_prefix") ? autoNumber.Attributes["my_prefix"].ToString() : string.Empty;
                            string prefixSeparator = autoNumber.Attributes.Contains("my_prefixseparator") ? autoNumber.Attributes["my_prefixseparator"].ToString() : string.Empty;
                            string suffix = autoNumber.Attributes.Contains("my_suffix") ? autoNumber.Attributes["my_suffix"].ToString() : string.Empty;
                            string suffixseparator = autoNumber.Attributes.Contains("my_suffixseparator") ? autoNumber.Attributes["my_suffixseparator"].ToString() : string.Empty;
                            string numberFormatter = autoNumber.Attributes.Contains("my_numberformatter") ? autoNumber.Attributes["my_numberformatter"].ToString() : string.Empty;

                            string fieldToUpdate;
                            if (autoNumber.Attributes.Contains("my_entityautonumberfield"))
                                fieldToUpdate = autoNumber.Attributes["my_entityautonumberfield"].ToString();
                            else
                                throw new InvalidPluginExecutionException("my_entityautonumberfield should not be empty");
                            nextIncrementNumber = BuildAutoNumber(entity, prefix, prefixSeparator, suffix, suffixseparator, counter, incrementUnit, numberFormatter, service);

                            //Set project number
                            entity.Attributes["new_projectnumber"] = nextIncrementNumber;
                            autoNumber.Attributes["my_counter"] = counter + incrementUnit;
                            service.Update(autoNumber);
                      }
                  }
              }
              catch (Exception ex)
              {
                  throw new InvalidPluginExecutionException(string.Format("An error occured in Autonumber plugin: {0}", ex.ToString()));
              }
          }
      }
  }

  //This function builds the autonumber itself
  private string BuildAutoNumber(Entity entity, string prefix, string prefixSeparator, string suffix, string suffixSeparator, int counter, int incrementUnit, string numberFormatter, IOrganizationService service)
  {
      bool hasPrefix = false, hasSuffix = false;
  string returnNumber = string.Empty;

      prefix = "P";
      if (!string.IsNullOrEmpty(prefix))
      {
          hasPrefix = true;
      }
      counter = counter + incrementUnit;
      returnNumber = (hasPrefix ? prefix + prefixSeparator : "") + counter.ToString(numberFormatter) + (hasSuffix ? suffix + suffixSeparator : "");
      return returnNumber;
 } 
```

}

此插件在更新机会时执行，但会引发以下错误：

> 此工作流作业已取消，因为启动它的工作流包含无限循环。更正工作流逻辑并重试。

我在任何地方都找不到无限循环，此外，我在创建机会时使用几乎相同的代码在不同的字段中附加另一个自动编号。2 个插件之间的唯一区别是检查获胜状态的代码：

```
Entity Target = (Entity)context.InputParameters["Target"];
var entity = service.Retrieve(Target.LogicalName, Target.Id, new ColumnSet(true));
var entityStatusCode = (OptionSetValue)entity.Attributes["statuscode"];
if (entityStatusCode.Value == 3)
  //Code to execute if opportunity won 
```

有人可以为我详细说明这个错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-13T17:53:37.197

在某个地方，您有一个插件会生成一个您不会中断的重复循环，请参阅我关于`my_autonumber`实体的问题。

要检查的值是`IPluginExecutionContext.Depth`告诉您循环的次数。

后：

`Microsoft.Xrm.Sdk.IPluginExecutionContext context = (Microsoft.Xrm.Sdk.IPluginExecutionContext)localContext.PluginExecutionContext;`

插入这一行：

`if (context.Depth > 1) return;`

如果插件执行不止一次，这将终止处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T05:12:46.857

小心使用 context.Depth。

使用 context.Depth 将使您的插件失败，您有另一个插件在您的插件中触发此操作。

现在深度为 2，但这是因为有另一个插件调用这个插件。

我也面临这个问题，除了使用 Context.Depth 还有其他解决方案吗？

# android - 未调用 ViewPager 的 childFragment 的 onCreateView() 方法

> ID：14303825
> 
> 赞同：0
> 
> 时间：2013-01-13T13:13:11.330
> 
> 标签：android, android-fragments, android-viewpager

**MainActivity.java**

```
public class MainActivity extends SherlockFragmentActivity {

 static MyListfragment mf;
 ViewPager mpager;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
        mf = new MyListfragment();
        ft.add(android.R.id.content,mf).commit();
}} 
```

**MyListfragment.java**

```
public class MyListfragment extends SherlockListFragment {

MyDisplayfragment tempFrag;
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    Connector.selection = position;
    FragmentTransaction ft = getActivity().getSupportFragmentManager().beginTransaction();
        if(position==0)
        {
        tempFrag=new MyDisplayfragment();
        tempFrag.setLayout(R.layout.law);
        subFragmentAdapter mAdapter = new subFragmentAdapter(getChildFragmentManager());
        tempFrag.setViewPagerAdapter(mAdapter);
        }
    ft.replace(android.R.id.content,tempFrag);
    ft.addToBackStack(null);
    ft.commit();

}

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    int layout = Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ?
            android.R.layout.simple_list_item_activated_1 : android.R.layout.simple_list_item_1;
    setListAdapter(new ArrayAdapter<String>(getActivity(),
            layout, Connector.list));
}} 
```

**MyDisplayfragment.java**

```
public class MyDisplayfragment extends SherlockFragment {

int resource;
FragmentPagerAdapter mAdapter;
ViewPager v;
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    if(Connector.selection==-1)
        resource=R.layout.displayfragment;
    return inflater.inflate(resource, container, false);
}

public void setViewPagerAdapter(FragmentPagerAdapter x)
{
    mAdapter=x;
}

public void setLayout(int layout)
{
    resource=layout;
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onViewCreated(view, savedInstanceState);
    ViewPager pager=(ViewPager) view.findViewById(R.id.mpager);
    pager.setAdapter(mAdapter);
}} 
```

**子片段.java**

```
public final class subFragment extends SherlockFragment {

private int layout;
public static subFragment newInstance(int content) {
    subFragment fragment = new subFragment();
    fragment.layout=content;
    return fragment;
}
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    return inflater.inflate(layout,container,false);
}} 
```

**subFragmentAdapter.java**

```
public class subFragmentAdapter extends FragmentPagerAdapter{

int[] LAYOUT={R.layout.cccc,R.layout.aaaa,R.layout.bbb};
private int mCount;

public subFragmentAdapter(FragmentManager fm) {
    super(fm);
    mCount = LAYOUT.length;
}

@Override
public Fragment getItem(int position) {
    return subFragment.newInstance(LAYOUT[position]);
}

@Override
public int getCount() {
    return mCount;
}

} 
```

**连接器.java**

```
public class Connector {

static int selection = -1;
static String list[] = { "Law" };} 
```

上述项目中
1)MyListfragment.java 用于导航
2)​​MyDisplayfragment.java 用于根据 MyListFragment 中的选择进行显示 3)Connector.java 用于上述两个片段之间的通信
4)subFragment.java 用于用片段填充 Viewpager
5)subFragmentAdapter.java 是 Viewpager 的适配器

当我运行这个项目时，viewpager 似乎是空白的，并且没有显示任何子片段，调试后我看到 subFragment.java 的 onCreateView() 方法没有被调用。我的问题是为什么不调用 onCreateView() 方法

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-12-28T15:25:07.140

请参阅 Luksprog 的评论以获取答案。

# xcode - OSX 将 WebView 内容保存到多页 PDF

> ID：14303826
> 
> 赞同：7
> 
> 时间：2013-01-13T13:13:11.500
> 
> 标签：xcode, macos, pdf, webview, multipage

我正在使用 xcode 开发 OSX 应用程序。我有一个使用 MathJax 来显示方程式（以及正常的 html 内容）的工作 WebView。我正在为数学老师创建一个数学工作表生成器。

我一直在网上搜索很多，试图找出有关将比赛保存为 pdf 的详细信息，但还没有完全弄清楚。

我目前正在使用以下代码成功将 WebView 保存为 pdf：

```
- (IBAction)savePDF:(id)sender {
    NSData *pdfData = [[[[myWebView mainFrame] frameView] documentView] dataWithPDFInsideRect:[[[myWebView mainFrame] frameView] documentView].frame];
    PDFDocument *document = [[PDFDocument alloc] initWithData:pdfData];

    [self setSaveDirectory];

    NSString *fileName = [NSString stringWithFormat:@"%@/testing.pdf",saveDir];
    NSLog(@"Save location: %@",fileName);

    [document writeToFile:fileName];
} 
```

我遇到的问题是它基于 WebView 的竞赛创建了一个巨大的 pdf 页面。我希望能够引入分页符。

我总是有两页，一页是问题，一页是答案。现在我知道如何做到这一点的唯一方法是将它们全部放在 WebView 上，然后尝试将其保存到 PDF 并找到某种方法来引入分页符。

我怎样才能做到这一点？

# ios - UITableView 有两个自定义单元格（多个标识符）

> ID：14303832
> 
> 赞同：32
> 
> 时间：2013-01-13T13:14:00.753
> 
> 标签：ios, objective-c, uitableview

我正在尝试将一个单元格作为每个单元格之间的空格 - 通过设置 alpha = 0 将其隐藏。在我的表格中，空格单元格将用于奇数行。

请注意，实际单元格高度为 85，但隐藏单元格高度（即单元格之间的空间）为 20。

问题是空间单元格高度是85，而不是20，我不知道为什么。可能单元格未正确加载。

`Cell`这是`UITableViewCell`- 实际的单元格 - 标识符为“单元格”。

`Cell2`是标识符为“Space”的空间。

上面的每个类都有自己的`UITableViewCell`类，XIB 文件也分配给每个类。*标识符*也在 IB 中为每个 Xib 设置。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier1 = @"Cell";
static NSString *CellIdentifier2 = @"Space";

Cell *cell = (Cell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier1];

if(!cell)
{
    NSArray *ar = [[NSBundle mainBundle] loadNibNamed:@"CellView" owner:nil options:nil];
    for (id obj in ar)
    {
        if ([obj isKindOfClass:[Cell class]])
        {
            cell = (Cell *)obj;
            break;
        }
    }
}

if (indexPath.row % 2 == 1)
{
    Cell2 *cell2 = (Cell2 *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier2];

    if (!cell2)
    {
        NSArray *ar = [[NSBundle mainBundle] loadNibNamed:@"Cell2" owner:nil options:nil];
        for(id obj in ar)
        {
            if([obj isKindOfClass:[Cell2 class]])
            {
                cell2 = (Cell2 *)obj;
                break;
            }
        }

        // Method 1
        cell2 = [[Cell2 alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier2];
         // Method 2
        //cell2 = [[Cell2 alloc] init];
        // Method 3
        //cell2 = (Cell2 *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier2];

        [cell2.contentView setAlpha:0];
        // prevent selection and other stuff
        [cell2 setUserInteractionEnabled:NO];
    }
    return cell2;
}
else
{
    // Configure the actual cell
}

return cell; 
```

}

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-13T13:19:01.600

*** 为了更好地理解，我重命名了您的一些 NIB/类名称。***

首先，您应该注册每个单元格的 NIB：

```
- (void)viewDidLoad{
    [super viewDidLoad];

    static NSString *CellIdentifier1 = @"ContentCell";
    static NSString *CellIdentifier2 = @"SpaceCell";

    UINib *nib = [UINib nibWithNibName:@"CellViewNIBName" bundle:nil];
    [self.tableView registerNib:nib forCellReuseIdentifier:CellIdentifier1];

    nib = [UINib nibWithNibName:@"CellSpaceNIBName" bundle:nil];
    [self.tableView registerNib:nib forCellReuseIdentifier:CellIdentifier2];

    self.contentView.hidden = YES;
    [self loadData];
} 
```

因为您已经注册了 NIB，所以`dequeueReusableCellWithIdentifier:`将始终返回一个单元格：

```
- (UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath      *)indexPath
{
    static NSString *CellIdentifier1 = @"ContentCell";
    static NSString *CellIdentifier2 = @"SpaceCell";

    // Space Cell
    if (indexPath.row % 2 == 1) {
        CellSpace *cell = (CellSpace *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier2];
        return cell;
    }

    // Content cell
    else {
        CellView *cell = (CellView *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier1];
        // Configure cell
        return cell;
    }
} 
```

最后但同样重要的是，确保实现以下委托方法：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Space cell's height
    if (indexPath.row % 2 == 1) {
        return 20.0f;
    }

    // Content cell's height
    else {
        return 80.0f;
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-01-20T07:18:54.797

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *returncell;

    static NSString *cellIdentifier ;
    if(indexPath.section == 0)
    {
        cellIdentifier = @"cell1";
    }
    else if (indexPath.section == 1)
    {
        cellIdentifier = @"cell2";
    }
    UITableViewCell *myCell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    MapTableViewCell *myCustomCell = (MapTableViewCell *)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if(indexPath.section == 0)
    {
        if(myCell == nil)
        {
            myCell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
            getLocationBtn = [UIButton buttonWithType:UIButtonTypeCustom];
            getLocationBtn.frame = CGRectMake(myCell.frame.origin.x,myCell.frame.origin.y+5 , 200, 30);
            [getLocationBtn setTitle:@"your button title" forState:UIControlStateNormal];
            [getLocationBtn setTitleColor:[UIColor orangeColor] forState:UIControlStateNormal];
            [getLocationBtn addTarget:self action:@selector(buttonAction) forControlEvents:UIControlEventTouchUpInside];

        }

        [myCell.contentView addSubview:getLocationBtn];
        returncell = myCell;
    }
    else if (indexPath.section == 1)
    {
        if (myCustomCell == nil)
        {
            myCustomCell = [[MapTableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
        }

        myCustomCell.nearbyLocation.text = @"demo Text";
        returncell = myCustomCell;
    }

    return returncell;
} 
```

//mycustom tablviewcell

# 导入“MapTableViewCell.h”

```
@implementation MapTableViewCell

@synthesize nearbyLocation;

-(id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if(self)
    {    
        self.backgroundColor = [UIColor groupTableViewBackgroundColor];
        nearbyLocation = [[UILabel alloc]initWithFrame:CGRectMake(10, 5, 200, 30)];

        [self addSubview:nearbyLocation];
    }

    return self;
}
@end 
```

使用默认单元格的自定义单元格数量的最佳方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-07T05:06:39.003

除了提供的答案之外，我想强调**每个不同自定义单元格的单元格标识符也必须不同**。

例如带有标识符的自定义`cellA`和带有标识符的`"Cell"`自定义。`cellB``"Cell2"`

# vb.net - 在 vb.net 中使用函数生成欧元转换器

> ID：14303833
> 
> 赞同：-1
> 
> 时间：2013-01-13T13:14:02.623
> 
> 标签：vb.net, function, return

我想使用函数制作一种英镑到欧元的转换器。我希望系统做什么，当您在文本框中输入您的号码并按转换时，我希望标签中的欧元转换号码显示出来。

我相信这是通过告诉系统将输入的任何数字乘以 1.34509 的转换率来完成的。

但我不认为我做得对。

```
Protected Sub btnGo_Click(sender As Object, e As EventArgs) Handles btnGo.Click

    End Sub

    Function Convert(txtPound As Decimal) As Decimal
        'declare variable to store answer 
        Dim Converter As Decimal
        'calculate the Answer
        Converter = Convert(txtPound * 1.34509)
        'return the Answer
        Return Converter

    End Function

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T13:18:19.333

您需要获取输入的金额并将其转换为小数，然后才能计算：

```
Dim pounds As Decimal
pounds = Decimal.Parse(txtPound.Text)
Converter = Convert(pounds * 1.34509) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:59:12.143

这将适合您的要求，

***事件：***

```
'---This is the procedure which is going to handle your btnGo's Click Event
Protected Sub btnGo_Click(sender As Object, e As EventArgs) Handles btnGo.Click

'---Here we are calling the function Convert(Decimal) by passing the txtPound's text
   msgbox(Convert(Decimal.Parse(txtPound.Text)))

End Sub 
```

***功能：***

```
'---This function will receive the passed value as xValue and execute its code  
Private Function Convert(xValue as Decimal) as Decimal

'---This line will do the conversion and simply send back the result to the caller.  
   return (xValue * 1.34509)

End Function 
```

此外，如果您需要对此进行更多说明，请参考[此内容。](http://www.homeandlearn.co.uk/net/vbnet.html)

# emacs - Emacs Wanderlust 错误：“没有这样的文件或目录，gnutls-cli”

> ID：14303835
> 
> 赞同：1
> 
> 时间：2013-01-13T13:14:31.640
> 
> 标签：emacs

我正在尝试用 Emacs 打开 gmail。`M-x wl`产生以下错误消息。

```
/usr/bin/mail is not an executable.  Setting mail-interactive to t.
Initializing...
Loading mail-mime-setup...done
gnus-mime-setup is not found.
emh-setup is not found.
Updating addresses...done
Checking environment...
Auto plugged off at imap.gmail.com:993
byte-code: Searching for program: no such file or directory, gnutls-cli 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T13:40:09.980

它希望您安装一个名为`gnutls-cli`. 如果您使用的是 Debian 派生发行版，`apt-get install gnutls-bin`其中包含此实用程序和其他一些实用程序。如果您有其他问题，请编辑您的问题以包含更多详细信息。

# ios - 在 IOS 上播放声音

> ID：14303842
> 
> 赞同：3
> 
> 时间：2013-01-13T13:15:36.123
> 
> 标签：ios, xcode

我想在按下按钮时播放声音。我试过这个：

```
-(void)PlayClick
{
NSURL* musicFile = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                           pathForResource:@"BubblePopv4"
                                           ofType:@"mp3"]];
AVAudioPlayer *click = [[AVAudioPlayer alloc] initWithContentsOfURL:musicFile error:nil];
[click play];
} 
```

…并进口`#import <AudioToolbox/AudioToolbox.h>`和`#import <AVFoundation/AVFoundation.h>`

但由于某种原因，声音没有播放。名称和类型是正确的，因为我添加到项目中的文件是“BubblePopv4.mp3”。iPad 上的音量开到最大，在 iTunes 上也能正常播放！有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T14:00:11.957

离开它，不要在新班级中这样做，对你来说简单的东西：

```
- (void)playSoundWithOfThisFile:(NSString*)fileNameWithExtension {

    // Eg - abc.mp3
    AVAudioPlayer *audioPlayerObj;

    NSString *filePath;

    filePath= [[NSString stringWithFormat:@"%@", [[NSBundle mainBundle] resourcePath]] retain];

    if(!audioPlayerObj)
        audioPlayerObj = [AVAudioPlayer alloc];

        NSURL *acutualFilePath= [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/%@",filePath,fileNameWithExtension]];

        NSError *error;

        [audioPlayerObj initWithContentsOfURL:acutualFilePath error:&error];

        [audioPlayerObj play];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T13:19:51.087

做这个：

在 .h 文件中：

```
Use this delegate - <AVAudioPlayerDelegate>

#import "AVFoundation/AVAudioPlayer.h"

AVAudioPlayer *audioPlayerObj;

NSString *filePath; 
```

在 .m 文件中，在某些方法中：

```
 filePath= [[NSString stringWithFormat:@"%@", [[NSBundle mainBundle] resourcePath]] retain];

    if(!audioPlayerObj)
        audioPlayerObj = [AVAudioPlayer alloc]; 
```

并添加这两个方法：

```
- (id)initWithFileName:(NSString*)fileNameWithExtension {

    if ((self = [super init])) {

        NSURL *acutualFilePath= [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/%@",filePath,fileNameWithExtension]];

        NSError *error;

        [audioPlayerObj initWithContentsOfURL:acutualFilePath error:&error];

    }
    return self;
}

- (void)playSound {
    [audioPlayerObj play];
} 
```

您可以将文件名传递给此方法 - initWithFileName

然后调用 playSound 方法为你播放声音。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T13:32:28.443

将 url 初始化替换为：

```
NSURL* musicFile = [NSURL initFileURLWithPath:[[NSBundle mainBundle]
                                              pathForResource:@"BubblePopv4"
                                              ofType:@"mp3"]]; 
```

# ruby-on-rails-3 - 确保 FactoryGirl 的 :create 通过控制器

> ID：14303848
> 
> 赞同：0
> 
> 时间：2013-01-13T13:16:09.310
> 
> 标签：ruby-on-rails-3, rspec2, factory-bot

由于我的数据库中保存了数据，我的一些测试不起作用。我发现（下面的代码）FactoryGirl 的创建函数没有经过控制器步骤来确保传递控制器中定义的所有内容。我的控制器所做的一件事是在保存到数据库之前格式化属性以确保保存的是字符串而不是数组，例如“Monday,Tuesday”而不是 [“Monday,Tuesday”]。

```
if Schedule.count == 0
  FactoryGirl.create(:schedule) 
end 
```

如何设置 before 语句以使创建功能执行控制器步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:00:53.843

通过输入以下行解决了这个问题：

```
before { FactoryGirl.create(:default_for_overlap_schedule) } 
```

完整的测试是：

```
describe "has schedule overlap" do
    before { FactoryGirl.create(:default_for_overlap_schedule) }

    let!(:overlap_schedule) { FactoryGirl.attributes_for(:overlap_schedule) }

    it "prompts user of error" do
        expect{ post :create, schedule: overlap_schedule  }.not_to change(Schedule, :count).by(1)
        flash[:error].should eq("Schedule has an overlap")
    end
end 
```

# delphi - 如何在运行时设置 TAreaSeries 颜色？

> ID：14303849
> 
> 赞同：3
> 
> 时间：2013-01-13T13:16:13.727
> 
> 标签：delphi, delphi-xe2, teechart

我有一个`TAreaSeries`充满这样的数据： ![在此处输入图像描述](../Images/e775299b42a8dbabba72dee8424282ef.png)

我正在使用此代码在图表上绘制垂直线：

```
procedure TfrmDistributionChart.dbcDistributionAfterDraw(Sender: TObject);
var
  XPos: Integer;
begin
  dbcDistribution.Canvas.Pen.Width := 3;

  dbcDistribution.Canvas.Pen.Color := clBlack;
  XPos := dbcDistribution.BottomAxis.CalcPosValue(0);
  dbcDistribution.Canvas.DoVertLine(XPos, dbcDistribution.LeftAxis.IStartPos,
    dbcDistribution.LeftAxis.IEndPos);

  dbcDistribution.Canvas.Pen.Color := clBlue;
  XPos := dbcDistribution.BottomAxis.CalcPosValue(-SD);
  dbcDistribution.Canvas.DoVertLine(XPos, dbcDistribution.LeftAxis.IStartPos,
    dbcDistribution.LeftAxis.IEndPos);
  XPos := dbcDistribution.BottomAxis.CalcPosValue(SD);
  dbcDistribution.Canvas.DoVertLine(XPos, dbcDistribution.LeftAxis.IStartPos,
    dbcDistribution.LeftAxis.IEndPos);

  dbcDistribution.Canvas.Pen.Color := clGreen;
  XPos := dbcDistribution.BottomAxis.CalcPosValue(-2 * SD);
  dbcDistribution.Canvas.DoVertLine(XPos, dbcDistribution.LeftAxis.IStartPos,
    dbcDistribution.LeftAxis.IEndPos);
  XPos := dbcDistribution.BottomAxis.CalcPosValue(2 * SD);
  dbcDistribution.Canvas.DoVertLine(XPos, dbcDistribution.LeftAxis.IStartPos,
    dbcDistribution.LeftAxis.IEndPos);

  dbcDistribution.Canvas.Pen.Color := clRed;
  XPos := dbcDistribution.BottomAxis.CalcPosValue(-3 * SD);
  dbcDistribution.Canvas.DoVertLine(XPos, dbcDistribution.LeftAxis.IStartPos,
    dbcDistribution.LeftAxis.IEndPos);
  XPos := dbcDistribution.BottomAxis.CalcPosValue(3 * SD);
  dbcDistribution.Canvas.DoVertLine(XPos, dbcDistribution.LeftAxis.IStartPos,
    dbcDistribution.LeftAxis.IEndPos);
end; 
```

我想更改系列的颜色以匹配其外边框的颜色（例如，中央切片为蓝色，中间切片为绿色，最外层为红色）。TeeChart Standard v2011.03.32815 32bit VCL 可以做到这一点吗？

此外，我找不到修剪垂直线的正确方法，以避免超出它们所绘制的区域。我应该如何计算这 7 条线中每条线的正确高度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T14:29:28.870

有两种设置颜色的方法：

*   当您向系列添加值时。

    ```
    Series1.AddXY(xVal,yVal,'',clYourColorBasedOnX(xVal)); 
    ```

    `clYourColorBasedOnX( x : Double): TColor;`您定义的函数在哪里。

*   在介绍这个系列之前。

    ```
    Series1.ColorRange(Series1.XValues,x1,x2,clYourColor); 
    ```

    一组与您的范围的呼叫。

* * *

至于用户绘制的线最大值，请尝试遍历 Series.XValues[i] 直到找到最接近的极限值，取索引并将最大值设置为 Series1.YValues[index]。

重复直到设置所有限制。

# android - Android In-App Billing：订单取消后购买状态保持“已购买”

> ID：14303850
> 
> 赞同：54
> 
> 时间：2013-01-13T13:16:16.823
> 
> 标签：android, in-app-purchase, in-app-billing

我目前正在测试我的 InApp 计费机制（使用 InApp 计费版本 3 API，因此以 TrivialDrive 示例作为参考）。

我有一个托管项目，即升级到高级版本。

现在，使用我的测试帐户购买该商品是可行的，但是当我之后在 Google 结帐中取消整个订单时，我的代码仍然告诉我该商品已被购买，因此授予了高级功能。

这是我在 MainActivity 中检查购买的方法。我不会在本地某处保存购买状态，因为我知道使用计费 API v3，您可以根据需要查询临时购买。

```
@Override
    protected void onStart() {
        // TODO Auto-generated method stub
        super.onStart();

        iabHelper = new IabHelper(this, Helper.getPKey());
        iabHelper.enableDebugLogging(true);

        iabHelper.startSetup(new IabHelper.OnIabSetupFinishedListener() {

            @Override
            public void onIabSetupFinished(IabResult result) {
                Log.d("IAB", "SETUP FINISHED");

                if(!result.isSuccess())
                {
                    Log.d("IAB", "SETUP NOT OK");
                    return;
                }
                else
                    Log.d("IAB", "SETUP OK");

                iabHelper.queryInventoryAsync(
                    new QueryInventoryFinishedListener() {

                        @Override
                        public void onQueryInventoryFinished(IabResult result, Inventory inv) {
                            Log.d("IAB", "Query inventory finished.");
                            if (result.isFailure()) {
                                Log.d("IAB","Failed to query inventory: " + result);
                                return;
                            }

                            Log.d("IAB", "Query inventory was successful.");

                            // Do we have the premium upgrade?
                            boolean mIsPremium = inv.hasPurchase(Helper.premiumSku);
                            Purchase p = inv.getPurchase(Helper.premiumSku);
                            if(p != null)
                                Log.d("IAB PURCHASE STATE", IabHelper.getResponseDesc(p.getPurchaseState()));
                            else
                                Log.d("IAB PURCHASE STATE", "Purchase is null");

                            Log.d("IAB", "User is " + (mIsPremium ? "PREMIUM" : "NOT PREMIUM"));

                        }
                    }                       

                );              
            }
        });       
    } 
```

我一直得到 getPurchaseState = 0，这意味着已购买，即使在我取消订单一小时后也是如此。为什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-10-27T02:36:34.130

在等待了大约 12 个小时并尝试了这里建议的所有内容后，我仍然面临同样的问题。对我来说诀窍是以下 adb 命令：

> adb shell pm clear com.android.vending

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-10T20:19:27.927

我知道这已经一岁了，但是所提供的答案/提示都没有帮助我，所以我想我会添加我的解决方案。

首先，我遇到了同样的问题。即，进行了测试购买，取消了它，仍然收到指示有效购买的购买状态。

我忘记的是，我最近将 Google Play 开发者控制台设置窗格上的“许可测试响应”字段从“响应正常”切换为“许可”

将其切换回“RESPOND_NORMALLY”后，已取消购买的购买状态已正确返回。

因此，您可能需要在尝试等待几天之前检查一下

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-15T20:04:56.457

步骤 1\. 等待大约 10 分钟；直到您看到“已取消的订单”已交付。在你的谷歌钱包里。

> 9 月 15 日上午 11:28 已取消 订单已交付。
> 
> 9 月 15 日上午 11:18 已取消 您取消了此订单。原因：客户要求取消。

步骤 2\. 在设备上注销您的测试 google 帐户，然后重新登录。

至少这解决了我的问题。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-10-31T20:26:42.767

在具有相同帐户的另一台设备上使用该应用程序时也会出现此问题。在设备重新启动之前，即使在数小时后，也不会收到购买的商品。如果再次尝试购买，谷歌钱包对话框会显示“项目已拥有”。来自 iabHelper 的返回代码仍然是“用户取消”，因为购买活动的真实响应没有返回，只是写在调试日志中。

```
else if (resultCode == Activity.RESULT_CANCELED) {
        logDebug("Purchase canceled - Response: " + getResponseDesc(responseCode));
        result = new IabResult(IABHELPER_USER_CANCELLED, "User canceled.");
        if (mPurchaseListener != null) mPurchaseListener.onIabPurchaseFinished(result, null);
    } 
```

所以它不可能对这个谷歌计费对话框做出反应，因为我们总是得到相同的结果 IABHELPER_USER_CANCELED，即使对话框说“项目已经拥有”。

编辑：

我用这个修复它：

```
else if (resultCode == Activity.RESULT_CANCELED) {
        logDebug("Purchase canceled - Response: " + getResponseDesc(responseCode));
        if(responseCode == 7) 
            result = new IabResult(BILLING_RESPONSE_RESULT_ITEM_ALREADY_OWNED, "Item already owned.");
        else                                                                                             
            result = new IabResult(IABHELPER_USER_CANCELLED, "User canceled.");
        if (mPurchaseListener != null) mPurchaseListener.onIabPurchaseFinished(result, null);
    } 
```

所以现在如果计费对话框的响应是 7 作为“项目已拥有”，我将它报告给我的听众。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-08-23T15:10:13.220

您可以使用的是`autoRenewing`购买数据的字段。根据[文档](https://developer.android.com/google/play/billing/billing_reference.html#getPurchases)：

> autoRenewing：指示订阅是否自动续订。如果为 true，则订阅处于活动状态，并将在下一个计费日期自动续订。**如果为 false，则表示用户已取消订阅**。

并且此字段在取消后立即更新。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-28T10:25:00.257

如果我没看错，那么 trivialdrivesample 中的参考代码是错误的，这对于应用内计费的官方参考项目来说将是一种耻辱。

如果 purchase == null 它只是意味着它从未被购买过。要获得真实信息，您必须致电

```
purchase.getPurchaseState() 
```

根据[这里](http://developer.android.com/google/play/billing/v2/billing_reference.html)

purchaseState 订单的购买状态。可能的值为 0（已购买）、1（已取消）、2（已退款）或 3（已过期，仅用于订阅购买）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-10T21:51:22.160

谷歌官方文档中已经很好地回答了。复制这里的话。

> 当用户取消订阅时，Google Play 不会为当前的结算周期提供退款。相反，它允许用户在当前计费周期结束之前访问已取消的订阅，届时它会终止订阅。例如，如果用户购买了每月订阅并在周期的第 15 天取消它，Google Play 将认为该订阅在第 30 天（或其他日期，具体取决于月份）结束之前有效。

这应该可以解释一切。`getPurchase()`在当前订阅周期结束之前，仍将返回购买数据。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-04T08:45:38.827

我在文档（IAB API v2）中找到了以下部分，但我不确定这是否可用于 IAB API v3。不过，广播可能仍会发送。

> “...当 Google Play 收到来自 Google Wallet 的退款通知时，您的应用程序可以收到 IN_APP_NOTIFY 广播意图。在这种情况下，Google Play 会向您的应用程序发送 IN_APP_NOTIFY 消息。您的应用程序可以像处理来自的响应一样处理此消息应用程序发起的 REQUEST_PURCHASE 消息，以便您的应用程序最终收到 PURCHASE_STATE_CHANGED 消息，其中包含有关已退款项目的信息。退款信息包含在伴随 PURCHASE_STATE_CHANGED 广播意图的 JSON 字符串中。此外，JSON 中的 purchaseState 字段字符串设置为 2。”

来自：http: [//developer.android.com/google/play/billing/v2/api.html#billing-action-notify](http://developer.android.com/google/play/billing/v2/api.html#billing-action-notify)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-17T10:30:08.183

我注意到完全相同的事情：

使用测试帐户进行应用内购买 -> 通过删除访问退款购买 -> getPurchaseState 仍然返回已购买（即使在重新登录并重新启动后），因此在我的应用中不会删除对高级功能的访问。

但是当我用真实的购买测试同样的东西时：

客户进行了真正的购买 -> 几周后我退款了 -> 客户无法再访问我的应用程序的高级功能。

那么，这可能只是测试购买的问题吗？

# c++ - 无法使用 LibHaru，因为找不到 zlib 的引用

> ID：14303851
> 
> 赞同：0
> 
> 时间：2013-01-13T13:16:19.633
> 
> 标签：c++, windows, mingw, zlib, libharu

我正在尝试构建一个有望创建动态 .pdf 文件的程序。我实际上已经用 PHP for web 开发了一个类似的项目，但现在我想用 C++ 编写它。

这导致我在过去四天中多次重建这三个库（zlib、libpng 和 libharu）。我已经阅读了网络上的所有相关条目（包括[这个](https://stackoverflow.com/questions/1242866/i-am-getting-a-strange-errors-error-lnk2001-unresolved-external-symbol-deflate)堆栈溢出条目）我明白我的问题是编译器找不到 zlib（可能我理解错误）

我想解释一下我做了什么。请注意，我在 Windows 7 中使用带有 GNU GCC C++ 编译器 (MingGW) 的 Codeblocks IDE。首先，我编译了 zlib 1.2.7 并创建了我的 zlib.a 静态库文件（我正在使用静态库）。其次，我编译了 libpng 1.5.13 并创建了我的 libpng.a。第三，我编译了 libharu（快照）并创建了我的 libharu.a 静态库文件。然后我将这些库文件添加到我的项目中。（我做了[这里](http://www.learncpp.com/cpp-tutorial/a3-using-libraries-with-codeblocks/)解释的一切）。最后，编译了我的项目。

好吧，我会说我做了十多次以上的所有步骤，改变了一些小东西，但每次我都会出错。我什至尝试过 libharu.org 中的官方示例。最奇怪的是我的错误不稳定。几乎每次我得到不同的错误！但主要与 hpdf_streams.c 有关。
我最近的日志文件：

```
C:\Libs\libharu-201301131604\libharu.a(hpdf_streams.o):hpdf_streams.c:(.text+0xd4a): undefined reference to `deflateInit_'
C:\Libs\libharu-201301131604\libharu.a(hpdf_streams.o):hpdf_streams.c:(.text+0xdfa): undefined reference to `deflate'
C:\Libs\libharu-201301131604\libharu.a(hpdf_streams.o):hpdf_streams.c:(.text+0xe78): undefined reference to `deflateEnd'
C:\Libs\libharu-201301131604\libharu.a(hpdf_streams.o):hpdf_streams.c:(.text+0xee2): undefined reference to `deflate'
C:\Libs\libharu-201301131604\libharu.a(hpdf_streams.o):hpdf_streams.c:(.text+0xf7e): undefined reference to `deflateEnd'
C:\Libs\libharu-201301131604\libharu.a(hpdf_streams.o):hpdf_streams.c:(.text+0xfb7): undefined reference to `deflateEnd'
C:\Libs\libharu-201301131604\libharu.a(hpdf_streams.o):hpdf_streams.c:(.text+0xff1): undefined reference to `deflateEnd' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:49:20.790

我们刚刚遇到了这个问题。您需要在关闭 WIN_API 的情况下重新编译 zlib。或者使用 dll 而不是静态库。

# intellij-idea - 如何让 IntelliJ IDEA 的 Local History 忽略 Plugins 的临时更改并恢复到文档？

> ID：14303854
> 
> 赞同：2
> 
> 时间：2013-01-13T13:17:00.827
> 
> 标签：intellij-idea, intellij-plugin

我在[这里](https://github.com/whunmr/letsedit)写了一个 IntelliJ IDEA 插件，比如[AceJump](https://github.com/winterTTr/ace-jump-mode)，它用于 IDE 中的快速移动插入符号。

如下所示，通过将 TextAttributes 应用于所有 'i' 出现，并给每个 'i' 一个索引字符。

![在此处输入图像描述](../Images/8b1014a8a07e7e9c61f50ce1d05bb87f.png)

用户按“H”后，插入符号将移至“私人”中的“i”。然后将所有标记字符更改为原始 'i'

**问题**

1.  此操作将在跳转期间更改文档内容。所以会有如下的历史变化。有没有办法忽略本地历史管理的变化？

2.  按 Cmd-z 后，有一个对话框显示“无法撤消”。如何避免这种情况？

![在此处输入图像描述](../Images/e09073c078fb2833ff563c722d98de43.png)

![在此处输入图像描述](../Images/a80c644102c355551f9791b1a4def17b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T17:13:39.653

您应该使用例如 HintManager 类在文档上绘制导航标记，而不是更改文档内容。

如果你改变了实际的文档内容，除了破坏撤消和本地历史之外，这将产生更多的后果——例如，文档将被重新解析，导致显示错误的语法错误；监视文档更改的任何其他插件或 IntelliJ IDEA 组件都会对此做出反应；如果用户正在使用需要显式签出操作的诸如 Perforce 之类的 VCS，则该文档将从 VCS 中签出；等等 TL/DR：不要那样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:24:05.800

万一有人谷歌并在这里找到。以下是我的最终解决方案。

我使用 Swing 图形绘图来显示标记，效果很好。

详情请参考：[https ://github.com/whunmr/emacsIDEAs/blob/master/src/org/hunmr/acejump/marker/MarkersPanel.java](https://github.com/whunmr/emacsIDEAs/blob/master/src/org/hunmr/acejump/marker/MarkersPanel.java)

# java - JButton的不透明度/半透明？

> ID：14303858
> 
> 赞同：3
> 
> 时间：2013-01-13T13:17:27.503
> 
> 标签：java, swing, transparency, jbutton, translucency

我有如下简单的 GUI 代码，其中我想让`JButton`一个半透明，以便后面的图像`JButton`可见！

```
package dealORnodeal;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Container;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;

public class Deal extends JFrame implements ActionListener
{
private Container contentPane = getContentPane();
private JButton one = new JButton("1"),two = new JButton("2");
private JMenu menu1 = new JMenu("JumpTo");
private JMenuBar bar1 = new JMenuBar();
private ImagePanel bg = new ImagePanel(new ImageIcon("bg.jpg").getImage());
public Deal()
{

    super("Deal Or No Deal");
    setSize(800,850);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setResizable(false);
    setLayout(null);
    contentPane.add(bg);

    JMenuItem item1;

    item1 = new JMenuItem("Start Game");
    item1.addActionListener(this);
    menu1.add(item1);

    item1 = new JMenuItem("GoTo Rules");
    item1.addActionListener(this);
    menu1.add(item1);

    item1 = new JMenuItem("GoTo Credits");
    item1.addActionListener(this);
    menu1.add(item1);

    item1 = new JMenuItem("GoTo Menu");
    item1.addActionListener(this);

    menu1.add(item1);
    bar1.add(menu1);
    setJMenuBar(bar1);

    //GAME CODE
    one.setBounds(25,151,190,49);
    one.addActionListener(this);

    add(one);
    //GAME CODE END

setVisible(true);
}

@Override
public void actionPerformed(ActionEvent e) 
{}
} 
```

现在，如果我想将按钮设置为半透明以便通过按钮可以看到背景图像，那么代码将如何。顺便说一句，请不要将半透明与透明混淆！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T14:54:57.903

我无法评论你的问题，所以我会在这里回答你..

如果您使用此代码：

```
myButton.setOpaque(false); 
```

它不会绘制按钮 - 因为现在它是透明的。要创建半透明按钮，我认为您应该覆盖按钮绘制方法..

看看这个[线程](https://stackoverflow.com/questions/7373345/how-to-create-partly-transparent-jbutton-on-fully-transparent-jframe)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-04T18:25:42.150

`setOpaque`不适用于 JButtons，正确的属性是：

`button.setContentAreaFilled(false);`

# c# - 无法使用 MonoGame 3 在 iOS 上加载字体

> ID：14303865
> 
> 赞同：2
> 
> 时间：2013-01-13T13:18:20.510
> 
> 标签：c#, ios, monogame

我正在尝试将字体加载到我的 iPhone 游戏中。我正在使用 C# 和 MonoTouch 以及出色的 MonoGame 项目（我从 github 上的 develop3d 分支获得了最新版本）。

我的字体在 Windows 上正确加载，但是当我尝试在 iPhone 上运行游戏时，我收到一条错误消息，提示无法加载字体。我已将精灵字体加载到 MonoGame 内容项目中并为 iOS 编译。

我已将生成的 xnb 文件作为内容导入，在属性中将其设置为内容模式，如果较新，则将其标记为副本。但是它仍然不会加载。经过大量挖掘，我发现 iOS 不支持 DXT 压缩字体，这显然是 SpriteFont 是什么。

我不知道如何将字体加载到我的游戏中。有人可以帮助一些代码如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:31:32.647

我刚刚想通了。对于那些在同一件事上苦苦挣扎的人，请按照以下步骤操作：

*   创建一个新的解决方案为所有平台选择单声道游戏内容（这基本上是一个用于构建内容的虚拟游戏）
*   添加新的单声道游戏内容构建器项目
*   将构建类型设置为您想要的类型，例如 iOS
*   添加你想要的内容
*   在每个内容文件的属性窗口中，将内容处理器更改为您正在构建的内容的单声道游戏版本。例如对于纹理选择“MonoGame - 纹理”
*   构建解决方案，将内容构建到您在发布目录中构建的平台的文件夹中
*   将内容从内容项目的已构建文件夹添加到您的游戏项目中。确保将构建操作设置为内容，并将副本设置为输出目录以在更新时进行复制（或复制总是无关紧要）
*   使用 xna 中的普通内容加载器使用内容

# jpa - 实体类的会话 Bean 错误消息：“EJB 远程接口依赖于 JPA 实体类......”

> ID：14303866
> 
> 赞同：3
> 
> 时间：2013-01-13T13:18:23.023
> 
> 标签：jpa, netbeans-7, session-bean

我在 NetBeans 7.1 中创建了一个新的 EnterpriseApplication (EA)。在 EJBModule 中添加了一些 JPA 实体。现在我想在 EnterpriseApplication 中添加一些 Remote SessionBeans。

然后右键单击 EJBModule，选择 Session Bean for Entity Classes。然后选择需要会话 Bean 的实体。在第 3 步窗口中，我选择远程接口复选框并从组合框中选择类库项目。

那是当我收到一条错误消息，指出“EJBRemote 接口依赖于 JPA 实体类。如果 JPA 实体位于“myejb”中，则无法访问它们

这是 NetBeans 7.1 中的错误还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T14:54:16.230

您应该在类库项目中创建实体类，将项目包含在 EJBModule 项目依赖项中，然后为 EJBModule 项目中的实体类创建会话 bean。远程接口将在类库项目中创建。

# sql - 正则表达式到以下字符串

> ID：14303867
> 
> 赞同：2
> 
> 时间：2013-01-13T13:18:26.413
> 
> 标签：sql, oracle, plsql

我有一个包含 2 列的表“SomeTableName”：

1) 整串

2）TSP

在“WholeString”列中，我可以获得两种类型的字符串：

1) [http://ads.jdtracker.com/?a=10515&c=19163&tsp=2974&s1=39827&s2=&s3=93885&s4=&s5=](http://ads.jdtracker.com/?a=10515&c=19163&tsp=2974&s1=39827&s2=&s3=93885&s4=&s5=)

2) TSP_2974_CTV_18933_HotGamesOnYourMobile

我必须创建触发器以从“WholeString”填充“TSP”列

“2974” - 是我必须放在 TSP 列中的值。

我的尝试：

```
CREATE OR REPLACE TRIGGER SomeTriggerName
  BEFORE INSERT OR UPDATE ON SomeTableName
  FOR EACH ROW

IF substr(WholeString, 1, [7]) = N'http://'
    NEW.TSP:=REGEXP_SUBSTR(WholeString, 'SomeRegexp')
IF substr(WholeString, 1, [4]) = N'TSP_'
    NEW.TSP:=REGEXP_SUBSTR(WholeString, '(?<=(tsp=|TSP_))\d{4}') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:17:41.323

```
CREATE OR REPLACE TRIGGER sometriggername
  BEFORE INSERT OR UPDATE ON sometablename FOR EACH ROW 
BEGIN
  :new.tsp := regexp_substr(:new.wholestring, '(tsp=|TSP_)(\d+)',1,1,'c',2);
END sometriggername; 
```

正则表达式搜索`tsp=`或`TSP_`，后跟一个或多个数字。而且您只希望报告第二组括号中的数字，因此是`1,1,'c',2`位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T13:39:11.903

在这里测试[http://blog.logiclabz.com/tools/online-regex-checker.aspx](http://blog.logiclabz.com/tools/online-regex-checker.aspx)：

```
(?<=(tsp=|TSP_))\d{4} 
```

# ruby - 在 Windows 上运行时无法退出 Guard

> ID：14303869
> 
> 赞同：3
> 
> 时间：2013-01-13T13:18:32.240
> 
> 标签：ruby, windows, guard

`bundle exec guard`在带有或不带有选项的 Windows 上运行 guard 时`-i`，我无法在不关闭终端窗口的情况下关闭它，它只是挂起并且不响应，`Ctrl+C`并且在没有`-i`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T07:43:04.990

试试`CTRL`+ `Break`。

我在停止 Webrick 时遇到了同样的问题，这也适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:45:59.267

键入 exit :) 至少在 OSX 上是这样的

# android - Android - 更改屏幕方向后无法删除和添加视图？

> ID：14303873
> 
> 赞同：0
> 
> 时间：2013-01-13T13:19:19.870
> 
> 标签：android, screen-orientation, viewgroup

屏幕方向更改后，我的动态添加视图出现了一些奇怪的行为。我真的很感激这里的一些帮助......

我的活动有一个基本布局，它是一个包含 ScrollView 和 backButton 的 LinearLayout。

```
<LinearLayout
  ...>
  <ScrollView
    android:id="@+id/scrollView_containerForDynamicallyAddedLinearLayouts"
    ...>
  </ScrollView>
  <Button
    android:id="@+id/backButton"
    android:onClick="onClick"
    .../>
</LinearLayout> 
```

在我的 Activity 中，我动态地创建了很多 LinearLayouts，它们还包含一些用于在 LinearLayouts 之间切换的导航按钮。这些 LinearLayout 存储在 ArrayList (panelViewList) 中，并在运行时从 ScrollView 中添加和删除（取决于单击了哪个导航按钮）。backButton 只是从 ScrollView 中删除所有视图。

```
public void onClick(View view) {
  if (view.getId() == R.id.backButton) {
    scrollViewContainer.removeAllViews();
  } else {
    String target = ((Button) view).getText().toString();
    scrollViewContainer.removeAllViews();
    for (LinearLayout ll : panelViewList) {                           
      if (ll.getContentDescription().toString().equals(target)) {     
        xmlVerticalScrollView.addView(ll);                            
        break;                                                        
      }
  }
} 
```

在屏幕方向改变之前，这真的很好，没有任何问题。屏幕方向更改后，当您单击动态添加的 LinearLayouts 中的导航按钮时不会发生任何事情（不删除视图，不添加目标视图）。但是单击后退按钮仍然可以正常工作（所有视图都将被删除）。为什么？

附加信息：我为单击后退按钮的情况和单击导航按钮的（其他）情况设置了调试器断点：方向更改后，当我单击动态创建的 LinearLayout 中的导航按钮时，检查scrollViewContainer 说所有的孩子都是空的（这是错误的）。但是当我点击后退按钮时，scrollViewContainer 有正确的孩子。这很奇怪……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T13:25:00.563

屏幕旋转将以新的方向重绘整个屏幕，我们可以通过覆盖配置更改来防止它。

在 Android Manifest 的屏幕声明下添加 android:configChanges="orientation|screenSize"

```
android:configChanges="orientation|screenSize" 
```

并在您的活动中覆盖 onConfigurationChanged(Configuration) ，例如

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
} 
```

# .net - System.Reflection.RuntimeMethodInfo.Equals 在 .NET 3.5 中因 NullReferenceException 而失败

> ID：14303877
> 
> 赞同：1
> 
> 时间：2013-01-13T13:19:37.927
> 
> 标签：.net, nullreferenceexception, system.reflection

`MethodBase`在将实例与`Equals`使用 .NET Framework 3.5 的方法进行比较时，我遇到了一个非常奇怪的行为——`NullReferenceException`如果将编译器定义的构造函数方法对象与开放的泛型方法对象进行比较，它就会失败。

这是重现代码：

```
class TheClass
{
    public T TheMethod<T>()
    {
        return default(T);
    }
}

class Program
{
    private static void Main(string[] args)
    {
        var ctor = typeof(TheClass).GetConstructors().Single();
        var generic = typeof(TheClass).GetMethods().Single(x => x.Name == "TheMethod");

        Console.WriteLine(generic.Name); // TheMethod
        Console.WriteLine(generic.GetType().Name); // RuntimeMethodInfo

        Console.WriteLine(ctor.Name); // .ctor
        Console.WriteLine(ctor.GetType().Name); // RuntimeConstructorInfo

        Console.WriteLine(generic.Equals(ctor)); // throws NullReferenceException
        Console.ReadKey();
    }
} 
```

它在 .NET 4.0 中运行良好。我已经`RuntimeMethodInfo.Equals`使用反编译器研究了 3.5 和 4.0 中的实现，这是有趣的部分：

**.NET 3.5**

```
if (!this.IsGenericMethod)
    return obj == this;
  RuntimeMethodInfo runtimeMethodInfo = obj as RuntimeMethodInfo;
  if (this.GetMethodHandle().StripMethodInstantiation() != runtimeMethodInfo.GetMethodHandle().StripMethodInstantiation() || runtimeMethodInfo == null || !runtimeMethodInfo.IsGenericMethod)
    return false;
// ... 
```

**.NET 4.0**

```
 if (!this.IsGenericMethod)
    return obj == this;
  RuntimeMethodInfo runtimeMethodInfo = obj as RuntimeMethodInfo;
  if ((MethodInfo) runtimeMethodInfo == (MethodInfo) null || !runtimeMethodInfo.IsGenericMethod || RuntimeMethodHandle.StripMethodInstantiation((IRuntimeMethodInfo) this).Value.Value != RuntimeMethodHandle.StripMethodInstantiation((IRuntimeMethodInfo) runtimeMethodInfo).Value.Value)
    return false; 
```

在 .NET 4.0 中，在使用可能为空的变量`null`之前移动了 -check 。`runtimeMethodInfo`对我来说，3.5 的行为似乎是一个框架错误，不是吗？

所以问题是 -**是否有解决方法或方法可以安全地比较这些对象**？请注意，在实际代码中，我不是`Equals`直接调用，而是在集合等的某个地方隐式使用它，所以捕获`NullReferenceExceptions`听起来不太好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:07:18.503

除了编写替换方法之外，看起来没有很好的解决`Equals`方法。或者至少在调用运行时的方法`ctor`之前会检查值。`Equals`

对于集合，创建一个`EqualityComparer`进行自定义比较。这将消除对默认`Equals`方法的调用。

# ruby - 知道如何在 Ruby 中优化这个关键循环吗？

> ID：14303887
> 
> 赞同：3
> 
> 时间：2013-01-13T13:20:56.620
> 
> 标签：ruby, optimization

我正在用 Ruby 编写一个 CSV 库（我知道，标准库很棒！）主要是为了好玩。目前它比标准慢大约 4 倍，我觉得它很奇怪，因为以下原因：我查看了 stdlib 中的 csv.rb ，它使用正则表达式来拆分行，我希望它不会很快。在我的库中，我使用 DFA，所以我确信它会在 O(n) 时间内运行 - 我几乎没有回溯，只有当我回溯一次以适应异常情况时（转义字符 == 引用字符) 并且它只发生大约 1% 的时间。

所以我很明显地分析了我的代码，这是占总运行时间 89% 的部分。这是为输入文件的每个字符运行的循环：

```
def consume token
  if !@separator and [:BEFORE_FIELD, :FIELD, :BEFORE_SEPARATOR].include?(@state)
    if @potential_separators.include? token
      @separator = token
    end
  end

  #puts "#{@state} - Token: #{token}"
  @state = case @state
  when :QUOTED_FIELD
    if @escape.include? token
      @last_escape_used = token
      :MAYBE_ESCAPED_QUOTE
    elsif token == @quote
      :BEFORE_SEPARATOR
    else
      @field += token
      :QUOTED_FIELD
    end
  when :FIELD
    case token
    when @newline
      got_field
      got_row
      :BEFORE_FIELD
    when @separator
      got_field
      :BEFORE_FIELD
    else
      @field += token
      :FIELD
    end
  when :BEFORE_FIELD
    case token
    when @separator
      got_field
      :BEFORE_FIELD
    when @quote
      :QUOTED_FIELD
    when @newline
      got_field
      got_row
      :BEFORE_FIELD
    else
      @field += token
      :FIELD
    end
  when :MAYBE_ESCAPED_QUOTE
    if token == @quote
      @field += @quote
      :QUOTED_FIELD
    elsif @last_escape_used == @quote
      @state = :BEFORE_SEPARATOR
      consume token
    else
      @field += @last_escape_used
      @field += token
      :QUOTED_FIELD
    end
  when :BEFORE_SEPARATOR
    case token
    when @separator
      got_field
      :BEFORE_FIELD
    when @newline
      got_field
      got_row
      :BEFORE_FIELD
    else
      raise "Error: Separator or newline expected! Got: #{token} at (#{@line}:#{@column})"
    end
  end

  if token == @newline
    @column =  1
    @line   += 1
  else
    @column += token.length
  end
  #puts "[#{@line}:#{@column} - #{token}] Switched to #{@state}"
  #if token == @quote then exit end
  @state
end 
```

这是分析输出：

![KCacheGrind 分析输出](../Images/3d5c53758d11ac1589c4b43bdff1e4ee.png)

此外，真正`consume`慢的是函数本身，而不是它调用的少数函数，因为 Self 部分高达总运行时间的 62%！

#consume 函数中发生的事情的详细信息是：

![KCacheGrind 分析详细信息](../Images/567053e1ef0a6acb9ccb3ed9d8815ab2.png)

我认为`case @state`可能是罪魁祸首，所以我做的第一件事就是把最常见`case`的 s 放在顶部（我做了基准测试：没有变化）。代码对我来说似乎很干净，我真的看不出我能在哪里获得太多，但我仍然觉得它比标准库慢得多，这很奇怪。

顺便说一下，我正在测试的文件是一个 2MB 的 CSV 文件。我逐行阅读它并在内存中没有存储任何内容。如果我用一个什么都不做的函数替换我的消耗函数，我会得到与 Ruby 标准 CSV 相同的速度（但当然它什么都不做 :)）所以我想我可以得出结论，瓶颈不在 I/O 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T13:32:46.867

两点：

*   你好像有很多`some_array.include?(something)`。这很慢。尝试用这样的哈希替换它：

    `some_hash = {this_key => true, that_key => true, ...}`

    并像`some_hash[something]`.

*   你好像有很多`some_string += another_string`。这很慢。请尝试：

    `some_string << another_string`

# ruby-on-rails - rake route - 没有路由匹配 [GET] "/" 错误

> ID：14303896
> 
> 赞同：0
> 
> 时间：2013-01-13T13:21:37.760
> 
> 标签：ruby-on-rails, routes

在访问`localhost:3000`时，我得到了典型的：

> 没有路线匹配 [GET] "/"

我不想看到那个错误屏幕。我已经尝试过`localhost:3000/passbook/v1/passes/`但仍然没有，所以我输入了：

```
rake routes 
```

并得到这个输出：

```
passbook GET    /passbook/v1/passes/:pass_type_identifier/:serial_number(.:format)                                           passbook/passes#show {:pass_type_identifier=>/([\w\d]\.?)+/}
             GET    /passbook/v1/devices/:device_library_identifier/registrations/:pass_type_identifier(.:format)                passbook/registrations#index {:pass_type_identifier=>/([\w\d]\.?)+/}
             POST   /passbook/v1/devices/:device_library_identifier/registrations/:pass_type_identifier/:serial_number(.:format) passbook/registrations#create {:pass_type_identifier=>/([\w\d]\.?)+/}
             DELETE /passbook/v1/devices/:device_library_identifier/registrations/:pass_type_identifier/:serial_number(.:format) passbook/registrations#destroy {:pass_type_identifier=>/([\w\d]\.?)+/}
passbook_log POST   /passbook/v1/log(.:format)                                                                                   passbook/logs#create 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:40:55.843

你还没有告诉 Rails 你的根路径是什么。你可以这样说

```
root to: "passes#show" 
```

在 config/routes.rb 中。之后，您应该在`rake routes`输出中看到：

```
root      /      passes#show 
```

然后它应该工作！

* * *

### 附加提示

对于您的问题，这可能是最重要的，但是按照测试驱动的方法，您应该首先编写一个规范：

```
describe "custom routing" do
    it "shows the root page" do
        get("/").should route_to("passes#show")
    end
end 
```

为此使用[RSpec 。](https://github.com/rspec/rspec)*在编写路由之前*在控制台中运行测试，然后`$ rspec`在正确的位置看到测试失败。

然后，实现上面的路由，再次运行测试——它应该可以工作了。通过这种方式，您可以确保您编写的代码刚好满足您的要求，并且您真正编写的代码可以让您访问根路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T13:43:12.460

这是您从其他人那里继承的 Rails 应用程序吗？

给定您提供的输出，如果您替换并使用数据库中的有效值`rake routes`，类似 url`localhost:3000/passbook/v1/passes/<EXAMPLE_PASS_TYPE_IDENTIFIER>/<EXAMPLE_SERIAL_NUMBER>`应该根据输出第一行中的规则工作。`EXAMPLE_PASS_TYPE_IDENTIFIER``EXAMPLE_SERIAL_NUMBER`

的错误消息`No route matches [GET] "/`是`localhost:3000`因为`root`在`rake routes`输出中没有映射。

您可以修改`config/routes.rb`文件并在文件底部添加以下行：

`root :to => "<controller_name>#<action_name>"`

例如：

```
root :to => "passbook/index" 
```

如果有`passbooks_contoller.rb`一个`index`方法。

最好从文档中了解有关[Rails 路由的](http://guides.rubyonrails.org/routing.html)更多信息。最好通过[Rails 教程](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)来更好地理解 Rails 框架。

# asp.net - 在 asp.net 会话中存储租户 ID？

> ID：14303900
> 
> 赞同：0
> 
> 时间：2013-01-13T13:21:47.353
> 
> 标签：asp.net, asp.net-mvc, multi-tenant

我正在构建一个多租户 MVC4 Web 应用程序。我根据 url 别名 (customername.webapp.net) 区分租户。我有一个存储客户 ID 的数据库，我可以使用客户名称查找它。

显然，在该客户的用户使用我的 web 应用程序的整个会话期间，我需要此客户标识。

在会话中存储这个唯一标识符是否可以接受？或者这种“会话数据”有更好的设计选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T13:58:48.120

我宁愿将此信息存储在表单身份验证 cookie 的 UserData 部分中（如果您使用的是 Forms Authenticatoin），或者如果您使用的是[`claims based authentication`](http://msdn.microsoft.com/en-us/library/hh291061.aspx). 当用户登录时，您将从当前请求中提取租户名称，查询您的数据库以获取租户 ID，然后将该 ID 持久化。如果您将 id 存储在 Forms Authentication cookie 的 UserData 部分中，您可以编写一个自定义`[Authorize]`属性，该属性将读取 FormsAuthenticationTicket，对其进行解密，从 UserData 部分获取租户 id，然后构建自定义主体。这样，您就可以在应用程序的任何地方使用它。如果您使用基于声明的身份验证，您只需将其添加为新声明。

我根本不会在我的应用程序中使用 Session 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-26T04:47:33.233

请不要被答案误导。使用 cookie 很危险。

在这种情况下，会话将是有效选项，而不是 cookie。如果您将tenantId 存储在cookie 中，并且您的应用程序根据您的cookie 建立数据库连接，那么在您以用户身份登录后，您可以篡改和更改cookie，现在您的应用程序将连接到另一个数据库，从而损害安全性。即使您的 cookie 是加密的，它也不是 100% 可靠的。

在这种情况下，会话将是可靠的服务器信息，用于跟踪应连接到哪个租户数据库。尽管 session 与 cookie 相比可能会降低性能，但在这种情况下，您没有其他好的选择。您正在设计一个多租户应用程序，而这只是您必须牺牲的东西。

是的，如果您真的愿意，您仍然可以使用 cookie。您只需要继续检查用户是否以某种方式连接到正确的数据库，对我来说，这比使用会话更多的是性能下降。

不要仅仅因为很多人滥用或讨厌它而讨厌会话。你只需要以正确的方式使用它。

底线是，如果您出于安全目的使用任何信息，请不要使用 cookie。

# visual-studio-2010 - 覆盖 VS2010 Project Invalidated (refreshed) 事件

> ID：14303902
> 
> 赞同：1
> 
> 时间：2013-01-13T13:21:53.693
> 
> 标签：visual-studio-2010, vspackage

当外部程序更改项目或解决方案文件时，我试图覆盖 VS2010 行为。Atm VS 会弹出一个弹出窗口，询问您是否要重新加载/保存项目文件。

我试图覆盖这种行为，但是我还没有找到解决方案。是否有某种方法可以覆盖事件或以编程方式设置 VS，以便它自动让外部更改刷新活动项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T13:29:24.307

有一些配置选项可用

```
Menu Tools - Options - Environment - Documents 
```

查看复选框和其他选项

```
Detect when file is changed outside the environment 
```

# python - Python：创建坐标列表（将字符串转换为 int）

> ID：14303905
> 
> 赞同：0
> 
> 时间：2013-01-13T13:22:25.273
> 
> 标签：python, list, int

我想从一个文本文件中导入几个坐标（最多可以加 20.000）。这些坐标需要添加到列表中，如下所示：

```
coords = [[0,0],[1,0],[2,0],[0,1],[1,1],[2,1],[0,2],[1,2],[2,2]] 
```

但是，当我想导入坐标时，出现以下错误：

```
invalid literal for int() with base 10 
```

我不知道如何正确导入坐标。有没有人有任何建议为什么这不起作用？我认为创建整数存在一些问题。我使用以下脚本：

```
Bronbestand = open("D:\\Documents\\SkyDrive\\afstuderen\\99 EEM - Abaqus 6.11.2\\scripting\\testuitlezen4.txt", "r")
headerLine = Bronbestand.readline()
valueList = headerLine.split(",")

xValueIndex = valueList.index("x")
#xValueIndex = int(xValueIndex)
yValueIndex = valueList.index("y")
#yValueIndex = int(yValueIndex)

coordList = []

for line in Bronbestand.readlines():
    segmentedLine = line.split(",")
    coordList.extend([segmentedLine[xValueIndex], segmentedLine[yValueIndex]])

coordList = [x.strip(' ') for x in coordList]
coordList = [x.strip('\n') for x in coordList]

coordList2 = []
#CoordList3 = [map(int, x) for x in coordList]

for i in coordList:
    coordList2 = [coordList[int(i)], coordList[int(i)]]

print "coordList = ", coordList
print "coordList2 = ", coordList2
#print "coordList3 = ", coordList3 
```

需要导入的坐标看起来像（这是脚本中的“Bronbestand”）：

```
id,x,y,
      1,  -1.24344945,   4.84291601
      2,  -2.40876842,   4.38153362
      3,  -3.42273545,    3.6448431
      4,  -4.22163963,   2.67913389
      5,   -4.7552824,   1.54508495
      6,  -4.99013376, -0.313952595
      7,   -4.7552824,  -1.54508495
      8,  -4.22163963,  -2.67913389
      9,  -3.42273545,   -3.6448431 
```

因此脚本应该导致：

```
[[-1.24344945, 4.84291601],[-2.40876842, 4.38153362],[-3.42273545, 3.6448431],[-4.22163963, 2.67913389],[-4.7552824, 1.54508495],[-4.99013376,-0.313952595],[-4.7552824, -1.54508495],[-4.22163963, -2.67913389],[-3.42273545, -3.6448431]] 
```

我还尝试使用本机 python csv 解析器导入坐标，但这也不起作用。

提前感谢大家的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T13:25:19.460

您的数字不是整数，因此转换为 int 失败。

尝试使用 float(i) 而不是 int(i) 来转换为浮点数。

```
>>> int('1.5')

Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    int('1.5')
ValueError: invalid literal for int() with base 10: '1.5'
>>> float('1.5')
1.5 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-13T13:26:28.203

[其他答案](https://stackoverflow.com/a/14303941/722121)已经说明了您的脚本失败的原因，但是，这里还有另一个问题-您正在大规模地重新发明轮子。

整个事情可以使用[模块](http://docs.python.org/3/library/csv.html)和[列表理解](http://www.youtube.com/watch?v=pShL9DCSIUw)[在`csv`](http://docs.python.org/3/library/csv.html)几行中完成：

```
import csv

with open("test.csv") as file:
    data = csv.reader(file)
    next(data)
    print([[float(x) for x in line[1:]] for line in data]) 
```

给我们：

```
[[-1.24344945, 4.84291601], [-2.40876842, 4.38153362], [-3.42273545, 3.6448431], [-4.22163963, 2.67913389], [-4.7552824, 1.54508495], [-4.99013376, -0.313952595], [-4.7552824, -1.54508495], [-4.22163963, -2.67913389], [-3.42273545, -3.6448431]] 
```

我们打开文件，`csv.reader()`解析 csv 文件，跳过标题行，然后制作一个解析为浮点数的列表，忽略第一列。

正如评论中所指出的，当您处理大量数据时，您可能希望懒惰地迭代数据。虽然制作一个列表可以很好地测试输出，但一般来说，您可能需要一个生成器而不是一个列表。例如：

```
([float(x) for x in line[1:]] for line in data) 
```

请注意，当您使用此生成器时，文件需要保持打开状态（保留在`with`块内）。

# android - 使用 facebook SDK 创建社交游戏

> ID：14303915
> 
> 赞同：0
> 
> 时间：2013-01-13T13:23:26.663
> 
> 标签：android, facebook, sdk

我正在为 android 设备创建一个游戏，我想在其中集成 Wordfeud、Draw Something 等社交配对系统。唯一的问题是我无法找到任何能提供我想要的东西的好的 SDK，所以我想可能有另一种解决方案。

所以我要问的是：有没有办法将我的游戏的社交匹配系统与只有 facebook sdk 或与对开发人员没有太多要求的 sdk 一起集成？

我想要的是玩家应该能够与 facebook 连接并在回合制游戏中挑战他们的朋友。没有虚拟货币，没有成就或任何类似的东西。只是互相挑战的能力。

我研究了几个社交 SDK：

*   OpenFeint - 良好的声誉，但不再服务。
*   GREE——不是我想要的。
*   ScoreLoop - 你必须成为他们的私人奴隶。
*   Swarm - 要求太高，没有 facebook 支持。

有没有我错过的SDK？有什么东西可以满足我的需求，还是我必须在没有任何有用的 SDK 的情况下集成我想要的东西？如果我必须自己做，我应该从哪里开始以及如何开始？

谢谢，我很感激你的帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-13T14:19:49.807

我认为您错过了[ScoreNinja](http://scoreninja.appspot.com/)，但这非常简单，并且没有与任何东西集成。除此之外还有[ScoreLoop](http://www.scoreloop.com/)，它很好，有点重，但你可以截断不想使用的部分。否则，您可以直接使用 Facebook 为您提供的内容，您可以[在此处](https://developers.facebook.com/docs/howtos/scores/)阅读。

# zooming - 穆宁变焦不起作用

> ID：14303918
> 
> 赞同：2
> 
> 时间：2013-01-13T13:23:32.980
> 
> 标签：zooming, freebsd, munin

Munin 安装在 FreeBSD 8.0 上。地址：[http](http://site.com/munin/) ://site.com/munin/ 路径：/usr/local/www/munin/

问题：缩放不起作用（图像未显示）。在 apache 日志中，我看到：

```
[Sun Jan 13 16:42:25 2013] [error] [client 1.2.3.4] File does not exist: /usr/home/site/htdocs, referer: http://site.com/munin/static/dynazoom.html?plugin_name=com%2Fsite.com%2Fhttp_response_time_site&start_iso8601=2013-01-12T08%3A26%3A43%2B0400&stop_iso8601=2013-01-12T14%3A17%3A43%2B0400&start_epoch=1357943743&stop_epoch=1357996393&lower_limit=&upper_limit=&size_x=800&size_y=400&cgiurl_graph= 
```

我的 httpd.conf：

```
Alias /munin/ "/usr/local/www/munin/" 
```

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-09T20:08:26.787

我知道这已经有一年多了，但我敢肯定还有其他人遇到这个问题并在谷歌上找到了这个。（像我这样的）

这适用于*Debian 7.6 + Munin 版本 2.0.6-4+deb7u2。*Zoom 实际上正在工作，但它只是 localhost。到目前为止，我没有在 Freebsd 或任何其他 bsd/linux 发行版上对此进行测试，但我认为问题和解决方案将是相似的。

请编辑此文件：

**/etc/munin/apache2.conf**

```
# Enables fastcgi for munin-cgi-graph if present
ScriptAlias /munin-cgi/munin-cgi-graph /usr/lib/munin/cgi/munin-cgi-graph
<Location /munin-cgi/munin-cgi-graph>
        Order allow,deny
#       Allow from localhost 127.0.0.0/8 ::1
        Allow from all
        # AuthUserFile /etc/munin/munin-htpasswd
        # AuthName "Munin"
        # AuthType Basic
        # require valid-user
        <IfModule mod_fastcgi.c>
                SetHandler fastcgi-script
        </IfModule>
</Location>

ScriptAlias /munin-cgi/munin-cgi-html /usr/lib/munin/cgi/munin-cgi-html
<Location /munin-cgi/munin-cgi-html>
        Order allow,deny
#       Allow from localhost 127.0.0.0/8 ::1
        Allow from all
        # AuthUserFile /etc/munin/munin-htpasswd
        # AuthName "Munin"
        # AuthType Basic
        # require valid-user
        <IfModule mod_fastcgi.c>
                SetHandler fastcgi-script
        </IfModule>
</Location> 
```

您将看到 munin-cgi-graph 和 munin-cgi-html 的“Allow from localhost 127.0.0.0/8 ::1”。请注释掉这些行并添加“全部允许”（当然根据您的安全设置进行更改）并重新启动 apache2。现在您应该能够缩放到您的图表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-16T17:50:09.933

我在 Ubuntu 12.04 上遇到了同样的问题，并通过以下步骤修复了它：

*   关闭 SELINUX：`$ sudo setenforce 0`
*   将此添加到 Apache vhost 配置中：`ScriptAlias /munin-cgi/ "/var/www/cgi-bin/"`
*   更改权限，`/var/log/munin`以便 Apache 可以在那里打开文件。

要找出 munin-cgi-graph 在您的系统上的安装位置：

*   `find / -name munin-cgi-graph`

# jquery - 为什么这个 jquery 代码不能与 for 循环和 $.get 一起使用

> ID：14303922
> 
> 赞同：-8
> 
> 时间：2013-01-13T13:23:43.880
> 
> 标签：jquery, ajax, get

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
</script>
<script>
$(document).ready(function(){
  $("button").click(function(){
    for(int i = 0; i < 10; i++){
          $.get("http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_ajax_get",function(data,status){
      //alert("Data: " + data + "\nStatus: " + status);
    });
   }
  });
});
</script>
</head>
<body>

<button>Send an HTTP GET request to a page and get the result back</button>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:35:14.460

您的语法有问题，请尝试在 Chrome 开发人员工具中打开您的文件：您将得到一个`Uncaught SyntaxError: Unexpected identifier`. 这是因为 JavaScript 不是 C：您不能将变量定义为类型，就像在第 9 行所做的那样，您需要使用如下`var`关键字定义它：

```
for(var i = 0; i < 10; i++){
      $.get("http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_ajax_get",function(data,status){
  //alert("Data: " + data + "\nStatus: " + status);
}); 
```

在 w3schools 的编辑器上运行它对我有用。

# jquery - jQuery Mobile：一些按钮图标不显示

> ID：14303923
> 
> 赞同：1
> 
> 时间：2013-01-13T13:23:45.880
> 
> 标签：jquery, jquery-mobile

我在本地使用 jQuery mobile（不是来自 CDN），到目前为止一切正常。我想按此处所述更改某些按钮的图标，但某些图标（例如条形图和编辑）不起作用。

更新：尝试了 CDN 文件，它也不起作用。

例如，如果我使用此代码：

```
<div data-role="content">
  <a href="index.html" data-role="button" data-icon="edit">My button</a>
</div> 
```

该按钮以加号图标呈现。奇怪的是，一些图标（如加号、箭头-u、箭头-d、前进和检查）工作得很好。有人有什么建议吗？这里可能出了什么问题？提前致谢！

```
./:     index.html
./css:  jquery.mobile-1.2.0.css   jquery.mobile-1.2.0.min.css
./css/images: ajax-loader.gif  icons-18-white.png  icons-36-white.png  icons-18-black.png  icons-36-black.png
./js:   custom-scripting.js  jquery-1.8.3.min.js  jquery.mobile-1.2.0.min.js  jquery-1.8.3.js    jquery.mobile-1.2.0.js 
```

我的 html 文件的头部如下所示：

```
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="./css/jquery.mobile-1.2.0.css" />
  <script src="./js/jquery-1.8.3.js"></script>
  <script src="./js/custom-scripting.js"></script>
  <script src="./js/jquery.mobile-1.2.0.js"></script>
</head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T00:11:53.587

Bars 和 Edit 图标在一个月前刚刚添加到 jQuery Mobile [https://github.com/jquery/jquery-mobile/issues/5340](https://github.com/jquery/jquery-mobile/issues/5340)

这些图标不在最新的稳定版 jQuery Mobile (1.2.0) 中，如果您使用[最新版本的 jQuery Mobile](http://jsbin.com/opigaj/1/edit)或等到 jQuery Mobile 1.3.0 出来，您可以获得这些图标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:18:19.007

您必须在 CSS 文件（jquery.mobile-1.2.0.css）中设置 ui-icon-edit 类的背景位置，例如：

```
.ui-icon-edit {background-position: -288px 0;} 
```

# javascript - 返回值未定义

> ID：14303930
> 
> 赞同：0
> 
> 时间：2013-01-13T13:24:22.433
> 
> 标签：javascript, undefined

如果我控制台记录 count+1 的输出，我会得到一个正确的数值。如果我输出 note.note_id 的值，我会得到未定义。为什么是这样？

我尝试将值设置为函数内部的预定义值。

```
note.note_id = db.notes.count(function(err, count) {
  return count + 1;
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T13:27:06.353

在不知道是什么的情况下很难回答，`db.notes`但它似乎是访问数据库的东西。这意味着它很可能是异步的，这意味着该`count()`方法永远不会返回值，但是您需要对回调中的结果执行任何您想做的事情。

```
db.notes.count(function(err, count) {
    note.note_id = count + 1;
    // do more stuff here
});
// do NOT do stuff here. it will run BEFORE the callback has been executed 
```

# android - 无法从主要活动切换到列表视图

> ID：14303932
> 
> 赞同：-1
> 
> 时间：2013-01-13T13:24:34.917
> 
> 标签：android, listactivity

我无法从我的主要活动切换到列表活动，我通过观看视频教程创建了列表活动并遵循了相同的步骤，但是当我单击按钮切换到菜单时，我收到错误“不幸的是程序已停止工作“

```
Button button1; 
    button1 = (Button)findViewById(R.id.but1);

    button1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent i = new Intent(MainActivity.this,Menu.class);
            startActivity(i); 
```

菜单类如下：

```
public class Menu extends ListActivity{
String classes[] = {"First","Second","Third"};

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setListAdapter(new ArrayAdapter<String>(Menu.this,android.R.layout.simple_list_item_1, classes));
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    String cheese=classes[position];
    try{
    Class ourClass=Class.forName("com.ashsoft.basiccprogram." + cheese);
    Intent ourIntent=new Intent(Menu.this,ourClass);
    startActivity(ourIntent);
    }catch(ClassNotFoundException e){

        e.printStackTrace();
    } 
```

**日志猫：**

```
Log file : `01-13 13:53:03.481: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:03.481: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:03.481: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:04.511: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:04.521: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:05.602: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:05.602: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:05.681: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:05.771: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:06.001: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:06.071: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:06.071: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:06.181: I/Choreographer(1400): Skipped 68 frames!  The application may be doing too much work on its main thread.
01-13 13:53:06.362: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:06.442: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:06.491: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:06.501: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:06.511: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:06.532: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:06.581: D/gralloc_goldfish(1400): Emulator without GPU emulation detected.
01-13 13:53:06.702: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:06.851: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:16.741: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:16.782: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:16.801: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:16.801: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:16.872: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:16.911: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:16.931: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:16.951: W/Trace(1400): Unexpected value from nativeGetEnabledTags: 0
01-13 13:53:17.052: D/AndroidRuntime(1400): Shutting down VM
01-13 13:53:17.052: W/dalvikvm(1400): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
01-13 13:53:17.151: E/AndroidRuntime(1400): FATAL EXCEPTION: main
01-13 13:53:17.151: E/AndroidRuntime(1400): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.ashsoft.basiccprogram/android.view.Menu}; have you declared this activity in your AndroidManifest.xml?
01-13 13:53:17.151: E/AndroidRuntime(1400):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1618)
01-13 13:53:17.151: E/AndroidRuntime(1400):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1417)
01-13 13:53:17.151: E/AndroidRuntime(1400):     at android.app.Activity.startActivityForResult(Activity.java:3370)
01-13 13:53:17.151: E/AndroidRuntime(1400):     at android.app.Activity.startActivityForResult(Activity.java:3331)
01-13 13:53:17.151: E/AndroidRuntime(1400):     at android.app.Activity.startActivity(Activity.java:3566)
01-13 13:53:17.151: E/AndroidRuntime(1400):     at android.app.Activity.startActivity(Activity.java:3534)
01-13 13:53:17.151: E/AndroidRuntime(1400):     at com.ashsoft.basiccprogram.MainActivity$1.onClick(MainActivity.java:27)
01-13 13:53:17.151: E/AndroidRuntime(1400):     at android.view.View.performClick(View.java:4202)
01-13 13:53:17.151: E/AndroidRuntime(1400):     at android.view.View$PerformClick.run(View.java:17340)
01-13 13:53:17.151: E/AndroidRuntime(1400):     at android.os.Handler.handleCallback(Handler.java:725)
01-13 13:53:17.151: E/AndroidRuntime(1400):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-13 13:53:17.151: E/AndroidRuntime(1400):     at android.os.Looper.loop(Looper.java:137)
01-13 13:53:17.151: E/AndroidRuntime(1400):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-13 13:53:17.151: E/AndroidRuntime(1400):     at java.lang.reflect.Method.invokeNative(Native Method)
01-13 13:53:17.151: E/AndroidRuntime(1400):     at java.lang.reflect.Method.invoke(Method.java:511)
01-13 13:53:17.151: E/AndroidRuntime(1400):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-13 13:53:17.151: E/AndroidRuntime(1400):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-13 13:53:17.151: E/AndroidRuntime(1400):     at dalvik.system.NativeStart.main(Native Method)
01-13 13:53:25.911: I/Process(1400): Sending signal. PID: 1400 SIG: 9
` 
```

清单代码：

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.ashsoft.basiccprogram.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

     <activity
        android:name="com.ashsoft.basiccprogram.First"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.FIRST" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
        <activity
        android:name="com.ashsoft.basiccprogram.Menu"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MENU" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

</application> 
```

我使用的教程没有使用任何 xml 文件作为列表。

主要问题是列表没有显示出来。每当我从主要活动中单击菜单按钮时，它就会停止工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T13:29:17.893

看来您尚未在清单文件中注册该 Menu 类。

如果它仍然不起作用，请发布 logcat，以便有机会编辑我的答案。

**编辑：**

首先是你的长流程任务必须围绕异步任务。

暂时让我们离开吧。试试这个：

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.ashsoft.basiccprogram.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

     <activity
        android:name="com.ashsoft.basiccprogram.First"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.FIRST" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
        <activity
        android:name=".ListScreenActivity"
        android:label="@string/app_name" >

    </activity> 
```

**您的 ListScreenActivity：**

```
public class ListScreenActivity extends ListActivity{
String classes[] = {"First","Second","Third"};

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setListAdapter(new ArrayAdapter<String>(ListScreenActivity.this,android.R.layout.simple_list_item_1, classes));

               ListView listView = getListView();
           listView.setTextFilterEnabled(true);

listView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
               //show toast
                Toast.makeText(getApplicationContext(),"Clicked on "+classes[position], Toast.LENGTH_SHORT).show();
            }
        });

} 
```

# ios - 获取按钮图像的路径（iOS）

> ID：14303933
> 
> 赞同：0
> 
> 时间：2013-01-13T13:24:38.473
> 
> 标签：ios, objective-c, uibutton, uiimage

我创建了一个 UIButton 子类，我需要获取按钮所具有的图像的路径。我会写`self.path`但不会`self.imageView.image.path`有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:02:38.900

我不相信你能得到这条路。如果您查看 UIImage 的 api 文档，您可以使用文件进行实例化，但是当您拥有一个实例时，该文件已经消失，并且仍然存在 NSData。

这不会很有效，但是如果您知道用于创建图像的候选文件，那么也许您可以散列 NSData，并与 UIButton 的 UIImage 上的 NSData 散列进行比较？

# touch - Corona中触摸和点击之间的区别

> ID：14303936
> 
> 赞同：2
> 
> 时间：2013-01-13T13:24:50.233
> 
> 标签：touch, coronasdk, tap

我不完全明白 Corona 中的点击和触摸有什么区别。我同时使用它们，当一个对象触摸一个对象时，它们都会监听事件，直到我编写了这段代码，它会在触摸 nextButton 时更改图像。就像当我触摸 nextButton 时，它调用了两次函数。但是，当我将其更改为 Tap 时，它运行顺利。那么你能告诉我触摸和点击之间有什么区别，以及当我在这段代码中使用触摸时导致问题的原因是什么？

```
 function nextButton:touch(event)
   if i==7 then 
   else
    i=i+1   
    imageObject:removeSelf()    
    imageObject =display.newImage(imageTable[i]..".jpg")
    imageObject.x=_W/2
    imageObject.y=_H/2 
   end
 end

 nextButton:addEventListener("touch", nextButton) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T08:06:25.170

在电晕触摸监听器中，您有 3 个状态：

```
 function listener(event)

     if event.phase == "began" then
   -- in the 1st tap the phase will be "began"
       elseif event.phase == "moved" then
   -- after began phase when the listener will be called with moved phase,like          touched coordinates
       elseif event.phase == "ended" then
       --when the touch will end 
     end

   end

    nextButton:addEventListener("touch", listener) 
```

--[[这是一个简单的图像触摸监听器，自制按钮等，顺便说一句，当你需要你的按钮时，使用 ui 库正是为此 [http://developer.coronalabs.com/code/enhanced -ui-library-uilua](http://developer.coronalabs.com/code/enhanced-ui-library-uilua) ]]

```
 -- example for usage
    local ui = require "ui" -- copy the ui.lua to your apps root directory

   yourButton = ui.newButton{
    defaultSrc = "menu/icon-back.png",--unpressed state image 
    x=85,
        y=display.contentHeight-50,
    defaultX = 110,
    defaultY =80,
    offset=-5,

    overSrc = "menu/icon-back-2.png",--pressed state image
    overX = 110,
    overY = 80,
    onEvent = buttonhandler,
    id = "yourBtnId" -- what you want
    }

      local function buttonhandler(event)

         if event.phase == "release" then

          --if you have more buttons handle it whit they id-s
            if event.id == "yourBtnId" then
              -- when your button was finally released (like in 1st example ended, but this will be called only if the release target is your button)
            end 

         end
      end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T22:05:48.833

“轻击”是短暂的触摸和释放动作。触摸可以是触摸、移动然后释放或触摸并按住等。点击事件简化了您的代码，因为您只得到一个事件：点击发生。您不必为所有的触摸状态编写代码。

典型的点击处理程序如下所示：

```
local function tapHandler(event)
    -- do stuff
    return true
end 
```

where 有一个执行完全相同的操作的触摸处理程序如下所示：

local function touchHandler(event) if event.phase == "ended" then -- do stuff end return true end

# android - Android中具有最小值和最大值的进度条

> ID：14303937
> 
> 赞同：-3
> 
> 时间：2013-01-13T13:24:52.437
> 
> 标签：android

我想为我的产品销售实现这个进度条

![在此处输入图像描述](../Images/fd4e6f638b7be4851fe814671a5e4b2c.png)

我有总数和销售产品编号。我怎样才能用这个设计实现这个进度条？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T14:10:55.737

我使用此代码

```
<ProgressBar
       android:id="@+id/progressBarSell"
       style="?android:attr/progressBarStyleHorizontal"
       android:layout_width="80dp"
       android:layout_height="10dp"
       android:max="26"
       android:progress="12" /> 
```

# ---------------------------------------------

```
progressBarSell.setProgress(Total - Remaining);
progressBarSell.setMax(Total); 
```

这很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T13:36:37.480

您可以使用 SeekBar 代替 ProgressBar，有关更多信息，请访问链接：

[http://www.mokasocial.com/2011/02/create-a-custom-styled-ui-slider-seekbar-in-android/](http://www.mokasocial.com/2011/02/create-a-custom-styled-ui-slider-seekbar-in-android/) https://github.com/AndroSelva/Vertical-SeekBar-Android [http:// /united-coders.com/nico-heid/an-android-seekbar-for-your-mediaplayer/](http://united-coders.com/nico-heid/an-android-seekbar-for-your-mediaplayer/)

```
///////

seek6.setOnSeekBarChangeListener(new OnSeekBarChangeListener(){   
public void onStopTrackingTouch(SeekBar seekBar) {

//TODO My code goes here

int CurrentLevel = seek6.getProgress();
    if (CurrentLevel < 30) CurrentLevel = 30;
    seek6.setProgress(CurrentLevel);

}

public void onStartTrackingTouch(SeekBar seekBar){

}

public void onProgressChanged(SeekBar seekBar, int progress,
boolean fromUser){

}
}); 
```

# sharepoint-2010 - 访问代码隐藏的价值

> ID：14303940
> 
> 赞同：0
> 
> 时间：2013-01-13T13:25:14.460
> 
> 标签：sharepoint-2010, httprequest, applicationpage

我在 SharePoint 应用程序页面上有一个小表格：

```
 <form method="post" id="registration-form" action="default.aspx" class="form-general cf" data-querycompletion-url="ajax/searchinstant.aspx">
     <input type="text" id="name" name="name" placeholder = "Your name" runat="server" />
          <input type="text" id= "company" name="company" placeholder= "Your company" runat="server"/>
    <input type="text" id="srchtxtx" class="search" name="visitor" placeholder="visitor" runat="server" />
    <input name="btnConfirm" id="Submit1" class="right" value="register" type="submit" runat="server" /></form> 
```

在 default.aspx 的代码隐藏处，我想以如下方式访问值：

```
string val1 = name.value;
string val2 = company.value;
string val3 = srchtxtx.value; 
```

但上面分别在 val1、val2 和 val3 中返回空字符串。但是如果我`runat = "server"`从`<input>`标签中删除，那么我可以成功地访问值：

```
string val1 = Request.Form["name"];
string val2 = Request.Form["company"];
string val3 = Request.Form["visitor"]; 
```

问题是为什么当我`runat = "server"`在`<input>`标签中使用时它返回空字符串值？由于某些原因，我无法`runat = "server"`从`<input>`标签中删除。

`<input>`在假设 runat = "server" 属性的同时，还有其他方法可以访问代码隐藏中的值`<input>`吗？

我也被限制不使用`<asp:TextBox>`控制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:53:49.977

正如我在[以空值提交的 html 表单](https://stackoverflow.com/questions/14297083/html-form-submitted-with-null-values)中所暗示的那样，这是因为表单没有`runat="server"`，因此 asp.net 不处理回发数据，即未填充 srchtxtx 等的属性。

然而 html 元素仍然在页面上被赋予唯一的 id，所以你不能只是这样做`Request.Form["srchtxtx"];`

为了解决这个问题，您可以使用输入元素的[UniqueID](http://msdn.microsoft.com/en-us/library/system.web.ui.control.uniqueid.aspx)来获取回发的值：

**HTML**

```
<form method="post" id="registration-form" action="default.aspx" class="form-general cf" data-querycompletion-url="ajax/searchinstant.aspx">
    <input type="text" id="srchtxtx" name="srchtxtx" runat="server" />
    <input name="btnConfirm" id="Submit1" class="right" value="register" type="submit" runat="server" />
</form> 
```

**C＃**

```
protected void Page_Load(object sender, EventArgs e)
{
    string val1 = srchtxtx.Value; // always ""
    string val2 = Request.Form["srchtxtx"]; // always null
    string val3 = Request.Form[srchtxtx.UniqueID]; // input value
} 
```

# android - 当我在android中滑动页面时，如何像滑块一样移动我的活动

> ID：14303943
> 
> 赞同：0
> 
> 时间：2013-01-13T13:25:27.663
> 
> 标签：android, eclipse, android-layout, android-activity, android-gesture

当我滑动页面时，我想在我的活动之间进行移动。当我滑动页面时，页面必须随着我的手部动作而出现。

我已经使用`SimpleOnGestureListener`并更改了意图的活动来检测滑动方向。但我没有得到我想要的。我需要那种效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T13:30:18.563

您可以像这里描述的那样实现从左到右的幻灯片动画。 [Android 从左到右滑动动画](https://stackoverflow.com/questions/5151591/android-left-to-right-slide-animation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:19:05.793

`While I swipe the page, the pages have to come with my hand movement.`

那是一个[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)，然后您使用[PagerAdapter](http://developer.android.com/reference/android/support/v4/view/PagerAdapter.html)或[FragmentPagerAdapter](http://developer.android.com/reference/android/support/v13/app/FragmentPagerAdapter.html)或[FragmentStatePagerAdapter](http://developer.android.com/reference/android/support/v13/app/FragmentStatePagerAdapter.html)（取决于具体需要，阅读文档）来提供每个“页面”的内容。

# android - OptionsItem - 更改标题中的默认标题

> ID：14303945
> 
> 赞同：-1
> 
> 时间：2013-01-13T13:25:52.493
> 
> 标签：android, android-layout, android-preferences, android-optionsmenu

我的活动中有一个 MenuItem。当我单击 Menuitem 中的任何一个菜单时，它会触发相关的 avtivity。但是当我单击 aboutus 菜单时，弹出窗口将标题显示为 MainActivity。如何更改此标题 MainActivity ？

aboutus.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="checking...." /> 
```

```
public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    switch(item.getItemId()) {
        case R.id.aboutus:
            Intent i = new Intent("android.intent.action.ABOUTUS");
            startActivity(i);
            break;
            case R.id.preferences:
                Intent p = new Intent("android.intent.action.PREFERENCES");
                startActivity(p);
                break;

    }
    return false;
} 
```

![在此处输入图像描述](../Images/a6be32cb322798004351eae8fcc59da0.png)

![在此处输入图像描述](../Images/60aa0c02bc3de8c8337ba3931967cba8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T13:40:31.730

改变这个标题**MainActivity**就像这很多方法一样。

**正常方式，**

您可以通过设置它们来更改每个屏幕的**标题**（即活动）`Android:label`

```
 <activity android:name=".Hello_World"
                  android:label="This is the Hello World Application">
   </activity> 
```

**自定义 - 标题 - 栏**

但是如果你想以你的方式自定义标题栏，即想要放置图像图标和自定义文本，那么下面的代码正在为我运行：

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

</LinearLayout> 
```

**标题栏.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="400px" 
  android:layout_height="fill_parent"
  android:orientation="horizontal">

<ImageView android:id="@+id/ImageView01" 
            android:layout_width="57px" 
            android:layout_height="wrap_content"
            android:background="@drawable/icon1">

</ImageView>

<TextView 

  android:id="@+id/myTitle" 
  android:text="This is my new title" 
  android:layout_width="fill_parent" 
  android:layout_height="fill_parent" 
  android:textColor="@color/titletextcolor"
   />
</LinearLayout> 
```

**标题栏.java**

```
public class TitleBar extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
           super.onCreate(savedInstanceState);

           final boolean customTitleSupported = requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

           setContentView(R.layout.main);

           if ( customTitleSupported ) {
               getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.titlebar);
               }

           final TextView myTitleText = (TextView) findViewById(R.id.myTitle);
           if ( myTitleText != null ) {
               myTitleText.setText("NEW TITLE");

               // user can also set color using "Color" and then "Color value constant"
              // myTitleText.setBackgroundColor(Color.GREEN);
           }
   } 
```

}

**字符串.xml**

**strings.xml**文件在values 文件夹下定义。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="hello">Hello World, Set_Text_TitleBar!</string>
    <string name="app_name">Set_Text_TitleBar</string>

    <color name="titlebackgroundcolor">#3232CD</color>
    <color name="titletextcolor">#FFFF00</color>

</resources> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T13:38:41.590

您可以在 Android Manifest 中使用 android:label 属性

```
android:label="This is the Hello World Application" 
```

你也动态设置它。创建具有所需布局的 xml 布局 titlebar.xml。

```
@Override
public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       final boolean titleSupported = requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
       setContentView(R.layout.main);

       if ( titleSupported ) {
           getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.titlebar);
       }
} 
```

# xml - 如何使用 YII 解析 xml 文件

> ID：14303954
> 
> 赞同：1
> 
> 时间：2013-01-13T13:27:09.813
> 
> 标签：xml, yii

我在表中有一个带有`text`名称的字段。该表的一行是：

```
<message type="chat"
         id="purple6ba21864" 
         to="10713@172.30.12.44/e859f0e7" 
         from="10735@172.30.12.44/qutecom">

<active xmlns="http://jabber.org/protocol/chatstates"/>
<body>test</body>
<thread>aaaa</thread>
</message> 
```

结果： `testaaaa`

我只需要显示“测试”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T13:45:40.870

截至目前（1.1.13 版），Yii 不提供任何帮助类来处理 XML 数据，即使在某些情况下基于 XML 的功能是明显的遗漏（例如，假设的`CXmlDataProvider`）。

目前，您将不得不使用标准 PHP API（simplexml、DOMDocument 等）或第三方 XML 库手动处理 XML。

# responsive-design - 将 Zurb Foundation 与 Kendo UI 一起使用

> ID：14303955
> 
> 赞同：3
> 
> 时间：2013-01-13T13:27:15.067
> 
> 标签：responsive-design, kendo-ui, zurb-foundation

我正在使用最新的 Foundation (3.x)。什么是同时使用 KendoUI 并利用 Zurb 的响应功能同时获得 Kendo 的 JS 位（例如图表）的最佳方式。

有没有人有这方面的经验，尤其是移动版网站？我应该注意什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-14T23:18:36.260

1.  使用 Zurb 4 和最新的剑道 UI。
2.  进入 Zurb 的 app.scss 文件
3.  关闭（注释掉）这些组件：表单、自定义表单和表格

如果你发现任何奇怪的地方，你可以使用这个帮助 CSS 作为 CSS Fix，然后将这个类添加到一个包裹在你的 kendo 小部件周围的 DIV 中：

```
.foundation-kendo *, .foundation-kendo *:before, .foundation-kendo *:after {
  -moz-box-sizing: content-box;
  -webkit-box-sizing: content-box;
  box-sizing: content-box;
} 
```

例如

```
<div class="foundation-kendo">
    <div id="grid"></div>
</div> 
```

如果您按照第 3 步操作，上述 CSS hack 应该仍然是相当不必要的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-31T13:20:09.290

我也非常有兴趣与 KendoUI 和 Foundation 一起工作，因为我更喜欢最后一个用于响应式网站，而不是 Bootstrap。

所以我最近几天开始检查是否有可能，并且 KendoUI 和 Foundation 之间没有任何设计风格问题。好吧，出现了一些问题，这是我修复它们的方法：

使用 Foundation 4.3.1 和 KendoUI Web 2013 Q2：

1.  **KendoGrid 小部件**：标题太高
    *   只需删除 Foundation 中的 Table 类样式支持
2.  **KendoDropDownList 小部件和类似的（即 ComboBox、DatePicker 等）和在 KendoGrid 中拖动 n'Drop**：弹出窗口离文字太远，拖动 n'drop 离指针太远

    ```
    body {
        position: static;
    }

    *[class*="k-"] {
        -moz-box-sizing: content-box !important;
        -webkit-box-sizing: content-box !important;
        box-sizing: content-box !important;
    }
    table {
        margin-bottom: 0px!important;
    } 
    ```

这是您必须添加的代码，以使 KendoUI 几乎一切正常（我希望，到目前为止，我还没有发现任何故障）。小心最后的代码，因为它会将样式应用于所有类以“k-”开头的标签（这是 KendoUI 团队的惯例，将“k-”放在所有名称中）。

希望这可以帮助！:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T20:08:05.560

您可以尝试使用刚刚发布的 Foundation 4。他们从使用 jQuery 转移到了 Zepto，这可能会消除冲突。不过，Bootstrap 没有任何问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-28T22:17:37.793

不确定这是您想听到的答案……我也不确定这是正确的答案……但这是我的经验。

我有一个使用 Zurb Foundation 3 的现有项目。它是一个 MVC4 Web 应用程序，我们使用的是 VS2012。我们真的很喜欢 Foundation 的响应式设计……但我们想使用几个 Kendo Widget。

在没有 Foundation 的情况下使用标准 MVC 项目中的小部件进行学习/实验后，我决定尝试将 Kendo 放入带有 Foundation 的项目中。我花了半天的时间试图让它工作，但从来没有让两者一起工作。如果我把基础的东西拿出来，剑道的东西就很好用。与其花更多时间试图让这项工作正常工作，我们正在考虑可能只是转向 twitter 引导程序。

根据这个博客[http:](http://www.kendoui.com/blogs/teamblog/posts/13-01-18/easy_application_layout_with_twitter_bootstrap.aspx) //www.kendoui.c​​om/blogs/teamblog/posts/13-01-18/easy_application_layout_with_twitter_bootstrap.aspx 剑道的东西应该可以很好地与引导程序一起工作，并且为了我们的目的，引导程序在我们的应用程序中也能正常工作正如基金会所做的那样。

祝你好运！

# android - onResume 弄乱了我的布局并使图标变大

> ID：14303956
> 
> 赞同：0
> 
> 时间：2013-01-13T13:27:15.317
> 
> 标签：android, xml, android-activity, oncreate, onresume

我有一个包含 onCreate 和 OnResume 的应用程序，如下所示：

**菜单活动**

```
public class MenuActivity extends Activity   {
    AdView  adView ;
    TextView tv;
    int weekSince;
    int numberOfDaysSince;
    static String DueDateChanged = "com.app.antiwal7amel.DueDateChanged";

    @Override   
     public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);  
        setContentView(R.layout.activitymain);

        tv = (TextView)findViewById(R.id.tv);
      adView = new AdView   (this, AdSize.BANNER , "a15013b6f790555");

         AdRequest adRequest = new AdRequest();
         adRequest.addTestDevice(AdRequest.TEST_EMULATOR);

         RelativeLayout.LayoutParams relativeParams = new RelativeLayout.LayoutParams(
         RelativeLayout.LayoutParams.WRAP_CONTENT, 
         RelativeLayout.LayoutParams.WRAP_CONTENT);
         relativeParams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);

         adView.loadAd(adRequest);

//         this.addContentView(adView, relativeParams);
         RelativeLayout rootView = (RelativeLayout)findViewById(R.id.rl);
         rootView.addView(adView, relativeParams);

        ImageButton menu1 = (ImageButton)findViewById(R.id.menu1);
        ImageButton menu2 = (ImageButton)findViewById(R.id.menu2);
        ImageButton menu3 = (ImageButton)findViewById(R.id.menu3);
       ImageButton menu4 = (ImageButton)findViewById(R.id.menu4);
       ImageButton menu5 = (ImageButton)findViewById(R.id.menu5);
       ImageButton menu6 = (ImageButton) findViewById(R.id.menu6);
       ImageButton menu7 = (ImageButton) findViewById(R.id.menu7);
       ImageButton menu9 = (ImageButton)findViewById(R.id.menu9);
       ImageButton menu10 = (ImageButton)findViewById(R.id.menu10);
       ImageButton menu11 = (ImageButton)findViewById(R.id.menu11);

       SharedPreferences periodDatePreferences = PreferenceManager.getDefaultSharedPreferences(this);
         int chosenDay= periodDatePreferences.getInt("chosenDay", 0);
         int chosenMonth =  periodDatePreferences.getInt("chosenMonth", 0);
        int chosenYear =   periodDatePreferences.getInt("chosenYear", 0);
          System.err.println("Shared Preferences main menu "+chosenYear+chosenMonth+chosenDay);

       menu1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
            Intent i = new Intent(MenuActivity.this,birthDate.class);
            startActivity(i);
                  }

        });

       menu2.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
            Intent i = new Intent(MenuActivity.this,You.class);
            startActivity(i);
                  }

        });

       menu3.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
            Intent i = new Intent(MenuActivity.this,YourBaby.class);
            startActivity(i);
                  }

        });

       menu4.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
            Intent i = new Intent(MenuActivity.this,TataworatYawmeeh.class);
            startActivity(i);
                  }

        });

       menu5.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
            Intent i = new Intent(MenuActivity.this,DoctorVisitsActivity.class);
            startActivity(i);
                  }

        });

       menu6.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
        Intent i = new Intent(MenuActivity.this,QuestionsActivity.class);
        startActivity(i);
              }

    });

       menu7.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
        Intent i = new Intent(MenuActivity.this,AdviceActivity.class);
        startActivity(i);
              }

    });

       menu9.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
            Intent i = new Intent(MenuActivity.this,AboutUsActivity.class);
            startActivity(i);
                  }

        });

      menu10.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Dialog settingsDialog = new Dialog(MenuActivity.this); 
            settingsDialog.getWindow().requestFeature(Window.FEATURE_NO_TITLE); 
            settingsDialog.setContentView(getLayoutInflater().inflate(R.layout.buttonlayout, null)); 
            settingsDialog.show();

            }
    });

      menu11.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent i = new Intent(MenuActivity.this,Settings.class);
                startActivity(i);
                }
        });
        }

//  @Override
//  protected void onResume() {
//      // TODO Auto-generated method stub
//      
//      SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
//      int birthChosenYear = prefs.getInt("birthChosenYear", MODE_APPEND);
//      int birthChosenMonth = prefs.getInt("birthChosenMonth", MODE_APPEND);
//      int birthChosenDay = prefs.getInt("birthChosenDay", MODE_APPEND);
//      System.err.println("Shared preferences data " + birthChosenDay + "/"
//              + birthChosenMonth + "/" + birthChosenYear);
//      
//      Calendar birthDate = Calendar.getInstance();
//      birthDate.set(birthChosenYear, birthChosenMonth - 1, birthChosenDay);
//      Calendar todayDate = Calendar.getInstance();
//
//      Date todayDated = todayDate.getTime();
//      Date birthDated = birthDate.getTime();
//      SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy");
//
//      long dd = birthDated.getTime() - todayDated.getTime();
//      long weeksTillBirth = dd / (1000 * 60 * 60 * 24 * 7);
//
//      System.err.println("todayDateeeeeeee = "
//              + dateFormat.format(todayDated.getTime()));
//      System.err.println("birthDateeeeeee = "
//              + dateFormat.format(birthDated.getTime()));
//      weekSince = (int) (40 - weeksTillBirth);
//      System.err.println("WeeksTillBirth = " + weeksTillBirth);
//      System.err.println("weekSince  = " + weekSince);
//      numberOfDaysSince = weekSince * 7;
//      System.err.println("You are in day  " + numberOfDaysSince);
//
//      
//      System.err.println("onResume");
//      Intent intent = getIntent();
//      String message = intent.getStringExtra("DueDateChanged");
//      System.err.println("message"+message);
//      tv.setText("               You are in day "+numberOfDaysSince + " From your "+weekSince+" Week");
//      super.onResume();
//
//
//  } 
```

当我从 onResume 中删除注释标志时，这会导致我的 XML 中的图标变大，并且布局中的所有内容都变得凌乱！但是当我评论 onResume 里面的每一件事时，每一件事都像布局一样好！

我想知道他为什么会这样！

**活动主.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/rl"

    android:orientation="vertical" android:background="@drawable/mainbackgroundiphone">

 <TableLayout
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentTop="true"
     android:background="@drawable/mainbackgroundipad"
     android:orientation="vertical" >

      <TableRow
      android:layout_width="fill_parent"
           android:layout_height="fill_parent" 
           android:layout_marginTop="50dp"> 
      <TextView android:id="@+id/tv"
          android:layout_width="fill_parent"
           android:layout_height="fill_parent"
           android:textColor="#FFFFFF"/>

      </TableRow>

        <TableRow android:id="@+id/tableRow1" 
            android:layout_marginTop="10dp">

            <ImageButton
                android:id="@+id/menu1"
                android:layout_width="75dip"
                android:layout_height="74dip"
                android:layout_marginTop="0dp"
                android:background="@android:color/transparent"
                android:scaleType="fitXY"
                android:src="@drawable/menu1" />

            <ImageButton
                android:id="@+id/menu2"
                android:layout_width="75dp"
                android:layout_height="59dp"
                android:layout_marginLeft="5dp"
                android:layout_marginTop="1dp"
                android:background="@android:color/transparent"
                android:scaleType="fitXY"
                android:src="@drawable/menu2" />

            <ImageButton
                android:id="@+id/menu3"
                android:layout_width="75dip"
                android:layout_height="63dip"
                android:layout_marginLeft="1dp"
                android:layout_marginTop="1dp"
                android:background="@android:color/transparent"
                android:scaleType="fitXY"
                android:src="@drawable/menu3" />

            <ImageButton
                android:id="@+id/menu4"
                android:layout_width="60dp"
                android:layout_height="83dp"
                android:layout_marginRight="100dp"
                android:background="@android:color/transparent"
                android:scaleType="fitCenter"
                android:src="@drawable/menu4" />
        </TableRow>

        <TableRow android:id="@+id/tableRow2"
            android:layout_marginTop="0dp" >

            <ImageButton
                android:id="@+id/menu5"
                android:layout_width="50dp"
                android:layout_height="75dp"
                android:layout_marginLeft="12dp"
                android:layout_marginTop="60dp"
                android:background="@android:color/transparent"
                android:scaleType="fitXY"
                android:src="@drawable/menu5" />

            <ImageButton
                android:id="@+id/menu6"
                android:layout_width="60dp"
                android:layout_height="79dp"
                android:layout_marginTop="60dp"
                android:background="@android:color/transparent"
                android:scaleType="fitXY"
                android:src="@drawable/menu6" />

            <ImageButton
                android:id="@+id/menu7"
                android:layout_width="60dip"
                android:layout_height="86dip"
                android:layout_marginLeft="5dp"
                android:layout_marginTop="60dp"
                android:background="@android:color/transparent"
                android:scaleType="fitStart"
                android:src="@drawable/menu7" />

            <ImageButton
                android:id="@+id/menu8"
                android:layout_width="75dip"
                android:layout_height="50dip"
                android:layout_centerVertical="true"
                android:layout_marginRight="110dp"
                android:layout_marginTop="80dp"
                android:background="@android:color/transparent"
                android:scaleType="fitXY"
                android:src="@drawable/menu8" />
        </TableRow>

        <TableRow android:id="@+id/tableRow3" android:layout_marginTop="1dp" 
           >

            <ImageButton
                android:id="@+id/menu9"
                android:layout_width="60px"
                android:layout_height="80px"
                android:layout_marginLeft="2dp"
                android:layout_marginTop="40dp"
                android:background="@android:color/transparent"
                android:scaleType="fitXY"
                android:src="@drawable/menu9" />

            <ImageButton
                android:id="@+id/menu10"
                android:layout_width="75dip"
                android:layout_height="56dip"
                android:layout_alignParentLeft="true"
                android:layout_marginLeft="2dp"
                android:layout_marginTop="40dp"
                android:background="@android:color/transparent"
                android:scaleType="fitXY"
                android:src="@drawable/menu10" />

            <ImageButton
                android:id="@+id/menu11"
                android:layout_width="75dip"
                android:layout_height="65dip"
                android:layout_alignParentLeft="true"
                android:layout_marginLeft="2dp"
                android:layout_marginTop="40dp"
                android:background="@android:color/transparent"
                android:scaleType="fitXY"
                android:src="@drawable/menu11" />

            <ImageButton
                android:id="@+id/menu12"
                android:layout_width="60dp"
                android:layout_height="60dp"
                android:layout_marginRight="100dp"
                android:layout_marginTop="40dp"
                android:background="@android:color/transparent"
                android:scaleType="fitXY"
                android:src="@drawable/menu12" />
        </TableRow>
    </TableLayout>

</RelativeLayout> 
```

*这就是 onResume 没有评论时的样子！！*

![在此处输入图像描述](../Images/1f5edfe70fffa390687b242e8891a19e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T14:10:34.623

我认为你应该先打电话给超级！给你；

```
 @Override 
```

protected void onResume() { TODO 自动生成的方法存根 super.onResume(); SharedPreferences 首选项 = PreferenceManager.getDefaultSharedPreferences(this); intbirthChosenYear = prefs.getInt("birthChosenYear", MODE_APPEND); intbirthChosenMonth = prefs.getInt("birthChosenMonth", MODE_APPEND); intbirthChosenDay = prefs.getInt("birthChosenDay", MODE_APPEND); System.err.println("共享偏好数据" +birthChosenDay +"/"+birthChosenMonth +"/"+birthChosenYear);

```
 Calendar birthDate = Calendar.getInstance();
  birthDate.set(birthChosenYear, birthChosenMonth - 1, birthChosenDay);
  Calendar todayDate = Calendar.getInstance();

  Date todayDated = todayDate.getTime();
  Date birthDated = birthDate.getTime();
  SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy");

  long dd = birthDated.getTime() - todayDated.getTime();
  long weeksTillBirth = dd / (1000 * 60 * 60 * 24 * 7);

  System.err.println("todayDateeeeeeee = "
          + dateFormat.format(todayDated.getTime()));
  System.err.println("birthDateeeeeee = "
          + dateFormat.format(birthDated.getTime()));
  weekSince = (int) (40 - weeksTillBirth);
  System.err.println("WeeksTillBirth = " + weeksTillBirth);
  System.err.println("weekSince  = " + weekSince);
  numberOfDaysSince = weekSince * 7;
  System.err.println("You are in day  " + numberOfDaysSince);

  System.err.println("onResume");
  Intent intent = getIntent();
  String message = intent.getStringExtra("DueDateChanged");
  System.err.println("message"+message);
  tv.setText("               You are in day "+numberOfDaysSince + " From your "+weekSince+" Week"); 
```

}

# javascript - HTML CSS 尴尬的表格样式 - 用边框颜色突出显示单个 TD

> ID：14303958
> 
> 赞同：-1
> 
> 时间：2013-01-13T13:27:23.490
> 
> 标签：javascript, css-tables

对于我的一生，我似乎无法弄清楚这一点。这似乎是一件简单的事情，但 html 表格可以如此叛逆。

这就是我想要做的 -

```
.highlight {border-color:red;} 
```

![在此处输入图像描述](../Images/cb5a8280578300c41e5c0d1d83162058.png)

这是一个小提琴 - [http://jsfiddle.net/MuAR4/1/](http://jsfiddle.net/MuAR4/1/)

看到框 2 中缺少间隙，我希望边框一直没有中断。高亮类也应该能够应用于任何其他都有自己问题的盒子。

这是用户单击框时的选定状态，由 javascript 处理。

这甚至可能吗？如有必要，我愿意使用 Javascript hack。

**更新**我希望它在 IE7 中工作，有人有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T13:51:43.233

您可以在轮廓的帮助下获得背景颜色和边框间距的创意，如下所示（请注意，边框不应折叠）：

```
table {
  background: #555;
  border-spacing: 5px;
}
td {
  background: white;
  width:175px;
  vertical-align:top;
}
.highlight {
   outline: 5px solid red;
} 
```

[http://jsfiddle.net/MuAR4/9/](http://jsfiddle.net/MuAR4/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T13:32:26.620

您的表格不需要额外的边框，您可以单独使用：http: [//jsfiddle.net/MuAR4/3/](http://jsfiddle.net/MuAR4/3/)

```
table, td {border:5px solid #555; border-collapse:separate;}
table {border: 0px;}
td {width:175px; vertical-align:top;}
.highlight {border-color:red;} 
```

# spring - Hibernate 不保存编辑的实体，而保存新的实体

> ID：14303960
> 
> 赞同：1
> 
> 时间：2013-01-13T13:27:52.890
> 
> 标签：spring, hibernate, spring-mvc, testng

我面临一个奇怪的问题。我目前正在编写一个基于 Spring-MVC 3.2 和 Hibernate 4.1.9 的 Web 应用程序。我用它的 TestNG 单元测试编写了一个示例控制器，除了编辑之外一切都很好。我可以看到，当保存一个新对象时，它就像一个魅力，但是如果我尝试编辑一个现有对象，它不会在没有给出任何理由的情况下被保存（我正在调用相同的方法来添加和更新） .

添加Application类型的新对象的日志

```
14:26:36.636 [main] DEBUG o.s.t.w.s.TestDispatcherServlet - DispatcherServlet with name '' processing POST request for [/app/add.json]
14:26:36.637 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /app/add.json
14:26:36.650 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.Long com.wstars.kinzhunt.platform.apps.web.AppController.createApp(com.wstars.kinzhunt.platform.model.apps.Application)]
14:26:36.651 [main] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'appController'
14:26:36.821 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Reading [class com.wstars.kinzhunt.platform.model.apps.Application] as "application/json" using [org.springframework.http.converter.json.MappingJacksonHttpMessageConverter@5dc6bb75]
14:26:36.890 [main] DEBUG o.s.o.hibernate3.SessionFactoryUtils - Opening Hibernate Session
14:26:36.890 [main] DEBUG org.hibernate.impl.SessionImpl - opened session at timestamp: 13580799968
14:26:36.892 [main] DEBUG c.w.c.dao.hibernate.BaseDaoHibernate - Saving or Updating Object: com.wstars.kinzhunt.platform.model.apps.Application@54fc519b[id=<null>,name=KinzHunt,company=com.wstars.kinzhunt.platform.model.apps.Company@151c2b4[id=1,name=KinzHunt],callbackUrl=http://www.kinzhunt.com/callback/,website=http://www.kinzhunt.com,senderEmail=no-reply@kinzhunt.com,logoUrl=<null>]
14:26:36.892 [main] DEBUG o.s.o.hibernate3.SessionFactoryUtils - Opening Hibernate Session
14:26:36.893 [main] DEBUG org.hibernate.impl.SessionImpl - opened session at timestamp: 13580799968
14:26:36.893 [main] DEBUG o.s.o.hibernate3.SessionFactoryUtils - Closing Hibernate Session
14:26:36.894 [main] DEBUG o.h.e.def.AbstractSaveEventListener - executing identity-insert immediately
14:26:36.898 [main] DEBUG org.hibernate.jdbc.AbstractBatcher - about to open PreparedStatement (open PreparedStatements: 0, globally: 0)
14:26:36.899 [main] DEBUG org.hibernate.jdbc.ConnectionManager - opening JDBC connection
14:26:36.899 [main] DEBUG o.s.j.d.DriverManagerDataSource - Creating new JDBC DriverManager Connection to [jdbc:h2:mem:platform_test;DB_CLOSE_DELAY=-1]
14:26:36.901 [main] DEBUG org.hibernate.SQL - /* insert com.wstars.kinzhunt.platform.model.apps.Application */ insert into applications (id, callback_url, company_id, logo_url, name, sender_email, website) values (null, ?, ?, ?, ?, ?, ?)
14:26:36.904 [main] DEBUG o.h.id.IdentifierGeneratorHelper - Natively generated identity: 2
14:26:36.904 [main] DEBUG org.hibernate.jdbc.AbstractBatcher - about to close PreparedStatement (open PreparedStatements: 1, globally: 1)
14:26:36.905 [main] DEBUG o.s.o.hibernate3.SessionFactoryUtils - Closing Hibernate Session
14:26:36.905 [main] DEBUG org.hibernate.jdbc.ConnectionManager - releasing JDBC connection [ (open PreparedStatements: 0, globally: 0) (open ResultSets: 0, globally: 0)]
14:26:36.905 [main] DEBUG org.hibernate.jdbc.ConnectionManager - transaction completed on session with on_close connection release mode; be sure to close the session to release JDBC resources!
14:26:36.926 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [2] as "application/json;charset=UTF-8" using [org.springframework.http.converter.json.MappingJacksonHttpMessageConverter@5dc6bb75]
14:26:36.927 [main] DEBUG o.s.t.w.s.TestDispatcherServlet - Null ModelAndView returned to DispatcherServlet with name '': assuming HandlerAdapter completed request handling
14:26:36.928 [main] DEBUG o.s.t.w.s.TestDispatcherServlet - Successfully completed request 
```

而保存编辑对象的日志是

```
14:27:03.398 [main] DEBUG o.s.t.w.s.TestDispatcherServlet - DispatcherServlet with name '' processing POST request for [/app/1/edit.json]
14:27:03.398 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /app/1/edit.json
14:27:03.401 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Returning handler method [public java.lang.Long com.wstars.kinzhunt.platform.apps.web.AppController.editApp(com.wstars.kinzhunt.platform.model.apps.Application,java.lang.Long)]
14:27:03.401 [main] DEBUG o.s.b.f.s.DefaultListableBeanFactory - Returning cached instance of singleton bean 'appController'
14:27:03.404 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Reading [class com.wstars.kinzhunt.platform.model.apps.Application] as "application/json" using [org.springframework.http.converter.json.MappingJacksonHttpMessageConverter@5dc6bb75]
14:27:03.409 [main] DEBUG o.s.o.hibernate3.SessionFactoryUtils - Opening Hibernate Session
14:27:03.410 [main] DEBUG org.hibernate.impl.SessionImpl - opened session at timestamp: 13580800234
14:27:03.411 [main] DEBUG c.w.c.dao.hibernate.BaseDaoHibernate - Saving or Updating Object: com.wstars.kinzhunt.platform.model.apps.Application@1ba4f8a6[id=1,name=KinzHunt,company=com.wstars.kinzhunt.platform.model.apps.Company@6bc06877[id=1,name=KinzHunt],callbackUrl=http://www.kinzhunt.com/callback/,website=http://www.wstars.com/KinzHunt/,senderEmail=no-reply@kinzhunt.com,logoUrl=<null>]
14:27:03.412 [main] DEBUG o.s.o.hibernate3.SessionFactoryUtils - Opening Hibernate Session
14:27:03.412 [main] DEBUG org.hibernate.impl.SessionImpl - opened session at timestamp: 13580800234
14:27:03.413 [main] DEBUG o.s.o.hibernate3.SessionFactoryUtils - Closing Hibernate Session
14:27:03.422 [main] DEBUG o.s.o.hibernate3.SessionFactoryUtils - Closing Hibernate Session
14:27:03.424 [main] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Written [1] as "application/json;charset=UTF-8" using [org.springframework.http.converter.json.MappingJacksonHttpMessageConverter@5dc6bb75]
14:27:03.424 [main] DEBUG o.s.t.w.s.TestDispatcherServlet - Null ModelAndView returned to DispatcherServlet with name '': assuming HandlerAdapter completed request handling
14:27:03.425 [main] DEBUG o.s.t.w.s.TestDispatcherServlet - Successfully completed request 
```

可以看到，在第二个日志中，没有创建prepared statement，也没有打开JDBC连接。我对数据库的测试配置是这样的：

```
<bean id="targetDataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="org.h2.Driver" />
    <property name="url" value="jdbc:h2:mem:platform_test;DB_CLOSE_DELAY=-1" />
</bean>

<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="targetDataSource" />
    <property name="packagesToScan">
        <list>
            <value>com.mypackage.model.*</value>
        </list>
    </property>
    <property name="namingStrategy">
        <bean class="com.example.common.config.MyOwnNamingStrategy"/>
    </property>
    <property name="hibernateProperties">
        <map>
            <entry key="hibernate.dialect" value="org.hibernate.dialect.H2Dialect" />
            <entry key="hibernate.max_fetch_depth" value="1" />
            <entry key="hibernate.use_sql_comments" value="true" />
            <entry key="hibernate.hbm2ddl.auto" value="update" />
        </map>
    </property>
    <!-- <property key="hibernate.current_session_context_class" value="thread"/> -->
    <!-- <property key="hibernate.transaction.factory_class" value="org.hibernate.transaction.JDBCTransactionFactory"/> -->
</bean>

<bean id="h2WebServer" class="org.h2.tools.Server"
    factory-method="createWebServer" depends-on="targetDataSource"
    init-method="start" lazy-init="false">
    <constructor-arg value="-web,-webPort,11111" />
</bean> 
```

我的控制器代码是：

```
@Controller
public class AppController extends BaseAnnotatedController {

    @Autowired
    private AppManagementService appManagementService;

    @RequestMapping(value="/app/add", method=RequestMethod.POST, consumes={"application/json"})
    public @ResponseBody Long createApp(@RequestBody Application app) {
        saveApp(app);
        return app.getId();
    }

    @RequestMapping(value="/app/{appId}/edit", method=RequestMethod.POST, consumes={"application/json"})
    public @ResponseBody Long editApp(@RequestBody Application app, @PathVariable Long appId) {
        if (!appId.equals(app.getId())) {
            WSError error = new WSError(ValidationErrorType.GENERIC, "id");
            throw new ValidationException(error);
        } else {
            saveApp(app);
            return app.getId();
        }
    }

    @RequestMapping(value="/app/list", method=RequestMethod.GET)
    public @ResponseBody List<Application> listApps() {
        return appManagementService.listAllApps();
    }

    @RequestMapping(value="/app/{appId}/get", method=RequestMethod.GET)
    public @ResponseBody Application getAppDetails(@PathVariable Long appId) {
        return appManagementService.getApplication(appId);
    }

    private void saveApp(Application app) {
        if (isValid(app)) {
            appManagementService.saveApp(app);
        }
    }

    public @ResponseBody List<Application> listAllApps() {
        return appManagementService.listAllApps();
    }
} 
```

我的测试课是：

```
@Test
public class AppControllerIntegrationTests extends AbstractContextControllerTests {

    private MockMvc mockMvc;

    @Autowired
    AppController appController;

    @Autowired
    private AppManagementService appManagementService;

    @Autowired
    private BaseDao baseDao;

    @BeforeClass
    public void classSetup() {
        Company comp = new Company();
        comp.setName("Some Company");
        baseDao.saveObject(comp);
    }

    @BeforeMethod
    public void setup() throws Exception {
        this.mockMvc = webAppContextSetup(this.wac).build();
    }

    @Test
    public void testAddInvalidAppWebJson() throws Exception {
        String appJson = getInvalidApp().toJsonString();
        RequestBuilder requestBuilder = MockMvcRequestBuilders.post("/app/add.json")
                .contentType(MediaType.APPLICATION_JSON).content(appJson);
        ResultActions resultAction = this.mockMvc.perform(requestBuilder);
        resultAction.andExpect(status().isForbidden());
        MvcResult mvcResult = resultAction.andReturn();
        Exception resolvedException = mvcResult.getResolvedException();
        assertTrue(resolvedException instanceof ValidationException);
        ValidationException validationException = (ValidationException) resolvedException;
        assertEquals(validationException.getErrors().size(), 3);
    }

    @Test
    public void testAddAppWebJson() throws Exception {
        Application app = getMockApp();
        String appJson = app.toJsonString();
        RequestBuilder requestBuilder = MockMvcRequestBuilders.post("/app/add.json")
                .contentType(MediaType.APPLICATION_JSON).content(appJson);

        this.mockMvc.perform(requestBuilder).andExpect(status().isOk());

    }

    @Test
    public void testEditAppWithWrongIdWebJson() throws Exception {
        String appJson = getMockAppWithId().toJsonString();
        RequestBuilder requestBuilder = MockMvcRequestBuilders.post("/app/2/edit.json")
                .contentType(MediaType.APPLICATION_JSON).content(appJson);
        this.mockMvc
                .perform(requestBuilder)
                .andExpect(status().isForbidden())
                .andExpect(
                        content()
                                .string("{\"errors\":[{\"errorType\":\"-100\",\"field\":\"id\",\"constraint\":null}],\"objects\":null}"));
    }

    @Test(dependsOnMethods={"testAddApp", "testAddAppWebJson"})
    public void testEditAppWebJson() throws Exception {
        Application app = getMockAppWithId();
        setAppWebsiteToDifferentOne(app);
        String appJson = app.toJsonString();

        RequestBuilder requestBuilder = MockMvcRequestBuilders.post("/app/1/edit.json")
                .contentType(MediaType.APPLICATION_JSON).content(appJson);

        this.mockMvc.perform(requestBuilder).andExpect(status().isOk());
    }

    @Test
    public void testEditInvalidAppWebJson() throws Exception {
        Application app = getMockAppWithId();
        app.setWebsite("Saba7o 3asal");
        String appJson = app.toJsonString();
        RequestBuilder requestBuilder = MockMvcRequestBuilders.post("/app/1/edit.json")
                .contentType(MediaType.APPLICATION_JSON).content(appJson);
        this.mockMvc
                .perform(requestBuilder)
                .andExpect(status().isForbidden())
                .andExpect(
                        content()
                                .string("{\"errors\":[{\"errorType\":\"-114\",\"field\":\"website\",\"constraint\":null}],\"objects\":null}"));
    }

    @Test(dependsOnMethods="testEditAppWebJson")
    public void testGetAppDetails() throws Exception {
        RequestBuilder requestBuilder = MockMvcRequestBuilders.get("/app/1/get.json");
        Application app = getMockAppWithId();
        setAppWebsiteToDifferentOne(app);

        this.mockMvc.perform(requestBuilder).andExpect(status().isOk())
                .andExpect(content().string(app.toJsonString()));
    }
} 
```

我的服务方式是：

```
@Override
@Transactional(readOnly=false)
public void saveApp(Application app) {
    baseDao.saveObject(app);
} 
```

所有测试方法都通过了，除了最后一个，因为它期望应用程序的网站是被编辑的那个。我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T13:48:45.340

需要知道在 saveApp() 中调用了哪个休眠方法，还需要确保您的服务使用 @Transactional 进行注释。

# java - 最佳 SQL 查询结果存储

> ID：14303965
> 
> 赞同：1
> 
> 时间：2013-01-13T13:28:24.043
> 
> 标签：java, sql, arraylist, hashtable

我将 SQL 查询的`Arraylist<Hashtable<String, String>>`结果存储到 Hashtable 中，每个结果都存储在 Hashtable 中，然后每个结果都存储在列表中

如果结果少于 100.000 个，则它可以正常工作，如果我得到更多结果和 OutOfMemory 异常，则为 buf。

你对我如何改善这种情况有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:45:58.403

您可能可以通过使用自定义类来表示每一行来节省一些空间。（A`HashMap`是一个相当“内存消耗”的数据结构。）然而，这只会推迟不可避免的 OOME。

一个更好的主意是更改您的应用程序，这样您就不必将整个结果集存储在内存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-07T14:00:32.020

改善这一点的最简单且可能占用内存最少的方法是为您的数据保留一个二维数组：

```
String[][] data;

// Alternatively, if you prefer lists:
List<String[]> data; 
```

然后，您只需要一个额外的数据结构，例如

```
Map<String, Integer> fieldNameToIndexMapping; 
```

...您将在其中存储查找表以按列索引访问您的字段。例如

```
String value = data[row][fieldNameToIndexMapping.get("MY_COLUMN")]; 
```

在适当的情况下，通过使用更简洁的数据类型可以进行更多调整。我怀疑`String`您存储在数据结构中的某些值实际上是`Boolean`，`Integer`以及其他更容易以非字符串形式存储的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T14:08:56.177

有几种不同的方法。Stechen C 是正确的，最好在 SQL 中使用“where”子句来减小结果集的大小。

如果您使用缓存，您可以设置缓存的最大大小，最好的类是 LinkedHashMap。有一个 Map 的实现可以保持插入顺序。您需要对其进行子类化并覆盖 removeEldestEntry() 方法，如 Javadoc 中所示：

[http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html#removeEldestEntry(java.util.Map.Entry](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html#removeEldestEntry(java.util.Map.Entry) )

# spring - 如何在 Seam 中使用 Spring Managed Hibernate Session？

> ID：14303966
> 
> 赞同：0
> 
> 时间：2013-01-13T13:28:26.633
> 
> 标签：spring, hibernate, jpa-2.0, seam2

我最近工作的项目是尝试使用 Spring (3.1.1.RELEASE) Managed Hibernate Session 进入 Seam (2.3.0.Final)。

在 JBoss Seam 文档中，他们解释[了如何在 Spring 中使用 Seam Managed Hibernate Session](https://access.redhat.com/knowledge/docs/en-US/JBoss_Enterprise_Application_Platform/5/html/Seam_Reference_Guide/spring-hibernate.html)。但我们的要求与文档相反。

我得到了另一个[使用 Spring PlatformTransactionManagement](https://access.redhat.com/knowledge/docs/en-US/JBoss_Enterprise_Application_Platform/5/html/Seam_Reference_Guide/spring-transactions.html)的解决方案，但我的要求是在 Seam 中使用 Spring Managed Hibernate Session。我不想使用 Seam 管理 Hibernate Session/Hibernate Entity Manager/Transaction。只想使用 Seam 管理依赖注入通过 seam`@In`而不是 Spring将 Spring bean 注入 Seam 管理 bean `@Autowire`。

如果有人面临这种​​类型的挑战，请帮助配置 Seam`components.xml`和 Spring`applicationContext.xml`或提供指导来克服这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:12:26.180

首先`applicationContext.xml`按照您通常的配置进行配置：

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <!-- hibernate Properties Here -->                     
</bean>
<bean id="transactionManager"
    class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>
<tx:annotation-driven/> 
```

然后配置`components.xml`如下：

```
<core:init debug="true" transaction-management-enabled="true" />
<spring:context-loader config-locations="classpath*:/META-INF/spring/applicationContext.xml"/>
<core:manager concurrent-request-timeout="500" conversation-timeout="120000" conversation-id-parameter="cid" parent-conversation-id-parameter="pid" />
<persistence:managed-hibernate-session name="hibernateSession" auto-create="true" session-factory="#{sessionFactory}"/>
<spring:spring-transaction platform-transaction-manager="#{transactionManager}"/> 
```

Spring(3.1.1.RELEASE) 与 Seam (2.3.0.Final) 的交互非常容易，但永远不要忘记`web.xml`为 seam 配置。

```
<listener>
    <listener-class>org.jboss.seam.servlet.SeamListener</listener-class>
</listener>

<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>

<servlet>
    <servlet-name>Seam Resource Servlet</servlet-name>
    <servlet-class>org.jboss.seam.servlet.SeamResourceServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>Seam Resource Servlet</servlet-name>
    <url-pattern>/resource/*</url-pattern>
</servlet-mapping>

<filter>
    <filter-name>Seam Filter</filter-name>
    <filter-class>org.jboss.seam.servlet.SeamFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>Seam Filter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping>

<login-config>
    <auth-method>BASIC</auth-method>
</login-config>

<session-config>
    <session-timeout>10</session-timeout>
</session-config>

<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list> 
```

对于 facelets，您应该在其中添加变量解析器`faces-config.xml`

```
<application>
    <variable-resolver>org.springframework.web.jsf.DelegatingVariableResolver</variable-resolver>
</application> 
```

最好下载[Seam-2.3.0.Final](http://www.seamframework.org/Seam2/Downloads)。解压它，里面`examples\spring\`的文件夹你会得到你想要的配置

# php - 选择日期 sql 对面 DATE PHP ECHO JSON

> ID：14303967
> 
> 赞同：0
> 
> 时间：2013-01-13T13:28:26.883
> 
> 标签：php, json, date-format

**从服务器中**选择信息后**
， 我将日期格式设置为**YYYY / MM / DD**。
我正在尝试将日期与**DD / MM / YYYY相反****

 **信息必须在**JSON**数组中**回显。**

 **你能帮我反对日期吗？这是我的代码：

```
$query = mysql_query("SELECT * FROM Shows WHERE ID ='{$ID}' ORDER BY date ASC");

$users = array();

    while ($row = mysql_fetch_array($query))    
    {

    $users[] = array('date' => $row['date'],'day' => $row['day'],'hour' => $row['hour']);

    }

    echo json_encode($users); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T13:31:15.600

`$users`将声明更改为：

```
$users[] = array('date' => date( 'd/m/Y', strtotime($row['date']) ) 
```****

# php - 如何将 zend_parse_parameters 从 c++ 转换为 pascal？

> ID：14303968
> 
> 赞同：0
> 
> 时间：2013-01-13T13:28:27.677
> 
> 标签：php, pascal, freepascal

我需要使用 lazarus/freepascal 解析 PHP 扩展参数，但我不知道如何将`zend_parse_parameters`lazarus 中的 C 函数定义为：

```
int zend_parse_parameters ( int num_args TSRMLS_DC, char* type_spec, ... ) 
```

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T00:15:39.643

```
here is my test code of lazarus under CENTOS6.3:

procedure encryptext (ht : integer; return_value : pzval; this_ptr : pzval;
   return_value_used : integer; TSRMLS_DC : pointer); cdecl;
var
  getmyparameters: function(argu_num:integer;
                   type_apec:pansichar;Args : Array of const):integer;cdecl;
  a:integer;
  rtnstr:string;
begin
  if (PHPLib < 1) then exit;
  getmyparameters := GetProcAddress(PHPLib, 'zend_parse_parameters');
  if (@getmyparameters = nil) then
  begin
    raise EPHP4DelphiException.Create('zend_parse_parameters');
    exit;
  end;

  if ht < 1 then
  begin
   zend_wrong_param_count(TSRMLS_DC);
   Exit;
  end;

  a := 1;
  if (getmyparameters(ht,pansichar('s'),[pansichar(rtnstr),@a]) <> SUCCESS ) then exit;

  ZVAL_STRING(return_value,pansichar(rtnstr),true);
end;

php code of /var/www/html/a.php:
<?php
  echo encryptext('hello');
?>

the error message is:
PHP Warning:  encryptext() expects exactly 0 parameters, 1 given in /var/www/html/a.php on line 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:30:56.917

大概是这样的

```
 uses ctypes;
 function zend_parse_parameters(num_args:cint;type_spec:pchar):cint;cdecl; varargs; 
```

但我不知道如何处理宏（我假设它只是一个将变量部分和 num_args 链接在一起的辅助宏）。

# xcode - 如何获得用于 Xcode 的旧版 Mac OSX SDK？

> ID：14303972
> 
> 赞同：5
> 
> 时间：2013-01-13T13:29:06.620
> 
> 标签：xcode, macos

10.6版本的MacOSX SDK如何才能用最新版本的Xcode（4.6版）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T13:33:22.700

您必须安装较旧的 Xcode，`MacOSX10.6.sdk`从安装位置`/Developer/Platforms/MacOSX.platform/Developer/SDKs`的 SDK 文件夹中取出（默认值：）并将其复制到最新 Xcode.app 中的 SDK 文件夹（默认值：）`/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs`。

* * *

至于修复您的错误，请尝试导入/包含`<sys/ucontext.h>`而不是 Apple 的`ucontext.h`.

# javascript - 使用ajax获取输入类型文件val

> ID：14303976
> 
> 赞同：0
> 
> 时间：2013-01-13T13:29:23.670
> 
> 标签：javascript, ajax, dhtml

我正在尝试编写一个多图像上传脚本...我被困在 javascript 将 dataStrings 发送到 php 脚本的部分。所以问题是不会在数据库中插入任何内容，php 脚本工作正常，因此我不会在这里发布它。

例子...

HTML 代码：

```
<input type="file" id="files" name="files[]" multiple />
<div id="list"></div> 
```

Javascript代码：

```
$(".update_button").click(function() 
{
  var imgval = $('#files').val();
  var updateval = $("#update").val();
  var dataString = 'update='+ updateval+'&img='+ imgval;

    $("#flash").show();
    $("#flash").fadeIn(400).html('Loading Update...');
    $.ajax({
      type: "POST",
      url: "wall-message_ajax.php",
      data: dataString,
      cache: false,
      success: function(html)
      {
      }
    });
  }
  return false;
}); 
```

# php - 按日期升序排序表结果 - 不工作

> ID：14303981
> 
> 赞同：0
> 
> 时间：2013-01-13T13:30:01.637
> 
> 标签：php, mysql, date

曾试图在别处寻找答案，但没有成功。任何想纠正我的人，我确信我错过了一些基本的东西——我只是找不到什么。

我有 11 列的表“数据”，包括“from_Date”和“to_date”。当前显示的结果首先显示最远的日期。我要求结果首先显示为最接近的日期（即`ASC/DESC`）。

已尝试`ORDER BY`from_date - 无效。[我的搜索](http://www.scotsail.co.uk/search.php)表单代码中的示例数据/页面上的结果（供参考）

```
<form action="webdeals.php" method="post" name="form1" id="form1" style="margin-bottom: 0;">
  <table width="839" border="0">
    <tr valign="top">
      <td width="83">&nbsp;</td>
      <td width="105"><span class="style31">Course Type:</span>
      </td>
      <td width="161">
        <select name="city">
          <option value="">--</option>
          <?php $sql="SELECT * FROM " .$SETTINGS[ "data_table"].
          " GROUP BY city ORDER BY city"; $sql_result=m ysql_query ($sql, $connection ) or die (
          'request "Could not execute SQL query" '.$sql); while ($row=m ysql_fetch_assoc($sql_result)) { echo
          "<option value='".$row[ "city"]. "'
    ".($row[ "city"]==$_REQUEST[ "city"] ? "selected" : ""). ">".$row[
          "city"]. "</option>"; } ?>
        </select>
      </td>
      <td width="100" class="style27"><span class="style31">From:</span>
      </td>
      <td width="108">
        <input name="from" type="text" id="from" size="10" value="
    <?php echo $_REQUEST   [" from "]; ?>" />
      </td>
      <td width="104">
        <img src="images/calendar_icon_pack.png" width="32" height="32" />
      </td>
      <td width="153">
        <div align="center">
          <input type="image" src="http://www.scotsail.co.uk/images/filter_button.png"
          alt="Refine Results" />
        </div>
      </td>
    </tr>
    <tr valign="top">
      <td class="style23">&nbsp;</td>
      <td class="style31">Price Search:</td>
      <td>
        <input type="text" name="string" id="string" value="
    <?php echo stripcslashes($_REQUEST[" string "]); ?>" />
      </td>
      <td>
        <label for="to2" class="style31">To:</label>
      </td>
      <td>
        <input name="to" type="text" id="to" size="10" value="<?php echo $_REQUEST["
        to "]; ?>"/>
      </td>
      <td>
        <img src="images/calendar_icon_pack.png" width="32" height="32" />
      </td>
      <td>
        <div align="center"><a href="webdeals.php">Reset</a>
        </div>
      </td>
    </tr>
  </table>
  <label for="from" class="style2"></label>
</form> 
```

然后：

```
<?php 

if ($_REQUEST[ "string"]<>'') {
    $search_string = " AND (full_name LIKE '%".mysql_real_escape_string($_REQUEST["string"])."%' OR email LIKE '%".mysql_real_escape_string($_REQUEST["string"])."%')";
}

if ($_REQUEST["city"]<>'') {
    $search_city = " AND city='".mysql_real_escape_string($_REQUEST["city"])."'";
}

if ($_REQUEST["from"]  <>'' and $_REQUEST["to"]    <>'') {
    $sql = "SELECT * FROM ".$SETTINGS["data_table"]." WHERE from_date
  >= ' ".mysql_real_escape_string($_REQUEST["from"])."' AND to_date
  <='".mysql_real_escape_string     ($_REQUEST["to"])."' ".$search_string.$search_city;
} else
if ($_REQUEST["from "]<>'') {
    $sql = "SELECT * FROM ".$SETTINGS["data_table "]." WHERE from_date>= ' ".mysql_real_escape_string ($_REQUEST["from"])."'".$search_string.$search_city;
} else
if ($_REQUEST["to"]        <>'') {
    $sql = "SELECT * FROM ".$SETTINGS["data_table"]." WHERE to_date
      <='".mysql_real_escape_string    ($_REQUEST["to"])."' ".$search_string.$search_city;
} else {
    $sql = "SELECT * FROM ".$SETTINGS["data_table "]." WHERE id>0".$search_string.$search_city;
}

$sql_result = mysql_query ($sql, $connection            ) or die ('request "Could not execute SQL query" '.$sql);

if (mysql_num_rows($sql_result)>0)            {
    while ($row = mysql_fetch_assoc($sql_result)) {
        ?> 
```

如果这是一个基本问题，我们深表歉意，但将头发拉出来无法使其正常工作。

* * *

更新：感谢@Veger 和其他人的评论。

```
} else { 
    $sql = "SELECT * FROM ".$SETTINGS["data_table"]." WHERE id>0 ORDER BY from_date ".$search_string.$search_city;
} 
```

确实会导致“未优化”结果按 from_date 排序，但这会破坏对“城市”列/字段的搜索，并且在调用 from_date 和 to_date 时不起作用。关于它的外观有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:58:52.693

您在语句`$string_string`之后添加了您的内容`ORDER BY`，这会导致 SQL 查询不正确：

```
SELECT * FROM <table> 
  WHERE id>0 
  ORDER BY from_date AND (full_name LIKE '%<fullname>%') 
```

您需要交换两者：

```
$sql = "SELECT * FROM ".$SETTINGS["data_table"]." WHERE id>0 ".$search_string.$search_city." ORDER BY from_date"; 
```

所以你的查询变成这样：

```
 SELECT * FROM <table> 
      WHERE id>0 AND (full_name LIKE '%<fullname>%')
      ORDER BY from_date 
```

有关`ORDER BY`语法和语句顺序的更多信息，请查看[mysql`ORDER BY`文档](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)。

# jquery-mobile - 在 jQuery Mobiel 中隐藏 iPhone 上的控制台

> ID：14303984
> 
> 赞同：0
> 
> 时间：2013-01-13T13:30:15.473
> 
> 标签：jquery-mobile

我有一个使用 jQuery Mobile 开发的网络应用程序。它工作正常，但在 iPhone 上，标题上方有一个额外的“控制台”栏： ![在此处输入图像描述](../Images/1ab61fe7ea10252546f938ed338e864b.png)

我的问题是：我怎样才能让它消失？

感谢您的帮助

米查

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T15:38:20.747

控制台可以在您的 iDevice 的“设置”应用程序中的“safari”、“developper”子菜单中停用

# javascript - 带有 PhoneGap 的 iphone 谷歌地图

> ID：14303991
> 
> 赞同：1
> 
> 时间：2013-01-13T13:31:31.363
> 
> 标签：javascript, iphone, html, google-maps

我有一个内置的应用程序`HTML5 + PhoneGap`，

在应用程序中有一个谷歌地图的地图，

在 Android 应用程序工作正常，

我把它移到了它也可以**运行**的 iphone 上，但是它在它应该处理的时候**挂起**`google maps`。

我的谷歌地图链接如下所示：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=true"></script> 
```

我需要另一个链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:43:07.590

添加`maps.googleapis.com`到. `ExternalHosts`_ `Cordova.plist`这是允许应用访问的服务器的白名单。

如果问题仍然存在，请检查调试日志中是否存在违反白名单的错误，并根据需要添加任何其他服务器。

# c# - 用于填充 GridView 的输入字段

> ID：14303992
> 
> 赞同：0
> 
> 时间：2013-01-13T13:32:10.560
> 
> 标签：c#, asp.net, visual-studio-2010, c#-4.0, formview

我有以下代码定义了我的输入字段和我的按钮：

```
<p>
<asp:TextBox ID="input" runat="server"></asp:TextBox>
&nbsp;<asp:Button ID="submit" runat="server" OnClick="submit_Click" Text="Button" />
</p>
<p>
<asp:GridView ID="searchDisplay" runat="server" OnSelectedIndexChanged="searchDisplay_SelectedIndexChanged">
</asp:GridView>
</p> 
```

我在按钮上添加了一个 Click 事件，一旦按下它应该调用以下方法：

```
protected void submit_Click(object sender, EventArgs e)
{
   String keyword = input.Text;            // Gets text inputed
   List<T> = service.getTitles(keyword);   // Two problems here
} 
```

我有 2 个问题需要解决：

1)`List`应该定义为`List<Publication>`但是类型 Publication 不是此解决方案的一部分，所以我不知道如何正确绑定 WCF 服务返回给它的数据。我试过 E、T 和 ? 作为 List 的参数，但我得到的只是错误。

已解决
*2）我有一个 WCF 服务在另一个 VS2012 实例中运行，如何以及在第一个实例中我用关键字引用它`"service"`为什么我不能访问它的方法。我在我的 WCF 服务中有一个方法，它返回`List<Publication>`我尝试编写的方法，`List<?> data = service.getTitles(keyword);`但是这给出了一个错误，即以下类型在当前上下文中无效*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:48:34.597

你可以试试以下

```
protected void submit_Click(object sender, EventArgs e)
{
   String keyword = input.Text;            // Gets text inputed
   var v= service.getTitles(keyword);   
   grd.dataSource=v;
   grd.dataBind();
} 
```

# php - 在 Lithium 会话中存储密码是否安全？

> ID：14303993
> 
> 赞同：4
> 
> 时间：2013-01-13T13:32:21.577
> 
> 标签：php, session, lithium

我想使用 Lithium 的“cookie”会话适配器。用户登录后，我将使用他的哈希密码创建一个 cookie。如果此 cookie 存在并且散列密码与数据库中的密码匹配，我将自动让他登录。

这安全吗？

* * *

好的，我说的不是 cookie 中的实际哈希，而是加密的哈希。我不希望任何人知道该散列的外观:) Lithium 具有“策略”，可以使用“秘密”加密您在会话中存储的任何数据，因此散列将被加密。基本上我在问锂的加密是否足够好。有人用过锂吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T13:40:18.040

这取决于您的哈希算法。使用盐使您的哈希更安全：
[**安全密码哈希**](http://php.net/manual/en/faq.passwords.php)和

> 请记住，密码的哈希值实际上与他们的密码相同。窃取哈希值的人对用户帐户的访问权限与窃取密码的权限相同。因此，不建议将用户密码的哈希值存储在 cookie 中，除非有一些其他信息未与用于身份验证的 cookie 一起存储（即 2 因素身份验证）。*[**加布**](https://stackoverflow.com/users/310574/gabe)在这个[**答案**](https://stackoverflow.com/a/2360897/944948)*中。

还可以查看这些链接：
[是否建议将散列密码存储在 cookie 中？](https://stackoverflow.com/questions/2360861/is-it-advisable-to-store-a-hashed-password-in-a-cookie)
[PHP 密码的安全哈希和盐](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T21:28:38.237

无论您如何存储密码（加密与否），如果有人获得它，则很有可能有人以另一个人的身份访问您的网站。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T17:04:52.607

Lithium 的`Encrypt`策略使用 bcrypt，实际上，它几乎是目前最好的东西（好吧，也许 scrypt 除外，但当 PHP 附带它时请告诉我，我会改变我的看法）。

无论如何，你的加密有多强并不重要，因为正如其他人所说，如果你正在传输密码的哈希值，那么你也可能在传输密码本身。我想不出你想要这样做的理由。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T18:06:34.283

不，这绝对不安全。如果您将哈希密码存储在 cookie 中，则该哈希密码将与用户密码基本相同。如果其他人以某种方式获得该 cookie，他可以在自己的浏览器中设置该 cookie，并作为其他人进行身份验证。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-13T13:35:27.657

只有当它是哈希密码和他的用户名或用户名的组合时。单独的密码可能存在多次，因此不是唯一的。用户名或 ID（通常）是唯一的。

# angularjs - 在angularjs中过滤

> ID：14303997
> 
> 赞同：-1
> 
> 时间：2013-01-13T13:32:39.840
> 
> 标签：angularjs

我想对数组的多个字段使用过滤器。到目前为止，我可以过滤任何记录或单个记录。但我希望它用于指定记录。例如，我的一些数组包含 firstName、lastName、phoneNo、age 等字段。我想通过输入过滤名字和姓氏的结果。这是单记录字段过滤器的代码。我想要两个/更多但不是所有记录字段过滤器。

在这里，我想在输入字段中使用 search.fname 和 search.lname 但它不起作用。我认为我们不能在同一个标​​签中使用两个 ng-model。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T16:15:11.123

[过滤器](http://docs.angularjs.org/api/ng.filter%3afilter)API页面有一个示例，其中两个文本框（ng-models search.name 和 search.phone）用于过滤单个朋友列表：

```
<tr ng-repeat="friend in friends | filter:search"> 
```

“名称”文本框中的任何内容都将用于根据该数组的每个对象中的名称属性过滤好友数组。
“电话”文本框中的任何内容也将用于根据该数组的每个对象内的电话属性过滤朋友数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T10:15:29.503

我希望这个例子能让你明白：http: [//jsfiddle.net/ed9A2/1/](http://jsfiddle.net/ed9A2/1/)

有趣的部分，请注意如何选择要过滤的字段和 ng-model 变量

```
<tr ng-repeat="player in playersFound = (players | filter:{id: player_id, name:player_name, age:player_age})"> 
```