# StackOverflow 问答 13922000-13922999

# progress-4gl - 压缩由进度应用程序创建的文件

> ID：13922000
> 
> 赞同：0
> 
> 时间：2012-12-17T20:51:41.090
> 
> 标签：progress-4gl, openedge

有没有办法压缩/压缩（使用进度代码）我使用进度应用程序创建的文件。更多的单词单词单词单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:25:31.420

为此，您需要一个外部库，然后从 ABL 语言中调用它。在参考手册中查找 HLC（高级调用）。

“轻量级”压缩的常用工具是 mzip。

请注意，由于 AVM 二进制结构为 32 位的限制，并非所有 64 位平台版本都可以进行 HLC 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T06:02:19.477

尝试通过 zip 输出 > 值（文件）。

并通过 unzip -c VALUE(file) BINARY NO-CONVERT 解压缩输入。

# javascript - 如何在服务器上保存内联编辑器内容？

> ID：13922002
> 
> 赞同：9
> 
> 时间：2012-12-17T20:51:46.170
> 
> 标签：javascript, ajax, ckeditor

我正在使用 CKeditor 允许用户在登录后内联编辑页面上的内容。

我知道我可以使用以下方式访问数据：

```
var data = CKEDITOR.instances.editable.getData(); 
```

但我不知道如何将数据发送到脚本，以便更新数据库。如果每次有人取消选择一个`contenteditable`元素时运行脚本会很酷......但我不知道这是否可能。

任何提示都会很棒！:)

我的网站是使用 php/mysql 构建的。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-18T09:40:44.810

像这样的东西：

```
CKEDITOR.disableAutoInline = true;

CKEDITOR.inline( 'editable', {
    on: {
        blur: function( event ) {
            var data = event.editor.getData();
            // Do sth with your data...
        }
    }
} ); 
```

请注意，这不适用于其他交互，例如：用户调用`editor.setData()`或用户在编辑时关闭网页。在这种情况下，内容将会丢失。如果我是你，我宁愿定期检查新数据：

```
CKEDITOR.disableAutoInline = true;

var editor = CKEDITOR.inline( 'editable', {
    on: {
        instanceReady: function() {
            periodicData();
        }
    }
} );

var periodicData = ( function(){
    var data, oldData;

    return function() {
        if ( ( data = editor.getData() ) !== oldData ) {
            oldData = data;
            console.log( data );
            // Do sth with your data...
        }

        setTimeout( periodicData, 1000 );
    };
})(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-21T08:08:31.600

```
CKEDITOR.inline('editable'  ,{
        on:{
            blur: function(event){
                if (event.editor.checkDirty())
                    console.log(event.editor.getData());
            }
        }
    }); 
```

尝试这个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T20:58:33.263

看起来“模糊”事件可能会对您有所帮助： [http ://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#event:blur](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#event:blur)

# android - 适用于移动网站的 Android 应用程序

> ID：13922004
> 
> 赞同：1
> 
> 时间：2012-12-17T20:51:53.190
> 
> 标签：android, html

我正在寻找基于移动网站构建的 android 应用程序。基本上，我只需要一个可以用作平台的带有浏览器的应用程序。

许多“在线构建应用程序”网站都提供此功能，您只需输入主页网址等，但它们都包含自己的广告等。

任何想法从哪里开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:53:26.120

如果您想制作自己的没有广告的简单应用程序，只需在一个简单的活动布局集中使用一个 WebView 来填充屏幕。

这样做您将消除所有广告，并且如果您愿意，以后还可以添加更多功能。

如果您只想创建一个启动器图标，它将打开默认浏览器到您的站点页面，您可以通过启动浏览器意图，然后关闭实际应用程序来实现。

这将允许您拥有一个应用程序图标并播放商店列表，但是 iw 唯一会做的就是像您提到的那样将用户带到您的网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:53:17.237

[使用WebView](http://developer.android.com/reference/android/webkit/WebView.html)创建一个 Activity 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:54:36.747

我认为您正在寻找一个显示 WebView 的应用程序。但是，这只会显示网站，就好像您在移动浏览器（如 Android Chrome）中查看它一样。

如果您想要来自移动站点的*数据*，而不需要其他任何内容，那么您必须希望该站点提供该数据，或者您必须下载其 HTML 并抓取它。

# facebook - NodeJS 确认 Facebook 凭据

> ID：13922009
> 
> 赞同：0
> 
> 时间：2012-12-17T20:52:17.567
> 
> 标签：facebook, node.js, validation, authorization, oauth-2.0

在这种情况下，我有一个应用程序，其中：

1.  用户将在移动设备（本例中为 iOS）上使用 Facebook 单点登录 (SSO) 登录。

2.  然后将返回的 Facebook 凭据发送到 NodeJS 服务器（使用相同的 Facebook 应用程序密钥），并且在将它们关联到基于程序的帐户之前，需要将其验证为确实是用户的 Facebook 凭据。

问题：

鉴于可以访问 Facebook 作为身份验证结果返回的所有内容，如何使用这些数据来确认 Facebook 的授权？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:21:11.587

你可以做两件事：

*   Facebook 通常会向您传递一个[签名的请求](http://developers.facebook.com/docs/howtos/login/signed-request/)，您可以使用基本的 SHA2 哈希进行检查。如果哈希是正确的，您可以假设用户确实使用 facebook 进行了身份验证。

*   Facebook 通常还会向您传递一个（短期）[访问令牌](http://developers.facebook.com/docs/concepts/login/access-tokens-and-types/)，您可以[使用 graph api 将其交换为长期访问令牌](http://developers.facebook.com/docs/howtos/login/extending-tokens/)。在此交换完成后，您可以确定用户就是他所说的那个人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T16:06:09.687

[https://graph.facebook.com/me?access_token=TOKENGOESHERE](https://graph.facebook.com/me?access_token=TOKENGOESHERE)

如果返回一个用户，并且他们的 ID 是客户声称的，那么他们很可能就是他们所说的那个人。

# javascript - 方框 2d：重力和碰撞

> ID：13922013
> 
> 赞同：0
> 
> 时间：2012-12-17T20:52:40.693
> 
> 标签：javascript, box2dweb

我正在使用 box2dweb 2.1a3 和一个问题（我想重现愤怒的小鸟）：

我读取了一个具有级别的文件，当 box2d 主体（#1）与其他东西（#2）发生碰撞时，我想销毁第一个主体（#1）。但是当我将 b2d 骨放在另一个 b2d 主体上时，这些有时会发生碰撞（级别没有像素完美）。

当然，我可以发布我的代码的某些部分。

# iphone - 我需要为 iphone 中新添加的 youtube 视频编写额外的代码吗？

> ID：13922014
> 
> 赞同：-2
> 
> 时间：2012-12-17T20:52:42.453
> 
> 标签：iphone, objective-c, ios

我是 iPhone 开发的新手。我想创建一个应用程序来显示我将在我的帐户中上传的 youtube 视频。

我将在我的应用程序中有管理面板，我可以从那里控制我的视频。假设我开发了应用程序并在应用程序世界上启动。

现在过了一段时间我想向我的帐户添加新视频，我是否需要编写额外的代码或者它会通过 iphone 应用程序中使用的链接自动反映？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:10:38.080

一般来说，您可以让应用程序找到您在 Youtube 上发布的最新视频并将其显示在应用程序中。因此，您不需要更多的代码。

您的应用程序中没有任何视频的代码。相反，让您的应用从 Youtube 获取视频列表并播放它们。

# objective-c - 如何返回被触摸的子视图

> ID：13922016
> 
> 赞同：1
> 
> 时间：2012-12-17T20:53:01.737
> 
> 标签：objective-c, ios

我在这里搜索了很多答案，说要打开 userInteractionEnabled 属性。我已经这样做了。

我以编程方式创建子视图（不在 Interface Builder 中）。子视图是 UIView 的自定义子类（称为 PieceSuperClass）。

我想要的只是看起来像的东西

```
UITouch *touch = [touches anyObject];
CGPoint currentPosition = [touch locationInView:self.view];

UIView *hitView = [self.view hitTest:currentPosition withEvent:event];

if ([hitView isKindOfClass:[PieceSuperClass class]]) {
    return hitView;
} 
```

出于某种原因，`hitView` `isKindOfClass` `UIImageView`即使我最肯定地将其声明为`PieceSuperClass`. 'PieceSuperClass' 是 UIImageView 的子类。

```
// Draw proper piece 
UIImage *pieceImage = [UIImage imageNamed:[NSString stringWithFormat:@"%@%@.png", pieceColor, pieceName]]; 
PieceSuperClass *pieceImageView = [[PieceSuperClass alloc] initWithFrame:CGRectMake(0, 0, 39, 38)]; 
pieceImageView.image = pieceImage; 
pieceImageView.identifier = [NSString stringWithFormat:@"%@%@%@", pieceColor, pieceName, pieceNumber]; 
pieceImageView.userInteractionEnabled = YES; 
[boardView addSubview:pieceImageView]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:11:45.990

我认为您正在使用 currectposition 跟踪错误的视图。如果 PieceSuperClass 是您的 self.view 的子视图，您可能应该像这样跟踪它：

```
CGPoint currentPosition = [touch locationInView:self.view.subviews]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:43:29.160

这来自[UITouch 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITouch_Class/Reference/Reference.html)：

> 最初发生触摸的视图。（只读）
> 
> @property(nonatomic, readonly, retain) UIView *view

所以你可以知道哪个视图被触摸了，然后简单地这样做：

```
UIView *hitView = touch.view;
if ([hitView isKindOfClass:[PieceSuperClass class]]) {
    return hitView;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T00:36:46.657

弄清楚了！

```
- (id)whichPieceTouched:touches withEvent:event
{
UITouch *touch = [touches anyObject];
CGPoint currentPosition = [touch locationInView:self.view];

for (int i = 0; i < [piecesArray count]; i++) {
    if (CGRectContainsPoint([[piecesArray objectAtIndex:i] frame], currentPosition)) {
        return [piecesArray objectAtIndex:i];
        }
    }
} 
```

虽然我有一个挥之不去的问题：它似乎总是选择低于 20 像素的对象（或下一个对象）。

# javascript - 使用 JavaScript 获取当前 URL，然后在 html 代码中使用派生值

> ID：13922018
> 
> 赞同：2
> 
> 时间：2012-12-17T20:53:11.690
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我有一个简单的问题，但作为一个 JavaScript 新手，我不知道如何实现我的发现。

我发现了一个小片段，它使用 JavaScript 提取当前 URL，并将该值加载到变量中：

```
<script type="text/javascript" language="javascript">
  window.onload = function () {
    var currentUrl = window.location.href;
  }
</script> 
```

所以 的值`currentUrl`保存当前页面的 URL。

我需要知道的是如何在我的页面 HTML 中使用该值。我尝试使用它的应用程序是 facebook 评论插件。

```
<div class="fb-comments" data-href="**currentUrl**" data-width="470" data-num-posts="2"></div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T20:55:39.743

给你`div`一个id：

```
<div id="fb-comments" class="fb-comments" 
```

然后你可以`data-href`这样设置：

```
window.onload = function () {
    var currentUrl = window.location.href;
    document.getElementById("fb-comments").setAttribute("data-href", currentUrl);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T20:56:36.783

在这个特定的问题中，我认为：

```
// gets all elements of class-name 'fb-comments' from the document
var fbComments = document.getElementsByClassName('fb-comments');

// iterates through each of those elements
for (var i = 0, len = fbComments.length; i<len; i++) {
    // and sets the 'data-href' attribute to be the value held by the
    // the currentUrl variable
    fbComments[i].setAttribute('data-href', currentUrl);
} 
```

对于没有实现的浏览器`getElementsByClassName()`：

```
// gets all div elements within the document
var divs = document.getElementsByTagName('div');

// iterates through each of those div elements, and
for (var i = 0, len = divs.length; i<len; i++) {
    // if the class attribute contains a string equal to 'fb-comments'
    if (divs[i].className.indexOf('fb-comments') !== -1) {
        // sets the 'data-href' attribute to be equal to the value held
        // by the currentUrl variable
        divs[i].setAttribute('data-href', currentUrl);
    }
} 
```

参考：

*   [`getElementsByClassName()`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName).
*   [`getElementsByTagName()`](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName).
*   [`setAttribute()`](https://developer.mozilla.org/en-US/docs/DOM/element.setAttribute).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:56:12.240

你也许可以做这样的事情 -

```
<div id="myCommentBox" class="fb-comments" data-href="**currentUrl**" data-width="470" data-num-posts="2"></div>

var element = document.getElementById('myCommentBox');
element.setAttribute("data-href", currentUrl); 
```

请注意，我给出了`<div>`an`id`属性，以便使用`getElementById`. 请记住，您需要在[`FB.XFBML.parse()`](https://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)更改`data-href`属性后调用才能重新呈现评论框。

# c++ - Video4Linux 在开始捕获时崩溃

> ID：13922022
> 
> 赞同：-1
> 
> 时间：2012-12-17T20:53:17.353
> 
> 标签：c++, linux, v4l2

我尝试使用 video4linux 和 mmap 方法从网络摄像头捕获图像。我的设备是 Gentoo Linux（内核版本 2.6.33.20）上的 Aptina MT9M114 相机。代码基于此示例程序： http: [//linuxtv.org/downloads/v4l-dvb-apis/capture-example.html](http://linuxtv.org/downloads/v4l-dvb-apis/capture-example.html)

当我想开始捕捉时，我运行以下代码来准备我的缓冲区：

```
enum v4l2_buf_type type;

for (uint8_t i = 0; i < n_buffers; i++) {
    struct v4l2_buffer buf;
    CLEAR (buf);
    buf.type   = V4L2_BUF_TYPE_VIDEO_CAPTURE;
    buf.memory = V4L2_MEMORY_MMAP;
    buf.index  = i;

    if (-1 == ioctl(fd, VIDIOC_QBUF, &buf)) {
        return false;
    }
} 
```

在这里调用 ioctl() 时，我遇到了深层崩溃。这是我的系统日志，我没有更多信息：

```
Mar  2 20:06:30 nao33 klogd: kernel BUG at drivers/media/video/videobuf-core.c:227!
Mar  2 20:06:30 nao33 klogd: invalid opcode: 0000 [#2] PREEMPT
...
Mar  2 20:06:30 nao33 klogd: EIP: 0060:[<f804dad3>] EFLAGS: 00010246 CPU: 0
Mar  2 20:06:30 nao33 klogd: EIP is at videobuf_qbuf+0x23f/0x32d [videobuf_core]
Mar  2 20:06:30 nao33 klogd: EAX: 00000001 EBX: f5bf7e6c ECX: 00000000 EDX: f5bf7e6c
Mar  2 20:06:30 nao33 klogd: ESI: f6bcf61c EDI: f657f140 EBP: f5bf7dc4 ESP: f5bf7db4
Mar  2 20:06:30 nao33 klogd:  DS: 007b ES: 007b FS: 0000 GS: 0033 SS: 0068 preempt:00000000
Mar  2 20:06:30 nao33 klogd: Process videoexample (pid: 2979, ti=f5bf6000 task=f5bf00b0 task.ti=f5bf6000)
Mar  2 20:06:30 nao33 klogd: Stack:
Mar  2 20:06:30 nao33 klogd:  f5bf7e6c f5bf7e6c 00000000 f8255ca3 f5bf7dcc f8255cb0 f5bf7e48 f8148980
Mar  2 20:06:30 nao33 klogd: <0> 0000ee34 00000001 c14a6e94 c044560f f6bcf600 f5bfb540 f825777c f6b18000
Mar  2 20:06:30 nao33 klogd: <0> c14a6e94 f5bf7e10 c101ee52 00000000 f5bf00b0 f5bf7e20 c100160a f5bf0d80
Mar  2 20:06:30 nao33 klogd: Call Trace:
Mar  2 20:06:30 nao33 klogd:  [<f8255ca3>] ? vidioc_qbuf+0x0/0xf [unicorn]
Mar  2 20:06:30 nao33 klogd:  [<f8255cb0>] ? vidioc_qbuf+0xd/0xf [unicorn]
Mar  2 20:06:30 nao33 klogd:  [<f8148980>] ? __video_do_ioctl+0xe00/0x2d31 [videodev]
Mar  2 20:06:30 nao33 klogd:  [<c101ee52>] ? set_next_entity+0xab/0x117
Mar  2 20:06:30 nao33 klogd:  [<c100160a>] ? __switch_to+0x12/0x14d
Mar  2 20:06:30 nao33 klogd:  [<c112dd83>] ? might_fault+0x14/0x16
Mar  2 20:06:30 nao33 klogd:  [<c112dedc>] ? _copy_from_user+0x31/0x115
Mar  2 20:06:30 nao33 klogd:  [<f814ab79>] ? video_ioctl2+0x2c8/0x368 [videodev]
Mar  2 20:06:30 nao33 klogd:  [<c104635f>] ? T.366+0x27/0x33
Mar  2 20:06:30 nao33 klogd:  [<f814a8b1>] ? video_ioctl2+0x0/0x368 [videodev]
Mar  2 20:06:30 nao33 klogd:  [<f814711c>] ? v4l2_ioctl+0x33/0x37 [videodev]
Mar  2 20:06:30 nao33 klogd:  [<c1085daf>] ? vfs_ioctl+0x69/0x91
Mar  2 20:06:30 nao33 klogd:  [<c10862ad>] ? do_vfs_ioctl+0x448/0x486
Mar  2 20:06:30 nao33 klogd:  [<c107c9dd>] ? fget_light+0x87/0x91
Mar  2 20:06:30 nao33 klogd:  [<c108632c>] ? sys_ioctl+0x41/0x61
Mar  2 20:06:30 nao33 klogd:  [<c1002790>] ? sysenter_do_call+0x12/0x26
Mar  2 20:06:30 nao33 klogd: Code: 0f 8e e1 00 00 00 68 ba ec 04 f8 e9 77 fe ff ff 83 3d cc f4 04 f8 00 7e 0b 68 dc ec 04 f8 e8 13 e3 29 c9 5a 8b 4e 48 85 c9 75 04 <0f> 0b eb fe 83 f9 07 75 1d 83 7e 4c 02 75 0b c7 46 4c 03 00 00
Mar  2 20:06:30 nao33 klogd: EIP: [<f804dad3>] videobuf_qbuf+0x23f/0x32d [videobuf_core] SS:ESP 0068:f5bf7db4 
```

有没有人提示，这里有什么问题？实际上，这段代码应该可以工作，因为它可以在我的本地 PC 上运行，并且主要是从这个示例中复制而来的。所以我不知道如何找到问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:23:49.820

该错误似乎与设置图像尺寸的过程有关。设置 V4L2_FIELD_NONE 而不是 V4L2_FIELD_ANY 解决了崩溃问题。

```
struct v4l2_format fmt;
...
fmt.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
fmt.fmt.pix.width       = ...
fmt.fmt.pix.height      = ...
fmt.fmt.pix.pixelformat = ...
fmt.fmt.pix.field       = V4L2_FIELD_NONE; 
```

# c++ - boost::asio 获取客户端IP

> ID：13922025
> 
> 赞同：8
> 
> 时间：2012-12-17T20:53:26.120
> 
> 标签：c++, ip, boost-asio

我正在使用[boost::asio](http://www.boost.org/doc/libs/1_52_0/doc/html/)通过 TCP 编写服务器。我试图找到一种方法来阻止本地主机之外的连接。我唯一发现的是[这个](http://www.boost.org/doc/libs/1_38_0/doc/html/boost_asio/overview/networking/protocols.html#boost_asio.overview.networking.protocols.tcp_servers)。有：

```
boost::asio::ip::host_name() 
```

它返回“tomasz-lenovo-ideapad-Y530”（这是我机器的名称）。如何从中获取原始 ip（“127.0.0.1”或“localhost”）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-17T21:24:32.090

从服务给定连接的套接字对象。

```
std::cout << "Peer IP: " << socket.remote_endpoint().address().to_string() << std::endl; 
```

仅供参考：如果你想阻止来自其他机器的任何连接，它足以监听 127.0.0.1 而不是监听其他接口。为此，您应该像这样创建接受器：

```
acceptor(io_service, ip::tcp::endpoint(ip::address::from_string("127.0.0.1"), "5555")); 
```

这将仅在端口 5555 上侦听 127.0.0.1

# java - 未报告的 IOException？这段代码有什么问题？

> ID：13922027
> 
> 赞同：-1
> 
> 时间：2012-12-17T20:53:35.747
> 
> 标签：java, ioexception

我正在为家庭作业编写一些代码，我一生都无法弄清楚为什么它不会运行。它一直运行，直到我添加了文件读取方法，我知道它在另一个程序中工作。我直接从我的其他一些工作中获取了代码。那么，有谁能比我更擅长 Java 的人告诉我我做错了什么来解决这个问题？由于这是家庭作业，请不要告诉我如何解决任何其他问题，但我不会阻止有关它们的提示。

```
import java.io.*;
import java.util.Scanner;
import java.util.StringTokenizer;

public class vowels_r_us {

//for file reading
private static FileInputStream inFile;
private static InputStreamReader inReader;
private static BufferedReader reader;

//pasrsing input from file
private static StringTokenizer strTkn;

public static void main(String[] args) 
{

    initFile(); //prepare file for reading

    while (reader.ready())//iterate as long as there is more avaliable data
    {
        String word, suffix, line;
        line = getWordSuffix();
        word = line.substring(0, line.indexOf(' '));
        suffix = line.substring(line.indexOf(' '));

    }
}

/*CONJUGATION METHODS*/
static String pluralize(String s)
{
    String pluralForm;
    switch (classifyEnding(s))
    {
        case 'c':
            pluralForm = s.concat("GH");
            break;
        case 'v':
            pluralForm = s.substring(0, s.length() - 1).concat("G");//drop last letter add G
            break;
        case 'd':
            pluralForm = s + s.charAt(s.length() - 1) +"H";//double last letter, then add H
            break;
        default:
            pluralForm = "If you are getting this something is broken, have fun debugging.";
            break;
    }
    return pluralForm;
}

static String addSuffix(String word, String suffix)
{
    String suffixAdded;
    switch (classifyEnding(word))
    {
        case 'c':
            suffixAdded = word + suffix;
            break;
        case 'v':
            if(isVowel(suffix.charAt(0)))
            {
                suffixAdded = word + suffix.substring(1);//word + drop first letter of suffix then add suffix
            }
            else
            {
                suffixAdded = word + suffix.charAt(0) + suffix;//word + first letter of suffix + suffix
            }
            break;
        case 'd':
            if(isVowel(suffix.charAt(0)))
            {
                suffixAdded = word + suffix.charAt(0) + suffix;//word + first letter of suffix + suffix
            }
            else
            {
                suffixAdded = trimRepeatSequence(word) + suffix;
            }
            break;
        default:
            suffixAdded = "If you are getting this something is broken, have fun debugging.";
            break;
    }
    return suffixAdded;
}
/*END CONJUGATION METHODS*/

/*STRING MODIFICATION AND TESTING METHODS*/
//removes lefmost vowel or consonant from sequence
static String trimRepeatSequence(String s)
{
    String editedString = "";
    boolean vBasedEnding = isVowel(s.charAt(s.length() - 1));

    for (int i = s.length() - 1; i >= 0; i--)
    {
        if (isVowel(s.charAt(i)) != vBasedEnding)
        {
            editedString = s.substring(0, i+1) + s.substring(i+2, s.length());
            break;
        }
    }

    return editedString;
}

/* classify endings in to three grammatical categories, single vowel ending 'v', single consonant ending 'c', double type ending 'd'
 */
static char classifyEnding(String s)
{
    char grammaticalClass;
    if (isVowel(s.charAt(s.length()- 1)) == isVowel(s.charAt(s.length()- 2)))
    {
        grammaticalClass = 'd';
    }
    else
    {
        grammaticalClass = isVowel(s.charAt(s.length()- 1)) == true? 'v' : 'c';
    }
    return grammaticalClass;
}

static boolean isVowel(char c)
{
    boolean b;//rename
    switch (Character.toLowerCase(c))
    {
        case 'a': case 'c':
        case 's': case 'l':
            b = true;
            break;

        default:
            b = false;
            break;
    }
    return b;
}
/*END STRING MODIFICATION AND TESTING METHODS*/

/*FILE READER METHODS*/
//read file for input
public static void initFile() throws IOException
{
    inFile = new FileInputStream ("C:\\Users\\Tom\\Dropbox\\!!VHSAPCSData\\VHSP35data.txt");
    inReader = new InputStreamReader(inFile);
    reader = new BufferedReader(inReader);
}

public static String getWordSuffix() throws IOException
{
    String line;

    line = reader.readLine();

    return line;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:56:36.900

您需要将 IO 代码包装在 try/catch 中：

```
import java.io.*;
import java.util.Scanner;

public class ScanXan {
    public static void main(String[] args) throws IOException {

        Scanner s = null;

        try {
            s = new Scanner(new BufferedReader(new FileReader("xanadu.txt")));

            while (s.hasNext()) {
                System.out.println(s.next());
            }
        } finally {
            if (s != null) {
                s.close();
            }
        }
    }
} 
```

取自：[http ://docs.oracle.com/javase/tutorial/essential/io/scanning.html](http://docs.oracle.com/javase/tutorial/essential/io/scanning.html)

# android - Android 自定义按钮：替代多个图形？

> ID：13922030
> 
> 赞同：1
> 
> 时间：2012-12-17T20:53:45.283
> 
> 标签：android, button

我认为我能够为 Android 找到的所有自定义按钮教程都假设您为按钮使用三个图像：普通图像、按下图像和聚焦图像。

与其本质上将给定按钮资源的大小增加三倍（并为艺术家/UX 人员创建更多工作），是否可以仅提供普通按钮图像，而对于其他状态，在现有按钮上绘制某种覆盖通过扩展 Button 类？

有没有人尝试过成功地做到这一点，或者只是接受所有自定义按钮都需要每个状态的图像，就是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:14:22.710

您可以通过在自定义按钮中覆盖视图的绘制方法，但这将是一个简单的过程，因为您还必须自己识别不同的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:33:25.047

我认为这个问题的正确答案基本上是@Luksprog 在评论中所说的......这根本不值得。只是做额外的艺术。

# c++ - 错误：“*”标记之前的预期构造函数、析构函数或类型转换

> ID：13922038
> 
> 赞同：0
> 
> 时间：2012-12-17T20:54:12.487
> 
> 标签：c++, singleton

我有一个 C++ 类，尽管我有另一个用类似语法编写的类，并且可以毫不费力地编译，但我一直收到此错误。

这是我的.h：

```
#ifndef FISHPLAYER_H
#define FISHPLAYER_H

#include "Player.h"

class FishPlayer : public Player
{
public:
    float xThrust;
    float yThrust;
    static FishPlayer* getInstance();
protected:
private:
    FishPlayer();
    ~FishPlayer();
    static FishPlayer* instance;
};

#endif 
```

这是我的 .cpp ：

```
#include "..\include\FishPlayer.h"

FishPlayer* FishPlayer::instance=0;  // <== I Get The Error Here

FishPlayer::FishPlayer()
{
    //ctor
    xThrust = 15.0f;
    yThrust = 6.0f;
}

FishPlayer::~FishPlayer()
{
    //dtor
}

FishPlayer* FishPlayer::getInstance() { // <== I Get The Error Here
    if(!instance) {
        instance = new FishPlayer();
    }
    return instance;
} 
```

我已经找了一段时间了，它一定是大到我看不到的东西。

这是继承：

```
#ifndef PLAYER_H
#define PLAYER_H
#include "Ennemy.h"

class Player : public Ennemy
{
    public:
    protected:
        Player();
        ~Player();
    private:
};

#endif // PLAYER_H 
```

还有更高的：

```
#ifndef ENNEMY_H
#define ENNEMY_H

#include "Doodad.h"

class Ennemy : public Doodad
{
    public:
        float speedX;
        float maxSpeedX;
        float speedY;
        float maxSpeedY;
        float accelerationX;
        float accelerationY;
        Ennemy();
        ~Ennemy();
    protected:
    private:
}; 
```

和超类

```
#include <vector>
#include <string>

enum DoodadType{FishPlayer,Player,AstroPlayer,Ennemy,DoodadT = 999};
enum DoodadRange{Close, Medium , Far};
enum EvolutionStage{Tiny, Small, Average, Large};

class Doodad
{
    public:
        float score;
        void die();
        EvolutionStage evolutionStage;
        DoodadRange range;
        Doodad();
        virtual ~Doodad();
        Doodad(Doodad const& source);
        std::vector<Animation> animations;
        double posX;
        double posY;
        std::string name;
        std::string currentAnimation;
        int currentFrame;
        DoodadType type();
        SDL_Surface getSpriteSheet();
        bool moving;
        void update();
    protected:
    private:
        SDL_Surface spriteSheet;
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T21:26:09.907

看起来你`FishPlayer`用作枚举值`Doodad.h`

它与您要声明的类同名。这可能是问题的根源。

通常，最好使用`FISH_PLAYER`, 或`Type_FishPlayer`枚举值的命名方案以避免这样的冲突。

# node.js - 将 ember.js 与 node.js + express.js 一起使用

> ID：13922043
> 
> 赞同：8
> 
> 时间：2012-12-17T20:54:32.353
> 
> 标签：node.js, express, ember.js

经过多年在服务器端的 PHP/MySQL 开发，我正在尝试探索用于构建现代 Web 应用程序的新技术。

我正在尝试在所有 JavaScript 内容之间进行排序，如果我理解得很好，一个有效的解决方案可以是服务器端的 node.js，处理路由的 express.js，例如 ember.js 和/or knockout.js 来处理带有 MVC/MVVM、绑定、观察者的客户端。它是一个有效的架构吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T22:53:56.683

我在以下 github 位置建立了一个非常简单的网站

[https://github.com/bwship/neptunejs](https://github.com/bwship/neptunejs)

它在服务器端使用节点，在客户端使用 ember。它还使用 Parse.com 的数据和 api 层。但是，总体思路应该在那里为您列出，包括我认为非常可靠的文件夹和文件结构。

如果您有任何问题，请告诉我。我来自 ASP.NET 背景，并且刚刚完全爱上了客户端 MVC。

# jquery - 带有表单答案的 jQuery 更改 URL

> ID：13922048
> 
> 赞同：0
> 
> 时间：2012-12-17T20:54:55.983
> 
> 标签：jquery

我有一个关于更改包含一些表单信息但可能导致重复的 URL 的问题。很难用一句话来解释。所以我有一个表格用于搜索并尝试使用下拉菜单进行分页。URL 将是这样的：

[http://www.site.com/page/?name=Amanda&state=WA&approved=-2&form_date=&submit=提交](http://www.site.com/page/?name=Amanda&state=WA&approved=-2&form_date=&submit=Submit)

...并且下面的代码很好地添加了页面调用（例如）

[http://www.site.com/page/?name=Amanda&state=WA&approved=-2&form_date=&submit=Submit&page=2](http://www.site.com/page/?name=Amanda&state=WA&approved=-2&form_date=&submit=Submit&page=2)

但是，如果他们再次更改页面，它将复制页面调用，因此它将是

[http://www.site.com/page/?name=Amanda&state=WA&approved=-2&form_date=&submit=Submit&page=2&page=2](http://www.site.com/page/?name=Amanda&state=WA&approved=-2&form_date=&submit=Submit&page=2&page=2)

我知道如何通过 PHP 修复它，但如果可能的话，我想将它保存在 jQuery 中。下面是我的 jQuery 调用。我需要做一个 indexOf 电话吗？这是唯一的方法吗？我认为还有另一种方法，所以我想我只是问一下。

```
$('#page').change(function(){
    var pathName = window.location.search;
    var page_change = $('#page option:selected').val();
    if(pathName == ""){
        window.location.replace("?page="+page_change);
    } else {
        window.location.replace(pathName+"&page="+page_change);
    } 
```

});

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:22:26.687

这是你的意思吗？

```
$('#page').change(function(){
    var pathName = window.location.search;
    var page_change = $('#page option:selected').val();
    if(pathName == ""){
        window.location.replace("?page="+page_change);
    } else {
        path_arr = pathName.substr(1).split('&');
        new_path = new Array();
        for(p in path_arr) {
            if (path_arr[p].indexOf('page') == -1) {
                new_path.push(path_arr[p]);
            }
        }
        window.location.replace('?' + new_path.join() + '&page=' + page_change);
    }
}); 
```

# sql-server - CASE 在 SQL Server 中不起作用

> ID：13922054
> 
> 赞同：0
> 
> 时间：2012-12-17T20:55:22.877
> 
> 标签：sql-server, tsql

我正在尝试在 sql 中编写 if..else 条件如果它们是 companyID 中的 companyID 为 NULL，我想从“Company”表中获取公司名称打印“N/A”con 有人帮助我

```
SELECT [contactID]
      ,[customerID]
      ,(SELECT Label.labelContactType FROM  Label WHERE Label.labelContactTypeID = Customer_Contacts.labelContactTypeID)AS Type
      ,[contactDetails]
      ,[status]
      ,[notes]
      ,CASE WHEN [Customer_Contacts].companyID = NULL THEN 'N/A'
        WHEN [Customer_Contacts].companyID  <> NULL THEN (SELECT [companyName]
        FROM [TaskManagementSystem_DB].[dbo].[Company] WHERE [Company].companyID = [Customer_Contacts].companyID)
        END AS Company

  FROM [TaskManagementSystem_DB].[dbo].[Customer_Contacts]

  WHERE customerID = 24 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T20:58:07.010

尝试使用 'IS NULL' 代替 '= NULL'，并使用 'IS NOT NULL' 代替 '<> NULL'。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T20:59:32.657

为什么不只使用 a`JOIN`进行此查询：

```
SELECT cc.[contactID]
    ,cc.[customerID]
    ,l.labelContactType AS Type
    ,cc.[contactDetails]
    ,cc.[status]
    ,cc.[notes]
    , COALESCE(cp.[companyName], 'N/A') AS Company
FROM [TaskManagementSystem_DB].[dbo].[Customer_Contacts] cc
LEFT JOIN [TaskManagementSystem_DB].[dbo].[Company] cp
    on cc.companyID = cp.companyID
LEFT JOIN Label l
    on cc.labelContactTypeID = l.labelContactTypeID
WHERE cc.customerID = 24 
```

如果您需要连接语法方面的帮助，这里是[连接的一个很好的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T21:02:25.350

我真的会用`JOIN`s 重写它：它更具可读性、可维护性并且效率更高。您当前所做的是实现相关子查询（其中两个；一个用于标签，一个用于公司名称）。这是用`JOIN`s 重写并重新格式化以提高可读性的查询：

```
SELECT 
    cust.[contactID]
    ,cust.[customerID]
    ,l.labelContactType AS Type
    ,cust.[contactDetails]
    ,cust.[status]
    ,cust.[notes]
    ,ISNULL(comp.companyName, 'N/A') AS Company
FROM 
    [TaskManagementSystem_DB].[dbo].[Customer_Contacts] cust
LEFT JOIN
    [TaskManagementSystem_DB].[dbo].[Label] l
    ON
    cust.labelContactTypeID = l.labelContactTypeID
LEFT JOIN
    [TaskManagementSystem_DB].[dbo].[Company] comp
    ON
    cust.companyID = comp.companyID
WHERE 
    cust.customerID = 24 
```

`JOIN`如果你不熟悉它，我会研究它的语法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T21:31:18.743

你没有说“不工作”是什么意思。确切地说出“不工作”的意思很重要 - 返回不正确的结果？抛出错误？

在这种情况下，我认为问题在于您使用 '=' 测试 NULL 并且 ANSI_NULLS 为 ON。如果您收到类似“关键字'then'附近的语法不正确”和'关键字'as'附近的语法不正确'之类的消息，那么我认为这是您的问题。

如果是这种情况，您可以做几件事。1\. 转`ANSI_NULLS OFF`。我不推荐这个。2\. 将 =更改`NULL`为`IS NULL`和。这是我推荐的方法。`<> NULL``IS NOT NULL`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T21:22:19.373

何时`SET ANSI_NULLS`为 ON（默认和标准设置）您需要使用`a_column IS NULL`或`a_column IS NOT NULL`构造比较具有 NULL 的列。

关闭时`SET ANSI_NULLS`，等于 ( `=`) 和不等于 ( `<>`) 有效 - 但它是非标准的。我建议不要更改 ANSI_NULL 的默认设置。

# android - 在具有不同架构的设备上使用 cUrl 和 android

> ID：13922057
> 
> 赞同：0
> 
> 时间：2012-12-17T20:55:47.703
> 
> 标签：android, curl, android-ndk

我想在我的 android 项目中使用本机库 cUrl，但我担心不同的架构可能会出现问题。我是 NDK 的新手，所以如果你能帮助我解决这个问题，那就太好了。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:14:39.890

如果您要在 Android 应用程序中包含本机库，则需要为所有可能的架构（如 arm、x86）构建它。如果您不这样做，您的应用程序将无法在您不为其提供构建的设备上运行，并且它们也不会在这些设备的 Google Play 中可见。但是，在这些架构构建中，您是安全的。

Android NDK 提供了所有必要的支持来让您了解这种情况，因此您应该从那里开始阅读。

# spring - 如何在 Hadoop 中加载外部属性文件

> ID：13922060
> 
> 赞同：2
> 
> 时间：2012-12-17T20:56:01.970
> 
> 标签：spring, hadoop, configuration-files

我有一份 hadoop 工作，其中包括一些春豆。此外，在 spring 上下文文件中，有一个名为 app.properties 的 PropertyPlaceholderConfigurer。

这个 app.properties 在 jar 文件中，想法是将其从 jar 文件中删除，以便在不重新编译的情况下更改某些属性。

我尝试了该`-file`选项，该`-jarlibs`选项但均未奏效。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T21:27:11.990

我所做的是：

*   子类化 PropertyPlaceholderConfigurer
*   覆盖 loadProperties 方法
*   如果有自定义 System.getProperty("hdfs_path")

    ```
     try {
            Path pt = new Path(hdfsLocationPath);
            FileSystem fs = FileSystem.get(new Configuration());
            BufferedReader br = new BufferedReader(new InputStreamReader(fs.open(pt)));
            props.load(br);
        } catch (Exception e) {
            LOG.error(e);
        } 
    ```

奇迹般有效 ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:50:00.003

您可以将此属性文件添加到分布式缓存，如下所示：

```
...
String s3PropertiesFilePath = args[0];
DistributedCache.addCacheFile(new URI(s3PropertiesFilePath), conf);
... 
```

稍后，在 mapper/reducer 的 configure() 中，您可以执行以下操作：

```
...
Path s3PropertiesFilePath;
Properties prop = new Properties();
@Override
public void configure(JobConf job) {
    s3PropertiesFilePath = DistributedCache.getLocalCacheFiles(job)[0];
    //load the properties file
    prop.load(new FileInputStream(s3PropertiesFilePath.toString()));
...
} 
```

**PS：**如果您没有在 Amazon EMR 上运行它，那么您可以将此属性文件保存在您的 hdfs 中并提供该路径。

# codeigniter - Codeigniter：如何为递归函数声明一个全局变量，以及如何返回它？

> ID：13922061
> 
> 赞同：0
> 
> 时间：2012-12-17T20:56:03.937
> 
> 标签：codeigniter, recursion, scope

我想在 Codeigniter 的模型中使用递归，但对于我应该在哪里声明要在递归函数中使用的全局变量感到困惑。

我正在尝试显示按地理分类排序的产品目录。需要递归是因为地理数据库是层次树，一个地方可以有儿子、孙子、曾孙等（例如：伦敦是英国的儿子，英国的儿子，欧洲的儿子） ）。

在递归结束时，我想返回变量`$arrCatalog`，它将保存所有产品。所以我的另一个问题是最终如何返回该变量？

这是我的代码（尚未测试，因为我不知道如何处理全局变量）：

```
 class Catalogs_model extends CI_Model {

    public function __construct()
    {
        parent::__construct();

    }

function getCatalog($place_id, $prod_type)
{
    $sql =
        "SELECT id, heb_name, type FROM places p
        INNER JOIN places_relations r ON p.id = r.son
        WHERE father = ?
        ORDER BY sort_name";

    $query = $this->db->query($sql, $place_id);

    if($query->num_rows() > 0) {
        foreach ($query->result() as $place) {

                $sql2 =
                        "SELECT code, heb_title, price, place_id FROM products
                        INNER JOIN products_places ON prod_code=code
                        WHERE place_id = ? AND prod_type = ?";
                    $query2 = $this->db->query($sql, $place_id, $prod_type);

                    if($query2->num_rows() > 0) {
                            foreach ($query2->result() as $product) {
                                    $arrCatalog[] = $product; // $arrCatalog is the global variable I don't know where to declare and how to return.
                            }

                    $this->getCatalog($place['id'], $prod_type);

                    }

        }
    }

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:08:25.020

将您的变量传递给当前对象（$this），然后您可以将它传递给您的模型或将其传递给控制器​​。

```
class Catalogs_model extends CI_Model {
    public $arrCatalog = array();

    public function __construct() {
        parent::__construct();
    }

    function getCatalog($place_id, $prod_type) { 
    $sql = "SELECT ...";
    $query = $this->db->query($sql, $place_id);

    if($query->num_rows() > 0) {
        foreach ($query->result() as $place) {
            $sql2 = "...";
            $query2 = $this->db->query($sql, $place_id, $prod_type);

            if($query2->num_rows() > 0) {
                foreach ($query2->result() as $product) {
                    $this->arrCatalog[] = $product;
                 }
                 $this->getCatalog($place['id'], $prod_type);
             }
        }
    }
} 
```

你的控制器：

```
$this->catalogs_model->getCatalog(2, 'hebBook');
$data['data_rows'] = $this->catalogs_model->arrCatalog; 
```

测试，像这样改变你的模型......

```
class Catalogs_model extends CI_Model {
    public $arrCatalog = array();
    // add these variables for testing ....
    private $greeting = 'Hello'; // notice this is private?  You cannot access this from your controller but you can from anywhere within the Catalogs_model class.
    public $output = ''; // public 
    public $string = null; // public

    // your existing code ...

    function hello ()
    {
        $this->output = $this->greeting;
    }

    function hello_string ()
    {
        if($this->string)
        {
            $this->output = $this->greeting.' '.$string;
        }
    }
} // end class 
```

现在在你的控制器中测试

```
$this->catalogs_model->hello(); // runs the hello function which sets the model->output
echo $this->catalogs_model->output;  // echos 'Hello'

echo '<br />'; // just so the output stands apart in your browser.

$this->catalogs_model->string = 'World!';
$this->catalogs_model->hello_string();
echo $this->catalogs_model->output;  // echos Hello World! 
```

# dart - 如何链接到包含 Web 组件构造函数的外部 Dart 库？

> ID：13922062
> 
> 赞同：2
> 
> 时间：2012-12-17T20:56:07.297
> 
> 标签：dart, dart-webui

我一直在关注 Dart web-ui codelab。当我将 dart 源代码嵌入到 Web 组件`.html`文件中时，我在 Dart 编辑器中没有获得任何静态分析或自动完成支持（此[http://code.google.com/p/dart/issues/存在一个未解决的错误详细信息？id=7449](http://code.google.com/p/dart/issues/detail?id=7449)）。因此，我正在寻找使用 src 属性的临时解决方法。

根据规范，Dart 中的 Web 组件支持 src 属性： [https](https://www.dartlang.org/articles/dart-web-components/spec.html#behavior) ://www.dartlang.org/articles/dart-web-components/spec.html#behavior 。我尝试链接到外部 Dart 库：给定一个`foo.html`Web 组件

```
<element name="x-foo-component" constructor="FooComponent" extends="div"> 
```

我想链接到`foo_embed.dart`与我的 Web 组件相同的目录中的一个单独文件，该组件定义`FooComponent`，通过添加：

```
<script type="application/dart" src="foo_embed.dart"></script> 
```

内`foo.html`。按照规范的建议，`foo_embed.dart`需要是一个 Dart 库，并且包含：

```
library foo_embed;
import 'package:web_ui/web_ui.dart';
class FooComponent extends WebComponent {
    ...
} 
```

当我尝试这个时，运行`build.dart`（从这些说明[http://www.dartlang.org/articles/dart-web-components/tools.html](http://www.dartlang.org/articles/dart-web-components/tools.html)）最终只放入`foo_embed.dart`并且`out/`没有`out/foo.html.dart`生成用于导入的`application.dart`.

正如预期的那样，直接将 的内容`foo_embed.dart`作为内联脚本粘贴到内部`foo.html`（如在 codelab 中所做的那样）适用于`build.dart`，并且我可以在 Dartium 中启动我的 webapp，因此我的项目中似乎没有任何其他语法问题。

我可能在某处有一个简单的语法错误吗？或者这是 Dart Web 组件编译器的临时限制？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:48:33.330

我无法重现您的问题。

这对我有用：

**lib/foo.dart**

```
library foo;

import 'package:web_ui/web_ui.dart';

class FooComponent extends WebComponent {
  var foo = 'asddfg';
} 
```

**lib/foo.html**

```
<element name="x-foo" constructor="FooComponent" extends="div">
  <template>
    <input value="{{ foo }}" />
  </template>
  <script type="application/dart" src="foo.dart"></script>
</element> 
```

**示例/test.html**

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="components" href="packages/foo/foo.html" />
  </head>
  <body>
    <x-foo></x-foo>

    <script type="application/dart">main() {}</script>
    <script type="text/javascript" src="https://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js"></script>
  </body>
</html> 
```

然后我打开 Dartium 并转到`.../example/out/test.html`，我看到一个输入正确绑定了数据。

# c++ - 没有构造函数的类（隐式或显式）

> ID：13922067
> 
> 赞同：2
> 
> 时间：2012-12-17T20:56:27.983
> 
> 标签：c++

据我所知，如果您自己不声明任何构造函数，则会得到一个隐式默认构造函数。作为一个求职面试问题，我被问到一种情况，即您没有声明构造函数，但也没有获得隐式默认构造函数。所以你最终得到一个没有任何构造函数的类。它应该是可以编译的代码，所以答案是没有一个本身不提供默认构造函数的成员变量。有任何想法吗？搜索堆栈溢出和各种 C++ 站点并没有发现任何东西。此外，作为暗示，面试官说这与继承无关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T21:09:00.493

如果我对标准的阅读是正确的，如果不使用默认构造函数，它就不会被隐式定义。

C++11 12.1.6：

> 默认构造函数被默认且未定义为已删除的默认构造函数在被 odr 使用 (3.2) 创建其类类型 (1.8) 的对象时或在其第一次声明后显式默认时被隐式定义。

此外，可以将默认构造函数定义为“已删除”，C++11 12.1.5：

> 类 X 的默认默认构造函数在以下情况下被定义为已删除：
> 
> *   X 是一个类似联合的类，它有一个带有非平凡默认构造函数的变体成员，
> *   任何没有大括号或等号初始化器的非静态数据成员都是引用类型，
> *   任何没有大括号或初始化器的 const 限定类型（或其数组）的非变体非静态数据成员都没有用户提供的默认构造函数，
> *   X 是一个联合，它的所有变体成员都是 const 限定类型（或其数组），
> *   X 是一个非联合类，并且任何匿名联合成员的所有成员都是 const 限定类型（或其数组），或
> *   任何直接或虚拟基类，或没有大括号或相等初始化器的非静态数据成员，具有类类型 M（或其数组），并且 M 没有应用于 M 的默认构造函数或重载决议 (13.3)构造函数会导致歧义或导致从默认的默认构造函数中删除或无法访问的函数。

例如，从上面可以看出以下程序是格式良好的：

```
struct X {
  X(int) {}
};

struct Y {
  X x;
}; 
```

这里`Y`没有隐式定义的默认构造函数，因为它既未使用也未定义为已删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:22:42.217

不，没有这样的技巧，除非它是问题的确切措辞中的一个问题。

12.1p5：

> 如果 class 没有用户声明`X`的构造函数，则没有参数的构造函数被隐式声明为默认值。

隐式声明的默认构造函数可能被定义为已删除，但它仍然是类的成员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T21:35:38.930

Effective C++，Item 5：“这些函数 [ctor, dtor, copy ctor, copy assignment operator] 仅在需要时才生成 [...]”

据此，如果您有一个没有声明 ctors 的类，并且您没有创建该类的任何实例，那么您的类将根本没有构造函数。

# perl - 如何使用 perl Image::Magick 剪切图像的透明部分？

> ID：13922073
> 
> 赞同：4
> 
> 时间：2012-12-17T20:56:56.360
> 
> 标签：perl, imagemagick, imagemagick-convert

我有一个从文件`PNG`生成的图像。这个PNG是字母大小和透明的，除了内容部分。`convert``PDF`

我使用`Image::Magick`perl 模块来操作图像（就像一个新手）。内容从 28x28px 开始，宽度不变。高度是可变的。

如何剪切图像的透明部分并仅获取内容？或者我怎样才能找到 Image::Magick 的最后一条不透明行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T22:42:35.447

您想使用 Trim() 方法，然后重置页面属性。修剪将裁剪掉与角像素颜色完全相同的所有图像（在您的情况下是透明的）。重置页面属性将确保您的内容在新的更小的图像画布上正确对齐。

以下是 ImageMagick 文档中有关 Trim() 的更多信息：[http ://www.imagemagick.org/script/command-line-options.php#trim](http://www.imagemagick.org/script/command-line-options.php#trim)

它在 PerlMagick 中的有效图像处理方法列表中（尽管这里的文档有点稀疏）：[http ://www.imagemagick.org/script/perl-magick.php#manipulate](http://www.imagemagick.org/script/perl-magick.php#manipulate)

像下面这样的东西应该可以为您解决问题：

```
use strict;
use Image::Magick;

my $in = $ARGV[0];
my $out = $ARGV[1];

my $transparent_png = Image::Magick->new;
$transparent_png->Read("$in");
$transparent_png->Trim();
$transparent_png->Set(page=>'0x0+0+0');
$transparent_png->Write("$out"); 
```

# c++ - 读取外部文件并在类似 xml 的输入中分配变量

> ID：13922074
> 
> 赞同：0
> 
> 时间：2012-12-17T20:56:58.780
> 
> 标签：c++

在具有类似 xml 格式的文件中（但不是 xml）

```
 <mgrwt event="1">
<rscale>  1 1234</rscale>
<asrwt>0 4234</asrwt>
<pdfrwt beam="1">  1        2 0.11790045E+00 0.22210436E+03</pdfrwt>
<pdfrwt beam="2">  1       -2 0.92962177E-02 0.22210436E+03</pdfrwt>
<totfact> 0.34727485E+01</totfact>
<matchscale> 0.10000000E+11 0.41999999E+02 0.61496031E+02</matchscale>
</mgrwt> 
```

我想用 C++ 逐块读取文件（我知道 ;-)，然后将变量分配给每个块的子组件， - 例如，我知道

```
 <pdfrwt beam="1">  1        2 0.11790045E+00 0.22210436E+03</pdfrwt> 
```

即 `1 2 0.11790045E+00 0.22210436E+03`始终是数字，而不是字符串，所以问题是，如何从每个块中的每一行中剥离/读取以空格分隔的数字？

我也试过这个[用空格分隔的读取输入数字，](https://stackoverflow.com/questions/13096719/read-input-numbers-separated-by-spaces)但无法帮助我..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:41:28.993

我建议逐行阅读并使用`std::istringstream`来解析字符串。
例如，您可以通过搜索 first 找出数字的开始位置`>`。
要么将字符串流推进这个数量，要么......

创建一个包含“<”之前的所有文本的子字符串。`istringstream`使用此子字符串创建一个。然后尝试类似：

```
unsigned int first, second;
double third, fourth;
string_stream >> first >> second >> third >> fourth; 
```

# php - 错误 #1025 - 尝试添加级联删除时重命名错误

> ID：13922075
> 
> 赞同：0
> 
> 时间：2012-12-17T20:57:00.200
> 
> 标签：php, mysql, sql, syntax-error, cascade

我收到了这个错误：

```
#1025 - Error on rename of '.\projekt\wplaty' to '.\projekt\#sql2-1300-6c' (errno: 152) 
```

我做了一些研究，可能是因为我在一张桌子上改变了FK，但他的PK在许多桌子上都使用了。我怎样才能摆脱这个错误？

```
My PK is in table "baza_osob", name -> pesel.
My FK are in:
-"wplaty", name -> pesel.
-"skladki_aktualne", name -> pesel.
-"dluznicy", name ->pesel.
-"skladki_wyplaty", name -> pesel. 
```

我正在尝试从这个主题的帮助：

[在删除级联 - 我必须添加它](https://stackoverflow.com/questions/13920078/on-delete-cascade-where-i-have-to-add-it)

任何人都知道我该怎么做？我在 phpMyAdmin 中使用 MySQL。

@edit 命令“触发”错误：

```
alter table wplaty drop foreign key pesel; 
```

# ruby-on-rails - 在 Ember Data 中按日期对日历事件进行分组

> ID：13922080
> 
> 赞同：1
> 
> 时间：2012-12-17T20:57:37.797
> 
> 标签：ruby-on-rails, ember.js, ember-data

这里的一个简单示例可能是事件列表，例如日历，或者只是看起来像这样的普通旧列表

```
Monday

- event1
- event2

Tuesday

- event3 
```

我不确定如何在应用程序中实现这一点。在我看来，有两种选择：

## 1.服务器端

在服务器上假装实际上有一些`Day`封装事件的模型。这意味着你会做这样的事情

```
def index
  events = Event.recent.group_by { |e| e.starts_at.to_date }.to_a

  days = data.map.with_index do |pair, index|
    # ember data seems to break without the ID here
    { id: index, date: pair[0], events: pair[1] }
  end

  render json: { days: days }
end 
```

然后在客户身上假装你实际上有一个`Day`模型`hasMany` `Events`。

然后模板看起来像

```
{{#each day in controller}}
  <h2>{{day.date}}</h2>

  {{#each event in day.events}}
    <p>{{event.name}}</p>
  {{/each}}

{{/each}} 
```

## 2.客户端

我不确定如何正确实现这一点，但这基本上意味着您只需返回一个事件列表，并将它们分组到客户端。然后服务器看起来就像

```
def index
  render json: Event.recent
end 
```

但是客户端不会像第一个示例那样在模板中进行简单的迭代。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-20T20:07:03.677

我今天开始和 Ember 一起玩，只有一两个小时，所以要加一点盐。

我有同样的问题，并找到了一个[`group-by`计算属性](https://github.com/embersherpa/examples/blob/master/app/utils/group-by.js)（[示例](http://embersherpa.github.io/examples/#group-by)）。现在阅读计算属性。;)

# xsl-fo - 当表格跨多个页面时，如何使 XSL-FO 表格标题在每个页面上重复？

> ID：13922082
> 
> 赞同：6
> 
> 时间：2012-12-17T20:57:49.553
> 
> 标签：xsl-fo

我有一些很长的表，它们跨越多个页面，使用 Apache-FOP 1.1 呈现

表格有标题，例如“表 7.6。某事的详细信息”和列标题。

在每个续页上，列标题在顶部正确重复。但我还需要让表格延续也有标题，形式为：“表 7.6。某事的详细信息（续）”

有没有办法用 XSL-FO 和 Apache-FOP 做到这一点？或者它是否需要通过 RenderX 提供的扩展？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T07:33:17.700

我不知道在 FOP 中执行此操作的方法，但这可能是因为我没有将 FOP 用于生成基本 PDF 之外的任何内容。

使用 RenderX (XEP)，您可以设置您`fo:table-header`想要在后续页面上使用的任何标题，并使用常规`fo:block`作为初始标题。

然后，您可以使用您的`rx:table-omit-initial-header="true"`属性在`fo:table`第一次输出表格时不输出表格标题。

这是 RenderX 4.18 渲染的示例...

**示例 XSL-FO**

```
<fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format" 
    xmlns:rx="http://www.renderx.com/XSL/Extensions">
    <fo:layout-master-set>
        <fo:simple-page-master master-name="my-page" page-width="8.5in" page-height="11in">
            <fo:region-body margin="1in" margin-top="1.5in" margin-bottom="1.5in"/>
        </fo:simple-page-master>
    </fo:layout-master-set>
    <fo:page-sequence master-reference="my-page">
        <fo:flow flow-name="xsl-region-body">
            <fo:block font-size="12pt" font-weight="bold" 
                text-align="center" space-after="6pt">Sample Table</fo:block>
            <fo:block>
                <fo:table rx:table-omit-initial-header="true" space-before=".08in">
                    <fo:table-column column-width="100%"/>
                    <fo:table-header>
                        <fo:table-cell>
                            <fo:block font-weight="bold"
                                font-size="12pt" text-align="center" 
                                space-after="6pt">Sample Table (Cont)</fo:block>
                        </fo:table-cell>
                    </fo:table-header>
                    <fo:table-body>
                        <fo:table-row>
                            <fo:table-cell>
                                <fo:table border-style="solid" border-width="1pt" padding="6pt">
                                    <fo:table-column column-number="1" column-width="20%"/>
                                    <fo:table-column column-number="2" column-width="80%"/>
                                    <fo:table-header font-weight="bold">
                                        <fo:table-cell text-align="left">
                                            <fo:block>Column 1</fo:block>
                                        </fo:table-cell>
                                        <fo:table-cell>
                                            <fo:block>Column 2</fo:block>
                                        </fo:table-cell>
                                    </fo:table-header>
                                    <fo:table-body>
                                        <fo:table-row padding-before="20px">
                                            <fo:table-cell>
                                                <fo:block>Lorem ipsum dolor sit amet</fo:block>
                                            </fo:table-cell>
                                            <fo:table-cell>
                                                <fo:block>Ten years ago a crack commando unit was sent to prison by a military court for a crime they didn’t commit. These men promptly escaped from a
                                                    maximum security stockade to the Los Angeles underground. Today, still wanted by the government, they survive as soldiers of fortune.</fo:block>
                                            </fo:table-cell>
                                        </fo:table-row>
                                        <fo:table-row>
                                            <fo:table-cell>
                                                <fo:block>Lorem ipsum dolor sit amet</fo:block>
                                            </fo:table-cell>
                                            <fo:table-cell>
                                                <fo:block>Ten years ago a crack commando unit was sent to prison by a military court for a crime they didn’t commit. These men promptly escaped from a
                                                    maximum security stockade to the Los Angeles underground. Today, still wanted by the government, they survive as soldiers of fortune.</fo:block>
                                            </fo:table-cell>
                                        </fo:table-row>
                                        <fo:table-row>
                                            <fo:table-cell>
                                                <fo:block>Lorem ipsum dolor sit amet</fo:block>
                                            </fo:table-cell>
                                            <fo:table-cell>
                                                <fo:block>Ten years ago a crack commando unit was sent to prison by a military court for a crime they didn’t commit. These men promptly escaped from a
                                                    maximum security stockade to the Los Angeles underground. Today, still wanted by the government, they survive as soldiers of fortune.</fo:block>
                                            </fo:table-cell>
                                        </fo:table-row>
                                        <fo:table-row>
                                            <fo:table-cell>
                                                <fo:block>Lorem ipsum dolor sit amet</fo:block>
                                            </fo:table-cell>
                                            <fo:table-cell>
                                                <fo:block>Ten years ago a crack commando unit was sent to prison by a military court for a crime they didn’t commit. These men promptly escaped from a
                                                    maximum security stockade to the Los Angeles underground. Today, still wanted by the government, they survive as soldiers of fortune.</fo:block>
                                            </fo:table-cell>
                                        </fo:table-row>
                                        <fo:table-row>
                                            <fo:table-cell>
                                                <fo:block>Lorem ipsum dolor sit amet</fo:block>
                                            </fo:table-cell>
                                            <fo:table-cell>
                                                <fo:block>Ten years ago a crack commando unit was sent to prison by a military court for a crime they didn’t commit. These men promptly escaped from a
                                                    maximum security stockade to the Los Angeles underground. Today, still wanted by the government, they survive as soldiers of fortune.</fo:block>
                                            </fo:table-cell>
                                        </fo:table-row>
                                        <fo:table-row>
                                            <fo:table-cell>
                                                <fo:block>Lorem ipsum dolor sit amet</fo:block>
                                            </fo:table-cell>
                                            <fo:table-cell>
                                                <fo:block>Ten years ago a crack commando unit was sent to prison by a military court for a crime they didn’t commit. These men promptly escaped from a
                                                    maximum security stockade to the Los Angeles underground. Today, still wanted by the government, they survive as soldiers of fortune.</fo:block>
                                            </fo:table-cell>
                                        </fo:table-row>
                                        <fo:table-row>
                                            <fo:table-cell>
                                                <fo:block>Lorem ipsum dolor sit amet</fo:block>
                                            </fo:table-cell>
                                            <fo:table-cell>
                                                <fo:block>Ten years ago a crack commando unit was sent to prison by a military court for a crime they didn’t commit. These men promptly escaped from a
                                                    maximum security stockade to the Los Angeles underground. Today, still wanted by the government, they survive as soldiers of fortune.</fo:block>
                                            </fo:table-cell>
                                        </fo:table-row>
                                        <fo:table-row>
                                            <fo:table-cell>
                                                <fo:block>Lorem ipsum dolor sit amet</fo:block>
                                            </fo:table-cell>
                                            <fo:table-cell>
                                                <fo:block>Ten years ago a crack commando unit was sent to prison by a military court for a crime they didn’t commit. These men promptly escaped from a
                                                    maximum security stockade to the Los Angeles underground. Today, still wanted by the government, they survive as soldiers of fortune.</fo:block>
                                            </fo:table-cell>
                                        </fo:table-row>
                                        <fo:table-row>
                                            <fo:table-cell>
                                                <fo:block>Lorem ipsum dolor sit amet</fo:block>
                                            </fo:table-cell>
                                            <fo:table-cell>
                                                <fo:block>Ten years ago a crack commando unit was sent to prison by a military court for a crime they didn’t commit. These men promptly escaped from a
                                                    maximum security stockade to the Los Angeles underground. Today, still wanted by the government, they survive as soldiers of fortune.</fo:block>
                                            </fo:table-cell>
                                        </fo:table-row>
                                        <fo:table-row>
                                            <fo:table-cell>
                                                <fo:block>Lorem ipsum dolor sit amet</fo:block>
                                            </fo:table-cell>
                                            <fo:table-cell>
                                                <fo:block>Ten years ago a crack commando unit was sent to prison by a military court for a crime they didn’t commit. These men promptly escaped from a
                                                    maximum security stockade to the Los Angeles underground. Today, still wanted by the government, they survive as soldiers of fortune.</fo:block>
                                            </fo:table-cell>
                                        </fo:table-row>
                                        <fo:table-row>
                                            <fo:table-cell>
                                                <fo:block>Lorem ipsum dolor sit amet</fo:block>
                                            </fo:table-cell>
                                            <fo:table-cell>
                                                <fo:block>Ten years ago a crack commando unit was sent to prison by a military court for a crime they didn’t commit. These men promptly escaped from a
                                                    maximum security stockade to the Los Angeles underground. Today, still wanted by the government, they survive as soldiers of fortune.</fo:block>
                                            </fo:table-cell>
                                        </fo:table-row>
                                        <fo:table-row>
                                            <fo:table-cell>
                                                <fo:block>Lorem ipsum dolor sit amet</fo:block>
                                            </fo:table-cell>
                                            <fo:table-cell>
                                                <fo:block>Ten years ago a crack commando unit was sent to prison by a military court for a crime they didn’t commit. These men promptly escaped from a
                                                    maximum security stockade to the Los Angeles underground. Today, still wanted by the government, they survive as soldiers of fortune.</fo:block>
                                            </fo:table-cell>
                                        </fo:table-row>
                                        <fo:table-row>
                                            <fo:table-cell>
                                                <fo:block>Lorem ipsum dolor sit amet</fo:block>
                                            </fo:table-cell>
                                            <fo:table-cell>
                                                <fo:block>Ten years ago a crack commando unit was sent to prison by a military court for a crime they didn’t commit. These men promptly escaped from a
                                                    maximum security stockade to the Los Angeles underground. Today, still wanted by the government, they survive as soldiers of fortune.</fo:block>
                                            </fo:table-cell>
                                        </fo:table-row>
                                        <fo:table-row>
                                            <fo:table-cell>
                                                <fo:block>Lorem ipsum dolor sit amet</fo:block>
                                            </fo:table-cell>
                                            <fo:table-cell>
                                                <fo:block>Ten years ago a crack commando unit was sent to prison by a military court for a crime they didn’t commit. These men promptly escaped from a
                                                    maximum security stockade to the Los Angeles underground. Today, still wanted by the government, they survive as soldiers of fortune.</fo:block>
                                            </fo:table-cell>
                                        </fo:table-row>
                                        <fo:table-row>
                                            <fo:table-cell>
                                                <fo:block>Lorem ipsum dolor sit amet</fo:block>
                                            </fo:table-cell>
                                            <fo:table-cell>
                                                <fo:block>Ten years ago a crack commando unit was sent to prison by a military court for a crime they didn’t commit. These men promptly escaped from a
                                                    maximum security stockade to the Los Angeles underground. Today, still wanted by the government, they survive as soldiers of fortune.</fo:block>
                                            </fo:table-cell>
                                        </fo:table-row>
                                        <fo:table-row>
                                            <fo:table-cell>
                                                <fo:block>Lorem ipsum dolor sit amet</fo:block>
                                            </fo:table-cell>
                                            <fo:table-cell>
                                                <fo:block>Ten years ago a crack commando unit was sent to prison by a military court for a crime they didn’t commit. These men promptly escaped from a
                                                    maximum security stockade to the Los Angeles underground. Today, still wanted by the government, they survive as soldiers of fortune.</fo:block>
                                            </fo:table-cell>
                                        </fo:table-row>
                                        <fo:table-row>
                                            <fo:table-cell>
                                                <fo:block>Lorem ipsum dolor sit amet</fo:block>
                                            </fo:table-cell>
                                            <fo:table-cell>
                                                <fo:block>Ten years ago a crack commando unit was sent to prison by a military court for a crime they didn’t commit. These men promptly escaped from a
                                                    maximum security stockade to the Los Angeles underground. Today, still wanted by the government, they survive as soldiers of fortune.</fo:block>
                                            </fo:table-cell>
                                        </fo:table-row>
                                        <fo:table-row>
                                            <fo:table-cell>
                                                <fo:block>Lorem ipsum dolor sit amet</fo:block>
                                            </fo:table-cell>
                                            <fo:table-cell>
                                                <fo:block>Ten years ago a crack commando unit was sent to prison by a military court for a crime they didn’t commit. These men promptly escaped from a
                                                    maximum security stockade to the Los Angeles underground. Today, still wanted by the government, they survive as soldiers of fortune.</fo:block>
                                            </fo:table-cell>
                                        </fo:table-row>
                                        <fo:table-row>
                                            <fo:table-cell>
                                                <fo:block>Lorem ipsum dolor sit amet</fo:block>
                                            </fo:table-cell>
                                            <fo:table-cell>
                                                <fo:block>Ten years ago a crack commando unit was sent to prison by a military court for a crime they didn’t commit. These men promptly escaped from a
                                                    maximum security stockade to the Los Angeles underground. Today, still wanted by the government, they survive as soldiers of fortune.</fo:block>
                                            </fo:table-cell>
                                        </fo:table-row>
                                        <fo:table-row>
                                            <fo:table-cell>
                                                <fo:block>Lorem ipsum dolor sit amet</fo:block>
                                            </fo:table-cell>
                                            <fo:table-cell>
                                                <fo:block>Ten years ago a crack commando unit was sent to prison by a military court for a crime they didn’t commit. These men promptly escaped from a
                                                    maximum security stockade to the Los Angeles underground. Today, still wanted by the government, they survive as soldiers of fortune.</fo:block>
                                            </fo:table-cell>
                                        </fo:table-row>
                                        <fo:table-row>
                                            <fo:table-cell>
                                                <fo:block>Lorem ipsum dolor sit amet</fo:block>
                                            </fo:table-cell>
                                            <fo:table-cell>
                                                <fo:block>Ten years ago a crack commando unit was sent to prison by a military court for a crime they didn’t commit. These men promptly escaped from a
                                                    maximum security stockade to the Los Angeles underground. Today, still wanted by the government, they survive as soldiers of fortune.</fo:block>
                                            </fo:table-cell>
                                        </fo:table-row>
                                        <fo:table-row>
                                            <fo:table-cell>
                                                <fo:block>Lorem ipsum dolor sit amet</fo:block>
                                            </fo:table-cell>
                                            <fo:table-cell>
                                                <fo:block>Ten years ago a crack commando unit was sent to prison by a military court for a crime they didn’t commit. These men promptly escaped from a
                                                    maximum security stockade to the Los Angeles underground. Today, still wanted by the government, they survive as soldiers of fortune.</fo:block>
                                            </fo:table-cell>
                                        </fo:table-row>
                                    </fo:table-body>
                                </fo:table>
                            </fo:table-cell>
                        </fo:table-row>
                    </fo:table-body>
                </fo:table>
            </fo:block>
        </fo:flow>
    </fo:page-sequence>
</fo:root> 
```

**示例 PDF 输出页面 1**

![在此处输入图像描述](../Images/02e18c50389983a60ef29fd10e4d0079.png)

**示例 PDF 输出页面 2**

![在此处输入图像描述](../Images/24e5de96e1ac88274d0c9100ef23d8b8.png)

# regex - 正则表达式在 Linux 中工作但在 Windows 中不工作 - node.JS

> ID：13922086
> 
> 赞同：2
> 
> 时间：2012-12-17T20:58:08.090
> 
> 标签：regex, linux, windows, node.js

这是一个小的 web-server 函数，它获取一个 url 并解析它，确保客户端不请求不在服务器根文件夹下的资源

```
function getUrl(url, resourceMap, rootFolder) {
    var path = require('path');
    if (typeof resourceMap[url] !== 'undefined') {
        return (path.join(rootFolder,resourceMap[url]));
    } 
    var absoluteURL = path.join(rootFolder,url);
    console.log("ROOT: "+rootFolder);
    console.log("NEW: "+absoluteURL);
    var regex = new RegExp('^' + rootFolder + '.*')
    if (absoluteURL.match(regex) === null) {
        console.log("FALSE");
        return (false);
    }
    return (absoluteURL);
} 
```

如您所见，我确保`absoluteURL`从`rootFolder`使用正则表达式开始`'^' + rootFolder + '.*'`

这在 Linux 上运行良好，但在 Windows 中它总是返回 false。

顺便说一句，输出是

```
ROOT: C:\Users\user\workspace
NEW: C:\Users\user\workspace\images\IMG_7102.JPG 
```

所以我知道解析url是可以的。

艾米的想法为什么？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T21:00:31.210

在 Windows 上，`\`路径中的 s 成为正则表达式中的转义字符。

你需要[正则表达式转义](https://stackoverflow.com/a/6969486/34397)它：

```
rootFolder.replace(/[-[\/{}()*+?.\\^$|]/g, "\\$&") 
```

# objective-c - 带有所有选项卡视图项的共享标题栏的 UITabController

> ID：13922089
> 
> 赞同：0
> 
> 时间：2012-12-17T20:58:34.153
> 
> 标签：objective-c, ios, cocoa-touch

当我的应用程序启动时，我会有一个可供用户选择的初始列表。一旦选择，用户应该被带到一个 UITabController ，它的内容与初始列表中选择的项目相关。

为了让用户返回该列表，我希望在应用程序顶部有一个标题/工具栏。该栏应该包含一个标题和一个按钮，让用户可以返回到可以选择新项目的第一个模式列表。

我知道我可以让每个单独的视图控制器指定一个标题和一个按钮，但我希​​望它在 AppDelegate 而不是在每个视图上进行控制，这样每个视图就不必包含重复的逻辑来完成此操作。

理想情况下，我的应用程序将是一个 UINavigationController 和一个包含 UITabViewController 的 UIViewController；但是，Apple 似乎不赞成这种类型的流程。

有没有办法管理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:10:59.017

我认为在标签栏控制器级别没有任何方法可以做到这一点。您可以创建一个 UIViewController 的子类来添加一些方法和属性来处理您的标题栏，然后让您的每个单独的控制器都从该类继承而不是直接从 UIViewController

# javascript - 用比以前更少的行数据重新加载本地 jqGrid - 没有看到行消失？

> ID：13922090
> 
> 赞同：2
> 
> 时间：2012-12-17T20:58:34.293
> 
> 标签：javascript, jquery, jqgrid

所以，我有一个运行良好的 jqGrid 工具。我正在显示一些数据行，当添加新数据时——网格会根据需要刷新。

但是，如果我尝试从网格中删除一行 - 它不会清除丢失的行！添加新行没问题，但删除会留下数据和错误的网格显示。

如果我先调用“clearGridData”，我会看到数据已适当清理。但是，如果我调用 clearGridData - 我会丢失我的选择/页面！

[http://jsfiddle.net/yNw3C/1766/](http://jsfiddle.net/yNw3C/1766/)

```
var data = [[48803, "DSK1", "", "02200220", "OPEN"], [48769, "APPR", "", "77733337", "ENTERED"]];

$("#grid").jqGrid({
    datatype: "local",
    height: 250,
    colNames: ['Inv No', 'Thingy', 'Blank', 'Number', 'Status'],
    colModel: [{
        name: 'id',
        index: 'id',
        width: 60,
        sorttype: "int"},
    {
        name: 'thingy',
        index: 'thingy',
        width: 90,
        sorttype: "date"},
    {
        name: 'blank',
        index: 'blank',
        width: 30},
    {
        name: 'number',
        index: 'number',
        width: 80,
        sorttype: "float"},
    {
        name: 'status',
        index: 'status',
        width: 80,
        sorttype: "float"}
    ],
    caption: "Stack Overflow Example"
});

var names = ["id", "thingy", "blank", "number", "status"];
var mydata = [];

for (var i = 0; i < data.length; i++) {
    mydata[i] = {};
    for (var j = 0; j < data[i].length; j++) {
        mydata[i][names[j]] = data[i][j];
    }
}

for (var i = 0; i <= mydata.length; i++) {
    $("#grid").jqGrid('addRowData', i + 1, mydata[i]);
}

$('#UpdateGridButton').click(function(){
    mydata[0].status = "CLOSED";
    delete mydata[1];

    //If I add this -- I can refresh grid data properly, but I lose my selection.
    //$('#grid').clearGridData();

    $("#grid").jqGrid('setGridParam', { data: mydata});

    $("#grid").trigger('reloadGrid', [{current: true}]);
}); 
```

​ jqGrid 是否支持两全其美？还是我需要编写自定义逻辑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T22:04:37.400

抱歉，您目前以错误的方式使用 jqGrid。

首先网格的填充非常重要。您当前使用`addRowData`. 这是我知道的最古老但*最慢的填充网格的方法。*如果你使用`datatype: "local"`你应该使用`data: mydata`which 允许直接用数据创建 jqGrid。

其他非常重要的选项是`gridview`和`rowNum`。您应该始终使用`gridview: true`来提高网格的性能（有关更多详细信息，请参阅[答案](https://stackoverflow.com/a/12519858/315935)）。要了解价值`rowNum`你应该知道jqGrid是设计来支​​持数据分页的。如果`datatype: "local"`排序和分页将由 jqGrid 自己在本地实现。用于导航页面的寻呼机将通过使用`toppager: true`option 或通过使用来创建`pager: "#pagerId"`。**即使您不创建任何寻呼机，本地寻呼仍然处于激活状态**。默认值为`rowNum`20。因此，您当前的网格将仅显示前 20 行。唯一的例外是`addRowData`这会强制在当前页面上临时添加行。重新加载后（例如通过更改排序间接），只会为用户显示前 20 行，并且用户将没有 GUI 来更改页面（!!!???）。如果你想在一页上显示所有行，你应该使用`rowNum: 10000`例如。

下一个重要参数`autoencode: true`意味着单元格的数据应该被解释为文本而不是 HTML 片段。如果您不使用`autoencode: true`，您将无法显示包含`'<'`,`'>'`等的文本`'&'`。

`height: "auto"`如果您使用本地数据分页，我建议您另外使用。它将删除为滚动条保留的网格右侧大小的空白空间。您可以交替使用`scrollOffset: 0`来删除不需要的空间。

代码中的下一个重要错误是使用`setGridParam`with`data`参数。仅当网格之前为空或您需要添加一些额外的行时，您才可以执行此操作。存在主要是为了`setGridParam`其他目的。它在内部使用`$.extend`（请参阅[此处](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.base.js#L2640-L2644)的代码）。因此，您将使用新值*扩展*旧的数据包含，而不是将旧值替换为新值`data`。您可以做的是例如用于`getGridParam`获取**对内部`data`参数**的引用：

```
var data = $("#grid").jqGrid("getGridParam", "data"); 
```

`data`然后您可以使用`push`,`pop`和修改数组`delete`。要完全替换`data`你可以做的

```
var allParameters = $("#grid").jqGrid("getGridParam");
allParameters.data = newData; // or newData.slice(0) 
```

之后，您可以通过触发 重新加载网格`"reloadGrid"`。

# c++ - 如何在c++中将整数转换为具有固定位数的字符串？

> ID：13922095
> 
> 赞同：0
> 
> 时间：2012-12-17T20:58:48.547
> 
> 标签：c++, string

例如，4位数字，将0转换为“0000”；和 12 到“0012”。

c++中有什么好的方法吗？

抱歉没有说清楚，我的编译器不支持 snprintf，我想要一个类似的函数

std::string ToString(int value, int digitsCount);

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T21:00:54.430

```
char buf[5];
snprintf(buf, sizeof(buf), "%04d", intVal); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T21:14:19.783

也许是这样的

```
#include <iostream>
#include <iomanip>
#include <sstream>

using namespace std;

string ToString(int value,int digitsCount)
{
    ostringstream os;
    os<<setfill('0')<<setw(digitsCount)<<value;
    return os.str();
}

int main()
{
    cout<<ToString(0,4)<<endl;
    cout<<ToString(12,4)<<endl;
} 
```

# php - d3.json() 失败，但 jQuery $.getJSON() 使用相同的 URL 和 php 代码正常工作

> ID：13922101
> 
> 赞同：-1
> 
> 时间：2012-12-17T20:59:08.830
> 
> 标签：php, json, get, download, d3.js

我使用 d3.js 和 CodeIgniter，当我在运行此代码时使用 d3.json 获取 json 数据时遇到问题：

```
var url = "http://probe.dev/draw/windRose?station=vp2&sensors=wind&Since=2012-10-15T00:00:00&StepUnit=DAY&StepNbr=6;
d3.json(url, function(d) {
    console.log(d); // print NULL in console
} 
```

但它适用于

```
$.getJSON(url, function(d) {
    console.log(d); // print my data object correctly
} 
```

我的 php 代码是：

```
<?php
@ob_end_clean();
 header('Content-Type: "application/json"');
 header('Content-Disposition: attachment; filename="data.json"');
 header("Content-Transfer-Encoding: binary");
 header('Expires: 0');
 header('Pragma: no-cache');
 header("Content-Length: ".strlen($data));
  exit($data); 
```

我不明白为什么 d3.json 不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T18:44:11.200

我无法让它与 v2 一起工作，我搬到了[d3js.v3](https://github.com/mbostock/d3/tree/v3.0.3)并且它工作了。

v3 中的回调函数有两个参数：

```
d3.json(url, function(error, json) {
    if (error) return console.warn(error);
    else ...;
} 
```

# android - android：如何使用 am 从命令行启动本机活动？

> ID：13922102
> 
> 赞同：1
> 
> 时间：2012-12-17T20:59:11.110
> 
> 标签：android, android-ndk, native

我知道我可以使用类似这样的东西来启动 Java 活动

```
am start -a android.intent.action.MAIN -n com.example.hellojni/
com.example.hellojni.HelloJni 
```

本地活动怎么样？？？我尝试使用来自 AndroidManifest.xml 中的 android:name 的类似 -n 参数，但它总是告诉我 Activity 类不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-08T08:20:00.763

它的工作原理几乎相同，除了您使用 android 应用程序 uri 进行活动而不是 uri 为您覆盖的活动。只是要注意 android.intent.action.MAIN 和 android.intent.action.LAUNCHER 都为我工作。

我开始 -a android.intent.action.MAIN -n com.example.hellojni/android.app.NativeActivity

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:27:23.217

您可以使用您正在显示的意图启动它，只要它在应用程序清单中声明为可从启动器访问：

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

可以使用在属性“android:name”中声明的名称为 Activity 启动它。查看 SDK for [NativeActivity](http://developer.android.com/reference/android/app/NativeActivity.html)了解更多信息。

但是，在您使用的示例中，它不是原生活动，而是常规活动，带有链接的原生库（NDK 中包含的示例）。

我希望这有帮助！

# java - 如何更新地图中的值，保持顺序

> ID：13922115
> 
> 赞同：1
> 
> 时间：2012-12-17T21:00:15.943
> 
> 标签：java, collections

我有`TreeMap`一个自定义的`Comparator`. 我想更新 Map 的值之一，但如果检查的字段`Comparator`发生更改，Map 是否保持其顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:04:12.907

您永远不应该修改存储在地图中的键。或者至少不修改用于实现`equals()`和`hashCode()`（在 HashMap 的情况下）或`compareTo()`/ `compare()`（在 SortedMap 的情况下）的任何字段。

这将使地图处于不一致的状态，并且您不能指望它在这样做之后可靠地工作。

当然，您可以从地图中删除密钥，修改它，然后重新插入。

但是你最好使用不可变类型作为你的地图的键，以避免在你的脚下开枪。

# jquery - 使用 jQuery 在新选项卡中打开 Pdf

> ID：13922119
> 
> 赞同：1
> 
> 时间：2012-12-17T21:00:41.690
> 
> 标签：jquery, asp.net-mvc-4, pdf-generation

我有我的 MVC4 Actionresult 返回一个 MemoryStream

```
MemoryStream memory = new MemoryStream();
Response.AppendHeader("Content-Disposition", "inline; filename=" + outputFilename + ".pdf");
            return File(memory, "application/pdf"); 
```

和 Jquery

```
$.ajax({
            type: "GET",
            url: '/Report/Pdf/',
            async: false,
            dataType: 'html',
            success: function (result) { alert("Done!");}
        }); 
```

如何在 AJAX 的成功功能上打开新窗口/选项卡并显示 PDF 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:02:40.993

最简单的方法是使用链接，有或没有`target=blank`（前者将允许用户自己控制他们想要打开它的位置）。

```
 <a href="/Report/pdf"> 
```

然后有，`window.open`但据我所知，你不能直接用它来定位新标签。

# c++ - 如何正确制作虚拟方法？(C++)

> ID：13922122
> 
> 赞同：-1
> 
> 时间：2012-12-17T21:01:06.223
> 
> 标签：c++, class, polymorphism

这是我所拥有的：

```
class Abstract
{
public:
  virtual bool isThis(Abstract*);
};

class FileType:public Abstract
{
public:
  bool isThis(FileType* ptr)
  {
    return false;
  }
}; 
```

这就是 Visual Studio 所说的：

![在此处输入图像描述](../Images/be2f30d3ebfd9db50b6251ee1482f128.png)

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T21:05:16.847

首先，如果你没有为 中的函数提供代码`Abstract`，你必须使它成为虚拟纯（`= 0`在最后添加）。然后，派生类中函数的签名必须相同（即接受`Abstract*`参数而不是`FileType*`）。

我*强烈*建议您之前阅读一些 C++ 手册。它会为你省去很多麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:05:25.543

错误消息说它找不到 ; 的实现`Abstract::isThis(Abstract*)`。这似乎是正确的，因为您提供的代码片段没有此函数的定义。

如果这个想法是一个纯虚函数，那么添加`= 0`到声明的末尾（在`;`. 但是你会得到一个进一步的错误，因为`FileType`没有覆盖那个函数：`FileType::isThis(FileType*)`没有相同的参数列表。

# playframework - 如何在 Play 框架中的视图中排除可重用组件？

> ID：13922123
> 
> 赞同：1
> 
> 时间：2012-12-17T21:01:09.627
> 
> 标签：playframework, views

我希望正确考虑我的观点，以免产生太多重复。我正在使用 Play 框架，我想分解的元素是基本的常见元素——页眉、页脚、导航元素。

这种类型的保理的标准模式是什么？当我读到视图继承特性时，它们听起来好像不允许重用组件。

我正在使用 Play 2.0 版。

* * *

例如，假设我有多个页面的通用布局，并且我希望有可交换的位 - 例如，中心内容位和页脚，我正在显示的不同页面具有不同的页脚和内容组合.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T00:18:28.473

我能想到两件事。第一个是当您拥有页面的骨架并且您希望每个视图都填充该骨架的一个部分时，例如，这将是您的骨架：

**主.html：**

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>#{get 'title' /}</title>
    </head>
    <body>
        #{doLayout /}
    </body>
</html> 
```

这将是使用它的页面之一：

**ex1.html：**

```
#{extends 'main.html' /}
#{set title:'Your title' /}

<div>
   Your content
</div> 
```

这样您就不必担心所有常见的“包装”代码，并且与您在该示例中设置标题的方式相同，您还可以将样式表或 javascript 链接添加到标题。

第二种方法是拥有一个包含您在单独模板中执行的片段的页面，以便您可以重复使用它们：

**示例2.html：**

```
<div id="footer">
   #{include 'Application/footer.html' /}
</div> 
```

**页脚.html：**

```
<span>This will be rendered inside the "footer" div</span> 
```

不确定从这样一个简单的解释是否清楚何时使用哪个，我认为一旦你得到差异是很自然的，我一直都使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:34:49.633

您应该使用 和 的组合，`layouts`如`tags`文档[中所述](http://www.playframework.org/documentation/2.0.4/JavaTemplateUseCases)。

`Layout` *包装*当前视图，因此它是开始和结束 HTML 结构、将脚本添加到`head`hTML 文档部分以及放置典型元素的最佳位置 - 例如带有徽标的稳定页眉、带有版权的页脚等。如果您有相同的主导航所有页面，您也可以将其放入布局中，然后您可以将参数添加到布局视图中，以便轻松更改活动项目的 CSS 类。请注意，例如，如果您有 2 个不同版本的主导航（例如，一个用于普通用户，第二个仅用于管理员），您可以只创建 2 个不同的布局或使用一种布局并根据某些情况显示两个不同的版本参数从初始视图传递。

`Tags`用于*将*代码注入当前视图（因此它们的作用与布局正好相反）。它们是没有布局的普通视图，也是带参数的函数。它们主要用于放置在每个页面甚至请求上都在变化的东西 - 例如通知框（来自 doc: `success`,`error`等）。它们对于子导航也很有用，特别是当它在主导航的每个“分支”上发生变化时，并且有可能在某些页面上根本不应该显示它。

您也可以`tags`在`layouts`（可能反之亦然）中使用，如您所见，有很多可能性:)

注意：palako 的示例很好地说明了这一点，但它对于 Play 1.x 模板引擎来说是典型的，对于 Play 2.x，请查看参考[文档](http://www.playframework.org/documentation/2.0.4/JavaTemplateUseCases)和/或随 Play 源提供的示例应用程序。

# jquery - 如何更改 jquery 数据表单元格的更新行为？

> ID：13922129
> 
> 赞同：0
> 
> 时间：2012-12-17T21:01:35.507
> 
> 标签：jquery, jquery-ui, jquery-plugins

我正在使用 jquery 数据表来显示一些信息。更新功能运行良好。当我双击要编辑的单元格值时，它变成了一个文本框。它允许我输入我想要的任何值并按回车键。一旦我按下回车键，它就会向服务器发送一个 AJAX 请求以执行更新。当我按 Tab 键（而不是 Enter 键）或单击不同的单元格时，我试图找出是否有办法进行更新。任何建议表示赞赏。谢谢你。

# javascript - 尝试在 Three.js 中为立方体着色

> ID：13922130
> 
> 赞同：2
> 
> 时间：2012-12-17T21:01:38.010
> 
> 标签：javascript, three.js

我正在尝试用 3 种不同的颜色在 three.js 中为立方体着色，但似乎我在可以添加到场景中的 THREE.DirectionalLight 对象的数量上达到了一些上限。在文档中，我没有看到任何提到这样的限制，所以我想知道这是否真的如此，或者我是否遗漏了其他东西？

[http://jsfiddle.net/ZMwfc/](http://jsfiddle.net/ZMwfc/)

```
 var renderer = new THREE.WebGLRenderer();
        renderer.setSize( 800, 600 );
        document.body.appendChild( renderer.domElement );

        var scene = new THREE.Scene();

        var camera = new THREE.PerspectiveCamera(
                                        35,             // Field of view
                                        800 / 600,      // Aspect ratio
                                        0.1,            // Near plane
                                        10000           // Far plane
                                    );
        camera.position.set( -15, 10, 10 );
        camera.lookAt( scene.position );

        scene.add( camera );

        var cube = new THREE.Mesh(
                                new THREE.CubeGeometry( 5, 5, 5 ),
                                new THREE.MeshLambertMaterial( { color: 0xFFFFFF } )
                            );
        scene.add( cube );
        // top
        light = new THREE.DirectionalLight( 0x0DEDDF );
        light.position.set( 0, 1, 0 );
        scene.add( light );

        // bottom
        light = new THREE.DirectionalLight( 0x0DEDDF );
        light.position.set( 0, -1, 0 );
        scene.add( light );

        // back
        light = new THREE.DirectionalLight( 0xB685F3 );
        light.position.set( 1, 0, 0 );
        scene.add( light );

        // front
        light = new THREE.DirectionalLight( 0xB685F3 );
        light.position.set( -1, 0, 0 );
        scene.add( light );

        // right
        light = new THREE.DirectionalLight( 0x89A7F5 );
        light.position.set( 0, 0, 1 );
        scene.add( light );

        // left
        light = new THREE.DirectionalLight( 0x89A7F5 );
        light.position.set( 0, 0, -1 );
        scene.add( light );

        renderer.render( scene, camera ); 
```

​</p>

在这里，您将看到被着色的侧面：顶部、底部、前部、后部、左侧和右侧。前四个会平局，后两个不会。重新排序并查看。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:23:18.173

渲染器对其将渲染的灯光数量有限制，默认情况下为四个。

从[three.js 文档](http://mrdoob.github.com/three.js/docs/53/#Reference/Renderers/WebGLRenderer)：

> WebGLRenderer（参数）
> 
> 参数是一个可选对象，其属性定义渲染器的行为。构造函数也不接受任何参数。在所有情况下，当缺少参数时，它将假定合理的默认值。
> 
> ...
> 
> maxLights - 整数，默认为 4

传递`{maxLights: 6}`给渲染器的构造函数将使所有 6 个灯工作。

但是，没有理由仅仅为了给立方体的面着色而创建 6 种不同的定向光。您可以设置面颜色并`{vertexColors: THREE.FaceColors}`在创建材质时使用以创建多色立方体。例如，请参阅[仅使用一种灯（和随机颜色）的小提琴版本](http://jsfiddle.net/ZMwfc/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:35:40.627

实际上，您的代码原样很好。

这是一个小提琴，显示它在修订版 r.53 下工作：http: [//jsfiddle.net/ZMwfc/4/](http://jsfiddle.net/ZMwfc/4/)。

正如[Migration](https://github.com/mrdoob/three.js/wiki/Migration) wiki 中所见，

> WebGLRenderer 构造函数不再使用 maxLights 参数：将使用场景中的确切灯光数量生成着色器（现在由应用程序层确保着色器在特定系统上编译）。

三.js r.53

```
. 
```

# windows - 来自 LoadImage() 的位图句柄上的 GetObject() 有时会返回不正确的位图大小

> ID：13922131
> 
> 赞同：3
> 
> 时间：2012-12-17T21:01:47.900
> 
> 标签：windows, winapi, visual-c++, mfc

我们看到一个间歇性问题，在 Windows XP 下使用位图作为背景的所有者绘制的按钮显示位图不正确。将显示包含多个按钮的窗口，这些按钮对用于按钮背景的位图图像使用相同的位图文件，并且大多数按钮将是正确的，尽管在某些情况下可能有一个或两个按钮显示位图背景减少到较小的尺寸。

如果您退出应用程序然后重新启动它，您可能会看到按钮上图标显示不正确的相同行为，但它可能与以前的按钮相同，也可能不同。这种在按钮上不正确显示图标的行为也并非总是可见的。有时它显示，有时它不显示。因为一旦我们为按钮加载了一个图标，我们就保留它，一旦按钮显示不正确，它总是会显示不正确。

使用调试器，我们终于发现似乎正在发生的事情是，当`GetObject()`调用函数时，返回的位图大小数据有时不正确。例如，在一种情况下，位图是 75x75 像素，而返回的大小`GetObject()`是 13x13。由于这个尺寸被用作位图绘制的一部分，所以显示的背景成为按钮窗口上的一个小装饰。

实际源区如下。

```
if (!hBitmapFocus) {
    CString iconPath;
    iconPath.Format(ICON_FILES_DIR_FORMAT, m_Icon);
    hBitmapFocus = (HBITMAP)LoadImage(NULL, iconPath, IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);
}
if (hBitmapFocus) {
    BITMAP   bitmap;
    int iNoBytes = GetObject(hBitmapFocus, sizeof(BITMAP), &bitmap);
    if (iNoBytes < 1) {
        char xBuff[128];
        sprintf (xBuff, "GetObject() failed. GetLastError = %d", GetLastError ());
        NHPOS_ASSERT_TEXT((iNoBytes > 0), xBuff);
    }
    cxSource = bitmap.bmWidth;
    cySource = bitmap.bmHeight;
    //Bitmaps cannot be drawn directly to the screen so a 
    //compatible memory DC is created to draw to, then the image is 
    //transfered to the screen
    CDC hdcMem;
    hdcMem.CreateCompatibleDC(pDC);

    HGDIOBJ  hpOldObject = hdcMem.SelectObject(hBitmapFocus);

    int xPos;
    int yPos;

    //The Horizontal and Vertical Alignment
    //For Images
    //Are set in the Layout Manager
    //the proper attribute will have to be checked against
    //for now the Image is centered on the button

    //Horizontal Alignment
    if(btnAttributes.horIconAlignment == IconAlignmentHLeft){//Image to left
        xPos = 2;
    }else if(btnAttributes.horIconAlignment == IconAlignmentHRight){//Image to right
       xPos = myRect.right - cxSource - 5;
    }else {//Horizontal center
       xPos = ((myRect.right - cxSource) / 2) - 1;
    }

    //Vertical Alignment
    if(btnAttributes.vertIconAlignment == IconAlignmentVTop){//Image to top
        yPos = 2;
    }else if(btnAttributes.vertIconAlignment == IconAlignmentVBottom){//Image to bottom
        yPos = myRect.bottom - cySource - 5;
    }else{//Vertical Center
        yPos = ((myRect.bottom - cySource) / 2) - 1;
    }

    pDC->BitBlt(xPos, yPos, cxSource, cySource, &hdcMem, 0, 0, SRCCOPY);

    hdcMem.SelectObject(hpOldObject);
} 
```

使用调试器，我们可以看到`iconPath`字符串是正确的，并且加载的位图`hBitmapFocus`不是 NULL。接下来我们可以看到调用`GetObject()`了 并且返回的值`iNoBytes`等于 24。对于那些正确显示值`bitmap.bmWidth`并且正确的按钮，`bitmap.bmHeight`但是对于那些不正确的按钮，值太小导致绘制时的大小不正确位图。

该变量在类头中定义为

```
HBITMAP hBitmapFocus; 
```

作为对此进行研究的一部分，我发现了这个[堆栈溢出问题，GetObject 返回奇怪的大小](https://stackoverflow.com/questions/5315227/getobject-returns-strange-size)，我想知道这里是否存在某种对齐问题。

`bitmap`调用中使用的变量是否`GetObject()`需要位于某种对齐边界上？当我们对一些数据使用打包时，我们使用`pragma`指令仅指定包含文件中需要打包在一个字节边界上的特定结构的代码的特定部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:16:46.640

请阅读[此 Microsoft KB](http://support.microsoft.com/kb/158898)如何加载带有调色板信息的位图。它也有一个很好的例子。

附注：我在您的代码中没有看到您调用 ::DeleteObject(hBitmapFocus) 的任何地方。调用它非常重要，因为您可以很快用完 GDI 对象。

使用 Windows 任务管理器查看您的程序不会耗尽 GDI 资源总是一个好主意。只需在任务管理器中添加“GDI 对象”列，您的应用程序中的对象数量并没有不断增加，而是保持在预期范围内，类似于其他程序

# java - 是否可以将 System.currentTimeinMillis 转换为 Date

> ID：13922132
> 
> 赞同：2
> 
> 时间：2012-12-17T21:01:56.470
> 
> 标签：java

我在 Mongo DB 中有一个名为 updated_at 的字段

它将以这种方式在数据库中查找

updated_at : NumberLong("1355754242785")

这个 Updated_at 文件是以这种方式在数据库中创建的

长现在 = System.currentTimeMillis();

从其中一个 DB Record 中，我将一个值设为

```
updated_at" : NumberLong("1355754242785"), "volatility12" : "na", "vwap" : "0", "wk52hi" : "0", "wk52hidate" : "----"} 
```

例如说它的值为 1355754242785

更新时是否可以转换 1355754242785 ？

当我尝试转换

```
public class Aim {
    public static void main(String[] args) {
        DateFormat formatter = new SimpleDateFormat("dd/MM/yyyy hh:mm:ss.SSS");
        long now = 1355754242785; // Error here saying out of range 
        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(now);
        System.out.println(now + " = " + formatter.format(calendar.getTime()));
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T21:04:33.257

改变

```
 long now = 1355754242785; // Error here saying out of range 
```

到

```
long now = 1355754242785L; 
```

这是一个编译错误，用于赋值；这应该给您一个线索，即问题与日期无关，只是因为 Java 中的文字数字被假定为`int`，其最大值为`2^31-1`. 您必须添加`L`后缀以告诉 Java 该文字将被解释为`long`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T21:03:58.460

当然，只需使用[`Date(long)`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#Date%28long%29)构造函数，它以毫秒为单位接收时间作为参数。做这样的事情：

```
Date date = new Date(System.currentTimeMillis()); 
```

顺便说一句，这相当于简单地写这个：

```
Date date = new Date(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T21:03:46.353

```
long now = 1355754242785L;
Date nowAsDate = new Date(now); 
```

# gwt - 将元素投射到 FlowPanel？

> ID：13922135
> 
> 赞同：0
> 
> 时间：2012-12-17T21:02:03.767
> 
> 标签：gwt

我正在尝试创建自己的复合按钮，使用 div 作为外部父级：

```
public class CompoundButton extends ButtonBase {
    public CompoundButton() {
        super(DOM.createDiv());
    }
} 
```

不过，ButtonBase 的构造函数需要一个 Element 实例，所以我使用的是 DOM.createDiv() 调用。但是此时我如何添加子小部件？：

```
public CompoundButton() {
    super(DOM.createDiv());  <-- we're just a div.

    // ButtonBase has no "add()" method - but this class is really 
    // just a div instance, so shouldn't I be able to convert it to 
    // a FlowPanel for example to be able to add elements to it here?
    this.add(new FlowPanel());   <-- not possible, "add()" not available here. 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:50:23.430

Button base 需要一个单元格，而 flowpanel 不是一个单元格，并且您的复合按钮代码是错误的，因为它没有将单元格发送到其父级。

正确的代码是

```
public class CompoundButton<C> extends ButtonBase<C>
{
   protected CompoundButton( ButtonCellBase<C> cell )
   {
        super( cell );
   }
} 
```

# tinymce - 微小的 mce style_formats 标题

> ID：13922136
> 
> 赞同：3
> 
> 时间：2012-12-17T21:02:04.283
> 
> 标签：tinymce

我正在使用这样的 tinymce style_formats：

```
style_formats : [
                {title : '20px', selector : 'p,div,h1,h2,h3,h4,h5,h6', styles: {lineHeight: '20px'}},
                {title : '25px', selector : 'p,div,h1,h2,h3,h4,h5,h6', styles: {lineHeight: '25px'}},
                {title : '30px', selector : 'p,div,h1,h2,h3,h4,h5,h6', styles: {lineHeight: '30px'}},
                {title : '35px', selector : 'p,div,h1,h2,h3,h4,h5,h6', styles: {lineHeight: '35px'}},
                {title : '40px', selector : 'p,div,h1,h2,h3,h4,h5,h6', styles: {lineHeight: '40px'}},
                {title : '45px', selector : 'p,div,h1,h2,h3,h4,h5,h6', styles: {lineHeight: '45px'}},
                {title : '50px', selector : 'p,div,h1,h2,h3,h4,h5,h6', styles: {lineHeight: '50px'}},
                {title : '55px', selector : 'p,div,h1,h2,h3,h4,h5,h6', styles: {lineHeight: '55px'}},
                {title : '60px', selector : 'p,div,h1,h2,h3,h4,h5,h6', styles: {lineHeight: '60px'}},
                {title : '65px', selector : 'p,div,h1,h2,h3,h4,h5,h6', styles: {lineHeight: '65px'}},
                {title : '70px', selector : 'p,div,h1,h2,h3,h4,h5,h6', styles: {lineHeight: '70px'}},
                {title : '75px', selector : 'p,div,h1,h2,h3,h4,h5,h6', styles: {lineHeight: '75px'}}
        ]
    }); 
```

列表框的标题是“样式”，我想将其更改为“行高”。

我需要改变哪里？我在 lang 文件中找不到它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T04:33:53.480

打开**tinymce-->themes-->advanced-->lang-->en.js**

**将"style_select":"Styles"**更改为**"style_select":"Line Height"**

希望能帮助到你！！

注意：每当您将 tinymce 更新到新版本时，您都必须牢记此更改

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:48:38.003

要更改标题可以修改`tiny_mce/themes/advanced/langs/en.js` 类似“显示名称”描述下的 lang 文件。

但是为了避免每次更新到新的 tinymce 版本时都必须修改此文件，您可以使用 oninit 更改标题并在 tinymce.init 中设置 tinymce 配置参数：

```
tinymce.EditorManager.i18n['en.advanced.style_select'] = 'Line Height'; 
```

所以，你可以使用：

```
tinyMCE.init({
   ...
   setup : function(ed) {
     ed.onBeforeRenderUI.add(function(ed, cm) {
         tinymce.EditorManager.i18n['en.advanced.style_select'] = 'Line Height';
     });
   }
}); 
```

# jquery - 添加自动重载功能

> ID：13922144
> 
> 赞同：1
> 
> 时间：2012-12-17T21:02:29.643
> 
> 标签：jquery, ajax, refresh, reload

我正在尝试使用“FeedEk jQuery”制作一个小工具，但问题是我无法在该代码中添加自动更新提要！例如，我想每 5 分钟更改和重新加载一次提要。

**来源：** [http ://www.jquery-plugins.net/FeedEK/FeedEK.html](http://www.jquery-plugins.net/FeedEK/FeedEK.html)

**默认功能：**

```
<script type="text/javascript" >
$(document).ready(function(){     
   $('#divRss').FeedEk({
   FeedUrl : 'http://www.my site.ir/rss.xml',
   MaxCount : 5,
   ShowDesc : false,
   ShowPubDate: true
  });  
});
</script> 
```

**HTML：**

```
<div id="divRss"></div> 
```

我的问题是，如何在此 jquery 代码上每 5 分钟添加一次自动更新或刷新计时器？

下一个问题是，我如何为描述添加字数限制，例如描述中只有 200 个字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:10:43.293

为了解释我在评论中的意思，把上面的内容包装在一个函数中（我们称之为`loadFeed()`：

```
<script type="text/javascript" >
$(document).ready(function(){     
  function loadFeed(){ // wrapper function
    $('#divRss').FeedEk({
     FeedUrl : 'http://www.my site.ir/rss.xml',
     MaxCount : 5,
     ShowDesc : false,
     ShowPubDate: true
    }); 
  } // /wrapper
});
</script> 
```

接下来，就在它直接调用该函数之后，它在页面加载时执行：

```
loadFeed(); 
```

[`setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)然后，在其下方放置一个重复调用（使用），以便更新：

```
setInterval(loadFeed, 300 * 1e3); // every 5 minutes [300 seconds] 
```

所以，总的来说：

```
<script type="text/javascript" >
$(document).ready(function(){     
  function loadFeed(){ // wrapper function
    $('#divRss').FeedEk({
     FeedUrl : 'http://www.my site.ir/rss.xml',
     MaxCount : 5,
     ShowDesc : false,
     ShowPubDate: true
    }); 
  } // /wrapper
  loadFeed();
  setInterval(loadFeed, 300 * 1e3);
});
</script> 
```

关于您的第二个问题，您可能需要打开脚本并修改调用中的`entry.content`部分，`$.ajax`以便它只显示您想要的尽可能多的信息。如果它被缩小（全部为一行），您可以使用[jsBeautifier](http://jsbeautifier.org/)使其更易于阅读和使用。

# c++ - 防止参数包扩展中的数组衰减

> ID：13922145
> 
> 赞同：9
> 
> 时间：2012-12-17T21:02:32.383
> 
> 标签：c++, templates, c++11

是否可以防止从参数包扩展的参数中的数组到指针衰减？

例如：

```
#include <iostream>

void foo() {
  std::cout << "empty\n";
}

template <typename T, typename... Rest>
void foo(T &&t, Rest... rest) {
  std::cout << "T, ...\n";
  foo(rest...);
}

template <typename... Rest>
void foo(char *p, Rest... rest) {
  std::cout << "char*, ...\n";
  foo(rest...);
}

template <int N, typename... Rest>
void foo(char (&first)[N], Rest... rest) {
  std::cout << "char[], ...\n";
  foo(rest...);
}

int main() {
  char a[2], b[2], c[2];
  foo(a, b, c);
} 
```

...输出：

```
char[], ...
char*, ...
char*, ...
empty 
```

如您所见，第一次调用转到基于数组的重载，但随后的调用转到基于指针的重载。 **有没有办法让所有调用都转到基于数组的重载？**

相关：[变量模板函数的问题](https://stackoverflow.com/questions/13918400/problems-specializing-variable-template-function)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T21:13:14.917

您想通过右值引用传递参数包：

```
void foo(char (&first)[N], Rest&&... rest)
                               ^^ 
```

所以代码整体看起来像这样：

```
#include <iostream>

void foo() {
  std::cout << "empty\n";
}

template <typename T, typename... Rest>
void foo(T &&t, Rest... rest) {
  std::cout << "T, ...\n";
  foo(rest...);
}

template <typename... Rest>
void foo(char *p, Rest... rest) {
  std::cout << "char*, ...\n";
  foo(rest...);
}

template <int N, typename... Rest>
void foo(char (&first)[N], Rest&&... rest) {
  std::cout << "char[], ...\n";
  foo(rest...);
}

int main() {
  char a[2], b[2], c[2];
  foo(a, b, c);
} 
```

给出结果：

```
char[], ...
char[], ...
char[], ...
empty 
```

我没有改变其他重载来做同样的事情，但你通常希望它们也使用右值引用（如果它们实际被使用的话）。

编辑：关于你为什么要这样做/为什么它起作用：右值引用可以绑定到右值或左值。我们在这里关心的关键点是，当它绑定到左值时，它仍然是左值。在数组的情况下，它作为数组保留了它的身份，所以接收的是一个数组。

当/如果我们按值传递数组时，它会像普通函数一样经历正常的“衰减”到指针。

对于这种特殊情况，我们也可以使用普通的左值引用——但如果我们这样做了，那将*不适*用于任何不是左值的类型。例如，如果我们试图调用`foo(1,2,3);`，我们会得到一个错误，因为左值引用不能绑定到`1`,`2`或`3`。为了解决这个问题，我们*可以*传递一个`const`左值引用，但是我们不会将引用直接绑定到右值——我们会创建一个包含传递的右值副本的临时对象，然后绑定左值引用改为该临时副本。对于 int 的特定情况，这可能不是主要问题，但是对于复制成本更高的东西（或者如果我们想要访问原始文件，而不是副本），这可能是一个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T21:39:13.640

@JerryCoffin 的回答已经到位，但我想补充一点。您可以像这样将列表处理代码与第一项分开：

```
void foo_list() {
   std::cout << "empty\n";
}

template <typename T, typename... Rest>
void foo_list(T &&t, Rest&&... rest) {
  foo(t);
  foo_list(rest...);
}

template <int N>
void foo(char (&t)[N]){
   // ...
}

void foo(char *){
   // ...
}

// etc... 
```

（也许已经有一个成语了？）。

# arrays - 调试时显示大数组的中间

> ID：13922147
> 
> 赞同：1
> 
> 时间：2012-12-17T21:02:36.243
> 
> 标签：arrays, visual-studio-2010, debugging, range

我在 Visual Studio 2010 中使用 C#。我有大量的浮点数（1M 浮点数），并且需要能够在调试期间查看数组中间的小块数据。

这可以使用本地窗口来完成，但是滚动条映射到 1M 数组元素，因此很难以任何精度调整滚动条。

有什么方法可以查看，比如调试器中 f[k] 到 f[k+100] 的 k=688392？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T01:32:06.543

您可以使用[即时窗口](http://msdn.microsoft.com/en-us/library/f177hahy%28v=vs.80%29.aspx)。只需在设置数组值的行之后放置一个断点，然后`f[k]`在即时窗口中输入，它就会为您提供该索引处的值。

# jquery - fancybox 2.1.3 问题：IE & safari

> ID：13922156
> 
> 赞同：-4
> 
> 时间：2012-12-17T21:03:18.897
> 
> 标签：jquery, fancybox

该网站位于[http://www.educationinterface.com/](http://www.educationinterface.com/)

左下角的花式框图片链接到 YT 视频。

它在 FF 和 Chrome 中运行良好。

在 Safari 中，视频右侧有额外的空白区域。它会在调整视口大小时自行纠正。

在 IE 中，视频很小，窗口位于左上角。您可能需要向上滚动才能看到它。

==============

我回来编辑这篇文章以提高它的质量。低质量的帖子导致我被禁止，所以我正在努力恢复自己！

这里的 fancybox 问题是由代码中的结构问题引起的，包括在 doctype 声明为 7 之前出现了 head 元素。我继承了该站点及其代码，但我仍然应该更正结构以查看是否解决了问题。相反，我采取了简单的方法来到这里。

对不起，伙计们……如果我离开了禁止名单，我保证会做得更好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T01:36:48.643

嗯，`DOCTYPE`应该是你的 html 文档**的第一行**，但你有一堆前面的东西：

```
<title>Education Interface | Healthcare Industry Web-Enabled Online Training</title>

<meta name="keywords" content="Education Interface, healthcare, web enabled, online training, learning management system">

<meta name="description" content="Education Interface specializes in providing web-enables online learning to the healthcare industry. We provide solutions that include training, a learning management system, and customized content creation. ">

<style type="text/css">
    #errorMessage
    {
        color:red;
        font-size:10;
        font-weight:bold;
    }
</style>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

....实际上应该放在您的`<head>`标签内。

因此，您的页面在 quirks 模式下运行，因此 Safari 和 IE 中的样式格式不正确（fancybox 要求您的页面在标准模式下运行才能正常工作）

有一个名为“验证器服务”的工具可以让您快速找到这些错误[http://validator.w3.org/check?uri=http://www.educationinterface.com/](http://validator.w3.org/check?uri=http://www.educationinterface.com/)

# javascript - $.getJSON 无法接收数据

> ID：13922157
> 
> 赞同：-3
> 
> 时间：2012-12-17T21:03:42.703
> 
> 标签：javascript, json

传递的数据是 JSON，我无法使用它接收它

```
$.getJSON('http://agrimainfotech.com/test/json/json.php?isbn=9789381626344', function(data) {

         alert(JSON.stringify(data));

    }); 
```

我能够将相同的用于另一个 url 并且它有效。

```
 $.getJSON('http://salespump.pumpstationstudios.com/app/services/getemployees.php', function(data) {

             alert(JSON.stringify(data));

        }); 
```

传递的 JSON 和我应该怎么做才能使第一个 url 工作之间有什么区别。我在服务器中得到一个数组，然后我用`json_encode`它以 JSON 格式制作它。但这仍然行不通。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:15:34.097

第一件事是第一件事：

如果您不在同一个域中，请改用 JSONP。

`salespump.pumpstationstudios.com !== agrimainfotech.com`
当涉及到跨域请求时。因此，如果您从一个尝试到另一个，它将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:13:33.997

您很可能有跨域问题。如果服务器支持，您可以尝试使用 jsonp。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-18T10:50:21.323

感谢大家提到跨域请求。这对我来说是新的。我通过添加`header('Access-Control-Allow-Origin: *');`服务器 php 脚本来纠正它。所以现在我可以从我的 phonegap 应用程序向服务器拨打电话。

# c# - 有没有办法打开一个不参与当前 TransactionScope 的新连接？

> ID：13922161
> 
> 赞同：2
> 
> 时间：2012-12-17T21:03:54.797
> 
> 标签：c#, ado.net, transactionscope

我的应用程序需要写入一个充当系统范围计数器的表，并且该计数器需要在整个系统及其所有应用程序中都是唯一的。

这个计数器目前在我们的 Oracle 数据库中作为一个表实现。

我的问题是：我需要写入这个计数器表（它使用一些键来保证每个业务流程中的计数器在系统中的唯一性）而不会将其锁定在当前事务中，因为多个其他进程可能会读取或写入这个表也​​是。计数器中的间隙无关紧要，但我无法提前创建计数器值。

在这种情况下，简单的序列对我没有帮助，因为序列号是一个格式化的数字。

目前，我有一些其他非数据库替代方案来实现这一点，但我想在一段时间内尽可能避免更改系统代码。

实际上，如果我可以打开一个不参与当前事务的新连接，写入表，然后关闭这个新连接，那将是最简单的，但是我疲惫的头脑找不到办法去做。

答案一定是显而易见的，但光现在还没有照在我身上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T21:10:04.333

在使用“Suppress”选项创建的 TransactionScope 块内执行您的命令。这样您的命令将不会参与当前事务。

```
using (var scope = new TransactionScope(TransactionScopeOption.Suppress))
{
    // Execute your command here
} 
```

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/system.transactions.transactionscopeoption.aspx](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscopeoption.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:09:16.403

当然。只需制作一个配置为打开不与外部事务耦合的新事务（内部事务）的组件。

阅读[http://msdn.microsoft.com/en-us/library/ms172152%28v=vs.90%29.aspx#Y1642](http://msdn.microsoft.com/en-us/library/ms172152%28v=vs.90%29.aspx#Y1642)了解 TransactionScopes 的进展情况。

# c# - 如何传递异常？

> ID：13922165
> 
> 赞同：3
> 
> 时间：2012-12-17T21:04:25.667
> 
> 标签：c#, exception

基本上，我想做的是在同一个 try 块中将特定的异常传递给更一般的异常。我尝试了以下方法，但它不起作用：

```
 static bool example(int count = 0)
    {
        try
        {
            work();
        }
        catch (TimeoutException e)
        {
            if (count < 3)
            {
                Console.WriteLine("Caught TimeoutException: {0}", e.Message);
                return example(count + 1);
            }
            else
            {
                throw new Exception(e.Message);
            }
        }
        catch (Exception e)
        {
            Console.WriteLine("Caught Exception: {0}", e.Message + " rethrown");
            return false;
        }
        return true;
    }

    static void work()
    {
        throw new TimeoutException("test");
    } 
```

我希望在`TimeoutException`使用更通用的`Exception`. 这是因为它`TimeoutException`根据具体情况提供有关异常的附加信息。我不想复制`Exception`. 我希望处理所有异常的原因是可能会引发其他未知异常。该程序的性质要求它不会崩溃，因此我必须考虑任何其他异常并记录它们。我该如何实施？`else``TimeoutException`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T21:07:32.690

如果要以这种方式处理，则需要将其嵌套为 2 次尝试：

```
static bool example(int count = 0)
{
  try
  {
    try
    {
        work();
    }
    catch (TimeoutException e)
    {
        if (count < 3)
        {
            Console.WriteLine("Caught TimeoutException: {0}", e.Message);
            return example(count + 1);
        }
        else
        {
            // Just throw, don't  make a new exception
            throw; //  new Exception(e.Message);
        }
    }
  }
  catch (Exception e)
  {
        Console.WriteLine("Caught Exception: {0}", e.Message + " rethrown");
        return false;
  }
  return true;
} 
```

“内部 try/catch” 只会 catch `TimeoutException`，因此任何其他异常都将始终进入外部范围。当你重新抛出时，它也会自动被外部作用域捕获，这样就不需要杀死异常信息。（如果您`throw new Exception`丢失了堆栈跟踪数据和其他非常有价值的调试信息。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T21:19:54.820

这是我的看法：

```
bool example()
{
    // Attempt the operation a maximum of three times.
    for (int i = 0; i < 3; i++)
    {
        try
        {
            work();
            return true;
        }
        catch (Exception e)
        {
            Console.WriteLine("Caught exception {0}", e.Message);

            // Fail immediately if this isn't a TimeoutException.
            if (!(e is TimeoutException))
                return false;
        }
    }

    return false;
} 
```

**编辑**

如果你真的想对 TimeoutException 做点什么，你可以像这样改变 catch 块：

```
catch (Exception e)
{
    // As Reed pointed out, you can move this into the if block if you want
    // different messages for the two cases.
    Console.WriteLine("Caught exception {0}", e.Message);

    TimeoutException timeoutException = e as TimeoutException;
    if (timeoutException != null)
    {
        // Do stuff with timeout info...
    }
    else
    {
        // Not a timeout error, fail immediately
        return false;
    }
} 
```

# sitecore - 为什么解决方案中的一个 Sitecore 站点有一个“lang”cookie 键，而另一个返回 null？

> ID：13922167
> 
> 赞同：1
> 
> 时间：2012-12-17T21:04:35.550
> 
> 标签：sitecore

我有两个站点都由一个 Sitecore 解决方案提供服务，并且遇到以下代码强制将语言嵌入到两个站点之一的 URL 中的问题，因为下面来自基本 LinkProvider 的双星号封闭的代码正在返回true（“lang”cookie 键返回 null）。

```
private bool EmbedLanguage()
{
    if (this._options.LanguageEmbedding == LanguageEmbedding.Always)
    {
        return true;
    }
    if (this._options.LanguageEmbedding == LanguageEmbedding.Never)
    {
        return false;
    }
    SiteContext site = Context.Site;
    return ((site == null) || **((WebUtil.GetOriginalCookieValue(site.GetCookieKey("lang")) == null)** || this._options.EmbedLanguage(Context.Language)));
} 
```

这只对两个站点之一执行此操作，而不对另一个站点执行此操作。Web.config 中 linkManager 中的 languageEmbedding 值为“asNeeded”。第一个（行为）站点是多语言的，而另一个（不行为）则不是。

目前尚不清楚为什么行为的一方得到了它的“lang”cookie 集，而另一个没有。他们都共享相当多的代码，除了布局、新的子布局等之外，有问题的站点与原始站点并没有太大的偏差。胆量几乎相同。

任何想法都会受到欢迎。也许我错过了一些很明显的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:17:49.150

我们最终解决此问题的方法是在 web.config 中向问题站点添加自定义“embedLanguageInUrl”属性，并将其设置为“从不”。然后，我们使用 SiteContextExtensions 类公开该值 (Sitecore.Context.Site.EmbedLanguageInUrl())，然后根据需要适当调整 urlOptions.LanguageEmbedding 值。似乎工作得很好。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:05:44.363

首先让我澄清一下我是否正确理解了你的问题。
您有 2 个站点在相同的代码上运行。（多站点）
一个是多语言，它表现良好（设置 Lang cookie）另一个是单语言，它表现奇怪并且不设置 Lang cookie。
您是如何实施多站点的？

看起来您正在使用上述函数在某个类的 URL 中嵌入语言。所以建议我们已经实施的解决方法。

有时 IE8 会删除 cookie，这就是我们将多站点解决方案从 languageEmbedding= asNeeded 移动到 Never 的原因。

我们已经覆盖了 LinkManager 类，当我们为站点生成 URL 时，我们检查站点主页上的设置，如果站点是多语言的，那么我们总是设置 languageEmbedding=。否则它已经永远不会了。

这样我们就不会遇到语言 cookie 的问题。

是的，当它是单一语言站点并且 languageEmbedding 设置为从不时，它不会设置 cookie。

# java - andengine livewallpaper 不会对提供的 ResolutionPolicy 做出反应

> ID：13922170
> 
> 赞同：1
> 
> 时间：2012-12-17T21:04:53.943
> 
> 标签：java, android, andengine, live-wallpaper

我正在尝试使用本主题[http://www.andengine.org/forums/gles2/targeting-multiple-display-resolutions-t6794.html](http://www.andengine.org/forums/gles2/targeting-multiple-display-resolutions-t6794.html)中的 CroppedResolutionPolicy 。这是我的代码：

```
@Override
public EngineOptions onCreateEngineOptions() {
        this.cameraWidth = getResources().getDisplayMetrics().widthPixels;
        this.cameraHeight = getResources().getDisplayMetrics().heightPixels;
        this.camera = CameraFactory.createPixelPerfectCamera(this, this.cameraWidth / 2.0F, this.cameraHeight / 2.0F);
        this.camera.setResizeOnSurfaceSizeChanged(true);
        this.dpi = getResources().getDisplayMetrics().densityDpi;

        CroppedResolutionPolicy croppedResolutionPolicy = new CroppedResolutionPolicy(this.cameraWidth, this.cameraHeight);
        EngineOptions engineOptions = new EngineOptions(true, ScreenOrientation.PORTRAIT_SENSOR, croppedResolutionPolicy, this.camera);
        engineOptions.getAudioOptions().setNeedsSound(true);
        return engineOptions;
} 
```

但我注意到 CroppedResolutionPolicy.onMeasure 方法从不调用。我在我的 HTC Sensation 上调试了它。

似乎 andengine 动态壁纸根本没有对提供的 ResolutionPolicy 做出反应.. 至少在我的 HTC 上

如何在我的壁纸中正确应用 CroppedResolutionPolicy？谢谢 ！

# jquery - DataTables/jquery .makeEditable 插件/使用以前的 td 内容字符串进行可编辑的 ajax 加载 GET

> ID：13922171
> 
> 赞同：1
> 
> 时间：2012-12-17T21:04:53.797
> 
> 标签：jquery, datatables

这是我的脚本的一个片段：

```
.makeEditable({
    sUpdateURL : "lib/edit.php?what=" + what + "&action=edit&user=" + authUser,
    sAddURL : "lib/edit.php?what=" + what + "&action=add&user=" + authUser,
    sDeleteURL : "lib/edit.php?what=" + what + "&action=delete&user=" + authUser,
    sAddDeleteToolbarSelector : ".dataTables_length",
    "oAddNewRowFormOptions" : {
        "title" : "Add Machine",
        "width" : 400,
        "height" : 450
    },

    "aoColumns" : [null,null,null,null,null,null,null,null,
    {
        tooltip: 'Click to select warehouse',
        loadtext: 'loading...',
        type: 'select',
        onblur: 'cancel',
        submit: 'Ok',
        loadurl: 'lib/ajax.php?do=warehouse',
        loadtype: 'GET',

    }, {

        tooltip: 'Click to select location',
        loadtext: 'loading...',
        type: 'select',
        onblur: 'cancel',
        submit: 'Ok',
    loadurl: 'lib/ajax.php?do=location&wh='+ wh,
        loadtype: 'GET',

    }, null]
}); 
```

第二个可编辑列需要根据第一个的选择加载选项，因此我在 loadurl 中添加：&wh='+ wh，但我在如何获得必要的选择（之前的 'td'内容）在该 loadurl 语句中。有人可以指出我正确的方向吗？

# c# - 从 C# 创建多个 Outlook 电子邮件

> ID：13922173
> 
> 赞同：1
> 
> 时间：2012-12-17T21:04:59.390
> 
> 标签：c#, outlook, mailitem

我是 C# 的新手。我找到了如何从 C# 创建 Outlook 电子邮件：

```
// Create a new MailItem.
Outlook._MailItem oMsg1;
oMsg1 = oApp.CreateItem(Outlook.OlItemType.olMailItem);
oMsg1.To = "amine@gmail.com";
oMsg1.Subject = "Test Subject";
oMsg1.Body = "test Body";

Outlook.Attachments oAttachs1 = oMsg1.Attachments;
// Add an attachment
string sSource1 = "C:\\testFile.xls";
Outlook.Attachment oAttach1;
oAttach1 = oAttachs1.Add(sSource1);
oMsg1.Display(true);

oApp = null;
oMsg1 = null;
oAttach1 = null;
oAttachs1 = null; 
```

但我想同时创建多封电子邮件。因此 Outlook 将显示多个电子邮件窗口。

我尝试了一个 for 循环来创建多个 mailItem 但这不起作用。Outlook 仅显示第一封电子邮件。

任何想法 ？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-08T01:04:36.893

利用`oMsg1.Display(false);`

当设置为 时`True`，`oMsg1.Display(true)`意味着 Outlook 创建一个“模式”窗口，这意味着它会冻结该特定电子邮件，直到它被发送或丢弃。

# scope - 定义自定义 Sublime Text 2 片段的范围

> ID：13922174
> 
> 赞同：64
> 
> 时间：2012-12-17T21:05:04.617
> 
> 标签：scope, sublimetext2, code-snippets

在尝试为 Sublime Text 2 编写自己的代码片段时，我遇到了以下两个问题：

1.  **查找范围键**。我发现我可以一个一个地查看我的包并找到对声明的“范围”属性的引用。例如在`~/Library/Application Support/Sublime Text 2/Packages/JavaScript/Comments.tmPreferences`（我的 HTML 包中的一个文件）中有这两行：

    ```
    <key>scope</key>
    <string>source.js</string> 
    ```

    因此，如果我希望我当前的代码片段适用于 javascript 文件，我将我的范围定义为：

    ```
    <scope>source.js</scope> 
    ```

    我假设所有这些范围键都是根据我安装的包动态定义的。Sublime Text 是否会在我可以更轻松地参考的任何地方建立一个列表？浏览一堆包文件似乎过于乏味。

2.  **定义多个范围属性**。我已经弄清楚了，以下行允许我的代码段在 HTML 和 JavaScript 文件中工作。

    ```
    <scope>text.html, source.js</scope> 
    ```

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2013-02-04T07:39:11.560

这是在 Sublime Text 2 片段中使用的范围列表 -

```
ActionScript: source.actionscript.2
AppleScript: source.applescript
ASP: source.asp
Batch FIle: source.dosbatch
C#: source.cs
C++: source.c++
Clojure: source.clojure
CoffeeScript: source.coffee
CSS: source.css
D: source.d
Diff: source.diff
Erlang: source.erlang
Go: source.go
GraphViz: source.dot
Groovy: source.groovy
Haskell: source.haskell
HTML: text.html(.basic)
JSP: text.html.jsp
Java: source.java
Java Properties: source.java-props
Java Doc: text.html.javadoc
JSON: source.json
Javascript: source.js
BibTex: source.bibtex
Latex Log: text.log.latex
Latex Memoir: text.tex.latex.memoir
Latex: text.tex.latex
LESS: source.css.less
TeX: text.tex
Lisp: source.lisp
Lua: source.lua
MakeFile: source.makefile
Markdown: text.html.markdown
Multi Markdown: text.html.markdown.multimarkdown
Matlab: source.matlab
Objective-C: source.objc
Objective-C++: source.objc++
OCaml campl4: source.camlp4.ocaml
OCaml: source.ocaml
OCamllex: source.ocamllex
Perl: source.perl
PHP: source.php
Regular Expression(python): source.regexp.python
Python: source.python
R Console: source.r-console
R: source.r
Ruby on Rails: source.ruby.rails
Ruby HAML: text.haml
SQL(Ruby): source.sql.ruby
Regular Expression: source.regexp
RestructuredText: text.restructuredtext
Ruby: source.ruby
SASS: source.sass
Scala: source.scala
Shell Script: source.shell
SQL: source.sql
Stylus: source.stylus
TCL: source.tcl
HTML(TCL): text.html.tcl
Plain text: text.plain
Textile: text.html.textile
XML: text.xml
XSL: text.xml.xsl
YAML: source.yaml 
```

如果缺少任何内容，请将其添加到此要点[https://gist.github.com/4705378](https://gist.github.com/4705378)中。

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2013-04-09T19:49:48.730

## 查看当前光标位置范围

1.  将光标放在您希望了解范围的文件中。
2.  使用此键盘快捷键：

    **Windows** : `ctrl`+ `shift`+ `alt`+ `p`
    **Mac:** `ctrl` + `shift`+`p`

3.  当前范围将显示在 Windows 的状态栏左侧，或 Mac 的弹出窗口中。

使用这些作为文件中的`<scope>`键`foo.sublime-snippet`。

返回的范围从通用到特定列出。选择最适合将片段“限定”到它应该可用于选项卡触发器的范围。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-05-24T10:36:48.930

[Isaac Muse](https://github.com/facelessuser)有一个名为**Scope Hunter**的包，它对此非常有帮助。

它可以向您显示文档中任何光标下的范围，我发现这在调试我自己的代码段时非常有用。有时它非常详细；我最前面的文档中的示例范围：

```
Scope: text.tex.latex
       meta.function.environment.list.latex
       meta.function.environment.general.latex
       meta.function.environment.math.latex
       string.other.math.block.environment.latex
       meta.group.braces.tex
       meta.space-after-command.latex 
```

（为便于阅读包装）

如果我花了一周的时间将 SL2 拆开，我将无法发现这一点，但这个包在几秒钟内就能搞定。强烈推荐。

这种详细程度还意味着您可以根据需要以非常精细的方式定义片段。例如，`meta.function.environment.list.latex`广泛对应于 LaTeX 中的列表，所以我有一个片段，`\item`当我在列表环境中按 super+enter 时插入一个新的，但没有其他人。与盲目猜测相比，我可以更有效地定位片段。

源代码[在**Github**](https://github.com/facelessuser/ScopeHunter)中，也可以通过**Package Control**安装。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-12-25T08:52:11.583

实际上，您可以使用 Ctrl+Alt+Shift+P（不使用 Scope Hunter），它会在 Col/Line 信息之后的左侧底部栏上显示范围。这是相当小的印刷品，但它就在那里。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-02-08T22:23:25.273

要回答 #1，请查看语法的*.tmLanguage*文件，查找键：`scopeName`. 这是该语法用于片段范围值的内容。

例如，[nathos / sass-textmate-bundle的摘录](https://github.com/nathos/sass-textmate-bundle/blob/master/Syntaxes/Sass.tmLanguage)

```
<key>scopeName</key>
<string>source.sass</string> 
```

所以你会`source.sass`在你的片段中使用。

这是有关[定义语法的更多信息](https://sublime-text-unofficial-documentation.readthedocs.org/en/latest/reference/syntaxdefs.html)

# ruby-on-rails - Gem 设计集多用户模型系统

> ID：13922175
> 
> 赞同：-2
> 
> 时间：2012-12-17T21:05:04.783
> 
> 标签：ruby-on-rails, devise, admin

在我的应用程序中，我需要做两种方式登录系统：1）用户 - 仅用于网站的用户部分，包含有关用户的信息，它的登录数据等...... 2）管理员 - 网站管理部分的另一种模型。

但是如何做到这一点？现在我只有第一部分，我的迁移：

```
class DeviseCreateUsers < ActiveRecord::Migration
  def self.up
    create_table(:users) do |t|
     ## Database authenticatable
     t.string :email, :null => false, :default => ""
     t.string :encrypted_password, :null => false, :default => ""

     ## Recoverable
     t.string :reset_password_token
     t.datetime :reset_password_sent_at

     ## Rememberable
     t.datetime :remember_created_at

     ## Trackable
     t.integer :sign_in_count, :default => 0
     t.datetime :current_sign_in_at
     t.datetime :last_sign_in_at
     t.string :current_sign_in_ip
     t.string :last_sign_in_ip

     ## Encryptable
     # t.string :password_salt

     ## Confirmable
     #t.string :confirmation_token
     #t.datetime :confirmed_at
     #t.datetime :confirmation_sent_at
     #t.string :unconfirmed_email # Only if using reconfirmable

     ## Lockable
     #t.integer :failed_attempts, :default => 0 # Only if lock strategy is :failed_attempts
     #t.string :unlock_token # Only if unlock strategy is :email or :both
     #t.datetime :locked_at

     ## Token authenticatable
     t.string :authentication_token

     t.timestamps
    end

    add_index :users, :email, :unique => true
    add_index :users, :reset_password_token, :unique => true
    #add_index :users, :confirmation_token, :unique => true
    #add_index :users, :unlock_token, :unique => true
    add_index :users, :authentication_token, :unique => true
   end

  def self.down
    drop_table :users
  end
end 
```

和路线：

```
devise_for :users 
```

但是如何添加第二个管理员登录部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:11:38.967

您有 3 个选项：

1.  将字符串字段添加`type`到您的表并从`User`模型派生（管理员和用户将具有相同的登录路径）。
2.  添加布尔字段`admin`并使用 ie CanCan gem。
3.  运行`rails g devise admin`并拥有单独的管理模型。

您选择的方式取决于您的应用程序结构。

# java - 这个方法是如何工作的

> ID：13922177
> 
> 赞同：-3
> 
> 时间：2012-12-17T21:05:05.160
> 
> 标签：java

所以我得到了`Graph.java`文件并且有一个方法（那里有更多的东西）：

```
public Graph(double y, int gr, String title, double vidurkis, double trend) {
   grooms = gr;
} 
```

并且这个 Graph 方法在这个 Graph.java 文件中不再提及。现在修饰变量后变为`= gr = 30`。并且`30`从未在此提及`Graph.java`。所以我想这个方法是从其他文件中调用的，对吧？

现在有 BrideInSwing.java 文件，并且还使用了 Graph 方法：

```
if (which == 1){
   graphic = new Graph((Math.floor(((d_bride+d_groom) * 3 + divorce) * 10)) / 10, grooms, "Number of grooms: " + grooms + "; bride distribution: " + d_bride + "; grooms distribution: " + d_groom, pr_vidurkis, trend);               
} else {
   graphic = new Graph((Math.floor((d_bride + d_groom) * 3 * 10)) / 10, grooms, "Number of grooms: " + grooms + "; bride distribution: " + d_bride + "; grooms distribution: " + d_groom, pr_vidurkis, trend);
} 
```

那么据我了解，这调用了带有`Graph.java`文件中对应参数的 Graph 方法？如果是这样，那么为什么这里给出的参数比`Graph.java`文件中只有 5 个的参数多：`y`, `gr`, `title`, `vidurkis`, `trend`.

或者我在这里完全错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T21:09:00.353

您对代码的分析实际上并不太远。

您的图形方法是一个构造函数，一种用于创建新对象的方法。我建议阅读面向对象的编程并做一两个教程来让你站稳脚跟。

我做了一些快速的谷歌搜索，发现[这个教程](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)，应该是你的小巷。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T21:09:45.333

它不是一种方法，它是一种`constructor`。`Graph`它使用给定的初始化参数（在第二个代码中给出）创建一个新的类对象。

您可以重载构造函数，多个构造函数，每个构造函数采用不同数量/类型的参数。编译器将选择满足指定参数列表的构造函数（如果没有可用的，则抛出编译器错误）。

以上所有方法也适用于常规方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T21:11:52.183

根据定义，公共方法旨在从类的外部调用（它们也可以从内部调用，但如果这是唯一的目标，则该方法应该是私有的）。

但是，此方法不是方法，而是构造函数。

它使用 5 个参数调用：

1.  `Math.floor(((d_bride+d_groom)*3+divorce)*10))/10`,
2.  `grooms`,
3.  `"Number of grooms: "+grooms+"; bride distribution: "+d_bride+"; grooms distribution: "+d_groom`,
4.  `pr_vidurkis`,
5.  `trend`

您的代码中最令人不安的是构造函数接受 5 个参数，但对其中的 4 个没有任何作用。要么应该使用参数，要么应该删除它们。

# php - php regexp重复无法弄清楚

> ID：13922178
> 
> 赞同：1
> 
> 时间：2012-12-17T21:05:07.720
> 
> 标签：php, regex, recursion

嗨，我在使用 php 重复正则表达式时遇到了一些问题。`{{if(x=y)? {{ true do something || false do something else }}` 我的 html 文件中有类似的字符串 。它将是某种基本的模板引擎。如果我使用

```
$matches=array();
$content = "{{if(x=y)? true do something || false do something else }}";
preg_match_all('/\{\{if\((.*?)\)\?(.*?)\|\|(.*?)\}\}/is',$content,$matches); 
```

按我的预期返回结果。

```
Array(
 [0] => Array
    (
        [0] => {{if(x=y)?
            true do something 
               ||
            false do something else 
               }}
    )
 [1] => Array
    (
        [0] => x=y
    )
 [2] => Array
    (
        [0] => true do something 
    )
 [3] => Array
    (
        [0] => false do something else 
    )
) 
```

但是，如果该模式与另一个类似嵌套；

```
{{if(x=y)?
  {{if(y=z)?
     true do something 
   || 
     false do something else 
  }}
||
  {{if(x=a)?
    true do something 
  || 
   false do something else 
  }}
}} 
```

它将第一个“}}”字符作为模式的结尾并失败

```
Array
(
    [0] => Array
    (
        [0] => {{if(x=y)?
            {{if(y=z)?
          true do something 
            ||
          false do something else 
            }}
        )
    [1] => Array
    (
        [0] => x=y
    )
    [2] => Array
    (
        [0] => {{if(y=z)?
    true do something   
    )
    [3] => Array
    (
        [0] => 
    false do something else     
    )
) 
```

我想制作一个重复的正则表达式，因此在 true 或 false 的每个部分中，它应该检查匹配的内容是否再次具有相同的模式。If 的逻辑部分已经完成。我只需要一个正则表达式来匹配这些部分，这样我就可以遍历结果。根据我的正则表达式知识，这就是我迄今为止所能做的。**编辑** 更具描述性我需要一个正则表达式可以解析这样的东西。

```
{{if()?{{if()?{{if()?...||...}}||{{if()?...||...}}}}||{{if()?{{if()?...||...}}||{{if()?...||...}}}}}} 
```

但我使用的正则表达式只能从第一个 {{if 到 first }} 它找到返回

```
{{if(){{if(){{if()...||...}} 
```

这对于正则表达式是正确的。但是我怎样才能将正则表达式规则为“获取整个文本，找到 {{if()? 和 }} 之间的块直到最后，如果它不在末尾则忽略任何其他块”或“获取最外部的 {{if ()?||}} 块。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:55:47.970

任何类型的正则表达式都无法使用嵌套模式。这是正则表达式的基本限制。您需要更强大的解析器形式，例如词法分析器。

简而言之，您必须手动遍历输入的每个字符，解析可能的关键字并记住打开了多少块。

通过调整现有的模板系统来满足您的需求，您的情况可能会好得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:47:56.130

我解决了使用[链接](http://www.greaterscope.net/projects/Vemplator)的问题。脚本的作者用不同的风格让它变得足够简单。在我的示例中，我试图将代码块与正则表达式匹配并将它们替换为数据，但他实际上将代码块替换为 php 代码并在具有相同结构的不同文件夹中重新创建文件，并且每次请求页面时，首先检查文件存在和更新时间并运行脚本。很聪明。也许不是一个完美的解决方案和理性的，但解决了我的问题。不管怎么说，还是要谢谢你

# algorithm - 函数调用了多少次？

> ID：13922182
> 
> 赞同：1
> 
> 时间：2012-12-17T21:05:22.210
> 
> 标签：algorithm, complexity-theory

```
Algorithm(a-array, n-length):
      for(i=2;i<=n;i++)
         if(a[1]<a[i]) Swap(a,1,i);  
      for(i=n-1;i>=2;i--)
         if(a[n]<a[i]) Swap(a,n,i); 
```

我有兴趣确定`Swap`在最坏的情况下在上面的代码中调用了多少次，所以我有一些问题。

那里最糟糕的情况是什么？

*   如果我只有第一个for循环，可以说这个算法最坏的情况是数组**a**已经按升序排序，Swap会被调用n-1次。
*   如果我只有第二个循环，最坏的情况也是**a**已经排序，但是这一次，顺序是降序的。这意味着如果我们考虑第一个最坏的情况，则`Swap`不会在第二个循环中调用，反之亦然，即不能在每次迭代的两个循环中调用它。

我现在该怎么办？如何结合这两个彼此相反的最坏情况？最坏的情况意味着我希望有尽可能多的 Swap 调用。:)

PS 我看到复杂度是 O(n)，但我需要尽可能准确地估计交换执行了多少次。

编辑 1：`Swap(a,i,j)`交换元素`a[i]`和`a[j]`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:26:19.150

设 s 和 r 是原始数组中最大和次大元素的位置。在第一个循环结束时：- 最大的将来到第一个位置。如果 r < s 那么下一个最大的位置现在将是 r。如果 r > s 它仍然是 r。在第二个循环结束时，下一个最大元素将在末尾。对于第一个循环，固定 s 的最坏情况是直到 s 的所有元素都按升序排列。交换次数为 s。对于第二个循环，如果下一个最大的更接近数组的开头，则会出现最坏的情况。当 r < s 并且最大元素之后的所有元素在原始数组中按降序排列时会发生这种情况（即使在第一个循环之后它们也将保持不变）。在最坏的情况下，交换次数为 ns-1 Total = n-1，与 r 和 s 无关。

例如 A = [1 2 5 7 3 4] 这里直到最大元素 7 它是上升的，然后下降的交换次数 = 5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:11:18.483

第一个循环的最坏情况是每个*a* [*i*]都小于*a* [*j*]且 1 ≤ *i* < *j* ≤ *n*。在这种情况下，每个*a* [*j*]*都与一个*[1]交换，因此最后*一个*[1]是最大的数字。这种交换最多只能发生*n* -1 次，例如：

```
[1,2,3,4,5] ⟶ [5,1,2,3,4] 
```

类似地，第二个循环的最坏情况是每个*a* [*i*]都大于*a* [*j*]且 2 ≤ *i* < *j* ≤ *n*。在这种情况下，每个*a* [*i*]*都与a* [*n*]交换，因此最后*a* [*n*]是子数组*a* [2] ,..., *a* [*n*]的最大数。这种交换最多只能发生*n* -2 次，例如：

```
[x,4,3,2,1] ⟶ [x,3,2,1,4] 
```

现在棘手的部分是将两个条件结合起来，因为`Swap`两个循环中的调用条件是互斥的：对于任何对*a* [*i*]，*a* [*j*]且 1 ≤ *i* < *j* ≤ *n*和*a* [*i*] < *a* [*j*]，第一个循环将调用`Swap`. 但是对于任何这样的对，第二个循环都不会调用`Swap`，因为它期望相反：*a* [*i*] > *a* [*j*]。

所以最大`Swap`调用次数是*n* -1。

# tsql - T-SQL 在 WITH 语句中动态传递表名

> ID：13922188
> 
> 赞同：1
> 
> 时间：2012-12-17T21:05:59.790
> 
> 标签：tsql, cursor, with-statement

我在 T-SQL 中有以下代码，它从游标中读取表名。

但是我对`WITH`语句中的范围表名称变量有疑问。

当我明确设置`dbo.@sys_name`为同义词名称时，我可以运行此代码，`dbo.mysysnonym`但是当我将其作为变量名称时，`dbo.@syn_name`它不起作用。

```
 -- drop duplicates records from synonyms
 DECLARE @syn_name varchar(50)

 DECLARE s_cursor CURSOR FOR  
     SELECT name 
     FROM sys.synonyms  
     WHERE  base_object_name LIKE 'xyz%'

 OPEN s_cursor;

 FETCH NEXT FROM s_cursor INTO @syn_name;

 WHILE @@FETCH_STATUS = 0
 BEGIN

     FETCH NEXT FROM s_cursor INTO @syn_name;

     WITH  dedupTable AS 
     (
         SELECT 
             sys_id, 
             row_number() OVER (PARTITION BY sys_id ORDER BY sys_id) AS nr
         FROM 
             dbo.@syn_name
     )
     DELETE  FROM dedupTable
     WHERE nr > 1
END;

CLOSE s_cursor
DEALLOCATE s_cursor 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:12:46.507

据我所知，您不能将变量用作表名，因此`dbo.@syn_name`不能在`FROM`子句中使用。相反，您将不得不使用[Dynamic SQL](http://msdn.microsoft.com/en-us/library/ms188001.aspx "动态 SQL")。

就像是：

```
...
FETCH NEXT FROM s_cursor INTO @syn_name;
DECLARE @sql nvarchar(4000)

SET @sql = N'
    WITH  dedupTable
    AS ( 
       SELECT sys_id, row_number() 
       OVER ( PARTITION BY sys_id ORDER BY sys_id  ) AS nr
       FROM dbo.' + @syn_name + '
    )
    DELETE  FROM dedupTable
    WHERE   nr > 1'

EXEC sp_executesql @sql 
```

# python - Python 嵌入式异常处理

> ID：13922191
> 
> 赞同：0
> 
> 时间：2012-12-17T21:06:16.530
> 
> 标签：python, exception

我在下面有一个代码示例，我想在其中捕获一些异常：

在主函数中：

```
try:
    ...
    do_something()
except some_exception,e:
    do_some_other_thing 
```

在`do_something`函数中

```
try:
    ...
except some_exception,e:
    do_some_other_thing 
```

所以当我测试它时，我注意到异常被处理了两次（一次在`do_somthing()`，一次在`main`函数中），我的观察准确吗？

有没有办法捕获仅未被其函数捕获的异常？因为我想捕捉两种场景，它们在某种程度上被包装到同一个异常处理类中（即`some_exception`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:08:43.000

为什么不尝试一下，看看一个简单的测试会发生什么？

```
def main():
    try:
        raise ValueError("in main!")
    except ValueError as e:
        print "caught exception",str(e)
        #for fun, re-run with the next line uncommented and see what happens!
        #raise

try:
    main()
except ValueError:
    print "caught an exception above main" 
```

如果您实际尝试此代码，您会注意到它只打印一条消息（在`main`函数内部），表明异常一旦被捕获就不会向上传播（除非您`raise`在 except 子句中重新设置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:08:54.463

你的观察不准确；必须有 2 个地方 raise `some_exeption`，或者你明确地重新加注它。

一旦一个异常被正确捕获，它就不会被堆栈中更高的其他处理程序捕获。

这是最简单的演示：

```
>>> try:
...     try:
...         raise AttributeError('foo')
...     except AttributeError as e:
...         print 'caught', e
... except AttributeError as e:
...     print 'caught the same exception again?', e
... 
caught foo 
```

仅调用了*内部处理程序。* `except`另一方面，如果我们重新引发异常，您将看到两个处理程序都打印一条消息：

```
>>> try:
...     try:
...         raise AttributeError('foo')
...     except AttributeError as e:
...         print 'caught', e
...         raise e
... except AttributeError as e:
...     print 'caught the same exception again?', e
... 
caught foo
caught the same exception again? foo 
```

As such, there is no need to have to handle 'exceptions that are not caught by the function'; you will *only* need to handle exceptions that were not already caught earlier.

# java - JUnit 如何处理单元测试？

> ID：13922193
> 
> 赞同：2
> 
> 时间：2012-12-17T21:06:22.807
> 
> 标签：java, multithreading, junit

我目前正在测试一个 Java 接口，该接口可以使用 Java 的 R 调用。因此我需要一个也封装了一个过程的连接。
现在我需要知道，JUnit 如何处理这些单元测试。我使用 JUnit4`@Before`和`@After`注释来初始化一个新的连接（在内部它是一个进程）一次测试。
对于“JUnit 如何处理”，我的意思是：

*   每个测试都在它自己的线程中执行吗？（这可能会导致问题）
*   这些测试是按顺序执行的吗？
*   他们有特定的顺序吗（不是那么重要，但很高兴知道）

我担心的是，如果在真实环境中正确使用（如文档所述），这些测试可能会导致不存在的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:13:49.703

测试按顺序执行。你不应该依赖这个事实，因为这表明你没有编写一个纯粹的单元测试并且已经创建了一个反模式（在测试方面）。每个测试必须是它自己的独立工作，在初始化之外没有外部`After`依赖`Before`。我相信每个测试都是在自己的线程中执行的，这再次回到您的测试套件不是纯单元测试。

> 我担心的是，如果在真实环境中正确使用（如文档所述），这些测试可能会导致不存在的问题。

单元测试**仅**验证功能的一小部分，通常是一个可能的逻辑分支。如果您想测试系统集成，您需要进行所谓的集成测试。此外，如果您希望进行多线程测试，我强烈推荐： [Multi-threaded TC](http://code.google.com/p/multithreadedtc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:13:52.103

我相信，除非另有说明，否则 JUnit 可以随意使用尽可能多的线程来运行您的单元测试。您可以将其限制为单个线程。关于何时运行哪些测试的顺序是任意的。理论上，您的测试应该是适当的线程安全的，以避免从不同线程运行时出现不确定性问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T22:47:18.423

*   每个测试都在它自己的线程中执行吗？（这可能会导致问题） -**一个线程用于所有测试**
*   这些测试是按顺序执行的吗？-**是的**
*   他们是否有特定的顺序（不是那么重要，但很高兴知道） -**不**，基本上不可能事先告诉类中 @Test 方法的处理顺序。但是使用@Rules，您可以按顺序读取当前测试的编号

*   当然，我们在一个班级里讨论不同的测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T23:31:46.667

对于每个测试类：

1.  调用 @BeforeClass 和/或 @ClassRule 注释。
2.  对于每个测试（@Test）：
    1.  创建类的实例
    2.  调用 @Before 和/或 @Rule 注释
    3.  调用测试方法
    4.  调用 @After 和/或 @Rule 注释
3.  调用 @AfterClass 或 @ClassRule 注释。

通常一切都在同一个线程中工作 - 但是不要依赖它，因为某些规则（超时）会分叉一个线程 - 您可以决定并行运行测试。

# css - 背景大小属性弄乱了我的标题

> ID：13922199
> 
> 赞同：0
> 
> 时间：2012-12-17T21:07:02.230
> 
> 标签：css, background-image

我有一个 600px 高的标题，它使用背景图像作为背景。当屏幕超过1600px时，我使用cover，默认是contain。覆盖标题的是一张 500 像素高的图像（绝对定位）。

当我调整浏览器的大小时，标题不会保持其高度，这可以通过与标题重叠的覆盖图像很容易地看到。

这是代码：

```
/* ===== HEADER ==== */

header{
height: 600px;
min-height:600px;
width:100%;
min-width:100%;
background-image: url(../images/headerBG.jpg);
background-repeat: no-repeat;
background-size: contain;

}
#bgOverlay{
position: absolute;
top: 60px;
left: 30%;
}

/* ==== MEDIA QUERIES   ==== */
@media only screen and (min-width:1600px){
header{background-size: cover;}
} 
```

以及查看它的链接：http: [//www.madebym.net/test/crazysunsets/index.html](http://www.madebym.net/test/crazysunsets/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:22:27.120

要解决我的问题，需要申请： background-size: 100% 600px;

这样，标题始终为 600 像素高，并且图像保持其纵横比。

# python - 使用动态数量的参数调整方法

> ID：13922200
> 
> 赞同：0
> 
> 时间：2012-12-17T21:07:02.780
> 
> 标签：python, dynamic, graph, sage

我正在使用 sage 使用用 python 编写的脚本打印不同的图形。我正在尝试编写一个通用代码，允许我打印所有图表。例如我有：

```
g1 = graphs.BarbellGraph(9, 4) 
g2 = graphs.RandomNewmanWattsStrogatz(12, 2, .3) 
```

该图取决于我的参数的数量和类型，我必须调整我的代码以使其适用于不同的情况。

我的代码：

```
registry = {"graphs": graphs, "digraphs":digraphs}
methodtocall = getattr(registry["graphs"], "BarbellGraph")
result = methodtocall(2,3)
print(result) 
```

结果我得到了这段代码

```
graphs.BarbellGraph(2, 3) 
```

我的问题是 methodtocall 在上面的代码中接受 2 个参数，我想根据所选图形的参数数量来更改它。如何更改代码以使其参数动态化？

如果我有 N 个参数，我想拥有

```
result = methodtocall(param1, ... ,paramN) 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:23:11.563

我认为您正在寻找[星号运算符](http://www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/)（又名“splat”或“拆包”运算符）：

```
result = methodtocall(*[param1, ... ,paramN]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:26:18.813

如果将参数放在列表中，则可以如下调用函数；

```
graphs.RandomNewmanWattsStrogatz(*parameter_list) 
```

这会将列表扩展为位置参数。

如果您正在编写一个需要采用位置参数的函数，您可以以类似的方式接受任意数量的参数；

```
def my_function(*args):
    assert(type(args) == tuple) 
```

# linux - 试图创建到 Sublime Text 2 的符号链接

> ID：13922201
> 
> 赞同：0
> 
> 时间：2012-12-17T21:07:17.043
> 
> 标签：linux

我对linux比较陌生，所以请耐心等待。

我只是试图创建一个指向 Sublime Text 2 的符号链接。

我可以通过键入打开 Sublime Text 2

```
~/bin/sublime <filename> 
```

但是，只需键入

```
sublime <filename> 
```

给我一个“崇高：找不到命令”错误。谁能解释我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:15:55.860

这是因为您在主文件夹内的“bin”目录中安装了 sublime。这个“bin”目录不在你的路径中，你的 shell 不会在那里找到 sublime。
这个问题有几种解决方案，但一个简单的方法是将“~/bin”目录添加到您的路径中。为此，只需编辑您的文件 ~/.bashrc（假设您使用 bash）或 ~/.profile（如果您使用任何其他 shell）并添加以下行：

```
导出 PATH="$PATH:$HOME/bin"
```

重新启动您的外壳或简单地调用

```
源.bashrc
```

让我知道这是否解决了您的问题，如果此答案对您有帮助，请分配分数（或标记为已解决）。

最良好的祝愿。

# c# - 我如何**写入**到 ArraySegment 。大批？我应该使用不安全的代码吗？

> ID：13922203
> 
> 赞同：0
> 
> 时间：2012-12-17T21:07:26.140
> 
> 标签：c#, arrays, bytearray, unsafe

有很多问题询问如何在此站点上获取数组的子集，但是没有人成功获得有关如何像写入数组一样写入数组的答案`byte[]`。

```
byte[] bigTargetBytes = new byte[10000];

byte[] twentyBytes = sha256.ComputeHash(sourcebytes);  // size is 20 bytes, 
// how do I append this to the existing array without copying, using Linq, etc? 
```

我不想做的是有两个数组并在它们之间进行复制，因为这与数组的长度成正比（而且我的数组很长）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:09:09.677

恐怕您必须以任何一种方式制作副本。我建议你使用`Buffer.BlockCopy()`最快的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:22:30.150

不清楚你想要什么，但我猜你想要一个字节数组的“视图”。在 .Net 4.5 中，您可以这样做`ArraySegment<T>`：

```
var a = new byte[100];
var s = new ArraySegment<Byte>(a, 9, 90);

((IList<Byte>)s)[0] = 10;
Console.WriteLine(a[9]);  // writes "10" 
```

因此，您的`Write90Bytes`方法可以返回一个`ArraySegment<Byte>`，然后您可以将其作为底层数组的视图进行操作，这将避免复制。但是请注意，这`ArraySegment<T>`是 a `System.ValueType`，这意味着将其转换为`IList<T>`将招致拳击惩罚。

如果性能至关重要并且您需要避免复制，您还可以考虑在不安全的上下文中使用指针，这意味着您的`Write90Bytes`方法可以返回 a`Byte*`并且您可以通过这种方式索引到数组中。

**编辑：**现在我看到了您的编辑，您不能只将函数中的值“返回”到数组的内存位置。您需要将原始数组作为参数传递。

**编辑2：**你不能做你所要求的。该`ComputeHash`函数返回一个它自己分配的数组。你可以做你想做的唯一方法是`ComputeHash`将数组作为参数。考虑：

```
// previously defined...
byte[] bigTargetBytes = new byte[10000];      

// This method doesn't really exist, but if it did it would look like this
sha256.ComputeHash(sourcebytes, bigTargetBytes, offset); 
```

尽管在 .Net 中，由于它是托管运行时，因此对内存分配有特定的限制，但这是*任何*编程语言中的常见模式。在 C/C++ 开发中，有一个协议使用，您可以传入一个预分配的数组，其中包含要写入的偏移量和最大长度，或者您允许函数返回分配的内存，然后您有责任释放 (除非您从框架中被回调）。您不能只将值返回*到*现有缓冲区中。

但是请注意，仅从由该`ComputeHash`值分配的 GC 数组中复制 20 个字节是一个非常简单的操作，运行时可以非常有效地处理它。除非您不时对微秒级暂停非常敏感，否则您不会注意到实际副本和假设实现之间的差异。

# c - 给定总和的整数子数组，使用 C 中的递归

> ID：13922209
> 
> 赞同：1
> 
> 时间：2012-12-17T21:07:40.257
> 
> 标签：c, recursion, integer, sum, arrays

我有一个相当艰巨的任务，我觉得很难处理。

我正在尝试编写一个递归函数（根本没有循环），给定一个数组及其长度，它将打印一对子数组，每个子数组的总和将是整个数组总和的一半。换句话说，数组将被分成两组整数，使它们的和相等。

例如，给定数组 {1,2,2,0,5}，函数应输出 {1,2,2} {0,5}

我必须递归地执行它，使用一个仅获取数组本身及其大小的函数。我也只被允许使用一个额外的递归函数来解决这个问题。

任何想法或想法将不胜感激。

再一次问好！我们在课堂上有一个这样的代码

```
int SubsetSum(int arr[], int idx, int n, int S) {
if (S==0) return 1; //This is stopping condition #1.
if (S<0 || n==0) return 0; //This is stopping condition #2.
￼return SubsetSum(arr, idx+1, n-1, S-arr[idx]) || SubsetSum(arr, idx+1, n-1, S);
} 
```

“ || ”运算符在递归方面是什么意思？谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:34:27.637

您首先计算整个数组的总和（*最好是偶数*），这会给您半和，您可以使用[二进制背包](http://en.wikipedia.org/wiki/Knapsack_problem#0-1_knapsack_problem)例程来达到。

Java 中的 Stack Overflow还有一个[递归实现](https://stackoverflow.com/questions/7774769/how-do-i-solve-the-classic-knapsack-algorithm-recursively)，它与 C 并没有太大区别，并且满足您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:37:51.310

从中间开始划分数组和子数组，直到只有一个元素。

将第一个元素与第二个元素进行比较，并找到这些整数的总和。

之后使用这些总和进行二进制元素比较。当做这个比较找到总和。例如，您的子数组是 {1,2} 和 {0,3}。查看第一个元素 0 和 1。当您看到小元素时，获取该子数组中的另一个元素（ {0,3} ）。之后总和现在是 3。另一部分的总和是 1 并取另一个元素 (2)。现在两者的总和都是 3。您可以将其用于所有子阵列。

我不确定解决方案。但我认为这似乎是分而治之的算法。

# python - 文件中的python元素按降序排列而不使用内置函数？

> ID：13922210
> 
> 赞同：0
> 
> 时间：2012-12-17T21:07:40.913
> 
> 标签：python, max, minimum, built-in

> **可能重复：**
> [在没有内置函数的情况下按降序排列文件中的元素](https://stackoverflow.com/questions/13893961/putting-elements-from-file-in-descending-order-without-built-in-functions)

这是我到目前为止所写的：

```
def main():
    try:
        file=open(input("Please enter the name of the file you wish to open:" ))
        A =file.read().split()
        n=len(A)
        print ("These following", n,"numbers are in the inputted file:\n", A)
        x=(int, A)

        new_list=[]

        while A:

            minimum=A[0]
            for i in range(n):
                for j in range(n-1):
                    if A[0]<A[1]:
                        minimum=A[0]
                        new_list.append(A[0])

                        print ("Now, lets organize these numbers from highest to lowest:", new_list)

        file.close()   

    except IOError as e:
        print("({})".format(e)

main() 
```

这是我运行后得到的：

```
Please enter the name of the file you wish to open:numbers.txt (<<<file I created)
These following 9 numbers are in the inputted file:
 ['1', '-3', '10', '6', '5', '0', '3', '-5', '20'] 
```

我想要的是在我输出文件中的数字后，按降序组织它们。我已经在这几天了。我理解将最低点返回到最后一行的概念。但是我该怎么做呢？我很困。

# jsf - 使用工具提示动态创建 selectManyCheckbox

> ID：13922213
> 
> 赞同：1
> 
> 时间：2012-12-17T21:07:47.383
> 
> 标签：jsf, richfaces, tooltip, selectmanycheckbox

我在支持 bean 中有一个 HashMap，我想动态呈现多个选择框。这是代码：

```
 <h:selectManyCheckbox
      id="id"
      value="#{backingBean.value}"
      layout="pageDirection"
      styleClass="label"
      required="true"
      requiredMessage="You must select at least...">

      <a4j:repeat var="aGroup" items="#{backingBean.map}">

        <f:selectItem id="role#{aGroup.value.property1}" itemLabel="#{aGroup.value.property1}" itemValue="#{aGroup.value.property2}" />

        <rich:tooltip for="role" value="#{aGroup.value.property5}" />

     </a4j:repeat>

    </h:selectManyCheckbox> 
```

它不是渲染。使用 f:selectItems 标记，它正在呈现，但我需要手动创建 f:selecteItem，因为我必须为每个 f:selectItem 附加一个rich:tooltip。

有任何想法吗 ？

拉维

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:49:46.973

您不能在`<f:selectItem>`.

标准 JSF 或 RichFaces 库中也没有任何内容允许在复选框组的标签上自由标记。与 一起使用时，只有[Tomahawk`<t:selectManyCheckbox>`](http://myfaces.apache.org/tomahawk-project/tomahawk20/tagdoc/t_selectManyCheckbox.html)支持它。PrimeFaces的. [_](http://code.google.com/p/primefaces/issues/detail?id=3487)`layout="spread"``<t:checkbox>``<p:selectManyCheckbox>`

这是一个启动示例，您如何使用 Tomahawk 实现它：

```
<!-- Below displays nothing due to layout="spread". -->
<t:selectManyCheckbox id="foo" value="#{bean.selectedItems}" layout="spread">
    <f:selectItems value="#{bean.availableItems}" />
</t:selectManyCheckbox>

<!-- Below displays the concrete checkboxes with labels. -->
<c:forEach items="#{bean.availableItems}" var="item" varStatus="loop">
    <t:checkbox for="foo" index="#{loop.index}" />
    <h:outputLabel id="label#{loop.index}" value="#{item.label}" />
    <rich:tooltip for="label#{loop.index}" value="#{item.tooltip}" />
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T05:28:28.817

使用`<c:forEach>`而不是`<a4j:repeat>`.

首先在页面顶部添加此命名空间。

```
xmlns:c="http://java.sun.com/jstl/core" 
```

现在`<a4j:repeat.....`用这个代替。

```
<c:forEach var="aGroup" items="#{backingBean.map}"> 
```

编辑：

* * *

我认为这`<rich:toolTip>`不适用于`<f:selectItem>`. 作为一个奇怪的黑客，你可以做这样的事情。

这是你`managed-bean`返回的`list`or `map`。在这里，我使用的是地图，因为您似乎正在使用地图。

```
public class MyBean {
  private Map<Integer, String> map;

  public Map<Integer, String> getMap() {
    map = new HashMap<Integer, String>();
    map.put(1, "Tool tip 1");
    map.put(2, "Tool tip 2");
    map.put(3, "Tool tip 3");
    return map;
  }
} 
```

现在您的`xhtml`代码将是这样的。在这里，我正在`selectItem`动态渲染 s。但是，这不是必须的。

```
<h:form id="myForm">
    <h:selectManyCheckbox id="myChkBox" layout="pageDirection" styleClass="label" required="true" requiredMessage="You must select at least...">
        <c:forEach var="aGroup" items="#{myBean.map}">
            <f:selectItem itemValue="someValue1" itemLabel="someValue1" id="someId#{aGroup.key}" /> 
            <span class="rich-tool-tip" id="span#{aGroup.key}" style="z-index: 99; visibility: visible; display: none;">
                <span>#{aGroup.value}</span>
            </span>
            <script>
                var i = !i ? 0 : i;
                new ToolTip("span#{aGroup.key}","myForm:myChkBox:" + i,{'showEvent':'mouseover'} );
                i++;
            </script>
        </c:forEach>
    </h:selectManyCheckbox>
    <rich:toolTip rendered="false"/>
</h:form> 
```

就是这样...
注意`<rich:toolTip>`设置为`rendered="false"`. 这是必需的。否则一些重要的`JS`部分没有导入，你`toolTip`将无法工作。

# c++ - 在 C++ 中读取文件最后一行的最有效方法是什么？

> ID：13922216
> 
> 赞同：3
> 
> 时间：2012-12-17T21:08:03.613
> 
> 标签：c++, text-files

我试图在文本文件中存储大量素数，如果我结束我的程序，我需要能够读取文件的行以查看我离开的地方。我不知道如何在不先读取文件的每一行的情况下读取最后一行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T21:10:14.897

我也不知道。只需将最后一个值写入单独的文件，然后读取该值即可知道从哪里恢复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T21:11:46.723

您可以使用 setg() 跳转到文件末尾并猜测一行有多远。如果您的点和文件末尾之间有换行符，那么您在倒数第二行并且知道最后一行是什么。

但是Pete Beckers 的解决方案要好得多，我会选择它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T21:13:37.773

您可以计算数字的字节数。

例如，您有 5 个号码，并且您想读取最后一个号码。

1 个整数是 4 个字节。因此，您可以使用 fseek 在文件中移动 4*4=16 字节。之后，您可以阅读最后一行。

fseek（文件，16，SEEK_SET）；

SEEK_SET 表示文件的开始。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T21:13:50.467

寻找到文件的最后，然后向后阅读，直到找到换行符，这意味着您找到了最后一行的开头

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T21:14:34.993

如果您知道线的最大长度，这将很容易。

只需将文件末尾位置的指针减去该值即可。

从那里开始读取行并将它们放入缓冲区中。当前一个字符是新行时清除缓冲区

当您用完文件时，缓冲区将包含它。

如果您不知道最大长度，您可以随时向后读取文件。

# sql - SQL 查询返回单行中的所有列值

> ID：13922217
> 
> 赞同：0
> 
> 时间：2012-12-17T21:08:15.707
> 
> 标签：sql, plsql

> **可能重复：**
> [是否存在将多行聚合为一行的 Oracle SQL 查询？](https://stackoverflow.com/questions/1120706/is-there-an-oracle-sql-query-that-aggregates-multiple-rows-into-one-row)

我有一张桌子（员工）。

员工

```
ID   Name   Salary  

1    Steve  10000

2    Buck   15000

3    Dan    10000 

4    Dave   10000 
```

我需要返回所有工资为 10000 美元的员工姓名，员工姓名由加号分隔 - 包括开头和结尾的一个。我可以使用游标执行此操作，并通过游标添加所有员工姓名。但是有没有办法使用单个查询来返回它？在上面的这个例子中，我需要结果为 +Steve+Dan+Dave+

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:12:48.423

看看字符串聚合函数。

例如，在 Oracle 11g 第 2 版中，您可以执行以下操作：

```
SELECT CONCAT(CONCAT('+', LISTAGG(Employee.Name, '+')), '+') FROM Employee WHERE Salary >= 10000 
```

# process - 在 fork-exec 中如何防止不必要的复制？

> ID：13922218
> 
> 赞同：1
> 
> 时间：2012-12-17T21:08:27.020
> 
> 标签：process, linux-kernel, fork

今天我参加了一个关于 linux 进程的讲座。老师说：

1.  fork() 返回后，子进程准备执行
2.  由于 Copy On Write 机制，保证了 fork-exec 序列可以防止对父内存的不必要复制

通过 fork-exec 序列，我的意思是这样的：

```
if(!fork())
{
    exec(...);
}
i = 0; 
```

据我所知，这翻译成这个（用伪asm编写）：

```
call fork
jz next
call exec(...)
next:
load 0
store i 
```

让我们假设 parent 已被授予足够的 CPU 时间来一次执行上述所有行。

1.  fork 返回 0，所以第 3 行被跳过
2.  当 0 存储在“i”中时，孩子还没有被执行，所以 COW 开始复制（不必要地）父母的记忆。

**那么在这种情况下如何防止不必要的复制呢？** 看起来不是，但我认为 linux 开发人员足够聪明地做到这一点；）

**可能的答案**：孩子总是先跑（调用 fork() 后，父母被抢占） 1\. 是这样吗？2\. 如果是，这是否保证在所有情况下都防止不必要的复制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:26:26.777

基本上两个人可以读同一本书。但是，如果一个人开始在页边空白处写笔记，那么另一个人在此之前需要该页的副本。没有写到页边距的人不想看到书中其他人的笔记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:18:58.870

答案本质上是必要的复制——托管任何被更改的数据的页面——发生，而不必要的复制——自分叉以来没有被任何一个进程更改的页面——不会发生。

后者通常不仅包括未修改的数据，还包括那些持有程序本身和它已加载的共享库的数据——通常是许多可以共享的页面，而只有少数必须复制。

一旦孩子调用了一个 exec 函数，共享（以及对未来写时复制的任何需要）就会终止。

# java - JBAS011006 由于异常 DeploymentUnitProcessingException，未安装可选组件 StandardServletAsyncWebRequest

> ID：13922221
> 
> 赞同：4
> 
> 时间：2012-12-17T21:08:37.757
> 
> 标签：java, spring, jboss, jboss7.x

由于 Spring 3.2 GA 版本已经发布，我想将我的 Spring 3.1.2 应用程序升级到最新版本。该应用程序在 JBoss 7.1.1.Final 上运行。其他一切都很好，除了我收到下面的 JBoss 错误消息，我觉得这很烦人（尽管应用程序运行正常）。任何想法？

```
15:50:06,865 WARN  [org.jboss.as.ee] (MSC service thread 1-13) JBAS011006: Not installing optional component org.springframework.web.context.request.async.StandardServletAsyncWebRequest due to exception: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS011054: Could not find default constructor for class org.springframework.web.context.request.async.StandardServletAsyncWebRequest
at org.jboss.as.ee.component.ComponentDescription$DefaultComponentConfigurator.configure(ComponentDescription.java:606)
at org.jboss.as.ee.component.deployers.EEModuleConfigurationProcessor.deploy(EEModuleConfigurationProcessor.java:81)
at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_05]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_05]
at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_05] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-28T12:05:53.997

为了抑制此警告消息，请将以下行添加到您的 Jboss 配置中（如果您在独立模式下使用它，则为standalone.xml）

```
<?xml version='1.0' encoding='UTF-8'?>
<server xmlns="urn:jboss:domain:1.1">
...
    <profile>
        <subsystem xmlns="urn:jboss:domain:logging:1.1">
            <console-handler name="CONSOLE">
                <level name="INFO"/>
                <filter>
                    <not>
                        <match pattern="JBAS011006"/>
                    </not>
                </filter>
... 
```

正如您可以在[javadocs](http://docs.spring.io/spring/docs/3.2.x/javadoc-api/org/springframework/web/context/request/async/StandardServletAsyncWebRequest.html)中检查的那样，此类没有默认构造函数。
由于这只是一个警告并且一切正常，您可以忽略它。

# vim - 无法让 Pathogen 在 Vim 中工作

> ID：13922225
> 
> 赞同：6
> 
> 时间：2012-12-17T21:08:44.060
> 
> 标签：vim, plugins, pathogen

我知道关于这个问题有多个帖子，但我试图让 Vim 的这个简单部分工作但无济于事。我想让病原体插件与 Vim 一起工作。作为几点，我正在使用 Windows 系统。我已经通过 github 下载了病原体，并创建了目录`.vim`和子目录`autoload`以及`bundle`. My`.vimrc`是使用以下命令创建的默认值`mkvimrc`：

```
call pathogen#infect()
syntax on
filetype plugin indent on 
```

添加到底部。解决我看到的其他帖子：

```
:set cp? = nocompatible 
```

我猜测的一个领域是问题的一部分，在我运行之后我`:scriptnames`没有得到`.vim`目录。我只得到`Vim\.vimrc`and`vim73`目录。我该如何解决这个问题？如果这对这里的其他人来说很明显，我已经在这里很长时间了，并道歉。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T21:12:37.673

在 Windows 上，本地用户配置的默认位置是`$HOME/vimfiles`. 如果您的文件在其中，`$HOME/.vim`那么您需要将它们移动到`vimfiles`或添加`.vim`到 .vimrc 中的运行时路径：

```
set runtimepath+=~/.vim 
```

此外，如果 Pathogen 位于您的子目录中`bundle`，则需要从那里显式运行它，因为默认情况下 Vim 只会在`~/.vim/`. `.vimrc`在通话前将其放入您的`pathogen#infect`：

```
runtime bundle/pathogen/autoload/pathogen.vim 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-07T16:35:46.710

我的解决方案是重新下载，`pathogen.vim`因为它因未能遵循重定向而无法下载。tpope 的[github](https://github.com/tpope/vim-pathogen)上指定的 URL有以下步骤：

```
mkdir -p ~/.vim/autoload ~/.vim/bundle && \
curl -LSso ~/.vim/autoload/pathogen.vim https://tpo.pe/pathogen.vim 
```

您将知道重定向下载失败，因为内容`pathogen.vim`将是 302 重定向页面。只需从重定向中包含的 URL 下载，例如：

```
wget -N -O ~/.vim/autoload/pathogen.vim https://raw.githubusercontent.com/tpope/vim-pathogen/master/autoload/pathogen.vim 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T22:12:48.143

打开带有**禁用插件**的 Vim并键入`:set rtp`- 请注意：

*   如果你在 Unix 上，那么默认情况下：第一个去`~/.vim`，最后一个去`~/.vim/after`；
*   如果你在 Windows 上，那么默认情况下：第一个去`~/vimfiles`，最后一个去`~/vimfiles/after`。

这是一种 Vim 约定。`after`目录用于强制覆盖 Vim 的默认值或插件的设置，这有时很重要。这就是为什么他们是最后一个`rtp`。

Pathogen 实际上会解析您当前`rtp`变量的结构，并使用它来正确地注入插件的路径`rtp`。例如，看看我的`rtp`：

```
runtimepath=
~/.vim,
~\.vim\plugins\NERDCommenter,
~\.vim\plugins\NERDTree,
~\.vim\plugins\SameSyntaxMotion,
~\.vim\plugins\Tabular,
~\.vim\plugins\UltiSnips,
~\.vim\plugins\c.vim,
~\.vim\plugins\clang_complete,
~\.vim\plugins\CountJump,
~\.vim\plugins\delimitMate,
~\.vim\plugins\fswitch,
~\.vim\plugins\matchit,
~\.vim\plugins\matlab,
~\.vim\plugins\neocomplcache,
~\.vim\plugins\protodef,
~\.vim\plugins\python-syntax,
~\.vim\plugins\solarized,
~\.vim\plugins\syntastic,
~\.vim\plugins\vim-creole,
~\.vim\plugins\vim-latex,
~\.vim\plugins\vim-markdown,
~\.vim\plugins\vim-python-pep8-indent,
~/vimfiles,
D:\Applications\Vim/vimfiles,
D:\Applications\Vim,
D:\Applications\Vim/vimfiles/after,
~/vimfiles/after,
~\.vim\plugins\Tabular\after,
~\.vim\plugins\UltiSnips\after,
~\.vim\plugins\vim-markdown\after,
~/.vim/after 
```

注意病原体如何注入路径。它检测到几个插件有`after`目录并将它们放在前面`~/.vim/after`- 所以最后一个词总是我的。

为了实现这种病原体，需要一对`~/.vim`and `~/.vim/after`or or `~/vimfiles`and `~/vimfiles/after`or even `~/stuff`and `~/stuff/after`（虽然不确定最后一种情况）作为锚点，以正确的顺序注入插件的路径。

如果缺少这对中的任何目录，那么您将对病原体有一些令人讨厌的经历（就像我前一段时间所做的那样，直到我发现了所有上述内容并浏览了病原体源代码） - 因为路径将无法被注入正确。

现在您可以看到由提供的答案`Prince Goulash`是完全**错误**的：

1.  第一个错误是他已经附加`~/.vim`了，`rtp`而他应该在前面加上它；
2.  第二个错误是他没有 append `~/.vim/after`。

正确的解决方案如下所示。如果您必须在包括 Windows 在内的不同平台上工作，您应该将其添加到您的`.vimrc`（我也将其保存在我的 - 您可以从我的`rtp`示例中推断出来）：

```
if has('win32') || has('win64')
  set runtimepath^=~/.vim
  set runtimepath+=~/.vim/after
endif 
```

此代码段将确保跨平台的一致性。现在，即使在 Windows 中，您也可以使用类 Unix 目录`.vim`，而忘掉那些`vimfiles`垃圾 - IMO 丑陋而可怕。

之后你打电话：

```
call pathogen#infect('plugins') " or wherever your plugins reside
call pathogen#helptags()        " optional, but really cool 
```

**注意：** `'plugins'`表示`~/.vim/plugins`目录，所以它是`~/.vim`.

# mongodb - mongodb中的成对交叉点

> ID：13922230
> 
> 赞同：2
> 
> 时间：2012-12-17T21:08:56.820
> 
> 标签：mongodb, mapreduce

我是 mongodb 的新手，我想知道是否可以得到一些建议。我有以下收藏

```
{ "_id" : "u1", "item" : [ "a", "b", "c" ] }
{ "_id" : "u2", "item" : [ "b", "d", "e" ] }
{ "_id" : "u3", "item" : [ "a", "c", "f" ] }
{ "_id" : "u4", "item" : [ "c" ] } 
```

我想创建一个新集合，该集合将为每对用户计算项目的并集和交集，例如最后，对于用户 1 和 2,4 结果将是

```
{ "_id" : "u12", "intersect_count":1,"union_count":6 }
{ "_id" : "u14", "intersect_count":1,"union_count":4} 
```

由于效率低下，我不想对每一对进行成对操作。有什么技巧可以更有效地做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T21:59:27.397

我的解决方案是这样的：

```
map_func = function() {
  self = this;
  ids.forEach(function(id) {
    if (id === self._id) return;
    emit([id, self._id].sort().join('_'), self.item);
  });
};

reduce_func = function(key, vals) {
  return {
    intersect_count: intersect_func.apply(null, vals).length,
    union_count: union_func.apply(null, vals).length
  };
};

opts = {
  out: "redused_items",
  scope: {
    ids: db.items.distinct('_id'),
    union_func: union_func,
    intersect_func: intersect_func
  }
}

db.items.mapReduce( map_func, reduce_func, opts ) 
```

如果您`N`的集合中有元素，那么`map_func`将发出`N*(N-1)`元素以供将来减少。然后`reduce_func`将它们简化为`N*(N-1)/2`新的元素。

我曾经`scope`将全局变量 ( `ids`) 和辅助方法 ( `union_func`, `intersect_func`) 传递给`map_func`and `reduce_func`。`map_func`否则 MapReduce 将因错误而失败，因为它`reduce_func`在特殊环境中进行评估。

调用 MapReduce 的结果：

```
> db.redused_items.find()
{ "_id" : "u1_u2", "value" : { "intersect_count" : 1, "union_count" : 6 } }
{ "_id" : "u1_u3", "value" : { "intersect_count" : 2, "union_count" : 6 } }
{ "_id" : "u1_u4", "value" : { "intersect_count" : 1, "union_count" : 4 } }
{ "_id" : "u2_u3", "value" : { "intersect_count" : 0, "union_count" : 6 } }
{ "_id" : "u2_u4", "value" : { "intersect_count" : 0, "union_count" : 4 } }
{ "_id" : "u3_u4", "value" : { "intersect_count" : 1, "union_count" : 4 } } 
```

我在测试中使用了以下助手：

```
union_func = function(a1, a2) {
  return a1.concat(a2);
};

intersect_func = function(a1, a2) {
  return a1.filter(function(x) {
    return a2.indexOf(x) >= 0;
  });
}; 
```

另一种方法是使用 mongo 游标而不是全局`ids`对象：

```
map_func = function() {
  self = this;
  db.items.find({},['_id']).forEach(function(elem) {
    if (elem._id === self._id) return;
    emit([elem._id, self._id].sort().join('_'), self.item);
  });
};

opts = {
  out: "redused_items",
  scope: {
    union_func: union_func,
    intersect_func: intersect_func
  }
}

db.items.mapReduce( map_func, reduce_func, opts ) 
```

结果将是相同的。

# linux-device-driver - 字符设备驱动程序编程

> ID：13922231
> 
> 赞同：1
> 
> 时间：2012-12-17T21:08:57.010
> 
> 标签：linux-device-driver

我正在学习字符设备驱动程序编程。我有一些疑问，希望在这里澄清它们：-

(a) “设备文件与主设备号和次设备号相关联。同样在我们的驱动程序模块中，我们定义了一个 cdev 对象，其 fops 字段根据我们的功能定义，主设备号和次设备号相同。”

```
1\. I want to know what exactly happens when a function is called on the device file. 
Here is what I think. Suppose, I make a file called mydevfile using mknod(). Now 
when I call open(mydevfile, O_RDWR), the kernel is searched for a cdev object with
same minor and major number. When found, the cdev 's fops is searched for function
for open() (say dev_open()). It is written that the dev_open() should have first 
argument inode* and second argument file*. My question is how are these parameters 
passed to the dev_open() function?

2\. I learnt that inode is associated with a file on disk. Which file is it associated
with here? Also inode has a pointer to corresponding cdev. Now if we have already
got the cdev  by searching major and minor number from mydevfile, why do we need 
inode? W

3\. What does the file*(i.e. the second argument) point to in this case? 
```

你可以自由地以你喜欢的方式解释这一点，但如果你能用一个例子来解释它，我更愿意。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T13:26:54.960

我是字符驱动程序的新手。这只是我可以为您的问题所做的一个小总结。欢迎提出建议和修改。

这些是编写字符驱动程序需要了解的主要结构：

1）文件操作结构体：该结构体中的每个字段都指向驱动程序中实现open、read、write、ioctl的函数。每个打开的文件都通过包含一个名为 f_op 的字段与一些函数相关联，该字段将指向文件操作结构。

2) 文件结构：它代表一个打开的文件。它不是特定于驱动程序的，每个打开的文件在内核空间中都有一个文件结构。它由内核在打开时创建并传递给对文件进行操作的任何函数，直到最后一次关闭。结构文件操作 *f_op;

3) Inode 结构：内核用来在内部表示文件。这里只有两个参数很重要，即 a。struct cdev *i_cdev 和 b.dev_t i_rdev

```
a. struct cdev *i_cdev: kernel's internal structure to represent the char devices.
b. dev_t i_rdev: contains the actual device numbers. 
```

这就是我的解释：

从磁盘读取 inode 并初始化 inode 对象。

ext2_readinode()----> init_special_inode()----> 这会将 inode 对象的 i_rdev 字段初始化为设备文件的次要和主要编号。

# owl - 在 OWL 中，是否可以查询没有属性的类？

> ID：13922232
> 
> 赞同：0
> 
> 时间：2012-12-17T21:08:58.163
> 
> 标签：owl

在[OWL](http://en.wikipedia.org/wiki/Web_Ontology_Language)中，是否可以查询没有属性的类？

假设我有一个对象属性 R，并且我想检索所有没有属性 R 的类。另外，假设我已经用闭包关闭了所有类。

我正在尝试这个：

假设有问题的属性是 hasProperty，我的查询是这样的

```
hasProperty only Nothing 
```

但它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:23:27.450

“没有属性的类”是什么意思？

从语义上讲，一个类是一组个体，一个属性是一组个体对。鉴于这两组，“类有/没有属性”是什么意思？

关于您的示例查询

```
hasProperty only Nothing 
```

让我们稍微重写一下，以便我们可以用自然语言来思考它。这可以更好地了解此查询的含义。

首先让我们重命名`hasProperty`为`follows`（或任何英语动词），然后我们有：

```
follows only Nothing 
```

这在语义上等价于

```
follows only (not Thing) 
```

这在语义上等同于

```
not (follows some Thing) 
```

现在我们已经摆脱了`only`OWL 中令人困惑的部分，最好避免使用。所以现在我们可以用英语将查询描述为：

```
those who do not follow anything 
```

或者

```
who does not follow anything? 
```

或更正式地

```
which individuals of the ontology are known
    not to have a follow relationship to any other individual 
```

例如，如果您的本体声明

```
John does not follow Mary.
John does not follow himself.
Every individual in the ontology is either John or is Mary. 
```

那么`John`将是上述查询的答案。如果要求的限制适用于（命名的）个人组，您还可以获得命名类作为查询答案。在任何情况下，必须满足以下条件：如果您断言答案（或其成员）*确实*与某个人有`follow`关系，那么它将使本体不一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-16T18:23:44.303

OWL 没有任何方法可以查询数据。SPARQL 用于此目的。因此，查找所有不具有属性 :R 的类定义的 SPARQL 查询将是：

```
SELECT ?cls
WHERE {
   ?cls a owl:Class .
   FILTER NOT EXISTS {?cls :R ?o}
} 
```

# objective-c - CGDataProvider 第一次工作，第二次返回一个空图像

> ID：13922233
> 
> 赞同：0
> 
> 时间：2012-12-17T21:08:59.740
> 
> 标签：objective-c, ios, core-foundation

我正在尝试从我的 ios 应用程序中的 png 图像资产中读取 ARGB 像素数据。我正在使用 CGDataProvider 来获取 CFDataRef ，如下所述：

[http://developer.apple.com/library/ios/#qa/qa1509/_index.html](http://developer.apple.com/library/ios/#qa/qa1509/_index.html)

当我第一次在某个图像上使用它时，它可以完美运行。但我第二次在同一图像上使用它时，它返回长度为 0 的 CFDataRef。

也许我没有发布一些东西？为什么会这样做？

```
- (GLuint)initWithCGImage:(CGImageRef)newImageSource
{
    CGDataProviderRef dataProvider;
    CFDataRef dataRef;

    GLuint t;

    @try {
 //   NSLog(@"initWithCGImage");
 //   report_memory2();
    CGFloat widthOfImage = CGImageGetWidth(newImageSource);
    CGFloat heightOfImage = CGImageGetHeight(newImageSource);
    //    pixelSizeOfImage = CGSizeMake(widthOfImage, heightOfImage);
    //    CGSize pixelSizeToUseForTexture = pixelSizeOfImage;

    //    CGSize scaledImageSizeToFitOnGPU = [GPUImageOpenGLESContext sizeThatFitsWithinATextureForSize:pixelSizeOfImage];

    GLubyte *imageData = NULL;
    //CFDataRef dataFromImageDataProvider;

   // stbi stbiClass;
    int x;
    int y;
    int comp;

    dataProvider = CGImageGetDataProvider(newImageSource);
    dataRef = CGDataProviderCopyData(dataProvider);

    const unsigned char * bytesRef = CFDataGetBytePtr(dataRef);
   // NSUInteger length = CFDataGetLength(dataRef);

    //CGDataProviderRelease(dataProvider);
    //dataProvider = nil;
    /*
    UIImage *tmpImage = [UIImage imageWithCGImage:newImageSource];

    NSData *data2 =         UIImagePNGRepresentation(tmpImage);
//    if (data2==NULL)
//        data2 =        UIImageJPEGRepresentation(tmpImage, 1);

    unsigned char *bytes = (unsigned char *)[data2 bytes];
    NSUInteger length = [data2 length];*/
//    stbiClass.img_buffer = bytes;
//    stbiClass.buflen = length;
//    stbiClass.img_buffer_original = bytes;
//    stbiClass.img_buffer_end = bytes + length;

//    unsigned char *data = stbi_load_main(&stbiClass, &x, &y, &comp, 0);
    //unsigned char * data = bytesRef;
    x = widthOfImage;
    y = heightOfImage;
    comp = CGImageGetBitsPerPixel(newImageSource)/8;

    int textureWidth = [self CalcPow2: x];
    int textureHeight = [self CalcPow2: y];

    unsigned char *scaledData = [self scaleImageWithParams:@{@"x":@(x), @"y":@(y), @"comp":@(comp), @"targetX":@(textureWidth), @"targetY":@(textureHeight)} andData:(unsigned char *)bytesRef];
    //CFRelease (dataRef);
   // dataRef = nil;
 //    free (data);

    glGenTextures(1, &t);

    glActiveTexture(GL_TEXTURE0);
    glBindTexture(GL_TEXTURE_2D, t);
    GLint format  = (comp > 3) ? GL_RGBA : GL_RGB;

    imageData = scaledData;

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
    glTexImage2D(GL_TEXTURE_2D, 0, format, textureWidth, textureHeight, 0, format, GL_UNSIGNED_BYTE, imageData);
    //GLenum err = glGetError();
    }
    @finally
    {
        CGDataProviderRelease(dataProvider);
//        CGColorSpaceRelease(colorSpaceRef);
        CGImageRelease(dataRef);
    }

    return t;
} 
```

第二次在源自 [UIimage imageNamed: Path] 的 CGImageRef 上调用它，路径与第一次相同，我得到一个长度为 0 的 dataRef。但它第一次工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:18:01.993

我发现我发布并修复的代码存在一个大问题。首先，即使我没有两次加载相同的图像，而是加载更多图像，我也会崩溃。由于这个问题与内存有关，它以各种奇怪的方式失败了。

代码的问题是我正在调用：“CGDataProviderRelease(dataProvider);” 我正在使用 newImageSource 的数据提供者，但我没有创建这个数据提供者。这就是为什么我不应该释放它。只有当你创建、保留或复制它们时，你才需要发布它们。

除此之外，由于内存不足，我的应用程序有时会崩溃，但在修复此问题后，我能够使用我尽快分配和释放的“经济”类型。

目前我看不出这个特定代码有什么问题。

# sql-server - 有条件地将输出子句添加到合并语句

> ID：13922240
> 
> 赞同：1
> 
> 时间：2012-12-17T21:09:37.330
> 
> 标签：sql-server, merge, conditional-statements

我有一个合并语句，如果它存在，我想输出“id”字段。目前，我有一个语句可以输出更新或删除的任何 id，但如果没有名为 id 的列，则会中断。有没有办法在合并语句中添加条件？这是合并语句（忽略源数据值，因为它们只是占位符）：

```
 MERGE PACWARE.DHS.SVDDME WITH (HOLDLOCK) as target
USING (VALUES(<code>,<address1>,'',<city>,<state>,<zip>,0x414c414e205348414c4f534b59)) AS source
([CODE_],[TEMPADD1],[TEMPADD2],[TEMPCITY],[TEMPSTATE],[TEMPZIP],[ATTENTION])
ON target.CODE_ = source.CODE_
WHEN MATCHED THEN
UPDATE
SET
target.[CODE_] = source.[CODE_],target.[TEMPADD1] = source.[TEMPADD1],target.[TEMPADD2] = source.[TEMPADD2],target.[TEMPCITY] = source.[TEMPCITY],target.[TEMPSTATE] = source.[TEMPSTATE],target.[TEMPZIP] = source.[TEMPZIP],target.[ATTENTION] = source.[ATTENTION]
WHEN NOT MATCHED THEN
INSERT([CODE_],[TEMPADD1],[TEMPADD2],[TEMPCITY],[TEMPSTATE],[TEMPZIP],[ATTENTION])
values(source.[CODE_],source.[TEMPADD1],source.[TEMPADD2],source.[TEMPCITY],source.[TEMPSTATE],source.[TEMPZIP],source.[ATTENTION])
OUTPUT INSERTED.id; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:34:09.570

我决定在应用层处理这个问题（通过有条件地向函数添加一个输出行）。这比试图找到一个识别列并输出它更简单。用户只需传递他们想要返回的字段。

# jsp - 如何在 Java ee 中冒泡异常？

> ID：13922245
> 
> 赞同：2
> 
> 时间：2012-12-17T21:10:14.030
> 
> 标签：jsp, jakarta-ee, error-handling

在 Java EE 项目中，我有可能引发错误的服务，例如`throw new PersistenceException("My message here");`如何让这些错误消息显示在 JSP 视图中？我认为这很容易查找和弄清楚，但我没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T00:34:33.860

那里的`<error-page>`声明`web.xml`是为了。例如

```
<error-page>
    <exception-type>javax.persistence.PersistenceException<exception-type>
    <location>/WEB-INF/errorpages/db.jsp</location>
</error-page> 
```

但是，在将过度通用的异常类型（或超类）声明为“通用”错误页面时要小心`ServletException`，它可能会接管所有异常。改为使用`<error-code>500</error-code>`。

### 也可以看看：

*   [错误处理程序 Servlet：如何获取异常原因](https://stackoverflow.com/questions/4207586/error-handler-servlet-how-to-get-exception-cause/4207997#4207997)
*   [服务器如何优先使用哪种类型的 web.xml 错误页面？](https://stackoverflow.com/questions/5299169/how-does-tomcat-prioritize-which-type-of-error-page-to-use/5299474#5299474)

请注意，我假设这些异常代表不可恢复的情况（即，没有最终用户应该通过例如以正确格式重新输入输入来修复的用户错误——只是一个简单的验证错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:37:01.100

在控制器中捕获异常，将其（或其消息）放入请求属性中，让 JSP 从请求中获取并显示它，就像处理任何其他对象一样。

# ajax - 何时以优化的方式在数据库中自动为用户保存时区

> ID：13922246
> 
> 赞同：0
> 
> 时间：2012-12-17T21:10:25.630
> 
> 标签：ajax, database, django, django-models

我正在编写一个`django`应用程序，我必须在数据库中自动保存每个用户的时区。我已经通过 javascript 获得了时区，我正在主页中执行此操作。即每当加载主页时，我首先通过javascript找到时区，然后使用时区对服务器进行ajax调用，如果有任何更改，服务器将更新数据库。这样，我将始终拥有用户的当前时区，但我认为它是否会过多地增加对 DB 的影响？

我的一个选择是仅在用户登录时执行此操作。但在这种情况下，用户将被重定向到他在登录之前的页面，并且我必须将其他参数添加到重定向页面的重定向 URL 到决定是否应该进行 ajax 调用。

有任何想法吗？我的主要问题是第一个问题：它会对数据库产生严重影响吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:26:02.743

我建议在登录时进行。除了凭据，还要传递时区。

如果您使用的是 django.contrib.auth，则可以通过编写自定义身份验证后端来获取此额外信息：[https ://docs.djangoproject.com/en/dev/ref/authbackends/](https://docs.djangoproject.com/en/dev/ref/authbackends/)

# apache2 - Apache2 VirtualHost（ProxyPass 和 Alias）配置适用于 Ubuntu，但不适用于 OSX

> ID：13922248
> 
> 赞同：3
> 
> 时间：2012-12-17T21:10:28.297
> 
> 标签：apache2, alias, virtualhost, apache2.2, proxypass

多年来，我一直在为我的开发环境使用 Ubuntu 机器，并试图迁移到 OSX（Mountain Lion）。此时唯一的问题是 apache2 配置。

在 Ubuntu 机器上“apache2 -v”显示

```
Server version: Apache/2.2.22 (Ubuntu)
Server built:   Nov  8 2012 21:37:30 
```

在 OSX 机器上“httpd -v”显示

```
Server version: Apache/2.2.22 (Unix)
Server built:   Aug 24 2012 17:16:58 
```

所以你可以想象我对为什么虚拟主机配置不能很好地迁移感到非常困惑。

我的 VirtualHost 配置的以下 ProxyPass 和 Alias 位在我的第一个 apache2 实例上使用时效果很好，但在第二个实例上却不行。两台机器上的目录结构

出于所有意图和目的，虚拟主机配置如下

```
NameVirtualHost *:80

<VirtualHost *:80>

   ProxyPass /img !
   Alias /img /somedir/media/img

   ProxyPreserveHost On
   ProxyPass / http://127.0.0.1:8080/
   ProxyPassReverse / http://127.0.0.1:8080/

</VirtualHost> 
```

目标是 apache 将在端口 8080 上为所有图像和应用程序服务器提供繁重的工作（常见模式）。

在 Ubuntu 中，这很好用。在 macbook 上，没有提供图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:23:30.250

验证是否正在加载代理模块。这可以通过 conf 文件中的动态加载配置行来完成：

```
LoadModule  proxy_http_module    modules/mod_proxy_http.so 
```

或者编译成 Apache：

```
./httpd -l | grep proxy
mod_proxy.c
mod_proxy_connect.c
mod_proxy_ftp.c
mod_proxy_http.c
mod_proxy_scgi.c
mod_proxy_ajp.c
mod_proxy_balancer.c 
```

您可能会从另一台服务器中提取 mod_proxy_http.so。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-19T15:22:40.310

原来默认的 apache 配置定义了一个非常严格的默认站点配置。评论出来并重新启动服务器很好地清理了一切。

# php - phpmailer - live.com 和错误：语言字符串加载失败：tls

> ID：13922250
> 
> 赞同：0
> 
> 时间：2012-12-17T21:10:32.543
> 
> 标签：php, phpmailer

您好，我想用 hotmail 帐户发送邮件，我得到：

```
SMTP -> FROM SERVER:220 mx.google.com ESMTP q44sm31046347eep.5
SMTP -> FROM SERVER: 250-mx.google.com at your service, [91.203.134.106] 250-SIZE     35882577 250-8BITMIME 250-AUTH LOGIN PLAIN XOAUTH XOAUTH2 250-ENHANCEDSTATUSCODES 250     PIPELINING
SMTP -> FROM SERVER:502 5.5.1 Unrecognized command. q44sm31046347eep.5
SMTP -> ERROR: STARTTLS not accepted from server: 502 5.5.1 Unrecognized command.    q44sm31046347eep.5
SMTP -> FROM SERVER:250 2.1.5 Flushed q44sm31046347eep.5
Language string failed to load: tls 
```

我根本不知道为什么会有 mx.google.com ！！！这是我的代码

```
require_once('phpmailer/class.phpmailer.php');
    $defport=25;
    $sendmail='MAIL@hotmail.com';
    $mailpass='PASS';

    $mail = new PHPMailer(true);
    try {
    $mail->IsSMTP(); // send via SMTP
$mail->Mailer = "smtp";
if($defport==25) $mail->SMTPSecure   = "tls";
    $mail->SMTPAuth = true; // turn on SMTP authentication
$mail->SMTPDebug = 2;
$mail->Host = 'smtp.live.com';
    $mail->Port  = 25;
    $mail->Username = $sendmail; // SMTP username
    $mail->Password = $mailpass; // SMTP password
    $mail->From = $sendmail;
$mail->FromName = $sendmail;
    $mail->Subject = 'test';
    $mail->Body = 'test';
$mail->WordWrap = 50;
    $mail->AddAddress ('foo@foo.bar.com');
$mail->IsHTML (true);
    $mail->SetLanguage("en", "phpmailer/language/");

    $mail->CharSet = 'utf-8';

   $mail->Send();
 echo "Message Sent OK\n";
} catch (phpmailerException $e) {
  echo $e->errorMessage(); //Pretty error messages from PHPMailer
} catch (Exception $e) {
  echo $e->getMessage(); //Boring error messages from anything else!
}
?> 
```

你知道这可能是错的吗？

我尝试了另一个版本的 phpmailer (5.2.2) 并收到以下错误：

```
Warning: preg_match() [function.preg-match]: Compilation failed: reference to non-existent subpattern at offset 626 in ***/phpmailer/class.phpmailer.php on line 738
Invalid address: foo@foobar.bar.com 
```

第 738 行是：

```
 return preg_match('/^(?!(?>(?1)"?(?>\\\[ -~]|[^"])"?(?1)){255,})(?!(?>(?1)"?(?>\\\[ -~]|[^"])"?(?1)){65,}@)((?>(?>(?>((?>(?>(?>\x0D\x0A)?[   ])+|(?>[    ]*\x0D\x0A)?[   ]+)?)(\((?>(?2)(?>[\x01-\x08\x0B\x0C\x0E-\'*-\[\]-\x7F]|\\\[\x00-\x7F]|(?3)))*(?2)\)))+(?2))|(?2))?)([!#-\'*+\/-9=?^-~-]+|"(?>(?2)(?>[\x01-\x08\x0B\x0C\x0E-!#-\[\]-\x7F]|\\\[\x00-\x7F]))*(?2)")(?>(?1)\.(?1)(?4))*(?1)@(?!(?1)[a-z0-9-]{64,})(?1)(?>([a-z0-9](?>[a-z0-9-]*[a-z0-9])?)(?>(?1)\.(?!(?1)[a-z0-9-]{64,})(?1)(?5)){0,126}|\[(?:(?>IPv6:(?>([a-f0-9]{1,4})(?>:(?6)){7}|(?!(?:.*[a-f0-9][:\]]){7,})((?6)(?>:(?6)){0,5})?::(?7)?))|(?>(?>IPv6:(?>(?6)(?>:(?6)){5}:|(?!(?:.*[a-f0-9]:){5,})(?8)?::(?>((?6)(?>:(?6)){0,3}):)?))?(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])(?>\.(?9)){3}))\])(?1)$/isD', $address); 
```

希望有人能弄清楚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:05:47.397

在您的 class.phpmailer.php 中使用它。phpmailer与你的php版本一定存在兼容性问题。

```
public static function ValidateAddress($address) {
    if ((defined('PCRE_VERSION')) && (version_compare(PCRE_VERSION, '8.0') >= 0)) {
      return preg_match('/^(?!(?>(?1)"?(?>\\\[ -~]|[^"])"?(?1)){255,})(?!(?>(?1)"?(?>\\\[ -~]|[^"])"?(?1)){65,}@)((?>(?>(?>((?>(?>(?>\x0D\x0A)?[     ])+|(?>[    ]*\x0D\x0A)?[   ]+)?)(\((?>(?2)(?>[\x01-\x08\x0B\x0C\x0E-\'*-\[\]-\x7F]|\\\[\x00-\x7F]|(?3)))*(?2)\)))+(?2))|(?2))?)([!#-\'*+\/-9=?^-~-]+|"(?>(?2)(?>[\x01-\x08\x0B\x0C\x0E-!#-\[\]-\x7F]|\\\[\x00-\x7F]))*(?2)")(?>(?1)\.(?1)(?4))*(?1)@(?!(?1)[a-z0-9-]{64,})(?1)(?>([a-z0-9](?>[a-z0-9-]*[a-z0-9])?)(?>(?1)\.(?!(?1)[a-z0-9-]{64,})(?1)(?5)){0,126}|\[(?:(?>IPv6:(?>([a-f0-9]{1,4})(?>:(?6)){7}|(?!(?:.*[a-f0-9][:\]]){7,})((?6)(?>:(?6)){0,5})?::(?7)?))|(?>(?>IPv6:(?>(?6)(?>:(?6)){5}:|(?!(?:.*[a-f0-9]:){5,})(?8)?::(?>((?6)(?>:(?6)){0,3}):)?))?(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])(?>\.(?9)){3}))\])(?1)$/isD', $address);
    } elseif (function_exists('filter_var')) { //Introduced in PHP 5.2
        if(filter_var($address, FILTER_VALIDATE_EMAIL) === FALSE) {
          return false;
        } else {
          return true;
        }
    } else {
        return preg_match('/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9_](?:[a-zA-Z0-9_\-](?!\.)){0,61}[a-zA-Z0-9_-]?\.)+[a-zA-Z0-9_](?:[a-zA-Z0-9_\-](?!$)){0,61}[a-zA-Z0-9_]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/', $address);
    }
} 
```

如果你把你的phpMailer改成[这个](http://code.google.com/a/apache-extras.org/p/phpmailer/downloads/detail?name=PHPMailer_5.2.4.zip)版本会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T18:10:45.247

我有*完全相同的*问题。我用一个肮脏的黑客修复了它。将函数（以 开头`public static function ValidateAddress($address) {`）替换为：

```
public static function ValidateAddress($address) {
    return true;
} 
```

这将验证您提供的任何地址，**任何**！

在将地址与 PHPMailer 一起使用之前，您应该自己检查地址。我不知道如果你不这样做会发生什么，只是检查地址。

# java - 加密 - 解密时数据错误

> ID：13922255
> 
> 赞同：0
> 
> 时间：2012-12-17T21:10:43.527
> 
> 标签：java, encryption, aes

我正在与服务器通信，我已经到了最后阶段，在协商密钥和设置会话密钥之后，我发送一条加密消息，服务器回复。
目前，我们正在使用 AES-256 CBC，随机 IV 被发送到服务器并在本地存储。我目前面临的问题是当我解密从服务器获得的数据时：

```
decryptCipher.init(Cipher.DECRYPT_MODE, key, new IvParameterSpec(cipher.getIV(), 0, 16));
//Get the array after the 7 bytes from the header
byte[] encrypted = Arrays.copyOfRange(sbResponse.toString().getBytes(), 7, sbResponse.toString().length()); 
```

当我尝试解密该解析的数组时，会发生以下任何情况，但是，来自服务器的响应的长度或内容根本没有变化：

*   由于以下错误，我无法解密它：

    ```
    javax.crypto.BadPaddingException: Given final block not properly padded
    at com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)
    at com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)
    at com.sun.crypto.provider.AESCipher.engineDoFinal(DashoA13*..)
    at javax.crypto.Cipher.doFinal(DashoA13*..) 
    ```

*   我无法解密它，出现此错误：

    ```
    javax.crypto.IllegalBlockSizeException: Input length must be multiple of 16 when   decrypting with padded cipher
    at com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)
    at com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)
    at com.sun.crypto.provider.AESCipher.engineDoFinal(DashoA13*..)
    at javax.crypto.Cipher.doFinal(DashoA13*..) 
    ```

*   我可以解密它，某些块很好，但其中一些在明文中有奇怪的字符：

    ```
    k¤kC­²O©æÖ—Õw½QøX»ÌEXøÀWHÌËùtiÓaÚo at?the application 
    ```

*   一切都很好。

所以，我必须打一堆电话，直到我从服务器得到一个干净的响应。

我注意到的是，服务器确实在其端更改了 IV，但是，在我这端，当我向 Cipher 询问 IV 时，IV 始终保持不变，所以我真的不知道还能去哪里找。

以下是从服务器获取响应的代码摘录：

```
StringBuilder sb = new StringBuilder();
while (ConnectionStatus.LISTENING.equals(status)) {

            if (in.ready()) {
                sb.append((char) in.read());
            } else {
                if (sb.length() > 0) {
                    status = ConnectionStatus.OPEN;
                }
            }
        }

        if (ConnectionStatus.TIMEOUT.equals(status)) {
            status = ConnectionStatus.OPEN;
            throw new TimeoutException();
        } 
```

有人对可能发生的事情有任何想法吗？

如果您需要更多详细信息、代码或任何内容，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:48:10.327

问题在于将二进制数据存储到`String`.

如果`InputStreamReader`期望 UTF-8，它很可能遇到无效数据，因为大多数二进制流不是有效的 UTF-8。当阅读器遇到不是有效字符的字节序列时，数据会丢失。

至少有两种或三种解决方案：

*   切换到二进制数据的底层`InputStream`。由于 an`InputStreamReader`可能会执行缓冲，这是有问题的 - 即使这可能仅发生在某些字符集 ( [`To enable the efficient conversion of bytes to characters, more bytes may be read ahead from the underlying stream than are necessary to satisfy the current read operation.`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#String%28byte%5b%5d,%20java.lang.String%29))
*   始终将数据视为二进制数据，并且仅当您需要文本数据时，才[将数据转换为 String](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/ByteArrayInputStream.html)。
*   发送前将加密信息编码为文本，接收后解码。有几种标准编码方案，或者您可以自己滚动。这里有一些：
    *   [十六进制](http://en.wikipedia.org/wiki/Hexadecimal)- 效率不高（每个字符 4 位），但[更易于手动实现](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Long.html#toString%28long,%20int%29)。
    *   [Base64](http://en.wikipedia.org/wiki/Base64) - 二进制数据编码的事实标准（每个字符 6 位）。虽然（还）不是 JFC 的一部分，但[至少有一个库用于](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Base64.html).
    *   [Ascii85](http://en.wikipedia.org/wiki/Ascii85) - 可打印文本的编码密度最高（每个字符 6.4 位），如果你能找到[一个库的话](http://java.net/projects/ascii85codec)。它没有被广泛使用。

# c# - HomeandLearn 计算器：当我点击 btnPlus 按钮时，textDisplay 不会清除任何内容。

> ID：13922256
> 
> 赞同：0
> 
> 时间：2012-12-17T21:10:53.447
> 
> 标签：c#, calculator

我一直在关注[http://www.homeandlearn.co.uk/csharp/csharp_s2p17.html](http://www.homeandlearn.co.uk/csharp/csharp_s2p17.html)上的 C# 教程来制作计算器。我做得很好，一字不差地按照说明进行操作。我认为他们必须在教程中出现错误或其他问题，因为我一直在努力弄清楚为什么我的计算器在单击 + 号时无法清除文本，（根据他的教程，它是应该做——对吧？）

这是我的代码（当我开始调用双变量时，请注意最底部，因为这是我“迷路”的地方）：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Calculator
{
public partial class calc : Form
{
    public calc()
    {
        InitializeComponent();
    }

    private void btnOne_Click(object sender, EventArgs e)
    {
        txtDisplay.Text = txtDisplay.Text + btnOne.Text;
    }

    private void btnTwo_Click(object sender, EventArgs e)
    {
        txtDisplay.Text = txtDisplay.Text + btnTwo.Text;
    }

    private void btnThree_Click(object sender, EventArgs e)
    {
        txtDisplay.Text = txtDisplay.Text + btnThree.Text;
    }

    private void btnFour_Click(object sender, EventArgs e)
    {
        txtDisplay.Text = txtDisplay.Text + btnFour.Text;
    }

    private void btnFive_Click(object sender, EventArgs e)
    {
        txtDisplay.Text = txtDisplay.Text + btnFive.Text;
    }

    private void btnSix_Click(object sender, EventArgs e)
    {
        txtDisplay.Text = txtDisplay.Text + btnSix.Text;
    }

    private void btnSeven_Click(object sender, EventArgs e)
    {
        txtDisplay.Text = txtDisplay.Text + btnSeven.Text;
    }

    private void btnEight_Click(object sender, EventArgs e)
    {
        txtDisplay.Text = txtDisplay.Text + btnEight.Text;
    }

    private void btnNine_Click(object sender, EventArgs e)
    {
        txtDisplay.Text = txtDisplay.Text + btnNine.Text;
    }

    private void btnZero_Click(object sender, EventArgs e)
    {
        txtDisplay.Text = txtDisplay.Text + btnZero.Text;
    }

    private void btnClear_Click(object sender, EventArgs e)
    {
        txtDisplay.Clear();
    }

    double total1 = 0;
    double total2 = 0;

    private void btnPlus_Click(object sender, EventArgs e)
    {
        total1 = total1 + double.Parse(txtDisplay.Text);
        txtDisplay.Clear();
    }

    private void btnEquals_Click(object sender, EventArgs e)
    {
        total2 = total1 + double.Parse(txtDisplay.Text);
        txtDisplay.Text = total2.ToString();
        total1 = 0;
    }
}
} 
```

现在，在教程的下一页 (http://www.homeandlearn.co.uk/csharp/csharp_s2p18.html)，它要求我添加等号按钮的代码。当我运行它时，它没有做任何它应该做的事情。也就是说，当我点击 btnPlus 按钮时，textDisplay 不会清除任何内容。

在发布此之前，我经历了许多其他问题，试图找到答案。不，这不是家庭作业。其实是一种爱好。

我要疯了伙计们。提前感谢您能给我的任何帮助。我敢肯定，当我知道这一点时，我会想扇自己耳光。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-29T13:33:49.410

重新编写按钮，然后双击表单中的按钮，然后再次尝试按+并查看，认为会成功，祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:18:57.837

**简而言之：**我建议查看 Visual Studio 中的调试工具。它将帮助您了解单击按钮时发生的情况。

这是一个很好且简单的帖子 -[**调试教程**](http://www.dotnetperls.com/debugging)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-03-25T22:11:48.347

```
private void btnPlus_Click(object sender, EventArgs e)
    {
        total1 += total1 + double.Parse(txtDisplay.Text);
        txtDisplay.Clear();
    } 
```

只需在“=”符号之前添加一个“+”，它就会起作用。

# jquery - jQuery获取下一个兄弟

> ID：13922258
> 
> 赞同：2
> 
> 时间：2012-12-17T21:11:00.143
> 
> 标签：jquery, jquery-selectors

我在使用 jquery 获取兄弟元素时遇到了一些问题。我会尽力解释。

以下是我目前正在处理的 HTML ..

```
<p class="paraclass1" id="amazing1">
  <span class ="pascal1">
    <div class='pascal'>
        <INPUT id= "chk1" value="on" type="checkbox" />
    </div>
  </span>
</p>
<p>
  <label class='lblclass'>this is a label </>
</p> 
```

我想做的是导航并找到第二个 p 标签中存在的所有孩子（现在只有一个标签存在）。以下是我正在处理的 Jquery 代码..

```
$('#chk1').click(function(){
  alert($(this).parents('p#amazing1').next().children().length)

 // alert($('#chk1').parent().parent().attr('class'));
}); 
```

[http://jsfiddle.net/gj1118/vWQxD/5/](http://jsfiddle.net/gj1118/vWQxD/5/)

任何帮助，将不胜感激。

谢谢

**编辑** 我现在正在尝试获取第二个 p 标签元素内的标签文本，但它不起作用.. 有什么我遗漏的东西.. 吗？我还没有改变小提琴，但由于它只是一个示例并且由于没有使用标签，为了简单起见，我让它保持原样

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T21:16:49.507

您的 jQuery 应该可以正常工作。在这种情况下，问题是您的标记。该[`p`元素](http://www.w3.org/html/wg/drafts/html/master/single-page.html#the-p-element)只能包含“[短语内容](http://www.w3.org/html/wg/drafts/html/master/single-page.html#phrasing-content-1)”。该`div`元素不属于短语内容，因此浏览器将通过移动内容来尽力处理您的标记。

Chrome 只是将`p`元素移动为`div`.

要解决此问题，您需要更改标记。您最好的选择可能是将`p`元素更改为另一个`div`. 查看[更新的小提琴](http://jsfiddle.net/vWQxD/8/)。

* * *

*旁注*。您可能要考虑将`.parents()`呼叫更改为`.closest()`呼叫。`.parents()`如果匹配选择器，该方法可以返回多个元素。在这种情况下这是不可能的，但为了可维护性，这可能是一个很好的改变：

```
$(this).closest('#amazing1').next().children().length 
```

# c++ - MSVC2010中不同分辨率的图标

> ID：13922259
> 
> 赞同：0
> 
> 时间：2012-12-17T21:11:03.417
> 
> 标签：c++, visual-c++, icons, embedded-resource

全部，

我正在制作一个需要使用图标的应用程序。我有 2 个图标文件：myicon-16.ico 和 myicon-32.ico。第一个分辨率为 16x16，第二个分辨率为 32x32。现在，当我打开 MSVC 2010 项目 (C++) 时，我看到默认图标文件组合了 2 个图标，即它在一个文件中有 16x16 和 32x32 的资源。我的意思是当我在 Visual Studio 解决方案中打开资源文件并单击标准图标时，我会看到许多不同的图标分辨率。我可以选择每一个，位图（图标）将以适当的分辨率显示。但是当我在文本编辑器中打开 rc 文件时，我只看到两行：一行带有我自己的图标，另一行带有标准图标“IDI_SMALL”。

我需要做什么才能用我的 2 个文件做同样的事情？我想要的是当我在 VS 中打开资源文件并单击我的图标资源时，我想看到 2 个分辨率为 16x16 和 32x32 的图标。AFAIU，我只能在rc文件中放置一个额外的图标资源。还是我错了？

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:08:33.607

您可以使用 VS2010 在 ico 文件中添加其他图像类型。只需用VS2010打开一个ico文件。比如说，打开 myicon-16.ico。您将在那里只看到一个图标 - 16x16。现在打开菜单 Image->New Image Type（或使用右键单击->New Image Type，或使用键盘快捷键 Ins）。您将看到从 16x16 1 位到 128x128 24 位的选择。只需插入您喜欢的数量即可。

对于您的情况，您需要在 myicon-16.ico 中插入一个空的 32x32，然后从 32 像素文件中复制并粘贴。

在旁注上。现在谁画图标。只需谷歌免费图标，您就会在互联网上找到大量图标库，大小从 16x16 到 256x256 png 不等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:03:01.157

是的，您需要将您的图像组合成一个包含所有数据的 ICO 文件。

来自[维基百科](http://en.wikipedia.org/wiki/ICO_%28file_format%29)：

> ICO 文件包含一个或多个具有多种尺寸和颜色深度的小图像，以便它们可以适当地缩放。

有很多图像编辑器可以做到这一点，我个人使用[GIMP](http://www.gimp.org/)创建多层 png 文件，然后保存为 .ico 以获得最终结果。

您还应该能够在 VS2010 中的图像尺寸列表中右键单击，然后单击“新图像类型”以在内置的 ICO 编辑器中添加不同的分辨率。然后，您可以将图像数据从另一个编辑器复制并粘贴到 Visual Studio 中。

# .htaccess - htaccess - 重写这个 url

> ID：13922261
> 
> 赞同：0
> 
> 时间：2012-12-17T21:11:10.953
> 
> 标签：.htaccess, rewrite

我正在为我的 htaccess URL 重定向而苦苦挣扎。网址如下。。

> [http://domain.com/comments/25/list/2](http://domain.com/comments/25/list/2)

*   comments/25 - 25 是帖子的 ID
*   list/2 - 2 是我需要从中分页的页码

我有上一页的以下内容。

> RewriteRule ^channels/list/([a-z0-9]+)$ index.php?page=channels&part=$1 [L]

所以基本上，需要重写 2 个变量，我正在努力做到这一点。对不起，我不能更好地解释它:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:39:05.803

> 重写规则 ^comments/([0-9]+)/list/([0-9]+)$ /index.php?comments=$1&list=$2 [L]

# php - 带有类映射的 PHP 嵌套 SOAP 标记

> ID：13922262
> 
> 赞同：0
> 
> 时间：2012-12-17T21:11:10.870
> 
> 标签：php, soap

我使用[wsdl2php.php](http://sourceforge.net/projects/wsdl2php/)创建具有基于 wsdl 的类映射的类。它生成了两个类，一个用于创建帐户，一个用于名称值对。

我试图弄清楚如何使用类来创建一个肥皂请求。肥皂服务器是.Net。

这是 CreateAccount.asmx 页面建议的肥皂请求：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <CreateAccount xmlns="https://www.mywsdlsitehere.com/Account">
      <parameters>
        <NameValue>
          <name>string</name>
          <value>string</value>
        </NameValue>
        <NameValue>
          <name>string</name>
          <value>string</value>
        </NameValue>
      </parameters>
    </CreateAccount>
  </soap:Body>
</soap:Envelope> 
```

我尝试使用几种方法将名称和值对嵌套到 NameValue 标记中。

这是我最新的失败尝试：

```
$createaccount->parameters->fullName='Testy Tester';
$createaccount->parameters->userEmail='testy@tester.com';
$createaccount->parameters->accountName='TestyTester';
$createaccount->parameters->password='*****';

class CreateAccount {
  public $parameters; // ArrayOfNameValue
}

class NameValue {
  public $name; // string
  public $value; // string
}

public function CreateAccount(CreateAccount $parameters) {
    return $this->__soapCall('CreateAccount', array($parameters),       array(
            'uri' => 'https://www.mywsdlsitehere.com/Accounting',
            'soapaction' => ''
           )
      );
  } 
```

我得到的错误是：

> 致命错误：未捕获的 SoapFault 异常：[soap:Server] 服务器无法处理请求。---> 值不能为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:16:43.960

您没有创建服务所需的结构。

该服务需要一个`CreateAccount`具有属性的顶级对象，该属性`parameters`是一个数组，其中包含多个`NameValue`对象实例。

我期待这样的事情：

```
$create = new CreateAccount();
$create->parameters = array();

$nameValue1 = new NameValue();
$nameValue1->name = "Name1";
$nameValue1->value = "Value1";

$create->parameters[] = $nameValue1; 
```

# php - php - youtube 授权

> ID：13922271
> 
> 赞同：-1
> 
> 时间：2012-12-17T21:11:50.047
> 
> 标签：php, youtube-api

我尝试为我的网站更改 youtube 视频注释功能，但有授权问题。

如何授权 YouTube 网站上的用户/开发人员从视频编辑注释页面读取 auth_token？

```
http://www.youtube.com/my_videos_annotate?feature=vm&v=myVideoId 
```

还是有其他方法可以获取此 auth_token 以更新注释数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:28:22.863

没有检索或修改注释的编程访问。我强烈建议您不要尝试将 YouTube 网络界面反向工程为注释。

# html - 如何编写支持英语、汉语和日语等多种语言的网页。

> ID：13922274
> 
> 赞同：-4
> 
> 时间：2012-12-17T21:11:58.377
> 
> 标签：html, css, unicode, multilingual, utf-16

我有一个从服务器获取一些数据的 html 代码。数据目前可以是中文、英文或日文。如何修改我的 html 代码以处理多种语言，例如中文和日文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:17:51.143

随机射击公司

您需要从浏览器中读取有关其使用的语言的标题数据。然后，您可以从数据库中选择正确的语言并将其返回到网页。

我的回答是这么大，因为你的问题这么大:)

但是是的，一直使用 UTF-8 也是一个好主意；）

# sony - 将数据从 Android 应用程序发送到 SmartWatch 扩展程序

> ID：13922275
> 
> 赞同：0
> 
> 时间：2012-12-17T21:12:11.543
> 
> 标签：sony, sony-smartwatch

我刚开始研究 SmartWatch 的 SDK，如果我查看示例源代码，所有代码都与 SmartWatch 本身相关。

> 但是如何与 Android 应用进行交互呢？
> 
> 这里有代码示例吗？

如何将数据从我的 Android 应用程序发送到 SmartWatch。

> a) 每 x 秒发送一次数据？
> 
> b) 点击 SmartWatch 时发送数据？

已编辑：我已经在 Play 上有一个普通的 Android 应用程序 XYZ。我为我的 SmartWatch 做了一个新的扩展。现在我在 Play 中有两个应用程序。我现在如何更改我的 XYZ 应用程序以与我的新扩展程序对话。我实现的扩展是 SampleWidgetDemo。假设我现在想要更改 SampleWidgetDemo 并显示一些源自我的应用程序 XYZ 的文本。如何从我的应用程序 XYZ 应用程序发送一些文本？而且，如果我点击我的手表，我如何从我的应用程序 XYZ 请求数据？

我缺少一个必须集成到我的 XYZ 应用程序中的代码示例。还有从我的 XYZ 应用程序中检索文本的代码示例，它是在点击时从我的扩展程序启动的。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:20:50.993

没有什么能阻止您将 Smartwatch 扩展功能集成到标准应用程序中。只需将 nessasary 服务等添加到您的普通应用程序中即可。如果没有我的代码可供参考，我无法确定，但我不记得除了清单文件之外，还有其他地方可以将两者结合在一起。

你如何让你当前的应用程序和它的智能手表交互真的取决于你的应用程序是什么以及你想要实现什么。就我个人而言，我有一项服务可以完成我的主要活动或智能手表与之交互的大部分工作。我在使用的 Singoltons 中也有一些共享数据。

当两者同时活跃时，就会出现并发症。我的方法是智能手表代码和我的主要活动向服务发出请求，并且服务广播状态更新信息，这些信息被显示状态的任何东西接收。所以我请求**启动，但在收到****启动**消息之前不显示启动状态。

如果您希望这两个应用程序分开，您需要使用标准 Android 手段进行通信，例如 Intents、ContentProviders、Services、BroadcastRiecivers 等。最好的取决于您想要做什么......

# r - 使用正则表达式从文本字段中提取前 X 个数字

> ID：13922278
> 
> 赞同：1
> 
> 时间：2012-12-17T21:12:29.593
> 
> 标签：r

我有看起来像这样的字符串。

```
x <- c("P2134.asfsafasfs","P0983.safdasfhdskjaf","8723.safhakjlfds") 
```

我需要结束：

```
"2134", "0983", and "8723" 
```

本质上，我需要从每个元素中提取作为数字的前四个字符。有些以字母开头（不允许我使用简单的 substring() 函数）。

我想从技术上讲，我可以做类似的事情：

```
x <- gsub("^P","",x)
x <- substr(x,1,4) 
```

但我想知道如何使用正则表达式来做到这一点！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T21:15:08.840

您可以使用包中的[str_match](http://www.inside-r.org/packages/cran/stringr/docs/str_match)`stringr`：

```
library(stringr)
print(c(str_match(x, "\\d\\d\\d\\d")))
# [1] "2134" "0983" "8723" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T21:18:25.907

你也可以这样做`gsub`。

```
> sub('.?([0-9]{4}).*', '\\1', x)
[1] "2134" "0983" "8723"
> 
```

我用`sub`而不是`gsub`确保我只得到了第一场比赛。 `.?`表示任何单个字符及其可选字符（类似于 just`.`但如果没有前导它不会匹配大小写`P`）。`()`表示我在替换中引用的组`'\\1'`。如果有多组，`()`我也可以使用`'\\2'`. 在组内，你的语法是正确的，我只想要数字，我想要其中的 4 个。最后一段说零个或多个任何类型的尾随字符。

你的语法是有效的，但是你用它自己替换了一些东西，所以你最终得到了相同的输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T21:25:25.277

### 这将为您提供字符串的前四位数字，无论它们出现在字符串中的哪个位置。

```
mapply(function(x, m) paste0(x[m], collapse=""), 
        strsplit(x, ""),
        lapply(gregexpr("\\d", x), "[", 1:4)) 
```

### 把它分解成碎片：

上述行中发生的情况如下：

```
# this will get you a list of matches of digits, and their location in each x
matches <- gregexpr("\\d", x)

# this gets you each individual digit
matches <- lapply(matches, "[", 1:4)

# individual characters of x
splits <- strsplit(x, "")

# get the appropriate string
mapply(function(x, m) paste0(x[m], collapse=""), splits, matches) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-13T00:46:50.107

另一种不假设 4 个数字的组捕获方法。

```
x <- c("P2134.asfsafasfs","P0983.safdasfhdskjaf","8723.safhakjlfds") 

gsub("(^[^0-9]*)(\\d+)([^0-9].*)", "\\2", x)

## [1] "2134" "0983" "8723" 
```

# javascript - Ember 视图找不到预编译的车把模板

> ID：13922281
> 
> 赞同：1
> 
> 时间：2012-12-17T21:12:45.957
> 
> 标签：javascript, ember.js, handlebars.js

我已经预编译了我的车把模板，但是 ember 无法再在引用它们的地方找到它们，如下所示：

```
App.ApplicationView = Ember.View.extend
    templateName: "application" 
```

我收到此错误：

未捕获的错误：< App.ApplicationView:ember390 > - 找不到模板“应用程序”。

当我像这样引用模板时它可以工作：

```
App.ApplicationView = Ember.View.extend
   template: Handlebars.templates["application"] 
```

..但我想知道为什么我不能以第一种方式做到这一点

# matlab - 如何在 MATLAB 中导出具有多个子图的窗口的 PNG？

> ID：13922282
> 
> 赞同：2
> 
> 时间：2012-12-17T21:12:45.197
> 
> 标签：matlab, png, figure, subplot

我有 8 个数字和一个文本框（一个列出模拟参数值的图例）。它们都使用 subplot() 绘制在一个窗口中。它看起来不错，但窗口弹出太频繁，让我从其他工作中分心。我想自动将这些数字保存为 PNG 图像，而不是让窗口不断弹出，以便稍后查看图表和数字。

我**所**知道的：

*   如何将*单个*图形保存为 PNG
*   如何使用 subplot 在单个窗口中制作多个图形
*   如何*不*显示带有单个图形的窗口（将图形的可见性设置为“关闭”）

我**不**知道的是：

*   如何让多图窗口不弹出
*   如何设置多图形窗口的大小（例如 400 像素 x 600 像素）
*   如何将整个窗口导出为 PNG

任何想法将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:54:57.823

use

```
 set('gcf','visible','off') 
```

to off showing all figures, and

```
 set('gcf','visible,'on') 
```

to turn showing figures on.

to save a figure first assign a name to it:

```
 fig1 = figure(1); 
```

then use saveas:

```
 saveas(fig1,'filename.png','png') 
```

to set figure size, see: [Setting graph figure size](https://stackoverflow.com/questions/5183047/matlab-setting-graph-figure-size)

# python - 如何根据先前列表中的某些数字制作单独的列表？

> ID：13922284
> 
> 赞同：1
> 
> 时间：2012-12-17T21:12:52.683
> 
> 标签：python

嘿家伙试图完成我的程序。这是我的代码：

```
lists = [10, 20, 30, 40, 50, 60, 70, 80, 90, 100]

#I want to make a new list consisting of only numbers above 50 from that list
if any(list > 50 for list in list):
newlists = list 
```

我不知道该怎么做。我做错了什么，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T21:14:08.360

像这样的东西会起作用：

```
new_list = [ x for x in lists if x > 50 ] 
```

这被称为“[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)”，非常方便。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T21:15:01.097

`newlist = [x for x in lists if x > 50]`

[在此处](http://docs.python.org/2/tutorial/datastructures.html)阅读有关列表推导的信息

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T21:17:23.217

两种选择。使用列表推导：

```
lst = [10, 20, 30, 40, 50, 60, 70, 80, 90, 100]
[x for x in lst if x > 50] 
```

并`filter`在 Python 2.x 中使用：

```
filter(lambda x: x > 50, lst) 
```

或者`filter`在 Python 3.x 中使用，如注释中所指出的，`filter`在此版本中返回一个迭代器，如果需要，需要先将结果转换为列表：

```
list(filter(lambda x: x > 50, lst)) 
```

无论如何，结果如预期：

```
=> [60, 70, 80, 90, 100] 
```

# android - android map v2 gms 在 onInfoWindowClick 中启动 Intent

> ID：13922287
> 
> 赞同：2
> 
> 时间：2012-12-17T21:13:07.757
> 
> 标签：android, maps

我尝试在 中启动 Intent `onInfoWindowClick`，但它冻结了：

```
@Override
public void onInfoWindowClick(Marker marker) {
    TabGroupActivity parentActivity = (TabGroupActivity) getParent();
    Context context = parentActivity.getApplicationContext();
    Intent myIntent = new Intent(context, HouseDetailActivity.class);

    parentActivity.startChildActivity("DetailActivity", myIntent);
} 
```

如果我尝试在

```
public boolean onMarkerClick(final Marker marker) 
```

它完美地工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T18:52:21.113

我遇到了同样的问题。我怀疑必须先关闭 InfoWindow，然后才能进行任何操作，因此同步更改视图（或活动活动）不起作用。

我不确定这是否是最好的解决方案，但我通过使用 postDelayed() 解决了这个问题，如下所示：

```
@Override
public void onInfoWindowClick(Marker marker) {
    marker.hideInfoWindow();
    // Set some variable here so you know which one was clicked
    gMarker = marker;
    myHandler.postDelayed(updateMyMap, 50);
    }
}

private Runnable updateMyMap = new Runnable() {

    @Override
    public void run() {
        // Take some action on the selection here
        setContentView(someView);
    }

}; 
```

# actionscript-3 - 拼接然后在 ActionScript 3 中重新索引数组

> ID：13922289
> 
> 赞同：-2
> 
> 时间：2012-12-17T21:13:21.593
> 
> 标签：actionscript-3

我想使用 删除数组的前四个索引`splice()`，然后从索引 0 开始重建数组。我该怎么做？

```
Array.index[0] = 'one';
Array.index[1] = 'two';
Array.index[2] = 'three';
Array.index[3] = 'four';
Array.index[4] = 'five';
Array.index[5] = 'six';
Array.index[6] = 'seven';
Array.index[7] = 'eight';

Array.splice(0, 4);

Array.index[0] = 'five';
Array.index[1] = 'six';
Array.index[2] = 'seven';
Array.index[3] = 'eight'; 
```

我通过计时器访问数组，在每次迭代中我想删除数组的前四个索引。我假设`splice()`会删除索引，然后从 0 索引开始重建数组。它没有，所以我所做的是创建一个'deleteIndex'变量，在每次迭代中，一个+4被添加到deleteIndex。

```
var deleteIndex:int = 4;
function updateTimer(event:TimerEvent):void
{
    Array.splice(0,deleteIndex);
    deleteIndex = deleteIndex + 4;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T21:26:45.657

您显示的代码中的“数组”是什么类型的对象？Flash [Array](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html)对象没有名为“index”的属性。Array 类是`dynamic`，这意味着它可以让您在运行时向它添加随机属性（这似乎是您正在做的事情）。

在任何情况下，如果您使用标准 Flash Array 类，它的[splice()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#splice%28%29)方法会自动更新数组索引。这是一个证明它的代码示例：

```
var a:Array = [1,2,3,4,5];
trace("third element: ", a[2]); // output: 3
a.splice(2,1); // delete 3rd element
trace(a); // output: 1,2,4,5
trace(a.length); // ouput: 4
trace("third element: ", a[2]); // output: 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:29:30.233

If I am understanding what you want correctly, you need to use the unshift method of Array.

example :

```
var someArray:Array = new Array(0,1,2,3,4,5,6,7,8);
someArray.splice(0,4);
somearray.unshift(5,6,7,8); 
```

Also, you are using the Array Class improperly, you need to create an instance of an array to work with first.

The question is confusing because you used Array class name instead of an instance of an array. But as the commenter on this post said, if you splice elements, it automatically re-indexes.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T21:25:33.103

我不确定你想做什么，但 Array=Array.splice(0,4) 应该解决一些问题。

# php - 从选定菜单中删除数据库中的数据

> ID：13922294
> 
> 赞同：0
> 
> 时间：2012-12-17T21:13:47.953
> 
> 标签：php, mysql, sql-delete

我想在PHP代码中选择一个数据，并且选择的数据是从一个mysql数据库中呈现出来的，那么选择的数据就会被删除！这是我的总体想法。

我写了代码，第一个代码是打印数据库中的数据让用户选择数据，这是第一个代码：

```
<form method="POST" action="deleteacc.php" name='monitor' id='monitor'>
<select name="drivers"><option>Please Select the sensor id that you want to delete :</option>  
<?php

$uid=$_SESSION['uid'];

  $dbName = "senior"; //Database name
        $db = mysql_connect ("localhost","root","hahaha1") or die("Unable To Connect "); //Connect to database
        $test= mysql_select_db ($dbName,$db) or die("Unable to select database"); //Test Connection

        $result=mysql_query("SELECT * FROM accelerometer ");

        while ($row=mysql_fetch_array($result))
        {
            $sid = $row['sid'];
            $x=$row['x'];
            $y=$row['y'];
            $z=$row['z'];
            $date=$row['date'];
            $time=$row['time'];
            echo "<option  name=$sid' value='$sid'>  Device ID: $sid</option>"; 
        }           

        mysql_close($db);
        ?>
</select></center>
<br>
 <center> <input type="submit" value= "   Monitor   " name="submit" ><br /><br /> </center>
</form> 
```

我删除所选数据的第二个代码：

```
<?php
$dbh=mysql_connect("localhost", "root", "hahaha1") or die (mysql_error());
mysql_select_db ("senior");
extract($_POST);
$mySql="DELETE FROM accelerometer WHERE sid=$drivers"; 
mysql_query($mySql) or die (mysql_error()); 
echo "<h2> User info was deleted successfully</h2>";
echo "<h3>To go back to adminstration control click <a href='member.php'>Here!</a> or to delete another accelerometer value click <a href='deleteacc2.php'>Here!</a></h3>";
mysql_close($dbh);
?> 
```

我的问题是当我从菜单中选择数据并按下监视器时，这个错误显示给我：

```
Unknown column 'bedoor' in 'where clause' 
```

请对如何解决我的问题有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:23:27.580

这个：

```
echo "<option  name=$sid' value='$sid'>  Device ID: $sid</option>"; 
```

应该：

```
echo "<option  value=\"".$sid."\">  Device ID: ".$sid."</option>"; 
```

你真的不应该使用 mysql ext，因为它已经被贬值了。查看mysqli或PDO。

这是在调用页面中设置您的帖子变量的方法：

```
 <?php
$dbh=mysql_connect("localhost", "root", "hahaha1") or die (mysql_error());
mysql_select_db ("senior");
if(isset($_POST['drivers']))
    {
        $drivers = $_POST['drivers'];
    }
$mySql="DELETE FROM accelerometer WHERE sid = '".$drivers."'"; 
mysql_query($mySql) or die (mysql_error()); 
echo "<h2> User info was deleted successfully</h2>";
echo "<h3>To go back to adminstration control click <a href='member.php'>Here!</a> or to delete another accelerometer value click <a href='deleteacc2.php'>Here!</a></h3>";
mysql_close($dbh);
?> 
```

# android - android内容提供者对提供者崩溃的鲁棒性

> ID：13922299
> 
> 赞同：4
> 
> 时间：2012-12-17T21:13:53.640
> 
> 标签：android, android-contentprovider, robustness, ashmem

在 android 平台上（在 ICS 上已确认），如果内容提供者在客户端处于查询中间（即有一个打开的游标）时死亡，则框架决定终止持有打开游标的客户端进程。

这是我尝试使用下载管理器查询时的 logcat 输出，该查询在执行查询后休眠。“睡眠”是为了重现问题。当提供者在正确/错误的时间死亡时，您可以想象它发生在常规用例中。然后杀掉 com.android.media（它承载了 downloadProvider）。

“杀死 com.example（pid 12234），因为提供者 com.android.providers.downloads.DownloadProvider 正在死亡进程 android.process.media”

我在 ActivityManagerService::removeDyingProviderLocked 中跟踪了此代码

```
 10203     private final void removeDyingProviderLocked(ProcessRecord proc,
 10204             ContentProviderRecord cpr) {
 10205         synchronized (cpr) {
 10206             cpr.launchingApp = null;
 10207             cpr.notifyAll();
 10208         }
 10210         mProvidersByClass.remove(cpr.name);
 10211         String names[] = cpr.info.authority.split(";");
 10212         for (int j = 0; j < names.length; j++) {
 10213             mProvidersByName.remove(names[j]);
 10214         }
 10215 
 10216         Iterator<ProcessRecord> cit = cpr.clients.iterator();
 10217         while (cit.hasNext()) {
 10218             ProcessRecord capp = cit.next();
 10219             if (!capp.persistent && capp.thread != null
 10220                     && capp.pid != 0
 10221                     && capp.pid != MY_PID) {
 10222                 Slog.i(TAG, "Kill " + capp.processName
 10223                         + " (pid " + capp.pid + "): provider " + cpr.info.name
 10224                         + " in dying process " + (proc != null ? proc.processName : "??"));
 10225                 EventLog.writeEvent(EventLogTags.AM_KILL, capp.pid,
 10226                         capp.processName, capp.setAdj, "dying provider "
 10227                                 + cpr.name.toShortString());
 10228                 Process.killProcessQuiet(capp.pid);
 10229             }
 10230         }
 10231 
 10232         mLaunchingProviders.remove(cpr);
 10233     } 
```

这是一个政策决定还是提供者死亡后游标访问不安全？

看起来客户端光标正在为 CP 填充的 ashmem 位置保存一个 fd。这是客户端被杀死而不是在服务器（提供者）死亡时抛出像Binders这样的异常的原因吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-01-15T20:35:13.473

`Cursor`是不安全的。尽管我认为大多数时候`Cursor`s 仅用于对数据的“读取访问”，但它们比这更复杂。

简短的解释在 Android 文档中描述了`Cursor`：

> 此接口提供对数据库查询返回的结果集的随机读写访问。

所以`Cursor`s 不仅仅是对象中保存的数据。`ResultSet`它们通过数据库连接在您的位置上占有一席之地。使用`ResultSet`JDBC 访问数据库。因此，`Cursor`它仅充当“Java 友好”的数据库调用。这是有关该文档的Android `ResultSet`：

> 当通过适当的 getter 方法读取数据时，JDBC 驱动程序将从数据库检索到的 SQL 数据映射到应用程序调用的方法所隐含的 Java 类型。JDBC 规范有一个从 SQL 类型到 Java 类型的映射表。

`ResultSet`保持与数据库的连接。数据不会“复制”到接口中（两者`Cursor`都是`ResultSet`接口，而不是对象；某些实现可能会复制数据，但我没有对其进行测试，因为通过关闭离开`Statement`和打开资源会导致数据库资源问题）。`ResultSet``Connection`

Java 提供了接口来获得对数据库中“结果集表”的 JDBC 访问权限，如下面`ResultSet`的 Java 文档中所述：

> 表示数据库结果集的数据表，通常通过执行查询数据库的语句生成。

[http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html)

您不能为已死的 ContentProvider 提供“数据库访问”，因为`ResultSet`数据库中的表没有连接，因此`Cursor`应该处理掉。

编辑：

一条评论表明 Android 不使用`JDBC' or`ResultSet` - SQLite 的 Android 实现与 JDBC 非常相似，并且概念基本相同，没有方便的名称和描述。

Android 使用自定义实现的事实使问题的描述更加困难，尽管我应该在我的原始帖子中提到这一点。以下是关于 Android 中 JDBC 和 SQLite 接口实现状态的 Google Groups 线程，如果需要更详细的参考和信息：

[https://groups.google.com/forum/#!topic/android-developers/zz3qlNL2JDw](https://groups.google.com/forum/#!topic/android-developers/zz3qlNL2JDw)

从讨论中，您可能可以向 Joerg Pleumann 询问更多详细信息……

# typescript - 对于构建 TypeScript 代码库有哪些建议？

> ID：13922305
> 
> 赞同：18
> 
> 时间：2012-12-17T21:14:27.890
> 
> 标签：typescript

我多年来一直在使用 C#，并且主要习惯于按类型处理单个文件的方式。我也喜欢将文件放入子文件夹（对应于 C# 中的命名空间）。

但是现在我正在使用 TypeScript 构建一个移动 Web 应用程序，并且发现自己以几乎相同的方式构建我的代码。但是，这不太好用：

*   每个文件都会生成一个模块包装器，因此如果您有许多具有相同模块的文件，则输出（捆绑时）包含许多不必要的代码行。
*   在其他模块中引用类型.. 不如在 C# 中好，因为您必须在类型名称前加上模块名称。

第一点应该可以通过编写一个小工具从捆绑输出中去除不必要的模块包装器来解决。而且我认为我需要避免使用子模块，只需将所有内容都粘贴到一个模块中，而不管文件系统位置如何。

有没有比我目前正在做/计划的更好的方法来构建 TypeScript 代码，或者像上面这样的推荐做法？对于喜欢单一职责原则的人来说，有哪些值得考虑的替代方案？

PS：我希望这符合 SO 的指导方针，尽管可能有点主观和开放。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-18T09:41:34.827

这是我的建议。

## 网站

如果您在网站上使用 TypeScript，请使用模块来封装完整且独立的功能块并将其保存在一个文件中（除非它变得无法管理）。对于“模块 a”对“模块 b”内部位的访问量要保守。

将所有生成的 JavaScript 捆绑并压缩到一个文件中。

声明你的模块：

```
module MyModule {
    // ...
} 
```

并使用参考使它们可用于其他代码文件：

```
///<reference path="MyModule.ts" /> 
```

## 网络应用

对于 Web 应用程序，您需要决定脚本繁重的内容将是多少。如果事情要轻量级，请将其视为网站。如果您将有很多脚本，那么 AMD 是您的朋友。

使用 AMD，您可以使用文件夹结构来组织您的代码。您的文件是您的模块，因此您无需使用`module MyModule`声明，而是将文件命名为`MyModule.ts`. 然后，您可以使用文件夹和文件结构组织代码并根据需要导入模块：

```
import myModule = module("./Messaging/Async/MyModule"); 
```

所以把 the`import`当作你的`using`陈述——除非你需要给它一个名字。

在运行时，您需要一些东西来为您加载模块。[RequireJS](http://requirejs.org/)是一个流行的选择。

您只需在页面中添加一个脚本标签，它会加载 RequiresJS 并告诉它您的顶级模块的名称：

```
<script data-main="/Messaging/Async/MyModule" src="scripts/require.js"></script> 
```

## 服务器应用

对于服务器应用程序，您几乎肯定会想要使用 CommonJS（例如，默认情况下由 nodejs 支持）。

它的工作原理与 AMD（AMD 实际上基于 CommonJS）非常相似，只是服务器会为您加载模块，因此您不需要包含模块加载脚本。

## 金子弹

这真的是所有的指导。如果您愿意，您可以对非常大的程序使用网站样式捆绑 - 鉴于脚本将被下载一次并被缓存，您可能会认为前期成本值得简单。

因此，请使用该指南，直到您认为它不适合您的特定程序并且想要以不同的方式做事。指导原则是...

1.  减少对网站的 http 请求数
2.  增加 Web 应用程序/服务器应用程序的可读性和可维护性
3.  仅加载 Web 应用程序/服务器应用程序所需的内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:43:39.037

这是相当主观的，但值得我们或多或少地使用模块作为命名空间，因此将相关的类组合在一个文件中，除了在我们的视图模型中，我们或多或少地坚持一个文件 = 一个类，就像我们会对于 C#。

原因之一是在客户端开发中，我们发现自己创建了许多非常小的类和接口（通常每个只有两个或三个参数），通常围绕特定组件或视图的工作进行分组，并将它们整理到单个文件似乎更有意义。

# php - PHP Post PDO Smarty 功能不一样

> ID：13922308
> 
> 赞同：-1
> 
> 时间：2012-12-17T21:14:44.417
> 
> 标签：php, mysql, smarty

有人可以向我解释为什么在将 PDO 合并到我的代码中之后，我称之为 Smarty 的方式发生了变化吗？例如，我收到很多错误，因为 Smarty 在 PDO 后无法正常工作。

有效的 Pre-PDO 示例：

```
{assign var='udatas' value="{$userObj->fetchUser(array('id'=>{$ststres[ststval].to_id}))}"}

 <span class="box-commnt-laps">{insert_time_dif({$ststres[ststval].added_date})} ago</span> 
```

示例 Post-PDO 现在可以工作：

```
{assign var='udatas' value="$userObj->fetchUser(array('id'=>$ststres[ststval].to_id))"}

<span class="box-commnt-laps">{insert_time_dif($ststres[ststval].added_date)} ago</span> 
```

我似乎在网上找不到任何关于我如何使用结构 smarty Post-PDO 的参考资料。您能否指出正确的方向或解释为什么会发生这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:18:41.270

老兄。我对新的 smarty 不太了解，但在旧的 smarty 中是这样的：

```
{assign var='udatas' value=$userObj->fetchUser(array('id'=>{$ststres[ststval].to_id}))} 
```

您不必`"`在分配中增加价值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:04:44.000

正确答案更新：

就是在关联数组之间添加 [] 并像这样删除引号。

```
{assign var='brgdatas' value=$brgObj->fetchOneBrg(['id'=>$ststres[ststval].to_id])} 
```

# c# - 强类型数据集动态更改源

> ID：13922310
> 
> 赞同：0
> 
> 时间：2012-12-17T21:14:51.297
> 
> 标签：c#, ms-access, dynamic, datasource, strongly-typed-dataset

我正在维护一个使用访问数据库的应用程序，我想使用比动态格式化 sql 语句更智能的东西，所以在我有限的选项中，我决定使用强数据集，但我需要更改选项数据源即时使用，因为用户可以更改其指向的数据库，数据库与模式相同，唯一的区别是数据，有没有好的方法呢？我基本上需要忽略配置设置中的内容，并使用用户选择的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:17:54.930

[您可以通过更改此示例](http://msdn.microsoft.com/en-us/library/5ybdbtte%28v=vs.71%29.aspx)中指向数据文件的数据源连接字符串来更改连接字符串

```
public void ConnectToAccess()
{
    System.Data.OleDb.OleDbConnection conn = new 
        System.Data.OleDb.OleDbConnection();
    // TODO: Modify the connection string and include any
    // additional required properties for your database.
    conn.ConnectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;" +
        @"Data source= C:\Documents and Settings\username\" +
        @"My Documents\AccessFile.mdb";
    try
    {
        conn.Open();
        // Insert code to process data.
    }
        catch (Exception ex)
    {
        MessageBox.Show("Failed to connect to data source");
    }
    finally
    {
        conn.Close();
    }
} 
```

# c# - 可以用zxing生成code_128条码图片吗？

> ID：13922314
> 
> 赞同：3
> 
> 时间：2012-12-17T21:15:08.570
> 
> 标签：c#, windows-phone-7, zxing

我一直在摆弄，但似乎无法找到一个好的文档。

可以让ZXing生成CODE_128条码图片吗？如何？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T19:49:45.303

如果您使用的是 ZXing.Net，您可以使用以下代码段进行操作：

```
var content = "123456789012345678";
var writer = new BarcodeWriter
{
   Format = BarcodeFormat.CODE_128
};
var bitmap = writer.Write(content); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-04T16:59:36.200

基于一些研究，这是 MVC 中的一种可能实现：

```
using (MemoryStream memoryStream = new MemoryStream())
       {
           var writer = new BarcodeWriter
           {
                Format = BarcodeFormat.CODE_128
           };
           Bitmap barcodeBitmap;
           var barcode = writer.Write(scan);
           MemoryStream stream = new MemoryStream();
           barcode.Save(memoryStream,ImageFormat.Png);

           ViewBag.OneD = "data:image/png;base64," + Convert.ToBase64String(memoryStream.ToArray());
     } 
```

# ruby - ruby 元编程更好的解决方案

> ID：13922316
> 
> 赞同：-1
> 
> 时间：2012-12-17T21:15:24.870
> 
> 标签：ruby, metaprogramming

如果没有 eval，这将如何工作

```
%w{user_id for_whom_id category_id product_status_id}.each do |f|
  code = <<-C
  it "should fail validation with no #{f}" do
    should_fail_on_validation { |p| p.#{f} = nil }
  end
  C
  eval code
end 
```

?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T21:18:48.510

这应该有效：

```
%w{user_id for_whom_id category_id product_status_id}.each do |f|
  it "should fail validation with no #{f}" do
    should_fail_on_validation { |p| p.public_send "#{f}=", nil }
  end
end 
```

如果可能，最好避免评估。在这种情况下，没有必要。

# objective-c - 滑动手势后如何更改部分标题？

> ID：13922319
> 
> 赞同：0
> 
> 时间：2012-12-17T21:15:38.853
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我有一个由 2 个数组、一个“标题”和一个“描述”组成的表格视图。我设置了 numberOfRowsInSection、numberOfSectionsInTableView 和 titleForHeaderInSection。

我添加了滑动手势识别器，向右滑动，单元配件变为复选标记，向左滑动，配件返回显示指示器。一切正常。

我有 2 个部分标题，一个是完整的，另一个是不完整的。我希望默认情况下所有单元格都处于不完整状态，当向右滑动时，单元格的部分标题将更改为完成，同样如果向左滑动，单元格将恢复为不完整的标题。

我尝试了各种事情，但似乎无法理解它。最初我想添加一个按钮，但这种方式似乎更自然。

任何建议表示赞赏。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:26:38.843

您不想更改该单元格的部分标题，您想将该单元格放在另一个部分（完整或不完整），不是吗？

因此，您必须将该单元格表示的对象放入为您的 tableView 提供的完整或不完整数组中 - 并将其分别从另一个数组中删除。

# c# - 在用户界面中重复用户控件

> ID：13922321
> 
> 赞同：0
> 
> 时间：2012-12-17T21:15:41.800
> 
> 标签：c#, asp.net, controls

我正在使用 ASP.NET Web 窗体，并创建了一个自定义 .ascx 用户控件，它表示具有类型、图片和颜色等属性的汽车。

现在我尝试以重复的方式在用户界面上添加这个自定义控件。假设我在数据库中有 5 辆汽车，那么 5 个用户控件将在 UI 上呈现，最好在 asp 控件内。

我一直在寻找这样的控件，研究网格视图和转发器，但它们似乎只有从“原始”类型构建的对象列表作为数据源，而不是像我的自定义 ascx 控件列表这样的对象。

我的问题是我是否可以以某种方式在 asp 或 html 控件内的重复循环中呈现这些用户控件，从而提供格式化它的选项（支持 css）？（如果是这样，请给我一个例子）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:25:06.837

使用您的用户控件在其中创建 a `ListView`，然后将 a 绑定`List<CarObject>`到该控件`ListView`

```
<asp:ListView ID="listView1" runat="server">
    <ItemTemplate>
        <myUC:MyUserControl ID="myUserControl" runat="server" />
    </ItemTemplate>
</asp:ListView> 
```

将您的对象列表（例如 ）绑定 `List<Car>`到该列表视图，`listView1.DataSource = myListOfCars;`。然后在`ItemDataBound`事件中将您的对象绑定到您的用户控件。

或者，您也可以将用户控件中的标记放在 中`ListView`，然后将信息绑定到`ItemDataBound`事件中，并完全回避整个用户控件问题。这仍然允许您重用标记。

# utf-8 - Mozilla addon-sdk - 如何在 de-DE.properties 中屏蔽元音变音？

> ID：13922322
> 
> 赞同：0
> 
> 时间：2012-12-17T21:15:51.297
> 
> 标签：utf-8, localization, firefox-addon, firefox-addon-sdk

我想以 2 种不同的语言提供我的插件，所以我添加了一个名为“locale”的文件夹，其中包含 en-US.properties 和 de-DE.properties。对于德语变音符号 ä、ö、ü 和字母 ß，我尝试了不同的编码，但都不起作用。有没有办法掩盖它们？
而且，顺便说一句，使用插件面板的html文件中的每个文本节点的数据属性是否会大大减慢插件的速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:16:59.497

有一种可能。

您可以使用：

```
&Auml; = Ä
&Uuml; = Ü
&Ouml; = Ö

&auml; = ä
&uuml; = ü
&ouml; = ö 
```

对于德语 ß（称为 eszett）使用

```
&szlig; = ß 
```

# objective-c - 为什么写入标签会破坏 UIImageView 的调整大小？

> ID：13922325
> 
> 赞同：0
> 
> 时间：2012-12-17T21:16:10.383
> 
> 标签：objective-c, uiimageview

如果我没有连接到文本字段，那么 UIImageView 的调整大小就可以了。如果我写入文本区域，则调整大小失败。我不知道为什么写入文本会对 UIImageView 的调整大小产生不利影响。

```
@interface rjhccViewController ()

@end

@implementation rjhccViewController

-(IBAction)myButtonPress{

UIImage *img = [UIImage imageNamed:@"p.png"];
[testcontainer setImage:img];
[testcontainer setFrame:CGRectMake(0.0,0.0,50.0, 50.0)];
[self labelHeight:img];
}

-(void)labelHeight: (UIImage *) myimage{
//self.heightS.text = [NSString stringWithFormat:@"%d",(int)myimage.size.height];

}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

- (void)viewDidUnload {
[self setHeightS:nil];

[super viewDidUnload];
}
@end 
```

# c# - C# 控制数组作为方法重载

> ID：13922327
> 
> 赞同：0
> 
> 时间：2012-12-17T21:16:27.447
> 
> 标签：c#, arrays, winforms, controls, overloading

在我的程序中，有多个玩家的统计数据可以同时增加。

> 玩家 1 由 staminaTextBox[0] SkillTextBox[0] LuckTexBox[0] 表示
> 
> 玩家 2 由 staminaTextBox[1] SkillTextBox[1] LuckTexBox[1] 表示
> 
> 等等

我需要我的`IncreaseStat`方法来处理 3 种不同类型的文本框过载，例如耐力、技能、运气

```
private void StaminaIncBtn_Click(object sender, EventArgs e)
{
    IncreaseStat(staminaText[0]);
}

private void LuckIncBtn_Click(object sender, EventArgs e)
{
    IncreaseStat(luckText[0]);
}

private void IncreaseStat(TextBox statText)
{
    for (int i = 0; i < 5 ; i++)
    {
        statText[i].Text = "Altered";
    }
} 
```

此方法用于同时增加所有 5 名玩家的统计数据。

如果它们不是控制数组，它可以正常工作，但是我需要它们。我得到错误 `"Cannot apply indexing with [] to an expression of type 'System.Windows.Forms.TextBox"`。它适用于我所说的方法内部的事实`statText[i]`。

我不明白如何解决这个问题。任何建议都会受到欢迎。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:22:19.340

这是否足够（您自己可能会根据需要进行更改）？

```
private void IncreaseStat() {
    foreach (TextBox textBox in this.Controls.OfType<TextBox>().Where(x => x.Name.Contains("stamina") || 
            x.Name.Contains("skill") || 
            x.Name.Contains("Luck"))) {
        textBox.Text = "Altered";
    }
} 
```

# python - 带有xlwt大小写文本的excel列宽

> ID：13922328
> 
> 赞同：-1
> 
> 时间：2012-12-17T21:16:33.840
> 
> 标签：python, xlwt

你好。我正在使用 xlwt 包和 Python 来制作一个写入 excel 文件的应用程序。

我有一个函数可以返回所需的单元格宽度，因此我可以使单元格足够大以适合文本。但是，当我编写大写文本时，我的函数会崩溃，因为它返回的宽度远小于实际文本。

我不知道有什么问题。任何建议将不胜感激。

```
def getWidth(self, num_characters):
    """ Returns the approximate width of a cell. """
    return int((1+num_characters) * 256) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:28:22.243

您使用该`getWidth`功能所做的只是猜测您需要多少空间。您猜测的原因是因为每个字母占用的空间量不同（“iiiiii”占用的空间比“mmmmm”少）。显然，大写字母会占用更多空间。

这个问题有两个简单（但不完美）的修复方法：

1.  增加所有单元格的每个字符的宽度。这意味着修改函数中的值 256。我会说将其增加 50% 可能会解决您的问题。
2.  在插入之前将要插入单元格的所有内容设为小写。

选项 1 的代码与您已经拥有的代码非常相似：

```
def getWidth(self, num_characters):
    """ Returns the approximate width of a cell. """
    return int((1+num_characters) * 384) 
```

选项 2 的代码将涉及`lower`在插入之前调用字符串上的方法。它看起来像这样：

```
my_cell_value = "THIS IS ALL CAPS!"
my_worksheet.write(1,1,my_cell_value.lower()) 
```

# codeigniter - CodeIgniter 2 和 $this-> 的使用

> ID：13922332
> 
> 赞同：1
> 
> 时间：2012-12-17T21:17:09.177
> 
> 标签：codeigniter, variables, codeigniter-2

我正在使用 CodeIgniter 2 并安装了 Ion Auth 以及 CodeIgniter 附带的新闻教程。

在新闻控制器中，页面标题的元素是这样写的......

```
$data['title'] = 'Page Title'; 
```

然而，在 Ion Auth 控制器中，页面标题的元素是这样写的......

```
$this->data['title'] = 'Page Title'; 
```

他们似乎都工作得一样好，所以任何人都可以解释其中的区别吗？也许 Ion Auth 是为旧版本的 CodeIgniter 编写的？有什么实际的理由让我想使用一个而不是另一个？请根据需要链接到来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T01:32:52.840

我想这是作者的偏好。他喜欢使用类属性来存储视图的数据。它允许他跨方法共享它。如果您查看作者的其他项目（来源[1](https://github.com/benedmunds/CodeIgniter-Standard-Project/blob/master/application/controllers/auth.php#L42)、[2](https://github.com/benedmunds/CodeIgniter-Standard-Project/blob/master/application/core/MY_Controller.php#L39)、[3](https://github.com/benedmunds/CodeIgniter-MY_Controller/blob/master/MY_Controller.php#L49)），您可以看到两个示例（来源 1 和 2 一起使用）。

附带说明一下，对于您的项目，这可以让您`Auth`使用更多视图数据扩展控制器。

```
class MY_Auth extends Auth {

    function __construct()
    {
        parent::__construct();
    }

    function index()
    {
        $this->data['foo'] = 'bar';
        parent::index();
    }
} 
```

这将允许您将`$foo`变量用于身份验证视图。（`/auth/index`在这种情况下。）

在我自己的项目中，我喜欢为我的视图数据使用受保护的属性。它确实比局部变量给你更多的自由。您不需要一直将视图的数据作为参数传递，之后您可以轻松地扩展您的控制器。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T05:04:46.960

如果你打算使用这个 $this->data 这意味着你可以通过类方法访问 $this->data。另一方面，如果您使用 $data 它仅适用于当前范围或方法，并且如果您在其他地方需要数据，则必须将其作为参数传递给其他方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T21:49:59.290

在数据变量上添加 $this，使其可以通过类访问。

我相信 $data 或 $this->data**仅**用于“查看”。它将从“控制器”传递到“视图”，因此我们可以通过“视图”访问该变量。

因此，“视图”方面不会有任何差异。

# php - 如何获取域上的所有网页

> ID：13922335
> 
> 赞同：2
> 
> 时间：2012-12-17T21:17:24.493
> 
> 标签：php, dns, subdomain, web-crawler

我正在制作一个简单的*网络蜘蛛*，我想知道是否有一种方法可以在我的 PHP 代码中触发，我可以获取域上的所有网页......

例如，假设我想获取 Stackoverflow.com 上的所有网页。这意味着它将获得： [https :](https://stackoverflow.com/questions/ask) [//stackoverflow.com/questions/ask 从成人网站拉网页——如何通过网站协议？](https://stackoverflow.com/questions/1903214/) [https://stackoverflow.com/questions/1234214/](https://stackoverflow.com/questions/1234214/) [最佳 Rails HTML 解析器](https://stackoverflow.com/questions/395261/best-rails-html-parser?rq=1)

和所有的链接。我怎么能得到那个。或者是否有一个**API**或**DIRECTORY**可以让我得到它？

还有一种方法可以获得所有**子域**吗？

顺便说一句，爬虫如何爬取没有[SiteMaps](http://en.wikipedia.org/wiki/Sitemaps)或[Syndication feeds](http://en.wikipedia.org/wiki/Syndication_feed)的网站？

干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T21:21:41.343

如果某个站点希望您能够做到这一点，他们可能会提供一个[站点地图](http://en.wikipedia.org/wiki/Sitemaps)。使用站点地图和页面上的链接的组合，您应该能够遍历站点上的所有页面 - 但这实际上取决于站点的所有者，以及他们如何访问它。

如果该站点不*希望*您这样做，则您无能为力。HTTP 不提供任何标准机制来列出目录的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:20:54.143

抱歉，您需要破解服务器。

您可以做的是，如果您拥有域 www.my-domain.com，您可以在其中放置一个 PHP 文件，用作按需请求文件。您需要在该 php 文件中编写某种代码，以便查看文件夹 FTP Wise。PHP 可以连接到 FTP 服务器，所以这是一种方法:)

[http://dk1.php.net/manual/en/book.ftp.php](http://dk1.php.net/manual/en/book.ftp.php)

您可以使用 PHP 读取 dirs 文件夹并将其作为数组返回。我能做到的最好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T21:30:26.190

正如您所说，您必须遵循所有链接。

为此，您必须首先检索 stackoverflow.com，简单：`file_get_contents ("http:\\stackoverflow.com")`。

然后解析它的内容，寻找链接：`<a href="question/ask">`，没那么容易。

您将这些新 URL 存储在数据库中，然后解析那些之后，这将为您提供一组全新的 URL，解析这些。很快，您将拥有该网站的绝大多数内容，包括 sub1.stackoverflow.com 之类的内容。这称为爬取，实现起来非常简单，尽管一旦拥有所有数据后检索有用信息就不是那么简单了。

如果您只对某个特定域感兴趣，请务必关闭指向外部站点的链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T21:32:13.633

不，不是你问的方式。

但是，只要您有明确的目标，您就可以：

*   使用“主要”请求来获取感兴趣的对象。一些站点提供 JSON、XML、... api 来列出此类对象（例如，SO 可以通过这种方式列出问题）。然后使用“每个对象”请求来获取特定于一个对象的信息

*   从其他开放（或付费）来源获取信息，例如搜索引擎、目录、“取证”工具（如 SpyOnWeb）

*   对站点的结构进行反向工程，例如，您知道这`/item/<id>`会将您带到 ID 为的项目页面`<id>`

*   问站长

请注意，其中一些解决方案可能违反了网站的使用条款。无论如何，这些只是我头顶上的指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T21:48:40.763

您可以使用[WinHTTPTack](http://www.httrack.com) /。但不要敲别人的网站是一种礼貌。

我只是用它来查找损坏的链接并进行快照。

如果您确实开始打击其他人的网站，他们将采取措施。其中一些不会很好（即锤你的）。

只要有礼貌。

# objective-c - iOS 使用 navigationController popToRootViewControllerAnimated

> ID：13922336
> 
> 赞同：0
> 
> 时间：2012-12-17T21:17:38.533
> 
> 标签：objective-c, ios, uinavigationcontroller, ios6

当我尝试使用`popToRootViewControllerAnimated`方法时，我的屏幕变黑了。我想我真的回到了预期的视图，因为如果我将设备旋转到横向，视图就会正确显示。

这是我的应用程序的上下文：

视图控制器 A 嵌套在导航控制器中。单击一个按钮会触发到 viewcontroller B 的 segue。在 viewcontroller B 的 viewDidLoad 方法中，会创建一个连接助手，以便在我们的服务器数据库上收集一些数据。在创建时，助手正在检查设备是否连接到互联网。如果不是，则调用“ **popToRootViewControllerAnimated** ”返回视图控制器 A。

这是助手的代码：

```
 +(AFHTTPClient*) getClient {
    if (!client) {
        [self createClient];
    }

    if (client.networkReachabilityStatus <AFNetworkReachabilityStatusReachableViaWWAN) {

        [currentController.navigationController popToRootViewControllerAnimated:YES];
        //[[[UIAlertView alloc] initWithTitle:@"Connection Problem" message:@"You don't seem to be connected to internet. Please enable WI-Fi or 3G then try again." delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil] show];
           client = nil;
    }
    return client;
}

+(void) createClient{
    NSURL* baseUrl = [NSURL URLWithString:[[@"http://" stringByAppendingString:[ApplicationTask GetApiUrl]] stringByAppendingString:@"/"]];
    client = [AFHTTPClient clientWithBaseURL:baseUrl];
    client.parameterEncoding = AFJSONParameterEncoding;
    [client registerHTTPOperationClass:[AFJSONRequestOperation class]];
    [client setDefaultHeader:@"Accept" value:@"application/json"];
    [client setDefaultHeader:@"Content-Type" value:@"application/json"];
} 
```

一旦调用了“popToRootViewControllerAnimated”方法，我就可以看到控制器 A 的视图正在滑动并出现黑屏。

正如我之前提到的，感觉就像我被带回了视图控制器 A（将设备从纵向旋转到横向显示视图），但视图看起来像是在屏幕框架之外。

希望我把一切都说清楚了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:39:04.023

正如我在评论中提到的，在 viewDidAppear 方法中弹出到根控制器似乎可以解决问题。

# java - 用于移动客户端的 RESTful Java Web 服务中的身份验证

> ID：13922337
> 
> 赞同：4
> 
> 时间：2012-12-17T21:17:39.360
> 
> 标签：java, web-services, rest, authentication, grails

我已经找到了很多关于这个问题的学术答案，但我想从该领域的从业者那里得到一个答案。

### 背景

我想创建一个基于 Java 的 RESTful API，使用 Grails 框架为各种移动客户端（iOS 和 Android）通过我的服务访问受保护的资源。我需要对某些请求进行身份验证，并且我已经通过网络设置了 SSL（因此所有请求都通过 https 进行）。我的 Web API 最终将作为服务公开给其他 Web 应用程序。

### 问题

**对于将由移动设备以及最终其他 Web 应用程序使用的 Web 服务，人们推荐哪种身份验证方法？**

这些是我认为我的选择。你能告诉我什么时候适合每个用例吗？

1.  我可以进行 HTTP 基本身份验证
2.  我可以做 HTTP Digest 认证
3.  我可以实现 OAuth 身份验证（1.0 或 2.0）吗？
4.  我可以在我的请求中将凭据作为参数传递
5.  我可以使用上面的身份验证方法，然后传递一个委托/令牌进行身份验证
6.  我可以实现自己的自定义 HTTP 身份验证标头
7.  我可以使用 cookie 并在每个请求上将它们传递给服务器
8.  其他...？

### 需要

如果你有一种或另一种倾向，我想知道你为什么会选择那种方法。更好的是，如果您在 Grails 中执行此操作，我会非常感兴趣。

### 我已经知道...

我已经阅读了[这里](https://stackoverflow.com/questions/319530/restful-authentication)的优秀答案以及 Richardson 和 Ruby 的书[Restful Web Services](http://shop.oreilly.com/product/9780596529260.do)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:29:08.673

REST 是无状态协议，因此使用“工作会话”——我的意思是登录/工作/（自动）注销的概念有些问题。由于其简单性，将凭证作为每个请求的参数发送似乎是最常用的方法。请记住，

1) api url 必须仅是 SSL - 使用专用域和 IP 地址是有意义的，例如 api.example.com 并将您的 Web 服务器配置为仅处理此地址和域的 SSL。只是为了避免意外泄露凭据。

2) 尽可能避免在请求中使用登录名/密码，而是使用“API 密钥”（共享密钥）。*如果您只需要身份验证*，您总是可以使用“API 密钥”而不是登录名/密码，也就是说您不需要*授权*（所有用户共享相同的权限）并且不需要记录（谁做了什么）。

3) 与其在每个请求中发送 API 密钥，不如使用共享密钥“签名”请求并提供签名。使用足够长的密钥，您可以在普通未加密的 http 上使用此技术。

=== 回复评论 ===

如果您需要授权，只需使用基本身份验证：

```
HTTPBuilder builder = new HTTPBuilder("https://api.example.com/v1/foo/bar")
builder.auth.basic(login, password)
builder.headers.put('Accept', 'application/json')
def result = builder.request(POST, JSON) { req ->
     body = [
                ....
            ]

     response.'201' = { resp, json ->
                ....
     }

     response.success = { resp, json ->
                ....
     }

     response.failure = { resp ->
                log.error "failure, ${resp.statusLine}"
     }
} 
```

# c# - 如何从 MemoryStream 打开一个 zip 文件

> ID：13922342
> 
> 赞同：0
> 
> 时间：2012-12-17T21:18:03.283
> 
> 标签：c#, dotnetzip

我正在使用 DotNetZip。

我需要做的是用来自服务器的文件打开一个 zip 文件。然后，用户可以抓取文件并将其本地存储在他们的机器上。

我之前的做法如下：

```
 string path = "Q:\\ZipFiles\\zip" + npnum + ".zip";
      zip.Save(path);
      Process.Start(path); 
```

请注意，Q: 是服务器上的一个驱动器。使用 Process.Start，它只需打开 zip 文件，以便用户可以访问所有文件。我喜欢这样做，但不将文件存储在磁盘上，而是从内存中显示。

现在，我不想将 zip 文件存储在服务器上，而是使用 MemoryStream 打开它

我有以下但似乎不起作用

```
 var ms = new MemoryStream();
      zip.Save(ms); 
```

但不确定如何进一步从内存流中打开 zip 文件，以便用户可以访问所有文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:03:53.213

这是我编写的一段实时代码（逐字复制），用于将一系列博客文章下载为压缩的 csv 文件。它是实时的并且有效。

```
public ActionResult L2CSV()
{
    var posts = _dataItemService.SelectStuff();
    string csv = CSV.IEnumerableToCSV(posts);
    // These first two lines simply get our required data as a long csv string
    var fileData = Zip.CreateZip("LogPosts.csv", System.Text.Encoding.UTF8.GetBytes(csv));
    var cd = new System.Net.Mime.ContentDisposition
    {
        FileName = "LogPosts.zip",
        // always prompt the user for downloading, set to true if you want 
        // the browser to try to show the file inline
        Inline = false,
    };
    Response.AppendHeader("Content-Disposition", cd.ToString());
    return File(fileData, "application/octet-stream");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:25:21.357

您可以使用：

```
zip.Save(ms);

// Set read point to beginning of stream
ms.Position = 0;

ZipFile newZip = ZipFile.Read(ms); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T21:25:51.050

请参阅**使用从流中获取的内容创建 zip**[的文档](http://dotnetzip.codeplex.com/wikipage?title=CS-Examples&referringTitle=Examples)。

 **```
 using (ZipFile zip = new ZipFile())
  {
    ZipEntry e= zip.AddEntry("Content-From-Stream.bin", "basedirectory", StreamToRead);
    e.Comment = "The content for entry in the zip file was obtained from a stream";
    zip.AddFile("Readme.txt");
    zip.Save(zipFileToCreate);
  } 
```

保存后就可以正常打开了。**

# mysql - 如何对一小部分有限的可能值进行非规范化/直方图 mysql 输出？

> ID：13922346
> 
> 赞同：1
> 
> 时间：2012-12-17T21:18:19.663
> 
> 标签：mysql

假设我有这张表，假设用户（“投票者”）对各种对象（例如地点、网站、答案等，“投票者”）的评分介于 1 到 5 星之间（“分数”）。这个问题的更通用版本询问如何为一对 N foos 做什么。

```
mysql> SHOW CREATE TABLE scores;
CREATE TABLE `scores` (
    `voter_id` BIGINT NOT NULL DEFAULT '0',
    `votee_id` BIGINT NOT NULL DEFAULT '0',
    `score` tinyint NOT NULL,
    PRIMARY KEY (`voter_id`,`votee_id`),
    KEY `votee_index` (`votee_id`)
); 
```

我想为每个被投票者对象构建一个 .csv 文件，其中的列表示该对象已获得的一星、二星、三星、四星和五星票的数量，例如

```
output.csv:
votee_id, count_ones, count_twos, count_threes, count_fours, count_fives
1, 3, 7, 5, 3, 2
... 
```

我知道我可以使用以下查询获取原始数据来支持此表：

```
SELECT votee_id, score, COUNT(score)
FROM scores
GROUP BY votee_id, score; 
```

这并没有给我我想要的 csv 格式的数据：

1.  对于给定对象未看到的分数，它不会列出 0。

2.  它不会将对象的所有五个分数组合成一行/行（即，对数据进行非规范化/直方图）。

我想只使用 mysql 创建输出。

在闲逛了一段时间后，我有以下查询，它有效；但它的效率很低，我找不到/做任何更优雅的东西：

```
SELECT votee_id, GROUP_CONCAT(COALESCE(score_count, '0') ORDER BY AllUserCrossScore.score ASC)
FROM
    (SELECT votee_id, score FROM
        (SELECT 1 AS score UNION ALL
         SELECT 2 AS score UNION ALL
         SELECT 3 AS score UNION ALL
         SELECT 4 AS score UNION ALL
         SELECT 5 AS score) ScoresEnum

         JOIN

         (SELECT DISTINCT votee_id FROM scores) DistinctIds
    ) AllUserCrossScore

    LEFT JOIN

    (SELECT votee_id, score, COUNT(score) as score_count
     FROM scores
     GROUP BY votee_id, score
    ) ScoreCounts

    USING (votee_id, score)
GROUP BY votee_id; 
```

特别是，这感觉特别 hacky，因为我使用 GROUP_CONCAT 和 ',' 将分数放在一起；然后在其他地方摆弄让mysql也用'，'加入所有其他字段，从而为.csv产生正确的格式（摆弄未显示）。

在这种情况下，我怎样才能做得更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:23:19.270

我想你正在寻找这样的东西：

```
SELECT
  votee_id
  SUM(CASE WHEN score = 1 THEN 1 ELSE 0 END) as count_ones
  SUM(CASE WHEN score = 2 THEN 1 ELSE 0 END) as count_twos
  SUM(CASE WHEN score = 3 THEN 1 ELSE 0 END) as count_threes
  SUM(CASE WHEN score = 4 THEN 1 ELSE 0 END) as count_fours
  SUM(CASE WHEN score = 5 THEN 1 ELSE 0 END) as count_fives
FROM scores
GROUP BY votee_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:24:13.777

包装您的原始 SQL！

```
SELECT
  votee_id AS votee_id,
  SUM(IF(score=1,count_score,0)) AS count_ones,
  SUM(IF(score=2,count_score,0)) AS count_twos,
  SUM(IF(score=3,count_score,0)) AS count_threes,
  SUM(IF(score=4,count_score,0)) AS count_fours,
  SUM(IF(score=5,count_score,0)) AS count_fives
FROM (
  SELECT votee_id, score, COUNT(score) as count_score
  FROM scores
  GROUP BY votee_id, score
) AS baseview
GROUP BY votee_id; 
```

# jquery - iPad 上的 JQuery PrettyPhoto 问题

> ID：13922350
> 
> 赞同：2
> 
> 时间：2012-12-17T21:18:40.817
> 
> 标签：jquery, prettyphoto

我在我的网站上使用 PrettyPhoto 插件，它适用于所有主要浏览器。问题是当我在 iPad 上看到它时，它没有覆盖整个屏幕，并且图像框也没有显示在屏幕中央。以下是该插件的演示站点：

[http://www.davidjuth.com/jquery-slideshow-prettyPhoto.aspx](http://www.davidjuth.com/jquery-slideshow-prettyPhoto.aspx)

您可以使用以下 iPad 模拟器来查看问题：

[http://ipadpeek.com/](http://ipadpeek.com/)

尝试在上面的模拟器中打开演示站点，当页面加载时，向右滚动然后查看覆盖大小和图像框位置。

在这方面的任何帮助将不胜感激。

# c# - MVVM - 验证视图模型内的属性

> ID：13922356
> 
> 赞同：0
> 
> 时间：2012-12-17T21:18:58.760
> 
> 标签：c#, silverlight, xaml, mvvm

我试图让自定义验证在视图模型中为我的属性工作，尽管它似乎没有达到我在验证逻辑中的断点。我正在使用我之前进行的另一个验证（我在我的模型中使用它并且它有效）来尝试输入验证逻辑，以便我可以根据我的需要对其进行自定义

**验证：**

```
 [Required]
    [CustomValidation(typeof(CardRangeValidator), "CrossValidateFirstWithLast")] 
```

**财产：**

```
 public const string ExpiresOnPropertyName = "ExpiresOn";

    private DateTime? expiresOn = DateTime.Today.AddYears(1);

    /// <summary>
    /// Gets the ExpiresOn property.
    /// TODO Update documentation:
    /// Changes to that property's value raise the PropertyChanged event. 
    /// This property's value is broadcasted by the Messenger's default instance when it changes.
    /// </summary>
    public DateTime? ExpiresOn
    {
        get
        {
            return expiresOn;
        }

        set
        {
            if (expiresOn == value)
            {
                return;
            }

            expiresOn = value;

            RaisePropertyChanged(ExpiresOnPropertyName);
        }
    } 
```

**验证逻辑：**

```
using System.ComponentModel.DataAnnotations;

namespace Fsc.Feenics.Clients.Silverlight2.Web.Models.Shared
{
public class CardRangeValidator
{
    public static ValidationResult CrossValidateFirstWithLast(int number,     ValidationContext context)
    {
        var cardRangeInfo = context.ObjectInstance as CardRangeInfo;
        if (cardRangeInfo == null) return ValidationResult.Success;
        return ValidateFirstLessThanLast(number, cardRangeInfo.Last);
    }

    public static ValidationResult CrossValidateLastWithFirst(int number, ValidationContext context)
    {
        var cardRangeInfo = context.ObjectInstance as CardRangeInfo;
        if (cardRangeInfo == null) return ValidationResult.Success;
        return ValidateFirstLessThanLast(cardRangeInfo.First, number);
    }

    private static ValidationResult ValidateFirstLessThanLast(int firstNumber, int lastNumber)
    {
        return firstNumber <= lastNumber ? ValidationResult.Success : new ValidationResult("First number in range must be less than or equal to last number in range", new string[] { "First", "Last" });
    }
}
} 
```

# html - 为什么下面的 H3 标签不浮动？

> ID：13922358
> 
> 赞同：0
> 
> 时间：2012-12-17T21:19:03.783
> 
> 标签：html, css

以下 JS Fiddle 演示了我的问题：http: [//jsfiddle.net/pUBuq/](http://jsfiddle.net/pUBuq/)

将鼠标悬停在菜单上时，我希望菜单显示如下：

```
Header A    Header B
--------    ---------
Link 1A     Link 1B
Link 2A     Link 2B 
```

相反，它显示如下：

```
Header A
Header B
Link 1A
Link 2A
Link 1B
Link 2B 
```

这是标记：

```
<ul id="site-nav">  
    <li>
        <a class="menu" href="#">Menu 1</a>
        <div class="site-nav-menu">
            <nav>
                <h3>Header A</h3>
                <h3>Header B</h3>
                <ul>
                    <li><a href="#">Link 1a</a></li>
                    <li><a href="#">Link 2a</a></li>
                </ul>
                <ul>
                    <li><a href="#">Link 1b</a></li>
                    <li><a href="#">Link 2b</a></li>
                </ul>
            </nav>
        </div>
    </li>  
</ul> 
```

我试图浮动`<h3>`标题并赋予它们与链接元素相同的宽度，但似乎没有任何东西浮动。CSS 有点长，可能最好在小提琴中查看：http: [//jsfiddle.net/pUBuq/](http://jsfiddle.net/pUBuq/)

我一直在 FF7 中对此进行测试，非常感谢任何帮助找出我哪里出错的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:30:42.027

如果只是阅读标记（例如搜索爬虫如何查看网站），则将 s 放在 s 中会更清晰`h3`一些。`ul`

[jsfiddle 示例](http://jsfiddle.net/pUBuq/1/)

设置相邻的标题/链接水平设置`nav`元素的宽度（`width:484px`在上面的 js fiddle 中使用的完全适合两个菜单列表）

在您的示例中，`a`and`h3`设置为，`220px`但导航具​​有自动宽度，并且它的父 div 是绝对定位的（这意味着除非设置了宽度，否则它只会与其内容一样宽）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:33:55.967

你的`<h3>`元素太宽了。

如果您将其中一个父元素的宽度设置为大约 550 像素（220 + 220 + 我认为是我没有碰巧看到的边距/填充），或者使`<h3>`s 明显更小（我刚刚剪掉了一个你设置的宽度中的数字，只是为了看看），你会发现它们确实如此，实际上是浮动的。

请记住，当浮动事物时，子宽度 + 边距 + 填充 + 子边框必须小于或等于父元素才能使事物出现在同一行上。

# java - 使用 Java RMI 返回一个字符串

> ID：13922359
> 
> 赞同：-1
> 
> 时间：2012-12-17T21:19:04.950
> 
> 标签：java, rmi

最近我再次开始使用 Java，但我对 RMI 很执着。我已经设法让它与一个无效的函数一起工作，但它似乎无法通过网络返回一个字符串。

有谁知道我做错了什么？

主.java：

```
package RMI;

import java.rmi.RemoteException;
import java.rmi.server.UnicastRemoteObject;
import java.util.Random;

public class Main extends UnicastRemoteObject implements Main_Interface {
    private Random random;
    private boolean coin = false;

    public Main() throws RemoteException { ; }

    public String flipCoin() throws RemoteException {
        coin = random.nextBoolean();

        if(coin) {
            System.out.println("Throwing Head");
            return "Head";
        } else {
            System.out.println("Throwing Tail");
            return "Tail";
        }
    }

    public void test() throws RemoteException {
        System.out.println("Test succesful");
    }
} 
```

Main_Interface.java：

```
package RMI;

import java.rmi.Remote;
import java.rmi.RemoteException;

public interface Main_Interface extends Remote {
    String flipCoin() throws RemoteException;
    void test() throws RemoteException;
} 
```

Client.java（从不重要的代码中剥离）：

```
package Client;

import RMI.Main_Interface;
import java.io.*;
import java.net.InetAddress;
import java.rmi.Naming;
import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;

public class Client {
    public static void main(String[] args) {
        String          line    = null;
        boolean         coin    = false;
        Main_Interface  conn    = null;

        try {
            String location = InetAddress.getLocalHost().getHostName();
            Registry myRegistry = LocateRegistry.getRegistry(location, 1099);
            conn = (Main_Interface) myRegistry.lookup("ISA");
            //conn = (Main_Interface) Naming.lookup("ISA");
        } catch (Exception e) {
            System.out.println("Server could not be found at "+location);
            System.exit(0);
        }

        try {
            conn.test()
            System.out.println("Here");
            if(conn.flipCoin().equals("Head")){
                System.out.println("Succes");
            }
            System.out.println("Here");
            if(coin) {
                System.out.println("Throwed Head");
            } else {
                System.out.println("Throwed Tail");
            }
        } catch (Exception e) {
            System.out.println("Could not execute the command...");
        }
    }
} 
```

正如您可能猜到的，test() 函数将完美执行，但 flipCoin() 函数将抛出异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T21:33:43.303

究竟抛出了什么样的异常？

如果它是 NullPointerException: 你永远不会`random`在你的`Main`类中初始化。把类似的东西`random = new Random();`放在你的构造函数中

# sql - 在现有表中添加具有主键的列

> ID：13922360
> 
> 赞同：21
> 
> 时间：2012-12-17T21:19:07.107
> 
> 标签：sql, database, sql-server-2008, primary-key

我正在尝试将主键添加到现有表名中新添加的列`Product_Details`。

添加了新列`Product_Detail_ID`：（`int`和`not null`）

我正在尝试添加主键`Product_Detail_ID`（请注意：此表没有分配其他主键或外键）

我正在尝试使用此查询，但出现错误。

```
ALTER TABLE Product_Details
ADD CONSTRAINT pk_Product_Detils_Product_Detail_ID PRIMARY KEY(Product_Detail_ID)
GO 
```

错误：

> *该`CREATE UNIQUE INDEX`语句终止，因为为对象名称`'dbo.Product\_Details'`和索引名称找到了重复的键`'pk\_Product\_Detils'`。重复键值为 (0)。*

我在这里错过了什么吗？我正在使用 SQL Server 2008 R2。我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-17T21:26:49.797

如果您希望 SQL Server 自动为新列提供值，请将其设为标识。

```
ALTER TABLE Product_Details DROP COLUMN Product_Detail_ID
GO
ALTER TABLE Product_Details ADD Product_Detail_ID int identity(1,1) not null
GO
ALTER TABLE Product_Details
add CONSTRAINT pk_Product_Detils_Product_Detail_ID primary key(Product_Detail_ID)
GO 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-27T20:30:15.503

在 mysql 中，我可以通过以下查询来实现

`ALTER TABLE table_name ADD new_column int NOT NULL AUTO_INCREMENT primary key`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T21:27:14.593

您收到错误是因为您有未满足约束的现有数据。

有两种方法可以修复它：

*   在添加约束之前清理现有数据
*   使用“WITH NOCHECK”选项添加约束，这将停止 sql server 检查现有数据，只检查新数据

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-11T09:30:07.347

```
ALTER TABLE Jaya 
  ADD CONSTRAINT no primary key(No); 
```

这`Jaya`是表名，

`no`是列名，

`ADD CONSTRAINT`我们是给主键关键字吗

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-16T07:20:23.253

#### 将主键添加到*第一个位置*

```
ALTER TABLE table_name 
ADD column_name INT PRIMARY KEY AUTO_INCREMENT FIRST; 
```

参考：[堆栈溢出](https://stackoverflow.com/a/31093217/10204932)| [网络技术](https://www.techonthenet.com/mysql/tables/alter_table.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-05T06:37:32.753

如果您想在现有表中添加一个新列，例如 deptId，那么您可以使用下面的代码来完成。

```
ALTER TABLE department ADD COLUMN deptID INT; 
```

它将创建名为 deptID 的新列。

现在，如果您想在创建新列的同时添加约束，那么您可以使用下面的代码来完成。在下面的代码中，我将主键添加为约束。您也可以添加另一个约束来代替主键，例如外键、默认值等。

```
ALTER TABLE department ADD COLUMN deptID INT NOT NULL ADD CONSTRAINT PRIMARY KEY(deptID); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-08-30T08:14:31.480

ķ。好友命令：sql> alter table tablename add primary key(col_name);

例如：更改表 pk_Product_Detils 添加主键（Product_Detail_ID）；

# java - Java 泛型列表返回类型

> ID：13922370
> 
> 赞同：4
> 
> 时间：2012-12-17T21:20:16.997
> 
> 标签：java, generics, generic-list

我在返回通用列表的方法时遇到了一些问题。代码基本上是这样的：

```
public class MyClass{
    private List<MyListElement> myList = new ArrayList<MyListElement>();

    public <E> List<E> getGenericList(){
        return new ArrayList<E>();
    }

    public void thisWorks(){
        List<MyListElement> newList = getGenericList();
        myList.addAll(newList);
    }

    public void thisDoesntWork(){
        myList.addAll(getGenericList());
    }

    public void thisDoesntWorkEither(){
        for(MyListElement elem : getGenericList()){
            fiddle();
        }
    }
} 
```

为什么该`thisDoesntWork()`方法不起作用，是否有任何其他方法可以解决它（除了`thisWorks()`以并不总是实用的方式进行操作）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T21:26:11.073

编译器无法推断为`<E>`中的泛型方法`getGenericList()`的类型参数选择什么类型`thisDoesntWork()`。

在这种情况下，您需要通过调用显式声明类型参数的类型`<MyListElement>getGenericList()`

或者，您可以更改签名`getGenericList()`以接受`Class<E>`参数。`getGenericList(MyListElement.class)`然后你会同时调用`thisWorks()`and `thisDoesntWork()`。诚然，这有点冗长，但对于您的方法的客户来说肯定更直观。

作为一般规则，我想说的是，尝试使泛型方法的类型参数可以从该方法的参数中推断出来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T21:25:34.023

你可以`thisDoesntWork()`这样改变：

```
 public void thisDoesntWork(){ // well, it works now
      myList.addAll(this.<String>getGenericList());
  } 
```

您需要告诉编译器`getGenericList()`正在处理什么类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-17T21:46:26.087

泛型方法的类型参数`<E> getGenericsList()`可以在调用时传递：

```
this.<String>getGenericsList() 
```

否则编译器会尽力从上下文中推断出来。当您将返回的对象分配给`List<String>`引用时，编译器因此推断您`String`作为类型*参数*传递。

给定[列表 API](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)：

```
List<E> {
  void addAll(Collection<? extends E> c);
} 
```

编译器似乎无法推断出正确的类型，老实说我不知道​​这是因为它不够聪明，还是因为它不想通过设计*承担责任。*

我什至做了一个测试，看看问题是否出在通配符上，或者是否`addAll()`无法从参数化类型推断类型参数，但似乎没有任何效果：

```
public class GenericsList {

    public static void main(String[] args) {
        // same signature as Java API
        List<String> base = new List<String>();
        base.addAll(GenericsList.getList()); // ERROR!

        // addAll() doesn't use a wildcard
        List2<String> base2 = new List2<String>();
        base2.addAll(getList2()); // ERROR!

        // what about a generic method?
        addAll(base, getList()); // ERROR!
    }

    static <E> List<E> getList() {
        return new List<E>();
    }

    static <E> void addAll(List<E> src, List<E> other) {}

    static <E> List2<E> getList2() {
        return new List2<E>();
    }

    static class List<E> {
        void addAll(List<? extends E> other) {}
    }

    static class List2<E> {
        void addAll(List2<E> other) {}
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T07:06:15.440

此代码将为您工作。 `getGenericList()`应该知道它返回的是什么，并且应该与您的列表类型兼容。

**您无需将其转换为 String 或其他人建议的任何其他内容，因为它将通过将其绑定到字符串类型来限制您的 getGenericList 方法意图。**

```
public class MyClass{
    private List<MyListElement> myList = new ArrayList<MyListElement>();

    public <E extends MyListElement> List<E> getGenericList(){
        return new ArrayList<E>();
    }

    public void thisWorks(){
        List<MyListElement> newList = getGenericList();
        myList.addAll(newList);
    }

    public void thisDoesntWork(){
        myList.addAll(getGenericList());
    }

    public void thisDoesntWorkEither(){
        for(MyListElement elem : getGenericList()){
            fiddle();
        }
    }
} 
```

# visual-studio - 在 Visual Studio 2012 中通过 Windows 窗体设计器使用新的 Async/Await 模式

> ID：13922371
> 
> 赞同：14
> 
> 时间：2012-12-17T21:20:22.753
> 
> 标签：visual-studio

我正在尝试在 Visual Studio 2012 中使用新的 Async/Await 模式实现异步调用。当我设置我的表单（使用表单设计器）然后尝试使用异步方法作为事件处理程序时，编译器抱怨函数不返回 void。

该方法应该返回一个任务；这就是重点。我不知道如何告诉表单设计者这不是一个常规的事件处理程序。有没有人遇到过这个问题？我应该放弃使用表单设计器进行快速开发吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-17T21:27:41.297

您必须使用`async void`事件处理程序的方法，而不是`async Task`. 能够将事件处理程序连接到异步方法`async void`是允许的全部原因。

例如，如果你想使用一个按钮点击处理程序，你可以这样写：

```
private async void button_Click(object sender, EventArgs e)
{
     bool success = await CallSomeMethodAsync();
     if (success)
     {
          // Do something here, etc...
     }
} 
```

# jaxb - JAXB 问题 - 意外元素

> ID：13922375
> 
> 赞同：1
> 
> 时间：2012-12-17T21:20:28.373
> 
> 标签：jaxb, jboss5.x

我的 JAXB 解析器今天突然停止工作。它工作了几个星期。我收到以下消息。我已经好几个星期没有更改此代码了。想知道这个设置好不好。

* * *

编辑2：请有人帮助我！我想不通。

* * *

* * *

编辑 1：我运行下面相同代码的验收测试工作正常。我相信这是一个类加载问题。我在 JDK 中使用 JAXB 和 StAX。但是，当我部署到 jboss 5.1 时，出现以下错误。使用 1.6.0_26（本地）和 1.6.0_30（开发服务器）。仍然对解决方案感到困惑。

* * *

> 意外元素（uri：“”，本地：“lineEquipmentRecord”）。预期元素为 <{}switchType>、<{}leSwitchId>、<{}nodeAddress>、<{}leId>、<{}telephoneSuffix>、<{}leFormatCode>、<{}groupIdentifier>、<{}telephoneNpa> ,<{}telephoneLine>,<{}telephoneNxx>

这是我的解组类：

```
import java.io.InputStream;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.NoSuchElementException;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Unmarshaller;
import javax.xml.bind.ValidationEvent;
import javax.xml.bind.ValidationEventHandler;
import javax.xml.stream.FactoryConfigurationError;
import javax.xml.stream.XMLInputFactory;
import javax.xml.stream.XMLStreamConstants;
import javax.xml.stream.XMLStreamException;
import javax.xml.stream.XMLStreamReader;

public class PartialUnmarshaller<T> {
    XMLStreamReader reader;
    Class<T> clazz;
    Unmarshaller unmarshaller;

    public PartialUnmarshaller(InputStream stream, Class<T> clazz) throws XMLStreamException, FactoryConfigurationError, JAXBException {
        this.clazz = clazz;
        this.unmarshaller = JAXBContext.newInstance(clazz).createUnmarshaller();
        unmarshaller.setEventHandler(new ValidationEventHandler() {

            @Override
            public boolean handleEvent(ValidationEvent event) {
                System.out.println(event.getMessage());
                return true;
            }
        });
        this.reader = XMLInputFactory.newInstance().createXMLStreamReader(stream);

        /* ignore headers */
        skipElements(XMLStreamConstants.START_DOCUMENT);
        /* ignore root element */
        reader.nextTag();
        /* if there's no tag, ignore root element's end */
        skipElements(XMLStreamConstants.END_ELEMENT);
    }

    public T next() throws XMLStreamException, JAXBException {
        if (!hasNext())
            throw new NoSuchElementException();

        T value = unmarshaller.unmarshal(reader, clazz).getValue();

        skipElements(XMLStreamConstants.CHARACTERS, XMLStreamConstants.END_ELEMENT);
        return value;
    }

    public boolean hasNext() throws XMLStreamException {
        return reader.hasNext();
    }

    public void close() throws XMLStreamException {
        reader.close();
    }

    private void skipElements(Integer... elements) throws XMLStreamException {
        int eventType = reader.getEventType();

        List<Integer> types = new ArrayList<Integer>(Arrays.asList(elements));
        while (types.contains(eventType))
            eventType = reader.next();
    }
} 
```

此类使用如下：

```
List<MyClass> lenList = new ArrayList<MyClass>();
PartialUnmarshaller<MyClass> pu = new PartialUnmarshaller<MyClass>(
        is, MyClass.class);
while (pu.hasNext()) {
    lenList.add(pu.next());
} 
```

被解组的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<lineEquipment>
    <lineEquipmentRecord>
        <telephoneNpa>333</telephoneNpa>
        <telephoneNxx>333</telephoneNxx>
        <telephoneLine>4444</telephoneLine>
        <telephoneSuffix>1</telephoneSuffix>
        <nodeAddress>xxxx</nodeAddress>
        <groupIdentifier>LEN</groupIdentifier>
    </lineEquipmentRecord>
    <lineEquipmentRecord>
        <telephoneNpa>111</telephoneNpa>
        <telephoneNxx>111</telephoneNxx>
        <telephoneLine>2222</telephoneLine>
        <telephoneSuffix>0</telephoneSuffix>
        <nodeAddress>xxxx</nodeAddress>
        <groupIdentifier>LEN</groupIdentifier>
    </lineEquipmentRecord>
</lineEquipment> 
```

最后，这是 MyClass：

```
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

/**
 * This class is used as an envelope to hold Martens
 * line equipment information.
 * @author spgezf
 *
 */
@XmlRootElement(name="lineEquipmentRecord")
public class MyClass {

    private String telephoneNpa;
    private String telephoneNxx;
    private String telephoneLine;

    private String telephoneSuffix;
    private String nodeAddress;
    private String groupIdentifier;

    public MyClass(){       
    }

    // Getters and Setters.

    @XmlElement(name="telephoneNpa")
    public String getTelephoneNpa() {
        return telephoneNpa;
    }

    public void setTelephoneNpa(String telephoneNpa) {
        this.telephoneNpa = telephoneNpa;
    }
    @XmlElement(name="telephoneNxx")
    public String getTelephoneNxx() {
        return telephoneNxx;
    }

    public void setTelephoneNxx(String telephoneNxx) {
        this.telephoneNxx = telephoneNxx;
    }
    @XmlElement(name="telephoneLine")
    public String getTelephoneLine() {
        return telephoneLine;
    }

    public void setTelephoneLine(String telephoneLine) {
        this.telephoneLine = telephoneLine;
    }

    @XmlElement(name="telephoneSuffix")
    public String getTelephoneSuffix() {
        return telephoneSuffix;
    }

    public void setTelephoneSuffix(String telephoneSuffix) {
        this.telephoneSuffix = telephoneSuffix;
    }

    @XmlElement(name="nodeAddress")
    public String getNodeAddress() {
        return nodeAddress;
    }

    public void setNodeAddress(String nodeAddress) {
        this.nodeAddress = nodeAddress;
    }

    @XmlElement(name="groupIdentifier")
    public String getGroupIdentifier() {
        return groupIdentifier;
    }

    public void setGroupIdentifier(String groupIdentifier) {
        this.groupIdentifier = groupIdentifier;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T22:02:41.327

谢谢，这是我无法克服的类加载问题，所以我放弃了 JAXB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:27:23.067

你的`PartialUnmarshaller`代码对我有用。下面是一个替代版本，它改变了`skipElements`可能更好的方法。

```
import java.io.InputStream;
import java.util.NoSuchElementException;

import javax.xml.bind.*;
import javax.xml.stream.*;

public class PartialUnmarshaller<T> {
    XMLStreamReader reader;
    Class<T> clazz;
    Unmarshaller unmarshaller;

    public PartialUnmarshaller(InputStream stream, Class<T> clazz) throws XMLStreamException, FactoryConfigurationError, JAXBException {
        this.clazz = clazz;
        this.unmarshaller = JAXBContext.newInstance(clazz).createUnmarshaller();
        unmarshaller.setEventHandler(new ValidationEventHandler() {

            @Override
            public boolean handleEvent(ValidationEvent event) {
                System.out.println(event.getMessage());
                return true;
            }
        });
        this.reader = XMLInputFactory.newInstance().createXMLStreamReader(stream);

        /* ignore headers */
        skipElements();
        /* ignore root element */
        reader.nextTag();
        /* if there's no tag, ignore root element's end */
        skipElements();
    }

    public T next() throws XMLStreamException, JAXBException {
        if (!hasNext())
            throw new NoSuchElementException();

        T value = unmarshaller.unmarshal(reader, clazz).getValue();

        skipElements();
        return value;
    }

    public boolean hasNext() throws XMLStreamException {
        return reader.hasNext();
    }

    public void close() throws XMLStreamException {
        reader.close();
    }

    private void skipElements() throws XMLStreamException {
        while(reader.hasNext() && !reader.isStartElement()) {
            reader.next();
        }
    }

} 
```

# css - 带有背景图像的 CSS 块不包括标题后的空格

> ID：13922376
> 
> 赞同：0
> 
> 时间：2012-12-17T21:20:48.620
> 
> 标签：css

我正在尝试创建[这个盒子](http://atlas.czg.net/atlas/wp-content/uploads/2012/12/Screen-Shot-2012-12-17-at-3.05.22-PM.png)，但这有点超出我的想象。我无法正确显示白色标题文本后的间距。

现场版在[这里](http://atlas.czg.net/)，当前的 CSS 在下面。div 中的标准 < p > 忽略了 hblock 上的底部填充，我不禁认为我的做法是错误的。有没有更简单的方法来创建这个元素或我在代码中缺少的东西？

非常感谢。

```
#lheaderblock{display:block;
padding:0px 10px 0px 10px;
background-image:url('http://atlas.czg.net/atlas/wp-content/uploads/2012/12/caption_header_blue.gif');
height:160px;
width:90%;
border:1px solid #000000;
background-repeat:no-repeat;
overflow: hidden;}

hblock{position:absolute;
color:#FFFFFF;
font-size:14pt;
padding:10px 0px 20px 15px;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:31:00.513

我不知道是什么`<hblock>`。当浏览器也不知道时，它们会将它们呈现为内联元素。你需要给它`display: block`并删除`position: absolute`. 调整填充，你会没事的。

# html - 链接框不会触及标题的底部

> ID：13922381
> 
> 赞同：0
> 
> 时间：2012-12-17T21:21:24.457
> 
> 标签：html, css

现在我正试图让带有链接的框的底部触摸标题的底部，但无法做到这一点。我尝试删除尽可能多的填充我尝试使框位置绝对，但我做不到。这是html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Excercise 2 CSS</title>
    <link rel="stylesheet" type="text/css" href="css.css" />

</head>

<body>
    <div class="header">
      <img src="img.png" id="top_image" alt="top_image" />
      <div class="link_container">
        <a href="#">Home</a>
      </div>
      <div class="link_container">
        <a href="#">Locations</a>
      </div>
      <div class="link_container">
        <a href="#">New Account</a>
      </div>
      <div class="link_container">
        <a href="#">Contact Us</a>
      </div>

     </div>
    <div class="content">

    </div>
    <div class="footer">
            <p><b><i>Copyright 2011 Hometown Bank, Inc.</i></b>
            <a href="#">Privacy Policy</a>
            <a href="#">Legal</a></p>
    </div>

</body>
</html> 
```

这是CSS

```
html { height: 100%; width: 100%;  smin-height: 1000px;  }
        body { height: 90%; width: 90%; min-width: 1135px; min-height: 570px; margin:0px; margin-left:5%; margin-top: 2%; 
                box-shadow: 0px 5px 5px 5px  #999999; margin-bottom:5%; background-color: #FFFFFF;
              }

        .header 
         { 

            height: 10%;
            width: 100%;
            background-color: #DAFFFF;
            spadding-top: 1%;
            min-height: 100px;
         }

        .content 
        { 
            height:75%;
            width: 100%;
            min-height:390px;;

            background-color:#DAFFAA;
        }

        .text_area  
        { 

            height: 135px; width:700px;  position:relative; 
            font-family:Arial, Helvetica, sans-serif; font-size:18px; 
            padding: 15px 20px 15px 10px;
            margin-bottom:25px; background-color:#00EEFF;

        }

        .news_header 
        { 
            width:250px; background-color:#00CCCC; height: 30px;
            font-family:Arial, Helvetica, sans-serif; font-size:20px;
            padding-top:5px;
        }
        .news_box
        {
            height:170px; width:250px; background-color: #00EEFF;
            float:right;  display:inline;

        }

        .footer
        {
            font-family:Arial, Helvetica, sans-serif;
            height: 5%;
            width: 100%;
            background-color:#00BBBB;
            min-height:25px;
            margin: 0px;

        }
        .link_container
        {
           display:inline-block;
           height:50%;
           width:10%;
           background-color:#FF0;

        }
.header img { margin-left:2%; width:10%; height: 75px;} 
```

如果您需要更多信息，请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:31:45.817

Your combination of `height:10%` and `min-height:100px` seems to be causing it. Removing it makes your links line up at the bottom of the header div.

[http://jsfiddle.net/tomprogramming/namH7/1/](http://jsfiddle.net/tomprogramming/namH7/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:36:26.113

将链接容器的高度更改为 100%，以便 div 填充它们的容器。

```
 .link_container
    {
       display:inline-block;
       height:100%;
       width:10%;
       background-color:#FF0;

    } 
```

然后将垂直对齐样式添加到图像以相对于图像定位 div。

```
<img src="img.png" id="top_image" alt="top_image" style="vertical-align:top;" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T21:35:49.903

如果您只想向下移动黄色链接框，您可以使用 margin-top 或 position: relative;

```
 .link_container
    {
       margin-top: 50px;
       or
       position: relative;
       top: 50px;

    } 
```

# css - WordPress 类别的样式

> ID：13922383
> 
> 赞同：0
> 
> 时间：2012-12-17T21:21:24.750
> 
> 标签：css, wordpress, wp-list-categories

[这是我的网站](http://www.milknhny.co.uk/DVine/?page_id=19)。我已经添加了类别，但它似乎不是`inline`。我曾尝试在课堂上设计这个样式，但这搞砸了整个事情。

我是否在主题中编辑主要样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:58:32.763

如果我理解正确，只需将以下内容添加到您的主题 style.css 文件中。这应该可以解决问题。

```
.post-categories, .post-categories li {
    display:inline;
    padding:0;
 } 
```

### 更新：

如果您添加此样式，您应该会看到类似的内容。是你所期望的吗？确保清除浏览器缓存并正确加载所有样式。

![在此处输入图像描述](../Images/accc9525f3e420734e529a62100341f9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:00:26.147

查看源代码（尝试击键`CTRL`+ `U`）显然是导致正常 HTML 输出中断的 php 错误。休息后：`</div><!-- #container -->`...

如果您无法检查服务器的 php 错误日志，请尝试将调试信息直接输出到屏幕。放入你的 `wp-config.php`

```
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
define('WP_DEBUG_DISPLAY', 1);
@ini_set('display_errors', 1); 
```

# wordpress - 哪个文件更改此代码...？

> ID：13922385
> 
> 赞同：0
> 
> 时间：2012-12-17T21:21:37.000
> 
> 标签：wordpress

我在我的 wordpress 博客上的帖子中嵌入了一些 mailchimp 表单的代码。

我注册了该列表以对其进行测试，但该表单将我注册到了我的 mailchimp 帐户中的另一个列表。

这是此页面主要部分中的表格：[http ://wordfruit.com/blog/fish-and-the-blackbird/](http://wordfruit.com/blog/fish-and-the-blackbird/)

我希望该表格使人们能够注册标题为“出版物更新”的列表。取而代之的是，它将人们注册到“如何写作以说服和销售”列表，该列表与网站侧边栏中的表格相关联。

Mailchimp 告诉我：“看起来（正如你提到的）你正在嵌入正确的代码，但是在你的网站底部有一些脚本覆盖了你在嵌入表单时所做的事情。具体来说，有是页面源代码底部的一个部分，它引用了“如何写作以说服和销售”列表。此屏幕截图显示了我所指的部分：[http ://screencast.com/t/ rbw44HzeY](http://screencast.com/t/rbw44HzeY) - 我建议做的是进入您网站的代码并用此 ID 替换该屏幕截图中的部分：827164e224。

我的问题：

1.  我找不到带有 mailchimp 家伙提到的源代码的文件。文件名可能是什么？

2.  知道该代码是如何到达那里的吗？我只在侧边栏中添加了“如何写作以说服和销售”注册表单......

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-17T22:00:21.400

看起来这个 js 文件位于 /blog/fish-and-the-blackbird.js 或类似文件中。

# xaml - 禁用嵌套 ContentControl 的动画

> ID：13922387
> 
> 赞同：4
> 
> 时间：2012-12-17T21:21:41.787
> 
> 标签：xaml, animation, windows-8, transition

我想为我的一个元素禁用 EntrenceThemeAnimation。我有一个 Grid 将此动画设置为它的所有子项（我认为它是页面的默认设置）。是否可以为此网格的子级 ContentControl 禁用此动画？

我尝试了以下方法，但似乎不起作用。

**内容**

```
<Grid Style="{StaticResource LayoutRootStyle}">
...
<!-- no animations for this element -->
<ContentControl x:Name="Background" Content="Tabstagram" Margin="0" Grid.Row="1" Style="{StaticResource Background}">
    <ContentControl.Transitions>
        <TransitionCollection/>
    </ContentControl.Transitions>
    <ContentControl.ContentTransitions>
        <TransitionCollection/>
    </ContentControl.ContentTransitions>
</ContentControl> 
```

**风格**

```
<Style x:Key="LayoutRootStyle" TargetType="Panel">
    <Setter Property="Background" Value="{StaticResource ApplicationPageBackgroundThemeBrush}"/>
    <Setter Property="ChildrenTransitions">
        <Setter.Value>
            <TransitionCollection>
                <EntranceThemeTransition/>
            </TransitionCollection>
        </Setter.Value>
    </Setter>
</Style>
<Style x:Key="Background" TargetType="ContentControl">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ContentControl">
                <Grid>
                    <Grid.ChildrenTransitions>
                        <TransitionCollection/>
                    </Grid.ChildrenTransitions>
                    <Grid.Transitions>
                        <TransitionCollection/>
                    </Grid.Transitions>
                    <Rectangle IsHitTestVisible="False" StrokeThickness="75" Margin="0" Fill="#FFC1C1C1"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:59:25.547

我的页面的 LayoutRoot 网格中有以下内容，它正确禁用了入口主题转换：

```
<Grid x:Name="LayoutRoot" Style="{StaticResource LayoutRootStyle}">
    <Grid.ChildrenTransitions>
        <TransitionCollection/>
    </Grid.ChildrenTransitions> 
```

但是请注意，我正在覆盖使用**LayoutRootStyle**的面板的转换，并且我是在页面中而不是在资源中执行此操作。

可能是这些动画从启用它们的第一个控件向下流动，而不管子控件是否禁用它们。您可以尝试将两个面板放在 UI 层次结构的同一级别（对等而不是嵌套在另一个中），看看是否可以解决问题。

# ios - 如何测试使用 HTTPS 的客户端应用程序以防止 MITMA？

> ID：13922390
> 
> 赞同：0
> 
> 时间：2012-12-17T21:21:47.217
> 
> 标签：ios, https, security

我有一个 iOS 客户端应用程序，它使用 HTTPS 连接到服务器。我在客户端中添加了代码来验证服务器的身份。

测试此功能的测试人员如何测试它现在是安全的，例如他们如何创建 MITM 情况并检查客户端是否拒绝连接等？

我试过用谷歌搜索如何做到这一点，但运气不佳。

可以使用 Charles 和代理等工具来完成，还是使用无线路由器并拥有必要的详细知识？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T02:47:04.333

This might be over simplification for your solution, but concepts might help.

A web browsers extracts the name of hosts from embedded certificate and do a comparison of host name that we're trying to connect with. If validation fails, we usually see a security warning. For ex: we can connect with facebook by either typing `https://www.facebook.com` or by typing `https://173.252.100.16/`. When we choose second option, we get a security warning.

Your program must be using SSL client socket to connect with HTTPS server. The socket must be having capability to extract the hostname from the embedded certificate. Once you get that, compare that with valid HOST NAME that your program is trying to connect with. If it matches, let request proceed, If not, abandon that session.

To re-create MITM, your web server can use a self signed certificate that can be issue to whatever host name you want, but the IP of server could be 127.0.0.1 (for example). Since there is a mismatch between the host name and actual IP, we can probably simulate the MITM situation.

I'm assuming that digital certificate can't be forged in this case.

# excel - Excel - 谷歌电子表格

> ID：13922398
> 
> 赞同：0
> 
> 时间：2012-12-17T21:22:25.720
> 
> 标签：excel, google-sheets, export, cells

有没有办法在 Excel 中标记特定单元格并自动将它们导出到 Google 电子表格。不想导出整个文档，只导出特定的单元格。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:31:13.087

Select the cells you want to export and then copy/paste them to a new Google Spreadsheet.

Or

Import entire sheet and delete what you don't want.

# iphone - iPhone：如何制作包含 armv7s 支持的胖库？

> ID：13922402
> 
> 赞同：0
> 
> 时间：2012-12-17T21:22:47.673
> 
> 标签：iphone, cocoa-touch, armv7, armv6

我有用于`armv6, armv7, i386 and armv7s`. 当我尝试使用 lipo 将所有内容放在一起时，我收到一条错误消息，如下所示，说不`armv7s`支持：

```
lipo: known architecture flags are: any little big ppc64 x86_64 ppc970-64 ppc i386 m68k hppa sparc m88k i860 veo arm ppc601 ppc603 ppc603e ppc603ev ppc604 ppc604e ppc750 ppc7400 ppc7450 ppc970 i486 i486SX pentium i586 pentpro i686 pentIIm3 pentIIm5 pentium4 m68030 m68040 hppa7100LC veo1 veo2 veo3 veo4 armv4t armv5 xscale armv6 armv7 armv7f armv7k 
```

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:24:49.583

您将需要源代码并在`armv7s`支持下编译它。此外，在设备上也`armv7`应该可以正常工作。`armv7s`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:36:03.930

您可能正在尝试使用不支持 armv7s 的旧版本 lipo。您应该尝试使用与 Xcode 4.5 捆绑的 lipo 版本。

# ruby-on-rails - 从 Rails 3 应用程序中删除 ActiveRecord

> ID：13922406
> 
> 赞同：5
> 
> 时间：2012-12-17T21:23:14.507
> 
> 标签：ruby-on-rails, activerecord, passenger

我已阅读有关此主题的先前主题，但我在那里找到的解决方案并没有解决我的问题。我有一个不进行数据库访问的 rails 3.2.9 应用程序 - 它使用 HTTP Rest 协议连接到另一个应用程序来访问持久数据。该应用程序在使用 WEBrick 的“rails 服务器”的本地测试环境中运行正常，但无法使用 Nginx/Passenger 运行，并出现错误“ *** Exception LoadError in application（请安装 sqlite3 适配器：`gem install activerecord-sqlite3-adapter`（sqlite3 不是捆绑包的一部分。将其添加到 Gemfile。））“。从堆栈跟踪看来，ActiveRecord 想要在处理请求之前执行的代码中急切地建立数据库连接。我试图遵循从我的依赖项中删除 ActiveRecord 的说明没有运气。我使用 --skip-activerecord 生成，它按预期生成了这样的 application.rb：

```
require File.expand_path('../boot', __FILE__)

# Pick the frameworks you want:
# require "active_record/railtie"
require "action_controller/railtie"
require "action_mailer/railtie"
require "active_resource/railtie"
require "sprockets/railtie"
require "rails/test_unit/railtie" 
```

除了在 bundler 创建的 gemlock 文件、注释和自述文件中之外，我的应用程序中的任何地方都没有对 activerecord 或 active_record 的引用。Bundler 将 ActiveRecord 报告为依赖项，而“bundle viz”将 rails 本身报告为需要 ActiveRecord 的 gem。任何建议或意见都将受到欢迎。

回答 eric 的问题，这是我的 Gemfile

```
source 'https://rubygems.org'

gem 'rails', '3.2.9'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:37:46.900

正如您所发现的那样，Rails 本身在 Gemspec 中将 ActiveRecord 列为依赖项。到目前为止，您存档的设置是从 Rails 中删除 ActiveRecord 的标准方法。如果您真的想更进一步并删除 gem，您很可能必须分叉 Rails gem 并删除它的 Gemspec 中的依赖项。

可能就这么简单，但您可能还会发现 Rails 中有额外的胶水代码来绑定 ActiveRecord，您也必须将其删除。总而言之，我想知道它是否值得。

如果您不需要 ActiveRecord，您已经阻止它有效加载。有些部分可能仍会加载，但大部分不会。内存占用/性能与删除核心 Rails 功能所花费的时间相比，我想知道您是否没有根据自己的需求寻找错误的框架？

如果你的需求太紧以至于 Rails 仍然很重，你可能应该看看 Sinatra 或类似的东西。你也可以坚持使用 Rails 并做一个自定义的 Rack 中间件堆栈来保留你需要的调用堆栈的部分。

我希望这能给你一些指导，如果不是一个可行的解决方案，一些替代方案来满足更高的关注，因为它本身没有理由删除 ActiveRecord gem。

# javascript - 使用 Phonegap 上传图像：InvalidCastException

> ID：13922410
> 
> 赞同：6
> 
> 时间：2012-12-17T21:23:28.047
> 
> 标签：javascript, cordova

我正在尝试使用 Phonegap 将文件上传到我的服务器。当出现以下错误时，我目前陷入困境：

```
InvalidCastException
Failed to deserialize WP7CordovaClassLib.Cordova.Commands.FileTransfer+UploadOptions[] with JSON value :: ["{\"filePath\":\"/CapturedImagesCache/PhotoChooser-51766419-c657-46db-a53d-f09bee300a89.jpg\",\"server\":\"http://server.myapp.srv.co.nz/pages/fileupload\",\"fileKey\":\"file\",\"fileName\":\"PhotoChooser-51766419-c657-46db-a53d-f09bee300a89.jpg\",\"mimeType\":\"image/jpg\",\"params\":\"value1=test&value2=param\",\"chunkedMode\":false}"] 
```

HTML + Javascript

```
<!DOCTYPE html>
<html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <title>File Transfer Example</title>

</head>
<body>
    <button id="uploadPhotoButton">Upload a Photo</button>

    <script type="text/javascript" src="cordova-2.2.0.js"></script>
    <script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="js/jquery.mobile-1.2.0.min.js"></script>
    <script type="text/javascript" src="js/camera.js"></script>
    <script type="text/javascript">

    $(document).one("pause", function () {
        console.log('Paused.');
    });

    $(document).one("resume", function () {
        console.log('Resumed.');
    });

    $(document).one("deviceready", function () {
        console.log('Device is ready.');
    });

    $(document).one("backbutton", function () {
        console.log('Back button pressed.');
    });

    $(document).ready(function () {
        console.log('DOM is ready.');

        $(document).on("click", "#uploadPhotoButton", function (e) {
            console.log('clicked button');
            getImage();
        });

        function getImage() {
            // Retrieve image file location from specified source
                navigator.camera.getPicture(uploadPhoto, function (message) {
                    alert('get picture failed');
                }, {
                    quality: 50,
                    destinationType: navigator.camera.DestinationType.FILE_URI,
                    sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
                }
            );

        }

        function uploadPhoto(imageURI) {
            var options = new FileUploadOptions();
            options.fileKey = "file";
            options.fileName = imageURI.substr(imageURI.lastIndexOf('/') + 1);
            options.mimeType = "image/jpeg";

            var params = new Object();
            params.value1 = "test";
            params.value2 = "param";

            options.params = params;
            options.chunkedMode = false;

            var ft = new FileTransfer();
            ft.upload(imageURI, "http://my.server.co.nz/pages/fileupload", win, fail, options);
        }

        function win(r) {
            console.log("Code = " + r.responseCode);
            console.log("Response = " + r.response);
            console.log("Sent = " + r.bytesSent);
            alert(r.response);
        }

        function fail(error) {
            alert("An error has occurred: Code = " = error.code);
        }
    });

    </script>
    </body>
</html> 
```

完整的错误日志。

```
GapBrowser_Navigated :: /app/www/index.html#/app/www/uploadtest.html
Log:"clicked button"
The thread '<No Name>' (0xf55026a) has exited with code 0 (0x0).
The thread '<No Name>' (0xe3f0326) has exited with code 0 (0x0).
INFO: AppDeactivated
INFO: AppActivated
Log:"Paused."
The thread '<No Name>' (0xf1a02e6) has exited with code 0 (0x0).
Log:"Resumed."
The thread '<No Name>' (0xf2a01d2) has exited with code 0 (0x0).
options = ["{\"filePath\":\"/CapturedImagesCache/PhotoChooser-51766419-c657-46db-a53d-f09bee300a89.jpg\",\"server\":\"http://my.server.co.nz/pages/fileupload\",\"fileKey\":\"file\",\"fileName\":\"PhotoChooser-51766419-c657-46db-a53d-f09bee300a89.jpg\",\"mimeType\":\"image/jpg\",\"params\":\"value1=test&value2=param\",\"chunkedMode\":false}"]
A first chance exception of type 'System.InvalidCastException' occurred in System.ServiceModel.Web.dll
A first chance exception of type 'System.InvalidCastException' occurred in System.ServiceModel.Web.dll
InvalidCastException
Failed to deserialize WP7CordovaClassLib.Cordova.Commands.FileTransfer+UploadOptions[] with JSON value :: ["{\"filePath\":\"/CapturedImagesCache/PhotoChooser-51766419-c657-46db-a53d-f09bee300a89.jpg\",\"server\":\"http://server.myapp.srv.co.nz/pages/fileupload\",\"fileKey\":\"file\",\"fileName\":\"PhotoChooser-51766419-c657-46db-a53d-f09bee300a89.jpg\",\"mimeType\":\"image/jpg\",\"params\":\"value1=test&value2=param\",\"chunkedMode\":false}"]
A first chance exception of type 'System.NullReferenceException' occurred in Lion.MyApp.dll
The thread '<No Name>' (0xfdc025e) has exited with code 0 (0x0).
Log:"Error in error callback: FileTransfer1325332352 = ReferenceError: Invalid left-hand side in assignment"
The thread '<No Name>' (0xfa60286) has exited with code 0 (0x0). 
```

有没有人知道如何进行这项工作？

谢谢！

W

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:16:47.273

将您的 getImage、uploadImage、win、fail 放在 $(document).ready 的内联函数调用之外。

对 win 和 fail 的引用实际上是关闭，当它试图直接访问这些方法时，phone gap 将其设为 null。Phonegap 可能期望一个全局函数而不是函数内部的隐藏函数。

PhoneGap 在 javascript 上下文之外执行其代码，可能以真正的 javascript 方式工作的内容可能无法在 phonegap 上正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T03:25:25.237

我在想你正在扭曲你的期权价值。您需要传递 JSON 还是实际对象？

现在，您正在传递一个包含文本的数组。

```
options = ["{\"filePath\":\"/CapturedImagesCache/PhotoChooser-51766419-c657-46db-a53d-f09bee300a89.jpg\",\"server\":\"http://my.server.co.nz/pages/fileupload\",\"fileKey\":\"file\",\"fileName\":\"PhotoChooser-51766419-c657-46db-a53d-f09bee300a89.jpg\",\"mimeType\":\"image/jpg\",\"params\":\"value1=test&value2=param\",\"chunkedMode\":false}"] 
```

该错误似乎涉及反序列化问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:30:12.990

我遇到了和你类似的问题。我解决了这个问题，将 mimeType 参数更改为“text/plain”。

你使用参数发送吗？如果它是假的，我认为你需要发送空参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T07:59:17.770

我之前也遇到过这个问题，试着先把图片准备成html，不要直接从导航器里拿，拍的照片可能不会存钱；）

在我的解决方案中，我想有一个 id ='camera_image' 的图像标签

> img id='camera_image'...

然后我在其中设置图像的所有变量并上传它（如您将在下面的代码中看到的那样）。

这是我使用的 2 个函数：

```
function takephoto(){     

      navigator.camera.getPicture(      
        function(uri){
             $('#camera_image').show();
             var img = document.getElementById('camera_image');
             img.style.visibility = "visible"; 
             img.style.display = "block";
             img.src = uri;
             uploadPhoto(img);                    
             alert("Success");
         },
         function(e) {
             console.log("Error getting picture: " + e);
         },
         {
             quality: 50, 
             destinationType: navigator.camera.DestinationType.FILE_URI
         });

        // Get URI of picture to upload 
        var img = document.getElementById('camera_image');
        var imageURI = img.src;
        if (!imageURI || (img.style.display == "none")) {
                alert("Take picture or select picture from library first.");
                return;
        }
} 
```

选择现有照片：

```
 function choosephoto(){
    navigator.camera.getPicture(
        function(uri) {
            $('#camera_image').show();
            var img = document.getElementById('camera_image');
            img.style.visibility = "visible"; 
            img.style.display = "block";
            img.src = uri;
            uploadPhoto(img);
        },
        function(e) {
            console.log("Error getting picture: " + e);
        },
        {
             quality: 50, 
             destinationType: navigator.camera.DestinationType.FILE_URI, 
             sourceType: navigator.camera.PictureSourceType.SAVEDPHOTOALBUM
        });             

        // Get URI of picture to upload
        var img = document.getElementById('camera_image');
        var imageURI = img.src;
        if (!imageURI || (img.style.display == "none")) {
            alert("please select a pic first");
            return;
        }

  } 
```

在上传函数中： function uploadPhoto(img) { imageURI = img.src ...

ps：对不起我的代码格式，它不能很好地修复。

# list - Nil vs List(Nil) in a for with recursion

> ID：13922411
> 
> 赞同：1
> 
> 时间：2012-12-17T21:23:30.607
> 
> 标签：list, scala, recursion

我正在学习 Scala 并有一个简单的问题：有人可以向我解释为什么以下两组代码会产生不同的结果吗？

```
def grey0(n: Int): List[List[String]]={
  if (n==0) List(Nil)
  else for(i<-List("0","1"); j<-grey0(n-1)) yield i :: j 
 } 
```

相对

```
def grey1(n: Int): List[List[String]]={
  if (n==0) Nil
  else for(i<-List("0","1"); j<-grey0(n-1)) yield i :: j 
 } 
```

第一个选项产生我正在寻找的结果。我不明白的是，为什么第二个选项只返回空列表？我会认为其他结果会影响它，如果有的话，我会得到某种平面列表而不是`List[List[String]]`（这是我想要的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:28:11.747

在第一个示例中，您创建了一个包含空列表的列表。在第二个示例中，您只创建了一个空列表。两者可以具有相同的类型，因为任何列表都可以为空。

`Nil`只是表示空列表，它几乎等于`List()`（在您的示例中，类型将被推断，因此两者完全相同）。`List(Nil)`然后就像`List(List())`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:30:31.007

在您的第一个版本`grey0(0)`中，将返回一个包含空列表的单元素列表。`grey0(1)`将为每个元素`grey0(0)`创建两个列表，因此您总共得到两个列表，因为`grey0(0)`包含一个列表。同样`grey0(2)`将包含 4 个列表，因为它为其中的两个元素中的每一个`grey0(1)`创建 2 个列表。

在您的第二个版本`grey0(0)`中将返回空列表。`grey0(1)`将为 中的每个元素创建两个列表`grey0(0)`。由于`grey0(0)`有 0 个元素，`0*2=0`因此结果中的元素总数。

# iis - 2 台服务器上的相同 URL

> ID：13922414
> 
> 赞同：1
> 
> 时间：2012-12-17T21:23:46.580
> 
> 标签：iis, redirect, url-rewriting, dns

我不是 DNS 专家，但今天有人告诉我一些似乎不可能的事情。当我说无法完成时，有人可以解释如何做到这一点或支持我。

我有一个拥有 .gov 网站的客户。最终，我正在开发的应用程序将转移到他们的环境中。我们目前在我们的服务器上拥有它，因为我们只完成了 75%。但是，他们现在希望该 URL 用于他们的网站。

他们的 IT 人员说他们可以在他们这边设置一个 DNS 条目。像这样的东西：

www.TheirOrg.gov/MyApp

这基本上会重定向到当前是该站点的 IP 地址的站点。我们目前的网站位于：

例如：www.MyOrg.gov/MyApp

他们希望我们创建“A FULL ON”（他们的话）的别名。这样重定向后，浏览器中的网址还是会说原来的网址。当用户在我们的服务器上使用应用程序时，他们希望他们的 URL 以“www.TheirOrg.gov/MyApp”开头。

有人可以指出我是如何做到的吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:31:16.297

如果他们想要地址是`http://MyApp.TheirOrg.gov`，你可以只用一个 dns 记录来做到这一点。否则，他们所要求的基本上是不可能的，因为 DNS 与 url 的域部分之后的任何内容无关。

编辑：我想到了一个解决方法，以防他们顽固：如果您可以访问他们的网络服务器，您可以创建一个页面，`http://www.TheirOrg.gov/MyApp`该页面只`<iFrame>`指向您的开发站点。不过，可能很多浏览器都会将此检测为可疑行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:39:21.350

可以使用反向代理来实现。[在此处](http://www.iis.net/learn/extensions/url-rewrite-module/reverse-proxy-with-url-rewrite-v2-and-application-request-routing)查看 IIS 7 的描述

# linux - 如何在 RHEL 6/Linux 上设置 Oracle ODBC 驱动程序

> ID：13922415
> 
> 赞同：5
> 
> 时间：2012-12-17T21:23:49.190
> 
> 标签：linux, oracle, odbc, drivers, rhel6

我需要在 RHEL 6 上设置 Oracle ODBC 驱动程序以连接到位于远程 Windows 机器上的 Oracle 数据源。

我已采取以下步骤：
[1] 安装 oracle-instanceclient-basic
[2] 设置环境变量：ORACLE_HOME 和 LD 路径
[3] 创建 /etc/oracle/TNSnames.ora 并配置但未正确设置

最初，我得到了错误，`"Connect failed because target or object does not exist"`

然后，我`ORACLE_SID = DB_NAME`在 TNSnames.ora 文件中设置：

但是，这并没有解决问题，我现在收到一条新的错误消息：`"TNS: net service name is incorrectly specified"`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T14:54:29.980

```
yum install unixODBC
rpm -ivh oracle-instantclient-basic-10.2.0.3-1.i386.rpm #downloaded on http://www.oracle.com/technology/software/tech/oci/instantclient/htdocs/linuxsoft.html
unzip instantclient-odbc-linux32-10.2.0.3-20061115.zip #downloaded on http://www.oracle.com/technology/software/tech/oci/instantclient/htdocs/linuxsoft.html
cp ./instantclient_10_2/libsqora.so.10.1 /usr/lib/oracle/10.2.0.3/client/lib/
export ORACLE_HOME=/usr/lib/oracle/10.2.0.3/client
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$ORACLE_HOME/lib 
```

此外，您还需要设置`$TWO_TASK`（Oracle 希望获取服务器的默认位置）指向 Oracle 服务器在 Windows 上运行的位置 - 不要忘记在端口号后面添加侦听器：

```
export TWO_TASK=//213.123.23.19:1521/listener 
```

要检查侦听器的名称，请在运行 Oracle 服务器的 Windows 提示符下键入以下命令：

```
lsnrctl
status 
```

它将招募侦听器及其状态（READY 或 UNKNOWN）。连接到处于就绪状态的监听器：`Instance "zelistener", status READY`

mkdir /etc/oracle

vi /etc/oracle/tnsnames.ora

```
MY_SID =
 ( DESCRIPTION =
  (ADDRESS_LIST =
  (ADDRESS =
  (PROTOCOL = TCP)
  (Host = 127.0.0.1)
  (Port = 1521)
  )
 )
 (CONNECT_DATA = (SID = MY_SID)
 )
) 
```

导出 TNS_ADMIN=/etc/oracle

vi /etc/odbcinst.ini

```
[OracleODBC-10g]
Description = Oracle ODBC driver for Oracle 10g
Driver = /usr/lib/oracle/10.2.0.3/client/lib/libsqora.so.10.1
FileUsage = 1
Driver Logging = 7 
```

vi /etc/odbc.ini

```
[simple]
Driver = OracleODBC-10g
DSN = OracleODBC-10g
ServerName = MY_SID
UserID = USER
Password = PASSWORD 
```

isql -v 简单

```
+---------------------------------------+
| Connected!                            |
|                                       |
| sql-statement                         |
| help [tablename]                      |
| quit                                  |
|                                       |
+---------------------------------------+ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-10T06:21:23.893

我认为我们应该分配 unixODBC 的版本。如果要连接oracle12c，我们应该使用unixODBC-2.3.1

# javascript - 谷歌地图将标签添加到标记信息窗口

> ID：13922416
> 
> 赞同：1
> 
> 时间：2012-12-17T21:23:51.360
> 
> 标签：javascript, google-maps, google-maps-api-3

我已经对 API v3 的选项卡进行了一些研究，并提出了 infobubble 作为选项卡式 infowindows 的一个好看的来源。我不是想弄清楚我是否可以稍后将选项卡添加到已创建的信息气泡中。我有几个事件从数据库中提取到 xml，然后到 java 脚本以放在地图上，但有些事件共享相同的位置，但其他潜在标记的日期不同。标记或信息窗口是否具有可以迭代的 ID，以检查地图中某个位置的标记是否已存在？然后如果是这种情况，请在 infobubble/infowindow 中添加一个选项卡？

我认为 `infoBubble.addTab(title, content)`是这样做的方法，但我怎么知道要将它添加到哪个标记/信息气泡中？

**更新**（这是我拥有的似乎冻结 chrome 的代码）：

```
var location_icon = new google.maps.MarkerImage('../images/FAFSA_Logo_icon.png');  
 var map;
 var markersArray= [];
  function load() {

    map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(33.961586, -106.008728),
        zoom: 6,
        mapTypeId: 'roadmap'
    });
    var infoBubble = new InfoBubble({maxWidth: 300});

    downloadUrl("../site_parts/mapmysql.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
        var name = markers[i].getAttribute("event_name");
        var address = markers[i].getAttribute("venue_address");
        var city = markers[i].getAttribute("venue_city");
        var state = markers[i].getAttribute("venue_state");
        var zip = markers[i].getAttribute("venue_zip");
        var website = markers[i].getAttribute("venue_website");

        var date = markers[i].getAttribute("event_date");
        var start_time = markers[i].getAttribute("event_start_time");
        var end_time = markers[i].getAttribute("event_end_time");
        var room = markers[i].getAttribute("event_room");
        var cord = markers[i].getAttribute("ec_fname") + " " + markers[i].getAttribute("ec_lname");
        var cord_email = markers[i].getAttribute("ec_email");
        var cord_pnumber = markers[i].getAttribute("ec_pnumber");
        var point = new google.maps.LatLng(
            parseFloat(markers[i].getAttribute("venue_lat")),
            parseFloat(markers[i].getAttribute("venue_lng")));
        var html = "<b>" + name + "</b> <br/>" + address +", "+ city +", "+ state +", "+ zip + "<br/>" +"<b>Date </b> "+ date +"<br/>" +"<b>Time </b> "+ start_time + " - "+ end_time +"<br/>" + "<b>Room </b>" + room + "<br/>"+ "<b> Cordinator </b>" + cord + " " + "<a href='mailto:" + cord_email + "?Subject=FAFSA%20FFA%20Event'>" + cord_email + "</a> " + cord_pnumber;
        var icon =  location_icon;
            for (var i = 0; i < markersArray.length; i++){
                if (markersArray[i].getPosition()=point){
                    addtabFunction(markersArray[i], map, date, html);
                    break;
                } if (i > markersArray.length){continue} else{

            var marker = new google.maps.Marker({map: map, position: point, icon: icon});
                    markersArray.push(marker);
                    bindinfoBubble(marker, map, infoBubble, date, html)
                    break;
                }
            }
        }
    });
  }

function bindinfoBubble(marker, map, infoBubble, date, html) {
  google.maps.event.addListener(marker, 'click', function() {
    infoBubble.addTab(date, html)
    infoBubble.open(map, marker);
  });
}

function addtabFunction (marker, map, date, html){
    infoBubble.open(map, marker);
    infoBubble.addTab(date, html);
}

function downloadUrl(url,callback) {
 var request = window.ActiveXObject ?
    new ActiveXObject('Microsoft.XMLHTTP') :
    new XMLHttpRequest;

request.onreadystatechange = function() {
    if (request.readyState == 4) {
    request.onreadystatechange = doNothing;
    callback(request, request.status);
    }
};

request.open('GET', url, true);
request.send(null);
}

function doNothing() {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:10:47.593

假设标记已经创建，下面是你要做的。

```
google.maps.event.addListener(marker, 'click', function() {
      if (!infoBubble.isOpen()) {
        infoBubble.open(map, marker);
      }
}); 
```

来源：[查看本例的来源](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html/)

**更新：**我有点懒得写代码，但下面是想法。这是你想要的？

```
// declare and initialise an array of {marker: <marker>, ib: <infoBubble>} prior

for(var i=0; i<markerArray.length; i++ ) {
    if(markerArray[i].marker is already there) {
        markerArray[i].ib.addTab() // or
        markerArray[i].ib.updateTab()
    } else {
        var newMarker = create new marker()
        var newIB = create new inforBubble()

        infoBubble.addTab()
        google.maps.event.addListener(marker, 'click', function() {
            if (!infoBubble.isOpen()) {
            infoBubble.open(map, marker);
        }

        markerArray[i].marker = newMarker
        markerArray[i].ib= newIB
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T04:53:16.683

我假设您将拥有一个包含 latlng 的数组，用于在地图上放置标记。因此，对于您的问题，一个可能的解决方案是每次放置标记时都可以搜索具有现有标记的数组。

我创建了另一个存储标记的数组，稍后在附加事件侦听器时搜索该数组以查看其位置是否匹配。请参见下面的示例。

示例（*未测试*）-

```
var markersArray= [];
for (var i = 0; i < latlngArray.length; i++) { 
   var lat = parseFloat(latlngArray[//some index]);
   var lng = parseFloat(latlngArray[//some index]);
   var pos = new google.maps.LatLng(lat, lng); 
   marker = new google.maps.Marker({ position: pos, map: map });
   markersArray.push(marker);
   if(markersArray[i].getPosition().equals(marker.getPosition()))
   {
     addTab(markersArray[i])
   }
   else
   {
    openBubble(marker);  
   }
}  
function openBubble(currentMarker)                
{
     google.maps.event.addListener(currentMarker, 'click', function() {
       if (!infoBubble.isOpen()) {
       infoBubble.open(map, marker);
       }
     }); 
   }
}
function addTab(existingMarker)
{
     google.maps.event.addListener(existingMarker, 'click', function() {
     infoBubble.addTab(title,content);
     }); 
} 
```

# c# - 获取 WebClient 下载的缓存数据的年龄

> ID：13922417
> 
> 赞同：1
> 
> 时间：2012-12-17T21:23:54.133
> 
> 标签：c#, windows-phone-7

我在 WP7 应用程序中使用 WebClient 从我无法控制的服务器下载一些数据。数据似乎被系统缓存了——一旦从服务器下载数据，缓存的副本将在之后提供一段时间。我对这种缓存行为没有任何问题（它实际上对我来说是理想的），但我想向用户表明他们正在查看的数据可能已经过时了。

我正在寻找一些属性或方法，可以为我提供下载和缓存数据的时间，以便我可以以“X 分钟前上次更新”的形式显示一些文本。

我查看了 OpenReadCompletedEventHandler 的参数，但找不到与缓存数据的年龄有关的任何内容。有没有其他方法可以做到这一点，或者有什么方法可以检测数据是如何检索的（从服务器或缓存中），以便我可以自己记录上次更新时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T00:29:08.177

我最终通过在 URL 中添加一个随机参数来绕过 WebClient 缓存，然后通过将数据存储在独立存储中来实现我自己的缓存系统来解决这个问题。这意味着我可以轻松地跟踪上次从服务器检索数据的时间。如果我认为数据太旧，我可以触发从服务器下载，否则数据只是从内存或隔离存储中获取。

# streaming - 流式传输 MP4 文件

> ID：13922421
> 
> 赞同：0
> 
> 时间：2012-12-17T21:24:19.707
> 
> 标签：streaming, mp4

是否可以通过 HTTP 流式传输 MP4 文件？如果是这样，这会阻止人们下载它，还是人们仍然可以轻松下载它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:01:05.323

它可以通过 http 流式传输 mp4。您需要将 mime-type 设置为“video/mp4”。

它与任何其他 http 请求响应一样，因此人们可以使用标准 http 命令行工具（wget、curl）下载它

# php - 以 html 形式将 DataURI 发布为图像文件

> ID：13922423
> 
> 赞同：1
> 
> 时间：2012-12-17T21:24:31.483
> 
> 标签：php, javascript, jquery, forms

我正在使用 jSignature 来允许以 html 形式签名（确切地说是 jQuery Mobile）。我希望能够在表单中提交签名的图像。

通过下面的代码，我已经完成了最初的几个步骤——这对我来说已经够难了。它成功创建了 DataURI (data:image/png;base64,iVBOR...)，并在调用 placesig 函数时将其添加到隐藏字段 _fid_86 的值中。

我需要帮助：1）如何将 DataURI 转换为提交时可以包含在表单数据中的图像？2）如何将该图像连接到隐藏输入？相同的方法会起作用，还是需要文件输入。

我正在从 web 应用程序将此表单发布到 QuickBase。理想情况下，我希望能够在没有任何服务器端参与的情况下完成此操作，以便应用程序自给自足，而不依赖于 php 或其他托管脚本。

如果那不可能，我可以用 php 来做，但仍然不知道如何做到这一点。

我在这上面花了几天时间。而且我知道我缺乏编程知识是罪魁祸首。解决这个问题对我来说是巨大的。

谢谢！！

```
<body>
<script src="jquery-1.8.2.min.js"></script>
<script src="jquery.mobile-1.2.0.min.js"></script>
<script src="jSignature.js"></script>
</head>
<body>

<form name=qdbform method=POST onsubmit='return validateForm(this)' encoding='multipart/form-data' 

encType='multipart/form-data' action=https://www.quickbase.com/db/...?act=API_AddRecord>

<script type="text/javascript">
var $sigDiv = null;

$(document).ready(
    function() 
    {
        $sigDiv = $("#signature1").jSignature({'UndoButton':false,color:"#000000",lineWidth:2});
    }
);

function placesig() 
{
    var datapair = $sigDiv.jSignature("getData", "image");
    var i = new Image();
    i.src = "data:" + datapair[0] + "," + datapair[1];
    var src = $(i).attr('src');
    $("#_fid_86").val(src);

};
</script>

<div id="signature1"></div>

<input data-theme="a" type="button" value="Place Image" onclick="placesig();"/>

<input type="hidden" id="_fid_86" name="_fid_86" />

<input type="submit" value="Save">

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:34:42.377

没有服务器端代码是不可能做到这一点的。jSignature 将生成一个数据 URL，但这不能作为处理文件上传方式的[多部分表单的一部分传递。](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)相反，jSignature 将使用 dataURL 设置一个文本框，并且在服务器上您可以读取它并生成一个文件。这实际上包含在一个名为[jSignature_Tools_Base30.php](https://github.com/willowsystems/jSignature/blob/master/extras/SignatureDataConversion_PHP/core/jSignature_Tools_Base30.php)的示例中（甚至在 PHP 中） 。就我个人而言，我会选择[SVN 示例](https://github.com/willowsystems/jSignature/blob/master/extras/SignatureDataConversion_PHP/core/jSignature_Tools_SVG.php)（通过网络传输的数据更少，扩展更灵活。

# firefox-addon - 使用 page-worker 运行后台脚本不起作用

> ID：13922425
> 
> 赞同：0
> 
> 时间：2012-12-17T21:24:46.117
> 
> 标签：firefox-addon, firefox-addon-sdk

我的用例是我想运行一个可以监听任何页面打开的脚本。然后从该页面中提取一些信息并将其传递到背景页面。为此，我分别使用了 page-mod 和 page-worker。但是消息不会传递到我的 background.html 中的页面脚本

```
/*******************main.js******************/
var pageMod = require("page-mod");

var pageWorker = require("page-worker").Page({
  contentScriptFile: require("self").data.url("background_contentscript.js"),
  contentURL: require("self").data.url("background_local.html"),
});

pageMod.PageMod({
  include: ["*"],
  contentScriptFile: require("self").data.url("turn.js"),
  onAttach: function(worker) {
    worker.port.on("turn-event", function(message) {
      console.log("Inside Main : PageMode message = " + message);
      pageWorker.port.emit("event-from-main", message);
    });
  }
});

/***************** turn.js*************/
self.port.emit("turn-event", JSON.stringify(document.title));

/**************background_contentscript.js*************/
self.port.on("event-from-main", function(message) {
  console.log("Inside background_local.js message = " + message);
  var event = document.createEvent('CustomEvent');
  event.initCustomEvent("event-from-cs", true, true, JSON.stringify(message));
  document.documentElement.dispatchEvent(event);
});

/*********************background_local.html******************/
<!DOCTYPE html>
<html>
  <head>
    <title>background_local</title>
<script>
  document.documentElement.addEventListener("event-from-cs", function(event) {
    console.log("event detail message: " + event.detail);
  }, false);
</script>
  </head>
  <body>
    <p>Hello</p>
  </body>
</html> 
```

该消息确实到达了 background_contentscript.js，但从未到达 background_local.html。我在这里做错了什么还是看起来像 SDK 的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:26:23.783

阅读[脚本可信页面内容](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/page-worker.html)部分。

# python - Inconsistency using list() function on a CSV reader

> ID：13922440
> 
> 赞同：3
> 
> 时间：2012-12-17T21:26:01.997
> 
> 标签：python, python-2.7

While researching options for an oft-asked question (How to find the number of rows in a CSV reader before iterating), I came across the approach of using `len(list(myCSVReader))`. Yes, I know how klunky and potentially expensive this is, and I won't be using it. But while playing with it, I came across a really puzzling inconsistency:

```
#myFile.txt is a 3-line CSV file
myCSV = csv.reader(open('myFile.txt','rb'),dialect='excel')
print(len(list(myCSV)))
print(list(myCSV)) 
```

When I run this, I get:

```
> 3
> [] 
```

I can understand why you couldn't just use `list()` to convert the reader to a list of lists, but if that's the case, then how/why does a `len()` on this produce the correct result?

-- JDM

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T21:28:58.277

This is what happens when you build a `list` from a `generator`.

*   Generator is an iterable object that yields items one by one. At some point it is exhausted.

*   `csv.reader` returns a generator.

*   When you do `list(generator)`, the list constructor consumes all items from the generator.

*   Next time you try getting something from the generator (e.g. do `list(generator)` another time), it's already exhausted.

**What you can do** is create a list once and use it where needed:

```
myCSV = list(csv.reader(open('myFile.txt','rb'),dialect='excel'))
print(len(myCSV))
print(myCSV) 
```

# asp.net - ASP.NET CustomValidator 不工作

> ID：13922441
> 
> 赞同：3
> 
> 时间：2012-12-17T21:26:08.190
> 
> 标签：asp.net, validation, customvalidator

我有问题：我的页面上有一个自定义验证器，用于验证 imieTextbox 控件。但它不起作用。我不知道为什么。

此方法来自 register.aspx.cs 文件：

```
protected void CustomValidator1_ServerValidate(object source, ServerValidateEventArgs args)
    {
//of course here will be other validation logic but setting IsValid property ti false     is for example
        args.IsValid = false;
    } 
```

这来自register.aspx 文件：

```
 <asp:CustomValidator ID="CustomValidator1" runat="server" 
             ControlToValidate="imieTextbox" Display="Dynamic" 
             ErrorMessage="CustomValidator" 
             onservervalidate="CustomValidator1_ServerValidate" ValidateEmptyText="True" 
             ValidationGroup="A"></asp:CustomValidator> 
```

页面上的提交按钮将属性 CausesValidation 设置为 TRUE 并具有验证组 A（就像我页面上的所有验证器一样）。所有验证器（必填验证器）都可以正常工作，但自定义验证器不行。这是为什么？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T21:30:58.463

You have to call

```
if (Page.IsValid) 
```

on postback on the server, otherwise your server validation will not be called. The RequiredFieldValidator validates on the client, that's why this one is working. However you should always validate on the server as well.

For client side validation you have to write a JavaScript method doing the same. You set the attribute in your CustomValidator:

```
ClientValidationFunction="YourValidationMethod" 
```

and the method does something like this

```
function YourValidationMethod(source, args)
{
   if (valid) // do check here
      args.IsValid = true;
   else
      args.IsValid = false;
} 
```

# knockout.js - Foreach 适用于使用 JSON 但不适用于 ViewModel 的儿童

> ID：13922444
> 
> 赞同：0
> 
> 时间：2012-12-17T21:26:10.530
> 
> 标签：knockout.js, knockout-mapping-plugin

我成功地将分层 JSON 数据绑定到我的视图。但是，一旦我使用 knockout.mapping 将相同的 JSON 数据投影到视图模型中，foreach 函数就不会遍历子数组。

绑定到 viewModel 数据时，我知道子数据（答案）在那里，因为我可以使用显示对象引用

观点：

```
<div data-bind="foreach: $data">
    <p data-bind="html: QuestionText">

    <!-- this section outputs [object Object] when bound to pageViewModel or Json -->
    <p data-bind="html: Answers">

        <!-- RadioButtonSelection-->
        <div data-bind="if: QuestionSelectionMode == 'RadioButtonSelection'">
            <span data-bind="foreach: $data.Answers">
                <input type="radio" data-bind="attr: {name: $parent.QuestionId}, value: AnswerId" /><span data-bind="text: AnswerText"></span>
            </span>
        </div>

        <!-- CheckBoxSelection-->
        <div data-bind="if: QuestionSelectionMode == 'CheckBoxSelection'">
            <span data-bind="foreach: $data.Answers">
                <div><input type="checkbox" data-bind="value: AnswerId"/><span data-bind="text: AnswerText"></span></div>
            </span>
        </div>

        <!-- DropDownListSelection-->
        <div data-bind="if: QuestionSelectionMode == 'DropDownListSelection'">
            <select data-bind="options: $data.Answers, optionsText: 'AnswerText', optionsValue: 'AnswerId'"></select>
        </div>

    </p>
</div> 
```

视图模型代码：

```
<script type="text/javascript">

    /* get the first page of questions and bind them */
    @{ 

        string startUrl = "URL-Removed" + ViewData["formId"] + "?page=" + ViewData["pageNumber"];

    }

    var pageViewModel;

    $.ajax({ url: '@startUrl' ,
        async: false,
        dataType: 'json',
        success: function (data) {
            //console.log("JSON received:  " + JSON.stringify(data));            

            // when i bind to the view model the parent question text shows, but not the child answers
            pageViewModel = ko.mapping.fromJS(data);
            ko.applyBindings(pageViewModel);
            //ko.applyBindings(data);
        },
        error: function (jqXHR, textStatus, errorThrown) {
            console.log("Error: TextStatus: " + textStatus + " errorThrown: " + errorThrown);
        }
    });
    </script> 
```

以下是 JSON 中的一些数据：

```
 [{"FormId":0,"QuestionId":28807,"QuestionSelectionMode":"StaticTextSelection","QuestionText":"<hr />\r\n<div><span style=\"font-size: medium\"><span style=\"color: #003366\"><strong>Event Details</strong></span></span></div>","DisplayOrder":1,"PageNumber":1,"Answers":[]},{"FormId":0,"QuestionId":28782,"QuestionSelectionMode":"RadioButtonSelection","QuestionText":"<div><span style=\"font-size: larger\"><strong>What type of patient safety event is being reported?</strong></span><span style=\"font-size: x-small\"><strong>&nbsp; </strong><font color=\"#ff0000\" size=\"1\">(Required)</font></span></div>","DisplayOrder":2,"PageNumber":1,"Answers":[{"AnswerId":460935,"QuestionId":0,"AnswerTypeId":null,"RegularExpressionId":null,"AnswerText":"Reached the patient","DisplayOrder":1,"Selected":null,"DefaultText":null,"Mandatory":null,"ValidatorId":null,"SyncRefMandatory":null,"FieldLength":null,"AnswerFormId":null,"EntryMaskId":null,"ShowTimeSelector":null,"Disabled":false},{"AnswerId":460936,"QuestionId":0,"AnswerTypeId":null,"RegularExpressionId":null,"AnswerText":"Did not reach the patient (Near Miss)","DisplayOrder":2,"Selected":null,"DefaultText":null,"Mandatory":null,"ValidatorId":null,"SyncRefMandatory":null,"FieldLength":null,"AnswerFormId":null,"EntryMaskId":null,"ShowTimeSelector":null,"Disabled":false},{"AnswerId":460937,"QuestionId":0,"AnswerTypeId":null,"RegularExpressionId":null,"AnswerText":"Unsafe Condition","DisplayOrder":3,"Selected":null,"DefaultText":null,"Mandatory":null,"ValidatorId":null,"SyncRefMandatory":null,"FieldLength":null,"AnswerFormId":null,"EntryMaskId":null,"ShowTimeSelector":null,"Disabled":false}]},{"FormId":0,"QuestionId":46080,"QuestionSelectionMode":"RadioButtonSelection","QuestionText":"<div><span style=\"font-size: larger\"><strong>Was the patient harmed?</strong></span></div>","DisplayOrder":3,"PageNumber":1,"Answers":[{"AnswerId":632595,"QuestionId":0,"AnswerTypeId":null,"RegularExpressionId":null,"AnswerText":"Yes","DisplayOrder":1,"Selected":null,"DefaultText":null,"Mandatory":null,"ValidatorId":null,"SyncRefMandatory":null,"FieldLength":null,"AnswerFormId":null,"EntryMaskId":null,"ShowTimeSelector":null,"Disabled":false},{"AnswerId":632596,"QuestionId":0,"AnswerTypeId":null,"RegularExpressionId":null,"AnswerText":"No","DisplayOrder":2,"Selected":null,"DefaultText":null,"Mandatory":null,"ValidatorId":null,"SyncRefMandatory":null,"FieldLength":null,"AnswerFormId":null,"EntryMaskId":null,"ShowTimeSelector":null,"Disabled":false}]}, and so on... 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T04:21:12.297

在 if 绑定中，您将放入一个完整的语句，而不仅仅是引用视图模型上的属性。因此，您需要调用 observable（作为函数），而不仅仅是引用它。翻译：代替

```
<div data-bind="if: QuestionSelectionMode == 'CheckBoxSelection'"> 
```

你应该有

```
<div data-bind="if: QuestionSelectionMode() == 'CheckBoxSelection'"> 
```

所以这里是更新的标记：

```
<div data-bind="foreach: $data">
    <p data-bind="html: QuestionText">

    <!-- RadioButtonSelection-->
    <div data-bind="if: QuestionSelectionMode() == 'RadioButtonSelection'">
        <span data-bind="foreach: Answers">
            <input type="radio" data-bind="attr: {name: $parent.QuestionId}, value: AnswerId" /><span data-bind="text: AnswerText"></span>
        </span>
    </div>

    <!-- CheckBoxSelection-->
    <div data-bind="if: QuestionSelectionMode() == 'CheckBoxSelection'">
     <span data-bind="foreach: Answers">
            <div><input type="checkbox" data-bind="value: AnswerId"/><span data-bind="text: AnswerText"></span></div>
        </span>
    </div>

    <!-- DropDownListSelection-->
    <div data-bind="if: QuestionSelectionMode() == 'DropDownListSelection'">
        <select data-bind="options: Answers, optionsText: 'AnswerText', optionsValue: 'AnswerId'"></select>
    </div>

</div>​ 
```

这是一个工作小提琴：http: [//jsfiddle.net/g5g36/](http://jsfiddle.net/g5g36/)

其他几点注意事项：

1.  您正在尝试对 p 标签执行 'html:answers' 绑定。html 绑定旨在告诉敲除您的视图模型上有一个 HTML 字符串，您希望将其放入现有标记中。但是随后您在 p 标记内定义了各种其他标记。完全摆脱这个标签。

2.  我必须更正 JSON，以便您使用双斜杠而不是单斜杠（参见小提琴），以使 JSON 解析器满意。这可能与您无关，具体取决于您的服务如何处理事情。

3.  $data 在绑定中是隐含的，因此您可以绑定到“Answers”，而不是绑定到“$data.Answers”。无论哪种方式都有效，但删除 $data 会使它更干净。

4.  从技术上讲，您不应该在 p 标签中包含 div 标签。

5.  p 标签应该是关闭的

# c# - ASP.NET GridView 更新/整体查询结构

> ID：13922448
> 
> 赞同：0
> 
> 时间：2012-12-17T21:26:29.773
> 
> 标签：c#, asp.net

新问题。我有这个作为我的网格视图，我想要它，所以当页面加载时，网格视图充满了数据库信息。

下面是gridview的代码。下面是c#代码。

更新

```
<asp:GridView ID="RegistrantsView" runat="server" AllowPaging="True" 
                 AllowSorting="True" AutoGenerateColumns="True" 
                 CellPadding="4" 
                 ForeColor="#333333" GridLines="None">
                 <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
                 <EditRowStyle BackColor="#999999" />
                 <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                 <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                 <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
                 <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
                 <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
                 <SortedAscendingCellStyle BackColor="#E9E7E2" />
                 <SortedAscendingHeaderStyle BackColor="#506C8C" />
                 <SortedDescendingCellStyle BackColor="#FFFDF8" />
                 <SortedDescendingHeaderStyle BackColor="#6F8DAE" />
             </asp:GridView> 
```

C＃：

```
SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["FFL-New DataConnectionString"].ConnectionString);

protected void Page_Load(object sender, EventArgs e)
{
    connection.Open();//opens connection on page load
    SqlCommand selectAllCommand = new SqlCommand();
    selectAllCommand.CommandText = "select * from registrants";
    selectAllCommand.Connection = connection;

    SqlDataAdapter sda = new SqlDataAdapter();
    sda.SelectCommand = selectAllCommand;

    DataTable dt = new DataTable();
    sda.Fill(dt);

    RegistrantsView.DataSource = dt;
    RegistrantsView.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:31:54.937

First of all you should note that your query is prone to [SQL Injections](http://en.wikipedia.org/wiki/SQL_injection) this is a **Security Risk**!!

Instead of ExecuteNonQuery use a DataAdapter and fill a DataTable, then set the DataSource for the RegistrantsView *before* the `DataBind`:

```
protected void SearchButton_Click(object sender, EventArgs e)
{
    string searchBoxValue = SearchBox.Text;
    string columnNameValue = ColumnName.SelectedValue;
    columnNameValue.ToLower();

    string sqlQuery = "select * from registrants";
    DataTable dt = new DataTable();

    using (SqlCommand searchCommand = new SqlCommand(sqlQuery, connection))
    {
        connection.Open();
        using (SqlDataReader reader = cmd.ExecuteReader())
        {
              dt.Load(reader);
        }
    }

    RegistrantsView.DataSource = dt;
    RegistrantsView.DataBind();
} 
```

And if it's in the PageLoad:

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostback)
    {
        string sqlQuery = "select * from registrants";
        DataTable dt = new DataTable();
        using (SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["FFL-New DataConnectionString"].ConnectionString))
        {
            using (SqlCommand searchCommand = new SqlCommand(sqlQuery, connection))
            {
                connection.Open();
                using (SqlDataReader reader = cmd.ExecuteReader())
                {
                      dt.Load(reader);
                }
            }
        }
        RegistrantsView.DataSource = dt;
        RegistrantsView.DataBind();
    }
} 
```

# c# - 从另一个表单返回位图

> ID：13922449
> 
> 赞同：-1
> 
> 时间：2012-12-17T21:26:33.133
> 
> 标签：c#, winforms, image-processing, bitmap

我有两种表格，表格一处理图像压缩，表格二处理细节。细节如; 浏览位图、图像质量和保存文件名。

我目前遇到的问题是位图正在返回到表单一为空。这会产生错误`Object reference not set to an instance of an object`

问题出在哪里？我已经盯着屏幕太久了，另一双眼睛真的很有帮助。

代码表格1：

```
 public void compressImg(Bitmap bitmp, string fileName, int quality)
            {

                //string fileName = Microsoft.VisualBasic.Interaction.InputBox("Enter a file name:", "Save File", "JPEGCompress", 250, 250);

                ImageCodecInfo[] codecs = ImageCodecInfo.GetImageEncoders();
                ImageCodecInfo ici = null;

                foreach (ImageCodecInfo codec in codecs)
                {
                    if (codec.MimeType == "image/jpeg")
                        ici = codec;
                }

                EncoderParameters ep = new EncoderParameters();
                ep.Param[0] = new EncoderParameter(System.Drawing.Imaging.Encoder.Quality, (long)quality);
                bitmp.Save("C:\\" + fileName + ".jpg", ici, ep);

            }

 private void compressAnImageToolStripMenuItem_Click(object sender, EventArgs e)
            {

                string fileName;
                int quality;
                Bitmap bitmp;

                Form2 f2 = new Form2();
                f2.ShowDialog();
                fileName = f2.getFileName;
                quality = f2.getQuality;
                bitmp = f2.getBtmap;

                //Bitmap newbitmp = new Bitmap(bitmp);

                compressImg(bitmp, fileName, quality);

            } 
```

代码表格2：

```
 public partial class Form2 : Form
    {

        public static string fileName;
        public static int quality;
        public Bitmap bitmp, bitmap1;

        public Form2()
        {
            InitializeComponent();
        }

        private void Form2_Load(object sender, EventArgs e)
        {

        }

        public string getFileName
        {          
            get { return fileName; }
            set { fileName = txtFileName.Text; }
        }

        public int getQuality
        {
            get { return quality; }
            set { quality = imgQualTrkBar.Value; }
        }

        private void BtnSubmitInfo_Click(object sender, EventArgs e)
        {
            this.Close();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            if (openFileDialog2.ShowDialog() == DialogResult.OK)
            {
                bitmp = new Bitmap(openFileDialog2.FileName);

            }
        }

        public Bitmap getBtmap
        {
            get { return bitmap1; }
            set { bitmap1 = new Bitmap(bitmp); }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:36:36.377

首先，您的错误是因为您将`Bitmap`对象存储在`bitmp`.. 但从`bitmap1`您的`getBtmap`财产返回。

`getSomething`此外，当它们还具有不接受值的设置访问器时，您已经调用了您的属性。这会让你感到困惑（你的变量名也会..考虑重命名它们）。

考虑一下：

```
frm.getFileName = "MY FILE NAME"; 
```

..不存储“我的文件名”..它存储文本框值。考虑改变这个逻辑。

# wpf - WPF 画布性能问题

> ID：13922462
> 
> 赞同：2
> 
> 时间：2012-12-17T21:27:15.613
> 
> 标签：wpf, performance, canvas

首先让我提一下，我浏览了很多很多很多关于 WPF 性能的文章和论坛。我意识到这将接近另一篇文章的转发，但请多多包涵。

首先，我正在 WPF 中创建一个 2D CAD 程序。最初我的想法是使用 Shape 对象并使用内置的命中测试/等。这对于性能来说还不够好，因为我需要在屏幕上显示超过 5000 条线/弧线。

以下是我尝试过的不同方法：

*   使用 Shape 对象并将它们作为子对象添加到 Canvas

*   覆盖 Canvas 的 OnRender 方法并使用 DrawingContext

*   直接创建一个VisualHost并使用DrawingVisuals，仅在DrawingVisual对象发生变化时更新。

在每种情况下，我都面临几乎相同的命运：大约 2000 行时，运动开始拖后腿。具体来说，我可以选择一组线并告诉它们移动。它们对鼠标移动做出反应（如在大多数 CAD 程序中）。等待这些对象赶上的时间相当长。

我在这里不知所措。我已经阅读了我能找到的每一篇文章，但仍然没有找到解决方案。我的下一个选择是回到 GDI+ 来完成我需要的工作，但如果可能的话，我正在寻找 WPF 解决方案。

提前感谢您提供的任何帮助。

# java - 使用图形 api 在用户相册中获取照片的链接是什么？

> ID：13922466
> 
> 赞同：0
> 
> 时间：2012-12-17T21:27:30.680
> 
> 标签：java, android, facebook, json, facebook-graph-api

我正在使用图形 API 从 facebook 获取照片并显示在我的 Android 应用程序中。我能够通过使用 `https://graph.facebook.com/[USERID]/albums?access_token=[ACCESSTOKEN]` 并能够解析 json 并获取专辑的名称和 ID 来获取专辑的 JSON。但是当我通过相册 id 来获取相册中的图片时`https://graph.facebook.com/[ALBUMID]/photos`，它返回一个空白的 json。

```
Main Json

"data": [
  {
     "id": "123456",
     "from": {
        "name": "My Name",
        "id": "560123317"
     },
     "name": "My Photos",
     "link": "https://www.facebook.com/album.php?fbid=123456&id=560123317&aid=474294",
     "privacy": "everyone",
     "type": "app",
     "created_time": "2012-12-15T00:47:58+0000",
     "updated_time": "2012-12-15T00:48:57+0000",
     "can_upload": false
  },] 
```

我传递的 id 是`123456`，`https://graph.facebook.com/[ALBUMID]/photos`它返回一个空白 json，尽管专辑中有图像。如果我做错了什么，请指出并帮助我纠正问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T00:34:25.503

我找到了解决我必须使用的问题的方法，`https://graph.facebook.com/<albumid>/photos?access_token=<token>`而不是`https://graph.facebook.com/<albumid>/photos` 通过使用带有访问令牌的完整 url，我现在能够获取相册中的照片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:57:00.190

该应用可能无权访问该相册。它可能是由另一个应用程序创建的相册。

`"type": "app"`提示相册为应用相册。 `"can_upload": false`意味着该应用无权将照片放在那里。这可能是因为缺少权限，也可能是因为它仅“[在用户拥有相册、相册未满且应用程序可以将照片添加到相册时返回 true](https://developers.facebook.com/docs/reference/api/album/#fields) ”。

另外，您是代表拥有相册的用户还是其他人使用访问令牌？所有用户都可以在使用“friends_”权限时阻止应用程序通过他们的朋友访问他们的东西。

# javascript - Asynchronously loading Nokia Maps Javascript API

> ID：13922469
> 
> 赞同：9
> 
> 时间：2012-12-17T21:27:47.550
> 
> 标签：javascript, here-api

I'm trying to load the Nokia Maps javascript API asynchronously :

```
var oScript  = document.createElement('script');
oScript.type = 'text/javascript';
oScript.async = true;
oScript.src  = "http://api.maps.nokia.com/2.2.3/jsl.js?with=maps,positioning,placesdata";
document.body.appendChild(oScript); 
```

As per expected, it doesn't work right away, so I tried overriding document.write thinking that could be the problem, to no avail (for instance, I did this [https://stackoverflow.com/a/7884407/1741150](https://stackoverflow.com/a/7884407/1741150)).

The error I come across is that basically nokia.maps.map is not defined (hence, I cannot create a map using :

```
new nokia.maps.map.Display(); 
```

Is there a way to do this, or anybody has ever managed to do so ? I might be missing something

EDIT : I'm actually trying to *write* the script asynchronously in the page, not creating the map asynchronously (which is not a problem of course)

Thanks,

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T16:36:02.633

**适用于 JavaScript 的 HERE Maps API (3.0)**

更新的 3.0 HERE Maps API for JavaScript 是很好的模块化，并且完全支持异步加载。例如，可以使用[requirejs](http://www.requirejs.org/)来加载一个简单的地图，如下所示：

```
 require(['mapsjsService','mapsjsEvents', 'mapsjsUi'], function () {

      var platform = new H.service.Platform({
          app_id: '<YOUR APP ID>',
          app_code: '<YOUR TOKEN>'
      });
      var defaultLayers = platform.createDefaultLayers();
      var map = new H.Map(document.getElementById('map'),
        defaultLayers.normal.map);
      var behavior = new H.mapevents.Behavior(new H.mapevents.MapEvents(map));
      var ui = H.ui.UI.createDefault(map, defaultLayers);
    }); 
```

配置文件需要分配如下：

```
 requirejs.config({
    baseUrl: '.',
    waitSeconds: 0,
    map: {
      '*': {
        'css': 'require-css' // or whatever the path to require-css is
      }
    },
    paths: {
        'mapsjsCore' : 'https://js.api.here.com/v3/3.0/mapsjs-core',
        'mapsjsService' : 'https://js.api.here.com/v3/3.0/mapsjs-service',
        'mapsjsEvents' : 'https://js.api.here.com/v3/3.0/mapsjs-mapevents',
        'mapsjsUi' :'https://js.api.here.com/v3/3.0/mapsjs-ui',

        'mapsjsCss' :'https://js.api.here.com/v3/3.0/mapsjs-ui',
      },
      shim: {
        'mapsjsService': {
          deps: ['mapsjsCore']
        },
        'mapsjsEvents': {
          deps: ['mapsjsCore']
        },
        'mapsjsUi': {
          deps: ['mapsjsCore', 'css!mapsjsCss']
        }
      }
    }); 
```

可以看出，所有模块都依赖于`mapsjsCore`，但没有一个子模块相互依赖。这`mapsjsUi`是一种特殊情况，因为它具有用于默认外观的关联 CSS 文件。您可以在标题中保留默认 CSS（或您的覆盖），或者使用 requirejs 插件（例如[require-css](https://github.com/guybedford/require-css) ）加载它。应该注意的`waitSeconds:0`是，配置中需要该行以避免第一次将**HERE Maps for JavaScript**库下载到浏览器时超时，因为它们不会在本地找到，因此您依赖于 Internet 连接的速度至少一次。

或者使用 Jquery：

```
$.getScript('https://js.api.here.com/v3/3.0/mapsjs-core.js', function() {
  $.getScript('https://js.api.here.com/v3/3.0/mapsjs-service.js', function() {
    $.getScript('https://js.api.here.com/v3/3.0/mapsjs-mapevents.js', function() {
      $.getScript('https://js.api.here.com/v3/3.0/mapsjs-mapevents.js', function() {
        ////
        //
        // Don't forget to set your API credentials
        //
        var platform = new H.service.Platform({
          app_id: 'DemoAppId01082013GAL',
          app_code: 'AJKnXv84fjrb0KIHawS0Tg',
          useCIT: true
        });
        //
        //
        /////
        var defaultLayers = platform.createDefaultLayers();
        var map = new H.Map(document.getElementById('map'),
          defaultLayers.normal.map, {
            center: {
              lat: 50,
              lng: 5
            },
            zoom: 4
          });
        var behavior = new H.mapevents.Behavior(new H.mapevents.MapEvents(map));
        var ui = H.ui.UI.createDefault(map, defaultLayers);
      });
    });
  });
});
```

```
body {
       margin: 0;
       padding: 0;
     }

     #map {
       width: 100%;
       height: 100%;
       position: absolute;
       overflow: hidden;
       top: 0;
       left: 0;
     }
```

```
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<meta name="viewport" content="initial-scale=1.0, width=device-width" />
  <link rel="stylesheet" type="text/css"
    href="http://js.api.here.com/v3/3.0/mapsjs-ui.css" />
</head>
<body>
<div id="map"></div>
</body> 
```

**适用于 JavaScript 的诺基亚地图 API (2.2.4-2.5.4)**

**诺基亚 Maps API for JavaScript（2.2.4 及更高版本）最近弃用**的版本支持异步加载，如下所示

具体可以[参考 API 参考的](http://developer.here.com/maps_js)[Feature.load](http://developer.here.com/docs/maps_js/topics_api_pub/nokia.Features.html#topic-apiref__Features-load-static)方法**Feature.load**有两个回调，一个是成功的（你可以继续添加你的[App ID 和 token](http://www.developer.nokia.com/Community/Wiki/How_to_Obtain_Your_Own_Nokia_appID_and_Token)，显示地图等），一个是失败的回调。

 **```
// this is our initial script that will load jsl.js
var oScript = document.createElement("script"),
  //once the jsl.js is load, we load all features
  onScriptLoad = function() {
    nokia.Features.load(
      // here we get all features (provide one or many "with" parameters
      nokia.Features.getFeaturesFromMatrix(["all"]),
      // an callback when everything was successfully loaded
      onApiFeaturesLoaded,
      // an error callback
      onApiFeaturesError,
      // a target document (or null if the current document applies)
      null,
      // a flag indicating that loading should be asynchronous
      false
    );
  },
  // once all features we loaded, we can instantiate the map
  onApiFeaturesLoaded = function() {

    /////////////////////////////////////////////////////////////////////////////////////
    // Don't forget to set your API credentials
    //
    // Replace with your appId and token which you can obtain when you 
    // register on http://api.developer.nokia.com/ 
    //
    nokia.Settings.set("appId", "YOUR APP ID");
    nokia.Settings.set("authenticationToken", "YOUR TOKEN");
    //          
    /////////////////////////////////////////////////////////////////////////////////////

    var mapContainer = document.getElementById("mapContainer");
    var map = new nokia.maps.map.Display(mapContainer, {
      center: [40.7127, -74.0059],
      zoomLevel: 13,
      components: [new nokia.maps.map.component.ZoomBar(),
        new nokia.maps.map.component.Behavior(),
      ]
    });
  },
  // if an error occurs during the feature loading
  onApiFeaturesError = function(error) {
    alert("Whoops! " + error);
  };

oScript.type = "text/javascript";
// NOTE: tell jsl.js not to load anything by itself by setting "blank=true"
oScript.src = "http://api.maps.nokia.com/2.2.4/jsl.js?blank=true";
// assign the onload handler
oScript.onload = onScriptLoad;

//finally append the script
document.getElementsByTagName("head")[0].appendChild(oScript);
```

```
 body {
       margin: 0;
       padding: 0;
     }

     #mapContainer {
       width: 100%;
       height: 100%;
       position: absolute;
       overflow: hidden;
       top: 0;
       left: 0;
     }
```

```
<!DOCTYPE html>
    <html>
        <head>
            <meta http-equiv="content-type" content="text/html; charset=utf-8">
            <title>Asynchronous Loading</title>
        </head>
        <body>
            <div id="mapContainer"></div>

       </body>
    </html>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T10:19:20.763

如果你想使用诺基亚地图 API ，你应该看看[jHERE](http://jhere.net/)库，它会给你一个流畅的异步加载以及一堆很酷的其他功能。**

# objective-c - Video like in Spotlight?

> ID：13922470
> 
> 赞同：0
> 
> 时间：2012-12-17T21:27:58.213
> 
> 标签：objective-c, macos, cocoa

I use Quicklook to preview videos. However, instead of showing the preview with a big "Play" button in the middle of the preview panel, my videos are display with a small navigation bar on the bottom.

Does anybody know how to make Video in a QL look like the one in Spotlight (big button, no navigation) ?

Or just how to modify the standard navigation ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:16:37.117

尝试使用[QLPreviewView](https://developer.apple.com/library/mac/documentation/Quartz/Reference/QLPreviewView_Class/)而不是 QLPreviewPanel。

# c# - Cancel ManipulationStarting event to prevent drag&drop

> ID：13922471
> 
> 赞同：0
> 
> 时间：2012-12-17T21:28:02.323
> 
> 标签：c#, drag-and-drop, windows-runtime, routed-events

There are several events which deal with manipulation (and thus drag&drop):

*   ManipulationStarting
*   ManipulationStarted
*   ManipulationDelta
*   ManipulationInertiaStarting
*   ManipulationCompleted

In the ManipulationStarting event, the event args (type [ManipulationStartingRoutedEventArgs](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.input.manipulationstartingroutedeventargs)) allow me to set the Mode attribute to ManipulationModes.None -- is it correct that this means that no manipulation is allowed and thus no drag&drop?

I'm asking because I've come across a strange behaviour when I was playing with the official [XAML user input events sample application](http://code.msdn.microsoft.com/windowsapps/Input-3dff271b), especially with scenario 4 (drag&drop).

Just set the Mode to ManipulationModes.None in the ManipulationStarting event of Scenario4.xaml.cs:

```
void ManipulateMe_ManipulationStarting(object sender, ManipulationStartingRoutedEventArgs e)
{
    forceManipulationsToEnd = false;
    e.Mode = ManipulationModes.None;   // <-- this is new
    e.Handled = true;
} 
```

Nevertheless, with every third drag attempt I can drag the rectangle around. I've recorded a video to demonstrate this: [http://www.youtube.com/watch?v=psytuTailHg](http://www.youtube.com/watch?v=psytuTailHg).

This problem does not only occur with this sample but also in my own application.

### Questions:

*   Why is there such a strange behavior?
*   What's the best way to cancel the drag&drop event (for instance if some conditions are not met)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:45:01.823

例如，在 gridview 上，您可以实现 DragItemStarting 事件，并设置`e.Cancel = true;`为防止这种行为 - 这不符合您的需求吗？

# c++ - Win32 and DirectX application in QtCreator

> ID：13922477
> 
> 赞同：0
> 
> 时间：2012-12-17T21:28:51.023
> 
> 标签：c++, visual-studio, qt, winapi, directx

I need to create a Win32/DirectX project, which I started in VS2010, but I just can't stand it as a C++ IDE, so I'd prefer to use QtCreator instead.

I've tried two ways of doing it: creating a VS project in VS2010 and using Qt plugin to generate .pro file, and creating a plain C++ project in QtCreator and adding all dependencies myself. Unfortunately neither of this ways worked.

In the first case the option to generate a .pro file ("Create basic .pro file) from VS project is just disabled (even though I can open and build projects created in QtCtreator).

In the second case I'm not sure what do I need in my .pro file to avoid linker errors. For example below is an output of compiling an application that just shows a simple empty window together with my pro file:

![enter image description here](../Images/b271106b5fd68927024065363e56497b.png)

Finally in QtCreator I have to explicitly specify all string as LPCSTR with L"string" while VS doesn't seem to complain about it. Any way around this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:35:23.693

您确定您的 Windows SDK 安装正确吗？你可以从这里得到它：http: [//www.microsoft.com/en-us/download/details.aspx?id=8279](http://www.microsoft.com/en-us/download/details.aspx?id=8279)。为了安装它，我不得不取出一个更新的 Visual C++ 分发包，但它后来又回来了。您所有的链接问题似乎都来自核心 Win32 的东西，所以这是我对出了什么问题的猜测。

我刚决定试一试 QT Creator，在设置东西时遇到了这个页面，但它现在可以工作了，我的项目文件几乎和你的一样，所以我会检查安装。我使用的是 DX9 而不是 10（计划支持 9 和 11），但就像我说的那样，您的链接错误不是来自 DirectX。

SDK 中的 msvc 编译器据说可以与 QT Creator 一起使用，但我还没有尝试过。我正在使用 MINGW，工作正常，COM 可以跨编译器工作，这就是时髦的 C 风格界面的重点。我进行了切换，因为我有一个想法，使用 msvc 尚不支持的 c++11“默认”关键字更容易。我可以为我的基本数据类使用构造函数，并且仍然可以使用 memset 和 memcpy，并在联合等中使用它们。

# javascript - 使用 SoundCloud API 动态嵌入音乐播放器收到错误

> ID：13922480
> 
> 赞同：0
> 
> 时间：2012-12-17T21:28:54.843
> 
> 标签：javascript, jquery, iframe, soundcloud

在我的网站上，我希望用户能够在输入栏中键入 SoundCloud URL，然后单击保存按钮将输入栏变成播放该 URL 的 SoundCloud 音乐播放器。但是，我在 Chrome 控制台中收到以下错误消息：

```
Unsafe JavaScript attempt to access frame with URL http://jsfiddle.net/AGcQm/ from frame with URL http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F71112492&show_artwork=true&color=434C58&maxheight=266\. Domains, protocols and ports must match. 
```

这是 jsFiddle 中的确切代码：

```
http://jsfiddle.net/AGcQm/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T21:40:16.613

这应该可以正常工作：

[http://jsfiddle.net/AGcQm/2/](http://jsfiddle.net/AGcQm/2/)

```
$("#btnGo").click(function() {
SC.oEmbed(
    $("#sndUrl").val(),
    {
        color: "434C58",
        maxheight: 266
    },
   $("#soundcloud")[0]);

$("#sndUrl").hide();
$("#btnGo").hide();
}); 
```

编辑：我收到与您描述的相同的警告。这似乎是 Chrome 的一些已知问题，但它不会阻止代码工作。基本上 soundcloud iFrame 正在尝试访问父级，而 Chrome 不允许这样做。

# php - Repopulate select menu after adding new item

> ID：13922481
> 
> 赞同：0
> 
> 时间：2012-12-17T21:28:56.623
> 
> 标签：php, ajax, jquery

I looked around and wasn't able to see anything that fit my needs. Basically I am trying to refresh the select menu (not the entire page) once an item is added to it. I currently have an ajax query that allows a user to add a new folder, which works perfectly. Once it is added I want that folder option to be added to the select menu. Below is my code:

HTML:

```
<form>
<select id="basic-combo" name="basic-combo" size="1" onchange="showFolders(this.value)">
  <?php
     foreach ($folder as $t)
     {
       echo '<option value="'.$t['folder_id'].'">'.$t['name'].'</option>';
     }
   ?>  
 </select>
 </form>

 // This is the popup form to add a new folder
 <div style="float:right; margin-top:10px;">
        <div class="messagepop pop">
            <form method="post" id="new_folder" >
                <p><label for="folder">Folder Name</label><input type="text" size="20" maxlength="13" name="folder_name" id="folder_name" /></p>
                <p><input type="submit" value="Add" id="message_submit"/> or <a class="close" href="/">Cancel</a></p>
            </form>
        </div>

      <a href="#" id="add" title="Add Folder" class="icon-plus icon-black"></a>
      <a href="#" title="Delete Folder" class="icon-minus icon-black"></a>
      <a href="#" title="Edit Folder" class="icon-folder-open icon-black" ></a>
  </div> 
```

Javascript:

```
$("#message_submit").on("click", function(e){
    e.preventDefault();
      var data = $("p").find("#folder_name").val()
      console.log(data); // Testing data

     $.ajax({
        url: '<?php echo base_url().'account/members_home/add_folder';?>', 
        type: 'POST',
        data: { val: data },
        success: function(output_string){
            $(".success").text("Your folder was added!!").show().css({"color" : "green", "margin-top" : "10px"});
            $(".success").fadeOut(10000);
        }
      });

    deselect();
    $.ajax({
      url: '<?php echo base_url().'account/members_home/getFolderID';?>', 
      type: 'POST',
      data: { val1: data },
      dataType: 'json',  
      success: function(output_string){
         console.log(output_string['folder_id'][0]); // The request works
         showFolders(output_string['folder_id'][0]);

          // THIS IS THE PART WHERE I AM TRYING TO REPOPULATE THE SELECT MENU
         var newSelect = $('<option value="' + output_string['folder_id'][0] + '" >' + data + '</option>');
         $('#basic-combo').append(newSelect);
         $("#basic-combo option[value='" + output_string['folder_id'][0] + "']").attr('selected', 'selected'); 
       }
    });   

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:38:17.440

尝试这个：

```
var mySelect = $('#basic-combo');
mySelect.append(
    $('<option></option>').val(output_string['folder_id'][0]).html('folder name goes here').attr("selected", "selected")
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:59:55.750

我最终为那些想知道的人使用了这个：

```
$('#folder_select').append(
     $('<option></option>', {value: val2, text: data})).val(val2); 
```

# wordpress - URL Rewrite/Reverse Proxy of Friendly Names IIS 7 and Wordpress

> ID：13922486
> 
> 赞同：1
> 
> 时间：2012-12-17T21:29:04.333
> 
> 标签：wordpress, url, iis-7, proxy, rewrite

My Configuration looks like this:

Server A is hosting a website - sitea.com It is also reverse proxying to Server B that is hosting a Blog site.

The reverse proxy works just fine, if I navigate to sitea.com/blog it takes me to server b. I set up friendly names on Server B for the blog posts. If I Navigate to server b from a browser the Friendly names work, with out issue, but if I navigate to the blog posts from Server A, I get a page cannot be found.

Any ideas?

# pyrocms - PyroCMS 访问模块内的视图

> ID：13922488
> 
> 赞同：0
> 
> 时间：2012-12-17T21:29:17.683
> 
> 标签：pyrocms

如何访问自定义模块管理面板中的视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T05:44:43.130

它在链接（锚标记）中非常简单，您只需像这样在控制器中指定方法的路径

```
<a href="admin/your-controller-name/your-method-name">Your link</a> 
```

现在在您的控制器中，您必须创建一个您的方法名称的方法。您必须在其中加载这样的视图

```
$this->template
  ->set('your-data',$your-data)
  ->build('your-view'); 
```

如果您的视图在管理端，那么您应该像这样在构建中指定它

```
build('admin/your-view'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T20:34:37.137

实现这一点的最佳方法是使用 jQuery 对系统进行 AJAX 调用。例如，您可以将链接加载到您的博客管理员：

```
//request blog admin index
$('#link').get('admin/blog', function(data) {
  //Insert response into #element
  $('#element').html(data);
}); 
```

这将加载整个主题。如果您只想查看博客或要加载的页面，只需在其控制器方法中插入这段代码：

```
 if ($this->input->is_ajax_request()) {
    $this->template->set_layout(FALSE);
  } 
```

对于博客/管理员，上面已经完成，所以 jQuery 就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T14:55:15.177

这可能不是正确的答案，但您的问题含糊不清。

```
$this->load->view('modulename/viewname'); 
```

您可以在控制器或视图中执行此操作。

# javascript - $watch callback is being executed before the expression evaluates and no more

> ID：13922495
> 
> 赞同：0
> 
> 时间：2012-12-17T21:29:57.873
> 
> 标签：javascript, angularjs

I'm writing a controller that reacts to an update on a given controller property change. I'm writing tests for it, but I realised that the $watch callback is being called before the code that updates the model.

Moreover, after the premature $watch callback invocation and the code that updates the model, the $watch callback is not called again.

It seems to me that the $watch callback is being called during the controller instantiation and the expression observer is not configured, or the like.

What do you guys think?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T04:41:29.307

好吧，`scope.$watch`应该这样做，马上开火。这是最初的更新。它会进行初始触发，然后任何后续触发仅因实际更改而发生。您可以检测初始运行 if `newValue === oldValue`，其中这些是您的手表回调的第一个和第二个参数。

至于为什么不再调用它，您是否在正常 Angular 上下文之外更改了范围属性？如果是这样，您将需要一个`scope.$apply`.

# java - Right Period between two Java Dates

> ID：13922496
> 
> 赞同：0
> 
> 时间：2012-12-17T21:30:07.123
> 
> 标签：java, jodatime

I need help to get the Period between two Java Dates. I use JodaTime for the calculation but the result isn't correct.

Start: 11.11.2012 12:00
End: 16.12.2012 20:15
(German time standard)
Result musst be 5 weeks, 0 days, 8 hours and 15 minutes.

I try it with

```
Period period = new Period( start.getTime(), end.getTime() );
weeks = Weeks.weeksBetween( new DateTime( start ), new DateTime( end ) ).getWeeks();
days = period.getDays();
hours = period.getHours();
minutes = period.getMinutes(); 
```

and got 5w 5d 8h 15m.

**EDIT:**
Thanks for the help but i think i use the JodaTime Period wrong. Off course is the output of 5w 5d 8h 15m right but what i want is more like this.

```
int days = Days.daysBetween( start, end ); // musst be 35 days
int weeks = ( days - ( days % 7 ) ) / 7;
days = days % 7; 
```

Now is my result 5 weeks and 0 days. Sorry for the confusion and thanks for the help.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T21:36:49.823

```
 DateTime start = new DateTime(new Date(2012, 11, 11, 12, 00, 00));
    DateTime end = new DateTime(new Date(2012, 12, 16, 20, 15, 00));
    Period period = new Period(start, end);
    System.out.println("Weeks: " + Weeks.weeksBetween( new DateTime( start ), new DateTime( end ) ).getWeeks());
    System.out.println("Days: " + period.getDays());
    System.out.println("Hours: " + period.getHours());
    System.out.println("Minutes: " + period.getMinutes()); 
```

输出是

```
 Weeks: 5
    Days: 5
    Hours: 8
    Minutes: 15 
```

像魅力一样工作，
而不是`Weeks.weeksBetween`您可以使用下一个解决方案（使用`PeriodType`）

```
PeriodType periodType = PeriodType.standard().withMonthsRemoved();
Period period = new Period(new Date(2012, 11, 11, 12, 00, 00).getTime(), new Date(2012, 12, 16, 20, 15, 00).getTime(), periodType);
System.out.println(period.getWeeks()); 
```

输出是

```
5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:50:00.180

对于您想要的输出，我相信这是解决方案：

```
 DateTime start = new DateTime(2012, 11, 11, 12, 0);
    DateTime end = new DateTime(2012, 12, 16, 20, 15);

    Weeks weeks = Weeks.weeksBetween(start, end);
    Period period = new Period(start.plus(weeks), end);
    System.out.println("Weeks : " + weeks.getWeeks());
    System.out.println("Days : " + period.getDays());
    System.out.println("Hours : " + period.getHours());
    System.out.println("Minutes : " + period.getMinutes()); 
```

Period 将计算一个月而不是 5 周。所以我们首先计算两个日期之间的周数，然后使用 Period 来计算剩余的日期。

# bash - 查找所有出现并用模式匹配替换字符串

> ID：13922501
> 
> 赞同：1
> 
> 时间：2012-12-17T21:30:41.443
> 
> 标签：bash, sed

我想对以下几行进行字符串替换。我不想替换任何未显示在 URL 格式中的事件，因此不应该替换`secure.XYZ.ab.mydomain.com`一行本身或可变格式 ( ) 的事件。`$myvar = secure.XYZ.ab.mydomain.com`

```
https://secure.XYZ.ab.mydomain.com -> https://secure.future.qa.mydomain.com 
```

我遇到的问题是，`XYZ`并且`ab`可能是 3 个不同变量的组合。所以为了更容易，我想替换`https://`和 之前的所有内容`.mydomain.com`。

忘了补充，我将循环浏览目录中的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:37:06.267

```
 echo "https://secure.XYZ.ab.mydomain.com"|sed -r 's#(https://secure\.).*(\.mydomain.com)#\1future.qa\2#'              
https://secure.future.qa.mydomain.com 
```

awk：

```
echo "https://secure.XYZ.ab.mydomain.com"|awk 'BEGIN{FS=OFS="."} {$2="future";$3="qa"}1'
 https://secure.future.qa.mydomain.com 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:35:07.637

你可以：

```
echo "https://secure.XYZ.ab.mydomain.com" | sed -e 's+https://[^/]*\.mydomain.com+https://secure.future.qa.mydomain.com+' 
```

如果它在文件中，您可以：

```
sed -ie 's+https://[^/]*\.mydomain.com+https://secure.future.qa.mydomain.com+g' <filename> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T21:57:46.827

在目录中的所有文件中搜索和替换：

```
find . -maxdepth 1 -type f -exec sed 's_https://.*[.]mydomain[.]com_https://secure.future.qa.mydomain.com_g' {} \; 
```

# python - python中的对象销毁

> ID：13922505
> 
> 赞同：1
> 
> 时间：2012-12-17T21:30:59.843
> 
> 标签：python, singleton, destructor

我对python比较陌生。让我举个例子：

我创建了名为“person”的类对象

```
class person:
    name = ""
    age = ""
    phones = []
    def add_phone(self, number):
        self.phones.append(number) 
```

让我们准备一些数据以供以后使用：

```
names = ["jhon", "tony", "mike", "peter"]
ages = [34, 36, 23, 75]
phones = [7676, 7677, 7678, 7679] 
```

让我们进入一个for循环：

```
for i in range(0,4):
    new_person = person() 
```

据我了解，每次执行前一行时，都会创建一个新对象 person 并称为 new_person，并且前一次迭代中变量 new_person 中的任何对象都应该被销毁。然而，这种情况并非如此：

```
 new_person.name = names[i]
    new_person.age = ages[i]
    new_person.add_phone(phones[i])

    print "i= " + str(i)
    print "name= "+ new_person.name
    print "age= "+ str(new_person.age)
    print "phones:"
    print new_person.phones 
```

`new_person.phones`包含我们在之前的迭代中添加的电话。有人看到我错过了什么吗？这是否意味着对象类“人”的行为就像一个单身人士？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T21:35:34.200

如您所料，对象正在被创建和销毁。问题是`self.phones`属于*类*而不是*实例*，因此由`person`.

要修复，请像这样更改您的课程：

```
class person(object):
    def __init__(self):
        self.name = ""
        self.age = ""
        self.phones = []
    def add_phone(self, number):
        self.phones.append(number) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T21:35:49.587

您正在定义一堆几乎可以肯定是实例级别的类级别属性。我想你想要的是：

```
class person:

    def __init__(self):

        self.name = ""
        self.age = ""
        self.phones = []

    def add_phone(self, number):

        self.phones.append(number) 
```

在 Python 中处理实例化的方式是初始化器`__init__()`（类似于但不同于其他语言中的构造器）创建实例属性。`None`在 Python 中，将未初始化的属性设置为而不是空字符串可能更常见。此外，在初始化程序中包含常用属性是很常见的：

```
 def __init__(self, name = None, age = None, phones = None):

        self.name = name
        self.age = age
        if phones = None:
            self.phones = []
        else:
            self.phones = phones 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-17T21:35:27.543

要按预期工作，您需要定义`phones`为实例属性。

```
class person:
    name = ""
    age = ""
    def __init__(self):
        self.phones = []
    def add_phone(self, number):
        self.phones.append(number) 
```

在您的示例中，您将电话附加到类属性，该属性对于所有实例都是“共享的”（也就是说）。

# javascript - Can Lawnchair .all be configured to return an object indexed by key?

> ID：13922511
> 
> 赞同：2
> 
> 时间：2012-12-17T21:31:21.883
> 
> 标签：javascript, lawnchair

I am using [Lawnchair](http://brian.io/lawnchair/) to store data locally on my client. The key I am using to insert values is created server-side.

Currently when I use .all the list of returned values is an array indexed from 0\. I then iterate over this list storing returned values in an object literal (using underscore.js).

```
var objects = {};
_.each(returnedArray, function (val) {
    objects[val.key] = val;
}); 
```

This allows me to use O(1) lookups in other parts of my code, but requires an O(n) operation on all reads from Lawnchair.

Is it possible to configure Lawnchair (or to use a different method / combination of methods) to return a key indexed object literal without iterating over my entire dataset?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:30:05.557

如果您愿意使用其他库，我会推荐我的一个[https://bitbucket.org/ytkyaw/ydn-db/wiki/Home](https://bitbucket.org/ytkyaw/ydn-db/wiki/Home)

它易于使用并针对性能进行了优化。它也支持 IndexedDB、WebSQL 和 WebStorage。

使用该库，您可以通过索引键获得`O(log n)`时间，我认为，从排序数组中查找。您可以通过仅查询键来消除​​序列化成本。图书馆的使用可以在这里找到：http: [//dev.yathit.com/ydn-db/getting-started.html](http://dev.yathit.com/ydn-db/getting-started.html)

# mysql - 构造一个可以使用和不使用特定表的查询

> ID：13922516
> 
> 赞同：0
> 
> 时间：2012-12-17T21:31:38.510
> 
> 标签：mysql, sql

我正在做一个系统，我在一个查询中加入几个表。在大多数情况下，以下类型的查询可以解决问题：

```
 SELECT * FROM A JOIN B ON A.a = B.a JOIN C ON C.a = A.a WHERE A.a = 123; 
```

属性 Aa 是 PK，在 Ba 和 Ca 中用作 FK

在某些情况下，没有相应的 Ba 和 Ca 在其他情况下，只是缺少 Ca。就像现在一样，如果 B 或 CI 中没有相应的键，则得到一个空集。正如预期的那样。

如果只存在 A 并且如果 Aa = Ba 等时添加 B 和 C 属性，则查询会很方便地生成一个仅包含 A 属性的集合。

我想这需要一个特定于 DBMS 的解决方案，而不是一般的 SQL，但我不确定。

如果可能的话，有什么想法应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:35:41.800

你要这个：

```
SELECT *
FROM A LEFT OUTER JOIN
     B
     ON A.a = B.a LEFT OUTER JOIN
     C
    ON C.a = A.a
WHERE A.a = 123 
```

将`left outer join`所有记录保留在第一个表（“左侧”）和右侧的任何匹配表中。您可以引用任何表中的列。如果没有匹配，则值为 NULL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:35:53.633

这种连接称为[*外部*](http://en.wikipedia.org/wiki/Join_%28SQL%29#Outer_joins)连接（与默认连接类型相反，称为*内部*连接）。

下面是告诉 SQL 你需要一个外连接的方法：

```
SELECT * FROM A
LEFT OUTER JOIN B ON A.a = B.a
LEFT OUTER JOIN C ON C.a = A.a WHERE A.a = 123; 
```

这告诉 SQL，即使缺少相应的`B`或`C`（或两者）行，您仍然需要任何可用的行。

# android - 使用多个 string.xml 文件是否有任何副作用？

> ID：13922522
> 
> 赞同：45
> 
> 时间：2012-12-17T21:31:49.283
> 
> 标签：android, string, android-xml

我目前正在创建一个包含一些字符串（目前>300）的应用程序，但我在快速找到包含这么多字符串的字符串时遇到了一些问题。所以我正在考虑使用多个`string.xml`文件而不是只使用一个文件（string_menu，string_activity1，...）的可能性。

这种做法有副作用吗？这是一个坏习惯还是一个好习惯？

我问这个是因为网上似乎没有多少人在使用这种可能性。所以也许它有一些问题？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-17T21:36:31.597

[如文档](http://developer.android.com/guide/topics/resources/string-resource.html#String)中所述，您可以使用所需的任何文件名：

> 文件名是任意的。<string> 元素的名称将用作资源 ID。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-06-19T10:21:29.033

性能上的副作用可能可以忽略不计，您可以尽可能多地添加。我有 3 个活动文件**MainActivity**、**PhotoActivity**、**UserActivity**，创建一个通用 strings.xml 文件和其他活动相关文件。

```
-strings.xml                    -> create common string values here.
  --strings_main.xml            -> create main activity specific string values here.
  --strings_photo.xml           -> ...
  --strings_user.xml            -> ... etc etc 
```

希望这会有所帮助。谢谢！

# php - 无法找出特定的正则表达式

> ID：13922533
> 
> 赞同：0
> 
> 时间：2012-12-17T21:32:52.490
> 
> 标签：php, regex

我将创建一个正则表达式来匹配以下内容：

> 字符串应仅由小写字母数字字符 (az) 组成，并且应允许在其中包含单个“-”。例如，“trash-bin”应该可以，但是“trash--bin”或“-bin”不应该。

正则表达式应该如何？另外，如果可以解释，我会很高兴。

到目前为止，如果有的话：

```
/^[0-9a-z]+-+$/

UPDATED TO: 
```

^(?!\A-)+[0-9a-z]+-?$

我不知道如何禁止多个 - 相互跟随，或禁止字符串以 - 开头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:39:58.960

```
^([a-z0-9]+(\-[a-z0-9]+)*)$ 
```

这可能会奏效。在[http://www.regextester.com/](http://www.regextester.com/)进行测试（选择*preg*方言，因为它是 php`preg_*`函数使用的方言）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:44:05.523

你想要`^[a-z0-9]+(-[a-z0-9]+)*$`：

```
$str=array("trash-bin","TRASH-Bin","232trash-bin","-trash-bin","trash","t--b");

foreach ($str as $val) {
  preg_match('/^[a-z0-9]+(-[a-z0-9]+)*$/',$val,$match);
  echo $match[0];
}

>>> trash-bin
>>> 123trash-bin
>>> trash 
```

正则说明：

```
^           # Match the start of the string
[a-z0-9]+   # Followed by one or more lowercase letter or digit
(-          # Followed by an hyphen
[a-z0-9]+   # Followed by one or more lowercase letter or digit 
)*          # Pattern inside brackets can occur zero or more times
$           # Followed by the end of the string 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T21:46:32.203

如果您只需要一个 hiphen 并且也应该只在两个或多个字符之间（所有小写字母），那么也许您可以取消以下操作：

`^[a-z0-9]+-?[a-z0-9]+$`

测试它@ [http://www.pagecolumn.com/tool/pregtest.htm](http://www.pagecolumn.com/tool/pregtest.htm)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T21:53:02.797

首先发现字符串以字母数字开头，并持续一段长度（一个或多个必需的匹配项）。

然后我们开始一个子模式，这样我们就可以确保*如果*你匹配字符串中的连字符，你还需要匹配更多的字母数字。

在子模式中允许单个 - （转义以避免否定以下类）

后跟一些字母数字（一个或多个必需的匹配项）。关闭子模式。[从您最初的问题来看，尚不清楚字符串中是否应该只允许一个破折号，或者只要它们不连续就可以允许多个破折号。如果允许多个，则允许零个或多个子模式匹配。否则允许零个或一个匹配]

那么模式是：

`^([:alnum:]+(\-[:alnum:]+)?)$`

（只允许一个破折号，或者没有）或

`^([:alnum:]+(\-[:alnum:]+)*)$`

对于潜在的多个破折号但不连续（即没有双破折号）

# sql-server - CROSS APPLY 中的语法错误

> ID：13922540
> 
> 赞同：13
> 
> 时间：2012-12-17T21:33:29.883
> 
> 标签：sql-server, tsql, dmv

我正在尝试运行一个简单的查询来查找平均 CPU 时间最高的查询。该代码实际上是从[这里](http://msdn.microsoft.com/en-us/library/ms181929%28v=sql.105%29)复制粘贴的：

```
SELECT TOP 5 total_worker_time/execution_count AS [Avg CPU Time],
    SUBSTRING(st.text, (qs.statement_start_offset/2)+1, 
        ((CASE qs.statement_end_offset
          WHEN -1 THEN DATALENGTH(st.text)
         ELSE qs.statement_end_offset
         END - qs.statement_start_offset)/2) + 1) AS statement_text
FROM sys.dm_exec_query_stats AS qs
CROSS APPLY sys.dm_exec_sql_text(qs.sql_handle) AS st
ORDER BY total_worker_time/execution_count DESC; 
```

问题是，SQL Server 在第 8 行的参数 to 处抱怨语法错误`sys.dm_exec_sql_text`：`qs.sql_handle`这无济于事

```
Incorrect syntax near '.'. 
```

对于我的一生，我无法弄清楚查询有什么问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-17T21:40:39.130

这意味着你要么

1.  未运行 SQL Server 2005；或更可能
2.  未在兼容模式 90 或更高版本下运行

您可以将其更改为 90 或以上使用，但它***很可能会***破坏很多应用程序。

```
alter database MyDataBaseName set compatibility_level = 90 
```

SQL Server 2005 及更高版本上最简单的解决方案是简单地从“master”或“tempdb”运行它，例如

```
USE tempdb;
SELECT TOP 5 total_worker_time/execution_count AS [Avg CPU Time],
    SUBSTRING(st.text, (qs.statement_start_offset/2)+1, 
        ((CASE qs.statement_end_offset
          WHEN -1 THEN DATALENGTH(st.text)
         ELSE qs.statement_end_offset
         END - qs.statement_start_offset)/2) + 1) AS statement_text
FROM sys.dm_exec_query_stats AS qs
CROSS APPLY sys.dm_exec_sql_text(qs.sql_handle) AS st
ORDER BY total_worker_time/execution_count DESC; 
```

# c++ - wxSmith Code::Blocks Hello World 错误

> ID：13922543
> 
> 赞同：-1
> 
> 时间：2012-12-17T21:33:40.700
> 
> 标签：c++, compiler-errors, wxwidgets, codeblocks

我有问题！

我最近通读了 codeblocks 的关于如何使用 wxSmith 制作 GUI 程序的教程...
为了尝试简单的 Hello World 程序，我下载了预编译的 wxPack 并安装了它。

但是现在，当我在 Code::Blocks 中启动一个新的 wxWidgets 项目时，它给了我成千上万的错误！
我试了几次，但我不知道我做错了什么！

[错误截图](http://i.imgur.com/d85X6.png)

它说还有更多错误！
你能告诉我该怎么做吗？
我是不是安装错了？

谢谢你的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:20:01.283

您可以将完整的构建日志粘贴到[任何地方](http://paste.org.ru)吗？可能的原因：

*   链接器找不到库或包含文件（将 wxWidgets\include 添加到包含模块列表，wxWidgets\lib\vc_lib（或 vc_dll）到链接器设置）
*   您的项目使用静态 CRT、wxWidgets 库和动态（反之亦然）编译 - 您需要使用相同的设置。
*   缺少非 wxWhdgets 库（您需要找到哪些库包含丢失的函数并添加它们）
*   您没有实现您在应用程序中使用的某些类方法（您需要为这些方法添加主体）

# actionscript-3 - 控制外部类的 flvplayback

> ID：13922551
> 
> 赞同：0
> 
> 时间：2012-12-17T21:34:29.887
> 
> 标签：actionscript-3, flash, class, flvplayback, autoplay

各位程序员好，

我希望默认的 videoPlayer 被停止或暂停。如何在我的 Main.as 中控制它？在我按下 btn_1 之前，似乎视频正在后台播放。这是我的代码：

主文件

```
package 
{
import flash.display.MovieClip;
import flash.events.MouseEvent;
import fl.video.*;

public class Main extends MovieClip 
{
    var filmAan = false;

    public function Main() 
    {
        stop();

        trace( "hij werkt" ); 

        btn_1.addEventListener(MouseEvent.CLICK,speel1);
        btn_2.addEventListener(MouseEvent.CLICK,speel2);
        btn_3.addEventListener(MouseEvent.CLICK,speel3);
        btn_4.addEventListener(MouseEvent.CLICK,speel4);
        btn_5.addEventListener(MouseEvent.CLICK,speel5);
        btn_6.addEventListener(MouseEvent.CLICK,speel6);
        btn_7.addEventListener(MouseEvent.CLICK,speel7);
        btn_8.addEventListener(MouseEvent.CLICK,speel8);
        btn_9.addEventListener(MouseEvent.CLICK,speel9);

        var mc_video01:MovieClip = new video01();
        var mc_video02:MovieClip = new video02();
        var mc_video03:MovieClip = new video03();
        var mc_video04:MovieClip = new video04();
        var mc_video05:MovieClip = new video05();
        var mc_video06:MovieClip = new video06();
        var mc_video07:MovieClip = new video07();
        var mc_video08:MovieClip = new video08();
        var mc_video09:MovieClip = new video09();

        function speel1(evtObj:MouseEvent):void 
        {
            if (filmAan == false) 
            {
                trace("knop 1 werkt");              

                addChild(mc_video01);
                mc_video01.x=1020; 
                mc_video01.y=680;
                mc_video01.width=1360;
                mc_video01.height=1060;

                filmAan = true;
            }
            else
            {
                trace("knop 1 uitgeschakeld");
            }
        } 
```

视频01.as：

```
package
{
import flash.display.MovieClip;
import flash.events.MouseEvent;
import fl.video.*;

public class video01 extends MovieClip
{
    public function video01()
    {
        trace("movieclip 1 geladen");
        videoPlayer.source = "video/video01.flv";
        videoPlayer.play();

        btn_terug.addEventListener(MouseEvent.CLICK, terug);
    }

    public function terug(evt:MouseEvent):void 
    {
        trace("knop ingedrukt");
        videoPlayer.pause();
        Main(parent).filmAan = false;
        this.parent.removeChild(this);  
    }
}
} 
```

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:18:02.663

如果您希望 videoPlayer 在首次加载时暂停，则可以使用 .autoplay 属性并将其设置为 false。

`videoPlayer.autoplay=false;`

如果你想从 Main.as 中暂停它的选项，你可以在调用它时向类添加一个参数......

```
...public function video01(startPlaying:Boolean=true)
{
    trace("movieclip 1 geladen");
    videoPlayer.source = "video/video01.flv";

    if(startPlaying==false)
    {
        videoPlayer.autoplay=false;
    }

    btn_terug.addEventListener(MouseEvent.CLICK, terug);
}... 
```

然后在您的 main.as 中，您可以选择在创建实例时将 startPlaying 设置为 true 或 false。

```
var mc_video01:MovieClip = new video01(false); 
```

# java - 在 Java 中获取谷歌搜索结果而不被标记

> ID：13922552
> 
> 赞同：0
> 
> 时间：2012-12-17T21:34:29.077
> 
> 标签：java, google-search

我有一个一次性任务，我需要以编程方式查询谷歌。但是我不想麻烦谷歌并将我的代码标记为机器人。有谁知道谷歌用来检测机器人的标准？是否可以间隔或小批量发出查询并解决问题？我只需要大约 3000 个查询即可完成工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:38:14.987

好吧，大多数软件通过使用捕获机器人

*   时间尺度（例如，您不能以 5 ms 的频率搜索不同的事物）
*   您的网络网关（又名 IP）。

例如 google maps、foursquare、yahoo .... 每天可以从同一个外部 IP 访问 1k-10k。

# c# - 使用 DrawString 顶部对齐文本

> ID：13922553
> 
> 赞同：0
> 
> 时间：2012-12-17T21:34:34.783
> 
> 标签：c#, drawstring

我想`DrawString`用不同大小的字体垂直对齐文本。基本上，我试图在报告上打印销售价格，其中美分的字体小于美元。这是在报告引擎中，我需要写入图像，而不是 Windows 窗体，所以我相信我必须使用`DrawString`而不是使用`TextRenderer`.

我找到了各种解释如何在基线上绘制文本的文章。这些似乎工作正常，尽管我发现不同大小的相同字体可能会超出一个像素。我想我可以接受这些并研究如何使用字体的上升设计信息进行对齐，但我没有成功:-(

有没有人有一些有用的示例代码？

**更新 1**：更改总数以反映我希望顶部对齐而不是垂直对齐。我希望在 Arial 20 中打印的美元值的顶部与 Arial 14 中美分值的顶部水平对齐。我尝试过的所有字体都有问题。

在下图中，我使用的是 Arial Black。

![顶部对齐文本](../Images/95d02dfed2ae9a02ad0eb34d2185d4d3.png)

您可以看到较大的字体在红线和 1 的顶部之间存在间隙，但当它到达较小的字体时，该间隙就会消失。

![宋体](../Images/119df6cc948079a4b311109ff2d25a4c.png) 使用 Arial，它从行上方开始。

![维达纳](../Images/b270997ff497bce6578d46ff12fde097.png) 我认为这个是 Verdana，它以更大的字体和更大的差距开始。

对于这三个，我使用以下代码：

```
float offset = myFont.SizeInPoints /
myFont.FontFamily.GetEmHeight(myFont.Style) *
(myFont.FontFamily.GetLineSpacing(myFont.Style) - myFont.FontFamily.GetCellAscent(myFont.Style));
float pixels = e.Graphics.DpiY / 72f * offset;
float baseline = pixels;// (int)(pixels + 0.5f);

PointF renderPt = new PointF(left, y - baseline);
e.Graphics.DrawString("$1", myFont, new SolidBrush(Color.Black), renderPt); 
```

我还使用[这个样本](http://www.java2s.com/Code/CSharp/2D-Graphics/DrawalinefortheascentdescentbaselinetextOrigin.htm)作为一些测试的基础。我想如果上升线的绘制方式是准确的，那么我可以简单地调整初始写入点。唉，当你使用更大的字体大小或不同的字体时，上升线绘制不准确，所以我无法走这条路。

我没有使用`TextRenderer`过，因为我不知道如何让它工作，因为我没有使用 Windows 窗体`OnPaint`事件并且不知道如何获得适当的图形。时间有点紧迫，但我认为这可能是我的下一个选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T03:24:59.930

字体是一个继承了许多具有历史基础的物理世界的领域。不幸的是，这并不总是与计算机的工作方式兼容。

例如，物理世界中的字体大小不必等于物理世界中的相同字体大小（没有错字）。以相同的大小获取这些字形：

![赫尔维提卡](../Images/44b1d93c91a78d42d49933b8c8ffa221.png) ![G 脚本](../Images/6732fed3456833957eca7c731db5add7.png)

尽管它们的大小相同（64 磅），但它们的大小并不相等。这与字体的历史方面有关，在物理世界中，字形放置在方形金属板上。指的是这些盘子的大小，而不是上面的字形——它们可以填满整个盘子；或不。基于计算机的字体也是如此。您可以看到字形的边界框是相同的（=字体大小），但它们自身的字形不同。

这通常不是排版或印刷的问题，因为可以快速进行调整以弥补这一点。

在 .net/GDI+ 中绘图，在特殊情况下是另一回事。*基线*“始终正确”，即：如果您使用基线，则可以保证相同的对齐方式，但在字形的“底部”（不包括其下降）。当您需要从顶部对齐它时，您会遇到问题。

解决这个问题的一种方法（在 GDI+ 中）是实际扫描字形位图以查找顶部的开头，然后使用表示该结果的偏移量绘制字形。使用 BitmapLock 扫描并直接访问缓冲区。

当然，您也可以使用它`Bitmap.GetPixel`来进行扫描，但是对于大量文本来说，这将是一个非常缓慢的过程。

**更新：**

我忘了提到一种叫做轴承的东西——在这种情况下，*顶部轴承*描述了从上升顶部到字形顶部的间隙。不幸的是，您无法通过 GDI/GDI+ 提取它（无需编写字体解析器）。然而，WPF 允许您从字形中提取此信息。

尽管此图中未显示，但它显示了字形的不同部分，包括。与顶部等效的侧轴承：

![轴承](../Images/7e28a55041ed54f092d45c030e25bd53.png)

有关详细信息，请参阅此链接：http:
[//msdn.microsoft.com/en-us/library/system.windows.media.glyphtypeface.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.glyphtypeface.aspx)

也许这段代码可以提供帮助。我在 VB 中编写了这个并翻译成 C#（所以我希望没有在翻译中丢失）。这将获取一个字形并返回它的位图，并为字形本身提供一个精确的边界框。这种方式只需将生成的位图放在您需要的垂直位置：

它需要 WPF 字体作为参数（使用 WPF 而不是 GDI+ 打开的字体） - 如果您需要帮助，请告诉我：

```
using System.Windows.Media;
using System.Windows.Media.Imaging;

static class WPFGlyphToGDIPBitmap
{
    public static System.Drawing.Bitmap GetBitmapOfChar(GlyphTypeface gt, _
                                                        char c, _
                                                        double ptSize, _
                                                        float dpi)
    {

        ushort ci = 0;
        if (!gt.CharacterToGlyphMap.TryGetValue(Strings.AscW(c), ci)) {
            if (!gt.CharacterToGlyphMap.TryGetValue(Strings.Asc(c), ci))
                    return null;
        }

        Geometry geo = gt.GetGlyphOutline(ci, ptSize, ptSize);
        GeometryDrawing gDrawing = new GeometryDrawing(System.Windows.Media.Brushes.Black, null, geo);
        DrawingImage geoImage = new DrawingImage(gDrawing);
        geoImage.Freeze();

        DrawingVisual viz = new DrawingVisual();
        DrawingContext dc = viz.RenderOpen;

        dc.DrawImage(geoImage, new Rect(0, 0, geoImage.Width, geoImage.Height));
        dc.Close();

        RenderTargetBitmap bmp = new RenderTargetBitmap(geoImage.Width, _
                                                        geoImage.Height, _
                                                        dpi, dpi, _
                                                        PixelFormats.Pbgra32);
        bmp.Render(viz);

        PngBitmapEncoder enc = new PngBitmapEncoder();
        enc.Frames.Add(BitmapFrame.Create(bmp));

        MemoryStream ms = new MemoryStream();
        enc.Save(ms);
        ms.Seek(0, SeekOrigin.Begin);

        enc = null;
        dc = null;
        viz = null;

        DisposeBitmap(bmp);

        System.Drawing.Bitmap gdiBMP = new System.Drawing.Bitmap(ms);
        ms.Dispose();

        //gdiBMP.Save("c:\test.png", System.Drawing.Imaging.ImageFormat.Png)

        return gdiBMP;

    }

}
public static void DisposeBitmap(RenderTargetBitmap bmp)
{
    if (bmp != null) {
        bmp.Clear();
    }
    bmp = null;
    GC.Collect();
    GC.WaitForPendingFinalizers();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-27T14:10:53.463

```
//-----------------------------------------------------------------------------------------------------------------
// MeasureLeading Function
// Measures the amount of white space above a line of text, in pixels. This is accomplished by drawing the text
// onto an offscreen bitmap and then looking at each row of pixels until a non-white pixel is found.
// The y coordinate of that pixel is the result. This represents the offset by which a line of text needs to be
// raised vertically in order to make it top-justified.
//-----------------------------------------------------------------------------------------------------------------

public static int MeasureLeading(string Text, Font Font) {

  Size sz = MeasureText(Text, Font);
  Bitmap offscreen = new Bitmap(sz.Width, sz.Height);
  Graphics ofg = Graphics.FromImage(offscreen);
  ofg.FillRectangle(new SolidBrush(Color.White), new Rectangle(0, 0, sz.Width, sz.Height));
  ofg.DrawString(Text, Font, new SolidBrush(Color.Black), 0, 0, StringFormat.GenericTypographic);

  for (int iy=0; iy<sz.Height; iy++) {
    for (int ix=0; ix<sz.Width; ix++) {
      Color c = offscreen.GetPixel(ix, iy);
      if ((c.R!=255) || (c.G!=255) || (c.B!=255)) return iy;
    }
  }

  return 0;
}

//-----------------------------------------------------------------------------------------------------------------
// MeasureText Method
// TextRenderer.MeasureText always adds about 1/2 em width of white space on the right,
// even when NoPadding is specified. But it returns zero for an empty string.
// To get the true string width, we measure the width of a string containing a single period
// and subtract that from the width of our original string plus a period.
//-----------------------------------------------------------------------------------------------------------------

public static System.Drawing.Size MeasureText(string Text, System.Drawing.Font Font) {
  System.Windows.Forms.TextFormatFlags flags
    = System.Windows.Forms.TextFormatFlags.Left
    | System.Windows.Forms.TextFormatFlags.Top
    | System.Windows.Forms.TextFormatFlags.NoPadding
    | System.Windows.Forms.TextFormatFlags.NoPrefix;
  System.Drawing.Size szProposed = new System.Drawing.Size(int.MaxValue, int.MaxValue);
  System.Drawing.Size sz1 = System.Windows.Forms.TextRenderer.MeasureText(".", Font, szProposed, flags);
  System.Drawing.Size sz2 = System.Windows.Forms.TextRenderer.MeasureText(Text + ".", Font, szProposed, flags);
  return new System.Drawing.Size(sz2.Width - sz1.Width, sz2.Height);
} 
```

# php - JSON.parse 隐式调用？

> ID：13922560
> 
> 赞同：1
> 
> 时间：2012-12-17T21:34:57.433
> 
> 标签：php, javascript, json

我有 JSON 从我的服务器进入我的 javascript，就像这样 -

```
<script>
   var resp = <?php  echo getjsonFromServer() . ';'?> 
   resp=JSON.parse(resp);
   displayStats(resp);
</script> 
```

这会产生一个错误“SyntaxError: Unexpected token o”，当我检查控制台时，我看到响应已经被 JSON 解析。这意味着我不应该尝试 JSON.parse 一个已经解析的 answer 。

我的问题是——怎么会？谁为我解析了我的 JSON？每当我从服务器获取 JSON 时，我习惯于调用 JSON.parse，例如 ajax 调用。为什么这里不一样？

注意 - 我的 PHP 是这样的

```
header('"Content-Type":application/json');
$js = json_encode($js);
echo $js; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T21:37:02.427

查看您生成的源代码。

您正在回显原始 JSON，因此您的来源看起来像

```
var resp = { "property": "value", ... }; 
```

这是一个对象文字，而不是一个字符串

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T21:37:54.467

它不是 JSON。您正在呈现普通的旧 JavaScript。

```
<script>
   var resp = (<?php  echo getjsonFromServer() ?>); 
   displayStats(resp);
</script> 
```

这应该这样做。

如果您想知道：添加括号会使浏览器将您的代码解析为对象文字而不是代码块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T21:45:58.347

浏览器不知道使用 php 函数来创建对象。对于浏览器来说，它只是 javascript，就好像它最初是源代码的一部分一样。

# xml - xsd:any 元素的命名空间前缀并使用 XSLT 添加命名空间前缀

> ID：13922561
> 
> 赞同：0
> 
> 时间：2012-12-17T21:35:01.967
> 
> 标签：xml, xslt, prefix

我在使用名称空间时遇到了麻烦。

我得到如下输入。

```
 <?xml version="1.0" encoding="UTF-8"?>

      <Org xmlns="http://mysample.org" >
        <Dept>
            <Person>
                <FirstName>Sample </FirstName>
                <LastName> Sampel L </LastName>
                <Address>
                    <Street>Sample Street</Street>
                    <House>45 Block C </House>
                    <State>Kentucky</State>
                    <AddExtension>
                        <ns3:LandMark xmlns:ns3="http://mysample.org" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <ns3:POI tag="temp">Sample POI </ns3:POI>
                        </ns3:LandMark>                         
                    </AddExtension>
            </Person>
        </Dept>
      </Org> 
```

我需要将命名空间前缀添加到此 XML 中的所有元素。

我尝试了以下 XSL：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:ns3="http://mysample.org">

    <xsl:output omit-xml-declaration="no" indent="yes" />
    <xsl:strip-space elements="*" />

    <!-- <xsl:template match="*"> <xsl:copy> <xsl:apply-templates select="node()|@*"/> 
        </xsl:copy> </xsl:template> -->

    <xsl:template match="*"> 
        <xsl:element name="ns3:{name()}" namespace="http://mysample.org">
            <xsl:copy-of select="@*"></xsl:copy-of>
            <xsl:copy-of select="namespace::*" />
            <xsl:apply-templates select="node()" />
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

但由于输入 XML 中的 AddExtension 数据而出现问题“

注意：“AddExtension”中的数据是基于 xsd:any 标签的 scema。因此，对于不同的输入 XML，它将是不同的数据。

我该如何克服呢？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:25:57.183

试试这个模板：

```
<xsl:template match="*"> 
    <xsl:element name="ns3:{local-name()}" namespace="{namespace-uri()}">
        <xsl:copy-of select="@*"/>
        <xsl:apply-templates select="node()" />
    </xsl:element>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T02:41:26.083

您当前的尝试是写出`http://mysample.org`命名空间中文档中的每个元素，并带有显式（我的意思是非空）命名空间前缀。我怀疑你真的希望这只发生在已经在该命名空间中的元素上。所以

1.  将现有模板从 更改`match="*"`为`match="ns3:*"`.
2.  添加一个模板来处理其他命名空间（`match="*"`用于该命名空间）中的元素，这些元素只是将它们复制到原样。

# javascript - 我怎样才能通过一个号码访问我的 li

> ID：13922566
> 
> 赞同：-3
> 
> 时间：2012-12-17T21:35:26.760
> 
> 标签：javascript, jquery, html

有一个 ul，我需要获取特定的 li 内部 html。

我有一个之前提供的数字变量。

我如何使用该数字来获取我的 li 内部 html。

tnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:37:00.730

获取 UL，然后访问其`children[]`属性。它是一个 NodeList（它基本上类似于一个数组，但为保存节点而量身定制），因此您只需将您的编号放入其中并获取相应的列表项。

# cocos2d-iphone - Cocos2d。具有自定义可触摸区域的 CCMenuItem？

> ID：13922567
> 
> 赞同：0
> 
> 时间：2012-12-17T21:35:32.533
> 
> 标签：cocos2d-iphone, touch, ccmenuitem

例如，在我的例子中，每个按钮看起来都像一个十六进制。这些按钮上的十六进制图片不能相交，但它们的矩形可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-30T07:37:58.703

您可以使用的新`activeArea`属性`CCMenuItem`来定义您的自定义可触摸区域：请参阅[本文](http://2sa-studio.blogspot.com/2013/01/custom-touch-area-for-ccmenuitem-in.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:08:36.923

您可以使用 CGMutablePathRef 进行非矩形精灵碰撞检测。在 CCMenuItem 中使用它。它有效...请参阅我在这篇文章中的回答：[自定义触摸检测](https://stackoverflow.com/questions/12333822/detect-transparent-part-on-the-sprite-in-cocos2d/12516903#12516903)

# javascript - jquery ui 可调整大小在 iframe 中不起作用

> ID：13922577
> 
> 赞同：0
> 
> 时间：2012-12-17T21:36:01.037
> 
> 标签：javascript, jquery

我有一个带有 iframe 的 html 文档。它加载本地文档。我想使用 jQuery UI 使 iframe 文档中的元素可调整大小。调用可调整大小插件的 javascript 从父文档运行。

它似乎几乎可以工作。句柄出现在 te 元素周围并触发了 create 事件，但是当我实际尝试调整大小时，什么也没有发生。直到我的光标离开元素响应的 iframe。当我的鼠标实际上在 iframe 内时，我无法让它响应。

我正在考虑放弃这种方法，并使用可调整大小的代码将脚本标记注入 iframe 文档。但在我沿着这条路旅行之前，有什么我错过或没有考虑的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:39:52.377

我很确定某些浏览器不允许继承样式/dom 更改 iFrame 内容（？）。但是，您可以使用 jQuery .load() 函数，因为您的内容是从同一个域/本地调用的。当 jQuery 加载它时，你直接将它附加到你的 dom 并且可以随心所欲地操作它

# objective-c - 有没有办法记录一个 Objective-C 实例的所有属性值

> ID：13922581
> 
> 赞同：19
> 
> 时间：2012-12-17T21:36:17.110
> 
> 标签：objective-c, properties, nslog

我只是想知道是否有一种快速简便的方法可以将属性的所有各种值打印到日志中以用于调试目的。就像我想知道所有 BOOL、浮点数等的值是什么。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-17T21:42:37.320

[这个问题](https://stackoverflow.com/questions/9269372/loop-through-all-object-properties-at-runtime)似乎可以回答你的问题。

### 更新：

我很好奇，做了一个分类：

```
//Using Xcode 4.5.2 - iOS 6 - LLDB - Automatic Reference Counting

//NSObject+logProperties.h    
@interface NSObject (logProperties)
- (void) logProperties;
@end

//NSObject+logProperties.m
#import "NSObject+logProperties.h"
#import <objc/runtime.h>

@implementation NSObject (logProperties)

- (void) logProperties {

    NSLog(@"----------------------------------------------- Properties for object %@", self);

    @autoreleasepool {
        unsigned int numberOfProperties = 0;
        objc_property_t *propertyArray = class_copyPropertyList([self class], &numberOfProperties);
        for (NSUInteger i = 0; i < numberOfProperties; i++) {
            objc_property_t property = propertyArray[i];
            NSString *name = [[NSString alloc] initWithUTF8String:property_getName(property)];
            NSLog(@"Property %@ Value: %@", name, [self valueForKey:name]);
        }
        free(propertyArray);
    }    
    NSLog(@"-----------------------------------------------");
}

@end 
```

将其包含在您的课程中：`#import "NSObject+logProperties.h"`

并调用`[self logProperties];`这些属性！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-17T22:01:36.597

当前的答案仅显示如何为属性执行此操作。如果您希望打印出每个实例变量，您可以执行以下操作。

```
- (void)logAllProperties {
    unsigned int count;
    Ivar *ivars = class_copyIvarList([self class], &count);
    for (unsigned int i = 0; i < count; i++) {
        Ivar ivar = ivars[i];

        const char *name = ivar_getName(ivar);
        const char *type = ivar_getTypeEncoding(ivar);
        ptrdiff_t offset = ivar_getOffset(ivar);

        if (strncmp(type, "i", 1) == 0) {
            int intValue = *(int*)((uintptr_t)self + offset);
            NSLog(@"%s = %i", name, intValue);
        } else if (strncmp(type, "f", 1) == 0) {
            float floatValue = *(float*)((uintptr_t)self + offset);
            NSLog(@"%s = %f", name, floatValue);
        } else if (strncmp(type, "@", 1) == 0) {
            id value = object_getIvar(self, ivar);
            NSLog(@"%s = %@", name, value);
        }
        // And the rest for other type encodings
    }
    free(ivars);
} 
```

虽然我不会特别建议在实践中这样做，但如果它是出于调试目的，那很好。您可以将其实现为一个类别，`NSObject`并在调试时保留它以供使用。如果完成了所有类型的编码，那么它可以成为一个非常好的小方法。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-02-21T16:50:52.117

现在有这些方法`NSObject`：

```
@interface NSObject (Private)
-(id)_ivarDescription;
-(id)_shortMethodDescription;
-(id)_methodDescription;
@end 
```

迅速：

```
myObject.perform("_ivarDescription") 
```

感谢[这篇文章](https://bou.io/ExtendedTypeInfoInObjC.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T21:42:53.673

是的，一种方法是询问所有属性，然后使用 KVC，例如：

```
//properties
unsigned int cProperties = 0;
objc_property_t *props = class_copyPropertyList(self.class, &cProperties);
for(int i = 0; i < cProperties; i++) {
    const char *name = property_getName(props[i]);
    NSLog(@"%@=%@", name, [self valueForKey:name];
} 
```

另一种方法是遍历一个类的所有方法，获取返回类型，调用并打印它

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-17T21:46:47.430

快速而肮脏的方法是覆盖`debugDescription`：

```
-(NSString*)debugDescription {
    NSString *str = [[NSString alloc] initWithFormat:@"My BOOL 1: %d, My Float: %f", self.myBool, self.myFoat];
    return str;
} 
```

当然，如果您的对象很复杂，这可能会很耗时。

# c# - 如何从对 JScript.NET 的 Eval 调用返回 JSON 字符串？

> ID：13922586
> 
> 赞同：2
> 
> 时间：2012-12-17T21:36:36.050
> 
> 标签：c#, json, json.net, jscript.net

我正在尝试使用 JScript.NET 进行动态代码评估。我有一个简单的 JScript.NET eval 方法来处理：

```
public static object Eval(string javascript) {
  return Microsoft.JScript.Eval.JScriptEvaluate(javascript, Microsoft.JScript.Vsa.VsaEngine.CreateEngine());
} 
```

我希望能够将对象传递到 Eval 并再次将它们取出，并且我希望通过 JSON 来实现。通过使用 JSON.NET 对对象进行序列化，我可以毫无问题地将对象从 C# 传递到我的 JScript 中。我遇到的麻烦是将 JSON**从**我的 javascript 程序中返回到我的 C# 调用程序中。当我返回一个对象时，我得到的是一个 JSObject ( [http://msdn.microsoft.com/en-us/library/microsoft.jscript.jsobject.aspx](http://msdn.microsoft.com/en-us/library/microsoft.jscript.jsobject.aspx) )。我显然也不能在 JScript.NET 中使用 JSON.stringify()，因为它对 JSON 一无所知。或者，如果我可以将脚本返回的 JSObject 序列化为 C# 中的 JSON，我可以获取它，但 JSON.NET 不处理这些 JSObject。

这是一个代码示例：

```
// using Newtonsoft.Json; // somewhere at the top
dynamic json = new JObject();
json.Id = 1;
json.Name = new JObject();
json.Name.First = "John";
json.Name.Last = "Doe";
json.Dob = new DateTime(1970, 2, 3);

// dynamically construct a script for eval... could be anything... contrived example below.
var js = new StringBuilder();

// set up a new object, passed from C# world into JScript.NET
js.AppendLine("var person = " + json.ToString() + ";");

// do something useful
js.AppendLine("person.FullName = person.Name.First + ' ' + person.Name.Last;");

// return person object... this comes back as JSObject.  Wish I could JSON.stringify!
js.AppendLine("person;");

// objResult is a JSObject, but how do I get json string???
dynamic objResult = JSEvaluator.Eval(js.ToString());

// tried JSON.NET, but it doesn't work!
// var jsonResult = Newtonsoft.Json.JsonConvert.SerializeObject(objResult); 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-15T17:28:56.107

这是你要找的吗？本质上，我只是采用了 json2.min.js（根据@Michael B 在评论中的建议）并将其作为首要任务添加到 javascript 中。这使您能够根据需要对对象进行字符串化，并将 JSON 字符串发送回 C# 世界。从那里您可以将其转换回 JObject 并从中获取数据或进一步操作它。基于您的示例代码的完整程序如下：

```
using Newtonsoft.Json;
using Newtonsoft.Json.Linq;

class Program
{
    static void Main(string[] args)
    {
        dynamic json = new JObject();
        json.Id = 1;
        json.Name = new JObject();
        json.Name.First = "John";
        json.Name.Last = "Doe";
        json.Dob = new DateTime(1970, 2, 3);

        // dynamically construct a script for eval... could be anything... contrived example below.
        var js = new StringBuilder();

        // Add JSON2.min.js so we can stringify
        js.AppendLine(@"var JSON;JSON||(JSON={}),(function(){""use strict"";function i(n){return n<10?""0""+n:n}function f(n){return o.lastIndex=0,o.test(n)?'""'+n.replace(o,function(n){var t=s[n];return typeof t==""string""?t:""\\u""+(""0000""+n.charCodeAt(0).toString(16)).slice(-4)})+'""':'""'+n+'""'}function r(i,e){var h,l,c,a,v=n,s,o=e[i];o&&typeof o==""object""&&typeof o.toJSON==""function""&&(o=o.toJSON(i)),typeof t==""function""&&(o=t.call(e,i,o));switch(typeof o){case""string"":return f(o);case""number"":return isFinite(o)?String(o):""null"";case""boolean"":case""null"":return String(o);case""object"":if(!o)return""null"";n+=u,s=[];if(Object.prototype.toString.apply(o)===""[object Array]""){for(a=o.length,h=0;h<a;h+=1)s[h]=r(h,o)||""null"";return c=s.length===0?""[]"":n?""[\n""+n+s.join("",\n""+n)+""\n""+v+""]"":""[""+s.join("","")+""]"",n=v,c}if(t&&typeof t==""object"")for(a=t.length,h=0;h<a;h+=1)typeof t[h]==""string""&&(l=t[h],c=r(l,o),c&&s.push(f(l)+(n?"": "":"":"")+c));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(c=r(l,o),c&&s.push(f(l)+(n?"": "":"":"")+c));return c=s.length===0?""{}"":n?""{\n""+n+s.join("",\n""+n)+""\n""+v+""}"":""{""+s.join("","")+""}"",n=v,c}}typeof Date.prototype.toJSON!=""function""&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+""-""+i(this.getUTCMonth()+1)+""-""+i(this.getUTCDate())+""T""+i(this.getUTCHours())+"":""+i(this.getUTCMinutes())+"":""+i(this.getUTCSeconds())+""Z"":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\""\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={""\b"":""\\b"",""\t"":""\\t"",""\n"":""\\n"",""\f"":""\\f"",""\r"":""\\r"",'""':'\\""',""\\"":""\\\\""},t;typeof JSON.stringify!=""function""&&(JSON.stringify=function(i,f,e){var o;n="""",u="""";if(typeof e==""number"")for(o=0;o<e;o+=1)u+="" "";else typeof e==""string""&&(u=e);t=f;if(f&&typeof f!=""function""&&(typeof f!=""object""||typeof f.length!=""number""))throw new Error(""JSON.stringify"");return r("""",{"""":i})}),typeof JSON.parse!=""function""&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u==""object"")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return""\\u""+(""0000""+n.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(n.replace(/\\(?:[""\\\/bfnrt]|u[0-9a-fA-F]{4})/g,""@"").replace(/""[^""\\\n\r]*""|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,""]"").replace(/(?:^|:|,)(?:\s*\[)+/g,"""")))return i=eval(""(""+n+"")""),typeof t==""function""?r({"""":i},""""):i;throw new SyntaxError(""JSON.parse"");})})()");

        // set up a new object, passed from C# world into JScript.NET
        js.AppendLine("var person = " + json.ToString() + ";");

        // do something useful
        js.AppendLine("person.FullName = person.Name.First + ' ' + person.Name.Last;");

        // return stringified person object
        js.AppendLine("JSON.stringify(person);");

        // objResult is a JScript.ConcatString
        dynamic objResult = Eval(js.ToString());

        // Get our manipulated object back to the C# world
        json = JsonConvert.DeserializeObject(objResult.ToString());

        // Print out the Full Name which was added inside the JS
        Console.WriteLine(json.FullName);
    }

    public static object Eval(string javascript)
    {
        return Microsoft.JScript.Eval.JScriptEvaluate(javascript, Microsoft.JScript.Vsa.VsaEngine.CreateEngine());
    }
} 
```

输出：

```
John Doe 
```

# php - 搜索框查询名称 mysql/php

> ID：13922594
> 
> 赞同：2
> 
> 时间：2012-12-17T21:37:03.350
> 
> 标签：php, mysql, database

还在学习mysql和php的过程中。我有一个带有 1 个表的 mysql 数据库。我只想要一个搜索框，用户可以输入公司名称（例如百思买），然后它将输出在百思买购买的产品列表，其中包含价格以及数据库中的所有内容。编辑：我收到的错误是“查询失败：您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在第 1 行资源 id #3 的“资源 id #3”附近使用"

```
<html>
    <head>
        <title>Search the Database</title>
    </head>
    <body>
    <form action="index.php" method="post">
     Search: <input type="text" name="vendor" /><br />
    <input type="submit" name="submit" value="Submit" />
    </form>
    </body>
</html>

<?php
$mysql_host = 'localhost';  
$mysql_user = 'user_name';  
$mysql_pass = '12345';  
$Name = "user_db";
$Table = "table1";
mysql_connect ($mysql_host, $mysql_user, $mysql_pass, $Name) or die ('Error connecting to mysql');
mysql_select_db("$Name") or die ("unable to select DB");

      echo $_POST['vendor'];
      $vendor2 = $_POST['vendor'];
      $sqlquery = mysql_query("Select * From $Table WHERE `purchases`.`vendorname` LIKE '%$vendor2%';");
      $result = mysql_query($sqlquery) or die('Query failed: ' . mysql_error() . "<br />\n$sqlquery");  ;
      $number = mysql_num_rows($result);
?>

<table cellspacing=0 cellpadding=4 border=1>
<tr>
<th>Vendor</th>
<th>Product</th>
<th>DateOrdered</th>
<th>Cost</th>
</tr>

<?php
for($counter = 0; $counter < mysql_num_rows($result); $counter++) {
?>

<tr>
<td><?php echo mysql_result($result,$counter,"vendorname")?></td>
<td><?php echo mysql_result($result,$counter,"product")?></td>
<td><?php echo mysql_result($result,$counter,"date")?> </td>
<td><?php echo mysql_result($result,$counter,"price1")?> </td>
</tr>

<?php
}
?>

</table>
<?php
?> 
```

# python - multiprocessing.freeze_support()

> ID：13922597
> 
> 赞同：29
> 
> 时间：2012-12-17T21:37:10.530
> 
> 标签：python, multiprocessing, py2exe, pyinstaller, cx-freeze

为什么多处理模块在被“冻结”生成windows可执行文件时需要调用特定[函数才能工作？](http://docs.python.org/dev/library/multiprocessing.html#multiprocessing.freeze_support)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-08-12T20:17:38.033

原因是`fork()`在 Windows 上缺少（这[并不](https://stackoverflow.com/q/4243880/95735)完全正确）。正因为如此，在 Windows 上，fork 是通过创建一个**新进程来***模拟*的，在这个新进程中，在 Linux 上正在子进程中运行的代码正在运行。由于代码要在技术上不相关的进程中运行，因此必须在运行之前将其交付到那里。它的交付方式是首先将其腌制，然后通过管道从原始流程发送到新流程。此外，这个新进程被告知它必须运行通过管道传递的代码，方法是将命令行参数传递给它。如果你看一下[实现](http://hg.python.org/cpython/file/d9893d13c628/Lib/multiprocessing/forking.py#l302)**`--multiprocessing-fork``freeze_support()`它的任务是检查它正在运行的进程是否应该运行通过管道传递的代码。**

# c# - XML 反序列化消除了创建集合包装器的需要

> ID：13922601
> 
> 赞同：1
> 
> 时间：2012-12-17T21:37:33.570
> 
> 标签：c#, .net, xml-serialization, xmlserializer

[我在 MSDN 上](http://msdn.microsoft.com/en-us/library/2baksw0z.aspx)阅读有关XML 序列化的信息。

在示例中，您可以看到实际上有一个名为的类`Group`，它就像一个集合的包装器。因为可以有多个`Group`s。

```
public class Group{
    public Employee[] Employees;
}
public class Employee{
    public string Name;
} 
```

在我的情况下，XML 可能如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<Company>
    <Employees>
        <Employee .../>
        <Employee .../>
    </Employees>
    <Employees>
        <Employee .../>
        <Employee .../>
    </Employees>
</Company> 
```

我不想创建 aa `class Employees { public Employee[] Employees; }`。**最好**有`Employee[][]` 而不是创建一个单独的`Employees`班级来坐在`Company`班级里。

有没有办法通过`XmlSerializer`.NET 框架实现这一点？

# javascript - 可点击/链接的多边形？Google Maps API + Fusion Tables / KML

> ID：13922602
> 
> 赞同：1
> 
> 时间：2012-12-17T21:37:49.470
> 
> 标签：javascript, google-maps-api-3, kml, google-fusion-tables

我发现这个 Q/A 似乎是答案：

```
var polygon = google.maps.Polygon(....);
polygon.addListener('click', function(){

}); 
```

...但问题是我一个字都听不懂。我什至不肯定这实际上是我正在寻找的。

(....) 代表什么？这会从哪里拉出实际的 URL？我是否会在我的融合表中添加一个带有 URL 的列，然后以某种方式根据其国家代码调用特定单元格？

这是我目前用于我的国家多边形的代码，从融合表中提取 KML。

```
var layer = new google.maps.FusionTablesLayer({
    suppressInfoWindows: true,
    query: {
        select: 'geometry',
        from: '1LfVcxsno9k3l2zgKS_fwoyv9vc-ba7aoQEz0aKM'
    },
    styles: [{
        polygonOptions: {
        fillColor: '#5E5E5E',
        fillOpacity: 0.3
        }
      }]
    });
layer.setMap(map); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:56:13.300

在示例中，您正在查看的 (....) 将被替换为[PolygonOptions](https://developers.google.com/maps/documentation/javascript/reference#PolygonOptions)对象，类似于您用于创建图层的[FusionTablesOptions 。](https://developers.google.com/maps/documentation/javascript/reference#FusionTablesLayerOptions)

然后将一个事件绑定到创建的多边形。

但是，在您的情况下，您不是创建单个多边形，而是创建一个 FusionTablesLayer。

[此处](https://stackoverflow.com/a/10744426/1822046)的答案给出了一个将单击事件侦听器绑定到 FusionTablesLayer 对象的示例。

# joomla - joomfish rel=canonical

> ID：13922605
> 
> 赞同：1
> 
> 时间：2012-12-17T21:37:56.773
> 
> 标签：joomla, joomla1.5, joomfish

当主要内容没有翻译时，我试图在 joomla 1.5 网站的标题中显示一个 rel="canonical" 链接。

通过修改语言选择器模块，我成功地添加了指向其他语言的 rel="alternative"。

我需要知道的是，我可以在 joomfish 代码中的哪个位置检查主要内容是否已翻译，以及我的标题代码是否已翻译。

我查看了 plugins->missing translation.php，并添加了以下代码：

```
$doc=&JFactory::getDocument(); 
$getVars = JRequest::get( 'GET' );
$getVars['lang']='en';
$newURL = http_build_query($getVars);
$alternative=JRoute::_($newURL);
$customrel='<link rel="canonical" href="'.$alternative.'" />';
$doc->addCustomTag( $customrel ); 
```

标签会显示在头部，但会显示多次。我认为这与菜单项、模块等没有翻译结果有关，因此代码会针对每个项执行。我只希望它为主要内容项（无论是 com_content 还是其他组件）执行

提前致谢

# sql - Sql 列分组

> ID：13922606
> 
> 赞同：1
> 
> 时间：2012-12-17T21:38:00.140
> 
> 标签：sql, tsql, sql-server-2008-r2

> **可能重复：**
> [将多行连接成一个文本字符串？](https://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string)

我有一个`SkillSets`用一个`SkillID`字段和一个`SkillSetID`字段调用的表。假设我在此表中有记录，如下所示：

```
SkillID  SkillSetID
-------  ----------
750      2
750      4
750      5
751      3
751      4
751      6 
```

我需要一个产生以下内容的查询：

```
SkillID  SkillSetIDs
-------  ----------
750      2,4,5
751      3,4,6 
```

在我看来，我记得使用某种 xml 子句看到了这一点，但找不到任何关于它的内容，只是不知道如何在不使用游标或 while 循环的情况下完成它。你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:47:33.873

这对你有帮助吗？

```
select 'test' as Test, 1 as Item 
into #test 
union select 'test2', 2 
union select 'test', 3 
union select NUll, 4 
union select 'test', 5 

select t2.test, STUFF((SELECT  ', ' + cast(t1.Item as varchar (10) )
        FROM #test t1 where t2.test = t1.test 
        FOR XML PATH('')), 1, 1, '') 
     from #test t2
     group by t2.test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:39:49.733

在 MySQL 中，这将起作用：

```
SELECT SkillID, GROUP_CONCAT(SkillSetID) As SkillSetIDs
FROM skills
GROUP BY SkillID 
```

但是`GROUP_CONCAT`是 MySQL 特定的，所以如果您使用不同的数据库，那将无法运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T22:00:24.293

询问：

[**SQLFIDDLE示例**](http://sqlfiddle.com/#!3/0f04a/9)

```
SELECT
s.SkillID,
STUFF((
        SELECT ',' + SkillSetID
        FROM SkillSets s2
        WHERE s2.SkillID = s.SkillID
        FOR XML PATH('')
      ), 1, 1, '')  AS SkillSetIDs
FROM SkillSets s
GROUP BY s.SkillID 
```

结果：

```
| SKILLID | SKILLSETIDS |
-------------------------
|     750 |       2,4,5 |
|     751 |       3,4,6 | 
```

# sql - 如何强制执行此约束？

> ID：13922611
> 
> 赞同：2
> 
> 时间：2012-12-17T21:38:20.140
> 
> 标签：sql, sql-server, sql-server-2008, tsql, unique-constraint

我有这张桌子：

```
CREATE TABLE Category
(
  LogId int NULL,
  Name varchar(30) NOT NULL
) 
```

具有不同`LogId`s 的两个类别可能具有`Name`相同的名称，但一个类别可能与具有 null 的类别名称不同`LogId`。

有没有办法强制执行这个约束？

我尝试在此视图上创建唯一索引：

```
create view Category_LogId_Name
  with schemabinding
as
select
  LogId,
  Name
from
  dbo.Category
where
  LogId is null
union all 
select
  b.LogId,
  a.Name
from
  dbo.Category a
  cross join dbo.Log b
where
  a.LogId is null 
```

但试图创建索引：

```
create unique clustered index un_Category_LogId_Name on Category_LogId_Name (LogId, Name) 
```

产生此错误：

> 无法在视图“Category_LogId_Name”上创建索引，因为它包含一个或多个 UNION、INTERSECT 或 EXCEPT 运算符。考虑为作为原始视图的 UNION、INTERSECT 或 EXCEPT 运算符的输入的每个查询创建单独的索引视图。

有不同的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T03:18:17.667

如果我没看错，你有两个限制：

1.  Category Name + LogId 必须唯一；如果 LogId 为 null，则 Name 必须是唯一的。
2.  给定的类别名称可能与非空 LogId 或空 LogId 相关联，但不能同时与两者相关联。

`UNIQUE`您使用香草约束强制执行 (1) ，如下所示：

```
alter table dbo.Category add constraint UQ_Category (Name, LogId) 
```

与`PRIMARY KEY`约束不同，`UNIQUE`约束允许可为空的键，并将空值视为相同“值”的实例。因此，将允许此数据：

```
insert dbo.Category (LogId, Name) values (null, 'Name1') -- ok
insert dbo.Category (LogId, Name) values (1, 'Name1') -- ok
insert dbo.Category (LogId, Name) values (2, 'Name1') -- ok
insert dbo.Category (LogId, Name) values (3, 'Name1') -- ok 
```

但这将在第一次插入后被拒绝：

```
insert dbo.Category (LogId, Name) values (null, 'Name1') -- ok
insert dbo.Category (LogId, Name) values (null, 'Name1') -- error
insert dbo.Category (LogId, Name) values (null, 'Name1') -- error
insert dbo.Category (LogId, Name) values (null, 'Name1') -- error 
```

然后对于 (2)，您需要一些东西来强制执行*排他性*，这样如果 Name 与 null LogId 相关联，则它不能与非 null LogId 相关联，反之亦然。为此，您可以在索引视图中按名称和 LogId 的无效性进行分组：

```
create view dbo.MakeItExclusive
with schemabinding as
select Name
     , case when LogId is null then 1 else 0 end as HasNullLogIds
     , count_big(*) as _rowcount
from dbo.Category
group by Name
       , case when LogId is null then 1 else 0 end
go

create unique clustered index CU_MakeItExclusive on dbo.MakeItExclusive (Name)
go 
```

由于视图有`GROUP BY`子句，SQL Server 要求`COUNT_BIG(*)`在`SELECT`子句中创建索引。

除此之外，它非常简单：按 Name 和 LogId-nullness 分组，然后确保 Name 在结果中是唯一的。如果名称与空 LogId 和非空 LogId 相关联，则会有两行违反约束。

# jquery - jQuery fadeIn jCarouselLite div 导致滑块不前进

> ID：13922617
> 
> 赞同：0
> 
> 时间：2012-12-17T21:38:32.450
> 
> 标签：jquery, slider, cakephp-2.1, jcarousellite

我在需要最后一次调整的 CakePHP 应用程序中有一个工作的 jCarouselLite 滑块。客户端希望滑块在大约五秒钟内不加载，以便用户可以看到它后面的背景图像。

到目前为止，我的设置如下：

```
<script type="text/javascript">
        $(document).ready(function() {
            $('#carouselDelay').delay(5000).fadeIn(400);
        });
    </script>

<?php echo $this->Html->script(array('jquery.easing.1.3','jcarousellite_1.0.1','jquery.mousewheel.min'), array('inline' => false, 'safe' => false)); ?>
<script type="text/javascript">
    $(document).ready(function() {
        $('#carousel').jCarouselLite({
            btnNext: ".next",
            btnPrev: ".prev",
            circular: true,
            auto: 5000,
            beforeStart: function(a) {
              jQuery(a).parent().fadeTo(300, 0);
            },
            afterEnd: function(a) {
              jQuery(a).parent().fadeTo(300, 1);
            },
            speed: 0,
            visible: 1,
            btnGo: [".carouselThumb .1", ".carouselThumb .2",
                ".carouselThumb .3", ".carouselThumb .4", ".carouselThumb .5", ".carouselThumb .6", ".carouselThumb .7", ".carouselThumb .8", ".carouselThumb .9"]
        });
    });

</script>

<div id="carouselDisplay">
    <div id="carousel">
         <!-- Carousel content here -->
    </div>
</div> 
```

问题是当我启用淡入淡出效果时`#carouselDisplay`，滑块本身不会前进到下一张幻灯片。

我曾尝试调用 jQuery noConflict，但这并没有帮助。我还尝试将延迟和淡入淡出影响移动到 $(window).load 事件，但结果是一样的。

你能帮我弄清楚为什么延迟与滑块推进冲突吗？我还没有找到任何其他关于此的报道。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:16:02.643

您应该将轮播作为 fadeIn 方法（回调）的第二个参数启动：

```
$('#carouselDelay').delay(5000).fadeIn(400, function() {
    $('#carousel').jCarouselLite({
        [...]
        [...]
    });
}); 
```

Because the container is hidden, jCarousel will not be able to calculate the GUI.

(Writing this from a smart phone, sorry for any typos :))

# asp.net - 尚未使用 WebApi Delegating 处理程序分配内部处理程序

> ID：13922618
> 
> 赞同：15
> 
> 时间：2012-12-17T21:38:34.790
> 
> 标签：asp.net, asp.net-web-api, asp.net-web-api-routing

我遇到了 WebApi 在我的代码中抛出异常的问题：

```
public class WebApiAuthenticationHandler : DelegatingHandler
    {
        private const string AuthToken = "AUTH-TOKEN";

        protected override Task<HttpResponseMessage> SendAsync(
            HttpRequestMessage request, CancellationToken cancellationToken)
        {                  
            var requestAuthTokenList = GetRequestAuthTokens(request);
            if (ValidAuthorization(requestAuthTokenList))
            {
                // EXCEPTION is occuring here!....
                return base.SendAsync(request, cancellationToken);
            }

            /*
            ** This will make the whole API protected by the API token.
            ** To only protect parts of the API then mark controllers/methods
            ** with the Authorize attribute and always return this:
            **
            ** return base.SendAsync(request, cancellationToken);
            */
            return Task<HttpResponseMessage>.Factory.StartNew(
                () =>
                {
                    var resp = new HttpResponseMessage(HttpStatusCode.Unauthorized)
                    {
                        Content = new StringContent("Authorization failed")
                    };

                    //var resp = new HttpResponseMessage(HttpStatusCode.Unauthorized);                                                                                   
                    //resp.Headers.Add(SuppressFormsAuthenticationRedirectModule.SuppressFormsHeaderName,"true");
                    return resp;
                });
        } 
```

异常发生在线：

```
base.SendAsync(request, cancellationToken); 
```

我不知道如何解决这个问题。我的路由表中有以下内容：

```
 routes.MapHttpRoute("NoAuthRequiredApi", "api/auth/", new { Controller = "Auth" });
    routes.MapHttpRoute("DefaultApi", "api/{controller}/{id}", new { id = RouteParameter.Optional }, null, new WebApiAuthenticationHandler()); 
```

发生这种情况的路由是 DefaultApi 路由。任何帮助都非常感谢....

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-18T08:54:41.120

在此处找到答案并[在](https://github.com/thinktecture/Thinktecture.IdentityModel.45/blob/master/IdentityModel/Thinktecture.IdentityModel/Tokens/Http/AuthenticationHandler.cs)[此处](https://web.archive.org/web/20170930023123/http://wcf.codeplex.com:80/discussions/281515)找到示例处理程序。

您需要设置要将请求传递给的 InnerHandler。

只需将其添加到您的构造函数中：

```
public class WebApiAuthenticationHandler : DelegatingHandler
{
    public WebApiAuthenticationHandler(HttpConfiguration httpConfiguration)
    {
        InnerHandler = new HttpControllerDispatcher(httpConfiguration); 
    } 
```

并在创建新实例时传入对 GlobalConfiguration 的引用：

```
routes.MapHttpRoute("DefaultApi", "api/{controller}/{id}", new { id = RouteParameter.Optional }, null, WebApiAuthenticationHandler(GlobalConfiguration.Configuration)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-12T10:08:47.477

有时您应该检查您请求的 RESTful Url 是否确实存在于您的控制器中。我曾经遇到过这种由错误的 URL 匹配引起的异常。谢谢。

# c++ - Project Euler #14 代码输出未到来

> ID：13922622
> 
> 赞同：-1
> 
> 时间：2012-12-17T21:38:47.670
> 
> 标签：c++

我使用以下代码来解决问题#14，但由于某种奇怪的原因它没有输出。也许运行时间太长？？？PSI 知道 max 不应该是答案，但无论如何仍然没有输出，而对于像 i<100 这样的较小值，我得到了输出。

```
#include <iostream>
long collatz(long);

int main()
{
  using namespace std;
 long i=3,max;
for(i=3;i<1000000;i++)
{
  max=collatz(i-1);
  if(collatz(i)>collatz(i-1))
  {
      max=collatz(i);
  }
  else
  {
      max=collatz(i-1);
  }
 }
cout<<max<<endl;
 cin.clear();
 cin.get();
}
long collatz(long n)
{
int count=0;
while(n!=1)
{
    if(n%2==0)
    {
        n=n/2;
        count+=1;
    }
    else
    {
        n=3*n+1;
    }
}
return count;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T22:54:22.063

如果你用 n = 113383 调用 collat​​z，你会溢出并且 n 变成负数，它永远不会恢复。所以你有一个无限循环，因为它永远不会是 1。你需要使用 long long 内部 collat​​z。

但是，正如其他人指出的那样，您的 collat​​z 函数还有其他问题。此外，您在 main 中的循环逻辑不正确。您每次通过循环都重置最大值。因此，您报告的结果将是 collat​​z(999999) 或 collat​​z(999998)。但这不是正确的答案。

# java - Android vs Java 在创建方法时给我带来了一些困惑

> ID：13922625
> 
> 赞同：-4
> 
> 时间：2012-12-17T21:39:00.483
> 
> 标签：java, android

今天我正在帮助一位朋友完成他的 Java 作业，我想我没有意识到纯 Java 和 Android 中的 Java 之间存在差异。快速编写程序：

```
public class myClass{

    public static void Main (String[] args){
        doThis();
    }

    public void doThis(){
        System.out.println("Did this");
    }
} 
```

但是在运行它时，我收到一个抱怨，我需要将 doThis() 方法设置为静态的。这是为什么？当我在 Android 中开发一些基本的东西时，我从来不需要使用 static 关键字。

*注意：这可能源于我对静态的实际含义感到害怕。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:41:47.367

> 这是为什么？

因为`Main()`是静态的。

如果`Main()`是实例方法，并且您调用`Main()`了`myClass`（例如，`new myClass`）的实例，那么`doThis()`也可能是实例方法。或者，如果您的静态`Main()`创建了 的实例`myClass`，它可以调用`doThis()`该实例。

> 当我在 Android 中开发一些基本的东西时，我从来不需要使用 static 关键字。

这是因为您在 Android 中的入口点往往是组件上`onCreate()`的实例方法（例如，`Activity`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:43:14.653

静态方法是不在任何 Object 实例上调用的方法。非静态方法属于一个对象，并且需要一个对象实例才能被调用。因此从静态方法调用实例方法是不合法的，因为静态方法不会在任何对象上调用。

您需要实例化一个对象来调用实例方法：

```
public static void main(String[] args){
    MyClass object = new MyCLass();
    object.doThis();
}
public void doThis(){
    System.out.println("Did this");
} 
```

Android 代码是 Java 代码，并且具有完全相同的规则。

阅读[有关实例和静态成员的 Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T21:41:56.837

问题是你需要像这样重写它：

```
 public class MyClass{  //fixed camel casing, classes start with upper case
       public static void main (String[] args){  //fixed lettering
          MyClass mc = new MyClass();
          mc.doThis();
       }

    public void doThis(){
        System.out.println("Did this");
            }
    } 
```

这对于Android和Java之间的区别并没有什么特别之处，两者都会失败。问题是您试图从静态上下文中引用非静态方法，这可能会导致问题，因为静态表示**不需要**实例化该类来调用函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T21:49:05.537

可以在没有拥有类的实例的情况下调用静态方法，因此您可以这样做：

```
myClass.doThis(); 
```

由于您的 doThis() 方法不是静态的，因此您必须像这样创建一个实例对象：

```
myClass instance = new myClass();
instance.doThis(); 
```

调用 doThis() 方法的 main() 方法是静态方法，调用它不需要 myClass 的实例。这意味着您的主要方法调用的任何方法都必须是静态的，或者在实例对象上调用（参见上面的第二个示例）。

# ibm-midrange - 从 COBOL 或 CL 调用 Web 服务

> ID：13922626
> 
> 赞同：10
> 
> 时间：2012-12-17T21:39:01.597
> 
> 标签：ibm-midrange, cobol, control-language

我正在使用 AS400，我被要求从绿屏调用 Web 服务。

这怎么可能达到？

任何示例 COBOL 或 CL 代码都会非常有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T22:23:15.747

我在 RPGLE 中编写了一些“中间件”来调用 Web 服务 (SOAP) 并处理返回的 XML 数据。简而言之，这是该过程：

```
1) Open a socket to the web service
2) Build the XML "payload"
3) Transmit the SOAP request (wrap the payload in a SOAP body and transmit the whole through the socket opened in 1) and save the data sent back by the web service.
4) Parse the XML string returned to me (using the xml-sax BIF)
5) Process that data just like any other data. 
```

我使用了 Scott Klement 的很多东西（非常感谢 Klement 先生！）：

```
ERRNO_H
IFS_H
IFSUTIL_H
SOCKET_H
SOCKUTIL_H 
```

我还必须处理与 EBCDIC 和 UTF-8 之间的数据转换。我想我也模仿了 Scott 写的一些东西，但我记不清了。搜索 iconv 以开始使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T22:09:14.427

如果您正在寻找简单的东西，不妨看看[GETURI](http://www.bvstools.com/geturi.html)。我从未亲自使用过它。

否则，您可以使用[HTTPAPI](http://www.scottklement.com/httpapi/)自行开发。同样，我也没有使用过这个，但我使用了 Scott 的 FTPAPI 并且对我来说效果很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T22:23:08.813

我不是 Cobol 程序员，但我可以从 RPG 调用 Java。也许您可以用 Java 编写 Web 服务客户端（其中有很多示例）并从 Cobol 调用它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-18T00:23:57.713

我不是 OS/400 程序员，但我只是看了一下，libCURL 似乎已经移植到了 AS/400。

这是一个 COBOL 示例，它利用 libCURL 来拉取最新的 OpenCOBOL 预发行版，使用本地和服务器时间戳来避免任何不当流量。**出现刷新.cbl**

```
 *> **************************************************************
  *> * access libcurl to update current OC1.1 source archive
  *> **************************************************************
  *> Authors:   Brian Tiffin, Joseph James Frantz
  *> Dates:     22-July-2008, 29-July-2008
  *> Purpose:   Sample calls to occurl wrapper
  *>            Wasn't designed to be called a binding
  *> Tectonics: cobc -c -Wall occurl.c
  *>            cobc -x -lcurl occurlrefresh.cbl occurl.o
  *>            ./occurlrefresh [-v|-q] [url file] [-v|-q url file] 
   identification division.
   program-id. occurlrefresh.

   environment division.
   input-output section.

   data division.
   working-storage section.

   copy occurlsym.

   78 newline     value x"0a".

   01 args        pic x(1024).
   01 urlarg      pic x(255).
      88 urlarg-oc   value
         'http://www.sim-basis.de/open-cobol-1.1.tar.gz'.
   01 filearg     pic x(255).
      88 filearg-oc  value 
         'open-cobol-1.1.tar.gz'.
   01 verbarg     pic x(255).
   01 argcount    pic s9(9) comp-5.

   01 verbosity         pic 9(9) usage binary value 1.
      88 quiet          value 0.
      88 verbose        value 1 thru 2.
      88 veryverbose    value 2.

   local-storage section.
   01 curl        usage pointer.
   01 result      pic s9(9) comp-5.

   01 curlurl     pic x(256).
   01 curlfile    pic x(256).

   01 starttime   pic s9(7)v99 comp-5.
   01 endtime     pic s9(7)v99 comp-5.
   01 showtime    pic z(6)9.99.

   01 modtime     usage binary-c-long.

  *> Update the OC 1.1 tar if applicable by modification time
   procedure division.

  *> Pull any command line arguments
   accept args from command-line end-accept
   unstring args delimited by all spaces
       into verbarg urlarg filearg 
       tallying in argcount
   end-unstring
  *> no args is still argcount 1
   if verbarg equals spaces
      subtract 1 from argcount end-subtract
   end-if
   evaluate argcount
      when 0
         set  urlarg-oc  to true
         set  filearg-oc to true
      when 1
         evaluate verbarg
            when "-q"  set  quiet       to true
            when "-v"  set  veryverbose to true
            when other move 1 to verbosity
         end-evaluate
         set  urlarg-oc  to true
         set  filearg-oc to true
      when 2
         move urlarg     to filearg
         move verbarg    to urlarg
      when 3
         evaluate verbarg
            when "-q"  set  quiet       to true
            when "-v"  set  veryverbose to true
            when other move 1 to verbosity
         end-evaluate
   end-evaluate
  *> null terminate the strings for C
   string urlarg    delimited by space
          low-value delimited by size
          into curlurl
   end-string
   string filearg   delimited by space
          low-value delimited by size
          into curlfile
   end-string

  *> parameters ready
   if verbose 
      display
          "file: " function trim(filearg trailing) 
          " from url: " function trim(urlarg trailing) 
      end-display
   end-if

  *> let libcurl do all the hard work
   call "occurl_init" returning curl end-call.

  *> Set some verbosity options
   if verbose
      call "occurl_progress" using by value curl
                                   by value verbosity
      end-call
   end-if
   if veryverbose 
      call "occurl_verbose" using by value curl
                                  by value verbosity
      end-call
   end-if

  *> move zero to modtime, retrieve_file will test local modtime
   move 0 to modtime
   accept starttime from time end-accept
   call "occurl_retrieve_file" using by value curl
                                by reference curlurl
                                by reference curlfile
                                by reference modtime
                          returning result
   end-call
   if verbose
      accept endtime from time end-accept
      subtract
          starttime from endtime giving starttime
      end-subtract
      divide 
          starttime by 100 giving starttime
      end-divide
      move starttime to showtime
      display newline "Done in " showtime end-display
      if result not = 0
         display
             "result: " result
             " - " CURLEMSG(result)
         end-display
      end-if
   end-if
   call "occurl_cleanup" using by value curl end-call
   stop run giving result
   continue.
   exit program. 
```

加上卷曲状态代码和消息的小抄写本，**occurrisonsym.cpy**

```
 *> manifest constants for libcurl
  *> Usage: COPY occurlsym  inside data division

  *> Result codes
   78 CURLE_OK                             VALUE 0.
  *> Error codes
   78 CURLE_UNSUPPORTED_PROTOCOL           VALUE 1.
   78 CURLE_FAILED_INIT                    VALUE 2.
   78 CURLE_URL_MALFORMAT                  VALUE 3.
   78 CURLE_OBSOLETE4                      VALUE 4.
   78 CURLE_COULDNT_RESOLVE_PROXY          VALUE 5.
   78 CURLE_COULDNT_RESOLVE_HOST           VALUE 6.
   78 CURLE_COULDNT_CONNECT                VALUE 7.
   78 CURLE_FTP_WEIRD_SERVER_REPLY         VALUE 8.
   78 CURLE_REMOTE_ACCESS_DENIED           VALUE 9.
   78 CURLE_OBSOLETE10                     VALUE 10.
   78 CURLE_FTP_WEIRD_PASS_REPLY           VALUE 11.
   78 CURLE_OBSOLETE12                     VALUE 12.
   78 CURLE_FTP_WEIRD_PASV_REPLY           VALUE 13.
   78 CURLE_FTP_WEIRD_227_FORMAT           VALUE 14.
   78 CURLE_FTP_CANT_GET_HOST              VALUE 15.
   78 CURLE_OBSOLETE16                     VALUE 16.
   78 CURLE_FTP_COULDNT_SET_TYPE           VALUE 17.
   78 CURLE_PARTIAL_FILE                   VALUE 18.
   78 CURLE_FTP_COULDNT_RETR_FILE          VALUE 19.
   78 CURLE_OBSOLETE20                     VALUE 20.
   78 CURLE_QUOTE_ERROR                    VALUE 21.
   78 CURLE_HTTP_RETURNED_ERROR            VALUE 22.
   78 CURLE_WRITE_ERROR                    VALUE 23.
   78 CURLE_OBSOLETE24                     VALUE 24.
   78 CURLE_UPLOAD_FAILED                  VALUE 25.
   78 CURLE_READ_ERROR                     VALUE 26.
   78 CURLE_OUT_OF_MEMORY                  VALUE 27.
   78 CURLE_OPERATION_TIMEDOUT             VALUE 28.
   78 CURLE_OBSOLETE29                     VALUE 29.
   78 CURLE_FTP_PORT_FAILED                VALUE 30.
   78 CURLE_FTP_COULDNT_USE_REST           VALUE 31.
   78 CURLE_OBSOLETE32                     VALUE 32.
   78 CURLE_RANGE_ERROR                    VALUE 33.
   78 CURLE_HTTP_POST_ERROR                VALUE 34.
   78 CURLE_SSL_CONNECT_ERROR              VALUE 35.
   78 CURLE_BAD_DOWNLOAD_RESUME            VALUE 36.
   78 CURLE_FILE_COULDNT_READ_FILE         VALUE 37.
   78 CURLE_LDAP_CANNOT_BIND               VALUE 38.
   78 CURLE_LDAP_SEARCH_FAILED             VALUE 39.
   78 CURLE_OBSOLETE40                     VALUE 40.
   78 CURLE_FUNCTION_NOT_FOUND             VALUE 41.
   78 CURLE_ABORTED_BY_CALLBACK            VALUE 42.
   78 CURLE_BAD_FUNCTION_ARGUMENT          VALUE 43.
   78 CURLE_OBSOLETE44                     VALUE 44.
   78 CURLE_INTERFACE_FAILED               VALUE 45.
   78 CURLE_OBSOLETE46                     VALUE 46.
   78 CURLE_TOO_MANY_REDIRECTS             VALUE 47.
   78 CURLE_UNKNOWN_TELNET_OPTION          VALUE 48.
   78 CURLE_TELNET_OPTION_SYNTAX           VALUE 49.
   78 CURLE_OBSOLETE50                     VALUE 50.
   78 CURLE_PEER_FAILED_VERIFICATION       VALUE 51.
   78 CURLE_GOT_NOTHING                    VALUE 52.
   78 CURLE_SSL_ENGINE_NOTFOUND            VALUE 53.
   78 CURLE_SSL_ENGINE_SETFAILED           VALUE 54.
   78 CURLE_SEND_ERROR                     VALUE 55.
   78 CURLE_RECV_ERROR                     VALUE 56.
   78 CURLE_OBSOLETE57                     VALUE 57.
   78 CURLE_SSL_CERTPROBLEM                VALUE 58.
   78 CURLE_SSL_CIPHER                     VALUE 59.
   78 CURLE_SSL_CACERT                     VALUE 60.
   78 CURLE_BAD_CONTENT_ENCODING           VALUE 61.
   78 CURLE_LDAP_INVALID_URL               VALUE 62.
   78 CURLE_FILESIZE_EXCEEDED              VALUE 63.
   78 CURLE_USE_SSL_FAILED                 VALUE 64.
   78 CURLE_SEND_FAIL_REWIND               VALUE 65.
   78 CURLE_SSL_ENGINE_INITFAILED          VALUE 66.
   78 CURLE_LOGIN_DENIED                   VALUE 67.
   78 CURLE_TFTP_NOTFOUND                  VALUE 68.
   78 CURLE_TFTP_PERM                      VALUE 69.
   78 CURLE_REMOTE_DISK_FULL               VALUE 70.
   78 CURLE_TFTP_ILLEGAL                   VALUE 71.
   78 CURLE_TFTP_UNKNOWNID                 VALUE 72.
   78 CURLE_REMOTE_FILE_EXISTS             VALUE 73.
   78 CURLE_TFTP_NOSUCHUSER                VALUE 74.
   78 CURLE_CONV_FAILED                    VALUE 75.
   78 CURLE_CONV_REQD                      VALUE 76.
   78 CURLE_SSL_CACERT_BADFILE             VALUE 77.
   78 CURLE_REMOTE_FILE_NOT_FOUND          VALUE 78.
   78 CURLE_SSH                            VALUE 79.
   78 CURLE_SSL_SHUTDOWN_FAILED            VALUE 80.
   78 CURLE_AGAIN                          VALUE 81.

  *> Error strings
   01 LIBCURL_ERRORS.
      02 CURLEVALUES.
         03 FILLER PIC X(30) VALUE "CURLE_UNSUPPORTED_PROTOCOL    ".
         03 FILLER PIC X(30) VALUE "CURLE_FAILED_INIT             ".
         03 FILLER PIC X(30) VALUE "CURLE_URL_MALFORMAT           ".
         03 FILLER PIC X(30) VALUE "CURLE_OBSOLETE4               ".
         03 FILLER PIC X(30) VALUE "CURLE_COULDNT_RESOLVE_PROXY   ".
         03 FILLER PIC X(30) VALUE "CURLE_COULDNT_RESOLVE_HOST    ".
         03 FILLER PIC X(30) VALUE "CURLE_COULDNT_CONNECT         ".
         03 FILLER PIC X(30) VALUE "CURLE_FTP_WEIRD_SERVER_REPLY  ".
         03 FILLER PIC X(30) VALUE "CURLE_REMOTE_ACCESS_DENIED    ".
         03 FILLER PIC X(30) VALUE "CURLE_OBSOLETE10              ".
         03 FILLER PIC X(30) VALUE "CURLE_FTP_WEIRD_PASS_REPLY    ".
         03 FILLER PIC X(30) VALUE "CURLE_OBSOLETE12              ".
         03 FILLER PIC X(30) VALUE "CURLE_FTP_WEIRD_PASV_REPLY    ".
         03 FILLER PIC X(30) VALUE "CURLE_FTP_WEIRD_227_FORMAT    ".
         03 FILLER PIC X(30) VALUE "CURLE_FTP_CANT_GET_HOST       ".
         03 FILLER PIC X(30) VALUE "CURLE_OBSOLETE16              ".
         03 FILLER PIC X(30) VALUE "CURLE_FTP_COULDNT_SET_TYPE    ".
         03 FILLER PIC X(30) VALUE "CURLE_PARTIAL_FILE            ".
         03 FILLER PIC X(30) VALUE "CURLE_FTP_COULDNT_RETR_FILE   ".
         03 FILLER PIC X(30) VALUE "CURLE_OBSOLETE20              ".
         03 FILLER PIC X(30) VALUE "CURLE_QUOTE_ERROR             ".
         03 FILLER PIC X(30) VALUE "CURLE_HTTP_RETURNED_ERROR     ".
         03 FILLER PIC X(30) VALUE "CURLE_WRITE_ERROR             ".
         03 FILLER PIC X(30) VALUE "CURLE_OBSOLETE24              ".
         03 FILLER PIC X(30) VALUE "CURLE_UPLOAD_FAILED           ".
         03 FILLER PIC X(30) VALUE "CURLE_READ_ERROR              ".
         03 FILLER PIC X(30) VALUE "CURLE_OUT_OF_MEMORY           ".
         03 FILLER PIC X(30) VALUE "CURLE_OPERATION_TIMEDOUT      ".
         03 FILLER PIC X(30) VALUE "CURLE_OBSOLETE29              ".
         03 FILLER PIC X(30) VALUE "CURLE_FTP_PORT_FAILED         ".
         03 FILLER PIC X(30) VALUE "CURLE_FTP_COULDNT_USE_REST    ".
         03 FILLER PIC X(30) VALUE "CURLE_OBSOLETE32              ".
         03 FILLER PIC X(30) VALUE "CURLE_RANGE_ERROR             ".
         03 FILLER PIC X(30) VALUE "CURLE_HTTP_POST_ERROR         ".
         03 FILLER PIC X(30) VALUE "CURLE_SSL_CONNECT_ERROR       ".
         03 FILLER PIC X(30) VALUE "CURLE_BAD_DOWNLOAD_RESUME     ".
         03 FILLER PIC X(30) VALUE "CURLE_FILE_COULDNT_READ_FILE  ".
         03 FILLER PIC X(30) VALUE "CURLE_LDAP_CANNOT_BIND        ".
         03 FILLER PIC X(30) VALUE "CURLE_LDAP_SEARCH_FAILED      ".
         03 FILLER PIC X(30) VALUE "CURLE_OBSOLETE40              ".
         03 FILLER PIC X(30) VALUE "CURLE_FUNCTION_NOT_FOUND      ".
         03 FILLER PIC X(30) VALUE "CURLE_ABORTED_BY_CALLBACK     ".
         03 FILLER PIC X(30) VALUE "CURLE_BAD_FUNCTION_ARGUMENT   ".
         03 FILLER PIC X(30) VALUE "CURLE_OBSOLETE44              ".
         03 FILLER PIC X(30) VALUE "CURLE_INTERFACE_FAILED        ".
         03 FILLER PIC X(30) VALUE "CURLE_OBSOLETE46              ".
         03 FILLER PIC X(30) VALUE "CURLE_TOO_MANY_REDIRECTS      ".
         03 FILLER PIC X(30) VALUE "CURLE_UNKNOWN_TELNET_OPTION   ".
         03 FILLER PIC X(30) VALUE "CURLE_TELNET_OPTION_SYNTAX    ".
         03 FILLER PIC X(30) VALUE "CURLE_OBSOLETE50              ".
         03 FILLER PIC X(30) VALUE "CURLE_PEER_FAILED_VERIFICATION".
         03 FILLER PIC X(30) VALUE "CURLE_GOT_NOTHING             ".
         03 FILLER PIC X(30) VALUE "CURLE_SSL_ENGINE_NOTFOUND     ".
         03 FILLER PIC X(30) VALUE "CURLE_SSL_ENGINE_SETFAILED    ".
         03 FILLER PIC X(30) VALUE "CURLE_SEND_ERROR              ".
         03 FILLER PIC X(30) VALUE "CURLE_RECV_ERROR              ".
         03 FILLER PIC X(30) VALUE "CURLE_OBSOLETE57              ".
         03 FILLER PIC X(30) VALUE "CURLE_SSL_CERTPROBLEM         ".
         03 FILLER PIC X(30) VALUE "CURLE_SSL_CIPHER              ".
         03 FILLER PIC X(30) VALUE "CURLE_SSL_CACERT              ".
         03 FILLER PIC X(30) VALUE "CURLE_BAD_CONTENT_ENCODING    ".
         03 FILLER PIC X(30) VALUE "CURLE_LDAP_INVALID_URL        ".
         03 FILLER PIC X(30) VALUE "CURLE_FILESIZE_EXCEEDED       ".
         03 FILLER PIC X(30) VALUE "CURLE_USE_SSL_FAILED          ".
         03 FILLER PIC X(30) VALUE "CURLE_SEND_FAIL_REWIND        ".
         03 FILLER PIC X(30) VALUE "CURLE_SSL_ENGINE_INITFAILED   ".
         03 FILLER PIC X(30) VALUE "CURLE_LOGIN_DENIED            ".
         03 FILLER PIC X(30) VALUE "CURLE_TFTP_NOTFOUND           ".
         03 FILLER PIC X(30) VALUE "CURLE_TFTP_PERM               ".
         03 FILLER PIC X(30) VALUE "CURLE_REMOTE_DISK_FULL        ".
         03 FILLER PIC X(30) VALUE "CURLE_TFTP_ILLEGAL            ".
         03 FILLER PIC X(30) VALUE "CURLE_TFTP_UNKNOWNID          ".
         03 FILLER PIC X(30) VALUE "CURLE_REMOTE_FILE_EXISTS      ".
         03 FILLER PIC X(30) VALUE "CURLE_TFTP_NOSUCHUSER         ".
         03 FILLER PIC X(30) VALUE "CURLE_CONV_FAILED             ".
         03 FILLER PIC X(30) VALUE "CURLE_CONV_REQD               ".
         03 FILLER PIC X(30) VALUE "CURLE_SSL_CACERT_BADFILE      ".
         03 FILLER PIC X(30) VALUE "CURLE_REMOTE_FILE_NOT_FOUND   ".
         03 FILLER PIC X(30) VALUE "CURLE_SSH                     ".
         03 FILLER PIC X(30) VALUE "CURLE_SSL_SHUTDOWN_FAILED     ".
         03 FILLER PIC X(30) VALUE "CURLE_AGAIN                   ".
   01 FILLER REDEFINES LIBCURL_ERRORS.
      02 CURLEMSG OCCURS 81 TIMES PIC X(30). 
```

和一个关联的 C 文件（虽然很多 C 可以直接用 COBOL 编码，因为我在撰写本文时刚刚学习 OpenCOBOL 的来龙去脉）。**出现.c**

```
/**********************************************************************/
/* wrap some common curl operations for use with OpenCOBOL 1.1        */
/* Author:    Brian Tiffin                                            */
/* Date:      21-July-2008                                            */
/* Version:   0.1                                                     */
/* Purpose:   Provide some net access to OpenCOBOL                    */
/* Tectonics: gcc -c occurl.c                                         */
/*            with libcurl dev installed                              */
/**********************************************************************/
#include <stdio.h>
#include <sys/stat.h>
#include <curl/curl.h>

/* Support structure for the file callbacks */
struct LocalFileStruc {
    const char *filename;
    FILE *stream;
};

/* Progress tracking */
double *Bar;

/* libcurl call back for file write */
static size_t wrap_fwrite(void *buffer, size_t size, size_t nmemb, void *stream) {
    struct LocalFileStruc *out=(struct LocalFileStruc *)stream;
    if(out && !out->stream) {
        /* open file for writing */
        out->stream=fopen(out->filename, "wb");
        if(!out->stream)
            return -1; /* failure, can't open file to write */
    }
    return fwrite(buffer, size, nmemb, out->stream);
}

/* Progress */
int progress_callback(char *Bar, double t, double d, double ultotal, double ulnow) {
    int oe;
    double val;
    if (t == 0) t = 1.0;
    val = d / t * 100;
    oe = (int)val;
    if (oe & 1) {
        putc('\\', stdout);
    } else {
        putc('/', stdout);
    }
    printf("%03.0f%%\b\b\b\b\b\b\b\b", val);
    fflush(stdout);
    return 0;
}

/* Routines to get and release CURL handles from OpenCOBOL */
/* Usage: */
/*   DATA DIVISION. */
/*   01 handle usage is pointer. */
/*   PROCEDURE DIVISION. */
/*   CALL "occurl_init" RETURNING handle. */ 
CURL* occurl_init() {
    return curl_easy_init();
}

/* Usage: */
/* CALL "occurl_cleanup" USING BY VALUE handle. */
void occurl_cleanup(CURL *curl) {
    curl_easy_cleanup(curl);
}

/* Set verbosity */
/* Usage: vflag being 0 or 1 */
/* CALL "occurl_verbose" USING BY VALUE vflag. */
void occurl_verbose(CURL *curl, int vflag) {
    /* Switch on or off full protocol/debug output */
    if (curl) {
        curl_easy_setopt(curl, CURLOPT_VERBOSE, (long)vflag);
    }
}

/* Set progress display on/off */
/* Usage: pflag being 0 or 1 */
/* CALL "occurl_verbose" USING BY VALUE pflag. */
void occurl_progress(CURL *curl, int pflag) {
    /* Switch on or off progress display */
    if (curl) {
        if (pflag) {
            curl_easy_setopt(curl, CURLOPT_NOPROGRESS, 0L);
            curl_easy_setopt(curl, CURLOPT_PROGRESSFUNCTION, progress_callback);
            curl_easy_setopt(curl, CURLOPT_PROGRESSDATA, &Bar);
    } else {
            curl_easy_setopt(curl, CURLOPT_NOPROGRESS, 1L);
            curl_easy_setopt(curl, CURLOPT_PROGRESSFUNCTION, NULL);
            curl_easy_setopt(curl, CURLOPT_PROGRESSDATA, NULL);
        }
    }
}

/* Ease of use; check mod-times, if since then read url, write to file */ 
/* Retrieve URL and save to local file after checking timestamps */
/* Usage: */
/* DATA DIVISION. */
/* 01 handle USAGE IS POINTER. */
/* 01 url. */
/*   02 urlname PIC x(21) VALUE "http://opencobol.org/". */
/*   02 filler  PIC x VALUE X"00". */
/* 01 filename */
/*    02 PIC x(). */
/*    02 filler pic x value low-value. */
/* 01 modtime USAGE IS BINARY-C-LONG */
/* PROCEDURE DIVISION. */
/* CALL "curl_retrieve_file" USING BY VALUE handle */
/*                                 BY REFERENCE url */
/*                                 BY REFERENCE filename */
/*                                 BY REFERENCE modtime */
/*                           RETURNING result. */
/* Pass modtime of 0 to get local mtime field, */
/*   modtime is modified with value from url if available */
int occurl_retrieve_file(CURL *curl, char *url, char *file, long *modtime) {
    CURLcode res;
    long urlstamp;

    struct stat st;

    struct LocalFileStruc localfile={
        "occurl.default",                 /* default filename */
        NULL                              /* stream */
    };

    /* point to the COBOL passed filename */
    if (file) {
        localfile.filename = file;
    }

    /* if modtime is zero, get local file modtime */
    if (*modtime == 0) {
        if (stat (file, &st) == 0) {
        *modtime = st.st_mtime;
    }
    }

    /* let libcurl do all the real work */
    if (curl) {
        curl_easy_setopt(curl, CURLOPT_URL, url);
        /* Only fetch new */
        curl_easy_setopt(curl, CURLOPT_FILETIME, 1L);
        curl_easy_setopt(curl, CURLOPT_TIMECONDITION, CURL_TIMECOND_IFMODSINCE);
        curl_easy_setopt(curl, CURLOPT_TIMEVALUE, *modtime);
        /* Define our callback to get called when there's data to be written */
        curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, wrap_fwrite);
        /* Set a pointer to our struct to pass to the callback */
        curl_easy_setopt(curl, CURLOPT_WRITEDATA, &localfile);

        /* After all the setopts, perform the operation */
        res = curl_easy_perform(curl);

        /* close off any file pointers */
        if (localfile.stream) {
            fclose(localfile.stream); /* close the local file */
        }

        /* return error results */
        if (res != 0) {
            return (int)res;
        }

        /* retrieve response code */
        res = curl_easy_getinfo(curl, CURLINFO_RESPONSE_CODE, &urlstamp);
        if (res != 0) {
            return (int)res;
        } else {
            if (urlstamp == 404) {
                return CURLE_REMOTE_FILE_NOT_FOUND;
            }
        }

        /* retrieve filetime for return value */
        res = curl_easy_getinfo(curl, CURLINFO_FILETIME, &urlstamp);
        if (res != 0) {
            return (int)res;
        } else {
            *modtime = urlstamp;
            return 0;
        }
    } else {
        return CURLE_FAILED_INIT;
    }
    return 0;
}

/* Fetch a url to a local file */
int occurl_get_url(CURL *curl, char *theurl, char *thefile) {
    CURLcode res;
    long urlstamp;

    struct LocalFileStruc localfile = {
        "occurl.default",         /* default filename */
        NULL                      /* stream */
    };

    /* point to the COBOL field */
    localfile.filename = thefile;

    if (curl) {
        curl_easy_setopt(curl, CURLOPT_URL, theurl);
        curl_easy_setopt(curl, CURLOPT_FILETIME, 1L);
        /* Define our callback to get called when there's data to be written */
        curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, wrap_fwrite);
        /* Set a pointer to our struct to pass to the callback */
        curl_easy_setopt(curl, CURLOPT_WRITEDATA, &localfile);

        res = curl_easy_perform(curl);

        /* close the local file */
        if (localfile.stream) {
            fclose(localfile.stream);
        }

        /* return error results */
        if (res != 0) {
            return (int)res;
        }

        /* retrieve response code */
        res = curl_easy_getinfo(curl, CURLINFO_RESPONSE_CODE, &urlstamp);
        if (res != 0) {
            return (int)res;
        } else {
            if (urlstamp == 404) {
                return CURLE_REMOTE_FILE_NOT_FOUND;
            }
        }
    } else {
        return CURLE_FAILED_INIT;
    }
    return 0;
}

/* The plan is to return a structure with all curl INFO fields filled */
int occurl_getinfo(CURL *curl, char *theurl, char *thedata) {
    CURLcode res;
    long urlstamp;

    if (curl) {
        curl_easy_setopt(curl, CURLOPT_URL, theurl);
        res = curl_easy_getinfo(curl, CURLINFO_FILETIME, &urlstamp);
    } else {
        return -1;
    }
    return (int)res;
} 
```

请注意，最近 OpenCOBOL 领域的情况发生了变化，我们已经转移到 SourceForge。1.1 tarball 现在托管在[http://downloads.sourceforge.net/project/open-cobol/open-cobol/1.1/open-cobol-1.1.tar.gz](http://downloads.sourceforge.net/project/open-cobol/open-cobol/1.1/open-cobol-1.1.tar.gz)。您可能希望更新发生刷新.cbl 以使用新的默认文件名。这段代码现在很旧，很快就会得到 OpenCOBOL FAQ 文件的更新。

OpenCOBOL 在 AS/400 上运行，二进制文件发布到[http://www.kiska.net/opencobol/1.1/](http://www.kiska.net/opencobol/1.1/)，这是最近从飓风桑迪地下室洪水中恢复过来的服务器。

您的特定问题当然需要进行一些修改，利用 libCURL 将数据拉入 WORKING-STORAGE 而不是直接写入文件。

OpenCOBOL 示例还用于 CGI 和 AJAX、libSOUP 服务和其他一些与 Web 相关的示例。Google 获取 OpenCOBOL 常见问题解答并查看第 5 节关于扩展的内容。调用 libXML2 也很有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-12T08:31:49.040

IBM 在其 SYSTOOLS 架构中提供对具有 SQL 用户定义函数的 Web 服务的访问： [https ://www.ibm.com/developerworks/ibmi/library/i-incorporating-web-service/](https://www.ibm.com/developerworks/ibmi/library/i-incorporating-web-service/)

我们正在使用这种技术从 IBM i 7.2 上的 cobol 应用程序调用 Web 服务。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T04:05:58.150

如果您正在使用 Rational Development Studio for i，您应该拥有各种项目类型，您可以在其中给它一个 wsdl 并让它生成一个客户端 Cobol 程序，或者您可以识别一个 copybook 并让它生成一个服务器 Cobol 程序。

如果您正在做老派，1980 年代的文本编辑器开发，那么您必须自己动手。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-07T15:19:20.493

我们研究了在 RPG 中执行此操作的几个选项。虽然您可以通过字符串连接和打开 HTTP 端口（糟糕）手动构建 SOAP 数据包，但我们决定使用名为[Integrated Web Services for IBM i](http://www-03.ibm.com/systems/power/software/i/iws/index.html)的 IBM 技术。

大致的过程是您将它指向一个 WSDL，它会为您生成一个 Web 服务客户端。这采用服务程序的形式，然后您可以将其绑定到您的 ILE 程序中。

如果您想了解更多详细信息，上面的链接上有一个程序员指南。

# jquery - 滚动时在 Web 应用程序上触发悬停状态

> ID：13922628
> 
> 赞同：3
> 
> 时间：2012-12-17T21:39:09.003
> 
> 标签：jquery, iphone, web-applications, scroll, hover

在这里创建一个网络应用程序，我面临的最大问题是，每当您滚动浏览内容时，所有悬停/活动/焦点状态都会触发，这很烦人。

在本机应用程序中，iPhone 或 Android 应用程序知道滚动和点击之间的区别。无论如何，使用 jQuery 或 CSS 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:27:42.940

我的第一反应是添加一个 mouseenter、mouseleave 事件：

```
$("div").mouseover(function () {
    setTimeout($.proxy(function () {
        $(this).css("background-color", "blue");
    }, this), 500)
}).mouseout(function () {
    $('div').css("background-color", "");
}); 
```

上面的代码将切换 div 的背景颜色，然后在元素之间将它们全部清除。话虽如此，根据您的要求以及您正在使用的元素，最好不要重新发明轮子而只使用：

**hoverIntent jQuery 插件**
[http://cherne.net/brian/resources/jquery.hoverIntent.html](http://cherne.net/brian/resources/jquery.hoverIntent.html)

希望有帮助！

# php - PHP 和 AWS - 按标签检索 EC2 实例

> ID：13922630
> 
> 赞同：4
> 
> 时间：2012-12-17T21:39:13.260
> 
> 标签：php, amazon-web-services, amazon-ec2

我正在尝试通过 PHP 按标签检索 EC2 实例。我可以创建带有标签的服务器，我可以检索带有标签数据的服务器，但是如果我想做的是通过这些标签之一进行检索，那么我很难找到示例。

这有效：

```
if ($server_group != '') 
        $filter[] = array('Name' => 'tag-value','Value' => $server_group);

$response = $ec2->describe_instances(array('Filter' => $filter)); 
```

但是，问题是它会找到任何带有我分配给变量 $server_group 的值的标签，无论它是否是正确的标签。我当然可以在分配标签值时小心谨慎，但这不是防弹的。

文档中解释了替代语法：

示例：要仅列出已分配标签目的 = X 的资源，请指定：

```
Filter.1.Name=tag:Purpose
Filter.1.Value.1=X 
```

然而，他们没有给出例子。我以为会是：

```
$filter[] = array('Filter.1.Name','Value' => 'tag:Group');
$filter[] = array('Name' => 'Filter.1.Value.1','Value' => $server_group); 
```

但是，这似乎不起作用 - 我没有得到任何回报。

有人做过吗？有他们可以分享的工作示例吗？我可能没有在 Google 中问过正确的问题 - 有很多关于如何创建标签的示例，但不是如何通过它们检索的示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-20T20:11:23.530

我们最近需要编写一个脚本来轻松关闭 QA 环境中的所有 EC2 实例。我们使用环境标签来表示 DEV、PRD 或 QA 环境。这是一个代码片段，用于演示我们如何通过 API 进行过滤：

```
<?php
$aws = \Aws\Common\Aws::factory(array(
            'key'    => $key,
            'secret' => $secret,
            'region' => $region
        ));

$ec2 = $aws->get('ec2');
$args = array(
        'Filters' => array(
                array('Name' => 'tag:Environment',
                      'Values' => array('QA')
                )
        )
    );
$results = $ec2->describeInstances($args);
$reservations = $results['Reservations'];
foreach ($reservations as $reservation) {
    $instances = $reservation['Instances'];
    foreach ($instances as $instance) {

        $instanceName = '';
        foreach ($instance['Tags'] as $tag) {
            if ($tag['Key'] == 'Name') {
                $instanceName = $tag['Value'];
            }
        }

        if ($instance['State']['Name'] == \Aws\Ec2\Enum\InstanceStateName::RUNNING){
            $shutdownInstances['InstanceIds'][] = $instance['InstanceId'];
        }
    }

}
$results = $ec2->stopInstances($shutdownInstances);

$hipURL = "http://api.hipchat.com/v1/rooms/message?auth_token=$token&room_id=$roomId&from=$from&message=QA%20has%20been%20told%20to%20shutdown.";
$result = file_get_contents($hipURL); 
```

我们在 cron 作业中使用它来确保 QA 每天晚上都关闭，因为没有人在一夜之间使用它，并且它为我们节省了几美元来让它不运行。

要重写您的过滤器以查找值为 X 的所有目的标签：

```
'Filters' => array(
  array('Name' => 'tag:Purpose',
        'Values' => array('X')
  )
) 
```

# php - php根据多维数组的第一个值删除重复项

> ID：13922633
> 
> 赞同：3
> 
> 时间：2012-12-17T21:39:34.573
> 
> 标签：php, multidimensional-array, duplicate-removal

给定

```
[0] => Array
    (
        [0] => ask.com
        [1] => 2320476
    )

[1] => Array
    (
        [0] => amazon.com
        [1] => 1834593
    )

[2] => Array
    (
        [0] => ask.com
        [1] => 1127456
    ) 
```

我需要仅根据第一个值删除重复值，而不管任何其他后续值可能是什么。注意 [0][1] 与 [2][1] 不同，但我认为这是重复的，因为有两个匹配的第一个值。其他数据无关紧要，不应进行比较。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T21:50:45.563

试试这个，假设这`$mainArray`是你拥有的数组。

```
$outputArray = array(); // The results will be loaded into this array.
$keysArray = array(); // The list of keys will be added here.
foreach ($mainArray as $innerArray) { // Iterate through your array.
    if (!in_array($innerArray[0], $keysArray)) { // Check to see if this is a key that's already been used before.
        $keysArray[] = $innerArray[0]; // If the key hasn't been used before, add it into the list of keys.
        $outputArray[] = $innerArray; // Add the inner array into the output.
    }
}
print_r($outputArray); 
```

# iframe - 带有 ExtJS4.1.2 的 IFrame 上的事件侦听器

> ID：13922634
> 
> 赞同：0
> 
> 时间：2012-12-17T21:39:35.497
> 
> 标签：iframe, extjs, extjs4

我正在使用“uxiframe”组件将单独的应用程序加载到模式窗口（ExtJS4.1x）中。跨域问题显然不允许我访问 IFrame 内容的任何部分。但是，IFrame 中的同一域应用程序的文档可以通过父级访问`iframe.getDoc()`

问题是：有没有办法让我在父模式窗口的 IFrame 内的元素上设置 DOM 侦听器？

谢谢，一个简单的例子将不胜感激。

**更新**感谢@lontiviero 的提示让我开始。这是我最终得到的结果：

```
var bodyEl=Ext.get(iframe.getDoc().body);  //this gives me an Ext.dom.Element object 
bodyEl.on('click',
          function(event, el,opts){
             console.log("<p> clicked");
          },
          this, //scope
          {delegate:'p'} //options
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:47:16.210

使用此代码，我能够将事件附加到 iframe 的正文元素。

```
Ext.EventManager.on(iframe.contentDocument.body, 'mouseover', function() {
    alert('hello');
}); 
```

在 jsfiddle 中看一下：http: [//jsfiddle.net/XApQU/](http://jsfiddle.net/XApQU/)

# java - Java：我应该在事件调度线程 (EDT) 中记录问题吗？

> ID：13922646
> 
> 赞同：2
> 
> 时间：2012-12-17T21:40:16.043
> 
> 标签：java, event-dispatch-thread

我想知道是否可以直接在事件调度线程中写入日志文件。我知道一个经验法则是将长时间的操作排除在 EDT 之外，但是我不确定对文本文件的一次写入是否属于这一类。我目前有工作线程这样做，但我遇到了一些奇怪的异常。在研究这些异常之前，我想我会看看是否可以直接在 EDT 中进行这些日志写入。正如我所说，这些写入相对较小且不常见。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:55:39.080

我建议将其发送给[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)。这会将实际文件注销交给后台线程。但是，如果您使用的是诸如 log4j 之类的框架，您应该研究该库首先执行的缓冲或其他多线程处理。

# android - Android：将 RadioButton 渲染为普通按钮

> ID：13922647
> 
> 赞同：0
> 
> 时间：2012-12-17T21:40:36.150
> 
> 标签：android, android-layout, android-button

有没有办法创建一个由几个 RadioButtons 组成的 RadioGroup，这样每个 RadioButton 的外观就像一个普通的 Button 而不是默认外观（一些文本旁边的选中圆圈）？

在侦听器中处理按钮按下时，是否有必要退回到按钮的线性布局并手动更改按钮的背景？

**编辑**：具体来说，假设我们有两个 RadioButton，foo 和 bar。当按下一个时，字符串以粗体显示。通常在每个 RadioButton 旁边的小圆圈被省略。是否需要手动更改黑体字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:47:05.163

您始终可以为您的单选按钮设置自定义外观，例如添加 android:background=@drawable... 然后为选中和未选中状态设置自定义图像。

# c# - StructureMap 覆盖默认 Logger 实例

> ID：13922648
> 
> 赞同：0
> 
> 时间：2012-12-17T21:40:38.437
> 
> 标签：c#, components, structuremap

我有 2 个项目

1.  **应用程序**（WindosForms 仅用作启动组件的 UI）

2.  **成分**

组件具有我通过 StructureMap (Registry) 注入的所有接口和默认实现。在这个项目中，我介绍了一个日志接口和所有类（Log2Cnsole）的默认实现，并在 StructureMap 中注册。

我需要的是，如果有人想使用他自己的 UI 应用程序并删除默认的应用程序，我希望组件 DLL 的用户可以用他的默认 Log2Console 覆盖，只有在他实现他的情况下（例如 LogToDB 覆盖 Log2Console，如果他在他的实现接口自己的项目并通过 StructureMap 注册）。

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:18:07.680

The way to do this is offer a default constructor that calls another constructor with a specific implementation:

```
public interface ILogger
{
   void Log(string text);
}

public class ConsoleLogger
{
   public void Log(string text) { Console.WriteLine(text); }
}

public class TraceWriter
{
   private ILogger log;

   // Default behaviour
   public TraceWriter () : 
     this(new ConsoleLogger()) { }

   // User specified implementation
   public TraceWriter ( ILogger logger )
   {
      this.log = logger;
   }
} 
```

# sinatra - 使用 MongoID 嵌套 AND 和 OR 操作

> ID：13922651
> 
> 赞同：0
> 
> 时间：2012-12-17T21:40:49.450
> 
> 标签：sinatra, mongoid, mongoid3

我试图弄清楚如何使用 MongoID 嵌套 AND 和 OR 操作，就像这样（取自我曾经与 MongoMapper 一起使用的东西）：

```
{
:$and=> [
    {
        :$or => [
            {"name"=> "joe"}, {"name" => "randy" }
    {
        :$or=> [
            {"something" => "else" }, {"another" => "thing" }
        ]
    }
]
} 
```

我不太熟悉联合和交叉的工作方式，但更重要的是其中的每个孩子`AND`都是可选的/不保证的。换句话说，其中的每个查询`AND`都是程序化的，可能有 2 个要检查的项目、1 个项目等。

我想过做这样的事情：

```
Model.or({ :name => "...." }).union.or( :something => "...." }) 
```

但是，唯一的问题是我不确定基于用户输入构建查询的最佳实践。我有一个基于 sinatra 的应用程序，它充当连接到我的 MongoID 模型的用户的 API 点，我希望用户能够通过 API 构建这样的查询（也许并不复杂）。

由于各种原因，我从 MongoMapper 迁移到 MongoID，但是使用 MongoMapper，这些查询稍微简单一些，因为方法中支持所有内容，例如嵌套`and`和`or`运算符`where`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:15:56.833

事实证明，MongoID（好吧，更具体地说是 Origin::Query）在其许多 DSL 函数中支持 Mongo 选择器语法，如下所示：

```
Model.where(   { "name" => { "$or" => [ "betsy", "charles" ] }   ) 
```

所以从我上面的例子中收集，你可以这样做：

```
Model.all_of(    [
    {
        "$or" => [
            {"name"=> "joe"}, {"name" => "randy" }
    },
    {
        "$or" => [
            {"something" => "else" }, {"another" => "thing" }
        ]
    }
] 
```

# java - 如何按照 Hibernate 教程中的说明启动 HSQLDB 服务器？

> ID：13922652
> 
> 赞同：6
> 
> 时间：2012-12-17T21:40:58.957
> 
> 标签：java, hibernate, maven, hsqldb

尝试按照[本 Hibernate 教程](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/tutorial.html#tutorial-firstapp-configuration)中的步骤 #4 进行操作：

```
mvn exec:java -Dexec.mainClass="org.hsqldb.Server" -Dexec.args="-database.0 file:target/data/tutorial" 
```

我收到此错误：

```
[INFO] Scanning for projects...
[INFO] Searching repository for plugin with prefix: 'exec'.
[INFO] ------------------------------------------------------------------------
[INFO] Building First Hibernate Tutorial
[INFO]    task-segment: [exec:java]
[INFO] ------------------------------------------------------------------------
[INFO] Preparing exec:java
[INFO] No goals needed for project - skipping
[INFO] [exec:java {execution: default-cli}]
[WARNING]
java.lang.ClassNotFoundException: org.hsqldb.Server
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        at org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:285)
        at java.lang.Thread.run(Thread.java:662)
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] An exception occured while executing the Java class. org.hsqldb.Server

[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch
[INFO] ------------------------------------------------------------------------
[INFO] Total time: < 1 second
[INFO] Finished at: Mon Dec 17 16:35:42 EST 2012
[INFO] Final Memory: 6M/15M
[INFO] ------------------------------------------------------------------------ 
```

尽管下载了最新的 hsqldb 包并按照[FAQ](http://hsqldb.org/web/hsqlFAQ.html)安装了它。该`hsqldb.jar`文件位于`C:\hsqldb-2.2.9\hsqldb-2.2.9\hsqldb\lib`并且类路径 env var 指向它：

```
CLASSPATH=C:\hsqldb-2.2.9\hsqldb-2.2.9\hsqldb\lib 
```

那么为什么我会收到这个**ClassNotFoundException: org.hsqldb.Server**错误？

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-17T23:08:54.383

首先，您的 CLASSPATH 通常不适用于任何 jar。必须指定 jar 名称，例如：

```
CLASSPATH=C:\hsqldb-2.2.9\hsqldb-2.2.9\hsqldb\lib\hsqldb.jar 
```

其次，本教程不需要 CLASSPATH，因为它是一个 Maven 项目。您应该将相关依赖项添加到您提到的教程的第 1.1.1 节中描述的 pom.xml 文件中。只需将此块添加到选项卡内 pom.xml 中列出的块中：

```
<dependency>
    <groupId>org.hsqldb</groupId>
    <artifactId>hsqldb</artifactId>
    <version>2.2.9</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T22:32:50.657

根据[http://docs.oracle.com/javase/7/docs/technotes/tools/windows/classpath.html](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/classpath.html)，您需要指定以 .jar 结尾的整个路径。如果有多个 jar 文件，可以尝试指定 C:\path\to\hibernate*.jar

如果只指定目录，则只加载 *.class 文件。

其他可能性是您设置的 CLASSPATH 变量仅对 shell 会话有效，而不是全局 - 因此 maven 命令没有读取它。尝试通过 Windows 系统设置进行设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T21:52:58.600

我建议从[http://sourceforge.net/projects/hibernate/files/hibernate3/3.3.2.GA/](http://sourceforge.net/projects/hibernate/files/hibernate3/3.3.2.GA/)下载新的教程副本并尝试构建它。如果您缺少像 hsqldb 或 commons-logging 等依赖项，我通过添加 maven 项目存储库解决了这个问题 - [https://repository.jboss.org/nexus/content/repositories/thirdparty-releases](https://repository.jboss.org/nexus/content/repositories/thirdparty-releases)。下载完所有工件后，我就可以运行 HSQLDB 服务器了。建议将您当前的项目与新下载的项目进行比较。它应该可以解决您的问题。

# ios - ios中的nimbus框架nipagingscrollview

> ID：13922653
> 
> 赞同：0
> 
> 时间：2012-12-17T21:41:02.313
> 
> 标签：ios, uiscrollview, nimbus-ios

我在我的应用程序中使用 nimbus 框架来滚动查看图片。我知道他们在选项中有一个图片滚动视图，但它不适合我。nipagingscrollview 完美运行。唯一的问题是我无法通过捏合来放大我的图片。根据苹果的参考资料，处理捏缩放所需要做的就是采用 scrollviewdelegate 并在

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView 
```

我的问题是我无法返回图像视图属性，因为我正在使用自定义视图，该视图采用 nipagingscrollview 滚动视图中的每个视图，当我尝试

```
self.pagingscrollview.centerpageview 
```

它说 pagingscroll 视图没有图像视图属性，这是真的，因为他没有认识到这是我的自定义视图。

你的意见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T00:57:46.950

你可以这样做：`YourCustomImageView *imageView = (YourCustomImageView *)self.pagingscrollview.centerpageview`得到你的看法。

# javascript - 是否可以将 C 代码编译为 Javascript 代码？

> ID：13922655
> 
> 赞同：2
> 
> 时间：2012-12-17T21:41:04.910
> 
> 标签：javascript, c, code-translation

我找到了一个名为 emscripten 的编程工具，它可以使用 LLVM 将 c++ 代码编译为 Javascript 代码。是否可以使用 Emscripten（或类似工具）将 C 编译为 Javascript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:53:19.880

Emscripten 对 C++ 一无所知。它在 LLVM IR 上运行，并且不太关心代码是如何创建的。您可以将包括 C++ 在内的任何东西（具有发射 LLVM-IR 的编译器）编译到 LLVM IR 并将其传递给 Emscripten。

请注意，结果极不可能类似于人工编写的 JavaScript，并且不适合维护和进一步开发。它也有一些固有的[限制](https://github.com/kripken/emscripten/wiki/CodeGuidlinesAndLimitations)——JavaScript 不是机器代码，即使是，它也不一定与某些低级代码的假设兼容。

# javascript - Javascript - 暂停执行直到标志变为真

> ID：13922656
> 
> 赞同：0
> 
> 时间：2012-12-17T21:41:09.223
> 
> 标签：javascript, jquery, synchronization, sync, wait

如何在标志变为真之前暂停 javascript 执行？

例如，我有这样的 xml 消息：

```
[...]
<action>
    <resource update>id</resourceupdate>
</action>
<action>
    <event>id1</event>
</action>
<action>
    <event>id2</event>
</action>
<action>
    <event>id3</event>
</action>
[...] 
```

我希望仅在处理节点资源更新之后才处理事件节点（这需要更多时间来提供服务，因为它需要加载页面）：

在javascript中使用迭代器（每个）处理此消息，我尝试过：

```
$(_response).find('ACTION').each(function() {       
if (tagName=="RESOURCEUPDATE") {
    ready = false;
    //load the resource with selected id in an iframe
} else if (tagName=="EVENT") {
    browserLoaded();   //the waiting function
    eventhandler();  //consume the event
}
}); 
```

等待函数是：

```
function browserLoaded() {
if (!ready) {
    setTimeout(browserLoaded(),1000);
}
} 
```

并且当 iframe 加载时 ready var 变为 true：

```
$(iframe).load(function() {
    ready = true;
}); 
```

但是当执行时我会发现这个错误：

```
 Maximum call stack size exceeded error 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:50:24.087

问题出在这个函数中，它会调用自身直到堆栈已满：

```
function browserLoaded() {
  if (!ready) {
    //here you call browserLoaded function instead of passing a reference to the function
    setTimeout(browserLoaded() ,1000);
  }
} 
```

您的函数应如下所示：

```
function browserLoaded() {
  if (!ready) {
    // note the missing "()"
    setTimeout(browserLoaded, 1000);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:52:32.457

这是一个糟糕的设计。您不需要“等待”超时机制。如果您通过 jQuery ajax 请求加载页面，请使用回调函数继续执行代码（您也许可以跟踪正在处理的“当前”项目并继续下一个）。如果您正在加载 iFrame，这也是糟糕的设计，您应该使用 jQuery ajax 方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T22:03:16.583

您可以做的一个快速破解就是设置一个轮询循环：使用 setInterval 每隔一段时间检查一次变量是否已设置，并使用 clearInterval 并在时间到时继续执行。

无论如何，做事都会很痛苦。本质上，在 Javascript 中运行后者的唯一方法是将其打包在一个函数中。完成此操作后，它会变得更容易，因为您可以传递该函数并在完成后让异步代码回调它。

例如，您的处理可能如下所示：

```
//this is a simple "semaphore" pattern:
var things_to_load_count = 1
var check_if_done(){
    things_to_load_count--;
    if(things_to_load_count <= 0){
        //code to do stuff after you finish loading
    }
};

$(_response).find('ACTION').each(function() {
    if (tagName=="RESOURCEUPDATE") {
        things_to_load_count++;
        run_code_to_load_stuff( check_if_done )
        //make sure that the run_code_to_load_stuff function
        //calls the callback you passed it once its done.
    } else if (tagName=="EVENT") {
        //process one of the normal nodes
    }
});

//this will run the remaining code if we loaded everything
//but will do nothing if we are still waiting.
check_if_done() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T22:12:09.780

使用某种标志确实是个坏主意。您必须使用延迟模式。像这样的东西：

```
var resources = [];
$(_response).find('ACTION').each(function() {
  var deferred = resources.length > 0 ? resources[resources.length - 1] : null;

  switch (tagName) {
    case "RESOURCEUPDATE":
      deferred = $.Deferred();

      //load the resource with selected id in an iframe
      $(iframe).bind('load', function () {
        deferred.resolve(/*specific arg1, arg2, arg3, ...*/)
      });
      resources.push(deferred);
      break;
    case "EVENT":       
      if (deferred) {
         deferred.done(function (/*specific arg1, arg2, arg3, ...*/) {
            // process event node
         });
      }
      break;
  }
});

// clean up deferreds objects when all them will be processed
$.when.apply($, resources).then(function() {
  resources.length = 0;
}) 
```

**PS**：[http ://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T22:21:33.580

您确定在 iframe 加载函数中设置为 true 的就绪变量与在调用另一个 settimeout 之前检查的变量相同。似乎 iframe 加载函数中的一个是局部变量，另一个是全局变量。

或者两个就绪变量都是本地的。

# html - 通过名称属性的目标框架

> ID：13922658
> 
> 赞同：0
> 
> 时间：2012-12-17T21:41:17.463
> 
> 标签：html, css, css-selectors, frameset

我正在开发一个使用 3 帧的旧应用程序。其中一个框架具有“名称”属性

我试图通过这样的css来定位它，但它不起作用。

HTML

```
<frame name="classFrame" src="test2_files/overview-summary.htm"></frame> 
```

CSS

```
 frame[name=classFrame] body{ font-family:"Courier New", Courier, monospace;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:30:53.497

您不能使用 CSS 选择器从框架集中定位框架的内容。

# ruby-on-rails - 使用什么类型的查询以及如何使用 - JOIN / UNION

> ID：13922664
> 
> 赞同：0
> 
> 时间：2012-12-17T21:41:43.283
> 
> 标签：ruby-on-rails, ruby, postgresql

我对 ruby​​ 很陌生，并且已经尝试过寻找这个但没有解决方案可以满足我的需求。

我有一个公司到工作的协会。所以一个公司有很多工作，每个工作都属于一个公司。

搜索工作后 - 我想查询保存到每个工作的关联公司 ID。

因此，在搜索例如“Ruby”的职位后 - 我想返回与该职位匹配的所有职位及其相关的公司数据。以下查询类型的唯一问题是工作 ID 被替换为公司 ID，我永远无法访问每个工作 ID

```
@jobs_list = Jobs.select("jobs.*, companies.*").where("title LIKE ?", "%#{params[:jobs][:title]}%").joins("LEFT JOIN companies on jobs.company_id = companies.id") 
```

有什么建议/更好的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:49:01.800

首先确保您的`Job`模型有一条线：`belongs_to :company`

然后使用`includes`急切加载公司数据：

```
@jobs = Jobs.where("title LIKE ?", "%#{params[:jobs][:title]}%").
             includes(:company) 
```

您现在可以像这样访问公司数据，而无需任何进一步的数据库查询：

```
@jobs.each do |job|
  job_name = job.name
  company_name = job.company.name
end 
```

# java - Java：将指定类型分配给泛型类型

> ID：13922671
> 
> 赞同：3
> 
> 时间：2012-12-17T21:42:07.180
> 
> 标签：java, generics, types

我试图理解以下代码。

```
class Test<E extends SubTest>
{
    List<Vector<E>> links;

    Test()
    {
        links = MyStaticClass.aList;
        // Where aList is static ArrayList<Vector<SubTest>>;
    }
} 
```

为什么将以下内容分配`ArrayList`给链接列表会出错。考虑到我用 SubTest 扩展了 E，所以它理解任务。

当我有一个参数 T t; 我可以访问 t 属性，但我不能做上述评估。链接不会`List<Vector<T>>`期望得到`ArrayList<Vector<SubTest>>`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T21:44:56.457

你误解了错误。

实际的问题是`E`不一样`SubTest`。

如果您创建`Test<SubSubTest>`( where `SubSubTest`inherits `SubTest`) 的实例，您的代码将尝试将`SubTest`s 的集合（可以保存任何派生类）放入类型变量`List<Vector<SubSubTest>>`（只能保存`SubSubTest`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:25:13.397

根据我的经验，在类的**定义**中，不能`E`在编译时使用类的实际名称代替泛型。尽管 E 是从 Subtest 派生的，但 E 是泛型类型，而 Subtest 是类。所以这个问题不是由 引起的`Subtest`，而是因为使用了一个**类**来代替**泛型类型**。

尽管这与您的问题没有直接关系，但它可能是有道理的：

```
//In a generic class, the compiler won't even allow you to instantiate 
//E with new

//If you try to do this:

 E obj1;
 obj1 = new E();  

 //You will see the compiler error that E is a type parameter and a CLASS 
 //has to be used with new, not a type parameter 
```

您正在尝试将实际对象： 放入仍然需要`MyStaticClass.aList`泛型类型的地方。`E`

每当我声明一个具有泛型类型的类时，我都无法使用实际的类名来代替声明为具有泛型类型的该类的成员。我总是不得不使用参数、变量、ETC。使用该类定义的通用名称 E。

* * *

`Test`根据我的经验，要分配给基于泛型 E的类的成员变量，您必须使用与**类****中的泛型 E 直接关联的变量`Test`**。甚至来自另一个泛型类的另一个“E”也不起作用：因为另一个泛型“E”与在 Test 类中定义为泛型的泛型不同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T22:28:59.707

试试这个：

```
 Test<SubTest> x = new Test<SubTest>();
    x.links = MyStaticClass.aList; 
```

你想用 实例化类型`E`参数`SubTest`。这是一个合理的期望。但问题是类型参数在使用关键字*调用构造函数时被实例化。*`new`您的错误是尝试在构造函数的主体中实例化它。在构造函数的主体中，您应该处理`E`它的本质：尚未实例化的参数。

稍后您可能希望`E`使用`EsotericSubSubTest`. 在构造函数中进行赋值，你会将一个类型的值赋给一个类型`ArrayList<Vector<SubTest>>`的字段，`List<Vector<EsotericSubSubTest>>`这绝对是错误的。

# spring - Spring 配置文件和我的属性文件的问题

> ID：13922673
> 
> 赞同：2
> 
> 时间：2012-12-17T21:42:12.297
> 
> 标签：spring, cloud-foundry, properties-file

我正在尝试**为一个 Spring 配置文件激活一组属性文件，为**另一个 Spring 配置文件激活另一组属性文件，如下所示：

```
<beans profile="cloud">
    <context:property-placeholder location="classpath*:META-INF/spring/cloud/*.properties" />
</beans>

<beans profile="default">
    <context:property-placeholder location="classpath*:META-INF/spring/default/*.properties" />
</beans> 
```

我的`src/main/resources`文件夹中有相应且适当的目录结构。

我的一项服务中有一个简单`@Value("${application.url}")`的，我系统地收到以下错误：

> 创建名为“mailerServiceImpl”的 bean 时出错：注入自动装配的依赖项失败；嵌套异常是 org.springframework.beans.factory.Be anCreationException：无法自动装配字段：私有 java.lang.String com.kadjoukor.service.MailerServiceImpl.websiteContext；嵌套异常是 java.lang.IllegalArgumentException：无法解析字符串值“${application.url}”中的占位符“application.url”

请注意，我已尝试将 a 添加`spring.profiles.active` `init-param`到我的 web.xml 中。它没有任何区别...

我不确定我做错了什么。任何人都可以提供建议吗？

**编辑 1**： 上述配置片段**位于配置文件的底部**是否重要？

**编辑 2**：这是我的输出`web.xml`：

```
<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="3.0" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" metadata-complete="true">
    <display-name>kadjoukor</display-name>
    <description>Roo generated kadjoukor application</description>
    <!-- Enable escaping of form submission contents -->
    <context-param>
        <param-name>defaultHtmlEscape</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>contextConfigLocation</param-name>

    <param-value>classpath*:META-INF/spring/applicationContext*.xml classpath:META-INF/cloud/cloudfoundry-auto-reconfiguration-context.xml</param-value></context-param>
    <filter>
        <filter-name>CharacterEncodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>
    <filter>
        <filter-name>HttpMethodFilter</filter-name>
        <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
    </filter>
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
    <filter>
        <filter-name>Spring OpenEntityManagerInViewFilter</filter-name>
        <filter-class>org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>CharacterEncodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>HttpMethodFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>Spring OpenEntityManagerInViewFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>
    <listener>
        <listener-class>
            org.springframework.security.web.session.HttpSessionEventPublisher
        </listener-class>
    </listener>
    <!-- Handles Spring requests -->
    <servlet>
        <servlet-name>kadjoukor</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>

        <param-value>WEB-INF/spring/webmvc-config.xml classpath:META-INF/cloud/cloudfoundry-auto-reconfiguration-context.xml</param-value></init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>kadjoukor</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>30</session-timeout><!-- TODO -->
    </session-config>
<context-param><param-name>contextInitializerClasses</param-name><param-value>org.cloudfoundry.reconfiguration.spring.CloudApplicationContextInitializer</param-value></context-param></web-app> 
```

这是`WEB-INF/libs`目录的内容：

```
activation-1.1.1.jar                     67.8K
antlr-2.7.6.jar                         433.0K
aopalliance-1.0.jar                       4.4K
asm-3.3.1.jar                            42.6K
aspectjrt-1.7.0.RC1.jar                 113.5K
aspectjweaver-1.7.0.RC1.jar               1.7M
auto-reconfiguration-0.6.5.jar          693.3K
cglib-2.2.2.jar                         280.5K
cglib-nodep-2.2.2.jar                   319.3K
commons-beanutils-1.8.3.jar             226.6K
commons-codec-1.5.jar                    71.4K
commons-collections-3.2.1.jar           561.9K
commons-dbcp-1.3.jar                    145.3K
commons-digester-2.1.jar                192.2K
commons-fileupload-1.2.2.jar             58.2K
commons-io-2.1.jar                      159.3K
commons-lang3-3.1.jar                   308.4K
commons-logging-1.0.4.jar                37.1K
commons-pool-1.5.6.jar                   98.1K
dom4j-1.6.1.jar                         306.5K
ehcache-core-2.6.0.jar                    1.3M
flexjson-2.1.jar                         79.2K
guava-11.0.2.jar                          1.6M
hamcrest-core-1.1.jar                    74.8K
hibernate-commons-annotations-3.2.0.Final.jar      69.6K
hibernate-core-3.6.9.Final.jar            3.0M
hibernate-entitymanager-3.6.9.Final.jar     416.3K
hibernate-jpa-2.0-api-1.0.1.Final.jar     100.3K
hibernate-validator-4.2.0.Final.jar     358.0K
httpclient-4.1.2.jar                    344.0K
httpcore-4.1.2.jar                      177.0K
imgscalr-lib-4.2.jar                     27.2K
jackson-core-asl-1.9.9.jar              226.7K
jackson-mapper-asl-1.9.9.jar            762.0K
java-xmlbuilder-0.4.jar                  18.1K
javassist-3.12.0.GA.jar                 618.5K
javassist-3.16.1-GA.jar                 643.9K
javax.inject-1.jar                        2.4K
jcl-over-slf4j-1.6.4.jar                 16.9K
jets3t-0.9.0.jar                        527.1K
jmimemagic-0.1.2.jar                     44.5K
joda-time-2.1.jar                       557.1K
jsr305-1.3.9.jar                         32.2K
jstl-api-1.2.jar                         29.8K
jstl-impl-1.2.jar                       382.8K
jta-1.1.jar                              14.7K
junit-dep-4.8.2.jar                     213.2K
log4j-1.2.16.jar                        470.2K
mail-1.4.3.jar                          451.3K
mysema-commons-lang-0.2.4.jar            11.8K
mysql-connector-java-5.1.18.jar         771.4K
ognl-3.0.5.jar                          222.5K
oro-2.0.8.jar                            63.7K
prettytime-1.0.8.Final.jar               65.4K
querydsl-core-2.9.0.jar                 367.3K
querydsl-jpa-2.9.0.jar                   93.3K
slf4j-api-1.6.4.jar                      25.4K
slf4j-log4j12-1.6.4.jar                   9.5K
spring-aop-3.2.0.RELEASE.jar            327.0K
spring-aspects-3.2.0.RELEASE.jar         68.2K
spring-beans-3.2.0.RELEASE.jar          590.6K
spring-context-3.2.0.RELEASE.jar        834.0K
spring-context-support-3.2.0.RELEASE.jar     124.1K
spring-core-3.2.0.RELEASE.jar           842.8K
spring-data-commons-core-1.3.0.RELEASE.jar     215.0K
spring-data-jpa-1.1.0.RELEASE.jar       129.8K
spring-expression-3.2.0.RELEASE.jar     189.2K
spring-jdbc-3.2.0.RELEASE.jar           391.6K
spring-js-resources-2.2.1.RELEASE.jar       4.3M
spring-orm-3.2.0.RELEASE.jar            383.0K
spring-security-acl-3.1.2.RELEASE.jar      77.7K
spring-security-config-3.1.2.RELEASE.jar     198.9K
spring-security-core-3.1.2.RELEASE.jar     332.1K
spring-security-taglibs-3.1.2.RELEASE.jar      20.3K
spring-security-web-3.1.2.RELEASE.jar     245.2K
spring-social-core-1.0.2.RELEASE.jar     113.7K
spring-social-facebook-1.0.2.RELEASE.jar     117.2K
spring-social-web-1.0.2.RELEASE.jar      18.0K
spring-tx-3.2.0.RELEASE.jar             235.3K
spring-web-3.2.0.RELEASE.jar            609.7K
spring-webmvc-3.2.0.RELEASE.jar         621.0K
thymeleaf-2.0.14.jar                    677.9K
thymeleaf-extras-tiles2-1.0.0-beta3-SNAPSHOT.jar      46.7K
thymeleaf-spring3-2.0.14.jar            161.9K
tiles-api-2.2.2.jar                      35.1K
tiles-core-2.2.2.jar                    157.2K
tiles-jsp-2.2.2.jar                      49.6K
tiles-servlet-2.2.2.jar                  58.3K
tiles-template-2.2.2.jar                 23.9K
validation-api-1.0.0.GA.jar              46.3K
xercesImpl-2.7.1.jar                      1.1M
xml-apis-1.0.b2.jar                     106.8K
xmlParserAPIs-2.0.2.jar                  76.6K 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:46:57.263

基于[https://cloudfoundry.atlassian.net/browse/CF-132](https://cloudfoundry.atlassian.net/browse/CF-132)错误，为了让云配置文件正常工作，您需要一个 ContextLoaderInitializer。因此，我建议您创建一个上下文文件，如果必须，甚至将其留空，以使云配置文件正常工作。

# ruby-on-rails - 如何在不需要所述条件的情况下根据多个搜索条件搜索表格？

> ID：13922674
> 
> 赞同：0
> 
> 时间：2012-12-17T21:42:14.003
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我创建了一个包含产品手册的表格。我想让用户根据三个下拉菜单（产品类型、运营商、概念）搜索表格。我已经创建了菜单，并且控制器当前正确地通过了参数。如果用户按所有 3 个条件进行搜索，则搜索显示正确。但是，如果用户只选择一两个搜索选项，则结果总是什么都没有。我理解为什么会发生这种情况（模型试图通过所有三个条件进行搜索，当缺少一个时，它只是在该字段中搜索 nil ），但是我确定正确的解决方案。请帮忙！我的模型在下面...谢谢

```
def self.search (search_product_type, search_carrier, search_concept)

  if search_product_type.blank? && search_carrier.blank? && search_concept.blank?
    scoped
  else
    Ad.where(carrier_id: search_carrier)
      .where(product_type_id: search_product_type)
      .where(concept: search_concept)
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:06:52.630

正如@Deefour 在评论中所说，您应该使用宝石。但是，你也可以做这样的事情：

```
def self.search (search_product_type, search_carrier, search_concept)

  if search_product_type.blank? && search_carrier.blank? && search_concept.blank?
    scoped
  else
    tmp = {}

    if search_carrier.present?
       tmp[:carrier_id] = search_carrier
    end

    if search_product_type.present?
       tmp[:product_type_id] = search_product_type
    end

    if search_carrier.present?
       tmp[:concept] = search_concept
    end

    Ad.where(tmp)
  end
end 
```

# powershell - 在 PowerShell 中使用 GC 正则表达式二进制文件

> ID：13922677
> 
> 赞同：1
> 
> 时间：2012-12-17T21:42:20.417
> 
> 标签：powershell

问题：什么 PowerShell 正则表达式模式会返回类似 Bash 的字符串命令的输出？

我发现了一篇关于 gc 和 Select-String 的文章：第 137 集：Free-base64-ing。[http://blog.commandlinekungfu.com/2011/03/episode-137-free-base64-ing.html](http://blog.commandlinekungfu.com/2011/03/episode-137-free-base64-ing.html)

我从上一个问题中尝试了许多正则表达式模式：Regular Expression for alphanumeric and underscores。[字母数字和下划线的正则表达式](https://stackoverflow.com/questions/336210/regular-expression-for-alphanumeric-and-underscores)

如果我在 Bash 中运行：strings --all myfile.bin 结果：52939 行字符串。

gc .\myfile.bin | Select-String -AllMatches "^[a-zA-Z0-9_]*$" 结果：多个空行。

gc .\myfile.bin | Select-String -AllMatches "^\w*$" 结果：9 行字符和多个空行。

gc .\myfile.bin | Select-String -AllMatches "^\w*$" 结果：9 行字符。

gc .\myfile.bin | Select-String -AllMatches "[A-Za-z0-9_]" 结果：几乎是整个文件，不可打印的字符等等。

gc .\myfile.bin | Select-String -AllMatches "^[\p{L} \p{Nd}_]+$" 结果：20 行字符。

那么我缺少的正则表达式技巧是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:57:49.907

您错过了二进制文件不像文本文件那样由“行”组成。因此`^`，`$`在这里对你没有任何好处。

虽然可以说不是最优雅的解决方案，但这样的事情可能会：

```
cat .\myfile.bin `
  | % { $_ -replace '[^\w\d ]', "`n" } `
  | % { $_.Split("`n") } `
  | ? { $_ -match '.{3,}' } `
  | % { $_.Trim() } 
```

或者，您可以使用 Sysinternals 的[字符串](http://technet.microsoft.com/en-us/sysinternals/bb897439)实用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:27:36.253

如前所述，缺少换行符将阻止 RegEx 工作。Microsoft Sysinternals 的字符串实用程序是一个很好的解决方案。

如果您需要本机 PowerShell 解决方案，请联系我。我用 C# 编写了一个 Get-Strings cmdlet，它从二进制文件中提取 ASCII (UTF8) 和 Unicode (UTF16) 字符串。它不如 Sysinternals 快，但确实具有将输出放入 PowerShell 管道的优势。

# ssrs-2008 - SSRS - 使用不带“first”或“sum”的不同数据集字段的表达式

> ID：13922678
> 
> 赞同：1
> 
> 时间：2012-12-17T21:42:22.070
> 
> 标签：ssrs-2008, reporting-services, reportingservices-2005

我有一个包含三个数据集的 ssrs 报告。我想填充一个显示 =(Fields!Total_Hrs.Value, "Dataset3") 的列，没有“SUM(Total_Hrs)”，当我单击“类别”下的“数据集”时显示为选项。

使用 =(Fields!Total_Hrs.Value, "Dataset3") 的问题是我收到一条错误消息，指出“报表项表达式只能引用当前数据集范围内的字段，或者，如果在聚合内，指定的数据集范围。”

有人知道导致错误的原因吗？有没有办法让表达式窗口将我的字段显示为 DataSet3？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:00:56.920

问题是 SSRS 应该如何知道您想要从哪一行`Dataset3`？所以你有两个选择：

选项 1：如果您想要每人的总小时数，请将主数据集中的总小时数作为嵌套查询计算包括在内，如下所示：

```
SELECT Person, Hours, TotalHours
FROM Time
INNER JOIN (
    SELECT Person, SUM(Hours) AS TotalHours 
    FROM Time 
    GROUP BY Person
) TotalTime ON Time.Person = TotalTime.Person 
```

选项 2：如果它是一个真正的总计，只需`Dataset3`返回一行并对此使用聚合：

```
SELECT SUM(Hours) AS TotalHours
FROM Time 
```

并在您的表达式中使用它与聚合：

```
=SUM(Fields!TotalHours, "Dataset3") 
```

# iphone - 使用证书签署申请

> ID：13922679
> 
> 赞同：-1
> 
> 时间：2012-12-17T21:42:22.600
> 
> 标签：iphone, xcode

如何使用分发证书签署我的申请？我确实在配置门户上制作了分发证书，但现在当我尝试使用应用程序加载器上传压缩的应用程序文件时，它说它没有使用证书签名。

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:19:53.683

1.  Download the certificate from the provisioning portal, and double click it. This will "install" it on your Mac.

2.  Edit your project schema and select "Release" as it's build configuration.

3.  Under project settings select the "Build Settings" tab. Edit the "Code Signing Identity" for "release" to ensure that it's referencing the correct certificate.

If pictures help with that process, [this link](http://www.idev101.com/code/Distribution/build.html) looks like it might be helpful.

# c# - 在 C# 中，如何在显示之前获取网站的 HTML 内容？

> ID：13922681
> 
> 赞同：0
> 
> 时间：2012-12-17T21:42:24.903
> 
> 标签：c#, html, browser, web

我有一个 C# 中的网络浏览器项目，我正在考虑这样的系统；当用户编写网址然后单击“开始”按钮时，我的浏览器会获取书面网站的内容（**它不应该访问该页面，我的意思是它不应该显示任何内容**），然后我想寻找一个特定的“关键字”前任; “暴力”，如果存在，我可以将该浏览器导航到有警告的本地页面。不久，在 C# 中，如何**在访问之前**获取网站的内容？...

对不起我的英语，提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T21:46:17.420

[System.Net.WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)：

```
string url = "http://www.google.com";
System.Net.WebClient wc = new System.Net.WebClient();
string html = wc.DownloadString(url); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:45:56.537

您必须使用 WebRequest 和 WebResponse 来加载站点：

例子：

```
string GetPageSource (string url)
{
HttpWebRequest webrequest = (HttpWebRequest)WebRequest.Create(url);
webrequest.Method = "GET";
HttpWebResponse webResponse = (HttpWebResponse)webrequest.GetResponse();
string responseHtml;
using (StreamReader responseStream = new StreamReader(webResponse.GetResponseStream()))
{
    responseHtml = responseStream.ReadToEnd().Trim();
}

return responseHtml;
} 
```

之后，您可以检查一些关键字的 responseHtml ......例如使用 RegEx。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T21:49:05.457

您可以发出 HTTP 请求（通过[HttpClient](http://msdn.microsoft.com/en-us/library/windows/apps/system.net.http.httpclient.aspx)到站点）并解析结果以查找各种关键字。然后，您可以决定是否在此处明显地“导航”用户。

开发中心上有一个[HTTP 客户端示例可能会有所帮助。](http://code.msdn.microsoft.com/windowsapps/HttpClient-sample-55700664)

# java - 从 Java App 访问 C++ 内存

> ID：13922688
> 
> 赞同：4
> 
> 时间：2012-12-17T21:43:00.893
> 
> 标签：java, memory-management, java-native-interface

我有调用一些 java 功能的 C++ 应用程序。我正在使用 JNI。一切正常，但仍然存在一个小问题。在 C++ 应用程序中，我有一些巨大的数组。Java App 也需要这些数据并返回一大堆结果。目前我只是复制数据（您可以在下面检查一些和平的代码）。如果我直接通过指针从 Java App 访问这些数组会更好。是否可以？我假设不是（因为 JVM），但在这种情况下，我必须向我的老板详细解释 :) 那么，是或否，以及如何或为什么？

```
jdoubleArray in2 = env->NewDoubleArray(1000);
jdouble *elems2 = (jdouble*)calloc(1000, sizeof(jdouble));
for(int i = 0; i < 1000; i++)
{
    elems2[i] = (jdouble)inputArray[i];
}
env->SetDoubleArrayRegion(in2, 0, 1000, elems2);
if(midCD != NULL)
{
    jdouble res1 = env->CallStaticDoubleMethod(cls, midCD, in2);
    double res1c = res1;
    printf("C++.Res1: %f\n", res1c);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T00:41:15.610

为此，Java 1.4 中引入了Direct [ByteBuffers 。](http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/ByteBuffer.html)除了 Java 端的新类之外，还有[相应的 JNI 函数](http://docs.oracle.com/javase/1.4.2/docs/guide/jni/jni-14.html#NewDirectByteBuffer)。您可以将本机数组包装在 ByteBuffer（以及相应的 IntBuffer 等视图）中，并在不复制的情况下进行读写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T23:43:47.920

您能做的最好的事情是使用[Get<PrimitiveType>ArrayElements 例程](http://docs.oracle.com/javase/1.4.2/docs/guide/jni/spec/functions.html#wp17382)。希望VM支持[固定](http://docs.oracle.com/javase/1.4.2/docs/guide/jni/spec/design.html#wp1265)：

```
jdoubleArray in2 = env->NewDoubleArray(1000);
jboolean isCopy;
jdouble *elems2 = env->GetDoubleArrayElements(in2, &isCopy);
for(int i = 0; i < 1000; i++)
{
    elems2[i] = (jdouble)inputArray[i];
}
env->ReleaseDoubleArrayElements(in2, elems2, 0);
elems2 = NULL; 
```

如果`isCopy`是`JNI_FALSE`在调用 GetDoubleArrayElements() 之后，则没有复制。

**编辑：**重新阅读您的问题后，您可能需要考虑实施[Archie 的想法](https://stackoverflow.com/questions/13922688/access-c-memory-from-java-app/13924150#comment19193415_13922688)。这取决于您的 Java 方法如何使用数据。如果 Java 方法不使用整个数组，或者不是一次全部使用，那么 Archie 使用本地访问器创建 C++ 数组的 Java 类包装器的解决方案可能是一个很好的解决方案。但是，如果 Java 方法需要所有数据，那么您可能只需要 GetDoubleArrayElements() 提供的将数据输入 VM 的最快方法。

如果您对 C++ 数组的某些元素进行更改并希望对 Java 副本进行相同的更改，那么[SetDoubleArrayRegion()](http://docs.oracle.com/javase/1.4.2/docs/guide/jni/spec/functions.html#wp22933)就可以发挥作用了。

**EDIT2：**我相信 Archie 指的是：

```
public class NativeDoubleArrayProxy {

    // This is the native `inputArray' pointer.
    private long p;

    private int length;

    private NativeDoubleArrayProxy(long p, int length) {
        this.p = p;
        this.length = length;
    }

    public int length() {
        return length;
    }

    public native double getDouble(int index);

    public native void getDoubles(int startingIndex, double[] out, int outOffset, int length);
} 
```

确切的细节取决于你的类型`inputArray`（它是一个原始的 C 样式数组，还是一个`std::vector<double>`，其他的东西？）。但想法是`NativeDoubleArrayProxy`在 JNI 端构造一个对象，将指针转换为 a 传递给它`jlong`。getDouble() 和 getDoubles() 的 JNI 实现实现了从 C++ 到 Java 代码的复制。

当然，您需要非常小心以确保指针保持有效。

另请参阅：[在 Java 对象中存储本机指针的“正确”方法是什么？](https://stackoverflow.com/q/337268/196844)

# c# - 当 .FirstOrDefault 返回 null 时，是否有更紧凑的方法可以在 LINQ 中选择元素属性 - 而不会引发异常？

> ID：13922692
> 
> 赞同：1
> 
> 时间：2012-12-17T21:43:17.133
> 
> 标签：c#, linq

这就是我所拥有的。它将返回具有非空/空文本值的第一个单元格 - 来自除第一个之外的任何行。如果不满足这些条件，它将返回一个空集。有没有一种更紧凑的方法，不需要第二组 where/select 子句？

（哦，这是使用 WatiN Table 元素...）

```
this.Lessors = lessorTable.OwnTableRows
            .Where(row => row.Index > 0)
            .Select(row => row.TableCells
                .FirstOrDefault(cell => 
                    !string.IsNullOrEmpty(cell.Text) && cell.Text.Trim() != string.Empty))
            .Where(cell => cell != null)
            .Select(cell => cell.Text)
            .ToList(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T22:06:04.023

引入新的范围变量和`String.IsNullOrWhiteSpace`方法的使用可以使您的查询更加紧凑：

```
Lessors = from row in lessorTable.OwnTableRows
          let cell = row.TableCells
                        .FirstOrDefault(c => !String.IsNullOrWhiteSpace(c.Text))
          where row.Index > 0 && cell != null
          select cell.Text; 
```

# vector - 向量说明

> ID：13922694
> 
> 赞同：1
> 
> 时间：2012-12-17T21:43:30.203
> 
> 标签：vector, frustum, culling

我一直在关注[这篇](http://www.lighthouse3d.com/tutorials/view-frustum-culling/geometric-approach-extracting-the-planes/)关于平截头体剔除的文章，我需要一些帮助来理解它背后的向量数学。更具体地说，他所说的“向上”和“正确”的向量是什么？他们持有什么价值观？很抱歉这个简短而令人兴奋的问题，但我真的坚持这一点。任何帮助表示赞赏！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:48:58.093

来自文章：

> 需要更多的单位向量，即上向量和右向量。前者是通过对向量进行归一化得到的`(ux,uy,uz)`（这个向量的分量是`gluLookAt`函数的最后一个参数）；后者是通过向上向量和`d`向量之间的叉积获得的。

*   `up`等于`(ux, uy, uz) / ||(ux, uy, uz)||`，它只是一个与 指向相同方向的单位向量`(ux, uy, uz)`。

    它等于`(ux / sqrt(ux^2 + uy^2 + uz^2), uy / sqrt(ux^2 + uy^2 + uz^2), uz / sqrt(ux^2 + uy^2 + uz^2))`

*   `right`等于`up x d`。我真的不想扩展它。

# java - jsch 并运行“sudo su -”

> ID：13922698
> 
> 赞同：4
> 
> 时间：2012-12-17T21:43:56.217
> 
> 标签：java, sudo, jsch

使用 jsch

当我运行以下 cmd 'sudo su -' 程序挂起

```
[TestNG] Running:
C:\Users\brian.crosby\AppData\Local\Temp\testng-eclipse-952620154\testng-customsuite.xml
[root@tbx2-toy-1 ~]# 
```

看起来“sudo su -”起作用了，因为输出状态为“[root@tbx2-toy-1 ~]#”，但是当我发送另一个 cmd 时它没有响应。

继承人的代码：

```
package com.linux;

import java.io.InputStream;
import org.testng.annotations.*;
import com.jcraft.jsch.*;
import com.thoughtworks.selenium.*;

public class LinuxConnection extends SeleneseTestBase{

    String host = null;
    private StringBuilder strFileData;
    String randomFileName = null;

    public String getFileData() {
        return strFileData.toString();
    }
    public String getRandomFileName() {
        return randomFileName;
    }

    public LinuxConnection() {
        strFileData = new StringBuilder();
    }

    @Test
    public void createUpdateTBX2FileData(String command)throws Exception {

        try {
            JSch jsch = new JSch();
            host = "brian-crosby@************.net"; 

            String user = host.substring(0, host.indexOf('@'));
            host = host.substring(host.indexOf('@') + 1);

            Session session = jsch.getSession(user, host, 22);

            UserInfo ui = new MyUserInfo();
            session.setUserInfo(ui);
            session.connect();

            ChannelExec channel = (ChannelExec)session.openChannel("exec");
            ((ChannelExec)channel).setPty(true);
            ((ChannelExec) channel).setCommand(command);

            ((ChannelExec) channel).setErrStream(System.err);

            InputStream in = channel.getInputStream();
            channel.connect();

            byte[] tmp = new byte[2048];

            while (in.read(tmp, 0, 2048) > 0) {
                String str = new String(tmp);
                strFileData.append(str);
                System.out.println(strFileData);
            }
            in.close();
            channel.disconnect();
            session.disconnect();
        } catch (Exception e) {
            System.out.println(e);
        }
    }

    public static class MyUserInfo implements UserInfo {

        public String getPassword() {
            return "********";
        }

        public boolean promptYesNo(String str) {
            str = "Yes";
            return true;
        }

        String passwd;

        public String getPassphrase() {
            return null;
        }

        public boolean promptPassphrase(String message) {
            return true;
        }

        public boolean promptPassword(String message) {
            passwd = "*******"; 
            return true;
        }

        public void showMessage(String message) {

        }
    }

} 
```

这是我发送 cmds 的地方：

```
package com.linux;

import org.testng.annotations.*;

public class testLinuxConnection {

    @Test
    public void testLinux() throws Exception{
        LinuxConnection obj = new LinuxConnection();
        String command = "touch tester1.txt; sudo su -; rm tester1.txt;";
        obj.createUpdateTBX2FileData(command);  
    }
} 
```

我再次在谷歌上花了几个小时试图找到解决方案但没有成功

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:20:22.600

您的代码缺少运行所需的其余代码。您需要从已初始化的会话对象中初始化所需的通道类型。由于您需要能够一个接一个地运行多个命令，因此您需要一个`Shell`类型通道：

您应该查看`JSch`的示例（即 Shell.java），这里供您快速参考：

```
/* -*-mode:java; c-basic-offset:2; indent-tabs-mode:nil -*- */
/**
 * This program enables you to connect to sshd server and get the shell prompt.
 *   $ CLASSPATH=.:../build javac Shell.java 
 *   $ CLASSPATH=.:../build java Shell
 * You will be asked username, hostname and passwd. 
 * If everything works fine, you will get the shell prompt. Output will
 * be ugly because of lacks of terminal-emulation, but you can issue commands.
 *
 */
import com.jcraft.jsch.*;
import java.awt.*;
import javax.swing.*;

public class Shell{
  public static void main(String[] arg){

    try{
      JSch jsch=new JSch();

      //jsch.setKnownHosts("/home/foo/.ssh/known_hosts");

      String host=null;
      if(arg.length>0){
        host=arg[0];
      }
      else{
        host=JOptionPane.showInputDialog("Enter username@hostname",
                                         System.getProperty("user.name")+
                                         "@localhost"); 
      }
      String user=host.substring(0, host.indexOf('@'));
      host=host.substring(host.indexOf('@')+1);

      Session session=jsch.getSession(user, host, 22);

      String passwd = JOptionPane.showInputDialog("Enter password");
      session.setPassword(passwd);

      UserInfo ui = new MyUserInfo(){
        public void showMessage(String message){
          JOptionPane.showMessageDialog(null, message);
        }
        public boolean promptYesNo(String message){
          Object[] options={ "yes", "no" };
          int foo=JOptionPane.showOptionDialog(null, 
                                               message,
                                               "Warning", 
                                               JOptionPane.DEFAULT_OPTION, 
                                               JOptionPane.WARNING_MESSAGE,
                                               null, options, options[0]);
          return foo==0;
        }

        // If password is not given before the invocation of Session#connect(),
        // implement also following methods,
        //   * UserInfo#getPassword(),
        //   * UserInfo#promptPassword(String message) and
        //   * UIKeyboardInteractive#promptKeyboardInteractive()

      };

      session.setUserInfo(ui);

      // It must not be recommended, but if you want to skip host-key check,
      // invoke following,
      // session.setConfig("StrictHostKeyChecking", "no");

      //session.connect();
      session.connect(30000);   // making a connection with timeout.

      Channel channel=session.openChannel("shell");

      // Enable agent-forwarding.
      //((ChannelShell)channel).setAgentForwarding(true);

      channel.setInputStream(System.in);
      /*
      // a hack for MS-DOS prompt on Windows.
      channel.setInputStream(new FilterInputStream(System.in){
          public int read(byte[] b, int off, int len)throws IOException{
            return in.read(b, off, (len>1024?1024:len));
          }
        });
       */

      channel.setOutputStream(System.out);

      /*
      // Choose the pty-type "vt102".
      ((ChannelShell)channel).setPtyType("vt102");
      */

      /*
      // Set environment variable "LANG" as "ja_JP.eucJP".
      ((ChannelShell)channel).setEnv("LANG", "ja_JP.eucJP");
      */

      //channel.connect();
      channel.connect(3*1000);
    }
    catch(Exception e){
      System.out.println(e);
    }
  }

  public static abstract class MyUserInfo
                          implements UserInfo, UIKeyboardInteractive{
    public String getPassword(){ return null; }
    public boolean promptYesNo(String str){ return false; }
    public String getPassphrase(){ return null; }
    public boolean promptPassphrase(String message){ return false; }
    public boolean promptPassword(String message){ return false; }
    public void showMessage(String message){ }
    public String[] promptKeyboardInteractive(String destination,
                                              String name,
                                              String instruction,
                                              String[] prompt,
                                              boolean[] echo){
      return null;
    }
  }
} 
```

# javascript - 在找出为元素定义了哪些 JavaScript 事件之后，我们如何继续？

> ID：13922699
> 
> 赞同：2
> 
> 时间：2012-12-17T21:43:59.477
> 
> 标签：javascript, events, dom-events, watir, browser-automation

我是 Watir（以及 JavaScript）的新手，并且一直在关注相关的问题（以及答案）。我也经历了“萤火虫”的建议。在找出触发了哪些事件之后，我无法完全收集我们应该做什么。

在以下情况下，手动单击“概述”就足够了，但我无法编写代码来自动执行相同操作。

```
<div id="overview" class="dijitTreeIsRoot dijitTreeNode dijitTreeNodeUNCHECKED dijitUNCHECKED" role="presentation" style="background-position: 0px 0px;" widgetid="dijit__TreeNode_10">

<div class="dijitTreeRow" data-dojo-attach-event="onmouseenter:_onMouseEnter, onmouseleave:_onMouseLeave, onclick:_onClick, ondblclick:_onDblClick" role="presentation" data-dojo-attach-point="rowNode" title="" style="padding-left: 0px;">

<img class="dijitTreeExpando dijitTreeExpandoLeaf" role="presentation" data-dojo-attach-point="expandoNode" alt="" src="/hcsadmin/open/dojo/resources/blank.gif">

<span class="dijitExpandoText" role="presentation" data-dojo-attach-point="expandoNodeText">*</span>

<span class="dijitTreeContent" role="presentation" data-dojo-attach-point="contentNode">

<img class="dijitIcon dijitTreeIcon dijitLeaf" role="presentation" data-dojo-attach-point="iconNode" alt="" src="/hcsadmin/open/dojo/resources/blank.gif">

<span class="dijitTreeLabel" data-dojo-attach-event="onfocus:_onLabelFocus" aria-selected="false" tabindex="-1" role="treeitem" data-dojo-attach-point="labelNode">Overview</span>

</span>

</div>

<div class="dijitTreeContainer" style="display: none;" role="presentation" data-dojo-attach-point="containerNode"></div>

</div> 
```

现在我可以使用以下方法刷新“概述”：

```
browser.div(:id, "overview").flash 
```

它确实成功闪烁。但正如怀疑的那样，

```
browser.div(:id, "overview").click 
```

不工作。

请为此提供解决方案（甚至更好的代码）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:04:50.873

您将不得不进行一些实验，但 orde 已经指出采取的方法可能会奏效。

我怀疑这些方面的东西可能是正确的答案：

```
browser.div(id: "overview").span(class: "dijitTreeLabel").fire_event "onfocus" 
```

您可能必须按照该队列与另一个执行点击的队列...

```
browser.div(id: "overview").span(class: "dijitTreeLabel").fire_event :click 
```

......再一次，很难确切地知道什么会起作用，所以你必须进行实验。

# android - 未使用已定义变量的 Android NDK 代码分析

> ID：13922701
> 
> 赞同：1
> 
> 时间：2012-12-17T21:44:06.130
> 
> 标签：android, android-ndk, analyzer

我认为这个问题是在升级到 Juno Eclipse 时开始的。我相信 C/C++ 构建环境可能也同时升级了。NDK*未*升级。

我们有大量可以在多个平台下编译的 C 代码。我们正在使用 crystax-ndk (r6) 来编译我们的 C++ 代码。要知道我们何时为 Android 编译，我们在 Android.mk 中定义了以下内容

```
LOCAL_CFLAGS := -DANDROID_NDK \
            -DDISABLE_IMPORTGL \
                 ... 
```

然后在某些文件中，我们将根据平台包含不同的标题

```
#ifdef ANDROID_NDK
     ... 
```

我们的代码编译得很好，似乎运行良好。但是，当打开某些文件时，C/C++ 代码分析器会发现很多错误。这似乎是因为分析器不知道 ANDROID_NDK 定义的变量。

知道为什么代码分析器不使用与编译器相同的#defines 吗？由于分析器报告的所有虚假错误，代码几乎无法编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T00:41:50.433

我看到您在评论您所指的分析仪。

Eclipse CDT（C/C++ 开发工具包）不支持解析 Android.mk，但在撰写本文时，NDK 插件也没有添加该功能。

可能的（丑陋/烦人的）解决方法：设置一个头文件设置您缺少的定义，并将该头文件包含到所有文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:52:58.150

用于`LOCAL_CPPFLAGS`C++ 文件和`LOCAL_CFLAGS`Android.mk 中的 C 文件

# jquery - 检索 1 已选中复选框

> ID：13922702
> 
> 赞同：3
> 
> 时间：2012-12-17T21:44:08.780
> 
> 标签：jquery

我有这个复选框：

```
<input id="IsOutdoors" class="checkbox" type="checkbox" value="1"> 
```

我正在尝试检索`1`是否已检查。

我试过了： 无论如何，`var IsOutdoors = $('#IsOutdoors').val();`它总是会返回。`1`

我试过了：`var IsOutdoors = $("#IsOutdoors option:selected").val();`它什么都不返回

我试过：`var IsOutdoors = $('#IsOutdoors').is(':checked');`返回真/假

还有其他简单的返回号码的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T21:45:52.977

```
var IsOutdoors = $('#IsOutdoors').is(':checked') ? 1 : 0;
// ||
var IsOutdoors = document.getElementById('IsOutdoors').checked ? 1 : 0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T21:47:18.710

```
var IsOutdoors = +$('#IsOutdoors').is(':checked') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T21:46:15.527

使用三元运算符怎么样？`IsOutdoors`如果未选中复选框，应包含什么？

```
var IsOutdoors = ($('#IsOutdoors').is(':checked')) ? $('#IsOutdoors').val() : false; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-17T21:47:06.037

如果要检索复选框的值，请尝试：

```
var IsOutdoors = $('#IsOutdoors:checked').val(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T21:46:52.133

```
var $checkbox = $('#IsOutdoors');

if( $checkbox.is(':checked')){
    alert($checkbox.attr('value'));
}) 
```

# c - 如何通过 C 中的两个函数向下传递 Int 的地址来在 main 中操作 Int？

> ID：13922703
> 
> 赞同：1
> 
> 时间：2012-12-17T21:44:08.800
> 
> 标签：c, function, pointers, memory-address

我在 main 中有一个 int，称为“end”。

Main 调用一个函数，该函数本身调用一个函数。

到目前为止，我能够让第一个函数通过向它发送一个地址并让它期望一个指针来操纵“结束”。但是，我不能将它发送到下一个函数，并让它操纵 main 中调用的“int”。

到目前为止，我有以下适用于一个功能；

适用于一种功能的缩写代码：

```
void function(int* end);

int main(void)
{
   end = 0;

   function(&end);
}

void function(int* end)
{
   *end = 1;

   // At this stage I want to call in another function, and have it be able to manipulate 'end'
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T21:47:10.250

继续传递指针。

```
void function2( int *end ) {
    *end += 41;
}

void function( int *end ) {
    *end = 1;
    function2( end );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:54:20.627

请记住，在您的函数中，您已经有一个整数指针 - 确保您继续将指针`end`而不是地址传递给指针`&end`：

```
#include <stdio.h>

void function( int *end );
void another_function( int *end );

int main( int argc, char *argv[] ) {
   int end = 0;
   function( &end );
   printf( "end: %d\n", end );
}

void function( int *end ) {
   *end = 1;
   another_function( end );
}

void another_function( int *end ) {
   (*end)++;
} 
```

输出： `end: 2`

# ruby-on-rails-3 - 索引页的 rspec2 路由错误 [Rails3，Rspec2]

> ID：13922704
> 
> 赞同：0
> 
> 时间：2012-12-17T21:44:16.673
> 
> 标签：ruby-on-rails-3, rspec2, rails-routing

我有以下资源（config/routes.rb）

```
resources :dashboard

dashboard_index GET    /dashboard(.:format)           dashboard#index
                         POST   /dashboard(.:format)           dashboard#create
           new_dashboard GET    /dashboard/new(.:format)       dashboard#new
          edit_dashboard GET    /dashboard/:id/edit(.:format)  dashboard#edit
               dashboard GET    /dashboard/:id(.:format)       dashboard#show
                         PUT    /dashboard/:id(.:format)       dashboard#update
                         DELETE /dashboard/:id(.:format)       dashboard#destroy 
```

我有以下控制器规格

```
require 'spec_helper'

describe DashboardController do

  describe "GET 'index'" do
    it "returns http success" do
      get :index
      response.should be_success
    end
  end

end 
```

当我运行规范时，我不断收到以下错误

```
Failures:

  1) DashboardController GET 'index' returns http success
     Failure/Error: get :index
     ActionController::RoutingError:
       No route matches {:controller=>"dashboard"}
     # ./spec/controllers/dashboard_controller_spec.rb:7:in `block (3 levels) in <top (required)>'

Finished in 0.12126 seconds 
```

当我检查类似问题时，几乎所有问题都是因为没有传递必需的参数，但在我的情况下，我的操作不需要参数，所以这里缺少的部分是什么

我上线了

```
gem 'rails', '3.2.9'
group :test, :development do
  gem "rspec-rails", "~> 2.0"
end 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:09:03.217

正如@John Naegle 指出的那样，这似乎是我的 spork + 后卫设置的问题，并且它没有拾取“routes.rb”文件

对困惑感到抱歉

# iphone - 未设置自定义字体，iPhone

> ID：13922705
> 
> 赞同：0
> 
> 时间：2012-12-17T21:44:24.063
> 
> 标签：iphone, xcode, custom-font

我正在尝试将标签的字体更改为“Museo_500italic.otf”我已将其导入我的项目并将其添加到 p-list，但它无法识别字体。几个月前，我用其他字体完成了它，但由于某种原因，这个字体不起作用。我是不是忘记了什么？

这就是我所拥有的：

![顶行](../Images/9312e8a08602b850e5a58cba6a78c55a.png)

![倒数第三个](../Images/930219724f29dd02ae9698d1364468b2.png)

这给了我 Museo-500 的字体：

`self.createAccTxt.font = [UIFont fontWithName:@"Museo-500" size:17.5];`

这些给了我默认字体：

`self.createAccTxt.font = [UIFont fontWithName:@"Museo-500Italic" size:17.5];` `self.createAccTxt.font = [UIFont fontWithName:@"Museo-500_Italic" size:17.5];` `self.createAccTxt.font = [UIFont fontWithName:@"Museo-500-Italic" size:17.5];` `self.createAccTxt.font = [UIFont fontWithName:@"Museo-500italic" size:17.5];` `self.createAccTxt.font = [UIFont fontWithName:@"Museo-500_italic" size:17.5];` `self.createAccTxt.font = [UIFont fontWithName:@"Museo-500-italic" size:17.5];`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:10:38.123

在您的`fontWithName:`调用中，带有字体名称的字符串需要与在 OSX 的“字体书”应用程序中写入的完全相同。

# java - 如何为 Spring MVC 控制器创建通用权限管理系统？

> ID：13922706
> 
> 赞同：0
> 
> 时间：2012-12-17T21:44:29.043
> 
> 标签：java, spring, spring-mvc, spring-security, boilerplate

我正在做一个基于浏览器的游戏。可以说我有一个弹簧控制器很多控制器〜10。每个都有 10 个 url 映射。这就像 100 多种映射方法。

如果满足某些规则，每个映射只会加载或显示正确的内容。将通过执行数据库查询来检查规则。**例如**：

我是 12 级用户，只有当用户是 10+、20+、30+、40+、50+ 等时，每个控制器才允许显示内容。

我可以通过在每个控制器中的每个映射方法下进行查询来做到这一点，但是会有太多的**样板**化。

**有没有办法以某种方式集中化，比如将我的限制映射放在一起，而不必将它放在每个 url 映射方法下？**

即使设计上可能没有这样的事情，也许您自己也遇到过同样的问题并想出了一些聪明的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:35:26.310

我建议您使用`spring-security`自定义`PermissionEvaluator`，这样您基本上可以在网页和控制器中使用相同的实现：

在您可以使用的网页中：
`<security:authorize access="hasPermission(#shop,'see')"></security:authorize>`

在您的控制器和您可以使用的任何服务方法中：
`@PreAuthorize("hasPermission(#shop,'see')")`

像这样：

```
@PreAuthorize("hasPermission(#shop,'see')")
@RequestMapping("/someUrl")
public String processSomeUrl(@ModelAttribute("shop") Shop shop){
    shop.getStuff();
} 
```

或也`@PostAuthorize`和`@PostFilter("hasPermission(filterObject,'see')")`（过滤列表）

所有这些功能将根据您自己的权限评估者限制访问或过滤结果列表。它们都将指向相同的实现，看起来像这样：

```
@Component
public class MyPermissionEvaluator implements PermissionEvaluator {

    private final Log logger = LogFactory.getLog(getClass());

    @Override
    public boolean hasPermission(Authentication auth, Object arg1, Object arg2) {
        logger.info("hasPermission "+auth+" - "+arg1+" - "+arg2+" ");
        if(arg2 instanceof String && arg1 instanceof Shop){
            Shop shop = (Shop)arg1;
            if(((String) arg2).equals("see")){
                //here you can have your own function
                boolean result = hasPermissionSeeShop(auth, project);                   
                return result;
            }
        }
        return false;
    }

    @Override
    public boolean hasPermission(Authentication arg0, Serializable arg1,
        String arg2, Object arg3) {
        logger.info("hasPermission "+arg0+" - "+arg1+" - "+arg2+" - "+arg3+" ");
        return false;
    }
} 
```

此外，当这些方法返回 false 时，它​​会自动抛出 AccessDeniedException，您可以轻松地将其配置为在 http 元素中重定向到您自己的 accessDenied 页面：

```
<http auto-config="true">
    <intercept-url pattern="/admin*" access="ROLE_ADMIN" />
    <access-denied-handler error-page="accessDeniedPage"/>
</http> 
```

# java - Java一次按2个键

> ID：13922707
> 
> 赞同：0
> 
> 时间：2012-12-17T21:44:38.017
> 
> 标签：java, key-bindings

我正在制作游戏，当用户按下一个键时，当他们按下另一个键时，前一个键停止工作，新按下的键接管。使用以下块作为示例，这是 Java 的事情，还是与我的代码有关？

```
keyboard.setEvent("LEFT", new AbstractAction(){
    @Override
    public void actionPerformed(ActionEvent evt){
        // Moves an object left
    }
});

keyboard.setEvent("SPACE", new AbstractAction(){
    @Override
    public void actionPerformed(ActionEvent evt){
        // Creates and object and moves it upwards
    }
}); 
```

此方法（上面调用）创建事件。

```
public void setEvent(String key, AbstractAction act){
    // Key Pressed
    comp.
            getInputMap(Room.WHEN_IN_FOCUSED_WINDOW).
            put(KeyStroke.getKeyStroke(key), "do" + key + "Action");
    comp.
            getActionMap().
            put("do" + key + "Action", act);
} 
```

# google-chrome - YouTube iFrame 顶部的粘性 Div 网站时部分透明的文本

> ID：13922708
> 
> 赞同：0
> 
> 时间：2012-12-17T21:44:41.170
> 
> 标签：google-chrome, iframe, youtube, opacity, sticky

我有一个 nav 元素贴在页面顶部，当它位于嵌入的 YouTube iframe 顶部时，它会使该粘性 nav 元素中的文本更加透明（可能增加约 30%）。这只发生在 Chrome 中（我的版本是 23.0.1271.97）。

您可以看到该问题没有出现在[JSFiddle](http://jsfiddle.net/BFTrick/kvZCj/4/)中，但它会出现在本地 HTML 文件或 Web 上的文件中。

![截屏](../Images/b43b86462d40586403c1ead3294b7ece.png)

这是代码：

```
<style>
a{
    color: white;
}
#primaryNav
{
    background-color: #333;
    position: fixed;
        top: 0px;
        left: 0px;
}​
</style>

<div style="height: 400px;"></div>

<div id="primaryNav">
    <ul>
        <li><a href="#">About</a></li>
        <li><a href="#">Open House</a></li>
        <li><a href="#">Shadow Days</a></li>
        <li><a href="#">Curriculum</a></li>
    </ul>
</div>

<iframe width="350" height="197" src="http://www.youtube.com/embed/XfX2lvFbWlc?rel=0" frameborder="0" allowfullscreen></iframe>

<div style="height: 600px;"></div>​ 
```

这发生在 YouTube 和 Vimeo 上，但不会发生在其他一些网站上，比如我的公司网站或我的个人网站，所以我会假设悬停的 div 以某种方式与嵌入网页的内容进行交互，这让我感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:49:19.047

您可能想尝试查看它是否与 wmode 属性有关。尝试设置

```
?wmode=transparent 
```

对于 iframe。

如果这不起作用，则可能与两个元素的 z 索引有关。

# ios - ios - 添加新项目时，无法弄清楚为什么项目列表在第一个和最后一个位置显示第一个项目的值

> ID：13922709
> 
> 赞同：-1
> 
> 时间：2012-12-17T21:44:45.537
> 
> 标签：ios, ios5, uitableview

我有一个从远程数据库中获取的字符串列表，它们显示得很好。然后，当我添加一个字符串时，该新字符串会很好地添加到数据库中，但是当需要在屏幕上显示它时，由于某种原因，它会同时显示第一项和最后一项中的第一项的值。

这是我正在做的事情：

```
// CREATING EACH CELL IN THE LIST
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"business";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if(!cell)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
        cell.textLabel.font = [UIFont fontWithName:@"Helvetica" size:17];
        cell.textLabel.numberOfLines = 0;
        cell.textLabel.lineBreakMode = UILineBreakModeWordWrap;
    }

    cell.textLabel.text = [cellTitleArray objectAtIndex:indexPath.row];

    // CLOSE THE SPINNER
    [spinner stopAnimating];

    // return the cell for the table view
    return cell;
} 
```

当从数据库中检索数据时，这就是我所做的：

```
 dispatch_sync(dispatch_get_main_queue(), ^{

                items_array = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:nil];

                if(!error){
                    [self loadTitleStrings];
                }

                [self.itemList reloadData];
            }); 
```

这是调用的 loadTitleStrings

```
-(void)loadTitleStrings
{
    if(!standardUserDefaults)
    standardUserDefaults = [NSUserDefaults standardUserDefaults];
    NSString *is_private = [standardUserDefaults objectForKey:@"is_private"];

    if(!cellTitleArray)
    {
        cellTitleArray = [NSMutableArray array];
    }

    for(NSDictionary *dictionary in items_array)
    {
        NSString *tcid = [dictionary objectForKey:@"comment_id"];        
        [theArray addObject:tcid];

        NSString *string;
        if(!is_private || [is_private isEqualToString:@"0"])
        {
            string = [NSString stringWithFormat:@"%@: %@", [dictionary objectForKey:@"first_name"], [dictionary objectForKey:@"comment"]];
        }
        else
        {
            string = [NSString stringWithFormat:@"%@", [dictionary objectForKey:@"comment"]];
        }
        [cellTitleArray addObject:string];
    }
} 
```

谁能说出为什么最后一项显示为第一项的值？我真的很难过！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:01:00.030

我猜 cellTitleArray 是一个实例变量？如果是这样，第二次调用 loadTitleStrings（在将新字符串添加到远程数据库并再次获取所有字符串之后），cellTitleArray 将是您当前使用的。也许您再次添加所有字符串。如果是这种情况，您可以在 -loadTitleStrings 中的 foreach 循环之前添加 [cellTitleArray removeAllObjects]。

而且，也许在你的第二个字符串中发生了一些错误。我认为作为您的代码做这件事不是一个好主意：

```
items_array = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:nil];

if(!error){
   [self loadTitleStrings];
} 
```

您将 nil 传递给错误参数，当然错误将为 nil。当错误发生时，您无法被告知。试试这个看看是否有错误：

```
NSError *error = nil;
items_array = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:&error];

if(!error){
   [self loadTitleStrings];
} else {
    NSLog(@"%@",error);
} 
```

# sql - Ruby/Rails：将分组和日期列转换为 Unix 时间

> ID：13922713
> 
> 赞同：0
> 
> 时间：2012-12-17T21:45:19.793
> 
> 标签：sql, ruby-on-rails, ruby, activerecord, format

我正在尝试将日期从这种格式“YYYY-MM-DD”转换为 Unix 时间。

我正在运行此代码以获取分组总和：

```
Invoice.group('date(filled_at)').sum(:lines_price).to_a 
```

这会返回：

```
[["2012-12-15", #<BigDecimal:b451450,'0.19275E4',18(45)>], ["2012-12-17", #<BigDecimal:b45107c,'0.764235E3',18(45)>]] 
```

问题是我需要将此数据放入接受此格式的图表中：

```
[
  [1341014400000, 123.5],
  [1341018000000, 150.3],
  ...
] 
```

如何将数组转换为图表可接受的格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:16:55.947

如果可以解析，转换应该不会太难：

```
Invoice.group('date(filled_at)').sum(:lines_price).to_a.collect do |date, sum|
  [ DateTime.parse(date).to_i, sum.to_f ]
end 
```

这`BigDecimal`只是`NUMERIC`在 Ruby 中通过正确处理定点值来表示 SQL 类型的一种方式。

# android - 从字符串中获取布局 id 不起作用

> ID：13922717
> 
> 赞同：7
> 
> 时间：2012-12-17T21:45:50.360
> 
> 标签：android, string, widget

看遍了每一个问题，不能让它工作。

我想设置一个带有字符串值的 AppWidgets 布局（因此只需更改字符串即可将布局切换到另一个布局）。

```
String NoteString = "R.layout.widget_blue".toString();

int resID = context.getResources().getIdentifier(NoteString, "layout", context.getPackageName());

RemoteViews views = new RemoteViews(context.getPackageName(), resID); 
```

不知道为什么它不起作用，小部件只是说：“加载小部件时出现问题”..

这工作正常：

```
RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_blue); 
```

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-17T21:54:46.730

为了从字符串组件构造资源 ID，您必须将各个组件传递给`getIdentifier()`，而不是将完全限定的 ID 作为单个参数传递：

```
//Get the ID for R.layout.widget_blue
int resID = context.getResources().getIdentifier("widget_blue", "layout", context.getPackageName()); 
```

然后只需更改第一个参数名称即可获得不同的布局资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:58:20.657

你为什么要使用 getIdentifier 呢？既然您无论如何都在其中包含了硬编码字符串，那么为什么不直接使用包含的资源标识符，就像您在第二个示例中所做的那样。如 getIdentifier() 方法的文档中所述，这样效率更高：

> 注意：不鼓励使用此功能。按标识符检索资源比按名称检索资源效率更高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-27T10:30:04.403

下面是一组通过名称获取资源标识符的调用：对 AppWidgets 尤其有用

**布局**

```
val viewId = context.resources.getIdentifier("my_custom_layout", "layout", context.packageName) 
```

**来自 res/drawable 的图像**

```
val viewId = context.resources.getIdentifier("my_image", "drawable", context.packageName) 
```

**根据资源名称查看**

```
val viewId = context.resources.getIdentifier("my_textview_id", "id", context.packageName) 
```

**细绳**

```
val viewId = context.resources.getIdentifier("my_string", "string", context.packageName) 
```

# xml - XSLT 将相对图像路径转换为绝对图像路径

> ID：13922719
> 
> 赞同：2
> 
> 时间：2012-12-17T21:45:54.167
> 
> 标签：xml, xslt

我很难概念化如何通过 xslt 将图像的相对路径转换为绝对路径。

当前存在一个 XML 文档，`<myHTML>`其中包含一个包含 html 编码文本的部分。此 html 文档可能包含`<img>`带有相对路径的标签 - 例如：`<img src="myPic.jpg>`

还存在一个 xsl，它使用如下块处理该部分：

```
<div id="bodyText">
  <xsl:value-of select="/abc:myT/abc:myHTML" disable-output-escaping="yes">
</div> 
```

我需要在图像名称的开头添加一个绝对路径。由于整个 html 块是通过 访问的`value-of select`，我不知道如何攻击它。

我确实相信我需要使用 xsl 输入参数才能传入路径，但不确定如何`<img>`访问`<myHTML>`.

建议将不胜感激。

***更新***

关于 XML 文件的格式以及我所说的“html 编码文本”的含义存在一些问题。请忽略拼写错误，以下块来自内存，代表实际的 xml 文件。它旨在说明块`HtmlEncode()`中的`<myHTML>`数据。

```
<?xml version="1.0" encoding="UTF-8">
<?xml-stylesheet ...snipped..>
<myT xmlns="abc">
   <myHTML>
      &lt;html$gt;&lt;head$gt;&lt;title$gt;This is my title&lt;/title$gt;&lt;/head$gt;
      &lt;body$gt;
      &lt;img src="myPic.jpg" /$gt;
      &lt;/body$gt;&lt;/html$gt;
   </myHTML>
</myT> 
```

此外，正如 Dimitre 所指出的，我使用的是 .NET，它是 XSLT 1.0 处理器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:15:28.287

除非有充分的理由迫使您为此使用 XLST，否则我建议您使用该工具是错误的工具。将 XML 文档加载到 DOM 和 XPath 中以获取包含相关 myHtml 元素的节点集。对 HTML 进行转义并将其加载到 HTML 解析器（或者如果它是 XHTML，则为 XML 解析器）。再次 XPath 以获取 img 元素，并读取/写入 href 属性。

无论如何-如果您可以使用问题的更多详细信息更新问题，这可能会有所帮助。是否存在强制您使用 XSLT 的限制？（在这种情况下，HTML 是否以您可以可靠地进行正则表达式的方式进行转义？）性能是一个问题吗？它是什么类型的应用程序？等等等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:00:16.463

一旦你使用`xsl:value-of`，你正在使用一个字符串。所以你可以使用正则表达式，但这似乎不稳定。为什么不直接使用模板？

```
<!-- XSL input param -->
<xsl:param name="absolute-path" select="'http://default-path/"></xsl:param>

...

<div id="bodyText">
  <xsl:apply-templates select="/abc:myT/abc:myHTML/node()"/>
</div>

...

<xsl:template match="abc:img">
  <img>
     <xsl:attribute name="src">
         <xsl:value-of select="concat($absolute-path,@src)"/>
     </xsl:attribute>
     <xsl:copy-of select="@* except @src"/>
  </img>
</xsl:template>

<xsl:template match="text()">
  <xsl:copy />
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T00:16:06.693

**这个完整而简短且有效的转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:abc="some:abc" exclude-result-prefixes="abc">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pBase" select="'http://www.copm.com/'"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="abc:img[@src]">
  <xsl:element name="img" namespace="some:abc">
   <xsl:attribute name="src">
     <xsl:value-of select="concat($pBase, @src)"/>
   </xsl:attribute>
   <xsl:apply-templates select="@*[not(name()='src')]|node()"/>
  </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于以下 XML 文档时：**

```
<myT xmlns="some:abc">
    <myHTML>
        <img src="myPic.jpg"/>
    </myHTML>
</myT> 
```

**产生想要的、正确的结果**（元素的任何`src`属性`img`都转换为绝对值，使用提供的作为参数库）：

```
<myT xmlns="some:abc">
   <myHTML>
      <img src="http://www.copm.com/myPic.jpg"/>
   </myHTML>
</myT> 
```

**更新**：

正如 Michael Kay 所指出的，在 XSLT 2.0 和更高版本中应该使用标准的 XPath 2.0 函数**[`resolve-uri()`](http://www.w3.org/TR/xpath-functions/#func-resolve-uri)**。

但是，从 OP 的评论中可以清楚地看出他正在使用 .NET XSLT 处理器，这意味着 XSLT 1.0 处理器。

# batch-file - 存在文件批处理文件

> ID：13922727
> 
> 赞同：0
> 
> 时间：2012-12-17T21:46:15.220
> 
> 标签：batch-file

我尝试在我的批处理文件中验证机器上是否存在文件。

我使用以下但失败了：

```
if exist "C:\Users\Administrator\Desktop\Mcafee"(
pause
) 
```

你知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:16:35.187

您的目录路径和`if`语句的左括号之间没有空格，这将使其将括号视为文件名的一部分。

尝试使用

```
if exist "C:\Users\Administrator\Desktop\Mcafee" (
pause
) 
```

相反，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T05:32:51.007

不需要括号就行

如果存在 C:\users\administrator\desktop\McAffee pause

此外，如果您尝试从批处理中打开 mcaffe 的快捷方式，它将无法工作，因为它无法更改批处理文件的目录。

# ruby - 将图像文件夹从 public/img 移动到 app/assets/img

> ID：13922730
> 
> 赞同：0
> 
> 时间：2012-12-17T21:46:29.213
> 
> 标签：ruby, ruby-on-rails-3, asset-pipeline

我正在开发一个应用程序来存储和访问 public/img 目录中的图像。我想将其切换到 app/assets/img。应用程序中的哪个配置是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T03:37:44.590

我不建议您的用户直接访问应用程序/资产。app/assets 中的文件是要预编译的源文件，将放在 /public/assets （预编译资产的默认目录）中。
所以如果你把图片放在 app/assets/img 中，预编译的时候它会放在 public/assets/img 中。您可以使用以下命令配置预编译目标文件夹的位置：
`config.assets.prefix`

有关资产管道的更多信息，请参阅[rails edge 指南](http://edgeguides.rubyonrails.org/asset_pipeline.html)

# java - Eclipse 不读取源代码

> ID：13922732
> 
> 赞同：0
> 
> 时间：2012-12-17T21:46:37.897
> 
> 标签：java, eclipse, text, editor

面对一个不寻常的问题，当 Eclipce 根本没有打开代码时，大纲中的所有对象都可用，程序启动。更改工作区，使用 Java 编辑器打开，文本编辑器，更改位置没有帮助。我无法附上图片。UPD 它运行良好一周，不要安装。任何项目都看不到。 [http://ipic.su/img/img7/fs/error.1355781465.jpg](http://ipic.su/img/img7/fs/error.1355781465.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T03:45:47.833

Maybe you can try with a brand new workspace folder?

And what's in the Error view (Shift+Alt+Q then L), a screenshot would be helpful there.

# javascript - 以编程方式确定在 Web 导航栏中显示多少元素

> ID：13922738
> 
> 赞同：3
> 
> 时间：2012-12-17T21:47:03.170
> 
> 标签：javascript, html, css

假设我有一个水平导航栏，其中可以包含任意数量的项目。现在假设这个页面的宽度为 1000 像素，如果显示的所有项目都是 1300 像素。现在我想要做的是获取任何导致它超出 1000px 的元素并将它们放入下拉菜单中。我遇到的问题是确定在可以更改窗口宽度时需要多少元素以确保所有内容都适合窗口的最佳方法是什么（如果用户更改窗口宽度，元素的数量在下拉菜单中会增加或减少）并且导航元素的宽度是随机的？

类似于 google plus 的侧边导航，只是水平而不是垂直。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:55:14.420

将导航元素放在其溢出设置为隐藏的父 div 中，以便隐藏额外的导航元素。
然后，使用 jquery 找到隐藏的项目并将它们附加到您的下拉菜单中。请参阅此问题的答案：[jQuery: How to get content not visible with overflow: hidden?](https://stackoverflow.com/questions/3731101/jquery-how-to-get-content-not-visible-with-overflow-hidden)

请参阅我的工作示例：http: [//jsfiddle.net/zSXTb](http://jsfiddle.net/zSXTb)。基础知识：

```
var h = $("#container").height();
$("#container").find("div").each(function() {
    if ($(this).position().top > h) {
        $(this).clone().appendTo($("#extrasContent"));
    }
}); 
```

在调整窗口大小时运行此 onload。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:31:14.867

尝试使用带有 css 的 @media 查询 - 您可以对屏幕大小进行大量控制。例如：

```
@media all and (max-width: 1000px){
    /*insert normal css. e.g.:*/
    body{
        width: 700px;
    }
} 
```

您可以使用*min-width*而不是*max-width*。

# .net - 无需编译的 Web 服务

> ID：13922740
> 
> 赞同：0
> 
> 时间：2012-12-17T21:47:04.477
> 
> 标签：.net, web-services, asmx

我将在客户的 Web 服务器上放置 .Net Web 服务。我希望使用未编译的代码（无 DLL）来提供 Web 服务，以便随时进行更改。我知道这是可能的，但你如何做到这一点？我假设我制作了 asmx = asmx.vb，所以后面的代码直接在 asmx 中，但我收到 asmx 需要一个类（通常在 dll 中）的错误。非常感谢任何帮助、建议或方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:51:47.090

网站：

网站项目是即时编译的。你最终会得到更多的 DLL 文件，这可能会很痛苦。当您在一个目录中有页面或控件需要引用另一个目录中的页面和控件时，它也会产生问题，因为另一个目录可能尚未编译为代码。另一个问题可能是出版。

如果 Visual Studio 没有被告知不断地重复使用相同的名称，它将一直为页面生成的 DLL 文件提供新名称。这可能导致有多个包含相同类名的 DLL 文件的紧密副本，这将产生大量错误。网站项目是在 Visual Studio 2005 中引入的，但事实证明它并不是非常受欢迎。

Web应用程序：

Web 应用程序项目是作为插件创建的，现在作为 Visual Studio 2005 的 SP 1 的一部分存在。主要区别在于 Web 应用程序项目的设计类似于 Visual Studio 2003 附带的 Web 项目。它将在构建时将应用程序编译成单个 DLL 文件。为了更新项目，必须重新编译并发布 DLL 文件以进行更改。

Web 应用程序项目的另一个不错的功能是从项目视图中排除文件要容易得多。在网站项目中，您排除的每个文件都使用文件名中的排除关键字重命名。在 Web 应用程序项目中，该项目只是跟踪从项目视图中包含/排除哪些文件，而不重命名它们，这使事情变得更加繁琐。

参考：[http ://www.megasolutions.net/AspNet/difference-between-Web-Site-and-Web-Application-Project-27210.aspx](http://www.megasolutions.net/AspNet/difference-between-Web-Site-and-Web-Application-Project-27210.aspx)

文章 ASP.NET 2.0 - 网站与 Web 应用程序项目也给出了为什么使用一个而不是另一个的原因。这是它的摘录：

```
 You need to migrate large Visual Studio .NET 2003 applications to VS 2005? use the Web Application project.
    You want to open and edit any directory as a Web project without creating a project file? use Web Site project.
    You need to add pre-build and post-build steps during compilation? use Web Application project.
    You need to build a Web application using multiple Web projects? use Web Application project.
    You want to generate one assembly for each page? use Web Site project.
    You prefer dynamic compilation and working on pages without building entire site on each page view? use Web Site project.
    You prefer single-page code model to code-behind model? use Web Site project. 
```

Web 应用程序项目与网站项目 (MSDN) 解释了网站和 Web 应用程序项目之间的区别。此外，它还讨论了要在 Visual Studio 中进行的配置。

来源：[ASP.NET 网站或 ASP.NET Web 应用程序？](https://stackoverflow.com/questions/398037/asp-net-web-site-or-web-application)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-19T11:17:25.367

这是一个模板 ASMX 文件。复制它并进行更改。注意第一行的Class属性需要和代码中的类名相匹配。

```
<%@ WebService Language="C#" Class="MyNamespace.MyClass" %>
using System.Web.Services;

namespace MyNamespace
{
    [WebService(Namespace="http://mydomain.example/")]
    public class MyClass : WebService 
    {
        [WebMethod]
        public void MyFunction()
        {
        }
    }
} 
```

然后，您将能够将此文本 ASMX 文件部署到 Web 服务器，而无需提供 DLL。请注意，IIS 将编译您的代码，但这将在内部发生，而无需您触发它。

另请注意，Visual Studio（至少是我的版本）不会为您提供任何您习惯的帮助，例如自动完成或调试支持。在这种模式下，Visual Studio 的行为很像记事本。您最好使用代码隐藏文件开发它，最后复制/粘贴完成的代码以进行部署。

# mysql - Mysql 转储 - 如何通过转义执行长查询？

> ID：13922741
> 
> 赞同：0
> 
> 时间：2012-12-17T21:47:04.213
> 
> 标签：mysql, database, mysqldump

我正在导出一个圆形立方体 MySQL 数据库，`Mysqldump`但遗憾的是，当我使用长查询时它失败了。我怎样才能摆脱这个，让它工作？

> **mysqldump** -t --skip-add-drop-table roundcube contacts --where="select * from contacts where user_id in (select user_id from users where username like '%mysite.com%')" > roundcube_contacts.sql

运行上面的代码给了我这个错误，那么我该如何正确地转义查询呢？

> **mysqldump:**无法执行 'SELECT /*!40001 SQL_NO_CACHE *//* !50084 SQL_NO_FCACHE */ * FROM `contacts`WHERE select * from contacts where user_id in (select user_id from users where username like '%mysite.com%')':**你有SQL 语法错误；****检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法，以便在第 1 行 (1064)**的 'select * from contacts where user_id in (select user_id from users where user_id in ) 附近使用

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:53:58.387

mysqldump`--where`选项指定要包含在 WHERE 子句中的文本。

你有一个完整的语句，这会产生一个语法错误，

```
... WHERE SELECT ... 
          ^ 
```

mysqldump 已经在编写`SELECT * FROM roundcube.contacts`. --where 选项告诉 mysqldump 包含一个 WHERE 关键字，后跟您提供的文本，作为它生成的语句的一部分。

你想要更多的东西：

--where="user_id in (select user_id from users where username like '%mysite.com%')"

所以生成的语句将是......

```
... WHERE user_id in ...
          ^ 
```

此外，数据库名称和表名称应遵循选项...

```
mysqldump -t --skip-add-drop-table --where="1=1" roundcube contacts \
  > roundcube_contacts.sql 
```**

# ember.js - 渲染视图时如何使用块而不是内联块

> ID：13922745
> 
> 赞同：0
> 
> 时间：2012-12-17T21:47:17.503
> 
> 标签：ember.js

我已经实现了一个具有多个 {{view Ember.TextField ...}} 的视图

显示模板，但所有 html 元素都内联显示...

我想将所有输入元素呈现为块。

如何解决？（我想避免在模板中的每个视图之后添加。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T00:03:26.727

您可以使用继承自 Ember.View 的 classNames 绑定在元素上设置一个 css 类并在其上定义您的 css 样式（即 display:block;），例如：

```
{{view Ember.TextField classNames="some-class" ...}} 
```

或者，您可以创建 Ember.TextField 的子类：

```
App.MyTextField = Em.TextField.extend({
    classNames: ['some-class']
}); 
```

然后在 Handlebars UI 中调用它：

```
{{view App.MyTextField ...}} 
```

# ruby-on-rails-3 - 有没有为使用 rails 而构建的 recline.js 的后端？

> ID：13922748
> 
> 赞同：2
> 
> 时间：2012-12-17T21:47:36.833
> 
> 标签：ruby-on-rails-3, backbone.js

Recline.js 似乎是在网格、地图等上显示数据的好工具。

我想使用网格视图，但能够将显示给用户的内容保存在数据库中。我目前正在为这个项目使用 Rails。

在文档中，他们说如何编写后端以与其集成（http://okfnlabs.org/recline/docs/backends.html）但我想知道是否已经有人在处理它（我找不到它网络）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T00:18:20.767

Recline.js 中的`Backend`对象是一个与某种数据源（通常是 Web 服务）对话的 javascript 组件。后端组件与该 Web 服务的接口进行对话，它不关心它是用 Ruby、COBOL 还是 Java 编程的，只要它知道从哪里获取和发送数据以及以什么格式。

所以简而言之，没有也不能真正成为现成的 Rails 后端，因为实现更多地取决于应用程序的细节——如何将数据库（MySQL？）中的数据映射到服务 API Recline 可以理解，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:13:50.167

您可以将 SOLR 与 Rails 一起使用，所以我不知道为什么您不能利用 Recline.js SOLR 功能来搜索您的 rails 数据。

# r - 如何在序列对象中创建组子集的序列索引图？

> ID：13922750
> 
> 赞同：2
> 
> 时间：2012-12-17T21:44:07.407
> 
> 标签：r, cluster-analysis, data-visualization, traminer

我有一个状态序列对象，其中包含一个具有 6 个级别的分组变量。我想创建 3 个序列索引图，一个用于 1 级和 2 级，一个用于 3 和 4 级，一个用于 5 和 6 级，以及一个图例作为单独的图。这些将被导出以在演示文稿中创建 3 张幻灯片。

seqIplot 中的 group= 选项不会对数据进行子集化。我尝试对数据框进行子集化以创建 3 个状态序列对象，但并非所有级别都具有相同的字母表，因此这不是一个可行的解决方案。绘制组子集的简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T08:37:34.577

**您可以通过索引状态序列对象和**分组变量来使用子集。如果您有一个名为“myseq”的状态序列对象、一个名为“subset”的子集向量以及存储组变量的数据框“my.data.frame”：

```
 seqIplot(myseq[subset, ], group=my.data.frame$mygroup[subset]) 
```

例如，您可以使用构建子集向量

```
 subset <- my.data.frame$mygroup %in% levels(my.data.frame$mygroup)[1:2] 
```

或者

```
 subset <- my.data.frame$mygroup %in% c("value1", "value2") 
```

希望这可以帮助

# c# - 这真的是一种改进（当内部范围处于循环中时将 var 移动到内部范围）？

> ID：13922753
> 
> 赞同：25
> 
> 时间：2012-12-17T21:47:57.223
> 
> 标签：c#, refactoring, resharper, scope

Resharper 建议这些变量：

```
List<string> senderDeviceIDList;
string senderDeviceID;
. . .
            foreach (var item in PlatypiIds)
            {
                senderDeviceIDList = await GetSenderDeviceIDForSenderID(item);
                senderDeviceID = senderDeviceIDList[0]; 
```

...可以在内部范围内声明，如下所示：

```
 foreach (var item in PlatypiIds)
    {
        List<string> senderDeviceIDList = await GetSenderDeviceIDForSenderID(item);
        string senderDeviceID = senderDeviceIDList[0]; 
```

...但这真的“更好”吗？这不会导致变量被声明 N 次（每个 foreach 循环一次）？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-17T21:50:26.167

*顺便说*一下，在性能或内存分配方面没有**任何好处，因为范围***内*或范围外的变量是在 , 中声明的。*`if``IL`*

 *唯一的好处是变量范围的本地化。将其移至使用它的范围，这会带来如下好处：

*   易于重构（可能是最重要的）

*   可读性。如果您在范围内看到变量，您就知道它*仅*在该范围内使用，如果您看到一些显然不在范围内的变量，您就知道更改它会影响代码的其他部分。所以改变它会带来一些*潜在*的危险。

简而言之，它与您正在编写的代码的可读性和可用性有关，并且不会带来任何性能或内存消耗优势。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-17T21:50:54.673

> 这不会导致变量被声明 N 次（每个 foreach 循环一个）？

从逻辑上讲，从概念的角度来看是的，**这就是重点**！从逻辑上讲，它们每个循环存在一次，并且在循环范围之外没有任何意义。

作为一个实现细节，不，它不会导致创建多个局部变量。该方法将只有一个变量，并且将在一般情况下（以及在允许的情况下）重复使用。有一些例外情况，例如当您使用匿名方法关闭变量时，它无法重用变量。

请注意，由于 C# 强制您在使用它们之前初始化所有局部变量，因此运行时甚至不负责在每次循环后清除它，编译器不会让您重新使用之前的垃圾（除非您显式初始化它在循环开始时设置为默认值）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-17T22:00:27.437

无论如何，您每次迭代都会分配一次这些对象的实例，初始方法中唯一不同的是您声明引用一次，而不是像第二个示例中那样每次迭代。

如果您需要在 foreach 循环结束时使用这些对象的最终状态（多毛），那么您可能需要使用第一种方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-19T11:41:40.763

有时利益是存在的。

如果生成的数组很大，那么将其移动到内部范围——即减少范围和生命周期——可能会阻止它被转移到后面的垃圾收集世代，并在有明显延迟的情况下被垃圾收集。

* * *

*决定解释我的旧答案 [在对赞成票感到惊讶之后] 并部分放弃我的话 (27.10.2021)*

**细节#0。**
您的两个选项的可见性范围不同，因此寿命也不同。在“for”循环中声明的变量从声明开始直到`}`这个循环，即直到*每次*迭代结束。*这意味着变量在每次迭代结束后甚至不存在，直到它到达下一次迭代的声明行！*

并且在“for”循环之外声明的变量在方法体的整个持续时间内都存在（我在这里假设在您的第一个示例中它是在某个方法体的顶层声明的）。

好的，有什么影响？

变量可以表示指向对象的指针。物体只有在至少有人指向它们时才会存在。因为如果没有人指着他们，怎么会有人提到他们？反之亦然——如果有人指向一个对象，它可能会在将来的某个时间点引用它，所以它必须存在。这正是垃圾收集器 (GC) 的逻辑。

因此，当您离开指向某个对象的变量的可见范围时，GC 可以停止考虑该指针。如果那个对象只有一个指向它自己的指针（你的变量），那么这个对象就已经不存在了，因为没有人指向它。但是，它继续存在于占用的内存方面 - 它是堆中的垃圾，等待 GC 被收集（在下一次垃圾收集运行或以后 - 由 GC 何时释放内存）。

回到您的选项 - 在方法执行过程中，当这些选项在是否允许 GC 或不收集您的变量指向的对象方面有所不同时，会出现一些问题。只要垃圾收集可能随时发生，将变量声明移动到内部范围只会增加该对象被收集的可能性。

Aaaaaand.. 99.9% 的时间你不应该担心它，因为这个对象无论如何都会在未来的某个时候被收集！*但..*

**细节#1**

不是，但”。真的 ：）

不知道，我可能在 2016 年误以为 LOH（大对象堆）中的对象也有代，所以允许 GC 收集它们的速度有多快很重要——因为代越高，它的收集就越少。因此，第 2 代对象是非常长寿命的对象。现在不是这样（请参阅[文档](https://docs.microsoft.com/en-us/dotnet/standard/garbage-collection/large-object-heap)）- LOH 对象在其整个生命周期内都是第 2 代对象。所以，不要急于为 LOH 对象添加变量 - 你已经迟到了 :)

即使这些对象很大，但对于 LOH 来说还不够大，您可能仍然不必担心，直到找到必须调查此问题的证据（内存占用和性能）。

**道德**
所以，我的答案应该是*有时利益存在[但可以忽略不计]。*

指定正确的范围首先是对您自己和您的队友的帮助，而不是花哨的表演技巧。*

# java - 我可以在对类的静态引用上多次调用 new 吗？

> ID：13922754
> 
> 赞同：-1
> 
> 时间：2012-12-17T21:48:02.153
> 
> 标签：java

```
class A {}

class B {
    static A someReference = null;

    void foo () {
        // does calling this function many times create new objects, or all objects will point to one memory.
        someReference = new A; 
    }
} 
```

不使引用静态意味着它将无法指向新的内存位置。？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T21:49:34.867

> // 是否多次调用该函数会创建新对象，否则所有对象都将指向一个内存。

调用`new A()`总是创建新对象。

当引用 ( `someReference`) 重新分配给新创建的对象时，旧对象可能有资格进行垃圾收集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T21:49:15.320

多次调用将创建每次`foo()`的新实例。`new A()``A`

然而，前一个实例有资格进行垃圾收集（因为`someReference`不再指向它），并且将在下一个垃圾收集周期中很快被删除。

# file-upload - blueimp Basic Plugin：不在 IE 中上传，所有版本

> ID：13922757
> 
> 赞同：1
> 
> 时间：2012-12-17T21:48:21.430
> 
> 标签：file-upload, blueimp

我在我的项目中使用 blueimp fileupload 基本插件。它在 Safari、Firefox、Chrome 中运行良好，但 Internet Explorer 9 及以下版本存在问题：

开始回调被调用，在开发人员工具的网络选项卡中，我看到正在执行 ajax 调用。但是该文件永远不会被上传（我也在服务器上检查过）并且调用最终以 408 请求超时结束。

关于可能是什么原因的任何提示？

这是我的相关代码部分：

```
<input class="input-file" id="fileupload" name="files[]" data-url="/app_dev.php/backend/ajax/upload/wish/1850cf918a43d42" type="file">

<script type="text/javascript" src="js/jquery/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="js/uploader/vendor/jquery.ui.widget.js"></script>
<script type="text/javascript" src="js/uploader/jquery.fileupload.js"></script>
<script type="text/javascript" src="js/uploader/jquery.iframe-transport.js"></script>

<script>
$(document).ready(function() {
    $('#fileupload').fileupload({
        dataType: 'json',
        dropZone: null,

        start: function (e, data){
            console.log('start'); //fires in all browsers = fine
        },

        progress: function (e, data){
            console.log('progress'); //fires in Safari, FF, Chrome = fine
        },

        done: function (e, data) {
            console.log('done'); //never getting here in IE cause file doesn't get uploaded.
        }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:01:18.067

问题已解决！

有两个问题。一个与本地网络设置有关。

二是实现内容类型协商的正确处理。有关详细信息，请参阅[https://github.com/blueimp/jQuery-File-Upload/wiki/Setup 。](https://github.com/blueimp/jQuery-File-Upload/wiki/Setup)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T20:27:02.440

只是我的 5 ¢：
我很难让它与漂亮的链接一起工作！以下转储完全是空的！

```
var_dump($_FILES);
var_dump($_POST);
var_dump($_GET); 
```

所以：

```
$('#fileupload').fileupload({
    url: 'http://code.dev/products/postUpload' // <--- remove trailing slash!!!
}); 
```

# windows - 如何在网络上退出睡眠模式，局域网唤醒？

> ID：13922758
> 
> 赞同：0
> 
> 时间：2012-12-17T21:48:35.740
> 
> 标签：windows, rdp, wake-on-lan

我有大约 4 年的计算机，装有 microsoft windows server 2008 r2 操作系统。它运行一个 web 和 rdp-server。如果我想远程连接到它，我希望这台计算机唤醒。我怎样才能做到这一点？我发现了一些关于局域网唤醒和魔术包的文章，但也许​​存在更灵活的方法，所以我可以从互联网唤醒我的服务器。希望得到你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:02:15.850

您可以通过两种途径，软件或硬件来做到这一点：

1.  软件 - 正如您所提到的，使用 Wake On Lan：

[SourceForge WOL](http://sourceforge.net/projects/aquilawol/)

1.  硬件 - 购买支持远程的 KVM（搜索 KVM over IP）。

该软件是免费的，如果您的网卡支持它就可以工作，硬件很昂贵......您的选择。

这有点不寻常，因为服务器通常不允许休眠。您总是可以进入电源管理并首先防止服务器进入睡眠状态。

# oop - OOP 约定。对象数组

> ID：13922761
> 
> 赞同：0
> 
> 时间：2012-12-17T21:48:40.577
> 
> 标签：oop, standards

我已经编码了一年，但我最近才在有关 OOP 的课程中​​被介绍和教授。

我早些时候发布了一个问题，有人说我的程序使用播放器类会好得多

我想知道使用对象数组是否符合标准约定？

所以我的程序中需要 10 名球员。可以拥有一个包含 10 个实例的 Class Player 数组吗？或者这很糟糕？

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:58:41.137

这取决于您计划如何使用这些对象。创建一个包含 10 个 Player 对象的数组当然没有问题。另一个选项，可能与您的程序相关，也可能不相关，可能是创建一个包含 10 个玩家实例的数组的附加类（也许称它为“团队”？）。如果您想定义与 10 个玩家相关的方法或成员，例如赢/输或类似性质的东西，这将是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:50:44.253

是的，这将是一个完全有效（并且非常普遍）的用法。

# java - 如何获取 XML 声明头？安卓

> ID：13922764
> 
> 赞同：1
> 
> 时间：2012-12-17T21:48:53.680
> 
> 标签：java, android

我正在为 android 编写一个 rss 阅读器应用程序，现在我需要在开始解析之前知道 xml 的编码是什么（windows-1251 或 utf-8）。这在 xml 声明标题中进行了描述，即`<?xml version="1.0" encoding="UTF-8"?>`。在解析之前如何获取此标头？我使用 sax 解析器的 android.sax 实现并将编码作为字符串参数传递给 InputStreamReader。我发现了一个相关的问题： [SAX Parser doesn't identify windows-1255 encoding](https://stackoverflow.com/questions/9931024/sax-parser-doesnt-recognize-windows-1255-encoding) - 但是解决方案是将 cp-1251 转换为 utf-8，这太麻烦且对资源的要求很高。我认为必须有更好的解决方案，因为我只需要知道来自 header 的编码值`<?xml version="1.0" encoding="UTF-8"?>`。但我无法从 xml 中获取此标头，解析器从`<rss>`标记开始。我应该如何得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:54:42.457

好吧，这个问题很明显:) 根据 Squonk 的评论，这是有效的代码：

```
byte[] data = new byte[50];     
            try{
            bs.mark(60);
            bs.read(data, 0, data.length);
            String value = new String(data,"UTF-8");
            if(value.toLowerCase().contains("utf-8"))
                return "UTF-8";
            else if(value.contains("1251"))
                return "windows-1251";
            } catch (IOException e) {
                Log.d("debug", "Exception: " + e);
                return "XML not found";
            } 
```

然后只需重置 bs (BufferedInputStream) 并在任何需要的字符集中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:54:37.930

我建议切换到 Android 官方支持的[xmlPullParser](http://www.xmlpull.org/)，编码支持问题应该会消失。

这是关于它的[Android文档](https://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)。

不要小看这一点，因为 SAX 解析器在 Android v3.0+ 中无法正常工作

# perl - 在字节级别读取 unicode 字符

> ID：13922766
> 
> 赞同：1
> 
> 时间：2012-12-17T21:48:59.593
> 
> 标签：perl, unicode, byte

假设我想检测 unicode 字符并使用`\u`符号对它们进行编码。如果我必须使用字节数组，是否可以遵循简单的规则来检测属于单个字符的字节组？

我指的是需要为仅 ASCII 接收器编码的 UTF-8 字节。目前，非 ASCII 可打印字符被剥离。`s/[^\x20-\x7e\r\n\t]//g`.

我想改进这个功能来写`\u0000`符号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:02:15.813

你需要有 Unicode 字符，所以从解码你的字节数组开始。

```
use Encode qw( decode );
my $decoded_text = decode("UTF-8", $encoded_text); 
```

只有这样，您才能转义 Unicode 字符。

```
( my $escaped_text = $decoded_text ) =~
   s/([^\x0A\x20-\x5B\x5D-\x7E])/sprintf("\\u%04X", ord($1))/eg; 
```

例如，

```
$ perl -CSDA -MEncode=decode -E'
   my $encoded_text = "\xC3\x89\x72\x69\x63\x20\xE2\x99\xA5\x20\x50\x65\x72\x6c";
   my $decoded_text = decode("UTF-8", $encoded_text);
   say $decoded_text;
   ( my $escaped_text = $decoded_text ) =~
      s/([^\x0A\x20-\x5B\x5D-\x7E])/sprintf("\\u%04X", ord($1))/eg;
   say $escaped_text;
'
Éric ♥ Perl
\u00C9ric \u2665 Perl 
```

# listview - 如何访问 Kendo UI 的 ListView 中的选定项目？

> ID：13922768
> 
> 赞同：6
> 
> 时间：2012-12-17T21:49:03.257
> 
> 标签：listview, kendo-ui

我喜欢这个控件，从视觉角度来看，它为我提供了我想要的东西（选择多个项目等），但我没有看到任何文档或教程解释如何访问包含所选项目的集合，甚至没有确定哪些项目被选中.

我提前感谢您对这样一个基本问题的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T22:47:44.047

您应该使用`select`获取选定节点列表的方法。

给定以下初始化：

```
var list = $("#list").kendoListView({
    dataSource: data,
    template  : "<li>${title}</li>",
    selectable: "multiple"
}).data("kendoListView"); 
```

您可以使用：

```
var selected = list.select();
console.log("selected", selected); 
```

检查有关`select` [此处的文档](http://docs.kendoui.com/api/web/listview#select)

# windows - Windbg - 分析虚拟字节

> ID：13922771
> 
> 赞同：1
> 
> 时间：2012-12-17T21:49:11.520
> 
> 标签：windows, windbg, production-environment

我有一个有趣的场景。该应用程序的虚拟字节值比我预期的要高。另一方面，私有字节具有合理的价值。

这是一个基于 Java 的应用程序，它还通过 JNI 将 .Net 组件加载到同一进程。这不是采用虚拟字节的 Java 堆，因为我通过 xmlx 参数对其进行了限制。

有没有办法可以使用 Windbg 分析虚拟字节的消耗？例如，如果代码打开了与另一个进程的共享内存 - 我可以看到吗？我可以总结所有这些共享内存段吗？

这是一个生产环境，所以我有点受限

谢谢萨尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:32:52.577

虚拟字节代表进程对虚拟地址空间的使用，不一定代表内存使用，甚至不代表虚拟内存使用。如果进程是 32 位，则不要担心这个统计数据，除非它是 1 GB 或更多的最佳部分，如果进程是 64 位，则不要担心完全停止。

Mark Russinovich 的博客文章[推动 Windows 的极限：虚拟内存](http://blogs.technet.com/b/markrussinovich/archive/2008/11/17/3155406.aspx)对此提供了更多详细信息。

您可能想要查看的统计数据是页面文件字节数。私有字节和工作集也可能很有趣。这些在[Windows Server 2003 Performance Counters Reference](http://technet.microsoft.com/en-us/library/cc776490%28v=ws.10%29.aspx)的 Technet 文档中的[Process Object](http://technet.microsoft.com/en-us/library/cc780836%28v=ws.10%29.aspx)下进行了描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:58:48.803

在用户模式调试会话中，您可以使用 !address 命令`!address -f:FileMap`或`!address -summary`

```
0:018> !address -summary

Failed to map Heaps (error 80004005)

--- Usage Summary ---------------- RgnCount ----------- Total Size -------- %ofBusy %ofTotal
Free                                    211      7ff`f38e3000 (   8.000 Tb)          100.00%
Image                                   577        0`05cec000 (  92.922 Mb)  46.68%    0.00%
MemoryMappedFile                         60        0`0375a000 (  55.352 Mb)  27.81%    0.00%
<unclassified>                          115        0`0289e000 (  40.617 Mb)  20.41%    0.00%
Stack                                    60        0`00a00000 (  10.000 Mb)   5.02%    0.00%
TEB                                      20        0`00028000 ( 160.000 kb)   0.08%    0.00%
PEB                                       1        0`00001000 (   4.000 kb)   0.00%    0.00%

--- Type Summary (for busy) ------ RgnCount ----------- Total Size -------- %ofBusy %ofTotal
MEM_IMAGE                               578        0`05ced000 (  92.926 Mb)  46.68%    0.00%
MEM_MAPPED                               60        0`0375a000 (  55.352 Mb)  27.81%    0.00%
MEM_PRIVATE                             195        0`032c6000 (  50.773 Mb)  25.51%    0.00%

--- State Summary ---------------- RgnCount ----------- Total Size -------- %ofBusy %ofTotal
MEM_FREE                                211      7ff`f38e3000 (   8.000 Tb)          100.00%
MEM_COMMIT                              782        0`08ae4000 ( 138.891 Mb)  69.78%    0.00%
MEM_RESERVE                              51        0`03c29000 (  60.160 Mb)  30.22%    0.00%

--- Protect Summary (for commit) - RgnCount ----------- Total Size -------- %ofBusy %ofTotal
PAGE_READONLY                           336        0`050ca000 (  80.789 Mb)  40.59%    0.00%
PAGE_EXECUTE_READ                       104        0`02785000 (  39.520 Mb)  19.85%    0.00%
PAGE_READWRITE                          262        0`010db000 (  16.855 Mb)   8.47%    0.00%
PAGE_WRITECOPY                           59        0`0017d000 (   1.488 Mb)   0.75%    0.00%
PAGE_READWRITE|PAGE_GUARD                20        0`0003c000 ( 240.000 kb)   0.12%    0.00%
PAGE_EXECUTE_READWRITE                    1        0`00001000 (   4.000 kb)   0.00%    0.00%

--- Largest Region by Usage ----------- Base Address -------- Region Size ----------
Free                                      0`ff8b5000      7fd`ed39b000 (   7.992 Tb)
Image                                   7fe`fe39a000        0`0089e000 (   8.617 Mb)
MemoryMappedFile                          0`007b1000        0`012df000 (  18.871 Mb)
<unclassified>                            0`7f0e0000        0`00f00000 (  15.000 Mb)
Stack                                     0`06740000        0`00079000 ( 484.000 kb)
TEB                                     7ff`fff94000        0`00002000 (   8.000 kb)
PEB                                     7ff`fffd9000        0`00001000 (   4.000 kb) 
```

# mysql - 插入符号 MySQL

> ID：13922775
> 
> 赞同：-2
> 
> 时间：2012-12-17T21:49:31.903
> 
> 标签：mysql

现在我想在我的 MySQL 表中插入符号我花了几个小时在网上寻找答案，但我可能是愚蠢的，也可能不是因为我找不到我想要的

现在我使用命令行将我的数据插入数据库如何将“@;#,%,$,&,',...”之类的符号插入表中表排序规则设置为 UTF8_unicode_CI

我使用的命令

```
INSERT INTO table (name) VALUES ( "Assassin's Creed® 3" ) 
```

现在它显示为

刺客信条┬о 3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:25:32.550

您的查询是正确的，只有您必须使用的方式显示它 `htmlentities()`或`htmlspecialchars()`

> 第一个函数在所有方面都与 htmlspecialchars() 相同，除了 htmlentities() 之外，所有具有 HTML 字符实体等效项的字符都被转换为这些实体。

前任： `echo htmlspecialchars($row['name']) ;`

*   请务必将值传递给`mysql`by `mysql_real_escape_string()`以避免任何 SQL 注入问题。

# perl - 识别普通文件夹和“.”/“..”文件夹的区别

> ID：13922778
> 
> 赞同：2
> 
> 时间：2012-12-17T21:49:47.390
> 
> 标签：perl, file, directory

我正在编写一个 Perl 脚本来自动从文件夹中复制 PDF。

用户无法访问他们无权访问的文件夹，因此他们不会意外地访问他们不应该访问的任何信息。

我有一个粗略的模型，除了一个错误外，它可以工作：它一直看到`.`and`..`文件夹并打开它们进入无限循环。

检查文件的以下条件语句是 PDF，然后将传递给 my `copyPDF`，后者检查异常然后复制文件；否则，如果文件夹扫描该内容并重复，它会通过并尝试作为文件夹打开。

我尝试了多种方法来忽略`.`and`..` 但它总是导致忽略所有其他子文件夹。有人有工作吗？

```
if ($file =~ /\.pdf$/i) {
  print "$file is a pdf\n";
  $fileLocation = "$directoryName/$file";
  copyPDF("$fileLocation", "$file");
}
elsif ($file == '.') {
  #print "argh\n";
}
else {
  $openFolder = "$directory/$file";
  print "*$openFolder";
  openNextDirectory("$openFolder");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T21:57:55.907

一直用`use strict; use warnings;`！！！

```
$file == '.' 
```

生产

```
Argument "." isn't numeric in numeric eq (==) 
```

因为您要求 Perl 比较两个数字。你应该使用

```
$file eq '.' 
```

[`perldoc perlop`](http://perldoc.perl.org/perlop.html#Equality-Operators)有关 perl 运算符的更多信息，请参阅 参考资料。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T22:15:17.340

这个老问题有一些很好的答案可以解决这个问题和类似问题：

[如何递归复制目录并在 Perl 中过滤文件名？](https://stackoverflow.com/questions/227613/how-can-i-copy-a-directory-recursively-and-filter-filenames-in-perl)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-17T22:09:17.113

使用`File::Find`模块

```
use File::Find;
use File::Copy;

my $directory = 'c:\my\pdf\directory';
find(\&pdfcopy, $directory);

sub pdfcopy() {
    my $newdirectory = 'c:\some\new\dir';
    return if ($File::Find::name !~ /\.pdf$/i);
    copy($File::Find::name, $newdirectory) or 
    die "File $File::Find::name cannot be copied: !";
} 
```

# sql - 在 Access 2007 中选择日期跨年的记录

> ID：13922789
> 
> 赞同：1
> 
> 时间：2012-12-17T21:50:27.793
> 
> 标签：sql, date, ms-access-2007

我将 Access 2007 数据库中的记录保存到一个简单的 2 列表中，并使用以下查询从中生成报告：

```
sql = "SELECT 
        OrderDate AS `Order Date and Time`, 
        Items AS `Ordered Items` 
    FROM Orders 
    WHERE Format(Orders.OrderDate,'mm/dd/yyyy')  
       >= Format(#" + startDate.Value.Date + "#,'mm/dd/yyyy') 
      AND Format(Orders.OrderDate,'mm/dd/yyyy')
       <= Format(#" + endDate.Value.Date + "#,'mm/dd/yyyy')
    ORDER BY OrderDate" 
```

`startDate`并且`endDate`是 VB.2010 中的 datePicker 对象。

`startDate`当和`endDate`在同一年内时，将按预期生成报告。因此，例如，如果我检查 11 月 18 日至 12 月 27 日之间的订单，我会得到预期的结果。但是如果我去，比如从 2​​012 年 11 月 1 日到 2013 年 1 月 8 日，它不会显示任何记录，即使所有这些月份（11 月、12 月和 1 月）都有记录。

有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T21:53:08.420

在查询中使用实际日期，而不是格式化日期。就像是：

```
SELECT OrderDate, Items 
FROM Orders 
WHERE Orders.OrderDate BETWEEN #startDate.Value.Date# AND #endDate.Value.Date# 
ORDER BY OrderDate; 
```

[http://www.databasedev.co.uk/sql-between.html](http://www.databasedev.co.uk/sql-between.html)

或者，如果您想保留原始查询，请尝试更改日期的格式，以使年份最重要，然后是月份和日期，因此：

```
SELECT OrderDate AS `Order Date and Time`, Items AS `Ordered Items` 
FROM Orders 
WHERE Format(Orders.OrderDate,'yyyy/mm/dd') >= Format(#" + startDate.Value.Date + "#,'yyyy/mm/dd') 
AND Format(Orders.OrderDate,'yyyy/mm/dd') <= Format(#" + endDate.Value.Date + "#,'yyyy/mm/dd') 
ORDER BY OrderDate; 
```

# asp.net - 安装 .NET 4.5 后是否需要使用 IIS 7 重新注册 .NET 4.0？

> ID：13922795
> 
> 赞同：2
> 
> 时间：2012-12-17T21:50:55.570
> 
> 标签：asp.net, iis

我在 Windows Server 2008 上运行 IIS 7.0。它以前安装了 .NET 4.0 以及 ASP.NET v4.0 和 ASP.NET v4.0 Classic 的应用程序池。

我现在已经安装了 .NET 4.5 (v4.0.30319)，并且我知道 .NET 4.5 是“就地升级”，但我是否需要向 IIS 重新注册 .NET 4.0？

例如`C:\Windows\Microsoft.NET\Framework\v4.0.30319>aspnet_regiis.exe -ir`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T21:54:31.927

不，您不需要重新注册。我最近安装了 .NET 4.5 并且没有更改任何 IIS 设置。

# plot - 动画点沿使用 ParametricPlot3D 获得的特定解的图的移动

> ID：13922799
> 
> 赞同：5
> 
> 时间：2012-12-17T21:51:11.390
> 
> 标签：plot, wolfram-mathematica, differential-equations

我们有系统：

```
x'[t] == x[t] - 5 y[t] + z[t]
y'[t] == 3 x[t] - 3 y[t] - 3 z[t]
z'[t] == -2 x[t] + 10 y[t] + 4 z[t] 
```

和初始条件：

```
x[0] == .01
y[0] == 3
z[0] == 0 
```

我制作了具体的情节：

```
eqn = {x'[t] == x[t] - 5 y[t] + z[t],  y'[t] == 3 x[t] - 3 y[t] - 3 z[t], 
z'[t] == -2 x[t] + 10 y[t] + 4 z[t]}; 

sol = NDSolve[{eqn, x[0] == .01, y[0] == 3, z[0] == 0}, {x[t], y[t], 
z[t]}, {t, -5, 5}]

{xde[t_], yde[t_], zde[t_]} = {x[t], y[t], z[t]} /. Flatten[sol]

 ParametricPlot3D[{xde[t], yde[t], zde[t]}, {t, 0, 10}, 
 AxesLabel -> {"x", "y", "z"}, 
 PlotRange -> {{-15, 15}, {-15, 15}, {-15, 15}}] 
```

我知道如何选择一个随机点来绘制整个轨迹，但我找不到一种方法来动画沿着绘制的轨迹移动的点。在此特定示例中，该点应位于 t == 0 并一直移动直到 t == 2。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T22:08:07.547

这在 Mathematica 中非常简单 - 使用交互式界面：

```
Animate[Show[ParametricPlot3D[{xde[t], yde[t], zde[t]}, {t, 0, 10}, 
   AxesLabel -> {"x", "y", "z"}, 
   PlotRange -> {{-5, 15}, {-5, 5}, {-5, 15}}],
  Graphics3D[{Red, PointSize[.05], Point[{xde[T], yde[T], zde[T]}]}]], {T, 0, 2}] 
```

![在此处输入图像描述](../Images/8b2e7f01da2effd31b00f39cd7c52b34.png)

# android - Android 相机应用程序：需要在设置 previewCallback 之前完全初始化预览表面？

> ID：13922804
> 
> 赞同：2
> 
> 时间：2012-12-17T21:51:31.497
> 
> 标签：android, android-camera

我对 Android 中的 Camera previewCallback 有疑问。我的应用程序有 2 个主要部分，打开相机并配置其参数的 Activity，然后是用于显示预览的 SurfaceView 的子类。我正在测试 4.0.4

如果 Activity 实现 Camera.PreviewCallback 并且我执行以下操作：

```
Public Class PreviewFrameActivity extends Activity implements Camera.PreviewCallback {<br />
     @Override
     public void onCreate(Bundle savedInstanceState) {
       // setup layout and create SurfaceView object before getting here
       Camera mCamera = Camera.open();
       mCamera.setPreviewCallback(this);
     } 

     public void onPreviewFrame(byte[] data, Camera camera) {
       Log.d(TAG, "Starting frame processing...");
     }
 } 
```

previewCallback 从来没有真正被称为这样做。但是，如果我让 SurfaceView 实现 PreviewCallback 并将其设置在相机对象上作为 surfaceCreated 的一部分，那么回调会突然开始工作。这让我相信，即使文档说 setPreviewCallback 可以随时调用，但事实并非如此。与 startPreview() 非常相似，似乎只有在拥有有效的预览 Surface 之后才能调用 setPreviewFormat（这就是为什么当我将代码移动到创建 Surface 后启动预览的块时它开始工作的原因）。有人可以为我确认吗？

# python - python 为什么在调用 my_string.lower() 时不调用 str 或 repr 或 unicode

> ID：13922807
> 
> 赞同：1
> 
> 时间：2012-12-17T21:51:52.943
> 
> 标签：python

给定这堂课

```
class Stringy(unicode):
    def __init__(self,something):
        self.something = something
    def __repr__(self):
        return "Stringy(%s)"%repr(self.something)
    def __str__(self):
        return "str(%s)"%repr(self.something)
    def __unicode__(self):
        return "unicode(%s)"%repr(self.something) 
```

运行以下

```
s = Stringy("Hello")
print s.lower()  #prints "hello" !!! Why?
print s  # correctly prints str('Hello')
print unicode(s) #correctly prints unicode('Hello')
print [s]        #correctly prints Stringy('Hello')
print s.upper()  #prints "HELLO"  !!! Why? 
```

为什么`upper`// `lower`etc 不触发`__str__`方法？

引擎盖下不应该 `unicode(self).lower()`发生类似的事情吗？

还是`str(self).lower()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:53:56.517

`s.lower`正在调用`unicode.lower()`，所以你得到一个新的不同的 unicode 对象

您需要有`lower()`返回`Stringy`对象的方法

例如。

```
def lower(self):
    return Stringy(unicode.lower(self)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:53:50.693

因为字符串是不可变的，调用`upper()`它会返回一个*新*字符串。您的新字符串将是一个实际`unicode`实例，而不是`Stringy`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T21:53:50.113

`print`不会触发，`Stringy.__str__()`因为结果`s.lower()`是一个全新的类型对象`unicode`：

```
In [3]: type(Stringy('').lower())
Out[3]: unicode 
```

# java - 实现 Map 的保存（或提交）和回滚方法

> ID：13922809
> 
> 赞同：1
> 
> 时间：2012-12-17T21:52:01.647
> 
> 标签：java, collections, commit, object-persistence

我正在寻找一种快速便捷的方法来将 save() 和 rollback() 添加到标准 Map。假设我有一个表类的对象“表”，它又具有一个名为“行”的私有映射。我想要实现的是一种*快速*且没有内存浪费的 Row 方法，可以执行以下操作：

```
row = new Row();
table.addRow(row).setValue("col1", "foo").setValue("col2", "bar").save();
row.setValue("col2", "beer");
System.out.println(table.getRows()); // 1\. col1=foo, col2=bar

row.save();
System.out.println(table.getRows()); // 1\. col1=foo, col2=beer 
```

实际上，我的设计很简单：当调用 addRow() 时，我将行放在地图中；没有缓冲区，没有临时元素；我只是将整个 Row 实例传递给 rows 集合。但我需要一种快速的方法，并且（如果可能的话）避免重复行。

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T22:02:02.077

这听起来太像“我想在内存中拥有新旧值，但我不想在内存中拥有新旧值”。

选项：

a）所有`added`元素的地图，当保存时`putAll`。

b) 你的地图，而不是`<ClassKey, ClassValue>`，持有`<ClassKey, ClassValue2>`。`Value2`拥有 的两项`ClassValue`，新的和旧的实例。在`save`，您将新的（如果有的话）传递给旧的。仅当您更改每个“事务”中的大部分条目时，它才会有用。

没有提到删除元素的问题，它会给你带来更多的乐趣。使用选项 2，您可以将布尔值设置为`Value2`，使用选项 a 您将需要更多解决方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T21:56:55.527

> 我想要实现的是一种快速且没有内存浪费的 Row 方法，可以执行以下操作：

你会浪费内存，因为你需要在某个地方保持“回滚”，以防它在途中失败。这就是数据库处理这些类型的事情的方式。

现在要获得您想要的功能，您需要实现自己的自定义事务逻辑，这将允许您正确回滚/保留对地图的更改。现在，在此交易中，您需要跟踪交易期间发生的所有事情。这是因为您将临时写入原始映射，而事务处理，随后您将需要能够从失败的持久/更新中恢复。

为避免行重复，HashMap 已经将您从该问题中解救出来。假设您正确实现了一个散列函数，该函数在两个对象生成相同代码时正确报告，因此在散列方面“潜在”而不是绝对相等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-31T05:00:37.767

*   在自定义 Map 类中保留两个地图字段， `originalMap`并且`temporaryMap`.
*   读操作委托给`originalMap`，写操作委托给`temporaryMap`。
*   `rollback()`浅拷贝`originalMap`到`temporaryMap`，`commit()`反之亦然。由于从不克隆键和值，因此只保留引用并且不会“浪费”内存

* * *

```
package com.example;

import java.util.Collection;
import java.util.HashMap;
import java.util.Map;
import java.util.Set;
import lombok.NonNull;
import lombok.ToString;

@ToString
public class TransactionalMap<K, V> implements Map<K, V> {

  private Map<K, V> originalMap;
  private Map<K, V> temporaryMap;

  public TransactionalMap() {
    this(new HashMap<>());
  }

  public TransactionalMap(@NonNull Map<K, V> impl) {
    if (impl instanceof TransactionalMap) {
      throw new IllegalArgumentException("Must provide valid implementation instance");
    }
    this.originalMap = new HashMap<>(impl);
    this.temporaryMap = new HashMap<>(originalMap);
  }

  @Override
  public int size() {
    return originalMap.size();
  }

  @Override
  public boolean isEmpty() {
    return originalMap.isEmpty();
  }

  @Override
  public boolean containsKey(Object key) {
    return originalMap.containsKey(key);
  }

  @Override
  public boolean containsValue(Object value) {
    return originalMap.containsValue(value);
  }

  @Override
  public V get(Object key) {
    return originalMap.get(key);
  }

  @Override
  public V put(K key, V value) {
    return temporaryMap.put(key, value);
  }

  @Override
  public V remove(Object key) {
    return temporaryMap.remove(key);
  }

  @Override
  public void putAll(Map<? extends K, ? extends V> m) {
    temporaryMap.putAll(m);
  }

  @Override
  public void clear() {
    temporaryMap.clear();
  }

  @Override
  public Set<K> keySet() {
    return originalMap.keySet();
  }

  @Override
  public Collection<V> values() {
    return originalMap.values();
  }

  @Override
  public Set<Entry<K, V>> entrySet() {
    return originalMap.entrySet();
  }

  private void sync(Map<K, V> src, Map<K, V> tgt) {
    tgt.putAll(src);
    tgt.forEach((k, v) -> {
      if (!src.containsKey(k)) tgt.remove(k);
    });
  }

  public void commit() {
    sync(temporaryMap, originalMap);
  }

  public void rollback() {
    sync(originalMap, temporaryMap);
  }

} 
```

使用[lombok](https://github.com/projectlombok/lombok)生成样板代码

# iphone - Object 在对象 c 类中需要说明符或限定符

> ID：13922810
> 
> 赞同：-2
> 
> 时间：2012-12-17T21:52:04.500
> 
> 标签：iphone, objective-c, xcode, cocos2d-iphone

我正在构建类是 CCSprite 的子类：

问题是我不断收到“类型名称需要说明符或限定符”。

我在我得到错误的地方注释了代码。我不确定我做错了什么。

```
int tileSize = 80;
Boolean moveable = true;
id moveUp,moveRight,moveDown,moveLeft;

@interface Player : CCSprite {

//On these lines. 
moveUp = [CCMoveTo actionWithDuration:2 position:ccp(0, 0 - tileSize)];
moveDown = [CCMoveTo actionWithDuration:2 position:ccp(0,0+tileSize)];
moveRight = [CCMoveTo actionWithDuration:2 position:ccp(0+tileSize,0)];
moveLeft = [CCMoveTo actionWithDuration:2 position:ccp(0-tileSize,0)];

}

-(void)move;

@end

@implementation Player{

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T21:54:20.197

你不能像那样把代码放在你的界面中——它需要放在一个方法或函数中。唯一应该包含的内容是属性列表。

# php - 如何在 HTML 图像标签中使用来自外部文件的 PHP 函数？

> ID：13922814
> 
> 赞同：0
> 
> 时间：2012-12-17T21:52:12.777
> 
> 标签：php, html

我有一个外部 PHP 文件，可以调整图像大小（image.php）。每次使用“图像”标签时，我都需要调用它，以便它可以填写“src”。我将如何告诉 HTML 文件使用外部 PHP 页面，以及在处理“图像”“src”标签时如何让它使用它？

这就是我用来尝试显示图像的东西。

我需要在我的“头部”部分包含一些内容吗？

谢谢您的帮助！

```
<li><a href= "/intPics//1.jpg"> <img src="<?php loadImage('/intPics//1.jpg', 300,300) ?>"<div>1.jpg</div></a></li> 
```

这是PHP文件

```
<?php

   function imageResizer($url, $width, $height) {

                header('Content-type: image/jpeg');

                list($width_orig, $height_orig) = getimagesize($url);

                $ratio_orig = $width_orig/$height_orig;

                if ($width/$height > $ratio_orig) {

                  $width = $height*$ratio_orig;

                } else {

                  $height = $width/$ratio_orig;

                }

                // This resamples the image

                $image_p = imagecreatetruecolor($width, $height);

                $image = imagecreatefromjpeg($url);

                imagecopyresampled($image_p, $image, 0, 0, 0, 0, $width, $height,     $width_orig, $height_orig);

                // Output the image

                imagejpeg($image_p, null, 100);

        }

        /    /works with both POST and GET

        $method = $_SERVER['REQUEST_METHOD'];

        if ($method == 'GET') {

                imageResize($_GET['url'], $_GET['w'], $_GET['h']);

         } elseif ($method == 'POST') {

            imageResize($_POST['url'], $_POST['w'], $_POST['h']);

         }

      // makes the process simpler

        function loadImage($url, $width, $height){

         echo 'image.php?url=', urlencode($url) ,

         '&w=',$width,

         '&h=',$height;

        }

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:56:58.360

我不知道我是否正确理解了您的问题，但我会尝试回答：

您可以直接从`src`图像标签中调用 php 脚本

```
<img src="image.php" /> 
```

在您的 php 文件中，您可以将内容类型设置为图像格式

```
<?php header('Content-Type:image/jpeg'); ?> 
```

这样 php 脚本会返回一个图像。您甚至可以传递参数，例如传递`image.php?width=200&height=100`给 php 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:54:29.803

我不知道你的 php 文件中有什么，但是

```
<?php require_once('path/image.php') ?> 
```

应该导入它，然后您只需使用函数并通过 php 脚本填充 src 吗？

编辑：如果您向我提供更多信息，例如代码，我可以帮助您了解有关详细信息的更多问题。

# php - onChange 触发后未到达脚本

> ID：13922815
> 
> 赞同：-1
> 
> 时间：2012-12-17T21:52:16.663
> 
> 标签：php, javascript, ajax

**HTML 代码：**

```
<form>
  <tr><td align="center">
    <p><select size="1" id="breed_list" name="D1" onChange="editBreed(this.value);"> 
      <option>Select Cattle Breed</option>
      <?php while(list($id, $breed)=mysql_fetch_row($result1)) {
        echo "
        <option value=\"".$id."\">".$breed."</option>";
      } ?>
      </select></p>
    </td></tr>
</form> 
```

**Javascript代码：**

```
<script type="text/javascript">
function editBreed(str){
    alert("Made it to Edit Breed"+ str);
    if (str=="" || str=="Select Cattle Breed") {
        document.getElementById("animal_data").innerHTML="";
        return;
    }

    if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    } else { // code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

     xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            document.getElementById("animal_data").innerHTML=xmlhttp.responseText;
        }
    }

    xmlhttp.open("GET","editbreed.php?d="+str+,true);
    xmlhttp.send();
}
</script> 
```

如果我将 select 修改为 read `onChange="alert(this.value);">`，它会显示正确的记录，尽管由于某种原因它不会进入该函数并向我显示那里的警报。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:58:19.107

在函数的倒数第二行，有一个语法错误导致函数根本无法运行。

```
xmlhttp.open("GET","editbreed.php?d="+str+,true); 
```

删除`+`之后`str`

```
xmlhttp.open("GET","editbreed.php?d="+str,true); 
```

# php - 谷歌分析特定帐户的凭据无效

> ID：13922828
> 
> 赞同：0
> 
> 时间：2012-12-17T21:53:03.863
> 
> 标签：php, google-analytics, oauth-2.0, google-analytics-api

嗨，我正在使用不同的帐户进行谷歌分析并返回错误：

```
GDataauthErrorAuthorizationInvalid Credentials 
```

虽然我以前的帐户工作正常。可能是因为我在注册过程中遗漏了一些事情，谁能给我一个详细的注册步骤，以便使用 api_key for google analytics v2.4 为 oauth 2.0 工作

谢谢你

```
//returns session token for multiple calls to API
function get_session_token($onetimetoken) {
    $output = call_api($onetimetoken, "https://www.google.com/accounts/AuthSubSessionToken");

    if(preg_match("/Token=(.*)/", $output, $matches)) {
        $sessionToken = $matches[1];
    } else {
        echo "Error authenticating with Google.";
        exit;
    }

    return $sessionToken;
}

//gets the data
function call_api($sessionToken,$url){
    $curl = curl_init($url);

    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);  
    if ($_SESSION['authSub']==true){
        $curlheader[0] = sprintf("Authorization: AuthSub token=\"%s\"/n", $sessionToken);
    } else {
        $curlheader[0] = "Authorization: GoogleLogin auth=" . $sessionToken;
    }
    curl_setopt($curl, CURLOPT_HTTPHEADER, $curlheader);

    $response = curl_exec($curl);
    curl_close($curl);

    return $response;       
}

$requrlvisits = sprintf("https://www.googleapis.com/analytics/v2.4/data?ids=ga:%s&dimensions=ga:date&metrics=ga:visits,ga:pageviews,ga:bounces,ga:timeOnSite&start-date=%s&end-date=%s&sort=ga:date&key=%s",$get_profid[9],$date1,$date2,$api_key);
                            // echo $requrlvisits;

                            $visitsxml = call_api($_SESSION['sessionToken'],$requrlvisits);             
                            $visits = parse_data($visitsxml);

                            print_r($visitsxml); 
```

# objective-c - 核心情节符号悬停/点击样式更改

> ID：13922829
> 
> 赞同：2
> 
> 时间：2012-12-17T21:53:06.447
> 
> 标签：objective-c, ios, core-plot

我想在被点击的符号上创建悬停/点击效果，这可能吗？无论如何都找不到任何文件表明它是？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:19:53.317

您可以使用此委托方法并添加注释，

```
- (void)scatterPlot:(CPTScatterPlot *)plot plotSymbolWasSelectedAtRecordIndex:(NSUInteger)index {  
} 
```

在此委托中创建注释并添加到图形。

例如：-

```
 CPTLayerAnnotation *annot = [[CPTLayerAnnotation alloc]initWithAnchorLayer:graph];
    CPTBorderedLayer * logoLayer = [[(CPTBorderedLayer *) [CPTBorderedLayer alloc] initWithFrame:CGRectMake(10,10,100,50)] autorelease]; 
    CPTFill *fillImage = [CPTFill fillWithImage:[CPTImage imageForPNGFile:@"whatEver!"]]; 
    logoLayer.fill = fillImage; 
    annot.contentLayer = logoLayer; 
    annot.rectAnchor=CPTRectAnchorTop;
    [graph addAnnotation:annot]; 
```

检查[此以获取更多详细信息](https://stackoverflow.com/questions/7664782/using-cptannotation-in-coreplot-dateplot-ios)。还要[检查这个。](https://groups.google.com/forum/?fromgroups=#!searchin/coreplot-discuss/Trying$20to$20add$20annotation$20to$20CPTestApp-iPad$20/coreplot-discuss/qZkVkQ0h8dE/hAq8Y00GHj0J)示例代码可能在他们的演示应用程序中。

实现`symbolForScatterPlot:recordIndex:`在每个点自定义绘图符号的方法。如果您不希望在给定索引处绘制符号，则返回 nil。一旦用户点击并调用了上述委托，您可能可以调用`reloadData`plot 并在此处返回突出显示的 plotsymbols。检查[这个。](https://groups.google.com/forum/?fromgroups=#!topic/coreplot-discuss/qbmXyK5zjks)

# python - 如何跟踪由 Python 中的循环创建的多个并发子进程

> ID：13922830
> 
> 赞同：0
> 
> 时间：2012-12-17T21:53:05.713
> 
> 标签：python, subprocess, infinite-loop, batch-processing

我已经编写了一个 Python 脚本，用于使用 GDAL 开源库和该库提供的命令行实用程序来平铺图像。首先，我读取了一个输入数据集，它告诉我每个图块范围。然后，我遍历图块并启动一个子进程来调用 gdalwarp，以便将输入图像剪辑到循环中的当前图块。

我不使用 Popen.wait() ，因为这会阻止瓷砖被同时处理，但我确实想跟踪子进程返回的任何消息。此外，一旦创建了特定的图块，我需要使用 gdalinfo 计算新文件的统计信息，这需要另一个子进程。

这是代码：

```
processing = {}
for tile in tileNums:
    subp = subprocess.Popen(['gdalwarp', '-ot', 'Int16', '-r', 'cubic', '-of', 'HFA', '-cutline', tileIndexShp, '-cl', os.path.splitext(os.path.basename(tileIndexShp))[0], '-cwhere', "%s = '%s'" % (tileNumField, tile), '-crop_to_cutline', os.path.join(inputTileDir, 'mosaic_Proj.vrt'), os.path.join(outputTileDir, "Tile_%s.img" % regex.sub('_', tile))], stdout=subprocess.PIPE)
    processing[tile] = [subp]

while processing:
    for tile, subps in processing.items():
        for idx, subp in enumerate(subps):
            if subp == None: continue
            poll = subp.poll()
            if poll == None: continue
            elif poll != 0:
                subps[idx] = None
                print tile, "%s Unsuccessful" % ("Retile" if idx == 0 else "Statistics")
            else:
                subps[idx] = None
                print tile, "%s Succeeded" % ("Retile" if idx == 0 else "Statistics")
                if subps == [None, None]:
                    del processing[tile]
                    continue
                subps.append(subprocess.Popen(['gdalinfo', '-stats', os.path.join(outputTileDir, "Tile_%s.img" % regex.sub('_',tile))], stdout=subprocess.PIPE)) 
```

在大多数情况下，这对我有用，但我看到的一个问题是，当它到达最后一个图块时，它似乎创建了一个无限循环。我知道这不是最好的方法，但我对子流程模块很陌生，我基本上只是把它放在一起尝试让它工作。

谁能推荐一种更好的方法来遍历图块列表，为每个可以同时处理的图块生成一个子进程，并在每个图块的第一个子进程完成时生成第二个子进程？

**更新：** 感谢到目前为止的所有建议。我尝试重构上面的代码以利用多处理模块和池。

这是新代码：

```
def ProcessTile(tile):

    tileName = os.path.join(outputTileDir, "Tile_%s.img" % regex.sub('_', tile))

    warp = subprocess.Popen(['gdalwarp', '-ot', 'Int16', '-r', 'cubic', '-of', 'HFA', '-cutline', tileIndexShp, '-cl', os.path.splitext(os.path.basename(tileIndexShp))[0], '-cwhere', "%s = '%s'" % (tileNumField, tile), '-crop_to_cutline', os.path.join(inputTileDir, 'mosaic_Proj.vrt'), tileName], stdout=subprocess.PIPE)
    warpMsg = tile, "Retile %s" % "Successful" if warp.wait() == 0 else "Unsuccessful"

    info = subprocess.Popen(['gdalinfo', '-stats', tileName], stdout=subprocess.PIPE)
    statsMsg = tile, "Statistics %s" % "Successful" if info.wait() == 0 else "Unsuccessful"

    return warpMsg, statsMsg

print "Retiling..."
pool = multiprocessing.Pool()
for warpMsg, statsMsg in pool.imap_unordered(ProcessTile, tileNums): print "%s\n%s" % (warpMsg, statsMsg) 
```

这给我带来了一些重大问题。首先，我最终创建了许多新流程。大约一半是 python.exe，另一半是另一个 gdal 实用程序，如果它已经在另一个平铺方案 (gdalbuildvrt.exe) 中平铺，我在上面的代码之前调用它来镶嵌传入的图像。在正在创建的所有 python.exe 和 gdalbuildvrt.exe 进程之间，大约 25% 的 CPU（超线程时具有 8 个内核的 Intel I7）和 99% 的 16gb RAM 正在使用中，计算机完全挂起。我什至无法杀死任务管理器中的进程或通过带有 taskkill 的命令行。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:00:00.840

[使用 python多处理](http://docs.python.org/2/library/multiprocessing.html)模块创建进程[池](http://docs.python.org/2/library/multiprocessing.html#using-a-pool-of-workers)，而不是生成和管理单个子进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:03:26.373

我还没有测试过，但它应该可以工作：

```
import Queue

from threading import Thread

class Consumer(Thread):
    def __init__(self, queue=None):
        super(Consumer, self).__init__()

        self.daemon = True
        self.queue = queue

    def run(self):
        while True:
            task = self.queue.get()

            # Spawn your process and .wait() for it to finish.

            self.queue.task_done()

if __name__ == '__main__':
     queue = Queue.Queue()

     for task in get_tasks():
         queue.put(task)

     # You spawn 20 worker threads to process your queue nonstop
     for i in range(20):
         consumer = Consumer(queue)
         consumer.start()

     queue.join() 
```

基本上，你有一个队列，里面装满了你需要完成的任务。然后，您只需生成 20 个工作线程来不断地从队列中拉出新任务并同时处理它们。

# c# - 将 Java 日期字符串转换为 C# 日期时间

> ID：13922833
> 
> 赞同：2
> 
> 时间：2012-12-17T21:53:14.613
> 
> 标签：c#, java, datetime

> **可能重复：**
> [使用 PST/CEST/UTC/等形式的时区解析 DateTime](https://stackoverflow.com/questions/241789/parse-datetime-with-timezone-of-form-pst-cest-utc-etc)

好的，我在 Java 中有以下代码，可以将我的 Date 对象转换为 String：

```
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss zzz");
String str = dateFormat.format(new Date());
// outputs: 2012-12-17 15:44:57 CST 
```

我通过线路将该字符串发送到用 C# 编写的 WebService。那么，考虑到以下不起作用，我将如何将该字符串解析回有效的 DateTime，因为C# 中的**zzz**是不同的：

```
DateTime.ParseExact(parts[2], "yyyy-MM-dd HH:mm:ss zzz", CultureInfo.InvariantCulture.DateTimeFormat); 
```

在任何人建议之前 - 我知道我可以使用 UTC 时间，但我需要这样做。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:55:27.233

`CST`不是有效的 .NET 时区标识符。

在 .NET 中，这些都是数字偏移量 -`+0700`等`-0500`...

如果您希望 .NET 对其进行解析，则需要输出一个数字时区偏移量。

我建议`yyyy-MM-dd HH:mm:ss Z`在 Java 中使用，可以在[这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)看到。

另一种方法是转换`CST`为`-0600`using `string.Replace`，但这既不可扩展，也可能会因命名时区的模糊性而崩溃（`CST`可能意味着不同的时区，具体取决于您所在的位置）。

# javascript - 使用 HTML/JavaScript 获取 iPhone 设备详细信息

> ID：13922835
> 
> 赞同：0
> 
> 时间：2012-12-17T21:53:24.673
> 
> 标签：javascript, iphone, html

> **可能重复：**
> [在 Javascript 中检测特定的 iPhone/iPod touch 型号](https://stackoverflow.com/questions/3093899/detect-the-specific-iphone-ipod-touch-model-in-javascript)

我想使用 HTML/JavaScript 获取 Apple 设备型号名称/编号，例如 iPhone 4s(A1387) 或 iPhone 5。我尝试使用提供类似信息的用户代理

Mozilla/5.0 (iPhone; U; CPU like Mac OS X; en) AppleWebKit/420+ (KHTML, like Gecko) Version/3.0 Mobile/1A543 Safari/419.3

它没有指定型号或名称。只说是iPhone。

有没有办法使用 HTML 或 JavaScript 获取 Apple 设备型号名称/编号。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:01:46.903

你可以使用类似[http://www.handsetdetection.com](http://www.handsetdetection.com)

编辑：

[在 SO 上阅读这篇文章](https://stackoverflow.com/questions/8309998/how-to-determine-which-iphone-version-the-javascript-code-runs-on)可能是最简单的解决方案

# android-billing - 如何在应用计费交易中找到相关的账户信息

> ID：13922839
> 
> 赞同：1
> 
> 时间：2012-12-17T21:53:56.307
> 
> 标签：android-billing

Google 文档指定应用内结算交易与设备上设置为主的帐户相关联。如果用户在他的手机中注册了多个谷歌账户，我们如何才能找到交易是通过哪个账户进行的。我还研究了这个链接：[How to get the Android device's primary e-mail address](https://stackoverflow.com/questions/2112965/how-to-get-the-android-devices-primary-e-mail-address)

# excel - 如何使图表填充特定范围？另外，如何使用 VBA 更改图表中标记的大小？

> ID：13922849
> 
> 赞同：0
> 
> 时间：2012-12-17T21:54:40.633
> 
> 标签：excel, excel-2010, vba

如何使图表填充特定范围？不久前我发现了如何使用 VBA 来做到这一点，但我终生无法找到如何再次做到这一点。我想要一个图表来填充一个特定的范围，比如 F1 到 K8。这样，如果左侧的其他列由于用户输入而发生变化，则图形仍保持在该范围内，从而使一切看起来都不错。

我的第二个问题是，如何使用 VBA 更改 excel 图表上标记的大小？我正在绘制数千个数据点，默认标记是巨大的菱形，所以图表看起来很荒谬。这条线就是这么粗的东西。

还有一个额外的奖励问题！我正在使用 VBA 制作整个图表。我正在制作两个系列。但是，当插入这两个系列时，它会添加第三个系列，其中没有数据点。如果它没有出现在传说中，那也不会令人讨厌。如何删除系列？

谢谢！这是相关的代码。Counter 和 NewTracker 是基于用户输入的变量。对于我正在使用的数据，我相信 Counter = 13 和 NewTracker = 1202，但根据我的问题，我认为这并不重要！如果您想使用示例，只需用更好的东西替换范围即可。:)

```
Sub Makingthechart()
    ActiveSheet.Shapes.AddChart.Select
    ActiveChart.ChartType = xlXYScatter
    ActiveChart.SeriesCollection.NewSeries
    ActiveChart.SeriesCollection(1).Name = "=Sheet1!$B$1"
    ActiveChart.SeriesCollection(1).XValues = "=Sheet1!$A$2:$A$" & Counter + 1
    ActiveChart.SeriesCollection(1).Values = "=Sheet1!$B$2:$B$" & Counter + 1
    ActiveChart.SeriesCollection.NewSeries
    ActiveChart.SeriesCollection(2).Name = "CFL Calculated"
    ActiveChart.SeriesCollection(2).XValues = "=Sheet1!$XFB$1:$XFB$" & NewTracker
    ActiveChart.SeriesCollection(2).Values = "=Sheet1!$XFC$1:$XFC$" & NewTracker
    With ActiveWorkbook.ActiveChart
        .HasTitle = True
        .ChartTitle.Characters.Text = "CFL Over Time"
        .Axes(xlCategory, xlPrimary).HasTitle = True
        .Axes(xlCategory, xlPrimary).AxisTitle.Characters.Text = "Time (Days)"
        .Axes(xlValue, xlPrimary).HasTitle = True
        .Axes(xlValue, xlPrimary).AxisTitle.Characters.Text = "CFL"
        .Axes(xlCategory).HasMajorGridlines = True
        .Axes(xlCategory).HasMinorGridlines = True
    End With
End Sub 
```

我非常感谢您的所有帮助！到目前为止，你们是我在实习中取得相当成功的原因！我不敢相信你们知道我什至无法通过 Google 找到的所有关于 VBA 的小知识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:19:10.053

```
Sub Makingthechart()
    Dim co As Shape, cht As Chart
    Dim rngChart As Range, sc As SeriesCollection

    Set rngChart = ActiveSheet.Range("F2:J15")

    Set co = ActiveSheet.Shapes.AddChart(xlXYScatter, rngChart.Cells(1).Left, _
                                          rngChart.Cells(1).Top, _
                                          rngChart.Width, rngChart.Height)

    Set cht = co.Chart
    Set sc = cht.SeriesCollection

    'remove any default series
    Do While sc.Count > 0
        sc(1).Delete
    Loop

    With sc.NewSeries
        .Name = "=Sheet1!$B$1"
        .XValues = "=Sheet1!$A$2:$A$" & counter + 1
        .Values = "=Sheet1!$B$2:$B$" & counter + 1
        .MarkerSize = 3
    End With

    With sc.NewSeries
        .Name = "CFL Calculated"
        .XValues = "=Sheet1!$XFB$1:$XFB$" & newtracker
        .Values = "=Sheet1!$XFC$1:$XFC$" & newtracker
        .MarkerSize = 3
    End With

    With cht
        .HasTitle = True
        .ChartTitle.Characters.Text = "CFL Over Time"
        .Axes(xlCategory, xlPrimary).HasTitle = True
        .Axes(xlCategory, xlPrimary).AxisTitle.Characters.Text = "Time (Days)"
        .Axes(xlValue, xlPrimary).HasTitle = True
        .Axes(xlValue, xlPrimary).AxisTitle.Characters.Text = "CFL"
        .Axes(xlCategory).HasMajorGridlines = True
        .Axes(xlCategory).HasMinorGridlines = True
    End With
End Sub 
```

# vb.net - 在 vb.net 中枚举属性集合

> ID：13922852
> 
> 赞同：0
> 
> 时间：2012-12-17T21:54:43.563
> 
> 标签：vb.net, wmi, wmi-query

Microsoft 的文章[`ManagementBaseObject.Properties`](http://msdn.microsoft.com/en-us/library/system.management.managementbaseobject.properties.aspx)Property 展示了如何枚举集合中的属性

```
 For Each p As PropertyData In properties
        Console.WriteLine(p.Name)
        For Each q As QualifierData In p.Qualifiers
            If (q.Name.Equals("Description")) Then
                Console.WriteLine(processClass.GetPropertyQualifierValue(.Name, q.Name))
            End If 
        Next
        Console.WriteLine()
    Next 
End Function 
```

这篇文章[http://msdn.microsoft.com/en-us/library/ms257359.aspx](http://msdn.microsoft.com/en-us/library/ms257359.aspx)演示了从 WMI 检索信息。

我想要做的是运行一个 WMI 查询，如“SELECT * FROM Win32_Environment”。但我似乎无法枚举集合，因为 envVar 不是 PropertyDataCollection：

```
Dim query As New ObjectQuery(strQuery)
Dim searcher As New ManagementObjectSearcher(scope, query)
For Each queryObj As ManagementObject In searcher.Get()
   s = s & queryObj("Name").ToString() & ": " & queryObj("VariableValue").ToString()
Next 
```

如何在不知道名称的情况下枚举此集合？我似乎无法让它工作，因为 queryObj 不是一个集合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:00:01.873

如果我没记错的话，你的循环应该是这样的

```
Dim searcher = new ManagementObjectSearcher("SELECT * FROM Win32_Environment")
Dim queryObj As ManagementObjectCollection = searcher.Get()
For Each mo in queryObj
    Console.WriteLine("----------------")
    For Each prop in mo.Properties
        Console.WriteLine("{0}: {1}", prop.Name, prop.Value)
    Next
Next 
```

# python - Python：pygame.QUIT()

> ID：13922854
> 
> 赞同：2
> 
> 时间：2012-12-17T21:54:49.120
> 
> 标签：python, pygame, exit, quit, sys

只是在玩 pygame 并遇到了这个错误。

**代码：**

```
import sys
import pygame
pygame.init()

size = width, height = 600, 400

screen = pygame.display.set_mode(size)

while 1:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                pygame.quit(); sys.exit(); 
```

**错误：**

```
Traceback (most recent call last):
  File "C:/Users/Mike Stamets/Desktop/Mygame/Pygame practice/ScreenPractice.py", line 12, in <module>
    pygame.quit(); sys.exit();
SystemExit 
```

我只是想设置一个while循环，这样当按下红色X时，程序就会退出。出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:10:03.663

调用`sys.exit()`会引发`SystemExit`异常，所以这是完全正常的。例如，尝试将您的退出调用更改为`sys.exit(1)`，您将在回溯中看到新的退出代码：

```
Traceback (most recent call last):
  File "C:/.../pygame.py", line 8, in <module>
    sys.exit(1);
SystemExit: 1 
```

在其他新闻中，您可能不需要显式调用`pygame.quit()`-[文档](http://www.pygame.org/docs/ref/pygame.html#pygame.quit)建议让您的程序以正常方式退出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T05:59:43.713

当你点击逃生时切换一个布尔值。然后，如果需要，您可以在其他地方干净地保存数据。

```
done = False
while not done:
    #events
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            done = True

    draw() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-14T13:21:48.433

I recalled four events for a simple music player in python. The code here below

```
import pygame
from pygame import mixer

pygame.init()
mixer.init()
screen = pygame.display.set_mode((600, 400))
mixer.music.load("song.mp3")
mixer.music.play()

print("Press 'p' to pause 'r' to resume")
print("Press 'q' to quit")
running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
               running  = False
        if event.type == pygame.KEYDOWN:
            if event.key == pygame.K_s:
                mixer.music.stop()
            if event.key == pygame.K_r:
                mixer.music.play()
            if event.key == pygame.K_p:
                mixer.music.pause()
            if event.key == pygame.K_y:
                mixer.music.unpause()

pygame.QUIT() 
```

# c# - 自定义输出缓存提供程序和 HttpContext.Current.Cache

> ID：13922856
> 
> 赞同：1
> 
> 时间：2012-12-17T21:54:56.950
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, outputcache, httpcontext.cache

我有一个共享主机空间，可以提供 1G 空间。另一方面，它是一个共享主机，我没有更多的资源（例如内存）。因此，我决定使用基于文件的输出缓存提供程序。我搜索了这个问题并找到了一些有用的解决方案。这是mu问题：

更改输出缓存提供程序是否也会更改`HttpContext.Current.Cache`提供程序？如果没有，我该如何改变它？我也想使用基于文件的缓存系统`HttpContext.Current.Cache`。我搜索了这个问题，但我发现的只是输出缓存提供程序。提前致谢。

# c# - XmlReader 失败

> ID：13922859
> 
> 赞同：1
> 
> 时间：2012-12-17T21:55:12.503
> 
> 标签：c#, .net, xmlreader, .net-micro-framework, netduino

我正在尝试使用 .NET Micro Framework 在我的 Netduino Plus 2 上读取配置文件。我已经从 Marco Minerva 的这篇博文中复制了大部分代码，将 [设置保存到 XML 配置文件](http://mikedodaro.net/2011/12/14/xml-configuration-files-for-net-micro-framework-applications-english/)，唯一的区别是我有另一种访问 SD 卡的方式。

```
private static void LoadConfiguration()
    {
        const string filePath = @"SD\\Application.config";
        using (Stream stream = new FileStream(filePath, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
        {
            ConfigurationManager.Load(stream);
        }
    } 
```

SD 卡上有一个“Application.config”文件，其内容为 UTF8。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
   <appSettings>
    <add key="Key1" value="Value1" />
    <add key="Key2" value="Value2" />
    <add key="Key3" value="Value3" />
    <add key="hostName" value="www.google.it" />
    <add key="port" value="25" />
    <add key="randomkey" value="randomvalue"/>
   </appSettings>
</configuration> 
```

下面的代码在第 3 行中断并出现以下错误： *“System.Xml.dll 中发生了 'System.NotSupportedException' 类型的未处理异常”*

```
public static class ConfigurationManager
{
private const string APPSETTINGS_SECTION = "appSettings";
private const string ADD = "add";
private const string KEY = "key";
private const string VALUE = "value";

private static Hashtable appSettings;

static ConfigurationManager()
{
    appSettings = new Hashtable();
}

public static string GetAppSetting(string key)
{
    return GetAppSetting(key, null);
}

public static string GetAppSetting(string key, string defaultValue)
{
    if (!appSettings.Contains(key))
    return defaultValue;
    return (string)appSettings[key];
}

public static void Load(Stream xmlStream)
{
    using (XmlReader reader = XmlReader.Create(xmlStream))
    {
        while (reader.Read())
        {
            switch (reader.Name)
            {
                case APPSETTINGS_SECTION:
                    while (reader.Read())
                    {
                        if (reader.Name == APPSETTINGS_SECTION)
                            break;

                        if (reader.Name == ADD)
                        {
                            var key = reader.GetAttribute(KEY);
                            var value = reader.GetAttribute(VALUE);

                            //Debug.Print(key + "=" + value);
                            appSettings.Add(key, value);
                        }
                    }

                    break;
            }
        }
    }
} 
```

}

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:37:58.923

显然这不受支持，因为 XmlReader 太大而无法融入 Netduino 的核心。:-(

[Netduino 论坛](http://forums.netduino.com/index.php?/topic/2476-xmlreadercreate-method-not-supported/)

# mongodb - MongoDB灵活的数据结构

> ID：13922860
> 
> 赞同：0
> 
> 时间：2012-12-17T21:55:12.450
> 
> 标签：mongodb, schema, nosql

我刚开始学习Mongo DB。

我为我当前的项目选择了它，因为我需要一个基于用户输入的相当灵活的模式。

在 mySql 中，我有一个表来存储用户输入的数据，看起来像

```
ID      Key         Value
--------------------------
1      Color        Black
2      Color        White
3      Lace_length   12 
```

我认为这是相当典型的存储用户输入的数据，可以是任何东西

我的问题是在 MongoDB 中表示这一点的最佳方式是什么

我的想法是这样的

```
{ _id: ObjectId{} ,
   options: [
         { colors: [ { black, white , ... } ] ,

          lace_length: [ { 12, 13 , 14 } ] } 
         ]
} 
```

这似乎是一种基于各种用户输入存储灵活“列名”的明智方法，还是有更好的方法来处理这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:57:44.760

我不能说我完全理解您的 SQL 示例。是否有外键，与对象 ID 相对应？

如果您的选项是多对多的，我会这样设置：

```
{ _id: ObjectId() ,
  options: {
      colors: [ black, white , ... ],
      lace_length: [ 12, 13, 14 ]
  }
} 
```

如果某些选项只有一个值，那么像这样：

```
{ _id: ObjectId() ,
  options: {
      colors: [ black, white , ... ],
      lace_length: [ 12, 13, 14 ],
      upc: 1234567890
  }
} 
```

# d3.js - 使用 getBBox() 获取文本区域

> ID：13922862
> 
> 赞同：16
> 
> 时间：2012-12-17T21:55:22.350
> 
> 标签：d3.js

```
var text = vis.selectAll("text")
    .data(words, function(d) { return d.text.toLowerCase(); });
    text.enter().append("text")
    .attr("text-anchor", "middle")
    .attr("transform", function(d) {
               return "translate(" + [d.x, d.y] + ")"})
    .style("font-size", function(d) { return d.size + "px"; })

    var bbox = text.node().getBBox(); 
```

如何使用 getBBox() 获取每个文本的文本区域？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-17T23:07:09.167

这里最好的方法取决于你想要做什么。大多数 d3 回调函数将提供当前 DOM 元素作为`this`，所以这应该可以工作：

```
text.each(function() {
    console.log(this.getBBox());
}); 
```

除此之外，问题是您需要使用该数字的上下文。例如，要获取文本宽度的总和，您可以执行以下操作：

```
var textWidth = 0;
text.each(function() {
    textWidth += this.getBBox().width;
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-29T11:33:44.903

您还可以使用 node() 在元素上同步执行此操作：

```
console.log(text.node().getBBox()); 
```

# c# - 无法将 InputEventArgs 转换为 MouseEventArgs

> ID：13922864
> 
> 赞同：4
> 
> 时间：2012-12-17T21:55:30.977
> 
> 标签：c#, casting, extension-methods

我正在尝试制作这种扩展方法。在演员表上出现“无法将类型 T 转换为 MouseEventArgs”的错误。我不应该能够向上转换对象（因为`MouseEventArgs : InputEventArgs`）？

如果您好奇，我将使用它在处理程序方法中使用基本 InputEventArgs 在鼠标和触摸事件之间共享事件处理程序。

```
 public static class InputEventArgsExtensions
    {
        public static Point GetPosition<T>(this T e, IInputElement obj)
            where T : InputEventArgs
        {
            if (e is MouseEventArgs)
                return ((MouseEventArgs)e).GetPosition(obj);
            else if (e is TouchEventArgs)
                return ((TouchEventArgs)e).GetTouchPoint(obj).Position;

            return new Point();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:06:55.317

我试过这样做，它对我有用。

```
 public static class InputEventArgsExtensions
    {
        public static Point GetPosition<T>(this T e, IInputElement obj)
            where T : InputEventArgs
        {
            if (e is MouseEventArgs)
                return (e as MouseEventArgs).GetPosition(obj);
            else if (e is TouchEventArgs)
                return (e as TouchEventArgs).GetTouchPoint(obj).Position;

            return new Point();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:04:09.447

如果 e 总是从 InputEventArgs 派生，那么只需使用该类型而不是泛型方法：

```
public static Point GetPosition(this InputEventArgs e, IInputElement obj)
{
    // Code here   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T22:25:19.070

`MouseEventArgs`已经有[GetPosition](http://msdn.microsoft.com/en-us/library/system.windows.input.mouseeventargs.getposition.aspx)方法。所以我认为它只是`TouchEventArgs`你可能想要扩展的：

```
public static Point GetPosition(this TouchEventArgs e, IInputElement relativeTo)
{
    e.GetTouchPoint(obj).Position;
} 
```

# struts2 - 通过struts2传递参数的问题

> ID：13922868
> 
> 赞同：0
> 
> 时间：2012-12-17T21:55:44.697
> 
> 标签：struts2, dynamic-image-generation

我通过从动态图像 url 传递参数来调用 struts2 动作

`<img src="<s:url action='ImageAction?imageId=logo.jpg' />"/>`

有了这个，我的动作可以正确调用，但参数`imageId=logo.jpg`没有传递给我的动作类。

但是，如果我从浏览器 url 手动传递参数，那么参数会正确显示到我的 java 页面中，例如。`http://localhost:8080/mypoject/jspHomepage/bookstransaction/secure/ImageAction?imageId=logo.jpg`

这可能是什么原因？请帮我。

struts.xml

```
 `
    `<package name="Image"   extends="struts-default,json-default"> 
            <result-types>
        <result-type name="imageResult"
            class="v.esoft.actions.changetheme.CustomImageBytesResult" />
        </result-types>
          <action name="updatethemeimageform"  class="v.esoft.actions.changetheme.ThemedetailsEditAction" method="updateThemesImage">  
            <result name="success" type="json"/>
            <result name="input" type="json"/>     
        </action>  
       <action name="Display" class="v.esoft.actions.changetheme.DisplayAction">
            <result name="success" type="json"/>
      </action> 
      <action name="ImageAction" class="v.esoft.actions.changetheme.ImageAction">
        <result name="success" type="imageResult">
        </result>
     </action> 
         </package>` 
```

ImageAction.java

```
public class ImageAction extends ActionSupport implements ServletRequestAware {

byte[] imageInByte = null;
String imageId;

private HttpServletRequest servletRequest;

public String getImageId() {
    return imageId;
}

public void setImageId(String imageId) {
    this.imageId = imageId;
}

public ImageAction() {
    System.out.println("ImageAction");
}

public String execute() {
    return SUCCESS;
}

public byte[] getCustomImageInBytes() {
        System.out.println("imageId" + imageId);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T00:59:23.427

以下未经测试。

使用 param 标签添加参数。

```
<s:url package="Image" action="ImageAction" var="myUrl">
   <s:parm name="imageId" value="'logo.jpg'"/>
</s:url>

<img src="<s:property value="#myUrl"/>"/> 
```

注意：我怀疑在最后一行 myUrl 应该足够了（没有#），但现在不记得了。

# jquery - 彩虹动画文本jQuery破坏innerHTML

> ID：13922871
> 
> 赞同：0
> 
> 时间：2012-12-17T21:55:59.167
> 
> 标签：jquery

我有一个简单的标记

```
<a href="/u1"><span style="color:#FF0000"><strong>Mr.EasyBB</strong></span></a> 
```

这是 API Rainbow 的 jQuery 调用者

```
$('a[href="/u1"]').rainbow({ 
colors: [
    '#FF0000',
    '#f26522',
    '#fff200',
    '#00a651',
    '#28abe2',
    '#2e3192',
    '#6868ff'
],
animate: true,
animateInterval: 100,
pad: false,
pauseLength: 100,
}); 
```

尽管每当我成功时，它都会将 HTML 显示为链接。为了更好地理解，请访问我提供的 jsfiddle，因为这太奇怪了！

[http://jsfiddle.net/sr5df/](http://jsfiddle.net/sr5df/)

如果有人知道修复方法，请在这里帮助我，这简直令人难以置信。​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T21:59:09.917

该插件使用包装集元素的 innerHTML。如果您针对要设置动画的实际文本周围的标签，那么您很好。所以改用这个调用：

```
$('a[href="/u1"] strong')... etc 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T22:00:41.950

代替

```
options.originalText = $(this).html(); 
```

和

```
options.originalText = $(this).text(); 
```

# java - Java将二进制序列转换为char

> ID：13922874
> 
> 赞同：2
> 
> 时间：2012-12-17T21:56:13.727
> 
> 标签：java

我现在找了大约一个小时，但找不到针对我的问题的任何建议。我想做的是取一串 0 和 1 并操作一个符合给定字符串模式的字符。例如：

```
 char c = 'b'
    String s = "00000000 01100001"; 
```

现在我想操作 c 中的位，使它们与 s 中指定的位模式相匹配。结果 c 将被打印为 'a' （如果我不是完全错误的话）。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:05:08.253

要将二进制字符串转换为整数，请使用 parseInt，第二个参数为 2。

```
int temp = Integer.parseInt("01100001", 2); 
```

您可以使用二元运算符 (&,|,^) 进行修改，但如果您真正想要的只是分配一个变量，则可以使用强制转换来完成。

```
char c = 'c';    
System.out.println((char)(c&temp));

System.out.println((char)temp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:00:43.613

你可以做

```
char a = (char) Integer.parseInt("0000000001100001", 2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T22:00:34.223

怎么样：

```
 String s = "00000000 01100001";
      String[] w = s.split(" ");
      char c = (char)(Integer.parseInt(w[0], 2) * 256 + Integer.parseInt(w[1], 2)); 
```

这允许省略每个字节的前导零。如果您知道它们在那里，您可以替换字符串中的空格并使用单个`parseInt()`调用：

```
 char c = (char)Integer.parseInt(s.replace(" ", ""), 2); 
```

# java - Java RMI 远程对象转换/状态

> ID：13922875
> 
> 赞同：1
> 
> 时间：2012-12-17T21:56:18.080
> 
> 标签：java, rmi

我有一个 RMI 应用程序，详细信息如下。服务器知道它正在创建一个 DocumentProvider 对象，并使用 Document 接口将对该对象的引用传递给客户端。当客户端将 Document 对象传递给服务器时，服务器不能再将其转换为 DocumentProvider，尽管这是服务器最初创建的。

有没有办法进行这种类型的转换，即服务器知道它正在创建具有更多内部功能的文档的特定实现（在本例中为 InternalClass serverInfo），并希望在其文档功能的实现中访问这些附加功能（在这种情况下，在“doCast()”函数中）。

另一种询问方式：一旦服务器创建了 DocumentProvider 对象，该对象是否位于服务器上？如果是这样，我怎样才能给客户一个参考？内部类服务器信息；部分不可序列化，并且不能传输到客户端。（有点像文件句柄等，尽管我可以在 DocumentProvider 类中保存和管理它）。

```
//Interface
public interface Document extends extends java.rmi.Remote {
        public String doSomething()  throws java.rmi.RemoteException;
        public String doCast()  throws java.rmi.RemoteException;
}

//The server:
    public class DocumentProvider extends java.rmi.server.UnicastRemoteObject implements java.rmi.Remote, Document {
        InternalClass serverInfo;

        public String doSomething()  throws java.rmi.RemoteException {
            return "DocumentProvider doing something";
        }
        public String doCast(Document d)  throws java.rmi.RemoteException {
            DocumentProvider d2 = (DocumentProvider) d; // this cast fails, even when d was a DocumentProvider class
            // then access d.serverInfo, etc.
        }
    }

public interface DocumentFactory extends extends java.rmi.Remote {
        public Document createDocument() throws java.rmi.RemoteException;
}
public class DocumentProvider extends java.rmi.server.UnicastRemoteObject implements java.rmi.Remote, DocumentFactory {
    public Document createDocument() throws java.rmi.RemoteException {
        return new DocumentProvider();
    }
}

//Client app:
main()... {
    DocumentFactory dFactory = (lookup/resolve this; this works ok);
    Document dMain = dFactory.createDocument();
    dMain.doCast(dMain);  // this fails because
} 
```

详细地说，“InternalClass serverInfo”是一个不可序列化的第 3 方“句柄”，我必须以某种方式将其状态保留在服务器中，所以主要问题是如何做到这一点，同时返回对远程对象的引用，允许客户端通过接口中定义的远程调用“操纵”该内部对象。（另一个更简单的例子：如果 serverInfo 是一个文件句柄，我允许客户端通过 Document 接口执行“查找”和“读取”功能）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:13:07.170

远程对象作为实现相同远程接口的存根传递和返回。因此，强制转换为实际的远程对象类是不可能的，并且尝试远程执行它更没有意义。只需将存根用作接口的实例即可。如果这还不够，那么您的设计就有问题。

# java - 通过 JUnit 运行时执行 Spring Batch 作业增量器

> ID：13922876
> 
> 赞同：1
> 
> 时间：2012-12-17T21:56:27.420
> 
> 标签：java, spring, batch-processing, spring-batch

我有一个带有参数的 Spring Batch 作业，并且每次运行作业时参数通常都是相同的。默认情况下，Spring Batch 不允许您重复使用相同的参数......所以我创建了一个简单的增量器并将其添加到我的工作中，如下所示：

[http://numberformat.wordpress.com/2010/02/07/multiple-batch-runs-with-spring-batch/](http://numberformat.wordpress.com/2010/02/07/multiple-batch-runs-with-spring-batch/)

当使用标准`CommandLineJobRunner`运行我的工作时，我必须传递`-next`参数才能使用我的增量器。

但是，当我从 JUnit 类中运行端到端作业测试时，使用`JobLauncherTestUtils.launchJob( JobParameters )`...我找不到声明应该使用我的增量器的方法。该作业只是悄悄地跳过，大概是因为它已经使用这些参数运行（见下面的注释）。

该类`JobParameters`旨在保存名称-值对的集合......但 -next 参数不同。它以破折号开头，没有对应的值。我尝试了各种实验，但尝试在`JobParameters`收藏中添加一些东西似乎不是票。

有谁知道相当于传递`-next`给的JUnit `CommandLineJobRunner`？

注意：我认为问题是我的增量器被忽略了，因为：

1.  这项工作第一次工作，如果我清除工作存储库数据库，它就会工作。它只会在重试时失败。
2.  当我对变量进行硬编码并完全删除参数时，这项工作工作正常，重试等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:47:56.033

JobLauncherTestUtils 类包含一个 getUniqueJobParameters 方法，该方法满足完全相同的需求。

```
/**
* @return a new JobParameters object containing only a parameter for the
* current timestamp, to ensure that the job instance will be unique.
*/
public JobParameters getUniqueJobParameters() {Map<String, JobParameter> 
parameters = new HashMap<String, JobParameter>();
parameters.put("random", new JobParameter((long) (Math.random() * JOB_PARAMETER_MAXIMUM)));
return new JobParameters(parameters);
} 
```

示例用法是，

```
JobParameters params = new JobParametersBuilder (jobLauncherTestUtils.getUniqueJobParameters()).toJobParameters();
     //extra parameters to be added
JobExecution jobExecution = jobLauncherTestUtils.launchJob(params); 
```

# c# - 如何在 One Button Click 中设置两个事件？

> ID：13922877
> 
> 赞同：5
> 
> 时间：2012-12-17T21:56:34.017
> 
> 标签：c#, forms, events, timer

我有带 Timer1 的表格。

我想将该 timer1 的 Tick 事件设置`timer2_Tick`为已经签署给另一个 timer2 的函数。

如何将 2 个计时器设置为 1 个事件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T21:59:41.450

您以与分配任何其他事件处理程序相同的方式执行此操作，只是碰巧为两个计时器选择了相同的方法。

```
System.Windows.Forms.Timer first = new System.Windows.Forms.Timer();
first.Tick += tick;

System.Windows.Forms.Timer second = new System.Windows.Forms.Timer();
second.Tick += tick;

private void tick(object sender, EventArgs e)
{
    throw new NotImplementedException();
} 
```

如果您使用设计器，而不是通过代码附加事件，那么您只需转到“属性”选项卡，选择事件，然后`Tick`为两个计时器输入相同的事件名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:58:22.537

只需将相同的功能分配给他们的`Tick`代表。

```
myTimer1.Tick += new EventHandler(TimerEventProcessor);
myTimer2.Tick += new EventHandler(TimerEventProcessor); //THE SAME LIKE FIRST ONE

private static void TimerEventProcessor(Object myObject,
                                            EventArgs myEventArgs) {
} 
```

# kendo-ui - kendo mobile中的自动完成控制

> ID：13922878
> 
> 赞同：0
> 
> 时间：2012-12-17T21:56:38.173
> 
> 标签：kendo-ui, jquery-autocomplete, kendo-mobile

Telerik Kendo Mobile 有没有办法做到这一点：

[http://www.raymondcamden.com/index.cfm/2012/3/27/Example-of-Autocomplete-in-jQuery-Mobile](http://www.raymondcamden.com/index.cfm/2012/3/27/Example-of-Autocomplete-in-jQuery-Mobile)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-05T23:45:12.333

使用带有过滤功能的列表视图：http: [//demos.telerik.com/kendo-ui/mobile/listview/filtering.html](http://demos.telerik.com/kendo-ui/mobile/listview/filtering.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:04:55.407

有一个 AutoComplete 控件不在移动设备特定控件中。

[http://demos.kendoui.c​​om/web/autocomplete/index.html](http://demos.kendoui.com/web/autocomplete/index.html)

如果您有兴趣使用它，我会建议测试并确保它在移动系统上的性能。该演示在我的 Galaxy S3 上完美运行。

# javascript - 拍照并保存在 SD 卡或相册 PHONEGAP

> ID：13922880
> 
> 赞同：0
> 
> 时间：2012-12-17T21:56:54.170
> 
> 标签：javascript, cordova, camera, storage, photos

我采用了其他参与者提到的这段代码并对其进行了测试，它工作正常，我唯一想要的是将照片保存在我创建的新文件夹中，甚至保存在相机的照片相册中，以避免不得不去当前保存的隐藏路径..请帮助我

[https://gist.github.com/2238017](https://gist.github.com/2238017)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:06:13.690

我创建了一个 phonegap 应用程序，我用相机拍摄的照片被保存在手机上的标准图库文件夹中。

试试我的代码:)

```
function capturePhoto() {
  // Take picture using device camera and retrieve image as base64-encoded string
  navigator.camera.getPicture(onPhotoDataSuccess, onFail,{
          quality : 25, 
          destinationType : Camera.DestinationType.FILE_URI, 
          sourceType : Camera.PictureSourceType.CAMERA, 
          allowEdit : true,
          encodingType: Camera.EncodingType.JPEG,
          targetWidth: 500,
          targetHeight: 500,
          popoverOptions: CameraPopoverOptions,
          saveToPhotoAlbum: true });
} 
```

顺便说一句..它的 saveToPhotoAlbum: 确实你错过了它的样子，无论如何尝试我的代码，我希望它可以工作:)

# sql - Oracle SQL - 命名案例列

> ID：13922882
> 
> 赞同：1
> 
> 时间：2012-12-17T21:56:56.483
> 
> 标签：sql, oracle

```
select site,
case
when site='AppCircle' then (count(create_dtime)*0.4438083264)
when site='AppCircle Clips' then (count(create_dtime)*0.0096978792)
when site='BC : SponsorPay' then (count(create_dtime)*0.9620989399)
when site='BonusCoins.com : Aarki' then (count(create_dtime)*0.4612565445)
when site='Nielsen Rewards' then (count(create_dtime)*-0.6000000000)
when site ='Portal : Paymentwall' then (count(create_dtime)*0.5433541667)
when site ='Portal : RadiumOne' then (count(create_dtime)*0.0619798753)
when site ='Portal : TrialPay' then (count(create_dtime)*2.1468159204)
when site ='bonuscp_login' then (count(create_dtime)*-0.1500000000)
when site ='facebook_like' then (count(create_dtime)*2.1468159204)
when site ='iTunes' then (count(create_dtime)*-0.0300000000)
end
From player_aux_pt
Where
Trunc(Create_Dtime) >= To_Date('2012-Nov-01','yyyy-mon-dd')
And Trunc(Create_Dtime) <= To_Date('2012-Nov-30','yyyy-mon-dd')  
group by site 
```

这导致两列数据

```
Site    [insert every case statement here] 
```

我只想将第二列信息命名为“利润”

```
Site    Profit 
```

我已经尝试了许多不同的方法被卡住了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T21:59:14.200

您可以使用 AS 重命名（或命名）SQL 中的列和表达式：

```
CASE 
  WHEN. . .
  WHEN. . .
END AS Profit 
```

但是，以这种方式使用 CASE 表达式不是很可扩展。考虑将乘法因子移动到另一个表，键入`site`然后将该表加入查询中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T21:59:48.110

注意：由于您的 CASE 语句只是一个基本的[DECODE](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions040.htm)模式，请查看链接以获取简洁的替代方案。

```
select site,
       count(create_dtime)
     * DECODE(site, 'AppCircle', 0.4438083264,
                    'AppCircle Clips', 0.0096978792,
                    'BC : SponsorPay', 0.9620989399,
                    ......) Profit
 .... 
```

* * *

您可以通过在表达式或基本列名称之后为其命名来为列命名，例如

```
SELECT
    Site,
    Site ReNamedSite,
    Concat(Site,'a') "AddedAnA",
    COALESCE(Site,Address) AS "Two Words"
... 
```

笔记：

1.  关键字`AS`是可选的
2.  双引号的使用是可选的，除非您使用多个单词

IE

```
select site,
case
when site='AppCircle' then (count(create_dtime)*0.4438083264)
when site='AppCircle Clips' then (count(create_dtime)*0.0096978792)
when site='BC : SponsorPay' then (count(create_dtime)*0.9620989399)
when site='BonusCoins.com : Aarki' then (count(create_dtime)*0.4612565445)
when site='Nielsen Rewards' then (count(create_dtime)*-0.6000000000)
when site ='Portal : Paymentwall' then (count(create_dtime)*0.5433541667)
when site ='Portal : RadiumOne' then (count(create_dtime)*0.0619798753)
when site ='Portal : TrialPay' then (count(create_dtime)*2.1468159204)
when site ='bonuscp_login' then (count(create_dtime)*-0.1500000000)
when site ='facebook_like' then (count(create_dtime)*2.1468159204)
when site ='iTunes' then (count(create_dtime)*-0.0300000000)
end Profit
From player_aux_pt
Where
Trunc(Create_Dtime) >= To_Date('2012-Nov-01','yyyy-mon-dd')
And Trunc(Create_Dtime) <= To_Date('2012-Nov-30','yyyy-mon-dd')  
group by site 
```

# sql-server - 在 SSRS 中，OR 的“两个数值的按位分离”是什么意思。

> ID：13922884
> 
> 赞同：0
> 
> 时间：2012-12-17T21:56:57.717
> 
> 标签：sql-server, reporting-services

我想让我的参数化菜单允许一个选项来表示数字（即，当您单击我的菜单下拉选项 X 时，它代表所有数字）：

= 30 或 31 或 32 或 33 或 34 或 35 或 36 或 37 或 38 或 39 或 130 （这是我在 SSRS 中输入的）

在 SSRS 上，它表示 OR 用于“用于对两个布尔表达式执行逻辑析取，或对两个数值执行按位析取”。

我试过这个：

```
=join(Parameters!ClientResponseRange.30 "," Parameters!@ClientResponseRange.35) 
```

但它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:03:53.010

您需要 SQL`IN`函数：

```
WHERE MyField IN (30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 130) 
```

因此，如果您有一个`@Options`多值参数，则如下所示：

```
WHERE MyField IN @Options 
```

# ruby - 机械化和隐形搜索表单

> ID：13922886
> 
> 赞同：0
> 
> 时间：2012-12-17T21:57:05.137
> 
> 标签：ruby, mechanize

我正在尝试使用 Mechanize 在某些网站上执行搜索，但我无法提交搜索表单，因为 mechanize 看不到任何表单。`page.form`返回 nil 并在我期望类似的时候`page = agent.get`返回`{forms}>`

```
<Mechanize::Form
 {name "somename"}
 {method "GET"}
 {action "/search"} 
```

是因为搜索表单使用了javascript吗？有没有办法解决这个问题？或者唯一的方法是放弃机械化并使用其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T01:24:28.290

这意味着该页面上没有表格。解决方法是转到`get`下一页，即伪装成表单提交的页面。

换句话说，当我在搜索框中输入“foo”并单击按钮时，我会被重定向到： [http](http://s.weibo.com/weibo/foo&Refer=index) ://s.weibo.com/weibo/foo&Refer=index 所以就在`get`那个页面上做点什么。

# java - 将 activiti 消息和信号绑定到 JMS 消息

> ID：13922887
> 
> 赞同：2
> 
> 时间：2012-12-17T21:57:09.933
> 
> 标签：java, jms, signals, message, activiti

我有两个关于 Activiti BPMN 的问题：

1）如何以编程方式解析消息定义

2) 我如何以编程方式捕获intermediateThrowEvent 事件。

我正在开发一个将使用嵌入式 Activiti BPMN 引擎（当前版本为 5.11）的项目。该应用程序当前由发送和接收 JMS 消息驱动，我认为将它们公开为 Activiti 消息和信号是很自然的。该应用程序必须启用许多单独的 JVM，每个 JVM 运行一个具有各种进程的单个 BPMN 引擎，以便在彼此之间发送和接收消息。

我对如何实现每个场景有一些想法，但我不确定如何解析来自我的 BPMN 流程的消息以实现选项 2a，并且我不确定如何捕获 middleThrowEvent 以实现选项 1b：

a) 接收消息：

选项 1a - 订阅所有 JMS 消息到达的单个主题，并将 Activiti 消息或 Activiti 信号名称作为有效负载放入 JMS 消息中。当 JMS 消息到达时，我可以查询每个引擎以查看哪些当前执行正在订阅消息，以及哪些进程需要启动：

```
List<ProcessDefinition> pds= repositoryService.createProcessDefinitionQuery()
  .messageEventSubscription("messageNameInsideJMSPayload")
  .list();

for (ProcessDefinition pd: pds) 
{
    RunBPMProcess.runtimeService.startProcessInstanceByMessage(messageName, 
    di.getId().toString(), processVariables);
} 
```

选项 2a - 订阅直接映射到 Activiti 消息名称或活动信号名称的动态主题。这里棘手的部分是如何解析来自 BPMN 流程的消息或信号名称。我已经设法通过使用自定义 BpmnParseListener 来解析消息引用，但我只能从实现中获取消息引用，而不是消息名称。

```
pec = ProcessEngineConfiguration.createStandaloneProcessEngineConfiguration();
  if (pec instanceof ProcessEngineConfigurationImpl)
  {

    List<BpmnParseListener> preParseListeners = new ArrayList <>();

    preParseListeners.add(new BPMNMessageAndSignalParser(pontus));

    ((ProcessEngineConfigurationImpl) pec).setCustomPreBPMNParseListeners(preParseListeners );

  } 
```

b) 发送消息：

选项 1b) 我想理想地捕获中间ThrowEvent，因此我可以将信号作为 JMS 消息发送，但我不知道该怎么做。

我对 Activiti 还很陌生，如果我遗漏了任何明显的东西，我深表歉意；此外，这是一个示例工作流程，只是为了帮助将问题置于上下文中：

```
<?xml version="1.0" encoding="UTF-8" ?>
<definitions id="definitions"
             targetNamespace="http://activiti.org/bpmn20" 
             xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:activiti="http://activiti.org/bpmn">
  <message id="pontusMessage" name="pontusMessage"/>
  <signal id = "pontusSignal" name="pontusSignal"/>
  <process id="test" name="PontusNetworks Test"  isExecutable="true">

    <startEvent id="start"/>

    <sequenceFlow id="flow1" sourceRef="start" targetRef="messageReceiver" />

    <intermediateCatchEvent id="messageReceiver">
        <messageEventDefinition messageRef="pontusMessage" />
    </intermediateCatchEvent>

    <sequenceFlow id="flow2" sourceRef="messageReceiver" targetRef="signalSender">
    </sequenceFlow>

    <intermediateThrowEvent id="signalSender">
        <signalEventDefinition signalRef="pontusSignal" />
    </intermediateThrowEvent>
    <sequenceFlow id="flow3" sourceRef="messageReceiver" targetRef="theEnd2"/>

    <endEvent id="theEnd2" />

  </process>

</definitions> 
```

提前感谢您的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T18:26:44.977

> 如何以编程方式解析消息定义

我不确定这是什么意思，但显然 Activiti 在解析 BPMN 流程定义 XML 时确实具有通知机制。它允许插入一个侦听器，该侦听器将在多个事件中得到通知。

我[为此写](http://developer4life.blogspot.co.il/2012/02/extending-task-service-in-activiti.html)了一篇有趣的文章。当然，通知中心是我们真正希望在未来版本中看到的。

# javascript - jwplayer不能在ie8中播放

> ID：13922890
> 
> 赞同：0
> 
> 时间：2012-12-17T21:57:19.493
> 
> 标签：javascript, flash, jwplayer

嗨，我一直在使用这个嵌入代码在我的网站上播放 jwplayer，它适用于 chrome、firefox 和 safari。并且可以使用任何与 html 兼容的浏览器，但是我想让这些视频可供人们在 ie8 中观看。有什么我可以添加到代码中以使这成为可能吗？

```
<html>
  <head>
    <script src="/jwplayer/jwplayer.js"></script>
  </head>
  <body>
    <div id="container">HD video coming up!</div>
       <script>

        var options = {

               file: "clash.mp4",
               height: 270,
               width: 480,
               modes:
                     [
                        { type: "html5" },
                        { type: "flash", src:"/jwplayer/player.swf" }
                     ],

                        };
          jwplayer("container").setup(options);
      </script>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:57:26.957

这应该可以正常工作，你有一个我们可以看看的链接吗？

# c - 这个二分搜索功能有什么问题？

> ID：13922893
> 
> 赞同：0
> 
> 时间：2012-12-17T21:57:59.753
> 
> 标签：c, binary-search

我正在尝试解决二进制搜索的 Spoj 问题，但我不断得到“错误答案”并且我看不到我的问题。这是我的搜索功能：

```
int binarySearch(int numbers[], int size, int key)
{
    int start = 0;
    int end = size - 1;
    int middle;

    while(start <= end)
    {
        middle = start + (end - start)/2;

        if(key < numbers[middle])
            end = middle - 1;
        else if(key > numbers[middle])
            start = middle + 1;
        else
            return middle;
    }

    return -1;
} 
```

这是我的主要功能

```
int main()
{
    int *numbers;
    int n_numbers, n_queries, key, i, found;

    scanf("%d %d", &n_numbers, &n_queries);
    numbers = (int*)malloc(n_numbers * sizeof(int));

    for(i = 0; i<n_numbers; i++)
        scanf("%d", &numbers[i]);

    for(i = 0; i<n_queries; i++)
    {
        scanf("%d", &key);
        found = binarySearch(numbers, n_numbers, key);
        printf("%d\n", found);
    }

    return 0;
} 
```

这是 SPOJ 问题： [http ://www.spoj.com/problems/BSEARCH1/](http://www.spoj.com/problems/BSEARCH1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:22:58.537

问题是您需要返回第*一次*出现的位置（从零开始），并且在找到密钥后立即返回。

但数组可能是：0 1 1 1 1 1 1 1 1 1 1 1 2

关键是 1。您应该返回 1（第一次出现的位置），而不是返回 6。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:03:36.753

你的算法是正确的。数据未排序，因此您的二进制搜索算法无法正确地将解决方案归零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T22:06:41.787

不完全清楚您正在使用哪种基于 C 的语言，但表达式 (end - start)/2 可能会返回一个浮点值，然后当您实际上希望该值四舍五入时将其截断为整数？

# python - 方括号应用于 Python 中的“self”

> ID：13922895
> 
> 赞同：5
> 
> 时间：2012-12-17T21:58:10.493
> 
> 标签：python, nlp

我遇到了一些在“self”上使用方括号的代码。我不熟悉这种表示法，并且由于我试图了解不是我编写的源代码，因此很难理解这里处理的是哪种对象。

我遇到的示例在 Python 的自然语言工具包[中](http://nltk.org/_modules/nltk/model/ngram.html)。如果您 ctrl-F ，您可以找到我的意思的示例`self[context]`。

如果没有更多上下文，可能无法准确说出它是如何使用的，但这里有一个带有示例的片段：

```
context = tuple(context)
if (context + (word,) in self._ngrams) or (self._n == 1):
     return self[context].prob(word)
else:
     return self._alpha(context) * self._backoff.prob(word, context[1:]) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T22:01:11.460

方括号是 python 表达“调用`__getitem__`（或`__setitem__`）方法”的方式。

```
x = a[...]  #call a.__getitem__(...)
a[...] = x  #call a.__setitem__(...)
del a[...]  #call a.__delitem__(...) 
```

`self`在您的情况下， and之间没有什么不同`a`。事实上，类的方法并没有什么特别之处`self`。传递给方法的第一个参数是类的一个实例，但您可以随意调用该参数。 `self`只是一个（非常强烈推荐的）约定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T22:00:44.667

`self`只是一个标识符，所以这与`[]`对任何其他对象的操作相同。为此，`self`必须实现[`__getitem__`](http://docs.python.org/2/reference/datamodel.html#object.__getitem__)方括号调用的“魔术方法”。

例如

```
class OneItemContainer(object):
    def __init__(self, value):
        self.value = value

    def __getitem__(self, i):
        if i != 0:
            raise IndexError("this container can only hold one object")
        return self.value 
```

现在你可以做

```
container = OneItemContainer("ham")
print(container[0])  # will print ham 
```

但是没有理由不能`[]`在方法中使用：

```
 # on the previous class
    def __repr__(self):
        return "OneItemContainer(%r)" % self[0] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T22:00:25.847

这

```
def __getitem__(self, item):
    return self._model[tuple(item)] 
```

允许迭代对象拥有的数据。

> [`object.__getitem__(self, key)`](http://docs.python.org/2/reference/datamodel.html#object.__getitem__)
> 调用以实现对 self[key] 的评估。对于序列类型，接受的键应该是整数和切片对象。请注意，负索引的特殊解释（如果类希望模拟序列类型）取决于 `__getitem__()`方法。如果 key 的类型不合适，可能会引发 TypeError；如果序列的索引集之外的值（在对负值进行任何特殊解释之后），则应引发 IndexError。对于映射类型，如果缺少键（不在容器中），则应引发 KeyError。

[http://www.python.org/dev/peps/pep-0234/](http://www.python.org/dev/peps/pep-0234/)

# asp.net-mvc-3 - 在 MVC 控制器 parameter.string.contains 中使用多个值

> ID：13922913
> 
> 赞同：0
> 
> 时间：2012-12-17T21:59:24.227
> 
> 标签：asp.net-mvc-3

我有的代码：

```
 public ViewResult Index(string tech)
    {
        var queue = db.Table1.Where(t => t.TECHID == tech).ToList();

        queue = queue.Where(t => t.STAT.Contains("90I")).ToList();

        return View(queue);
    } 
```

这有效地让我获得了 STAT == 90I 和 TECHID 等于登录的人的所有行。我如何扭转这一点，以便我得到所有不包含 90I 的记录，有没有办法让它不得到 90I 和不获取 00C，或者获取 STAT 介于（包括）10E 和 70C 之间的所有记录？

数值示例：00C、10E、45I、60A、65B、65O、65P、66A等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:13:09.437

如果要进行否定，则需要将条件更改为否定：

```
queue = queue.Where(t => !t.STAT.Contains("90I")).ToList(); 
```

不是 90I 也不是 00C：

```
queue = queue.Where(t => !t.STAT.Contains("90I") && !t.STAT.Contains("00C")).ToList(); 
```

“之间”是什么意思？？

# python - Django根据事件不断向客户端发送数据

> ID：13922915
> 
> 赞同：0
> 
> 时间：2012-12-17T21:59:26.097
> 
> 标签：python, django, python-requests

我使用请求制作了一个小应用程序来充当浏览器，它利用库的功能来处理会话并将 CSRF 令牌正确地传递给 Django。

有多个连接到服务器的应用程序，其中需要处理身份验证和会话，并且已经完成。

我需要让客户端永久连接到 Django 服务器端，我认为这可以通过设置会话仅在客户端关闭或断开连接时过期来处理。

我想做的另一件事是让django开始根据服务器上的一些事件发送数据，利用经过身份验证和登录的客户端的开放会话，我该怎么做？

请记住，将处理服务器上的事件并相应地向客户端发送一些消息/数据的功能不是`return HttpResponse` 可以使用的视图功能；即使，HttpResponse 只能在每个请求而不是每个可能重复的事件中发送一次响应，因此可以发送多个响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:32:29.927

在没有不可能的内存要求的情况下让 django 做到这一点需要付出巨大的努力，即使那样，它仍然会比它的价值更难，所以我将提出一些替代方案。

您可能会看到[django-socketio](https://github.com/stephenmcd/django-socketio)是否会帮助您做您想做的事，但它似乎已经过时了。

上次我不得不将实时事件从 django 应用程序推送到客户端时，我使用 rabbitmq 服务器将消息包传递到连接到我使用 tornado 构建的非常薄的服务器的队列中，并使用基本的长轮询方法。这行得通，但它最终成为一个复杂的系统，有很多移动部件不是最可维护的。

最近，当我不得不处理推送到客户端的事件时，我使用了 node.js + socket.io，这更容易上手（至少如果你没有使用 rabbit 的全部路由功能，我不是。

如果您想在 django 旁边使用该设置，您可以在旁边运行一个单独的 node.js 服务器，但是您正在为 django 提供服务，并将 HAproxy 放在整个堆栈的前面，以避免跨域问题。剩下的唯一问题是如何在节点服务器和您的 django 应用程序之间进行连接，这可能是私有端口上的 HTTP 调用、redis pub/sub 设置、某种消息设置（如 rabbit 或 zeromq）或任何其他您梦寐以求的东西向上。

# django - 如何将表单数据导入模型？

> ID：13922916
> 
> 赞同：0
> 
> 时间：2012-12-17T21:59:26.290
> 
> 标签：django, django-models, django-forms, django-views

我有一个模型叫`Note`：

```
class Note(models.Model):
    name = models.CharField(max_length=200)
    description = models.TextField()

    def save(self, force_insert=False, force_update=False):
        from notes.tasks import build_htaccess
        super(Note, self).save(force_insert, force_update)
        build_htaccess.delay(self.id) # celery tasks 
```

我有一个像这样的模型：

```
from django import forms

from notes.models import Note

class AddNoteForm(forms.ModelForm):
    password = forms.CharField(widget=forms.PasswordInput)

    class Meta:
        model = Note 
```

我不想将`password`值存储在数据库中，因为我正在覆盖 save 方法以通过创建 htaccess 密码，`subprocess`但我似乎无法访问 clean_data 表单以将模型中的密码值放入保存覆盖。关于我如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:07:24.177

这对我提出的问题是，如果您不将字段值存储在数据库中，为什么根本将其包含在模型中？

我无法在这里描绘您的精确结局，但是在与您描述的情况类似的情况下，我可能会做的是在模板中手动创建密码字段。`request.POST`然后，我可以使用以下内容从视图中的数据中获取字段的值：

```
if request.method == 'POST':
    [...]
    if myPassHandler(request.POST['password']):
        # password is valid
        [...]
    else:
        # bad password
        [...] 
```

Where`myPassHandler`返回 True 或 False。希望这会有所帮助。

# git - .gitignore 和 remove cached 使我在服务器上看不到文件吗？

> ID：13922918
> 
> 赞同：2
> 
> 时间：2012-12-17T21:59:30.737
> 
> 标签：git, gitignore

我想忽略一些需要不同或不需要跟踪的文件——我编辑了我的 gitignore 以跳过 swp 文件、整个 tmp 目录和 log/ 中的一些日志文件。

我他们从我的本地安装中删除了缓存的版本——这里看起来一切都很好

然后我跑了 git add 。（这应该是 git add -u 吗？）

然后推送到我的远程存储库。

该应用程序仍然运行良好，但我注意到我无法找到或访问我在本地忽略的远程存储库上的文件 - 我的日志文件已经消失，我的 database.yml 文件也是如此（再次，在远程）。

我仍然可以启动应用程序，所以文件似乎仍然存在（除非我对需要 database.yml 有误），但我看不到这些文件。

如果我想始终忽略这些文件（就像其他将拉取它们的开发人员一样），我怎样才能做到这一点而不让这些文件在遥控器上消失？

谢谢

编辑-似乎我可能正在寻找的实际上是

```
git update-index --assume-unchanged example.txt 
```

这似乎将允许文件在两个环境中继续存在，而无需监视它的任何更改。

我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:45:45.520

```
 git update-index --assume-unchanged example.txt 
```

是一种可能的解决方案，但请注意您可能需要执行的任何 git reset 操作：我们也会重置那些“忽略”的文件。

```
 git update-index --skip-worktree example.txt 
```

是另一种忽略这些文件的方法，确保不会重置任何本地修改。
也可以看看：

*   “[如何做出只有我能看到的改变？](https://stackoverflow.com/questions/2749726/how-to-make-changes-that-only-i-can-see) ”
*   “[撤消`git update-index --skip-worktree`](https://stackoverflow.com/a/11131211/6309)”）

# html - 如何在 IE7 中定位输入值并删除文本

> ID：13922923
> 
> 赞同：1
> 
> 时间：2012-12-17T21:59:52.493
> 
> 标签：html, css, forms, input

我有`input`一个提交按钮的字段：

```
<input id="searchSubmit" type="submit" value="Search" /> 
```

我在`CSS`按钮上放了一个背景图像，看起来像放大镜，而不是默认按钮。

这适用于大多数浏览器，但我在使用 IE 7 和`value`显示在图像顶部的文本时遇到问题。

有没有一种简单的方法可以在不将其从元素`value`字段中删除的情况下摆脱该文本？`input`大意是：

```
#searchSubmit input[type="submit"][value=Search] {
    text-indent:-999em !important;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:14:35.970

只需将这个简单而优雅的解决方法添加到您的 CSS 中。

> 不幸的是，单独的负缩进不能从 IE7 中的按钮元素中删除文本，但添加 text-transform: capitalize; 快！

```
#searchSubmit {
     text-indent: -9000px;
     text-transform: capitalize;
} 
```

来源：[http ://css-tricks.com/snippets/css/remove-button-text-in-ie7/](http://css-tricks.com/snippets/css/remove-button-text-in-ie7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:10:22.150

将字体大小设置为零。*****前缀将针对 IE7（和 IE7）。

```
#searchSubmit  {
    *font-size:0;
    *width:50px;
    *height:22px;
}​ 
```

您需要指定宽度和高度才能使其正常工作，因为按钮的大小是基于文本的。

同样在 CSS 中，如果项目有 ID，则不需要任何辅助选择器：

```
#searchSubmit {...} 
```

不是：

```
#searchSubmit input[type="submit"][value=Search] {...} 
```

# c++ - 无法将对象保存到向量 C++

> ID：13922925
> 
> 赞同：-2
> 
> 时间：2012-12-17T21:59:58.157
> 
> 标签：c++

```
 Sprite1 *enemy = new Sprite1(100, 100, "enemy.bmp", *screen);
            enemy->DrawJon(screen);

            enemyList.insert(enemyList.end(), *enemy); 
```

由于某种原因，敌人没有被存储在列表中。有任何想法吗？

# 编辑：

还有如何访问对象并在病房后使用它们，例如：

```
for (int g=0; g<enemyList.size(); g++)
            {
                Sprite1 enemyToMove = enemyList.at(g); //.at(g);
                enemyToMove.MoveJon(0, 50, screen);
            } 
```

# 编辑：

因此，即使这已经关闭，我仍然希望人们知道解决方案是什么。我没有创建一个在类上设置属性的构造函数。最后，我能够使用默认构造函数和 setter 方法来实现它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T22:05:40.887

它在结束之前插入对象的副本`enemyList`。为此，您应该更喜欢`enemyList.push_back(*enemy)`. 但是，请注意，它是一个*副本*。如果您想在 内部和外部引用相同的对象`std::vector`，您将需要一个指针向量（最好是智能指针）。例如：

```
std::vector<std::shared_ptr<Sprite1>> enemyList;

std::shared_ptr<Sprite1> enemy(new Sprite1(100, 100, "enemy.bmp", *screen));
enemy->DrawJon(screen);

enemyList.push_back(enemy); 
```

或者，使用`std::vector<std::reference_wrapper>`.

如果您*已将*您更改`std::vector`为包含指针或`std::reference_wrapper`s，您可以像这样访问敌人：

```
std::shared_ptr<Sprite1> enemyToMove = enemyList[g];
// or
std::shared_ptr<Sprite1>& enemyToMove = enemyList[g]; 
```

如果您仍然直接包含s，则需要保留对or`Sprite1`返回的对象的引用，否则您将复制它：`operator[]``at`

```
Sprite1& enemyToMove = enemyList[g]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:07:44.710

您发布的代码未存储`enemy`在列表中，而是存储敌人的**副本**。

您可能希望将enemyList 的类型更改为a `std::vector<Sprite1*>`，然后您可以使用

```
enemyList.insert(enemyList.end(), enemy); 
```

插入您的对象（或为简洁起见将其替换`push_back()`为）。

这种方法意味着你必须照顾分配的内存，例如当你清除你的列表时，但这会让你现在就开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T22:05:38.620

.end() 返回向量中存储的最后一个元素之后的元素。因此，它是插入东西的无效位置。

要将对象附加到向量的末尾，请使用 .push_back()

# jquery - jquery多种形式

> ID：13922926
> 
> 赞同：0
> 
> 时间：2012-12-17T21:59:58.477
> 
> 标签：jquery, html, forms

我使用 jQuery 进行验证，然后使用 AJAX 在单个页面上提交多个表单。用户每次访问只需填写一份表格。目前 jQuery 只能定位和验证第一个表单，我不确定如何调整它以处理其他表单的存在 - 该脚本是从一个运行良好的单一表单环境中获取的。我看过各种关于能够做到这一点的帖子，但我不知道如何将它们应用于我的情况。

```
<script type="text/javascript">
function validateEmail(email) { 
    var reg = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return reg.test(email);
}

$(document).ready(function() {
     $("#contact").submit(function() { return false; });    

     $('a').click(function(e) {
         $('#product').val($(this).attr('id'));     
         $('#sub').val('I am interested in ' + this.id);    
     });        

     $("#send").on("click", function(){
        var emailval  = $("#email").val();
        var msgval    = $("#msg").val();
        var msglen    = msgval.length;
        var mailvalid = validateEmail(emailval);
        var nameval    = $("#name").val();
        var namelen    = nameval.length;

        if(mailvalid == false) {
            $("#email").addClass("error");
        }
        else if(mailvalid == true){
            $("#email").removeClass("error");
        }

        if(msglen < 4) {
            $("#msg").addClass("error");
        }
        else if(msglen >= 4){
            $("#msg").removeClass("error");
        }

        if(namelen < 1) {
            $("#name").addClass("error");
        }
        else if(namelen >= 1){
            $("#name").removeClass("error");
        }

        if(mailvalid == true && msglen >= 4 && namelen >= 1) {
            // if both validate we attempt to send the e-mail
            // first we hide the submit btn so the user doesnt click twice
            $("#send").replaceWith("<span class=sending>sending...</span>");

            $.ajax({
                type: 'POST',
                url: 'rfq.php',
                data: $("#contact").serialize(),
                success: function(data) {
                    if(data == "true") {
                        $("#contact").fadeOut("fast", function(){
                            $(this).before("<span class=success>Success! Your message has been sent.</span>");
                            setTimeout("$.fancybox.close()", 5000);
                        });
                    }
                }
            });
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:12:15.470

以下是一些关于如何做到这一点的想法。我没有完成它，因为我没有时间连接一个表单转储器来测试它，也没有时间运行 fancybox 并创建所有与之配套的 html。

它是一个通用处理程序，应该处理具有类“联系人”的多个表单，这些表单都具有名称、电子邮件和 msg 字段

您将不得不修改一些选择器，例如我不知道您是否想要每个表单的发送跨度，所以我假设您这样做了并且它是表单的兄弟

```
 $(".contact").submit(function() { 
        var form = $(this);
        var name  = form.find("input[name='fullname']");
        var email = form.find("input[name='email']");
        var msg   = form.find("input[name='msg']")

        var emailval  = email.val();
        var msgval    = msg.val();
        var msglen    = msgval.length;
        var mailvalid = validateEmail(emailval);
        var nameval    = name.val();
        var namelen    = nameval.length;

        name.toggleClass("error",namelen < 1) 
        email.toggleClass("error",!mailvalid);
        msg.toggleClass("error",msglen< 4) 

        if (name.hasClass("error") || email.hasClass("error") || msg.hasClasss("error")) return false;

        form.sibling(".send").replaceWith("<span class=sending>sending...</span>");

        $.ajax({
          type: 'POST',
          url: 'rfq.php',
          data: form.serialize(),
          success: function(data) {
            if(data == "true") {
              $(form).fadeOut("fast", function(){
                $(this).before("<span class=success>Success! Your message has been sent.</span>");
                setTimeout("$.fancybox.close()", 5000);
              });
            } // if
          } // success
        }); // ajax
        return false; // cancel the submit
      }); 
```

# matlab - 将字符串元胞数组粘贴到剪贴板

> ID：13922929
> 
> 赞同：1
> 
> 时间：2012-12-17T22:00:10.863
> 
> 标签：matlab

如果我有一个字符串单元格数组，将其复制到剪贴板以便我可以将其粘贴到 Excel 电子表格中的最佳方法是什么（每个字符串都进入一个单独的单元格）？我知道我可以像这样粘贴一个元素：`clipboard('copy', x{1})`，但是我怎样才能快速粘贴整个内容`x`呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T23:36:51.960

**回答**

诀窍是用制表符分隔数据：制表符分隔列，换行符分隔行。

下面的代码可以重写以提高效率（通过消除每一行的字符串 concat），但你明白了。对于庞大的数据集，最好不要使用`dlmwrite()`以避免内存限制。

**例子**

```
function fancyClipboard(myCell)
  if ~iscell(myCell), error('Input must be a cell'); end
  if ndims(myCell) > 2, error('Only 1D & 2D cells supported.'); end

  str = [];
  newline = sprintf('\n');
  for i = 1:size(myCell, 1); 
    row = sprintf('%s\t', myCell{i,:});
    row(end) = newline;
    str = [str row]; %#ok<AGROW>
  end
  clipboard('copy',str);
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:45:59.337

如果您不想弄乱自动化，这是一种非常简单的方法：

1.  双击工作区中的变量。
2.  在`Variables`窗口中单击左上角的框以选择整个单元阵列。
3.  右键单击-> 复制。粘贴到任何你喜欢的地方！

我已经在 Linux 中使用 R2012b 和 Libre Office 对此进行了测试。它也应该适用于 Excel。

# layout - 如何在顶部设置 SSRS 参数面板？

> ID：13922932
> 
> 赞同：1
> 
> 时间：2012-12-17T22:00:21.773
> 
> 标签：layout, reporting-services, parameters, location

我正在使用 Visual Studio 2012 开发 SSRS 页面。当我在 Visual Studio 中使用“预览”模式时，参数位于报告页面的顶部，正如快照所示：

![在此处输入图像描述](../Images/e8848e68b6f6988cf8768e626426128d.png)

但是，在我将报告部署到 sharepoint 2008 站点后，参数面板移到了右侧。如何在预览模式下将参数面板置于顶部？

PS如果我在一个仪表板中分别为参数和表格制作两个Webpart，这种方法会起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:53:54.333

使用此处详述的报告包装器可能会有所帮助。

[报告包装器](http://blogs.msdn.com/b/microsoftbob/archive/2009/08/20/a-wrapper-for-running-sql-server-2008-reporting-services-reports-anonymously.aspx)

# php - PHP - 从字符串中删除

> ID：13922937
> 
> 赞同：-4
> 
> 时间：2012-12-17T22:00:29.420
> 
> 标签：php, string

我有一个字符串： `/123.456.789.10:111213` 我怎样才能删除`'/'`和`':111213'`，所以我仍然会有`123.456.789.10`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:06:19.993

尝试使用[strpos](http://php.net/manual/en/function.strpos.php)函数查找 ":" 的位置，然后使用[substr](http://cz2.php.net/manual/en/function.substr.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:06:28.417

有很多方法可以做到这一点，最简单的可能是这样：

```
$result = split('[/:]', $your_string);
$result = $result[1]; // gives "123.456.789.10" 
```

证明它有效：http: [//ideone.com/B6Kx6d](http://ideone.com/B6Kx6d)

但这实际上取决于您想要支持多少初始字符串的变体 - 下面是另一个解决方案（证明：http: [//ideone.com/Y6oW6F](http://ideone.com/Y6oW6F)）：

```
preg_match_all('</(.+)[:]>', $in, $matches);
$result $matches[1][0]; // gives "123.456.789.10" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T22:08:56.847

如果要使用正则表达式匹配，请执行以下操作：

```
input = "/123.456.789.10:111213";
echo preg_replace("/(\/)|(:111213)/", '', $input); 
```

尽管对于这种特定情况，简单的字符串函数（下面回答）可能更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T22:04:31.333

```
echo substr($string, 1, strpos($string, ':')); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T22:09:38.673

```
$s = explode(":",$your_string);
echo = substr($s[0], 1); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T22:05:23.050

不要将正则表达式用于如此简单的事情。字符串函数要快得多...

```
$old = '/123.456.789.10:111213';
$new = substr($old, strpos($old, '/') + 1, strpos($old, ':'));
echo $new; 
```

# java - 在 Java 中使用多个 void

> ID：13922944
> 
> 赞同：0
> 
> 时间：2012-12-17T22:00:45.293
> 
> 标签：java, swing, concurrency, jlabel, event-dispatch-thread

在过去的几个月里，我尝试过用 Java 编程，而且大部分都没有遇到任何问题，但现在我在处理 void 时遇到了一些麻烦。在我的程序中，用户按下一个按钮，目标是在 JLabel 上显示多条消息，这些消息使用 Thread.sleep() 方法展开。由于某种原因，只有最后一个最终被发送。这是我的代码。这不是全部，但我很确定问题出在此处。那里的错误输出是为了尝试查看代码中发生了什么，但是，显然它们最终没有工作。

```
private class ClickListener implements ActionListener 
{    
    public void actionPerformed(ActionEvent e)
    {
        try {
            if (e.getSource() == exitButton)
                System.exit(0);

            else if (e.getSource() == button1)
                alValue = "This is the new message text.";
            System.err.println(alValue);
            createNewArrayList();
            Thread.sleep(3000);
            alValue = "Back to invisible...";
            System.err.println(alValue);
            createNewArrayList();
            Thread.sleep(2000);
            alValue = "";
            System.err.println(alValue);
            createNewArrayList();
        } catch (InterruptedException ex) {
            Logger.getLogger(EmptySpace.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
} 
```

和

```
private void createNewArrayList() {
    ArrayList al = new ArrayList();
    al.add(alValue);
    label1.setText("" + al);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:11:58.747

不要调用`Thread.sleep()`，而是`EDT`使用 Swing [Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)。相应地调整周期间隔以改变`System.out`呼叫之间的延迟。*始终*使用大括号来阐明`if`语句的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:08:06.550

我不确定这是否是一个错字，但您尚未将 alvalue 定义为 actionperformed() 函数的成员。而且在 java 中缩进也不是衡量你需要放置大括号 {} 的范围

```
if (e.getSource() == button1)
  {
                 alValue = "This is the new message text.";
                 System.err.println(alValue);
                 createNewArrayList();
                 Thread.sleep(3000);
                 alValue = "Back to invisible...";
                 System.err.println(alValue);
                 createNewArrayList();
                 Thread.sleep(2000);
                 alValue = "";
                 System.err.println(alValue);
                 createNewArrayList();
} 
```

# html - 如何使这些重叠元素居中？

> ID：13922954
> 
> 赞同：-1
> 
> 时间：2012-12-17T22:01:51.210
> 
> 标签：html, css, webkit, centering, overlap

页面在[这里](http://creativedesigninfluence.com/tests/circle.php)。来源非常简单。我试过用`absolute`定位和其他一些方法来做到这一点，但没有一个是完全正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T22:14:06.587

见这里：http: [//jsfiddle.net/yXUdN/](http://jsfiddle.net/yXUdN/)

我改变了这些：

```
#title {
    position:absolute;
    width:240px;
    height:240px;
    z-index:99;
}
#space-link {
    position:absolute;
    margin:auto;
    top:40%;
    left:30%;
    font-family: 'Josefin Slab', serif;
    font-size:2em;
    color:#FFF;
    z-index:99;
} 
```

对此：

```
#title {
}
#space-link {
    font-family: 'Josefin Slab', serif;
    font-size:2em;
    color:#FFF;
    text-align:center; /* horizontal center */
    line-height:240px; /* vertical center */
}​ 
```

您也可以使用`display:table`规则来完成此操作，这在文本跨越多行的情况下会更好：http: [//jsfiddle.net/yXUdN/1/](http://jsfiddle.net/yXUdN/1/)

```
.space-button {
    ...
    display:table;
}
#title {
    display:table-row;
}
#space-link {
    ...
    vertical-align:middle;
    text-align:center;
    display:table-cell;
}​ 
```

此外，您不应该有多个具有相同 ID 的元素。改用类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:15:56.370

您可以为这三个元素创建一个包装器并将以下 css 应用于它

```
.wrapper {
    position: fixed;
    left: 50%;
    top: 50%;
    margin-left: -408px; /* half of the total width of the three elements (272 * 3) / 2 */
    margin-top: -136px; /* half of the height of one of the elments 272 / 2 */
} 
```

# centos - 在 CentOS 上安装没有 mysql-server 的 MySQL-python

> ID：13922955
> 
> 赞同：13
> 
> 时间：2012-12-17T22:01:53.940
> 
> 标签：centos, mysql-python

我正在尝试在运行 CentOS 5.5 和 python 2.7 的机器上安装 MySQL-python。这台机器没有运行 mysql 服务器，这个盒子将使用的 mysql 实例托管在单独的服务器上。我确实有一个工作的mysql客户端。在尝试`sudo pip install MySQL-python`时，我得到一个错误`EnvironmentError: mysql_config not found`，据我所知，这是一个仅引用的命令`/etc/my.cnf`，它也不存在。在我继续创建虚假的 my.cnf 文件之前，有没有一种简单的方法来安装 MySQL-python？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-18T11:35:13.757

因此，mysql_config 是 mysql-devel 的一部分。mysql-devel 用于编译 mysql 客户端，而不是服务器。安装 mysql-devel 允许安装 MySQL-python。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-21T20:59:11.417

我找不到特定于 CentOS 6.x 的问题，而且该解决方案不适用于该平台。我将在这里发布我的发现，希望它可以帮助下一个遇到问题的可怜人。

CentOS Yum 存储库提供不包含 mysql_config 的 MariaDB 发行版版本。要解决此问题，请将包含以下内容的文件添加到 /etc/yum.repos.d/MariaDB.repo：

```
# MariaDB 5.5 CentOS repository list - created 2016-04-21 20:25 UTC
# http://mariadb.org/mariadb/repositories/
[mariadb]
name = MariaDB
baseurl = http://yum.mariadb.org/5.5/centos6-amd64
gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB
gpgcheck=1 
```

这是 MariaDB 在[https://downloads.mariadb.org/mariadb/repositories/](https://downloads.mariadb.org/mariadb/repositories/)指定的 repo 配置（针对 CentOS 6 和 MariaDB 5.5） 。当然，如果您的环境不同，您应该通过该 URL 的配置器。

完成后，您可能需要致电

```
yum remove MariaDB-devel
yum clean metadata
yum install MariaDB-devel 
```

然后尝试安装 Pip。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-04-11T17:48:29.033

我正在使用 RHEL 7 并且有同样的问题

```
sudo yum install mariadb-devel 
```

对我来说很好:)

注意：以上评论已被编辑以删除错字

# actionscript-3 - 使用链接创建 Sprite 派生符号

> ID：13922956
> 
> 赞同：0
> 
> 时间：2012-12-17T22:01:54.630
> 
> 标签：actionscript-3, flash, sprite, linkage

刚刚发现可以在 Flash Professional IDE 中为具有 Sprite 类作为父级的符号提供链接。以前我确信唯一的选择是 MovieClip。

问题是：

如何让这些符号在运行时播放动画？当我将它放在 IDE 中的舞台上时，我可以扩展父级的时间线并使用 Loop 或 Play First 属性来控制精灵内部的动画。但是，如果我在运行时实例化该 Sprite 派生类，我不知道如何对其进行动画处理 :( 没有 play() 并且我不知道如何将它的时间线链接到父级的时间线请帮助。

更新：可能我误解了 Shape 和 Sprite 类的区别。所以我需要 Shape 或 Sprite 实例:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T00:04:35.817

假设您的 IDE 中有一个名为 Bear_animation 的带有链接的符号，它是一个 MovieClip。

然后，您可以在代码中创建一个实例，如下所示：

```
// create an instance of your bear_animation symbol in library
var bearAnimation:MovieClip = new bear_animation; 
```

然后你可以将它添加到舞台并像这样播放：

```
addChild(bearAnimation);
bearAnimation.gotoAndPlay(1); 
```

另外，我相信您对 Sprite 是什么感到困惑。Sprite 是静态图形图像，没有时间线，因此它没有动画。因此，您没有播放动画的选项。

MovieClip 有一个时间线，因此可以有一组可以播放的帧。所以你只需使用：

```
yourMovieClip.gotoAndPlay(<frame_number_to_start_on>); 
```

这行代码将从您指定的任何帧开始播放 yourMovieClip 的动画。

您无法为 Sprite 设置动画，因此您对这个问题的初始前提与第二部分相结合是可撤销的。如果要制作动画，则需要一个 MovieClip。我的建议是，如果您有带动画的元件，则需要在 IDE 中将其更改为 MovieClip。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:44:26.987

正如其他人所提到的，Sprite 对象中没有时间线/帧。来自 Sprite 类 api 参考：

> Sprite 对象类似于影片剪辑，但没有时间线。Sprite 是不需要时间线的对象的适当基类。例如，Sprite 将是通常不使用时间线的用户界面 (UI) 组件的逻辑基类。

该类没有任何播放帧的方法，甚至没有任何引用帧的方法。如果您需要帧或时间线，请使用 Movieclip：

来自 Movieclip api 参考：

> 与 Sprite 对象不同，MovieClip 对象具有时间线。

一个精灵基本上只有一帧。要为 sprite 中的对象设置动画，您必须通过代码对其进行动画处理。虽然我从未真正尝试过，但我认为如果您将 Movieclip（带帧）投射到 Sprite 中，它会卡在第一帧上。

# mysql - Ruby/Rails - 动态指定类的连接属性

> ID：13922959
> 
> 赞同：0
> 
> 时间：2012-12-17T22:02:04.853
> 
> 标签：mysql, ruby-on-rails, ruby, module

我们的应用程序接收来自各种提要的数据。

一个提要以数据库的形式提供给我们。因此，我们让这个数据库与我们的应用程序数据库位于同一个 MySQL 服务器实例中。对此提要数据库的进一步更新以增量形式提供，并且必须处理到完整的提要数据库中。

所以我有：

*   app_db
*   feed_db
*   feed_delta_db

`feed_db`并`feed_delta_db`具有相同的结构（表、列等）。

有时我需要访问`feed_db`，有时我需要访问`feed_delta_db`.

在我开始接收增量之前，我`feed_db`是这样访问的：

```
module Feed
  module Db
    module InstanceMethods
      def something
        puts 'pffffft'
      end
    end

    def self.included(receiver)
      receiver.send :include, InstanceMethods
      receiver.instance_eval {
        establish_connection(
          {
            :adapter => "mysql2",
            :database => "feed_db",
            :username => "mysql_user",
            :password => nil,
            :host => "localhost"
          }
        )
      }
    end
  end

  class FeedModel < ActiveRecord::Base
    include Db
    self.abstract_class = true
  end

  class Sometable < FeedModel
    set_table_name "sometable"
    belongs_to :someothertable, :foreign_key => "SomeothertableID", :primary_key => "id"

    def name
      "#{field1} #{field2}"
    end
  end
end 
```

现在我可以复制所有这些代码`feed_delta_db`，而我唯一需要更改的是连接详细信息中指定的数据库。

但这不是 DRY，是吗？

结果将是我想要的。我可以像这样访问单独数据库中的表： `Feed::Sometable`和`FeedDelta::Sometable`

如何将我的类定义分离到它们自己的文件中，并将它们包含/需要/无论它们放入单独的模块（或类）中，以便我可以随意访问任一数据库？

让我知道是否有任何不清楚的地方。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:27:40.733

我会定义一个通用父类，然后在子类中切换数据库

```
class GenericParent < ActiveRecord::Base
  self.abstract_class = true
end

class Feed < GenericParent
  establish_connection :feed_db
end

class FeedDelta < GenericParent
  establish_connection :feed_delta_db
end

# config/database.yml
development:
  ...

feed_db:
  ...

feed_delta_db:
  ... 
```

尊重不同的环境是明智的。所以你`establish_connection`可能看起来更像：

```
class Feed < GenericParent
  establish_connection :"feed_#{Rails.env}"
end 
```

这将允许您在 database.yml 中拥有 feed_development、feed_staging、feed_production 等部分

# java - 如何使用 Super CSV 从 CSV 文件中删除一行？

> ID：13922967
> 
> 赞同：1
> 
> 时间：2012-12-17T22:02:26.530
> 
> 标签：java, supercsv

我对 Super CSV 并不陌生。只是想检查是否有删除或修改 CSV 文件中的一行的规定？

查看源代码，我看不到 RandomAccessFile 在 rw 模式下的使用。有什么方法可以定制这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:37:18.660

Super CSV 不支持编辑 CSV 文件。

快速而肮脏的解决方案是创建 CSV 文件的副本（即使用 Super CSV 读取每一行，然后将其写入不同的文件）。您可以很容易地选择是修改数据还是省略一行。

正如您可能已经看到的，Super CSV 与 Readers/Writers 一起使用。可以编写自己的 Reader/Writer 来包装 RandomAccessFile，然后 Super CSV 可以使用它，但制作副本可能更简单。

# php - 通过 SMTP 在 PHP 中发送电子邮件。隐藏服务器 IP

> ID：13922969
> 
> 赞同：3
> 
> 时间：2012-12-17T22:02:40.740
> 
> 标签：php, email, networking, smtp

我的应用程序的用户可以通过他们的 SMTP 信息发送电子邮件。

我想 100% 代表他们的 SMTP 发送电子邮件。如果有人开始发送垃圾邮件，我不希望其他用户受到负面影响。

但是在收到的 headers 中，我看到了我的服务器 IP，所以我想每个人都会受到影响。

如何确保服务器不负责？我需要确保 1 个人不能搞砸其他人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:10:27.143

由于您是这种情况的中间人，即您代表其他人连接到 SMTP 服务器，因此由您的*应用程序*来处理垃圾邮件。您无法仅在网络级别解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T00:51:13.390

由于您在从 PHP 发送的电子邮件的标头中看到了您的服务器 IP，因此我可以假设：

1.  您正在运行自己的 SMTP 服务器（因此标题中出现“我的服务器 IP”）？
2.  您的用户可以通过身份验证（可能是 SASL）通过 SMTP 访问此服务器吗？
3.  当您从 PHP 向 SMTP 服务器提交邮件时，您是在使用 SMTP 凭据进行身份验证吗？

如果这是真的，那么您确实有一些有限的选择来防止用户被入侵并发送垃圾邮件。

第一个选项是在 PHP 应用程序中实现速率限制，使用持久存储来记录一段时间内发送的电子邮件数量。但是，此解决方案非常有限，因为它不包括滥用 SMTP 服务器本身。

我的建议是调查**策略服务器**，例如[policyd](http://www.policyd.org/)并实施[配额](http://www.policyd.org/content/quotas)。使用指定每小时最大发送速率的 SASL 用户名的配额将有助于降低被添加到垃圾邮件黑名单的可能性。如果您选择的策略服务器支持达到配额的通知，我也会实施（允许您识别定期达到配额的用户，表明帐户有问题）。

决定您希望限制发送的速率是困难的，因为您必须平衡用户需求和保护。也许一个好的起点是监控您的用户当前每小时发送的平均电子邮件数量，并以此为起点？

同样，以上假设上述三点是正确的。如果您只是将邮件传递给 SMTP 守护程序而无需身份验证，或者服务器是外部的并且无法修改，那么您将不得不在 PHP 中强制执行限制。

# c++ - 错误 C2664：“SQLGetData”：无法将参数 6 从“SDWORD *”转换为“SQLLEN *”

> ID：13922974
> 
> 赞同：2
> 
> 时间：2012-12-17T22:03:33.977
> 
> 标签：c++, visual-studio-2008, visual-c++, 64-bit

我有在 Visual Studio 2008 上以 32 位模式编译的代码。现在我试图在 64 位模式下编译它。我遇到此错误的地方是：

```
SDWORD temp=0;
SDWORD & readlen = (pValue?*pValue:temp); 
retValue=::SQLGetData(hStatement,mCurrentCol=column,cType,actualbuff,len,&readlen); 
```

我试图用谷歌搜索错误消息，但没有找到我可以使用的解决方案。谁能帮我这个。有什么方法可以将 SDWORD 类型转换为 SQLLEN？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T14:20:05.427

第六个参数的实际类型是 SQLGetData，即 SQLLEN*。MS 的文档也使用 SQLINTEGER*。您的代码将其视为 SDWORD*。这是一个简单的转换*IF* SQLLEN 和 SDWORD 具有相同的基础数据类型。但是，如果 SQLLEN 是 64 位宽的值，而 SDWORD 是 32 位宽的值，那么强制转换就不够了。在这种情况下，您可以尝试：

```
SQLLEN length=0;
retValue=::SQLGetData(hStatement,mCurrentCol=column,cType,actualbuff,len,&length);
if (pValue)
    *pValue = length; 
```

# java - 如何使用 jsoup 获取参数值？

> ID：13922979
> 
> 赞同：0
> 
> 时间：2012-12-17T22:03:51.430
> 
> 标签：java, android, jsoup

我正在尝试使用 jsoup 获取参数值，但我无法做到这一点。

这是 HTML 示例：

```
<object id="a5514fbc4f070b58cfbfb2a17ad3011a" name="a5514fbc4f070b58cfbfb2a17ad3011a" type="application/x-shockwave-flash" data="http://player.sambatech.com.br/current/2.0.57/profiles/samba/sambaPlayer.swf" width="620" height="410">
<param name="flashvars" value="http://webcast.sambatech.com.br/80479D/origin1/account/143/3/2012-12-14/video/89903bb228d0af488d9dbb1228c3728a/121412AlbertoAcostaSeguridad.mp4">
</object> 
```

这是我迄今为止尝试过的，但没有运气：

```
Document doc = Jsoup.connect(providerUrl).get();
Element p_un = doc.select("param[name=flashvars]").first();
String v = p_un.attr("value"); 
```

请我需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T04:25:24.313

[您可以使用val()](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#val%28%29)方法简单地访问该值。

```
Document doc = Jsoup.connect(providerUrl).get();
// Simple selector. If you wanna get the particular param, 
// change the selector to ("#a5514fbc4f070b58cfbfb2a17ad3011a > param")
Element el = doc.select("param").first();
String value = el.val(); 
```

# java - 尝试提取文件时jar命令在java中不起作用

> ID：13922981
> 
> 赞同：2
> 
> 时间：2012-12-17T22:03:51.953
> 
> 标签：java

当我尝试使用命令提示符将文件解压缩到我的 webapp 文件夹中时，它不断抛出错误。

```
C:\Users\Jamuna\workspace1\TestSolr\webapp>java -jar -xvf C:\Users\Jamuna\Deskto
p\apache\apache-solr-4.0.0\dist\apache-solr-4.0.0.war 
```

> 无法识别的选项：-xvf

错误：无法创建 Java 虚拟机。

错误：发生了致命异常。程序将会退出。

请让我知道为什么会这样？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T22:31:23.840

您应该运行 jar.exe，而不是 java.exe。jar.exe 应该在 JDK/bin 目录下，即

```
C:\Program Files (x86)\Java\jdk1.6.0_25\bin\jar.exe -xvf apache-solr-4.0.0.war 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-11T11:16:06.003

你混淆了

```
java -jar my-own-jarfile.jar 
```

（启动适当准备的应用程序）和

```
jar -xvf my-own-jarfile.jar 
```

（提取 jar 文件的内容）命令。我不止一次做过同样的事情。

# php - 比较 PHP 中的数组日期

> ID：13922982
> 
> 赞同：0
> 
> 时间：2012-12-17T22:03:53.473
> 
> 标签：php, arrays, compare

我在 MySQL 表中有两个日期列表，输出如下：

```
$BetDate - array(25) { [0]=> int(1355468400) [1]=> int(1355468400) [2]=> int(1355468400) [3]=> int(1355468400) [4]=> int(1355468400) [5]=> int(1355468400) [6]=> int(1355295600) [7]=> int(1355295600) [8]=> int(1355295600) [9]=> int(1355295600) [10]=> int(1355468400) [11]=> int(1355468400) [12]=> int(1355209200) [13]=> int(1355209200) [14]=> int(1355209200) [15]=> int(1355295600) [16]=> int(1355209200) [17]=> int(1355209200) [18]=> int(1355468400) [19]=> int(1355468400) [20]=> int(1355554800) [21]=> int(1355554800) [22]=> int(1355554800) [23]=> int(1355554800) [24]=> int(1355554800) } 
array(25) { [0]=> string(10) "2012-12-14" [1]=> string(10) "2012-12-14" [2]=> string(10) "2012-12-14" [3]=> string(10) "2012-12-14" [4]=> string(10) "2012-12-14" [5]=> string(10) "2012-12-14" [6]=> string(10) "2012-12-12" [7]=> string(10) "2012-12-12" [8]=> string(10) "2012-12-12" [9]=> string(10) "2012-12-12" [10]=> string(10) "2012-12-14" [11]=> string(10) "2012-12-14" [12]=> string(10) "2012-12-11" [13]=> string(10) "2012-12-11" [14]=> string(10) "2012-12-11" [15]=> string(10) "2012-12-12" [16]=> string(10) "2012-12-11" [17]=> string(10) "2012-12-11" [18]=> string(10) "2012-12-14" [19]=> string(10) "2012-12-14" [20]=> string(10) "2012-12-15" [21]=> string(10) "2012-12-15" [22]=> string(10) "2012-12-15" [23]=> string(10) "2012-12-15" [24]=> string(10) "2012-12-15" }    

$BetGameDate - array(4) { [0]=> int(1355554800) [1]=> int(1355468400) [2]=> int(1355900400) [3]=> int(1355554800) }
array(4) { [0]=> string(10) "2012-12-15" [1]=> string(10) "2012-12-14" [2]=> string(10) "2012-12-19" [3]=> string(10) "2012-12-15" } 
```

这是我的一些PHP代码：

```
foreach($checkit as $row1) {
    $BetDate[] = strtotime($row1['BetDate']);
    }
    foreach($result as $row) {
    $BetGameDate[] = strtotime($row['GameDate']);
    }
    for($i=0; $i<=$count; $i++) { 
if($BetDate==$BetGameDate[$i]) {
    echo "Hello2";
    }
} 
```

但是，我想以下列方式比较日期：我想循环`$BetGameDate`查看 中的任何日期是否`$BetDate`与 的第 i 个选择相匹配`$BetGameDate`。我的代码没有回显结果，真正让我困惑的是，当我在 if 语句中更改`$BetDate`为时`$BetDate[$i]`，它会回显 Hello2 两次，此时只有一个选择应该相等（第二个值，数组中的第一个位置）。有没有人有关于如何`$BetGameDate[$i]`与所有日期进行比较的建议`$BetDate[]`？

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:06:07.517

试试这个函数：[array_intersect](http://php.net/manual/en/function.array-intersect.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:08:21.510

这很简单：

```
<?php
$array1 = array('1', '2', '3');
$array2 = array('0', '2', '0');
$length = count($array1);

for ($i = 0; $i < $length; $i++) {
    $key = array_search($array1[$i], $array2);

    if ($key != null && $key > 0) {
        echo 'HELLO 2';
    }
}
?> 
```

只需将您的 $BetDate 更改为 $BetDate[$i]。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T22:11:35.320

不确定为什么要在 BetDate 的 for 循环中遍历 GameDate 中的结果列表。

我想你可能想做：

```
foreach($checkit as $row1) {
    $BetDate[] = strtotime($row1['BetDate']);
}
foreach($result as $row) {
    $BetGameDate[] = strtotime($row['GameDate']);
}
$matchArray = array_intersect($BetDate, $BetGameDate); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T22:13:25.663

```
for($BetGameDate as $b) { 
    for($BetDate as $bet){
        if($b == $bet) {
            echo "Hello2";
        }
    }
} 
```

这应该将每个 BetDate 与每个 BetGameDate 进行比较。但我猜 array_intersect 更容易实现。

编辑：刚刚看到 BetDate 不长于 BetGameDate

# java - JAVA SPRING MVC 在页面显示之前修改输出流

> ID：13922983
> 
> 赞同：1
> 
> 时间：2012-12-17T22:03:57.833
> 
> 标签：java, spring, interceptor

在 Spring 将输出内容刷新到页面之前，有没有正确的方法可以修改输出内容？内容准备好后，我需要运行正则表达式来修复所有链接。

假设我使用拦截器，我如何获取渲染的内容，修改它并将其设置回来？

```
public class SpringControllerInterceptor extends HandlerInterceptorAdapter {

    @Override
    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception {
        System.out.println("postHandle");

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:05:06.623

您可以添加一个`Filter`层来处理您的响应，您可以抓取整个响应正文并处理您想要的链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:21:20.430

Spring MVC Interceptor would be the one of the way of doing this. Override [postHandle](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/web/servlet/HandlerInterceptor.html#postHandle%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse,%20java.lang.Object,%20org.springframework.web.servlet.ModelAndView%29) method to update the http response object.

```
void postHandle(HttpServletRequest request,
                HttpServletResponse response,
                Object handler,
                ModelAndView modelAndView)
                throws Exception 
```

Intercept the execution of a handler. Called after HandlerAdapter actually invoked the handler, but before the DispatcherServlet renders the view.

Read more:

1.  [Spring MVC Interceptor example](http://viralpatel.net/blogs/spring-mvc-interceptor-example/)
2.  [Spring Interceptor Documentation](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-handlermapping-interceptor)

# sql - SQL 从两行计算一列

> ID：13922988
> 
> 赞同：2
> 
> 时间：2012-12-17T22:04:04.003
> 
> 标签：sql, multiple-columns, calculated-columns

我希望根据其他两列计算一列，但我有一些特殊情况，计算必须考虑多行。

这是现在的查询：

```
SELECT
    UserName
    , EntryDate
    , Project
    , HoursWorked
    , HoursAvailable
    , UtilPct as HoursWorked / HoursAvailable
FROM
    MyDatabase
ORDER BY
    EntryDate 
```

结果是：

`UserName EntryDate ``Project HoursWorked HoursAvailable UtilPct
Justin ```12/17/2012 ABC `````8 ```````8 ````````````100
Justin ```12/18/2012 ABC `````4 ```````8 ````````````50
Justin ```12/18/2012 DEF `````4 ```````8 ````````````50```````````````````````````````````````````````````````````````````````````````````` 

 ``但是最后两个条目的 50% 利用率是错误的，因为两者都发生在同一天。这两行都应该显示 100%。

我需要查询...

1.  总结某一天的所有工作时间
2.  除以当天的最大可用小时数
3.  将该值放入每行的 UtilPct 列

我如何让它做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:22:05.747

> 我需要查询...
> 
> 总结某一天的所有 HoursWorked 除以该天的最大 HoursAvailable 将该值放入每行的 UtilPct 列
> 
> 我如何让它做到这一点？

总结所有的工作时间：

```
SUM(HoursWorked) ... GROUP BY EntryDate 
```

除以当天的最大可用小时数

```
SUM(HoursWorked)/MAX(HoursAvailable) ... GROUP BY EntryDate 
```

将该值放入每行的 UtilPct 列中：

```
SELECT ... SUM(HoursWorked)/MAX(HoursAvailable)*100.0 AS UtilPct
    FROM MyDatabase
    GROUP BY EntryDate
    ORDER BY EntryDate 
```

但是现在您将无法将行除以`Project`，您只会看到任何一天的时间利用率。如果您尝试这样做`GROUP BY` `Project`，您将再次获得 50% 而不是 100%。

那是因为您要求 4/8 为 100%，而这会得到语义上无意义的答案，例如“周二，我在 ABC 项目上 100% 工作，在 DEF 项目上*也*100% 工作”，其中一个可以回答“所以周二有 200% 的人？”

`JOIN`您可以使用表和自身之间的a 来解决这个难题，以便`TotalHoursWorked` *在一天内获得，这在语义**上与单个项目上*的 HoursWorked 不同：

```
SELECT
    UserName
    , md1.EntryDate
    , Project
    , HoursWorked
    , HoursAvailable
    , (TotalHoursWorked / HoursAvailable)*100.0 AS UtilPct
FROM
    MyDatabase AS md1
    JOIN ( 
        SELECT EntryDate, SUM(HoursWorked) AS TotalHoursWorked
        FROM MyDatabase GROUP BY EntryDate
    ) AS md2 ON (md1.EntryDate = md2.EntryDate)
ORDER BY
    md1.EntryDate 
```

现在 UtilPct 将参考当天的时间使用情况，这意味着即使您只工作了五分钟，您也可以获得 100% 的价值，前提是这五分钟是您当天可用的全部时间。而且您仍然可以添加另一列来指示该项目当天完成的百分比（*在*大多数*系统*`HoursWorked`中，它应该与该项目的优先级大致成比例）。`HoursAvailable`

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:21:24.500

```
SELECT
    a.Username, 
    a.EntryDate,
    a.Project,
    a.HoursWorked,
    (b.TotalHoursWorked / a.HoursAvailable) * 100 as 'UtilPct'
FROM
    MyDatabase a
INNER JOIN
    (SELECT 
       SUM(HoursWorked) as TotalHoursWorked, 
       Username, 
       EntryDate 
     FROM 
       MyDatabase 
     GROUP BY 
       Username, EntryDate) b
ON
  a.Username = b.Username
  AND a.EntryDate = b.EntryDate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T22:16:01.790

询问：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!3/2475f/5)**

```
SELECT
      t.UserName
    , t.EntryDate
    , t.Project
    , t.HoursWorked
    , t.HoursAvailable
    , (SELECT SUM(HoursWorked) 
      FROM MyDatabase 
      WHERE MyDatabase.EntryDate =t.EntryDate)/
      (SELECT MAX(HoursAvailable) 
      FROM MyDatabase 
      WHERE MyDatabase.EntryDate =t.EntryDate) AS UtilPct
FROM
    MyDatabase t
ORDER BY
    t.EntryDate 
```

结果：

```
| USERNAME |                       ENTRYDATE | PROJECT | HOURSWORKED | HOURSAVAILABLE | UTILPCT |
-------------------------------------------------------------------------------------------------
|   Justin | December, 17 2012 00:00:00+0000 |     ABC |           8 |              8 |       1 |
|   Justin | December, 18 2012 00:00:00+0000 |     ABC |           4 |              8 |       1 |
|   Justin | December, 18 2012 00:00:00+0000 |     DEF |           4 |              8 |       1 | 
```

顺便说一句，表中的好名字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T22:27:31.933

子查询只是总结一天。

```
 SELECT
              t.UserName
            , t.EntryDate
            , t.Project
            , t.HoursWorked
            , t.HoursAvailable
            , CASE WHEN HoursAvailable = 0 THEN 0 
                   ELSE Round(HoursWorked / HoursAvailable * 100.0, 2) 
                   END AS UtilPct
        FROM
            MyTable t
            INNER JOIN 
              (SELECT EntryDate,
                      UserName,          
                      SUM(HoursWorked) AS HoursWorked,
                      MAX(HoursAvailable) AS HoursAvailable
              FROM MyTable
              GROUP BY EntryDate,
                       UserName) AS Daily
        ON t.EntryDate = Daily.EntryDate
           AND t.UserName = Daily.UserName
        ORDER BY
            t.EntryDate,
            t.UserName 
```**``

# c++ - xutility.h 错误 C2064：术语不计算为采用 2 个参数的函数

> ID：13922992
> 
> 赞同：5
> 
> 时间：2012-12-17T22:04:12.363
> 
> 标签：c++, debugging, templates

我有问题要问。

我创建了一个名为 AstarPlanlama 的类，并具有以下两个功能：

```
bool AstarPlanlama::nodeComp(const Node* lhs, const Node* rhs) 
{
   return lhs->F < rhs->F;
}

void AstarPlanlama::enKucukFliNodeBul(std::list<Node*> * OPEN)
{
    std::list<Node*>::iterator it = std::min_element(OPEN->begin(), OPEN->end(), &AstarPlanlama::nodeComp);

    OPEN->sort(&AstarPlanlama::nodeComp);   

    Q = OPEN->front();      

    OPEN->pop_front();      
} 
```

当我编译我的代码时，错误发生在**xutility.h**文件中。

```
template<class _Pr, class _Ty1, class _Ty2> inline
    bool _Debug_lt_pred(_Pr _Pred,
        _Ty1& _Left, _Ty2& _Right,
        _Dbfile_t _File, _Dbline_t _Line)
    {   // test if _Pred(_Left, _Right) and _Pred is strict weak ordering
    if (!_Pred(_Left, _Right))
        return (false);
    else if (_Pred(_Right, _Left))
        _DEBUG_ERROR2("invalid operator<", _File, _Line);
    return (true);
    } 
```

函数声明：

```
 bool nodeComp(const Node* lhs, const Node* rhs);

    void enKucukFliNodeBul(std::list<Node*> * OPEN); 
```

错误行是**if (!_Pred(_Left, _Right))**

代码有什么问题？

谢谢你的回报。。

致以我的问候..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T22:13:17.223

看起来您正在传递一个成员函数作为您的自定义比较器。制作`static`或使用`std::bind`：

```
 std::list<Node*>::iterator it = std::min_element(OPEN->begin(), OPEN->end(),
                                       std::bind(&AstarPlanlama::nodeComp, 
                                                 this,
                                                 std::placeholders::_1,
                                                 std::placeholders::_2));

OPEN->sort(std::bind(&AstarPlanlama::nodeComp, 
                     this,
                     std::placeholders::_1,
                     std::placeholders::_2)); 
```

成员函数很特殊，需要在对象上调用，这就是为什么`std::bind`需要绑定到`this`指针的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T22:13:42.230

您的声明`nodeComp()`是错误的 - 如果您想遵循标准库约定，它需要是自由函数或静态函数，而不是常规成员函数。通常，我建议将其设置为标记为朋友的免费功能，以便它可以访问私有类成员。您声明的函数不会生成 xutility.h 中预期的比较器函数，因为它带有“隐藏的 this”参数，该参数由所有非静态成员函数携带。

此外，鉴于 的实现`nodeComp()`，根本没有理由将其设为常规成员函数，因为它不对其对象的数据进行操作，而是对作为参数传入的对象的数据进行操作。

为了简化您的生活和其他必须维护代码的人的生活，我将遵循标准库约定并将 nodeComp() 替换为以下代码，并在 AstarPlanlama 的类声明中声明操作员为朋友。

```
bool operator<(const AstarPlanlama::Node* lhs, const AstarPlanlama::Node* rhs) 
{
  return lhs->F < rhs->F;
} 
```

此外，将原始指针放入标准库容器通常不是一个好主意，因为这会导致各种有趣的生命周期管理问题。如果您绝对必须使用指针，我建议您使用为它设计的容器，例如 boost 指针容器，或者将对象包装在 a 中`std::shared_ptr`而不是处理原始指针。

# jquery-ui - Jquery ui自动完成 - 如何判断该字段是否已被清除

> ID：13922993
> 
> 赞同：0
> 
> 时间：2012-12-17T22:04:12.100
> 
> 标签：jquery-ui, jquery-ui-autocomplete

有没有办法做到这一点？基本上，我想检测用户何时清除该字段，因为还有其他字段依赖于此。我使用了一个更改事件，但是当我清除输入框时它没有触发。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:20:32.697

您可以使用*focusout*检查*text_input*是否已被清除（然后清除*id_input*）

```
// check if autocomplete has been cleared
$("#text_input").focusout(function() {
    if ($("#text_input").val() == '') {
        $('#id_input').val('');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:10:08.550

我建议使用几个不同的处理程序来确保您抓住用户清除字段

```
$(document).on('keyup, keydown, blur, change' , '.myTxtBox', function(){
var text =  $(this).val();
if text = "" {}    
}); 
```

如果你想确保用户没有突出显示然后删除，或者按下，删除，退格等，一些键更容易在 keyup 和一些 key down 上检测到。你需要几个不同的处理程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T22:12:07.860

如何将函数绑定到 jQuery keyup 事件，并在该函数中检查字段 .val() 的长度？

这在几乎所有浏览器中都可以正常工作。IE Mobile 9 要求您在读取字段值之前设置一个时间延迟，因为字段内容在 yeyup 事件之后才会更新。

版主注意：愚蠢的网站让我等了 3 分钟才输入这个答案——等待并不会或多或少地让你知道。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T13:54:35.927

我使用 Mike 建议的类似方法，但检查长度`a#ui-active-menuitem`而不是`val()`keyup 事件，`input[type="text"]`因为也有可能没有选择结果并且输入不为空。（例如：如果用户通过按向上箭头键模糊列表结果）

```
input.on('keyup', function(){
    if(! $('a#ui-active-menuitem').length ) ...
}); 
```

# c++ - 0xC0000005：访问冲突写入位置

> ID：13922995
> 
> 赞同：0
> 
> 时间：2012-12-17T22:04:25.923
> 
> 标签：c++

我有这个从文件中读取文本的功能：

```
uintmax_t ResourcePack::getText(const string& file, char** data)
{
    *data = new char[static_cast<size_t>(size) + 1];
    fseek(_fileDescriptor, static_cast<long>(begin), SEEK_SET);
    fread(*data, static_cast<size_t>(size), 1, _fileDescriptor);
    *data[size] = '\0';
} 
```

`FILE* _fileDescriptor, uintmax_t size`并`uintmax_t begin`进入其他代码，在这里并不重要，但具有正确的值。

`fseek`和`fread`线条工作正常。实际上，我在 *data 中有文件内容，但是在执行最后一行时，我得到了访问冲突。

为什么我可以写入`*data`using `fread`，但不能`using *data[size] = '\0'`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T22:07:33.943

您遇到了运算符优先级的问题 - 您想要`(*data)[size]`，而不是`*data[size]`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T22:08:17.157

您的问题是运算符的优先级`*`和`[]`. `*data[size]`表示访问`char*`数据中的第 n 个字符，然后取消引用它的第一个字符，而不是获取指向的数组的第 n 个字符`data`。

相反，您希望`(*data)[size]`以正确的顺序执行操作。

编辑：由于这是 C++，你最好使用`char*&`它来消除这些问题，或者*更好*地使用`vector`标准库并让标准库为你管理你的内存！

# xml - 如何检查标签是否包含特定字符串？

> ID：13922999
> 
> 赞同：0
> 
> 时间：2012-12-17T22:04:37.513
> 
> 标签：xml, xslt

我在xml中有这样的东西：

```
<doc>
  <people>
    <adress>
      <town>nameoftown</town>
    </adress>
  </people>
</doc> 
```

我想检查标签 town 是否包含特定的字符串。我知道我可以使用计数功能，但我想这样做：

XSL：

```
<ABC>   
   <xsl:variable name="counter" select="0"/>
    <xsl:for-each select="/doc/people/adress/town">
        <xsl:if test="contains(text(), 'nameoftown')">
     <xsl:variable name="counter" select="$counter+1"/>  
    </xsl:if>
  </xsl:for-each> 
 <xsl:value-of select="$counter"/>
</ABC> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:49:38.317

**XSLT 是一种*函数式语言*。**

这意味着变量一旦定义（和初始化）就不能被修改。

变量的不变性并不意味着任何可以通过修改变量以命令式方式/语言解决的问题，都不能使用函数式语言来解决。

**转向具体问题**：您想要以非常复杂的方式（7行）执行的操作可以表示为简单的单行：

```
count(/*/*/*/town[contains(.,'nameoftown')]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:21:37.893

In XSLT, an empty node set evaluates to false, so you can simply do this:

```
<xsl:if test="/doc/people/adress/town[.='nameoftown']">
  Found at least one example of nameoftown
</xsl:if> 
```