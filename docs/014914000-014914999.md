# StackOverflow 问答 14914000-14914999

# jquery - 如何强制脚本覆盖另一个脚本？

> ID：14914002
> 
> 赞同：0
> 
> 时间：2013-02-16T19:06:15.797
> 
> 标签：jquery, json

我的网站有一些脚本。第一个脚本是 csv 到 json 脚本。接下来是“结果”脚本。这会从 json 中提取信息并创建一个无序列表的复选框，并创建一个包含这些结果的表格。无序列表允许过滤表以显示某些结果。

它工作得很好，但现在我正在尝试将 Footable ( [http://themergency.com/footable/](http://themergency.com/footable/) ) 合并到表格中，因此由于表格有很多列，它是响应式的。

我在html头中的脚本顺序如下：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="/assets/js/library/04-csvtojson.js"></script>/
<script type="text/javascript" src="/assets/js/results.js"></script>
<script src="/assets/js/footable-0.1.js" type="text/javascript"></script>
<script type="text/javascript">
$(function() {
  $('table').footable();
});
</script> 
```

有了这个，我假设js会按这个顺序触发。但Footable部分没有。我相信这可能是因为创建此表的 results.js。

这是 results.js 的馅饼：http: [//pastie.org/6197248](http://pastie.org/6197248)

它创建了哪些元素是可过滤的，为 Footable 添加了必要的属性并创建了表格。

查看页面，一切正常，但 Footable 部分似乎不起作用并隐藏了我想要的部分表格。

奇怪的是，当我打开 Firebug 并将上面函数中的 'table' 更改为 '#data' 表的 id 和结果时，它会触发 Footable 代码并因此隐藏元素。

有没有办法强迫这种情况发生？
这是否需要以某种方式与 results.js 一起放置？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:21:57.473

您正在使用异步的 AJAX，因此您尝试`footable`在创建表之前应用插件。

您需要在函数中调用插件，或者在函数`renderTable`中调用插件`parseResults`

编辑：此外，还有一个`setTimeout`被调用来管理在`renderTable`. 插件需要在同一个内初始化`setTimout`

# ruby-on-rails - Rails - 不同时区限制每日发帖

> ID：14914004
> 
> 赞同：1
> 
> 时间：2013-02-16T19:06:46.423
> 
> 标签：ruby-on-rails, ruby, timezone

我正在开发 Rails 应用程序，该应用程序允许用户每天最多发布 2 个帖子，非常简单。

我的问题是如何管理不同用户居住的不同时区。例如，如果我住在伦敦，一天开始`00.00`和结束`23.59`的帖子计数将重置为`00.00`，但对于住在纽约的其他用户，计数器将在不同的时间重置。（不在`00.00`）我该如何处理这种情况？

我希望我自己解释。

**更新 1**

@簇

您的代码的问题是`time_zone.utc_offset`给出了错误的时间增量：

```
1.9.3p194 :123 > time_zone = ActiveSupport::TimeZone.new("Prague")
 => (GMT+01:00) Prague 
1.9.3p194 :124 > DateTime.now.utc.midnight - time_zone.utc_offset
 => Thu, 10 Apr 2003 00:00:00 +0000 
```

为什么？

相反，我发现这段代码很有用：

```
User.posts.where(:created_at => DateTime.now.in_time_zone(time_zone).beginning_of_day..DateTime.now.in_time_zone(time_zone).end_of_day).count 
```

它似乎在用户当天（使用用户的时区）之间获得了正确数量的消息。你怎么看？

**更新 2**

@簇

有什么区别：

`User.posts.where(:created_at => DateTime.now.in_time_zone(utc_time_zone).beginning_of_day..DateTime.now.in_time_zone(utc_time_zone).end_of_day).count`

你的呢：

```
1.9.3p327 :015 > time_zone = ActiveSupport::TimeZone.new("Prague")
 => (GMT+01:00) Prague 
1.9.3p327 :016 > Time.zone.now.utc.midnight - time_zone.utc_offset
 => 2013-02-15 23:00:00 UTC 
```

在性能和做事方式方面？

**更新 3**

实际上，您示例中的代码不起作用，请看这里：

```
# WRONG
1.9.3p194 :096 > user.posts.where('created_at > ?', Time.zone.now.utc.midnight - my_time_zone.utc_offset).count
   (0.2ms)  SELECT COUNT(*) FROM "messages" WHERE "messages"."sender_id" = 5 AND (created_at > '2013-02-15 23:00:00.000000')
 => 4 

# CORRECT
1.9.3p194 :098 > users.posts.where(:created_at => DateTime.now.in_time_zone(my_time_zone).beginning_of_day..DateTime.now.in_time_zone(my_time_zone).end_of_day).count
   (0.3ms)  SELECT COUNT(*) FROM "messages" WHERE "messages"."sender_id" = 5 AND ("messages"."created_at" BETWEEN '2013-02-16 23:00:00.000000' AND '2013-02-17 22:59:59.000000')
 => 0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T20:06:14.560

根据您希望它的工作方式，我可以想到两种解决方案。

首先，允许用户在 24 小时内发布两次，这样做的好处是与时区无关：

```
User.posts.where('created_at > ?', 24.hours.ago).count 
```

如果返回 2，则不要让他们发布。

如果你真的想确保每天不超过 2 个帖子，那么：

```
time_zone = ActiveSupport::TimeZone.new(current_user.time_zone)
Users.posts.where('created_at > ?', Time.zone.now.utc.midnight - time_zone.utc_offset).count 
```

User#time_zone 需要持有 Rails 识别的有效时区。

由于数据库日期时间 (created_at) 已经采用 UTC，首先将服务器时间标准化为 utc，然后将时间设置为午夜，并为时区应用 utc 偏移量。因此，如果您有人在 -7 时区，那么它将查找自 0700 UTC 以来的帖子，对于处于 +3 时区的人，它将查找自 2100 UTC 以来的帖子。

[ActiveSupport::时区](http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html)

为了阐明两者之间的区别，让我举几个例子。

第一个示例是用户在 1200 发帖，然后在周一又在 1800 发帖。

使用第一段代码，用户将无法在星期二 0600 之后再次发布。使用第二段代码，他们将能够在星期二 0000（午夜之后）再次发布。

第二个示例是用户在 2330 发帖，然后在周一的 2350 发帖。同样，在第一个示例中，他们将在星期二 2330 之后才能再次发布，但第二个示例将允许他们在午夜再次发布，允许他们在 0010 和 0020 发布，在 50 分钟内给他们 4 个帖子。

这实际上取决于职位限制的目的是什么。第一个示例将更易于使用和实现，因为它可以在不受时区影响的情况下工作。

如果您从 FB 提取时区信息，请检查该时区信息的格式。我猜它不会是一个`ActiveSupport::TimeZone`可以接受的有效字符串。例如，它`"Mountain Time (US & Canada)"`需要 MST(-0700)。如果 FB 为您返回类似 MST 的 -7 或 -25200（-7 小时以秒为单位）之类的东西，那么您可以使用这些东西而无需使用 AS:TZ

**回复：更新 1**

这是使用 Time.zone 而不是 DateTime 的输出

```
1.9.3p327 :015 > time_zone = ActiveSupport::TimeZone.new("Prague")
 => (GMT+01:00) Prague 
1.9.3p327 :016 > Time.zone.now.utc.midnight - time_zone.utc_offset
 => 2013-02-15 23:00:00 UTC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:12:49.543

考虑为每个人使用 UTC 时区。即 StackOverflow 使用这种方法进行投票，并且效果很好。

# javascript - chrome.tabs.executeScript：如何从后台脚本中的内容脚本访问变量？

> ID：14914007
> 
> 赞同：7
> 
> 时间：2013-02-16T19:06:55.903
> 
> 标签：javascript, google-chrome-extension

如何从后台脚本中`app`的内容脚本访问变量？`app.js``background.js`

这是我的尝试方法（`background.js`）：

```
chrome.tabs.executeScript(null, { file: "app.js" }, function() {
   app.getSettings('authorizeInProgress'); //...
}); 
```

这是我得到的： ![tabs.executeScript 期间出错：无法访问 url 的内容](../Images/dce34c8edc7f638f109bd57525c54b5e.png)

这里是`manifest.json`：

```
{
  "name": "ctrl-vk",
  "version": "0.1.3",
  "manifest_version": 2,
  "description": "Chrome extension for ctrl+v insertion of images to vk.com",

  "content_scripts": [{
    "matches": [
        "http://*/*",
        "https://*/*"
    ],
    "js": ["jquery-1.9.1.min.js"
    ],
    "run_at": "document_end"
  }],

  "web_accessible_resources": [
    "jquery-1.9.1.min.js"
  ],

  "permissions" : [
    "tabs",
    "http://*/*",
    "https://*/*"
  ],

  "background": {
    "persistent": false,
    "scripts": ["background.js"]
  }
} 
```

# 例如完整的代码，在 github

[https://github.com/MaxLord/ctrl-vk/tree/with_bug](https://github.com/MaxLord/ctrl-vk/tree/with_bug)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T17:40:34.720

为避免上述错误，请使用以下代码

```
if (tab.url.indexOf("chrome-devtools://") == -1) {
    chrome.tabs.executeScript(tabId, {
        file: "app.js"
    }, function () {

        if (app.getSettings('authorizeInProgress')) {
            alert('my tab');
            REDIRECT_URI = app.getSettings('REDIRECT_URI');
            if (tab.url.indexOf(REDIRECT_URI + "#access_token") >= 0) {
                app.setSettings('authorize_in_progress', false);
                chrome.tabs.remove(tabId);
                return app.finishAuthorize(tab.url);
            }
        } else {
            alert('not my');
        }

    });
} 
```

代替

```
chrome.tabs.executeScript(null, {
    file: "app.js"
}, function () {

    if (app.getSettings('authorizeInProgress')) {
        alert('my tab');
        REDIRECT_URI = app.getSettings('REDIRECT_URI');
        if (tab.url.indexOf(REDIRECT_URI + "#access_token") >= 0) {
            app.setSettings('authorize_in_progress', false);
            chrome.tabs.remove(tabId);
            return app.finishAuthorize(tab.url);
        }
    } else {
        alert('not my');
    }

}); 
```

# 解释

*   **`chrome://extensions/`**page 也会触发`chrome.tabs.onUpdated`事件，为了避免它，我们必须添加一个过滤器来跳过所有开发工具页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-25T20:19:00.480

（会将此作为对已接受答案的评论提交，但仍缺乏所需的声誉）

您还应该将 tabId 作为第一个参数提供给 chrome.tabs.executeScript。否则，您会冒着用户在请求 URL 和 background.js 对错误页面执行 executeScript 后立即切换窗口/选项卡的风险。

虽然事后看来相当明显，但当我收到相同的错误消息“无法访问 url 的内容“chrome-devtools://..”时，它让我陷入了一个循环，即使我的 chrome.tabs.onUpdated 事件处理程序正在检查用户请求的页面在执行 executeScript 调用之前有一些特定的域名。

所以请记住，chrome.tabs.executeScript(null,..) 在活动窗口中运行脚本，即使活动窗口可能是开发人员工具检查器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-26T09:13:12.337

我们应该注意到，在 manifest cofig 中：</p>

```
"content_scripts": [{
"matches": [
    "http://*/*",
    "https://*/*"
],
"js": ["jquery-1.9.1.min.js"
], 
```

在“匹配”部分，仅匹配 http、https，因此如果您在页面中加载扩展程序，例如：“chrome://extensions/”或“file:///D:xxx”，则会发生该错误。

您可以使用 url 'http://' 在页面中加载您的扩展程序；或在“匹配”数组中添加更多规则。

# javascript - 在 svg-editor 中转换路径，使用用户输入值绘制方法

> ID：14914010
> 
> 赞同：0
> 
> 时间：2013-02-16T19:07:15.383
> 
> 标签：javascript, html, svg, svg-edit

我想知道是否可以在用户绘制路径后使用用户输入的值来调整路径的大小。例如设置宽度和高度。

我目前正在使用 JS 函数中的 transform 属性来做到这一点，但是当路径被调整大小时，路径的句柄保持在原始位置，这使得事情变得一团糟。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T13:10:28.167

假设选择了路径：

`svgCanvas.changeSelectedAttribute("transform", "scale(0.5, 1)");`

# objective-c - xcode 4.6 中的 UIViewController 子类在哪里

> ID：14914011
> 
> 赞同：4
> 
> 时间：2013-02-16T19:07:14.687
> 
> 标签：objective-c, xcode4.5

对不起，如果我的问题看起来很菜鸟，我是目标 c 编程的新手。我使用 4.6 xcode，当我开始制作新的内置选项卡项目时，我开始添加新的 UIViewController 子类文件，我找不到它。如果模板发生变化，哪个模板可以提供与 UIViewController 相同的 3 个文件（.h、.m、.xib）。答案将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T02:13:46.100

从 Cocoa Touch 部分中选择 Objective-C 类模板。在下一页上，在“Subclass Of”字段中选择或键入 UIViewController。确保选中“使用 XIB 作为用户界面”。

![在此处输入图像描述](../Images/6de3259db1ae06617b19740d26dd0ee2.png)

# html - 子菜单项不会与父项对齐

> ID：14914015
> 
> 赞同：0
> 
> 时间：2013-02-16T19:07:21.147
> 
> 标签：html, css, drop-down-menu

我正在尝试创建一个下拉菜单，但是每当我将鼠标悬停在父菜单上时，子菜单都不会与之对齐。我经历了很多例子，我总是得到相同的结果。

我的 CSS 代码是

```
#mainNav {
   margin-top: 20px;
   width: 800px;
   margin-left: auto;
   margin-right: auto;
   padding: 0;  
   overflow: hidden;
   background-color: #BBFFFF;
   zoom: 1;
}

#mainNav li {
   float: left;
   list-style: none;
}
#mainNav li a {
   color: #000000;
   display: block;  
   width: 80px;
   font-size: 14px;
   text-align: center;
   text-transform: uppercase;
   text-decoration: none;   
   padding: 7px 0px 7px 0px;
   border-right: 1px solid #999;    
   zoom: 1; 
}
#mainNav li ul {
   display: none;
}
#mainNav a:hover {
   background-color: #66FF66;
}
#mainNav li:hover ul {
   display: block;
   position: absolute;
}
#mainNav li:hover li {
   float: left;
   width: 80px;
   background-color: #BBFFFF;
   margin: 0;
   padding: 0;
} 
```

我的 HTML 是

```
<div>
  <ul id="mainNav">
    <li><a href="pageone.html" id="pageOneLink">Page One</a></li>
    <li><a href="pagetwo.html" id="pageTwoLink">Page Two</a></li>
    <li><a href="pagethree.html" id="pageThreeLink">Page Three</a>
      <ul>
        <li><a href="threePageOne.html" name="threePageOneLink>Sub Page One</a></li>
      </ul>
    </li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:40:05.813

复制粘贴试试这个。这个例子中的一些东西会帮助你。

```
<html>
<head>
<style type="text/css">
#mainNav{
    /*  Your mainNav decoration here */

}
#mainNav li{
    list-style:none;
    display:inline-block;
    background-color:#0FF;
    padding:10px;
    border:1px solid #000;
}

#mainNav ul{
    position:absolute;
    display:none;
    padding:0px;
    top:50px;
}

#mainNav li:hover ul{
    display:inline-block;
}
</style>
</head>
<body>

<ul id="mainNav">
    <li><a href="pageone.html" id="pageOneLink">Page One</a>
     <br />
      <ul>
        <li><a href="onePageOne.html" name="onePageOneLin">Sub Page One</a></li>
      </ul>
    </li>
    <li><a href="pagetwo.html" id="pageTwoLink">Page Two</a></li>
    <li><a href="pagethree.html" id="pageThreeLink">Page Three</a>
    <br />
      <ul>
        <li><a href="threePageOne.html" name="threePageOneLin">Sub Page One</a></li>
      </ul>

    </li>
  </ul>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:13:15.010

您可以使用负边距左将其拉回线。将其添加到：

```
#mainNav li:hover ul {} 
```

或者你可以设置 padding: 0; 在同一个元素上。

此外，您在以下位置缺少一个结束 '"'：

```
<li><a href="threePageOne.html" name="threePageOneLink>Sub Page One</a></li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T20:02:41.810

那里有很多 css 不够具体，有些东西放在错误的地方。

我在这里为你写了一个 jsfiddle：[你的代码的 DISTILED 版本](http://jsfiddle.net/sheriffderek/taxj5/)

您在 li 上拥有列表样式，而不是它所属的 ul 。您对子列表等也不够具体。使用 > 喜欢，

`.main-nav > li > a { }`会说仅针对 li 的第一层，并且在那个 li 中唯一的 a 等等。

我会给 ul 的课程等。请参阅小提琴，了解我认为最简单的方法。对于其他人，请让我知道我的小提琴是否可以更简洁。

# php - 来自 1000 多张图片的 10 张带有 glob() 的随机图片

> ID：14914017
> 
> 赞同：0
> 
> 时间：2013-02-16T19:07:36.447
> 
> 标签：php, shuffle, glob, slice

我有一个包含 1000 多个图像和一段代码（由 codaddict 编写）的目录，它只选择前 10 个并显示它：

```
<?php
foreach (array_slice(glob("/directory/*.jpg"),0,10) as $path)
?> 
```

好的，这可行，但我需要选择 10 个随机图像，而不是前 10 个

是的，我可以先使用随机播放，然后切片，但是对于 1000+（或 10k+）张图像，只为 10 张图像随机播放长数组并不明智，或者可能是这样？

另外，第二个问题是这不仅适用于一个包含 1000 多个图像的文件夹，我也需要在其他文件夹中使用这个脚本，其中一些只有 1 个图像，所以我不想看到错误如果有一个文件夹中的图像少于 10 张

我在 php 手动代码中看到了 2 个随机项目，但我不知道文件夹中有多少图像 - 1、10、10k ......你看到了问题

```
<?php
$input = array("Neo", "Morpheus", "Trinity", "Cypher", "Tank");
$rand_keys = array_rand($input, 2);
echo $input[$rand_keys[0]] . "\n";
echo $input[$rand_keys[1]] . "\n";
?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:18:41.293

```
function imageGlobber($myDir, $imgCount) {
    $globVar = glob($myDir."/*.jpg");
    $imgCount = ($imgCount > count($globVar)) ? $imgCount : count($globVar);

    $randKeys = array_rand($globVar, $imgCount);

    $retArray = array();
    foreach($randKeys as $key)
        array_push($retArray, $globVar[$key]);

    return $retArray;
} 
```

我想这就是你要找的。

编辑：也添加了重复处理。

编辑：改进的性能。

# php - 使用 AsyncTask 从 PHP 站点下载文件，没有任何打开/保存对话框

> ID：14914019
> 
> 赞同：0
> 
> 时间：2013-02-16T19:07:47.113
> 
> 标签：php, android, android-asynctask, download

我的 android 应用程序上有一个指向托管文件的服务器的链接。我希望我的应用程序在后台从服务器下载此文件，以便用户可以保持应用程序的焦点并继续做他想做的事情。

我假设 AsyncTask 可用于在后台执行此操作。应用程序中的链接指向一个 php 页面，该页面具有以下代码 -

```
header("Content-type: application/xls");
header("Content-Disposition: attachment; filename=\myFile.xls\"");
readfile("myFile.xls"); 
```

据我了解， readfile() 将从服务器获取数据，然后将其写入其缓冲区。AsyncTask 将从这个缓冲区中读取数据并将其存储到手机中指定的位置。

我的问题 - 1\. 请让我知道我的方法是否正确（我在上面已经描述过） 2\. 我假设 header("Content-Disposition: ..) 将导致打开/保存对话框（如普通桌面浏览器对话框的情况）。android应用程序调用链接时也会显示类似的对话框吗？如果是，有没有办法不显示这个对话框而只下载，这样用户就不需要了麻烦文件在他的手机中存储在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:35:03.100

异步任务是让您在后台执行此操作。PHP 页面返回 xml 文件的内容。`HttpGet`用于获取内容，然后将它们保存到您选择的位置。

```
HttpClient httpclient = new DefaultHttpClient();
HttpGet httpget = new HttpGet ("http://urltopage.com/page");

HttpResponse response = httpclient.execute(httpget);
sb = new StringBuffer("");
in = new BufferedReader(new InputStreamReader(response
                        .getEntity().getContent()));

String line = "";
String NL = System.getProperty("line.separator");
while ((line = in.readLine()) != null) {
    sb.append(line + NL);

}
in.close(); 
```

然后，您现在可以对文本格式的内容做任何您想做的事情。stringbuilder 不是必须的，但这样你会得到一个干净的字符串。我认为您可以直接将其写入文件而不是构建字符串。

如果要将其直接放入文件中：

```
FileOutputStream fos = new FileOutputStream(newFile("\path to file"));

byte[] buff = new byte[4096];
int len; 
while((len = in.read(buff)) > 0) {
      fos.write(buff, 0, len);
}

fos.close() 
```

# omniauth - 狂欢社交和全能

> ID：14914024
> 
> 赞同：0
> 
> 时间：2013-02-16T19:08:15.547
> 
> 标签：omniauth, spree

我是 ruby​​ 新手，并且在 spree .70 上有 spree-ecommerce 应用程序。我正在尝试使用 spree-social 添加 Facebook 身份验证。[当我遵循确切的步骤](https://github.com/spree/spree_social)时，安装请求失败。这是我得到的：

```
Could not load 'omniauth'. Please ensure you have the omniauth gem >= 1.0.0 installed and listed in your Gemfile. 
```

即使在运行 gem install omniauth 之后我也看到同样的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T22:10:31.823

我遇到了同样的问题，但我通过观看此地址[http://railscasts.com/episodes/241-simple-omniauth](http://railscasts.com/episodes/241-simple-omniauth)的视频教程解决了这个问题。它显示了对 OmniAuth 的介绍。

# windows-7 - 如何在 Windows 7 计算机上虚拟化 iOS

> ID：14914026
> 
> 赞同：12
> 
> 时间：2013-02-16T19:08:18.047
> 
> 标签：windows-7, ios-simulator, virtualization

我正在尝试学习用 Objective C 编写代码，但我还没有准备好为此目的购买 Mac，因为我有一台好的戴尔笔记本电脑。我的电脑上安装了 VMware，但我不知道如何实际执行这些步骤，也不知道我需要安装或购买什么（如果绝对必要的话）。最终，我希望得到一台 Mac，所以不需要它，但在那之前，我想找到一种编译 Objective C 的方法，这样我就可以真正学习如何使用它。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T19:18:39.833

虽然在技术上是可行的，但我会根据经验告诉你：

要运行 Xcode 和 iOS 模拟器，您需要运行 MacOS。官方上它只在 Apple 硬件上运行，但你可以随时使用虚拟机和 Hackintosh。如果你选择这种方法，网上有很多很好的教程。

我的建议：**不要这样做！**

当我开始开发 iOS 应用程序时，我有一台 Windows PC，但在尝试了许多不同的方法来虚拟化 MacOS 之后，我都没有得到很好的结果。我在促销时购买了 MacBook，总体而言它只是更好的 iOS 开发体验。不必处理驱动程序搜索和兼容性问题是无价的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T19:14:26.213

首先虚拟化 MacOS X，然后使用 XCode 虚拟化 iOS。见[http://www.macbreaker.com/2012/07/mountain-lion-virtualbox.html](http://www.macbreaker.com/2012/07/mountain-lion-virtualbox.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-29T14:19:03.433

是的，你可以，你需要在你的 Windows 中虚拟化 OSX，然后使用 XCode，但它并不适用于几乎所有的 AMD CPU，但我认为戴尔主要使用英特尔。Mac 的成本很高。例如，我没有钱买一台，最便宜的一台要 1,600 美元，但**如果**你要买一台 Mac，我会等着。

但它们确实很贵，我只需要一台 Macbook 来调试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-03T16:48:49.853

[假设您已经拥有 mac 安装映像或 vmware 文件] 遗憾的是，Vmware 在其最新版本中不包含对 mac 的支持，因此您必须对其进行修补（又名 Vmware Unlocker for OS X）。按照此链接[http://www.insanelymac.com/forum/files/file/20-vmware-unlocker-for-os-x/](http://www.insanelymac.com/forum/files/file/20-vmware-unlocker-for-os-x/)（您需要设置一个帐户）或者您可以下载 VirtualBox ( [https://www.virtualbox.org/](https://www.virtualbox.org/) ) 快乐编码

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-06T00:48:37.663

使用 virtualbox 而不是 VMWare。如果它不起作用，请安装 virtualbox 的扩展包。

# java - Java 客户端到服务器未知来源

> ID：14914027
> 
> 赞同：2
> 
> 时间：2013-02-16T19:08:17.740
> 
> 标签：java, sockets, networking, tcp

我有一个需要在网络上运行的简单乒乓球游戏，服务器将创建一个包含球和 2 个球棒位置的游戏，当客户端连接到服务器时，服务器将创建一个名为 PongPlayerThread 的新类，它将处理与客户端到服务器的输入和输出流，

我的服务器工作 100% 正常，没有任何数据从客户端到服务器，服务器可以毫无问题地向客户端发送信息，但我有一个奇怪的问题，但首先这是我的代码，所以你可以看到我有什么。

乒乓服务器

```
try
{
    serverSocket = new ServerSocket(port);
    listen = true;
    System.out.println("Server was setup and will try to create a socket");
}
catch(IOException e)
{
    System.err.println("Could not listen on port:" + port);
    System.exit(1);
}

while(listen)
{
    players[idPlayer] = new PongPlayerThread(serverSocket.accept(), idPlayer, rtnInfo());
    players[idPlayer].start();
    System.out.println("Client Connected with ID:" + idPlayer);
    players[0].passData(rtnInfo());
    idPlayer++;     
    if(idPlayer > 1)
    {
        listen = false;
        playing = true;
    }
}

while(playing)
{
    players[0].passData(rtnInfo());
    players[0].sleep(25);
    players[1].passData(rtnInfo());
    players[1].sleep(25);
}

....//more, but not important 
```

这是我的 PongClient

```
try
{
    socket = new Socket(host, port);
    serverOut = new PrintWriter(socket.getOutputStream(), true);
    serverInput = new BufferedReader(new InputStreamReader(socket.getInputStream()));
}
catch (UnknownHostException e)
{
    System.err.println("Couold not connect to host:" + host);
    System.exit(1);
}
catch (IOException e)
{
    System.err.println("Could not get Input/Output from server");
    System.exit(1);
}

...

while ((pos = serverInput.readLine()) != null) 
{
    String text = "nothing";
    serverOut.println(text);
    String[] posValues = pos.split(":");
        model.getBall().setX(Double.parseDouble(posValues[0]));
        model.getBall().setY(Double.parseDouble(posValues[1]));

    /*if(PongController.moveUp == true)
    {
        System.out.println("Up");
        serverOut.println("up");
        PongController.moveUp = false;
    }
    else
    {
        serverOut.println("nothing");
    }*/

} 
```

这是我的 PongPlayerThread

```
try
{
    PrintWriter out = new PrintWriter(socket.getOutputStream(), true);
    BufferedReader in = new BufferedReader(
        new InputStreamReader(
        socket.getInputStream()));

    String text = "hhh";

    System.out.println(in.toString());
    //System.out.println(text = in.readLine());
    System.out.println("Checking readLine value");

    String line; 
    if ((line = in.readLine()) == null) 
    { 
        System.out.println("A ok"); 
    } 
    else 
    { 
        System.out.println(":" + line); 
    }

    while(send)
    {
        //String temp = in.readLine();
        //if(temp.equals("up"))
        //{
        //        System.out.println("Up you say");
        //}
        out.println(pongData);
    }

    out.close();
    in.close();
    socket.close();
}

catch (IOException e) 
{
    e.printStackTrace();
} 
```

现在当我运行我的服务器时它很好，然后我连接一个客户端，当客户端连接时乒乓球应该在等待另一个玩家时静止不动，但是一旦我关闭，球只会自行更新而不从服务器获取数据客户端程序，我的服务器会出现这个错误

```
java.net.SocketException: Connection reset
at java.net.SocketInputStream.read(Unknown Source)
at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
at sun.nio.cs.StreamDecoder.read(Unknown Source)
at java.io.InputStreamReader.read(Unknown Source)
at java.io.BufferedReader.fill(Unknown Source)
at java.io.BufferedReader.readLine(Unknown Source)
at java.io.BufferedReader.readLine(Unknown Source)
at Pong.PongPlayerThread.run(PongPlayerThread.java:42) 
```

PongPlayerThread 中的第 42 行是这个

```
if ((line = in.readLine()) == null) 
```

这几天我一直在尝试解决这个问题，但我仍然没有找到解决方案，我觉得输入流无法连接到客户端的输出流，我曾尝试使用wireShark但这是一个局域网程序，所以它不会t 工作，wireShark 中不会显示任何内容。如果有人能对此有所启发，将不胜感激。

帆布

iTech 更新 好的，我在这里使用了你的代码，现在是我的 PongPlayerThread 中的内容

```
public void run()
{
    try
    {
        PrintWriter out = new PrintWriter(socket.getOutputStream(), true);
        BufferedReader in = new BufferedReader(
                    new InputStreamReader(
                    socket.getInputStream()));

        String text = "hhh";

        System.out.println(in.toString());
        //System.out.println(text = in.readLine());
         System.out.println("Checking readLine value");

         String line = null; 
         if ((line = in.readLine()) != null) // why you check if it is null !?
         { 
             System.out.println("Client sent: "+line); 
         } 

        while(send)
        {
            out.println(pongData);
        }

         out.close();
         in.close();
         socket.close();
    } 
```

这将在控制台中显示“客户端发送：你好”，但我的客户端不会停止并继续从服务器接收数据，

如果我将您给我的 if 语句放入具有 out.println(pongData) 的 while 语句中，它可以工作，但是一旦客户端连接和断开连接，我就会收到错误消息，或者如果两个客户端连接然后他们都离开我会收到错误消息再次收到此错误:(

```
java.net.SocketException: Connection reset
at java.net.SocketInputStream.read(Unknown Source)
at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
at sun.nio.cs.StreamDecoder.read(Unknown Source)
at java.io.InputStreamReader.read(Unknown Source)
at java.io.BufferedReader.fill(Unknown Source)
at java.io.BufferedReader.readLine(Unknown Source)
at java.io.BufferedReader.readLine(Unknown Source)
at Pong.PongPlayerThread.run(PongPlayerThread.java:45) 
```

第 45 行是

```
if ((line = in.readLine()) != null) // why you check if it is null !? 
```

将代码整理出来，但现在在我的 pongClient 代码中

```
 while ((pos = serverInput.readLine()) != null) 
    {
        String text = "nothing";
        serverOut.println(text);
        String[] posValues = pos.split(":");
        model.getBall().setX(Double.parseDouble(posValues[0]));
        model.getBall().setY(Double.parseDouble(posValues[1]));

        if(PongController.moveUp == true)
        {
            System.out.println("Up");
            serverOut.println("up");
            PongController.moveUp = false;
        }
        else
        {
            serverOut.println("nothing");
        }

    } 
```

一旦碰到这个，它就不会做任何事情，并且会再次导致整个错误。

我发现了错误，我放的地方

```
 if ((line = in.readLine()) != null)
             { 
```

如果再放 line = in.readLine() 会报错。奇怪，但现在已经修复了，数据可以从客户端发送到服务器，服务器到客户端:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:39:06.883

一旦客户端连接到您的服务器，`if ((line = in.readLine()) == null)`它将阻塞线程，直到收到来自客户端的消息。

建立连接后，您需要从客户端发送一些东西

在`PongPlayerThread`您可以修改以下内容并删除该`else`块

```
String line = null; 
if ((line = in.readLine()) != null) // why you check if it is null !?
{ 
    System.out.println("Client sent: "+line); 
} 
```

在`PongClient`建立`socket`连接后，您可以发送一些消息，例如`serverOut.println("Hello");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:20:58.183

“连接重置”有多种原因，但最常见的原因是您写入了已被另一端关闭的连接。换句话说，应用程序协议错误。

# php - PHP - $_SERVER 属性从何而来？

> ID：14914032
> 
> 赞同：0
> 
> 时间：2013-02-16T19:08:53.730
> 
> 标签：php, apache

在 php 中，$_SERVER 全局有很多关于请求等的信息，但是这些设置在哪里？

这些是apache通过一些api提供的吗？

还是 php 从其他地方获取它们？如果是在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T19:10:50.967

如果您查看 PHP 手册，它会说（网址： http: [//php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)）

> $_SERVER 是一个包含标题、路径和脚本位置等信息的数组。此数组中的条目由 Web 服务器创建。无法保证每个 Web 服务器都会提供其中任何一个；服务器可能会省略一些，或提供此处未列出的其他内容。也就是说，在 » CGI/1.1 规范中包含了大量这些变量，因此您应该能够预料到这些变量。
> 
> $HTTP_SERVER_VARS 包含相同的初始信息，但不是超全局的。（注意 $HTTP_SERVER_VARS 和 $_SERVER 是不同的变量，PHP 会这样处理它们）

因此，如果您使用 Apache，它来自 Apache。否则来自其他服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T19:10:57.623

来自 PHP 文档：

> $_SERVER 是一个包含标题、路径和脚本位置等信息的数组。此数组中的条目由 Web 服务器创建。无法保证每个 Web 服务器都会提供其中任何一个；服务器可能会省略一些，或提供此处未列出的其他内容。

# c++ - 如何在 C/C++ 中默认初始化函数指针？

> ID：14914036
> 
> 赞同：2
> 
> 时间：2013-02-16T19:09:12.077
> 
> 标签：c++, gcc, compiler-construction, function-pointers

我将一个函数指针传递给另一个函数，我希望它被默认初始化，这就是我正在尝试的，但这会产生语法错误

```
void bar(int i) {}
void foo(void (*default_bar=bar)(int)) {
//
} 
```

错误 ：

```
Invoking: GCC C++ Compiler
g++ -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"src/f_13.d" -MT"src/BinarySearchTree_13.d" -o "src/BinarySearchTree_13.o" "../src/f_13.cpp"
In file included from ../src/f_13.cpp:10:
../src/tree.h:51: error: expected `)' before '=' token
../src/tree.h:51: error: 'foo' declared as function returning a function
../src/tree.h:51: error: expected ';' before ')' token
../src/tree.h:60: error: expected `;' before 'void'
make: *** [src/f_13.o] Error 1 
```

只是这很好用的一点：

```
void foo(void (*default_bar)(int)) { 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T19:10:23.217

这边走：

```
void foo(void (*default_bar)(int) = bar) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-16T19:15:30.613

如果你`typedef`用来简化问题：

```
typedef void (*fun_type)(int); 
```

然后你可以弄清楚自己：

```
void foo(fun_type default_bar = bar) 
{
} 
```

容易，不是吗？

为了简化*复杂*的声明，我使用`identity`它定义为：

```
template<typename T> using identity = T; 
```

使用它，您可以将函数编写为：

```
void foo(identity<void(int)> default_bar = bar) 
{
} 
```

* * *

`identity`更多简化声明的例子：

```
identity<int[100][200]> * v; 
```

这与：

```
int (*v)[100][200]; 
```

其他：

```
identity<int(int,int)> *function(identity<int(int,char*)> param); 
```

这与：

```
int (*function(int (*param)(int,char*)))(int,int); 
```

使用`identity`，声明肯定会变得更长一些，但也可以轻松*解析*令牌并逐一理解它们；这样整个声明就变得容易了！

希望有帮助。

# emacs - before-save-hook 和 write-file-functions 有什么区别

> ID：14914038
> 
> 赞同：0
> 
> 时间：2013-02-16T19:09:17.557
> 
> 标签：emacs, elisp

[我在http://www.gnu.org/software/emacs/manual/html_node/elisp/Saving-Buffers.html#Saving-Buffers](http://www.gnu.org/software/emacs/manual/html_node/elisp/Saving-Buffers.html#Saving-Buffers)阅读了手册，但仍然不太明白两者之间的区别。在我看来，它们都作为一个挂钩来运行您在将缓冲区保存到访问文件之前设置的任何功能。任何人都可以用例子来解释吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T01:47:17.283

`write-file-functions` *可*用于在保存文件之前简单地做任意事情，但其声明的目的是允许一些非默认函数实际完成*保存*文件的工作（或者可能为了与保存更直接相关的目的而操纵内容机制本身）。

如果修改保存文件的机制不是您想要做的，我强烈怀疑您应该使用`before-save-hook`.

也可以看看`C-h``i``g` `(elisp) Saving Buffers` `RET`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T15:01:04.830

`write-*-functions`提供一个严格的超集`before-save-hook`可以做什么。更具体地说，`write-*-functions`可以用另一种*替代正常的储蓄机制。*这意味着添加到的函数`write-*-functions`可能最终未被使用，因为一些较早的函数已经保存了缓冲区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T19:24:35.687

好吧，我会说`before-save-hook`是在这里修改内容。同时`write-*-functions`负责编码系统（例如压缩文件内容或遵循任何其他文件格式）和备份文件。

此外`write-*-functions`，可能是本地缓冲区，而`before-save-hook`. 但后来我不确定它意味着什么。

# android - Intellij IDEA 中的 SQLite 数据库目录

> ID：14914039
> 
> 赞同：0
> 
> 时间：2013-02-16T19:09:18.577
> 
> 标签：android, database, sqlite, intellij-idea

我正在**intellij IDEA中尝试一些简单的****android**代码。 我有一个 .db SQLite 单词数据库。但我不知道项目的女巫目录我必须粘贴数据库文件我打开这个数据库是这样的：

 **```
 try {
            db=openOrCreateDatabase("data.db", 1,null);
        }
        catch (SQLException e)
        {
            Toast.makeText(getApplicationContext(),"ERR:"+e.getMessage(),Toast.LENGTH_LONG).show();
        } 
```

并像这样使用：尝试{

```
 Cursor c;
                c = db.rawQuery("SELECT * FROM words WHERE en='"+ed.getText()+"'",null);
                v.append(c.getString(1));

            }
            catch (SQLException e)
            {
                Toast.makeText(getApplicationContext(),"ERR:"+e.getMessage(),Toast.LENGTH_LONG).show();
            } 
```

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:21:30.690

通常你把它留给一个框架来做......但在你的情况下它很简单

你/资产/

像这样创建它...

```
As for DB_NAME = "yourfilename.db"
As for DB_NAME = "/data/data/" + context.getPackageName() + "/databases/";

    private void copyDataBase() throws IOException {
        InputStream mInput = mContext.getAssets().open(DB_NAME);
        String outFileName = DB_PATH + DB_NAME;
        OutputStream mOutput = new FileOutputStream(outFileName);
        byte[] mBuffer = new byte[1024];
        int mLength;
        while ((mLength = mInput.read(mBuffer)) > 0) {
            mOutput.write(mBuffer, 0, mLength);
        }
        mOutput.flush();
        mOutput.close();
        mInput.close();
   } 
```**

# javascript - 有没有办法在 JavaScript / Jquery 中获取完整窗口的实际大小？

> ID：14914043
> 
> 赞同：1
> 
> 时间：2013-02-16T19:09:36.177
> 
> 标签：javascript, jquery, html, css, liquid-layout

我正在尝试为我的网站制作流畅的布局，但问题是如果在页面加载之前将窗口的大小重新调整为小，然后他们最大化他们的窗口，那么页面是小尺寸的，我的问题是如何即使页面很小，我是否会以完整尺寸获得窗口的宽度和高度。

```
$(document).ready(function()
{
    var Height = $(document).height();
var Width = $(document).width();
}); 
```

这给了我窗口的高度和宽度，即使窗口很小，我也想要最大化的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:11:33.003

听起来您实际上需要做的是收听窗口的`resize`事件并根据需要重新排列内容。

或者，使用现代方式并使用 CSS 媒体查询：

```
@media all and (max-width:480px) {
    /* styles for when the window is less than or equal to 480px wide */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T19:12:38.220

```
var Height = $("html").height();
var Width = $("html").width(); 
```

您也可以尝试`body`，它甚至可能取决于浏览器。我相信一些特殊定位的元素有可能延伸到身体之外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T19:16:50.583

下面是一个如何监听窗口调整大小事件的示例：

HTML：

```
<body>
    <p>Resize result window to see updated dimensions</p>
    Dimensions: <div id="debug"></div>
</body> 
```

JavaScript：

```
function updateSize() {
    var $win = $(window);
    $('#debug').html($win.height() + ' x ' + $win.width());
}

$(window).resize(updateSize); // listen for window resize
$(updateSize); // call on page load to get initial size 
```

在 jsFiddle 上试试：http: [//jsfiddle.net/TKAFc/](http://jsfiddle.net/TKAFc/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T19:19:39.547

如果你需要屏幕尺寸，你应该使用`screen.width`and `screen.height`。

您可以减去“窗口边框”，这样您将拥有有用的区域：

```
screen.width - (window.outerWidth - window.innerWidth) 
```

高度也是如此。

# javascript - 计算字符串Javascript中单词的出现次数

> ID：14914046
> 
> 赞同：-1
> 
> 时间：2013-02-16T19:09:52.417
> 
> 标签：javascript, string, compare, associative

有没有人知道一种简单的方法来计算 Javascript 字符串中某个单词的出现次数，而无需预定义的可用单词列表？理想情况下，我希望它输出到关联数组（字，计数）中。

例如，“Hello how are you Hello”这样的输入会输出如下内容：- “Hello”：2 “how”：1 “are”：1 “you”：1

任何帮助是极大的赞赏。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T19:16:47.957

对于一个简单的字符串，这应该足够了：

```
var str = "hello hello hello this is a list of different words that it is",
    split = str.split(" "),
    obj = {};

for (var x = 0; x < split.length; x++) {
  if (obj[split[x]] === undefined) {
    obj[split[x]] = 1;
  } else {
    obj[split[x]]++;
  }
}

console.log(obj)
```

但是，如果您想处理句子，则需要对标点符号等进行一些处理（因此，将所有 !?. 替换为空格）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T19:21:32.620

```
var counts = myString.replace/[^\w\s]/g, "").split(/\s+/).reduce(function(map, word){
    map[word] = (map[word]||0)+1;
    return map;
}, Object.create(null)); 
```

# jquery - 如何在 ajax 错误请求上捕获 jquery 异常？

> ID：14914052
> 
> 赞同：1
> 
> 时间：2013-02-16T19:10:45.647
> 
> 标签：jquery, backbone.js

我正在保存这样的用户模型：

```
this.model.save(data,{
                    success: function(user) {
                        console.log(user);
                    },
                    error: function() {
                        console.log("error");
                    }

                }); 
```

例如，当用户名不唯一时，REST api 返回 400（错误请求）。在控制台中显示“错误”，但在它之前有 jquery execption：

```
POST http://localhost/cms/users.json 400 (Bad Request) 
```

我怎样才能捕捉到这个异常，所以它不会被抛出到控制台？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:27:04.133

异常显示在控制台上作为浏览器的一项功能（Firebug 的插件）。您无法将其关闭，并且它不会以任何方式影响您的代码流。你应该忽略它。

[检查这个是否有另一个类似的 q](https://stackoverflow.com/questions/7035466/check-if-file-exists-but-prevent-404-error-in-console-from-showing-up)

# javascript - 选择元素显示和隐藏，遍历问题！(jQuery)

> ID：14914054
> 
> 赞同：0
> 
> 时间：2013-02-16T19:10:55.277
> 
> 标签：javascript, jquery, html

我一直在尝试在 parent()/children()/find() 和选择器语法的阳光下的每一种组合，以 .show() 我隐藏在文档准备好的网页元素，但我就是无法得到它工作！如果有人可以看看我真的很感激..

如果你去投资组合部分，你可以在这里看到它 -> [http://holly.im/](http://holly.im/)。

无论如何，html看起来像这样：

```
<div id="portfolio">
<h1>Heading</h1>
<div class ="little_column">
  <div class="project"> 
    <a href="#c++_games_engine_construction" class="projlink"> click </a>
  </div>    
</div>
<div id="c++_games_engine_construction" class="big_column">
    <?php include "projects/C++_game_engine_construction.php"; ?>
</div>
</div> 
```

和相关的jQuery：

```
$(document).ready(function() {  
    //hide all the big_columns / 
    // project details within the portfolio page
    $('#portfolio').find('.big_column').hide(); //This seems to be working
});
$(function(){
    $('.project').click(function () {
        var selectedProject =
            $(this).children('a.projlink').attr('href');
        $(this).parent().parent().find(selectedProject).show(); //My most recent attempt, I though maybe i needed to go up the heirachy then back down? But whatever i try it doesn't show.
        return false;
    });
}); 
```

真的是这样，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T19:22:02.033

在`+`元素的 ID 中包含该字符会导致 jQuery 变得混乱，因为该字符是为[Next Adjacent Selector](http://api.jquery.com/next-adjacent-Selector/)`+`保留的。

如果您从代码中删除这些字符，它就可以正常工作。正如对此答案的评论之一所述，由于 href 本质上是要显示的项目的 ID，因此您可以直接选择它。

HTML

```
<div id="portfolio" class="section">

    <h1>Heading</h1>

    <div class="little_column">
        <div class="project"> <a href="#c_games_engine_construction" class="projlink"> click </a>

        </div>
    </div>
    <div id="c_games_engine_construction" class="big_column">
        I'm hidden at first!
    </div>
</div> 
```

JS

```
$(document).ready(function () {
    //hide all the big_columns / 
    // project details within the portfolio page
    $('#portfolio').find('.big_column').hide(); //This seems to be working
});
$(function () {
    $('.project').click(function () {
        var selectedProject = $(this).children('a.projlink').attr('href');
        $(selectedProject).show(); //My most recent attempt, I though maybe i needed to go up the heirachy then back down? But whatever i try it doesn't show.
        return false;
    });
}); 
```

[jsfiddle](http://jsfiddle.net/jEWa4/3/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T19:21:17.430

问题出`+`在选择器中。它需要被转义，因为它在 Selectors API 中具有特殊含义*（并且对于 ID 无效）*。

如果您`++`从`href`和 中删除了`id`，它可以工作。

* * *

或者，你可以做`.replace(/\+/g, "\\+")`

```
var selectedProject = $(this).children('a.projlink').attr('href').replace(/\+/g, "\\+") 
```

* * *

*题外话：你不需要两个`.ready()`调用，这就是你所拥有的，但使用不同的语法。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T19:30:27.880

正如其他人所提到的，您的问题是`+`jQuery 虐待的字符。所以简单的解决方案是：不要使用 jQuery - 或者至少，不要使用选择器。由于您拥有的每个目标都是一个 id 选择器，我们可以轻松地将其更改为

```
$(document).ready(function() {  
    $('#portfolio').find('.big_column').hide();

    $('.project').click(function () {
        var selectedProject = $(this).find('a').attr('href'); // a littebit simplified

        var el = document.getElementById(selectedProject.slice(1));
        $(el).show();
        return false;
    });
}); 
```

# api - Soundcloud API - 提取用户转发的曲目

> ID：14914059
> 
> 赞同：11
> 
> 时间：2013-02-16T19:11:12.607
> 
> 标签：api, soundcloud

作为新 soundcloud 网站中引入的转贴，是否也可以通过 API 提取给定用户转贴的曲目？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-12-19T00:39:41.960

用您需要的替换用户 ID、限制和偏移量：

*更新：*

```
https://api-v2.soundcloud.com/stream/users/<userId>/reposts?limit=50&offset=0 
```

*老答案：*

```
https://api-v2.soundcloud.com/profile/soundcloud:users:<userId>?limit=50&offset=0 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T20:43:36.010

为您提供转发的 API 端点还不是公共 API 的一部分。唯一的原因是我们还没有完全决定格式等等——基本上，一旦它成为文档化 API 的一部分，那么我们就有完全的责任永远不会破坏这种向后兼容性，而且我们不能相当承诺呢。

# java - 如何调整 Java Swing JTextArea 的大小

> ID：14914060
> 
> 赞同：0
> 
> 时间：2013-02-16T19:11:17.377
> 
> 标签：java, swing, layout-manager, jtextarea, preferredsize

我正在尝试使用 Java Swing 将文本区域放到对话框中。我在设置此 JTextArea 的大小时遇到​​问题。文本区域的宽度总是等于窗口的整个宽度，如果我调整它的大小，它会随着窗口一起伸展。

```
private void arrangeComponents() {
    JTextArea textArea = new JTextArea();
    JPanel outerPanel = new JPanel();
    outerPanel.setLayout(new BoxLayout(outerPanel, BoxLayout.PAGE_AXIS));

    JScrollPane scrollPane = new JScrollPane(textArea);
    outerPanel.add(scrollPane, BorderLayout.CENTER);

    Container contentPane = getContentPane();
    contentPane.add(outerPanel, BorderLayout.CENTER);
} 
```

我希望 JTextArea 水平对齐到窗口的中心并且不改变它的大小。

我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T19:16:21.857

使用[`JTextArea(int rows, int columns)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextArea.html#JTextArea%28int,%20int%29)指定行和列的构造函数，如此处所示[，](https://stackoverflow.com/a/11949899/230513)并且不要忽略`pack()`封闭的`Window`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T19:41:27.613

```
outerPanel.add(scrollPane, BorderLayout.CENTER); 
```

BoxLayout 没有约束，因此不需要 BorderLayout.CENTER。

问题是 BoxLayout 尊重组件的最大尺寸，对于滚动窗格来说，该尺寸设置得非常大。

不要使用 BoxLayout，只需使用带有 FlowLayout 的面板。

运行下面的示例以查看您当前在做什么。然后注释掉 setLayout(...) 语句并再次运行。默认情况下，面板使用 FlowLayout，所以你会得到你想要的。

```
import java.awt.*;
import javax.swing.*;
import javax.swing.text.*;

public class SSCCE extends JPanel
{
    public SSCCE()
    {
          setLayout( new BoxLayout(this, BoxLayout.PAGE_AXIS));

          JTextArea textArea = new JTextArea(5, 30);
          JScrollPane scrollPane = new JScrollPane(textArea);
          //scrollPane.setMaximumSize( scrollPane.getPreferredSize() );

          add(scrollPane);
    }

    private static void createAndShowUI()
    {
        JFrame frame = new JFrame("SSCCE");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add( new SSCCE() );
        frame.pack();
        frame.setLocationRelativeTo( null );
        frame.setVisible( true );
    }

    public static void main(String[] args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                createAndShowUI();
            }
        });
    }
} 
```

或者，如果您真的想保留 BoxLayout，则保留 setLayout(...) 语句，然后将最大尺寸设置为等于首选尺寸。很多人会说你永远不应该直接调用“setXXX()”方法，而应该重写滚动窗格的 setMaximumSize() 方法，只返回首选大小。

请注意，在测试这两种解决方案时，请确保您使窗口小于滚动窗格，以查看每种布局的工作方式有何不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-23T11:55:54.500

只需为您的文本区域调用该方法：`setLineWrap(true);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T19:17:03.953

我从一个简单的编码站点中找到了这个。此代码示例可能对您有用。

```
import java.awt.Dimension;
import java.awt.FlowLayout;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;

public class JTextAreaTest {
    public static void main(String[] args) {
        JFrame.setDefaultLookAndFeelDecorated(true);
        JFrame frame = new JFrame("JTextArea Test");
        frame.setLayout(new FlowLayout());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        String text = "A JTextArea object represents a multiline area for displaying text. "
                + "You can change the number of lines that can be displayed at a time, "
                + "as well as the number of columns. You can wrap lines and words too. "
                + "You can also put your JTextArea in a JScrollPane to make it scrollable.";
        JTextArea textAreal = new JTextArea(text, 5, 10);
        textAreal.setPreferredSize(new Dimension(100, 100));
        JTextArea textArea2 = new JTextArea(text, 5, 10);
        textArea2.setPreferredSize(new Dimension(100, 100));
        JScrollPane scrollPane = new JScrollPane(textArea2,
                JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
                JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
        textAreal.setLineWrap(true);
        textArea2.setLineWrap(true);
        frame.add(textAreal);
        frame.add(scrollPane);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-08T08:15:48.890

如果 JTextArea 已初始化 `JTextArea text = new JTextArea(int rows, int columns)`

你只需调用方法`text.setLineWrap(true)`

然后文本的大小是固定的。

# java - 从 ArrayList HashMap 中获取多个随机值

> ID：14914062
> 
> 赞同：0
> 
> 时间：2013-02-16T19:11:48.800
> 
> 标签：java, random, arraylist, hashmap

我想从 ArrayList 中获取一些特定数字的随机值

```
final ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

for (int i = 0; i == 4; i++) {

        index = random.nextInt(menuItems.size());
        HashMap<String, String> getitem = menuItems.get(index);
        System.out.println(getitem.get(KEY_NAME));
    } 
```

Nothing is printing out.

如果我在循环外使用循环中的代码，但由于我需要多个值，我使用循环并且它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T19:12:25.637

改变

```
for (int i = 0; i == 4; i++) { // start with i beeing 0, execute while i is 4
                               // never true 
```

至

```
for (int i = 0; i < 4; i++) {  // start with i beeing 0, execute while i is
                               // smaller than 4, true 4 times 
```

## 解释：

for 循环具有以下结构：

```
for (initialization; condition; update) 
```

`initialization`在循环开始之前执行一次。`condition`在循环的每次迭代之前检查并在每次迭代`update`之后执行。

您的初始化是`int i = 0;`（执行一次）。你的条件是`i == 4`，这是错误的，因为`i`是`0`。所以条件为假，循环被跳过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T19:12:40.127

你的 for 循环的结束条件被打破：`for (int i = 0; i == 4; i++)`应该是`for (int i = 0; i < 4; i++)`（4 次迭代）或`for (int i = 0; i <= 4; i++)`（5 次迭代）。

[本教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)解释了`for`语句的工作原理。

# python - Pocketsphinx 导入 ValueError

> ID：14914063
> 
> 赞同：0
> 
> 时间：2013-02-16T19:11:49.613
> 
> 标签：python, osx-lion, cmusphinx

我最近在运行 Lion 和 Python 2.7.3 的 mac 上安装了 pocketsphinx 模块（不是 Apple 内置的 python，而是酿造的）。我尝试运行以下代码：

```
import pocketsphinx as p
decoder = p.Decoder(jsgf='/path_to_jsgf_file/grammar.jsgf',samprate='8000')
fh = open('myrecording.wav', 'rb')
nsamp = decoder.decode_raw(fh)
print 'You said,', hyp
print 'Your score was', score 
```

但这是我在运行时遇到的错误`import pocketsphinx as p :`

```
Traceback (most recent call last):
File "speech_reco.py", line 4, in <module>
import pocketsphinx as p
File "sphinxbase.pxd", line 150, in init pocketsphinx (pocketsphinx.c:7935)
ValueError: PyCapsule_GetPointer called with invalid PyCapsule object 
```

但是，第二次运行导入命令时，它可以正常运行。因此，目前，我正在那里运行 try-catch 并克服错误。但我不知道这是否仍然有效。

这个问题似乎以前出现过，正如在此链接上讨论的那样：http: [//sourceforge.net/p/cmusphinx/bugs/284/](http://sourceforge.net/p/cmusphinx/bugs/284/)

有人解决了这个问题吗？如果不是，try-catch 是绕过这个错误的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:10:50.653

> 有人解决了这个问题吗？如果不是，try-catch 是绕过这个错误的正确方法吗？

这个 Cython 问题在以后的 Cython 中得到修复

> 如果不是，try-catch 是绕过这个错误的正确方法吗？

解决此错误的正确方法是使用 Cython 重新创建胶水代码。错误报告中的最后一条消息说：

[http://sourceforge.net/p/cmusphinx/bugs/284/](http://sourceforge.net/p/cmusphinx/bugs/284/)

# postgresql - PostgreSQL：布尔+整数

> ID：14914066
> 
> 赞同：1
> 
> 时间：2013-02-16T19:12:16.853
> 
> 标签：postgresql, integer, boolean, type-conversion

我有一个像这样的查询：

```
SELECT (column LIKE 'string')+100 
```

它返回错误：运算符不存在：布尔+整数

我找不到将 bool 转换为 int 的函数，只有文本转换为 int：to_number()。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:44:49.380

```
SELECT (column LIKE 'string')::integer +100 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T19:23:30.287

使用条件表达式，请参阅[http://www.postgresql.org/docs/9.2/static/functions-conditional.html](http://www.postgresql.org/docs/9.2/static/functions-conditional.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T19:24:12.877

如果要将字符串比较在 true 时转换为 1，在 false 时转换为 0，可以使用 case 语句：

```
select case when column like '%foo%' then 1 else 0 end as my_int from my_table; 
```

如果您想添加到该结果中，您可以执行以下操作：

```
select (case when column like '%foo%' then 1 else 0 end) + 100 as my_int from my_table; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T05:10:17.643

我需要更便携的解决方案，所以这个最适合我：

```
SELECT CAST((column LIKE 'string') AS integer)+100 
```

# objective-c - 将代码从 ios 移植到 osx 项目时出错

> ID：14914071
> 
> 赞同：1
> 
> 时间：2013-02-16T19:12:37.437
> 
> 标签：objective-c, cocoa, frameworks, linker

我尝试将 Apple 的[SimpleFTPsample](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Introduction/Intro.html)从这个 IOS 项目移植到我的 OSX 项目，但是当我尝试构建时，出现以下错误。

```
Undefined symbols for architecture x86_64:
"_OBJC_CLASS_$_NetworkManager", referenced from:
objc-class-ref in Document-DAE96E3625ECED63.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我已经在网上搜索过，并且一直在检查我复制两次的所有代码，添加了所有框架，并包含了标头。有人可以帮我找出问题所在，或者更好地解释这意味着什么，以便我将来自己解决吗？如何找出 NetworkManager 类中的问题？在编译之前我没有收到任何错误。

谢谢

**---编辑---** 忘了提到我只需要示例中代码的 PUT 部分，我只检查那部分。其余的都没有被复制过来。我复制了 NetworkManager.h、NetworkManager.m 并从 PUT 文件中复制了我需要的部分代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T17:12:56.327

通常，当链接器说“什么？我从来没有听说过那个类”，这意味着实现该类的模块（SomeClass.m）没有被编译。

发生这种情况有两种方式：

### 编译失败

这会导致请求 SomeClass.o（在您的情况下为 NetworkManager.o）的错误。这不是你得到的错误，但足够相似，我觉得值得在这里列出。

链接器将需要一个由成功编译生成的目标文件。如果编译失败，则目标文件不存在，因此您将收到“找不到文件：blah/blah/blah/SomeClass.o”错误。

999‰ 的编译失败是因为模块包含错误——语法错误、无法识别的名称（例如拼写错误/错别字）或其他导致编译失败的缺陷。

导致其他构建错误的构建错误相当普遍，因此您应该始终从列表顶部向下处理错误。

这个问题的解决方案是导航到 SomeClass.m 并修复它的所有问题，然后再次尝试构建。

### 你甚至没有尝试编译它

这是你遇到的那个。

每个目标都有一个构建阶段列表，每个阶段都描述了构建目标需要做的事情。大多数目标至少具有编译源和链接二进制与库阶段。每个构建阶段都有一个输入文件列表。

编译源阶段的输入文件是 Xcode 将尝试编译的模块文件。Link Binary with Libraries 将隐式链接编译器生成的所有内容（所有目标文件）及其列表中的库，例如 Cocoa.framework。

对于每个目标，Xcode*只会*尝试编译处于该目标的 Compile Sources 构建阶段的模块。

很可能忘记将模块添加到目标，但仍尝试在同一目标内的另一个模块中使用它。也许您很久以前为另一个目标制作了模块，现在想在您正在处理的目标中使用该代码，或者您可能只是在创建模块时忘记选中该框或将其添加到项目。

无论哪种方式，您都会收到该错误消息，告诉您您尝试使用其内容的模块未在您尝试使用它的目标中列出以进行编译。

有两种方法可以修复它：

*   选择或导航到“缺失”模块并显示文件检查器（⌘⌥1），然后选中“目标成员”下的相应目标框。
*   在 Project Navigator 中选择项目对象，在编辑器中选择目标，切换到 Build Phases 选项卡，然后将“missing”模块从 Project Navigator 拖到 Compile Sources 构建阶段。

防止它的方法是确保在将模块添加到项目时检查相关目标。这包括创建新模块和添加从其他人那里获得的模块（例如，开源可重用类）。

# routing - Laravel 路由到控制器

> ID：14914080
> 
> 赞同：0
> 
> 时间：2013-02-16T19:12:55.347
> 
> 标签：routing, controller, laravel, laravel-3

我正在尝试使用这些 url 的一部分作为控制器内方法的参数将多个 url 路由到同一个控制器函数。这是基于 Laravel 框架的路由功能，我不是在寻求关于 htaccess/pretty url 等的一般帮助。特别是我想知道如何在 Laravel routes.php 文件中实现这一点。

我尝试路由的 URL 是：

> domain.com/articles
> 
> domain.com/downloads
> 
> domain.com/videos
> 
> domain.com/digests

现在我知道我可以在我的 routes.php 中做这样的事情：

```
Route::get(array('digests','articles','videos','downloads'), 'content@list_content'); 
```

这将路由到我的内容控制器中的这个函数：

```
public function action_list_content(){} 
```

但是我实际上希望函数看起来像这样：

```
public function action_list_content($type){} 
```

并且 URL 的第一部分（即摘要、文章、视频或下载）中的任何内容都应作为 $type 参数发送到 action_list_content 方法。

这可能吗？

我应该注意，我宁愿不使用 (:any) 因为它真的很贪婪并接受“domain.com/anyrandomtext”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T19:30:04.587

Laravel 将通配符转换为正则表达式，然后再进行进一步处理。因此，实际上，您可以通过提供正则表达式直接跳入其中：

```
Route::get('(articles|downloads|videos|digests)', 'content@list_content'); 
```

# c# - 控制透明度

> ID：14914083
> 
> 赞同：4
> 
> 时间：2013-02-16T19:13:10.283
> 
> 标签：c#, winforms

所以尝试了一段时间没有运气，我最终决定询问一种使透明控件相互显示的方法。

![在此处输入图像描述](../Images/a7de4d708833718d739045046ceacf47.png)

正如您在图片中看到的，我有 2 个透明图片框，它们很好地显示了背景，但是当涉及到所选图片框时，正如您在图片中看到的那样，它仅渲染表单的背景图像，而不渲染下面的其他图片框它。我知道由于缺乏适当的渲染，winforms 中存在一种常见情况，但问题是：

有没有办法解决这个渲染故障，有没有办法让透明控件相互渲染？

嗯，这就是答案：[使用 C# WinForms 的透明图像](https://stackoverflow.com/questions/395256/transparent-images-with-c-sharp-winforms/434706#434706)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T19:23:09.733

控件的透明度取决于其父控件。但是，您可以使用自定义容器控件而不是父图像的图片框。也许此代码是完整的

```
 using System;
using System.Windows.Forms;
using System.Drawing;

public class TransparentControl : Control
{
    private readonly Timer refresher;
    private Image _image;

    public TransparentControl()
    {
        SetStyle(ControlStyles.SupportsTransparentBackColor, true);
        BackColor = Color.Transparent;
        refresher = new Timer();
        refresher.Tick += TimerOnTick;
        refresher.Interval = 50;
        refresher.Enabled = true;
        refresher.Start();
    }

    protected override CreateParams CreateParams
    {
        get
        {
            CreateParams cp = base.CreateParams;
            cp.ExStyle |= 0x20;
            return cp;
        }
    }

    protected override void OnMove(EventArgs e)
    {
        RecreateHandle();
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        if (_image != null)
        {
            e.Graphics.DrawImage(_image, (Width / 2) - (_image.Width / 2), (Height / 2) - (_image.Height / 2));
        }
    }

    protected override void OnPaintBackground(PaintEventArgs e)
    {
       //Do not paint background
    }

    //Hack
    public void Redraw()
    {
        RecreateHandle();
    }

    private void TimerOnTick(object source, EventArgs e)
    {
        RecreateHandle();
        refresher.Stop();
    }

    public Image Image
    {
        get
        {
            return _image;
        }
        set
        {
            _image = value;
            RecreateHandle();
        }
    }
} 
```

# php - 链接应该导航到新页面，还是显示不同的 div？

> ID：14914087
> 
> 赞同：2
> 
> 时间：2013-02-16T19:13:38.560
> 
> 标签：php, javascript, html, navigation

代码示例：

**无页面导航：**

```
<body>
   <nav>
      // Navigation links to the parts of the site.
      // Clicking a link calls a javascript function to display the relevant <div>
   </nav>
   <section id="page1">
      // Page 1 content
   </section>
   <section id="page2">
      // Page 2 content
   </section>
</body> 
```

**页面导航：**

```
// Page1.php:
<body>
   <nav>
      // Navigation links to parts of the site.
      // Act as normal <a> tags, redirecting the browser to the new page
   </nav>
   <section>
      // Page1 content
   </section>
</body>

// Page2.php:
<body>
   <nav>
      // Navigation links to parts of the site.
      // Act as normal <a> tags, redirecting the browser to the new page
   </nav>
   <section>
      // Page2 content
   </section>
</body> 
```

**链接导航的优点：**

*   浏览器不需要一次加载整个网站

*   无需 javascript 即可使用该网站

*   提供直接 URL 以便于导航

*   似乎是标准的做法

**javascript 导航的优点：**

*   对于具有大量服务器端脚本的站点（例如我的），最大限度地减少页面请求

*   不需要在不同的地方使用相同的代码（`<nav>`例如元素）。在 PHP 中创建一个`echo_nav_html()`函数并不是一个好的解决方案，因为它使在 IDE 环境中的编码变得烦人

*   初始加载后，站点速度超快，因为几乎没有任何新请求发送到服务器

哦，明智的互联网，对此有什么想法吗？

或者也许更优雅的解决方案提供列出的 javascript 导航的优点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:50:09.607

最好的解决方案是两者都做。

在锚点上的 HREF 上具有有效链接，但包括加载 div 并禁用 HREF 进度的 onClick 操作。

阅读有关**[优雅降级](http://en.wikipedia.org/wiki/Fault-tolerant_system)**和**[渐进增强](http://en.wikipedia.org/wiki/Progressive_enhancement)**的信息。

提供非 JavaScript 代码的原因有很多。并非所有浏览器都支持 JavaScript。许多企业网络仍然使用旧版本的 IE，它们的行为可能无法预测，或者它们可能会强制配置完全禁用 JS。

您希望您的网站可供所有人使用，但要为那些拥有支持它的技术的用户提供尽可能好的体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:38:58.460

如果您使用大量服务器端代码（假设这意味着动态内容生成/填充），我可能会使用指向其他页面的链接，因为我无法想象加载您最初可能在网站上访问的所有内容负载是真正的资源效率，特别是假设不是每个用户都会访问网站的任何部分。

您仍然可以使用 javascript，但我只会在实际请求时生成内容；无论是通过 AJAX 调用（因此在那里调用 URL）还是加载新页面。在运行时加载所有内容对我来说似乎有点浪费......但这只是我。

# android - 在打开上下文菜单的 LinearLayout 中检索 TextView 的 id

> ID：14914089
> 
> 赞同：0
> 
> 时间：2013-02-16T19:13:51.743
> 
> 标签：android

我正在以编程方式使用 TextViews 填充 LinearLayout，在其中放置基于从数据库和用户首选项填充的实体的文本。

我现在正在尝试在每个 TextViews 上添加一个上下文菜单，以允许用户删除该特定条目（因此是对象，因此是 db 行）。

我可以长按打开上下文菜单，但我看不到获取与菜单关联的 TextView 的 id 的方法。

几乎所有关于此的信息都引用了 ListViews（我没有使用 - 在 ScrollView 中有一个 ListView 存在问题），并且很多引用了 Adapters（我没有使用，数据需要在之前彻底按摩体面的）。

LinearLayout 在 XML 中指定。我在进行数据库查找的 AsyncTask 的 onPostExecute 中将 TextViews 添加到它。

我尝试以两种方式注册上下文菜单：使用 Activity.registerForContextMenu(TextView) 和 textView.setOnCreateOptionsMenuListener(new ...)。

问题出在以下部分：

```
@Override
public boolean onContextItemSelected(MenuItem item) {
    ContextMenuInfo info = (ContextMenuInfo) item.getMenuInfo();
    switch (item.getItemId()) {
        case R.id.delete_entry:
              // how do I get the TextView id here???
            return true;
        default:
            return super.onContextItemSelected(item);
    }
} 
```

ContextMenuInfo 变量为空，没有任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:29:03.850

这个问题的一个答案来自阅读[get view id from oncontextitemselected](https://stackoverflow.com/questions/6016569/get-view-id-from-oncontextitemselected)。

虽然它有点hacky，但它确实有效，而且现在很好。

您确实在 onCreateContextMenu 方法中将 View 变量作为参数。然后将该变量存储在具有类范围的其他变量中，您将能够在 onContextItemSelected 方法中使用这些变量是微不足道的。

例子：

```
private TextView contextTextView = null;

@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.tankbeurt_wissen, menu);
    contextTextView = (TextView) v;
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.delete_entry:
                System.out.println(contextTextView.getId()+" called this method");
            return true;
        default:
            return super.onContextItemSelected(item);
    }
} 
```

希望这对某人有帮助，就像对我有帮助一样。

# css - 无法验证

> ID：14914094
> 
> 赞同：0
> 
> 时间：2013-02-16T19:14:25.377
> 
> 标签：css, validation, web

例如，我想使用[http://validator.w3.org](http://validator.w3.org)验证我的网站，但我总是收到以下错误：

> 抱歉，我无法验证此文档，因为在第 11 行它包含一个或多个我无法解释为 utf-8 的字节（换句话说，找到的字节不是指定字符编码中的有效值）。请检查文件内容和字符编码指示。错误是：utf8 "\xFC" 不映射到 Unicode

有人知道我在哪里可以找到/摆脱错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:19:47.940

使用您喜欢的文本编辑器打开 css 文件。在那里，将编码切换为 UTF8。转到第 11 行并寻找奇怪的符号。删除/替换它们。

# vbscript - 使用 vbscript 读取/保存网页

> ID：14914099
> 
> 赞同：2
> 
> 时间：2013-02-16T19:14:47.617
> 
> 标签：vbscript

目标：登录网页并将html保存到文件中以供稍后解析。

页面上的 html 只是用户列表以及他们登录和注销的时间。

当您加载网页时，会弹出一个 javascript 框并询问登录信息

我可以用 SendKeys 填充它，但我真的想在不弹出窗口的情况下这样做

```
Set IE = CreateObject("InternetExplorer.Application") 
set WshShell = CreateObject("WScript.Shell")  

IE.Visible = False ' doesn't set IE page as invisible?????

IE.Navigate "https://mysite/site/console/client-log.jsp"
      'how do i fill in the box ??? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T12:09:00.187

我建议使用[Fiddler](http://www.fiddler2.com/fiddler2/)之类的东西来识别进行实际登录的请求，然后在[XMLHttpRequest](http://msdn.microsoft.com/en-us/library/windows/apps/hh453379.aspx)中使用该信息。

```
url      = "..."
filename = "..."

Set req = CreateObject("MSXML2.XMLHTTP.6.0")
req.open "POST", url, False
req.setRequestHeader "Content-Type", "application/x-www-form-urlencoded"
req.send "field1=foo&field2=bar&..."

Set fso = CreateObject("Scripting.FileSystemObject")
fso.OpenTextFile(filename, 2, True).WriteLine req.responseText 
```

如果响应是 UTF-8 编码的，您可能需要使用[ADODB.Stream](http://msdn.microsoft.com/en-us/library/ms677486%28v=vs.85%29.aspx)对象来保存内容。

```
Set stream = CreateObject("ADODB.Stream")
stream.Open
stream.Type     = 2 'text
stream.Position = 0
stream.Charset  = "utf-8"
stream.WriteText req.responseText
stream.SaveToFile filename, 2
stream.Close 
```

# java - 按下一个键后从迭代器中删除对象

> ID：14914101
> 
> 赞同：0
> 
> 时间：2013-02-16T19:15:02.783
> 
> 标签：java, opengl, arraylist, iterator, lwjgl

我试图从我的 ArrayList 中删除一个对象，该对象被 Iterator 引用，所以我可以删除该对象。但问题是，它不起作用。

当键盘下一个运行时按下某个键“在这种情况下，向下”时，它必须删除在我的“球”Arraylist 中创建的最新对象。

我正在使用 LWJGL 和 OpenGL。

```
while(Keyboard.next()) {
if(Keyboard.isKeyDown(Keyboard.KEY_DOWN)) {
    Iterator<ball> theBall = balls.iterator();
    while (theBall.hasNext()) {
        theBall.remove();       
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:20:51.353

请记住，您必须打电话`theBall.next();`才能转到下一个项目。我在你的代码中没有看到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:21:28.790

您迭代的方式不正确，因为您必须为每次迭代调用 next() 。但是无论如何，如果您想删除列表的最后一个元素，则不应循环，而应将所有代码替换为：

```
balls.remove(balls.size() - 1); 
```

# php - Kohana 3.2.2 框架有什么好的扩展（模块），可以处理 Excel 文件吗？

> ID：14914114
> 
> 赞同：0
> 
> 时间：2013-02-16T19:16:43.817
> 
> 标签：php, kohana, phpexcel, kohana-3.2

我需要编写一些 xls(x) 文件，但不知道 Kohana 3.2.2 框架的良好扩展（模块），我知道 PHPExcel（我找到了很多链接和存储库），但其中大部分基于在我的项目中不支持的 PEAR 库上，也许有人知道一个好的解决方案？

所以我需要一个带有良好文档和模块的链接。谢谢。

**升级版**。

我通过以下代码对 PHPExcel 库进行了第一次测试：

```
$objPHPExcel = new PHPExcel();
            $objPHPExcel->setActiveSheetIndex(0)
                ->setCellValue('A1', 'Hello')
                ->setCellValue('B1', 'world!');

            // header("Content-Type:application/vnd.ms-excel");
            // header("Content-Disposition:attachment;filename='simple.xls'");

            $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel,'Excel2007');    
            $name = $objWriter->save('docs/MyExcel12.xlsx');

            $file = $_SERVER['DOCUMENT_ROOT']."/docs/MyExcel12.xlsx";
            /*      
            if (file_exists($file))
            {
                header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
                header('Content-Disposition: attachment; filename='.basename($file));
                header('Content-Length: '.filesize($file));
                readfile($file);                
            }*/

            if (file_exists($file))
            {
                header('Content-Type: application/octet-stream');
                header('Content-Disposition: attachment; filename='.basename($file));
                header('Content-Length: '.filesize($file));
                readfile($file);
            } 
```

我看到应用此代码后创建的文件，但浏览器没有强制下载它，因为你可以看到我使用了不同的标题，但没有我的文件。帮助！？

**UPD**我也使用过：

```
 header("Content-Type:application/vnd.ms-excel");
            header("Content-Disposition:attachment;filename='simple.xls'");

            $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel,'Excel5');   
            $objWriter->save('php://output'); 
```

但是有错误（而不是文件）：

```
net::ERR_FILE_NOT_FOUND 
```

我做了一个重定向，但我认为这不是一个解决方案：

```
 $this->request->redirect('docs/new.xlsx'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:28:04.043

将 PHPExcel 集成到 Kohana [http://www.flynsarmy.com/2010/07/phpexcel-module-for-kohana-3/](http://www.flynsarmy.com/2010/07/phpexcel-module-for-kohana-3/)

# c++ - 如何正确绑定 2 个纹理

> ID：14914116
> 
> 赞同：1
> 
> 时间：2013-02-16T19:16:47.870
> 
> 标签：c++, opengl, textures, glsl

我是 OpenGL 的新手，并试图获得 2 个纹理之间的颜色差异。这是我的初始化函数：

```
glGenTextures(1, &TEX0);
glBindTexture(GL_TEXTURE_2D, TEX0);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER,GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL);

glGenTextures(1, &TEX1);
glBindTexture(GL_TEXTURE_2D, TEX1);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER,GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL);

glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, w, h, 0, MODE, GL_UNSIGNED_BYTE, BUFFER0);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, w, h, 0, MODE, GL_UNSIGNED_BYTE, BUFFER1); 
```

这是我的显示功能：

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glLoadIdentity();
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrtho(-1.0, 1.0, -1.0, 1.0, -1.0, 1.0);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
glColor3f(1.0f, 1.0f, 1.0f);
glEnable(GL_TEXTURE_2D);

glUseProgram(shader);

glActiveTexture(GL_TEXTURE0 + 0);
glBindTexture(GL_TEXTURE_2D, TEX0);
glActiveTexture(GL_TEXTURE0 + 1);
glBindTexture(GL_TEXTURE_2D, TEX1);

glUniform1i(glGetUniformLocation(shader, "tex0"), 0);
glUniform1i(glGetUniformLocation(shader, "tex1"), 1);

glBegin(GL_QUADS);
glTexCoord2f(0,0); glVertex2f(-1,-1);
glTexCoord2f(0,1); glVertex2f(-1,+1);
glTexCoord2f(1,1); glVertex2f(+1,+1);
glTexCoord2f(1,0); glVertex2f(+1,-1);
glEnd();

glDisable(GL_TEXTURE_2D);
glUseProgram(0);
glFlush();
glutSwapBuffers(); 
```

这是我的片段着色器：

```
uniform sampler2D tex0;
uniform sampler2D tex1;

void main()
{
    vec4 otex = texture2D(oframe, gl_TexCoord[0].st);
    vec4 ntex = texture2D(nframe, gl_TexCoord[0].st);
    gl_FragColor = vec4(abs(otex.rgb - ntex.rgb), 1.0);
} 
```

所以问题是第一个激活的纹理总是黑色的。如何解决这个问题？有很多类似的主题，但没有一个对我有帮助。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T19:46:17.550

第一个错误：OpenGL 是一个状态机。glTexImage 的调用会影响当前选择的纹理单元中当前绑定的纹理。你必须这样写：

```
glGenTextures(1, &tex0);
glBindTexture(GL_TEXTURE_2D, tex0);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, w, h, 0, MODE, GL_UNSIGNED_BYTE, BUFFER0);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER,GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);

glGenTextures(1, &tex1);
glBindTexture(GL_TEXTURE_2D, tex1);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, w, h, 0, MODE, GL_UNSIGNED_BYTE, BUFFER1);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER,GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT); 
```

glTexImage 是在 glTexEnv 的 glTexParameter 之前还是之后并不重要，它可以工作。由于您使用的是片段着色器 glTexEnv 是不必要的。glTexEnv 可以设置的所有内容都已被片段着色器中表达式的多功能性所取代。

# mathjax - 有没有办法为 wordpress.com 配置 mathjax？

> ID：14914127
> 
> 赞同：4
> 
> 时间：2013-02-16T19:17:59.040
> 
> 标签：mathjax, wordpress.com

wordpress.org 有一个插件。但是有没有办法在 wordpress.com 的页面模板中添加一些代码，就像你可以为博主一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-11T06:20:43.600

在 wordpress.com 上搜索“mathjax”，我发现[这个线程](http://en.forums.wordpress.com/topic/mathjax?replies=4)很有用。在第二篇文章中，它提供了LaTeX 支持官方指南的[链接，如果您](http://en.support.wordpress.com/latex/)*只*需要在 wordpress.com 上排版数学，它会很有帮助。

# c++ - C++ 未定义对模板类方法的引用

> ID：14914129
> 
> 赞同：2
> 
> 时间：2013-02-16T19:18:20.257
> 
> 标签：c++, templates, undefined-reference

我总是得到

> 未定义对 `Graph::InsertVertex(std::string)' 的引用

如果我编译我的项目！任何提示为什么他不能解决这个参考？（所有文件都在 netbeans 项目文件夹中）

// **main.cpp**

```
#include <cstdlib>
#include <string>
#include "Graph.h"

using namespace std;

int main(int argc, char** argv)
{
    Graph<string> *graph = new Graph<string>(); // <--- ERROR

    graph->InsertVertex("A");

    return 0;
} 
```

//**节点.h**

```
#include <iostream>
#include "Graph.h"

template<class T> 
class Node
{   

friend class Graph;    

public:
    Node(T val)
    {
        this->data = val;
        this->vertList = NULL;
        this->next = NULL;
    }

    Node(const Node& orig);
    virtual ~Node();

private:
    T data;
    Node<T> *vertList;
    Node<T> *next;
    int status;

}; 
```

//**图形.h**

```
#include <iostream>
#include "Node.h"

template <class T> 
class Graph 
{    
public:
    Graph()
    {
        head = NULL;        
    }

    void InsertVertex(T val);    
    void InsertEdge(T v_val, T e_val);

    void PrintVertices();
    void PrintEdges(T v_val);

    void DeleteEdge(T v_val, T e_val);   
    void DeleteVertex(T val);

    void bfs();    

private:
    Node<T> *head;

}; 
```

//**图形.cpp**

```
#include "Graph.h"

template <class T>
void Graph<T>::InsertVertex(T val)
{
    Node<T> *temp = new Node<T>(val);

    if(head == NULL) head = temp;
    else
    {
        Node<T> node = head;

        while(node->vertList != NULL)
            node = node->vertList;

        node->vertList = temp;
    }   
}

template <class T>
void Graph<T>::InsertEdge(T v_val, T e_val)
{
    if (head != NULL)
    {
        Node<T> *k = head;
        Node<T> *t = head;
        Node<T> *temp = new Node<T> (e_val);        

        while (t != NULL)
        {
            if (t->data == v_val)
            {
                Node<T> *s = t;

                while (s->next != NULL)
                    s = s->next;

                s->next = temp;

                while (k != NULL)
                {
                    if(k->data == e_val) break;

                    k = k->vertList;
                }

                temp->vertList = k;
                return;
            }

            t = t->vertList;
        } // end while loop        
    }
    else std::cout << "Add first vertices to the graph" << std::endl;
}

template <class T>
void Graph<T>::PrintEdges(T v_val)
{
    Node<T>* t = head;

    while (t != NULL)
    {
        if (t->data == v_val)
        {
            while (t->next != NULL)
            {
                std::cout << t->next->vertList->data << "   ";
                t = t->next;
            }
        }
        t = t->vertList;
    }
}

template <class T>
void Graph<T>::PrintVertices()
{
    Node<T>* t = head;

    while (t != NULL)
    {
        std::cout << t->data << "   ";
        t = t->vertList;
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-16T19:26:02.070

通常，您希望您的模板方法在标头中，以便在需要时编译它们。如果您真的想将其隐藏在实现文件中，则必须显式实例化`Graph.cpp`模板

```
template class  Graph<string>; 
```

由于您必须对`T`您打算使用的每种类型都这样做，`Graph<T>`因此模板类的要点有些失败，您最好将所有内容都放入标题中

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-16T19:21:44.207

您需要在头文件中定义成员函数，因为在实例化模板时，编译器需要访问方法的实现，以使用模板参数实例化它们。

在您的示例中：

```
template <class T> 
class Graph  {    
public:
    void InsertVertex(T val) {
        Node<T> *temp = new Node<T>(val);

        if(head == NULL) 
            head = temp;

        // ... 
    }

    // ...

private:
    Node<T> *head;
}; 
```

# windows - 文件服务器上的递归“触摸”

> ID：14914131
> 
> 赞同：0
> 
> 时间：2013-02-16T19:18:35.000
> 
> 标签：windows, date, recursion, directory, last-modified

我想通过管理我的 Windows 文件服务器来完成一些事情：

我想将服务器上所有文件夹的“上次修改”日期（只是文件夹和子文件夹，而不是其中的文件）更改为与最近的“创建”（或者可能是“上次修改”）日期相同文件夹内的文件。（在许多情况下，文件夹上的日期比其中的最新文件新得多。）

我想从最深的子文件夹到根目录递归地执行此操作。我也想在不手动输入任何日期和时间的情况下执行此操作。

我敢肯定，结合脚本和“触摸”的 Windows 端口，我也许可以做到这一点。你有什么建议吗？我也许可以做到这一点。你有什么建议吗？

这个封闭的话题似乎真的很接近，但我不知道如何只触摸文件夹而不触摸里面的文件，或者如何获取最新文件的日期。[递归触摸以修复计算机之间的同步](https://stackoverflow.com/questions/12460728/recursive-touch-to-fix-syncing-between-computers)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:02:03.653

如果是出于备份目的，在 Windows 中有存档标志（而不是修改时间戳）。您可以使用 ATTRIB /S 递归设置它（参见 ATTRIB /?）

如果是出于其他目的，您可以使用一些 touch.exe 实现并使用递归：

FOR /R（见 FOR /?）

[http://ss64.com/nt/for_r.html](http://ss64.com/nt/for_r.html) [http://ss64.com/nt/touch.html](http://ss64.com/nt/touch.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T23:17:52.080

我认为您可以在 PowerShell 中执行此操作。我只是试着把一些东西放在一起，它似乎工作正常。您可以使用 Set-DirectoryMaxTime(".\Directory") 在 PowerShell 中调用它，它将在该目录下的每个目录上递归操作。

```
function Set-DirectoryMaxTime([System.IO.DirectoryInfo]$directory)
{

    # Grab a list of all the files in the directory
    $files = Get-ChildItem -File $directory
    # Get the current CreationTime of the directory we are looking at
    $maxdate = Get-Date $directory.CreationTime

    # Find the most recently edited file's LastWriteTime
    foreach($file in $files)
    {

        if($file.LastWriteTime -gt $maxdate) { $maxdate = $file.LastWriteTime }
    }

    # This needs to be in a try/catch block because there is a reasonable chance of it failing 
    #     if a folder is currently in use
    try
    {

        # Give the directory a LastWriteTime equal to the newest file's LastWriteTime
        $directory.LastWriteTime = $maxdate

    } catch {

        # One of the directories could not be updated
        Write-Host "Could not update directory: $directory"
    }

    # Get all the subdirectories of this directory
    $subdirectories = Get-ChildItem -Directory $directory

    # Jump into each of the subdirectories and do the same thing to each of their CreationTimes
    foreach($subdirectory in $subdirectories)
    {
        Set-DirectoryMaxTime($subdirectory)
    }

} 
```

# php - 列出表 php 和 mysqli 中的所有记录

> ID：14914135
> 
> 赞同：0
> 
> 时间：2013-02-16T19:18:46.970
> 
> 标签：php, mysqli

我已经完成了所有教程，但并不满意，甚至将事情混为一谈，看看它是否可以工作，但北向工作。

```
 <?
require( '../connect_db.php' ) ;

      echo '<h1>List All Customers</h1> ' ;
     $query = "SELECT * FROM CUSTOMER";
 $result= mysqli_num_rows($dbc,$query)
 if(mysqli_num_rows($result) > 0){

$clientid=mysql_result($result,"clientid");
$inital=mysql_result($result,"inital");
$firstname=mysql_result($result,"firstname");
$lastname=mysql_result($result,"lastname");
$mobile=mysql_result($result,"mobile");
$landline=mysql_result($result,"landline");
$email=mysql_result($result,"email");
$address=mysql_result($result,"address");
$postcode=mysql_result($result,"postcode");

echo '<table class="table table-hover">
<caption>List All Customers from Customer Table</caption>
<thead>
<tr>
<th>id</th>
<th>Inital</th>
<th>First Name</th>
<th>Last Name</th>
<th>Mobile</th>
<th>Landline</th>
<th>Email</th>
<th>Address</th>
<th>Post Code</th>
</tr>
 </thead>
<tbody>
<tr>
<td><?php echo $clientid; ?></td>
<td><?php echo $inital; ?></td>
<td><?php echo $firstname; ?></td>
<td><?php echo $lastname; ?></td>
<td><?php echo $mobile; ?></td>
<td><?php echo $landline; ?></td>
<td><?php echo $email; ?></td>
<td><?php echo $address; ?></td>
<td><?php echo $postcode; ?></td>
</tr>
</tbody>
</table>'

} else {'<p>There are currently no customers on the system.</p>';}
?> 
```

虽然它不起作用，但我需要一种简单的方法来显示表记录并设置它们的样式，以便它们易于阅读。我只需要知道要使用什么，因为我参考了仅带回第一个 id 的手册或仅显示数据库表的“显示表”但是当我尝试显示记录时它不起作用所以我知道不可能那么容易！

请问你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:22:46.717

您同时使用`mysqli`和`mysql`功能。你不能那样做。您必须选择其中之一。事实上，[mysql 函数已被官方弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[红框](http://uk.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](http://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:23:06.120

你有一个语法错误：

```
 $result= mysqli_num_rows($dbc,$query) 
```

应该

```
 $result= mysqli_num_rows($dbc,$query); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T19:26:10.303

可以在[此链接中找到如何执行此操作的一个非常好的示例](http://davidwalsh.name/html-mysql-php)

现在，您正试图将所有值放入一个单元格中。该示例将向您展示如何逐步浏览记录并将一个值放入每个单元格，以便它们保持对齐等。当然，其他人关于语法错误、不使用 MySQL 等的观点都很好——我不会重复它们。

# haskell - Haskell记录字段上的黑线鳕

> ID：14914138
> 
> 赞同：2
> 
> 时间：2013-02-16T19:19:14.903
> 
> 标签：haskell, haddock

我正在尝试为界面上的记录字段编写黑线鳕。只导出了一些字段，所以我只希望记录其中的一些。我在这里阅读了文档页面：[http ://www.haskell.org/haddock/doc/html/ch03s02.html#id565178](http://www.haskell.org/haddock/doc/html/ch03s02.html#id565178)

但是，我似乎无法让它发挥作用。这是我尝试编写黑线鳕的部分：

```
{-|
Describes a Clients connection and provides an interface for
storing data associated with the client. Each client will be given
a unique cid and are Eq if their cid's are Eq.

A ClientConn comes packaged with two functions for storing additional
information in Strings, lookup and modify. The lookup function
takes a key and returns the current value of the key or the empty
string if it has never been set. The modify function
takes a key and value and updates it such that the next call to
lookup with that key will return the value provided.
-}
data ClientConn = ClientConn { -- | The Unique ID for this client
                               cid       :: Integer,
                               -- | A lookup function for this client
                               lookup    :: (String -> IO String),
                               -- | A modify function for this client
                               modify    :: (String -> String -> IO ()),
                               chandle   :: Handle,
                               host      :: Net.HostName,
                               pid       :: Net.PortNumber,
                               msgList  :: List String,
                               dead      :: MVar Bool,
                               timestamp :: TimeStamp,
                               tid       :: MVar (ThreadId, ThreadId),
                               lock      :: MVar Lock.Lock} 
```

数据类型的注释正确显示在生成的黑线鳕中。但是，不会生成任何记录。我希望它为 cid、查找和修改记录生成。

提前致谢！

完整的源代码可以在这里找到：[https ://github.com/jcollard/simple-server/blob/master/Network/SimpleServer.hs](https://github.com/jcollard/simple-server/blob/master/Network/SimpleServer.hs)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T22:25:44.240

不幸的是，黑线鳕目前不支持仅将记录的少数字段的文档显示为该记录的*字段*。您可以通过导出所有字段来解决此问题：

```
module Foo (ClientConn(..)) where ... 
```

或通过导出字段，但不作为字段：

```
module Foo (ClientConn, cid, lookup, modify) where ... 
```

在后一种情况下，文档不会自动指出这些函数实际上是字段，但它们可以在记录语法中使用。

# mongodb - 具有两种不同结果的 MapReduce 函数

> ID：14914139
> 
> 赞同：1
> 
> 时间：2013-02-16T19:19:22.447
> 
> 标签：mongodb, mapreduce

对于以下文档

```
{
    "_id" : ObjectId("511b7d1b3daee1b1446ecdfe"),
    "l_linenumber" : 1,
    "l_quantity" : 17,
    "l_extendedprice" : 21168.23,
    "l_discount" : 0.04,
    "l_tax" : 0.02,
    "l_returnflag" : "N",
    "l_linestatus" : "O",
    "l_shipdate" : ISODate("1996-03-13T03:00:00Z"),
    "l_commitdate" : ISODate("1996-02-12T03:00:00Z"),
    "l_receiptdate" : ISODate("1996-03-22T03:00:00Z"),
    "l_shipinstruct" : "DELIVER IN PERSON",
    "l_shipmode" : "TRUCK",
    "l_comment" : "blithely regular ideas caj",
} 
```

我尝试了两个类似的 map reduce 函数：首先

```
db.runCommand({
    mapreduce: "lineitem",
    query: {
        l_shipdate: {'$gte': new Date("Jan 01, 1994")},
        l_shipdate: {'$lt': new Date("Jan 01, 1995")},
        l_discount: {'$gte':0.05},
        l_discount: {'$lte':0.07},
        l_quantity: {'$lt':24}
    },
    map : function Map() {
            var revenue = this.l_extendedprice * this.l_discount;
            emit("REVENUE", revenue);
        },
    reduce : function(key, values) {
                return Array.sum(values);
            },
    out: 'query006'
}); 
```

第二

```
db.runCommand({
    mapreduce: "lineitem",
    map : function Map() {
            var dataInicial = new Date("Jan 1, 1994");
            var dataFinal = new Date("Jan 1, 1995");

            if( this.l_discount>=0.05 && this.l_discount<=0.07 && this.l_quantity<24 && this.l_shipdate>=dataInicial && this.l_shipdate<dataFinal) {
                var produto = this.l_extendedprice * this.l_discount;
                emit("revenue", produto);
            }
        },
    reduce : function(key, values) {
                return Array.sum(values);
            },
    out: 'query006' 
```

## });

对我来说，这两个函数都是相等的，并且可能返回相同的结果。但只有第二个返回正确答案。

这些函数是我在 TPC-H 基准测试中转换 SQL 查询存在的尝试。查询显示在这里：

```
select
    sum(l_extendedprice*l_discount) as revenue
from 
    lineitem
where 
    l_shipdate >= date '1994-01-01'
    and l_shipdate < date '1994-01-01' + interval '1' year
    and l_discount between 0.06 - 0.01 and 0.06 + 0.01
    and l_quantity < 24; 
```

为什么当我在第一个函数中使用查询语句时，结果大于正确答案？功能真的一样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:33:37.637

[我认为您的查询违反了$and 运算符文档](http://docs.mongodb.org/manual/reference/operator/and/#_S_and)中的以下段落：

> MongoDB 在指定逗号分隔的表达式列表时提供隐式 AND 操作。例如，您可以将上述查询编写为：
> 
> `db.inventory.find( { price: 1.99, qty: { $lt: 20 } , sale: true } )`
> 
> 但是，如果查询需要对同一字段（例如 ）进行 AND 操作`{ price: { $ne: 1.99 } } AND { price: { $exists: true } }`，则可以将`$and`运算符用于两个单独的表达式，或者将运算符表达式组合用于字段`{ price: { $ne: 1.99, $exists: true } }`。

如果我们遵循文档的建议，以下查询应该可以解决问题：

```
query: {
    l_shipdate: {'$gte': new Date("Jan 01, 1994"), '$lt': new Date("Jan 01, 1995")},
    l_discount: {'$gte':0.05, '$lte':0.07},
    l_quantity: {'$lt':24}
}, 
```

# android - 简单适配器为空？

> ID：14914140
> 
> 赞同：0
> 
> 时间：2013-02-16T19:19:24.013
> 
> 标签：android, listview, android-listview, simpleadapter

```
package com.coltonnicotera.londontransitguide;

//bunch of imports

public class SchedulesActivity extends Activity {

    /** Called when the activity is first created. */
    List<Map<String, String>> routesList = new ArrayList<Map<String,String>>();

    String[] routesArray = new String[] {"01\. Kipps Lane/Thompson Road", "02\. Dundas", "03\. Hamilton Rd", "04\. Oxford East", "05\. Springbank", "06\. Richmond", "07\. Wavell", "08\. Riverside", "09\. Whitehills", "10\. Wonderland", "11\. Southcrest", "12\. Warncliffe South", "13\. Wellington Road", "14\. Highbury", "15\. Westmount", "16\. Adelaide", "17\. Oxford West", "19\. Oakridge", "20\. Cherryhill", "21\. Huron Heights", "22\. Trafalgar", "23\. Berkshire", "24\. Baseline", "25\. Kilally", "26\. Jalna Blvd. West", "27\. Fanshawe College", "28\. Lambeth", "30\. Newbold", "31\. Orchard Park", "32\. Windermere", "33\. Proudfoot", "34\. Medway", "35\. Argyle", "36\. Airport/Industrial", "37\. Sovereign Road", "38\. Stoney Creek", "39\. Fanshawe West"};      

    public void onCreate(Bundle savedInstanceState) {
        initList();
        ListView lv = (ListView) findViewById(R.id.listView);    
        SimpleAdapter simpleAdpt = new SimpleAdapter(this, routesList, android.R.layout.simple_list_item_1, new String[] {"route"}, new int[] {android.R.id.text1}); 
/*LINE 63 */        lv.setAdapter(simpleAdpt);
    }

   private void initList() {
       for (int i = 0; i<=36; i++)
           routesList.add(createRoute("route", routesArray[i]));
    }

   private HashMap<String, String> createRoute(String key, String name) {
        HashMap<String, String> route = new HashMap<String, String>();
        route.put(key, name);
        return route;
    }
} 
```

我的问题是在第 63 行有一个 NullPointerException。我不确定这里究竟是什么。为简单起见，我删除了所有导入。R.id.listView 也存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:21:32.603

你还没有设置你的布局为什么 listview findViewbyId 返回 null ...所以你需要做的是在 oncreate() 中，在实际获取你的 listview 之前设置 contentView ...像这样`setContentView(R.layout.yourlayout)`

# ios - 存在哪些 WiFi-Direct 库？

> ID：14914144
> 
> 赞同：2
> 
> 时间：2013-02-16T19:20:03.390
> 
> 标签：ios, linux, macos, raspberry-pi, wifi-direct

我想在我的苹果设备之间玩屏幕共享。我知道 WiFi 直接是支持 Airdrop 功能以在 Mac 之间发送文件并希望使用该 API 的一部分。

我会继续搜索，但想知道是否有人以前这样做过，或者苹果是否不会让你接触那个 API。

我也很高兴听到任何可能专门用于 raspberry-pi 或一般 Linux 的库。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T19:31:29.887

我的一个朋友演示了他前几天正在使用 AllJoyn 库的 Android 项目。AllJoyn 是一个开源 API，支持 Wifi-direct 以及其他无线协议，并在 Android、Linux 和 iOS 上受支持。可能值得一看。

[https://www.alljoyn.org/](https://www.alljoyn.org/)

# php - Smarty - 如何制作函数？

> ID：14914146
> 
> 赞同：0
> 
> 时间：2013-02-16T19:20:20.780
> 
> 标签：php, class, function, smarty

我尝试制作一个可以在 .tpl 文件中运行的函数。

我包括了一堂课`Templates`：

```
<?php

class Templates {
    function getTemplate($template, $gameid) {
        echo "test";
    }
}

?> 
```

然后我把它放到 PHP 页面中。

```
//Create a template object
$templates = new Templates();
$tpl->assign("template", $templates); 
```

然后我尝试在以下位置调用该函数`tpl file`：

`{$template->get('header',1)}`

但是当我尝试这个时，我只是得到一个空白页。

任何想法如何实际做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:47:00.513

您可能应该查看[有关 Smarty Plugins 的文档](http://www.smarty.net/docs/en/plugins.tpl)。这些允许您注册自己的函数，这些函数可以像内置标签和修饰符一样使用，甚至可以与`{include}`函数一起使用自定义模板数据源。

您的示例过于精简，无法猜测您实际想要实现的目标，因此如果您看不到实现特定目标的方法，请随时发布后续问题。

# c#-4.0 - 调整服务器上的图像大小，然后上传到 azure

> ID：14914155
> 
> 赞同：3
> 
> 时间：2013-02-16T19:21:14.950
> 
> 标签：c#-4.0, azure-storage

我有以下功能，用于将文件上传到 azure 存储帐户。

如您所见，它不会调整大小等：

public string UploadToCloud(FileUpload fup, string containerName) { // 从连接字符串中检索存储帐户。CloudStorageAccount storageAccount = CloudStorageAccount.Parse(ConfigurationManager.AppSettings["StorageConnectionString"]);

```
 // Create the blob client.
    CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();

    // Retrieve a reference to a container. 
    CloudBlobContainer container = blobClient.GetContainerReference(containerName);

    string newName = "";
    string ext = "";
    CloudBlockBlob blob = null;

    // Create the container if it doesn't already exist.
    container.CreateIfNotExists();

    newName = "";
    ext = Path.GetExtension(fup.FileName);

    newName = string.Concat(Guid.NewGuid(), ext);

    blob = container.GetBlockBlobReference(newName);

    blob.Properties.ContentType = fup.PostedFile.ContentType;

    //S5: Upload the File as ByteArray            
    blob.UploadFromStream(fup.FileContent);

    return newName;

} 
```

然后，我拥有了在未托管在 azure 上的网站上使用过的此功能：

```
public string ResizeandSave(FileUpload fileUpload, int width, int height, bool deleteOriginal, string tempPath = @"~\tempimages\", string destPath = @"~\cmsgraphics\")
        {
            fileUpload.SaveAs(Server.MapPath(tempPath) + fileUpload.FileName);

            var fileExt = Path.GetExtension(fileUpload.FileName);
            var newFileName = Guid.NewGuid().ToString() + fileExt;

            var imageUrlRS = Server.MapPath(destPath) + newFileName;

            var i = new ImageResizer.ImageJob(Server.MapPath(tempPath) + fileUpload.FileName, imageUrlRS, new ImageResizer.ResizeSettings(
                            "width=" + width + ";height=" + height + ";format=jpg;quality=80;mode=max"));

            i.CreateParentDirectory = true; //Auto-create the uploads directory.
            i.Build();

            if (deleteOriginal)
            {
                var theFile = new FileInfo(Server.MapPath(tempPath) + fileUpload.FileName);

                if (theFile.Exists)
                {
                    File.Delete(Server.MapPath(tempPath) + fileUpload.FileName);
                }
            }

            return newFileName;
        } 
```

现在我想做的是尝试将两者合并......或者至少找出一种能够在将图像存储在天蓝色之前调整图像大小的方法。

有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-20T23:49:06.423

我希望你已经让它工作了，但我今天正在寻找一些可行的解决方案，但我找不到。但最后我做到了。

这是我的代码，希望对某人有所帮助：

```
 /// <summary>
    /// Saving file to AzureStorage
    /// </summary>
    /// <param name="containerName">BLOB container name</param>
    /// <param name="MyFile">HttpPostedFile</param>
    public static string SaveFile(string containerName, HttpPostedFile MyFile, bool resize, int newWidth, int newHeight)
    {
        string fileName = string.Empty;

        try
        {
            CloudStorageAccount storageAccount = CloudStorageAccount.Parse(ConfigurationManager.ConnectionStrings["StorageConnectionString"].ConnectionString);
            CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();
            CloudBlobContainer container = blobClient.GetContainerReference(containerName);
            container.CreateIfNotExists(BlobContainerPublicAccessType.Container);

            string timestamp = Helper.GetTimestamp() + "_";
            string fileExtension = System.IO.Path.GetExtension(MyFile.FileName).ToLower();
            fileName = timestamp + MyFile.FileName;

            CloudBlockBlob blockBlob = container.GetBlockBlobReference(fileName);
            blockBlob.Properties.ContentType = MimeTypeMap.GetMimeType(fileExtension);

            if (resize)
            {
                Bitmap bitmap = new Bitmap(MyFile.InputStream);

                int oldWidth = bitmap.Width;
                int oldHeight = bitmap.Height;

                GraphicsUnit units = System.Drawing.GraphicsUnit.Pixel;
                RectangleF r = bitmap.GetBounds(ref units);
                Size newSize = new Size();

                float expectedWidth = r.Width;
                float expectedHeight = r.Height;
                float dimesion = r.Width / r.Height;

                if (newWidth < r.Width)
                {
                    expectedWidth= newWidth;
                    expectedHeight = expectedWidth/ dimesion;
                }
                else if (newHeight < r.Height)
                {
                    expectedHeight = newHeight;
                    expectedWidth= dimesion * expectedHeight;
                }
                if (expectedWidth> newWidth)
                {
                    expectedWidth= newWidth;
                    expectedHeight = expectedHeight / expectedWidth;
                }
                else if (nPozadovanaVyska > newHeight)
                {
                    expectedHeight = newHeight;
                    expectedWidth= dimesion* expectedHeight;
                }
                newSize.Width = (int)Math.Round(expectedWidth);
                newSize.Height = (int)Math.Round(expectedHeight);

                Bitmap b = new Bitmap(bitmap, newSize);

                Image img = (Image)b;
                byte[] data = ImageToByte(img);

                blockBlob.UploadFromByteArray(data, 0, data.Length);
            }
            else
            {
                blockBlob.UploadFromStream(MyFile.InputStream);
            }                
        }
        catch
        {
            fileName = string.Empty;
        }

        return fileName;
    }

    /// <summary>
    /// Image to byte
    /// </summary>
    /// <param name="img">Image</param>
    /// <returns>byte array</returns>
    public static byte[] ImageToByte(Image img)
    {
        byte[] byteArray = new byte[0];
        using (MemoryStream stream = new MemoryStream())
        {
            img.Save(stream, System.Drawing.Imaging.ImageFormat.Png);
            stream.Close();

            byteArray = stream.ToArray();
        }
        return byteArray;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T18:33:50.783

我在 Windows Phone 8 应用程序上进行了调整大小操作。正如您所想象的那样，与整个 .NET 运行时相比，WP8 的运行时受到更多限制，因此如果您没有与我相同的限制，可能还有其他选项可以更有效地执行此操作。

```
public static void ResizeImageToUpload(Stream imageStream, PhotoResult e)
    {            
        int fixedImageWidthInPixels = 1024;
        int verticalRatio = 1;

        BitmapImage bitmap = new BitmapImage();
        bitmap.SetSource(e.ChosenPhoto);
        WriteableBitmap writeableBitmap = new WriteableBitmap(bitmap);
        if (bitmap.PixelWidth > fixedImageWidthInPixels)
            verticalRatio = bitmap.PixelWidth / fixedImageWidthInPixels;
        writeableBitmap.SaveJpeg(imageStream, fixedImageWidthInPixels,
            bitmap.PixelHeight / verticalRatio, 0, 80);                                       
    } 
```

如果图像宽度大于 1024 像素，代码将调整图像大小。该变量`verticalRatio`用于计算图像的比例，以免在调整大小期间丢失其纵横比。然后代码使用原始图像质量的 80% 对新的 jpeg 进行编码。

希望这可以帮助

# iphone - 如果帐户从未在游戏中心使用过，则 GameCenter 操作取消

> ID：14914159
> 
> 赞同：1
> 
> 时间：2013-02-16T19:21:21.130
> 
> 标签：iphone, ios, ipad, game-center

我在我的应用程序上使用 GameCenter。我有这些线

```
GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];
[localPlayer authenticateWithCompletionHandler:^(NSError *error) {
    if (localPlayer.isAuthenticated)
    {

        } 
```

问题是 localPlayer.isAuthenticated 标志始终为 TRUE bur 错误变量带有代码 2 =“操作被取消”（???）。

我已从设备的游戏中心和商店注销，但此标志始终为真，我没有看到我的应用程序启动时应显示的游戏中心登录。当使用游戏中心的游戏开始时，我看不到总是显示的“欢迎”横幅。

如何强制退出游戏中心以使登录窗口再次显示？

我正在为 iOS 4.3 编译。

谢谢

* * *

我现在发现的是，如果您从未登录设备的游戏中心，就会发生这种情况。一旦你在那里登录，并说你想在游戏中心使用你的用户名，该应用程序就可以工作了。最糟糕的是：假设有人下载了游戏，但还没有设置游戏中心。那么，游戏永远不适合他们？我的游戏应该只在游戏中心上运行。所以，对我来说这是一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T08:38:39.120

对我来说它工作得很好。刚刚更改了代码

```
if([GKLocalPlayer localPlayer].authenticated) 
```

到

```
if([GKLocalPlayer localPlayer].authenticated == NO) 
```

//其他代码

```
if([GKLocalPlayer localPlayer].authenticated == NO)
    {
              [[GKLocalPlayer localPlayer] authenticateWithCompletionHandler:^(NSError *error)
             {
                  [self processGameCenterAuth: error];
             }];
    }

- (void) processGameCenterAuth: (NSError*) error
{
    if(error == NULL)
    {
        [mGameCenterManager reloadHighScoresForCategory: self.currentLeaderBoard];
    }
    else
    {
        // NSLog(@"%@\n\n",[NSString stringWithFormat: @"Reason: %@", [error localizedDescription]]);

        AppController *app = (AppController*)[UIApplication sharedApplication].delegate;

        if(!app.isgameCenterStarted)
        {
            UIAlertView* alert= [[[UIAlertView alloc] initWithTitle:@"Game Center Unavailable" message: @"Player is not signed in"
                                                           delegate: NULL cancelButtonTitle: @"OK" otherButtonTitles: NULL] autorelease];
            [alert show];
        }
        else
        {
            [[NSNotificationCenter defaultCenter] postNotificationName:@"GameCenterUnAvailable" object:nil];
        }
    }

} 
```

# jquery - 使用 AJAX 连接局域网中的两台设备

> ID：14914161
> 
> 赞同：1
> 
> 时间：2013-02-16T19:21:28.590
> 
> 标签：jquery, ajax, html

我是一名网络程序员，但我遇到了一个难题（而且我的英语很差）。我必须通过 LAN/Internet 从一个设备（带浏览器）向另一个设备发送一些数据（仅一个或两个字节）。问题是第二个设备是被动的，所以它不像电脑，只是接受信号。我必须在 HTML5/JS 中制作脚本，因为 PHP 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:28:10.853

当您不清楚您要完成的工作时，很难为您提供帮助。但是，我假设您可以访问 Internet，并且正在考虑使用浏览器。

如果这不重要，对我自己来说，如果我不太在意的话；我会做这样的事情： 客户：有一个脚本可以将信息发布到 PHP，它可以将其保存在文件或数据库中。接收计算机：打开一个网站，通过使用 javascript-interval 或 META-REFRESH 检查是否保存了任何数据。

但是，如果我感到困扰，我可能会使用 node.js 来创建您要查找的内容： [http ://nodejs.org/](http://nodejs.org/)

虽然很难在不知道你到底在追求什么的情况下说...

# assembly - 比较两个词

> ID：14914167
> 
> 赞同：1
> 
> 时间：2013-02-16T19:21:42.140
> 
> 标签：assembly, x86, word, nasm

如何比较 NASM 汇编中的两个单词？考虑这段代码：

```
global start
start:
    mov eax,array
    mov edx,4
    mov ecx,2987074
.LOOP1:
    cmp word [eax],ecx
    je .FOUND
    add eax,4
    sub edx,1
    jz .NOTFOUND
    jmp .LOOP1
.FOUND:
    xor ebx,ebx
    jmp .EXIT
.NOTFOUND:
    mov ebx,1
.EXIT:
    mov eax,1
    int 0x80

array:  
    dd 1137620
    dd 3529469
    dd 2987074
    dd 1111111
    dd 2222222 
```

返回

> foo.asm:7：错误：操作数大小不匹配

并将 cmp 从更改`cmp word [eax],ecx`为`cmp word [eax],word ecx`

返回：

```
foo.asm:7: warning: register size specification ignored
foo.asm:7: error: mismatch in operand sizes 
```

我不知道如何解决这个问题。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:45:43.233

`cmp word [eax],ecx`是错误的，因为操作数大小不匹配（`ecx`是 a `dword`，不是`word`）。大多数具有两个操作数的 x86 指令只能使用相同大小的操作数。

`cmp word [eax],word ecx`是错误的，因为`ecx`is a `dword`， not `word`。

如果你来自`(g)as`/`gcc`世界，值得注意的是它们`.word`是机器字，而在 32 位机器上它是 32 位的。NASM`word`始终是 16 位，它`dword`始终是 32 位。

You probably want just `cmp [eax], ecx`. Since the two operands of `cmp` must be of the same size, NASM deduces here that the memory operand at address in `eax` is the same size as the register operand `ecx`, 32-bit (`dword`).

# c# - Google API OAuth 2：在 Google 的 .NET 库中使用授权码作为字符串

> ID：14914172
> 
> 赞同：0
> 
> 时间：2013-02-16T19:22:05.697
> 
> 标签：c#, winforms, google-api, oauth-2.0, google-api-dotnet-client

我的 WinForms 应用程序需要访问 Google API（日历）之一。为此，该应用需要获得授权，Google 为此提供了 OAuth 2。我在[这里](https://developers.google.com/accounts/docs/OAuth2InstalledApp)阅读了他们文档网站上的所有内容。

从 Google 上的另一个文档页面，我了解了如何通过浏览器请求获取授权密钥。这发生在控制台 C# 应用程序中。它的作用是：

```
var provider = new NativeApplicationClient(GoogleAuthenticationServer.Description, CLIENT_ID, CLIENT_SECRET);
var auth = new OAuth2Authenticator<NativeApplicationClient>(provider, GetAuthorization);
var service = new CalendarService(auth);
string id = <calendar id>;
Calendar calendar = service.Calendars.Get(id).Fetch(); 
```

在最后一行，会打开一个浏览器窗口，其中包含一个 Google 页面，要求我允许该应用访问我的 Google 帐户。在控制台应用程序中，ReadLine() 正在等待输入。这来自`GetAuthorization`方法：

```
private static IAuthorizationState GetAuthorization(NativeApplicationClient arg)
{
    // Get the auth URL:
    IAuthorizationState state = new AuthorizationState(new[] { CalendarService.Scopes.Calendar.GetStringValue() });
    state.Callback = new Uri(NativeApplicationClient.OutOfBandCallbackUrl);
    Uri authUri = arg.RequestUserAuthorization(state);

    // Request authorization from the user (by opening a browser window):
    Process.Start(authUri.ToString());
    Console.Write("  Authorization Code: ");
    string authCode = Console.ReadLine();
    Console.WriteLine();

    // Retrieve the access token by using the authorization code:
    return arg.ProcessUserAuthorization(authCode, state);
} 
```

因此，我授予我的应用程序访问我的 Gmail 帐户的权限，并得到一个代码作为回报。我将此代码粘贴回控制台窗口，然后应用程序的其余部分按应有的方式工作（在我的情况下，创建一个新的日历事件）。

但我的问题是我希望在 WinForms 应用程序中使用此功能，而不是在控制台应用程序中。我*无法*在 Google 的页面上找到任何关于此的内容。

到目前为止我所拥有的：

*   用户单击一个按钮，浏览器打开，用户授予访问权限并检索代码。
*   用户将此代码粘贴到应用程序中。
*   单击另一个按钮，这是我想使用用户输入的代码进行授权过程的地方。这是一个字符串，我不知道如何将它与本文顶部编写的所有身份验证方法结合起来。

我觉得使用 Google 的 REST 客户端而不是本地 .NET 库是可能的，但我真诚地想使用 .NET 库而不是 REST。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T03:04:51.810

查看[AuthorizationMgr](https://code.google.com/p/google-api-dotnet-client/source/browse/SampleHelper/AuthorizationMgr.cs?repo=samples)类，特别是 RequestNativeAuthorization 方法。它使用[LoopbackServerAuthorizationFlow](https://code.google.com/p/google-api-dotnet-client/source/browse/SampleHelper/NativeAuthorizationFlows/LoopbackServerAuthorizationFlow.cs?repo=samples)类，该类为您创建了一个 tcp 侦听器并从传入请求中获取代码。

您还应该查看使用该机制的示例之一（例如[CreateTask](https://code.google.com/p/google-api-dotnet-client/source/browse/Tasks.CreateTasks/Program.cs?repo=samples)示例）

# asp.net-mvc-3 - Microsoft.CSharp.RuntimeBinder.RuntimeBinderException

> ID：14914173
> 
> 赞同：2
> 
> 时间：2013-02-16T19:22:15.677
> 
> 标签：asp.net-mvc-3, exception, dynamic, runtime, meta-tags

我的 MVC3 Web 应用程序有问题。我收到一个 RuntimeBinderException。

我的动态页面元标记有问题。元标记是从 .resx 文件中设置的。我认为它无法在运行时访问资源。而且其他国家的人也无法访问该网站。存在连接超时错误。但是我们在美国，我们可以访问该网站。你有什么主意吗？

我的元标记在下面；

```
public ActionResult Index()
    {
        ViewBag.Description = Glob.HomeDescription;
        ViewBag.Keywords = Glob.HomeKeywords; ;
        ViewBag.Title = Glob.HomeTitle;

        var data = new HomeData();
        data.AnnouncementLists = _announcementService.GetAnnouncementList(LanguageId).Data;
        data.FeedBackLists = _feedbackService.GetFeedbackListHome(LanguageId).Data;
        data.Newfeedback = new FeedBackDTO { Context = "", Id = Guid.NewGuid(), Date = DateTime.Now, FeedBackId = Guid.NewGuid(), LanguageId = LanguageId, Status = false, LanguageName = "", Who = "" };
        return View(data);
    } 
```

错误如下；

```
Exception Type: Microsoft.CSharp.RuntimeBinder.RuntimeBinderException

Message: 'System.Dynamic.DynamicObject' does not contain a definition for 'Description'

Stack Trace: at Microsoft.CSharp.RuntimeBinder.RuntimeBinderController.SubmitError(CError pError) at Microsoft.CSharp.RuntimeBinder.Semantics.LangCompiler.SubmitError(CParameterizedError error) at Microsoft.CSharp.RuntimeBinder.Semantics.MemberLookup.ReportErrors() at Microsoft.CSharp.RuntimeBinder.RuntimeBinder.BindProperty(DynamicMetaObjectBinder payload, ArgumentObject argument, LocalVariableSymbol local, EXPR optionalIndexerArguments, Boolean fEventsPermitted) at Microsoft.CSharp.RuntimeBinder.RuntimeBinder.BindAssignment(DynamicMetaObjectBinder payload, ArgumentObject[] arguments, Dictionary`2 dictionary) at Microsoft.CSharp.RuntimeBinder.RuntimeBinder.DispatchPayload(DynamicMetaObjectBinder payload, ArgumentObject[] arguments, Dictionary`2 dictionary) at Microsoft.CSharp.RuntimeBinder.RuntimeBinder.BindCore(DynamicMetaObjectBinder payload, IEnumerable`1 parameters, DynamicMetaObject[] args, DynamicMetaObject& deferredBinding) at Microsoft.CSharp.RuntimeBinder.RuntimeBinder.Bind(DynamicMetaObjectBinder payload, IEnumerable`1 parameters, DynamicMetaObject[] args, DynamicMetaObject& deferredBinding) at Microsoft.CSharp.RuntimeBinder.BinderHelper.Bind(DynamicMetaObjectBinder action, RuntimeBinder binder, IEnumerable`1 args, IEnumerable`1 arginfos, DynamicMetaObject onBindingError)**strong text** 
```

任何意见将是有益的。谢谢。

# jquery - 选择最后一个直系孩子

> ID：14914174
> 
> 赞同：2
> 
> 时间：2013-02-16T19:22:19.057
> 
> 标签：jquery, xml, querypath

我的 XML 结构就像

```
<root>
  <elem1>..</elem1>
  <elem1>..</elem1>
  *<elem1>..</elem1>*
  <elem2>
    <elem1>..</elem1>
    <elem1>..</elem1>
    ¬ <elem1>..</elem1> ¬
  </elem2>
</root> 
```

**我需要选择根的直接子级的最后一个 elem1（标有 * *）。**

我想在 QueryPath - [http://querypath.org](http://querypath.org)中进行。但是 JQuery 语法也可以提供帮助。

```
$root->find('elem1')->last();
$root->find('elem1:last);
$root->find('elem1:last-child); 
```

以上三个都选择了带有¬标记的elem1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:25:08.963

您可以使用`last`方法：

```
$('root > elem1').last(); 
```

通过查看 QueryPath API，您似乎可以编写代码：

```
$root->children('elem1')->last() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:27:49.113

[last()](http://api.jquery.com/last/)方法将匹配元素的集合减少到集合中的最后一个，可以像下面那样为你做；

```
$('root > elem1').last(); 
```

或者

您可以使用[:last-child 选择器](http://api.jquery.com/last-child-selector/)来选择作为其父级最后一个子级的所有元素。

```
$('root elem1:last-child'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T19:37:23.313

这有效

```
$root->find('elem1:last-of-type'); 
```

感谢 David Thomas 的概念证明 [http://jsfiddle.net/davidThomas/RehZ7/](http://jsfiddle.net/davidThomas/RehZ7/)

# arrays - 在循环中声明一个数组

> ID：14914184
> 
> 赞同：0
> 
> 时间：2013-02-16T19:23:42.307
> 
> 标签：arrays, loops, c++-cli, declaration

是否可以在循环内声明数组。由于某些原因，我不能在循环之前声明它，因为它的长度会发生变化。我想知道是否可以在循环中重新声明/删除数组。我正在使用 C++/CLI 语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:22:16.850

原生 c++ 数组，如果它们是在堆栈上分配的，则必须在编译时确定它们的大小，因此如果要使用原生数组，则必须使用`new`运算符分配它们。

**不推荐的解决方案：**

```
int rows = 1000;
int arr[] = new int[rows]; //new array with 1000 integers
int rows = 5;
delete arr; //don't forget to delete the previous allocation before re-sizing
int arr[] = new int[rows]; //new array with 5 integers 
```

然而，这迫使您不断了解分配和取消分配。这就是为什么标准和微软给你`std::vector`和`cli::array`.

**托管方式：**

如果您希望您的阵列位于托管堆上，请使用`cli::array:`

```
cli::array<int> ^arr= gcnew cli::array<int>(1000); //new array with 1000 integers
Array::Resize(arr, 5); //resize arr to 5 integers 
```

**非托管方式：**

如果您希望您的数组位于非托管堆（本机 C++）上，请使用`std::vector`：

```
std::vector<int> arr(1000); //new array with 1000 integers
arr.resize(5); //resize array to 5 integers 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T07:34:58.300

您可以在每次迭代中使用[Array::Resize方法（如 eladidan 所说）；](http://msdn.microsoft.com/en-us/library/bb348051.aspx)或者您可以使用[List<>](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)类，在每次迭代中添加项目，最后调用 List<>::ToArray() 来获取您正在寻找的数组。可能第一种方式会更有效，但第二种方式更方便。

# awk - 如何使用 awk 在文件末尾添加记录数

> ID：14914186
> 
> 赞同：2
> 
> 时间：2013-02-16T19:23:50.100
> 
> 标签：awk

我有如下文件

```
H|ACCT|EXEC|1|TEMP|20130215035845|
849002|48|1208004|1
849007|28|1208004|1
855003|48|1208004|1
855004|28|1208004|1
855006|28|1208004|1
855008|28|1208004|1
855011|28|1208004|1 
```

我想添加记录计数-1（因为第一条记录不是孔记录的一部分）我需要输出如下

```
H|ACCT|XEC|1|TEMP|20130215035845|
849002|48|1208004|1
849007|28|1208004|1
855003|48|1208004|1
855004|28|1208004|1
855006|28|1208004|1
855008|28|1208004|1
855011|28|1208004|1
T|7 
```

我尝试了以下选项`awk 'NF != 0 {++count} END {print count}` 但它没有写在文件末尾，如何计算和添加结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:37:21.820

试试这一行：

```
awk '1;END{print "T|"NR-1}' file 
```

用你的例子：

```
kent$  echo "H|ACCT|EXEC|1|TEMP|20130215035845|
849002|48|1208004|1
849007|28|1208004|1
855003|48|1208004|1
855004|28|1208004|1
855006|28|1208004|1
855008|28|1208004|1
855011|28|1208004|1"| awk '1;END{print "T|"NR-1}'
H|ACCT|EXEC|1|TEMP|20130215035845|
849002|48|1208004|1
849007|28|1208004|1
855003|48|1208004|1
855004|28|1208004|1
855006|28|1208004|1
855008|28|1208004|1
855011|28|1208004|1
T|7 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T19:27:49.680

## 使用内置 NR 变量

您不需要使用显式计数器。您可以使用内置的 NR（记录数）变量。例如：

```
awk 'END { print NR-1 }' /path/to/file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T08:34:16.457

你真的不需要`awk`。您实际上可以使用 coreutils 和一些嵌套来做到这一点。您还可以避免使用临时文件。尝试：

```
echo "T|$(( $(wc -l < file) - 1 ))" >> file 
```

# java - 为什么 Eclipse 调试器看似无缘无故地给出错误“找不到源”？

> ID：14914187
> 
> 赞同：5
> 
> 时间：2013-02-16T19:23:50.663
> 
> 标签：java, eclipse, debugging

当我在 Eclipse 中调试时，经常会发生调试器崩溃，显示错误消息“未找到源”（其下方是带有文本“编辑源查找路径”的按钮）。我以前在网上搜索过这个问题的解释/解决方案，但没有发现对我有帮助。

但是，我现在已经弄清楚我的情况发生了什么：当逐行单步执行代码，然后退出正在运行的代码块时发生错误。我不知道术语，但我猜许多应用程序可能会在某个时候进入“待机模式”，此时没有任何代码正在运行。一个示例是等待鼠标单击的图形应用程序。在 MouseListener 方法中的断点处停止，然后退出它（进入“待机模式”）将在我的情况下导致错误。

我在这个问题的底部提供了一个 MWE。当我在该行放置断点时发生错误

```
System.out.println("You clicked!"); 
```

并使用 F6（“Step Over”）逐行退出该方法。如果我在侦听器的最后一行按 F8（“恢复”）而不是 F6，调试器不会崩溃，一切都很好。

我的问题是：在这种情况下，为什么 Eclipse 会做出如此严重的崩溃？我知道源代码中没有一行可以说程序控件在下面的示例中离开侦听器后“步入”，但是为什么不直接进入“待机模式”而不抱怨呢？我可以以某种方式停用此错误，以防止我的调试会话如此频繁地过早结束吗？或者当后者会导致崩溃时，我是否只需要记住按 F8 而不是 F6？

```
package app;

import java.awt.Dimension;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.JFrame;

public class TestFrame extends JFrame {
    public TestFrame() {
        getContentPane().setPreferredSize(new Dimension(200, 200));
        getContentPane().addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                System.out.println("You clicked!");
            }
        });
        pack();
    }

    public static void main(String[] args) {
        JFrame testFrame = new TestFrame();
        testFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        testFrame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-16T19:34:26.267

Eclipse 不会崩溃。您正在尝试进入一个方法，其中 eclipse 不知道在哪里可以找到源 ( `*.java`) 文件并通知您这一点。以下是如何告诉日食在哪里看。去

`Window`-> `Preferences`-> `Java`-> `Installed JREs`，选择您正在使用的 JRE 并单击`Edit`。

在那里，选择您看到的列表中的所有 jar 文件，然后单击`Source Attachment...`。

在显示的窗口中，选择`src.zip`JDK 文件夹中的 fille （如果您在安装 JDK 时没有取消选中它）。在我现在正在使用的机器上，即

`C:\Program Files\Java\jdk1.7.0_07\src.zip`.

保存所有更改（可能重新启动 eclipse），您将不会再看到该错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-16T19:28:31.000

转到窗口->首选项->java->已安装的jres并删除jre，然后执行“添加”并查找JDK而不是JRE！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-05T10:31:54.640

“找不到源”错误可以通过提供类文件的源来解决，即 .java 文件，以便它可以导航到源文件。否则，您可以使用反编译器直接打开 .class 文件。

> 转到 Eclipse-->Help-->Eclipse MarketPlace -->搜索反编译器并安装它。

现在，问题可以解决了。

# c# - Application.Run() 不带参数

> ID：14914188
> 
> 赞同：0
> 
> 时间：2013-02-16T19:24:00.127
> 
> 标签：c#, winforms

有人在这里问了一个非常相似的问题[C# Application.Run without Form](https://stackoverflow.com/questions/4721962/c-sharp-application-run-without-form)

但检查的答案不适合我。

我想做的是：

```
static void Main()
{
     Application.EnableVisualStyles();
     Application.SetCompatibleTextRenderingDefault(false);
     ObjController objController = new ObjController();
     Application.Run();
     Application.Exit();
} 
```

和

```
class ObjController
{

    Form1 form1 = new Form1();       

    public Form1 showObj()
    {
        form1.Show();
        return new Form1();        
    }
} 
```

但是当关闭表单`Application.Exit()`时`main()`似乎没有执行。为什么 ？我能做什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:35:18.740

您将需要“收听” FormClosed 事件并在那里调用 Application.Exit() ：

```
class ObjController
    {

        Form1 form1 = new Form1();

        public Form1 showObj()
        {
            form1.FormClosed += form1_FormClosed;

            form1.Show();
            return new Form1();

        }

        void form1_FormClosed(object sender, FormClosedEventArgs e)
        {
            Application.Exit();
        }
    } 
```

# postgresql - 单个事务中的多个 SELECT FOR UPDATES 会导致竞争条件（Postgres）吗？

> ID：14914195
> 
> 赞同：1
> 
> 时间：2013-02-16T19:24:17.880
> 
> 标签：postgresql

我正在使用 Postgres 9.1。我想知道在同一个事务中使用多个 SELECT FOR UPDATES 是否可能导致竞争条件。

2个并发事务：

> 事务 1：选择表 1 上的更新 -- 成功获取锁
> 
> 事务 2：选择表 2 上的更新 -- 成功获取锁
> 
> 事务 2：选择表 1 上的更新 -- 等待从事务 1 释放锁
> 
> 事务 1：选择表 2 的更新 -- 等待事务 2 的锁释放

在这种情况下会发生什么？等待的事务之一最终会超时吗？如果是这样，有没有办法配置超时持续时间？

编辑：死锁超时是我正在寻找的配置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:50:47.320

是的，您应该[`deadlock_timeout`在 docs 中](http://www.postgresql.org/docs/current/interactive/runtime-config-locks.html#GUC-DEADLOCK-TIMEOUT)查找。

但是您的情况并不意味着*会出现*死锁，'因为 PostgreSQL 正在使用行级锁，并且不清楚您的事务是否针对相同的行并发。

另一种选择是使用高于[default`READ COMMITTED`](http://www.postgresql.org/docs/current/interactive/transaction-iso.html)的序列化级别。但在这种情况下，您的应用程序应该准备好接收以下异常[`SQLCODE=40001`](http://www.postgresql.org/docs/current/interactive/errcodes-appendix.html)：

```
ERROR:  could not serialize access due to concurrent update 
```

这是意料之中的，您应该按原样重试交易。

[您可以在 wiki 上找到对](http://wiki.postgresql.org/wiki/SSI)Serializable 隔离级别的一个很好的概述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T19:44:26.567

PostgreSQL 将在第 4 步检测到死锁，并使事务失败。这是我尝试时发生的情况`psql`（仅显示第 4 步）：

```
template1=# SELECT * FROM table2 FOR UPDATE;
ERROR:  deadlock detected
DETAIL:  Process 17536 waits for ShareLock on transaction 166946; blocked by process 18880.
Process 18880 waits for ShareLock on transaction 166944; blocked by process 17536.
HINT:  See server log for query details.
template1=# 
```

这发生在 1 秒后，这是默认超时。另一个答案有更多关于此的信息。

# c++ - 对于构造函数，如何在可变参数模板与 std::initializer_list 之间进行选择？

> ID：14914200
> 
> 赞同：11
> 
> 时间：2013-02-16T19:24:54.640
> 
> 标签：c++, templates, c++11, variadic-templates, initializer-list

在 c++11 的当前状态（比如 gcc 4.7.2），我应该如何选择使用*可变参数模板*或`std::initializer_list`当我需要一个可以接受可变参数的构造函数时？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-16T19:29:27.153

可变参数模板允许您提供不同类型的参数，而 an`std::initializer_list`模板使用参数的类型。这意味着列表中所有元素的类型必须相同（或可转换为基础类型，但不允许缩小转换）。根据您是否需要这样做，您可以选择其中一个。

*此外，如果您需要完美转发*，可变参数模板通常是默认选择，因为语法形式`T&&`可以绑定到左值引用和右值引用，而不能对 执行类似的类型推导`initializer_list`：

```
struct A
{
    // Deduces T& for lvalue references, T for rvalue references, and binds to both
    template<typename... Ts>
    A(Ts&&...) { }

    // This is an rvalue reference to an initializer_list. The above type deduction
    // does not apply here
    template<typename T>
    A(initializer_list<T>&&) { }
}; 
```

另请注意，`initializer_list`当您使用统一初始化语法（即花括号）时，默认情况下会调用接受 an 的构造函数，即使存在另一个可行的构造函数。这可能是也可能不是您希望拥有的东西：

```
struct A
{
    A(int i) { }
};

struct B
{
    B(int) { }
    B(std::initializer_list<A>) { }
};

int main()
{
    B b {1}; // Will invoke the constructor accepting initializer_list
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-16T20:39:12.457

使用可变参数模板，参数的数量在编译期间是已知的（并且可以通过 访问`sizeof...`）。使用 a `std::initializer_list`，参数的数量仅在运行时才知道。因此，部分决定取决于您何时需要或想知道您有多少参数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-16T19:38:11.800

我建议*始终*选择可变参数模板并`std::initializer_list`尽可能避免。

这就是我`std::vector`用 C++11 实现的方式：

```
#include <iostream>
#include <vector>

struct exp_sequence {
  template <typename... T>
  exp_sequence(T&&...) {}
};

struct from_arglist_t {} from_arglist;

template <typename T>
class my_vector {
  std::vector<T> data;

public:
  my_vector(int n, T const& e) : data(n, e) {}

  template <typename... Args>
  my_vector(from_arglist_t, Args&&... args) {
    data.reserve(sizeof...(Args));
    exp_sequence{(data.push_back(std::forward<Args>(args)),1)...};
  }

  std::size_t size() { return data.size(); }
};

int main()
{
  std::vector<int> v1{13, 13}; std::cout << v1.size() << '\n'; // 2
  std::vector<int> v2(13, 13); std::cout << v2.size() << '\n'; // 13

  my_vector<int> v3{13, 13}; std::cout << v3.size() << '\n'; // 13
  my_vector<int> v4(13, 13); std::cout << v4.size() << '\n'; // 13
  my_vector<int> v5(from_arglist, 13, 13); std::cout << v5.size() << '\n'; // 2
  my_vector<int> v6{from_arglist, 13, 13}; std::cout << v6.size() << '\n'; // 2
} 
```

原因如 中所示`main`，`initializer_list`在通用代码中使用可能会导致不同的行为，具体取决于选择的括号类型。还可以通过添加这样的构造函数来静默更改代码。

另一个原因是只移动类型：

```
//std::vector<move_only> m1{move_only{}}; // won't compile
my_vector<move_only> m2{from_arglist, move_only{}}; // works fine 
```

# sql-server - 计算从 SQL Server 检索到的记录

> ID：14914206
> 
> 赞同：-2
> 
> 时间：2013-02-16T19:25:33.360
> 
> 标签：sql-server, count, records

我只是想问一下我是否能够根据我将从数据库中检索的内容创建一个动态编号列？

前任。

```
Table Reservations
|ReservationNo----ClientNo------DateAdded----DateModified|
|1             |    1        |   01-01-01  |  01-01-01 |  
|2             |    2        |   01-01-01  |  01-01-01 | 
|3             |    2        |   01-01-01  | 01-01-01  | 
|4             |    2        |   01-01-01  | 01-01-01  | 
|5             |    1        |   01-01-01  | 01-01-01  | 
|6             |    3        |   01-01-01  | 01-01-01  |              
|7             |    3        |   01-01-01  | 01-01-01  | 
|8             |    2        |   01-01-01  | 01-01-01  | 
|9             |    1        |   01-01-01  | 01-01-01  | 
|10            |    1        |   01-01-01  | 01-01-01  | 
```

当我执行下面的语句时......

```
SELECT * FROM Table WHERE ClientNo = '1' 
```

结果 ：

```
**Counter**-----ReservationNo----Client--------DateAdded----DateModified|
|1       |      1          |    1        |   01-01-01  |  01-01-01 |  
|2       |      5          |    1        |   01-01-01  | 01-01-01  | 
|3       |      9          |    1        |   01-01-01  | 01-01-01  | 
|4       |      10         |    1        |   01-01-01  | 01-01-01  | 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:28:45.233

您可以使用以下[`row_number()`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)功能：

```
select  row_number() over (order by ReservationNo) as Counter
,       *
from    YourTable
order by 
        ReservationNo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T19:30:55.827

看起来您正在搜索 ROW_NUMBER 函数，请参阅[http://msdn.microsoft.com/de-de/library/ms186734.aspx](http://msdn.microsoft.com/de-de/library/ms186734.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T19:47:37.117

似乎您需要使用每个条件/查询获取的表中可用行的总数。如果是这种情况 COUNT(*) OVER() 将满足您的要求。

SELECT ReservationNo ,ClientNo ,DateAdded ,DateModified ,COUNT(*) OVER() FROM Reservations WHERE 条件（如果需要）

# maven - 在同一个 maven-web 项目中使用 Mysql 和 Neo4j 时没有插入任何内容

> ID：14914207
> 
> 赞同：1
> 
> 时间：2013-02-16T19:25:44.363
> 
> 标签：maven, neo4j, spring-data-jpa, spring-data-neo4j

我们正在开发一个 maven-web 项目。在这个项目中使用了两个数据库，MySQL 和 Neo4j。项目在 MySQL 上运行良好（没有 Neo4j）。添加 Neo4j 配置文件（neo4j-config.xml）项目构建后没有任何错误，插入操作到 Mysql 成功返回，但实际上没有插入到表中。通过对这个问题的一些研究发现了关于“跨店操作”的信息：

带有跨存储的 XML 配置

```
<context:annotation-config/>

<bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
        id="entityManagerFactory">
    <property name="dataSource" ref="dataSource"/>
    <property name="persistenceXmlLocation" value="classpath:META-INF/persistence.xml"/>
</bean>

<datagraph:config graphDatabaseService="graphDatabaseService"
        entityManagerFactory="entityManagerFactory"/>

<bean id="graphDatabaseService"
        class="org.springframework.data.neo4j.rest.SpringRestGraphDatabase">
      <constructor-arg index="0" value="http://localhost:7474/db/data" />
    </bean> 
```

我们的项目 db-context.xml

```
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

 <bean id="jpaVendorAdapter"
    class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
    <property name="showSql" value="true" />
    <property name="database" value="MYSQL" />
</bean>

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="persistenceUnitName" value="persistenceUnit" />
    <property name="jpaVendorAdapter" ref="jpaVendorAdapter" />
</bean> 
```

我们的项目 neo4j-context.xml

```
<neo4j:config graphDatabaseService="graphDatabaseService" />

<bean id="graphDatabaseService"
    class="org.springframework.data.neo4j.rest.SpringRestGraphDatabase">
  <constructor-arg index="0" value="http://localhost:7474/db/data" />
</bean> 
```

将 entityManagerFactory="entityManagerFactory" 添加到我们的 neo4j-config.xml 文件后，在运行 maven 项目时出现如下错误：

> *原因：org.springframework.beans.factory.BeanCreationException：创建名称为“org.springframework.data.neo4j.config.Neo4jConfiguration#0”的bean时出错：设置属性值时出错；嵌套异常是 org.springframework.beans.NotWritableProp ertyException：bean 类 [org.springframework.data.neo4j.config.Neo4jConfiguration$$EnhancerByCGLIB$$5a2edf0] 的无效属性“entityManagerFactory”：Bean 属性“entityManagerFactory”不可写或具有无效的 setter 方法。setter 的参数类型是否与 getter 的返回类型匹配？*

如果我们使用 datagraph 标签而不是 neo4j 标签，我会收到如下错误

> *违规资源：ServletContext资源[/WEB-INF/spring-servlet.xml]；嵌套异常是 org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException：来自 ServletContext 资源 [/WEB-INF/neo4j-config.xml] 的 XML 文档中的第 32 行有效；嵌套异常是 org.xml.sax.SAXParseException；systemId： [http](http://www.springframework.org/schema/data/graph/datagraph-1.0.xsd) ://www.springframework.org/schema/data/graph/datagraph-1.0.xsd ；行号：32；列号：51；src-resolve：无法将名称“存储库：存储库”解析为（n）“类型定义”组件。*

我们的问题是，虽然在调试模式下插入操作行返回成功，但在将neo4j配置文件添加到我们的项目后，它并没有向表中添加新记录。我们不明白为什么只添加 neo4j-config.xml 文件会出现这种情况。第二个困惑是为什么添加“entityManagerFactory”不能解决这个问题。

除了 spring-data example (myrestaurants-social) 之外，我们在 maven-web 项目中找不到 Neo4j 与 MySQL 一起使用的任何示例。

提前感谢您所有宝贵的回复。

# ios - 无法停止动画

> ID：14914211
> 
> 赞同：1
> 
> 时间：2013-02-16T19:26:01.380
> 
> 标签：ios, animation, blink

我正在使用以下代码使标签中的文本闪烁：

```
- (void)blinkAnimation:(NSString *)animationID finished:(BOOL)finished target:(UILabel *) target {

   NSString *selectedSpeed = [[NSUserDefaults standardUserDefaults] stringForKey:@"EffectSpeed"];
float speedFloat = (0.50 - [selectedSpeed floatValue]);

   [UIView beginAnimations:animationID context:(__bridge void *)(target)];
   [UIView setAnimationDuration:speedFloat];
   [UIView setAnimationDelegate:self];
   [UIView setAnimationDidStopSelector:@selector(blinkAnimation:finished:target:)];

   if([target alpha] == 1.0f)
       [target setAlpha:0.0f];
  else
       [target setAlpha:1.0f];

   [UIView commitAnimations];
} 
```

我正在使用以下代码制作动画 Stop ：

```
- (void) stopAnimation{

   [self.gameStatus.layer removeAllAnimations];
} 
```

虽然动画效果很好，但我无法阻止它。

能否请你帮忙！

提前致谢....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T21:01:43.120

问题是您`animationDidStopSelector`在手动停止动画时被调用，但该方法只是开始另一个动画。所以你可以停止它，但你会立即启动另一个动画。

就个人而言，我建议摆脱`animationDidStopSelector`并使用动画的自动反转和重复功能：

```
[UIView beginAnimations:animationID context:nil];
[UIView setAnimationDuration:speedFloat];
[UIView setAnimationDelegate:self];
[UIView setAnimationRepeatAutoreverses:YES];
[UIView setAnimationRepeatCount:CGFLOAT_MAX];
[target setAlpha:0.0f];
[UIView commitAnimations]; 
```

那应该可以解决它，但是正如holex所说，您应该使用块动画。我从文档中引用：“`beginAnimations`在 iOS 4.0 及更高版本中不鼓励使用此方法 []。您应该使用基于块的动画方法来指定您的动画。”

因此，等效的块动画将是：

```
[UIView animateWithDuration:1.0
                      delay:0.0
                    options:UIViewAnimationOptionAutoreverse | UIViewAnimationOptionRepeat
                 animations:^{
                     self.gameStatus.alpha = 0.0;
                 }
                 completion:nil]; 
```

无论您使用哪种技术，您`removeAllAnimations`现在都将按预期工作。

顺便说一句，当您停止动画时，它会`alpha`立即设置为零。停止重复动画然后将动画`alpha`从当前值设置为您想要的最终值可能会更优雅。为此，您需要`opacity`从表示层获取电流，然后将其动画`alpha`到您希望它停止的任何位置（在我的示例中为 1.0，但您也可以使用 0.0）：

```
CALayer *layer = self.gameStatus.layer.presentationLayer;
CGFloat currentOpacity = layer.opacity;

[self.gameStatus.layer removeAllAnimations];

self.gameStatus.alpha = currentOpacity;
[UIView animateWithDuration:0.25
                 animations:^{
                     self.gameStatus.alpha = 1.0;
                 }]; 
```

# angularjs - 在 AngularJS 中编写指令时，我如何决定是否需要新的作用域、新的子作用域或新的隔离作用域？

> ID：14914213
> 
> 赞同：265
> 
> 时间：2013-02-16T19:26:04.707
> 
> 标签：angularjs, angularjs-directive, angularjs-scope

我正在寻找一些指导方针，可以用来帮助确定在编写新指令时使用哪种类型的范围。理想情况下，我想要类似于流程图的东西，它引导我完成一堆问题并弹出正确的答案——没有新的新范围、新的子范围或新的隔离范围——但这可能要求太多了。这是我目前的一套微不足道的指导方针：

*   如果将使用指令的元素使用 ng-model，请不要使用隔离范围
    请参阅[我可以将 ng-model 与隔离范围一起使用吗？](https://stackoverflow.com/questions/11896732/ngmodel-and-component-with-isolated-scope)以及
    [为什么格式化程序不适用于隔离范围？](https://stackoverflow.com/questions/14495882/why-formatters-does-not-work-with-isolated-scope)
*   如果指令不修改任何范围/模型属性，请不要创建新范围
*   [如果指令封装了一组 DOM 元素（文档](http://docs.angularjs.org/guide/directive)说“复杂的 DOM 结构”）并且指令将用作元素，或者在同一元素上没有其他指令，则隔离范围似乎工作得很好。

我知道在元素上使用具有隔离范围的指令会强制同一元素上的所有其他指令使用相同的（一个）隔离范围，所以这不会严重限制何时可以使用隔离范围吗？

我希望 Angular-UI 团队中的一些人（或其他编写过许多指令的人）可以分享他们的经验。

请不要添加简单地说“为可重用组件使用隔离范围”的答案。

* * *

## 回答 #1

> 赞同：291
> 
> 时间：2013-02-16T20:31:03.017

多么棒的问题啊！我很想*听听*其他人的意见，但这里是我使用的指导方针。

高空前提：作用域作为我们用来在父控制器、指令和指令模板之间进行通信的“胶水”。

**Parent Scope:** `scope: false`，所以根本没有新的范围

我不经常使用它，但正如@MarkRajcok 所说，如果指令不访问任何范围变量（并且显然没有设置任何变量！）那么就我而言这很好。*这对于仅*在父指令的上下文中使用并且没有模板的子指令也很有帮助（尽管总是有例外）。基本上，任何带有模板的东西都不属于共享范围，因为您天生就暴露了该范围以进行访问和操作（但我确信这条规则有例外）。

例如，我最近创建了一个指令，该指令使用我正在编写的 SVG 库绘制（静态）矢量图形。它`$observe`是两个属性（`width`和`height`）并在计算中使用它们，但它既不设置也不读取任何范围变量，也没有模板。这是不创建另一个范围的好用例；我们不需要，那何必呢？

但是，在另一个 SVG 指令中，我需要使用一组数据，并且还必须存储一点点状态。在这种情况下，使用父作用域是不负责任的（同样，一般来说）。所以与其...

**子范围：** `scope: true`

具有子作用域的指令是上下文感知的，旨在与当前作用域交互。

显然，与隔离范围相比，它的一个关键优势是用户可以自由地对他们想要的任何属性使用插值；例如，`class="item-type-{{item.type}}"`在具有隔离范围的指令上使用默认情况下将不起作用，但在具有子范围的指令上可以正常工作，因为默认情况下仍然可以在父范围中找到内插的任何内容。此外，指令本身可以在其自身范围的上下文中安全地评估属性和表达式，而不必担心对父级的污染或损坏。

例如，工具提示是刚刚添加的东西；隔离范围不起作用（默认情况下，见下文），因为预计我们将在此处使用其他指令或插值属性。工具提示只是一个增强。但是工具提示还需要在范围上设置一些东西以与子指令和/或模板一起使用，并且显然是为了管理自己的状态，因此使用父范围确实很糟糕。我们要么污染它，要么破坏它，布埃诺也不是。

我发现自己使用子范围比隔离或父范围更频繁。

**隔离范围：** `scope: {}`

这适用于可重用组件。:-)

但说真的，我认为“可重用组件”是“独立组件”。意图是它们将用于特定目的，因此将它们与其他指令组合或向 DOM 节点添加其他插值属性本质上是没有意义的。

更具体地说，这个独立功能所需的任何东西都是通过在父范围的上下文中评估的指定属性提供的；它们可以是单向字符串 ('@')、单向表达式 ('&') 或双向变量绑定 ('=')。

在自包含组件上，需要对其应用其他指令或属性是没有意义的，因为它本身就存在。它的样式由它自己的模板管理（如果需要），并且可以嵌入适当的内容（如果需要）。它是独立的，所以我们把它放在一个隔离作用域中也是为了说：“别搞砸了。我通过这几个属性给你一个定义好的 API。”

一个好的最佳实践是从指令链接和控制器函数中排除尽可能多的基于模板的东西。这提供了另一个“类似 API”的配置点：指令的用户可以简单地替换模板！功能都保持不变，它的内部 API 从未被触及，但我们可以尽可能多地处理样式和 DOM 实现。ui/bootstrap 是一个*很好的*例子，因为 Peter & Pawel 很棒。

隔离范围也非常适合与嵌入一起使用。取标签；它们不仅是整个功能，而且其中的任何内容都可以在父范围内自由评估，同时让选项卡（和窗格）做任何他们想做的事情*。*选项卡显然有自己的*状态*，它属于范围（与模板交互），但该状态与使用它的上下文无关 - 它完全是使选项卡指令成为选项卡指令的内部因素。此外，将任何其他指令与选项卡一起使用没有多大意义。它们是标签——我们已经有了这个功能！

用更多功能包围它或嵌入更多功能，但指令就是它已经是什么。

综上所述，我应该注意到，正如@ProLoser 在他的回答中暗示的那样，有一些方法可以绕过隔离范围的一些限制（即功能）。例如，在子范围部分，我提到了在使用隔离范围（默认情况下）时非指令属性中断的插值。但是，例如，用户可以简单地使用`class="item-type-{{$parent.item.type}}"`它，它会再次工作。因此，如果有令人信服的理由在子范围上使用隔离范围，但您担心其中的一些限制，请知道如果需要，您几乎可以解决所有这些限制。

**概括**

没有新范围的指令是只读的；他们是完全受信任的（即应用程序内部的），而且他们不会碰千斤顶。具有子范围的指令*添加*功能，但它们不是*唯一的*功能。最后，隔离范围适用于作为整个目标的指令；他们是独立的，所以让他们流氓是可以的（也是最“正确的”）。

我想表达我最初的想法，但是当我想到更多事情时，我会更新这个。但是神圣的废话 - 这是一个很长的答案......

* * *

PS：完全切线，但由于我们在谈论范围，我更喜欢说“原型”，而其他人更喜欢“原型”，这似乎更准确，但只是不太好说。:-)

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2013-02-17T01:56:11.917

# 我的个人政策和经验：

## 隔离：*私人沙箱*

我想创建很多范围方法和变量，这些方法和变量仅由我的指令使用，用户永远不会看到或直接访问。我想将我可以使用的范围数据列入白名单。**我可以使用嵌入来允许用户跳回父范围（不受影响）**。我**不**希望我的变量和方法在嵌入的孩子中可以访问。

## 子*项：内容的一个小节*

我想创建用户可以访问的范围方法和变量**，**但与我的指令上下文之外的周围范围（兄弟姐妹和父母）无关。我还想让所有父范围数据透明地向下流动。

## 无：*简单的只读指令*

我真的不需要弄乱范围方法或变量。我可能正在做一些与范围无关的事情（例如显示简单的 jQuery 插件、验证等）。

# 笔记

*   你不应该让 ngModel 或其他东西直接影响你的决定。`ng-model=$parent.myVal`您可以通过执行(child) 或`ngModel: '='`(isolate)之类的操作来规避奇怪的行为。
*   **Isolate** + **transclude**会将所有正常行为恢复到兄弟指令并返回父范围，因此也不要让这影响您的判断。
*   不要在**none**上混淆范围，因为这就像将数据放在 DOM 的下半部分而不是上半部分的范围上，这使得 0 有意义。
*   注意指令优先级（没有具体的例子说明这会如何影响事情）
*   注入服务或使用控制器在具有任何作用域类型的指令之间进行通信。您也可以`require: '^ngModel'`查看父元素。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-02-16T19:43:53.523

在写了很多指令之后，我决定使用更少的`isolated`范围。尽管它很酷并且您封装了数据并确保不会将数据泄漏到父范围，但它严重限制了您可以一起使用的指令数量。所以，

如果您要编写的指令将**完全**独立运行并且您不打算与其他指令共享它，请选择*隔离范围*。（就像一个组件，您可以将其插入，最终开发人员没有太多自定义）（当您尝试编写其中包含指令的子元素时，它会变得非常棘手）

如果您要编写的指令*只是*进行 dom 操作，不需要范围的内部状态或显式范围更改（主要是非常简单的事情）；没有*新的范围*。（例如`ngShow`, `ngMouseHover`, `ngClick`, `ngRepeat`）

如果您要编写的指令需要更改父作用域中的某些元素，但还需要处理一些内部状态，请选择*新的子作用域*。（如`ngController`）

请务必查看指令的源代码：[https](https://github.com/angular/angular.js/tree/master/src/ng/directive)
://github.com/angular/angular.js/tree/master/src/ng/directive 它对如何思考它们有很大帮助

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-03-27T23:03:02.203

只是想我会添加我目前的理解以及它与其他 JS 概念的关系。

**默认（例如未声明或范围：false）**

这在哲学上等同于使用全局变量。您的指令可以访问父控制器中的所有内容，但它也会影响它们并同时受到影响。

**范围：{}**

这就像一个模块，它想要使用的任何东西都需要显式传入。如果您使用的每个指令都是一个隔离作用域，则它可以等效于使每个 JS 文件都编写自己的模块，并且在注入所有依赖项时会产生大量开销。

**范围：儿童**

这是全局变量和显式传递之间的中间地带。它类似于 javascript 的原型链，只是扩展了父范围的副本。如果您创建一个隔离作用域并传入父作用域的每个属性和功能，它在功能上与此等效。

* * *

关键是任何指令都可以用任何方式编写。不同的范围声明只是为了帮助您组织。您可以将所有内容都设为模块，或者您可以只使用所有全局变量并非常小心。为了便于维护，尽管最好将您的逻辑模块化为逻辑连贯的部分。在开放的草地和封闭的监狱之间有一个平衡。**我认为这很棘手的原因是，当人们了解这一点时，他们认为他们正在学习指令如何工作，但实际上他们正在学习代码/逻辑组织。**

帮助我弄清楚指令如何工作的另一件事是了解 ngInclude。ngInclude 帮助您包含 html 部分。当我第一次开始使用指令时，我发现你可以使用它的模板选项来减少你的代码，但我并没有真正附加任何逻辑。

当然，在 angular 的指令和[angular-ui](http://angular-ui.github.io/)团队的工作之间，我还没有创建自己的指令来做任何实质性的事情，所以我对此的看法可能是完全错误的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-08T19:54:42.293

我同意乌穆尔。从理论上讲，孤立的作用域听起来很棒并且“可移植”，但是在构建我的应用程序以涉及非平凡的功能时，我遇到了需要合并几个指令（一些嵌套在其他指令中或向它们添加属性），以便完全写入我的自己的 HTML，这是域特定语言的目的。

最后，在指令的每个 DOM 调用上必须将具有多个属性的每个全局或共享值沿链向​​下传递，这太奇怪了（正如隔离范围所要求的那样）。在 DOM 中重复编写所有内容看起来很愚蠢，并且感觉效率低下，即使这些是共享对象。它还不必要地使指令声明复杂化。使用 $parent 来“向上”并从指令 HTML 中获取值的解决方法似乎是非常糟糕的形式。

我也最终将我的应用程序更改为主要具有很少隔离的子范围指令——只有那些不需要从父级访问任何东西的指令，而不是它们可以通过简单、非重复属性传递的指令。

几十年来一直梦想着领域特定语言的梦想，在这样的事情出现之前，我很高兴 AngularJS 提供了这个选项，我知道，随着越来越多的开发人员在这个领域工作，我们将看到一些非常酷的应用程序他们的架构师也很容易编写、扩展和调试。

-- D

# ios - iOS 6 CollectionView 动态改变布局

> ID：14914217
> 
> 赞同：1
> 
> 时间：2013-02-16T19:26:38.797
> 
> 标签：ios, objective-c, ios6, uicollectionview, flowlayout

我是一个新手，`UICollectionView`我正在从事一个动态改变 `UICollectionViewLayout`给定动作的项目。

我的 CollectionView 有 6 个部分，每个部分有 10 个元素。这些单元格基本上是一个`UIImageView`，我的自定义布局称为`StackViewLayout`堆栈每个部分的所有元素（类似于 Apple 的 Photos.app）。

如果用户选择堆栈的元素（对于所有部分），则`UICollectionView`动态将布局更改为`UICollectionViewFlowLayout`，因此所有元素都可以视为网格。

我的问题是当用户选择一个堆栈时，无论哪个部分，当布局更改做流布局时，所有部分都显示在网格中，而不是显示所选部分（堆栈）的元素，这是我的行为通缉。

有没有办法只显示自定义布局中选定部分的流布局？

这是我的控制器实现代码段：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self loadStackLayout]; // stack all sections at first load.
}

#pragma mark - UICollectionView Data Source Methods

- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
{
    return 6;
}

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
{
    return 10;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath;
{
    // custom UICollectionViewCell, which will hold an image.
    CVCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"MyCell" forIndexPath:indexPath];        
    cell.imageView.image = _images[indexPath.row];
    return cell;
}

- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath
{
    // element size.
    return CGSizeMake(100,100);
}

-(void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{
    if (isStacked)
    {
         [self loadFlowLayout]; //HERE I WANT TO LOAD FLOW LAYOUT ONLY FOR THE SECTION OF THE SELECTED ITEM!
    } else
       {
           // to implement.
       }
}

// HERE IS THE METHOD THAT CALLS MY CUSTOM LAYOUT IN ORDER TO STACK THE ELEMENTS FOR EACH SECTION IN COLLECTION VIEW. IT IS WORKING AS IT SHOULD.
-(void)loadStackLayout
{
    if (([self.collectionView.collectionViewLayout isKindOfClass:[UICollectionViewFlowLayout class]]))
    {
        isStacked = YES;
        [self.collectionView setCollectionViewLayout:[[StackViewLayout alloc] init] animated:YES];
    }
}

// HERE IS THE METHOD THAT CALLS MY FLOWLAYOUT IN ORDER TO UN-STACK THE ELEMENTS AND SHOW THEM IN A GRID. CURRENTLY IT IS SHOWING ALL SECTIONS IN THE GRID.
-(void)loadFlowLayout
{
    if (([self.collectionView.collectionViewLayout isKindOfClass:[StackViewLayout class]]))
    {
        isStacked = NO;
        [self.collectionView setCollectionViewLayout:[[UICollectionViewFlowLayout alloc] init] animated:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:23:59.383

我认为您可能可以通过在 numberOfItemsInSection: 方法中使用 if 子句来为任何不是选定部分的部分返回 0。显然，您需要跟踪所选部分才能执行此操作。

# javascript - Javascript - 设置这个值

> ID：14914218
> 
> 赞同：0
> 
> 时间：2013-02-16T19:26:46.607
> 
> 标签：javascript

如何`this`在 Javascript 中设置 的值？
例如：

```
var obj = {
    a: 'b',
    c: "d",
    e: function() {
        this = {
            one: 1,
            two: 2
        };
    }
}; 
```

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:28:50.750

您不能`this`像您要求的那样在 javascript 中显式分配值。

一旦函数开始执行，该函数`this`内部的值就不会改变（尽管嵌入式函数可以有自己的值`this`）。

您可以将属性分配给`this`这样的，所以也许这就是您想要的：

```
this.one = 1;
this.two = 2; 
```

* * *

相反，`this`它由函数的调用者控制，函数的调用方式决定了`this`函数内部的设置。例如：

```
obj.e() 
```

将`this`inside of的值设置`e()`为`obj`。

* * *

您还可以使用`.apply()`and`.call()`将值`this`设置为包含对象以外的其他值。

例如，按照您的要求执行此代码：

```
var test = {one:1, two:2};
var obj = { a:'b', c:"d", e:function(){
    // this will be set to the test object in here when called as below
}};

obj.e.call(test); 
```

将导致`this`此特定调用内部的值`e()`设置为您请求的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:29:04.113

```
var obj = { a:'b', c:"d", e:function(){
  // Here, this.one === 1 and this.two === 2
}.bind({ one: 1, two : 2})}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T19:33:27.187

'this' 是一个保留关键字，不能在函数体内设置。

您可以调用具有特定值的函数 this using`apply`或`call`函数上的方法。`obj.e.call({one: 1, two: 2})`. 查找有关这两个 Function 方法的 MDN 文章。

您还可以使用 ECMAScript 5 的`bind`方法来永久设置`this`每次调用函数时的值。这是一种 ECMAScript 5 方法，因此在旧浏览器中不起作用，但是您可以使用一些 polyfill 来为旧浏览器添加对它的支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T19:34:01.443

这个怎么样？

```
this.one=1;
this.two=2; 
```

# simulink - 如何在 simulink 中激发低通滤波器？

> ID：14914219
> 
> 赞同：2
> 
> 时间：2013-02-16T19:26:56.837
> 
> 标签：simulink

我应该刺激低通滤波器如何与 simulink 完全配合，所以我创建了一个信号发生器 f=50 hz，然后我制作了一个 lowerfilter，然后我想看到它，所以我发现它的唯一工具是频谱分析仪，但是当我模拟我时得到两个错误对不起，如果它没有真正解释，因为我是 simulink 的初学者 ![在此处输入图像描述](../Images/7583a997a8858b45acb06383210ec12a.png)

![在此处输入图像描述](../Images/bfc98c2ca3a7b7fc8c709d112d8f02a3.png)

![在此处输入图像描述](../Images/88be88982239502ca0a0af31ce0724bf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:34:51.477

馈入 Spectrum Scope 模块的信号需要是离散时间信号，而不是连续时间信号。您可以通过在每个 Spectrum Scope 之前添加一个[Zero-Order Hold](http://www.mathworks.com/help/simulink/slref/zeroorderhold.html)模块来完成此操作，在 Zero-Order Hold 模块的对话框参数中设置所需的离散采样时间。

作为提醒，您可能还需要缓冲信号（频谱是根据数据的“帧”计算的，您可以在此处阅读：[创建基于帧的信号](http://www.mathworks.com/help/dsp/ug/create-frame-based-signals.html)）。为此，您可以在您的 Zero-Order Hold 和 Spectrum Scope 之间使用一个[Buffer](http://www.mathworks.com/help/dsp/ref/buffer.html)模块，或者在 Spectrum Scope 对话框参数中选择“Buffer Input”。

# documentation - 如何找出导致生成的 Sandcastle 文档存在差异的原因？

> ID：14914222
> 
> 赞同：48
> 
> 时间：2013-02-16T19:27:04.513
> 
> 标签：documentation, sandcastle, finalize, shfb

[在 Noda Time 中，我们使用 Sandcastle 和SHFB](http://shfb.codeplex.com/)生成我们的文档。然后，我们将文档提交回源存储库 - 主要是因为这样可以轻松查看最新（和历史）文档。

我是该项目的主要开发人员，但我使用两台计算机 - 不幸的是，目前他们正在构建不同的文档，即使它们都更新到相同的源。

这两台计算机在我能想到的所有重要方面都是相同的：

*   沙堡 2.7.2.0
*   SHFB 1.9.6.0
*   VS 2012 Professional（在“程序”中都报告了版本 11.0.50727.1，在“关于”页面中都报告了“版本 11.0.51106.01 更新 1”）
*   .NET Framework 4.5 本地帮助内容的最新版本（其他框架版本没有本地帮助内容）

为确保构建干净而采取的步骤：

*   删除了 SHFB 缓存文件夹 ( `C:\Users\Jon\AppData\Local\EWSoftware\Sandcastle Help File Builder\Cache`)
*   删除了生成文档的文件夹
*   删除了与 SHFB 工程文件相关的用户设置文件
*   删除了 Visual Studio 中的符号缓存

仍然存在差异。它们似乎仅限于从 MSDN 本身继承的文档，尤其是[`Object.Finalize`](http://msdn2.microsoft.com/en-us/library/4k87zsw7).

版本 1（在机器“Chubby”上生成）：

```
<div class="summary">Allows an object to try to free resources and perform
other cleanup operations before it is reclaimed by garbage collection.</div> 
```

版本 2（在机器“Sandy”上生成）：

```
<div class="summary">Allows an <a 
   href="http://msdn2.microsoft.com/en-us/library/e5kfa45b" target="_blank">
   Object</a> to attempt to free resources and perform other cleanup operations
   before the <a href="http://msdn2.microsoft.com/en-us/library/e5kfa45b" 
   target="_blank">Object</a> is reclaimed by garbage collection.</div> 
```

两者都链接到相同的 MSDN 文档，该文档看起来像第 1 版（没有指向 的链接`Object`）。

查看一些更改的文件，更改是一致的并且仅限于此成员。

Sandcastle 可能从哪里获得此文档，我怎样才能让两台计算机以相同的方式运行？

编辑：还有一个信息片段 - 在两台机器上清理缓存并重建文档后，SHFB 缓存目录中有三个文件：

*   Reflection.cache 在两台机器上的大小相同
*   MsdnUrl.cache 在两台机器上的大小相同
*   .NETFramework_4.0.0319_E8879A28.cache 在 Chubby 上的大小为 13,377,733 字节，在 Sandy 上为 13,337,949 字节

编辑：重大进展！我发现差异可能来自哪里......

文件`c:\Windows\Microsoft.NET\Framework\v2.0.50727\en\mscorlib.xml`：

*   在 Chubby 上是 8,005,263 字节，日期为 2011 年 12 月 12 日，非链接文本为`Finalize`
*   在 Sandy 上是 9,740,370 字节，日期为 2009 年 8 月 31 日，`Finalize`其中包含链接的文本

在两台机器上，`mscorlib.dll`其本身大小相同（4,550,656 字节），修改日期为 2012 年 9 月 13 日。

但是我怎样才能让它们相同呢？这种差异从何而来？（服务包？）

编辑：好的，版本`c:\Windows`是红鲱鱼 - 这是`c:\Program Files (x86)\Reference Assemblies\Microsoft\Framework`应该受到指责的版本。我要看看我是否能找出为什么安装之间可能会有所不同......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T11:54:28.240

考虑到您最近的编辑，有几个想法，尽管我同意这有点在黑暗中拍摄...

我会使用“Beyond Compare”之类的工具来比较两台机器上的 .Net Framework 文件和 XML 文件（“文件夹比较”配置文件）。支持二进制级别的比较以完全确定......如果您的两台机器都是本地的，它应该非常快。

您还可以尝试在两台机器上运行 Mark Russinovich 的进程监视器 ( [http://live.sysinternals.com/procmon.exe](http://live.sysinternals.com/procmon.exe) ) 并运行文档构建过程。这样，您将看到哪些文件正在被读取并参与帮助文件构建过程，以及它们来自何处……您将获得大量输出，因为它会显示系统中发生的所有事情；您可能希望禁用注册表和网络监控，只保留文件监控，并排除与文档构建过程无关的任何过程。

我不是帮助生成专家，但我认为文本来自 XML 文件，因此您可能还希望将过滤器也只显示 xml 文件。

如果您可以识别所涉及的文件，那么您可能只需将它们从一台机器复制到另一台机器。

# java - GlassFish V3 Cluster + TimesTen 奇怪的行为

> ID：14914223
> 
> 赞同：1
> 
> 时间：2013-02-16T19:27:05.087
> 
> 标签：java, glassfish-3, timesten

GlassFish V3 + TimesTen 有一个非常奇怪的问题。我的配置是：

1.  GlassFish Server 开源版 3.1.2.2（内部版本 5）
2.  TimesTen 发布 11.2.2.2.0
3.  Java(TM) SE 运行时环境（内部版本 1.6.0_31-b04） Java HotSpot(TM) 64 位服务器 VM（内部版本 20.6-b01，混合模式）。
4.  Linux 2.6.32-131.0.15.el6.x86_64
5.  两台机器具有相同的硬件（第二台服务器是第一台的克隆）。

GlassFish、TimesTen、Java 和 Linux 在两台服务器上都是相同的。

我在服务器一上有 GlassFish DAS。使用一个实例（在本地主机上）成功创建节点代理，部署我的应用程序，它与 TimesTen 数据库通信，在 GlassFish 中配置 JVM 选项，我的应用程序运行完美。我已经用 Soap UI 对其进行了测试，并得到了正确的响应。

但是当我在远程服务器 2 上创建节点 + 实例时，应用程序将无法在这台机器上运行。glassfish 实例的配置是相同的，因为实例在同一个集群中。

我在 server.log 中有这些错误：

> *无法分配连接，因为：加载本机库/缺少方法时出现问题：/opt/TimesTen/tt1122/lib/libttJdbc.so：libtten.so：无法打开共享对象文件：没有这样的文件或目录*

两个文件的权限：

```
-rwxr-x---. 1 esb esb 444K Dec 23  2011 /opt/TimesTen/tt1122/lib/libttJdbc.so 

-rwxrwxrwx. 1 esb esb 18M Apr 10  2012 /opt/TimesTen/tt1122/lib/libtten.so 
```

环境。两台机器上的变量 LD_LIBRARY_PATH 相同：

```
LD_LIBRARY_PATH=/opt/TimesTen/tt1122/lib 
```

实例根文件夹中的库在两台服务器上是相同的。我会尝试添加 JVM 选项：

```
-Djava.library.path=/opt/TimesTen/tt1122/lib 
```

但它没有效果，server.log中的错误是一样的。我还能如何解决这个问题？

PS：刚才试过这个：在第二台机器上安装相同的 glassfish，在 domain1/libs 目录中复制库，在服务器上配置 JDBC 资源，部署我的应用程序，它的工作完美！但它不适用于集群配置......

PPS：在 glassfish v 2.1.1 上一切正常。我在具有相同应用程序的 4 台服务器上有 7 个实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:35:37.010

好的，我发现了。像这样编写简单的脚本：

`export LD_LIBRARY_PATH="/opt/TimesTen/tt1122/lib" /glassfish3/glassfish/bin/asadmin start-local-instance --user admin --passwordfile /glassfish3/passwd --node YOURNODE --sync normal YOURINSTANCE`

然后使用此脚本启动实例。然后我的应用程序工作正常:)

# java - Facebook :: 在自动化测试中为测试 facebook 用户更新令牌

> ID：14914225
> 
> 赞同：1
> 
> 时间：2013-02-16T19:27:10.717
> 
> 标签：java, unit-testing, facebook-graph-api, junit

创建测试用户后，我需要更新我获得的身份验证令牌。

据我从手册中了解到，这可以通过将浏览器重定向到身份验证页面来完成，然后浏览器将被重定向到带有查询字符串中身份验证令牌的登录页面。

这不适用于自动化测试，因此目前我正在为每个测试创建测试用户。我认为这不是正确的方法，所以我需要创建一次测试用户，然后在测试中重新使用他的身份验证令牌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:37:53.947

可以将访问令牌延长更长的时间，如[手册中所述](https://developers.facebook.com/docs/howtos/login/extending-tokens/)

# python - 如何使用mysqldb进行本地mysql连接

> ID：14914227
> 
> 赞同：1
> 
> 时间：2013-02-16T19:27:25.813
> 
> 标签：python, mysql

错误是

```
File "c:\python27\lib\site-packages\MySQLdb\connections.py", line 72, in Connection
db = get_db_connection(db_name)
NameError: name 'get_db_connection' is not defined 
```

所以我认为错误在***这是因为 def **init** (self, *args, **kwargs): 以冒号结尾，但我不知道连接的语法。

这是我在 connection.py 中的类连接代码

```
class Connection(_mysql.connection):

"""MySQL Database Connection Object"""

default_cursor = cursors.Cursor

def __init__(self, *args, **kwargs):     # *** this is error I think ie the : but what is syntax

    def get_db_connection(database_name):
        db = MySQLdb.connect('localhost', 'user', 'pswrd', database_name)
        cur = db.cursor()
    return db, cur

db_name = 'test' # database name
user_name = 'root' # name of a user

db = get_db_connection(db_name)

"""

Create a connection to the database. It is strongly recommended
that you only use keyword parameters. Consult the MySQL C API
documentation for more information.

host
  string, host to connect

user
  string, user to connect as

passwd
  string, password to use

db
  string, database to use

port
  integer, TCP/IP port to connect to

unix_socket
  string, location of unix_socket to use

conv
  conversion dictionary, see MySQLdb.converters

connect_timeout
  number of seconds to wait before the connection attempt
  fails.

compress
  if set, compression is enabled

named_pipe
  if set, a named pipe is used to connect (Windows only)

init_command
  command which is run once the connection is created

read_default_file
  file from which default client values are read

read_default_group
  configuration group to use from the default file

cursorclass
  class object, used to create cursors (keyword only)

use_unicode
  If True, text-like columns are returned as unicode objects
  using the connection's character set.  Otherwise, text-like
  columns are returned as strings.  columns are returned as
  normal strings. Unicode objects will always be encoded to
  the connection's character set regardless of this setting.

charset
  If supplied, the connection character set will be changed
  to this character set (MySQL-4.1 and newer). This implies
  use_unicode=True.

sql_mode
  If supplied, the session SQL mode will be changed to this
  setting (MySQL-4.1 and newer). For more details and legal
  values, see the MySQL documentation.

client_flag
  integer, flags to use or 0
  (see MySQL docs or constants/CLIENTS.py)

ssl
  dictionary or mapping, contains SSL connection parameters;
  see the MySQL documentation for more details
  (mysql_ssl_set()).  If this is set, and the client does not
  support SSL, NotSupportedError will be raised.

local_infile
  integer, non-zero enables LOAD LOCAL INFILE; zero disables

There are a number of undocumented, non-standard methods. See the
documentation for the MySQL C API for some hints on what they do.

"""

from MySQLdb.constants import CLIENT, FIELD_TYPE
from MySQLdb.converters import conversions
from weakref import proxy, WeakValueDictionary

import types

kwargs2 = kwargs.copy()

if 'conv' in kwargs:
    conv = kwargs['conv']
else:
    conv = conversions

conv2 = {}
for k, v in conv.items():
    if isinstance(k, int) and isinstance(v, list):
        conv2[k] = v[:]
    else:
        conv2[k] = v
kwargs2['conv'] = conv2

cursorclass = kwargs2.pop('cursorclass', self.default_cursor)
charset = kwargs2.pop('charset', '')

if charset:
    use_unicode = True
else:
    use_unicode = False

use_unicode = kwargs2.pop('use_unicode', use_unicode)
sql_mode = kwargs2.pop('sql_mode', '')

client_flag = kwargs.get('client_flag', 0)
client_version = tuple([ numeric_part(n) for n in _mysql.get_client_info().split('.')[:2] ])
if client_version >= (4, 1):
    client_flag |= CLIENT.MULTI_STATEMENTS
if client_version >= (5, 0):
    client_flag |= CLIENT.MULTI_RESULTS

kwargs2['client_flag'] = client_flag

super(Connection, self).__init__(*args, **kwargs2)     #****
self.cursorclass = cursorclass
self.encoders = dict([ (k, v) for k, v in conv.items()
                       if type(k) is not int ])

self._server_version = tuple([ numeric_part(n) for n in self.get_server_info().split('.')[:2] ])

db = proxy(self)
def _get_string_literal():
    def string_literal(obj, dummy=None):
        return db.string_literal(obj)
    return string_literal

def _get_unicode_literal():
    def unicode_literal(u, dummy=None):
        return db.literal(u.encode(unicode_literal.charset))
    return unicode_literal

def _get_string_decoder():
    def string_decoder(s):
        return s.decode(string_decoder.charset)
    return string_decoder

string_literal = _get_string_literal()
self.unicode_literal = unicode_literal = _get_unicode_literal()
self.string_decoder = string_decoder = _get_string_decoder()
if not charset:
    charset = self.character_set_name()
self.set_character_set(charset)

if sql_mode:
    self.set_sql_mode(sql_mode)

if use_unicode:
    self.converter[FIELD_TYPE.STRING].append((None, string_decoder))
    self.converter[FIELD_TYPE.VAR_STRING].append((None, string_decoder))
    self.converter[FIELD_TYPE.VARCHAR].append((None, string_decoder))
    self.converter[FIELD_TYPE.BLOB].append((None, string_decoder))

self.encoders[types.StringType] = string_literal
self.encoders[types.UnicodeType] = unicode_literal
self._transactional = self.server_capabilities & CLIENT.TRANSACTIONS
if self._transactional:
    # PEP-249 requires autocommit to be initially off
    self.autocommit(False)
self.messages = []

def cursor(self, cursorclass=None):
    """

    Create a cursor on which queries may be performed. The
    optional cursorclass parameter is used to create the
    Cursor. By default, self.cursorclass=cursors.Cursor is
    used.

    """
    return (cursorclass or self.cursorclass)(self)

def __enter__(self): return self.cursor()

def __exit__(self, exc, value, tb):
    if exc:
        self.rollback()
    else:
        self.commit()

def literal(self, o):
    """

    If o is a single object, returns an SQL literal as a string.
    If o is a non-string sequence, the items of the sequence are
    converted and returned as a sequence.

    Non-standard. For internal use; do not use this in your
    applications.

    """
    return self.escape(o, self.encoders)

def begin(self):
    """Explicitly begin a connection. Non-standard.
    DEPRECATED: Will be removed in 1.3.
    Use an SQL BEGIN statement instead."""
    from warnings import warn
    warn("begin() is non-standard and will be removed in 1.3",
         DeprecationWarning, 2)
    self.query("BEGIN")

if not hasattr(_mysql.connection, 'warning_count'):

    def warning_count(self):
        """Return the number of warnings generated from the
        last query. This is derived from the info() method."""
        from string import atoi
        info = self.info()
        if info:
            return atoi(info.split()[-1])
        else:
            return 0

def set_character_set(self, charset):
    """Set the connection character set to charset. The character
    set can only be changed in MySQL-4.1 and newer. If you try
    to change the character set from the current value in an
    older version, NotSupportedError will be raised."""
    if charset == "utf8mb4":
        py_charset = "utf8"
    else:
        py_charset = charset
    if self.character_set_name() != charset:
        try:
            super(Connection, self).set_character_set(charset)
        except AttributeError:
            if self._server_version < (4, 1):
                raise NotSupportedError("server is too old to set charset")
            self.query('SET NAMES %s' % charset)
            self.store_result()
    self.string_decoder.charset = py_charset
    self.unicode_literal.charset = py_charset

def set_sql_mode(self, sql_mode):
    """Set the connection sql_mode. See MySQL documentation for
    legal values."""
    if self._server_version < (4, 1):
        raise NotSupportedError("server is too old to set sql_mode")
    self.query("SET SESSION sql_mode='%s'" % sql_mode)
    self.store_result()

def show_warnings(self):
    """Return detailed information about warnings as a
    sequence of tuples of (Level, Code, Message). This
    is only supported in MySQL-4.1 and up. If your server
    is an earlier version, an empty sequence is returned."""
    if self._server_version < (4,1): return ()
    self.query("SHOW WARNINGS")
    r = self.store_result()
    warnings = r.fetch_row(0)
    return warnings

Warning = Warning
Error = Error
InterfaceError = InterfaceError
DatabaseError = DatabaseError
DataError = DataError
OperationalError = OperationalError
IntegrityError = IntegrityError
InternalError = InternalError
ProgrammingError = ProgrammingError
NotSupportedError = NotSupportedError

errorhandler = defaulterrorhandler 
```

这是connection.py中调用该函数的第187行

```
 super(Connection, self).__init__(*args, **kwargs2)     #**** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:33:15.423

来自`Connection.__init__`文档字符串 -**强烈建议您只使用关键字参数。**

尝试使用类似的东西：

```
MySQLdb.connect(
    host='localhost',
    user='user',
    passwd='pswrd',
    db=database_name
) 
```

另外，发布您收到的错误。这可能会有所帮助。

# asp.net - 在 asp.net mvc 3 中使用 Last-Modified 标头和 OutputCacheAttribute 进行客户端缓存

> ID：14914228
> 
> 赞同：4
> 
> 时间：2013-02-16T19:27:26.130
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, caching, browser-cache

**已编辑**

我想在客户端缓存图像，并且知道在 mvc 3 中有不同的方法可以做到这一点：（如果我错了，请纠正我）

1）您可以在http 标头`OutputCacheAttribute`的帮助下使用 which 。`Expires`但它会返回`304 Not Modified`，除非时间到期（即使图像已更改）。

2) 为避免显示过时的图像，您可以使用`Last-Modified`http 标头（带`OutputCacheAttribute`）。在这种情况下，浏览器将请求发送到带有`If-Modified-Since`http 标头的服务器。在服务器上，您验证对象是否仍然有效，如果是，您只需返回`Last-Modified`http 标头（浏览器从本地缓存中获取图像）；如果对象已修改，您将其返回`200 OK`状态。
因此，浏览器每次从自己的缓存中获取图像之前都需要向服务器发送请求。[这是一个例子](https://stackoverflow.com/questions/10498135/last-modified-header-in-mvc#13148439)-

3）还有另一种方法（在我的情况下，我被告知正确的方法，因为图像很少会改变......无论如何，我需要完全实现这一点）：将修改日期添加到图像url并设置缓存`Expires`为永恒（1 年或更长时间）。如果图像已更改，您应该发送带有新版本的新网址。

这是代码：

```
public class LastModifiedCacheAttribute : ActionFilterAttribute
{
    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        if (filterContext.Result is FilePathResult)
        {
            var result = (FilePathResult)filterContext.Result;
            var lastModify = File.GetLastWriteTime(result.FileName);
            if (!HasModification(filterContext.RequestContext, lastModify))
                filterContext.Result = NotModified(filterContext.RequestContext, lastModify);
            SetLastModifiedDate(filterContext.RequestContext, lastModify);
        }
        base.OnActionExecuted(filterContext);
    }

    private static void SetLastModifiedDate(RequestContext requestContext, DateTime modificationDate)
    {
        requestContext.HttpContext.Response.Cache.SetLastModified(modificationDate);
    }

    private static bool HasModification(RequestContext context, DateTime modificationDate)
    {
        var headerValue = context.HttpContext.Request.Headers["If-Modified-Since"];
        if (headerValue == null)
            return true;
        var modifiedSince = DateTime.Parse(headerValue).ToLocalTime();
        return modifiedSince < modificationDate;
    }

    private static ActionResult NotModified(RequestContext response, DateTime lastModificationDate)
    {
        response.HttpContext.Response.Cache.SetLastModified(lastModificationDate);
        return new HttpStatusCodeResult(304, "Page has not been modified");
    }
} 
```

我`LastModifiedCacheAttribute`在 Global.asax 中注册了，并将以下 OutputCacheAttribute 应用于我的操作方法。

```
[HttpGet, OutputCache(Duration = 3600, Location = OutputCacheLocation.Client, VaryByParam = "productId")]
public FilePathResult GetImage(int productId)
{ // some code } 
```

如果我使用上面的代码，浏览器似乎不会向服务器发送请求，而是只会从缓存中获取图像，除非持续时间没有结束。（当我更改图像时，浏览器不显示新版本）

**问题：**

**1）**如何实现第三种方法，以便浏览器从客户端缓存中获取图像（并且不会在每次想要图像时向服务器发送响应），除非图像被修改？
**编辑：**实际代码将不胜感激。

**2）**在上面的代码中，第一个图像请求的时间被写入Last-Modified（不知道为什么）。如何将文件的修改日期写入Last-Modified？
**编辑：**这个问题与第二种方法有关。此外，如果我只在客户端缓存并使用`Last-Modified`实现，我`304 Not Modified`只有在按下 时才会获得状态`F5`。如果我重新输入相同的网址，我会得到`200 OK`. 如果我在不使用的情况下缓存在客户端上，无论如何`Last-Modified`它都会返回。`200 OK`这怎么解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:54:45.677

您可以考虑使用 ETags ( [http://en.wikipedia.org/wiki/HTTP_ETag](http://en.wikipedia.org/wiki/HTTP_ETag) )，这是我阅读您的问题时想到的第一件事。

你也可以看看这里：[Set ETag for FileResult - MVC 3](https://stackoverflow.com/questions/5031278/set-etag-for-fileresult-mvc-3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:08:55.083

您可以使用带有输出缓存的 VaryByCustom 选项来实现此目的，而无需使用自定义属性。像这样更改您的方法代码：

```
[HttpGet, OutputCache(Duration = 3600, 
    Location = OutputCacheLocation.Client, 
    VaryByCustom = "imagedate")]
public FilePathResult GetImage(int productId)
{ // some code } 
```

然后将以下代码添加到您的 Global.asax：

```
 public override string GetVaryByCustomString(System.Web.HttpContext context, string custom)
    {
        if (custom.ToLower() == "imagedate")
        {
            return System.IO.File.GetLastWriteTime(Server.MapPath("~/Images/my-image.png")).ToString();
        }
        else
        {
            return base.GetVaryByCustomString(context, custom);
        }
    } 
```

当图像文件的时间戳发生变化时，GetVaryByCustomString 方法的返回值将发生变化，这将导致 ASP.NET 重新加载图像而不是使用缓存的值。

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/aa478965.aspx](http://msdn.microsoft.com/en-us/library/aa478965.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:24:01.257

如果我理解正确，那么您所追求的是无限缓存，并依赖于通过更改资源的实际 url 来使缓存无效。

在这种情况下，我相信实际的实现要简单得多，并且不需要手动处理标头。

最终，关键是能够通过 URL 加载图像，如下所示：

```
http://someDomain/product/image/1?v={something} 
```

“1”是*productId*，并指定某种版本标识符（“v”）。

关键是构建该 url，其中*v*的值取决于图像的最后修改（您可能应该将其与图像或产品一起存储）。您可能可以散列修改日期，并使用它。

如果下次构建 url 时，上次修改的日期相同，您将获得相同的哈希值，因此呈现与以前相同的 url，并且浏览器将从缓存中加载它而不向服务器请求任何内容.

一旦图像更新并且修改日期发生变化，您的代码将生成一个不同的 url，这将迫使浏览器再次请求它。

然后你只需将`OutputCache`属性应用到动作，配置为在客户端缓存（无需指定`VaryByParam`），你应该设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-26T16:00:10.993

最初使用[这个](https://stackoverflow.com/a/13148439/2218697)答案，但由于某种原因，当图像被修改时，它不会在客户端更新，而是显示图像的缓存版本。

所以**解决方案是使用版本控制**，这是您的第三个选项，只需从您的产品图像数据库中添加 LastUpdated 日期时间字段

**动作方法**

```
 [HttpGet]
    [OutputCache(
    Duration = 7200,
    VaryByParam = "productId;lastUpdated",
    Location = OutputCacheLocation.Client)]
    public ActionResult GetImage(string productId, string lastUpdated)
    {
        var dir = Server.MapPath("~/productimages/");
        var path = Path.Combine(dir, productId + ".jpg");
        return base.File(path, "image/jpeg");
    } 
```

**在视图中**

```
<img src="@Url.Action("GetImage", "Home", new { productId = "test-product-100", 
lastUpdated =Model.LastUpdated })" /> 
```

取自[这篇](https://stackoverflow.com/questions/126772/how-to-force-a-web-browser-not-to-cache-images?lq=1)文章的想法。

答案很晚，但希望可以帮助某人。

# android - 水平列表视图不起作用

> ID：14914236
> 
> 赞同：0
> 
> 时间：2013-02-16T19:28:29.003
> 
> 标签：android, android-adapterview

我的应用程序中需要一个`HorizontalListView`，并且由于 Android SDK 中没有这样的现有小部件，我正在使用[这个](http://www.dev-smart.com/archives/34)小部件，而不是自己构建一个。但问题是列表项没有保持其大小并占据屏幕的整个宽度。

这是列表项的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="106dp"
    android:layout_height="140dp"
    android:background="@drawable/list_bck" >

    <CheckBox
        android:id="@+id/mail_marker"
        android:layout_width="25dp"
        android:layout_height="25dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="4dp"
        android:layout_marginRight="5dp" />

    <View
        android:id="@+id/h_rule1"
        android:layout_width="100dp"
        android:layout_height="1dp"
        android:layout_above="@+id/mail_marker"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="2dp"
        android:background="#CDC1C5" />

    <TextView
        android:id="@+id/date_txt"
        android:layout_width="40dp"
        android:layout_height="15dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="5dp"
        android:text="FEB 4"
        android:textSize="11dp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/time_txt"
        android:layout_width="50dp"
        android:layout_height="12dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/date_txt"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="2dp"
        android:text="12:34 PM"
        android:textSize="9dp" />

    <ImageButton
        android:id="@+id/flag_mail"
        android:layout_width="22dp"
        android:layout_height="22dp"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="5dp"
        android:layout_marginTop="4dp"
        android:background="@android:color/transparent"
        android:scaleType="fitXY"
        android:src="@drawable/star" />

    <ImageView
        android:id="@+id/read_unread"
        android:layout_width="22dp"
        android:layout_height="22dp"
        android:layout_alignParentTop="true"
        android:layout_marginRight="2dp"
        android:layout_marginTop="4dp"
        android:layout_toLeftOf="@+id/flag_mail"
        android:background="@android:color/transparent"
        android:scaleType="fitXY"
        android:src="@drawable/mail_unread" />

    <TextView
        android:id="@+id/count_txt"
        android:layout_width="12dp"
        android:layout_height="12dp"
        android:layout_alignParentTop="true"
        android:layout_marginRight="1dp"
        android:layout_marginTop="10dp"
        android:layout_toLeftOf="@+id/read_unread"
        android:text="3"
        android:textSize="8dp"
        android:textStyle="bold" />

    <View
        android:id="@+id/h_rule"
        android:layout_width="95dp"
        android:layout_height="1dp"
        android:layout_below="@+id/time_txt"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="2dp"
        android:background="#CDC1C5" />

    <TextView
        android:id="@+id/sub_txt"
        android:layout_width="95dp"
        android:layout_height="16dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/h_rule"
        android:layout_marginLeft="6dp"
        android:layout_marginTop="2dp"
        android:ellipsize="middle"
        android:singleLine="true"
        android:text="Subject Line goes here"
        android:textSize="13dp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/sender_txt"
        android:layout_width="92dp"
        android:layout_height="15dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/sub_txt"
        android:layout_marginLeft="8dp"
        android:layout_marginRight="4dp"
        android:layout_marginTop="2dp"
        android:ellipsize="middle"
        android:singleLine="true"
        android:text="Name of sender"
        android:textSize="11dp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/mail_txt"
        android:layout_width="92dp"
        android:layout_height="24dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/sender_txt"
        android:layout_marginLeft="6dp"
        android:layout_marginRight="4dp"
        android:layout_marginTop="2dp"
        android:ellipsize="middle"
        android:maxLines="2"
        android:text="This is the body of the mail."
        android:textSize="9dp" />

</RelativeLayout> 
```

我在看到之后使用了绝对尺寸，`fill_parent`或者`wrap_content`没有任何效果但没有运气，但该项目仍在拉伸到屏幕的宽度。

下面是我正在使用的适配器的代码：

```
private class EmailAdapter extends ArrayAdapter<EmailItem> {

    ArrayList<EmailItem> items;

    public EmailAdapter(Context context, int textViewResourceId, ArrayList<EmailItem> Items) {
        super(context, textViewResourceId, Items);
        this.items = Items;
        // TODO Auto-generated constructor stub
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.list_item, null);
        }
        final EmailItem o = items.get(position);
        if (o != null) {
            TextView date = (TextView) v.findViewById(R.id.date_txt);
            TextView time = (TextView) v.findViewById(R.id.time_txt);
            TextView count = (TextView) v.findViewById(R.id.count_txt);
            TextView sub = (TextView) v.findViewById(R.id.sub_txt);
            TextView sender = (TextView) v.findViewById(R.id.sender_txt);
            TextView body = (TextView) v.findViewById(R.id.mail_txt);

            ImageView read = (ImageView) v.findViewById(R.id.read_unread);
            ImageButton flag = (ImageButton) v.findViewById(R.id.flag_mail);

            date.setText(o.date);
            time.setText(o.time);
            count.setText(String.valueOf(o.count));
            sub.setText(o.sub);
            sender.setText(o.sender);
            body.setText(o.body);
            if (o.read) {
                read.setImageResource(R.drawable.mail_read);
                View vrule = (View) v.findViewById(R.id.h_rule);
                vrule.setVisibility(View.INVISIBLE);
            } else {
                read.setImageResource(R.drawable.mail_unread);
            }

            if (o.flag) {
                flag.setImageResource(R.drawable.star_full);
            } else {
                flag.setImageResource(R.drawable.star);
            }
        }
        return v;
    }
} 
```

请帮我解决这个问题。

我需要添加选择反馈（点击或选择时发光）并在最后停止（滚动列表后将完全显示项目，没有部分项目可见性）。

关于如何实现这些目标的任何见解都将是非常可观的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:37:23.173

水平ListView这样的东西是不存在的，自定义适配器，如果你在实际的ListView上设置它不会得到所需的结果。

你为什么不看看 `Gallery`班级？它更接近于要查找的内容，您可以更改适配器的 getView 以根据需要呈现视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:49:59.613

看看中的`addAndMeasureChild()`函数`HorizontalListView`。您可以在测量时指定最大宽度/高度

```
child.measure(
    MeasureSpec.makeMeasureSpec(yourWidth, MeasureSpec.AT_MOST),
    MeasureSpec.makeMeasureSpec(yourHeight, MeasureSpec.AT_MOST)); 
```

但是，此解决方法仅适用于您的项目始终具有相同（最大）宽度/高度的情况，但对我而言，它成功了。

至于选择反馈，只需`OnItemClickListener`向您注册一个`HorizontalListView`并在方法中指定所需的行为`OnItemClick`。

# haskell - 如何用 Haskell 编写更少的代码？

> ID：14914237
> 
> 赞同：-7
> 
> 时间：2013-02-16T19:28:29.643
> 
> 标签：haskell

我正在测试 Python 和 Haskell 的代码密度。所以我决定编写一个程序来求解 ax^2+bx+c=0 形式的方程，其中 a<>0。在 Python 中，这需要五行：

```
import cmath

def secondgrade(a,b,c):
     d=b**2-4*a*c
     return ((-b+cmath.sqrt(d))/2*a,(-b-cmath.sqrt(d))/2*a) 
```

在 Haskell 中，它应该更简洁，更少冗长，我花了 12 行：

```
import Data.Complex

csqrt :: Double->Complex Double
csqrt a = if a<0 then 0.0 :+ sqrt(abs(a)) else sqrt(a) :+ 0.0

secondgrade :: Double->Double->Double->(Complex Double,Complex Double)
secondgrade a b c = let d = b^2 - 4*a*c
                    denominator=2*a :+ 0
                    b'=(-b) :+ 0
                    solution1=b'+(csqrt d)
                    solution2=b'-(csqrt d)
                 in (solution1/denominator,solution2/denominator) 
```

有没有行数更少且不失可读性的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T19:39:35.830

我认为你目前拥有的 Haskell 解决方案比你的 python 版本更好，更易读。您*可以*重写 Haskell 以匹配 python 版本，如下所示：

```
import Data.Complex
secondgrade :: Double->Double->Double->(Complex Double,Complex Double)
secondgrade a b c = ((((-b) :+ 0)+(csqrt d))/(2*a :+ 0), (((-b) :+ 0)-(csqrt d))/(2*a :+ 0))
  where d = b^2 - 4*a*c
        csqrt a = if a<0 then 0.0 :+ sqrt(abs(a)) else sqrt(a) :+ 0.0 
```

当然，减少代码行数对我来说似乎很二年级。好的代码易于阅读，不需要破译。

希望这可以帮助！

# javascript - 在我的 svg-canvas 中获取选定元素的 ID 属性。SVGEDITOR 和 Methoddraw

> ID：14914246
> 
> 赞同：0
> 
> 时间：2013-02-16T19:29:05.140
> 
> 标签：javascript, jquery, svg, jquery-svg

我想在我的 svg-canvas 中获取选定元素的 id 作为变量以在函数中使用它。我认为 var selected = svgCanvas.getSelectedElems; 不传递特定的 id。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-21T10:30:08.077

您可以直接使用 selectedElement.id

var elementSel = selectedElement.id;

# python - 如何在不使用条件语句的情况下将最大和最小边界应用于值

> ID：14914254
> 
> 赞同：6
> 
> 时间：2013-02-16T19:30:25.833
> 
> 标签：python

**问题：**

编写一个 Python 函数，clip(lo, x, hi)，如果 x 小于 lo，则返回 lo；如果 x 大于 hi，则为 hi；否则为 x。对于这个问题，你可以假设 lo < hi。

不要对这个问题使用任何条件语句。相反，使用内置的 Python 函数 min 和 max。在开始这个问题之前，您可能希望阅读有关 min 的文档和有关 max 的文档，并在您的解释器中尝试一下这些函数。

此函数接受三个数字并返回一个数字。

**给出的代码：**

```
def clip(lo, x, hi):
    '''
    Takes in three numbers and returns a value based on the value of x.
    Returns:
     - lo, when x < lo
     - hi, when x > hi
     - x, otherwise
    ''' 
```

**我的代码添加：**

```
def clip(lo, x, hi):
    '''
    Takes in three numbers and returns a value based on the value of x.
    Returns:
     - lo, when x < lo
     - hi, when x > hi
     - x, otherwise
    '''
    if min(x, lo, hi) == x:
        return lo
    elif max(x, lo, hi) == x:
        return hi
    else:
        return x 
```

**问题是：**我不能使用**任何**条件。帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-16T20:02:48.630

这是一个解决方案，假设 lo < hi。

```
def clip(lo, x, hi):
    return max(lo, min(hi, x)) 
```

在每种情况下它是如何工作的：

*   **lo，当 x < lo**：*如果 lo < hi*，则 x < hi，所以`min(hi, x)`返回`x`并`max(lo, x)`返回`lo`。
*   **hi, 当 x > hi** :`min(hi, x)`返回`hi`并且*如果 lo < hi* ,`max(lo, hi)`返回`hi`
*   **x，否则**：x > lo 和 x < hi，所以`min(hi, x)`返回`x`并`max(lo, x)`返回`x`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-17T02:39:55.067

因此，到目前为止，您已经提出了许多选项。尚未发布的是嵌套的三元表达式：

```
def clip(lo, x, hi):
    return lo if x <= lo else hi if x >= hi else x 
```

但由于这使用显式条件测试，可能不适合作为原始问题的解决方案。尽管如此，考虑到这些选项，这实际上具有短路 if 的优点`x <= lo`（所有其他方法评估所有比较和/或执行一两个方法调用）。让我们看看这些替代方案如何使用 timeit 实际执行（使用 Python 3.3 测试，因此 range 不会构建列表，而是返回一个迭代器）：

```
python -m timeit -s "lo,hi=10,90" "[max(lo,min(hi,x)) for x in range(100)]"
10000 loops, best of 3: 54.5 usec per loop 
```

（每次评估 2 个函数调用，会影响性能）

```
python -m timeit -s "lo,hi=10,90" "[(lo,(hi,x)[x<hi])[x>lo] for x in range(100)]"
10000 loops, best of 3: 40.9 usec per loop 
```

（评估测试并为每次评估构建元组，但至少没有函数调用）

```
python -m timeit -s "lo,hi=10,90" "[sorted((lo,x,hi))[1] for x in range(100)]"
10000 loops, best of 3: 90.5 usec per loop 
```

（构建元组和排序 - 抱歉，Gnibbler，这是最慢的）

```
python -m timeit -s "lo,hi=10,90" "[lo if x <= lo else hi if x >= hi else x for x in range(100)]"
100000 loops, best of 3: 18.9 usec per loop 
```

（最快，没有函数调用，只评估`x >= hi`if `x > lo`）

如果在测试范围内将 lo 的值移动到更高的位置，则可以看到这种短路：

```
python -m timeit -s "lo,hi=80,90" "[lo if x <= lo else hi if x >= hi else x for x in range(100)]"
100000 loops, best of 3: 15.1 usec per loop 
```

（如果您想在 Python 2.x 下重现这些内容，请替换`range`为`xrange`。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-16T19:48:58.290

在不给出整个解决方案的情况下——你不需要“检查”任何东西。从底部开始限制的值`lo`是您从运行中获得的值`max(x, lo)`。

此外，剪裁到一个边界的值不会受到剪裁到另一边界的影响，因此您可以安全地通过另一个校正运行一个校正的结果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-06-03T14:09:50.133

我浏览了所有案例，每个案例的答案都是按大小排列时的中间项

```
 def clip(lo,x,hi):
             t = hi + lo + x - max(lo,x,hi)- min(lo,x,hi)
             return t 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-16T20:16:30.393

另一种解决方案：

```
def clip(lo, x, hi):
    result = {x: x}
    result[min(x, lo)] = lo
    result[max(x, hi)] = hi
    return result[x] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-23T12:26:01.920

解决方案：

```
def clip(lo, x, hi):
    x = max(lo, x)
    x = min(x, hi)   
    return x 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-16T20:10:03.520

```
def clip(lo, x, hi):
    return sorted((lo, x, hi))[1] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-17T02:25:56.607

分钟？最大限度？关于什么：

```
def clip(lo,x,hi):
    return (lo,(hi,x)[x<hi])[x>lo] 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-07-08T21:55:53.913

这将在没有条件运算符的情况下解决问题。

```
max(lo,min(hi,x)) 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2015-01-19T18:21:57.863

这里也是一个解决方案：return min(max(x, lo), hi)

# php - 用有效日期替换像 new Date(1358467200000) 这样的字符串

> ID：14914260
> 
> 赞同：0
> 
> 时间：2013-02-16T19:31:11.460
> 
> 标签：php, regex, json

我正在使用 PHP 制作 jsonp 版本的 json 文件，我注意到作者在 json 文件中放置了类似这样的内容，而不是有效日期：

```
"StartPublish" : new Date(1356652800000) 
```

我需要用表示为有效日期格式的时间戳替换所有出现的时间，例如使用 PHP。`new Date(*timestamp*)``*Fri Dec 28 2012 01:00:00 GMT+0100 (CET)*`

非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:41:34.133

现在不要谈论您的 JSON 内容。尝试`preg_replace_callback`：

```
$jsonPost = preg_replace_callback('/:\s*new\s+Date\(([0-9]+)\)/', function($match) {
    return ': "'. date('r', $match[1] / 1000). '"';
}, $jsonPre); 
```

日期可以根据[http://php.net/manual/en/function.date.php格式化](http://php.net/manual/en/function.date.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:37:50.847

> 我正在制作 json 文件的 jsonp 版本

那么你没有任何问题。您当前拥有的格式可能不是有效的 JSON，但将其包装在回调函数中将创建一个具有对象文字和`Date`调用的有效 JSONP 脚本 - 无需转换。只是

```
echo $_GET["callback"] . "($nearlyJSON);"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T20:12:54.660

```
 echo  date("d/m/Y h:i:s",strtotime($strtime)); 
```

# bit-manipulation - 声明是什么（1< 我是位运算的初学者（在 C 方面也不是很有经验），我遇到了以下表达式： x |= (1< <y) 1="" 2="" 8="" 1920="" 起初我以为它的意思是“x="" 等于="" x="" 或="" y="" 左移一位”，但后来我意识到这将是：="" |="(y<<1)" 问问题="" 2013-02-16t19:31:25.533="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 我是位运算的初学者（在="" c="" 方面也不是很有经验），我遇到了以下表达式：="" 最后，我认为它的意思是“x="" 左移="" 位”，但我不明白="" 在="" 位寄存器中的位置，是="" 00000001="" 吗？以便：="" a="2" b="1<<a" so="" 谁能告诉我这句话的正确含义。另外，如果有人有一个很好的链接来解释按位语法，我将不胜感激。谢谢。="" 是简写="" ...="" 它将值分配x="" ...给x。="" <<="" 1左移y.="" _="" 例如="" -="">00000010 所以， x |= (1 << y) 左移（OR x并将结果分配给）。1yx 换句话说，它将第y位设置x为1。 x = 01010101 x |= (1 << 1) -> 01010111 (it set the 2nd bit to 1) bit-manipulationbitwise-operators 4 2 回答 2 This answer is useful 2 x |= ... 是简写 x = x | ... 它将值分配x | ...给x。 1 << y 1左移y. _ 例如 00000001 << 1 -> 00000010 所以， x |= (1 << y) 左移（OR x并将结果分配给）。1yx 换句话说，它将第y位设置x为1。 x = 01010101 x |= (1 << 1) -> 01010111 (it set the 2nd bit to 1) 于 2013-02-16T19:37:31.273 回答 This answer is useful 1 第一条语句意味着将 1 (0b0000001) 的二进制表示左移 y 位。然后将值与 X 进行或运算。第二个语句的假设是正确的。第三条语句将产生 4 (0b0000000100)。就位操作语义而言，C 标准定义了所有要表示的位操作，以便二进制数以 2 的幂的递增值从右到左读取。您无需担心字节顺序或两个补码等，编译器将处理为你。所以 (0b00100) = 4, (0b000010) = 2, (0b00001) = 1, 以此类推。 于 2013-02-16T19:46:35.803 回答 Related 1 c# - BackGroundWorker 一次只允许两个线程 1 vba - VBA 获取 LDAP 的对象类型和库 1 c++builder - Borland C++Builder 6 有调试日志功能吗？ 2 c# - 如何调试 DebuggerTypeProxy 代理？ 3 php - 如果设置了变量并且 is_null，如何检查 PHP 4 c# - 在暂停/恢复 PC 时，让 Windows 服务正常停止和启动的正确方法是什么？ 1 ios - 自定义 UISlider 图像无法正常工作 2 sql - 如何更新包含 SQL Server 中旧值和新值的其他 2 个表？ 1 php - FedEx Soap RateRequest for International Shipping（关税和税费） 2 php - jquery datepicker 的 alywas 在 php $_POST 中返回今天的日期 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</y)>

> ID：14914261
> 
> 赞同：2
> 
> 时间：
> 
> 标签：bit-manipulation, bitwise-operators

我是位运算的初学者（在 C 方面也不是很有经验），我遇到了以下表达式：

```
x |= (1<<y) 
```

起初我以为它的意思是“x 等于 x 或 y 左移一位”，但后来我意识到这将是：

```
x |= (y<<1) 
```

最后，我认为它的意思是“x 等于 x 或 1 左移 y 位”，但我不明白 1 在 8 位寄存器中的位置，是 00000001 吗？以便：

```
a = 2
b = 1<<a // so b=00000010 
```

谁能告诉我这句话的正确含义。另外，如果有人有一个很好的链接来解释按位语法，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:37:31.273

```
x |= ... 
```

是简写

```
x = x | ... 
```

它将值分配`x | ...`给`x`。

```
1 << y 
```

`1`左移`y`. _ 例如

```
00000001 << 1 -> 00000010 
```

所以，

```
x |= (1 << y) 
```

*左移*（*`OR` `x`并将结果分配给）。`1``y``x`*
换句话说，它将第*y*位设置`x`为`1`。

```
x = 01010101
x |= (1 << 1)   -> 01010111  (it set the 2nd bit to 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T19:46:35.803

第一条语句意味着将 1 (0b0000001) 的二进制表示左移 y 位。然后将值与 X 进行或运算。第二个语句的假设是正确的。第三条语句将产生 4 (0b0000000100)。就位操作语义而言，C 标准定义了所有要表示的位操作，以便二进制数以 2 的幂的递增值从右到左读取。您无需担心字节顺序或两个补码等，编译器将处理为你。所以 (0b00100) = 4, (0b000010) = 2, (0b00001) = 1, 以此类推。

# ios - 可以不在自定义 init 方法中调用 [super init] 吗？

> ID：14914265
> 
> 赞同：1
> 
> 时间：2013-02-16T19:31:50.513
> 
> 标签：ios, objective-c, cocoa-touch, nscoding

我有一个`MKPolyline`我想实现的 subblas `NSCoding`，即

```
@interface RSRoutePolyline : MKPolyline <NSCoding> 
```

[我问了一个关于对 c 数组进行编码的最佳方法的问题，并得到了很好的答案](https://stackoverflow.com/q/14913744/296446)。但是，在 上没有定义 init 方法[`MKPolyline`](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKPolyline_class/Reference/Reference.html)，即除了它的类方法之外，没有其他方法可以给它提供数据`polylineWithPoints:points`。

这段代码我的评论可以吗？

```
- (void)encodeWithCoder:(NSCoder *)aCoder
{
    MKMapPoint *points = self.points;
    NSUInteger pointCount = self.pointCount;

    NSData *pointData = [NSData dataWithBytes:points length:pointCount * sizeof(MKMapPoint)];
    [aCoder encodeObject:pointData forKey:@"points"];
    [aCoder encodeInteger:pointCount forKey:@"pointCount"];
}

- (id)initWithCoder:(NSCoder *)aDecoder
{
    NSData* pointData = [aDecoder decodeObjectForKey:@"points"];
    NSUInteger pointCount = [aDecoder decodeIntegerForKey:@"pointCount"];

    // Edit here from @ughoavgfhw's comment
    MKMapPoint* points = (MKMapPoint*)[pointData bytes];

    // Is this line ok?
    self = (RSRoutePolyline*)[MKPolyline polylineWithPoints:points count:pointCount];

    return self;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:46:50.993

不打电话很脏`[super init]`，而且这对我的良好编程理念来说不是好兆头。如果不自己调用 super ，它就不是真正的子类；只是依赖于调用便利构造函数的副作用的组合的混蛋。这么说，我相信你描述的方法可以正常工作，但它违背了良好的 Objective-C 编程及其约定。

我的建议是`MKPolyLine`作为一个`MKPolyLine`实例，并使用一个类别来添加你需要的额外的花里胡哨。至于添加额外的实例变量等，您可以使用关联对象。可以[在这里找到](http://labs.vectorform.com/2011/07/objective-c-associated-objects/)对这个概念的介绍，这个 SO 问题解决了它们与类别的使用：[如何在对象中使用 objc_setAssociatedObject/objc_getAssociatedObject？](https://stackoverflow.com/questions/2846218/how-do-i-use-objc-setassociatedobject-objc-getassociatedobject-inside-an-object)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T20:01:56.997

您应该在 NSObject 的任何子类上调用 init 方法。由于 MKPolyline 是一个 NSObject，你应该初始化它。

但是 MKPolyline 没有方法，也没有 init。这是Objective C的意思是告诉你你不能继承它。

相反，正如 WDUK 建议的那样，定义您自己的类。它跟踪您的列表点，并管理 NSCoding 以根据需要保存和恢复它们。

```
 @interface RSPolyline: NSObject<NSCoding>

 - (id) initWithPoints: (NSArray*) points;
 - (id) initWithCoder:(NSCoder *)aDecoder;
 - (void) encodeWithCoder:(NSCoder *)aCoder;

 - (MKPolyline*) polyLine;

 @end 
```

您的类可以根据请求生成折线，如果性能有问题，可能会缓存结果。

作为一项规则，不要先获得继承权。当你想扩展和改进一门课时，首先要考虑作文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T19:54:30.653

虽然通常允许在 init 方法中创建和返回不同的对象，但该行存在三个问题（如下所述）。相反，我建议重写`points`and`pointCount`属性，以便您可以返回存储在实例变量中的值，并在实例变量为空时调用超级实现。然后，您的初始化程序只需设置这些实例变量，以便使用它们。

```
- (MKMapPoint *)points {
    if(myPointsIvar == NULL) return [super points];
    else return myPointsIvar;
}
// similarly for pointCount 
```

* * *

第一个问题是您正在创建一个新对象，但没有释放旧对象，这意味着您正在泄漏它。您应该将结果存储在不同的变量中，然后释放 self，然后返回结果（您不需要将其存储在 self 中）。

其次，`polylineWithPoints:count:`返回一个自动释放的对象，但`initWithCoder:`应该返回一个保留的对象。除非它上面有另一个保留，否则它可能会在您仍在使用它时被释放。

如果这些是唯一的问题，您可以像这样解决这两个问题：

```
MKPolyline *result = [MKPolyline polylineWithPoints:points count:pointCount];
[self release];
return [result retain]; 
```

但是，还有第三个问题不能这么容易解决。`polylineWithPoints:count:`不返回`RSRoutePolyline`对象，并且它返回的对象可能与您的子类的方法不兼容（例如，它可能不支持 NSCoding）。真的没有办法解决这个问题，所以你不能使用`polylineWithPoints:count:`.

# php - 正则表达式 - 当有多个括号时如何解析数据？

> ID：14914266
> 
> 赞同：0
> 
> 时间：2013-02-16T19:31:51.900
> 
> 标签：php, regex

全部-

我非常喜欢正则表达式，但是当有多种类型的解析时，我会感到很困惑。

我基本上是在尝试解析这样的数据：

```
{"classs":15,"commondrop":true,"id":7101,"level":1,"name":"7Z",
 "slot":0,"source":[2],"subclass":0, 
 modes: { "mode":4,
          "4": { "count":15862,"outof":36461 }
        },
 count:15862, stack:[1,1]
}, 
{"classs":15,"commondrop":true,"id":62530,"level":1,"name":"7Z",
 "slot":0,"source":[2],"subclass":0,
  modes:{ "mode":4,
          "4":{ "count":13402,"outof":36461 }
        },
  count:13402,stack:[1,1]
},
{"classs":15,"commondrop":true,"id":3300,"level":5,"name":"7Rabbit's Foot",
 "slot":0,"source":[2],"subclass":0,
  modes:{"mode":4,
         "4":{ "count":1,"outof":36461 }
        },
  count:1,stack:[1,1] 
}
]}); 
```

由于有子括号（{ 和}），我不完全确定如何只获取外括号中的内容。所以我只想摆脱它：

```
"classs":15,"commondrop":true,"id":7101,"level":1,"name":"7Z","slot":0,"source":[2],"subclass":0,modes:{"mode":4,"4":{"count":15862,"outof":36461}},count:15862,stack:[1,1] 
```

（然后我可以进一步解析并进一步分解）

这甚至可以使用正则表达式吗？我开始尝试类似的东西，`\{"classs"(.*?)\},{`但它错过了一些数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T19:34:10.540

正则表达式无法计算括号，因为它们不是正则语言。解决方案将是使用即解析表达式语法实现而不是正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:40:14.683

正则表达式在处理任何类型的嵌套方面都很糟糕，据我所知，任何可以递归嵌套的东西都是不可能的。相反，您应该使用适当的解析器。您所拥有的似乎是 JSON（尽管它无效..我假设您粘贴的内容不完整）。PHP 有一个内置函数来解析这个，[`json_decode`](http://www.php.net/manual/en/function.json-decode.php).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T19:41:45.583

为什么不使用 json_decode() ？这会返回一个数组，您可以对其进行计数或 foreach。

# c - malloc 的问题，C 中的内存泄漏

> ID：14914269
> 
> 赞同：0
> 
> 时间：2013-02-16T19:32:15.127
> 
> 标签：c, memory-leaks, linked-list, malloc

我很难弄清楚我的程序出了什么问题。我正在尝试通过在 createNode 函数中创建节点然后使用 addNode 将它们添加到列表的头部来创建链接列表。当我尝试创建节点时程序失败并且出现分段错误。

```
#include<stdlib.h>
#include<stdio.h>
#include<string.h>
#include "list.h"

struct listnode {
    int line;
   char *word;
   struct lnode *next;
};

struct listnode* createNode (char* word, int line) {
  int strlen1 = strlen(word)+1;
    struct lnode *node = malloc(sizeof(struct lnode));
    node->word = malloc(sizeof(char)*strlen1);
    strcpy(node->word,word);
    node->word[strlen1] = '\0';
    node->next = NULL;
    node->line = line;
    return node;
}

void addNode (struct listnode** head, struct listnode* node) {
    if ((*head)==NULL){
    head = &node;
    }
    else if((*head)->next!=NULL){
        struct lnode *temp = *head;
        node->next = *head;
    }else if(*head!=NULL&&(*head)->next==NULL){
        (*head->next) = node;
    }
    } 
```

通过 valgrind 运行程序会产生以下错误：

```
==14661== Command: ./testlist
==14661== 
==14661== Invalid write of size 1
==14661==    at 0x4006E3: createNode (in /u/data/u95/testprogs/testlist)
==14661==    by 0x40091C: main (in /u/data/u95/testprogs/testlist)
==14661==  Address 0x51dc0a6 is 0 bytes after a block of size 6 alloc'd
==14661==    at 0x4C2AF5D: malloc (in /usr/lib64/valgrind/vgpreload_memcheck-amd64  linux.so)
==14661==    by 0x4006AF: createNode (in /u/data/u95/testprogs/testlist)
==14661==    by 0x40091C: main (in /u/data/u95/testprogs/testlist)
==14661== 
==14661== Use of uninitialised value of size 8
==14661==    at 0x40071C: addNode (in /u/data/u95/testprogs/testlist)
==14661==    by 0x400933: main (in /u/data/u95/testprogs/testlist)
==14661==  Uninitialised value was created by a stack allocation
==14661==    at 0x4008E8: main (in /u/data/u95/testprogs/testlist)
==14661== 
==14661== Invalid read of size 8
==14661==    at 0x40071C: addNode (in /u/data/u95/testprogs/testlist)
==14661==    by 0x400933: main (in /u/data/u95/testprogs/testlist)
==14661==  Address 0x0 is not stack'd, malloc'd or (recently) free'd
==14661== 
==14661== 
==14661== Process terminating with default action of signal 11 (SIGSEGV)
==14661==  Access not within mapped region at address 0x0
==14661==    at 0x40071C: addNode (in /u/data/u95/testprogs/testlist)
==14661==    by 0x400933: main (in /u/data/u95/testprogs/testlist)
==14661==  If you believe this happened as a result of a stack
==14661==  overflow in your program's main thread (unlikely but
==14661==  possible), you can try to increase the size of the
==14661==  main thread stack using the --main-stacksize= flag.
==14661==  The main thread stack size used in this run was 8388608. 
```

我是 C 新手，我不确定为什么会抛出这些错误。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:35:38.197

我找不到 的定义`lnode`。是一样的`listnode`吗？

`addNode` 错误地设置了头部元素并且没有正确找到长列表的尾部。它应该是这样的

```
void addNode(struct listnode** head, struct listnode* node) {
    if ((*head)==NULL){
        *head = node;
    }
    else {
        struct listnode* tail = *head;
        while (tail->next != NULL) {
            tail = tail->next;
        }
        tail->next = node;
    }
} 
```

您缺少`*head`一个空列表的分配。设置的值`head`改变了本地指针而不是调用者的指针。对于更长的列表，您需要遍历所有成员以找到尾部。

这可能会解决您的`Use of uninitialised value of size 8`错误。如果没有，您需要向我们展示调用`addNode`.

`createNode`可以简化`word`to的分配/初始化

```
node->word = malloc(strlen(word)+1);
strcpy(node->word,word); 
```

您不需要设置空终止符 -`strcpy`将为您复制它。而且，正如 William Pursell 所指出的，这实际上是一个重要的变化，因为它避免了你在字符串末尾之外的书写。这将解决您的`Invalid write of size 1`错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T19:42:15.083

以下保证是错误的：

```
node->word = malloc(sizeof(char)*strlen1);
...
node->word[strlen1] = '\0'; 
```

您为 word 分配 strlen1 个字节，因此您可能的意思是：

```
node->word[strlen1 - 1] = '\0'; 
```

请注意，您甚至不需要写入空字节，因为`strcpy`它会为您完成。目前尚不清楚代码中还有哪些其他错误，并且在您修复此错误之前不值得一看。

# robotics - Pioneer 3d声纳传感器型号参数

> ID：14914272
> 
> 赞同：1
> 
> 时间：2013-02-16T19:32:23.163
> 
> 标签：robotics, mobile-robots

有人在 Pioneer 3dx 机器人中使用过声纳吗？

我想知道**声纳传感器模型参数**，效果很好。

我搜索并从 ros 获得了激光模型参数，但我没有得到声纳 :(

# ruby-on-rails - 设计 2.2.3 始终在登录前显示已登录通知

> ID：14914275
> 
> 赞同：3
> 
> 时间：2013-02-16T19:32:32.190
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, devise

由于rails安全问题升级后设计2.2.3，登录前总是显示登录通知消息，当我尝试登录时，它返回

```
Started POST "/users/sign_in" for 127.0.0.1 at 2013-02-17 00:55:34 +0530
Processing by Devise::SessionsController#create as HTML
Parameters: {"utf8"=>"✓", "authenticity_token"=>"Uri7L+RS+l3Nwjln1cBLfwxfMWEdEYz3gWEHyXpbRPc=", "user"=>{"email"=>"abcdedf@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
Completed 401 Unauthorized in 
```

导轨版本：3.1.x

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:30:12.013

这种奇怪的行为是由于控制器动作缓存而出现的，在 environment/production.rb 禁用它解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:59:07.333

试试这个

在 config/initializers/devise.rb

默认为真。

```
config.http_authenticatable_on_xhr = false 
```

# android - 根据用户选择设置图像？

> ID：14914277
> 
> 赞同：0
> 
> 时间：2013-02-16T19:32:43.693
> 
> 标签：android

我有一个活动，用户可以选择他们的角色。我在屏幕上有三个图像按钮，当用户单击他们想要的角色时，我希望游戏加载另一个活动，然后只显示他们在前一个屏幕中选择的角色的图像。基本上这只是我以后要做的事情的先驱。我在这个网站上找到了一些关于如何做到这一点的例子，但我还没有完全解决。

这就是我在角色选择活动中所拥有的：

```
Button archerButton = (Button) findViewById(R.id.Button_Archer);
archerButton.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        Intent intent = new Intent(SelectCharacterActivity.this, LevelOneActivity.class);
        intent.putExtra("@drawable/archer", pathToImage);
        startActivity(intent);
        finish();
        }
    }); 
```

pathToImage 行抛出错误。我到底应该在这里放什么？

应该只显示所选图像的 LevelOne 活动具有：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    setContentView(R.layout.level_one);

    String path = getIntent().getStringExtra("imagePath");
    Drawable image = Drawable.createFromPath(path);
    Character_Chosen.setImageDrawable(image);
    } 
```

我对这部分也有点困惑。Character_Chosen 条目是应包含所选图像的图像视图的名称。

我也对这行代码感到困惑：

```
String path = getIntent().getStringExtra("imagePath"); 
```

这是否意味着我每次都必须手动输入图像路径？如果他们选择不同的图像怎么办？

有没有人有一个实际工作示例的链接？当我是一个新手并且不知道什么需要留下，什么需要去的时候，伪代码对我的帮助并不大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:41:06.477

我会采取另一种方法，而不是将路径传递给您要显示图像（或说头像）的每个活动。
我会将它保存在全局应用程序对象中（通过扩展应用程序）或者加载到内存中的位图或图像路径，然后在一个地方访问或更改它并在所有活动中访问该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:01:12.890

我通过采用不同的方法使其运行。

MainActivity.java

我所做的是在意图中传递 R.drawable 引用，而不是使用字符串路径。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    btnArcher = (Button)findViewById(R.id.button_archer);

    btnArcher.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Intent intent = new Intent(MainActivity.this,LevelOne.class);
            intent.putExtra("archer_drawable", R.drawable.archer);
            startActivity(intent);
        }
     });

} 
```

在 levelOne.java 上，我使用我在 MainActivity.java 中指定的名称使用 getIntExtra 来获取弓箭手图像的 R.drawable 资源引用（您可以指定任何您想要的名称）。最后使用从 getIntExtra 获得的整数值，并通过调用 setImageResource(int resId) 方法在图像视图上使用它。

```
ImageView img;
int drwResource;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.level_one);

    //find the ImageView fron level_one.xml
    img = (ImageView)findViewById(R.id.character_image);

    drwResource = getIntent().getIntExtra("archer_drawable", -1);   
    img.setImageResource(drwResource);

} 
```

level_one.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <ImageView
        android:id="@+id/character_image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true" />
</RelativeLayout> 
```

我希望这有帮助。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T19:54:31.020

首先将资源转换为id

```
Button archerButton = (Button) findViewById(R.id.Button_Archer);
archerButton.setOnClickListener(new View.OnClickListener() {
   public void onClick(View v) {

    int id =getResources().getIdentifier("imagename", "drawable", getPackageName());  

    Intent intent = new Intent(SelectCharacterActivity.this, LevelOneActivity.class);
    intent.putExtra("image_id", id);
    startActivity(intent);
    finish();
    }
}); 
```

LevelOne.java

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
setContentView(R.layout.level_one);

int imageId=getIntent().getIntExtra("image_id", 0);
Character_Chosen.setImageResource(imageId)
} 
```

可以对所有剩余的按钮执行相同的方法。

快乐编码:)

# apache - 如何使用 apache httpd 服务器启用多个域和/或子域

> ID：14914279
> 
> 赞同：0
> 
> 时间：2013-02-16T19:32:45.957
> 
> 标签：apache, vhosts, multiple-domains

我正在尝试在我的环境开发中启用多个域，但没有按照我在下面尝试的方式成功，此时我错了吗？

**我安装了 httpd 并将 httpd.conf 中的 DocumentRoot 更改为：**

```
C:/Webserver/www 
```

***我将 Windows 主机文件更改为（斜体想要访问）：**
如果我切换到*127.0.0.1 api.rotadorock*地址解析为 www/，但右边是 www/rotadorock/api。

```
127.0.0.1                       localhost
127.0.0.1                       webserver
127.0.0.1/rotadorock/ecommerce  rotadorock
127.0.0.1/rotadorock/api        api.rotadorock
127.0.0.1/rotadorock/ecommerce  ecommerce.rotadorock
127.0.0.1/rotadorock/mobile     mobile.rotadorock
127.0.0.1/rotadorock/sistema    sistema.rotadorock
127.0.0.1/rotadorock/social     social.rotadorock 
```

# *更新（Windows主机文件）

我删除了上面提到的主机文件更改，因为正如@Volker Birk 所说，没有必要。但即便如此，仍然无法按需访问（api.rotadorock/ 或 localhost/api.rotadorock/ 并且应该指向*C:/Webserver/www/rotadorock/api*）。有什么问题？

**最后将 httpd-vhost.conf 更改为：**

```
NameVirtualHost webserver:80

<Directory "C:/Webserver/www">
    Options All
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory>

<VirtualHost *:80>
    ServerName localhost
    DocumentRoot "c:/Webserver/www"
    ServerAlias localhost
    ErrorLog "logs/httpd-error.log"
    CustomLog "logs/httpd-access.log" common
</VirtualHost>

<VirtualHost *:80>
    ServerName webserver
    DocumentRoot "c:/Webserver/www"
    ServerAlias webserver
    ErrorLog "logs/httpd-error.log"
    CustomLog "logs/httpd-access.log" common
</VirtualHost>

<VirtualHost rotadorock:80>
    ServerName rotadorock
    DocumentRoot "c:/Webserver/www/rotadorock/ecommerce"
    ServerAlias rotadorock
    ErrorLog "logs/httpd-error.log"
    CustomLog "logs/httpd-access.log" common
</VirtualHost>

<VirtualHost api.rotadorock:80>
    ServerName api.rotadorock
    DocumentRoot "c:/Webserver/www/rotadorock/api"
    ServerAlias api.rotadorock
    ErrorLog "logs/httpd-error.log"
    CustomLog "logs/httpd-access.log" common
</VirtualHost>

<VirtualHost ecommerce.rotadorock:80>
    ServerName ecommerce.rotadorock
    DocumentRoot "c:/Webserver/www/rotadorock/ecommerce"
    ServerAlias ecommerce.rotadorock
    ErrorLog "logs/httpd-error.log"
    CustomLog "logs/httpd-access.log" common
</VirtualHost>

<VirtualHost mobile.rotadorock:80>
    ServerName mobile.rotadorock
    DocumentRoot "c:/Webserver/www/rotadorock/mobile"
    ServerAlias mobile.rotadorock
    ErrorLog "logs/httpd-error.log"
    CustomLog "logs/httpd-access.log" common
</VirtualHost>

<VirtualHost sistema.rotadorock:80>
    ServerName sistema.rotadorock
    DocumentRoot "c:/Webserver/www/rotadorock/sistema"
    ServerAlias sistema.rotadorock
    ErrorLog "logs/httpd-error.log"
    CustomLog "logs/httpd-access.log" common
</VirtualHost>

<VirtualHost social.rotadorock:80>
    ServerName social.rotadorock
    DocumentRoot "c:/Webserver/www/rotadorock/social"
    ServerAlias social.rotadorock
    ErrorLog "logs/httpd-error.log"
    CustomLog "logs/httpd-access.log" common
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:05:13.763

您不需要主机文件。查看文档：

[http://httpd.apache.org/docs/2.2/en/vhosts/name-based.html](http://httpd.apache.org/docs/2.2/en/vhosts/name-based.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T22:23:48.270

终于解决了问题。我可以一起使用 Windows 主机文件和 httpd-vhosts.conf httpd。

让我举一个例子来说明如何使多个子域在本地访问。在要添加的 Windows 主机文件上，对于每个域和子域，您需要这样的内容：

```
127.0.0.1    api.rotadorock #my subdomain
127.0.0.1    rotadorock #my domain 
```

然后是 httpd-vhosts apache httpd：

```
# Accessing the API
<VirtualHost 127.0.0.1>
    DocumentRoot "C:/Webserver/www/rotadorock/api"
    ServerName api.rotadorock
    ServerAlias ​​api.rotadorock

    <Directory "C:/Webserver/www/rotadorock/api">
        All Options Includes Indexes
    </ Directory>
</VirtualHost>

# Accessing the domain
<VirtualHost 127.0.0.1>
    DocumentRoot "C:/Webserver/www/rotadorock/"
    ServerName rotadorock
    ServerAlias ​​*.rotadorock

    <Directory "C:/Webserver/www/rotadorock/">
        All Options Includes Indexes
    </Directory>
</VirtualHost> 
```

然后这样我就可以在本地访问 api.rotadorock/ 和 rotadorock/ 了。我尝试了所有没有主机文件的方法。但必须使用它。如果有人可以向我解释它应该如何做，那么它不需要使用主机，我将不胜感激。

# javascript - 将 contenteditable 和覆盖换行符设置为 而不是 在元素末尾不起作用

> ID：14914284
> 
> 赞同：3
> 
> 时间：2013-02-16T19:33:36.317
> 
> 标签：javascript, jquery, html, contenteditable

我在**[jsFiddle.net](http://jsfiddle.net/et4Rk/)**中做了一个简单的脚本来显示我的问题。

我尝试使用以下脚本将`contenteditable=true`元素中的换行符从默认值覆盖`<div>`为 a ：`<br />`

```
$(".editContents").on("keydown","[contenteditable=true]",function(e) {
    if(e.which===13) {
        lineBreak = "<br />";
        document.execCommand("insertHTML",false,lineBreak);
        return false;
    }
}); 
```

**如果您`enter`在文本内按**，它的工作原理就像它应该的那样 -****但是一旦**您尝试在段落末尾换行，什么都不会发生。**

 **不幸的是，我不知道它有什么问题。热烈欢迎任何帮助:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:14:18.930

它实际上正在工作并`<br />`在 的末尾插入 a ，但元素`<p>`末尾的空格被截断。`<p>`您可以通过在段落末尾按 enter 后检查元素来看到这一点。问题是，在 , 的末尾`<p>`只`execCommand()`允许插入一个。它似乎不是插入，而是替换。

如果您添加另一个字符`'<br />'`并插入它`'<br /> '`（`>`在`<p>`.

您可能必须检查它是否是最后一个字符并使用`insertAdjacentHTML()`with`beforeEnd`代替。**

# java - 使用 Eclipse ADT 中的模板 SettingsActivity 切换到平板电脑支持和 Fragment

> ID：14914291
> 
> 赞同：0
> 
> 时间：2013-02-16T19:34:05.033
> 
> 标签：java, android

我从 Eclipse 和 ADT 的默认模板 SettingsActivity 生成了以下代码。我觉得太复杂了。我自己也添加了一些片段。如何改进结构？

1.  目前活动监听器和片段监听器 - >更好的方式？

2.  摆脱静态的 Preference proxyEmail = null; -> 怎么样？静态的好吗？

3.  如何在 onPreferenceChange() 方法（第 123 行）中调用/使用 findPreference(getText(R.string.key_proxy_email))？

4.  重构想法？

    ```
    package com.xyz.abc;

    import java.util.List;

    import android.annotation.TargetApi;
    import android.content.Context;
    import android.content.SharedPreferences;
    import android.content.SharedPreferences.OnSharedPreferenceChangeListener;
    import android.content.res.Configuration;
    import android.os.Build;
    import android.os.Bundle;
    import android.preference.CheckBoxPreference;
    import android.preference.ListPreference;
    import android.preference.Preference;
    import android.preference.PreferenceActivity;
    import android.preference.PreferenceCategory;
    import android.preference.PreferenceFragment;
    import android.preference.PreferenceManager;
    import android.widget.Toast;

    public class SettingsActivity extends PreferenceActivity implements OnSharedPreferenceChangeListener {

        private static final boolean ALWAYS_SIMPLE_PREFS = false;

        @Override
        protected void onPostCreate(Bundle savedInstanceState) {
            super.onPostCreate(savedInstanceState);

            setupSimplePreferencesScreen();

            // TODO Not used at the moment
            //final SharedPreferences sp = new SecureSharedPreferences(this, this.getSharedPreferences(MY_PREFS_FILE_NAME, Context.MODE_PRIVATE) );

            SharedPreferences settings = getSharedPreferences(Global.PREFERENCES, 0);
            boolean sent = settings.getBoolean(Global.PREF_SETTING_SENT, false);
            if (sent) {
                Toast.makeText(getApplicationContext(), Global.TOAST_MSG_SENT, Toast.LENGTH_LONG);
            } else {
                Toast.makeText(getApplicationContext(), Global.TOAST_MSG_ERROR, Toast.LENGTH_LONG);
            }

        }

        private void setupSimplePreferencesScreen() {
            if (!isSimplePreferences(this)) {
                return;
            }

            addPreferencesFromResource(R.xml.pref_dummy);   // Be able to display first title
            PreferenceCategory fakeHeader = new PreferenceCategory(this);       
            fakeHeader.setTitle(R.string.pref_header_settings);     
            getPreferenceScreen().addPreference(fakeHeader);
            addPreferencesFromResource(R.xml.pref_settings);

            fakeHeader = new PreferenceCategory(this);  
            fakeHeader.setTitle(R.string.pref_header_advanced);
            getPreferenceScreen().addPreference(fakeHeader);
            addPreferencesFromResource(R.xml.pref_advanced);

            fakeHeader = new PreferenceCategory(this);  
            fakeHeader.setTitle(R.string.pref_header_general);
            getPreferenceScreen().addPreference(fakeHeader);
            addPreferencesFromResource(R.xml.pref_general);

            SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
            sp.registerOnSharedPreferenceChangeListener(this);

            toggleProxyEmail(findPreference(getText(R.string.key_via)), findPreference(getText(R.string.key_proxy_email)));
        }

        /** {@inheritDoc} */
        @Override
        public boolean onIsMultiPane() {
            return isXLargeTablet(this) && !isSimplePreferences(this);
        }

        /**
         * Helper method to determine if the device has an extra-large screen. For example, 10" tablets are extra-large.
         */
        private static boolean isXLargeTablet(Context context) {
            return (context.getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) >= Configuration.SCREENLAYOUT_SIZE_XLARGE;
        }

        private static boolean isSimplePreferences(Context context) {
            return ALWAYS_SIMPLE_PREFS || Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB || !isXLargeTablet(context);
        }

        /** {@inheritDoc} */
        @Override
        @TargetApi(Build.VERSION_CODES.HONEYCOMB)
        public void onBuildHeaders(List<Header> target) {
            if (!isSimplePreferences(this)) {
                loadHeadersFromResource(R.xml.pref_headers, target);
            }
        }

        private static Preference.OnPreferenceChangeListener bindPrefSummaryToValueListener = new Preference.OnPreferenceChangeListener() {
            @Override
            public boolean onPreferenceChange(Preference preference, Object value) {
                String stringValue = value.toString();

                if (preference instanceof ListPreference) {
                    // For list preferences, look up the correct display value in the preference's 'entries' list.
                    ListPreference listPreference = (ListPreference) preference;
                    int index = listPreference.findIndexOfValue(stringValue);

                    // Set the summary to reflect the new value.
                    preference.setSummary(index >= 0 ? listPreference.getEntries()[index] : null);

                } else {
                    // For all other preferences, set the summary to the value's simple string representation.
                    preference.setSummary(stringValue);
                }
                return true;
            } 

        };

        private static Preference.OnPreferenceChangeListener bindPrefKeyToEditTextListener = new Preference.OnPreferenceChangeListener() {
            @Override
            public boolean onPreferenceChange(Preference preference, Object value) {    
                ((CheckBoxPreference) preference).setChecked((Boolean) value);
                toggleProxyEmail(preference, SettingsPreferenceFragment.proxyEmail);

                return true;
            }

        };

        private static void bindPreferenceSummaryToValue(Preference preference) {
            preference.setOnPreferenceChangeListener(bindPrefSummaryToValueListener);

            // Trigger the listener immediately with the preference's current value.
            bindPrefSummaryToValueListener.onPreferenceChange(preference, PreferenceManager.getDefaultSharedPreferences(preference.getContext()).getString(preference.getKey(), ""));
        }

        private static void bindPreferenceKeyToEditText(Preference preference) {
            preference.setOnPreferenceChangeListener(bindPrefKeyToEditTextListener);

            // Trigger the listener immediately with the preference's current value.
            bindPrefKeyToEditTextListener.onPreferenceChange(preference, PreferenceManager.getDefaultSharedPreferences(preference.getContext()).getBoolean(preference.getKey(), false));
        } 

        @TargetApi(Build.VERSION_CODES.HONEYCOMB)
        public static class SettingsPreferenceFragment extends PreferenceFragment {

            static Preference proxyEmail = null;

            @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                addPreferencesFromResource(R.xml.pref_settings);

                proxyEmail = findPreference(getText(R.string.key_proxy_email));
                toggleProxyEmail(findPreference(getText(R.string.key_via)), proxyEmail);

                bindPreferenceSummaryToValue(findPreference(getText(R.string.key_dest_email)));
                bindPreferenceKeyToEditText(findPreference(getText(R.string.key_via)));
                bindPreferenceSummaryToValue(findPreference(getText(R.string.key_proxy_email)));
                bindPreferenceSummaryToValue(findPreference(getText(R.string.key_pwd)));
                bindPreferenceSummaryToValue(findPreference(getText(R.string.key_provider)));
            } 
        }

        @TargetApi(Build.VERSION_CODES.HONEYCOMB)
        public static class AdvancedPreferenceFragment extends PreferenceFragment {
            @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                addPreferencesFromResource(R.xml.pref_advanced);
            }
        }

        @TargetApi(Build.VERSION_CODES.HONEYCOMB)
        public static class GeneralPreferenceFragment extends PreferenceFragment {
            @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                addPreferencesFromResource(R.xml.pref_general);

                bindPreferenceSummaryToValue(findPreference(getText(R.string.key_help)));
            }
        }

        private static void toggleProxyEmail(Preference prefKey, Preference prefValue) {
            if (prefKey instanceof CheckBoxPreference) {
                if(((CheckBoxPreference) prefKey).isChecked()) {
                    prefValue.setEnabled(true);
                } else {
                    prefValue.setEnabled(false);
                }
            }
        }

        @Override
        public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {    // Only called in a normal Activity
            if(key.equals(findPreference(getString(R.string.key_via)).getKey())) {
                toggleProxyEmail(findPreference(getText(R.string.key_via)), findPreference(getText(R.string.key_proxy_email)));
            }
        }

    } 
    ```

# javascript - JavaScript 关联数组访问返回“文字”数组原型代码

> ID：14914292
> 
> 赞同：0
> 
> 时间：2013-02-16T19:34:06.577
> 
> 标签：javascript, function, prototype

这是迄今为止我的学校项目的代码（使用*Ray Harris 的 Murach 的 JavaScript 和 DOM 脚本*）。这一章只是关于数组，不包括原型，但我想根据互联网教程和参考资料尝试一下：

```
 /*
Operation

    This application stores the last name, first name, and score for 
    one or more students and it calculates the average score for all of the scores
    that have been entered. When the user clicks on the Clear button, this 
    application clears the score data from this application. When the user clicks 
    on the Sort button, this application sorts the data in alphabetical order by 
    last name.

Specifications

    The program should use one or more arrays to store the data.
    Assume that the user will enter valid data.
*/
var $ = function (id) 
{ 
    return document.getElementById(id); 
}

/*
Array prototype object extension for averaging the contents

"Adding a method to the built-in Array object to extract the average 
of any numerical values stored in the array is therefore a useful 
addition to that object." http://javascript.about.com/library/blaravg.htm
*/
Array.prototype.average = function () 
{
    var avg = 0;
    var count = 0;
    for (var i = 0; i<this.length; i++) 
    {
       //never gets here:
        alert(i + ": " + this[i]);
        var e = +this[i];
        if(!e && this[i] !== 0 && this[i] !== '0') 
        {
            e--;
        }
        if (this[i] == e) 
        {
            avg += e;
            count++;
        }
    }   
    return avg / count;
}

var addScore = function ()
{
    studentScores[$('last_name').value + ', ' + $('first_name').value] = $('score').value;
    update();
}

var clearScore = function ()
{
    for (var i in studentScores)
    {
        studentScores[i] = '';
    }
    update();
}

var sortScore = function ()
{
    scores.sort();
    update();
}

var update = function ()
{
    var result = '';
    for (var i in studentScores)
    {
        result += (i + ': ' + studentScores[i] + '\n');
    }
    $('scores').value = result;
    $('average_score').value = studentScores.average().toFixed(1);
}

window.onload = function ()
{
    //a variable is initialized inside a function without var, it will have a global scope:
    studentScores = [];
    $('add_button').onclick = addScore;
    $('sort_button').onclick = sortScore;
    $('clear_button').onclick = clearScore;
    $('last_name').focus();
} 
```

当代码进入“update()”函数（“addScore()”函数的末尾）并访问数组时，它会将 Prototype 中的“literal”代码填充到文本区域中（并且无法在下一行）：

我没有足够的代表点来发布图像，但这是我的输出（Chrome JS 控制台中没有错误）：

```
lowe, doug: 82
average: function () 
{
    var avg = 0;
    var count = 0;
    for (var i = 0; i<this.length; i++) 
    {
        //never gets here:
        alert(i + ": " + this[i]);
        var e = +this[i];
        if(!e && this[i] !== 0 && this[i] !== '0') 
        {
            e--;
        }
        if (this[i] == e) 
        {
            avg += e;
            count++;
        }
    }   
    return avg / count;
} 
```

任何帮助表示赞赏（欢迎最佳实践或算法建议）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:48:58.993

这很简单：[不要使用`for…in`枚举来循环数组](https://stackoverflow.com/questions/500504/javascript-for-in-with-arrays)！你在你的`clearScore`和`update`函数中这样做。

`for (var prop in obj)`循环遍历所有 [enumerable] 属性，包括那些继承自`Array.prototype`（至少对于 Array 对象）的属性。`for (var i=0; i<array.length; i++)`循环不会有这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T20:09:43.520

改变这个：

```
studentScores = [] 
```

对此：

```
studentScores = {} 
```

...这样您就可以使用对象而不是数组。

您的`for`循环`average()`只是迭代数字索引而不是您创建的非数字键。

像其他方法一样将您的方法创建`average()`为独立函数，并传递`studentScores`给它以计算平均值，然后使用`for-in`而不是`for`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T19:54:32.877

您必须决定 studentScores 是一个数组（即，一个整数用于访问存储的数据）还是一个对象/关联数组（一个字符串用于设置/获取元素）。

如果您想使用学生的姓名作为键，您应该将 studentScores 声明为一个对象，并且您的“平均”方法必须添加到对象原型中（我不推荐）。

根据代码的当前状态，您偶然发现 Array 也是一个对象，并且可以像任何其他对象一样附加任意属性。您已经按名称添加了属性，但在您的平均方法中，您正在尝试访问基于数字的索引。但这不是您要添加的数据的存储位置。

```
> a = [];
[]
> a['foo'] = 'bar';
'bar'
> a.length
0
> a[3] = 0;
0
> a.length
4 
```

# javascript - 将页面 div 解析为数组 JavaScript

> ID：14914295
> 
> 赞同：0
> 
> 时间：2013-02-16T19:34:13.270
> 
> 标签：javascript, jquery

我在包含完美解析数据的在线页面中有一个 div。例如，一个名为“info”的 div 将包含：

```
region,sales,cost
America,12,5
Europe,32,6 
```

JavaScript/Jquery 中最优化（性能方面）的方式是什么：

1.  读取页面中的 div（抓取内容）
2.  通过 ',' 解析 div
3.  将其存储到二维数组中

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:46:44.590

我会怎么做是：

```
var data = []
   , text = /*select inner HTML of div*/

text.split('\n')
    .forEach(function (line) { 
      data.push(line.split(','))
    }) 
```

我是用 iPhone 做的，如果有一些错别字，请见谅。如果您的数据没有完全分成换行符，我会用逗号分割所有数据，然后循环遍历它，同时保持一个内部计数器每 3 个项目打勾，这将表明您已经解析了一个新的数据数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T19:51:39.557

```
//get string using ajax, JSONP, or whatever means you have
var str = "region,sales,cost\nAmerica,12,5\nEurope,32,6";

var lines = str.split("\n");
//first line is names of keys
var names = lines.shift().split(',');

var countries = [];

lines.forEach(function (line) {
    var obj = {};
    line.split(',').forEach(function (piece, idx) {
        //we know data is well-formed.  Name for each piece will exist
        obj[names[idx]] = piece;
    });
    countries.push(obj);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T20:15:38.583

尝试：

```
var divContent = $('div').html(); // replace 'div' for correct selector
var result = new Array();

var splitContent = divContent.split('\n'); // Split the content with new line caracter
// Get the index for initial lines
var indexes = splitContent[0].split(',');
// the initial value 1 is for ignore first line
for (var i = 1; i < splitContent.length; i++) { 
    result[i-1] = new Array();
    var items = splitContent[i].split(',');
    for (var j = 0; j < items.length; j++)  {
        result[i-1][indexes[j]] = items[j];
    }
} 
```

我测试过，这很有效。

Ps：请确保标签后没有其他断行，否则此代码不起作用。

# numpy - Pandas 时间戳不能很好地与 numpy 日期时间配合使用？

> ID：14914296
> 
> 赞同：2
> 
> 时间：2013-02-16T19:34:25.513
> 
> 标签：numpy, python-2.7, pandas

我刚刚开始使用 pandas 0.9，并且看到了 pandas 时间戳的意外行为。在使用日期时间设置索引后，时间索引似乎没有正确转换为其他任何内容。我可能没有正确使用它，所以请直截了当：

```
from pandas import *
import datetime

version.version
# 0.9.1

np.version.version
# 1.6.2

ndx = ['a','b','b']
date = [datetime.datetime(2013, 2, 16, 15, 0), datetime.datetime(2013, 2, 16, 11, 0),datetime.datetime(2013, 2, 16, 2, 0)]
vals = [1,2,3,]

df = DataFrame({'ndx':ndx,'date':date,'vals':vals})
df2=df.groupby(['ndx','date']).sum()

df2.index.get_level_values('date')
# array([1970-01-16 143:00:00, 1970-01-16 130:00:00, 1970-01-16 139:00:00], dtype=datetime64[ns])

df.set_index([ndx,date]).reset_index()['level_1'].unique() # fetch from index
# array([1970-01-16 143:00:00, 1970-01-16 139:00:00, 1970-01-16 130:00:00], dtype=datetime64[ns])

df.set_index([ndx,date]).reset_index()['date'].unique() # fetch from column
# array([2013-02-16 15:00:00, 2013-02-16 11:00:00, 2013-02-16 02:00:00], dtype=object) 
```

由于这些操作，我不会期望 1970 年有任何结果。想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T21:07:09.197

这是一个麻木的错误

见下文

[http://pandas.pydata.org/pandas-docs/stable/whatsnew.html#numpy-datetime64-dtype-and-1-6-dependency](http://pandas.pydata.org/pandas-docs/stable/whatsnew.html#numpy-datetime64-dtype-and-1-6-dependency)

[https://github.com/pydata/pandas/issues/2872](https://github.com/pydata/pandas/issues/2872)

# ruby-on-rails-3 - 让 facebook 用户首次在 Rails 中获得状态

> ID：14914298
> 
> 赞同：0
> 
> 时间：2013-02-16T19:34:31.537
> 
> 标签：ruby-on-rails-3, facebook, facebook-graph-api, facebook-fql

我试图在我的 rails 应用程序中获得 facebook 用户 First 状态。

我试过这个

```
SELECT status_id,time,message FROM status WHERE uid=me() AND source = 0 ORDER BY status_id ASC LIMIT 1 
```

但它并没有获得有史以来的第一个状态

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:12:02.437

```
 SELECT status_id,time,message FROM status WHERE uid=me() AND source = 0 ORDER BY time ASC LIMIT 1 
```

上面的查询效果很好。我只是将 status_id 替换为 time 以按时间对结果进行排序（Unix Timestamp where the minimum is early）

# c# - 使用 BinaryFormatter 序列化和反序列化对象图

> ID：14914302
> 
> 赞同：4
> 
> 时间：2013-02-16T19:35:26.087
> 
> 标签：c#, serialization, binaryformatter

我正在尝试将我的对象图序列化为字符串，然后将其从字符串中反序列化。如果我这样做，对象序列化就好了

```
using (var memStream = new System.IO.MemoryStream())
{
     mf.Serialize(memStream, this);
     memStream.Seek(0, 0);

     Search s;
     using (var memStrClone = new System.IO.MemoryStream())
     {
          memStream.CopyTo(memStrClone);
          memStrClone.Seek(0, 0);
          s = mf.Deserialize(memStrClone) as Search;
     }
} 
```

上面的代码有效，但序列化为字符串并尝试像这样反序列化相同的字符串

```
Search s;
string xml = ToString<Search>(this);
s = FromString<Search>(xml);

public static TType FromString<TType>(string input)
{
     var byteArray = Encoding.ASCII.GetBytes(input);
     using (var stream = new MemoryStream(byteArray))
     {
          var bf = new BinaryFormatter();
          return (TType)bf.Deserialize(stream);
     }
}

public static string ToString<TType>(TType data)
{
     using (var ms = new MemoryStream())
     {
          var bf = new BinaryFormatter();
          bf.Serialize(ms, data);
          return Encoding.ASCII.GetString(ms.GetBuffer());
     }
} 
```

抛出异常

> *对象类型“1936026741 Core.Sebring.BusinessObjects.Search.Search”没有程序集 ID。*

任何帮助是极大的赞赏。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T21:04:04.753

这里有一些代码可以做你想做的事情（我认为）——但我不得不问——你为什么要序列化成这样的字符串？

如果类足够简单，可以序列化为字符串，请使用更容易处理的 XML 序列化器；如果你想将它序列化到磁盘，二进制将它写到一个文件中，如果它很复杂并且你正在序列化它以传输 - 考虑使用类似 protobuf-net 的东西。

我认为您的问题的症结在于您正在尝试使用 ASCII 编码 - 我正在使用 Base64 编码。

无论如何 - 来了（我刚刚在你的搜索课上猜到了！）

```
 class Program
{
    [Serializable]
    public class Search
    {
        public Guid ID { get; private set; }

        public Search() { }

        public Search(Guid id)
        {
            ID = id;
        }

        public override string ToString()
        {
            return ID.ToString();
        }
    }

    static void Main(string[] args)
    {
        Search search = new Search(Guid.NewGuid());
        Console.WriteLine(search);
        string serialized = SerializeTest.SerializeToString(search);
        Search rehydrated = SerializeTest.DeSerializeFromString<Search>(serialized);
        Console.WriteLine(rehydrated);

        Console.ReadLine();
    }
}

public class SerializeTest
{
    public static Encoding _Encoding = Encoding.Unicode;

    public static string SerializeToString(object obj)
    {
        byte[] byteArray = BinarySerializeObject(obj);
        return Convert.ToBase64String(byteArray);
    }

    public static T DeSerializeFromString<T>(string input)
    {
        byte[] byteArray = Convert.FromBase64String(input);
        return BinaryDeserializeObject<T>(byteArray);
    }

    /// <summary>
    /// Takes a byte array and deserializes it back to its type of <see cref="T"/>
    /// </summary>
    /// <typeparam name="T">The Type to deserialize to</typeparam>
    /// <param name="serializedType">The object as a byte array</param>
    /// <returns>The deserialized type</returns>
    public static T BinaryDeserializeObject<T>(byte[] serializedType)
    {
        if (serializedType == null)
            throw new ArgumentNullException("serializedType");

        if (serializedType.Length.Equals(0))
            throw new ArgumentException("serializedType");

        T deserializedObject;

        using (MemoryStream memoryStream = new MemoryStream(serializedType))
        {
            BinaryFormatter deserializer = new BinaryFormatter();
            deserializedObject = (T)deserializer.Deserialize(memoryStream);
        }

        return deserializedObject;
    }

    /// <summary>
    /// Takes an object and serializes it into a byte array
    /// </summary>
    /// <param name="objectToSerialize">The object to serialize</param>
    /// <returns>The object as a <see cref="byte"/> array</returns>
    public static byte[] BinarySerializeObject(object objectToSerialize)
    {
        if (objectToSerialize == null)
            throw new ArgumentNullException("objectToSerialize");

        byte[] serializedObject;

        using (MemoryStream stream = new MemoryStream())
        {
            BinaryFormatter formatter = new BinaryFormatter();
            formatter.Serialize(stream, objectToSerialize);
            serializedObject = stream.ToArray();
        }

        return serializedObject;
    }

} 
```

高温高压

# java - 用于对象包装的代码生成工具

> ID：14914303
> 
> 赞同：1
> 
> 时间：2013-02-16T19:35:26.650
> 
> 标签：java, code-generation

想象一下，您必须包装一个`java.sql.ResultSet`. 您无法扩展它，因为您不知道`ResultSet`实际实例化的具体类是什么。您可以只聚合实例、实现`ResultSet`和覆盖所有方法。

现在假设您只想更改*一种*方法的行为。所有其他被覆盖的方法只是一个像这样的长样板：

```
public void foo() {
    wrapped.foo();
} 
```

您是否知道任何可以为我执行这项工作的自动代码生成工具（独立的或包含在常见 IDE 中）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:38:59.090

在**Eclipse**中，创建一个以 ResultSet 作为成员的类，将光标放在该成员上，然后选择菜单“Source > Generate delegate Methods”。

![在此处输入图像描述](../Images/21381b170709cfe7f086ae1f6c2e35db.png)

检查您要为其生成委托的方法并完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T19:38:47.557

任何体面的 IDE 都应该能够做到这一点。例如在 IntelliJ Idea 中：代码 -> 生成 -> 委托方法

如果类的成员字段具有类实现/扩展的类型，则此选项可用。

# mysql - 使用“group by”获得预期结果的正确方法是什么？

> ID：14914304
> 
> 赞同：1
> 
> 时间：2013-02-16T19:35:28.797
> 
> 标签：mysql, group-by

这是我正在查询的表的结构：

```
------------------------------------------------------------------
| UserId  | ExperimentId | TaskId | TaskName | Errors | FileKey  |
-----------------------------------------------------------------
| 12      | 10           | 8      | Jumping   | 9      | 1200298 |
-----------------------------------------------------------------
| 12      | 10           | 8      | Jumping   | 7      | 1200297 |
-----------------------------------------------------------------
| 12      | 10           | 8      | Jumping   | 6      | 1200296 |
-----------------------------------------------------------------
| 12      | 10           | 8      | Jumping   | 8      | 1200295 |
-----------------------------------------------------------------
| 12      | 10           | 6      | Writing   | 9      | 1200294 |
-----------------------------------------------------------------
| 12      | 10           | 6      | Writing   | 2      | 1200293 |
-----------------------------------------------------------------
| 12      | 10           | 6      | Writing   | 0      | 1200292 |
-----------------------------------------------------------------
| 12      | 10           | 8      | Pointing  | 9      | 1200291 |
-----------------------------------------------------------------
| 12      | 10           | 8      | Pointing  | 8      | 1200290 |
-----------------------------------------------------------------
| 12      | 10           | 8      | Pointing  | 7      | 1200289 |
------------------------------------------------------------------ 
```

我正在使用的查询：

```
select
    UserId,
    TaskName,
    sum(Errors) as Errors
from
    UserTaskStats
where
    TaskName = TaskName
and
    UserId = UserId
group by
    Errors, TaskName
order by
    UserId asc; 
```

我得到的结果示例（忽略`Errors`列中值的准确性）：

```
--------------------------------
| UserId  | TaskName  | Errors |
--------------------------------
| 12      | Jumping   | 3      |
--------------------------------
| 12      | Jumping   | 3      |
--------------------------------
| 12      | Writing   | 8      |
--------------------------------
| 12      | Jumping   | 8      |
--------------------------------
| 12      | Writing   | 6      |
--------------------------------
| 12      | Writing   | 6      |
--------------------------------
| 12      | Pointing  | 6      |
--------------------------------
| 12      | Pointing  | 8      |
--------------------------------
| 12      | Jumping   | 8      |
--------------------------------
| 12      | Writing   | 8      |
-------------------------------- 
```

我想要的结果：

```
---------------------------------
| UserId  | TaskName  | Errors  |
--------------------------------
| 12      | Jumping   | 30      |
--------------------------------
| 12      | Writing   | 11      |
--------------------------------
| 12      | Pointing  | 24      |
--------------------------------- 
```

我没有`group by`正确使用吗？有没有其他方法可以得到想要的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:37:30.803

你非常亲近。

你希望每个`UserId, TaskName`组都有一行，所以只需要`group by UserId, TaskName`

```
SELECT UserId,
       TaskName,
       sum(Errors) AS Errors
FROM   UserTaskStats
GROUP  BY UserId,
          TaskName
ORDER  BY UserId ASC; 
```

[SQL小提琴](http://www.sqlfiddle.com/#!2/3b6a5/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:44:16.117

这是一个简单的方法

```
select
  user_id,
  task_name,
  sum(errors)
from test
group by user_id , task_name 
```

## [演示](http://www.sqlfiddle.com/#!2/28a91/2)

# java - 如何使用 GSON 反序列化

> ID：14914305
> 
> 赞同：0
> 
> 时间：2013-02-16T19:35:36.067
> 
> 标签：java, json, gson

```
{
    "response": {
        "version": "0.1",
        "termsofService": "http://www.wunderground.com/weather/api/d/terms.html",
        "features": {
            "geolookup": 1,
            "conditions": 1,
            "forecast": 1
        }
    },
    "location": {
        "type": "INTLCITY",
        "country": "IN",
        "country_iso3166": "IN",
        "country_name": "India",
        "state": "",
        "city": "Mumbai",
        "tz_short": "IST",
        "tz_long": "Asia/Kolkata",
        "lat": "19.12000084",
        "lon": "72.84999847",
        "zip": "00000",
        "magic": "1",
        "wmo": "43003",
        "l": "/q/zmw:00000.1.43003",
        "requesturl": "global/stations/43003.html",
        "wuiurl": "http://www.wunderground.com/global/stations/43003.html",
        "nearby_weather_stations": {
            "airport": {
                "station": [
                    {
                        "city": "Mumbai / Santacruz",
                        "state": "",
                        "country": "India",
                        "icao": "VABB",
                        "lat": "19.11666679",
                        "lon": "72.84999847"
                    },
                    {
                        "city": "Mumbai",
                        "state": "",
                        "country": "IN",
                        "icao": "VABB",
                        "lat": "19.12000084",
                        "lon": "72.84999847"
                    }
                ]
            },
            "pws": {
                "station": []
            }
        }
    },
    "current_observation": {
        "image": {
            "url": "http://icons-ak.wxug.com/graphics/wu2/logo_130x80.png",
            "title": "Weather Underground",
            "link": "http://www.wunderground.com"
        },
        "display_location": {
            "full": "Mumbai, India",
            "city": "Mumbai",
            "state": "",
            "state_name": "India",
            "country": "IN",
            "country_iso3166": "IN",
            "zip": "00000",
            "latitude": "19.12000084",
            "longitude": "72.84999847",
            "elevation": "14.00000000"
        },
        "observation_location": {
            "full": "Mumbai, ",
            "city": "Mumbai",
            "state": "",
            "country": "IN",
            "country_iso3166": "IN",
            "latitude": "19.12000084",
            "longitude": "72.84999847",
            "elevation": "46 ft"
        },
        "estimated": {},
        "station_id": "VABB",
        "observation_time": "Last Updated on February 16, 11:40 PM IST",
        "observation_time_rfc822": "Sat, 16 Feb 2013 23:40:00 +0530",
        "observation_epoch": "1361038200",
        "local_time_rfc822": "Sun, 17 Feb 2013 00:16:13 +0530",
        "local_epoch": "1361040373",
        "local_tz_short": "IST",
        "local_tz_long": "Asia/Kolkata",
        "local_tz_offset": "+0530",
        "weather": "Smoke",
        "temperature_string": "73 F (23 C)",
        "temp_f": 73,
        "temp_c": 23,
        "relative_humidity": "50%",
        "wind_string": "From the WNW at 5 MPH",
        "wind_dir": "WNW",
        "wind_degrees": 300,
        "wind_mph": 5,
        "wind_gust_mph": 0,
        "wind_kph": 7,
        "wind_gust_kph": 0,
        "pressure_mb": "1011",
        "pressure_in": "29.86",
        "pressure_trend": "0",
        "dewpoint_string": "54 F (12 C)",
        "dewpoint_f": 54,
        "dewpoint_c": 12,
        "heat_index_string": "NA",
        "heat_index_f": "NA",
        "heat_index_c": "NA",
        "windchill_string": "NA",
        "windchill_f": "NA",
        "windchill_c": "NA",
        "feelslike_string": "73 F (23 C)",
        "feelslike_f": "73",
        "feelslike_c": "23",
        "visibility_mi": "2.5",
        "visibility_km": "4.0",
        "solarradiation": "",
        "UV": "-1",
        "precip_1hr_string": "-9999.00 in (-9999.00 mm)",
        "precip_1hr_in": "-9999.00",
        "precip_1hr_metric": "-9999.00",
        "precip_today_string": "0.00 in (0.0 mm)",
        "precip_today_in": "0.00",
        "precip_today_metric": "0.0",
        "icon": "hazy",
        "icon_url": "http://icons-ak.wxug.com/i/c/k/nt_hazy.gif",
        "forecast_url": "http://www.wunderground.com/global/stations/43003.html",
        "history_url": "http://www.wunderground.com/history/airport/VABB/2013/2/16/DailyHistory.html",
        "ob_url": "http://www.wunderground.com/cgi-bin/findweather/getForecast?query=19.12000084,72.84999847"
    },
    "forecast": {
        "txt_forecast": {
            "date": "5:30 AM IST",
            "forecastday": [
                {
                    "period": 0,
                    "icon": "clear",
                    "icon_url": "http://icons-ak.wxug.com/i/c/k/clear.gif",
                    "title": "Sunday",
                    "fcttext": "Clear. High of 82F. Winds from the NE at 5 to 15 mph shifting to the WNW in the afternoon.",
                    "fcttext_metric": "Clear. High of 28C. Winds from the NE at 5 to 20 km/h shifting to the WNW in the afternoon.",
                    "pop": "0"
                },
                {
                    "period": 1,
                    "icon": "clear",
                    "icon_url": "http://icons-ak.wxug.com/i/c/k/clear.gif",
                    "title": "Sunday Night",
                    "fcttext": "Partly cloudy. Low of 66F. Winds from the North at 5 to 10 mph.",
                    "fcttext_metric": "Partly cloudy. Low of 19C. Winds from the North at 10 to 15 km/h.",
                    "pop": "0"
                },
                {
                    "period": 2,
                    "icon": "partlycloudy",
                    "icon_url": "http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",
                    "title": "Monday",
                    "fcttext": "Clear. High of 88F. Winds from the NNE at 5 to 15 mph shifting to the WNW in the afternoon.",
                    "fcttext_metric": "Clear. High of 31C. Breezy. Winds from the NNE at 10 to 20 km/h shifting to the WNW in the afternoon.",
                    "pop": "0"
                },
                {
                    "period": 3,
                    "icon": "clear",
                    "icon_url": "http://icons-ak.wxug.com/i/c/k/clear.gif",
                    "title": "Monday Night",
                    "fcttext": "Clear. Low of 64F. Winds from the NNE at 5 to 10 mph.",
                    "fcttext_metric": "Clear. Low of 18C. Winds from the NNE at 10 to 15 km/h.",
                    "pop": "0"
                },
                {
                    "period": 4,
                    "icon": "clear",
                    "icon_url": "http://icons-ak.wxug.com/i/c/k/clear.gif",
                    "title": "Tuesday",
                    "fcttext": "Clear. High of 90F. Winds from the NNE at 5 to 10 mph shifting to the WNW in the afternoon.",
                    "fcttext_metric": "Clear. High of 32C. Winds from the NNE at 5 to 20 km/h shifting to the WNW in the afternoon.",
                    "pop": "0"
                },
                {
                    "period": 5,
                    "icon": "clear",
                    "icon_url": "http://icons-ak.wxug.com/i/c/k/clear.gif",
                    "title": "Tuesday Night",
                    "fcttext": "Clear. Low of 64F. Winds from the North at 5 to 10 mph.",
                    "fcttext_metric": "Clear. Low of 18C. Winds from the North at 5 to 15 km/h.",
                    "pop": "0"
                },
                {
                    "period": 6,
                    "icon": "clear",
                    "icon_url": "http://icons-ak.wxug.com/i/c/k/clear.gif",
                    "title": "Wednesday",
                    "fcttext": "Clear. High of 90F. Winds from the North at 5 to 10 mph shifting to the WNW in the afternoon.",
                    "fcttext_metric": "Clear. High of 32C. Winds from the North at 5 to 20 km/h shifting to the WNW in the afternoon.",
                    "pop": "0"
                },
                {
                    "period": 7,
                    "icon": "clear",
                    "icon_url": "http://icons-ak.wxug.com/i/c/k/clear.gif",
                    "title": "Wednesday Night",
                    "fcttext": "Clear. Low of 70F. Winds from the North at 5 to 10 mph.",
                    "fcttext_metric": "Clear. Low of 21C. Winds from the North at 10 to 15 km/h.",
                    "pop": "0"
                }
            ]
        },
        "simpleforecast": {
            "forecastday": [
                {
                    "date": {
                        "epoch": "1361124000",
                        "pretty": "11:30 PM IST on February 17, 2013",
                        "day": 17,
                        "month": 2,
                        "year": 2013,
                        "yday": 47,
                        "hour": 23,
                        "min": "30",
                        "sec": 0,
                        "isdst": "0",
                        "monthname": "February",
                        "weekday_short": "Sun",
                        "weekday": "Sunday",
                        "ampm": "PM",
                        "tz_short": "IST",
                        "tz_long": "Asia/Kolkata"
                    },
                    "period": 1,
                    "high": {
                        "fahrenheit": "82",
                        "celsius": "28"
                    },
                    "low": {
                        "fahrenheit": "66",
                        "celsius": "19"
                    },
                    "conditions": "Clear",
                    "icon": "clear",
                    "icon_url": "http://icons-ak.wxug.com/i/c/k/clear.gif",
                    "skyicon": "sunny",
                    "pop": 0,
                    "qpf_allday": {
                        "in": 0,
                        "mm": 0
                    },
                    "qpf_day": {
                        "in": 0,
                        "mm": 0
                    },
                    "qpf_night": {
                        "in": 0,
                        "mm": 0
                    },
                    "snow_allday": {
                        "in": 0,
                        "cm": 0
                    },
                    "snow_day": {
                        "in": 0,
                        "cm": 0
                    },
                    "snow_night": {
                        "in": 0,
                        "cm": 0
                    },
                    "maxwind": {
                        "mph": 12,
                        "kph": 19,
                        "dir": "WNW",
                        "degrees": 300
                    },
                    "avewind": {
                        "mph": 8,
                        "kph": 13,
                        "dir": "SW",
                        "degrees": 232
                    },
                    "avehumidity": 54,
                    "maxhumidity": 66,
                    "minhumidity": 38
                },
                {
                    "date": {
                        "epoch": "1361210400",
                        "pretty": "11:30 PM IST on February 18, 2013",
                        "day": 18,
                        "month": 2,
                        "year": 2013,
                        "yday": 48,
                        "hour": 23,
                        "min": "30",
                        "sec": 0,
                        "isdst": "0",
                        "monthname": "February",
                        "weekday_short": "Mon",
                        "weekday": "Monday",
                        "ampm": "PM",
                        "tz_short": "IST",
                        "tz_long": "Asia/Kolkata"
                    },
                    "period": 2,
                    "high": {
                        "fahrenheit": "88",
                        "celsius": "31"
                    },
                    "low": {
                        "fahrenheit": "64",
                        "celsius": "18"
                    },
                    "conditions": "Partly Cloudy",
                    "icon": "partlycloudy",
                    "icon_url": "http://icons-ak.wxug.com/i/c/k/partlycloudy.gif",
                    "skyicon": "sunny",
                    "pop": 0,
                    "qpf_allday": {
                        "in": 0,
                        "mm": 0
                    },
                    "qpf_day": {
                        "in": 0,
                        "mm": 0
                    },
                    "qpf_night": {
                        "in": 0,
                        "mm": 0
                    },
                    "snow_allday": {
                        "in": 0,
                        "cm": 0
                    },
                    "snow_day": {
                        "in": 0,
                        "cm": 0
                    },
                    "snow_night": {
                        "in": 0,
                        "cm": 0
                    },
                    "maxwind": {
                        "mph": 11,
                        "kph": 18,
                        "dir": "WNW",
                        "degrees": 301
                    },
                    "avewind": {
                        "mph": 8,
                        "kph": 13,
                        "dir": "SW",
                        "degrees": 231
                    },
                    "avehumidity": 45,
                    "maxhumidity": 62,
                    "minhumidity": 27
                },
                {
                    "date": {
                        "epoch": "1361296800",
                        "pretty": "11:30 PM IST on February 19, 2013",
                        "day": 19,
                        "month": 2,
                        "year": 2013,
                        "yday": 49,
                        "hour": 23,
                        "min": "30",
                        "sec": 0,
                        "isdst": "0",
                        "monthname": "February",
                        "weekday_short": "Tue",
                        "weekday": "Tuesday",
                        "ampm": "PM",
                        "tz_short": "IST",
                        "tz_long": "Asia/Kolkata"
                    },
                    "period": 3,
                    "high": {
                        "fahrenheit": "90",
                        "celsius": "32"
                    },
                    "low": {
                        "fahrenheit": "64",
                        "celsius": "18"
                    },
                    "conditions": "Clear",
                    "icon": "clear",
                    "icon_url": "http://icons-ak.wxug.com/i/c/k/clear.gif",
                    "skyicon": "sunny",
                    "pop": 0,
                    "qpf_allday": {
                        "in": 0,
                        "mm": 0
                    },
                    "qpf_day": {
                        "in": 0,
                        "mm": 0
                    },
                    "qpf_night": {
                        "in": 0,
                        "mm": 0
                    },
                    "snow_allday": {
                        "in": 0,
                        "cm": 0
                    },
                    "snow_day": {
                        "in": 0,
                        "cm": 0
                    },
                    "snow_night": {
                        "in": 0,
                        "cm": 0
                    },
                    "maxwind": {
                        "mph": 10,
                        "kph": 16,
                        "dir": "NW",
                        "degrees": 310
                    },
                    "avewind": {
                        "mph": 8,
                        "kph": 13,
                        "dir": "West",
                        "degrees": 277
                    },
                    "avehumidity": 43,
                    "maxhumidity": 47,
                    "minhumidity": 28
                },
                {
                    "date": {
                        "epoch": "1361383200",
                        "pretty": "11:30 PM IST on February 20, 2013",
                        "day": 20,
                        "month": 2,
                        "year": 2013,
                        "yday": 50,
                        "hour": 23,
                        "min": "30",
                        "sec": 0,
                        "isdst": "0",
                        "monthname": "February",
                        "weekday_short": "Wed",
                        "weekday": "Wednesday",
                        "ampm": "PM",
                        "tz_short": "IST",
                        "tz_long": "Asia/Kolkata"
                    },
                    "period": 4,
                    "high": {
                        "fahrenheit": "90",
                        "celsius": "32"
                    },
                    "low": {
                        "fahrenheit": "70",
                        "celsius": "21"
                    },
                    "conditions": "Clear",
                    "icon": "clear",
                    "icon_url": "http://icons-ak.wxug.com/i/c/k/clear.gif",
                    "skyicon": "sunny",
                    "pop": 0,
                    "qpf_allday": {
                        "in": 0,
                        "mm": 0
                    },
                    "qpf_day": {
                        "in": 0,
                        "mm": 0
                    },
                    "qpf_night": {
                        "in": 0,
                        "mm": 0
                    },
                    "snow_allday": {
                        "in": 0,
                        "cm": 0
                    },
                    "snow_day": {
                        "in": 0,
                        "cm": 0
                    },
                    "snow_night": {
                        "in": 0,
                        "cm": 0
                    },
                    "maxwind": {
                        "mph": 10,
                        "kph": 16,
                        "dir": "WNW",
                        "degrees": 301
                    },
                    "avewind": {
                        "mph": 8,
                        "kph": 13,
                        "dir": "West",
                        "degrees": 267
                    },
                    "avehumidity": 44,
                    "maxhumidity": 51,
                    "minhumidity": 30
                }
            ]
        }
    }
} 
```

* * *

为了使用`GSON`我创建的类（不是详尽的）来反序列化它，如下所示：

```
import com.google.gson.annotations.*;
public class Response {
    @SerializedName("version")
    String version;
    @SerializedName("termsOfService")
    String termsOfService;
    @SerializedName("features")
    Features features;
} 
```

* * *

```
import com.google.gson.annotations.*;
public class Features {
    @SerializedName("geolookup")
    String geolookup;
    @SerializedName("conditions")
    String conditions;
    @SerializedName("forecast")
    String forecast;
} 
```

* * *

```
import com.google.gson.annotations.*;
public class Location {
    @SerializedName("type")
    String type;
    @SerializedName("country")
    String country;
    @SerializedName("country_iso3166")
    String country_iso3166;
    @SerializedName("country_name")
    String country_name;
    @SerializedName("state")
    String state;
    @SerializedName("city")
    String city;
    @SerializedName("tz_short")
    String tz_short;
    @SerializedName("tz_long")
    String tz_long;
    @SerializedName("lat")
    String lat;
    @SerializedName("lon")
    String lon;
    @SerializedName("zip")
    String zip;
    @SerializedName("magic")
    String magic;
    @SerializedName("wmo")
    String wmo;
    @SerializedName("l")
    String l;
    @SerializedName("requesturl")
    String requesturl;
    @SerializedName("wuiurl")
    String wuiurl;
    @SerializedName("nearby_weather_stations")
    NearbyWeatherStations nearby_weather_stations;

} 
```

* * *

```
import com.google.gson.annotations.*;
public class NearbyWeatherStations {
    @SerializedName("airport")
    Airport airport;
    @SerializedName("pws")
    PWS pws;
} 
```

**等等**

## 问题

我做得对吗？
是否需要 getter/setter 方法才能`GSON`工作？我的意思是，如果我重写`toString`某个类的方法以获取所需格式的数据并避免编写 getter/setter 会起作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T20:28:03.973

1.  一般来说：是的。创建 DTO 类可为您提供类型安全，尽管您可以使用 weak `Map<String, Object>`.
2.  `@SerializedName`如果目标 JSON 属性名称与相应的 Java 字段匹配，则可以省略。但是，如果您按照骆驼大小写这样的字段名称会更好： `@SerializedName("nearby_weather_stations") NearbyWeatherStations nearbyWeatherStations;`
3.  GSON 既不考虑 getter 也不考虑 setter。这是一个很好的解释为什么 GSON 只使用字段：[https](https://stackoverflow.com/a/6203975/166589) ://stackoverflow.com/a/6203975/166589 。
4.  请不要`toString()`用于序列化对象。（如果您将转换器/（反）串行器分开会更好 - 它为您提供更大的灵活性而不更改原始对象，并允许您以`toString()`轻量级的方式使用结果，例如在调试时在监视窗口中。）

* * *

UPD1：

您错过了访问给定 JSON 的根属性的类：

```
public static class Wrapper { /* or whatever you can call it */

    private Response response;
    private Location location;
    ...

}

Wrapper wrapper = gson.fromJson(json, Wrapper.class); 
```

# .net - 我应该将哪种信号量类型用于客户端 HttpWebRequest 限制？

> ID：14914308
> 
> 赞同：0
> 
> 时间：2013-02-16T19:35:45.200
> 
> 标签：.net, multithreading, http

### 背景

我有一个 Windows 服务使用 调用 REST Web 服务`HttpWebRequest`，我正在使用`BlockingCollection<T>`来实现生产者/消费者模式。每隔一段时间，我的 Web 服务就会返回`502 Bad Gateway`或`503 Service Unavailable`.

我有 95% 的把握网络服务刚刚被淹没。所以我想在收到这些响应之一时限制客户端的请求。

### 问题

我应该使用哪种类型的信号量？.Net 4/4.5 类型没问题。这是我提出的解决方案的伪代码，消费者并行运行：

```
class Worker {
    Semaphore _cooldown = new Semaphore();

    void Run() {
        StartProducersInParallel();
        StartConsumersInParallel();
    }

    void Produce() {...}
    void Consume() {
        _cooldown.Wait(1000);
        try {
            var response = proxy.GetResponse();
        } catch (ex) {
            if (ex.Status == 502 || ex.Status == 503) {
                _cooldown.Signal();
                // ... wait here and then retry once
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:03:20.140

Hans Passant 的评论让我想到了这个解决方案：

```
class Worker {
    ManualResetEventSlim _cooldown = new ManualResetEventSlim();

    void Run() {
        StartProducersInParallel();
        StartConsumersInParallel();
    }

    void Produce() {...}
    void Consume() {
        _cooldown.Wait(1000);
        var response;
        try {
            response = proxy.GetResponse();
            _cooldown.Set();
        } catch (ex) {
            if (ex.Status == 502 || ex.Status == 503) {
                _cooldown.Reset();
            } else {
                throw;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T04:13:04.407

由于您有消费者/生产者，您应该使用 ReaderWriterLockSlim 类，而不是 Semaphore。表示用于管理对资源的访问的锁，允许多个线程进行读取或独占访问进行写入。

# php - bonfire / codeigniter - Assets::add_js - 无法添加传递参数

> ID：14914313
> 
> 赞同：1
> 
> 时间：2013-02-16T19:36:37.993
> 
> 标签：php, javascript, codeigniter

我需要能够创建如下所示的行：

```
<script type="text/javascript" src="http://localhost/myapp/themes/testtheme/js/fancybox/jquery.fancybox.pack.js?v=2.1.2"></script> 
```

我尝试了以下方法：

```
Assets::add_js('fancybox/jquery.fancybox.pack.js?v=2.1.2'); 
```

但这失败了-它根本没有在我的标题中添加任何内容。使用：

```
Assets::add_js('fancybox/jquery.fancybox.pack.js'); 
```

添加一个脚本标签，但没有版本号。它看起来像这样：

```
<script src="http://localhost/myapp/bonfire/themes/testtheme/js/fancybox/jquery.fancybox.pack.js" type="text/javascript" ></script> 
```

你能告诉我如何将 ?v=2.1.2 添加到我的脚本标签中吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:51:35.517

我对 Bonfire 不太熟悉，但我快速浏览了源代码。

我很确定它不显示脚本标签的原因是因为它正在寻找一个`fancybox/jquery.fancybox.pack.js?v=2.1.2`不存在的带有文字 name 的文件。

我认为你可以通过使用完整的 url 来欺骗它，所以它认为它是一个外部脚本并且不会检查文件是否存在。就像是：

```
Assets::add_js(base_url().'fancybox/jquery.fancybox.pack.js?v=2.1.2'); 
```

不得不使用这样的变通方法永远不会令人愉快，并且有时会导致副作用，所以我建议您[向 Bonfire 的开发人员指出这一点](https://github.com/ci-bonfire/Bonfire/issues/new)。

另一件需要注意的事情，`?v=2.1.2`只不过是更新文件时的缓存破坏技巧（它使用户在查询字符串更改时重新下载文件），因此请考虑您是否真的需要它。

# mysql - 快速连续执行语句时出现Ruby mysql2错误

> ID：14914314
> 
> 赞同：10
> 
> 时间：2013-02-16T19:36:38.260
> 
> 标签：mysql, sql, ruby

我在 Ruby 中使用 Mysql2 客户端时遇到了一个奇怪的问题。尝试执行以下操作时：

```
client.query("CREATE DATABASE ...; INSERT INTO ..."); #SQL truncated for brevity
client.query("SELECT 1 FROM ...") #SQL truncated for brevity 
```

Ruby 抛出一个错误，我从中选择的表不存在。但是，如果我尝试以下操作：

```
client.query("CREATE DATABASE ...; INSERT INTO ..."); #SQL truncated for brevity
sleep 1
client.query("SELECT 1 FROM ...") #SQL truncated for brevity 
```

查询没有问题。似乎我需要给 MySQL 服务器一些时间来加载数据，然后才能查询它。谁能解释为什么会发生这种情况以及如何在不使用睡眠的情况下以编程方式克服这个问题？

**更新**

我这样初始化客户端：

```
Mysql2::Client.new({
                       :adapter => "mysql2",
                       :host => ip_address,
                       :username => db_username,
                       :password => db_password,
                       :flags => Mysql2::Client::MULTI_STATEMENTS
                   }) 
```

我检查了 'query_options' 属性并将 async 设置为 false。我尝试明确设置 async => false 标志无济于事。

如果我使用同样的问题

```
Model.connection.execute(SQL HERE) 
```

注意，这都是在 Rails 单元测试中执行的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T22:07:28.597

出于某种原因，唯一最终可以工作并且不需要`sleep 1`中间的事情是：

```
@model = Model.new    
Mysql2::Client.default_query_options[:connect_flags] |= Mysql2::Client::MULTI_STATEMENTS
@model.connection.reconnect! 
```

# ios - 如何通过滚动视图将 admobs 放入 xcode 4.6

> ID：14914315
> 
> 赞同：0
> 
> 时间：2013-02-16T19:36:51.267
> 
> 标签：ios, xcode, uiscrollview, storyboard, admob

我一直在谷歌和其他地方寻找这个问题的答案，但到目前为止还没有找到有用的答案。

我正在使用情节提要在 Xcode 4.6 上制作应用程序。我正在使用一个视图控制器，里面有一个滚动视图，滚动视图里面有图像和文本。

我设法展示了 admob 广告，这些广告只出现在页面顶部，并在我向下滚动页面时消失，因为广告被固定在顶部。

我设法实现了一个可滚动页面，其中广告位于 Android 页面的底部，但不在 xcode 中。我曾尝试编辑 .m 文件中的横幅视图，但这只会将广告横幅向下、向中间等移动。

例如，这个网站展示了我想要实现的目标 - [http://googleadsdeveloper.blogspot.co.uk/2011/12/incorporating-android-admob-ads-into.html](http://googleadsdeveloper.blogspot.co.uk/2011/12/incorporating-android-admob-ads-into.html)

我想在 iOS Xcode 4.6 中实现相同的功能，以便我的应用程序在两个操作系统中保持一致。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T20:48:07.110

不要将 AdMob 视图放在滚动视图中。

1.  向上移动滚动视图的底部边缘，使横幅有足够的空间。
2.  将横幅放在滚动视图下方。确保横幅和滚动视图共享相同的超级视图（红色箭头）
3.  调整自动调整大小蒙版，使横幅保持在底部。（蓝色箭头）
    *   也激活“允许水平调整大小”箭头。我忘了为截图做这个

![在此处输入图像描述](../Images/ed8bff036c04c1f1e7704a78bde0fa7d.png)

# java - 打印 BST 的直径

> ID：14914317
> 
> 赞同：0
> 
> 时间：2013-02-16T19:37:10.907
> 
> 标签：java, algorithm, tree, binary-search-tree

我已经编写了一个程序来查找 BST 的直径......有人可以给我一些关于如何打印我找到的最大直径的节点（root.data）的想法吗？

```
private int maxDia(Node root) {
    if(root==null) {
        return 0;
    }
    else{

        int llen = maxDepth(root.left);
        int rlen = maxDepth(root.right);
        int ldia = maxDia(root.left);
        int rdia = maxDia(root.right);
        return Math.max(llen+rlen+1,Math.max(ldia,rdia));
    }
} 
```

PS：最大深度找出树的高度。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:48:49.480

伪代码：

```
printDia(root):
    if diameter goes through root:
        printFromDeepest(root.left)
        print(root)
        printToDeepest(root.right)
    else if diameter is in root.left:
        printDia(root.left)
    else:
        printDia(root.right) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T20:42:04.277

```
 struct node
{    
node* left,right;
int data; 
};
struct path
{
 node *nodepointer;
 int length;
 };
int flag=0;

 node *x,*y,*lca;

 path *printpath(node *leaf,int d)
{
if(flag==0)
{
path *dia= new path;
dia->length=0;
dia->nodepointer=NULL;

if(leaf==NULL)
return dia;

path *a=new path;
path *b=new path;
a=printpath(leaf->left,d);
b=printpath(leaf->right,d);

if(a->length + b->length + 1 == d )
{
    lca=leaf;
    x=a->nodepointer;
    y=b->nodepointer;
    flag=1;
}

dia->length=max(a->length,b->length)+1;

if(a->length > b->length && a->nodepointer!=NULL)
{
    dia->nodepointer=a->nodepointer;
}
if(b->length >= a->length && b->nodepointer!=NULL)
{
    dia->nodepointer=b->nodepointer;
}
if(a->nodepointer==NULL && b->nodepointer==NULL)
{
        dia->nodepointer=leaf;
}

return dia;

}

} 
```

# php - eclipse php中的json_encode（）导致调用未定义函数json_encode（）错误

> ID：14914318
> 
> 赞同：0
> 
> 时间：2013-02-16T19:37:19.663
> 
> 标签：php, eclipse, json, eclipse-pdt

我在eclipse pdt 中创建了一个php 项目。当我尝试调用 java_encode 时，我收到“调用未定义函数 json_encode()”错误。PDT 的 php 核心 api 中的其他函数不这样做。

这是一个代码

```
$arr = array('a' => 1, 'b' => 2, 'c' => 3, 'd' => 4, 'e' => 5);
echo json_encode($arr); 
```

第二行导致错误。我需要包含还是需要？我是使用 json 和 eclipse PDT 的新手。需要帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-18T07:23:54.457

在 Linux 系统上，有时您需要添加`extension=json.so`到 php.ini 文件中。

请确保将其添加到正确的 php.ini，即 PHP 命令行解释器 (CLI) 使用的那个。例如：`/etc/php5/cli/php.ini`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T20:51:24.683

打开

```
Preferences -> PHP -> PHP Interpreter 
```

然后确保至少选择了 PHP 5.2！如果它不可用，那么您将需要更新您的 PDT 安装：

```
Help -> Check for updates 
```

# java - 将图片设置为jpanel

> ID：14914328
> 
> 赞同：0
> 
> 时间：2013-02-16T19:37:51.737
> 
> 标签：java, image, swing, jframe, jpanel

我使用此代码将图片设置为 jframe 。但是，现在我的 Jtable 不显示了，为什么？

```
public class samplepage extends JFrame{
private AllUser userModel;
private JTable uTable;
JButton addUser;
JButton deleteUser;
JButton mainButton;
JTextField tf1;
JButton searchButton;
JLabel resultLbl;

public samplepage(){
    userModel=new AllUser();
    uTable=new JTable(userModel);
    add(new JScrollPane(uTable), BorderLayout.CENTER);
    add(buttonPanels() , BorderLayout.PAGE_START);
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setSize(800,600);
    this.setLocation(300, 60);
    this.setResizable(false);
}

public final JPanel buttonPanels(){
    JPanel buttonsPanel = new JPanel(new FlowLayout(FlowLayout.LEFT));
    setPic(this);
    addUser=new JButton("Add New User");
    deleteUser=new JButton("delete User");
    mainButton= new JButton("Main Page");
    tf1 = new JTextField("              ");
    searchButton=new JButton("Search");
    resultLbl=new JLabel();

    buttonsPanel.add(addUser);
    buttonsPanel.add(deleteUser);
    buttonsPanel.add(mainButton);
    buttonsPanel.add(tf1);
    buttonsPanel.add(searchButton);
    buttonsPanel.add(resultLbl);

    return buttonsPanel;
}

public void setPic(JFrame jframe){
 try{
  File f=new File("pics\\user_group.png");
  BufferedImage img=ImageIO.read(f);
  jframe.setContentPane(new SetMyImage(img));
 }
 catch(IOException ioe){

 }
}

public static void main(String[] args){
    new samplepage().setVisible(true);
}

} 
```

第二类：

```
public class SetMyImage extends JPanel{

private Image img;

public SetMyImage(Image img){
    this.img=img;
}

@Override
protected void paintComponent(Graphics g){
    super.paintComponent(g);
    g.drawImage(img, 00, 00, null);

}
} 
```

我的错误在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T20:01:06.067

```
uTable=new JTable(userModel);
add(new JScrollPane(uTable), BorderLayout.CENTER);
add(buttonPanels() , BorderLayout.PAGE_START); 
```

首先，将表格添加到内容窗格。然后，您创建 buttonPanels()，它调用 setPic(...) 方法，该方法创建您的图像面板并使其成为框架的内容窗格，因此您丢失了表格。

从您的 buttonPanels 代码中删除 setPic() 代码。相反，您的代码应该类似于：

```
setPic(...);
uTable=new JTable(userModel);
add(new JScrollPane(uTable), BorderLayout.CENTER);
add(buttonPanels() , BorderLayout.PAGE_START); 
```

此外，您需要将图像面板的布局设置为 BorderLayout。

由于您正在以实际大小绘制图像，因此无需创建自定义面板来进行绘制。相反，您可以只使用 JLabel 作为您的内容窗格。有关此方法的更多信息，请参阅[背景面板](http://tips4java.wordpress.com/2008/10/12/background-panel/)。

# php - 如何为主页制作单独的标题？（标题标签）

> ID：14914329
> 
> 赞同：0
> 
> 时间：2013-02-16T19:37:52.657
> 
> 标签：php, html, css, joomla1.5

我有这个网站，index.php 与 html 结合在一起，我只需要为主页设置单独的标题（标题标签），但是每当我将主页名称添加到 index.php 页面时，它都会更改所有页面在网站上以该名称。我正在使用 Joomla 1.5...

这是代码部分：

```
<head>

<title> Home Page Title </title>

<jdoc:include type="head" />

<?php JHTML::_('behavior.mootools'); ?>

<link rel="stylesheet" href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/css/template.css" type="text/css" />

<link rel="stylesheet" href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/css/menu.css" type="text/css" />

<link rel="stylesheet" href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/css/style.css" type="text/css" />

<link rel="stylesheet" href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/css/slideshow.css" type="text/css" />

<script language="javascript" type="text/javascript" src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/vns.script.js"></script>
<script language="javascript" type="text/javascript" src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/mootools.js"></script>
<script language="javascript" type="text/javascript" src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/toptool.js"></script>

<!--[if lte IE 6]>

<script type="text/javascript">

var siteurl = '<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/';

window.addEvent ('load', makeTransBG);

function makeTransBG() {

    fixIEPNG ($$('#toptools ul li a'), '', 'crop', 0, 0);

    fixIEPNG ($$('#nav_all ul.menu li ul'), '', 'scale', 0, 0);

    fixIEPNG($$('img'));

}

</script>

<style type="text/css">

#hd p.buttonheading {

    margin:8px 0;

}

#nav_all ul.menu ul a {

    width: 14.8em!important;

}

</style>

<![endif]-->

<style type="text/css">

body{

    font-size: <?php echo $vnsfont = $this->params->get ("vnsfont"); ?>px;

}

</style>

<?php if ($vnsshowcopyright = $this->params->get('showcopyright') == 'yes') { ?>

<style type="text/css">

#cpr{

    display:block;

}

</style>

<?php }else{ ?>

<style type="text/css">

#cpr{

    display:none;

}

</style>

<?php } ?>

<?php if ($vnsshowcomponent = $this->params->get('showcomponent') == 'yes') { ?>

<style type="text/css">

#component{

    display:block;

}

</style>

<?php }else{ ?>

<style type="text/css">

#component{

    display:none;

}

</style>

<?php } ?>

<link rel="stylesheet" href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/css/sosdmenu.css" type="text/css" />

<?php if ($vnsmenu = $this->params->get('vnsmenu') == 'moo') { ?>

<script language="javascript" type="text/javascript" src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/vns.moomenu.js"></script>

<?php }else{ ?>

    <?php if ($vnsmenu = $this->params->get('vnsmenu') == 'css') { ?>

        <script language="javascript" type="text/javascript" src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/vns.cssmenu.js"></script>

    <?php }else{ ?>

    <? } ?>

<? } ?>

<?php if ($vnsmenu = $this->params->get('vnsmenu') == 'none') { ?>

<style type="text/css">

#nav_all{

    display: none;

}

</style>

<?php  }?>

<?php if ($this->countModules('left')==0)  : ?>

<style type="text/css">

#ccenter {

    width:716px;

}

</style>

<?php endif; ?>

<?php if ($this->countModules('right')==0)  : ?>

<style type="text/css">

#ccenter {

    width:734px;

}

</style>

<?php endif; ?>

<?php if (($this->countModules('right')==0)&&($this->countModules('left')==0))  : ?>

<style type="text/css">

#ccenter {

    width:935px;

}

</style>

<?php endif; ?>

</head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:00:01.203

由于您使用的是Joomla 1.5，请登录到您的后端，找到主页菜单项（带有星号的菜单项），并在其右侧的属性中设置页面标题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:46:43.287

为什么不创建一个执行以下操作的脚本：

```
<?php $pages = array( 'index', 'test' ); $thispage = basename($_SERVER['PHP_SELF'], ".php");
if(in_array($thispage,$page)) { $titles = array( 'index' => 'Home Page', 'test' => 'Test Page' ); $title_final = $titles[$thispage]; } else { $title_final = 'Unknown Page'; }
?> 
```

现在对于页面部分：

```
<html><head><title><?php echo $title_final; ?></title></head><body>blablabla</body></html> 
```

# ssl - 禁用 CURLOPT_SSL_VERIFYPEER (libcurl/openssl) 的安全后果

> ID：14914330
> 
> 赞同：2
> 
> 时间：2013-02-16T19:38:07.777
> 
> 标签：ssl, curl, openssl, ssl-certificate

我从[这个线程](https://stackoverflow.com/questions/13740933/security-consequences-of-disabling-curlopt-ssl-verifyhost-libcurl-openssl)知道禁用 CURLOPT_SSL_VERIFYHOST 时可能会发生哪些攻击。我想知道禁用 VERIFYPEER 而不是 _VERIFYHOST 时可能会发生哪些攻击。使用信用卡付款是否是可接受的风险？

（我问的原因是因为我的[代码](http://codepad.org/27Pfe9Fy)只能在禁用 _VERIFYPEER 的情况下工作，尽管似乎没有人知道为什么）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T19:45:15.537

如果您禁用`CURLOPT_SSL_VERIFYPEER`，curl 将不会检查证书是否实际由受信任的机构签署。**这是非常危险的！**在 MITM 情况下，如果没有`VERIFYPEER`，攻击者可以简单地将他自己的“自签名”证书替换为真实证书，并且只要主机名匹配（他总是可以这样做，因为他正在制作证书），您的应用程序将接受。

您的代码可能会失败，因为您没有设置 CA 证书存储，并且您正在与之交谈的服务器由不在 curl 的默认存储库中的 CA 签名。考虑使用`CURLOPT_CAINFO`或`CURLOPT_CAPATH`指定要验证的证书，并确保您用于验证的证书可访问并与目标服务器的证书匹配。

# typo3 - mysqldump 创建的转储不完整

> ID：14914333
> 
> 赞同：0
> 
> 时间：2013-02-16T19:38:18.557
> 
> 标签：typo3, mysqldump

TYPO3 安装的数据库中有 57 个表，名为`typo3`. `mysqldump`通过命令使用程序创建转储

```
mysqldump --host=127.0.0.1 --password=<PASSWORD> --protocol=tcp --port=3306 --user=<ROOT-USER> --lock-all-tables --databases typo3 > dump.sql 
```

仅包含 47 个表。如果数据库连接是通过套接字完成的，并且如果“--lock-all-tables”选项被忽略，也会出现同样的结果。如何制作包含所有表格的完整转储？

缺少的表是

*   `index_config`
*   `index_debug`
*   `index_fulltext`
*   `index_grlist`
*   `index_phash`
*   `index_rel`
*   `index_section`
*   `index_stat_search`
*   `index_stat_word`
*   `index_words`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:09:26.637

我不确定，为什么所有 index_* 表都没有用 mysqldump 转储，但我可以建议你使用[SypexDumper](http://sypex.net/en/)。在大多数情况下，当无法进行 mysqldump 或 phpMyAdmin 转储时，它节省了我的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:29:35.260

我用它来转储：mysqldump -u server_dbuser -p -h localhost server_db > dbdump.sql

您是否尝试过 phpmyadmin？

是否需要 index_ 表，还是可以随时重建？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-15T16:52:25.320

感谢 Urs 和 Viktor Livakivskyi 的帮助！该问题是由 cron 触发的单个脚本引起的。

# c++ - C++ 双端队列，同时读取数据并作为类存储。初始化时出错

> ID：14914336
> 
> 赞同：-1
> 
> 时间：2013-02-16T19:38:43.943
> 
> 标签：c++, class, file-io, deque

我正在阅读一个文件并制作我自己的类来存储在一个双端队列中。像这样

```
class point{
  public:

  void setX(float n)
  {
       x = n;
  }       

  void setY(float m)
  {
       x = m;
  }          
  float x;
  float y;           
};

int main(){

ifstream file("curveData.txt");

float x;
float y;    
deque<point> dqu;
point tempPt;

while(file >> x >> y){
           cout << x << ' ' << y << endl;
           tempPt.setX(x);
           tempPt.setY(y);
           cout << tempPt.x << ' ' << tempPt.y << endl;
           // to check it was initialized correctly
           cout<<endl;
           dqu.push_back(tempPt);
}
system ("pause");
return 0;
} 
```

在 while 循环内，第一个 cout 显示正确的值，但是在初始化 tempPt 的 x 和 y 的值之后，当我尝试显示这些值时，这些值未正确初始化。y 值存储在 TempPt.x 中，y 值是一个奇怪的数字，所有点都相同。我错过了什么。对不起，我是 C++ 新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T19:41:29.107

您的错误在 setY() 中。它应该包含

```
y = m; 
```

# three.js - 带有 requestAnimationFrame 的 webGL 无响应脚本

> ID：14914338
> 
> 赞同：0
> 
> 时间：2013-02-16T19:38:52.843
> 
> 标签：three.js, webgl, requestanimationframe

嗨，我在使用 webgl 和使用 requestAnimationFrame 时遇到问题，如果我继续调试动画很好，但只要我让脚本自由运行，我就会从浏览器收到一个无响应的脚本错误

这是我的html：

```
<!DOCTYPE html>
<html>
<head>
    <title>Earth to WebGL</title>
    <script type="text/javascript" src="../Rec/three.min.js"></script>
    <script type="text/javascript" src="../Rec/jquery-1.6.4.js"></script>
    <script type="text/javascript" src="../Rec/RequestAnimationFrame.js"></script>
    <script type="text/javascript" src="ex_loop.js"></script>
    <script type="text/javascript" src="Earth.js"></script>
    <script>

    var loopProg = null;
    var renderer = null;
    var scene = null;
    var camera = null;
    var mesh = null;
    var earth = null;

    $(document).ready(
            function() {
                var container = document.getElementById("container");
                renderer = new THREE.WebGLRenderer({ antialias: true } );
                renderer.setSize(container.offsetWidth,container.offsetHeight);
                container.appendChild(renderer.domElement)
                scene = new THREE.Scene();
                camera = new THREE.PerspectiveCamera( 45,
                        container.offsetWidth / container.offsetHeight, 1, 4000 );

                earth = new Earth();
                scene.add(earth.getEarth);
                camera.position.set( 0, 0, 3 );

                loopProg = new loopProgram();
                loopProg.add(function(){earth.update()});
                loopProg.add(function(){renderer.render( scene, camera );});
                loopProg.solarLoop();
            }
    );

</script> 
```

我的地球脚本文件

```
function Earth()
{

   this.getEarth = init();

function init()
{
    var map = {map:THREE.ImageUtils.loadTexture("images/earth_surface_2048.jpg")};
    var material = new THREE.MeshBasicMaterial(map);
    var geometry = new THREE.SphereGeometry(1,32,32);
    return new THREE.Mesh(geometry, material);
}

this.update = function()
{
    this.getEarth.rotation.x += .01;
}

    return this;
} 
```

和循环代码：

```
function loopProgram()
{
    this.functionsToRun = new Array();
    this.solarLoop= function()
    {
        jQuery.each(this.functionsToRun, function(index,value)
        {
            value ? value() : null;
        });
        var loopRef = this;
        requestAnimationFrame(loopRef.solarLoop());
    }

    this.add = function(func)
    {
        this.functionsToRun[this.functionsToRun.length] = func;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T00:41:16.300

您正在递归调用 solarLoop 而不是仅传递回调函数：

`requestAnimationFrame(loopRef.solarLoop());`

应该

`requestAnimationFrame(loopRef.solarLoop);`

# extjs - Sencha touch 2 - 在 DataView 中显示数据

> ID：14914347
> 
> 赞同：0
> 
> 时间：2013-02-16T19:39:23.093
> 
> 标签：extjs, sencha-touch

我是 ExtJS 的新手，我已经有一个医生列表示例，但是在医生详细信息页面中，它看起来像一个填充表单，这是我的视图文件：

```
Ext.define("GS.view.DoctorView", {
extend: "Ext.form.Panel",
requires: "Ext.form.FieldSet",
alias: "widget.doctorview",
config:{
    scrollable:'vertical'
},
initialize: function () {

    this.callParent(arguments);

    var backButton = {
        xtype: "button",
        ui: "back",
        text: "Back List",
        handler: this.onBackButtonTap,
        scope: this
    };

    var topToolbar = {
        xtype: "toolbar",
        docked: "top",
        title: "Doctor Profile",
        items: [
            backButton,
            { xtype: "spacer" }
        ]
    };

    var bottomToolbar = {
        xtype: "toolbar",
        docked: "bottom",
        items: [

        ]
    };

    var doctorNameView = {
        xtype: 'textfield',
        name: 'title',
        label: 'Title',
        required: true
    };

    var doctorDescView = {
        xtype: 'textareafield',
        name: 'narrative',
        label: 'Narrative'
    };

    this.add([
        topToolbar,
        { xtype: "fieldset",
            items: [doctorNameView, doctorDescView]
        },
        bottomToolbar
    ]);
},
onBackButtonTap: function () {
    this.fireEvent("backToListCommand", this);
}
}); 
```

我采取哪些步骤将其转换为数据视图，或者如何使用我的自定义 HTML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:49:41.140

首先，您的问题非常模糊，因此您应该阅读一些数据视图教程或文章来了解为什么您在这里真的需要数据视图，因为列表是数据视图，而表单是您作为详细信息视图创建的内容。

[http://www.sencha.com/blog/dive-into-dataview-with-sencha-touch-2-beta-2](http://www.sencha.com/blog/dive-into-dataview-with-sencha-touch-2-beta-2)

[http://docs.sencha.com/touch/2-1/#!/guide/dataview](http://docs.sencha.com/touch/2-1/#!/guide/dataview)

要使用您的自定义 HTML，您必须使用 xtemplate

[http://docs.sencha.com/touch/2-1/#!/api/Ext.XTemplate](http://docs.sencha.com/touch/2-1/#!/api/Ext.XTemplate)

# emacs - Emacs elisp 配置文件无法识别默认目录

> ID：14914353
> 
> 赞同：1
> 
> 时间：2013-02-16T19:40:22.580
> 
> 标签：emacs, elisp

我的 emacs 配置文件`~/.emacs`只有一个声明：

`(setq default-directory "/var/www/")`

我想要做的是`C-x C-f`直接进入我的 apache 目录。但我尝试使用`C-x C-f`，我当前的目录是`HOME`.

该文件被加载，因为我使用了这个：`(shell)`并且外壳被打开。有人知道我的错误在哪里吗？我只想在 htdocs 中设置启动目录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T06:28:29.903

`default-directory`没有按照您的想法行事。`C-h v` `default-directory`

```
default-directory is a variable defined in `buffer.c'.
Its value is "/"
Local in buffer stackoverflow.com/questions/14914353; global value is nil

  Automatically becomes buffer-local when set in any fashion.
  This variable is safe as a file local variable if its value
  satisfies the predicate `stringp'.

Documentation:
Name of default directory of current buffer.  Should end with slash.
To interactively change the default directory, use command `cd'. 
```

它是一个本地缓冲区（即特定于缓冲区）的变量，这意味着它的值根据当前处于活动状态的缓冲区而有所不同。因此，当您认为已将其设置为“/var/www”时，您只是在访问该目录中已有的文件。

如果要从“/var/www”打开文件，则需要创建自己的命令，将“/var/www”绑定到`default-directory`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-06T16:02:46.233

以防万一有人想知道如何做到这一点：

正如@Pacha 所说，当 emacs 启动时，会出现欢迎屏幕，它将您的工作目录更改为`command-line-default-directory`

因此，例如，如果您希望您的默认目录为“~/”，请将其添加到您的 .emacs 中，您应该会走上正轨。

```
(setq command-line-default-directory "~/")
(setq default-directory "~/") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T21:38:19.517

解决了，真是个奇怪的问题。

每次我尝试从默认缓冲区 ( `*GNU Emacs*`) 打开文件时，它会将默认目录更改为`~/`，但是当我尝试从另一个缓冲区打开文件时，它会打开我在变量中指定的文件。

# google-fusion-tables - 打开 Fusion Table Layer 信息窗口 onchange

> ID：14914355
> 
> 赞同：1
> 
> 时间：2013-02-16T19:40:39.423
> 
> 标签：google-fusion-tables

使用 FusionTablesLayer Wizard 生成的代码，我试图确定如何打开 onchange 信息窗口。下面的代码完美地显示了标记，但我希望在选择不同的选择（状态）时打开信息窗口，而不是单击标记来触发信息窗口。谢谢。

跟进：

按照下面geocodezip的评论，下面的代码运行良好，给了我一个很好的开始！现在使用下拉选择器而不是侧边栏链接...

新的工作代码

```
<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <title>Fusion Table Markers and Sidebar</title>

  <script type="text/javascript" src="http://www.google.com/jsapi"></script> 
  <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
  <script type="text/javascript">

  google.load('visualization', '1', {'packages':['table']});
  var map;
  var markers = [];
  var infoWindow = new google.maps.InfoWindow();

  function initialize() {
    var us = new google.maps.LatLng(38.24676420846342, -94.82073772499997);

    map = new google.maps.Map(document.getElementById('map_canvas'), {
     center: us,
     zoom: 4,
     mapTypeId: google.maps.MapTypeId.ROADMAP
   });

//sidebar to contain link to map marker - Sales Region - and Rep name  
    var sql = encodeURIComponent("SELECT 'State - Sales Region', 'Representative Contact', Lat, Lon FROM 5555555555 ORDER BY 'State - Sales Region'");
    var query = new google.visualization.Query('http://www.google.com/fusiontables/gvizdata?tq=' + sql);

    query.send(getData);
  }

//simple sidebar and info window style 
  function getData(response) {
    var dt = response.getDataTable();  

    var side_html = '<table style="border-collapse: collapse" border="1" \
                       cellpadding="5"> \
                       <thead> \
                         <tr style="background-color:#e0e0e0"> \
                           <th>Area</th> \
                           <th>Name</th> \
                         </tr> \
                       </thead> \
                       <tbody>';

    for (var i = 0; i < dt.getNumberOfRows(); i++) {
      var lat = dt.getValue(i,2);
      var lng = dt.getValue(i,3);
      var area = dt.getValue(i,0);
      var pop = dt.getValue(i,1);

      var pt = new google.maps.LatLng(lat, lng);
      var html = "<strong>" + area + "</strong><br />" + pop;

      side_html += '<tr> \
                      <td><a href="javascript:myclick(' + i + ')">' + area + '</a></td> \
                      <td>' + pop + '</td> \
                    </tr>';

      createMarker(pt, html);

    }

    side_html += '</tbody> \
                </table>';
    document.getElementById("side_bar").innerHTML = side_html;
  }

//use simple default marker
  function createMarker(point,info) { 
     var marker = new google.maps.Marker({
      position: point,
      map: map
  });

    markers.push(marker);

    google.maps.event.addListener(marker, 'click', function() {
      infoWindow.close();
      infoWindow.setContent(info);
      infoWindow.open(map,marker); 
    });
  }

  function myclick(num) {
    google.maps.event.trigger(markers[num], "click");
    map.setCenter(markers[num].getPosition());
//    map.setZoom(map.getZoom()+2);
  }

  </script>

</head>
<body onload="initialize()">
  <div id="map_canvas" style="width: 900px; height: 600px; position: absolute; left: 10px"></div>
  <div id="side_bar" style="width: 200px; height: 600px; position: absolute; left: 920px; overflow: auto;"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:16:07.993

默认情况下，在 FusionTablesLayer 上打开 InfoWindow 的唯一方法是单击它。要从外部事件打开它，一种选择是创建您自己的信息窗口。通过查询 FusionTable 并打开您想要的任何外部刺激来检索内容。

[带有侧边栏的示例/概念证明](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_Watershed_Stewards_Map_sidebar2.html)

[文档中的示例](https://developers.google.com/fusiontables/docs/samples/open_infowindow)

# objective-c - 是否可以缩短可可中的条件语句以不重新声明变量名？

> ID：14914357
> 
> 赞同：1
> 
> 时间：2013-02-16T19:40:51.193
> 
> 标签：objective-c, cocoa

想知道是否有办法简写这些条件。我正在处理数据包，有时条件会变得有点笨拙。这是一个基本示例：

我写：

```
if (message->messageType != kMessageTypeCutCardsArray && message->messageType != kMessageTypeQuit) {
    MessageInt message;
    message.message.messageType = kMessageTypeReceivedData;
    NSData *packet = [NSData dataWithBytes:&message length:sizeof(message)];
    [_game sendData:packet];
} 
```

我宁愿写：

```
if (message->messageType != (kMessageTypeCutCardsArray || kMessageTypeQuit)) {
    MessageInt message;
    message.message.messageType = kMessageTypeReceivedData;
    NSData *packet = [NSData dataWithBytes:&message length:sizeof(message)];
    [_game sendData:packet];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T02:11:47.433

一般来说，没有。这就是 C（以及 Objective-C）的工作方式。

在这种特定情况下，您可以使用以下`switch`语句：

```
switch (message->messageType)
{
    case kMessageTypeCutCardsArray:
    case kMessageTypeQuit:
        break;
    default:
        MessageInt message;
        message.message.messageType = kMessageTypeReceivedData;
        NSData *packet = [NSData dataWithBytes:&message length:sizeof(message)];
        [_game sendData:packet];
        break;
} 
```

该语法是否是一种改进取决于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T18:36:34.610

如果您定义您`enum`的值以使这些值具有互斥位模式，如下所示：

```
typedef enum : NSUInteger {
    kMessageTypeLoveLetter = 1 << 0,
    kMessageTypeBirthdayCard = 1 << 1,
    kMessageTypeVacationPostcard = 1 << 2,
    kMessageTypeCreditApplication = 1 << 3,
    kMessageTypeCharitySolicitation = 1 << 4
} MessageType; 
```

`|`然后，您可以使用二进制 OR和二进制 AND一次测试多个值`&`：

```
MessageType msgType = kMessageTypeCreditApplication;

if( !(msgType & (kMessageTypeLoveLetter | kMessageTypeBirthdayCard)) ){
    // Nobody loves you.
}
if( (msgType & (kMessageTypeCreditApplication | kMessageTypeCharitySolicitation) ){
    // Someone wants your money.
} 
```

但是，如果您为 使用编译器生成的连续值，这将不起作用，`enum`因为这些值将作为标志重叠——例如，2 和 3 都设置了最低位——并且将它们组合在一起通常会结束仅测试其中一个标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T06:13:12.060

您可以将值装箱并使用临时数组。这实现了在条件中删除重复的目标，但不太可能对编译器进行优化。

```
if (message->messageType != kMessageTypeCutCardsArray && 
    message->messageType != kMessageTypeQuit) { 
```

应该相当于：

```
if(![@[@(kMessageTypeCutCardsArray),@(kMessageTypeQuit)] 
     contains:@(message->messageType)]) { 
```

# javascript - Window.addcloseHandler 和 Window.addwindowClosingHandler 不区分浏览器关闭和浏览器刷新事件

> ID：14914360
> 
> 赞同：3
> 
> 时间：2013-02-16T19:41:21.263
> 
> 标签：javascript, gwt, event-handling

我正在使用 GWT，在我的应用程序中，我想清除会话历史记录并在关闭浏览器上强制注销用户。但是单击刷新时，用户应该已登录。我为此编写了以下代码。

```
Window.addCloseHandler(new CloseHandler<Window>() {
    @Override
    public void onClose(CloseEvent<Window> event) {
        logoutRPC();
    }
});

Window.addWindowClosingHandler(new Window.ClosingHandler() {
    public void onWindowClosing(Window.ClosingEvent closingEvent) {
        logoutRPC();
    }
}); 
```

但从以上两点来看，我无法实现刷新调用的功能`GWT.closeHandler()`。

如何区分这两个事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-30T09:02:40.940

无法将刷新与客户端浏览器窗口的关闭区分开来。

本质上，您的 GWT 应用程序是在浏览器窗口范围内运行的。如果它被刷新，您的应用程序实例将被删除，浏览器会加载 url，然后创建一个新实例。

当您调试并且您的 GWT 应用程序[onModuleLoad()](http://www.gwtproject.org/javadoc/latest/com/google/gwt/core/client/EntryPoint.html#onModuleLoad())函数在您的应用程序类的新实例上再次被调用时，您可以看到这一点。

# javascript - JQuery UI 对话框：密码输入导致冻结

> ID：14914361
> 
> 赞同：4
> 
> 时间：2013-02-16T19:41:22.013
> 
> 标签：javascript, jquery, jquery-ui, yii, jquery-ui-dialog

这是一种奇怪的行为，似乎只发生在 Chrome 和 JQuery UI 中。起初在密码字段中输入字符时，一切正常。但是，如果您尝试退格到输入中的最后一个字母，浏览器将锁定所有客户端操作。此外，如果您尝试突出显示输入的字符并退格，客户端操作将冻结。

只是伸出手看看是否有人遇到过同样的问题，以及他们是如何解决的。

为了解决这个问题，我们在 2+ 独特的页面主页视图上自动打开对话框。这是一个列表页面，因此可以触发它，对于给您带来的不便，我深表歉意，但我无法移除柜台。

页面： http: [//www.christineleeteam.com/area/eagleharbor](http://www.christineleeteam.com/area/eagleharbor)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T00:13:11.233

我有同样的问题，但缓存清除没有帮助。我确定这不是 jquery ui 错误。这是我的解决方案：

```
 $('input[type="password"]').on('keydown', function(event){
     if (event.which == 8) { //backspace event
       event.preventDefault();
       $(this).val('');
     }
   }); 
```

此代码在一个退格事件上清除整个密码字段。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T16:05:07.990

我们遇到了同样的问题，并使用了 Benkod 的解决方案。我们对其进行了一些改进，以处理使用删除键（而不是退格键）删除密码文本的情况。另一种情况是选择控件中的所有文本并键入新文本来替换它。这是我们使用的脚本：

```
 Sys.Application.add_load(function() {
        $('input[type=password]').keydown(function(event) {

            var isAllTextSelected = this.value.slice(this.selectionStart, this.selectionEnd) == this.value;
            var isLastChar = $(this).val().length == 1;
            if (isAllTextSelected && $(this).val().length > 0) {
                $(this).val('');
            }
            if ((event.which == 8 || event.which == 46) && (isLastChar || isAllTextSelected)) { //backspace event

                event.preventDefault();
                $(this).val('');
            }
        });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-13T09:58:53.093

这里有同样的问题（FWIW，我正在使用 Twitter Bootstrap，但问题是一样的）。[看起来](https://code.google.com/p/chromium/issues/detail?id=121918)这是由于输入之前有很多内容造成的。将输入放在更高的位置——高于大部分其他内容——对我来说是诀窍。解决方法，但总比没有好。

# java - 在 Java 中创建一个 bytea 数组以传递给 Postgresql 存储过程

> ID：14914365
> 
> 赞同：2
> 
> 时间：2013-02-16T19:41:33.413
> 
> 标签：java, postgresql, jdbc, plpgsql

我需要将一个 bytea 数组传递给一个存储过程（如果是 bytea[] 则声明的类型）。

数据被传递给我的存储过程，但是，我无法从 bytea[] 中获取单个 bytea。array_lower 和 array_upper 函数报告一维，但 tumb_data[1] 总是返回 NULL。

如果我从存储的过程中打印整个 bytea[] 对象，我会得到以“{{-1,-40,-1,-32,0,16,74,70,73,70,0,1 ,1"，所以我知道数据正在进入程序。

这是一些显示问题的示例代码：

```
Class.forName("org.postgresql.Driver");
String url = "jdbc:postgresql://localhost/test";
Connection c = DriverManager.getConnection(url,"andres","xxx");
List<byte[]> thumbData=new ArrayList<byte[]>();
thumbData.add("Test #1".getBytes());
thumbData.add("Test #1".getBytes());
Object[] thumbs=thumbData.toArray();
Array thumbArray=c.createArrayOf("bytea", thumbs);
PreparedStatement stmt=c.prepareStatement("SELECT test_funct(?)");
stmt.setArray(1,thumbArray);
stmt.execute(); 
```

这是存储过程：

```
CREATE OR REPLACE FUNCTION test_funct(a_bytes bytea[])
  RETURNS boolean AS
$BODY$DECLARE
    v_bytes bytea;
BEGIN
FOR i IN array_lower(a_bytes,1) .. array_upper(a_bytes,1) LOOP 
        v_bytes:= a_bytes[i];
        IF (v_bytes IS NULL) THEN
            RAISE EXCEPTION 'error';
        END IF; 
    END LOOP;

    RETURN true;
END$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100; 
```

最后，这是我运行测试程序时的日志输出：

```
2013-02-17 21:03:52 EST LOG:  execute <unnamed>: SET extra_float_digits = 3
2013-02-17 21:03:52 EST LOG:  execute <unnamed>: SELECT oid FROM pg_catalog.pg_type WHERE typname = $1
2013-02-17 21:03:52 EST DETAIL:  parameters: $1 = '_bytea'
2013-02-17 21:03:52 EST LOG:  execute <unnamed>: SELECT e.typdelim FROM pg_catalog.pg_type t, pg_catalog.pg_type e WHERE t.oid = $1 and t.typelem = e.oid
2013-02-17 21:03:52 EST DETAIL:  parameters: $1 = '1001'
2013-02-17 21:03:52 EST LOG:  execute <unnamed>: SELECT test_funct($1)
2013-02-17 21:03:52 EST DETAIL:  parameters: $1 = '{{"\\x3834","\\x313031","\\x313135","\\x313136","\\x3332","\\x3335","\\x3439"},{"\\x3834","\\x313031","\\x313135","\\x313136","\\x3332","\\x3335","\\x3439"}}'
2013-02-17 21:03:52 EST ERROR:  error
2013-02-17 21:03:52 EST STATEMENT:  SELECT test_funct($1)
2013-02-17 21:03:52 EST LOG:  unexpected EOF on client connection 
```

知道如何将其传递给我的存储过程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T12:30:44.630

我怀疑你的数组有两个维度；`bytea`您有一个 的二维数组，而不是 的一维（线性）数组`bytea`。索引这样一个数组的第一个维度将产生一个空结果。请注意，PostgreSQL 任何维度的数组仍然具有基本的数组数据类型，没有`bytea[][]`etc.`array_ndims(anyarray)`用于获取数组维度。

观察一维：

```
WITH t1(ba) AS (VALUES(ARRAY[ '\x0a', '\x0c', '\x0e' ] :: bytea[]))
SELECT ba, ba[1], ba[1][1] FROM t1;
            ba             |  ba  | ba 
---------------------------+------+----
 {"\\x0a","\\x0c","\\x0e"} | \x0a | 
(1 row) 
```

与二维：

```
WITH t1(ba) AS (VALUES(ARRAY[[ '\x0a', '\x0c', '\x0e' ]] :: bytea[]))
SELECT ba, ba[1], ba[1][1] FROM t1;

             ba              | ba |  ba  
-----------------------------+----+------
 {{"\\x0a","\\x0c","\\x0e"}} |    | \x0a
(1 row) 
```

由于您没有显示完整的价值或您的 SQL，因此很难说更多。

如果您怀疑 JDBC 驱动程序有问题，如果您可以提供一个自包含的可编译测试用例来证明该问题，包括用于设置测试数据库的 SQL 脚本，将会有所帮助。

**请显示实际运行的 SQL，**包括传递的参数。您可以从`log_statement`启用的 PostgreSQL 日志文件中获取此信息。

# python - python libSVM 包装器的“predict”和“predict_proba”方法之间的不一致

> ID：14914368
> 
> 赞同：1
> 
> 时间：2013-02-16T19:41:40.920
> 
> 标签：python, machine-learning, libsvm

我正在使用 libSVM python 包装器进行二进制分类器预测，并注意到有时我会从“predict”和“predict_proba”方法中得到不同的结果。要从“predict_proba”返回的矩阵中获取预测的类，我对每个实例使用以下代码：

```
return 0 if probs[0]>0.5 else 1 
```

例如，对于一个实例，'predict_proba' 返回 [[ 0.49179164, 0.50820836]]，'predict' 方法返回 1 作为例外。但是对于另一个例子，'predict' 函数返回 1，而 'predict_proba' 返回 [[ 0.50822999, 0.49177001]]，这意味着预测的类是 0 而不是 1。为了检查哪个结果是正确的，我调用了'decision_function' 方法，它返回与分离超平面的距离。如果为正，则该类为 1，否则为 0。'decision_function' 返回 0.024，意味着类确实是 1，因为 'predict' 方法返回，这意味着在 'predict_proba' 方法中存在错误。为了计算概率，我使用了以下代码：

```
dist = classifier.decision_function(instance)
class1_prob = np.exp(dist)/(np.exp(dist)+np.exp(-dist))
probs = [[1-class1_prob, class1_prob]] 
```

最明显的是有一个错误，我想知道它是在 libSVM 库中还是在 python 包装器中。我的直觉告诉我，这种可疑的行为是由于离分离超平面太近的实例造成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:53:53.277

只是一个提示，因此社区 wiki：您的版本`predict_proba`不是 LibSVM 中使用的版本。相反，它使用

```
static double sigmoid_predict(double decision_value, double A, double B)
{
        double fApB = decision_value*A+B;
        if (fApB >= 0)
                return exp(-fApB)/(1.0+exp(-fApB));
        else
                return 1.0/(1+exp(fApB)) ;
} 
```

其中`A`和`B`值由训练期间的[Platt 标度确定。](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.41.1639)

# silverlight - Azure 云存储中的 Silverlight XAP

> ID：14914370
> 
> 赞同：0
> 
> 时间：2013-02-16T19:41:46.240
> 
> 标签：silverlight, azure, cross-domain, blob

我有一个显示绿色矩形的 Silverlight xap。

此 xap 是 Azure 云中 ASP.NET 网站的一部分。

为了更容易升级 Xap，我将它作为一个 blob 移动到云存储中，并使用 https url 引用它。

现在 Xap 没有启动。不显示错误消息。xap 应该在的地方有空白。

我已经在互联网上搜索了解决方案。当 Xap 访问另一个域上的服务或访问另一个域上的 blob 存储时，有许多解决方案。但这与我的问题不同。我的 xap 没有访问服务。它显示一个绿色矩形。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:52:22.653

谢谢汤姆和高拉夫把我带到那里。这是我的解决方案：

1) 创建了一个名为“clientaccesspolicy.xml”的文件。我用的是小写字母，不确定是否重要。在文件中放入以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<access-policy>
<cross-domain-access>
    <policy>
        <allow-from http-request-headers="SOAPAction">
            <domain uri="*"/>
        </allow-from>
        <grant-to>
            <resource path="/" include-subpaths="true"/>
        </grant-to>
    </policy>
</cross-domain-access> 
```

2) 将此文件上传到您的 blob 容器的根目录。使用 VS2010 访问我的 blob 存储，所以看不到根 ($root)。编写控制台应用程序以上传和设置内容类型。同样，不确定是否需要设置内容类型，但可能是一个问题。

这是我使用的类：

```
namespace ConsoleApplication
{

/// <summary>
/// 
/// </summary>
public class BlobStorageContainer
{

    /////////////////////////////////////////////////////////////
    // Constants

    private const string BLOB_CONNECTION = <get this from the windows azure portal>;

    public const string ROOT_CONTAINER_NAME = "$root";

    /////////////////////////////////////////////////////////////
    // Attributes

    private static CloudStorageAccount _storageAccount;

    private static CloudBlobClient _blobClient;

    private CloudBlobContainer _container;

    /////////////////////////////////////////////////////////////
    // Construction

    static BlobStorageContainer()
    {

        // Create storage account
        _storageAccount = CloudStorageAccount.Parse(BLOB_CONNECTION);

        // Construct cloud blob client
        _blobClient = _storageAccount.CreateCloudBlobClient();

    }

    public BlobStorageContainer(string strContainer)
    {

        // Get the audio-files container
        _container = _blobClient.GetContainerReference(strContainer);

        try
        {

            // If container does not exist...
            if (!_container.Exists())
            {

                // Create container
                _container.CreateIfNotExists();

                // Set permissions
                BlobContainerPermissions permissions = new BlobContainerPermissions { PublicAccess = BlobContainerPublicAccessType.Blob };
                _container.SetPermissions(permissions);

            }

        }
        catch (Exception x)
        {

            // Reset reference
            _container = null;

            // throw back
            throw x;

        }
    }

    /////////////////////////////////////////////////////////////
    // Operations

    public void SetContentType(string strName, string strContentType)
    {

        // Retrieve the block-blob
        CloudBlockBlob blob = _container.GetBlockBlobReference(strName);
        if (blob.Exists())
        {

            // If props need changing...
            if (blob.Properties.ContentType != strContentType)
            {

                // Set properties
                blob.Properties.ContentType = strContentType;
                blob.SetProperties();

            }

        }

    }

    public void UploadFile(string strFilepath,string strName)
    {

        // Get blob
        CloudBlockBlob blob = _container.GetBlockBlobReference(strName);

        // Open file
        using(FileStream fs = new FileStream(strFilepath,FileMode.Open,FileAccess.Read))
        {
            blob.UploadFromStream(fs);
        } // using fs

    }

    public void WalkBlobs(Func<string, long, string, bool> fnCallback)
    {

        // Loop through the blobs
        foreach (IListBlobItem loop in _container.ListBlobs())
        {

            // If this is a block blob...
            if (loop is CloudBlockBlob)
            {

                // Get the blob
                CloudBlockBlob blob = loop as CloudBlockBlob;

                // Callback function
                bool bContinue = fnCallback(blob.Name, blob.Properties.Length, blob.Properties.ContentType);
                if (!bContinue)
                    break;

            }

        }

    }

} 
```

}

然后在 Main 函数中执行此操作：

```
// Open container
BlobStorageContainer container = new BlobStorageContainer(BlobStorageContainer.ROOT_CONTAINER_NAME);

// Upload file
container.UploadFile(@"D:\Workspace\clientaccesspolicy.xml", "clientaccesspolicy.xml");

// Set content type
container.SetContentType("clientaccesspolicy.xml", "text/xml"); 
```

3) 在我的 html 中，将 XAP url 从 HTTPS 更改为 HTTP。由于某种原因，这不起作用：

```
<param name="source" value="https://<blobaccount>.blob.core.windows.net/container1/MySilverlight.xap"/> 
```

但这确实：

```
<param name="source" value="http://<blobaccount>.blob.core.windows.net/container1/MySilverlight.xap"/> 
```

# javascript - 注册jQuery点击，第一次和第二次点击

> ID：14914372
> 
> 赞同：25
> 
> 时间：2013-02-16T19:42:05.540
> 
> 标签：javascript, jquery, click

有没有办法运行两个类似的功能：

```
$('.myClass').click(
    function() {
        // First click
    },
    function() {
        // Second click
    }
); 
```

我想使用基本的切换事件，但`.toggle()`已被弃用。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-02-16T19:43:25.957

尝试这个：

```
$('.myClass').click(function() {
  var clicks = $(this).data('clicks');
  if (clicks) {
     // odd clicks
  } else {
     // even clicks
  }
  $(this).data("clicks", !clicks);
}); 
```

这是基于一个已经回答的问题：[Alternative to jQuery's .toggle() method that supports eventData?](https://stackoverflow.com/questions/2459153/alternative-to-jquerys-toggle-method-that-supports-eventdata)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-16T19:47:21.760

或这个 ：

```
var clicks = 0;

$('.myClass').click(function() {
    if (clicks == 0){
        // first click
    } else{
        // second click
    }
    ++clicks;
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-03-04T17:54:57.603

这是我为我的菜单工作的

```
var SubMenuH = $('.subBoxHederMenu').height();  
var clicks = 0;

        $('.btn-menu').click(function(){
          if(clicks == 0){
            $('.headerMenu').animate({height:SubMenuH});
            clicks++;
            console.log("abierto");
          }else{
            $('.headerMenu').animate({height:"55px"});
            clicks--;
            console.log("cerrado");
          }
          console.log(clicks);
        }); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-16T19:55:45.307

我不知道您要做什么，但我们可以通过以下方式进行基本切换

```
$('.myClass').click({
   var $this=$(this);        
   if($this.is(':hidden'))
    {
      $this.show('slow');
    }else{
      $this.hide('slow');
    }
 }) 
```

注意：这适用于该元素的无限点击事件..不仅仅是两次点击（如果这是你想要的）

或者您可以使用 css 类来隐藏/显示 div 并使用[jquery.toggleClass()](http://api.jquery.com/toggleClass/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-08T14:54:09.007

在下面提到的方法中，我们将一个函数数组传递给我们的自定义`.toggleClick()`函数。我们使用`data-*`的属性`HTML5`来存储将在点击事件处理过程的下一次迭代中执行的函数的索引。该值存储在`data-index`属性中，在每次迭代中都会更新，以便我们可以跟踪要在下一次迭代中执行的函数的索引。

所有这些功能都会在每次点击事件的迭代中一个一个的执行。例如，在第一次迭代函数`index[0]`中将执行，在第二次迭代中存储的函数`index[1]`将被执行，依此类推。

在您的情况下，您只能将 2 个函数传递给该数组。但这种方法不仅限于两个功能。您可以在此数组中传递 3、4、5 个或更多函数，它们将在不更改代码的情况下执行。

下面的代码片段中的示例是处理四个函数。可以根据自己的需要传递函数。

```
$.fn.toggleClick = function(funcArray) {
  return this.click(function() {
    var elem = $(this);
    var index = elem.data('index') || 0;

    funcArray[index]();
    elem.data('index', (index + 1) % funcArray.length);
  });
};

$('.btn').toggleClick([
  function() {
    alert('From Function 1');
  }, function() {
    alert('From Function 2');
  }, function() {
    alert('From Function 3');
  }, function() {
    alert('From Function 4');
  }
]);
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<button type="button" class="btn">Click Me</button>
<button type="button" class="btn">Click Me</button>
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-06-25T13:48:00.473

如果您实际上只想要第一次和第二次点击：

```
$('.myClass').one( 'click', function() {

    // First click

    $('.myClass').one( 'click', function() {

        // Second click

    });
); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-23T06:43:31.243

```
When You click the selector it automatically triggers second and waiting for another click event.

$(selector).click(function(e){
    e.preventDefault(); // prevent from Posting or page loading
     //do your stuff for first click;
     $(this).click(function(e){
     e.preventDefault();// prevent from Posting or page loading
      // do your stuff for second click;
     });
}); 
```

我希望这对你有帮助..

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-07T19:18:08.407

```
 var click_s=0;
            $('#show_pass').click(function(){
                if(click_s % 2 == 0){
                    $('#pwd').attr('type','text');
                    $(this).html('Hide');
                }
                else{
                    $('#pwd').attr('type','password');
                    $(this).html('Show');
                }
                click_s++;
            }); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-11T17:53:05.683

我来到这里寻找一些答案，感谢你们，我已经很好地解决了这个问题，我想分享 mi 解决方案。

我只使用 addClass、removeClass 和 hasClass JQuery 命令。

我就是这样做的，效果很好：

```
$('.toggle').click(function() { 
            if($('.categ').hasClass("open")){
                $('.categ').removeClass('open');
            }
            else{           
                $('.categ').addClass('open');                                   
            }
        }); 
```

这样，当您第一次单击时，一个 .open 类就会添加到 Html 中。第二次单击检查该类是否存在。如果存在，则将其删除。

# php - 致命错误：未捕获的异常“异常”，消息“无法设置 COM 端口，请检查它是否正确”

> ID：14914373
> 
> 赞同：0
> 
> 时间：2013-02-16T19:42:07.433
> 
> 标签：php, at-command

> > 致命错误：C:\xampp\htdocs\jsms\sms.php:61 中的未捕获异常“异常”和消息“无法设置 COM 端口，请检查它是否正确”堆栈跟踪：#0 C:\xampp\htdocs\jsms \sms.php(17): gsm_send_sms->init() #1 {main} 在第 61 行的 C:\xampp\htdocs\jsms\sms.php 中抛出 public function init() {

```
 $this->debugmsg("Setting up port: \"{$this->port} @ \"{$this->baud}\" baud");

    exec("MODE {$this->port}: BAUD={$this->baud} PARITY=N DATA=8 STOP=1", $output, $retval);

    if ($retval != 0) 
    {
        throw new Exception('Unable to setup COM port, check it is correct');
    }

    $this->debugmsg(implode("\n", $output));
    $this->debugmsg("Opening port");

    //Open COM port
    $this->fp = fopen($this->port . ':', 'r+');

    //Check port opened
    if (!$this->fp) {
        throw new Exception("Unable to open port \"{$this->port}\"");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:57:45.293

你没有捕捉到你抛出的异常：

```
if ($retval != 0) 
{
    throw new Exception('Unable to setup COM port, check it is correct');
} 
```

如果抛出

```
exec("MODE {$this->port}: BAUD={$this->baud} PARITY=N DATA=8 STOP=1", $output, $retval); 
```

返回一个错误 int（任何东西！= 0）。

利用：

```
try {
    exec("MODE {$this->port}: BAUD={$this->baud} PARITY=N DATA=8 STOP=1", $output, $retval);
    if ($retval != 0) 
    {
        throw new Exception('Unable to setup COM port, check it is correct');
    }
} catch (Exception $e) {
    // do whatever you want to handle the error
} 
```

# c# - 如何在中继器中进行分页？

> ID：14914375
> 
> 赞同：0
> 
> 时间：2013-02-16T19:42:16.140
> 
> 标签：c#, repeater, asp.net-4.5

如何对包含 10 条记录的表进行分页以一次只显示其中一些记录。
后面的代码是：

```
protected void Page_Load(object sender, EventArgs e)  
    {  
        Rep_Bind();  
    }  
    private void Rep_Bind()  
    {  
        SqlDataAdapter adp = new SqlDataAdapter("select * from tbbook",ConfigurationManager.ConnectionStrings["cn"].ConnectionString);  
        DataSet ds = new DataSet();  
        adp.Fill(ds);  
        Repeater1.DataSource = ds;  
        Repeater1.DataBind();  

    } 
```

这是html代码：

```
<asp:Repeater ID="Repeater1" runat="server" OnItemCommand="Repeater1_ItemCommand">
            <ItemTemplate>
                <table>
                    <tr>
                        <td>
                            <img src='<%#Eval("bookimg") %>'height="50" width="50" />
                            <b>Title:</b><%#Eval("booktit" )%><br />
                            <b>Author:</b><%#Eval("bookauth") %><br />
                            <b>Publisher:</b><%#Eval("bookpub") %><br />
                            <b>Price:</b><%#Eval("bookprc") %>
                        </td>
                    </tr>
                </table>

            </ItemTemplate>
        </asp:Repeater> 
```

现在我想要下一个和上一个的链接按钮。显示下一个和以前的记录。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:46:05.050

您可以添加一个 DataPager 控件。

不过，不确定您是否可以使用开箱即用的中继器进行寻呼。你需要做很多工作才能让它工作。检查此[链接](http://www.4guysfromrolla.com/articles/081804-1.aspx)

您可能想改用 ListView。

```
<asp:ListView ID="ListView1" runat="server">
                <ItemTemplate>
                    <table>
                        <tr>
                            <td>
                                <img src='<%#Eval("bookimg") %>' height="50" width="50" />
                                <b>Title:</b><%#Eval("booktit" )%><br />
                                <b>Author:</b><%#Eval("bookauth") %><br />
                                <b>Publisher:</b><%#Eval("bookpub") %><br />
                                <b>Price:</b><%#Eval("bookprc") %>
                            </td>
                        </tr>
                    </table>

                </ItemTemplate>
            </asp:ListView>
            <asp:DataPager ID="DataPager1" runat="server" PagedControlID="ListView1">
                <Fields>
                    <asp:NextPreviousPagerField ButtonType="Button" ShowFirstPageButton="True" ShowLastPageButton="True" />
                </Fields>
            </asp:DataPager> 
```

# c - 根据条件匹配数组的元素

> ID：14914376
> 
> 赞同：0
> 
> 时间：2013-02-16T19:42:30.577
> 
> 标签：c, arrays

如果 node[i] 和 node[i+1] 存在于邻居[i] 中，则存储节点的“i”位置并打印节点的“i”值。

这也可以通过反转节点数组（仅）来完成，并且对邻居 [i] 进行相同类型的检查和打印。

这段代码是我写的，效果很好，有没有其他有效的方法来执行这个。

```
#include <stdio.h>
int main()
{
    int node[5] = {44,5,4,6,40};
    int neighbor[4]= {40,3,4,6};
    int i=0,j=0,k=0;
    int found_indices[5]; // array used to store indices of found entries..
    int count = 0; //n entries found;
    int fwd_count=0;
    int postn;
    int find;
    // to find in forward direction
     for (i=0; i<4; i++) {
        for (j=0; j<4; j++) {
            if (node[i]==neighbor[j]) {
                postn=node[i];
                for (k=0; k<4; k++) {
                    if (node[i+1]==neighbor[k]) {
                      found_indices[fwd_count ++] = postn; // storing the index of found entry

                    }
                }
            }
        }
    }

   if (fwd_count!=0) {  
       for (i=0; i<fwd_count; i++)
           printf("forward relay for ==%d\n", found_indices[i]);

   } else{
     printf("Relay not found in forward\n");
  }

 // to find in backward direction
    for (i=4; i>0; i--) {
        for (j=0; j<4; j++) {
            if (node[i]==neighbor[j]) {
                postn=node[i];
                for (k=0; k<4; k++) {
                    if (node[i-1]==neighbor[k]) {
                      found_indices[count ++] = postn; // storing the index of found entry

                    }
                }
            }
        }
    }

   if (count!=0) {  
       for (i=0; i<count; i++)
           printf("backward relayy for ==%d\n", found_indices[i]);

   }else{
      printf("Relay not found in backward \n");
   }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:01:24.667

更有效的方法是转换`neighbor`为位图。用你的例子，你可以用 6 个字节来做（我假设可能的值从 0 到 40）：

00000001 00000000 00000000 00000000 00000000 01011000

检查给定的数字是否在`neighbor`其中只需检查该位是否已设置，这比遍历数组更有效。

当然，这是一个微不足道的例子，它没有任何意义。但是，如果你有更多的价值，那么它就会得到回报。

# iphone - UIGestureRecognizer 示例代码

> ID：14914383
> 
> 赞同：0
> 
> 时间：2013-02-16T19:43:45.707
> 
> 标签：iphone, ios, uigesturerecognizer

我无法弄清楚出了什么问题。下面是我的代码，它调用一次委托方法然后停止。

我应该怎么办？我还没有找到使用这些委托方法的示例代码。我发现的只是滑动和点击的手势识别器，使用不同的代表。

到目前为止的代码：

```
-(void)initTouchesRecognizer{

    DLog(@"");

    recognizer = [[UIGestureRecognizer alloc] init];

    [self addGestureRecognizer:recognizer];

}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    DLog(@"");

    NSSet *allTouches = [event allTouches];
    for (UITouch *touch in allTouches)
    {

    }

}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint location = [touch locationInView:touch.view];

}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
       DLog(@"");

}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {
    [self touchesEnded:touches withEvent:event];
} 
```

我从 initwithrect 调用 initTouchesRecognizer 来获取我的图像视图。

我从根本上做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:51:43.733

无需添加手势识别器。通过覆盖 touchesMoved、touchesEnded 和 touchesBegan 方法，我能够在屏幕上跟踪用户的手指。

根本不调用：

```
-(void)initTouchesRecognizer 
```

代码，我最初发布的代码将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T20:17:35.327

UIGestureRecognizer 是一个*抽象*类，你不应该将它直接添加到你的视图中。您需要使用从 UIGestureRecognizer 继承的*具体*子类，例如 UITapGestureRecognizer 或 UIPanGestureRecognizer。您也可以创建自己的具体子类，但这通常不是必需的。

这是将 UIPanGestureRecognizer 添加到您的视图的示例（在您的视图类代码中，手势通常是从控制器添加到视图中的）：

```
UIPanGestureRecognizer *panGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(mySelector:)];
[self addGestureRecognizer:panGesture]; 
```

在这种情况下，当用户在此视图中平移时，将调用选择器。如果你添加了一个 UITapGestureRecognizer，选择器会在用户点击时被调用。

您可以查看苹果文档以获取更多信息：http: [//developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizer_basics/GestureRecognizer_basics.html#//apple_ref/doc/uid/TP40009541- CH2-SW2](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizer_basics/GestureRecognizer_basics.html#//apple_ref/doc/uid/TP40009541-CH2-SW2)

另外，我发现 Paul Hagerty 的斯坦福讲座很棒，这里有一个关于手势识别器的： [https ://itunes.apple.com/ca/course/6.-views-gestures-january/id593208016?i=132123597&mt=2](https://itunes.apple.com/ca/course/6.-views-gestures-january/id593208016?i=132123597&mt=2)

您还应该了解，您发布的所有方法都不是委托方法，并且它们都与您在代码中添加的 UIGestureRecognizer 没有任何关系。这些是您要覆盖的 UIResponder（UIView 继承自的类）的实例方法。抽象 UIGestureRecognizer 也有具有相同名称的实例方法，但它不是在您的类中调用的 UIGestureRecognizer 方法。

# vb.net - VB.net：将应用程序部署到网站服务器

> ID：14914385
> 
> 赞同：0
> 
> 时间：2013-02-16T19:43:48.753
> 
> 标签：vb.net

我编写了一个 vb.net 应用程序，我想将它放在网页上（如 Java 小程序）。我的应用程序连接到外部网站以抓取数据（使用 WebBrowser 控件）。如何将我的申请放到网上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:46:00.317

您不能像插件一样在浏览器中运行 Windows 窗体应用程序（除非您做了大量工作以使其作为 ActiveX 控件运行，并且只能是 IE）。

也许您可以使用 ClickOnce 或其他方式制作安装程序？

# opencv - 使用来自 openCV 的特征进行模板匹配

> ID：14914391
> 
> 赞同：0
> 
> 时间：2013-02-16T19:44:37.527
> 
> 标签：opencv, computer-vision

我有一组模板图像，我需要比较测试图像并找到最佳匹配。鉴于我们有一个 SIFT 描述符，我选择最佳特征匹配，并且位于最佳匹配 3* 距离内的所有特征匹配都被认为是好的匹配。然后我把所有好的匹配的距离加起来。我不知道这是否是一个好方法，因为我认为我还应该考虑好匹配的数量，而不仅仅是好匹配之间距离的平均值。我是模板匹配的新手，所以我很感激你的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T06:38:44.567

在这些测试图像中，您正在寻找的模板是否始终处于相同的视角（未失真）？如果是这样，我会推荐一种比使用特征点匹配更准确的技术。OpenCV 提供了一个名为[matchTemplate()](http://docs.opencv.org/modules/imgproc/doc/object_detection.html)的函数，甚至还有一个 gpu 实现。您的测量可以基于该函数的像素平均结果。

如果它们被扭曲，那么使用 SIFT 或 SURF 可能就足够了。您应该通过[findHomography()](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html?highlight=findhomography#Mat%20findHomography%28InputArray%20srcPoints,%20InputArray%20dstPoints,%20int%20method,%20double%20ransacReprojThreshold,%20OutputArray%20mask%29)发送您的点匹配，这将使用 RANSAC 删除异常值。在此测试中幸存下来的匹配数可用作确定是否找到对象的衡量标准。

# android - 如何使用phonegap在andorid中将元素填充到整个屏幕的宽度和高度

> ID：14914397
> 
> 赞同：1
> 
> 时间：2013-02-16T19:45:04.693
> 
> 标签：android, jquery, cordova, jquery-mobile

我正在使用phonegap和jquery mobile。我的代码如下

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=screen.width; initial-scale=1" />
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" href="jquery.mobile/jquery.mobile-1.1.0.css" type="text/css">
  <script type="text/javascript" src="jquery.mobile/jquery-1.7.2.min"></script>
  <script type="text/javascript" src="jquery.mobile/jquery.mobile-1.1.0.js"></script>
  <script type="text/javascript" src="jquery.mobile/phonegap-1.4.1.js"></script>
<script type="text/javascript" charset="utf-8" src="main.js"></script>
 <!-- CDN Respositories: For production, replace lines above with these        uncommented       minified versions -->
<!-- <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />-->
<!-- <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>-->
<!-- <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>-->
</head>
<body>
<div id="page" data-role="page" data-theme="b">
<div class="ui-btn-corner-top" data-role="header" data-theme="b" >
<h1>Login</h1>
</div>
<div data-role="content">
<div>
<h4>
  <label for="userName" style="text-align:center">User Name</label>
</h4>
<input name="userName" type="text" id="userName" value="" data-theme="b"  />
</div>
<div>
<h4>
  <label for="passwordinput" style="text-align:center">Password</label>
</h4>
<input name="passwordinput" type="password" id="passwordinput" value="" data-theme="b"  />
</div>
</div>
<div class="ui-btn-corner-bottom" data-role="footer" data-theme="b">
<h4>Auth Demo</h4>
</div>
</div>
</body>
</html> 
```

但是元素并没有填充整个屏幕......它在屏幕中间结束。如果得到整个屏幕的高度和宽度，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:47:42.100

也许你可以尝试这样做：

```
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
</style>

<body> 
<div id="page" data-role="page" data-theme="b" style="width:100%; height:100%">
...
</div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T20:14:49.443

将 data-position="fixed" 属性添加到页脚 div。

更多细节在这里：http: [//jquerymobile.com/demos/1.2.0/docs/toolbars/bars-fixed.html](http://jquerymobile.com/demos/1.2.0/docs/toolbars/bars-fixed.html)

# actionscript-3 - FlashBuilder 4.6 mx.controls.Button 丢失？

> ID：14914403
> 
> 赞同：2
> 
> 时间：2013-02-16T19:45:33.547
> 
> 标签：actionscript-3, flash, apache-flex, button, flash-builder

我在 Flash Builder 中编写了我的第一个应用程序，但我对 Flash 有很多经验。我并尝试在 Flash Builder 中使用按钮类，但我的错误是“找不到导入按钮”。我尝试导入 flash.display、flash.ui 来查看按钮隐藏在其他地方。重点是通过 xml 动态加载按钮及其标签。任何帮助表示赞赏。谢谢！

```
<fx:Script>
    <![CDATA[
        import flash.events.*;
        import mx.controls.Button;

        private function doAdd(e:Event):void {

            var buttonList:XMLList = new XMLList(cutsXML.cut.@name);
            for(var i=0; i<buttonList.length(); i++){
                var btn:Button = new Button();
                btn.label = buttonList[i];
                buttonBox.addElement(btn);
            }
        }
    ]]>     
</fx:Script>

<s:VGroup left="30" right="30" top="50" bottom="30" id="buttonBox">
</s:VGroup> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:09:10.847

我猜你正在创建一个移动应用程序？因为 mx 组件在移动应用程序中不可用（默认情况下）。

您可以使用[spark 按钮](http://flex.apache.org/asdoc/spark/components/Button.html)- spark.components.Button - 或通过导入 mx.swc 库（在 flex sdk 中找到）手动包含 mx 组件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:22:31.883

将 mx.swc 添加到您的项目中，就可以了。

在 Flash Builder 6.0 中，执行以下操作：

*   右键单击 Package Explorer 透视图中的项目
*   特性...
*   Flex 构建路径（在左侧导航窗格中）
*   单击添加 SWC...
*   在您的盒子上找到 mx.swc。在撰写本文时，在 OSX 上是：

    /Applications/Adobe Flash Builder 4.6/sdks/4.6.0/frameworks/libs/mx/mx.swc

*   点击确定

*   重建你的项目

# css - CSS 检测 iphone ipad 或任何其他手持设备

> ID：14914407
> 
> 赞同：3
> 
> 时间：2013-02-16T19:45:50.433
> 
> 标签：css

也许这很简单，但我还没有找到答案

如何通过 CSS 在任何模式下检测 iphone、ipad、ipad、android 手机？

我 [纯粹通过 css 阅读了这篇 Detect iPhone/iPad，](https://stackoverflow.com/questions/3839809/detect-iphone-ipad-purely-by-css) 它描述了如何检测所有*特定*设备

但我要寻找的是区分台式机/笔记本电脑和所有 ipad/ipod/iphone/android 设备

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T20:32:20.387

以下是我对此事的说明： 对于任何设备 - 对其屏幕尺寸和比例进行研究，然后在每个设备的样式表中进行 @media 查询。

**iPhone4**

```
<link rel="stylesheet" media="only screen and (-webkit-min-device-pixel-ratio: 2)" type="text/css" href="iphone4.css" /> 
```

**（纵向或横向）在 iPad 上**

```
<link rel="stylesheet" media="all and (orientation:portrait)" href="portrait.css"> 
<link rel="stylesheet" media="all and (orientation:landscape)" href="landscape.css"> 
```

**手机肖像**

```
 @media screen and (max-device-width: 480px) and (orientation: portrait){
 /* some CSS here */
 } 
```

**手机景观**

```
@media screen and (max-device-width: 640px) and (orientation: landscape){
/* some CSS here */
} 
```

**手机纵向或横向**

```
@media screen and (max-device-width: 640px){
  /* some CSS here */
} 
```

**iPhone 4+ 纵向或横向**

```
@media screen and (max-device-width: 480px) and (-webkit-min-device-pixel-ratio: 2){
/* some CSS here */
} 
```

**仅限 iPhone 5**

```
@media only screen and (min-device-width: 640px) and (max-device-width: 1136px) and (-    webkit-min-device-pixel-ratio: 2) {
    /* styles here */
} 
```

**iPhone < 5：纵横比**

```
@media screen and (device-aspect-ratio: 2/3) {} 
```

**平板电脑纵向或横向**

```
@media screen and (min-device-width: 768px) and (max-device-width: 1024px){
/* some CSS here */
} 
```

**台式机**

```
@media screen and (min-width: 1024px){
/* some CSS here */
} 
```

款式仅介于两种尺寸之间。

```
@media screen and (min-width: 319px) and (max-width: 1281px){} 
```

BTDUBS - 你知道 WordPress 内置了一个 is_iphone() 全局变量吗？

```
global $is_iphone;
if ( $is_iphone ) {
 // do something if $is_iphone is true
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T20:14:07.920

您可以使用@media 查询来解决您的问题，以下可能是您可以尝试的。您还可以将设备方向设置为针对您的设备的设置，或者设置您的最大宽度，如下所示，然后编写您的 css。希望这可以帮助。

```
@media screen and (max-device-width: 480px) {
  .class {
    background: #000;
  }
} 
```

# css - 扩展页面末尾的父 div - 需要适合内容

> ID：14914410
> 
> 赞同：0
> 
> 时间：2013-02-16T19:46:04.397
> 
> 标签：css, html

由于某种原因，父 div 扩展到页面底部。我试图让它的内容有一个高度。

HTML：

```
<div id="sideMenu" >
    <ul class="bmenu">
        <li onclick="wideScreen()">Wide Screen</li> <!--turn sidebar on/off-->
        <li onclick="randFrame()">Random Border</li> <!--randomize vidcontain border-->
        <li onclick="randBG()">Control Bar</li>
    </ul>
    <div style="clear:both;"></div>
</div> 
```

CSS：

```
#sideMenu{
    position: fixed;
    left: -90px;
    top: 250px;
    height:100%;
    width:100px;
    background-color: black;
    border: 3px solid #999400;
    z-index:1000000;
    float:left;
    display:table;
    -webkit-transition-duration: 0.3s;
    -moz-transition-duration: 0.3s;
    -o-transition-duration: 0.3s;
    transition-duration: 0.3s;
    -webkit-border-radius: 0 5px 5px 0;
    -moz-border-radius: 0 5px 5px 0;
    border-radius: 0 5px 5px 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:49:53.353

`#sideMenu`延伸到页面底部，因为它有`height:100%`. 这意味着 div 的高度将根据包含块的高度进行计算（在这种情况下，可能是`body`）。如果未明确指定包含块的高度，则该值将计算为`auto`。[可在此处找到](https://developer.mozilla.org/en-US/docs/CSS/height)[有关该物业的更多信息`height`](https://developer.mozilla.org/en-US/docs/CSS/height)。

要解决您的问题，只需`height:100%`从 CSS 中删除。这样，`#sideMenu`只会扩展到其内容的高度（在您的情况下是列表项）。

[JS 小提琴示例](http://jsfiddle.net/rZtyB/)

# php - 在 PHP Server 上，如何在漫长的等待后获得最终的搜索页面内容？

> ID：14914415
> 
> 赞同：0
> 
> 时间：2013-02-16T19:46:40.603
> 
> 标签：php, redirect, timeout, progress

我搜索了很多地方，但找不到解决方案。

我想做的是：

1.  将PHP服务器上的表单提交到另一台服务器，请求是搜索一些结果；
2.  搜索需要几分钟，所以对方服务器会先返回一个进度html页面，当最终结果返回时，遗嘱页面会回调ping对方服务器；
3.  获取最终结果页面

如果表单是从浏览器提交的，则该功能很容易。查看进度页面后，将返回最终的搜索结果页面并显示在浏览器中。

但我不想在我的客户身上展示这些。我想在我的服务器上处理它，处理数据并在我的客户端上显示其他内容。

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:52:05.910

您将需要某种方式来跟踪表单是否已被处理——我建议使用数据库条目。所以这里是你的算法的基础知识：

1.  当用户将表单提交给您的客户时，您将向数据库添加一条新记录。
2.  此表单中所需的数据将发送到其他服务器。
3.  任何访问您页面的客户都将显示“等待”布局（因为完整的 DB 列设置为“0”）
4.  处理完成后，另一台服务器会点击您服务器上的侦听器脚本，并为其提供表单 ID。然后将数据库中的完整列更新为“1”
5.  当用户现在访问该页面时，他们会看到它已完成。

我不会为你编写代码，但这个功能概述应该会让你走上自己的道路。

# ajax - 条形码扫描仪和 jquery ajax 调用？

> ID：14914419
> 
> 赞同：0
> 
> 时间：2013-02-16T19:46:47.767
> 
> 标签：ajax, jquery, ajax-request

我坚持以下几点：我在 index.php 上有一个带有一个输入字段的简单表单。单击按钮时，表单向 lookup.php 发出 jquery ajax 请求，该请求返回一些数据。该数据显示在 index.php 上。到目前为止没有什么特别的，当我使用键盘时它可以工作。

现在，当我使用条形码扫描仪时它不起作用，经过一些试验和错误，看起来条形码扫描仪使用“提交”处理程序。但在我的情况下，ajax 请求由

`$("#btnSubmit").on("click",`

并且按钮 btnSubmit 是 type=button 并且不提交。

我该如何解决这个问题，以便条形码扫描仪也发出 ajax 请求？使用 $.ajax 提交的 jquery 似乎不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:13:16.750

如果您有一个简单的表格，例如：

```
<div id="status"></div>
<form action="">
   <input id="foo"/>
   <input type="submit" value="Submit">
</form> 
```

你可以做：

```
$("form").submit(function(e) {
      e.preventDefault();
      $.ajax({
            url: "lookup.php",
            type: "POST",            // Can change this to get if required
            data: { foo: $("#foo").val(); },
            success: function(data) {
                     $("#status").html(data);      
            },
            error: function(jqXHR, textStatus, errorThrown) {
                   $("#status").text(textStatus);
            }
      });
}); 
```

# image - 为每页提供多个图像的好技术

> ID：14914421
> 
> 赞同：0
> 
> 时间：2013-02-16T19:46:56.977
> 
> 标签：image, performance, cdn, download-speed

我有一个 Web 应用程序需要为每页提供大量小图像（最多 100 个）。我可以使用缓存来减少对数据库/后端的调用，但是必须对图像本身发出如此多的单独请求会产生明显的影响，因为图像需要一些时间来请求和渲染，尤其是在较慢的连接上。

在一个页面上提供多个图像有哪些好的做法？我知道使用 CDN（例如 S3 + Cloudfront）来减少 http 请求的瓶颈并从更近的地理位置提供内容，以及仅当它们在浏览器中进入用户视图时才可能通过 Ajax 加载图像/内容. 是否有其他技术可以为图像密集的页面提供显着的性能提升？它们是否与硬件、前端或其他东西相关并不重要。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:25:23.980

在一个页面请求中加载 100 张图片会增加页面加载时间，因为每张图片都需要时间在浏览器中加载。

简单的技术是只加载一个默认图像，意味着每 100 个图像的来源应该是普通的默认图像，并且只有一个图像不会花费太多时间来加载。

当页面加载其所有内容时，然后尝试在 jQuery 帮助下加载每个图像。

使用lazyload jQuery插件在页面加载后加载所有图像。

像这样

```
<img class="lazy" src="default.jpg" data-original="img1.jpg" >
<img class="lazy" src="default.jpg" data-original="img2.jpg" >
<img class="lazy" src="default.jpg" data-original="img3.jpg" >
.......
<img class="lazy" src="default.jpg" data-original="img100.jpg"> 
```

并在脚本中使用以下代码

```
$(document).ready(function(){
  $("img.lazy").lazyload();
}); 
```

您可以为每个图像添加 expires 标头，允许浏览器缓存它们而不是在下一次请求时请求它们。

希望它会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T19:48:39.153

您始终可以将图像组合成单个图像并使用 CSS 一次仅显示部分图像（通常称为 CSS sprites）

谷歌还有一篇关于他们如何实现“即时预览”的相当深入的文章，其中涵盖了一些优化：

[http://googlecode.blogspot.com/2010/11/instant-previews-under-hood.html?m=1](http://googlecode.blogspot.com/2010/11/instant-previews-under-hood.html?m=1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T19:51:55.033

您可以为图像使用不同的域 - 这些将在与当前域不同的线程上调用。

您还可以将图像托管在经过优化以提供静态内容的 Web 服务器上 - 这将比动态服务器更快。

以上可以扩展到几个这样的域 - 如果浏览器设置为每个域有 4 个线程，则您添加的每个域将并行化为额外的 4 个（这也是使用 CDN 的好处之一）。

另一种*可能*适用的常见技术是使用[CSS sprites](http://css-tricks.com/css-sprites/) - 如果您有一堆通常一起使用的图像，您可以将它们全部放在一个*图像*中，并使用 CSS 仅在需要它们的地方显示需要的位.

# javascript - OOP 语言中的变量重新分配

> ID：14914427
> 
> 赞同：0
> 
> 时间：2013-02-16T19:47:40.150
> 
> 标签：javascript, operator-precedence

今天我正在玩一些变量以更好地了解它们，我遇到了一些对我来说看起来很奇怪的东西。这是 JavaScript 中的示例

```
var foo = "Sethen";
var bar = foo;
var bar = "Sethen is " + bar;
console.log(bar); 
```

我们得到的输出`Sethen is Sethen`不是我所期望的。我看到的是一个赋值`bar`，然后另一个赋值`bar`覆盖了这个`bar`值。我希望看到`Sethen is Sethen is`。这也发生在 PHP 中。我在这里缺少一些基本的东西吗？

为什么这`Sethen is Sethen`在`bar`被分配两次时起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T19:50:09.923

`bar`在计算右侧表达式*后*赋值。

在涉及操作顺序时，许多语言中的大多数赋值运算符的优先级都非常低。

Mozilla 有一个关于[JavaScript 运算符优先级的完整文档。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T19:50:10.707

表达式**"Sethen is " + bar;** 在赋值之前执行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T19:55:59.160

除了运算符优先级，您还需要了解运算符关联性 - [http://en.wikipedia.org/wiki/Operator_associativity](http://en.wikipedia.org/wiki/Operator_associativity)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T19:57:01.490

当您想评估任何语言的表达式时，编译器（**js中的****解释**器）首先评估表达式的计算部分（右侧），然后将评估值存储（分配）给变量。 在这种情况下，您首先通过在下一行中分配给变量 bar ，您有一个表达式，编译器首先在其中计算，现在（分配之前）保留哪个 bar 。评估导致。然后编译器将计算值分配给变量.经过所有步骤，当您打印结果时，您会看到.**`"Sethen"``var bar = foo;``"Sethen is " + bar;``"Sethen"``"Sethen is Sethen"``bar``"Sethen is Sethen"`**

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T19:59:02.770

```
 step 1:
             var foo="sathen";
             It store string "sathen" in foo

        step 2:
              var bar=foo;
              bar value contains foos value now bar="sathen" and foo="sathen"

        step 3:     
              var bar= "sathen is " + bar
              it will replce the value of bar in right side is "sathen is" +bar value4
                 "sathen"  
         So,your ans will come "sathen is sathen" 
```**

# css - Safari 不能旋转超过 360 度

> ID：14914434
> 
> 赞同：0
> 
> 时间：2013-02-16T19:48:26.177
> 
> 标签：css, google-chrome, safari, css-transitions, css-transforms

Safari 6.0.2 可以进行 360 度以上的旋转吗？我有一个[简单的实验](http://cssdeck.com/labs/full/h7paauob)。在 Chrome 版本（不是金丝雀，会损坏，moz 也会损坏）和 Safari 中尝试。

更新：自从我找到解决方案后，我已经对其进行了编辑，使其在 Chrome 和 Safari 中正常工作，但我仍然提供了不正确的版本和正确的版本进行比较。（注意：此时 Safari 版本为 6.0.2）。顺便说一句，我只在 MAC 中测试，尚未在 Windows 中测试

不正确的版本： [在 Safari 中失败](http://cssdeck.com/labs/full/3rahxwfj)

正确版本：[简单实验](http://cssdeck.com/labs/full/h7paauob)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T19:59:24.573

过渡时不能同时具有多个变换样式，例如

.春{

```
-webkit-transform: scale(1.0); /*we want rotate, so remove this*/
transform: scale(1.0); /*we want rotate, so remove this*/

-webkit-transition: all .8s ease;
transition: all .8s ease; 
```

}

.春：悬停{

```
-webkit-transform: rotate(-900deg); /*we want this to be rotate few cycle*/
transform: rotate(-900deg); 
```

}

在正常状态下不能有刻度，在悬停状态下不能旋转。

这绝对是 safari 中的一个错误（或其他问题），因为 Chrome 可以正确处理它。

# c - 如何在C中的链接列表中删除后释放节点

> ID：14914438
> 
> 赞同：1
> 
> 时间：2013-02-16T19:48:47.223
> 
> 标签：c, free

我有一个非常基本的疑问。我使用结构创建了一个链接列表，这是我的删除代码。

```
void delete(int num)
{
struct node* temp=head;
struct node* prev=head;
if(temp == NULL)
printf("List Empty\n");
else
{
while(temp != NULL)
{
    if(temp->value == num)
    {
            prev=temp->next;
            free(temp);     
            break;
    }
    else
    {       
            prev=temp;
            temp=temp->next;        

    }
} 
```

运行此代码后，节点不会被删除。如果我在 free(temp) 之后打印 temp->value，则值为 0。但情况并非如此。免费的应该擦除节点。所以我不明白 0 从哪里出现。知道这段代码有什么问题吗？

我的表演功能：

```
void show()
{
struct node *temp = head;
while(temp != NULL)
{
printf("----  %d  ---- ", temp->value);
temp=temp->next;
}
printf("\n\n");
} 
```

我的结构：

```
struct node
{
int value;
int pos;
struct node* next;
}; 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:51:04.133

当您在以下位置找到节点时`delete`：

```
if(temp->value == num)
{
        prev=temp->next;
        free(temp);     
        break;
} 
```

您实际上并没有使先前的节点下一个指针指向节点的下一个链接。

相反，您应该这样做

```
prev->next = temp->next; 
```

# android - 应用程序不显示联系人

> ID：14914443
> 
> 赞同：0
> 
> 时间：2013-02-16T19:49:29.850
> 
> 标签：android, android-emulator

我创建了一个应用程序，它向我展示了内容提供者“content://contacts/people”的所有列。其中一个字段是 times_contacted。所以，我做了一个应用程序来显示显示名称和 times_contacted。我知道 ContactContract。但我想知道为什么闲置代码没有显示帐户详细信息。该应用程序在 JellyBean 模拟器上运行良好，但在我在 Ice Cream Sandwich 上运行的手机上，该应用程序显示一个空白活动，而在模拟器上显示联系人列表。我想知道的另一件事是，在使用 CursorLoader 时，我如何遍历查询结果，因为我无法获得任何游标引用。我应该单独使用 ContentResolver 吗？这是我的应用程序的代码。我已经包含了 READ_CONTACT 权限。

```
package legacy_systems.contactsdisplay;

import android.net.Uri;
import android.os.Bundle;
import android.app.ListActivity;
import android.app.LoaderManager.LoaderCallbacks;
import android.content.CursorLoader;
import android.content.Loader;
import android.view.Menu;
import android.widget.SimpleCursorAdapter;
import android.widget.Toast;
import android.database.Cursor;
public class MainActivity extends ListActivity implements LoaderCallbacks<Cursor>{
    SimpleCursorAdapter madapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        madapter = new SimpleCursorAdapter(this, 
                                           android.R.layout.simple_list_item_2,
                                           null,
                                           new String[]{"display_name","times_contacted" },
                                           new int[]{android.R.id.text1, android.R.id.text2},0);
        setListAdapter(madapter);

        getLoaderManager().initLoader(0, null, this);
        Toast.makeText(this, "Done", Toast.LENGTH_LONG).show();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    public Loader<Cursor> onCreateLoader(int id, Bundle args) {
        Uri baseUri = Uri.parse("content://contacts/people");
        return new CursorLoader(this, baseUri,null,null,null,null);
        // TODO Auto-generated method stub      
    }
    @Override
    public void onLoadFinished(Loader<Cursor> arg0, Cursor arg1) {
        // TODO Auto-generated method stub
        madapter.swapCursor(arg1);
    }

    @Override
    public void onLoaderReset(Loader<Cursor> arg0) {
        // TODO Auto-generated method stub
        madapter.swapCursor(null);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:09:39.910

好吧，在遍历从查询联系人内容提供者获得的游标时，我了解到游标是空的。它没有任何行。所以，没有机会被展示。

# java - 我怎样才能知道串口上收到的消息的长度是多少？

> ID：14914444
> 
> 赞同：2
> 
> 时间：2013-02-16T19:49:41.107
> 
> 标签：java, buffer, inputstream

InputStream inputFromPort;

```
 try {
        inputFromPort = serial.getInputStream();  //SerialPort

        b=new byte[20];

        inputFromPort.read(b);

        reading=new String(b,"UTF-8");

        System.out.println(reading.length());

        System.out.println("new message: " + reading);

        inputFromPort.close();

        serial.close();         
    } 
```

结果：新消息：你好，世界！-> 六个框符号没问题 ->（我不能在这里复制）我知道它们出现是因为 b 的长度大于“你好，世界！”，如果我知道收到的大小，那就太好了消息，所以我可以在那个大小上初始化字节数组 b

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:51:20.327

检查返回值`inputFromPort.read(b);`：

```
 int readLength = inputFromPort.read(b); 
```

然后你必须只用接收到的字节创建你的字符串，这是调用实际写入的字节数组的一部分`read()`：

```
String reading = new String(b, 0, readLength, "UTF-8"); 
```

这样你就不会在“Hello, World!”之后出现“盒子符号”了。

# iphone - 努力理解toValue, byValue的CABasicAnimation, ios

> ID：14914445
> 
> 赞同：4
> 
> 时间：2013-02-16T19:49:49.590
> 
> 标签：iphone, ios, objective-c, core-animation, cabasicanimation

我正在学习另一种创建自定义指标的方法。下面是使用 CABasicAnimation 完成任务的教程的部分代码。

```
-(void)spin
{
    CABasicAnimation *spinAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
    spinAnimation.toValue           = [NSNumber numberWithFloat:2*M_PI];
    spinAnimation.duration          = self.animationDuration;
    spinAnimation.delegate          = self;
    [self.layer addAnimation:spinAnimation forKey:@"spinAnimation"];
} 
```

第 2 行的*toValue*是什么以及它的用途。当我尝试使用

> spinAnimation.byValue = [NSNumber numberWithFloat:2*M_PI];

我不明白这些插值值。正在互联网上搜索，但仍然无法获得它的全貌。如果您对此有任何想法，请提供帮助。感谢所有评论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T21:46:01.063

CABasicAnimations 可能有点难以理解，但与动画相关的属性真的不是那么难，一旦你可以想象它们试图完成的事情。例如，如果我有一个代表图层的红色方块，并且我想将它旋转 360°（就像你在那里所做的那样），那么我必须初始化一个动画对象，告诉它我想要动画什么，以及在哪里我想让动画去。

您提供的动画改变了 CALayer 的内部矩阵，使其在给定的持续时间内`2 * M_PI`从当前位置（因为您没有指定 a ）旋转到给定的值（在本例中为 或 360˚） 。`fromValue`一个给定的值告诉动画，在给定的时间段内，您希望动画在给定的持续时间内插入（或移动）**给**定的值（例如，您可以通过指定将动画分成 45˚“块”一个`byValue`）`@(M_PI/2)`。默认的 byValue 是动画持续时间和动画持续时间之差的除法，以`toValue`使`fromValue`动画平滑连续。

![在此处输入图像描述](../Images/ea9c7f44e91b399f3f60e5efea114d90.png)

因此，您可以将动画视为**从**层的初始旋转**值****到**层的新旋转**值**，**通过**在一段时间内插入给定的数量或**值。**

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2018-07-05T07:32:23.570

你可以理解“byValue”它的意思加上原来的值。

# python - 在 django 中通过 S3 提供私有图像

> ID：14914452
> 
> 赞同：0
> 
> 时间：2013-02-16T19:50:11.773
> 
> 标签：python, django, amazon-s3, boto

我正在开发一个 django 应用程序，它允许用户上传照片并查看它们，这些照片在 S3 中作为私有存储。现在每次我必须向他们展示缩略图时，我都会生成一个 url 并将其提供给模板。这个过程真的很慢，需要很长时间。我希望还有其他我没有探索过的方法，请帮助我。我希望有像 x-sendfile 这样的东西，我在其中对用户进行身份验证，然后将其重定向到 S3。如果我遗漏了什么，请告诉我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-08T19:22:39.657

我用 S3 分叉了 sorl-thumbnail 以使其快速。我的代码在这里[sorl_thumbnail-async](https://github.com/neokya/sorl-thumbnail-async)

但我开始知道[easy_thumbnails](https://github.com/SmileyChris/easy-thumbnails)完全符合我的要求，所以我在我当前的项目中使用它。Sorl 自去年以来未更新，请使用 easy_thumbnails 和 S3 等远程存储。您可能会发现我在此主题上的帖子很有[用](http://neokya.github.io/2013/07/please-don%27t-use-my-package/)

[编辑]：sorl-thumbnail 现在有新的维护者，并更新了最新的 django 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T02:01:52.167

您可以使用[sorl-thumbnail](https://github.com/sorl/sorl-thumbnail)提供具有可插拔 S3 后端支持的缩略图以及用于缓存的 memcached 或 redis。

您可能会发现这个问题很有帮助：[Storing images and thumbnails on s3 in django](https://stackoverflow.com/questions/5877497/storing-images-and-thumbnails-on-s3-in-django)

# c# - 我们如何从代码文件中调用 javascript 函数？

> ID：14914454
> 
> 赞同：0
> 
> 时间：2013-02-16T19:50:43.387
> 
> 标签：c#, javascript, asp.net

我正在制作简单的机器人，它将从脚本中获取值，然后将它们放入另一个网站的文本框中，然后执行单击按钮，以便机器人可以登录另一个网站我已经编写了代码，但我想在页面时调用它已满载。我试过`<body onload>`了，但它不起作用。

这是否有可能我们可以从`documentcompleted`事件下的 c# 代码文件或任何其他方式调用我们的 javascript 函数？

```
<script type="text/javascript">
    function myf() {
        document.getElementsByTagName("INPUT")[1].setAttribute("value", "userabc");
        document.getElementsByTagName("INPUT")[2].setAttribute("value", "passwordabc");
        document.getElementsByTagName("INPUT")[3].click();
    }
</script>

//C# Code file
protected void Page_Load(object sender, EventArgs e)
{
    Response.Redirect("https://www.iauc.co.jp/auction/prelogin01_en.jsp?timestamp=1360652615774");
}

protected void Page_LoadComplete(object sender, EventArgs e)
{
    //Can we call javascript function here    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:06:46.803

我不完全理解你，但如果你想在客户端 Web 浏览器上完全下载文档时运行脚本，那么你可以使用 jQuery 的文档就绪事件。

将 jQuery 添加到您的网页，然后将以下脚本块添加到 jQuery 引用之后的页面。

```
<script type="text/javascript">
    $(function () {
        // write your JavaScript code here
        myf();
    });
</script> 
```

当页面的 DOM 已完全加载时，将触发此脚本块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:55:26.433

尝试这个

```
// here's will be your script
string script = "";
ClientScriptManager clientScript = Page.ClientScript;
clientScript.RegisterStartupScript(typeof(Page), "a key", script); 
```

更新 ：

```
this will check it if its fully loaded and then do what you want

$(document).ready(function() 
 {
   //page is fully loaded and ready, do what you want
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T19:57:12.117

您必须编写完整的 java 脚本，包括字符串变量中的脚本标记。然后你可以 Response.Write() 字符串变量。

```
string script = "<script type="" language=""> YOUR JAVASCRIPT </script>";
Response.Redirect(script); 
```

# javascript - jquery乘以2个文本框然后显示解决方案

> ID：14914458
> 
> 赞同：0
> 
> 时间：2013-02-16T19:51:00.150
> 
> 标签：javascript, jquery, multiplication

我有这段代码不起作用。我正在尝试将 2 个文本框相乘并显示解决方案，但是当我单击时它没有显示任何内容。到目前为止我的代码是这样的......下面的代码有什么问题？

```
<script type="text/javascript">
    $('#AddProduct').click(function() {
        var totalPrice = $('#debt').val() * $('#income').val();
        $('#solution').val() = totalPrice;
    });
</script>

<form name="form" method="post" action="">
    <table>
        <tr>
            <td><input type="text" name="income" id="income" /></td>
            <td><input type="text" name="debt" id="debt" /></td>
            <td><input type="text"  id="solution"  name="solution" /> </td>
        </tr>
  </table>
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T19:53:09.063

您的 jQuery 需要：

```
$('#AddProduct').click(function() {
   var totalPrice = parseInt($('#debt').val()) * parseInt($('#income').val()); // you can't multiply strings
   $('#solution').val(totalPrice); // This is how you use .val() to set the value.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:53:32.980

这是您设置解决方案文本框值的方式：

```
$('#solution').val(totalPrice); 
```

此外，您的页面上是否真的有一个 id 为“AddProduct”的元素？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T19:54:49.430

```
var totalPrice = $('#debt').val() * $('#income').val();
$('#solution').val(totalPrice); 
```

[演示](http://jsfiddle.net/NqaCR/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-16T19:54:51.187

之后，您将 jquery 添加到您的页面，如下所示

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

您可以执行以下操作：

```
$('#AddProduct').click(function() {
var totalPrice = parseInt($('#debt').val(),10) * parseInt($('#income').val(),10);
$('#solution').val(totalPrice);
}); 
```

你必须告诉它你想要`value`你所定位的输入。而且，始终提供第二个参数（基数）给`parseInt`. 如果没有提供它，它会尝试过于聪明并自动检测它，并可能导致意想不到的结果。

提供`10`假设您想要一个以 10 为基数的数字。

# c++ - FFmpeg 内存泄漏

> ID：14914462
> 
> 赞同：5
> 
> 时间：2013-02-16T19:51:24.037
> 
> 标签：c++, memory-leaks, ffmpeg

我只开发了一个简单的库来修改我在互联网上找到的库。

让我害怕的是，当我播放avi时，它会在视频结束时播放并释放内存，但是当我播放视频时，它就像内存泄漏一样！尽管视频已经结束并且 FreeAll 方法（删除上下文的函数等）已被调用，但它会增长到 138mb。

这是导致内存泄漏的方法的代码：

```
int VideoGL::NextVideoFrame(){
int frameDone = 0;
int result = 0;
double pts = 0;

if(!this->ended){

if (!_started) return 0;
AVPacket* packet;

// Get the number of milliseconds passed and see if we should display a new frame
int64_t msPassed = (1000 * (clock() - _baseTime)) / CLOCKS_PER_SEC;
if (msPassed >= _currentPts)
{
    // If this is not the current frame, copy it to the buffer
    if (_currentFramePts != _currentPts){
        _currentFramePts = _currentPts;
        memcpy(buffer_a,buffer, 3 * _codec_context_video->width * _codec_context_video->height);
        result = 1;
    }

    // Try to load a new frame from the video packet queue
    bool goodop=false;
    AVFrame *_n_frame = avcodec_alloc_frame();
    while (!frameDone && (packet = this->DEQUEUE(VIDEO)) != NULL)
    {
        if (packet == (AVPacket*)-1) return -1;

        goodop=true;

        _s_pts = packet->pts;
        avcodec_decode_video2(_codec_context_video, _n_frame, &frameDone, packet);
        av_free_packet(packet);

        if (packet->dts == AV_NOPTS_VALUE)
        {
            if (_n_frame->opaque && *(uint64_t*)_n_frame->opaque != AV_NOPTS_VALUE) pts = (double) *(uint64_t*)_n_frame->opaque;
            else pts = 0;
        }
        else pts = (double) packet->dts;

        pts *= av_q2d(_codec_context_video->time_base);

    }

    if (frameDone)
    {
        // if a frame was loaded scale it to the current texture frame buffer, but also set the pts so that it won't be copied to the texture until it's time
        sws_scale(sws_ctx,_n_frame->data, _n_frame->linesize, 0, _codec_context_video->height, _rgb_frame->data, _rgb_frame->linesize);

        double nts = 1.0/av_q2d(_codec_context_video->time_base);
        _currentPts = (uint64_t) (pts*nts);

    }

    avcodec_free_frame(&_n_frame);
    av_free(_n_frame);

    if(!goodop){
        ended=true;
    }
}
}

return result;
} 
```

我会等待答案，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-10T11:21:48.233

我也有内存泄漏问题。对我来说，当我包含以下命令时，解除分配工作：

**班级成员：**

```
AVPacket avpkt;
AVFrame *frame;
AVCodecContext *avctx;
AVCodec *codec; 
```

**构造函数：**

```
av_init_packet(&avpkt);
avcodec_open2(avctx, codec, NULL);
frame = avcodec_alloc_frame(); 
```

**析构函数：**

```
av_free_packet(&avpkt);
avcodec_free_frame(&frame);
av_free(frame);
avcodec_close(avctx); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-08T03:46:54.450

我也有同样的问题。根据 ffplay.c 你应该打电话

```
av_frame_unref(pFrame);
avcodec_get_frame_defaults(pFrame); 
```

每次`sw_scale`通话后。这将在解码期间释放所有 malloc。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-12T13:14:21.970

我使用 FFmpeg 有类似的例程会泄漏内存。我通过为每次调用 avcodec_decode_video2 的帧和数据包对象释放内存找到了解决方案。

在您的代码中，数据包对象被释放，但帧没有。在 avcodec_decode_video2 之前添加以下行应该可以解决内存泄漏。我发现在已经释放的框架对象上调用 avcodec_free_frame 是安全的。您可以在 while 循环之前删除帧的分配。

```
avcodec_free_frame(&_n_frame);
_n_frame = avcodec_alloc_frame();
avcodec_decode_video2(_codec_context_video, _n_frame, &frameDone, packet); 
```

# python - Python sizers - 水平行中的垂直列？

> ID：14914464
> 
> 赞同：0
> 
> 时间：2013-02-16T19:51:32.450
> 
> 标签：python, wxpython

我正在学习 wxPython，但遇到了问题。下面是我的代码。它真的不起作用。我想要做的是在文本区域下方的左上部分中获得一个按钮，上面写着“输入任务”。我希望文本输入区域和“输入任务”按钮位于一列中，以便两者的组合高度等于它们旁边的开始和退出按钮的高度。有什么帮助吗？尺寸调整器让我感到困惑。

```
import wx
import datetime

class UpperPanel(wx.Panel):
    def __init__(self, *args, **kwargs):
        wx.Panel.__init__(self, *args, **kwargs)

        #Timer
        self.timer = wx.Timer(self)
        self.Bind(wx.EVT_TIMER, self.Update, self.timer)     

        #Enter Task Field
        self.edit = wx.TextCtrl(self, -1, size=wx.Size(200, -1))
        #Enter Task Button
        self.button = wx.Button(self, -1, label="Enter!")
        self.midpanel = MiddlePanel(self)
        self.button.Bind(wx.EVT_BUTTON, self.midpanel.OnEnterPressed)
        #Start/Stop Button
        self.start_button=wx.Button(self, label="Start", size=(150,50))
        self.Bind(wx.EVT_BUTTON, MiddlePanel.StartButton, self.start_button)
        #Exit Button
        self.exit_button=wx.Button(self, -1, label="Exit", size=(150,50))
        self.Bind(wx.EVT_BUTTON, MainWin.CloseButton, self.exit_button)

        self.sizer = wx.BoxSizer()
        self.sizer.Add(self.edit, 1, wx.EXPAND)
        self.sizer.Add(self.start_button, 0, wx.EXPAND)
        self.sizer.Add(self.exit_button, 0, wx.EXPAND)

        self.SetSizerAndFit(self.sizer)

#=====================================================================        

class MiddlePanel(wx.Panel):
    def __init__(self, *args, **kwargs):
        wx.Panel.__init__(self, *args, **kwargs)
        self.sizer = wx.BoxSizer(wx.VERTICAL)
        self.SetSizerAndFit(self.sizer)

        #Initialize Variables
        self.box_height = 100
        self.box_count = 0
        self.start_time = ''

    def OnEnterPressed(self, event):
        #Get entered text
        uppanel = UpperPanel(self)
        self.box_label = uppanel.edit.GetValue()

        if self.box_count < 10:
            for x in range(0, 1):
                chbx1 = wx.CheckBox(self, -1, self.box_label)
                txtbx1 = wx.TextCtrl(self, -1)
                self.box_height += 30
                uppanel.edit.Clear()
                print("CLEARED!")
                print self.box_count
                print uppanel.edit.GetValue()
                #self.Layout()
            self.box_count += 1

    def StartButton(self,event):
        self.start_time = datetime.datetime.now()
        btn_label = self.start_button.GetLabel()

        if btn_label == "Start":
            print "starting timer..."
            self.timer.Start(1000)
            self.start_button.SetLabel("Stop")
        else:
            print "timer stopped!"
            self.timer.Stop()
            self.start_button.SetLabel("Start")
        print ('Start button pressed.')

    def Update(self, event):       
        seconds = (self.start_time - datetime.datetime.now() +
                   datetime.timedelta(days=1)).seconds
        self.time_text.SetLabel('Time till next task:\n%d hours %d \
minutes %d seconds'
                                % (seconds / 3600,
                                   (seconds / 60)
                                   % (seconds / 3600 * 60),
                                   seconds % 60))

#======================================================================
class MainWin(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None)

        self.middlePanel = MiddlePanel(self)
        self.upperPanel = UpperPanel(self)
        self.textArea = wx.TextCtrl(self, size=(-1, 300), style=wx.TE_MULTILINE)

        self.sizer = wx.BoxSizer(wx.VERTICAL)
        self.sizer.Add(self.upperPanel, 0, wx.EXPAND)
        self.sizer.Add(self.middlePanel, 0, wx.EXPAND)
        self.sizer.Add(self.textArea, 1, wx.EXPAND)

        self.SetSizerAndFit(self.sizer)

        #Window Closer
        self.Bind(wx.EVT_CLOSE, self.CloseWindow)

        #Create Menu Bar
        status=self.CreateStatusBar()
        menubar=wx.MenuBar()
        firstmenu=wx.Menu()
        secondmenu=wx.Menu()
        firstmenu.Append(wx.NewId(),"Start","Starts the timer.")
        firstmenu.Append(wx.NewId(),"Stop","Stops the timer.")
        firstmenu.Append(wx.NewId(),"Exit","Exits the program.")
        secondmenu.Append(wx.NewId(),"Preferences","Set the timer options.")
        secondmenu.Append(wx.NewId(),"Edit task list",
                          "Add, change, or remove tasks.") 
        menubar.Append(firstmenu,"File")
        menubar.Append(secondmenu,"Edit")
        self.SetMenuBar(menubar)

        #Static Text
        self.st1 = wx.StaticText(self, -1, 'Enter Tasks:')
        self.st2 = wx.StaticText(self, -1, 'Created by Spencer Evans')
        self.time_text = wx.StaticText(self, -1, '')

    def CloseButton(self,event):
        #timer.Stop()
        self.Close(True)
        print ('Closed by Exit button.')

    def CloseWindow(self,event):
        #timer.Stop()
        self.Destroy()
        print ('Closed by X\'ing window.')

#========================================================================
#Run program
if __name__ == '__main__':
    app = wx.PySimpleApp()
    main_win = MainWin()
    main_win.Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:34:07.733

我真的不知道你的问题在哪里。在我看来，所有已经存在的部分，你只需要把它们放在一起。如果我理解您想要什么，只需将文本字段替换为包含文本字段的面板和一个带有垂直大小调整器的按钮。很好的打字练习，让我提出一个解决方案：

```
--- /tmp/test.py
+++ /tmp/test2.py
@@ -11,8 +11,19 @@
         self.timer = wx.Timer(self)
         self.Bind(wx.EVT_TIMER, self.Update, self.timer)     

+        # Panel for 'Enter Task' textfield and button
+        enter_task_panel = wx.Panel(self, -1)
+        task_panel_sizer = wx.BoxSizer(wx.VERTICAL)
+        enter_task_panel.SetSizer(task_panel_sizer)
+
         #Enter Task Field
-        self.edit = wx.TextCtrl(self, -1, size=wx.Size(200, -1))
+        self.edit = wx.TextCtrl(enter_task_panel, -1, size=wx.Size(200, -1))
+        task_panel_sizer.Add(self.edit, 1)
+
+        # 'Enter Task' button
+        enter_task_button = wx.Button(enter_task_panel, -1, "Enter Task")
+        task_panel_sizer.Add(enter_task_button, 1, wx.EXPAND)
+
         #Enter Task Button
         self.button = wx.Button(self, -1, label="Enter!")
         self.midpanel = MiddlePanel(self)
@@ -25,7 +36,7 @@
         self.Bind(wx.EVT_BUTTON, MainWin.CloseButton, self.exit_button)

          self.sizer = wx.BoxSizer()
-         self.sizer.Add(self.edit, 1, wx.EXPAND)
+         self.sizer.Add(enter_task_panel, 1, wx.EXPAND)
          self.sizer.Add(self.start_button, 0, wx.EXPAND)
          self.sizer.Add(self.exit_button, 0, wx.EXPAND) 
```

[Zetcode](http://zetcode.com/wxpython/)有一个很好的 wxPython 教程，我只能推荐。

# php - 缓慢的 PHP 单元测试

> ID：14914467
> 
> 赞同：5
> 
> 时间：2013-02-16T19:51:42.107
> 
> 标签：php, mysql, phpunit

我正在运行 PHPUnit 以使用 CIUnit（两者之间的第三方接口）测试 CodeIgniter 应用程序。许多测试从一个空的 MySQL 数据库中选择数据，该数据库在 setUp() 中填充了 5-10 条记录。在 Windows 和 Web 服务器（Ubuntu 10.04/Apache 2.2/MySQL 5.1/PHP 5.3）上，105 个测试在 2-3 秒内运行，内存使用量约为 30mb。在我的本地（Ubuntu 12.04/Apache 2.2/MySQL 5.5/PHP 5.3）上，105 个测试以相同的内存使用量运行，但大约需要 45 秒。

我已经缩小了使用数据库的测试的速度；是否有任何我可能缺少的配置设置使测试运行速度慢了 15 倍？如果没有，我最好的选择是尝试降级 MySQL，甚至是 Ubuntu（我已经尝试从 12.10 降级到 12.04）？

任何答案都非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T22:16:19.263

您很可能会遇到由于在 ext4 文件系统[`barriers`中默认打开而造成的性能损失。](https://ext4.wiki.kernel.org/index.php/Ext4_Howto#Barriers_on_by_default)在此处阅读更多内容：

这是他们[从文档](https://github.com/mirrors/linux-2.6/blob/master/Documentation/filesystems/ext4.txt#L184)中所做的：

> 屏障=<0|1(*)>
> jbd 代码。barrier=0 禁用，barrier=1 启用。这也需要一个可以支持屏障的 IO 堆栈，如果 jbd 在屏障写入时出错，它将再次禁用并发出警告。写屏障强制执行日志提交的正确磁盘顺序，使易失性磁盘写缓存可以安全使用，但会降低一些性能。如果您的磁盘以一种或另一种方式由电池供电，则禁用屏障可以安全地提高性能。

您可以尝试像这样在没有它们的情况下重新挂载文件系统（使用 mysql 数据文件所在的挂载点）

```
mount -o remount,nobarrier / 
```

在我的环境中，这使得`Tests: 83, Assertions: 194`套件的运行时间从 48 秒减少到 6 秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T20:29:42.033

通过遵循以下建议 [1]，我能够显着加快我的 PHPUnit 测试：

> 如果您使用的是 InnoDB 引擎（Fedora 上的默认引擎），请尝试将其放入您的 my.cnf 数据库配置中：
> 
> [mysqld]
> 
> ...
> 
> innodb_flush_log_at_trx_commit=2
> 
> ...
> 
> 然后重新启动您的服务器。

它似乎确实会降低数据库的可靠性，如果您在写入时断电等。对于我的开发机器来说，这绝对是一个可以接受的 rick，但我不建议将它用于生产。请参阅 [2] 中有关可靠性的更多详细信息。

[1] [http://aventinesolutions.nl/mediawiki2/index.php/PHPUnit:_a_Quick_Way_to_Speed_Up_Test_Suites?goback=.gde_1685627_member_107087295](http://aventinesolutions.nl/mediawiki2/index.php/PHPUnit:_a_Quick_Way_to_Speed_Up_Test_Suites?goback=.gde_1685627_member_107087295)

[2] [http://dev.mysql.com/doc/refman/4.1/en/innodb-parameters.html#sysvar_innodb_flush_log_at_trx_commit](http://dev.mysql.com/doc/refman/4.1/en/innodb-parameters.html#sysvar_innodb_flush_log_at_trx_commit)

# android - 在哪里可以找到 Android 4.1+ 通知栏中的“全部清除”图标

> ID：14914473
> 
> 赞同：2
> 
> 时间：2013-02-16T19:52:36.507
> 
> 标签：android, android-resources

![清除所有](../Images/fd0e50b30e52bf66eb53d0c400f362f6.png)

我一直在网上搜索并查看 SDK 中的资产，但找不到“全部清除”图标（见上图）。有谁知道资源的名称是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T23:12:18.150

**普通的：**

> ![正常 清除所有](../Images/c0efe111edad82f49478611d35588301.png)

**按下：**

> ![按清除所有](../Images/60b6ebb6b6633b84d7f3d9392f76a244.png)

“清除所有”图标称为`ic_notify_clear_normal.png`。与其他状态栏图标（例如打开快速设置）一起，它是`SystemUI`包的一部分，位于`[android source]/frameworks/base/packages/SystemUI/res/drawable-*/`.

您可以在此处浏览最新源：[http ://androidxref.com/source/xref/frameworks/base/packages/SystemUI/res/drawable-xhdpi/](http://androidxref.com/source/xref/frameworks/base/packages/SystemUI/res/drawable-xhdpi/)

# java - getNextEntry() 是做什么的？

> ID：14914479
> 
> 赞同：0
> 
> 时间：2013-02-16T19:53:02.613
> 
> 标签：java, zip

我检查了 java api 文档，它说`getNextEntry()`读取下一个 ZIP 文件条目并将流定位在条目数据的开头。

“读取 NEXT zip 文件”是什么意思？为什么是“下一个”？

我有这段代码，这行有什么意义　`ze = zin.getNextEntry()`？</p>

```
 public void unzip() { 
    try  { 
      FileInputStream fin = new FileInputStream(_zipFile); 
      ZipInputStream zin = new ZipInputStream(fin); 
      ZipEntry ze = null; 
      while ((ze = zin.getNextEntry()) != null) { 
        Log.v("Decompress", "Unzipping " + ze.getName()); 

        if(ze.isDirectory()) { 
          _dirChecker(ze.getName()); 
        } else { 
          FileOutputStream fout = new FileOutputStream(_location + ze.getName()); 
          for (int c = zin.read(); c != -1; c = zin.read()) { 
            fout.write(c); 
          } 

          zin.closeEntry(); 
          fout.close(); 
        } 

      } 
      zin.close(); 
    } catch(Exception e) { 
      Log.e("Decompress", "unzip", e); 
    } 

  } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T19:55:08.653

它读取zip 文件中的下一个*条目。*

zip 文件在逻辑上包含主要的其他文件 - 因此`foo.zip`可以包含文件`a.txt`和`b.txt`. 将`getNextEntry()`您移至存档中的下一个文件。

（我从来没有特别热衷于[`ZipInputStream`](http://docs.oracle.com/javase/7/docs/api/java/util/zip/ZipInputStream.html)使用继承来建模的方式`InputStream`，但那是另一回事。）

# nsurlconnection - 带有块的 NSURLConnection

> ID：14914480
> 
> 赞同：9
> 
> 时间：2013-02-16T19:53:06.063
> 
> 标签：nsurlconnection, objective-c-blocks

我在用着

```
[NSURLConnection connectionWithRequest:req delegate:self]; 
```

然后我用

```
-(BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace;
-(void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge;
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error;
-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response;
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data;
-(void)connectionDidFinishLoading:(NSURLConnection *)connection; 
```

处理数据加载。一切都很好，工作正常，但我不喜欢这段代码的美感）

我希望使用块，使我的代码看起来像这样：

```
[myConnection sendData:data 
          successBlock:^(void){NSLog(@"success");}
            errorBlock:^(NSError * error){NSLog(@"error.description: %@", error.description);}]; 
```

是否可以将 NSURLConnection 与块一起使用？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-16T20:45:24.243

我使用这个类：

这 `MyConnection.h`

```
#import <Foundation/Foundation.h>

@interface MyConnection : NSObject <NSURLConnectionDelegate, NSURLConnectionDataDelegate> {
    NSURLConnection * internalConnection;
    NSMutableData * container;
}

-(id)initWithRequest:(NSURLRequest *)req;

@property (nonatomic,copy)NSURLConnection * internalConnection;
@property (nonatomic,copy)NSURLRequest *request;
@property (nonatomic,copy)void (^completitionBlock) (id obj, NSError * err);

-(void)start;

@end 
```

和 `MyConnection.m`

```
#import "MyConnection.h"

static NSMutableArray *sharedConnectionList = nil;

@implementation MyConnection
@synthesize request,completitionBlock,internalConnection;

-(id)initWithRequest:(NSURLRequest *)req {
    self = [super init];
    if (self) {
        [self setRequest:req];  
    }
    return self;
}

-(void)start {

    container = [[NSMutableData alloc]init];

    internalConnection = [[NSURLConnection alloc]initWithRequest:[self request] delegate:self startImmediately:YES];

    if(!sharedConnectionList)
        sharedConnectionList = [[NSMutableArray alloc] init];
    [sharedConnectionList addObject:self];

}

#pragma mark NSURLConnectionDelegate methods

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {

    [container appendData:data];

}

//If finish, return the data and the error nil
-(void)connectionDidFinishLoading:(NSURLConnection *)connection {

    if([self completitionBlock])
        [self completitionBlock](container,nil);

    [sharedConnectionList removeObject:self];

}

//If fail, return nil and an error
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {

    if([self completitionBlock]) 
        [self completitionBlock](nil,error);

    [sharedConnectionList removeObject:self]; 

}

@end 
```

使用它：

```
MyConnection * connection = [[MyConnection alloc]initWithRequest:req];
[connection setCompletitionBlock:^(id obj, NSError *err) {

            if (!err) {
                 //It's ok, do domething with the response data (obj)                  
            } else {
                //There was an error
            } 

        }];
[connection start]; 
```

它基于 The Big Nerd Ranch 在他的书中使用的代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-06-22T07:57:31.700

我希望它会有所帮助。

```
[NSURLConnection sendAsynchronousRequest:request
                                   queue:[NSOperationQueue mainQueue]
                       completionHandler:^(NSURLResponse * _Nullable response, NSData * _Nullable data, NSError * _Nullable connectionError) {
                           NSLog(@"%@", response);
                           NSLog(@"%@", data);
                       }]; 
```

# jquery - jqueryui 扩展“fixedsortable.js”：如何在嵌套的、fixedsortable 结构中获取固定元素以在更大的上下文中正确响应

> ID：14914485
> 
> 赞同：0
> 
> 时间：2013-02-16T19:53:45.677
> 
> 标签：jquery, jquery-ui-sortable, fixed

观察以下示例：

```
<html>
  <head>
    <script src="jquery-1.6.2.js"></script>
    <script src="jquery-ui-1.10.0.js"></script>
    <script src="fixedsortable.js"></script>
  </head>
  <body>
    <ul class="list-1">
      <li class="fixed">Fruits</li><!-- responds as expected (it lives at the top level)-->
      <li>
        <ul class="list-2">
          <li class="fixed">-Tomatoes are fruits too!</li><!-- not as expected, should act like a handle to sort the entire list of tomatoes within the list of fruits (as if it were a child element of a sortable item) -->
          <li>--cherry tomatoes</li>
          <li>--plum tomatoes</li>
          <li>--roma tomatoes</li>
        </ul>
      </li>
      <li>-oranges</li>
      <li>-cherries</li>
      <li>-bananas</li>
    </ul>
    <script>
      $('[class*="list-"]').fixedsortable({
        fixed: ".fixed"
      });
    </script>
  </body>
</html> 
```

可以在这里找到fixedsortable.js 扩展： [问题#4299241](https://stackoverflow.com/questions/4299241/jquery-sortable-lists-and-fixed-locked-items)

我发现了以下关于 fixedsortable 扩展的信息：

```
...

},

_mouseStart: function( event ) { 

  for(var i=0;i<this.options.fixed.length;++i) {
    var num = this.options.fixed[i];
    var elem = this.items[num];

    if(event.target == elem.item.get(0)) return false;
  }

  return $.ui.sortable.prototype._mouseStart.apply(this,arguments);
},

... 
```

我尝试通过 DOM 向上`event.target.parentNode`查找任何其他可排序对象，并将找到的任何内容作为 jquery 代替原型`this`传递`arguments`给原型，否则在到达文档时返回 false，但不清楚应该如何完成或是否这样做是正确的做法。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:42:44.943

好吧，自从提出这个问题以来已经过了几个深夜，所以我认为后续行动是有序的......

在研究了一下 jquery 之后，我发现编写自己的插件很容易。虽然 jquery-ui 是一个很好的 api，但我发现尝试自定义它的过程有点麻烦。我能够使用我自己的一些插件和更少的开销来完成我想要的特定行为。此外，我不必尝试维护我一开始就没有编写的代码。:)

如果有人感兴趣，fixedsortable.js 提供的解决方案通过`return false;`扩展的 _mousestart 包装器中断事件传播，其中测试了目标的“固定”状态。一个合适的解决方案包括将事件绑定限制在那些不固定的元素上，而不是绑定到每个可排序的目标，然后尝试限制固定目标上的事件传播。这是我在插件中使用的方法。

# php - 在 HTML 中嵌入 PHP - 无法在表格中填充和显示数据

> ID：14914493
> 
> 赞同：0
> 
> 时间：2013-02-16T19:54:38.187
> 
> 标签：php, html, mysql

我正在阅读关于 PHP 和 HTML 的教程，教程中使用的代码对我来说并不像它演示的那样工作，我想了解原因。我在[http://jsfiddle.net/csmart/vkPJf/](http://jsfiddle.net/csmart/vkPJf/)上设置了一个 jsfiddle，这样你就可以看到发生了什么。该代码应该与数据库连接并添加和打印表格数据。代码似乎到达了打印名为 Courses 的表的部分，但它失败了。连接数据库似乎不是失败，因为我可以注释掉失败的代码并使用插入语句在表中创建新的数据行。html嵌入php的方式是否有问题，应该如何更正代码？谢谢。

```
<!DOCTYPE html><html><head>
       <script src="jquery.min.js"></script>
       <script src="jquery.validate.js"></script>
        <script>
            $(document).ready(function() {$("form").validate();});
        </script>
    </head><body>
    <form method="post">
        cid: <input name="cid" class="required digits" maxlength="3" minlength="3"><BR>
        title: <input name="title" class="required" maxlength="200"><BR>
        prof: <input name="prof" maxlength="64"><BR>
        cred: <input name="cred" class="required digits" maxlength="1" minlength="1"><BR>
        cap: <input name="cap" class="required digits" maxlength="2" minlength="2"><BR>
        <input type="submit" value="OK">
    </form>

    <?php
    ini_set('display_errors', 'On');

    $dbhost = 'XXXXXXXX';
    $dbname = 'XXXXXXXX';
    $dbuser = 'XXXXXXXX';
    $dbpass = 'XXXXXXXX';

    $mysql_handle = mysql_connect("$dbhost", "$dbname", "$dbpass", "$dbuser")
    or die("Error connecting to database server");
    mysql_select_db($dbname, $mysql_handle)
    or die("Error selecting database: $dbname ");
    $cid = array_key_exists("cid", $_REQUEST) ? $_REQUEST["cid"] : 0;
    $title = array_key_exists("title", $_REQUEST) ? $_REQUEST["title"] : '';
    $prof = array_key_exists("prof", $_REQUEST) ? $_REQUEST["prof"] : '';
    $cred = array_key_exists("cred", $_REQUEST) ? $_REQUEST["cred"] : 0;
    $cap = array_key_exists("cap", $_REQUEST) ? $_REQUEST["cap"] : 0;

    if($cid <= 0) echo"";
    else if (!preg_match('/^[0-9]{3}$/',$cid)) echo "Invalid cid";
    else if (!preg_match('/^[0-9]{3}$/',$cred)) echo "Invalid cred";
    else if (!preg_match('/^[0-9]{3}$/',$cap)) echo "Invalid cap";
    else if($cid < 0) {
        $rs = mysql_query("select cid from courses where cid = ".$cid);
        if (mysql_numrows($rs) == 0) {
            mysql_query("insert into courses(cid,cap,cred,title,prof) values("
                 . $cid . "," . $cap . "," . $cred
                 . ",'" . mysql_real_escape_string($title) . "'"
                 . ",'" . mysql_real_escape_string($prof) . "')"
                 );
        }
        else {
            mysql_query("update courses set cap=".$cap.", cred=".$cred . ", title='". mysql_real_escape_string($title) . "'" . ", prof='". mysql_real_escape_string($prof) . "'" . " where cid=".$cid
             };
        }
    }

    $rs = mysql_query("select cid,prof,cred,cap,title from courses");
    $nrows=mysql_numrows($rs);

    echo "Courses<table>";
       for ($i = 0; $i < $nrows; $i++) {
        echo "<tr>";
        echo "<td>".htmlspecialchars(mysql_result($rs,$i,"cid"))."</td>";
        echo "<td>".htmlspecialchars(mysql_result($rs,$i,"title"))."</td>";
        echo "<td>".htmlspecialchars(mysql_result($rs,$i,"prof"))."</td>";
        echo "<td>".htmlspecialchars(mysql_result($rs,$i,"cred"))."</td>";
        echo "<td>".htmlspecialchars(mysql_result($rs,$i,"cap"))."</td>";
        echo "</tr>";
        }
        echo '</table>';
    mysql_close($mysql_handle);
    ?>
    </body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:22:23.250

问题是听到

```
else if($cid < 0) {
 $rs = mysql_query("select cid from courses where cid = ".$cid);
 if (mysql_numrows($rs) == 0) {
    mysql_query("insert into courses(cid, cap, cred, title, prof) values(" .$cid . "," .$cap . "," .$cred . ",'" . mysql_real_escape_string($title) . "'" .
    ","."'" . mysql_real_escape_string($prof) . "'");
  }
  else {
    mysql_query("update courses set cap=".$cap.", cred=".$cred . ", title='". mysql_real_escape_string($title) ."'" . ", prof='". mysql_real_escape_string($prof) . "'" . " where cid=".$cid);

 }
} 
```

注意**"**和**)** , **(**

# java - 如何使 SQL 连接语句通用

> ID：14914494
> 
> 赞同：4
> 
> 时间：2013-02-16T19:54:42.350
> 
> 标签：java, mysql, sql

我必须在同一类的不同方法中执行几个 SQL 查询。有什么方法可以使这些语句通用，我可以在所有方法中使用相同的 con,statement 变量来执行查询。

```
Class.forName("com.mysql.jdbc.Driver").newInstance();
Connection con = DriverManager.getConnection ("jdbc:mysql://localhost:3306/kamal","root","root");
Statement statement=con.createStatement(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T20:16:09.270

在您的班级中使用此方法并一次又一次地调用它

```
public Connection getMyConnection() throws ClassNotFoundException, SQLException
    {
        String connectionURL = "jdbc:mysql://localhost:3306/test";
        Class.forName("com.mysql.jdbc.Driver");
        Connection con = DriverManager.getConnection(connectionURL, "root", "root");
        return con;
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T20:13:19.747

您可以在静态方法中编写连接语句，该方法可以在您的其他类中重用：

```
public Connection getConnection() throws ClassNotFoundException, SQLException {

    String connURL = "jdbc:mysql://localhost:3306/test";
    Class.forName("com.mysql.jdbc.Driver");
    Connection con = DriverManager.getConnection(connURL, "username", "password");
    return con;
} 
```

但这有一个缺点，您必须手动管理数据库连接的打开和关闭。

为了缓解上述缺点，可以考虑使用像 Hibernate 这样的对象关系映射框架，它将连接细节抽象到一个设置文件中，该文件将被每个数据库连接重用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T20:15:04.047

如果您需要整个类中的变量，您可能希望将其设为成员变量。

但是，不鼓励使用类似的资源`Connections`，因为它很容易剥夺系统，并增加额外的负载。

您可以做的是使用一种称为`Singleton`. [在这里](http://www.javaworld.com/javaworld/jw-04-2003/jw-0425-designpatterns.html)阅读。

基本上，您可以创建一个`ConnectionManager`使用此实现调用的新类

```
class ConnectionManager {

private static ConnectionManager _instance = null;
private Connection con = null;

protected ConnectionManager() {
    //empty
}

private void init() {
    Class.forName("com.mysql.jdbc.Driver").newInstance();
    this.con = DriverManager.getConnection
          ("jdbc:mysql://localhost:3306/kamal","root","root");
}
public Connection getConnection() {
    return this.con;
}

public static ConnectionManager getInstance() {
    if(_instance == null) {
        _instance = new ConnectionManager();
        _instance.init();
    }
    return _instance;
}

}//end class 
```

现在，这对我们有很多帮助，尤其是在您的应用程序是多线程的情况下。我们只需要建立一个连接，除非程序终止，否则它将保持不变。在需要创建新的任何地方`Statement`，您都可以简单地使用它。

```
ConnectionManager.getInstance().getConnection().createStatement(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T21:13:26.297

这是连接池的一个非常幼稚的实现。请注意，这是使用记事本编写的，尚未经过测试：

```
public interface ConnectionPool {
    public Connection getConnection() throws SQLException;
    public void closeConnection(Connection connection) throws SQLException;
}

public class MySQLConnectionPool implements ConnectionPool {
    private static final Class<?> mysqlDriver;
    private final Stack<Connection> connections;
    private final String url;
    private final String user;
    private final String password;
    private final int maxSize;

    static {
        mysqlDriver = Class.forName("com.mysql.jdbc.Driver");
    }

    public MySQLConnectionPool(String url, String user, String password, int initialSize, int size) {
        if (initialSize > size) {
            throw new IllegalArgumentException("Pool initial size must not be greater than size");
        }
        if (size <= 0) {
            throw new IllegalArgumentException("Pool size must be greater than zero");
        }
        this.size = maxSize;
        this.url = url;
        this.user = user;
        this.password = password;

        this.connections = new Stack<Connection>();
        try {
            for (int i = 0;i < initialSize;i++) {
                connections.push(getConnection(url, user, password));
            }
        } catch (Exception exception) {
            // TODO: Log somewhere?
        }
    }

    public Connection getConnection(String url, user, password) throws SQLException {
        DriverManager.getConnection(url, user, password);
    }

    public Connection getConnection() SQLException {
        try {
            synchronized (connections) {
                return connections.pop();
            }
        } catch (EmptyStackException exception) {
            return getConnection(url, user, password);
        }
    }

    public void closeConnection(Connection connection) throws SQLException {
        synchronized (connections) {
            if (connections.size() < maxSize) {
                connections.push(connection);
                return;
            }
        }
        connection.close();
    }
}

public class SingletonMYSQLConnectionPool extends MySQLConnectionPool() {
    private static volatile SingletonMYSQLConnectionPool instance;

    private SingletonMYSQLConnectionPool() {
        super("jdbc:mysql://localhost:3306/kamal","root","root", 0, 2);
    }

    public static SingletonMYSQLConnectionPool getInstance() {
        if (instance == null) {
            synchronized (SingletonMYSQLConnectionPool.class) {
                if (instance == null) {
                    instance = new SingletonMYSQLConnectionPool();
                }
            }
        }
        return instance;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-12T16:32:13.547

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
        {
            PrintWriter pw = response.getWriter();
            Connection conn;  
            try
            {
            String fname = request.getParameter("fname");
            String lname = request.getParameter("lname");
            Class.forName("com.mysql.jdbc.Driver");
            conn = (Connection)DriverManager.getConnection("jdbc:mysql://localhost:3307/soft\",\"root\",\"root");
            PreparedStatement pst = (PreparedStatement) conn.prepareStatement("insert into soft.IT(fname,lname) values(?,?)");
                pst.setString(1,fname);  
                pst.setString(2,lname);        
                int i = pst.executeUpdate();  
                if(i!=0){  

                    pw.println("<br>Record has been inserted");  
            }  
            else
            {  
                    pw.println("failed to insert the data");  
            }  
            }catch (Exception e)
            {  
                    pw.println(e);  
            }  
        } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-16T20:21:53.430

使它们在您的数据库中存储过程。

# c - 用于子级屏幕和菜单的嵌入式软件结构

> ID：14914497
> 
> 赞同：3
> 
> 时间：2013-02-16T19:54:55.860
> 
> 标签：c, embedded, structure

我是嵌入式 c 编程的新手，我需要一些建议。

我正在尝试在嵌入式系统上创建一个带有屏幕下方的菜单结构，操作系统代码和绘图/菜单库已准备就绪，但我无法弄清楚我将如何设计这个系统。

它会有：

*   菜单和子菜单
*   用户在进入某些菜单项之前可以验证的密码屏幕
*   以及它们下方的屏幕。

我写了一些有效的代码，但我仍然觉得我在写程序意大利面条代码。而且我是嵌入式 c 系统的新手，所以我不知道我是否可以在代码中使用类或对象。如果有人告诉我正确的方法，我将不胜感激。顺便说一句，我对编程任何其他东西都很有经验，所以请随意参加技术讲座。;)

顺便说一句，菜单代码的结构如下：

```
menu myMenu;
entry* myMenuEntries;
int selection = 0;
myMenuEntries[0] = [entry definer code];
...
myMenu.entries = (entry *) myMenuEntries;
selection = DisplayMenu(myMenu);
switch(selection){
   case 0: exit(); break;
} 
```

如何在嵌入式 c 中创建一个对象，就像它在中使用的那样`myMenu.entries`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T20:31:55.083

我肯定会在这里使用面向对象的 C，就像您怀疑的那样。有很多关于如何在 C 中在堆栈溢出时执行 oop 的参考。您可以从结构中创建类并使用函数指针作为成员函数，如果您想要多态性，可以将其覆盖。

每个屏幕都可以有 onEnter()，例如，在屏幕加载时初始化内容，并且您可以有一个可绘制类，该类可以包含知道如何在任何 x,y 坐标处绘制自己的字符串、图元、图像等. 您还可以有一个标准的屏幕对象，它由屏幕上的对象列表、它们的坐标和内容组成。这些也可以在编译时在一个大表中初始化。

（我已经使用 C 和 ASM 在 DSP 上完成了所有这些工作）

也有现成的库可以做到这一点。我知道 micrium 有一个。我在我的手机上，或者我会谷歌它并将链接放在这里。

# java - 使用 Jsoup 获取网站 - 页面视图源和 Jsoup 显示不同的内容

> ID：14914498
> 
> 赞同：1
> 
> 时间：2013-02-16T19:55:01.737
> 
> 标签：java, android, jsoup

我使用 Jsoup 来报废网站：

```
doc = Jsoup.connect(String.valueOf(urls[0])).userAgent("Mozilla").get(); 
```

链接在这里：

[http://www.yelp.com/search?find_desc=restaurant&find_loc=willowbrook%2C+IL&ns=1#l=p:IL:Willowbrook::&sortby=rating&rpp=40](http://www.yelp.com/search?find_desc=restaurant&find_loc=willowbrook%2C+IL&ns=1#l=p:IL:Willowbrook::&sortby=rating&rpp=40)

我在命令行中的链接中添加了**rpp=40**参数，以每页显示 40 个结果。我可以在页面视图源中看到所有结果。我知道 Jsoup 仅用于静态内容，无法获取使用 AJAX/JS 库技术生成内容的网站。但是，为什么 Jsoup 无法检索到我通过页面视图源在浏览器中看到的相同内容？页面视图源显示 40 个结果，而 Jsoup 只能从 10 个结果中检索元素？如何获取通过页面视图源可见的每个元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:11:23.613

**简短回答**Jsoup 无法执行 Javascript。

**长答案**

```
http://www.yelp.com/search?find_desc=restaurant&find_loc=willowbrook%2C+IL&ns=1#l=p:IL:Willowbrook::&sortby=rating&rpp=40 
```

您正在寻找的网页接受带有参数的 Http Get。在普通浏览器中，它接受参数并加载页面。但**没有检查过柳溪**（在你的例子中）。它在加载页面后加载 JS，并且 Javascript 为**过滤**搜索结果执行复选框。因此，当您使用 Jsoup 时，您会获得更多结果，因为它加载了 'state=IL' 而没有过滤 'willowbrook'。

# java - Java acm，GRect方法，继承添加方法不显示

> ID：14914502
> 
> 赞同：1
> 
> 时间：2013-02-16T19:55:12.063
> 
> 标签：java, inheritance, methods, acm-java-libraries

我正在阅读有关继承的信息。我试图做这个例子，但有些不对劲。我写了每一段代码，但没有显示某种应该被继承的方法。方法是 add(GObject arg)

这是该类的代码：

```
package ExistingClasses;
import acm.graphics.*;

public class FilledRect extends GRect {

    public FilledRect(double x, double y, double width, double height) {
        super(x, y, width, height);
        setFilled(true);
    }
} 
```

在我写完上面的代码后，我想在其他类中使用它的代码是：

```
package ExistingClasses;

public class TestFilledRect extends FilledRect {

    public void run(){                      
        FilledRect rect = new FilledRect(45, 34, 34, 34);
        add(rect);  
    }
} 
```

添加方法不起作用。我按照这本书的方式去做。它假设有 add 方法，这样你画的任何东西都会出现，比如椭圆、矩形、线条。请帮我。

add 方法仅在我扩展 GraphicsProgram 类时才适用。请帮我。提前感谢大家。

我正在使用的书是 The Art and Science of Java pgs 205 - 207

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T14:54:20.360

[GRect](http://www-cs-faculty.stanford.edu/~eroberts/jtf/javadoc/complete/acm/graphics/GRect.html)没有 add 方法。 [GraphicsProgram](http://www-cs-faculty.stanford.edu/~eroberts/jtf/javadoc/complete/acm/program/GraphicsProgram.html)确实有一个 add 方法。这就是为什么它在上面的测试中找不到 add 方法的原因。您必须在一个扩展 GraphicsProgram 的类中才能将 GRect 添加到 GraphicsProgram。

# javascript - 根据浏览器宽度更改 css 值

> ID：14914504
> 
> 赞同：0
> 
> 时间：2013-02-16T19:55:23.703
> 
> 标签：javascript, jquery, html

我真的需要一些帮助：

[点我为例](http://i.imagebanana.com/img/2ml2dm3p/Unbenannt1.jpg)

我有一个带有 bg 图像的 div 容器#green（绿色边框）。div 为 100% 宽度，bg 图像带有 css3 的-cover-。在这个 div 中是另一个 div #red，它具有绝对位置和正确值。我想强制#red div 在 bg 图像的动机之间始终具有相同的距离。意味着如果我缩放浏览器窗口，间隙应该总是相同的。我的尝试是将`#red { right: 25px }`css除以`$(window).width()`并将这个因素用于

```
var factor = 0,253;
var width = $(window).width()*factor;

('#red').css('right', width); 
```

但它不起作用。希望你明白我的意思，每一个帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T19:58:27.863

使用[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)：

```
@media (min-width:500px) { … } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T20:00:53.417

`var factor = 0,253`语法无效

应该

```
var factor = 0.253; 
```

使用浏览器控制台检查错误，这会立即弹出

# linux - 无需 GUI 的蓝牙配对

> ID：14914505
> 
> 赞同：1
> 
> 时间：2013-02-16T19:55:24.733
> 
> 标签：linux, shell, bluetooth, rfcomm, bluez

我需要在 Linux 服务器上使用 USB 蓝牙加密狗。实际上它可以工作，我可以发现其他蓝牙设备，但如果我尝试连接其中一个设备（使用`rfcomm`），它会显示`Can't connect RFCOMM socket: Connection refused`。

我认为问题在于配对，因为当我在桌面系统上键入相同的命令时，它会在对话框窗口（而不是终端）中向我询问密码。所以问题是：如何在没有桌面环境的情况下配对设备？谢谢指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T20:20:08.567

这个命令对我有用：

```
echo [PIN] | bluez-simple-agent hci0 [BT_MAC_ADDRESS] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T06:26:28.970

1.  如果您的设备已经配对，则再次请求配对，命令如下。否则错误消息为*创建设备失败：org.bluez.Error.AlreadyExists：已经存在*

    ```
    To remove pairing: bluez-test-device remove XX:XX:XX:XX:XX:XX   
    To pair again    : bluez-simple-agent hci0  XX:XX:XX:XX:XX:XX 
    ```

2.  如果您碰巧拥有超过 1 个蓝牙硬件并想使用第二个，请使用`hciconfig`查找适配器名称，然后使用该名称代替`hci#`. 命令如下

    ```
    bluez-simple-agent hci# XX:XX:XX:XX:XX:XX 
    ```

# c# - 等待第 3 方线程完成

> ID：14914513
> 
> 赞同：0
> 
> 时间：2013-02-16T19:56:04.920
> 
> 标签：c#, multithreading, asynchronous

我需要调用第 3 方代码，该代码可选地启动一个新线程，执行一些处理，然后在我的对象上调用不同的方法。我需要的是等待第 3 方处理完成，然后从原始方法返回。换句话说，我有一个这样的类（C#）：

```
class MyClass: IThirdPartyInterface {
    void MyMethod() {
        //some preprocessing
        //call a 3rd party static method
        ThirdParty.DoSomething(this);
     }
    void FinishedProcessing() {
        //some postprocessing
        //???
    }
} 
```

我想修改 MyMethod 使其仅在 DoSomething 中启动的线程完成执行并调用 FinishedProcessing 方法后才返回。由于线程是由第三方代码启动的，我无权访问，所以这里不能使用 Thread.Join。那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T21:41:01.510

您需要使用 System.Threading.AutoResetEvent，它会是这样的：

```
class MyClass: IThirdPartyInterface {
    AutoResetEvent _event = new AutoResetEvent(false);
    void MyMethod() {
        ThirdParty.DoSomething(this);
        _event.WaitOne();
    }
    void FinishedProcessing() {
        _event.Set();
    }
} 
```

如果线程在您的 FinishedProcessing 方法被 3rdparty 类调用后继续运行，则情况会有些不同：

```
class MyClass: IThirdPartyInterface {
    AutoResetEvent _event = new AutoResetEvent(false);
    Thread _thread;
    void MyMethod() {
        ThirdParty.DoSomething(this);
        _event.WaitOne();
        _thread.Join();
    }
    void FinishedProcessing() {
        _thread = Thread.CurrentThread;
        _event.Set();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T20:12:39.147

使您的 MyMethod() 异步，然后在您的自定义 await 方法中运行第三方方法，如下所示：

```
private async void MyMethod()
{
    var result = await WaitAsynchronouslyAsync();
}

public async Task<string> WaitAsynchronouslyAsync()
{
    await ThirdParty.DoSomething(this);
    return "Finished";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T21:38:57.373

如果 ThirdParty.DoSomething 不支持异步模式，您可以使用带有终结器的附加代理。但它可能会像“while(myBoolFlag){}”一样影响应用程序性能。

```
class Program
{
    static void Main(string[] args)
    {
        var list = new List<ManualResetEvent>();
        for (var i = 0; i < 10000; i++)
        {
            var m = new ManualResetEvent(false);
            list.Add(m);
            new Thread(Start).Start(m);

            if (i > 0 && (i % 10) == 0)
                for (int j = i - 10; j < i; j++)
                {
                    list[j].WaitOne(1000);// wait signal
                    GC.Collect(); //force finalizer
                    A.Print();
            }
        }
    }

    private static void Start(object obj)
    {
        new A(obj as ManualResetEvent, null);
    }
}

public class A : IThirdPartyInterface
{
    public static long time1;
    public static long count1;

    private DateTime start = DateTime.Now;
    private ManualResetEvent _stop;
    private IThirdPartyInterface _origin;
    public A(ManualResetEvent stop, IThirdPartyInterface origin)
    {
        _stop = stop;
        _origin = origin;
    }

    ~A()
    {
        Interlocked.Increment(ref count1);
        Interlocked.Add(ref time1, (long)(DateTime.Now - start).TotalMilliseconds);
        _stop.Set(); //send signal
    }

    public static void Print()
    {
        Console.Write("\r" + A.time1 + "\\" + A.count1 + "    ");
        if (A.count1 != 0)
            Console.Write((A.time1 / A.count1).ToString());
    }
} 
```

# java - 将 .equals() 与 Scanner 对象一起使用

> ID：14914516
> 
> 赞同：1
> 
> 时间：2013-02-16T19:56:17.310
> 
> 标签：java

出于某种原因，我从输入小写“y”得到的结果与输入大写“Y”不同。“y”的输入执行 if 语句中的代码，但“Y”的输入不执行。此外，输入“Y”不会执行中断；之后。为什么会这样，我做错了什么？

```
Scanner playAgain = new Scanner (System.in);

System.out.println ("Play Again (Y/N)");

if ((playAgain.next().equals("y"))||(playAgain.next().equals("Y")))
{
Game theGame1 = new Game(0);
currentPts = currentPts + theGame1.play(total);

System.out.println("Current total is:" + "   "  +  currentPts);
}
else break; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T19:57:43.427

在这种情况下：

```
if ((playAgain.next().equals("y"))||(playAgain.next().equals("Y"))) 
```

您调用`playAgain.next()` *了两次*- 所以它从用户那里获取两个不同的字符串。

我确定您只打算获取一个字符串：

```
String answer = playAgain.next();
if (answer.equals("y") || answer.equals("Y")) 
```

或者，只需使用`equalsIgnoreCase`，这意味着您可以只阅读一次：

```
if (playAgain.next().equalsIgnoreCase("y")) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-16T19:57:33.030

您在 if 语句中阅读了两次。因此，`playAgain.next()`如果`"Y"`您输入`"Y"`.

您可以将读取的输入存储在一个变量中，并使用它来代替：

```
String input = playAgain.next();   
if ((input.equals("y"))||(input.equals("Y"))) 
```

除此之外，您还可以使用更好的`equalsIgnoreCase`方法：

```
if (playAgain.next().equalsIgnoreCase("y")) 
```

# c++ - 通过按键制作开/关控制台程序

> ID：14914517
> 
> 赞同：0
> 
> 时间：2013-02-16T19:56:32.537
> 
> 标签：c++, keyevent

我编写简单的控制台应用程序，我想通过按键来控制它有我的代码：

```
#include "stdafx.h"
#include <windows.h>

int i = 1;
BOOL WINAPI ConsoleHandlerRoutine(DWORD dwCtrlType)
{
    if (dwCtrlType == CTRL_CLOSE_EVENT)
    {
        i = 0;
        return TRUE;
    }
    return FALSE;
}

int _tmain(int argc, _TCHAR* argv[])
{
    BOOL ret = SetConsoleCtrlHandler(ConsoleHandlerRoutine, TRUE);
    while(i == 1){
    SetCursorPos(200, 200);
        mouse_event(MOUSEEVENTF_RIGHTDOWN | MOUSEEVENTF_RIGHTUP, 0, 0, 0, 0);
        SetCursorPos(205, 205);
        mouse_event(MOUSEEVENTF_LEFTDOWN | MOUSEEVENTF_LEFTUP, 0, 0, 0, 0);
        mouse_event(MOUSEEVENTF_LEFTDOWN | MOUSEEVENTF_LEFTUP, 0, 0, 0, 0);
    }

} 
```

当控制台窗口不活动时，如何使程序在键盘按下时启动和停止？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:08:29.177

让一个程序在它不是活动程序时知道你正在输入什么是一个非常侵入性的场景。

[不过，您可以使用SetWindowsHookEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)来做到这一点。

回调函数需要有[这个签名](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644984%28v=vs.85%29.aspx)。

# facebook-javascript-sdk - 通过 facebook javascript sdk 将画布图像发布到用户的墙上

> ID：14914518
> 
> 赞同：3
> 
> 时间：2013-02-16T19:56:36.533
> 
> 标签：facebook-javascript-sdk

我已经动态创建了一个 html 画布图像。我想通过 javascript sdk 将它发布到 facebook 用户的墙上。我正在做的是

我试图将画布转换为 javascript 图像对象并在 fb.ui 方法中提供 finalimage

```
var temp = canvas.toDataURL("image/png"); 
var finalimage=temp.replace(/^data:image\/(png|jpg);base64,/, "");

  FB.ui(
  {
   method: 'feed',
   name: 'The Facebook SDK for Javascript',
   caption: 'Bringing Facebook to the desktop and mobile web',
   description: (
   'A small JavaScript library that allows you to harness ' +
   'the power of Facebook, bringing the user\'s identity, ' +
   'social graph and distribution power to your site.'
   ),
 link: 'https://developers.facebook.com/docs/reference/javascript/',
 picture: finalimage
   },
  function(response) {
  if (response && response.post_id) {
  alert('Post was published.');
  } else {
  alert('Post was not published.');
  }
  }
   ); 
```

但我收到一个错误

错误消息：图片 URL 格式不正确

谁能帮我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-02T19:33:31.317

You need to save the image at your server for doing that, your image must be outside Facebook, because FB.ui "FEED" does not accept base64 encoded data as picture, its impossible .

Its very large data, and if you try to short the base64 code into a url shorteer, you will find difficulties too .

What you can do, and what i am doing, is use an PHP server to get the Base64 data, and convert it into image, like a dynamic image, ok? But a memory problem will be created .

Another option is (really) posting the canvas as an image on user profile, so you will need use FB.api for that, instead of FB.ui, feed dialog is used for sharing links, and, canvas doesnt have Title, Description, proprieties .

After posting the image, you will get an response, with ID, that is post ID, and this cannot be used on Feed as Link or Image proprietity, but you can use Share Dialog, if you want to share the post .

That is piece of cake, i done that, and recommend you do the same . Posting Canvas as images usin API on Facebook Platform is great, you can do that using JavaScript SDK .

# c# - C# 不通过 foreach 代码

> ID：14914521
> 
> 赞同：0
> 
> 时间：2013-02-16T19:57:10.550
> 
> 标签：c#

下面的代码读取带有路径标题的文本文件，后跟文件名列表。该代码将每个文件（从第二行开始）添加到 ListView。由于某种原因，最后两行从未到达。有任何想法吗？

```
 private void loadFromFile()
    {
        if ((faxInOn != null) && File.Exists(@"D:\Settings.ye"))
        {
            string[] s;
            StreamReader sr = new StreamReader(@"D:\Settings.ye", Encoding.Default);
            s = sr.ReadToEnd().Split(new string[] { "\r\n", "\n" }, StringSplitOptions.None);
            faxInOn.changePath(s[0]);
            foreach (string temp in s)
                foreach (ListViewItem lvi in listView1.Items)
                    if (lvi.Text == temp.Substring(1))
                        lvi.ImageIndex = int.Parse(temp.Substring(0, 1));
            sr.Close();
            sr.Dispose();
        }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:08:08.030

对于我认为您正在尝试做的事情，使用 foreach 块的方式确实效率低下。此外，使用“using(...)”块会更容易和更清洁，这样您的资源就会得到正确清理和正确处理。请参阅：http: [//msdn.microsoft.com/en-us/library/yh598w02.aspx](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T20:23:50.603

尝试使用[File.ReadLines](http://msdn.microsoft.com/en-gb/library/dd383503.aspx)

例如：

```
// Read all lines in file, skipping the first header line
foreach(var line in File.ReadLines(@"D:\Settings.ye").Skip(1))
{
   // add to list view
} 
```

# html - 设置 div 的宽度直到浏览器端

> ID：14914523
> 
> 赞同：3
> 
> 时间：2013-02-16T19:57:13.700
> 
> 标签：html, css

我从两个例子开始：

13" macbook pro： ![麦克屏幕](../Images/f3068017ff3c85ed876e51d9729b64b4.png) 21" 飞利浦显示器 ![菲利普屏幕](../Images/689396a709762af354b60f1d25aa77f6.png)

是否可以使用 为父元素设置全宽`position:fixed`，但对于子元素设置宽度直到浏览器站点，因此所有尺寸的文本都将直到浏览器站点或最大宽度。

CSS：

```
div#wrapper{
    width: 100%;
    height: 100%;
    padding-top: 70px;
}

header#left-panel, header#right-panel{
    background: none repeat scroll 0 0 #000000;
    min-height: 40px;
    padding: 10px;
    opacity: 0.8;
}

header#left-panel{
    width: 185px;
    position: fixed;
}

header#right-panel{
    /*width: 100%;*/ /*here is the problem*/
    left: 755px;
    position: fixed;
} 
```

HTML：

```
<body>
    <div id="wrapper">
        <header id="left-panel">
            <section id="contacts">
            </section>
        </header>
        <header id="right-panel">
            <section id="comments">
                <div>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</div>
                <div style="float:right">Lorem ipsum</div>
            </section>
        </header>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:58:40.640

`right:0`在`header#right-panel`元素上使用。

你可以在[这个 jsFiddle](http://jsfiddle.net/amullins/Vk8Ty/5/)上玩弄它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T20:00:40.747

```
header#right-panel{
    /*width: 100%;*/ 
    right: -1px;
    position: fixed;
} 
```

应该管用

# .net - 从 Entity Framework 4.3 - 5 中提取模型信息

> ID：14914525
> 
> 赞同：1
> 
> 时间：2013-02-16T19:57:28.583
> 
> 标签：.net, entity-framework-5, entity-framework-4.3

我想为实体框架实现几个扩展。让我们以这个为例。

```
void InsertOrUpdate<T, TUpdateFields, TInsertFields, TKey>(
    this DbContext context,
    IEnumerable<T> data,
    Expression<Func<T, TUpdateFields>> updateFields,
    Expression<Func<T, TInsertFields>> insertFields,
    Expression<Func<T, TKey>> key) 
```

它应该是这样使用的。

```
var dc = new SomeContext();
var user = new User() { /* initialize */ };
var array = new[] { user };
dc.InsertOrUpdate(
    array, 
    x => new {
        x.UserName,
        x.Password,
        x.LastLoggedIn
    },
    x => new {
        x.UserName,
        x.Password,
        x.Email,
        x.DateAdded,
        x.LastLoggedIn
    },
    x => x.UserName); 
```

该方法将生成一个 sql 字符串并将其传递给该`DbContext.Database.ExecuteSqlCommand`方法。但是为了生成 sql，我需要从模型信息中提取表名和字段名，以防它们与类名和属性名不同。

（例如`UserName`属性对应`user_name`于数据库中的字段）

我知道它们可以在实体本身中设置为数据注释，直接在模型构建器中以`OnModelCreating(DbModelBuilder)`方法的`DbContext`形式定义或以实现的形式定义，`EntityTypeConfiguration<T>`并以相同的方法传递到模型构建器配置中。

如何从 DbContext 实例中检索表和字段的名称？有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:44:36.727

我似乎真的很容易。如果以下是类定义

```
[Table("User")]
public class User {
     [Column("user_id")]
     public Int32 UserId {get;set;}
     [Column("user_name")]
     public String UserName {get;set;}
     [Column("email")]
     public String Email {get;set;}
     [Column("join_date")]
     public DateTime DateAdded {get;set;}
     [Column("password")]
     public String Password {get;set;}
     [Column("last_logged_in")]
     public DateTime LastLoggedIn {get;set;}
} 
```

我可以使用以下技术

```
void InsertOrUpdate<T, TUpdateFields, TInsertFields, TKey>(
    this DbContext context,
    IEnumerable<T> data,
    Expression<Func<T, TUpdateFields>> updateFields,
    Expression<Func<T, TInsertFields>> insertFields,
    Expression<Func<T, TKey>> key){

    var sql = context.Set<T>().Select(updateFields).ToString();
    // Do stuff
} 
```

最终 sql 变量将包含类似这样的内容

```
SELECT
1 AS [C1],
[Extent1].[user_name] AS [user_name],
[Extent1].[password] AS [password],
[Extent1].[last_logged_in] AS [last_logged_in]
FROM [dbo].[tbUser] AS [Extent1] 
```

可以解析此语句以找出表名和列名。生成的 sql 中的列出现的顺序与它们在匿名类型中指示的顺序相同

# node.js - 如何在 Mongoose 中使用预保存更改文档

> ID：14914532
> 
> 赞同：2
> 
> 时间：2013-02-16T19:58:22.077
> 
> 标签：node.js, mongodb, mongoose, save

我正在尝试将预处理程序分配给猫鼬保存事件并在保存之前加密文档：

```
userShecma.pre('save', function(next) {
    var self = {};
    self.Key = this.password;;
    self.EncriptedString = encrypt.encrypt(JSON.stringify(this), this.password);
    self.user = this.user
    self.decrypt = function() {
        var user = JSON.parse(encrypt.decrypt(this.EncriptedString, this.Key));
        for(var key in user) {
            this[key] = user[key];
        }
    }
    for(var key in this){
        delete this[key];
    }
    for(var key in self){
        this[key] = self[key];
    }
    console.log(this);
    next(self);
}); 
```

我尝试了一堆不同的东西，有时我得到一个错误，有时它只是没有改变文档。

如果您需要更多信息，请告诉我，
阿里

***编辑：***尝试了 Benoir 的回答，我无法编辑`this`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T20:21:35.127

我相信调用`next(self)`将使下一个处理程序认为存在错误并且不保存文档。

你应该打电话`next()`

查看 “错误处理”下的[http://mongoosejs.com/docs/middleware.html](http://mongoosejs.com/docs/middleware.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T01:13:03.823

我想通了：Benoir 的回答 + 您不能在文档中添加或删除属性，除非它们在架构中定义。

# mysql - Group by 的 MAX() 函数非常慢

> ID：14914541
> 
> 赞同：2
> 
> 时间：2013-02-16T19:58:43.220
> 
> 标签：mysql, sql, performance

我的查询真的很慢；执行需要 17 秒。它在 Godaddy VPS 上达到 100% CPU。有什么想法可以做什么？

这个查询：

```
 SELECT
             `gps_unit_location`.`idgps_unit`,
             MAX(`gps_unit_location`.`dt`) dtmax
         FROM `gps_unit_location`
         GROUP BY 1 
```

解释

```
id='1', select type='SIMPLE', table='gps_unit_location', type='index', possible keys=NULL, key='fk_gps2', key len='5', ref=NULL, rows='368668', extra='' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T20:01:27.850

上的索引`(idgps_unit, dt)`可以使查询更快。

您可以`idgps_unit`通过更改来扩展索引：

```
KEY `fk_gps2` (`idgps_unit`), 
```

到

```
KEY `fk_gps2` (`idgps_unit`, `dt`), 
```

（根据[这个 SO question](https://stackoverflow.com/a/924272/50552)，`key`是 的同义词`index`。）

# ruby-on-rails - 序列化 ActiveRecord::Coders::Hstore 崩溃 RailsAdmin

> ID：14914543
> 
> 赞同：0
> 
> 时间：2013-02-16T19:58:56.420
> 
> 标签：ruby-on-rails, ruby, rails-admin

正如[http://railscasts.com/episodes/345-hstore](http://railscasts.com/episodes/345-hstore)中所建议的，我补充说：

```
serialize :properties, ActiveRecord::Coders::Hstore 
```

到我的模型。这允许我迭代视图中的键/值对（没有它，我得到一个未定义的方法“每个”用于字符串错误）：

```
<% @item.properties.try(:each) do |key, value| %>
  <%= key %>: <%= value %><br />
<% end %> 
```

我设法通过将 RailsAdmin 中的 hstore 字段明确声明为文本字段来使其正常工作：

```
class Item < ActiveRecord::Base
  attr_accessible :name, :properties, as: :admin

  serialize :properties, ActiveRecord::Coders::Hstore  

  rails_admin do # without this block, properties gets ignored in RailsAdmin
    edit do
      field :name
      field :properties, :text
    end
  end
end 
```

如果我停用了上面的序列化调用，我可以在 RailsAdmin 中按以下格式设置哈希：

```
"key1" => "value1", "key2" => "value2" 
```

然而，当序列化调用没有被注释掉时（为了让视图中的循环工作），RailsAdmin 在保存哈希时会崩溃：

```
undefined method `map' for String 
```

该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:09:22.420

我相信你可以简单地做到这一点：

```
serialize :properties 
```

这应该与`each`方法一起使用。
然后 :properties 将被识别为哈希，而不是字符串。
HStore 应该是可选的。

:properties 在您的架构中应该是字符串
（我认为当您设置 HStore 插件时 - 您放置的是 hstore 类型而不是字符串）

# perl - 解释 Perl DBI MySQL column_info()

> ID：14914544
> 
> 赞同：3
> 
> 时间：2013-02-16T19:58:59.340
> 
> 标签：perl, metadata, dbi

我正在尝试编写接受 SQL INSERT 语句绑定的 Perl 代码，并识别可能导致 INSERT 因错误数据而被拒绝的问题，并修复它们。为此，我需要获取并解释列元数据。

$dbh->column_info 方法以编码形式返回信息。我已经仔细阅读了官方的 CPAN 文档，但仍然感到困惑。

```
my $sth_column_info
        = $dbh->column_info( $catalog, $schema, $table, undef );
    my $columns_aoh_ref = $sth_column_info->fetchall_arrayref(
        {   COLUMN_NAME      => 1,
            DATA_TYPE        => 1,
            NULLABLE         => 1,
            ORDINAL_POSITION => 1,
            COLUMN_DEF       => 1,
        }
    );
    say $table;
    for my $href (@$columns_aoh_ref) {
        my @list;
        while ( my ( $k, $v ) = each %$href ) {
            push @list, "$k=" . ( $v // 'undef' );
        }
        say join '|', @list;
    } 
```

输出是：

```
dw_phone
NULLABLE=0|COLUMN_DEF=undef|DATA_TYPE=4|ORDINAL_POSITION=1|COLUMN_NAME=phone_id
NULLABLE=0|COLUMN_DEF=undef|DATA_TYPE=4|ORDINAL_POSITION=2|COLUMN_NAME=phone_no
NULLABLE=1|COLUMN_DEF=undef|DATA_TYPE=4|ORDINAL_POSITION=3|COLUMN_NAME=phone_ext
NULLABLE=0|COLUMN_DEF=undef|DATA_TYPE=1|ORDINAL_POSITION=4|COLUMN_NAME=phone_type
NULLABLE=0|COLUMN_DEF=undef|DATA_TYPE=1|ORDINAL_POSITION=5|COLUMN_NAME=phone_location
NULLABLE=1|COLUMN_DEF=undef|DATA_TYPE=1|ORDINAL_POSITION=6|COLUMN_NAME=phone_status
NULLABLE=0|COLUMN_DEF=undef|DATA_TYPE=11|ORDINAL_POSITION=7|COLUMN_NAME=insert_date
NULLABLE=0|COLUMN_DEF=undef|DATA_TYPE=11|ORDINAL_POSITION=8|COLUMN_NAME=update_date 
```

例如，在哪里可以找到数据类型代码到字符串的映射？我应该使用 DATA_TYPE、TYPE_NAME 还是 SQL_DATA_TYPE？我应该使用 NULLABLE 还是 IS_NULLABLE，为什么这两种口味？

我可以理解记录（更不用说实现）数据库通用接口的难度。但我想知道是否有人知道使用特定于 MySQL 的 DBI 的参考手册？

**更新 1：**

试图通过使用*数组*而不是哈希检索*所有*信息来阐明更多信息：

 *```
 my $sth_column_info
        = $dbh->column_info( $catalog, $schema, $table, undef );

    my $aoa_ref = $sth_column_info->fetchall_arrayref; # <- chg. to arrayref, no parms
    say $table;
    for my $aref (@$aoa_ref) {
        my @list = map $_ // 'undef', @$aref;
        say join '|', @list;
    } 
```

现在我可以看到很多潜在有用的信息混在其中。

```
dw_contact_source
undef|dwcust1|dw_contact_source|contact_id|4|BIGINT|20|undef|undef|10|0|undef|undef|4|undef|undef|1|NO|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|1|bigint(20)|undef|0
undef|dwcust1|dw_contact_source|company_id|4|SMALLINT|6|undef|undef|10|0|undef|undef|4|undef|undef|2|NO|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|1|smallint(6)|undef|0
undef|dwcust1|dw_contact_source|contact_type_id|4|TINYINT|4|undef|undef|10|0|undef|undef|4|undef|undef|3|NO|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef||tinyint(4)|undef|0
undef|dwcust1|dw_contact_source|insert_date|11|DATETIME|19|undef|0|undef|0|undef|undef|9|-79|undef|4|NO|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef||datetime|undef|0
undef|dwcust1|dw_contact_source|update_date|11|DATETIME|19|undef|0|undef|0|undef|undef|9|-79|undef|5|NO|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef|undef||datetime|undef|0 
```

所以我的问题是：

*   如何获取这些元数据的相应名称/描述？
*   我如何`fetchall_arrayref`使用符号而不是整数来满足我的需求？（我试过`fetchall_arrayref([qw/COLUMN_NAME DATA_TYPE/])`并找回了所有`undef`的s；现在我只是在猜测。）

**更新 2：**

现在我在 DBD::mysql.pm 中挖掘，发现了一个非常有趣的数组：

```
my @names = qw(                                                                                                                                             
    TABLE_CAT TABLE_SCHEM TABLE_NAME COLUMN_NAME                                                                                                            
    DATA_TYPE TYPE_NAME COLUMN_SIZE BUFFER_LENGTH DECIMAL_DIGITS                                                                                            
    NUM_PREC_RADIX NULLABLE REMARKS COLUMN_DEF                                                                                                              
    SQL_DATA_TYPE SQL_DATETIME_SUB CHAR_OCTET_LENGTH                                                                                                        
    ORDINAL_POSITION IS_NULLABLE CHAR_SET_CAT                                                                                                               
    CHAR_SET_SCHEM CHAR_SET_NAME COLLATION_CAT COLLATION_SCHEM COLLATION_NAME                                                                               
    UDT_CAT UDT_SCHEM UDT_NAME DOMAIN_CAT DOMAIN_SCHEM DOMAIN_NAME                                                                                          
    SCOPE_CAT SCOPE_SCHEM SCOPE_NAME MAX_CARDINALITY                                                                                                        
    DTD_IDENTIFIER IS_SELF_REF                                                                                                                              
    mysql_is_pri_key mysql_type_name mysql_values                                                                                                           
    mysql_is_auto_increment                                                                                                                                 
); 
```

这些精确对应于 fetchall_arrayref 返回的内容。现在我可以看到我有*四种*学习数据类型的选择，所以让我们看看是否记录了任何代码。

更新 3：

[DBI Recipes](http://www.perlmonks.org/?node_id=284436)是 CPAN DBI 文档的一个非常好的附件，用于将信息检索回 Perl（尤其是 {select|fetch}{row|all}_{hash|array} 方法。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:46:32.037

这将帮助您确定 data_types 的值。我通常使用 data_type 来确定如何根据其类型处理列。

然后您需要查看下面的 MySQL 数据类型键并获取哈希值。然后查看下面的 DBI 表，匹配数据名称得到数据类型值。示例：BIGINT 是与 SQL_INTEGER 匹配的 INTEGER 类型，因此 DATA_TYPE 值为 4，

```
DBD::MySQL
### ANSI datatype mapping to mSQL datatypes
%DBD::mysql::db::ANSI2db = ("CHAR"          => "CHAR",
            "VARCHAR"       => "CHAR",
            "LONGVARCHAR"   => "CHAR",
            "NUMERIC"       => "INTEGER",
            "DECIMAL"       => "INTEGER",
            "BIT"           => "INTEGER",
            "TINYINT"       => "INTEGER",
            "SMALLINT"      => "INTEGER",
            "INTEGER"       => "INTEGER",
            "BIGINT"        => "INTEGER",
            "REAL"          => "REAL",
            "FLOAT"         => "REAL",
            "DOUBLE"        => "REAL",
            "BINARY"        => "CHAR",
            "VARBINARY"     => "CHAR",
            "LONGVARBINARY" => "CHAR",
            "DATE"          => "CHAR",
            "TIME"          => "CHAR",
            "TIMESTAMP"     => "CHAR"
           ); 
```

DBI.pm TYPE TYPE 属性包含对表示相应数据类型的国际标准值的整数值数组的引用。整数数组的长度等于在原始语句中选择的列数，并且可以以与前面显示的 NAME 属性示例类似的方式引用。

常见类型的标准值为：

```
SQL_CHAR             1
SQL_NUMERIC          2
SQL_DECIMAL          3
SQL_INTEGER          4
SQL_SMALLINT         5
SQL_FLOAT            6
SQL_REAL             7
SQL_DOUBLE           8
SQL_DATE             9
SQL_TIME            10
SQL_TIMESTAMP       11
SQL_VARCHAR         12
SQL_LONGVARCHAR     -1
SQL_BINARY          -2
SQL_VARBINARY       -3
SQL_LONGVARBINARY   -4
SQL_BIGINT          -5
SQL_TINYINT         -6
SQL_BIT             -7
SQL_WCHAR           -8
SQL_WVARCHAR        -9
SQL_WLONGVARCHAR   -10 
```

虽然这些数字是相当标准的，[61] 驱动程序将其本机类型映射到这些标准类型的方式差异很大。与这些类型之一不能很好对应的本机类型可能会映射到正式保留供 Perl DBI 使用的范围：-9999 到 -9000。*

# c# - Windows 8 桌面多点触控 API

> ID：14914548
> 
> 赞同：2
> 
> 时间：2013-02-16T19:59:09.880
> 
> 标签：c#, wpf, windows-8, multi-touch

我正在为 Windows 8 桌面模式开发 ac# touch 应用程序，但我找不到最佳方法。我的问题是：我应该使用现有的 Windows 7 Touch API c# 还是有一个新的多点触控 c# API 可用于开发 Windows 8 桌面应用程序？

我知道 Windows 8 对 win7 touch api 有传统支持，如果仍然是最好且唯一的方法，则只需要一些见解和反馈。

有没有人有过这个问题的经验？

编辑：我发现这篇文章： http: [//software.intel.com/en-us/articles/touch-gestures](http://software.intel.com/en-us/articles/touch-gestures)，基本上 UIElement 公开了启用触摸操作的方法。也许这是要走的路。有什么想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T20:12:54.920

Windows 8 API 有一个基于 WM_POINTER 消息的新 API，请参阅[http://msdn.microsoft.com/en-us/library/hh454916(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/hh454916(v=vs.85).aspx)

Windows 7 API 有一些缺点，请参阅[http://the-witness.net/news/2012/10/wm_touch-is-totally-bananas/](http://the-witness.net/news/2012/10/wm_touch-is-totally-bananas/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T16:53:58.387

WM_TOUCHxxx 消息不容易出现这个问题：

[http://social.msdn.microsoft.com/Forums/en-US/ce6d630a-b345-46ac-88ef-773704986d62/touch-responsiveness-issue-how-to-resolve-jagged-nonsmooth-lines?forum=winappswithcsharp](http://social.msdn.microsoft.com/Forums/en-US/ce6d630a-b345-46ac-88ef-773704986d62/touch-responsiveness-issue-how-to-resolve-jagged-nonsmooth-lines?forum=winappswithcsharp)

WM_TOUCHxxx 和 WM_POINTERxxx 消息都会出现这个问题：

[https://web.archive.org/web/20150709083602/https://connect.microsoft.com/VisualStudio/feedback/details/903760/wpf-touch-services-are-badly-broken](https://web.archive.org/web/20150709083602/https://connect.microsoft.com/VisualStudio/feedback/details/903760/wpf-touch-services-are-badly-broken)

如果您的 c# 桌面应用程序正在使用 WPF，那么您唯一可行的选择是实现自己的 TOUCHDEVICE 来修复这些潜在问题，因为 Microsoft 似乎已决定 WPF 触摸不再重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-08T15:10:42.093

这取决于您在应用程序中的实际需求。

如果您只想要新的快速方法来旋转和缩放对象，那么[WPF Manipulation API](https://docs.microsoft.com/en-us/dotnet/api/system.windows.input.manipulation?view=netcore-3.1)可能就是您所需要的。

但是，如果您需要在 GUI 上独立或以自定义方式处理多个手指，您只需处理通常的[OnTouchDown](https://docs.microsoft.com/en-us/dotnet/api/system.windows.uielement.ontouchdown)、[OnTouchMove](https://docs.microsoft.com/en-us/dotnet/api/system.windows.uielement.ontouchmove)和其他事件。

Please note that, however, multi-touch is only available from inside a single window. In other words: you can multi-touch two objects on the same window, but you won't be able to multi-touch two objects that reside on different windows. If you want multi-touch, multi-window funcionality, you need to:

*   Use .NET 4.7
*   [Change some configuration in your WPF app](https://docs.microsoft.com/en-us/dotnet/framework/migration-guide/mitigation-pointer-based-touch-and-stylus-support)

# javascript - Chrome 扩展内容安全策略

> ID：14914550
> 
> 赞同：4
> 
> 时间：2013-02-16T19:59:58.993
> 
> 标签：javascript, html, google-chrome, google-chrome-extension, content-security-policy

我的扩展需要动态加载代码。我写这个来加载它 -

```
 var se = document.createElement('script');
se.setAttribute('type', 'text/javascript');
se.appendChild(document.createTextNode(code));
document.getElementsByTagName('head').item(0).appendChild(se); 
```

这是我在 manifest.js 中的安全策略 -

```
 "content_security_policy": "script-src 'self' 'unsafe-eval'; object-src 'self'" 
```

这会引发一个 javascript 错误 -

```
 "Refused to execute inline script because it violates the following Content Security Policy directive: "script-src 'self' 'unsafe eval'" 
```

我的问题是 - 为什么不放松？我特别在 manifest 中添加了该行以允许不安全的 evals 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:16:39.463

我不认为这是您的使用`eval`导致错误。您似乎违反了执行内联 JavaScript 的政策，将`<script>`块注入到`head`您的文档中。

根据有关[内容安全策略](http://developer.chrome.com/extensions/contentSecurityPolicy.html)的文档：

> 内联 JavaScript 将不会被执行。此限制禁止内联块和内联事件处理程序（例如 <button onclick='...'>）。

另请注意：

> **内联脚本**
> 
> 没有机制可以放宽对执行内联 JavaScript 的限制。特别是，设置包含“unsafe-inline”的脚本策略将无效。

您必须想出一种方法，利用外部`js`文件来完成您想要做的任何事情，而不是将您的代码内联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-04T23:22:22.933

只需将其添加到您的 manifest.json 中，对我有用。

```
 "content_security_policy": "script-src 'self' 'unsafe-eval'; object-src 'self'" 
```

# html - 对齐水平文本 到一个有角度的

> ID：14914552
> 
> 赞同：2
> 
> 时间：2013-02-16T20:00:03.717
> 
> 标签：html, css, text, alignment

我正在尝试在我的页面上创建带有文本的楼梯效果。我已经将一个`<p>`元素包裹在 a`<section>.`该部分具有以下样式：

```
section{
    transform:rotate(-37.6deg);
    -ms-transform:rotate(-37.6deg); 
    -moz-transform:rotate(-37.6deg); 
    -webkit-transform:rotate(-37.6deg); 
    width: 200px;       
} 
```

我希望我的文本`<p>`被限制在我创建的旋转框内，然后能够旋转文本，使每一行都是水平的，沿着`<section>`框的线向下移动。

[这](http://webmaster.senecacollege.ca/daharbri/www102/www102_assignment2/css/home.html)是该页面的链接，因此您可以更好地了解我要完成的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T09:10:47.257

使用这种方法无法实现您的目标，因为*CSS 转换是在 DOM 渲染***后**由 GPU渲染的，因此（例如）转换后的元素不会影响其他元素的位置和大小。

为了实现您的目标，您应该使用 jQuery 解决方案，例如“ [http://www.csstextwrap.com/](http://www.csstextwrap.com/) ”

# rubymine - Rubymine Live Templates 备忘单

> ID：14914553
> 
> 赞同：2
> 
> 时间：2013-02-16T20:00:04.843
> 
> 标签：rubymine, live-templates

有谁知道是否有可用于在 Rubymine 中触发实时模板的首字母缩略词的备忘单？例如，“ifth”加制表符插入一个 if-then-else 子句。

或者是否存在我可以打印出来的配置文件？搜索没有让我到任何地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T02:27:33.003

`File`您可以在|中找到带有描述的实时模板。`Settings`| `Live Templates`.

没有可用的可打印参考，但是可以尝试根据可在`RUBYMINE\lib\rubymine.jar\liveTemplates`.

有一个[生成 PDF 键盘映射参考的插件](https://github.com/denis-zhdanov/intellij-keymap)，可以将其用作新插件的起点，该插件将为实时模板导出 PDF。

# weblogic11g - WebLogic 11G：已删除的 WAR 仍在列出

> ID：14914555
> 
> 赞同：2
> 
> 时间：2013-02-16T20:00:24.863
> 
> 标签：weblogic11g

WebLogic 11G Windows XP

你好，

我正在运行 WebLogic 11g。我将两个 WAR 放入 autodeploy 目录。一切都很好。几个月后，我不再需要它们，所以我从 autodeploy 目录中删除了它们。

当我登录到 WebLogic 11g 管理站点时，这些 WAR 仍然在“部署”下列出。如果我尝试通过管理站点删除这些列表，我会被告知由于它们是自动部署的，因此必须从目录中手动删除它们。我这样做了，除了重新启动 WebLogic 11g 之外，我什至尝试先停止服务。没有骰子。

我怎样才能解决这个问题？

非常感谢提前

史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:30:21.757

关闭 WLS 服务器后，在文本编辑器中打开域 config.xml 并搜索所有标记。您很可能会看到有关您删除的那些战争文件的部分。删除这些部分。然后再次启动您的 WLS。

# matlab - 如何从结构中获取所有数据？

> ID：14914557
> 
> 赞同：6
> 
> 时间：2013-02-16T20:00:53.237
> 
> 标签：matlab, struct

我从 Web 服务获得了结果，MatLab 很高兴地通知它是一个*1x1 struct*。但是，当我尝试显示它时（通过输入*receivedData*并按`enter`）我会看到：

```
ResponseData: [5x1 struct] 
```

同样高兴的是，我输入了以下内容，试图让我查看数据：

```
struct2array(responseData) 
```

我只得到一堆（不是五个，超过五个）**可能**是所提供数据列的名称标题的字符串。

如何从这种结构中获取**所有数据？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T21:05:08.500

您可以使用`fieldnames`从结构中获取数据，然后使用`getfield`函数迭代地显示数据。例如：

```
structvariable = struct('a',123,'b',456,'c',789);
dataout = zeros(1,length(structvariable)) % Preallocating data for structure
field = fieldnames(a);

for i = 1:length(structvariable)
    getfield(structvariable,field{i})
end 
```

请记住，以**cell**`getfield`的形式提供数据，而不是**matrix**。

 ***** * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-15T09:53:24.610

或者您可以使用 cellfun 功能：

```
% STRUCT - your structure
% tmp_nam - structure field names
% tmp_val - values for structure field names

tmp_nam = fieldnames(STRUCT);
tmp_val = cellfun(@(x)(STRUCT.(x)),tmp_nam,'UniformOutput',false); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-13T15:09:31.923

为了*显示*结构的所有元素和子元素，您可以在此处下载自定义函数：http: [//www.mathworks.com/matlabcentral/fileexchange/13831-structure-display](http://www.mathworks.com/matlabcentral/fileexchange/13831-structure-display)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-02T12:47:39.383

对 Sahinsu 的回答的一个小修正：

```
structvariable = struct('a',123,'b',456,'c',789);
dataout = zeros(1,length(structvariable)) % Preallocating data for structure
field = fieldnames(structvariable);

for i = 1:length(field)
    getfield(structvariable,field{i})
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T07:36:36.033

一些有用的访问语法：

```
someVar = ResponseData(1)  %Displays the first element
someVar = ResponseData(4)  %Displays the 4th element 
```

要显示它们，一个接一个

```
for ix = 1:length(ResponseData)
    tmp = ResponseData(ix);
end 
```

获取所有字段名

```
names = fieldnames(ResponseData) 
```

从具有第一个字段名称的结构中获取所有 5 个数据元素，并将它们放入元胞数组

```
ixFieldName = 1;
someCellArray = {  ResponseData.(ixFieldName{1})  } 
```****

# c# - 将xml文件中的详细信息还原到winform

> ID：14914561
> 
> 赞同：0
> 
> 时间：2013-02-16T20:01:25.320
> 
> 标签：c#, xml, winforms, visual-studio, xml-deserialization

![在此处输入图像描述](../Images/ed5d7ff3e41a7e7df50e59c52568e7a1.png) ![在此处输入图像描述](../Images/49148ccc846549125a3dd3d505de3346.png)
在这里，我通过序列化将详细信息从 form1 保存到 data.xml。

现在，我想通过在表格 2 中搜索患者 ID 来获取详细信息，并在单击表格 2 中的恢复按钮时恢复到表格 1 的文本框中。

```
public class PatientData    {    public long Patient_ID;    public string Name;    public string Address;    public long Mobile;     }    private void Patient_clear()    {    Patient_ID.Text = "";    Mobile.Text = "";    Address.Text = "";    Name.Text = "";    }    private List<PatientData> GetPatients(string filename)   {    if (!File.Exists(filename))    return new List<PatientData>();    XmlSerializer xs = new XmlSerializer(typeof(List<PatientData>));    using (FileStream fs = new FileStream(filename, FileMode.OpenOrCreate))    return (List<PatientData>)xs.Deserialize(fs);   }    public void SavePatients(string filename, List<PatientData> Patients)    {    XmlSerializer xs = new XmlSerializer(typeof(List<PatientData>));   using (FileStream fs = new FileStream(filename, FileMode.OpenOrCreate))    xs.Serialize(fs, Patients);   }   private void load_Click(object sender, EventArgs e)   {   System.Windows.Forms.Form Form2 = new Form2();   Form2.Show();   }   private void save_Click(object sender, EventArgs e)   {   List<PatientData> Patients = GetPatients(@"D:\PatientD.xml");   PatientData patient = new PatientData();   patient.Patient_ID = Patient_ID.MaxLength;   patient.Name = Name.Text;   patient.Address = Address.Text;   patient.Mobile = Mobile.MaxLength;   Patients.Add(patient);   SavePatients(@"D:\Sarath\Project\XML\curarisd\PatientD.xml", Patients);    MessageBox.Show("Inserted");   Patient_clear();   } 
```

坦率地说，我没有尝试过恢复数据，我不知道 xml 它是大学的 ma 项目。请帮助我学习。现在我的问题是我想通过在 form2 中搜索 Patient ID 来恢复 PatientD.xml 中的数据并将其显示在 form1 中

注意：它是一个有两种形式的项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:54:33.230

听起来你已经成功了一半。data.xml 是否包含您的患者详细信息列表，还是序列化为单独文件的单个实例？这是一个重要的问题，因为它将控制您需要如何反序列化。

我假设您有一个序列化为 data.xml 的患者详细信息对象列表。所以你可能有这样的课程：

```
public class PatientDetail
{
    public string PatientID { get; set; }
    public string Name { get; set; }
    public string Address { get; set; }
    public string Mobile { get; set; }
} 
```

根据您的描述，您的 Form2 可能是一个模型输入框，当您单击加载时会打开。您应该在 Form2 类上创建一个名为 PatientID 的公共属性。

当用户输入数字并点击恢复时，您可以设置 PatientID 属性并关闭 Form2 输入框。返回 Form1 类，从 Form2 实例上的 PatientID 检索值。这将在您反序列化数据时使用。

同样，假设您已将 PatientDetail 对象列表序列化为数据，您将需要反序列化 XML 文件并找到所需的实例：

```
//Deserialise the file
XmlSerializer serialiser = new XmlSerializer(typeof(List<PatientDetail>));
StreamReader reader = new StreamReader("Data.xml");
List<PatientDetail> details = (List<PatientDetail>)serialiser.Deserialize(reader);
reader.Close();

//Find the record which matches the ID retrieved earlier from Form2
PatientDetail detail = details.Where(d => d.PatientID = patientID).First(); 
```

现在您有了反序列化列表中的实例，您将能够填充表单上的文本框。我显然没有在这里进行任何验证（例如检查文件是否存在），将数据检索与接口逻辑分开是个好主意。例如存储库类

# mysql - ORDER BY 的数字的正确字段类型？

> ID：14914563
> 
> 赞同：0
> 
> 时间：2013-02-16T20:01:38.277
> 
> 标签：mysql, sql-order-by, decimal-point

MySQL中数字的正确字段类型是什么？

我有一个数字为 0.00、4.12、99.10、130.99 的字段

因此 TINYINT 或 SMALLINT 无效，因为它们将小数位删除为 0、4、131 等。

当我使用 VARCHAR 时，我无法正确 ORDER BY，因为它在 130.99 之后排序 99.10

我需要哪种类型？最大数字不会大于 1000。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T20:04:43.350

你可以选择：

*   定点：十进制、数字
*   浮点数：浮点数，双精度

您可以在相应的[mysql 文档中找到更多信息](http://dev.mysql.com/doc/refman/5.0/en/numeric-types.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T20:05:45.693

[`DECIMAL`](http://dev.mysql.com/doc/refman/5.0/en/fixed-point-types.html)

列语法：

```
`name` DECIMAL(<precision>,<scale>) 
```

请注意，这`<precision>`是*总*列长度，`DECIMAL(5,2)`小数点前 3 位和小数点后 2 位也是如此。

# jquery - 预选使用 ajax 预加载的选择元素

> ID：14914565
> 
> 赞同：1
> 
> 时间：2013-02-16T20:02:02.357
> 
> 标签：jquery

我有一个选择元素，它的选项是使用 ajax 调用填充的，在 ajax 调用成功时，我将索引设置为 -1，这意味着选择不会显示 :selected 作为默认值

我关于ajax调用成功的jquery是

```
$("#brandList").prop("selectedIndex", -1); 
```

所以我的选择框看起来像这样

```
<select id="1">
  <option>a</option>
  <option>b</option>
  <option>c</option>
</select> 
```

如何使用 jquery 预选选项？例如在加载时我希望它显示选项 b。在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:06:43.600

```
$('select option:contains(b)').prop('selected', true); 
```

（在您的 Ajax 成功回调中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T20:16:06.090

您可以使用[:eq(index)](http://docs.jquery.com/Selectors/eq)选择器通过索引匹配单个元素。

```
 $('#select option').eq(1).attr('selected', 'selected'); 
```

**注意：**索引是从零开始的。

# reverse-proxy - 反向代理+调度程序 - 最简单的方法是什么

> ID：14914567
> 
> 赞同：1
> 
> 时间：2013-02-16T20:02:25.927
> 
> 标签：reverse-proxy, dispatcher

我正在寻找一种解决方案，该解决方案将面向外部的`http://mycompany.com/external/*`重定向/代理重定向到`http://internal-host:1234/internal/*` （星号用作通配符）

好的，我猜上面那句话还不够，所以这里是细节：

在我的 Intranet 中，我有几台服务器（为简单起见，名称、地址、端口和上下文路径显然是虚构的）：

1.  HRServer 在地址运行`10.10.10.10:1010/hr`
2.  邮件服务器在地址运行`20.20.20.20:2020/mail`

我的系统只能从 ip 78.78.78.78 访问互联网，这里的限制是我只能使用一个端口（例如 8080）。换句话说 - 无论我的问题的解决方案是什么 - 外部地址都应该以`78.78.78.78:8080`

我需要做的是通过这个端口公开 HR 和 Mail 服务。我想到的第一件事是编写两个简单的 portlet（或带有两个框架的 HTML）并将它们嵌入到 78.78.78.78:8080/ 的简单网页中，但显然这不起作用，因为 portlet 将重定向浏览器到例如 10.10.10.10:1010/hr，这在互联网上是不可见的。所以我的下一个想法是——好的，让我们找到一个具有调度能力的反向代理。然后我可以制作

*   `78.78.78.78:8080/hr`“重定向”到内部`10.10.10.10:1010/hr`
*   `78.78.78.78:8080/mail`“重定向”到内部`20.20.20.20:2020/mail`

我还希望，如果在未读邮件上看到邮件服务器未`20.20.20.20:2020/mail/unread`读邮件，也可以从互联网访问。粗略地说-我希望

*   `78.78.78.78:8080/mail/`* 重定向到内部`20.20.20.20:2020/mail/`*（星号用作通配符）

我真的觉得我在这里错过了明显的东西，但老实说 - 我花了很长时间研究几个代理，但我没有找到答案。我可能正在寻找错误的单词或其他内容，但我找不到可以配置为将外部路径分派到不同内部路径的反向代理。

所以请 - 如果答案是例如 Apache mod_proxy - 请给我一个关于我应该寻找的参数名称的提示。最后 - 我将在 FreeBSD 操作系统中运行瘦身，但这不是一个严格的要求（其他 *nix 操作系统也可以）谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:57:09.527

花了很长时间，但这里是答案：

一个好的解决方案是[nginx](http://nginx.org/)（发音为“Engine X”）。

要重新路由到达的所有流量 `https://mycompany.com/external/*`（ `http://internal-host:1234/internal/*`星号用作通配符），您需要具有以下配置：

```
location ~ ^/internal/ {
   rewrite ^/internal/(.*)$   /$1 break;
   proxy_pass     http://internal-host:1234; 
```

}

这种方法可用于所有其他地址——例如 HR 门户、邮件等。

最后，提醒您 - 以下配置不起作用：

```
location ~ ^/internal/(.*)$ {
  proxy_pass     http://internal-host:1234/internal/$1;
} 
```

事实证明，当使用正则表达式时，nginx 将始终代理传递整个 URI，因此规则必须是上面的规则（它执行 url-rewrite）。

# c# - 非递归地在迷宫中查找方法数

> ID：14914568
> 
> 赞同：1
> 
> 时间：2013-02-16T20:02:27.877
> 
> 标签：c#, algorithm, non-recursive

给定一个矩阵 [n,n] 我想找出我们可以从 [0,0] 到 [n,n] 非递归地达到多少种方式。

我的方法是

1.  创建一个结构节点来存储到目前为止行进的行、列和路径
2.  将节点添加到队列
3.  遍历队列直到不为空。增加行，增加列。添加到队列
4.  如果 row=n, col=n 则打印路径

问题

1.  是否有不同的方式来存储行、列和路径
2.  如果 n 非常大，将节点存储在 Queue 中可能会出现问题。我们怎样才能避免这种情况？

请不要我不是在寻找递归解决方案。我在许多面试论坛上看到这样的问题，所以想知道这是否是正确的方法。

下面是Node的结构和功能

```
 struct Node
    {
        public int row;
        public int col;
        public string path;

        public Node(int r, int c, string p)
        {
            this.row = r;
            this.col = c;
            this.path = p;
        }
    }

 public static void NextMoveNonRecursive(int max)
    {

        int rowPos;
        int colPos;
        string prevPath = "";
        Node next;

        while (qu.Count > 0)
        {
            Node current = qu.Dequeue();
            rowPos = current.row;
            colPos = current.col;
            prevPath = current.path;

            if (rowPos + 1 == max && colPos + 1 == max)
            {
                Console.WriteLine("Path = ..." + prevPath);
                TotalPathCounter++;
            }

            if (rowPos + 1 < max)
            {
                if (prevPath == "")
                    prevPath = current.path;

                prevPath = prevPath + ">" + (rowPos + 1) + "" + (colPos);
                next = new Node(rowPos + 1, colPos, prevPath);
                qu.Enqueue(next);
                prevPath = "";
            }

            if (colPos + 1 < max)
            {

                if (prevPath == "")
                    prevPath = current.path;

                prevPath = prevPath + ">" + (rowPos) + "" + (colPos+1);
                next = new Node(rowPos, colPos+1, prevPath);
                qu.Enqueue(next);
                prevPath = "";
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T21:55:41.220

让`dp[i, j]`是从`[0, 0]`到的路径数`[i, j]`。

我们有：

```
dp[0, i] = dp[i, 0] = 1 for all i = 0 to n
dp[i, j] = dp[i - 1, j] +     come down from all paths to [i - 1, j]
           dp[i, j - 1] +     come down from all paths to [i, j - 1]         
           dp[i - 1, j - 1]   come down from all paths to [i - 1, j - 1] 
           for i, j > 0 
```

`dp[i - 1, j - 1]`如果不能同时增加行和列，请从上述总和中删除。

`dp[n, n]`会有你的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T02:13:50.207

给定一个矩阵 [n,n]，通过增加 col 或 row 可以从 [0,0] 到 [n,n] 有多少种方式？

```
(n*2-2) choose (n*2-2)/2 
```

如果只能向下或向右（即增加行或列），这似乎是一个二元命题——我们可以将“向下”或“向右”视为“0”或“1”。

在 nxn 矩阵中，遵循向下/向右条件的每条路径的长度均为 n*2-2（例如，在 3x3 正方形中，路径的长度始终为 4；在 4x4 正方形中，长度为 6）。

x 位二进制数中 0 和 1 的总组合数为 2^x。在这种情况下，我们的 'x' 是 n*2-2，但我们不能使用所有组合，因为 'down' 或 'right' 的数量不能超过 n-1。看来我们需要所有具有相同数量的 0 和 1 的二进制组合。解决方案是...... [tada](https://stackoverflow.com/questions/2635019/counting-through-all-binary-numbers-with-equal-1s-and-0s)：

```
(n*2-2) choose (n*2-2)/2 
```

在 Haskell 中，您可以编写以下非递归函数来列出路径：

```
import Data.List
mazeWays n = nub $ permutations $ concat $ replicate ((n*2-2) `div` 2) "DR" 
```

如果你想要路径的数量，那么：

```
length $ mazeWays n 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T04:24:38.927

带有示例的 Javascript 解决方案

```
var arr = [
    [1, 1, 1, 0, 0, 1, 0],
    [1, 0, 1, 1, 1, 1, 0],
    [1, 0, 1, 0, 1, 0, 0],
    [1, 1, 0, 0, 1, 0, 0],
    [1, 0, 0, 0, 1, 1, 1],
    [1, 1, 1, 1, 1, 1, 1]
];

function sols2(arr){
    var h = arr.length,
            w = arr[0].length,
            i, j, current, left, top;

    for(i = 0; i < h; i++){
        for(j = 0; j < w; j++){
            current = arr[i][j];
            top = i === 0 ? 0.5 : arr[i - 1][j];
            left = j === 0 ? 0.5 : arr[i][j-1];

            if(left === 0 && top === 0){
                arr[i][j] = 0;
            } else if(current > 0 && (left > 0 || top > 0)){
                arr[i][j] = (left + top) | 0;
            } else {
                console.log('a6');
                arr[i][j] = 0;
            }       
        }
    }
    return arr[h-1][w-1];
}

sols2(arr); 
```

# bash - 如何使用 Bash 在屏幕会话中获取命令历史记录？

> ID：14914570
> 
> 赞同：22
> 
> 时间：2013-02-16T20:02:41.983
> 
> 标签：bash, command-line, gnu-screen

如果我使用 启动屏幕会话`screen -dmS name`，我将如何使用脚本访问该屏幕会话的命令历史记录？

使用`↑</kbd>, the last executed command appears, even in screen.`

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-02-12T02:48:32.410

我在我的系统上使用默认的 bash shell，因此可能无法与其他 shell 一起使用。

这是我在`~/.screenrc`文件中的内容，以便每个新的屏幕窗口都有自己的命令历史记录：

# 具有自己的命令历史记录的默认屏幕窗口

要打开一组默认屏幕窗口，每个窗口都有自己的命令历史文件，您可以将以下内容添加到`~/.screenrc`文件中：

```
screen -t "window 0" 0 bash -ic 'HISTFILE=~/.bash_history.${WINDOW} bash'
screen -t "window 1" 1 bash -ic 'HISTFILE=~/.bash_history.${WINDOW} bash'
screen -t "window 2" bash -ic 'HISTFILE=~/.bash_history.${WINDOW} bash' 
```

# 确保新 Windows 拥有自己的命令历史记录

默认屏幕设置意味着您使用`Ctrl+a c`或创建一个新窗口`Ctrl+a Ctrl+c`。但是，如果您的文件中只有上述`~/.screenrc`内容，这些将使用默认`~/.bash_history`文件。为了解决这个问题，我们将覆盖用于创建新窗口的键绑定。将此添加到您的`~/.screenrc`文件中：

```
bind c screen bash -ic 'HISTFILE=~/.bash_history.${WINDOW} bash'
bind ^C screen bash -ic 'HISTFILE=~/.bash_history.${WINDOW} bash' 
```

现在，每当您创建一个新的屏幕窗口时，它实际上是在启动一个 bash shell，将`HISTFILE`环境变量设置为包含当前屏幕窗口编号 ( `$WINDOW`) 的值。

命令历史文件将在具有相同窗口编号的屏幕会话之间共享。

# `$HISTFILE`在执行时写入命令

与正常的 bash 行为一样，只有在退出 shell/屏幕窗口时才会将历史记录写入`$HISTFILE`文件。但是，如果您希望在命令执行后将命令写入历史文件，从而立即可用于具有相同窗口编号的其他屏幕会话，您可以在`~/.bashrc`文件中添加如下内容：

```
export PROMPT_COMMAND="history -a; history -c; history -r; ${PROMPT_COMMAND}" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-16T20:23:51.103

`screen`不会保留您键入的命令的历史记录。您的外壳可能会或可能不会保留历史记录。由于您似乎使用`bash`，因此您可以使用该`history`命令。

`screen`确实似乎具有历史搜索的粗略近似值（它仅在回滚缓冲区中搜索命令行。请参阅`screen`“历史”命令下的手册页（`C-a {`默认绑定）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-08T16:48:10.197

@technosaurus 是对的。$HISTFILE 是在 bash 退出时写入的，因此您可以退出一个 bash 会话并启动一个新会话，并且历史应该已经通过该文件保存。

但我认为有更好的方法来解决你的问题。bash 手册包含对[history 内置命令](https://www.gnu.org/software/bash/manual/html_node/Bash-History-Builtins.html)的描述。它允许您使用 保存此历史记录`history -w [filename]`并使用 读取历史记录`history -r [filename]`。如果您不提供文件名，它将使用 $HISTFILE。

因此，我建议您将屏幕会话中的历史记录保存到特定文件（如果需要，也可以保存到默认的 $HISTFILE）。然后在要从中访问历史记录的另一个 bash 会话中读取历史记录文件。这样您就不必退出原始的 bash 会话。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-16T21:14:20.063

当您`exit`使用终端（或外壳）时，外壳会将其历史记录写入 $HISTFILE，因此要在另一个终端中获取其历史记录，您可以输入`exit`您想要其历史记录的终端，它将被写入。

```
cat $HISTFILE
#or tac, less, $EDITOR, ... depending on how you want to "access" it 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-08T16:22:21.940

使用这个： screen -L with capital L 它会将终端输入和输出的副本存储到名为 screenlog.0 的文件中，或者如果您使用 -S 命名它，日志文件将获取屏幕名称

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-03T09:47:33.443

我将下一行放入我的 .bashrc：

```
case "$TERM" in
   screen)
       declare SCREEN_NAME=$(echo $STY | sed -nr 's/[^.]*\.(.*)/\1/p')
       if [[ $SCREEN_NAME ]]; then
           HISTFILE="${HISTFILE}.${SCREEN_NAME}.${WINDOW}"
           declare -p HISTFILE
       fi
       unset SCREEN_NAME
       ;;
   *)
       ;;
esac 
```

我的默认 .bashrc 有这个 'case' 基本上带有 'xterm*|rxvt*)' 值，所以我只添加了我的 'screen' 部分。如果你没有这个“案例”，你可以使用下一个来代替它：

```
if [[ $TERM == screen ]]; then
   declare SCREEN_NAME=$(echo $STY | sed -nr 's/[^.]*\.(.*)/\1/p')
   if [[ $SCREEN_NAME ]]; then
       HISTFILE="${HISTFILE}.${SCREEN_NAME}.${WINDOW}"
       declare -p HISTFILE
   fi
   unset SCREEN_NAME
fi 
```

在我的**所有屏幕的所有窗口都有自己的 bash_history**之后。

*注意：这在 chroot 中不起作用！*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-12T02:53:45.023

`history`将显示所有历史命令。

# php - 定时任务。仅在指定的时间间隔内运行 php

> ID：14914571
> 
> 赞同：1
> 
> 时间：2013-02-16T20:02:44.603
> 
> 标签：php, cron, crontab

我已经设置了一个 cronjob，它每 35 分钟执行一次 php 脚本。问题是我只希望它在第二天上午 11 点到凌晨 2 点运行。我希望这是自动的，而不必手动将 # 添加到 crontab 中。

我试过把这样的东西放在 php 脚本的顶部：

```
$time = date(H);

if ($time < 23 & $time > 11)
{
   echo 'Working';
}
else
{
   echo 'Stopped';
} 
```

但正如你所看到的，这只适用于同一天。

**注意**服务器正在使用另一个时区，与我的时区相差 +4 小时。

这意味着：当地时间上午 11 点是服务器时间下午 3 点，当地时间第二天凌晨 3 点表示第二天服务器时间上午 7 点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:07:18.667

所以你想让你的 cronjob 在一天中的特定时间运行？你有没有尝试过：

```
35 11-23,0-2 * * * php /path/to/your/script.php 
```

这将在上午 11 点（第 1 天）和凌晨 2 点（第 2 天）之间的每小时 35 分钟执行 - 一切都在服务器时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T20:08:05.537

您需要`H`用引号括起来：

```
$time = date("H"); 
```

另一种将其视为常量的方式，并且由于您没有这样的常量，因此`date()`接收空参数

PS hohner 为您提供更好的解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T20:12:17.260

在检查之前将时间转移到正确的时区。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T20:16:29.633

让我们使用您的代码并应用一些算术，只需减去 2 小时，您将得到 9 到 23 而不是 11 到 23 + 0 到 2。

```
$time = date(H)  - 2 ;

if ($time < 23 & $time > 9 )
{
   echo 'Working';
}
else
{
   echo 'Stopped';
} 
```

尝试！

我猜你的时区是 GMT-4，所以你的时区的上午 11 点到凌晨 2 点将是服务器上的上午 15 点到早上 6 点；另一个可能的设置是您正在谈论服务器时间，这意味着您设置的上午 11 点到凌晨 2 点是上午 7 点到晚上 10 点。

这意味着您可能必须调整代码以减去 6 小时而不是 2 小时。

# objectlistview - ListView 和 FlipView 在 xaml 中组合

> ID：14914574
> 
> 赞同：1
> 
> 时间：2013-02-16T20:03:01.470
> 
> 标签：objectlistview

我正在尝试在 Windows 商店应用程序中组合两个组件（ListView 和 FlipView），但是在单击 Flipview 下一步按钮时出现问题，因为我想列出仅滚动项目而不选择它们。我怎样才能做到这一点？我找到了一些示例并对其进行了修改，现在这是我唯一遇到的问题。谢谢。

这是我的代码：

```
<Page
x:Class="FlipViewPreviewIndicator.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:FlipViewPreviewIndicator"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d">
<Page.Resources>
    <Style x:Key="FlipViewStyle" TargetType="FlipView">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="TabNavigation" Value="Once"/>
        <Setter Property="IsTabStop" Value="False"/>
        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Hidden"/>
        <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Hidden"/>
        <Setter Property="ScrollViewer.IsHorizontalRailEnabled" Value="False"/>
        <Setter Property="ScrollViewer.IsVerticalRailEnabled" Value="False"/>
        <Setter Property="ScrollViewer.IsHorizontalScrollChainingEnabled" Value="True"/>
        <Setter Property="ScrollViewer.IsVerticalScrollChainingEnabled" Value="True"/>
        <Setter Property="ScrollViewer.IsDeferredScrollingEnabled" Value="False"/>
        <Setter Property="ScrollViewer.BringIntoViewOnFocusChange" Value="True"/>
        <Setter Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <VirtualizingStackPanel AreScrollSnapPointsRegular="True" Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="FlipView">
                    <Grid>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Focused">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualWhite"/>
                                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisualBlack"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Unfocused"/>
                                <VisualState x:Name="PointerFocused"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Margin="3">
                            <Border.Resources>
                                <ControlTemplate x:Key="HorizontalNextTemplate" TargetType="Button">
                                    <Border x:Name="Root" BorderBrush="{StaticResource FlipViewButtonBorderThemeBrush}" BorderThickness="{StaticResource FlipViewButtonBorderThemeThickness}" Background="{StaticResource FlipViewButtonBackgroundThemeBrush}">
                                        <VisualStateManager.VisualStateGroups>
                                            <VisualStateGroup x:Name="CommonStates">
                                                <VisualState x:Name="Normal"/>
                                                <VisualState x:Name="PointerOver">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Root">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPointerOverBackgroundThemeBrush}"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="Root">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPointerOverBorderThemeBrush}"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="Arrow">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPointerOverForegroundThemeBrush}"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="Pressed">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Root">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPressedBackgroundThemeBrush}"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="Root">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPressedBorderThemeBrush}"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="Arrow">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPressedForegroundThemeBrush}"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                            </VisualStateGroup>
                                        </VisualStateManager.VisualStateGroups>
                                        <Path x:Name="Arrow" Data="M4.12,0 L9.67,5.47 L4.12,10.94 L0,10.88 L5.56,5.47 L0,0.06 z" Fill="{StaticResource FlipViewButtonForegroundThemeBrush}" HorizontalAlignment="Center" Height="10.94" Stretch="Fill" UseLayoutRounding="False" VerticalAlignment="Center" Width="9.67"/>
                                    </Border>
                                </ControlTemplate>
                                <ControlTemplate x:Key="HorizontalPreviousTemplate" TargetType="Button">
                                    <Border x:Name="Root" BorderBrush="{StaticResource FlipViewButtonBorderThemeBrush}" BorderThickness="{StaticResource FlipViewButtonBorderThemeThickness}" Background="{StaticResource FlipViewButtonBackgroundThemeBrush}">
                                        <VisualStateManager.VisualStateGroups>
                                            <VisualStateGroup x:Name="CommonStates">
                                                <VisualState x:Name="Normal"/>
                                                <VisualState x:Name="PointerOver">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Root">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPointerOverBackgroundThemeBrush}"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="Root">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPointerOverBorderThemeBrush}"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="Arrow">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPointerOverForegroundThemeBrush}"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="Pressed">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Root">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPressedBackgroundThemeBrush}"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="Root">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPressedBorderThemeBrush}"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="Arrow">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPressedForegroundThemeBrush}"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                            </VisualStateGroup>
                                        </VisualStateManager.VisualStateGroups>
                                        <Path x:Name="Arrow" Data="M5.55,0 L9.67,0.06 L4.12,5.47 L9.67,10.88 L5.55,10.94 L0,5.48 z" Fill="{StaticResource FlipViewButtonForegroundThemeBrush}" HorizontalAlignment="Center" Height="10.94" Stretch="Fill" UseLayoutRounding="False" VerticalAlignment="Center" Width="9.67"/>
                                    </Border>
                                </ControlTemplate>
                                <ControlTemplate x:Key="VerticalNextTemplate" TargetType="Button">
                                    <Border x:Name="Root" BorderBrush="{StaticResource FlipViewButtonBorderThemeBrush}" BorderThickness="{StaticResource FlipViewButtonBorderThemeThickness}" Background="{StaticResource FlipViewButtonBackgroundThemeBrush}">
                                        <VisualStateManager.VisualStateGroups>
                                            <VisualStateGroup x:Name="CommonStates">
                                                <VisualState x:Name="Normal"/>
                                                <VisualState x:Name="PointerOver">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Root">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPointerOverBackgroundThemeBrush}"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="Root">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPointerOverBorderThemeBrush}"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="Arrow">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPointerOverForegroundThemeBrush}"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="Pressed">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Root">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPressedBackgroundThemeBrush}"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="Root">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPressedBorderThemeBrush}"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="Arrow">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPressedForegroundThemeBrush}"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                            </VisualStateGroup>
                                        </VisualStateManager.VisualStateGroups>
                                        <Path x:Name="Arrow" Data="M0.06,0 L5.47,5.56 L10.88,0 L10.94,4.12 L5.48,9.67 L0,4.12 z" Fill="{StaticResource FlipViewButtonForegroundThemeBrush}" HorizontalAlignment="Center" Height="9.67" Stretch="Fill" UseLayoutRounding="False" VerticalAlignment="Center" Width="10.94"/>
                                    </Border>
                                </ControlTemplate>
                                <ControlTemplate x:Key="VerticalPreviousTemplate" TargetType="Button">
                                    <Border x:Name="Root" BorderBrush="{StaticResource FlipViewButtonBorderThemeBrush}" BorderThickness="{StaticResource FlipViewButtonBorderThemeThickness}" Background="{StaticResource FlipViewButtonBackgroundThemeBrush}">
                                        <VisualStateManager.VisualStateGroups>
                                            <VisualStateGroup x:Name="CommonStates">
                                                <VisualState x:Name="Normal"/>
                                                <VisualState x:Name="PointerOver">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Root">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPointerOverBackgroundThemeBrush}"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="Root">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPointerOverBorderThemeBrush}"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="Arrow">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPointerOverForegroundThemeBrush}"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                                <VisualState x:Name="Pressed">
                                                    <Storyboard>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Root">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPressedBackgroundThemeBrush}"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="Root">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPressedBorderThemeBrush}"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="Arrow">
                                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource FlipViewButtonPressedForegroundThemeBrush}"/>
                                                        </ObjectAnimationUsingKeyFrames>
                                                    </Storyboard>
                                                </VisualState>
                                            </VisualStateGroup>
                                        </VisualStateManager.VisualStateGroups>
                                        <Path x:Name="Arrow" Data="M5.63,0 L11.11,5.55 L11.05,9.67 L5.64,4.12 L0.23,9.67 L0.17,5.55 z" Fill="{StaticResource FlipViewButtonForegroundThemeBrush}" HorizontalAlignment="Center" Height="9.67" Stretch="Fill" UseLayoutRounding="False" VerticalAlignment="Center" Width="10.94"/>
                                    </Border>
                                </ControlTemplate>
                            </Border.Resources>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="209"/>
                                </Grid.RowDefinitions>
                                <ScrollViewer x:Name="ScrollingHost" BringIntoViewOnFocusChange="{TemplateBinding ScrollViewer.BringIntoViewOnFocusChange}" HorizontalScrollMode="{TemplateBinding ScrollViewer.HorizontalScrollMode}" HorizontalSnapPointsType="MandatorySingle" HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}" IsTabStop="False" IsHorizontalRailEnabled="{TemplateBinding ScrollViewer.IsHorizontalRailEnabled}" IsHorizontalScrollChainingEnabled="{TemplateBinding ScrollViewer.IsHorizontalScrollChainingEnabled}" IsVerticalScrollChainingEnabled="{TemplateBinding ScrollViewer.IsVerticalScrollChainingEnabled}" IsVerticalRailEnabled="{TemplateBinding ScrollViewer.IsVerticalRailEnabled}" IsDeferredScrollingEnabled="{TemplateBinding ScrollViewer.IsDeferredScrollingEnabled}" Padding="{TemplateBinding Padding}" TabNavigation="{TemplateBinding TabNavigation}" VerticalSnapPointsType="MandatorySingle" VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}" VerticalScrollMode="{TemplateBinding ScrollViewer.VerticalScrollMode}" ZoomMode="Disabled">
                                    <ScrollViewer.ContentTransitions>
                                        <TransitionCollection>
                                            <RepositionThemeTransition/>
                                        </TransitionCollection>
                                    </ScrollViewer.ContentTransitions>
                                    <ItemsPresenter Visibility="Collapsed"/>
                                </ScrollViewer>
                                <Button x:Name="PreviousButtonHorizontal" HorizontalAlignment="Left" Height="40" IsTabStop="False" Template="{StaticResource HorizontalPreviousTemplate}" VerticalAlignment="Center" Width="70"/>
                                <Button x:Name="NextButtonHorizontal" HorizontalAlignment="Right" Height="40" IsTabStop="False" Template="{StaticResource HorizontalNextTemplate}" VerticalAlignment="Center" Width="70"/>
                                <Button x:Name="PreviousButtonVertical" HorizontalAlignment="Center" Height="40" IsTabStop="False" Template="{StaticResource VerticalPreviousTemplate}" VerticalAlignment="Top" Width="70"/>
                                <Button x:Name="NextButtonVertical" HorizontalAlignment="Center" Height="40" IsTabStop="False" Template="{StaticResource VerticalNextTemplate}" VerticalAlignment="Bottom" Width="70"/>
                                <ListView 
                                            ItemsSource="{TemplateBinding ItemsSource}"  
                                            SelectedItem="{Binding SelectedItem, Mode=TwoWay, RelativeSource={RelativeSource Mode=TemplatedParent}}" 
                                            Padding="0,0,0,40" 
                                            ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                            ScrollViewer.VerticalScrollBarVisibility="Disabled"
                                            ScrollViewer.HorizontalScrollMode="Enabled"
                                            ScrollViewer.VerticalScrollMode="Disabled"
                                            SelectionChanged="ListViewSelectionChanged1" Margin="75,0">
                                    <ListView.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel  Orientation="Horizontal" Margin="0,0,0,1" ScrollViewer.HorizontalScrollBarVisibility="Visible" ScrollViewer.VerticalScrollBarVisibility="Disabled"  />
                                        </ItemsPanelTemplate>
                                    </ListView.ItemsPanel>
                                    <ListView.ItemTemplate>
                                        <DataTemplate>
                                            <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                                                <Image Source="{Binding ImageUri}" Stretch="UniformToFill"/>
                                            </Grid>
                                        </DataTemplate>
                                    </ListView.ItemTemplate>
                                </ListView>
                            </Grid>
                        </Border>
                        <Rectangle x:Name="FocusVisualWhite" IsHitTestVisible="False" Opacity="0" StrokeDashOffset="1.5" StrokeEndLineCap="Square" Stroke="{StaticResource FocusVisualWhiteStrokeThemeBrush}" StrokeDashArray="1,1"/>
                        <Rectangle x:Name="FocusVisualBlack" IsHitTestVisible="False" Opacity="0" StrokeDashOffset="0.5" StrokeEndLineCap="Square" Stroke="{StaticResource FocusVisualBlackStrokeThemeBrush}" StrokeDashArray="1,1"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Page.Resources>

<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>
    <Grid/>

    <FlipView Grid.Row="1" d:DataContext="{Binding Source={d:DesignInstance Type=local:SampleData, IsDesignTimeCreatable=True}}"  ItemsSource="{Binding SampleItems}"  Style="{StaticResource FlipViewStyle}"  >

    </FlipView>

</Grid> 
```

# java - 创建一个绘制 256 个灰度强度的频率的直方图 JAVA

> ID：14914576
> 
> 赞同：1
> 
> 时间：2013-02-16T20:03:07.437
> 
> 标签：java, colors, histogram

我无法创建一个将图片文件的名称作为命令行参数的 java 类，将图片转换为灰度，并使用 StdDraw 绘制 256 个灰度强度中每一个的出现频率的直方图。

我已经完成了将图片转换为灰度的部分，但是在绘制 256 灰度强度的频率时遇到了麻烦。我不完全确定如何进行。这是我的代码

```
package grayscale;

import edu.princeton.cs.introcs.Picture;
import edu.princeton.cs.introcs.StdDraw;
import java.awt.Color;

    public class Grayscale {

        public static void main(String[] args) {
            {

                Picture pic = new Picture(args[0]);
                int[] freq = new int[1000];

                for (int i = 0; i < pic.height(); i++) {
                    for (int j = 0; j < pic.width(); j++) {
                        Color color = pic.get(i, j);
                        Color gray = Luminance.toGray(color);
                        pic.set(i, j, gray);

                        Color c = pic.get(i, j);

                        int r = c.getRed();
                        int g = c.getGreen();
                        int b = c.getBlue();

                        if (r == c.getRed()) {
                            freq[r]++;
                        }
                        if (g == c.getGreen()) {
                            freq[g]++;
                        }
                        if (b == c.getBlue()) {
                            freq[b]++;
                        }

                        if (i % 1000 == 0) {
                            StdDraw.setXscale(-1, pic.width());
                            StdDraw.setYscale(0, pic.height());
                            StdDraw.setPenRadius(.5 / pic.width());
                            for (int k = 0; k < pic.width(); k++) {
                                StdDraw.line(k, 0, k, freq[k]);

                            }
                        }
                    }
                    pic.show();
                }
            }
        }
    } 
```

# ios - 用户使用 AFNetworking 登录

> ID：14914577
> 
> 赞同：2
> 
> 时间：2013-02-16T20:03:12.027
> 
> 标签：ios, objective-c, afnetworking

我正在构建我的第一个 iOS 应用程序。

我已经完成了后端代码，但我正在努力处理其中的 Objective-C 部分。

我有一个注册/登录页面。

但我不知道如何使用 Objective C 将该数据发送到我的服务器。

我读过 AFNetworking 很好，但我想知道如何将它用于用户登录。

我已将 AFNetworking 下载并添加到我的 XCode 项目并设置标题。

```
AFHTTPClient *client = [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:@"http://examplewebsite.com]];

[client setDefaultHeader:@"key" value:@"value"];
[client setAuthorizationHeaderWithUsername:@"username" password:@"password"];
[client setAuthorizationHeaderWithToken:@"token"];

NSURLRequest *request = [client requestWithMethod:@"someMethod" path:@"somePath" parameters:nil];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request]; 
```

但我还是迷路了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T20:26:18.843

由于您尝试登录自己的 API，因此您不需要 setAuthorization 的东西。这是基本的 HTTP 身份验证。相反，您想使用[getPath:parameters:success:failure](http://afnetworking.github.com/AFNetworking/Classes/AFHTTPClient.html#//api/name/getPath%3aparameters%3asuccess%3afailure%3a)或 postPath 版本，具体取决于您的后端是期待 HTTP GET 还是 HTTP POST。

在参数参数中传递您的用户名/密码。您应该将[parameterEncoding](http://afnetworking.github.com/AFNetworking/Classes/AFHTTPClient.html#//api/name/parameterEncoding)设置为正确的格式。您可能正在使用 HTTP 表单 url 编码或 JSON。无论您的后端期望什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T10:43:12.993

***由于我是在为AFNetworking 2.0***寻找可行的解决方案时来到这里的，但不知道该解决方案`AFHTTPClient`已从框架中删除，因此我将在此处发布建立此连接的新方法：

```
AFHTTPRequestOperationManager *manager = [[AFHTTPRequestOperationManager alloc] initWithBaseURL:[NSURL URLWithString:@"http://examplewebsite.com"]];
[manager setRequestSerializer:[AFHTTPRequestSerializer serializer]];
[manager.requestSerializer setAuthorizationHeaderFieldWithUsername:@"userName" password:@"password"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T21:17:28.537

在这种情况下，您不想设置授权标头，因为这是用于“*基本访问 HTTP 身份验证*”，这是 HTTP 用户代理在向服务器发出请求时提供用户名和密码的一种方法。

您想使用自己的 API 并与 restful 服务器交互，因此，我建议您将[AFHTTPClient 子类化 -> 与 API、Web 服务或应用程序交互。](https://github.com/AFNetworking/AFNetworking/wiki/Getting-Started-with-AFNetworking)-*如果您在继承 AFHTTPClient 时遇到困难，请查看 AFNetworking zip 存档中的示例。*

由于你想创建一个用户登录的应用程序，应用程序需要将这些信息发送到你的服务器，如果登录成功与否，服务器应该返回。这可以像这样完成 - HTTP POST。

```
 - (void)login {

    // Login information from UITextFields
    id params = @{
        @"username": self.usernameField.text,
        @"password": self.passwordField.text
    };

    //Call the AFHTTP subclass client, with post block. postPath = the path of the url,   where the parameters should be posted. 
    [[theAuthAPIClient sharedClient] postPath:@"/login"
                                parameters:params
                                   success:^(AFHTTPRequestOperation *operation, id responseObject) {

                                       //handle succesful response from server. 

                                   } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                                       // handle error - login failed
                                       }
                                   }];

} 
```

您需要以正确的格式传递参数，具体取决于您的服务器期望的格式。这可以通过在 AFHTTPClient 子类 -> [ParameterEncoding中设置正确的编码来完成](http://afnetworking.github.com/AFNetworking/Classes/AFHTTPClient.html#//api/name/parameterEncoding)

# android - 外包地图菜单

> ID：14914582
> 
> 赞同：4
> 
> 时间：2013-02-16T20:04:21.320
> 
> 标签：android, google-maps, design-patterns, menu, mapactivity

我正在使用 android pie 径向菜单小部件（[http://code.google.com/p/radial-menu-widget/downloads/list](http://code.google.com/p/radial-menu-widget/downloads/list)- v2 版本）并使代码更优雅我将菜单代码外包给不同的类，问题是我在谷歌地图上使用菜单项，点击后我想根据用户选择向地图添加叠加层在菜单上，因为菜单是一个独立的类，所以我正在向构造函数发送地图活动上下文，并且在 onClickListener 的菜单内我正在激活地图上的静态方法（应该根据id 号） - 它不起作用并继续崩溃（一旦菜单尝试访问 mapavtivity 上的静态方法，它就会立即崩溃）。有谁知道我该如何让它工作？=\ ps 我知道基本上我将地图活动和地图派径向菜单紧密结合在一起，我只是没有想到更好的方法..

# mongodb - ElasticSearch 与其他存储结合的典型用法是什么？

> ID：14914585
> 
> 赞同：2
> 
> 时间：2013-02-16T20:04:49.490
> 
> 标签：mongodb, full-text-search, elasticsearch

出于安全、事务等一些显而易见的原因，不建议使用 ElasticSearch 作为唯一存储。那么它通常如何与其他数据库一起使用？

比如说，我想在 MongoDB 中存储一些文档，并能够通过它们的一些属性有效地搜索。我要做的是像往常一样将完整的文档存储在 Mongo 中，然后触发插入到 ElasticSearch **，但我只会在其中插入可搜索的属性**和 MongoDB ObjectID。然后我可以使用 ElasticSearch 搜索并找到 ObjectID，然后转到 Mongo 并获取整个文档。

这是 ElasticSearch 的正确用法吗？我不想复制整个数据，因为我已经在 Mongo 中有它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T22:22:21.050

目前最好的做法是在 ES 中复制文档。这里很酷的是，当您搜索时，您不必返回数据库来获取内容，因为 ES 只需一次调用即可提供它。您可以使用 ES Search Response 向您的用户显示结果。

我的 2 美分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T11:21:16.860

您可能喜欢使用 mongodb River 看看[这篇文章](https://coderwall.com/p/sy1qcw) 有更多的问题然后是您存储或索引的数据的大小，您可能希望 MongoDB 作为“近实时”查询插入数据的备份。并作为要索引的数据的队列（您可能希望将 mongodb 用作具有适合您应用程序的相关[写入问题的集群](http://docs.mongodb.org/manual/core/write-concern/)

# database - sqlite：sqlite 是否支持存储向量（数据数组）？

> ID：14914589
> 
> 赞同：1
> 
> 时间：2013-02-16T20:05:23.467
> 
> 标签：database, sqlite

假设我有一个数据向量，是否可以指定一个字段来存储它？这样我就可以存储和检索序列化数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-24T20:34:28.417

SQLite 不直接支持向量。

要将向量存储为[支持的数据类型](http://www.sqlite.org/datatype3.html)之一，您必须先对其进行序列化。

# c++ - 就生成随机数而言，种子是什么？

> ID：14914595
> 
> 赞同：28
> 
> 时间：2013-02-16T20:06:38.943
> 
> 标签：c++, random, seeding

就生成随机数而言，种子是什么？

我需要生成数百到数千个随机数，我已经阅读了很多关于使用“种子”的信息。什么是种子？是随机数开始的种子吗？例如，如果我将种子设置为 5，它会生成从 5 到我的限制的数字吗？所以它永远不会给我 3 例如。

我正在使用 C++，所以如果你提供任何示例，如果它是在 C++ 中会很好。

谢谢！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-16T20:12:35.117

实际上通常称为随机数序列的是“伪随机”数序列，因为这些值是使用确定性算法计算的，并且概率没有实际作用。

“种子”是序列的起点，保证如果您从同一个种子开始，您将获得相同的数字序列。这对于例如调试非常有用（当您在程序中寻找错误时，您需要能够重现问题并研究它，非确定性程序将更难调试，因为每次运行都会不同） .

如果您只需要一个随机的数字序列并且不需要复制它，那么只需使用当前时间作为种子......例如：

```
srand(time(NULL)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-11T12:17:12.773

所以，让我们这样说：

如果您和您的朋友将种子设置为相同的数字，那么您和您的朋友将获得相同的随机数。所以，如果我们所有人都编写这个简单的程序：

```
#include<iostream>
using namespace std;
void main () {
    srand(0);
    for (int i=0; i<3; i++){
        int x = rand()%11;          //range between 0 and 10
        cout<<x<<endl;
    }
} 
```

我们都会得到相同的随机数，即 (5, 8, 8)。

如果你想每次都得到不同的数字，你可以使用**srand(time())**

# ios - ios，iTunes文件共享保存音频文件

> ID：14914598
> 
> 赞同：0
> 
> 时间：2013-02-16T20:06:53.100
> 
> 标签：ios, load, save, nsdictionary, file-sharing

我尝试以 aac 类型录制语音文件并以 uitable 和工作良好的方式显示，但我无法在 iTunes 文件共享中显示

我激活了**UIFIleSharingEnabled**

但是我在iTunes文件共享中看不到aac文件我该怎么办？

文件格式音频格式**MPEG4AAC**

**文件地址： file** ://localhost/Users/myuser/...aac

 **保存零件

```
NSArray *keys = [NSArray arrayWithObjects:@"voicestr",,@"datestr",@"durstr",nil];

NSDictionary * HistDict =[[NSDictionary alloc] initWithObjects: [NSArray arrayWithObjects:myString,timeString,dateString,currentimeLbl.text,bestsize ,nil] forKeys:keys];

[Hist addObject:HistDict]; 
```

加载文件

```
 BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:myPath];if (fileExists) 
    HistValue = [[NSMutableArray alloc] initWithContentsOfFile:myPath]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:10:11.167

您可以使用以下方法获取 iOS 的文档目录：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *basePath = [paths objectAtIndex:0] 
```

添加文件名

```
NSString *fielWithPath = [basePath stringByAppendingPathComponent:@"fileNaem"]; 
```

并且您必须在`info.plist`

```
UIFileSharingEnabled = YES 
```**

# php - 时间格式转换

> ID：14914599
> 
> 赞同：0
> 
> 时间：2013-02-16T20:06:54.373
> 
> 标签：php, date, datetime, time, timezone

我需要将特定的日期格式转换为当地时间（欧洲/萨拉热窝），我有这种格式的时间 2013-02-17T15:00:00Z 我不太明白，这就是为什么我不知道如何将其转换为欧洲/萨拉热窝时间，谁知道可能已经是萨拉热窝时间了，我不知道...

好的，我可以解析它并删除 T 和 Z 并获得时间，但这些字母意味着什么，可能它们会影响结果时间......

结果时间例如是 2013-02-17 18:00:00，可能由于字母 T 和 Z 可能是时间偏移而存在差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T20:12:02.360

使用日期时间。使用时区要好得多：

```
$datetime = new DateTime('2013-02-17T15:00:00Z');
$datetime->setTimeZone(new DateTimeZone('Europe/Sarajevo'));
echo $datetime->format('c'); 
```

**参考**

*   [约会时间](http://www.php.net/manual/en/class.datetime.php)
*   [日期时区](http://www.php.net/manual/en/class.datetimezone.php)

[看到它在行动](http://codepad.viper-7.com/SlQPgm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T20:08:45.503

您可以像这样使用php日期函数

```
 $date = '2013-02-17T15:00:00Z';
 echo date('Y-m-d H:i:s',strtotime($date)); 
```

见[手册](http://php.net/manual/en/function.date.php)

# java - OS X 上的 Java：Runtime.exec minecraft.jar 什么都不做

> ID：14914600
> 
> 赞同：0
> 
> 时间：2013-02-16T20:06:54.310
> 
> 标签：java, macos, terminal, minecraft

我正在编写一个程序，作为附带功能，启动 Minecraft。目前，以下在 Windows 上运行良好：

```
String osSeparator = ";";
String osSeparatorLast = ";";
Runtime.getRuntime().exec("java -Xms" + settings.MinimumMemory() + " -Xmx" + settings.MaximumMemory() + " -cp \"" + bP + "minecraft.jar" + osSeparator + bP + "jinput.jar" + osSeparator + bP + "lwjgl.jar" + osSeparator + bP + "lwjgl_util.jar" + osSeparatorLast + "\" -Djava.library.path=\"" + bP + "natives\" net.minecraft.client.Minecraft" + " " + username + " " + sessionID); 
```

通过测试，我发现在OS X终端中手动输入的结果如下：

```
String osSeparator = ":";
String osSeparatorLast = "";
Runtime.getRuntime().exec(new String[] {"java", "-Xms" + settings.MinimumMemory(), "-Xmx" + settings.MaximumMemory(), "-cp \"" + bP + "minecraft.jar" + osSeparator + bP + "jinput.jar" + osSeparator + bP + "lwjgl.jar" + osSeparator + bP + "lwjgl_util.jar" + osSeparatorLast + "\"", "-Djava.library.path=\"" + bP + "natives\"", "net.minecraft.client.Minecraft", username, sessionID}); 
```

出于某种原因，上面的代码不会启动 Minecraft，但会获取字符串结果并将其复制/粘贴回终端。

这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:35:19.430

你传递一个数组有什么原因吗？为什么它不像第一个示例那样格式化？

这应该有效：

```
String osSeparator = ":";
String osSeparatorLast = "";
Runtime.getRuntime().exec("java -Xms" + settings.MinimumMemory() + " -Xmx" + settings.MaximumMemory() + "-cp \"" + bP + "minecraft.jar" + osSeparator + bP + "jinput.jar" + osSeparator + bP + "lwjgl.jar" + osSeparator + bP + "lwjgl_util.jar" + osSeparatorLast + "\"" + " -Djava.library.path=\"" + bP + "natives\" " + "net.minecraft.client.Minecraft" + username + sessionID); 
```

# ajax - 将 MVC 表单助手绑定到引导模式

> ID：14914602
> 
> 赞同：1
> 
> 时间：2013-02-16T20:06:59.590
> 
> 标签：ajax, twitter-bootstrap, asp.net-mvc-4, modal-dialog

使用一系列 MVC 驱动的表单，我想利用`'@using (Html.BeginForm(...'`生成客户端表单的传统方法，这些表单将在基于 Bootstrap 的模式中呈现。[我发现了一种将模式绑定](https://gist.github.com/havvg/3226804)到 ajax 请求/响应方案的技术，其中表单是这样定义的：

```
 <form class="form-horizontal well" data-async data-target="#rating-modal" action="/some-endpoint" method="POST"> 
```

我了解如何插入类属性 ( `new { @class="example"}`)，但我还没有找到向我展示如何处理“数据异步”和“数据目标 = xxx”的示例。

想知道 Darin Dimitrov 对[这个问题](https://stackoverflow.com/questions/10970184/accessing-attributes-from-custom-html-helpers-in-asp-net-mvc-4-razor?rq=1)的回答是否是对我需要的部分回答。或者也许我需要更好地理解 EditorTemplates [，如这里所建议的那样](https://stackoverflow.com/questions/13699068/mvc-4-bootstrap-modal-edit-detail)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T01:42:51.783

就像你对班级所做的那样：

```
new { @class="example"} 
```

对于数据属性可以执行以下操作：

```
new { @class="example", data_target="#rating-modal"} 
```

`data_target``data-target`razor 解释 htmlAttributes 参数时的输出

# asp.net - 如何将 textbox.text 分配给选定的下拉列表值？

> ID：14914604
> 
> 赞同：2
> 
> 时间：2013-02-16T20:07:10.297
> 
> 标签：asp.net, vb.net

我有一个用户选择产品的页面。然后我希望用选定的 ddl 值填充文本框值，以允许他们在必要时更新该值。我的 ddl 被正确填充。

当我调试它时，文本框 uxProductFamilyUpvalue 似乎被分配了 ddlProductFamilies.SelectedValue 但是当我返回页面时，文本框为空。

有任何想法吗？泰

```
Imports ThomasOE.Globals
Imports ThomasOE.Utilities
Imports ThomasOE.Product
Imports System.Data
Imports System.Web.UI.WebControls

Public Class frmProducts
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load                
        If Not IsPostBack Then
            FillProductTypesDropdown()
            DisplayLoginDetails(Master, Session.Item(SSNLOGINNAME), Session.Item(SSNCURRENTDATETIME))
        End If

    End Sub

    Private Sub FillProductTypesDropdown()
        Dim objProduct As New Product

        Try

            objProduct.FillProductTypeDS()

            ddlProductTypes.Items.Clear()
            ddlProductTypes.Items.Add(String.Empty)

            For i As Integer = 0 To objProduct.ProductTypeDS.Tables(0).Rows.Count - 1
                ddlProductTypes.Items.Add(objProduct.ProductTypeDS.Tables(0).Rows(i).Item("product_type"))
            Next

            objProduct = Nothing

        Catch ex As Exception

        End Try

    End Sub

    Private Sub FillProductFamiliesDropdown()

        Dim objProduct As New Product

        Try

            objProduct.FillProductFamilyDS(ddlProductTypes.Text)

            ddlProductFamilies.Items.Clear()
            ddlProductFamilies.Items.Add(String.Empty)

            For i As Integer = 0 To objProduct.ProductFamilyDS.Tables(0).Rows.Count - 1
                ddlProductFamilies.Items.Add(objProduct.ProductFamilyDS.Tables(0).Rows(i).Item("product_family"))               
            Next

            objProduct = Nothing

        Catch ex As Exception

        End Try

    End Sub

    Protected Sub ddlProductTypes_SelectedIndexChanged1(sender As Object, e As EventArgs) Handles ddlProductTypes.SelectedIndexChanged
        FillProductFamiliesDropdown()

    End Sub

    Private Sub UpdateProductPage()        
        uxProductTypeUp.Text = ddlProductTypes.SelectedValue
        uxProductFamilyUp.Text = ddlProductFamilies.SelectedItem.Text

    End Sub

    Protected Sub ddlProductFamilies_SelectedIndexChanged(sender As Object, e As EventArgs) Handles ddlProductFamilies.SelectedIndexChanged
        'UpdateProductPage()            
        uxProductFamilyUp.Text = ddlProductFamilies.SelectedItem.Text

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-26T12:29:04.943

问题是由于您已经加载了页面。在 DDL 中更改值的方式中，您可以使用 jQuery 的 AJAX 调用。

在站点主标题中包含 jQuery

```
<script type="text/javascript" src="js/jquery-1.11.2.min.js"></script> 
```

在您拥有 DDL 的 aspx 页面上，添加类似

```
 //DropDownList1 on change AJAX
    $("#<%=DropdownList1.ClientID %>").change(function () {
        GetData();
    });

   function GetData() {
        $.ajax({
            type: "POST",
            //here you have to call vb.net function
            url: "Default.aspx/GetDataVB",
            data: '{ddl_val: "' + $("#<%=DropDownList1.ClientID%>")[0].value + '" }',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: GetData_OnSuccess,
            failure: function (response) {
                alert(response.d);
            }
    });
    }
    function GetData_OnSuccess(response) {
        $("#<%=TextBox1.ClientID%>").html(response.d);
    } 
```

进入vb代码

```
 <System.Web.Services.WebMethod()> _
 Public Shared Function GetDataVB(ByVal ddl_val As String) As String

     return ddl_val

 end function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-13T22:34:43.623

您可以在下拉列表中附加一个`OnItemSelected`事件，并在后面的代码中的事件定义中设置 TextBox 的文本

# ruby-on-rails - 当我在 dotcloud 上运行 rake 命令时出现“内存不足”

> ID：14914606
> 
> 赞同：0
> 
> 时间：2013-02-16T20:07:25.960
> 
> 标签：ruby-on-rails, dotcloud

我正在尝试在 dotcloud 上托管一个网站。在我的安装后文件中，我有这个：

```
cd /home/dotcloud/current && bundle exec rake db:migrate
cd /home/dotcloud/current && bundle exec rake db:seed 
```

当它运行命令时，我收到以下消息：

> ./postinstall: 第 1 行: 158 杀死 bundle exec rake db:migrate

每个 rake 命令的想法都是一样的。

我的应用程序是一个普通的实时应用程序，并保留了 64mb。当我看到内存使用情况时，我有这个：![在此处输入图像描述](../Images/b7b2efab987831d1e538a073a7fe21cb.png)

在底部，有一些点表示“内存不足”错误，但所有内存都没有使用。

它适用于沙盒。

那么，是否可以将 dotcloud 与 Rails 应用程序的基本计划一起使用？我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T09:55:21.707

我运行这个命令并且它有效！

> 点云规模 www:memory=128mb

它是否意味着 Rails 应用程序不适用于 64mb 内存？有没有办法做到这一点？

# c++ - c++ 传递函数作为数组索引不起作用。

> ID：14914607
> 
> 赞同：1
> 
> 时间：2013-02-16T20:07:31.750
> 
> 标签：c++, arrays, random, indexing

为什么以下两个代码给出不同的结果？第一个打印零，而第二个按预期打印随机计数。使用 gcc 4.6.3

```
 8 int foo(){
  9   return rand() % 2;
 10 }
 11 
 12 int main()
 13 {
 14   int ar[2] = {0};              
 15   for (int i = 0; i < 20; i++)  {
 16   //  int tmp  = foo();
 17   //  ar[tmp]++;
 18     ar[foo()];
 19   }
 20 
 21   for (int i = 0; i < 2; i++) 
 22     cout << i << " : " << ar[i] << endl;
 23 } 
```

~~
_

```
 8 int foo(){
 9   return rand() % 2;
 10 }
 11 
 12 int main()
 13 {
 14   int ar[2] = {0};              
 15   for (int i = 0; i < 20; i++)  {
 16     int tmp  = foo();
 17     ar[tmp]++;
 18     // ar[foo()];
 19   }
 20 
 21   for (int i = 0; i < 2; i++) 
 22     cout << i << " : " << ar[i] << endl;
 23 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T20:09:51.777

因为您实际上并没有增加数组中的值：

```
ar[foo()]++;
//        ^
// You forgot this 
```

这意味着所有元素都保持不变，并且您得到 0 作为输出。

# android - onSingleTapConfirmed

> ID：14914608
> 
> 赞同：1
> 
> 时间：2013-02-16T20:07:33.233
> 
> 标签：android, countdowntimer

问题是：“令牌“开始”上的语法错误，此令牌后应有标识符“-----在第一次启动时。（loadingAnimation.start（）;

```
 new CountDownTimer(30000, 1000) {

         public void onTick(long millisUntilFinished) {
            AnimationDrawable loadingAnimaton;
            loadingAnimation = (AnimationDrawable) ImageView.getBackground();

         }loadingAnimation.start();

         public void onFinish() {
             mTextField.setText("done!");
         }
      }.start();

    return true;
}}); 
```

# javascript - 如何在Javascript中将页面内容读入字符串？

> ID：14914611
> 
> 赞同：2
> 
> 时间：2013-02-16T20:08:03.340
> 
> 标签：javascript, ajax, string

我想在 AJAX 请求中检索链接的内容（例如[http://pastebin.ca/raw/2314500](http://pastebin.ca/raw/2314500)，它是一个二进制图像）。如何在 Javascript 中读取二进制字符串？以下代码不起作用：

```
function httpGet(theUrl)
{
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            return xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET", theUrl, false );
    xmlhttp.send();    
}

alert(httpGet("http://pastebin.ca/raw/2314500")) 
```

# python - 在 Python 中，找出两个有序列表之间的差异数

> ID：14914615
> 
> 赞同：10
> 
> 时间：2013-02-16T20:08:31.143
> 
> 标签：python, list

我想比较两个相同长度的列表

```
a = [1, 3, 5, 7, 9]
b = [1, 2, 5, 7, 3] 
```

并找出差异的数量`n`，在这种情况下它将是`n = 2`，如果长度不相等，也会返回错误。这样做的pythonic方式是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-16T20:10:31.357

最简单的方法是使用[内置`sum()`和](http://docs.python.org/3/library/functions.html#sum)生成[器表达式](http://www.youtube.com/watch?v=pShL9DCSIUw)：

```
def differences(a, b):
    if len(a) != len(b):
        raise ValueError("Lists of different length.")
    return sum(i != j for i, j in zip(a, b)) 
```

我们使用一起循环列表[`zip()`](http://docs.python.org/3/library/functions.html#zip)然后比较它们。作为`True == 1`和`False == 0`，我们只需将其相加即可得到差异的数量。另一种选择是使用生成器表达式的条件部分：

```
sum(1 for i, j in zip(a, b) if i != j) 
```

我真的不能说我觉得一个比另一个更具可读性，并且怀疑会有性能差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T20:27:00.070

如果长度不相等也会产生错误的单行解决方案：

```
>>> sum(map(lambda x,y: bool(x-y),a,b))
2 
```

现在尝试不同长度的输入：

```
>>> sum(map(lambda x,y: bool(x-y),[1,2],[1]))
TypeError 
```

工作原理：如果元素不同，则 bool(x,y) 返回 True。然后我们将这个函数映射到 2 个列表上并得到列表 [False, True, False, True, False]。
如果我们将不同长度的列表放入函数 map() 中，我们会得到 TypeError

最后，这个布尔列表的函数 sum() 给出 2。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-16T20:15:38.277

你可以使用[sets](http://docs.python.org/2/library/sets.html)。将两者都投射到一个集合中，然后找到两者之间的差异。例如：

```
>>> a = [1,3,5,7,9]
>>> b = [1,2,5,7,2]
>>> len(set(a) -  set(b))
2 
```

这可以包含在一个函数中，以首先检查长度差异。

# oracle - ORACLE：表是按索引组织的吗？

> ID：14914616
> 
> 赞同：0
> 
> 时间：2013-02-16T20:08:37.227
> 
> 标签：oracle

如果表是按索引组织的，有没有办法用 pl/sql 检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T20:17:04.467

您可以将下面的脚本与**USER_TABLES**或**ALL_TABELS**结合起来调查所有表

```
 SELECT 'IS_ORAGANIZED' FROM DUAL
 WHERE 
 UPPER(DBMS_METADATA.GET_DDL('TABLE', 'tableName')) LIKE  '%ORGANIZATION%'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T20:20:43.957

解决方案：

```
SELECT IOT_TYPE FROM ALL_TABLES 
```

# emacs - (current-buffer) 是否有可能不返回一些缓冲区？

> ID：14914618
> 
> 赞同：1
> 
> 时间：2013-02-16T20:08:50.420
> 
> 标签：emacs, elisp

我试着写一个简单的测试（kill-buffer-test.el）：

```
:; exec emacs -Q --script "$0" -- "$@"

(setq debug-on-error t)

(setq n 0)
(dolist (idx (buffer-list))
  (message "%d '%s' %s" n idx (buffer-list))
  (setq n (+ 1 n))
  (message "result: %s cb='%s'\n" (kill-buffer idx) (current-buffer))) 
```

并运行它：

```
$ ./kill-buffer-test.el
0 '*scratch*' (*scratch*  *Minibuf-0* *Messages*  *code-conversion-work*  *load*)
result: t cb='*Messages*'

1 ' *Minibuf-0*' ( *Minibuf-0* *Messages*  *code-conversion-work*  *load*)
result: nil cb='*Messages*'

2 '*Messages*' ( *Minibuf-0* *Messages*  *code-conversion-work*  *load*)
result: t cb='*scratch*'

3 ' *code-conversion-work*' ( *Minibuf-0*  *code-conversion-work*  *load* *scratch* *Messages*)
result: t cb='*scratch*'

4 ' *load*' ( *Minibuf-0*  *load* *scratch* *Messages*)
result: t cb='*scratch*'

Selecting deleted buffer
$ echo $?
255 
```

请注意，`*Minibuf-0*`缓冲区没有被杀死（为什么？），`*scratch*`被复活了，并且 emacs 退出并出现了一个奇怪的错误消息。

那么，我应该担心（当前缓冲区）可能会失败吗？如果我应该，如何测试？(current-buffer) 会引发错误还是只会返回 nil？

`M-x` `version`
GNU Emacs 24.3.50.1 (i686-pc-linux-gnu, X toolkit) o​​f 2013-02-08 on linux.9bf016

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T14:53:49.097

无需担心：`(current-buffer)`不会失败（Emacs 会崩溃并烧毁）。 `*scratch*`以及一些其他内部缓冲区会在需要时重新生成。

# bash - 如何打印 bash 脚本实际运行的内容？

> ID：14914627
> 
> 赞同：1
> 
> 时间：2013-02-16T20:09:38.863
> 
> 标签：bash

我正在尝试制作一个 bash 脚本，它将：

1.  将所有更改添加到 git
2.  提交我传递给 bash 脚本的消息
3.  将其推送到仓库

我正在尝试这样做：

```
m=\"$*\"
git add -A
echo git commit -m $m
git push 
```

`error: pathspec 'Q2,' did not match any file(s) known to git.`但是，对于我传递给脚本的所有单词，我都会收到错误消息。

我怎样才能看到它实际上在做什么？当我放在`echo`有问题的行（我认为是提交）前面时，我得到了一个正确格式的命令。如果我把它放到终端上，我会运行 find。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T20:13:31.193

要查看 bash 正在做什么，请将`-xv`选项添加到 shebang 行：

```
#!/bin/bash -xv 
```

问题可能是引用。`m=\"$*\"`不做你想做的事。`$m`如果它包含空格，它仍然会分成几个单词，只是第一个单词以双引号开头，最后一个单词以双引号结尾。

相反，将违规行更改为

```
git commit -m "$m" 
```

# php - PHP解码JSON POST

> ID：14914628
> 
> 赞同：11
> 
> 时间：2013-02-16T20:09:41.723
> 
> 标签：php, json

我正在尝试以`POST`JSON 的形式接收数据。我将其卷曲为：

```
curl -v --header 'content-type:application/json' -X POST --data '{"content":"test content","friends":[\"38383\",\"38282\",\"38389\"],"newFriends":0,"expires":"5-20-2013","region":"35-28"}' http://testserver.com/wg/create.php?action=post 
```

在 PHP 方面，我的代码是：

```
$data = json_decode(file_get_contents('php://input'));

    $content    = $data->{'content'};
    $friends    = $data->{'friends'};       // JSON array of FB IDs
    $newFriends = $data->{'newFriends'};
    $expires    = $data->{'expires'};
    $region     = $data->{'region'}; 
```

但即使我`print_r ( $data)`什么都没有归还给我。这是处理`POST`没有表格的正确方法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-16T20:47:20.227

您提交的 JSON 数据不是有效的 JSON。

当您在 shell 中使用 ' 时，它不会像您怀疑的那样处理 \" 。

```
curl -v --header 'content-type:application/json' -X POST --data '{"content":"test content","friends": ["38383","38282","38389"],"newFriends":0,"expires":"5-20-2013","region":"35-28"}' 
```

按预期工作。

```
<?php
$foo = file_get_contents("php://input");

var_dump(json_decode($foo, true));
?> 
```

输出：

```
array(5) {
  ["content"]=>
  string(12) "test content"
  ["friends"]=>
  array(3) {
    [0]=>
    string(5) "38383"
    [1]=>
    string(5) "38282"
    [2]=>
    string(5) "38389"
  }
  ["newFriends"]=>
  int(0)
  ["expires"]=>
  string(9) "5-20-2013"
  ["region"]=>
  string(5) "35-28"
} 
```

# javascript - 如何拒绝 WebRTC 呼叫

> ID：14914633
> 
> 赞同：3
> 
> 时间：2013-02-16T20:10:11.277
> 
> 标签：javascript, html, html5-video, webrtc, html5-audio

我使用 WebRTC 制作了一个简单的调用应用程序。我已经建立了连接，现在可以从一个浏览器调用另一个浏览器。

我仍然无法弄清楚并且在 WebRTC 标准中找不到的一件事是……我怎样才能拒绝电话报价。

如果我收到来电者的报价，我正在考虑关注

```
if(msg.type == 'offer') {
    if(confirm(msg.sender+" is calling you ...")) {
        $.calling.calleePeer.setRemoteDescription(new RTCSessionDescription(msg));
        $.calling.calleePeer.addStream($.calling.localstream);
        $.calling.calleePeer.createAnswer($.calling.setLocalCalleeAndSendDescription, null, $.calling.mediaConstraints);

    } else {
        // TODO What to do here in order to reject the offer?
    }
} 
```

现在，当我接受报价时一切正常，但我如何让来电者知道我现在对电话不感兴趣？我想标准中有一些解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:12:05.290

在 WebRTC 中，信令协议是您定义的任何协议，因此应用程序应该向对方发送一个命令，通知该提议被用户拒绝。

当您这样做时，您必须关闭双方的 PeerConnection 对象，浏览器将停止等待或尝试建立连接。

```
if(msg.type == 'offer') {
    if(confirm(msg.sender+" is calling you ...")) {
        $.calling.calleePeer.setRemoteDescription(new RTCSessionDescription(msg));
        $.calling.calleePeer.addStream($.calling.localstream);
        $.calling.calleePeer.createAnswer($.calling.setLocalCalleeAndSendDescription, null, $.calling.mediaConstraints);

    } else {
        $.calling.calleePeer.close();
        // Send a command to the other party (i.e. a response to the invitation) rejecting the offer.
    }
} 
```

启动该过程的客户端在收到拒绝时也应该这样做。

```
// I suppose you have something like this.
$.calling.callerPeer.close(); 
```

# windows - ffmpeg avformat_open_input 总是返回“找不到协议” rv=(-1330794744)

> ID：14914634
> 
> 赞同：8
> 
> 时间：2013-02-16T20:10:20.833
> 
> 标签：windows, visual-studio-2010, visual-c++, ffmpeg

试图让 ffmpeg 在 Visual Studio 2010 中工作。到目前为止，所有 ffmpeg 头文件和库都已加载，没有发生错误或警告。

```
avcodec_register_all();
AVFormatContext *pFormatCtx = NULL;
char errbuf[256];
pFormatCtx = avformat_alloc_context();
int rv = avformat_open_input(&pFormatCtx, "myfile.ext", NULL, NULL);
if (rv!=0){                              
    av_strerror(rv, errbuf, sizeof(errbuf));
} 
```

问题是，avformat_open_input 总是返回 -1330794744（errbuf="Protocol not found"）。在 32 位 XP 和 64 位 W7 上尝试了 x86 和 x64 标头和库。无论我为“myfile.ext”添加什么（尝试过“file1.avi”、“file=c:\file1.avi”、“ [http://www.someweb.com/file1.avi](http://www.someweb.com/file1.avi) ”，甚至是空的 char* ） ") 响应总是“找不到协议”。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-04T19:34:42.757

我遇到了同样的问题。正确的初始化是

```
av_register_all(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-05T17:18:23.777

我希望他能帮助别人。由于我的代码在 Android 和 Linux 上运行但在 macOS 上运行时遇到了同样的问题，并且`av_register_all`现在已弃用（对于[FFMpeg 版本 > 4.0](https://github.com/leandromoreira/ffmpeg-libav-tutorial/issues/29)），*discomurray*的答案并没有为我解决问题。

它在我的情况下不起作用的原因是我已经在我的系统上安装了**libavformat**`/usr/local/lib/`，不幸的是它没有为我的情况正确配置（或者与我自己编译的版本不匹配）。

`DYLD_LIBRARY_PATH`我所做的是，在执行命令之前，我将构建路径添加到（macOS）：

```
export DYLD_LIBRARY_PATH=$DYLD_LIBRARY_PATH:/Users/xxx/projects/FFmpeg/libavformat 
```

在 linux 上，你可以做同样的事情`LD_LIBRARY_PATH`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-07T10:50:12.233

```
try to change file path 
"/home/user/video.mp4" -> "file:/home/usr/video.mp4" 
```

除非协议检查此链接[ffmpeg-protocols#file](https://www.ffmpeg.org/ffmpeg-protocols.html#file)，否则您是否应该转义 ':' 字符

# algorithm - 将值均匀分布到所有进程的算法

> ID：14914637
> 
> 赞同：0
> 
> 时间：2013-02-16T20:10:41.460
> 
> 标签：algorithm, language-agnostic, distributed

我必须编写一个分布式系统，其中四个进程在四个不同的节点上运行。分布式系统应该以以下方式工作：随机数生成器在每个进程中生成一个随机数。目标是通过进程之间的消息传递来平衡所有进程中的这些值。这样，进程 A 是服务器，它从所有进程中获取数字，然后命令它们将其数字的一部分发送到一个或多个其他进程，以使进程持有的所有数字均等化。例如，A 的计数是 30，B 的计数是 65，C 的计数是 35，D 的计数是 70。A 计算 30+65+35+70 = 200 除以 4 = 50。现在进程 A（服务器）知道谁拥有更少高于平均水平，谁拥有超过平均水平。现在的问题是 A 如何决定谁发送什么号码给谁？以平衡所有进程的值。请注意，A 不能直接指示进程递减或递增其计数，例如它不能向 B 发送消息并告诉它递减 15，然后再向 C 发送另一条消息并告诉它递增 15。A必须向 B 发送一条消息，告诉 B 减少 15，然后向 C 发送一条消息并告诉它增加 15，或者换句话说，它告诉 B 将您的计数的 15 发送给 C。提前致谢。扎基。A 必须向 B 发送一条消息，告诉 B 减少 15，然后向 C 发送一条消息并告诉它增加 15，或者换句话说，它告诉 B 将您的计数的 15 发送给 C。提前致谢。扎基。A 必须向 B 发送一条消息，告诉 B 减少 15，然后向 C 发送一条消息并告诉它增加 15，或者换句话说，它告诉 B 将您的计数的 15 发送给 C。提前致谢。扎基。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T08:09:37.487

据我所知，没有特定的*配方*或只有很好的定义模式来实现这种分布式系统（如果有材料提供论点指导，请参阅问题末尾的链接）。这里涉及各种选择，这些选择将塑造最终系统、它的可扩展性、如何响应、如何稳固等等。

您将问题标记为与语言无关。我相信好的概念比技术更重要，但最终必须做出选择，这样的系统太复杂，无法用你不熟悉的语言构建。

我会用 C# 构建它，因为它是我的主要开发语言，继续使用面向[敏捷开发](http://en.wikipedia.org/wiki/Agile_software_development)的技术。

1.  首先，我将尝试勾勒出**宏观架构设计**，突出参与者及其责任（但不涉及太多细节）。
2.  然后我将尝试编写第一个涉及两个节点的**简单原型。**
3.  当原型工作时，我会尝试找到**弱点**并让它与四个节点一起工作。
4.  如果有问题，请迭代最后一点，直到**满足要求**。

更详细地说，您甚至可以使用*原始套接字*来构建它；但为了简单起见，我建议您在[HTTP 协议](http://en.wikipedia.org/wiki/Http)上找到您的系统（例如，使用 .NET BCL [HttpListener](http://msdn.microsoft.com/en-us/library/system.net.httplistener%28v=vs.80%29.aspx)和[HttpClient](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)组件作为基础）进行通信：

1.  一组预定义的`GET`消息可以在对等服务器之间执行同步。
2.  `POST`message 可用于交换关于随机数的数据。

关于数字的生成，它打开了一个全新的世界。我会依赖像[ANU Quantum Random Server](http://qrng.anu.edu.au/index.php)这样的外部服务（如果你可以计算一个活跃的 Internet 连接）。我知道你说你有一个算法要实现，我提供了这个作为替代方案（我不知道这部分是否可以改变）。

至少，如果您将使用 .NET 框架，我建议您阅读[这篇](http://blogs.msdn.com/b/p2p/archive/2007/03/12/writing-peer-to-peer-applications-using-net-part-1-pnrp.aspx)[文章](http://fupeg.blogspot.it/2007/11/network-application-pattern.html)以及关于*点对点的这篇文章。*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:38:10.983

您描述的问题称为*分布式聚合*。有许多解决方案适用于网络上的不同假设（连接了哪些节点？消息会丢失吗？）、计算函数（平均值？求和？）等等。[可以在http://arxiv.org/abs/1110.0725](http://arxiv.org/abs/1110.0725)上找到一个很好的概述，并参考您可以使用的算法。*

# uipangesturerecognizer - 平移视图不停留在我使用 UIPanGestureRecognizer 平移它的位置

> ID：14914638
> 
> 赞同：1
> 
> 时间：2013-02-16T20:10:46.013
> 
> 标签：uipangesturerecognizer

我正在尝试使用 UIPanGestureRecognizer 在屏幕上移动对象。我的平移代码似乎工作正常。我可以轻松地移动我的对象。但是当我放开物体时，它会弹回原来的位置；它不会停留在我平移它的位置。

pan-able 对象是一个简单的 UIView，它在我的主 self.view 字段中移动。例如，我使用 XCode 中的对象腭添加了 UIPanGesture，而不是在 viewDidLoad 中的代码中手动添加。

在状态 = 开始时，我应用了一个变换来稍微提高比例。（这似乎也不起作用，但那是另一回事）。

谁能告诉我哪里出错了？

```
- (IBAction)bucketTouch:(UIPanGestureRecognizer *)recognizer {
switch ([recognizer state]) {
    case UIGestureRecognizerStateBegan:{
        [UIView animateWithDuration:.2 animations:^{
            self.pail.transform = CGAffineTransformMakeScale(1.25, 1.25);
        }];
    }
        break;

    case UIGestureRecognizerStateChanged:{
        CGPoint centerPoint = self.pail.center;
        CGPoint newPoint = [recognizer translationInView:self.view];
        CGPoint finalPoint = CGPointMake(centerPoint.x + newPoint.x, centerPoint.y + newPoint.y);
        self.pail.center = finalPoint;
        [recognizer setTranslation:CGPointZero inView:self.view];
    }
        break;

    case UIGestureRecognizerStateEnded:{
        [self.view sendSubviewToBack:self.pail]; 
        [UIView animateWithDuration:.2 animations:^{
            self.pail.transform = CGAffineTransformIdentity;
        }];
    }
        break;

    default:
        break;
} 
```

}

提前致谢。:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:58:18.793

我发现视图确实在正确移动，但是 CGAffineTransformIdentity 在识别器.state = 结束时将其放回其原始帧位置。

# java - 主授权之外的 java.policy 设置不适用于 Apache POI jar

> ID：14914641
> 
> 赞同：0
> 
> 时间：2013-02-16T20:10:58.987
> 
> 标签：java, jar, apache-poi, xpages, lotus-domino

我已经在 Domino 服务器上的 jvm/lib/ext 文件夹中放置了一些 jar，以便在我的数据库中的某些类中使用。一切正常，除了安全。

如果我放置“permission java.security.AllPermission;” （没有引号）在我对 java.policy 的主要授权中，一切正常，但是如果我尝试将其缩小为仅针对具有类的数据库和 ext 文件夹中的 jar 的单独授权，我会收到各种安全例外。例如，我收到一个反射异常，因为其中一个 jar 正在执行反射。

以下是我尝试在文件中一起使用的两个单独的授权：

```
grant codeBase "file:/C:/path_to_domino_server_program_directory/jvm/lib/ext/-" {
     permission java.security.AllPermission;
}
grant codeBase "xspnsf://server:0/path_to_database/database.nsf/-" { 
     permission java.security.AllPermission;
}; 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T09:11:16.863

您不应该触摸 /lib/ext 的权限，因为它们已经在默认策略文件中：

```
 // Standard extensions get all permissions by default
 grant codeBase "file:${java.home}/lib/ext/*" {
       permission java.security.AllPermission;
 }; 
```

所以图书馆已经拥有所有权利。但正如 Thimo 指出的那样：类加载器可能会妨碍您。您可能需要查看源头并检查麻烦制造者。主要候选人是反射使用。

对于 Apache [POI](http://poi.apache.org/)，需要相当长的一段时间。Christian 刚刚在他的博客中概述[了解决方案](http://guedebyte.wordpress.com/2013/02/21/the-odyssey-of-loading-a-class-in-a-eclipse-plugin-or-how-we-integrated-docx4j-in-poi4xpages/)（总是值得一读）。

我会将额外的库打包到我自己的[扩展库](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/creating_an_xpages_library)中，因此可以使用 updatesite.nsf（投资[书籍](http://www.amazon.com/s/ref=nb_sb_noss?url=search-alias%3Dstripbooks&field-keywords=XPages)）来部署它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:08:58.590

我将其用于 POI：

```
grant { 
  permission java.lang.RuntimePermission "getClassLoader"; 
} 
```

根据您所做的事情，您可能还需要其他一些权限，但我认为授予所有权限并不是一个好主意。当然，如果您可以将权限限制为仅一个 NSF 就更好了，但这似乎很麻烦。我不确定您应该为*服务器*使用什么，但如果我理解[正确](http://www.wissel.net/blog/d6plinks/SHWL-8JYAT5)，它应该是“服务器”，而不是您的服务器名称：

> 你只需要改变你的database.nsf，其他部分是静态的，目录分隔符是/不管平台，位置是相对于数据目录的，整个codeBase值必须是小写的（不管你的文件名）。

您也可以尝试从 jvm/ext 中删除 JAR 并将它们存储到 NSF WEB-INF 以确保它们使用 NSF 权限。

请注意，更改 java.policy 文件（您可能已经知道）后需要重新启动 HTTP。

# php - 查找字符串中某个字母的所有出现点

> ID：14914642
> 
> 赞同：0
> 
> 时间：2013-02-16T20:11:12.813
> 
> 标签：php, arrays, string, search

我有以下代码：

```
<?php
    $word = "aeagle";
    $letter = "e";

    $array = strposall($aegle, $letter);

    print_r($array);

    function strposall($haystack, $needle) {
        $occurrence_points = array();

        $pos = strpos($haystack, $needle);
        if ($pos !== false) {
            array_push($occurrence_points, $pos);
        }

        while ($pos = strpos($haystack, $needle, $pos + 1)) {
            array_push($occurrence_points, $pos);
        }

        return $occurrence_points;
    }
?> 
```

就像在示例中一样，如果我有`aegle`我的话并且我正在其中进行搜索，则该函数应该返回一个包含值和`e`其中的数组。`1``4`

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T20:17:41.653

为什么不尝试

```
$word = "aeagle";
$letter = "e";
$occurrence_points = array_keys(array_intersect(str_split($word), array($letter)));

var_dump($occurrence_points); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T20:59:19.630

比其他答案更文字一点：

```
function charpos($str, $char) {
    $i = 0;
    $pos = 0;
    $matches = array();

    if (strpos($str, $char) === false) {
        return false;
    }

    while (!!$str) {
        $pos = strpos($str, $char);

        if ($pos === false) {
            $str = '';
        } else {
            $i = $i + $pos;
            $str = substr($str, $pos + 1);
            array_push($matches, $i++);
        }
    }

    return $matches;
} 
```

[https://ignite.io/code/511ff26eec221e0741000000](https://ignite.io/code/511ff26eec221e0741000000)

使用：

```
$str = 'abc is the place to be heard';
$positions = charpos($str, 'a');

print_r($positions);

while ($positions) {
    $i = array_shift($positions);
    echo "$i: $str[$i]\n";
} 
```

这使：

```
Array (
    [0] => 0
    [1] => 13
    [2] => 25
)
0: a
13: a
25: a 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T20:28:41.537

其他人指出您传递了错误的参数。但你也在重新发明轮子。看一下[php 的正则表达式 match-all](http://www.php.net/manual/en/function.preg-match-all.php)（哎呀，链接了错误的函数），当与以下标志一起使用时，它已经返回了一个包含所有带有偏移量的匹配项的数组。

> ***旗帜***
> 
> ***flags***可以是以下标志：
> 
> **PREG_OFFSET_CAPTURE**
> 
> 如果这个标志被传递，对于每一个出现的匹配，附加的字符串偏移量也将被返回。请注意，这会将匹配项的值更改为一个数组，其中每个元素都是一个数组，该数组由偏移量 0 处的匹配字符串及其在偏移量 1 处的字符串偏移量组成。

对搜索词使用单个字母模式，`$letter = '/e/'`您应该返回一个数组，其中所有位置作为每个结果数组的第二个元素，然后您可以将其调整为您正在寻找的输出格式。

**更新：** Jared 指出你确实得到了模式的捕获，但是设置了标志，你也得到了偏移量。作为对 OP 问题的直接回答，请尝试以下代码：

```
$word = "aeagle";
$pattern = "/e/";
$matches = array();

preg_match_all($pattern, $word, $matches, PREG_OFFSET_CAPTURE);

print_r($matches); 
```

它具有以下输出：

```
Array
(
  // Matches of the first pattern: /e/
  [0] => Array
  (
    // First match
    [0] => Array
    (
      // Substring of $word that matched
      [0] => e
      // Offset into $word where previous substring starts
      [1] => 1
    )

    [1] => Array
    (
      [0] => e
      [1] => 5
    )
  )
) 
```

结果是 3D 而不是 2D，因为 preg_match_all 可以一次匹配多个模式。命中是针对第一个（在这种情况下：仅）提供的模式，因此在第一个数组中。

`e`并且与 OP 最初所说的不同，1 和 5 是字符串中字母的正确索引`'aeagle'`

```
 aeagle
    012345
     ^   ^
     1   5 
```

性能方面，自定义版本的 strposall 可能比正则表达式匹配更快。但是学习使用内置函数几乎总是比开发、测试、支持和维护自己的代码更快。十分之九，这是编程中最昂贵的部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-16T20:16:56.763

我认为你传递了错误的参数，应该是 $word 而不是 $aegle

# google-chrome-extension - chrome扩展弹出窗口中的焦点顺序

> ID：14914648
> 
> 赞同：0
> 
> 时间：2013-02-16T20:11:51.220
> 
> 标签：google-chrome-extension, focus

今天我做了我的第一个 Chrome 扩展，它运行良好。

这个扩展非常简单，它允许用户创建法语和荷兰语词汇表。

当弹出窗口打开时，第一个字段具有焦点，因为我为此使用了 .focus() 。没关系。但是当我按下`TAB`键时，焦点消失了。我不知道它去哪儿了。如果我点击第一个字段，然后我可以飞到第二个字段，然后到提交按钮。我不想点击该字段。我的目标是仅将此扩展程序与键盘一起使用。

我尝试用“tabindex”解决这个问题，但没有奏效。

这是我的代码（简化）**`popup.html`**

```
<div>
<form action="#">
    <div><h1>Vocabulaire / Woordenschat</h1></div>
    <div><label for="fr">FR:</label><input type="text"   id="fr"></div>
    <div><label for="nl">NL:</label><input type="text"  id="nl"></div>
    <div><input type="submit" id="enregistrer" value="Sturen"></div>
</form> 
```

我使用 Chrome 版本 24.0.1312.57 m

任何想法 ？

# javascript - OSX 上 Safari 6 中的 CSS3 闪烁（但这不是闪烁到白色的问题！）

> ID：14914650
> 
> 赞同：9
> 
> 时间：2013-02-16T20:12:09.333
> 
> 标签：javascript, css, safari, css-transitions

此问题在 iOS 或 Chrome 上不存在，因此它不是与 Webkit 相关的问题。它似乎特定于 OS X 10.8.2 上的最新 Safari 6.0.2（并且未由 Safari 6.0.3 附带的 10.8.3 预览版本 12D65 修复）。我将很快在 Safari 6.0.2 上测试 Lion 10.7.5，并且还将在预览版本 12D68 上进行测试。

[http://jsfiddle.net/zrr2b/](http://jsfiddle.net/zrr2b/)

这是一个使问题非常明显的小提琴。如果您有一台运行 ML 的 Mac，您应该会看到 Chrome 和 Safari 之间的显着差异，当您移动鼠标时Safari 会闪烁*很多。*

基本上问题是 Safari 会间歇性地绘制从 JS 为单帧设置的目标变换，然后继续过渡动画。这会导致闪烁，但前提是过渡正在从某个地方开始。因此，对于大多数（非密集使用）CSS3 过渡，该错误不会抬起丑陋的头，但是如果功能或视觉效果依赖于它来平滑地插入到目标（就像我当前的项目一样），这种闪烁是不愉快的。

我查看了与闪烁相关的类似主题，并应用了几乎所有样式组合来抵消闪烁，例如`-webkit-backface-visibility: hidden`强制各种父元素获得硬件加速，`-webkit-transform-style: preserve-3d`不幸 `-webkit-perspective: 1000`的是，它们都没有做任何事情来解决这个特定于 Safari 的问题闪烁，即不闪烁到白色或空白，而是闪烁*到单帧的目标变换*。

在这个分支中，您可以看到我设置了一堆有助于“定期闪烁”但对我没有影响的样式。[http://jsfiddle.net/zrr2b/1/](http://jsfiddle.net/zrr2b/1/)

由于这不是特定于 webkit 的问题，我不确定在哪里发布错误报告。在 10.8.3 版本之前获得它会特别好，因为我认为这是一个相当大的问题。请记住，这是我们依靠 HTML5 做好的事情，以便它真正杀死 Flash。

更新：

*   **Mountain Lion 10.8.3 12D68 (Retina Macbook Pro 15.4") 上的 Safari 版本 6.0.3 (8536.28.10) 仍然存在此问题**
*   Windows (5.1.7) 上的 Safari 不受此错误的影响
*   Lion 10.7.5（Macbook Air 2011 年中）上的 Safari 版本 6.0.2 (7536.26.17) 不受此错误的影响

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T19:29:11.593

有几种不同的方法可以尝试减少闪烁。然而，最大的问题是它们似乎是“命中注定”。所以你必须尝试一些，看看哪一个有助于解决问题。

但它们围绕着同样的几件事：

```
-webkit-transform: translateZ(0);  /* triggers GPU, sometimes fixes the issue */
transform: translateZ(0);  /* non-webkit specific */ 
```

如果这不能解决问题，请尝试：

```
-webkit-backface-visibility: hidden;
backface-visibility: hidden;
-webkit-perspective: 1000;
perspective: 1000; 
```

如果这也失败了，试试这个：

```
-webkit-transform: translate3d(0, 0, 0);
transform: translate3d(0, 0, 0); 
```

您可以通过 W3C 了解它们中的每一个。但是它们都在不同的情况下为我工作，没有流畅的动画，还有闪烁的动画，包括一些非常奇怪的动画，比你的小提琴更跳跃。

他们会进入被动画化的 div。

# python - 如何在 z3 的 Python API 中实现位向量数组

> ID：14914653
> 
> 赞同：5
> 
> 时间：2013-02-16T20:12:21.077
> 
> 标签：python, arrays, z3, bitvector

我是 z3py 的新手，并且正在[使用 Python 中的 Z3 API](http://rise4fun.com/Z3Py/tutorial/guide)，但无法弄清楚如何定义位向量数组。

我想要类似的东西：

```
DOT__mem[16] = BitVec('DOT__mem[16]', 8) 
```

但是这种语法不起作用，即使在教程中的练习面板上也是如此。

有人可以帮助使用正确的语法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T20:40:46.463

以下示例说明了如何创建 Z3 位向量的“向量”（Python 列表）。该示例也可以在[rise4fun](http://rise4fun.com/Z3Py/RHH7)在线获得。

```
# Create a Bitvector of size 8
a = BitVec('a', 8)

# Create a "vector" (list) with 16 Bit-vectors of size 8
DomVect = [ BitVec('DomVect_%s' % i, 8) for i in range(16) ]
print DomVect
print DomVect[15]

def BitVecVector(prefix, sz, N):
  """Create a vector with N Bit-Vectors of size sz"""
  return [ BitVec('%s__%s' % (prefix, i), sz) for i in range(N) ]

# The function BitVecVector is similar to the functions IntVector and RealVector in Z3Py.

# Create a vector with 32 Bit-vectors of size 8\. 
print BitVecVector("A", 8, 32) 
```

# javascript - 如何在 .hide() 之后重新编号剩余的表行

> ID：14914654
> 
> 赞同：1
> 
> 时间：2013-02-16T20:12:21.893
> 
> 标签：javascript, jquery, html-table

Javascript 递增静态表的这些动态生成的行中的每个可见数字。

jQuery 在单击时会尽职尽责地隐藏每一行，但当然，数字不会改变。当访问者完成删除不需要的行时，如何使用 jQuery 重新编号行？我希望用户单击“重新编号”以正确重新编号剩余的行。我没有工作:-)

非常感谢您的帮助。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
 <script language="javascript" type="text/javascript">
 var keepTrack = 1;      
 </script>
 <table>
 <tr><td colspan="2" id="renumber">renumber</td></tr>

 <tr id="sWH1">
 <td>
 <script>
 document.write(keepTrack);keepTrack++;
 </script></td>
 <td>someWordsHere</td></tr>

<script>
$(document).ready(function() { 
$("#sWH1").click(function() {
$("#sWH1").hide(100);}); 
 });</script>

 <tr id="sWH2">
 <td>
 <script>
 document.write(keepTrack);keepTrack++;
 </script></td>
 <td>someWordsHere</td></tr>

 <script>
 $(document).ready(function() { 
 $("#sWH2").click(function() {
 $("#sWH2").hide(100);}); 
  });</script>

 <tr id="sWH3">
 <td>
 <script>
 document.write(keepTrack);keepTrack++;
 </script></td>
 <td>someWordsHere</td></tr>

 <script>
 $(document).ready(function() { 
 $("#sWH3").click(function() {
 $("#sWH3").hide(100);}); 
  });</script>

 </table>

 <script language="JavaScript" type="text/JavaScript">
 $(document).ready(function() {
 $("#renumber").click(function() {
 'magically renumber the remaining table rows'
 });
  });
 </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T20:25:24.517

**直截了当的答案**

要对行重新编号，您可以使用`each()`允许您迭代一组元素（在本例中为行）并提供`i`枚举器参数的方法。

一个普遍的例子：

```
$(some-tr-selector).each(function(i) {
    $(this).children(some-td-selector).text(i+1);
}); 
```

现在要做到这一点，您需要定义更好的选择器。您当前代码的问题是您的选择器过于具体。这可以防止您创建通用事件处理程序，而不是为每一行创建一个单击处理程序。

**如何改进你的代码**

考虑为相关编号的行设置一个类。这将允许您为所有行创建单击处理程序，并使重新编号时更容易选择相关行。

例如：

**HTML**

```
<table>
    <tr><td colspan="2" id="renumber">renumber</td></tr>
    <tr class="numbered_row">
        <td class="row_number"></td>
        <td>someWordsHere</td>
    </tr>
    <tr class="numbered_row">
        <td class="row_number"></td>
        <td>someWordsHere</td>
    </tr>
    <tr class="numbered_row">
        <td class="row_number"></td>
        <td>someWordsHere</td>
    </tr>
    ...
</table> 
```

**Javascript**

```
$(document).ready(function() {
     // Number all rows onload
    $('table tr.numbered_row').each(function(i) {
        $(this).children('.row_number').text(i+1);
    });

     // Row click handler
    $('table tr.numbered_row').on('click', function() {
        $(this).hide(100);
    });

     // Renumber click handler
    $('#renumber').on('click', function() {
        $('table tr.numbered_row:visible').each(function(i) { // Iterate over all _visible_ rows
            $(this).children('.row_number').text(i+1);
        });
    });
}); 
```

请注意，通过添加两个类`numbered_row`，`row_number`我们能够在一个代码块中高效地完成所有工作：行的初始编号、隐藏它们的单击处理程序以及重新编号操作。

**更通用的方法**

`each()`如果您愿意，您可以通过链接and`on()`方法以及在`on()`每次隐藏行时处理重新编号来使这更加通用和高效。

例如：

```
$(document).ready(function() {
     // Number all rows onload
    $('table tr.numbered_row').each(function(i) {
        $(this).children('.row_number').text(i+1);
     // Row click handler
    }).on('click', function() {
         // Hide current row
        $(this).hide(100);
         // Renumber visible rows
        $('table tr.numbered_row:visible').each(function(i) { // Iterate over all _visible_ rows
            $(this).children('.row_number').text(i+1);
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T23:07:01.010

这是另一个解决方案：

[http://jsbin.com/ufahac/1/edit](http://jsbin.com/ufahac/1/edit)

这是您的代码，更改很少：该表有一个 id=myTable 并且***“神奇地重新编号剩余的表行”***已替换为

```
$('#myTable tr[id]:visible').each(function(i){
   $(this).find('td:first').text(i+1);
}) 
```

# java - JDOM 2.0 中的 XPath 2.0 功能

> ID：14914655
> 
> 赞同：1
> 
> 时间：2013-02-16T20:12:21.627
> 
> 标签：java, xpath-2.0, jdom-2

如何在 JDOM 2.0 中使用 XPath 2.0 功能，如“模式元素”？

这甚至可能吗？如果是这样，怎么做？

有没有其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T01:18:29.363

目前没有链接到 JDOM 的 XPath 2.0 引擎。据我所知，没有任何 XPath 2.0 支持链接到任何非基于 XSLT 的 XML 处理库（JDOM/XOM/DOM/等）。我曾与 Saxon 合作集成 XPath 2.0，并且即将发布的 JDOM 2.1 版很可能通过利用 Saxon 库来支持 XPath 2.0。

罗尔夫

# ruby-on-rails - rails 将列添加到用户模型

> ID：14914659
> 
> 赞同：14
> 
> 时间：2013-02-16T20:12:40.677
> 
> 标签：ruby-on-rails, migration

我有用户模型，我想为所有用户记录添加唯一的字符串键。列名应该是 unsubscribe_key。

**迁移**用户记录前：

```
id = 1
username = "text"

id = 2
username = "abc" 
```

**迁移**用户记录后：

```
id = 1
username = "text"
unsubscribe_key = "5HQdTSsNRY6YCodmzr"

id = 2
username = "abc"
unsubscribe_key = "Jlewfw0324Lwp0sefr" 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-16T20:48:36.553

好吧，最简单的部分是添加新列。在外壳上：

```
rails generate migration AddUnsubscribeKeyToUsers unsubscribe_key:string
rake db:migrate 
```

此外，您还需要在您的用户模型中使这个新属性可访问：

## 应用程序/模型/user.rb

```
attr_accessible :unsubscribe_key #along with all your other accessible attributes 
```

接下来，您需要添加唯一键。您可以为此编写一些 SQL 代码，或者创建一个可以在 rails 控制台中运行的 ruby​​ 脚本。

## lib/add_unique_keys.rb

```
module AddUniqueKeys
  KeyGenCharacters = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"
  extend self
  def addUnsubscribeKeysToAllUsers
     users = User.all
     users.each do |u|
        u.update_attributes(:unsubscribe_key => generateKey(18))
     end
  end

  def generateKey(keyLength)
     key = ""
     keyLength.times do 
       key += generateKeyCharacter
     end
     key
  end

  def generateKeyCharacter
     KeyGenCharacters[rand(KeyGenCharacters.length)-1]
  end
end 
```

现在回到 shell 并输入`rails console`. 在红宝石命令行上：

```
>>require "add_unique_keys.rb"
=> true
>>AddUniqueKeys.addUnsubscribeKeysToAllUsers
=> #Should print out array of users 
```

如果一切顺利，你的新列应该用随机字符串填充。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-16T20:21:36.827

尝试

```
 $ rails g migration AddUnsubscribe_keyToUsers unsubscribe_key:string 
```

然后

```
 $ rake db:migrate 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-16T20:38:51.043

这是解决方案。

```
class AddUnsubscribeTokenToUsers < ActiveRecord::Migration
  def self.up
    add_column :users, :unsubscribe_key, :string, :unique => true
        User.all.each do |user|
            user.unsubscribe_token = ActiveSupport::SecureRandom.hex(18)
        end
  end
  def self.down
    remove_column :users, :unsubscribe_key
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-29T11:31:14.277

在 Rails 4.0 中使用简单的方法添加单列或多列.. [https://gist.github.com/pyk/8569812](https://gist.github.com/pyk/8569812)

# android - 当我从我的活动中调用 getSystemService() 时，正在运行什么代码？

> ID：14914665
> 
> 赞同：1
> 
> 时间：2013-02-16T20:13:27.273
> 
> 标签：android, android-source

我正在尝试从[grepcode 站点](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/content/Context.java?av=f)跟踪 AOSP 代码。

当我打电话时`getSystemService(Context.WIFI_P2P_SERVICE)`，它会得到以下代码：

```
 @Override public Object getSystemService(String name) {
    if (getBaseContext() == null) {
        throw new IllegalStateException(
                "System services not available to Activities before onCreate()");
    }
    if (WINDOW_SERVICE.equals(name)) {
        return mWindowManager;
    } else if (SEARCH_SERVICE.equals(name)) {
        ensureSearchManager();
        return mSearchManager;
    }
    return super.getSystemService(name);
} 
```

并且由于`WIFI_P2P_SERVICE`声明为`public static final String WIFI_P2P_SERVICE = "wifip2p";`， if 将不属于其中一个条件，并将转到`super.getSystemService(name);`

```
Activity extends ContextThemeWrapper, the code there is:
 @Override public Object getSystemService(String name) {
        if (LAYOUT_INFLATER_SERVICE.equals(name)) {
            if (mInflater == null) {
                mInflater = LayoutInflater.from(mBase).cloneInContext(this);
            }
            return mInflater;
        }
        return mBase.getSystemService(name);
    } 
```

在这里，所需的服务名称也将不匹配，`mBase`是一个实例，`Context`因此 Context 中的代码是：

```
public abstract Object getSystemService(String name); 
```

这意味着从它扩展的类必须处理该功能。 **那么，我的请求在哪里得到处理？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T20:20:01.527

据我所知 Context 的实现代码在 android.app 包下，类名为 ContextImpl

这是该类的 getSystemService -

```
@Override
public Object getSystemService(String name) {
    ServiceFetcher fetcher = SYSTEM_SERVICE_MAP.get(name);
    return fetcher == null ? null : fetcher.getService(this);
} 
```

编辑 - WIFI_P2P_SERVICE 的入口点 -

```
registerService(WIFI_P2P_SERVICE, new ServiceFetcher() {
    public Object createService(ContextImpl ctx) {
          IBinder b = ServiceManager.getService(WIFI_P2P_SERVICE);
          IWifiP2pManager service = IWifiP2pManager.Stub.asInterface(b);
          return new WifiP2pManager(service);
        }}); 
```

# java - 检查字符串是否具有按字母顺序排列的某些字符

> ID：14914670
> 
> 赞同：-1
> 
> 时间：2013-02-16T20:13:42.783
> 
> 标签：java, string, alphabetical-sort

我必须检查一个单词/短语，并说出其中的元音是按字母顺序排列还是按字母顺序倒序排列。我很接近得到它。它只是比较数组中的数字的最后一点，看看它们是否按降序排列等。我知道我必须做一个嵌套的 for 循环，但我不确定该怎么做。谢谢您的帮助。

```
public static void main(String [] args)
{

    String result = "", result2="";                                 
    String userInput = "aeiou";
    int [] array = new int[userInput.length()];

    for(int i = 0; i < string.length(); ++i) 
    {

        char c = replace.charAt( i );
        int j = (int) c;
        array[i] = j;

        //printing unicode symbols (only for testing)
        result2 += array[i] +",";
        System.out.println(j);
    }

    boolean sequence = false;
    for(int i = 0; i <array.length-1 && !sequence; i++)
    {
        for(int x =i+1; x<array.length; x++)
        {
            //Here I am checking to see whether or not they are in alphabetical order
            if(array[i] < array[x])
            sequence = true;
            if(sequence == true)
                result = "The vowels are  in  alphabetical order";
            else
                result = "The vowels are not in alphabetical order";
        }
    }

    System.out.println(result);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:31:41.213

由于您使用的是`replaceAll()`，我假设您也可以使用`matches()`(`replace`是替换除元音以外的所有内容后包含字符串的变量)：

```
boolean isAscending = replace.matches("a*e*i*o*u*");
boolean isDescending = replace.matches("u*o*i*e*a*"); 
```

好吧，这里有一些特殊情况似乎没有在您的代码中考虑：

*   `replace`变量中的字符串为空（无元音）
*   仅包含一个重复的元音（例如`pool`--> `oo`）

在上述两种情况下，`isAscending`都`isDescending`将是`true`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T02:05:00.050

尝试

```
 String input = "abc";
    char[] a = input.toCharArray();
    Arrays.sort(a);
    StringBuilder sb = new StringBuilder();
    sb.append(a);
    if (input.equals(sb.toString())) {
        System.out.println("ascending");
    } else if (input.equals(sb.reverse().toString())) {
        System.out.println("descending");
    } else {
        System.out.println("unsorted");
    } 
```

# wordpress - wordpress 国际化解决方案

> ID：14914672
> 
> 赞同：2
> 
> 时间：2013-02-16T20:13:47.423
> 
> 标签：wordpress, internationalization

我有一个客户要求在他的 wordpress 网站上启用多种语言选择。我试过[http://www.qianqin.de/qtranslate/](http://www.qianqin.de/qtranslate/)很好，但问题是主题字符串没有翻译。而且这个插件没有翻译主题的选项。那么我有什么选择，比如 www.mydomain.com/en www.mydomain.com/de www.mydomain.com/fr...？我是否需要安装多个 wordpress 实例才能拥有它？或者有一个插件可以像 qtranslate 一样翻译主题字符串？请问最好的做法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T16:46:56.863

不，您不想让多个 WordPress 实例来处理这个问题。检查[WPML](http://wpml.org/)和[CMSwithTMS](http://www.cmswithtms.net)。前者是最先进和最常用的 WordPress 多语言发布插件，而后者更适合您的客户正在寻找使用专业翻译管理系统的更完整的工作流程解决方案。

# java - 如何在java中使用某些分隔符拆分字符串

> ID：14914678
> 
> 赞同：0
> 
> 时间：2013-02-16T20:14:56.993
> 
> 标签：java

我有一个字符串

```
[Ian Wood P. M. Visscher]
[Ian Wood L. Mengersen]
[Ian Wood]
[P. M. Visscher Ian Wood]. 
```

我想将此字符串写入二维数组。（即）字符串

```
a[0][0]=Ian Wood ,
a[0][1]=P. M. Visscher,
a[1][0]=Ian Wood,
a[1][1]=L. Mengersen and so on. 
```

每次我要输入时，字符串中的名称都会改变。如何将其拆分并以上述形式存储在数组中。请提出任何想法。在此先感谢。以下是我处理的代码，但没有正确拆分。

```
String[] parts = output.split(" ");
String[][] table = new String[parts.length / 2][2];
for (int i = 0, r = 0; r < table.length; r++) {
table[r][0] = parts[i++];
table[r][1] = parts[i++];
}
System.out.println(java.util.Arrays.deepToString(table)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:25:06.670

我假设您的意思是首字母为“某些分隔符”，并且您的输入字符串是一个字符串数组：

```
import java.util.ArrayList;
import java.util.List;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

import static java.lang.System.out;
import static java.util.regex.Pattern.CASE_INSENSITIVE;
import static java.util.regex.Pattern.compile;

public final class Q14914678 {

    private static final Pattern pattern = compile("^\\s*((?:[a-z]+\\s*?)*)\\s*([a-z]\\..*)?", CASE_INSENSITIVE);

    private static final String[] names = {
            "Ian Wood P. M. Visscher",
            "Ian Wood L. Mengersen",
            "Ian Wood",
            "P. M. Visscher Ian Wood"
    };

    public static void main(String[] args) {
        final List<String[]> collected = new ArrayList<String[]>();
        for ( final String name : names ) {
            final Matcher matcher = pattern.matcher(name);
            if ( matcher.matches() ) {
                collected.add(new String[] {matcher.group(1), matcher.group(2)});
            }
        }
        for ( final String[] array : pairArray ) {
            out.println(array[0] + " / " + array[1]);
        }
    }

} 
```

结果如下：

```
Ian Wood / P. M. Visscher
Ian Wood / L. Mengersen
Ian Wood / null
 / P. M. Visscher Ian Wood 
```

# c# - 如何正确使用 BackgroundWorker 调用带参数的静态方法

> ID：14914681
> 
> 赞同：0
> 
> 时间：2013-02-16T20:15:29.070
> 
> 标签：c#, backgroundworker, background-process

我看到 BackgroundWorker 类能够将一些进度信息传递给上层进程。我有静态方法：

```
MyClass.MyMethod(string, string)    // Does some work which progress I need to report 
```

如何从任何调用函数或进程中使用此类方法来返回 BackgroundWorker 进度信息，例如：

```
backgroundWorker.ReportProgress(percent, "Stage N 1..."); 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:23:21.760

首先将`WorkerReportsProgress`属性设置为 True。

比将事件处理程序添加到[Progress changed 事件](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.progresschanged.aspx) 并至少将您的代码添加到新的处理程序中。

例如：

```
private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
     var percent = e.ProgressPercentage;
} 
```

但至少：后台工作类或多或少已过时（[Windows 声明](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)）我想使用新的[任务类](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)

# c++ - 可以在声明的同一行上使用 istream 初始化变量吗？

> ID：14914688
> 
> 赞同：15
> 
> 时间：2013-02-16T20:16:15.120
> 
> 标签：c++, int, cin

下面两行可以浓缩成一行吗？

```
int foo;
std::cin >> foo; 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-16T20:23:57.723

聪明的回答：

```
int old; std::cin >> old; 
```

可怕的答案：

```
int old, dummy = (std::cin >> old, 0); 
```

正确答案：`old`必须先用*声明*定义，然后才能将其`operator>>`作为参数传递。在变量声明中获取函数调用的唯一方法是将其放在上面的初始化表达式中。声明变量并将输入读入其中的公认方法是您所写的：

```
int old;
std::cin >> old; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-16T20:32:34.320

你可以...

```
int old = (std::cin >> old, old); 
```

但你真的不应该这样做

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-16T20:52:34.667

使用函数：

```
int inputdata()
{
    int data;
    std::cin >> data;
    return data;
} 
```

然后：

```
int a=inputdata(); 
```

对于数据本身：

```
int inputdata()
{
    static bool isDataDeclared=false;
    if (isDataDeclared==true)
    {
    goto read_data;
    }
    else
    {
        isDataDeclared=true;
    }
    static int data=inputdata();
    return data;
    read_data:
    std::cin >> data;
    return data;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-16T21:59:18.730

也许不是针对`int`，而是针对您自己的类型：

```
class MyType {
    int value;
public:
    MyType(istream& is) {
        is >> *this;
    }

    friend istream& operator>>(istream& is, MyType& object);
};  

istream& operator>>(istream& is, MyType& object) {
    return is >> object.value;
} 
```

然后您可以使用`istream`传递给构造函数的类型创建类型：

```
int main() {
    istringstream iss("42");
    MyType object(iss);
} 
```

# c++ - C++ try/catch 与 C setjmp/longjmp 有何不同？

> ID：14914692
> 
> 赞同：3
> 
> 时间：2013-02-16T20:16:31.690
> 
> 标签：c++, c, error-handling, setjmp

`C++`我知道使用`try`and`catch`块时的异常处理。我想知道这个功能是否存在于`C`. 所以，现在我知道基本的错误处理`C`是由`setjmp/longjmp`.

既然`setjmp/longjmp`不存在于 中`C++`，可以假设它`try/catch`更好吗？以什么方式？？？

我可以在using中实现一个`try/catch`功能。那有什么不同？？`C``setjmp/longjmp`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T20:24:49.120

我认为主要区别在于 try/catch 知道堆栈上的对象，并且知道如何为堆栈上分配的对象调用 dtor，而 setjmp 对此没有任何作用。

此外，用户界面更加丰富，您可以定义多种异常类型并根据这些类型进行不同的行为

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-16T20:25:13.630

`try`/`catch`将占[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)。所有离开范围的对象都将被正确销毁。

`setjmp`/`longjmp`不会。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T20:50:14.843

尽管缺少 RAII 等语言功能，但`setjmp/longjmp`与用于抛出/捕获异常的机制根本不同。如今，使用零成本方法处理异常，当且仅当异常被实际抛出时才会遇到开销，否则没有开销。由于假设是在一个好的应用程序中一般不会抛出异常，因此称为“零成本”。使用 setjmp/longjmp，您将在每次“输入 try 块”时设置跳转点/上下文。因此，仅仅设置跳转点就会有很多运行时开销。早在一天之前，异常是使用实现的`setjmp/longjmp`（通过编译器，使用 RAII 和其他人所说的“缺失”的所有其他东西——所以你可以看到为什么他们的答案并不完全正确），所以理论上你可以达到同样的效果，但在以下方面会更糟表现。有关异常处理实现的更多详细信息，请参阅[Itanium C++ ABI：异常处理](http://mentorembedded.github.com/cxx-abi/abi-eh.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T21:40:41.680

虽然`setjmp/longjmp`可能会或可能不会处理析构函数，但从设计的角度来看，这并不是重要的区别。重要的是，当您抛出异常时，您不知道也不关心它将在哪里处理。实现遍历调用堆栈，直到找到可以处理抛出类型的 catch 子句或直到它到达堆栈顶部；在后一种情况下，程序中止。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-16T20:23:07.017

> 我可以使用 setjmp/longjmp 在 C 中实现 try/catch/finally 功能。那有什么不同？？

这就是问题的答案（您不必自己做）。

# ios - 在 ios 应用程序中的单例中设置枚举，以便可以在整个应用程序中访问它

> ID：14914694
> 
> 赞同：1
> 
> 时间：2013-02-16T20:16:53.017
> 
> 标签：ios, enums, singleton, global-variables

我想在我的 iOS 应用程序的 Constants Singleton 类中设置我的全局常量值，以便任何导入常量的类都可以使用这些值。

然而，在这个想法玩了几个小时之后，我仍然无法让它发挥作用。

在我的 Constants.m 文件中

```
 @interface Constants()
 {
    @private
    int _NumBackgroundNetworkTasks;
    NSDateFormatter *_formatter;
 }
 @end

 @implementation Constants

 static Constants *constantSingleton = nil;
 //Categories of entries
 typedef enum
 {
   mapViewAccessoryButton = 999

  } UIBUTTON_TAG;

 +(id)getSingleton
 {

   .....
  } 
```

我有另一个类 MapViewController ，其中我有对常量单例的引用，我试图像这样访问枚举

```
 myDetailButton.tag =  self.constSingleton.UIBUTTON_TAG.mapViewAccessoryButton; 
```

但是，这是行不通的。我无法访问 mapviewcontroller 内的 UIBUTTON_TAG

有人有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T20:40:18.517

如果您希望枚举在整个应用程序中可用，请将枚举定义放在 .h 文件中，而不是 .m 文件中。

**更新**：

Objective-C 不支持命名空间，也不支持类级常量或枚举。

该行：

```
myDetailButton.tag =  self.constSingleton.UIBUTTON_TAG.mapViewAccessoryButton; 
```

应该：

```
myDetailButton.tag =  mapViewAccessoryButton; 
```

假设您`UIBUTTON_TAG`在某个 .h 文件中定义枚举。

当你编译一个 Objective-C 应用程序时，所有枚举的所有值都必须具有唯一的名称。这是 Objetive-C 基于 C 的结果。

**更新 2**：

有一种方法可以得到你想要的东西，但不是用枚举。像这样的东西应该工作：

常量.h：

```
@interface UIBUTTON_TAG_ENUM : NSObject

@property (nonatomic, readonly) int mapViewAccessoryButton;
// define any other "enum values" as additional properties

@end

@interface Constants : NSObject

@property (nonatomic, readonly) UIBUTTON_TAG_ENUM *UIBUTTON_TAG;

+ (id)getSingleton;

// anything else you want in Constants

@end 
```

常数.m

```
@implementation UIBUTTON_TAG_ENUM

- (int)mapViewAccessoryButton {
    return 999;
}

@end

@implementation Constants {
    int _NumBackgroundNetworkTasks;
    NSDateFormatter *_formatter;
    UIBUTTON_TAG_ENUM *_uiButtonTag;
}

@synthesize UIBUTTON_TAG = _uiButtonTag;

- (id)init {
    self = [super init];
    if (self) {
        _uiButtonTag = [[UIBUTTON_TAG_ENUM alloc] init];
    }

    return self;
}

// all of your other code for Constants

@end 
```

现在你可以这样做：

```
myDetailButton.tag =  self.constSingleton.UIBUTTON_TAG.mapViewAccessoryButton; 
```

我不确定这是否有道理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T20:34:25.627

如果您不打算大量更改枚举，则一种方法是简单地将其粘贴到您的预编译头文件 (.pch) 中。

# c# - Application_Error System.Web.HttpResponse.Redirect 值不能为空

> ID：14914696
> 
> 赞同：1
> 
> 时间：2013-02-16T20:17:06.930
> 
> 标签：c#, url, exception, null, response.redirect

当他们单击表单上的提交按钮时，只有少数用户出现错误，以下是例外...

> 异常发生在：System.Web.HttpResponse.Redirect 消息：值不能为空。参数名称：url 来源：System.Web 堆栈跟踪：在 System.Web.HttpResponse.Redirect(String url, Boolean endResponse, Boolean Permanent)
> 用户点击 subit 然后调用返回 documentID 的 web 服务，然后重定向用户到外部站点开始文档..

这是我的代码我正在检查 URL 以确保它有一个

```
//If the document was successfully created then the user will be redirected to assure sign to immediately sign the document.
                if (isSuccessfull)
                {
                    //Re Directing the user to immediately sign the document.  In assure sign it is called immediate presentment.
                    //ToDo: When testing change the ProductionBaseUrl to the SandBoxBaseURL
                    var redirectUrl =
                        documentNowSubmit.BuildDocuementSigningUrl(
                            ApplicationSettingsFactory.GetApplicationSettings().ProductionBaseUrl, ui_txtEmailAddress.Text,
                            documentResult[0].Id.ToString(),
                            documentResult[0].AuthToken.ToString(),
                            signatoryListQueryResult, string.Empty);
                    if (redirectUrl != string.Empty)
                    {
                        Response.Redirect(redirectUrl, false); //02/14/2013 Removed the end response true from the redirect.
                        //HttpContext.Current.ApplicationInstance.CompleteRequest(); //Added the complete request call..
                    }
                    else
                    {
                        throw new ArgumentNullException("redirectUrl", "User" + fullName  + "-" + emailAddress + ": Document signing url is empty.");
                    }

                }
                else
                {
                    var additionalInformation = "User name: " + userName + " Document Title: " + documentTitle +
                                                " Template Id: " +
                                                templateId;
                    throw new Exception(
                        "An error has occurred with the submission of your document. With the following additional information: " +
                        additionalInformation + " Please contact the service desk for additional help. " +

  assureSignExceptionMsgs);
                } 
```

我在 Application_Error 的 global.asax 中发现了错误

它总是进入 LogAndClearException

```
 //----------------------------------------------------------------------
        // NAME: Application_Error
        // CHANGE LOG:
        // Date              Programmer          Description
        //----------------------------------------------------------------------

        //If the last error or associated base exception do not have value, exit immediately.
        if (Server.GetLastError() == null)
        {
            return;
        }

        //Ignore 'A first chance exception of type 'System.Threading.ThreadAbortException' occurred in mscorlib.dll'
        //This happens and is documented by Microsoft because the Server.End() is being called. This can happen when an unauthenticated user tries 
        //to access this site and the Response.Resirect is called or if a Response.Redirect is within a Try-Catch block.
        if (Server.GetLastError().GetBaseException() is System.Threading.ThreadAbortException)
        {
            Server.ClearError();
            return;
        }

        //Log the exception in addition to redirecting to the error page
        LogAndClearException();
    } 
```

无法弄清楚为什么有些用户得到错误而有些没有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:39:04.427

我建议通过使用`string.IsNullOrEmpty(..)` **而不是与 string.Empty 进行比较来检查 redirectUrl。**

我会假设

```
 var redirectUrl = documentNowSubmit.BuildDocuementSigningUrl(..) 
```

在某些情况下返回 null！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:27:41.187

当我进行字符串比较时，我忘记将 toLower 添加到我的字符串中以确保它们都是相同的大小写。我还添加了上述内容。

# java - 具有继承和抽象类的人员测试器应用程序

> ID：14914697
> 
> 赞同：0
> 
> 时间：2013-02-16T20:17:09.680
> 
> 标签：java, class, inheritance

如果有更多关于此的帖子，我提前道歉，我已经查看了看起来相关但找不到解决方案的帖子。我在一个名为 Person Tester 的项目中工作；

1.  提示用户在创建客户 (c) 或员工 (e) 之间进行选择。
2.  接下来，提示用户输入名字、姓氏、电子邮件地址和客户编号（如果选择了客户）或社会保险号（如果选择了员工）。

3.  一旦收集到正确的数据，信息就会以这种格式打印到控制台：

    ```
     name: first last
        email: jondoe@fakemail.com
        social security number: XXXXXXXXXXX (if employee)
        customer number: XXXXXX  (if customer) 
    ```

4.  该程序处理继承和一个由员工类和客户类扩展的抽象人员类。另一项规定是，person 类应包含一个名为 getDisplayText 的抽象方法，该方法返回一个字符串。

这是我的问题所在，这是我第一次使用抽象类。

我的问题是为什么我不能简单地在我的 perosn 类中打印 toString 方法来显示输入的所有用户数据，这使我进入下一个问题，程序需要一个额外的组件（我引用我的作业） ：**要将对象的数据打印到控制台，此应用程序应使用名为 print 的静态方法，该方法接受 Person 对象。**

我不确定如何实现这一点，因为它从未在课堂上讨论过。我试图简单地编写以下代码： System.out.print(aPerson.toString) 但我得到的只是名称的空白值：和社会安全号码：。我疯了，我已经为此工作了几个小时，并且至少重新阅读了相关文本 4 次。这是我最后的手段。请引导我朝着正确的方向前进，我不介意长时间工作来做到这一点。

我已经编写了大部分应用程序，现在只是停留在如何将数据打印到控制台上。感谢任何和所有建议，这是我的代码：

```
public class CH08PR82App {
    public static void main(String[] args) {
        System.out.print("Welcome to the Person Tester Application");
        System.out.println();

        Scanner sc = new Scanner(System.in);

        Person aPerson;
        aPerson = new Person();

        if (aPerson != null) {
            System.out.println(aPerson.toString());
        }

        String choice = "y";
        while (choice.equalsIgnoreCase("y")) {

            //prompt user to enter customer or employee
            System.out.print("Create customer or employee (c/e): ");
            String userType = sc.nextLine();

            if (userType.equalsIgnoreCase("c")) {
                String firstName = Validator.getStringInput(sc, "Enter first name: ");
                String lastName = Validator.getStringInput(sc, "Enter last name: ");
                String email = Validator.getStringInput(sc, "Enter email address: ");
                String custNumber = Validator.getStringInput(sc, "Customer number: ");
                //System.out.println(custNumber);
            } else if (userType.equalsIgnoreCase("e")) {
                String firstName = Validator.getStringInput(sc, "Enter first name: ");
                String lastName = Validator.getStringInput(sc, "Enter last name: ");
                String email = Validator.getStringInput(sc, "Enter email address: ");
                int empSoc = Validator.getInt(sc, "Social security number: ");
            }
            choice = Validator.getStringContinue(sc, "Continue? (y/n): ");
        }
    }
}

abstract class Person {

    private String firstName;
    private String lastName;
    private String eMail;

    public Person() {
        firstName = "";
        lastName = "";
        eMail = "";
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public String geteMail() {
        return eMail;
    }

    public void seteMail(String eMail) {
        this.eMail = eMail;
    }

    @Override
    public String toString() {
        return "Name: " + this.firstName + this.lastName + "\n" + "E-mail: "
                + this.eMail;
    }

    abstract String getDisplayText();
}

abstract class Customer extends Person {

    private String customerNumber;

    public Customer() {
        super.toString();
        customerNumber = "";
    }

    public void setcustomerNumber(String customerNumber) {
        this.customerNumber = customerNumber;
    }

    public String getcustomerNumber() {
        return customerNumber;
    }

    @Override
    public String toString() {
        return super.toString() + "Social Security number: " + customerNumber
                + "\n";
    }
}

abstract class Employee extends Person {

    private String socNumber;

    public Employee() {
        super.toString();
        socNumber = "";
    }

    public void setsocNumber(String socNumber) {
        this.socNumber = socNumber;
    }

    public String getsocNumber() {
        return socNumber;
    }

    @Override
    public String toString() {
        return super.toString() + "Social Security number:      " + socNumber
                + "\n";
    }
}

class Validator {
    public static String getStringContinue(Scanner sc, String prompt) {
        boolean isValid = false;
        String s = "";
        while (isValid == false) {
            System.out.print(prompt);
            if (sc.hasNext("y")) {
                s = sc.nextLine(); // read entire line
                isValid = true;
            } else if (sc.hasNext("n")) {
                s = sc.nextLine();
                isValid = true;
            } else {
                s = sc.nextLine();
                isValid = false;
                System.out.println("Error! Invalid string value. Try again.");
            }
        }
        return s;
    }

    public static String getStringInput(Scanner sc, String prompt) {
        boolean isValid = false;
        String s = "";
        while (isValid == false) {
            System.out.print(prompt);
            if (sc.hasNext()) {
                s = sc.nextLine(); // read entire line
                isValid = true;
            } else {
                System.out.println("Error! Invalid string value. Try again.");
            }
        }
        return s;
    }

    public static int getInt(Scanner sc, String prompt) {
        int i = 0;
        boolean isValid = false;
        while (isValid == false) {
            System.out.print(prompt);
            if (sc.hasNextInt()) {
                i = sc.nextInt();
                isValid = true;
            } else {
                System.out.println("Error! Invalid integer value. Try again.");
            }
            sc.nextLine(); // discard any other data entered on the line
        }
        return i;
    }

    public static int getInt(Scanner sc, String prompt, int min, int max) {
        int i = 0;
        boolean isValid = false;
        while (isValid == false) {
            i = getInt(sc, prompt);
            if (i <= min) {
                System.out.println("Error! Number must be greater than " + min
                        + ".");
            } else if (i >= max) {
                System.out.println("Error! Number must be less than " + max
                        + ".");
            } else {
                isValid = true;
            }
        }
        return i;
    }

    public static double getDouble(Scanner sc, String prompt) {
        double d = 0;
        boolean isValid = false;
        while (isValid == false) {
            System.out.print(prompt);
            if (sc.hasNextDouble()) {
                d = sc.nextDouble();
                isValid = true;
            } else {
                System.out.println("Error! Invalid decimal value. Try again.");
            }
            sc.nextLine(); // discard any other data entered on the line
        }
        return d;
    }

    public static double getDouble(Scanner sc, String prompt, double min,
            double max) {
        double d = 0;
        boolean isValid = false;
        while (isValid == false) {
            d = getDouble(sc, prompt);
            if (d <= min) {
                System.out.println("Error! Number must be greater than " + min
                        + ".");
            } else if (d >= max) {
                System.out.println("Error! Number must be less than " + max
                        + ".");
            } else {
                isValid = true;
            }
        }
        return d;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:47:45.510

我们先来看看打印方法：

```
public static void print(Person person) {
    System.out.println(person.toString());
} 
```

现在你的 Person 类中需要一个抽象方法：

```
public abstract String getDisplayText(Person person); 
```

您将在 Employee 和 Customer 类中覆盖它：

```
// Employee
@Override
public String getDisplayText(Person person) {
    return ((Employee)person).toString();
} 
```

和：

```
// Customer
@Override
public String getDisplayText(Person person) {
    return ((Customer)person).toString();
} 
```

他们希望您将方法抽象化，因为每个实现都是不同的——客户有一个客户 ID，员工有一个 Soc 号。

现在让我们解释一下静态方法和抽象方法：静态方法和抽象方法之间的区别在于**抽象**方法只是一个标头——实现依赖于子类。而**静态**方法意味着您可以在不首先创建对象的情况下调用它。

这个特定的静态方法的使用非常简单。假设你有：

```
Person john = new Customer();
... // Fill john with data
Person.print(john); 
```

在我看来，您对所有这些抽象和静态的东西都有些困惑。抽象类是不能创建对象的类。在您的示例中，您有一个抽象类 Person。该类是抽象的，因为您需要客户或员工（两者都是人，因此继承自 Person 类），但您不想存储关于不是这些人的人的信息。这也是你不能这样做的原因：

```
Person john = new Person(); // Build error 
```

但是您可以（并且应该）这样做：

```
Person john = new Employee(); // Will compile and run 
```

# javascript - 如何在 JavaScript 中设置动态生成的伪类名称以与 instanceof 运算符一起使用？

> ID：14914698
> 
> 赞同：2
> 
> 时间：2013-02-16T20:17:19.237
> 
> 标签：javascript, function, dynamic, pseudo-class

我想设置存储在具有特定名称的数组中的 JavaScript 伪类的名称，例如，非数组版本可以完美运行：

```
var Working = new Array();
Working = new Function('arg', 'this.Arg = arg;');
Working.prototype.constructor = Working;
var instw = new Working('test');
document.write(instw.Arg);
document.write('<BR />');
document.write((instw instanceof Working).toString()); 
```

输出：

```
test
true 
```

但是这种格式不起作用：

```
// desired name of pseudoclass
var oname = 'Obj';

var objs = new Array();
objs.push(new Function('arg', 'this.Arg = arg;'));

// set objs[0] name - DOESN'T WORK
objs[0].prototype.constructor = oname;

// create new instance of objs[0] - works
var inst = new objs[0]('test');
document.write(inst.Arg);

document.write('<BR />Redundant: ');
// check inst name - this one doesn't need to work
try { document.write((inst instanceof objs[0]).toString()); } catch (ex) { document.write('false'); }
document.write('<BR />Required: ');
// check inst name - this is the desired use of instanceof
try { document.write((inst instanceof Obj).toString()); } catch (ex) { document.write('false'); } 
```

输出：

```
test
Redundant: true
Required: false 
```

[链接到 JSFiddle](http://jsfiddle.net/CoryG/cNeFQ/1/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T07:21:40.140

就 JS 的流畅性而言，这里发生了一些事情有点不协调（没关系，一旦我离开 4.0 的基本语言功能，我的 C# 就已经很陈旧了）。

`document.write`首先，我可以建议不惜一切代价避免吗？
这有技术上的原因，如今浏览器都在努力规避它们，但它仍然与`alert()`到处放置（包括迭代）一样糟糕。
我们都知道 Windows 系统消息弹出窗口有多烦人。

如果你在 Chrome 中，点击`CTRL+Shift+J`它，你会得到一个方便的控制台，你可以`console.log()`进入（甚至是对象/数组/函数），它将返回数据集/DOM对象的可遍历节点和其他类型的字符串（如职能）。当今 JS 的最佳特性之一是您的 IDE 位于浏览器中。
从头开始编写和保存 .js 文件在控制台中并不是特别简单，但测试/调试再简单不过了。

现在，进入真正的问题。

看看你在用示例 #1 做什么。的重写`.prototype.constructor`应该是完全没有必要的，除非那里有一些边缘情况的浏览器/引擎。

在用作构造函数的任何函数内部（即：用 调用`new`），该函数基本上是创建一个新对象`{}`，将其分配给`this`、 设置`this.__proto__ = arguments.callee.prototype`和 设置`this.__proto__.constructor = arguments.callee`，其中`arguments.callee === function`。

```
var Working = function () {};
var working = new Working();
console.log(working instanceof Working); // [log:] true 
```

`Working`不是字符串：你已经把它变成了一个函数。
实际上，在 JS 中，它也是`window`（在浏览器中，也就是）的一个属性。

```
window.Working    === Working;  // true
window["Working"] === Working; // true 
```

最后一个确实是解决示例 #2 中的困境的关键。

不过，在查看 #2 之前，请注意：
如果您正在做大量的伪子类化，

```
var Shape = function () {
    this.get_area = function () { };
},

Square = function (w) {
    this.w = w;
    Shape.call(this);
}; 
```

如果您希望`instanceof`同时使用 Square 和 Shape，那么您必须开始使用原型和/或构造函数，具体取决于您想要继承什么以及如何继承。

```
var Shape = function () {};
Shape.prototype.getArea = function () { return this.length * this.width; };

var Square = function (l) { this.length = l; this.width = l; };
Square.prototype = new Shape();

var Circle = function (r) { this.radius = r; };

Circle.prototype = new Shape();
Circle.prototype.getArea = function () { return 2 * Math.PI * this.radius; };

var circle = new Circle(4),
    square = new Square(4);

circle instanceof Shape; // true
square instanceof Shape; // true 
```

这仅仅是因为我们将原型对象（被每个实例重用）设置为父类的全新实例。我们甚至可以在所有子类之间共享该单一实例。

```
var shape = new Shape();
Circle.prototype = shape;
Square.prototype = shape; 
```

...只是不要覆盖`.getArea`，因为原型继承就像继承公共静态方法。

形状，当然，有`shape.__proto__.constructor === Shape`，差不多`square.__proto__.constructor === Square`。做一个`instanceof`只是通过链接递归`__proto__`，检查函数是否与给定的匹配。

而且，如果您以上面列出的方式构建函数 ( `Circle.prototype = new Shape(); Circle.prototype.getArea = function () { /* overriding Shape().getArea() */};`，那么`circle instanceof Circle && circle instanceof Shape`将自行处理。

混合继承或伪构造函数（返回不是的对象`this`等）需要`constructor`修改，以使这些检查工作。

...无论如何...关于#2：

了解以上所有内容，这应该很快就能解决。

您正在为所需的函数名称创建一个字符串，而不是创建一个函数本身，并且没有`Obj`定义变量，因此您会收到“参考错误”：相反，请将您的“所需名称”设为对象的属性。

```
var classes = {},
    class_name = "Circle",

    constructors = [];

classes[class_name] = function (r) { this.radius = r; };

constructors.push(classes.Circle);

var circle = new constructors[0](8);
circle instanceof classes.Circle; 
```

现在一切都很好地定义了，你不会覆盖任何你不需要覆盖的东西，你仍然可以继承`.prototype`和覆盖其值为，并使用该对象属性进行查找）。`instanceof``data.name``new Function(data.args, data.constructor)`

希望任何/所有这些都有帮助。

# python - 数组python的整数操作

> ID：14914705
> 
> 赞同：0
> 
> 时间：2013-02-16T20:18:04.953
> 
> 标签：python, list-manipulation

我有 2 个数组，我需要将一个数组中的整数的最后一位与另一个数组中的整数进行切换。如果我向您展示输出以更好地了解我正在尝试做的事情，那就更好了。我不确定至少可以做到这一点。

数组的输出：

```
first_array=['3', '4', '5', '2', '0', '0', '1', '7']
second_array=['527', '61', '397', '100', '97', '18', '45', '1'] 
```

然后它看起来像：

```
first_array=['3', '4', '5', '2', '0', '0', '1', '7']
second_array =['523', '64', '395', '102', '90', '10', '41', '7'] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T20:20:05.320

```
>>> [s[:-1]+f for (f,s) in zip(first_array, second_array)]
['523', '64', '395', '102', '90', '10', '41', '7'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T20:46:00.520

如果它是实际整数，您可以尝试将第二个列表的每个元素“四舍五入”到最接近的 10 的倍数，然后添加第一个列表中的每个元素。例如：

```
>>> first = [3,4,5,6]
>>> second = [235,123,789,9021]
>>> second = [x - (x%10) for x in second]   
>>> second
[230, 120, 780, 9020]
>>> [x + y for (x,y) in zip(first, second)]
[233, 124, 785, 9026] 
```

# python - 如何读取 Sphinx 扩展节点中的 conf.py 设置？

> ID：14914707
> 
> 赞同：3
> 
> 时间：2013-02-16T20:18:25.680
> 
> 标签：python, configuration-files, python-sphinx

```
from docutils.parsers.rst.directives.images import Figure
class MyFigure(Figure):
    def run(self):
        # here I need to read the 'thumbnails_folder' setting
        pass

def setup(app):
    app.add_config_value('thumbnails_folder', '_thumbnails', 'env') 
```

如何访问 config 中的配置值`.run()`？我阅读了 Sphinx-contrib 的[源代码](https://bitbucket.org/birkenfeld/sphinx-contrib/src)，但没有看到以我的方式完成的事情，所以他们`conf.py`以我无法访问的方式访问。或者我应该以不同的方式来做吗？

我想做的就是翻译这个

```
.. figure:: image/image.jpg 
```

进入这个：

```
.. image:: image/thumbnails/image.jpg
   :target: image/image.jpg 
```

[这是扩展代码](http://pastebin.com/pMhKnTkv)

（缩略图是用 PIL 生成的）。并将其`:target:`放入可下载的文件中（如我所见，只有构建器实例才能做到这一点）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T18:06:47.013

[构建环境](https://www.sphinx-doc.org/en/master/extdev/envapi.html)包含对 Config 对象的引用。可以从此对象检索配置变量：

```
def run(self):
    env = self.state.document.settings.env  # sphinx.environment.BuildEnvironment 
    config = env.config                     # sphinx.config.Config
    folder = config["thumbnails_folder"] 
    ... 
```

# c++ - 使用 C++ 和 Cimg 库将 rgb 图像转换为矩阵

> ID：14914709
> 
> 赞同：2
> 
> 时间：2013-02-16T20:18:44.997
> 
> 标签：c++, rgb, cimg

我在盲源分离中有这个项目，我需要使用 Cimg 在矩阵中表示 RGB 图像。但我实际上无法理解如何使用 Cimg .. 我查看了文档

但是功能太多了，我不知道该用哪一个！真的太多了。我从来没有使用过 Cimg，所以如果有人可以向我解释我的程序应该是什么，请做！我正在使用 C++ 编程并使用 eclipse。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T19:28:07.447

首先定义您的图像：

```
CImg<float> img(320,200,1,3);  // Define a 320x200 color image (3 channels). 
```

然后用您的数据填充它：

```
cimg_forXYC(img,x,y,c) {  // Do 3 nested loops
   img(x,y,c) = pixel_value_at(x,y,c); 
} 
```

然后你可以用它做你想做的一切。

```
img.display("Display my image"); 
```

当*c==0*时，您将填充图像的红色通道，当*c==1*时，填充绿色通道，当 c== *2*时填充蓝色通道。真的没什么难的。

我已经尝试了很多图像处理库，CImg 可能是最容易使用的库之一。查看提供的示例文件（文件夹**CImg/examples/**）以了解整个事情是如何工作的（特别是**CImg/examples/tutorial.cpp**）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T20:31:58.277

开始使用任何 3rd 方库，我发现从教程开始很有用，例如：[CImg Tutorial](http://cimg.sourceforge.net/reference/group__cimg__tutorial.html)

特别是如果您是 C++/编程新手。

不要对丰富的界面或大量的代码感到沮丧。坚持您正在寻找的内容，让 Google 成为您的朋友。

为了让你开始，**熟悉`CImg`课程。然后根据您的需要前进...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T22:41:33.500

如果您不强制使用 CImg，我建议您使用[DevIL](http://openil.sourceforge.net/)，工作代码示例如下所示：

```
ilLoad();
ILuint image = 0;
ilGenImages(1,&image);
if(!image)
{
    // Error
}
ilBindImage(image);
if(!ilLoadImage("yourimage.png"))
{
    // Error
}
// 4-bytes per pixel for RGBA
ILuint width = ilGetInteger(IL_IMAGE_WIDTH);
ILuint height = ilGetInteger(IL_IMAGE_HEIGHT);
unsigned char* data=width*height*4;

ilCopyPixels(0,0,0,width,height,1,IL_RGBA,IL_UNSIGNED_BYTE,data);

ilDeleteImages(1,&image);
image = 0;

// now you can use 'data' as a pointer to all your required data.
// You can access from data[0] up to data[ (width*height*4) - 1].
// First pixel's red value: data[0]
// Second pixel's green value: data[1 + (4 * 1)]
// Third pixel's alpha value: data[3 + (4 * 2)]

// Once you're done...
delete[] data;
data = 0; 
```

# java - HashMap with camel cxf:component POJO dataFormat

> ID：14914711
> 
> 赞同：0
> 
> 时间：2013-02-16T20:18:58.823
> 
> 标签：java, web-services, jax-ws, cxf, apache-camel

我的 WS 接口：

```
@WebService
public interface WS{

    String decide(String word, MapWrapper parameters);

} 
```

使用 WrapperClass：

```
public class MapWrapper {

    public HashMap<String, String> map;
} 
```

和

```
from("cxf:http://localhost:8080/WS?serviceClass=ws.WS&dataFormat=POJO").to("stream:out"); //Just for testing purpose 
```

使用 SOAPUI 调用时会出现以下异常：

```
Error during type conversion from type: org.apache.cxf.message.MessageContentsList to the required type: byte[] with value [Test, ws.WS@1221bc6] due argument type mismatch 
```

我认为 MapWrapper 类导致了这个异常。但是如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:24:58.637

同样的问题一遍又一遍......

不要在作为 Web 服务公开的接口**中**使用`Java`特定结构。我正在考虑`HashMap`.

Web 服务是一种集成技术，旨在连接任何平台（甚至是非 OO 客户端）中的组件。Web 服务中传递的所有对象都应该是值传递对象。不是复杂的业务对象等。

这不仅是正确的方法，而且是编码和部署过程中问题最少的方法。

# java - 用 Java 缩放图像

> ID：14914714
> 
> 赞同：1
> 
> 时间：2013-02-16T20:19:28.160
> 
> 标签：java, swing

我想使用以下 java 代码使图像更小。原始图像显示在屏幕上（高度大于 maxHeight）。为什么？

```
try{

        final int maxHeight = 600;
        JLabel picLabel;
        BufferedImage myPicture = ImageIO.read(new File("src/VIZ/"+listOfFiles[1].getName()));
        int height = myPicture.getHeight();
        int width = myPicture.getWidth();
        if ( height < maxHeight ){
            int multiplier = height/maxHeight;
            height = maxHeight;
            int newWidth = width/multiplier;
            BufferedImage bi = new BufferedImage(newWidth, maxHeight, BufferedImage.TYPE_INT_ARGB);
            picLabel = new JLabel(new ImageIcon( bi ));
        }else{
        picLabel = new JLabel(new ImageIcon( myPicture ));
        }

        console.add(picLabel);
    }

    catch(Exception e){

    } 
```

# node.js - Express.js：没有这样的文件或目录

> ID：14914715
> 
> 赞同：51
> 
> 时间：2013-02-16T20:19:30.647
> 
> 标签：node.js, ubuntu, fedora

我用`apt-get install nodejs`. 然后我用`apt-get install npm`. 现在，当我尝试跑步时，`express`我得到了

```
$ express 
/usr/bin/env: node: No such file or directory 
```

如何解决此错误？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-02-16T20:19:30.647

Ubuntu 中有两个具有相似名称的包，*node*和*nodejs*。

`node`做这个，

> 描述-en：业余分组无线电节点程序。节点程序接受 TCP/IP 和分组无线电网络连接，并为用户提供一个接口，允许他们使用各种业余无线电协议与远程主机建立网关连接。

`nodejs`做这个，

> 描述：Node.js 基于事件的服务器端 javascript 引擎 Node.js 在设计上与 Ruby 的 Event Machine 或 Python 的 Twisted 等系统相似并受其影响。它使事件模型更进一步——它将事件循环呈现为一种语言结构，而不是一个库。Node.js 捆绑了几个有用的库来处理服务器任务：系统、事件、标准 I/O、模块、计时器、子进程、POSIX、HTTP、多部分解析、TCP、DNS、断言、路径、URL、查询字符串。

Fedora 也遵循类似的包命名方案。因此，`nodejs`必须将二进制文件`nodejs`从原来的`node`. 但是，从技术上讲，这并不可靠：大多数 nodejs 程序（以及使用 npm 安装的库）都假定 node 二进制文件是`node`. 如果你想解决这个问题，最简单的方法就是将两者符号链接在一起。如果您采用这条路线，请不要安装`node`处理业余分组无线电的软件包。

```
sudo ln -s /usr/bin/nodejs /usr/local/bin/node 
```

或者，对于节点，我建议使用[`n`](https://github.com/tj/n)而不是安装`node`. 只需安装 npm（它将安装节点），然后删除 npm，然后告诉 apt 清理它。为此，只需运行

```
sudo apt-get install npm
sudo npm install -g n
sudo n latest
sudo apt-get --purge remove npm
sudo apt-get autoremove 
```

还有其他二进制发行版管理器甚至可以使用 shell 脚本，`nvm`但我个人更喜欢`n`. 只考虑`n`一件事：它安装到的节点二进制文件`/usr/local/bin`。

为什么要删除 npm？不是。`apt-get --purge remove`只能删除包管理器安装的东西*。*`n latest`在包管理器之外工作。如果你这样做，有两个 npms，

1.  发行版（Debian/Ubuntu）使用`apt-get`.
2.  安装的版本`n latest`。

拥有发行版的旧版本毫无意义。而且，更糟糕的是，如果该版本有效，它可能会安装到不同的位置，并在其中进行 Debian 修改，假设 Debian 安装目录。最好使用其中一个/或但不要同时使用两者。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-05-05T16:23:29.913

你应该安装 nodejs-legacy 包，它有一个从 /usr/bin/node 到 /usr/bin/nodejs 的链接

`$ sudo apt-get install nodejs-legacy`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-13T22:35:36.363

在我的情况下，这是因为在我的`PATH`环境变量中，我有“~/progs/node/bin/”，而“~”似乎没有通过`env`......用真正的完整路径替换它来解决（“/home/ myuser/node/bin") 解决了我的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-19T17:59:20.987

这个解决方案

```
export PATH="$HOME/opt/nodejs/bin:$PATH" 
```

为我解决了这个问题（假设 $HOME 变量设置正确，它应该可以工作）。它还允许我避免对主目录的路径进行硬编码（例如，如果需要，我可以将我的 .bash_profile 与不同的帐户/服务器重用）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-01T21:49:16.380

在 cmd 中执行此操作

```
sudo apt-get install nodejs-legacy
chmod your folder 700 (optional) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-19T02:37:55.120

**免责声明：仅适用于通过部署工具运行的 bash 命令**

**注意：**在远程服务器中，如果您可以运行节点命令，但通过像 shipit 服务器这样的部署工具会抛出`/usr/bin/env: ‘node’: No such file or directory`. 创建符号链接将解决错误。

```
sudo ln -s $(which node) /usr/bin/node
sudo ln -s $(which npm) /usr/bin/npm
sudo ln -s $(which pm2) /usr/bin/pm2 
```

# c++ - Openssl AES crypt C++ 函数。解码后，主字符串中只有 16 个字符

> ID：14914717
> 
> 赞同：1
> 
> 时间：2013-02-16T20:19:43.853
> 
> 标签：c++, openssl, base64, aes

我试图制作一个通过 AES 加密来加密字符串的程序。在查看了 stackoverflow 和许多其他论坛之后，我最终得到了这个。但是代码存在一些问题：

1.有时加密有时不起作用（20次尝试，2次失败）。如何解决？它与 ivec 或 textLength 有关？

2.加密和解密后，我的主字符串只有 16 个第一个字符。在此之后，我有一些随机字符。可以解密我所有的字符串还是我必须削减到 16 个字符？

3.我需要融合一些字符，所以我做了这个：

```
 char ivec[16];
    for(int i=0;i<16;i++)
    {
    ivec[i]=iveccreate[i];
    } 
```

但毕竟 char ivec[16] 有 55 个字符。知道为什么吗？

4.在 AES_cbc_encrypt 函数之后，我的 ivec 变成了一些完全不同的字符。有什么办法可以阻止这种情况（我想减小代码的大小）？

对于 1-4 个问题的答案，我将非常感激。

麦卡罗尔

PS：我来自波兰，所以我的英语不太好。对不起。

有效代码：

```
#include <string.h>
#include <iostream>
#include <fstream>
#include <unistd.h>
#include <openssl/aes.h>
#include <time.h>
#include <stdlib.h>
#include <vector>
#include <openssl/sha.h>
#include <openssl/hmac.h>
#include <openssl/evp.h>
#include <openssl/bio.h>
#include <openssl/buffer.h>
#include <openssl/rand.h>
using namespace std;

string AESencode(string Text,string Key);
void AESdecode(string in,string Key);
char *encode(unsigned char *input, int length);
char *decode(unsigned char *input,int lenght);

void main
{
string out=AESencode("String,which I want to encrypt.\0","encryptionkey");
AESdecode(out,"encryptionkey");
return 0;
}

string AESencode(string Text,string Key)
{
   //Creating 16 random ive
   srand((unsigned int) time(NULL));
   unsigned char ive[16];
   for(int i=0; i<16; i++){
   ive[i] = (unsigned char) rand();
   }

//I'm losing null by encode ive
char *iveccreate=encode(ive,16);

//Copying 16 first chars from iveccreate(16 random letters,numbers)
char ivec[16];
   for(int i=0;i<16;i++)
   {
   ivec[i]=iveccreate[i];
   }

//Saving ivec,because I need to fuse ivec with output later
//and after encode I lose orginal ivec
char* ivec1=decode((unsigned char*)iveccreate,strlen((const char*)iveccreate));

// Round up to AES_BLOCK_SIZE
size_t textLength = ((Text.length() / AES_BLOCK_SIZE) + 1) * AES_BLOCK_SIZE;

//If necessary adding null to the Key(full 32 bytes)
if(Klucz.length() < 32){
    Key.append(32 - Key.length(), '\0');
}

//Creating space for the output
unsigned char *aesoutput = new unsigned char[textLength];

//Create and set AESkey
AES_KEY *aesKey = new AES_KEY;
AES_set_encrypt_key((unsigned char*)Key.c_str(), 256, aesKey);

//Encrypting
AES_cbc_encrypt((unsigned char*)Text.c_str(), aesoutput, Text.length()+ 1, aesKey, (unsigned char*)ivec, AES_ENCRYPT);

//Fusing ivec with aesoutput
char wyjsciowy[strlen((const char*)Wyjscie)+16];
    for(int i=0;i<16;i++){
        fuse[i]=ivec1[i];
    }
    for(int i=0;i<strlen((const char*)Wyjscie);i++)        {
        fuse[i+16]=aesouput[i];
    }

//Encode the fuse
char* out=encode((unsigned char*)wyjsciowy,strlen(wyjsciowy));

//Saving chars to string
string mychar((char*)out);

//Creating normal string from the base64 encode output
//String is 65 chars, new line, 65 chars
//so I'm looking for the number of not 65, ending chars of the string
int res=mychar.length()%65;

string allstr;
//Fuse strings without new line charater
for(int i=0;i<(mychar.length()-res);i+=65)
{
    allstr+=mychar.substr(i,64);
}

//Fuse string with the ending string.If res==0 it will add nothing.
allstr+=mychar.substr((mychar.length()-res),res);

//Returnig string
return allstr;
}

//Base64 encode function
char *encode(unsigned char *input, int length)
{
BIO *bmem, *b64;
BUF_MEM *bptr;
b64 = BIO_new(BIO_f_base64());
bmem = BIO_new(BIO_s_mem());
b64 = BIO_push(b64, bmem);
BIO_write(b64, input, length);
BIO_flush(b64);
BIO_get_mem_ptr(b64, &bptr);
char *buff = (char *)malloc(bptr->length+1);
memcpy(buff, bptr->data, bptr->length);
buff[bptr->length] = 0;
BIO_free_all(b64);
return buff;
}

//Base64 decode function
char *decode(unsigned char *input, int length)
{
BIO *b64, *bmem;
char *buffer = (char *)malloc(length);
memset(buffer, 0, length);
b64 = BIO_new(BIO_f_base64());
BIO_set_flags(b64, BIO_FLAGS_BASE64_NO_NL);
bmem = BIO_new_mem_buf(input, length);
bmem = BIO_push(b64, bmem);
BIO_read(bmem, buffer, length);
BIO_free_all(bmem);
return buffer;
}

void AESdecode(string in,string Key)
{
    //Decode the input string with Base64
    char* dec=decode((unsigned char*)in.c_str(),in.length());

    //Getting ivec
    unsigned char ivec[16];
    {

        //Getting first 16 bytes from dec
        unsigned char preivec[16];
        for(int i=0;i<16; i++){
            preivec[i] = dec[i];
        }

        //Encode these 16 bytes
        char *ppiv=encode(preivec,16);

        //Now we have 25 chars text
        //And ivec is only fist 16
        for(int i=0;i<25; i++){
            ivec[i] = ppiv[i];
        }
    }

    //Getting aesouput bytes
    char data[strlen(dec)-16];
    for(int i=16;i<(strlen(dec));i++){
        data[i-16]=dec[i];
    }

   //If necessary adding null to the Key(full 32 bytes)
    if(Key.length()< 32){
        Key.append(32-Key.length(),'\0');
    }   

    //Creating space for the output
    unsigned char *output = new unsigned char[strlen(data)];

    //Create and set new AESkey
    AES_KEY *aesKey = new AES_KEY;
    AES_set_decrypt_key((unsigned char*)Key.c_str(), 256, aesKey);
    // key length is in bits, so 32 * 8 = 256

    //Deccrypting
    AES_cbc_encrypt((unsigned char*)data, output, strlen(data), aesKey,ivec, AES_DECRYPT);

    //And there should be full primary string
    cout<<"OUTPUT: "<<output<<endl;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:37:43.343

AES 密钥是固定长度的字节数组，而不是可变长度的字符串。当你调用 AES_set_decrypt_key() 时，你给它一个 13 个字符的长字符串，加上一个空字节，所以我们知道是 14 个字节。然后该函数将使用 (32-14) -> 18 个剩余字节作为其密钥。这18个字节的内容是什么，多半是运气的结果

我怀疑这是你的问题。

# java - Jackson Json 并没有这样的方法错误

> ID：14914728
> 
> 赞同：43
> 
> 时间：2013-02-16T20:21:41.213
> 
> 标签：java, json, jackson, deserialization

我正在尝试使用杰克逊来序列化和反序列化 POJO。从 POJO 转到 JSON 效果很好，但往另一个方向发展则不行。

我有一个 POJO

```
public class Event {
  private String kind;

  public String getKind() {
    return kind;
  }

  public void setKind(String kind) {
    this.kind = kind;
  }
} 
```

并运行和测试我运行包 calendar.model;

```
Event event = new Event();
event.setKind("This is a kind");
String json = objectMapper.writeValueAsString(event); 
// RETURNS: "{\"kind\":\"This is a kind\"}"

objectMapper.readValue(json, Event.class); 
```

抛出异常

```
java.lang.NoSuchMethodError: com.fasterxml.jackson.core.JsonParser.getValueAsString()Ljava/lang/String;
at com.fasterxml.jackson.databind.deser.std.StringDeserializer.deserialize(StringDeserializer.java:24)
at com.fasterxml.jackson.databind.deser.std.StringDeserializer.deserialize(StringDeserializer.java:11)
at com.fasterxml.jackson.databind.deser.SettableBeanProperty.deserialize(SettableBeanProperty.java:375)
at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:98)
at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:308)
at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:121)
at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:2796)
at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:1942)
at calendar.controller.RootController.details(RootController.java:59)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:219)
at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:132)
at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:100)
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:604)
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:565)
at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80) 
```

我已经尽我所能让 JSON to POJO 工作，但它不会。如果我从 JSON 映射到 Map 类型，它确实有效。

谢谢您的帮助

## 编辑

这是我的依赖项中杰克逊的 grep

```
± > mvn dependency:tree | grep jackson                                                                                                                       -I- 
[INFO] +- com.google.http-client:google-http-client-jackson2:jar:1.13.1-beta:compile
[INFO] |  \- com.fasterxml.jackson.core:jackson-core:jar:2.0.5:compile
[INFO] |  |  +- com.fasterxml.jackson.core:jackson-annotations:jar:2.1.1:compile
[INFO] |  |  +- com.fasterxml.jackson.dataformat:jackson-dataformat-xml:jar:2.1.1:compile
[INFO] |  |  |  +- com.fasterxml.jackson.core:jackson-databind:jar:2.1.1:compile
[INFO] |  |  |  +- com.fasterxml.jackson.module:jackson-module-jaxb-annotations:jar:2.1.0:compile 
```

看起来除了jackson2之外没有其他版本的jackson。

正在运行的完整方法是弹簧控制器方法。

```
@RequestMapping(value = "/")
  public Event root() throws IOException {
    Event event = new Event();
    event.setKind("This is a kind");
    String json = objectMapper.writeValueAsString(event);
    // RETURNS: "{\"kind\":\"This is a kind\"}"

    Event mapped = objectMapper.readValue(json, Event.class);
    return mapped;
  } 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-02-16T21:08:15.453

看起来问题是你得到了不兼容的版本`jackson-core`- `jackson-databind`jackson-core 2.0.5 正在被引入，但我相信至少需要 2.1.0。

异常的第一行告诉您它找不到方法`JsonParser.getValueAsString()`，查看[2.0.5](http://fasterxml.github.com/jackson-core/javadoc/2.0.5/com/fasterxml/jackson/core/JsonParser.html)的 API 文档，该方法确实不存在。看起来它是在[2.1.0](http://fasterxml.github.com/jackson-core/javadoc/2.1.0/com/fasterxml/jackson/core/JsonParser.html)中添加的。

因此，您需要修复依赖关系 - 最有可能通过排除 2.0.5 并包括 2.1.0。

# erlang - Meck 对多个模拟模块的行为异常

> ID：14914730
> 
> 赞同：0
> 
> 时间：2013-02-16T20:21:51.253
> 
> 标签：erlang, meck

我有以下模块

```
-module(bhavcopy_downloader).

-export([download/2]).

download(From, SaveTo) ->
    {ok, {{Status, _}, _, Body}} = lhttpc:request(From, "GET", [], infinity),
    case Status of 
        200 ->  file:write(SaveTo, Body),
            true;
        _ -> false
    end. 
```

并对上述代码进行以下测试

```
file_download_test_() -> 
    {foreach,
     fun() ->
            meck:new(lhttpc)
            meck:new(file, [unstick])
     end,
     fun(_) ->
        meck:unload(file),
            meck:unload(lhttpc) 
     end,
      {"saves the file at specified location",
        fun() ->
            meck:expect(lhttpc, request, 4, {ok, {{200, "OK"}, [], <<"response">>}}),
            meck:expect(file, write_file, fun(Path, Data) -> 
                                    ?assertEqual(Path, "~/Downloads/data-downloader/test.html"), 
                                    ?assertEqual(Data, <<"response">>) 
                            end),
            ?assertEqual(true, bhavcopy_downloader:download("http://google.com", "~/Downloads/data-downloader/test.html")),
            ?assert(meck:validate(file))
        end}]

    }. 
```

当我运行测试时，我得到以下错误（为简洁起见，下面仅粘贴了部分错误）。查看下面的错误，我感觉文件模块没有被模拟（或者当我使用 设置另一个模拟时文件模块的模拟被覆盖`meck:new(lhttpc)`。这里可能出了什么问题？

```
=ERROR REPORT==== 16-Feb-2013::20:17:24 ===
** Generic server file_meck terminating 
** Last message in was {'EXIT',<0.110.0>,
                    {compile_forms,
                     {error,
                      [{[],
                        [{none,compile,
                          {crash,beam_asm,
                           {undef,
                            [{file,get_cwd,[],[]},
                             {filename,absname,1,
                              [{file,"filename.erl"},{line,67}]},
                             {compile,beam_asm,1,
                              [{file,"compile.erl"},{line,1245}]},
                             {compile,'-internal_comp/4-anonymous-1-',2,
                              [{file,"compile.erl"},{line,273}]},
                             {compile,fold_comp,3,
                              [{file,"compile.erl"},{line,291}]},
                             {compile,internal_comp,4,
                              [{file,"compile.erl"},{line,275}]},
                             {compile,'-do_compile/2-anonymous-0-',2,
                              [{file,"compile.erl"},{line,152}]}]}}}]}],
                      [{"src/lhttpc_types.hrl",
                        [{31,erl_lint,{new_builtin_type,{boolean,0}}},
                         {31,erl_lint,{renamed_type,bool,boolean}}]}]}}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:32:56.053

这是 Meck 中的第 22 个问题，原因是 Meck 使用 Erlang 编译器，而后者又使用该`file`模块。当 Meck 尝试重新编译`file`模块时，它需要`file`模块（通过编译器）并因此崩溃。

到目前为止，Meck 还没有处理模拟文件模块。您最好的选择是将`file`模块调用包装在另一个模块中并模拟该模块。

（*例如，理论上可以通过使用编译器和代码服务器的内部结构在 Meck 中解决此问题[`erlang:load_module/2`](http://erlang.org/doc/man/erlang.html#load_module-2)*，但是这非常棘手，需要很好地设计和测试）

# php - Dreamweaver php mysql + 个人资料页面

> ID：14914736
> 
> 赞同：1
> 
> 时间：2013-02-16T20:22:43.993
> 
> 标签：php, mysql, forms, login, dreamweaver

嘿，伙计们，我正在创建一个带有登录和注册的网站，并且默认情况下会在用户在表单中注册然后登录后创建一个个人资料页面帽子这些信息将显示为个人资料页面中的个人资料信息，每个人都是唯一的用户。用户名将指定每个用户及其个人资料页面。这些是一些 php 文件，任何人都知道如何仅显示属于指定用户的信息，而不是所有用户的所有信息。

# 注册表格.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Registration Page</title>
<link href="style/stylesheet.css" rel="stylesheet" type="text/css" />

</head>

<?php require_once('header.php'); ?>

<body>

<h2 class="RegisterTitleForm">Registration Form</h2>
<h3 class="requiredField">* Requierd Field!!</h3>
<table width="280" border="0" align="center">
<form action="registerProcess.php" method="post" id="registerForm">
  <tr>
    <input type="hidden" name="uid" id="uid" />
    <td style="text-align: right"><label for="firstname"><span class="Fields">First Name</span> <span class="requiredField">*</span></label></td>
    <td><input type="text" name="firstname" id="firstname" /></td>
  </tr>
  <tr>
    <td style="text-align: right"><label for="lasttname" class="Fields">Last Name</label></td>
    <td><input type="text" name="lastname" id="lastname" /></td>
  </tr>
  <tr>
    <td class="Fields" style="text-align: right"><label for="birthdate">Birth Date</label></td>
    <td><input type="date" name="birthdate" value= "YYYY_MM_DD"  onfocus="if (this.value == 'YYYY_MM_DD') {this.value = '';}" onblur="if (this.value == '') {this.value = 'YYYY_MM_DD';}"  type="text" id="birthdate" /></td>
  </tr>
  <tr>
    <td class="Fields" style="text-align: right"><label for="phonenumber">Phone Number</label></td>
    <td><input type="tel" name="phonenumber" value="000-0-000 000" onfocus="if (this.value == '000-0-000 000') {this.value = '';}" onblur="if (this.value == '') {this.value = '000-0-000 000';}"  type="text"  id="phonenumber" /></td>
  </tr>
  <tr>
    <td class="Fields" style="text-align: right"><label for="gender">Gender <span class="requiredField">*</span></label></td>
    <td><p>
      <label class="Fields">
        <input type="radio" name="genderGroup" value="Male" id="genderGroup_male" />
        Male</label>
      <br />
      <label class="Fields">
        <input type="radio" name="genderGroup" value="Female" id="genderGroup_female" />
        Female</label>
      <br />
    </p></td>
  </tr>
   <tr>
    <td class="Fields" style="text-align: right"><label for="country">Country</label></td>
    <td><select name="country" id="country"><option selected=>please choose coutry<option>lebanon<option>Us<option>europe 
    </select></td>
  </tr>
  <tr>
    <td class="Fields" style="text-align: right"><label for="adress">Local Adress <span class="requiredField">*</span></label></td>
    <td><input type="text" name="adress" id="adress" /></td>
  </tr>

  <tr>
    <td class="Fields" style="text-align: right"><label for="specialisation">Specialisation <span class="requiredField">*</span></label></td>
    <td><select name="specialisation" id="specialisation">
    </select></td>
  </tr>
  <tr>
    <td class="Fields" style="text-align: right"><label for="email">Email Adress<span class="requiredField">*</span></label></td>
    <td><input type="email" name="email" id="email" /></td>
</td>
  </tr>
  <tr>
    <td class="Fields" style="text-align: right"><label for="username">User Name<span class="requiredField">*</span></label></td>
    <td><input type="text" name="username" id="username" /></td>
</td>
  </tr>
  <tr>
    <td class="Fields" style="text-align: right"><label for="password">Password<span class="requiredField">*</span></label></td>
    <td><input type="password" name="password" id="password" /></td>
</td>
  </tr>
  <tr>
    <td class="Fields" style="text-align: right"><label for="password2">Re_Password<span class="requiredField">*</span></label></td>
    <td><input type="password" name="password2" id="password2" /></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td><input type="submit" name="register" id="register" value="Register" /></td>
  </tr>
  </form>
</table>

</body>
</html> 
```

# 注册进程.php

```
<?php
  require_once('config.php'); 

  if(isset($_POST['register']))
{
  if(! get_magic_quotes_gpc() )
  {
   $firstname = addslashes ($_POST['firstname']);
   $lastname = addslashes ($_POST['lastname']);
   $birthdate = addslashes ($_POST['birthdate']);
   $phonenumber = addslashes ($_POST['phonenumber']);
   $genderGroup = addslashes ($_POST['genderGroup']);
   $country = addslashes ($_POST['country']);
   $adress = addslashes ($_POST['adress']);
   $specialisation = addslashes ($_POST['specialisation']);
   $email = addslashes ($_POST['email']);
   $password2 = addslashes ($_POST['password2']);
   $username = addslashes ($_POST['username']);
   $password = addslashes ($_POST['password']);
   $password2 = addslashes ($_POST['password2']);
  }
  else
  {
   $firstname = $_POST['firstname'];
   $lastname = $_POST['lastname'];
   $birthdate = $_POST['birthdate'];
   $phonenumber = $_POST['phonenumber'];
   $genderGroup = $_POST['genderGroup'];
   $country = $_POST['country'];
   $adress = $_POST['adress'];
   $specialisation = $_POST['specialisation'];
   $email = $_POST['email'];
   $username = $_POST['username'];
   $password = $_POST['password'];
   $password2 = $_POST['password2'];

  }

  $sql = "INSERT INTO users ".
       "(firstname,lastname, birthdate, phonenumber, gender, country, localadress, specialisation, email, username, password, password2, joindate) ".      "VALUES('$firstname','$lastname','$birthdate','$phonenumber','$genderGroup','$country','$adress','$specialisation','$email','$username','$password','$password2', NOW())";

  $retval = mysql_query( $sql, $conn );
  if(! $retval )
  {
   die('Could not enter data: ' . mysql_error());
  }
  echo "Entered data successfully\n";

}
  mysql_close($conn);
?> 
```

# 登录表单.php

```
 <?php require_once('Connections/conn.php'); ?>
        <?php
        if (!function_exists("GetSQLValueString")) {
        function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
        {
          if (PHP_VERSION < 6) {
            $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
          }

          $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

          switch ($theType) {
            case "text":
              $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
              break;    
            case "long":
            case "int":
              $theValue = ($theValue != "") ? intval($theValue) : "NULL";
              break;
            case "double":
              $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
              break;
            case "date":
              $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
              break;
            case "defined":
              $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
              break;
          }
          return $theValue;
        }
        }
        ?>
        <?php
        // *** Validate request to login to this site.
        if (!isset($_SESSION)) {
          session_start();
        }

        $loginFormAction = $_SERVER['PHP_SELF'];
        if (isset($_GET['accesscheck'])) {
          $_SESSION['PrevUrl'] = $_GET['accesscheck'];
        }

        if (isset($_POST['username'])) {
          $loginUsername=$_POST['username'];
          $password=$_POST['password'];
          $MM_fldUserAuthorization = "";
          $MM_redirectLoginSuccess = "profileForm.php";
          $MM_redirectLoginFailed = "registerForm.php";
          $MM_redirecttoReferrer = false;
          mysql_select_db($database_conn, $conn);

          $LoginRS__query=sprintf("SELECT username, password FROM users WHERE username=%s AND password=%s",
            GetSQLValueString($loginUsername, "text"), GetSQLValueString($password, "text")); 

          $LoginRS = mysql_query($LoginRS__query, $conn) or die(mysql_error());
          $loginFoundUser = mysql_num_rows($LoginRS);
          if ($loginFoundUser) {
             $loginStrGroup = "";

            if (PHP_VERSION >= 5.1) {session_regenerate_id(true);} else {session_regenerate_id();}
            //declare two session variables and assign them
            $_SESSION['MM_Username'] = $loginUsername;
            $_SESSION['MM_UserGroup'] = $loginStrGroup;       

            if (isset($_SESSION['PrevUrl']) && false) {
              $MM_redirectLoginSuccess = $_SESSION['PrevUrl'];  
            }
            header("Location: " . $MM_redirectLoginSuccess );
          }
          else {
            header("Location: ". $MM_redirectLoginFailed );
          }
        }
        ?>
        <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
        <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Untitled Document</title>
        </head>
        <!--link CSS-->
        <link href="style/stylesheet.css" rel="stylesheet" type="text/css" />

        <body>
        <!--<?php require_once('header.php'); ?>-->
              <div  id="loginForm"><table width="250" border="0" align="right">
          <form id="loginForm" name="loginForm" method="POST" action="<?php echo 

$loginFormAction; ?>">
            <tr>
              <td><label for="username">User Name</label></td>
              <td><input type="text" name="username" id="username" /></td>
            </tr>
            <tr>
              <td><label for="password">Password</label></td>
              <td><input type="text" name="password" id="password" /></td>
            </tr>
            <tr>
              <td>&nbsp;</td>
              <td bgcolor="#FFFFFF"><input type="submit" name="login" id="login" value="Log In" />
                <a href="registerForm.php"><strong> Register</strong></a></td>
            </tr>
          </form>
        </table> 
        </div>
        <?php require_once('footer.php'); ?>
        </body>
        </html> 
```

# profileForm.php

个人资料页

```
<body>

<?php require_once('header.php'); ?>

    <?php
    $con = mysql_connect("localhost","root","root");
    if(!$con)
    {
    die('Could not connect: '.mysql_error());
    }
    mysql_select_db("testregister",$con);

    $username =(isset($_POST['username']));

    $result =mysql_query("Select * from users");

    while ($row=mysql_fetch_array($result))
    {
    echo "<table border='0'>
    <tr>
    <td> First Name: </td>
    <td>" .$row['firstname'] ." </td>
    </tr>
    <tr>
    <td> Last Name: </td>
    <td>" .$row['lastname'] ." </td>
    </tr>

    <tr>
    <td> Birth Date: </td>
    <td>".$row['birthdate'] ." </td>
    </tr>

    <tr>
    <td> Phone Number: </td>
    <td> ".$row['phonenumber'] ." </td>
    </tr>

    <tr>
    <td> Gender: </td>
    <td> ".$row['gender'] ." </td>
    </tr>

    <tr>
    <td> Country: </td>
    <td>".$row['country'] ."</td>
    </tr>

    <tr>
    <td> Specialization: </td>
    <td>".$row['specialisation'] ."</td>
    </tr>

    <tr>
    <td> Email: </td>
    <td>".$row['email'] ."</td>
    </tr>

    <tr>
    <td> User Name: </td>
    <td>".$row['username'] ."</td>
    </tr>

    <tr>
    <td> Join Date: </td>
    <td>".$row['joindate'] ."</td>
    </tr>";
    }
    echo "</table>";

    mysql_close ($con);
    ?>
    <html>
    <body>
    Login Successful
    <p><a href="logout.php\">Click here to logout!</a></p>
    </body>
    </html>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:29:50.480

您已用于`$_POST['username']`获取用户名。它行不通。

您不能跨两个页面传递 $_POST 变量。您必须使用会话并将登录的用户名传递到会话变量中，然后在您的个人资料页面中调用它。

有关会话的更多信息，请参阅[此](http://www.tizag.com/phpT/phpsessions.php)

也使用 `$result =mysql_query("Select * from users WHERE username='$username'");`代替`$result =mysql_query("Select * from users");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T20:33:46.547

在`registerprocess.php`

```
session_start() 
$_SESSION['username'] = $username; 
```

前

```
$sql = "INSERT INTO users ". 
```

并在中`loginForm.php`，将您的 sql 查询更改为我的

```
$user = $_SESSION['username'];
$result =mysql_query("Select * from users where username=".$user.""); 
```

类似的东西，这是逻辑，而不是确切的代码...... HTH

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T20:39:57.987

如果您的意思是，如何仅选择从数据库登录的用户，请执行以下操作：

在登录文件`loginForm`上，创建一个保存用户标识或用户名的会话

```
$_SESSION['username'] = $loginUsername; 
```

我可以看到您已经创建了一个名为“MM_Username”的会话变量，因此您可以使用它。我建议使用行的 id 而不是用户名。

然后，`profileForm`只需选择与用户名与查询匹配的行：

```
$the_query = mysql_query(sprintf("SELECT * FROM users WHERE username='%s'",$_SESSION["MM_Username"])); 
```

就是这样，记住数据库调用中的安全性！但这是另一个话题。祝你好运！

（记得先打电话`session_start()`！）

`session_start()`“激活”会话的使用并获取会话信息。所以在开始使用任何 $_SESSION 之前调用它很重要

`$_SESSION`是一个可以在任何 php 文件中找到的全局变量，`$_SESSION["MM_Username"]`存在于所有 php 文件中，因此您可以在`profileForm`for 选择该特定用户名时使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-20T20:27:20.180

我建议使用 mysqli 而不是 mysql。mysql 已被弃用并且不会持续很长时间，而 mysqli 是 mysql 的现代版本。更多信息：[这里](http://php.net/manual/en/mysql.php)

# javascript - 哪些日期格式是符合 IETF 的 RFC 2822 时间戳？

> ID：14914739
> 
> 赞同：15
> 
> 时间：2013-02-16T20:23:15.717
> 
> 标签：javascript, date, datetime, rfc, rfc2822

我需要在 JavaScript 中解析日期。格式是

> [2 位日]/[2 位月]/[4 位年] [2 位小时（24 模式）]：[2 位分钟]

例如，`16/02/2013 21:00`

但如果我这样做`new Date('16/02/2013 21:00').toString()`，它会给`'Wed Apr 02 2014 21:00:00 GMT+0200 (Hora de verano romance)'`。

我想那是因为我的日期不遵循 IETF RFC 2822 日期和时间规范。然后，我应该转换我的字符串，并且我想将它转换为最相似的兼容格式（因为它应该更容易转换）。但是[https://www.rfc-editor.org/rfc/rfc2822#page-14](https://www.rfc-editor.org/rfc/rfc2822#page-14)很难理解，所以不知道哪种格式最相似。

是否有包含允许格式示例的列表？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-24T23:31:14.390

[MSDN](http://msdn.microsoft.com/en-us/library/ie/ff743760)有几个有效日期格式的示例：

```
document.writeln((new Date("2010")).toUTCString()); 

document.writeln((new Date("2010-06")).toUTCString());

document.writeln((new Date("2010-06-09")).toUTCString());

 // Specifies Z, which indicates UTC time.
document.writeln((new Date("2010-06-09T15:20:00Z")).toUTCString());

 // Specifies -07:00 offset, which is equivalent to Pacific Daylight time.
document.writeln((new Date("2010-06-09T15:20:00-07:00")).toGMTString());

// Specifies a non-ISO Long date.
document.writeln((new Date("June 9, 2010")).toUTCString());

// Specifies a non-ISO Long date.
document.writeln((new Date("2010 June 9")).toUTCString());

// Specifies a non-ISO Short date and time.
document.writeln((new Date("6/9/2010 3:20 pm")).toUTCString());

// Output:
// Fri, 1 Jan 2010 00:00:00 UTC
// Tue, 1 Jun 2010 00:00:00 UTC
// Wed, 9 Jun 2010 00:00:00 UTC
// Wed, 9 Jun 2010 15:20:00 UTC
// Wed, 9 Jun 2010 22:20:00 UTC
// Wed, 9 Jun 2010 07:00:00 UTC
// Wed, 9 Jun 2010 07:00:00 UTC
// Wed, 9 Jun 2010 22:20:00 UTC 
```

## 陷阱

[还有一个跨浏览器不一致](http://dygraphs.com/date-formats.html)的矩阵。

**参考**

*   [相同的标记：编写跨浏览器代码 – IEBlog](https://blogs.msdn.microsoft.com/ie/2010/04/14/same-markup-writing-cross-browser-code/)

*   [并行加载 Javascript 文件 – Kristoffer 的花絮](https://blogs.msdn.microsoft.com/kristoffer/2006/12/22/loading-javascript-files-in-parallel/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-17T06:07:33.317

这个问题似乎在问“ *ECMAScript 实现需要解析哪些格式*”。

在 ECMAScript Ed 5 (2011) 之前，解析完全依赖于实现。ECMAScript 实现需要解析的格式可以概括为：

1.  在 ECMAScript ed 5 (2011) 中引入的称为“[日期时间字符串格式](http://ecma-international.org/ecma-262/9.0/#sec-date-time-string-format)”的 ISO 8601 扩展格式的单个（尽管略有修改）版本。它与 ISO 8601 的不同之处在于仅日期形式被视为 UTC，而不是本地，并且时区偏移量必须在小时和分钟之间有一个冒号。
2.  由实现自己的[*toString*](http://ecma-international.org/ecma-262/9.0/#sec-date.prototype.tostring)方法生成的格式，该方法在 ECMAScript 2018 中标准化
3.  由实现自己的[*toUTCString*](http://ecma-international.org/ecma-262/9.0/#sec-date.prototype.tostring)方法生成的格式，也在 ECMAScript 2018 中标准化

任何其他格式的解析仍然依赖于实现并且存在差异，因此一般规则是“不要使用内置解析器”。

# c# - 为什么视觉工作室在这里没有解决列表？

> ID：14914753
> 
> 赞同：1
> 
> 时间：2013-02-16T20:25:14.397
> 
> 标签：c#, list, compiler-errors

恐怕我对 C# 有点陌生，所以我只是从他的文档中复制了一些代码。这是使用 MailChimp 亚马逊简单电子邮件服务 API

```
var api = new SesApi(yourMailChimpKey);
var result = api.SendEmail("Subject for test email",
     "<p>Body of HTML email</p>",
     "Body of plain text email",
     new EmailAddress("Sender name", "sender@nogginbox.co.uk"),
     new List { new EmailAddress("Recipient", "recipient@nogginbox.co.uk") },
     tags: new List { "test" } //Problems are on this line, and the one above it
); 
```

问题是visual studio（我使用的是.net 4.5）似乎无法解决“new List {...}”部分

我错过了一个图书馆，还是有一种我错过的更新方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:05:48.557

问题是没有 type `List`。只有 generic `List<T>`，这很可能是文档要使用的。（非通用版本是`ArrayList`，但你真的不应该使用它。）

这意味着您需要在代码中指定列表的类型：

```
 new List<EmailAddress> { new EmailAddress(…) }
 new List<string> { "test" } 
```

（这假设您`using System.Collections.Generic;`在代码文件的顶部有。）

假设 API 接受任何集合，更简单的解决方案可能是使用数组：

```
 new[] { new EmailAddress(…) }
 new[] { "test" } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T20:36:59.137

请注意，“使用 System.Collections”与“使用 System.Collections.Generics”之间存在差异。后者要求您指定列表类型，例如“ `new List<EmailAddress> { new EmailAddress ... }`”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T20:58:17.720

我认为你有几个问题。

首先，`using System.Collections.Generic;`正如 Moshe 所指出的，您需要在文件顶部添加一个指令。

然后，尝试在列表声明后加上括号，如下例所示：

```
private void Form1_Load( object sender, EventArgs e )
{
    ListParam( new List<string>() { "Item 1", "Item 2" } );
}

private void ListParam( List<string> mylist )
{
    MessageBox.Show( "List count = " + mylist.Count );
} 
```

# c# - gles2 动态壁纸转换为 c# (xamarin) 符合错误“...mono.android.TypeManager 无法应用于

> ID：14914754
> 
> 赞同：1
> 
> 时间：2013-02-16T20:25:16.687
> 
> 标签：c#, android, opengl-es, live-wallpaper, xamarin

我正在尝试在 c# 中使用 xamarin 编写一个 android 动态壁纸。
为此，我将此处找到的 GLWallPaperService 代码转换为 c#： http:
[//www.learnopengles.com/how-to-use-opengl-es-2-in-an-android-live-wallpaper/](http://www.learnopengles.com/how-to-use-opengl-es-2-in-an-android-live-wallpaper/)

（直接跳转到java实现在这里：[https](https://github.com/learnopengles/Learn-OpenGLES-Tutorials/tree/master/android/AndroidOpenGLESLessons/src/com/learnopengles/android/livewallpaper) ://github.com/learnopengles/Learn-OpenGLES-Tutorials/tree/master/android/AndroidOpenGLESLessons/src/com/learnopengles/android/livewallpaper ）

编译后，我得到错误：

> Mono.android.TypeManager 中的 Activate(java.lang.String,java.lang.String,java.lang.Object,java.lang.Object[]) 无法应用于 (java.lang.String,java.lang.String ,com.[redacted].OpenGLES2WallpaperService.OpenGLES2WallpaperService_OpenGLES2Engine,java.lang.Object[]) mono.android.TypeManager.Activate ("com.[redacted].OpenGLES2WallpaperService/OpenGLES2Engine, GameUtilClassLibrary, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null", "com.[redacted].WallpaperServiceUtil.OpenGLES2WallpaperService, GameUtilClassLibrary, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null", this, new java.lang.Object[] { OpenGLES2WallpaperService.this }); D:\[编辑]\obj\Debug\android\src\com\[编辑]\wallpaperserviceutil\OpenGLES2WallpaperService.java

这是我的 c# 实现...抱歉长度：

```
public abstract class GLWallpaperService : WallpaperService
{
    public class GLEngine : Engine
    {
        private readonly GLWallpaperService outerInstance;

        public GLEngine(GLWallpaperService outerInstance) : base(outerInstance)
        {
            this.outerInstance = outerInstance;
        }

        internal class WallpaperGLSurfaceView : GLSurfaceView
        {
            private readonly GLWallpaperService.GLEngine outerInstance;
            ISurfaceHolder _surfaceHolder;

            internal WallpaperGLSurfaceView(GLWallpaperService.GLEngine outerInstance, Context context, ISurfaceHolder surfaceHolder)
                : base(context)
            {
                this.outerInstance = outerInstance;
                _surfaceHolder = surfaceHolder;
            }

            public override ISurfaceHolder Holder
            {
                get
                {
                    return _surfaceHolder;
                }
            }

            public virtual void OnDestroy()
            {
                base.OnDetachedFromWindow();
            }
        }

        private WallpaperGLSurfaceView glSurfaceView;
        private bool rendererHasBeenSet;

        public override void OnCreate(ISurfaceHolder surfaceHolder)
        {
            base.OnCreate(surfaceHolder);

            glSurfaceView = new WallpaperGLSurfaceView(this, outerInstance, surfaceHolder);
        }

        public override void OnVisibilityChanged(bool visible)
        {
            base.OnVisibilityChanged(visible);

            if (rendererHasBeenSet)
            {
                if (visible)
                {
                    glSurfaceView.OnResume();
                }
                else
                {
                    if (!IsPreview)
                    {
                        glSurfaceView.OnPause();
                    }
                }
            }
        }

        public override void OnDestroy()
        {
            base.OnDestroy();
            glSurfaceView.OnDestroy();
        }

        protected internal virtual Android.Opengl.GLSurfaceView.IRenderer NewRenderer//was just Renderer
        {
            set
            {
                glSurfaceView.SetRenderer(value);
                rendererHasBeenSet = true;
            }
        }

        protected internal virtual int EGLContextClientVersion
        {
            set
            {
                glSurfaceView.SetEGLContextClientVersion(value);
            }
        }
    }
}

public abstract class OpenGLES2WallpaperService : GLWallpaperService
{
    public override Engine OnCreateEngine()
    {
        return new OpenGLES2Engine(this);
    }

    internal class OpenGLES2Engine : GLWallpaperService.GLEngine
    {
        private readonly OpenGLES2WallpaperService outerInstance;

        public OpenGLES2Engine(OpenGLES2WallpaperService outerInstance)
            : base(outerInstance)
        {
            this.outerInstance = outerInstance;
        }

        public override void OnCreate(ISurfaceHolder surfaceHolder)
        {
            base.OnCreate(surfaceHolder);

            // Check if the system supports OpenGL ES 2.0.
            //JAVA TO C# CONVERTER WARNING: The original Java variable was marked 'final':
            //ORIGINAL LINE: final android.app.ActivityManager activityManager = (android.app.ActivityManager) getSystemService(android.content.Context.ACTIVITY_SERVICE);
            ActivityManager activityManager = (ActivityManager)outerInstance.GetSystemService(Context.ActivityService);
            //JAVA TO C# CONVERTER WARNING: The original Java variable was marked 'final':
            //ORIGINAL LINE: final android.content.pm.ConfigurationInfo configurationInfo = activityManager.getDeviceConfigurationInfo();
            ConfigurationInfo configurationInfo = activityManager.DeviceConfigurationInfo;
            //JAVA TO C# CONVERTER WARNING: The original Java variable was marked 'final':
            //ORIGINAL LINE: final boolean supportsEs2 = configurationInfo.reqGlEsVersion >= 0x20000;
            bool supportsEs2 = configurationInfo.ReqGlEsVersion >= 0x20000;

            if (supportsEs2)
            {
                // Request an OpenGL ES 2.0 compatible context.
                EGLContextClientVersion = 2;

                // Set the renderer to our user-defined renderer.
                NewRenderer = outerInstance.NewRenderer;//was just Renderer
            }
            else
            {
                // This is where you could create an OpenGL ES 1.x compatible
                // renderer if you wanted to support both ES 1 and ES 2.
                return;
            }
        }
    }

    internal abstract Android.Opengl.GLSurfaceView.IRenderer NewRenderer { get; }
}

public class LessonThreeWallpaperService : OpenGLES2WallpaperService
{
    internal override Android.Opengl.GLSurfaceView.IRenderer NewRenderer
    {
        get
        {
            return new LessonThreeRenderer(); // is a GLSurfaceView.IRenderer
        }
    }
} 
```

我的目标是版本 sdk 版本 8 并使用 Visual Studio 2012。
感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:13:02.420

这是我们的 Android Callable Wrapper 生成器代码中的一个错误：我们没有正确支持 C# 中的“中间”非静态内部类。具体来说，`GLWallpaperService.Engine`是正确生成的，但`OpenGLES2WallpaperService.OpenGLES2Engine`不是。

[请在bugzilla.xamarin.com](https://bugzilla.xamarin.com)提交错误。

# javascript - jQuery Mobile 禁用某些标签的增强功能？

> ID：14914756
> 
> 赞同：3
> 
> 时间：2013-02-16T20:25:31.383
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我不想要`<a>`标签的样式。我找到了这样的线程[如何“关闭”jQuery Mobile 的 <select> 下拉样式？](https://stackoverflow.com/questions/4348757/how-to-turn-off-jquery-mobiles-styling-of-select-drop-downs)但我不想添加`data-enhance=false`到我拥有的每个锚点上。我也希望`linkBindingEnabled`能够工作（来自[http://jquerymobile.com/demos/1.2.0/docs/api/globalconfig.html](http://jquerymobile.com/demos/1.2.0/docs/api/globalconfig.html)），因为它不会向`<a>`标签添加自定义类。

我可以删除 CSS 文件中的定义，但我更喜欢以编程方式执行此操作。例如，我注释掉`.ui-body-c .ui-link`（默认链接），但我在页脚中的链接仍然得到增强。而且我敢肯定还有其他小案例，我不想让它变得混乱（尽管有时这是唯一的选择）

基本上，有没有办法禁用元素“选择器”的增强功能？而不是手动添加`data-enhance=false`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T20:56:23.853

禁用标记增强的方法很少，**`jQuery Mobile`**但在您的情况下，只有一个单行解决方案：

```
$(document).on('pagebeforeshow', '#index', function(){       
   $('a').removeClass('ui-link');
}); 
```

**`jsFiddle`**例如：http: [//jsfiddle.net/Gajotres/L4KUT/](http://jsfiddle.net/Gajotres/L4KUT/)

其他解决方案可以在我的其他**[文章](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**中找到，透明的是我的个人博客。或者在**[这里](https://stackoverflow.com/a/14550417/1848600)**找到它。搜索名为： **标记增强预防方法**的章节。

在那里您会找到如何在选择器级别禁用它的答案，不幸的是它仅适用于本机表单元素，并且标签不是本机表单元素：

```
$(document).bind('mobileinit',function(){
     $.mobile.page.prototype.options.keepNative = "select, input";
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-14T07:43:52.103

要禁用选择组件的增强，您可以添加`data-role='none'`，在 jQuery Mobile 1.4.2 上测试。

见[http://jsfiddle.net/zLZzA/1/](http://jsfiddle.net/zLZzA/1/)

# c# - 将数据从 C++ 传递到 C# - 映射文件与 CLI+UnmanagedMemoryStream

> ID：14914757
> 
> 赞同：4
> 
> 时间：2013-02-16T20:25:40.547
> 
> 标签：c#, c++-cli, unmanaged-memory, map-files

我需要经常将数据从 C++ 传递到 C#。它应该**尽可能快，**因为我正在编写超低延迟交易应用程序。

我有纯C++项目（稍后会移植到Linux）。我需要将数据从它传递到我的 C# 项目。我总是需要传递相同的结构（如果这很重要）。

结构如下： Ticker = "MSFT" Price = "30" Volume = "10" Side = "Buy"

我想有两种选择：

*   编写 C++-CLI 包装器，它将 UnmanagedMemoryStream 从 C++ 传递到 C#
*   使用内存映射文件

会是什么：

*   快点
*   更容易实施
*   更容易移植到 Linux 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T22:06:35.073

Mono 根本不支持使用混合模式 C++/CLI 程序集（请参阅[此处](http://www.mono-project.com/CPlusPlus)）。Mono 仅支持纯 CLR C++ 程序集。因此，如果您计划移植到 Linux，您应该使用
其他可能性，例如内存映射文件，或者 Matthew 建议使用 P/Invoke（Mono 支持，尽管它需要[一些额外的工作）。](http://www.mono-project.com/PInvoke)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T20:34:24.237

内存映射文件既快速又相对容易使用。我使用它们将大量 ECG 数据从 C# 应用程序传输到 C++ 应用程序。我还使用它们来传输较小的内存块（例如结构）。*它与*进程间数据传输的速度差不多。（您可能需要使用信号量等同步机制来控制从每一端读取/写入数据。）

但是，我不知道它们是否容易移植到 Linux - 但我知道 Linux 支持某种 MMF，所以我打赌它不会太难。但我不能肯定地说。

注意：如果您想将数据传输到在进程内运行的 DLL 中的 C++ 函数，那是完全不同的事情，您可以使用 P/Invoke 来执行此操作。使用 P/Invoke 将比使用 MMF 快得多（假设数据可以由编组器固定并且不需要复制）。一般来说，使用 P/Invoke，您最终可以只传递一个指向 C++ 函数的指针。

# wpf - 在不同视图之间切换，遵循 MVVM 模式

> ID：14914760
> 
> 赞同：2
> 
> 时间：2013-02-16T20:26:22.940
> 
> 标签：wpf, mvvm

我正在寻找在不同视图之间切换的正确方法。我的场景类似于 Windows 8 上的 Widnows Explorer，您可以在其中切换“超大图标”、“小图标”、“详细信息”等。在 Windows 8 中，用户可以通过资源管理器的“查看”功能区进行操作（您还可以在 XP 和 7 中更改视图）。

就我而言，我有一个朋友列表，我想让用户在“小”、“大”和“细节”视图之间切换。

假设我的视图模型有一个朋友列表：

```
public class FriendVM {
    public name { get; set; }
    public smallImage { get; set; }
    public largeImage { get; set; }
};

public class MainVM : INotifyPropertyChanged {
    public ObservableCollection<FriendVM> friends { get; set; }

    private string m_viewMode
    public string viewMode { 
        get { return m_viewMode; }
        set { m_viewMode=value; this.PropertyChanged( new PropertyChangedEventArags("viewMode") ); }
    }
} 
```

在我看来，我有一个功能区（用户可以在其上更改 viewMode）、一个标题（显示有关用户的详细信息）和一个朋友列表。取决于视图，我想显示：

*   当 viewMode = "details" 我有一个 ListView，带有一个 GridView。
*   当 viewMode = "small" 我有一个 ListView，ItemsPanel 是一个 WrapPanel，我将图像绑定到 smallImage
*   当 viewMode = "large" 我有一个带有 WrapPanel 的 ListView，使用 largeImage 属性。

这是我的 XML 的样子（简化）：

```
<Window x:Class="friends.MainWindow" ... xmlns:f="clr-namespace:friends" ...>
    <Window.DataContext>
        <f:MainVM />
    <Window.DataContext>

    <Window.Resources>
        <ControlTemplate x:Key="details">
            <ListView ItemsSource="{Binding Path=friends}">
                <ListView.View>
                    <GridView>
                        ...
                    </GridView>
            </ListView.View>
        </ControlTemplate>

        <ControlTemplate x:Key="small">
            <ListView ItemsSource="{Binding Path=friends}">
                <ListView.ItemsPanel><WrapPanel Orientation="Horizontal" />
            </ListView>
            <ListView.ItemTemplate><DataTemplate>
                <Image Source={Binding smallPicture} Width="32" Height="32" />
            </DataTemplate></ListView.ItemTemplate>
        </ControlTemplate>

        <ControlTemplate x:Key="large">
            <ListView ItemsSource="{Binding Path=friends}">
                <ListView.ItemsPanel><WrapPanel Orientation="Horizontal" />
            </ListView>
            <ListView.ItemTemplate><DataTemplate>
                <StackPanel>
                    <Image Source="{Binding largePicture}" Width="200" Height="200" />
                    <TextBlock Text="{Binding name}" />
                </StackPanel>
            </DataTemplate></ListView.ItemTemplate>
        </ControlTemplate>

    </Window.Resource>

    <DockPanel LastChildFill="True">

        <Ribbon ...>
            ...
        </Ribbon>

        <StackPanel>
            ... some header stuff
        </StackPanel>

        <ContentControl x:Name="friendList" Content="{Binding friends}" ?????? />
    </DockPanel>

</Window> 
```

所以，我的问题是我该怎么办？？？？？？区域。现在，我已经`Template="{StaticResource small}"`并且它正在工作。此外，使用后面的代码，我可以将模板更改为任何其他资源模板（使用 FindResource）。但是，我对这个解决方案并不满意，因为我觉得它与 MVVM 模式不符。如果它是“项目”（列表框项目、选项卡项目等），那么我可以使用数据模板，然后使用日期模板选择器。但由于这是一个 ContentControl，而且 ControlTemplateSelector 似乎完全脱离了设计，我不知道该怎么办。

或者，如果我可以将朋友列表“按原样”放在树中，那么也许使用数据模板（具有 TargetType=f:FriendList）我可以让它工作，但我不想实例化另一个朋友列表。DataContext 元素中已经实例化了一个实例。

# html - 如何将此文本下移

> ID：14914763
> 
> 赞同：-3
> 
> 时间：2013-02-16T20:26:40.243
> 
> 标签：html, css

如果我添加一个中断标签，我无法让这个文本完全垂直居中对齐，它会将它一直发送到红色容器的底部。

![**请看图片：**](../Images/5f71754146af799079f05ef42be5ae45.png)

```
<div id="stafftop"><span style="color:white"><strong>Hotel Administrators</strong></div>
<div id="mainmid"> <hr />
<br><br> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T20:29:27.997

尝试给你`DIV`的制服`height`和`line-height`：

```
#stafftop {
     height: 30px;
     line-height: 30px;
} 
```

# node.js - 在 socket.io 上设置高关闭超时是否安全？

> ID：14914768
> 
> 赞同：9
> 
> 时间：2013-02-16T20:27:22.090
> 
> 标签：node.js, timeout, socket.io

我有一个需要不断连接用户的 Web 应用程序。默认情况下，socket.io 会在 60 秒后断开连接。我已经打开了“重新连接”，所以它基本上每分钟都会关闭和重新打开连接。这可能会导致我连接的客户端的提要/通知出现问题。将此超时设置为 10 分钟或可能更高是否安全？现在这么低有什么原因吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T08:13:59.077

我的猜测是您可能误解了`'close timeout'`配置。它不会导致连接在 60 秒后关闭。（如果客户端不断重新连接，心跳将毫无意义）。

如果客户端断开连接，`close timeout`是服务器在释放与该连接关联的资源之前等待的时间量。本质上，这允许有间歇性连接问题的客户端在服务器忘记它们之前尝试重新连接。设置`close timeout`为十分钟可能是个坏主意，因为它会占用服务器资源。

如果您的客户实际上每 60 秒断开一次，那么就像 samjm 所说的那样，还有其他问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T07:13:58.127

我不相信您的套接字会在 60 秒后断开连接。我会调查为什么会发生这种情况。正确握手后，套接字应该心跳并无限期地保持打开状态（禁止网络问题超出您的控制），直到客户端或服务器关闭连接，这绝对是我的经验。

您的连接实际上正在关闭的事实听起来可能没有正确握手，或者没有收到心跳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-15T00:31:12.893

您可能已经知道这一点，但是您的套接字可能会在 60 秒后断开连接，因为您没有将心跳（“2::”）发送回服务器。

这是一些与[websocket 客户端模块](https://pypi.python.org/pypi/websocket-client/ "websocket 客户端模块")一起使用的 Python 代码。

```
# on_message handles messages from the server
def on_message(ws, message):
    if message[:3] == '2::':
        ws.send('2::') 
```

# asp.net - 在文本框中显示数组值

> ID：14914769
> 
> 赞同：0
> 
> 时间：2013-02-16T20:27:41.940
> 
> 标签：asp.net, vb.net, visual-studio

是否可以在文本框中显示数组？

我正在开发一个用于类的 ASP.NET 计算器，用户将单击一个按钮，该按钮会将数字存储在一个数组中并将其显示在文本框中。

这是我到目前为止所拥有的，但它一直给我一个错误

```
 ArrayNum.Add("1") ' Storing value in the Array List
    DisplayTextBox.Text += ArrayNum(1) 
```

我想将用户输入的任何内容读取为字符串，然后让计算器对其进行数学评估

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:58:53.243

您需要获取添加到 ArrayNum 的最后一个数字：

```
ArrayNum.Add("1")
DisplayTextBox.Text &= ArrayNum(ArrayNum.Count - 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T23:26:25.427

您收到错误是因为数组从 POSITION 0 开始，因此语句...

```
ArrayNum.Count - 1 
```

实际上是数组中元素总数的位置。

你得到错误的原因是因为......当你的代码状态......

```
ArrayNum.Add("1") ' Storing value in the Array List 
```

您正在做的是将值 1 添加到对象 ArrayNum

你的代码在哪里......

```
DisplayTextBox.Text += ArrayNum(1) 
```

您尝试做的是在位置（1）显示元素，这在现实中是第二个元素，因为数组从零开始。

如果您的代码说...

```
DisplayTextBox.Text += ArrayNum(0) 
```

然后你的错误就会消失。

# c# - 如何计算从现在到确切日期时间的秒数？

> ID：14914771
> 
> 赞同：-5
> 
> 时间：2013-02-16T20:27:51.977
> 
> 标签：c#, datetime

我想计算从现在到另一个日期时间的秒数，例如明天上午 8:00。我找不到任何东西（或者我没有使用好的关键字 - 而且我不知道另一个！）

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-16T20:30:28.920

```
TimeSpan t = YourDateTime - DateTime.Now;
t.TotalSeconds; //is what you're looking for 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T20:31:25.450

```
var tomorrow8AM = DateTime.Now.Date.AddDays(1).AddHours(8);
var difference = tomorrow8AM - myDateTime;
var inSeconds = different.TotalSeconds; 
```

我建议您阅读 MSDN 文档[`DateTime`](http://msdn.microsoft.com/en-us/library/03ybds8y.aspx)和[`TimeSpan`](http://msdn.microsoft.com/en-us/library/system.timespan.aspx).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T20:49:22.730

这里的 Ahmadali Shafiee 是我为您编写的一个很好的方法，您可以在需要时随时使用您可以随意扩展它，但阅读本文可能会让您更好地了解如何使用此方法返回 TimeSpan

```
public static TimeSpan GetTimeSpan(DateTime startTime, DateTime endTime)
{
    TimeSpan totTime = new TimeSpan();
    startTime = Convert.ToDateTime(startTime.TimeOfDay.ToString());
    endTime = Convert.ToDateTime(endTime.TimeOfDay.ToString());
    totTime = (TimeSpan)(endTime - startTime);
    return totTime;
    // or you can return totTime.TotalSeconds
} 
```

如果你想返回 Total seconds 你也可以改变返回部分，或者你可以重载这个方法并传入一些额外的变量来返回 Total Hours、Total Minutes、Total Seconds 以及 Total Milliseconds 随意摆弄这个代码。

# django - 无法从heroku中删除旧的南方迁移

> ID：14914774
> 
> 赞同：0
> 
> 时间：2013-02-16T20:28:06.483
> 
> 标签：django, heroku, django-south

我在我的 django 应用程序中进行了许多更改，当我在本地工作时，我重置了数据库，删除了迁移并重新设置了南，重新创建了所有内容，并且运行良好。当尝试在 Heroku 中做同样的事情时，在删除数据库后使用：

```
heroku pg:reset DATABASE 
```

并使用以下方法重置南方：

```
heroku run ./manage.py reset south 
```

然后在查看 heroku 迁移列表时使用以下命令推送 Django 应用程序：

```
heroku run ./manage.py migrate --list 
```

我仍然可以看到所有旧的 imgration，尽管它们是空的—— () 中没有 * 所以即使在做之后

```
heroku run python ./manage.py migrate accounts --fake 
```

我仍然遇到迁移错误：

```
DatabaseError at /admin/accounts/userprofile/

****relation "accounts_userprofile" does not exist
LINE 1: SELECT COUNT(*) FROM "accounts_userprofile"**** 
```

我能做些什么来解决它？有没有办法删除heroku中的旧迁移，就像在本地工作时重新开始一样简单？还是他们的任何其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T06:21:26.737

`--fake`当数据库表已经存在并且您不再需要实际迁移真实数据库时使用。由于表不存在，您应该只运行`migrate`没有`--fake`.

# html - 容器填充问题（出现滚动条）

> ID：14914780
> 
> 赞同：0
> 
> 时间：2013-02-16T20:29:05.587
> 
> 标签：html, css

我有以下标记，这一切都是为现代浏览器完成的。我如何修改它以获得与旧浏览器（IE7 等）相同的内容？只有绝对位置可以吗？

```
<style>
  html,
  body {
    height: 100%;
    margin: 0;
  }

  .container {
    box-sizing: border-box;
    height: 100%;
    padding: 15px;
    background: darkgreen;
  }

  .sidebar {
    height: 100%;
    width: 200px;
    background: #bada55;
  }
</style>
<div class="container">
  <div class="sidebar"></div>
</div> 
```

编辑：我希望获得`.container`100% 的窗口高度并且`padding: 15px`没有滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:21:32.500

如果您不显示或不说，那么您所期望的结果确实很难提供帮助，但是您可以对 ie7 使用 css hack，例如使用带有“ `*`”的相同属性，该属性仅适用于 ie7

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T22:07:38.697

您是否尝试过在容器中添加溢出：隐藏？

# java - Java ArrayList：添加原始类型或其包装类：有什么区别？

> ID：14914781
> 
> 赞同：0
> 
> 时间：2013-02-16T20:29:10.387
> 
> 标签：java, arraylist, primitive

想象一下 Java 中的以下 ArrayList：

```
ArrayList<Integer> u = new ArrayList<Integer>(); 
```

我想知道在添加新值作为原始类型或包装类时是否有区别：

```
u.add(new Integer(12));
u.add(12); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T20:33:45.783

`add`由于自动装箱/拆箱，没有区别。实际上不要这样做`new Integer(12)`，`Integer.valueOf(12)`因为它使用轻量级模式并重用已知对象（在 -128、127 范围内）。所以不会创建新对象。

例如有区别`remove`。
因为如果你打算打电话`remove(Object)`，`remove(5)`就会打电话`remove(int index)`，这可能不是你想要的。如果要删除数字或要删除第五个元素，则
应该这样做。`remove((Integer)5)``5``remove(5)`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-16T20:33:13.490

当你做`u.add(12);`编译器重写它`u.add(Integer.valueOf(12));`比`u.add(new Integer(12));` 阅读官方教程[http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html更有效](http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html)

# android - 动画中的倒计时

> ID：14914782
> 
> 赞同：0
> 
> 时间：2013-02-16T20:29:22.210
> 
> 标签：android, countdowntimer

这是我在倒数计时器中使用的代码。

```
mDetector = new GestureDetector(this, new MyGestureDetector());

ImageView iv = (ImageView)findViewById(R.id.imageView1);
iv.setOnTouchListener(new OnTouchListener(){
@Override
public boolean onTouch(View arg0, MotionEvent arg1) {
    mDetector.onTouchEvent(arg1);
    final ImageView iv = (ImageView) findViewById(R.id.imageView1);
    iv.setVisibility(View.GONE);

    new CountDownTimer(3000, 1000) {
        public void onTick(long millisUntilFinished) {
        AnimationDrawable loadingAnimaton;
        loadingAnimation = (AnimationDrawable) ImageView.getBackground();

     }loadingAnimation.start();

        }.start();
    return true;  
}});
}   
} 
```

- 我得到的错误`loadingAnimation.start();`说法是令牌“开始”上的语法错误，此令牌之后需要标识符

将我的倒计时数字设置为图像的任何替代方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:43:03.977

实际上你有 2 个 `start()`电话，而且看起来都错了。

尝试这个

```
 CountDownTimer ct=new CountDownTimer(3000, 1000) {

        public void onTick(long millisUntilFinished) {
        AnimationDrawable loadingAnimaton;
        loadingAnimation = (AnimationDrawable) ImageView.getBackground();
        loadingAnimation.start();
     }

  }
  ct.start(); 
```

# javascript - JSON 到字符串 Javascript

> ID：14914783
> 
> 赞同：0
> 
> 时间：2013-02-16T20:29:23.687
> 
> 标签：javascript, arrays, json, string

下面的代码似乎无法将 JSON 结果连接成字符串，有人知道为什么吗？

```
function wordCloud(filename)
{
    var file = filename;
    var text = " ";
    $.getJSON(file, function(data) {
        $.each(data, function(key, val) {
            text = text.concat(val.toString());
        });
    });
    console.log(text);
 } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:32:58.910

它会执行得很好，只是你必须`console.log`在 get 语句中添加你的，否则，getJSON 代码会异步运行，同时当控件到达 console.log 语句时，`text`它仍然是空的。所以你必须通过以下方式修改你的代码：

```
$.getJSON(file, function(data) {
    $.each(data, function(key, val) {
        text = text.concat(val.toString());
    });
    console.log(text);
}); 
```

# javascript - JavaScript OOP 错误

> ID：14914800
> 
> 赞同：0
> 
> 时间：2013-02-16T20:31:16.360
> 
> 标签：javascript

您好，这是我第一次尝试编写 JavaScript 应用程序，所以我是使用它编写 OOP 代码的新手。

以下代码在控制台中运行，没有任何错误：

```
// Main file for the application
$(document).ready( function()
{
    var app = new application;
    setInterval( app.run, 50 );

});

function application()
{
   var canvas = Raphael(10,0,400,400);
   this.molecule = new molecule( new Vec2(50,50),new Vec2(1,0),canvas );
   this.molecule.update(10);

   this.run = function()
    {

    }
} 
```

但是，这段代码不起作用：

```
// Main file for the application
$(document).ready( function()
{
    var app = new application;
    setInterval( app.run, 50 );

});

function application()
{
   var canvas = Raphael(10,0,400,400);
   this.molecule = new molecule( new Vec2(50,50),new Vec2(1,0),canvas );

   this.run = function()
    {
        this.molecule.update(10);
    }
} 
```

它在控制台中给出以下错误：

```
Uncaught TypeError: Object function molecule( pos,vel,canvas )
    {
        this.radius = 5;
        this.color = "red";

        this.canvas = canvas;

        this.pos = pos;
        this.vel = vel;

        this.circle = canvas.circle( this.pos.x,this.pos.y,this.radius );

        this.circle.attr("fill", this.color );

    } has no method 'update' 
```

这是包含分子对象的源文件。

```
 // This 'class' handles a molecule, including movement and drawing.

    function molecule( pos,vel,canvas )
    {
        this.radius = 5;
        this.color = "red";

        this.canvas = canvas;

        this.pos = pos;
        this.vel = vel;

        this.circle = canvas.circle( this.pos.x,this.pos.y,this.radius );

        this.circle.attr("fill", this.color );

    }

 // Updates the molecule
    molecule.prototype.update = function( deltaTime )
    {
        this.pos += this.vel * deltaTime;
        this.setPosition(this.pos);
    }

    // Accepts a Vec2
    molecule.prototype.setPosition = function( pos )
    {
        this.circle.translate( pos.x-this.pos.x, pos.y-this.pos.y );
    } 
```

对于我发布的大量代码，我感到很抱歉，但我很困惑为什么第一段代码有效，而第二段代码无效。有人可以为我解释一下吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:38:21.013

一个常见的错误，它需要对 JavaScript 有很好的理解才能看到这里发生了什么。问题是这一行：

```
setInterval( app.run, 50 ); 
```

这会导致在*没有适当**上下文*`app.run`的情况下间隔用完时被调用。为确保将其作为其上下文调用，您需要以下内容：*`this`*`run``app``this`

```
setInterval( function() {
    app.run();
}, 50 ); 
```

或使用最新的 JavaScript（仅在非常现代的浏览器中）：

```
setInterval( app.run.bind(app), 50 ); 
```

JavaScript 中函数的`this`上下文取决于函数的调用方式。基本上，它由调用它的对象决定。例如，在 中`app.run()`，该`run`方法被调用`app`并且它将按预期工作。但是，在稍微不同的情况下

```
var fn = app.run;
fn(); 
```

该函数在没有对象上调用，因此`this`不会被设置，导致意外结果。这正是您的情况。解决方案是确保传递一个可以在任何对象上调用的函数，并`run`在正确的对象上调用该函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T20:37:53.153

您已将`run`方法与`app`. 传递一个将它们保持在一起的函数。

```
setTimeout(function() { app.run(); }, 50); 
```

现在`this`in的值`.run()`将成为`app`对象。

* * *

此外，没有必要为每个对象创建一个新`run`方法。`application()`你可以装`run`上`application.prototype`。

```
function application() {
   var canvas = Raphael(10,0,400,400);
   this.molecule = new molecule( new Vec2(50,50),new Vec2(1,0),canvas );
   this.molecule.update(10);
}

application.prototype.run =  function() {
    this.molecule.update(10);
} 
```

* * *

尽管如果您*确实*保留`run`在构造函数中，那么您可以将其关闭在引用该对象的变量上，因此您可以安全地分离它。

```
function application() {
   var canvas = Raphael(10,0,400,400);
   this.molecule = new molecule( new Vec2(50,50),new Vec2(1,0),canvas );
   this.molecule.update(10);

   var self = this;

   this.run = function() {
       self.molecule.update(10);
   }
} 
```

* * *

```
setTimeout(app.run, 50) 
```

# python - 如何让正则表达式分别选择单词

> ID：14914804
> 
> 赞同：1
> 
> 时间：2013-02-16T20:31:38.493
> 
> 标签：python, regex

所以我有这个字符串：

```
sockcooker!~shaz@Rizon-AC7BDF2F.dynamic.dsl.as9105.com !~shaz@ PRIVMSG #Rizon :ohai. New here. registered 10 mins ago, have not got an email. Addy is correct. My email is working fine. 
```

我希望正则表达式找到 !~shaz@ 所以我使用这个 r"!.+@" 但后来它找到了这个

```
!~shaz@Rizon-AC7BDF2F.dynamic.dsl.as9105.com !~shaz@ 
```

我记得。我希望它找到它们作为单独的字母并用某个字母替换它们。如果你能给我任何好的 Python 正则表达式 tuts 对这个有任何帮助，我将不胜感激：D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T20:32:42.787

默认情况下，量词本质上是贪婪的，它们会尽可能多地匹配。这就是为什么你的正则表达式匹配到最后一个`@`。

您可以使用不情愿的量词（在`?`之后添加一个`+`）在第一个停止`@`：

```
r"!.+?@" 
```

或者你也可以使用`negated`字符类，它会在第一个自动停止`@`：

```
r"![^@]+" 
```

选择任何对你来说更容易理解的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T20:32:57.867

您想使用不贪婪的匹配。有两种方法（python 都支持）。后者更灵活：

```
r"![^@]+"
r"!.+?@ 
```

这`?`使得不`.+`贪心，所以它会停在第*一个*“@”而不是最后一个。

# objective-c - NSStrings 大小为 100 的数组

> ID：14914807
> 
> 赞同：-2
> 
> 时间：2013-02-16T20:31:49.310
> 
> 标签：objective-c

开发一个需要将 NSString 数组作为板子的应用程序。首先，我需要一种方法来初始化大小为 100 的 NSArray，然后构建在整个板上添加随机滑槽和梯子的方法。makeChutes/ladders 方法将采用要移动多少空间的参数。我遇到的问题只是初始化 NSStrings 数组，我知道我可以将非可变 NSArray 与可变对象一起使用，但语法有问题。

基本上我想初始化这个：

```
[NSArray arrayWithObjects: @"1", @"2", @"3", @"4", @"5", @"6", @"7", @"8", @"9", nil] 
```

但是有 100 个字符串并采用如下方法的形式：

```
 -(id)initBoard{
        for(int i =0; i<100;i++){
            _board[i] = @"| |";
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:36:15.243

尝试

```
-(id)initBoard
{
    NSMutableArray *mutableArray = [NSMutableArray arrayWithCapacity:100];
    for (int i = 0; i < 100; i++)
    {
        [mutableArray addObject:@"| |"];
    }
    _board = mutableArray;
} 
```

# jsoup - JSoup java.nio.charset.UnsupportedCharsetException

> ID：14914810
> 
> 赞同：0
> 
> 时间：2013-02-16T20:32:02.177
> 
> 标签：jsoup

尝试解析链接时，我在日志文件中看到以下异常。

```
java.nio.charset.UnsupportedCharsetException: uft-8
at java.nio.charset.Charset.forName(Charset.java:524)
at org.jsoup.helper.DataUtil.parseByteData(DataUtil.java:87)
at org.jsoup.helper.HttpConnection$Response.parse(HttpConnection.java:481) org.jsoup.helper.HttpConnection.get(HttpConnection.java:149) 
```

不知道为什么不支持 utf-8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:27:11.773

jsoup 当然支持 UTF-8。但是，您点击的 URL 正在返回“uft-8”。我不知道那是什么，您的 JVM 也不知道，它定义了支持哪些字符集。配置该 URL 的人犯了一个错字。

如果这是您知道并需要重新访问的 URL，您可以使用 jsoup.connection.execute，并在运行 parse() 之前将响应编码标头设置为“UTF-8”，并将编码显式设置为 UTF-8 .

# c# - User.Identity.Name 非静态字段需要对象引用

> ID：14914811
> 
> 赞同：2
> 
> 时间：2013-02-16T20:32:16.543
> 
> 标签：c#, asp.net

在我的控制器类中，我有一个私有方法，它返回使用 User.Identity.Name 作为参数获取的登录用户，这一切都很好。

```
private static Account GetLoggedUser()
{ 
   AccountService accService = new AccountService();
   Account userAccount = accService.GetAccountByUsername(User.Identity.Name);
   return userAccount;
}

public ActionResult Edit()
{
   var userAccount = GetLoggedUser();
...
} 
```

问题是我在线收到此错误`User.Identity.Name`

> 非静态字段、方法或属性“System.Web.Mvc.Controller.User.get”需要对象引用

**编译时显示错误。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T20:35:14.800

您正在从它们看起来在同一个类中的静态方法中调用非静态对象/属性。你需要有一个类的实例才能使用它。或将方法更改为非静态。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T20:38:13.237

您正在以静态方法检索控制器的属性...

`static`在`GetLoggedUser()`方法中删除

从：

```
private static Account GetLoggedUser()
{
    // your code
} 
```

至：

```
private Account GetLoggedUser()
{
    // your code
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T20:36:07.273

您无权访问静态方法中的基类实例成员。

# css - 当 CSS 属性/值用作后备时，它的位置是否重要？

> ID：14914822
> 
> 赞同：1
> 
> 时间：2013-02-16T20:33:30.430
> 
> 标签：css, cross-browser

当 CSS 属性/值被用作与某个 CSS3 属性/值不兼容的浏览器的“后备”时，CSS 属性/值的位置是否重要？

例如，[CSS3`calc()`功能仅适用于某些浏览器](http://caniuse.com/calc)。假设我想要一个宽度是其父级的 1/3 的 div。我可以使用兼容`width:calc(100%/3)`的浏览器来实现这一点`calc()`。然后，对于不兼容的浏览器，我可以`width:33.33%`用作后备。

我的问题：将其置于`width:33.33%`上方或下方是否`width:calc(100% / 3)`会影响其有效性？一种层次结构会起作用，而另一种则不会吗？

也就是说，会像这样订购我的 CSS 属性：

```
div.column {
    width: 33.33%; /* Fallback in case the browser does not support calc() */

    width: -webkit-calc(100% / 3);
    width: -moz-calc(100% / 3);
    width: calc(100% / 3);
} 
```

不同于像这样订购它们：

```
div.column {
    width: -webkit-calc(100% / 3);
    width: -moz-calc(100% / 3);
    width: calc(100% / 3);

    width: 33.33%; /* Fallback in case the browser does not support calc() */
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T20:35:45.057

是的，顺序很重要。浏览器将使用他们理解的最后一条规则，因此您的第二个示例将否定理解它的浏览器的 calc() 调用。

正如[W3](http://www.w3.org/TR/CSS21/cascade.html#cascading-order)所述：

> ...如果两个声明具有相同的权重、来源和特异性，则指定的后者获胜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T20:37:49.970

是的，重要的是，应该首先放置“后备”。

原因：浏览器只会应用最后支持的声明样式，所以如果你有这个：

```
div {
    width: 400px;
    width: 300px;
    width: 200px;
    width: 100px;
} 
```

...仅`100px`适用。这在涉及供应商前缀时很常见：

```
div {
    -moz-property: foo;
    property: foo;
} 
```

在这种情况下，如果支持，Mozilla 浏览器将应用该**标准** ，否则回退到特定供应商（如果支持）。供应商前缀的实际顺序无关紧要，因为浏览器通常不支持多个供应商前缀。`property``-moz-property`

# c - 使用命令行输出到文件

> ID：14914824
> 
> 赞同：0
> 
> 时间：2013-02-16T20:33:40.837
> 
> 标签：c, file-io, command-line

我正在编写一个应该能够采用命令行参数的程序。基本上，用户必须能够在调用程序时通过命令提示符指定文件名。即程序应该能够接受一个参数，如：doCalculation -myOutputfile.txt。其中 doCalculation 是我的程序的名称，myOutputfile 是我希望将结果写入的文件（即将我的计算结果输出到指定的文件名）。

到目前为止，我可以通过命令提示符调用我的函数。我不确定如何让我的程序写入指定的文件名（或者如果该文件不存在，则创建该文件）。

我的代码如下：

```
int main(int argc, char *argv[])
{
    FILE* outputFile;
    char filename;

    // this is to make sure the code works
    int i = 0;
    for (i = 0; i < argc; i++) {
        printf("argv[%d] = %s\n", i, argv[i]);
    }

    //open the specified file
    filename= argv[i];   
    outputFile = fopen("filename", "r");

    //write to file
    fclose(outputFile);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:01:25.207

所以我注意到了几件事......

1.  如果要写入文件，请在打开文件时使用“w”表示写入模式，而不是“r”表示读取模式。
2.  您将文件名声明为单个字符，而不是指向字符串 (char *) 的指针。将其设为指针将允许长度 > 1 的文件名（字符数组而不是单个字符）。
3.  正如 Ashwin Mukhija 所提到的，您在 for 循环将其设置为 2 之后使用 i ，而实际上您需要第二个（索引 1）参数。
4.  您将 open() 函数中的文件名参数作为文字“文件名”而不是文件名变量。

看看这段代码是否有助于解决你的问题，（我还在其中扔了一个 fprintf() 来向你展示如何写入文件）。干杯!

```
int main(int argc, char *argv[])
{
    FILE* outputFile;
    char* filename;

    // this is to make sure the code works
    int i = 0;
    for (i = 0; i < argc; i++) {
        printf("argv[%d] = %s\n", i, argv[i]);
    }

    //saftey check
    if(argv[1])
    {
        filename = argv[1];

        //open the specified file
        outputFile = fopen(filename, "w");

        fprintf(outputFile, "blah blah");

        //write to file
        fclose(outputFile );
    }

    return 0;
} 
```

# firefox - 在 Firefox 插件中创建打字辅助

> ID：14914828
> 
> 赞同：1
> 
> 时间：2013-02-16T20:33:59.077
> 
> 标签：firefox, browser, firefox-addon

我想在我的 Firefox 中创建一个打字辅助插件，这样用户当前正在输入的任何内容都会以更大的字体显示在右侧底部的一个小窗口中。

这将有助于慢速打字员以更快的速度打字。

例如，当用户在 yahoo 注册页面和文本框名称上时，右下角应出现一个小窗口，并应以较大字体显示他正在输入的文本。以这种方式，用户可以在不抬起头的情况下继续打字。

我没有使用firefox插件的经验，所以我想知道这个项目是否可行。如果是，那么我想知道是否可以仅使用 JavaScript；或者如果我将不得不使用 jQuery。

如果您能在这件事上提供一些指导，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T03:15:38.373

当然是可行的。您永远*不必*使用 jQuery，而且无论如何在编写附加组件时它并不是很有用，因为您不关心浏览器之间的差异。

我建议你从[https://addons.mozilla.org/en-US/developers/](https://addons.mozilla.org/en-US/developers/)开始，尝试运行一个 page-mod，让它处理击键并将它们显示在它正在运行的网页上的 <div> 中.

# objective-c - 在地址簿上运行循环 - 收到内存警告

> ID：14914829
> 
> 赞同：-3
> 
> 时间：2013-02-16T20:34:03.850
> 
> 标签：objective-c, memory-management, abaddressbook

我正在运行此代码以创建包含呼叫者姓名的图像，并将其设置为特定联系人，但是在运行时，我收到 Received memory 警告并且它崩溃了...

```
-(void)RunActionInBlack{

//black bg - white text

ABAddressBookRef addressBook;
CFErrorRef error = NULL;

addressBook = ABAddressBookCreate();

CFArrayRef array=ABAddressBookCopyArrayOfAllPeople(addressBook);

ABRecordRef person;
int len=CFArrayGetCount(array);

for (int i = 0; i<len; i++){
    person = CFArrayGetValueAtIndex(array, i);
     details.text = [NSString stringWithFormat:@"Done. %d of %d contacts", i+1,len];
    [act stopAnimating];
    NSString *firstName = (NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty);
    NSString *lastName = (NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty);

    if (firstName == NULL) {
        firstName = @"";
    }
    if (lastName == NULL ) {
        lastName = @"";
    }

    UIImage *im = [self addText:[UIImage imageNamed:@"black.png"] andText:[NSString stringWithFormat:@"%@ %@",firstName, lastName]];
    NSData *dataRef = UIImagePNGRepresentation(im);

    ABPersonSetImageData(person, (CFDataRef)dataRef, &error);

    [lastName release];
    [firstName release];
    [dataRef release];
    CFRelease(dataRef);
    [im release];
}
ABAddressBookSave(addressBook, &error);
CFRelease(array);
CFRelease(addressBook);
} 
```

创建文本：

```
-(UIImage *)addText:(UIImage *)img andText:(NSString*)txt{

UIImageView *imView =[[UIImageView alloc] initWithImage:img ];
UIView *tempView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, img.size.width, img.size.height)];
[tempView addSubview:imView];

UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, -100, img.size.width, img.size.height)];
[label setText:txt];
[label setFont:[UIFont boldSystemFontOfSize:160]];
[label setTextColor:[UIColor whiteColor]];
[label setTextAlignment:UITextAlignmentCenter];
[label setBackgroundColor:[UIColor clearColor]];
[label setNumberOfLines:10];
[tempView addSubview:label];

UIGraphicsBeginImageContext(tempView.bounds.size);
[tempView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *finalImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
[label release];
[tempView release];
[imView release];
return finalImage;
} 
```

我没有任何内存泄漏或什么的...

我正在运行这些方法，例如：`[self performSelectorInBackground:@selector(RunActionInWhite) withObject:nil];`

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T20:42:13.927

如果您正在遍历一个大型数组并收到内存警告，则您可能正在使用直到退出`for`循环后才被释放的资源。（或者在这种情况下，根本没有发布，因为您的应用程序崩溃了。）

您可能希望将代码包装在循环中

```
for (int i=0; i<max; i++) {
    @autoreleasepool {

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T20:56:46.913

似乎您的内存不足，同时保留了许多无法释放的对象，例如`addressBook`内容，而且您似乎拥有 call 的完整`addressBook`副本`array`。

所以，

*   你真的需要那个副本`addressBook`吗？尝试摆脱它。
*   将迭代分成更小的部分，在每块几十条记录之后保存地址簿，这应该会释放一些内部使用的资源。

接下来，您可以尝试使用 Instruments 分析您的分配，看看是什么占用了大部分内存。

# qt - 将 opencv ".a" 库与 mingw 和 Qt 5.0 链接

> ID：14914830
> 
> 赞同：1
> 
> 时间：2013-02-16T20:34:16.017
> 
> 标签：qt, opencv, static, mingw, .a

这个好难！请不要把它误认为是一个新手问题；）对于简单的错误，我在这个 OpenCV + MinGW 静态内容中的里程太多了......

环境：一。使用 MinGW 构建的 Qt 5.0.1（从 qt-project 下载的标准开源代码） - 所以一切都使用相同的 MinGW 环境构建。湾。使用 CMake 我设置了最小构建（使用与 Qt 相同的 g++/gcc）并关闭了 SHARED_LIBRARIES。C。生成 cmake + mingw32-make + mingw32-make 安装工作正常。

**直到这里一切看起来都很顺利......**

现在当我添加：

```
win32-g++:INCLUDEPATH += D:/Dev/opencv/build/install/include
win32-g++:LIBS += -LD:/Dev/opencv/build/install/lib
win32-g++:LIBS += -static
win32-g++:LIBS += -llibopencv_core243d
win32-g++:LIBS += -llibopencv_imgproc243d
win32-g++:LIBS += -llibopencv_highgui243d 
```

（也没有“win32-g++”添加..）

我明白了`d:/dev/qt/qt5.0.1/tools/mingw/bin/../lib/gcc/i686-w64-mingw32/4.7.2/../../../../i686-w64-mingw32/bin/ld.exe: cannot find -llibopencv_highgui243d`

```
...
... 
```

**现在.. 我在正确的目录中有 libopencv_highgui243d.a，但是 ld.exe 链接器忽略了 lib 之外的任何东西！这应该是一个 MS 库（我想首先避免！！！） - 我什至尝试将 .a 文件重命名为 .lib 导致链接器考虑文件，但显示许多“未引用”错误...**

那么该怪谁呢？链接器？制作？鸣？吗？……

我尝试了许多命令行/标志选项但没有成功..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:00:45.817

您应该将这些库称为：

```
LIBS += -lopencv_core243d
LIBS += -lopencv_imgproc243d
LIBS += -lopencv_highgui243d 
```

由于已经在名称的开头`-l`插入了*lib 。*

# jquery-mobile - jQuery Mobile 表单不工作

> ID：14914835
> 
> 赞同：1
> 
> 时间：2013-02-16T20:34:43.320
> 
> 标签：jquery-mobile

我正在使用当前版本的 jQuery：

```
<!--jQuery-->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<!--jQuery UI-->
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
<!--jQuery Mobile-->
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http:// 
```

我有以下 HTML（我从文档中复制粘贴以确保正确性）：

```
<div id="form-pay" data-role="fieldcontain">
    <form action="mailer.php" method="post">
        <label for="basic">Text Input:</label>
        <input type="text" name="name" id="basic" data-mini="true" />
    </form>
</div> 
```

按钮、手风琴和动画一切正常，但由于某种原因，上述形式无法正常工作。他们只是没有样式出现。我需要做任何初始化吗？文档说表单是自动初始化的。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:06:54.947

**[jQuery Mobile 1.2 (1.2.0) 适用于从 1.7.0 到 1.8.2 的 jQuery 核心版本。](http://jquerymobile.com/demos/1.2.0/docs/about/getting-started.html)**

因此将 jQuery 更改为 1.8.2（或 1.8.3）版本

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

[jsFiddle](http://jsfiddle.net/pmatseykanets/5CGKk/)

或者如果您出于某种原因需要ver.1.9.X，请使用jQuery migrate

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script> 
```

[jsFiddle](http://jsfiddle.net/pmatseykanets/S52Fw/)

# mysql - 您的 SQL 语法有错误；mysql

> ID：14914838
> 
> 赞同：0
> 
> 时间：2013-02-16T20:34:58.030
> 
> 标签：mysql, sql, error-handling

表架构：

```
CREATE TABLE IF NOT EXISTS `movie` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` text NOT NULL,
  `desc` text NOT NULL,
  `review` text NOT NULL,
  `image_url` text NOT NULL,
  `promo_url` text NOT NULL,
  `created_on` datetime NOT NULL,
  `modified_on` datetime NOT NULL,
  PRIMARY KEY (`id`)
) 
```

插入语句：

```
INSERT INTO movie (name, desc, review, image_url, promo_url, created_on, modified_on) VALUES ('?p0', '?p1', '?p2', '?p3', '?p4', '?p5', '?p6') 
```

错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'desc, review, image_url, promo_url, created_on, modified_on) VALUES ('?p0', '?p1' at line 1 
```

我无法弄清楚错误来源，有人可以指出吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T20:36:35.113

`desc`是一个[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。将其包装在刻度中或将其更改为“描述”或任何其他非保留名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T20:37:40.217

对我来说，代码有效。也许“desc”有问题（尽管你有反引号）？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T20:38:06.180

[`DESC`](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)是 MySQL 中的保留字。

不过，您仍然可以在表定义中使用它。只需将其包装在反引号中：

```
(name, `desc`, ... 
```

# ruby-on-rails - 个人资料图片 - 如何存储

> ID：14914847
> 
> 赞同：0
> 
> 时间：2013-02-16T20:36:54.320
> 
> 标签：ruby-on-rails, database-design, web, social-networking

在我的网站上，用户可以上传个人资料图片。
我想知道存储这些图像的最佳方式是什么。
我的想法只是专用目录。图像名称将是 user_id。

这是一个好的解决方案，还是有一个更聪明的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T21:09:43.607

您有两个选择，存储图像或使用外部来源（gravatar）。

如果您要存储图像，您希望这些图像是公开的还是私有的？如果它们是公开可用的，那么您可以将它们存储在您的公用文件夹中。

您可以使用类似的东西`carrierwave`来处理图像的上传、版本控制和存储。

对于公共内容，我会将文件存储在上传者/模型名称/字段名称/id 位置下的公共目录中。就我而言，这更多是出于组织目的。

查看[http://railscasts.com/episodes/253-carrierwave-file-uploads](http://railscasts.com/episodes/253-carrierwave-file-uploads)以获得很好的教程。

对于私有图像，我会将存储目录设置为公共文件夹之外的内容，并将在控制器中使用该文件创建一个下载操作。这样，除非通过控制器操作，否则用户无法下载文件。通过授权 ( `cancan`)，我可以允许或禁止用户访问该特定文件的下载操作（因此使其有点安全）。如果您打算使用像 apache 或 nginx 这样的生产服务器，请确保您设置了适当的处理程序来发送文件（即 x_sendfile）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T21:27:44.893

将图像存储在小型应用程序的目录中是很常见的。但是，这里有一些事情需要考虑：

*   您是否预计会有很多用户？如果您有一百万用户，在您的目录中存储每个人的照片会在运行应用程序时占用大量内存

*   你在 Heroku 上部署吗？许多 RoR 应用程序都是，如果您在 Heroku 上部署，当您的应用程序移动到不同的测功机时，它将破坏您在本地存储的任何文件（并且您通常无法预测何时会发生这种情况）。您可以在此处阅读有关临时文件系统的信息[https://devcenter.heroku.com/articles/dynos#isolation-and-security](https://devcenter.heroku.com/articles/dynos#isolation-and-security)

*   一般来说，我建议不要在本地存储所有图像，因为在扩展时重写代码会变得很痛苦。我建议您上传到 Amazon S3 存储桶并根据需要下载图像（并在用户登录时缓存它们）。它很有帮助，因为您可能必须处理图像处理（例如调整上传的图像大小，创建上传图像的缩略图版本），并且当您有对这些文件具有持久访问权限的后台进程时更容易做到这一点。我为此使用了“aws”gem 和 S3 库，它非常易于使用，您可以在此处阅读更多信息：http: [//amazon.rubyforge.org/](http://amazon.rubyforge.org/)

*   但是，如果您打算将其作为一个小型应用程序并且不部署在 Heroku 上，那么只需将其保存到本地目录会更容易且无痛

# php - 从 C 中返回一个 char*，但在 PHP 中为空

> ID：14914851
> 
> 赞同：0
> 
> 时间：2013-02-16T20:37:17.280
> 
> 标签：php, c, swig

我是 SWIG 的新手。我的问题如下：

我在 C 中编写了一个返回 a 的函数`char*`，例如：

```
char msg[100];
strcpy(msg,"helloworld");
char* foo(){
return msg;
} 
```

当我在 C 中运行它时，我可以看到消息“helloworld”。问题是当我从 PHP 调用此方法（由 SWIG 从我的接口文件生成到 PHP 文件中）时：

```
$msg = foo(); 
```

`$msg``String(0)=""`var_dumped 时总是有。

为了调试这个，我也做了：

1.  每次都将此消息写入文件。
2.  从 PHP 中读取相同的文件。

这行得通。但我想通过直接调用来获取消息`foo()`

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:48:34.917

您需要持久分配 msg。要么让它成为一个全局的，要么为它做一个 malloc/new 的内存。看起来您只是将它作为该函数中的局部变量分配到堆栈上。一旦函数返回，指向您返回的堆栈的指针将指向垃圾。

# android - 需要在处理程序和 onDraw() 之间进行同步

> ID：14914854
> 
> 赞同：0
> 
> 时间：2013-02-16T20:37:26.153
> 
> 标签：android, view, handler

我想制作一个看起来好像一个点/圆在屏幕上水平移动的视图。我只想通过自定义视图来实现这一点。所以我写了一段代码，我想在其中调用 onDraw() 来绘制一个圆圈，然后它会调用一个处理程序，它将等待 500 毫秒并调用 onDraw()。所以每次调用 onDraw() 时，circle 都会向右移动几步。但在这里我无法在 run() 和 onDraw() 之间同步调用。代码：

```
package com.example.layoutpractice;

import javax.net.ssl.HandshakeCompletedListener;

import android.annotation.TargetApi;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Point;
import android.graphics.PorterDuff.Mode;
import android.os.Build;
import android.os.Handler;
import android.util.Log;
import android.view.Display;
import android.view.View;
import android.view.WindowManager;

public class DrawView extends View {
    private static final String TAG = "DrawView";
    Context ctx = null;
    int MAX_WIDTH = 0;
    int MAX_HEIGHT = 0;
    int current_x = 0;
    int current_y = 0;
    Paint paint = null;

    public DrawView(Context context) {

    @TargetApi(13)
    private void initialize() {
        // get the screen size
        WindowManager wm = (WindowManager) ctx
                .getSystemService(Context.WINDOW_SERVICE);
        Display display = wm.getDefaultDisplay();
        Point size = new Point();
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB_MR2) {
            display.getSize(size);
            MAX_WIDTH = size.x;
            MAX_HEIGHT = size.y;
        } else {
            MAX_WIDTH = display.getWidth();
            MAX_HEIGHT = display.getHeight();
        }

        // initialize paint
        paint = new Paint();
        paint.setColor(Color.BLUE);
        this.setFocusable(true);
        this.setFocusableInTouchMode(true);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        Log.d(TAG, "onDraw()");
        current_y = MAX_HEIGHT / 2;
        while (current_x < MAX_WIDTH) {
            canvas.drawColor(Color.WHITE, Mode.CLEAR);
            canvas.drawCircle(current_x, current_y, 2, paint);
            current_x = current_x + 10;
            // new Thread(new TimeHandler()).start();
            new TimeHandler().execute();
        }
        super.onDraw(canvas);
    }

    class TimeHandler extends Handler {
        Runnable myRun = new Runnable() {
            public void run() {
                Log.d(TAG, "run");
                invalidate();
            }
        };

        public void execute() {
            this.postDelayed(myRun, 500);
        }

    }
} 
```

日志

```
02-17 01:40:28.355: D/DrawView(1162): onDraw()
02-17 01:40:28.875: D/DrawView(1162): run
02-17 01:40:28.875: D/DrawView(1162): run
02-17 01:40:28.875: D/DrawView(1162): run
02-17 01:40:28.875: D/DrawView(1162): run
02-17 01:40:28.966: D/DrawView(1162): onDraw()
02-17 01:40:28.966: D/DrawView(1162): run
02-17 01:40:28.966: D/DrawView(1162): run
02-17 01:40:28.966: D/DrawView(1162): run
02-17 01:40:28.966: D/DrawView(1162): run
02-17 01:40:29.005: D/DrawView(1162): run
02-17 01:40:29.005: D/DrawView(1162): run
02-17 01:40:29.005: D/DrawView(1162): run
02-17 01:40:29.005: D/DrawView(1162): run
02-17 01:40:29.005: D/DrawView(1162): run
02-17 01:40:29.005: D/DrawView(1162): run
02-17 01:40:29.036: D/DrawView(1162): run
02-17 01:40:29.036: D/DrawView(1162): run
02-17 01:40:29.036: D/DrawView(1162): run
02-17 01:40:29.036: D/DrawView(1162): run
02-17 01:40:29.036: D/DrawView(1162): run
02-17 01:40:29.036: D/DrawView(1162): run
02-17 01:40:29.065: D/DrawView(1162): run
02-17 01:40:29.065: D/DrawView(1162): run
02-17 01:40:29.075: D/DrawView(1162): run
02-17 01:40:29.075: D/DrawView(1162): run
02-17 01:40:29.101: D/DrawView(1162): run
02-17 01:40:29.101: D/DrawView(1162): run
02-17 01:40:29.101: D/DrawView(1162): run
02-17 01:40:29.101: D/DrawView(1162): run
02-17 01:40:29.101: D/DrawView(1162): run
02-17 01:40:29.101: D/DrawView(1162): run
02-17 01:40:29.101: D/DrawView(1162): run
02-17 01:40:29.101: D/DrawView(1162): run
02-17 01:40:29.101: D/DrawView(1162): run
02-17 01:40:29.101: D/DrawView(1162): run
02-17 01:40:29.101: D/DrawView(1162): run
02-17 01:40:29.105: D/DrawView(1162): onDraw()
02-17 01:40:29.125: D/DrawView(1162): run
02-17 01:40:29.125: D/DrawView(1162): run
02-17 01:40:29.125: D/DrawView(1162): run
02-17 01:40:29.125: D/DrawView(1162): run
02-17 01:40:29.125: D/DrawView(1162): run
02-17 01:40:29.125: D/DrawView(1162): run
02-17 01:40:29.125: D/DrawView(1162): run
02-17 01:40:29.125: D/DrawView(1162): run
02-17 01:40:29.125: D/DrawView(1162): run
02-17 01:40:29.125: D/DrawView(1162): run
02-17 01:40:29.125: D/DrawView(1162): run
02-17 01:40:29.125: D/DrawView(1162): run
02-17 01:40:29.125: D/DrawView(1162): run
02-17 01:40:29.175: D/DrawView(1162): onDraw() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:20:44.463

改变

```
while (current_x < MAX_WIDTH) 
```

到

```
if (current_x < MAX_WIDTH) 
```

PS你的设计是错误的。onDraw 是一个特殊的方法，它可以被android调用，而不仅仅是你。每次您通过 invalidate 或框架本身调用 onDraw 时，您都会安排一个 runnable 在 500 毫秒内运行。而且您认为 onDraw 将每 500 毫秒执行一次（current_x = current_x + 10;）...您有问题）

要解决您的问题，请不要在 ondraw 中添加任何逻辑。OnDraw 应该只使用当前状态绘制视图。只留下这个：

```
 current_y = MAX_HEIGHT / 2;
    canvas.drawColor(Color.WHITE, Mode.CLEAR);
    canvas.drawCircle(current_x, current_y, 2, paint);

    super.onDraw(canvas); 
```

在您的自定义视图中创建其他方法，该方法应执行以下操作：

```
public void startBallMovement() {
      animationRunnable.run();
}

private Handler handler = new Handler();
private final Rubbanle animationRunnable = new Runnable() {
     public void run() {
         current_x = current_x + 10;
         if (current_x < MAX_WIDTH) {
             handler.postDelayed(animationRunnable, 500);
         }
         invalidate();
     }
} 
```

我确信您可以按原样使用我的代码，但逻辑很清楚。

# javascript - 是否有可能来自 iframe 的链接会影响显示 iframe 的母页 /主页？

> ID：14914868
> 
> 赞同：0
> 
> 时间：2013-02-16T20:38:48.340
> 
> 标签：javascript, jquery, iframe

我有一个包含在另一个页面（母页）中的 iframe。

```
<iframe name="commentsiframe" id="commentsiframe" onLoad="autoResize('commentsiframe');" width="100%" src="iframe.php" scrolling="no"  marginheight="0" frameborder="0" ></iframe> 
```

如果我有一个

```
<a href="#top">go top</a> 
```

在 iframe 页面中。当我单击它时，我想操纵主页/母页并使其位于顶部。

我不知道是否可能，但我认为如果是的话，它一定是javascript！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:52:49.020

如果 iframe 和母页的域相同，那么它的简单使用：

```
 window.parent.scrollTo(0,0);   //you can call any global function of the mother page 
```

如果域不同，则有点困难：请参阅此问题： [跨域 iframe 问题](https://stackoverflow.com/questions/9393532/cross-domain-iframe-issue)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T20:42:34.430

尝试在 a-tag 中使用`target="_top"`or`target="_parent"`作为属性。[在这里](http://www.w3schools.com/TAGS/att_a_target.asp)查看

# gnu-make - 在 gnu make 中使用一个命令从多个文件创建多个文件

> ID：14914870
> 
> 赞同：2
> 
> 时间：2013-02-16T20:38:52.920
> 
> 标签：gnu-make, saxon

假设目录输入中有 1000 个扩展名为 .xhtml 的文件，并且这些文件的某个子集（例如，输出路径在 $(FILES) 中）需要通过 xslt 转换为目录输出中具有相同名称的文件。一个简单的 make 规则是：

```
$(FILES): output/%.xhtml : input/%.xhtml
    saxon s:$< o:$@ foo.xslt 
```

当然，这可以一次转换一个文件。问题是我想使用 saxon 的批处理一次处理所有文件，因为考虑到为每个文件加载 java 和 saxon 的开销，考虑到文件的数量，这会快得多。Saxon 允许 -s（源）选项作为目录并处理该目录中的所有文件，将具有相同名称的结果放置在 -o: 选项中指定的目录中。

我知道让 GNU make 使用模式规则执行单个命令来更新多个文件的众所周知的技术：

```
output/%.xhtml: input/%.xhtml
    saxon s:input -o:output foo.xslt 
```

但就我而言，这有两个问题。首先，它将在输入目录中的所有文件上运行转换，而不仅仅是已更改的文件；其次，它不会将转换限制在 $(FILES) 中指定的文件子集。在所谓的“静态模式规则”（参见[这里]）的情况下，GNU make 功能对于所有匹配的目标只运行一次模式规则中给出的配方，因为在顶部给出的规则帖子是已知的。

为了使用 saxon 批处理功能，我需要创建一个临时目录，仅将要处理的文件复制到其中，然后使用该临时目录作为输入目录运行转换。我尝试创建一个临时目录，并使用特定于目标的变量记住它的名称以备将来使用，使用

```
$(FILES): TMPDIR:=$(shell mktemp -d) 
```

但这会为每个过时的目标创建一个新的临时目录。无论如何，我不确定如何构建规则，然后将必要的文件复制到该目录中。我不想在解析 makefile 时创建临时目录，因为我有一个非递归的 make 系统，它将解析所有 make 文件，甚至那些与当前顶级目标无关的文件，并且不要想要为不需要/不会使用的情况创建临时目录。

我很清楚过去在 SO 上提出了许多关于从单个输入创建多个文件的问题。一种解决方案是（非静态）模式规则；其他解决方案涉及虚假目标。但是，在这种情况下，我不知道如何将所有这些放在一起。

我可以使用静态模式规则识别更改并复制它们的文件

```
$(FILES): output/%.xhtml : input/%.xhtml
    TMPDIR=`mktemp -d`
    cp $< $(TMPDIR) 
```

但实际上我更喜欢使用单个 cp 命令复制文件，而这会一一复制它们。也许这里有一些应用`cp -u`？

我还考虑为那些需要更新的文件使用临时扩展，但也看不出如何让它工作。当所有文件发生变化时，我即将放弃并在所有文件上运行撒克逊变换，但有没有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:18:19.153

就个人而言，我不会尝试从命令行执行此操作。这部分是因为我不是一个 shell 脚本向导。我也不是 Ant 向导，但因为需要处理未更改的文件，所以这似乎非常属于 Ant 领域。另一方面，Ant 将为每个转换重新编译样式表，这是您可能希望避免的开销；如果是这种情况，那么您最好的选择可能是编写一个小的 Java 应用程序。它可能只有 100 行或更少。

最后一种可能性是在 Saxon 中进行处理：即使用 collection() 函数读取多个输入文件并使用 xsl:result-document 生成多个结果文件的单个转换。Saxon（商业版）提供最后修改的扩展功能，允许您过滤要处理的文件。对于 1000 个文件，您可能还需要扩展函数 saxon:discard-document() 来防止堆填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:04:55.117

就个人而言，我喜欢你原来的每个文件一个编译器的公式。这不适合make的`-j n`标志吗？

您当然可以通过复制来批量处理文件，然后在最后运行 saxon。递归 make（啊！）可以整理排序。就像是：

```
.PHONY: all
all:
    rm -rf tmpdir
    ${MAKE} tmpdir/sentinel
    saxon -s:tmpdir -o:output foo.xslt

tmpdir/sentinel: $(FILES) ; touch $@

$(FILES): output/%.xhtml: input/%.xhtml
    ln $< $(patsubst input/%,tmpdir/%,$<) 
```

这确实有效，尽管我对撒谎感到非常反感（静态模式规则声称在 中创建目标`output/`，但实际上在 中做了它的肮脏行为`tmpdir/`）。

请注意，在 的配方中`tmpdir/sentinel`，它`$?`已正确设置为过期的输出文件列表。如果您可以将一堆文件传递给 saxon 而不是文件夹，这可能会很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T17:22:53.623

我认为这里的一个问题是“saxon”支持目录中的一个文件或所有文件，因此不适合在不复制到临时目录的情况下进行批处理。

否则，使用时间戳标记文件作为代理目标非常简单。例如：

```
output/.timestamp : $(FILES)
    mkdir -p $(@D)
    $(COMMAND) -outputdir=output $?
    touch $@ 
```

这三个命令是：

1.  确保输出目录存在。
2.  对比时间戳文件新的文件运行批处理命令。
3.  更新时间戳文件（必要时创建它）。

请记住，命令的每一行都在其自己的子 shell 中执行，并且如果任何命令行失败，则不会调用后续行。

这种方法对 Java 构建很有用。

# byte - 如何从以位为单位的大小正确获取以字节为单位的大小？

> ID：14914871
> 
> 赞同：0
> 
> 时间：2013-02-16T20:38:59.047
> 
> 标签：byte, bit, integer-overflow

假设您使用的是位集或类似的东西，本质上是一些允许您访问各个位的值的对象。它可能是简单的东西，如整数字或字节数组，或者更通用的东西，如 Java 中的[BitSet](http://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html)，具体取决于您要处理的位数。

我的问题涉及将有用位的长度转换为以字节数表示的长度。这实际上总是需要的，因为您通常不能分配少于 8 位（1 个字节）的内存，因此您最终会在“位集”对象中获得额外的填充位。

所以，总而言之，你如何*正确地*获得容纳给定比特大小所需的字节大小？

注意：考虑可能导致错误答案的潜在整数溢出。例如，如果足够大，`n_bytes = (n_bits + 7) / 8`可能会导致整数溢出。`n_bits`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:40:36.517

这是一个有效的答案，但是我认为有比这个更快的方法。

```
if ((bit_size % 8) == 0)
    byte_size = bit_size/8
else
    byte_size = bit_size/8 + 1 
```

编辑：例如，为了加快速度，您可以用右移替换除法，用按位 AND 替换模数。

```
if ((bit_size & 7) == 0)
    byte_size = bit_size >> 3
else
    byte_size = (bit_size >> 3) + 1 
```

但是，编译器有时可能会自己进行这些类型的优化，所以这可能并没有那么好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:10:41.433

您可以通过使用 long long int 来避免 int 溢出：

`n_bytes = static_cast<int>((n_bits + 7LL) / 8)`

# qt - Qt：如何生成带有调试信息的可执行文件？

> ID：14914873
> 
> 赞同：3
> 
> 时间：2013-02-16T20:39:12.390
> 
> 标签：qt, debugging

当我运行`qmake -project`, `qmake`, 时`make`，`gdb my_executable`我无法调试它，因为它没有调试信息。我需要类似`g++ -g`选项的东西。如何使用调试信息创建可执行文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T20:48:05.477

`qmake`然后`qmake CONFIG+=debug`和`make`。获取带有去比符号的二进制文件。

# forth - 如何定义 VALUE 和 TO

> ID：14914877
> 
> 赞同：10
> 
> 时间：2013-02-16T20:39:34.593
> 
> 标签：forth, 6502

我想在 RPC/8（ [Minecraft](http://en.wikipedia.org/wiki/Minecraft) [mod](https://en.wikipedia.org/wiki/Mod_%28video_gaming%29)中的模拟计算机）`VALUE`上实现 Forth 单词。只要我在编译时不使用它们，我的最佳尝试就会让我得到一组可以正常工作的单词。更具体地工作，但没有。`TO` `VALUE``TO`

```
: VALUE CREATE , DOES> @ ;
: TO ' 3 + ! ; 
```

我已经尝试了我能想到的一切来让它工作，我最好的尝试让我做到了：

```
['] NameOfAValue 3 + ! 
```

请注意，处理器不是纯 6502，而是[65EL02，65816](http://ibm5100.net/redpower/6502-primer/)的自定义变[体](http://en.wikipedia.org/wiki/WDC_65816/65802)。

编辑#1：不知何故，我忘记了对 CREATE 的调用。它应该一直在那里。编辑＃2：我也得到`3`并`+`切换到...哎呀。它应该一直是相反的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-09T22:57:48.437

最简单的解决方案是

```
VARIABLE TO-MESSAGE   \ 0 : FROM ,  1 : TO .           
: TO 1 TO-MESSAGE ! ;

: VALUE CREATE , DOES> TO-MESSAGE @ IF ! ELSE @ THEN 
 0 TO_MESSAGE ! ; 
```

它仅使用 CORE 单词，并且绝对是标准的。而且它只在解释和编译模式下工作，因为在输入流中没有可疑的前瞻。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T22:26:16.657

好的 经过大量的试验和错误以及大量搜索后，我发现了一些应该可以工作的东西，但是由于 redFORTH 中的两个错误，没有。

价值

```
\ Works fine, now to reset the value.
: VALUE \ n <name> --
    CREATE ,
    DOES> @
; 
```

到

```
\ Works if not compiling, LITERAL and POSTPONE are broken.
: TO
    TIBWORD FIND 3 +
    STATE @ IF
        POSTPONE LITERAL
        POSTPONE !
    ELSE
        !
    THEN
; IMMEDIATE 
```

LITERAL 中的错误演示

```
\ fails, very wierd error.
: TESTLIT [ 42 ] LITERAL ;
\ TESTLIT Unknown Token: TESTLIT
\ FORGET TESTLIT Unknown Token: TESTLIT
\ WORDS TESTLIT COLD SORTMATCH ... 
```

POSTPONE 中的错误演示

```
\ fails, postpone is directly equivelent to [']
: TESTPOST POSTPONE + ; IMMEDIATE
: TEST 2 2 TESTPOST . ;
\ . 1935
\ ' + . 1935 
```

我要去提交错误报告....

编辑#1：经过更多的试验和错误，而不是一点点咒骂（我对 FORTH 不好），我找到了一种让它工作的方法。

```
: TO
    TIBWORD FIND 3 +
    STATE @ IF
        (lit) (lit) , , \ store address
        (lit) ! ,
ELSE
        !
    THEN
; IMMEDIATE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T20:01:54.687

我不确定您的 Forth 如何处理解释时间和编译时间，但 TO 的定义试图将值存储到地址 3。似乎很可疑。

# android - android同时显示sim和手机联系人

> ID：14914880
> 
> 赞同：2
> 
> 时间：2013-02-16T20:40:14.910
> 
> 标签：android, android-contacts

在我的代码中，我应该只显示电话联系人：我关注了以前的帖子，但我仍然同时显示电话和 SIM 卡联系人。这是我的代码：

```
Uri uri = ContactsContract.CommonDataKinds.Phone.CONTENT_URI;

String columIndex = ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME;
String columIndexId = ContactsContract.CommonDataKinds.Phone.CONTACT_ID;
String numIndex = ContactsContract.CommonDataKinds.Phone.NUMBER;

Cursor cursor = getContentResolver().query(uri, null, null, null,ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME+" ASC");

if(cursor!=null){
    while(cursor.moveToNext()) {
        ContactInfo ci = new ContactInfo();
        ci.setIdContact(Integer.parseInt(cursor.getString(cursor.getColumnIndex(columIndexId))));
        ci.setName(cursor.getString(cursor.getColumnIndex(columIndex)));
        ci.setNumberTel(cursor.getString(cursor.getColumnIndex(numIndex)));
        //if(!cursor.getString(cursor.getColumnIndex(columIndex)).equalsIgnoreCase(nome))
        listContact.add(ci);
    }
    cursor.close();

} 
```

这些都是 ContactInfo 对象，它们将显示在一个列表中（listContact，它是一个 ArrayList）。

这对我来说真的很重要，因为我的应用程序只适用于电话联系人而不适用于 sim 联系人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:33:44.870

您可以尝试用此替换您的光标以排除 sim 上的联系人：

```
import android.provider.ContactsContract.RawContacts;

Cursor cursor = getContentResolver().query(
    RawContacts.CONTENT_URI,
    new String[] { RawContacts._ID, RawContacts.ACCOUNT_TYPE },
    RawContacts.ACCOUNT_TYPE + " <> 'com.android.contacts.sim' AND "
        + RawContacts.ACCOUNT_TYPE + " <> 'com.anddroid.contacts.sim' AND " // HTC
        + RawContacts.ACCOUNT_TYPE + " <> 'vnd.sec.contact.sim' AND "
        + RawContacts.ACCOUNT_TYPE + " <> 'USIM Account' ",
        null,
        null); 
```

这个我没试过，修改自[https://stackoverflow.com/a/4409453/262462](https://stackoverflow.com/a/4409453/262462)

注意：在某些手机上，您可能需要排除一些其他`RawContacts.ACCOUNT_TYPE`类似`com.anddroid.contacts.sim`and `vnd.sec.contact.sim`，请参阅[https://stackoverflow.com/a/13656077/262462](https://stackoverflow.com/a/13656077/262462)

# meteor - 如何在自定义路线中获取当前用户？

> ID：14914885
> 
> 赞同：0
> 
> 时间：2013-02-16T20:40:35.163
> 
> 标签：meteor

根据[这个答案](https://stackoverflow.com/a/12819654/65387)，我创建了自己的路线，以便我可以处理文件上传。这是我所拥有的：

```
var router = Connect.middleware.router(function(route) {
    route.post('/upload', function(req, res) {
        var filename = req.headers['x-filename'];
        var path = Path.join('.uploads', filename);
        var writeStream = FileSystem.createWriteStream(path);
        writeStream.on('error', function(e) {
            console.error(e);
            res.writeHead(500);
            res.end();
        }).on('close', function() {
            Fiber(function() {
                console.log(Meteor.user());
            }).run();
            res.writeHead(200);
            res.end();
        });
        req.pipe(writeStream);
    });
});
app.use(router); 
```

这对于上传文件非常有用，但是当我尝试访问时`Meteor.user()`，它给了我：

```
app/server/main.js:24
            }).run();
               ^
Error: Meteor.userId can only be invoked in method calls. Use this.userId in publish functions.
    at Object.Meteor.userId (app/packages/accounts-base/accounts_server.js:95:13)
    at Object.Meteor.user (app/packages/accounts-base/accounts_server.js:100:25)
    at app/server/main.js:23:36
Exited with code: 1 
```

`req`我在对象中看不到任何可以帮助我的东西。

有什么方法可以访问用户对象吗？

* * *

目前，我正在获取用户 ID 客户端并将其通过标头传递，然后我使用这些标头来查找服务器端：

```
route.post('/upload', function(req, res) {
    Fiber(function() {
        var userId = req.headers['x-userid'];
        var user = Meteor.users.findOne({_id:userId});
        if(user) {
            ...
        } else {
            res.writeHead(403,'User not logged in');
            res.end();
        }
    }).run();
}); 
```

我不喜欢这个，因为它根本不安全。在不同用户的帐户下上传内容很容易。

**编辑：**没关系。调用的行为以`Meteor.users.findOne({_id:userId});`某种方式破坏了上传流。我一放入每个文件就会损坏；他们最多上传大约 700 KB，然后停止并关闭连接而不会出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:56:02.637

如果它仍然是有效的问题。

问题是在这部分代码中没有办法获取 Meteor.user() 。

但是您始终可以访问 Meteor.userId .. 如果用户已登录，则它不为空 .. 因此您只能为已登录的用户上传。（如果 req.headers['x-userid'] == Meteor.userId）

> 调用 Meteor.users.findOne({_id:userId}); 的行为本身 以某种方式破坏了上传流。

因为它是反应部分......所以每次如果 Meteor.users 集合被更新，这部分代码就会再次执行。

因此，如果您只能使用 Meteor.userId （仅在用户登录/注销时更改）它应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T17:54:52.747

我已经遇到过很多次了，这很令人沮丧。我认为您不能`Meteor.userId()`从光纤内部拨打电话。我通常`var userId = Meteor.userId();`在调用光纤之前做一个，然后引用该变量。

# javascript - 我如何在 grails 中使用“onclick”remoteFunction 触发 webflow 事件

> ID：14914888
> 
> 赞同：0
> 
> 时间：2013-02-16T20:40:49.483
> 
> 标签：javascript, grails

例如此复选框单击可以触发 webflow 事件

```
<td><g:checkBox name="isSelected" value="${contestantInstance.id}" checked="false"     onclick="${remoteFunction(action:'selectCheck',_eventID:Next id:contestantInstance.id,
                    params:'\'isSelected=\' + this.checked')}"  /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:59:52.280

由于到目前为止没有人回答，我可能会尝试一下。

这段代码对我有用。

标签中的 Javascript 代码

```
<script type="text/javascript">

        function enableText(checkBool, textId)
        {
            textFldObj = document.getElementById(textId);
            //Disable the text field
            textFldObj.disabled = !checkBool;
            //Clear value in the text field
            if (!checkBool) { textFldObj.value = ''; }
        }

    </script> 
```

复选框和 onclick 事件是

```
 <td><g:checkBox checked="false" name="allVideos" value="${videoInstance.id}" onclick="enableText(this.checked, '${videoInstance.id}');" /></td> 
```

注意 videoInstance 是循环中 var 的名称：

# javascript - 无法使用显示/隐藏

> ID：14914891
> 
> 赞同：0
> 
> 时间：2013-02-16T20:41:21.230
> 
> 标签：javascript, jquery, html

我的问题：当我添加另一个文本输入时，我无法显示/隐藏它。

```
<html>
 <head>

<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.1.0.min.js"></script>
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
<script>

$(document).ready(function(){

        $(".slidingDiv").hide();
        $(".show_hide").show();

        $('.show_hide').click(function(){
        $(".slidingDiv").slideToggle();
        });

        $(".slidingDiv1").hide();
        $(".show_hide1").show();

        $('.show_hide1').click(function(){
        $(".slidingDiv1").slideToggle();
        });

});

var counter = 1;
var limit = 3;
function addInput(divName){

mainCanvasDiv = document.createElement("div");
mainCanvasDiv.className = "slidingDiv1";
mainCanvasDiv.style.display = "none";

var newdiv = document.createElement('div');
newdiv.id = "dynamicInput" + counter;
          newdiv.innerHTML = "<a href='#' class='show_hide1'>Show/hide</a>";
          mainCanvasDiv.innerHTML = "Entry " + (counter + 1) + " <br><input type='text'  name='dynamicInput" + counter +"1'><br><input type='text' name='dynamicInput" + counter +"2'>";
          document.getElementById(divName).appendChild(newdiv).appendChild(mainCanvasDiv);
          counter++;

}
$(document).ready(function(){
    $('#sortable').sortable({
        update: function(event, ui) {
 var newOrder = $(this).sortable('toArray').toString();
            document.getElementById('sort').value = newOrder;
        }
    });
});

</script>
</head>
<body>

<form action="lost.php" method="POST">
<div id="sortable">
<div id="dynamicInput">
<a href="#" class="show_hide">Show/hide</a>
<div class="slidingDiv">
<input type="text" name="myInputs[]">

</div>
</div>
</div>
<input type="button" value="Add another text input" onClick="addInput('sortable');"><br />
<input type="hidden" name="sort" id="sort" value="">
<input type=submit value="GO!">
</form>
</body>
</html> 
```

有什么建议吗？

更新：
我已将 $('.show_hide1').click(function(){ 更改为 $('.show_hide1').on("click", "div a.show_hide1", function(){

也许我做错了什么，我不擅长JS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T20:46:28.963

修正：http: [//jsfiddle.net/Yhp3c/](http://jsfiddle.net/Yhp3c/)

您需要使用`live`而不是`click`as`live`还针对未来（阅读：DOM 脚本）元素。

编辑：如评论中所述：使用`on`而不是`live`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:00:08.860

将您的点击事件替换为：

```
 $("#sortable").on("click","div a.show_hide", function() {
                $(".slidingDiv").slideToggle();
            });

            $("#sortable").on("click","div a.show_hide1", function() {
                $(".slidingDiv1").slideToggle();
            }); 
```

# sql - 将 Rails 迁移转换为原始 SQL

> ID：14914892
> 
> 赞同：5
> 
> 时间：2013-02-16T20:41:50.887
> 
> 标签：sql, ruby-on-rails

如何将此迁移转换为原始 sql？或者我可以转换吗？

```
class AddUnsubscribeTokenToUsers < ActiveRecord::Migration
  def self.up
    add_column :users, :unsubscribe_token, :string, :unique => true
    User.all.each do |user|
        user.unsubscribe_token = ActiveSupport::SecureRandom.hex(18)
    end
  end
  def self.down
    remove_column :users, :unsubscribe_token
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T22:16:41.227

AFAIK 您无法将单个迁移转换为 SQL，但您可以让 ActiveRecord 在 SQL 中而不是 Ruby 中输出您的模式。

```
# in config/application.rb

config.active_record.schema_format = :sql 
```

这将在您的 db/schema 而不是 Ruby DSL 中为您提供 SQL 输出。但是这两种格式都不会包含设置用户令牌的代码片段。

此外，在迁移中包含类似的数据库修改代码被认为是一个坏主意。例如，如果您删除或重命名模型会发生什么，当迁移运行时它将失败。至少将其包装在模型检查中。或开始/救援/结束

```
if defined? User
  User.all.each do |user|
    user.unsubscribe_token = ActiveSupport::SecureRandom.hex(18)
  end
end 
```

或者

```
begin
  User.all.each do |user|
    user.unsubscribe_token = ActiveSupport::SecureRandom.hex(18)
  end
rescue
end 
```

最后，该片段不会按照您的意图执行，因为您在设置令牌后没有保存模型，无论是使用`update_attributes`还是调用`user.save`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-06T13:48:06.550

我偶然发现了一篇[非常好的文章](http://eewang.github.io/blog/2013/07/29/how-to-use-rake-tasks-to-generate-migration-sql/)，描述了如何通过自定义 rake 任务来实现这一点。

# php - 从 XSS 中清理 Markdown

> ID：14914896
> 
> 赞同：3
> 
> 时间：2013-02-16T20:42:31.473
> 
> 标签：php, html, xss, markdown, code-injection

我使用 Markdown 提供了一种简单的方法来在我的论坛脚本中向我的用户写帖子。
我正在尝试清理每个用户输入，但我对 Markdown 的输入有疑问。

我需要将降价文本存储在数据库中，而不是 HTML 转换版本，因为允许用户编辑他们的帖子。

基本上我需要像 StackOverflow 一样的东西。

我读[了这篇](http://michelf.ca/blog/2010/markdown-and-xss/)关于 Markdown 的 XSS 漏洞的文章。我发现的唯一解决方案是在我的脚本提供的每个输出之前使用 HTML_purifier。

我认为这会减慢我的脚本速度，我想输出 20 个帖子并为每个帖子运行 HTML_purifier ...

所以我试图找到一种解决方案来清理 XSS 漏洞，清理输入而不是输出。

我无法在输入上运行 HTML_purifier，因为我的文本是 Markdown，而不是 HTML。如果我将它转换为获取 HTML，我将无法转换回 Markdown。

我已经删除（我希望）所有 HTML 代码：

```
htmlspecialchars(strip_tags($text)); 
```

我想过另一种解决方案：

当用户尝试提交新帖子时：将输入从 Markdown 转换为 HTML，运行 HTML_purifier，如果发现一些 XSS 注入，它只会返回错误。但我不知道怎么做，也不知道 HTML_purifier 是否允许。

我在那里发现了很多关于同一问题的问题，但所有解决方案都是将输入存储为 HTML。我需要存储为 Markdown。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T20:48:50.753

1.  在输入上运行 Markdown
2.  在 Markdown 生成的 HTML 上运行 HTML Purifier。对其进行配置，使其允许链接、href 属性等（它仍应剥离`javascript:`命令）

* * *

```
// the nasty stuff :)
$content = "> hello <a name=\"n\" \n href=\"javascript:alert('xss')\">*you*</a>";

require '/path/to/markdown.php';

// at this point, the generated HTML is vulnerable to XSS
$content = Markdown($content);

require '/path/to//HTMLPurifier/HTMLPurifier.auto.php';

$config = HTMLPurifier_Config::createDefault();
$config->set('Core.Encoding', 'UTF-8');
$config->set('HTML.Doctype', 'XHTML 1.0 Transitional');
$config->set('Cache.DefinitionImpl', null);

// put here every tag and attribute that you want to pass through
$config->set('HTML.Allowed', 'a[href|title],blockquote[cite]');

$purifier = new HTMLPurifier($config);

// here, the javascript command is stripped off
$content = $purifier->purify($content);

print $content; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T23:08:14.367

解决了...

```
$text = "> hello <a name=\"n\"
> href=\"javascript:alert('xss')\">*you*</a>";

$text = strip_tags($text);

$text = Markdown($text);

echo $text; 
```

它返回：

```
<blockquote>
  <p>hello  href="javascript:alert('xss')"&gt;<em>you</em></p>
</blockquote> 
```

并不是：

```
<blockquote>
  <p>hello <a name="n" href="javascript:alert('xss')"><em>you</em></a></p>
</blockquote> 
```

所以似乎它`strip_tags()`确实有效。

合并：

```
$text = preg_replace('/href=(\"|)javascript:/', "", $text); 
```

整个输入应该从 XSS 注入中清除。如我错了请纠正我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T02:10:05.660

Markdown 的 html 输出仅取决于 md 解析器，因此您可以

1.  将您的 md 转换为 html，并在此之后对 html 进行清理，如下所述：

    [逃离 XSS 漏洞维护 Markdown 语法？](https://stackoverflow.com/questions/9616906/escape-from-xss-vulnerability-maintaining-markdown-syntax)

2.  或者你可以修改你的 md 解析器来检查每个进入 html 属性的参数是否有 xss 的迹象。Ofc 你应该在解析之前转义 html 标签。我认为这个解决方案比其他解决方案快得多，因为通过简单的文本，您通常应该只检查图像和链接的 url。

# mysql - 如何为每个组选择第一行（按日期时间排序）？

> ID：14914901
> 
> 赞同：4
> 
> 时间：2013-02-16T20:42:57.593
> 
> 标签：mysql, group-by, subquery

如何为 MySQL 中的每个组选择第一行（按日期时间排序）？

我试过了，我得到了这个：

```
SELECT *
FROM `cats`
WHERE `war_id` = 0 
AND `eyes_color` = 'green' 
AND `id` IN
    (SELECT `id` FROM
        (SELECT * FROM `cats` ORDER BY `date_last_fought` DESC) AS t
    GROUP BY `war_id`, `n_of_medals`) 
```

它有点工作，但我不确定它是否是有史以来最好的。

你认为我可以简化这个吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T21:32:40.857

我试图简化成这个......

```
SELECT * FROM `cats`
inner join (select * from cats 
        WHERE `warid` = 1 AND `color` = 'green' 
        order by orderDate desc) a 
        on (cats.id=a.id)
group by cats.warId; 
```

你可以在这里看到[http://sqlfiddle.com/#!2/55f5b/5](http://sqlfiddle.com/#!2/55f5b/5)
但我不确定它是否比你的查询更好，...从 EXPLAIN 阅读和行动仍然成为我的作业：D

```
ID  SELECT_TYPE TABLE      TYPE    POSSIBLE_KEYS    KEY   KEY_LEN   REF    ROWS EXTRA
1   PRIMARY     <derived2> ALL     (null)          (null) (null)    (null)   2  Using temporary; Using filesort
1   PRIMARY     cats       eq_ref  PRIMARY         PRIMARY  4       a.id     1  
2   DERIVED     cats       ALL     (null)          (null) (null)    (null)   6  Using filesort 
```

并添加索引将使其更快

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T01:23:30.757

这是我的解决方案：

```
SELECT * FROM `cats` c
JOIN (
    SELECT `war_id`, `n_of_medals`, MAX(`date_last_fought`) date_last_fought
    FROM `cats` 
    WHERE `war_id` = 0 
    AND `eyes_color` = 'green' 
    GROUP BY `war_id`, `n_of_medals` 
) c_summary ON c_summary.war_id = c.war_id
AND c_summary.n_of_medals = c.n_of_medals 
AND c_summary.date_last_fought = c.date_last_fought
ORDER BY c.`date_last_fought` DESC; 
```

[http://sqlfiddle.com/#!2/05bcb/2](http://sqlfiddle.com/#!2/05bcb/2)

# ruby-on-rails - 简单的 Ruby on Rails 数据库设计

> ID：14914902
> 
> 赞同：1
> 
> 时间：2013-02-16T20:43:01.047
> 
> 标签：ruby-on-rails, database-design

为了练习，我正在写一个购物网站，我们有桌子`User`和`Item`. 一个用户显然是`has_many`物品（当他们被添加到他们的购物篮中时），但是即使许多用户在他们的购物篮中都有相同的物品，它`belongs_to`也是如此？`User`

此外，如果我想要一个用户添加到他们的购物篮的项目列表，以及他们查看过的项目列表（用于根据搜索提出建议），最好有一些“通过”表：`Basket`和`Viewed`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T20:54:28.363

当您有这种多对多关系时，您可以使用 HABTM 模式：

```
Class User...
has_and_belongs_to_many :items 
```

然而，大多数时候网上商店使用订单来跟上用户购买的物品。这意味着一个 'user' 'has_many' 'orderlines' ，一个 'item' 'has_many' 'orderlines' ，一个 'orderline' 'belongs_to' 一个 'user' 和一个 'item'。

也许您的订单只是项目的副本，并且没有直接链接，因为您不想在处理完订单后更改它们。这实际上取决于您商店的重点，哪种方案适合您的需求。

试着在网上找一些例子，想想你想如何处理物品、订单和购物篮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:51:58.073

我习惯于把不一样的东西分开，即使关系是一对一的。所以首先我会推荐来自购物篮的用户（1:1 关系）。

之后，一个篮子包含许多项目，项目可以在多个篮子中（m:n 关系）。确保，也许用户喜欢多次购买同一物品。

视图可以实现为用户和项目之间的链接表：用户有很多视图，项目有很多视图，但一个视图总是链接到一个用户和一个项目。

# android - Android ListView 异常问题

> ID：14914903
> 
> 赞同：0
> 
> 时间：2013-02-16T20:43:04.507
> 
> 标签：android, listview, exception

我正在尝试从字符串数组填充 listView，但我不断收到以下非常长且复杂的异常报告：

```
02-16 20:00:24.119: E/AndroidRuntime(17608): FATAL EXCEPTION: main
02-16 20:00:24.119: E/AndroidRuntime(17608): android.content.res.Resources$NotFoundException: Resource ID #0x7f080003 type #0x12 is not valid
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.content.res.Resources.loadXmlResourceParser(Resources.java:1874)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.content.res.Resources.getLayout(Resources.java:731)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.view.LayoutInflater.inflate(LayoutInflater.java:318)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:332)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.widget.AbsListView.obtainView(AbsListView.java:1315)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.widget.ListView.measureHeightOfChildren(ListView.java:1198)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.widget.ListView.onMeasure(ListView.java:1109)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.view.View.measure(View.java:8172)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3140)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1012)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:381)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.view.View.measure(View.java:8172)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3140)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.view.View.measure(View.java:8172)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:526)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.view.View.measure(View.java:8172)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3140)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.view.View.measure(View.java:8172)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.view.ViewRoot.performTraversals(ViewRoot.java:805)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1744)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.os.Looper.loop(Looper.java:144)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at android.app.ActivityThread.main(ActivityThread.java:4937)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at java.lang.reflect.Method.invokeNative(Native Method)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at java.lang.reflect.Method.invoke(Method.java:521)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
02-16 20:00:24.119: E/AndroidRuntime(17608):    at dalvik.system.NativeStart.main(Native Method)
02-16 20:00:25.789: I/Process(17608): Sending signal. PID: 17608 SIG: 9 
```

以下是我的活动课程：

```
public class ArticlesActivity extends BaseActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.articles);

        String[] items = {"line#1", "line#2", "line#3", "line#4"};
        ListView articlesList = (ListView)findViewById(R.id.articlesList);

//      ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.article_item, items);
//      ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.article_item, R.id.articlesList, items);
//      ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.articles, R.id.articleItem, items);
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.id.articleItem, items);

        articlesList.setAdapter(adapter);

    }
} 
```

这是我的 ArticlesList.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/articlesContainer"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/articlesList"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

这是我的 Article_item.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:gravity="left|right"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/articleItem"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

</LinearLayout>

<!-- <TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/articleItem"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" /> --> 
```

[这个](https://stackoverflow.com/questions/9280965/arrayadapter-requires-the-resource-id-to-be-a-textview-xml-problems)问题反映了我的情况，我尝试将我的 Article_item.xml 调整为只有一个 TextView （已被注释掉），但没有任何区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T20:48:19.883

请试试这个：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.Article_item, items); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:03:01.230

像这样尝试您的 xml **Article_item.xml**

```
<?xml version="1.0" encoding="utf-8"?>   
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/TV_articleItem"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" /> 
```

并在您的活动中使用它

```
String[] items = {"line#1", "line#2", "line#3", "line#4"};
ListView articlesList = (ListView)findViewById(R.id.articlesList);
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.Article_item, R.id.TV_articleItem, items);
articlesList.setAdapter(adapter); 
```

# java - 格式化程序异常处理

> ID：14914905
> 
> 赞同：1
> 
> 时间：2013-02-16T20:43:04.957
> 
> 标签：java, exception-handling, formatter

我在这段代码中遇到了我不理解的错误。我按照 Java 文档进行了所有设置，但显然我不明白。首先，这里是代码：

```
import java.io.FileNotFoundException;
import java.util.logging.Formatter;
import java.util.logging.LogRecord;

public class CreateTextFile {

    private Formatter output; //object used to output text to file

    public void openFile() throws FileNotFoundException {
        try {
            output = new Formatter( "sets.txt" ) {    //First Error

                @Override
                public String format(LogRecord record) {
                    throw new UnsupportedOperationException("Not supported yet.");
                }

            }; //open the file
        } catch ( SecurityException securityException ) {
            System.err.println("You do not have access to this file.");
            System.exit(1); //terminate the program
        } catch (FileNotFoundException fileNotFoundException) {  //second error

        }
    }
} 
```

第一个错误：

> Formatter 类中的构造函数 Formatter 不能应用于给定类型；必需：未找到参数：字符串原因：实际参数列表和形式参数列表的长度不同

我理解错误信息，但我不同意。Formatter 肯定有一个构造函数，它采用单个字符串（见下文）

第二个错误：

> Formatter 类中的构造函数 Formatter 不能应用于给定类型；必需：未找到参数：字符串原因：实际参数列表和形式参数列表的长度不同

正如下面的 Java 文档中所述，我在方法声明中抛出 FileNotFoundException。

这直接来自 [http://doc.java.sun.com/DocWeb/api/java.util.Formatter][1]

> Formatter(String fileName) throws FileNotFoundException 用指定的文件名构造一个新的格式化程序。
> 
> 使用的字符集是此 Java 虚拟机实例的默认字符集。
> 
> 使用的语言环境是此 Java 虚拟机实例的默认语言环境。
> 
> fileName 用作此格式化程序目标的文件的名称。如果文件存在，那么它将被截断为零大小；否则，将创建一个新文件。输出将被写入文件并被缓冲。
> 
> 引发 SecurityException：如果存在安全管理器并且 checkWrite(fileName) 拒绝对文件的写访问
> 
> 引发 FileNotFoundException：如果给定的文件名不表示现有的、可写的常规文件并且无法创建该名称的新常规文件，或者在打开或创建文件时发生其他错误

不知道如何清除这些错误。任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T20:47:08.363

在您的代码中：

```
import java.util.logging.Formatter; 
```

在您引用的 Javadoc 的 URL 中：

```
java.util.Formatter 
```

不是同一个班。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T20:47:22.277

您指的是 java.util.Formatter 的文档，但您正在导入 java.util.logging。

# java - Android：无法使用 Ksoap2 连接到 Web 服务

> ID：14914910
> 
> 赞同：-1
> 
> 时间：2013-02-16T20:43:43.307
> 
> 标签：java, android, eclipse, ksoap2, android-ksoap2

当我发送用户名和密码时，它发送给我一个错误：publicKey 和用户名和密码未连接网络服务，我不知道 [http://mobilews.terra.net.lb/MobileService是否有任何问题.asmx?op=authenticateLogin](http://mobilews.terra.net.lb/MobileService.asmx?op=authenticateLogin) 用户名是 :mabyad 密码是 :dori

MainActivity.java 代码

```
package com.kak;

import android.os.Bundle;
import android.os.StrictMode;

import com.kak.R;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;
//import android.widget.Toast;
//import android.view.View.OnClickListener;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject; 
import org.ksoap2.transport.HttpTransportSE;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.serialization.SoapPrimitive;
//import android.widget.TextView;
//import android.app.ProgressDialog;
//import android.os.AsyncTask;

public class MainActivity extends Activity {
    private final static String SOAP_NAMESPACE = "http://mobilews.terra.net.lb";  

    private static final  String SOAP_URL = "http://mobilews.terra.net.lb/MobileService.asmx";  

     private static final  String SOAP_ACTION = "http://tempuri.org/authenticateLogin";  

    private static final  String SOAP_METHOD_NAME = "authenticateLogin"; 
    //private PropertyInfo pi1; 

    Button button1;
    EditText UserName;
    EditText Password;
    public String publicKey;

  String tv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        StrictMode.ThreadPolicy policy = 
                new StrictMode.ThreadPolicy.Builder().permitAll().build();
            StrictMode.setThreadPolicy(policy);
        setContentView(R.layout.activity_main);

        button1=(Button)findViewById(R.id.button1);
        button1.setOnClickListener(new View.OnClickListener() 
        {

            @Override

            public void onClick(View v) 
            {
                UserName=(EditText)findViewById(R.id.UserName);
                Password = (EditText)findViewById(R.id.Password);

                SoapObject request = new SoapObject(SOAP_NAMESPACE, SOAP_METHOD_NAME); 

            request.addProperty("userName", UserName.getText().toString());
                request.addProperty("password",Password.getText().toString());
                request.addProperty("publicKey", String.valueOf("Terr@Net$M0bilePK54"));

                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                 envelope.setOutputSoapObject(request);
                 envelope.dotNet = true;

                     HttpTransportSE androidHttpTransport = new HttpTransportSE(SOAP_URL);
                     try{

                     androidHttpTransport.call(SOAP_ACTION, envelope);

                     SoapPrimitive resultString = (SoapPrimitive)envelope.getResponse();

![android manifest Permissions][1]                 
                     SoapPrimitive resultInteger =(SoapPrimitive)envelope.getResponse();

                     tv=resultInteger.toString(); 

                    if (resultString!=null || resultInteger !=null) {
                        Toast.makeText(getBaseContext(),tv,
                                Toast.LENGTH_LONG).show();
                    }   
                    else {
                        Toast.makeText(getBaseContext(),"wrong",
                            Toast.LENGTH_LONG).show();
                   }

                 }catch (Exception e) {

                         e.printStackTrace();

                   }
            }
            });
        }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:14:21.340

我用过`ksoap2-android-assembly-2.6.2-jar-with-dependencies.jar`，这段代码对我有用：

```
public class MainActivity extends Activity {
    private final String URL = "http://mobilews.terra.net.lb/MobileService.asmx";
    private final String METHOD_NAME = "authenticateLogin";
    private final String NAMESPACE = "http://tempuri.org/";
    private final String SOAP_ACTION = NAMESPACE + METHOD_NAME;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        authenticateLogin("mabyad", "dori", "your_public_key");
    }

    private void authenticateLogin(String userName, String passWord, String publicKey) {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

        request.addProperty("userName", userName);
        request.addProperty("password", passWord);
        request.addProperty("publicKey", passWord);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;

        envelope.setOutputSoapObject(request);

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.debug = true;
        try {
            androidHttpTransport.call(SOAP_ACTION, envelope);
            SoapObject response = (SoapObject) envelope.bodyIn;

            boolean authenticateLoginResult = Boolean.parseBoolean(response.getPropertyAsString("authenticateLoginResult"));
            int customerId = Integer.parseInt(response.getPropertyAsString("customerId"));
            String errorMsg = response.getPropertyAsString("errorMsg");

            System.out.println("authenticateLoginResult :: " + authenticateLoginResult);
            System.out.println("customerId :: " + customerId);
            System.out.println("errorMsg :: " + errorMsg);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

输出是：

> 验证登录结果 :: false
> 
> 客户ID :: 0
> 
> errorMsg :: 未经授权的方法使用，无效的密钥

# uiview - 如何将 UIViewController 添加为像 IB 中以编程方式添加的子视图的目标

> ID：14914917
> 
> 赞同：0
> 
> 时间：2013-02-16T20:44:58.237
> 
> 标签：uiview, uiviewcontroller, action, subview, target

在 Xcode 的界面构建器中添加 UIViews 时，您可以使用 Ctrl+拖动来为包含该视图的 UIViewController 创建一个目标操作。您也可以对使用 IB 添加的任何子视图执行此操作。

如果在 awakeFromNib 中以编程方式创建和添加子视图，有没有办法将目标操作从它添加到视图控制器，或者您必须先在 awakeFromNib 中创建子视图，然后使用视图控制器创建目标操作作为代表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:57:13.773

如果它是从头开始创建的，则必须手动绑定事件。

但是，如果它是从另一个 NIB 加载的，则至少有 2 个选项：

1.  您可以从视图中获取 uiviewcontroller，请参阅此答案：[https](https://stackoverflow.com/a/3732812/126995) ://stackoverflow.com/a/3732812/126995然后您可以将 VC 传递给[loadNibNamed:owner:options:](http://developer.apple.com/library/ios/documentation/uikit/reference/NSBundle_UIKitAdditions/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007485-CH1-SW5)方法。

2.  在 IB 中，您可以将根视图的类型从`UIView`自定义 UIView 派生类更改，并将子视图中的操作和出口绑定到 NIB 的根视图。

# java - 如何将 Datepicker-date 转换为 Java.util.Date？

> ID：14914920
> 
> 赞同：1
> 
> 时间：2013-02-16T20:45:15.070
> 
> 标签：java, javascript, jquery, date, datepicker

**错误信息**

> org.codehaus.jackson.map.JsonMappingException：无法从字符串值'02/23/2013'构造java.util.Date的实例：不是有效的表示（错误：无法解析日期“02/23/2013”​​：不兼容任何标准形式（“yyyy-MM-dd'T'HH:mm:ss.SSSZ”、“yyyy-MM-dd'T'HH:mm:ss.SSS'Z'”、“EEE、 dd MMM yyyy HH:mm:ss zzz", "yyyy-MM-dd"))

**Java 对象 - 实体**

```
@Column(name = "event_date")
@Temporal(TemporalType.TIMESTAMP)
private Date eventDate; 
```

**Java 脚本**

```
$(function() {
            $("#datepicker").datepicker();
        });

function formToJSON() {
            return JSON.stringify({
                   "eventDate": $('#datepicker').val()
            });
} 
```

**HTML**

```
<input type="text" id="datepicker" name="date" placeholder="Date" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T20:57:29.973

你可以这样做：

```
$(function() {
   $("#datepicker").datepicker({
      dateFormat: "yy-mm-dd"
   });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T21:01:54.673

`datepicker`包括日期格式化实用程序`$.datepicker.formatDate`

API 参考： [http ://docs.jquery.com/UI/Datepicker/$.datepicker.formatDate](http://docs.jquery.com/UI/Datepicker/%24.datepicker.formatDate)

试试这个：

```
function formToJSON() {
            var d= $('#datepicker').datepicker('getDate')
            return JSON.stringify({
                   "eventDate": $.datepicker.formatDate('yy-mm-dd', d)
            });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T20:50:44.487

那里可能有更好的解决方案，但是由于这是我经常遇到的问题并且通常找不到现成的工具，因此我最终为此编写了自己的函数：

```
function dateFormat(date) {
    function two(v) { return v < 10 ? "0" + v : "" + v; }
    function four(v) { return v < 10 ? "000" + v : v < 100 ? "00" + v : v < 1000 ? "0" + v : "" + v; }
    var y = four(date.getFullYear());
    var m = two(date.getMonth()+1);
    var d = two(date.getDate());
    return y + "-" + m + "-" + d;
};

function datetimeFormat(date) {
    function two(v) { return v < 10 ? "0" + v : "" + v; }
    function three(v) { return v < 10 ? "00" + v : v < 100 ? "0" + v : "" + v; }
    function four(v) { return v < 10 ? "000" + v : v < 100 ? "00" + v : v < 1000 ? "0" + v : "" + v; }
    var y = four(date.getUTCFullYear());
    var m = two(date.getUTCMonth()+1);
    var d = two(date.getUTCDate());
    var h = two(date.getUTCHours());
    var mm = two(date.getUTCMinutes());
    var s = two(date.getUTCSeconds());
    var ms = three(date.getUTCMilliseconds());
    return y + "-" + m + "-" + d + "T" + h + ":" + mm + ":" + s + "." + ms;
}; 
```

第一个是您在特定情况下需要的，因为您只处理日期（而不是时间）。

```
 return JSON.stringify({
               "eventDate": dateFormat($('#datepicker').datepicker('getDate'))
        }); 
```

# android - 搜索活动不会启动？

> ID：14914923
> 
> 赞同：1
> 
> 时间：2013-02-16T20:45:51.827
> 
> 标签：android, android-searchmanager

我已经在我的应用程序中实现了一个搜索系统，并且出现了搜索栏，但是当按下 Enter 时，搜索活动不会加载。

除此之外，在搜索框中输入的文本也是黑色的。操作栏也是黑色的，那么有没有办法在 API 14+ 上让它变成白色？

我的主要活动：

```
package com.liamwli.spotify.spotifycommunity;

import java.net.MalformedURLException;
import java.net.URL;

import android.annotation.SuppressLint;
import android.app.ActionBar;
import android.app.Activity;
import android.app.SearchManager;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.net.Uri;
import android.os.Build;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.ProgressBar;
import android.widget.SearchView;
import android.widget.Toast;

@SuppressLint("SetJavaScriptEnabled")
public class MainActivity extends Activity {

    ProgressBar progress;
    WebView wv;
    WebSettings wvs;
    String url, prefix;
    SharedPreferences prefs;
    SharedPreferences.Editor editor;
    ActionBar ab;

    @SuppressLint("NewApi")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        prefs = PreferenceManager.getDefaultSharedPreferences(this);
        editor = prefs.edit();

        ab = getActionBar();

        ab.setHomeButtonEnabled(true);

        progress = (ProgressBar) findViewById(R.id.pBProgress);
        wv = (WebView) findViewById(R.id.wVPage);
        wv.setWebViewClient(new WebViewClient() {

            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                // TODO Auto-generated method stub

                if (!url.contains("community.spotify.com")
                        && !url.contains("facebook.com")
                        && !url.contains("spotify.com")) {
                    Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
                    i.addCategory(Intent.CATEGORY_BROWSABLE);
                    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    startActivity(i);
                } else {
                    view.loadUrl(url);
                }

                return super.shouldOverrideUrlLoading(view, url);
            }
        });
        wv.setWebChromeClient(new WebChromeClient() {

            @Override
            public void onProgressChanged(WebView view, int newProgress) {
                // TODO Auto-generated method stub

                if (newProgress < 100
                        && progress.getVisibility() == ProgressBar.GONE) {
                    progress.setVisibility(ProgressBar.VISIBLE);

                }
                progress.setProgress(newProgress);
                if (newProgress == 100) {
                    progress.setVisibility(ProgressBar.GONE);

                }

                super.onProgressChanged(view, newProgress);
            }

        });
        wvs = wv.getSettings();

        if (prefs.getBoolean("javascript_enabled", true)) {
            wvs.setJavaScriptEnabled(true);
            wvs.setJavaScriptCanOpenWindowsAutomatically(true);
        }

        if (Build.VERSION.SDK_INT >= 11)
            wvs.setDisplayZoomControls(true);
        wvs.setSupportZoom(true);
        wvs.setSupportMultipleWindows(true);

        if (prefs.getBoolean("desktop_mode", false)) {
            prefix = "/?device-view=desktop";
        } else {
            prefix = "/?device-view=mobile";

        }

        url = "http://community.spotify.com" + prefix;

        Intent liam = getIntent();
        if (liam.getAction() == Intent.ACTION_VIEW) {
            Uri data = liam.getData();
            URL urlurl = null;
            try {
                urlurl = new URL(data.getScheme(), data.getHost(),
                        data.getPath());
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                throw new RuntimeException("Malformed URL Given");
            }
            url = urlurl.toString() + prefix;

        }

        if (url == null)
            throw new RuntimeException("URL Null");

        wv.loadUrl(url);

    }

    @SuppressLint("NewApi")
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // TODO Auto-generated method stub

        MenuInflater inflater = new MenuInflater(this);
        inflater.inflate(R.menu.activity_main, menu);

        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        SearchView searchView = (SearchView) menu.findItem(R.id.menu_search)
                .getActionView();
        searchView.setSearchableInfo(searchManager
                .getSearchableInfo(getComponentName()));
        searchView.setIconifiedByDefault(false); // Do not iconify the
                                                    // widget;
                                                    // expand it by default

        return super.onCreateOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // TODO Auto-generated method stub

        switch (item.getItemId()) {
        case R.id.menu_back:

            if (wv.canGoBack()) {
                wv.goBack();
            } else {
                Toast.makeText(this, "Can't Go Back!", Toast.LENGTH_SHORT)
                        .show();
            }

            break;
        case R.id.menu_forward:

            if (wv.canGoForward()) {
                wv.goForward();
            } else {
                Toast.makeText(this, "Can't Go Forward!", Toast.LENGTH_SHORT)
                        .show();
            }

            break;
        case R.id.menu_refresh:

            wv.reload();

            break;
        case R.id.menu_settings:

            Intent i = new Intent(this, PrefActivity.class);
            startActivity(i);

            break;
        case R.id.menu_search:

            onSearchRequested();

            break;
        case android.R.id.home:

            wv.loadUrl("http://community.spotify.com" + prefix);

            break;
        }

        return super.onOptionsItemSelected(item);

    }

} 
```

我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    package="com.liamwli.spotify.spotifycommunity"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.liamwli.spotify.spotifycommunity.StartActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.liamwli.spotify.spotifycommunity.MainActivity"
            android:excludeFromRecents="true"
            android:exported="true"
            android:label="@string/app_name"
            tools:ignore="ExportedActivity" >
            <intent-filter>
                <action android:name="com.liamwli.spotify.spotifycommunity.MAINACTIVITY" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />

                <category android:name="android.intent.category.BROWSABLE" />
                <category android:name="android.intent.category.DEFAULT" />

                <data android:scheme="http" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.liamwli.spotify.spotifycommunity.PostUrl"
            android:excludeFromRecents="true"
            android:exported="false"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.liamwli.spotify.spotifycommunity.POSTURL" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.liamwli.spotify.spotifycommunity.PrefActivity"
            android:exported="false"
            android:label="@string/app_name" >
            <intent-filer>
                <action android:name="com.liamwli.spotify.spotifycommunity.PREFACTIVITY" />

                <category android:name="android.intent.cetagory.PREFERENCE" />
            </intent-filer>
        </activity>
        <activity
            android:name="com.liamwli.spotify.spotifycommunity.ClearData"
            android:excludeFromRecents="true"
            android:exported="false"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.liamwli.spotify.spotifycommunity.CLEARDATA" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.liamwli.spotify.spotifycommunity.SearchActivity"
            android:exported="false" >
            <intent-filter>
                <action android:name="android.intent.action.SEARCH" />
            </intent-filter>

            <meta-data
                android:name="android.app.searchable"
                android:resource="@xml/searchable" />
        </activity>

        <provider
            android:name="com.liamwli.spotify.spotifycommunity.MySuggestionProvider"
            android:authorities="com.liamwli.spotify.spotifycommunity.MySuggestionProvider"
            android:exported="true" />
    </application>

</manifest> 
```

我的搜索活动：

```
package com.liamwli.spotify.spotifycommunity;

import android.app.Activity;
import android.app.SearchManager;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.provider.SearchRecentSuggestions;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.webkit.WebView;
import android.widget.Toast;

public class SearchActivity extends Activity {

    WebView wv;
    SharedPreferences prefs;
    SharedPreferences.Editor editor;
    String prefix;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        prefs = PreferenceManager.getDefaultSharedPreferences(this);
        editor = prefs.edit();

        wv = (WebView) findViewById(R.id.wVPage);

        if (prefs.getBoolean("desktop_site", false)) {
            prefix = "/?device-view=desktop";
        } else {
            prefix = "/?device-view=mobile";
        }

        // Get the intent, verify the action and get the query
        Intent intent = getIntent();
        if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
            String query = intent.getStringExtra(SearchManager.QUERY);
            SearchRecentSuggestions suggestions = new SearchRecentSuggestions(
                    this, MySuggestionProvider.AUTHORITY,
                    MySuggestionProvider.MODE);
            suggestions.saveRecentQuery(query, null);
            doMySearch(query);
        }
    }

    private void doMySearch(String query) {
        // TODO Auto-generated method stub

        wv.loadUrl("http://community.spotify.com/t5/forums/searchpage/tab/message?q="
                + query + prefix);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // TODO Auto-generated method stub

        MenuInflater inflater = new MenuInflater(this);
        inflater.inflate(R.menu.activity_main_nosearch, menu);

        return super.onCreateOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // TODO Auto-generated method stub

        switch (item.getItemId()) {
        case R.id.menu_back:

            if (wv.canGoBack()) {
                wv.goBack();
            } else {
                Toast.makeText(this, "Can't Go Back!", Toast.LENGTH_SHORT)
                        .show();
            }

            break;
        case R.id.menu_forward:

            if (wv.canGoForward()) {
                wv.goForward();
            } else {
                Toast.makeText(this, "Can't Go Forward!", Toast.LENGTH_SHORT)
                        .show();
            }

            break;
        case R.id.menu_refresh:

            wv.reload();

            break;
        case R.id.menu_settings:

            Intent i = new Intent(this, PrefActivity.class);
            startActivity(i);

            break;

        case android.R.id.home:

            wv.loadUrl("http://community.spotify.com" + prefix);

            break;
        }

        return super.onOptionsItemSelected(item);

    }

} 
```

我没有收到强制关闭 - 它只是没有启动搜索活动。

另外，我应该为最终提供者设置什么权限？android系统必须能够执行，

# matlab - 打破嵌套循环

> ID：14914926
> 
> 赞同：2
> 
> 时间：2013-02-16T20:46:16.753
> 
> 标签：matlab

我在 Matlab 中有三个嵌套循环，在每个循环中，我都有一个检查标志的“if”。如果没问题，算法就会继续，否则，我希望程序应该被终止。这是我的代码，我认为有问题！

```
[A] = finction (...,...,...)

for i = 1:100
for j = 1:100
for k = 1:30

some operation which its results is a flag

if flag==1 % its initial value is 0
break
end;
end;
end;
end; 
```

为了中断其余的计算，应该把中断放在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T21:02:59.440

[BREAK](http://www.mathworks.com/help/matlab/ref/break.html)终止循环的执行，所以如果你有一个嵌套循环，`break`只会退出最里面的循环，程序会继续运行。

如果要终止整个函数，则需要使用[RETURN](http://www.mathworks.com/help/matlab/ref/return.html)。请注意，在`return`调用的那一刻，所有请求的输出参数都必须分配给某个值，否则代码会抛出错误。

# mongodb - 重命名 MongoDB 子集合属性

> ID：14914928
> 
> 赞同：1
> 
> 时间：2013-02-16T20:46:53.780
> 
> 标签：mongodb, rename

我有一个租户集合，每个租户实体都有一个 TenantLeases 子列表。TenantLease 实体有一个 MonthlyRent 属性，我正在尝试将其重命名为 Rent。这是我尝试过的：

```
db.Tenant.update( { "TenantLeases.MonthlyRent": { $exists:true } }, { $rename: { "TenantLeases.MonthlyRent": "TenantLeases.Rent" } }, false, true); 
```

**$rename 源字段无效**

```
db.Tenant.update( { "TenantLeases.$.MonthlyRent": { $exists:true } }, { $rename: { "TenantLeases.$.MonthlyRent": "TenantLeases.$.Rent" } }, false, true); 
```

**$rename 源可能不是动态数组**

显然 $rename 不起作用，所以现在我正在尝试遍历并重命名 TenantLeases，但是我不确定如何更新特定的数组项：

```
db.Tenant.find().forEach(function(tenant) {
   if(tenant.TenantLeases) {
      for(var k=0;k<tenant.TenantLeases.length;k++) {
         db.Tenant.update( { "TenantLeases." + k + ".MonthlyRent": { $exists:true } }, { $rename: { "TenantLeases." + k + ".MonthlyRent": "TenantLeases." + k + ".Rent" } }, false, false);//gives syntax error
      }
   }
}); 
```

# javascript - 尝试使用 javascript 访问 div 的 css 属性

> ID：14914931
> 
> 赞同：-1
> 
> 时间：2013-02-16T20:47:15.740
> 
> 标签：javascript, html, css

我尝试使用 javascript 访问 div 的宽度，但无论我设置什么，它每次都打印 NaN。我是 javascript 新手，我的代码有什么问题？

```
 <html>
    <head>
        <title>hello</title>

        <style type="text/css">

      #base
      {
        width:300px;
        height:30px;
        background-color: black;
      }

      #scr
      {
        height:30px;
        width:10px;
        background-color: red;
      }

    </style>

    <script type="text/javascript">

    var magic = function()
    {
    console.log("inside magic")
    var d = document.getElementById("scr");
    var b =  d.style.width;
    console.log(b);
    b = parseInt(b);

    console.log(b);

    }

    </script>

    </head>

    <body>

    <div id="base">
    <div id = "scr" >
    </div>
    </div>

    <br>
    <button onclick="magic()">Magic</button>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:00:42.953

您可以使用此功能来做到这一点：

```
function getStyle(el,styleProp)
{
    var x = document.getElementById(el);
    if (x.currentStyle)
        var y = x.currentStyle[styleProp];
    else if (window.getComputedStyle)
        var y = document.defaultView.getComputedStyle(x,null).getPropertyValue(styleProp);
    return y;
} 
```

发生的事情的解释在[这里](http://www.quirksmode.org/dom/getstyles.html) 注意，您必须使用元素的 id 通过函数访问其样式属性。如果要使用选择器，请使用 document.querySelector() 代替 document.getElementById()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:04:03.830

你应该试试

```
d.offsetWidth 
```

代替

```
d.style.width 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-16T21:08:47.593

该代码`d.style.width`返回由 css 明确指定的宽度，同时`d.offsetWidth`返回计算的宽度。

# c - 在自定义内存分配器 wrt 缓存冲突中分发地址

> ID：14914932
> 
> 赞同：2
> 
> 时间：2013-02-16T20:47:16.263
> 
> 标签：c, performance, memory-management, cpu-cache

[在阅读了二进制](https://stackoverflow.com/questions/8547778/why-is-one-loop-so-much-slower-than-two-loops)文件对缓存冲突的影响之后，我花了一个下午的时间阅读处理器缓存。现在我希望将这些新知识应用到我的多线程程序的内存分配器中。但是，我还没有完全理解它。

我的印象是处理器*喜欢*2 的幂，所以我的分配器轮次请求大小到下一个 2 的幂，然后将页面切成这个大小的倍数并分发出去。当页面已满时，它只是映射一个新页面并以相同的方式对其进行切片。这导致页面中非常相似且可预测的偏移量。

我应该在多大程度上调整我的分配器以避免这个问题？例如，我应该尝试稍微随机化地址，还是我一开始就因为使用 2 的幂而被搞砸了？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:39:08.320

在您有无可争议的证据证明*这*对性能至关重要之前，请不要理会它。额外的并发症很可能不值得。

每个人都应该阅读（并理解！）Bentley 的“编写高效程序”（遗憾的是现在绝版了，他的[“编程珍珠”](http://www.cs.bell-labs.com/cm/cs/pearls/)包含一个摘要，也非常值得一读）。

*   在开始代码优化之前，请*确保*它是值得的。如果性能足够，您的时间会得到更好的利用。是的，你必须先测量。
*   衡量花费在哪里。众所周知，程序员不善于猜测成本在哪里
*   最大的性能提升来自重述问题（有时它足以解决更快解决的问题），然后是系统的整体组织，下一个更好的算法/数据结构；并且在最后的细节优化，就像这里考虑的那样。
*   你友好的编译器，如果在“生成好的代码”方向上稍加推动，今天在给定类似的（全功能规模）任务时，将生成*比*经验丰富的汇编语言程序员更好的代码。大多数“为了性能”的本地源代码重组要么没有实际意义（编译器自己会这样做）要么有害（编译器将识别并重写通常的代码序列，不寻常的代码可能会使其无所事事或生成错误的代码） .
*   除了极不寻常的情况外，程序员的时间（编写、调试、维护）比几微秒的计算机时间更有价值。编写最简单的代码来完成这项工作，只有在经验表明它有价值时才重新工作。

# ios - 带有 iCloud 过滤谓词的 MPMediaQuery playlistQuery 返回集合中不正确的项目数

> ID：14914936
> 
> 赞同：2
> 
> 时间：2013-02-16T20:47:32.307
> 
> 标签：ios, mpmediaquery

我已经成功过滤掉了 iCloud 中除播放列表之外的应用程序每个部分的所有项目。在显示播放列表列表时，每个单元格内都有一个子标题，用于读取该播放列表中的曲目数量。问题是集合中的项目数不正确（尽管查询本身的项目总数是正确的）。

代码：

```
MPMediaPropertyPredicate *predicate = [MPMediaPropertyPredicate predicateWithValue:[NSNumber numberWithBool:0] forProperty:MPMediaItemPropertyIsCloudItem comparisonType:MPMediaPredicateComparisonEqualTo];

MPMediaQuery *query = [MPMediaQuery playlistsQuery];
[query addFilterPredicate:predicate];

NSLog(@"(iCloud) Total number of items in query: %d",query.items.count);

int i=1;

for (MPMediaItemCollection *collection in query.collections) {
    NSLog(@"(iCloud) Number of items in playlist %d: %d",i,collection.items.count);
    i++;
}

MPMediaQuery *query2 = [MPMediaQuery playlistsQuery];

NSLog(@"(All) Total number of items in query: %d",query2.items.count);

i=0;

for (MPMediaItemCollection *collection in query2.collections) {
    NSLog(@"(All) Number of items in playlist %d: %d",i,collection.items.count);
    i++;
} 
```

日志：

```
2013-02-16 20:46:08.904 MyApp[62357:907] (iCloud) Total number of items in query: 99
2013-02-16 20:46:08.918 MyApp[62357:907] (iCloud) Number of items in playlist 1: 5
2013-02-16 20:46:08.924 MyApp[62357:907] (iCloud) Number of items in playlist 2: 1
2013-02-16 20:46:08.930 MyApp[62357:907] (iCloud) Number of items in playlist 3: 19
2013-02-16 20:46:08.950 MyApp[62357:907] (iCloud) Number of items in playlist 4: 312
2013-02-16 20:46:08.956 MyApp[62357:907] (iCloud) Number of items in playlist 5: 5
2013-02-16 20:46:08.963 MyApp[62357:907] (iCloud) Number of items in playlist 6: 44
2013-02-16 20:46:09.003 MyApp[62357:907] (iCloud) Number of items in playlist 7: 16
2013-02-16 20:46:09.009 MyApp[62357:907] (iCloud) Number of items in playlist 8: 31
2013-02-16 20:46:09.015 MyApp[62357:907] (iCloud) Number of items in playlist 9: 90
2013-02-16 20:46:09.023 MyApp[62357:907] (iCloud) Number of items in playlist 10: 42
2013-02-16 20:46:09.069 MyApp[62357:907] (iCloud) Number of items in playlist 11: 296
2013-02-16 20:46:09.074 MyApp[62357:907] (iCloud) Number of items in playlist 12: 2
2013-02-16 20:46:09.134 MyApp[62357:907] (iCloud) Number of items in playlist 13: 25
2013-02-16 20:46:09.139 MyApp[62357:907] (iCloud) Number of items in playlist 14: 4
2013-02-16 20:46:09.143 MyApp[62357:907] (iCloud) Number of items in playlist 15: 1
2013-02-16 20:46:09.147 MyApp[62357:907] (iCloud) Number of items in playlist 16: 3
2013-02-16 20:46:09.153 MyApp[62357:907] (iCloud) Number of items in playlist 17: 19
2013-02-16 20:46:09.158 MyApp[62357:907] (iCloud) Number of items in playlist 18: 5
2013-02-16 20:46:09.162 MyApp[62357:907] (iCloud) Number of items in playlist 19: 7
2013-02-16 20:46:09.167 MyApp[62357:907] (iCloud) Number of items in playlist 20: 14
2013-02-16 20:46:09.177 MyApp[62357:907] (iCloud) Number of items in playlist 21: 247
2013-02-16 20:46:09.182 MyApp[62357:907] (iCloud) Number of items in playlist 22: 12
2013-02-16 20:46:09.186 MyApp[62357:907] (iCloud) Number of items in playlist 23: 2
2013-02-16 20:46:09.191 MyApp[62357:907] (iCloud) Number of items in playlist 24: 5
2013-02-16 20:46:09.195 MyApp[62357:907] (iCloud) Number of items in playlist 25: 2
2013-02-16 20:46:09.199 MyApp[62357:907] (iCloud) Number of items in playlist 26: 5
2013-02-16 20:46:09.213 MyApp[62357:907] (iCloud) Number of items in playlist 27: 239
2013-02-16 20:46:09.218 MyApp[62357:907] (iCloud) Number of items in playlist 28: 11
2013-02-16 20:46:09.265 MyApp[62357:907] (All) Total number of items in query: 3788
2013-02-16 20:46:09.269 MyApp[62357:907] (All) Number of items in playlist 0: 5
2013-02-16 20:46:09.270 MyApp[62357:907] (All) Number of items in playlist 1: 1
2013-02-16 20:46:09.271 MyApp[62357:907] (All) Number of items in playlist 2: 19
2013-02-16 20:46:09.272 MyApp[62357:907] (All) Number of items in playlist 3: 312
2013-02-16 20:46:09.272 MyApp[62357:907] (All) Number of items in playlist 4: 5
2013-02-16 20:46:09.273 MyApp[62357:907] (All) Number of items in playlist 5: 44
2013-02-16 20:46:09.274 MyApp[62357:907] (All) Number of items in playlist 6: 16
2013-02-16 20:46:09.275 MyApp[62357:907] (All) Number of items in playlist 7: 31
2013-02-16 20:46:09.275 MyApp[62357:907] (All) Number of items in playlist 8: 90
2013-02-16 20:46:09.276 MyApp[62357:907] (All) Number of items in playlist 9: 42
2013-02-16 20:46:09.277 MyApp[62357:907] (All) Number of items in playlist 10: 296
2013-02-16 20:46:09.277 MyApp[62357:907] (All) Number of items in playlist 11: 2
2013-02-16 20:46:09.278 MyApp[62357:907] (All) Number of items in playlist 12: 25
2013-02-16 20:46:09.279 MyApp[62357:907] (All) Number of items in playlist 13: 4
2013-02-16 20:46:09.279 MyApp[62357:907] (All) Number of items in playlist 14: 1
2013-02-16 20:46:09.280 MyApp[62357:907] (All) Number of items in playlist 15: 3
2013-02-16 20:46:09.281 MyApp[62357:907] (All) Number of items in playlist 16: 19
2013-02-16 20:46:09.282 MyApp[62357:907] (All) Number of items in playlist 17: 5
2013-02-16 20:46:09.283 MyApp[62357:907] (All) Number of items in playlist 18: 7
2013-02-16 20:46:09.284 MyApp[62357:907] (All) Number of items in playlist 19: 14
2013-02-16 20:46:09.284 MyApp[62357:907] (All) Number of items in playlist 20: 247
2013-02-16 20:46:09.285 MyApp[62357:907] (All) Number of items in playlist 21: 12
2013-02-16 20:46:09.286 MyApp[62357:907] (All) Number of items in playlist 22: 2
2013-02-16 20:46:09.286 MyApp[62357:907] (All) Number of items in playlist 23: 5
2013-02-16 20:46:09.287 MyApp[62357:907] (All) Number of items in playlist 24: 2
2013-02-16 20:46:09.288 MyApp[62357:907] (All) Number of items in playlist 25: 5
2013-02-16 20:46:09.288 MyApp[62357:907] (All) Number of items in playlist 26: 239
2013-02-16 20:46:09.289 MyApp[62357:907] (All) Number of items in playlist 27: 11 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T15:53:06.250

似乎过滤器仅适用于查询的`items`属性，但不幸的是不适用于集合`items`。

另请参阅此答案： [MPMediaQuery 和 iTunes 匹配问题](https://stackoverflow.com/a/14571663/1534401)

# php - 在php中显示当前一周的第1、2、3、4、5个日期

> ID：14914937
> 
> 赞同：0
> 
> 时间：2013-02-16T20:47:39.327
> 
> 标签：php, html, date, dayofweek

好的，所以我试图找出在 php 中编写（或打印）当前一周（从星期一开始）的第 1、2、3、4 和第 5 个日期（从星期一开始）的最佳方法。

例如...使用 2 月 4 日至 8 日这一周...

我需要一个显示为**2013 年 2 月 4**日的一周的第一天（从星期一开始）的脚本，然后我需要**四次以上**相同的脚本来显示星期二、星期三、星期四和星期五...

总之，我最终会得到**5 个脚本**或一个脚本，我可以复制和操作它们以按照我需要的方式工作......

另外，如果你能告诉我如何在周六和周日做同样的事情，那也将不胜感激。

如果有什么不明白的，请告诉我，我会尽我所能澄清...

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:54:16.430

首先，您需要获取“当前”周的星期一。要做到这一点，我建议打电话`date("N")`看看是不是 1。如果是，那么`now`就是你想要的星期一。否则`last monday`就是。将其传递`strtotime`给以获取与一周的第一个星期一相对应的时间戳。然后反复加24小时（24*3600秒）得到每一天。

```
$startofweek = date("N") == 1 ? time() : strtotime("last monday");
for($i=0; $i<5; $i++) {
    $day = $startofweek + 24*3600*$i;
    echo "Day ".($i+1).": ".date("d/M/Y",$day)."<br />";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T20:52:47.883

您可以使用带有特殊参数的 strtotime。像：

```
$time = strtotime('monday this week');
$time = strtotime('today');
$time = strtotime('next monday');
$time = strtotime('previous monday'); 
```

一周中的每隔几天也是如此

# c++ - 从基类转换为派生类是未定义的行为吗？

> ID：14914940
> 
> 赞同：2
> 
> 时间：2013-02-16T20:47:50.117
> 
> 标签：c++, class, derived-class

我遇到了一个问题，即强制转换为派生类可以解决问题。我在 SO 上找到了一个答案，说它可以导致 UB，对其进行测试，它既可以编译又可以正常工作。它是未定义的行为吗？如果是解决这个问题的正确方法是什么？

```
class A
{
public:
    A(){};
    ~A(){}
};

class B : public A
{
public:
    B(){};
    ~B(){}
    void Show() { std::cout << "Show" << std::endl; }
};

int _tmain(int argc, _TCHAR* argv[])
{
    A a;
    B* b = static_cast<B*>(&a);
    b->Show();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-16T20:54:24.323

只要指向基类型的指针实际上指向派生类型的实例，那么根据 C++ 标准，这种用法就不是未定义的。***但是***，在您的代码示例中，指针`b`不指向的实例`B`或其任何派生类型（没有），它指向的实例`A`。因此，您的代码实际上确实调用了未定义的行为。

> 我在 SO 上找到了一个答案，说它可以导致 UB，对其进行测试，它既可以编译又可以正常工作。

某些代码编译并正常工作的事实并不排除代码调用未定义行为的可能性，因为未定义行为包括“似乎可以工作”。您应该避免未定义行为的原因是因为无法保证下次调用 UB 时它会以相同的方式工作。

> 它是未定义的行为吗？如果是解决这个问题的正确方法是什么？

在您的示例中，是的，这是未定义的行为。正确的方法取决于您的代码实际上应该做什么，因为您提供的示例充其量只是一个学术示例。

为了清楚起见，对`main()`函数的以下修改具有明确定义的行为，并且 C++ 标准明确允许：

```
B objectB;
A* ptrA = &objectB;

B* b = static_cast<B*>(ptrA);
b->Show(); 
```

在这里，它的定义很好，因为指针`ptrA`实际上指向 的实例`B`，即使指针本身具有 type `A*`。在上面的示例中，将 from`A*`转换为然后在转换的指针上`B*`调用 's 函数之一将起作用。`B`不同之处在于，在您问题的示例中，`b`实际上并不指向`B`.

* * *

相关条款（强调我的）：

### C++ 标准 5.2.9/8 静态转换 [expr.static.cast]

> **如果从“ pointer *to* _ *_* _ ” 到“指向 ” 的指针存在`B``B` *`D``D``B``D``B`****（4.10），*cv2与**cv1*具有相同的 *cv*限定或大于*cv*限定，并且不是 的虚拟基类。空指针值 (4.10) 被转换为目标类型的空指针值。**如果“指向 cv1 的指针”类型的右值****指向***`B``D`**`B``B`那实际上是 type 对象的子对象`D`，结果指针指向 type 的封闭对象`D`。否则，强制转换的结果是未定义的。****

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-16T20:54:54.517

您可以将指向确实指向派生实例的基础对象的指针转换为指向派生对象的指针。

但是，在您的代码中，指向的对象`&a`不是派生对象，而是基础对象，您所做的确实是未定义的行为。

在实现中，如果类没有虚函数或基并且派生对象不添加任何数据成员而只是添加方法，我知道它应该“工作”。仍然不能正式保证它可以正常工作。

只是不要那样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T20:56:50.083

如果指向的对象确实是 a ，则允许强制转换（因此有效）`B`。在您的示例中，它很简单`A`，因此您会得到未定义的行为。

这留下了一个问题，为什么它有效？它有效（或*似乎*有效），因为您调用的方法没有访问该对象。`B`如果您添加一些成员变量并尝试访问它们，`Show()`或者您创建`Show`一个虚函数，它更有可能失败。但无论如何它是UB，所以基本上任何事情都可能发生。**

# css - 仅浮动 div 之间的边距

> ID：14914941
> 
> 赞同：2
> 
> 时间：2013-02-16T20:47:55.257
> 
> 标签：css

是否可以仅在浮动 div 之间创建边距**，而 parent 两侧没有边距**。

所以基本上：

```
no margin <div> |margin| <div> |margin| <div> |margin| <div> no margin
no margin <div> |margin| <div> |margin| <div> |margin| <div> no margin
no margin <div> |margin| <div> |margin| <div> |margin| <div> no margin
no margin <div> |margin| <div> |margin| <div> |margin| <div> no margin
no margin <div> |margin| <div> |margin| <div> |margin| <div> no margin 
```

像那样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T20:49:58.773

使用`first-child`和`last-child`选择器分别指定无左边距/右边距：

[http://jsfiddle.net/ExplosionPIlls/bzSgp/1](http://jsfiddle.net/ExplosionPIlls/bzSgp/1)

如果您在第一个/最后一个 div 之间有其他元素，则可以使用`first-of-type`/`last-of-type`代替。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-16T13:13:08.777

抱歉，要挖掘那个，但它只是在谷歌搜索该主题后才出现：

这就是为什么我想指出，当包含元素的宽度已知时，只有 CSS 解决方案在包装 DIV 上使用负边距（我在这里主要*使用*百分比**）**

```
.wrapper { 
    margin: -1em;
    overflow:hidden; /* or other clearfix if you need overflow */
}
.item {
    margin: 1em;
    float:left;
    /* ... */
} 
```

我还准备了一个快速[演示笔](http://codepen.io/Grilly86/pen/MYQLKq)。

例如，[Bootstrap](http://getbootstrap.com/css/#grid)的网格系统以类似的方式工作！

--

这种方法的一大优点是，您不必确切知道一行中可以容纳多少项目（就像您必须知道的 :nth-child() 方法一样）。因此，对于不同的屏幕尺寸，处理起来要容易得多。

# java - 使用 Pre-Order Post Order 和 InOrder 递归搜索目录中的文件

> ID：14914948
> 
> 赞同：3
> 
> 时间：2013-02-16T20:48:40.680
> 
> 标签：java, tree

当我编写代码以递归方式搜索目录中的文件时，例如我应用以下方法：

```
public void list(File file) {
    System.out.println(file.getName());
    File[] children = file.listFiles();
    for (File child : children) {
        list(child);
    }
} 
```

如果我需要在前序、中序和后序遍历中显示它，我该怎么做？

我无法与此文件搜索相关的树遍历。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:51:35.410

您的代码已预订，因为父级在子级之前处理（打印）。如果您将打印移动到循环之后，它将是后订单。在这种情况下，按顺序没有太大意义。如果你有一棵二叉树，那将是你在处理每个子节点之间处理父节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T20:55:10.553

您正在做的是预购遍历。

这是后序遍历：

```
public void list(File file) { 
    if(file == null)return;  
    File[] children = file.listFiles();
    for (File child : children) {
        list(child);
    }
   System.out.println(file.getName());
} 
```

并且中序遍历对一般树没有自然定义

# ipython - 如何在 Windows 7 上获得 ipython 图形控制台？

> ID：14914950
> 
> 赞同：7
> 
> 时间：2013-02-16T20:49:14.000
> 
> 标签：ipython

`ipython qtconsole`在哪里可以找到安装Windows 7（64 位）所需模块的分步说明？

（对不起，这个问题太简短了。我需要几个小时才能写下我尝试过的所有事情，而且几乎任何人都可以阅读它。我会注意到我发现的所有内容甚至远程相关到 pyqt4 似乎非常特定于 Unix，最多只是粗略地点头 Windows 用户可能会尝试什么......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-13T03:09:38.857

[安装](http://docs.python-guide.org/en/latest/starting/install/win/)[Python 路径](https://stackoverflow.com/a/17176423/1229707)并将其添加到环境变量后：

打开 Windows 命令行 (cmd.exe) 并运行：

```
pip install ipython[all] 
```

或按照[官方网站](http://jupyter.org/qtconsole/stable/#installation)的建议：

```
pip install qtconsole 
```

在 pip 安装完所有包后，您可以通过运行以下命令启动 ipython qtconsole：

```
ipython qtconsole 
```

或者

```
jupyter qtconsole 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T22:09:12.057

我建议使用像 EPD ( [http://www.enthought.com/products/epd_free.php](http://www.enthought.com/products/epd_free.php) ) 这样的完整包分发，它应该可以开箱即用。

否则依赖项是

ZeroMQ、pyzmq、PySide 或 PyQt，以及 pygments，

不幸的是，我们没有足够的用户使用 Windows 来改进安装文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:19:03.843

我买了 Conceptive Engineering [Python Stack](http://www.conceptive.be/python-sdk.html)。我给它 6 分（满分 10 分）（50 美元）。它确实附带了许多出色的二进制文件（包括 QtConsole 和朋友），并且适用于快速 Python+QT 应用程序开发。它还涵盖了一些不错的网络/Web 模块，所有这些模块都带有一个非常好的 Windows 安装程序（32 位 py 平台）。

我也在 64 位 Windows 7 上，这也是我将其标记下来的部分原因。一些软件包开箱即用（tkinter 已开箱即用！但仅在 64 位系统上）。这些家伙（我认为来自比利时）的事情是，QT+Python“开发套件”确实是他们想要提供的所有东西（幸运的是，它包括一个功能强大，虽然有点过时的 IPython 部署）。

最糟糕的部分是支持（哦，当然，他们在德国有 300 美元的一日课程）。我不希望 50 美元的紧急 24 小时电话服务，但他们甚至没有提供像样的自述文件，微不足道的网站支持文档；甚至没有他们刚刚在您的系统上拍打的软件包摘要列表。感觉就像他们向您发送了一个大 tarball，如果他们在您的开始菜单上发布的应用程序不能满足您的需求，请准备好在您的 PYTHONPATH 中挖掘。电子邮件支持也很糟糕。

虽然，我仍然没有放弃它，但 Qt4 相关程序的数量非常有用，并且很难通过其他 python 部署完成。

为了什么值得...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-28T03:10:05.453

我有一个类似的用例，并编写了一些[帮助批处理脚本](https://bitbucket.org/gartenschlauch/miniconda-helpers)来部署 Miniconda，这是 continuum.io 的 Anaconda Python 发行版的精简版。
它还安装了我需要的包，例如用于`ipython qtconsole`.
您可以轻松自定义这些脚本以满足您的需求。它们适用于 Windows x86_64，但也可以配置为 32 位 x86。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T00:38:54.187

在 Windows 上，32 位版本的 EPD 是[免费](http://www.enthought.com/products/epd_free.php)的；它在 Win7-64 上运行良好，但当然是使用 32 位地址空间。此 EPD 安装程序包括 ipython 0.12.1，它足以用于 qtconsole。要将其更新到 ipython 0.13.1（对 ipython notebook 很重要），请使用 EPD 命令“enpkg ipython”（详情请[点击此处](https://support.enthought.com/entries/22415022-Using-enpkg-to-update-EPD-packages)）。

# git - git bash 在尝试拉取或获取时要求输入密码。

> ID：14914954
> 
> 赞同：2
> 
> 时间：2013-02-16T20:49:48.987
> 
> 标签：git, putty

我收到了 ssh-2 密钥，然后我通过 puttygen 将其转换为 SSH-1。每次我使用 Tortoise git GUI 进行拉取或获取时，我都会加载它，并且它不会询问我密码。但是我想改用 git bash ，当我尝试使用 git bash 拉取或获取时，它会要求输入密码。所以我想我也需要为 git bash 加载该密钥或完全禁用密码保护。你能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:59:46.597

正如“ [TortoiseGit with openssh key not authentication using ssh-agent](https://stackoverflow.com/a/13524792/6309) ”（这与您的情况相反：TortoiseGit 不起作用，而 git bash 起作用）中所述，请确保您的`HOME`环境变量的值。

Windows 本身没有定义 HOME，你需要让它引用一个包含`.ssh/...`.

因此，请检查 TortoiseGit 设置中 HOME 的值，并确保在 git bash 会话中设置 HOME 以使任何与 ssh 相关的操作都能正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T21:15:58.500

在 linux 上工作时，您必须将 ssh 密钥放在主目录的 .ssh 文件夹中。

也就是说，在 Windows 上工作的 git“克隆”只是模拟这种行为，将给定目录设计为您的主目录，并期望 ssh-key`HOME\.ssh`在一个名为的文件中`id_rsa`（就像在 Linux 环境中一样） .

无论如何，我不是 Windows 用户，所以我不能很好地解释你应该做什么，但这[是一个在](https://serverfault.com/questions/194567/how-to-i-tell-git-for-windows-where-to-find-my-private-rsa-key)[serverfault](https://serverfault.com/)中提出的非常有用的问题，它很好地解释了接受答案中的设置。

# javascript - 如何从网页调用 Google Apps 脚本

> ID：14914955
> 
> 赞同：11
> 
> 时间：2013-02-16T20:49:53.457
> 
> 标签：javascript, ajax, google-apps-script

对此进行了高低搜索。我有一个基本 HTML/CSS/JS 的网页。我希望用户能够访问该页面，并在打开页面时调用我制作的谷歌脚本，该脚本从电子表格中获取信息并在页面上显示其中的一些信息。我希望我不必像谷歌的教程那样做任何花哨的设置，因为它们都对我没有帮助。

我的网页 ----> Google 脚本 ----> Google 电子表格
我的网页 <---- Google 脚本 <---- Google 电子表格

用户应该能够选择网页上显示的项目（从电子表格填充的项目）并单击一个按钮，该按钮将允许用户输入一个新页面，其 URL 源自所选项目。

这本质上是一个聊天室程序，其中聊天室存储在电子表格中。我希望用户也能够创建一个新的聊天室，它应该更新谷歌电子表格。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-16T21:14:37.277

研究使用 GET 参数。[https://stackoverflow.com/a/14736926/2048063](https://stackoverflow.com/a/14736926/2048063)。

[这是关于该主题的先前问题](https://stackoverflow.com/a/14738143/2048063)。

`doGet(e)`您可以使用 GET 在您的函数中访问由 GET 传递的参数`e.parameter`。如果你打电话`http://script.google......./exec?method=doSomething`，那么

```
function doGet(e) {
  Logger.log(e.parameter.method);
} 
```

`doSomething`在这种情况下，将被写入日志。

可以使用[ContentService](https://developers.google.com/apps-script/content_service)从脚本返回数据，它允许您提供 JSON（我推荐）。JSON 最容易（在我看来）在 GAS 端制作，以及在客户端使用。

最初的“填充列表”调用看起来像这样。我会用 jQuery 编写它，因为我觉得它很干净。

```
var SCRIPT_URL = "http://script.google.com/[....PUT YOUR SCRIPT URL HERE....]/exec";
$(document).ready(function() {
    $.getJSON(SCRIPT_URL+"?callback=?",
              {method:"populate_list"},
              function (data) { 
                alert(JSON.stringify(data)); 
              });
}); 
```

以及产生这个的相应气体。

```
function doGet(e) {
  if (e.parameter.method=="populate_list") {
    var v = {cat:true,dog:false,meow:[1,2,3,4,5,6,4]}; //could be any value that you want to return
    return ContentService.createTextOutput(e.parameter.callback + "(" + JSON.stringify(v) + ")")
        .setMimeType(ContentService.MimeType.JAVASCRIPT);
  }
} 
```

这种方法称为 JSONP，它由 jQuery 支持。`?callback=?`当您在 URL 之后放置 jQuery 时，jQuery 会识别它。它将您的输出包装在一个回调函数中，该函数允许该函数以数据作为参数在您的站点上运行。在这种情况下，回调函数是在读取的行中定义的函数`function (data) {`。

# php - 用 PHP 创建 CSV

> ID：14914957
> 
> 赞同：0
> 
> 时间：2013-02-16T20:50:11.223
> 
> 标签：php, csv, fputcsv

我正在尝试创建一个动态 csv 文件以导出到我网站上的供应商网站。他们希望所有值都用双引号括起来。我正在尝试创建该行，然后将其提供给 fputcsv() 但是当我在 notepad2 中查看它时它会出现大量双引号，而在 Excel 中查看它时它会作为 1 个条目出现。这是我的价值观：

```
$line = '"'.$row->petID.'","'.$row->customID.'","'.$row->petName.'","'.trim($row->breedName1).'","'.trim($row->breedName2).'","'.$df->setGender($row->gender).'","'.$df->setSize($row->size).'","'.$df->setAge($row->age).'","'.$description.'","'.$row->pType.'","'.$df->setStatus($row->status).'","","'.$row->isAltered.'","'.$ND.'","'.$NC.'","'.$NK.'","'.$df->isHousetrained($row->housebroken).'","'.$df->isDeclawed($row->declaw).'","'.$df->isSpecialNeeds($row->isSpecial).'","'.$df->isMix($row->breed2).'","'.$PhotoURL1.'","'.$PhotoURL2.'","'.$PhotoURL3.'"'; 
```

使用文本编辑器输出如下："""13651"","""",""jack"",""Chihuahua"",""Pomeranian"",""M"​​",""S "",""Baby"",""Jack 和 Jose 出生于一只可爱的 7 磅吉娃娃/博美犬混血儿，他们作为流浪狗被带到收容所。他们将在 8 月中旬为新家断奶。尽管父亲不详, 幼犬很可能仍然很小。请访问我们的网站 www.dogswithoutborders.org 以获取 Jack 或 Jose 的在线收养申请，并了解有关我们收养博览会的更多信息。"",""Dog"",""A" ","""",""0"","""","""","""","""","""","""",""1"","" [http://photos.petfinder.com/photos/US/CA/CA1087/20460152/CA1087。 20460152-1-x.jpg](http://photos.petfinder.com/photos/US/CA/CA1087/20460152/CA1087.20460152-1-x.jpg) "","""","""""

当我删除手动添加的“（s）”时，我一开始只得到一个，最后一个。有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T20:54:18.130

使用内置的 CSV 功能！

```
<?php
    $fp = fopen('file.csv', 'w');
    fputcsv($fp, array('item1','items'));
    fclose($fp);
?> 
```

**参考**

*   [fputcsv](http://www.php.net/manual/en/function.fputcsv.php)
*   [fgetcsv](http://www.php.net/manual/en/function.fgetcsv.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-16T20:52:54.040

您可以使用这个 PHP 函数，而不是自己做：

```
fputcsv 
```

文档在这里： http: [//php.net/manual/en/function.fputcsv.php](http://php.net/manual/en/function.fputcsv.php)

如文档中所述，您可以...

```
//put your data in an array like this:
$list = array (
    array('aaa', 'bbb', 'ccc', 'dddd'),
    array('123', '456', '789'),
    array('"aaa"', '"bbb"')
);
//open the output file for writing
$fp = fopen('file.csv', 'w');

//write to the csv file (comma separated, double quote enclosed)
foreach ($list as $fields) {
    fputcsv($fp, $fields,',','"');
}
//close the file
fclose($fp); 
```

# objective-c - 从另一个角度调用方法，我想？

> ID：14914960
> 
> 赞同：0
> 
> 时间：2013-02-16T20:50:31.087
> 
> 标签：objective-c, xcode

我有一个简单的实用程序应用程序，带有 MainViewController.m & h 和 FlipsideViewController.m & h。在我的故事板中，我在 MainViewController 上有一个按钮。我希望能够单击按钮并在 FlipsideViewController.m 中运行一个方法，这可能吗？这是我的第一个应用程序，我完全是新手。欢迎所有意见/建议。

```
enter code here 
```

我在我的 FlipsideViewController.m 中有这个，这是我点击按钮时想要调用的。

```
- (void)SaveFPQData
{
NSLog(@"Data Saved");
} 
```

这就是我在 MainViewController.m 中所拥有的

```
- (IBAction)saveButton:(id)sender
{

} 
```

这是我到目前为止的代码；

主视图控制器.h

```
#import "FlipsideViewController.h"
#import "sqlite3.h"
#import "FPQCheck.h"

@interface MainViewController : UIViewController <FlipsideViewControllerDelegate>

@property (weak, nonatomic) IBOutlet UITextField *nameField;
@property (weak, nonatomic) IBOutlet UITextField *checkField;
@property (weak, nonatomic) IBOutlet UITextField *commentsField;
@property (weak, nonatomic) FlipsideViewController *flipsidecontroller;

- (IBAction)saveButton:(id)sender;
- (IBAction)showHistoryButton:(id)sender;

@end 
```

主视图控制器.m

```
#import "MainViewController.h"
#import "FlipsideViewController.h"
#import "sqlite3.h"

@interface MainViewController ()

@end

@implementation MainViewController

- (void)viewDidLoad
{

[super viewDidLoad];
}

// Do any additional setup after loading the view, typically from a nib.

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

#pragma mark - Flipside View

- (void)flipsideViewControllerDidFinish:(FlipsideViewController *)controller
{
[self dismissViewControllerAnimated:YES completion:nil];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([[segue identifier] isEqualToString:@"showAlternate"]) {
    [[segue destinationViewController] setDelegate:self];
}
}

- (IBAction)saveButton:(id)sender
{
[self.flipsidecontroller SaveFPQData];

//[[NSNotificationCenter defaultCenter] postNotificationName:@"SaveFPQData" object:nil];
}

- (IBAction)showHistoryButton:(id)sender

{

}
@end 
```

FlipSideViewController.h

```
#import <UIKit/UIKit.h>
#import "FPQCheck.h"

@class FlipsideViewController;

@protocol FlipsideViewControllerDelegate

- (void)flipsideViewControllerDidFinish:(FlipsideViewController *)controller;

@end

@interface FlipsideViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>

@property (weak, nonatomic) IBOutlet UITableView *myTableView;

@property (weak, nonatomic) id <FlipsideViewControllerDelegate> delegate;

-(void)SaveFPQData;

- (IBAction)done:(id)sender;
- (IBAction)deleteEntry:(id)sender;

@end 
```

FlipSideViewController.m

```
#import "FlipsideViewController.h"
#import "MainViewController.h"

@interface FlipsideViewController ()
{
NSMutableArray *arrayOfCheck;
sqlite3 *fpqDB;
NSString *dbPathString;

}

@end

@implementation FlipsideViewController

- (void)viewDidLoad
{

/*
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(SaveFPQData)
                                             name:@"SaveFPQData"
                                           object:nil];
 */

[super viewDidLoad];
arrayOfCheck = [[NSMutableArray alloc]init];
[self creatOrOpenDB];
[[self myTableView]setDelegate:self];
[[self myTableView]setDataSource:self];

// Do any additional setup after loading the view, typically from a nib.

}

- (void)SaveFPQData
{
NSLog(@"Data Saved");

}

-(void)creatOrOpenDB
{
NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES);
NSString *docPath = [path objectAtIndex:0];
dbPathString = [docPath stringByAppendingPathComponent:@"FPQ.db"];

char *error;

NSFileManager *fileManager = [NSFileManager defaultManager];
if (![fileManager fileExistsAtPath:dbPathString]) {
    const char *dbPath = [dbPathString UTF8String];

    //create db

    if (sqlite3_open(dbPath, &fpqDB)==SQLITE_OK) {
        const char *sql_stmt = "CREATE TABLE IF NOT EXISTS FPQ (ID INTEGER PRIMARY KEY AUTOINCREMENT, NAME TEXT, CHECK INTEGER, COMMENTS TEXT)";
        sqlite3_exec(fpqDB, sql_stmt, NULL, NULL, &error);
        sqlite3_close(fpqDB);            
    }
}
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

#pragma mark - Actions

- (IBAction)done:(id)sender
{
[self.delegate flipsideViewControllerDidFinish:self];}

- (IBAction)deleteEntry:(id)sender {

}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
} 

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [arrayOfCheck count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (!cell){
    cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
}

FPQCheck *fpqCheck = [arrayOfCheck objectAtIndex:indexPath.row];

NSString *nameANDcheck = [NSString stringWithFormat:@"%@%d", fpqCheck.name, fpqCheck.check];

cell.textLabel.text = nameANDcheck;
cell.detailTextLabel.text = fpqCheck.comments;

return cell;

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:16:41.820

你主要有两种方式：

1.  向您添加一个属性（例如 self.flipSideController）以存储对;`MainViewController`的引用 `FlipsideViewController`然后调用`SaveFPQData`它（例如。`[self.flipSideController SaveFPQData]`；或

2.  使用通知中心发布来自`saveButton:`该触发器的通知`SaveFPQData`；这会是这样的：

    ```
    //-- in flipsidecontroller `viewDidLoad`:
    [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(SaveFPQData)
                                             name:@"SaveFPQData"
                                           object:nil];

    //-- in saveButton:
    [[NSNotificationCenter defaultCenter] postNotificationName:@"SaveFPQData" object:nil]; 
    ```

第二种方法实现起来最简单，IMO，它允许最松散的耦合，但会牺牲一些时钟周期。

编辑：

我并不完全清楚您要做什么（具体来说，我不完全了解如何在显示 FlipsideViewController 后按下 MainViewController 中的按钮；另一方面，如果您不继续使用 FlipsideViewController，那么它不存在，因此您无法向其发送消息），无论如何您可以尝试在以下位置初始化您的`self.flipsideViewController`属性`prepareForSegue`：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
  if ([[segue identifier] isEqualToString:@"showAlternate"]) {
    UIViewController* controller = [segue destinationViewController];
    [controller setDelegate:self];
    if ([controller isKindOfClass:[FlipsideViewController class]])
         self.flipsideViewController = (id)controller;
  }
} 
```

完成此操作后，您`MainViewController`将能够将`saveFPQ`消息发送到`FlipsideViewController`.

如果你的意思是你想在segue-ing 到 FlipsideViewController*之前*`saveFPQ`发送消息，你应该对它进行 segue 并调用方法。*`saveButton``saveFPQ`*

 *我怀疑你需要某种可以从主视图和反面视图控制器访问的“模型”对象。

希望这可以帮助。*

# antlr4 - ANTLR 后记树

> ID：14914962
> 
> 赞同：0
> 
> 时间：2013-02-16T20:50:37.613
> 
> 标签：antlr4

您可以使用 antlr4 TestRig`-ps`生成 PostScript 树。我看不到我的树。

后记：

```
%!PS-Adobe-3.0 EPSF-3.0
%%BoundingBox: 0 0 54 48

0.3 setlinewidth
%% x y w h highlight
/highlight {
        4 dict begin
        /h exch def
        /w exch def
        /y exch def
        /x exch def
        gsave
        newpath
        x y moveto
        0 h rlineto     % up to left corner
        w 0 rlineto     % to upper right corner
        0 h neg rlineto % to lower right corner
        w neg 0 rlineto % back home to lower left corner
        closepath
        .95 .83 .82 setrgbcolor
        fill
        grestore
        end
} def
/ArialMT findfont 11 scalefont setfont
27,662 32,395 moveto
12,616 15,395 lineto
27,662 32,395 moveto
42,709 15,395 lineto
25,831 37,395 moveto
(r) show
stroke
1,000 5,000 moveto
(hello) show
stroke
33,232 5,000 moveto
(part) show
stroke
%%Trailer 
```

GhostView 中的错误：

```
GSview 5.0 2012-01-17
Unknown in Prolog section at line 5:
  %% x y w h highlight

GPL Ghostscript 9.07 (2013-02-14)
Copyright (C) 2012 Artifex Software, Inc.  All rights reserved.
This software comes with NO WARRANTY: see the file PUBLIC for details.
Displaying DSC file C:/develop/libro/test/arbol.ps without pages
Scanning c:\psfonts for fonts... 0 files, 0 scanned, 0 new fonts.
Can't find (or can't open) font file %rom%Resource/Font/ArialMT.
Can't find (or can't open) font file ArialMT.
Querying operating system for font files...
Didn't find this font on the system!
Substituting font Helvetica for ArialMT.
Loading NimbusSanL-Regu font from %rom%Resource/Font/NimbusSanL-Regu... 3168784 1824261 3249480 1962181 2 done.
Error: /undefined in 27,662
Operand stack:

Execution stack:
   %interp_exit   .runexec2   --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--   --nostringval--   false   1   %stopped_push   1932   1   3   %oparray_pop   1931   1   3   %oparray_pop   1915   1   3   %oparray_pop   1803   1   3   %oparray_pop   --nostringval--   %errorexec_pop   .runexec2   --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--
Dictionary stack:
   --dict:1182/1684(ro)(G)--   --dict:0/20(G)--   --dict:82/200(L)--
Current allocation mode is local
Last OS error: No such file or directory

--- Begin offending input ---
0.3 setlinewidth
%% x y w h highlight
/highlight {
        4 dict begin
        /h exch def
        /w exch def
        /y exch def
        /x exch def
        gsave
        newpath
        x y moveto
        0 h rlineto     % up to left corner
        w 0 rlineto     % to upper right corner
        0 h neg rlineto % to lower right corner
        w neg 0 rlineto % back home to lower left corner
        closepath
        .95 .83 .82 setrgbcolor
        fill
        grestore
        end
} def
/ArialMT findfont 11 scalefont setfont
27,662 32,395 moveto
12,616 15,395 lineto
27,662 32,395 moveto
42,709 15,395 lineto
25,831 37,395 moveto
(r) show
stroke
1,000 5,000 moveto
(hello) show
stroke
33,232 5,000 moveto
(part) show
stroke

--- End offending input ---
file offset = 784
gsapi_run_string_continue returns -101 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:44:15.480

Bon, c'est bien simple, il semble que ANTLR 4 génère les chiffres en fonction de la locale, c'est-à-dire, en français : avec une virgule。Et c'est dommage, parce dans ce cas, PostScript n'en trave que dalle。

解决你的问题很简单。似乎 ANTLR 4 使用区域设置生成数字，即在法语中，使用逗号。很遗憾，因为 PostScript 不理解法语（拉丁语？）浮点数。

您应该填写一个但向 ANTLR 4 报告。

在 Unix 上，您可以临时更改 bash 的语言环境

```
export LANG=C 
```

# r - 如何改进这个哈希函数

> ID：14914965
> 
> 赞同：2
> 
> 时间：2013-02-16T20:51:00.753
> 
> 标签：r, hash

有没有办法提高这个哈希的初始化速度？目前这在我的机器上大约需要 20 分钟。

```
#prepare hash()
hash <- list();

mappedV <- # matrix with more than 200,000 elements
for( i in 1:nrow(mappedV) ) {
  hash[[paste(mappedV[i,], collapse = '.')]] <- 0;
} 
```

在这段代码之前，我使用了一个矩阵，但这花了我3个多小时。所以我不会抱怨这 20 分钟。我只是好奇是否有更好的选择。我使用散列函数来计算 200,000 个可能的组合中的每一个。

PS：并发可能是一种选择。但这并不能改善散列。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T21:03:18.923

您通常可以通过预先分配所需长度的列表来节省大量时间，而不是在每次迭代时增加它。

看哪：

```
X <- vector(mode="list", 1e5)
Y <- list()

system.time(for(i in 1:1e5) X[[i]] <- 0)
#    user  system elapsed 
#     0.3     0.0     0.3 
system.time(for(i in 1:1e5) Y[[i]] <- 0)
#    user  system elapsed 
#   48.84    0.05   49.34 
identical(X,Y)
# [1] TRUE 
```

因为整个列表`Y`在每次添加时都会被复制，所以添加额外元素只会随着它的大小增长而变得越来越慢。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-16T21:17:39.083

你也可以`environment`作为一个哈希......让我们看看：

```
mappedV <- matrix(1:100000, ncol=5)
hash1 <- list()
hash2 <- new.env(hash=TRUE)

system.time(for(i in 1:nrow(mappedV)) hash1[[paste(mappedV[i,], collapse = '.')]] <- 0)
#   user  system elapsed 
# 19.263   1.321  21.634 

system.time(for(i in 1:nrow(mappedV)) hash2[[paste(mappedV[i,], collapse = '.')]] <- 0)
#   user  system elapsed 
#  0.426   0.002   0.430 
```

## 更新以回答“需要注意的事项”

正如 Josh O'Brien 指出的那样，这非常快，因为修改时不会复制整个环境。看起来很有用，对吧？

当您期望这些对象在其不变性方面表现得与您习惯的大多数其他对象一样时，可能会出现“问题”。当在`environment`某处修改时，它会在任何地方对其进行更改。例如，如果我们将 传递给`environment`一个删除其所有元素的函数，`environment`则 到处都会被冲洗掉，而列表不会。

见证：

```
hash1 <- list(a=1:10, b=rnorm(10))
hash2 <- new.env(hash=TRUE)
hash2$a <- 1:10
hash2$b <- rnorm(10)

danger <- function(x, axe) {
  for (wut in axe) x[[wut]] <- NULL
}

## the list is safe
danger(hash1, names(hash1))
hash1
# $a
#  [1]  1  2  3  4  5  6  7  8  9 10
#
# $b
# [1] -0.8575287  0.5248522  0.6957204 -0.7116208
# [2]  0.5536749  0.9860218 -1.2598799 -1.1054205
# [3]  0.3472648

## The environment gets mutilated
danger(hash2, names(hash1))
as.list(hash2)
# $a
# NULL
# 
# $b
# NULL 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T18:29:56.370

它不像使用环境那么快，但是有一个直接的矢量化解决方案来解决这个问题：

```
mappedV <- matrix(1:100000, ncol = 5)
hashes <- apply(mappedV, 1, paste, collapse = ".")

hash <- list()
hash[hashes] <- 0 
```

或者当然你可以把一个 0 的向量变成列表并命名它：

```
hash <- as.list(rep(0, length = length(hashes)))
names(hash) <- hashes 
```

这在我的电脑上需要 <0.001s。

# iphone - iOS CXMLElement 字符串值

> ID：14914967
> 
> 赞同：0
> 
> 时间：2013-02-16T20:51:28.467
> 
> 标签：iphone, ios, objective-c, parsing, touchxml

我正在尝试在这里解析 xml 并正确获取我的 CXMLElement。例如，一个记录这个

```
<CXMLElement 0x1d8cfdc0 [0x1c556660] TrackDetail <TrackDetail>Tracked</TrackDetail>> 
```

但在这种情况下，我无法获取字符串值`Tracked`。我试过了

```
CXMLNode *title = [[fd objectAtIndex:indexPath.row] nodeForXPath:@"TrackDetail" error:nil]; 
```

但记录这个返回`null`。有人知道如何获取 CXMLElement 的 stringValue 吗？

这是示例xml

```
<TrackResponse>
 <TrackInfo ID="9400110200793563195827">
  <TrackSummary>
  The delivery status for this item has not been updated as of February 07, 2013, 11:34 pm.
  </TrackSummary>
  <TrackDetail>
  Out for Delivery, February 07, 2013, 9:34 am, MASSAPEQUA, NY 11758
  </TrackDetail>
  <TrackDetail>
  Sorting Complete, February 07, 2013, 9:24 am, MASSAPEQUA, NY 11758
  </TrackDetail>
  <TrackDetail>
  Arrival at Post Office, February 07, 2013, 6:00 am, MASSAPEQUA, NY 11758
  </TrackDetail>
  <TrackDetail>
  Depart USPS Sort Facility, February 05, 2013, GRAND FORKS, ND 58201
  </TrackDetail>
  <TrackDetail>
  Processed at USPS Origin Sort Facility, February 04, 2013, 7:13 pm, GRAND FORKS, ND 58201
  </TrackDetail>
  <TrackDetail>
  Accepted at USPS Origin Sort Facility, February 04, 2013, 5:58 pm, EAST GRAND FORKS, MN 56721
  </TrackDetail>
  <TrackDetail>
  Electronic Shipping Info Received, February 04, 2013
  </TrackDetail>
  <TrackDetail>
  Shipment Accepted, February 04, 2013, 2:19 pm, EAST GRAND FORKS, MN 56721
  </TrackDetail>
 </TrackInfo>
</TrackResponse> 
```

我用这个解析它

```
NSArray *arr = [parser nodesForXPath:@"//TrackResponse/TrackInfo/TrackSummary" error:nil];
NSArray *p = [parser nodesForXPath:@"//TrackResponse/TrackInfo" error:nil];
if ([p count]>0) {
    for (CXMLElement *resultElement in p) {
        for(int counter = 0; counter < [resultElement childCount]; counter++) {
            NSLog(@"%@", [[[resultElement nodesForXPath:@"TrackDetail" error:nil] objectAtIndex:counter] stringValue]);
            [self.arr1 setObject:[[[resultElement nodesForXPath:@"TrackDetail" error:nil] objectAtIndex:counter] stringValue] forKey:@"det"];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T01:27:26.267

这个怎么样：

```
NSMutableArray *array = [[NSMutableArray alloc] init];
NSArray *p = [parser nodesForXPath:@"//TrackResponse/TrackInfo" error:nil];
if ([p count]>0) {
    for (CXMLElement *resultElement in [[p objectAtIndex:0] elementsForName:@"TrackDetail"]) {
          [array addObject:[resultElement stringValue]];
        }
    }
} 
```

无法测试它，但它类似于我以前使用过的一些代码。

# arrays - Visual C++ 合并排序

> ID：14914968
> 
> 赞同：0
> 
> 时间：2013-02-16T20:51:30.707
> 
> 标签：arrays, algorithm, c++-cli, mergesort

我试图弄清楚为什么以下代码不进行合并排序。代码编译良好，没有运行时错误。SortCollection 方法只返回一个未排序的数组。没有编译错误，也没有运行时错误，只返回一个未排序的数组。任何指针都会非常感激。

```
#include "stdafx.h"
#include <deque>
#include <climits>
#include <stdio.h>

using namespace System;
using namespace System::Collections;
using namespace System::Collections::Generic;

generic <typename T> where T: IComparable<T>
ref class MergeSort
{
public:
// constructor
MergeSort(){}

// SortCollection() method
array<T>^ SortCollection(array<T>^ inputArray)
{
    int n = inputArray->Length;
    if (n <= 1)
    {
        return inputArray;
    }
    array<T>^ array1 = gcnew array<T>(inputArray->Length / 2);
    array<T>^ array2 = gcnew array<T>(inputArray->Length - array1->Length);
    int array1Count = 0;
    int array2Count = 0;
    for (int i = 0; i < n; i++)
    {
        if (i < n / 2)
        {
            array1[array1Count] = inputArray[i];
            array1Count++;
        }
        else
        {
            array2[array2Count] = inputArray[i];
            array2Count++;
        }
    }
    SortCollection(array1);
    SortCollection(array2);
    array<T>^ newArray = gcnew array<T>(inputArray->Length);
    delete inputArray;
    return Merge(newArray, array1, array2);
}

array<T>^ Merge(array<T>^ targetArray, array<T>^ array1, array<T>^ array2)
{
    int n1 = array1->Length;
    int n2 = array2->Length;
    int x1 = 0;
    int x2 = 0;
    int counter = 0;
    while (x1 < n1 && x2 < n2)
    {
        if (array1[x1]->CompareTo(array2[x2]) < 0)
        {
            targetArray[counter] = array1[x1];
            x1 ++;
            counter++;
        }
        else
        {
            targetArray[counter] = array2[x2];
            x2 ++;
            counter++;
        }
    }
    while (x1 < n1) 
    {
        targetArray[counter] = array1[x1];
        counter ++;
        x1 ++;
    }
    while (x2 < n2) 
    {
        targetArray[counter] = array2[x2];
        counter ++;
        x2 ++;
    }
    return targetArray;
}
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T00:02:14.873

嗯...但是您在打印/测试什么？原始数组还是什么 Sort 返回？无论如何，试试这个：

```
SortCollection(array1);                
SortCollection(array2);          
// array<T>^ newArray = gcnew array<T>(inputArray->Length);
// delete inputArray;                 ---> "reuse" the input array        
return Merge(inputArray, array1, array2); 
```

编辑：我相信你知道这一点，但你只需要更加注意它。

“正常”函数接受参数并返回结果，而不更改参数：

```
Y=f(x); 
```

您希望`x`和以前一样，结果在`y`. 这些都是很好的功能。但是某些函数会改变参数。有时它很明显，比如在

```
Destroy(x); 
```

但通常不是很明显，比如

```
y=sort(x); 
```

通过`x`“按值”传递是保证不会被更改，但如果函数采用某种引用（如`type^ x`），它可以直接访问原始变量并可以更改其内容。这种二元性就是你所拥有的（in`SortCollection`和 in `Merge`）。你需要决定并“<em>记录”你的函数返回什么以及如何修改它的参数。

在一个版本中（带有`delete`），您修改了**删除它**的参数！！！这通常不是一个好主意，必须有很好的记录。排序后的数组作为“返回值”传递（实际上也是一种引用）。此版本修改了参数，但结果在返回中（这就是您需要使用/测试/打印的内容）。

没有删除的版本通过将排序数组放入其中来修改参数。在这种情况下，它可能完全是您想要的。无论如何——记录下来！它也返回对排序数组的引用，即参数。这样做是为了方便，但为了更好的可读性可以排除，并且“返回”只是无效的。

第三种变体可以是，不修改参数，并返回排序后的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:28:06.990

这里有一个问题：

```
SortCollection(array1);              // array1 is deleted??
SortCollection(array2);              // you dont use any result from here?
array<T>^ newArray = gcnew array<T>(inputArray->Length);
delete inputArray;                   // sort, deleted input array !
return Merge(newArray, array1, array2); 
```

这里对吗？？

```
array1=SortCollection(array1);                
array2=SortCollection(array2);          
array<T>^ newArray = gcnew array<T>(inputArray->Length);
delete inputArray;                     
return Merge(newArray, array1, array2); 
```

# android - 在标准 Android 应用程序中包装 C 命令行可执行文件

> ID：14914970
> 
> 赞同：3
> 
> 时间：2013-02-16T20:51:53.210
> 
> 标签：android, c, native

我有一个已成功为 Android 编译的 C 命令行可执行文件。我可以通过执行以下操作复制可执行文件并`Android Terminal Emulator`在我的 Android ICS 手机上启动它：

1.  执行“导出 TERMINFO=/etc/terminfo”
2.  执行“mount -o remount rw /sdcard”
3.  从 sdcard 启动可执行文件

第一步是必要的，因为命令行应用程序使用 ncurses 库，如果我没有设置 TERMINFO，那么当我尝试启动应用程序时会出现错误。如果我离开第二步，那么当我尝试从 sdcard 启动命令行应用程序时，我会收到“拒绝访问”。因此，只要我手动执行这些步骤，我就可以启动命令行可执行文件。

现在我想做的是将此命令行可执行文件包装在标准的 Android 应用程序中。的源代码`Android Terminal Emulator`是开源的，因此我可以使用它来打开`EmulatorView`我的 Android 应用程序内部。不过，我的问题是如何将本机可执行文件包含`apk`在`EmulatorView`. 我有点担心我是否能够克服版权问题，以便可以启动本机命令行可执行文件。

我确实知道 Android NDK，但*不*希望重新编写一个工作命令行应用程序，以便它可以作为一个库包含在内。我特别关注将 C 可执行源保持原样并从包装应用程序执行它。有谁知道这是否可行，如果可以，我将如何去做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:04:22.813

如果您将文件复制到`native`您应该具有适当权限的数据文件夹下，然后用于`Runtime.exec`执行您的文件。

您可以创建一个`bin`文件夹（或任何名称）并将文件复制到

```
Process exeProcess = 
         Runtime.getRuntime().exec("/data/data/YOUR_PACKAGE/bin/EXECUTABLE_FILE"); 
```

您可以使用该对象`exeProcess`从可执行文件中读取数据。

# javascript - jQuery Masonry - 我希望 div 滚动，而不是页面

> ID：14914973
> 
> 赞同：0
> 
> 时间：2013-02-16T20:52:05.120
> 
> 标签：javascript, jquery, jquery-plugins, jquery-masonry

让我描述一下我正在努力实现的目标。在浏览器的左侧，我有用于过滤数据的所有类型的复选框和单选按钮。在右侧，我使用 jQuery Masonry 显示该数据。现在，当数据集很大时，您必须在页面上向下滚动。我想在 div 上指定一个高度并向下滚动，以便用户可以随时查看他们的过滤器选择。有人用 Masonry 做过这个吗？我已经在几个不同的场合“用谷歌搜索”过，但似乎找不到任何这样做过的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:22:54.653

我无法解释为什么会这样，只能说它纯粹是为了我自己的目的。

```
<style type="text/css">
#results {overflow: auto;}
</style>
<script type="text/javascript">
    $(function () {           
        $("#results").masonry({
            itemSelector : '.item',
            isFitWidth: true,
            isAnimated: true
          }).css("height", "450px");
</script> 
```

除了 Chrome 之外，我还没有在任何东西上看过这个，但我会在推出之前对其进行更彻底的测试。

# c++ - 如何使用 std::greater 对 C++ 映射键进行排序？

> ID：14914974
> 
> 赞同：6
> 
> 时间：2013-02-16T20:52:09.100
> 
> 标签：c++

我`std::map<int, int>`在 C++ 中创建一个我希望它们的键从最高到最低排序，而不是默认排序顺序。我的研究使我找到了看起来很有希望的[std::greater](http://www.cplusplus.com/reference/functional/greater/)但是在尝试使用它时出现编译错误：

> 一元'*'的无效类型参数（有'int'）

我的地图声明是：

```
std::map<int, int, std::greater<int> > numMap; 
```

这个函数抛出了错误：

```
void Row::addNumber(int num, int pos) {
    numMap.insert(num, pos);
} 
```

诸如此类的类似问题的答案[包括](https://stackoverflow.com/questions/14828476/confusion-about-using-stdless-and-stdgreater-with-stdsort)声明中的括号，即 std::greater **()** - 但是当我包含这些问题时，我会收到有关返回函数的函数的多个错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-16T20:58:41.510

问题——`std::map::insert`使用无效参数调用成员函数：提供了两个整数值；但**必须有** `std::pair<int, int>`。请参阅参考资料：[std::map::insert](http://en.cppreference.com/w/cpp/container/map/insert)。

# 首选方案

为**方便起见**（只是为了**不重复**地图类型参数），为地图创建一个`typedef`：

```
typedef std::map<int, int> IntMap; 
```

具有（对表示）的`std::map`类型定义- 。因此，例如，如果有 a the would be 。`std::pair``std::map::value_type``std::map<int, int>``std::map::value_type``std::pair<int, int>`

使用`std::map::value_type`构造函数（`IntMap::value_type`在这种情况下）：

```
class Row {
public:
    void Row::addNumber(int num, int pos)
    {
        m_numMap.insert(IntMap::value_type(num, pos));
    }

private:
    typedef std::map<int, int> IntMap;
    IntMap m_numMap;
}; 
```

# 备择方案：

1.  使用`std::make_pair()`功能：

    ```
    #include <utility>

    ...

    void Row::addNumber(int num, int pos)
    {
        numMap.insert(std::make_pair(num, pos));
    } 
    ```

2.  直接使用`std::pair`构造函数：

    ```
    void Row::addNumber(int num, int pos)
    {
        numMap.insert(std::pair<int, int>(num, pos));
    } 
    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-16T21:05:56.427

比谢尔盖的答案更迂腐（这也绝对有效），而是使用：

```
typedef std::map<int, int, std::greater<int> > MyMap;
MyMap numMap;

void Row::addNumber(int num, int pos)
{
    numMap.insert(MyMap::value_type(num, pos));
} 
```

好处是，如果您更改地图的类型，您以后需要更改的代码就更少了。而且不太可能但仍然有可能，如果实施`std::map`将其`value_type`从更改`std::pair`为其他内容（在 的未来版本中`stl`），您将不受该更改的影响。

# eclipse - 从 Eclipse 运行时 Webapp 的行为符合预期，而导出为战争失败

> ID：14914983
> 
> 赞同：0
> 
> 时间：2013-02-16T20:52:51.407
> 
> 标签：eclipse, unicode, tomcat7, war, servlet-3.0

这一直让我发疯。

所以我有一个（非常简单的 vanilla servlet 3）网络应用程序。当我在eclipse中运行它时一切都很好。除其他外，我可以*使用 Unicode（希腊）用户名注册一个帐户，*然后以站点管理员身​​份登录并访问用户的个人资料。当我将战争导出到 `$CATALINA_HOME\webapps`，启动`$CATALINA_HOME\bin\startup.bat`，在浏览器中打开站点，以管理员身份登录并尝试访问用户配置文件时，用户名等显示为空白。in和 in 中
的文件仅在 (in ) 行中有所不同：`...\apache-tomcat-7.0.32\conf``...\eclipse_workspaces\javaEE\Servers\Tomcat v7.0 Server at localhost-config``server.xml`

```
<Context docBase="ted2012" path="/ted2012" reloadable="true" 
source="org.eclipse.jst.jee.server:ted2012"/> 
```

这是一个日食的事情。

配置文件 servlet 中的 doGet 方法（精简）：

```
protected void doGet(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {

    final String username = Helpers.decodeRequest(request
            .getParameter("user"));
    if (username != null) {
        User user = null;
        try {
            System.out
                    .println("ProfileController.doGet() user name DECODED : "
                            + username);
            user = userService.getUserWithUsername(username); // THIS FAILS
            System.out.println("ProfileController.doGet() user : " + user);
            request.setAttribute("userToShow", user);
        } catch (ServiceExDBFailure e) {
            log.debug("ProfileController::doGet", e);
            request.setAttribute("ErrorString", e.getMessage());
        }
        sc.getRequestDispatcher(OTHERPROFILE_JSP)
                .forward(request, response);
        return;
    } else {
        //does not apply
    }
} 
```

解码方法是：

```
public static String decodeRequest(String parameter)
        throws UnsupportedEncodingException {
    if (parameter == null)
        return null;
    System.out.println("decode - request.getBytes(\"iso-8859-1\"):"
            + new String(parameter.getBytes("iso-8859-1")));
    System.out.println("decode - request.getBytes(\"iso-8859-1\") BYTES:"
            + parameter.getBytes("iso-8859-1"));
    for (byte iterable_element : parameter.getBytes("iso-8859-1")) {
        System.out.println(iterable_element);
    }
    System.out.println("decode - request.getBytes(\"UTF-8\"):"
            + new String(parameter.getBytes(CHARSET_FOR_URL_ENCODING))); // UTF-8
    return URLDecoder.decode(new String(parameter.getBytes("iso-8859-1")),
            CHARSET_FOR_URL_ENCODING);
} 
```

虽然 db 调用是：

```
 statement = conn.prepareStatement(query);
            statement.setString(1, username);
            System.out.println("ελληναρα");
            System.out.println(statement);
            set = statement.executeQuery();
            if (set.next()) {
                User user = new User();
                // user.setId(set.getInt("ID"));
                user.setUsername(set.getString("username"));
                user.setName(set.getString("name"));
                user.setSurname(set.getString("surname"));
                user.setPassword(set.getString("password"));
                user.setEmail(set.getString("email"));
                user.setRole(RolesENUM.values()[set.getInt("role")]);
                return user; // if the set is empty null is returned
            } 
```

Tomcat 打印：

```
decode - request.getBytes("iso-8859-1"):╧à╧â╧ä╬╡╧?╬╣╬▒
decode - request.getBytes("iso-8859-1") BYTES:[B@529b9ed
-49
-123
-49
-125
-49
-124
-50
-75
-49
-127
-50
-71
-50
-79
decode - request.getBytes("UTF-8"):├?┬à├?┬â├?┬ä├Ä┬╡├?┬?├Ä┬╣├Ä┬▒
ProfileController.doGet() user name DECODED : ╧à╧â╧ä╬╡╧?╬╣╬▒
com.mysql.jdbc.JDBC4PreparedStatement@766d7940: SELECT * FROM users WHERE username='╧à╧â╧ä╬╡╧?╬╣╬▒'
????????
ProfileController.doGet() user : null 
```

而 Eclipse 打印：

```
decode - request.getBytes("iso-8859-1"):υστερια
decode - request.getBytes("iso-8859-1") BYTES:[B@4b6a6bdf
-49
-123
-49
-125
-49
-124
-50
-75
-49
-127
-50
-71
-50
-79
decode - request.getBytes("UTF-8"):ÏÏÏÎµÏÎ¹Î±
ProfileController.doGet() user name DECODED : υστερια
com.mysql.jdbc.JDBC4PreparedStatement@37d02427: SELECT * FROM users WHERE username='υστερια'
ελληναρα
ProfileController.doGet() user : com.ted.domain.User@63144ceb 
```

我相信由于某种原因，到达数据库的查询是疯狂的 - 请注意，在 eclipse 中的哪个位置打印 ελληναρα 在 tomcat 打印 ???????? 而 unicode 用户名 (υστερια) 打印为 ╧à╧â╧ä╬╡╧?╬╣╬▒ 而不是 ?????????。

所以问题是 - Eclipse 部署和 tomcat 部署之间有什么变化？为什么数据库返回 null ？我真的真的试图徒劳地调试这个

帮助

编辑：更换线路 `statement.setString(1, username);`没有`statement.setString(1, "υστερια");`失败。因此，当这条线运行时，字节被弄乱了 - 请注意，尽管字节是一一相同的

**EDIT2：**本地主机上的 Tomcat v7.0 服务器 Eclipse 启动 VM args（为便于阅读而拆分）：

```
-Dcatalina.base="C:\Dropbox\eclipse_workspaces\javaEE\.metadata\.plugins
\org.eclipse.wst.server.core\tmp1" 
-Dcatalina.home="C:\_\apache-tomcat-7.0.32" 
-Dwtp.deploy="C:\Dropbox\eclipse_workspaces\javaEE\.metadata\.plugins\org.eclipse.wst.server.core\tmp1\wtpwebapps" 
-Djava.endorsed.dirs="C:\_\apache-tomcat-7.0.32\endorsed" 
```

**注意**：[应用程序的启动是动态创建的](https://stackoverflow.com/questions/13103550/eclipse-launch-configuration-for-web-project)

**编辑 2013.03.30**：这现在在[github 上-](https://github.com/Utumno/ted2012)[在这里](https://stackoverflow.com/questions/12913264/eclipse-vs-tomcat-deployment-exported-war-partially-fails-while-the-project)查看我更一般的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T13:26:42.917

这终于[在这里](https://stackoverflow.com/a/15745520/281545)得到了回答。

答案的要点是，我 Eclipse 将 UTF-8 和 Tomcat 作为默认编码，`windows-1252`所以*当我调用 new String() 而不指定用于将 byte[] 转换为 chars 的编码时*。正在做

```
new String(parameter.getBytes("iso-8859-1"), "UTF-8"); 
```

解决了这个问题——*如果*tomcat在

```
request.getParameter("user") // url decoding is performed by tomcat - using the
// URIEncoding from server.xml or by default ISO-8859 
```

默认情况下不会使用 ISO-8859 作为另一种编码（比如 ASCII）可能*会*（在 Java 7 nio 之前行为未定义且不可控制）替换不可解码的字符，`?`因此`parameter`字符串将被损坏（请参阅[ISO-8859-1 编码和二进制数据保存](https://stackoverflow.com/questions/15925458/iso-8859-1-encoding-and-binary-data-preservation)） .

因此，对 tomcat 表示敬意，因为它默认使用 ISO-8859 执行转换，`request.getParameter()`而对 Java ee 规范的人来说，他们甚至没有在文档中提到 getParameter 将执行 URL 解码，更不用说让我们指定编码，覆盖 server.xml .

# c++ - 如何通过 C++ 中的数据获取向量的索引？

> ID：14914985
> 
> 赞同：2
> 
> 时间：2013-02-16T20:52:58.953
> 
> 标签：c++, search, vector

假设我有一个`vector<node>`包含 10000 个对象：

```
vect[0] to vect[9999]

struct node
{
    int data;
}; 
```

假设我想找到包含此数据（“444”）的向量 id，它恰好位于节点 99 中。

我真的必须做一个*for*循环来遍历所有元素然后使用

```
if (data == c[i].data) 
```

还是有更快的方法？考虑到我的数据是不同的，不会在其他`node`s 中重复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T02:42:28.547

对于这个答案，我假设您已做出[**明智的决定，使用 a`std::vector`而不是其他可用的容器**](https://stackoverflow.com/questions/471432/in-which-scenario-do-i-use-a-particular-stl-container/471461#471461)。

> 我真的必须做一个for循环来循环所有元素吗？

不，您不必滚动`for`-loop 来查找元素。在容器中查找元素的惯用方法是使用标准库中的算法。你是否*应该*自己滚动真的取决于情况。

为了帮助您决定...

## 备选方案 1：

[**`std::find()`**](http://en.cppreference.com/w/cpp/algorithm/find)要求有一个适合您的`node`数据类型的相等比较器，这可能很简单：

```
bool operator ==(node const& l, node const& r)
{
    return l.data == r.data;
} 
```

然后，给定 a `required` `node`，您可以搜索该元素。这将返回一个*迭代器*（如果您使用的是普通的旧数组，则返回一个*指针）。*如果你需要*index*，这需要一点计算：

```
auto i = std::find(v.begin(), v.end(), required);
if (i != v.end())
{
    std::cout << i->data << " found at index " << i - v.begin() << std::endl;
}
else
{
    std::cout << "Item not found" << std::endl;
} 
```

## 备选方案 2：

如果创建 a`node`太昂贵或者您没有相等运算符，则更好的方法是使用[**`std::find_if()`**](http://en.cppreference.com/w/cpp/algorithm/find)，它需要一个谓词（这里我使用 lambda 因为它很简洁，但您可以[使用类似this answer中的仿函数](https://stackoverflow.com/a/14919397/78845)）：

```
// Alternative linear search, using a predicate...
auto i = std::find_if(v.begin(), v.end(), [](node const& n){return n.data == 444;});
if (i != v.end())
{
    std::cout << i->data << " found at index " << i - v.begin() << std::endl;
}
else
{
    std::cout << "Item not found" << std::endl;
} 
```

> 还是有更快的方法？

再次，这取决于。`std::find()`并`std::find_if()`以线性时间（***O*** ( *n* )) 运行，与您的`for`-loop 相同。

也就是说，使用`std::find()`或不涉及对容器的随机访问或索引（它们使用迭代器），但与您的循环`std::find_if()`相比，它们可能需要一些额外的代码。`for-`

## 备选方案 3：

如果运行时间很关键并且您的数组已排序（例如使用[`std::sort()`](http://en.cppreference.com/w/cpp/algorithm/sort)），您可以执行二进制搜索，该搜索以对数时间（***O*** (log *n* )）运行。*实现对不小于*给定值[**`std::lower_bound()`**](http://en.cppreference.com/w/cpp/algorithm/lower_bound)的第一个元素的二进制搜索。不幸的是，它不需要谓词，但需要适合您的数据类型的小于比较器，例如：*`node`*

 *```
bool operator <(node const& l, node const& r)
{
    return l.data < r.data;
} 
```

该调用类似于`std::find()`并返回一个*iterator*，但需要额外检查：

```
auto i = std::lower_bound(v.begin(), v.end(), required);
if (i != v.end() && i->data == required.data)
{
    std::cout << i->data << " found at index " << i - v.begin() << std::endl;
}
else
{
    std::cout << "Item not found" << std::endl;
} 
```

[算法库中的](http://en.cppreference.com/w/cpp/algorithm)这些函数可与任何提供迭代器的容器一起使用，因此切换到另一个容器`std::vector`将是快速且易于测试和维护的。

**决定权在你！**

[[在此处查看演示。]](http://ideone.com/WLXXFg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:05:17.623

一个巧妙的解决方案是在结构中添加一个额外的`int index`成员，以`node`在您拥有结构的实例时提供数据到索引的映射。在这种情况下，您可能应该包装`std::vector`一个`NodeVector`类，该类将处理索引的更新，例如，当您删除一个项目时（在这种情况下，从元素的索引中减去 1 就足够了，在这种情况下，该元素先于被删除的元素）等等。如果向量不改变元素的数量，那甚至都不是问题。除此之外，如果您不能让 struct 的实例大小增加，请使用`std::map`. 遍历容器以找到一个项目并不是很聪明，除非您很少需要这样做并且使任何复杂的事情都不值得麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T20:54:40.657

你应该使用`std::find`. `O(n)`如果你事先对向量一无所知（比如它被排序），你就不会比线性复杂度 ( ) 更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T20:56:25.133

如果您想在容器中查找元素，则`vector`不是正确的数据结构。您应该使用有序容器，例如`std::set`或`std::map`。由于这些容器中的元素保持有序（排序），我们可以及时找到元素，`O(log (n))`而不是无序容器的线性时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-16T20:57:08.647

使用[`std::find`](http://en.cppreference.com/w/cpp/algorithm/find)：

```
vector<int>::Iterator it = find (vect.begin(), vect.end(), 444); 
```

请注意，如果您对向量进行了排序，则可以使其更快。*

# javascript - 如何让这个颜色选择器在没有滚动条的模式中显示？

> ID：14914986
> 
> 赞同：1
> 
> 时间：2013-02-16T20:53:00.613
> 
> 标签：javascript, jquery, css, twitter-bootstrap

我有一个带有颜色选择器的引导模式。当我选择更改颜色时，除非向下滚动，否则您看不到完整的调色板。

作为测试，我在模式中放置了一个 jqueryui 日期选择器，当您单击它时会显示完整的日期选择器。如何使用颜色选择器获得相同的功能？我尝试更改颜色选择器的 z-index，但这似乎没有任何作用。

（注意：我不想要[这个](http://www.revillwebdesign.com/change-the-height-width-and-position-of-a-modal-in-twitter-bootstrap/)，模态的高度会发生变化）

这是[我的小提琴](http://jsfiddle.net/C7hAY/)和代码：

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Datepicker - Default functionality</title>
<script src="http://code.jquery.com/jquery-1.8.1.js"></script>
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/js/bootstrap.min.js"></script>
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-combined.min.css" rel="stylesheet">
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />

<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>

<link href="http://evoluteur.github.com/colorpicker/css/evol.colorpicker.css" rel="stylesheet" /> 
<script src="http://evoluteur.github.com/colorpicker/js/evol.colorpicker.min.js" type="text/javascript"></script>
<script>
$(document).ready(function(){
    $("#color_picker").colorpicker();
});

$(function() {
    $( "#datepicker" ).datepicker();
});
</script>
</head>

<body>

    <!-- Button to trigger modal -->
    <a href="#myModal" role="button" class="btn" data-toggle="modal">Launch demo modal</a>

    <!-- Modal -->
    <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Modal header</h3>
    </div>
    <div class="modal-body">
    <p>Date: <input type="text" id="datepicker" /></p>
    <input id="color_picker" value="#92cddc"/>
    </div>
    <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
    </div>
    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T21:03:18.920

您可以将`overflow-y`模态体的属性设置为可见：

```
#myModal .modal-body {
    overflow-y: visible;
} 
```

**编辑：**

如果您的内容不适合对话框，则必须更改`height`或`max-height`属性以适合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:16:54.363

您可以在单击时将事件添加到打开颜色选择器的输入，如下所示

```
$(document).ready( function (){
    $('#color_picker').click(function (){
        $('.modal-body').animate({minHeight: '300px'});        
    });
}); 
```

然后点击颜色框或其他动画高度回到原来的数量希望它有所帮助，再见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-11T21:27:25.283

这只是一种变通绷带解决方案。您可以在 evol.colorpicker.js 源代码中修改以下函数。也许，您可以尝试在不更改源代码的情况下将其转换为原型或扩展函数。

```
 _create: function() {
            ..............................
             // change the following code to pass the evt to show palette
    if(showOn==='both' || showOn==='button'){
                e.next().on('click', function(evt){
                    evt.stopPropagation();
                    that.showPalette(evt);
                });
            }
                     }               
             }
              ....................

  showPalette: function (e) {       
    if(this._enabled){
        this._active=true;
        $('.colorPicker').not('.'+this._id).colorpicker('hidePalette');
        if(this._palette===null){
            this._palette = $('#YOUR_DIALOG_DIV_ID')                                        
                .after(this._paletteHTML()).next()
                .css({ top: e.clientY + 'px', left: e.clientX + 'px', position: 'absolute' })
                .on('click',function(evt){
                    evt.stopPropagation();
                });
            this._bindColors();
            var that=this;
            if(this._isPopup){
                $(document.body).on('click.'+that._id, function(evt){
                    if(evt.target!=that.element.get(0)){
                        that.hidePalette();
                    }
                }).on('keyup.'+that._id, function(evt){
                    if(evt.keyCode===27){
                        that.hidePalette();
                    }
                });
            }
        }
    }
    return this;
}, 
```

# processing - 正在处理中重置游戏

> ID：14914990
> 
> 赞同：-2
> 
> 时间：2013-02-16T20:53:35.840
> 
> 标签：processing

我正在处理中制作 Tron 游戏。我已经完成了所有游戏，但我不知道如何添加重置选项以在玩家输掉后开始新游戏。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:53:15.287

好吧，通常您应该创建一个方法来重置/重新创建/删除重新启动游戏所需的内容。喜欢（伪）：

```
 void reset(){
     score = 0;
     ballsList.removeAll();
     playerPositionX = 0; 
     playerPositionY = 0;
    } 
```

然后在需要时调用它。避免使用“init”作为方法的名称，否则您将覆盖内置方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-21T21:52:07.040

一个简单的开关盒不能正常工作吗？

```
Switch (levels):

Case one:

Case last level:

If (this == that){
levels = one;
break
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-03T05:13:09.323

我要说的是把你的整个游戏代码包装在一个函数中，比如`void inGame(){gamecodeing}`当事情发生时`if (player.state == "dead"){inGame();}`，以及开始时的游戏。像这样：

```
void setup() {
    size(500,500);
}
void draw() {
    inGame();
    if (playerHasLost) {inGame();}
}
void inGame() {gameStuff} 
```

并且每次`inGame()`被称为它都会重新开始。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-10-05T10:07:52.507

我建议`setup()`再次运行。
然后将您的变量存储在其中，例如`x = 0;`, `score = 0;`。