# StackOverflow 问答 15382000-15382999

# android - 画布drawText绘制错误的位置

> ID：15382004
> 
> 赞同：2
> 
> 时间：2013-03-13T09:58:18.527
> 
> 标签：android, android-canvas, drawtext

我在用;

```
mCanvas.drawText(c.getText(), c.getCordX(), c.getCordY(), a); 
```

在我的画布对象上绘制文本。在 Galaxy Nexus 文本值显示为真点，但在 ASUS 变形金刚平板上，所有这些值都出现如下图所示的假点。有任何想法吗？

![在此处输入图像描述](../Images/f9881101196da1d58ad137ed3152c430.png)

![在此处输入图像描述](../Images/05e18dfe64c67a551f0f9a6bf031b220.png)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:43:08.670

问题解决了。以前我只将模板背景图像放在 drawable-xhdpi 文件夹中。现在，我把图像，所有 hdpi，mdpi，ldpi 文件夹，问题解决了。

# c# - 使用 Facebook 应用程序与 Facebook 进行网站集成

> ID：15382006
> 
> 赞同：0
> 
> 时间：2013-03-13T09:58:29.407
> 
> 标签：c#, facebook-graph-api, authentication, facebook-c#-sdk, iframe-app

我创建了一个名为“数字营销”的 Facebook 应用程序，我想从 Facebook 应用程序打开我的网站页面，我在应用程序的“Canvas Url”部分提供了我的网站 URL。单击应用程序后，我的网站正在打开，但我想直接从我的网站中的 Facebook（用户登录信息）自动填充字段（名字、姓氏、电子邮件）。主要目标是用户不必在我的网站中再次输入他/她的信息，它将直接来自 Facebook。[它会提示用户允许他/她的信息将被共享----- 如果他/她“允许”它------------ 那些公开信息（名字，姓氏，电子邮件）将在我的网站页面文本框字段中动态填充。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:04:25.463

使用 facebook oAuth ie) 使用 facebook 签名以获取通过 user 签名的用户的详细信息。您可以获取必要的用户详细信息，例如姓名、电子邮件、dob 等，

# angularjs - 如何使用 angular-dragdrop 实现拖放

> ID：15382008
> 
> 赞同：2
> 
> 时间：2013-03-13T09:58:40.733
> 
> 标签：angularjs

我有一个关于使用 angular-dragdrop 的问题。

这是代码：[http ://plnkr.co/edit/sNZ3xQK1fYMlBf8rX5Kb?p=preview](http://plnkr.co/edit/sNZ3xQK1fYMlBf8rX5Kb?p=preview)

我想将第一节项目拖到第二节。这些部分是不同的控制器，如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T16:06:15.670

同意，我迟到了，但其中一位贡献者为您面临的同一问题提供了一个补丁，因为我在编写它时没有考虑这种情况（多控制器拖放）。

我已经更新了演示中的 angular-dragdrop.js 文件以使其正常工作。希望你喜欢！

[http://plnkr.co/edit/lWwHD0TGIiEw6p7imQtz?p=preview](http://plnkr.co/edit/lWwHD0TGIiEw6p7imQtz?p=preview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:39:01.780

请阅读 AngularJS 指令文档。所有 UI 代码都必须在指令内。

两个部分都有自己的控制器是可以的。基本上，您需要向两个部分模板添加指令。在作为目标部分的指令上，您处理适当的 JQuery 回调并使用 scope.broadcast/scope.on 或使用服务在控制器之间进行通信。

# entity-framework - 将 EDMX 升级到 EF 4.0 - 更新模型以包含外键列

> ID：15382009
> 
> 赞同：2
> 
> 时间：2013-03-13T09:58:42.987
> 
> 标签：entity-framework, entity-framework-4, foreign-keys, edmx

将我的 ASP.NET 3.5 / Entity Framework 1.0 解决方案升级到 .NET 4.0，我想利用可以成为 EF 4.0 的 EDMX 模型一部分的*外键列。*

我尝试从数据库中更新我的 EDMX 模型，并在“从数据库更新模型”向导中勾选“在模型中包含外键列”选项 - 不幸的是，这似乎根本没有做任何事情......

当然——我可以从我的模型中删除所有表并重新导入它们——但那样我会丢失我对模型类所做的所有修改。

在我升级到 EF 4.0 后，是否有一些技巧或调整或外部工具或其他东西可以让“从数据库更新模型”检测并包含我的 EDMX 模型中的外键列 - 无需删除并重新导入所有表?

# c# - 远程处理。如何让代码只在服务器端运行

> ID：15382011
> 
> 赞同：1
> 
> 时间：2013-03-13T09:58:47.013
> 
> 标签：c#, remoting

我对远程处理不是很熟悉。

1) 我们有 WinForm 客户端/服务器应用程序。C# 3.5
2) 我在我的应用程序中使用了第三个 API。

解决此 API 的配置问题。（我无法在客户端读取它的 dll.config 文件）

我想保留所有这些代码服务器端的执行，我目前可以让它工作。

即使我有代码服务器端，它仍然在从调用客户端查找 dll.config 时出错。

我怎样才能发出客户端请求，但一切都只在服务器上运行？

# php - is_null 函数在我的 if 语句中无法正常工作

> ID：15382017
> 
> 赞同：7
> 
> 时间：2013-03-13T09:59:06.943
> 
> 标签：php, oop, logic

我有一个 if 语句来检测用户是否已登录并属于某个部门。这真的很简单。

有一个 Permissions.php 类，如果登录或 NULL，则返回用户对象。

```
protected $user = NULL;
...
public static function instance() {
  if(!self::$instance) {
    self::$instance = new Permissions();
  }
  return self::$instance;
}
...
public function get_user() {
  return $this->user;
} 
```

然后是 user.php 类，它具有返回它们所在分区的函数：

```
public function is_manager() {
  return $this->is_manager;
} 
```

所以我应该能够做到以下几点：

```
if(Permissions::instance()->get_user()->is_manager()) 
```

但当然，这可能会引发有关 NULL 对象的警告，所以我认为您可以执行以下操作：

```
if( ( ! is_null( Permissions::instance()->get_user() ) ) &&
    ( Permissions::instance()->get_user()->is_manager() )) 
```

哪个应该检查 null ，如果没有，它应该评估 if 语句的另一半，但是 PHP 出于某种原因评估了所有它并且仍然抱怨 NULL 对象（当用户未登录时）。

所以我把 if 语句分解成一个嵌套的 if 语句，PHP 仍然抱怨 null 对象，这让我相信 is_null 方法没有按预期工作。

这最终奏效了：

```
if (Permissions::instance()->get_user() != NULL) {
  if(Permissions::instance()->get_user()->is_manager()){
    ...
  }
} 
```

**我的问题是，为什么我的带有 is_null 函数的代码不起作用？**

* * *

经过进一步测试，多亏了您的一些精彩评论，事实证明这`get_user()`不是返回 NULL，而是`(bool)false`（来自 var_dump）。为什么会出现这种奇怪的行为？我的类在顶部清楚地将其设置为 NULL，并且函数将变量返回为 false？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:14:55.530

因为`!=`不检查类型（null 是一种类型）并`get_user()`返回类似于空字符串或 false 的内容（请参阅[PHP 类型比较表](http://php.net/manual/en/types.comparisons.php)）。

检查以下输出：

```
var_dump(Permissions::instance()->get_user()); 
```

# php - PHP - DomDocument getElementsByTagName('smth')->item($string);

> ID：15382018
> 
> 赞同：0
> 
> 时间：2013-03-13T09:59:07.160
> 
> 标签：php, domdocument

我正在使用表单将数据插入 XML 文件。该数据来自输入字段，我不知道如何根据输入字段的数据使用类似这样的方式将其写入*再见*或*再见。*

```
$hello = $xdoc->getElementsByTagName('b')->item($IdOfBtag); 
```

这是 XML

```
<a>
    <b id="bye">
        <name>john</name>
    </b>
    <b id="goodbye">
        <name>emma</name>
    </b>
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:06:50.303

[`DomNodeList::item()`](http://php.net/domnodelist.item)接受一个带有项目索引的整数参数。在您的情况下，它将是`0` “再见”和`1`“再见”。

但你可以使用`getElementById()`：

```
$hello = $xdoc->getElementById($IdOfBtag); 
```

# php - 检查子主题中的页面模板

> ID：15382019
> 
> 赞同：3
> 
> 时间：2013-03-13T09:59:09.457
> 
> 标签：php, wordpress, templates, parent-child

我有一个简单的问题，希望有人能解释一下。我有一个带有自定义页面模板的子主题，我只是想检查天气是否正在使用该模板。在正常情况下，我只会使用该`is_page_template`功能，但它似乎不适用于子主题。我试过以下

```
if(is_page_template('template-custom-fullwidth.php')){
    //do something..
} 
```

也

```
if(is_page_template(dirname(get_bloginfo('stylesheet_url')).'/template-custom-fullwidth.php'){
    //do something..
} 
```

Neiter 有效，我希望有一个比`$_SERVER`用于检查 URL 更优雅的解决方案。我无法想象没有这样的功能，因为这似乎是一项常见的任务。我相信问题是模板和样式表目录之间的区别。是否可以使用 Wordpress 检查位于子主题中的页面模板？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-12T03:37:03.610

我遇到了类似的问题。一些试验和错误发现，如果条件保留在函数内部，它就可以工作。但如果放在外面就不会。

```
function team_page_enqueue_style() {

    if ( is_page_template('page-team.php') ) {
        wp_enqueue_style( 'easy-responsive-tabs-css', get_stylesheet_directory_uri() . '/css/easy-responsive-tabs.css', array(), NULL);
    }
}

add_action( 'wp_enqueue_scripts', 'team_page_enqueue_style' ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T20:05:26.467

如果在循环中使用 is_page_template，请尝试`wp_reset_query()`在调用 is_page_template 之前放置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-18T02:31:34.253

有同样的问题并像这样解决它：

`get_stylesheet_directory_uri()`不起作用，因为它会显示 url 并且您需要服务器完整路径，请使用`get_stylesheet_directory()`

如果`is_page_template()`不起作用，您可以使用`get_page_template()`和比较

```
if(get_page_template() == (get_stylesheet_directory() . '/custom-template.php')){
//your stuff
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-14T09:01:48.227

试试[is_singular();](https://codex.wordpress.org/Function_Reference/is_singular) 它适用于我的情况，因为我的模板是单个帖子页面模板。

要使用它，您需要指定不带 and 字样的模板`single-`名称`.php`。例如，如果模板文件是`single-forest_of_trees.php`，那么这应该是代码：

```
if (is_singular( 'forest_of_trees' )) {
   // do something
} 
```

它还允许以优雅的方式处理多个值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-21T12:09:43.000

对我有用的是（在functions.php中）：

```
if (get_page_template_slug() == 'template-custom-fullwidth.php'){

// anything

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-27T22:44:23.537

在子主题中唯一对我有用的是访问全局 $template 变量并与之进行比较：

```
global $template;
if (basename($template) === 'template-custom-fullwidth.php') {
   // do something
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-09T08:13:43.273

使用主题文件夹中的相对路径：

```
if(is_page_template('page-templates/template-custom-fullwidth.php')){
//do something..
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-29T19:07:05.077

参考这个 WP Codex 页面：[http ://codex.wordpress.org/Function_Reference/get_stylesheet_directory_uri](http://codex.wordpress.org/Function_Reference/get_stylesheet_directory_uri)

改为使用`get_stylesheet_directory_uri`。这应该有效：

```
is_page_template(get_stylesheet_directory_uri() . '/template-custom-fullwidth.php')
{
    //do something..
} 
```

# matlab - Matlab：适用于逻辑单元和默认值“真”

> ID：15382020
> 
> 赞同：1
> 
> 时间：2013-03-13T09:59:11.410
> 
> 标签：matlab, matlab-uitable

我正在尝试构建一个合适的 1x2。

Cell(1,1) 格式是“逻辑的”；单元格（1,2）是“字符”

```
handles.SeedTable = uitable(...
                    'ColumnName',{'Shuffle' 'Seed#'},...
                    'ColumnFormat',{'logical','char'},...
                    'ColumnEditable',[true true],...
                    'RowName',{'Seed'},...
                    'Data',[{'true'}, {'Random#'} ]); 
```

当我运行我的文件时：当我按下复选框取消选中 cell(1,1) 时，没有任何反应。如果我没有将单元格默认设置为 true - 一切都很好（即删除该行：

```
'Data',[{'true'}, {'Random#'} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:16:43.230

要使单元格可编辑，`true`代码中的最后一个需要不带引号：

```
handles.SeedTable = uitable(...
                    'ColumnName',{'Shuffle' 'Seed#'},...
                    'ColumnFormat',{'logical','char'},...
                    'ColumnEditable',[true true],...
                    'RowName',{'Seed'},...
                    'Data',[{true}, {'Random#'} ]); 
```

# iphone - 自定义注释标注视图未正确显示

> ID：15382023
> 
> 赞同：1
> 
> 时间：2013-03-13T09:59:14.850
> 
> 标签：iphone

我的应用程序中有一个自定义注释标注视图。我希望​​ mapview 自动调整，以便注释标注视图始终显示在可见区域内。现在它显示为如图所示。任何解决方案？ ![](../Images/4e2aafb649a62172fc7ee1a184250919.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:57:49.970

[这是我对创建注释的回答。](https://stackoverflow.com/questions/15241156/class-myannotation-annotation-was-deallocated/15241335#15241335)

调用以下方法以正确显示地图视图中的所有注释。（*创建注解后调用此方法*）

```
[self zoomToFitMapAnnotations:self.mapView]; 
```

上述方法的代码

```
-(void)zoomToFitMapAnnotations:(MKMapView*)mapView
{
    if([mapView.annotations count] == 0)
        return;

    CLLocationCoordinate2D topLeftCoord;
    topLeftCoord.latitude = -90;
    topLeftCoord.longitude = 180;

    CLLocationCoordinate2D bottomRightCoord;
    bottomRightCoord.latitude = 90;
    bottomRightCoord.longitude = -180;

    for(DDAnnotation* annotation in mapView.annotations)
    {
        topLeftCoord.longitude = fmin(topLeftCoord.longitude, annotation.coordinate.longitude);
        topLeftCoord.latitude = fmax(topLeftCoord.latitude, annotation.coordinate.latitude);

        bottomRightCoord.longitude = fmax(bottomRightCoord.longitude, annotation.coordinate.longitude);
        bottomRightCoord.latitude = fmin(bottomRightCoord.latitude, annotation.coordinate.latitude);

    }

    NSLog(@"A%f, B%f, C%f, D%f,", topLeftCoord.latitude, topLeftCoord.longitude, bottomRightCoord.latitude, bottomRightCoord.longitude);

    MKCoordinateRegion region;
    region.center.latitude = topLeftCoord.latitude - (topLeftCoord.latitude - bottomRightCoord.latitude) * 0.5;
    region.center.longitude = topLeftCoord.longitude + (bottomRightCoord.longitude - topLeftCoord.longitude) * 0.5;
    region.span.latitudeDelta = fabs(topLeftCoord.latitude - bottomRightCoord.latitude) * 1.1;
    region.span.longitudeDelta = fabs(bottomRightCoord.longitude - topLeftCoord.longitude) * 1.1;

    region = [mapView regionThatFits:region];
    [mapView setRegion:region animated:YES];
} 
```

# javascript - CanJS 文件夹结构

> ID：15382024
> 
> 赞同：1
> 
> 时间：2013-03-13T09:59:15.067
> 
> 标签：javascript, canjs, application-structure

创建简单项目时，我们直接在同一个文件中指定模型和控制器，然后编写。我的 app.js 看起来像这样：

```
var Library = can.Model({});   
var Control = can.Control({.....});    
var control = new Control('#main'); 
```

和单个 html 文件

对于复杂的应用程序，我将为控制器、模型和视图提供不同的文件夹。我的第一个问题是

1 当我将控制器放在不同的文件夹中并将模块放在不同的文件夹中时，调用将如何发生。有人可以帮助我使用将调用所有控制器的基本文件模板吗？

1.如果我有一个用于特定控制器而不是 ejs 的简单 html 文件，它会起作用吗？

我知道这在某种程度上听起来可能很愚蠢，但我很困惑。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T05:24:07.400

您可以使用 require.js 之类的工具，您的代码将如下所示：

```
define(['control' ], function(Control){ 
    var control = new Control('#id');       
}); 
```

或者使用命名空间：

```
// user_control.js
APP.controllers = APP.controllers || {};
APP.controllers.UserControl = can.Control({...

// other file
var control = APP.controllers.UserControl('#id'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:30:55.380

查看[CanJS + RequireJS TodoMVC 示例](https://github.com/addyosmani/todomvc/tree/gh-pages/labs/dependency-examples/canjs_require)。这应该展示了使用 CanJS 的 AMD 模块版本开始使用[RequireJS所需的一切。](http://requirejs.org/)

当然，您可以在 HTML 文件中实例化您的控件，而无需使用 EJS（或 Mustache）视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T05:52:02.923

要实例化 html 而不是 ejs，我们可以使用

```
this.view({
            url: 'views/demos/accordion.html'
        }); 
```

可能对其他人有用。

# json - 使用 Jbuilder 在数组集合上方显示自定义链接

> ID：15382028
> 
> 赞同：0
> 
> 时间：2013-03-13T09:59:21.380
> 
> 标签：json, api, ruby-on-rails-3.2, jbuilder

我有一个自定义 JSON 响应，其中显示了 15 个帖子的集合以及评论等相关数据，作为 API 调用的一部分。我正在使用[Jbuilder](https://github.com/rails/jbuilder)显示整个集合。

```
json.array!(@posts) do |post|
  ..
  ..
end 
```

我想在 15 个帖子的响应上方显示分页链接，以便获得具有适当下一组下一页和上一页分页链接的下一组帖子。在我的 abc.json.jbuilder 文件中，如果我尝试按照以下代码执行此操作，我不会将指向下一页和上一页的链接作为我的 json 响应的一部分。

```
json.pagination_links do
  json.set!(:next_page_link,"#{@next_page_link}")   
  json.set!(:prev_page_link,"#{@prev_page_link}")   
end

json.array!(@posts) do |post|
  ..
  ..
end 
```

我得到的唯一响应是包含帖子集合的数组。如下所示：-

```
[
 -{post1}
 -{post2}
 -..
] 
```

我想我可能会遗漏一些东西。有人可以建议我解决任何问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:53:00.890

这是[答案](https://github.com/rails/jbuilder/issues/110#issuecomment-14945092)，[感谢 Pavel Pravosud](https://github.com/rwz)的支持

# java - 缩小 JFrame 不起作用

> ID：15382032
> 
> 赞同：2
> 
> 时间：2013-03-13T09:59:28.927
> 
> 标签：java, swing, user-interface, resize, jframe

我有`JFrame`一些子`JPanel`对象。当我调整 JFrame 的大小并使其变大时，一切正常，子面板的大小也正确调整。但是，如果我缩小 JFrame，面板会保持不变，并且会被裁剪。无论我使用什么布局，都会发生这种情况。

我知道我可以使用`EventListener`并手动设置尺寸，但我的问题是：为什么会发生这种情况？为什么放大时可以正常工作，但缩小时却不行？我可以在没有`EventListener`（可能是一些配置问题）的情况下解决它吗？

我正在使用 Netbeans 7.3，以防万一。

==== 编辑 ====

在尝试获取最小示例时，我意识到问题是我尝试添加的组件之一，它是由我制作的。它是一个延伸`java.awt.Canvas`和绘制排球场的物体。

但是，我无法找出为什么它不能正确收缩。这是代码：

```
import java.awt.*;
import java.util.Arrays;
import javax.print.attribute.standard.OrientationRequested;

public class CourtCanvas extends Canvas {
    private int courtHeight = 100;
    private int courtWidth = 200;
    private int left = 10;
    private int top = 10;
    private Point center = new Point();

    private Color bgColor = new Color(52, 153, 204);
    private Color lineColor = new Color(255, 255, 255);
    private Color floorColor = new Color(255, 153, 0);

    private OrientationRequested orientation;

    public CourtCanvas() {
        calcDimensions();
        setBackground(bgColor);

        for (int i = 0; i < localCoords.length; i++) {
            localCoords[i] = new Point();
            visitCoords[i] = new Point();
        }
    }

    private void calcDimensions() {
        if (this.getHeight() > this.getWidth()) {
            orientation = OrientationRequested.PORTRAIT;
            courtHeight = (int) Math.min(this.getHeight() * 0.9, this.getWidth() * 1.8);
            courtWidth = (int) (courtHeight / 2.0);
        }
        else {
            orientation = OrientationRequested.LANDSCAPE;
            courtWidth = (int) Math.min(this.getWidth()* 0.9, this.getHeight() * 1.8);
            courtHeight = (int) (courtWidth / 2.0);

        }

        center.x = (int) (getWidth() / 2.0);
        center.y = (int) (getHeight() / 2.0);

        left = (int) (center.x - courtWidth / 2.0);
        top = (int) (center.y - courtHeight / 2.0);
    }

    @Override
    public void paint(Graphics g) {
        setBackground(bgColor);
        calcDimensions();

        drawFloor(g);
        drawLines(g);
    }

    private void drawFloor(Graphics g) {
        g.setColor(floorColor);
        g.fillRect(left, top, courtWidth, courtHeight);
    }

    private void drawLines(Graphics g) {
        if (orientation == OrientationRequested.PORTRAIT) {
            drawLines_Portrait(g);
        }
        else {
            drawLines_Landscape(g);
        }
    }

    private void drawLines_Portrait(Graphics g) {
        g.setColor(lineColor);

        // perimeter
        g.drawRect(left, top, courtWidth, courtHeight);

        // center line
        g.drawLine(left, center.y, left + courtWidth, center.y);

        // local attack line
        g.drawLine(left, center.y + courtHeight / 6, left + courtWidth, center.y + courtHeight / 6);

        // visitor attack line
        g.drawLine(left, center.y - courtHeight / 6, left + courtWidth, center.y - courtHeight / 6);
    }

    private void drawLines_Landscape(Graphics g) {
        g.setColor(lineColor);

        // perimeter
        g.drawRect(left, top, courtWidth, courtHeight);

        // center line
        g.drawLine(center.x, top, center.x, top + courtHeight);

        // local attack line
        g.drawLine(center.x - courtWidth / 6, top, center.x - courtWidth / 6, top + courtHeight);

        // visitor attack line
        g.drawLine(center.x + courtWidth / 6, top, center.x + courtWidth / 6, top + courtHeight);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:07:55.177

可能有许多原因可能导致所描述的行为。例如，设置为面板的最小尺寸。

应该为您工作的是 Java 布局管理器。教程：[http ://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T23:32:49.063

您可能正在混合 Swing 和 AWT、轻量级和重量级组件。我的建议是只使用 Swing/Lightweight 组件。

此外，在 Swing 中，您扩展`paintComponent`而不是`paint`调用`super`方法。

```
Here is a rework of your code:

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Point;

import javax.print.attribute.standard.OrientationRequested;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class CourtCanvas extends JPanel {
    private int courtHeight = 100;
    private int courtWidth = 200;
    private int left = 10;
    private int top = 10;
    private Point center = new Point();

    private Color bgColor = new Color(52, 153, 204);
    private Color lineColor = new Color(255, 255, 255);
    private Color floorColor = new Color(255, 153, 0);

    private OrientationRequested orientation;
    private Point[] localCoords = new Point[5];
    private Point[] visitCoords = new Point[5];

    public CourtCanvas() {
        calcDimensions();
        setBackground(bgColor);

        for (int i = 0; i < localCoords.length; i++) {
            localCoords[i] = new Point();
            visitCoords[i] = new Point();
        }
    }

    private void calcDimensions() {
        if (this.getHeight() > this.getWidth()) {
            orientation = OrientationRequested.PORTRAIT;
            courtHeight = (int) Math.min(this.getHeight() * 0.9, this.getWidth() * 1.8);
            courtWidth = (int) (courtHeight / 2.0);
        } else {
            orientation = OrientationRequested.LANDSCAPE;
            courtWidth = (int) Math.min(this.getWidth() * 0.9, this.getHeight() * 1.8);
            courtHeight = (int) (courtWidth / 2.0);

        }

        center.x = (int) (getWidth() / 2.0);
        center.y = (int) (getHeight() / 2.0);

        left = (int) (center.x - courtWidth / 2.0);
        top = (int) (center.y - courtHeight / 2.0);
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        calcDimensions();

        drawFloor(g);
        drawLines(g);
    }

    private void drawFloor(Graphics g) {
        g.setColor(floorColor);
        g.fillRect(left, top, courtWidth, courtHeight);
    }

    private void drawLines(Graphics g) {
        if (orientation == OrientationRequested.PORTRAIT) {
            drawLines_Portrait(g);
        } else {
            drawLines_Landscape(g);
        }
    }

    private void drawLines_Portrait(Graphics g) {
        g.setColor(lineColor);

        // perimeter
        g.drawRect(left, top, courtWidth, courtHeight);

        // center line
        g.drawLine(left, center.y, left + courtWidth, center.y);

        // local attack line
        g.drawLine(left, center.y + courtHeight / 6, left + courtWidth, center.y + courtHeight / 6);

        // visitor attack line
        g.drawLine(left, center.y - courtHeight / 6, left + courtWidth, center.y - courtHeight / 6);
    }

    private void drawLines_Landscape(Graphics g) {
        g.setColor(lineColor);

        // perimeter
        g.drawRect(left, top, courtWidth, courtHeight);

        // center line
        g.drawLine(center.x, top, center.x, top + courtHeight);

        // local attack line
        g.drawLine(center.x - courtWidth / 6, top, center.x - courtWidth / 6, top + courtHeight);

        // visitor attack line
        g.drawLine(center.x + courtWidth / 6, top, center.x + courtWidth / 6, top + courtHeight);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new CourtCanvas());
                frame.setSize(500, 400);
                frame.setVisible(true);
            }
        });
    }
} 
```

# c# - 从 Windows 窗体上的文本框中获取数据

> ID：15382034
> 
> 赞同：3
> 
> 时间：2013-03-13T09:59:32.080
> 
> 标签：c#, textbox

我正在使用 Visual Studio 制作一个 windows 窗体。我正在为大学作业制作基于文本的生存游戏，但是我被卡住了。

我的目标是让用户将选择 ( `1-4`) 输入到 a`textbox`中以做出选择。

我尝试使用`4`不同的按钮，但似乎无法让 if 语句与按钮点击一起使用。然后我尝试了一个带有按钮的开关，然后是一个带有文本的开关，现在是一个带有 if/else if 语句的文本框。

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using Microsoft.VisualBasic;

namespace PF5
{
public partial class Form1 : Form
{

    int iScore = 0, iChoice;
    String sName;

    public Form1()
    {
        //asks user to input their name before the game begins
        sName = Microsoft.VisualBasic.Interaction.InputBox("Please enter    your name:", "What is Your Name?", "");
        //if no name is entered, they are asked again
        while (sName == "")
        {
            MessageBox.Show("Please enter your name.");
            sName = Microsoft.VisualBasic.Interaction.InputBox("Please enter your name:", "What is Your Name?", "");
        }

        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        //displays the score
        lblScore.Text = iScore.ToString();
        //displays the scoring system in the Rules textbox
        txtRules.Text = "Welcome to SURVIVE,  " + sName + ", during your   time here you will be presented with numerous scenarios and you will be given FOUR options or choices." + Environment.NewLine + "" + Environment.NewLine + "For each Scenario there will be: " + Environment.NewLine + "" + Environment.NewLine + "ONE 'Perfect Answer' which will give you +2 points to your score. " + Environment.NewLine + "" + Environment.NewLine + "ONE 'Correct Answer' which will award you +1 point to your total. " + Environment.NewLine + "" + Environment.NewLine + "ONE 'Wrong Answer' which will award you +0 points." + Environment.NewLine + "" + Environment.NewLine + "ONE 'Fatal Answer' which will result in Game Over, Death and -1 point.";
    }

    private void btnExit_Click(object sender, EventArgs e)
    {
        // Display a message box asking users if they
        // want to exit the application.
        if (MessageBox.Show("Do you want to exit?", "SURVIVE",
         MessageBoxButtons.YesNo, MessageBoxIcon.Question)
         == DialogResult.Yes)
        {
            Application.Exit();
        }
    }

    private void btnStart_Click(object sender, EventArgs e)
    {

        //Displays story and Options for the user
        txtStory.Text = "After a heavy night in town, you wake up the following day with the worst headache ever. The night seems to be a blur. The usual business of outside seems to be quiter than normal, even for a Sunday, but you don't think too much about it." + Environment.NewLine + " After you have had a shower, a coffee and got ready you feel slightly better, you turn on the TV to watch your favorite channel, only to see some pandemic on the news, apparently a ZOMBIE OUTBREAK!" + Environment.NewLine + "Luckily for you though, you have played Black Ops Zombies and Minecraft for most of your student life so you know exactly what to do..."
            + Environment.NewLine + "" + Environment.NewLine + "Option 1: Run outside and ask the first person you see to help you" + Environment.NewLine + "" + Environment.NewLine + "Option 2: Take some time to get some food and money together and pack them along with extra clothes into your bag." + Environment.NewLine + "" + Environment.NewLine + "Option 3: Text your friends and see if they are okay." + Environment.NewLine + "" + Environment.NewLine + "Option 4: Call the police to let them know a Zombie Outbreak is happening";
        btnStart.Visible = false;

            txtChoice.Text = Convert.ToString(iChoice);
            iChoice = Convert.ToInt32(Console.ReadLine());
            if  (iChoice == 1)
            {
                    txtResult.Text = "You run outside and grab the first person you see by the shoulder, apparently this particular person just wanted to chomp on your flesh." + Environment.NewLine + "" + Environment.NewLine + "YOU DIED!!!";
                    iScore = -1;
                    lblScore.Text = iScore.ToString();
            }
    }
}
} 
```

我希望有人能帮帮忙。我对它的其余部分感到满意​​，只是 if 语句`atm`，它只是不会检测到条目中的条目`textbox`，我也在考虑使用提交答案按钮，但我不知道如何让它工作。

值得一提的是，我不是高级用户（您可能会说）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:44:03.230

如我所见，您正在使用带有文本框和按钮的 Windows 窗体，但是您正在`iChoice`从控制台读取。如果你有那个变量的文本框（`iChoice`）然后试试这个`iChoice = Int32.Parse(iChoiceTextBox.Text);`

以这种方式更改 btnStart_click 事件：

```
private void btnStart_Click(object sender, EventArgs e)
    {

        //Displays story and Options for the user
        txtStory.Text = "After a heavy night in town, you wake up the following day with the worst headache ever. The night seems to be a blur. The usual business of outside seems to be quiter than normal, even for a Sunday, but you don't think too much about it." + Environment.NewLine + " After you have had a shower, a coffee and got ready you feel slightly better, you turn on the TV to watch your favorite channel, only to see some pandemic on the news, apparently a ZOMBIE OUTBREAK!" + Environment.NewLine + "Luckily for you though, you have played Black Ops Zombies and Minecraft for most of your student life so you know exactly what to do..."
            + Environment.NewLine + "" + Environment.NewLine + "Option 1: Run outside and ask the first person you see to help you" + Environment.NewLine + "" + Environment.NewLine + "Option 2: Take some time to get some food and money together and pack them along with extra clothes into your bag." + Environment.NewLine + "" + Environment.NewLine + "Option 3: Text your friends and see if they are okay." + Environment.NewLine + "" + Environment.NewLine + "Option 4: Call the police to let them know a Zombie Outbreak is happening";
        btnStart.Visible = false;

        iChoice = Int32.Parse(txtChoice.Text);
        if (iChoice == 1)
        {
            txtResult.Text = "You run outside and grab the first person you see by the shoulder, apparently this particular person just wanted to chomp on your flesh." + Environment.NewLine + "" + Environment.NewLine + "YOU DIED!!!";
            iScore = -1;
            lblScore.Text = iScore.ToString();
        }
    } 
```

# coded-ui-tests - CodedUI 下拉选择

> ID：15382044
> 
> 赞同：1
> 
> 时间：2013-03-13T09:59:52.747
> 
> 标签：coded-ui-tests

我正在尝试手动编写我的 g 邮件注册表单，我想从下拉列表中选择月份，但是我能够通过从测试生成器中搜索属性来单击下拉箭头。并且无法从月份内容中找到该属性，尝试过与测试生成器。

谁能告诉我如何选择那个特定的下拉菜单

谢谢 ，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:55:18.430

我建议您让 Coded UI 向您展示该怎么做。尝试创建一个（沙盒）编码的 UI 项目并使用编码的 UI 记录和生成工具来执行所需的操作。然后从自动生成的代码中复制想法。如果 Coded UI 记录器无法生成合适的代码，那么问题就很难解决。

# ios - UILabel 越来越模糊？

> ID：15382045
> 
> 赞同：0
> 
> 时间：2013-03-13T10:00:01.227
> 
> 标签：ios, ios5, uilabel, carousel, icarousel

我是 iOS 开发的新手，我在 iOS 中创建了自定义轮播视图。carrousel 中的所有视图都以 360 度旋转，但是当我在前视图上添加 UILabel 时出现问题，然后它变得模糊..

我从某处读取的帧可能设置为浮点数并使用 [lbl setFrame:CGRectIntegral(lbl.frame)]; 但是我试过这个，这种类型不是我的情况。

为什么会这样？

请帮我...

谢谢..

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-13T10:02:29.067

我认为，您`UILabel`被其他观点所掩盖。试试`[myView bringSubviewToFront:myLabel]`。祝你好运！

# php - 保存编辑后的表单时 PHP 中未定义的索引

> ID：15382050
> 
> 赞同：-3
> 
> 时间：2013-03-13T10:00:14.197
> 
> 标签：php, warnings, undefined

当我删除它工作正常。当我取消它也可以正常工作。但是当我编辑并在编辑后单击保存时，我收到消息“未定义的索引：搜索”。数据得到保存。我该如何解决。

代码是：

```
<html>
    <head>
    </head>
<body>  
<?php
    $page='search.php';
    mysql_connect("localhost","root","") or die (mysql_error());
    mysql_select_db("list") or die (mysql_error());

    if(empty($_POST) === false)
    {

        if ($_POST['search'] == 'search')
        {

            $data=$_POST['criteria']; 
            if (empty($data) === true)
            {
                echo 'Please enter some text!!<br/>';
            } 
            else
            {
                $get=mysql_query("SELECT SRNO, fname, lname, phone, email, address, comments from names where fname='" . mysql_real_escape_string($data) . "'");
                if (mysql_num_rows($get)==0) 
                    {
                        echo 'There are no search results!!';
                    }
                        else
                    {
                        echo '<table border=0 cellspacing=25 cellpadding=1>';
                        echo'<tr><th>Sr. No</th><th>First Name</th><th>Last Name</th><th>Phone No</th><th>E-mail</th><th>Address</th><th>Comments!!</th><th>Modify</th><th>Delete!</th></tr>';      
                        while($get_row=mysql_fetch_assoc($get))
                            {
                                echo '<tr><td>'.$get_row['SRNO'].'</td><td>'.$get_row['fname'].'</td><td>'.$get_row['lname'].'</td><td>'.$get_row['phone'].'</td><td>'.$get_row['email'].'</td><td>'.$get_row['address'].'</td><td>'.$get_row['comments'].'</td><td><a href="search.php?edit='.$get_row['SRNO'].'">Edit</a></td><td><a href="search.php?delete='.$get_row['SRNO'].'">Delete</a></td></tr>';

                            }
                        echo '</table>';

                    }
            }
        }

        else if ($_POST['save']== 'save')
        {

            $count=0;
            $fname= $_POST['fname'];
            $lname= $_POST['lname'];
            $srno=  $_POST['SRNO'];
            $address=$_POST['address'];
            $comments=$_POST['comments'];
            $email=$_POST['email'];
            $phone=$_POST['phone'];

                if (empty($lname) === true || empty($fname) === true || empty($address) === true || empty($comments) === true || empty($email) === true || empty($phone) === true) 
                {
                    echo '<h3>All fields are mandatory</h3>';

                }
                else
                {
                        if (filter_var($email,FILTER_VALIDATE_EMAIL) === false)
                        {
                            echo '<h3>This is not a valid e-mail address.</h3><br />';
                            $count=$count+1;
                        }
                        if (ctype_alpha($fname) === false || ctype_alpha($lname) === false)
                        {
                            echo '<h3>Name should contain character only!</h3><br />';
                            $count=$count+1;
                        }
                        if( !is_numeric($phone) ) 
                        {
                                echo '<h3>Please enter a valid phone number</h3><br />';
                                $count=$count+1;
                        }
                        if ($count==0)
                        {
                            if(isset($_GET['edit']))
                                {
                                    mysql_query('update names set fname="'.$fname.'", lname="'.$lname.'", address="'.$address.'", comments="'.$comments.'", email="'.$email.'", phone="'.$phone.'"  where SRNO="'.$srno.'"');   

                                } 
                                else if(isset($_GET['add']))
                                    {
                                        mysql_query("INSERT INTO names (fname,lname,phone,email,comments,address) VALUES ('$fname', '$lname','$phone','$email','$comments','$address')");
                                    }

                            //header('Location:'.$page);
                        }

                }
        }
    }   
            //else if
        /*
        if(mysql_num_rows($getf) == 0)
        {
            $getel=mysql_query('SELECT SRNO, fname, lname, phone, email, address, comments from names where lname='.$_GET['$data']));

        }*/

        if(isset($_GET['delete']))
        {
            mysql_query('DELETE from names where SRNO='.mysql_real_escape_string((int)$_GET['delete']));

        }

        if(isset($_GET['edit']))
        {
            $getedit=mysql_query('SELECT SRNO, fname, lname, phone, email, address, comments from names where SRNO='.mysql_real_escape_string((int)$_GET['edit']));

            echo '<table border=0>';
            while ($get_row=mysql_fetch_assoc($getedit))
                {
                    echo '<form method="POST" action="">';

                    echo '<tr><td>Sr.No:</td><td><input type="text" value='.$get_row['SRNO'].' name="SRNO" readonly="readonly"></td></tr>';
                    echo '<tr><td>First Name:</td><td><input type="text" value='.$get_row['fname'].' name="fname"></td></tr>';
                    echo '<tr><td>Last Name:</td><td><input type="text" value='.$get_row['lname'].' name="lname"></td></tr>';
                    echo '<tr><td>Phone No:</td><td><input type="text" value='.$get_row['phone'].' name="phone"></td></tr>';
                    echo '<tr><td>E-mail address:</td><td><input type="text" value='.$get_row['email'].' name="email"</td></tr>';
                    echo '<tr><td>Address:</td><td><textarea name="address" rows=4>'.$get_row['address'].'</textarea></td></tr>';
                    echo '<tr><td>Comments:</td><td><textarea name="comments" rows=4>'.$get_row['comments'].'</textarea></td></tr>';
                    echo '<tr><td><input type="submit" name="save" value="save"></td><td><a href="search.php">Cancel</a></td></tr>';
                    echo '</form>';                                 
                }
            echo '</table>';

        }

            echo '<form action="" method="post">';  
            echo '<input type="text" name="criteria">';
            //echo '<input type="hidden" name="form" value="search">';
            echo '<input type="submit" value="search" name="search">';
            echo '</form>';

 echo '<br /><a href="index.php">Home</a>';
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T10:03:50.413

这是因为这次`search`没有以表格形式发送变量。如果您首先检查它是否已设置，那么您将不会收到该警告。

更改此行

```
if ($_POST['search'] == 'search') 
```

对于这个：

```
if (isset($_POST['search']) && $_POST['search'] == 'search') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:08:28.177

我认为你必须像这样检查你的状况

```
if (isset($_POST['search']) && $_POST['search'] == 'search')
{
   // code here
}
else if(isset($_POST['save']) && $_POST['save']== 'save')
{
   // code here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:11:09.307

是的，一切正常，首先它会在您发布保存表单时检查您 $_POST['search'] 。其中不包含任何搜索表单字段。

只需将所有`$_POST['save']`,`$_POST['search']` 替换为`(isset($_POST['save']) && $_POST['save']=='save')`and`(isset($_POST['search']) && $_POST['search']=='search')`

你需要记住的事情是

1.  如果您的查询返回单个结果，则不要在那里使用 while 循环。只是影响结果。
2.  总是尝试将表单标签放在表格之外/之前。
3.  在您的结构上方，您在 while 循环内的表单中重复相同的名称。
4.  用isset检查你在php中的变量。

尝试上述建议，然后尝试。

# c - 如果没有足够的文件描述符，重命名会失败吗？

> ID：15382051
> 
> 赞同：2
> 
> 时间：2013-03-13T10:00:16.643
> 
> 标签：c, linux, rename, glibc

我注意到在 fd 泄漏期间，当达到文件描述符的上限时，重命名调用失败。不幸的是，我没有错误代码。

缺少文件描述符是否可能与重命名失败有关？

据我所见，在 rename() 的实现中使用了 link() 系统调用。需要fd吗？

使用的重命名实现来自 \glibc-2.17\sysdeps\posix\

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:11:18.697

我编译了这个程序：

```
#include <stdio.h>

int main()
{
    rename("a", "a1");
} 
```

并`strace`在可执行文件上运行。初始化代码完成后，所发生的一切是：

```
rename("a", "a1")                       = 0
exit_group(0)                           = ? 
```

即没有对`open`新文件描述符的系统调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:09:56.857

的故障模式`rename`在手册页上清楚地列出：

[http://www.manpagez.com/man/2/rename/](http://www.manpagez.com/man/2/rename/)

它没有提到太多打开的文件是一个问题。

# logging - 在 Java 中启用 kerberos 的详细日志记录

> ID：15382056
> 
> 赞同：17
> 
> 时间：2013-03-13T10:00:30.040
> 
> 标签：logging, kerberos

我有一个基于 Java 的 Web 应用程序，它获取包含用户名和密码的 Web 表单的内容，并使用 kerberos 对基于 Windows 的域进行身份验证。

KDC 地址显然被配置为在每次查找时映射到不同的 IP 地址，这可以通过使用命令行中的 ping 命令来确认。

对于大多数请求，呼叫会立即响应，但响应会间歇性地变慢（5-10 秒甚至更长）。我认为这可能是由于使用了哪个域控制器。

我尝试打开 kerberos 日志记录，但未显示域控制器的 IP 地址。请问如何打开更详细的日志记录以尝试识别狡猾的域控制器？

代码从文件系统中提取 kerb.conf 和 kerb_context.conf 的来源。

kerb.conf 是：

```
[libdefaults]
default_realm = EXAMPLE.COM

[realms]
CYMRU.NHS.UK = {
        kdc = example.com:88
        admin_server = example.com
        kpasswd_server = example.com
} 
```

kerb_context.conf 是：

```
 primaryLoginContext {
        com.sun.security.auth.module.Krb5LoginModule required
        useTicketCache=false
        refreshKrb5Config=true
        debug=true;
}; 
```

示例来源是：

```
static NadexUser executePerformLogin(String username, String password) throws LoginException {
            char[] passwd = password.toCharArray();
            String kerbConf = ERXFileUtilities.pathForResourceNamed("nadex/kerb.conf", "RSCorp", null);
            String kerbContextConf = ERXFileUtilities.pathURLForResourceNamed("nadex/kerb_context.conf", "RSCorp", null).toExternalForm();
            System.setProperty("java.security.krb5.conf", kerbConf);
            System.setProperty("java.security.auth.login.config", kerbContextConf);
            try {
                    LoginContext lc = new LoginContext("primaryLoginContext", new UserNamePasswordCallbackHandler(username, password));
                    lc.login();
                    return new _NadexUser(lc.getSubject());
            }
            catch (javax.security.auth.login.LoginException le) {
                    throw new LoginException("Failed to login : " + le.getLocalizedMessage(), le);
            }
    } 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-11-05T13:52:19.827

您可以通过将系统属性设置为 来启用日志`sun.security.krb5.debug`记录`true`。

请参阅[Oracle 文档](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jgss/tutorials/Troubleshooting.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T14:35:42.910

我没有找到打开如此详细日志记录的方法，而是决定采用不同的方法。下面的代码是一个独立的应用程序，只需要在同一目录中的 jaas.conf 配置文件。

显示了用于此简短测试应用程序的示例 jaas.conf：

```
primaryLoginContext {
        com.sun.security.auth.module.Krb5LoginModule required
        useTicketCache=false
        refreshKrb5Config=true
        debug=false;
}; 
```

此代码小心设置系统属性 sun.net.inetaddr.ttl 以避免 java 缓存 DNS 查找的结果。就我而言，DNS 查找在每次请求时都会发生变化。这是一段相当粗糙的代码，但会演示网络中任何配置不当或性能不佳的 KDC。

```
import java.io.BufferedReader;
import java.io.File;
import java.io.IOException;
import java.io.InputStreamReader;
import java.math.BigDecimal;
import java.math.RoundingMode;
import java.net.InetAddress;
import java.net.MalformedURLException;
import java.net.UnknownHostException;
import java.util.Date;
import java.util.HashMap;
import java.util.Set;
import java.util.Vector;

import javax.security.auth.callback.Callback;
import javax.security.auth.callback.CallbackHandler;
import javax.security.auth.callback.NameCallback;
import javax.security.auth.callback.PasswordCallback;
import javax.security.auth.callback.UnsupportedCallbackException;
import javax.security.auth.login.LoginContext;

public class TestNadex {
    private static final String DEFAULT_HOST = "cymru.nhs.uk";

    public static void main(String[] args) {
        System.setProperty("sun.net.inetaddr.ttl", "0");
        String username=null;
        String password=null;
        try {
            BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
            System.out.println("Enter username: ");
            username = br.readLine().trim();
            System.out.println("Enter password: ");
            password = br.readLine().trim();
            testHost(DEFAULT_HOST, username, password);
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
    }

    static void testHost(String host, String username, String password) {
        HashMap<String, Vector<Long>> results = new HashMap<String, Vector<Long>>();
        for (int i=0; i<200; i++) {
            InetAddress ia;
            try {
                ia = InetAddress.getByName(host);
                long startTime = System.currentTimeMillis();
                executePerformLogin(ia.getHostAddress(), username, password);
                long endTime = System.currentTimeMillis();
                long duration = endTime - startTime;
                if (results.containsKey(ia.toString()) == false) {
                    Vector<Long> v = new Vector<Long>();
                    v.add(duration);
                    results.put(ia.toString(), v);
                }
                else {
                    Vector<Long> v = results.get(ia.toString());
                    v.add(duration);
                }
                Thread.sleep(1000);
            } catch (UnknownHostException e) {
                System.out.println("Unknown host: "  + host);
                System.exit(1);
            } catch (MalformedURLException e) {
                e.printStackTrace();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        Set<String> keys = results.keySet();
        for (String key : keys) {
            System.out.println("For address: " + key);
            Vector<Long> times = results.get(key);
            int count = times.size();
            long total = 0;
            for (Long t : times) {
                System.out.println(t + " milliseconds");
                total += t;
            }
            System.out.println("Mean duration: " + new BigDecimal(total).divide(new BigDecimal(count), RoundingMode.HALF_UP));
        }
    }

    static void executePerformLogin(String hostname, String username, String password) throws MalformedURLException {
        System.setProperty("java.security.krb5.realm", "CYMRU.NHS.UK");
        System.setProperty("java.security.krb5.kdc", hostname);
        File jaas = new File("jaas.conf");
        String jaasconf = jaas.toURI().toURL().toExternalForm();
        System.setProperty("java.security.auth.login.config", jaasconf);
        //      System.setProperty("java.security.krb5.realm", "cymru.nhs.uk");
        //      System.setProperty("java.security.krb5.kdc", "cymru.nhs.uk");
        try {
            System.out.println("Performing NADEX login for username: " + username + " at " + new Date() + " to server " + hostname);
            LoginContext lc = new LoginContext("primaryLoginContext", new UserNamePasswordCallbackHandler(username, password));
            lc.login();
            System.out.println("Successful login for " + lc.getSubject().toString() + " at " + new Date());
        }
        catch (javax.security.auth.login.LoginException le) {
            System.err.println("Failed to login: " + le);
        }
    }

    public static class UserNamePasswordCallbackHandler implements CallbackHandler {
        private final String _userName;
        private final String _password;

        public UserNamePasswordCallbackHandler(String userName, String password) {
            _userName = userName;
            _password = password;
        }

        public void handle(Callback[] callbacks) throws IOException,
        UnsupportedCallbackException {
            for (Callback callback : callbacks) {
                if (callback instanceof NameCallback && _userName != null) {
                    ((NameCallback) callback).setName(_userName);
                }
                else if (callback instanceof PasswordCallback && _password != null) {
                    ((PasswordCallback) callback).setPassword(_password.toCharArray());
                }
            }
        }
    }
} 
```

# xcode - AppleScript 本身可以创造奇迹，但从插件调用时不起作用

> ID：15382062
> 
> 赞同：0
> 
> 时间：2013-03-13T10:00:58.623
> 
> 标签：xcode, exception, plugins, applescript, applescript-objc

我知道使用 AppleScript 无法访问新创建的用户编写的内容，所以我使用 GUI Scripting。但我希望 Mail.app 包含自己的按钮，该按钮已添加到我从所需目录发送的新创建文件中。我有一个 Mail.app 插件有一个由我自己的按钮调用的脚本。该脚本本身可以创造奇迹，但从插件调用时它不起作用。我究竟做错了什么？

**错误**

```
{
NSAppleScriptErrorAppName = "System Events";
NSAppleScriptErrorBriefMessage = "System Events get error: Can not catch window 1 of process "Mail". Wrong index.";
NSAppleScriptErrorMessage = "System Events get error: Can not catch window 1 of process "Mail". Wrong index.";
NSAppleScriptErrorNumber = "-1719";
NSAppleScriptErrorRange = "NSRange: {0, 0}";
} 
```

**和脚本**

```
property theMessage : ""
property allMessages : ""
property myPath : ""
property mySubfolder : "prettyAttachment"

tell application "AppleScript Utility"
    set GUI Scripting enabled to true
end tell

tell application "Mail"

try
    set allMessages to outgoing messages
    set theMessage to front outgoing message
end try

if theMessage is not equal to "" then
    tell application "Finder"
        activate
        set myPath to quoted form of POSIX path of ((path to downloads folder as string) & mySubfolder)
        set shellScriptText to "open " & myPath
        do shell script shellScriptText

        tell application "System Events"
            keystroke "a" using command down
            keystroke "c" using command down
            keystroke "h" using command down
        end tell
    end tell

    activate --mail.app

    tell application "System Events"
        tell process "Mail"
            --?set visible to true
            set allUI to every UI element of front window
        end tell
        repeat with anUI in allUI --as list
            set theRole to role of anUI
            if theRole is equal to "AXScrollArea" then
                set allSubUi to UI elements of anUI
                if (count of allSubUi) is equal to 2 then
                    --set focused of anUI to true
                    set value of attribute "AXFocused" of anUI to true
                    tell application "System Events"
                        keystroke "v" using command down
                        return true
                    end tell
                end if
            end if
        end repeat
    end tell
    end if
end tell 
```

因此，为了进行测试，您可以将一些文件添加到`prettyAttachment`下载文件夹中的文件夹 -> 打开 Mail.app 并创建消息 -> 启动脚本

**但是为什么脚本在 xCode 包中不起作用？问候并希望得到帮助。**

**EDIT1**还看到[无法在“邮件”应用程序中执行 AppleScript](https://stackoverflow.com/questions/13890369/not-able-to-execute-applescript-within-mail-application)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:21:25.483

不是很优雅的解决方案，但它有效。虽然这在各方面都是一对拐杖=）

我在我的 swizzle MailDocumentEditor 类中触发了我的脚本。我从脚本中删除了关于焦点到消息正文和方法的所有内容：

```
@interface MailDocumentEditor : DocumentEditor<...>{...}
...
- (EditingMessageWebView)webView;
... 
```

和

```
@interface EditingMessageWebView : TilingWebView <...>{...}
...
- (BOOL)isActive;
- (void)paste:(id)arg1;
... 
```

一起

```
[[PrettyBundle sharedInstance] attachPrettyFiles];//fired first half of script (copy to clipboard)

MailDocumentEditor *prettyResult = (MailDocumentEditor*)self;
id prettyWebView = [pbResult webView];
[prettyWebView paste:nil]; 
```

仅此而已 =)

# c# - Log4Net 不释放资源

> ID：15382063
> 
> 赞同：1
> 
> 时间：2013-03-13T10:01:06.003
> 
> 标签：c#, logging, log4net

我有一个将 Log4Net 记录到 aa 文件的 DLL 文件。有一个进程加载 DLL 并可以创建 DLL 的多个实例。

DLL 的每个实例都必须创建一个单独的日志文件。因此，我以编程方式完成所有 Log4Net 配置。

我从[这里使用了一些帮助。](https://stackoverflow.com/questions/1519728/programmatically-adding-and-removing-log-appenders-in-log4net)

这是我的代码：

```
public class LogHelper
{
    private PatternLayout _layout = new PatternLayout();
    private const string LOG_PATTERN = "%date %-5level - %message%newline";
    private String Configuration;

    public static string DefaultPattern
    {
        get { return LOG_PATTERN; }
    }

    public ILog log = null;

    public LogHelper(String configuration)
    {
        Configuration = configuration;

        InitialiseLogger();

        _layout.ConversionPattern = DefaultPattern;
        _layout.ActivateOptions();

        Hierarchy hierarchy = (Hierarchy)LogManager.GetRepository();

        hierarchy.Configured = true;            
        hierarchy.LevelMap.Add(log4net.Core.Level.Debug);
        hierarchy.LevelMap.Add(log4net.Core.Level.Critical);
        hierarchy.LevelMap.Add(log4net.Core.Level.Info);
        hierarchy.LevelMap.Add(log4net.Core.Level.Warn);
        hierarchy.LevelMap.Add(log4net.Core.Level.Error);
        hierarchy.LevelMap.Add(log4net.Core.Level.Fatal);
    }

    ~LogHelper()
    {            
        log.Debug("Closing myself down");
        IAppender[] appenders = log.Logger.Repository.GetAppenders();
        //appenders are empty
        log.Logger.Repository.Shutdown();
    }

    public void InitialiseLogger()
    {            
        Hierarchy hierarchy = (Hierarchy)LogManager.GetRepository();
        Logger newLogger = hierarchy.GetLogger(Configuration) as Logger;

        PatternLayout patternLayout = new PatternLayout();
        patternLayout.ConversionPattern = LOG_PATTERN;
        patternLayout.ActivateOptions();

        RollingFileAppender roller = new RollingFileAppender();            
        roller.Layout = patternLayout;
        roller.AppendToFile = true;
        roller.RollingStyle = RollingFileAppender.RollingMode.Size;
        roller.MaxSizeRollBackups = 4;
        roller.MaximumFileSize = "10MB";
        String name = String.Format("-{0:yyyy-MM-dd_HH-mm-ss}", DateTime.Now);
        roller.File = "C:\\Logs\\" + Configuration + name + ".log";
        roller.ImmediateFlush = true;
        roller.ActivateOptions();

        newLogger.AddAppender(roller);

        log = LogManager.GetLogger(Configuration);
    } 
```

问题是 log.Debug("Closing myself down"); 未记录到日志文件；我知道它正在被调用。并且日志文件永远不会被释放，除非我停止加载我的 DLL0 的进程，并且我不想停止它。

[此处](https://stackoverflow.com/questions/5892916/proper-way-to-shutdown-a-logger-instance-in-log4net)的链接 解释了如何关闭附加程序。但问题是在我的析构函数中调用 log.Logger.Repository.GetAppenders(); 返回一个空数组。

我该如何解决？

请注意：加载我的 DLL 的过程来自第 3 方，我不知道它的内部结构。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T10:05:55.733

您正在使用 LogHelper 的析构函数来释放文件

根据[语言规范](http://msdn.microsoft.com/en-us/library/ms228593.aspx)中的 1.6.7.6 析构函数，析构函数将被调用，但您不知道何时。你只知道它会在进程终止之前被调用。

最明显的做法是将析构函数的逻辑移动到将被显式调用的方法（例如[Dispose](http://msdn.microsoft.com/en-us/library/498928w2.aspx)）

这样您就可以调用该方法，从而释放文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T10:06:09.287

你所说的“析构函数”实际上是一个`Finalizer`. 它们应该只用于释放非托管资源，所以在我看来你正在滥用它。另请注意，Finalizer 很可能在单独的线程上被调用，它可能在有效的随机时间被调用，甚至可能根本不被调用。

您应该`LogHelper`实施`IDisposable`和实施`Dispose()`（其中将包含当前在您的终结器中的逻辑）。

然后，您需要通过在适当的时间`LogHelper`调用来管理您的生命周期。`Dispose()`

# javascript - jQuery.after() 没有按预期工作

> ID：15382064
> 
> 赞同：5
> 
> 时间：2013-03-13T10:01:11.700
> 
> 标签：javascript, jquery, html, jquery-after

请看一下：http: [//jsfiddle.net/s6VdW/](http://jsfiddle.net/s6VdW/)

HTML：

```
<div id="test"></div> 
```

JS：

```
var span1 = $("<span/>").text("Hello");
var br = $("<br/>");
var span2 = $("<span/>").text("World!");
span1.after(br).after(span2);

$("#test").append(span1); 
```

预期结果是：

```
Hello
World 
```

HTML 的预期结果是：

```
<div>
    <span>Hello</span>
    <br/>
    <span>World</span>
</div> 
```

错误是什么？根据 jQuery Docs ( [http://api.jquery.com/after/](http://api.jquery.com/after/) ) 它应该是可能的：

> `.after()`也适用于断开连接的 DOM 节点。

和

> 即使在将其插入文档之前，也可以进一步操作该集合。

**更新**

看来，我需要先将第一个跨度附加到 DOM，然后再使用`.after()`. 但是有什么选择呢？如果我无法访问 DOM，例如因为我处于代码的 DOM 未知部分？[http://jsfiddle.net/s6VdW/10/](http://jsfiddle.net/s6VdW/10/)

**更新 2**

我可以创建一个“临时” div，将元素附加到其中。然后我返回那个 div 的孩子。演示： http: [//jsfiddle.net/s6VdW/13/](http://jsfiddle.net/s6VdW/13/) - 这看起来像要走的路吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:21:25.933

您正在动态创建 html，因此您需要先调用 append()，然后再调用 after()。

你应该试试

```
<div id="test"></div> 
```

JS

```
var span1 = $("<span/>").text("Hello");
var br = $("<br/>");
var span2 = $("<span/>").text("World!");
$("#test").append(span1);
span1.after(span2).after(br); 
```

添加元素的顺序应该是从左到右

**[演示](http://jsfiddle.net/s6VdW/6/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:22:32.133

试试这个：

```
var span1 = $("<span/>").text("Hello");
var br = $("<br/>");
var span2 = $("<span/>").text("World!");

$("div").append(span1);
span1.after(br);
br.after(span2); 
```

`.after()`当你先追加时做`span1`。

### [小提琴](http://jsfiddle.net/s6VdW/7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T10:32:12.230

`.after()`问题是您在创建该 span 元素之前同时使用动态创建 span1 。`span1.after(br).after(span2);`在这一行中，它将搜索`span1`要应用的元素，`.after()`但该元素不存在。如果您清楚地了解我们为什么必须使用`.ready()`它，这里就有相似之处。你的代码应该是这样的

```
var span1 = $("<span/>").text("Hello");
var br = $("<br/>");
var span2 = $("<span/>").text("World!");

$("#test").append(span1);
span1.after(span2).after(br); 
```

并记住**从左到右**`.after()`添加元素，因此您必须按**9 到 1**的顺序使用，因此它会给出结果**1 到 9**。**`.after()`**

 ******希望你得到答案。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T10:09:25.500

尝试

```
var span1 = $("<span/>").text("Hello");
var br = $("<br/>");
var span2 = $("<span/>").text("World!");
span1.after(br);

$("#test").append(span1).append(span2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T10:29:21.767

如果要使用 after 方法，可以尝试以下方法：

```
// Initialize jQuery objects
var span1 = $("<span/>").text("Hello");
var br = $("<br/>");
var span2 = $("<span/>").text("World!");

// First step : Add the first element to your div
$("div").append(span1);
// Second step : Add the differents elements with the add method (note that I inversed the order to work fine because the after is applied to span1 and not to the last added element.
span1.after(span2).after(br); 
```******

# mysql - excel到sql连接失败

> ID：15382065
> 
> 赞同：0
> 
> 时间：2013-03-13T10:01:12.767
> 
> 标签：mysql, sql, sql-server, sharepoint-2010

我的 hyper v 上有 2 个不同的服务器，一个有 sql，另一个有 SharePoint。我正在尝试从包含 SharePoint 的服务器创建到 sql server 表的连接。将数据作为表格或数据透视表报告导入excel。输入sql server名称并尝试使用窗口身份验证连接后，此错误不断出现：登录失败。登录来自不受信任的域，不能与 Windows 身份验证一起使用。Sql 服务器是 2008 年的。

关于我能做些什么来解决这个问题的任何想法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:09:11.843

集成安全性可以与不受信任的域和不匹配的用户名和密码一起使用。这可能会对您的情况有所帮助。

这些问题的解决方案可能会有所帮助：

*   这是最适合您使用的：[SQL Server Integrated Security](https://stackoverflow.com/questions/10752084/sql-server-integrated-security/10752761#10752761)

*   但另请参阅：[SQL Server Management Studio 2008 Runas user on different domain over VPN](https://stackoverflow.com/questions/5237654/sql-server-management-studio-2008-runas-user-on-different-domain-over-vpn/5362712#5362712)

# javascript - Video.js this.tech undefined firefox

> ID：15382066
> 
> 赞同：1
> 
> 时间：2013-03-13T10:01:15.077
> 
> 标签：javascript, html, video, video.js

我正在尝试使用 BigVideo.js，它在 Chrome 和 Safari 中运行良好，但在 Firefox 中，错误“this.tech is undefined”显示导致视频无法正常工作。以前有没有人遇到过这个错误并且知道修复？

干杯:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:00:31.450

Video Online Convert 实际上在 WebM 上做得很好

[http://video.online-convert.com/convert-to-webm](http://video.online-convert.com/convert-to-webm)

或者 Ogg 如果你必须...

[http://video.online-convert.com/convert-to-ogg](http://video.online-convert.com/convert-to-ogg)

您会发现它明显优于使用 .ogv 并且该插件非常支持它。对于环境视频，您会做更多类似的事情：

```
var BV = new $.BigVideo({useFlashForFirefox:false});
BV.init();
BV.show('vids/river.mp4', {
  ambient: true,
  altSource:'vids/river.webm'
}); 
```

请务必将您的 MP4 标记为编码的快速启动，否则您会发现它在 IE 开始播放之前缓冲到 100%。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:06:58.897

并非所有浏览器都支持所有视频编解码器。确保您尝试播放的视频格式与 Firefox 兼容

[http://dfcb.github.com/BigVideo.js/](http://dfcb.github.com/BigVideo.js/)

> 为在 Firefox 中获得最佳效果，请创建视频的 Ogg 版本并配置 BigVideo.js，如下所示或在本示例中。（注意：也适用于 WebM）
> 
> ```
> $(function() {
>     var BV = new $.BigVideo({useFlashForFirefox:false});
>     BV.init();
>     BV.show('vids/river.mp4', {altSource:'vids/river.ogv'});
> }); 
> ```

[https://developer.mozilla.org/en-US/docs/HTML/Supported_media_formats](https://developer.mozilla.org/en-US/docs/HTML/Supported_media_formats)列出了每个浏览器支持的格式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T22:57:30.763

当 videojs 被指示仅使用 Flash 但未安装 Flash 时，我收到此错误。使用缩小/非调试版本时，它还显示为错误消息“TypeError: ah is undefined”。

# sharepoint - 办公网络应用程序集成

> ID：15382068
> 
> 赞同：1
> 
> 时间：2013-03-13T10:01:27.673
> 
> 标签：sharepoint, ms-office, office365, sharepoint-api

我们希望允许我们网站的用户在 Office WebApps 中显示办公文档。由于 Office WebApps 仅允许用于 skydrive 或 sharepoint，并且我们为许多租户提供了大量文档，因此我们选择在线使用 sharepoint。这个想法是将文档上传到共享点并获取公共共享访问链接，以便我们可以将浏览器重定向到那里并运行办公网络应用程序。

是否有 API 允许我们将文档上传到在线共享点并获取公共共享访问链接？

在不安装 WebApps 服务器的情况下集成 Office WebApps 的任何其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:25:49.353

您可以使用项目的默认链接（根据您上传文档的方式，检索该链接会有所不同），然后[将 SharePoint 配置为默认使用 Office WebApps 打开文档](http://technet.microsoft.com/en-us/library/ee837425.aspx)。

# java - 在没有新行的cmd中显示进度

> ID：15382069
> 
> 赞同：3
> 
> 时间：2013-03-13T10:01:31.430
> 
> 标签：java

我有一个运行在`cmd`. 我想在运行此过程时显示进度。在这个应用程序中，有 50 个分支正在处理，我想在处理完一个分支后显示**2%**完成，另一个分支处理完**4%**，依此类推。问题是当我使用

```
System.out.print("PROGRESS :" + branch_Vec.get(value).toString()+" : "+ df2.format(((a / total) * 100)) +" % \r"); 
```

作为输出，它每次调用时都会换行。

我想在同一行显示进度。例如：

```
progress : AB : 2% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:18:31.263

代码`System.out.print("\rComplete: "+percentage);`应该可以正常工作。

这`\r`是一个回车，将清除当前行。只要您不写换行符`\n`，您就可以更新文本。

请注意，如果您使用它进行测试，这在 Eclipse 的控制台中*不起作用。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:10:15.560

没有办法做到这一点，至少以简单的方式。关键是默认值`System.out` `OutputStream`允许您调用`print()`，它一个接一个地打印字符，或者`println()`，它与 相同`print()`，但也在文本末尾添加一个新行。

一种不优雅的解决方案是在更新之间清除屏幕，以使其看起来像是在同一位置打印。例如，如果您使用的是 Windows，这将是：

```
Runtime.getRuntime().exec("cls"); 
```

不幸的是，这一行是系统相关的，因为它调用了`cls`命令。

# css - 如何更改 CSS 中的 Google Chrome 阿拉伯语默认字体？

> ID：15382071
> 
> 赞同：0
> 
> 时间：2013-03-13T10:01:40.243
> 
> 标签：css, google-chrome, fonts, arabic, font-size

Google Chrome 中的阿拉伯语默认字体比 Firefox 中的大。如何在 css 中将 Chrome 阿拉伯字体大小设置为更小，或者是否有其他可能的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-22T20:07:51.740

你可以使用这个插件：高级字体设置

[https://chrome.google.com/webstore/detail/advanced-font-settings/caclkomlalccbpcdllchkeecicepbmbm?utm_source=chrome-app-launcher-info-dialog](https://chrome.google.com/webstore/detail/advanced-font-settings/caclkomlalccbpcdllchkeecicepbmbm?utm_source=chrome-app-launcher-info-dialog)

[![在此处输入图像描述](../Images/1f8ca0d7330f60aab3efbf1de82ce2e6.png)](https://i.stack.imgur.com/FZc6r.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:06:30.527

请按照以下步骤更改这些设置：

```
1.Click the Chrome menu  on the browser toolbar.
2.Select Settings.
3.Click Show advanced settings and go to the "Web Content" section.
4.Default fonts and encodings 
```

然后只需更改大小！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:12:14.340

这可能有效：

```
@media screen and (-webkit-min-device-pixel-ratio:0) {
    .className {font-size: xx;} 
} 
```

这是针对 chrome 的媒体查询

# c# - 更改 ListBoxDragDropTarget 中 DragDecorator 的默认移动

> ID：15382073
> 
> 赞同：1
> 
> 时间：2013-03-13T10:01:48.073
> 
> 标签：c#, silverlight-4.0, drag-and-drop, silverlight-toolkit

我正在使用 Silverlight Toolkit 中的 ListBoxDragDropTarget，我想在拖动项目时更改它的移动。因此，在我的 ListBox 面板中，它只能在面板内移动，并且只允许垂直移动而不是水平移动。

默认情况下，您可以将 ListBox 中的项目移动到整个应用程序上，我不希望它只能在 ListBox 中移动。

所以我尝试的是更改 PopupControl 和 DragDecoratorControl 的 RenderTransform，甚至是模板内的 Canvas。

```
public class FixedListBoxDragDropTarget : ListBoxDragDropTarget
{
    public Popup DragPopupControl { get; set; }
    public DragDecorator DragDecoratorControl { get; set; }

    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();
        DragPopupControl = GetTemplateChild(DragPopupName) as Popup;
        DragDecoratorControl = GetTemplateChild(DragDecoratorName) as DragDecorator;
    }
} 
```

在 ListBoxItems 上附加了 MouseMove 事件

```
private void TopicUsedControl_MouseMove_1(object sender, System.Windows.Input.MouseEventArgs e)
{
    //Get the Control
    var dragDropPanel = UIHelper.FindChild<FixedListBoxDragDropTarget>(Application.Current.RootVisual, "DragDropControl");

    var transform = dragDropPanel.DragPopupControl.RenderTransform as CompositeTransform;
    var transformDragdecorator = dragDropPanel.DragDecoratorControl.RenderTransform as CompositeTransform;
    if (transform == null && transformDragdecorator == null)
    {
        transform = new CompositeTransform();
        transformDragdecorator = new CompositeTransform();
        dragDropPanel.DragPopupControl.RenderTransform = transform; //PopupControl of Template
        dragDropPanel.DragPopupControl.Child.RenderTransform = transform; //Canvas inside the Template
        dragDropPanel.DragDecoratorControl.RenderTransform = transformDragdecorator; // Dragdecorator of Template
    }

    transform.TranslateX = 0;
    transform.TranslateY = 10;
    transformDragdecorator.TranslateX = 0;
    transformDragdecorator.TranslateY = 10;
} 
```

我试图将 RenderTranform 设置为控件不再移动的固定值来测试它。但它什么也没发生，我可以用鼠标移动控件，上面的代码没有任何效果。

如何更改或覆盖 dragdecorator 的默认移动行为？

# python - 在python中绘制功率谱

> ID：15382076
> 
> 赞同：40
> 
> 时间：2013-03-13T10:01:54.220
> 
> 标签：python, numpy, scipy, signal-processing

我有一个包含 301 个值的数组，这些值是从 301 帧的影片剪辑中收集的。这意味着来自 1 帧的 1 个值。影片剪辑以 30 fps 运行，因此实际上是 10 秒长

现在我想得到这个“信号”的功率谱（用右轴）。我试过：

```
 X = fft(S_[:,2]);
 pl.plot(abs(X))
 pl.show() 
```

我也试过：

```
 X = fft(S_[:,2]);
 pl.plot(abs(X)**2)
 pl.show() 
```

虽然我不认为这是真正的光谱。

信号： ![在此处输入图像描述](../Images/3add6d061a42b990d33151a2ca6ffc25.png)

光谱：![在此处输入图像描述](../Images/5b7aa3be33c33d4b77e423c8a1dc4db6.png)

功率谱：

![在此处输入图像描述](../Images/284b754e22c5255d41ae29b7dca525a5.png)

任何人都可以提供一些帮助吗？**我想有一个以 Hz 为单位的情节**。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-03-13T14:39:01.677

Numpy 有一个方便的函数，`np.fft.fftfreq`用于计算与 FFT 分量相关的频率：

```
from __future__ import division
import numpy as np
import matplotlib.pyplot as plt

data = np.random.rand(301) - 0.5
ps = np.abs(np.fft.fft(data))**2

time_step = 1 / 30
freqs = np.fft.fftfreq(data.size, time_step)
idx = np.argsort(freqs)

plt.plot(freqs[idx], ps[idx]) 
```

![在此处输入图像描述](../Images/6ca1710073320448456a11005deee836.png)

请注意，您在案例中看到的最大频率不是 30 Hz，而是

```
In [7]: max(freqs)
Out[7]: 14.950166112956811 
```

您永远不会在功率谱中看到采样频率。如果您有偶数个样本，那么您将达到[奈奎斯特频率](http://en.wikipedia.org/wiki/Nyquist_frequency)，在您的情况下为 15 Hz（尽管 numpy 会将其计算为 -15）。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-13T12:37:53.100

如果rate是采样率（Hz），那么`np.linspace(0, rate/2, n)`是fft中每个点的频率数组。您可以使用`rfft`fft 来计算数据中的实际值：

```
import numpy as np
import pylab as pl
rate = 30.0
t = np.arange(0, 10, 1/rate)
x = np.sin(2*np.pi*4*t) + np.sin(2*np.pi*7*t) + np.random.randn(len(t))*0.2
p = 20*np.log10(np.abs(np.fft.rfft(x)))
f = np.linspace(0, rate/2, len(p))
plot(f, p) 
```

![在此处输入图像描述](../Images/9363a96ea772c94a018b76c864df31ae.png)

信号 x 包含 4Hz 和 7Hz 正弦波，因此在 4Hz 和 7Hz 有两个峰值。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-07-31T13:26:31.143

您还可以使用[scipy.signal.welch](https://scipy.github.io/devdocs/generated/scipy.signal.welch.html)使用 Welch 方法估计功率谱密度。这是 np.fft.fft 和 scipy.signal.welch 之间的比较：

```
from scipy import signal
import numpy as np
import matplotlib.pyplot as plt

fs = 10e3
N = 1e5
amp = 2*np.sqrt(2)
freq = 1234.0
noise_power = 0.001 * fs / 2
time = np.arange(N) / fs
x = amp*np.sin(2*np.pi*freq*time)
x += np.random.normal(scale=np.sqrt(noise_power), size=time.shape)

# np.fft.fft
freqs = np.fft.fftfreq(time.size, 1/fs)
idx = np.argsort(freqs)
ps = np.abs(np.fft.fft(x))**2
plt.figure()
plt.plot(freqs[idx], ps[idx])
plt.title('Power spectrum (np.fft.fft)')

# signal.welch
f, Pxx_spec = signal.welch(x, fs, 'flattop', 1024, scaling='spectrum')
plt.figure()
plt.semilogy(f, np.sqrt(Pxx_spec))
plt.xlabel('frequency [Hz]')
plt.ylabel('Linear spectrum [V RMS]')
plt.title('Power spectrum (scipy.signal.welch)')
plt.show() 
```

[![fft[2]](../Images/fb98d22c4bfae994f1078fe70d30f260.png) [![韦尔奇](../Images/d175d83b908f6cf367a6b4dbd52a2c1f.png)](https://i.stack.imgur.com/23rYv.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-13T10:06:00.320

从 numpy fft 页面[http://docs.scipy.org/doc/numpy/reference/routines.fft.html](http://docs.scipy.org/doc/numpy/reference/routines.fft.html)：

> 当输入 a 为时域信号且 A = fft(a) 时，np.abs(A) 为其幅度谱，np.abs(A)**2 为其功率谱。相位谱由 np.angle(A) 获得。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-11-24T06:56:48.253

由于 FFT 在其中心上是对称的，因此一半的值就足够了。

```
import numpy as np
import matplotlib.pyplot as plt

fs = 30.0
t = np.arange(0,10,1/fs)
x = np.cos(2*np.pi*10*t)

xF = np.fft.fft(x)
N = len(xF)
xF = xF[0:N/2]
fr = np.linspace(0,fs/2,N/2)

plt.ion()
plt.plot(fr,abs(xF)**2) 
```

# android - 如何在android中解密SQLCipher加密文件？

> ID：15382081
> 
> 赞同：5
> 
> 时间：2013-03-13T10:02:13.647
> 
> 标签：android, encryption, sqlcipher

我在 android 中使用 SQLCipher 开发了应用程序。这是将您的数据库文件保护到应用程序中的安全方法。它可以很好地进行加密，但我想解密加密的数据库文件并想查看 SQLite 浏览器。

实际上我有很多表格和可用的数据。现在，如果我想查看加密的数据库数据，则无法查看（只有日志可用于查看数据）。但是使用 SQLite 浏览器我看不到它。

我正在使用**“info.guardianproject.database.sqlcipher.SQLiteDatabase”**

我尝试了很多方法来解密它并查看 SQLite 浏览器，但它给出了错误“发生错误：文件不是 sqlite3 数据库”。

任何人都可以帮我解密加密的数据库文件。

或者我应该复制加密数据库文件并使用**“info.guardianproject.database.sqlcipher.SQLiteDatabase”**对其进行解密 并使用它来查看所有表。

谢谢，

米沙尔沙阿

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-11T19:15:20.330

我通过从设备中提取数据库并对其进行解密来解决此问题。下面的脚本将生成一个解密的数据库文件。这个文件可以用 SQLite-viewer 打开。

# 解密.sh

```
#!/bin/bash
# Bashscript to decrypt databases

echo "pull db from device.."
adb pull /data/data/com.example/databases/database.db

echo "removing previous decrypted db, if existent.."
rm -r decrypted_database.db

echo "decrypting database.db into decrypted_database.db"
sqlcipher -line database.db 'PRAGMA key = "encryption_key";ATTACH DATABASE "decrypted_database.db" AS decrypted_database KEY "";SELECT sqlcipher_export("decrypted_database");DETACH DATABASE decrypted_database;' 
```

应该在您的 PATH 中：

*   [亚行](https://stackoverflow.com/a/19764254/1281750)
*   [sqlcipher](https://www.zetetic.net/blog/2013/1/21/sqlcipher-available-on-homebrew.html)

在脚本中替换：

*   **com.example**与您的包名
*   **名称为 databasefile 的**database.db****
***   **带加密**密码的 encryption_key**

 **注意：设备需要root

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T11:30:27.920

您需要使用包含 SQLCipher 扩展的 SQLite 实用程序。您可以[在 Linux 上下载并构建 SQLCipher 代码](http://sqlcipher.net/introduction/)，它应该为您提供一个`sqlite3`可用于访问数据库的实用程序（使用适当的`PRAGMA`语句来指定密码等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-25T01:52:21.123

该`decrypt.sh`脚本帮助了我一段时间。但过了一段时间，我发现[SQLiteManager](http://www.sqlabs.com/sqlitemanager.php)开始支持 SQLCipher 加密数据库。它有一个漂亮的用户界面。即使它不是免费的并且您仍然需要从设备中提取数据库文件，我认为尝试一下还是不错的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-11T10:38:08.697

在你的android应用程序代码之后

dbHelper.getReadableDatabase(dbKey); 数据库文件将被解密..通过将文件复制代码复制数据库文件写入一些外部sd卡文件路径并使用任何sqllite工具打开它

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-13T10:15:56.263

Gnome 的 GDA 可以做到这一点。[在这里](http://www.gnome-db.org/Download)下载。**

# string - Visual Studio 资源编译器字符串合并

> ID：15382083
> 
> 赞同：3
> 
> 时间：2013-03-13T10:02:22.877
> 
> 标签：string, visual-studio, visual-c++, c-preprocessor

在我的项目中，我有一个包含文件“buildversion.h”，其中包含版本号的定义。为了使它更易于管理，我做了一些预处理器“魔术”

问题是，Visual Studio 资源文件编辑器的行为不像普通编译器，所以我得到“错误”的条目

我的头文件：

```
#define MAJOR_VER_NUM 2
#define MINOR_VER_NUM  3
#define REV_NUM     9999
#define STR(x)   #x        // helper defines
#define XSTR(x)  STR(x)  // helper defines
#define XXX_FILE_VERSION           MAJOR_VER_NUM,MINOR_VER_NUM,REV_NUM,0
#define XXX_PRODUCT_VERSION        MAJOR_VER_NUM,MINOR_VER_NUM,REV_NUM,0
#define XX_FILE_VERSION_STRING    XSTR(MAJOR_VER_NUM)", "XSTR(MINOR_VER_NUM)", "XSTR(REV_NUM)", 0"
#define ICOS_PRODUCT_VERSION_STRING XSTR(MAJOR_VER_NUM)", "XSTR(MINOR_VER_NUM)", "XSTR(REV_NUM)", 0"
int const MajorVersionNumber = MAJOR_VER_NUM;
int const MinorVersionNumber = MINOR_VER_NUM;
int const RevisionNumber     = REV_NUM; 
```

在我的“main.rc”文件中，我包含了上面的标题，并在我写的版本块中

```
VALUE "FileVersion", XXX_FILE_VERSION_STRING 
```

此条目的结果是：

> 2"、"3"、"9999"、0

如果我在普通 c++ 代码中使用上述头文件，则替换工作正常，我得到

> 2、3、9999、0

正如预期的那样。

有什么方法可以在资源文件中完成这项工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:16:04.500

这是对我有用的代码，被替换为使用与您相同的宏名称。

保持您的版本号和 str 助手不变，然后：

```
 #define XXX_FILE_VERSION_DOT MAJOR_VER_NUM.MINOR_VER_NUM.REV_NUM.0
  #define XXX_FILE_VERSION_COMMA MAJOR_VER_NUM,MINOR_VER_NUM,REV_NUM,0

  #define XXX_FILE_VERSION_DOT_STR XSTR(XXX_FILE_VERSION_DOT)
  #define XXX_FILE_VERSION_COMMA_STR XSTR(XXX_FILE_VERSION_COMMA) 
```

然后在 .rc 中，我发现您只需要在部分中使用*逗号形式*`FILEVERSION`，如下所示：

```
 FILEVERSION XXX_FILE_VERSION_COMMA 
```

稍后在该`StringFileInfo`块中，您使用*点分字符串形式*版本，如下所示：

```
 VALUE "FileVersion", XXX_FILE_VERSION_DOT_STR 
```

# android - 无法使用 ant 构建 Android 应用程序

> ID：15382086
> 
> 赞同：0
> 
> 时间：2013-03-13T10:02:31.740
> 
> 标签：android, ant

当我在命令提示符中键入 ant 时出现此错误

`C:\Mobility Android\Mobility\eclipse\plugins\org.apache.ant_1.7.1.v20100518-1145 \bin\build.xml:90: Cannot find D:\android-sdk-windows\tools/tools/ant/build.xml imported from C:\Mobility Android\Mobility\eclipse\plugins\org.apache.ant_1.7.1. v20100518-1145\bin\build.xml`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:38:17.790

路径`D:\android-sdk-windows\tools/tools/ant/build.xml`中有两个副本`tools`。它应该只有一个。也许这是您`local.properties`文件中的问题？

# ruby-on-rails - 如何为 options_from_collection_for_select 中的每个选项动态生成唯一名称？

> ID：15382088
> 
> 赞同：1
> 
> 时间：2013-03-13T10:02:36.393
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想生成一个这样的选项标签：

```
<option name="option_1" value="1">Small</option>
<option name="option_2" value="2">Medium</option> 
```

像这样使用我的电话：

```
<%= select_tag option.name, options_from_collection_for_select(option.option_values, "id", "name"), include_blank: true %> 
```

通过生成以下内容，让我走到了一半：

```
<option value="1">Small</option>
<option value="2">Medium</option> 
```

如何`name`使用此结构将属性添加到选项标签？这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:09:10.693

选项标签没有`name`属性。该`name`属性应在`select`标签中定义：

```
<select name="name">
  <option value="1">Small</option>
  <option value="2">Medium</option>
</select> 
```

有关更多信息，请参阅此页面 - [http://www.w3schools.com/tags/tag_option.asp](http://www.w3schools.com/tags/tag_option.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:19:45.420

```
select_tag option.name, options_for_select(option.option_values.map{ |o| [o.name, o.id, {:name_or_smth_else => "option_#{o.id}"}] }) 
```

[options_for_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_for_select)

# objective-c - Objective-C 如何在一行上打印 NSSet（没有尾随逗号/空格）

> ID：15382089
> 
> 赞同：5
> 
> 时间：2013-03-13T10:02:37.393
> 
> 标签：objective-c

我试图在一行上打印出一个 NSSet，逗号分隔但没有尾随逗号或空格。我怎样才能做到这一点？

我知道这适用于数组：

```
 NSMutableString *outputStringArray = [[NSMutableString alloc] init];
    NSMutableArray *myArray = [[NSMutableArray alloc] initWithCapacity:10];

    for (int k = 0; k < [myArray count]; k++) {
        [outputStringArray appendFormat:@"%@, ", [myArray objectAtIndex:k]];
    }
    NSLog(@"%@", [outputStringArray substringToIndex:[outputStringArray length] - 2]); 
```

但由于集合没有索引，我不能这样做。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T10:07:12.707

您总是可以从一个集合中创建一个数组，如下所示：

```
NSArray *myArray = [mySet allObjects]; 
```

之后，您可以使用以下命令获取字符串`componentsJoinedByString:`：

```
NSString *str = [myArray componentsJoinedByString:@", "]; 
```

当然，您可以使用类似于您帖子中的简单循环来实现相同的效果：

```
BOOL isFirst = YES;
for (id element in mySet) {
    if (!isFirst) {
        [outputStringArray appendString:@", "];
    } else {
        isFirst = NO;
    }
    [outputStringArray appendFormat:@"%@", element];
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-13T10:07:38.143

将集合中的对象作为数组获取并使用`componentsJoinedByString:`

```
NSSet *myset = ....;
NSString *joinedString = [[myset allObjects] componentsJoinedByString:@", "]; 
```

# asp.net - 单击按钮时asp.net更新表

> ID：15382090
> 
> 赞同：4
> 
> 时间：2013-03-13T10:02:38.350
> 
> 标签：asp.net, sql-server, stored-procedures, sql-update

我是 asp.net 的新手，遇到了一个非常愚蠢的问题。但我无法弄清楚。我有一个表单，该表单由 page_load 上的数据库中的数据填充，用户更新表单的输入文本并单击“更新”按钮。它会更新，但会使用旧数据进行更新。

为什么它用旧数据更新它？

这是aspx表单

```
<form id="form1" runat="server">
<table>
    <tr>
        <td>ID</td>
        <td><asp:Label ID="lbl_id" runat="server" Text=""></asp:Label></td>
    </tr>
    <tr>
        <td>FirstName</td>
        <td><asp:TextBox ID="txt_firstname" runat="server"></asp:TextBox></td>
    </tr>
    <tr>
        <td>LastName</td>
        <td><asp:TextBox ID="txt_lastname" runat="server"></asp:TextBox></td>
    </tr>
</table> 
```

这是后面的代码

```
protected void Guncelle_Click(object sender, EventArgs e)
{
        DbCommand dbCommand;
        dbCommand = db.GetStoredProcCommand("MedBul_Update_Registration_Request");
        db.AddInParameter(dbCommand, "id", DbType.Int16, request_id);
        db.AddInParameter(dbCommand, "FirstName", DbType.String, txt_firstname.Text.ToString().Trim());
        db.AddInParameter(dbCommand, "LastName", DbType.String, txt_lastname.Text.ToString().Trim());
        db.ExecuteNonQuery(dbCommand);
 } 
```

这是存储过程

```
Create PROCEDURE [dbo].[MedBul_Update_Registration_Request]
(@id int,@FirstName varchar(50),@LastName varchar(50))

    AS
    BEGIN

    update NewProfessionalRequest set FirstName= @FirstName, LastName =@LastName
     where id = @id

    END

    GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:08:58.790

你提到你用页面加载数据填充页面控件。将您的代码包装在 Page_Load 上，如下所示：

```
if(!isPostBack)
{
    // populate form with data from DB here
} 
```

因为当您点击 UpdateBtn Page_Load 事件时，您的更改将被数据库中的“旧”数据重写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:09:29.867

您应该在页面加载时检查 Page.IsPostBack 属性。

请参阅以下链接

[http://msdn.microsoft.com/en-in/library/system.web.ui.page.ispostback.aspx](http://msdn.microsoft.com/en-in/library/system.web.ui.page.ispostback.aspx)

# c++ - 整理一个eclipse和msvc共享的C++解决方案

> ID：15382091
> 
> 赞同：2
> 
> 时间：2013-03-13T10:02:39.723
> 
> 标签：c++, visual-c++, eclipse-cdt

我知道这个主题可能有点主观，但我需要一些想法。我正在尝试重新组织我的游戏引擎代码。该项目分为模块（核心，日志，...），对于每个模块（或项目），我都有另一个带有单元测试的项目。这有助于可重用性，因为我可以将 Log 项目及其测试放入另一个项目中。我不想要一个包含数千个文件的大型“src”文件夹。

我想在 eclipse 和 msvc 中工作，如果它有助于在 eclipse 和 msvc 中维护相同（或相似）的结构，我在使用 vitual 文件结构时没有问题。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:14:40.880

如果您为同一个项目使用不同的 IDE，或者如果您想共享模块，我建议使用[CMake](http://www.cmake.org/)从单个源/项目结构为 msvc 和 eclipse 生成项目文件。

# sql - MS Access 查询中的随机双倍结果

> ID：15382092
> 
> 赞同：1
> 
> 时间：2013-03-13T10:02:40.453
> 
> 标签：sql, ms-access

如果我在 MS Access 中运行此查询：

```
SELECT q2.questionText, Answers.answerText
FROM Questions q2 INNER JOIN Answers ON q2.questionID = Answers.questionID
WHERE q2.questionID IN (SELECT TOP 15 q.questionID
FROM Questions q
ORDER BY RND(q.questionID)); 
```

我有时会得到双倍的 answerText 行。如果我从这个输出中列出一个数字：

```
SELECT TOP 15 a.questionID
FROM Questions a
ORDER BY RND(a.questionID) 
```

并使用上面超级查询中的数字：

```
SELECT q2.questionText, Answers.answerText
FROM Questions q2 INNER JOIN Answers ON q2.questionID = Answers.questionID
WHERE q2.questionID IN (125, 7, 44, 119, 85, 189, 159, 167, 11, 50, 23, 96, 18, 99, 121); 
```

它按预期工作。我在两个 questionID 字段上强制执行参照完整性。我一直在反复删除表并从添加行的文本文件导出中再次导入它们。怎么修？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:15:01.703

对我来说，RND(a.QuestionID) 可能不止一次给出相同的数字。我还建议“我有时会得到双倍的 answerText”意味着它有时会起作用，而第二个查询只是偶然起作用。

也许是什么：

SELECT TOP 15 questionID FROM (SELECT DISTINCT TOP 30 a.questionID FROM Questions a) ORDER BY RND(questionID)

可能会有所帮助，但它仍然不能保证您获得多个相同的 questionid，只是机会大大减少，因此您应该能够从明显随机生成的集合中获得至少 15 个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T23:52:18.787

“反复删除表并从文本文件导出中再次导入”的事情导致答案重复，从而弄乱了结果。删除 Answers 表中的重复项解决了该问题。很抱歉浪费了您宝贵的时间；直到现在我才想到要检查。

# python - OAuth 对我的应用进行身份验证并允许其访问 Google App Engine 上的数据

> ID：15382094
> 
> 赞同：2
> 
> 时间：2013-03-13T10:02:48.260
> 
> 标签：python, google-app-engine, rest, mobile, oauth

我在 Google App Engine 有一个网络服务器，我想保护我的数据。我的移动应用程序将访问服务器以获取此数据。这个想法是使用 OAuth 验证我的应用程序，当它通过 REST 请求一些数据时。第一次身份验证后，应用程序将始终能够访问内容。我不想要用户的数据，如 Google 帐户或 Facebook。我的移动应用程序将承担我的服务的用户角色。是否可以？有人有另一个想法来创建这些结构吗？我没有使用 Google End Point，我的 GAE 是用 Python 开发的。

先感谢您！

问候， 马里奥·豪尔赫·瓦莱

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:50:49.377

我认为您需要的是服务帐户，请参阅 页面底部的[https://developers.google.com/accounts/docs/OAuth2 。](https://developers.google.com/accounts/docs/OAuth2)

我也刚开始使用应用引擎，所以不要把它当作福音。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:55:51.710

我看到你说你没有使用端点，但不是为什么。这可能是您想要的解决方案，因为它是为同一方（即您拥有后端和客户端应用程序）用例而设计的，这正是您所描述的。

# spring - 在 spring 从数据库中读取数据并写入输出 .txt 文件

> ID：15382095
> 
> 赞同：1
> 
> 时间：2013-03-13T10:02:51.430
> 
> 标签：spring, spring-batch

我只想从数据库中查询数据并将其写入输出文件。如何使用 Spring Batch 实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:41:52.653

看看这个博客，对初学者来说非常棒！ [http://www.mkyong.com/spring/](http://www.mkyong.com/spring/)

那里作者给出了一个关于如何使用 JDBC [http://www.mkyong.com/spring/maven-spring-jdbc-example/的简单明了的例子](http://www.mkyong.com/spring/maven-spring-jdbc-example/)

然后就像 Ranu Jain 正确地说你在你的类中使用 JDBCTemplate 通过注入它的属性来读取信息（执行你想要的查询）。

按照 mkyong 的例子，它会很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:19:15.307

如果您将在 context.xml 中使用 JDBC 模板，那么您将通过在处理器中注入 jdbcTemplate 并使用 File 对象来获得数据库连接，您可以将数据写入任何文件中

```
<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
    <constructor-arg ref="dataSource"/>
</bean> 
```

# android - 如何区分Android中收到的彩信？

> ID：15382098
> 
> 赞同：2
> 
> 时间：2013-03-13T10:03:02.243
> 
> 标签：android

任何人都可以帮助我了解如何区分 Android 中收到的彩信吗？因为我在android中收到的彩信总数错误？我使用以下代码来获取计数。

```
 Uri mmsInboxUri = Uri.parse("content://mms");                
   Cursor mmsInboxCursor = getContentResolver().query(mmsInboxUri ,new String[]
   {"_id","msg_box","ct_t"}, "msg_box=1 or msg_box=2", null, null);
   int count = mmsInboxCursor.getCount(); 
```

# windows - Windows 批处理文件以使用不同的输入文件运行可执行文件

> ID：15382101
> 
> 赞同：1
> 
> 时间：2013-03-13T10:03:07.153
> 
> 标签：windows, batch-file, text-files

我对批处理脚本真的很陌生，所以请耐心等待！在 windows xp 中，我有一个可执行文件，其中包含`input.in`文件`output.out`。我想创建一个批处理，它读取输入文件，修改一行或多行，运行`.exe`并将输出存储在一个文件夹中，该文件夹的名称取决于对输入文件所做的更改。

假设我有一个包含 4 行的输入文件，如下所示：

```
32.0d0 ! first parameter
54.0d5 ! second parameter
1.5d-1 ! third parameter
11.0d0 ! fourth parameter 
```

我想用步骤 0.1 更改 0.0->1.0 范围内的第二个参数：

```
@echo off
setlocal EnableDelayedExpansion
set ReplaceLine1=2
set inpfile=input.in
set tempfile=input.temp
set increment=0.1
if exist "%tempfile%" del "%TempFile%"
for /L %%i in (1,1,11) do (
set /A param_value=(%%i-1)*increment
set /A Cnt2=0
for /f %%a in (%inpfile%) do (
set /A Cnt2+=1
if !Cnt2! geq %ReplaceLine1% echo %param_value% >> "%tempfile%" else echo %%a >> "%tempfile%"
)
copy /y "%tempfile%" "%inpfile%"
MD .\"param_value"
executable.exe < "%tempfile%" >> .\"param_value" 
) 
```

以上是否有机会让我靠近我想去的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:11:39.167

您将面临一个基本问题，即批处理数学仅处理整数......

```
@ECHO OFF
SETLOCAL ENABLEDELAYEDEXPANSION
SET line=%1
SET start=%2
SET inc=%3
SET end=%4
IF NOT DEFINED end ECHO require line#, start, increment, end&GOTO :EOF 
SET inpfile=input.IN
SET tempfile=input.temp
FOR /L %%i IN (%start%,%inc%,%end%) DO (
 IF EXIST "%tempfile%" DEL "%tempfile%"
 FOR /f "tokens=1*delims=[]" %%a IN ('find /n /v "" ^<%inpfile%') DO (
  IF %%a==%line% (
  SET value=%%i
  SET value=!value:~0,-1!.!value:~-1!
  IF .%%i==!value! SET value=0!value!
  >>%tempfile% ECHO !value!
  ) ELSE (>>%tempfile% ECHO %%b)
 )
MD .\!value!
COPY %tempfile% .\!value!\inputdata.
) 
```

我假设您的输入文件不包含`!comment`并且没有行开始`"]"`或`"["`

我只是将构造的临时文件复制到`inputdata.`创建的新目录中的文件中。毫无疑问，在您的应用程序中，您将用`executable.exe < "%tempfile%" >> .\"!value!\`**`resultfilename`**`" 替换它（注意您的输出将是 FILE 而不是 DIRECTORY...）

# jquery - Jquery Star Rating Plugin - 半星不工作

> ID：15382112
> 
> 赞同：0
> 
> 时间：2013-03-13T10:03:38.190
> 
> 标签：jquery, rating

我正在实现[jquery 星级插件](http://www.fyneworks.com/jquery/star-rating/)。

单颗星估算工作正常，没问题。但我似乎无法得到半颗星的工作......

html源码：

```
<div class="stars">
   <span class="star-rating-control"><div class="rating-cancel" style="display: none;"><a title="Cancel Rating"></a></div><div role="text" aria-label="" class="star-rating rater-0 required {half:true} star-rating-applied star-rating-live" id="Answer1_Rating"><a title="1">1</a></div><div role="text" aria-label="" class="star-rating rater-0 required {half:true} star-rating-applied star-rating-live" id="Answer1_Rating"><a title="2">2</a></div><div role="text" aria-label="" class="star-rating rater-0 required {half:true} star-rating-applied star-rating-live" id="Answer1_Rating"><a title="3">3</a></div><div role="text" aria-label="" class="star-rating rater-0 required {half:true} star-rating-applied star-rating-live" id="Answer1_Rating"><a title="4">4</a></div><div role="text" aria-label="" class="star-rating rater-0 required {half:true} star-rating-applied star-rating-live" id="Answer1_Rating"><a title="5">5</a></div></span>
   <input class="required  {half:true} star-rating-applied" data-val="true" data-val-required="The Rating field is required." id="Answer1_Rating" name="Answer1.Rating" type="radio" value="1" style="display: none;">
   <input class="required  {half:true} star-rating-applied" id="Answer1_Rating" name="Answer1.Rating" type="radio" value="2" style="display: none;">
   <input class="required  {half:true} star-rating-applied" id="Answer1_Rating" name="Answer1.Rating" type="radio" value="3" style="display: none;">
   <input class="required  {half:true} star-rating-applied" id="Answer1_Rating" name="Answer1.Rating" type="radio" value="4" style="display: none;">
   <input class="required  {half:true} star-rating-applied" id="Answer1_Rating" name="Answer1.Rating" type="radio" value="5" style="display: none;">
</div> 
```

查询：

```
 $('.stars :radio').rating(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:22:42.757

来自[http://www.fyneworks.com/jquery/star-rating/](http://www.fyneworks.com/jquery/star-rating/)：

> 使用元数据插件通过类属性将高级设置传递给插件。

[http://archive.plugins.jquery.com/project/metadata](http://archive.plugins.jquery.com/project/metadata)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T00:32:18.527

@mfo 的链接不再有效。似乎它现在就在这里。

[https://github.com/jquery-orphans/jquery-metadata](https://github.com/jquery-orphans/jquery-metadata)

我用过它，它对我有用。

# matlab - matlab：调整导出大小时切割图形

> ID：15382116
> 
> 赞同：1
> 
> 时间：2013-03-13T10:03:44.083
> 
> 标签：matlab, graph, plot, label, figure

我有一个小问题。像这样绘制图形时：

```
a2 = subplot(2,1,2, 'Parent', handles.cpd_plot, 'Position', [0.15, 0.1, 0.80, 0.15]);    
a1 = subplot(2,1,1, 'Parent', handles.cpd_plot, 'Position', [0.15, 0.40, 0.80, 0.50]); 
```

一切都很好，直到我转到图形>文件>导出设置并修复图形宽度。然后我得到了第二个图的剪切 Y 标签，就像这样：

![在图上剪下 Y 标签](../Images/64e0292639baeadaf07ccbd0b8a21d9e.png).

如何解决？谢谢！

# qt - 在Qt中单击小红十字后如何结束while循环

> ID：15382121
> 
> 赞同：0
> 
> 时间：2013-03-13T10:03:52.413
> 
> 标签：qt, qt4

我有一个带有许多按钮和标签的窗口。问题是当我关闭这些窗口（通过小红叉）时，程序仍在任务管理器中工作（我认为是因为我的代码中有 while 循环）。在以下示例代码中：

```
void MainWindow::on_pushButton_2_clicked()
{

 while (true)
 {
   //do something.........
 }
} 
```

那么我怎么能感觉到小红叉并完成while循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:38:14.203

在主窗口中重新实现`closeEvent(QCloseEvent* event)`( [docs](https://qt-project.org/doc/qt-4.8/qwidget.html#closeEvent) ) 以发出信号或手动通知包含循环的对象停止。然后在每个循环调用`QCoreApplication::processEvents(QEventLoop::ProcessEventsFlags flags = QEventLoop::AllEvents)`中，即使线程正在循环中处理，也可以在事件队列中处理事件，然后检查关闭事件信号设置的停止条件。

毫无疑问，有更清洁的解决方案，但没有关于您的程序架构的更具体信息，很难进一步评论。

# c# - C# 排序仅使用小于关系

> ID：15382123
> 
> 赞同：1
> 
> 时间：2013-03-13T10:03:59.490
> 
> 标签：c#, arrays, sorting

如何仅使用小于关系对 C# 中的对象数组进行排序。即不使用三值IComparer。

当数组的元素构成一个总 order[1] 时，使用 IComparer 接口和 Array.Sort[0] 方法不是问题。然而，在某些情况下，我们面临着对部分有序集进行排序的任务[2]。在这些情况下，无法正确实现 IComparer 接口。可能存在不小于、等于或大于某些其他元素的元素对。

我总是可以实现自己的排序算法，接受小于谓词，但是必须有一些库函数，或者没有？

[0] [http://msdn.microsoft.com/en-us/library/system.array.sort.aspx](http://msdn.microsoft.com/en-us/library/system.array.sort.aspx)

[1] [https://en.wikipedia.org/wiki/Total_order](https://en.wikipedia.org/wiki/Total_order)

[2] [https://en.wikipedia.org/wiki/Partially_ordered_set](https://en.wikipedia.org/wiki/Partially_ordered_set)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:14:23.920

我真的不明白你为什么要这样做？这会让你的排序变慢。通常排序返回 -1/0/1 的原因是您只需要检查两个元素一次；int[] myIntArray = new int[] { 10,40,20,35,8 }

当你比较 [0] 和 [4] 时，你得到 1，然后你知道 [4] 小于 [0] 并且不需要再次检查 [4] 和 [0]。

但是如果你只使用lessThan，你会得到“假”，并且不知道[4]是否小于[0]而不具体检查，因为10 < 8是假的，而8 < 10是真的。

所以，你看，我认为你并不是真的只想使用 lessThan。只需使用 ICompare...

另外，对于排序等，我认为使用列表比使用数组更好。少装箱/拆箱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:48:24.537

感谢 Nick 在另一篇 Stack Overflow 帖子中找到答案：

[使用 LINQ 进行拓扑排序](https://stackoverflow.com/questions/1982592/topological-sorting-using-linq)

简而言之; 没有简单的库单线来解决问题。

# symfony - Symfony2电子商务捆绑反馈

> ID：15382125
> 
> 赞同：34
> 
> 时间：2013-03-13T10:04:19.897
> 
> 标签：symfony, e-commerce

我将很快开始基于 Symfony2 的电子商务网站的开发。我将使用 Symfony2 的主要原因是：

*   我碰巧知道并喜欢这个框架
*   客户需求不是典型的网上商店，因此像 Magento 这样的网上商店可能不相关 - 根据我的经验，我最终会与他们斗争
*   该框架似乎有有趣的电子商务构建块： Sylius [bundles](http://sylius.org)和[Vespolina bundles](http://vespolina.org)

我正在寻找的是关于这些捆绑包的一些反馈，最好是来自在生产中运行它们的人：

*   是否有一套捆绑包可以说比另一套更好（稳定性、功能）？
*   它们可以很容易地混合吗？（我在 Sylius 演示文稿中看到可以在其中使用一些 Vespolina 捆绑包）
*   社区如何响应错误报告、支持请求和新功能开发？
*   以及任何有助于比较这些捆绑包的东西

最后，还有其他一些我错过的 Symfony2 电子商务计划吗？

当然，我一直在做我的研究，我似乎无法在这些捆绑包之间找到任何有趣的比较。

关于网站：

*   出售虚拟产品（歌曲）
*   法国网站，因此适用于法国的增值税规则
*   移动友好

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-05-26T14:50:56.177

**TLDR**

如果你现在打算用 symfony 开发一个电子商务网站（截至 2013 年 5 月 26 日）并且你想利用现有的捆绑包/实现......

*去找西利乌斯！*

**为什么？**

*维斯波利纳*

Vespolina 在首次宣布时受到了一些关注，因为它声称是 symfony2 的第一个电子商务解决方案，但它现在或多或少已经死了。

甚至他们的[演示](http://try.vespolina.org/)页面也只为我工作了 1/4 次。（试图将产品添加到购物篮... 404 ）

没有更多的积极开发和文档是[可怕](https://github.com/vespolina/vespolina-docs/commits/master)的。（最后一次提交 2012 年 9 月）。

在某些情况下，存储库可能仍然是一个有价值的灵感来源。

*西柳斯*

Sylius最近被[KnpLabs](http://sylius.com/news/the-story-of-an-ecommerce-for-symfony2)收购。对于那些不知道的人...... KnpLabs 运行：

*   [knpbundles.com](http://knpbundles.com/)（又名关于可用捆绑包信息的明确来源）
*   KnpUniversity （又名[symfony2](http://knpuniversity.com/)目前最好的 Screencast 提供商）。

Ryan Weaver - symfony[核心](https://github.com/symfony?tab=members)成员和 Symfony2 官方文档的主要作者 - 是 Knp 的成员之一。

那些家伙肯定知道他们在做什么。他们的[开源贡献](https://github.com/KnpLabs)质量很高，他们的捆绑包（KnpMenuBundle、KnpPaginatorBundle、KnpGaufretteBundle）在整个社区中得到广泛使用。

他们正在将 Sylius 项目推向正确的方向。开发非常活跃，已经有一些站点在生产中使用 Sylius。（即[侍酒师-prive.de](http://www.sommelier-prive.de)是用 Sylius 构建的）

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-12-31T02:50:23.173

**-- 2016 年更新 --**

这是一个更新的答案，适用于所有 2016 年的读者。

# 埃尔科迪

Elcodi 是一组涵盖大部分电子商务需求的 PHP 组件，包括用于 Symfony 的 Bundle，以及使用这些 Bundle 的名为 Bamboo 的全栈电子商务项目。

对于需要尽快建立电子商务平台的务实开发人员来说，该项目是一个很好的选择，并且可以在需要时立即覆盖应用程序的每个部分。

它有一个很好的文档（通过发布和新的采用者不断增长），并提供了一个非常具体的关于如何看待和执行 Symfony 项目的理念。

*   [埃尔科迪网站](http://elcodi.io)
*   [Elcodi 存储库](https://github.com/elcodi/elcodi)
*   [竹库](https://github.com/elcodi/bamboo)
*   [Elcodi 文档](http://elcodi.io/docs)
*   [埃尔科迪演示](http://bamboo.elcodi.io)

该项目诞生于2014年3月，实际上是稳定的。它还为接下来的几个月制定了清晰的路线图。它涵盖了一些主题，如插件和模板，并基于一个干净的事件驱动架构。它在 Gitter 也有一个活跃的社区，因此该项目每天都在发展。

*   [Elcodi 社区活动室](http://gitter.im/elcodi/elcodi)

该项目与 Symfony3 兼容。

# 西柳斯

Sylius 是一个 4 年多的项目。成熟并拥有一个伟大的社区。该项目提供了一组 PHP 组件和 Symfony 捆绑包，提供了许多与电子商务相关的功能。

该项目本身为商店提供了一个捆绑包和一个使用这些功能的管理面板。

*   [Sylius 网站](http://sylius.org)
*   [Sylius 存储库](http://github.com/sylius/sylius)
*   [Sylius 文档](http://docs.sylius.org)
*   [Sylius 演示](http://demo.sylius.org)

项目诞生于2011年9月，不稳定。该项目有一个很好的社区，可以在其 Gitter 频道中见面。

*   [Sylius 社区活动室](https://gitter.im/sylius/sylius)

该项目仍然与 Symfony3 不兼容。

# Thelia2

Thelia2 是一个基于 Symfony 的全栈项目，涵盖了一些电子商务相关的需求。该项目非常成熟，现在是第二个版本。

如前所述，该项目是全栈的，因此并没有真正划分边界。对于单体项目可能非常有用（就像到目前为止已经涵盖的项目，如 Prestashop 或 Magento）。

*   [Thelia网站](http://thelia.net)
*   [Thelia 存储库](https://github.com/thelia/thelia)
*   [Thelia 文档](http://doc.thelia.net/)
*   [Thelia 演示](http://demo-v2.thelia.net/)

该项目诞生于 2012 年 10 月。Thelia 还没有一个 Gitter 社区（或类似社区）。该项目与 Symfony3 不兼容。Indeed 仅与 Symfony 2.3 兼容。

其他一些选项，包括较小的项目和非电子商务项目：

*   [索纳塔电子商务](https://github.com/sonata-project/ecommerce)
*   [ORO 商务](https://github.com/orocommerce/orocommerce-application)
*   [艾梅奥斯](https://github.com/aimeos)
*   [WellCommerce](https://github.com/WellCommerce/WellCommerce)

非选项，包括非维护项目：

*   [维斯波利纳](https://github.com/vespolina)
*   [利弗利](https://github.com/leaphly)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-04T08:57:06.430

我也投票给 Sylius。顺便说一句，还有一些解决方案[https://gist.github.com/umpirsky/bfcc794c1de2d7e0c482](https://gist.github.com/umpirsky/bfcc794c1de2d7e0c482)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-07-29T09:58:01.547

如果您希望将电子商务和 Symfony 2 结合起来，请看一下**[Thelia](http://thelia.net)**。这是一个基于 Symfony 2 组件的新电子商务解决方案。2014 年 4 月发布的稳定版。Thelia 使用了以下 Symfony 2 组件：Config、Dependency injection、Http Kernel、Form、Event dispatcher……Thelia 也符合 PSR 规范。

解决方案在不断发展，路线图很长！

# ios - 应用程序未运行时 UILocalNotifications 会触发吗？

> ID：15382129
> 
> 赞同：2
> 
> 时间：2013-03-13T10:04:27.500
> 
> 标签：ios, uilocalnotification, background-foreground

我似乎找不到一个明确的线程来回答这些问题：

“当应用程序未运行（即不在前台或后台）时，计划的 UILocalNotification 是否会触发”？

“当应用程序未运行（即不在前台或后台）并且手机处于锁定/睡眠模式时，UILocalNotifications 是否会触发？”

一些答案表明他们会这样做，因为 UILocalNotifications 由 iOS 操作系统处理。有些似乎暗示它们只会在应用程序在后台或前台运行时触发。如果手机被锁定，我找不到太多关于 UILocalNotifications 是否有效的信息。

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T10:09:25.737

简单地说**是**
[来自苹果文档](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html)

> 当系统传递本地通知时，可能会发生几件事，具体取决于应用程序状态和通知类型。如果应用程序不在最前面且不可见，则系统会显示警报消息、标记应用程序并播放声音（通知中指定的任何内容）。如果通知是警报并且用户点击操作按钮（或者，如果设备被锁定，则拖动打开操作滑块），则启动应用程序。`

UILocalNotification 由操作系统处理。一旦您安排好它，os 将为您管理它。应用程序是否正在运行，系统都会发出通知。只需要在**application:didReceiveLocalNotification:**和 **application:didFinishLaunchingWithOptions:**中响应即可（如果由于通知而启动应用的处理）

记住

> 如果在系统传递通知时应用程序处于最前面且可见，则不会显示警报，不会标记图标，也不会播放声音。但是，如果应用程序委托实现了 application:didReceiveLocalNotification: ，则会调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:08:16.770

是的：

> 操作系统负责在适当的时间传递通知；应用程序不一定要运行才能发生这种情况。

来源：http: [//developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:16:37.043

是的。无论您的应用是在后台还是前台运行，本地通知都会触发。

如果您的应用程序在前台运行，那么

```
- (void)application:(UIApplication*)application didReceiveLocalNotification:(UILocalNotification*)notification 
```

将会通知。

如果您的手机是锁定的，那么 UILocalNotification 也将起作用，但它会显示没有警报正文。（即没有按钮的警报）。

# android - 在我的 android 应用程序上接收 Facebook 更新

> ID：15382130
> 
> 赞同：0
> 
> 时间：2013-03-13T10:04:27.557
> 
> 标签：android, facebook, facebook-graph-api

我想知道是否有人听说过使用 facebook android sdk 从 facebook 获取更新。

我希望在我的应用程序中当用户收到一条消息，或者当用户收到一个喜欢或好友请求时得到通知。

你知道这样做的最小可能性吗？我不想在我的应用程序中阅读消息或喜欢，我只想收到通知：用户个人资料上的新活动，以便我增加一个变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:23:29.880

请注意，虽然 API 允许您检查通知，但没有固有的方法可以自动获取它们。你必须想办法定期获取新的通知并将它们显示在你的应用程序中。这超出了这个问题的范围，并被排除在外。

```
try {
    Bundle bun = new Bundle();
    bun.putString(Facebook.TOKEN, Utility.mFacebook.getAccessToken());
    bun.putString("include_read", "true"); // CHANGE "true" to "false" if you need just the unread / unseen notifications
    String result = Utility.mFacebook.request("/me/notifications", bun);
    JSONObject JORoot = new JSONObject(result);
    JSONArray JAFeeds = JORoot.getJSONArray("data");

    Log.e("TEST LENGTH", String.valueOf(JAFeeds.length()));

} catch (Exception e) {
    // TODO: handle exception
} 
```

现在使用`JAFeeds`.json 中的 JSONArray解析内容`for loop`。如果你只需要计数，你可以使用它`JAFeeds.length()`（参见`Log.e`上面的代码）

注意：由于您`facebook-graph-api`在 OP 中有标签，因此我建议使用 Graph API 的示例。但是，如果您需要使用 FQL 的解决方案，请告诉我。

**更新：**

根据 OP 的评论，使用 FQL 添加替代方案

```
try {
    String query = "SELECT notification_id, recipient_id, object_id, object_type, sender_id, title_text, body_text, href, created_time FROM notification WHERE recipient_id=me() AND is_unread = 1 AND is_hidden = 0"
    Bundle newNotifications = new Bundle();
    newNotifications.putString("method", "fql.query");
    newNotifications.putString("query", queryStatus);
    String responseNewNotifications = Utility.mFacebook.request(newNotifications);
    JSONArray JANotifications = new JSONArray(responseNewNotifications);

    Log.e("TEST LENGTH", String.valueOf(JANotifications.length()));

} catch (Exception e) {
    // TODO: handle exception
} 
```

Graph API 解决方案和 FQL 解决方案都是生产代码，可以正常工作。如果有特定的东西不起作用，请评论或更新 OP 的问题。

# perl - perl5 库可以在 perl6 中导入吗？

> ID：15382133
> 
> 赞同：5
> 
> 时间：2013-03-13T10:04:31.693
> 
> 标签：perl, raku

我知道 perl6 将明确允许导入 perl5 代码，但我无法做到这一点。

这是perl6[代码](https://github.com/perl6/mu/blob/master/examples/perl5/cpan-upload.pl)

```
use perl5:Net::FTP; 
```

它报告一个[错误](http://ideone.com/zWi8pN)

是否有任何配置问题或尚未准备好？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-11-29T19:54:44.510

使用[Inline::Perl5](https://github.com/niner/Inline-Perl5/blob/master/README.md)在 Raku 或`use`Perl 库中嵌入任意 Perl 代码，就像它们是 Raku 库一样。

[Inline::Perl5 在MoarVM](http://moarvm.com)中适当地打包和包装了一个常规的 perl 解释器，以便 Rakudo 可以与 Perl 互操作。该组合已经支持：

*   `use`在 Raku 中编译 Perl 模块，包括使用 XS 的模块
*   在 Raku 中使用 Perl 对象，反之亦然
*   在 Raku 中编写 Perl 类的子类

九，Inline::Perl5 模块的作者，在 youtube 上做了一些关于它及其使用的介绍：

*   2014 年项目开始后的第二天，九人介绍了关于 Inline::Perl5的 3 分钟[闪电演讲；](https://www.youtube.com/watch?v=m_Y-lvQP6jI&list=UU7PuZDAIVMyE7mgkZHunXGw)
*   关于 Inline::Perl5 的[更长介绍。](http://www.reddit.com/r/perl6/comments/2k6ii8/nines_apw_talk_demonstrating_fully_working/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T15:14:57.167

~~根据[perlwiki](http://wiki.perl6.org/module)~~

> ~~注意：截至 2012 年 5 月，尚未有任何 Perl 6 编译器实现此功能。~~

根据出现[日历](http://perl6advent.wordpress.com/2013/12/16/day-16-slangs/)

一些基本模块可以通过俚语功能使用，但只有少数可用，如 Config、Cwd 和 English。

# c# - XML文件C#中的序列化、反序列化、追加、获取、删除对象

> ID：15382135
> 
> 赞同：0
> 
> 时间：2013-03-13T10:04:36.830
> 
> 标签：c#, xml, xml-serialization

我有以下课程

```
[Serializable]
public class Product
{
    public Product() { }
    public string ProductID { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
} 
```

我想从对象创建一个 XML 文件。如果产品 id 存在，则更新节点，否则在 xml 文件中添加或附加节点。

我正在使用以下代码序列化对象

```
public void SerializeNode(object obj, string filepath)
{
    XmlSerializer serializer = new XmlSerializer(obj.GetType());
    var writer = new StreamWriter(filepath);
    serializer.Serialize(writer.BaseStream, obj);
} 
```

但它每次都从头开始创建文件，所以如果文件中存在数据，它会用新的文件覆盖它。

所以我正在寻找在xml中添加/附加节点的机制，根据ProductID获取节点并删除节点。

该类可以使用更多数据成员进行扩展，因此代码应该是动态的，因此我不必在代码中指定子元素，我只希望它在类级别。

希望有人可以提供帮助

我正在寻找的结构如下

```
<?xml version="1.0" encoding="utf-8"?>
<Products>
  <Product ProductID="1">
    <Name>Product Name</Name>
   <Description>Product Description</Description>
  </Product>
  <Product ProductID="2">
    <Name>Product Name</Name>
   <Description>Product Description</Description>
  </Product>
  <Product ProductID="3">
    <Name>Product Name</Name>
   <Description>Product Description</Description>
  </Product>
</Products> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:34:37.570

应该让您朝着更好的方向开始；即使用 XElement 手动序列化

```
var elmtProducts = new XElement("Products");

foreach(var item in ProductsList)
{
    var elmtProduct = new XElement("Product");

    elmtProduct.Add(new XElement("Name", "Product Name"));
    elmtProduct.Add(new XElement("Description", "Product Description"));

    //if(
    elmtProducts.Add(elmtProduct);
}

elmtProducts.Save(new FileStream("blah")); 
```

现在，您应该能够弄清楚如何反序列化它。您也可以将整个内容加载回内存并使用新产品进行更新，然后重新保存。如果您有太多产品而无法做到这一点，那么您需要一个数据库，而不是 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:55:05.837

在这里，如果您不确定如何反序列化，您可以这样做：

```
internal class Program
    {
        private static void Main(string[] args)
        {
            //var products = new ProductCollection();
            //products.Add(new Product { ID = 1, Name = "Product1", Description = "This is product 1" });
            //products.Add(new Product { ID = 2, Name = "Product2", Description = "This is product 2" });
            //products.Add(new Product { ID = 3, Name = "Product3", Description = "This is product 3" });
            //products.Save("C:\\Test.xml");

            var products = ProductCollection.Load("C:\\Test.xml");

            Console.ReadLine();
        }
    }

    [XmlRoot("Products")]
    public class ProductCollection : List<Product>
    {
        public static ProductCollection Load(string fileName)
        {
            return new FileInfo(fileName).XmlDeserialize<ProductCollection>();
        }

        public void Save(string fileName)
        {
            this.XmlSerialize(fileName);
        }
    }

    public class Product
    {
        [XmlAttribute("ProductID")]
        public int ID { get; set; }

        public string Name { get; set; }

        public string Description { get; set; }
    } 
```

对于你在上面看到的`XmlSerialize()`and `XmlDeserialize()`，使用我几年前写的这些扩展方法：

```
public static class XmlExtensions
{
    /// <summary>
    /// Deserializes the XML data contained by the specified System.String
    /// </summary>
    /// <typeparam name="T">The type of System.Object to be deserialized</typeparam>
    /// <param name="s">The System.String containing XML data</param>
    /// <returns>The System.Object being deserialized.</returns>
    public static T XmlDeserialize<T>(this string s)
    {
        if (string.IsNullOrEmpty(s))
        {
            return default(T);
        }

        var locker = new object();
        var stringReader = new StringReader(s);
        var reader = new XmlTextReader(stringReader);
        try
        {
            var xmlSerializer = new XmlSerializer(typeof(T));
            lock (locker)
            {
                var item = (T)xmlSerializer.Deserialize(reader);
                reader.Close();
                return item;
            }
        }
        catch
        {
            return default(T);
        }
        finally
        {
            reader.Close();
        }
    }

    /// <summary>
    /// Deserializes the XML data contained in the specified file.
    /// </summary>
    /// <typeparam name="T">The type of System.Object to be deserialized.</typeparam>
    /// <param name="fileInfo">This System.IO.FileInfo instance.</param>
    /// <returns>The System.Object being deserialized.</returns>
    public static T XmlDeserialize<T>(this FileInfo fileInfo)
    {
        string xml = string.Empty;
        using (FileStream fs = new FileStream(fileInfo.FullName, FileMode.Open, FileAccess.Read))
        {
            using (StreamReader sr = new StreamReader(fs))
            {
                return sr.ReadToEnd().XmlDeserialize<T>();
            }
        }
    }

    /// <summary>
    /// <para>Serializes the specified System.Object and writes the XML document</para>
    /// <para>to the specified file.</para>
    /// </summary>
    /// <typeparam name="T">This item's type</typeparam>
    /// <param name="item">This item</param>
    /// <param name="fileName">The file to which you want to write.</param>
    /// <returns>true if successful, otherwise false.</returns>
    public static bool XmlSerialize<T>(this T item, string fileName)
    {
        return item.XmlSerialize(fileName, true);
    }

    /// <summary>
    /// <para>Serializes the specified System.Object and writes the XML document</para>
    /// <para>to the specified file.</para>
    /// </summary>
    /// <typeparam name="T">This item's type</typeparam>
    /// <param name="item">This item</param>
    /// <param name="fileName">The file to which you want to write.</param>
    /// <param name="removeNamespaces">
    ///     <para>Specify whether to remove xml namespaces.</para>para>
    ///     <para>If your object has any XmlInclude attributes, then set this to false</para>
    /// </param>
    /// <returns>true if successful, otherwise false.</returns>
    public static bool XmlSerialize<T>(this T item, string fileName, bool removeNamespaces)
    {
        object locker = new object();

        XmlSerializerNamespaces xmlns = new XmlSerializerNamespaces();
        xmlns.Add(string.Empty, string.Empty);

        XmlSerializer xmlSerializer = new XmlSerializer(typeof(T));

        XmlWriterSettings settings = new XmlWriterSettings();
        settings.Indent = true;
        settings.OmitXmlDeclaration = true;

        lock (locker)
        {
            using (XmlWriter writer = XmlWriter.Create(fileName, settings))
            {
                if (removeNamespaces)
                {
                    xmlSerializer.Serialize(writer, item, xmlns);
                }
                else { xmlSerializer.Serialize(writer, item); }

                writer.Close();
            }
        }

        return true;
    }
} 
```

我希望这很有用。如果没有，请按照已要求向我们提供有关您的情况的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:15:32.033

我不明白这个问题：

1.  将 xml 反序列化为 objext
2.  对对象进行更改
3.  序列化更新的对象

# google-chrome-app - Chrome 应用程序可以设置为文件类型的默认编辑器吗？

> ID：15382138
> 
> 赞同：7
> 
> 时间：2013-03-13T10:04:45.220
> 
> 标签：google-chrome-app

我目前正在为一个潜在的个人项目做一些研究，该项目旨在成为它自己文件格式的默认编辑器。由于一些期望的要求，我将其作为 chrome 应用程序实施是自然和个人偏好，我想知道您是否可以将 Chrome 应用程序注册为文件类型系统范围的默认应用程序。

将它注册为 Google Drive 和其他允许它的云存储解决方案中的可用编辑器很好，我可以使用“打开文件”对话框来获取用户的本地文档可用于应用程序，但更紧密、更传统的集成会更好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T03:59:57.687

目前这在 ChromeOS 上是可能的。在其他操作系统上记录此错误存在错误，其中第一个将是 Windows。

为了支持这一点，有用于声明您的应用程序可以处理文件的清单条目，但这些还没有记录（我们需要修复它）。

相关错误：

Windows 上的文件处理程序注册：[https ://code.google.com/p/chromium/issues/detail?id=130455](https://code.google.com/p/chromium/issues/detail?id=130455)

文档：[https ://code.google.com/p/chromium/issues/detail?id=192536](https://code.google.com/p/chromium/issues/detail?id=192536)

# c# - 实体框架 5 代码优先异常“键 'PRIMARY' 的重复条目 '0'”

> ID：15382140
> 
> 赞同：1
> 
> 时间：2013-03-13T10:04:49.863
> 
> 标签：c#, mysql, entity-framework, code-first

我确实尝试通过 EF5 和 MySQL 制作样本。

```
[Table("agency")]
class Agency
{
    [Key]
    [Required]
    public int agency_id { get; set; }
    public string name { get; set; }
}

class MyContext : DbContext
{
    public DbSet<Agency> Agency { get; set; }
}

class Sample
{
    public static void Main()
    {
        using (var db = new MyContext())
        {
            var query = from x in db.Agency select x.agency_id;
            var new_num = query.DefaultIfEmpty<int>().Max(p => p == null ? 0 : p);

            new_num++;

            Agency a = new Agency
            {
                agency_id = new_num,
                name = "Test"
            };

            db.Agency.Add(a);
            db.SaveChanges();
        }
    }
} 
```

首先。它是成功的。
但在第二次，它在 db.SaveChanges() 中抛出了异常。
{"键 'PRIMARY' 的重复条目 '0'"}

随着抛出的异常，我跟踪变量。
Agency_id 有'1'，当然。

什么问题？

**更新 1**

[![](../Images/666db736eccfa26b3d7fa07138fce509.png)](https://i.stack.imgur.com/vG5yQ.png)

[![](../Images/714661869754efc21215fd61a462fbc7.png)](https://i.stack.imgur.com/9nA8V.png)

[![](../Images/8d070e5407a9c2d2e0795999e5580635.png)](https://i.stack.imgur.com/7RRxH.png)

**更新 2**

!!!!!!???????????????????????????

[![](../Images/dba99a80ed5bd47f9ae6e140bdca0b6f.png)](https://i.stack.imgur.com/bHyFi.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:06:20.727

好的，我找到了解决方案。

[https://stackoverflow.com/a/6752692/415682](https://stackoverflow.com/a/6752692/415682)

DatabaseGeneratedAttribute 是重点！！！

```
[Table("agency")]
class Agency
{
    [Required, Key, DatabaseGenerated(DatabaseGeneratedOption.None)]
    public int my_id { get; set; }
    public string name { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:08:29.663

试试这个：

```
 int new_num = 0;
        if (db.Agency.Any())
        {
            new_num = db.Agency.Max(a => a.agency_id) + 1;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:34:23.210

可能映射不正确。确保数据库中 id 的名称是“agency_id”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T11:07:03.433

为什么要手动增加主键？我看到你正在使用 MySQL。只需将其设为自动增量列并完成即可。见这里： [http ://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)

试试这个并停止手动分配 Agency_id... 它可能会解决您的问题。

# r - 检查列表是否嵌套

> ID：15382142
> 
> 赞同：6
> 
> 时间：2013-03-13T10:04:54.657
> 
> 标签：r, list, nested, nested-lists

是否有一种“内置”/有效且强大的方法来检查列表对象是否嵌套？

为了澄清我对*嵌套*一词的理解：

**扁平或非嵌套列表**

```
x.1 <- list(
    a=TRUE, 
    b=1:5
) 
```

**嵌套列表**

```
x.2 <- list(
    a=list(a.1=list(a.1.1=TRUE)), 
    b=list(b.1=1:5)
) 
```

我的第一个想法是使用`str`,`capture.output`和正则表达式的组合。但是作为与正则表达式相关的所有内容：非常强大，在健壮性方面非常冒险;-) 所以我想知道那里是否有更好的东西：

```
isNested <- function(x) {
    if (class(x) != "list") {
        stop("Expecting 'x' to be a list")
    }
    out <- FALSE
    strout <- capture.output(str(x))
    idx <- grep("\\$.*List", strout)
    if (length(idx)) {
        out <- TRUE
    }
    return(out)
}

> isNested(x=x.1)
[1] FALSE
> isNested(x=x.2)
[1] TRUE 
```

* * *

第二种方法由 Roman 和 Arun 提供：

```
isNested2 <- function(x) {
    if (class(x) != "list") {
        stop("Expecting 'x' to be a list")
    }
    out <- any(sapply(x, is.list))
    return(out)
}

> isNested2(x=x.1)
[1] FALSE
> isNested2(x=x.2)
[1] TRUE 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T10:11:23.133

您可以使用以下`is.list`功能：

```
any(sapply(x.1, is.list))
[1] FALSE

any(sapply(x.2, is.list))
[1] TRUE 
```

* * *

作为一个函数`isNested`：

```
isNested <- function(l) {
  stopifnot(is.list(l))
  for (i in l) {
    if (is.list(i)) return(TRUE)
  }
  return(FALSE)
} 
```

该函数不是测试所有列表元素，而是在检测到嵌套列表时立即停止。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T10:11:52.703

试试这个 ：

```
 isNested <- function(x) {
    if (is.list(x))
        stop("Expecting 'x' to be a list")

    any(unlist( lapply(x,is.list) ))
   } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T12:18:16.720

这是另一种有趣的方式：

```
length(unlist(l, FALSE)) != length(unlist(l)) 
```

或对此的变体：

```
!identical(unlist(l, FALSE), unlist(l)) 
```

使用 的`recursive`参数`unlist()`。如果需要，还可以进行错误检查：

```
isNested <- function(l) {
  if (!is.list(l)) stop("Not a list.")
  !identical(unlist(l, FALSE), unlist(l))  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-12T05:17:34.890

如果列表的内容是 S3 对象又具有嵌套列表怎么办？我希望这些*不*被视为列表，因此这些对象的列表是“不嵌套的”（它只是一个对象列表而不是列表列表）。使用`class()`而不是`is.list()`检查是否按*字面意思*列出而不是使用嵌入列表的其他内容。

```
is.nested <- function(x) {
  stopifnot(is.list(x))
  any(sapply(x, function(x) any(class(x) == "list")))
} 
```

# c++ - Linux 上的 int128 用于 Intel 编译器

> ID：15382147
> 
> 赞同：-1
> 
> 时间：2013-03-13T10:05:02.190
> 
> 标签：c++, linux, intel, icc, int128

Linux 2.6.32

Intel编译器：icpc 13.0.1版（gcc 4.4.6版兼容）

```
#include <iostream>
#include <sys/types.h>
int main()
{
    std::cerr << sizeof (__uint128_t) << std::endl;     
    return 0;
} 
```

输出：`16`

所以，类型`__uint128_t`存在。
但是，使用`__uint128_t`会产生编译和运行错误。

程式：

```
// File int01.cpp
#include <cstdint>
int main()
{
uint128_t val128 = 0;
return 0;
}

// File int02.cpp
#include <cstdint>
int main()
{
__uint128_t val128 = 0;
return 0;
}

// File int03.cpp
#include <iostream>
#include <cstdint>
int main()
{
__uint128_t val128 = 0;
std::cerr << val128 << std::endl;
return 0;
} 
```

汇编：

> icpc int01.cpp

/usr/include/c++/4.4.6/c++0x_warning.h(31)：灾难性错误：#error 指令：此文件需要编译器和库支持即将推出的 ISO C++ 标准 C++0x。此支持目前是实验性的，必须使用 -std=c++0x 或 -std=gnu++0x 编译器选项启用。#error 此文件需要编译器和库支持，以支持即将推出的 \ ^

int01.cpp 的编译中止（代码 4）

> icpc int01.cpp -std=c++0x

int01.cpp(4)：错误：标识符“uint128_t”未定义 uint128_t val128 = 0; ^

int01.cpp 的编译中止（代码 2）

> icpc int02.cpp -std=c++0x

// 没有错误

> icpc int03.cpp -std=c++0x

int03.cpp(6)：错误：多个运算符“<<”匹配这些操作数：

```
 function "std::basic_ostream<_CharT, _Traits>::operator<<(long) [with _CharT=char, _Traits=std::char_traits<char>]"
        function "std::basic_ostream<_CharT, _Traits>::operator<<(unsigned long) [with _CharT=char, _Traits=std::char_traits<char>]"
        function "std::basic_ostream<_CharT, _Traits>::operator<<(bool) [with _CharT=char, _Traits=std::char_traits<char>]"
        function "std::basic_ostream<_CharT, _Traits>::operator<<(short) [with _CharT=char, _Traits=std::char_traits<char>]"
        function "std::basic_ostream<_CharT, _Traits>::operator<<(unsigned short) [with _CharT=char, _Traits=std::char_traits<char>]"
        function "std::basic_ostream<_CharT, _Traits>::operator<<(int) [with _CharT=char, _Traits=std::char_traits<char>]"
        function "std::basic_ostream<_CharT, _Traits>::operator<<(unsigned int) [with _CharT=char, _Traits=std::char_traits<char>]"
        function "std::basic_ostream<_CharT, _Traits>::operator<<(long long) [with _CharT=char, _Traits=std::char_traits<char>]"
        function "std::basic_ostream<_CharT, _Traits>::operator<<(unsigned long long) [with _CharT=char, _Traits=std::char_traits<char>]"
        function "std::basic_ostream<_CharT, _Traits>::operator<<(double) [with _CharT=char, _Traits=std::char_traits<char>]"
        function "std::basic_ostream<_CharT, _Traits>::operator<<(float) [with _CharT=char, _Traits=std::char_traits<char>]"
        function "std::basic_ostream<_CharT, _Traits>::operator<<(long double) [with _CharT=char, _Traits=std::char_traits<char>]"
        operand types are: std::ostream << __uint128_t
std::cerr << val128 << std::endl;
          ^ 
```

int03.cpp 的编译中止（代码 2）

你有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:58:11.503

至于 1) 和 2) 我读到的所有内容基本上都说这是[实验性的和平台相关](https://stackoverflow.com/a/11660651/1708801)的。虽然@Basile 建议应该是`uint128_t`我找不到编译器`Intel`，`gcc`也没有`clang`支持，但您可以在[Live Work Space](http://liveworkspace.org/)`__uint128_t`尝试各种编译器。这是[我对这个问题的尝试](http://liveworkspace.org/code/1UzCdI)。

至于 3) 似乎没有支持这些流的版本，`__uint128_t`因为它是实验性的，也许这应该令人惊讶。这个先前的线程[如何使用 gcc 打印 __uint128_t 数字？](https://stackoverflow.com/questions/11656241/how-to-print-uint128-t-number-using-gcc)显示了一些替代方案。

你有什么理由不去探索一些[Bigint](https://stackoverflow.com/questions/1055661/bigint-bigbit-library)库吗？

# .net - .Net 是否有可用的字符枚举

> ID：15382149
> 
> 赞同：2
> 
> 时间：2013-03-13T10:05:09.400
> 
> 标签：.net, boo

我只是想知道.Net 是否在任何地方都有内置的字符枚举。

我只是在解析一个 CSV 文件，我想到了我希望能够执行以下操作：

```
line.Split(Chars.Comma) 
```

代替：

```
line.Split(char(',')) 
```

它对我来说似乎更干净。

.Net 是否将其隐藏在任何地方？

Ps：我知道 Windows.Forms.Keys 在大多数情况下都有，但没有所有的标点符号。

**编辑（在大多数答案之后）：**

我应该提到我是在 Boo 中编码，而不是 C#（因此我一般要求使用 .Net），所以 line.Split(',') 不能作为 ',' 在 Boo 中使用。

我没有考虑到它必须涵盖 unicode，这将是巨大的，而我计划使用它的目的是让我不必在每次创建应用程序时都为标点符号创建常量的文本操作。

这是我选择解决此问题的方法：

```
static class StingSplitters:

    public final Comma = char(',')
    public final BackSlash = char('\\')
    ... 
```

感谢所有的投入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:08:39.733

不，没有这样的事情。到底是为了什么，真的？实际上是否应该有一个包含每个 Unicode 字符的常量的类，在分配新代码点时与 Unicode 保持同步？我猜这些名字就像

```
Chars.ArabicLigatureUighurKirghizYehWithHamzaAboveWithAlefMaksuraIsolatedForm 
```

相比起来有点笨拙`'ﯹ'`。

你也可以写

```
line.Split(','); 
```

这并不比`line.Split(Chars.Comma)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:09:23.190

你可以这样做：

```
line.Split(','); 
```

或者做一个常量：

```
const char COMMA = ',';
...
line.Split(COMMA); 
```

或者用枚举制作：

```
 public enum Chars {
    Comma = ',',
 }

 line.Split((char)Chars.Comma); 
```

在我看来， const 解决方案是最干净的。但是我不会将我的 const COMMA 称为分隔符，而是将其称为分隔符。那是真的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T10:09:37.260

```
line.Split(','); 
```

工作得很好。但是请注意，这实际上是一个`params`数组，并且每次都涉及一个新数组。`char[]`我建议为你最常用的东西创建一个静态。您*可以*将其包装在精美的包装中，但我会保持简单。我真的有一门课是：

```
// interesting fact; we have hundreds of locations where we use someString.Split(char) or similar; every single one
// of those allocates a new array; idea: fill this in and do a mass replace to avoid a shit-ton of allocations
public static class StringSplits
{
    public static readonly char[] Space = { ' ' },
                                  Comma = { ',' },
                                  Period = { '.' },
                                  ...
                                  NewLine_CarriageReturn = { '\n', '\r' },
                                  Comma_SemiColon = { ',', ';' },
                                  Comma_SemiColon_Space = { ',', ';', ' ' },
                                  BackSlash_Slash_Period = { '\\', '/', '.' }; 
```

请注意，其中一些不是单字符。

这听起来很愚蠢，但如果你正在做大量的字符串操作，它可能会增加很多不必要的数组。

坦率地说，我希望***.NET*** 5 包含以下方法：

```
string.Split(char);
string.Split(char,char); 
```

而不仅仅是：

```
string.Split(params char[] chars); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T10:09:32.770

Windows.Forms.Keys 只需要知道键盘上显示的内容。char 枚举需要更多的值，因为它是 unicode 并且可以包含多达 65.000 个不同的值。想象一下你输入 Char。并获得一个包含 65k 可能选项的下拉列表。

所以不，没有 Char 枚举。如果你想要一个常数，你需要自己定义一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T10:13:48.057

首先，.net 中类的名称是 Char 而不是 Chars。第二件事，我认为字符没有枚举，您应该将一个字符数组传递给多个字符作为分隔符。

有关详细信息，您可以查看此页面。 [http://msdn.microsoft.com/en-us/library/system.string.split.aspx](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)

# android - android如何在android Webview中获取Click String？

> ID：15382155
> 
> 赞同：5
> 
> 时间：2013-03-13T10:05:24.377
> 
> 标签：android, html, string, webview

如何`String`从 webview 获取其点击事件？

这是图像：

![在此处输入图像描述](../Images/78d87c9257ac69f3d2385d451a130efc.png)

在这里，我只想以编程方式获取蓝色字符串，而不是其他字符串。

我正在使用这样的 Html 字符串显示

```
webview.setWebViewClient(new WebViewClient());   
webview.getSettings().setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN);                             
webview.loadDataWithBaseURL("file:///android_asset/", main_data ,  "text/html", "UTF-8", " "); 
```

`Edit:`我该怎么做？有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T10:53:42.830

我找不到任何可以直接获取文本的内容。一种解决方法可能是：

当你加载 webview 时，你会解析 html。就像[这里描述的一样](https://stackoverflow.com/questions/8200945/how-to-get-html-content-from-a-webview)

在那里，您将所有链接保存在地图中，使用 url 作为键和文本作为值。

然后：

```
webview.setWebViewClient(new WebViewClient() {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {

        String text = map.get(url);

        return super.shouldOverrideUrlLoading(view, url);
      }
}); 
```

# objective-c - 关于 Cocoa C 风格函数的一些愚蠢问题

> ID：15382158
> 
> 赞同：0
> 
> 时间：2013-03-13T10:05:39.400
> 
> 标签：objective-c, c, cocoa

尽管我在 Cocoa 中进行了多年开发，但我从来不需要开发一种 C 风格的库来处理非对象变量。

例如，我所说的“C 风格函数”是：

```
float myCStyleFunction(float var1, float var2); 
```

知道 Objective-C 是 C 的后代，我试图制作一个真正的 C 函数。但是编译器不允许一些简单的事情。

首先是通过引用：

```
void makeSomethingWithImages(CGImageRef & im1, CGImageRef & im1); 
```

这不起作用。编译器说`Parameter name omitted`。**有没有办法通过引用传递我的 CGImages？**

其次，默认参数：

```
void makeSomethingWithImages(CGImageRef im1, CGImageRef im1, float tolerance) { ... }

void makeSomethingWithImages(CGImageRef im1, CGImageRef im1) {
    makeSomethingWithImages(im1, im2, 0);
} 
```

错误 ：`Conflicting types for 'makeSomethingWithImages'`

**有没有办法有一些默认参数？**

还有一个附属问题：如果 Obj-C 是 C 的后代，为什么这些例子不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T10:15:38.787

通过引用传递是 C++ 而不是 c，默认参数和函数重载也是如此，尽管 clang 为 c 添加了扩展以进行函数重载，但是为此添加了语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:25:05.767

通过引用传递应使用`*`符号（**指向地址的指针**），`&`是“**地址处的值**”，在类`CGImageRef`中定义，因此编译器 Err..`CGImage *CGImageRef;``CGImage.h`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T21:44:17.473

不，您不能使用按引用传递机制，也不能使用 C 中的参数的默认值。如果 Obj-C 是 C 的后代，这意味着 Obj-C 编译接受合法的 C 代码，而不是相反。

但是您犯了一个错误，Objective-C 中没有按引用和默认值。这两种结构都是 C++ 结构，而不是 C 结构。存在 Objective-C 和 C++ 的混合体，称为 Objective-C++。

C++ 和 Objective-C 都是 C 的后代，所以混合使用。

# xmlhttprequest - 将值从 xmlhttp 传递到画布

> ID：15382161
> 
> 赞同：0
> 
> 时间：2013-03-13T10:05:44.390
> 
> 标签：xmlhttprequest, html5-canvas

画布无法获取从 xmlhttpresponse 传递的值。难道是编码顺序有问题？我是否以错误的顺序放置画布？这是我使用的代码。

```
<script>
function loadXMLDoc()
{
str="GT299.842.65.416 2002";
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
var result=xmlhttp.responseText;
var n=result.split(" ");
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
ctx.moveTo(0,0);
ctx.lineTo(n[0],n[1]);
ctx.stroke();
}
}
xmlhttp.open("GET","gethint.php?q="+str,true);
xmlhttp.send();
}
</script>
</head>
 <body>

 <button type="button" onclick="loadXMLDoc()">Change Content</button>
<div id="myDiv"></div>
 <canvas id="myCanvas" width="400" height="400" style="border:1px solid #d3d3d3;">
 </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:06:11.830

**获取并解析 XMLHttpRequest**

[编辑：清理上下文绘图代码]

首先，请务必将 ctx.beginPath() 添加到您的画布绘图代码中：

```
ctx.beginPath();  // required for all line,curve,arc,path draws
ctx.moveTo(0,0);
ctx.lineTo(n[0],n[1]);
ctx.stroke(); 
```

假设您有一个这样的 XML 文件 (myLineXYs.xml)：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<lineXYs>
    <line="0">
      <X>50</X>
      <Y>25</Y>
    </line>
    <line="1">
      <X>100</X>
      <Y>25</Y>
    </line>
</lineXYs> 
```

您将 GET 并解析出 2 行的 X/Y，如下所示：

```
// IE--there you go again being different!
if (window.XMLHttpRequest)
  { xhttp=new XMLHttpRequest(); }
else
  { xhttp=new ActiveXObject("Microsoft.XMLHTTP"); }

// GET myLineXYs.xml
xhttp.open("GET","myLineXYs.xml",false);
xhttp.send();
xmlDoc=xhttp.responseXML;

// Parse out the X/Y for the 2 lines
var x0=xmlDoc.getElementsByTagName("X")[0].childNodes[0].nodeValue
var y0=xmlDoc.getElementsByTagName("Y")[0].childNodes[0].nodeValue

var x1=xmlDoc.getElementsByTagName("X")[1].childNodes[0].nodeValue
var y1=xmlDoc.getElementsByTagName("Y")[1].childNodes[0].nodeValue 
```

# java - `+++` 是否只是一个后缀增量，后跟一个中缀（总是）？

> ID：15382171
> 
> 赞同：3
> 
> 时间：2013-03-13T10:06:10.153
> 
> 标签：java, c++, visual-c++, g++

考虑为 Java 发布的 SO 问题[+++ 运算符如何工作？](https://stackoverflow.com/questions/15378392/how-does-the-operator-work)

嗯，我明白了

1.  没有像 '+++' 这样的运算符，它只是一个后缀增量，后跟一个中缀添加
2.  这是对可读性的犯罪

我想知道的（只是为了好奇）如果

`+++`它只是一个后缀增量，后跟一个中缀添加**，而** `+++`不仅仅是一个中缀添加，后跟一个前缀增量**或其未定义的行为**。

考虑我已经测试了以下程序

```
#include <iostream>
int main() {
    int x = 1;
    std::cout<< x+++1 << std::endl;
    std::cout<< 1+++x << std::endl;
} 
```

在 VC++、gcc 和 g++ 中，它们都符合以下事实：

```
'+++' its just a post-fix increment followed by an infix add 
```

并不是

```
'+++' its just an infix add followed by a prefix increment 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-13T10:07:44.323

是的，**最大咀嚼规则**告诉我们，它`+++`被解析为`++ +`（不是后缀后跟中缀，而是后缀后跟`+`运算符），它也呈现

```
1+++x  <----> 1++ + x 
```

非法，因为`1`不是左值。

# asp.net - 登录后页面错误

> ID：15382172
> 
> 赞同：1
> 
> 时间：2013-03-13T10:06:14.610
> 
> 标签：asp.net, redirect

如果我点击一个链接（没有登录网站），我会导航到这个页面：

```
http://localhost:59196/Login.aspx?ReturnUrl=%2fTest%2fContacts.aspx 
```

当我登录到该站点时，我希望被重定向到我的主页而不是测试 Contacts.aspx 页面。我该如何解决这个问题？

如果我这样做，那么我没有登录。

```
protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void Login1_LoggingIn(object sender, LoginCancelEventArgs e)
    {
        Response.Redirect("Home");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:18:24.810

只需将您点击的链接网址更改为：

```
http://localhost:59196/Login.aspx?ReturnUrl=Index.aspx 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:20:13.407

我认为您在未登录的情况下单击了 Test Contact.aspx 页面，因此您已被重定向到登录页面，查询字符串为 ReturnURl = test contact.aspx，这可能用于从登录页面重定向。

因此，您可以通过单击登录页面中的登录按钮直接重定向到您的页面页面，而不是使用返回 url 查询字符串。希望它有效。

我的意思是在

```
Loginbutton_click()
{
//login validation code here 
 //after successful validation
Response.redirect("Yyourhomepageurlhere");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:08:00.910

你想重定向到

```
http://localhost:59196/Login.aspx?ReturnUrl=%2fTest%2fIndex.aspx 
```

而不是

```
http://localhost:59196/Login.aspx?ReturnUrl=%2fTest%2fContacts.aspx 
```

换句话说，您点击的链接应该指向上面的第一个链接，而不是第二个。

剩下的问题是链接是如何生成的？它们是硬编码的还是您使用 MVC 并以某种方式生成链接？链接是否在您的控制范围内生成？

看起来您的代码会查看 ReturnUrl 查询字符串参数，并在成功登录时重定向到它。

您是从联系人页面进入登录页面的吗？如果是这样，那么 ReturnUrl 可能是根据您来自哪里而动态生成的。您可能需要将其固定为索引页面（我假设这就是您所说的）。不过要小心，其他开发人员可能希望这个链接是动态的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T10:34:06.667

我必须改变事件。

```
protected void Login1_LoggedIn(object sender, EventArgs e)
    {
        Response.Redirect("Home");
    } 
```

# android - 扩展表行视图

> ID：15382175
> 
> 赞同：0
> 
> 时间：2013-03-13T10:06:18.790
> 
> 标签：android, xml, android-view, tablerow

我正在尝试通过扩展 tablerow 视图以编程方式创建此 xml 视图：

```
 <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:gravity="center_vertical"
        android:weightSum="1.0" >

        <Button
            android:id="@+id/tester_button"
            style="?android:attr/buttonStyleSmall"
            android:layout_weight=".2"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:text="A" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="0dip"
            android:layout_height="fill_parent"
            android:gravity="center"
            android:layout_weight=".7"
            android:text="Column 1"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <CheckBox
            android:id="@+id/checkBox1"
            android:layout_weight=".1"
            android:layout_width="0dip"
            android:layout_height="wrap_content" />

    </TableRow> 
```

这是我的扩展行类：

```
public class CategoryRow extends TableRow {
    LayoutParams rowParams = new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, Gravity.CENTER);
    LayoutParams innerParams = new TableRow.LayoutParams(0, LayoutParams.WRAP_CONTENT, Gravity.CENTER);
    CheckBox check;
    Button arrowButton;
    TextView categoryTitle;

    public CategoryRow(Context context) {
        super(context);
        this.setLayoutParams(rowParams);
        this.setGravity(Gravity.CENTER);
        this.setWeightSum(1);

        check = new CheckBox(context);
        innerParams.weight = (float) 0.1;
        check.setLayoutParams(innerParams);

        arrowButton = new Button(context);
        innerParams.weight = (float) 0.2;
        arrowButton.setLayoutParams(innerParams);
        arrowButton.setText("A");

        categoryTitle = new TextView(context);
        innerParams.weight = (float) 0.7;
        categoryTitle.setLayoutParams(innerParams);
        categoryTitle.setTextAppearance(context, android.R.attr.textAppearanceLarge);

        //add views to row
        this.addView(arrowButton);
        this.addView(categoryTitle);
        this.addView(check);
    }

    public void setCategoryTitle(String title){
        categoryTitle.setText(title);
    }

    public void checkCategory(){
        check.setChecked(true);
    }

    public void unCheckCategory(){
        check.setChecked(false);
    }
} 
```

在我的活动中，我将`CategoryRow`视图添加到`TableLayout`by`addView`函数。

```
public class NotificationCategorise extends Activity {
    TableLayout categoryConteiner;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_notification_categorise);

        categoryConteiner = (TableLayout) findViewById(R.id.categories_conteiner);
        CategoryRow categoryRow = new CategoryRow(this);
        categoryRow.setCategoryTitle("bla");
        categoryConteiner.addView(categoryRow);

    } 
```

我的问题是它`CategoryRow`没有添加到活动场景中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:00:20.040

我已将扩展类更改为此代码，并且效果很好。

```
import android.content.Context;
import android.view.Gravity;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.TableRow;
import android.widget.TextView;

public class CategoryRow extends TableRow {
    LayoutParams rowParams = new TableRow.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
    LayoutParams innerParams1 = new TableRow.LayoutParams(0, LayoutParams.MATCH_PARENT, Gravity.CENTER);
    LayoutParams innerParams2 = new TableRow.LayoutParams(0, LayoutParams.MATCH_PARENT, Gravity.CENTER);
    LayoutParams innerParams3 = new TableRow.LayoutParams(0, LayoutParams.MATCH_PARENT, Gravity.CENTER);
    CheckBox check;
    Button arrowButton;
    TextView categoryTitle;

    public CategoryRow(Context context) {
        super(context);
        this.setLayoutParams(rowParams);
        this.setWeightSum(1f);

        check = new CheckBox(context);
        innerParams1.weight = 0.1f;
        check.setLayoutParams(innerParams1);

        arrowButton = new Button(context);
        innerParams2.weight = 0.2f;
        arrowButton.setLayoutParams(innerParams2);
        arrowButton.setText("A");

        categoryTitle = new TextView(context);
        categoryTitle.setGravity(Gravity.CENTER);
        innerParams3.weight = 0.7f;
        categoryTitle.setLayoutParams(innerParams3);
        categoryTitle.setTextAppearance(context, android.R.attr.textAppearanceLarge);

        //add views to row
        this.addView(arrowButton);
        this.addView(categoryTitle);
        this.addView(check);
    }

    public void setCategoryTitle(String title){
        categoryTitle.setText(title);
    }

    public void checkCategory(){
        check.setChecked(true);
    }

    public void unCheckCategory(){
        check.setChecked(false);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:25:50.447

好的，我认为您不能将作为该行的构造函数`GRAVITY.CENTER`的参数传入。`LayoutParams`您可以为添加到该行的每个单独的视图更改它，但不会为该行本身更改它。改变：

`LayoutParams rowParams = new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, Gravity.CENTER);`

至

`LayoutParams rowParams = new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);`

看看这是否有效。

# javascript - 将悬停状态保持在最后单击的菜单项上

> ID：15382184
> 
> 赞同：0
> 
> 时间：2013-03-13T10:06:32.530
> 
> 标签：javascript, jquery, css, jquery-ui, jsfiddle

我在我的网站上添加了一个不错的 ( `jquery`+ `css`) 导航菜单，但有一个小问题。当我单击一个菜单项时，浅蓝色框跳回第一个项目，我希望该框留在单击的项目上，但我不知道如何实现它。

这是一个例子：http: [//jsfiddle.net/Stylock/ta8g4/](http://jsfiddle.net/Stylock/ta8g4/)

在该示例中，它实际上可以按我的意愿工作，但是在我的网站上由于某种原因它不起作用。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:08:27.987

您可以向项目添加一个类，例如 .selected

在你的css中，你对 .selected 应用相同的样式而不是 :hover

[http://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

或者你的云也使用 jQuery 修改 css。但是第一个解决方案更灵活。

编辑：使用回调函数添加/删除类，你的效果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:13:41.987

这可能是正确方向的解决方案： Onclick 检查菜单是否已经有一个类名以更改背景 从那里删除该类 添加您单击的类需要一些小的 css 更改，您将解决它

祝你有美好的一天

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:17:13.680

您可以在其他页面加载时添加一个类，例如在所有页面上添加这样的错误

```
<script type="text/javascript">

    $(window).load(function () {
        $("#index").toggleClass("highlight");

    });

    $(window).unload(function () {
        $("#index").toggleClass("highlight");
    });

</script> 
```

[我在http://www.hoteloperaindia.com/](http://www.hoteloperaindia.com/)上使用了这个网站

或喜欢这个简短的将其添加到母版页

```
 <script>
        $(function () {
            var loc = window.location.href; // returns the full URL
            if (location.pathname == "/")  {
                $('#home').addClass('active');
            }
            if (/index/.test(loc)) {
                $('#home').addClass('active');
            }
            if (/about/.test(loc)) {
                $('#about').addClass('active');
            }
            if (/accommodation/.test(loc)) {
                $('#accommodation').addClass('active');
            }
            if (/gallery/.test(loc)) {
                $('#gallery').addClass('active');
            }
            if (/tariff/.test(loc)) {
                $('#tariff').addClass('active');
            }
            if (/facilities/.test(loc)) {
                $('#facilities').addClass('active');
            }
            if (/contact/.test(loc)) {
                $('#contact').addClass('active');
            }
        });
</script> 
```

我使用这个的网站[http://rtshotel.in/](http://rtshotel.in/)

用你的代码改变它

# c# - 如何从 RowEditing 中的表中获取值

> ID：15382185
> 
> 赞同：1
> 
> 时间：2013-03-13T10:06:37.690
> 
> 标签：c#

我有一个包含 、 和 列`id`的网格`f_name`视图。我想从网格视图中获取它的价值。`l_name``salary`

我有这段代码，你可以看看我的意思：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)

            bindgrideview();
    }
    protected void bindgrideview()
    {
        SqlConnection strcon1 = new SqlConnection(strcon);
        strcon1.Open();
        string ADDStr = "SELECT ID,F_name , L_name , salary FROM Employee ";
        SqlCommand ADDCmd = new SqlCommand(ADDStr, strcon1);
        DataTable table = new DataTable();
        SqlDataAdapter adapter = new SqlDataAdapter(ADDCmd);
        adapter.Fill(table);

        GridView1.DataBind();

    }
    protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
    {
        int id= // what must be write here ? 
        GridView1.EditIndex = e.NewEditIndex;
        bindgrideview();
        SqlConnection strcon1 = new SqlConnection(strcon);
        strcon1.Open();
        string ADDStr = "SELECT ID FROM Employee ";
        SqlCommand ADDCmd = new SqlCommand(ADDStr, strcon1);
        Reademp(id);
    }
    public void Reademp(int ID)
    {
        SqlConnection strcon1 = new SqlConnection(strcon);
        strcon1.Open();
        string ADDStr = "SELECT ID,F_name , L_name , salary , [department ID]  ,  [saudi_nationality] , [position ID]  , [role ID] FROM Employee ";
        SqlCommand ADDCmd = new SqlCommand(ADDStr, strcon1);
        DataTable table = new DataTable();
        SqlDataAdapter adapter = new SqlDataAdapter(ADDCmd);
        adapter.Fill(table);
        GridView1.DataSource = table;
        GridView1.DataBind();
        SqlDataReader myDataReader;
        myDataReader = ADDCmd.ExecuteReader();
        myDataReader.Read();

        string F_name = myDataReader["F_name"].ToString();
        string L_name = myDataReader["L_name"].ToString();
        string department_ID = myDataReader["[department ID]"].ToString();
        string saudi_nationality = myDataReader["saudi_nationality"].ToString();
        string position_ID = myDataReader["[position ID]"].ToString();
        string role_ID = myDataReader["[role ID]"].ToString();
        myDataReader.Close();

    }

    protected void Button2_Click(object sender, EventArgs e)
    {
        string F_name = TextBox1.Text;
        string L_name = TextBox2.Text;
        string salary = TextBox3.Text;
        int status = 1;

        SqlConnection strcon1 = new SqlConnection(strcon);
        strcon1.Open();
        string ADDStr = "ADDEMPLOYEE";
        SqlCommand ADDCmd = new SqlCommand(ADDStr, strcon1);
        ADDCmd.CommandType = CommandType.StoredProcedure;
        ADDCmd.Parameters.AddWithValue("@F_name", F_name);
        ADDCmd.Parameters.AddWithValue("@L_name", L_name);
        ADDCmd.Parameters.AddWithValue("@salary", salary);
        ADDCmd.Parameters.AddWithValue("@status", status);

        ADDCmd.ExecuteNonQuery();
        bindgrideview();
        TextBox1.Text = "";
        TextBox2.Text = "";
        TextBox3.Text = "";
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:09:52.773

也许如果您将数据表关联到 GridView..

```
protected void bindgrideview()
{
   .....
   adapter.Fill(table);
   GridView1.DataSource = table; // <- missing
   GridView1.DataBind();
   ....
} 
```

然后你可以读取当前行中第一个单元格的值

```
int id = Convert.ToInt32(GridView1.Rows[e.NewEditIndex].Cells[0].Text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:10:11.707

您可以使用事件参数中的值来查找已编辑的行并从网格中读取数据：

```
grid.Rows[e.NewEditIndex].Cells[cell_index].Text 
```

在你的情况下，它会是这样的：

```
int id = Int32.Parse(GridView1.Rows[e.NewEditIndex].Cells[0].Text); 
```

# asp.net - 在 IIS 根目录下安装 Kentico 有什么影响

> ID：15382186
> 
> 赞同：1
> 
> 时间：2013-03-13T10:06:46.553
> 
> 标签：asp.net, iis-7, content-management-system, kentico

我有一个 Kentico 网站，我将它安装在我的 IIS 网站的根目录上，我不打算只拥有多个站点，但是我想知道以这种方式安装 Kentico 的含义是什么，我放弃了什么，我是什么得到。顺便说一句，我正在使用 Kentico 7。

我查看了 Kentico 7 文档，但没有解释有什么区别。

您可以在此处查看在线文档：[本地 IIS 服务器](http://devnet.kentico.com/docs/devguide/index.html?web_installer_local_iis_server.htm)

请参见下面带有根安装复选框的 Web 安装程序的图像。

![带有根安装复选框的 Web 安装程序的图像](../Images/e0482b15a76a45412d994cb2b7d09242.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:00:25.700

每个站点散列其自己的基本（根）虚拟目录。在站点下创建的每个其他虚拟目录都将成为该站点的 URL 命名空间的一部分（但您可以将其映射到您想要的任何物理位置）。在生产环境中，您通常希望应用程序“成为自己的站点”。你不希望它表现得像一些子应用程序或照顾 web.config 继承......

有关更多信息，我**强烈推荐**[这篇精彩文章](http://www.iis.net/learn/get-started/planning-your-iis-architecture/understanding-sites-applications-and-virtual-directories-on-iis)中的“虚拟目录”和“站点”部分。

如果您对安装有任何其他问题，请随时直接与我联系。

Petr Svihlik
技术负责人/工具组产品经理
petr dot svihlik at kentico dot com
[https://twitter.com/PetrSvihlik](https://twitter.com/PetrSvihlik)

# sql - 使用复合键 (EJB) 的命名查询

> ID：15382190
> 
> 赞同：1
> 
> 时间：2013-03-13T10:06:52.513
> 
> 标签：sql, hibernate, ejb, named-query

我有一个带有复合键的关联表。我正在尝试运行基于某些值（复合键）进行选择的命名查询。

这是代码的样子：

```
@Entity
@NamedQueries({
@NamedQuery(name = "MW.findAll", query = "SELECT mw FROM MemberWorkout mw"),
@NamedQuery(name = "MW.find1", query = "SELECT mw FROM MemberWorkout mw WHERE mw.SocialSecurity LIKE :SocialSecurity"), })
@Table(name = "MemberWorkout")
public class MemberWorkout implements Serializable {

private Member member;
private Workout workout;
private String date;
private MWId mwId;

@EmbeddedId
public MWId getId() {
    return mwId;
}

public void setId(MWId mwId) {
    this.mwId = mwId;
}
....
@ManyToOne
@JoinColumn(name = "SocialSecurity", insertable = false, updatable = false)
public Member getMember() {
    return member;
}

public void setMember(Member member) {
    this.member = member;
} 
```

这是我部署它并启动服务器（JBOSS）时遇到的第一个错误：

```
ERROR [org.hibernate.internal.SessionFactoryImpl] (MSC service thread 1-1) HHH000177:   Error in named query: MW.find1: org.hibernate.QueryException: could not resolve property: SocialSecurity of: org.ics.ejb.MemberWorkout [SELECT mw FROM org.ics.ejb.MemberWorkout mw WHERE mw.SocialSecurity LIKE :SocialSecurity]
at org.hibernate.persister.entity.AbstractPropertyMapping.propertyException(AbstractPropertyMapping.java:83) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.persister.entity.AbstractPropertyMapping.toType(AbstractPropertyMapping.java:77) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.persister.entity.AbstractEntityPersister.toType(AbstractEntityPersister.java:1809) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.hql.internal.ast.tree.FromElementType.getPropertyType(FromElementType.java:313) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.hql.internal.ast.tree.FromElement.getPropertyType(FromElement.java:485) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.hql.internal.ast.tree.DotNode.getDataType(DotNode.java:598) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.hql.internal.ast.tree.DotNode.prepareLhs(DotNode.java:266) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.hql.internal.ast.tree.DotNode.resolve(DotNode.java:213) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.hql.internal.ast.tree.FromReferenceNode.resolve(FromReferenceNode.java:118) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.hql.internal.ast.tree.FromReferenceNode.resolve(FromReferenceNode.java:114) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.hql.internal.ast.HqlSqlWalker.resolve(HqlSqlWalker.java:883) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.expr(HqlSqlBaseWalker.java:1246) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.exprOrSubquery(HqlSqlBaseWalker.java:4252) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.comparisonExpr(HqlSqlBaseWalker.java:3874) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.logicalExpr(HqlSqlBaseWalker.java:1923) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.whereClause(HqlSqlBaseWalker.java:782) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:583) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:287) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:235) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:248) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:183) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:101) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:80) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:119) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.internal.SessionFactoryImpl.checkNamedQueries(SessionFactoryImpl.java:974) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:485) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1737) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:84) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:904) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:889) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:73) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.createContainerEntityManagerFactory(PersistenceUnitServiceImpl.java:162) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.start(PersistenceUnitServiceImpl.java:85) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [rt.jar:1.7.0_11]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.7.0_11]
at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_11] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:11:28.147

如果我正确理解了这个问题，那`SocialSecurity`是`MWId`可嵌入的字段。如果您想通过查询访问它，则需要通过嵌入式 ID 导航到它，如下所示：

```
SELECT mw FROM MemberWorkout mw WHERE mw.id.SocialSecurity... 
```

我假设属性名称大写，如您的代码中所示。如果不是，请用正确的名称替换它。

请注意，您使用的是属性访问，这意味着由于访问器方法已注释，因此您需要根据 JavaBean 标准在查询中命名属性（`getId()`意味着 HQL 和 JPQL 将访问 preperty as `id`）。如果您对该字段进行注释，则需要将查询更改为`mwId`.

# java - java socket fileoutputstream无法关闭文件

> ID：15382191
> 
> 赞同：1
> 
> 时间：2013-03-13T10:06:53.650
> 
> 标签：java, sockets, netbeans, fileoutputstream

我已经编写了通过套接字传输文件的代码，文件传输正确，但即使在调用`.close()`方法后也没有关闭。

但是文件在关闭“套接字”后关闭，但我想保持连接打开。

这里**服务器**将文件发送给**客户端**

服务器代码

```
public  void sendFile(String sfileName) throws IOException{
    try{
        in = new FileInputStream(sfileName);
        out = socket.getOutputStream();
        transferData(in,out);
    }
    finally {
        in.close();
        in = null;
        System.gc();
    }
}
private void transferData(InputStream in, OutputStream out) throws IOException  {
    byte[] buf = new byte[8192];
    int len = 0;
    while(in.available()==0);
    while ((len = in.read(buf)) != -1) {
    out.write(buf, 0, len);
    }
    out.flush();
} 
```

客户代码：

```
public  void recieveFile(String rfileName) throws IOException{
    try{
        in = socket.getInputStream();
        System.out.println("Reciever file : " + rfileName);
        out = new FileOutputStream(rfileName);
        transferData(in,out);
    }
    finally{
        out.flush();
        out.close();
        out = null;
        System.gc();
    }
}
private void transferData(InputStream in, OutputStream out) throws IOException  {
    byte[] buf = new byte[8192];
    int len = 0;
    while(in.available()==0);
    while ((len = in.read(buf)) != -1) {
    out.write(buf, 0, len);
    }
    out.flush();
} 
```

代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:09:40.887

我认为你应该使用[Socket.shutdownOutput()](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#shutdownOutput%28%29)

# android-annotations - 如何使用 AndroidAnnotations 取消 @Background 任务

> ID：15382196
> 
> 赞同：4
> 
> 时间：2013-03-13T10:06:59.970
> 
> 标签：android-annotations

我的用例是，每当用户键入 EditText 时，输入数据都用于在后台执行操作。这些操作可能需要足够长的时间才能导致 ANR。如果操作完成得足够快，@TextChange 和 @Background 可以正常工作。但是操作是否需要足够长的时间，以便用户输入更多数据，我会遇到线程问题，因为会有多个后台任务将命令更新相同的 UI 组件。

我想我用 AsyncTask API 实现了想要的行为，但也想寻找基于 AndroidAnnotations 的解决方案，因为它大大简化了代码。顺便说一句，很棒的库。

下面是一些代码片段，希望能说明我的观点。感谢您至少阅读，感谢评论/答案:)

```
@TextChange
void onUserInput(...) {
  // This will start a new thread on each text change event
  // thus leading to a situation that the thread finishing
  // last will update the ui
  // the operation time is not fixed so the last event is
  // not necessary the last thread that finished
  doOperation()
}

@Background
void doOperation() {
  // Sleep to simulate long taking operation
  Thread.sleep( 6000 );
  updateUi()
}

@UiThread
void updateUi() {
  // Update text field etc content based on operations
} 
```

**更新：**目前这是不可能的，请参阅下面的 DayS 的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-02T20:30:43.933

从 AA 3.0 开始就有可能。阅读此[线程](https://github.com/excilys/androidannotations/pull/569)。

```
@Override
protected void onStop() {
    super.onStop();
    boolean mayInterruptIfRunning = true;
    BackgroundExecutor.cancelAll("longtask", mayInterruptIfRunning);
}

@Background(id="longtask")
public void doSomethingLong() {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:02:15.867

Android Annotations 上已经有[这种请求，](https://github.com/excilys/androidannotations/issues/478)但由于没有提出解决方案而被关闭。但是，如果您对此有任何想法，请继续并重新打开此问题 ;)

# jqgrid - jqgrid autoencode=true 编码后数据

> ID：15382198
> 
> 赞同：3
> 
> 时间：2013-03-13T10:07:09.257
> 
> 标签：jqgrid, html-escape-characters

我正在尝试修复我的 Web 应用程序中的 XSS 漏洞，但我被 jqGrid 卡住了。

我为我的所有网格激活了“自动编码”，文档说：“当设置为真编码（html 编码）时，传入（来自服务器）**和发布的数据**（来自编辑模块）。”。

我的问题是我不明白为什么对发布的数据进行编码。这样我就可以在我的数据库中获取 html 转义文本。所以这个数据库不再被其他应用程序读取（或者它必须解码所有文本），此外数据库搜索不再起作用。

那么，是否可以只对从数据库中检索到的数据进行编码并按原样发布数据？目前，我禁用了自动编码并在所有列上添加了格式化程序以转义所有文本。这是唯一的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:01:52.107

您可以使用`serializeEditData`（在使用[表单编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing)的情况下）、`serializeRowData`（在使用[内联编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing)的情况下）或`serializeCellData`（在使用[单元格编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acell_editinge)的情况下）更改将在编辑期间发送到服务器的数据。例如，要解码数据，您可以使用`$.jgrid.htmlDecode`. 您可以枚举发布数据的所有属性并解码相应属性的值。或者，您可以在服务器端使用对发布数据的解码。您在服务器上使用的任何技术都提供了可用于解码的简单方法。例如，在 ASP.NET 中，可以使用[HttpServerUtility](http://msdn.microsoft.com/en-US/library/system.web.httpserverutility_methods%28v=vs.80%29.aspx)`HtmlDecode`的/`HtmlEncode`方法。

# iphone - 如何在返回键和 ipad 向下箭头键上调用方法

> ID：15382202
> 
> 赞同：-3
> 
> 时间：2013-03-13T10:07:21.103
> 
> 标签：iphone, ipad, uitextfield

![在此处输入图像描述](../Images/10980c5ea0740412d60004fb812643f5.png)我有文本字段动画的方法，它在 resignfirsrresponder 之后运行我希望当用户按下 ipad 的向下箭头时也调用该方法，它隐藏了键盘任何想法如何做到这一点。谢谢。

我在 ABC 文本按钮 i 旁边添加了屏幕截图，当我们按下该按钮时，通常键盘隐藏我想在该按钮单击时调用动画。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:15:21.987

对于 Ipad 向下箭头键您可以使用通知

```
 [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(keyboardWillHide)
                                                     name:UIKeyboardWillHideNotification
                                                   object:nil];

-(void)keyboardWillHide
{
//call when key board hides
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:15:04.990

您可以在以下任何一种方法中调用 textfield 动画`UITextFieldDelegate`方法

```
- (void)textFieldDidEndEditing:(UITextField *)textField {

} 
```

或者

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {

    return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:18:45.323

如果您想在键盘上使用完成按钮，请使用完成按钮查看一个视图并编写此方法

```
-(void)textFieldDidBeginEditing:(UITextField *)textField
{   
    [textField setInputAccessoryView:self.doneView];
} 
```

然后对该完成按钮执行以下操作

```
-(IBAction)doneButtonPressed:(id)sender
{
    [currentTextField resignFirstResponder];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T10:16:29.697

只需在里面写你的代码

```
- (void)textFieldDidEndEditing:(UITextField *)textField {

} 
```

并且不要忘记绑定文本字段委托并写入`<UITextfieldDelegate>`.h 文件

# sql-server-2008 - 在c#中将windows窗体控件绑定到sql server数据

> ID：15382210
> 
> 赞同：0
> 
> 时间：2013-03-13T10:07:40.527
> 
> 标签：sql-server-2008, c#-4.0

我有绑定到数据源的组合框。我通过组合框属性做到了这一点。我还将文本框绑定到相同的数据源。当尝试更改组合框中的项目时，它会更改文本框中的值。但是当我尝试从组合框中选择另一个项目时，它会给出错误“”这会导致集合中的两个绑定绑定到同一个属性。参数名称：绑定"

这是绑定文本框的代码

```
 private void comboBox2_SelectedIndexChanged(object sender, EventArgs e)
    {
        con.Open();
        SqlDataAdapter da = new SqlDataAdapter("select * from ProductMaster", con);
        DataSet ds = new DataSet();
        da.Fill(ds, "ProductMaster");

        textBox5.DataBindings.Add("text", ds, "ProductMaster.Rate");

        label17.DataBindings.Add("text", ds, "ProductMaster.VAT");
        con.Close();
    } 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T04:56:57.463

您应该每次清除您的绑定。因为每次您在组合框中选择一个新项目时，此事件都会将数据源绑定到组合，并且由于它之前已绑定（与您之前选择的项目），它会给出错误。昨天完全相同的问题发生在我身上，我通过每次在新绑定之前清除绑定来解决。

这是我的代码：

```
 private void cmb_aye_SelectedIndexChanged(object sender, EventArgs e)
    {
      OleDbDataAdapter da_select = new OleDbDataAdapter(string.Format("SELECT * FROM quran WHERE (sure={0} and aye={1})", cmb_sure.SelectedItem.ToString(), cmb_aye.SelectedItem.ToString()), objConnection);
      DataTable dt = new DataTable();
      dt.Clear();
      da_select.Fill(dt);
      txt_tarjome.DataBindings.Clear();
      txt_tarjome.DataBindings.Add("Text", dt, "tarjome");
      txt_matn_aye.DataBindings.Clear();
      txt_matn_aye.DataBindings.Add("Text", dt, "baerab");
    } 
```

# java - 确定 URL 将/已经以编程方式重定向到不同的 URL

> ID：15382212
> 
> 赞同：0
> 
> 时间：2013-03-13T10:07:43.483
> 
> 标签：java, redirect, http-status-codes

我需要从市场上下载一堆 apk。使用Multi-apk工具分析每个文件是否包含广告并再次压缩（这不是问题，所以我将进一步讨论）

现在，我正在做的部分是从特定市场下载 apk。我获取了页面的源代码并获取了所有以 .APK 结尾的 URL

从页面中提取每个 URL 后，我使用 commons io 下载它。但是，每当下载完成时，我注意到它们的大小都相同。这让我觉得它正在下载相同的文件。

后来，我意识到我被重定向到不同的 URL。

我想要做的是确定 URL 是否将我重定向到不同的 URL。

我尝试获取该 URL 的响应代码，它给了我 200，但是当我已经连接时，它稍后会将我重定向到另一个页面。

这是我用来检查 URL 响应代码的代码。

```
boolean urlValidity =true;
try
{
    URLConnection urlConn = new URL(url).openConnection();
    String RC = urlConn.getHeaderField(0);
    System.out.println("RC " + RC);
    if ( (RC == null) || (!(RC.contains("200"))) )
    {

        urlValidity = false;
    }
}
catch(Exception e)
{
    return false;
}
return urlValidity; 
```

我需要这样做，所以我不需要继续下载该 URL 的 APK。有没有办法以编程方式解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:55:31.047

您应该将其设置`setInstanceFollowRedirects`为 false 以确保您不会被重定向。这也将从您建立的连接中下载非常少的内容。我最近有一个项目，我必须找出一个 URL 需要经过多少跳才能到达最终 URL，并且可以使用 LongURL API。

# java - 在eclipse中运行android junit测试时将数据保存到文件

> ID：15382215
> 
> 赞同：1
> 
> 时间：2013-03-13T10:07:49.313
> 
> 标签：java, android, eclipse, junit

我在 Eclipse 中运行 Android JUnit 测试。我有一个在 JUnit 运行期间测试的函数。在函数内部，我将一些值保存到本地文件中。但它似乎没有被保存。是什么原因，以及如何从该功能在控制台中输出一些数据？

它与 robots 开发人员提供的示例应用程序中的单元测试代码基本相同。

```
public void testDisplayBlackBox() {
        //Enter any integer/decimal value for first editfield, we are writing 10
        solo.enterText(0, "10");
        //Enter any interger/decimal value for first editfield, we are writing 20
        solo.enterText(1, "20");
        //Click on Multiply button
        solo.clickOnButton("Multiply");
        //Verify that resultant of 10 x 20
        assertTrue(solo.searchText("200"));
        ArrayList <View> aview= solo.getCurrentViews();
        for (View v:aview)
        {
            //System.out.println(v.toString());
            //solo.enterText(0, v.toString());
            try {
                FileUtils.writeStringToFile(new File("test.txt"), v.toString());
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            //FileUtils 
        }
        //aview.get(0).
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:42:48.173

在测试执行期间，您无法在本地保存文件。您可以将其保存在例如 sd-card 上，然后您可以通过 adb 提取它（更多帮助：http: [//developer.android.com/tools/help/adb.html](http://developer.android.com/tools/help/adb.html)）：

```
public void testDisplayBlackBox() {
    //Enter any integer/decimal value for first editfield, we are writing 10
    solo.enterText(0, "10");
    //Enter any interger/decimal value for first editfield, we are writing 20
    solo.enterText(1, "20");
    //Click on Multiply button
    solo.clickOnButton("Multiply");
    //Verify that resultant of 10 x 20
    assertTrue(solo.searchText("200"));
    ArrayList <View> aview= solo.getCurrentViews();
    StringBuilder sB = new StringBuilder();
    for (View v:aview)
    {           
        sB.append(v.toString());
    }
    saveToFile(sB.toString())
}

public void saveToFile(String text) {
    try {
        String path = Environment.getExternalStorageDirectory();
        File file = new File(path, test.txt);
        FileOutputStream fos = new FileOutputStream(file);
        byte[] data = text.getBytes();
        fos.write(data);
        fos.flush();
        fos.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

对于调试，您可以使用 android.util.Log：

```
Log.d("TEST", "text"); 
```

# multithreading - 在 C# 中创建具有优先级继承的互斥锁

> ID：15382217
> 
> 赞同：1
> 
> 时间：2013-03-13T10:07:54.507
> 
> 标签：multithreading, c#-4.0, mutex

我有一个静态的对象列表。在程序期间，创建了许多线程。创建每个线程后，它立即创建一个新对象，并将其添加到静态列表中。程序中有另一个线程，负责遍历静态列表。

假设一个具有低优先级“A”的线程正在访问该列表，而另一个具有较高优先级“C”的线程也请求访问它，May（确实在极少数情况下），具有中等优先级“B”的线程也存在于系统中，将获得'A'的CPU时间。因此，'C' 将等待'B'，这与常识相反。

如何在不涉及此优先级反转问题的情况下锁定列表？

'Lock()' 函数可以提供帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:00:06.650

在使用线程优先级来选择下一个要调度的线程的操作系统上，优先级反转是一个非常普遍的问题。像 Windows。操作系统线程调度器对此有特定的对策，当它检测到倒置问题时，人为地提高线程优先级，从而允许低优先级线程运行并有机会释放锁。描述该功能的 MSDN 页面[位于此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684831%28v=vs.85%29.aspx)。更详细[的旧知识库文章在这里](http://support.microsoft.com/kb/96418)。

不要帮忙。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T18:37:34.720

也就是说，最坏的情况是*短期*优先级倒置问题。当然，除非低优先级线程 A 持有锁很长时间。线程 C 无法取得进展，因为它正在等待锁。正如 Hans Passant 在他的回答中所说，线程调度程序检测到这个问题并提高较低优先级线程的优先级，以便它可以释放锁。他发布的第一个 MSDN 链接很好地解释了这一点。

如果您的低优先级线程 A 持有锁很长时间（即它正在对列表进行复杂的计算）并且这导致您的应用程序出现问题，那么您可以执行以下操作之一：

*   提高线程A的优先级
*   让线程 A 锁定列表，获取项目，解锁列表，然后处理项目
*   锁定列表、制作副本、解锁列表并处理副本。
*   以上的一些变化或组合

无论如何，问题不在于锁。问题在于对程序进行编码，以便高优先级线程可以在低优先级线程需要独占访问的数据结构上等待很长时间。

# android - 编辑文本验证

> ID：15382222
> 
> 赞同：-3
> 
> 时间：2013-03-13T10:08:09.037
> 
> 标签：android, android-edittext

我是安卓新手。
我想添加编辑文本验证，比如用户输入手机号码。如果数字小于 10 位，它将显示为红色，如果正确，它将显示为蓝色。

怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:09:40.043

将`inputtype`of设置`edittext`为`number`并像这样检查它。

```
if(editText.getText().length() < 10) {
  ..Invalid Number
  editText.setTextColor(Color.RED);
} else {
   editText.setTextColor(Color.BLUE);
   Valid Number
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:13:43.827

你应该遵循android的最佳实践......

```
if (myEditText.getText().toString().trim().length() < 10) {
    myEditText.setError("Please entre 10 digits");     
} 
```

# python - Python数组删除项目

> ID：15382225
> 
> 赞同：0
> 
> 时间：2013-03-13T10:08:17.433
> 
> 标签：python, list

我有数组

```
a=['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '151 ihi Chun', '151 ihi Chun', '149 st Hg', '149 st Hg', '125 Tatane', '125 Tatane', '174 Sunnygat', '174 Sunnygat', '174 Sunnygat', '126 Nank', '126 Nank', '162 Rass', '162 Rass'] 
```

我想删除所有`''`对象，但不能。

```
a.remove('') 
```

或者`while a.index(''): a.remove('')`

没救了。。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T10:09:14.503

使用[`filter()`调用](http://docs.python.org/2/library/functions.html#filter)with`None`作为过滤器（测试真实性，因此非空）：

```
a = filter(None, a) 
```

或列表理解：

```
a = [e for e in a if e] 
```

如果您需要明确允许其他 'false' 值并且*只想*过滤掉空字符串，请使用：

```
a = [e for e in a if e != ''] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:09:38.177

如果这些项目实际上是`''`，换句话说，是空字符串，那么您可以使用以下内容：

```
a = [x for x in a if x] 
```

由于在真值测试语句中使用空字符串时，其计算结果为假。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T10:31:19.610

尝试

```
for i in a:
   a.remove('')
   a.remove('') 
```

我也不确定为什么第一次它没有全部删除，但第二次确定它删除了所有空白

# regex - Tcl/期望正则表达式来实现 sed 类型的任务？

> ID：15382228
> 
> 赞同：0
> 
> 时间：2013-03-13T10:08:28.080
> 
> 标签：regex, sed, expect

这就是我使用 sed 所做的，但我需要使用 tcl 或期望正则表达式

```
 sed -n '/VLAN Name/,/VLAN Type/p' | sed 's/[[:blank:]]\+/\n/g' | sed -e '/^$/d' -e 's/,$//g' 
```

在两个单词之间打印行 VLAN Name 和 VLAN Type 将空格转换为换行符删除空白行

我如何使用 tcl 或期望实现它。

或者我可以做

```
set val [eval exec "sed -n '/VLAN Name/,/VLAN Type/p' | sed 's/[[:blank:]]\+/\n/g' | sed -e '/^$/d' -e 's/,$//g'" ] < expect_out(buffer) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:19:14.910

```
set p false
set vals {}
foreach line [split $expect_out(buffer) \n] {
    if {[string match {*VLAN Type*} $line]} {
        set p false
    }
    if {$p} {
        foreach word [regexp -all -inline {\S+} $line] {
            lappend vals [string trimright $word ,]
        }
    }
    if {[string match {*VLAN Name*} $line]} {
        set p true
    }
}

puts $vals 
```

# javascript - 无法使用 COM javascript 访问 sharepoint 2013 站点

> ID：15382232
> 
> 赞同：0
> 
> 时间：2013-03-13T10:08:39.287
> 
> 标签：javascript, sharepoint, sharepoint-2013, sharepoint-object-model

我需要在 SharePoint 2013 中处理 COM Javascript。我创建了一个“.aspx”页面并包含脚本文件以使用 Javascript 访问 SharePoint 网站和列表。但是，我无法在`clientContext`. 请查看下面的代码。

```
<script type="text/javascript" src="/_Layouts/15/Scripts/jquery-1.7.1.min.js">
</script>
<script type="text/javascript" src="/_Layouts/15/Scripts/SP.js"></script>
<script type="text/javascript" src="/_Layouts/15/Scripts/SP.Runtime.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        var siteUrl = "http://mysiteurl/";
        retrieveListItems(siteUrl);
    });
    function retrieveListItems(siteUrl) {
        alert('SiteUrl :' +'\n'+ siteUrl);
        var clientContext = new SP.ClientContext(siteUrl);
        alert('clientContext :' +'\n'+ clientContext)  
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:19:36.007

您可以尝试`SP.ClientContext.get_current()`，因为您只需要传递 url 即可获取特定站点。

参考：http: [//msdn.microsoft.com/en-us/library/jj245759.aspx](http://msdn.microsoft.com/en-us/library/jj245759.aspx)

# apache-flex - ADG drawVerticalLine 问题

> ID：15382238
> 
> 赞同：0
> 
> 时间：2013-03-13T10:08:56.373
> 
> 标签：apache-flex, flex4, advanceddatagrid

我在 AdvancedDataGrid 上有一个问题，即在滚动网格时垂直线并不总是正确绘制

截屏： ![在此处输入图像描述](../Images/6f5147a82b6df2baad71a782535ea00a.png)

如您所见，它会影响整个行，直到第一个 groupedColumn。这仅在向上滚动时发生。首先，我认为这可能是我的 itemRenderer 的问题，但事实并非如此，因为我发现它仅在我设置 lockedColumnCount 属性时才会发生。在我的情况下，它设置为 10，只是为了滚动 groupedColumns。如果没有lockedColumnCount，这些行就不会有这样的问题。

它与页脚行无关，在添加它之前我已经遇到了同样的问题。

任何人都有同样的问题并找到解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:00:24.310

经过一些痛苦的调查，我找到了这种行为的原因或至少是起源。

仅在以下情况下发生：
*使用分组列
*为 ADG 设置 lockedColumnCount
*为 itemRenderers 使用 MXAdvancedDataGridItemRenderer 的子类

当广告向上滚动时，这将产生您可以在上面看到的错误
（向下滚动时会发生更新）它在重新绘制网格时消失
（在排序或列拖动等之后）并且大部分时间会返回（但不是每次都返回） ) 重新滚动时...

**结论**：
当您有 groupedColumns 和 lockedColumnCount 时，不要使用 MXAdvancedDataGridItemRenderer

创建一个实现的类：IDataRenderer、IDropInListItemRenderer、ILayoutManagerClient、IListItemRenderer、IStyleClient

（子类类似“Group”，因此您不必实现所有内容，
从默认渲染器 AdvancedDataGridItemRenderer 中获得灵感以完成其余的实现）

并将该类用于您的渲染器

并且不应该出现滚动drawVerticalLine错误......

# android - 如何在 Android 中启用高速蓝牙（3.0+HS 或 4.0）？

> ID：15382241
> 
> 赞同：6
> 
> 时间：2013-03-13T10:09:02.880
> 
> 标签：android, bluetooth

所以我在两部蓝牙 4.0 安卓手机上有一个 BT 客户端和一个服务器应用程序。服务器等待连接通过

```
BluetoothServerSocket serverSocket = mBluetoothAdapter.listenUsingRfcommWithServiceRecord(SDP_NAME, UUID.fromString(SDP_UUID)); 
```

客户端通过

```
socket = device.createRfcommSocketToServiceRecord(UUID.fromString(SDP_UUID)); 
```

然后，使用 AsyncTask，我以无限循环的方式将数据从客户端发送到服务器。

```
byte[] buffer = new byte[4096];
outputStream.write(buffer); 
```

我计算了速度，只得到了大约 230KByte/s，这正是蓝牙 EDR 提供的 2.1 MBit/s。如何通过蓝牙 HS (24 MBit/s) 发送数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:51:57.967

BT 3.0+HS是实际使用Wifi物理层实现高速率的方案。所以它只有在你拥有支持它的正确类型的 BT/Wifi 组合芯片时才有效，这并不是很常见。拥有 4.0 设备并不意味着它可以做到 3.0+HS，它只是意味着它可以做到 BT Low Energy，即低数据速率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:27:09.283

据我了解，Google 尚未开放驱动 4.0 芯片内置功能所需的 API。由于该功能适用​​于笔记本电脑和各种 Windows 操作系统，因此移动 Window 操作系统可能更接近或能够通过软件补丁进行操作。我认为谷歌的首要任务是在 HS 之前以低电量工作。

此外，我认为无线运营商并不热衷于免费提供高速网络共享，这扼杀了软件开发的努力。

# jquery - 使用 Codeigniter 的 jQuery 自动完成功能，不能在索引函数之外工作

> ID：15382247
> 
> 赞同：1
> 
> 时间：2013-03-13T10:09:17.727
> 
> 标签：jquery, codeigniter, autocomplete

用 Codeigniter 和 jquery 撕扯我的头发。

我目前有一个非常基本的代码集来解决这个问题。

目前我的索引函数调用我的视图。视图在这种情况下完美地处理了 jquery 自动完成。

如果我将 index 更改为 indextest 或任何其他名称，自动完成将停止工作。几乎就像 jquery 输出被专门传递给页面的默认方法一样，即 index.php。

有没有办法指定必须返回或显示的方法？

**我的控制器是：**

```
<?Php

class Sales extends MY_Controller{

  function __construct() {
    //call parent constructor
    parent::__construct();
    $this->load->model('sales_model');
  }

  function index(){
    $this->load->view('sales/new_order_details');
  }

  function get_customers(){
    $this->load->model('Sales_model');
    if (isset($_GET['term'])){
      $q = strtolower($_GET['term']);
      $this->Sales_model->get_customer($q);
    }
  }

  function login() {
    redirect('/pointer/login');
  }

  function logout() {
    redirect('/pointer/logout');
  }
} 
```

**我的模特**

```
<?php
// (Array of Strings)
class Sales_model extends MY_Model{

  function get_customer($q){
    $this->db->select('CustomerName');
    $this->db->like('CustomerName', $q);
    $query = $this->db->get('Customers');
    if($query->num_rows > 0){
      foreach ($query->result_array() as $row){
        $row_set[] = htmlentities(stripslashes($row['CustomerName'])); //build an array
      }
      echo json_encode($row_set); //format the array into json data
    }
  }
} 
```

**我的观点**

```
<html>
   <head>
      <title>
         Capture New Order
      </title>

      <link href="<?php echo base_url() ?>application/css/ui-lightness/jquery-ui-1.8.custom.css" media="screen" type="text/stylesheet" rel="stylesheet">
      <script src="<?php echo base_url() ?>application/scripts/jquery-1.9.1.min.js" type="text/javascript"></script>
      <script src="<?php echo base_url() ?>application/scripts/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>
      <script src="<?php echo base_url() ?>application/scripts/autocomplete.js" type="text/javascript"></script> 
   </head>
<body>
   <div  data-role="page"  data-theme="a">
      <div class="wrap-header">
         <div data-role="header" data-mini="true"  data-ajax="false">
            <a data-icon="grid" data-mini="true"  data-theme="a" onclick="window.location.href='/pointer'">Menu</a>
            <h3>New Order Details</h3>
         </div>
      </div>   
   <div data-role="content">
   <form>
      <label for="customer">Customer</label>
      <input type="text" id="customer" />
   </form>
   </div>

</body>
</html> 
```

**自动完成.js**

```
$(function(){
  $("#customer").autocomplete({
    source: "sales/get_customers"
  });
}); 
```

如前所述，如果我将控制器的 index() 方法更改为 indextest() 并直接浏览到该方法，则自动完成功能将停止工作。

我错过了一些简单的事情还是有更大的原因我不能锻炼？

一如既往地感谢您的帮助，

**根据FABIO 更新** google chrome 开发人员在调用自动​​完成脚本时的输出

正常索引（）工作） ![在此处输入图像描述](../Images/382b772b1f54f6e330f8c1ec1daba781.png)

索引文本（） ![在此处输入图像描述](../Images/0b0fee6e1c65f63e6bdc5d6329c8980a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:19:07.743

在这

```
 $(function(){
  $("#customer").autocomplete({
    source: "sales/get_customers"
  });
}); 
```

做这个

```
$(function(){
  $("#customer").autocomplete({
    source: "<?=site_url('sales/get_customers')?>"
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:16:35.840

如果不存在第二个 uri 参数，则默认调用`index`控制器中的方法，您实际上已经回答了自己。`Sales`

因为您现在使用`sales/indextest`需要调整`source`url 的 url 加载视图，`sales/get_customers`所以是一个相对 url，当您在不指定第二个参数的情况下加载自动完成时有效`indextest`，至于解决方案，您可能希望将完整 url 添加到源例子`soruce:"<?=base_url();?>sales/indextest"`

您可能还想按以下方式输出 json：

```
$this->output->set_content_type('application/json')->set_output(json_encode($data)); 
```

安装：

```
json_encode($row_set); 
```

# objective-c - 目标 C 类初始化

> ID：15382261
> 
> 赞同：0
> 
> 时间：2013-03-13T10:09:36.067
> 
> 标签：objective-c, cocoa

```
+ (id)packetWithType:(PacketType)packetType
{
    return [[[self class] alloc] initWithType:packetType];
}

- (id)initWithType:(PacketType)packetType
{
    if ((self = [super init]))
    {
        // code
    }
    return self;
} 
```

为什么我们需要第一类方法，第二个方法还不够初始化吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T10:20:40.397

拥有便利的构造函数类方法有两个原因。第一个是，这个习语`[[Thing alloc] initWithFoo: xyz]`很常见，但不方便在任何地方输入。所以，`[Thing thingWithFoo: xzy]`是一个常见的缩写。

更深层次的原因与引用计数有关。以 开头的方法`init`应该返回实例的引用，其所有权转移给调用者。而便利类方法通常返回`autorelease`d 引用：

```
+ (id)packetWithType:(PacketType)packetType
{
    return [[[[self class] alloc] initWithType:packetType] autorelease];
} 
```

为了避免悬空引用和/或内存泄漏，了解这一点很重要：

```
Thing* thing = [[Thing alloc] initWithFoo: xyz];
// Now, *I* own the reference and *I* am responsible for releasing
// it, when I no longer need it.
[thing release] 
```

另一方面，由返回的引用

```
Thing* thing = [Thing thingWithFoo: xyz]; 
```

由“最近的”拥有`NSAutoreleasePool`。调用者不负责释放它（事实上，那是错误的！）。如果要保留引用，调用者必须`retain`在此处实际使用它：

```
self->myMember = [thing retain]; 
```

即使在使用 ARC 时，您也应该了解这些约定，因为基本规则仍然有效，即使（在 ARC 下）是编译器生成遵守它们的代码。首`NARC`字母缩略词是一种很好的记忆方式，哪些方法名称前缀具有某些职责。[这个答案有细节](https://stackoverflow.com/a/3672871/141081)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:35:07.640

由于某些原因，便利构造函数在语言中占有一席之地。当然，使用它们通常更短，但也有其他优点：

1.  调用对象时尚未分配对象，因此该方法可以决定分配哪个类。类集群可能会使用它来根据构造函数的参数找到合适的类。
2.  该方法还可能决定从共享缓存中返回一个已经存在的对象。
3.  返回值可以是静态类型的。

请注意，您的便利构造函数通常是：

```
+ (Packet *)packetWithType:(PacketType)packetType
{
    return [[self alloc] initWithType:packetType];
} 
```

现在返回类型是静态类型的，我们不向`class`类对象发送（冗余）消息。对于最近的编译器版本，可以将`instancetype`其用作返回类型。

# exception - Databene benerator 是否包含错误或如何设置？

> ID：15382270
> 
> 赞同：1
> 
> 时间：2013-03-13T10:09:55.683
> 
> 标签：exception, installation, generator

我刚刚下载了 databene benerator 0.8.1 版，我在 windows 7 starter 上使用它。我需要它为我正在开发的应用程序生成一些测试数据，但似乎 benerator 无法正常工作。我确实正确设置了 BENERATOR_HOME 变量，但是当我运行`benerator -version`它时会打印版本详细信息然后引发异常。这是我控制台上的输出

```
C:\Users\Obby> benerator -version
Local classpath: .;D:\databene-benerator-0.8.1\bin;D:\databene-benerator-0.8.1\lib\*
12:56:16,874 INFO  (main) [CONFIG] Running file -version
12:56:16,890 INFO  (main) [CONFIG] Benerator 0.8.1 build 2335
12:56:16,890 INFO  (main) [CONFIG] Java version 1.7.0_17
12:56:16,890 INFO  (main) [CONFIG] JVM Java HotSpot(TM) Client VM 23.7-b01 (Oracle     
Corporation)
12:56:16,905 INFO  (main) [CONFIG] OS Windows 7 6.1 (x86)
12:56:16,905 INFO  (main) [CONFIG] Installed JSR 223 Script Engines:
12:56:16,983 INFO  (main) [CONFIG] - Mozilla Rhino[js, rhino, JavaScript,     
javascript, ECMAScript, ecmascript]
12:56:16,983 INFO  (main) [CONFIG] Max heap size: 247 MB
12:56:17,420 DEBUG (main) [CONFIG] Initializing Script mapping from file org/databene
/script/script.properties
Exception in thread "main" org.databene.commons.ConfigurationError: Error parsing  
-version
    at org.databene.commons.xml.XMLUtil.parse(XMLUtil.java:245)
    at org.databene.commons.xml.XMLUtil.parse(XMLUtil.java:235)
    at    
org.databene.benerator.engine.DescriptorRunner.parseDescriptorFile
(DescriptorRunner.java:113)
    at    
org.databene.benerator.engine.DescriptorRunner.runWithoutShutdownHook
(DescriptorRunner.java:109)
    at org.databene.benerator.engine.DescriptorRunner.run(DescriptorRunner.java:102)
    at org.databene.benerator.main.Benerator.runFile(Benerator.java:99)
    at org.databene.benerator.main.Benerator.runFromCommandLine(Benerator.java:82)
    at org.databene.benerator.main.Benerator.main(Benerator.java:75)
Caused by: org.databene.commons.ConfigurationError: Resource not found: -version
    at org.databene.commons.IOUtil.getResourceAsStream(IOUtil.java:584)
    at org.databene.commons.IOUtil.getFileOrResourceAsStream(IOUtil.java:565)
    at org.databene.commons.IOUtil.getInputStreamForURI(IOUtil.java:214)
    at org.databene.commons.IOUtil.getInputStreamForURI(IOUtil.java:198)
    at org.databene.commons.xml.XMLUtil.parse(XMLUtil.java:242)
    ... 7 more

C:\Users\Obby> 
```

设置了 benerator 环境变量，我可以在控制台上正确获取它

```
C:\Users\Obby> echo %BENERATOR_HOME%
D:\databene-benerator-0.8.1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T15:22:06.470

尝试在参数“版本”之前使用两个破折号。一个破折号通常用于单字母参数。

# magento - 从愿望清单页面单击产品详细信息页面时显示致命错误

> ID：15382272
> 
> 赞同：0
> 
> 时间：2013-03-13T10:09:56.307
> 
> 标签：magento, magento-1.7

我正在尝试在产品详细信息页面中显示类别名称。为此我正在使用

```
 $cat_name=Mage::registry('current_category')->getName(); 
```

它显示类别名称。但是当我进入愿望清单页面并单击产品图片时，它会给出错误：- 致命错误：在 /opt/lampp/htdocs/dominie/app/design/frontend/ 中的非对象上调用成员函数 getName()默认/dominie/template/catalog/product/view.phtml。

请帮助我如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:54:57.403

刚刚测试了下面的代码，当添加到 template/catalog/product/view.phtml 时，它可以在 v1.7 中运行。

但是`Mage::registry('current_category');`，仅当从类别页面进入产品页面时才可用（未经测试，但也可能取决于您是否有包含 url 中的类别名称的 seo url）

```
<?php
  $_helper = $this->helper('catalog/output');
  $_category_detail=Mage::registry('current_category');
  echo  $_category_detail->getName(); //gives current  category name
  echo $_category_detail->getId(); //gives current category id
?> 
```

请参阅[http://vinayp.com.np/how-to-get-category-name-and-id-on-product-page-on-magento/](http://vinayp.com.np/how-to-get-category-name-and-id-on-product-page-on-magento/)

显示产品所属的所有类别

```
<?php $categories = $_product->getCategoryIds(); ?>
<?php foreach($categories as $k => $_category_id): ?>
    <?php $_category = Mage::getModel('catalog/category')->load($_category_id) ?>              
    <a href="<?php echo $_category->getUrl() ?>"><?php echo $_category->getName() ?></a>
<?php endforeach; ?> 
```

请参阅[http://www.magentocommerce.com/boards/viewthread/27720/](http://www.magentocommerce.com/boards/viewthread/27720/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:02:30.343

尝试在您的愿望清单模块中定义 $cat_name，以便愿望清单模块中的集合也将包含它被添加到愿望清单的类别名称。这肯定会减少您的开销。

# symfony - 从 symfony 2.1.7 升级到 symfony 2.1.8

> ID：15382275
> 
> 赞同：1
> 
> 时间：2013-03-13T10:10:02.303
> 
> 标签：symfony, symfony-2.1

我运行了 composer update 命令，它从 symfony 2.1.7 更新到了 symfony 2.1.8。这就是我的问题开始的地方。现在，当我尝试运行任何 symfony 控制台命令时，我得到如下错误：

```
 Fatal error: Class 'Symfony\Component\Console\Input\ArgvInput' not found in C:\xampp\htdocs\myproject\app\console on line 16 
```

当我在浏览器中运行我的项目时，出现此错误：

```
Fatal error: Class 'Symfony\Component\ClassLoader\DebugClassLoader' not found in C:\xampp\htdocs\myproject\app\bootstrap.php.cache on line 542 
```

以前它工作得很好。

我该如何解决 ？

这是我的composer.json：

```
{
"name": "symfony/framework-standard-edition",
"description": "The \"Symfony Standard Edition\" distribution",
"autoload": {
    "psr-0": { "": "src/" }
},
"require": {
    "php": ">=5.3.3",
    "symfony/symfony": "2.1.7",
    "imagine/Imagine": ">=0.2.8",
    "liip/imagine-bundle": "*@dev",
    "knplabs/knp-paginator-bundle": "dev-master",
    "cbsi/doctrine2-nestedset": "dev-master",
    "exercise/htmlpurifier-bundle": "dev-master",
    "doctrine/orm": ">=2.2.3,<2.4-dev",
    "doctrine/doctrine-bundle": "1.0.*",
    "twig/extensions": "1.0.*@dev",
    "symfony/assetic-bundle": "2.1.*",
    "symfony/swiftmailer-bundle": "2.1.*",
    "symfony/monolog-bundle": "2.1.*",
    "sensio/distribution-bundle": "2.1.*",
    "sensio/framework-extra-bundle": "2.1.*",
    "sensio/generator-bundle": "2.1.*",
    "jms/security-extra-bundle": "1.2.*",
    "jms/di-extra-bundle": "1.1.*",
    "kriswallsmith/assetic": "1.1.*@dev"
},
"scripts": {
    "post-install-cmd": [
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
    ],
    "post-update-cmd": [
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
    ]
},
"extra": {
    "symfony-app-dir": "app",
    "symfony-web-dir": "web"
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-30T09:07:15.490

如果有人在 sensio 分发包 = 5 时遇到相同的错误，那么您的问题应该是[致命错误：第 16 行的 app/console 中找不到 Class 'Symfony\Component\Console\Input\ArgvInput'](https://stackoverflow.com/questions/33983632/fatal-error-class-symfony-component-console-input-argvinput-not-found-in-app)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:00:08.743

尝试更新作曲家（[https://getcomposer.org/doc/03-cli.md#self-update](https://getcomposer.org/doc/03-cli.md#self-update)）

```
composer self-update 
```

清除其缓存，对于 Windows，它位于`C:\Users\<user>\AppData\Roaming\Composer`( [https://getcomposer.org/doc/03-cli.md#composer-home](https://getcomposer.org/doc/03-cli.md#composer-home) )

然后再次运行更新。

手动删除 symfony2 缓存文件夹可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:36:32.397

您的引导文件未正确重建，composer.json 文件应该有一个脚本条目，以确保为您完成此任务（除非您使用 --no-scripts 标志运行）。

```
"scripts": {
    "post-install-cmd": [
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
    ],
    "post-update-cmd": [
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
    ]
} 
```

您可以通过在 symfony 目录中运行以下命令来手动运行构建引导文件的脚本：

```
php /vendor/sensio/distribution-bundle/Sensio/Bundle/DistributionBundle/Resources/bin/build_bootstrap.php 
```

# google-cloud-endpoints - 将 api explorer 设为私有

> ID：15382279
> 
> 赞同：9
> 
> 时间：2013-03-13T10:10:22.287
> 
> 标签：google-cloud-endpoints

是否可以完全关闭 api explorer 或限制对它的访问？

我注意到我的应用程序中的一些日志来自浏览器执行的失败请求。我的 api 仅由 Android 应用程序使用，因此它们唯一可以来自的地方是 api 资源管理器。此外，api 访问仅限于 1 个 web 和 1 个 android 客户端 ID。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T20:13:03.630

很不幸的是，不行。API 资源管理器通过使用与您的 API 关联的发现服务工作，该服务实际上不是您的后端的一部分，因此您无法为这些 URI 指定身份验证或可见性。

Discovery 服务中的方法用于使用您的应用作为基础在[APIs Explorer](https://developers.google.com/apis-explorer/?base=https://your-app-id.appspot.com/_ah/api#p/)`list`应用上生成列表：

# 发现.apis.list：

`your-app-id.appspot.com/_ah/api/discovery/v1/apis`

当有人从列表中单击其中一个 API 时，将为此检索完整的发现文档，`apiName`并`apiVersion`使用`getRest`Discovery 服务中的方法：

# 发现.apis.getRest：

`your-app-id.appspot.com/_ah/api/discovery/v1/apis/{apiName}/{apiVersion}/rest`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-01T19:42:15.493

如果您正在寻找阻止 API 执行的方法，请查看[Cloud Endpoints：控制谁可以通过 API Explorer 执行 API](https://stackoverflow.com/questions/42521424/cloud-endpoints-control-who-can-execute-api-through-api-explorer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-30T22:42:47.763

端点使身份验证变得容易，您可以获得当前用户。您应该使用身份验证来确保人们不会弄乱您的私人 API - 否则人们可能会追踪您发送的帖子类型或获取请求 - 身份验证始终是一个好主意，而不是试图让您的 API 保密。

如果您正在构建一个秘密产品并且您不希望您的竞争对手发现，您也许可以在后端和您的客户端上使用一些混淆方法，这使得 api 不可读。

同样，弄乱您的 api 的用户不应该破坏您的数据库 - 或者如果它确实 - 它应该只为愚蠢的用户破坏它。在您的客户端中有关于如何使用 api 的逻辑以便后端不会中断是一个坏主意 - 后端 api 应该照顾好自己，而不是担心它们如何或为什么使用以及谁用于什么目的。

# android - 链接以在 android 桌面上添加图标

> ID：15382280
> 
> 赞同：1
> 
> 时间：2013-03-13T10:10:31.067
> 
> 标签：android, html, web

假设我有网站`http://example.com`。现在我想在那里添加一些链接，例如“添加桌面”，它将在 android/ios 桌面上放置带有网站链接的图标。甚至有可能还是用户应该手动添加它？

# javascript - 如何在准备好的文档上隐藏一个 div，然后从 Javascript 动态调用它？

> ID：15382281
> 
> 赞同：5
> 
> 时间：2013-03-13T10:10:32.087
> 
> 标签：javascript, jquery

我正在使用此代码来隐藏我动态放置文本的 div 容器。

```
$(document).ready(function(){
     $(".slidingDiv").hide(); 
     $(".show_hide").show();

     $('.show_hide').click(function(){
         $(".slidingDiv").slideToggle();
     });
 }); 
```

我遇到的问题是我想`div`从 javascript 函数而不是预定义的点击事件触发节目。我发现这个例子与我想要的功能相匹配，但我不确定如何从 javascript 而不是点击功能触发它。

[JSFiddle 这里](http://jsfiddle.net/z9BXm/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T10:12:59.593

只需使用 css 隐藏 div

```
display:none;

.slidingDiv{
 display:none;
} 
```

并在您想要使用时显示它

```
.show()

$(".slidingDiv").show(); 
```

编辑：

在您质疑编辑后，您可以随时以编程方式触发点击事件，例如

```
function yourFunction(){
  $(".show_hide").click();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:17:13.013

在脚本中的任何时候，您都可以使用您的 id/class调用该`jQuery`对象并运行该函数。IE`div``show()`

```
var javascript = "cool";
var foo = "I'm doing stuff";
var bar = "And some more stuff";
if (javascript === "cool") 
    jQuery(".slidingDiv").show();
else 
    $(".slidingDiv").show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-31T04:54:51.313

```
 <script>
    $(document).ready(function(){
      $("input[type='file']").on("change", function () {
         if(this.files[0].size > 1000000) //file size less than 1MB { 
             {

                $("#fileAlert").show(); //calling a bootstrap 4 alert
             }

          $(this).val('');
         }
        });
    });
</script>
```

# ruby-on-rails-3 - 使用 capistrano 部署 database.yml 时出错

> ID：15382284
> 
> 赞同：2
> 
> 时间：2013-03-13T10:10:39.210
> 
> 标签：ruby-on-rails-3, deployment, capistrano

我已添加`config/database.yml`到我的`.gitignore`文件中。并将其添加到 deploy.rb 文件

```
namespace(:customs) do
   task :symlink_db, :roles => :app do
    run "cp #{shared_path}/config/database.yml #{release_path}/config/database.yml"
  end
end
after "deploy:update_code", "customs:symlink_db" 
```

但现在我跑了`cap deploy`。我得到错误

`No such file or directory - /var/www/XXXX/releases/20130313100825/config/database.yml`

我如何解决它 ？

注意：在此之前已经发布了。我对应用程序进行了一些更改并再次部署它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:56:04.673

您想使用符号链接，因为它不会关心源文件是否还没有。

```
task :symlink_db_yml do
  run "ln -s #{shared_path}/config/database.yml #{release_path}/config/database.yml"
end 
```

并且您想在 bundle:install 之前执行它，因为新的应用程序目录不是在 deploy:update_code 阶段创建的。

```
before 'bundle:install', 'customs:symlink_db_yml' 
```

# c - 有没有办法回到 typedef 枚举的字符串？

> ID：15382287
> 
> 赞同：0
> 
> 时间：2013-03-13T10:10:46.173
> 
> 标签：c, enums

我是 C 新手，我发现枚举非常好。我的程序获取一个字符串，并使用枚举来处理案例，然后（有时）我需要发回一个与枚举表中的字符串匹配的字符串。有没有办法使用枚举或我应该使用查找表？[像这样的东西](https://stackoverflow.com/questions/4817231/is-there-an-easy-way-to-convert-a-c-sharp-enum-to-a-string-and-back-again "像这样的东西")

```
typedef enum    {
    string1,
    string2,
    string3,
    string4,
    BADKEY                
} strings;

function(string1); //will send the integer, 
                   //but would love to be able to send the string.

function(char *string) {
...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T10:11:18.727

不，没有办法自动得到这个。您必须实现一种方法，查找表是一种解决方案。

枚举值的名称不是“字符串”，它们只是函数和变量名称等符号；它们在代码生成中没有任何作用。一旦代码运行，它都是没有名字的机器代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:41:09.140

仅作记录，您可以使用预处理器的“stringify”运算符。

```
#define MAKE_STR(enumMember) #enumMember 
```

它的作用是将 enumMember 替换为“enumMember”，因此您可以像使用字符串一样使用它。

例子：

```
printf("The value of %s is %d", MAKE_STR(string1), string1); 
```

**编辑**请注意，尽管 stringify 所做的只是用引号括住它传递的任何内容，因此它实际上会将 # 之后写的任何内容字符串化。

# c# - 多线程 COMObject 和 UI 线程 (C#)

> ID：15382288
> 
> 赞同：3
> 
> 时间：2013-03-13T10:10:47.183
> 
> 标签：c#, multithreading, user-interface, com

这是我在这里的第一篇文章，因为实际上我通常用你可以在这里找到的很棒的帖子数据库来解决我的所有问题。但我现在实际上被困住了：

我正在开发一个遵循 MVVM 的项目，包括一个 COM 对象。正如我在研究期间所读到的，我知道 COM 对象只能从创建它的线程访问。我的 COM 对象实现了以下接口

```
interface IComUpdate
{
    void Update();
} 
```

因此，当我创建我的 COM 对象时，每次有更新（我不知道什么时候，它是随机的）时，COM 服务器都会调用`Update()`我实现的 COM 对象类。

我的目标是创建一个不同的线程，命名一个 COM 对象线程，其中 COM 对象独立于我的 UI 线程存在，所以每次有更新时，我都会在与 UI 线程不同的线程中处理它。

实际上它正在工作：

在 ViewModel 的开头，我创建了一个特定对象的集合。

这个对象，我们称之为它`ModelObj`，是模型的一部分，它定义了一个静态构造函数，应用程序除了初始化一些变量外，还为 COM 对象创建并启动一个新线程：

```
Thread t = new System.Threading.Thread(() =>
           {
               System.Threading.Thread.CurrentThread.Name = "Thread of COM Object";
               IComUpdate myComObj;
               myComObj = (IComUpdate)Activator.CreateInstance(blabla);
               Application.Run();
           });

t.SetApartmentState(ApartmentState.STA);
t.Start(); 
```

它实际上工作得很好，在`Update()`我的 COM 对象的实现中，我实际上看到线程是刚刚创建的线程，而不是 UI 线程。

现在的问题是：`ModelObj`我创建的这个实现了`INotifyPropertyChanged`接口。

我的想法是：每次 COM 对象收到更新时，我从 COM 对象线程处理数据，并`ModelObj`从该线程更新我的实例的某些属性，因此这些属性将引发我`ModelObj`和 UI 线程的属性更改将更新用户界面。

如果 UI 更新花费了太多时间，我可能会错过一些`Update()`出现在屏幕上的信息，但 COM 对象会将它们记录在我的`ModelObj`实例中，因此 UI 捕获所有更新并不是很重要，我只是不想要 COM 对象必须等待 UI 更新才能再次调用。

我阅读了大量帖子，然后认为我`RaisePropertyChanged("property")`会失败。

实际上，即使在 COM 对象的线程中，`RaisePropertyChanged`成功执行，所以跟踪我的代码，我看到它切换到我做的 ViewModel 程序集

```
// Here I'm still in the thread of my COM object!
base.NotifyOfPropertyChange<string>(() => this.property) 
```

然后是 UI 更新。

注意：*我使用 Caliburn Micro 在 WPF 中的 View 和 ViewModel 之间进行绑定。*

所以我无法在此之后追踪`base.NotifyOfPropertyChange<string>(() => this.property)`。也许 Caliburn 处理线程切换，这不是我的问题。

我可以说的是，我的 COM 对象线程等待 UI 更新以到达 my 之后的下一条指令`RaisePropertyChanged("property")`，所以它与 UI 线程完成整个工作完全一样。

我希望我的 COM 对象线程更新我的`ModelObj`，它将向 UI 发送一条要更新的消息（因为其中的某些字段`ModelObj`已更改）并**立即**继续，而不知道 UI 是否实际更新。

有人知道这种行为吗？

非常感谢你。

**＃＃＃＃更新＃＃＃＃**

谢谢大家这么快的回答。

我实际上按照 Zdeslav Vojkovic 的建议做了：

您应该始终从 GUI 线程更新 GUI

为了完整起见，这是我的做法：

因为我的视图是完整的 WPF，后面没有代码我没有任何控件或表单可以从中调用 BeginInvoke，所以在我的 ModelObj 的静态构造函数中，我从 UI 线程构建了一个不可见的控件，以便能够在其上调用 BeginInvoke .

所以我宣布它：

```
public static Control mInvokeControl;
delegate void MyDelegate();
private MyDelegate _NotifyDelegate; 
```

然后在我的对象的静态构造函数中执行此操作：

```
mInvokeControl = new Control();
mInvokeControl.CreateControl(); 
```

在普通构造函数中，我以这种方式初始化委托：

```
_NotifyDelegate = new MyDelegate(this.NotifyByInvoke); 
```

然后在我以这种方式使用它之后：

```
ModelObj.mInvokeControl.BeginInvoke(this._NotifyDelegate ); 
```

方法是：

```
public void NotifyByInvoke()
{
    RaisePropertyChanged("Update");
} 
```

一切正常！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:29:36.400

> COMObj 只能从创建它的线程访问

这不是真的。它取决于对象单元模型，但通常您可以从任何线程访问它，它将在同一线程上调用或编组到适当的线程。

我相信您的问题是您从后台线程更新 GUI，这是一个主要的禁忌。您应该始终从 GUI 线程更新 GUI。当您更新模型对象时，它仍然发生在后台线程上，并且`INotifyPropertyChanged`接口事件在该线程上触发。

您需要使用类似这样的东西将模型更新同步到 GUI 线程（WinForms，而不是 WPF - 在 WPF 中您应该使用`frm.Dispatcher.BeginInvoke`，但问题是一样的）：

私人委托无效 ExecuteActionHandler（动作动作）；

```
public static void ExecuteOnUiThread(this Form form, Action action)
{
  if (form.InvokeRequired) { // we are not on UI thread
    // Invoke or BeginInvoke, depending on what you need
    // but you said ' and continue immediatly' so BeginInvoke it is 
    form.BeginInvoke(new ExecuteActionHandler(ExecuteOnUiThread), action);
  }
  else { // we are on UI thread so just execute the action
    action();
  }
} 
```

还有[另一个类似问题的问题](https://stackoverflow.com/a/15343124/1663919)，我在那里提供了更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:11:23.093

我不知道您处理了多少数据，或者执行 GUI 部分需要多少时间。您也可以考虑使用锁定队列。您可以使用 ModelObj 中的队列将新任务排入队列。你用你得到的一切来做这件事。然后你可能有一个计时器线程（在 GUI 线程上）。

在这里您只需检查锁定的队列，是否有一些新数据要显示在 GUI 上。您可以在本地将完整列表出列。然后您还可以检查是否有多个数据要显示在一个组件上。通过这种方式，您可以跳过已经有较新更新的更新。而且您跳过了调用 gui 线程来执行操作的时间。您可以一次进行多个 GUI 更新。如果您有太多事情要做，您可以只出列特定数量的项目，让 GUI 对用户交互做出反应。但是，您需要检查队列是否不断增长。

# facebook - 带有事件 CREATOR 的 FQL 多查询不再起作用

> ID：15382290
> 
> 赞同：2
> 
> 时间：2013-03-13T10:10:53.247
> 
> 标签：facebook, facebook-fql, fql.multiquery

我有几个 iOS 应用程序可以进行 FQL 多查询，以获取某个创建者的事件信息。

```
query1: "SELECT eid, uid FROM event_member     WHERE uid = %@"

query2: "SELECT eid, name, venue, location, start_time, creator FROM event WHERE eid IN (SELECT eid FROM #query1) AND start_time>%@ AND creator = %@" 
```

直到昨天，2013 年 3 月 12 日，这工作得很好。现在它返回一个“未知错误”。

如果我将 query2 更改为

`"SELECT eid, name, venue, location, start_time, creator FROM event WHERE eid IN (SELECT eid FROM #query1) AND start_time>%@"`

它再次起作用，但显然我必须更新所有应用程序才能更改此查询，我很想规避这一点。

这是设计使然吗？

# c# - 如何在类中没有静态表单的情况下传递表单引用？

> ID：15382291
> 
> 赞同：1
> 
> 时间：2013-03-13T10:10:54.007
> 
> 标签：c#, .net

我的标题可能没有任何意义。我将通过向您展示一个示例来尝试将我的问题翻译成英语，因为我不知道如何措辞。*（英语是我的第三语言）*

所以基本上，我希望能够在我的课堂上做到这一点：

```
public void beheerToegang(ref Form frm)
{    

} 
```

而不是这个*（静态引用我的表单的实际名称）*：

```
public void beheerToegang(ref frmInkomsteBlad frm)
{    

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:52:07.630

好的，我看到有关您遇到的问题的图片。

首先，您不需要在方法中添加 ref（并考虑更好的命名）。它已经是引用的对象

```
public void beheerToegang(Form frm)
{    

} 
```

接下来，您可以从您的自定义表单中按原样使用该方法，例如（未测试的代码）：

```
frmInkomsteBlad form1 = new frmInkomsteBlad();
beheerToegang(form1); 
```

然后像这样访问它：

```
public void beheerToegang(Form frm)
{    
  string formTitle = frm.Text;
} 
```

但是，您无法访问自定义表单 frmInkomsteBlad 中定义的属性/字段。例子：

```
public class frmInkomsteBlad : Form{
  public string CustomString{get;set;} // this property cannot be accessed
} 
```

但是有一些方法可以解决这个问题，首先是使用类型转换：

```
public void beheerToegang(Form frm)
{   
  if(frm is frmInkomsteBlad){
    frmInkomsteBlad typeCastedForm = (frmInkomsteBlad)frm;
    string customString = typeCastedForm.CustomString;
  }
} 
```

上面的例子是不好的做法，但很容易实现。如果您更关心更好的实践，请考虑改用[接口](http://msdn.microsoft.com/en-us/library/87d83y5b%28v=vs.80%29.aspx)。例子：

```
public interface ICustomForm{
  string Title{get;set;}
  string CustomString{get;set;}
  object CustomObject{get;set;}
} 
```

在您的 frmInkomsteBlad 表单中实现它。

```
public class frmInkomsteBlad : Form, ICustomForm{
  public string Title{
    get{
     return this.Text;
    }
    set{
     this.Text = value;
    }
  }

  //other implementation here
} 
```

然后你可以像这样使用它：

```
public void beheerToegang(ICustomForm frm)
{   
  string customString = frm.CustomString;
  string title = frm.Title;
  object customObject = frm.CustomObject;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:17:58.707

你能解释一下你的问题吗？为什么要使用关键字 ref？表单是一个对象，所以如果你想操作它，你可以使用

```
public void beheerToegang(Form frm) 
```

问题是“如何调用”方法 beheerToegang 还是其他问题。我不清楚吗？看来您是荷兰人，如果您愿意，可以用荷兰语提问。这是我的母语。

如果问题只是调用该方法，那么您可以使用：

```
beheerToegang(ref yourformname); 
```

# android - Android：TextView 能否仅使用 XML 显示文本文件（资产或原始文件）的内容？

> ID：15382295
> 
> 赞同：0
> 
> 时间：2013-03-13T10:11:17.067
> 
> 标签：android, textview, android-assets

我将拥有大型文本文件（隐私声明等，可能不超过 100k），我希望将它们放在 /assets 或 /raw 文件夹中，而不是放在我的 @strings 文件中。

另外，我想从 xml 将它们加载到文本视图中，我知道我可以通过编程方式完成。

我知道的一种方法是扩展文本视图并声明一个样式属性，解析它并从后面的代码中做我需要的东西。

但是在 android 中是否有本地方式来做到这一点？无需我为它编写逻辑？这看起来并不罕见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-06T10:14:15.493

要显示文件内容，您可以这样做：“代码”是目录的名称，FILE_RECEIVE 是要打开的文件的名称。

```
 InputStream ss;
    String code;
    String content = "";
    try{
        files = assetManager.list("Codes");
        ss=getAssets().open("Codes/"+FILE_RECEIVE);
        content= convert_to_String(ss);
    }
    catch (FileNotFoundException e)
    {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

public String convert_to_String(InputStream ss)
{

    BufferedReader bufferedReader=null;
    StringBuilder stringBuilder=new StringBuilder();
    String line;
    try{
        bufferedReader= new BufferedReader(new InputStreamReader(ss));
        while ((line=bufferedReader.readLine())!=null)
        {    stringBuilder.append("\n");
            stringBuilder.append(line);
        }
    }catch (IOException e){
        e.printStackTrace();
    } finally {
        if (bufferedReader != null) {
            try {
                bufferedReader.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
    return  stringBuilder.toString();

} 
```

# linux - 如何在没有中间文件夹的情况下将文件添加到 zip 存档

> ID：15382303
> 
> 赞同：4
> 
> 时间：2013-03-13T10:11:39.557
> 
> 标签：linux, bash, command-line, zip

我`zip`在 bash 脚本中使用程序，我想创建一个包含文件夹中所有文件的存档，而不将文件夹本身添加到存档中。

我有这样的文件：

```
script.sh
files/
files/1
files/2 
```

我在 script.sh 中使用这个命令

```
zip -q -9 -r arch.zip files/* 
```

但这会在存档中创建一个文件夹，`files`我想直接在存档的根目录中获取文件。`1``2`

如何修改传递给`zip`命令的参数以防止它添加`files`到此存档中？

谢谢

固定的 ：

[这里](https://stackoverflow.com/questions/11317928/how-to-zip-folder-without-full-path?rq=1)和[这里](https://stackoverflow.com/questions/9710482/how-to-create-a-zip-file-without-entire-directory-structure?rq=1)

显然，SO搜索引擎在发布问题时比以前更有效率......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:34:13.890

```
cd files
zip -q -9 -r ../arch.zip * 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-01T02:14:38.607

你应该使用 -j 键。试试这个方法：

zip -q -9 -j arch.zip 文件/*

# osx-mountain-lion - 如何在 Mountain Lion 上安装 PL/R？搜索错误的路径？

> ID：15382304
> 
> 赞同：1
> 
> 时间：2013-03-13T10:11:42.987
> 
> 标签：osx-mountain-lion, xcode4.6, command-line-tool, plr

我正在尝试在 Mountain Lion 10.8.2 上安装 PL/R，我已经从 r-project 安装了 R 2.15.3，从 KyngChaos 安装了 PostgreSQL 9.1。我从[http://www.joeconway.com/plr/](http://www.joeconway.com/plr/)获得了 PL/R 8.3.0.14 。我已将展开的文件夹放入 /usr/local/pgsql/share/contrib 并 cd'd 进入该文件夹。

环境变量 $R_HOME 和 $CUSTOM_COPT 按照[http://www.joeconway.com/web/guest/pl/r/-/wiki/Main/Installation_Mac](http://www.joeconway.com/web/guest/pl/r/-/wiki/Main/Installation_Mac)中的说明设置，将它们写入 .bash_profile，并添加 /library /frameworks/r.framework/resources/bin 通过写入同一个文件到我的路径。

XCode 4.6 和命令行工具已安装。标准 C 头文件有多个副本，包括 stdio.h，例如 /usr/include/stdio.h。

下一步似乎是：

```
DiMac:plr duncan$ make    
Makefile:40: ../../src/Makefile.global: No such file or directory
Makefile:41: /contrib/contrib-global.mk: No such file or directory
make: *** No rule to make target `/contrib/contrib-global.mk'.  Stop. 
```

那没有用，然后我尝试：

```
DiMac:plr duncan$ make USE_PGXS=1
gcc -Os -arch x86_64 -isysroot /Developer/SDKs/MacOSX10.6.sdk -D_FILE_OFFSET_BITS=64 -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -Wformat-security -fno-strict-aliasing -fwrapv -arch x86_64  -I"." -I"-I/library/frameworks/r.framework/resources/include" -I/library/frameworks/r.framework/resources/include -I. -I. -I/usr/local/pgsql-9.1/include/server -I/usr/local/pgsql-9.1/include/internal -I/usr/include/libxml2 -DPKGLIBDIR=\"/usr/local/pgsql-9.1/lib\" -DDLSUFFIX=\".so\" -DR_HOME_DEFAULT=\"/library/frameworks/r.framework/resources\"  -c -o plr.o plr.c
In file included from /usr/local/pgsql-9.1/include/server/postgres.h:47,
                 from plr.h:38,
                 from plr.c:33:
/usr/local/pgsql-9.1/include/server/c.h:67:19: error: stdio.h: No such file or directory
/usr/local/pgsql-9.1/include/server/c.h:68:20: error: stdlib.h: No such file or directory
... 
```

然后页面更多的错误。

在我看来，*make*在错误的位置寻找标准头文件并且找不到它们。从我的阅读来看，该标志似乎是在`-isysroot`告诉*gcc*通过预先添加正常搜索路径来查找头文件使用`/developer.../macosx10.6.sdk`路径，并且我的机器上不存在此路径，我认为这是当前 Xcode 版本的标准。

所以，问题：

这个标志是由 /plr 中的*Makefile*以某种方式设置的，还是在其他地方设置的？无论哪种方式，我如何更改它以使*make*找到它需要的头文件？如果改变它确实是正确的做法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:35:25.693

我已经设法解决了我自己的问题。也许有人可以帮忙整理一下？

`make USE_PGXS=1`格式化一系列标志，然后使用计算出的标志调用*gcc*。因此，我复制并粘贴了`gcc...`上面的行，然后将路径更改`-isysroot`为找到标准头文件的路径。然后该命令正常运行，并编译它被告知的文件。

我不得不这样做几次，每次编译每个文件，直到完整的集合存在，然后重复练习 using `make install`。

在多次运行之后，我最终在正确的位置找到了我需要的共享对象，然后按照 Joe Conway 的 wiki 中的说明继续。

现在效果很好。很高兴知道如何永久停止/更改*-isysroot*设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T00:06:20.473

我使用 MacPorts 的 postgresql92 +python +perl 变体（在我自己之前编译 PostgreSQL 之后），它在我最近在三台计算机上完成的每个版本中都能完美运行：http: [//iangow.wordpress.com/2013/06/26 /install-plr-on-os-x-10-8-4-using-macports/](http://iangow.wordpress.com/2013/06/26/install-plr-on-os-x-10-8-4-using-macports/)（这里早期过程的描述：http: [//iangow.wordpress.com/2012/05/21/plr-on-os- x/](http://iangow.wordpress.com/2012/05/21/plr-on-os-x/) )。

# ruby-on-rails - Rails - 在 Flash 通知中传递变量

> ID：15382306
> 
> 赞同：1
> 
> 时间：2013-03-13T10:11:47.120
> 
> 标签：ruby-on-rails, ruby, variables

我一直在尝试在创建帖子时出现的 Flash 通知中添加一个变量`#{variable}`

但我一定遗漏了一些东西，因为我收到的唯一消息是“#{variable}”。

这是我的控制器：

```
 def create

    @participant = Participant.new(params[:participant])

    respond_to do |format|
      if @participant.save
        mail = params[:email]
        format.html { redirect_to @participant, notice: 'Thanks, We will be sending out instructions to:  #{mail}' }
        format.json { render json: @participant, status: :created, location: @participant }
      else
        format.html { render action: "new" }
        format.json { render json: @participant.errors, status: :unprocessable_entity }
      end
    end
  end 
```

我也一直在尝试将@participants 作为变量，但是除了消息中的实际“#{@participants}”之外，我什么也没得到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T10:13:13.673

我想您在参与者表格中填写邮件，因此请尝试：

```
 email = params[:participant][:mail] 
```

并用`""`代替`''`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T10:50:56.030

您需要用双引号而不是单引号将字符串括起来。

[双引号实际上允许字符串插值](http://en.wikibooks.org/wiki/Ruby_Programming/Strings#Double_quotes)。这就是你想要的。

所以写：

```
format.html { redirect_to @participant, notice: "Thanks, We will be sending out instructions to:  #{mail}" } 
```

# android - 隐藏标题栏后不显示 Web 视图

> ID：15382310
> 
> 赞同：-2
> 
> 时间：2013-03-13T10:11:59.907
> 
> 标签：android

我有一个android应用程序，我想在其中隐藏我在隐藏标题栏的方法中`TitleBar`使用了以下代码已解决但是是空白的，如果我刷新页面den将显示内容是否有任何解决方案?. 提前致谢`onCreate``activity.java` `requestWindowFeature(Window.FEATURE_NO_TITLE);``webview``webView`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:13:26.027

放

```
android:theme="@android:style/Theme.NoTitleBar" 
```

在`manifest`文件活动标签而不是`onCreate()`方法中。

这在我的应用程序中正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:14:21.900

```
this.requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

您应该在 setContentView() 方法之前调用它。

编辑：

在不知道*如何*以及*何时*创建 webview 的情况下，很难猜测发生了什么，但您始终可以`WebView.reload()`在创建 webview 之后执行操作，因为这显然可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:18:41.307

```
setTitle(""); 
```

在你的 oncreate 方法..

# python - 在条形图中对齐 x 轴刻度

> ID：15382311
> 
> 赞同：2
> 
> 时间：2013-03-13T10:12:00.863
> 
> 标签：python, matplotlib

我有一个看起来像这样的条形图：

![在此处输入图像描述](../Images/f1b48851675f7e7b7d3713ab7eed0d5c.png)

如何移动 x 轴标签，使它们在相应条形下方居中？我正在尝试在子图中执行此操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T10:20:41.710

您需要`set_xticks()`为您的轴使用适当间隔的数字数组（您可能已经在代码中，但未正确设置）的函数，或者您可以`ax.bar(x, y, align='center')`在设置条形图时使用该命令。请参阅以下答案：

[matplotlib / Python中条形图的单独标记条](https://stackoverflow.com/questions/2177504/individually-labeled-bars-for-bar-graphs-in-matplotlib-python)

# ruby-on-rails - Salesforce.com 与 ruby on rails

> ID：15382312
> 
> 赞同：0
> 
> 时间：2013-03-13T10:12:00.867
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, salesforce

我是salesfore和RoR的新手。但是我需要使用visualforce来设计salesforce。所以我想知道，是否有可能在 UI 上的 salesforce.com 网站内的 rails 上使用 ruby​​。

如果有任何可能意味着它对我的设计非常有用。请您的建议..！

感谢您的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:24:20.003

您需要在visualforce ie apex 中为salesforce.com 编写UI。您可以拥有外部网站并在 salesforce.com 内设置 iframe

# android - cw 无限适配器的 java.lang.IllegalStateException

> ID：15382315
> 
> 赞同：1
> 
> 时间：2013-03-13T10:12:10.163
> 
> 标签：android, listview, commonsware-cwac

首先感谢`CommonsWare`这个伟大的组件。但我有一个问题让我很伤心。即--> **java.lang.IllegalStateException: 适配器的内容发生了变化但是ListView没有收到通知。确保适配器的内容不是从后台线程修改的，而只是从 UI 线程修改的。**

以上是我有时会遇到的错误，但有时不会。以下是我的代码。

```
 protected boolean cacheInBackground() {

                  JSONObject json = null;
                  if(results != null)
                     results.clear();

                  results = new ArrayList<DataSource>();// results is the global variable which is List<DataSource> results; and initialized it here.

                  List<NameValuePair> params = new ArrayList<NameValuePair>();

                   params.add(new BasicNameValuePair("postdata",passeddata));
                   params.add(new BasicNameValuePair("currentpage", (++index)+""));

            json = jParser.makeHttpRequest(urlphp, "POST", params);   // Here is the line that makes http request for paginated results based on index and gets the response.
                  try {
                        int success = json.getInt("success");

                        if (success == 1) {

                            rowcount = json.getInt("numrows");

                            Log.d("row count value is>>>>",""+rowcount); // Here rowcount is the total rows in the database

                            products = json.getJSONArray("products");

                            // looping through All Products
                            for (int i = 0; i < products.length(); i++) {
                                JSONObject c = products.getJSONObject(i);

                              // Storing each json item in variable
                            String id = c.getString(ID);
                            String price = c.getString(PRICE);
                            String name = c.getString(NAME);

                DataSource data = new DataSource(id,name,price);

                            results.add(data);

                        }
                    }else{
                          // product not found

                        successpass = success;
                        message = json.getString("message");

                          return false;

                      }
                  } catch (JSONException e) {
                      e.printStackTrace();
                  }

                  return(getWrappedAdapter().getCount()<rowcount);

          }

     @Override
      protected void appendCachedData() {
        if (getWrappedAdapter().getCount()<rowcount) {
          @SuppressWarnings("unchecked")
          CustomListAdapter adapter = (CustomListAdapter)getWrappedAdapter();

          //ArrayAdapter<Integer> a=(ArrayAdapter<Integer>)getWrappedAdapter();

            for (DataSource d : results){
                adapter.add(d);
            }

        }else{

        }
      } 
```

正如您在代码中看到的，我将数据存储到 Bean 类对象中，然后将每个对象存储在 List 中。我已经实现了 CustomListView 以在列表中显示详细信息。

然而，有时会出现上述错误，有时不会。对此进行了很多搜索，发现了[这个](https://github.com/commonsguy/cwac-endless/issues/19)和其他一些一般的适配器问题，比如[这个](https://stackoverflow.com/questions/3132021/android-listview-illegalstateexception-the-content-of-the-adapter-has-changed)等，但是即使没有点击`placeholder`，甚至没有调用，我也会收到这个错误`notifyDataSetChanged()`。正如您在我的代码中看到的那样，我从未调用过 notifyDataSetChanged()，但为什么会出现此错误？我的实现编码有问题吗？有人可以帮我解决这个问题吗？当我将这个组件深度集成到我的应用程序中时，我现在害怕寻找替代方案。

**下面是堆栈跟踪：**

```
03-13 16:12:07.662: E/AndroidRuntime(494): FATAL EXCEPTION: main
03-13 16:12:07.662: E/AndroidRuntime(494): java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(2130968671, class android.widget.ListView) with Adapter(class com.example.onlinedata.ORAdsList$CustomisedEndlessAdapter)]
03-13 16:12:07.662: E/AndroidRuntime(494):  at android.widget.ListView.layoutChildren(ListView.java:1492)
03-13 16:12:07.662: E/AndroidRuntime(494):  at android.widget.AbsListView.onLayout(AbsListView.java:1147)
03-13 16:12:07.662: E/AndroidRuntime(494):  at android.view.View.layout(View.java:7035)
03-13 16:12:07.662: E/AndroidRuntime(494):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1249)
03-13 16:12:07.662: E/AndroidRuntime(494):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1125)
03-13 16:12:07.662: E/AndroidRuntime(494):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1042)
03-13 16:12:07.662: E/AndroidRuntime(494):  at android.view.View.layout(View.java:7035)
03-13 16:12:07.662: E/AndroidRuntime(494):  at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
03-13 16:12:07.662: E/AndroidRuntime(494):  at android.view.View.layout(View.java:7035)
03-13 16:12:07.662: E/AndroidRuntime(494):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1249)
03-13 16:12:07.662: E/AndroidRuntime(494):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1125)
03-13 16:12:07.662: E/AndroidRuntime(494):  at android.widget.LinearLayout.onLayout(LinearLayout.java:1042)
03-13 16:12:07.662: E/AndroidRuntime(494):  at android.view.View.layout(View.java:7035)
03-13 16:12:07.662: E/AndroidRuntime(494):  at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
03-13 16:12:07.662: E/AndroidRuntime(494):  at android.view.View.layout(View.java:7035)
03-13 16:12:07.662: E/AndroidRuntime(494):  at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
03-13 16:12:07.662: E/AndroidRuntime(494):  at android.view.View.layout(View.java:7035)
03-13 16:12:07.662: E/AndroidRuntime(494):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1045)
03-13 16:12:07.662: E/AndroidRuntime(494):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
03-13 16:12:07.662: E/AndroidRuntime(494):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-13 16:12:07.662: E/AndroidRuntime(494):  at android.os.Looper.loop(Looper.java:123)
03-13 16:12:07.662: E/AndroidRuntime(494):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-13 16:12:07.662: E/AndroidRuntime(494):  at java.lang.reflect.Method.invokeNative(Native Method)
03-13 16:12:07.662: E/AndroidRuntime(494):  at java.lang.reflect.Method.invoke(Method.java:521)
03-13 16:12:07.662: E/AndroidRuntime(494):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-13 16:12:07.662: E/AndroidRuntime(494):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-13 16:12:07.662: E/AndroidRuntime(494):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:43:03.670

终于有人给了我一个可重现的测试用例，这个 bug 现在从 v1.2.1 开始修复。获取一个新的 repo 副本，或者一个新的 JAR。在 v1.2.0 上不需要更改代码。

# c++ - winsock 在哪里存储套接字的 IP 地址？

> ID：15382316
> 
> 赞同：6
> 
> 时间：2013-03-13T10:12:11.613
> 
> 标签：c++, winsock

假设我有一个简单的 winsock 服务器，它有一个监听套接字，然后当一个连接被接受时，它将套接字存储在一个套接字数组中（以允许多个连接）。如何获取特定连接的 IP 地址？它是否存储在套接字句柄中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T10:21:03.783

只要套接字保持连接，您就可以获得自己的套接字地址和对等地址。

**getsockname**将为您提供本地名称（即来自管道的一侧） **getpeername**将为您提供对等名称（即管道的远端）

此信息仅在套接字打开/连接时可用，因此如果在对等断开后可以使用它，最好将其存储在某个地方。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T10:16:20.333

是的，它存储在`socketaddr_in`结构中，您可以使用以下方法提取它：

```
SOCKADDR_IN client_info = {0};
int addrsize = sizeof(client_info);

// get it during the accept call
SOCKET client_sock = accept(serv, (struct sockaddr*)&client_info, &addrsize);

// or get it from the socket itself at any time
getpeername(client_sock, &client_info, sizeof(client_info));

char *ip = inet_ntoa(client_info.sin_addr);

printf("%s", ip); 
```

# css - 添加内容时背景不显示？

> ID：15382323
> 
> 赞同：1
> 
> 时间：2013-03-13T10:12:31.907
> 
> 标签：css

**出于某种原因，当我向.left-section**添加宽度和高度时，**.section-page-layout-container**不会展开并显示背景，但是如果我向**.section-page-layout-container**添加高度，则背景渐变完美地重复，每个像素都被填充。

我尝试弄乱代码，但似乎没有任何效果。一定是另一个愚蠢的错误。

希望各位好心人能帮帮我:)

提前致谢！

> 我的 HTML

```
 <section class="section-page-layout-container">
        <div class="section-page-layout">
            <div class="left-section">
                <header>

                </header>
            </div>
            <div class="right-module-section">

            </div>
        </div>
    </section>
    <div class="clear"></div> 
```

> 我的 CSS

```
.section-page-layout-container {
    background:#984B09;
    background: url('../img/section-page-oj_gradient-background.png') repeat-y;
    background-size:contain;
    width: 100%;
}
.section-page-layout {
    width: 1280px;
    position: relative;
    margin: 0 auto;
    height: auto;
}
.left-section {
    width: 585px;
    height: 500px;
    background: #000000;
    float: left;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T10:18:21.690

使用溢出：隐藏

```
.section-page-layout-container {
    background:#984B09;
    background: url('../img/section-page-oj_gradient-background.png') repeat-y;
    background-size:contain;
    width: 100%;
    overflow: hidden;
} 
```

当您在对象内浮动对象时，容器会折叠，这就是您需要 clearfix 的原因

# go - cgo 和 pkg-config

> ID：15382325
> 
> 赞同：0
> 
> 时间：2013-03-13T10:12:37.387
> 
> 标签：go, graphicsmagick, cgo

我想用 cgo 运行 GraphicsMagick。

```
/*
#cgo pkg-config: GraphicsMagick-config

#include <magick/api.h>

static int gm(int argc, char **argv) {
    int status;
    status = GMCommand(argc, argv);
    return 1-status;
}
*/ 
```

然后我运行“安装”，它说：

```
# pkg-config --cflags GraphicsMagick-config
Package GraphicsMagick-config was not found in the pkg-config search path.
Perhaps you should add the directory containing `GraphicsMagick-config.pc'
to the PKG_CONFIG_PATH environment variable
No package 'GraphicsMagick-config' found
exit status 1 
```

但我在 shell 中运行“pkg-config GraphicsMagick-config”，没关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:03:00.917

该`GraphicsMagick-config`脚本是一个单独的程序，而不是一个 pkg-config 资源，它解释了这个问题。

此外，使用非选项参数运行 pkg-config 似乎会失败而不会打印错误消息，这可能会让您感到困惑。

但是，除了这个脚本之外，该库还`GraphicsMagick.pc`为 pkg-config 安装了一个数据文件。所以你应该能够让你的代码运行：

```
#cgo pkg-config: GraphicsMagick 
```

# ruby-on-rails - rbenv：从 RVM 移动到 rbenv 后，在 Jenkins 中找不到命令执行 shell

> ID：15382331
> 
> 赞同：5
> 
> 时间：2013-03-13T10:12:57.963
> 
> 标签：ruby-on-rails, ruby, jenkins, rbenv

我从 Ubuntu 服务器上的 RVM 迁移到 rbenv。

当我使用 RVM 时，使用 bundle 没有问题。移至 rbenv 后，我在 Jenkins 的执行 shell 中收到“找不到命令”错误。

我内爆并删除了 RVM，并从 ~/.bashrc' 中删除了所有与 RVM 相关的行。使用后我仍然收到此错误：

```
rvm implode
rm ~/.rvm -rf
rm ~/.rvmrc 

gem install bundler
echo 'export PATH="$HOME/.rbenv/bin:$PATH"' >> ~/.bashrc
echo 'eval "$(rbenv init -)"' >> ~/.bashrc

. ~/.bashrc

rbenv versions

jenkins@testserver:~/jobs/myjob/workspace$ rbenv versions

* 1.9.3-p374 (set by RBENV_VERSION environment variable) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T20:55:47.527

您似乎已经在您的 shell 中正确安装了 rbenv。但是，如果 Jenkins 也没有`~/.bashrc`为您提供资源，它就不会知道您的系统上有 rbenv。因此，在 Jenkins 中，您必须确保执行命令的 PATH 还包括`$HOME/.rbenv/bin`和`$HOME/.rbenv/shims`.

`eval "$(rbenv init -)"`在 Jenkins 中不需要使用；这仅对交互式 shell 有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-16T02:10:59.597

@mislav 的回答可能是正确的，但实际上对我有用的是：

```
sh '''
#!/bin/bash
export PATH=$PATH:/usr/local/bin:$HOME/.rbenv/bin:$HOME/.rbenv/shims
eval "$(rbenv init -)"
rbenv local
rbenv rehash
''' 
```

事实上，我并没有看到 rbenv`/usr/local/bin`在我的`$PATH`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-05T15:07:53.537

我们正在做以下事情

```
sh '''
#!/bin/bash
source ~/buildmac-init

bundle update
bundle exec fastlane build
''' 
```

在这个`buildmac-init`文件中（在其他变量中）：

```
...
export RBENV_ROOT=/usr/local/var/rbenv
if which rbenv > /dev/null; then eval "$(rbenv init -)"; fi
... 
```

# python - Python：如何在停止后刷新 QLCDNumbers + 再次发射

> ID：15382332
> 
> 赞同：2
> 
> 时间：2013-03-13T10:12:58.563
> 
> 标签：python, pyqt

我想问在我开始一些措施后如何刷新 QLCDNumbers。我创建了一个 GUI 线程来将信号连接到 QLCDNumbers，如下所示：

```
class BtDialog(QtGui.QDialog, Dlg):
  def __init__(self):
    QtGui.QDialog.__init__(self)
    self.setupUi(self)
    self.thread = WorkerThread()

    #Configure slots
    self.connect(self.startButton, QtCore.SIGNAL("clicked()"), self.onStart)
    self.connect(self.stopButton, QtCore.SIGNAL("clicked()"), self.onStop)

    #QLCDNumber Slot
    self.connect(self.thread, self.thread.voltage, self.lcdVoltage.display)

 def onStart(self):
    self.thread.start()

 def onStop(self):
     self.emit(self.thread.voltage, 0) #Trying to refresh
     abort() 
```

这里我连接了两个按钮，一个用于启动工作线程，另一个用于停止进程。当我停止该过程时，我想通过显示“0”来刷新 QLCDNumber，但它不起作用。在工作线程中，我像这样初始化信号：

```
def __init__(self, parent = None):
    QtCore.QThread.__init__(self, parent)
    self.voltage = QtCore.SIGNAL("voltage") 
```

当进程运行时，我发出信号

```
self.emit(self.voltage, volt_act) 
```

测量后。到目前为止有效。但是在我想再次启动工作进程时停止后，信号不会再次发送到 QLCDNumber 。为此，我必须重新启动 GUI。如何解决我的两个问题，即我想刷新 QLCDNumber 并在停止和刷新再次发出信号后解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:53:01.353

无法从您发布的代码中判断问题出在哪里，但这应该可以帮助您修改它，还可以查看文档以获取[新型信号/插槽连接](http://pyqt.sourceforge.net/Docs/PyQt4/new_style_signals_slots.html)和[进一步参考（模态对话框、计时器等）](http://doc-snapshot.qt-project.org/4.8/classes.html)：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-
import time

from PyQt4 import QtGui, QtCore

class MyThread(QtCore.QThread):
    countChange = QtCore.pyqtSignal(int)
    countReset  = QtCore.pyqtSignal(int)

    def __init__(self, parent=None):
        super(MyThread, self).__init__(parent)
        self.stopped = QtCore.QEvent(QtCore.QEvent.User)

    def start(self):
        self.stopped.setAccepted(False)
        self.count = 0

        super(MyThread, self).start()

    def run(self):
        while not self.stopped.isAccepted():
            self.count += 1
            self.countChange.emit(self.count)
            time.sleep(1)

        self.countReset.emit(0)

    def stop(self):
        self.stopped.setAccepted(True)

class MyWindow(QtGui.QDialog):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        self.lcdNumber = QtGui.QLCDNumber(self)

        self.pushButtonStart = QtGui.QPushButton(self)
        self.pushButtonStart.setText("Start")
        self.pushButtonStart.clicked.connect(self.on_pushButtonStart_clicked)

        self.pushButtonStop = QtGui.QPushButton(self)
        self.pushButtonStop.setText("Stop")
        self.pushButtonStop.clicked.connect(self.on_pushButtonStop_clicked)

        self.pushButtonDone = QtGui.QPushButton(self)
        self.pushButtonDone.setText("Done")
        self.pushButtonDone.clicked.connect(self.on_pushButtonDone_clicked)

        self.layoutHorizontal = QtGui.QHBoxLayout(self)
        self.layoutHorizontal.addWidget(self.lcdNumber)
        self.layoutHorizontal.addWidget(self.pushButtonStart)
        self.layoutHorizontal.addWidget(self.pushButtonStop)
        self.layoutHorizontal.addWidget(self.pushButtonDone)

        self.thread = MyThread(self)
        self.thread.countChange.connect(self.lcdNumber.display)
        self.thread.countReset.connect(self.lcdNumber.display)

    @QtCore.pyqtSlot()
    def on_pushButtonStart_clicked(self):
        self.thread.start()

    @QtCore.pyqtSlot()
    def on_pushButtonStop_clicked(self):
        self.thread.stop()

    @QtCore.pyqtSlot()
    def on_pushButtonDone_clicked(self):
        sys.exit()

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow()
    main.exec_()

    sys.exit(app.exec_()) 
```

# python - 产生一个具有相同数字的数组

> ID：15382334
> 
> 赞同：0
> 
> 时间：2013-03-13T10:13:00.460
> 
> 标签：python, list

我想要一个大小的数组，`80`并且只想用一个数字填充它。数字`1`，那么`[1,1,1,1,1,80 times]`有没有一种快速的方法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:13:41.127

这可以解决问题：

```
lst = [1] * 80 
```

请注意，对于可变对象（例如列表），这样做会创建对同一个列表的多个引用，因此当您更改其中一个列表时，您会更改所有其他列表。对于整数、字符串等不可变对象，这将非常有效。

使用可变对象，您可以这样做：

```
lst = [[] for i in range(80)]  # or xrange in Python 2 
```

这将创建 80 个单独的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:13:35.663

由于整数是不可变的，您可以安全地这样做：

```
[1] * 80 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:15:34.263

你也可以这样做：

```
buildList = lambda val, size: [val for _ in xrange(size)]
buildList(1, 80) 
```

# json - 以 json 形式输出 shell 脚本

> ID：15382335
> 
> 赞同：1
> 
> 时间：2013-03-13T10:13:00.723
> 
> 标签：json, bash

我想以 json 形式获得以下小型 shell 脚本的输出。

```
#!/bin/bash

 top -b -d1 -n1 | grep Cpu 
```

输出：

```
Cpu(s):  6.2%us,  1.6%sy,  0.2%ni, 90.9%id,  1.1%wa,  0.0%hi,  0.0%si,  0.0%st 
```

所需输出：

```
{"Cpu": "6.3" } 
```

如何以 json 形式转换每个 shell 脚本的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:05:50.673

你可以试试这个

```
echo "{\"Cpu\":\"`top -b -d1 -n1 | grep Cpu | cut -f3 -d " " | cut -f1 -d %`\"}" 
```

简要说明：首先，看一下`man cut`，尤其是 -f 和 -d 参数。s 只是双`\"`引号，应该在前面加上一个反斜杠，以免被 shell 解释器误解。最后，任何用反引号 `` 括起来的东西都会被执行，如此[处](http://www.freeos.com/guides/lsst/ch02sec08.html)所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:57:02.377

试试这一行：

```
your commands ...|awk  'BEGIN{FS="\\(s\\):\\s*";OFS="";q="\x22" }{$1=q$1q;sub(/%.*$/,"%",$2);$2=q$2q; print $1,$2}' 
```

用你的数据测试：

```
kent$  echo "Cpu(s):  6.2%us,  1.6%sy,  0.2%ni, 90.9%id,  1.1%wa,  0.0%hi,  0.0%si,  0.0%st"|awk  'BEGIN{FS="\\(s\\):\\s*";OFS="";q="\x22" }{$1=q$1q;sub(/%.*$/,"%",$2);$2=q$2q; print $1,$2}'
"Cpu""6.2%" 
```

# maven - 运行 jasmine.js 测试作为 Maven“测试”目标的一部分

> ID：15382336
> 
> 赞同：1
> 
> 时间：2013-03-13T10:13:06.573
> 
> 标签：maven, jasmine

我的项目 pom.xml 中有以下 jasmine 测试配置：

```
<pluginManagement>
      <plugins>
        <plugin>
        <groupId>com.github.searls</groupId>
        <artifactId>jasmine-maven-plugin</artifactId>
        <version>1.1.0</version>
        <executions>
          <execution>
            <goals>
              <goal>test</goal>
              <goal>jasmine</goal>
            </goals>
          </execution>
        </executions>
        <configuration>
          <jsSrcDir>${basedir}/src/main/js</jsSrcDir>
           <sourceIncludes>
            <include>myCode.js</include>
          </sourceIncludes>
          <jsTestSrcDir>${basedir}src/test/js/specs</jsTestSrcDir>
          <specIncludes>
            <include>mySpec.js</include>
          </specIncludes>
        </configuration>
      </plugin>
... 
```

使用此配置，我可以运行`jsamine:test`并且测试将运行。

我想将测试作为目标的一部分运行`test`，但 Maven 不会运行它们。我什至尝试删除该行`<goal>jasmine</goal>`，但 Maven 仍然不会运行 jasmine 测试。

**我究竟做错了什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:00:40.200

您还必须像这样将插件的执行添加到您的项目中：

```
<project>
  <build>
     <plugins>
        <plugin>
          <groupId>com.github.searls</groupId>
          <artifactId>jasmine-maven-plugin</artifactId>
        </plugin>
     </plugins>
  </build>
</project> 
```

导致您在 pluginManagement 中定义的那个并没有真正执行插件。

# c# - 如何逐行扩展数据表中的缩写c#

> ID：15382338
> 
> 赞同：0
> 
> 时间：2013-03-13T10:13:07.050
> 
> 标签：c#, dictionary, datatable, abbreviation

我正在使用具有两列文本数据的数据表，我只想为每一行扩展缩写，所以我使用了 Dictionary，这是我的代码示例：

```
 private void ExpandWords()
    {    
        DataTable DT = new DataTable();
        DataRow Row;
        DT.Columns.Add(new System.Data.DataColumn("Name", typeof(string)));
        DT.Columns.Add(new System.Data.DataColumn("Label", typeof(string)));

        Dictionary<string, string> dict = new Dictionary<string, string>();
        dict.Add("emp", "employee");
        dict.Add("dep", "department");

        for (int i = 0; i < dataGridView6.Rows.Count; i++)
        {   
            Row = DT.NewRow();
            foreach(KeyValuePair<string,string> rep in dict)
            {
              Row[0] = dataGridView6.Rows[i].Cells[0].Value.ToString().Replace    (rep.Key, rep.Value);
              Row[1] = dataGridView6.Rows[i].Cells[1].Value.ToString().Replace  (rep.Key, rep.Value);
            }
        DT.Rows.Add(Row);
        dataGridView7.DataSource = DT;
     } 
```

它可以毫无例外地运行，但它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:22:47.017

为什么要在网格行的循环中枚举字典？只需查找密钥。

您还必须在循环中添加每一行，而不是在外面，否则您只需添加最后一行：

```
for (int i = 0; i < dataGridView6.Rows.Count; i++)
{   
    Row = DT.NewRow();
    string abbrCell1 = dataGridView6.Rows[i].Cells[0].Value.ToString();
    string abbrCell2 = dataGridView6.Rows[i].Cells[1].Value.ToString();
    Row[0] = dict[abbrCell1];
    Row[1] = dict[abbrCell2];
    DT.Rows.Add(Row);
} 
```

**编辑**如果要将数据网格单元格字符串中的所有缩写词替换为字典中的非缩写词，则可以使用以下代码：

```
// in the loop
Row = DT.NewRow();
string abbrCell1 = dataGridView6.Rows[i].Cells[0].Value.ToString();
string abbrCell2 = dataGridView6.Rows[i].Cells[1].Value.ToString();
IEnumerable<string> unabbrWords1 = abbrCell1.Split()
    .Select(w => dict.ContainsKey(w) ? dict[w] : w);
IEnumerable<string> unabbrWords2 = abbrCell2.Split()
    .Select(w => dict.ContainsKey(w) ? dict[w] : w);
Row[0] = string.Join(" ", unabbrWords1);
Row[1] = string.Join(" ", unabbrWords2);
DT.Rows.Add(Row); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:29:10.300

您应该对其进行一些更改，否则您将在循环中覆盖相同的值：

```
var value1 = dataGridView6.Rows[i].Cells[0].Value.ToString();
var value2 = dataGridView6.Rows[i].Cells[1].Value.ToString();
foreach (KeyValuePair<string, string> rep in dict)
{
    value1 = value1.Replace(rep.Key, rep.Value);
    value2 = value2.Replace(rep.Key, rep.Value);
}

DT.Rows.Add(value1, value2); 
```

`DataBind()`如果您最后使用 Web 表单，您也会错过

```
dataGridView7.DataSource = DT;
dataGridView7.DataBind(); 
```

mz

# hadoop - Hive CREATE EXTERNAL TABLE 与参数化 LOCATION

> ID：15382342
> 
> 赞同：1
> 
> 时间：2013-03-13T10:13:11.643
> 
> 标签：hadoop, hive, hiveql

这按预期工作：

```
 DROP TABLE mytable; 
 CREATE EXTERNAL TABLE mytable (
     Dim1 STRING,
     Dim2 STRING,
     Dim3 STRING ) 
 LOCATION 'hdfs:///user/myuser/data'; 
```

但这不是：

```
 set rootpath = 'hdfs:///user/myuser/data'; 
 DROP TABLE mytable; 
 CREATE EXTERNAL TABLE mytable (
     Dim1 STRING,
     Dim2 STRING,
     Dim3 STRING ) 
 LOCATION '${hiveconf:rootpath}'; 
```

它失败并出现以下错误（Hive 0.9.0）：

> 失败：解析错误：第 9:11 行不匹配输入 'hdfs' 期望在 '''' 附近出现 EOF

我做错了什么，还是这是一个已知问题/限制？对解决方法有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:02:31.107

我认为它应该读`LOCATION ${hiveconf:rootpath}`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T20:53:31.683

您还可以使用我们在创建表 DDL 中经常使用的环境变量。它可以称为 ${env:variable_name}

# spring-mvc - 具有继承的通用 Spring MVC 控制器

> ID：15382345
> 
> 赞同：13
> 
> 时间：2013-03-13T10:13:18.393
> 
> 标签：spring-mvc, controller

我可以在 Spring MVC 中执行以下操作吗

假设我的 Base GenericController 如下所示，带有一个请求映射“/list”

```
@Controller
public class GenericController<T>{

    @RequestMapping(method = RequestMethod.GET, value = "/list")
    public @ResponseBody List<T> getMyPage(){
        // returns list of T
    }

} 
```

下面是我的两个控制器

```
@Controller(value = "/page1")
public class Page1Controller extends GenericController<Page1>{

}

@Controller(value = "/page2")
public class Page2Controller extends GenericController<Page2>{

} 
```

现在我将能够访问 URL“/page1/list”和“/page2/list”，其中第一个访问 Page1Controller，第二个访问 Page2Controller。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T15:44:20.893

这是不可能的，并且已经被拒绝，请参阅[SPR-10089](https://jira.springsource.org/browse/SPR-10089)。我认为这会有些混乱，此外，除了不同的映射之外，这些方法的行为不太可能*完全相同。*但是您可以改用委托：

```
public class BaseController<T> {
    public List<T> getPageList(){
        // returns list of T
    }
}

@Controller(value = "/page1")
public class Page1Controller extends BaseController<Page1>{
    @RequestMapping(method = RequestMethod.GET, value = "/list")
    public @ResponseBody List<Page1> getMyPage() {
      return super.getPageList();
    }    
}

@Controller(value = "/page2")
public class Page2Controller extends BaseController<Page2>{
    @RequestMapping(method = RequestMethod.GET, value = "/list")
    public @ResponseBody List<Page2> getMyPage() {
      return super.getPageList();
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-11-16T05:20:49.840

对于那些寻找与 Spring Framework 4.x 类似的东西的人，OP 提供的类层次结构是可能的。[Github](https://github.com/manish-in-java/stackoverflow-questions/tree/master/15382345)上提供了一个示例应用程序。它允许用户以 JSON 格式查看书籍列表或杂志列表。

# java - 如何比较两段文字？

> ID：15382347
> 
> 赞同：6
> 
> 时间：2013-03-13T10:13:23.657
> 
> 标签：java, string, compare, md5, paragraph

我需要删除包含许多段落的文本中的重复段落。

我使用类中的函数`java.security.MessageDigest`来计算每个段落的 MD5 哈希值，然后将这些哈希值添加到`Set`.

如果`add()`'ed 成功，则意味着最新的段落是重复的。

这种方式有风险吗？

除了`String.equals()`，还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:21:22.610

在散列之前，您可以规范化段落，例如删除标点符号、转换为小写和删除额外的空格。规范化后，仅存在差异的段落将获得相同的哈希值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:23:16.850

如果 MD5 散列尚未在集合中，则表示该段落是唯一的。但事实并非如此。因此，如果您发现哈希已经在集合中，您可能*有*一个具有相同哈希值的非重复项。这不太可能发生，但您必须针对所有其他段落测试该段落才能确定。对于那个 String.equals 会做。

此外，您应该很好地考虑您所谓的唯一性（关于错字、空格、大写字母等），但任何方法都是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T10:28:14.327

无需计算 MD5 哈希，只需使用 a`HashSet`并尝试将字符串本身放入此集合中。这将使用该**`String#hashCode()`**方法计算字符串的哈希值并检查它是否已经在集合中。

```
public Set removeDuplicates(String[] paragraphs) {
    Set<String> set = new LinkedHashSet<String>();
    for (String p : paragraphs) {
        set.add(p);
    }
    return set;
} 
```

使用`LinkedHashSet`偶数可以保持段落的原始顺序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T10:28:56.733

正如其他人所建议的那样，您应该意识到标点符号、空格、换行符等方面的微小差异可能会使您的哈希值在本质上相同的段落中有所不同。

也许您应该考虑一个不那么脆弱的指标，例如。[余弦相似度](http://en.wikipedia.org/wiki/Cosine_similarity)非常适合匹配段落。

干杯，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T10:22:48.083

我认为这是一个好方法。但是，有一些事情要记住：

1.  请注意，计算哈希是一项繁重的操作。如果您不得不为数百万段重复它，这可能会使您的程序变慢。
2.  即使以这种方式，您最终也可能会发现略有不同的段落（例如，有错别字）。如果是这种情况，您应该在计算哈希之前对段落进行规范化（将其转换为小写，删除多余的空格等）。

# jquery - 将新的 li 添加到 li 组后，删除效果不起作用

> ID：15382349
> 
> 赞同：0
> 
> 时间：2013-03-13T10:13:30.133
> 
> 标签：jquery, jquery-ui

我已经使用 jquery.ui 创建了一些可排序的 li，并且最后还有一个添加按钮来附加新的 li，每个 li 内都有一个删除文本，在其单击父 li 时，此删除功能无法正常工作对于新创建的 li，或者更确切地说，我应该说删除文本上的单击操作不适用于新添加的 li，以获得我添加的更多解释。 [用于工作演示](http://jsfiddle.net/Abhimanue/8fXWw/)

```
$(function() {
        $( "#sortable" ).sortable({
            placeholder: "ui-state-highlight"
        });
        $( "#sortable" ).disableSelection();

        $(".btn").click(function (e) {

            e.preventDefault();
            var fieldsCount = $(".remove").length;
            if(fieldsCount){
                number = $('ul#sortable li:last').attr("id");
                number++;
                $("#sortable").append('<li id ="'+number+'" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item '+number+' <a class="remove hello'+number+'">remove</a></li>');
                        $("#sortable").sortable('refresh');
                }else{
                    $("#sortable").append('<li id="1" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Item 1 <a class="remove hello1">remove</a></li>');
                    $("#sortable").sortable('refresh');
                }

        });
        $("a.remove").click(function(){
            $(this).parent().remove();
        });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:16:32.193

代替`.click()`，尝试`.on()`在其委托事件模式下：

```
 $("#sortable").on("click", "a.remove", function(){
        $(this).parent().remove();
    }); 
```

当您使用`.click()`它时，它只会将处理程序绑定到当时存在*的元素，*因此不会自动处理以后添加的元素。使用该[`.on()`方法](http://api.jquery.com/on)可以将处理程序绑定到已经存在的父级，但是在第二个参数中，您可以提供一个选择器来匹配您真正关心的元素 - 这些元素在您调用时*不需要*存在`.on()`。有关更详细[的解释，请阅读 doco](http://api.jquery.com/on/)。

演示：http: [//jsfiddle.net/8fXWw/1/](http://jsfiddle.net/8fXWw/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:21:49.973

Click 事件不适用于动态添加的元素。您应该使用 jQuery.on 将点击事件绑定到动态添加的 LI。像这样的东西：

```
$("#sortable").on("click", "a.remove", function(){
    $(this).parent().remove();
}); 
```

# entity-framework - Brezze.js - 如果我使用 .Include 则查询失败

> ID：15382350
> 
> 赞同：0
> 
> 时间：2013-03-13T10:13:30.707
> 
> 标签：entity-framework, breeze

我的 ViewModel 中有以下 javascript：

```
 manager.executeQuery(query)
            .then(function (projects) {
                projects.results.forEach(function (item) {
                    if (item.IsFavorite() == true) {
                        self.favoriten.push(item);
                    }
                    else {
                        self.zuletzt.push(item);
                    }                        
                });
                console.log("Query favorite finished");
            })
            .fail(function (error) {
                console.log("Query failed: " + error.message);
            }); 
```

控制器：

```
var res = _contextProvider.Context.Projects
            .Include("User11")
            .Include("User12")
            .Include("Timestamps")
            .Where(p => p.Finished == false)
            .Where(p => p.User12.Any(u => u.Guid == ID));

var erg = res.OrderByDescending(r => r.Timestamps.Min(t => t.Start));

return erg; 
```

我收到一个错误：查询失败：+ 大量数据如果我删除三个 Include 语句，查询工作，但 odrderBy 不起作用。

有解决办法吗？

# android - 可以在单个异步任务中运行多个任务吗？

> ID：15382357
> 
> 赞同：0
> 
> 时间：2013-03-13T10:13:38.163
> 
> 标签：android, android-asynctask, android-activity

我有 3 项活动 A、B、C。在所有 3 个活动中，我都在使用异步任务。是否可以在单个异步任务（通用代码）下运行所有​​异步任务。

如果可能
1.如何检查从哪个活动调用哪个任务？
2、如何查看任务是否完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:23:45.713

可能你想要一个通用异步任务来执行长时间运行的任务，并且你想要一个回调机制来使用它，你可以通过将异步任务类作为一个单独的抽象并实现一个回调接口来实现相同的任务。 [带回调的异步类](https://stackoverflow.com/questions/14253421/how-one-interface-can-be-used-for-different-background-android-tasks/14376233#14376233)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:19:20.477

对的，这是可能的。

1.  添加一个用于指示调用Activity的Parameter
2.  [查看 AsyncTask 方法 onPostExecute() 的 JavaDoc](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:31:10.963

创建您的 AsyncTask 类

```
public class MyTask extends AsyncTask<Void, Void, Void>
{

    // Use a WeakReference instead of holding the Activity object
    private WeakReference<Activity> mActivity;

    public MyTask(Activity activity)
    {
        mActivity = new WeakReference<Activity>(activity);
    }

    @Override
    protected Void doInBackground(Void... params)
    {
        // do common work
        return null;
    }

    public Activity getActivity()
    {
        return mActivity.get();
    }

    public void setActivity(Activity activity)
    {
        mActivity = new WeakReference<Activity>(activity);
    }

} 
```

在每个活动中：

```
MyTask t = new MyTask(YourActivity.this)
    {
        @Override
        protected void onPostExecute(Void result)
        {
            super.onPostExecute(result);
            // do some work when finished           
        }
    }; 
```

# android - Android：InflateException：二进制 XML 文件行：膨胀类错误

> ID：15382361
> 
> 赞同：8
> 
> 时间：2013-03-13T10:13:47.743
> 
> 标签：android, xml, android-layout

我已经就这个问题浏览了几篇文章，但没有任何帮助。该问题仅出现在大屏幕设备上。下面是堆栈跟踪。

**日志输出**

```
03-13 15:21:18.863: E/AndroidRuntime(6334): FATAL EXCEPTION: main
03-13 15:21:18.863: E/AndroidRuntime(6334): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.dzo.seattlesnightlife/com.dzo.seattlesnightlife.StoreDescription}: android.view.InflateException: Binary XML file line #29: Error inflating class <unknown>
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.os.Looper.loop(Looper.java:137)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.app.ActivityThread.main(ActivityThread.java:4745)  
03-13 15:21:18.863: E/AndroidRuntime(6334):     at java.lang.reflect.Method.invokeNative(Native Method)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at java.lang.reflect.Method.invoke(Method.java:511)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at dalvik.system.NativeStart.main(Native Method)
03-13 15:21:18.863: E/AndroidRuntime(6334): Caused by: android.view.InflateException: Binary XML file line #29: Error inflating class <unknown>
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.view.LayoutInflater.createView(LayoutInflater.java:613)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.view.LayoutInflater.parseInclude(LayoutInflater.java:805)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:736)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)  
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.app.Activity.setContentView(Activity.java:1867)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at com.dzo.seattlesnightlife.StoreDescription.init(StoreDescription.java:195)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at com.dzo.seattlesnightlife.StoreDescription.onCreate(StoreDescription.java:188)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.app.Activity.performCreate(Activity.java:5008)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
03-13 15:21:18.863: E/AndroidRuntime(6334):     ... 11 more
03-13 15:21:18.863: E/AndroidRuntime(6334): Caused by: java.lang.reflect.InvocationTargetException
03-13 15:21:18.863: E/AndroidRuntime(6334):     at java.lang.reflect.Constructor.constructNative(Native Method)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.view.LayoutInflater.createView(LayoutInflater.java:587)
03-13 15:21:18.863: E/AndroidRuntime(6334):     ... 30 more
03-13 15:21:18.863: E/AndroidRuntime(6334): Caused by: java.lang.OutOfMemoryError
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:500)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:353)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:781)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.content.res.Resources.loadDrawable(Resources.java:1930)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.content.res.Resources.getDrawable(Resources.java:659)  
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:173)  
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:881)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.graphics.drawable.Drawable.createFromXml(Drawable.java:818)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.content.res.Resources.loadDrawable(Resources.java:1915)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.view.View.<init>(View.java:3336)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.view.ViewGroup.<init>(ViewGroup.java:427)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.widget.LinearLayout.<init>(LinearLayout.java:176)
03-13 15:21:18.863: E/AndroidRuntime(6334):     at android.widget.LinearLayout.<init>(LinearLayout.java:172)
03-13 15:21:18.863: E/AndroidRuntime(6334):     ... 33 more 
```

**XML 布局文件**

```
<com.dzo.seattlesnightlife.ui.HeaderBar
    android:id="@+id/baseHeaderBar"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true" />

<com.handmark.pulltorefresh.library.PullToRefreshListView
    android:id="@+id/listViewSearch"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/baseHeaderBar"
    android:layout_marginBottom="55dp"
    android:listSelector="@drawable/list_sel"
    android:cacheColorHint="#00000000"
    android:divider="@color/divider_list"
    android:layout_marginTop="-3dp"
    android:dividerHeight="2dp" />

<TextView
    android:id="@+id/txtNoData"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:text="@string/no_data"
    android:textColor="@color/white"
    android:textSize="18sp"
    android:visibility="gone" />

<ScrollView
    android:id="@+id/scrollLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/baseHeaderBar"
    android:layout_marginBottom="60dp"
    android:scrollbars="none" >

    <LinearLayout
        android:id="@+id/linScrollView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center|top"
        android:orientation="vertical" >

        <RelativeLayout
            android:id="@+id/linImgAddress"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_marginTop="5dp"
            android:orientation="horizontal" >

            <LinearLayout
                android:id="@+id/linImgListingPhoto"
                android:layout_width="143dp"
                android:layout_height="143dp"
                android:layout_marginTop="10dp"
                android:background="@drawable/bg_description"
                android:gravity="center"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/imgListingPhoto"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:contentDescription="@string/d_desc"
                    android:scaleType="fitXY" />
            </LinearLayout>

            <ImageButton
                android:id="@+id/btnFav"
                android:layout_width="30dp"
                android:layout_height="30dp"
                android:layout_gravity="top|left"
                android:layout_marginTop="5dp"
                android:background="@drawable/ic_fav"
                android:contentDescription="@drawable/ic_fav" />

            <LinearLayout
                android:id="@+id/linPromoTitle"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_toRightOf="@+id/linImgListingPhoto"
                android:layout_marginTop="10dp"
                android:layout_marginLeft="5dp"
                android:gravity="top"
                android:orientation="vertical" >

                <TextView
                    android:id="@+id/txtListingTitle"
                    android:layout_width="match_parent"
                    android:layout_height="40dp"
                    android:background="@drawable/bg_description"
                    android:gravity="center_vertical|center_horizontal"
                    android:textColor="@color/white"
                    android:textSize="20sp" />

                <LinearLayout
                    android:id="@+id/linAddressWebsite"
                    android:layout_width="match_parent"
                    android:layout_height="100dp"
                    android:layout_marginTop="3dp"
                    android:background="@drawable/bg_description"
                    android:orientation="vertical" >

                    <RelativeLayout
                        android:layout_width="match_parent"
                        android:layout_height="32dp"
                        android:id="@+id/relStoreAddress"
                        android:background="@drawable/highlight_rnd_top" >

                        <ImageView
                            android:id="@+id/imgIcMap"
                            android:layout_width="wrap_content"
                            android:layout_height="20dp"
                            android:layout_alignParentLeft="true"
                            android:layout_centerHorizontal="true"
                            android:layout_centerVertical="true"
                            android:layout_marginLeft="5dp"
                            android:contentDescription="@drawable/ic_map"
                            android:src="@drawable/ic_map" />

                        <TextView
                            android:id="@+id/txtStoreAddress"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginLeft="5dp"
                            android:layout_toRightOf="@+id/imgIcMap"
                            android:layout_centerVertical="true"
                            android:singleLine="true"
                            android:textColor="@color/white"
                            android:textSize="18sp" />

                        <ImageView
                            android:layout_width="wrap_content"
                            android:layout_height="20dp"
                            android:layout_alignParentRight="true"
                            android:layout_centerHorizontal="true"
                            android:layout_centerVertical="true"
                            android:layout_marginRight="2dp"
                            android:contentDescription="@drawable/arrow_white"
                            android:src="@drawable/arrow_white" />
                    </RelativeLayout>

                    <View
                        android:id="@+id/view2"
                        android:layout_width="fill_parent"
                        android:layout_height="1dp"
                        android:layout_marginBottom="0sp"
                        android:background="@color/line" />

                    <RelativeLayout
                        android:id="@+id/relStoreContact"
                        android:layout_width="match_parent"
                        android:layout_height="34dp"
                        android:background="@drawable/highlight_mid" >

                        <ImageView
                            android:id="@+id/imgIcCall"
                            android:layout_width="wrap_content"
                            android:layout_height="20dp"
                            android:layout_marginLeft="5dp"
                            android:layout_alignParentLeft="true"
                            android:layout_centerHorizontal="true"
                            android:layout_centerVertical="true"
                            android:contentDescription="@drawable/ic_call"
                            android:src="@drawable/ic_call" />

                        <TextView
                            android:id="@+id/txtStorePhone"
                            android:layout_toRightOf="@+id/imgIcCall"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginLeft="2dp"
                            android:layout_centerVertical="true"
                            android:singleLine="true"
                            android:textColor="@color/white"
                            android:textSize="18sp" />

                        <ImageView
                            android:layout_width="wrap_content"
                            android:layout_height="20dp"
                            android:layout_alignParentRight="true"
                            android:layout_centerHorizontal="true"
                            android:layout_centerVertical="true"
                            android:layout_marginRight="2dp"
                            android:contentDescription="@drawable/arrow_white"
                            android:src="@drawable/arrow_white" />
                    </RelativeLayout>

                    <View
                        android:id="@+id/view3"
                        android:layout_width="fill_parent"
                        android:layout_height="1dp"
                        android:layout_marginBottom="0sp"
                        android:background="@color/line" />

                    <RelativeLayout
                        android:layout_width="match_parent"
                        android:layout_height="32dp"
                        android:id="@+id/relStoreWeb"
                        android:background="@drawable/highlight_rnd_bottom" >

                        <ImageView
                            android:id="@+id/imgIcWeb"
                            android:layout_width="wrap_content"
                            android:layout_height="20dp"
                            android:layout_alignParentLeft="true"
                            android:layout_centerHorizontal="true"
                            android:layout_centerVertical="true"
                            android:layout_marginLeft="5dp"
                            android:contentDescription="@drawable/ic_web"
                            android:src="@drawable/ic_web" />

                        <TextView
                            android:layout_toRightOf="@+id/imgIcWeb"
                            android:id="@+id/txtStoreWebsite"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_centerVertical="true"
                            android:singleLine="true"
                            android:textColor="@color/white"
                            android:textSize="18sp" 
                            android:text="@string/visit_web"/>

                        <ImageView
                            android:layout_width="wrap_content"
                            android:layout_height="20dp"
                            android:layout_alignParentRight="true"
                            android:layout_centerHorizontal="true"
                            android:layout_centerVertical="true"
                            android:layout_marginRight="2dp"
                            android:contentDescription="@drawable/arrow_white"
                            android:src="@drawable/arrow_white" />
                    </RelativeLayout>
                </LinearLayout>
            </LinearLayout>
        </RelativeLayout>

        <LinearLayout
            android:id="@+id/linDescInfo"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="top"
            android:layout_marginTop="5dp"
            android:orientation="vertical" >

            <include layout="@layout/part_store_sched_tick" />

            <LinearLayout
                android:id="@+id/linStoreDescTitle"
                android:layout_width="match_parent"
                android:layout_height="35dp"
                android:layout_gravity="center"
                android:gravity="center|top"
                android:orientation="vertical"
                android:layout_marginLeft="5dp"
                android:layout_marginRight="5dp"
                android:layout_marginTop="5dp"
                android:visibility="gone" >

                <TextView
                    android:id="@+id/txtDescTitle"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:background="@drawable/bg_description"
                    android:gravity="center"
                    android:paddingLeft="5dp"
                    android:paddingRight="5dp"
                    android:singleLine="true"
                    android:text="@string/d_desc"
                    android:textColor="@color/white"
                    android:textSize="20sp" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/linStoreDesc"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="top"
                android:layout_marginLeft="5dp"
                android:layout_marginRight="5dp"
                android:layout_marginTop="5dp"
                android:background="@drawable/bg_desc"
                android:gravity="center_horizontal"
                android:orientation="vertical"
                android:visibility="gone" >

                <com.dzo.seattlesnightlife.ui.ExpandablePanel
                    android:id="@+id/descPanel"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    custom:animationDuration="25"
                    custom:collapsedHeight="80dp"
                    custom:content="@+id/txtDesc"
                    custom:handle="@+id/expand" >

                    <TextView
                        android:id="@id/txtDesc"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center"
                        android:textSize="18sp"/>

                    <View
                        android:id="@+id/view4"
                        android:layout_width="fill_parent"
                        android:layout_height="1dp"
                        android:layout_marginBottom="0sp"
                        android:background="@color/line"/>

                    <RelativeLayout
                        android:id="@id/expand"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="5dp"
                        android:background="@drawable/txt_highlight"
                        android:visibility="gone">

                        <TextView
                            android:id="@+id/txtShowMoreLess"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_centerInParent="true"
                            android:text="@string/show_more"
                            android:textColor="@color/white"
                            android:textSize="18sp"
                            android:textStyle="bold"
                            android:visibility="gone" />

                        <ImageView
                            android:id="@+id/imgMoreLess"
                            android:layout_width="20dp"
                            android:layout_height="20dp"
                            android:layout_centerInParent="true"
                            android:layout_toRightOf="@+id/txtShowMoreLess"
                            android:background="@drawable/arrow_down"
                            android:contentDescription="@drawable/arrow_down"
                            android:visibility="gone" />
                    </RelativeLayout>
                </com.dzo.seattlesnightlife.ui.ExpandablePanel>
            </LinearLayout>

            <include layout="@layout/part_store_info" />

            <LinearLayout
                android:id="@+id/linShare"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="3dp"
                android:layout_marginRight="3dp"
                android:layout_marginTop="8dp"
                android:gravity="top|center_horizontal"
                android:orientation="vertical" >

                <LinearLayout
                    android:id="@+id/linStoreShareBox"
                    android:layout_width="match_parent"
                    android:layout_height="35dp"
                    android:layout_gravity="top"
                    android:gravity="center_horizontal"
                    android:orientation="vertical" >

                    <TextView
                        android:id="@+id/txtStoreShareTittle"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:background="@drawable/bg_description"
                        android:gravity="center|center_vertical"
                        android:paddingLeft="5dp"
                        android:paddingRight="5dp"
                        android:singleLine="true"
                        android:text="@string/d_share"
                        android:textColor="@color/white"
                        android:textSize="20sp" />
                </LinearLayout>

                <include layout="@layout/share_lay_part" />
            </LinearLayout>
        </LinearLayout>
    </LinearLayout>
</ScrollView>

<com.dzo.seattlesnightlife.ui.FooterBar
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:id="@+id/baseFooterBar"/>
</RelativeLayout> 
```

每当我在大屏幕设备或模拟器上运行我的应用程序时，我都会遇到这个奇怪的异常。遍历堆栈，当我检查行号时。29 在 XML 中，`android:layout_height`用于 textView。行号 的活动，应用程序崩溃是`setContentView()`。`OutOfMemoryError`我的可绘制对象存在问题的要点。因此，我调整了可绘制对象的大小，但没有任何帮助。无法找出崩溃的实际原因。

我的[Java 文件](http://pastie.org/6470102)。抱歉不能在这里发布，因为它超出了正文限制，我对其进行了定制，因为它有大约 5k 行代码。

好的，当我将堆大小增加到 48 MB 时，应用程序没有崩溃，但是使用 16 MB 堆时，它仍然崩溃。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-13T12:11:21.597

如果你改变你使用的图像的大小会更好。可能是您使用的设备无法使用的尺寸。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T10:30:06.617

您的 XML 错误只是主要错误的结果：**OutOfMemoryError**

只要您没有找到改善内存管理的线索，您就会遇到这些错误（XML 或其他）

您的 XML 是正确的，其中没有错误，第 29 行是发生 OutOfMemoryError 时您的应用程序所在的“点”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-19T10:30:03.650

我也认为这`OutOfMemoryError`是`logcat`报告的决定性部分。我将我的 Android 虚拟设备的 VM 堆从 16MB 增加到 32MB。现在它起作用了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-02T17:05:36.970

我有一个类似的问题，它选择了大布局 - 比屏幕大，并将位图缩放到它。然后内存不足。我把背景和按钮的图像尺寸缩小了，它就出现了。然后我看到屏幕布局太大。

# jquery - 通过 AJAX 加载的 jquery-ui-map “获取路线”示例（附示例）

> ID：15382363
> 
> 赞同：0
> 
> 时间：2013-03-13T10:13:49.373
> 
> 标签：jquery, jquery-mobile, jquery-ui-map

我实现了[jquery-ui-map](http://code.google.com/p/jquery-ui-map/) “获取方向”[示例](http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-mobile.html#directions_map)
当地图 HTML 标记位于多页 index.htm 内时，一切正常，所以我确定脚本有效
但在我的真实脚本中，我有一个音乐节目列表，每个都有不同的位置，所以我必须通过 AJAX 加载地图标记（经过一些服务器端处理以检索每个位置的地址），在这种情况下我遇到了两个问题：

*   地理定位不再起作用：浏览器不会询问我是否要传达我当前的位置
*   “返回”按钮不再起作用：地址栏中的 url 发生变化，但页面保持不变

这是我的真实示例：请导航至 Next Shows > Club (X) > Get Directions，看看会发生什么

*   非 AJAX 示例（工作）：[http ://www.iwstudio.it/mobile/index2.htm](http://www.iwstudio.it/mobile/index2.htm)
*   AJAX 示例（不工作）：[http ://www.iwstudio.it/mobile/index.htm](http://www.iwstudio.it/mobile/index.htm)
*   可下载脚本：[http ://www.iwstudio.it/mobile/mobile.rar](http://www.iwstudio.it/mobile/mobile.rar)

请问有什么帮助吗？预先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:28:11.800

地图页面不使用AJAX解决，目标位置通过DOM元素传递

# uilabel - 如何在iPhone中为UILabel的背景设置渐变色

> ID：15382366
> 
> 赞同：2
> 
> 时间：2013-03-13T10:13:54.890
> 
> 标签：uilabel, cagradientlayer

我正在使用以下代码将渐变颜色设置为标签的背景，但没有影响我做错了什么？代码在这里：

```
 [self.teamName setTextColor:[UIColor whiteColor]];
    [self.teamName setBackgroundColor:[UIColor clearColor]];
    CAGradientLayer *gradientLayer = [CAGradientLayer layer];
    gradientLayer.frame = self.teamName.bounds;
    gradientLayer.colors = [NSArray arrayWithObjects:(id)[[UIColor whiteColor]CGColor], (id)[[UIColor blackColor]CGColor], nil];
    [self.teamName.layer insertSublayer:gradientLayer atIndex:0]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T11:07:55.450

当我将 CAGradientLayer 插入主视图时，它工作正常。

```
[self.teamName setTextColor:[UIColor whiteColor]];
    [self.teamName setBackgroundColor:[UIColor clearColor]];
    CAGradientLayer *gradientLayer = [CAGradientLayer layer];
    gradientLayer.frame = self.teamName.bounds;
    gradientLayer.colors = [NSArray arrayWithObjects:(id)[[UIColor whiteColor]CGColor], (id)[[UIColor blackColor]CGColor], nil];
    [self.view.layer insertSublayer:gradientLayer atIndex:0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-11T22:28:38.013

所以我也试图这样做！我终于通过在标签后面放置一个 UIView 并将标签背景颜色更改为清除来使其工作。我在故事板中做到了这一点。

# sparql - SPARQL 更新中的 UNION 运算符

> ID：15382368
> 
> 赞同：2
> 
> 时间：2013-03-13T10:14:05.083
> 
> 标签：sparql

我有两个 SPARQL 更新。第一个：

```
INSERT 
{ GRAPH <[http://example/bookStore2]> { ?book ?p ?v } }
WHERE
{ GRAPH  <[http://example/bookStore]>
   { ?book dc:date ?date .
     FILTER ( ?date > "1970-01-01T00:00:00-02:00"^^xsd:dateTime )
     ?book ?p ?v
} } 
```

第二：

```
INSERT 
{ GRAPH <[http://example/bookStore2]> { ?book ?p ?v } }
WHERE
{ GRAPH  <[http://example/bookStore3]>
   { ?book dc:date ?date .
     FILTER ( ?date > "1980-01-01T00:00:00-02:00"^^xsd:dateTime )
     ?book ?p ?v
} } 
```

我可以将它们与 UNION 运算符结合使用吗？如果是，是否是等效的结果？是否可以在 SPARQL 更新中使用 UNION，例如在“Select”中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-26T18:52:36.673

[AndyS 的回答](https://stackoverflow.com/a/15384656/1281433)是正确的；您可以将它们组合起来，UNION 的描述在 SPARQL 规范的第[7 节匹配替代项中找到。](http://www.w3.org/TR/sparql11-query/#alternatives)组合查询将是：

```
INSERT { 
  GRAPH <[http://example/bookStore2]> { ?book ?p ?v }
}
WHERE{ 
  {
    GRAPH  <[http://example/bookStore]> {
      ?book dc:date ?date .
      FILTER ( ?date > "1970-01-01T00:00:00-02:00"^^xsd:dateTime )
      ?book ?p ?v
    }
  }
  UNION
  {
    GRAPH <[http://example/bookStore3]> {
      ?book dc:date ?date .
      FILTER ( ?date > "1980-01-01T00:00:00-02:00"^^xsd:dateTime )
      ?book ?p ?v
    }
  }
} 
```

在这种模式非常相似的特殊情况下，您也可以使用[VALUES](http://www.w3.org/TR/sparql11-query/#inline-data)抽象出不同的部分：

```
INSERT { 
  GRAPH <[http://example/bookStore2]> { ?book ?p ?v }
}
WHERE{ 
  values (?graph ?startDate) { 
    (<[http://example/bookStore]> "1970-01-01T00:00:00-02:00"^^xsd:dateTime)
    (<[http://example/bookStore3]> "1980-01-01T00:00:00-02:00"^^xsd:dateTime)
  }
  GRAPH ?graph {
    ?book dc:date ?date .
    FILTER ( ?date > ?startDate )
    ?book ?p ?v
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:57:02.203

WHERE 子句与 SPARQL 查询相同 - 您可以使用 UNION。

# php - 如何用 jquery 调用 cakephp 动作？

> ID：15382377
> 
> 赞同：2
> 
> 时间：2013-03-13T10:14:35.847
> 
> 标签：php, javascript, cakephp, get

我只想用 jquery 点击复选框来调用 cakephp 动作。我只想通过我想使用 $.get 来刷新当前页面，因为我想将其他变量发送到操作。我尝试了以下代码：

HTML 代码：

```
<?php $chkOpt = array('pertinence' => $pert, 'onClick' => 'refresh_current_page()', 'id' => 'matchCoche'); ?>

<td class="check-column"><?= $form->checkbox($waiting['ArgusWaitingsMobilesPrice']['brand'] . ';' . $waiting['ArgusWaitingsMobilesPrice']['mobile'] . ';' . $waiting['search']['RefAvatar']['mobile_id'], $chkOpt) ?></td> 
```

Javascript代码：

```
<script type="text/javascript">
            function refresh_current_page() {
                $('#matchCoche').ready(function() {
                                $.get("<?php echo $this->here ?>");
                });
            }
        </script> 
```

有人可以帮助我吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:05:40.683

我总是使用 Html 助手来制作 url，让我免于麻烦。

```
<?php 
$this->Js->buffer('
    $(document).ready(function(){
        $('#matchCoche').click(function(){
              $.get("' . $this->Html->url( array('controller' => 'your_controller', 'action' => 'your_action', 'param1', 'param2') ) . '");
        });
    });
'); 

?> 
```

这假设您已加载“Js”助手并具有：

```
<?php echo $this->Js->writeBuffer(); ?> 
```

在结束正文标记之前的布局中

我觉得使用 Js->buffer 很方便。Js->writeBuffer 将从缓冲区中收集所有片段并处理 $(document).ready 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:17:23.873

更好的使用`click`事件。不要将它与 HTML 混合 :)

```
$(document).ready(function(){
    $('#matchCoche').click(function(){
          $.get("http://"+ document.domain +"/yourController/yourAction/param1/param2/");
    });
}); 
```

无论如何，如果你只是想用其他参数再次调用页面，为什么不使用普通的 HTML 链接呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:04:12.727

如上一个答案中所述，您最好只使用常规链接。您可以通过命名参数发送附加变量：

```
<a href="/controller/action/id/variable1:value1/variable2:value2" />link</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T11:07:59.727

相关文档可在以下位置找到：

[http://book.cakephp.org/view/1096/Using-Helpers](http://book.cakephp.org/view/1096/Using-Helpers)如何包含非默认助手 [http://book.cakephp.org/view/1589/script](http://book.cakephp.org/view/1589/script)使用 1.3.x Html 助手包含脚本 [http://book.cakephp.org/view/349/Methods](http://book.cakephp.org/view/349/Methods) for using the 1.2.x Javascript helper

[http://book.cakephp.org/1.3/en/The-Manual/Core-Helpers/Js.html](http://book.cakephp.org/1.3/en/The-Manual/Core-Helpers/Js.html)

# javascript - 文件下载弹出窗口不起作用

> ID：15382378
> 
> 赞同：1
> 
> 时间：2013-03-13T10:14:38.240
> 
> 标签：javascript, asp.net, ajax, httphandler

我正在开发 ASP.NET Web 表单应用程序。我的要求是在用户单击给定链接时显示 excel 文件下载弹出框（此链接在弹出页面上，而不是在 aspx 页面上。）。我有一个带有链接的 aspx 页面。当用户点击时，它会调用 js 函数，通过我们调用 web 服务方法来生成弹出屏幕的 html。

**代码**：

```
 function showListModelFromGenrator(divId) {
    var lowner = $("#" + hdnLoggedInOwnerID)[0].value;
    var sowner = $("#" + hdnSelectedOwnnerID)[0].value;
    var commID = $("#" + hdnCommunityId)[0].value;

    var controlid = '#' + divId;
    $.ajax({
        url: baseUrl + '/' + "WebServices/ExtraInfoWebService.asmx/GetProductActivityStatus",

        data: { LoggedInOwnerId: lowner, SelectedOwnerId: sowner, CommunityId: commID },
        success: function (response) {
            $(controlid).dialog("destroy");
            $(controlid).dialog({
                autoOpen: false,
                modal: true,
                width: 560,
                height: 370,
                resizable: false

            }).empty().append(response.text);
            $(controlid).dialog('open');
            var busyBox = new BusyBoxWrapper()
            busyBox.HideBusyBoxAfter(5);
        },
        cache: false
    });
} 
```

**网络方法**：

```
[WebMethod(EnableSession = true)]
    public string GetProductActivityStatus(int LoggedInOwnerId, int SelectedOwnerId, int CommunityId)
    {
        StringBuilder stringAuditStatus = new StringBuilder();
        Audit objdata = new Audit();
        try
        {
            DataTable dt = new DataTable();
            int ownerID = LoggedInOwnerId;
            if (SelectedOwnerId != 0)
                ownerID = SelectedOwnerId;

            dt = objdata.GetListmodeldata(ownerID, CommunityId);

            stringAuditStatus.Append(@"<table><tr class=addressTableHeader><td>Code</td>" +
                                            "<td>Description</td>" +
                                            "<td>Status</td>" +
                                            "<td>Date</td></tr>");
            foreach (DataRow item in dt.Rows)
            {
                stringAuditStatus.Append(

                                            "<tr><td>" + item["Code"] + "</td>" +
                                            "<td>" + item["Description"] + "</td>" +
                                            "<td>" + item["Status"] + "</td>" +
                                            "<td>" + item["Date"] + "</td></tr>");
            }
            stringAuditStatus.Append("</table>");
            stringAuditStatus.Append("<a id=lnkViewProductCodeStatus runat='Server' href='#' onclick='javascript:ExportExel();'>DownloadListModel</a>");

        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }

        return stringAuditStatus.ToString();
    } 
```

当用户点击“lnkViewProductCodeStatus”（上面由网络方法创建）时。我们调用 JS 函数`ExportExcel`，该函数调用处理程序方法来处理要下载的文件。

```
function ExportExel(){
    var abc;
    $.ajax({
        type: "POST",
        url: baseUrl + '/' + "WebServices/ExtraInfoWebService.asmx/Urlhttphandler",
        data: {},
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {
            //window.open(msg.d);
            $.ajax({
                type: "POST",
                url: msg.d,
                data: {},
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    //window.open(msg.d);
                }
            });
        }
    });
public void ProcessRequest(HttpContext context)
    {

        string FullFilePath = context.Server.MapPath("~/Certificates/" + "ExcelFile.xls");
        System.IO.FileInfo file = new System.IO.FileInfo(FullFilePath);

        if (file.Exists)
        {
            //For more MIME types list http://msdn.microsoft.com/en-us/library/ms775147%28VS.85%29.aspx
            context.Response.ContentType = MIMETypeUtility.MIMETypeDescription(MIMEType.Excel);
            context.Response.AddHeader("Content-Disposition", "attachment; filename=\"" + file.Name + "\"");
            context.Response.AddHeader("Content-Length", file.Length.ToString());
            context.Response.WriteFile(file.FullName);
            context.Response.Flush();
            context.Response.End();
        }

    } 
```

当我调试应用程序调用正确到处理程序但文件下载弹出窗口没有出现时。我在页面上尝试的相同代码（不是在弹出窗口上）它工作正常。谁能指导我为什么这在我的情况下不起作用。

非常感谢，普拉尚特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:33:18.687

无法使用 ajax 保存文件。它将获取数据，但永远不会显示下载对话框。有关更多信息，请参阅[通过 jQuery.Ajax 下载文件。](https://stackoverflow.com/questions/4545311/how-to-download-a-file-by-jquery-ajax)

我最近自己也有类似的要求，最终让 javascript Excel 下载功能在页面上动态创建一个表单（动作指向生成 Excel 文件的 .ashx 处理程序）。然后，该函数使用包含 .ashx 处理程序所需的任何参数的隐藏输入填充表单，然后最终提交它。

基于我所做的一个例子：

```
 function ExportExcel() {
    var formFragment = document.createDocumentFragment();
    var form = document.createElement("form");
    $(form).attr("action", baseUrl + "/WebServices/ExtraInfoWebService.asmx/Urlhttphandler")
        .attr("method", "POST");

    var inputField = document.createElement("input");
    $(inputField).attr("type", "hidden")
        .attr("id", "someId")
        .attr("name", "someId")
        .val(3);
    form.appendChild(inputField);

    formFragment.appendChild(form);
    $("body").append(formFragment);
    $(form).submit();
}; 
```

# c++ - 从图像像素计算笛卡尔坐标

> ID：15382381
> 
> 赞同：0
> 
> 时间：2013-03-13T10:14:41.643
> 
> 标签：c++, math, opencv

我有一个在笛卡尔空间内移动的机械臂。我在那个空间上有一个相机。给定相机图像中的一个像素，我需要计算它在笛卡尔空间中的等价物。

我需要校准相机吗？如果是，我该如何使用它？

# jsp - 根本原因是 javax.el.E LException：

> ID：15382383
> 
> 赞同：-1
> 
> 时间：2013-03-13T10:14:43.077
> 
> 标签：jsp, jsp-tags

我的jsp页面中有以下代码

```
 <a href="javascript:void(0)" style="<c:if test="${fn:length(page.likes)}">display:none</c:if>" class="like">Like</a>&nbsp; 
```

我收到以下异常

```
javax.el.ELException: Cannot convert 1 of type class java.lang.Integer to class java.lang.Boolean
org.apache.el.lang.ELSupport.coerceToBoolean(ELSupport.java:207)
org.apache.el.lang.ELSupport.coerceToType(ELSupport.java:402) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T16:10:15.200

答案是

```
 <c:if test="${(fn:length(page.likes))==0}">   :) 
```

# xml - 我应该使用哪种 Spring 扩展机制？

> ID：15382384
> 
> 赞同：0
> 
> 时间：2013-03-13T10:14:47.063
> 
> 标签：xml, spring

假设我有一组实现一个接口和一个映射的 bean (a,b,c)。

xml

```
<bean name="map" class="java.util.HashMap"/> 
```

abc.xml

```
<import M.xml>
<bean name="a" class="org.a"/>
<bean name="b" class="org.b"/>
<bean name="c" class="org.c"/> 
```

定义.xml

```
<import M.xml>
<bean name="d" class="org.d"/>
<bean name="e" class="org.e"/>
<bean name="f" class="org.f"/> 
```

一旦实例化配置，我希望将 a,b,c 放入地图中。当然a，b，c应该不知道地图。此注册应使用导入包含在配置中，因为在另一种情况下，它可能是必须注册的 d、e、f。我应该使用哪种 Spring 扩展机制？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:03:18.687

我和你做过同样的事情。好的方法是使用***BeanPostProcessor***和***ApplicationContextAware***。

首先，让 a、b、c 实现一个标记接口，例如：

```
public interface MappedValue { //leaving blank is ok because this is marker interface }

public a implements MappedValue { ... }
public b implements MappedValue { ... }
public c implements MappedValue { ... } 
```

其次，定义并添加一个实现***BeanPostProcessor***和***ApplicationContextAware***的 bean到您的应用程序上下文中。

```
public class MapPopulator implements BeanPostProcessor, ApplicationContextAware{

    private ApplicationContext applicationContext;

    private String mapbeanName;

    @Override
    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {
        this.applicationContext = applicationContext;
    }

    public void setMapbeanName(String mapbeanName) {
        this.mapbeanName = mapbeanName;
    }

    @Override
    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {

        if( bean instanceof MappedValue){
            Map map = (Map)applicationContext.getBean( mapbeanName );
            map.put( beanName, bean );
        }
        return bean;
    }

    @Override
    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {
        return bean;
    }
} 
```

希望它会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:15:05.963

您可以使用`@Autowired`. 如果你用它标记一个集合，它会将所有匹配接口的bean放在这个集合中。您的“地图”bean 应该是`MyMap`以下类型：

```
public class MyMap implements Map {
  @Autowired
  private List<SharedInterface> foundBeans;

  @PostConstruct
  public void init() {
    // populate map by inserting objects from foundBeans with appropriate keys
  }
} 
```

或者，使用原始“地图”bean并添加此类的mapBuilder bean：

```
public class MyMapBuilder {
  @Autowired
  private List<SharedInterface> foundBeans;

  @Resource(name="map")
  private Map map;

  @PostConstruct
  public void init() {
    // populate map by inserting objects from foundBeans with appropriate keys
  }
} 
```

# c# - C# 排序/比较项目

> ID：15382389
> 
> 赞同：3
> 
> 时间：2013-03-13T10:15:01.753
> 
> 标签：c#, wpf, sorting, icomparer

我有一个想要排序的类（补丁），所以我实现了 IComparer。

但是，它需要根据用户的需要进行排序，例如： - key1, key2, key3 - key1, key3, key2

对于每个键比较，我编写了一个 IComparer 类，但是，我想知道如何实现它的连接。即排序时我只能传递一个 IComparer 实例。

或者我应该为每种完整排序创建一个 IComparer 类，即 IComparerKey1Key2Key3、IComparerKey1Key3Key2 等？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T10:37:27.503

您可以制作一个通用比较器，它需要一个委托来选择键：

```
class ByKeyComparer<T, TKey> : IComparer<T>
{
    private readonly Func<T, TKey> _keySelector;
    private readonly IComparer<TKey> _keyComparer;

    public ByKeyComparer(Func<T, TKey> keySelector, IComparer<TKey> keyComparer = null)
    {
        if (keySelector == null) throw new ArgumentNullException("keySelector");
        _keySelector = keySelector;
        _keyComparer = keyComparer ?? Comparer<TKey>.Default;
    }

    public int Compare(T x, T y)
    {
        return _keyComparer.Compare(_keySelector(x), _keySelector(y));
    }
} 
```

使用辅助类来利用类型推断（因此您无需指定键的类型）：

```
static class ByKeyComparer<T>
{
    public static IComparer<T> Create<TKey>(Func<T, TKey> keySelector, IComparer<TKey> keyComparer = null)
    {
        return new ByKeyComparer<T, TKey>(keySelector, keyComparer);
    }
} 
```

你可以像这样使用它：

```
var patchVersionComparer = ByKeyComparer<Patch>.Create(p => p.Version);
patches.Sort(patchVersionComparer); 
```

如果您需要组合多个比较键，您可以创建一个使用其他比较器的比较器：

```
class CompositeComparer<T> : IComparer<T>
{
    private readonly IEnumerable<IComparer<T>> _comparers;

    public CompositeComparer(IEnumerable<IComparer<T>> comparers)
    {
        if (comparers == null) throw new ArgumentNullException("comparers");
        _comparers = comparers;
    }

    public CompositeComparer(params IComparer<T>[] comparers)
        : this((IEnumerable<IComparer<T>>)comparers)
    {
    }

    public int Compare(T x, T y)
    {
        foreach (var comparer in _comparers)
        {
            int result = comparer.Compare(x, y);
            if (result != 0)
                return result;
        }
        return 0;
    }
} 
```

示例用法：

```
var comparer = new CompositeComparer<Patch>(
                       ByKeyComparer<Patch>.Create(p => p.Key1),
                       ByKeyComparer<Patch>.Create(p => p.Key2),
                       ByKeyComparer<Patch>.Create(p => p.Key3));
patches.Sort(comparer); 
```

编辑：这是一个更流畅的 API：

```
static class ByKeyComparer<T>
{
    public static IComparer<T> CompareBy<TKey>(Func<T, TKey> keySelector, IComparer<TKey> keyComparer = null)
    {
        return new ByKeyComparer<T, TKey>(keySelector, keyComparer);
    }
}

static class ComparerExtensions
{
    public static IComparer<T> ThenBy<T, TKey>(this IComparer<T> comparer, Func<T, TKey> keySelector, IComparer<TKey> keyComparer = null)
    {
        var newComparer = ByKeyComparer<T>.CompareBy(keySelector, keyComparer);

        var composite = comparer as CompositeComparer<T>;
        if (composite != null)
            return new CompositeComparer<T>(composite.Comparers.Concat(new[] { newComparer }));
        return new CompositeComparer<T>(comparer, newComparer);
    }
} 
```

例子：

```
var comparer = ByKeyComparer<Patch>.CompareBy(p => p.Key1)
                                   .ThenBy(p => p.Key2)
                                   .ThenBy(p => p.Key3);
patches.Sort(comparer); 
```

（显然，您可能希望添加和方法`*Descending`的版本以允许按降序排序）`CompareBy``ThenBy`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T10:20:54.677

如果您可以使用 LINQ，那么对这样的类进行排序将非常容易。假设您有一个`List`of，`Patch` `List<Patch>`并且您想按 key2、key1 和 key4 对其进行排序。你要做的是：

```
List<Patch> patches = new List<Patch>();
patches = GetPatches().ToList().OrderBy(p=>p.Key2).ThenBy(p=>p.Key1).ThenBy(p=>p.Key4).ToList(); 
```

就这样。我们喜欢**linq。**:)

`ToList`如果函数返回列表本身，则不需要First 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T10:25:56.180

您还可以使用 [LINQ 动态查询库](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx) 或查看[Dynamic LINQ OrderBy](https://stackoverflow.com/questions/41244/dynamic-linq-orderby)

# junit - 在游戏中使用参数化的 JUnit 测试！框架

> ID：15382393
> 
> 赞同：3
> 
> 时间：2013-03-13T10:15:09.790
> 
> 标签：junit, playframework, parameterized

我想在游戏中使用参数化的 JUnit 测试！框架（1.2.5）应用程序。

这是我非常简单的测试示例：

```
import java.util.Arrays;
import java.util.List;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.Parameterized;
import org.junit.runners.Parameterized.Parameters;

import play.test.FunctionalTest;

@RunWith(Parameterized.class)
public class ParameterizedExampleTest extends FunctionalTest {

    private int i;

    @Parameters
    public static List<Object[]> parameters() {
        return Arrays.asList(new Object[][] {{1},{2},{3}});
    }

    public ParameterizedExampleTest(int i) {
        this.i = i;
    }

    @Test
    public void someTest() {
        System.out.println("i is " + i);
    }
} 
```

当我运行测试时，我得到一个`IllegalArgumentException`告诉我“测试类只能有一个构造函数”。我完全同意`FunctionalTest extends BaseTest`它有一个`@RunWith(PlayJUnitRunner.class)`注释并且`PlayJUnitRunner`有一个构造函数。

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:10:42.097

我找到了一个相当不错的解决方案：

```
import java.util.Arrays;
import java.util.List;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.Parameterized;
import org.junit.runners.Parameterized.Parameter;
import org.junit.runners.Parameterized.Parameters;

import play.test.FunctionalTest;

@RunWith(Parameterized.class)
public class ParameterizedExampleTest extends FunctionalTest {

    @Parameter(0)
    public int i;

    @Parameters
    public static List<Object[]> parameters() {
        return Arrays.asList(new Object[][] {{1},{2},{3}});
    }

    @Test
    public void someTest() {
        System.out.println("i is " + i);
    }
} 
```

您必须使用`@Parameter(...)`注释和参数数组中的参数编号来标记参数。不需要构造函数，因此它可以顺利运行。

缺点：您将需要 JUnit 4.11，因为此功能未在 4.10 中实现，而 play (1.2.5) 附带。

# excel - 在 vba 类中使用参数

> ID：15382397
> 
> 赞同：0
> 
> 时间：2013-03-13T10:15:26.417
> 
> 标签：excel, parameters, vba

目前我有一个 vba，我用它作为 excel 中的加载项来调用一些 UDF。这些函数接受参数，例如数字范围，以及关于这些数字和常量的一些属性。

例如 ROR(some_range_of_numbers,weekly)

第二个参数有以下选项。它可以是每天或每周或每月或每季度或每年。如果它每天我使用 365，如果它每周我使用 52，如果它每月我使用 12 如果它的 Qtrly 那么我使用 4 和年度我使用 1 作为 UDF 中公式的组成部分之一。

现在，我的问题是当用户想要使用该功能时，我想强制用户每天或每周输入等等。我记得一些关于在 VB 中使用类型或参数的事情。但是我在这里迷路了。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:04:07.900

试试下面的功能：

```
Function ROR(rng As Range, interval As String) 

    Dim intervalNum As Integer
    select Case LCase(interval)

    Case "daily":
        intervalNum = 365
    Case "weekly":
        intervalNum = 52
    Case "monthly":
        intervalNum = 12
    Case "quarterly":
        intervalNum = 4
    Case "annual":
        intervalNum = 1
    End Select

Debug.Print intervalNum

End Function 
```

评论后更新代码：

```
Enum interval
    daily = 365
    weekly = 52
    monthly = 12
    quarterly = 4
    annual = 1
End Enum

Function ROR(rng As Integer, val As interval)

End Function 
```

您也可以使用类型，您将在其中将其作为下拉列表。

```
Type interval
    daily As Integer
    weekly As Integer
    monthly As Integer
    quarterly As Integer
    annual As Integer
End Type 
```

![在此处输入图像描述](../Images/1378025f84afcffe0c93480680556562.png)

# php - 并非 $_SERVER [PHP] 中的所有标头都可用

> ID：15382407
> 
> 赞同：4
> 
> 时间：2013-03-13T10:15:39.817
> 
> 标签：php, apache

我有一些自定义标题，它在 中不可见`$_SERVER`，但在 help中可见`apache_request_headers()`。

而这样的问题只存在于一个基于 Windows 的 Apache 版本（OpenServer）中。在 Mac 和 Linux 上，Apache 将所有标头传递给 php，我可以在`$_SERVER`变量中看到它......也许对 windows 有一些限制？或者 apache.conf 中是否有任何设置可以激活将所有标头传递给 mod_php ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T13:12:30.960

当 PHP 在 Windows 上作为 Apache 模块运行时，您不会在 $_SERVER 自动全局数组上看到所有标题。

您必须使用 apache_request_headers() 检索它们。您可以使用一些代码来获得跨平台部署：

```
function GetHeader($myheader) {
  if (isset($_SERVER[$myheader])) {
    return $_SERVER[$myheader];
  } else {
    $headers = apache_request_headers();
    if (isset($headers[$myheader])) {
      return $headers[$myheader];
    }
  }
  return '';
} 
```

如果你的 PHP 足够新，你也可以试试 getallheaders()。

[http://php.net/manual/en/function.getallheaders.php](http://php.net/manual/en/function.getallheaders.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:31:51.070

来自 PHP 文档： http: [//php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

在评论中，请注意：

**在 Windows IIS 7 上，您必须使用 $_SERVER['LOCAL_ADDR'] 而不是 $_SERVER['SERVER_ADDR'] 来获取服务器的 IP 地址。**

似乎有些变量名在windows中是不同的，所以你必须找出它们。如果您仔细查看文档注释，其中一些有一些解决方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-04T07:17:50.383

php `$_SERVER`是奇怪的更好的选择是使用`apache_request_headers()`

但是，如果您仍然想使用 `$_SERVER`add`HTTP_`和 replace all `-`to`_`并且**最后一件事要记住，如果请求标头有`_`，那么它根本不会被解析（丢失）**

# javascript - 用其他图像 javascript/html5 填充图像

> ID：15382410
> 
> 赞同：0
> 
> 时间：2013-03-13T10:15:45.823
> 
> 标签：javascript, html, canvas, fill

我需要以下资源的帮助[http://www.filmfans.cz/test/index2.html](http://www.filmfans.cz/test/index2.html) 单击示例后，我不知道如何更改 pinquen 的颜色。我想做类似于以下链接[http://www.pixelbox.sk/fileadmin/Flash/cosmo_2.swf的事情](http://www.pixelbox.sk/fileadmin/Flash/cosmo_2.swf)

这是我的代码

```

    $(window).load(function(){ 
    var width = $(window).width();
    var height = $(window).height(); `var c = document.getElementById("a");
var ctx = c.getContext("2d");

var can2 = document.createElement('canvas');
document.body.appendChild(can2)

can2.width = c.width;
can2.height= c.height;
var ctx2 = can2.getContext("2d");

var test= new Image();
test.src = "tux.png";
test.onload = function() {
ctx2.drawImage(test, 0, 0);   
}

var img = new Image();
img.src = "2.png";
img.onload = function(){

ctx2.globalCompositeOperation = "source-in";
var pattern = ctx2.createPattern(img, "repeat");
ctx2.fillStyle=pattern;
ctx2.fillRect(0,0,300,300);
}

});

$(document).ready(function () {
$('.klik').click(function() {
var adresa = $(this).children('img').attr('src');
var canvas =  document.getElementById("a");
canvas.width = canvas.width;//blanks the canvas
 var c = canvas.getContext("2d");
 var img = new Image();
 img.src = adresa;
 img.onload = function(){

 var pattern = c.createPattern(img, "repeat");
//c.globalCompositeOperation = "source-in";
 c.fillStyle=pattern;
 c.fillRect(0,0,300,300);
 }

  //    c.drawImage(img, 0, 0);
  //}
 //return false;

});
});
</code>
</pre>` 

问题解决了 ！

            回答 #1

赞同：1

时间：2013-03-13T15:41:09.140

使用第二个临时画布`source-in`是正确的想法：

```
 ctx2.drawImage(test, 0, 0);
 ctx2.globalCompositeOperation = 'source-in';
 var ptrn = ctx2.createPattern(pattern,'repeat');
 ctx2.fillStyle = ptrn;
 ctx2.fillRect(0,0,300,300);
 ctx.drawImage(can2,0,0) 
```

活生生的例子：

[http://jsfiddle.net/UcGrC/](http://jsfiddle.net/UcGrC/)

```

# mysql - 从数据库中按月获取全年公司“XYZ”的产品“A”的产品数量总和

> ID：15382412
> 
> 赞同：2
> 
> 时间：2013-03-13T10:15:51.487
> 
> 标签：mysql

我有一个包含产品数量列的表，并且数据库在一个月内有多个条目。例如：日期是字符串格式，因为我使用了 JXDatePicker，所以我无法在 mySql 中以 Date 类型存储日期。日期格式为 (yyyy-MM-dd)

```
2013-03-01 > 1200 (This is product quantity) 
2013-03-05 >200 

2013-04-05 > 500 
2013-04-10 > 1000 

2013-05-05 > 850 
2013-05-10 > 50 
```

所以我想要数据

```
for March(2013-03-01 to 2013-03-31) > SUM OF product i.e : 1400\. 
April (2013-04-01 to 2013-04-30) > SUM OF product i.e : 1500\. 
May (2013-05-01 to 2013-05-31) > SUM OF product i.e : 900\. 
```

我也有不同种类的产品，所以我会根据产品来获取它，例如，考虑到此记录仅适用于客户 'XYZ' 的产品'A'，所以请在 where 子句中考虑这一点。

我尝试使用如下查询来获取每月的数据：

select * from mm_inward Where inward_customerId=1 AND inward_productId=1 ORDER BY FROM_UNIXTIME(inward_dateofdc) ASC

我得到的数据如下

日期格式已更改，因为我是从 Excel 中粘贴的，但请保持上述日期格式。

```
Date of deleivery reciept | Company Name | Product Name | Product Quantity
1/3/2013                  |     XYZ      |     A        |     123
2/7/2013                  |     XYZ      |     A        |     1234
3/14/2013                 |     XYZ      |     A        |     120
3/2/2013                  |     XYZ      |     A        |     1500
4/10/2013                 |     XYZ      |     A        |     454
5/1/2013                  |     XYZ      |     A        |     456
6/18/2013                 |     XYZ      |     A        |     1200 
```

这是我的数据库中的实际数据，其中我有 2 个三月条目

```
3/2/2013 > 1500 
3/14/2013 > 120 
```

所以我想要它的总和，而不是不同地显示两个记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:39:26.653

您需要使用 sum 和 group by 子句。在下面尝试，看看它是否有帮助。检查列名。

```
Select sum(inward_prodQuantity), 
   inward_dateofdc,
   inward_customerName,
   inward_productName

from mm_inward
GROUP BY MONTH(inward_dateofdc) 
```

# android - Android：在 ListView 中显示 XML

> ID：15382414
> 
> 赞同：-1
> 
> 时间：2013-03-13T10:15:58.350
> 
> 标签：android, xml, listview

我想知道是否有可能在 ListView 中显示特定文件夹中的一些 XML 文件。我不想显示来自这些 XML 文件的信息，只显示文件名。例如，如果有 3 个名为“car.xml”、“dog.xml”和“cat.xml”的文件显示在 ListView“Car, Dog, Cat.

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:44:47.017

尝试这样的事情：

```
File sdCardRoot = Environment.getExternalStorageDirectory();
    File yourDir = new File(sdCardRoot, "path");
    for (File f : yourDir.listFiles()){
        if (f.isFile()){
            if(f.getName().endsWith(".xml") || f.getName().endsWith(".XML")) {
                String filename = f.getName();
                String filenameArray[] = filename.split("\\.");
                String name = filenameArray[filenameArray.length-1];
                xmlFilesList.add(name);
            }
        }
    } 
```

# php - PHP变量在html页面中没有得到解决

> ID：15382415
> 
> 赞同：0
> 
> 时间：2013-03-13T10:16:02.973
> 
> 标签：php

我有一个.php，我在其中进行数据库查询并将其分配给这样的列表..

```
list($A,$B)=mysql_fetch_row(mysql_query("SELECT A,B FROM configs WHERE idone=$v AND id='$inputid' LIMIT 1"));

            $p=array();
            $p=@explode(';,',base64_decode($A));
            $bg=$p[0];
            $A='';

            $i=0;
            foreach($p as $X){
                if(++$i>1) $A.='\''.str_replace(':-',':',$X).'\',';
            }

require'templates/inner_play.htm'; 
```

现在在 inner_play.htm ，我使用 $A 和 $B 从上面的列表中像这样..

```
 'image': '<?php echo $A?>',
 'URL' : '<?php echo $B ?>' 
```

我可以获得 $A 的值，但 $B 无法解析。？我错过了什么吗？

**注意：我不能将 inner_play.htm 更改为 php 作为更大模板系统的一部分，并且我确实在同一个 Htm 中获得了 $A 的值，但由于某种原因我没有获得 $B。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:22:22.890

重命名`inner_play.htm`为`inner_play.php`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:22:39.507

您错过了 .html 文件无法执行 PHP 函数，例如`echo`.

如果你想在里面使用任何 PHP，你应该将你的 inner_play.htm 重命名为 inner_play.php。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T11:04:32.723

或者您可以设置服务器以将 html 作为 php 运行：

在您网站的根目录创建一个 .htaccess 文件并添加以下行：

```
AddType application/x-httpd-php .html .htm 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T10:25:43.660

将扩展名更改为 .php 或 .phtml 简单的 htm 扩展名无法理解 php 代码 php 代码
的有效扩展名是 php 和 phtml

# java - 如何在 SWT 的 SashForm 上显示句柄？

> ID：15382420
> 
> 赞同：1
> 
> 时间：2013-03-13T10:16:21.273
> 
> 标签：java, swt

如何在 SWT 上显示句柄/视觉指示`SashForm`？

使用我的代码，没有反馈给用户，实际上有一个窗扇形式：

```
import org.eclipse.swt.custom.SashForm;

// ...

SashForm leftRightSashForm = new SashForm(panel, SWT.HORIZONTAL | SWT.SMOOTH); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T15:50:57.090

AFAIK 目前没有办法改变 SashForm 分隔线的外观。

部分解决方案可能是更改 Sash 本身的背景颜色，这也会更改分隔线的颜色，如下所示：

```
sashForm.setBackground(sashForm.getDisplay().getSystemColor( SWT.COLOR_GRAY)); 
```

![在此处输入图像描述](../Images/d33b3f39599c6ba1a02f22ee6d202f27.png)

# html - 文本不是从输入文本字段的左上角开始

> ID：15382422
> 
> 赞同：17
> 
> 时间：2013-03-13T10:16:23.653
> 
> 标签：html, css

我有一个固定高度的输入字段。文本垂直居中，但我希望它位于输入的左上角。

CSS

```
.wideInput{
    text-align: left;
    padding:  0.4em;
    width: 400px;
    height: 200px;
} 
```

HTML

```
<input class="longInput" value="<?php echo $row['foodPrice']; ?>" /> 
```

这是一个演示问题的 jsFiddle > [http://jsfiddle.net/9cR5j/](http://jsfiddle.net/9cR5j/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T10:23:16.647

而不是`input`你为什么不试试`textarea`？

```
<textarea class="longInput" cols="30" rows="10"></textarea> 
```

它将从左上角添加文本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T10:17:54.543

如果那不是删除`padding: 0.4em;`并设置

```
padding-left:0;
padding-top:0;
padding-bottom:0.4em;
padding-right: 0.4em; 
```

在此处更改更改类名称后

```
<input class="wideInput" value="<?php echo $row['foodPrice']; ?>" /> 
```

而不是`longInput`它将是`wideInput`

* * *

更新

[**带有 TextArea 的 JsFiddle 演示**](http://jsfiddle.net/9cR5j/2/)

这仅适用于 textarea 因为输入只允许在一行中输入值，即不允许输入键或它不换行长文本，它只是在一行中添加数据

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T10:17:50.350

您的填充导致文本从左侧开始 0.4em。如果您希望文本真正左对齐，请删除左侧的填充：

```
.wideInput{
    text-align: left;
    padding: 0.4em 0.4em 0.4em 0;
    width: 400px;
    height: 200px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T10:25:29.323

要左对齐和上对齐，您必须设置较小的高度和填充底部：

```
text-align: left;
padding:  0.4em;
padding-bottom:190px;
width: 400px;
height: 10px; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T10:43:25.420

尝试将字段`line-height`上的 CSS 属性设置为与该`input`字段的相同`height`。

```
height:200px; line-height:200px; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-14T08:44:51.743

正如[Pranay Rana](https://stackoverflow.com/users/1982525/devang-rathod)所说，您的填充导致了问题，他的回答是正确的。此外，您可以将快捷方式属性用于`padding`：

```
padding: 0 0.4rem 0.4rem 0; 
```

这与以下内容相同：

```
padding-left:0;
padding-top:0;
padding-bottom:0.4em;
padding-right: 0.4em; 
```

它按顺时针顺序取值，因此首先是顶部，右侧，底部，然后是左侧。如果您希望文本位于多行，请使用`textarea`而不是常规`input[type=text]`.

# javascript - 使用 document.body.appendChild() 触发 Get 请求

> ID：15382423
> 
> 赞同：1
> 
> 时间：2013-03-13T10:16:23.827
> 
> 标签：javascript, node.js, express

我们可以使用以下代码在我们的快速服务器和客户端网站（甚至跨域）之间交换字符串（完美运行）：

应用程序.js：

```
var express = require("express");
var app = express();
var fs=require('fs');
var stringforfirefox = 'hi buddy!'

app.get('/getJSONPResponse', function(req, res) {

    res.writeHead(200, {'Content-Type': 'application/javascript'});
    res.end("__parseJSONPResponse(" + JSON.stringify( stringforfirefox) + ");");
});
app.listen(8001) 
```

索引.html：

```
 <!DOCTYPE html>
<html>
<head>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.js"></script>
    <script>
        function __parseJSONPResponse(data) {    alert(data); }

        document.onkeypress = function keypressed(e){

            if (e.keyCode == 112) {
                var script = document.createElement('script');
                script.src = 'http://localhost:8001/getJSONPResponse';
                document.body.appendChild(script); // triggers a GET request   ??????

            }

        }
    </script>
    <title></title>
</head>
<body>

</body>
</html> 
```

我们使用 document.createElement() 和 document.body.appendChild() 来触发 Get 请求，作为[此处](https://stackoverflow.com/questions/7596885/cross-domain-jquery-getjson-from-a-node-js-using-express-server-does-not-work#_=_)建议的最高投票答案。我们的问题：用每一个请求创建一个新元素是否可以，因为我们计划用这个提出很多请求。会不会导致任何问题。或者我们应该在收到响应后清除这样的元素吗？

# r - J 内部的行为不一致？

> ID：15382426
> 
> 赞同：-1
> 
> 时间：2013-03-13T10:16:27.600
> 
> 标签：r, data.table

这是一个人为的例子（因此缺乏输出），但它足够简单（希望）来证明我的问题。我想计算按“Country”和“FavoriteColor”分组的每个子组的 mean() Income。

```
#For a single subgroup
mean(dat[J("Blue","Nigeria")]$Income)   #dat is a data.table object             
#For all the subgroups...in the output I obviously 
#see the mean() for Blue/Nigeria subgroup. So far so good.
dat[,mean(Income),by=list((FavoriteColor,Country)] 
```

但是现在，我想要子组的所有收入汇总（）统计数据，而不仅仅是平均值（）。所以我干脆...

```
#For a single subgroup
summary(dat[J("Blue","Nigeria")]$Income)                
#For all the subgroups... but this doesn't do what I expect. 
#It seems to computing something else entirely; I think
#its calling summary() on each row
dat[,summary(Income),by=list(FavoriteColor,Country)] 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T10:49:35.430

如果没有具体的可重现示例，我只是猜测没有意识到`summary`返回将形成单列的数字向量。你可能认为你想要它的广泛形式。

要做到这一点，请换行`summary(income)`，`as.list`因此它将成为一个长度列表`6`

例如比较

```
DT <- data.table(a = letters[1:3],b= letters[1:2],i = 1:36)
DT[,summary(i),by=list(a,b)]
    a b   V1
 1: a a  1.0
 2: a a  8.5
 3: a a 16.0
 4: a a 16.0
 5: a a 23.5
 6: a a 31.0
 7: b b  2.0
 8: b b  9.5
 9: b b 17.0
10: b b 17.0
11: b b 24.5
12: b b 32.0
13: c a  3.0
14: c a 10.5
15: c a 18.0
16: c a 18.0
17: c a 25.5
18: c a 33.0
19: a b  4.0
20: a b 11.5
21: a b 19.0
22: a b 19.0
23: a b 26.5
24: a b 34.0
25: b a  5.0
26: b a 12.5
27: b a 20.0
28: b a 20.0
29: b a 27.5
30: b a 35.0
31: c b  6.0
32: c b 13.5
33: c b 21.0
34: c b 21.0
35: c b 28.5
36: c b 36.0
    a b   V1 
```

和

```
DT[,as.list(summary(i)),by=list(a,b)]
   a b Min. 1st Qu. Median Mean 3rd Qu. Max.
1: a a    1     8.5     16   16    23.5   31
2: b b    2     9.5     17   17    24.5   32
3: c a    3    10.5     18   18    25.5   33
4: a b    4    11.5     19   19    26.5   34
5: b a    5    12.5     20   20    27.5   35
6: c b    6    13.5     21   21    28.5   36 
```

`long`如果您希望以类似的格式保留名称

```
DT[,{s <- summary(i); list(s, names(s))},by=list(a,b)] 
```

将工作。

# javascript - javascript: blob 数据到文件

> ID：15382433
> 
> 赞同：0
> 
> 时间：2013-03-13T10:16:56.713
> 
> 标签：javascript, binary-data, filereader

我有一个代码：

```
var FReader = new FileReader();
FReader.onload = function(evnt){
  console.log(evnt.target.result);
  //How can I convert `evnt.target.result` back into a file and save it?
}

FReader.readAsBinaryString(file); 
```

请不要让我使用其他方法。这是一个非常简化的代码。在原始代码中，此数据通过 websockets 传递给其他人。我需要将其转换为文件。

如何转换`evnt.target.result`回文件并保存？

# ios - 用于放大和缩小的 IOS 核心动画

> ID：15382435
> 
> 赞同：0
> 
> 时间：2013-03-13T10:16:58.293
> 
> 标签：ios, zooming, uiviewanimation

![图像拍摄 1](../Images/6f7a0507d793ab9fd0e35fd3dbfa6ff5.png)![图像拍摄 2](../Images/6f1f6012d7b5efc8e9850abdfb068f4c.png)

我正在使用一个图片视图，它需要在点击时放大和缩小，我已经搜索了正确的放大和缩小，但没有找到（我试图用 UIView 完成相同的任务，但效果不好），所以我过来问有没有机构可以帮忙？

我在 tableview 中组装了 4 张图像，连续 2 张。我想要的是如果用户点击图像，它只是放大，如果他再次点击它应该缩小。以下是我迄今为止尝试过的代码示例

```
[UIView animateWithDuration:1.0f animations:^{
    img.frame = CGRectMake(0, 0, 300, 300);
    img.alpha = 1.0;
}]; 
```

但是当我尝试使用它时，它不是放大，而是从 4 个对角线之一转换:( 我希望我已经尽可能地解决了这个问题。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:36:07.857

1.  您需要为每个`UIImageView`要添加到单元格的点击手势识别器添加。
2.  您需要隐藏`UIImageView`才能在用户点击图像时显示。这是您在点击时所做的： 2.1 将图像分配给您的 hidden `UIImageView`，将其 alpha 设置为 0.0 并使其不隐藏 2.2 为隐藏的图像视图设置适当的框架。2.3 对图像的显示进行动画处理

> ```
> [UIView animateWithDuration:1.0f animations:^{
>     img.frame = CGRectMake(0, 0, 300, 300);
>     img.alpha = 1.0;
> }]; 
> ```

2.4 将点击手势识别器添加到隐藏的图像视图中，以便在用户点击时将其关闭。2.5 在用户点击时制作反向动画，例如在uiview 动画块中将显示的图像视图的alpha 设置为0.0。

假设你会学习并记住这些东西，我没有提供整个事情的代码。祝你好运！

编辑：不要忘记将隐藏的 uiimageview 添加到您的视图中。

# android - android中的动画在动画完成后暂停图像？

> ID：15382446
> 
> 赞同：0
> 
> 时间：2013-03-13T10:17:22.407
> 
> 标签：android, android-animation

我在 android 中为两个按钮创建动画。Button1 从底部中心垂直向上移动到屏幕中心（比如 2 秒）。一旦到达那里，图像应该在那里 2 秒。然后是第二个图像当第一个按钮仍然存在时，从屏幕的 center_right 侧移动到屏幕的 center_left 侧。有人可以告诉我如何让第一个图像在屏幕上显示一段时间。以下是我的代码：

R.anim.alpha

```
<?xml version="1.0" encoding="utf-8"?>
    <set xmlns:android="http://schemas.android.com/apk/res/android">
        <translate 
            android:fromYDelta="200%p" 
            android:toYDelta="-11%p" 
            android:duration="3000"
            android:repeatCount="infinite"
            />
    </set> 
```

R.anim.anim_card

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate
      android:fromXDelta="600%"
    android:toXDelta="-100%"
    android:repeatCount="infinite"
    android:duration="4000"
    android:fillAfter="true"
    />
</set> 
```

在 Java 代码中：

```
 Animation a = AnimationUtils.loadAnimation(this, R.anim.alpha);
    a.reset();
    _image.clearAnimation();
    _image.startAnimation(a);

    Animation b =AnimationUtils.loadAnimation(this, R.anim.anim_card);
            b.reset();
            btn_card.clearAnimation();
            btn_card.startAnimation(b); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:20:00.407

为此，您将不得不使用 AnimationListener：

```
 Animation a = AnimationUtils.loadAnimation(this, R.anim.alpha);
 a.reset();
 _image.clearAnimation();
 _image.startAnimation(a);

 Animation b =AnimationUtils.loadAnimation(this, R.anim.anim_card);
 b.reset();

 a.setAnimationListener(new AnimationListener() {

            @Override
            public void onAnimationStart(Animation animation) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onAnimationRepeat(Animation animation) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onAnimationEnd(Animation animation) {
                // TODO Auto-generated method stub
            btn_card.clearAnimation();
            btn_card.startAnimation(b);
            }
        }); 
```

希望能帮助到你。

# c# - 从 xml 的元素名称和值创建对象

> ID：15382447
> 
> 赞同：1
> 
> 时间：2013-03-13T10:17:23.470
> 
> 标签：c#, .net, xml, linq

我已经关注了 XML。它有元素节点和文本。我必须为每个`element`节点（仅）创建以下类的对象。元素的名称及其值需要存储在对象中。我怎样才能做到这一点？

```
 public class MyElement
    {
        public string ElementName { get; set; }
        public string ElementValue { get; set; }
    } 
```

**代码**

```
 static void Main(string[] args)
   {

        XDocument pDoc = XDocument.Parse(@"<main>
                                             Direct 1
                                            <sub1>A</sub1>
                                             Direct 2
                                            <sub2>B</sub2>
                                            <sub3>C</sub3>
                                             00
                                         </main>");

        IEnumerable<XNode> nodes = from c in pDoc.Elements().Nodes()
                                      select c;

        IEnumerable<MyElement> entityCollection = nodes.Select(v => new MyElement()
                             {
                                ElementName = v.ToString()
                             }).ToList();

    } 
```

所需的结果将如下所示

```
List<MyElement> sampleRequiredList = new List<MyElement>();
sampleRequiredList.Add(new MyElement() { ElementName = "sub1", ElementValue = "A" });
sampleRequiredList.Add(new MyElement() { ElementName = "sub2", ElementValue = "B" });
sampleRequiredList.Add(new MyElement() { ElementName = "sub3", ElementValue = "C" }); 
```

**更新**

以下是基于所选答案的解决方案。

```
 var elementsUsingRoot = pDoc.Root.Elements();
        var nodesUsingRoot = pDoc.Root.Nodes();

        var secondCollection = pDoc.Root.Elements()
                      .Select(x => new MyElement
                      {
                          ElementName = x.Name.LocalName,
                          ElementValue = x.Value
                      });

        //Text Nodes
        IEnumerable<XText> textNodes = from c in pDoc.Root.Nodes()
                                       where c.NodeType == XmlNodeType.Text
                                       select (XText)c;

        //Element Nodes
        IEnumerable<XElement> elementNodes = from c in pDoc.Root.Nodes()
                                             where c.NodeType == XmlNodeType.Element
                                             select (XElement)c;

        //Element Nodes 2
        IEnumerable<XElement> elementNodes2 = from c in pDoc.Root.Elements()
                                              select c; 
```

参考

1.  [如何获取 XElement 的值而不是所有子节点的值？](https://stackoverflow.com/questions/4251215/how-to-get-xelements-value-and-not-value-of-all-child-nodes)
2.  [使用 LINQ 从 xml 创建实体对象的最佳方法](https://stackoverflow.com/questions/15380694/best-way-to-create-entity-objects-from-xml-using-linq)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:19:05.883

听起来你想要这样的东西：

```
var entityCollection = doc.Root
                          .Elements()
                          .Select(x => new MyElement {
                                           ElementName = x.Name.LocalName,
                                           ElementValue = x.Value
                                       }); 
```

# javascript - 如何使用 jQuery / javascript 为所有请求设置身份验证标头？

> ID：15382450
> 
> 赞同：0
> 
> 时间：2013-03-13T10:17:26.487
> 
> 标签：javascript, jquery, digest-authentication

我有一个处理摘要身份验证的自定义网络服务器。我有一个网络客户端，它连接到网络服务器并在 javascript 中执行摘要身份验证，即没有弹出窗口。

**客户端**

为避免此类弹出窗口（在 401 错误中总是如此），客户端请求带有自定义警告标头的数据

```
new XMLHttpRequest();
request.open('GET', urlToGet + "?" + Math.random(), false);
request.setRequestHeader("Warning","CustomRequest"); 
```

**服务器端**

每当网络服务器获得一个 CustomRequest 警告标头时，它都会回复一个自定义 HTTP 代码 (406) 和一个 auth 标头。

然后客户端解析服务器标头，创建散列的身份验证字符串，我可以识别。到目前为止，一切都很好（另请参阅我以前的问题[here](https://stackoverflow.com/questions/13934240/is-there-a-way-to-channel-some-http-server-events-into-a-single-javascript-funct)和[here](https://stackoverflow.com/questions/13821003/code-example-for-c-sharp-and-javascript-sha256-hashing)）。

现在我有了好的标题，我希望我的浏览器在我提出的每个请求中都包含它，它是 CSS

```
 background-image: url(IMAGE_URL); 
```

或jQuery

```
 $('#theDiv').prepend('<img id="theImg" src=IMAGE_URL />') 
```

或 jquery / AJAX

```
 $.ajax({
            url: SOME_URL,
            // ...
        }); 
```

后者可能是最简单的，因为我可以使用

```
beforeSend : function(req) {req.setRequestHeader('Authorization',authHeader);} 
```

并且我知道 authHeader。

是否可以使用 jquery/javascript 告诉浏览器“从现在开始的所有请求都应该有这个授权头？

另一种方法是在网络服务器端实现会话，这是我很乐意避免的。

# iphone - ios6中mapView中的路径跟踪

> ID：15382452
> 
> 赞同：0
> 
> 时间：2013-03-13T10:17:37.393
> 
> 标签：iphone, path, gps, mapkit, trace

我添加了 MapView 和显示当前位置所需的条件，并通过按钮功能从苹果文档中添加了这个方法。

```
- (IBAction)refreshMapMethod:(id)sender 
```

{

```
double latitude = 39.281516;
double longitude =-76.580806;

MKPlacemark *placemark = [[MKPlacemark alloc]    initWithCoordinate:CLLocationCoordinate2DMake(latitude, longitude) addressDictionary:nil];
MKMapItem *mapItem = [[MKMapItem alloc] initWithPlacemark:placemark];
[mapItem setName:@"Name of your location"];
[mapItem openInMapsWithLaunchOptions:nil];

/////
////////

CLLocation* fromLocation = mapItem.placemark.location;

// Create a region centered on the starting point with a 10km span

MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(fromLocation.coordinate, 10000, 10000);

// Open the item in Maps, specifying the map region to display.

[MKMapItem openMapsWithItems:[NSArray arrayWithObject:mapItem]
               launchOptions:[NSDictionary dictionaryWithObjectsAndKeys:
                              [NSValue valueWithMKCoordinate:region.center], MKLaunchOptionsMapCenterKey,
                              [NSValue valueWithMKCoordinateSpan:region.span], MKLaunchOptionsMapSpanKey, nil]]; 
```

}

按下按钮后，我将获得具有所有功能的新视图，例如通过长按在地图视图上添加注释、跟踪路径等等。这是如何通过小功能发生的

任何想法请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:25:46.650

两者都`openInMapsWithLaunchOptions:`将`openMapsWithItems:launchOptions:`打开 Apple Maps 应用程序（并将您的应用程序置于后台）。这可能不是你想要的。

# sqlite - 从 SQLite 获取记录，其中日期字段保存为 android 中的文本

> ID：15382455
> 
> 赞同：0
> 
> 时间：2013-03-13T10:17:43.060
> 
> 标签：sqlite, android-sqlite

嗨朋友

我在 android 中有一个严重的问题。我使用 SQlite 作为我的数据库。在我的应用程序中，我将日期存储为文本字段，因为 sqlite 没有日期数据类型。在报告部分中，我从用户获取从 sqlite 获取记录的日期，如下所示，

```
select * from Table2 where TDate >= '2013-1-1' and TDate <='2013-3-1' 
```

问题是上述查询运行正确，但是当我使用月份高于 10 的日期时，例如“2013-10-1”或“2013-11-1”或“2013-12-1”，它没有获取任何记录请帮忙

谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:49:08.310

您必须使用一种[受支持的日期格式](http://www.sqlite.org/datatype3.html#datetime)，例如`yyyy-mm-dd`这样才能正确进行字符串比较。（在字符串中，`1`< `9`，因此`10`< `9`。）

# c# - 使用 VSPackage 突出显示 Visual Studio 工具窗口中的代码窗口文本

> ID：15382456
> 
> 赞同：2
> 
> 时间：2013-03-13T10:17:43.310
> 
> 标签：c#, visual-studio-2010, vs-extensibility, vspackage

我对 Visual Studio Extensions 很陌生。有没有办法从 Visual Studio 2010 工具窗口与代码窗口交互。我在 VisualStudio 工具窗口上托管了一个 Datagrid。DataGrid 包含 ClassName、MethodName 等。点击className/MethodName需要达到以下

1.  打开包含 className/MethodName 的特定 .cs 文件
2.  突出显示特定的类名/方法名。

我知道使用“IWpfTextView”类可以实现这一点，但不确定如何。做了很多谷歌搜索但徒劳无功。即使下面的链接仍然是未回答的[链接](https://stackoverflow.com/questions/13717823/how-to-highlight-a-text-in-the-opend-file-from-vspackage/15382107#15382107)。

对上述任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:09:48.507

我实际上做了几乎同样的事情。[您可以在Visual Localizer](http://visuallocalizer.codeplex.com "视觉定位器")上查看完整的源代码。

基本上你需要做两件事：

1.  获取文件的 IVsTextView 实例
2.  调用它的 SetSelection() 方法，该方法将范围（起始行、结束行、起始列、结束列）作为参数。您可能还想调用 EnsureSpanVisible() 向下滚动。

获取 IVsTextView 也很容易。在我的项目（Visual Localizer）中，有一个名为 DocumentViewsManager 的类，位于 VLlib/components 中，它有一个相当简单的方法，称为 GetTextViewForFile()，它只接受文件路径作为参数。它执行以下操作：

1.  使用 VsShellUtilities.IsDocumentOpen 方法获取给定文件路径的 IVsWindowFrame
2.  将此传递给 VsShellUtilities.GetTextView 方法，该方法返回 IVsTextView

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:30:33.330

谢谢cre8or。我找到了另一种方法来做同样的事情。

您需要使用“TextSelection”类来突出显示上面的代码行。

```
 foreach (CodeElement codeElement in projectItem.FileCodeModel.CodeElements)// search for the function to be opened
    {
        // get the namespace elements
        if (codeElement.Kind == vsCMElement.vsCMElementNamespace)
        {
            foreach (CodeElement namespaceElement in codeElement.Children)
            {
                // get the class elements
                if (namespaceElement.Kind == vsCMElement.vsCMElementClass || namespaceElement.Kind == vsCMElement.vsCMElementInterface)
                {
                    foreach (CodeElement classElement in namespaceElement.Children)
                    {
                        try
                        {
                            // get the function elements to highlight methods in code window
                            if (classElement.Kind == vsCMElement.vsCMElementFunction)
                            {
                                if (!string.IsNullOrEmpty(highlightString))
                                {
                                    if (classElement.Name.Equals(highlightString, StringComparison.Ordinal))
                                    {
                                        classElement.StartPoint.TryToShow(vsPaneShowHow.vsPaneShowTop, null);

                    classElement.StartPoint.TryToShow(vsPaneShowHow.vsPaneShowTop, null);

                        // get the text of the document
                     EnvDTE.TextSelection textSelection = window.Document.Selection as EnvDTE.TextSelection;

                        // now set the cursor to the beginning of the function
                        textSelection.MoveToPoint(classElement.StartPoint);
                        textSelection.SelectLine();

                                    }
                                }
                            }
                        }
                        catch
                        {
                        }
                    }
                }
            }
        }
    } 
```

# asp.net - 自定义图像按钮控件单击处理程序未触发

> ID：15382467
> 
> 赞同：3
> 
> 时间：2013-03-13T10:18:12.780
> 
> 标签：asp.net, webforms

我在创建基于 ASP.NET 的 ImageButton 控件的新控件时遇到了一些问题。一切都按预期工作，除了在控件的 OnInit 覆盖中连接的单击处理程序。基本上，单击自定义图像按钮只会刷新页面，而不会点击处理程序。

现在，我知道这是我做过的或只是不理解的愚蠢的事情，但我一生都无法弄清楚这一点。我发现的关于控件事件处理问题的所有文章、问题和论坛帖子都是针对子控件的，而不是那些继承自现有控件类型并具有自己的预定义处理程序的控件。

以下代码是我写的：

```
public class WebPaymentButton : ImageButton
{
    public string DisabledImageUrl { get; set; }

    public string TermsAcceptClass { get; set; }

    protected override void OnPreRender(EventArgs e)
    {
        Page.ClientScript.RegisterClientScriptResource(typeof (WebPaymentButton), "PaymentModule.Scripts.WebPaymentButtonScript.js");
    }

    protected override void OnInit(EventArgs e)
    {
        CssClass = "WebPaymentButton";

        if (!string.IsNullOrWhiteSpace(TermsAcceptClass))
        {
            Attributes["data-TermsClass"] = TermsAcceptClass;
        }

        if (!string.IsNullOrWhiteSpace(DisabledImageUrl))
        {
            Attributes["data-DisabledImageUrl"] = ResolveUrl(DisabledImageUrl);
        }

        Click += WebPaymentButton_Click;

        base.OnInit(e);
    }

    private void WebPaymentButton_Click(object sender, ImageClickEventArgs e)
    {
        HttpContext.Current.Response.Redirect("http://dummy_payment_page_in_place_of_code", true);
    }
} 
```

我尝试将处理程序连接到 OnLoad 中，并将其切换为在 base.OnInit/OnLoad 调用之后运行。没有什么能解决处理程序的问题。谁能指出我正确的方向？

如果有帮助，这里是页面上按钮的标记：

```
<pm:WebPaymentButton runat="server" ImageUrl="~/pay-now.png" DisabledImageUrl="~/not-pay-now.png" TermsAcceptClass="TermsCheckbox" ID="MainPayButton" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:05:10.507

您是否尝试过覆盖`OnClick`事件处理程序而不是连接到新的事件处理程序？

从函数中删除该`Click += WebPaymentButton_Click`行`OnInit`并删除该`WebPaymentButton_Click`函数，然后将以下代码添加到您的类中：

```
protected override void OnClick(ImageClickEventArgs e)
{
    base.OnClick(e);
    HttpContext.Current.Response.Redirect("http://dummy_payment_page_in_place_of_code", true);
} 
```

# wpf - WPF - 必须是页面一部分的网格

> ID：15382476
> 
> 赞同：0
> 
> 时间：2013-03-13T10:18:33.137
> 
> 标签：wpf, c#-4.0, button, grid

现在我有一个问题，因为我想创建一些我想用 a`Grid`和填充到`Grid`. 我想创建一系列`Button`.

我怎样才能创建一个`Grid`到一个`Page`？

我尝试使用以下代码：

```
SortedList<string, Page> pageList = new SortedList<string, Page>();

for (int i = 0; i < 3; i++)
{
    pageList.Add(string.Format("Page{0}", i), new Page());
}

Grid LayoutRoot = new Grid(); // ??????? 
```

我能做些什么来将 a 插入`Grid`到 a 中`Page`？我想参考`Grid`例如：

```
pageList["Page2"].LayoutRoot; 
```

谢谢。

# php - 使用 PHP SOAP 的 Sage Web 服务

> ID：15382477
> 
> 赞同：2
> 
> 时间：2013-03-13T10:18:34.833
> 
> 标签：php, web-services, soap, xsd, sage-crm

我正在使用 php SOAP 将潜在客户数据发布到我客户的 SAGE CRM，创建记录（返回 crmid）但包含空值。由于某些未知原因，我的 xml 数据包被忽略了。SAGE 文档没有给出向 CRM 添加记录 (addrecord) 的 xml 示例。有人可以帮忙吗？addrecord 函数的正确 xml 格式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-13T09:27:54.827

我知道这是 2013 年的一个问题，但最好还是回答一下，以防其他人来寻找解决方案。

以下是将新机会上传到 Sage CRM 的示例。我没有看到您正在生成的 xml，但我会先使用`add`而不是`addrecord`. 我以前没有使用`addrecord`过，所以我无法帮助您理解这种上传数据的格式。

请注意这些`*Specified`字段，因为它们很重要。任何要填充的具有相关`*Specified`字段的字段都必须将其设置为 true。否则，该字段可能不会被填充。

下面示例中的大多数值必须替换为实际值。是最`SID`重要的一个。

`<records>`您可以在`<add>`标签中输入多个。

```
<?xml version='1.0' encoding='utf-8' ?>
<soap:Envelope xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema'>
<soap:Header>
    <SessionHeader xmlns='http://tempuri.org/type'>
        <sessionId>SID</sessionId>
    </SessionHeader>
</soap:Header>
<soap:Body>
    <add xmlns='http://tempuri.org/type'>
        <entityname>opportunity</entityname>
            <records xsi:type='opportunity'>
                <description>description</description>
                <forecast>forecast_value</forecast>
                <forecastSpecified>true</forecastSpecified>
                <certainty>certainty</certainty>
                <certaintySpecified>true</certaintySpecified>
                <targetclose>targetclose</targetclose>
                <targetcloseSpecified>true</targetcloseSpecified>
                <forecast_cid>forecast_cid</forecast_cid>
                <forecast_cidSpecified>true</forecast_cidSpecified>
                <total_cid>total_cid</total_cid>
                <total_cidSpecified>true</total_cidSpecified>
                <totalorders_cid>total_orders_cid</totalorders_cid>
                <totalorders_cidSpecified>true</totalorders_cidSpecified>
                <totalquotes_cid>totalquotes_cid</totalquotes_cid>
                <totalquotes_cidSpecified>true</totalquotes_cidSpecified>
                <source>source</source>
                <type>type</type>
                <stage>stage</stage>
                <status>status</status>
                <assigneduserid>assigneduserid</assigneduserid>
                <assigneduseridSpecified>true</assigneduseridSpecified>
                <channelid>channelid</channelid>
                <channelidSpecified>true</channelidSpecified>
                <priority>priority</priority>
                <currency>cid</currency>
                <currencySpecified>true</currencySpecified>
                <primarycompanyid>primarycompanyid</primarycompanyid>
                <primarycompanyidSpecified>true</primarycompanyidSpecified>
                <primarypersonid>primarypersonid</primarypersonid>
                <primarypersonidSpecified>true</primarypersonidSpecified>
            </records>
        </add>
    </soap:Body>
</soap:Envelope> 
```

[您可以在https://community.sagecrm.com/user_community/m/cloud_documentation/27076.aspx](https://community.sagecrm.com/user_community/m/cloud_documentation/27076.aspx)找到 Web 服务文档

下载 wsdl 文件以获取有关每个可用字段和实体的更多详细信息。

# javascript - 如何在 NDV3 Discreate 条形图中设置自定义条形宽度

> ID：15382481
> 
> 赞同：9
> 
> 时间：2013-03-13T10:18:46.073
> 
> 标签：javascript, charts, bar-chart, nvd3.js

我正在尝试使用 nvd3 图表构建垂直条形图。

问题：如果图表有单条记录，条形宽度达到图表宽度的 3/4。

问题：如何更改离散条形图中条形的宽度？

附上图表请指导我..

![在此处输入图像描述](../Images/221ec1fb42399446a814bf534c27aebf.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-01T21:21:33.930

如果您在[这里](https://github.com/novus/nvd3/blob/master/src/models/discreteBarChart.js#L147)查看源代码。您会看到矩形的宽度是根据使用[rangeBand](https://github.com/mbostock/d3/wiki/Ordinal-Scales#wiki-ordinal_rangeBand)的项目数计算的。似乎没有办法通过库的 API 设置矩形的宽度。

如果您不想修补库，您*可以*使用零数据创建额外的假条，并提供一个标签格式化程序，如果值为零，它将返回一个空字符串，但假定零不是数据集中的有效数字.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-09T07:38:39.837

使用以下代码设置宽度

```
dispatch: {
    renderEnd: function (e) {
        d3.selectAll("rect.nv-bar").attr('rx', 4).attr('ry', 4).attr('width', 15)
    }
} 
```

或者你可以使用

```
groupSpacing : 0.57, 
```

# java - 通过jsp调用存储过程时出错

> ID：15382483
> 
> 赞同：0
> 
> 时间：2013-03-13T10:18:50.280
> 
> 标签：java, jsp, jdbc

下面是我的jsp程序没有正确执行。它直接返回异常错误消息。jdbc连接在包含文件中。这里batchcode和ccode是复合键。程序应该首先检查这些是否已经插入到数据库中然后它应该插入。

```
procedure:
create or replace procedure udp_addbatch(
p_batchcode  varchar2,
p_ccode  varchar2
)
as 
BEGIN
INSERT INTO BATCHES(BATCHCODE,CCODE) VALUES(p_batchcode,p_ccode);
commit;
END ;
/

**jsp file**

        <html>
<%@page import="java.sql.*, java.lang.String" %>
<head>
<style type='text/css'>
input{
     FONT-FAMILY: Verdana; FONT-SIZE:10pt; color:blue;
}
body{ 
    FONT-FAMILY:Verdana;
    FONT-SIZE:10pt;
    FONT-WEIGHT:Bold;
    }
table{
    FONT-FAMILY:Verdana;
    FONT-SIZE:10pt;
    FONT-WEIGHT:Bold;
     }
H1,H2,H3{
    FONT-FAMILY:Verdana;
    FONT-SIZE:13pt;
    FONT-WEIGHT:Bold;
    COLOR:BLUE;
    }
SELECT {
        font-family : verdana; font-size : 9pt; background-color : #FCFCFC; border: 1px solid #000000; color:blue;
        } 
TEXTAREA { 
    font-family : verdana; font-size : 9pt; background-color : #FCFCFC; border: 1px solid #000000; color:blue;
        }
</style>
</head>
<body bgcolor="white">
<%@include file="jdbcresults.jsp"%>
<%

    ResultSet rs=null;
    int nr;
        CallableStatement cstmt=null;
    try
    {   

        String BatchCode=request.getParameter("BatchCode");
        String CCode=request.getParameter("CCode");

        cstmt=con.prepareCall("{call udp_addbatch(?,?)}");
                cstmt.setString(1,BatchCode);
                cstmt.setString(2,CCode);

                rs=cstmt.executeQuery("select * from Batches where CCode='"+CCode+"' and BatchCode='"+BatchCode+"'");
        if (!rs.next())
        {
            cstmt.executeUpdate();
            out.println("<h2 align='center'> Batch and course Successfully added</h2>");
        }
        else
            {
                            out.println("<h2 align='center'> Batch and Course already Exists</h2>");
               out.println("<center><a href='Addbatch.jsp'>Go Back</a></center>");
                }

         rs.close();
        cstmt.close();
         con.close();
    }

catch(Exception e){ e.printStackTrace();} 
        out.print("<h2 align='center'>course doesn't exist");
                out.println("<center><a href='Addbatch.jsp'>Go Back</a></center>");
                }
finally{
        // The finally clause is always executed - even in error
        // conditions PreparedStatements and Connections will always be closed
        try
        {
                  if (cstmt = null)
                              cstmt.close();
        }
        catch(Exception e) {}

        try
        {
                  if (con = null)
                              con.close();
        }
        catch (Exception e){}
        }
}

    %>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:00:21.033

首先修改你的程序如下

```
CREATE OR REPLACE
PROCEDURE udp_addbatch(
    p_batchcode IN VARCHAR2,
    p_ccode     IN VARCHAR2,
    o_var OUT NUMBER )
AS
  v_count NUMBER;
BEGIN
  SELECT COUNT(*)
  INTO v_count
  FROM batches
  WHERE BATCHCODE=p_batchcode
  AND CCODE      =p_ccode;
  IF(v_count < 1 ) THEN
    INSERT INTO BATCHES
      (BATCHCODE,CCODE
      ) VALUES
      (p_batchcode,p_ccode
      );
    o_var := 1;
  ELSE
    o_var := 0;
  END IF;
END ;
-- you can add exception handling
/ 
```

并且在您的 JSP 中执行以下操作，这还没有完全测试，最好将 Java 代码移出 JSP 并为数据库连接设置单独的类。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<%@ page contentType="text/html;charset=windows-1252"%>
<html></html>
<html>
        <%@ page import="java.sql.*, java.lang.String"%>
        <head>
                <style type='text/css'>
input{
     FONT-FAMILY: Verdana; FONT-SIZE:10pt; color:blue;
}
body{ 
    FONT-FAMILY:Verdana;
    FONT-SIZE:10pt;
    FONT-WEIGHT:Bold;
    }
table{
    FONT-FAMILY:Verdana;
    FONT-SIZE:10pt;
    FONT-WEIGHT:Bold;
     }
H1,H2,H3{
    FONT-FAMILY:Verdana;
    FONT-SIZE:13pt;
    FONT-WEIGHT:Bold;
    COLOR:BLUE;
    }
SELECT {
        font-family : verdana; font-size : 9pt; background-color : #FCFCFC; border: 1px solid #000000; color:blue;
        } 
TEXTAREA { 
    font-family : verdana; font-size : 9pt; background-color : #FCFCFC; border: 1px solid #000000; color:blue;
        }
</style>
        </head>
        <body bgcolor="white"><%
     // Hope you are getting the connection part  
        Connection con = null; 
        CallableStatement cstmt=null;
        String BatchCode=request.getParameter("BatchCode");
        String CCode=request.getParameter("CCode");

 try {
cstmt=con.prepareCall("{call udp_addbatch(?,?,?)}");
                cstmt.setString(1,BatchCode);
                cstmt.setString(2,CCode);                
                cstmt.registerOutParameter(3, Types.INTEGER);     
                cstmt.executeUpdate(); 
                int val = cstmt.getInt(3);

       if (val == 1) {
       out.println("<h2 align='center'> Batch and course Successfully added</h2>");
       }
       else {
       out.println("<h2 align='center'> Batch and Course already Exists</h2>");
       // and do your stuff
       }
       }
       catch(Exception e){
       e.printStackTrace();
       }
       finally {
       cstmt.close();
       con.close();
       }

%></body>
</html> 
```

# jquery - 如何从 javascript 中查找歌曲？

> ID：15382485
> 
> 赞同：0
> 
> 时间：2013-03-13T10:18:55.557
> 
> 标签：jquery, html, activeadmin, jplayer

我正在使用 RoR、活动管理员、jQuery，这是我的代码：

```
$(document).ready(function () {
    $("#jquery_jplayer_1").jPlayer({
        ready: function () {
            pr_id = document.numform.profitable_route_id.value;
            $(this).jPlayer("setMedia", {
                mp3: "http://www.jplayer.org/audio/mp3/Miaow-04-Lismore.mp3"
            });
        },
        swfPath: "js",
        supplied: "mp3",
        wmode: "window"
    });
}); 
```

但不是加载这首歌：[http](http://www.jplayer.org/audio/mp3/Miaow-04-Lismore.mp3) ://www.jplayer.org/audio/mp3/Miaow-04-Lismore.mp3 “我想从我的电脑加载一首歌，我该怎么做？谢谢！

# db2 - 在不同时间对同一数据库进行 DB2 恢复的名称

> ID：15382490
> 
> 赞同：0
> 
> 时间：2013-03-13T10:19:05.107
> 
> 标签：db2, restore, db2-luw

每次我对同一个数据库执行**恢复**，但在不同的时间（不同的版本恢复），存档日志目录中都会创建一个 CXXXXXXX 目录。这是正常的，但我想知道那个新的 db 分支的正确术语。它是如何在**db2**中调用的？

*   一把叉子
*   分店
*   化身

这就像脑裂，但不是在 HADR 中，而是在同一台机器上执行恢复时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:58:30.587

这些被称为*日志链*。每个日志链都与一个特定的数据库*种子*相关联。当您执行时间点恢复时，DB2 会增加数据库种子。

# database - DB2-编译所有存储过程

> ID：15382494
> 
> 赞同：1
> 
> 时间：2013-03-13T10:19:14.057
> 
> 标签：database, db2

我正在使用具有 100 个存储过程、视图和物化视图的遗留数据库。现在我必须在其中一个表中引入一列，并想检查一切是否像以前一样正常工作。

我正在寻找一个查询，它可以编译我的架构下的所有存储过程，通过从中获取 10 行来运行所有视图/物化视图。你能帮我吗？

谢谢，-迈克

# zend-framework - 我如何在 Zend ->where 中使用 now()

> ID：15382496
> 
> 赞同：0
> 
> 时间：2013-03-13T10:19:19.507
> 
> 标签：zend-framework

如何在 Zend 中使用 now()？我到处搜索，但找不到问题的正确答案。

我需要让它工作，但它不会工作。

```
->where('online <= now()'); 
```

我也试过

```
->$today = date("Y-m-d H:i:s");   

->where('online <= $today') 
```

正确的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:23:49.420

我假设错误与 sql where 语句有关 - 请包含错误，以便我们可以正确评估错误。

如果在线字段是时间戳尝试，

```
->where('online <= ?', now()); 
```

或者如果在线字段是日期时间字段，请尝试，

```
->$today = date("Y-m-d H:i:s");   
->where('online <= ?', $today) 
```

本质上，我添加了`?`表示表达式应该期望的参数。然后由变量提供。更改`'`to`"`也可以，但这种方法更好，因为它使用参数而不是直接 sql 输入。

[有关在zend 框架](http://framework.zend.com/manual/1.12/en/zend.db.table.row.html)中创建查询的更多信息。

# inheritance - 通过在 coffeescript 中定义类继承来使用 super 编译时会出现解析错误

> ID：15382499
> 
> 赞同：0
> 
> 时间：2013-03-13T10:19:32.470
> 
> 标签：inheritance, coffeescript, super, parse-error

我正在尝试定义一个从咖啡脚本中的另一个基类继承的类，并且在编译时出现解析错误。Exyctly：*第 6 行解析错误：意外的“，”* 我的代码如下所示：

```
class MedVisGraphNode
constructor : (@nodeId, @nodeLabel) ->

class MedVisGenericContainerNode extends MedVisGraphNode
constructor : (groupId, groupLabel, @groupType, @outerGroupNode) ->
    super (groupId, groupLabel)

# method which determines if the actual group-node group lies in an another or sist on top of the hierarchy
isOnTopOfHierarchy = () ->
    return @outerGroupNode == 'undefined' 
```

奇怪的是，当我尝试编译从网上获取的类似代码[时](http://www.gridlinked.info/oop-with-coffeescript-javascript/)：

```
class Animal
constructor : (@species, @isMammal=false) ->

class Dog extends Animal
constructor : (@name) ->
    super ("canine",true)

toString : ->
    "#{@name} is a #{@species}." 
```

我得到相同的解析错误。我现在很困惑，因为我无法找到问题所在，请有人给我一个小提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:32:49.723

要么不使用括号，要么确保它和之间没有空格`super`：

```
super 'canine', true
// or
super('canine', true) 
```

# node.js - 如何在 net beans 中运行 node.js 文件？

> ID：15382509
> 
> 赞同：8
> 
> 时间：2013-03-13T10:20:02.573
> 
> 标签：node.js, netbeans

在 net beans 我已经安装了 node.js pulgin。但是我的示例节点程序不工作。我得到错误。这是我的示例代码

```
 var http = require("http");
    http.createServer(function (req, res) {
    res.writeHead(200, {"Content-Type": "text/plain"});

    res.end("Hai! welcome to node.js...!\n");

      }).listen(3030, "localhost");

   console.log("Server running at http://127.0.0.1:3030/");/* 
```

运行上述程序时，出现以下错误。

```
 module.js:340
                 throw err;
                     ^
         Error: Cannot find module 'C:\Program Files\NetBeans 7.0.1\hello.js'
        at Function.Module._resolveFilename (module.js:338:15)
        at Function.Module._load (module.js:280:25)
        at Function.Module.runMain (module.js:497:10)
        at startup (node.js:119:16)
        at node.js:903:3 
```

但是上面的程序可以在终端上运行。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-11-15T13:18:11.693

据我所知，目前有 2 个用于 Node.js 的 netbeans 插件

**您正在使用的那个** [http://plugins.netbeans.org/plugin/36653/nodejs](http://plugins.netbeans.org/plugin/36653/nodejs)

（非常简单的插件，作用不大（我在旧版本的 netbeans 上使用它），我无法让它在 netbeans 7.4 上工作）

第二个：

**NetBeans NodeJS 插件** [https://github.com/timboudreau/nb-nodejs](https://github.com/timboudreau/nb-nodejs)

我想建议你切换到第二个，因为：

*   它确实有效
*   它提供了一个“节点项目类型”
*   更多的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-15T16:48:02.977

Netbeans 节点支持似乎还没有准备好迎接黄金时段。问题：“标准”（danielkec）节点插件不了解项目，因此您必须创建一个伪造的（Html5??）项目才能使用它。问题 2：Tim Boudreau 的 Node 插件在项目创建和代码完成方面做得很好，但它对调试的支持为零（Tim 更喜欢在代码中插入打印语句）。所以在这一点上（Netbeans 8），我不推荐 Netbeans 用于 Node.js 工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-26T16:09:21.390

在 NetBeans 中转到`Tools >> Options >> Miscellaneous >> Node.js`

并将默认命令更改为

`node ${workingdir}\${selectedfile}`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-17T18:32:37.097

[Netbeans 8.1](https://netbeans.org/community/releases/81/)现在支持 Node.js 调试。只需右键单击该文件，然后单击“调试”。

[![在此处输入图像描述](../Images/ab7124cf90303e358c3e01a2fc2f4648.png)](https://i.stack.imgur.com/dzzTT.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-21T13:03:50.520

您的节点代码看起来不错。您是否真的在 NetBeans 文件夹中创建了 hello.js 文件，因为看起来 Node 在此文件夹中找不到该文件？

如果您转到 NetBeans 中的节点选项，则需要确保将目录更改为包含应用程序源的文件夹。这在 NetBeans 中通过将“默认运行命令”设置为类似以下内容来完成：

cd ${工作目录};

/usr/local/bin/node ${selectedfile};

您需要根据需要设置节点的路径。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-18T13:38:58.723

在 NetBeans 中，转到*工具 >> 选项 >> 杂项 >> Node.js*

并将默认命令更改为：

`node ${workingdir}\${selectedfile}`

您还应该将*lessc*文件路径添加到您的 netbeans。在 netbeans 中转到：

*工具 >> 选项 >> 其他 >> CSS Preprossessors*

并将路径添加到您的节点*lessc*文件路径。

它将位于`C:\Users\{your user name}\AppData\Roaming\npm\lessc.cmd`

如果找不到，则必须通过命令提示符通过以下代码安装它：

`npm install less -g`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-21T16:41:50.280

我有同样的问题，没有很多可用的资源！终于找到一个解决了。

[https://www.youtube.com/watch?v=b3giUSvRjPc](https://www.youtube.com/watch?v=b3giUSvRjPc) [https://joanpaon.wordpress.com/2015/08/13/how-to-setup-nodejs-with-netbeans-8-1beta/](https://joanpaon.wordpress.com/2015/08/13/how-to-setup-nodejs-with-netbeans-8-1beta/)

并在 windows cmd 中从 nodejs.org 安装 nodejs 运行命令 c:>npm install express-generator -g

幸运的是，netbeans 有搜索选项可以找到 node js 的必要资源。

# html - 如何使用 float:left 垂直居中输入？

> ID：15382512
> 
> 赞同：0
> 
> 时间：2013-03-13T10:20:07.690
> 
> 标签：html, css

**HTML**

```
<div class="containerDiv">
    <p>Test</p>
    <input type="checkbox" checked="checked" />
</div> 
```

**CSS**

```
.containerDiv 
{
    width:600px;
}

.containerDiv p 
{
    margin: 10px 0px 10px 10px;
    float: left; 
    width: 500px;
}

.containerDiv input[type='checkbox']
{
    float: right;
    margin: auto 10px;
} 
```

你好，

我在 p-tag 和输入中有一个带有文本（文本可能很长）的 div。我希望在文本旁边将输入垂直居中，但`float: left`不起作用`margin: auto 10px`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:03:45.930

您可以将复选框放置在适当的`absolute`位置并使用`top:50%`减去复选框高度。所以你不需要`float:right`这个元素，而是给它一个`right`位置。看这个演示：http: [//jsfiddle.net/4wXuC/1/](http://jsfiddle.net/4wXuC/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:38:53.413

为了给保证金尝试`margin: 10px auto;`而不是`margin: auto 10px;`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T10:33:02.407

```
 <div style="width: 55px;">
<p style="float: left; margin: 0px 0px 10px 10px; width: auto;">Test</p>
<input checked="checked" style="float: right; margin: 5px auto;" type="checkbox">
 </div> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-13T10:29:43.273

使用 label 而不是 p 并将标签的 line-height 设置为输入的总高度。

# ios - 使用 MKMapView 时多个引脚在同一点下垂

> ID：15382514
> 
> 赞同：0
> 
> 时间：2013-03-13T10:20:08.070
> 
> 标签：ios, mkmapview, mkannotation

我已经编写了代码来搜索返回纬度和经度的东西，因此我在相应的位置放置了别针。很多时候，我可以看到多个引脚掉在同一个位置。（10-15 个引脚掉在同一个位置而不是一次）

这非常随机地发生。可能是什么问题呢？

谢谢， Himanshu

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:31:46.780

去更新你的代码。这应该可以解决问题。

# sql-server - 在 c# wpf 运行时错误处创建 sql server DB

> ID：15382518
> 
> 赞同：-1
> 
> 时间：2013-03-13T10:20:13.527
> 
> 标签：sql-server, wpf, c#-4.0

我有很多错误无法打开连接等。我使用 VS 2010 c# wpf

```
String str;
SqlConnection myConn = new SqlConnection("Server=localhost;Integrated security=SSPI;database=master");

str = " CREATE DATABASE "
     + " ON PRIMARY "
     + " (NAME = " + "MyDatabase_Data" + ", "
     + " FILENAME = '" + "C:\\MyDatabaseData.mdf" + "', "
     + " SIZE = 2MB,"
     + " FILEGROWTH =" + "10%" + ") "
     + " LOG ON (NAME =" + "MyDatabase_Log" + ", "
     + " FILENAME = '" + "C:\\MyDatabaseLog.ldf" + "', "
     + " SIZE = 1MB, "
     + " FILEGROWTH =" + "10%" + ") ";

SqlCommand myCommand = new SqlCommand(str, myConn);
try
{
    myConn.Open();
    myCommand.ExecuteNonQuery();
    MessageBox.Show("DataBase is Created Successfully", "MyProgram", MessageBoxButton.OK, MessageBoxImage.Information);
}
catch (System.Exception ex)
{
    MessageBox.Show(ex.ToString(), "MyProgram", MessageBoxButton.OK, MessageBoxImage.Information);
}
finally
{
    if (myConn.State == ConnectionState.Open)
    {
        myConn.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:38:27.977

添加以下引用：

*   c:\Program Files\Microsoft SQL
    Server\100\SDK\Assemblies\Microsoft.SqlServer.Smo.dll
*   C:\Program Files (x86)\Microsoft SQL Server\100\SDK\Assemblies\Microsoft.SqlServer.Management.Sdk.Sfc.dll
*   c:\Program Files\Microsoft SQL Server\100\SDK\Assemblies\Microsoft.SqlServer.ConnectionInfo.dll

在 App config 请插入以下片段

```
<startup useLegacyV2RuntimeActivationPolicy="true">
  <supportedRuntime version="v4.0"/>
</startup> 
```

编码：

```
var myConn = "Server=localhost;Integrated security=SSPI;database=master";

//The CREATE DATABASE statement failed. The primary file must be at least 3 MB to accommodate a copy of the model database.
var command = @"
CREATE DATABASE myDB
ON PRIMARY 
(
NAME = MyDatabaseData, 
FILENAME = 'C:\Temp\MyDatabaseData.mdf', 
SIZE = 3MB,
FILEGROWTH =10%
) 
LOG ON 
(
NAME =MyDatabaseLog, 
FILENAME = 'C:\Temp\MyDatabaseLog.ldf', 
SIZE = 1MB, 
FILEGROWTH =10%
)";

using (var conn = new SqlConnection(myConn))
{
  try
  {
    var server = new Server(new ServerConnection(conn));
    server.ConnectionContext.ExecuteNonQuery(command);
  }
  catch (Exception e)
  {
    Console.WriteLine(e.Message);

  }
} 
```

# java - 由于 Java 泛型，我无法编译 Guava 的 Cache 构建器

> ID：15382520
> 
> 赞同：3
> 
> 时间：2013-03-13T10:20:20.713
> 
> 标签：java, generics, guava

我有以下简短的自包含代码，在编译时显示错误。我拼命地试图让它编译。我通常不再遇到泛型问题，但是我放弃了这个，我请求团队的帮助。

```
import com.google.common.cache.CacheBuilder;
import com.google.common.cache.CacheLoader;
import com.google.common.cache.LoadingCache;

public class CacheWithGenericsDoesNotCompile {

  // Class definition can't be modified
  static class Resource<T extends Resource<T>> {}

  // Class definition can't be modified
  static class ResourceType<T extends Resource<T>> {
    public ResourceType(Class<T> type) {}
  }

  // Variable definition may be modified
  static LoadingCache<Class<? extends Resource<?>>, ResourceType<? extends Resource<?>>> cache = CacheBuilder.newBuilder().build(
      new CacheLoader<Class<? extends Resource<?>>, ResourceType<? extends Resource<?>>>() {
        @Override public ResourceType<? extends Resource<?>> load(Class<? extends Resource<?>> key) throws Exception {
          return new ResourceType<? extends Resource<?>>(key);
        }
    });

  // Method definition can't be modified, method content may.
  @SuppressWarnings("unchecked")
  static <T extends Resource<T>> ResourceType<T> getResourceType(Class<T> type) {
    return (ResourceType<T>)cache.getUnchecked(type);
  }
} 
```

编译失败的行是：

```
return new ResourceType<? extends Resource<?>>(key); 
```

我知道它失败的原因：我可能不会`new Xxxx<...>`用问号 ( `?`) 来写。我只是不能以不同的方式编写这一行来编译其他行。

在没有泛型的情况下，我有一个后备解决方案`Resource`，但在可能的范围内，我想保留`Resource`泛型。

我对 的泛型没有任何限制，`LoadingCache`除了我需要像在`getResourceType(Class)`.

那么...我该如何修复此代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T10:34:27.827

带有一些忽略警告的解决方案：

```
 static LoadingCache<Class<? extends Resource<?>>, ResourceType<? extends Resource<?>>> cache = CacheBuilder.newBuilder().build(
      new CacheLoader<Class<? extends Resource<?>>, ResourceType<? extends Resource<?>>>() {
        @SuppressWarnings({ "rawtypes", "unchecked" })
        @Override public ResourceType<? extends Resource<?>> load(Class<? extends Resource<?>> key) throws Exception {
          return new ResourceType(key);
        }
    }); 
```

正如 [@John B](https://stackoverflow.com/users/905762/john-b)在评论中所建议的那样。由于[type-erasure ，此代码在](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)**运行时**与问题中的代码没有什么不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:09:19.480

我对 gontard 的解决方案玩得更多（因此，如果您对此表示赞同，请确保也对 gontard 的答案表示赞同）和 millimoose 的评论。我来到这个解决方案，它完全删除了泛型，以获得更易读的代码。

```
@SuppressWarnings("rawtypes")
static LoadingCache<Class, ResourceType> cache = CacheBuilder.newBuilder().build(
    new CacheLoader<Class, ResourceType>() {
      @SuppressWarnings("unchecked")
      @Override public ResourceType load(Class key) throws Exception {
        return new ResourceType(key);
      }
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:14:05.310

如果我们可以`key`转换为正确的类型

```
Class<T> for some T that T<:Resource<T> 
```

那么我们就没有问题写了

```
ResourceType<? extends Resource<?>> result = new ResourceType<>(casted_key) 
```

通常这种类型的转换可以通过通配符捕获来完成，但如果类型变量具有自引用绑定，则它不起作用。[请参阅泛型和类](https://stackoverflow.com/questions/15366375/generics-and-class-extends-enum-enumset-allofclass-vs-class-getenumcons)的解决方法<? [扩展 Enum<?>>, EnumSet.allOf(class) 与 class.getEnumConstants()](https://stackoverflow.com/questions/15366375/generics-and-class-extends-enum-enumset-allofclass-vs-class-getenumcons)。

# c# - SQL 触发器会自行删除

> ID：15382522
> 
> 赞同：0
> 
> 时间：2013-03-13T10:20:32.093
> 
> 标签：c#, .net, sql, sql-server

我有一些表，我已经在它们上安装了触发器， 例如：`Booking`、、、、`BookingDetails``Reservation``ReservationDays`

触发器获取插入和更新的值，并将它们插入到另一个名为 ( `TransTBL`) 的单独数据库中的表中当我的应用程序在这些表中插入时（在一个按钮事件中），仅触发 (`Booking`和`BookingDetails`)`Reservation`的触发器，然后触发 (`BookingDetails`和`ReservationDays`) 被删除我不知道为什么？！

这可能是什么原因造成的？

触发样本：

```
ALTER TRIGGER [dbo].[trigBooking]
   ON  [dbo].[Booking]
   AFTER UPDATE,INSERT,DELETE
AS 

declare @Params nvarchar(max)
declare @OldVals nvarchar(max)
declare @NewVals nvarchar(max)
declare @SQL nvarchar(max)
declare @spName nvarchar(MAX)
declare @odel bit
declare @ndel bit
BEGIN
declare @userID int 
set @userID  = (Select UserID from WatheerDBTest.dbo.Users where UserName = (Select SYSTEM_USER))

declare @ox bit
declare @nx bit
set @ox = cast((select i.Async from Deleted i) as bit)
set @nx = cast((select i.Async from Inserted i) as bit)
if (@nx = 0) Or not exists (select * from inserted)
BEGIN

        SET NOCOUNT ON;

    SELECT @Params = COALESCE(@Params + ',@', '@') + COLUMN_NAME
    FROM  information_schema.columns where table_name = 'Booking'

    IF EXISTS(SELECT * FROM DELETED)
    BEGIN
    set @OldVals = IsNull(cast((Select  i.Booking_ID from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_SNO from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_NO from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_Date from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_BookedBy from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_FirstName from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_MiddleName from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_Address from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_LastName from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.BookingStatus_ID from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Country_ID from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.City_ID from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_Phone from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_EMail from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_Fax from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_CancelDate from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.CancelReason_ID from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.CancelUser_ID from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.VoidReason_ID from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.VoidUser_ID from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.NoShowReason_ID from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.NoShowUser_ID from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_Remarks from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Displan_ID from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.DisPlan_Value from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.MarkType_ID from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Company_ID from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.CommType_ID from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.CommType_Value from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.IsNoShow from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.IsVoid from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.ApplySeasonChange from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.IsConfirmed from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.IsCancel from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_UserID from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Folio_No from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Branch_ID from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.IsLeaderPay from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.LeaderRes_ID from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Account_ID from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.SpcialPrice from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Deleted from Deleted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Async from Deleted i) as nvarchar(max)), '')

    end
    else
    set @OldVals = ''

    set @NewVals = IsNull(cast((Select  i.Booking_ID from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_SNO from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_NO from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_Date from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_BookedBy from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_FirstName from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_MiddleName from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_Address from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_LastName from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.BookingStatus_ID from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Country_ID from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.City_ID from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_Phone from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_EMail from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_Fax from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_CancelDate from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.CancelReason_ID from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.CancelUser_ID from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.VoidReason_ID from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.VoidUser_ID from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.NoShowReason_ID from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.NoShowUser_ID from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_Remarks from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Displan_ID from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.DisPlan_Value from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.MarkType_ID from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Company_ID from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.CommType_ID from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.CommType_Value from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.IsNoShow from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.IsVoid from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.ApplySeasonChange from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.IsConfirmed from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.IsCancel from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Booking_UserID from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Folio_No from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Branch_ID from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.IsLeaderPay from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.LeaderRes_ID from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Account_ID from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.SpcialPrice from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Deleted from Inserted i) as nvarchar(max)), '') + ',' + 
        IsNull(cast((Select  i.Async from Inserted i) as nvarchar(max)), '')

    IF EXISTS(SELECT * FROM DELETED)
        BEGIN
      set @SQL =  'Update Booking Set Booking_ID = '+IsNull(Cast(((Select  i.Booking_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
Booking_SNO = '+IsNull(Cast(( (Select  i.Booking_SNO from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
Booking_NO = '+IsNull(Cast(( (Select  i.Booking_NO from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
Booking_Date = '+IsNull(Cast(( (Select  i.Booking_Date from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
Booking_BookedBy = '''+IsNull(Cast(( (Select  i.Booking_BookedBy from Inserted i) ) AS Nvarchar(MAX)), '') + ''', 
Booking_FirstName = '''+IsNull(Cast(( (Select  i.Booking_FirstName from Inserted i) ) AS Nvarchar(MAX)), '') + ''', 
Booking_MiddleName = '''+IsNull(Cast(( (Select  i.Booking_MiddleName from Inserted i) ) AS Nvarchar(MAX)), '') + ''', 
Booking_Address = '''+IsNull(Cast(( (Select  i.Booking_Address from Inserted i) ) AS Nvarchar(MAX)), '') + ''', 
Booking_LastName = '''+IsNull(Cast(( (Select  i.Booking_LastName from Inserted i) ) AS Nvarchar(MAX)), '') + ''', 
BookingStatus_ID = '+IsNull(Cast(( (Select  i.BookingStatus_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
Country_ID = '+IsNull(Cast(( (Select  i.Country_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
City_ID = '+IsNull(Cast(( (Select  i.City_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
Booking_Phone = '''+IsNull(Cast(( (Select  i.Booking_Phone from Inserted i) ) AS Nvarchar(MAX)), '') + ''', 
Booking_EMail = '''+IsNull(Cast(( (Select  i.Booking_EMail from Inserted i) ) AS Nvarchar(MAX)), '') + ''', 
Booking_Fax = '''+IsNull(Cast(( (Select  i.Booking_Fax from Inserted i) ) AS Nvarchar(MAX)), '') + ''', 
Booking_CancelDate = '+IsNull(Cast(( (Select  i.Booking_CancelDate from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
CancelReason_ID = '+IsNull(Cast(( (Select  i.CancelReason_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
CancelUser_ID = '+IsNull(Cast(( (Select  i.CancelUser_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
VoidReason_ID = '+IsNull(Cast(( (Select  i.VoidReason_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
VoidUser_ID = '+IsNull(Cast(( (Select  i.VoidUser_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
NoShowReason_ID = '+IsNull(Cast(( (Select  i.NoShowReason_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
NoShowUser_ID = '+IsNull(Cast(( (Select  i.NoShowUser_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
Booking_Remarks = '''+IsNull(Cast(( (Select  i.Booking_Remarks from Inserted i) ) AS Nvarchar(MAX)), '') + ''', 
Displan_ID = '+IsNull(Cast(( (Select  i.Displan_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
DisPlan_Value = '+IsNull(Cast(( (Select  i.DisPlan_Value from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
MarkType_ID = '+IsNull(Cast(( (Select  i.MarkType_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
Company_ID = '+IsNull(Cast(( (Select  i.Company_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
CommType_ID = '+IsNull(Cast(( (Select  i.CommType_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
CommType_Value = '+IsNull(Cast(( (Select  i.CommType_Value from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
IsNoShow = '+IsNull(Cast(( (Select  i.IsNoShow from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
IsVoid = '+IsNull(Cast(( (Select  i.IsVoid from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
ApplySeasonChange = '+IsNull(Cast(( (Select  i.ApplySeasonChange from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
IsConfirmed = '+IsNull(Cast(( (Select  i.IsConfirmed from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
IsCancel = '+IsNull(Cast(( (Select  i.IsCancel from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
Booking_UserID = '+IsNull(Cast(( (Select  i.Booking_UserID from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
Folio_No = '+IsNull(Cast(( (Select  i.Folio_No from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
Branch_ID = '+IsNull(Cast(( (Select  i.Branch_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
IsLeaderPay = '+IsNull(Cast(( (Select  i.IsLeaderPay from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
LeaderRes_ID = '+IsNull(Cast(( (Select  i.LeaderRes_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
Account_ID = '+IsNull(Cast(( (Select  i.Account_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
SpcialPrice = '+IsNull(Cast(( (Select  i.SpcialPrice from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
Deleted = '+IsNull(Cast(( (Select  i.Deleted from Inserted i) ) AS Nvarchar(MAX)), '') + ', 
Async = '+'''True''' + '
 Where Booking_ID = ' + IsNull(cast((Select  i.Booking_ID from Inserted i) AS nvarchar(MAX)), '')
        END
        else
      set @SQL =  'Insert into Booking(Booking_ID,Booking_SNO,Booking_NO,Booking_Date,Booking_BookedBy,Booking_FirstName,Booking_MiddleName,Booking_Address,Booking_LastName,BookingStatus_ID,Country_ID,City_ID,Booking_Phone,Booking_EMail,Booking_Fax,Booking_CancelDate,CancelReason_ID,CancelUser_ID,VoidReason_ID,VoidUser_ID,NoShowReason_ID,NoShowUser_ID,Booking_Remarks,Displan_ID,DisPlan_Value,MarkType_ID,Company_ID,CommType_ID,CommType_Value,IsNoShow,IsVoid,ApplySeasonChange,IsConfirmed,IsCancel,Booking_UserID,Folio_No,Branch_ID,IsLeaderPay,LeaderRes_ID,Account_ID,SpcialPrice,Deleted,Async) Values (' + IsNull(Cast(((Select  i.Booking_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.Booking_SNO from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.Booking_NO from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + CHAR(39) + IsNull(Cast(( (Select  i.Booking_Date from Inserted i) ) AS Nvarchar(MAX)), '') + CHAR(39) + ', ' 
 + CHAR(39) + IsNull(Cast(( (Select  i.Booking_BookedBy from Inserted i) ) AS Nvarchar(MAX)), '') + CHAR(39) + ', ' 
 + CHAR(39) + IsNull(Cast(( (Select  i.Booking_FirstName from Inserted i) ) AS Nvarchar(MAX)), '') + CHAR(39) + ', ' 
 + CHAR(39) + IsNull(Cast(( (Select  i.Booking_MiddleName from Inserted i) ) AS Nvarchar(MAX)), '') + CHAR(39) + ', ' 
 + CHAR(39) + IsNull(Cast(( (Select  i.Booking_Address from Inserted i) ) AS Nvarchar(MAX)), '') + CHAR(39) + ', ' 
 + CHAR(39) + IsNull(Cast(( (Select  i.Booking_LastName from Inserted i) ) AS Nvarchar(MAX)), '') + CHAR(39) + ', ' 
 + IsNull(Cast(( (Select  i.BookingStatus_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.Country_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.City_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + CHAR(39) + IsNull(Cast(( (Select  i.Booking_Phone from Inserted i) ) AS Nvarchar(MAX)), '') + CHAR(39) + ', ' 
 + CHAR(39) + IsNull(Cast(( (Select  i.Booking_EMail from Inserted i) ) AS Nvarchar(MAX)), '') + CHAR(39) + ', ' 
 + CHAR(39) + IsNull(Cast(( (Select  i.Booking_Fax from Inserted i) ) AS Nvarchar(MAX)), '') + CHAR(39) + ', ' 
 + CHAR(39) + IsNull(Cast(( (Select  i.Booking_CancelDate from Inserted i) ) AS Nvarchar(MAX)), '') + CHAR(39) + ', ' 
 + IsNull(Cast(( (Select  i.CancelReason_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.CancelUser_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.VoidReason_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.VoidUser_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.NoShowReason_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.NoShowUser_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + CHAR(39) + IsNull(Cast(( (Select  i.Booking_Remarks from Inserted i) ) AS Nvarchar(MAX)), '') + CHAR(39) + ', ' 
 + IsNull(Cast(( (Select  i.Displan_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.DisPlan_Value from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.MarkType_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.Company_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.CommType_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.CommType_Value from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.IsNoShow from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.IsVoid from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.ApplySeasonChange from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.IsConfirmed from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.IsCancel from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.Booking_UserID from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.Folio_No from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.Branch_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.IsLeaderPay from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.LeaderRes_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.Account_ID from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.SpcialPrice from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + IsNull(Cast(( (Select  i.Deleted from Inserted i) ) AS Nvarchar(MAX)), '') + ', ' 
 + '''True'''  + ')'

 -- IF row was deleted

set @odel = cast((select i.Deleted from Deleted i) AS bit)
set @ndel = cast((select i.Deleted from Inserted i) AS bit)

if  @odel <> @ndel
begin
set @spName = N'Deleted'
set @NewVals = NULL
end
else if  EXISTS(select * from Deleted)
begin
set @spName = N'Updated'
end
else if  EXISTS(select * from Inserted)
begin
set @spName = N'Added'
end

--  Getting user defind primary column value 

DECLARE @PKUser nvarchar(max), @sSQL nvarchar(max), @ParmDefinition nvarchar(max), @col nvarchar(max)
set @col = cast((select TableDefColumn from TransSampleDB.dbo.sysTables where TableName = 'Booking') as nvarchar)

SET @ParmDefinition = N'@PKUserOUT nvarchar(max) OUTPUT';
SELECT @sSQL = N'SELECT @PKUserOUT = ' + @col + ' FROM WatheerDBTest.dbo.Booking Where Booking_ID = ' + Cast(((Select  i.Booking_ID from Inserted i) ) AS Nvarchar(MAX))
EXEC sp_executesql @sSQL, @ParmDefinition, @PKUserOUT=@PKUser OUTPUT;

    insert into TransSampleDB.dbo.TransTBL_Local
    values (
    @spName,
    @Params,
    @OldVals,
    @NewVals,
    @SQL,
    Cast(((Select  i.Booking_ID from Inserted i) ) AS Nvarchar(MAX)),
    @PKUser,
    (Select Top 1 table_catalog from information_schema.tables as nvarchar),
    'Booking',
    getdate(),
    0,
    '',
    0,
    '1/1/1900',
    0,
    @userID
    )
    END
End 

 /************************************* End of Booking trigger *************************************/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:42:26.500

使用 SSMS 中的架构更改历史报告查看何时以及由谁删除：右键单击 SSMS 中的数据库，报告/标准报告/架构更改历史。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:00:08.947

当有人忘记在他们的触发器定义之后放一个时，我已经看到类似的事情发生`GO`，并且他们的脚本的下一部分做了某种丢弃。像这样的东西：

```
create table T (ID int not null)
go
create table V (ID int not null)
go
create table U (ID int not null)
go
if exists(select * from sys.objects where name='T_I')
begin
    drop trigger T_I
end
go
create trigger T_I on T
instead of insert
as
    insert into V (ID) select ID from inserted
--<-- No GO here!
if exists(select * from sys.objects where name='U_I')
begin
    drop trigger U_I
end
go
create trigger U_I on U
instead of insert
as
    insert into V (ID) select ID from inserted 
```

现在使用第一个触发器：

```
select * from sys.triggers
go
insert into T(ID) values (1),(2)
go
select * from sys.triggers 
```

结果：

```
T_I
U_I 
```

然后

```
T_I 
```

# javascript - 在javascript / jQuery中从父ID获取子ID

> ID：15382523
> 
> 赞同：0
> 
> 时间：2013-03-13T10:20:35.850
> 
> 标签：javascript, jquery, jquery-mobile

您好，我正在开发一个 jQuery 移动应用程序，情况如下

```
<script>
    function showPanel(info) {

        alert(info.id);
        alert($(info).next()[0].id);

    }
</script>

<div data-role="footer" id="footer_button" onclick="showPanel(this);">

        <h4 style="text-align: center;">Open toolbar</h4>

</div>

<div id="footerhigher1">

    <div id="footerinner1"></div>

</div> 
```

现在，在第一个 div 的代码`onclick`事件中，我`this`从中提取第一个 div 的 id，`div`并通过jQuery的**next()方法获取下一个 div 的 ID。**现在我还想获取 ID 为**footerinner1**的孩子的 ID那么我怎样才能获取该 ID 我在单页中有多个组合

更多 显式视图

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Insert title here</title>
    </head>

    <body>
        <div data-role="page">
            <div data-role="header">
                    <h1>Page Title</h1>

            </div>
            <!-- /header -->
            <div data-role="content">
                <p>Page content goes here.</p>
            </div>
            <!-- /content -->
            <div data-role="footer" id="footer_button1">
                 <h4 style="text-align: center;">Open toolbar</h4>

            </div>
            <!-- ... -->
            <div id="footerhigher1" class="higher">
                <div id="footerinner-1-1" class="inner"></div>
                <div id="footerinner-1-2" class="inner"></div>
            </div>
        </div>
        <!-- /page -->
        <div data-role="page">
            <div data-role="header">
                    <h1>Page Title</h1>

            </div>
            <!-- /header -->
            <div data-role="content">
                <p>Page content goes here.</p>
            </div>
            <!-- /content -->
            <div data-role="footer" id="footer_button2">
                 <h4 style="text-align: center;">Open toolbar</h4>

            </div>
            <!-- ... -->
            <div id="footerhigher2" class="higher">
                <div id="footerinner-2-1" class="inner"></div>
                <div id="footerinner-2-2" class="inner"></div>
            </div>
        </div>
        <!-- /page -->
        <div data-role="page">
            <div data-role="header">
                    <h1>Page Title</h1>

            </div>
            <!-- /header -->
            <div data-role="content">
                <p>Page content goes here.</p>
            </div>
            <!-- /content -->
            <div data-role="footer" id="footer_button3">
                 <h4 style="text-align: center;">Open toolbar</h4>

            </div>
            <!-- ... -->
            <div id="footerhigher3" class="higher">
                <div id="footerinner-3-1" class="inner"></div>
            </div>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:37:34.217

您问如何使用 jquery 样式的事件处理来做到这一点：

```
$('#footer_button').on('click', function() {
    var $this = $(this);
    alert($this.attr('id');
    // traversing the dom etc.
}); 
```

还更新了html：

```
<div data-role="footer" id="footer_button">
    <h4 style="text-align: center;">Open toolbar</h4>
</div>
<!-- ... -->
<div id="footerhigher1" class="higher">
    <div id="footerinner1" class="inner"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:25:05.140

愿这项工作：

```
alert($(info).next().children().eq[0].id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:25:44.263

尝试这个

```
 alert($(info).next().children('div').attr('id')); 
```

# objective-c - CoreMotion 不会让我滚动、俯仰和偏航

> ID：15382524
> 
> 赞同：0
> 
> 时间：2013-03-13T10:20:37.730
> 
> 标签：objective-c, accelerometer, core-motion, pitch, cmmotionmanager

sBefore已从 iOS 中弃用，`UIAccelerometer`我使用来自和此类的数据来计算俯仰、滚动和偏航。我还必须进行一些过滤，但现在我看到使用库我可以从[类](http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMAttitude_Class/Reference/Reference.html)中获取这些数据并且真的很想使用这些属性，但不知何故我没有这样做。`x``y``z``CoreMotion`[`CMAttitude`](http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMAttitude_Class/Reference/Reference.html)

现在，我所做的是实例化

```
CMMotionManager *motionManager;
CMDeviceMotion  *deviceMotion;
CMAttitude      *attitude;
...
deviceMotion    = motionManager.deviceMotion;
attitude        = deviceMotion.attitude;

motionManager.accelerometerUpdateInterval = 0.065; // 65ms
[motionManager startAccelerometerUpdates]; 
```

我可以读取 x、y 和 z，`motionManager.accelerometerData.acceleration.<x,y or z>`但尝试读取时`attitude.<roll,pitch,yaw>` 会得到 0。

```
NSLog(@"Roll: %f", attitude.roll); // = 0 
```

我每 100 毫秒读取一次由连续计时器触发的方法中的值。

关于我所缺少的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:59:15.190

为了使用`deviceMotion.attitude`你必须调用`[motionManager startDeviceMotionUpdates]`。

`startAccelerometerUpdates`只提供加速度计数据，就像`startGyroUpdates`会给你一样`gyroData`。请注意，设备运动数据不仅仅是加速度计和陀螺仪数据，因为它们将结合（传感器融合）以实现更高的精度。

# ubuntu - 带代理的 Bazaar CVS (bzr)（使用 tor 的袜子）

> ID：15382527
> 
> 赞同：0
> 
> 时间：2013-03-13T10:20:41.033
> 
> 标签：ubuntu, proxy, bazaar, tor, bazaar-plugins

我（在 ubuntu 上）需要在研究所的代理后面使用 bzr，它限制 bzr 连接。所以，有没有办法通过 tor（vidalia）获得的 socks 代理连接它，因为我无法使用 tor 成功设置 polipo 以获取 http 代理反而。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T22:26:28.730

bzr 尊重`http_proxy`环境变量。尝试设置：

```
set http_proxy=http://localhost:3128/ 
```

或类似的规定。

# java - 从 Jersey 应用程序创建 JAR 文件

> ID：15382531
> 
> 赞同：-1
> 
> 时间：2013-03-13T10:20:54.577
> 
> 标签：java, apache, glassfish, jersey

我使用 Jersey 开发了一个应用程序。我写了一些函数来响应正确的http请求。在我使用 Eclipse 之前一切都很顺利，因为我使用这个类来“创建”本地服务器

```
String baseUrl = "http://" + InetAddress.getLocalHost().getHostAddress() + ":8032/"; 
HttpServer server = HttpServerFactory.create(baseUrl);
server.start(); 
```

现在我想创建一个 JAR 文件以将其上传到外部服务器上，但是当我运行 JAR 文件（也在本地）时，它不起作用。我认为，当我双击我的 JAR 文件时，服务器会启动（至少在本地），因为上面的代码已包含在内，它将启动我们所需要的一切。

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:27:37.737

如果它是 glassfish 服务器应用程序，则不应双击 jar。

它们应该进入 glassfish 的 /lib 文件夹，启动服务器，您的代码应该以与在 Eclipse 中相同的方式部署。

# python - Python - 如何将父子转换为嵌套字典

> ID：15382533
> 
> 赞同：2
> 
> 时间：2013-03-13T10:20:57.110
> 
> 标签：python, json

我有一个看起来像这样的父子字典，其中键是子节点，0 是根节点。

```
node[0]=[{"parms":{"meta1":"foo"},"name":"RootNoe"}]
node[1]=[{"parent":0,"data":{"parms":{"meta2":"bar"},"name":"country"} }]
node[2]=[{"parent":1,"data":{"parms":{"meta3":"baz"},"name":"day"} }] 
```

我需要创建一个嵌套的 json 对象，如下所示：

```
test = {
        "params": {"parms":{"meta1":"foo"},
        "name": "RootNode", 
         "children": [ 
                     {
                     "parms":{"meta2":"bar"},
                      "name":"country",
                      "children": [
                                 {"parms":{"meta3":"baz"},
                                  "name":"day","children": []}
                                 ]
            }]  
        } 
```

我如何在 python 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:39:22.610

您可以从循环中的定义构造树。

```
for element in node:
    if 'parent' in element:
        if 'children' not in node[element['parent']]:
            node[element['parent']]['children'] = []
        node[element['parent']]['children'].append(element)
        del element['parent']

test = node[0] 
```

`children`需要在场才能正常工作，但我希望你能明白要点。另请注意，这会修改`node`序列。

# forms - PHP 表单字段不会发送到电子邮件

> ID：15382534
> 
> 赞同：1
> 
> 时间：2013-03-13T10:20:58.163
> 
> 标签：forms, field, php

我创建了一个发送到电子邮件的 PHP 脚本。

仅发送一个字段（消息字段）时，该表单似乎可以正常工作，但是一旦添加了其他字段，该表单就会停止通过电子邮件发送到收件箱（但是该表单仍然可以正确触发并重新路由到Thankyou就好了。 )

这是我目前拥有的代码，这*不起作用*

```
<?php
  $email = $_REQUEST['email'] ;
  $name = $_REQUEST['name'] ;
  $services = $_REQUEST['services'] ;
  $message = $_REQUEST['message'] ;

  if (!isset($_REQUEST['email'])) {
    header( "Location: feedback.html" );
  }
  elseif (empty($email) || empty($message)) {
     header( "Location: error.html" );
 }
  else {
    mail( "info@website.co.uk", "Message via your website!",
           $name, $services, $message, "From: $email" );
    header( "Location: thankyou.html" );
  }
?> 
```

这是以前的代码，这确实有效，但只显示消息

```
<?php
  $email = $_REQUEST['email'] ;
  $message = $_REQUEST['message'] ;

  if (!isset($_REQUEST['email'])) {
    header( "Location: feedback.html" );
  }
  elseif (empty($email) || empty($message)) {
     header( "Location: error.html" );
 }
  else {
    mail( "info@website.co.uk", "Message via your website!",
          $message, "From: $email" );
    header( "Location: thankyou.html" );
  }
?> 
```

这是表单的 HTML：

```
<form method="post" action="sendmail.php">
    <label>Name:</label> <input name="name" type="text" /><br />
    <label>Email:</label> <input name="email" type="text" /><br />
    <label>What service do you require?:</label>  <input name="services" type="text" /><br />
    <label>Message:</label><br />
    <textarea name="message" rows="15" cols="40">
    </textarea><br />
    <input type="submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:26:00.483

根据[mail() 文档](http://php.net/manual/en/function.mail.php)，消息正文应作为单个参数传递。所以它应该看起来更像：

```
mail( "info@website.co.uk", "Message via your website!", "$name\r\n $services\r\n $message", "From: $email"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:29:57.280

根据php.net，该`mail()`功能的正确使用是：

```
<?
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'To: Mary <mary@example.com>, Kelly <kelly@example.com>' . "\r\n";
$headers .= 'From: Birthday Reminder <birthday@example.com>' . "\r\n";
$headers .= 'Cc: birthdayarchive@example.com' . "\r\n";
$headers .= 'Bcc: birthdaycheck@example.com' . "\r\n";

// Mail it
mail($to, $subject, $message, $headers);
?> 
```

您正在尝试将附加数据 ( `$services`) 作为标头发送。

尝试合并你的`$message`和`$service`>

```
$message = $service . "\r\n\r\n" . $message;
 mail( "info@website.co.uk", "Message via your website!",
      $message, "From: $email" ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:26:08.430

您不能只是将越来越多的变量添加到`mail()`. 只有一个参数指定电子邮件的内容，也就是第三个参数，您可以在[官方文档](http://php.net/manual/en/function.mail.php)中看到：

```
bool mail ( string $to , string $subject , string $message [, string $additional_headers [, string $additional_parameters ]] ) 
```

`$message`如果您想在邮件中包含更多内容，则需要将所有内容放入一个变量中，以作为内容提供给函数。

```
$content = $message;
$content .= "\n" . $services;
// etc...
mail($to, $subject, $content); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-13T10:23:52.253

尝试这个

```
<?php
  $email = $_POST['email'] ;
  $name = $_POST['name'] ;
  $services = $_POST['services'] ;
  $message = $_POST['message'] ;

  if (!isset($_POST['email'])) {
    header( "Location: feedback.html" );
  }
  elseif (empty($email) || empty($message)) {
     header( "Location: error.html" );
 }
  else {
    mail( "info@website.co.uk", "Message via your website!",
           $name . $services. $message .  "From: $email" );
    header( "Location: thankyou.html" );
  }
?> 
```

# types - 如何为任何给定用户返回对象的默认记录类型？

> ID：15382535
> 
> 赞同：0
> 
> 时间：2013-03-13T10:21:03.373
> 
> 标签：types, salesforce, apex-code, custom-object

我有一个自定义对象，我想在其中添加一个新项目并将其所有权分配给用户，该用户已通过用户输入输入。记录类型不默认为适当的值，基于所有权，所以我需要返回指定用户的默认记录类型，这样我才能正确创建我的项目。

我可以很容易地获得对象的默认记录类型，但是如何为任何用户获得它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:59:51.903

默认记录类型仅在简档（以及用户）级别定义，而不是针对整个组织。因此，任何描述对象的用户都会看到他们自己`defaultRecordTypeMapping`为他们的配置文件定义的。例如，如果用户 A 在 Apex 中执行此代码：

```
for (Schema.RecordTypeInfo rtInfo : Account.SObjectType.getDescribe().getRecordTypeInfos()) {
  if (rtInfo.isDefaultRecordTypeMapping()) {
    System.debug(rtInfo);
  }
} 
```

将打印用户 A 的默认记录类型。如果用户 B 运行相同的代码并被分配到具有不同默认记录类型的不同配置文件，则将打印该用户的默认记录类型。

`describeSObject()`对于 SOAP 或`/services/data/v27.0/sobjects/:object/describe`REST ，API 也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-05T10:29:38.207

您可以`recordId`通过开发者名称获取，请参阅[发布信息](https://releasenotes.docs.salesforce.com/en-us/summer18/release-notes/rn_apex_developer_name.htm)

尝试改用它

```
Schema.SObjectType.Account.getRecordTypeInfosByDeveloperName().get('Master'); 
```

# android - 如何创建类似于 android 联系人收藏夹的布局

> ID：15382538
> 
> 赞同：2
> 
> 时间：2013-03-13T10:21:07.753
> 
> 标签：android

如何创建布局，如我附加的（Android ICS 联系人收藏布局）图像

![带有图像和覆盖名称的布局](../Images/4aab940f2c607599bc5a021e7b795b5e.png)

我正在使用网格视图来创建照片网格的布局。那是完美的工作。但

如何创建覆盖布局，如带有名称或图像的黑色透明？任何人指导我这样做

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:30:54.737

试试这个：（注意：这是`GridView`将在 中设置的自定义 XML 布局`Adapter`）

```
<FrameLayout
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:gravity="center" >

    <ImageView
        android:id="@+id/imgProfilePicture"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:adjustViewBounds="true"
        android:scaleType="centerCrop"
        android:src="@drawable/ic_contact_picture" >
    </ImageView>

    <TextView
        android:id="@+id/txtUserName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|center"
        android:background="#50000000"
        android:gravity="center"
        android:text="User Name"
        android:textColor="#ffffff"
        android:textSize="11sp" >
    </TextView>
</FrameLayout> 
```

它看起来像这样：

![在此处输入图像描述](../Images/aabb5bd07b756ac1e7af893632435ed8.png)

*这是我的一个应用程序的**原样**。*使用`android:layout_width`和`android:layout_height`来设置您自己的尺寸。另外，摆弄这个`android:background="#50000000"`属性让它看起来像你喜欢的那样。其中的**50**是设置透明度的*alpha*。

# android - 允许 DialogFragment 的外部触摸

> ID：15382540
> 
> 赞同：17
> 
> 时间：2013-03-13T10:21:10.560
> 
> 标签：android, android-dialogfragment

我的`Fragment`应用中有一个显示`DialogFragment`.
我在片段中有一个关闭对话框的按钮。但是当我显示 dialogFragment 时，对话框外部的触摸什么也不做，我无法单击对话框片段外部的按钮。

如何允许 DialogFragment 的外部触摸？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-14T14:18:49.960

为了做到这一点，`Window`应该打开一个允许外部触摸的标志，并且为了美观，应该清除背景暗淡标志。
由于必须在创建对话框后完成，我通过`Handler`.

```
@Override
public void onViewCreated(final View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);

    // This is done in a post() since the dialog must be drawn before locating.
    getView().post(new Runnable() {

        @Override
        public void run() {

            Window dialogWindow = getDialog().getWindow();

            // Make the dialog possible to be outside touch
            dialogWindow.setFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL,
                    WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL);
            dialogWindow.clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);

            getView().invalidate();
        }
    });
} 
```

此时，外部触摸是可能的。

如果我们想让它更好并且没有框架，可以添加以下代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Hide title of the dialog
    setStyle(STYLE_NO_FRAME, 0);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-12-20T12:26:03.733

这是更通用的标志，允许任何操作，而不仅仅是触摸操作

```
window.setFlags(WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,
        WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-20T10:28:48.393

我找到了另一种方法来处理外部触摸时的解雇。请检查下面的代码示例，这肯定会起作用，

```
@Override
public void onStart() {
    // mDialogView is member variable
    mDialogView = getView();
    mDialogView.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            float eventX = event.getRawX();
            float eventY = event.getRawY();

            int location[] = new int[2];
            mDialogView.getLocationOnScreen(location);

            if (eventX < location[0] || eventX > (location[0] + mDialogView.getWidth()) || eventY < location[1]
                    || eventY > location[1] + mDialogView.getHeight()) {
                dismiss();
                return true;
            }
            return false;
        }
    });
} 
```

就我而言，我得到 getDialog() 不是空值，但 getDialog().dismiss() 不起作用。此外，上面标记的解决方案在我的情况下也不起作用。所以，我采用了这种方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-14T22:15:59.110

根据我上面的小调查，我真的认为这应该是公认的答案：

```
 @Override
  public Dialog onCreateDialog(Bundle savedInstanceState)
    {
    FragmentActivity act = getActivity();
    AlertDialog.Builder builder = new AlertDialog.Builder(act);

    // ... do your stuff here

    Dialog dialog = builder.create();

    dialog.setCanceledOnTouchOutside(false);

    Window window = dialog.getWindow();

    if( window!=null )
      {
      window.setFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL,
                      WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL);
      window.clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
      }

    return dialog;
    } 
```

即把flags的设置移到onCreateDialog()的最后，加上setCancelOnTouchOutside(false)。

接受的答案不适用于运行 Android 9 和 10（很可能是 11）的三星手机。看起来在这些系统上，三星已经改变了一些东西，使得设置这些标志只有在很早设置时才有效。

以上适用于任何地方，包括谷歌模拟器、LG Nexus 5X、HTC Desire 12、谷歌 Pixel 6、几部华为手机，以及我测试过的所有（大约 20 部）三星手机。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-13T11:58:28.500

我已经测试了接受的（Yaniv's）答案

```
Galaxy Tab A 9.7 Android 7.1.1: ok
Galaxy Tab A 8.0 Android 7    : ok
Galaxy Tab S4 Android 9       : no touch outside DialogFragment
Galaxy S5 Android 6.0.1       : ok
Galaxy Tab S2 Android 7       : ok
Galaxy Tab S3 Android 9       : no touch outside DialogFragment
Galaxy Tab S4 Android 9       : no touch outside DialogFragment
Galaxy Note Edge Android 6.0.1: ok
Galaxy Note4 Android 6.0.1    : ok 
```

它看起来确实不适用于 Android 9。当我说“不起作用”时，我的意思是当我尝试单击 DialogFragment 外部的按钮时，它的 onClick() 方法根本不会被调用。

**编辑**：根据我的发现（在评论中），我认为以下应该是公认的答案。以下适用于我测试过的所有地方，包括模拟器、Google Pixel 6、LG Nexus 5X、HTC Desire 12、大约 5 部华为手机和大约 20 部运行 Android 5 到 10 的三星手机。

```
public Dialog onCreateDialog(Bundle savedInstanceState)
    {
    FragmentActivity act = getActivity();
    AlertDialog.Builder builder = new AlertDialog.Builder(act);

    // ... do your stuff here....

    Dialog dialog = builder.create();

    dialog.setCanceledOnTouchOutside(false);

    Window window = dialog.getWindow();

    if( window!=null )
      {
      window.setFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL,
                      WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL);
      window.clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
      }

    return dialog;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T11:51:48.503

您需要根据需要设置适当的样式。[您可以在官方文档](http://developer.android.com/reference/android/app/DialogFragment.html)中阅读有关 FragmentDialogs 样式的更多信息。

我相信您可以使用以下样式：

*   STYLE_NO_FRAME

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-18T12:04:42.923

@yaniv 提供了答案。但如果你愿意，这里有一个片段，你可以得到相同的结果，但不需要将 a 发布`Runnable`到 root `View`：

```
@NonNull
@Override
public Dialog onCreateDialog(@Nullable final Bundle savedInstanceState) {
    final Dialog dialog = super.onCreateDialog(savedInstanceState);
    dialog.getWindow().addFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL);
    return dialog;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-04T11:36:12.323

好吧，让我们具体一点。如果你想使用外部视图，那么你不应该使用对话框片段，而是像这样使用片段。

```
 FragmentTransaction transaction = fragmentManager.beginTransaction();
    // For a little polish, specify a transition animation
    transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    // To make it fullscreen, use the 'content' root view as the container
    // for the fragment, which is always the root view for the activity
    transaction.add(android.R.id.content, newFragment)
               .addToBackStack(null).commit(); 
```

并制作布局 wrap_content，它显然看起来像 Dialog，默认情况下它被放置在屏幕的顶部。

欲了解更多详情，请访问[这里](http://developer.android.com/guide/topics/ui/dialogs.html)

# .net - 检查日期时间的工作日是否在 2 个日期时间值之间

> ID：15382541
> 
> 赞同：1
> 
> 时间：2013-03-13T10:21:15.620
> 
> 标签：.net, datetime, dayofweek

我想看看其他人如何在.Net中解决这个问题

**情景**：我想检查一下*`if the current datetime (Now()) is > Monday 6:00AM and < Friday 10:00PM`*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:39:29.133

您的场景可以用两种方式解释：

1.您要检查当前日期是否在星期一和星期五之间，以及当前时间是否在 6:00 和 21:59 之间。如果是这种情况，您可以使用以下功能：

```
bool DateIsInValidRange(DateTime date)
{   
    if(date.DayOfWeek == DayOfWeek.Sunday || date.DayOfWeek == DayOfWeek.Saturday) {
        return false;
    }

    if(date.Hour < 6 || date.Hour >=22) {
        return false;
    }

    return true;
} 
```

2.您想检查一个普通的日期范围（即，23:00 只要不是星期五就可以，5:00 只要不是星期一就可以）。在这种情况下：

```
bool DateIsInValidRange(DateTime date)
{   
    if(date.DayOfWeek == DayOfWeek.Sunday || date.DayOfWeek == DayOfWeek.Saturday) {
        return false;
    }

    if(date.DayOfWeek == DayOfWeek.Monday && date.Hour < 6) {
        return false;
    }

    if(date.DayOfWeek == DayOfWeek.Friday && date.Hour >= 22) {
        return false;
    }

    return true;
} 
```

对于当前时间，将其调用为：

```
bool isInValidRange = DateIsInValidRange(DateTime.Now); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:27:16.783

```
 bool CheckDay(DayOfWeek start,DayOfWeek End, DayOfWeek toCheck)
   {
  if (start <=max)
    return toCheck >=start && toCheck<=End;

return toCheck >=start || toCheck <=End
  } 
```

# asp.net-mvc-4 - Visual Studio 不会显示我安装的项目模板

> ID：15382542
> 
> 赞同：3
> 
> 时间：2013-03-13T10:21:20.253
> 
> 标签：asp.net-mvc-4, visual-studio-2012, projects-and-solutions

我正在尝试为 asp.net MVC4 安装一些定制的项目模板，但是我的 Visual Studio 2012 Premium 不会显示新模板。模板由一个 .VISX 文件安装，如下所示：[http ://www.asp.net/single-page-application/overview/templates/hottowel-template](http://www.asp.net/single-page-application/overview/templates/hottowel-template)

Visual Studio 将此文件显示为“已启用”和“已安装”扩展，但是当我尝试创建新的 ASP.NET MVC4 项目时，它没有将这些模板显示为选项，如下图所示：![http://i3.asp.net/media/4007155/custom_mvc_templates_11.jpg?cdn_id=2013-03-08-003](../Images/ff2c19ba1116cad5ed718c3f0f779f1e.png)

我只是看到常规选项，它没有显示 Hot-Towel 模板或任何其他单页应用程序模板。如果你们中的一个知道，请告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T10:47:29.727

我通过安装 2012 年秋季的 ASP.Net Web 工具更新包解决了这个问题： [http ://www.asp.net/vnext](http://www.asp.net/vnext)

我决定回答我自己的问题，以帮助其他人解决同样的问题。

# c# - 如何在我的项目 32 位应用程序 c# 中包含 oracle 客户端 64 位版本

> ID：15382552
> 
> 赞同：0
> 
> 时间：2013-03-13T10:21:51.223
> 
> 标签：c#, 32bit-64bit, oracleclient

我正在使用 Visual Studio 2010 和 Oracle 客户端从 VS 2010 4.0 框架和我的 windows XP 32 位操作系统中的 comm 对象开发一个项目。但目标系统是 64 位服务器，它不支持 32 位 oracle 客户端。所以我在服务器上安装了 64 位 oracle 客户端。

现在我的项目没有在服务器上运行它询问 32 位 oracle 客户端。

如何在我的项目中包含 oracle 64 位版本？

（或）我的问题的任何其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:46:43.653

您可以在应用程序池中启用 32 位应用程序并使用 64 位 Oracle 客户端。

要在您的应用程序池中启用 32 位应用程序，请按照以下步骤操作：

1.  使用 run=> inetmgr 打开 IIS 管理
2.  转到应用程序池的高级设置
3.  对“启用 32 位应用程序”选项选择“真”。

![在此处输入图像描述](../Images/b5c069cb61b7747b8dc7820e9c2f98b6.png)

# facebook-c#-sdk - 如何使用 c# sdk 在朋友的 Facebook 墙上发布消息

> ID：15382555
> 
> 赞同：0
> 
> 时间：2013-03-13T10:21:58.147
> 
> 标签：facebook-c#-sdk

使用 facebook c# sdk，我可以发布到我的墙上，但是当我尝试在我朋友的墙上发布时，它只是没有显示，任何想法为什么会发生这种情况？

这行得通

`client.Post("me/feed", parameters);`

这不起作用

`client.Post("friends id/feed", parameters);`

`client.Post("/friends id/feed", parameters);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:03:16.970

在服务器端是不允许的，为此使用 fb.ui 和 wallpost 对话框。

根据[2013 年 2 月完成的 FB 更改](https://developers.facebook.com/roadmap/completed-changes/)。

> **删除通过 Graph API 向朋友墙发帖**
> 的功能 我们将删除通过 Graph API 向用户朋友墙发帖的功能。具体来说，针对 [user_id]/feed 的 [user_id] 与会话用户不同的帖子，或 target_id 用户与会话用户不同的 stream.publish 调用将失败。如果您想允许人们发布到他们朋友的时间线，请调用提要对话框。通过用户提及标签或动作标签包含朋友的故事将显示在朋友的时间线上（假设朋友批准标签）。有关详细信息，请参阅[此博客文章](https://developers.facebook.com/blog/post/2012/10/10/growing-quality-apps-with-open-graph/)。

来自博客：

> 通过 API 发布到朋友墙会产生大量负面用户反馈，包括“隐藏”和“标记为垃圾邮件”，因此我们将其从 API 中删除。如果您想允许人们从您的朋友的时间线发布信息应用程序，您可以调用提要对话框。通过用户提及标记或动作标记包含朋友的故事将显示在朋友的时间轴上（假设朋友批准标签）。

# sql-server - Excel 2010 VBA adodb 连接到 SQL Server 2010 登录超时

> ID：15382559
> 
> 赞同：2
> 
> 时间：2013-03-13T10:22:07.947
> 
> 标签：sql-server, vba, timeout, adodb

我在这个错误上花了几个小时，但在我的大脑或互联网上都找不到任何相关的解决方案。

我在 Excel 2010 中编写了一些 VBA 宏，它们连接到我计算机上的 SQL Server 2008 数据库并获取一些信息。我用了几个星期，它们工作得很好。

2 天前，我在一台新计算机上设置了 SQL Server 2008 和 Excel 2010，并尝试导入我的数据库和 VBA 宏。

这是问题所在：尝试使用宏时，excel 停止回答，然后在我强制关闭时因灾难性故障而崩溃。所以我创建了一个新的空数据库（称为 PR_db），创建了一个新的 excel 文件，并尝试使用以下代码与数据库建立一个简单的连接：

```
Public Const cString = "Provider=SQLOLEDB; Data Source=tosh-TOSH; Initial Catalog=PR_db;Trusted_Connection=yes"

Dim objMyConn As Object
Set objMyConn = CreateObject("ADODB.Connection")
objMyConn.Open
objMyConn.Close 
```

该代码在我以前的计算机上运行了数周。但是在新计算机上，它会导致“登录超时错误”10 次中有 9 次（偶尔它会起作用，然后当我再次尝试时它不起作用，即使我没有更改任何东西！）

我真的迷路了……知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:37:39.447

我建议阅读有关连接字符串的更多信息。
[http://www.connectionstrings.com/](http://www.connectionstrings.com/)

# maven - 使用 maven 将 db2 jar 添加到 java webapp

> ID：15382561
> 
> 赞同：5
> 
> 时间：2013-03-13T10:22:16.257
> 
> 标签：maven

我正在尝试使用 Maven 将以下 db2 jar 添加到我的 Java Web 应用程序中......

```
db2jcc_license_cu.jar  
db2jcc_javax.jar   
db2jcc.jar 
```

我正在按照这篇文章中发布的说明进行操作...... [我可以在不安装它们的情况下将 jars 添加到 maven 2 build classpath 吗？](https://stackoverflow.com/questions/364114/can-i-add-jars-to-maven-2-build-classpath-without-installing-them)

我想使用静态项目内存储库解决方案。到目前为止，我已经...

1.  在我的根目录中创建了一个名为 lib 的文件夹。在这个目录中存在三个 db2 jar。
2.  将以下内容添加到我的 pom 文件中...

> ```
>  <repository>
>         <id>lib</id>
>         <releases>
>             <enabled>true</enabled>
>             <checksumPolicy>ignore</checksumPolicy>
>         </releases>
>         <snapshots>
>             <enabled>false</enabled>
>         </snapshots>
>         <url>file://${project.basedir}/lib</url>    
>  </repository> 
>  </repositories> 
> ```

```
<dependency> 
    <groupId>com.ibm.db2.jcc</groupId>
    <artifactId>db2jcc</artifactId>
    <version>3.8.47</version>
</dependency>
<dependency>
    <groupId>com.ibm.db2.jcc</groupId>
    <artifactId>db2jcc_license_cu</artifactId>
    <version>3.8.47</version>
</dependency> 
```

但是当我运行 maven 安装时，我得到...

```
[WARNING] The POM for com.ibm.db2.jcc:db2jcc:jar:3.8.47 is missing, no dependency information available
[WARNING] The POM for com.ibm.db2.jcc:db2jcc_license_cu:jar:3.8.47 is missing, no dependency information available 
```

我通过运行一个...得到了罐子的版本。

> java com.ibm.db2.jcc.DB2Jcc -version

我是否正确指定了此版本信息？谁能建议我做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T01:15:00.837

问题是您没有在“project-maven-repository”中正确安装 jars（即在文件夹中`${project.basedir}/lib`）

`mvn install`Maven 将jar 文件（当您这样做时）存储在 Maven 存储库中。Maven 存储库具有精确的层次结构。这是该结构的简化图：

*   工件`groupId`+`artifactId`定义存储工件的文件夹路径的第一部分（在存储库中）。
*   工件`version`是文件夹路径的第二部分
*   工件`version`也是工件名称的后缀
*   这`artifactId`是工件名称
*   包装是工件扩展（默认是jar）

默认情况下，maven 使用位于下的存储库`<USER_HOME>/.m2/repository`

您尝试设置的解决方案使用存储库的另一个位置：`${project.basedir}/lib`即使它不是默认存储库位置，它仍然是*maven-repository*，因此 maven 期望在此位置下找到通常的 maven 存储库层次结构。

这就是为什么您需要`${project.basedir}/lib`像 Maven 存储库一样组织您的文件夹。[这在参考帖子](https://stackoverflow.com/questions/364114/can-i-add-jars-to-maven-2-build-classpath-without-installing-them)的这一部分中进行了解释：

> **使用 Maven 安装到项目 repo**
> 
> 我建议不要手动创建此结构，而是使用 Maven 插件将您的 jar 安装为工件。因此，要将工件安装到 repo 文件夹下的项目内存储库中，请执行：
> 
> `mvn install:install-file -DlocalRepositoryPath=lib -DcreateChecksum=true -Dpackaging=jar -Dfile=[your-jar] -DgroupId=[...] -DartifactId=[...] -Dversion=[...]`
> 
> 如果您选择这种方法，您将能够将 pom 中的存储库声明简化为：

```
<repository>
    <id>repo</id>
    <url>file://${project.basedir}/lib</url>
</repository> 
```

所以你需要做一个`mvn install`来创建`${project.basedir}/lib`层次结构（你可以手工做，但不推荐这样做并且容易出错）。

在您的情况下，要运行的命令将是这样的：（假设您将 jar 放入 HOME_DIR 并在您的 HOME_DIR 中运行此命令`${project.basedir}`）

`mvn install:install-file -DlocalRepositoryPath=lib -DcreateChecksum=true -Dpackaging=jar -Dfile=<USER_HOME>/db2jcc_license_cu.jar -DgroupId=com.ibm.db2.jcc -DartifactId=db2jcc_license_cu -Dversion=3.8.47`

您选择的方法有哪些优势：

*   没有 maven 设置的开发人员将在 SCM 系统下的项目源中拥有可用的库。
*   您可以轻松引用不在公共 maven 存储库中的 jar，而无需诸如[artifactory](http://www.jfrog.com/home/v_artifactory_opensource_overview)或[nexus之类的东西](http://www.sonatype.org/nexus/)

缺点：

*   `${project.basedir}/lib`对于不习惯使用 maven 的人来说，一个非常复杂的文件夹结构看起来很奇怪。
*   您将在 SCM 下存储库（大量的巨大二进制文件）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-22T07:23:20.963

另一种解决方案是事先下载这些 jar 并将它们放在相对于您的项目的某个位置（如`lib`目录）。现在只需告诉 maven 使用这些罐子。这里的`groupId`和`artifactdId`是`version`JFYI，因为它们不会用于下载任何内容。

此解决方案的优点是您不必构建 Maven 存储库。

```
<dependencies>
    ...      
    <dependency>
        <groupId>com.ibm.db2.jcc</groupId>
        <artifactId>licences</artifactId>
        <version>1.0</version> <!-- Adjust this properly -->
        <scope>system</scope>
        <systemPath>${basedir}/lib/db2jcc_license_cu.jar</systemPath>
    </dependency>
    <dependency>
        <groupId>com.ibm.db2.jcc</groupId>
        <artifactId>db2jcc4</artifactId>
        <version>1.0</version> <!-- Adjust this properly -->
        <scope>system</scope>
        <systemPath>${basedir}/lib/db2jcc4.jar</systemPath>
    </dependency>
    <dependency>
        <groupId>com.ibm.db2.jcc</groupId>
        <artifactId>db2jcc_javax</artifactId>
        <version>1.0</version> <!-- Adjust this properly -->
        <scope>system</scope>
        <systemPath>${basedir}/lib/db2jcc_javax.jar</systemPath>
    </dependency>
</dependencies> 
```

参考链接（日文）：[Mavenリポジトリで提供されていないサードパーティJarをどうするか](http://sinsengumi.net/blog/2012/12/maven%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%81%A7%E6%8F%90%E4%BE%9B%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%81%AA%E3%81%84%E3%82%B5%E3%83%BC%E3%83%89%E3%83%91%E3%83%BC%E3%83%86%E3%82%A3jar/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T12:41:26.243

我猜这些罐子没有 pom.xml。因此发出警告。如果罐子被打包并且应用程序可以工作，那么我想你没有问题。

# installation - 如何在 NSIS 中显示部分而不让用户选择部分

> ID：15382566
> 
> 赞同：0
> 
> 时间：2013-03-13T10:22:32.987
> 
> 标签：installation, nsis

我编写了一个 NSIS 安装程序，其中包含三个安装部分，如本示例所示（这不是我的安装程序，但我的看起来几乎相同）：

[截面画面示例](http://i444.photobucket.com/albums/qq170/MikeWard88/private/setupfile.jpg)

但是在这里用户有机会选择某些部分，但我想避免这种情况。当然我知道这些部分是专门为此而设计的，但我只是想向用户展示我的应用程序有哪些部分，但他不应该能够选择/取消选择某些东西。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:51:20.310

你可以..

1.  [使用SectionIn RO](http://nsis.sourceforge.net/Reference/SectionIn)始终强制选择一个部分

2.  允许至少选择一个部分（请参阅`NSIS\Examples\one-section.nsi`）

# css - 按 ID 将 CSS（通过 LESS）应用于模式框不起作用

> ID：15382576
> 
> 赞同：1
> 
> 时间：2013-03-13T10:22:50.090
> 
> 标签：css, html, modal-dialog, less

我是 StackOverflow 的新用户。期待成为您精彩社区的一员。我的问题如下：

我想在我的网站上使用 Twitter Bootstrap 模式框。但是，我在让 CSS 在模态框上工作时遇到了问题。我编写了以下 HTML 代码：

```
<div id="playModal" class="modal hide fade">
<div class="modal-header">  
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <span class="login"><strong>Login</strong></span>
</div>  
<div class="modal-body">  
    <form class="form-horizontal" accept-charset="utf-8" method="post" action="#">
        <fieldset>
            <div class="control-group">
                <label class="control-label" for="play_form_username">Username</label>
                <div class="controls">  
                    <input type="text" id="play_form_username" name="username" placeholder="Enter your username" required />
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="play_form_password">Password</label>
                <div class="controls">  
                    <input type="password" id="play_form_password" name="password" placeholder="Enter your password" required />
                </div>
            </div>                  
        </fieldset> 
        <span><a href="#">Forgot your password?</a></span>
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Play!</button>
        </div>
    </form>
</div>  
<div class="modal-footer">  
    <span>Not a member yet? <a href="#registerModal" role="button" data-toggle="modal" data-backdrop="static">Join Now!</a></span>
    <!--need to find a way to get this modal box to disappear if registerModal is called-->
</div>  
</div> 
```

接下来，我要配置页面的设计。我正在使用 LESS 编写通过 SIMPLESS 转换为 CSS 的代码。我尝试通过以下 LESS 代码中的模态 div ID 传递我想要的 CSS 配置：

```
#playModal{
width: 300px;
.modal-backdrop,
.modal-backdrop.fade.in{
    opacity: 1;
    filter: alpha(opacity=100);
}
.modal-header{
    .login{
        font-family: arial;
        font-size: 60px;
        font-weight: bolder;
    }
}
.modal-body{
    max-height: 200px;
}
} 
```

这成功编译为 CSS，但是当我使用 Firebug 分析网页时，似乎***没有为 modal box 传递任何 CSS***。相反，如果我使用按类传递 CSS 配置，类似于以下内容，它可以工作。

```
.modal{
width: 315px;
margin-left: 0px;
left: 50%;
top: 58px;
.modal-header{
    padding: 7px 15px;
    .login{
        color: #203665;
        font-size: 20px;
        font-weight: bolder;
        line-height: 24px;

    }
}
} 
```

为什么通过ID引用模态框时CSS规则不通过？ID不是比类更具体吗？注意：即使我在使用 ID 的代码上使用 !important，它也不起作用。

如果有人可以帮助我，将不胜感激——尽管这可能是因为我做了一些愚蠢的事情。（我需要使用 ID 而不仅仅是类的上下文是：我需要添加第二个模式框，并且我希望它具有不同的大小、字段大小等）谢谢。

**编辑：（回答我自己的愚蠢问题）** 在涉足代码之后，我发现以下工作：

```
//Settings for all models
.modal-backdrop.fade.in{
opacity: 0.9!important;
filter: alpha(opacity=90)!important;
}

//Settings for playModal
#playModal{
width: 315px;
margin-left: 0px;
left: 50%;
top: 58px;
.modal-header{
    padding: 7px 15px;
    .login{
        color: #203665;
        font-size: 20px;
        font-weight: bolder;
        line-height: 24px;

    }
}
.modal-body{
    padding: 10px;
    .control-group{
        margin-bottom: 10px;
        .control-label{
            width: 65px;
            text-align: left;
        }
        .controls{
            margin-left: 75px;
        }
    }
    span a{
        display: block;
        margin-top: 0px;
        padding-top: 15px;
        float: left;
        &:hover{
            text-decoration: none;
        }
    }
    .form-actions{
        display: block;
        float: right;
        margin: 0px;
        padding: 0px;
        border: 0px;
        background-color: #FFFFFF;
        .btn{
            font-size: 18px;
            line-height: 24px;
        }
    }
}
.modal-footer{
    padding: 7px!important;
}
} 
```

我认为我做错的是将 .modal-backdrop.fade.in 放在#playModal 中，现在我突然意识到 .modal-backdrop.fade-in 将指的是#playModal div***之外的区域。***

所以总而言之，这只是一个小错误让我工作了这么多小时。很抱歉浪费大家的时间。从 StackOverflow 开始的方式是什么。但无论如何，感谢大家试图帮助我。请投票关闭此帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:55:52.233

您使用了错误的案例。

你给元素一个id，`playModal`

你的CSS是指`#playmodal`

Css 区分大小写。

# php - 如何生成排列组合结果

> ID：15382577
> 
> 赞同：1
> 
> 时间：2013-03-13T10:22:51.493
> 
> 标签：php, arrays, multidimensional-array

我有这个数组

```
$dataArray = array
        (
        array(1,11,111),
        array(2,22,222),
        array(3,33,333),
        array(4,44,444)
    ); 
```

我也用谷歌搜索，但没有`PHP`找到有用的脚本..

**使用置换组合方法的**结果****

 **```
1,11,111
1,111,11
11,111
1,11,
2,11,111
2,11,1
.
.
.
. 
```

是的，我已经用排列组合方法尝试过

```
function permutations(array $array, $r=false)
    {
        switch (count($array)) {
            case 1:
                return $array[0];
                break;
        }

        $keys = array_keys($array);

        $a = array_shift($array);
        $k = array_shift($keys); // Get the key that $a had
        $b = permutations($array, 'recursing');

        $return = array();
        foreach ($a as $v) {
            if($v)
            {
                foreach ($b as $v2) {
                    if($r == 'recursing')
                        $return[] = array_merge(array($v), (array) $v2);
                    else
                        $return[] = array($k => $v) + array_combine($keys, $v2);
                }
            }
        }

    return $return;
}

$x = permutations($dataArray);      
echo "<pre>";               
print_r($x); 
```**

# php - 正则表达式匹配可能包含中文字符的字符串

> ID：15382580
> 
> 赞同：2
> 
> 时间：2013-03-13T10:23:04.367
> 
> 标签：php, regex

我正在尝试编写一个可以匹配可能包含中文字符的字符串的正则表达式。例子：

```
hahdj5454_fd.fgg"
example.com/list.php?keyword=关键字
example.com/list.php?keyword=php 
```

我正在使用这个表达式：

```
$matchStr =  '/^[a-z 0-9~%.:_\-\/[^x7f-xff]+$/i';
$str      =  "http://example.com/list.php?keyword=关键字";

if ( ! preg_match($matchStr, $str)){
    exit('WRONG');
}else{
    echo "RIGHT"; 
} 
```

它匹配类似`dasdsdsfds`or的纯英文字符串`http://example.com/list.php`，但不匹配包含中文字符的字符串。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:49:44.353

假设您想将此正则表达式匹配的字母集从 ASCII 扩展到所有 Unicode 字母，那么您可以使用

```
$matchStr =  '#^[\pL 0-9~%.:_/-]+$#u'; 
```

我已经删除了`[^x7f-xff`没有任何意义的部分（在你的正则表达式中，它会匹配一个左括号、一个插入符号和一些已经被该字符类的`a-z`and`0-9`部分覆盖的 ASCII 字符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T10:25:46.320

这有效：

```
$str = "http://mysite/list.php?keyword=关键字";

if (preg_match('/[\p{Han}]/simu', $str)) {
    echo "Contains Chinese Characters"; 
}else{
    exit('WRONG'); // Doesn't contains Chinese Characters
} 
```

# angularjs - 如何在 AngularJS 中初始化模型？

> ID：15382582
> 
> 赞同：1
> 
> 时间：2013-03-13T10:23:10.703
> 
> 标签：angularjs

我正在寻找在控制器中没有 ng-init 或丑陋代码的空值初始化模型的方法（我的表单模型非常巨大并且包含可变数量的字段）。

请运行示例[http://jsfiddle.net/c9Q6Y/](http://jsfiddle.net/c9Q6Y/)

“序列化”链接显示“{}” - 如果输入未触及则为空模型，如果输入要输入的内容并清除它，则显示 {"name":""}。

默认情况下，如何将AngularJS调整为将模型字段初始化为空行？

```
<div ng-app="">
  <form name="myForm" ng-controller="Ctrl">
      text: <input name="input"  ng-model="user.name">     
   <div>
      <a ng-click="Serialize()">Serialize</a> 
      </div>
       {{serializedUser}}
   </form>
</div>

function Ctrl($scope) {
    $scope.serializedUser = "";
    $scope.user = {};

    $scope.Serialize = function() {
        $scope.serializedUser = JSON.stringify($scope.user);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:31:30.947

恐怕你必须手动完成...

```
$scope.user = {prop1: '', prop2: '', prop3: 0, prop4: [] ...}; 
```

您可以执行以下操作：

```
$scope.resetUser = function() {
  $scope.user = {prop1: '', prop2: '', prop3: 0, prop4: [] ...};
}; 
```

然后在控制器的底部：

```
$scope.resetUser(); 
```

另一种解决方案可能是从您的工厂返回这样的存根对象。

# ios - 在 MDM 单应用模式下禁用 iPad 的电源按钮

> ID：15382583
> 
> 赞同：1
> 
> 时间：2013-03-13T10:23:16.543
> 
> 标签：ios, ipad, mdm, guided-access

如果我将 iPad 设置为使用 iOS 引导访问功能，则可以禁用主页按钮和电源按钮。这意味着设备不能被用户锁定。但是，如果我通过 MDM 激活单应用程序模式，设备仍然可以锁定，但主页按钮被禁用。

是否可以将设备配置为禁用电源按钮或通过可以在设置中启动的 MDM 启动“常规”引导访问功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-21T18:16:59.803

乙，

Apple Profile Manager（在 MAC OS X Server.app 中可用）允许 MDM 控制，允许 yoiu 指定设置 Single App 模式。有一个标志可以启用/禁用睡眠/唤醒按钮。如果睡眠/唤醒处于活动状态，您可以睡眠/唤醒 ios 设备。

如果睡眠/唤醒被禁用，您将无法让 ios 设备进入睡眠状态。

更正：如果启用了睡眠/唤醒，您可以关闭电源，当设备锁定时（在输入密码之前），您将能够按住电源按钮然后滑动关闭电源。如果设备已解锁，单应用模式不会出现长按电源键的滑动解锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:41:36.900

MDM 文档没有具体说明 AppLock 配置文件有任何特殊标志来指定电源按钮是启用还是禁用。因此，看起来您可以通过仅 MDM 模式打开/关闭主页按钮并启用电源按钮。

# objective-c - 将属性更新级联到相关的托管对象

> ID：15382586
> 
> 赞同：1
> 
> 时间：2013-03-13T10:23:18.010
> 
> 标签：objective-c, core-data, nsmanagedobject

我有一个与自身具有一对一关系的托管对象。这方面的一个例子可能是一个人对象可以链接到另一个人来代表一个婚姻。

如果人员的属性之一是地址并且它已针对一个人进行了更改，我将如何遵循这种关系并确保它已针对链接的人员对象进行了更改。

最初我考虑在 setter 中执行此操作，即 setAddress，但我很快意识到这会导致两个对象之间的无限递归。

什么是这类问题的优雅解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:27:21.273

您仍然可以在设置器中执行此操作，但只需检查目标值是否已经是您要设置的值，从设置器返回，没有任何无限循环。

你可以尝试类似的东西

```
- (void)setAddress:(NSString *)address
{
    // common setter here

    // then set your relationship's address
    if (![self.personRelationship.address isEqual:address]) {
        self.personRelationship.address = address;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:30:24.923

**1\. 步骤**

如果要覆盖 CoreData 中的设置器，则应遵循此处的文档：

[http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdAccessorMethods.html#//apple_ref/doc/uid/TP40002154-SW14](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdAccessorMethods.html#//apple_ref/doc/uid/TP40002154-SW14)

关键是使用示例中的“原始”访问器：

```
- (void)setAddress:(NSString *)newAddress
{
    [self willChangeValueForKey:@"address"];
    [self setPrimitiveAddress:newAddress];
    [self didChangeValueForKey:@"address"];
} 
```

然后，您将不会尝试设置属性的无限循环。

**2\. 步骤**

将其应用于地址问题，您也可以设置合作伙伴的地址。

代码将更改为

```
- (void)setAddress:(NSString *)newAddress
{
    [self willChangeValueForKey:@"address"];
    [self setPrimitiveAddress:newAddress];
    [self didChangeValueForKey:@"address"];

    [self.partner willChangeValueForKey:@"address"];
    [self.partner setPrimitiveAddress:newAddress];
    [self.partner didChangeValueForKey:@"address"];
} 
```

noa 建议的替代方案：

```
- (void)setAddress:(NSString *)newAddress
{
    [self willChangeValueForKey:@"address"];
    [self setPrimitiveAddress:newAddress];
    if (![self.partner.address isEqual:newAddress])
        [self.partner setAddress:newAddress];
    [self didChangeValueForKey:@"address"];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T16:29:23.170

根据您的描述，我会将地址移动到`Address`与`Person`. 建立关系，使每个人都有一个地址，并且每个地址可以被多个人使用。

通过这样做，您只需在一个地方更改地址，然后对任何使用该地址的人立即生效。如果两个拥有相同地址的人以后需要有不同的地址，`Address`请为他们创建一个新实体。

# python - QSplitter 车把

> ID：15382588
> 
> 赞同：3
> 
> 时间：2013-03-13T10:23:25.617
> 
> 标签：python, pyqt, qsplitter

我正在使用 python 2.6 和兼容的 PyQt4 版本 4.5.3，在我的窗口中我使用 QSplitter 来处理两个 QTableWidget 但我无法找到两个小部件之间的分割栏。但在 Autodesk Maya 软件中，拆分器的句柄为点。谁能帮助我在 PyQt 窗口中实现这一点。附上图片供您参考。

![在此处输入图像描述](../Images/1fe987de472ce081ea0478eafa151e42.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:30:35.723

您可以自定义`QSplitter`使用样式表： http: [//doc.qt.io/qt-4.8/stylesheet-examples.html#customizing-qsplitter](http://doc.qt.io/qt-4.8/stylesheet-examples.html#customizing-qsplitter)

# c# - 选择模板

> ID：15382591
> 
> 赞同：1
> 
> 时间：2013-03-13T10:23:34.023
> 
> 标签：c#, linq, select

是否可以`SELECT`在`LINQ`查询中制作模板？现在我有`6`使用完全相同 SELECT 的方法，如果可能的话，我想使用模板。

这是我正在使用的代码，当我想更改选择时，我必须在代码中的很多地方更改相同的内容。

```
result = query.Select(b => new
{
    route_id = b.b.route_id,
    name = b.b.name,
    description = b.b.description,
    distance = b.b.distance,
    distance_to_route = (int)b.distance_to_from_me,
    departure_place = b.b.departure_place,
    arrival_place = b.b.arrival_place,
    owner = b.b.user.username,
    average_rating = b.avg_rating,
    is_favorite = b.is_favorite,
    date = b.b.date,
    attributes = b.b.route_attributes.Select(c => 
        c.route_attribute_types.attribute_name),
    coordinates = b.b.coordinates.Select(c => 
        new coordinateToSend { sequence = c.sequence, 
            lat = c.position.Latitude, 
            lon = c.position.Longitude })
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:48:22.907

这是您可以执行此操作的一种方法的简单示例：

在您的示例中，您将源类型转换为匿名类型。您可以创建一个类来表示您的转换/结果类型，例如：

```
 public class ResultClass
    {
        public string ResultPropA { get; set; }
    } 
```

例如，假设以下是您的源类的定义：

```
 public class SourceClass
    {
        public string SourcePropA { get; set; }
    } 
```

现在您已经有了源对象和结果对象的类型定义，您可以创建一个扩展方法来将源类的集合转换为结果类的集合：

```
 public static class SourceToResultRepository
    {
        public static IEnumerable<ResultClass> ConvertSourceToResult
            (this IEnumerable<SourceClass> source)
        {
            return source.Select(s => new ResultClass
            {
                ResultPropA = s.SourcePropA
                //Add all other property transformations here
            });
        }
    } 
```

这是一个示例，说明如何在需要执行转换的任何地方使用它：

```
 //Extension usage:
 var result = Database.Source.ConvertSourceToResult();

 //Direct usage:
 var result = SourceToResultRepository.ConvertSourceToResult(Database.Source); 
```

# android - Android 重复警报管理器未触发

> ID：15382602
> 
> 赞同：0
> 
> 时间：2013-03-13T10:24:11.650
> 
> 标签：android, broadcastreceiver, android-service, alarmmanager

我一直在使用以下代码每 20 秒设置一次警报

```
public class SchedulerSetupReceiver extends BroadcastReceiver {
private static final String APP_TAG = "LOG: ";

private static final int EXEC_INTERVAL = 20 * 1000;

@Override
public void onReceive(final Context ctx, final Intent intent) {
    Log.d(APP_TAG, "SchedulerSetupReceiver.onReceive() called");
    AlarmManager alarmManager = (AlarmManager) ctx
            .getSystemService(Context.ALARM_SERVICE);
    Intent i = new Intent(ctx, SchedulerEventReceiver.class); 
    PendingIntent intentExecuted = PendingIntent.getBroadcast(ctx, 0, i,
            PendingIntent.FLAG_CANCEL_CURRENT);
    Calendar now = Calendar.getInstance();
    now.add(Calendar.SECOND, 20);
    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,
            now.getTimeInMillis(), EXEC_INTERVAL, intentExecuted);
} 
```

}

代码按预期工作，我在 LogCat 中每 20 秒收到一次日志消息。

我想设置一个每日重复的闹钟，在每天上午 10:00 触发。然而，警报并未触发。我在上午 10:00（例如上午 9.59）之前更改了模拟器中的时间，然后运行代码。但是，警报不会在上午 10:00 触发。我还为警报设置了一个ID。我还将模拟器中的日期更改为明天。根本没有发出警报。

为什么会这样？

```
public class SchedulerSetupReceiver extends BroadcastReceiver {
private static final String APP_TAG = "LOG: ";
private static final int ALARM_ID_2000 = 2000;

//private static final int EXEC_INTERVAL = 20 * 1000;

@Override
public void onReceive(final Context ctx, final Intent intent) {
    Log.d(APP_TAG, "SchedulerSetupReceiver.onReceive() called");
    AlarmManager alarmManager = (AlarmManager) ctx
            .getSystemService(Context.ALARM_SERVICE);
    Intent i = new Intent(ctx, SchedulerEventReceiver.class);       
    PendingIntent intentExecuted = PendingIntent.getBroadcast(ctx, ALARM_ID_2000, i,
            PendingIntent.FLAG_CANCEL_CURRENT);

    Calendar cal = new GregorianCalendar();
    cal.setTimeInMillis(System.currentTimeMillis());

    Calendar updateTime = new GregorianCalendar();
    //we want to set a daily alarm at 10:00AM
    updateTime.add(Calendar.DAY_OF_YEAR, cal.get(Calendar.DAY_OF_YEAR));
    updateTime.set(Calendar.HOUR_OF_DAY,10);
    updateTime.set(Calendar.MINUTE,0);
    updateTime.set(Calendar.SECOND,0);
    updateTime.set(Calendar.MILLISECOND,0);
    updateTime.set(Calendar.DATE,cal.get(Calendar.DATE));
    updateTime.set(Calendar.MONTH,cal.get(Calendar.MONTH));

    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,
            updateTime.getTimeInMillis(), AlarmManager.INTERVAL_DAY, intentExecuted);
} 
```

我已经切换回我的旧代码，现在我仍然没有在启动时触发警报。我尝试了以下方法：

1.  杀死亚行
2.  重启日食
3.  新模拟器

这是昨天的 20 秒警报，但现在即使该代码也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:39:09.543

问题不在于代码，而在于模拟器。设备视图下的应用程序未显示该过程。我期待模拟器第一次启动时会触发警报，但是我不得不重新启动模拟器，即从模拟器窗口打开和关闭设备以模仿重新启动。

一旦模拟器“重新启动”，警报就会按预期触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T19:54:05.593

试试下面：

```
public class SchedulerSetupReceiver extends BroadcastReceiver {
private static final String APP_TAG = "LOG: ";
private static final int EXEC_INTERVAL = 20 * 1000;

@Override
public void onReceive(final Context ctx, final Intent intent) {
Log.d(APP_TAG, "SchedulerSetupReceiver.onReceive() called");
AlarmManager alarmManager = (AlarmManager) ctx
        .getSystemService(Context.ALARM_SERVICE);
Intent i = new Intent(ctx, SchedulerEventReceiver.class); 
PendingIntent intentExecuted = PendingIntent.getBroadcast(ctx, 0, i,
        PendingIntent.FLAG_CANCEL_CURRENT);
Calendar now = Calendar.getInstance();
now.setTimeInMillis(System.currentTimeMillis());
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,
        now.getTimeInMillis(), EXEC_INTERVAL, intentExecuted);
}
} 
```

我在这里所做的只是添加了 now.setTimeInMillis(System.currentTimeMillis()); 检索当前时间。还要确保您已在清单中添加了接收器。

# struts2-json-plugin - struts 2.3.8 有错误

> ID：15382603
> 
> 赞同：1
> 
> 时间：2013-03-13T10:24:19.750
> 
> 标签：struts2-json-plugin

**我使用struts 2.3.8， xwork2.util**包中不能有**TextUtils**类，但是struts 2.2.5有类

 **任何改变，..

我用了以下罐子

```
antlr-2.7.7.jar
asm-3.3.jar
asm-commons-3.3.jar
asm-tree-3.3.jar
com.springsource.org.aopalliance-1.0.0.jar
commons-fileupload-1.2.2.jar
commons-io-2.0.1.jar
commons-lang3-3.1.jar
commons-logging-1.1.1.jar
commons-logging-api-1.1.jar
dom4j-1.6.1.jar
ehcache-core-2.4.3.jar
freemarker-2.3.19.jar
hibernate-commons-annotations-4.0.1.Final.jar
hibernate-core-4.1.10.Final.jar
hibernate-ehcache-4.1.10.Final.jar
hibernate-jpa-2.0-api-1.0.1.Final.jar
javassist-3.11.0.GA.jar
javassist-3.15.0-GA.jar
jboss-logging-3.1.0.GA.jar
jboss-transaction-api_1.1_spec-1.0.0.Final.jar
jsonplugin-0.34.jar
jtds-1.1.jar
log4j-1.2.14.jar
ognl-3.0.6.jar
servlet-api.jar
sitemesh-2.4.2.jar
slf4j-api-1.6.1.jar
spring-aop-3.2.1.RELEASE.jar
spring-beans-3.2.1.RELEASE.jar
spring-context-3.2.1.RELEASE.jar
spring-core-3.2.1.RELEASE.jar
spring-expression-3.2.1.RELEASE.jar
spring-jdbc-3.2.1.RELEASE.jar
spring-orm-3.2.1.RELEASE.jar 
```

spring-tx-3.2.1.RELEASE.jar spring-web-3.2.1.RELEASE.jar struts2-config-browser-plugin-2.3.8.jar struts2-core-2.3.8.jar struts2-jquery-plugin- 3.5.1.jar struts2-spring-plugin-2.3.8.jar xwork-core-2.3.8.jar**

# c++ - char和CString有什么区别和关系

> ID：15382605
> 
> 赞同：3
> 
> 时间：2013-03-13T10:24:25.823
> 
> 标签：c++, visual-c++, mfc

有人可以解释一下 char * 和 CString 之间的区别和关系吗？...谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:27:23.413

a CString 将是一个数组，`char`a`char*`将是指向数组的指针`char`，您可以使用它来迭代字符串的字符。

实际上来自[MSDN](http://msdn.microsoft.com/en-us/library/aa300688%28v=vs.60%29.aspx)：

> `CString`是基于`TCHAR`数据类型的。如果符号`_UNICODE`是为你的程序定义的，`TCHAR`则定义为 type `wchar_t`，一个 16 位的字符类型；否则，它被定义为 char，即普通的 8 位字符类型。那么，在 Unicode 下，`CString`对象由 16 位字符组成。*如果没有 Unicode，它们由 8 位 char 类型组成。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T10:33:21.580

有几个重要的区别。

`char *`是指向 的指针`char`。通常你不能说它是单个字符还是字符串的开头，以及长度是多少。所有这些都由程序逻辑和一些约定（即标准 C 函数）决定，喜欢`const char *`用作输入。您需要手动管理为字符串分配的内存。

`CString`是一个宏。根据您的程序编译选项，可以将其定义为`CStringA`或`CStringW`类。有区别也有相似之处。

不同之处在于`CStringA`操作非Unicode数据（类似于`char*`），并且`CStringW`是Unicode字符串（类似于`wchar_t*`）。

然而，这两个类在字符串操作和存储管理方面是等价的。它们更接近标准 C++`std::string`和`std::wstring`类。

除此之外，两者都`CStringA`提供`CStringW`将字符串转换为 Unicode 格式和从 Unicode 格式转换的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T10:27:39.167

CString 是一系列 TCHAR-s 而不是 char*。主要区别在于，如果定义了 UNICODE，CString 将是 wchar 的序列。实际上取决于该宏 CString 将被 tpyedef -ed 到 CStringA 或 CStringW。另一个主要区别是 CString 是一个**类**，而 char* 只是一个指向字符的指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T10:29:11.827

根据 TCHAR 的类型，CString 可以是 CStringA 或 CStringW。

也就是说，`CString`它是一个字符数组的包装器，它使您能够轻松地将该字符数组视为字符串，并以与字符串类型相关的方式对其进行操作。

对于它们之间的关系，这里有一个很容易说明的东西。您可以像这样在 char * 和 CString 之间进行转换：

`CString str = "abc"; // const char[3] or char * to CString`

和

`const char * p = str.Get()`// CString 到 const char *

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-13T10:33:01.527

A`CString`是一个类，并提供了许多 a 没有的功能`char *`。A`char *`只是一个指向 char 或 chars 数组的指针。

CString 包含一个与 char * 大致相同的缓冲区：`LPTSTR GetBuffer( int nMinBufLength );`

`LPTSTR`对于和`char *`go [here](https://stackoverflow.com/questions/342772/convert-lptstr-to-char)和[here](http://social.msdn.microsoft.com/Forums/en-US/vclanguage/thread/1b994ff3-da28-46a8-90ef-6c7fab8dcd21/)之间的区别

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-13T10:41:40.380

CString 是一个包含不同功能的类.. [MSDN](http://msdn.microsoft.com/en-us/library/aa300688%28v=vs.60%29.aspx)

char * 只是一个常规的 c++ 数据类型。

CString 主要用于 MFC 应用程序。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-13T10:27:32.740

CString 是一个围绕 char* 的包装类，用于提供一些有用的附加功能并对用户隐藏内存分配/释放。在性能方面没有太大区别，因此如果您使用 MFC 类，您不妨使用 CString。

# iphone - 将 View 1 设置为 UIscrollview 中的默认视图页面

> ID：15382606
> 
> 赞同：1
> 
> 时间：2013-03-13T10:24:26.720
> 
> 标签：iphone, ios, objective-c, uiscrollview, uipagecontrol

我`UIScrollview`在我的应用程序中使用和页面控件。我已经集成了 3 个视图，`view 0`以及`view1`在`view2`视图`UIScroll`中与`page control`. 一切运行良好。

当我运行应用程序时，我想要`View1`的应该是默认页面，但它显示`view0`为默认页面。

有没有人帮助如何获得`view1`默认页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:25:52.843

在 viewDidLoad 方法中将滚动视图内容偏移设置为 (320,0)。

```
 [scroll setContentOffset:CGPointMake(320, 0)]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T10:30:55.400

设置的内容偏移量`UIScrollView`。U 添加了所有 3 个`views`，`UIScrollView`但没有设置它的偏移量。

```
scr.contentOffset = CGPointMake(view.frame.size.width, 0); 
```

# javascript - 标点加载“动画”，javascript？

> ID：15382608
> 
> 赞同：12
> 
> 时间：2013-03-13T10:24:34.607
> 
> 标签：javascript, jquery

我正在寻找一种显示一些标点符号加载“动画”的好方法。

我想要的是这样的：

```
This will display at second 1: "Waiting for your input."
This will display at second 2: "Waiting for your input.."
This will display at second 3: "Waiting for your input..."
This will display at second 4: "Waiting for your input...."
This will display at second 5: "Waiting for your input."
This will display at second 6: "Waiting for your input.."
This will display at second 7: "Waiting for your input..."
This will display at second 8: "Waiting for your input...." 
```

等等。

我首先将点包围起来，`spans`并认为我可以用 jquery 循环它们并显示一个、一个、一个，然后重置为 1。但是代码变得非常笨拙，所以我想知道你会如何做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-06-22T09:07:14.397

# 纯 CSS 解决方案

演示：[jsfiddle.net/feklee/D59P9](http://jsfiddle.net/feklee/D59P9/)

*   HTML：

    ```
    Waiting<span class="dots"><span>.</span><span>.</span><span>.</span></span> for more. 
    ```

*   CSS：

    ```
    @keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
    @keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
    @keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
    @-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
    @-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
    @-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

    .dots span {
        animation: dots-1 1s infinite steps(1);
        -webkit-animation: dots-1 1s infinite steps(1);
    }

    .dots span:first-child + span {
        animation-name: dots-2;
        -webkit-animation-name: dots-2;
    }

    .dots span:first-child + span + span {
        animation-name: dots-3;
        -webkit-animation-name: dots-3;
    } 
    ```

# 仅 WebKit 的替代方案

优点：没有嵌套标签。这意味着省略号可以作为内容放入`::after`伪元素中。

演示：[jsfiddle.net/feklee/vFT7W](http://jsfiddle.net/feklee/vFT7W/)

*   HTML：

    ```
    Waiting<span>...</span> for more. 
    ```

*   CSS：

    ```
    body {
        font-family: 'Roboto', sans-serif;
        font-size: 50px;
    }

    @-webkit-keyframes dots {
        0% { background-position: 0px; }
        100% { background-position: 50px; }
    }

    span {
        background: linear-gradient(to right, white 50%, black 50%);
        color: transparent;
        -webkit-background-clip: text;
        -webkit-animation: dots 1s infinite steps(4);
        padding-right: 40px;
        margin-right: -40px;
    } 
    ```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-13T10:30:08.907

制作一串点的技巧是制作一个稀疏数组，然后将所有元素与所需的字符连接起来。

```
var count = 0;
setInterval(function(){
    count++;
    var dots = new Array(count % 10).join('.');
    document.getElementById('loadingtext').innerHTML = "Waiting for your input." + dots;
  }, 1000); 
```

这是一个[现场演示](http://jsfiddle.net/Ty4gt/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-11T17:07:25.923

这很容易：

**HTML**

```
<span class="dots"></span> 
```

**jQuery**

```
setInterval(function() {
    var th = $('.dots');
    if(th.text().length < 5){
        th.text(th.text()+".");
    }else{
        th.text("");
    }
}, 500); 
```

[演示](https://jsfiddle.net/chalist/65Lyup35/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T10:35:04.067

现在确定代码是如何失控的，你可以这样做：

```
setInterval(function () {
  var span = $("#text-loader").children("span:eq(0)");
  var ellipsis = span.html();
  ellipsis = ellipsis + ".";
  if (ellipsis.length > 5) {
    ellipsis = ".";
  }
  span.html(ellipsis);
}, 1000);

<div id="text-loader">
  This will display at second 1: "Waiting for your input<span>.</span>
</div> 
```

至于`1`，您可以将其与句点数交换。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T10:37:11.147

试试这个功能：我在这里放了一个例子[http://jsfiddle.net/XFd39/](http://jsfiddle.net/XFd39/)

```
var i=0;   
function f() {
if(i<=4)
 $('#a').append(".");
i++;
if(i==4){
    $('#a').html("");
    i=0;
}
setTimeout(f,500);
}
f(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T10:39:24.307

这是一个非常简单的变体：http: [//jsfiddle.net/psyketom/FusdC/](http://jsfiddle.net/psycketom/FusdC/)

阅读下面的评论以了解那里的一切。

```
var span = $('.dots'); // take the element where you have the maximum count of dots
var text = span.text(); // cahce it's text value

// we set up a function here, so we can loop it all the time
var loading = function()
{
    $({
        count : 1 // we start at one dot
    }).animate({
        count : text.length // together forming all of it
    }, {
        duration : 1000, // make the animation complete in one second
        step : function() {
            span.text( text.substring(0, Math.round(this.count)) ); // on each step, change the text accordingly to current iteration
        },
        complete : function() {
            loading(); // once complete, start all over again
        }
    });
};

loading(); // start it up for the first time 
```

在这里，如果您愿意，您还可以获得使用 jQuery 的优势`easing`，轻松更改总持续时间和许多其他好处，以防您熟悉 jQuery。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-13T11:39:58.507

伙计，除非你想*永远*显示这个动画，否则你需要一种方法来停止动画，或者？

甚至不要考虑全局变量，这是**JavaScript**，它有闭包:)

```
<p>please wait<span id="wait"></span></p>

<input type="submit" id="start" value="start">
<input type="submit" id="stop" value="stop">

<script type="text/javascript">
    $(document).ready(function() {

        var animator = function($el) {
            var dotCount = 1;
            var started = true;
            return {
                "start" : function step() {
                    dotCount = (dotCount + 1) % 10;
                    $el.text(new Array(dotCount).join('.'));
                    if (started) {
                        setTimeout(step, 100);
                    }
                },
                "stop" : function() {
                    started = false;
                }
            }
        };

        var animatedWait = animator($("#wait"));

        $("#start").click(animatedWait.start);
        $("#stop").click(animatedWait.stop);
    });
</script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-12T20:15:50.553

这是一个修改后的版本，它会在一段时间后关闭这些点。

```
var count = 0;
var dots = setInterval(function(){
  count++;
  document.getElementById('loadingtext').innerHTML = "Waiting for your input." + new Array(count % 5).join('.');

  if (count == 10){ // show two iterations of the array.
    clearInterval(dots); // stop the dots.
  }
}, 100); // sets the speed 
```

[http://jsfiddle.net/Ty4gt/331/](http://jsfiddle.net/Ty4gt/331/)

# objective-c - AXUIElementRef 和 A RC - 解除分配的实例和 __bridge 与 __bridge_transfer

> ID：15382609
> 
> 赞同：1
> 
> 时间：2013-03-13T10:24:41.533
> 
> 标签：objective-c, cocoa, nsmutablearray, dealloc, memory-management

我在 NSMutableArray 上收到此错误：

```
 -[Not A Type release]: message sent to deallocated instance 0x1006e29c0 
```

它发生在这一行：

```
 [_array removeAllObjects]; 
```

现在，我明白错误的含义，但不明白为什么会在这种情况下发生。

我在上面的行之前添加了一个 NSLog，如下所示：

```
 NSLog(@"%@", [_array class]); 
```

这可以正常执行并具有正确的行为，这是日志：

```
 2013-03-13 11:19:27.366 App[66921:303] __NSArrayM
 2013-03-13 11:19:27.367 App[66921:303] *** -[Not A Type release]: message sent to deallocated instance 0x1006e29c0 
```

所以在删除它之前似乎没有被释放..

即使我删除了 removeAllObjects 调用并将其替换为下面的行，我仍然会收到相同的错误。

```
 _array = [[NSMutableArray alloc] init]; 
```

我在代码的其他地方所做的只是调用 [_array addObject:...]

_array 是一个强大的属性：

```
@property (strong) NSMutableArray *array; 
```

数组首先在 init 方法中初始化。

**编辑**：我将 AXUIElementRefs 添加到此数组中，如下所示：

```
 [_array addObject:(__bridge_transfer id)elementRef]; 
```

我认为 __bridge_transfer 将其带到了 ARC，而我不需要管理任何这些？

可能是什么问题呢？

**更新：这是一个示例项目：[http ://users.telenet.be/prullen/AXMemory.zip](http://users.telenet.be/prullen/AXMemory.zip)**

这是一个工作项目，因为我使用的是 __bridge 而不是 __bridge_transfer。

这个项目包含一个简单的循环，一遍又一遍地做同样的事情。这是为了证明仅使用 __bridge，AXUIElementRefs 永远不会被释放。他们留在记忆中。这也是我在 Instruments profiler 中看到的。您还可以通过活动监视器看到内存使用量每隔几秒增加一次。

AXUIElementRefs 是通过 AXUIElementCopyMultipleAttributeValues 获得的 - 所以我会假设我拥有它们的所有权？然而，更改为 __bridge_transfer 会导致上述错误。

如果有人可以看看这个并让我知道我做错了什么，那将不胜感激。

我通过以下语句获得了一组属性：（第 60 行）。

```
 AXUIElementCopyMultipleAttributeValues(frontWindowRef, attributes,0,&attributeValues); 
```

第 110 行我分配了 AXUIElement（循环遍历 children 数组）：

```
 element = CFArrayGetValueAtIndex(childrenArrayRef, i); 
```

第 112 行是我将 AXUIElementRef 添加到数组的位置：

```
 [_array addObject:(__bridge id)(element)]; 
```

如果超过 500 个元素，我将第 36 行清空：

```
if ([_array count] > 500) {
    [_array removeAllObjects];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:02:40.340

您不能只是假设`__bridge_transfer`“将其带到 ARC 并且 [您] 不需要管理任何这些”。您必须了解您当时拥有的权利和责任`elementRef`（我们无法从您所写的内容中看出）。

`CFBridgingRetain()`我发现如果你使用相应的和`CFBridgingRelease()`函数 ，更容易理解桥式转换。`__bridge_transfer`是一样的`CFBridgingRelease()`。所以，问题是：你`elementRef`当时拥有吗？你发布它合适吗？

考虑一下，以下是否正确？

```
[_array addObject:(__bridge id)elementRef];
CFRelease(elementRef); 
```

如果不是，那么也不是`__bridge_transfer`。

从您收到的错误的性质来看，我强烈怀疑您无权发布`elementRef`，因此您无权告诉 ARC 它拥有它并且必须发布它。你已经导致`AXUIElementRef`过度释放。您应该只使用`__bridge`演员表——没有“转移”，也没有`CF…Release()`.

# php - GET 变量中的文件名会中断 PHP 会话

> ID：15382610
> 
> 赞同：1
> 
> 时间：2013-03-13T10:24:46.247
> 
> 标签：php, .htaccess, mod-rewrite, redirect

我有一个 MVC 框架。每个请求都应该由 index.php 文件处理。它工作正常，除了以 jpg、gif、png 等通用扩展名结尾的请求。在这种情况下，我的 PHP 会话消失了

我的 htaccess 文件如下：

```
php_flag display_errors on

RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ /projecten/xxxxxxxx/index.php?route=$1 [L,QSA]

ErrorDocument 403 /errors/403.html
ErrorDocument 404 /errors/404.html 
```

谁有我的解决方案？

**编辑：**我的问题在服务器上，在我的本地机器上一切正常，但在在线服务器上出现问题。

# asp.net - 树视图的 selectednodechanged 事件不会触发

> ID：15382612
> 
> 赞同：1
> 
> 时间：2013-03-13T10:24:46.843
> 
> 标签：asp.net, events, treeview

我有一个项目，我有几页。在我的母版页上，我有一个用于导航的树视图。树视图链接到站点地图文件。

节点是这样构建的：

--Node(不可见)
-----NavPoint1
-----NavPoint2
-----NavPoint3

所以基本上我已经使第一个节点不可见，所以只有它的叶节点是可见的。现在我有不同的用户角色：管理员、用户、访客等。对于其中一个菜单项，只有当管理员访问它时，视图才会有所不同。为此，我想为树节点实现一个 selectednodechanged 事件。但是它似乎没有开火，我不知道我做错了什么。

这是我对母版页中站点的树节点的标记：

```
<asp:TreeView ID="TreeView1" runat="server" DataSourceID="SiteMapDataSource1" NodeIndent="10" ImageSet="Simple"x OnSelectedNodeChanged="TreeView1_SelectedNodeChanged">
                        <HoverNodeStyle Font-Underline="False" Font-Bold="true" />
                        <NodeStyle Font-Names="Verdana" Font-Size="8pt" ForeColor="Black" HorizontalPadding="0px" NodeSpacing="0px" VerticalPadding="0px" />
                        <ParentNodeStyle Font-Bold="False" />
                        <SelectedNodeStyle Font-Bold="true" HorizontalPadding="0px" VerticalPadding="0px" />
                    </asp:TreeView> 
```

这是我的站点地图文件：

```
<siteMapNode url="" title=""  description="">
        <siteMapNode url="Default.aspx" title="Home" description="" />
        <siteMapNode url="PersoenlicherKalender.aspx" title="Persönlicher Kalender" />
        <siteMapNode url="Gruppenkalender.aspx" title="Gruppenkalender"/>
        <siteMapNode url="DatenAendern.aspx" title="Daten ändern"/>
    </siteMapNode> 
```

这是我处理事件的方法：

```
protected void TreeView1_SelectedNodeChanged(object sender, EventArgs e)
        {
            if (TreeView1.SelectedNode == TreeView1.Nodes[3])
            {
                if (Session["Benutzerart"] == Enums.BenutzerTypen.Benutzer.Administrator.ToString())
                { lblUser.Text = "Erfolg!"; }
            }
        } 
```

我也愿意使用另一个控件，这似乎比它应该的要难一点......

# jquery - 使用 jQuery 从 iFrame 中的元素获取值

> ID：15382617
> 
> 赞同：2
> 
> 时间：2013-03-13T10:24:55.030
> 
> 标签：jquery, asp.net, iframe

我搜索了互联网，并找到了很多与我想做的事情相关的答案，例如：
[Javascript - Get element from within an iFrame](https://stackoverflow.com/questions/1088544/javascript-get-element-from-within-an-iframe)
[如何使用 Javascript 访问 iframe 元素？](https://stackoverflow.com/questions/1452871/how-can-i-access-iframe-elements-with-javascript)
[在 JavaScript 中访问 iframe 元素](https://stackoverflow.com/questions/1451208/access-iframe-elements-in-javascript)

没有适当的结果。

我目前在 iFrame 中有一个测试框。从父级，我需要获取 textbox 的值`onBlur()`。

我目前正在使用；

```
alert("before");
var iframe = document.getElementById('GeneralInformationPrivate.aspx');
var innerDoc = iframe.contentDocument || iframe.contentWindow.document;

//innerDoc.getElementById("imageLoc").hide();

alert("after"); 
```

注释了该行后，我看到了两个警报。如果没有注释，它就不会那么远。
（我把它隐藏起来只是为了测试——这不起作用）。

谁能指出我正确的方向。

**编辑** 加载的 iFrame HTML 如下所示：

```
<iframe id="GeneralInformationPrivate.aspx" class="iframetab" src="GeneralInformationPrivate.aspx"><!-- Controls Here --></iframe> 
```

**编辑 2** iFrame 是这样加载的。（在父母中）

```
<div style="float: right; width: 570px;">
            <div id="tabs">
                <ul style="">
                    <li><a class="tabref" href="#tabs-1" rel="GeneralInformationPrivate.aspx">General</a></li>
                    <li><a class="tabref" href="#tabs-2" rel="www.google.co.za">Friends</a></li>
                    <li><a class="tabref" href="#tabs-3" rel="">Challenges</a></li>
                </ul>
                <div id="tabs-1">
                </div>

                <div id="tabs-2">
                </div>

                <div id="tabs-3">
                </div>
            </div>
        </div> 
```

在文档加载（仍在父级中）

```
// ++ IFRAME TABS
            var $tabs = $('#tabs').tabs(); //Set the tab

            //Loads the initial tab
            function getSelectedTabIndex() {
                return $tabs.tabs('option', 'selected');
            }
            beginTab = $("#tabs ul li:eq(" + getSelectedTabIndex() + ")").find("a");

            //Send the correct data to load
            loadTabFrame($(beginTab).attr("href"), $(beginTab).attr("rel"));

            // Does something everytime you click the tab
            $("a.tabref").click(function () {
                //event code
            });

            //Load the actual iFrame
            function loadTabFrame(tab, url) {
                if ($(tab).find("iframe").length == 0) {
                    var html = [];
                    html.push('<div class="tabIframeWrapper">');
                    html.push('<iframe id="'+ url +'" class="iframetab" src="' + url + '">Load Failed?</iframe>');
                    html.push('</div>');
                    $(tab).append(html.join(""));
                    //$(tab).find("iframe").height($(window).height() - 80); // Set the height of the iFrame (Currently using CSS - See controlStyle.css iFrame)
                }
                return false;
            }

            //Make sure its only loaded on click
            $("a.tabref").click(function () {
                loadTabFrame($(this).attr("href"), $(this).attr("rel"));
            });
            // -- IFRAME TABS 
```

它将页面加载到 iFrame 中。

**编辑**iFrame 的 3 个内容（对不起）

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="GeneralInformationPrivate.cs" Inherits="member.Default2" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>General Information</title>
</head>
<body style="background: white">
    <form id="form1" runat="server">
        <div style="min-height: 100px; width: 100%; padding: 0px" id="divProInfo">
                <table style="width: 100%">
                    <tr>
                        <td>
                            <div class="divRegInput" style="padding: 5px 0px 10px 15px">
                                <asp:Label ID="Label12" runat="server" Text="Image URL" Font-Bold="True"></asp:Label>
                                <asp:Label ID="Label13" runat="server" Text="make yourself look good" CssClass="styleLabelWatermarkWashout"></asp:Label>
                                <br />
                                <input id="imageLoc" class="styleTextBoxCenter Larger" />
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="divRegInput" style="padding: 5px 0px 10px 15px">
                                <asp:Label ID="Label6" runat="server" Text="Website URL" Font-Bold="True"></asp:Label>
                                <asp:Label ID="Label7" runat="server" Text="show others where you came from" CssClass="styleLabelWatermarkWashout"></asp:Label>
                                <br />
                                <asp:TextBox ID="TextBox1" runat="server" CssClass="styleTextBoxCenter Larger" />
                                <asp:Label ID="lblWebsiteTitle" runat="server" CssClass="styleLabelWatermark"></asp:Label>

                            </div>
                        </td>
                    </tr>
                    <%--<tr>
                        <td>
                            <asp:Button ID="Button1" runat="server" Text="Button" CssClass="styleButtonGreenHolder" Height="43px" CausesValidation="False" OnClick="btnChangeChallenge_Click" Width="195px" />
                        </td>
                    </tr>--%>
                </table>
            </div>
        </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:31:59.897

线

```
innerDoc.getElementById("imageLoc").hide(); 
```

...失败是因为 DOM 元素没有调用`hide`它们的函数。那是 jQuery 的事情。

您可以将元素包装在 jQuery 实例中：

```
$(innerDoc.getElementById("imageLoc")).hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:34:06.770

我终于偶然发现了解决方案。

`$(window).load(function () {/*code*/})`在我的所有页面代码之后， 我不得不将代码放入：

只有这样它才起作用。

# php - 数组到字符串 php

> ID：15382618
> 
> 赞同：1
> 
> 时间：2013-03-13T10:24:59.007
> 
> 标签：php, arrays

嗨，每个人我都有一个数组有这个问题，我是这样开始的......

```
$name =  array($_POST['names']);
$nameId = array();
$query = mysql_query("SELECT id FROM types WHERE find_in_set (name, '$name')");
while($row = mysql_fetch_assoc($query)){
        $nameId[] = array('ids' => $row['id'] );

    } 
```

这给了我这样的数组..

$名称：

```
array('0'=>'name1,name2,name3') 
```

$名称：

```
array('0'=>array('ids'=>'61'), '1'=>array('ids'=>'6'), '2'=>array('ids'=>'1')) 
```

我怎样才能把它变成这样的字符串/形式..

```
array('0'=>'61,6,1') 
```

这个想法是将ID保存到数据库中。

或者从表单中获取名称的更好更有效的方法是将它们与数据库进行比较并取回 id 以将它们保存到数据库中？

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:27:22.713

将您的作业更改为：

```
$nameId[] = $row['id']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T10:29:32.693

```
$name =  array(name1,name2,name3);
$nameId = array();
$query = mysql_query("SELECT id FROM types WHERE find_in_set (name, '$name')");
while($row = mysql_fetch_assoc($query)){
//below line changed
    $nameId[] =  $row['id'] ;

}
 $string = implode(',',$nameId); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:29:39.947

试试这个 ：

```
$array  = array(0=>array(0=>'61'),1=>array(0=>'6'),2=>array(0=>'1'));
$result = implode(",",call_user_func_array('array_merge', $array)); 
```

请注意：这里都是数字键，所以将您的代码更改为：

`$nameId[] = array($row['id'] );``'ids'`,从这里删除密钥

输出 ：

```
61,6,1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T10:30:38.353

那就是我所想的

```
$nameId[] = $row['id'];
$stringId = implode(',',$name); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T10:31:13.757

使用以下函数将遍历数组并找到 ids 键并将其合并到其他数组中，然后当您调用此函数时它将加载它。

```
function CustomFindJoinArray( $needly, $array )
{
    $results = array();
    foreach ( $array as $key => $value )
    {
        if ( is_array( $value ) )
        {
            $results = array_merge($results, foo( $needly, $value ));
        }
        else if ( $key == $needly )
        {
            $results[] = $value;
        }
    }
    return $results;
}
echo implode( ",", CustomFindJoinArray( "ids", $your_array ) ); 
```

`$your_array`会在哪里`array('0'=>array('ids'=>'61'), '1'=>array('ids'=>'6'), '2'=>array('ids'=>'1'))`

**或者更简单**

```
foreach ($your_array as $key => $ids) {
    $newArray[] = $array[$key]["ids"];
}

$string = implode(',', $newArray); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T10:33:57.143

```
$ids = array();
foreach($nameId as $curr) {
  $ids[] = $curr['ids'];
}
$str = "(".implode(",",$ids).")"; 
```

# android - EditText：当 EditText 有时有焦点时，无法输入内容

> ID：15382621
> 
> 赞同：6
> 
> 时间：2013-03-13T10:25:08.027
> 
> 标签：android, android-edittext

`EditText`有时，即使`EditText`有焦点，我也无法在 中输入任何内容。

但是，我可以通过输入内容`adb shell input keyevent 34`，然后字符'f'将显示在`EditText`。

我不知道为什么`EditText`不能输入文本，即使它有焦点。

我可以在几个安卓设备上重现这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T18:58:34.973

没有看到任何代码很难说。您是否在活动中使用 OnKeyPress 侦听器？您可能会抓住按键并将它们扔掉。

# php - Ck 编辑器在将其放入 innerHTML 以用 Ckeditor 文本区域替换 div 后无法工作

> ID：15382622
> 
> 赞同：0
> 
> 时间：2013-03-13T10:25:10.213
> 
> 标签：php, javascript, ajax, ckeditor

今天我被分配了一个工作，我有一个输入文本，如果有人点击它，那么它将用一个启用了 ckeditor 的 textaread 替换它。我已经使用 textarea 启用了 ckeditor，但是当我尝试用启用 ckeditor 的 textarea 替换 div 时，它只是向我展示了一个没有启用 ckeditor 的简单 textarea。下面是它的编码：-

```
<script type="text/javascript">
function myJDFunction1()
{
document.getElementById("Hide1").innerHTML='<textarea class="ckeditor" id="typingarea2" name="typingarea2"></textarea>';
}

</script>

<div id="Hide1">
    <textarea name="Answer1" onclick="myJDFunction1()"></textarea>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:20:42.620

你必须打电话

```
CKEDITOR.replace( 'typingarea2' ); 
```

因为只有在加载页面时才会（按类）自动创建编辑器实例。

还有一个更好的方法是：

```
function myJDFunction1() {
    CKEDITOR.appendTo( 'Hide1' );
}

<div id="Hide1" onclick="myJDFunction1()">&nbsp;</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:21:21.217

```
<a href="#" id="Hide1" onclick='document.getElementById("Hide1").innerHTML=
"<textarea class=ckeditor id=typingarea2 name=typingarea2></textarea>"'>text editor</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T11:32:43.230

尝试使用 jquery plugin adater 调用 CKEDITOR [Jquery Plugin for CKEDITOR](http://ckeditor.com/blog/CKEditor-for-jQuery)

1.  导入 jquery javascript 文件。
2.  导入 jquery ckeditor 适配器“/ckeditor/adapters/jquery.js”。
3.  将您的 CKEDITOR 绑定到 DOM 元素。

    ```
     $('#Hide1').ckeditor(); 
    ```

# php - 页面未正确重定向 3

> ID：15382624
> 
> 赞同：0
> 
> 时间：2013-03-13T10:25:22.700
> 
> 标签：php, login

我有以下代码可以将用户重定向到他们的正确页面。但是，我在浏览器中收到错误消息：

错误：

> 页面未正确重定向

编码：

```
<?php
/**
 * User has already logged in, so display relevant links, including
 * a link to the admin center if the user is an administrator.
 */

    if (($session->logged_in) && ($session->isAgent())) {

        header("Location: gallery_Agent.php");

} elseif (($session->logged_in) && ($session->isMaster())) {

        header("Location: gallery_Master.php");

} elseif (($session->logged_in) && ($session->isAdmin())) {     

        header("Location: gallery_Admin.php");

} 

else {  ... 
```

我该如何解决这个问题？

约瑟夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:33:44.763

此错误通常表示无限重定向循环。始终`exit()`在设置`Location`标题后使用，并确保您没有在要重定向到的页面中包含此重定向逻辑。

# ios - 绘制两种不同颜色的 mapview pin

> ID：15382628
> 
> 赞同：1
> 
> 时间：2013-03-13T10:25:33.877
> 
> 标签：ios, objective-c, mkmapview

我正在尝试显示带有坐标数组的地图视图。所以，我从那些包含的数组中加载纬度和经度。它完美地显示出来。现在，我想用不同的颜色针显示一个特定的纬度和经度。我已经提到[了这个答案](https://stackoverflow.com/a/10900277)，我看不出有什么不同。

视图控制器.m

* * *

```
-(void)showMap:
{
...
...
DataProvider *d = [DataProvider getInstance];
NSInteger numb = sender.view.tag;
d.colorlatitude = [[arraxy objectAtIndex:numb] objectForKey:@"lat"];
d.colorlongitude = [[arraxy objectAtIndex:numb] objectForKey:@"lng"];
[d._address removeAllObjects];
[arraxy removeObjectAtIndex:sender.view.tag];
d._address = arraxy;

MapViewController *map = [[MapViewController alloc]initWithNibName:@"MapViewController" bundle:nil];
[self.navigationController pushViewController:map animated:YES];

} 
```

MapViewController.m

* * *

```
-(void)viewWillAppear:(BOOL)animated
{
DataProvider *d = [DataProvider getInstance];
[_mapView removeAnnotations:_mapView.annotations];

RegisterViewController *appDelegate = [[RegisterViewController alloc]init];

[_mapView setShowsUserLocation:YES];
[_mapView setRegion:MKCoordinateRegionMakeWithDistance([appDelegate.locationManager location].coordinate, 1000, 1000)];
[_mapView setUserTrackingMode:MKUserTrackingModeNone];

MKCoordinateRegion rregion = {{0.0,0.0},{0.0,0.0}};
rregion.center.latitude = [d.colorlatitude floatValue];
rregion.center.longitude = [d.colorlongitude floatValue];
rregion.span.latitudeDelta=0.001f;
rregion.span.longitudeDelta=0.001f;
[_mapView setRegion:rregion];

MapviewAnnotations *add = [[MapviewAnnotations alloc]init];
add.coordinate = rregion.center;
[_mapView addAnnotation:add];

if (d._address)
{
    for (int i=0; i<[d._address count]; i++)
    {
        NSDictionary *dic=[d._address objectAtIndex:i];
        MKCoordinateRegion region={{0.0,0.0},{0.0,0.0}};
        region.center.latitude=[[dic objectForKey:@"lat"]floatValue];
        region.center.longitude=[[dic objectForKey:@"lng"]floatValue];
        region.span.latitudeDelta=0.001f;
        region.span.longitudeDelta=0.001f;
        [_mapView setRegion:region];

        MapviewAnnotations *ann=[[MapviewAnnotations alloc]init];
        ann.coordinate=region.center;
        [_mapView addAnnotation:ann];
    }
}
[super viewWillAppear:YES];
} 
```

而我`MKMapView`的委托方法是

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id  <MKAnnotation>)annotation
{
if (![annotation isKindOfClass:[MapviewAnnotations class]])
{
    return nil;
}

static NSString *reuseId = @"currentloc";

MKPinAnnotationView *annView = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:reuseId];
if (annView == nil)
{
    annView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:reuseId];
    annView.animatesDrop = NO;
    annView.canShowCallout = YES;
    annView.calloutOffset = CGPointMake(-5, 5);
}
else
{
    annView.annotation = annotation;
}

DataProvider *mvAnn = [DataProvider getInstance];
if (mvAnn.colorlatitude) // here i'm checking the condition.
{
    annView.pinColor = MKPinAnnotationColorGreen;
}
else
{
    annView.pinColor = MKPinAnnotationColorRed;
}

return annView;
} 
```

如果坐标在那里，我只是在写条件，我只需要将绿色引脚绘制到那个特定的坐标。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:03:49.743

您的代码与 Hinata 提到的代码之间的区别在于，其他代码中的 if 语句在`yesno`它当前绘制的注释上使用了一个值 ( ) 来决定使用什么颜色。您正在从中获取一个值，`DataProvider`但没有告诉它您正在绘制哪个注释，因此它为您提供的实例正是该`instance`方法在地图请求引脚时返回的感觉。你需要告诉它你在画什么，让它决定放什么`colorlatitude`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T07:30:22.270

我已经通过下面的一些标志来做到这一点`- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation`

```
MapviewAnnotations *mvAnn = (MapviewAnnotations *)annotation;
if (mvAnn.flag == 1)
{
    annView.pinColor = MKPinAnnotationColorGreen;
}
else if (mvAnn.flag == 10)
{
    annView.pinColor = MKPinAnnotationColorPurple;
}
else
{
    annView.pinColor = MKPinAnnotationColorRed;
} 
```

在我的 viewWillAppear 中，我收到了坐标`DataProvider`并分配了单独`MapviewAnnotations`的标志，并简单地用三种类型的引脚区分它。

干杯!

# python - ElasticSearch在python中请求范围时间戳

> ID：15382629
> 
> 赞同：3
> 
> 时间：2013-03-13T10:25:38.337
> 
> 标签：python, timestamp, elasticsearch

我正在尝试在我的 ES 上执行请求，以计算时间戳范围内的日志。我的请求有效，但她总是返回相同的结果。时间戳过滤器似乎不起作用。我会在自定义时间戳范围内通过 status_code 为我的 servertest01 检索一个方面。

```
import rawes
from datetime import datetime
from dateutil import tz
paristimezone = tz.gettz('Europe/Paris')

es = rawes.Elastic('127.0.0.1:9200')

result = es.get('/_search', data={
    "query" : { "match_all" : {}
              },
    "filter": {
        "range": {
           "@timestamp": {
              "from": datetime(2013, 3, 11, 8, 0, 30,   tzinfo=paristimezone),
               "to": datetime(2013, 3, 12, 11, 0, 30, tzinfo=paristimezone)}
                  }
           },
   "facets" : {
       "error" : {
        "terms" : {
            "field" : "status_code"
        },
         "facet_filter" : {
            "term" : {"server" : "testserver01"}
           }
        }
    }
})

print(result['facets']) 
```

而在我的 ES 数据中，时间戳字段是这样的：

```
"@timestamp":"2013-03-12T00:02:29+01:00" 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T10:11:00.723

搜索 API 中的`filter`元素用于在计算分面后过滤查询结果。

如果要将过滤器同时应用于查询和构面，则应改用`filtered`查询：

```
result = es.get('/_search', data={
    "query": {
        "filtered": {
            "query" : { "match_all" : {}},
            "filter": {
                "range": {
                   "@timestamp": {
                      "from": datetime(2013, 3, 11, 8, 0, 30,   tzinfo=paristimezone),
                       "to": datetime(2013, 3, 12, 11, 0, 30, tzinfo=paristimezone)
                    }
                }
            }
        }
    },           
   "facets" : {
       "error" : {
        "terms" : {
            "field" : "status_code"
        },
         "facet_filter" : {
            "term" : {"server" : "testserver01"}
           }
        }
    }
}) 
```

# c# - C# Windows 应用商店网格应用 (xaml) 模板

> ID：15382630
> 
> 赞同：2
> 
> 时间：2013-03-13T10:25:38.603
> 
> 标签：c#, windows-8, rss, sample-data

我正在使用我编辑的 Windows Store Grid App (xaml) 模板创建一个 C# Windows 8 Store 应用程序。我的第一个页面是 GroupedItemsPage 模板，是 Drinks 页面。在这里，我在 SimpleDataSource.cs 文件中编辑了 SimpleDataSource 方法，以添加我自己的图像和标题（Booze、Soda、...）。这些是标准项目，所以我在那里做了。

![中心页面](../Images/6a3a0e84fa00a32649252898396f8f2b.png)

当点击 Booze 时，用户会转到 Booze Page，它也是一个 GroupedItemsPage 模板。这 8 个项目（啤酒、葡萄酒、鸡尾酒……）也是标准的，所以我在 SimpleDataSource.cs 文件中创建了第二种方法来显示正确的标题和图像。这里出错了。当点击“Booze”时，我得到一个“System.ArgumentException”。我创建了另一个公共密封类 SampleDataSourceSecond，就像模板中的一样。我还编辑了该页面的 LoadState 方法。

```
 protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
    {
        // TODO: Assign a collection of bindable groups to this.DefaultViewModel["Groups"]
        var sampleDataGroupsSecond = SampleDataSourceSecond.GetGroupsSecond((String)navigationParameter);
        this.DefaultViewModel["GroupsSecond"] = sampleDataGroupsSecond;
    } 
```

当我在 Visual Studio 中查看 xaml 页面时，它显示正确，但在运行时出现错误。

![饮品页面](../Images/3b492b8882185832baa085187edbe6b3.png)

单击“啤酒”时，它会转到另一个页面，即 GroupDetailPage 模板。项目“Jupiler”、“Stella”应该来自一个 RSS 提要，我可以在其中获得标题、描述、图像。这是第二个问题：因为这些不是标准的，所以我无法在 SampleDataSource.cs 文件中更改它。我应该在哪里做这个？

![啤酒页面](../Images/3190fc8f04ea714b66f16970a24ec398.png)

所以： 1\. 我这样做对吗？2\. 如何解决这个 Systemt.ArgumentException？3\. 我应该将代码放在哪里，以便我可以从 RSS 提要中填充 GroupDetailPage。

提前致谢！

编辑：第二页中的项目可以更改。当点击 Booze 时，它​​应显示在第二页：啤酒、葡萄酒、鸡尾酒、威士忌……点击苏打水时：Coca-cola、Icetea、Spriten ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:31:14.907

一般来说，开箱即用的模板作为一种***模式***很好，但很少作为您的实现。

1.  我假设您在以下方法的第一行代码中遇到异常？

    ```
    public static IEnumerable<SampleDataGroupSecond> GetGroups(string uniqueId)
    {
        if (!uniqueId.Equals("AllGroups")) throw new ArgumentException("Only 'AllGroups' is supported as a collection of groups");

        return _sampleDataSource.AllGroups;
    } 
    ```

    您正在尝试将***示例***数据源塑造成不适合您的数据模型需求的东西。此数据源的实现明确表明它未设置为以您尝试使用它的方式使用。如果我理解正确，您实际上有分组吗？

2.  同样，基础数据源是一个***样本***，并且该***样本***包括数据模型中的三个主要字段`Image`：`Title`和`Subtitle`。通过 XAML 数据绑定，***示例***数据模板 ( `Standard250x250ItemTemplate`in `StandardStyles.xaml`) 正在处理一个非常具体和狭窄的案例。

我将首先列出您的数据模型实际上应该是什么样子 - 忘记示例模板中的内容。[Microsoft 的 App Builder](http://aka.ms/8in30)指南的第 7 天包含一个很好的部分，介绍[如何处理数据和文件](http://msdn.microsoft.com/en-US/library/windows/apps/xaml/br229562)，包括可能对您有所帮助的数据绑定。

当你掌握了这一点，你就会意识到你的问题是“我把代码放在哪里没有实际意义”。除了获取数据并将其分配给您的`DataContext`.

特别是对于 RSS，[博客阅读器教程](http://msdn.microsoft.com/en-us/library/windows/apps/br211380.aspx)也应该有所帮助，因为它专门访问和显示来自 RSS 提要的项目。

# php - 使用 PHP 和 Jquery 的扑克游戏 - 浏览器后退按钮行为

> ID：15382632
> 
> 赞同：0
> 
> 时间：2013-03-13T10:25:43.643
> 
> 标签：php, javascript, jquery, html, browser

出于练习的原因，我用一些 JQuery 动画用 PHP 编写了一个小德州扑克游戏。每个动作（下注、弃牌、过牌、加注、跟注）都通过 HTML 表单提交给 PHP 脚本。

现在不幸的是，用户可以在看到整个棋盘和计算机的牌并通过使用浏览器的后退按钮相应地调整他的下注结构后，才能够回到第一轮下注。

有什么实用的方法可以防止这种情况发生吗？

谢谢，咖啡屋

PS：

例如，一个按钮脚本是这样的：

```
if (isset($_POST['call']) AND $_SESSION['bettingcap'] == 1){
    $_SESSION['kapitalspieler'] -= $smallbet; // deduct money from player
    $_SESSION['pot'] += $smallbet; // add this to the pot
    $_SESSION['bettingcap'] = 0; // After call go to next street, so cap is 0
    $_SESSION['buttonmodus']=1; // I want to show only certain buttons
    $_SESSION['whichstreet']=$_SESSION['whichstreet']+1; // go to next street
    $_SESSION['animateagain']='yes'; // show JQuery Animation

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:07:37.197

您需要使请求无效。这意味着一个请求紧随其后。

为此，您可以在游戏中存储该用户的所有请求。

如果发送新请求，则只能在末尾添加。

您可以通过初始化游戏并从各方传递所有事件直到特定事件来在内存中创建游戏。

该模型确实允许您防止作弊以及像以前游戏的查看模式一样重新玩游戏。

*   00 创建游戏ID：#7575
*   01名选手入座：1名；编号：#12
*   02 玩家入座：2；编号：#56
*   03 玩家入座：3；编号：#87
*   04 牌组洗牌顺序：这里的牌顺序。
*   05 ...

因此，您保留这些事件，如果用户发送了新请求，您可以检查当前情况是否正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:35:15.310

也许这样的事情会奏效。

```
<SCRIPT type="text/javascript">
    window.history.forward();
    function noBack() { window.history.forward(); }
</SCRIPT>
</HEAD>
<BODY onload="noBack();"
    onpageshow="if (event.persisted) noBack();" onunload=""> 
```

从[链接](http://viralpatel.net/blogs/disable-back-button-browser-javascript/)

# django - 在 Django 中动态修改表单小部件

> ID：15382638
> 
> 赞同：6
> 
> 时间：2013-03-13T10:25:55.857
> 
> 标签：django, django-forms

我的 Django 应用程序使用 Django Suit 作为 Django 管理应用程序主题的工具。Suit 可以做的一件事是附加和前置元素以形成小部件，例如：

```
class PropertyForm(ModelForm):
    class Meta:
        model = Property
        widgets = {
            'amount': EnclosedInput(prepend = "GBP"),
        } 
```

效果是：

![在此处输入图像描述](../Images/9573c50e522cc0011a3e01933ced2cdb.png)

虽然这是一个不错的功能，但如果我可以像（在伪代码中）那样动态添加它会更有用：

```
'amount': EnclosedInput(prepend = my_model_instance.currency) 
```

我试图像这样覆盖表单的初始化：

```
class PropertyForm(ModelForm):

    def __init__(self, *args, **kwargs):
        inst = kwargs["instance"]
        self._meta.widgets["amount"] = EnclosedInput(prepend = inst.currency)
        super(PropertyForm, self).__init__(*args, **kwargs) 
```

**奇怪的是，只有当我在init**方法中放置断点时才有效。似乎涉及一些时间问题。

所以我的问题是实现这一点的最佳方式（如果有的话）是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T09:13:23.143

问题在于：

```
self._meta.widgets["amount"] = EnclosedInput(prepend = inst.currency) 
```

事实证明`_meta`正在被缓存。当我将上面的行更改为（这也是一个更好的解决方案，因为 _meta 可能是私有的）：

```
self.fields['amount'].widget = EnclosedInput(prepend = inst.currency) 
```

...它完美无缺

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:40:34.743

一种简单的方法是在每次需要时配置一个表单类：

```
def make_property_form(currency):
    class PropertyForm(forms.Form):
        # ...
        widgets = {
            'amount': EnclosedInput(prepend=currency),
        }
    return PropertyForm

def view_that_uses_my_form(request):
    # ...
    form_class = make_property_form(model.currency)
    form = form_class(the_usual_form_initialization) 
```

# google-maps - 谷歌地图如何默认缩小？

> ID：15382640
> 
> 赞同：2
> 
> 时间：2013-03-13T10:25:56.537
> 
> 标签：google-maps

我创建了一个新的谷歌地图并添加了一些标记，但是当我使用 iframe 将它包含在我的代码中时，它以缩放为 17 开始，我希望它最大缩小（z = 20）。我试图传递参数 z=20 但没有结果。有什么建议么？代码：

```
<iframe width="425" height="300" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps/ms?msa=0&amp;msid=204116165110023160774.0004d7aa572501051bc40&amp;ie=UTF8&amp;ll=37.020098,-95.625&amp;spn=116.710475,270.527344&amp;t=m&amp;output=embed"></iframe> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:29:19.340

您可以在创建地图时执行此操作：

```
var map = new google.maps.Map(map, {
        zoom: 20,
        center: latLng, 
        mapTypeId: google.maps.MapTypeId.ROADMAP
      }); 
```

# .htaccess - 使用 htaccess 链接到不同文件的子域

> ID：15382641
> 
> 赞同：1
> 
> 时间：2013-03-13T10:25:57.067
> 
> 标签：.htaccess

我正在尝试为不同的子域创建重定向到不同的文件，也许是将来的域。这是基于 ModX CMS。

我想保持 url 相同，只是为每个子域运行不同的文件，传递一些数据。对于 domain.com，它是 index.php，对于 sub1.domain.com - sub1.php。我还想传递一些数据，您可以在下面的示例中看到它：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^www\.domain\.com [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) /index.php?q=$1 [L,QSA]

RewriteCond %{HTTP_HOST} ^sub1\.domain\.com [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) /sub1.php?q=$1 [L,QSA]

RewriteCond %{HTTP_HOST} ^sub2\.domain\.com [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) /sub2.php?q=$1 [L,QSA]

RewriteCond %{HTTP_HOST} ^sub3\.domain\.com [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) /sub3.php?q=$1 [L,QSA]

RewriteCond %{HTTP_HOST} ^sub4\.domain\.com [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) /sub4.php?q=$1 [L,QSA]

RewriteCond %{HTTP_HOST} ^sub5\.domain\.com [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) /sub5.php?q=$1 [L,QSA]

RewriteCond %{HTTP_HOST} ^sub6\.domain\.com [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) /sub6.php?q=$1 [L,QSA]

# The Friendly URLs part
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

我试图`#`持续 3 行，但没有任何区别。我在 htaccess 中有更多行，但它们是`#`. 我在服务器的控制面板中创建的子域，所有子域都连接到同一个目录（`public_html`）。

现在我不确定传递数据是否有效，当我转到 sub1.domain.com 时，apache 将我重定向到 www.domain.com/sub1.php，这是错误的。

如何将子域链接到它们的 php 文件并保持 url 相同（sub1.domain.com）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:33:29.330

删除多余的东西并保持你的代码是这样的：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^www\.domain\.com [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) /index.php?q=$1 [L,QSA]

RewriteCond %{HTTP_HOST} ^sub1\.domain\.com [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) /sub1.php?q=$1 [L,QSA] 
```

# asp.net - 无法序列化会话状态

> ID：15382647
> 
> 赞同：1
> 
> 时间：2013-03-13T10:26:11.253
> 
> 标签：asp.net, sql-server, session, session-state, session-timeout

我厌倦了想知道这个问题的问题。已经为此阅读了很多博客和论坛，但我无法找出问题所在。

我正在使用“SQLServer”模式来存储会话。

一切正常。但是每当我在我的网站中使用搜索功能时，它都会引发以下错误：

“无法序列化会话状态。在 'StateServer' 和 'SQLServer' 模式下，ASP.NET 将序列化会话状态对象，因此不允许不可序列化的对象或 MarshalByRef 对象。如果类似的序列化，同样的限制适用由自定义会话状态存储在“自定义”模式下完成。”

我假设这是因为我在该页面上使用了分页代码。该代码如下：

```
 protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        string query = "select xxxxqueryxxxx";
        SqlDataAdapter da = new SqlDataAdapter(query, con);
        DataSet ds = new DataSet();
        try
        {
            using (con)
            {
                con.Open();
                da.Fill(ds);
            }
        }
        catch
        {
            ds = null;
        }
        finally
        {
            if (ds != null)
            {
                CustomPaging page = new CustomPaging();
                DataTable dt = ds.Tables[0];
                page.PageSize = 10;
                page.DataSource = dt;
                page.CurrentPageIndex = 0;
                no = 1;
                Session["DT"] = dt;
                Session["page"] = page;
                bindData(page, dt);

                //set these properties for multi columns in datalist
                DataList2.RepeatColumns = 1;
                DataList2.RepeatDirection = RepeatDirection.Horizontal;
            }
        }
    }
}
void bindData(CustomPaging page, DataTable dt)
{
    try
    {
        DataList2.DataSource = page.DoPaging;
        DataList2.DataBind();
        //DataList2.DataSource = SqlDataSource1;
        //DataList2.DataBind();
        lbtnPre.Enabled = !page.IsFirstPage; //Enable / Disable Navigation Button
       // lbtnPre.CssClass = "disabledbtn";
        lbtnNext.Enabled = !page.IsLastPage;
        //lbtnNext.CssClass = "disabledbtn";
        lblStatus.Text = NavigationIndicator(); //Build Navigation Indicator 
        //for creating page index
        DataTable dt1 = new DataTable();
        dt1.Columns.Add("PageIndex");
        dt1.Columns.Add("PageText");

        for (int i = 0; i < page.PageCount; i++)
        {
            DataRow dr = dt1.NewRow();
            dr[0] = i;
            dr[1] = i + 1;
            dt1.Rows.Add(dr);
        }
        dlPaging.DataSource = dt1;
        dlPaging.DataBind();
        dlPaging.RepeatColumns = 10;
        dlPaging.RepeatDirection = RepeatDirection.Horizontal;
    }
    catch (Exception)
    {
    }
    finally
    {
        page = null;
    }
}
string NavigationIndicator()
{
    string str = string.Empty;     //Page x Of Y
    str = Convert.ToString(((CustomPaging)Session["page"]).CurrentPageIndex + 1) + " of " + ((CustomPaging)Session["PAGE"]).PageCount.ToString() + " Page(s) found";
    return str;
}
protected void lbtnPre_Click(object sender, EventArgs e)
{
    int pageIndex = ((CustomPaging)Session["page"]).CurrentPageIndex;
    if (!((CustomPaging)Session["page"]).IsFirstPage)
        //Decrements the pageIndex by 1 (Move to Previous page)
        ((CustomPaging)Session["page"]).CurrentPageIndex -= 1;
    else
        ((CustomPaging)Session["page"]).CurrentPageIndex = pageIndex;

    //Binds the DataList with new pageIndex
    bindData(((CustomPaging)Session["page"]), ((DataTable)Session["DT"]));
}
protected void lbtnNext_Click(object sender, EventArgs e)
{
    int pageIndex = ((CustomPaging)Session["page"]).CurrentPageIndex;
    if (!((CustomPaging)Session["page"]).IsLastPage)
        //Increments the pageIndex by 1 (Move to Next page)
        ((CustomPaging)Session["page"]).CurrentPageIndex += 1;
    else
        ((CustomPaging)Session["page"]).CurrentPageIndex = pageIndex;

    //Binds the DataList with new pageIndex
    bindData(((CustomPaging)Session["page"]), ((DataTable)Session["DT"]));
}
protected void DataList2_SelectedIndexChanged(object sender, EventArgs e)
{
    Response.Redirect("Default2.aspx?partnumber=" + DataList2.DataKeyField[DataList2.SelectedIndex].ToString());
}
protected void dlPaging_ItemCommand(object source, DataListCommandEventArgs e)
{
    if (e.CommandName == "Select")
    {
        no = int.Parse(e.CommandArgument.ToString()) + 1;
        ((CustomPaging)Session["page"]).CurrentPageIndex = int.Parse(e.CommandArgument.ToString());
        //Binds the DataList with new pageIndex
        bindData(((CustomPaging)Session["page"]), ((DataTable)Session["DT"]));

    }
}
protected void dlPaging_ItemDataBound(object sender, DataListItemEventArgs e)
{
    LinkButton btn = (LinkButton)e.Item.FindControl("lnkbtnPaging");

    if (btn.Text == no.ToString())
    {
        btn.ForeColor = System.Drawing.Color.Maroon;
        btn.Font.Underline = false;
    }
    else
    {
        btn.ForeColor = System.Drawing.Color.DarkCyan;
        btn.Font.Underline = false;
    }
} 
```

我只想知道编码中的问题是什么以及“如何序列化会话”？我应该做些什么来改进编码？

任何帮助将不胜感激。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:45:40.203

我猜您的自定义分页控件不可序列化。这一定是问题的原因。

无论如何，将控件存储在会话中并不是一个好主意。只需存储几个可序列化的属性，这些属性可以重建控件（PageSize 和 CurrentPageIndex），或者将它们传递到查询字符串中。

如果可以的话，你也可以使用 ViewState

关于将 DataTable 存储在 Session 中，如果您有大量数据和许多连接的用户，这可能是一个非常糟糕的主意。

# c# - 代码合约由于潜在的副作用而导致错误

> ID：15382652
> 
> 赞同：3
> 
> 时间：2013-03-13T10:26:28.127
> 
> 标签：c#, code-contracts

我对代码合同相当陌生，所以我可能在这里做了一些愚蠢的事情:)

我收到错误

> 检测到的表达式语句评估了方法“##”的合同中的潜在副作用。（您的意思是将表达式放入 Requires、Ensures 或 Invariant 调用中吗？）

我有以下合同

```
Contract.Requires<ArgumentNullException>(obj != null);
Contract.Requires<ArgumentNullException>(obj.Id != null); 
```

它在第二份合同上失败`obj.Id != null`（`Id`是 a `Guid`）

现在有可能`Id`是`null`方法中不允许的。但是代码契约引发了上述编译错误。它自己的方法实际上并没有返回任何东西，因此也不需要确保。

我已经删除了合同，所以我可以编译并放置一个标准`if`检查。但这是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:27:35.633

您需要将 Id 属性本身标记为[[Pure]](http://msdn.microsoft.com/en-us/library/system.diagnostics.contracts.pureattribute.aspx)

这将告诉代码契约分析器它没有副作用。

代码契约不喜欢你调用有副作用的方法；根据您是否启用了代码合同检查，您的代码的行为会有所不同，这将是一件坏事。

例子：

```
public Guid Id
{
    [Pure]
    get
    {
        return _id;
    }
} 
```

`Id`还有一点：如果它是 Guid，怎么可能为null？Guid 是一个结构，因此它*不能*为空。它可能是一个可为空的 Guid (ie `Guid?`) 吗？

# java - 使用 A* 算法和曼哈顿启发式解决 8 个难题

> ID：15382653
> 
> 赞同：0
> 
> 时间：2013-03-13T10:26:29.467
> 
> 标签：java, algorithm

我已经编写了一个程序来使用 A* 算法和曼哈顿启发式解决 8 难题，但是对于所有输入，甚至对于正确的输出，状态数，程序似乎都无法正常工作（最小移动次数）扩展的比它通常应该的大得多。

我的程序有四个类：
Game State：表示游戏
AStar：AStar 算法
AStarList：表示打开和关闭列表的数据结构。（我知道我的数据结构在性能方面非常糟糕。我稍后会改进它
）

以下是部分代码：

（抱歉，代码量很大。我怀疑我的 AStar 算法有问题。所以，你可能不需要通过其他类。）

一个明星

```
public class AStar {

    public static void solve(GameState gameStateToSolve) {
        AStarList openList = new AStarList();
        AStarList closedlList = new AStarList();
        openList.add(gameStateToSolve);
        int iteration = 1;
        while (!openList.isEmpty()) {
            System.out.println((iteration++));
            GameState current = openList.getNext();
            if (current.isGoalState()) {
                current.print();
                return;
            }
            GameState children[] = current.expand();
            closedlList.addWithoutDuplication(current);
            for (int i = 0; i < children.length; i++) {
                boolean presentInOpenList = openList.isPresent(children[i]);
                boolean presentInClosedList = closedlList.isPresent(children[i]);
                if (!presentInOpenList && !presentInClosedList) {
                    openList.add(children[i]);
                } else if (presentInClosedList && !presentInOpenList) {
                    if (closedlList.getCostOf(children[i]) > children[i].getMovementsCount()) {
                        closedlList.remove(children[i]);
                        openList.add(children[i]);
                    }
                } else if (presentInOpenList && !presentInClosedList) {
                    if (openList.getCostOf(children[i]) > children[i].getMovementsCount()) {
                        openList.remove(children[i]);
                        openList.add(children[i]);
                    }
                }
            }
        }
    }

    public static void main(String[] args) {
        solve(new GameState(
                new int[]{0,7,3,1,8,6,5,4,2},
                new ArrayList<Integer>(),
                GameState.NUMBERS_ARRAY));
    }
} 
```

明星名单

```
public class AStarList {

    ArrayList<GameState> list;

    public AStarList() {
        list = new ArrayList<>();
    }

    public boolean isPresent(GameState gameState) {
        for (int i = 0; i < list.size(); i++) {
            if (list.get(i).equals(gameState)) {
                return true;
            }
        }
        return false;
    }

    public void remove(GameState gameState) {
        for (int i = 0; i < list.size(); i++) {
            if (list.get(i).equals(gameState)) {
                list.remove(i);
            }
        }
    }

    public void add(GameState gameState) {
        for (int i = 0; i < list.size(); i++) {
            if (list.get(i).manhattanDistance() > gameState.manhattanDistance()) {
                list.add(i, gameState);
                return;
            }
        }
        list.add(gameState);
    }

    public void addWithoutDuplication(GameState gameState) {
        for (int i = 0; i < list.size(); i++) {
            if (list.get(i).equals(gameState)) {
                list.remove(i);
                list.add(i, gameState);
            }
            if (list.get(i).manhattanDistance() > gameState.manhattanDistance()) {
                list.add(i, gameState);
                return;
            }
        }
        list.add(gameState);
    }

    public boolean isEmpty() {
        return list.isEmpty();
    }

    public GameState getNext() {
        return list.remove(0);
    }

    public int getHeuristicOf(GameState gameState) {
        for (int i = 0; i < list.size(); i++) {
            if (list.get(i).equals(gameState)) {
                return list.get(i).manhattanDistance();
            }
        }
        throw new RuntimeException();
    }

    public int getCostOf(GameState gameState) {
        for (int i = 0; i < list.size(); i++) {
            if (list.get(i).equals(gameState)) {
                return list.get(i).getMovementsCount();
            }
        }
        return -1;
    }
} 
```

游戏状态

```
public final class GameState1 {

    public GameState1(GameState gameState) {
       // creates a GameState exactly similar to the one passed
    }

    public GameState1(int[] array, ArrayList<Integer> movements, int type) {
     //...
    }

    public int getMovementsCount() {
     // returns number of movements made so far
    }

    public int[] getPositionsArrayOf(int[] numbersArray) {
        //...
    }

    public int[] getNumbersArrayOf(int[] positionsArray) {
        //...
    }

    public void move(int direction) {
        //...
    }

    public GameState getStateOnMovement(int direction) {
       //...
    }

    public boolean movePossible(int direction) {
        //...
    }

    public int[] getPossibleMovements() {
       //...
    }

    public GameState[] expand() {
       //..
    }

    public boolean equals(GameState anotherState) {
     // returns true if the board state is the same
    }

    public boolean isGoalState() {
      // returns true if it is goal state
    }

    public void print() {
        //...
    }

    public int numberOfInversions() {
        // returns number of inversions
    }

    public boolean isSolvable() {
       //returns true if solvable
    }

    public int manhattanDistance() {
     // returns manhattan distance
    }

   } 
```

抱歉，代码量很大。我怀疑我的 AStar 算法有问题。S0，您可能不需要通过其他课程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:44:09.660

我没有详尽地阅读代码，但我认为这可能是因为您仅按启发式对打开列表进行排序，而不是按总成本函数。我相信你知道...

```
f(x) = g(x) + h(x) 
```

`g(x)`到目前为止的路径成本在哪里，并且`h(x)`是曼哈顿距离。

在方法中`AStarList.add()`尝试更改行

```
if (list.get(i).manhattanDistance() > gameState.manhattanDistance()) { 
```

至

```
if (list.get(i).getCost() > gameState.getCost()) { 
```

`GameState.cost()`在哪里

```
public int getCost() {
    return getMovementsCount() + manhattanDistance();
} 
```

编辑：我还注意到你处理相邻节点看起来有点奇怪。您永远不应该从封闭列表中删除任何内容。`children[i]`首先，如果封闭列表已经包含到该节点的相同或更短的路径，则您想要丢弃邻居（即）。其次，如果邻居是新的（即不存在于打开列表中）或者如果我们在打开列表中找到了到同一节点的较短路径，则将其添加到打开列表中。

```
boolean presentInOpenList = openList.isPresent(children[i]);
boolean presentInClosedList = closedlList.isPresent(children[i]);

if (presentInClosedList && children[i].getMovementsCount() >= closedlList.getCostOf(children[i])) {
    // Ignore this node
    continue;
}

if (!presentInOpenList || openList.getCostOf(children[i]) > children[i].getMovementsCount()) {
    openList.add(children[i]);
} 
```

`Map`对打开/关闭列表使用 a而不是 a可能会更好`List`，因为您要确保每个 (x,y) 坐标都有一个唯一的条目；迄今为止发现的成本最低的一个。

# dbf - 在c#中创建的dbf文件无法在dbase中打开

> ID：15382655
> 
> 赞同：1
> 
> 时间：2013-03-13T10:26:31.130
> 
> 标签：dbf, dbase

我在使用 OdbcConnection 时用 C# 代码创建了一个文件 .dbf，但是当我想用 dbase 打开它时，它说这不是 dbf 文件，谁能解释我为什么以及它如何工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:33:01.320

从您的评论来看，这听起来像是来自 dBase III Plus。我什至不相信 ODBC 甚至早在 80 年代末、90 年代初就存在。回溯到那时，dBASE 甚至没有“数据库”，但所有表实际上都是免费的，作为开发人员，您可以编写关系来添加记录、建立键等。

相反，您可能想要做的只是根据您期望直接从 dBASE 获得的格式创建一个表，然后将其空放在一个保存文件夹中。然后，当您需要它时，复制到目标目录并从那里运行。

第二种选择...去微软并下载他们的“VFP Ole DB provider”并尝试使用它。您也可以尝试执行 ExecNonQuery 并尝试类似

```
use SomeTable
copy to YourNewTable type foxplus 
```

这可能是与 dBase 最接近的输出。

# jquery - 从 PHP 向图像添加工具提示

> ID：15382660
> 
> 赞同：0
> 
> 时间：2013-03-13T10:26:41.113
> 
> 标签：jquery, jqgrid

所以我遵循了这个例子：[http](http://www.ehow.com/how_10010263_put-php-code-tooltip.html) ://www.ehow.com/how_10010263_put-php-code-tooltip.html 我正在构建一个 jqgrid ，其中在一列中我有带有标题的图像，我想成为工具提示（因为图像在某些浏览器中一段时间​​后标题消失）。所以在php中我用它来安装图像：

```
 $image = "<div id='tooltip'>
               <img height='16' width='16' title='$image_title' 
               src='". base_url()."img/icons/Blue/Bubble5.png'>
           </div>"; 
```

然后我尝试在jquery中做到这一点：

```
$("#tooltip img[title]").tooltip(); 
```

但是没有效果。

任何想法我做错了什么？

编辑：这就是一个带有图像的单元格在 jqgrid 中的外观：

```
<div id="tooltip">
    <img width="16" height="16" src="path/img/icon/Blue/Bubble5.png" title="random test">
</div> 
```

会不会有问题，因为我有 20 行内容相同，只是标题不同。

我的进口：

```
<script src="<?php echo base_url(); ?>js/jquery-1.4.2.min.js" type="text/javascript"></script>
    <script src="<?php echo base_url(); ?>js/i18n/grid.locale-si.js" type="text/javascript"></script>
    <script src="<?php echo base_url(); ?>js/jquery.jqGrid.min.js" type="text/javascript"></script>
    <script src="<?php echo base_url(); ?>js/jquery.cookie.js" type="text/javascript"></script>
    <script src="<?php echo base_url(); ?>js/jquery.qtip-1.0.0-rc3.min.js" type="text/javascript"></script>
    <script src="<?php echo base_url(); ?>js/jquery-ui-1.7.3.custom.min.js" type="text/javascript"></script>
    <script src="<?php echo base_url(); ?>js/leadFunctions.js" type="text/javascript"></script> 
    <script src="<?php echo base_url(); ?>js/sorttable.js" type="text/javascript"></script> 
    <script src="<?php echo base_url(); ?>js/switcherFunctions.js" type="text/javascript"></script> 
    <script src="<?php echo base_url(); ?>js/jquery.colorbox.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:45:05.853

由于图像是唯一的东西，`<div>`我建议您尝试向`<img>`标签添加一个类。

```
<img class="TT" height='16' width='16' title='$image_title' 
           src='". base_url()."img/icons/Blue/Bubble5.png'> 
```

那么你可以使用

```
$(".TT").tooltip(); 
```

这样，每个带有此类的图像标签都将应用工具提示并默认使用标题。

如果您更喜欢简单的方法，[jqueryUI 示例](http://api.jqueryui.com/tooltip/#entry-examples)页面上的示例显示您可以这样做

```
$(document).tooltip(); 
```

那么页面上每个带有标题的项目都会有一个与之关联的工具提示。

编辑：更新版本后，您的初始解决方案可能会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:52:00.767

您必须使用`foreach`：

```
$("#tooltip").foreach(function(){
 $(this).find("img[title]").tooltip();
}); 
```

如果您有多个带有 id 工具提示的 div 或

```
$("#tooltip").find("img[title]").foreach(function(){
 $(this).tooltip();
}); 
```

如果你有多个图像在一个`div#tooltip`。

# iphone - iOS 绘制大量渐变矩形时 CGContext 的性能较低

> ID：15382661
> 
> 赞同：0
> 
> 时间：2013-03-13T10:26:44.570
> 
> 标签：iphone, ios, core-graphics, cgcontextref

我要实现的效果：![](../Images/dd6b3ae4d79de8cd9773c9321e6fa745.png)

这是代码片段：

```
 for (NSInteger i = 0; i < count; i++) {
    key = [NSString stringWithFormat:@"Property%d", i];
    barHeigth = valueHeight * ([[_values objectAtIndex:i] floatValue]/valueMax);
    CGRect barRect = CGRectMake(marginX, marginY - barHeigth, barWidth, barHeigth);
    CGRect bgBarRect = CGRectMake(marginX, 0, barWidth, marginY);
    BarProperty *property = _barViewDic[key];
    if (!property) {
        property = [[BarProperty alloc] init];
        property.gradientStartColor = RGBACOLOR(93, 193, 247, 0.9);
        property.gradientEndColor = RGBACOLOR(37, 114, 207, 0.9);
        _barViewDic[key] = property;
        [property release];
    }
    property.foreheadRect = barRect;
    property.backgroundRect = bgBarRect;
    [_barPropertiesArray addObject:property];

    key = [NSString stringWithFormat:@"BarView%d", i];
    BarView *barView = _barViewDic[key];
    if (!barView) {
        barView = [[BarView alloc] initWithFrame:barRect];
        barView.backgroundColor = [UIColor clearColor];
        _barViewDic[key] = barView;
        [barView release];
    }
    barView.property = property;
    barView.frame = bgBarRect;
    [self addSubview:barView];
    marginX += barWidth + padding;
} 
```

在截图上，每个蓝色渐变矩形都是 BarView 的一个实例，问题出在这里： barView.frame = bgBarRect 绘制函数很慢，
否则 barView.frame = barRect，
一切顺利，性能良好。

**注意：bgBarRect 和 barRect 的唯一区别是它们的高度，bgBarRect 的高度大于 barRect 的高度**

这是 BarView 的绘制代码：

```
- (CGRect)getBarBounds
{
    CGFloat marginY = CGRectGetHeight(self.bounds) - CGRectGetHeight(self.property.foreheadRect);
    return CGRectMake(0, marginY, CGRectGetWidth(self.property.foreheadRect), CGRectGetHeight(self.property.foreheadRect));
}
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    CGRect barBounds = [self getBarBounds];
    CGPoint startPoint = CGPointMake(CGRectGetMidX(barBounds)/2, 0);
    CGPoint endPoint = CGPointMake(CGRectGetMidX(barBounds)/2, CGRectGetMaxY(barBounds));

    CGColorSpaceRef patternSapce = CGColorSpaceCreatePattern(NULL);

    static const CGPatternCallbacks callbacks = {0, &drawPattern, NULL};
    CGPatternRef pattern = CGPatternCreate(NULL, barBounds,
                                            CGAffineTransformIdentity,
                                            H_PATTERN_SIZE,
                                            V_PATTERN_SIZE,
                                            kCGPatternTilingNoDistortion,
                                            TRUE,
                                            &callbacks);

    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextSaveGState(context);
    CGContextClipToRect(context, barBounds);
    // Drawing code
    CGFloat alpha = 1.0;
    CGContextSetFillColorSpace(context, patternSapce);

    CGContextSetFillPattern(context, pattern, &alpha);
    CGContextFillRect(context, barBounds);

    CGGradientRef myGradient;
    CGColorSpaceRef myColorspace;
    const size_t num_locations = 2;
    CGFloat locations[2] = { 0.0, 1.0 };
    CGFloat components[8] = {
        93/255.0, 193/255.0, 247/255.0, 0.9,
        37/255.0, 114/255.0, 207/255.0, 0.9
    };

    myColorspace = CGColorSpaceCreateDeviceRGB();
    myGradient = CGGradientCreateWithColorComponents (myColorspace, components,
                                                      locations, num_locations);

    CGContextDrawLinearGradient(context, myGradient, startPoint, endPoint, 0);

    CGColorSpaceRelease(patternSapce);
    CGPatternRelease(pattern);

    CGContextRestoreGState(context);        
} 
```

任何人都知道这一点，提前谢谢。

# node.js - Grunt 失败构建“path.join 的参数必须是字符串”错误

> ID：15382662
> 
> 赞同：1
> 
> 时间：2013-03-13T10:26:51.957
> 
> 标签：node.js, yeoman, gruntjs

更新到节点 0.10.0，现在当 Grunt 服务器仍然工作时，Grunt（构建）和 Grunt 测试在运行“useminPrepare：html”（useminPrepare）任务时返回“Arguments to path.join must be strings”错误，实际上无法构建。

设置：节点：0.10.0 Yeoman：1.0.0-beta.3 Grunt：grunt-cli v0.1.6，grunt v0.4.0rc7

我知道已经进行了一些修复，但是尝试了所有建议的解决方案（npm 缓存清除、Grunt 重新安装等），但没有成功。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T12:57:02.050

这个问题之前已经回答过：[Yeoman yo webapp failed with TypeError](https://stackoverflow.com/questions/15357274/yeoman-yo-webapp-fails-with-typeerror)

引用我自己的话：

> 这是 Bower 中的一个错误，并且已经修复。您可以手动更新凉亭安装或等待更新的生成器。 [这是](https://github.com/yeoman/generator/commit/c8188b4cb3c63db6298394328dfffda4dada247f) 解决问题的提交。

# java - 在Android中将onClick ActionListener动态添加到CheckBox

> ID：15382665
> 
> 赞同：0
> 
> 时间：2013-03-13T10:27:03.640
> 
> 标签：java, android

我正在创建一个应用程序，它根据数据库中的条目数动态创建复选框。

代码运行良好。并创建多个复选框。但我想动态地将 onClick Action Listener 添加到 CheckBoxes 中。这个怎么做。

我在这里发布代码：

```
SQLiteDatabase db = this.getReadableDatabase();

String countQuery = "SELECT  * FROM " + TABLE_NAME;
SQLiteDatabase db = this.getReadableDatabase();
Cursor cursor = db.rawQuery(countQuery, null);

int maxCount = cursor.getCount();
CheckBox[] check = new CheckBox[maxCount];

cursor.moveToFirst();
int checkboxid = 100;
int alarm_id;
for(int i=0;i<maxCount;i++)
{
    check[i]= new CheckBox(this);
setCheckBoxId(i+maxCount);
} 
```

现在如何将 actionlistener 添加到这些动态创建的 CheckBox 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:30:53.830

```
check[i]= new CheckBox(this);
check[i].setOnClickListener(this); 
```

您将需要检查复选框 id 或在创建文本 boz 时为其设置标签。

```
check[i].setTag(someIdentifier); 
```

然后使用方法

```
@Override
public void onClick(View v) {
                 if (v.getTag.equals(someIdentifier)){
                    //do stuff here
                  }

        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T10:30:18.350

在下面`check[i]= new CheckBox(this);`添加这个，你的 CheckBoxes 将有一个 all clicklistener

```
check[i].setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                        // your code to be executed on click :)
                    }
                }); 
```

# java - 如何解决数据冲突

> ID：15382666
> 
> 赞同：0
> 
> 时间：2013-03-13T10:27:07.933
> 
> 标签：java, php, database, database-design

我有几个数据库，需要在它们之间交换数据。当我从 db A 导出到 db B 时，会发生 Id 冲突。我想出了两种办法，没有一种能让我满意。

1.  选择 max(id) 然后创建新的 id 以避免冲突，但是一列存储 json 结构并且也包含 id！（历史原因）。所以我需要创建新的 ID（主键）并修改该 json 列中的所有 ID。

2.  或者我可以为每个数据导入添加批处理信息。当我导入数据时，我会找出 sql 中的每个 id 并在它们之前添加批处理 id。如：

原始数据库如下：

```
ID     COL_JSON
11     {id:11,name:xx ...} 
```

我想插入一条新记录：11，插入后我在 id 之前添加了一个批处理信息“1000”

现在分贝看起来像

```
ID     COL_JSON
11     {id:11,name:xx ...}  
100011 {id:100011,name:xx ...} 
```

下一批将是 1001,1002 1003 ...，因此如果需要插入新的 11 条记录，则数据库看起来像

```
ID     COL_JSON
11     {id:11,name:xx ...}  
100011 {id:100011,name:xx ...}  
100111 {id:100111,name:xx ...} 
```

虽然这两种方法可以解决冲突，但我觉得这两种方法很愚蠢。有什么优雅的方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:15:48.130

对于遗留系统，除了与它对齐之外，没有更好的方法。我们无法在遗留系统上对其进行更多更改，因此您的第二种方法似乎不错。坦率地说，这并不愚蠢，而且是正确的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:43:59.910

我不完全了解您的数据库交换的内容。

如果您需要来自两个数据库的数据，您可以使用与您的批次类似但使用字符的东西 - A11 和 B11 id。

这样，即使您的数据库增长很多，您也不会发生冲突。

编辑：您还可以使用两个字段创建主键：具有自动增量的整数 ID 和原始数据库名称的 varchar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:45:22.937

当我有一个应该同步的表（不是即时同步）时，我使用这种方法：

*   将被覆盖的主表具有很大的自动增量（即：autoincrement = 100000）
*   将合并到主表的辅助表具有从 1 开始的正常自动增量。

**唯一的要求是您确保主表有足够大的自动增量设置，因此辅助表 id 永远不会达到主表第一个 ID**

# iphone - 遮罩 UIView 触摸检测

> ID：15382667
> 
> 赞同：2
> 
> 时间：2013-03-13T10:27:10.240
> 
> 标签：iphone, objective-c, ios5, uiview

![我在屏蔽后得到这个视图。视图大小是 310 宽度 310 高度。我只想检测黑色区域上的触摸](../Images/f0d0da0b9662d9f7f95075c05eab8f84.png)我有一个大框架，通过它我掩盖了一个较小的视图，现在我想检测较小的一个，但触摸开始不允许我过滤蒙面视图的任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:44:21.347

```
- (void)viewDidLoad
{

 UITapGestureRecognizer *gr = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(UIviewTapped:)];
 [yourUIview addGestureRecognizer:gr];

}

-(void) UIviewTapped:(UIView *)view
{

  // write touched code here. 

} 
```

# node.js - 在 Express/Node.js 中使用多个回调进行路由

> ID：15382672
> 
> 赞同：0
> 
> 时间：2013-03-13T10:27:18.123
> 
> 标签：node.js, routing, express, middleware

我是 Node.js 的新手，甚至是一般的 JavaScript，我目前正在使用 Node/Express 设置一个 http-server，它应该查询一个 postgresql 数据库。我不确定我使用的路由和多个回调是否正确，希望有人能澄清一下。

现在，它看起来像这样：

在我的**web.js**

```
var routes = require('./routes');
app.get('/get/user/:userid', routes.user, routes.dbquery); 
```

在**routes/index.js中**

```
exports.user = function(request, response, next) {
    request.querystring = "select * from users where userid = " + request.param('userid');
    next();
};

exports.dbquery = function(request, response) {
    pg.connect(process.env.DATABASE_URL, function(err, client, done) {
        var query = client.query(request.querystring);  
        query.on('row', function(row, result) {
            result.addRow(row);
        });
        query.on('end', function(result) {
            response.send(JSON.stringify(result.rows));
        });
        done();
    });
}; 
```

它有效，但这是设置路由的正确方法吗？具体来说，是否可以只传递请求变量中的查询字符串等变量？或者还有其他一些首选的解决方案吗？

我想这样做的原因是因为我希望能够重用 dbquery 函数，因为我将有多个路由来查询数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:48:32.097

是的，你可以附上任何你想`request`反对的东西（这是一种常见的做法）。但是，那里的数据应该仅与请求相关，而您的查询与请求并不真正相关（除了`userid`）。

那么如何在中间件中定义查询而不是定义外部函数：

```
var get_query = function(userid) {
    // NOTE: You should validate userid!!!
    return client.query("select * from users where userid = " + userid);
}; 
```

`dbquery`并在您的路线中调用它？并且只附加`userid`到`request`.

# asp.net - $.ajax 调用返回 application/json 并在测试服务器上运行，在生产服务器上运行 text/html 并失败

> ID：15382673
> 
> 赞同：2
> 
> 时间：2013-03-13T10:27:19.667
> 
> 标签：asp.net, ajax, json, jquery

前言：我知道有很多类似的问题，但没有一个对我有帮助。

我有点纠结。

我有一个 ASP.NET 应用程序，它使用`$.ajax`调用将一些数据返回到页面。我在 3 个不同的应用程序服务器上有这个，它们都是 Windows Server 2003。

我不是在本地运行它，它在 3 个 Web 应用程序服务器上。2个有效，1个无效。

此调用在开发服务器上完美运行，开发测试服务器，但在生产服务器上失败。我在 Chrome 中检查了控制台，发现在我的 Dev 和 DevTest 环境中，ajax 调用正在返回`application/json`，但在生产环境中正在返回`text/html`。此外，在我的开发和开发测试服务器上，一切正常，我得到了它应该返回的 json，但在生产中，我得到了 200 OK，但它返回整个调用页面 html 并执行我的 ajax 的错误函数称呼。

这是我的ajax调用：

```
$.ajax({
      type: "POST",
      contentType: "application/json; charset=utf-8",
      url: "RequestDetail.aspx/postAsync",
      data: "{'reqSystem': '" + $('#ctl00_PlaceHolderMain_lblRequestSystem').text() + "', 'vendorNumber': '" + $('#ctl00_PlaceHolderMain_txtVendorNo').val() + "'}",
      dataType: "json",
      success: AjaxSucceeded,
      error: AjaxFailed
      }); 
```

这是后面的代码：

```
<System.Web.Services.WebMethod()> _
Public Shared Function postAsync(ByVal reqSystem As String, ByVal vendorNumber As String) As String
    Dim required = CheckForSpecialApproval(reqSystem, vendorNumber)
    Return required.ToString()
End Function 
```

这是我在生产版 Chrome 的控制台中看到的内容：

![生产 Chrome 控制台](../Images/83f5f260e06f48a283859ca9f75341d9.png)

这就是 Dev 上的样子：

![开发 Chrome 控制台](../Images/830a1f08e14c81a7a1783e44d9feb170.png)

我在生产服务器上检查了 IIS 中的 mime 类型，并且 javascript 和 json 的 mime 类型不存在，所以我不得不创建它们，但它仍然无法正常工作。我用谷歌搜索了这个问题，我无法弄清楚问题是什么。

如果您需要任何其他信息，我很乐意提供。

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:50:34.933

生产响应的大小惊人地相同，并且比开发响应大得多（173KB 对 366B）。您应该调查该`text/html`响应的内容 - 内容很可能实际上是 HTML 格式的错误消息。如果 Chrome 无法让您查看响应，请使用 Fiddler。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:10:31.237

原来生产 web.config 上缺少条目：

```
<sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, &#xD;&#xA;                System.Web.Extensions, Version=3.5.0.0, Culture=neutral, &#xD;&#xA;                PublicKeyToken=31BF3856AD364E35">
  <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, &#xD;&#xA;                System.Web.Extensions, Version=3.5.0.0, Culture=neutral, &#xD;&#xA;                PublicKeyToken=31BF3856AD364E35">
    <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, &#xD;&#xA;                System.Web.Extensions, Version=3.5.0.0, Culture=neutral, &#xD;&#xA;                PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
    <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, &#xD;&#xA;                    System.Web.Extensions, Version=3.5.0.0, Culture=neutral, &#xD;&#xA;                    PublicKeyToken=31BF3856AD364E35">
      <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, &#xD;&#xA;                System.Web.Extensions, Version=3.5.0.0, Culture=neutral, &#xD;&#xA;                PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere" />
      <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, &#xD;&#xA;                System.Web.Extensions, Version=3.5.0.0, Culture=neutral, &#xD;&#xA;                PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
      <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, &#xD;&#xA;                System.Web.Extensions, Version=3.5.0.0, Culture=neutral, &#xD;&#xA;                PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
      <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, &#xD;&#xA;                System.Web.Extensions, Version=3.5.0.0, Culture=neutral, &#xD;&#xA;                PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
    </sectionGroup>
  </sectionGroup>
</sectionGroup>

<add name="ScriptModule" type="System.Web.Handlers.ScriptModule,  System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" /> 
```

感谢大家的时间和答案。

# android - Android如何始终打开索引活动

> ID：15382678
> 
> 赞同：0
> 
> 时间：2013-03-13T10:27:24.840
> 
> 标签：android, android-activity

今天遇到的问题是，只要我已经在清单文件中进行了配置，我的应用程序就无法始终进行索引活动。

```
<activity
    android:name="com.ppshein.inm.IndexActivity"
    android:label="@string/app_name"
    android:screenOrientation="portrait" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

问题是，我有两个活动（索引和详细信息）。

1）打开我的应用程序，它进入索引活动。
2) 单击 Index 活动中的按钮，然后转到 Detail 活动。
3）单击android“主页”按钮退出详细活动。（不要点击android“后退”按钮）。

4）再次打开我的应用程序，它会自动转到详细信息活动（这是我不想要的）。

当我想要打开我的应用程序时，总是想先进行索引活动，甚至在详细活动时关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:59:32.900

不，我找到了答案。正确的答案是像往常一样将以下属性添加到我们想要设置默认值的活动中。

```
android:clearTaskOnLaunch="true" 
```

# linux - 如果两个进程在没有锁的情况下访问同一个文件会发生什么？

> ID：15382688
> 
> 赞同：3
> 
> 时间：2013-03-13T10:28:05.783
> 
> 标签：linux, file

在linux中：如果两个进程在没有任何锁的情况下访问同一个文件，会发生什么？考虑以下情况：

1.  进程 A 正在读取文件，而进程 B 正在写入文件。
2.  进程 A 和进程 B 都在写入同一个文件。
3.  进程 A 正在读取文件，进程 B 正在复制/移动另一个文件以替换原始文件
4.  进程 A 正在读取文件，进程 B 正在删除文件
5.  进程 A 正在写入文件，而进程 B 正在复制/移动另一个文件以替换原始文件
6.  进程 A 正在写入文件，进程 B 正在删除文件

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T11:00:53.677

1, 2\. 读取和写入请求基本上被分解成更小的请求，并且这些请求没有特定的顺序执行。结果是完全混乱。对此有一些例外，例如附加到文件的多个进程。在这种情况下，每次写入都是原子的。

4, 6\. 文件删除对已经打开的文件句柄没有影响。

3,5。与 1,2 或 4,6 相同，具体取决于它是复制还是移动（== 删除目标并重命名源）。

# sql - sql server "top 1" 限制

> ID：15382694
> 
> 赞同：1
> 
> 时间：2013-03-13T10:28:15.550
> 
> 标签：sql, sql-server

我有一个查询：

```
select @MyVariable = SomeField from SomeTable <...> 
```

如果我运行它移出@MyVariable -

```
select SomeField from SomeTable <...> 
```

它做同样的工作，一切都很好。

现在我想为查询添加前 1 个限制，使其看起来像这样

```
select top 1 SomeField from SomeTable <...> 
```

效果很好。

最后，我想将此前 1 添加到设置 MyVariable 的初始查询中，但它不起作用：

```
select @MyVariable = top 1 SomeField from SomeTable <...> 
```

我收到此错误消息 -

> 消息 156，级别 15，状态 1，第 25 行 关键字“top”附近的语法不正确。

有没有办法让它正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:29:40.030

您必须替换`top 1`为`@MyVariable = SomeField`如下：

```
select top 1  
       @MyVariable = SomeField 
from SomeTable <...> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:30:14.903

尝试：

```
select top 1 @MyVariable =SomeField from SomeTable <...> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T10:32:31.440

> 你可以这样做：

```
SELECT TOP 1  
   @MyVariable = SomeField 
FROM SomeTable <...> 
```

# xna - XNA 不能创建多个实例？

> ID：15382695
> 
> 赞同：0
> 
> 时间：2013-03-13T10:28:17.907
> 
> 标签：xna, instance

我正在尝试构建一个非常简单的 XNA 项目。每 5 秒就会生成一个新球，该球会在墙壁上反弹。由于某种原因，它不会创建我的球的多个实例。我似乎无法弄清楚我做错了什么。

希望这里有人可以帮助我发现我的错误。

这是我的代码 Game1.cs 类

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace BallBounce
{
/// <summary>
/// This is the main type for your game
/// </summary>
public class Game1 : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;
    public static SpriteBatch spriteBatch;

    Ball ball;
    Ball ball2;

    Ball[] balls;
    int maxBalls = 1;

    Texture2D ballTexture;
    Texture2D ballTexture2;

    Vector2 position;
    Vector2 position2;

    int spawnTime = 0;

    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
    }

    /// <summary>
    /// Allows the game to perform any initialization it needs to before starting to run.
    /// This is where it can query for any required services and load any non-graphic
    /// related content.  Calling base.Initialize will enumerate through any components
    /// and initialize them as well.
    /// </summary>
    protected override void Initialize()
    {
        // TODO: Add your initialization logic here
        ballTexture = Content.Load<Texture2D>("Bitmap1");
        ballTexture2 = Content.Load<Texture2D>("Bitmap2");

        Random r = new Random();
        int randomNumberX = r.Next(0, 400);
        int randomNumberY = r.Next(0, 400);

        position = new Vector2(randomNumberX, randomNumberY);
        position2 = new Vector2(randomNumberY, randomNumberX);

        ball = new Ball(this, ballTexture, position);
        ball2 = new Ball(this, ballTexture2, position2);

        Components.Add(ball);
       // Components.Add(ball2);

        base.Initialize();
    }

    /// <summary>
    /// LoadContent will be called once per game and is the place to load
    /// all of your content.
    /// </summary>
    protected override void LoadContent()
    {
        // Create a new SpriteBatch, which can be used to draw textures.
        spriteBatch = new SpriteBatch(GraphicsDevice);

        // TODO: use this.Content to load your game content here
    }

    /// <summary>
    /// UnloadContent will be called once per game and is the place to unload
    /// all content.
    /// </summary>
    protected override void UnloadContent()
    {
        // TODO: Unload any non ContentManager content here
    }

    /// <summary>
    /// Allows the game to run logic such as updating the world,
    /// checking for collisions, gathering input, and playing audio.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void Update(GameTime gameTime)
    {
        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();

        // TODO: Add your update logic here
        spawnTime += (int)gameTime.ElapsedGameTime.Milliseconds;
       // Console.WriteLine(spawnTime + " " + maxBalls);
        if(spawnTime >= 500)
        {
            maxBalls += 1;

            for(int i = 0; i < maxBalls; i++)
            {
                //balls[i] = new Ball(this,ballTexture);
                //Components.Add(balls[i]);
            }

            spawnTime = 0;
        }

        base.Update(gameTime);
    }

    /// <summary>
    /// This is called when the game should draw itself.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);

        // TODO: Add your drawing code here

        base.Draw(gameTime);
    }
} 
```

}

这是我的 Ball.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Graphics;

namespace BallBounce
{
public class Ball : Microsoft.Xna.Framework.DrawableGameComponent
{
    Texture2D texture;
    Vector2 speed = new Vector2(4,6);
    Vector2 position;
    Color color = Color.Blue;

    public Ball(Game1 game, Texture2D texture, Vector2 position)
        : base(game)
    {
        this.texture = texture;
        Console.WriteLine("=========================BAL---------------");

        this.position = position;

        Random random = new Random();

        int red = random.Next(0, 255);
        int green = random.Next(0,255);
        int blue = random.Next(0,255);

        color = new Color(red,green,blue);

        Console.WriteLine(position);

    }

    public override void Update(GameTime gameTime)
    {
        this.position = this.position += speed;

        if (this.position.Y >= (GraphicsDevice.Viewport.Height - this.texture.Height))
        {
            speed.Y = speed.Y * -1;
        }
        if (this.position.Y <= 0)
        {
            speed.Y = speed.Y * -1;
        }
        if (this.position.X >= (GraphicsDevice.Viewport.Width - this.texture.Width))
        {
            speed.X = speed.X * -1;
        }
        if (this.position.X <= 0)
        {
            speed.X = speed.X * -1;
        }

    }

    public override void Draw(GameTime gameTime)
    {
        Game1.spriteBatch.Begin();
        Game1.spriteBatch.Draw(texture, position, color);
        Game1.spriteBatch.End();

        base.Draw(gameTime);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:02:37.597

看起来您正在重新创建某个数组中的所有球，每 500 毫秒再添加一个（实际上是 0.5 秒）。您应该只将一个新球添加到某个全局球列表中，而不是像现在这样重写所有现有球。

所以我想你可以这样做：

```
if(spawnTime >= 500)
{
    Components.Add(new Ball(this, ballTexture));            

    spawnTime = 0;
} 
```

不过，您的方法看起来不太好。您确定要直接添加球`Components`吗？

# java - 从数组中删除重复项并按某事排序

> ID：15382696
> 
> 赞同：1
> 
> 时间：2013-03-13T10:28:23.050
> 
> 标签：java, xml

我有一个 java 对象，它输出我的 xml 数据。我的目标是删除数组中的重复项并按出生日期排序（最早的等）目前我不知道该怎么做。你们能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:32:42.780

用于`JAXB`将此 XML 转换为 java 对象。`Comparable`然后你可以通过实现接口根据你自己的标准对它们进行排序。

编辑：如果您有 XSD，请使用 xjc 编译器将 xsd 转换为 java 类。然后在 JAXB 中使用这些类。

步骤1 ：

使用 xjc 命令从 xsd 创建 java 类。转到保存 xsd 的目录。并打开命令提示符/终端并在命令下触发。

```
xjc your_xsd.xsd 
```

一些类将在目录中生成。并非所有都是必需的，但一个用于表示 xml 节点的成员变量很重要。将其复制到您的项目 src 文件中。假设类名是`DataDocument`。

然后你的java类将做解组将是这样的：

```
public static void main (String [] args) {
    try {
        File xmlFile = new File("your_xml_file.xml");
        JAXBContext jaxbCtx = JAXBContext.newInstance(DataDocument.class);
        Unmarshaller unmarshaller = jaxbCtx.createUnmarshaller();
        DataDocument dataDocument = (DataDocument) unmarshaller.unmarshal(xmlFile);
        System.out.println("data document is : " + dataDocument);
    } catch (JAXBException e) {
       e.printStackTrace ();
    }
} 
```

根据您的需要更改代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:58:34.303

您可以使用 Castor 框架将 XML 转换为 Java 对象

# scala - 向泛型集合添加成对差异 - 隐式解析不会生效

> ID：15382699
> 
> 赞同：3
> 
> 时间：2013-03-13T10:28:26.047
> 
> 标签：scala, collections, implicit-conversion

好的，所以我有这个：

```
implicit final class RichIterableLike[A, Repr <: IterableLike[A, Repr]](val it: Repr) 
  extends AnyVal {
  def pairDiff[To](implicit num: Numeric[A], cbf: CanBuildFrom[Repr, A, To]): To = {
    val b     = cbf(it)
    val iter  = it.iterator
    if (iter.hasNext) {
      var pred = iter.next()
      while (iter.hasNext) {
        import num.mkNumericOps
        val succ = iter.next()
        b += succ - pred
        pred = succ
      }
    }
    b.result()
  }
} 
```

这会编译，但不会启动：

```
val stabs = IndexedSeq(1.0, 2.0, 3.0)
stabs.pairDiff 
```

给出：`value pairDiff is not a member of IndexedSeq[Double]`

显式转换工作：

```
new RichIterableLike[Double, IndexedSeq[Double]](stabs).pairDiff 
```

...如何解决这个问题？

* * *

**编辑**

如果我应用[这个答案](https://stackoverflow.com/questions/5410846/how-do-i-apply-the-enrich-my-library-pattern-to-scala-collections#5411133)的方法，它会起作用：

```
implicit final class RichIterableLike[A, CC[~] <: Iterable[~]](val it: CC[A]) 
  extends AnyVal {
  def pairDiff[To](implicit num: Numeric[A], cbf: CanBuildFrom[CC[A], A, To]): To = {
  ...
} 
```

但是问题仍然存在，在后一种情况下使隐式查找发挥作用的关键区别是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:22:12.540

为了使隐式查找起作用，它需要`A`和`Repr`（`IterableLike`需要该链接）之间的链接。您将其作为参数传入，因此该参数应键入为`Repr[A]`. 这意味着您需要修改您的签名，使其看起来像这样：

```
RichIterableLike[A, Repr[X] <: IterableLike[X, Repr[X]]](val it: Repr[A]) 
```

有了上面的签名，你说：

> 我有一个接受类型参数的对象，我将命名该对象`Repr`，当你将它传入时，我也想捕获类型参数。我将命名该类型参数`A`。作为一个额外的条件，我希望类型`Repr`符合`IterableLike`

# oauth-2.0 - cas oauth 谷歌失败

> ID：15382703
> 
> 赞同：0
> 
> 时间：2013-03-13T10:28:37.653
> 
> 标签：oauth-2.0, cas

我正在尝试将 CAS 集成到我们的 Web 应用程序中以通过 OAuth 2.0 进行身份验证，并且我已经从“ [https://github.com/leleuj/cas-oauth-demo-3.5.x](https://github.com/leleuj/cas-oauth-demo-3.5.x) ”下载了演示应用程序。（客户端演示） . 并将其部署在tomcat7中，但是使用Google帐户进行身份验证时会引发异常。我尝试编写另一个提供程序并且身份验证正常，但无法重定向到我的原始网页。

## 下面是错误信息。有人熟悉 CAS Oauth 吗？期待您的回答，谢谢。

## {"failure":"true","exception.message":"org.springframework.webflow.execution.ActionExecutionException: 异常抛出执行 org.jasig.cas.support.oauth.web.flow.OAuthAction@1077092 在状态 'oauthAction ' 流 'login' -- 动作执行属性是 'map[[empty]]'","exception.stacktrace":"org.springframework.webflow.execution.ActionExecutionException: 执行 org.jasig.cas.support 时抛出异常。 oauth.web.flow.OAuthAction@1077092 处于流 'login' 的状态 'oauthAction' - 动作执行属性是 'map[[empty]]'\r\n\tat org.springframework.webflow.execution.ActionExecutor.execute (ActionExecutor.java:60)\r\n\tat org.springframework.webflow.action.EvaluateAction.doExecute(EvaluateAction.java:77)\r\n\tat org.springframework。webflow.action.AbstractAction.execute(AbstractAction.java:188)\r\n\tat org.springframework.webflow.execution.AnnotatedAction.execute(AnnotatedAction.java:145)\r\n\tat org.springframework.webflow。 execution.ActionExecutor.execute(ActionExecutor.java:51)\r\n\tat org.springframework.webflow.engine.ActionState.doEnter(ActionState.java:101)\r\n\tat org.springframework.webflow.engine。 State.enter(State.java:194)\r\n\tat org.springframework.webflow.engine.Flow.start(Flow.java:535)\r\n\tat org.springframework.webflow.engine.impl。 FlowExecutionImpl.start(FlowExecutionImpl.java:366)\r\n\tat org.springframework.webflow.engine.impl.FlowExecutionImpl.start(FlowExecutionImpl.java:225)\r\n\tat org.springframework.webflow.executor。 FlowExecutorImpl.launchExecution(FlowExecutorImpl.java:140)\r\n\tat org.springframework.webflow.mvc.servlet.FlowHandlerAdapter。句柄（FlowHandlerAdapter.java:193）\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch（DispatcherServlet.java:923）\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService（ DispatcherServlet.java:852)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet. java:778)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:621)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:722)\r \n\tat org.jasig.cas.web.init.SafeDispatcherServlet.service_aroundBody2(SafeDispatcherServlet.java:128)\r\n\tat org.jasig.cas.web.init.SafeDispatcherServlet.service_aroundBody3$advice(SafeDispatcherServlet.java: 57)\r\n\tat org.jasig.cas.web.init.SafeDispatcherServlet.service(SafeDispatcherServlet.java:1)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) \r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\r \n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)\r\n \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n\tat com.github。inspektr.common.web.ClientInfoThreadLocalFilter.doFilter(ClientInfoThreadLocalFilter.java:63)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\r\n\tat org.apache。 catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)\r\n\tat org.apache.catalina。 core.StandardContextValve.invoke(StandardContextValve.java:169)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\r\n\tat org.apache.catalina.core。 StandardHostValve.invoke(StandardHostValve.java:168)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)\r\n\tat org.apache.catalina.valves.AccessLogValve。调用（AccessLogValve.java:927）\r\n\tat org.apache.catalina。core.StandardEngineValve.invoke(StandardEngineValve.java:118)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)\r\n\tat org.apache.coyote.http11。 AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)\r\n\tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)\r\n\tat org.apache.tomcat.util.net。 JioEndpoint$SocketProcessor.run(JIoEndpoint.java:307)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\r\n\tat java.util.concurrent.ThreadPoolExecutor$ Worker.run(ThreadPoolExecutor.java:908)\r\n\tat java.lang.Thread.run(Thread.java:662)\r\n原因：java.lang.NullPointerException\r\n\tat org.jasig .cas.support.oauth.web.flow.OAuthAction.doExecute(OAuthAction.java:93)\r\n\tat org.springframework.webflow.action.AbstractAction。执行(AbstractAction.java:188)\r\n\tat org.springframework.webflow.execution.ActionExecutor.execute(ActionExecutor.java:51)\r\n\t... 45 更多\r\n"}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:21:30.183

我是 CAS 的 OAuth 支持的创建者。Google 已删除对 Google OAuth 1.0 的支持。您必须使用*Google2Provider*类切换到 Google OAuth 2.0 支持。

# java - 使用 SQL Server 在 Java 中更新查询给出异常

> ID：15382704
> 
> 赞同：0
> 
> 时间：2013-03-13T10:28:39.047
> 
> 标签：java, sql-server-2008

```
PreparedStatement update = con.prepareStatement(
    "UPDATE employee SET FirstName = ?, LastName = ?, HighestDegreeEarned = ?, JoiningDate = ?, CurrentPost = ?, DeparmentID = ?, ContactNo(Mobile) = ?, ContactNo(Home) = ?, CurrentAddress = ?, PermanentAddress = ? WHERE ID =  ?");

update.setString(1, firstnametxt.getText());
update.setString(2, lastnametxt.getText());
update.setString(3, degreetxt.getText());
update.setString(4, joiningdatetxt.getText());
update.setString(5, currentposttxt.getText());
update.setString(6, departmentidtxt.getText());
update.setString(7, mobiletxt.getText());
update.setString(8, contactnotxt.getText());
update.setString(9, currentaddresstxt.getText());
update.setString(10, permanentaddresstxt.getText());
update.setString(11, empidtxt.getText());

update.executeUpdate(); 
```

这是代码，在执行时我得到了下面的错误。SQL 异常：java.sql.SQLException：[Microsoft][ODBC SQL Server Driver][SQL Server]')' 附近的语法不正确。请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:50:51.253

无法命名数据库中的列：ContactNo(Mobile) 或 ContactNo(Home)

如果 ContactNo() 是一个函数，使用动态 sql 调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:56:42.963

失败可能有两个原因

1.  SQL server 中的 ContactNo 函数未退出或未编译
2.  JoiningDate 格式不正确

# sql - SQL选择具有相同列值的多行

> ID：15382708
> 
> 赞同：0
> 
> 时间：2013-03-13T10:28:55.017
> 
> 标签：sql, sql-server

我有表：

> ```
> column1   column2    column3        column4 
> ---------------------------------------------
> 1          53          6527          111
> 2          53          6527          111
> 3          53          6527          111
> 4          53          6527          111
> 5          53          6527          222
> 6          53          6527          222
> 7          53          6527          333
> 8          53          6527          333
> 9          53          6527          444
> 10         53          6527          444
> 11         53          6527          444
> 12         53          6527          444 
> ```

我需要`select`是否存在三行和一些 column4 值如果只存在两个然后两个或一个。麦克斯三岁。在`select`我需要得到这样的结果之后：

> ```
> column1   column2    column3        column4 
> ---------------------------------------------
> 1          53          6527          111
> 2          53          6527          111
> 3          53          6527          111
> 5          53          6527          222
> 6          53          6527          222
> 7          53          6527          333
> 8          53          6527          333
> 9          53          6527          444
> 10         53          6527          444
> 11         53          6527          444 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:36:49.047

由于您使用的是 SQL Server，因此您可以使用[排名函数](http://msdn.microsoft.com/en-us/library/ms189798.aspx)s 来获得结果：

```
select [column1], [column2], [column3], [column4]
from
(
  select [column1], [column2], [column3], [column4],
    row_number() over(partition by column2, column3, column4 order by column1) rn
  from yourtable
) src
where rn <= 3 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/2ba5a/3)

# android - 安卓中的形状

> ID：15382710
> 
> 赞同：0
> 
> 时间：2013-03-13T10:28:58.657
> 
> 标签：android

经过长期研究[处理形状可绘制差异的最佳方法 Android 2.3.5 vs 4.0](https://stackoverflow.com/questions/8547586/best-way-to-handle-shape-drawable-differences-android-2-3-5-vs-4-0)，[Drawable-hdpi，Drawable-mdpi，Drawable-ldpi Android](https://stackoverflow.com/questions/3263265/drawable-hdpi-drawable-mdpi-drawable-ldpi-android)，以及[本教程](https://stackoverflow.com/questions/2533410/drawable-folders-in-res-folder)和[本最佳教程](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)我已经开始做示例应用程序。

我已将以下形状存储在`res/drawable-ldpi`

```
<stroke
    android:width="2dp"
    android:color="#FFFFFFFF" />

<gradient
    android:angle="225"
    android:endColor="#ffa500"
    android:startColor="#DD000000" />
<corners
    android:bottomLeftRadius="0dp"
    android:bottomRightRadius="7dp"
    android:radius="0.1dp"
    android:topLeftRadius="0dp"
    android:topRightRadius="7dp" /> 
```

`res/drawable-hdpi`, `res/drawable-mdpi`, `res/drawable-xhdpi`,中的以下内容`res/drawable-v14`

```
<stroke
    android:width="2dp"
    android:color="#FFFFFFFF" />

<gradient
    android:angle="225"
    android:endColor="#ffa500"
    android:startColor="#DD000000" />

<corners
    android:bottomLeftRadius="7dp"
    android:bottomRightRadius="0dp"
    android:radius="0.1dp"
    android:topLeftRadius="0dp"
    android:topRightRadius="7dp" /> 
```

在所有类型的模拟器中看起来都是这样。即在 hvga 、 qvga 、 4.0.3 版和三星二重奏 ![在此处输入图像描述](../Images/570387540da470c8d9cfdc6c75955d7a.png)

但在 micromax funbook 为什么它看起来像这样。

![在此处输入图像描述](../Images/bc7ad1259787d5d66070bad33cc8169c.png)

这里有什么问题。我还有什么想做的吗。帮帮我吧朋友。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:51:06.287

尝试将第一个放入`res/drawable`

第二个在`res/drawable-v14`

`res/drawable-ldpi`从, `res/drawable-hdpi`, `res/drawable-mdpi`,中删除其他`res/drawable-xhdpi`

**[更新]**

为什么要从其他 res/drawable-XXX 文件夹中删除：
Android 总是为设备选择最好的 drawable。因为您只需要 android < 4.0 和 >= 4.0 的其他版本，所以您只需要这两个目录

[有关此主题的 Android 开发人员文档](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)

# java - Play Framework 2.1 中的简单搜索？

> ID：15382713
> 
> 赞同：0
> 
> 时间：2013-03-13T10:29:03.033
> 
> 标签：java, sql, playframework-2.1

我有一个地狱般的时间来解决这个问题。我想在我的 Play-Framework 2.1 Java 应用程序中创建一个基本的搜索引擎。该应用程序有一个存储在 MySQL 数据库中的视频游戏记录列表。用户界面可让您输入视频游戏标题并进行搜索。Play 应用应返回与用户输入的查询匹配的所有游戏的列表。如果用户搜索“Mario”，它应该返回包含该文本的所有游戏的列表。

目前我在我的控制器中拥有的是：

```
public class Games extends controller {
    //NOTE: instance fields omitted

    public static Result search() {
        DynamicForm form = form().bindFromRequest();
        //Query is now stored in form.get("q"), though I can't figure out how to use it

        List<Game> games = new Model.Finder(String.class, Game.class).all();
        //This returns every game currently in the database
        return ok(search.render(games);
    }    
} 
```

我查看了 Model.Finder 类的所有[Play 2.0.3 文档](http://www.playframework.com/documentation/api/2.0.3/java/play/db/ebean/Model.Finder.html#fetch%28java.lang.String%29)（注意：我找不到涵盖此内容的 2.1 文档，这是我正在使用的版本），并且找不到如何搜索自定义查询，或者如何构建我想要的 SQL 查询。我在 Java 中非常迷茫和中级。帮助！:-(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:47:38.880

这是针对[ebean](http://www.avaje.org/ebean)而不是 Play 的特定问题。

你可以这样做：

```
List<Game> games = new Model.Finder(String.class, Game.class)
    .where().like("name", "foo%").findList(); 
```

# css - css：以儿童为目标

> ID：15382715
> 
> 赞同：-3
> 
> 时间：2013-03-13T10:29:07.560
> 
> 标签：css, parent, target

假设我们有这个 html

```
<div class="a">
   <div>...</div>
   ...
   <div id="b">xyz</div>
</div>

<div class="a">
   <div>...</div>
   ...
   <div id="c">abc</div>
</div> 
```

使用 css :target 选择器在 url 中定位 #b 时应用一些样式很容易。是否可以在 class="a" 的父 div 上应用一些样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:33:31.923

不，因为您需要一个 CSS 父选择器。[CSS2](http://www.w3.org/TR/CSS2/selector.html#pattern-matching)和[CSS3](http://www.w3.org/TR/css3-selectors/#selectors)中没有为此指定任何内容。CSS4 确实有（有点）使用该符号的[父选择器](http://www.w3.org/TR/selectors4/#subject)（称为主题选择器）`!`，但没有浏览器支持它（目前）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:33:19.020

您可以添加一个额外`id`的`<div class="a">`内容并制作它：

```
<div class="a" id="abc"> 
```

...并且仍然使用`:target`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:44:21.323

不，CSS**级联**（CSS = Cascading Style Sheets），它不会上升。您需要将样式显式应用于父元素。

您最好执行@otinanai 建议的操作，并为您的子 div 添加一个类。例如

**HTML**

```
<div class="a">
   <div>...</div>
   ...
   <div class="aItem" id="b">xyz</div>
</div>

<div class="a">
   <div>...</div>
   ...
   <div class="aItem" id="c">abc</div>
</div> 
```

**CSS**

```
.a {
    border: 1px solid #000;
}
.aItem {
    color: #999;
} 
```

因此，您将使用类来一致地设置元素的样式。否则，您将不得不为 D、E、FG 到 Z 编写 CSS，并且仅将 ID 用于预订标记/URL 目的。

# ruby-on-rails - 使用 Rails 3、Bundler 和 RVM 在生产中找不到新的 Gem

> ID：15382718
> 
> 赞同：1
> 
> 时间：2013-03-13T10:29:12.647
> 
> 标签：ruby-on-rails, rvm, bundler

我最近为 Rails 3 应用程序设置了一个生产服务器。

在最初的部署中，一切正常。在随后的部署中，没有找到添加到项目中的新 gem。当我分别从新添加的 gem 中引用类和方法时，我遇到了`uninitialized constant`错误。`undefined method`

当我最初进行设置时，我使用的是带有 RVM 的 gemset，但我试图通过删除 gemset 并仅使用 RVM 来管理 rubies 来简化事情。

当我跑步时，`bundle list`一切都在那里。所有的宝石都在`<app_root>/shared/bundle/ruby/1.9.1/gems/`

似乎它可能正在从其他位置加载宝石，例如原始宝石集，但我已将其删除。

其他一些细节，我用的是 Capistrano，当然是 Unicorn，我的`GEM_HOME=/home/deployer/.rvm/gems/ruby-1.9.3-p286`

让我知道我是否可以提供任何其他信息。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:53:31.340

如果您使用`bundle install --deployment`then 您还必须`bundle exec`在执行命令时为命令添加前缀，例如：

```
bundle exec rake db:migrate 
```

如果您使用`bundler/capistrano`集成，那么它会为您完成，`capistano`但在控制台中您需要`bundle exec`手动使用。

[RVM 使用ruby​​gems-bundler gem](https://github.com/mpapis/rubygems-bundler)帮助您避免它- 但您更改了 gemset，因此生成的包装器不再可用。您必须清理`<app_root>/shared/bundle/ruby/1.9.1/gems/`并`bundle install`再次运行以重新生成包装器以避免`bundle exec`再次输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T08:18:07.063

我有类似的问题。事实证明 Capistrano 没有正确重启独角兽。SSH 进入服务器并停止然后启动独角兽就完成了这项工作。现在要找到解决 Capistrano 恶作剧的方法……

# jquery - jQuery UI Autocomplete：如何存储项目而不仅仅是值？

> ID：15382719
> 
> 赞同：2
> 
> 时间：2013-03-13T10:29:16.220
> 
> 标签：jquery, jquery-ui, autocomplete

这是我的代码。您还可以观看[此 jsfiddle](http://jsfiddle.net/fU8hn/)进行现场演示。

```
$(function()
{
    var source = [{id:1, value: "One"},
                 {id:2, value: "Two"},
                 {id:3, value: "Three"},
                 {id:4, value: "Four"}];

    $("input").autocomplete({
        source: function(request, response)
        {
            var term = request.term.split(/,\s*/).pop();

            response($.ui.autocomplete.filter(source, term));
        },
        select: function(e, ui)
        {
            var terms = this.value.split(/,\s*/);

            terms.pop();
            terms.push(ui.item.value, "");

            this.value = terms.join(", ");

            return false;
        }
    });
}); 
```

如您所见，我已经实现了一个简单的多选。我的问题是，我不仅需要来自原始数据源的值，还需要它们的 ID。如何才能做到这一点？完成自动完成字段后，如何获取我选择的所有项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:49:08.687

看看这个[DEMO](http://jsfiddle.net/fU8hn/4/)链接，这将你代表选定的值和它在自动完成中的 id。

```
terms.push(ui.item.id+"="+ui.item.value, ""); 
```

我希望这会对你有更多帮助。

**编辑：**我已经更新了这个小提琴。

# javascript - 将一个值与另一个数组中的每个数组值进行比较

> ID：15382722
> 
> 赞同：0
> 
> 时间：2013-03-13T10:29:19.580
> 
> 标签：javascript

我有两个数组

```
var array1 = ['me','you','our'];
var array2 = ['us','they','all']; 
```

我有另一个数组

```
var arrayList = [array1, array2] 
```

现在我有一个值，我想将它与 arrayList 中每个数组的每个值进行比较。

我们怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:36:45.010

试试这个...

```
var yourValue;
for(var i=0;i<arrayList.length;i++)
{
   for(var j=0;j<arrayList[i].length;j++)
   {
      if(arrayList[i][j] == yourValue)
      {
         //
         //
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:35:06.960

```
var val='your value';
for(var i=0;i<arrayList.length;i++)
{
if(arrayList[i].indexOf(val)>-1){
// do something
// and break
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:35:17.993

循环`arrayList`然后使用[indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)。

```
var val = 'you';
for(var i = 0; i < arrayList.length; i++){
    if(arrayList[i].indexOf(val) !== -1){
        alert('match');
    }
} 
```

# powershell - 将“本机”对象传递给后台作业

> ID：15382728
> 
> 赞同：10
> 
> 时间：2013-03-13T10:29:37.030
> 
> 标签：powershell, scope, psobject

这是我想以一种或另一种方式实现的目标。

我有一个定义一些对象的自定义程序集。在我的脚本中，我创建了一个我想传递给脚本块的自定义对象，以保持该对象的行为。

```
Add-Type -AssemblyName MyCustomDLL

$global:object = new-object MyCustomDLL.MyCustomObject()
$object | gm

$jobWork = { param ($object) $object | gm } # I'd like to keep my object behavior in that block

$job = Start-Job -ScriptBlock $jobWork -ArgumentList $object
Wait-Job $job
Receive-Job $job 
```

我怎样才能做到这一点或达到相同的效果？谢谢你的帮助

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T13:43:41.437

`PowerShell`您可以使用 ,`BeginInvoke`代替后台作业`EndInvoke`。这是在“作业”中传递活动对象的简单但有效的示例，在那里更改它，得到结果：

```
# live object to be passed in a job and changed there
$liveObject = @{ data = 42}

# job script
$script = {
    param($p1)
    $p1.data # some output (42)
    $p1.data = 3.14 # change the live object data
}

# create and start the job
$p = [PowerShell]::Create()
$null = $p.AddScript($script).AddArgument($liveObject)
$job = $p.BeginInvoke()

# wait for it to complete
$done = $job.AsyncWaitHandle.WaitOne()

# get the output, this line prints 42
$p.EndInvoke($job)

# show the changed live object (data = 3.14)
$liveObject 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T11:25:53.957

后台作业建立在 PowerShell 远程处理之上，因此在传递对象时执行类似的操作。他们将对它们进行序列化/反序列化，而不是以其所有复杂性传递它们。

我的猜测是，获取复杂对象的唯一方法就是传递构造函数参数和/或操作，并*在*`-ArgumentList`作业中创建对象。

 *在这种情况下，添加组件也必须是工作的一部分：

```
Start-Job {
    param ($ConstructorArguments)
    Add-Type -AssemblyName MyCustomDll
    $object = New-Object MyCustomDll.MyCustomObject $ConstructorArguments
    $object | Get-Member
} -ArgumentList Foo, Bar | Wait-Job | Receive-Job 
```*

# c# - 从 silverlight 应用程序操作 txt 文件？

> ID：15382734
> 
> 赞同：0
> 
> 时间：2013-03-13T10:29:46.367
> 
> 标签：c#, silverlight, asynchronous, text-files, webclient

我正在尝试修改位于我的服务器上的 txt 文件，因为我正在使用此代码：

```
 WebClient webClientvent = new WebClient();
                webClientvent.OpenWriteCompleted += new OpenWriteCompletedEventHandler(Readvent);
                webClientvent.OpenWriteAsync(new Uri("/v.txt", UriKind.Relative));

private void Readvent(object sender, OpenWriteCompletedEventArgs e)
        {

            if (e.Error != null) {
                MessageBox.Show(e.Error.ToString());
            }
            WebClient webClient = (WebClient)sender;
            webClient.OpenWriteCompleted -= this.Readvent;
            Stream stream = e.Result;
            StreamReader monStreamReader = new StreamReader(stream);

            try
            {

                StreamWriter monStreamWriter = new StreamWriter(stream);

                monStreamWriter.WriteLine("first");
                monStreamWriter.WriteLine("second");

                monStreamWriter.Close();

            }
            catch (Exception ex)
            {

                MessageBox.Show(ex.ToString());
            } 

            } 
```

但是，这个 Txt 文件中没有写任何东西，我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:32:49.047

处理[WebClient.UploadProgressChanged 事件](http://msdn.microsoft.com/en-us/library/system.net.webclient.uploadprogresschanged%28v=vs.95%29.aspx)以及您还需要上传数据

```
webClientvent.UploadStringAsync(); 
```

# macos - 在 Cocoa 中回复 Apple 事件

> ID：15382736
> 
> 赞同：5
> 
> 时间：2013-03-13T10:29:53.420
> 
> 标签：macos, cocoa, appleevents, nsappleeventmanager

我正在使用 NSAppleEventManager 注册一个 Apple 事件处理程序：

```
[[NSAppleEventManager sharedAppleEventManager]
    setEventHandler:self andSelector:@selector(handleGetURLEvent:withReplyEvent:)
      forEventClass:kInternetEventClass andEventID:kAEGetURL]; 
```

我的处理程序方法当然会接收事件和回复事件：

```
- (void) handleGetURLEvent:(NSAppleEventDescriptor *)event withReplyEvent:(NSAppleEventDescriptor *)replyEvent {
    //Open this URL; reply if we can't
} 
```

所以，如果我需要回复一个错误，表明我以某种方式打开此 URL 失败，我应该如何使用`replyEvent`来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T13:21:00.950

我已将 Apple 遗留文档“Apple Events Programming Guide”中描述的旧式 C 过程 API 中的以下内容翻译为 Cocoa：

```
if ([replyEvent descriptorType] != typeNull)
{
    [replyEvent setParamDescriptor:[NSAppleEventDescriptor descriptorWithInt32:someStatusCode] forKeyword:keyErrorNumber];
    [replyEvent setParamDescriptor:[NSAppleEventDescriptor descriptorWithString:someErrorString] forKeyword:keyErrorString];
} 
```

[请参阅“Apple 事件编程指南”](https://developer.apple.com/legacy/mac/library/documentation/AppleScript/Conceptual/AppleEvents/responding_aepg/responding_aepg.html#//apple_ref/doc/uid/TP40001449-CH206-CEGFGBBG)（在 Legacy 库中）中的“返回错误信息”。

# jbpm - HornetQHTWorkItemHandler 无法解析为类型

> ID：15382738
> 
> 赞同：1
> 
> 时间：2013-03-13T10:30:02.410
> 
> 标签：jbpm

我正在尝试使用 jBPM 5.4，当我导入评估示例时出现错误。

**HornetQHTWorkItemHandler 无法解析为类型。**

我已经安装了所有提到的插件，但仍然无法摆脱这个错误。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:33:09.297

您的类路径中似乎缺少 jbpm-human-task-hornetq jar。

您是否使用 jbpm-installer 安装/设置您的 eclipse 环境？在这种情况下，jBPM 库应该引用 jbpm-installer/runtime 文件夹，该文件夹应该包含所有必要的 jar。

或者，如果您不使用安装程序，您可以只下载 jbpm-bin 工件并基于该文件夹创建一个 jBPM 运行时。

在这种情况下，从插件本身内部创建一个新的运行时将不起作用，因为它只包含帮助您入门的最基本的 jar，它不包括人工任务 jar。

克里斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T12:00:16.703

或者，`pom.xml`如果您使用的是 Maven，则可以将其添加到您的：

```
<dependency>
  <groupId>org.jbpm</groupId>
  <artifactId>jbpm-human-task-hornetq</artifactId>
  <version>5.4.0.Final</version>
</dependency> 
```

# c# - asp.net 单选按钮列表不会选择索引

> ID：15382739
> 
> 赞同：5
> 
> 时间：2013-03-13T10:30:03.400
> 
> 标签：c#, asp.net, radiobuttonlist, selectedindex

我有一个单选按钮列表...

```
 <asp:RadioButtonList ID="rblCollectOptions" runat="server" CssClass="radiolist">
            <asp:ListItem Value="Collect" Text="Collect from this address"></asp:ListItem>
            <asp:ListItem Value="DropOff" Text="Drop off at Depot (UK only)"></asp:ListItem>
        </asp:RadioButtonList> 
```

我在页面上还有一个链接按钮，用于“手动输入地址”，我想将单选按钮设置为“收集”值。

我试过了...

```
rblCollectOptions.SelectedIndex = 0; 
```

和

```
rblCollectOptions.Items[0].Selected = true; 
```

如果没有选择任何选项，两者都可以工作，但是如果我手动将单选按钮设置为另一个选项，或者设置默认选择，则链接按钮不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:31:11.337

在设置所选项目之前调用[ClearSelection](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.clearselection.aspx)或 set 。`SelectedIndex = -1`

```
rblCollectOptions.ClearSelection(); 
```

或者

```
rblCollectOptions.SelectedIndex = -1; 
```

# networking - 从新批处理文件中的 netstat -e 获取一些信息

> ID：15382742
> 
> 赞同：1
> 
> 时间：2013-03-13T10:30:07.310
> 
> 标签：networking, vbscript, batch-file

Hy，我想创建批处理文件以向用户显示有关已下载包和已上传包的信息。我可以从命令“netstat -e”获取此信息，并且可以使用“netstat -e >log.txt”将此信息保存在日志文件中。但我希望，在打开这个新的批处理文件时，该用户只能看到有关已下载和已上传包的信息，而不是来自此命令的所有信息，如下所示：

下载的包：来自netstat的-info -e-

上传的包：-info from netstat -e-

当用户打开此批处理时，是否可以从日志文件中剪切此信息并将其放入批处理文件中？打开批处理文件后，整个过程如下所示：-使用“netstat -e >log.txt”保存日志文件，-获取所需信息，-将此信息放入批处理文件，-现在用户看到此信息.

执行此操作的方法可以是任何方法，例如使用 cmd 和 VBS 或其他。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:35:50.740

如果您需要以更精细的方式处理和/或显示来自 netstat（或其他控制台工具）的信息，则可以更好地扩展 VBScript 版本：

```
 ' To simplify the regexp, I have stolen peter's idea of using find; %comspec% needed for |
  Dim sCmd : sCmd = "%comspec% /c netstat -e | find ""packet"""
  ' Shortened .Exec call; works for simple cases
  Dim sAll : sAll = CreateObject("WScript.Shell").Exec(sCmd).Stdout.ReadAll()
  WScript.Echo sAll

  Dim reCut : Set reCut = New RegExp
  reCut.Global  = True
  ' Just get all (4) numbers (non-empty sequences of digits)
  reCut.Pattern = "\d+"
  Dim oMTS : Set oMTS = reCut.Execute(sAll)

  ' Use .NET formatting for nice output
  Dim oSB : Set oSB = CreateObject("System.Text.StringBuilder")
  oSB.AppendFormat_4 _
       "Info from 'netstat -e:{0}{1,21}: {2,12:D}{0}{3,21}: {4,12:D}" _
     , Array( _
           vbCrLf _
         , "Packages received", CLng(oMTS(0).Value) + CLng(oMTS(2).Value) _
         , "Packages sent"    , CLng(oMTS(1).Value) + CLng(oMTS(3).Value) _
       )
  WScript.Echo oSB.ToString() 
```

输出：

```
Unicast packets              488836          264811
Non-unicast packets             650             652

Info from 'netstat -e:
    Packages received:       489486
        Packages sent:       265463 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:00:41.570

只需像这样通过 find 命令传递 netstat 的结果

```
netstat -e | find "Bytes" 
```

你仍然可以重定向到这样的文本文件

```
netstat -e | find "Bytes" > text.txt 
```

编辑：根据您的评论，更多可能性

无需单独的程序。您可以将带有注释的 2 个值通过管道传输到这样的测试或批处理文件。For /F 与 '' 之间的括号中的文本执行命令并让 For 解析结果。Tokens=2,3 跳过第一个结果（字节）并将另外两个放在单独的变量中

```
for /F "tokens=2,3" %a in ('netstat -e ^| find "Bytes"') do echo received:%a sent:%b>log.txt 
```

这给出了 log.txt

```
received:74546759 sent:8593498 
```

或者您可以将值设置为环境变量并批量使用它

```
for /F "tokens=2,3" %a in ('netstat -e ^| find "Bytes"') do set received=%a&set sent=%b 
```

设置然后

```
..
received=75230393
sent=8966725
.. 
```

或者您可以将值作为参数发送到这样的批处理

```
for /F "tokens=2,3" %a in ('netstat -e ^| find "Bytes"') do mybatch %a %b 
```

# ruby-on-rails - 延迟工作只是不工作

> ID：15382750
> 
> 赞同：3
> 
> 时间：2013-03-13T10:30:26.130
> 
> 标签：ruby-on-rails, mongoid, delayed-job

我正在构建一个应用程序，有时我需要将 fb 中的一堆数据与我的数据库同步，所以我（尝试）使用延迟作业将其推送到后台。这是我的延迟作业课程的一部分。

```
class FbSyncJob < Struct.new(:user_id)
  require 'RsvpHelper'

  def perform
    user = User.find(user_id)
    FbSyncJob.sync_user(user)
  end

  def FbSyncJob.sync_user(user)
    friends = HTTParty.get(
      "https://graph.facebook.com/me/friends?access_token=#{user.fb['token']}"
    )
    friends_list = friends["data"].map { |friend| friend["id"] }
    user.fb["friends"] = friends_list
    user.fb["sync"]["friends"] = Time.now
    user.save!
    FbSyncJob.friend_crawl(user)
  end
end 
```

随着`RsvpHelper`班级生活`lib/RsvpHelper.rb`。因此，在我的应用程序的某个时刻，我`Delayed::Job.enqueue(FbSyncJob.new(user.id))`与一个已知的有效用户通话。我设置的工人甚至告诉我工作已经成功完成：

`1 jobs processed at 37.1777 j/s, 0 failed`

但是，当我检查数据库中的用户时，他的朋友列表没有更新。我做错了什么还是什么？非常感谢您的帮助，这让我发疯了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T19:29:07.143

`Delayed::Job.enqueue`会在延迟的作业表中放一条记录，但是需要运行一个单独的进程来执行作业代码（perform方法）

通常在开发中是这样`bundle exec rake jobs:work`（注意：您必须在每次更改代码时重新启动此 rake 任务，它不会自动加载更改）

*   见[https://github.com/collectiveidea/delayed_job#running-jobs](https://github.com/collectiveidea/delayed_job#running-jobs)

我通常在开发时将以下内容放入我的延迟配置中 - 这永远不会在延迟作业表中放置记录并同步运行所有后台代码（在开发中），默认情况下，rails 将重新加载对代码的更改

`Delayed::Worker.delay_jobs = !(Rails.env.test? || Rails.env.development?)`

*   [https://github.com/collectiveidea/delayed_job#gory-details](https://github.com/collectiveidea/delayed_job#gory-details)（参见 config/initializers/delayed_job_config.rb 示例部分）

# android - 在 ViewPager 内设计一个 Horizo ntalScrollView 或使用片段：

> ID：15382753
> 
> 赞同：8
> 
> 时间：2013-03-13T10:30:38.083
> 
> 标签：android, android-layout, android-fragments, android-viewpager

我需要设计以下屏幕，我需要你的建议：

![在此处输入图像描述](../Images/194f4e3cad9dca415edae31a9ae378ec.png)

**解释：**

标题是静态的/固定的，我不需要对它做任何事情。

**黄色：**这是有趣的部分，我需要设计一个`ViewPager`可以左右滚动最多 4 个屏幕的类似屏幕。

**红色：**在每个屏幕中，如果不适合屏幕大小，我需要添加一个可以滚动的表格/网格。

**绿色：**可以使用屏幕底部的绿色按钮或滚动 来完成页面切换`ViewPager`。

**问题是：**这种行为可以使用 a`ViewPager`还是应该使用来实现`Fragments`？如果 Fragment 是要走的路，那么我将如何使用滑动手势实现页面切换？如果是，`ViewPager`那么如何添加内部滚动以及如何使用底部的按钮来控制它？

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T20:02:53.853

我认为这应该通过*Non Swipeable* `ViewPager`来解决。视图寻呼机*和*底层`Fragment`s 无法响应滑动手势。覆盖以禁用滑动的方法`ViewPager`是：

1.  [`onTouchEvent()`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#onTouchEvent(android.view.MotionEvent))- 返回`false`。
2.  [`onInterceptTouchEvent()`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#onInterceptTouchEvent(android.view.MotionEvent))- 返回`false`。

有关如何实现此目的的更多信息，请参阅[此 SO 问题。](https://stackoverflow.com/questions/9650265/how-do-disable-paging-by-swiping-with-finger-in-viewpager-but-still-be-able-to-s)

接下来，您希望`Fragment`在每个寻呼机持有人中使用 s。所以我们正在构建以下布局：

![](../Images/d6f03dad54d2a17c1c5a7c91d6449345.png)

在父活动`FragmentPagerAdapter`中实例化 a 并且您的选项卡添加了标签：

### 活动变化

```
@Override
protected void onCreate(final Bundle saveInstanceState) {
    final FragmentPagerAdapter myTabAdapter = new MyFragmentPagerAdapter(
            <Your ViewPager View>, <Your activity context, this>);
    myTabAdapter.addTab(getActionBar().newTab(), "YOUR TAG", "Your Title");
    // etc...
} 
```

所以这给了我们上图的框架。一个托管活动，包含一个`ViewPager`和基础选项卡。接下来是将`Fragment`s （包含您的表格）放入每个相应的选项卡中。这由`FragmentPagerAdapter`实现处理：

### 片段适配器（活动的内部类）：

```
private class MyFragmentPagerAdapter extends FragmentPagerAdapter implements
        ActionBar.TabListener, ViewPager.OnPageChangeListener {

    /**
     * Constructs a pager adapter to back a {@link ViewPager}.
     * 
     * @param pager
     *            The {@link ViewPager} widget.
     * @param activityContext
     *            The context the widget is being added under.
     */
    public SpotMenuFragmentPagerAdapter(final ViewPager pager,
            final Context activityContext) {
        super(getFragmentManager());
        pager.setAdapter(this);
        this.context = activityContext;
    }

    /**
     * Adds a tab to the hosting activity action bar.
     * 
     * @param newTab
     *            The tab to add.
     * @param tag
     *            The tab tag for id purposes.
     * @param label
     *            The label of the tab displayed to the user.
     */
    public void addTab(final ActionBar.Tab newTab, final String tag,
            final String label) {
        newTab.setTag(tag);
        newTab.setText(label);
        newTab.setTabListener(this);
        getSupportActionBar().addTab(newTab);
    }

    /**
     * This is where you do the work of building the correct fragment based
     * on the tab currently selected.
     * 
     * @see FragmentPagerAdapter#getItem(int)
     */
    @Override
    public Fragment getItem(final int position) {
        final Tab tab = getActionBar().getTabAt(position);
        if ("MY TAG".equals(tab.getTag().toString()) {
            // instantiate the fragment (table) for "MY TAG"
        } else {
            // instantiate something else...
        }
    }

    /**
     * One fragment per tab.
     * 
     * @see android.support.v4.view.PagerAdapter#getCount()
     */
    @Override
    public int getCount() {
        return getSupportActionBar().getTabCount();
    }

    /**
     * @see ViewPager.OnPageChangeListener#onPageScrollStateChanged(int)
     */
    @Override
    public void onPageScrollStateChanged(final int arg0) {
        // No-op.
    }

    /**
     * @see ViewPager.OnPageChangeListener#onPageScrolled(int, float, int)
     */
    @Override
    public void onPageScrolled(final int arg0, final float arg1,
            final int arg2) {
        // No-op.
    }

    /**
     * @see ViewPager.OnPageChangeListener#onPageSelected(int)
     */
    @Override
    public void onPageSelected(final int position) {
        getSupportActionBar().setSelectedNavigationItem(position);
    }

    /**
     * @see TabListener#onTabSelected(app.ActionBar.Tab,
     *      app.FragmentTransaction)
     */
    @Override
    public void onTabSelected(final Tab tab, final FragmentTransaction ft) {
        viewPager.setCurrentItem(tab.getPosition());
    }

    /**
     * @see TabListener#onTabUnselected(ActionBar.Tab,
     *      app.FragmentTransaction)
     */
    @Override
    public void onTabUnselected(final Tab tab, final FragmentTransaction ft) {
        // No-op.
    }

    /**
     * @see TabListener#onTabReselected(ActionBar.Tab,app.FragmentTransaction)
     */
    @Override
    public void onTabReselected(final Tab tab, final FragmentTransaction ft) {
        // No-op.
    }
} 
```

因此，希望到此为止，我们有一个托管“不可滑动”视图寻呼机的活动，以及一个在标题下方（或根据屏幕大小而定）以标签栏形式切换标签的机制。从这一点开始，我相信您可以自定义以用一些导航箭头替换标签栏。

*注意：*很多内容都是凭记忆写的，但希望我已经传达了我将如何处理的要点。

## 更新

针对更新的问题：您可以将选项卡设置为任何旧视图。相应地设置[TabSpec](http://developer.android.com/reference/android/widget/TabHost.TabSpec.html)。抱歉，我自己没有使用过这个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T17:10:18.440

您必须使用 Horizo​​ntalScrollView 它将包含一个 LinearLayout 而 Linear 将包含您的各个元素

XML 会看到类似这样的内容

```
 <HorizontalScrollView
        android:id="@+id/horizontal_scroll_parent"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:scrollbars="horizontal"
        android:scrollbarStyle="outsideInset">

       <LinearLayout android:id="@+id/content_scroll"
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                android:orientation="horizontal"
                android:gravity="center_vertical" />

</HorizontalScrollView> 
```

# java - 使用 Pattern&Matcher 返回不带标记的子字符串

> ID：15382756
> 
> 赞同：1
> 
> 时间：2013-03-13T10:30:38.440
> 
> 标签：java, regex

我想使用 Pattern 和 Matcher 将以下字符串作为多个变量返回。

```
 ArrayList <Pattern> pArray = new ArrayList <Pattern>();
    pArray.add(Pattern.compile("\\[[0-9]{2}/[0-9]{2}/[0-9]{2} [0-9]{2}:[0-9]{2}\\]"));
    pArray.add(Pattern.compile("\\[\\d{1,5}\\]"));
    pArray.add(Pattern.compile("\\[[a-zA-Z[^#0-9]]+\\]"));
    pArray.add(Pattern.compile("\\[#.+\\]"));
    pArray.add(Pattern.compile("\\[[0-9]{10}\\]"));
    Matcher iMatcher;
    String infoString = "[03/12/13 10:00][30][John Smith][5554215445][#Comment]";
    for (int i = 0 ; i < pArray.size() ; i++)
    {
        //out.println(pArray.get(i).toString());
        iMatcher = pArray.get(i).matcher(infoString);

        while (dateMatcher.find())
        {
                String found = iMatcher.group();
                out.println(found.substring(1, found.length()-1));
        }
    }
} 
```

程序输出：

```
[03/12/13 10:00]

[30]

[John Smith]

[\#Comment]

[5554215445] 
```

我唯一需要的是让程序不打印括号和 # 字符。我可以很容易地避免在循环内使用子字符串打印括号，但我无法避免 # 字符。# 只是字符串中的注释标识符。

这可以在循环内完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:42:28.580

这个怎么样？

```
public static void main(String[] args) {
    String infoString = "[03/12/13 10:00][30][John Smith][5554215445][#Comment]";
    final Pattern pattern = Pattern.compile("\\[#?(.+?)\\]");
    final Matcher matcher = pattern.matcher(infoString);
    while (matcher.find()) {
        System.out.println(matcher.group(1));
    }
} 
```

您只需要使`.+`非贪婪，它将匹配方括号之间的所有内容。然后，我们使用匹配组来获取我们想要的内容，而不是使用整个匹配模式，匹配组由 表示`(pattern)`。匹配匹配组之前的`#?`哈希，这样它就不会进入组。

使用 检索匹配组`matcher.group(1)`。

输出：

```
03/12/13 10:00
30
John Smith
5554215445
Comment 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T10:43:57.777

使用前瞻。即用积极的后视改变你所有的`\\[`（在你的正则表达式中）：

```
(?<=\\[) 
```

然后`\\]`用积极的前瞻来改变你所有的（在你的正则表达式中）：

```
(?=\\]) 
```

最终改变`\\[#`（在你的正则表达式中）积极的向后看：

```
(?<=\\[#) 
```

# php - 在 smarty 模板上使用 jquery 显示搜索结果

> ID：15382760
> 
> 赞同：0
> 
> 时间：2013-03-13T10:30:42.957
> 
> 标签：php, javascript, jquery, html, smarty

我正在尝试在`<div>`smarty 模板上显示搜索结果。搜索结果来自点击。

锚是这样的：

```
<li class="price-list-item"><a href="javascript:void();" class="price" onclick="searchRange(0,1000)">0-1000</a></li> 
```

searchRange 函数是这样的：

```
function searchRange(first, second) {    
    var first = first;
    var second = (second != null) ? second : first; 
    $("#ad-display").load("index.php?first="+first+"&second="+second+" #ad-display");
} 
```

所写的广告显示框`adlistdisplay.tpl`如下所示：

```
<div id="ad-display">
    <section id="add-list">
        <ul id="ad-list">
        {foreach from=$adverts key=k item=i name=ad_list}
            <li class="ad-list-item-{cycle values="odd,even"}" id="ad-{$i.aid}">
                <div class="ad-item-box">
                    <div class="ad-item-photo">
                        <a href="viewad.php?aid={$i.aid}"><img src="adimages/{$i.img}" width="80" height="80"></a>
                    </div>
                    <div class="ad-item-info">
                        <span class="ad-item-title"><a href="viewad.php?aid={$i.aid}">{$i.title}</a></span>
                        <span class="ad-item-desc">{$i.text|truncate:25}</span>
                        <span class="ad-item-price">Kr. {$i.price|number_format:2:",":"."}</span>
                    </div>
                </div>
            </li>  
        {/foreach}
        </ul>                            
    </section>
</div> 
```

在我的 index.php 我有这个代码：

```
$adverts = new Adverts();
$smarty->assign('catlist', $adverts->getcategories());
SmartyPaginate::assign($smarty);

if(isset($_GET["first"])) {
    $search = new SearchEngine();    
    $smarty->assign('adverts', $search->search_ads(null, "price", $_GET["first"], $_GET["second"]));    
} else {
    $smarty->assign('adverts', $adverts->listadverts());    
}

$smarty->display('index.tpl'); 
```

index.tpl 包含以下内容：

```
{include file="adlistdisplay.tpl"} 
```

当我单击顶部的锚点时，它只会在#ad-display 处显示一个空白点。不显示任何结果。我希望它显示 search_ads 函数的结果。它看起来像这样：

```
function search_ads($search_string = null, $type, $min_price = null, $max_price = null) {

        global $db;
        global $config;

        switch($type) {
            case "text":
                $search = 'text LIKE "%'. $search_string .'%"';
                break;
            case "price":
                $search = 'price > '. $min_price .' <= '. $max_price .'';
                break;
            case "headline":
                $search = 'title LIKE "%'. $search_string .'%"';
                break;
            default:
                $search = 'price BETWEEN '. $min_price .' AND '. $max_price .'';
                break;
        }

        $row = $db->dbh->query('SELECT ad.*, (SELECT img.image FROM '.$config->db_prefix.'_images img WHERE img.aid = ad.aid LIMIT 1) AS img FROM '.$config->db_prefix.'_adverts ad WHERE '. $search .' AND ad.approved = 1');        
        $row->setFetchMode(PDO::FETCH_ASSOC);
        return $row;
    } 
```

我创建了这个小提琴来展示我要实现的目标。这有点不同，但表明了我的意图

[http://jsfiddle.net/xeAkY/20/](http://jsfiddle.net/xeAkY/20/)

解决方案：

```
$search = 'price > '. $min_price .' AND price <= '. $max_price .''; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:52:28.163

解决方案发布在问题的底部

# android - 使用搜索栏更改 webview 字体大小

> ID：15382765
> 
> 赞同：0
> 
> 时间：2013-03-13T10:30:54.690
> 
> 标签：android, webview

`TextView`使用 seekbar 的*onProgressChanged()*事件可以轻松更改字体。但我无法对`WebView`.

但是在刷新/重新加载字体大小更改后。

不能这样做`TextView`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:56:33.887

您将必须访问 webview 设置对象并从那里更改文本值。

**对于 API 13 / ICS 之前的设备**：

你可以使用枚举来设置文本大小值，看看这里[TextSize](http://developer.android.com/reference/android/webkit/WebSettings.TextSize.html) 代码看起来像这样

```
webView.getSettings().setTextSize(TextSize.LARGE); 
```

对于**ICS 及更高版本**，您可以通过以下方式设置文本大小：

```
webView.setTextZoom(200); // % of text size . 
```

有关 webview 设置的更多信息，请查看此处：[WebSettings](http://developer.android.com/reference/android/webkit/WebSettings.html)

# asp.net - 制作C#时ASP的作用是什么

> ID：15382768
> 
> 赞同：-3
> 
> 时间：2013-03-13T10:31:03.407
> 
> 标签：asp.net

我在问你在 C# 上开发时 ASP 的目的是什么

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:43:16.360

“ASP.NET 是一种服务器端 Web 应用程序框架，专为 Web 开发而设计，用于生成动态网页。它由 Microsoft 开发，允许程序员构建动态网站、Web 应用程序和 Web 服务。”

以上简介来自描述 ASP.NET 是什么的 Wikipedia。但是，如果您询问的是经典 ASP，那么现在很少使用它，主要是因为它的安全性弱点和缺乏功能。

**C#**是一种 Microsoft .Net 语言，可用于可以使用 Web 服务但在台式机或独立计算机上运行的桌面应用程序。**C# 翻译成本地机器代码，因此在本地运行**

**上面描述的ASP.NET**是一个 Web 应用程序框架，它在 Web 开发环境中使用**C#的编程能力。****在 ASP.NET 中，C# 代码位在服务器端被处理为纯 HTML/XHTML 并传输到客户端浏览器进行显示。C# 提供了一些工具来完成 HTML 和任何客户端脚本语言（如 JavaScript）无法完成的任务。**

虽然 C# 主要是开发人员的首选语言，但 ASP.NET 可以使用任何 CLR（公共语言运行时）编程语言，如 VB.Net、F# 等。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:34:56.437

ASP 用于生成网页，可以单独使用，也可以通常与 .Net 语言一起使用来做一些聪明的事情。C# 可以与 ASP .Net 一起使用，但也可以在 Windows 或其他独立应用程序中单独使用。ASP 包含服务器标签，可以从代码中控制以动态更改网页的内容。它看起来有点像 HTML，但标签名称不同。例子：

```
<asp:Label ID="Label2" runat="server">Package details</asp:Label> 
```

# asp.net-mvc - 访问公共变量中的私有变量

> ID：15382771
> 
> 赞同：1
> 
> 时间：2013-03-13T10:31:12.160
> 
> 标签：asp.net-mvc, constants, private, public

我正在 mvc3 上建立一个站点（并且喜欢新语法！）。我正在使用常量创建电子邮件功能。但是，我对使用公共属性/常量感到茫然。我知道使用 WebForms 我们可以在后面的代码中添加一个公共属性。但我正在努力做到这一点。

```
 public const string ImportantNoticeForEmployers =
            @"<span style=""font-size:12px;line-height:1.5"">" +
            @"<b>Important Notice for Employers<b><br><br>" +
            @"The Information on xxxxxxxxxxx<br><br>" +
            @"</span>";

  private const string EmployerDisclaimer =
           @"<span style=""font- size:13px;font-family:arial,sans serif;line-height: 1.5"">" +
           @"<b>::Disclaimer::</b><br><br> " +
           @"By your positive acts of registering on xxxxxx.Login details are required to delete the account)" +
           @"</span"; 
```

我必须将这个私有方法称为每个公共方法。谁能帮我这个？提前致谢。

# python - 在python中解析字符串

> ID：15382773
> 
> 赞同：0
> 
> 时间：2013-03-13T10:31:19.263
> 
> 标签：python, regex, string, parsing

我正在尝试在 python 中解析以下两个字符串：

这是第一个字符串

```
s1="< one > < two > < three > here's one attribute < six : 10.3 > < seven : 8.5 > < eight : 90.1 > < nine : 8.7 >" 
```

我需要一个 re 以便我可以将上面的内容拆分并存储在这样的列表中，其中下面新行中的每个项目都是列表中特定索引处的元素：

```
0 one    
1 two 
2 three
3 here's one attribute
4 six : 10.3
5 seven : 8.5
6 eight : 90.1
7 nine : 8.7 
```

这是第二个字符串

```
s2="<one><two><three> an.attribute ::" 
```

同样，我需要存储在这样的列表中的项目：

```
0 one
1 two
2 three
3 an.attribute 
```

**这是我到目前为止所尝试的**，这是我从我在 Stack Overflow 上发布的另一个问题中得到的答案。

```
res = re.findall('< (.*?) >', s1)
pprint(res)
index=0
for index in res:
    print index 
```

但这会跳过“这是一个属性”

输出：

```
['one', 'two', 'three', 'six : 10.3', 'seven : 8.5', 'eight : 90.1', 'nine : 8.7']
one
two
three
six : 10.3
seven : 8.5
eight : 90.1
nine : 8.7 
```

谁能帮帮我？=)

如果有人知道如何从第一个字符串中提取 10.3、8.5、90.1 和 8.7 等字符串中的数值，那也太好了 =)

**编辑**：邓肯我试过你的代码，但我似乎没有得到我应该得到的输出。我假设我在某处犯了某种错误。你能告诉我它是什么吗？

```
from __future__ import generators
from pprint import pprint
s2="<one><two><three> an.attribute ::"
s1="< one > < two > < three > here's one attribute < six : 10.3 > < seven : 8.5 > <   eight : 90.1 > < nine : 8.7 >"
def parse(s):
    for t in s.split('<'):
        for u in t.strip().split('>',1):
            if u.strip(): yield u.strip()

list(parse(s1))
list(parse(s2))
pprint(s1)
pprint(s2) 
```

这是我得到的输出：

```
"< one > < two > < three > here's one attribute < six : 10.3 > < seven : 8.5 > < eight : 90.1 > < nine : 8.7 >"
'<one><two><three> an.attribute ::' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:42:50.867

这得到了所有的东西，我相信你可以添加一些 if 语句和调整以获得所需的确切输出

```
c = 0
m=re.compile('< (\w+) (: ([\d.]+))* *> ([^<]*)')
for r in m.finditer(s1):
    c = c + 1
    (tag,junk,number,attribute)=r.groups()
    print c, attribute 
```

编辑：更多解释

re.compile 行准备了一个正则表达式以供使用 要分解此正则表达式的作用，首先您必须了解 ( ) 圆括号标记最终将出现在结果中的项目 (r.groups())

所以表达式 < (\w+) 意味着找到一个 <，然后是一个空格，然后开始一个捕获组捕获组包含一个或多个“单词字符”，比如 a 到 z

这就是找到标签的方式

下一位是 (: ([\d.]+))* 再次启动一个捕获组，然后必须存在一个 : ，然后是另一个捕获组，它们被允许在彼此内部。方括号 [] 定义了一个字符类，而 \d 是数字的匹配项。这 。在这种情况下只是一个点！因此该类将匹配任何数字或点 + 表示“1 或多个前一个表达式”，因此它是一个或多个数字或点。这是为了得到号码。最后，在圆括号关闭捕获组之后，有一个星号 * 这意味着捕获前面表达式的零个或多个。这具有使前一组成为可选的效果。并非所有标签都有编号。

我将在那里停止对正则表达式的解释。有很多很好的资源可用于学习如何构建正则表达式

查找器只是在字符串上重复正则表达式并从中找到匹配项

该表达式`(tag,junk,number,attribute)=r.groups()`表示将列表结果（r.group）复制到各个变量标签、垃圾、数字和属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:14:41.957

这是一个根本不使用正则表达式的快速解决方案：

```
def parse(s):
    for t in s.split('<'):
        for u in t.strip().split('>',1):
            if u.strip(): yield u.strip()

>>> list(parse(s1))
['one', 'two', 'three', "here's one attribute", 'six : 10.3', 'seven : 8.5', 'eight : 90.1', 'nine : 8.7']
>>> list(parse("<one><two><three> an.attribute ::"))
['one', 'two', 'three', 'an.attribute ::']

>>> from pprint import pprint
>>> pprint(list(parse(s1)))
['one',
 'two',
 'three',
 "here's one attribute",
 'six : 10.3',
 'seven : 8.5',
 'eight : 90.1',
 'nine : 8.7'] 
```

你甚至可以把它写成一个单一的列表理解，但我不推荐它：

```
>>> [ u.strip() for t in s1.split('<') for u in t.strip().split('>',1) if u.strip() ]
['one', 'two', 'three', "here's one attribute", 'six : 10.3', 'seven : 8.5', 'eight : 90.1', 'nine : 8.7'] 
```

# ruby-on-rails - 识别导致大量导入错误的有问题的数据行

> ID：15382776
> 
> 赞同：0
> 
> 时间：2013-03-13T10:31:20.723
> 
> 标签：ruby-on-rails, ruby, utf-8, activerecord-import

我正在使用 activerecord-import 将 .csv 文件中的一堆数据批量插入到我的 rails 应用程序中。不幸的是，当我在我的模型上调用 import 时出现错误。

```
ArgumentError (invalid byte sequence in UTF-8) 
```

我知道问题是我在导入的 1000 多行数据中有一个带有奇怪字符的字符串，但我不知道哪一行是问题所在。

activerecord-import 是否有任何内置的错误处理，我可以用来确定哪些行/行有问题（例如，在我的模型上调用导入函数时我可以设置的一些选项）？据我所知，答案是否定的。

或者，我是否可以编写一些代码来检查我传递给 activerecord-import 的数组，以确定哪些行的字符串在 UTF-8 中无效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:34:05.740

看不到数据，只能猜测。很可能，您的字符组合不是 UTF-8 有效的。

你应该能够检查你的文件

```
iconv -f utf8 <filename> 
```

# c# - Automapper 2 - 将实体展开为 VM

> ID：15382781
> 
> 赞同：2
> 
> 时间：2013-03-13T10:31:31.230
> 
> 标签：c#, asp.net-mvc-4, automapper, automapper-2

我有一个平面 POCO 实体和一个结构化视图模型（用于使用自定义 EditorFor 助手呈现表单）。

Automapper 2 中有没有更简单的方法来做这样的事情：

```
cfg.CreateMap<TelcoDemand, TelcoDemandViewModel>()
.ForMember(d => d.Person, opt => opt.ResolveUsing(s => new PersonViewModel
    {
        FirstName = s.PersonFirstName,
        LastName = s.PersonLastName,
        Phone = s.PersonPhone,
        Email = s.PersonEmail
    }))
.ForMember(d => d.AddressContact, opt => opt.ResolveUsing(s => new AddressViewModel
    {
        City = s.AddressContactCity,
        HouseNumber = s.AddressContactHouseNumber,
        Street = s.AddressContactStreet,
        Zip = s.AddressContactZip
    }))
.ForMember(d => d.AddressCourier, opt => opt.ResolveUsing(s => new AddressViewModel
    {
        City = s.AddressCourierCity,
        HouseNumber = s.AddressCourierHouseNumber,
        Street = s.AddressCourierStreet,
        Zip = s.AddressCourierZip
    }))
.ForMember(d => d.Address, opt => opt.ResolveUsing(s => new AddressViewModel
    {
        City = s.AddressCity,
        HouseNumber = s.AddressHouseNumber,
        Street = s.AddressStreet,
        Zip = s.AddressZip
    })) 
```

我想要实现的是将人员和地址字段展开为视图模型，然后使用 EditorFor 进行渲染。

将其展平回数据库效果很好，但我无法按照惯例让展平工作......

**编辑**

我还有一个在这里使用的 IgnoreAllUnexisting 扩展，它是这样实现的：

```
public static IMappingExpression<TSource, TDestination> IgnoreAllNonExisting<TSource, TDestination>(this IMappingExpression<TSource, TDestination> expression)
{
    var sourceType = typeof(TSource);
    var destinationType = typeof(TDestination);
    var existingMaps = Mapper.GetAllTypeMaps().First(x => x.SourceType == sourceType && x.DestinationType == destinationType);
    foreach (var property in existingMaps.GetUnmappedPropertyNames())
    {
        expression.ForMember(property, opt => opt.Ignore());
    }
    expression.ForAllMembers(opt => opt.Condition(src => !src.IsSourceValueNull));
    return expression;
} 
```

无论如何，我也尝试了没有那个扩展名，结果是一样的——复杂类型中的一堆空值。

# android - 删除/删除项目后使用多种视图类型刷新 listView

> ID：15382782
> 
> 赞同：3
> 
> 时间：2013-03-13T10:31:32.197
> 
> 标签：android, listview, adapter, baseadapter

我有`ListView`一个自定义适配器，它扩展`BaseAdapter`并具有 2 种视图类型。当我运行我的`adapter.removeRow(position)`方法时，适配器的数据已正确更新，并且列表反映了这一点，但视图类型未正确更新。适配器由

`ArrayList<Map<String, String>> rows = new ArrayList<Map<String, String>>();`

我有一个子集

`List<Integer> flashSet = new ArrayList<Integer>();`

这是 ViewType 1 的所有位置的列表（与标准视图类型 0 相对）。

这是我的适配器`removeRow(position)`方法：

```
 public void removeRow(int position) {
        if (getItemViewType(position) == TYPE_FLASH) {
            flashSet.remove(position);
        }
        for (int flashPosition:flashSet) {
            System.out.println(tag+"is "+flashPosition+" going to be moved?");
             if (flashPosition > position) {
                 flashPosition -= 1;
                 System.out.println(tag+"Yes! It's been moved to "+flashPosition);
             }
        }
        rows.remove(position);
        notifyDataSetChanged();
    } 
```

这是我的`getView`方法：

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        FlashHolder flashHolder;
        ClipHolder clipHolder;
        int type = getItemViewType(position);
        if (convertView == null) {
            if (type == TYPE_CLIP) {
                convertView = rowInflater.inflate(R.layout.clip_note_row_layout, null);
                clipHolder = new ClipHolder();
                flashHolder = null;
                clipHolder.textView = (TextView)(convertView.findViewById(R.id.clip_text));
                convertView.setTag(clipHolder);
            } else {
                convertView = rowInflater.inflate(R.layout.flash_row_layout, null);
                clipHolder = null;
                flashHolder = new FlashHolder();
                flashHolder.front = (TextView)(convertView.findViewById(R.id.flash_text));
                flashHolder.back = (TextView)(convertView.findViewById(R.id.clip_text));
                convertView.setTag(flashHolder);
            }
        } else {
            if (type == TYPE_CLIP) {
                clipHolder = (ClipHolder)convertView.getTag();
                flashHolder = null;
            } else {
                clipHolder = null;
                flashHolder = (FlashHolder)convertView.getTag();
            }
        }
        if (type == TYPE_CLIP) {
            clipHolder.textView.setText(rows.get(position).get("clip"));
        } else {
            flashHolder.front.setText(rows.get(position).get("flash_text"));
            flashHolder.back.setText(rows.get(position).get("clip"));
        }
        return convertView;
    } 
```

我知道我可以创建一个新的`adapter`，给它更新`ArrayList`并调用`listView.setAdapter(adapter)`，但是当我只是试图从一个可能很长的列表中删除一个项目时，这似乎完全是矫枉过正。删除前后见图片： ![前](../Images/4a5fb7dd227cc36ef7500830dafb6c11.png)

然后我删除第一个项目。单词“which”隐藏在“Let's watch it”项后面，现在“inspired by…”项隐藏在空白项 3 后面。

![后](../Images/bf8fe11ccf37dda9654df7fed89b52c3.png)

所以，数据在更新，视图类型没有。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:03:24.697

我想到了。这对任何人都没有用，因为我不希望其他人犯同样的错误。

我天真地认为通过这样做

```
 for (int flashPosition:flashSet) {
        System.out.println(tag+"is "+flashPosition+" going to be moved?");
         if (flashPosition > position) {
             flashPosition -= 1;
             System.out.println(tag+"Yes! It's been moved to "+flashPosition);
         }
    } 
```

我正在更改存储在`List<Integer> flashSet = new ArrayList<Integer>();`

实际上，我需要执行以下操作：

```
for (int flashPosition:flashSet) {
    System.out.println(tag+"is "+flashPosition+" going to be moved?");
     if (flashPosition > position) {
         flashSet.remove((Object)flashPosition);
         flashPosition -= 1;
         flashSet.add(flashPosition);
         System.out.println(tag+"Yes! It's been moved to "+flashPosition);
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:34:26.160

试试这个，删除或添加项目后，您需要调用适配器刷新。

```
Youradapter.notifyDataSetChanged(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:35:07.857

采用`yourlistview.invalidateViews()`

代替

```
notifyDataSetChanged(); 
```

这个对我有用。

# jakarta-ee - 字符串的 JAX-WS 可空模式验证似乎不起作用

> ID：15382783
> 
> 赞同：0
> 
> 时间：2013-03-13T10:31:35.757
> 
> 标签：jakarta-ee, jaxb, jax-ws, cxf, wsdl2java

我有 apache CXF wsdl2java 工具生成的 java 代码。我通过设置打开模式验证：

```
<jaxws:properties>
    <entry key="schema-validation-enabled" value="true" />
</jaxws:properties> 
```

在 .wsdl 文件中，我有这些元素：

```
<s:element minOccurs="1" maxOccurs="1" nillable="false" name="propertyName" type="s:string"/> 
```

他们正在研究：

```
@XmlElement(name = "ServiceSeq", required = true, nillable = false)
protected String propertyName; 
```

但是当我发送包含以下内容的 XML 时：

```
<abc:propertyName></abc:propertyName> 
```

它通过了验证，并且映射为空字符串。我不希望有空字符串。我希望这种请求不要通过验证。JAX-WS 是否提供这种验证？如果是 - 那么如何打开它？如果不是 - 编写我自己的代码以拒绝此类请求的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:32:00.633

唯一的方法是定义类似于以下的元素：

```
<element minOccurs="1" maxOccurs="1" nillable="false" name="propertyName">
    <simpleType>
      <restriction base="string">
        <minLength value="1"/>
      </restriction>
    </simpleType>
</element> 
```

将其标记为字符串中至少需要 1 个字符。

# knockout.js - 淘汰赛“如果绑定”不起作用

> ID：15382788
> 
> 赞同：9
> 
> 时间：2013-03-13T10:32:02.343
> 
> 标签：knockout.js, viewmodel

使用 Chrome 进行调试时，我可以看到 CoverPrices 有 9 个元素。foreach 循环实际上运行良好，表格看起来正确，第一个跨度正确绑定到 Item1。

但是，if 绑定不起作用，两个图像都会显示。然而，Item2 中的所有元素都具有真实值，因此应该只显示第一个图像。

```
<!-- ko foreach: CoverPrices -->
    <tr>
        <td>
            <span data-bind="text: Item1"></span>
        </td>
        <!-- ko foreach: Item2 -->
        <td>
            <img src="~/Images/yes.png" alt="oui" data-bind="if: $data" /> 
            <img src="~/Images/no.png" alt="non" data-bind="ifnot: $data" /> 
        </td>
        <!-- /ko -->
    </tr>
    <!-- /ko --> 
```

我的装订有问题吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-13T10:39:45.450

`if-binding`不会影响整个元素，但会影响其*内容*。并且因为`img`元素没有内容，所以绑定无关紧要。

这将`span` 作为容器元素起作用：

```
<span data-bind="if: $data"><img src="~/Images/yes.png" alt="oui" /></span>
<span data-bind="ifnot: $data"><img src="~/Images/no.png" alt="non" /></span> 
```

如果您不想要其他元素，还有一种无[容器语法：](http://knockoutjs.com/documentation/if-binding.html)

```
<!-- ko if: $data -->
    <img src="~/Images/yes.png" alt="oui" />
<!-- /ko -->
<!-- ko ifnot: $data -->
    <img src="~/Images/no.png" alt="non" />
<!-- /ko --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-09T18:13:04.513

图像未绑定到 DOM，但图像正在加载。您可以检查网络流量。如果使用绑定，则不应加载

# templates - 是否可以在 vhdl 中有泛型类型？

> ID：15382791
> 
> 赞同：4
> 
> 时间：2013-03-13T10:32:10.840
> 
> 标签：templates, generics, type-conversion, vhdl, procedure

VHDL中有没有办法拥有泛型类型？因此，例如我想调用一个过程，但我不确定我想作为参数给出的信号类型是什么，是否可以将参数声明为泛型？就像在 C++ 中一样，您将使用模板。

```
procedure eq_checker(name : string; sig : ANYTHING); should : ANYTHING; at : time) is
  if (at = now) then
    if sig = should then
      report "has same value" severity note;
    else
      report "has not same value" severity note;
    end if;
  end if;
end checker; 
```

至少应该可以使用不同的信号类型作为“sig”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T11:07:50.440

Peter Ashenden 和 Jim Lewis 的书“VHDL-2008 - Just the new stuff”以

> 第 1 章：增强泛型
> 1.1 泛型类型

因此，如果您的工具正确支持 VHDL-2008，您现在可以声明泛型类型，并且可以在子程序（不仅仅是实体）上声明泛型。

如果它们遵循 Ada 模型，则在您第一次编译它们时会检查泛型，而不是在您实例化它们时，因此任何编译的实例化都将起作用，这与 C++ 模板的情况不同，在 C++ 模板中，错误可能会潜伏多年，直到您以特定方式实例化它们（因为 C++ 模板比真正的通用元编程更接近宏）

示例：未经测试，但在上述书籍的第 17 页上编写了以下示例...

```
procedure eq_checker
         generic  (type ANYTHING) 
         parameter(name : string; sig,should : ANYTHING; at : time) is
begin
  if (at = now) then
    if sig = should then
      report "has same value" severity note;
    else
      report "has not same value" severity note;
    end if;
  end if;
end procedure eq_checker; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:41:12.143

如果您在编写程序时不知道类型，则可以使用子类型。您总是可以在合成之前更改子类型。好的，这只是“有点通用”，但仍然......它可能看起来像这样：

```
PACKAGE generics_pkg IS
-- type definition
subtype data_type is integer;

-- instantiation
COMPONENT generics IS
PORT(
    i: IN data_type;
    ii : in data_type;
    o: OUT std_logic    
);
END COMPONENT;

-- procedure
procedure comp (    signal x,y: in data_type; 
                    signal o: out std_logic);

END PACKAGE generics_pkg;

package body generics_pkg is
procedure comp (    signal x,y: in data_type; 
                    signal o: out std_logic) is
begin
    if x = y then
        o<='1';
        report "same value" severity note;
    else
        o<='0';
        report "not same value" severity note;
    end if;
end procedure comp; 
```

# angularjs - 保存成功 AngularJS 后按 ID 更新特定 $scope

> ID：15382793
> 
> 赞同：1
> 
> 时间：2013-03-13T10:32:17.297
> 
> 标签：angularjs, angularjs-directive, angular-ui, angularjs-scope

在这种情况下，有谁知道如何在 $scope.list 成功发送一个发布请求到重新检查它再次查询并重新加载所有 DOM 的服务后，使用下面的代码更新具有特定“id”的 $scope.list。我想知道我们如何才能只对特定元素进行更改。谢谢！

```
function TrackingList($scope, List, Recheck) {

    $scope.list = List.query();

    $scope.update = function(id) {
        Recheck.save({id: id}, function(){
            $scope.list = List.query();
        });
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:20:32.803

@mark-rajcok 是正确的，没有必要重新查询您的列表。您的宁静服务应该返回包含更新的对象。它应该与您的 Recheck 对象的结构相匹配。除非您有其他事情要做，否则您的成功功能是不必要的。

# asp.net - 如何在asp.net中制作登录页面？

> ID：15382800
> 
> 赞同：-6
> 
> 时间：2013-03-13T10:32:41.087
> 
> 标签：asp.net, sql-server

我在一个项目中工作，我有一个员工注册页面，员工可以在其中注册自己并选择他们的用户 ID 和密码，这些用户 ID 和密码保存在 SQL 数据库中。我想使用该用户 ID 和密码登录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T11:17:04.590

好吧，在我开始之前，让我们谈谈我将不得不做出的假设，因为您在问题中几乎没有提供任何信息。请记住，我必须做出这些假设，这样我才能提供某种答案。

## 数据库模式

我将假设数据库模式看起来像这样：

```
... TABLE users (
    userid INT PRIMARY KEY IDENTITY (1, 1),
    username VARCHAR(50),
    password VARCHAR(50)
) 
```

## 网页表格

我将假设 Web 表单可能看起来像这样：

```
<asp:TextBox ID="username" runat="server" />
<asp:TextBox ID="password" runat="server" />
<asp:Button ID="login" Text="Login" runat="server" /> 
```

好的，既然我已经做出了一些假设，那么您将如何使用我所做的假设来做到这一点。首先，我们将连接`Click`事件：

```
<asp:Button ID="login" Text="Login" runat="server" OnClick="LoginUser" /> 
```

然后我们需要后面代码中的事件处理程序：

```
public void LoginUser(object sender, EventArgs e)
{
    SqlConnection cn = new SqlConnection(connectionString);
    cn.Open();

    DataTable dt = new DataTable();
    SqlDataAdapter sda = new SqlDataAdapter("SELECT * FROM users WHERE username = @username AND password = @password", cn);

    using (cn)
    {
        sda.SelectCommand.Parameters.AddWithValue("@username", this.username.Text);
        sda.SelectCommand.Parameters.AddWithValue("@password", this.password.Text);

        sda.Fill(dt);

        if (dt.Rows.Count == 0)
        {
            // do something here, like show a label stating that the username
            // and password combination didn't match

            return;
        }

        // if you get here then it was a valid login
    }
} 
```

## 安全

我在示例中又做了一个假设，为了简单起见，我在数据库中没有加密密码。你应该。但是，如果您还没有，您可以在将其放置到位时添加到此示例中。

# windows - 通过批处理命令替换字符直到文件中的固定位置

> ID：15382803
> 
> 赞同：0
> 
> 时间：2013-03-13T10:32:46.963
> 
> 标签：windows, for-loop, batch-file, cmd, command

我有一个文件。包含以下值

```
E:\ABC\XYZ1\1231\AAA\SSS\name1.sql
E:\ABC\XYZ2\1232\AAA\TTT\name2.sql
E:\ABC\XYZ3\1233\AAA\UUU\name3.sql
E:\ABC\XYZ4\1234\AAA\YYY\name4.sql
E:\ABC\XYZ5\1235\AAA\ZZZ\name5.sql 
```

我必须重新排列这些值，比如

```
@SSS\name1.sql
@TTT\name2.sql
@UUU\name3.sql
@YYY\name4.sql
@ZZZ\name5.sql 
```

（编辑 - 改进的格式）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:42:43.090

试试这个（更改输入文件的名称）：

```
@echo off &setlocal enabledelayedexpansion
set "fname=test.txt"
for /f "delims=" %%i in (%fname%) do (
    set "fname=%%~nxi"
    set "fpath=%%~dpi"
    set "fpath=!fpath:~0,-1!
    for %%j in (!fpath!) do set "fpath=%%~nxj"
    echo @!fpath!\!fname!
)
endlocal 
```

.. 如果路径结构始终相同，请使用命令行：

```
for /f "tokens=6,7delims=\" %i in (test.txt) do @echo @%i\%j 
```

# php - 从 jQuery 获取 Data-dir 值并将其传递给 PHP

> ID：15382804
> 
> 赞同：-1
> 
> 时间：2013-03-13T10:32:47.420
> 
> 标签：php, jquery, html, sql

我正在处理一个我无法弄清楚的问题。

我正在为我的网站创建一个菜单，我从数据库中获取所有值。我有四个项目：“Nintendo”、“Playstation”、“XBOX”和“PC”。他们每个人都有一个唯一的ID。单击其中一项时，我想取回该唯一ID。

使用这段代码可以在我的网站上打印出我的值：

```
echo "<ul class=\"main_menu\">"; 

            while($names = $get_category_names->fetch_object())
            {
                echo "<li data-dir=" . $names->id . ">" . $names->name . "</li>";

            }

                echo "</ul>"; 
```

“li data-dir = names”部分未按预期工作。我在 jquery 中 console.log 我的值，但我得到了相同的 ID，即 1。但是，当我检查 Firebug 时，我发现我确实得到了我想要的，但这可能是因为 HTML 计算了 4 个 li 元素：

```
<li data-dir="1">Nintendo</li>
<li data-dir="2">Playstation</li>
<li data-dir="3">Xbox</li>
<li data-dir="4">PC</li> 
```

这是我的jQuery代码：

```
$(document).ready(function()
{

    var main_menu = $('ul.main_menu');
    var sub_menu = $('ul.sub_menu');

    sub_menu.hide();

    var find_li = main_menu.find('li');

    main_menu.on('click', function()
    {
        //sub_menu.fadeIn(200);
        find_li.data('dir');
        console.log(find_li.data('dir'));

    })

}); 
```

谁能指出我正确的方向？

谢谢一堆。

编辑：这个问题的解决方案如下。我对代码的理解不够好，无法查看正确的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:38:50.067

你`find_li`是`li`s 的列表，这可能是数据不起作用的原因

如果您尝试这样的事情，它应该可以工作：

```
var lis = main_menu.find('li');

lis.click(function()
{
    //sub_menu.fadeIn(200);
    var dir = $(this).data('dir');
    console.log(dir);

}) 
```

# python - 如何从列表列表中制作有序字典？

> ID：15382807
> 
> 赞同：6
> 
> 时间：2013-03-13T10:32:49.677
> 
> 标签：python, list, dictionary, python-2.7, ordereddictionary

问题是：拥有一个名称列表和一个列表列表，如何创建一个列表，其中每个项目都是一个有序字典，名称为键，列表中的项目为值？从下面的代码可能会更清楚：

```
from collections import OrderedDict

list_of_lists = [
                ['20010103', '0.9507', '0.9569', '0.9262', '0.9271'],
                ['20010104', '0.9271', '0.9515', '0.9269', '0.9507'],
                ['20010105', '0.9507', '0.9591', '0.9464', '0.9575'],
                ]

names = ['date', 'open', 'high', 'low', 'close'] 
```

我想得到：

```
ordered_dictionary = [
                     OrderedDict([('date', '20010103'), ('open', '0.9507'), ('high', '0.9569'), ('low', '0.9262'), ('close', '0.9271')]),
                     OrderedDict([('date', '20010104'), ('open', '0.9271'), ('high', '0.9515'), ('low', '0.9269'), ('close', '0.9507')]),
                     OrderedDict([('date', '20010105'), ('open', '0.9507'), ('high', '0.9591'), ('low', '0.9464'), ('close', '0.9575')]),
                     ] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T10:37:18.687

用于[`zip()`](http://docs.python.org/2/library/functions.html#zip)组合名称和值。使用列表理解：

```
from collections import OrderedDict

ordered_dictionary = [OrderedDict(zip(names, subl)) for subl in list_of_lists] 
```

这使：

```
>>> from pprint import pprint
>>> pprint([OrderedDict(zip(names, subl)) for subl in list_of_lists])
[OrderedDict([('date', '20010103'), ('open', '0.9507'), ('high', '0.9569'), ('low', '0.9262'), ('close', '0.9271')]),
 OrderedDict([('date', '20010104'), ('open', '0.9271'), ('high', '0.9515'), ('low', '0.9269'), ('close', '0.9507')]),
 OrderedDict([('date', '20010105'), ('open', '0.9507'), ('high', '0.9591'), ('low', '0.9464'), ('close', '0.9575')])] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-07T03:26:43.243

我知道这个问题已经很老了，但我想我会建议一个`namedtuple`解决方案作为 OrderedDict 的替代方案，在这种情况下效果很好：

```
from collections import namedtuple

Bar = namedtuple('Bar', ['date', 'open', 'high', 'low', 'close'])

bars = [Bar(date, o, h, l, c) for date, o, h, l, c in list_of_lists]

>>> bars
[Bar(date='20010103', open='0.9507', high='0.9569', low='0.9262', close='0.9271'),
 Bar(date='20010104', open='0.9271', high='0.9515', low='0.9269', close='0.9507'),
 Bar(date='20010105', open='0.9507', high='0.9591', low='0.9464', close='0.9575')]

>>> bars[2].date
'20010105'

>>> bars[2].close
'0.9575' 
```

更好的是，可以使用以日期为键的字典理解：

```
Bar = namedtuple('Bar', ['open', 'high', 'low', 'close'])

bars = {date: Bar(o, h, l, c) for date, o, h, l, c in list_of_lists}

>>> bars
{'20010103': Bar(open='0.9507', high='0.9569', low='0.9262', close='0.9271'),
 '20010104': Bar(open='0.9271', high='0.9515', low='0.9269', close='0.9507'),
 '20010105': Bar(open='0.9507', high='0.9591', low='0.9464', close='0.9575')}

>>> bars['20010105']
Bar(open='0.9507', high='0.9591', low='0.9464', close='0.9575')

>>> bars['20010105'].close
'0.9575' 
```

# php - Magento [Payment Method]=> [PayPal All-In-One Payment Solution] 在后端被禁用

> ID：15382808
> 
> 赞同：-1
> 
> 时间：2013-03-13T10:32:56.370
> 
> 标签：php, paypal, magento-1.7

我正在使用magento 1.7。您可以清楚地看到下图，我选择了付款方式 -> PayPal 网站付款 Pro Payflow 版（包括快速结帐）。在所需设置下 [启用此解决方案] = 否我希望将其替换为是，但此字段已禁用。我努力了，我的支付模块也启用了，我清除了缓存。但徒劳所以请帮助我。让我向您展示问题图片： ![在此处输入图像描述](../Images/bae9cfb968508aa24cb48084e669428b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:01:54.617

在您填写所有必需的参数以使其正常工作之前，它将无法启用。例如，如果您没有填写凭据，则不允许您启用它。

# ios - 如何添加滑块以在视图中向下移动？

> ID：15382810
> 
> 赞同：-1
> 
> 时间：2013-03-13T10:32:58.163
> 
> 标签：ios, cocoa-touch, uiviewcontroller, uibutton, cocoa-design-patterns

我是 iOS 编程新手，所以我希望这不是一个愚蠢的问题。我必须以编程方式在我的视图中添加十个不同的按钮。我知道如何以编程方式添加按钮，但我的按钮不适合视图，因此其中一些必须出现在视图的可视高度下方，所以我想添加按钮，以便用户可以向上和向下滑动在视图中移动。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:42:40.827

[UIKit](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIKit_Framework/_index.html)提供了许多标准的 UI 元素来帮助处理显示的内容多于屏幕在任何时候可以显示的内容：

*   [UICollectionView](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html#//apple_ref/doc/uid/TP40012177)
*   [UIScrollView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)
*   [UITableView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)

您可能会从 the 提供的一些自动布局和格式中受益，`UICollectionView`但从您的描述中听起来好像 the`UIScrollView`或`UITableView`最适合您的场景。

### UIScrollView

`UIScrollView`充当用户对其包含的底层视图的视口，并默认提供复杂的平移和缩放功能。它是高度可配置的，如果您不需要它，您可以阻止缩放功能。

只需确保将视图放置`UIScrollView`在 Interface Builder 内并设置[`contentSize`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/instp/UIScrollView/contentSize)属性即可。设置`contentSize`大于的边界`UIScrollView`应该会自动启用滚动。要启用缩放，请`UIViewController`实现[UIScrollViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiscrollviewdelegate_protocol/Reference/UIScrollViewDelegate.html)：

```
@interface MYViewController : UIViewController <UIScrollViewDelegate>
@end 
```

然后确保在方法中返回您的视图`viewForZoomingInScrollView:`：

```
-(UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    return theViewContainingTheButtons;
} 
```

### UITableView

专门设计用于显示可以垂直滚动的`UITableView`项目列表，如果其内容高于视图的大小。

A`UITableView`由许多[UITableViewCells](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html)组成，每个 UITableViewCells 都可以包含您希望显示的按钮之一。Apple 的[iOS 表视图编程指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/AboutTableViewsiPhone/AboutTableViewsiPhone.html)涵盖了`UITableView`.

### 结论

该`UITableView`方法专门关注您所询问的内容，而忽略了托管按钮的视图中可能还有其他内容。这也意味着您必须更改现有的动态按钮放置代码并编写新代码以使用表格视图。实际上，这很可能`UIScrollView`是您正在寻找的东西，但我想提供对您可能不知道的其他 UI 元素的曝光，这些元素可用于实现您所描述的内容。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:35:12.530

您不需要使用称为 UIScrollView 的特殊元素。它会自动处理所有这些。这是文档的链接：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:36:04.870

您可以使用`UIScrollView`.

而不是添加`UIButton`到添加`UIView`然后到`UIScrollView`和设置`UIScrollView` `contentSize`。

更多帮助：[来自 Apple 的 UIScrollView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)。

# cordova - 如何在 iOS 中创建自定义插件

> ID：15382812
> 
> 赞同：-2
> 
> 时间：2013-03-13T10:33:02.243
> 
> 标签：cordova, ios6

如何在 iOS 中创建自定义插件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:24:14.797

按照[本指南](http://docs.phonegap.com/en/2.5.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)了解如何**为 iOS 开发自定义插件**。
我还建议看看[现有的插件](https://github.com/phonegap/phonegap-plugins)。

# mysql - 字段列表中的未知列 - 除法

> ID：15382813
> 
> 赞同：0
> 
> 时间：2013-03-13T10:33:02.593
> 
> 标签：mysql

此查询将返回错误（字段列表中的未知列 numero_propostas）。我想要的是这样的：

```
SELECT COUNT(*) as numero_propostas, 
       total as total, 
       (numero_propostas / total) as divisao 
FROM ConsultaArtigos2 AS ca
... 
```

正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:37:33.597

```
SELECT COUNT(*) as numero_propostas, 
       total as total, 
       (COUNT(*)/ total) as divisao 
FROM ConsultaArtigos2 AS ca... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:38:24.177

在 MySQL 查询语句中，您必须在引用位置使用列名

```
 SELECT COUNT(*) as numero_propostas, 
         total as total, 
         (COUNT(*) / total) as divisao 
   FROM ConsultaArtigos2 AS ca 
```

# asp.net-mvc - DropDownList 未显示所选值

> ID：15382817
> 
> 赞同：1
> 
> 时间：2013-03-13T10:33:11.747
> 
> 标签：asp.net-mvc, asp.net-mvc-4, html-select

我有编辑视图：

```
<div class="editor-field">
@Html.DropDownList("RoleID", (IEnumerable<SelectListItem>)ViewBag.RoleID, new {class="dropdownlistCustom" })
@Html.ValidationMessageFor(model => model.RoleID)
</div> 
```

控制器：

```
public ActionResult Edit(int id = 0)
    {
        UserDetail userDetail=db.UserDetails.Find(id);
        if(userDetail!=null)
        {
           ViewBag.RoleID = new SelectList(db.Roles.Where(r => r.RoleStatus == "A"), "RoleID", "RoleName", userdetail.RoleID);
           return View(userdetail);
        }
    } 
```

模型：

```
[Display(Name = "Name Of the Role")]
public int RoleID { get; set; }
[ForeignKey("RoleID")]
public virtual Role Roles { get; set; } 
```

`selectedValue`尽管我从控制器设置参数，`DropDownList`但不显示所选值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T09:46:19.403

可以通过值`ViewBag`

```
ViewBag.ReportID = new SelectList(context, "ReportName","ReportName",userdetail.WorkLocation);
@Html.DropDownList("Report", (IEnumerable<SelectListItem>)ViewBag.ReportID }) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T11:07:33.670

最好尝试使用 SelectList 在数据源本身中设置选定选项

```
Dictionary<string, string> list = new Dictionary<string, string>();
list.Add("Value1", "1");
list.Add("Value2", "2");
list.Add("Value3", "3");
var selectList = new SelectList(list,
          "Value", "Key", 
          "2"); // selected item's value "Value2" is selected.
ViewData["SelectedValue"] = selectList;

@Html.DropDownList("ddlValues", (SelectList)ViewData["SelectedValue"]) ) 
```

# objective-c - 如何使用 NSSortDescriptor 对 NSMutableArray 进行排序

> ID：15382818
> 
> 赞同：4
> 
> 时间：2013-03-13T10:33:16.947
> 
> 标签：objective-c, cocoa, nssortdescriptor

我正在使用以下 NSSortDescriptor 代码对数组进行排序。我目前正在按价格排序，但也想限制价格。是否可以按价格排序，但仅显示价格低于 100？

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]
                                        initWithKey: @"price" ascending: YES];

NSMutableArray *sortedArray = (NSMutableArray *)[self.displayItems
                                                     sortedArrayUsingDescriptors: [NSArray arrayWithObject:sortDescriptor]];

[self setDisplayItems:sortedArray];

[self.tableView reloadData]; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T10:45:56.427

仅对数组进行排序是不够的 - 您还需要对其进行过滤。

如果我们维护您原始代码的结构，您可以添加如下过滤器：

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]
                                    initWithKey: @"price" ascending: YES];

NSArray *sortedArray = [self.displayItems sortedArrayUsingDescriptors: [NSArray arrayWithObject:sortDescriptor]];

NSPredicate *pred = [NSPredicate predicateWithFormat: @"price < 100"];
NSMutableArray *filteredAndSortedArray = [sortedArray filteredArrayUsingPredicate: pred];

[self setDisplayItems: [filteredAndSortedArray mutableCopy]];

[self.tableView reloadData]; 
```

如果性能成为问题，您可能希望反转过滤和排序，但这是一个细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:39:21.540

您可以先过滤指定价格范围的数组，然后对过滤后的数组进行排序并在表格视图中显示排序后的数组！！！

对于过滤，您可以使用`NSPredicate`& 对于排序，您可以使用相同的`NSSortDescriptor`

希望这对你有帮助！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-29T06:55:06.070

```
NSMutableArray * weekDays = [[NSMutableArray alloc] initWithObjects:@"Sunday",@"Monday",@"Tuesday",@"Wednesday",@"Thursday",@"Friday",@"Saturday", nil];
NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
NSMutableArray *dictArray = [[NSMutableArray alloc] init];

for(int i = 0; i < [weekDays count]; i++)
{
    dict = [NSMutableDictionary dictionaryWithObjectsAndKeys:[NSString stringWithFormat:@"%i",i],@"WeekDay",[weekDays objectAtIndex:i],@"Name",nil];
    [dictArray addObject:dict];
}
NSLog(@"Before Sorting : %@",dictArray);

@try
{
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"Name" ascending:NO];
    NSArray *descriptor = @[sortDescriptor];
    NSArray *sortedArray = [dictArray sortedArrayUsingDescriptors:descriptor];
    NSLog(@"After Sorting : %@",sortedArray);
}
@catch (NSException *exception)
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Sorting cant be done because of some error" message:[NSString stringWithFormat:@"%@",exception] delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [alert setTag:500];
    [alert show];
    [alert release];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T10:35:30.260

```
NSSortDescriptor *sorter = [[NSSortDescriptor alloc] initWithKey:@"your key" ascending:true];
[yourarray sortUsingDescriptors:[NSArray arrayWithObject:sorter]];
[sorter release]; 
```

# paypal - 更改重复付款的通知网址

> ID：15382836
> 
> 赞同：2
> 
> 时间：2013-03-13T10:33:45.323
> 
> 标签：paypal, paypal-ipn

我已经为定期付款设置了默认通知 URL，问题是现在我必须将其更改为不同的。

是否可以返回所有经常性 IPN 并更改地址？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:58:00.083

不幸的是，不，但您可以将数据从当前 IPN 侦听器 URL 转发到新的。只需将原始数据接收到的数据发布到新数据。

# ruby - 如何在 ruby 脚本中使用 Net::FTP 将远程 FTP 服务器上的文件移动到同一 FTP 服务器上的目录

> ID：15382837
> 
> 赞同：11
> 
> 时间：2013-03-13T10:33:45.620
> 
> 标签：ruby, ftp

如何在 ruby​​ 脚本中使用 Net::FTP 将远程 FTP 服务器上的文件移动到同一 FTP 服务器上的目录。我知道文件名，并且我已经使用 ftp.mkdir 创建了一个目录，但显然没有方法可以将文件移动到创建的文件夹中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-27T19:07:28.560

文件（和目录）可以使用类的`rename()`方法移动`Net::FTP`。例子：

```
ftp = Net::FTP.new("ftp.myserver.com","myusername","mypassword")
ftp.binary = true
ftp.passive = true

path1 = "/original/dir/path/"    # Dir to move
path2 = "/new/path/"             # New path of Dir

ftp.rename(path1, path2) 
```

就是这样！这会导致所有文件在同一 FTP 服务器上从一个路径移动到另一个路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:44:28.200

尝试重命名命令。如果它不起作用，您可以尝试以下命令：“SITE mv oldpath newpath”。这告诉服务器在服务器上执行命令。预期的行为不会在所有服务器上起作用，而只会在某些服务器上起作用，因此只有在您确定它可以与特定服务器一起使用时才使用 SITE 命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:39:03.750

有`putbinaryfile`和`puttextfile`实例方法。这还不够吗？或者如果你只是想在一个ftp服务器的范围内移动，有`rename`方法。

# web - 响应式网页设计中绝对定位子级的 CSS 父级高度百分比

> ID：15382839
> 
> 赞同：0
> 
> 时间：2013-03-13T10:33:48.093
> 
> 标签：web, responsive-design, css-position

我实际上正在研究响应式设计，但我很困惑：

我需要在他们的 div 父级中将图像类型的子级位置设置为绝对，并将下半部分保留在该父级下。但实际上，我唯一的解决方案是为此父级设置固定高度（在这种情况下，下部的相对边距在动态结构中不起作用）。问题是图像，设置为 max-width: 100%; 为了保持它们的尺寸灵活，随页面扩展，并且下部在调整大小时不再定位：

```
<div id='page'>
<div id='b0'><img /><img /></div>
<section id='s0'><h2>section title</h2><p>hjkhjkhjk</p></section>
</div> 
```

和CSS：

```
#page{max-width:1024px; margin: 0 auto;}
#b0{position: relative; height:25%;}/* doesn't work, 100px instead work but responsive design fails */
#b0 img{position: absolute;} 
```

有没有人有解决方案？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:32:36.810

更简单的解决方案：

包括将每个图像设置为 position: absolute; 除了最后一个：

```
#b0 img:last-child{position: relative; 
```

将元素保留在“洪水”中为其父级提供所需的高度值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:17:47.727

Ok, I now have a very simple mixed solution using Both CSS and Javascript: As the primary need is "mobile first" design, i've introduced un min-height for the images container in a smartphoine targeted media query css file:

In the head tag:

```
<link rel='stylesheet' media='screen and (min-width:320px)' type='text/css' href='css/css.css' /> 
```

Then the CSS:

```
#b0{position: relative; min-height:82px;} 
```

And a little bit of Javascript:

```
$(document).ready(function(){window.onresize=function(){$('#b0').css({'height' :( this.innerWidth * .25)+'px'})}}); 
```

So this mixed solution needs Javascript activated, a min-height to be set up for each media query step, and a percentage for the container height calculated with global and maximum page dimensions: in my case:

```
#page{max-width: 1024px;} 
```

and a container height at about 280px;

Hope this can help someone someday ;-)

# asp.net-mvc - LINQ to Entities 中仅支持无参数构造函数和初始化程序吗？

> ID：15382840
> 
> 赞同：0
> 
> 时间：2013-03-13T10:33:51.737
> 
> 标签：asp.net-mvc, entity-framework, linq-to-entities

我有一个在运行时转换 DTO（产品）的 ProductViewModel。

```
public class ProductViewModel : IViewModel {

    public ProductViewModel() {
        Categories = new List<CategoryViewModel>();
    }

    #region DTO Helpers

    public ProductViewModel(Product p) {
        this.ID = p.ID;
        this.Name = p.Name;
        this.Price = p.Price;
        Categories = new List<CategoryViewModel>();
    }

    #endregion

    public int ID { get; set; }
    public string Name { get; set; }
    public decimal Price { get; set; }
    public IEnumerable<CategoryViewModel> Categories { get; set; }
} 
```

我之前在 LINQ2SQL 中使用过这段代码并且它可以工作，但现在使用实体框架它不会：

```
 var products = (from p in db.GetAll()
                        select new ProductViewModel(p)); 
```

我收到此错误：

```
Only parameterless constructors and initializers are supported in LINQ to Entities 
```

**任何人都可以帮助解释/解决这个问题吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:42:17.970

```
var products = (from p in db.GetAll()
               select new ProductViewModel{
                   ID = p.Id,
                   ....
               }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:48:01.357

要从单个实体中检索所有详细信息，请使用此

```
Context.Set<your entity>().AsQueryable(); 
```

# facebook - 页面标签应用程序 URL 的共享中缺少缩略图图像

> ID：15382847
> 
> 赞同：2
> 
> 时间：2013-03-13T10:34:06.633
> 
> 标签：facebook

我目前在 Facebook 上有一个 Page Tab 应用程序，并想在时间线中推广它，但是当我这样做时，我没有得到缩略图。

我在缩略图元标记中添加了：

```
<meta property="og:image" content="MY_IMAGE"/> 
```

但它仍然没有显示 - 我错过了什么吗？图像的链接实际上在应用程序代码本身中，并指向应用程序的图像文件夹中的 111 x 74 像素的图像，因此它不在不同的站点或任何地方 - 它是一个绝对链接。

应用程序链接在这里仅供参考：[https ://www.facebook.com/ValerieCafe/app_451324494932654](https://www.facebook.com/ValerieCafe/app_451324494932654)

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:32:15.070

我不知道在线 Facebook 应用程序有调试器：

[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

我错过了元标记，实际上应用程序的构建方式并没有让 Facebook 正确抓取它，所以一旦我弄清楚所有这些问题，它就可以正常工作。虽然，如果您想更改用作缩略图的图像，Facebook 似乎确实很慢 - 它至少需要 24 小时才能赶上。

# javascript - 如何在 JavaScript 中检索页面标题？

> ID：15382849
> 
> 赞同：0
> 
> 时间：2013-03-13T10:34:07.647
> 
> 标签：javascript, jquery

我需要一种方法来检索远程网页的标题。我在互联网上找到了这个 js，但有人可以告诉我 "$.request("fetch_title", { url: c })" 在这个函数中做了什么：？

```
function fetch_title() {
var a = $("#url-field"),
    b = a.find(".NO_URL"),
    a = a.find(".title-status"),
    c = $("#url").val();
  if (c) {
    if (!$('form#newlink textarea[name="title"]').val() || confirm("This will replace your existing title, proceed?")) 
        a.show().text(reddit.status_msg.loading), 
        b.hide(), 
        $.request("fetch_title", { url: c })
  } else a.hide(), b.show().text("a url is required")
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:51:33.593

jQuery核心没有这个`jQuery.request()`功能，所以很可能是通过插件实现的。我在 Google 上找到的最接近的是[AmplifyJS](http://amplifyjs.com/api/request/)，它被描述为“jQuery 组件库”。但是，文档中没有迹象表明使用`$`代替`amplify`会起作用。

取自上面链接的页面：

> amplify.request 是一个抽象层，可用于任何类型的数据请求。amplify.request 着手将数据检索和缓存机制与数据请求者分开。

这似乎是根据用户输入的指定 URL 对页面标题的请求，但该请求的确切细节将在代码的其他地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:53:50.750

要获取页面的标题，只需使用 jquery.get 并在响应中搜索标题，如下所示：

```
$.get('ajax/test.html', function(data) {
    var matches = data.match(/<title>(.*?)<\/title>/);
    var title = matches[1];
}); 
```

标题不会在标题变量中。

# python - Scrapy：动态定义项目

> ID：15382850
> 
> 赞同：17
> 
> 时间：2013-03-13T10:34:11.050
> 
> 标签：python, scrapy

当我开始学习scrapy时，我遇到了动态构建Item属性的需求。我只是在抓取一个具有表格结构的网页，我想在抓取时形成项目和字段属性。我已经完成了这个示例[抓取数据，而不必明确定义要抓取的每个字段，](https://stackoverflow.com/questions/5069416/scrapy-scraping-data-without-having-to-explicitly-define-each-field-to-be-scra)但无法充分利用它。

我是否应该编写一个项目管道来动态捕获信息。我也看过 Item loader 功能，但如果有人能详细解释一下，那将非常有帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-14T13:17:06.403

只需使用单个字段作为任意数据占位符。然后当你想把数据拿出来时，不要说`for field in item`，你说`for field in item['row']`。您不需要[管道](http://doc.scrapy.org/en/latest/topics/item-pipeline.html)或[加载](https://scrapy.readthedocs.org/en/latest/topics/loaders.html)器来完成此任务，但它们都被广泛使用是有充分理由的：它们值得学习。

蜘蛛：

```
from scrapy.item import Item, Field
from scrapy.spider import BaseSpider

class TableItem(Item):
    row = Field()

class TestSider(BaseSpider):
    name = "tabletest"
    start_urls = ('http://scrapy.org?finger', 'http://example.com/toe')

    def parse(self, response):
        item = TableItem()

        row = dict(
            foo='bar',
            baz=[123, 'test'],
        )
        row['url'] = response.url

        if 'finger' in response.url:
            row['digit'] = 'my finger'
            row['appendage'] = 'hand'
        else:
            row['foot'] = 'might be my toe'

        item['row'] = row

        return item 
```

输出：

```
stav@maia:/srv/stav/scrapie/oneoff$ scrapy crawl tabletest
2013-03-14 06:55:52-0600 [scrapy] INFO: Scrapy 0.17.0 started (bot: oneoff)
2013-03-14 06:55:52-0600 [scrapy] DEBUG: Overridden settings: {'NEWSPIDER_MODULE': 'oneoff.spiders', 'SPIDER_MODULES': ['oneoff.spiders'], 'USER_AGENT': 'Chromium OneOff 24.0.1312.56 Ubuntu 12.04 (24.0.1312.56-0ubuntu0.12.04.1)', 'BOT_NAME': 'oneoff'}
2013-03-14 06:55:53-0600 [scrapy] DEBUG: Enabled extensions: LogStats, TelnetConsole, CloseSpider, WebService, CoreStats, SpiderState
2013-03-14 06:55:53-0600 [scrapy] DEBUG: Enabled downloader middlewares: HttpAuthMiddleware, DownloadTimeoutMiddleware, UserAgentMiddleware, RetryMiddleware, DefaultHeadersMiddleware, MetaRefreshMiddleware, HttpCompressionMiddleware, RedirectMiddleware, CookiesMiddleware, ChunkedTransferMiddleware, DownloaderStats
2013-03-14 06:55:53-0600 [scrapy] DEBUG: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware
2013-03-14 06:55:53-0600 [scrapy] DEBUG: Enabled item pipelines:
2013-03-14 06:55:53-0600 [tabletest] INFO: Spider opened
2013-03-14 06:55:53-0600 [tabletest] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)
2013-03-14 06:55:53-0600 [scrapy] DEBUG: Telnet console listening on 0.0.0.0:6023
2013-03-14 06:55:53-0600 [scrapy] DEBUG: Web service listening on 0.0.0.0:6080
2013-03-14 06:55:53-0600 [tabletest] DEBUG: Crawled (200) <GET http://scrapy.org?finger> (referer: None)
2013-03-14 06:55:53-0600 [tabletest] DEBUG: Scraped from <200 http://scrapy.org?finger>
    {'row': {'appendage': 'hand',
             'baz': [123, 'test'],
             'digit': 'my finger',
             'foo': 'bar',
             'url': 'http://scrapy.org?finger'}}
2013-03-14 06:55:53-0600 [tabletest] DEBUG: Redirecting (302) to <GET http://www.iana.org/domains/example/> from <GET http://example.com/toe>
2013-03-14 06:55:53-0600 [tabletest] DEBUG: Redirecting (302) to <GET http://www.iana.org/domains/example> from <GET http://www.iana.org/domains/example/>
2013-03-14 06:55:53-0600 [tabletest] DEBUG: Crawled (200) <GET http://www.iana.org/domains/example> (referer: None)
2013-03-14 06:55:53-0600 [tabletest] DEBUG: Scraped from <200 http://www.iana.org/domains/example>
    {'row': {'baz': [123, 'test'],
             'foo': 'bar',
             'foot': 'might be my toe',
             'url': 'http://www.iana.org/domains/example'}}
2013-03-14 06:55:53-0600 [tabletest] INFO: Closing spider (finished)
2013-03-14 06:55:53-0600 [tabletest] INFO: Dumping Scrapy stats:
    {'downloader/request_bytes': 1066,
     'downloader/request_count': 4,
     'downloader/request_method_count/GET': 4,
     'downloader/response_bytes': 3833,
     'downloader/response_count': 4,
     'downloader/response_status_count/200': 2,
     'downloader/response_status_count/302': 2,
     'finish_reason': 'finished',
     'finish_time': datetime.datetime(2013, 3, 14, 12, 55, 53, 848735),
     'item_scraped_count': 2,
     'log_count/DEBUG': 13,
     'log_count/INFO': 4,
     'response_received_count': 2,
     'scheduler/dequeued': 4,
     'scheduler/dequeued/memory': 4,
     'scheduler/enqueued': 4,
     'scheduler/enqueued/memory': 4,
     'start_time': datetime.datetime(2013, 3, 14, 12, 55, 53, 99635)}
2013-03-14 06:55:53-0600 [tabletest] INFO: Spider closed (finished) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-21T13:20:49.070

使用这个类：

```
class Arbitrary(Item):
    def __setitem__(self, key, value):
        self._values[key] = value
        self.fields[key] = {} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-09T21:13:40.797

在 Scrapy 1.0.3 中使用项目加载器时，自定义`__setitem__`解决方案对我不起作用，因为项目加载器[直接访问 fields 属性](https://github.com/scrapy/scrapy/blob/ebef6d7c6dd8922210db8a4a44f48fe27ee0cd16/scrapy/loader/__init__.py#L152)：

```
value = self.item.fields[field_name].get(key, default) 
```

仅`__setitem__`在项目级访问（如`item['new field']`. 由于`fields`只是[一个 dict](https://github.com/scrapy/scrapy/blob/ebef6d7c6dd8922210db8a4a44f48fe27ee0cd16/scrapy/item.py#L47)，我意识到我可以简单地创建一个 Item 子类，它使用 a`defaultdict`来优雅地处理这些情况。

最后，只需要多出两行代码：

```
from collections import defaultdict

class FlexItem(scrapy.Item):
    """An Item that creates fields dynamically"""
    fields = defaultdict(scrapy.Field) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-25T20:55:06.280

在 Scrapy 1.0+ 中，如果您没有明确定义的模式，更好的方法可能是生成 Python dicts 而不是 Item 实例。检查例如[http://scrapy.org/](http://scrapy.org/)首页上的示例 - 没有定义项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-02T02:05:15.477

> 我更期待使用项目加载器和管道处理数据的解释

假设：

```
fieldname = 'test'
fieldxpath = '//h1' 
```

它（在最近的版本中）非常简单......

```
item = Item()
l = ItemLoader(item=item, response=response)

item.fields[fieldname] = Field()
l.add_xpath(fieldname, fieldxpath)

return l.load_item() 
```

# bash - 将 shell 脚本的输出重定向到文件

> ID：15382852
> 
> 赞同：2
> 
> 时间：2013-03-13T10:34:15.293
> 
> 标签：bash, shell, rvm, capistrano

我正忙着为我们的一个应用程序编写 Capistrano 部署脚本。其中一个步骤使用以下命令安装 RVM：

```
run "cat ~/rvm-installer.sh | bash -s stable --ruby" 
```

但是，我觉得输出过于冗长，我宁愿将其转储到 .log 文件中。是否可以将整个 rvm-installer.sh 脚本的输出重定向到其他地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:35:28.420

像这样：

```
run "cat ~/rvm-installer.sh | bash -s stable --ruby >out.log" 
```

或者，如果您还想重定向流程的标准错误流：

```
run "cat ~/rvm-installer.sh | bash -s stable --ruby >out.log 2>err.log" 
```

您还可以将所有内容重定向到同一个文件：

```
run "cat ~/rvm-installer.sh | bash -s stable --ruby >out.log 2>&1" 
```

# android - 以编程方式将颜色“#e3bb87”添加到 StateListDrawable

> ID：15382854
> 
> 赞同：3
> 
> 时间：2013-03-13T10:34:22.280
> 
> 标签：android, textview, android-drawable, android-selector

我需要以**编程**方式执行此操作的原因是文本颜色已下载且未在 xml 中预定义。我 [以编程方式阅读了此替换选择器图像](https://stackoverflow.com/questions/4697528/replace-selector-images-programmatically)

我只需要知道从

```
StateListDrawable states = new StateListDrawable();
states.addState(new int[] {android.R.attr.state_pressed},
    getResources().getDrawable(R.drawable.pressed)); 
```

怎么变成

```
states.addState(new int[] {android.R.attr.state_pressed},**theMethodImLookingFor**("#e3bb87")); 
```

忘了`getResources().getColor(R.color.anycolor)`，xml中没有定义颜色

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T10:44:38.710

你可以使用这个：

```
states.addState(new int[] {android.R.attr.state_pressed},
    new ColorDrawable(Color.parseColor("#e3bb87"))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:43:03.040

我认为您正在寻找[ColorDrawable](http://developer.android.com/reference/android/graphics/drawable/ColorDrawable.html)

你可以这样做：

```
StateListDrawable states = new StateListDrawable();
int color = 0xff00ff00;
states.addState(new int[] {android.R.attr.state_pressed},
     new ColorDrawable(color)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:42:33.430

该方法是

```
new ColorDrawable(Color.parseColor("#e3bb87")) 
```

# javascript - 这个 JavaScript hack 是什么？

> ID：15382860
> 
> 赞同：0
> 
> 时间：2013-03-13T10:34:33.553
> 
> 标签：javascript, frontend

我在 Javascript 中找到了这段代码，我想知道这是一种 hack，还是只是一个错误：

```
var img = new Image();
img.src = myHttpSrc;
img.onload = function () {
    img.onload = null;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:36:52.700

该代码似乎从`myHttpSrc`. 有一个事件处理程序`onload`将在加载时触发。加载完成后，处理程序也会自行移除。

这不是 hack，但由于`onload`处理程序除了删除自身之外没有做任何事情，这似乎是多余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:40:36.457

只是为了稍微扩展一下 Kami 的答案，可能需要这样做的一种可能情况是，他们可能在代码中的其他地方检查 img.onload 是否为空 - 也许作为检查图像是否有的一种方式不使用布尔值加载。

这对我来说听起来很不理想，而且有点古怪，但是嘿，这是可能的。

这就是我的观点：如果没有给出这段代码的上下文，没有人能知道这是黑客攻击还是错误。

如果您**需要**知道答案：*询问编写代码的人。*

# javascript - 如何将数据从 JSP 发送到 HTML？

> ID：15382865
> 
> 赞同：0
> 
> 时间：2013-03-13T10:35:02.453
> 
> 标签：javascript, html, jsp

我有一个 HTML 页面，可以将表单数据发送到某个 JSP 文件并创建一个发送数据的 .CSV 文件。我需要在 HTML 页面上显示该数据。我应该如何在 HTML 页面上显示该数据，或者通过将该数据从 JSP 传递到所需的 HTML 页面，或者通过从 .CSV 文件中检索该数据？

# iphone - iPhone App 安装到 90% 然后死机

> ID：15382867
> 
> 赞同：0
> 
> 时间：2013-03-13T10:35:06.213
> 
> 标签：iphone, objective-c, testflight

我正在尝试从 TestFlight 安装应用程序。它安装到 90%，然后它就失败了。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:26:07.377

当应用程序下载达到 90% 时，通常意味着下载已完成，iOS 无法提取和安装构建。

发生这种情况的原因有很多，其中大部分是我们通过上传或安装时间验证发现的，不幸的是，有些情况我们没有或无法检测到。

这是我们讨论一些场景的帮助文章。

[http://help.testflightapp.com/customer/portal/articles/829652-received-an-unable-to-download-application-message-what-does-this-mean-?topicname=Mobile](http://help.testflightapp.com/customer/portal/articles/829652-received-an-unable-to-download-application-message-what-does-this-mean-?topicname=Mobile)

# jquery-plugins - 选择的插件 max_selected_options

> ID：15382875
> 
> 赞同：6
> 
> 时间：2013-03-13T10:35:15.150
> 
> 标签：jquery-plugins, jquery-chosen

我使用[Chosen](http://harvesthq.github.com/chosen/) jquery 插件，我注意到**max_selected_options**不起作用：

代码是这样的：

```
<!doctype html> 
<html lang="en"> 
<head>
    <link rel="stylesheet" href="chosen/chosen.css" />
</head>
<body>

<select id="assets" data-placeholder="Choose assets" class="chzn-select" multiple style="width:350px;" tabindex="4">
    <option value="a">a</option>
    <option value="b">b</option>
    <option value="c">c</option>
    <option value="d">d</option>
    <option value="e">e</option>
    <option value="f">f</option>
    <option value="g">g</option>
</select>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js" type="text/javascript"></script>
<script src="chosen/chosen.jquery.js" type="text/javascript"></script>
<script type="text/javascript"> 

    $(document).ready(function(){
        $(".chzn-select").chosen();
        $(".chzn-select-deselect").chosen({allow_single_deselect:true});
        $('.chzn-select').chosen({ max_selected_options: 3 });
        $(".chzn-select").bind("liszt:maxselected", function () { alert("a"); });
        $(".chzn-select").chosen().change( function () { alert("a"); } );
    });

</script>
</body>
</html> 
```

我不明白我的代码有什么问题。这一行：

```
$('.chzn-select').chosen({ max_selected_options: 3 }); 
```

应该限制​​允许选择的最大数量。但它不起作用。我仍然可以选择任意数量的项目。我注意到，在达到所选项目的最大数量的情况下应该触发的事件也不会触发：

```
$(".chzn-select").bind("liszt:maxselected", function () { alert("a"); }); 
```

**我的代码有错误吗？**

还有一个问题：如何将搜索功能添加到我的列表中，例如插件页面上第一个示例中出现的搜索框？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T03:04:07.633

您调用了两次该`chosen()`方法，这就是您遇到问题的原因：

```
$(".chzn-select").chosen();
$('.chzn-select').chosen({ max_selected_options: 3 }); 
```

删除第一个，它可以工作。你的 JS 代码应该是：

```
$(document).ready(function(){
    $(".chzn-select-deselect").chosen({allow_single_deselect:true});
    $(".chzn-select").chosen({ max_selected_options: 3 });
    $(".chzn-select").bind("chosen:maxselected", function () { alert("max elements selected"); });
    $(".chzn-select").chosen().change( function () { alert("change"); } );
}); 
```

# gpu - openAcc 如何配置文件

> ID：15382876
> 
> 赞同：0
> 
> 时间：2013-03-13T10:35:15.783
> 
> 标签：gpu, openacc

嗨，我使用的是 CAPS OpenACC 编译器，但是当我尝试获得一些初步的配置文件结果时发生了一些意外。

起初，我通过声明 HMPPRT_LOG_LEVEL="info" 运行代码，这会生成一些带有时间戳的配置文件结果。

```
[     2.612337] ( 0) INFO : Upload   edgelengths[0:129600] (element_size=8, queue=none, location=gravity_openacc.c:50)
[     2.613485] ( 0) INFO : Call     __hmpp_acc_region__2ha750yb (queue=none, location=gravity_openacc.c:50)
[     2.614367] ( 0) INFO : Free     edgelengths[0:129600] (element_size=8, queue=none, location=gravity_openacc.c:50) 
```

所以我猜内核执行时间计算为 2.614367-2.613485=0.000882 s。

但是当我声明 CUDA_PROFILE=1 时，会显示以下配置文件

```
method=[ __hmpp_acc_region__2ha750yb_parallel_region_1 ] gputime=[ 492.480 ] cputime=[ 13.000 ] occupancy=[ 0.250 ] 
```

所以我对这两个结果很困惑，这是真的吗？？？

有人得到一些解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:13:18.590

CUDA 分析器只显示执行 CUDA 内核所需的时间，而使用 HMPPRT_LOG_LEVEL="info" 获得的日志为您提供执行区域所需的总时间，这并不完全相同，因为您可能例如，有一些在主机上执行的代码。

# module - Yii 模块操作 url

> ID：15382878
> 
> 赞同：1
> 
> 时间：2013-03-13T10:35:20.877
> 
> 标签：module, yii, action

我在我的主要项目视图/布局/main.php 中有以下“事件”模块操作

```
array('label'=>'Events', 'url'=>'#', 'visible'=>UserUtility::isUser(), 'items'=>array(
                array('label'=>'Konzerte', 'items'=>array(
                    array('label'=>'Erstellen', 'url'=>array('events/booking/create')),
                    array('label'=>'Verwalten', 'url'=>array('events/booking/admin')),
                )), 
```

如果我单击“Erstellen”，则模块操作会完美运行。如果我之后单击 Verwalten，我会收到错误消息

```
Error 404 Unable to resolve the request "events/events/concert/admin".* 
```

控制器动作显然增加了另一个

```
events/ 
```

如果我已经在我的事件模块的页面上，则在它前面。我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:36:21.573

您可以尝试使用[createAbsoluteUrl()](http://www.yiiframework.com/doc/api/1.1/CController#createAbsoluteUrl-detail)创建此 url或在 /events 之前添加斜杠

```
array('label'=>'Verwalten', 'url'=>array('/events/booking/admin')), 
```

# ios - 在 MKPolyLineView 中绘制 CAGradient

> ID：15382883
> 
> 赞同：4
> 
> 时间：2013-03-13T10:35:36.767
> 
> 标签：ios, objective-c, calayer, cagradientlayer

我的 MKPolyLineView 有问题。我只是尝试为折线制作颜色渐变，但使用 CAGradient 它不起作用。我将 MKPolylineView 子类化并重新绘制

```
- (void)drawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale inContext:(CGContextRef)context

 UIColor *darker = [UIColor blackColor];
    CGFloat baseWidth = self.lineWidth / zoomScale;

    // draw the dark colour thicker
    CGContextAddPath(context, self.path);
    CGContextSetStrokeColorWithColor(context, darker.CGColor);
    CGContextSetLineWidth(context, baseWidth * 1.5);
    CGContextSetLineCap(context, self.lineCap);
    CGContextStrokePath(context);

    // now draw the stroke color with the regular width
    CGContextAddPath(context, self.path);
    CGContextSetStrokeColorWithColor(context, self.strokeColor.CGColor);
    CGContextSetLineWidth(context, baseWidth);
    CGContextSetLineCap(context, self.lineCap);
    CGContextStrokePath(context);

    [super drawMapRect:mapRect zoomScale:zoomScale inContext:context];
} 
```

但即使这样也不起作用（StrokeColor = red）。任何想法如何让折线渐变？（高色、中心色、低色）

谢谢大家。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-15T09:32:17.993

要使用渐变绘制 a `MKPolyline`，您可以使用 的自定义子类`MKPolylineView`。由于 CoreGraphics 不支持用渐变描边路径，我们必须

1.  将路径转换为跟踪路径边缘的形状，使用`CGPathCreateCopyByStrokingPath`
2.  将上下文剪辑到该形状
3.  填写使用`CGContextDrawLinearGradient`

这是一个可以帮助您入门的子类：

```
@interface TWOGradientPolylineView : MKPolylineView

@end

@implementation TWOGradientPolylineView

- (void)strokePath:(CGPathRef)path inContext:(CGContextRef)context
{
    CGFloat lineWidth = CGContextConvertSizeToUserSpace(context, (CGSize){self.lineWidth, self.lineWidth}).width;
    CGPathRef pathToFill = CGPathCreateCopyByStrokingPath(path, NULL, lineWidth, self.lineCap, self.lineJoin, self.miterLimit);
    CGRect rect = CGPathGetBoundingBox(pathToFill);
    CGContextAddPath(context, pathToFill);
    CGPathRelease(pathToFill);
    CGContextClip(context);

    CGFloat gradientLocations[2] = {0.0f, 1.0f};
    CGFloat gradientColors[8] = {1.0f, 0.0f, 0.0f, 0.75f, 1.0f, 1.0f, 0.0f, 0.75f};
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGGradientRef gradient = CGGradientCreateWithColorComponents(colorSpace, gradientColors, gradientLocations, 2);
    CGColorSpaceRelease(colorSpace);

    CGPoint gradientStart = rect.origin;
    CGPoint gradientEnd = {CGRectGetMaxX(rect), CGRectGetMaxY(rect)};

    CGContextDrawLinearGradient(context, gradient, gradientStart, gradientEnd, kCGGradientDrawsAfterEndLocation);
    CGGradientRelease(gradient);
}

@end 
```

这是使用上述类绘制的路径的屏幕截图：

![带有渐变的路径的屏幕截图](../Images/75d486f681bb17df605125998e33705a.png)

# sql - 进度代码页通过 dtsx 导出数据到 sql

> ID：15382885
> 
> 赞同：0
> 
> 时间：2013-03-13T10:35:41.150
> 
> 标签：sql, ssis, codepages, progress-db

在我们的 Progress (V9.1B) 中，使用的代码页是 ibm8858-1。在unix sco机器上。

在进行中，我将数据转储如下：将流 strA 导出到 /u/usr/ppd/tesk.txt 转换目标“1252”。

对于每个 tab1 无锁：把 tab1.field1 ";" tab1.field2 跳过。结尾。

当我使用 vi 打开 de 文件时，看到法语单词如下：Apr\212s 而不是 après。

通常我将该文件ftp到PC，然后通过dtsx将其加载到sql中。

但在 sql 中，法语字符的格式也不正确。

有人知道我必须如何导出数据（文本）以及如何在 sql (2005) 中导入它。现在我还在我的 dtsx 中使用代码页 1252。

Tkx，江淮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:12:36.380

您是否 100% 确定该字段不包含“Apr\212s”？我也不确定是否有 ibm8858-1 代码页，我猜您可能会将它与 iso8859-1（斯堪的纳维亚字母）混淆。

每当我遇到代码页问题时，这些字符就会出现乱码，而不是转换为看起来像 ascii 代码的东西。

您可以随时尝试（假设它真的是 iso8859-1）

转换源“iso8859-1”目标“1252”。

# browser - SWT 浏览器组件阻塞 SWT UI 线程

> ID：15382886
> 
> 赞同：4
> 
> 时间：2013-03-13T10:35:42.193
> 
> 标签：browser, swt, block, vaadin

我将 org.eclipse.swt.browser.Browser 嵌入到修改后的 Eclipse (Indigo) 中的视图中，用作表单编辑器组件的预览窗格。在表单模型更改或元素选择更改时，代码通过 vaadin 6 呈现表单并将其显示在浏览器组件中。

现在，在大多数情况下，这就像一个魅力。但是对于一些高度复杂的表单，由 vaadin 生成的 HTML+JS 会对浏览器产生很大的压力，导致浏览器无响应长达几秒钟。这本身不会是悲剧 (1)，但只要 SWT 浏览器组件忙于渲染这些东西，整个 eclipse UI 线程就会被阻塞。

重现此问题的一种简单方法是创建一个在 javascript 函数内部阻塞的 HTML 页面（有关示例，请参见[https://gist.github.com/creinig/5150747 ）并将其显示在 SWT 浏览器中。](https://gist.github.com/creinig/5150747)只要那个 JS 函数在运行，整个 SWT 应用程序就不会响应任何东西。

我在这个问题上找到的唯一信息是

*   一个[SO 问题](https://stackoverflow.com/questions/2657201/java-web-browser-slow)（没有解决方案）和
*   [EclipseZone 上的](http://www.eclipsezone.com/eclipse/forums/t75738.html)一个问题（未回答）。

没那么有用:(

浏览器组件的[API 文档](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/browser/Browser.html)似乎没有提供任何关于其渲染是由 UI 线程定期触发还是本身触发阻止 UI 的东西的任何见解。

有没有办法将浏览器组件的渲染与 SWT UI 线程分离？或者可以采取什么其他措施来保护 Eclipse UI 不会在浏览器中挂起东西？

* * *

(1)：我们需要这种复杂程度的表单，我们已经在优化渲染性能，切换到 vaadin7 很可能也会加快速度。但问题肯定会持续存在，即使只是在降低严重性的情况下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:12:22.677

不是真正的解决方案，而是 Works For Me (TM) 的解决方法：如此处所述[，](http://blogs.bytecode.com.au/glen/2005/10/24/launching-an-external-browser-url-from-swt.html)从 SWT 启动系统的默认浏览器非常容易。因此，我将向包含浏览器控件的视图添加一个选项，该选项将通过禁用浏览器控件并打开系统浏览器来“分离”视图。

如果链接的页面从网上掉线，这里的要点是：

```
org.eclipse.swt.program.Program.launch("http://my.funny.url/"); 
```

启动为 HTTP URL 注册的应用程序。也就是说：系统默认浏览器。幸福随之而来：）

# python - 在图形上绘制单个点

> ID：15382887
> 
> 赞同：11
> 
> 时间：2013-03-13T10:35:48.483
> 
> 标签：python, matplotlib

我有一个小提琴情节，如下所示：

![在此处输入图像描述](../Images/a2738fc26a042845c114e8ae89dee56f.png)

我想在小提琴顶部的每个 x 值上绘制几个单独的点（或线、十字、点，以最简单的为准），如下所示：

![在此处输入图像描述](../Images/a6a1ffac25660dda057e1ba300eee2f4.png)

我该怎么做呢？

这是制作小提琴图的代码（参见[Violin Plot with Matplotlib](http://pyinsci.blogspot.no/2009/09/violin-plot-with-matplotlib.html)）

```
from matplotlib.pyplot import figure, show
from scipy.stats import gaussian_kde
from numpy.random import normal
from numpy import arange

def violin_plot(ax, data, pos, bp=False):
    '''                                                                                                                                                                                          
    create violin plots on an axis                                                                                                                                                               
    '''
    dist = max(pos)-min(pos)
    w = min(0.15*max(dist,1.0),0.5)
    for d,p in zip(data,pos):
        k = gaussian_kde(d) #calculates the kernel density                                                                                                                                       
        m = k.dataset.min() #lower bound of violin                                                                                                                                               
        M = k.dataset.max() #upper bound of violin                                                                                                                                               
        x = arange(m,M,(M-m)/100.) # support for violin                                                                                                                                          
        v = k.evaluate(x) #violin profile (density curve)                                                                                                                                        
        v = v/v.max()*w #scaling the violin to the available space                                                                                                                               
        ax.fill_betweenx(x,p,v+p,facecolor='y',alpha=0.3)
        ax.fill_betweenx(x,p,-v+p,facecolor='y',alpha=0.3)
    if bp:
        ax.boxplot(data,notch=1,positions=pos,vert=1)

if __name__=="__main__":
    pos = range(5)
    data = [normal(size=100) for i in pos]
    fig=figure()
    ax = fig.add_subplot(111)
    violin_plot(ax,data,pos,bp=1)
    fig.savefig("violins.gif") 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-13T10:52:17.310

只需在另一个图之后绘制额外的数据：

```
from matplotlib.pyplot import figure, show
from scipy.stats import gaussian_kde
from numpy.random import normal
from numpy import arange

def violin_plot(ax, data, pos, bp=False):
    '''
    create violin plots on an axis
    '''
    dist = max(pos)-min(pos)
    w = min(0.15*max(dist,1.0),0.5)
    for d,p in zip(data,pos):
        k = gaussian_kde(d) #calculates the kernel density
        m = k.dataset.min() #lower bound of violin
        M = k.dataset.max() #upper bound of violin
        x = arange(m,M,(M-m)/100.) # support for violin
        v = k.evaluate(x) #violin profile (density curve)
        v = v/v.max()*w #scaling the violin to the available space
        ax.fill_betweenx(x,p,v+p,facecolor='y',alpha=0.3)
        ax.fill_betweenx(x,p,-v+p,facecolor='y',alpha=0.3)
    if bp:
        ax.boxplot(data,notch=1,positions=pos,vert=1)

if __name__=="__main__":
    pos = range(5)
    data = [normal(size=100) for i in pos]
    fig=figure()
    ax = fig.add_subplot(111)
    violin_plot(ax,data,pos,bp=1)

    data_x = [0, 1, 2, 2, 3, 4]
    data_y = [1.5, 1., 0.7, 2.5, 1, 1.5]
    ax.plot(data_x, data_y, 'or')
    fig.savefig("violins.gif") 
```

这使

![增强图片](../Images/7697095e2c415e978ef385b8417f544f.png)

# jquery - 浏览器记住会话

> ID：15382888
> 
> 赞同：2
> 
> 时间：2013-03-13T10:35:52.357
> 
> 标签：jquery, internet-explorer, session, struts2

我正在开发一个 struts2 Web 应用程序。当按钮单击发生时，我会对 struts 操作进行 $getJSON 调用并对 java 类执行一些操作。

```
$.getJSON('uponClickingBtn',function(data){
        if(data.status=="TRUE"){
            $('#test').attr('src','image/greenzx.png');
        }
        else{
            $('#test').attr('src','image/redzx.png');
        }       
    }); 
```

java 类将返回一个字符串，即“ `TRUE`”/“ `FALSE`”。如果返回值为 true，则会出现 greenzx.png 图像，否则`redzx.png`会出现图像。

这个过程第一次运行良好。但是当再次单击相同的按钮时，不会调用 Java 操作类，浏览器只会返回最新的图像。

说，如果是`greenz.png`，它会`greenz.png`立即再次出现。

我的浏览器表现得好像它记住了不受欢迎的会话值。这是否与浏览器设置有关，或者我将不得不更改我的代码？

PS：我需要使用`IE7`/`IE8`作为浏览器。它适用于`Firefox`. `IE`是我遇到这个问题的地方。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T10:38:39.193

原因是浏览器缓存了您操作的响应。

*   选项 1 - 在您的 JAVA 操作中，您必须将 HTTP 缓存设置为`no-cache`.
*   选项 2 - 当您使用`$getJSON`向 url 添加随机参数时`'&time=' + Math.random()`（该值每次都必须是唯一的）。

第二个选项可以通过`$.ajax`与`cache:false`选项一起使用来自动实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T10:48:48.510

看起来浏览器返回了缓存数据而不是加载新数据。为避免这种情况，您可以在数据 url 中添加一些参数，即：将 '?time='+new Date().getTime() 添加到数据 url 的末尾。

# grails - Font Awesome 无法加载资源 /font/fontawesome-webfont.woff?v=3.0.1

> ID：15382892
> 
> 赞同：9
> 
> 时间：2013-03-13T10:36:12.740
> 
> 标签：grails, font-awesome

网站上的一切看起来都很好，但是这两个错误显示在控制台中。如果我点击 url 字体下载。一段时间以来一直试图追踪这个问题，但我在控制台中遇到两个错误：

> 资源加载失败：/font/fontawesome-webfont.woff?v=3.0.1
> 资源加载失败：/font/fontawesome-webfont.ttf?v=3.0.1

我怎样才能摆脱这个错误？

![在此处输入图像描述](../Images/ea0d1e3f15c49aca58d95556068566ff.png) ![在此处输入图像描述](../Images/59a59bc8a31150ae76252ccbf44eb167.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-15T18:40:16.713

我最近遇到并解决了这个问题。解决方案是添加“字体”目录，以及您希望将资源处理到您的 adhoc 的任何其他目录，因此它最终在 config.groovy 中看起来像这样（如果您在其他地方有资源，请根据需要添加目录）。

```
grails.resources.adhoc.includes = ['/images/**', '/css/**', '/js/**', '/font/**'] 
```

更多详细信息： [CSS 文件中的 URL 被 Grails 资源插件 1.2.7 破坏](https://stackoverflow.com/questions/22623584/urls-within-css-files-broken-with-grails-resources-plugin-1-2-7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T21:31:11.640

我遇到过同样的问题。

尝试使用-

```
src:url(asset-path('fontawesome-webfont.eot?v=3.2.1', font)); 
```

而不是直接的静态路径。

它对我清除这些特定错误很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T22:18:33.523

`resource:`前缀是 grails 资源插件的 css 重写过程中的一个中间步骤。您似乎遇到了临时资源处理器或 css 重写器中的错误。

我做了一个示例应用程序（grails 2.1.1，font-awesome 3.0.2，grails-resources 1.1.6），在初始加载时没有显示错误。在应用程序运行的情况下修改 font-awesome.css 后，重写器会抛出错误并将损坏的`resource:`url 留在原处。

如果我对错误执行相同的请求，`?_debugResources=true`然后再次消失。

在我的示例中，部署后单独保留 font-awesome 文件或使用[font-awesome-resources 插件](http://grails.org/plugin/font-awesome-resources)可以防止错误出现。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-05-22T09:23:51.263

这是 ?v=3.0.1 更改文件名和引用的问题。它会正常工作。仅使用 fontawesome-webfont.woff 和 fontawesome-webfont.ttf 文件名

# java - web.xml 中的会话超时

> ID：15382895
> 
> 赞同：68
> 
> 时间：2013-03-13T10:36:16.420
> 
> 标签：java, jakarta-ee, servlets, web.xml

我试图了解 Web.xml 中会话配置的真正目的是为了会话超时。

```
<!-- Session Configuration -->
<session-config>
        <session-timeout>60</session-timeout>
</session-config> 
```

现在让我告诉你我的问题。

我的应用程序正在导入/上传一个 .txt 文件，这肯定需要 1 个多小时，因为要导入数百万条记录。但是会话在 1 小时后超时，尽管我的应用程序仍在导入正在进行的 .txt 文件。这样的应用程序不应超时，因为应用程序正在后台执行某些任务。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-13T11:16:01.253

设置一个永不过期的会话超时是不可取的，因为您可以可靠地让用户在每次完成时按下注销按钮，以防止您的服务器负载过多（取决于用户数量和硬件）。另外，您可能会遇到一些您宁愿避免的安全问题。

当服务器仍在处理任务时会话无效的原因是因为客户端（用户浏览器）和服务器端之间没有通过例如http请求进行通信。因此，服务器无法了解用户状态，认为他处于空闲状态，并在您的`web.xml`.

要解决这个问题，您有几种可能性：

*   您可以在任务运行时*ping*您的后端以触摸会话并防止它过期
*   增加`<session-timeout>`服务器内部，但我不推荐这个
*   在专用线程中运行您的任务，该线程在工作时接触（扩展）会话或在线程完成时通知用户

有一个类似的问题被问到，也许您可​​以在您的项目中调整此解决方案的部分内容。看看[这个](https://stackoverflow.com/questions/5961403/prevent-session-timeout-during-database-update)。

希望这会有所帮助，玩得开心！

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-03-13T10:44:17.400

```
<session-config>
    <session-timeout>-1</session-timeout>
</session-config> 
```

您可以在会话永不过期的情况下使用“-1”。由于您不知道线程完成需要多长时间。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-13T11:55:27.477

通过 javascript 定期（比如每 60 秒一次）向服务器发送 AJAX Http 请求，以保持与服务器的会话，直到文件上传完成。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-03-15T17:39:36.927

哈克方式：

当需要大量上传/下载时，您可以通过编程方式增加会话超时。

```
session.setMaxInactiveInterval(TWO_HOURS_IN_SECONDS) 
```

当进程结束时，您可以将超时设置回其默认值。

但是.. 当您使用 Java EE 时，上传/下载不需要一个完整的小时，更好的方法是异步运行任务（例如通过 JMS）。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-03-13T10:40:43.437

```
<session-config>
        <session-timeout>-1</session-timeout>
</session-config> 
```

在上面的代码`"60" stands for the minutes.`中会话将在之后过期`60 minutes.`所以如果你想要更多的时间。例如`-1`，描述您的会话永不过期。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-10-07T19:24:52.707

您可以看到许多选项作为您问题的答案，但是您可以在会话永不过期的情况下使用“-1”。由于您不知道线程完成需要多长时间。例如：

```
 <session-config>
        <session-timeout>-1</session-timeout>
    </session-config> 
```

或者，如果您不希望出于某种目的发生超时：

```
<session-config>
    <session-timeout>0</session-timeout>
</session-config> 
```

另一种选择可能是将数字增加到 1000，等等，等等，bla，bla，bla。

但是如果你真的想停止并且你认为你的应用程序没有必要强制用户注销，只需添加一个注销按钮，用户将决定何时离开。

如果您不需要强制注销，并且您正在加载可能需要时间的文件，那么您可以采取以下措施来解决问题，具体取决于服务器和您的计算机速度以及文件的大小。

```
<!-- sets the default session timeout to 60 minutes. -->
   <!-- <session-config>
     <session-timeout>60</session-timeout>
   </session-config> --> 
```

只需评论或删除即可！谭塔拉兰坦，谭谭！

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-10-27T19:03:46.117

文档说：

> session-timeout 元素定义在此 Web 应用程序中创建的所有会话的默认会话超时间隔。指定的超时必须以整数分钟数表示。如果超时为 0 或更小，则容器确保会话的默认行为永远不会超时。如果未指定此元素，则容器必须设置其默认超时期限。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-02-04T06:10:39.477

对于这个问题，您可以通过两种方式声明时间..

1）要么给你的文件读取在这段时间之间完成的时间太长。

```
<session-config>
    <session-timeout> 1000 </session-timeout>
</session-config> 
```

2）声明您的会话永不过期的时间。

```
<session-config>
    <session-timeout>-1</session-timeout>
</session-config> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-04-16T17:32:09.653

我推荐的另一个选择是创建一个单独的无状态应用程序，它可以接收大文件。在您的主应用程序上打开一个新窗口或 iframe，它将接受文件并通过该窗口发送，然后在使用 Javascript 开始上传后隐藏窗口或 iframe。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-13T10:45:48.520

如果您不希望出于某种目的发生超时：

```
<session-config>
    <session-timeout>0</session-timeout>
</session-config> 
```

应该完全没有超时 -> 无限

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-03-24T04:22:58.047

您应该考虑将大文件拆分为块并依靠多线程功能一次处理多个文件，或者使用 TimerTask 让整个进程作为后台任务运行并编写另一个查询以从浏览器中了解它的状态，包括如果您可以知道文件或记录的处理时间，则可以显示进度条。

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2013-03-13T17:55:12.660

通常，当请求处理发生时，会话不会过期。我认为有一个 LB 或介于两者之间的东西，它读取整个文件然后调用 Web 容器。

这可能会导致导致会话到期的延迟。

# python - IndexError: string index out of range.. 为什么？

> ID：15382903
> 
> 赞同：0
> 
> 时间：2013-03-13T10:36:52.477
> 
> 标签：python, for-loop

我想找到字符串的最后一个空格，然后他们在那里打破它。line_size 是线的大小，因此它会有所不同。

```
if line[line_size] != ' ':
        for x in reversed(range(line_size)):
            print line[x]
            if line [x] == ' ':
            break_line = line[x] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T10:38:17.853

你应该使用`rfind`相同的

```
In [71]: l = "hi there what do you want"

In [72]: l.rfind(' ')
Out[72]: 20 
```

`rfind`返回找到子字符串 sub 的字符串中的最高索引

你的问题似乎与`line_size`你可以去`reversed(range(len(l)))`

```
In [76]: for x in reversed(range(len(l))):
   ....:     if l[x] == ' ':
   ....:         print x
   ....:         break
   ....:
20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:39:04.940

Python 中的索引是从零开始的，因此如果`line_size = len(line)`（ 中的字符数`line`），则 的最后一个字符`line`是`line[line_size-1]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:41:22.730

假设`line_size = len(line)`，这将永远失败

```
if line[line_size] != ' ': 
```

因为第一项是`line[0]`，最后一项是`line[len(line)-1]`

# django - 如何防止浏览器的url中出现多余的斜杠

> ID：15382906
> 
> 赞同：0
> 
> 时间：2013-03-13T10:37:03.567
> 
> 标签：django

网址.py

```
url(r'^kebreading/$', 'KEBReading1',name="kebreading"),
url(r'^kebreading/(?P<param>\w*)/(?P<date>\w*)/(?P<year>\w*)/(?P<month>\w*)/$', kEBReading1',name="kebreading") 
```

我有一个视图，我将 5 个参数传递给它。当我不传递任何参数时，会调用相同的视图。但是即使我不传递任何参数，浏览器中的 url 也会附加五个斜杠。如何防止这种情况发生？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:20:19.057

You can use the regexp `?` sign to create an optional group and use `?:` so Django do not pass this group as an `*arg` parameter

Something like :

```
url(r'^kebreading/(?:(?P<param>\w*)/(?P<date>\w*)/(?P<year>\w*)/(?P<month>\w*)/)?$', kEBReading1',name="kebreading") 
```

There is a similar question [#2325433](https://stackoverflow.com/questions/2325433/making-a-regex-django-url-token-optional)

# function - 尝试编写 PostgreSQL 9.0 函数

> ID：15382907
> 
> 赞同：2
> 
> 时间：2013-03-13T10:37:03.730
> 
> 标签：function, postgresql, plpgsql

我正在尝试在 PostgreSQL 9.0 中编写一个函数。这最终将用于一个新的聚合函数，但一次一步。这是我到目前为止所拥有的：

```
create or replace function encstate(text,text) returns text as $$
DECLARE
  oldstate alias for $1;
  arg alias for $2;
BEGIN
IF length(oldstate)>0 then
  select 'Encrypted';
else if
  select '';
end if;
END; 
$$ language sql strict immutable; 
```

（我知道我还没有使用 $2 参数。）

结果是：

```
ERROR:  syntax error at or near "alias"
LINE 3:   oldstate alias for $1; 
```

当我删除`DECLARE`块并仅在正文中将参数称为 $1 等时，结果是：

```
ERROR:  syntax error at or near "if"
LINE 3:   if length($1)>0 then 
```

据我所知，我所拥有的与网上找到的示例相匹配，除了我找不到带有 if 语句的函数示例，所以我不知道我做错了什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:13:54.057

我建议将其作为 SQL 函数执行：

```
create or replace function encstate(text,text) returns text as $$

SELECT CASE WHEN length($1)>0 then 'Encrypted' ELSE '' END;

$$ language sql strict immutable; 
```

你也可以做你对另一个做的事情，但是将 sql 更改为 plpgsql。不过我的建议是，您可以在 SQL 函数中执行的操作通常应该在其中执行。您将获得更好的性能，并且计划者可以用它做更多的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:15:56.157

如果你想要一个 SQL 函数：

```
create or replace function encstate(text, text) returns text as $$
select case
    when length($1) > 0 then 'Encrypted'
    else ''
    end
;
$$ language sql strict immutable; 
```

SQL 没有变量或控制结构，因为它不是程序性的，它是声明性的。如果您想要程序功能，请使用 plpgsql 函数：

```
create or replace function encstate(text, text) returns text as $$
DECLARE
    oldstate alias for $1;
    arg alias for $2;
BEGIN
    IF length(oldstate) > 0 then
        return 'Encrypted';
    else
        return '';
    end if;
END; 
$$ language plpgsql strict immutable; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T17:07:50.120

### SQL

```
CREATE OR REPLACE FUNCTION encstate(oldstate text, arg text)
  RETURNS text LANGUAGE SQL IMMUTABLE AS
$func$
SELECT CASE WHEN $1 <> '' THEN 'Encrypted' ELSE '' END
$func$ 
```

### PL/pgSQL

```
CREATE OR REPLACE FUNCTION encstate(oldstate text, arg text)
  RETURNS text LANGUAGE plpgsql IMMUTABLE AS
$func$
BEGIN
    IF oldstat <> '' THEN
      RETURN 'Encrypted';
    ELSE
      RETURN '';
    END IF;
END 
$func$; 
```

### 要点

*   表达式`length(x) > 0`( `x`being `text`) 只排除`''`and `NULL`。使用 100% 等效表达式 `x <> ''`。无论函数是否声明，都一样简单快捷`STRICT`。

*   如果不需要，请不要使用[plpgsql 。`ALIAS`](http://www.postgresql.org/docs/current/interactive/plpgsql-declarations.html#PLPGSQL-DECLARATION-ALIAS)它只是为了兼容性和重命名预先确定的参数名称。本手册强烈反对将其用于其他目的。我从不使用它。命名参数从 8.1 版开始可用。更简单，更好。
    从 PostgreSQL 9.2 开始，在 SQL 函数中，您可以引用参数名称（而不是位置参数 ( `$1`, `$2`, ..)。在此之前命名参数仍然是一个好主意，以获取文档。

*   我*怀疑*你**不想**声明这个函数[**`STRICT`**（同义词`RETURNS NULL ON NULL INPUT`：）](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html)。就像同义词所暗示的那样，返回`NULL`（任何）`NULL`输入。似乎您想要一个空字符串 ( `''`) 代替。还有一个性能影响：
    [没有 STRICT 修饰符的函数执行得更快？](https://stackoverflow.com/questions/8455177/function-executes-faster-without-strict-modifier)

# java - JAVA JDBC 重用连接

> ID：15382913
> 
> 赞同：18
> 
> 时间：2013-03-13T10:37:20.803
> 
> 标签：java, jdbc

我有一个 Java 程序，我在其中为选择查询做一些 JDBC。是否建议每次调用 testDataBase() 从而每次调用 DBConnection() 或者我应该为所有查询重用一个连接。提前致谢。

```
private  void testDataBase(String query){
    Connection con = DBConnection();
    Statement st = null;
    ResultSet rs = null;

    try {
        st = con.createStatement();
        rs = st.executeQuery(query);
        boolean flag = true;
        while (rs.next()) {
            String resultString = "";
            for(int i = 1; i <=rs.getMetaData().getColumnCount();i++){
                resultString=resultString+" "+  rs.getString(i);
            }
            System.out.println(resultString);
        }
    } catch (SQLException e) {
        e.printStackTrace();

    } finally {
        if (st != null) {
            try {
                st.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
        if (rs != null) {
            try {
                rs.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
        if (con != null) {
            try {
                con.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
    }
}               

private  Connection DBConnection() {
    final String method_name =  "DBConnection";
    Connection conn = null;
    try{
      Class.forName(driver).newInstance();
      conn = java.sql.DriverManager.getConnection(url,userName,password);

    }catch (ClassNotFoundException e) {
        System.out.println(e.getMessage());
    } catch (SQLException e) {
        System.out.println(e.getMessage());
    } catch (InstantiationException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    }

    return conn;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T10:42:53.507

就性能而言，打开数据库连接是一项昂贵的操作。您应该使用 ConnectionPool 在不同请求之间共享连接。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T11:13:35.873

连接不是线程安全的，因此跨请求共享它们不是一个好主意。

一个更好的想法是将连接池化并使其范围尽可能窄：检查池外的连接，使用它，然后在事务范围内关闭它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-13T10:42:55.353

数据库连接是长时间运行的，应该重复使用，除非您的查询率非常低。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-13T10:44:07.027

获取数据库连接是一项相当昂贵的操作，因此建议尽可能重用连接。还可以考虑使用连接池，它将为您维护许多连接，因此您可以在需要时从池中获取一个。上面显示的方法可能不需要更改，它取决于您调用的 DBConnection() 方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-13T11:12:00.127

我完全同意@Amir Kost 的观点，在性能方面，以您可以做的最慢的操作之一打开数据库连接，如果您有限制性的实时限制，这可能是一个大问题。我不知道你是否使用框架，但一个好的做法是发布一个包装连接池的 bean，每次你需要直接与数据库交互时，你都会获得当前打开的连接（通常对应于所谓的“会话”）。我建议你（即使你没有使用任何框架）来重现这种技术性。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-13T11:17:42.120

If you want only one instance of Connection, you can make use of the Singleton pattern, you can consider :

```
public class Connector {

private static final String URL = "jdbc:mysql://localhost/";
private static final String LOGIN = "root";
private static final String PASSWORD = "azerty";
private static final String DBNAME = "videotheque";
private static Connector connector;
private static Connection connection;

private Connector() {
}

public synchronized static Connector getInstance() {
    if (connector == null) {
        connector = new Connector();
    }
    return connector;
}

public static Connection getConnection() {
    if (connection == null) {
        Connection c = null;
        try {
            Class.forName("com.mysql.jdbc.Driver");
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            c = DriverManager.getConnection(URL + DBNAME, LOGIN, PASSWORD);
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return c;
    }
    return connection;
} 
```

}

And then, you can call : `Connector.getInstance().getConnection()`

# django - Django：为什么是 keyerror 而不是验证错误？

> ID：15382914
> 
> 赞同：1
> 
> 时间：2013-03-13T10:37:21.047
> 
> 标签：django, django-forms

当一个字段为空时，为什么会出现 keyerror 而不是验证错误？这些字段应`required=True`默认为

```
class form(forms.ModelForm):
    adminAccount = forms.CharField()
    adminPassword = forms.CharField(widget=forms.PasswordInput)

    def userCheck(self, user, password):
        # do something

    def clean(self):
        self.userCheck(self.cleaned_data['adminAccount'], 
                       self.cleaned_data['adminPassword']) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:43:40.310

这是您的代码在`KeyError`这里提出：

```
self.userCheck(self.cleaned_data['adminAccount'],
               self.cleaned_data['adminPassword']) 
```

因为您试图`self.cleaned_data[field]`在未发布字段时访问。

该[文档提供了一个示例](https://docs.djangoproject.com/en/dev/ref/forms/validation/#cleaning-and-validating-fields-that-depend-on-each-other)，说明如何验证依赖于多个字段的数据。根据示例，您应该执行以下操作：

```
cleaned_data = super(form, self).clean()
adminAccount = cleaned_data.get('adminAccount')
adminPassword = cleaned_data.get('adminPassword')

if adminAccount and adminPassword:
    # proceed with your validation

return cleaned_data 
```

另外，请记住`Form.clean()`必须返回 clean_data 字典。

# c++ - 在纹理openGL顶部绘制点

> ID：15382915
> 
> 赞同：0
> 
> 时间：2013-03-13T10:37:21.167
> 
> 标签：c++, winforms, opengl, opentk

我在 GLcontrol 中绘制了一个纹理，我想在它上面绘制点。相反，我将完整的纹理设置为我要绘制的点的颜色。我想我必须禁用纹理格式并启用点图，但无法解决...

这是绘制函数：基本上要绘制的点是 ROI[0]，但只绘制点我得到了下图所示的图像（在绘制“点”之前图像是灰度的）。

```
private: void drawImg(int img){

         int w=this->glControl_create_grid->Width;
         int h=this->glControl_create_grid->Height;
         GL::MatrixMode(MatrixMode::Projection);

         GL::LoadIdentity();
         GL::Ortho(0, w, 0, h, -1, 1); // Bottom-left corner pixel has coordinate (0, 0)
         GL::Viewport(0, 0, w, h); // Use all of the glControl painting area

         GL::Clear(ClearBufferMask::ColorBufferBit | ClearBufferMask::DepthBufferBit);
         GL::ClearColor(Color::LightGray);
         GL::MatrixMode(MatrixMode::Modelview);
         GL::LoadIdentity();

         GL::Enable(EnableCap::Texture2D);
         GL::BindTexture(TextureTarget::Texture2D, img);
         OpenTK::Graphics::OpenGL::ErrorCode error=GL::GetError();
             GL::Begin(BeginMode::Quads);
                GL::TexCoord2(0, 0);
                GL::Vertex2(0 ,h);

                GL::TexCoord2(1, 0);
                GL::Vertex2(w, h);

                GL::TexCoord2(1, 1);
                GL::Vertex2(w, 0);

                GL::TexCoord2(0, 1);
                GL::Vertex2(0, 0);
            GL::End();
            GL::Disable(EnableCap::Texture2D);
            if (ROI[0].x!=0||ROI[0].y!=0){
                GL::Color3(Color::Red);
                GL::Begin(BeginMode::Points);
                GL::Vertex2(ROI[0].x,ROI[0].y);
                GL::End();
            }

    } 
```

![在此处输入图像描述](../Images/8b5334900c279158b7aceaa610dd14a8.png)

我应该在我的代码中更改什么？我似乎无法实现它......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:10:32.673

我找到了答案。似乎颜色在绑定它们时也适用于纹理，所以我只需要`GL::Color3(Color::White)`在绘制纹理之前添加。

# android - 在android中访问内容提供者

> ID：15382919
> 
> 赞同：0
> 
> 时间：2013-03-13T10:37:38.493
> 
> 标签：android, android-contentprovider

我想编写一个从内容提供商那里加载大量单词的应用程序。然后我想更新与单词相关的某些字段，即查看次数等，一次一个

访问数据的最佳方法是什么。因此，首先我将所有单词加载到 Cursor 对象中，当我想更新单词视图计数时，我是否只需调用更新事件。这将仅更新内容提供程序还是还会更新存储在光标中的获取结果

查看一个单词后，我想将其从 Cursor 对象中删除，这样它就不会再次显示，这可能吗，还是我需要进行完整查询才能再次获取所有单词

如果含糊不清或难以理解，抱歉

# c# - 父节点中的搜索节点 - xml

> ID：15382923
> 
> 赞同：1
> 
> 时间：2013-03-13T10:37:45.763
> 
> 标签：c#, xml, io

我想搜索父节点中的特定节点，

我试着这样做：

```
public string GetNodeValue(XmlNode myNode, string nodeName, string parentName)
{
  return myNode.SelectSingleNode("//"+parentName).SelectSingleNode("//"+nodeName).InnerText;
}

private void SetXmlFile(string path)
    {
       XmlDocument _doc = new XmlDocument();
        _doc.Load(path);

        foreach (XmlNode node in _doc.SelectNodes("//MyNodeName"))
        {
           GetNodeValue(node,"NodeChildeName1","NodeParentName2");
        }

    } 
```

我的 xml 看起来像这样：

```
<SomeNode Name="x">
    <a>a1</a>
    <a>a2</a>
    <a>a3</a>
</SomeNode >
<MyNodeName Name="a1">
    <NodeParentName1>
        <NodeChildeName1>0</NodeChildeName1>
        <NodeChildeName2>40</NodeChildeName1>       
    </NodeParentName1>
    <NodeParentName2>
        <NodeChildeName1>1000</NodeChildeName1>
        <NodeChildeName2>70</NodeChildeName1>       
    </NodeParentName2>
</MyNodeName > 
```

我没有得到正确的值，似乎他取的是第一个具有名称的节点，而不是父节点的第一个节点。（我得到 0 而不是 1000）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:49:53.523

GetNodeValue 中的 // 导致您的 xpath 查询从根目录开始。从您的 GetNodeValue 方法中删除 //。

```
public string GetNodeValue(XmlNode myNode, string nodeName, string parentName)
{
    return myNode.SelectSingleNode(parentName).SelectSingleNode(nodeName).InnerText;
} 
```

您也可以像这样查询文档：

```
_doc.SelectSingleNode("//MyNodeName/NodeParentName2/NodeChildeName1").InnerText 
```

顺便说一句，您发布的xml无效。 **NodeChildeName2**的结束标记为**NodeChildeName1**

# vlc - 发送者和接收者之间的http实时流同步是如何完成的？

> ID：15382924
> 
> 赞同：0
> 
> 时间：2013-03-13T10:37:51.177
> 
> 标签：vlc, http-live-streaming, libavcodec

Http直播是视频源的滑动窗口。如果发送方比接收方稍快或稍慢会发生什么？接收器将击中滑动窗口的一端。有人知道如何防止这种情况吗？作为发送者，我使用一个使用 libavcodec 的 C++ 测试程序，作为接收者，我使用 VLC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:49:26.463

更快不是问题，是吗？帧缓冲区队列已满，TCP 读取器被阻塞，TCP 堆栈缓冲区已满，TCP 堆栈滑动关闭窗口并停止通信，直到渲染器消耗帧。

更慢 - 您的选择。当所有 TCP 堆栈缓冲区和内部帧缓冲区队列都运行到零时，您可以与服务器协商以获得较低的分辨率或较低的帧速率。

# jquery - 在同一页面上使用两个 jQuery 版本

> ID：15382926
> 
> 赞同：-1
> 
> 时间：2013-03-13T10:37:55.707
> 
> 标签：jquery, twitter-bootstrap

我正在 twitter bootstrap 中制作我的项目。我正在使用带有 jQ​​uery 的文件上传脚本扩展。这个插件已经开发好了。我只是要放置它。

但是bootstrap是为其他一些jquery版本开发的，这个插件是用1.5.1版本的jQuery开发的。

我打算不导入 1.5.1 版本。会不会产生问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T10:42:12.447

如果你想包含两个js文件..你可以使用多个版本的jquery js文件使用`noConflict`..这个没有问题

```
 <!-- load jQuery1.5 -->
    <script type="text/javascript" src="jquery/jquery-1.5.js"></script>
    <script type="text/javascript">
    var jQuery_1_5 = $.noConflict(true);
    </script>

    <!-- load jQuery 1.9 -->
    <script type="text/javascript" src="jquery/jquery-1.9.js"></script>
    <script type="text/javascript">
    var jQuery_1_9= $.noConflict(true);
    </script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T10:52:18.123

如果你想使用 JQuery 1.9，有一个 JQuery Migrate 插件可能有用。

它是为您迁移到较新的 JQuery 版本而设计的。我过去使用过它，它再次添​​加了旧功能，如果您使用过折旧的功能，它会给您一个警告。

通过这种方式，您将知道文件上传插件是否使用了折旧代码并可能对其进行更新。

[http://blog.jquery.com/2013/02/16/jquery-migrate-1-1-1-released/](http://blog.jquery.com/2013/02/16/jquery-migrate-1-1-1-released/)

# android - SipDemo 的 onReceive() SipAudioCall NullPointerException 给

> ID：15382931
> 
> 赞同：1
> 
> 时间：2013-03-13T10:38:04.457
> 
> 标签：android, broadcastreceiver, sip, sip-server

我正在创建来电接收活动`SipDemo`。我的活动有两个按钮“接听电话”和“拒绝电话”。当我接到来电时，我自己的活动是打开的，例如 ----> 来电类 ----> `onReceive()`----> 转到我的呼叫选择活动。这是上面的两个按钮，例如接受和拒绝呼叫。但是当我点击“接听电话”时。一个`Nullpointer Exception`生成。它在 SipAudiocall 传入；

这是即将到来的课程：-

```
static SipAudioCall incomingCall = null;
@Override
public void onReceive(final Context context, Intent intent) {

 Intent startActivity = new Intent(); 
     startActivity.setClass(context, Mycall.class); 
      startActivity.setAction(IncomingCallReceiver.class.getName()); 
      startActivity.setFlags( 
              Intent.FLAG_ACTIVITY_NEW_TASK 
              | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS); 
      context.startActivity(startActivity);   

}

public static void acceptCall() {
    incomingCall.sendDtmf(9);
    try {
        incomingCall.sendDtmf(9);
        incomingCall.answerCall(200);
        //wtActivity.gototimer("i");
    } catch (SipException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

   // wtActivity.gototimer("i");
}

public void rejectCaLL() {
    try {
        incomingCall.endCall();
    } catch (SipException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

这是我的电话选择活动课程：-

```
public class Mycall extends Activity {

Button acct;
 IncomingCallReceiver incomingCallReceiver;
@Override
public void onCreate(Bundle savedInstanceState) {
    // Note that none of the preferences are actually defined here.
    // They're all in the XML file res/xml/preferences.xml.
    super.onCreate(savedInstanceState);
    setContentView(R.layout.my);

    acct = (Button) findViewById(R.id.button1);
    acct.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            IncomingCallReceiver.acceptCall();

        }
    });

} 
```

}

这是 AndroidManifest.xml :-

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.example.android.sip">
<application android:icon="@drawable/icon" android:label="SipDemo">
     <service android:name=".MService">

     </service>
  <activity android:name=".WalkieTalkieActivity"
      android:configChanges="orientation|keyboardHidden">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>
    <activity android:name=".SipSettings" android:label="set_preferences"/>

    <receiver android:name=".IncomingCallReceiver"   android:enabled="true" android:label="Call Receiver">
        <intent-filter>
       <action android:name="android.SipDemo.INCOMING_CALL" />
    </intent-filter>
      </receiver>
          <activity android:name=".Mycall"
               >
              </activity> 
           <activity android:name=".Myclass"/> 
</application>
<uses-sdk android:minSdkVersion="9" />
<uses-permission android:name="android.permission.USE_SIP" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>

<uses-feature android:name="android.hardware.sip.voip" android:required="true" />
<uses-feature android:name="android.hardware.wifi" android:required="true" />
<uses-feature android:name="android.hardware.microphone" android:required="true" /> 
```

请高手帮帮我。我从 1 个月开始就涉及到这个问题。

我在等你的回复。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:41:53.907

因为你的

```
IncomingCallReceiver incomingCallReceiver; 
```

在调用它时为空...如果您创建一个静态类，您必须注意在创建者方法中启动它。

创建一个抽象类：

```
public abstract class IncomingCallReceiver 
```

并将您的方法更改为`public static final`

# excel - 从动态日期范围中排除周末

> ID：15382934
> 
> 赞同：2
> 
> 时间：2013-03-13T10:38:08.577
> 
> 标签：excel, dynamic, range, date-range

我已经为表示列表中日期数组的动态范围构建了一个 OFFSET 公式。根据今天的日期，它采用从 X 周前的星期一开始到 Y 周前的星期五的日期。除了我想从我的数组输出中排除周末日期之外，一切都很愉快。

我的原始数据有时会出现多次日期，即

```
04/03/2013 = Mo
05/03/2013 = Tu
06/03/2013 = We
06/03/2013 = We
07/03/2013 = Th
08/03/2013 = Fr
09/03/2013 = Sa
10/03/2013 = Su
11/03/2013 = Mo
12/03/2013 = Tu 
```

这是我的动态范围。Calendar!$D:$D 是找到上述格式的所有日期的位置。

```
=OFFSET(Calendar!$D$1,MATCH(TODAY()+1-WEEKDAY(TODAY(),2)-14,Calendar!$D:$D,0)-1,0,MATCH(TODAY()+28-WEEKDAY(TODAY()+1),Calendar!$D:$D,0)-MATCH(TODAY()+1-WEEKDAY(TODAY(),2)-14,Calendar!$D:$D,0)+1) 
```

给定今天的日期，它会找到两周前的星期一，然后将范围扩大到 3 周前的星期五。如何使动态范围不包括周末？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:39:57.330

您实际上并不需要日期列表 - 此公式将生成相同的日期数组（仅限周一至周五），而无需参考工作表列表

`=WORKDAY(TODAY()-WEEKDAY(TODAY(),2)-14,ROW(INDIRECT("1:30")))`

适用于 Excel 2007 或更高版本

鉴于您在下面的评论，我认为上述方法不起作用，因此从两个日期之间的列表中提取工作日的替代方法可以像这样工作：

`=SMALL(IF((Range>=Start)*(Range<=End)*(WEEKDAY(Range,2)<6),Range),ROW(INDIRECT("1:"&SUM((Range>=Start)*(Range<=End)*(WEEKDAY(Range,2)<6)))))`

这将按升序为您提供所有工作日（无论列表中的顺序如何），其中 Range 是您的日期列表，Start 是所需的开始日期，End 是所需的结束日期 - 如果您愿意，我可以提供更多详细信息追求那个方法......

# java - 使用 jTDS 驱动程序时的 setResponseBuffering("adaptive")？

> ID：15382942
> 
> 赞同：2
> 
> 时间：2013-03-13T10:38:28.410
> 
> 标签：java, sql-server, sql-server-2008, jtds

v2.0 MS SQL JDBC 驱动程序允许这样设置[自适应缓冲](http://technet.microsoft.com/en-us/library/bb879937%28v=sql.100%29.aspx)：

```
SQLServerStatement SQLstmt = (SQLServerStatement) stmt;
SQLstmt.setResponseBuffering("adaptive"); 
```

这是使用时：

```
import com.microsoft.sqlserver.jdbc.SQLServerStatement; 
```

使用 jTDS 驱动程序时是否可能发生同样的事情？

# iphone - xcode：如何在按钮点击时使用翻转效果更改视图页面？

> ID：15382945
> 
> 赞同：-1
> 
> 时间：2013-03-13T10:38:42.100
> 
> 标签：iphone, ios, xcode

**下面是 ModelController.m 的代码：**

```
- (id)init
{
  self = [super init];
  if (self) {
    // Create the data model.
    DataHandler *handler = [DataHandler defaultDataHandler];
    [handler syncData];
    NSInteger tempTotal=1;//[[DataHandler defaultDataHandler] getTotalContents];
    NSMutableDictionary *favs=[Settings getSetting:kFavList];
    if(favs!=nil){
        tempTotal=[favs count]+1;
    }
    NSInteger TotalItems=tempTotal;//tempTotal>=6?tempTotal:6;
    NSInteger PageSize=6;

    NSInteger PageNo= (TotalItems/PageSize);
    if(TotalItems%PageSize!=0){
        PageNo++;
    }
    self.TotalPage=PageNo;
    NSInteger i=0,temp=PageSize;
    self.pageArray=[[NSMutableDictionary alloc] initWithCapacity:PageNo];
    for (i=0; i<PageNo; i++) {
        temp=(PageNo==i+1 && TotalItems%PageSize!=0)? TotalItems%PageSize:PageSize;
        [self.pageArray setObject:[NSString stringWithFormat:@"%d",temp] forKey:[NSString stringWithFormat:@"%d",i+1]];
    }

    //NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    //_pageData = [[dateFormatter monthSymbols] copy];
    self.pageData=[self.pageArray allKeys];
}
 return self;
}

- (HomeViewController *)viewControllerAtIndex:(NSUInteger)index {

NSLog(@"viewControllerAtIndex is called..");
// Return the data view controller for the given index.
if (([self.pageData count] == 0) || (index >= [self.pageData count])) {
    return nil;
}

// Create a new view controller and pass suitable data.
HomeViewController *homeViewController = nil;
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    homeViewController = [[[HomeViewController alloc] initWithNibName:@"HomeViewController_iPhone" bundle:nil] autorelease];
} else {
    homeViewController = [[[HomeViewController alloc] initWithNibName:@"HomeViewController_iPad" bundle:nil] autorelease];
}

homeViewController.dataObject = [self.pageData objectAtIndex:index];
homeViewController.PageItemsCount= [[self.pageArray valueForKey:[NSString stringWithFormat:@"%d",index+1]] integerValue];
homeViewController.TotalPage=self.TotalPage;
homeViewController.CurrentPage=index+1;
return homeViewController;
}

- (NSUInteger)indexOfViewController:(HomeViewController *)viewController
{   
 // Return the index of the given data view controller.
 // For simplicity, this implementation uses a static array of model objects and the view controller stores the model object; you can therefore use the model object to identify the index.

return viewController.CurrentPage-1;
}
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController
{
NSUInteger index = [self indexOfViewController:(HomeViewController *)viewController];
if ((index == 0) || (index == NSNotFound)) {
    return nil;
}

index--;
return [self viewControllerAtIndex:index];
}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController
{
NSUInteger index = [self indexOfViewController:(HomeViewController *)viewController];
if (index == NSNotFound) {
    return nil;
}

index++;
if (index == [self.pageData count]) {
    return nil;
}
return [self viewControllerAtIndex:index];
} 
```

当我滑动屏幕时这工作正常，**但我也想在主视图页面的任何按钮点击上更改屏幕**（在本例中是 homeViewController.m），因为它的代码很长，我没有在这里发布代码。

谁能告诉我如何实现这一目标？

谢谢阿什什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:49:52.747

```
[UIView beginAnimations:@"View Flip" context:nil];
[UIView setAnimationDuration:0.80];
 [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

 [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight 
                           forView:self.view cache:NO];
 [UIView commitAnimations]; 
```

//在按钮动作的点击事件中添加这一行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:43:36.143

您可以简单地尝试像这样为视图变换设置动画（对于垂直翻转）：

```
[UIView animateWithDuration:0.5 delay:0.0 options:UIViewAnimationOptionCurveEaseInOut
                 animations:^(void) {
                     view.transform = CGAffineTransformMakeScale(1, -1);
                 }
                 completion:nil]; 
```

谢谢

# jquery - JQuery Mobile - 以编程方式设置属性

> ID：15382948
> 
> 赞同：1
> 
> 时间：2013-03-13T10:38:56.020
> 
> 标签：jquery, jquery-mobile

我在 Drupal 7 主题中使用 Jquery Mobile 1.0.1。我想自定义后退按钮，但无法更改数据值的属性。

这是在 Jquery Mobile 加载之前插入的脚本：

```
var $jqm = jQuery.noConflict();
    $jqm(document).bind("pageinit", function() {
    console.log("mobileinit"); // Not loaded
$jqm(".ui-btn-left").jqmData("icon", "arrow-l"); // Thus, not set
})

$jqm(document).bind("mobileinit", function() {
  console.log("mobileinit"); // This happens though

  $jqm.mobile.ns = '';
  $jqm.mobile.autoInitializePage = 1;
  $jqm.mobile.subPageUrlKey = 'ui-page';
  $jqm.mobile.activePageClass = 'ui-page-active';
  $jqm.mobile.activeBtnClass = 'ui-btn-active';
  $jqm.mobile.ajaxEnabled = 1;
  $jqm.mobile.hashListeningEnabled = 1;
  $jqm.mobile.defaultPageTransition = 'slide';
  $jqm.mobile.defaultDialogTransition = 'pop';
  $jqm.mobile.minScrollBack = 150;
  $jqm.mobile.loadingMessage = 'indlæser';
  $jqm.mobile.pageLoadErrorMessage = 'Error';
  $jqm.mobile.linkBindingEnabled = 1;
  $jqm.mobile.pushStateEnabled = 1;
  $jqm.mobile.touchOverflowEnabled = 0;    

}); 
```

Jquery Mobile 包装后的标记看起来像

```
<a class="ui-btn-left ui-btn ui-btn-icon-left ui-btn-corner-all ui-shadow ui-btn-up-a"       data-ajax="false" data-icon="home" data-rel="home" title="Forsiden" href="/" data-theme="a"> <span class="ui-btn-inner ui-btn-corner-all"> <span class="ui-btn-text"> <span class="ui-icon ui-icon-home ui-icon-shadow"></span> </span> </a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:58:49.193

这是更改主页按钮图标的方法。更改`data-icon`不会更改图标，因为类`ui-icon-home`已添加到`span`按钮的第二个中。因此，不要更改`data-icon`, remove class `ui-icon-home`add then class `ui-icon-arrow-l`，而是执行以下操作。

**按钮**

```
<a data-role="button" data-ajax="false" data-icon="home" data-rel="home" title="Forsiden" href="/" data-theme="a">Home</a> 
```

**JQM**

```
$jqm(document).on("pageinit", function() {
 $jqm("[data-role='button'].ui-btn-left").buttonMarkup({icon: "arrow-l"});
}); 
```

# sql - Oracle 10g 递归查询

> ID：15382951
> 
> 赞同：0
> 
> 时间：2013-03-13T10:39:00.397
> 
> 标签：sql, oracle, recursion, oracle10g

我有以下递归查询，它将在 11g 中运行，但在 Oracle 10g 数据库中不受支持：

```
with st as (
    select
        rownum id,
        case  
            when rownum-1 < 1 then null
            else rownum-1
        end parent_id,
        customer, 
        tickets
    from tickets
),
st2(id, parent_id, customer, tickets, offset) as (
        select
            id, parent_id, shuffler_id, subno, contrno, tickets, 0 offset
        from st
        where id = 1
    union all
        select
            st2.id, st2.parent_id, st2.tickets, (st.tickets + st.offset) offset
        from st, st2
        where st2.parent_id = st.id
)
select * from st2 
```

我要做的是根据前一行的列`tickets`和`offset`（相同的计算列）计算每行的偏移量，并且我从偏移量为 0 的第一行开始；我需要依赖于在执行查询期间计算的列这一事实需要递归。

问题是 Oracle 10g 不支持上述查询，所以我尝试`connect by`改用哪个有效，但丑陋的部分是它的效率极低：

```
with st as (
    select
        rownum id,
        case  
            when rownum-1 < 1 then null
            else rownum-1
        end parent_id, 
        customer,
        tickets
    from tickets
)
select
    id, 
    parent_id,
    customer,
    tickets,
    (
        select nvl(sum(tickets), 0) from st
        where level <  x.id
        start with id = 1
        connect by prior id = parent_id
    ) offset
from st x 
```

使用第二个查询，我将所有先前的行求和，这可以完成这项工作，但也是多余的，我不能依赖该表何时增长到数百万条记录。

关于如何在 Oracle 10g 数据库中实现类似于第一个查询的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T11:24:14.950

```
 select 
    id, 
    customer,
    tickets,
    nvl(
      sum(tickets) over (
        order by id rows between unbounded preceding and 1 preceding
      ), 0) as offset
  from (    
    select
        rownum id,
        customer, 
        tickets
    from tickets
  ) 
```

甚至更短（不引入`id`s）

```
 select 
    customer,
    tickets,
    nvl(
      sum(tickets) over (
        order by rownum rows between unbounded preceding and 1 preceding
      ), 0) as offset
  from tickets 
```

# c# - 如何将加速度计值绑定到 Telerik Linear Guage？

> ID：15382954
> 
> 赞同：1
> 
> 时间：2013-03-13T10:39:08.153
> 
> 标签：c#, xaml, telerik, windows-phone-8

我正在使用 Telerik Linear Guage 来显示加速度计。我分别有 X、Y、Z 坐标的三个仪表。

问题在于值绑定。我使用以下代码绑定值，但它不起作用，

```
 //CodeBehind
    public string XCord { get; set; }

    public string YCord { get; set; }

    public string ZCord { get; set; }

            // Constructor
    public MainPage()
    {
        InitializeComponent();
        acc = new Accelerometer();
        acc.CurrentValueChanged += acc_CurrentValueChanged;
        acc.Start();
    }

    void acc_CurrentValueChanged(object sender, SensorReadingEventArgs<AccelerometerReading> e)
    {
        XCord = Math.Abs(acc.CurrentValue.Acceleration.X).ToString();
        YCord = Math.Abs(acc.CurrentValue.Acceleration.Y).ToString();
        ZCord = Math.Abs(acc.CurrentValue.Acceleration.Z).ToString();
    }

      <!--XAML CODE-->
     <gauges:MarkerGaugeIndicator Value="57.67"
                                             gauges:LinearGaugeRange.IndicatorOffset="40"
                                             x:Name="indicator5"
                                             IsAnimated="True"
                                             IsMarkerRotated="False">
            <gauges:MarkerGaugeIndicator.MarkerTemplate>
                <DataTemplate>
                    <Grid Width="37"
                                  Height="37">
                        <TextBlock x:Name="txt1" Text="{Binding XCord}"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Center"
                                           FontSize="13"
                                           FontWeight="Bold"/>
                    </Grid>
                </DataTemplate>
            </gauges:MarkerGaugeIndicator.MarkerTemplate>
        </gauges:MarkerGaugeIndicator>

         <gauges:MarkerGaugeIndicator Value="57.67"
                                             gauges:LinearGaugeRange.IndicatorOffset="40"
                                             x:Name="indicator6"
                                             IsAnimated="True"
                                             IsMarkerRotated="False">
            <gauges:MarkerGaugeIndicator.MarkerTemplate>
                <DataTemplate>
                    <Grid Width="37"
                                  Height="37">
                        <TextBlock x:Name="txt2" Text="{Binding YCord}"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Center"
                                           FontSize="13"
                                           FontWeight="Bold"/>
                    </Grid>
                </DataTemplate>
            </gauges:MarkerGaugeIndicator.MarkerTemplate>
        </gauges:MarkerGaugeIndicator>

         <gauges:MarkerGaugeIndicator Value="57.67"
                                             gauges:LinearGaugeRange.IndicatorOffset="40"
                                             x:Name="indicator7"
                                             IsAnimated="True"
                                             IsMarkerRotated="False">
            <gauges:MarkerGaugeIndicator.MarkerTemplate>
                <DataTemplate>
                    <Grid Width="37"
                                  Height="37">
                        <TextBlock x:Name="txt3" Text="{Binding ZCord}"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Center"
                                           FontSize="13"
                                           FontWeight="Bold"/>
                    </Grid>
                </DataTemplate>
            </gauges:MarkerGaugeIndicator.MarkerTemplate>
        </gauges:MarkerGaugeIndicator> 
```

有人说我如何将坐标值与控件绑定。

# symfony - Symfony2 + Capifony

> ID：15382956
> 
> 赞同：2
> 
> 时间：2013-03-13T10:39:14.913
> 
> 标签：symfony, deployment, capistrano, symlink, capifony

我正在尝试将 Capifony 配置为部署到我的远程服务器。我想知道的是我的`uploads`目录是否应该在.gitignore 中？运行时`cap development depoy`出现符号链接错误：

```
executing "ln -nfs /var/www/dev.xyz.co.uk/shared/web/uploads /var/www/dev.xyz.co.uk/releases/20130313103147/web/uploads"

*** [err :: x.xx.xx.xxx] ln:
*** [err :: x.xx.xx.xxx] failed to create symbolic link `/var/www/dev.xyz.co.uk/releases/20130313103147/web/uploads'
*** [err :: x.xx.xx.xxx] : No such file or directory
*** [err :: x.xx.xx.xxx] 
```

这是因为`/web/uploads`它在 .gitignore 中，所以它永远不会从 git 中拉出来以进行符号链接？

我需要先在远程服务器上克隆我的存储库还是 Capifony 为我这样做？

deploy.rb 下面：

```
set :stage_dir, 'app/config/deploy' # needed for Symfony2 only
set :stages, %w(production staging development)
require 'capistrano/ext/multistage'

set :application, "xyz.co.uk"
set :user, "root"  # The server's user for deploys

set :scm,         :git
set :repository, "git@github.com:test/#{application}.git"
set :keep_releases,  3
set :use_sudo,       false
set :shared_files,      ["app/config/parameters.yml"]
set :shared_children,   [app_path + "/logs", web_path + "/uploads", "vendor"]
set :use_composer, true
set :update_vendors, true
set :dump_assetic_assets, true
set :deploy_via, :copy

logger.level = Logger::MAX_LEVEL 
```

development.rb 下面：

```
server 'x.xx.xx.xxx', :app, :web, :primary => true
ssh_options[:port] = xxxx
ssh_options[:forward_agent] = true
set :deploy_to, "/var/www/xyz.co.uk/"
set :symfony_env_prod, "dev" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:34:55.677

有几种方法可以实现这一目标。

## 将空文件夹提交到 git：

使用以下内容创建文件 /web/uploads/.gitignore：

```
!.gitignore 
```

这将允许将目录提交到存储库，但所有内容都将被忽略。它将在每次部署时创建一个空的上传文件夹。

## 将上传创建为所有部署的共享文件夹

此方法的优点是在部署之间保留您的上传 - 可能是您想要的。

在您的 deploy.rb 中创建一个“firstdeploy”任务，该任务仅在初始部署时执行，并在此阶段创建目录：

```
run "mkdir -p #{shared_path}/web/uploads" 
```

在您的部署配置中，将其配置为共享路径，如下所示

```
set :web_path,   "web"
set :shared_children, [web_path + "/uploads"] 
```

如果有帮助，我[在这里](https://groups.google.com/forum/?fromgroups=#!topic/symfony-cmf-devs/mdTzVowc-LM)发布了我的部署脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:21:37.963

我认为您可以像 /config/parameters.yml 一样忽略它

但是您应该在共享文件夹中手动创建上传文件夹，您这样做了吗？

# symfony - symfony 学说连接刷新坚持

> ID：15382957
> 
> 赞同：4
> 
> 时间：2013-03-13T10:39:19.357
> 
> 标签：symfony, doctrine-orm, entitymanager, flush

“问题”

在探查器中：

*   选择查询
*   另一个选择查询
*   第三个查询

现在我在控制器中调用 INSERT 所以这个查询被执行

```
 $re=new Requests();
    $re->setViewed(false);
    $em->persist($add);
    $em->flush(); 
```

它会导致另一个“3”查询： ![在此处输入图像描述](../Images/12385e90d094ec7ed9404a5937372d5d.png)

可以吗？还是我做错了什么？...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T12:28:35.257

每个调用[`Doctrine\ORM\EntityManager#flush`](https://github.com/doctrine/doctrine2/blob/2.3.2/lib/Doctrine/ORM/EntityManager.php#L339-L356)都包含在一个事务中。

这意味着如果您当前的 RDBM 支持[事务](http://dev.mysql.com/doc/refman/5.6/en/commit.html)，ORM 将自动`START TRANSACTION`执行所有必要的查询，然后`COMMIT`如果一切正常，或者`ROLLBACK`发生错误。

您可以在文档中阅读更多关于 Doctrine 2 ORM 如何处理事务和并发的[信息](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/transactions-and-concurrency.html)。

# internet-explorer-7 - ie10里面的ie7模式靠谱吗？

> ID：15382963
> 
> 赞同：0
> 
> 时间：2013-03-13T10:39:25.590
> 
> 标签：internet-explorer-7, standards, mode

如果我将 IE7 标准模式仿真与 IE10 一起使用，我的网站运行良好，但完全被原生 IE7 吓坏了，几乎到处都完全弄乱了 css。

我可以在本机 IE7 上强制使用此**标准模式**，还是必须重新检查所有并手动尝试修复它？

**我已经尝试在meta**上添加这个标签：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

并且已经尝试将**doctype**设置为

```
<!doctype html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml/DTD/xhtml1-strict.dtd"> 
```

都没有成功

**编辑**：发现一件有趣的事情：如果 html 中的第一行是评论，IE7 完全搞砸了您的网站！IE7 模拟器在某些情况下（比如我的）不是这样，我们可以得到完全不同的结果！现在本机 ie7 和 ie7 模拟器给出相同的（混乱的）输出:)

# ruby - Datamapper - 模型中的下一条记录

> ID：15382967
> 
> 赞同：0
> 
> 时间：2013-03-13T10:39:35.557
> 
> 标签：ruby, sinatra, datamapper

我有一个使用 datamapper 进行数据库处理的 Sinatra 应用程序。该应用程序通过为表格中的每个 ID 显示单独的页面来工作。

该模型有一个 id 字段，它是一个序列值，它被设置为键。

目前，我使用从当前 ID 加减 1 的链接在记录之间浏览。这不太理想，因为一旦我在中间删除一条记录，它就会中断。

我可以使用 Datamapper 中的 .next 方法或其他方法来完成这项工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:11:36.713

您可以搜索下一个和上一个 id 并使用它们来构建您的链接（而不是使用您当前的 ID + 或 - 1）。

```
# Record/123 : display a record
get '/record/:id' do

  # Get record belonging to id
  @record = Record.first({id: params[:id]})

  # Get id for next record
  next = Record.first({:fields => [:id],
                       :order => :id.asc,
                       :id.gt => @record.id})
  # (or the first record)
  next = Record.first({:fields => [:id],
                       :order => :id.asc}) unless next
  @next_id = next[:id]

  # Get id for previous record
  prev = Record.last({:fields => [:id],
                      :order => :id.asc,
                      :id.lt => @record.id})
  # (or the last record)
  prev = Record.last({:fields => [:id],
                      :order => :id.asc}) unless prev
  @prev_id = prev[:id]

  # Display the record
  erb :record

end 
```

然后，您只需在视图中使用 @next_id 和 @prev_id 即可到达正确的 url。

“（或第一条记录）”部分用于在您处于末尾时移动到第一条记录（即当前一条之后没有记录）。

**编辑 ：**

```
 # Get id for next record
  next = Record.first({:fields => [:id],
                       :order => :id.asc,
                       :id.gt => @record.id}) 
```

我们需要在表中找到当前ID之后的下一个ID。使用 SQL，它是：

```
 SELECT Id                  # :fields => [:id]
   FROM   Records 
   WHERE  Id > Current_Id     # :id.gt => @record.id
   ORDER BY Id ASC            # :order => :id.asc 
```

如果没有“:fields => [:id]”，当我们只需要 ID 时，我们将有一个“SELECT *”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T20:05:47.403

```
current = Model.get id
next = Model.all(:id.gt => current.id, :order => [:id.asc]).first 
```

它抓取第一个 id 大于当前对象的对象。

# r - 列表中的日期格式更改为数字

> ID：15382978
> 
> 赞同：0
> 
> 时间：2013-03-13T10:40:11.313
> 
> 标签：r

我有一个开始日期和一个结束日期，但是当我制作一个包含其间所有日期的列表时，格式会发生变化：

```
> startDate <- as.Date("2012-01-01")
> startDate
[1] "2012-01-01"
> endDate <- as.Date("2012-02-01")
> endDate
[1] "2012-02-01"
> startDate:endDate
[1] 15340 15341 15342 15343 15344 15345 15346 15347 15348 15349 15350 15351 15352 15353 15354 15355
[17] 15356 15357 15358 15359 15360 15361 15362 15363 15364 15365 15366 15367 15368 15369 15370 15371 
```

因此您可以看到所有日期都转换为数字格式。但问题是，我有一个 API 函数只能将日期格式读取为“YYYY-MM-DD”。任何人都可以建议我如何生成这样的列表：

```
[1] "2012-01-01" "2012-01-02" "2012-01-03" "2012-01-04" .... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:44:38.763

使用`seq`功能：

```
seq(startDate,endDate,by="day") #you could use also by=1
# see ?seq.Date for other options for "by" 
```

从操作员的帮助页面`:`（使用`?":"`or `?Colon`）：

> 对于其他参数 from:to 等价于 seq(from, to)，并以 1 或 -1 的步长生成从 from 到 to 的序列。如果值与从整数到大约 1e-7 的数字模糊不同，则将包括值。非数字参数在内部（因此没有调度方法）被强制转换为数字——复杂值的虚部将被丢弃并发出警告。

所以

```
identical(startDate:endDate,as.numeric(startDate):as.numeric(endDate))
[1] TRUE 
```

顺便说一句，您正在生成一个向量，而不是一个列表。`as.list`不过，如果这是您真正想要的，您可以使用函数列出您的值。

# mysql - 如何计算 MySQL 结果中的 has-many-through 关系

> ID：15382979
> 
> 赞同：1
> 
> 时间：2013-03-13T10:40:14.500
> 
> 标签：mysql, sql, count, has-many, relational-division

有一篇很好的文章如何过滤具有多关系的结果： **[How to filter SQL results in a has-many-through relationship](https://stackoverflow.com/questions/7364969/how-to-filter-sql-results-in-a-has-many-through-relation)**

我只是在寻找 COUNT 结果的解决方案，而不是全部显示。

```
student {
    id
    name
}
club {
    id
    name
}
student_club {
    student_id
    club_id
} 
```

**CLUB1 && CLUB2 都有多少学生？**

**编辑：**从下面的链接中使用**“Martin 2”**方法 会很棒：

```
SELECT s.stud_id, s.name
FROM   student s
JOIN   student_club sc USING (stud_id)
WHERE  sc.club_id IN (30, 50)
GROUP  BY 1,2
HAVING COUNT(*) > 1; 
```

只需在 COUNT 结果中添加一些内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:44:20.870

*对两个学生来说*可能是最简单、最干净、最快的：

```
SELECT count(*) AS ct
FROM   student_club x
JOIN   student_club y USING (stud_id)
WHERE  x.club_id = 30
AND    y.club_id = 50; 
```

您根本不需要为此加入`student`表格 - 只要您知道`stud_id`您感兴趣的列表。

对于*任意数量的学生*，Martin 的查询更加方便。您可以以类似的方式简化：

```
SELECT count(*) AS ct
FROM (
   SELECT stud_id
   FROM   student_club
   WHERE  club_id IN (30, 50)
   GROUP  BY 1
   HAVING count(*) = 2 -- adapt to number of items in list
   ) x; 
```

要求`(stud_id, club_id)`当然是唯一的，并且列表项也是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:59:04.303

该查询使用表别名`student_club`和`club`. 这仅允许为两个俱乐部中的学生返回行。然后，使用`COUNT`allows返回学生人数：

```
SELECT COUNT(*) AS nb
FROM student s, student_club sc1, club c1, student_club sc2, club c2
WHERE s.id=sc1.student_id AND sc1.club_id=c1.id AND c1.name="CLUB1"
AND s.id=sc2.student_id AND sc2.club_id=c2.id AND c2.name="CLUB2" 
```

如果你真的想使用“Martin 2”查询，你可以这样计算记录数：

```
SELECT COUNT(*) AS nb
FROM (
    SELECT s.stud_id, s.name
    FROM   student s
    JOIN   student_club sc USING (stud_id)
    WHERE  sc.club_id IN (30, 50)
    GROUP  BY 1,2
    HAVING COUNT(*) > 1
) tmp; 
```

# django - Django 模板 {% if x.number == 0 %} 不起作用

> ID：15382993
> 
> 赞同：2
> 
> 时间：2013-03-13T10:41:11.220
> 
> 标签：django

这`{% if x.number == 1 %}`和`{% if x.number == 2 %}`工作好

但`{% if x.number == 0 %}`不起作用。为什么？

```
 {% for d in data %}
    {% for x in d.animalnumber_set.all %}

        {{ x.number }} <!-- Nothing displays. ->
        {% if x.number == 1 %}
            <p>Something</p>
        {% endif %}

        {% if x.number == 2 %}
            <p>Something 2</p>
        {% endif %}

        {% if x.number == 0 %}
            <p>Nothing</p>
        {% endif %}
    {% endfor %}
  {% endfor %} 
```

编辑：

在数据库`number`字段中是`choices`. 如何更换`{% if x.number == 0 %}`？`== None`也不起作用。

```
----
1
2
3
4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T10:53:00.087

如果数据没有值或为 0，则使用`not`

```
{% if not x.number %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T11:24:48.997

如果可用选项在 1-6 之间，为什么要检查 x.number == 0？这永远不会发生。

如果用户没有任何动物编号，则 d.animalnumber_set.all 将返回 None。所以控制将是检查 x 是否为空

```
{% for d in data %}
    {% for x in d.animalnumber_set.all %}

        {% if x.number == 1 %}
            <p>Something</p>
        {% endif %}

        {% if x.number == 2 %}
            <p>Something 2</p>
        {% endif %}
    {% empty %}
        <p>Nothing</p>
    {% endfor %}
{% endfor %} 
```

# php - 将会话数据发布到 Mysql 数据库中的列中

> ID：15382996
> 
> 赞同：0
> 
> 时间：2013-03-13T10:41:15.080
> 
> 标签：php, html, mysql

我正在尝试使用会话中的数据更新我的事务表中的列。我将会话数据存储如下

```
$session_mem_id = $_SESSION['mem_id'];
$member_data  = member_data($session_mem_id, 'mem_id', 'mem_email', 'mem_password', 'mem_address', 'mem_city', 'mem_postcode', 'mem_county', 'mem_country', 'mem_first_name', 'mem_last_name', 'password_recover', 'allow_email', 'admin', 'mem_tel'); 
```

我使用这些数据来更新我的表，如下所示

```
function createTransaction($member_data){
    // Insert into the transactions table
    $query1 = mysql_query("INSERT INTO `transactions` (mem_id, OrderDate, ship_phone, ship_address, ship_city, ship_county, ship_postcode, ship_country) VALUES('{$_SESSION['mem_id']}', NOW(), '{$member_data['mem_tel']}', '{$member_data['mem_address']}', '{$member_data['mem_city']}', '{$member_data['mem_county']}', '{$member_data['mem_postcode']}', '{$member_data['mem_country']}')") or die(mysql_error());
} 
```

我没有收到错误，但是在我的表上更新的唯一列是**mem_id**、**orderdate**和**OrderId**作为它的**auto_increment**。没有数据解析存储在我的`$member_data` If I var_dump($member_data) 我得到以下

```
array(14) { ["mem_id"]=> string(2) "11" ["mem_email"]=> string(26) "j.hfbgb92@gmail.com" ["mem_password"]=> string(8) "password" ["mem_address"]=> string(16) "54 bvcbv drive" ["mem_city"]=> string(9) "Mggbone" ["mem_postcode"]=> string(8) "gb14 4gb" ["mem_county"]=> string(4) "Kent" ["mem_country"]=> string(14) "United Kingdom" ["mem_first_name"]=> string(4) "Bob" ["mem_last_name"]=> string(12) "Smith" ["password_recover"]=> string(1) "0" ["allow_email"]=> string(1) "1" ["admin"]=> string(1) "1" ["mem_tel"]=> string(11) "07900186785" } 
```

我的 member_data 函数是 function member_data($mem_id) { $data = array(); $mem_id = (int)$mem_id;

```
$func_num_args = func_num_args();
$func_get_args = func_get_args();

if($func_num_args > 1) {
    unset ($func_get_args[0]);

    $fields = '`' . implode('`, `', $func_get_args) . '`';
    $data = mysql_fetch_assoc(mysql_query("SELECT $fields FROM members WHERE mem_id = '$mem_id'"));

    return $data;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:51:44.357

问题可能是会话尚未开始。

在这种情况下：

`session_start();`

在输出任何内容之前将解决此问题。

尝试输出 , 的内容`$_SESSION['mem_id'];`，然后再将其存储到数据库中以确保已设置。

此外，还请确保在将变量存储到数据库之前对其进行转义。

所以你的变量赋值应该是这样的：

`$session_mem_id = mysql_real_escape_string($_SESSION['mem_id']);`

[这是针对SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)的安全预防措施。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:03:44.897

我会尝试像这样重写查询：

```
 $query = sprintf("INSERT INTO `transactions` (mem_id, OrderDate, ship_phone, ship_address, ship_city, ship_county, ship_postcode, ship_country) VALUES('%s','%s','%s','%s','%s','%s','%s','%s')", $_SESSION['mem_id'], NOW(), $member_data['mem_tel'], $member_data['mem_address'], $member_data['mem_city'], $member_data['mem_county'], $member_data['mem_postcode'], $member_data['mem_country']);
  $query1 = mysql_query($query) or die(mysql_error()); 
```

您还可以插入以开头的`echo`后行`$query`并检查您的查询语句是否正确。