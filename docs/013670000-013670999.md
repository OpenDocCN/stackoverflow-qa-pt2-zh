# StackOverflow 问答 13670000-13670999

# linux - 等待零信号量操作的确切功能是什么？

> ID：13670003
> 
> 赞同：0
> 
> 时间：2012-12-02T14:04:24.623
> 
> 标签：linux, process, semaphore

我正在使用 System V 信号量，并希望在启动时阻止一个进程，并在完成其关键部分后等待另一个进程启动特定的信号量。
我认为 sem_op = 0 是正确的做法。

所以我用 1 初始化信号量。
然后在进程 A，需要阻止我使用 sem_op = 0 以等待信号量变为 0。在进程 BI 使用 sem_op = -1。（所以这使得 semaphore.val = 0）。

当另一个成功关闭信号量时，应该阻止的进程在标准输出上打印。

等待零功能实际上做了什么，我该如何正确使用它？

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:44:40.673

根据手册， semop = 0 是“等待零”操作。所以你的算法应该有效。但是，最好使用传统的 P 和 V 运算符来解决这些问题，其中 P 表示 semop = -1，V 表示 semop = +1。所以如果信号量的初始值为0，进程A应该做一个P操作并阻塞。进程 B 应完成其临界区并执行 V 操作。进程 B 执行 V 操作后，进程 A 的 P 操作就完成了，它可以继续前进。

# python - 在scrapy 0.16中，如何更改通过图像管道下载的图像的文件名？

> ID：13670006
> 
> 赞同：1
> 
> 时间：2012-12-02T14:04:36.983
> 
> 标签：python, scrapy, pipeline

我想将下载图像的文件名从它现在得到的哈希值更改为图像 alt 标签或类似的东西。

```
from scrapy.http import Request
from scrapy.contrib.pipeline.images import ImagesPipeline
from scrapy.exceptions import DropItem
from scrapy.http import Request

class DocosPipeline(object):
    def process_item(self, item, spider):
        return item

class DocosImagesPipeline(ImagesPipeline):

def get_media_requests(self, item, info):
    for image_url in item['image_urls']:
        yield Request(image_url)

def item_completed(self, results, item, info):
    image_paths = [x['path'] for ok, x in results if ok]
    if not image_paths:
        raise DropItem("Item contains no images")
    item['image_paths'] = image_paths
    return item 
```

我尝试过覆盖 image_key 类，但似乎无法正确处理。这是课程：

```
def image_key(self, url):
    image_guid = hashlib.sha1(url).hexdigest()
    return 'full/%s.jpg' % (image_guid) 
```

我真的被困在这里，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:43:30.553

我不确定您将 image_key 类放在哪里，但是下面的代码对我来说很好用

```
class MyImagesPipeline(ImagesPipeline):

    #Name download version
    def image_key(self, url):
        image_guid = url.split('/')[-1]
        return 'full/%s' % (image_guid)

    def get_media_requests(self, item, info): 
```

# bash - 根据内容删除两行之间的文本块

> ID：13670009
> 
> 赞同：1
> 
> 时间：2012-12-02T14:04:50.307
> 
> 标签：bash, sed, awk

我需要删除/过滤一个非常大的日志文件，如果此文本块包含需要删除的单词，我设法将日志文件放入以包含现在的行开始`<--` 或`-->`以包含现在的行结束的文本块中。`Content-Length:``REGISTER`

我找到了流动的例子：

```
 # sed script to delete a block if /regex/ matches inside it
 :t
 /start/,/end/ {    # For each line between these block markers..
    /end/!{         #   If we are not at the /end/ marker
       $!{          #     nor the last line of the file,
          N;        #     add the Next line to the pattern space
          bt
       }            #   and branch (loop back) to the :t label.
    }               # This line matches the /end/ marker.
    /regex/d;       # If /regex/ matches, delete the block.
 }                  # Otherwise, the block will be printed.
 #---end of script--- 
```

由罗素戴维斯在[此](http://sed.sourceforge.net/sedfaq4.html)页面上撰写

但我不知道如何将其传输到单行语句以在管道中使用我的目标是`tail -F`将日志文件的一个管道传输到最终版本，以便它按分钟获得更新

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T15:05:28.150

试试这个：

```
awk '/<--|-->/{rec=""; f=1} f{rec = rec $0 ORS} /Content-Length:/{ if (f && (rec !~ "REGISTER")) printf "%s",rec; f=0}' file 
```

如果它不符合您的要求，请提供有关您想要的更多信息以及示例输入和输出。

为了分解上述内容，以下是单独的行中的每个语句，并带有一些注释：

```
awk '
   /<--|-->/ {rec=""; f=1} # find the start of the record, reset the string to hold it and set a flag to indicate we've started processing a record
   f {rec = rec $0 ORS}    # append to the end of the string containing the current record
   /Content-Length:/{      # find the end of the record
      if (f && (rec !~ "REGISTER")) # print the record if it doesn't contain "REGISTER"
         printf "%s",rec
      f=0                  # clear the "found record" indicator
   }
' file 
```

如果您的记录之间有要打印的文本，只需为未设置的“found”标志添加一个测试并调用打印当前记录的默认操作（**!f;**）

```
awk '/<--|-->/{rec=""; f=1} f{rec = rec $0 ORS} !f; /Content-Length:/{ if (f && (rec !~ "REGISTER")) printf "%s",rec; f=0}' file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T19:19:42.830

这可能对你有用（GNU sed）；

```
sed '/<--\|-->/!b;:a;/Content-Length/!{$!{N;ba}};//{/REGISTER/d}' file 
```

*   `/<--\|-->/!b`如果一行不包含`<--`或`-->`打印它
*   `:a;/Content-Length/!{$!{N;ba}}`继续追加行，直到`Content-Length`遇到字符串或文件结尾。
*   `//{/REGISTER/d}`如果读入的行包含`Content-Length`并`REGISTER`删除它/它们，则正常打印它/它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T14:18:24.823

如果我正确地得到了你需要的东西，你想过滤掉块，那就是只打印块：

```
tail -f logfile | sed -n '/\(<--\|-->\)/,/Content-Length:/ p' 
```

如果你想删除它：

```
tail -f logfile | sed '/\(<--\|-->\)/,/Content-Length:/ d' 
```

# apache - 没有名为 jinja2 的模块

> ID：13670011
> 
> 赞同：3
> 
> 时间：2012-12-02T14:05:00.057
> 
> 标签：apache, python-3.x, virtualenv, pip, ubuntu-12.04

我试图在我的 Ubuntu 12.04 服务器上部署一个 Python3.2 应用程序。一切都很好，直到我尝试使用 Jinja2 作为我的模板系统。

我使用**virtualenv**来使用 Pyhon3.2 而不是 Python2，并且我已经安装了其他必需的库，例如 pymongo 或 bottle 没有问题。但是现在，我的应用程序失败了，因为它说

```
ImportError: No module named jinja2 
```

我安装 jinja2 的方式与安装 pymongo 或 bottle 的方式相同（在 virtualenv 中使用 pip），它们工作得很好。如果我尝试再次安装它：

```
./virtualenv/bin/pip-3.2 install jinja2
Requirement already satisfied (use --upgrade to upgrade): jinja2 in /var/www/virtualenv/lib/python3.2/site-packages
Cleaning up... 
```

它说它已安装。我尝试卸载并再次安装，但没有成功。我尝试使用 mod_wsgi 运行应用程序，并且我知道它使用了正确的 virtualenv，因为我没有收到任何错误，因为 Pymongo、Bottle 以及使用 virtualenv pip 安装的内容。

有任何想法吗？:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-06-27T08:39:56.463

Jijna 与 Python 3.2 不兼容。看到[这个](http://jinja.pocoo.org/docs/2.10/intro/)

# ruby-on-rails - Rails 使用附加模型进行设计注册

> ID：13670013
> 
> 赞同：8
> 
> 时间：2012-12-02T14:05:27.797
> 
> 标签：ruby-on-rails, devise, ruby-on-rails-3.2

我已经搜索了大约一个小时，发现了大量描述如何向 Devise 用户模型添加字段的问题。但是，我找不到任何可以清楚地解释如何将一个或多个模型添加到注册过程的方法。

在注册时，我希望用户填写电子邮件地址、密码以及我的客户模型、公司模型和地址模型（这样我就拥有了 web 应用程序正常运行所需的所有信息）。

我的模型是这样的

**用户.rb**

> ```
> class User < ActiveRecord::Base
>   devise :database_authenticatable, :registerable,
>          :recoverable, :rememberable, :trackable, :validatable
> 
>   attr_accessible :email, :password, :password_confirmation, :remember_me, :client
> 
>   belongs_to :client
> end 
> ```

**客户端.rb**

> ```
> class Client < ActiveRecord::Base
>   attr_accessible :bankaccount, :email, :logo, :mobile, :phone, :website
> 
>   has_many :users
> 
>   has_one :company
>   has_one :address
>   accepts_nested_attributes_for :company, :address
> end 
> ```

我认为这样做的唯一方法是创建自己的 RegistrationsController 以便我可以这样做`@client = Client.new`，然后在我的视图中这样做：

> ```
>  <%= f.simple_fields_for @client do |ff| %>
>   <%= f.simple_fields_for :company do |fff| %>
>     <% field_set_tag t(:company) do %>
>       <%= ff.input :name %>
>     <% end %>
>   <% end %>
>   <%= f.simple_fields_for :address do |fff| %>
>     //address inputs
>     <% end %>
>   <% end %>
> 
>   <fieldset>
>     <legend><%= t(:other) %></legend>
>     // other inputs
>   </fieldset>
> <% end %> 
> ```

我需要它以这种方式工作的原因是因为我有多个用户可以代表同一个客户端（因此需要访问相同的数据）。我的客户拥有应用程序中的所有数据，因此需要在使用应用程序之前创建。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T08:32:51.767

好的，我花了大约 8 个小时，但我终于想出了如何让它工作（如果有人有更好/更清洁的方法，请告诉我）。

首先，我创建了自己的`Devise::RegistrationsController`以正确构建资源：

```
class Users::RegistrationsController < Devise::RegistrationsController

  def new
    resource = build_resource({})
    resource.build_client
    resource.client.build_company
    resource.client.build_address
    respond_with resource
  end

end 
```

之后我只需要调整 config/routes.rb 以使其工作：

```
devise_for :users, :controllers => { :registrations => "users/registrations" } do
    get '/users/sign_up', :to => 'users/registrations#new'
  end 
```

我的设计/注册/new.html.erb 中也有错误。它应该是`f.simple_fields_for :client`而不是`f.simple_fields_for @client`.

现在它正确地为嵌套属性创建了所有对象，并在保存资源时自动保存它。

# javascript - javascript / jquery - 如何将我点击的元素的引用传递给我的函数

> ID：13670015
> 
> 赞同：2
> 
> 时间：2012-12-02T14:05:48.003
> 
> 标签：javascript, jquery

我目前有以下事件处理程序：

```
$('#mainc').on("click", "ul.sort_ul li, ul.cat_items li", leftsort_click); 
```

然后调用 leftsort_click 函数，开始如下：

```
function leftsort_click(event) {
     if (!$(this).hasClass('sort_cat')) {
     .... 
```

所有这一切都很好，问题是我现在正在从整个商店调用这个左键单击功能，我需要某种方式知道它是从哪里调用的。

我的方法是在触发函数的元素中添加一个 just_clicked 类。

因此，例如，我的下一页点击事件调用 leftsort_click，如下所示：

```
$('body').on("click", ".next_link", function(event) {
    event.preventDefault();
    if (!$(this).hasClass('disabled')) {
        var active_rps=$('.res_page_select.active a').html().trim();
        var new_rps =  parseInt(active_rps)+1;
        var new_rps_div = 'page_select_'+new_rps;
        $('#'+new_rps_div).addClass('just_clicked');
        var active_page = $('ul.sort_ul li.active, ul.cat_items li.active').attr('id');
        $('#'+ active_page).trigger('click');
    }
  }); 
```

现在的问题是，如何在保留对单击元素的引用（this）的同时从第一个事件处理程序调用我的函数。这样我就可以做这样的事情：

```
$('#mainc').on("click", "ul.sort_ul li, ul.cat_items li", function(event){
    $(this).addClass('just_clicked');
    leftsort_click(this);
    }); 
```

当我执行上述操作时，我对此（单击的元素）的引用丢失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:19:24.030

试试这个：

```
$('#mainc').on("click", "ul.sort_ul li, ul.cat_items li", function(event){
    $(this).addClass('just_clicked');
    leftsort_click.call(this);
}); 
```

# visual-studio-2012 - Visual Studio 2012 - 是否有将文件从快速视图移动到打开文件的键盘快捷键

> ID：13670019
> 
> 赞同：19
> 
> 时间：2012-12-02T14:06:22.550
> 
> 标签：visual-studio-2012

我通常用鼠标单击“保持打开”图标。
有没有办法用键盘做到这一点？
谢谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-06-20T18:51:23.930

光标位于预览窗口时的默认 Visual Studio 2012 键盘快捷键：

`Ctrl`+ `Alt`+`Home`

它绝对可以按照[JMik 的描述](https://stackoverflow.com/a/13670069/48700)进行修改，但这会让某人快速上手。同样，您还可以[完全终止预览系统](https://stackoverflow.com/a/12799031/48700)，以便所有窗口无限期打开，并且不需要此快捷方式。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-02T14:11:55.967

按 Ctrl+Q，然后键入`"keyboard"`并按 Enter 打开`"Options->Environment->Keyboard"`窗口。

在“显示包含的命令”中键入**“Window.KeepTabOpen”**，然后`"Press shortcut keys"`键入您的键盘快捷键并按`"Assign"`.

# bash - bash 扫描数百万个文件并快速扫描一个值

> ID：13670020
> 
> 赞同：3
> 
> 时间：2012-12-02T14:06:31.047
> 
> 标签：bash, shell

我在一个文件夹（嵌套）中有数百万个文件。我需要从这些文件中扫描一个值并打印包含该值的行（比如`LINE_TXT`）。早些时候，我曾经对每个文件进行 sed，但过去需要 45 分钟才能完成此操作。我之前的解决方案是这样的：

```
FILES=$(find $1 -type f -name 'filename.txt')
for f in $FILES
do
    if [[ "$LINE" == *LINE_TXT* ]]; then
        echo $LINE
    fi
done 
```

我发现 pipemill 是实现这一目标的最佳方式。我的主要解决方案是这样的：

```
makefifo mypipe
find $1 -type f -name 'filename.txt' | xargs cat > my pipe &
while read -r LINE
do
    if [[ "$LINE" == *LINE_TXT* ]]; then
        echo $LINE
    fi
done << mypipe 
```

运行时间约为 1 分钟。我可以进一步改进吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T14:15:17.070

在我看来，更少的脚本开销会使事情变得更快。

```
fgrep -r -h 'LINE_TXT' $1 
```

只需让 grep 使用`-r`. 如果您不希望其输出在其输出中包含文件名，请包含该`-h`选项。您可以通过后处理所需的任何内容来管道其输出。

如果您只想搜索特定文件名，则 grep 的`-r`选项有其自己的选项：`--include`和`--exclude`，在其手册页中提到。例如：

```
fgrep -h -r --include '*/filename.txt' 'LINE_TXT' $1 
```

尽管该`find`命令非常出色，并且在某些情况下非常宝贵，但如果您可以使用内置于单个工具（如 ）中的选项`grep`，您将产生更少的开销。该`find`命令不查看文件内部，因此它仍然必须`grep`为每个文件启动。如果您确实想使用`find`，它可能看起来像这样：

```
find $1 -name 'filename.txt' -exec fgrep 'LINE_EXT' {} \; 
```

这样做的好处是让您可以访问`find`的目录搜索功能，但如果您只想在目录树中查找一个特别命名的文件，那么 grep`-r --include`可能就足够了，而且运行速度肯定会更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T14:09:13.740

是的`find $1 -type f -name 'filename.txt' | xargs fgrep LINE_TXT`，如果您只想在任何这些文件中找到“LINE_TXT”的所有匹配项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-16T06:52:19.747

这是工具[ack](https://beyondgrep.com/)、[ag](https://geoff.greer.fm/ag/)和[ripgrep](https://github.com/BurntSushi/ripgrep)的确切用例。它们不仅比 使用起来更方便`grep -r`，而且至少后两者也快得多。

# android - 共享信息表单活动以查看。空指针异常

> ID：13670025
> 
> 赞同：0
> 
> 时间：2012-12-02T14:06:50.590
> 
> 标签：android, layout, view, android-activity

我有一个布局，在那里，我有 View（类似这样的东西）![一个](../Images/d65cecb4a4017ea8fd632fedb32f81b7.png)）：

```
<app.piotrek.learning.EObrazView
        android:id="@+id/myView"
        android:layout_width="match_parent"
        android:layout_height="match_parent" /> 
```

在这个视图中，用户可以绘制一些东西 :) 屏幕底部有六个按钮。我想做的是，如果用户单击按钮，视图中的功能就会运行。我已经这样做了：

```
public class EObraz extends Activity {
[...]
EObrazView view1;
ImageButton minus;
ImageButton plus;
ImageButton kolo;
ImageButton strzalka;
ImageButton color;
ImageButton obrot;
Button menu;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.edytujobraz);
    context = getApplicationContext();

    view1 = (EObrazView) findViewById(R.id.myView);
    minus = (ImageButton) findViewById(R.id.imageButton1);
    plus = (ImageButton) findViewById(R.id.imageButton2);
    kolo = (ImageButton) findViewById(R.id.imageButton3);
    strzalka = (ImageButton) findViewById(R.id.imageButton4);
    color = (ImageButton) findViewById(R.id.imageButton5);
    obrot = (ImageButton) findViewById(R.id.imageButton6);
    menu = (Button) findViewById(R.id.button1);

    bundle = getIntent().getExtras();
    sciezka_z_obrazem = bundle.getString("obrazeksciezka");
    Uri myUri = Uri.parse(sciezka_z_obrazem);

    try {
        wo = MediaStore.Images.Media.getBitmap(
                getContentResolver(), myUri);
    } catch (Exception e) {

    }

    //wo = scaleImages(wo, mWidth, ((float) wo.getHeight() / (float) wo.getWidth()) * (float) (mWidth), 0);
    if(wo != null){
    view1.newImage(wo); //THERE IS AN ERROR: NULLPOINTEREXCEPTION
    } 
```

在这一行（行号 #69）：

```
view1.newImage(wo); //THERE IS AN ERROR: NULLPOINTEREXCEPTION 
```

是不是错误：

```
12-02 15:05:24.858: E/AndroidRuntime(10315): FATAL EXCEPTION: main
12-02 15:05:24.858: E/AndroidRuntime(10315): java.lang.RuntimeException: Unable to start activity ComponentInfo{app.piotrek.learning/app.piotrek.learning.EObraz}: java.lang.NullPointerException
12-02 15:05:24.858: E/AndroidRuntime(10315):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2185)
12-02 15:05:24.858: E/AndroidRuntime(10315):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2210)
12-02 15:05:24.858: E/AndroidRuntime(10315):    at android.app.ActivityThread.access$600(ActivityThread.java:142)
12-02 15:05:24.858: E/AndroidRuntime(10315):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1208)
12-02 15:05:24.858: E/AndroidRuntime(10315):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-02 15:05:24.858: E/AndroidRuntime(10315):    at android.os.Looper.loop(Looper.java:137)
12-02 15:05:24.858: E/AndroidRuntime(10315):    at android.app.ActivityThread.main(ActivityThread.java:4931)
12-02 15:05:24.858: E/AndroidRuntime(10315):    at java.lang.reflect.Method.invokeNative(Native Method)
12-02 15:05:24.858: E/AndroidRuntime(10315):    at java.lang.reflect.Method.invoke(Method.java:511)
12-02 15:05:24.858: E/AndroidRuntime(10315):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
12-02 15:05:24.858: E/AndroidRuntime(10315):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
12-02 15:05:24.858: E/AndroidRuntime(10315):    at dalvik.system.NativeStart.main(Native Method)
12-02 15:05:24.858: E/AndroidRuntime(10315): Caused by: java.lang.NullPointerException
12-02 15:05:24.858: E/AndroidRuntime(10315):    at app.piotrek.learning.EObraz.onCreate(EObraz.java:69)
12-02 15:05:24.858: E/AndroidRuntime(10315):    at android.app.Activity.performCreate(Activity.java:5008)
12-02 15:05:24.858: E/AndroidRuntime(10315):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
12-02 15:05:24.858: E/AndroidRuntime(10315):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2139)
12-02 15:05:24.858: E/AndroidRuntime(10315):    ... 11 more 
```

怎么了？

# c# - 为什么使用 Chrome 时 ActivationUri 为空？

> ID：13670030
> 
> 赞同：1
> 
> 时间：2012-12-02T14:07:19.617
> 
> 标签：c#, .net, google-chrome, deployment, clickonce

在IE中运行URL“http://localhost/?Id=User1”，ApplicationDeployment.CurrentDeployment.ActivationUri.Query返回“?Id=User1”，没错。

在 Chrome 中运行 URL“http://localhost/?Id=User1”时，ApplicationDeployment.CurrentDeployment.ActivationUri 为空，为什么？如何解决这个问题？

这是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;
using System.Deployment;
using System.Deployment.Application;

namespace COSample
{
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            if (ApplicationDeployment.IsNetworkDeployed)
            {
                MessageBox.Show("Network");
                MessageBox.Show(ApplicationDeployment.CurrentDeployment.ActivationUri.Query);
            }
            else
                MessageBox.Show("Local");
            Application.Run(new Form1());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:36:46.280

您是否安装了[适用于 Chrome 的 ClickOnce 插件](https://chrome.google.com/webstore/detail/clickonce-for-google-chro/eeifaoomkminpbeebjdmdojbhmagnncl#detail/clickonce-for-google-chro/eeifaoomkminpbeebjdmdojbhmagnncl)？

要在 Click Once 应用程序中使用查询参数，请查看[这篇文章](http://robindotnet.wordpress.com/2010/03/21/how-to-pass-arguments-to-an-offline-clickonce-application/)。它谈到在在线/离线应用程序中使用它们，但代码可以以任何方式工作。

# php - 这是我用于查看用户个人资料的 php

> ID：13670031
> 
> 赞同：1
> 
> 时间：2012-12-02T14:07:20.210
> 
> 标签：php, mysql

**我的个人资料 php**

```
<?php
//profile.php

require_once 'includes/global.php';

//check to see if they're logged in
if(!isset($_SESSION['logged_in'])) {
    header("Location: login.php");
}

// finding user and viewing it
$tools = new FindUser();
$user = $tools->get($_REQUEST['userID']);

?> 
```

这是我用于查看用户配置文件的 php。

[http://mywebsite.com/profile.php?userID=5](http://mywebsite.com/profile.php?userID=5)它以这种方式工作正常。

我希望我的代码检查用户是否在数据库中可用，例如，如果我添加`?userID=10`数据库中不存在的用户，它会给出 mysql 错误，或者即使我使用`http://mywebsite.com/profile.php`它也会给出错误。

所以现在我想如果用户在数据库中不可用，它应该给该用户不可用，当我们使用简单时`http://mywebsite.com/profile.php`，它应该自动将其添加到`userID=1`或重定向到 home.php

如果有其他方法可以做到这一点，请告诉我。好吧，我是这个领域的新手

感谢您查看我的问题并回答:)

**解决了**

```
<?php
//profile.php

require_once 'includes/global.php';

//check to see if they're logged in
if(!isset($_SESSION['logged_in'])) {
    header("Location: login.php");
}

$UserID = $_GET['userID'];
$CheckQuery = mysql_query("SELECT * FROM users WHERE id='$UserID'");

$CheckNumber = mysql_num_rows($CheckQuery);
if ($CheckNumber !== 1)
{
    header("Location: index.php");
}

// finding user and viewing it
$tools = new FindUser();
$user = $tools->get($_REQUEST['userID']);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:10:18.260

如果在数据库中找不到数据而不是重定向，则检查该查询是否给出结果

```
$result = mysql_query(...);

if(mysql_num_rows($result) !=1){ //

 header("Location:signup.php");
  exit();
} 
```

你不应该使用 MySQL 因为它已经贬值了，要么使用`PDO`要么`mysqli`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T14:13:39.317

你不应该使用`MySQL`它已经贬值了，

如果您真的想使用 MySQL，您可以在脚本开头检查用户 ID 是否有行数，例如：

```
<?
    $UserID = $_GET['UserID'];
    $UserID = mysql_real_escape_string($UserID);
    $CheckQuery = mysql_query("SELECT * FROM users WHERE userID='$UserID'");

    $CheckNumber = mysql_num_rows($CheckQuery);
    if ($CheckNumber !== 1)
    {

    // Do something If user is Not Found
    // Redirect to Another Page OR Something
    }
?> 
```

# java - 分配默认值

> ID：13670036
> 
> 赞同：0
> 
> 时间：2012-12-02T14:08:04.853
> 
> 标签：java, android, exception, connection, serversocket

```
 URL test = null;
        String inputLine = null;
        BufferedReader in = null;
        try {
            test = new URL("http://localhost/out.php"); // if connection down
        } catch (MalformedURLException e) {
            inputLine = "test_synntax";
        }
        try {
        in = new BufferedReader(new InputStreamReader(test.openStream()));
        ... 
```

> 如果默认情况下 URL 解析失败，如何为 inputline 分配一个值在示例上下文中不是 wifi/3g 连接 disponible，谢谢大家好日子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:11:32.540

```
try {
  test = new URL("http://localhost/out.php");
  //I believe you need this and it throws IOException on timeout. 
  //Though it's still unclear to me what you mean by 'resolution' and 'disponible wifi/3g`?
  test.openConnection(); 
} catch (MalformedURLException | IOException e) { 
  inputLine = "test_synntax";
} 
```

请注意，这是 java 的 7 种多捕获语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T14:11:42.237

**-**如果**wifi/3g**出现故障，它会给出`UnknownHostException`.

**所以你可以这样处理它们......**

```
try {
            test = new URL("http://localhost/out.php");

        } catch (UnknownHostException e) {

            inputLine = "Connection error";
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T14:15:12.857

您需要先调用`URL.openConnection`，然后将默认值放入`IOException`块中：

```
try {
   test = new URL("http://localhost/out.php");
   URLConnection urlConn = test.openConnection();
   in = new BufferedReader(new InputStreamReader(urlConn.getInputStream()));
} catch (MalformedURLException e) {
    inputLine = "test_synntax";
} catch (IOException e) {
    inputLine = "test_synntax";
} 
```

# c# - C# 中的类友谊、保护和可访问性级别

> ID：13670037
> 
> 赞同：1
> 
> 时间：2012-12-02T14:08:09.643
> 
> 标签：c#, levels

我正在为我在这里找不到的 M 班的一名成员寻找一种特殊的访问级别，例如 c# 中的友谊：http: [//msdn.microsoft.com/en-us/library/ba0a1yw2.aspx](http://msdn.microsoft.com/en-us/library/ba0a1yw2.aspx)

## 问题一：

假设我的类 M 中有一个秘密值，例如密码，我不希望任何对象可以访问它，但由于某些原因，我希望只有类 M 的其他实例可以读取和使用这个值，例如：m1.similarity (m2) ==> 计算 m1.password 和 m2.password 之间的相似度

## 问题2：

如果没有办法实现前面的例子，是否可以定义一个朋友类，如下所示： anotherclass.similarity(m1,m2)

ps：这只是一个让问题清晰的例子，我知道方法相似性（）可能对安全造成的影响

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T15:07:10.503

谢谢大家，我终于用这样的辅助方法解决了这个问题：

```
int Similiarity (M other)
{
return other.SimiliarityHelper(this.password)
}

int SimiliarityHelper (string otherpass){
return compareString(this.password, otherpass)
} 
```

# php - Amazon S3 putObject() - 不工作 - PHP

> ID：13670040
> 
> 赞同：2
> 
> 时间：2012-12-02T14:08:44.190
> 
> 标签：php, amazon-s3, amazon-web-services

我正在使用独立的 PHP-S3 类：
[http ://undesign.org.za/2007/10/22/amazon-s3-php-class](http://undesigned.org.za/2007/10/22/amazon-s3-php-class)

我已经尝试了所有现成的教程，下载了源代码，更改了相应的变量（设置我的存储桶、access_key、access_secret）。

每当我尝试上传任何文件时，都会出现以下错误：
`Warning: S3::putObject(): [417] Unexpected HTTP status in C:\Users\Jad\Dropbox\www\test\S3.php on line 312`

**注意：**我的存储桶已经存在，我什至允许用户的所有权限`everyone`（暂时让它工作，但它仍然不工作）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-22T06:19:56.250

我有同样的问题。如果您在我的情况下通过代理连接，它可以通过 SSL 连接到 S3。

```
$s3 = new S3(S3KEY, S3SECRET,  true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T00:25:23.797

所以我在美国创建了一个新的存储桶（最后一个在爱尔兰），现在一切正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-14T13:49:36.803

I had the same problem. I'm connected to a proxy... If I'm connected to an other network, it works :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-14T13:46:54.023

我在 squid3 代理后面遇到了这个问题，该问题已通过以下 squid 配置指令解决：

```
ignore_expect_100 on 
```

# hadoop - 配对数据集中数据字段的 Pig 方法

> ID：13670043
> 
> 赞同：5
> 
> 时间：2012-12-02T14:09:12.857
> 
> 标签：hadoop, apache-pig

我是 Pig 的新手，并试图正确实现一个有点通用的算法，在该算法中，我需要配对一组记录中的每个匹配记录。为了将问题提炼成最简单的形式并避免讨论一些特定于业务的敏感性，这里有一个模拟问题：

假设我有一个代表大学课程和参加这些课程的学生的数据集：

```
Philosophy,John
English,Mary
English,Sue
History,Jack
Philosophy,David
English,Mark
English,Larry 
```

我想配对上同一门课的学生之间的每一个关联；所以输出将包括这个，显示四个“英语”行爆炸成六个关联：

```
Philosphy   John,David
English    Mary,Sue
English    Mary,Mark
English    Mary,Larry
English    Sue,Mark
English    Sue,Larry
English    Mark,Larry 
```

本页： http: [//ofps.oreilly.com/titles/9781449302641/advanced_pig_latin.html](http://ofps.oreilly.com/titles/9781449302641/advanced_pig_latin.html)是指使用 flatten() 来实现叉积。我已经尝试了几种方法并对此进行了广泛的研究，并会发布我的尝试，但老实说，我正在摇摆不定，我认为这只会让读者感到困惑并且不会提供任何价值。但这是样板：

```
s = load 'classes' using PigStorage(',') as (class:chararray, student:chararray);
grp = group s by class;
... 
```

（我相信我面临的问题与需要多个袋子而不是多个字段的展平有关，而且我不知道如何让我的分组生成多个袋子......）

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T23:06:58.973

您可以使用LinkedIn 的[Datafu 项目中的](http://data.linkedin.com/opensource/datafu)[UnorderedPairs](http://linkedin.github.com/datafu/docs/javadoc/datafu/pig/bags/UnorderedPairs.html) UDF 。[从这里](https://github.com/linkedin/datafu/downloads)下载包并发出以下命令（在 Pig v0.10.0 上测试）：

```
register '/home/user/datafu/dist/datafu-0.0.4.jar'
define UnorderedPairs datafu.pig.bags.UnorderedPairs();
A = load 'classes' using PigStorage(',') as (class:chararray, student:chararray);
B = GROUP A BY class;
C = FOREACH B GENERATE group, FLATTEN(UnorderedPairs(A.student)); 
```

当进一步展平结果时：

```
D = FOREACH C generate FLATTEN($0) as (class:chararray), 
      FLATTEN($1) as (student1:chararray), FLATTEN($2) as (student2:chararray); 
```

你最终会得到想要的结果：

```
dump D;

(English,Mary,Sue)
(English,Mary,Mark)
(English,Mary,Larry)
(English,Sue,Mark)
(English,Sue,Larry)
(English,Mark,Larry)
(Philosophy,John,David) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T19:26:58.013

这可以通过自连接和一些简单的过滤来完成。

```
classes1 = load 'classes' using PigStorage(',') as (class:chararray, student:chararray);
classes2 = load 'classes' using PigStorage(',') as (class:chararray, student:chararray);
joined = JOIN classes1 BY class, classes2 BY class;
filtered = FILTER joined BY classes1.student < classes2.student;
pairs = FOREACH filtered GENERATE classes1.student AS student1, classes2.student AS student2; 
```

请注意，按 student1 < student2 过滤可以获得唯一对。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T14:59:29.950

我对此有两种方法。我已经有一段时间没有尝试过，所以请跟进并让我们知道它们是否运作良好。

* * *

第一种方法是**自联接**

```
s1 = load 'classes' using PigStorage(',') as (class:chararray, student:chararray);
s2 = load 'classes' using PigStorage(',') as (class:chararray, student:chararray);
b = JOIN s1 BY class, s2 BY class;
... 
```

这样做的缺点是您必须加载数据两次。有[一些关于为什么这很糟糕](http://www.mail-archive.com/user@pig.apache.org/msg05840.html)的讨论，但这只是你必须如何去做。

* * *

另一种选择是在 a之后使用`CROSS`嵌套：`FOREACH``GROUP`

*注意：我完全不确定这是否可行，或者我的语法是否正确（我现在不在可以测试的环境中）。也许有人可以证实。*

```
B = GROUP s BY class;
C = FOREACH B {                          
   DA = CROSS s, s;                       
   GENERATE FLATTEN(DA);
} 
```

# c# - RavenDB 自动 tmpindex 和手动索引

> ID：13670046
> 
> 赞同：3
> 
> 时间：2012-12-02T14:09:16.213
> 
> 标签：c#, indexing, ravendb

当我使用以下类创建索引时

```
public class TokenIndex : AbstractIndexCreationTask<Token> {
    public TokenIndex() {
        Map = tokens => from token in tokens
                        select new { token.Guid };
        Index(x => x.Guid, FieldIndexing.Analyzed);
    }
} 
```

它产生了以下索引

```
docs.Tokens.Select(token => new {
    Guid = token.Guid
}) 
```

但是当我让 Raven 创建一个 tmpindex 时，它看起来像这样

```
from doc in docs.Tokens
select new { Guid = doc.Guid } 
```

从长远来看，这两者之间是否存在任何性能差异？还是只有两种方法可以写相同的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T14:51:46.597

C# 编译器将后者转换为前者。RavenDB 甚至无法区分这两者。所以*不可能*有性能差异。

# javascript - 创建数组并跳过空字段

> ID：13670047
> 
> 赞同：1
> 
> 时间：2012-12-02T14:09:34.037
> 
> 标签：javascript, arrays, html

我有以下表格：

```
 <input type="text" name="name1" id="names1" class="names" value="" placeholder="1) Name Here . . .">
                <input type="text" name="name2" id="names2" class="names" value="" placeholder="2) Name Here . . .">
                <input type="text" name="name3" id="names3" class="names" value="" placeholder="3) Name Here . . .">
                <input type="text" name="name4" id="names4" class="names" value="" placeholder="4) Name Here . . ."> 
```

当用户单击存储每个名称的提交按钮时，我正在尝试创建一个数组：

```
var values = $('.names').map(function() { return this.value; }).get(); 
```

它有效，但它也收集了我不需要的空字段。我想我需要一个条件 For 语句，但我无法管理它的语法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T14:11:28.603

试试这个：

```
var values = $('.names').map(function() { if(this.value.trim() != '') return this.value; }).get(); 
```

或者：

```
var result = [];
var elements = getElementsByClassName('names');
for(var i = 0; i < elements.length; i++){
    if(elements[i].value.trim() != '')
          result.push(elements[i].value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T14:15:20.660

只需选择所有非空值的 .names

```
var values = $('.names[value!=""]').map(function() { return this.value; }).get(); 
```

在现实世界中，您还需要存储名称：

```
var values = $('.names[value!=""]').map(function() { 
    return {name: this.name,value: this.value};
}).get(); 
```

[http://jsfiddle.net/oceog/7ZcbY/](http://jsfiddle.net/oceog/7ZcbY/)

# perl - Perl 脚本 - 将所有输出通过管道传输到同一个终端（如何？）

> ID：13670050
> 
> 赞同：1
> 
> 时间：2012-12-02T14:09:49.847
> 
> 标签：perl, unix, console, stdout

我正在调用一系列 Perl 脚本，我希望所有 stdout/stderr 都到达命令行。我有两个脚本：

**A.pl**

```
print "Hello from A\n";
`perl B.pl`;
print "Back to A\n"; 
```

**B.pl**

```
print "Hello from B\n"; 
```

当我调用*perl A.pl*时，我得到：

```
Hello from A
Back to A 
```

但我想看到的是

```
Hello from A
Hello from B
Back to A 
```

当然，我可以更改 A 并显式打印 B 的输出，如下所示：

```
my $output = `perl B.pl`;
print $output; 
```

但由于我的脚本非常复杂，我想避免它。有没有一种通用的方式来说明所有内容都应该打印到同一个终端？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T14:13:05.003

如果您使用 system 而不是反引号，则输出将转到终端。反引号专门用于捕获其他进程的输出：

```
print "Hello from A\n";
system('perl B.pl');
print "Back to A\n"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T14:12:18.790

是的，如果您不想捕获输出，请停止使用反引号！

简单地做有什么问题`system $^X, "B.pl";`？

# spring - org.springframework.web.filter.HiddenHttpMethodFilter 不能转换为 javax.servlet.Filter

> ID：13670051
> 
> 赞同：4
> 
> 时间：2012-12-02T14:09:51.737
> 
> 标签：spring, maven, spring-security, servlet-filters, sitemesh

我有一个基于spring framework 3的maven webapp，当我`maven-jetty-plugin`通过运行命令在jetty上运行应用程序时`mvn -e clean jetty:run`，它运行正常，但是当我`tomcat-maven-plugin`通过运行命令在tomcat上运行它时，`mvn -e clean tomcat:run`它给了我以下异常：

```
java.lang.ClassCastException: org.springframework.web.filter.HiddenHttpMethodFilter cannot be cast to javax.servlet.Filter
        at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:275)
        at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:422)
        at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:115)
        at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4001)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4651)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:785)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:445)
        at org.apache.catalina.startup.Embedded.start(Embedded.java:825)
        at org.codehaus.mojo.tomcat.AbstractRunMojo.startContainer(AbstractRunMojo.java:558)
        at org.codehaus.mojo.tomcat.AbstractRunMojo.execute(AbstractRunMojo.java:255)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352) 
```

以下是我在`web.xml`配置中配置过滤器的方式：

```
<!-- Filters -->
<filter>
    <filter-name>sitemesh</filter-name>
    <filter-class>com.opensymphony.sitemesh.webapp.SiteMeshFilter</filter-class>
</filter>
<filter>
    <filter-name>methodFilter</filter-name>
    <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>sitemesh</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
</filter-mapping>
<filter-mapping>
    <filter-name>methodFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

有人可以帮助我理解为什么会出现此错误并帮助我解决它吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-26T12:05:11.163

1.  先看第[一个confluence servlet插件，ClassCastException问题](https://stackoverflow.com/questions/7041761/first-confluence-servlet-plugin-classcastexception-problem)

> ```
> <dependency>
>    <groupId>javax.servlet</groupId>
>    <artifactId>servlet-api</artifactId>
>    <version>2.5</version>
>    <scope>provided</scope>
> </dependency> 
> ```

请注意

> ```
> <scope>provided</scope> 
> ```

然后你需要检查依赖树，排除其他 servlet-api

# image - 在 Globe 上显示用户位置而不是 iOS 5 + 中的地图

> ID：13670053
> 
> 赞同：0
> 
> 时间：2012-12-02T14:10:06.623
> 
> 标签：image, mkannotation, cllocation

我想用他在 Globe（圆形地球）上的个人资料图像而不是 2D 地图向用户显示位置。据我所知，我们从 CLLocationManager 获得的纬度和经度是通过计算从圆形转换为在 2D 地图中显示的。如果我错了，请纠正我。

我的问题是可以在地球上使用他的个人资料图像显示不同用户的当前位置。我还需要选择平移（必须有）和缩放（如果可能的话）？

任何形式的帮助，参考表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T14:27:18.350

根据[此处](http://iphonedevsdk.com/forum/iphone-sdk-development/107542-3d-interactive-globe-for-ios-app-development.html)的讨论，您可以使用 WhirlyGlobe 来实现该功能。

# haskell - 具有树数据结构的实例展示

> ID：13670055
> 
> 赞同：1
> 
> 时间：2012-12-02T14:10:23.413
> 
> 标签：haskell

我是 haskell 的新手，我想在课堂表演中实例化 Tree a。

```
 data Tree a = Null
               |Node (Tree a) a (Tree a)

  instance Show (Tree a) where
    show Null = ""
    show Node ((Tree l) (v) (Tree r)) = "|"--I don´t know how i can do this step 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T14:21:18.680

`show`递归应用：

```
data Tree a = Null | Node (Tree a) a (Tree a)

instance Show a => Show (Tree a) where
  show Null = "Null"
  show (Node l v r) = "(" ++ show l ++ " " ++ show v ++ " " ++ show r ++ ")" 
```

# ruby-on-rails-3.2 - Rails/Phusion 乘客列表仅文件

> ID：13670058
> 
> 赞同：0
> 
> 时间：2012-12-02T14:11:00.770
> 
> 标签：ruby-on-rails-3.2, passenger

安装 phusion 乘客并部署我的 rails 应用程序后，当我转到 [a link] [http://servername.example.com/app](http://servername.example.com/app)时，我只看到我的 app/public 目录下列出的文件。我确保“app”指向“app/public”目录，并且根据用户文档正确设置了 phusion 乘客设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:12:04.593

罪魁祸首是 SELinux 不允许 apache 运行 phusion 乘客。我在这里找到了答案 - [https://groups.google.com/forum/?fromgroups=#!topic/phusion-passenger/qaVUIq2HceE](https://groups.google.com/forum/?fromgroups=#!topic/phusion-passenger/qaVUIq2HceE)。

这是我修复它的方法：

```
[root@server conf]# getenforce
Enforcing
[root@server conf]# echo 0 > /selinux/enforce
[root@server conf]# getenforce
Permissive
[root@server conf]# service httpd restart
Stopping httpd:                                            [  OK  ]
Starting httpd:                                            [  OK  ]
[root@server conf]# passenger-status
----------- General information -----------
max      = 6
count    = 0
active   = 0
inactive = 0
Waiting on global queue: 0

----------- Application groups -----------
[root@server conf]# 
```

现在，当我转到我的应用程序 URL 时，它工作正常。

# configuration - guice 返回一组带有自定义注释的实例

> ID：13670060
> 
> 赞同：0
> 
> 时间：2012-12-02T14:11:21.333
> 
> 标签：configuration, dependency-injection, guice, dependency-management

我有一个非常简单的场景，A 类为类型注册实例。

```
A.register(T1.class, new H1());
A.register(T2.class, new H2()); 
```

这是手动完成的相当简单的配置，但是当我在 guice 框架之外创建实例时，guice 注入不起作用。

我试图弄清楚如何使用 guice 创建和配置带有自定义注释的所有实例的 A。

我发现了类似这样的东西[Scan the classpath for classes with custom annotation](https://stackoverflow.com/questions/7317179/scan-the-classpath-for-classes-with-custom-annotation)，但它没有使用 guice。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:46:28.543

所以我猜 code.google.com/p/google-guice/wiki/Multibindings 是迄今为止唯一可行的选择，但它不像我预期的那么好，因为你需要手动连接所有东西。

# r - 在 R 图上添加自定义刻度线

> ID：13670062
> 
> 赞同：17
> 
> 时间：2012-12-02T14:11:28.850
> 
> 标签：r, plot

我正在绘制一些数据的 cdf，并且在“x”轴上添加了对数刻度。刻度间距正是我想要的，但我希望能够在特定点上添加 *一些*刻度线。

我不想改变我的情节中刻度线的分布，从`n by n`到`m by m`，我只想在来自 的刻度线中`n by n`，在某些值上*再*添加一些刻度线。

我想让它同时反映在轴`x`和`y`轴上，这样我就可以在整个图表中将网格放入这些新标记中。

到目前为止，我有图表和网格——我不介意在图表后面或上面放置网格，我只想添加一些自定义刻度。

```
# Cumulative Distribuition
pdf("g1_3.pdf")

plot(x = f$V2, y = cumsum(f$V1), log = "x", pch = 3,
     xlab = "Frequency", ylab = "P(X <= x)",
     panel.first = grid(equilogs = FALSE))

axis(1, at = c(40, 150))
abline(h = 0.6, v = 40, col = "lightgray", lty = 3)
abline(h = 0.6, v = 150, col = "lightgray", lty = 3)

dev.off() 
```

**更新**：我到目前为止的图表：

![在此处输入图像描述](../Images/112d2f8687a579536cc557685976625c.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-24T04:22:22.970

考虑到初始脚本和@BenBolker 给出的提示，我不得不使用：

```
axis(side = 1, at = c([all the ticks you want])) 
```

为了`ticks`在图中添加。这是最终结果：

```
# Cumulative Distribuition
pdf("g1_3.pdf")

plot(x = f$V2, y = cumsum(f$V1), log = "x", pch = 3,
     xlab = "Frequency", ylab = "P(X <= x)", axes = FALSE)

ticks = c(1, 5, 10, 40, 150, 500, 1000)
axis(side = 1, at = ticks)
axis(side = 2)

abline(h = seq(0, 1, 0.2), v = ticks, col = "lightgray", lty = 3)
box() 
```

![我试图生成的图表的最终结果](../Images/205ee19506cfdb5ecd6fcb2867ada90f.png)

# c - C语言的sublime text 2构建系统

> ID：13670064
> 
> 赞同：15
> 
> 时间：2012-12-02T14:11:33.530
> 
> 标签：c, build, system, sublimetext2

我正在学习C语言。我指的是 Dennis Ritchie & Kernighan 的书。因此，只有 ANSI 投诉程序。我已经安装了 ANSI 编译器。我刚刚安装了 Sublime text 2 编辑器。有人可以给我一个可以执行以下操作的构建系统。

1）编译我的源文件

2）在编译不成功时在 sublime 中显示错误（以格式良好的方式）。

3) 编译成功后，在我的工作目录中生成名称与源文件名相同的二进制文件。

4) 接受 sublime 中的任何用户输入来计算输出。（因为我是初学者，所以我主要编写要求用户输入的程序。例如：计算用户输入名称中字符数的程序。）

5) 单独选择编译和运行。

提前致谢。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-02T16:11:42.733

从菜单中，选择 Build -> New build system ... 并复制粘贴：

**视窗**

*仅编译：*

```
{
"cmd" : ["gcc", "$file_name", "-o", "${file_base_name}.exe", "-lm", "-Wall"],
"selector" : "source.c",
"shell":true,
"working_dir" : "$file_path"
} 
```

*编译并运行：*

```
{
    "windows":
    {
        "cmd": ["cc","-std=c99" ,"$file_name","-o", "${file_base_name}.exe", "-lm", "-Wall", "&","start", "${file_base_name}.exe"]
    },
    "selector" : "source.c",
    "shell": true,
    "working_dir" : "$file_path",
} 
```

**Linux**

*仅编译：*

```
{
"cmd" : ["gcc", "$file_name", "-o", "${file_base_name}", "-lm", "-Wall"],
"selector" : "source.c",
"shell":false,
"working_dir" : "$file_path"
} 
```

*编译并运行：*

```
{
    "linux":
    {
        "cmd": ["cc","-std=c99" ,"$file_name","-o", "${file_base_name}", "-lm", "-Wall", ";", "./${file_base_name}"]
    },
    "selector" : "source.c",
    "shell": true,
    "working_dir" : "$file_path",
} 
```

并使用扩展名 *.sublime-build 保存它

ST 只是一个编辑器，因此您不能将其用作输入流，您必须使用 bash、zsh 等 shell 来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:06:23.230

在 sublime text 2 中查看状态栏，其中显示语言或“纯文本”，单击它并搜索“c”语言。建造你只需要保存`Ctrl-s`和建造`Ctrl-B`，就像蛋糕一样简单！您也可以尝试使用 C 友好的 IDE，例如 Eclipse。[http://www.eclipse.org/](http://www.eclipse.org/)

# php - PHP - is_readable() 返回不正确的值

> ID：13670065
> 
> 赞同：0
> 
> 时间：2012-12-02T14:11:34.500
> 
> 标签：php, file, fopen, fread

我正在使用这样的脚本：

```
$path = dirname(__FILE__)."/folder/file.ext"
if(is_readable($path)){
     $file = fread(fopen($path,"r"), filesize($path));
}else{
     //do something else if file can't be opened
} 
```

令人惊讶的是，它会产生以下错误：

```
Warning: fread() [function.fread]: Length parameter must be greater than 0
in /nfs/c10/h02/mnt/161920/domains/example.com/html/my-folder/file.php on line 16 
```

我想知道为什么会这样。它仅在某些服务器上发生，而在其他服务器上则很好。成功使用需要什么条件`fread`？文件存在于该位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:18:34.387

如果文件为空，则可以读取。但是你不能用`fread`.

空文件 == 文件大小为 0。

对于您的用例，您还可以使用 PHP 的[`file_get_contents`](http://php.net/file_get_contents)函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T14:28:09.990

正如大家所说，filesize可能是0。

按照建议使用`file_get_contents`，或者如果您绝对想要/需要使用`fread()`，您可以在 php 5.3+ 上使用以下内容来解决它：

```
$path = dirname(__FILE__)."/folder/file.ext"
if(is_readable($path)){
    $file = fread(fopen($path,"r"), filesize($path) ?: 1);
}else{
    //do something else if file can't be opened
} 
```

注意`?: 1`? 它被称为[三元运算符](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)。也就是说，如果文件大小评估为真（即大于 0）或使用 1，则使用文件大小。

绝对不是最佳实践，但指出来很有趣。

# android - 动态添加的图片不显示

> ID：13670068
> 
> 赞同：0
> 
> 时间：2012-12-02T14:11:52.680
> 
> 标签：android, image, dynamic

在这段代码中，我正在构建一个在运行时将相同图像多次添加到相对布局的方法。但是，调试时没有显示图像。添加的文本视图运行正常。有人可以解释如何使图像可见吗？提前致谢。

我的代码：

```
public class TestActivity extends Activity {
ArrayClass arraysObject1 = new ArrayClass();
ArrayList<ImageView> mImages = new ArrayList<ImageView>();

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        RelativeLayout layout = new RelativeLayout(this);

        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.MATCH_PARENT);
        params.addRule(RelativeLayout.ALIGN_PARENT_LEFT, RelativeLayout.TRUE);
        layout.setLayoutParams(params);
        layout.setBackgroundColor(Color.parseColor("#FFFFFF"));

        //textview is working
        TextView testText = new TextView(this);
        testText.setText("Alle aangeboden vacatures vindt u hieronder terug.");
        testText.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
    layout.addView(testText);

        RelativeLayout.LayoutParams imgParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        imgParams.addRule(RelativeLayout.CENTER_IN_PARENT);

        for(int i=0; i<arraysObject1.array1.size(); i++)
        {
            mImages.add(new ImageView(this));
            mImages.get(i).setVisibility(View.VISIBLE);
            mImages.get(i).setBackgroundResource(R.drawable.work);
            mImages.get(i).setLayoutParams(imgParams);

            layout.addView(mImages.get(i));

        }
        setContentView(layout);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:18:44.690

你的循环`for(int i=0; i < arraysObject1.array1.size(); i++)`似乎没有被执行。 `arraysObject1.array1`是空的。

# python - ajax 如何与 python 一起工作？

> ID：13670075
> 
> 赞同：1
> 
> 时间：2012-12-02T14:12:43.220
> 
> 标签：python, ajax, flask

我一直在谷歌搜索，但我不太明白 ajax 是如何工作的。**有人可以解释一下这是如何工作的吗？**

```
$.ajax({
        url: "{{ url_for( 'app.slideshow.<tag>' ) }}",
        type: "",
        data: {'param':},
        dataType: "",
        success : function(response)
        {
        } 
```

我要做的是查看 document.getElementsByClassName(current) 是否已更改。如果有，它将向 app.py 询问当前的评论和标签，并在不刷新的情况下更新页面。我也不知道在 app.py 上要写什么来接收这个。

我将包含我的 app.py，但这并不好。

```
from flask import Flask,session,url_for,request,redirect,render_template
import api,db   
app = Flask(__name__)
#app.secret_key = "secret"

@app.route('/slideshow/<tag>', methods=['GET', 'POST'])
def slide():
if request.method=="GET":
    pic = request.get('current').href
    taglist = db.getTaglist()
    tags = db.getTags(pic)
    piclist = db.getPics(<tag>)
    commentlist = db.getComments(pic)
    return render_template("slide.html", taglist = taglist, tags =tags, piclist =piclist, commentlist = commentlist, url = url)
else:   
    button = request.form['button']
    pic = request.get('current').href

    if button=="submit":
        aComment = request.form['comment']
        db.addComment(pic,aComment)
    elif button == "submitnewtag":
        if request.form['Addnewtag']
            aTag = request.form['Addnewtag']
            db.addTag(pic,aTag)
        else:
            aTag =  request.form['select1']
            db.addTag(pic,aTag)

if __name__=="__main__":
    app.debug=True
    app.run(port=5300) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T15:39:36.073

通常，服务器上的 ajax 处理程序应该返回 XML 或 JSON（我认为 JSON 更好）以及它需要的数据。

因此，在从处理程序获取信息后，将其转储（转换）到 JSON 对象并返回给客户端。

在客户端，JavaScript 接收这个 JSON，然后应该动态创建 html 元素并将它们插入到您的页面正文中。

从探索Flask 的创建者的[这个简单教程开始。](http://flask.pocoo.org/docs/patterns/jquery/)

# java - java代码中的wait()调用

> ID：13670079
> 
> 赞同：1
> 
> 时间：2012-12-02T14:13:13.287
> 
> 标签：java, multithreading, object, wait

```
public class newTest{

/**
 * @param args
 */
public static Integer x = new Integer(0);

public static void main(String[] args) {
    newTest tstobj = new newTest();
    // TODO Auto-generated method stub
    MyThread t = tstobj.new MyThread();
    t.start();
    tstobj.incrementX();
    System.out.println(x.intValue());
    try {
        t.join();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public synchronized void incrementX(){
    try {
        while(x != 5){
            x.wait();
        }
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public class MyThread extends Thread{
    newTest tstobj = new newTest();
    public void run() {
        // TODO Auto-generated method stub      
        tstobj.incrementX();
    }
}

} 
```

我不确定为什么这段代码会导致 IllegalMonitorStateException 而不是无限循环。具体来说，这段代码有两个线程 1\. 主线程 2\. MyThread 他们都尝试调用名为 incrementX() 的同步方法，所以假设两个线程中的一个通过获取锁进入同步方法，然后它看到 x ！ = 5 所以它调用 wait 将释放锁并将被放置在等待队列中，等待调用同步方法的下一个线程将通过获取锁进入并看到 x != 5 并调用 wait 将挂起线程并放入等待队列。现在两个线程在等待队列中什么都不做，这应该会导致一个无限循环。但是这段代码会导致非法MonitorStateException？

这段代码不会做任何有用的事情，但我想了解我在概念上哪里出错了？我查看了很多材料，但仍然无法弄清楚我对代码的期望有什么问题。任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T14:14:35.260

只需将您的`wait`电话更改为： -

```
wait();  // or `this.wait() 
```

您只能在已锁定的对象上调用`wait`和方法。`notify`因此，当您调用该`synchronized`方法时，您实际上将锁定引用指向的对象`this`。因此，您需要`wait()`在`this`引用时调用。

`wait`使用和方法时，您可以遵循以下两条规则`notify`：-

*   同步方法总是锁定`this`引用。
*   同步块可以锁定任何引用，具体取决于括号中使用的对象引用。

**示例**（同步块）：-

```
synchonized(obj) {    // Locks `obj`
    obj.wait();       // Invoke wait on obj
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T14:16:21.967

要首先调用`wait()`某个对象，您必须获得该对象的**锁定**。所以首先

```
synchronize(x){

    //some code

    x.wait();

} 
```

# java - 当服务在后台工作时，来自 AsyncTask 的 doInBackground 永远不会被调用

> ID：13670080
> 
> 赞同：1
> 
> 时间：2012-12-02T14:13:15.543
> 
> 标签：java, android, android-asynctask, android-service

```
private class Test extends AsyncTask<Void, Void, Void> {

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            Log.d("test", "called1");
        }

        @Override
        protected Void doInBackground(Void... params) {
            Log.d("test", "called2");
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            Log.d("test", "called3");
        }
    } 
```

和输出：

*测试：调用1*

为什么当服务在后台工作时其他方法永远不会被调用？如果服务停止，则所有方法调用和输出：

*测试：调用1*

*测试：调用2*

*测试：调用3*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T14:17:36.397

我猜您是在 android 3.x 或更高版本上进行测试，而您只是受到对 AsyncTask 执行方式的更改的影响。

这就是我在代码中处理此问题以始终完全并行工作的方式：

```
if( Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ) {
    new Test().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
} else {
    new Test().execute();
} 
```

基本上 AsyncTask 的变化出现在 Honeycomb 中（请参阅“执行顺序”部分中的 Android SDK 文档），因此在[此](http://developer.android.com/reference/android/os/AsyncTask.html)之前，您像往常一样启动它，对于 HC 及更高版本，`executeOnExecutor()`如果您不喜欢新行为，请使用（没有人喜欢，我思考）

# html - 如何在 CSS 表单中向按钮添加两个单独的文本样式？

> ID：13670083
> 
> 赞同：2
> 
> 时间：2012-12-02T14:13:50.537
> 
> 标签：html, css, forms, button, styles

我正在尝试将两种不同的文本样式添加到带有背景图像的单个按钮中。我相信你可以清楚地阅读下面的代码，但主要样式用于标记按钮的功能，而另一个用于定义最近上传的图像的名称。

我不完全确定它可以仅在 HTML 和 CSS 中完成，但我认为值得一试：

我尝试使用 span 但这根本不起作用：

HTML：

```
<form><input type="button" class="arrivalbutton" value="From my Drive <span class="arrivalbutton">Top of Stelvio Pass.jpg</span>" /> </form> 
```

CSS：

```
.arrivalbutton {
width:494px;
height:31px;
border:1px solid #ccc;
-webkit-border-radius: 6px 6px 6px 6px;
-moz-border-radius: 6px 6px 6px 6px;
border-radius: 6px 6px 6px 6px;
margin-bottom:10px;
font-family: Helvetica, sans-serif;
font-weight:bold;
font-size: 14px;
padding: 2px 0 0 8px;
text-align: left;
color: #f32114;
background:url(../images/buttonbackground.png);
    transition:background .25s ease-in-out;
    -moz-transition:background .25s ease-in-out;
    -webkit-transition:background .25s ease-in-out;
}
.arrivalbutton span {
font-family: Helvetica, sans-serif;
font-weight:normal;
font-size:14px;
float:left;
margin-left:10px;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:19:13.693

您不能将跨度添加到按钮值中，所有的行为都会像字符串或值一样

你可以使用`<button>`标签：

```
<button type="button" class="arrivalbutton">From my Drive <span class="arrivalbutton">Top of Stelvio Pass.jpg</span></button> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T14:19:41.513

使用`<button>`标签：

```
<button type="button" class="arrivalbutton">From my Drive <span class="arrivalbutton">Top of Stelvio Pass.jpg</span></button> 
```

该元素确实支持嵌套在其中的内部元素。

# visual-studio - Visual Studio 图形模块设计器

> ID：13670086
> 
> 赞同：2
> 
> 时间：2012-12-02T14:14:21.237
> 
> 标签：visual-studio, code-generation, codefluent

我想创建一种智能且简单的方法来自动生成和生成代码。

这并不容易解释，但我想做的是类似于 codefluent 软件 ( [http://www.softfluent.com/](http://www.softfluent.com/) ) 所做的事情。因此，以图形方式设计一个模型，生成的是根据为我的上下文定义的一些规则的类集合。否则，还有一个像 Telerik 这样的工具，它集成在 Visual Studio 中，通过自定义菜单，可以管理应用程序的特定行为。

我知道我的要求不明确，如此笼统，但我的实际想法也处于萌芽状态。我看到 Visual Studio 支持允许指定和设计自己的语言的 DSL SDK (vsvmsdk)。但我不明白这是否正是我所需要的。

任何人都可以向我建议一个不同的工具，或者一个关于我可以在 Visual Studio 中做什么来实现我的目标的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:18:43.483

CodeFluent Entities 是一个定制工具，它不依赖于任何第三方软件。图形表面使用带有特殊算法和特定轻量级树视图的 WPF。（免责声明：我为这家公司工作，并帮助开发了该软件）。

话虽如此，如果你想快速开发一些东西，你确实可以从你提到的[http://archive.msdn.microsoft.com/vsvmsdk](http://archive.msdn.microsoft.com/vsvmsdk)开始（VSVMSDK 是 DSL SDK 的继承者，又名“DSL 工具”）。它具有免费的巨大优势。但是请注意，微软这个组件的未来还不清楚，因为他们现在似乎更喜欢“代码优先”而不是“模型优先”。

# c - 完美的数字、数组、校验和操作

> ID：13670089
> 
> 赞同：4
> 
> 时间：2012-12-02T14:14:49.580
> 
> 标签：c, arrays, loops, perfect-numbers

我正在尝试用 C 编写一个代码，该代码允许在数组中最多输入 10 个元素（自然数），识别数组中的所有完美数字，并对所有非完美数字进行乘积。

> Euclid 证明了 2^{p−1}(2^p−1) 是一个偶数，只要 2^p−1 是素数（Euclid，Prop. IX.36）。例如，前四个完美数由公式 2^{p−1}(2^p−1) 生成，具有 pa 素数，如下： 对于 p = 2: 2^1(2^2−1 ) = 6 对于 p = 3：2^2(2^3−1) = 28 对于 p = 5：2^4(2^5−1) = 496 对于 p = 7：2^6(2^7− 1) = 8128。（来源：维基百科）

当我编译程序时，我得到了三次或多次重复的完美数声明。

例如：

> ... t[10] = {1, 1, 1, 1, 1, 1, 1, 1, 1, 6}
> 
> “6”是一个完美的数字。“6”是一个完美的数字。“6”是一个完美的数字。...

我也得到了一个奇怪的产品。

例如：

> ... t[10] = {1, 1, 1, 1, 1, 1, 1, 1, 1, 28}
> 
> “28”是一个完美的数字。“28”是一个完美的数字。“28”是一个完美的数字。“28”是一个完美的数字。“28”是一个完美的数字。“28”是一个完美的数字。“28”是一个完美的数字。“28”是一个完美的数字。“28”是一个完美的数字。“28”是一个完美的数字。“28”是一个完美的数字。“28”是一个完美的数字。“28”是一个完美的数字。...非完美数字的乘积是-1677721600

我对c真的很陌生，我似乎无法弄清楚我做错了什么，但我也不会讲义。一些指导将不胜感激。

```
#include <stdio.h>
#define MAX_BOUND 9  /*Array's bound*/

main() {

int i, /*array index*/
    t[i],
    d, /*divider*/ 
    sum, /*result for perfect number validation*/
    product; /*product of all non-perfect number in array*/

i = 0;

printf("Enter your natural numbers. \n");

for (i = 0; i <= MAX_BOUND; i++) {
printf("Number %d : ", i + 1);
scanf( "%d", &t[i]);
}

i = 0;
product = 1;
for (i = 0; i <= MAX_BOUND; i++) {   
    d = 1;
    sum = 0;
    while(d < t[i]) {
        if(t[i]%d == 0)
        sum = sum + d;
        d++;

            if(sum == t[i])
            printf("%d is a perfect number. \n", t[i]);
            else
            product = product * t[i];
    }
}  
printf("The product of the non-perfect numbers is %d \n", product);
getch();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T14:21:44.720

“奇怪的产品”（例如负数）是由[整数溢出](http://en.wikipedia.org/wiki/Integer_overflow)引起的。例如，您的产品是`int`，使其更大`long long`。

您应该使用带有 的`for`循环`i`，而不是`while`. 代码检查一个数字是否完美应该放在单独的函数`bool isPerfect(int number)`中。

你的意思是`sum = 0`，不是`somme = 0`。声明`t[i]`也是错误的。

更正版本（用 编译`gcc -std=c99 file.c`）：

```
#include <stdio.h>
#include <stdbool.h>
#define MAX 10

int t[MAX];

bool isPerfect(int number)
{
    int sum = 0;
    for (int d = 1; d < number; ++d) // optimization: you can iterate until sqrt(number)
    {
        if (number % d == 0)
        {
            sum += d;
        }
    }
    return sum == number;
}

int main()
{
    printf("Enter your natural numbers. \n");
    for (int i = 0; i < MAX; ++i)
    {
        printf("Number %d: ", i + 1);
        scanf("%d", &t[i]);
    }
    long long product = 1;
    for (int i = 0; i < MAX; ++i)
    {
        if (isPerfect(t[i]))
        {
            printf("%d is a perfect number. \n", t[i]);
        }
        else
        {
            product = product * t[i];
        }
    }
    printf("The product of the non-perfect numbers is %lld \n", product);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T14:50:12.257

在您的数组声明中，您有未定义的行为，因为您使用了错误的大小：

```
main() {

    int i, 
        t[i],
        d, /*divider*/ 
        sum, 
        product;

    i = 0;

    printf("Enter your natural numbers. \n");

    while (i <= 9) {
        printf("Number %d : ", i + 1);
        scanf( "%d", &t[i]);
        i++;
    } 
```

你可能打算声明

```
t[MAX_BOUND+1]; 
```

（`MAX_BOUND`将是错误的，因为您使用元素`t[MAX_BOUND]`）。

在`t`声明时，`i`具有不确定的值（不太可能为 0）。

对于不确定的数组大小，访问`t[i]`会产生更多不确定的值（如果 再次是未定义的行为`i >= sizeof t / sizeof t[0]`）。

印刷部分，

```
 if(sum == t[i])
        printf("%d is a perfect number. \n", t[i]);
        else
        product = product * t[i]; 
```

应该在用于确定除数和的循环之后移动。在循环内部，你乘以`product`总`t[i]`时间`t[i] - 1`（或者`t[i] - 2`如果中间和之一等于`t[i]`） if`t[i]`不完美，并且`t[i]/2-1`乘以 if`t[i]`是完美的。此外，您打印`t[i]/2`完美数的时间，如果中间和之一等于，则打印一次丰富的数字`t[i]`（我忽略了奇数完美数的理论可能性，如果有的话，它们对于 来说太大了`int`）。

这样做会在此处产生正确的输出。

# search - extjs 搜索框

> ID：13670091
> 
> 赞同：1
> 
> 时间：2012-12-02T14:15:02.327
> 
> 标签：search, extjs, autocomplete

我正在尝试添加一个与 sencha docs 主页[http://docs.sencha.com/ext-js/4-0/完全相同的搜索框](http://docs.sencha.com/ext-js/4-0/)

我使用了示例 [http://docs.sencha.com/ext-js/4-0/#!/example/form/forum-search.html](http://docs.sencha.com/ext-js/4-0/#!/example/form/forum-search.html)中的代码 ，一切都按预期工作，除了一件事..

当我从搜索框中的列表中选择一个选项时，组合框值设置为所选值..当我按下箭头按钮时，它会使用修改后的查询执行新搜索..但我只想查看结果以前的搜索 - 正是 sencha 页面上搜索框的行为

任何想法如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T15:38:28.180

在尝试了各种事情之后，下面的代码可以满足我的需要，但也许有更好的方法..

我必须将 triggerAction 设置为“查询”，并且还必须在选择事件处理程序中手动重置组合框的文本

```
var searchBox = {
      xtype: 'combo',
        store: dataStore,
        displayField: 'title',
        valueField: 'id',
        autoSelect: false,
        typeAhead: false,
        fieldLabel: 'Search for',
        hideTrigger:true,
        anchor: '100%',
        mode:'remote',
        triggerAction: 'query', 
        listeners: {
            'select' : function(combo) {
                var selected = this.value;
                combo.setValue(combo.lastQuery);
                showResult(selected);                   
            }
        },
        listConfig: {
            loadingText: 'Searching ...',
            emptyText: 'No matching posts found.',
            getInnerTpl: function() {
                return '<a class="search-item" href="?term={id}" onclick="return javascript:showResult(\'{id}\')">' +
                    '<h3><span>{title}<br /></span>{id}</h3></a>';
            }
        },
        pageSize: 10
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T14:29:23.897

您需要此页面的第一个样本。首先输入“A” [http://docs.sencha.com/ext-js/4-0/#!/example/form/combos.html](http://docs.sencha.com/ext-js/4-0/#!/example/form/combos.html)

# android - Android中单击和长按的持续时间

> ID：13670094
> 
> 赞同：8
> 
> 时间：2012-12-02T14:15:09.017
> 
> 标签：android, android-mapview

我正在尝试将叠加层拖动到地图上，并在用户点击图钉时显示信息框。为此，我需要测量 和 之间的`MotionEvent.ACTION_DOWN`时间`MotionEvent.ACTION_UP`。为了让它感觉尽可能自然，我想知道 Android 对 Single-Tap（目前我使用的是 180 毫秒）和 Long-Tap 使用什么值。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T14:22:05.627

Android 源码使用 125ms 的单击和 500ms 作为长按时间：

```
private static final int PRESSED_STATE_DURATION = 125;

private static final int DEFAULT_LONG_PRESS_TIMEOUT = 500; 
```

[ViewConfiguration.java#PRESSED_STATE_DURATION](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r2.1/android/view/ViewConfiguration.java#ViewConfiguration.0PRESSED_STATE_DURATION)

[ViewConfiguration.java#DEFAULT_LONG_PRESS_TIMEOUT](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r2.1/android/view/ViewConfiguration.java#ViewConfiguration.0DEFAULT_LONG_PRESS_TIMEOUT)

# asp.net - ajax rest api的asp.net处理程序映射

> ID：13670098
> 
> 赞同：0
> 
> 时间：2012-12-02T14:15:18.243
> 
> 标签：asp.net, httphandler

所有这些处理程序对我来说都是新的。静态内容的映射请求和具有特定扩展名的请求工作正常，但我仍然有一些问题/疑问。

我有一个网页，在这个网页中，我对我们服务器中的一些休息 API 执行 ajax 请求。例如：“http://localhost:8182/test/firstExample?param=aaa” 我想将所有这些请求映射到某个处理程序。我们可以假设所有请求都以：“http://localhost:8182/test”开头

1.  有没有办法做到这一点？
2.  一个更一般的问题 - 我能够映射具有某些扩展名的请求（例如 - *.css）或映射来自某个目录的文件请求（通过在此目录中放置另一个 web.config）。是否可以映射例如在 url 中具有字符串“test”的所有请求？就像是：

    路径=“*测试*”

    我没能做到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:32:36.690

您在这里所指的内容可以通过 httpmodule 来实现，它是基于请求的逻辑，而不是 httphandler 。Httphandler 是一个基于扩展的逻辑，可以在基于自定义的扩展上工作。

# c++ - 支持向量机在 matlab 中工作，在 c++ 中不工作

> ID：13670101
> 
> 赞同：1
> 
> 时间：2012-12-02T14:15:24.947
> 
> 标签：c++, matlab, machine-learning, svm

我正在编写一个使用 SVM 对某些图像（特别是[这些](http://www.vision.caltech.edu/html-files/archive.html)图像）进行分类的应用程序。我的 Matlab 实现效果很好。使用 SIFT bag-of-words 方法，我能够通过线性内核获得接近 100% 的准确度。

出于速度/可移植性的原因，我需要在 C++ 中实现这一点，因此我尝试同时使用[libsvm](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)和[dlib](http://dlib.net/ml.html)。我尝试了多种 SVM 类型（c_svm、nu_svm、one_class）和多个内核（线性、多项式、rbf）。我能够达到的最好结果是大约 50% 的准确率——即使在我训练过的相同样本上也是如此。我已经确认我的特征生成器正在工作，因为当我将 c++ 生成的特征导出到 Matlab 并对其进行训练时，我能够再次获得近乎完美的结果。

Matlab 的 SVM 实现有什么神奇之处吗？是否有任何我可能会研究的常见陷阱或领域来解释我所看到的行为？我知道这有点含糊，但部分问题是我不知道该去哪里。如果我可以提供其他有用的信息，请在评论中告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T14:56:22.237

Matlab 版本的库并没有什么神奇之处，只是它在 Matlab 中运行，这使得自己更难自食其果。

检查清单：

1.  您是否正在标准化您的数据，使所有值都位于 0 和 1 之间（或 -1 和 1 之间），无论是线性还是使用平均值和标准偏差？
2.  您是否在参数搜索一个好的 C 值（或在 RBF 内核的情况下为 C 和 gamma）？进行交叉验证或保留集？
3.  您确定您正在处理 NaN 和所有其他浮点问题吗？Matlab 非常擅长向您隐藏这一点，C++ 则不然。
4.  可能是您错误地加载了数据，将“%s”读入了双精度数，还是向输入数据添加了噪音？
5.  可能是 libsvm/dlib 期望数据以行主要顺序排列，而您将其发送到主要列（或相反）？再次，Matlab 使这几乎是不可能的，而 C++ 则不然。
6.  32-64 位肮脏的库的一个版本，与另一个编译的可执行文件？

其他一些事情：

1.  可能是在 Matlab 中你以某种方式将类 (y) 泄漏到预处理中吗？没有人故意这样做，但我已经看到它发生了。如果您将几乎任何 f(y) 设为功能，那么您每次都会获得几乎 100% 的收益。
2.  有时，在使用 C++ 和 Matlab 进行训练之前，通过打印到文件来帮助验证所有内容在数值上是否相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T15:51:20.093

我对使用 rbf 内核的 libsvm 非常满意。carlosdc 以正确的顺序指出了最常见的错误 :-)。对于 libsvm - 你是否使用了 libsvm 附带的 python 工具？如果不是，我建议这样做。将特征向量写入文件（来自 matlab 和/或 c++），并使用 easy.py 对 rbf 内核进行元训练。您将获得生成模型的参数和预测。如果这个预测没问题，请继续使用 c++。通过训练，您还可以获得一个缩放的特征文件（每个特征的最小/最大转换为 -1.0/1.0）。也将这些与您的 c++ 实现进行比较。

一些 libsvm 问题：一个讨厌的习惯是（如果我没记错的话）缩放文件中忽略缩放到 0（零）的值。在 grid.py 中是一个参数“nr_local_worker”，它定义了线程的数量。您可能希望增加它。

# c - kbhit() 作为转义触发器

> ID：13670103
> 
> 赞同：2
> 
> 时间：2012-12-02T14:15:33.743
> 
> 标签：c, windows, kbhit

我想将 kbhit() 用于“按任意键继续”功能。但是，在我循环使用 kbhit() 之后，按键存储在标准输入中。因此，在下一个 scanf() 中，之前按下的键出现在输入中。

```
int x,b=0;    
printf("Press any key to continue...")
while (b==0) {

    b=kbhit();

    }
system("cls");

printf("Enter number:");

scanf("%d",&x); 
```

因此，如果用户按下一个键，假设是字母 K，则 k 出现在“输入数字：”之后。

我曾尝试寻找解决方案，但未能使其中任何一个起作用。我试图将退格字符放入输入流中。我也尝试使用 getch()，但是，用户必须按“Enter”才能继续，所以它违背了最初的目的。我还尝试通过关闭和打开来清除标准输入流，但我无法正常打开它。

编辑：正如 janisz 在评论中所说，我所需要的就是使用系统（“暂停”）。虽然我无法编辑正如 janisz 在评论中所说的那样，我所需要的只是使用系统（“暂停”）。虽然我无法编辑“按任意键继续”，但它足以满足我的目的。如果可能，我将继续尝试此处提供的其他解决方案以获得更好的结果，但目前我需要 system("pause")。

EDIT2：好的，你们中的一些人建议使用 getch()。根据我在网上看到的，getch() 函数从流中获取输入，而屏幕上没有实际显示字符，这正是我想要的。但是，当我尝试使用 getch() 时，按任意键后程序不会继续，它会等待我按 enter 键。有问题吗？我在 Windows 7 上使用 C-Free 4 Standard。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T02:59:29.303

kbhit() 返回一个整数值，指示用户是否按下了某个键。请注意，按下的键仍保留在缓冲区中。您所要做的就是使用 fflush(stdin) 语句刷新标准输入缓冲区。

但是，如果您想使用用户按下的键，则必须在使用 kbhit() 之后使用 getch() 或 scanf 语句。

您可以在此处阅读一篇关于[“如何在 C 和 C++ 中使用 kbhit”](http://preetisblog.com/programming/using-kbhit-in-c-and-cplusplus)的好文章以获取确切的使用说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:24:56.377

基本上看[http://support.microsoft.com/kb/43993](http://support.microsoft.com/kb/43993) ，在你读到你想要的字符后插入这个代码：

```
while (kbhit()) getch();         //clear buffer
fflush (stdin) ;         // clear stdin's buffer 
```

您需要刷新 bios kb 缓冲区和标准输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-04T10:14:19.367

```
#include <windows.h>`#include <windows.h>
#include <stdio.h>
#include <conio.h>      // for kbhit() only
#include <stdbool.h>    // for booleans

void cleaningBuffers()
{
    fflush(stdout);                         // always ok & need!
    while (kbhit()) getch();                // clear buffer
    if ( fflush(stdin) == 0 ) {;}           // undefined, not enough
    // flush the bios kb buffer:
    if ( fflush(__iob_func()) ==  0) {;}    // now ok
} 
```

并且控制台缓冲区很清楚...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T15:28:41.560

尝试这个

```
while(!kbhit());
getch(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T15:13:46.583

`kbhit()`在*conio.h*中，它是一个控制台功能。它不会受到改写的影响（但`fflush`会！）。因此，要“吃掉”按下的键，您应该使用`getch()`，这也是一个控制台功能。作为额外的奖励，它只会吃掉一个角色，而不是全部。

**编辑**：只有在重读您的问题时，我才想知道：为什么不`getch()`这样使用？是没用的`kbhit()`，除非你在循环中做一些事情。

此外，符合 POSIX 的函数名称将是`_getch()`and `_kbhit()`（至少在微软星球上）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-02T14:58:02.833

您应该考虑在按下键后**刷新输入流**

```
int x,b=0;    
printf("Press any key to continue...")
for(;;){
    if(kbhit()){
       fflush(stdin);
       break;
    }
}
system("cls");

printf("Enter number:");

scanf("%d",&x); 
```

现在你的**x**变量干净漂亮:)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-12-30T12:12:22.303

你可以使用 getchar()...它会扫描并显示在屏幕上

# prolog - Prolog - 不返回所需的变量

> ID：13670106
> 
> 赞同：1
> 
> 时间：2012-12-02T14:16:12.933
> 
> 标签：prolog, return-value

我意识到我的第一个问题太长了，没有人能理解。

这是一个浓缩的更简单问题的[链接](https://stackoverflow.com/questions/13670453/prolog-not-returning-desired-value)，该问题在更短的程序中展示了我的问题。

[精简问题链接] [Prolog - 未返回所需值](https://stackoverflow.com/questions/13670453/prolog-not-returning-desired-value)

==================================================== =================================

我正在尝试在 Prolog 中编写一个 Brainf*ck 解释器。

函数 bf 将采用 3 个字符串。仅相关部分代码如下：

```
%Prog - string of BF program
%Input- string of inputs for the BF program
%Output - what the BF program will output

bf(Prog, Input,Output):- run(Prog, Input, Output).

run(Prog, Input, Output) :-
    create_mem(Mem),
    iterateBF(Prog,[],Mem,0, Input, Output).

%start by creating the memory space
create_mem(Memory) :-
    var(Memory), %check if it is uninstantiated variable
    create_mem(Memory,10000).

create_mem([],0) :- !.
create_mem([0|Tail],Size) :-
    NewSize is Size - 1,
    create_mem(Tail,NewSize).

%get memory value at ptr location
get_mem([Value|_],Value,0). %base case
get_mem([_|Tail],Value,Ptr) :-
  Ptr > 0,
    NewPtr is Ptr - 1,
    get_mem(Tail,Value,NewPtr).

%for adding a value to memory space
%need to mod with 256 due to the it being 8 bits to get the actual value.

increase_mem([Value|MemTail],[NewValue|MemTail],0) :-
    NewValue is (Value + 1) mod 256.
increase_mem([Head|Tail],[Head|NewTail],Ind) :-
    Ind > 0,
    NewInd is Ind - 1,
    increase_mem(Tail,NewTail,NewInd).

%iterateBF(Prog,[],Mem,0, Input, []).
%when reach the end of the the

iterateBF([],_,_,_,_,[]) :- !.
iterateBF([],_,_,_,_,_) :-!.
iterateBF(Instruction,Inst_Iterated,Mem,Ptr,Input,Output) :-

   checkInstruction(Instruction,Inst_Iterated,Mem,Ptr,Input,Output,
      NewInstruction,NewInst_Iterated,NewMem,NewPtr,NewInput,NewOutput),
    iterateBF(NewInstruction,NewInst_Iterated,NewMem,NewPtr,NewInput,NewOutput).

checkInstruction([Plus|ProgTail],Inst_Iterated,Mem,Ptr,Input,Output,ProgTail,Inst_Iterated,NewMem,Ptr,Input,Output) :-
        char_code('+',Plus),
        increase_mem(Mem,NewMem,Ptr), !.

%get the memory value at ptr
%Put into Output
checkInstruction([Period|ProgTail],Inst_Iterated,Mem,Ptr,Input,Output,ProgTail,Inst_Iterated,Mem,Ptr,Input,NewOutput) :-
    char_code('.',Period),
    NewOutput = [Output|Value],
    get_mem(Mem,Value,Ptr),!. 
```

上面的代码将编译并且仅适用于：

```
bf("+.","",Out). 
```

SWI-Prolog 只会返回`true`，而我希望它返回`Out`.

在 SWI 中跟踪它，只要它返回到`iterateBF(Prog,[],Mem,0, Input, Output)`in的调用`run`，`Output`就会丢失其先前的值。

您只需要注意以下功能：

1.  跑
2.  迭代BF
3.  检查说明

其余的只是为了编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:28:56.230

你`checkInstruction([Plus|ProgTail],Inst_Iterated,Mem,Ptr,Input,Output,ProgTail,Inst_Iterated,NewMem,Ptr,Input,Output)`的太复杂了。

实际上，您的问题在于`Output`没有正确绑定。但是，与其进行“平庸”的更正，不如进行总体改进：

尝试评论您的代码，您期望它会做什么，并在完成后尽可能**简化**它。

# php - 加入 3 个表问题

> ID：13670114
> 
> 赞同：1
> 
> 时间：2012-12-02T14:17:08.363
> 
> 标签：php, mysql, sql, count

我正在尝试解决这个问题：

“我们的数据：我们在数据库中有三个表：

```
Plant – describes the possible plants
Planted – whatever the gardener planted
Picked – the crop that was provided after the plantation." 
```

我想要做的是加入 3 个这样的表：

```
SELECT plant.PlantID, plant.name, planted.Seeds, picked.Amount
FROM plant 
INNER JOIN planted ON plant.PlantID = planted.PlantFK
INNER JOIN picked ON picked.PlantFK = plant.PlantID 
```

因此，我可以获得有关特定 PlantID 的数据，其中种植了多少种子以及采摘了多少种子。但由于某种原因，我得到了多个植物。因为数据库有超过 1 个关于植物的条目/采摘了相同的 PlantID..

我该如何修复该连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T14:18:56.157

只需使用聚合函数`SUM`或`COUNT`类似的函数`GROUP BY plant.PlantID, plant.name`：

```
SELECT 
  plant.PlantID, 
  plant.name, 
  SUM(DISTINCT planted.Seeds) 'Planted', 
  SUM(DISTINCT picked.Amount) 'Picked' 
FROM plant 
INNER JOIN planted ON plant.PlantID = planted.PlantFK
INNER JOIN picked ON picked.PlantFK = plant.PlantID
GROUP BY   plant.PlantID, plant.name; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/1cb3f/4)

如果您想获得没有种子且从未采摘过的植物，则必须使用`LEFT JOIN`with`IFNULL()`来获取零而不是`NULL`s ，如下所示：

```
SELECT 
  plant.PlantID, 
  plant.name, 
  SUM(IFNULL(DISTINCT planted.Seeds, 0)) 'Planted', 
  SUM(IFNULL(DISTINCT picked.Amount, 0)) 'Picked' 
FROM plant 
LEFT  JOIN planted ON plant.PlantID = planted.PlantID
LEFT  JOIN picked ON picked.PlantID = plant.PlantID
GROUP BY   plant.PlantID, plant.name; 
```

## [更新的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/53464/3)

# php - js中需要警报框才能正常工作

> ID：13670121
> 
> 赞同：0
> 
> 时间：2012-12-02T14:18:30.323
> 
> 标签：php, javascript, html, ajax

我有一个表单，当您单击提交按钮时，会调用一个 js 脚本，然后调用 php 脚本来获取结果并以警报框的形式在用户中显示它们。

奇怪的是，如果我的 js 中有命令“alert("msg")”（你可以在下面看到），evertyhing 效果很好，但如果我删除它似乎没有任何效果....知道为什么会这样? 谢谢

```
<form action="#" method="post">
 <label for="userFirstName">Name </label>
 <input name="userFirstName" id="userFirstName" type="text" placeholder="First Name"        autofocus  /><br>
 <label for="userLastName">Surname </label>
 <input name="userLastName" id="userLastName" type="text" placeholder="Surname"  /><br>
 <label for="phonenumber">Phone Number</label>
  <input name="phonenumber" id="phonenumber" type="text" placeholder="Your Telephone  Number(10 digits))"  /><br>
 <label for="email">Email Address</label>
 <input name="email" id="email" type="text" placeholder="Your Email Address"  /><br>
 <button class="clearbutton" type="submit" value="Submit" onclick="checkInput(userFirstName.value,userLastName.value,phonenumber.value,email.value)">Add Partner</button> 
```

js脚本

```
//the first is the file and the second the value
function checkInput(name,surname,tel,email) {
//alert(name+" "+surname+" "+tel+" "+email);    
xmlhttpURL=GetXmlHttpObjectURL();
if (xmlhttpURL==null) {
    alert ("Your browser does not support AJAX!");
    return;
}

var url = "AddPartnersDb.php";
url = url + "?n=" + name + "&l=" + surname + "&t=" + tel + "&m=" + email;                           
    // Adds a parameter (q) to the URL with the content of the drop-down box
url = url + "&sid=" + Math.random();                    
    // Adds a random number to prevent the server from using a cached file
xmlhttpURL.onload = stateChanged;   // Each time the readyState property changes, the stateChanged() function will be executed
xmlhttpURL.open("GET",url,true);                // Opens the XMLHTTP object with the given URL
xmlhttpURL.send(null); 
alert("msg"); //<---------------------When i have this everything sees ok...
    } 

function stateChanged() {
    if (xmlhttpURL.readyState==4) {
        var res = xmlhttpURL.responseText;      
        //if(res.length>0)
            alert(res);
    }
}

function GetXmlHttpObjectURL() {
    if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
        return new XMLHttpRequest();
    }
    else { // code for IE6, IE5
        return new ActiveXObject("Microsoft.XMLHTTP");
    }
    return null;
} 
```

php脚本：

```
<?php

//database connection
$dbc = mysqli_connect('localhost','root','root','WTHw3') or die('Error connecting to MySQL server.');

//the values sent from the ajax script
$name = mysqli_real_escape_string($dbc,trim($_GET["n"]));
$surname = mysqli_real_escape_string($dbc,trim($_GET["l"]));
$email=mysqli_real_escape_string($dbc,trim($_GET["m"]));;
$tel=mysqli_real_escape_string($dbc,trim($_GET["t"]));

//a var to store the result(if any) and show the error to the admin
$result="";
if ( !eregi ( '[a-z||0-9]@[a-z||0-9].[a-z]', $email ) ) { //checks to make sure the email address is in a valid format  
    $result .= "Not Valid e-mail!\n";
}   

if(strlen($tel) != 10){
    $result .= "Telephone must be a numeric with 10 nums length!";
}elseif(!is_numeric($tel)) {        
    $result .= "Telephone must be a numeric with 10 nums length!!!";
    }

//check for a validation error
if($result==""){
    //query to be executed
    //$query = "INSERT INTO  Partners(partnerName,partnerSurname,partnerTel,partnerEmail) values  ('$name','$surname','$tel','$email')"; 
    //query execution
    //$dbResult = mysqli_query($dbc,$query) or die('Error querying database.');
    echo "wtf";

}else {
    echo $result;
}
//close connection
mysqli_close($dbc);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:58:32.183

您的问题是您的按钮不应键入“提交”，因为您在用户单击时通过 AJAX 调用 Web 服务：当调用 alert() 时，它会在提交表单之前为完成 ajax 调用提供时间。

尝试将提交按钮的类型更改为`button`，并添加 a`return false`和`checkInput()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:51:37.043

如果您希望按钮类型为提交，您可以编写如下代码

```
<form action="#" method="post" onsubmit="return checkInput(userFirstName.value,userLastName.value,phonenumber.value,email.value)">
 <label for="userFirstName">Name </label>
 <input name="userFirstName" id="userFirstName" type="text" placeholder="First Name"        autofocus  /><br>
 <label for="userLastName">Surname </label>
 <input name="userLastName" id="userLastName" type="text" placeholder="Surname"  /><br>
 <label for="phonenumber">Phone Number</label>
  <input name="phonenumber" id="phonenumber" type="text" placeholder="Your Telephone  Number(10 digits))"  /><br>
 <label for="email">Email Address</label>
 <input name="email" id="email" type="text" placeholder="Your Email Address"  /><br>
 <button class="clearbutton" type="submit" value="Submit">Add Partner</button> 
```

然后，如果你想提交表单添加

```
return true; 
```

或者

```
return false; 
```

如果 checkInput 函数中的验证失败。最好使用提交类型而不是按钮，因为当用户按 Enter 键时，如果按钮类型为提交，则将提交表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T08:05:33.197

从@Roimer 的答案和一些评论分支，我建议使用 jQuery，因为同时也大大简化了上面的代码，为您提供了很棒的资源：`event.preventDefault();`它允许您阻止提交表单，同时让您能够回退到如果 javascript 未启用或在单击时尚未完全加载，则默认提交按钮。

投资此功能还有[其他重要原因。](http://css-tricks.com/return-false-and-prevent-default/)

# sql - SQL Server 的自定义聚合函数

> ID：13670123
> 
> 赞同：1
> 
> 时间：2012-12-02T14:18:34.213
> 
> 标签：sql, sql-server-2005, stored-procedures

我有一个包含三列的表：

*   ID
*   参考
*   描述

为了报告的目的，我想用相同的参考对行进行分组，并产生一个`Description`是两个描述的函数。

`MERGED_DESCRIPTION(desc1,desc2)`是否可以在 SQL Server 2008 中编写？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T14:20:48.557

使用 SQL CLR（将 .NET 集成到 SQL Server）：是

您可以创建自己的[CLR 用户定义聚合](http://msdn.microsoft.com/en-us/library/ms131057.aspx)。

# c++ - 访问冲突写入位置 0x00000000。C++ / SFML 游戏

> ID：13670124
> 
> 赞同：1
> 
> 时间：2012-12-02T14:18:40.267
> 
> 标签：c++, sfml

我正在使用 C++ 和 SFML 2.0 开展一个学校项目，该项目将于周二到期，而我最近刚刚遇到了这个问题。我在最新的调用堆栈所在的位置上放了一个箭头。这些是我怀疑其中可能有问题的代码部分。我对 c++ 也很陌生，我知道我做错了很多事情。

这是在我的`Background`课堂上，它加载我所有的瓷砖，设置它们的位置和瓷砖类型等等。

将`GetWayPointList`瓷砖矢量返回给我的`EnemyManager`班级

```
void Background::Load(QuadTree * quadTree) {

        int tempTiles[32][32] = {... Lots of 1's and 0's in here };

        for(int i = 0; i < 32; i++)
        {
            for(int j = 0; j < 32; j++)
            {
--->                    tile[j][i]->tileType = tempTiles[j][i];
                    tile[j][i]->setPosition(sf::Vector2f((float)(i*32),(float)(j*32)));
                    if(tile[j][i]->tileType == 1)
                    {
                        quadTree->AddObject(tile[j][i]);            
                    }

                else if(tile[j][i]->tileType == 0)
                {
                    tile[j][i]->distanceFromStart = INT_MAX;
                    tile[j][i]->parent = NULL;

                    vector<Tile*> tempTiles;
                    if(tile[j+1][i]->tileType == 0)
                        tempTiles.push_back(tile[j+1][i]);
                    if(tile[j-1][i]->tileType == 0)
                        tempTiles.push_back(tile[j-1][i]);
                    if(tile[j][i+1]->tileType == 0)
                        tempTiles.push_back(tile[j][i+1]);
                    if(tile[j][i-1]->tileType == 0)
                        tempTiles.push_back(tile[j][i-1]);
                    tile[j][i]->setSuccessors(tempTiles);
                    tilesList->push_back(tile[j][i]);
                }
            }
        }
    }

vector<Tile*>* Background::GetWayPointList()
{
    return tilesList;
} 
```

调用堆栈本身说`TileShooter v0.1.exe!Background::Load(QuadTree*quadTree) Line 68 + 0x2e bytes`。第 68 行是箭头所在的位置。

如果您需要更多代码/信息，请说。任何关于可能出错的地方都会受到极大的赞赏。最好的问候，弗雷德里克 W

* * *

**编辑**

我已经编辑了一些代码，包括`tile[j][i] = new Tile();`

```
void Background::Load(QuadTree * quadTree) {

        int tempTiles[32][32] = {... Lots of 1's and 0's in here };

        for(int i = 0; i < 32; i++)
        {
            for(int j = 0; j < 32; j++)
            {
                    tile[j][i] = new Tile();
                    tile[j][i]->tileType = tempTiles[j][i];
                    tile[j][i]->setPosition(sf::Vector2f((float)(i*32),(float)(j*32)));
                    if(tile[j][i]->tileType == 1)
                    {
                        quadTree->AddObject(tile[j][i]);            
                    }

                else if(tile[j][i]->tileType == 0)
                {
                    tile[j][i]->distanceFromStart = INT_MAX;
                    tile[j][i]->parent = NULL;

                    vector<Tile*> tempTiles;
---->                   if(tile[j+1][i]->tileType == 0)
                        tempTiles.push_back(tile[j+1][i]);
                    if(tile[j-1][i]->tileType == 0)
                        tempTiles.push_back(tile[j-1][i]);
                    if(tile[j][i+1]->tileType == 0)
                        tempTiles.push_back(tile[j][i+1]);
                    if(tile[j][i-1]->tileType == 0)
                        tempTiles.push_back(tile[j][i-1]);
                    tile[j][i]->setSuccessors(tempTiles);
                    tilesList->push_back(tile[j][i]);
                }
            }
        }
    }

vector<Tile*>* Background::GetWayPointList()
{
    return tilesList;
} 
```

这并没有真正解决，而是将错误向下移动，我将箭头移到调用堆栈最新调用的位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T14:30:07.343

所以你的`tile`成员被定义为`Tile* tile[32][32]`。这是一个大小为 32x32 的二维数组，其中每个元素都是指向`Tile`. 但是，它们*只是*指针，目前并没有特别指向任何地方 - 访问它们是未定义的行为（在您的情况下，访问冲突）。您需要分配实际`Tile`对象：

```
for (int i = 0; i < 32; i++) {
  for (int j = 0; j < 32; j++) {
    tile[i][j] = new Tile();
  }
} 
```

不要忘记在`Background`that的析构函数中执行相同类型的循环`delete tile[i][j];`。

更好的是，不要动态分配您的图块，只需定义`tile`为：

```
Tile tile[32][32]; 
```

更好的是（！），使用`std::array<std::array<Tile,32>,32>`. :)

* * *

要回答您的编辑，即使它使我的上述答案无效：您正在`j+1`访问`tile`. 什么时候`j`是 31，您正在访问`tile[32]`数组范围之外的内容。

# azure - 将 bacpac 文件导入到 Azure 门户上的现有 WASD

> ID：13670125
> 
> 赞同：3
> 
> 时间：2012-12-02T14:18:43.313
> 
> 标签：azure, azure-sql-database, azure-storage, azure-blob-storage

[我已按照此链接](http://msdn.microsoft.com/en-us/library/hh335292.aspx)中提到的步骤操作，并且已在 azure 门户上成功创建了新数据库。但是我想知道如何使用 .bacpac 文件将其导入现有数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-30T13:12:31.083

目前给定的答案不起作用，因为到目前为止，Azure 门户的界面已经发生了重大变化。您不会那么容易找到导入按钮！假设您已从导航面板单击 SQL 数据库，然后在底部单击“新建”。然后你会发现导入按钮。其余的很容易。我花了大约 2 个小时才弄清楚微软在他们的[文档](http://msdn.microsoft.com/library/azure/hh335292.aspx)中写了什么，以及我在他们的门户中看到了什么！它不匹配，微软忘记更新他们的文档！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:18:43.410

如果您想通过 Windows Azure 门户导入 bacpac 文件，您需要转到**SQL 数据库**并按**导入**按钮。您将能够从您的一个存储帐户中选择一个 bacpac（您可以使用 CloudXplorer 等免费工具将 bacpac 文件上传到您的存储帐户[）](http://clumsyleaf.com/products/cloudxplorer)。

![在此处输入图像描述](../Images/704fa979756e860bd5870c9f10ca970e.png)

**注意：**导入过程不允许您导入现有数据库。您将获得创建新数据库的选项。

# php - 将 URL（超链接）链接到 PHP 方法

> ID：13670127
> 
> 赞同：0
> 
> 时间：2012-12-02T14:18:45.533
> 
> 标签：php, html, url, href

我在一个页面上有几个链接，所有这些链接都需要在 PHP 中执行不同的方法。“创建文件”链接，“重命名文件”链接和“删除文件”链接。

我知道使用每个超链接执行 PHP 代码的唯一方法是将不同 PHP 文件的 URL 提供给每个超链接。

有没有办法将 URL (HREF) 链接到 PHP 文件中的特定方法？以下是几行不起作用的代码，但可能会帮助您理解我想要实现的目标：

```
<a href="fileManagement.php::createFile()">Create File</a>
<a href="fileManagement.php::renameFile()">Rename File</a>
<a href="fileManagement.php::deleteFile()">Rename File</a> 
```

我也很确定我采用了错误的方法，但我是一个 PHP 新手，无法更好地了解 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T14:38:43.097

在您的情况下，常用方法是设置一个名为 fileAction 之类的 GET 参数，然后切换它的值，因此您的链接将如下所示：

```
<a href="fileManagement.php?fileAction=create">Create File</a>
<a href="fileManagement.php?fileAction=rename">Rename File</a>
<a href="fileManagement.php?fileAction=delete">Delete File</a> 
```

你的 filemanagement.php 逻辑看起来有点像这样：

```
<?php 
$fileAction = $_GET['fileAction'];
switch ($fileAction) {
    case 'create':
        createFile();
        break;
    case 'rename':
        renameFile();
        break;
    case 'delete':
        deleteFile();
        break;
    default:
        //your default logic here
        break;
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T14:22:36.633

您可以将方法名称作为 $_GET 值发送并执行相应的函数，如下所示：

HTML：

```
 <a href="functions.php?method=someMethod">Run some method</a> 
```

PHP：

```
 <?php
 if (isset($_GET['method'])) {
 $method = $_GET['method'];
 $method();
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T14:29:08.140

```
<?php 
    @$Method = $_GET['Method'];
    if (!(isset($Method)))
    {
        $Method = "0"; // If URL does not contain ?Method=1 Then Assign It To 0 
    }
    if ($Method > "3")
    {
        $Method = "0";
        // If ?Method= value is higher than 3 Then Set it to 0 
    }
    if ($Method == "0")
    {
        echo "<a href=\"fileManagement.php?Method=1\">Create File</a>";
        echo "<a href=\"fileManagement.php?Method=2\">Rename File</a>";
        echo "<a href=\"fileManagement.php?Method=3\">Delete File</a>";
    }
    elseif ($Method == "1")
    {
        // Method = 1 Is Create File So:
        // CreateFile();
    }
    elseif ($Method == "2")
    {
        // Method 2 is Rename File 
        // renameFile();

    }
    elseif ($Method == "3")
    {
        // Method 3 Is Delete File
        // deleteFile();
    }

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T20:36:30.167

您所描述的是使用 MVC 框架的完美场景。那里有很多这样的框架，它们可以帮助您更好地组织代码。如果您刚开始使用 PHP，我强烈建议您查看 Web 上的框架和一些代码示例，以了解 MVC 原理。

使用 MVC 框架时，您只需定义映射到特定类（控制器）中特定功能（操作）的*路由。*我不会在这个答案中走得太远，但我建议您通过这些资源来帮助您入门：

*   [维基百科上的 MVC 定义](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)
*   [CodeIgniter](http://ellislab.com/codeigniter)，一个 PHP 的 MVC 框架

# icons - 像素艺术图标

> ID：13670134
> 
> 赞同：-1
> 
> 时间：2012-12-02T14:19:25.063
> 
> 标签：icons

我正在开发我的网络项目，并且正在寻找所有像 twitter、facebook 等大公司创建他们的图标集的方式。

你有没有看过他们的精灵？
[https://fbstatic-a.akamaihd.net/rsrc.php/v2/yI/x/4jB4tvIAAbU.png](https://fbstatic-a.akamaihd.net/rsrc.php/v2/yI/x/4jB4tvIAAbU.png)

他们是怎么画出那些小图标的？这种技术叫做像素艺术吗？我在哪里可以雇人为我画一些？

如果这不是问的地方，我很抱歉，不知道在哪里发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:29:05.110

您可以使用各种程序创建像素艺术，包括 Adob​​e Photoshop、Fireworks 等，但也有免费软件和廉价产品。

看看这个：[http ://code.google.com/p/grafx2/](http://code.google.com/p/grafx2/)

如果您不熟悉图形设计，您可以使用自由职业者服务（例如 Freelancer.com、Odesk.com 或其他各种服务）雇用某人。只需谷歌它。

是的，它被称为像素艺术，它使用有限的调色板（通常是 8 位或 16 位）——其中每个像素由一个 8 位字节表示（最大颜色：256）。与使用抗锯齿技术的现代图形相反，该技术会模糊边缘以产生平滑边缘的错觉。

# ruby - 以 CSV 格式写入文件

> ID：13670136
> 
> 赞同：2
> 
> 时间：2012-12-02T14:19:46.497
> 
> 标签：ruby, csv

我正在使用在 stackoverflow 上找到的这段代码将数据写入文件。

```
begin
  file = File.open("/tmp/some_file", "w")
  file.write("your text") 
rescue IOError => e
  #some error occur, dir not writable etc.
ensure
  file.close unless file == nil
end 
```

如果我输入其中一个变量名称，它会在其中显示您的文本，它将填充用作该变量的正确字符串，但理想情况下，我想要在输出中包含多个变量，理想情况下是 CSV。就像是：

```
file.write(var1 ^ var2 ^ var3) 
```

我的每个变量都由胡萝卜符号分隔。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:30:02.990

实际上，虽然标准 ruby​​ 库中有一个 CSV 库，但 CSV 有一个 gem。

看一下示例，您会发现用 ruby​​ 编写 CSV 文件比您想象的要容易得多。

[http://fastercsv.rubyforge.org/classes/FasterCSV.html](http://fastercsv.rubyforge.org/classes/FasterCSV.html)

[http://fastercsv.rubyforge.org/](http://fastercsv.rubyforge.org/)

[红宝石标准库： http:](http://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html#method-c-generate) //ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html#method-c-generate

# python - 在元组中评估为 False 的变量

> ID：13670139
> 
> 赞同：2
> 
> 时间：2012-12-02T14:20:29.993
> 
> 标签：python, boolean, tuples, transitions

为什么`inSetStates`,`inInputAlph`和`isCorrectDirection`变量`False`在以下代码中被评估为：

```
class POC(object):
  def __init__(self):
    self.__set_states = (1,2,3,4,5)
    self.__input_alph = ('a','b')
    self.__directions = ('i','d')

  def enterTransition(self):
    while True:
      print "enter transition tuple format:"
      trans = raw_input(" Example (1,'a',2,'b','d') : ")
      inSetStates = (trans[0] in self.__set_states) and (trans[2] in self.__set_states)
      inInputAlph = (trans[1]in self.__input_alph) and (trans[3] in self.__input_alph)
      isCorrectDirection = (trans[4].lower() in self.__directions) or (trans[4].lower() in self.__directions)
      if (inSetStates and inInputAlph and isCorrectDirection):
        return trans
        break
      else:
        print "ERROR: Something is wrong"

poc = POC()
poc.enterTransition() 
```

调试器向我展示了 tuple的`three`值，并且：`False``(1, 'a', 2, 'b', 'd')`

```
inInputAlph = False
inSetStates = False
isCorrectDirection = False
self = <__main__.POC object at 0x1860690>
trans = "(1,\'a\',2,\'b\',\'i\')" 
```

*另外，我不知道这些反斜杠是什么。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T14:24:28.080

`trans`是一个字符串，而不是一个元组。字符串也是可索引`trans[1]`的，*字符串* `'1`' （位置 1 的字符）也是可索引的。

您需要先将输入转换为元组。一个简单的方法是使用[`ast.literal_eval()`函数](http://docs.python.org/2/library/ast.html#ast.literal_eval)：

```
 >>> import ast
 >>> ast.literal_eval("(1,\'a\',2,\'b\',\'i\')")
 (1, 'a', 2, 'b', 'i') 
```

该`.literal_eval()`函数将其输入解释为 python 文字，并将尝试返回与该输入匹配的 python 值。

# c# - 如何使用响应式扩展实现文件观察器

> ID：13670142
> 
> 赞同：6
> 
> 时间：2012-12-02T14:20:52.030
> 
> 标签：c#, system.reactive

我是 Rx 的新手，希望在我当前的项目中使用它。我正在尝试实现文件观察器系统。至少现在我只对文件创建事件感兴趣。但是在尝试运行以下代码时，我收到“值不能为空错误消息”。请有人可以用下面的代码帮助我。

```
class Program
{
    static void Main(string[] args)
    {
        IDisposable writer = new FileSystemObservable(@"D:\Code\Rx\Dropbox\", "*.*", false)
                            .CreatedFiles
                            .Where(x => (new FileInfo(x.FullPath)).Length > 0)
                            .Select(x => x.Name)
                            .Subscribe(Console.WriteLine);
        Console.ReadLine();
    }
}

class FileSystemObservable
{
    private readonly FileSystemWatcher fileSystemWatcher;

    public FileSystemObservable(string directory, string filter, bool includeSubdirectories)
    {
        fileSystemWatcher = new FileSystemWatcher(directory, filter)
            {
                EnableRaisingEvents = true,
                IncludeSubdirectories = includeSubdirectories
            };

        CreatedFiles = Observable.FromEventPattern<FileSystemEventHandler, FileSystemEventArgs>
                (h => fileSystemWatcher.Created += h,
                h => fileSystemWatcher.Created -= h)
                .Select(x => new { x.EventArgs }) as IObservable<FileSystemEventArgs>;

        Errors = Observable.FromEventPattern<ErrorEventHandler, ErrorEventArgs>
                (h => fileSystemWatcher.Error += h,
                h => fileSystemWatcher.Error -= h)
                .Select(x => new { x.EventArgs }) as IObservable<ErrorEventArgs>;
    }

    public IObservable<ErrorEventArgs> Errors { get; private set; }

    public IObservable<FileSystemEventArgs> CreatedFiles { get; private set; }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T14:30:33.320

结果

```
Select(x => new { x.EventArgs }) as IObservable<ErrorEventArgs> 
```

和

```
.Select(x => new { x.EventArgs }) as IObservable<FileSystemEventArgs>; 
```

行将始终返回 null。

的类型`Select(x => new { x.EventArgs })`是一些匿名类型。`IObservable<'a>``'a`

您应该改用：

```
CreatedFiles = 
    Observable.FromEventPattern<FileSystemEventHandler, FileSystemEventArgs>(
        h => fileSystemWatcher.Created += h,
        h => fileSystemWatcher.Created -= h)
    .Select(x => x.EventArgs);

Errors = 
    Observable.FromEventPattern<ErrorEventHandler, ErrorEventArgs>(
        h => fileSystemWatcher.Error += h,
        h => fileSystemWatcher.Error -= h)
    .Select(x => x.EventArgs); 
```

# function - 类似宏的函数作为 postgresql 中的过滤器

> ID：13670144
> 
> 赞同：4
> 
> 时间：2012-12-02T14:21:03.060
> 
> 标签：function, postgresql, database, stored-functions

我有一个表，里面有一些 RDF 语句，比如`Quads(graph, subject, verb, object)`我发现自己在做如下查询：

```
select * from quads where verb = 'rdf:type' and object = 'smtg:Type'
select * from quads where verb = 'rdf:label' and object = 'bla bla' 
```

我想以类似的形式表达这一点

```
select * from quads where type('smtg:Type')
select * from quads where label('bla bla') 
```

虽然这似乎是一个“微不足道的”文本替换，但我不知道如何以及是否可以在 postgresql 中实现，尽管我有点认为这是不可能的。

据我所知，我可以使用函数对常量进行硬编码，并执行

```
select * from quads where rdftype() = verb and object = 'smtg:Type' 
```

或者我可以使用函数作为`from`参数

```
select * from typed('smtg:Type') 
```

可悲的是，前者相当冗长，后者似乎不能修改为组合，例如我不能做一个假设

```
select * from quads where type('smtg:Type') and inGraph('mygraph') 
```

有没有办法做我想做的事？这似乎是不可能的，但我想知道是否有办法。

**编辑**：一个 sqlfiddle 实例：[http](http://sqlfiddle.com/#!1/40b2c/3) ://sqlfiddle.com/#!1/40b2c/3 。

更清楚地说，这似乎不可行的原因是宏函数将返回一个布尔值（它在`where`子句中使用，就好像它 where a `select $1=somevalue`）但使用它可以访问的“隐式”行参数一次多个字段，我在 pg 文档中没有看到这样的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T15:39:46.883

> 并且后一个 [function] 似乎不能修改为组合，例如我不能做一个假设

只要返回类型是稳定的，你就可以在 plpgsql 函数中做任何事情。

您没有透露如何解决`type('smtg:Type')`或`inGraph('mygraph')`- 这些应该是功能吗？返回..什么？
但是对于这样一个简单的情况，即使是一个普通的 SQL 函数也应该可以完成这项工作：

```
CREATE OR REPLACE FUNCTION f_foo (_type text, _graph text DEFAULT NULL)
  RETURNS SETOF quads AS
$func$
   SELECT *
   FROM   quads
   WHERE  CASE WHEN $1 IS NOT NULL THEN ... ELSE ... END
   AND    CASE WHEN $2 IS NOT NULL THEN ... ELSE ... END
   ORDER  BY ...;
$func$  LANGUAGE sql; 
```

在 PostgreSQL 9.2 或更高版本中，您还可以在 SQL 函数中使用参数名称而不是位置参数 ( `$1`, `$2`, ..)。

称呼：

由于我为第二个参数定义了 DEFAULT，因此您可以使用一个*或*两个参数调用此函数：

```
SELECT * FROM f_foo('smtg:Type'); 
```

或者：

```
SELECT * FROM f_foo('smtg:Type', 'mygraph'); 
```

# java - 如何为嵌入在 java 程序中的数据库打开 hsql gui？

> ID：13670147
> 
> 赞同：3
> 
> 时间：2012-12-02T14:21:41.720
> 
> 标签：java, database, eclipse, user-interface, hsqldb

我在我的程序中嵌入了 hsql db，并在我的 *.script 文件中自动创建表。但是，我想要 hsql gui，以便我可以更好地检查一切是否正确？

如何为我的嵌入式 db 文件加载 gui？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T18:03:36.597

可以使用下面的方法调用，`yourdb`作为你的 mem: 数据库的名称：

```
org.hsqldb.util.DatabaseManagerSwing.main(new String[] { "--url", "jdbc:hsqldb:mem:yourdb", "--noexit" }); 
```

该方法应该在它自己的线程中执行，这样它就不会停止你的程序。

# sql - 第一个数据库 - 如何构建所需信息

> ID：13670149
> 
> 赞同：0
> 
> 时间：2012-12-02T14:21:48.713
> 
> 标签：sql, database, sqlite

我观看了一些关于如何使用表和字段构建数据库的 youtube 视频。我对如何构建我的信息有点困惑。

我把我的尝试放在下面：

```
// Identifier Table
// This is where we give each item a new unique identifier
UniqueID            []

// Item Table
// This is where the main content goes which is displayed
UniqueID            []
Title               []
Description         []
Date                []
Location            []
Coordinates         []
Source              []
Link                []

// Misc Table
// This is additional useful information, but not displayed
geocoded            []
country name        [] 
```

通过在删除记录时分离出 uniqueID，我可以确保新记录仍然具有唯一的递增 ID。我能得到一些关于我如何将数据分成三个表的反馈吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:47:38.283

在上述情况下，我会将所有内容打包到一个表中，因为将数据拆分到不同的表中并没有足够的复杂性。

当您有更多元数据时，您可以将其拆分为：

**项目**（用于显示数据）

**ItemMeta**（用于元数据）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T16:03:16.910

你没有给我们任何暗示你想在你的数据库中代表什么。

例如：如果位置和坐标描述了一座建筑物或房间，那么将这些信息保存在一个额外的表格中并与项目建立关系可能会很有用，因为这将允许轻松地获取所有相关的项目。

当然，您应该对国家/地区应用相同的原则：位置位于一个国家/地区。

```
BEGIN;
CREATE TABLE "country" (
    "id" integer NOT NULL PRIMARY KEY,
    "name" varchar(255) NOT NULL
)
;
CREATE TABLE "location" (
    "id" integer NOT NULL PRIMARY KEY,
    "name" varchar(255) NOT NULL,
    "coordinate" varchar(255) NOT NULL,
    "country_id" integer NOT NULL REFERENCES "country" ("id")
)
;
CREATE TABLE "item" (
    "id" integer NOT NULL PRIMARY KEY,
    "title" varchar(25) NOT NULL,
    "description" text NOT NULL,
    "date" datetime NOT NULL,
    "source" varchar(255) NOT NULL,
    "link" varchar(255) NOT NULL,
    "location_id" integer NOT NULL REFERENCES "location" ("id")
)
; 
```

# java - 在 apache 速度中评估哈希图

> ID：13670150
> 
> 赞同：0
> 
> 时间：2012-12-02T14:21:57.670
> 
> 标签：java, velocity

我有一个这样的模板

```
$VAR_A

$VAR_B

#foreach ($obj in $TEMPLATE_ANOTHER) 

Value of VAR_A is $VAR_A
Value of REFVAR_A is $obj.get("A")

#if($VAR_A == $obj.get("A"))
 print success
#else
 print failure
#end

#end 
```

合并上下文时，我为 VAR_A = a1、VAR_B = b1 和 TEMPLATE_ANOTHE 提供值，我提供具有以下条目的 HashMap

```
("A", "a1")
("B", "b3")
("C", "c8") 
```

合并时，预期的输出是

```
Value of VAR_A is a1
Value of REFVAR_A is a1
print success 
```

== 根本没有正确评估并且打印失败。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:10:37.490

我认为 "==" 使用身份比较，您可能需要使用 equals() 来实际比较对象，即

```
#if($VAR_A.equals($obj.get("A")))
... 
```

# java - 为什么 #clone() 不在 Cloneable 接口中？

> ID：13670152
> 
> 赞同：18
> 
> 时间：2012-12-02T14:22:16.733
> 
> 标签：java

我正在阅读正确执行数组的深拷贝，但是我对如何`#clone()`实现感到困惑。它是`java.lang.Object`该类的成员，但是如果您阅读 javadocs：

> 首先，如果该对象的类没有实现接口 Cloneable，则抛出 CloneNotSupportedException。

那么为什么`clone`首先在那里定义方法呢？当然，如果一个方法只能在接口存在时使用，你应该把方法放在接口中。`Cloneable`接口本身是空的；它只是Java用来确保使用该`clone`方法是合法的标记接口。

这样做也消除了使用泛型来确保类型安全的能力：

```
class Foo implements Cloneable { // Valid.
    @Override
    public Object clone() throws CloneNotSupportedException {
        // ...
    }
}

class TypeSafeFoo implements Cloneable<TypeSafeFoo> { // Not valid.
    @Override
    public TypeSafeFoo clone() throws CloneNotSupportedException {
        // ...
    }
} 
```

为什么 Java 会这样做呢？我确信他们有正当的理由，但我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-02T15:23:42.600

Java 中的克隆契约规定每个`clone`实现必须首先从`super.clone()`. 这将创建一个始终以调用 结束的链`Object.clone`，并且该方法包含“神奇的”本机级代码，该代码生成`struct`表示 Java 对象的底层 raw 的二进制副本。如果这种机制不存在，`clone`那么它就不能是多态的：该`Object.clone`方法会生成调用它的任何类的实例；没有本机代码，这是无法复制的。

这就是为什么`Object.clone`无法避免这种方法的原因。`Cloneable` **可以**包含一个`clone`方法，但它会产生有关该`throws`子句的问题。就目前的情况而言，您可以自由声明`clone`不声明异常，或声明任意异常。如果方法已在接口中声明，则无法实现这种灵活性。

请记住，泛型对于克隆几乎没有用处：想象一下`protected T clone()`：`Object`从哪里来`T`？我们是否需要`Object<T>`并强制**Java 世界中的每个类都**对其自身进行参数化，而这一切只是为了让这种半弃用的机制更好地工作吗？还要记住，这段代码是完全合法的：

```
public class TheMightyOne implements Cloneable {
   @Override public TheMightyOne clone() {
     return (TheMightyOne) super.clone();
   }
} 
```

你可以这样称呼它：

```
TheMightyOne one = new TheMightyOne();
TheMightyOne two = one.clone(); // do downcasts needed 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T14:31:13.257

为了处理创建克隆和基本字段复制，克隆需要继承一个方法实现。Cloneable 类可以出现在层次结构中的任何位置，并且可能需要扩展特定的超类来完成其主要工作。所有可能的 Cloneable 类都可以从其继承实现的唯一超类是 Object。

克隆早在泛型之前就已经定义了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T09:10:52.363

`clone()`方法是不必要的，每个对象都可以`Object.clone`通过反射来调用方法，所以一个对象是否可以克隆取决于是否实现`Cloneable`接口。这是出于安全原因。你可以简单地克隆一个由这个工具实现的对象`Cloneable`：

```
@SuppressWarnings("unchecked")
public static <T extends Cloneable> T clone(Cloneable obj) {
    T rtn = null;
    try {
        Method method = Object.class.getDeclaredMethod("clone");
        method.setAccessible(true);
        rtn = (T) method.invoke(obj);
    } catch (Throwable t) {
        t.printStackTrace();
    }
    return rtn;
} 
```

# xml - XML 验证问题：错误 s4s-elt-must-match

> ID：13670153
> 
> 赞同：2
> 
> 时间：2012-12-02T14:22:19.677
> 
> 标签：xml, validation, xsd, schema

我目前正在玩一些基本的 XS Schema 东西，但是在尝试验证我的模式时遇到了一个恼人的错误。我正在使用 XMLValidation.com，我得到的错误是：

```
s4s-elt-must-match.1: The content of 'lecturers' must match (annotation?, (simpleType | complexType)?, (unique | key | keyref)*)). A problem was found starting at: element. 
```

然后，我的XSD如下：

```
<?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:element name="lecturers">
    <xs:element name="lecturer">
        <xs:complexType>
            <xs:sequence>
            <xs:element name="name" type="xs:string" />
            <xs:attribute name="title" type="xs:string" />
            <xs:attribute name="first" type="xs:string" />
            <xs:attribute name="last" type="xs:string" />
        </xs:sequence>
    </xs:complexType>
    <xs:element name="teaching">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="course" type="xs:string" />
            <xs:attribute name="code" type="xs:string" />
            <xs:element name="course" type="xs:string" />
            <xs:attribute name="code" type="xs:string" />
        </xs:sequence>
    </xs:complexType>
    </xs:element>
        <xs:element name="research" type="xs:string"/>
    </xs:element>
</xs:element>
</xs:schema> 
```

相应的 XML 文件如下所示：

```
<?xml version="1.0"?>
<lecturers xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:noNamespaceSchemaLocation="lecturers.xsd"> 
   <lecturer>   
  <name title="Professor" first="Peter" last="Quirk" /> 
  <teaching> 
    <course code="CO3070">XML and the Web</course> 
    <course code="CO3300">Web Server Architectures</course> 
  </teaching> 
<research>The application of Web protocols to Biology</research> 
   </lecturer> 
</lecturers> 
```

任何人都知道为什么我的代码没有验证以及我可以做些什么来解决它。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:30:12.163

我得到了以下工作......

```
<?xml version="1.0"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:element name="lecturers">
  <xs:complexType>
    <xs:sequence maxOccurs="unbounded">
      <xs:element name="lecturer">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="name">
              <xs:complexType>
                <xs:attribute name="title" type="xs:string" />
                <xs:attribute name="first" type="xs:string" />
                <xs:attribute name="last" type="xs:string" />
              </xs:complexType>
            </xs:element> <!-- name -->
            <xs:element name="teaching">
              <xs:complexType>
                <xs:sequence maxOccurs="unbounded">
                  <xs:element name="course">
                    <xs:complexType mixed="true">
                      <xs:attribute name="code" type="xs:string" />
                    </xs:complexType>
                  </xs:element> <!-- course -->
                </xs:sequence>
              </xs:complexType>
            </xs:element> <!-- teaching -->
            <xs:element name="research" type="xs:string"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element> <!-- lecturer -->
    </xs:sequence>
  </xs:complexType>
</xs:element> <!-- lecturers -->
</xs:schema> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T15:50:09.117

讲师必须像其他元素一样包含 complexType ：-

```
<xs:element name="lecturers">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="lecturer">
                <xs:complexType>
                    <xs:sequence> 
```

...

这个错误虽然很神秘，但却是这样说的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T15:58:44.863

要使 xml 得到验证，此模式将执行此操作。

```
<xs:element name="teaching">
<xs:complexType>
    <xs:sequence>
        <xs:element name="course" maxOccurs="unbounded">
        <xs:complexType>
        <xs:simpleContent>
        <xs:extension base="xs:string">
        <xs:attribute name="code" type="xs:string" />
        </xs:extension>
        </xs:simpleContent> 
        </xs:complexType>
        </xs:element>
    </xs:sequence>
</xs:complexType>
</xs:element>
<xs:element name="research" type="xs:string"/> 
```

# android - android编辑文本在按任意键时隐藏在键盘下方

> ID：13670157
> 
> 赞同：1
> 
> 时间：2012-12-02T14:22:45.957
> 
> 标签：android, android-layout, android-edittext, android-keypad

我在活动底部编辑文本。当我在编辑文本中输入值时。键盘从底部出现，编辑文本隐藏在键盘下方。请帮我整理一下。我在清单文件中使用了这个：`android:windowSoftInputMode="stateVisible|adjustResize|adjustPan"`

并将这行代码放在`oncreate()`函数中：

```
this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

但是，仍然存在问题:(请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:01:14.630

我想如果你只尝试 android:windowSoftInputMode="adjustPan|adjustResize".can 你检查你的问题是否得到解决，如果你厌倦了做所有的事情总是喜欢使用 ScrollView 作为你布局的父级专门用于添加您的视图，例如按钮、文本视图等。

我更喜欢这是最好的方法。当您第一次尝试这样做时，您会遇到一些困难，但是当您习惯它时，您将获得问题的解决方案。尝试一下

# java - 计算 ArrayList 中在一定范围内的数字

> ID：13670160
> 
> 赞同：2
> 
> 时间：2012-12-02T14:23:03.390
> 
> 标签：java, arrays, list, netbeans, count

我正在添加用户输入的几个数字并将它们添加到数组列表中。

到目前为止我的代码：

```
package project143;

import java.util.*;

/**
 * @author --
 */
public class Histogram {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {

        Scanner input = new Scanner(System.in);

        // Input for grades
        int mark = 0;
        List<Integer> list = new ArrayList<Integer>();
        while (mark >= 0 && mark <= 100) {
            System.out.println("Enter students mark:");
            mark = input.nextInt();

            if (mark >= 0 && mark <= 100) {
                list.add(mark);
            }

        }
        System.out.println(list);
    }
} 
```

现在，我需要计算有多少数字`list`在以下范围内（0-29、30-39、40-69、70-100）

一旦我知道每个范围内有多少个数字，我需要在每个范围*旁边显示“”，例如在 0 - 29 范围内有 10 个数字，因此我需要显示 10 个星（******* *****）。**

 **我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T16:26:15.890

如果您使用[Eclipse Collections](https://github.com/eclipse/eclipse-collections)，您可以编写以下代码。首先，我们设置您指定的范围：

```
private ImmutableList<Interval> ranges = Lists.immutable.with(
    Interval.fromTo(0, 29),
    Interval.fromTo(30, 39),
    Interval.fromTo(40, 69),
    Interval.fromTo(70, 100)); 
```

然后我们可以在示例中使用这些范围，使用匿名内部类。

```
final MutableBag<Interval> countByRange = Bags.mutable.empty();
Interval inputs = Interval.from(5).to(100).by(5);
inputs.forEach(new IntProcedure()
{
    public void value(final int grade)
    {
        countByRange.add(ranges.detect(new Predicate<Interval>()
        {
            public boolean accept(Interval range)
            {
                return range.contains(grade);
            }
        }));
    }
});
countByRange.forEachWithOccurrences(new ObjectIntProcedure<Interval>()
{
    public void value(Interval range, int occurrences)
    {
        System.out.println(range + " : " + StringIterate.repeat('*', occurrences));
    }
}); 
```

您需要将 Interval 输入替换为您的实际输入（在您的示例中为 Scanner）。我只想要一组简单的输入来测试。

代码的输出如下：

```
Interval from: 70 to: 100 step: 1 size: 31 : *******
Interval from: 40 to: 69 step: 1 size: 30 : ******
Interval from: 30 to: 39 step: 1 size: 10 : **
Interval from: 0 to: 29 step: 1 size: 30 : ***** 
```

使用 Java 8 Lambda 语法，您可以编写以下内容：

```
MutableBag<Interval> countByRange = Bags.mutable.empty();
Interval inputs = Interval.from(5).to(100).by(5);
inputs.forEach((int grade) -> {
    countByRange.add(ranges.detect(range -> range.contains(grade)));
});
countByRange.forEachWithOccurrences((range, occurrences) ->
    {System.out.println(range + " : " + StringIterate.repeat('*', occurrences));}); 
```

如果您想尝试使用 collect 而不是使用 forEach 添加到包中，以下代码会产生相同的结果。

```
Interval.from(5).to(100).by(5)
    .collect(grade -> ranges.detect(range -> range.contains(grade)))
    .toBag()
    .forEachWithOccurrences((range, occurrences) ->
        {System.out.println(range + " : " + StringIterate.repeat('*', occurrences));}); 
```

**注意：**我是 Eclipse 集合的提交者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T14:30:33.577

使用 3 个变量进行计数。在添加标记以列出时，根据条件增加变量。最后使用该计数变量打印开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T14:29:39.450

您可以通过将此代码放入您从中获取输入的循环中来在没有列表的情况下执行此操作...

```
 if (mark <= 29) ++bombout;
 else if (mark <= 39) ++fail;
 else if (mark <= 69) ++pass;
 else ++excellent; 
```

...或者如果您想使用列表，请对其进行迭代并将上面的代码放入循环中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T14:40:06.207

**-**使用 4 个`int`变量存储 4 个**范围**。

**例如：**

```
int range29;
int range39;
int range69;
int range100; 
```

**-** `Loop`通过`List`来**统计不同范围内的条目数。**

**例如：**

```
for(int i : list){

    if ( i>=0 & i<=29){   // better use Non-short circuit AND

          ++range29;
    }

  else if ( i>=30 & i<=39){   // better use Non-short circuit AND

          ++range39;
    }

  else if ( i>=40 & i<=69){   // better use Non-short circuit AND

          ++range69;
    }

  else if ( i>=70 & i<=100){   // better use Non-short circuit AND

          ++range100;
    }

} 
```

**-**现在只需使用 a**根据范围变量**`for-loop`打印星数。**

# php - 使用 .htaccess 重写 URL。怎么办？

> ID：13670162
> 
> 赞同：0
> 
> 时间：2012-12-02T14:23:19.250
> 
> 标签：php, .htaccess, url, redirect, rewrite

抱歉标题不好。我现在正在使用

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

它在使用时工作正常`localhost/home` 但我的问题是在键入时`localhost/home.php`它也可以工作。我想在键入时重定向`localhost/home.php`到请求页面不存在的错误页面。

我怎么能用 .htaccess 来做呢，还是应该使用 php 来重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:34:07.360

当您请求带有“.php”扩展名的 URL 时，您的 .htaccess 条件都不满足，因此服务器 (Apache) 只是正常处理请求。这就是它起作用的原因。

*我认为最简单的方法是在前一条规则之前*添加另一条规则：

```
RewriteCond %{REQUEST_URI} \.php$ # if it ends in .php
# note we're using REQUEST_URI above to only match when
# the URI ends in .php, not the requested file,
# otherwise we would have a endless loop!
RewriteRule ^(.*)$ /error_page.php # note the leading slash 
```

如果您希望浏览器重定向（我认为您需要添加完整路径），请添加选项，例如`[R]`：`RedirectRule`

```
RewriteRule ^(.*)$ /path/error_page.php [R] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T14:42:32.763

您正在做的是将“.php”附加到 REQUEST_FILENAME 如果它不是目录，并且如果将“.php”添加到它会导致现有页面。当您键入时`localhost/home.php`，重写不会触发，因为它不会找到`localhost/home.php.php`. 所以对于第二种情况，重写是完全无关的。您可能需要检查是否正确设置了对 404 情况的正常处理。例如，您是否配置了[ErrorDocument](http://httpd.apache.org/docs/2.2/mod/core.html#errordocument)指令？然后您可能会考虑删除`-f`条件并让它重定向到`home.php.php`当然会失败的条件。

# list - MonoTouch - 如何有效地创建具有所有 CGColor 类型的列表

> ID：13670163
> 
> 赞同：1
> 
> 时间：2012-12-02T14:23:22.953
> 
> 标签：list, loops, xamarin.ios, add, cgcolor

我正在寻找一种创建`CGColors`using列表的有效方法`MonoTouch`。

这是我迄今为止在一种方法中所拥有的：

```
List<CGColor> colourList = new List<CGColor>();
colourList.Add(UIColor.Blue.CGColor);
colourList.Add(UIColor.Brown.CGColor);
colourList.Add(UIColor.Cyan.CGColor); 
```

我现在很容易从列表中随机选择其中一种颜色，但我正在寻找一种有效的方法来将所有不同的选项添加`CGColor`到此列表中，而无需`colourList.Add()`每次都使用。

如何在循环中运行每个可能的选项（蓝色、橙色、绿色、紫色等...）以将它们添加到我的列表中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T16:09:19.843

这取决于您所说的*效率*。如果您希望这**更快**，请继续使用`Add`并构建您自己的列表。

您可以使用 C# 3 功能删除一些源代码，例如

```
List<CGColor> colourList = new List<CGColor> () {
    UIColor.Blue.CGColor,
    UIColor.Brown.CGColor,
    UIColor.Cyan.CGColor, ...
}; 
```

这看起来更好（恕我直言），并且执行起来也一样快，因为一旦编译为 IL，它将是相同的。

您还可以使用查找（返回 a ）`System.Reflection`的所有静态属性并将它们添加到列表中。这样做的好处是，在未来版本的 iOS 中添加的任何新颜色都将在不更改源代码的情况下添加。但是执行（创建列表）会慢一些。此外，托管链接器在启用时可能会删除一些颜色（因为它们不会被应用程序视为需要）。`UIColor``CGColor`

最后，如果您想要随机颜色，那么您可以只保留 RGBA 值并`CGColor`根据它们重新创建一个。Take 将占用较少的内存，并允许您使用预定义的 RGBA 值数组。

# flex-lexer - 如何在flex中找到除少数几个之外的所有单词？

> ID：13670165
> 
> 赞同：1
> 
> 时间：2012-12-02T14:23:48.990
> 
> 标签：flex-lexer

我需要在 flex 中找到除少数几个单词（例如“汽车”、“公共汽车”、“火车”）之外的所有单词。你有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-23T10:35:20.400

这个问题已经有一段时间没有解决了，这是 lex/flex 的新用户在开始时遇到的标准问题。SO的其他地方也没有明确的答案。

问题是问你如何匹配所有不是保留字的标识符。这是几乎每个编译器中都会出现的标准计算机语言功能。它只是没有以明确的方式表达。在编译器构造中，使用 flex，我们必须找到除少数（例如“if”、“then”、“else”）之外的所有单词（也称为标识符）。这是通过将词汇模式放入规范中的顺序来实现的。这很常见，以至于[Flex 的 Wikipedia 页面](http://en.wikipedia.org/wiki/Flex_lexical_analyser)中的主要示例显示了这一点！

我们会这样做：

```
car    return(CAR);
bus    return(BUS);
train    return(TRAIN);
[a-z]+   return(WORD); 
```

但是，如果我们以不同的顺序执行此操作，则会出现错误：

```
[a-z]+   return(WORD);
car    return(CAR);
bus    return(BUS);
train    return(TRAIN); 
```

它会反对“汽车”、“公共汽车”和“火车”的匹配，因为它们已经包含在 WORD 中。

这种情况也出现在其他语言中。以符号“=”、“>=”、“>”、“==”、“++”、“+”、“+=”等符号为例。我们还必须注意定义它们的词位的顺序在 flex 中以确保没有错误。

# rectangles - 如何找到相交矩形的相交矩形（点）

> ID：13670167
> 
> 赞同：0
> 
> 时间：2012-12-02T14:24:18.920
> 
> 标签：rectangles

如果我有两个由两个顶点描述的相交矩形`[(x1,y1)(x2,y2)][(x3,y3)(x4,y4)]`。如何找到一个受其内切影响的矩形（**在这些矩形相交处获得 2 个点**）。

编程语言无关紧要。可能是伪代码。

PS：矩形与 OXY 平行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:29:45.157

您可以使用[Rectangle.intersection](http://docs.oracle.com/javase/7/docs/api/java/awt/Rectangle.html#intersection%28java.awt.Rectangle%29)：

```
Rectangle intersection = rectangle1.intersection(rectangle2); 
```

生成的矩形的 2 个顶点将是交点。您可以使用`Rectangle.contains`来确定共同点。

请参阅：[矩形交点源](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/awt/Rectangle.java#Rectangle.intersection%28java.awt.Rectangle%29)

# .htaccess - LAMP 上的 .htaccess

> ID：13670172
> 
> 赞同：0
> 
> 时间：2012-12-02T14:24:39.593
> 
> 标签：.htaccess, codeigniter, lamp

我已经在我的 Mac 上的 Codeigniter 上构建了一个测试项目（使用 MAMP），现在正试图将它迁移到我的 Linux 机器（ubuntu、LAMP）上，以进行一些测试。

显然，它不会读取 .htaccess 文件，因为如果缺少 index.php 位（在 mac 上它工作得很好），则 URL 不起作用（得到 404）。.htaccess 文件的语法在 LAMP 和 MAMP 上是否应该不同？这是我现在使用的语法：

```
RewriteEngine On
RewriteCond $1 !^(index\.php|robots\.txt|favicon\.ico|uploads|media|myResources)
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

我在某处读到您应该在编辑.htaccess 后重新启动服务器。问题是，我不知道如何在 Linux 机器上做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T14:30:33.773

`.htaccess`由于[AllowOverride](http://httpd.apache.org/docs/2.2/mod/core.html#allowoverride)设置，您的规则将被忽略。你可能想设置

```
AllowOverride All 
```

此设置属于`httpd.conf`or`apache.conf`是的，您需要重新启动 apache 服务器才能使此更改生效。稍后您可以在不`.htaccess`重启服务器的情况下进行修改。

示例配置（我的新虚拟主机模板的一部分）：

```
<VirtualHost *:80>
  # ...other configuration
  <Directory />
    AllowOverride All
    Order allow,deny
    Allow from all
  </Directory>
</VirtualHost> 
```

# forms - 远程提交带有隐藏字段的表单

> ID：13670174
> 
> 赞同：1
> 
> 时间：2012-12-02T14:25:28.070
> 
> 标签：forms, jquery, ruby-on-rails-3.2

我有一个基于引导程序的表单，如下所示，带有一个隐藏字段：

```
 <%= form_for @epochdate, {:class => "form-inline", :remote => true} do |f| %>
    <%= render 'shared/error_messages', :object => f.object %>

    <%= f.text_field :currency, :class=> "input-small submittable", :placeholder=>"home fx", :value => @epochdates.currency %>

    <%= f.text_field :start_year, :class=> "input-small submittable", :placeholder=>"home fx", :value => @epochdates.start_year %>

    <%= hidden_field_tag :scenario_id, @scenario.id, :class=> "submittable" %>

    <%= f.submit "Submit", :class => "btn"  %>
  <% end %> 
```

当我尝试上述表单时，单击提交时没有任何反应（但是，jquery ajax 提交正在我的应用程序中的其他表单上工作）

我不确定是否需要将可提交类添加到隐藏字段，以及是否将 :remote => true 调用放置在 {} 内或之外。我确定我忽略了一些简单的东西，但不确定它是什么

# c - 排序数组在 ANSI C 中不起作用

> ID：13670175
> 
> 赞同：2
> 
> 时间：2012-12-02T14:25:43.323
> 
> 标签：c, ansi

我正在用 ANSI C 编写代码，这段代码必须完成一个简单的任务：

*   对数组进行排序
*   在数组中搜索元素
*   如果找到则返回元素位置
*   否则返回-1

我这样定义我的函数：

```
int search_sorted(int *array, int dimensione, int elemento) {
    int i;
    for(i=0;i<dimensione;i++){
        //fill the array with random numbers
        *(array+i)=((int)(rand()%RANDOM_MAX));
    }
    sort(array,dimensione);
    //this should actually sort the array?
    for(i=0;i<dimensione;i++){
        printf(" posizione %d\t -\t %d\n",i+1,array[i]);
        //print the array...
    }    
    for(i=0;i<dimensione;i++){
        if(elemento>array[i]){
            return -1;
        } else if(array[i] == elemento) {
        return ++i;
        }    
    }
    return -1;
}

//sorting function
int sort (int *array,int dim){
int i, temp;
for (i=0;i<(dim-1);i++){
    if(array[i]>array[i+1]){
            temp=array[i+1];
            array[i+1]=array[i];
            array[i]=temp;
    }
} 
```

}

问题是排序根本不适用，我看不出它不适用的原因......我100％确定我传递了正确的元素（没有编译错误也没有任何东西...... )

知道为什么它不起作用，以及如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T14:29:45.213

您正在尝试实现冒泡排序算法。您的实现不正确。您的循环只是将最大的元素放在最后一个位置。

您需要使用另一个应该嵌套此循环的循环。

```
for(j=0;j<dim-1;j++)
for (i=0;i<(dim-1-j);i++){
    if(array[i]>array[i+1]){
            temp=array[i+1];
            array[i+1]=array[i];
            array[i]=temp;
    } 
```

# virtual-machine - VirtualBox 错误：未安装内核驱动程序（rc=-1908）

> ID：13670176
> 
> 赞同：49
> 
> 时间：2012-12-02T14:25:46.253
> 
> 标签：virtual-machine, virtualbox, virtualization

我尝试在 Ubuntu 12.10 上设置虚拟机。我安装了 Oracle Vm VirtualBox Manager。然后，我按照步骤操作，从设置>存储中选择 .iso 文件。然后单击 live cd/dvd 选项。然后确定，当我单击开始按钮时，出现这样的错误：

```
 Kernel driver not installed (rc=-1908)

 The VirtualBox Linux kernel driver (vboxdrv) is either not loaded or there is a                   
 permissionproblem with /dev/vboxdrv. Please reinstall the kernel module by 
 executing

 '/etc/init.d/vboxdrv setup'

 as root. If it is available in your distribution, you should install the DKMS package                               
 first. This package keeps track of Linux kernel changes and recompiles the vboxdrv  
 kernel module if necessary. 
```

我重新安装了程序并重新启动了电脑，但没有工作。另外，更新了内核驱动程序但没有工作。可以做些什么来解决它？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-11-12T22:31:09.420

以为我会给那些使用 MAC 的人 2 美分

```
sudo /Library/Application\ Support/VirtualBox/LaunchDaemons/VirtualBoxStartup.sh restart 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-25T13:09:51.717

```
sudo apt-get remove virtualbox-dkms
sudo apt-get install virtualbox-dkms 
```

来源：[http ://ubuntuforums.org/showthread.php?t=1885936&page=6](http://ubuntuforums.org/showthread.php?t=1885936&page=6)

附言。每次我在 Ubuntu 中获得 Linux 内核更新时都会遇到这个问题。它给出的指令对我不起作用，但这两个命令每次都有效。如果每次我得到内核更新这两个命令之后会自动运行，那就太好了......

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-06-25T16:07:57.933

我有一个适用于 MacOS 用户的解决方案：

1.  您必须重新启动系统并在加载过程中按 Command (⌘) + R。它将启动恢复模式。

2.  现在您处于恢复模式，单击实用程序（顶部栏）和终端。

3.  你的终端打开了吗？回车，它会在授权列表中添加Oracle来访问内核。

    spctl kext-consent 添加 VB5E2TV963

4.  重新启动。

别客气。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2021-02-18T12:04:01.667

（我在使用此解决方案的 Mac 上）我在此板上尝试了前几个答案（因此您可能首先需要这些答案），但最后我**允许**Oracle 在系统偏好设置 -> 安全性下“加载软件” &隐私 -> 在右下角，单击“允许...”，然后可能会出现一个带有复选框选项的对话框，搜索 Oracle 并选中它旁边的框。从所有内容中单击“确定”。（我还将“允许...”按钮上方的首选项更新为允许从以下位置下载的应用程序：到“应用商店*和已识别的开发人员*”）在所有这些之后，我重新启动并且在运行 VM 时不再看到这个 -1908 错误。同样，我在 Mac 上运行 Big Sur 11.2.1。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-03-31T11:42:24.953

转到 BIOS 设置并禁用安全启动它对我有用。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-02-20T20:05:31.033

最近在 Ubuntu 18.04 上遇到了同样的问题。显然，virtual box 6.+ 与 gcc-7 有一些问题。这些步骤为我完成了工作：

删除虚拟机

`sudo apt-get purge virtualbox-*`

安装 gcc-8

`sudo apt-get install gcc-8 g++-8`

将默认 gcc 设置为 gcc-8

`sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-8 800 --slave /usr/bin/g++ g++ /usr/bin/g++-8`

并使用 debian 安装程序重新安装 virtualbox 为我完成了！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-02T14:36:54.143

你试过命令`/etc/init.d/vboxdrv setup` 输出什么？

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-08-19T19:49:44.290

就个人而言，在我的 Mac 上安装最新版本的 VirtualBox 解决了这个问题

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-01-24T09:52:09.800

对于 Linux，请按照以下步骤操作：

1.  `cd /etc/yum.repos.d/`
2.  `vim epel.repo`
3.  让每一个`"enabled=1"`
4.  `yum install dkms`

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-12-22T18:22:11.537

下面的代码似乎修复了错误。当您更新您的发行版时，它可能会再次出现，因此请确保重新运行它。

`sudo modprobe vboxdrv`

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-12-08T11:13:22.543

@idkn 回答的处于恢复模式的这个对我有用。

```
spctl kext-consent add VB5E2TV963 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-10-05T14:03:07.050

最新的[macOS Testbuild](https://www.virtualbox.org/download/testcase/VirtualBox-6.1.15-140753-OSX.dmg)（修订版 >= r140753）初步支持包括 MacOS Big Sur。

对于所有构建，请检查：[https ://www.virtualbox.org/wiki/Testbuilds](https://www.virtualbox.org/wiki/Testbuilds)

有关详细信息，请参阅[https://www.virtualbox.org/ticket/19795](https://www.virtualbox.org/ticket/19795)。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-07-07T03:24:44.773

到目前为止，我的系统中只有 linux-lts 内核。我只是使用 pacman 安装 linux-lts-headers，然后我重新启动了 pc。它对我有用。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-09-15T05:15:52.633

首先，您必须安装 dkms 软件包（但可选）

```
sudo apt-get install dkms 
```

然后运行这个

```
sudo /etc/init.d/vboxdrv setup 
```

但就我而言，我只需要运行第二个。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-02-09T15:18:56.180

我有同样的问题，我用这个来解决它：

```
rm -r /etc/init.d/vboxdrv
rm -r /var/lib/update-rc.d/vboxdrv 
apt-get install virtualbox virtualbox-dkms virtualbox-guest-utils virtualbox-guest-additions virtualbox-qt 
```

通过：[https ://superuser.com/questions/652850/error-while-installing-virtualbox](https://superuser.com/questions/652850/error-while-installing-virtualbox)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-04-17T17:36:09.183

您是否尝试过以下命令：

```
sudo kextload /Library/Extensions/VBoxDrv.kext/ 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2015-03-24T16:20:06.027

我遇到了同样的问题，我通过运行以下命令修复了它： `sudo /etc/init.d/vboxdrv setup`

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2018-09-13T09:12:22.763

首先打开一个终端并编写以下命令：

*   `sudo apt-get remove virtualbox-dkms`

完成此操作后，编写以下命令：

*   `sudo apt-get install virtualbox-dkms`

这解决了问题。不用担心，您的文件不会丢失。

# c - 常量表达式和条件表达式之间有什么关系？

> ID：13670177
> 
> 赞同：2
> 
> 时间：2012-12-02T14:25:47.940
> 
> 标签：c, constant-expression

我想对C的常量表达式有一个准确的理解。所以，我阅读了C99的相关规定。“6.6 常量表达式”一章的第一条描述了常量表达式的语法，但我看不懂。

C99的“6.6常量表达式”一章第一条规定：

> *常量表达式*：
> *条件表达式*

为什么 C99 使用*条件表达式*来解释*常量表达式*？毫无疑问，表达式 2 + 3 是一个常量表达式。是条件表达式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T15:55:25.080

要理解 §6.6 常量表达式，您需要了解语法的工作方式，并且需要阅读 §6.5 表达式。

在 §6.5 表达式中，第 6.5.15 节条件表达式说：

> *`conditional-expression:`*
> *        `logical-OR-expression`*
> *        `logical-OR-expression ? expression : conditional-expression`*

这是标准指定优先级等的方式。这个想法是将赋值运算符和逗号表达式排除在“常量表达式”之外，但允许其余大部分内容，受第 6.6 节中定义的约束（其中，除其他外, 明确排除赋值和逗号运算符，可能是因为规则中的通用*表达式*确实包含它们）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T16:24:13.837

符号“常量表达式：条件表达式”只是常量表达式语法的规范。语法描述了**可能**是常量表达式的字符串。除了满足语法之外，常量表达式**还必须**满足 6.6 节中列出的约束。

C 标准使用“常量表达式：条件表达式”这一事实可能令人困惑。但是，如果标准使用“constant-expression: expression”，那将是完全相同的，如下所示。也就是说，**任何**表达式都是常量表达式，只要它不仅遵循表达式的语法，而且遵循第 6.6 节中列出的约束条件。

条件表达式的一个示例是`3 < 4 ? 5 : 6`。这个表达式也是一个常量表达式，因为它满足第 6.6 节中的约束。另一方面，`x < 4 ? 5 : 6`它也是一个条件表达式，但不是一个常量表达式（假设`x`是一个对象的名称，而不是一个被常量替换的宏，等等）。

第 6.6 节告诉您，如果条件表达式满足约束条件，则它可能是常量表达式。第 6.5.15 条显示条件表达式可以是 a`logical-OR-expression`或 a `logical-OR-expression ? expression : conditional-expression`。继续通过链工作，a`logical-OR-expression`可能是 a`logical-AND-expression`或可能是使用逻辑 OR 运算符构建的表达式，`||`。尽管每个级别的名称都类似于`foo-expression`，但每个级别实际上要么是之前出现的表达式类型，要么是用 构建的表达式`foo`。`foo-expression-or-prior-type-of-expression`将它们命名而不是仅命名会很麻烦`foo-expression`。

因此，语法从主要元素开始，它们是标识符、常量、字符串字面量，以及我稍后将讨论的一个特殊事物，并且语法将这些主要元素构建成更复杂的表达式，增加了使用 C 允许的每个运算符的可能性. 以这种方式对语法进行分层定义了运算符的优先级，因为在可能的情况下，必须在后面的表达式之前解析较早的表达式。

主要的特别之处是一个带括号的表达式，`( expression )`. `expression`令牌是定义链的末端，在 6.5.17 中定义。这将语法循环回去；任何表达式都可以放在括号中，这使它成为一个新`primary`的，然后可以对其应用运算符。

第 6.6 条可以声明 a`constant-expression`是 a `expression`，它与说它是 a 具有相同的效果`conditional-expression`。这是因为 6.6 中的约束禁止赋值运算符和逗号运算符。因此，如果我们考虑 an`expression`可能是什么，第 6.5.17 条说它可以是 an`assignment-expression`或`expression , assignment-expression`。但是禁止逗号运算符的约束禁止后者。因此，`expression`常量表达式中的 a 必须是 a `assignment-expression`。同样， an`assignment-expression`必须是 a`conditional-expression`而不是`unary-expression assignment-operator assignment-expression`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T16:07:09.247

首先，C 标准没有解释任何东西。它说明了 C 语言是如何定义的，但没有说明原因。

语法部分是用一种特殊语言（[EBNF](http://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_Form)的一种变体）编写的，用于描述编译器应如何解释 C 源代码。规范

```
 constant-expression:
     conditional-expression 
```

本质上意味着常量表达式使用与 a 相同的语法`conditional-expression`。在关于条件运算符 (6.5.15) 的部分中，您会发现一个类似的语法部分定义了 a`conditional-expression`是如何构建的。

如果跟踪所有语法规则，您会发现 a`constant-expression`可以使用除赋值运算符 ( `=, *=, /=, +=, -=, <<=, >>= &=, ^=, |=`) 和逗号运算符( ) 之外的任何运算符`,`（除非它们被括在括号中）。

# c - 了解指针和数组

> ID：13670179
> 
> 赞同：2
> 
> 时间：2012-12-02T14:25:56.503
> 
> 标签：c, arrays, pointers

有人可以解释一下数组是如何被它的名字引用的，通过在它的名字前面加上指针和双指针，就像下面的代码一样：

```
#include<stdio.h>

main()
{  
    int a[3][2];
    a[0][0]=15;
    a[0][1]=150;
    a[1][0]=115;
    a[1][1]=165;
    a[2][0]=135;
    a[2][1]=139;
    printf( "%u\n", a);
    printf( "%u\n", *a);
    printf( "%u\n", **a);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T14:32:44.470

第一个

```
printf("%u\n",a); 
```

打印 的地址`a`，与第一个元素的地址相同。

第二个

```
printf("%u\n",*a); 
```

取消引用`a`并给出第一个“行”的地址`a`

第三个

```
printf("%u\n",**a); 
```

取消引用指向第一个“行”的指针，`a`并给出此二维数组中第一个元素的值。

当您在打开警告的情况下编译示例时，编译器已经开始抱怨，因此会告诉您您使用的一些类型。当您将指针作为参数提供给 时[`printf`](http://www.cplusplus.com/reference/cstdio/printf/)，您应该使用格式说明符`%p`

```
printf("%p\n",a);
printf("%p\n",*a); 
```

格式说明符`%u`是 for `unsigned int`，如果有`int`，最好使用说明符`%d`

```
printf("%d\n",**a); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T14:38:24.913

两者都是指针`a`，`*a`因此将其打印在格式化输出中，就像`printf()`用作`%p`格式说明符一样。

否则，您的编译器会收到警告消息

`warning: format ‘%x’ expects type ‘unsigned int’, but argument 2 has type ‘int (*)[2]’ warning: format ‘%x’ expects type ‘unsigned int’, but argument 2 has type ‘int *’`

所以试试这个：

```
printf("%p\n",a);
printf("%p\n",*a); 
```

对于第三种情况`**a`是类型`int`，所以最好使用`%d`或`%i`

```
printf("%d\n",**a); 
```

根据C标准，

```
ISO c99 standard : 7.19.6 Formatted input/output functions

9   If a conversion specification is invalid, the behavior is undefined.

    If any argument is not the correct type for the corresponding conversion 

    specification, the behavior is undefined. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T16:16:28.873

除非它是、 或一元运算符的操作数`sizeof`，或者是用于在声明中初始化另一个数组的字符串文字，否则“N-element array of”类型的*表达式*将被转换（“decay”）为类型为“pointer to ”的表达式，表达式的值将是数组第一个元素的地址。`_Alignof``&`*`T``T`*

 *在第一次`printf`调用中，表达式`a`的类型为“2 元素数组的 3 元素数组`int`”；`int`根据上面的规则，表达式将被转换为类型“指针”（ ）的二元数组，`int (*)[2]`其值与 相同`&a[0]`。

在第二次`printf`调用中，表达式`*a`的类型为“2 元素数组`int`”；根据上面的规则，表达式被转换为类型“指针`int`”（`int *`），它的值将与`&a[0][0]`（这与`&a[0]`- 数组的第一个元素的地址相同）的地址相同数组本身）。

在第三次`printf`调用中，表达式`**a`的类型为`int`，其值是存储在`a[0][0]`（本例中为 15）处的任何值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T14:41:55.733

就像 a 是地址而不是 *a 是 a 的值

![在此处输入图像描述](../Images/83d9c929e421f75a3bd6f603c7a3c4da.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T21:06:20.393

对类型的检查是有益的。

`a`具有 type `int [3][2]`，即 2 个整数的 3 个数组的数组。但是，不能在 C 中分配或传递数组类型。传递`a`给时发生的情况`printf`是，它*降级*为指向其第一个参数的指针，即`&a[0]`具有 type`int (*)[2]`的指针，即指向 2 个整数数组的指针。那就是你看到的地址。

（当然，数组的第一个参数的地址也与数组本身的地址相同，所以如果你这样做`printf("%u", &a);`，你会看到相同的地址值（但类型会不同——`&a`会有 type `int (*)[3][2]`） .)

接下来，`*a`。只能解引用一个指针，所以`a`先降级为指针（`&a[0]`），然后解引用（`*&a[0]`）。结果是`a[0]`的第一个元素`a`。`a[0]`具有类型`int [2]`，即 2 个整数的数组。同样如上所述，不能传递数组，因此当您将其传递给 时`printf`，它会降级为指向其第一个参数的指针，即`&a[0][0]`具有类型`int *`的指针，指向 int。那就是您第二个看到的地址。同样，它将是与上面相同的地址，因为 的`a[0]`地址与其第一个元素的地址相同`a[0][0]`（但类型不同）。

最后，你有`**a`. 如上所述，`*a`is `a`，降级，然后取消引用。记住上面`*a`有 type `int [2]`，一个数组类型。与 一样`a`，当您取消引用它时，它会在取消引用之前将其隐式降级为指针。降级、取消引用、降级和再次取消引用也是`**a`如此。`a`对正在发生的事情的更明确的描述是`*&(*&a[0])[0]`。最终结果是`a[0][0]`，它有 type `int`。*

# javascript - 最好的检查方法是鼠标移到窗口外？

> ID：13670180
> 
> 赞同：0
> 
> 时间：2012-12-02T14:26:07.147
> 
> 标签：javascript, jquery

所以如果我想限制鼠标在窗口中采取行动，我必须检查 4 面

```
$(document).on('mousemove',function(e){
  if (e.pageX > 10 && e.pageX<$(window).width-10 && e.pageY< $(window).height()-10&& e.pageY >10){
//are there any better way?
}

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:32:11.940

最好的方法可能是挂钩`mouseout`事件。试试看`document.body`或类似的。

# uitableview - 如何删除 UILabel 右侧的灰色边框？

> ID：13670181
> 
> 赞同：17
> 
> 时间：2012-12-02T14:26:19.897
> 
> 标签：uitableview, ios6, uilabel, border

我已将 UILabel 添加到自定义单元格的 contentView 中。我遇到了一个奇怪的副作用。在右边界有一个灰色边缘。我不知道为什么。我只是添加了一个普通的UILabel，我没有做其他任何事情。

```
UILabel *label = [[UILabel alloc] initWithFrame:CGRectZero];
label.text = @"value1";
label.textAlignment = UITextAlignmentCenter;
[self.contentView addSubview:label];

- (void)layoutSubviews
{
    UILabel *label = [self.contentView.subviews objectAtIndex:i];
    label.frame = CGRectMake(…);
} 
```

![在此处输入图像描述](../Images/14b37089407c4c65e5dd8a28555252ae.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-08-21T10:34:29.887

我知道这是一个老问题，但我刚刚遇到了同样的问题，所以我想我可以帮助其他人寻找。

对我来说，问题是我的帧中有浮动数字。以下为我修复了它：

```
CGRectIntegral( myLabel.frame ) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-02T14:31:29.073

不知道是什么原因，解决办法就是去掉那个灰色的边缘，把单元格的背景色设置为clearColor。

> label.backgroundColor = [UIColor clearColor];

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-10T15:05:54.570

首先，您需要设置：

```
[label setBackgroundColor:[UIColor clearColor]]; 
```

接下来，设置您想要的颜色：

```
[label layer] setBackgroundColor:[UIColor redColor].CGColor]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-10T15:57:09.047

这仍然在 iOS 12 上发生。

***Ad Taylor的***Swift**版本回答：**

 **`myLabel.frame.integral`**

# objective-c - 初始化NSObject时预留多少内存？

> ID：13670185
> 
> 赞同：4
> 
> 时间：2012-12-02T14:26:48.447
> 
> 标签：objective-c

当我在目标 c 中使用此语句时

```
NSObject object = [[NSObject alloc] init]; 
```

为对象保留多少内存？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T14:36:51.830

您可以使用以下代码测试对象的大小：

```
#import <malloc/malloc.h>
//...
NSObject *obj = [[NSObject alloc] init];
NSLog(@"Size: %zd bytes", malloc_size((__bridge const void *)(obj))); 
```

该测试产生：“大小：16 字节”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T14:37:12.130

根据 Instruments，16 个字节。（虽然，那是`NSObject *object = ...`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T18:07:27.097

这取决于几个因素，包括您使用的是 iOS 还是 OS X、您构建的操作系统版本以及您是在编译 32 位还是 64 位。它是 8 字节或 16 字节。基本上它是 16 个字节，在最近的环境中 - 有一个指向类数据结构的指针、一个引用计数和 4 个字节的杂项、特定于类的数据。

请注意，您从 malloc_size() 得到的答案将始终为 16，因为它返回分配块的大小，这可能大于 malloc 请求的实际大小。在 OS X 和 iOS 中，分配大小始终至少为 16 字节。

# php - PHP 和 SimpleXMLElement：在字符串中查找 xpath 的位置

> ID：13670186
> 
> 赞同：0
> 
> 时间：2012-12-02T14:26:51.690
> 
> 标签：php, xml, xpath, simplexml

我`SimpleXMLElement`用来评估 XPath 查询。

```
<!-- $document -->
<?xml version="1.0"?>
<hey>
    <name>Donovan</name>
</hey> 
```

使用 XPath `$xpath = "/hey/name"`，例如：

```
$xml = new SimpleXMLElement($document);
$result = $xml->xpath($xpath); 
```

有没有办法在字符串`30`中获取 XMLElement的位置（在这种情况下） ？`name``$document`

# ruby-on-rails - 给定 URL 的内容，覆盖 Rails 路由/路径？

> ID：13670189
> 
> 赞同：1
> 
> 时间：2012-12-02T14:27:44.147
> 
> 标签：ruby-on-rails

我正在将我的 rails 应用程序移植到 3.1.0（从 2.3.8 开始），并且正在重构。现在我有单独的模型/视图/控制器，用于以下两页。

[http://www.youhuntandfish.com/fishing/fishingstories /148-late-fall- **brook** -trout](http://www.youhuntandfish.com/fishing/fishingstories/148-late-fall-brook-trout) [http://www.youhuntandfish.com/hunting/huntingstories **/** 104-early-nine-pointer](http://www.youhuntandfish.com/hunting/huntingstories/104-early-nine-pointer)

“ **huntingstories** ”和“ **fishingstories** ”其实是一回事，所以我想分享模型/视图/控制器。

这是问题所在。在视图中，我使用了像“huntingstories_path”和“fishingstories_path”这样的助手。我不想在整个视图中添加一堆条件来选择使用哪个。我想做的就是写。

“故事路径”

并有一些代码将其映射到给定 URL 的“/hunting/”或“/fishing/”部分的狩猎或钓鱼。

在路由文件中是否有一种简单的方法可以做到这一点，还是我需要编写视图助手？如果我能有“/fishing/stories”和“hunting/stories”的新路线，并将旧路线重定向到这些路线，那就更好了。

这是现在的路线。

```
scope 'fishing' do
    resources   :fishingstories
    resources   :fishingspots
end
scope 'hunting' do
    resources   :huntingstories
    resources   :huntingspots
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:39:10.367

冒着听起来像是自我推销的风险，我写了[一篇博](http://joshsymonds.com/blog/2012/05/22/dynamic-routing-with-rails/)文，详细说明了如何实现这一目标。

如果我在你的位置，我会改变`fishingstories`，`huntingstories`也`stories`一样。所以你会有这样的路线：

[http://www.youhuntandfish.com/fishing/stories/148-late-fall-brook-trout](http://www.youhuntandfish.com/fishing/stories/148-late-fall-brook-trout) http://www.youhuntandfish.com/hunting/stories/104-early-nine-pointer

或者只是完全删除故事，因为它似乎是多余的。无论哪种方式，代码看起来都非常相似。在你的`routes.rb`：

```
[:hunting, :fishing].each do |kind|
  resources kind.to_s.pluralize.downcase.to_sym, controller: :stories, type: kind
end 
```

在你的`stories_controller.rb`：

```
before_filter :find_story

private

def find_story
  @story = params[:type].to_s.capitalize.constantize.find(params[:id]) if params[:id]
end 
```

最后，在你的`application_controller.rb`：

```
helper_method :story_path, :story_url

[:url, :path].each do |part|
   define_method("story_#{part}".to_sym) do |story, options = {}|
     self.send("#{story.class.to_s.downcase}_#{part}", story, options)
   end
 end 
```

然后，当您键入诸如`story_path(@huntingstory)`Rails 之类的内容时，它会自动将其转换为`huntingstory_path(@huntingstory)`，@fishingstory 也是如此......因此您可以将那个神奇的故事 URL 助手用于任何类型的故事。

# linux-device-driver - 共享库——.so

> ID：13670190
> 
> 赞同：1
> 
> 时间：2012-12-02T14:27:56.220
> 
> 标签：linux-device-driver, embedded-linux

在 Windows GUI 编程中，我们使用 dll 来加载 dll 的符号。

现在我正在尝试使用 .So linux 共享库。我们可以轻松访问此链接中提到的共享库函数。 [http://www.cprogramming.com/tutorial/shared-libraries-linux-gcc.html](http://www.cprogramming.com/tutorial/shared-libraries-linux-gcc.html)

假设我想使用写在共享库中的例程来读写 USART 进行串行通信。

1.  如果驱动程序与内核固定链接，我的共享库访问——USART 驱动程序系统调用接口将如何？

2.  如果驱动程序是使用 Modprobe 或 insmode 加载的，那么 --- 共享库如何访问 USART 驱动程序？在这种情况下，驱动程序是否必须导出符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:37:59.693

您的共享库将由*用户空间*应用程序使用，而驱动程序位于内核中。您不会将用户空间应用程序直接与内核符号链接，而是通过*系统调用*请求内核服务，这些调用针对给定的内核构建定义明确并编号。[在这里](http://people.ee.ethz.ch/~arkeller/linux/kernel_user_space_howto.html)查看概览。

# java - 获取队列管理器的所有队列名称

> ID：13670191
> 
> 赞同：4
> 
> 时间：2012-12-02T14:28:00.013
> 
> 标签：java, api, websphere, ibm-mq

我正在为 WMQ 使用 Java API。

我已经看到 RFHUTIL 能够将所有队列名称加载到队列管理器的下拉列表中。

同样，我想在列表中获取队列管理器的所有队列名称。

这是由 RFHUTIL 完成的，所以绝对有可能。我检查了 MQQueueManager 类可用的功能，但可以找到任何解决方案。

需要一些建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T14:54:32.807

在队列管理器中列出队列名称是一项管理工作。您必须使用可编程命令格式 (PCF) 类来做到这一点。有许多 PCF 命令可以创建、删除、列出队列、通道等。此[链接](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/zr00120_.htm)详细描述了 PCF。

对于列出队列，您可以使用 MQCMD_INQUIRE_Q 或 MQCMD_INQUIRE_Q_NAMES PCF 命令。MQ 附带了一些示例。有`PCF_DisplayActiveLocalQueues.java`一个对你有用的。

# signalr - 如何在 SignalR 1.0.0Alpha2 中延迟对 OnDisconnected() 的调用

> ID：13670195
> 
> 赞同：1
> 
> 时间：2012-12-02T14:28:13.203
> 
> 标签：signalr, signalr-hub

我目前正在使用 SignalR 1.0.0Alpha2。我已经覆盖了 OnDisconnected 方法（以前我通过实现 Disconnect() 实现了相同的功能）。但我面临的问题是，在刷新页面或断开连接时，会立即调用 OnDisconnected。我的理解是它应该在 20 秒后调用（假设 DisconnectTimeout 默认值为 20 秒。

对于我们应用程序的要求，我们希望在大约 30 秒后调用 OnDisconnected。我已经尝试按照文档并将 DisconnectTimeout 设置为更高的值，但这无济于事。

回到 0.4.x 版本，我能够成功实现 DisconnectTimeout 并且延迟得到了尊重。但自 0.5.3 以来，我们没有看到这种行为。

我不确定我们做错了什么。我们只需要不立即调用 OnDisconncted。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T00:07:37.380

没有办法延迟 OnDisconnected。如果你想延迟运行你的逻辑，你总是可以做 Task.Delay 或 Thread.Sleep （如果你想阻止）。

# ant - 使用ant-contrib，如何使用“endsWith”？

> ID：13670197
> 
> 赞同：4
> 
> 时间：2012-12-02T14:28:24.710
> 
> 标签：ant, ant-contrib

ant-contrib 的最新版本是`ant-contrib-1.0b3.jar`？

[http://ant-contrib.sourceforge.net/tasks/tasks/more_conditions.html](http://ant-contrib.sourceforge.net/tasks/tasks/more_conditions.html)

本文件显示`endsWith`条件

但是我用的是ant 1.8.2 而且`ant-contrib-1.0b3.jar`，我找不到`endsWith`条件

```
 <if>

        <endswith string="D:\FeiLong Soft\Essential\Development\repository\org\springframework\spring-beans" with="spring-beans" />
        <then>
            <echo>equals</echo>
        </then>
        <else>
            <echo>not equals</echo>
        </else>
    </if> 
```

但结果：

```
BUILD FAILED
E:\Workspaces\feilong\feilong-platform\tools\feilong-tools-ant\build.xml:32: if
doesn't support the nested "endswith" element.

Total time: 1 second 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-15T07:55:09.793

特别是在检查 antcontrib（版本 1.0b2 或 1.0b3）的源代码时`net/sf/antcontrib/antcontrib.properties`，`../antlib.xml` 您会看到，没有`startsWith`或`endsWith`条件，尽管它在[antcontrib 手册](http://ant-contrib.sourceforge.net/tasks/tasks/more_conditions.html)中有所提及。

这两个条件源自[Antelope 项目](http://antelope.stage.tigris.org/)，该项目提供了一个用于运行 ant 和几个 ant 任务的 UI。几年前有计划将 Antelope 与 AntContrib 合并，请参阅[Antelope Tasks Merging with AntContrib](http://sourceforge.net/p/antelope/news/2003/10/antelope-tasks-merging-with-antcontrib/)和 Antelope 项目网站：

> Antelope Project 还提供了一组附加任务，这些任务提供了与 Ant 一起分发的标准任务中没有的功能。将 Antelope 任务与 AntContrib 项目合并的工作正在进行中。
> [...]
> Ant-Contrib 项目是 Apache Ant 的一组任务（有时可能是类型和其他工具）。一些 Antelope 任务现在是该项目的一部分。

但不知何故，那些合并计划停滞不前，从未正确完成，Antcontrib 似乎也死了 - [2006-11-02 的最新版本 1.0b3](http://sourceforge.net/projects/ant-contrib/files/ant-contrib/)

无论如何，您可以将[ant 匹配条件](https://ant.apache.org/manual/Tasks/conditions.html)与 antcontrib 一起使用：

```
<project>
 <!-- Import AntContrib -->
 <taskdef resource="net/sf/antcontrib/antlib.xml"/>
 <property name="foo" value="D:\FeiLong Soft\Essential\Development\repository\org\springframework\spring-beans"/>

 <if>
 <matches string="${foo}" pattern="^.+spring-beans$"/>
  <then>
   <echo>equals</echo>
  </then>
  <else>
   <echo>not equals</echo>
  </else>
 </if>
</project> 
```

或[羚羊蚂蚁任务](http://antelope.tigris.org/files/documents/1409/48031/AntelopeTasks_3.5.3.zip)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-14T20:44:34.687

我使用“startwith”遇到了同样的问题，但没有找到解决方案。我不明白“包含”工作的原因，但“startwith”和“endwith”不明白。

```
<if>
    <contains string="a sample string" substring="sample" />
    <then>
        <echo>match</echo>
    </then>
    <else>
        <echo>not match</echo>
    </else>
</if> 
```

# system.diagnostics - 非英语操作系统中的 System.Diagnostic.Process-command 调用问题

> ID：13670200
> 
> 赞同：0
> 
> 时间：2012-12-02T14:28:38.847
> 
> 标签：system.diagnostics

我有一个实现，我使用 .exe 通过命令提示符运行 *.EXE `System.Diagnostic.Process`。这在英文操作系统中运行良好。但是，为了支持多语言 - 我已将操作系统显示语言更改为法语。当我运行相同的代码时，它什么也不做。但是没有错误/异常。但是，非英语没有做任何事情（命令似乎没有被执行）。

下面是我使用的示例代码，

```
Process pdfProcess = new Process();
StreamWriter writer;
StreamReader reader;

ProcessStartInfo info = new ProcessStartInfo("cmd");

info.CreateNoWindow = true;
info.UseShellExecute = false;
info.RedirectStandardInput = true;
info.RedirectStandardOutput = true;
info.WindowStyle = ProcessWindowStyle.Hidden;
info.WorkingDirectory = exePath; //Path where Invoke exe located
pdfProcess.StartInfo = info;
pdfProcess.Start();

writer = pdfProcess.StandardInput;
reader = pdfProcess.StandardOutput;
writer.AutoFlush = true;
writer.WriteLine(command);

writer.Close();
string ret = reader.ReadToEnd(); 
```

问题是文件名。在非英语语言中，特殊字符被添加到上述代码未执行的文件名中。例如：

> command = MyEXE.exe "C:\Sin título_ Bloc de notas.txt"

如果您在上面看到（西班牙语），“í”文本会导致问题。如果我删除它，它们的命令就会被执行。

任何人都有解决方案如何解决它？

# winapi - 调试win32应用入口

> ID：13670205
> 
> 赞同：0
> 
> 时间：2012-12-02T14:29:15.420
> 
> 标签：winapi, visual-c++

我有一个用**VS C++ 2005开发的****win32**应用程序。我使用 VS 2010 C++ 转换了它。现在我添加了一个新库，我再次在 VS 2010 中开发并链接了它们。但是，当我开始调试时，出现以下错误：

 **> 程序“[26432] Test.exe: Native”已退出，代码为 -1073741701 (0xc000007b)。

我在**_tWinMain**有一个断点。但是代码甚至在达到这一点之前就崩溃了。如何放置/在哪里放置断点以了解它崩溃的原因？有什么建议么？**

# mongodb - 查找数组包含值的位置

> ID：13670210
> 
> 赞同：1
> 
> 时间：2012-12-02T14:29:35.563
> 
> 标签：mongodb, mongoose, coffeescript

假设您有装有物品的盒子。每个项目可能在多个盒子中，因此每个项目都有一个 id 数组，用于该项目所在的盒子。

childA= {...boxIds: ['000001', '000002', '000003']...}

在 mongodb 中，您可以说`child.find({boxIds:'000002'})`获取 childA 和所有其他孩子，其中 000002 在 boxIds 数组中。这是我在猫鼬（咖啡脚本）中尝试过的：

```
 data = boxIds: box._id
  Child.find data, (err, children) -> doSomething 
```

我总是得到一个空的结果。我找不到问题还是猫鼬不支持这种类型的查询？

**编辑**

```
Child = new mongoose.Schema
  ...
  boxIds: Array
  ... 
```

box._id 是普通的 mongodb id 字符串

MongoDB中的示例查询：`db.child.find( {boxIds: '50bb5d10ba1e232401000002'} )`

结果：`......., "boxIds" : [ "50bb5d10ba1e232401000002" ], .....`

**编辑2**

难道 _id 不是字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T15:27:19.930

问题是这`box._id`是一个 ObjectId，但`boxIds`数组字段`Child`包含字符串。

试试这个：

```
data = boxIds: box._id.toString()
Child.find data, (err, children) -> doSomething 
```

另一种选择是在模式中定义`boxIds`为字符串数组，然后 Mongoose 将为您进行必要的转换：

```
Child = new mongoose.Schema
  ...
  boxIds: [String]
  ... 
```

# javascript - 如何通过我的 passport.js 链传递参数？

> ID：13670217
> 
> 赞同：11
> 
> 时间：2012-12-02T14:29:56.547
> 
> 标签：javascript, passport.js

我正在使用 passport.js 对用户进行身份验证。我希望能够传递从用户那里收集的用户名，该用户名将到达身份验证过程的结尾，以便我可以在创建用户时存储用户名（如果它尚不存在）。我试过这个：

```
app.get("/auth/google", function(request, response)
{
    console.log(request.query.username);

    passport.authenticate("google",
    {
        scope:
        [
            "https://www.googleapis.com/auth/userinfo.profile",
            "https://www.googleapis.com/auth/userinfo.email"
        ]
    })(request, response);
});

app.get("/auth/google/callback", function(request, response)
{
    console.log(request.query.username);

    passport.authenticate("google",
    {
        successRedirect: "/",
        failureRedirect: "htm/error"
    })(request, response);
}); 
```

对 /auth/google 的调用会打印用户名，但回调会打印 undefined。即使我可以将用户名获取到回调，我仍然不确定如何将其获取到谷歌策略。那么我是否必须制定自己的策略才能使其发挥作用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-05-08T23:03:15.297

您可以将*状态*对象传递给 passport.authenticate，如下所示：

```
passport.authenticate("google",
{
    scope:
    [
        "https://www.googleapis.com/auth/userinfo.profile",
        "https://www.googleapis.com/auth/userinfo.email"
    ],
    state: request.query.username
})(request, response); 
```

您可以通过*req.query.state*访问状态。

用户名应该是一个字符串，而不是一个对象。如果要在状态中存储对象，请在之前调用*JSON.stringify*并在回调中对其进行解析。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-13T14:10:24.477

对于使用 OpenID 的任何人，req.query 似乎被 OpenId 查询参数覆盖，因此无法直接传递。但是，您可以将变量附加到 req.session。

```
router.get('/auth/social', (req, res, next) => {
  req.session.foo = req.query.foo;
  next();
}, passport.authenticate('social')); 
```

并且不要忘记在策略选项中包含 passReqToCallback 标志：

```
{
  passReqToCallback: true,
  returnURL: config.app.returnUrl,
  realm: config.app.realm,
  apiKey: config.app.apiKey
} 
```

# wpf - 将枚举类型绑定到上下文菜单，显示当前勾选的所有变体

> ID：13670222
> 
> 赞同：0
> 
> 时间：2012-12-02T14:30:26.283
> 
> 标签：wpf, binding, enums, contextmenu

如何将枚举绑定到上下文菜单，以便显示该枚举的所有变体，并为当前选定的选项打勾？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:37:28.080

您可以为此任务创建一个简单的转换器，它将字符串转换为枚举值。
静态方法`Enum.Parse()`，并`Enum.GetNames()`会帮助你。

# android - 编译时出现 Android Proguard 错误：找不到引用？

> ID：13670223
> 
> 赞同：2
> 
> 时间：2012-12-02T14:30:32.670
> 
> 标签：android, proguard

我尝试使用 Proguard 将我的代码导出到 .apk 文件，但收到很多警告。我尝试了很多解决方案，但无法解决。有任何想法吗？

```
[2012-12-02 22:24:05 - com.crossrt.showtime.Main] Warning: android.support.v4.widget.ScrollerCompatIcs: can't find referenced method 'float getCurrVelocity()' in class android.widget.Scroller
[2012-12-02 22:24:05 - com.crossrt.showtime.Main] Warning: android.support.v4.widget.SearchViewCompatHoneycomb$1: can't find referenced class android.widget.SearchView$OnQueryTextListener
[2012-12-02 22:24:05 - com.crossrt.showtime.Main] Warning: android.support.v4.widget.SearchViewCompatHoneycomb$1: can't find referenced class android.widget.SearchView
[2012-12-02 22:24:05 - com.crossrt.showtime.Main] Warning: there were 242 unresolved references to classes or interfaces.
[2012-12-02 22:24:05 - com.crossrt.showtime.Main]          You may need to specify additional library jars (using '-libraryjars').
[2012-12-02 22:24:05 - com.crossrt.showtime.Main] Warning: there were 47 unresolved references to program class members.
[2012-12-02 22:24:05 - com.crossrt.showtime.Main]          Your input classes appear to be inconsistent.
[2012-12-02 22:24:05 - com.crossrt.showtime.Main]          You may need to recompile them and try again.
[2012-12-02 22:24:05 - com.crossrt.showtime.Main]          Alternatively, you may have to specify the option 
[2012-12-02 22:24:05 - com.crossrt.showtime.Main]          '-dontskipnonpubliclibraryclassmembers'.
[2012-12-02 22:24:05 - com.crossrt.showtime.Main] java.io.IOException: Please correct the above warnings first.
[2012-12-02 22:24:05 - com.crossrt.showtime.Main]   at proguard.Initializer.execute(Initializer.java:321)
[2012-12-02 22:24:05 - com.crossrt.showtime.Main]   at proguard.ProGuard.initialize(ProGuard.java:211)
[2012-12-02 22:24:05 - com.crossrt.showtime.Main]   at proguard.ProGuard.execute(ProGuard.java:86)
[2012-12-02 22:24:05 - com.crossrt.showtime.Main]   at proguard.ProGuard.main(ProGuard.java:492) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T23:31:30.280

支持类是指不一定存在于所有 Android 版本中的运行时类和方法。他们确实以安全的方式处理这个问题：代码适用于所有 Android 版本——这就是他们的目的。因此，您可以在配置文件 proguard-project.txt 中告诉 ProGuard 忽略这些问题：

```
-dontwarn android.support.** 
```

参照。ProGuard 手册 > 疑难解答 >[警告：找不到引用的类](http://proguard.sourceforge.net/manual/troubleshooting.html#unresolvedclass)

# php - 如何获取带有 ID 的名称？或者对它们进行排序？

> ID：13670231
> 
> 赞同：0
> 
> 时间：2012-12-02T14:31:18.543
> 
> 标签：php, json, get, decode

我遇到了这个大问题，但我找不到解决方案。我从 API 中将这个 Json 返回给我，但我真的不知道如何通过使用他的 id 来获取英雄的名字？

```
[
{ "id":0, "name":"N/A"  },
{ "id":1, "name":"John" },
{ "id":2, "name":"Doom" }
] 
```

尝试过类似的东西：

```
$data = json_decode($json,true); 
$id = $data[0]['id'];
$name = $data[0][$id]['name']; 
```

但我不能真正完成这项工作......提前谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T14:41:38.777

您必须遍历数组检查 id，找到后，检索名称。像这样的东西：

```
function getHeroName($data, $id) {
    for ($i = 0; $i < count($data); $i++) {
        if ($data[$i]['id'] == $id) {
            return $data[$i]['name'];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T14:37:14.157

在您的示例中，您希望在 JSON 数组中获取索引“0”，索引 0 将是：

```
{ "id":0, "name":"N/A"  } 
```

这个索引 0 现在是一个键值对，所以你可以简单地调用

```
$id = $data[0]['id'];
$name = $data[0]['name']; 
```

如果您想对数组中的所有元素执行此操作，则可以使用 for 循环或 foreach 循环。

要获取 ID 的名称，您必须执行以下操作：

```
function name_for_id($data, $id) {

  foreach ($data as $value) {

    if ($value['id'] == $id)
      return $value['name'];

  }
} 
```

有关完整代码示例，请参见[http://pastebin.com/Rtq3NbQd](http://pastebin.com/Rtq3NbQd)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T14:44:30.097

**工作示例**

```
<?php
$json = '[{"id":0, "name":"N/A"  },{ "id":1, "name":"John" },{ "id":2, "name":"Doom" }]';
$data = json_decode($json, true); 
$heroId = 1;

foreach($data as $hero) {
    if($hero['id'] == $heroId) {
       echo 'Hero Name :'. $hero['name'];    
    }
} 
```

# ruby-on-rails-3 - 在PostgreSQL中导入数据后，重复键值违反唯一约束

> ID：13670235
> 
> 赞同：13
> 
> 时间：2012-12-02T14:31:57.530
> 
> 标签：ruby-on-rails-3, postgresql

我最近将我的 rails 应用程序迁移到 PostgreSQL，以便利用全文搜索。

由于迁移恰逢迁移到新的虚拟主机，迁移的步骤是：

1.  使用适当的 database.yml 文件在新服务器上部署应用程序和 db:create/db:schema:load
2.  mysqldump 仅来自现有 MySQL 生产数据库的数据
3.  将数据导入 PostgreSQL 数据库

应用程序运行成功，但在尝试向数据库添加新内容时出现问题。例如，当我运行 rake 任务来更新我的 twitter 提要时：

```
PG::Error: ERROR:  duplicate key value violates unique constraint "twitter_feeds_pkey" DETAIL:  Key (id)=(3) already exists. 
```

这也适用于所有其他模型，创建新文章、用户等。在开发中，我可以看到发布插入语句 n+1 次将成功保存记录而不会出错。

我的问题是：**如何告诉 PostgreSQL 从现有数据开始按顺序添加索引？**

我已经阅读了该`REINDEX`页面，但不认为这真的是我正在寻找的操作。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-06-02T16:11:37.367

在 Rails 中，您可以使用命令

> `ActiveRecord::Base.connection.reset_pk_sequence!('users')`

使 User 表的主键索引再次同步。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-02T14:46:40.797

如果架构包含序列或序列列，您应该将它们重置为相应列中出现的最大值。（通常你不应该从文件中导入连续剧，而是让它们自由自增。）

对于所有导入的表，您应该识别序列字段并在它们上运行以下代码。（用你的模式名代替“sch”，用你的表名代替“mytable”，用你的id列名代替“id”）

```
WITH mx AS ( SELECT MAX(id) AS id FROM sch.mytable)
SELECT setval('sch.mytable_id_seq', mx.id) AS curseq
FROM mx
        ; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-02T15:35:11.700

您可以自动化 wildplasser 的解决方案，以便所有序列与其关联列的当前最大值同步：

```
do
$block$
declare 
  r        record;
  stmt     text;
  max_id   integer;
begin
  for r in (
              select *
              from (
                select table_schema, 
                       table_name, 
                       column_name, 
                       pg_get_serial_sequence(table_schema||'.'||table_name, column_name) as col_sequence
                from information_schema.columns
                where table_schema not in ('pg_catalog', 'information_schema')
              ) t
              where col_sequence is not null
        ) 
  loop
    stmt := 'select coalesce(max('||r.column_name||'), 0) + 1 from '||r.table_schema||'.'||r.table_name;
    execute stmt into max_id;
    raise notice 'Next ID for %.%.% is %', r.table_schema, r.table_name, r.column_name, max_id;
    perform setval(r.col_sequence, max_id); 
  end loop;
end;
$block$ 
```

请注意，这仅在列已定义为`serial`或`bigserial`已成为序列的“所有者”时才有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-23T17:18:10.327

另一种方法是从列中删除主键（id）（或不转储 id）。所以你的数据看起来像

```
INSERT INTO book (name, price) VALUES ('Alchemist' , 10); 
```

代替

```
INSERT INTO book (id, name, price) VALUES (1 , 'Alchemist' , 10); 
```

这样，您不必在加载初始数据后重置主键

# php - [JS]获取Apache目录列表的文件名

> ID：13670239
> 
> 赞同：-2
> 
> 时间：2012-12-02T14:32:27.510
> 
> 标签：php, javascript, regex, apache2

我正在尝试获取 Apache2 Direotry Listing 的所有文件来创建 AJAX-Requests tp 每个文件。但我找不到匹配的正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T15:16:44.320

```
$dir = 'http://www.example.com/directory';

$data = new DOMDocument();
@$data->loadHTMLFile($dir);
$links = array();
foreach($data->getElementsByTagName('a') as $link)
{
    $url = $link->getAttribute('href');
    if ($url[0] !== '?') // skip column links
    {
        $links[] = $url;
    }
}
print_r($links); 
```

# java - 用于保存标记化字符串的 Android 内存高效集合

> ID：13670244
> 
> 赞同：2
> 
> 时间：2012-12-02T14:33:13.627
> 
> 标签：java, android, collections

在我的项目中，我试图从包含字符串令牌的资产文件夹中加载一个 600KB 的文件。

我需要这些令牌在 o(1) 或任何恒定时间可用/搜索/包含。

我开始`HashSet`- 但它把字符串数据炸到 10MB - 导致内存不足问题

然后，切换到`ArrayList`- 但这也吹到了 6MB。

我尝试使用 original `String`，但是当我构建它时`StringBuffer`- 方法的固有问题`append`进来 - 导致内存不足问题。

所以，我主要关心的仍然是这些数据：

*   它最初是 600KB - 所以集合应该保持在 1 或 2MB 以内
*   查找最好在 O(1) 内

是否有任何好的 Java 集合（甚至来自任何其他库）可以帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T15:18:12.187

在 1 到 2Mb 的内存中表示这些令牌*并*支持`O(1)`查找将非常困难。没有任何标准集合类型能够为您做到这一点，而且我不知道有任何第三方 Java 库可以做到这一点。（[S-Space](http://fozziethebeat.github.com/S-Space/)项目有一个[`TrieSet`](http://fozziethebeat.github.com/S-Space/apidocs/edu/ucla/sspace/util/TrieSet.html)实现，但我查看了代码，我很确定它不会满足您的空间或性能要求......）

假设字符串中的字符是 ASCII，那么将它们转换为 String 对象会立即使大小翻倍（`byte`-> `char`），然后您需要为每个字符串添加 32 个字节的开销。然后，如果将字符串放入 a`HashSet`中，则集合中的每个条目大约需要 32 个额外的字节。

每个条目的`ArrayList<String>`开销为 4 个字节，但现在查找是`O(N)`……或者`O(logN)`如果您保持列表有序并使用二进制搜索。无论哪种方式，您仍然超出您的内存预算。

为了不超出您的预算，您将不得不使用针对内存使用进行了优化的自定义哈希表数据结构，*并将*您的字符数据作为单个字节数组保存在内存中。

这是一个假设的实现。

1.  分配一个`int[]`作为哈希数组。大小应该是大约是令牌数量的一半到五分之一的素数。
2.  分配一个`byte[]`足够大的空间来保存令牌文件。
3.  对于哈希数组中的每个槽：
    *   逐字节扫描文件以查找其哈希码映射到插槽的所有令牌，
    *   将每个标记复制到字节数组并在其后跟一个终止符字节，
    *   如果您找到任何标记，请将第一个标记开头的字节数组偏移量写入哈希数组槽......否则将其设置为`-1`.
4.  要进行查找：
    *   将测试字符串转换为字节，
    *   散列测试字符串的字节（使用与上面相同的散列算法），并将其映射到散列槽，
    *   从哈希槽中的偏移量开始，将测试字符串的字节与`byte[]`. 重复直到你得到一个匹配，或者你到达*下一个*哈希数组元素中的偏移量。

如您所见，填充过程`byte[]`涉及多次扫描输入文件。然而，这可以事先完成，然后可以更新输入文件以包含所需顺序的字节。

空间使用量将是每个字符串数据字节一个字节 + 每个字符串 1 个字节开销 + 主哈希数组中每个插槽的 4 个字节（+ 各种`O(1)`开销）。查找是`O(1)`平均的，但常数取决于散列数组的大小。（越大越好。）

上述设计的主要缺点是：

*   创建数据结构是昂贵的
*   数据结构不能以空间或时间有效的方式更新
*   如果迭代集合，则必须创建一堆 String 对象来表示条目......或公开字节数组和偏移量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T04:19:14.000

这是一个有趣的问题！我通常使用 util 包中的 HashMap 类进行存储，例如这样。您的问题可能不容易适应 android 设备的内存空间，所以我会建议一个替代方案。

对于存储，Android 设备通常使用固态硬盘，例如通常相当快的 SD 卡，那么为什么不将磁盘上的大部分数据保留在 assets 文件夹中，直到需要时呢？您可以构造一个类来缓存最常用的结果，并且修改数据也应该是合理的。如果这不适合，也许您可​​以使用 android SDK 中可用的数据管理工具，例如 sqlite，这将为您完成一些艰苦的工作。

如果您可以避免使用通常是更好的选择的字符串。字符串的操作可能非常昂贵。如果您使用其他数据类型（甚至是 char 或 byte 数组），您可能会发现代码更复杂但在内存方面更有效。

# ios - SOP 限制是否适用于 UIWebView？

> ID：13670245
> 
> 赞同：0
> 
> 时间：2012-12-02T14:33:23.137
> 
> 标签：ios, uiwebview

我写了一个 html 游戏，我正在将 html 文件打包到一个 ios 应用程序中。ios 应用程序只会从磁盘加载页面并将其呈现在 UIWebView 中。

同源策略限制是否适用于此设置（假设是）？

例如，我希望游戏访问我的网络服务器进行多人游戏，但这应该是与加载 html 页面的域不同的域（应用程序空间中的本地磁盘）。

如果 SOP 适用，对于这样的原生 ios 应用程序有什么办法吗？我可以在 UIWebView 上禁用它吗？

我可以在我的网络服务器上实现 JSONP，但是如果有办法在应用程序级别禁用它可能会容易得多，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:31:01.870

看看 CORs [http://en.wikipedia.org/wiki/Cross-origin_resource_sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

在您的网络服务器上设置它会很容易

# jquery - jQuery .live() - 这有什么问题？

> ID：13670253
> 
> 赞同：1
> 
> 时间：2012-12-02T14:34:17.217
> 
> 标签：jquery

在过去的 3 天里，我试图让这个简单的例子工作，但无论我尝试什么，我似乎都无法理解我哪里出错了......

HTML：

```
<input type="text" id="textEntry" /> <button>Go</button>
<ul id="list">
    <li>Text from the input field will appear below</li>
</ul> 
```

查询：

```
$('button').click(function() {
    $enteredText = $('#textEntry').val();

    if($enteredText.length === 0) {
        alert('PLace an item in the field box');
    } else {        
        $newListItem = $('<li/>').html($enteredText).appendTo('#list');
    }

});

$('li').live('mouseover mouseout', function(event) {
    if(event.type == mouseover) {
        $(this).css('background-color', 'yellow');
    } else {
        $(this).css('backgorund-color', 'transparent'); }
}); 
```

最终，我要做的是让用户在文本字段中输入一个项目，然后将其附加到现有列表中（这有效 - 没问题）。然后，用户可以将鼠标悬停在特定条目上，导致背景在鼠标悬停时变为黄色，在鼠标移出时变为透明（问题）。

任何帮助都会膨胀。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:36:19.887

```
if (event.type == mouseover) 
```

您没有任何名为`mouseover`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T14:36:53.750

event.type为您[**提供**](http://api.jquery.com/event.type/)字符串中的事件名称，因此`mouseover`应该是`"mouseover"`.

```
$('li').live('mouseover mouseout', function(event) {
    if(event.type == "mouseover") {
        $(this).css('background-color', 'yellow');
    } else {
        $(this).css('backgorund-color', 'transparent'); }
}); 
```

编辑`backgorund-color`应该是`background-color`

# svn - 乌龟| SVN 命令行错误：修订版中不存在

> ID：13670255
> 
> 赞同：1
> 
> 时间：2012-12-02T14:34:43.177
> 
> 标签：svn, tortoisesvn

不断出现错误：修订版 559 中不存在。但是对于其他一些存储库，它们工作正常。这个错误究竟是什么意思？感谢任何解决方案...

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:18:43.057

*请求的对象在此*版本中不存在，可能被更早的移动|删除

# android - 使用 RelativeLayout 跨越 2 行的 TextView

> ID：13670258
> 
> 赞同：0
> 
> 时间：2012-12-02T14:35:01.523
> 
> 标签：android, android-relativelayout

我正在尝试创建一个如下所示的列表项：-

```
| date | src | type | value |
|     description   | ..    | 
```

我使用如下所示的相对布局：-

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <TextView
        android:id="@+id/date"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true">
    </TextView>

    <TextView
        android:id="@+id/src"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/date"
        android:layout_alignParentTop="true">
    </TextView>

    <TextView
        android:id="@+id/type"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@id/src"        
        android:layout_alignParentTop="true">
    </TextView>

    <TextView
        android:id="@+id/value"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:gravity="right"
        android:layout_toRightOf="@id/type"        
        android:layout_alignParentTop="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentBottom="true"
        android:textAppearance="?android:attr/textAppearanceLarge"/>    

    <TextView
        android:id="@+id/description"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/date"
        android:layout_toLeftOf="@id/value"
        android:layout_alignRight="@id/type"
        android:layout_alignParentLeft="true"
        android:layout_alignParentBottom="true">
    </TextView>
</RelativeLayout> 
```

但我得到的更像是这样的：-

```
| date | src | type |
|     description   | value | 
```

我无法让最右边的单元格跨越两行。我是否以错误的方式使用它，或者有另一种正确的布局类型。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:41:54.493

这对我有用：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"> 

<TextView
    android:id="@+id/date"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
</TextView>

<TextView
    android:id="@+id/src"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@+id/date">
</TextView>

<TextView
    android:id="@+id/type"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@+id/src">
</TextView>

<TextView
    android:id="@+id/value"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_toRightOf="@+id/type"
    android:gravity="right"       
    android:layout_alignParentRight="true"
    android:textAppearance="?android:attr/textAppearanceLarge"/>   

<TextView
    android:id="@+id/description"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/date"
    android:layout_toLeftOf="@id/value"
    android:layout_alignRight="@id/value">
</TextView>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T15:21:13.697

我尝试了您提供的代码，它按书面方式工作。请参见下图（我添加了一些颜色和文本，以便在 GUI 布局编辑器中实际看到它）。

![在此处输入图像描述](../Images/3b6831031cd1a33b3a958707e78b6af9.png)

但是，我认为一个更好的实现可能更符合您正在寻找的内容：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
    <TextView
        android:id="@+id/date"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >
    </TextView>
    <TextView
        android:id="@+id/src"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/date" >
    </TextView>
    <TextView
        android:id="@+id/type"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/src" >
    </TextView>
    <TextView
        android:id="@+id/value"
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_alignBottom="@+id/description"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/type"
        android:background="@color/red"
        android:gravity="center|center"
        android:textAppearance="?android:attr/textAppearanceLarge" />
    <TextView
        android:id="@id/description"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignRight="@id/type"
        android:layout_below="@id/date"
        android:layout_toLeftOf="@id/value" >
    </TextView>
</RelativeLayout> 
```

这给了你这个：

![在此处输入图像描述](../Images/b5e4660d651c0333ba4b0ae3082959e8.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T14:58:21.993

我认为您应该使用两个为 TextView(s) 分配权重的 LinearLayout(s)

像这样

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:weightSum="4" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="TextView" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:weightSum="2"

        android:layout_below="@+id/linearLayout1" >

        <TextView
            android:id="@+id/textView5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="TextView" />

    </LinearLayout>

</RelativeLayout> 
```

编辑：如果您想要如上所述的预定义数量的元素，这应该可以工作

# c++ - OpenGL 纹理太暗

> ID：13670259
> 
> 赞同：1
> 
> 时间：2012-12-02T14:35:01.740
> 
> 标签：c++, opengl, textures

基本上我有一个渲染函数，它使用纹理绘制一个矩形：

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);  
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

glShadeModel(GL_SMOOTH);

glEnable(GL_TEXTURE_2D);   
glShadeModel(GL_SMOOTH);
glEnable(GL_DEPTH_TEST);   
glDepthFunc(GL_LEQUAL);    
glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST);

glBindTexture(GL_TEXTURE_2D, texture[0]);
glBegin(GL_QUADS);
{                                                        
    glTexCoord2f(0, 0);
    glVertex3f(points[0]->x, points[0]->y, 0);
    glTexCoord2f(1, 0);   
    glVertex3f(points[1]->x, points[1]->y, 0);   
    glTexCoord2f(1, 1);   
    glVertex3f(points[2]->x, points[2]->y, 0);   
    glTexCoord2f(0, 1);   
    glVertex3f(points[3]->x, points[3]->y, 0);   
}                         
glEnd();                                         
glDisable(GL_TEXTURE_2D); 
```

运行后可以看到纹理图，但是太暗了。另外，一开始，我可以在几分之一秒内看到它的正常颜色。

有谁知道如何修理它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T16:45:26.037

经过更多搜索，我发现，我需要将颜色设置为白色：

```
glColor3f(1.0f, 1.0f, 1.0f); 
```

在开头插入。

# mysql - MYSQL 为 WHERE 匹配行增加“SHOWN”行

> ID：13670262
> 
> 赞同：0
> 
> 时间：2012-12-02T14:36:36.323
> 
> 标签：mysql, sql

我正在寻找表“A”的解决方案，其结构是：

```
ID      NAME    SHOWN
1       Eddie    0
2       Marie    1
3       Shawn    15
4       Frank    12
5       Danny    7 
```

我想在这个表上提交一个 SELECT ，以便对于每个结果行，' `SHOWN`' 会增加，例如：

```
SELECT * from 'A' WHERE `ID`>3; 
```

将导致表“A”发生以下变化：

```
ID      NAME    SHOWN
1       Eddie    0
2       Marie    1
3       Shawn    15
4       Frank    13
5       Danny    8 
```

只有 Frank 和 Danny 的 ID 大于 3，因此生成的 SELECT 将产生 Frank 和 Danny，因此他们各自的 ' `SHOWN`' 列增加 1

我怎样才能实现这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T14:40:15.550

```
update A set shown=shown+1 where ID >3) 
```

这是[演示](http://sqlfiddle.com/#!2/6c38b)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T14:40:35.197

然后，您可以使用预期的增量更新您的表格。

```
UPDATE A
SET SHOWN = SHOWN + 1
WHERE ID > 3 
```

检查此参考:)

## [SQLFIDDLE](http://www.sqlfiddle.com/#!2/817fbe/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T14:42:01.173

也许用一个`CASE`表达：

```
select  ID
      , NAME
      , CASE WHEN SHOWN > 3 THEN SHOWN + 1 ELSE SHOWN END as SHOWN
FROM A 
```

# grails - grails登录验证

> ID：13670268
> 
> 赞同：0
> 
> 时间：2012-12-02T14:37:01.497
> 
> 标签：grails, spring-security

似乎真的在为 grails 网络应用程序中的基本内容而苦苦挣扎。似乎无论我做什么，我都无法让事情按照我的预期行事。使用 Spring Security Core 插件向应用程序添加一些安全性，但如果用户尚未登录，我无法强制重定向。

这是我面临的众多问题之一，但一次一个是最好的前进方式。任何帮助，将不胜感激。

```
package timetracker2

import grails.timesecurity.*

class TimeController {

  def springSecurityService

  def loginverify = {
    if (springSecurityService.isLoggedIn()) {
    }
    else {
      render 'Please log in'
    }
  }

  static scaffold = Time
  .... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T15:23:11.550

使用 Spring Security，您通常不会检查代码中的登录状态。

有两种方法可以设置安全要求。

一是为 URL 设置安全要求。这是通过 Config.groovy 中的 interceptUrlMap 完成的

另一种是在控制器方法上使用 Secured 注解。在这种情况下，要求用户登录将如下所示：

```
class TimeController {

  @Secured("IS_AUTHENTICATED_FULLY")
  def someMethodRequiringLogin() {
  }

  @Secured("ROLE_ADMIN")
  def someMethodRequiringAdminRole() {
  }
} 
```

有关更多信息，请参阅[使用 Grails 简化 Spring 安全性](http://blog.springsource.org/2010/08/11/simplified-spring-security-with-grails/)

# java - Arrays.sort 不对我的列表进行排序

> ID：13670269
> 
> 赞同：-2
> 
> 时间：2012-12-02T14:37:10.793
> 
> 标签：java, android, sorting

我有一个arraylist，我想使用arrays.sort 按字母顺序对它们进行排序，但是当我运行应用程序时，列表完全没有排序。我不确定出了什么问题。

```
public class AList extends ListActivity {
    static String[] People = new String[] {
            "John Ken",
            "Albert Chan",
            "Kelvin McDonald"};

    public static void main(String[] args) {
    Arrays.sort(People);}

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.activity_alist);
    setListAdapter(new ArrayAdapter<String>(this,
        android.R.layout.simple_list_item_1,
        People)); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T14:38:53.683

我不认为您的`main`方法执行（Android 有自己的`main`方法）。

尝试调用`Arrays.sort()`您的`onCreate`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T14:44:32.763

`public static void main(String[] args)`

**Android 没有任何 main() 方法。**

**-** `onCreate()`被视为任何 Android 程序的**入口点**。

**-**所以你可以在程序`Arrays.sort()`中`onCreate`或**任何适当的地方使用。**

# java - 使用 Java 读取 XML - SAX 解析器

> ID：13670272
> 
> 赞同：0
> 
> 时间：2012-12-02T14:37:18.010
> 
> 标签：java, xml, io, sax, saxparser

请查看以下链接（此处的代码不遵循 SAX）

[http://viralpatel.net/blogs/parsing-reading-xml-file-in-java-xml-reading-java-tutorial/](http://viralpatel.net/blogs/parsing-reading-xml-file-in-java-xml-reading-java-tutorial/)

在这里，似乎我必须知道主要子元素的名称（在本例中为 'student' ），并将其解析为字符串

```
NodeList studentList = docEle.getElementsByTagName("student"); 
```

所以在这里，就像用固定的元素名称解析 XML。但是，我有 XML 文件，而且我永远不会知道元素的名称。这意味着，在第一个 xml 文件中，标签名称可以是“食物”，在第二个 xml 文件中，标签名称可以是“饮料”，依此类推。这意味着，我永远不会知道那里会有哪些元素，以及它们的名称/标签是什么。

据此，我如何编写新代码/编辑给定代码？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:44:19.863

看看 XStream [http://x-stream.github.io/](http://x-stream.github.io/)是否可以为你解决这个问题。它将反序列化任何有效的 xml。我的另一个想法是切换到 Groovy 并使用 XMLSlurper——一个很棒的工具。

# javascript - JS 冗长计算：用良好的语法将其拆分？

> ID：13670273
> 
> 赞同：0
> 
> 时间：2012-12-02T14:37:18.190
> 
> 标签：javascript, performance, coroutine

我的 JS 代码需要很长时间才能运行，所以它锁定了浏览器。

我可以将它与 分开`setTimeout`，那会起作用。但后来我需要重组我的代码。我认为，只要有一个好的库，就应该可以不重构代码（太多）。

那么，**任何提供该功能的 js 库**？像伪协程之类的东西？

出于兼容性原因，我不想使用 Web Workers。

**编辑：**有人问我 lib 会做什么。好吧，考虑一下这段代码。

```
dosomething();
for(var x=0; x<w; x++) {
    for(var y=0; y<h; y++) {
        dosomething2();
    }
}
dosomething3(); 
```

我可以使用 setInterval 将其拆分，因此在将控制权返回给浏览器之前，我只执行外部循环的 10 次迭代。但这需要大量重构代码。一个库可以做一些诡计让我更轻松地做到这一点。例如，在 C# 语言中，有可能——实际上有两种方式——生成器和 async 关键字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T15:25:40.230

如果您使用服务器端语言为您进行数字运算呢？您可以向它发送所需的数据，它将被异步处理并在准备好时返回给客户端。

这是一种比依赖客户端的计算能力进行资源密集型计算更好的方法。

如果你必须让你的 JS 循环异步，方法如下：

```
dosomething();

function iterate(count) {
    count--;
    if (count > 0) {
        dosomething2();
        setTimeout(
        function() {
            iterate(count);
        }, 10); // iterates every 10 ms
    }
}
iterate(10); //runs the loop 10 times, asynchronously

dosomething3(); 
```

请注意，`dosomething`and`dosomething3`将连续触发，而`dosomething2`迭代发生在后台。每个人都`dosomething2`锁定了界面，但由于它们不是连续发生的，所以没有问题。

另请注意，虽然我目前将迭代限制为每 10 毫秒 1 次，但您可以将其设置为 0 并仍然获得类似的结果。

这是一个演示：http: [//jsfiddle.net/mW6vz/](http://jsfiddle.net/mW6vz/)

# c# - 如何制作新颜色？

> ID：13670274
> 
> 赞同：22
> 
> 时间：2012-12-02T14:37:18.230
> 
> 标签：c#, winforms, colors

我在 C# 中有一个表单，我想在 3 个`TextBox`控件中输入红色、绿色和蓝色并制作新颜色。例如：red=3, green=2, blue=5 当我点击“MAKE COLOR”按钮时，标签会显示新颜色。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-02T14:39:46.647

让我们假设您有一些类似于此的代码：

```
int red = Convert.ToInt32(RedColorComponentValueTextBox.Text);
int green = Convert.ToInt32(GreenColorComponentValueTextBox.Text);
int blue = Convert.ToInt32(BlueColorComponentValueTextBox.Text);
//Don't forget to try/catch this 
```

然后从这些值创建颜色，尝试

```
Color c = Color.FromArgb(red, green, blue); 
```

然后将标签的`ForeColor`属性（或`BackColor`属性 - 不确定您要更改的属性）设置为`c`.

你需要有

```
using System.Drawing; 
```

在您的代码文件（或类）序言中。

注意：如果你还想有一个 alpha 组件，你可以试试这个：

```
Color c = Color.FromArgb(alpha, red, green, blue); 
```

一般提示：如果您想使用表单的 HTML/CSS 颜色规范`#RRGGBB`，请`#335577`尝试此模式

```
int red = 0x33, green = 0x55, blue = 0x77; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T14:40:09.513

使用[FromRgb](http://msdn.microsoft.com/en-us/library/system.windows.media.color.fromrgb.aspx)创建自定义颜色：

```
Color myRgbColor = new Color();
myRgbColor = Color.FromRgb(3, 2, 5); 
```

# android - 2.2 中的 Calander 无法查询实例 > Unknown URL content://com.android.calendar/instances/when

> ID：13670277
> 
> 赞同：1
> 
> 时间：2012-12-02T14:38:10.820
> 
> 标签：android, android-calendar

谁能帮我下面的代码，问题出在

```
Uri.Builder builder = Uri.parse("content://com.android.calendar/instances/when").buildUpon(); 
```

引发 Unkown URL 非法参数异常，见下文

谢谢

格雷厄姆

代码获取所有日历的列表，使用日历ID遍历所有日历

```
package gb.org;

import java.util.Calendar;
import java.util.Date;
import java.util.HashSet;

import android.content.ContentResolver;
import android.content.ContentUris;
import android.content.Context;
import android.database.Cursor;
import android.net.Uri;
import android.text.format.DateUtils;
import android.os.SystemClock;

public class Example {

            public static void readCalendar(Context context) {

        ContentResolver contentResolver = context.getContentResolver();

        // Fetch a list of all calendars synced with the device, their display names and whether the
        // user has them selected for display.

        final Cursor cursor = contentResolver.query(Uri.parse("content://com.android.calendar/calendars"),
                 (new String[] { "_id", "displayName", "selected" }), null, null, null); 

        HashSet<String> calendarIds = new HashSet<String>();

        while (cursor.moveToNext()) {

            final String _id = cursor.getString(0);
            final String displayName = cursor.getString(1);
            final Boolean selected = !cursor.getString(2).equals("0");

            System.out.println("Calendar is " + _id + " Display Name: " + displayName + " Selected: " + selected);

            //DETERMINE IF CALENDAR IS SELECTED IF YES THEN USE IT 

            calendarIds.add(_id);
        }

        // query the instance table         
        for (String id : calendarIds) {

            Uri.Builder builder = Uri.parse("content://com.android.calendar/instances/when").buildUpon(); 

            Cursor eventCursor = contentResolver.query(builder.build(),
                    new String[] { "title", "begin", "end", "allDay"}, "Calendars._id=" + id,
                    null, "startDay ASC, startMinute ASC"); 

            while (eventCursor.moveToNext()) {

                long  timeNow=System.currentTimeMillis();  //the current time 

                final String title = eventCursor.getString(0);
                final long begin = eventCursor.getLong(1);
                final Date begin_DATE = new Date(begin);

                //final Date end = new Date(eventCursor.getLong(2));
                final Date nowDATE = new Date(timeNow);
                final long end = eventCursor.getLong(2);
                final Date end_DATE = new Date(end);
                final long allDay = eventCursor.getLong(3);

                //function to check the time 
                 //is there a calendar event today when I run the application 
                 //if yes then print a toast message 
                 //if not then do nothing - maybe a toast do nothing!
                //Calendar Cnow = Calendar.getInstance();
                //System.out.println("Calendar now means:" + Cnow.getTimeInMillis());  //time now 
                if(timeNow >= begin && timeNow <=end){
                    //check time block for meeting 
                    System.out.println("BLOCK BLOCK BLOCK ");
                    System.out.println("The meeting is: " + title + "begin is " +  begin_DATE + "end is" + end_DATE );
                    //call blocker function 

                }

                else{
                    System.out.println("NO BLOCK NO BLOCK NO BLOCK  ");
                    //stop and restart service return to main screen with dialog box 
                }

                //System.out.println("begin:" + begin  + " End: " + end  + "all day :" + allDay + "time NOW" + timeNow );
                //assign to variables for begin and end
                Date d = new Date();
                //work with time and data               

                //System.out.println("current date" +  d.getDate() + "current hour" + d.getHours() 
                    //  + "current min" + d.getMinutes() + "current second" + d.getSeconds());
            }
        }
    }

} 
```

例外>>

```
> 12-02 14:58:42.097: E/AndroidRuntime(12298): FATAL EXCEPTION: main
>     12-02 14:58:42.097: E/AndroidRuntime(12298): java.lang.RuntimeException: Unable to start activity
> ComponentInfo{gb.org/gb.org.main}: java.lang.IllegalArgumentException:
> Unknown URL content://com.android.calendar/instances/when
>     12-02 14:58:42.097: E/AndroidRuntime(12298):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
>     12-02 14:58:42.097: E/AndroidRuntime(12298):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
>     12-02 14:58:42.097: E/AndroidRuntime(12298):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
>     12-02 14:58:42.097: E/AndroidRuntime(12298):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
>     12-02 14:58:42.097: E/AndroidRuntime(12298):  at android.os.Handler.dispatchMessage(Handler.java:99)
>     12-02 14:58:42.097: E/AndroidRuntime(12298):  at android.os.Looper.loop(Looper.java:123)
>     12-02 14:58:42.097: E/AndroidRuntime(12298):  at android.app.ActivityThread.main(ActivityThread.java:3687)
>     12-02 14:58:42.097: E/AndroidRuntime(12298):  at java.lang.reflect.Method.invokeNative(Native Method)
>     12-02 14:58:42.097: E/AndroidRuntime(12298):  at java.lang.reflect.Method.invoke(Method.java:507)
>     12-02 14:58:42.097: E/AndroidRuntime(12298):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
>     12-02 14:58:42.097: E/AndroidRuntime(12298):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
>     12-02 14:58:42.097: E/AndroidRuntime(12298):  at dalvik.system.NativeStart.main(Native Method)
>     12-02 14:58:42.097: E/AndroidRuntime(12298): Caused by: java.lang.IllegalArgumentException: Unknown URL
> content://com.android.calendar/instances/when
>     12-02 14:58:42.097: E/AndroidRuntime(12298):  at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:144)
>     12-02 14:58:42.097: E/AndroidRuntime(12298):  at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:114)
>     12-02 14:58:42.097: E/AndroidRuntime(12298):  at android.content.ContentProviderProxy.bulkQueryInternal(ContentProviderNative.java:330)
>     12-02 14:58:42.097: E/AndroidRuntime(12298):  at android.content.ContentProviderProxy.query(ContentProviderNative.java:366)
>     12-02 14:58:42.097: E/AndroidRuntime(12298):  at android.content.ContentResolver.query(ContentResolver.java:262)
>     12-02 14:58:42.097: E/AndroidRuntime(12298):  at gb.org.Example.readCalendar(Example.java:62)
>     12-02 14:58:42.097: E/AndroidRuntime(12298):  at gb.org.main.onCreate(main.java:12)
>     12-02 14:58:42.097: E/AndroidRuntime(12298):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
>     12-02 14:58:42.097: E/AndroidRuntime(12298):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
>     12-02 14:58:42.097: E/AndroidRuntime(12298):  ... 11 more 
```

显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="gb.org"
      android:versionCode="1"
      android:versionName="1.0">
- <application android:icon="@drawable/icon" android:label="@string/app_name" android:debuggable="true">
- <activity android:name=".main" android:label="@string/app_name">
- <intent-filter>
  <action android:name="android.intent.action.MAIN" /> 
  <category android:name="android.intent.category.LAUNCHER" /> 
  </intent-filter>
  </activity>
  </application>
  <uses-sdk android:minSdkVersion="7" /> 
  <uses-permission android:name="android.permission.READ_CALENDAR" />
  <android.permission android:name= "android.permission.WRITE_CALENDAR" />

  </manifest> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T17:26:30.267

解决了。

2.2 中的代码要求实例使用不同的 URI。

```
final Cursor cursor = contentResolver.query(Uri.parse("content://com.android.calendar/calendars"),
                 (new String[] { "_id", "displayName", "selected" }), null, null, null); 

Uri.Builder builder = Uri.parse("content://com.android.calendar/instances/when").buildUpon();
ContentUris.appendId(builder, Long.MIN_VALUE);
ContentUris.appendId(builder, Long.MAX_VALUE); 
```

# c# - 从具有相同标签的 XML 导入

> ID：13670278
> 
> 赞同：0
> 
> 时间：2012-12-02T14:38:19.313
> 
> 标签：c#, xml, linq

我有 XML 文件，我需要解析它并将数据导入数据库。我`XDocument`用来解析文件，但有一个问题：

XML 示例：

```
<a b="1">dfas</a>
<a b="2">qwsd</a>
<a b="3">egfs</a>
<a b="4">ghfg</a> 
```

我的代码：

```
 XElement tag;
 record.A = tag.Element("a").Value; 
```

我需要导入记录。具有属性 b=4 的元素的值。我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:44:24.547

```
record.A = tag.Elements("a").First(a => a.Attribute("b").Value == "4").Value; 
```

或者

```
record.A = (string)tag.Elements("a").FirstOrDefault(a => a.Attribute("b").Value == "4"); 
```

或者

```
record.A = (string)tag.XPathSelectElement("//a[@b='4']"); 
```

# c++ - 从可能引发异常的函数返回 std::string

> ID：13670281
> 
> 赞同：3
> 
> 时间：2012-12-02T14:38:27.690
> 
> 标签：c++, string, exception

我在Java中经常这样做......

```
String something = "A default value.";
try {
    something = this.aFunctionThatMightThrowAnException();
} catch (Exception ignore) { }
this.useTheString(something); 
```

现在我正在尝试为`std::string`. 这是我所拥有的...

```
std::string something("A defualt value.");
try {
    something = this->aFunctionThatMightThrowAnException();
} catch (const std::exception& ignore) { }
this->useTheString(something); 
```

为了完整起见，这`aFunctionThatMightThrowAnException()`可能看起来像......

```
std::string MyClass::aFunctionThatMightThrowAnException() {
    /* Some code that might throw an std::exception. */
    std::string aString("Not the default.");
    return aString;
} 
```

我对 C++ 版本有三个问题：

*   这是解决此类问题的公认方法吗？还是将`something`into`aFunction`作为参考更常见？
*   我的任务是`something`从`aFunction...`安全返回吗？具体是原来分配的内存`"A default value."`释放了吗？
*   如果抛出异常，是否有我看不到的副作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T14:43:42.720

> 这是解决此类问题的公认方法吗？

是的。

> 还是将某些东西作为参考传递给aFunction更常见？

不。

> 我的任务作为从 aFunction 的返回......安全吗？特别是最初分配给“A 默认值”的内存。释放？

是的。

> 如果抛出异常，是否有我看不到的副作用？

不。

# wowza - Wowza 服务器上的播放器？

> ID：13670286
> 
> 赞同：0
> 
> 时间：2012-12-02T14:39:19.777
> 
> 标签：wowza

如果我们将从 Wowza 3.5 流式传输到 Android，是否足以将这个 HTML5 播放器上传到我们的服务器上，或者应该由所有 Android 用户下载？谢谢迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:38:08.783

将 html5 播放器放在服务器上就足够了，但不要忘记某些 android 设备无法播放或显示 html5 播放器。

# xaml - 禁用 Canvas 入口转换

> ID：13670287
> 
> 赞同：1
> 
> 时间：2012-12-02T14:39:25.307
> 
> 标签：xaml, canvas, windows-8, winrt-xaml, transitions

**没关系。问题是我需要禁用恰好是 Listview 的包含对象的转换。必须禁用 ItemContainerTransitions 集合。**

我从 Canvas 元素中动态添加和删除元素。当我这样做的时候，这些元素会做那种我完全不需要的漂亮的自动动画（因为在这种情况下我自己做了所有的动画）。

我尝试在 XAML 中的 Canvas 元素中放置一个空的 TransitionCollection，但它似乎没有任何效果。我还尝试添加一个零偏移量的 EntranceTransition，但这也无济于事。

如何告诉 Canvas 在添加元素时不要对其进行动画处理？

这是我尝试过的：

```
 <Canvas.Transitions>
        <TransitionCollection>
            <AddDeleteThemeTransition/>
            <EntranceThemeTransition FromHorizontalOffset="0"/>
        </TransitionCollection>
    </Canvas.Transitions> 
```

和

```
 <Canvas.Transitions>
        <TransitionCollection>
        </TransitionCollection>
    </Canvas.Transitions> 
```

# python - 当按下另一个框架中的按钮时，如何在一个框架中发生事件？

> ID：13670288
> 
> 赞同：0
> 
> 时间：2012-12-02T14:39:29.090
> 
> 标签：python, wxpython

我正在使用 wxPython。我有一个主框架，您按下一个按钮，它会将您带到另一个框架，您可以在其中读取一些数据。然后按一个按钮。我怎样才能将这些数据传输到我的另一个框架上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:38:22.573

如果我是你，我会使用 PubSub。它使班级之间的交流变得轻而易举！[我在这里](http://www.blog.pythonlibrary.org/2010/06/27/wxpython-and-pubsub-a-simple-tutorial/)写了一篇关于 PubSub 的教程。

您还可以阅读以下内容：

*   [http://wiki.wxpython.org/Controlling%20GUI%20with%20pubsub](http://wiki.wxpython.org/Controlling%20GUI%20with%20pubsub)
*   [http://wiki.wxpython.org/WxLibPubSub](http://wiki.wxpython.org/WxLibPubSub)

基本上，您在第一帧中设置了一个侦听器，然后将数据从第二帧发布到第一帧并适当更新。

# sharepoint - SharePoint 甘特视图：当我从默认视图更改为甘特图时出现“ListViewWebPart”错误

> ID：13670289
> 
> 赞同：2
> 
> 时间：2012-12-02T14:39:39.870
> 
> 标签：sharepoint, ms-project, gantt-chart

我已将 microsoft project plan 2010 链接到 SharePoint 2010，并且能够在其位于普通表视图中时编辑和添加任务。但是，当我去创建视图并尝试将其显示为甘特图时，我收到“ListViewWebPart”错误“指定的参数超出了有效值的范围”。我不知道如何解决这个问题。

# shell - 为什么这个 shell 脚本在有和没有 shebang 的情况下表现不同？

> ID：13670290
> 
> 赞同：0
> 
> 时间：2012-12-02T14:39:44.287
> 
> 标签：shell

我正在遵循 linux shell 编程指南来提高我对 shell 的熟练程度。今天，我到达了嵌套 for 循环的部分。

以下脚本在终端上打印棋盘。

```
for (( i = 1; i <= 9; i++ )) ### Outer for loop ###
do
   for (( j = 1 ; j <= 9; j++ )) ### Inner for loop ###
   do
        tot=`expr $i + $j`
        tmp=`expr $tot % 2`
        if [ $tmp -eq 0 ]; then
            echo -e -n "\033[47m "
        else
            echo -e -n "\033[40m "
        fi
  done
 echo -e -n "\033[40m" #### set back background colour to black
 echo "" #### print the new line ###
done 
```

它工作正常。马上，我在它的开头加了一个shibang，让它看起来像

```
#!/bin/sh
for (( i = 1; i <= 9; i++ )) ### Outer for loop ###
do
   for (( j = 1 ; j <= 9; j++ )) ### Inner for loop ###
   do
        tot=`expr $i + $j`
        tmp=`expr $tot % 2`
        if [ $tmp -eq 0 ]; then
            echo -e -n "\033[47m "
        else
            echo -e -n "\033[40m "
        fi
  done
 echo -e -n "\033[40m" #### set back background colour to black
 echo "" #### print the new line ###
done 
```

然而，现在，每个白色/黑色块打印一整行。

任何人都可以帮助我理解为什么？（我在 Mac Snow Leopard 下运行 shell）。谢谢！威廉

* * *

帮派：

只是一个更新，我发现如果我使用“#!/bin/bash”，它工作正常。所以是sh内部实现的问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:48:04.807

`#!/bin/bash`也许？

当您`#!`想指定将使用哪个程序来解释此文本文件时

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:22:00.023

问题是您正在使用`echo`，但不幸的是，即使在符合 POSIX 的系统上，此命令行为也是不可预测的。

当`-n`作为参数传递`echo`或当参数中存在转义序列时，回显行为未指定。您的代码正在使用这两种不可移植的结构。此外，它还使用了不可移植的`-e`bashism。

[有关详细信息，请查看echo POSIX 手册页中](http://pubs.opengroup.org/onlinepubs/009604499/utilities/echo.html#tag_04_41_16)的“应用程序使用”一章。

您应该使用`printf`而不是`echo`. `printf`是便携式的，旨在克服`echo`限制。

```
#!/bin/sh
for (( i = 1; i <= 9; i++ )) ### Outer for loop ###
do
   for (( j = 1 ; j <= 9; j++ )) ### Inner for loop ###
   do
        tot=`expr $i + $j`
        tmp=`expr $tot % 2`
        if [ $tmp -eq 0 ]; then
            printf "\033[47m "
        else
            printf "\033[40m "
        fi
  done
 printf "\033[40m" #### set back background colour to black
 echo "" #### print the new line ###
done 
```

顺便说一句，这段代码可以这样简化（至少同时适用于 ksh 和 bash）：

```
for (( i = 1; i <= 9; i++ )); do
  for (( j = 1 ; j <= 9; j++ )); do
    printf "\033[%dm " $((((i+j)%2)?40:47))
  done
  printf "\033[40m\n"
done 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-02T23:24:48.980

`echo`是一个内置的 shell（尽管它也可以在 中独立使用`/bin/echo`），因此根据您的 shell 版本，它的行为可能会有所不同。在我的系统（OS X Mountain Lion）上：

```
$ which sh
/bin/sh
$ /bin/sh --version
GNU bash, version 4.2.37(2)-release (i386-apple-darwin12.2.0)
Copyright (C) 2011 Free Software Foundation, Inc.
$ /bin/sh -c "echo -e -n '\e[0;34mtest'"
-e -n \e[0;34mtest   # incorrect

$ which bash
/opt/local/bin/bash
$ /opt/local/bin/bash --version
GNU bash, version 4.2.37(2)-release (i386-apple-darwin12.2.0)
Copyright (C) 2011 Free Software Foundation, Inc.
...
$ /opt/local/bin/bash -c "echo -e -n '\e[0;34mtest'"
test    # blue and without a newline. correct 
```

因此，在我的 Mac`/bin/sh`上，不支持`-e`or`-n`参数中的任何一个，而`/opt/local/bin/bash`与您所看到的类似。

顺便说一句，您可以使用`$(( ... ))`算术扩展进行计算，或者使用`let`：

```
# with arithmetic expansion:
tmp=$(( (i + j) % 2 ))   # $i and $j can be used but are not necessary

# with let:
let tmp=(i+j)%2   # no spaces allowed

# or just calculate inside the if statement directly:
if (( (i + j) % 2 == 0 )); then
.... 
```

# android - 处理服务，从主类或服务类本身创建服务线程？

> ID：13670292
> 
> 赞同：0
> 
> 时间：2012-12-02T14:39:47.870
> 
> 标签：android

从理论上讲，在开始我的应用程序之前，从 MyMain 类（扩展的那个`Activity`）中创建新线程更好还是我们通常在 MyService 类中创建它（扩展的那个`Service`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:43:05.580

这取决于。如果您需要使用 UI，请从活动中启动一个线程。如果您需要在后台工作，请在服务中进行。通常，您不需要使用“原始”线程——`AsyncTask`用于活动和`IntentService`服务。

# jquery - 如何使用jQuery淡化背景颜色？

> ID：13670298
> 
> 赞同：2
> 
> 时间：2012-12-02T14:40:30.513
> 
> 标签：jquery

目前每个人都在谈论两种解决方案：

1.  jQuery UI 插件 --> 不可行，因为它占用了太多空间
2.  jQuery Color (http://api.jquery.com/animate/) --> 不可行，因为我实际上无法获得要下载的插件的链接

所以我的问题是，我可以使用 jQuery v1.7.2 来实现这种效果的最小插件是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T14:42:13.067

您可以[`jQuery Color`](https://github.com/jquery/jquery-color/)从其 GitHub 存储库中获取该插件。

```
span.value {
  background-color: #0f0;
} 
```

```
$("span.value").animate({
  backgroundColor: "transparent"
}, 'slow'); 
```

[查看使用 jQuery Color 的实时示例。](http://jsfiddle.net/KVFZM/)

* * *

您还可以使用[CSS3 过渡](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_transitions)。

```
span.value {
  background-color: #0f0;
  -o-transition-duration: 0.8s;
  -moz-transition-duration: 0.8s;
  -ms-transition-duration: 0.8s;
  -webkit-transition-duration: 0.8s;
  transition-duration: 0.8s;
}

.fade {
  background-color: transparent;
} 
```

```
$("span.value").toggleClass("fade"); 
```

[查看使用 CSS· 转换的实时示例。](http://jsfiddle.net/KVFZM/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T14:51:14.917

如果您最终选择不使用 jQuery 颜色插件，您可以使用 CSS 过渡：

```
<button id="fadeTrigger">fade with jQuery <span>(and CSS...)</span></button>

<div id="target" class="base">
    <p>some text in the targetted div element</p>
</div>​ 
```

和 jQuery：

```
$('#fadeTrigger').click(
    function(){
        $('#target').toggleClass('base highlighted');
    });​ 
```

和 CSS：

```
button {
    font-size: 1em;
}

button span {
    font-size: 0.6em;
    font-style: italic;
}

#target.base {
    background-color: #fff;
    -moz-transition: all 1s linear;
    -ms-transition: all 1s linear;
    -o-transition: all 1s linear;
    -webkit-transition: all 1s linear;
    transition: all 1s linear;
}

#target.highlighted {
    background-color: #f90;
    -moz-transition: all 1s linear;
    -ms-transition: all 1s linear;
    -o-transition: all 1s linear;
    -webkit-transition: all 1s linear;
    transition: all 1s linear;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/tMpvJ/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T14:43:30.410

我从不尝试，但你可以用 rgba 制作动画

rgba(0, 255, 0, 1) => rgba(0, 255, 0, 0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T14:48:26.520

你可以通过动画尝试做到这一点

```
 $('span').animate({'backgroundColor' : '#ffff99'}); 
```

或尝试

```
 $("span").fadeOut("slow").css("background-color", "#ffff99"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T14:52:43.530

您可以将这些插件与

```
<script type="text/javascript" src=""></script> 
```

在您的`head`标签中，而不必下载它们。

尝试

```
 $(this).animate({ backgroundColor: '#HEXCODE' }, 'fast'); 
```

或者，您可以`opacity`在悬停时使用 CSS 中的属性。

```
 #id{
   opacity:1;
  }

 #id:hover{
   opacity: 0.8;
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T23:53:54.997

我写了一个非常简单的 jQuery 插件来淡化颜色。它可能需要一点抛光，但我认为这就是你所追求的。你可以在这里查看：[https ://gist.github.com/4569265](https://gist.github.com/4569265)

# objective-c - 为什么根类的元类的超类不是 NULL 指针？

> ID：13670305
> 
> 赞同：4
> 
> 时间：2012-12-02T14:41:21.283
> 
> 标签：objective-c, class, objective-c-runtime

在 Objective-C 运行时，一个类由如下结构表示：

```
typedef struct class_t {
    struct class_t *isa;    // Points to the class' meta class
    struct class_t *super;  // Points to the class' super class
    Cache cache;
    IMP *vtable;
    union {
        class_ro_t *rodata;
        class_rw_t *rwdata;
    };
} class_t; 
```

当一个`MyClass`类是根类而不是元类时，它的超成员是一个NULL指针（这是可以理解的，因为它是根类，所以它没有超类）。但是，如果我们得到同一个`MyClass`根类的 isa 成员（它指向`MyClass`元类），并且我们得到那个 isa 成员的超级成员，它就不是一个 NULL 指针，而是一个指向`MyClass`（不是元类）的指针。非元根类的元类的超类不应该是 NULL 指针（就像非元根类的超类一样）？既然不是，那它不应该是什么？

我问这个是因为，实际上，如果`methodX`是`MyClass`根类的实例方法（不是类方法），则该语句`[MyClass methodX]` 将调用`methodX`（实际上确实如此），不应该发生什么（再次，因为`methodX`是实例方法，而不是类方法，因此它不应该响应该`[MyClass methodX]`语句）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-02T15:24:00.307

Obective-C 语言明确规定类对象应响应其根类的实例方法。这主要是一个务实的决定；由于 NSObject 主要负责处理 ObjC 如何与对象交互的基础知识，因此必须两次实现所有内容会很烦人；一次用于类对象，一次用于实例。类对象可以放入数组等中，因此它们需要响应`-retain`并且`-release`就像实例一样。

您可以在本文档的“根类的方法”部分了解更多信息：[https ://developer.apple.com/library/ios/DOCUMENTATION/Cocoa/Conceptual/ObjectiveC/Chapters/ocObjectsClasses.html](https://developer.apple.com/library/ios/DOCUMENTATION/Cocoa/Conceptual/ObjectiveC/Chapters/ocObjectsClasses.html)

# haskell - 在 Haskell 中实现 DSL

> ID：13670313
> 
> 赞同：2
> 
> 时间：2012-12-02T14:41:55.443
> 
> 标签：haskell

这可能是一个非常基本的问题。

我正在研究一个最终允许我说的 DSL：

```
import language.cwmwl
main = runCWMWL $ do
    eval ("isFib::", 1000, ?BOOL) 
```

我刚刚开始研究解释器函数 runCWMWL，我想知道是否有可能以某种方式（以及如何？）在 do 块内部或外部逃逸到真正的 Haskell。

我想在我的解释器中为一些必需的前奏函数（例如`print`）提供一个默认包装器，但我想知道是否有更优雅的方法来共同定位 DSL 和 Haskell，而不会退回到只是一个普通的库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T22:44:27.433

[查看来自Template Haskell](http://www.haskell.org/haskellwiki/Template_Haskell)的 QuasiQuoting 。你可能正在做

```
import Language.CWMWL

main = runCWMWL [eval|
     ("isFib::", 1000, ?BOOL) |] 
```

或者

```
main = [run|("isFib::", 1000, ?BOOL) |] 
```

或任何适合你的东西。

# dotnetnuke - DotNetNuke UserInfo.Membership.IsOnLine 即使在登录后也始终为假

> ID：13670315
> 
> 赞同：2
> 
> 时间：2012-12-02T14:41:57.480
> 
> 标签：dotnetnuke, membership

我正在尝试在登录期间获取用户的在线状态。我在 ValidateUser 之后检查以下属性，但它总是返回 false。

```
 objUser.Membership.IsOnLine 
```

只是为了确认，我将以下代码放在我的一个模块中，该模块*只能*在登录后访问。

```
 Dim _currentUser As UserInfo = DotNetNuke.Entities.Users.UserController.GetCurrentUserInfo()
    Dim message as String = IIf(_currentUser.Membership.IsOnLine, "Online", "Not Online")
    UI.Skins.Skin.AddModuleMessage(Me, message, Skins.Controls.ModuleMessage.ModuleMessageType.BlueInfo) 
```

当用户登录时，它总是显示“不在线”。我错过了什么吗？请帮忙。

我正在使用 DNN 6.02.05 社区版。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:46:16.630

在 DotNetNuke 中启用在线用户的重要步骤

“在线用户”模块在后台线程（通过调度程序）上工作，以从用户在线列表中添加和过期用户。计划的作业应该存在于您的安装中，但默认情况下它是禁用的。

要启用计划的作业：-

1.  以超级用户帐户（例如主机）登录您的门户
2.  导航到主机 -> 计划
3.  编辑“DotNetNuke.Entities.Users.PurgeUsersOnline, DOTNETNUKE”作业（单击铅笔）
4.  勾选“计划启用”</li>
5.  点击更新
6.  点击“立即运行”即可当场生效。

现在您已经配置了计划作业，您的用户应该开始处理后台用户。问题是您必须设置一个额外的主机设置才能发生这种情况。

要使用户在线：-

1.  以超级用户帐户（例如主机）登录您的门户
2.  导航到主机 -> 主机设置
3.  展开“其他设置”</li>
4.  勾选“使用户在线”</li>
5.  点击更新

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:07:31.740

也许是一个愚蠢的问题，但是您是否检查了主机设置中是否打开了用户在线功能->其他设置？

# android - 在横向显示多于焦点的 EditText

> ID：13670319
> 
> 赞同：0
> 
> 时间：2012-12-02T14:42:25.187
> 
> 标签：android, android-edittext

在横向激活虚拟键盘时，是否可以显示更多的焦点 EditText？

键盘激活前： ![对焦前](../Images/0ed78d0afed38145ec4374936032fd49.png)

激活虚拟键盘时： ![对焦后](../Images/027665666575ef9383935dccd5b33327.png)

例如上面：是否可以显示“Hello world！” 和键盘激活时的编辑框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:04:15.530

利用

`android:imeOptions="flagNoExtractUi"`为您的编辑文本

# c#-4.0 - Visual Studio Express 2012：Windows 8 设计器无法启动

> ID：13670321
> 
> 赞同：1
> 
> 时间：2012-12-02T14:42:34.343
> 
> 标签：c#-4.0

我正在尝试用 C# 为 Windows 8 设计应用程序。但是当我尝试启动界面设计器时，它会显示“System.Security.SecurityException - 无法启动设计器”或类似的东西。这个异常是什么意思？

# java - 从文件中读取非英语语言字符时出错

> ID：13670325
> 
> 赞同：0
> 
> 时间：2012-12-02T14:42:57.427
> 
> 标签：java

我正在构建一个应用程序，用户必须在其中猜测一个秘密单词。我在资产文件夹中有 *.txt 文件。问题是单词是**阿尔巴尼亚语**。我们的语言使用像“ë”和“ç”这样的字母，所以每当我尝试从文件中读取包含任何这些字符的单词时，我都会得到一些邪恶的符号，我无法为这些字符实现 string.compare()。我尝试了许多使用 UTF-8 的选项，更改了 Eclipse 设置，但仍然出现相同的错误。

如果有人有任何建议，我将不胜感激。

我用来读取文件的代码是：

```
AssetManager am = getAssets();
strOpenFile = "fjalet.txt";

InputStream fins = am.open(strOpenFile);

reader = new BufferedReader(new InputStreamReader(fins));

ArrayList<String> stringList = new ArrayList<String>();

while ((aDataRow = reader.readLine()) != null) {
    aBuffer += aDataRow + "\n";
    stringList.add(aDataRow);           
} 
```

否则代码工作正常，除了提到的字符

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T14:51:22.583

很明显，创建文件时生效的默认编码`InputStreamReader`与文件不匹配。

如果您尝试读取的文件是 UTF-8，那么这应该可以工作：

```
reader = new BufferedReader(new InputStreamReader(fins, "UTF-8")); 
```

如果文件不是 UTF-8，那么这将不起作用。相反，您应该使用文件真实编码的名称。（我的猜测是它在[ISO/IEC_8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)或[ISO/IEC_8859-16](http://en.wikipedia.org/wiki/ISO/IEC_8859-16)中。）

* * *

一旦你弄清楚了文件的真正编码是什么，你需要试着理解为什么它不符合你的 Java 平台的默认编码......然后就如何处理它做出务实的决定。（您是否应该将编码硬连接到您的应用程序中......如上所述？您应该将其设为配置属性还是命令参数？您应该更改默认编码吗？您应该更改文件吗？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T14:50:50.957

您需要确定创建文件时使用的字符编码，并在读取文件时指定此编码。例如，如果是 UTF-8，请使用

```
reader = new BufferedReader(new InputStreamReader(fins, "UTF-8")); 
```

或者

```
reader = new BufferedReader(new InputStreamReader(fins, StandardCharsets.UTF_8)); 
```

如果您在 Java 7 下。

像 Notepad++ 这样的文本编辑器具有很好的启发式方法来猜测文件的编码是什么。尝试用这样的编辑器打开它，看看它猜到了哪种编码（如果字符显示正确）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T14:55:39.077

您应该知道文件的编码。

`InputStream`类读取文件二进制文件。尽管您可以将输入解释为字符，但这将是隐含的猜测，这可能是错误的。

`InputStreamReader`类将二进制转换为字符。但它应该知道字符集。

您应该使用[以下版本](http://docs.oracle.com/javase/6/docs/api/java/io/InputStreamReader.html#InputStreamReader%28java.io.InputStream,%20java.nio.charset.Charset%29)按字符集提供它。

**更新**

不要建议你有 UTF-8 编码的文件，这可能是错误的。在俄罗斯，我们有 CP866、WIN1251 和 KOI8 等编码，它们都与 UTF8 不同。可能你有一些流行的阿尔巴尼亚文本文件编码。检查您的操作系统设置以猜测。

# python - SciPy 的 optimize.minimize 中的多个变量

> ID：13670333
> 
> 赞同：71
> 
> 时间：2012-12-02T14:43:54.950
> 
> 标签：python, math, scipy

根据[SciPy 文档](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.minimize.html)，可以使用多个变量最小化函数，但它没有说明如何优化这些函数。

```
from scipy.optimize import minimize
from math import *

def f(c):
  return sqrt((sin(pi/2) + sin(0) + sin(c) - 2)**2 + (cos(pi/2) + cos(0) + cos(c) - 1)**2)

print minimize(f, 3.14/2 + 3.14/7) 
```

上面的代码确实试图最小化函数`f`，但对于我的任务，我需要最小化三个变量。

简单地引入第二个参数并相应地调整最小化会产生错误（`TypeError: f() takes exactly 2 arguments (1 given)`）。

**`minimize`使用多个变量最小化时如何工作。**

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-12-02T14:54:56.567

将多个变量打包到一个数组中：

```
import scipy.optimize as optimize

def f(params):
    # print(params)  # <-- you'll see that params is a NumPy array
    a, b, c = params # <-- for readability you may wish to assign names to the component variables
    return a**2 + b**2 + c**2

initial_guess = [1, 1, 1]
result = optimize.minimize(f, initial_guess)
if result.success:
    fitted_params = result.x
    print(fitted_params)
else:
    raise ValueError(result.message) 
```

产量

```
[ -1.66705302e-08  -1.66705302e-08  -1.66705302e-08] 
```

# javascript - 什么是 javascript `window.Notation` 对象？

> ID：13670334
> 
> 赞同：2
> 
> 时间：2012-12-02T14:44:04.280
> 
> 标签：javascript, google-chrome

我在 chrome 开发者控制台中玩耍，找到了`Notation`window 的成员。但是，它是本机代码，任何调用似乎都会抛出`TypeError: Illegal constructor`. 它似乎不存在于 IE10 中。

这个对象是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T14:46:17.240

来自[MDN](https://developer.mozilla.org/en-US/docs/DOM/Notation)

> 注意：这在 Mozilla 中没有实现
> 
> **表示 DTD 表示法（只读）**。可以声明未解析实体的格式或正式声明文档的处理指令目标。从 Node.js 继承方法和属性。它的 nodeName 是符号名称。没有父母。

w3.org解释了为什么任何构造函数调用[都会](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-5431D1B9)失败：

> DOM Core 不支持编辑 Notation 节点；因此它们是只读的。

我不确定这是否仍然有意义，因为网络在很大程度上正在远离 XML 和 XHTML ......

# haskell - 这是 Text.Parsec 的惯用用法吗？

> ID：13670340
> 
> 赞同：4
> 
> 时间：2012-12-02T14:44:33.750
> 
> 标签：haskell, parsec

我的使用`Text.Parsec`有点生锈。如果我只想返回匹配的字符串，这是惯用的吗？

```
category :: Stream s m Char => ParsecT s u m [Char]                        
category = concat <$> (many1 $ (:) <$> char '/' <*> (many1 $ noneOf "/\n")) 
```

我觉得可能有一个现有的运营商，`liftM concat . many1`或者`(:) <$> p1 <*> p2`我正在忽略，但我不确定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T19:14:45.643

没关系，我想。稍微明智的命名会使其更漂亮：

```
category = concat <$> many1 segment
  where
    segment = (:) <$> char '/' <*> many1 (noneOf "/\n") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T23:39:59.250

我认为使用 Parsec 返回更结构化的东西会*稍微*更惯用，例如字符串列表：

```
catList :: Parser [String]    
catList = char '/' *> many1 alphaNum `sepBy1` char '/' 
```

我认为没有像您想知​​道的那样的组合器，但这是 Haskell，并且 roll-your-own-control-structure-or-combinator 始终可用：

```
concatMany1 :: Parser [a] -> Parser [a]
concatMany1 p = concat <$> many1 p

catConcat = concatMany1 $ (:) <$> char '/' <*> many1 alphaNum 
```

但是下一个组合器更好，至少绝对是惯用的 Haskell：

```
infixr 5 <:>
(<:>) :: Applicative f => f a -> f [a] -> f [a]
hd <:> tl = (:) <$> hd <*> tl 
```

所以现在我们可以写

```
catCons :: Parser String
catCons = concatMany1 (char '/' <:> many1 alphaNum) 
```

但顺便说一句

```
contrivedExample :: IO String
contrivedExample = getChar <:> getLine

moreContrived :: String -> Maybe String
moreContrived name = find isLetter name <:> lookup name symbolTable 
```

## 没有

You'll notice I've used `alphaNum` where you used `noneOf "/\n"`. I think `noneOf` is not good practice; parsers should be really careful to accept onlt the right thing. Are you absolutely sure you want your parser to accept `/qwerty/12345/!"£$%^&*()@:?><.,#{}[] \/ "/" /-=_+~`? Should it really be happy with `/usr\local\bin`?

As it stands, your parser accepts any string as long as it starts with `/` and ends before `\n` with something that's not `/`. I think you should rewrite it with `alphaNum <|> oneOf "_-.',~+"` or similar instead of using `noneOf`. Using `noneOf` allows you to avoid thinking about what you should allow and focus on getting positive examples to parse instead of *only* positive examples to parse.

## Parser

I've also always gone for `Parser a` instead of `Stream s m t => ParsecT s u m a`. That's just lazy typing, but let's pretend I did it to make it clearer what my code was doing, shall we? :) Use what type signature suits you, of course.

# javascript - 谷歌地图 api v3 - 只显示首都名称 - 伦敦 - 不是自治市镇

> ID：13670343
> 
> 赞同：0
> 
> 时间：2012-12-02T14:45:02.173
> 
> 标签：javascript, google-maps-api-3

有谁知道如何在自定义地图上仅显示首都，例如伦敦？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:27:08.867

如果您使用的是 KML 层 (https://developers.google.com/maps/documentation/javascript/layers#KMLLayers) 并且不需要 Infowindows，则需要使用

```
suppressInfoWindows 
```

选项。

它看起来像这样：

```
var ctaLayer = new google.maps.KmlLayer('http://www.insideoutdigital.com/map/Clients3.kml', 
    { suppressInfoWindows: true });
ctaLayer.setMap(map); 
```

没有通用的方法。您需要使用以下样式的地图将所有地区的标签设置为关闭：

```
style = [
  {
    "featureType": "administrative.locality",
    "elementType": "labels",
    "stylers": [
      { "visibility": "off" }
    ]
  }
]

var mapOptions = {
      zoom: 12,
      ...
      styles: styles
};

 var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
  } 
```

然后通过对位置进行地理编码或自己提供来对首都城市进行地理编码和显示标签。

您可以使用 MapLabel 库来绘制漂亮的标签：http: [//google-maps-utility-library-v3.googlecode.com/svn/trunk/maplabel/docs/reference.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/maplabel/docs/reference.html)

Check out this demo on how to use the maplabel library: [http://devfestmtm.appspot.com/demos/directions/directions2.html](http://devfestmtm.appspot.com/demos/directions/directions2.html)

HTH

# javascript - 在对象中“存储”对象好吗

> ID：13670346
> 
> 赞同：4
> 
> 时间：2012-12-02T14:45:51.460
> 
> 标签：javascript, object

存储对象或引用其他对象中的对象更好吗？让我用一个例子来解释。

我有一个对象“团队”和一个对象“单元”，该单元属于团队。我想在我的对象“团队”中“存储”对象“单元”。

1）我可以这样做：*单位*存储在团队对象中

```
// class Team
function Team() {
    this.units = [];
}
// class Unit
function Unit(team) {
    team.units.push(this);
}
myTeam = new Team();
units = [];
units[units.length] = new Unit( myTeam ); 
```

2）或类似的东西：*单位ID*存储在团队对象中

```
// class Team
function Team() {
    this.units = [];
}
// class Unit
function Unit(team, id) {
    team.units.push(id);
}
myTeam = new Team();
units = [];
units[units.length] = new Unit( myTeam, units.length ); 
```

可以理解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T14:57:36.613

肯定会采用第一种更面向对象的方法。我没有看到拥有 id 和外部数组的任何优势。但缺点也很明显：

*   可以在您不注意的情况下修改外部`units`数组，从而使 id 不同步并且几乎没用。尝试调试！

*   由于没有封装，每个都`Team`可以修改任何`Unit`

*   似乎一个数组存储对所有单元的引用，而只有一个`Team` *拥有*`Unit`.

*   如果你删除一个会发生什么`Team`？

    *   如果你不`Unit`直接删除所有的s，你会得到内存泄漏

    *   您可能想从公用`units`表中删除其所有单位。但这会在`units`表格中留下空白。

    *   如果您也删除单元并压缩`units`数组，则必须修改所有其他`Team`s，因为数组中的索引会更改

*   id of`Unit`没有商业价值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T15:17:38.293

如果您担心存储对象会占用更多内存，那么这是不正确的。

Javascript 中的对象是存储在内存中某处的数据单元，但是当您在第一个代码示例中添加对象时，您只是添加对那块内存的引用：您没有创建对象的副本（这会加倍内存使用情况）。就存储而言，第二种方法没有性能优势。

现在，让我们谈谈设计。很多时候，我使用关联数组等，其中对象的 id 不是其字段集的一部分。这总是会导致更复杂的代码，因为总有一段时间我需要将对象传递到某个地方，而且还需要传递它的 id。除非有特殊情况另有规定，否则将 id 视为对象的一部分通常是完全合理的。在概念层面上有意义的设计决策可能会导致更好的设计选择。

所以我的投票绝对是备选方案 1。

# oracle - pl/sql 上的 substr

> ID：13670348
> 
> 赞同：1
> 
> 时间：2012-12-02T14:46:06.200
> 
> 标签：oracle, plsql, substr

我正在尝试编写一个小的 pl/sql 脚本并需要一些帮助。首先，我有 2 个名为 project1 和 project2 的表。这两个表都有一个名为 cust_code 的列。

cust_code 值是 varchar2 类型。值始终以 1 开头。（数字 1，小数点）和 8 位数字。例如 1.10002332

当我将数据导入 project1 表时，如果最后一位为 0，例如 1.22321630，则删除最后一个零，然后小数点后只有七位。在这种情况下，它将是 1.2232163

我要编写的脚本将检查小数点后是否只有 7 位，并将该记录插入到 project2 表中。这就是我想出的

```
DECLARE

       CURSOR dif IS
            SELECT CUST_CODE, CUST_ID, CONTRACT_NUM, MSISDN 
            FROM project1
            WHERE CUST_CODE IN (SELECT CUST_CODE FROM CUST_ALL);

BEGIN

        FOR a in dif LOOP

            IF SUBSTR(a.CUST_CODE, 10)=null
            THEN
            INSERT INTO project2 (cust_code)
            VALUES(a.CUST_CODE);           
            END IF;
        END LOOP;
        commit;

END; 
```

脚本运行没有错误，但没有任何反应。在 substr 函数上，当我选择与 NULL 不同的值时，它会起作用。我不知道如何检查第 8 位是否丢失。

阿萨夫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:58:03.300

由于以下行，您的脚本不起作用：

```
IF SUBSTR(a.CUST_CODE, 10)=null 
```

在 plsql`<something> = null`中将始终为 FALSE。你应该写：

```
IF SUBSTR(a.CUST_CODE, 10) IS null 
```

但实际上你并不真正需要 plsql，你可以用一个 sql 命令来做到这一点：

```
INSERT INTO project2 (cust_code)
SELECT CUST_CODE, CUST_ID, CONTRACT_NUM, MSISDN 
            FROM project1
            WHERE CUST_CODE IN (SELECT CUST_CODE FROM CUST_ALL)
              AND SUBSTR(a.CUST_CODE, 10) IS null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T14:56:52.467

根据您的情况试试这个：

```
IF LENGTH(a.CUST_CODE) = 10 AND SUBSTR(a.CUST_CODE,-1,10) = '0' 
```

（检查长度是否为 10，最后一个字符是否为 0）

# wordpress - 在 ul 中旋转导航超链接

> ID：13670349
> 
> 赞同：0
> 
> 时间：2012-12-02T14:46:10.303
> 
> 标签：wordpress, css, rotation, positioning

我正在构建一个 Wordpress 主题（基于骨骼主题），其中设计要求菜单（a ul）顺时针旋转 90 度，因此菜单沿屏幕右侧运行（固定），链接中的文字同样旋转。我已经旋转了 ul，但它隐藏了窗口顶部的一半菜单，并且位于屏幕右侧相当大的位置。这是因为骨骼主题中的旋转还是覆盖了 CSS 的一部分？

**编辑**

我已经更改了代码，现在菜单现在可以在 Chrome 中正确呈现，但是 FF 和 Safari 将菜单呈现在 10 像素左右太远了（我稍后会做 IE，哦，快乐！）。有什么想法可以纠正吗？

这是相关编辑代码的jsFiddle：http: [//jsfiddle.net/phily245/bWjN2/](http://jsfiddle.net/phily245/bWjN2/)

或者，这是编辑后的 ​​HTML：

```
<link href='http://fonts.googleapis.com/css?family=Nunito' rel='stylesheet' type='text/css'>

<nav role="navigation">
<ul id="menu-index-page-main-menu" class="nav top-nav clearfix">
    <li id="menu-item-12" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-12"><a href="#toTheTip">To The Tip</a></li>
    <li id="menu-item-13" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-13"><a href="#about">About</a></li>
    <li id="menu-item-14" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-14"><a href="#ourAssets">Our Assests</a></li>
    <li id="menu-item-15" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-15"><a href="#contact">Contact</a></li>
</ul> 
```

​</p>

这是编辑后的 ​​CSS：

```
body{ /*This is to emulate the bg*/
background-color: #85dbf8;
min-height: 3000px;
}

.nav{
    position: fixed;
    display: block;
    top: 0;
    right: 0;          
    z-index:999;
    background: transparent;
    border:0;
    -webkit-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    writing-mode: tb-rl;
}

.nav li{
    position:relative;
    display: block;
    float: left;
    width: auto;
    margin: 0 9px;
    border-radius: 0px 0px 5px 5px;
    color: #ffffff;
    /*box-shadow: 4px 0px 4px #eee;*/
}

.nav li a{
    border: 0;
    border-radius: 0px 0px 5px 5px;
    color: #85dbf8;
    font-weight: bolder;
    text-transform: uppercase;
}

.nav li a:hover,.nav li a:focus{
    color:#086a8b;
}
.nav{
    /*border:1px solid #ccc;*/
    border-bottom:0;
}

.nav li a{
    display:block;
    text-decoration:none;
    padding:10px 20px;
    background-color:#ffffff;
    border-bottom:1px solid #ccc;
}​ 
```

# file - 向 DefaultMutableTreeNode 添加操作

> ID：13670352
> 
> 赞同：1
> 
> 时间：2012-12-02T14:46:43.370
> 
> 标签：file, action, jtree, double-click, treenode

我创建了一个“FileTree”类，它通过 JTree 显示文件系统，并且只显示文件夹和“.xlsx”或“.xls”文件。如果 DefaultMutableTreeNodes 是“.xlsx”或“.xls”文件，我希望能够向它们添加双击操作。似乎无法将 ActionListener 或 MouseListener 添加到 DefaultMutableTreeNode，有没有办法可以控制这些节点上的双击操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:10:12.047

我有一种解决方案，它不是我想要的，但它确实有效。

我在JTree中添加了一个MouseListener，然后当点击次数为2时，我检查事件源是JTree的一个实例，然后调用

```
Object comp = tree.getLastSelectedPathComponent();
if (comp instanceof FileTreeNode)
{
    FileTreeNode ftn = (FileTreeNode) comp;
File file = ftn.getFile();
} 
```

然后我可以对文件做任何我想做的事情。FileTreeNode 是 DefaultMutableTreeNode 的扩展，其中包含该节点处的文件。

# c# - 无法将类型“字符串”隐式转换为“System.Text.RegularExpressions.Match”

> ID：13670354
> 
> 赞同：1
> 
> 时间：2012-12-02T14:47:03.620
> 
> 标签：c#, regex

我使用正则表达式编写了一些代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            string input = @"ch/js/789747b7/scriptSearch.js"",videoJsSrc:""res/batch/js/3c9a6ee1/scriptVideo.js"",apiFormAppJSSrc:""res/batch/js/9fa7e22b/apiFormApp.js"",easyXDMJs:""res/batch/js/8f3e66db/easyXDM.min.js"",nativeHooksSrc:""res/batch/js/539ea638/nativeHooks.js"",gwtHash:""1bcb94eb"",jsessionId:";
            Match output = Regex.Match(input, @"gwtHash:""(.*?)""").Value;
            Console.WriteLine(output);
            Console.ReadKey();
        }
    }
} 
```

但我得到这个错误：

```
Error   1   Cannot implicitly convert type 'string' to 'System.Text.RegularExpressions.Match'   C:\Users\asus\AppData\Local\Temporary Projects\ConsoleApplication1\Program.cs   14  28  ConsoleApplication1 
```

怎么了？

­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­­

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T14:49:06.927

属性`Value`的类型为`string`. 因此，您需要将`Regex.Match`方法的结果分配给您的`Match`对象，然后将其写入`Value`控制台

```
Match output = Regex.Match(input, @"gwtHash:""(.*?)""");
Console.WriteLine(output.Value); 
```

或将`output`变量类型更改为字符串：

```
string output = Regex.Match(input, @"gwtHash:""(.*?)""").Value;
Console.WriteLine(output); 
```

* * *

要`1bcb94eb`使用

```
Match output = Regex.Match(input, @"gwtHash:""(.*?)""");
if (output.Success)
    Console.WriteLine(output.Groups[1].Value); 
```

# c++ - 从保存对象指针的列表中删除

> ID：13670355
> 
> 赞同：1
> 
> 时间：2012-12-02T14:47:04.730
> 
> 标签：c++, list, object, pointers

我在列表中保存了一些对象，例如这个：

```
list<CWorm*> wormList; 
```

我把蠕虫放在这个列表中，在它们的构造函数中：

```
CWorm::CWorm(list<CWorm*>& list, [...]) { 
    list.push_back(this); 
```

在主循环中，我为它们执行了一些事件，如下所示：

```
for(itt = wormList.begin(); itt != wormList.end(); itt++) {
    if( (*itt) != NULL ) (*itt)->someEventBlabla();
} 
```

我的问题是：如何有效地将它们从列表中删除。当它们死亡时，我试图从列表中“擦除”它们（在主循环中，在检查变量之后），但它给出了不可引用迭代器的错误。当我尝试从列表中“删除”它们（在对象中，在主循环执行的事件中）时，这一行中会出现一个错误：

```
if( (*itt) != NULL ) (*itt)->someEventBlabla(); 
```

我试图像这样删除它们：

```
wormList.remove(this) 
```

来自一个对象事件，wormList 声明为 extern。
如何删除它们，为下一个对象留下空白空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T15:02:02.853

好吧，也许你应该在这里使用某种智能指针。但通常你想做这样的事情

```
 using namespace std;
    wormList.erase(remove_if( wormList.begin(), wormList.end(), bind1st(equal_to<CWorm*>(), NULL) ), wormList.end() ); 
```

# java - 将变量从一个文本框传递到另一个文本框

> ID：13670357
> 
> 赞同：0
> 
> 时间：2012-12-02T14:47:15.563
> 
> 标签：java

我想使用java将一个类中的文本框中的值传递到另一个类中的另一个文本框中。我有一个名为 PurchaseSystem 的类和另一个 PaymentSystem，我想将值从 PurchaseSystem 传递到 PaymentSystem。

```
 private void btnMakePaymentActionPerformed(java.awt.event.ActionEvent evt) {                                               
    String selected;
    new PaymentSystem().setVisible(true);

    PaymentSystem information;

    information = new PaymentSystem();
    information.itemChoosen = txtDisplayItem.getText();
    information.itemPrice = txtDisplayPrice.getSelectedText();
    information.setVisible(true);

}     

public class PaymentSystem extends javax.swing.JFrame {

 public String itemChoosen, itemPrice, itemQuantity, itemSubTotal;
/**
 * Creates new form PaymentSystem
 */
public PaymentSystem() {
    initComponents();

    itemTextBox.setText(itemChoosen);
    priceTextBox.setText(itemPrice);
} 
```

这是我到目前为止所做的，但 PurchaseSystem 类中的值没有出现在 PaymentSystem 类的文本框中。请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:56:45.057

您需要添加一个*更新*方法来将值传递给`PaymentSystem`. 目前，您似乎只是`PaymentSystem`在其构造函数中设置值。这些更改并不仅仅通过分配`String`字段`itemChoosen`,`itemPrice`等来反映。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T14:57:11.253

`setText(itemChoosen)``PaymentSystem`对象一被创建就被调用。那时字符串`itemChoosen`是空的。

我会实现一个方法`PaymentSystem`来设置 的文本`itemTextBox`，所以你可以调用那个方法而不是`information.itemChoosen`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T14:58:35.893

您可以更改 PaymentSystem 类的构造函数，如下所示

```
class PaymentSystem{
    private String itemPrice =null;
    private String itemChoosen  = null;
    public PaymentSystem(String itemChoosen,String itemPrice){
       this.itemPrice = itemPrice;
       this.itemChoosen = itemChoosen;
    }
   //rest of the class
} 
```

在初始化 PaymentSystem 类时，传递这两个字符串值。所以你可以使用这些值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T14:58:41.697

你需要根据对象进行推理。不是在班级方面。每次执行时`new PaymentSystem()`，都会创建一个新对象，该对象具有自己的文本框，与另一个 PaymentSystem 实例的文本框不同。

举个例子：

```
Bottle greenBottle = new Bottle(); // creates a first bottle
greenBottle.setMessage("hello");
Bottle redBottle = new Bottle(); // creates another bottle, which can have its own message
System.out.println(redBottle.getMessage()); 
```

在上面的代码中，`null`会打印，而不是“hello”，因为你已经在一个瓶子里存储了一条消息，并且从另一个瓶子里得到了一条消息。

如果要将消息存储在瓶子中并稍后检索，则需要将瓶子存储在变量中：

```
private Bottle theBottle;

// in some method:
theBottle = new Bottle(); // creates the bottle
theBottle.setMessage("hello");

// in some other method
System.out.println(theBottle.getMessage()); // displays hello 
```

# c++ - 读/写：非法搜索 - 客户端-服务器 C++

> ID：13670364
> 
> 赞同：0
> 
> 时间：2012-12-02T14:47:46.313
> 
> 标签：c++, c, client-server, pipe, named-pipes

我在 stackoverflow 客户端-服务器代码上找到了（使用命名管道），并对其进行了修改以让客户端在 while 循环中发送消息。虽然我从服务器收到消息，但我在读/写时收到“非法搜索”，我不确定它是否是一个严重的错误，如果这里真的有问题吗？

**服务器.cpp**

```
#include <fcntl.h>
#include <stdio.h>
#include <sys/stat.h>
#include <unistd.h>
#include <string.h>

int main()
{
   int client_to_server;
   char *myfifo = "/tmp/client_to_server_fifo";

   int server_to_client;
   char *myfifo2 = "/tmp/server_to_client_fifo";

   char buf[BUFSIZ];

   /* create the FIFO (named pipe) */
   mkfifo(myfifo, 0666);
   mkfifo(myfifo2, 0666);

   /* open, read, and display the message from the FIFO */
   client_to_server = open(myfifo, O_RDONLY);
   server_to_client = open(myfifo2, O_WRONLY);

   printf("Server ON.\n");

   while (1)
   {
      read(client_to_server, buf, BUFSIZ);

      if (strcmp("exit",buf)==0)
      {
         printf("Server OFF.\n");
         break;
      }

      else if (strcmp("",buf)!=0)
      {
         printf("Received: %s\n", buf);
         printf("Sending back...\n");
         write(server_to_client,buf,BUFSIZ);
      }

      /* clean buf from any data */
      memset(buf, 0, sizeof(buf));
   }

   close(client_to_server);
   close(server_to_client);

   unlink(myfifo);
   unlink(myfifo2);
   return 0;
} 
```

**客户端.cpp**

```
#include <stdio.h>
#include <fcntl.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <unistd.h>

int main()
{
   int client_to_server;
   char *myfifo = "/tmp/client_to_server_fifo";

   int server_to_client;
   char *myfifo2 = "/tmp/server_to_client_fifo";

   char str[BUFSIZ];

   //printf("Input message to serwer: ");
   //scanf("%s", str);

   /* write str to the FIFO */
   client_to_server = open(myfifo, O_WRONLY);
   server_to_client = open(myfifo2, O_RDONLY);

while(true)
{

   printf("> "); 
   scanf("%s", str);
   write(client_to_server, str, sizeof(str));

   perror("Write:"); //Very crude error check

   read(server_to_client,str,sizeof(str));

   perror("Read:"); // Very crude error check

   printf("From  server: %s\n",str);
}
   close(client_to_server);
   close(server_to_client);

   /* remove the FIFO */

   return 0;
} 
```

示例输出：

**客户**：

```
> hello, server!
Write:: Success
Read:: Illegal seek
From  server: hello,
Write:: Illegal seek
Read:: Illegal seek
> From  server: server!
> its client here!
Write:: Illegal seek
Read:: Illegal seek
From  server: its
Write:: Illegal seek
Read:: Illegal seek
> From  server: client
Write:: Illegal seek
Read:: Illegal seek
> From  server: here!
> > hello, server!
// and so on ... 
```

**服务器**：

```
Server ON.
Received: hello,
Sending back...
Received: server!
Sending back...
Received: its
Sending back...
Received: client
Sending back...
Received: here!
Sending back...
Received: >
Sending back...
Received: hello,
Sending back...
Received: server!
Sending back...
Received: Write::
Sending back...
Received: Success
Sending back...
Received: Read::
Sending back...
Received: Illegal
Sending back...
Received: seek
Sending back...
Received: From
Sending back...
Received: server:
Sending back...
Received: hello,
Sending back...
Received: Write::
Sending back...
Received: Illegal
Sending back...
Received: seek
Sending back...
Received: Read::
Sending back...
Received: Illegal
Sending back...
Received: seek
Sending back...
Received: >
Sending back...
Received: From
Sending back...
Received: server:
Sending back...
Received: server!
Sending back...
Received: >
Sending back...
Received: its
Sending back...
Received: client
Sending back...
Received: here!
Sending back...
Received: Write::
Sending back...
Received: Illegal
Sending back...
Received: seek
Sending back...
Received: Read::
Sending back...
Received: Illegal
Sending back...
Received: seek
Sending back...
Received: From
Sending back...
Received: server:
Sending back...
Received: its
Sending back...
Received: Write::
Sending back...
Received: Illegal
Sending back...
Received: seek
Sending back...
Received: Read::
Sending back...
Received: Illegal
Sending back...
Received: seek
Sending back...
Received: >
Sending back...
Received: From
Sending back...
Received: server:
Sending back...
Received: client
Sending back...
Received: Write::
Sending back...
Received: Illegal
Sending back...
Received: seek
Sending back...
Received: Read::
Sending back...
Received: Illegal
Sending back...
Received: seek
Sending back...
Received: >
Sending back...
Received: From
Sending back...
Received: server:
Sending back...
Received: here!
Sending back...
Received: >
Sending back... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T14:52:59.810

`perror`如果没有错误，请不要调用。

您需要在调用之前检查上一个函数调用是否失败，`perror`否则在没有实际发生错误时您将收到无意义的错误消息。`errno`如果函数没有失败，则函数（通常）不需要设置为任何特定的值。

# emacs - 每个文件上的 CEDET 错误：空闲解析错误：“# - 参数数量错误

> ID：13670365
> 
> 赞同：0
> 
> 时间：2012-12-02T14:47:47.450
> 
> 标签：emacs, cedet

我正在尝试将 CEDET（从 bzr 结帐）与 emacs 24.2 一起使用，但每次我尝试打开缓冲区（包括我的 .emacs 文件）时，都会收到错误消息：

```
Idle Parse Error: "#<buffer .emacs> - Wrong number of arguments: #[(old new when) \"\\303    \\304#\\210\\303\\305#\\210\\303\\306\\307#\\210\\303\\310#\\207\" 
[old new when put overload-obsoleted-by overload-obsoleted-since mode-local-overload t overload-obsolete] 4 (\"/home/sebas/.emacs.d/cedet/lisp/cedet/mode-local.elc\" . 14156)], 2" 
```

如果我运行 semantic-debug-idle-function 它什么也不返回（或者我不知道如何使用它）。我还能怎么调试这个？配置文件实际上与 Alex Ott 中的相同，语义默认子模式中唯一的“空闲”模式是 'global-semantic-idle-scheduler-mode。

我真的很想使用 CEDET，因为我记得它非常棒。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T15:23:51.430

你有一些来自本地模式的旧宏。请确保

*   您已经正确编译了 CEDET，这意味着您确实运行了“make”并且它成功完成了

*   您还没有通过系统的包管理器安装 CEDET

*   您正在初始化文件的开头加载 CEDET

如果所有这些都没有帮助，请将您的问题连同您正在使用的 init 文件一起发布到 CEDET-devel 邮件列表。

# c# - 使用边框移动文本框

> ID：13670371
> 
> 赞同：0
> 
> 时间：2012-12-02T14:48:52.107
> 
> 标签：c#, wpf, textbox

我正在使用 WPF 和 Visual Studio 制作一个 C# 项目。

我一直试图`TextBox`在运行时在画布上拖动/移动。

我的想法是，如果你让边框厚度足够大，你可以使用边框进行某种焦点，然后`EventHandler`为边框制作一个？

```
private Canvas DrawBox(ClassBox box)
{
    Canvas myCV = new Canvas();
    TextBox box1 = new TextBox();
    box1.Background = new SolidColorBrush(Colors.Blue);
    box1.BorderThickness = new System.Windows.Thickness(5);
    box1.Foreground = new SolidColorBrush(Colors.White);
    box1.MinWidth = 30;

    box1.TextWrapping = TextWrapping.Wrap;
    box1.AcceptsReturn = true;

    myCV.Children.Add(box1);
    Canvas.SetLeft(box1, box.Left);
    Canvas.SetRight(box1, box.Right);
    Canvas.SetTop(box1, box.Top);

    return myCV;

} 
```

# ios - 如何将多个客户端与非平台特定的云数据库同步

> ID：13670372
> 
> 赞同：1
> 
> 时间：2012-12-02T14:48:54.630
> 
> 标签：ios, sql-server, database, synchronization, sync

我确信我们的场景并不是独一无二的，但随着 iOS、Android、Windows Phone 等不同平台的兴起，当然还有 Windows、Mac 等。可能会有不同的客户端共享相同的数据。我们的云数据库是 SQL Server 2008 R2，我们正在为多个设备构建一个应用程序。即使只是在 iOS 上，我们仍然有一个用户使用多个设备（iPhone 和 iPad）。

我们需要构建一个同步系统，以便单个用户可以使 Device1、Device2 和 Cloud (SQL Server) 保持同步。任何人都可以建议一个系统来解决这个问题吗？我只能想象我们必须获取 UniqueID（GUID）和行版本（和/或 LastUpdatedUtc 时间戳）的列表并将列表传递给云，与云的数据进行比较，然后应用更新，返回该设备所需的更改，并为每个设备执行此操作。这是处理这个问题的正确方法吗？那么如何构建这样一个性能良好的系统呢？

我对构建同步系统的任何建议持开放态度，同样适用于一个用户、多个设备（云、设备 1、设备 2）的场景。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:22:28.817

看看[同步框架工具包](http://code.msdn.microsoft.com/wpapps/Sync-Framework-Toolkit-4dc10f0e)

你应该在那里找到 WP、iPhone、HTML5 等的样本......

# java - Android - SPAN_EXCLUSIVE_EXCLUSIVE 跨度的长度不能为零

> ID：13670374
> 
> 赞同：204
> 
> 时间：2012-12-02T14:49:25.053
> 
> 标签：java, android

我有以下布局（实际上是空的）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/set_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:contentDescription="content desc"
    android:orientation="vertical" >

    <TextView android:id="@+id/text"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text="Hello, I am a TextView" />
</LinearLayout> 
```

Activity 类包含以下内容：

```
public class TestActivity extends Activity {
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_test);   
  }
} 
```

当我在移动设备上运行它时，出现以下错误：

```
SpannableStringBuilder
SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length 
```

我已经尝试过使用和不使用 TextView 并且错误仍然存​​在，我必须做一些根本错误的事情才能导致这种基本布局。

有没有人知道我如何才能在没有错误的情况下加载它？

* * *

## 回答 #1

> 赞同：248
> 
> 时间：2012-12-21T07:48:49.367

我在 LogCat 中遇到了相同的错误条目。就我而言，这是由我正在使用的第 3 方键盘引起的。当我将其更改回 Android 键盘时，错误条目不再显示。

* * *

## 回答 #2

> 赞同：118
> 
> 时间：2013-05-06T12:00:06.637

因为您收到的错误与 无关**，**`EditText`所以它与您的键盘无关**。**

您遇到的错误不是您的代码造成的；您可能正在具有三星 TouchWiz 的三星设备上进行测试。

我遇到了同样的错误，然后我在 Nexus S 上进行了测试（也是三星的，但是没有 TouchWiz 的纯 Android 操作系统），我没有收到这个错误。

因此，在您的情况下，只需在设备上进行测试时忽略这些错误！:)

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2012-12-04T04:26:19.200

查看您的代码，我不确定您为什么会收到该错误，但我遇到了同样的错误，但使用了 EditText 字段。

将`android:inputType="text"`（或任何其他 inputType 文本变体）更改为`android:inputType="textNoSuggestions"`（或`android:inputType="textEmailAddress|textNoSuggestions"`，例如）为我修复了它。

你也可以在代码中设置这个，比如

```
mInputField.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS); 
```

看起来 Android 默认假设 EditText 字段会有建议。如果他们不这样做，它就会出错。对这个解释不是 100% 有信心，但上面提到的更改为我解决了这个问题。

[http://developer.android.com/reference/android/text/Spanned.html#SPAN_EXCLUSIVE_EXCLUSIVE](http://developer.android.com/reference/android/text/Spanned.html#SPAN_EXCLUSIVE_EXCLUSIVE)

希望这可以帮助！

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-08-12T19:37:42.053

在您的 android 手机上转到：
**设置 -> 应用程序管理器 -> 全部 -> 三星键盘，然后单击“清除缓存”**
（删除此应用程序收集的所有数据）。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-01-16T11:26:03.920

尝试使用默认的 Android 键盘它会消失

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-08-14T10:41:40.250

明确您在 MainAcitivity 中为以下方法 onCreateOptionsMenu 和 onCreate 传递了一个值

在某些情况下，开发者将“return super.onCreateOptionsMenu(menu)”语句删除，改为“return true”。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-07-22T14:19:48.930

> 这对我有用......在每台设备上

```
 <EditText
        android:maxLines="1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:textSize="15sp"
        android:layout_centerVertical="true"
        android:textColor="#000"
        android:id="@+id/input_search"
        android:background="@null"
        android:inputType="text"
        android:hint="Enter Address, City or Zip Code"
        android:imeOptions="actionSearch"
        /> 
```

在 Java 代码中：

```
mSearchText.setOnEditorActionListener(new TextView.OnEditorActionListener() {

        @Override
        public boolean onEditorAction(TextView textView, int actionId, KeyEvent keyEvent) {
            if(actionId == EditorInfo.IME_ACTION_SEARCH
                    || actionId == EditorInfo.IME_ACTION_DONE
                    || keyEvent.getAction() == KeyEvent.ACTION_DOWN
                    || keyEvent.getAction() == KeyEvent.KEYCODE_ENTER){

                //execute our method for searching
            }

            return false;
        }
    }); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-07-08T15:02:25.920

要尝试调试此错误，请首先转到您的 android 终端/控制台并执行以下命令：

```
ps | grep THE_ERROR_PID_YOU_GET_(IT_IS_A_NUMBER) 
```

那么如果输出作为您的应用程序出现......这是您的应用程序导致错误。尝试寻找`Strings`您传递到`layout`.

我遇到了同样的问题，这是我的错，因为我在`String`布局中传递了一个空白。更改`""`为此`" "`错误后消失了。

如果您没有从控制台输出中获取您的应用程序，那么是其他原因导致它（可能，正如其他人所说，android 键盘）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-15T18:27:04.707

我有同样的警告，发现删除未使用的@id 消除了警告。对我来说很明显，@id 与越来越多的链接到数据库的 textView 列表相关联，因此每个条目都有一个警告。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-02-02T16:36:46.340

Masood Moshref 是对的，出现这个错误是因为在 onCreate() 方法中缺少“return super.onCreateOptionsMenu(menu)”，Menu 的选项菜单没有做好准备。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-01-10T20:11:10.723

检查您在遇到此问题的屏幕中是否有任何元素，例如按钮或文本视图重复（复制两次）。我没有注意到这一点，不得不面对同样的问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-07-10T10:28:06.077

我遇到了同样的问题。我几乎浪费了将近几周的时间来解决这个问题。最后，我对自己产生了怀疑，并尝试通过复制和粘贴一些启动文件（如 SplashScreen 和 LoginScreen）来创建另一个项目。

但是使用相同的代码，我仍然得到**SPAN_EXCLUSIVE_EXCLUSIVE**。

然后我从初始屏幕中删除了处理程序代码并再次尝试并哇它的工作。我在**logcat中没有收到****SPAN_EXCLUSIVE_EXCLUSIVE**问题。

 **我想知道，为什么会这样？直到时间没有得到任何其他解决方案，但通过从启动屏幕中删除处理程序它正在工作。

如果已解决，请尝试在此处更新。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-03-29T01:09:08.413

我遇到了同样的问题，但是使用了 listView ......我解决了它，因为我使用了错误的 R.id.listView 列表 View 需要有一个值，在我的情况下，它是我保存在 listView2 上的字符串......所以正确的代码是 R.id.listView2

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-09-24T16:46:50.347

当我从互联网上复制一些文本时，我也遇到了这个问题。我的解决方案是在进行任何进一步处理之前修剪文本/删除格式。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-09-15T10:58:11.290

```
**DONT PUT SET TEXT IN TEXT WATCHER**etSearch.addTextChangedListener(object : TextWatcher {
        override fun afterTextChanged(s: Editable) {
            visibleResultList = false
            if (s.toString().length != 0) {
                getSearchSuggetion(no_of_rec, 0, s.toString())
            } else {
               // etSearch.setText("")
            }
            Log.e("text_change","============"+s.toString())
        }
        override fun beforeTextChanged(s: CharSequence, start: Int, count: Int, after: Int) {}
        override fun onTextChanged(s: CharSequence, start: Int, before: Int, count: Int) {
        }
    }) 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-08-24T17:00:57.847

**在我的情况下，输入类型为text / textCapCharacters**的 EditText 字段正在处理此错误。每当我使用退格键完全删除在任何这些字段中键入的文本时，我都会在我的 logcat 中注意到这一点。

对我有用的解决方案是将这些字段的 inputType 更改为**textNoSuggestions**因为这是最合适的类型并且不再给我任何不需要的错误。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-09-24T07:42:21.477

我遇到了同样的问题，然后我通过以下代码修复了它！

```
 text = (EditText)findViewById(R.id.TextVoiceeditText); 
  text.setInputType(InputType.TYPE_CLASS_TEXT|InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-06-06T13:16:36.017

尝试避免在 xml 设计中使用视图。我也有同样的问题，但是当我删除了视图时**。**它工作得很好。

例如：

```
 <EditText
                android:layout_width="match_parent"
                android:layout_height="wrap_content"                   
                android:hint="Username"
                android:inputType="number"                   
                android:textColor="#fff" />

            <view
                android:layout_width="match_parent"
                android:layout_height="1dp"
                android:background="#f9d7db" /> 
```

还检查并尝试通过反复试验将**android:inputType="number"**更改为**android:inputType="text"**或如果不需要，最好不要使用它。有时键盘卡住并在某些设备中出错。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-11-05T21:41:25.373

就我而言，我单击手机上最近的应用程序快捷方式并关闭所有应用程序。这个解决方案总是对我有用，因为这个错误与代码无关。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-04-28T10:09:41.507

由于 API URL 更改，也会发生此错误。如果它工作正常，请尝试点击您在邮递员和 c 中使用的 URL。重新检查 API 解决了我的问题

* * *

## 回答 #21

> 赞同：-4
> 
> 时间：2021-06-21T08:10:15.953

要解决此问题，只需在您的**AndroidManifest.xml文件中添加****android:usesCleartextTraffic="true"** ，该文件位于**..\app\src\main\AndroidManifest.xml**中，如下所示...

 ****[![在此处输入图像描述](../Images/efeaf33bc187f99d2a2a4020d77ee4a0.png)](https://i.stack.imgur.com/bXosQ.jpg)******

# php - 不小心重新加载页面应该保留输入字段的值 PHP

> ID：13670377
> 
> 赞同：0
> 
> 时间：2012-12-02T14:49:49.793
> 
> 标签：php, forms, session, cookies

我有一个 html 表单，当网站的访问者开始在输入字段（姓名、地址、邮件等）中输入时，他/她会填写例如

name: John Smith 并且比重新加载页面，它仍然需要填写 John Smith。

我必须使用带有会话的 php 来执行此操作，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T14:57:23.050

html5 本地存储，或者如果您必须对会话执行此操作，则必须在每次字段更改时启动大量 AJAX 请求。

这将是棘手的：如果您想保存每次“更改”的值，您将在每次击键时发送一个 AJAX 请求。时间同步将失败，您可能会在某些时候丢失一些字符。

我建议在特定时间间隔或更延迟的事件（例如输入控件失去焦点时）保存值，它们可以将值发送到服务器以保存在会话中。在页面生成时，使用会话对象在控件上加载值。

# android - 语音识别在几秒钟后停止收听

> ID：13670378
> 
> 赞同：44
> 
> 时间：2012-12-02T14:50:01.343
> 
> 标签：android, speech-recognition

我尝试了很多但找不到它，所以我希望你能帮助我。

我正在尝试构建自己的语音识别应用程序，但它不会显示对话框。

我已经写了一些代码，它工作得很好，但我的问题是识别器似乎停止了，LogCat 中没有任何错误或其他消息。

一个奇怪的事实是，“RecognitionListener”接口中的“onRmsChanged”仍然一直被调用，但不再调用“onBeginningOfSpeech”。

如果我在语音识别开始后说话，它就可以工作。但如果我等待几秒钟，它不会。

使用的 API 是 4.0.3，我将它安装在我的 Nexus 7 上，版本为 4.2.1

如果您有一些好主意，我将不胜感激。

一些代码片段：

我的课：

```
class SpeechListener implements RecognitionListener
{

    public void onBeginningOfSpeech() 
    {
        Log.d(TAG, "onBeginningOfSpeech()");            
    }

    public void onBufferReceived(byte[] buffer) 
    {
        Log.d(TAG, "onBufferReceived()");
    }

    public void onEndOfSpeech() 
    {
        Log.d(TAG, "onEndOfSpeech()");

    }

    public void onError(int error) 
    {
        Log.d(TAG, "onError(): " + error);

        if(error == SpeechRecognizer.ERROR_NO_MATCH)
        {

        }
        else if(error == SpeechRecognizer.ERROR_SPEECH_TIMEOUT)
        {

        }
        else
        {
            tvOutput.setText("Error: " + error);    
        }

    }

    public void onEvent(int eventType, Bundle params) 
    {
        Log.d(TAG, "onEvent()");
    }

    public void onPartialResults(Bundle partialResults) 
    {
        Log.d(TAG, "onPartialResults()");
    }

    public void onReadyForSpeech(Bundle params) 
    {
        Log.d(TAG, "onReadyForSpeech()");
    }

    public void onResults(Bundle results) 
    {
        Log.d(TAG, "onResults(): " + results);

        String str = new String();

        ArrayList<String> data = results.getStringArrayList(SpeechRecognizer.RESULTS_RECOGNITION);

        for(int i = 0; i < data.size(); i++)
        {
            str += data.get(i) + "\n";

        }           
        tvOutput.setText(tvOutput.getText().toString() + "\n\n" + "Results: " + str);           

    }
    public void onRmsChanged(float rmsdB) 
    {
        Log.d(TAG, "onRmsChanged()");
    }

} 
```

我在 MainActivity 中的实现：

```
 this.srSpeechRecognizer = SpeechRecognizer.createSpeechRecognizer(this);
    this.srSpeechRecognizer.setRecognitionListener(new SpeechListener());

    this.iSpeechIntent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
    this.iSpeechIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
    this.iSpeechIntent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE, "voice.recognition.test");      
    this.iSpeechIntent.putExtra(RecognizerIntent.EXTRA_MAX_RESULTS, 10); 
```

就这样开始了：

```
srSpeechRecognizer.startListening(iSpeechIntent); 
```

说话的日志：

```
 12-16 13:50:53.576: D/DreamManagerService(485): Dream finished:   android.os.Binder@415bbf38
    12-16 13:50:53.576: I/DreamManagerService(485): Leaving dreamland.
    12-16 13:50:53.576: I/DreamController(485): Stopping dream: name=ComponentInfo{com.google.android.deskclock/com.android.deskclock.Screensaver}, isTest=false, userId=0
    12-16 13:50:53.586: I/PowerManagerService(485): Waking up from dream...
    12-16 13:50:53.616: I/ActivityManager(485): No longer want com.google.android.gsf.login (pid 13171): empty #17
    12-16 13:50:56.796: I/GoogleRecognitionServiceImpl(1461): #startListening [de-DE]
    12-16 13:50:56.806: I/ActivityManager(485): Start proc com.google.android.gsf.login for service com.google.android.gsf.login/com.google.android.gsf.loginservice.GoogleLoginService: pid=13343 uid=10019 gids={50019, 3003, 1007, 1028, 1015, 2001, 3006}
    12-16 13:50:56.866: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:56.886: D/dalvikvm(1461): GC_FOR_ALLOC freed 516K, 12% free 8706K/9892K, paused 18ms, total 18ms
    12-16 13:50:56.906: D/dalvikvm(1461): GC_CONCURRENT freed 160K, 9% free 9015K/9892K, paused 3ms+2ms, total 21ms
    12-16 13:50:56.906: I/AudioService(485):  AudioFocus  requestAudioFocus() from android.media.AudioManager@4135e960com.google.android.speech.audio.AudioController$1@41261910
    12-16 13:50:56.916: I/VS.G3EngineManager(1461): create_rm: m=ENDPOINTER_VOICESEARCH,l=en-US
    12-16 13:50:56.916: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:56.916: I/VS.G3EngineManager(1461): Brought up new g3 instance :/system/usr/srec/en-US/endpointer_voicesearch.config for: en-USin: 3 ms
    12-16 13:50:56.926: I/ConnectionFactoryImpl(1461): Opening SSL connection: vs.google.com:14259
    12-16 13:50:56.966: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:57.016: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:57.066: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:57.116: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:57.166: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:57.216: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:57.266: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:57.316: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:57.366: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:57.416: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:57.466: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:57.516: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:57.566: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:57.616: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:57.666: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:57.716: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:57.766: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:57.816: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:57.866: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:57.916: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:57.966: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:58.016: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:58.066: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:58.116: I/MainActivity/SpeechListener(13268): onBeginningOfSpeech()
    12-16 13:50:58.126: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:58.176: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:58.226: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:58.276: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:58.326: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:58.376: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:58.426: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:58.476: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:58.526: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:58.576: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:58.626: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:58.676: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:58.726: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:58.776: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:58.826: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:58.876: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:58.926: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:58.976: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:59.026: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:59.076: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:59.126: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:59.176: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:59.236: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:59.286: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:59.336: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:59.386: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:59.436: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:59.486: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:59.536: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:59.586: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:59.636: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:59.646: I/MicrophoneInputStream(1461): mic_close
    12-16 13:50:59.666: I/AudioService(485):  AudioFocus  abandonAudioFocus() from         android.media.AudioManager@4135e960com.google.android.speech.audio.AudioController$1@41261910
    12-16 13:50:59.666: D/dalvikvm(1461): threadid=37: thread exiting, not yet detached (count=0)
    12-16 13:50:59.666: I/MainActivity/SpeechListener(13268): onEndOfSpeech()
    12-16 13:50:59.676: I/decoder(1461): INFO: recognition time wall: 2.732 sec user: 0.54 sec sys: 0.08 sec 
    12-16 13:50:59.686: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:59.736: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:59.786: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:59.826: I/MainActivity/SpeechListener(13268): onResults(): Bundle[mParcelledData.dataSize=292]
    12-16 13:50:59.836: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:59.886: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:59.936: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:50:59.986: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:51:00.046: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:51:00.096: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:51:00.146: D/MainActivity/SpeechListener(13268): onRmsChanged()
    12-16 13:51:00.196: D/MainActivity/SpeechListener(13268): onRmsChanged() 
```

不说话的日志：

```
 12-16 13:53:39.246: I/GoogleRecognitionServiceImpl(1461): #startListening [de-DE]
    12-16 13:53:39.296: D/dalvikvm(1461): GC_FOR_ALLOC freed 567K, 12% free 8708K/9892K, paused 21ms, total 21ms
    12-16 13:53:39.316: D/dalvikvm(1461): GC_CONCURRENT freed 164K, 9% free 9017K/9892K, paused 3ms+2ms, total 21ms
    12-16 13:53:39.316: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:39.316: I/AudioService(485):  AudioFocus  requestAudioFocus() from         android.media.AudioManager@4135e960com.google.android.speech.audio.AudioController$1@41261910
    12-16 13:53:39.326: I/VS.G3EngineManager(1461): create_rm: m=ENDPOINTER_VOICESEARCH,l=en-US
    12-16 13:53:39.326: I/ConnectionFactoryImpl(1461): Opening SSL connection: vs.google.com:14259
    12-16 13:53:39.326: I/VS.G3EngineManager(1461): Brought up new g3 instance :/system/usr/srec/en-US/endpointer_voicesearch.config for: en-USin: 5 ms
    12-16 13:53:39.366: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:39.416: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:39.466: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:39.516: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:39.576: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:39.626: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:39.676: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:39.726: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:39.776: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:39.826: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:39.876: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:39.926: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:39.976: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:40.026: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:40.076: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:40.136: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:40.176: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:40.226: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:40.286: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:40.336: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:40.386: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:40.436: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:40.486: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:40.536: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:40.586: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:40.636: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:40.686: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:40.736: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:40.786: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:40.836: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:40.886: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:40.936: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:40.986: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:41.046: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:41.096: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:41.146: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:41.196: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:41.246: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:41.296: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:41.346: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:41.396: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:41.446: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:41.496: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:41.546: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:41.596: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:41.646: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:41.696: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:41.746: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:41.796: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:41.846: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:41.896: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:41.946: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:41.996: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:42.046: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:42.096: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:42.146: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:42.196: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:42.246: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:42.296: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:42.356: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:42.406: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:42.456: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:42.506: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:42.556: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:42.606: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:42.656: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:42.706: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:42.756: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:42.806: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:42.856: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:42.906: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:42.956: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:43.006: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:43.056: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:43.116: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:43.156: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:43.216: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:43.266: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:43.316: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:43.366: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:43.416: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:43.466: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:43.516: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:43.566: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:43.616: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:43.666: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:43.716: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:43.766: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:43.816: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:43.866: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:43.916: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:43.966: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:44.016: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:44.066: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:44.116: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:44.166: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:44.226: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:44.276: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:44.326: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:44.376: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:44.426: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:44.476: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:44.526: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:44.576: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:44.626: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:44.676: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:44.726: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:44.776: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:44.826: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:44.876: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:44.926: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:44.976: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:45.026: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:45.076: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:45.126: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:45.176: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:45.226: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:45.276: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:45.326: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:45.376: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:45.426: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:45.476: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:45.526: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:45.576: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:45.636: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:45.676: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:45.736: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:45.786: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:45.836: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:45.886: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:45.936: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:45.986: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:46.036: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:46.086: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:46.136: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:46.186: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:46.236: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:46.286: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:46.336: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:46.386: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:46.436: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:46.486: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:46.536: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:46.596: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:46.636: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:46.696: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:46.746: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:46.796: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:46.846: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:46.896: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:46.946: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:46.996: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:47.046: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:47.096: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:47.146: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:47.196: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:47.246: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:47.296: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:47.346: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:47.396: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:47.446: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:47.496: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:47.556: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:47.596: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:47.656: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:47.696: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:47.746: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:47.796: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:47.856: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:47.906: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:47.956: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:48.006: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:48.056: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:48.106: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:48.156: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:48.206: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:48.256: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:48.306: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:48.356: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:48.406: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:48.456: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:48.506: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:48.556: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:48.616: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:48.656: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:48.706: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:48.766: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:48.816: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:48.866: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:48.916: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:48.966: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:49.016: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:49.066: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:49.116: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:49.166: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:49.216: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:49.266: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:49.316: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:49.366: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:49.416: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:49.466: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:49.516: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:49.566: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:49.616: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:49.666: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:49.716: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:49.776: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:49.816: D/dalvikvm(1461): GC_FOR_ALLOC freed 106K, 9% free 9025K/9892K,         paused 32ms, total 32ms
    12-16 13:53:49.816: I/dalvikvm-heap(1461): Grow heap (frag case) to 9.282MB for 320656-byte allocation
    12-16 13:53:49.836: D/dalvikvm(1461): GC_FOR_ALLOC freed 156K, 11% free 9182K/10208K, paused 19ms, total 19ms
    12-16 13:53:49.836: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:49.886: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:49.936: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:49.986: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:50.036: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:50.086: D/MainActivity/SpeechListener(13441): onRmsChanged()
    12-16 13:53:50.136: D/MainActivity/SpeechListener(13441): onRmsChanged() 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-08T20:59:37.383

可以肯定解决此问题的唯一解决方案是使用 3rd 方服务。 **4.1.1 和 4.2 都**依赖于语音识别服务的版本，该版本不遵守记录在案的行为，因为运行它的服务会默默地死掉。

如果您不希望使用 3rd 方 API，并且您需要以某种方式解决此服务死亡问题，这*是*可能的，但它并不漂亮或不理想。

一旦服务终止，将不会调用以下任何方法：

*   onBeginningOfSpeech
*   错误
*   关于结果
*   onEndOfSpeech

*但是*如果在服务终止之前调用了 onBeginningOfSpeech，您可以确定最终会调用 onError 或 onEndOfSpeech。

因此，**如果您只想确保了解 Jellybean 中服务的生死，**内置 SpeechRecognizer 中此问题的解决方法是执行以下操作：

*   创建一个类似于 isSpeechRecognizerAlive 的布尔标志。
*   每次启动 SpeechRecognizer 时，将上述标志设置为 false。
*   在 onBeginningOfSpeech 中，如果被调用，则将 isSpeechRecognizerAlive 设置为 true。
*   维护一个 Handler，它会在 4 秒延迟后检查 isSpeechRecognizerAlive 的状态。如果为 false，则手动终止 SpeechRecognizer 实例。如果是真的，什么也不做。正常流程会为您处理好事情。

**为什么这不是维持连续语音识别设置的理想解决方案**

您的问题中没有直接说明，但有些人想要这样做，以便他们可以进行连续的语音识别。 *这在 4.1.1 和 4.2 中并不是一个真正的好方法，*因为 Google 的 SpeechRecognition 服务现在以非可选的“bloop”声音效果开始。似乎没有办法关闭此声音。API 中没有列出任何东西来控制它。您的用户不会喜欢在 4 秒的重复循环中被“吹嘘”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-27T15:48:00.427

我制作了一个带有音频到语音识别器的服务，它通过每次出现错误或结果时重新启动来模拟连续性。如您所见，我的服务侦听广播接收器以启动/停止连续 ASR（它的电池成本很高，因此我建议您仅在相关 UI 处于前台时才运行此连续 ASR 服务）。ASR 的结果也会广播到应用程序的其余部分。您可以忽略广播，服务和识别器侦听器是主要思想。不要忘记 INTERNET 权限和清单，以及服务声明：

```
<service android:name=".speechRecognitionService" /> 
```

语音识别服务：

```
 /**
     * Created by Josh on 22/07/15.
     *  This service bears an Audio to Speech recognizer (ASR), once this service is started,
     *  it listens a broadcast called "asrService".
     *  the Service starts ASR when it receives a "START-ASR" value inside the "message" parameter of its broadcast receiver
     *  the Service stopss ASR when it receives a  "STOP-ASR" value inside the "message" parameter of its broadcast receiver
     Example:
     Intent intent = new Intent("asrService");
     intent.putExtra("message", "STOP-ASR");
     LocalBroadcastManager.getInstance(context).sendBroadcast(intent);
     Once the ASR Listener that this service bears is running, it will broadcast the results is gets.
     To catch ASR results, implement a Broadcast receiver that listens to app.asrResult="ASRresult", for example:

     private BroadcastReceiver ASRReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String message = intent.getStringExtra("message");
            if(message!=null) {
                app.logwhite("ASR says: "+message);
            }
        }
    };
     LocalBroadcastManager.getInstance(this).registerReceiver(ASRReceiver, new IntentFilter(app.asrResult));

     Unregister the broadcast receiver likewise:
     LocalBroadcastManager.getInstance(this).unregisterReceiver(ASRReceiver);
     */

    public class speechRecognitionService extends Service {

        private static speechRecognitionListenerJosh speechReconListener;
        private static SpeechRecognizer mSpeechRecognizer=null;
        private static Intent mSpeechRecognizerIntent;
        private static boolean mIslistening=false;

        //======== BROADCAST RECEIVERS
        // handler for received Intents for the "my-event" event
        private BroadcastReceiver startASRReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                String message = intent.getStringExtra("message");
                if(message.equals("START-ASR")) {
                    if (mIslistening == false) {

                        if (mSpeechRecognizer != null) {
                            mSpeechRecognizer.destroy();
                            mSpeechRecognizer = null;
                        }
                        app.logy("==BROADCAST Rx: START_ASR");

                        mSpeechRecognizerIntent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
                        mSpeechRecognizerIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_PREFERENCE, "en-US");
                        mSpeechRecognizerIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
                        //mSpeechRecognizerIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_WEB_SEARCH);
                        //mSpeechRecognizerIntent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE ,   this.getPackageName());
                        mSpeechRecognizerIntent.putExtra(RecognizerIntent.EXTRA_SPEECH_INPUT_COMPLETE_SILENCE_LENGTH_MILLIS, 5000);
                        mSpeechRecognizerIntent.putExtra(RecognizerIntent.EXTRA_SPEECH_INPUT_MINIMUM_LENGTH_MILLIS, 5000);
                        //mSpeechRecognizerIntent.putExtra(RecognizerIntent.EXTRA_PARTIAL_RESULTS, true);
                        //mSpeechRecognizerIntent.putExtra(RecognizerIntent.EXTRA_MAX_RESULTS, 3);

                        mSpeechRecognizer = SpeechRecognizer.createSpeechRecognizer(getApplicationContext());
                        speechReconListener = new speechRecognitionListenerJosh();
                        mSpeechRecognizer.setRecognitionListener(speechReconListener);

                        mSpeechRecognizer.startListening(mSpeechRecognizerIntent);
                    } else {
                        app.logy("==BROADCAST Rx: STOP_ASR");
                        mSpeechRecognizer.stopListening();
                        mSpeechRecognizer.destroy();
                        speechReconListener = null;
                    }
                }

                if(message.equals("STOP-ASR")){
                    app.logy("==BROADCAST Rx: STOP_ASR");
                    mSpeechRecognizer.stopListening();
                    mSpeechRecognizer.destroy();
                    speechReconListener = null;
                }
            }
        };

        @Override
        public void onCreate() {
            super.onCreate();

            mSpeechRecognizerIntent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
            mSpeechRecognizerIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_PREFERENCE, "en-US");
            mSpeechRecognizerIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL  ,   RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
            //mSpeechRecognizerIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_WEB_SEARCH);
            mSpeechRecognizerIntent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE ,   this.getPackageName());
            mSpeechRecognizerIntent.putExtra(RecognizerIntent.EXTRA_SPEECH_INPUT_MINIMUM_LENGTH_MILLIS, 4000);
            mSpeechRecognizerIntent.putExtra(RecognizerIntent.EXTRA_MAX_RESULTS, 3);
            mSpeechRecognizer = SpeechRecognizer.createSpeechRecognizer(this);
            speechReconListener = new speechRecognitionListenerJosh();
            mSpeechRecognizer.setRecognitionListener(speechReconListener);

            LocalBroadcastManager.getInstance(this).registerReceiver(startASRReceiver, new IntentFilter("asrService"));
            app.toastlog("==ASR Service - CREATED");
        }

        @Override
        public void onDestroy() {
            super.onDestroy();
            LocalBroadcastManager.getInstance(this).unregisterReceiver(startASRReceiver);

            if (mSpeechRecognizer != null){
                mSpeechRecognizer.destroy();
                mSpeechRecognizer=null;
            }
            app.toastlog("==ASR Service - DESTROYED");
        }

        @Override
        public IBinder onBind(Intent intent) {
            return null;
        }

        @Override //rather not use, runs before onStart
        public int onStartCommand(Intent intent, int flags, int startId) {
            return super.onStartCommand(intent, flags, startId);
        }

        @Override
        public void onStart(Intent intent, int startId) {
            super.onStart(intent, startId);
            app.toastlog("==ASRservice - onStart");
        }

        private class speechRecognitionListenerJosh  implements RecognitionListener {

            @Override
            public void onBeginningOfSpeech() {
                mIslistening=true;
                app.loge("=ASRListener - onBeginingOfSpeech");
            }

            @Override
            public void onBufferReceived(byte[] buffer){

            }

            @Override
            public void onEndOfSpeech(){
                app.loge("=ASRListener - onEndOfSpeech");
            }

            @Override
            public void onError(int error) {
                mIslistening=false;
                String code= Integer.toString(error);

                if(error==SpeechRecognizer.ERROR_CLIENT){ // 5
                    code="ERROR_CLIENT";
                    mIslistening=false;
                    mSpeechRecognizer.destroy();
                    Intent intent = new Intent("asrService");
                    intent.putExtra("message", "START-ASR");
                    LocalBroadcastManager.getInstance(app.appContext).sendBroadcast(intent);
                }

                if(error==SpeechRecognizer.ERROR_SPEECH_TIMEOUT){ // 6
                    code="SPEECH_TIMEOUT";
                    mSpeechRecognizer.stopListening();
                    mIslistening=false;
                    Intent intent = new Intent("asrService");
                    intent.putExtra("message", "START-ASR");
                    LocalBroadcastManager.getInstance(app.appContext).sendBroadcast(intent);
                    //Usualy bounces back to ERROR_CLIENT.
                }
                if(error==SpeechRecognizer.ERROR_NO_MATCH){ // 7
                    code="ERROR_NO_MATCH";
                    mIslistening=false;
                    Intent intent = new Intent("asrService");
                    intent.putExtra("message", "START-ASR");
                    LocalBroadcastManager.getInstance(app.appContext).sendBroadcast(intent);
                    //Usually bounces back to ERROR_CLIENT.
                }

                app.loge("=ASRListener - ASR Error: "+code);
                /*
                // 1 = NETWORK_TIMEOUT
                // 2 = ERROR_NETWORK
                // 3 = ERROR_AUDIO
                // 4 = ERROR_SERVER
                // 5 = ERROR_CLIENT
                // 8 = ERROR_RECOGNIZER_BUSY
                // 9 = ERROR_INSUFFICIENT_PERMISSIONS
                */

            }

            @Override
            public void onEvent(int eventType, Bundle params){

            }

            @Override //Somehow doesn't trigger upon partial results
            public void onPartialResults(Bundle partialResults){
                ArrayList<String> results=partialResults.getStringArrayList("EXTRA_PARTIAL_RECOGNITION");
                if(results!=null) {
                    if (results.size() > 0) {
                        app.logwhite("=== ASR Partial Results: " + results);
                    }
                }
            }

            @Override
            public void onReadyForSpeech(Bundle params){
                app.loge("=ASRListener - onReadyForSpeech, LISTENING  (((( ");
            }

            @Override
            public void onResults(Bundle resultBundle){
                app.loge("=ASRListener - onResults");
                ArrayList<String> result = resultBundle.getStringArrayList(SpeechRecognizer.RESULTS_RECOGNITION);
                if(result!=null) {  //when speaking timeout happen, results is null

                    // matches are the return values of speech recognition engine

                    if (result.size() > 0) {
                        app.logwhite("=== ASR Results:");
                        app.logwhite(result.get(0));
                        //BC name, message
                        app.broadcast(app.asrResult,result.get(0)); //The result is broadcast to the entire app
                    }

                }

                mIslistening=false;
                Intent intent = new Intent("asrService");
                intent.putExtra("message", "START-ASR");
                LocalBroadcastManager.getInstance(app.appContext).sendBroadcast(intent);
            }

            @Override
            public void onRmsChanged(float rmsdB){
                //VOLUME VUmeter!!!!
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T23:16:42.423

您可以尝试提供以下[RecognizerIntent](https://developer.android.com/reference/android/speech/RecognizerIntent.html)附加功能：

*   `EXTRA_SPEECH_INPUT_COMPLETE_SILENCE_LENGTH_MILLIS`
*   `EXTRA_SPEECH_INPUT_MINIMUM_LENGTH_MILLIS`
*   `EXTRA_SPEECH_INPUT_POSSIBLY_COMPLETE_SILENCE_LENGTH_MILLIS`

尽管它们都不适合这种情况。Android 根本不提供“ `WAIT_UNTIL_I_START_SPEAKING`”额外功能。这不是一个错误（在 Jelly Bean 或任何地方），它只是缺少一个功能。即使在未来的 Android 版本中添加了这样的额外功能，也可能无法保证语音识别应用程序（例如 Google 语音搜索）确实实现了这一点。[RecognizerIntent](https://developer.android.com/reference/android/speech/RecognizerIntent.html)文档包含大量具有未指定行为的附加内容。

您最好的选择可能是在获得`onEndOfSpeech`或后立即重新启动识别器`onError`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-02T12:55:59.353

我有一段时间面临同样的问题，但在任何地方都找不到正确的工作答案。为了使聆听无限发生，请在重新实例化 SpeechRecognizer 并重新设置意图对象后再次调用post`onError()`或我。`onResults()``speechRecognizer.startListening(intent);`

但正如你提到的，它最终会在听了一段时间后消失。

这是我尝试过的，它对我有用。

我只是确保在回忆之前`speechRecognizer.startListening(intent);`我会打电话

```
speechRecognizer.stopListening();
speechRecognizer.destroy(); 
```

并着手做第一段中提到的事情。

到目前为止，它对我来说一直很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-06T17:05:51.660

我在使用 Node.js 库时遇到了同样的问题，这是我提交的问题以及团队的回复。 [https://github.com/googleapis/nodejs-speech/issues/667](https://github.com/googleapis/nodejs-speech/issues/667)

TLDR；设置您的配置如下（注意使用增强模型）

```
 const config = {
        encoding: "LINEAR16",
        sampleRateHertz: 16000,
        languageCode: "en-US",
        metadata: recognitionMetadata,
        model: 'phone_call',
        useEnhanced: true} 
```

您将得到的输出如下 - 注意替代方案，在我看来这有点误导性的措辞，但哦，好吧：

```
[{"results":[{"alternatives":[{"words":[],"transcript":"I live in Boston","confidence":0.9128385782241821}],"channelTag":0,"languageCode":"en-us"},{"alternatives":[{"words":[],"transcript":" Boston is an amazing City","confidence":0.9128385186195374}], 
```

# ios6 - 如何使用 iOS 自动布局重新排列视图

> ID：13670383
> 
> 赞同：2
> 
> 时间：2012-12-02T14:50:55.417
> 
> 标签：ios6, xcode4.5, autolayout

我正试图围绕自动布局。我想我大部分都得到了它（可能遗漏了一些东西），但是我将如何设置下图所示的视图？

如果没有自动布局，我只会测试方向，然后重新设置蓝色和紫色视图的框架（可能还有白色视图）。在自动布局中，我还不确定如何解决这个问题。我是否需要删除和替换约束，以便在纵向这些视图之间的顶部/底部约束中，我将在横向中在它们之间有前导/尾随？还是比这更容易？

![在此处输入图像描述](../Images/606c58a651876f5eba1f4ac6c83d4b9c.png) ![在此处输入图像描述](../Images/86d1fd474bd0f4998e7cb042913abd42.png)

# matlab - mex -setup 在编译期间似乎已完成，但出现错误“未安装编译器”

> ID：13670388
> 
> 赞同：2
> 
> 时间：2012-12-02T14:51:16.440
> 
> 标签：matlab, installation

我在 W7 64 位机器上使用 Matlab 2012a。现在不太记得了，我装东西的时候是半年前，所以现在只能根据安装日期猜测顺序。

现在我有 Matlab、Matlab 编译器运行时、MS Windows SDK 7.1 和 .NET Framework 4 以及许多其他可能不必要的程序（我发现了例如 MS Visual C++ 2008 标准编译器）。最近我尝试了[此处](http://www.mathworks.com/support/solutions/en/data/1-IB1G3Q/)所述的程序，但没有效果。我还没有重新安装任何东西。

如有必要，我可能会附上带有安装日期的程序列表。问题如下 - 即使我已经完成了 mex -setup（它似乎成功了，它显示了 SDK 7.1 的正确路径并接受它），在 simulink 中编译模型时，我收到一个错误“安装的编译器是没有检测到”。我想知道我现在该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:06:31.990

很多人在 Windows 7 上遇到这个问题，虽然 Mathworks 已经发布了解决方案，但我花了几天时间尝试并重新尝试，但无济于事。

作为解决方法，将 Matlab 重新安装为 32 位。它带有一个内置编译器，而且 Mex 似乎开箱即用。不太理想，但它有效。

# mysql - Mysql 查询以获取逗号分隔的 ids 数据的详细信息

> ID：13670394
> 
> 赞同：2
> 
> 时间：2012-12-02T14:52:06.160
> 
> 标签：mysql

我有 2 个表格、项目和成员：

```
CREATE TABLE IF NOT EXISTS `items` (
`id` int(5) NOT NULL AUTO_INCREMENT,
`name` varchar(255) NOT NULL,
`member` varchar(255) NOT NULL,
PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE IF NOT EXISTS `members` (
  `id` int(5) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

例如，如果我在里面有一条记录`items`，例如

```
INSERT INTO  `test`.`items` (
`id` ,
`name` ,
`member`
)
VALUES (
NULL ,  'xxxx',  '1, 2, 3'
); 
```

在`members`：

```
INSERT INTO `members` (`id`, `name`) VALUES
(1, 'asdf'),
(2, 'qwert'),
(3, 'uiop'),
(4, 'jkl;'); 
```

我想用类似的东西来显示`items.member`数据？？`members.name``1#asdf, 2#qwert, 3#uiop`

我试过以下查询，

```
SELECT items.id, items.name, GROUP_CONCAT(CONCAT_WS('#', members.id, members.name) ) as member

FROM `items` 
LEFT JOIN members AS members on (members.id = items.member)
WHERE items.id = 1 
```

但结果并不像我预期的那样。还有其他方法可以通过一个调用查询显示数据吗？因为我使用的是PHP，所以现在我正在分解`items.member`并一一循环，以显示`members.name`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T15:03:21.247

您可以考虑[`FIND_IN_SET()`](http://dev.mysql.com/doc/en/string-functions.html#function_find-in-set)在您的加入条件中使用：

```
FROM items JOIN members ON FIND_IN_SET(members.id, items.member) 
```

但是，请注意 的定义`FIND_IN_SET()`：

> 字符串列表是由“<code>”字符分隔的子字符串组成的字符串。

因此，该`items.member`列不应包含任何空格（我想您可以使用`FIND_IN_SET(members.id, REPLACE(items.member, ' ', ''))`- 但随着数据库的增长，这将非常昂贵）。

确实，您*应该* [规范化](http://en.wikipedia.org/wiki/Database_normalization)您的架构：

```
CREATE TABLE memberItems (
  item_id   INT(5) NOT NULL,
  member_id INT(5) NOT NULL,
  FOREIGN KEY   item_id REFERENCES   items (id),
  FOREIGN KEY member_id REFERENCES members (id)
);

INSERT INTO memberItems
  (item_id, member_id)
SELECT items.id, members.id
FROM   items
  JOIN members ON FIND_IN_SET(members.id, REPLACE(items.member,' ',''))
;

ALTER TABLE items DROP member; 
```

这既是索引友好的（因此可以非常有效地查询）并且让数据库强制执行引用完整性。然后你可以这样做：

```
FROM items JOIN memberItems ON memberItems.item_id = items.id
           JOIN members     ON members.id = memberItems.member_id 
```

另请注意，`GROUP_CONCAT()`以这种方式将单独的记录组合成一个字符串通常是不明智的：您的应用程序应该准备好循环遍历结果集以获取每个成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:13:27.073

请看一下这个样本：

[SQLFIDDLE](http://www.sqlfiddle.com/#!2/99ce5/1)

您的查询似乎适用于您在问题中提到的内容...... :)

```
SELECT I.ID, I.ITEM,
GROUP_CONCAT(CONCAT("#",M.ID,
M.NAME, " ")) AS MEMB

FROM ITEMS AS I
LEFT JOIN MEMBERS AS M
ON M.ID = I.MID
WHERE i.id = 1
; 
```

**已编辑的答案** 此查询对您不起作用，因为您的架构似乎没有任何完整性......或正确的引用。另外，您的会员 ID 用逗号分隔，在这个答案中被忽略了。

# javascript - 绕过转换并立即更改属性

> ID：13670397
> 
> 赞同：25
> 
> 时间：2012-12-02T14:52:36.280
> 
> 标签：javascript, jquery, css

我想绕过 CSS 转换并立即更改属性。
我尝试设置`transition-duration`为`0s`更改之前，然后设置`transition-duration`回其原始值：

```
$('div').css('width', '200px').delay(1000).queue(function() {
    $(this).css({
        transitionDuration: '0s',
        msTransitionDuration: '0s',
        mozTransitionDuration: '0s',
        webkitTransitionDuration: '0s',
        oTransitionDuration:'0s'
    }).css('width', '10px').css({
        transitionDuration: '2s',
        msTransitionDuration: '2s',
        mozTransitionDuration: '2s',
        webkitTransitionDuration: '2s',
        oTransitionDuration:'2s'
    })
})​ 
```

[小提琴](http://jsfiddle.net/6cTeY/)
这显然行不通。

我知道[规范](http://www.w3.org/TR/css3-transitions/#starting)没有为此定义该行为：

> 由于本规范没有定义计算值何时更改，因此计算值的哪些更改被认为是同时发生的，因此作者应该意识到，在进行可能转换的更改后的一小段时间内更改任何转换属性可能会导致行为不同的实现之间有所不同，因为在某些实现中可能会同时考虑更改，而在其他实现中则不会。

是否有捷径可寻？

**注意：**我正在更改的属性`transform`因此`.animate()`不是一个选项。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-02T15:33:27.970

由于没有其他人发布有效答案，因此如下：

```
$('div').css('width', '200px').delay(1000).queue(function() {
    $(this).css({transition: '0s', width: '10px'}).delay(1).queue(function() {
        $(this).css({transition:'2s'});
    });
},1000)​; 
```

[**小提琴**](http://jsfiddle.net/6cTeY/6/)

或者，如果是另一种方式：

```
$('div').css({
    transition: '0s'
  }).css('width', '200px').delay(1000).queue(function() {
      $(this).css({width: '10px', transition: '2s'});
}); 
```

[**小提琴**](http://jsfiddle.net/6cTeY/8/)

如今，jQuery 应该规范供应商前缀，因此您不必自己输入所有前缀。

* * *

这里的问题是 jQuery 一次附加所有样式，只保留最后一个样式，覆盖相同 CSS 属性的先前样式而不重新绘制 DOM，并且使用本机 javascript 进行测试似乎也在做同样的事情，所以它可能是浏览器试图通过添加一个样式来避免不必要的重排，只是为了让它在下一行代码中改变，这样做：

```
$('div').css({
    transition: '0s',
    width: 200
}).css({
    transition: '3s',
    width: 10
}); 
```

将不起作用，因为仅添加了最后一个样式。

这就是`delay()`发挥作用的地方，OP的问题已经在使用`delay()`，所以没有理由不使用它，但是删除`delay()`当然会导致上述问题，浏览器不会绘制第一种样式，而只会绘制最后一种样式等。

由于`delay()`实际上只是一个花哨的超时，它有效地推迟了样式的第二个设置的执行，导致两次浏览器重绘。

由于这很可能是浏览器问题，而不是我们可以更改的问题，因此延迟设置第二种样式是使其工作的唯一方法，即使设置为 1 毫秒或 1 毫秒，使用延迟仍然有效可以通过定期超时推迟执行，这是推迟脚本执行的常用方法：

```
$('div').css({
    transition: '0s',
    width: 200
});

setTimeout(function() {
    $('div').css({
        transition: '3s',
        width: 10
    });
}); 
```

[**小提琴**](http://jsfiddle.net/6cTeY/10/)

以上就可以正常工作了，因为超时导致样式的第一个设置被浏览器绘制，并将超时内的样式设置推迟到以后的时间，但是由于没有设置时间，它会尽快执行因为浏览器可以（但仍然推迟到当前脚本完成之后），这对于人眼来说似乎是立即的，这就解决了问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-26T17:09:29.510

## 如果您可以控制 CSS

最简单的做法是将动画绑定到某个类，然后在您希望动画不再被绕过的时候，添加该类，否则永远不会设置动画。如果反了，一般是想要动画，偶尔也想绕过，那么就默认添加class，绕过的时候去掉。

**示例 CSS**

```
div{
    height: 100px;
    width: 200px;
    background: red;
}
div.doTransition {
    width: 10px;
    transition: width 2s linear;
    -ms-transition: width 2s linear;
    -moz-transition: width 2s linear;
    -webkit-transition: width 2s linear;
    -o-transition: width 2s linear;
} 
```

[**请参阅 fiddle**](http://jsfiddle.net/6cTeY/13/)，它创建了一个单击事件以在需要时启动动画，但这可能是其他一些编程触发器，用于在不再希望绕过它时添加该类。**[这个小提琴做相反](http://jsfiddle.net/6cTeY/14/)**的事情，它假设动画存在，但在页面加载时立即通过删除类绕过它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-27T23:55:46.040

设置一个覆盖类来禁用应用到的元素上的 css 转换，`!important`非常适合：

```
.notransition {
  -webkit-transition: none !important;
  -moz-transition: none !important;
  -o-transition: none !important;
  -ms-transition: none !important;
  transition: none !important;
} 
```

您现在[`toggleClass`](http://api.jquery.com/toggleClass/#toggleClass-className-switch)可以切换所需的行为（平滑过渡与即时更改）：

```
$('div').
toggleClass('notransition', true). //or false!
css('width', '200px'); 
```

[摆弄](http://jsfiddle.net/ovfiddle/78JDm/)。IMO 这种方法的优点之一是您可以清楚地区分默认元素样式和*禁用所有平滑动画*标志。这也是一种非常“可包装”的可重用方法，即您可以轻松地将可选的布尔属性添加到现有方法中，以指示是否应该使用转换来执行它。

**注意：**有时您可能希望出于任何性能/用户体验原因完全禁用页面上的转换。在这种情况下，您可以[将选择器更改为`.notransition *`](https://stackoverflow.com/a/11132887/1081234)并禁用所有后代元素的转换。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-28T00:09:09.863

问题在于，由于浏览器没有理由放慢速度并单独执行每个操作，它会将它们结合起来并同时执行。查询`offsetHeight` 是强制它单独执行每个操作的一种方法，因为它必须重新计算高度。[http://jsfiddle.net/markasoftware/6cTeY/15/](http://jsfiddle.net/markasoftware/6cTeY/15/)完美运行

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-30T14:04:54.573

我会选择一个相当干净的 CSS 解决方案

### HTML

```
<div id="foo"></div>
<button class="out">out</button>
<button class="in">in</button> 
```

### JS

```
$('button.out').click(function(){console.log($('#foo').addClass);$('#foo').addClass('out')})
$('button.in').click(function(){$('#foo').removeClass('out')}) 
```

### CSS

```
div{
    height: 100px;
    width: 10px;
    background: red;

    transition: width 0s linear;
    -ms-transition: width 0s linear;
    -moz-transition: width 0s linear;
    -webkit-transition: width 0s linear;
    -o-transition: width 0s linear;
}
div.out {
    width: 200px;
    transition: width 2s linear;
    -ms-transition: width 2s linear;
    -moz-transition: width 2s linear;
    -webkit-transition: width 2s linear;
    -o-transition: width 2s linear;

} 
```

[http://jsfiddle.net/6cTeY/19/](http://jsfiddle.net/6cTeY/19/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-28T20:39:39.987

这是我让它工作的唯一方法。jQuery 似乎有点固执。

[http://fiddle.jshell.net/8qTpe/1/](http://fiddle.jshell.net/8qTpe/1/)

PS你的方法有一些错误：

1.  您在延迟前将大小调整为 200 像素，因此使用默认的 CSS 设置。

2.  在将过渡更改回 2s 之前，您正在将大小调整为 10px。

现在 jQuery 似乎连续应用了所有 CSS 设置，这就是为什么整个事情似乎不起作用的原因。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-19T05:09:40.390

我通常以这种香草 JS 的方式来做。

[小提琴](http://jsfiddle.net/dqxg29nz/3/)

### HTML

假设你有一个元素

```
<div id="element"></div> 
```

### CSS

假设你的元素已经激活了 CSS 过渡并且 background: green

```
#element {
    background: green;
    width: 200px;
    height: 200px;
    -webkit-transition: 'all 0.5s ease-out';
    -moz-transition: 'all 0.5s ease-out';
    -ms-transition: 'all 0.5s ease-out';
    -o-transition: 'all 0.5s ease-out';
} 
```

### JS

该元素具有 CSS 过渡，但我们想立即将元素的背景更改为蓝色。

在那之后，我们希望元素的正常行为返回，以便我们可以将其背景设置为 RED。

我们需要暂时关闭过渡，然后立即恢复它们。

```
// grab the element
var element = document.getElementById('element');

// removeTransitions
element.style.webkitTransition   = 'none';
element.style.mozTransition      = 'none';
element.style.msTransition       = 'none';
element.style.oTransition        = 'none';

// apply desired 'instant' property
element.style.background         = 'blue'; // is applied instantly

// this 10ms timeout is necessary for the transitions to be active again
setTimeout(function() {
    element.style.webkitTransition   = 'all 5s ease-out';
    element.style.mozTransition      = 'all 5s ease-out';
    element.style.msTransition       = 'all 5s ease-out';
    element.style.oTransition        = 'all 5s ease-out';

    // apply desired 'animated' property
    element.style.background         = 'red';  // is applied smoothly
}, 10); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-11T09:14:55.047

```
var ball = document.querySelector('.ball'),
    ballSpeed = 2,
    button = document.querySelector('button');

// Chane to random speed "instantly" (on button "click")
button.addEventListener('click', ()=>{ 
  ballSpeed = Math.random()*8 + 1;

  ball.style.transitionDuration = ballSpeed + 's';
  ball.classList.remove('move');
  ball.clientHeight; // <--- triggers repaint
  ball.classList.add('move');

  // set button text
  button.textContent = ballSpeed.toFixed(2) + 's';
})

function animate( speed ){
  ball.style.transitionDuration = '0s';
  ball.classList.remove('move');
  ball.clientHeight; // <--- triggers repaint. has to be after "move" class was removed

  ball.style.transitionDuration = ballSpeed + 's';
  ball.classList.add('move');
  ball.removeEventListener('transitionend', animate)
  ball.addEventListener('transitionend', animate); // keep rollin..
}

animate();
```

```
html, body{ height:100%; overflow:hidden; } 

.ball{
  position: absolute;
  width: 3em;
  height: 3em;
  left:0; right:0; top:0; bottom:0;
  margin: auto;

  transition-duration: 2s; /* <-- start speed  */
  transition-timing-function: linear;
}

.ball::after{
  content: '';
  display: block;
  width: 100%;
  height: 100%;
  transform: translateX(100%);
  border-radius:50%;
  background: gold;
}

.ball.move{
  transform: rotate(360deg);
}
```

```
<button>2s</button>
<div class="ball"></div>
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-08T03:37:51.120

我不知道这在 JQuery 中是如何工作的，但您可以在 CSS 中执行此操作（至少在撰写本文时）：

```
div {
  animation: trans 2s;
}

@keyframes trans {
  0% {
    width: 200px;
  }
  99.9% {
    width: 200px;
  }
  100% {
    width: 10px;
  }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-12T02:57:57.743

**应该与 JQuery 一起使用的纯 JS 解决方案（尚未测试）。**

接受答案的问题是为延迟设置一个值，但更好的解决方案是将延迟设置为 0。我们将在事件循环中使用一个小技巧来实现这一点：

```
const button = document.querySelector('button');

function reposition() {
  button.style.transition = 'none';
  button.style.transform = 'translate(-50%)';

  setTimeout(() => {
    button.style.transition = '1s';
    button.style.transform = 'translate(0)';
  }, 0);
}

button.addEventListener('click', reposition);
```

```
<button>
    Click Me
</button>
```

这称为零延迟。它仍然使用延迟，但您不必为此感到恶心，因为它会在堆栈清空时立即运行。

如果您想了解这是为什么，我建议您观看[此视频](https://www.youtube.com/watch?v=8aGhZQkoFbQ)

**但这里有一个（凌乱的）简短解释：**

基本上发生的事情是 setTimeout() 将保持该值直到一定的时间，我们这里的时间是 0，但它不会执行直到堆栈被清除，（为什么？这是，看视频）因为浏览器仍然必须重新绘制更改，重新渲染仍将在堆栈中，当它完成时，传递给 setTimeout() 的函数将被执行，从而导致另一个重新渲染。

我知道这是否 100% 有效吗？理论上应该是这样，但我不是专家。

# c# - 假设 DayOfWeek 的数值是否安全？

> ID：13670399
> 
> 赞同：17
> 
> 时间：2012-12-02T14:52:42.813
> 
> 标签：c#, enums

我将星期几存储在数据库中，其中星期日 = 1，星期一 = 2 等。

在来自数据库的查询中，我需要将日期转换为`System.DayOfWeek`.

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.dayofweek.aspx)：

> 此枚举中常量的值范围从**DayOfWeek.Sunday**到**DayOfWeek.Saturday**。如果转换为整数，则其值范围从零（表示**DayOfWeek.Sunday**）到六（表示**DayOfWeek.Saturday**）。

这意味着在我查询数据后，我需要在将结果转换为`DayOfWeek`.

这安全吗？
还是我需要担心数值的`DayOfWeek`变化？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-02T14:54:17.403

是的，这个保险箱，您不必担心值的变化。以下是枚举的定义方式：

```
public enum DayOfWeek
{
    Sunday = 0,
    Monday = 1,
    Tuesday = 2,
    Wednesday = 3,
    Thursday = 4,
    Friday = 5,
    Saturday = 6
} 
```

如果 BCL 中的这些值发生变化，那么大量的代码将会中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T14:56:59.797

是的，总是安全的，你可以前后移动：

```
return DateTime.Today.AddDays(-1); 
```

和

```
return DateTime.Today.AddDays(1); 
```

# merge - 水壶，将两列插入一列

> ID：13670401
> 
> 赞同：1
> 
> 时间：2012-12-02T14:52:49.557
> 
> 标签：merge, kettle

我刚开始烧水壶我想知道如果我拥有两个相同的列数据（来自excel）例如：出生地和家乡在表格城市中的一列中，我如何组合，以便更清楚地：

excel中的列

> 1.  姓名
> 2.  出生地
> 3.  现城市​</li>

提供两张桌子

表格1：

> 1.  ID
> 2.  姓名
> 3.  (id city) 出生地
> 4.  (id city) 当前城市

表2：

> 1.  身份证城市
> 2.  城市

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:40:49.563

尝试合并加入（使用 id city 作为键）[http://wiki.pentaho.com/display/EAI/Merge+Join](http://wiki.pentaho.com/display/EAI/Merge+Join)

# java - 将数据添加到数组列表

> ID：13670403
> 
> 赞同：0
> 
> 时间：2012-12-02T14:53:00.693
> 
> 标签：java, android, arraylist

我正在开发一个 Android 项目，我正在尝试使用`ArrayList`类型为`MyClass`. 我正在尝试将数据存储`ArrayList`到`MyClass`. 下面是我正在使用的代码。

下面是带有将要使用的变量的类。

```
class SearchData
{
    public int id;
    public String category;
    public String company;
    public String loginAction;
    public String username;
    public String password;
    public String type;
    public String appName;
} 
```

下面是我如何初始化`ArrayList`

```
ArrayList<SearchData> passwords = new ArrayList<SearchData>(); 
```

下面是我如何尝试将新数据添加到`ArrayList`

```
passwords.add(new SearchData()
{

}); 
```

我不知道如何在类中使用我需要设置的数据来设置变量。在我比 Java 更了解的 C# 中，我可以执行以下操作：

```
passwords.add(new SearchData()
{
    id = 0,
    category = "hello"                      
}); 
```

但是，我没有看到 Intellisense 帮助中显示的类中的任何变量。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T14:54:45.420

您需要先创建一个对象并设置所有属性，然后将其添加到`List`：-

```
SearchData searchData = new SearchData();
searchData.setId(1);
searchData.setCategory(category);
...

passwords.add(searchData); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-02T15:00:11.917

为您的类创建一个构造函数。

```
class SearchData
{
    public int id;
    public String category;
    public String company;
    public String loginAction;
    public String username;
    public String password;
    public String type;
    public String appName;

   SearchData(int id, String category, String company......){

         this.id = id;
         this.category = category;
         this.company = company;
         ...
   }
} 
```

然后像这样使用它：

```
passwords.add(new SearchData(0,"Category1", "Company1"......)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T14:58:51.793

**创建一个对象并存储对它的引用：**

```
SeachData searchData = new SearchData(); 
```

**设置要设置的属性：**

```
searchData.setId(123); 
```

...很快

`searchData.` **Ctrl+Space**现在应该显示智能感知..

**将搜索引用添加到列表中：**

```
list.add(searchData); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T14:59:51.993

```
SearchData sd = new SearchData();
sd.id = 0;
sd.category = "hello";
passwords.add(sd); 
```

# cassandra - 从多个节点运行 sstableloader

> ID：13670413
> 
> 赞同：1
> 
> 时间：2012-12-02T14:54:51.667
> 
> 标签：cassandra

为了加快完整生产 cassandra 集群的迁移过程，我想知道是否有人尝试同时从两个节点同时运行 cassandra 的 sstableloader。

这些节点将在目标 cassandra 的环之外，它们会将不同的数据流式传输到环。

有没有人试过这个？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:16:52.877

我已经用多个同时的 sstableloader 尝试了这个，没有任何问题。在我的例子中，SSTable-sets 是由 map-reduce 作业创建的，导致每个 reducer 有一组 SSTables，后来通过 sstableloader 加载。

# r - R中的有向图上的错误标签

> ID：13670416
> 
> 赞同：0
> 
> 时间：2012-12-02T14:55:01.160
> 
> 标签：r, graph

（你好，

我在 R 中还有另一个问题，我不知道我做错了什么。在[这个线程](https://stackoverflow.com/questions/13604732/read-a-directed-graph-in-r)中，我询问了如何阅读与 user1317221_G 的答案配合得很好的有向图。

现在我从有向图中删除了边 6->7 并以这种方式读取：

```
library(igraph)
graph2 <- read.table("Graph_2.txt")
graph2 <- graph.data.frame(graph2) 
```

这就是 Graph_2.t​​xt 的样子：

```
1 2 
1 3 
2 5 
3 4 
3 5 
4 5 
5 6 
5 10 
7 8 
7 9 
7 12 
8 9 
9 10 
9 11 
9 12
10 7 
10 11
11 7
11 12 
```

但是该图显示（再次，就像在另一个线程中一样）一个不同的有向图：

![http://i.imgur.com/zMCxJ.png](../Images/a8758022015025b5e2374bbac0851340.png)

正如您在文件中看到的，以 5->9 或从 10->12 为例，没有边。所以我的问题再次是，我怎样才能正确阅读有向图？我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:15:16.973

您可以在创建图形时使用`graph.data.frame`，通过其`vertices`选项设置顶点标签：

```
graph2 <- graph.data.frame(graph2, vertices = data.frame(symbols = 1:12,
                                                         label   = 1:12))

plot(graph2, layout = layout.fruchterman.reingold) 
```

![具有适当标签的有向图](../Images/1416964f6e08fb574a46b3cac7bb278e.png)

# ruby-on-rails-3 - 在 Rails 中重命名会话 cookie

> ID：13670420
> 
> 赞同：8
> 
> 时间：2012-12-02T14:55:39.163
> 
> 标签：ruby-on-rails-3, cookies, ruby-on-rails-3.1, session-cookies, rack

因为我希望会话 cookie 反映 url 而不是应用程序名称，所以我想重命名 cookie ..

当前会话 cookie 名称被调用`_APPNAME_session`

有没有办法将它重命名为`_somethingelse_session`？

当我这样做时，我看到了它的名字

```
curl -i <appurl> 
```

我懂了

```
set_cookie = _APPNAME_session=.... 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-08T14:11:28.260

*   Rails >= 6.0.0，在 config/application.rb 中，添加以下行：

    ```
    config.session_store :cookie_store, key: '_somethingelse_session' 
    ```

*   Rails >= 5.0.0，在 config/initializers/session_store.rb 中，设置/更改以下行：

    ```
    Rails.application.config.session_store :cookie_store, key: '_somethingelse_session' 
    ```

*   Rails < 5.0.0，在 config/initializers/session_store.rb 中，设置/更改以下行：

    ```
    <APPNAME>::Application.config.session_store :cookie_store, key: '_somethingelse_session' 
    ```

# javascript - 使用ajax跨域加载.js文件

> ID：13670421
> 
> 赞同：0
> 
> 时间：2012-12-02T14:55:55.933
> 
> 标签：javascript, jquery

我正在尝试使用 ajax 访问跨域 .js 文件：

```
$.ajax({
    type:'get',
    crossDomain:true,
    url: "http://localhost/62588/scripts/bootStrapper.js",
    contentType: "application/json",
    dataType: 'jsonp'    
}).done(callback); 
```

我现在有一个回调：

```
getBootStrapperScript(function (callback) {         
       //do somethibg
}) 
```

我收到以下错误：

```
XMLHttpRequest cannot load http://localhost/62588/scripts/bootStrapper.js. Origin http://localhost:62607 is not allowed by Access-Control-Allow-Origin. 
```

我一直在阅读有关 JSONP 的信息，但我不确定如何使用它从另一个域加载 .js 文件。

如果我将上面的代码更改为使用“jsonp”作为数据类型，但我会得到这个错误：

```
GET http://localhost/62588/scripts/bootStrapper.js?callback=jQuery18206067646441515535_1354459693160&_=1354459696966 404 (Not Found) 
```

如何加载跨域js文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T15:01:38.777

不要使用任何 AJAX，只需使用以下[`$.getScript`](http://api.jquery.com/jQuery.getScript/)功能：

```
$.getScript('http://localhost/62588/scripts/bootStrapper.js').done(callback); 
```

如您所知，您可以将`<script>`标签指向您希望的任何域，而不会违反[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。这就是 JSONP 的基础。但是您不需要任何 JSONP，因为您所需要的只是从远程域中引用一个脚本，这就像将`<script>`标签指向该脚本一样简单，或者如果您想动态地使用`$.getScript`jQuery 提供的功能你。

* * *

更新：

该`$.getScript`函数会将随机缓存破坏参数附加到 url。如果您想获得脚本的缓存版本，您可以定义一个自定义`cachedScript` 函数，如文档中所示：

```
jQuery.cachedScript = function(url, options) {
    options = $.extend(options || {}, {
        dataType: 'script',
        cache: true,
        url: url
    });
    return jQuery.ajax(options);
}; 
```

接着：

```
$.cachedScript('http://localhost/62588/scripts/bootStrapper.js').done(callback); 
```

# android - 不了解android中不同的API级别

> ID：13670424
> 
> 赞同：0
> 
> 时间：2012-12-02T14:56:17.730
> 
> 标签：android, eclipse

我目前正在使用 Eclipse 创建一个 Android 应用程序，并在它的 API 级别 8 的构建 sdk 中

Android 2.2 (API 8) Google APIs (Google Inc) (API 8) DTS Add-ON (KYOCERA Corporation)(API 8) Real3d Add-on (LGE)(API 8)

他们都有 api 8。所以如果我选择 Real3d Add-on (LGE) (API 8) 是否意味着它将具有 (API-8) 的所有先前功能，例如 DTS Add-ON (KYOCERA Corporation)( API 8) 是一个子集，而 Google API (Google Inc) (API 8) 是 DTS Add-ON (KYOCERA Corporation) (API 8) 的一个子集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T14:59:06.003

在我看来，你开始学习安卓了。使用 Android 2.2 (API 8) 构建您的应用程序。DTS 插件、Real3D 和其他制造商插件仅适用于少数设备

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:03:46.197

API 级别是能够使用它的最低要求。

随着 android 的进步，出现了新功能，这些新功能被引入到新的 api 级别中。

任何同等及以上的 api 设备都可以运行该 API 功能。

例如，API 10 电话可以运行 API 1-10 功能。

API 电话 8 可以运行 API 1-8 功能。Aka 无法运行 API 10 功能。

如果您需要某个 API 的功能，请注意，低于所需 API 的任何设备都无法运行您的应用程序。API 8 是一个很好的目标 API。

# silverlight - Silveright - [Parser_SetValue_NoSetter]

> ID：13670427
> 
> 赞同：0
> 
> 时间：2012-12-02T14:56:37.397
> 
> 标签：silverlight

我有一个 SL 应用程序在某些系统上运行良好，但在其他系统上遇到此错误：

![Silverlight 异常](../Images/63dc5af56ae1181bb0fd7d00b8035404.png)

这是一个非常奇怪的问题，同一个家庭中可能有两台机器，一台运行一台会输出此错误，都安装了正确的SL版本，并且所有浏览器的成功或失败都是一致的。

完整的例外：

> [Parser_SetValue_NoSetter] 参数：调试资源字符串不可用。通常，关键和论据提供了足够的信息来诊断问题。请参阅[http://go.microsoft.com/fwlink/?linkid=106663&Version=4.1.10329.0&File=System.Windows.dll&Key=Parser_SetValue_NoSetter](http://go.microsoft.com/fwlink/?linkid=106663&Version=4.1.10329.0&File=System.Windows.dll&Key=Parser_SetValue_NoSetter)
> 
> 在 MS.Internal.XamlMemberInfo.SetValue（对象目标，对象值）在 MS.Internal.XamlManagedRuntimeRPInvokes.SetValue（XamlTypeToken inType，XamlQualifiedObject& inObj，XamlPropertyToken inProperty，XamlQualifiedObject&inValue）

我已经将它从本地机器部署到 Azure - 它没有区别

www.theweatherproject.net

有任何想法吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:13:32.617

我遇到了同样的错误，我的解决方案是在有问题的系统上安装最新的 silverlight 版本。我知道你做到了，但是...

# eclipse - 如何使用 Velocity Eclipse 插件？

> ID：13670438
> 
> 赞同：1
> 
> 时间：2012-12-02T14:57:48.120
> 
> 标签：eclipse, liferay, velocity

我正在尝试使用 Velocity 为 Liferay 创建一个主题插件，但我遇到了一些问题。[我已经从这里http://veloedit.sourceforge.net/updates/](http://veloedit.sourceforge.net/updates/)将 Velocity 插件安装到 Eclipse 。但我在 Eclipse UI 中找不到它。如何使用它来编辑 Liferay 速度模板？你能举一些例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:28:52.010

一旦你安装了 Velocity 插件，接下来你需要创建你的 Liferay 主题插件。这可以通过[Liferay Plugins SDK](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/installing-the-sdk)和[Liferay IDE](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/installati-6)来完成。这是一个关于如何使用[Liferay 主题](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/creating-liferay-them-7)的教程。创建主题后，您可以自定义任何现有的 *.vtl 文件（速度模板）。您只需要将它们放在主题项目的 _diffs 文件夹下，`_diffs/templates`. 将 VTL 文件复制到模板文件夹后，您可以编辑它，方法是在 Eclipse 中右键单击该文件并选择“Open with > Velocity Editor”。

# c# - 如何在 WPF 中停止 WebBrowser 对象？

> ID：13670440
> 
> 赞同：2
> 
> 时间：2012-12-02T14:57:58.963
> 
> 标签：c#, wpf, winforms, browser

如何停止`WebBrowser`WPF 中的对象？

stop 方法不是一个选项，因为它仅在 Windows 窗体中可用。

[WebBrowser.Stop 方法 (System.Windows.Forms)](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.stop.aspx_)

而且`Dispose`似乎也不是答案。

而且，现在我提到它。有没有一种方法可以轻松找到 Windows 窗体中存在的 WPF 中的相应方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:06:33.057

尝试导航到“关于：空白”或

使用两个 WebBrowser，第一个可见，第二个隐藏。当您首先停止时，只需将其隐藏并显示为空的第二个

# java - 面向初学者的 Java 继承

> ID：13670443
> 
> 赞同：3
> 
> 时间：2012-12-02T14:58:11.180
> 
> 标签：java, oop, inheritance

我正试图围绕java中的继承。到目前为止，我了解到，如果我以以下方式声明一个对象：`Superclass object = new Subclass()`创建的子对象仅限于父对象的方法。如果我想访问孩子的其他方法，我将不得不向孩子施放。但是为什么子类中的方法仍然被覆盖。

这是我的例子

```
public class Parent {

    public Parent() {       

    }

    public void whoAmI(){       
        System.out.println("I'm a parent");
    }

}
public class Child extends Parent { 

public Child() {        

}

public void whoAmI(){       
    System.out.println("I'm a child");
}

public void childMethode() {
    System.out.println("Foo");

}
}

public class Test {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub

    List<Parent> list = new ArrayList<>();      

    Child c = new Child();  
    Parent p = new Parent();
    Parent pc = new Child();

    c.whoAmI();
    p.whoAmI();
    pc.whoAmI();

    // Access child methodess
    ((Child) pc).childMethode();

    list.add(c);    
    list.add(p);
    list.add(pc);

    System.out.println(list.size());

}

} 
```

`pc.whoAmI()`打印“我是个孩子”。为什么不打印“我是父母”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T15:10:40.423

为避免混淆，请务必了解您创建的子类对象**始终包含所有方法**。向下转换是无操作的；您只需将相同的对象视为子类型的实例。

推论：你永远不能通过向下转换来改变对象的行为。由此直接得出结论，您始终访问相同的覆盖方法，而不是来自超类的方法。

这种行为允许您用不同的行为替换同一个声明的超类型。它被称为*多态*，是 Java 编程和一般 OOP 的主力。没有它，一开始就没有类层次结构。至少，它的用处要少得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T15:05:05.740

为什么是一个很难回答的问题，这是 Java 团队很久以前做出的设计决定。

他们决定所有方法都是[虚拟](http://en.wikipedia.org/wiki/Virtual_method)的，除非它们被明确标记为静态。在某些语言中，情况正好相反（除非声明为虚拟方法，否则默认情况下方法是静态的），它没有真正的区别。

重要的是要了解[静态和虚拟方法是如何工作](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)的。（或者它们有时在 Java 中被称为：实例和类/静态方法。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T15:05:27.080

您可以将继承想象为创建名为`super`.

Java 中的每个对象实例都有自己的常量类型。你不会在铸造时改变它。在强制转换时，您只需对 Java 说您确定该对象是子类型。

被覆盖的方法仍然被覆盖，这是 Java 的思想。如果您了解 C++，您可以说 Java 中的所有函数都是虚拟的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T15:13:45.590

```
class Person{

   public void run(){
       //running

   }

}

class OneLeggedPerson extends Person{
    @Override
    public void run(){
        //cant run have only one leg
   }
}

Person p = new OneLeggedPerson();
p.run();    //cannot as it is actually a one legged person

Hope that makes sense now.. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T15:17:58.983

假设您是 Apple，并且您正在销售 iPod。

iPod 的制造方式可能在一个工厂和另一个工厂之间存在细微差别，或者在 iPod 模型的第一个版本和最后一个模型之间存在细微差别，因为过程发生了变化。

你，Apple，知道你制造什么样的 iPod：

```
IPodWithFirstWayOfBuildingIt ipod = new IPodWithFirstWayOfBuildingIt(); 
```

或者

```
IPodWithSecondWayOfBuildingIt ipod = new IPodWithSecondWayOfBuildingIt(); 
```

但最终客户（即代码的其余部分）对 iPod 的构建方式毫不在意。对他而言，重要的是 iPod 的工作方式和行为方式与 iPod 相似（广告中、最终用户手册或 Ipod 类的 javadoc 中显示的方式）。他没有要求商店“给我一个 iPod，用第一种方式构建它”。但事实是，他得到的 iPod 要么采用第一种构建方式，要么采用第二种构建方式。他称其为“iPod”这一事实并没有改变 iPod 的制造方式，因此：

```
IPod iPod = new IPodWithFirstWayOfBuildingIt(); 
```

是这样说的。我用第一种方式构建了一个 iPod，但我将像使用任何其他 iPod 一样使用它，而不关心它是如何构建的。

# jackrabbit - Jackrabbit 是否提供分面搜索？

> ID：13670447
> 
> 赞同：0
> 
> 时间：2012-12-02T14:58:22.853
> 
> 标签：jackrabbit, faceted-search

我正在探索 Apache Jackrabbit 的功能，以便在我的一个项目中使用。我需要的功能之一是基于存储在内容存储库中的元数据的分面搜索实现。Jackrabbit 是否提供任何开箱即用的多面搜索实现？或者我是否需要使用 Apache solr 或其他搜索引擎来获取多面搜索功能。有没有遇到过类似挑战的 Jackrabbit 专家？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T18:25:44.067

Jackrabbit 提供的默认搜索引擎是 lucene。这份使用 lucene 进行[分面搜索的](http://nsdl.org/nsdl_dds/services/ddsws1-1/facet_userguide.html)指南可能会对您有所帮助。

# html - 如何更改facebook喜欢按钮的背景

> ID：13670448
> 
> 赞同：2
> 
> 时间：2012-12-02T14:58:27.577
> 
> 标签：html, css

如何将 Facebook like 按钮的背景从白色更改为其他颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T15:02:28.980

它位于 iframe 中，因此您无法更改背景。

> 虽然您可以缩放大小以满足您的需要，但您不能以任何其他方式修改“赞”按钮（例如通过更改设计）。

看看这个：- [http://www.facebook.com/brandpermissions/logos.php](http://www.facebook.com/brandpermissions/logos.php)

# java - Java：BASE64Decoder 输出错误值

> ID：13670451
> 
> 赞同：1
> 
> 时间：2012-12-02T14:58:39.433
> 
> 标签：java, base64

我在解码文本时遇到问题。

我的应用程序中有一个字段：

```
JTextArea jCertImport = new JTextArea(); 
```

jCertImport 包含 BASE64 编码文本。我想解码插入到 jCertImport 中的文本，所以我可以在编码之前得到字节形式：

```
import sun.misc.BASE64Decoder;
import sun.misc.BASE64Encoder;

...

byte [] cert_bin = null;
BASE64Decoder cert_decoded = new BASE64Decoder();
try {
cert_bin = cert_decoded.decodeBuffer(jCertImport.getText());
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
  } 
```

之后我得到了我的证书的字节形式，但该值与编码之前的值不同。为什么？我想，当我对某个值使用编码然后在输出上解码时，我应该在编码之前获得原始值。

# prolog - Prolog - 不返回所需的值

> ID：13670453
> 
> 赞同：4
> 
> 时间：2012-12-02T14:58:47.713
> 
> 标签：prolog, return-value

这是一个简单的 Prolog 程序，用于展示我目前在使用真实代码时遇到的问题。

我正在尝试在 Prolog 中编写一个 Brainf*ck 解释器，但它没有返回正确的`Output`

我在跑步`bf("+.", Output)`

预期收益 -`Output = [1]`

实际回报 - `Output = []`。

`Output`当它返回`iterateProg(Prog,Output)`in时失去它的价值`bf2`。

程序如下：

```
bf2(Prog,Output):-
    iterateProg(Prog,Output).

iterateProg([],_):- !.
iterateProg(Prog, Output):-
    checkInstruction(Prog,Output, NewProg, NewOutput),
    iterateProg(NewProg, NewOutput).

checkInstruction([Plus|ProgTail],Output,ProgTail,Output):-
    char_code('+',Plus)
    %increase memory by 1 for printing later.
    .

checkInstruction([Period|ProgTail], Output, ProgTail, NewOutput):-
    char_code('.',Period),
    %take the value in memory from addition just now, we will assume it is 1
    append(Output,[1],NewOutput). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:26:00.947

你的谓词`bf2(Prog, Output)`的含义是：这个程序`Prog`与这个输出相对应`Output`- 所以谓词`Output`中的以及应该包含完整的输出。`bf2``iterateProg`

所以在`checkInstruction`谓词中，前 2 个参数应该包含完整程序和完整输出，后 2 个参数应该包含部分程序和相应的部分输出。

因此，您应该附加`[1]`with `NewOutput`，以生成谓词`Output`第二条规则的最终输出。`checkInstruction`您应该`New...`使用不同的名称重命名 - 因为它实际上是部分/“尾”程序和相应的输出。

```
append([1], NewOutput, Output) 
```

注意**顺序**（我在评论中不准确）。`[1]`是当前指令的输出，它应该在中指令的输出之前`ProgTail`。

顺便说一句，`bf2`谓词是不必要的——因为它`iterateProg`用完全相同的参数调用谓词。

另一件事`iterateProg([],_)`应该是`iterateProg([],[])`因为一个空程序应该对应于空输出。（反之亦然，所以`!`如果你已经了解了，你不应该在这里删减）。

# macos - 显示新文档窗口的工作表

> ID：13670457
> 
> 赞同：2
> 
> 时间：2012-12-02T14:59:06.033
> 
> 标签：macos, cocoa, nsdocument

当用户在基于我的 Cocoa 应用程序中创建新文档时`NSDocument`，我希望新文档窗口显示一个表单，用户可以在其中设置一些初始文档参数。

但是，当通过“文件”>“打开”加载现有文档时，不应显示此工作表。

是否有任何现有的机制可以用来实现这一点？或者有什么推荐的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T16:55:01.737

`initWithType:error:`在您的子类中覆盖`NSDocument`。
从文档（请参阅[NSDocument 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsdocument_Class/Reference/Reference.html)）：

*您可以重写此方法以执行在创建新文档时必须执行但在打开现有文档时不应执行的初始化。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T01:17:55.217

Jay 在[他的回答](https://stackoverflow.com/a/13671472/762322)中正确地指出，为了确定`NSDocument`子类的实例是否代表新文档而不是从文件中加载的， `initWithType:error:`必须被覆盖，它只会被新文档调用。但是不幸的是，在那里启动工作表是行不通的，因为此时尚未创建窗口`initWithType:error:`。

获得此工作的缺失链接是将名为 eg 的实例变量设置`newDocument`为`YES`in `initWithType:error:`。`[NSApp beginSheet:…]`那么，对的实际调用必须在 中进行`windowDidBecomeKey:`。此外，`newDocument`应将变量设置为`NO`那里，以防止每次窗口再次成为键时工作表都重新出现。

# java - 如何以特定方式交换字符串中的两个数字？

> ID：13670459
> 
> 赞同：0
> 
> 时间：2012-12-02T14:59:33.553
> 
> 标签：java, android, string, sorting

嗨，我想以特定方式交换字符串形式的数字。

例如 ：

如果我有，`10325476`那么它应该返回`01234567`我迄今为止尝试过的任何东西，我只是交换了字符串中的两个数字对。

**编辑**
如果我有`01AB3423`那么答案应该是`10BA4332`以下是我当前的实现，它给了我想要的输出。

```
char temp1 = c1[0];
c1[0] = c1[1];
c1[1] = temp1;

char temp2=c1[2];
c1[2]=c1[3];
c1[3]=temp2;

char temp3=c1[4];
c1[4]=c1[5];
c1[5]=temp3;

char temp4=c1[6];
c1[6]=c1[7];
c1[7]=temp4; 
```

我已经为所有 8 个数字做了这个，但它是一种静态方式。而且我知道这不是正确的方法。我也想动态地这样做。还有其他方法可以实现吗？

任何想法和建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T15:02:35.233

**编辑： -**

从您的最新编辑中，您似乎想要交换字符串中的连续字符对。在这种情况下，您将需要一个`loop`。

试试这个代码： -

```
String str = "BA34CD567";
char[] arr = str.toCharArray();

for (int i = 0; i < arr.length - 1; i += 2) {
    char temp = arr[i];
    arr[i] = arr[i + 1];
    arr[i + 1] = temp;
}

System.out.println(arr); 
```

**输出 ： -**

```
AB43DC657 
```

我在循环中增加`i`了 by `2`，因为您正在考虑`two elements`每次迭代。

* * *

**旧答案：-**

只需 3 个步骤：-

*   将您的字符串转换为 char 数组。( `str.toCharArray()`)
*   对您的 char 数组进行排序。( `Arrays.sort(arr))`。记住，`Arrays.sort`不返回排序后的数组。它对数组进行排序。
*   然后打印你的数组。（嗯，你知道怎么做）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:02:14.580

看看一些排序算法，例如*冒泡排序*（如果是一小组数字）、*归并排序*、*快速排序*等。这就是您似乎想要做的——*排序*。

# search - jqGrid 搜索列排序

> ID：13670465
> 
> 赞同：2
> 
> 时间：2012-12-02T15:00:36.887
> 
> 标签：search, jqgrid

我有一个网格，当您从底部导航器单击搜索时，默认情况下会弹出此搜索，所有列默认从左到右开始。

有什么办法可以改变吗？例如`Inv No`，默认情况下，它将始终成为日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:05:49.730

这是个好问题！当前没有可以指定默认搜索列的搜索对话框[选项。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3asinge_searching#options)

作为解决方法，我建议使用jqGrid 选项的属性`filters`。`postData`例如[，演示](http://www.ok-soft-gmbh.com/jqGrid/SetDefaultSearchingField.htm)打开“关闭”列，默认选择“是”。它用

```
postData: {
    filters: JSON.stringify({
            groupOp: "AND",
            rules:[{
                field: "closed",
                op: "eq",
                data: "true"
            }]
        })
} 
```

其中字段值 ( `"closed"`) 是`name`列 ( `"eq"`) 的值，是列的允许操作之一（我`sopt: ['eq', 'ne']`在演示中使用了该列），并且`data`("true") 的值应指定搜索字段的默认值。在大多数情况下，您`data: ""`可能会使用。

# jquery - 延迟打开页面上的所有链接

> ID：13670469
> 
> 赞同：1
> 
> 时间：2012-12-02T15:01:11.087
> 
> 标签：jquery

当href包含某些文本时，我正在尝试打开页面上的所有链接，目前我正在使用

```
$('a[href*="/steve"]').each(function() {
  window.open($(this).attr('href') );   
}); 
```

现在我正在使用的页面在href中包含很多带有该文本的链接，因此它会在很短的时间内通过打开的窗口向我发送垃圾邮件，我想添加一个延迟，以便它有时间打开并等待大约5几秒钟前打开下一个。我试图使用 .delay 但无法让它工作，因为我很新并且不知道确切的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T15:04:42.830

你可以这样做 ：

```
$('a[href*="/steve"]').each(function(index) {
    setTimeout(
         function(href){window.open(href)},
         (index+1)*5000, $(this).attr('href')
    );
}); 
```

这个想法是`setTimeout`用不断增加的延迟来调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T15:04:49.910

使用 setTimeout 添加延迟：

```
var i = 0;
$('a[href*="/steve"]').each(function() {
    ++i;
    setTimeout(function(href) { window.open(href) },i*5000, $(this).attr("href"));
}); 
```

# symfony - 数据库失败 - 数据库架构与当前映射文件不同步

> ID：13670471
> 
> 赞同：13
> 
> 时间：2012-12-02T15:01:36.940
> 
> 标签：symfony, doctrine, doctrine-orm, yaml

任何人都可以解释以下原则架构验证错误消息：

![架构验证函数返回的错误消息](../Images/098f1715ca1d78a4d3c97c98ff16e403.png)

下面是 manyToMany 关系中每个实体的 yaml ORM 定义，根据[文档](http://docs.doctrine-project.org/en/latest/reference/association-mapping.html)的第 5.9 节创建。

```
Rep\Bundle\ProjectBundle\Entity\User:
    type: entity
    table: User
    fields:
        id:
            id: true
            type: integer
            unsigned: true
            nullable: false
            generator:
                strategy: AUTO
        username:
            type: string
            length: 25
            fixed: false
            nullable: false
        salt:
            type: string
            length: 32
            fixed: false
            nullable: false
        password:
            type: string
            length: 40
            fixed: false
            nullable: false
        email:
            type: string
            length: 60
            fixed: false
            nullable: false
    manyToMany:
        roles:
            targetEntity: UserRole
            inversedBy: users
            joinTable:
                name: UserRoleLookup
                joinColumns:
                    user_id:
                        referencedColumnName: id
                inverseJoinColumns:
                    user_role_id:
                        referencedColumnName: id
    lifecycleCallbacks: {  } 
```

和 UserRole 反向 yaml 配置：

```
Rep\Bundle\ProjectBundle\Entity\UserRole:
    type: entity
    table: UserRole
    fields:
        id:
            id: true
            type: integer
            unsigned: true
            nullable: false
            generator:
                strategy: AUTO
        name:
            type: string
            length: 50
            fixed: false
            nullable: false
    manyToMany:
        users:
            targetEntity: User
            mappedBy: roles
    lifecycleCallbacks: {  } 
```

这是用户表架构：

```
CREATE TABLE `User` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `username` varchar(25) COLLATE utf8_unicode_ci NOT NULL,
  `salt` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
  `password` varchar(40) COLLATE utf8_unicode_ci NOT NULL,
  `email` varchar(60) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

UserRole 表架构：

```
CREATE TABLE `UserRole` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

和 UserRoleLookup 架构：

```
CREATE TABLE `UserRoleLookup` (
  `user_id` int(11) unsigned NOT NULL,
  `user_role_id` int(11) unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`user_role_id`),
  KEY `user_role_id` (`user_role_id`),
  CONSTRAINT `userrolelookup_ibfk_2` FOREIGN KEY (`user_role_id`) REFERENCES `userrole` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `userrolelookup_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

如您所见，这是一个非常简单的设置，带有一个查找表来指示用户的角色或给定用户角色中的用户集。但是，我收到了这个令人沮丧的同步错误。我在这里或网上没有读到任何简明扼要地回答这个问题的内容，我希望有人能澄清我是否可以安全地离开这个配置并忽略这个错误？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-05-14T19:11:27.327

运行此命令以显示 SQL 中的差异，而无需转储数据库：

`php bin/console doctrine:schema:update --dump-sql`

您还可以运行以下命令来执行更改：

`php bin/console doctrine:schema:update --force --full-database`

对于 symfony2 它是

`php app/console doctrine:schema:update --force --full-database`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-01-26T14:15:49.877

# 对于 Symfony3：

`app/console`改为`bin/console`， `--full-database`改为`--complete`

所以最终的命令将是：

```
php bin/console doctrine:schema:update --force --complete --dump-sql 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-02T17:46:19.583

这很简单：某些字段或关系或实体等尚未被转换为数据库模式中的列或表。更新您的架构，您会没事的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-02T22:05:18.750

对于对此感兴趣的任何人，重新生成我的表模式会产生以下查找模式：

```
CREATE TABLE `UserRoleLookup` (
  `user_id` int(11) NOT NULL,
  `user_role_id` int(11) NOT NULL,
  PRIMARY KEY (`user_id`,`user_role_id`),
  KEY `IDX_4511E771A76ED395` (`user_id`),
  KEY `IDX_4511E7718E0E3CA6` (`user_role_id`),
  CONSTRAINT `FK_4511E7718E0E3CA6` FOREIGN KEY (`user_role_id`) REFERENCES `UserRole` (`id`),
  CONSTRAINT `FK_4511E771A76ED395` FOREIGN KEY (`user_id`) REFERENCES `User` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;\ 
```

我猜 symfony2-doctrine 包不是无符号整数的忠实拥护者，因为我可以看到我发布的架构几乎没有变化。总之，问题解决了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-27T09:48:23.043

如果您正在运行这些命令：

```
php bin/console doctrine:schema:update --force --complete --dump-sql 
```

并且生成的 SQL 不会创建新实体（没有 CREATE TABLE），您最好检查一下您的映射是否正常。就我而言，我忘了把它放在映射中：

```
 * @ORM\Entity 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-11T06:08:48.733

我也有同样的问题。另外，跑步的时候

```
php bin/console doctrine:schema:update --dump-sql 
```

无论我已经执行了 sql，它都会显示相同的 sql。看起来上面的命令未能检测到数据库模式和当前实体元数据之间的真正区别。我还验证了这些问题是否与您使用的数据库有关。**因为我至少在 MySQL 5.7.25 中没有这样的问题，但在 MariaDB 10.2.24 中。**在这里查看更多信息：[https ://github.com/symfony/symfony/issues/27166#issue-320494745](https://github.com/symfony/symfony/issues/27166#issue-320494745)

PS MariaDB 给我带来了其他麻烦，例如“索引键长度 767 字节”。不要说它不好。但是提醒我 3 年前我第一次决定使用 MariaDB 时，帖子/新闻说它与刚刚被 Oracle 收购的 MySQL 相比有多好。还有消息说 MySQL 会有所不同，然后是恐慌......（只是个人意见）

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-08-18T03:10:23.947

php bin/console 学说：schema:update --dump-sql 它可能有效，它解决了我的问题

# android - 获取视图的可见高度

> ID：13670474
> 
> 赞同：3
> 
> 时间：2012-12-02T15:01:42.540
> 
> 标签：android, android-activity

状态栏打开后是否可以知道我的活动的可见高度？

我想知道我的屏幕的可见高度。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-15T08:07:03.847

尝试查看 treeobserver 方法.. 喜欢：

```
 main_layout.getViewTreeObserver().addOnGlobalLayoutListener(
            new OnGlobalLayoutListener() {
                @Override
                public void onGlobalLayout() 
                    {

                        Rect r = new Rect();
                        // r will be populated with the coordinates of your view
                        // that area still visible.
                        main_layout.getWindowVisibleDisplayFrame(r);

                        int heightDiff = main_layout.getRootView().getHeight()-(r.bottom -r.top);

                    }
    }); 
```

将 main_layout 替换为您想要的视图对象。希望它可以提供帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-02T17:58:53.883

myLayout.getHeight(); 只有在视图显示在屏幕上之后才会返回视图的实际可见高度，然后它才会为 0。如果您真的有兴趣了解 myLayout.getHeight() 那么您可能想在视图显示在屏幕上之后检查

如果您想知道屏幕的高度/宽度，那么您可以考虑使用以下代码：DisplayMetrics dm = new DisplayMetrics(); getWindowManager().getDefaultDisplay().getMetrics(dm);

最终 int 高度 = dm.heightPixels; 最终 int 宽度 = dm.widthPixels;

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-02T19:24:46.853

Hopefully this line of code will work for you. i use this when i want height n width of the screen

```
// get screen width/height

          DisplayMetrics metrics = new DisplayMetrics();
          getWindowManager().getDefaultDisplay().getMetrics(metrics); height =
          metrics.heightPixels; width = metrics.widthPixels; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-02T17:47:01.333

给你的主要布局元素一个 id：

```
<LinearLayout id="myLayout">
    ...
</LinearLayout> 
```

然后得到它的高度`setContentView()`：

```
View myLayout = (View) findViewById(R.id.myLayout);
int height = myLayout.getHeight(); 
```

另请参阅[此问题](https://stackoverflow.com/questions/5886615/display-metrics-minus-status-bar)以获取更多信息。

# c# - 生成 HTTP POST 请求时出错？

> ID：13670477
> 
> 赞同：1
> 
> 时间：2012-12-02T15:02:20.413
> 
> 标签：c#, asp.net, httpwebrequest

我正在尝试使用以下代码以编程方式登录，直到两天前它工作正常，但现在突然我收到一个 WebException **“远程服务器返回错误：（417）预期失败 -”**如何解决这个问题。

我还尝试了[为什么我收到此错误中发布的解决方案：远程服务器返回错误：（417）预期失败](https://stackoverflow.com/questions/10974468/why-do-i-receive-this-error-the-remote-server-returned-an-error-417-expectat)

谁能告诉我如何解决这个问题。

```
 HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create("http://sms.ultoo.com/login.php");
        String Postdata = "LoginMobile=9999999999&LoginPassword=aaa";
        webRequest.Timeout = 10 * 60 * 1000;
        webRequest.Method = "POST";
        webRequest.ContentType = ContentType;
        webRequest.ContentLength = Postdata.Length;

        // POST the data
        using (StreamWriter requestWriter2 = new StreamWriter(webRequest.GetRequestStream()))
        {
            requestWriter2.Write(Postdata);
        }

        //  This actually does the request and gets the response back
        HttpWebResponse resp = (HttpWebResponse)webRequest.GetResponse();

        string ResponseData = string.Empty;

        using (StreamReader responseReader = new StreamReader(webRequest.GetResponse().GetResponseStream()))
        {
            // dumps the HTML from the response into a string variable
            ResponseData = responseReader.ReadToEnd();
        } 
```

**导致异常的语句**

```
HttpWebResponse resp = (HttpWebResponse)webRequest.GetResponse(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:23:55.157

感谢所有花时间回答我的问题的人。

我尝试了[http-post-returns-the-error-417-expectation-failed-c](https://stackoverflow.com/questions/566437/http-post-returns-the-error-417-expectation-failed-c)中发布的解决方案， 它对我有用。

我只需要添加以下代码

```
System.Net.ServicePointManager.Expect100Continue = false; 
```

# clojure - Clojure 的计划

> ID：13670478
> 
> 赞同：3
> 
> 时间：2012-12-02T15:02:25.213
> 
> 标签：clojure, scheme

我有一个具有以下属性的 Scheme 函数：它计算嵌套列表结构的叶节点数，忽略 #f。它使用递归过程：

*   如果输入是一个空列表，则这是返回 0 的基本情况。
*   如果输入是汽车不是列表的对：
    *   如果汽车是#f，我们在 cdr 上递归并返回它。
    *   否则，我们将 car 计为 1，并将其添加到 cdr 上的递归结果中。
*   最后，我们对 car 和 cdr 进行递归，并将它们相加。

如何将以下代码转换为编程语言 Clojure？

```
(define (x lis)
  (cond ((null? lis) 0) 
        ((not (list? (car lis))) 
         (cond 
          ((eq? (car lis) #f) (x (cdr lis))) 
          (else (+ 1 (x (cdr lis)))))) 
        (else (+ (x (car lis)) (x (cdr lis)))))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T15:19:16.907

透明翻译是

```
(defn x [lis]
  (cond (empty? lis) 0
        (not (coll? (first lis)))
        (if (= (first lis) false)
          (x (rest lis))
          (inc (x (rest lis))))
        :else (+ (x (first lis)) (x (rest lis))))) 
```

或者你问过clojure的具体解决方案吗？

**已编辑（clojure 特定解决方案版本 1）。**

```
(defn x [lis]  
  (count (filter (partial not= false) (flatten lis)))) 
```

# php - 如何检查 do 变量是否已初始化

> ID：13670483
> 
> 赞同：1
> 
> 时间：2012-12-02T15:03:16.900
> 
> 标签：php, variables

我的例子

```
<?php
if(something){
$message = "set";
}

echo $message; // but I can get error that variable is not unidentified ?> 
```

我的问题如何检查 do 变量已初始化为不会出现错误“未识别的变量”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:05:34.857

使用 isset（见[http://php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)）

```
$message = "not set";

if (isset($var)) {
    $message = "set";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T15:05:58.053

尝试类似的东西

```
$message = NULL;
if(something){
$message = "set";
}

if($message){
   echo $message;
} 
```

[**键盘**](http://codepad.org/OUMRhhMQ)

或检查变量是否由 `isset`

```
echo isset($var)?$var:''; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T15:07:13.680

最接近的是 isset 函数：

```
if (isset($somethink)) {
    $messege = "set";
} else {
    $message = "";
} 
```

或者

```
$message = (isset($somthink)) ? "set" : ""; 
```

但是，请注意，isset 检查变量是否已定义且不为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T15:07:51.233

```
<?php
if(something){
    $message = "set";
}
echo isset($message)?$message:'';//this will not give error now

?> 
```

# php - php cURL 发送信息以满足隐藏输入

> ID：13670488
> 
> 赞同：0
> 
> 时间：2012-12-02T15:03:50.397
> 
> 标签：php, curl

我正在尝试登录具有以下表单的站点：

```
 <div class="inner">
        <form name="loginform" action="/site/?module=account&action=login&return_url=" method="post">
        <input type="hidden" name="server" value="nice">
        <div class="inputs">
            <div class="user">
                <input style="width: 108px;" id="login_user" type="text" name="username" value="username" onfocus="inputFocus(this)" onblur="inputBlur(this)" />
            </div>
            <div class="pass">
                <input style="width: 108px;" id="login_pass" type="password" name="password" value="password" onfocus="inputFocus(this)" onblur="inputBlur(this)" />
                <input type="submit" style="visibility:hidden"/>
            </div>
        </div>
        <div class="submit">
            <div class="submit-btn" onclick="document.loginform.submit();"></div>
        </div>
        <div class="clear"></div>
        <div class="links">
            <a href="/site/?module=account&action=resetpass">Forgot Password?</a>
        </div>
    </form>

</div> 
```

使用这个 php 脚本：

```
<?php
$username=""; 
$password=""; 
$url="(handled this)"; 
$cookie="cookie.txt"; 

$postdata = "username=".$username."&password=".$password; 

$ch = curl_init(); 
curl_setopt ($ch, CURLOPT_URL, $url); 
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"); 
curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 0); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookie); 
curl_setopt ($ch, CURLOPT_REFERER, $url); 

curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata); 
curl_setopt ($ch, CURLOPT_POST, 1); 
$result = curl_exec ($ch); 

echo $result;  
curl_close($ch);

?> 
```

这将输出：

```
Invalid login server selected, please try again with a valid server. 
```

因为我还没有满足隐藏的输入。我尝试在谷歌搜索，但我看不到应该适用的 php 脚本。抱歉，他们教 cURL 时我不在学校。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T15:38:57.073

将服务器添加到您的 $postdata。

```
$postdata = "username=".urlencode($username)."&password=".urlencode($password)."&server=nice"; 
```

顺便说一句：您需要对参数名称和参数值进行 urlencode。

# nvidia - 在 OptiX 中转换几何组

> ID：13670489
> 
> 赞同：0
> 
> 时间：2012-12-02T15:03:54.293
> 
> 标签：nvidia, raytracing

我正在使用 NVIDIA 的 OptiX 光线追踪引擎。

我想知道如何在渲染期间转换 GeometryGroup（或其实例）的位置。

从示例中，我看到了如何翻译整个场景（使用中间按钮）。但我想翻译一个模型/几何组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T19:10:27.703

我最终完成了这段代码，它翻译了第一个几何模型：

```
void updateObjectPos(float dX, float dY, float dZ)
{
    // we have only one group - the main group whose childs are instances of Transform
    // mainGroup is an instance of Group
    Transform t = mainGroup->getChild<Transform>(0);
    float m[16];
    t->getMatrix(false, m, NULL);
    m[3] += dX;
    m[7] += dY;
    m[11]+= dZ;
    t->setMatrix(false, m, NULL);

    // mark dirty so that the acceleration structure gets rebuilt
    mainGroup->getAcceleration()->markDirty();
} 
```

# c# - 物理助手xaml revolve

> ID：13670490
> 
> 赞同：1
> 
> 时间：2012-12-02T15:04:00.860
> 
> 标签：c#, windows-runtime, physics-engine, farseer

我是初学者，所以请多多包涵。我正在使用物理帮助程序 XAML 库 ( [Farseer](http://farseerphysics.codeplex.com/) ) 在我的应用程序中使用物理。

目前，我遇到以下问题

1.  有一个物体，特别是一个三角形，围绕一个点旋转，同时它的顶点指向圆形关节。

2.  同样在我让三角形旋转（没有顶点指向）后，当它达到角速度时`0.016`，对象开始抖动很多。

请问有人可以帮我解决这个问题吗？在这背后花了这么多小时后，我处于理智的边缘。看起来并且应该相当简单，但是却避开了我

# c# - 使用抛物线和 XNA 使炮弹在空中飞行

> ID：13670496
> 
> 赞同：-1
> 
> 时间：2012-12-02T15:04:22.360
> 
> 标签：c#, math, xna, position

我想和 XNA 一起玩一段时间，所以我想尝试制作一款游戏，玩家可以用大炮射出炮弹并让它击中东西。我想通过使用抛物线让它在空中拱起来让它看起来更逼真，但是因为我无法正确实现我在网上找到的方程。我想知道是否有人知道我可以用来控制大炮的 X 和 Y 位置以生成抛物线的方程式。我所拥有的只是我希望它启动的程度，大炮的起始位置和它飞行的速度并不重要。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:33:33.963

让我们假设一个坐标系，`y`正向向上，`x`向右增加。让我们假设炮弹从原点 (0, 0) 以 0`v_init m/s`的角度向上和向右发射`A`（注意弧度与度数；如果您的系统要求角度以弧度为单位，您可以转换度数除以 180 并乘以`pi`) 得到的弧度。

如果炮弹以初始速度 射出`v_init`，则该`x`方向上的速度为：

```
v_x = cos(A) * v_init 
```

方向上的速度`y`为：

```
v_y = sin(A) * v_init 
```

炮弹的高度将通过以下方式指定：

```
h = (1/2)gt^2 + (v_y * t) 
```

其中 g 是重力加速度 -9.81 m/s^2，并且`t`是以秒为单位的时间。

因此，在任何给定时间`t`，您的炮弹将位于：

```
x_t = v_x * t
y_t = 1/2(-9.81)t^2 + (v_y * t) 
```

`0`您可以使用该等式通过将高度设置为并求解来确定球在空中的时间`t`：

```
t_total = 2 * (v_y / 9.81) 
```

球将在飞行途中达到最大高度，因此抛物线的峰值将位于：

```
x_peak = 1/2 * t_total * v_x
y_peak = 1/2 * (-9.81) (t_total / 2)^2 + (v_y * t_total / 2) 
```

炮弹将落在：

```
x_land = t_total * v_x
y_land = 0 
```

# loading - 使用计时器加载页面 - HTML/PHP

> ID：13670501
> 
> 赞同：-2
> 
> 时间：2012-12-02T15:05:04.743
> 
> 标签：loading

我将如何用一个简单的 Gif 和一个计时器在 HTML/PHP 中制作一个加载页面，然后在 5 秒后重定向到另一个页面。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-12-02T15:13:45.453

也许这个[Javascript 重定向教程](http://www.code-sucks.com/code/javascript/template.php?tutorial=redirect_with_timer.php)可以帮助你。

# java - 更改 Java 小程序的外观

> ID：13670510
> 
> 赞同：2
> 
> 时间：2012-12-02T15:05:35.737
> 
> 标签：java, swing, look-and-feel, japplet, nimbus

好的，所以我制作了一个测试 java 小程序以确保我知道如何制作它们，但我的默认外观和感觉看起来真的很难看。所以我想切换它 Nimbus 但我的默契不起作用。我已经完成了大约一个小时的谷歌搜索，但没有任何结果，除了一个有问题的论坛，但没有我能理解的答案。有任何想法吗？如果这很难理解，我很抱歉。

```
import java.applet.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.net.*;

public class Websitetest extends JApplet implements ActionListener, Runnable {

    boolean i = false;
    Color red = new Color(255, 0, 0);
    Color lightgrey = new Color(200, 200, 200);
    Thread runner;    

    public void init() {
        setLookAndFeel();
        Button dp = new Button("Don't press");
        dp.addActionListener(this);
        FlowLayout flow = new FlowLayout();
        setLayout(flow);
        add(dp);
    }

    public void paint(Graphics screen) {
        Graphics2D screen2D = (Graphics2D) screen;
        if (i == false) {screen2D.setColor(lightgrey);}
        else {screen2D.setColor(red);}
        screen2D.fillRect(0, 0, getSize().width, getSize().height);
        screen2D.setColor(Color.black);
        if (i == false) {screen2D.drawString("", 5, 60);}
        else {screen2D.drawString("I SAID DON'T PRESS!", 90, 60);}
    }

    public void start() {
        if (runner == null) {
            runner = new Thread(this);
            runner.start();
        }
    }

    public void stop() {
        if (runner != null) {
            runner = null;
        }
    }

    public void run() {
        Thread thisThread = Thread.currentThread();
    }

    public void actionPerformed(ActionEvent event) {
        i = true;
        repaint();
    }

    private void setLookAndFeel() {
        try {
          UIManager.setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel");
        } catch (Exception exc) {
            //ignore error
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T15:09:10.497

[Oracle 网站](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/nimbus.html)上有关该主题的此页面表明 Nimbus 可能不可用。他们使用以下片段来切换到 Nimbus **（如果可用）**。

```
try {
    for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
        if ("Nimbus".equals(info.getName())) {
            UIManager.setLookAndFeel(info.getClassName());
            break;
        }
    }
} catch (Exception e) {
    // If Nimbus is not available, you can set the GUI to another look and feel.
} 
```

由于您在设置之前不检查 Nimbus 的存在：您确定它在您的系统上真的可用吗？

我建议暂时删除该`catch`子句，然后看看您是否收到有关 Nimbus 未安装的错误消息。

# magento - Magento - 静态块中的 cms 页面标题

> ID：13670511
> 
> 赞同：1
> 
> 时间：2012-12-02T15:05:51.357
> 
> 标签：magento, magento-1.7

有没有办法在静态块中获取当前的 cms 页面标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:34:25.180

答案是“是”，但读作“否”。

[默认标记标签列表](http://www.magentocommerce.com/wiki/3_-_store_setup_and_management/cms/markup_tags)非常有限，不给您这种可能性。但是，您可以创建自己的模块，该模块将添加一个块，该块将通过给定的 ID 打印出 CMS 页面的标题。所以这一切都归结为你有多需要它，以及你准备投入多少努力。

# python - python中的批处理线程

> ID：13670513
> 
> 赞同：4
> 
> 时间：2012-12-02T15:05:59.093
> 
> 标签：python, multithreading

我正在更新一些看起来像这样的现有代码：

```
for i in list
  thread.start_new_thread(main, (i[0],i[1],i[2],2)) 
```

这会导致为列表中的每个项目创建线程，但在创建所有线程之前不会执行。我想以小组的形式执行线程，或者让它们在创建后直接执行。

（这里有很多关于python线程的讨论，如果我错过了已经被问到的这类问题，很抱歉......）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T15:17:18.277

您可能会发现该[`concurrent.futures`](http://docs.python.org/dev/library/concurrent.futures.html#threadpoolexecutor)模块很有用。它也可用于名称为 的 Python 2 [`futures`](http://pypi.python.org/pypi/futures/2.1.3)。例如，要同时`main`为每个项目调用一个函数`MY_LIST`，但最多使用 5 个线程，您可以编写：

```
from concurrent.futures import ThreadPoolExecutor

with ThreadPoolExecutor(max_workers=5) as executor:
    for result in executor.map(main, MY_LIST):
        # Do something with result
        print(result) 
```

# c++ - c 使用多维数组

> ID：13670523
> 
> 赞同：-1
> 
> 时间：2012-12-02T15:07:13.637
> 
> 标签：c++, arrays, 2d

第一次在我的大学项目中使用二维数组。

我正在努力研究如何将用户输入的值放入数组中的特定槽中。

我所拥有的是。

```
cout << "Enter Number of Groups" << endl;
cin >> DefinedGroups;

int user_groups[definedgroups] [2]

while (havent worked out the condition yet)
{
cout << " Enter Lower Range " << endl;
cin >> Lrange;
cout << " Enter Higher Range " << endl;
cin >> Hrange;
} 
```

任何人都知道如何将 Lrange 和 Hrange 中的值输入到数组中，例如 0,1 和 1,1，然后每次将定义的组增加 1。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T15:09:51.467

首先，您的代码使用 GCC 扩展的可变长度数组。这意味着您的代码不可移植。

现在要读入数组中的元素，您可以简单地执行以下操作：

```
cout << " Enter Lower Range " << endl;
cin >> user_groups[i][0];
cout << " Enter Higher Range " << endl;
cin >> user_groups[i][1]; 
```

假设这`i`是您在找出 while 循环条件时将获得的数组索引。

如果您想启发自己，可以使用更惯用的方法：

```
int defined_groups;
std::cin >> defined_groups;
std::vector<std::pair<int, int>> user_groups;
for (int i = 0; i < defined_groups; i++) {
  int lower_range, upper_range;
  if (cout << "Enter Lower Range " << endl &&
      std::cin >> lower_range &&
      cout << " Enter Higher Range " << endl &&
      std::cin >> upper_range) {
    user_groups.push_back(std::make_pair(lower_range, upper_range));
  }
} 
```

# java - Java：使用 nextInt() 过滤掉用户输入

> ID：13670525
> 
> 赞同：0
> 
> 时间：2012-12-02T15:07:18.047
> 
> 标签：java

我正在制作一个程序，用户输入他们的标记，如果他们输入超过 100 则程序停止，但是我似乎无法停止超过 100 的值也被分配给 Marks 变量......

```
Scanner scan = new Scanner(System.in);
Int Marks = 0;

while (Marks >= 0 && Marks <= 100) {
        System.out.println("Enter Students Test Marks Here");

        Marks = input.nextInt();
}

// Output Test
System.out.println("The Marks variable value is " +Marks); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T15:13:24.467

当你输入大于 100 的值时，你就在里面：

```
while (Marks >= 0 && Marks <= 100) {
    System.out.println("Enter Students Test Marks Here");

    Marks = input.nextInt();} 
```

因此，该值被分配给`Marks`您`while`停止的时间，因此它将在最后一行打印：

`System.out.println("The Marks variable value is " +Marks);`

一个可能的解决方案可能是：

```
boolean done = true;
int marks;
while(done == true){
    System.out.println("Enter Student Test Marks Here");
    if(input.nextInt() <= 0 || input.nextInt() >= 100){
        done = false;
    }else{
        marks = input.nextInt();
    }
}

System.out.println("The Marks variable value is " + marks); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:38:18.553

这是怎么回事？

```
 Marks = input.nextInt();
 while (Marks >= 0 && Marks <= 100) {
    System.out.println("Enter Students Test Marks Here");

    Marks = input.nextInt();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T18:01:43.560

你有条件倒退！**在**条件为真时`while`执行，**直到**条件为真......所以，你需要做的是：

 ****```
int marks = -1; // Start with an "illegal" marks value

while ((marks<0) || (marks>100)) { // while we have an illegal mark ...
    System.out.println("Enter Students Test Marks Here (0..100)");

    marks = input.nextInt(); // ... ask for a new one
} 
```

在此之后，您的标记变量包含 0 到 100 之间的有效数字。

**编辑：**

我刚刚注意到......在用户输入正确的值之前，您没有询问提示用户，而是运行程序直到他输入错误的值并且仅仅阻止分配给`Marks`变量......如果这确实是你之后，您可以这样做：

```
int marks = 0;

while (true) { // Just keep running
    System.out.println("Enter Students Test Marks Here (<0 or >100 to quit)");
    int newMark = input.nextInt();
    if ((newMark<0) || (newMark>100)) break; // Skip out of while loop
    marks = newMark; // Only happens if newMark is between 0 and 100
} 
```

您还可以将`break`部分替换`return`为不仅退出 while 循环，还退出调用它的函数，或者`System.exit(0)`如果您想立即退出程序，甚至可以退出。

但诀窍是在将输入分配给标记之前使用临时变量来检查输入。

（顺便说一句：作为惯例，Java 中的变量名通常以小写字母开头......）****

# ruby-on-rails-3 - Rails 和 Mongoid 以及重复查找查询

> ID：13670526
> 
> 赞同：1
> 
> 时间：2012-12-02T15:07:19.543
> 
> 标签：ruby-on-rails-3, mongoid, mongoid3

我的 Rails 应用程序中有这种非常奇怪的行为。所有查找查询都运行两次。我已经通过在 ap 端和 DB 端记录查询来验证这一点。我只在开发模式下测试过它。

我已经在方法中添加了日志记录，以查看这些方法是否被多次调用，但事实并非如此。

所有保存都只运行一次，因此没有问题。只有数据库中的数据越多，页面加载会越来越慢的问题，因为它会两次查询所有数据。

我什至不知道我应该粘贴代码的哪些部分，因为我不知道这可能来自哪里。

我正在使用`mongoid (3.0.13), rails (3.1.3)`

这是整个源代码的 github 链接[https://github.com/deiga/new-Roydon/tree/develop](https://github.com/deiga/new-Roydon/tree/develop)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T15:54:38.560

您现在可能已经解决了它，但我遇到了同样的问题，原因是`bullet`gem，它会重新运行每个 Mongoid 发现以测量性能。

我可以看到您的 Gemfile 中也包含了它，所以可能就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T17:57:49.920

`Shop::Category::all_products`调用 Ancestry方法的似乎`children`正在创建一个 Mongoid 选择。`ProductsController`同时，您在指定时已经获取了您的关联产品`includes(:products)`。

尝试`includes(:products)`从第 5 行`ProductsController`删除，看看它是否从该控制器操作中删除了重复项。

# jquery - 现场直播的 jQuery 选择插件

> ID：13670527
> 
> 赞同：0
> 
> 时间：2012-12-02T15:07:23.807
> 
> 标签：jquery, ajax, jquery-chosen

我在寻找使用 Chosen 插件注册多选的方法时遇到了一些麻烦。我正在使用 Ajax 将表单动态加载到 DOM 中，并希望其中一个选择使用 Chosen 插件。

我试过打电话

```
$('.chosen-element').chosen() 
```

在 ajaxComplete 上，这表明我将无法生成自定义事件并绑定到它。我也尝试克隆返回的选择并使用插件注册克隆的元素，但无济于事。

有没有人找到一种让 Chosen 动态工作的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:08:06.167

你`not have closing quote`为选择器做的，你有分号`;`而不是单引号`'`

改变

```
$('.chosen-element;).chosen() 
```

至

```
$('.chosen-element').chosen() 
```

# java - 创建名为“sessionFactory”的 bean 时出错

> ID：13670528
> 
> 赞同：0
> 
> 时间：2012-12-02T15:07:27.240
> 
> 标签：java, spring, hibernate, struts2

这是我的 web.xml 和 applicationContext.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="
       http://www.springframework.org/schema/beans 
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/tx 
       http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
       http://www.springframework.org/schema/aop 
       http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">

    <bean id="sessionFactory" scope="singleton"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="configLocation" value="classpath:hibernate.cfg.xml"></property>
    </bean>

    <!-- Springs Hibernate Transaction Manager -->
    <bean id ="transactionManager" class = "org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name = "sessionFactory" ref = "sessionFactory"/>
    </bean>

    <tx:annotation-driven/>

    <!-- Inject my business services class to the action -->
    <bean id="services" class ="services.Services" scope ="singleton">
        <property name = "sessionFactory" ref = "sessionFactory"/>
    </bean>

</beans> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0">
    <display-name>Events</display-name>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.htm</welcome-file>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>default.html</welcome-file>
        <welcome-file>default.htm</welcome-file>
        <welcome-file>default.jsp</welcome-file>
    </welcome-file-list>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Sitemesh (needs to be before struts) -->
    <filter>
        <filter-name>sitemesh</filter-name>
        <filter-class>com.opensymphony.sitemesh.webapp.SiteMeshFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>sitemesh</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <!-- Struts2 config (needs to be after sitemesh) -->
    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

</web-app> 
```

在启动 tomcat 时，此错误出现在日志中

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Instantiation of bean failed; nested exception is java.lang.NoClassDefFoundError: org/hibernate/cfg/Configuration
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:997)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:943)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:587)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:925)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:472)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NoClassDefFoundError: org/hibernate/cfg/Configuration
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.getDeclaredConstructor(Unknown Source)
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:78)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:990)
    ... 23 more
Caused by: java.lang.ClassNotFoundException: org.hibernate.cfg.Configuration
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    ... 29 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:38:52.137

根据我读过的评论，`hibernate-core`Eclipse 没有注意到你的 jar。重建你的类路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-07T16:39:19.537

这是一些非常好的建议.. 我错过了 Hibernate-core Jar 那是因为它没有让会话工厂启动......

下面是我的 POM.XML 供参考。

http://maven.apache.org/xsd/maven-4.0.0.xsd"> 4.0.0 HibernateReverseEng HibernateReverseEng 0.0.1-SNAPSHOT src maven-compiler-plugin 3.3 1.8 1.8 JBoss 存储库 [http://repository.jboss。 com/maven2/](http://repository.jboss.com/maven2/)

```
<properties>
    <springframework.version>4.0.6.RELEASE</springframework.version>
</properties>

<dependencies>

    <!-- Spring Core and framework dependencies -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${springframework.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${springframework.version}</version>
    </dependency>

    <!-- JUnit testing framework -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
        <scope>test</scope>
    </dependency>

    <!-- Spring framework -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring</artifactId>
        <version>2.5.6</version>
    </dependency>

    <!-- Spring AOP dependency -->
    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2</version>
    </dependency>

    <!-- MySQL database driver -->
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.9</version>
    </dependency>

    <!-- Hibernate framework -->
    <dependency>
        <groupId>hibernate</groupId>
        <artifactId>hibernate3</artifactId>
        <version>3.2.3.GA</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>3.3.0.GA</version>
    </dependency>

    <!-- Hibernate annotation -->
    <dependency>
        <groupId>hibernate-annotations</groupId>
        <artifactId>hibernate-annotations</artifactId>
        <version>3.3.0.GA</version>
    </dependency>

    <dependency>
        <groupId>hibernate-commons-annotations</groupId>
        <artifactId>hibernate-commons-annotations</artifactId>
        <version>3.0.0.GA</version>
    </dependency>

    <!-- Hibernate library dependecy start -->
    <dependency>
        <groupId>dom4j</groupId>
        <artifactId>dom4j</artifactId>
        <version>1.6.1</version>
    </dependency>

    <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
        <version>1.1.1</version>
    </dependency>

    <dependency>
        <groupId>commons-collections</groupId>
        <artifactId>commons-collections</artifactId>
        <version>3.2.1</version>
    </dependency>

    <dependency>
        <groupId>antlr</groupId>
        <artifactId>antlr</artifactId>
        <version>2.7.7</version>
    </dependency>
    <!-- Hibernate library dependecy end -->

    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.4</version>
    </dependency>

    <dependency>
        <groupId>org.eclipse.persistence</groupId>
        <artifactId>javax.persistence</artifactId>
        <version>2.0.0</version>
    </dependency>

</dependencies> 
```

# asp.net-mvc - 在弹出窗口中重新加载部分视图

> ID：13670529
> 
> 赞同：1
> 
> 时间：2012-12-02T15:07:35.340
> 
> 标签：asp.net-mvc, devexpress

我使用 mvc devexpress 我的问题是：当我通过 ajax 在模态弹出窗口中重新加载部分视图时，除部分视图之外的所有内容都删除

，我想要包含部分视图的弹出窗口，我可以通过单击（弹出窗口中的按钮）使用 ajax 刷新部分视图，并且在单击并刷新部分视图后弹出窗口保持打开状态，我只想在弹出窗口中刷新部分视图，并且弹出窗口保持打开状态:(

请帮助我这是我的代码

```
@Html.DevExpress().PopupControl(
                            settings =>
                            {
                                settings.Name = "GetDatepopUp";
                                settings.PopupElementID = "GetDate";
                                settings.PopupAction = PopupAction.LeftMouseClick;
                                settings.CloseAction = CloseAction.CloseButton;

                                settings.Modal = true;
                                settings.ShowShadow = true;
                                settings.ShowFooter = false;
                                settings.ShowHeader = true;
                                settings.PopupAnimationType = PopupAnimationType.Slide;
                                settings.Width = 50;
                                settings.Height = 50;
                                settings.AllowDragging = false;
                                settings.EnableAnimation = true;
                                settings.ShowLoadingPanel = true;
                                settings.ShowOnPageLoad = false;
                                settings.SetContent(() =>
                                {
                       @Html.RenderPartial("CalenderContainerPartialView", "Message");
                                });

                            }).GetHtml()

  ***************************************************************
  @using (
  Ajax.BeginForm(
   "CalenderContainerPartialView",
   new AjaxOptions 
    { HttpMethod = "Post", 
      UpdateTargetId = "PartialToRefresh",
      InsertionMode = InsertionMode.Replace 
    }
   ))
  { 
  @Html.TextBox("Name");
  @Html.DevExpress().Button(
                            settings =>
                            {
                                settings.Name = "chkfffff" ;
                                settings.Text = "test";
                                settings.UseSubmitBehavior = true;
                            }).GetHtml()
  }
 <br />
 <div id="PartialToRefresh">
   @{Html.RenderPartial("Calender");}
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T12:00:08.147

改变

**`@Html.RenderPartial("CalenderContainerPartialView", "Message");`**

至

**`Html.RenderPartial("CalenderContainerPartialView", "Message");`**

发现于： http: [//www.devexpress.com/Support/Center/Question/Details/Q353474](http://www.devexpress.com/Support/Center/Question/Details/Q353474)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:51:36.790

为此，您可以使用内置的 PopupControl 回调。

看看[这个](http://demos.devexpress.com/MVC/PopupControl/LoadOnDemand)演示。

# java - 编译错误 - com.mysql.jdbc.Driver 无法解析为变量

> ID：13670536
> 
> 赞同：5
> 
> 时间：2012-12-02T15:08:12.450
> 
> 标签：java, eclipse, jdbc

我对预先捆绑的 STS 几乎不熟悉。我正在 Fedora 17 上的 Eclipse/Spring 中尝试 JDBC for MySQL

下载了 mysql JDBC 驱动程序 (mysql-connector-java-5.1.22-bin.jar)。然后在IDE中

1.  创建了一个项目并将其命名为 JDBC
2.  在项目下创建了一个名为“lib”的文件夹
3.  去 Project > Properties 。选择 Java 构建路径，然后选择“库”选项卡。单击“添加罐子”选择 JDBC > lib > mysql---.jar 并单击确定。这在 Project Explorer 窗格下添加了一个“Referenced Libraries”，在它下面我看到了 mysql jar 文件。
4.  在项目下写了如下代码

我有点以为我已经完成了编译所需的工作。然而，我看到

`Class.forName(com.mysql.jdbc.Driver);`

com.mysql.jdbc.Driver 无法解析为变量

你能告诉我这里有什么问题吗？

```
 import java.sql.Connection;
    import java.sql.DriverManager;
    import java.sql.PreparedStatement;
    import java.sql.ResultSet;
    import java.sql.SQLException;
    import java.sql.Statement;

    public class TestJDBC {

        /**
         * @param args
         */
        public static void main(String[] args)  throws Exception{
            // TODO Auto-generated method stub
            Connection connection = null;
            Statement statement = null;
            PreparedStatement preparedStatement = null;
            ResultSet resultSet = null;
            try {
                Class.forName(com.mysql.jdbc.Driver);
                connection = DriverManager.getConnection("jdbc:mysql://localhost/testdb?" + 
                             "user=myuser&password=mypwd");
                if (connection != null) {
                    System.out.println ("Connected may be?");
                    connection.close();
                }
                else {
                    System.out.println ("Not connected?");
                }
            }
            catch (Exception e) {
                connection.close();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T15:10:38.977

```
Class.forName("com.mysql.jdbc.Driver"); 
```

或者

```
Class.forName(com.mysql.jdbc.Driver.class.getName()); 
```

会工作得更好。（第二个编译但没有真正意义，因为它假设类已经加载:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T15:10:42.877

你想使用：

```
Class.forName("com.mysql.jdbc.Driver"); 
```

将来，请注意编译器会告诉您它所期望的：一个变量。您只需要弄清楚如何修改或将您拥有的东西转换成它想要的东西。在这种情况下，可以使用任何转换为​​值（常量、变量或返回值的方法）的东西。

# eclipse - 无法为模块部署部署错误 应用程序名称已在使用中。请选择其他名称。

> ID：13670538
> 
> 赞同：1
> 
> 时间：2012-12-02T15:08:21.657
> 
> 标签：eclipse, glassfish, glassfish-3

我有与 Eclipse Helios 集成的 Glassfish 3 服务器，当我尝试清理项目或尝试重新发布项目时，我收到以下错误

```
cannot Deploy Deployment Error for module  Application name  is already in use. 
Please pick a different name. 
```

我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T15:19:24.990

a) 寻找通过 Eclipse 强制重新部署的选项。

b）试试这个：

1.  干净的
2.  转到 /domains/[yourdomain]/applications 并删除您的应用程序的文件夹
3.  转到 /domains/[yourdomain]/config/domain.xml 并搜索应用程序的引用，例如，任何包含类似内容的行都`<application-ref ref="yourApplication"`应该删除
4.  重启 Glassfish

# ruby - Nokogiri XPath 未找到某些节点

> ID：13670541
> 
> 赞同：4
> 
> 时间：2012-12-02T15:08:34.587
> 
> 标签：ruby, xml, nokogiri

我正在使用 Nokogiri 修改现有的 XML，但在选择某些节点时遇到问题。

以下是相关的 XML 片段：

```
<ProductCatalog>
  <ProductLineItem>
    <updi:ProductIdentification>
      <updi:ProductName>800-22283-03</updi:ProductName> 
```

我可以通过以下方式找到较低的两个节点：

```
doc.xpath("//updi:ProductIdentification") => #<Nokogiri::XML...
doc.xpath("//updi:ProductName") => #<Nokogiri::XML... 
```

但是，如果我尝试选择上面的节点之一：

```
doc.xpath("//ProductLineItem") => [] 
```

我得到一个空数组。它似乎与前缀有关。我可以找到任何有前缀的元素，但找不到没有前缀的元素。

更新：这是（相当长的）命名空间：

```
xsi:schemaLocation="urn:rosettanet:specification:interchange:ProductCatalogInformationDistribution:xsd:schema:01.00 ..\..\XML\Interchange\ProductCatalogInformationDistribution_01_00.xsd"
xmlns:dplcs="urn:rosettanet:specification:domain:Design:ProductLifeCycleStatusCode:xsd:codelist:01.03"
xmlns:rrt="urn:rosettanet:specification:domain:Shared:RateType:xsd:codelist:01.01" 
xmlns:dl="urn:rosettanet:specification:domain:Logistics:xsd:schema:02.15" 
xmlns:ictc="urn:rosettanet:specification:domain:Design:CatalogType:xsd:codelist:01.00" 
xmlns:updi="urn:rosettanet:specification:universal:ProductIdentification:xsd:schema:01.04" 
xmlns:dddt="urn:rosettanet:specification:domain:Design:DateType:xsd:codelist:01.00" 
xmlns:dsdc="urn:rosettanet:specification:domain:Logistics:ShipDateCode:xsd:codelist:01.03" 
xmlns:ucr="urn:rosettanet:specification:universal:Currency:xsd:codelist:01.02" 
xmlns:dpiac="urn:rosettanet:specification:domain:Logistics:PortIdentifierAuthorityCode:xsd:codelist:01.03" 
xmlns:rptc="urn:rosettanet:specification:domain:Shared:PricingTypeCode:xsd:codelist:01.03" 
xmlns:dit="urn:rosettanet:specification:domain:Procurement:InventoryType:xsd:codelist:01.03" 
xmlns:dtt="urn:rosettanet:specification:domain:Procurement:TransactionType:xsd:codelist:01.04" 
xmlns:upd="urn:rosettanet:specification:universal:PhysicalDimension:xsd:schema:01.05" 
xmlns:dcst="urn:rosettanet:specification:domain:Logistics:CustomsType:xsd:codelist:01.03" 
xmlns:dsd="urn:rosettanet:specification:domain:Logistics:ShippingDocument:xsd:codelist:01.02" 
xmlns:uci="urn:rosettanet:specification:universal:ContactInformation:xsd:schema:01.03" 
xmlns:dpcm="urn:rosettanet:specification:domain:Procurement:PurchaseMethod:xsd:codelist:01.03" 
xmlns:rpsc="urn:rosettanet:specification:domain:Shared:ProductStatusCode:xsd:codelist:01.01" 
xmlns:dgrc="urn:rosettanet:specification:domain:Marketing:GeographicRegionCode:xsd:codelist:01.02" 
xmlns:dtrt="urn:rosettanet:specification:domain:Logistics:TrackingReferenceType:xsd:codelist:01.06" 
xmlns:umtq="urn:rosettanet:specification:universal:MimeTypeQualifier:xsd:codelist:01.02" 
xmlns:dcrt="urn:rosettanet:specification:domain:Procurement:CustomerType:xsd:codelist:01.03" 
xmlns:dscd="urn:rosettanet:specification:domain:Logistics:ShipmentChangeDisposition:xsd:codelist:01.03" 
xmlns:uc="urn:rosettanet:specification:universal:Country:xsd:codelist:01.02" 
xmlns="urn:rosettanet:specification:interchange:ProductCatalogInformationDistribution:xsd:schema:01.00" 
xmlns:dpc="urn:rosettanet:specification:domain:Procurement:PaymentCondition:xsd:codelist:01.03" 
xmlns:rpmt="urn:rosettanet:specification:domain:Shared:PaymentType:xsd:codelist:01.01" 
xmlns:dft="urn:rosettanet:specification:domain:Procurement:FinanceTerms:xsd:codelist:01.03" 
xmlns:dtq="urn:rosettanet:specification:domain:Procurement:TotalQualifier:xsd:codelist:01.03" 
xmlns:ume="urn:rosettanet:specification:universal:MonetaryExpression:xsd:schema:01.04" 
xmlns:dcp="urn:rosettanet:specification:domain:Design:Compliant:xsd:codelist:01.02" 
xmlns:drsc="urn:rosettanet:specification:domain:Marketing:RegistrationStatusCode:xsd:codelist:01.03" 
xmlns:uat="urn:rosettanet:specification:universal:AbstractType:xsd:schema:01.02" 
xmlns:dp="urn:rosettanet:specification:domain:Procurement:xsd:schema:02.17" 
xmlns:rpm="urn:rosettanet:specification:domain:Shared:PaymentMethod:xsd:codelist:01.02" 
xmlns:dfrt="urn:rosettanet:specification:domain:Procurement:ForecastReferenceType:xsd:codelist:01.03" 
xmlns:dtec="urn:rosettanet:specification:domain:Procurement:TaxExemptionCode:xsd:codelist:01.03" 
xmlns:ulc="urn:rosettanet:specification:universal:Locations:xsd:schema:01.04" 
xmlns:dccc="urn:rosettanet:specification:domain:Procurement:CreditCardClassification:xsd:codelist:01.03" 
xmlns:drlc="urn:rosettanet:specification:domain:Logistics:ReturnLabelCode:xsd:codelist:01.03" 
xmlns:st="http://www.ascc.net/xml/schematron" 
xmlns:dnecc="urn:rosettanet:specification:domain:Logistics:NationalExportControlClassification:xsd:codelist:01.03" 
xmlns:rpktc="urn:rosettanet:specification:domain:Shared:PackageTypeCode:xsd:codelist:01.01" 
xmlns:uwt="urn:rosettanet:specification:universal:WeightType:xsd:codelist:01.01" 
xmlns:dfpt="urn:rosettanet:specification:domain:Logistics:FreightPaymentTerms:xsd:codelist:01.03" 
xmlns:dte="urn:rosettanet:specification:domain:Procurement:TransportEvent:xsd:codelist:01.03" 
xmlns:ul="urn:rosettanet:specification:universal:Language:xsd:codelist:01.02" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:dbpq="urn:rosettanet:specification:domain:Procurement:BookPriceQualifier:xsd:codelist:01.04" 
xmlns:drl="urn:rosettanet:specification:domain:Logistics:RouteLocation:xsd:codelist:01.03" 
xmlns:ssdh="urn:rosettanet:specification:system:StandardDocumentHeader:xsd:schema:01.16" 
xmlns:dmk="urn:rosettanet:specification:domain:Marketing:xsd:schema:02.12" 
xmlns:rmat="urn:rosettanet:specification:domain:Shared:MonetaryAmountType:xsd:codelist:01.01" 
xmlns:uuom="urn:rosettanet:specification:universal:UnitOfMeasure:xsd:codelist:01.03" 
xmlns:dfe="urn:rosettanet:specification:domain:Procurement:ForecastEvent:xsd:codelist:01.03" 
xmlns:dst="urn:rosettanet:specification:domain:Procurement:ShipmentTerms:xsd:codelist:01.03" 
xmlns:udt="urn:rosettanet:specification:universal:DataType:xsd:schema:01.04" 
xmlns:dacc="urn:rosettanet:specification:domain:Procurement:AccountClassification:xsd:codelist:01.03" 
xmlns:dptt="urn:rosettanet:specification:domain:Logistics:PortType:xsd:codelist:01.03" 
xmlns:sha="urn:rosettanet:specification:domain:Shared:xsd:schema:01.10" 
xmlns:dlv="urn:rosettanet:specification:domain:Design:Level:xsd:codelist:01.02" 
xmlns:rict="urn:rosettanet:specification:domain:Shared:InvoiceChargeType:xsd:codelist:01.02" 
xmlns:utt="urn:rosettanet:specification:universal:TaxType:xsd:codelist:01.02" 
xmlns:ddwsr="urn:rosettanet:specification:domain:Marketing:DesignWinStatusReason:xsd:codelist:01.03" 
xmlns:dsm="urn:rosettanet:specification:domain:Logistics:ShipmentMode:xsd:codelist:01.05" 
xmlns:udct="urn:rosettanet:specification:universal:DocumentType:xsd:codelist:01.09" 
xmlns:dac="urn:rosettanet:specification:domain:Design:ActionCode:xsd:codelist:01.03" 
xmlns:dpsr="urn:rosettanet:specification:domain:Procurement:ProductSubstitutionReason:xsd:codelist:01.03" 
xmlns:sft="urn:rosettanet:specification:system:TPIRFileType:xsd:codelist:01.01" 
xmlns:dltcc="urn:rosettanet:specification:domain:Procurement:LeadTimeClassificationCode:xsd:codelist:01.03" 
xmlns:ri="urn:rosettanet:specification:domain:Shared:Interval:xsd:codelist:01.01" 
xmlns:urss="urn:rosettanet:specification:system:xml:1.0" 
xmlns:dds="urn:rosettanet:specification:domain:Design:xsd:schema:02.15" 
xmlns:dslt="urn:rosettanet:specification:domain:Procurement:SaleType:xsd:codelist:01.04" 
xmlns:udc="urn:rosettanet:specification:universal:Document:xsd:schema:01.08" 
xmlns:dabcc="urn:rosettanet:specification:domain:Design:ABCCode:xsd:codelist:01.02" 
xmlns:dppt="urn:rosettanet:specification:domain:Procurement:ProductProcurementType:xsd:codelist:01.03" 
xmlns:rwtc="urn:rosettanet:specification:domain:Shared:WarrantyType:xsd:codelist:01.01" 
xmlns:dlit="urn:rosettanet:specification:domain:Logistics:InstructionType:xsd:codelist:01.00" 
xmlns:rfob="urn:rosettanet:specification:domain:Shared:FreeOnBoard:xsd:codelist:01.01" 
xmlns:upri="urn:rosettanet:specification:universal:ProcessRoleIdentifier:xsd:codelist:01.08" 
xmlns:ddrn="urn:rosettanet:specification:domain:Marketing:DesignRegistrationNotification:xsd:codelist:01.02" 
xmlns:dsh="urn:rosettanet:specification:domain:Procurement:SpecialHandling:xsd:codelist:01.04" 
xmlns:ud="urn:rosettanet:specification:universal:Dates:xsd:schema:01.03" 
xmlns:dpms="urn:rosettanet:specification:domain:Marketing:ProjectMarketSegment:xsd:codelist:01.02" 
xmlns:rssl="urn:rosettanet:specification:domain:Shared:ShippingServiceLevel:xsd:codelist:01.01" 
xmlns:dldr="urn:rosettanet:specification:domain:Logistics:LotDiscrepancyReason:xsd:codelist:01.03" 
xmlns:rat="urn:rosettanet:specification:domain:Shared:AmountType:xsd:codelist:01.02" 
xmlns:upi="urn:rosettanet:specification:universal:PartnerIdentification:xsd:schema:01.12" 
xmlns:ddp="urn:rosettanet:specification:domain:Marketing:Disposition:xsd:codelist:01.02" 
xmlns:dsfr="urn:rosettanet:specification:domain:Procurement:SpecialFulfillmentRequest:xsd:codelist:01.03" 
xmlns:ucs="urn:rosettanet:specification:universal:CountrySubdivision:xsd:codelist:01.02 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T15:19:27.407

最简单的快速破解解决方案是从文档中完全删除命名空间：

```
require 'nokogiri'
xml = Nokogiri.XML "<root xmlns='foo' xmlns:bar='whee'><a/><bar:b /></root>"

p xml.xpath('//b').length     #=> 0
p xml.xpath('//bar:b').length #=> 1
p xml.xpath('//a').length     #=> 0
xml.remove_namespaces!
p xml.xpath('//a').length     #=> 1
p xml.xpath('//b').length     #=> 1 
```

但是，如果您需要保留名称空间（例如修改文档并重新保存它，或者您在各种名称空间中存在冲突的元素或属性名称），上述方法不是有效的解决方案。如果您无法对命名空间进行核对，您可以创建一个前缀并告诉 Nokogiri 它对应于什么……</p>

```
xml = Nokogiri.XML "<root xmlns='foo' xmlns:bar='whee'><a/><bar:b /></root>"
p xml.xpath('//x:a','x'=>'foo').length  #=> 1 
```

...其中字符串`foo`是文档中拥有元素的命名空间的 URI，该元素具有默认命名空间（通常在根目录上），字符串`x`是您想要的任何内容（与已声明的另一个命名空间不冲突在您的文档中）。或者，更简单地说，您可以将`xmlns`其用作默认命名空间的前缀：

```
p xml.xpath('//xmlns:a').length  #=> 1 
```

或者，如果您需要离开命名空间并且可以构造一个合理的 CSS 样式选择器来获取您需要的节点，那么您可以使用以下`css`方法：

```
require 'nokogiri'
xml = Nokogiri.XML "<root xmlns='foo' xmlns:bar='whee'>
  <a/>
  <bar:b />
  <c xmlns='jim'><d/></c>
</root>"

p xml.css('a').length, #=> 1
  xml.css('b').length, #=> 0
  xml.css('c').length, #=> 0
  xml.css('d').length  #=> 0 
```

如上所示，请注意，这仅适用于与根元素位于同一命名空间中的节点。

# javascript - 表嵌入 TD 与 COLSPAN 搞乱父表

> ID：13670542
> 
> 赞同：1
> 
> 时间：2012-12-02T15:08:39.643
> 
> 标签：javascript, html, html-table

我有一个表格，您可以在其中单击该行以查看更多详细信息。详细信息是使用 colspan 的嵌入式表格。这应该占据整个宽度。最终发生的是嵌入式表格将第一个 col 强制为嵌入式表格的宽度。

这是最初的样子。

```
名称1 金额用途
名称2 金额用途
名称3 金额用途

```

现在单击第一行，我希望看到嵌入表占据所有列的以下内容。

```
名称1 金额用途
 供应商种类数量详细信息
 供应商种类数量详细信息
 供应商种类数量详细信息
名称2 金额用途
名称3 金额用途

```

这就是我在铬和火狐中看到的。

```
名称1 金额用途
 供应商种类数量详细信息
 供应商种类数量详细信息
 供应商种类数量详细信息
名称2 金额用途
名称3 金额用途

```

当显示嵌入表格时，我真的可以使用一些帮助来尝试让第一列保持其宽度。如果您删除 style='display:none'，它最初会按预期显示。但是，一旦您循环显示/隐藏切换，它就会显示不正确。这是一个示例。

```
<!DOCTYPE html>
<html><head>
<style>
.hidden { display: none; }
.money  { text-align: right; }
td {
padding-left:1em;
}
</style>
<script language="javascript">
function show_hide(elmid){
elm = document.getElementById(elmid);
if (elm.style.display=="none") {
    elm.style.display = "inline";
}
else {
    elm.style.display = "none";
}
}
</script>
</head>
<body>
<h1>Reimbursement</h1>
<p>Click on 'D. Smith' or anywhere in the first row to see detail.</p>
<table>
<tr><th>Who</th><th>Amount</th><th>Purpose</th></tr>
<tr onclick="show_hide('exp47')"><td>D. Smith</td><td class='money'>37.61</td><td>Treats &amp; Snacks</td></tr>
<tr id='exp47' style='display:none'>
  <td colspan='3'>
  <table><thead>
    <tr><th>Vendor</th><th>Kind</th><th>Amount</th><th>Detail</th></tr>
  </thead><tbody>
    <tr><td>Dollar Tree</td><td>food</td><td>3.00</td><td>teddy bear cookies [3]</td></tr>
    <tr><td>Dollar Tree</td><td>tax</td><td>0.05</td><td>1.50%</td></tr>
    <tr><td>Sams</td><td>supplies</td><td>10.07</td><td>Lysol 3 pac</td></tr>
    <tr><td>Sams</td><td>supplies</td><td>6.98</td><td>hand sani</td></tr>
    <tr><td>Walmart</td><td>food</td><td>6.98</td><td>pf bulk gf</td></tr>
    <tr><td>Walmart</td><td>food</td><td>3.58</td><td>gm cereal</td></tr>
    <tr><td>Walmart</td><td>food</td><td>2.42</td><td>gv h4y rice</td></tr>
    <tr><td>Walmart</td><td>food</td><td>4.44</td><td>gv ff sticks [3]</td></tr>
    <tr><td>Walmart</td><td>tax</td><td>0.30</td><td>1.75%</td></tr>
    <tr><td>Jewel</td><td>food</td><td>6.00</td><td>glbl cookies 10z [6]</td></tr>
    <tr><td>Jewel</td><td>tax</td><td>0.14</td><td>2.25%</td></tr>
  </tbody></table>
  </td>
</tr>
<tr><td>Another</td><td class='money'>?.??</td><td>Another</td></tr>
</table></body></html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T15:13:44.923

在您的 javascript 中：

```
elm.style.display = "inline"; 
```

内联显示是 tr - 表格行 - 标记的禁忌。

正确的做法是将显示设置为“table-row”：

```
elm.style.display = "table-row"; 
```

您可以在此处阅读更多相关信息：[http](http://www.quirksmode.org/css/display.html) ://www.quirksmode.org/css/display.html 顺便说一下，您应该考虑为这类问题添加一个 jsFiddle。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:22:01.617

```
 elm.style.display = "inline"; 
```

是错误的显示类型。改成

```
 elm.style.display = "table-row"; 
```

一切都应该没问题。不过，可能不适用于较旧的 IE 浏览器。

[http://jsfiddle.net/YuEyp/](http://jsfiddle.net/YuEyp/)

# c++ - 编译类模板成员函数时出错

> ID：13670545
> 
> 赞同：0
> 
> 时间：2012-12-02T15:08:56.147
> 
> 标签：c++, visual-studio-2010

我使用的是通用哈希表类，但是当我在 main 中声明字符串时，它会出现以下错误。我认为问题是在“typename”部分引起的，但是当我更改为“class”时，问题并没有解决。

我的主要：

```
HashTable<string> H; 
```

我的标题：

```
#ifndef QUADRATIC_PROBING_H
#define QUADRATIC_PROBING_H

#include <vector>
#include <string>
using namespace std;

int nextPrime( int n );

// QuadraticProbing Hash table class
//
// CONSTRUCTION: an approximate initial size or default of 101
//
// ******************PUBLIC OPERATIONS*********************
// bool insert( x )       --> Insert x
// bool remove( x )       --> Remove x
// bool contains( x )     --> Return true if x is present
// void makeEmpty( )      --> Remove all items
// int hash( string str ) --> Global method to hash strings

template <typename HashedObj>
class HashTable
{
  public:
    explicit HashTable( int size = 101 ) : array( nextPrime( size ) )
      { makeEmpty( ); }

    bool contains( const HashedObj & x ) const
    {
        return isActive( findPos( x ) );
    }

    void makeEmpty( )
    {
        currentSize = 0;
        for( size_t i = 0; i < array.size( ); i++ )
            array[ i ].info = EMPTY;
    }

    bool insert( const HashedObj & x )
    {
            // Insert x as active
        size_t currentPos = findPos( x );
        if( isActive( currentPos ) )
            return false;

        array[ currentPos ] = HashEntry( x, ACTIVE );

            // Rehash; see Section 5.5
        if( ++currentSize > array.size( ) / 2 )
            rehash( );

        return true;
    }

    bool remove( const HashedObj & x )
    {
        int currentPos = findPos( x );
        if( !isActive( currentPos ) )
            return false;

        array[ currentPos ].info = DELETED;
        return true;
    }

    enum EntryType { ACTIVE, EMPTY, DELETED };

  private:
    struct HashEntry
    {
        HashedObj element;
        EntryType info;

        HashEntry( const HashedObj & e = HashedObj( ), EntryType i = EMPTY )
          : element( e ), info( i ) { }
    };

    vector<HashEntry> array;
    int currentSize;

    bool isActive( int currentPos ) const
      { return array[ currentPos ].info == ACTIVE; }

    int findPos( const HashedObj & x ) const
    {
        int offset = 1;
        size_t currentPos = myhash( x );

          // Assuming table is half-empty, and table length is prime,
          // this loop terminates
        while( array[ currentPos ].info != EMPTY &&
                array[ currentPos ].element != x )
        {
            currentPos += offset;  // Compute ith probe
            offset += 2;
            if( currentPos >= array.size( ) )
                currentPos -= array.size( );
        }

        return currentPos;
    }

    void rehash( )
    {
        vector<HashEntry> oldArray = array;

            // Create new double-sized, empty table
        array.resize( nextPrime( 2 * oldArray.size( ) ) );
        for( size_t j = 0; j < array.size( ); j++ )
            array[ j ].info = EMPTY;

            // Copy table over
        currentSize = 0;
        for( size_t i = 0; i < oldArray.size( ); i++ )
            if( oldArray[ i ].info == ACTIVE )
                insert( oldArray[ i ].element );
    }
    int myhash( const HashedObj & x ) const
    {
        int hashVal = hash( x );

        hashVal %= array.size( );
        if( hashVal < 0 )
            hashVal += array.size( );

        return hashVal;
    }
};

int hash( const string & key );
int hash( int key );

#endif 
```

我收到以下错误：

```
 d:\users\suuser\documents\visual studio 2010\projects\cs300-hw3\cs300-hw3\quadraticprobing.h(50): warning C4018: '>' : signed/unsigned mismatch
1>          d:\users\suuser\documents\visual studio 2010\projects\cs300-hw3\cs300-hw3\quadraticprobing.h(41) : while compiling class template member function 'bool HashTable<HashedObj>::insert(const HashedObj &)'
1>          with
1>          [
1>              HashedObj=std::string
1>          ]
1>          d:\users\suuser\documents\visual studio 2010\projects\cs300-hw3\cs300-hw3\compressor.cpp(130) : see reference to class template instantiation 'HashTable<HashedObj>' being compiled
1>          with
1>          [
1>              HashedObj=std::string
1>          ]
1>d:\users\suuser\documents\visual studio 2010\projects\cs300-hw3\cs300-hw3\quadraticprobing.h(120): error C2872: 'hash' : ambiguous symbol
1>          could be 'hash'
1>          or       'c:\program files\microsoft visual studio 10.0\vc\include\xfunctional(763) : std::hash'
1>          d:\users\suuser\documents\visual studio 2010\projects\cs300-hw3\cs300-hw3\quadraticprobing.h(119) : while compiling class template member function 'int HashTable<HashedObj>::myhash(const HashedObj &) const'
1>          with
1>          [
1>              HashedObj=std::string
1>          ] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T15:12:00.477

该错误告诉您，您的`hash(const std::string&)`函数和`std::hash`具有相同参数的重载之间存在冲突。这是您应该避免的原因之一`using namespace std`。

通常的建议：永远不要`using namespace std;`在*headers*中使用。

我的个人建议：永远不要`using namespace std`在*任何地方*使用.

# scala - 使用多重排序映射 groupBy

> ID：13670547
> 
> 赞同：2
> 
> 时间：2012-12-02T15:09:16.927
> 
> 标签：scala, map, group-by, sorted

这里有点疯狂，试图对以下内容进行多重排序。

```
case class WeeklyResults(
  schedule: Schedule,
  result: GameResult
)
val games = // returns correctly sorted List of WeeklyResults
  repo.gameresult.findAllByDate(date) 
```

当我在比赛日期分组（以显示每个比赛日的比赛日期标题）和 id（将主/客队对分组）作为未排序的地图返回时，事情出错了，有趣 ;-)

```
val unsorted = // Map[JodaTime, Iterable[List[WeeklyResults]]]
  games.groupBy(_.schedule.gameDate).mapValues(_.groupBy(_.schedule.id).values) 
```

好吧，ListMap 是获取排序地图的一种方法，让我们尝试一下，以毫秒为单位对游戏日期 JodaTime 进行排序。

```
val sorted =
  ListMap(unsorted.toList.sortBy(_._1.getMillis):_*) 
```

很好，游戏按正确的顺序在游戏日期标题下排序......但是，每个游戏日内的游戏都是随机排序的；-(

所以，问题是，到底如何才能*同时按游戏日期和游戏结果 id*排序？（其中 id 是游戏结果表的 PK，实际上是 DB 级别的排序顺序）

我尝试了各种无效的组合：

```
unsorted.flatMap{x=>
  ListMap(
    Seq( (x._1, x._2.map(_._2.sortBy(_.result.id))) ).sortBy(_.1.getMillis)
  :_*)
} 
```

不管我做什么，`Iterable[List[WeeklyResults]]`剩下的未分类

非常感谢您的想法，我束手无策，整个上午就这样过去了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T20:38:45.570

我认为关键问题是 groupBy 中的 groupBy 返回一个复杂类型（Iterable over List）。

如果我使用“扁平化”简化该部分，事情就会变得简单得多。我使用了您的案例课程的简化版本

```
case class WeeklyResults(
  schedule: DateTime,
  id: Int
) 
```

然后使用以下内容：

```
val unsorted = // Map[JodaTime, List[WeeklyResults]]
    games.groupBy(_.schedule).mapValues(_.groupBy(_.id).values.flatten.toList) 
```

就像你做的那样排序（顺便说一句，ListMap 很酷）：

```
val sorted = //ListMap[DateTime, List[WeeklyResults] ]
    ListMap(unsorted.toList.sortBy(_._1.getMillis):_*) 
```

然后二级排序就是：

```
val reallySorted = sorted.mapValues( v => v.sortBy( _.id) ) 
```

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:48:09.607

这是非常糟糕的，但不确定如何在不重构模型的情况下解决问题。

因此，我将半排序的 ListMap（即按游戏日期排序）传递给视图：

```
@(model: Map[org.joda.time.DateTime, Iterable[List[ushr.model.WeeklyResults]]])

@model.map{ case(date,games) =>
  // display game date headers
  ...

  // the ugliness ensues
  @games.toSeq.map(x=>x).sortBy(_(0).result.id).map{ case(List(a,b))=>
    // display game results on this particular game date
    ...
  }
} 
```

基本上，由于每个游戏结果都是一个 List'd 对，我对这对中的第一个游戏结果 ID 进行排序（也可以在第 2 个进行排序，相同的游戏 ID，每个团队的不同游戏结果/结果）。

这可行，但考虑到原始数据库查询以所需顺序返回结果集，这确实很痛苦。花了大约 3 个小时来解决这个问题，这很有趣，但是……完全浪费了我现在可用的一点时间。绝对会喜欢一组按保存的收藏顺序。

如果有人有一个“真正的”解决方案与我想出的黑客解决方案相比，请插话......

# asp.net-mvc - ASP.NET MVC 4 - DotnetOpenAuth - 如何设置 Facebook 权限范围？

> ID：13670552
> 
> 赞同：-1
> 
> 时间：2012-12-02T15:10:34.453
> 
> 标签：asp.net-mvc, facebook, dotnetopenauth

我喜欢设置 Facebook 权限范围。例如 user_about_me 和电子邮件。我在网上找到了这个解决方案：

```
Dictionary<String, Object> facebookPermissions = new Dictionary<string, object>();
        facebookPermissions.Add("scope", "email,user_about_me");

OAuthWebSecurity.RegisterFacebookClient(OAuthService.AppId, OAuthService.AppSecret, "facebook", facebookPermissions); 
```

但不起作用。Facebook 登录没有向我显示我的 Facebook 应用所需的权限。并且 URL 没有定义的范围..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:29:23.477

要获得电子邮件地址权限：

[从这篇文章](http://tinyurl.com/aherzvm)中查看这个解决方案（未标记为答案的帖子）：

“更新 MVC4 Internet 项目中的 NuGet 包。DotNetOpenAuthCore。它将自动更新所有依赖项。现在 result.UserName 将包含电子邮件地址而不是您的姓名。”

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T01:05:11.813

自定义 FacebookScopedClient 仅适用于 localhost。我将 Web 项目上传到 Windows Azure Web 角色并在 Facebook 应用程序中更改 Web 角色 URL。登录失败。我需要使用 DotNetOpenAuth 设置 Facebook 登录范围的解决方案

# c++ - Windows 窗体应用程序中的 _beginthread 实现

> ID：13670558
> 
> 赞同：1
> 
> 时间：2012-12-02T15:11:08.207
> 
> 标签：c++, cdecl

我尝试在 Windows 窗体应用程序中使用简单的 _beginthread 函数创建线程（我通过制作控制台应用程序成功地做到了。

```
private: System::Void __cdecl counter() {
             do {
                 Sleep(1);
                 stan++;
                 label1->Text = stan.ToString();
             } while(true);
             _endthread();
         }

private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {
             button1->Enabled = false;
             HANDLE licznik = (HANDLE) _beginthread(counter(), 0, 0);
         }
};` 
```

我的错误（和警告）是：

`c:\users\artur\desktop\clock\thread_clock\thread_clock\Form1.h(117): warning C4441: calling convention of '__cdecl ' ignored; '__clrcall ' used instead 1>c:\users\artur\desktop\clock\thread_clock\thread_clock\Form1.h(128): error C2664: '_beginthread' : cannot convert parameter 1 from 'void' to 'void (__cdecl *)(void *)' 1> Expressions of type void cannot be converted to other types`

如何防止这种情况？

# jquery - jQuery 谷歌地图建议

> ID：13670562
> 
> 赞同：-1
> 
> 时间：2012-12-02T15:11:58.650
> 
> 标签：jquery, google-maps

我正在开发一个停车网络应用程序，它允许用户在谷歌地图上上传一个指针，显示他们的停车位在地图上的位置。我正在使用 jQuery，但没有任何使用过的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:25:24.393

考虑到你还没有做任何事情：

[http://jquery-ui-map.googlecode.com/](http://jquery-ui-map.googlecode.com/)

这个库可能是一个很好的起点。它可以帮助您以 jquerish 的方式构建和操作地图，而无需深入了解 google maps api 的细节。

# jquery - jQuery Ajax 回调没有获取上下文

> ID：13670564
> 
> 赞同：0
> 
> 时间：2012-12-02T15:12:00.757
> 
> 标签：jquery

我有一个 HTML 页面，如 [http://jsfiddle.net/Lijo/zPAfF/6/](http://jsfiddle.net/Lijo/zPAfF/6/)所示。当“searchReportButton”按钮被点击时，一个javascript函数“checkSession”被调用。在“checkSession”函数中有一个对下面列出的`jquery.ajax`调用。`web method`Web 方法运行良好，我能够在 javascript 成功回调中将结果警告为“ACTIVE”。

我已将上下文设置为这样。

```
 context: this,  //CONTEXT 
```

我期待下面的代码提醒“正在加载...”文本。自设置以来，假设`this`将起作用。但它没有显示文字。`success callback``context`

```
if (result == "ACTIVE") 
{       
    var selectedTable = $(this).closest('.dateFilter').siblings('.sentDatesSection').find('.reportSentDatesDiv');

    alert($(selectedTable).text());

} 
```

**问题**

为了在回调中获取上下文需要更正什么？

*网络方法*

```
 [WebMethod(CacheDuration = 0)]
    public static string CheckSessionExpiry(string empID)
    {

        return "ACTIVE";
    } 
```

![在此处输入图像描述](../Images/6894c2aae9cd88915dc3f8dc15fb9b2d.png)

**jQuery**

```
$(document).ready(function() {
    var searchReportButton = $('.searchReportButton');
    searchReportButton.click(function() {
        var selectedTable = $(this).closest('.dateFilter').siblings('.sentDatesSection').find('.reportSentDatesDiv');
        alert($(selectedTable).text());
        checkSession();
        return false;
    });
});

function checkSession() {
    var empID = 101;
    alert('Function Reached');
    $.ajax({
        type: "POST",
        url: "Error.aspx/CheckSessionExpiry",
        data: '{"empID": "' + empID + '"}',
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        context: this,
        //CONTEXT
        success: handleSessionResult
    });
}

function handleSessionResult(result) {
    if (result.hasOwnProperty("d")) {
        result = result.d
    }
    if (result == "ACTIVE") {
        var selectedTable = $(this).closest('.dateFilter').siblings('.sentDatesSection').find('.reportSentDatesDiv');
        alert($(selectedTable).text());
    }
}​ 
```

**HTML**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1">
<title>Report List </title>

</head>
<body>
<form>

<div id="wrapper">
    <div id="container">
        <div id="centralContainer">
            <div id="mainContainer">
                <div id="contentHolderDiv" class="contentHolderDiv">
                    <div id="searchContainer" class="searchContainer">
                        <div id="entryValues" class="repeaterContainer">
                            <div class="repeaterTableBorder">
                                <div class="repeaterRecord">
                                    <div class="repeaterIdentifier">
                                        <div class="reportTitle">
                                            Daily Financial Transaction:
                                        </div>
                                    </div>

                                    <div class="viewLogTitle">
                                        <div class="viewLogText">
                                            View Report Log
                                        </div>
                                    </div>
                                    <div id="reportLog" class="reportLog">
                                        <div class="dateFilter">
                                            <div class="filterElements">
                                                <div class="filterContents">
                                                    <input type="submit" name="ctl00$detailContentPlaceholder$repReports$ctl00$btnSubmit"
                                                        value="Get Reports" id="detailContentPlaceholder_repReports_btnSubmit_0" class="searchReportButton" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="sentDatesSection">
                                            <div class="reportSentDatesDiv">
                                                <p>
                                                    Loading...</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="clear">
                    </div>
                </div>
            </div>
            <div class="clear">
            </div>
        </div>
    </div>
</div>
</form>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.4.1.js"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:14:22.353

`this`作为参数传递给`checkSession`函数：

```
checkSession(this); 
```

进而：

```
function checkSession(context) {
    var empID = 101;
    alert('Function Reached');
    $.ajax({
        type: "POST",
        url: "Error.aspx/CheckSessionExpiry",
        data: JSON.stringify({ empID: empID }),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        context: context,  //CONTEXT
        success: handleSessionResult

        }
    });
} 
```

另请注意我如何修复您`$.ajax`使用该`JSON.stringify`方法的调用，以确保请求是正确的 JSON 格式。**永远不要**，我再说一遍，**绝对不要**使用字符串连接（`+`运算符）来构建 JSON。该`JSON.stringify`方法原生内置于所有现代浏览器中。如果您必须支持一些来自[中生代](http://en.wikipedia.org/wiki/Mesozoic)的浏览器，例如 IE6 或其他东西，您可以将[json2.js](https://github.com/douglascrockford/JSON-js)脚本引用到您的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T15:21:20.933

或者，您可以使用[`call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call).

```
checkSession.call(this); 
```

或者，它的兄弟[`apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)。

# android - 围绕 Sphere OpenGL ES Android 的贴图纹理

> ID：13670565
> 
> 赞同：2
> 
> 时间：2012-12-02T15:12:06.663
> 
> 标签：android, opengl-es, libgdx, blender, texture-mapping

我正在尝试在从 Blender 导出的球体周围映射单个纹理。该模型在 Blender 中看起来很棒，但是当我在我的 Android 应用程序中使用它时，纹理似乎映射到几乎每个面，而不是整个球体。有任何想法吗？我在 Android 上使用 libGDX。

设置代码：

```
 model = G3dtLoader.loadStillModel(Gdx.files.internal("models/planet.g3dt"), true);

    for(StillSubMesh mesh: model.subMeshes) {
        mesh.mesh.scale(0.1f, 0.1f, 0.1f);
    }

    G3dExporter.export(model, Gdx.files.local("models/planet.g3d"));
    model = G3dLoader.loadStillModel(Gdx.files.local("models/planet.g3d"));

    texture = new Texture(Gdx.files.internal("textures/planet1_pot.png"), true);

    bounds = new BoundingBox();
    model.getBoundingBox(bounds);
    float len = bounds.getDimensions().len();

    cam = new PerspectiveCamera(60, Gdx.graphics.getWidth(), Gdx.graphics.getHeight());
    cam.position.set(bounds.getCenter().cpy().add(len / 2, len / 2, len / 2));
    cam.lookAt(bounds.getCenter().x, bounds.getCenter().y, bounds.getCenter().z);
    cam.near = 0.1f;
    cam.far = 1000;

    renderer = new ImmediateModeRenderer10(); 
```

渲染代码：

```
 @Override
    public void renderScreen(float delta) {
        Gdx.gl.glClearColor(0, 0, 0, 1.0f);
        Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
        Gdx.gl.glEnable(GL10.GL_DEPTH_TEST);

        cam.update();
        cam.apply(Gdx.gl10);

        if(texture != null) {
            Gdx.gl.glActiveTexture(GL10.GL_TEXTURE);
            Gdx.gl.glEnable(GL10.GL_TEXTURE_2D);
            texture.bind();
        }

        model.render();

        if(texture != null) {
            Gdx.gl.glActiveTexture(GL10.GL_TEXTURE);
            Gdx.gl.glDisable(GL10.GL_TEXTURE_2D);
        }
    } 
```

编辑：这是演示我的问题的屏幕截图： ![在此处输入图像描述](../Images/b5b65df83e5b19bc29b5d1290035d9af.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:58:30.010

我最终解决了这个问题。[我按照这个链接](http://code.google.com/p/libgdx/wiki/BlenderModels)在 Blender 中重新创建了我的模型，该链接说它已被弃用并且缺少屏幕截图，但它帮助了我。我最终只是将我的模型导出为 .obj 并且纹理现在映射到整个球体。

# javascript - Ruby on Rails 将 javascript 转换为咖啡

> ID：13670566
> 
> 赞同：0
> 
> 时间：2012-12-02T15:12:10.537
> 
> 标签：javascript, ruby-on-rails, coffeescript, fullcalendar

学习如何将javascript转换为coffeescript的好方法是什么？

我正在将 Fullcalendar 添加到我的 RoR 应用程序中。以下代码来自 Fullcalendar 演示之一。

```
 select: function(start, end, allDay) {
            var title = prompt('Event Title:');
            if (title) {
                calendar.fullCalendar('renderEvent',
                    {
                        title: title,
                        start: start,
                        end: end,
                        allDay: allDay
                    },
                    true // make the event "stick"
                );
            }
            calendar.fullCalendar('unselect');
        }, 
```

我需要学习如何将该代码转换为咖啡脚本。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T07:15:06.420

*   访问[http://js2coffee.org](http://js2coffee.org)
*   或者您可以下载 js2coffee 并从命令行执行
*   或者您可以自己输入 [http://coffeescript.org](http://coffeescript.org)（尝试 coffescript 标签）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:15:28.070

[CoffeeScript](http://coffeescript.org/)页面有一个很好的比较。

在 Rails 中，您可以将 .coffee 附加到您的 javascript 文件名，然后 sprockets 会将 CoffeeScript 编译成 javascript。

它应该看起来像这样：

```
 select: (start, end, allDay) ->
        title = prompt 'Event Title:'
        if title
            calendar.fullCalendar 'renderEvent',
              title: title,
              start: start,
              end: end,
              allDay: allDay,
            true
        calendar.fullCalendar 'unselect' 
```

# java - 使用jstl从jsp调用方法

> ID：13670568
> 
> 赞同：1
> 
> 时间：2012-12-02T15:12:14.453
> 
> 标签：java, jsp, jstl

我有一个条件，我想将 EL`element.dept_id`作为参数传递并从方法中获取部门名称作为返回。如果可能的话，我希望它直接从查看页面中获取。但是，返回将是部门类型的对象，我想打印部门的名称。有什么帮助吗？不使用scriptlet可以做到吗？

```
class Department{
Private Integer id;
Private String name;
//getters
//setters
}

 <c:forEach items="${empImpl.allEmployee}" var="element">

      <tr>
    <td><c:out value="${element.name}" /></td>
    <td><c:out value="${element.gender}" /></td>

    <td><c:out value="${element.salary}" /></td>

    <td>Something like this // deptImpl.name(${element.dept_id})  </td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T15:28:37.680

您可以通过定义一个带有 id 并返回您的部门的自定义 EL 函数来实现。查看[JSP 页面](http://blog.idleworx.com/2010/04/custom-tags-and-custom-el-functions-in.html)中的自定义标记和自定义 EL 函数，了解如何创建自定义 EL 函数的示例。

但是，我建议让您的 servlet 使用您想要显示的数据填充请求，因为这会使您的代码更易于维护。

# macros - 编译后，程序可以假设运行而无需调用 eval 吗？

> ID：13670571
> 
> 赞同：4
> 
> 时间：2012-12-02T15:12:54.437
> 
> 标签：macros, clojure, lisp, eval

我正在学习 Clojure 的工作原理，我想知道是否有可能（只是为了了解 Clojure 和 Lisps 方言的一般工作原理）编译一个 Clojure 程序，然后在运行时运行它“禁止”使用*eval*。

请注意，我不是在问技术上是否可行，例如，对正在运行的 Clojure 程序进行热补丁，以便一旦编译了 Clojure 程序，一旦调用*eval*就会抛出异常。

我要问的是，*如果*在技术上可以禁止使用*eval*，那么大多数不使用 REPL 而不是专门*eval*的 Clojure 程序是否仍然有效？

还是默认/内置 API/宏/函数在运行时在后台使用*eval*？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T15:36:06.010

`eval`是什么将交互式编程带到了 Clojure（和 Lisps）。一旦你将 Clojure 代码编译为 jvm 字节码（它不会在任何地方使用 eval 函数调用），或者将其他 Lisp 方言编译到它们的目标运行时（主要是本机代码），你就不需要 eval 了。

`eval`应用程序的主要目的是在运行时生成代码并执行它，基本上它允许创建“运行时宏”，这不是该语言的核心 API 需要做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:14:40.710

我很久以前就问过这个问题，我正在回答我自己的问题，因为出现了额外的信息并且也出现了漏洞，而另一个问题*没有*正确解决这个问题。

基本上默认的读取函数是不安全的。

2013 年，在所有 Ruby 漏洞利用（人们突然对安全隐患感到担忧）之后，Clojure 小组就这个问题展开了激烈的讨论，在一个名为：

> " *read-eval*默认为 false"

Clojure 文档本身明确指出：

[http://clojuredocs.org/clojure_core/clojure.core/read](http://clojuredocs.org/clojure_core/clojure.core/read)

```
;; WARNING: You SHOULD NOT use clojure.core/read or
;; clojure.core/read-string to read data from untrusted sources.  They
;; were designed only for reading Clojure code and data from trusted
;; sources 
```

请注意，即使将*read-eval*设置为*false*也是不够的（至少在 Clojure 1.5 之前是这样），因为某些 Java 构造函数可能会被强制调用并通过精心制作恶意输入而产生副作用。

这在名为*“Clojure 的阅读器不安全”的博客条目中进行了详细解释*

[http://www.learningclojure.com/2013/02/clojures-reader-is-unsafe.html](http://www.learningclojure.com/2013/02/clojures-reader-is-unsafe.html)

长话短说：使用别的东西，比如`clojure.edn`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T04:01:10.770

可以这样说：

*   *大多数*使用`eval`是交互完成的（在 REPL 中）或在编译时完成（例如在宏的扩展和执行期间）
*   *eval 的某些*用途发生在常规代码中。这可能是一个有用的技巧，例如在电子表格程序中执行动态生成的数学公式时。

由于第二个原因，如果您在全局范围内禁止使用 eval，即使所有内容都已编译，您也会在运行时破坏大量代码/库。

# hadoop - 如何从流式 Hadoop 作业中获取压缩（文本）输出

> ID：13670572
> 
> 赞同：4
> 
> 时间：2012-12-02T15:12:57.700
> 
> 标签：hadoop, compression, mapreduce

我已经阅读并尝试了所有我能找到的关于这个直截了当的问题的例子。假设有一组未压缩的文本文件，我想对它们运行一个处理步骤，然后输出一组带有结果的压缩文件。为简单起见，此示例假定`cat`为处理步骤。

我发现的一切都表明这应该有效：

```
hadoop jar /usr/lib/hadoop-mapreduce/hadoop-streaming.jar \
    -Dmap.output.compress=true \
    -Dmap.output.compression.codec=org.apache.hadoop.io.compress.GzipCodec \
    -mapper /bin/cat \
    -reducer NONE \
    -input /path_to_uncompressed \
    -output /path_to_compressed 
```

作业正常运行，但输出纯文本文件。我尝试改变输入文件大小、改变编解码器（Snappy、BZip2 等）、添加减速器、设置 mapred.output.compression.type（BLOCK、RECROD）等，结果始终相同。作为参考，我正在使用新安装的 CDH 4.1.2。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T19:54:21.313

以下适用于 Hadoop *v1.0.0*：

这将产生一个 gzipped 输出：

```
hadoop jar /home/user/hadoop/path_to_jar/hadoop-streaming-1.0.0.jar \
    -D mapred.output.compress=true \
    -D mapred.output.compression.codec=org.apache.hadoop.io.compress.GzipCodec \
    -D mapreduce.job.reduces=0 \
    -mapper /bin/cat \
    -input /user/hadoop/test/input/test.txt \
    -output /user/hadoop/test/output 
```

一个块压缩的 SequenceFile 作为输出：

```
hadoop jar /home/user/hadoop/path_to_jar/hadoop-streaming-1.0.0.jar \
    -D mapred.output.compress=true \
    -D mapred.output.compression.type=BLOCK \
    -D mapred.output.compression.codec=org.apache.hadoop.io.compress.GzipCodec \
    -D mapreduce.job.reduces=0 \
    -mapper /bin/cat \
    -input /user/hadoop/test/input/test.txt \
    -output /user/hadoop/test/output
    -outputformat org.apache.hadoop.mapred.SequenceFileOutputFormat 
```

请注意参数的顺序以及-D 和属性名称之间的**空格。**

在 YARN 的情况下，许多属性已被弃用（请参阅[此处](http://archive.cloudera.com/cdh4/cdh/4/hadoop-2.0.0-cdh4.1.2/hadoop-project-dist/hadoop-common/DeprecatedProperties.html)的完整列表）。因此，您必须进行以下更改：

**mapred.output.compress -> mapreduce.output.fileoutputformat.compress mapred.output.compression.codec -> mapreduce.output.fileoutputformat.compress.codec mapred.output.compression.type -> mapreduce.output.fileoutputformat.compress.type**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T16:15:42.890

在 Cloudera Manager 中，转到 Services > Service mapreduce > Configuration > TaskTracker > Compression

*   压缩 MapReduce 作业输出（客户端覆盖）：不要覆盖客户端配置

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-05-07T20:40:01.197

我为 Cloudera 工作并遇到了这篇文章。我只是想让您知道，Cloudera Manager 4.5（我确认的版本）至少可以选择不覆盖客户端配置，除了将客户端配置覆盖为真或假。这使其非常理想，因为您可以更改该设置以允许开发人员选择是否压缩输出。希望有所帮助——我知道这是不久前的事了。:)

# android - 带有异步任务android的DoInBackground中的错误

> ID：13670573
> 
> 赞同：3
> 
> 时间：2012-12-02T15:13:01.103
> 
> 标签：android, asynchronous, background, task

当我执行此操作时，我正在逼近。事情是。数据确实会发送到我的数据库。所以它在我的数据库中，但我读了我的 logcat，它说我的 DinBackground 有问题，这是我的代码：

```
// JSON Response node names
private static String KEY_SUCCESS = "success";
private static String KEY_ERROR = "error";
private static String KEY_ERROR_MSG = "error_msg";
private static String KEY_UID = "uid";
private static String KEY_NAME = "name";
private static String KEY_EMAIL = "email";
private static String KEY_CREATED_AT = "created_at";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.register);

    // Importing all assets like buttons, text fields
    inputFullName = (EditText) findViewById(R.id.registerName);
    inputEmail = (EditText) findViewById(R.id.registerEmail);
    inputPassword = (EditText) findViewById(R.id.registerPassword);
    btnRegister = (Button) findViewById(R.id.btnRegister);
    btnLinkToLogin = (Button) findViewById(R.id.btnLinkToLoginScreen);
    registerErrorMsg = (TextView) findViewById(R.id.register_error);

    // Register Button Click event
    btnRegister.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {

            new CreateNewProduct().execute();
        }
    });

}

class CreateNewProduct extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(RegisterActivity.this);
        pDialog.setMessage("Loading");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();

    }

    /**
     * Creating product
     * */
    protected String doInBackground(String... args) {
        String name = inputFullName.getText().toString();
        String email = inputEmail.getText().toString();
        String password = inputPassword.getText().toString();
        UserFunctions userFunction = new UserFunctions();
        JSONObject json = userFunction.registerUser(name, email, password);

        // check for login response
        try {
            if (json.getString(KEY_SUCCESS) != null) {
                registerErrorMsg.setText("");
                String res = json.getString(KEY_SUCCESS);
                if(Integer.parseInt(res) == 1){
                    // user successfully registred
                    // Store user details in SQLite Database
                    DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                    JSONObject json_user = json.getJSONObject("user");

                    // Clear all previous data in database
                    userFunction.logoutUser(getApplicationContext());
                    db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));
                    // Launch Dashboard Screen

                    // Close Registration Screen
                    finish();
                }else{
                    // Error in registration
                    registerErrorMsg.setText("Error occured in registration");
                }
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once done
        pDialog.dismiss();
        Intent dashboard = new Intent(getApplicationContext(), DashboardActivity.class);
        // Close all views before launching Dashboard
        dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(dashboard);
    }

} 
```

这是我的日志：

```
12-02 15:35:33.761: E/AndroidRuntime(671): FATAL EXCEPTION: AsyncTask #1
12-02 15:35:33.761: E/AndroidRuntime(671): java.lang.RuntimeException: An error occured while executing doInBackground()
12-02 15:35:33.761: E/AndroidRuntime(671):  at android.os.AsyncTask$3.done(AsyncTask.java:278)
12-02 15:35:33.761: E/AndroidRuntime(671):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
12-02 15:35:33.761: E/AndroidRuntime(671):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
12-02 15:35:33.761: E/AndroidRuntime(671):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
12-02 15:35:33.761: E/AndroidRuntime(671):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
12-02 15:35:33.761: E/AndroidRuntime(671):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
12-02 15:35:33.761: E/AndroidRuntime(671):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
12-02 15:35:33.761: E/AndroidRuntime(671):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
12-02 15:35:33.761: E/AndroidRuntime(671):  at java.lang.Thread.run(Thread.java:856)
12-02 15:35:33.761: E/AndroidRuntime(671): Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
12-02 15:35:33.761: E/AndroidRuntime(671):  at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4039)
12-02 15:35:33.761: E/AndroidRuntime(671):  at android.view.ViewRootImpl.invalidateChild(ViewRootImpl.java:722)
12-02 15:35:33.761: E/AndroidRuntime(671):  at android.view.ViewRootImpl.invalidateChildInParent(ViewRootImpl.java:771)
12-02 15:35:33.761: E/AndroidRuntime(671):  at android.view.ViewGroup.invalidateChild(ViewGroup.java:4005)
12-02 15:35:33.761: E/AndroidRuntime(671):  at android.view.View.invalidate(View.java:8576)
12-02 15:35:33.761: E/AndroidRuntime(671):  at android.view.View.invalidate(View.java:8527)
12-02 15:35:33.761: E/AndroidRuntime(671):  at android.widget.TextView.checkForRelayout(TextView.java:6760)
12-02 15:35:33.761: E/AndroidRuntime(671):  at android.widget.TextView.setText(TextView.java:3306)
12-02 15:35:33.761: E/AndroidRuntime(671):  at android.widget.TextView.setText(TextView.java:3162)
12-02 15:35:33.761: E/AndroidRuntime(671):  at android.widget.TextView.setText(TextView.java:3137)
12-02 15:35:33.761: E/AndroidRuntime(671):  at com.laurenswuyts.find.it.RegisterActivity$CreateNewProduct.doInBackground(RegisterActivity.java:100)
12-02 15:35:33.761: E/AndroidRuntime(671):  at com.laurenswuyts.find.it.RegisterActivity$CreateNewProduct.doInBackground(RegisterActivity.java:1)
12-02 15:35:33.761: E/AndroidRuntime(671):  at android.os.AsyncTask$2.call(AsyncTask.java:264)
12-02 15:35:33.761: E/AndroidRuntime(671):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
12-02 15:35:33.761: E/AndroidRuntime(671):  ... 5 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T15:19:29.607

您正在访问**doInBackground()**内的**UI 元素**。顾名思义，doInBackgroud() 是一个**后台（非 UI）线程**，无法访问 UI 元素。因此，您应该将该代码放入UI 线程中。从 onPreExecute 中的 UI 元素获取用户输入并将它们存储在字符串中，稍后在 doInBackground() 中使用它们。******`onPreExecute()`******

 ****```
class CreateNewProduct extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    String name, email, password;
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(RegisterActivity.this);
        pDialog.setMessage("Loading");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
        name = inputFullName.getText().toString();
        email = inputEmail.getText().toString();
        password = inputPassword.getText().toString();

    }

    /**
     * Creating product
     * */
    protected String doInBackground(String... args) {

        UserFunctions userFunction = new UserFunctions();
        JSONObject json = userFunction.registerUser(name, email, password);

        // check for login response
        try {
            if (json.getString(KEY_SUCCESS) != null) {
                registerErrorMsg.setText("");
                String res = json.getString(KEY_SUCCESS);
                if(Integer.parseInt(res) == 1){
                    // user successfully registred
                    // Store user details in SQLite Database
                    DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                    JSONObject json_user = json.getJSONObject("user");

                    // Clear all previous data in database
                    userFunction.logoutUser(getApplicationContext());
                    db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));
                    // Launch Dashboard Screen

                    // Close Registration Screen
                    finish();
                }else{
                    // Error in registration
                    //show error message to user in onPostExecute
                }
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once done
        pDialog.dismiss();
        Intent dashboard = new Intent(getApplicationContext(), DashboardActivity.class);
        // Close all views before launching Dashboard
        dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(dashboard);
    }

} 
```

此外，当您调用 AsyncTask 时，您的参数是错误的。

由于您已将其声明为`class CreateNewProduct extends AsyncTask<String, String, String>`，因此在调用 AsyncTask 时需要传递一个字符串。

因此，`new CreateNewProduct().execute("");`这将是调用它的正确方法。****

# java - 不带变量的开关盒

> ID：13670574
> 
> 赞同：4
> 
> 时间：2012-12-02T15:13:15.607
> 
> 标签：java, switch-statement, case

是否可以在不指定 switch 变量的情况下编写 switch case 代码？假设我有两个变量 int x 和 int y。我想根据 x 和 y 的不同组合有条件地运行代码。例如

```
switch
{
    case (x==1 && y==1): //do something.
        break;
    case (x==3 && y==-1): //do something.
        break;
    case (x==0 && y==3): //do something.
        break;
    default: //do something.
        break;
} 
```

这段代码给了我错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-12-04T08:56:24.373

保持开关参数为真

```
switch(true)
{
    case (x==1 && y==1): //do something.
        break;
    case (x==3 && y==-1): //do something.
        break;
    case (x==0 && y==3): //do something.
        break;
    default: //do something.
        break;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T15:18:53.543

您可以更好地使用 a`if-else`来解决您的问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T15:30:39.837

**显而易见**的方法是使用`else if`：

```
if (x==1 && y==1) {
    //do something.
}
else if (x==3 && y==-1) {
    //do something.
}
else if (x==0 && y==3) {
    //do something.
}
else {
   // do something as default case.
} 
```

一种变体是使用**单独的方法**。

好处是您可以使用`return`.

```
if (x==1 && y==1) {
    //do something.
    return;
}
// precompute something...
if (x==3 && y==-1) {
    //do something.
    return;
}
if (x==0 && y==3) {
    //do something.
    return;
}
// do something as default case.
return; 
```

*但除非你有嵌套的`else`分支*，否则它不会有很大的不同。

但**实际上有好处****的一个案例`case``if else`**是当你有一个**完整的案例枚举时**。它避免了*编程错误*：

```
switch(direction) {
  case NORTH: // Do something
    break;
  case SOUTH: // Do something
    break;
  case EAST: // Do something
    break;
  case WEST: // Do something
    break;
} 
```

好消息是编译器实际上可以检查您是否不需要`default`分支。

除非你有一个**完整的枚举**，否则也`if`一样好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T15:17:26.967

这并没有真正读或写比

```
if (x==1 && y==1) {
    //do something.
}
else if (x==3 && y==-1) {
    //do something.
}
else if (x==0 && y==3) {
    //do something.
}
else {
    //do something.
} 
```

但是，是的，使用开关盒是不可能的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T15:19:42.447

在开关情况下，您不能使用 == 仅使用值。如果其他情况，请根据您的情况使用。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-02T15:26:51.477

的重点[`switch`](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)是根据*单个*变量的值做一些事情，而且，只测试相等性。在您的情况下，您可以使用一系列`else-if`s。

```
if (x==1 && y==1) {
    // do something
} else if (x==3 && y==-1) {
    // do something
} else if (x==0 && y==3) {
    // do something
} else {
    // do something (default)
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-02T15:27:54.887

**Hwre 是 switch case 的语法**

```
switch ( expression ) statement
labeled-statement:
case constant-expression : statement
default : statement 
```

清楚地表明你必须在**switch(exp)**
中传递表达式， 所以你不能离开它。

# android - 如何在android中制作管理面板

> ID：13670575
> 
> 赞同：1
> 
> 时间：2012-12-02T15:13:19.183
> 
> 标签：android, datetime, passwords, admin, android-alertdialog

我目前正在为一家公司开发一个用于员工考勤的应用程序。

员工通过安卓摄像头（使用 ZXing 库）扫描他们的二维码，我会获取手机的当前时间和日期并将其存储到数据库中。

我的问题是

*   我想限制普通员工，使他们无法更改电话的时间或日期。
*   但是应该有一个特定的管理员可以更改时间/日期的选项。
*   或者我想设置密码。当任何人想要更改电话的时间/日期时，它应该弹出一个警告对话框以插入密码。如果密码正确，则用户可以更改时间/日期，否则不能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:10:45.590

鉴于[SureLock](http://www.42gears.com/surelock/surelockandroid.html)做到了，这很可能是可能的。然而，他们并没有说出来。祝你好运，这是一项艰巨的任务。

# javascript - 如何用 Javascript 替换和追加

> ID：13670579
> 
> 赞同：7
> 
> 时间：2012-12-02T15:13:34.420
> 
> 标签：javascript, jquery, replace, append

我有一个评论系统，我想在其中实现内联编辑（当有人知道一个好的插件或类似的东西时，请不要犹豫给我一个名字）并找到一个用 textarea 和文本替换文本的 Javascript 片段作为该文本区域的值。

但现在我需要向该文本区域添加一个按钮（提交按钮），以便用户可以保存他编辑的文本。

我的代码现在看起来像

```
<span id="name">comment</span>

<div onclick="replacetext();">test</div>

<script type="text/javascript">
    function replacetext(){
            $("#name").replaceWith($('<textarea>').attr({ id: 'name', value: $('#name').text() }));
    </script> 
```

我已经对其进行了测试，`$("#name").append('<button>yes</button>');`但它没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:18:11.483

```
function replacetext() {

    $("#name").replaceWith($('<textarea>').attr({
        id: 'name',
        value: $('#name').text()
    }));
   $('#name').after('<button id="test">test</button>');
}

$('#test').live("click",function(){
   alert("I am a newly-created element and .click won't work on me.");

}); 
```

您不能在 textarea 中使用 .append() ，因为您不能“插入内容”或附加到它（还有其他解决方法）。您可以在 DIV、段落标签或任何可以充当容器的内容中执行此操作。

[http://api.jquery.com/append/](http://api.jquery.com/append/)
[http://api.jquery.com/after/](http://api.jquery.com/after/)
[http://api.jquery.com/live/](http://api.jquery.com/live/)或 .on() [http://api.jquery.com /在/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T17:34:38.653

可以使用以下 jsFiddle 试用该解决方案：http: [//jsfiddle.net/adb8X/5/](http://jsfiddle.net/adb8X/5/)

我相信你追求的是：

```
 $('<button>yes</button>').insertAfter("#name"); 
```

上面的代码在目标选择器（“#name”）中具有指定 id 的 DOM 元素之后插入一个新创建的 DOM 元素（是）。

更多关于`insertAfter`这里：[http ://api.jquery.com/insertAfter/](http://api.jquery.com/insertAfter/)

如果你想把它插入到`replacetext()`中，它会变成：

```
function replacetext() {
    $("#name").replaceWith($('<textarea>').attr({
        id: 'name',
        value: $('#name').text()
    }));

    $('<button>yes</button>').insertAfter("#name");

} 
```

* * *

注意：我还更正了您的 jsFiddle。请在此处查看：http: [//jsfiddle.net/adb8X/5/](http://jsfiddle.net/adb8X/5/)（如果我没记错的话，设置有问题和一个小错字）。其中对应的行是：

```
 $("#name").append( $('<button>hi</button>') ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T16:54:54.030

这是工作代码。

```
<span id="name">comment</span>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script>
<div onclick="replacetext();">test</div>

<script type="text/javascript">
    function replacetext(){
            $("#name").replaceWith($('<textarea>').attr({ id: 'name', value: $('#name').text() }));
            $('#name').after('<input type="submit" />');
    }
    </script> 
```

如果有效，请接受它作为答案

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T18:49:10.773

另一个选项可以让您替换动态生成的标签，而不仅仅是带有静态 id = "Name" 的标签，例如：

此示例中的标签或锚链接的 html 将替换为文本框：

```
<a href="#" onclick="editOpen(this);">@Html.DisplayFor(modelItem => Model.Name)</a>| 
```

Javascript（`editOpen`函数内部）

```
function editOpen(ctrl) {
   //textbox
    var editText = $('<input>').attr({
        type: 'text',
        value: $(ctrl).text()
     });

    //edit button
    var saveEditLink = $('<input>').attr({value:'Save',type:'button'});

    //Put them together
    $(ctrl).replaceWith($(editText).after($(saveEditLink)));

} 
```

# soap - 如何打印出 SoapClient 返回的对象值？

> ID：13670580
> 
> 赞同：0
> 
> 时间：2012-12-02T15:13:37.000
> 
> 标签：soap, php, soap-client

```
<?php
   $client = new SoapClient("http://localhost:8080/calculator?wsdl");   
   $result = $client->add(3,3); 

   echo $result;

?> 
```

得到错误：

> 类 stdClass 的对象无法转换为字符串

我怎样才能打印出响应`SoapClient`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:16:52.213

结果是一个 stdClass 对象。您可以使用 print_r “打印”一个对象，它是一个可用于检查对象成员的实用程序：

```
print_r($result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T15:16:53.457

使用[print_r](http://php.net/manual/en/function.print-r.php)

```
print_r($result); 
```

或[var_dump](http://php.net/manual/en/function.var-dump.php)

```
var_dump($results); 
```

# android - Eclipse：缺少 Android XML 布局编辑器文本编辑器

> ID：13670586
> 
> 赞同：0
> 
> 时间：2012-12-02T15:13:52.310
> 
> 标签：android, eclipse, layout, adt

我最近为我的日常驱动操作系统切换到 Arch Linux，并且不得不重新安装我的 android sdk 和 eclipse。
现在我想为android编辑一个布局xml文件，但是缺少xml编辑器，我只能使用无用的图形编辑器。

我使用日食朱诺。我以前在 Linux Mint 上使用过它，一切都很好。

**这是一个屏幕截图，它在我的 Eclipse 中的外观：** ![Eclipse 缺失部分](../Images/7d469a7f02fcc050ec971b6221fe028d.png)

**这是一个屏幕截图，它应该是这样的：**
![日食好](../Images/c43d5688353cf0bc937ab3edd3431d7d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T15:18:24.350

Dark Juno Theme 隐藏了这些按钮。

# javascript - 调用 NPObject 时出错

> ID：13670589
> 
> 赞同：2
> 
> 时间：2012-12-02T15:14:39.587
> 
> 标签：javascript, android

我在我的 android 应用程序中使用 jquery。当我在 2.1、3.0 上测试它时，我成功地运行了我的项目，但是当我用 4.1 测试它时，它向我显示错误，例如“NPObject 上的错误调用方法”，所以请建议我在版本更改时是否需要 jquery 或任何 js。我在这里描述了我实际收到错误的代码，实际上我是从 jquery.min.js 粘贴代码。

我在此方法的第 3 行出现错误：

```
function warn(message) {
            if (window.console !== undefined && jQTSettings.debug === true) {
                console.warn(message);
            }
        } 
```

并且此方法从以下位置调用：

```
// Unfortunately, we can not assume the "tap" event
    // is being used for links, forms, etc.
    function clickHandler(e) {
        // Figure out whether to prevent default
        var $el = $(e.target);

        // Find the nearest tappable ancestor
        if (!$el.is(touchSelectors.join(', '))) {
            $el = $(e.target).closest(touchSelectors.join(', '));
        }

        // Prevent default if we found an internal link (relative or absolute)
        if ($el && $el.prop('href') && !$el.isExternalLink()) {
            warn('Need to prevent default click behavior');
            e.preventDefault();
        } else {
            warn('No need to prevent default click behavior');
        }

        // Trigger a tap event if touchstart is not on the job
        if ($.support.touch) {
            warn('Not converting click to a tap event because touch handler is on the job');
        } else {
            warn('Converting click event to a tap event because touch handlers are not present or off');
            $(e.target).trigger('tap', e);
        }

    } 
```

请建议我如何摆脱这个错误。

# c++ - 创建种子哈希信息

> ID：13670592
> 
> 赞同：2
> 
> 时间：2012-12-02T15:15:53.517
> 
> 标签：c++, bittorrent, info-hash

如何在 torrent 文件上生成 torrent 哈希信息。

我一直在看这个例子：[How to calculate the hash of a torrent using Java](https://stackoverflow.com/questions/3436823/how-to-calculate-the-hash-value-of-a-torrent-using-java) and am trying to convert it to C++。这是我到目前为止的代码：

```
void At::ReadTorrent::TorrentParser::create_hash(std::string torrentstub)
{
    std::string info;
    int counter = 0;

    while(info.find("4:info") == -1)
    {
        info.push_back(torrentstub[counter]);
        counter++;
    }

    unsigned char array[torrentstub.size()];
    int test = 0;

    for(int data; (data = torrentstub[counter]) > -1;)
    {
         array[test++] = data;
         counter++;
    }
    std::cout << array << std::endl;

    //SHA-1 some value here to generate the hash.
} 
```

`torrentstub`参数是表示为字符串的 torrent 文件。据我了解，我必须获得之后的信息`4:info`。我认为这行得通，例如：

```
d6:lengthi2847431620e4:name8:filename12:piece lengthi1143252e6:pieces50264 
```

在此之后只有我无法读取的信息，我猜这是一些二进制数据？

所以我的问题实际上归结为：应该散列的信息是后面的所有内容，`4:info`我应该在哪里停止收集散列数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-25T15:19:39.430

您基于此的示例代码似乎假设 info 密钥是 torrent 文件中的最后一件事（可能不是，因此请阅读整个答案以了解整个故事）。因此，它将覆盖文件的其余部分（减去 1 个字节），从 ":info" 之后的字节开始。您会看到类似“...:infod6:length...”的内容。SHA1 以“d6:length...”开头，到文件末尾减去 1 个字节（最后一个字节，通常是“e”，不包括在内）。

例如，如果 torrent 文件为 43125 字节，“:info”从偏移量 362 开始，则 SHA 数据从偏移量 367 开始并继续到偏移量 43123（即 42757 字节）。

您可能知道您的 torrent 文件确实以 info 键结尾。如果你不知道，那么你的算法一定更复杂一点。一个 torrent 文件是经过编码的，信息密钥由一个 bencode“字典”组成（在 Wikipedia 中搜索 bencode 并阅读文章——这很容易理解）。“:info”后面的“d”开始以“e”结尾的字典。字典的长度没有被编码，所以知道它在哪里结束的唯一方法是解析内容，直到找到结束它的“e”。如果文件格式正确，则字典的内容将由一系列格式良好的编码元素（以及进一步嵌套的元素）组成。最终你会在一个元素（而不是另一个元素）的末尾找到一个“e”。这个“e”结束了字典。SHA1 覆盖了这本字典的全部内容，包括开头的“d”和结尾的“e”。其他经过编码的元素可能会遵循这一点。这些不包括在 SHA1 计算中。

杂项。笔记：

假设 info 密钥是文件中的最后一件事（同样，它可能不是），那么在算法中“遗漏”的 SHA1 的单个字节是整个 torrent 的最终“e”（这只是一个单个 bencode 字典——所有 torrent 文件都以“d”开头并以“e”结尾）。

这是二进制数据，因此在填充 torrentstub[] 时必须照此读取。

您无法像在示例中那样测试 -1 以确定何时结束。它所基于的代码在测试 -1 (eof) 时查看读取操作的结果，而不是数据本身。您必须使用 torrent 文件的长度减去数据的开头（在 ":info" 之后）减去 1 以获得正确的长度。

您引用的示例代码实际上确实读取了最后一个字节，但在生成 SHA1 时将其排除在外。

读取一个字节，复制到字符串然后重复重新扫描字符串是非常低效的。您已经拥有数组中的数据，因此只需使用 strstr （因为开头是 ASCII 数据）或自己扫描它（编码它并不难，因为它是一个非常短的固定长度字符串）。

我假设您有代码来执行实际的 SHA1。你在哪个平台上工作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:36:00.477

.torrent 规范是[免费提供](http://wiki.theory.org/BitTorrentSpecification#Metainfo_File_Structure)的，应该可以帮助您很容易地理解文件格式。您需要做的就是对`info`密钥的内容进行 SHA1 以获取信息哈希。

# java - Java中csv文件的文件路径

> ID：13670593
> 
> 赞同：0
> 
> 时间：2012-12-02T15:16:41.870
> 
> 标签：java, eclipse, csv, filereader

我在 java 中有一个项目，我在其中读取了一些 csv 数据。我必须输入具体的路径。现在我想把这个项目发给别人，但他不应该改变路径信息。他应该能够运行该项目，而无需更改代码中的任何内容。

我已经将 csv 数据放入我的源文件中，但是在尝试使用此路径时出现异常。

```
BufferedReader in = new BufferedReader(new FileReader("text.csv"));

Exception while reading csv file: java.io.FileNotFoundException: text.csv (No such file or directory) 
```

我正在用作 IDE eclipse。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:30:36.867

**将文件放在 Java 源文件夹的根目录中**，然后确保它符合您的类或 bin 或目标文件夹（所有编译的类都在其中）。完成后，更改您的代码，如下所示：

```
 InputStream inputStream = 
                  getClass().getClassLoader().getResourceAsStream("text.csv");
   BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream )); 
```

当您打包您的项目以进行分发时，请确保您的项目`text.csv`打包在同一个文件夹中，即类文件夹的根目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:23:53.960

我将通过程序参数传递 .CSV 文件的路径，如下所示：

```
java MyCsvReader C:\Users\Me\file.csv
```

`args`然后通过您的`main`方法访问传递的参数：

```
public static void main(String[] args) {
    if(args.length != 1) {
        System.out.println("Correct usage: MyCsvReader <CSV path>");
        System.exit(1);
        return;
    }

    BufferedReader in = new BufferedReader(new FileReader(args[0]));
    // ...
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-02T15:21:16.837

根据项目，只需让程序提示用户输入 CSV 文件的文件路径即可。如果它是命令行程序，请使用`System.in`读取路径字符串并使用它来代替`"text.csv"`.

就像是：

```
Scanner input = new Scanner( System.in );
String path = input.next();
BufferedReader in = new BufferedReader(new FileReader(path)); 
```

我还建议首先确保文件确实存在于路径中，然后返回友好消息，而不是仅仅抛出原始异常。

# android - 访问其他手机文件

> ID：13670596
> 
> 赞同：-2
> 
> 时间：2012-12-02T15:16:52.660
> 
> 标签：android

我想将数据存储在一部手机中，并使其对另一部特定手机可见。那可能吗？我能想到的最佳解决方案是将数据存储在主机上的外部 sql 数据库中，另一部手机将能够访问该数据库。问题是我需要第三方。我想做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T15:39:20.810

最好的办法是为此使用单独的服务器，因为您的手机可能被允许访问网络，但同时网络中的任何人都无法连接到手机。

澄清一下：直接通信在技术上是可能的，因为设备可以毫无问题地充当服务器，但是如果您谈论**一般**用途（即在**任何**网络等中），那么您很可能会被运营商的防火墙或 NAT 等阻止。所以如果您想制作这样的应用程序并且两个设备都可以在您控制的网络中工作，那么没问题。但否则使用服务器会更简单。

# iphone - 如何全屏显示 ImageView？

> ID：13670600
> 
> 赞同：1
> 
> 时间：2012-12-02T15:17:20.543
> 
> 标签：iphone, ios, uiimageview, fullscreen

如果用户触摸按钮或图像本身，我想全屏显示图像，该图像显示在 ImageView 中。有没有办法做到这一点？我在 Facebook 应用程序上看到过类似的情况。我想以纵向模式在屏幕上显示图像大小，并且在横向模式下更改方向时，我希望图像适合屏幕。有没有办法做到这一点，也许是一个示例代码？用户如何退出全屏模式？也许这可以通过 subvie 实现，但我不知道如何处理。

这就是我的意思：

人像模式：

![在此处输入图像描述](../Images/4ba09849c55e02ce6dfdd04415d9f6bd.png)

横向模式： ![在此处输入图像描述](../Images/a07b6ac6c636d72cac8bfee7a2995108.png)

和关闭按钮。不需要评论部分。 ![在此处输入图像描述](../Images/79b308f6f631bc0287c4ccc60cbc9c57.png)

如果有人可以帮助我，我会很高兴。

最好的祝福。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:07:49.313

您给它的描述类似于iOS中的相册应用程序，它具有缩放滚​​动和更多功能。

查看这个开源[示例](https://github.com/mwaterfall/MWPhotoBrowser)。

由 Michael Waterfall 创建，其中包括来自存储在服务器或本地的图像的照片库。

您可以根据项目要求修改代码。并且很容易处理图像。这将满足您的需要。

**编辑**：您可以通过这种方式处理类，您可以在示例代码中看到它有 2 个类`MWPhotoBrowser`，即照片浏览器和 viewController。还有一个`MWPhoto`用来表示照片对象。

您只需要以`MWPhoto`格式维护照片列表，因此在使用时，您可以让 tableView 以网格视图样式以缩略图形式显示所有照片，并在点击任何图像时，您的代码应该打开该图像，`MWPhotoBrowser`这意味着您的照片数组将与刚开始时相同您需要更改的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T21:13:11.187

您可以使用 pod XLMediaZoom 像 Instagram 一样全屏显示图像和视频。看到这个答案：[https ://stackoverflow.com/a/18282163/1070393](https://stackoverflow.com/a/18282163/1070393)

# javascript - 需要jquery淡入效果

> ID：13670601
> 
> 赞同：-4
> 
> 时间：2012-12-02T15:17:23.790
> 
> 标签：javascript, jquery, fadein

我试图弄清楚如何使用 jquery 在一定时间后使图像出现在屏幕上。我已经使用 CSS 来定位图像并使用 display none 以便在 jquery 调用它之前可以看到它。任何人都可以帮我弄清楚如何在一定时间后使该图像淡入。

我试过这个。

```
$('#picture ').animate({
             width: '100px',
             height: '100px'
                }, 1000, function() {
                $(this).show('slow',{duration: 4000}
                )
        }); 
```

然而，它立即出现。我需要的是随着时间的推移出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T15:23:14.787

例子：

```
$(document).ready(function(){ 
    setTimeout(function(){ 
        $('#imgID').fadeIn('slow');
    }, 2000); 
}); 
```

# android - 如何在 Titanium 的 Android 拨号盘中显示“#”？

> ID：13670609
> 
> 赞同：0
> 
> 时间：2012-12-02T15:18:03.290
> 
> 标签：android, titanium, appcelerator

在 Titanium Appcelerator/Android 中，我们可以使用此代码打开呼叫拨号以拨打号码。

```
var win = Ti.UI.createWindow();
win.backgroundColor = 'white';
// Create a Button.
var aButton = Ti.UI.createButton({
    title : 'Charge',
    height : 40,
    width : 150,
    top : 300,
    left : 80
});

var value = '123456789#';
win.add(aButton);
aButton.addEventListener('click', function() {
    Titanium.Platform.openURL('tel:' + value);
});
win.open(); 
```

问题是如何`#`在拨号盘中显示：截至目前它只显示 123456789。我尝试了很多方法，但它没有显示`#`。还有其他方法吗？阿里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:22:37.297

试试这个（用“%23”替换你的“#”）：

```
var value = '123456789%23'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:45:15.447

哈希只是一个特殊字符，所以添加

```
%23 
```

给你的

```
 var value='123456789'; 
```

细绳。

所以它看起来像： -

```
 var value='123456789%23'; 
```

简单的。

# sql - 有条件的联合

> ID：13670613
> 
> 赞同：3
> 
> 时间：2012-12-02T15:18:16.490
> 
> 标签：sql, union, conditional-statements

假设我在一个 UNION 中组合了三个子查询。

```
select * from (
    select nr, pos, '1' from foo
    union all
    select nr, pos, '2' from bar
    union all
    select nr, pos, '3' from foobar
) 
```

我需要的是一个结果，它`foobar` 仅`nr`在第一个子查询（from `foo`）没有返回值的情况下才返回行。

该`nr`列必须是唯一的条件，而不是整行，因此 UNION 无济于事。我对吗？

抱歉，我不知道如何更好地解释这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T15:20:25.260

在最后一个子句添加一个`where`子句，`select`使其仅在前两个查询没有结果*时才返回结果。*请参阅下面的更新查询：

```
select nr, pos, '1' from foo
union all
select nr, pos, '2' from bar
union all
select nr, pos, '3' from foobar fb
 where not exists (select 1 from foo f where fb.nr = f.nr)
   and not exists (select 1 from bar b where fb.nr = b.nr) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T16:07:36.763

也许是这样的把戏：

```
select distinct min(x), nr, pos from (
    select nr, pos, '1' as x from foo
    union all
    select nr, pos, '2' from bar
    union all
    select nr, pos, '3' from foobar
)
group by nr, pos 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T16:05:14.870

你似乎需要：

```
SELECT *
  FROM (SELECT nr, pos, '1' AS code FROM foo
        UNION ALL
        SELECT nr, pos, '2' AS code FROM bar
        UNION ALL
        SELECT nr, pos, '3' AS code
          FROM foobar
         WHERE nr NOT IN (SELECT nr FROM foo)
       ) 
```

您可以扩展该处理，以便`bar`不选择 from 中的项目，除非它们未在 中列出`foo`，并且不选择 in 中的项目，`foobar`除非它们未在`foo`或中列出`bar`。显然，您可以选择`code`（也许`source`）以外的名称作为数值的列名，但您应该为其提供一个名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T22:58:31.020

如果您使用的 SQL 产品支持排名函数，您可以尝试以下操作：

```
SELECT nr, pos, src
FROM (
  SELECT *, RANK() OVER (PARTITION BY nr ORDER BY src) AS rnk
  FROM (
    SELECT nr, pos, '1' AS src FROM foo
    UNION ALL
    SELECT nr, pos, '3' AS src FROM foobar
  ) s
) s
WHERE rnk = 1
UNION ALL
SELECT nr, pos, '2' AS src FROM bar
; 
```

最里面的子查询联合来自`foo`和的行`foobar`。中间层子查询`nr`根据提供它们的源表对值进行排名：

*   对 from 的行`foobar`进行排名，就好像在;中找不到`1`相应的值一样`nr``foo`

*   否则，它的`foo`行将被列为`1`.

排名结果集被过滤`rnk = 1`，然后与`bar`表联合（据我所知，它是无条件返回的）。

# c# - 在 asp.net 中发送具有多个查询字符串的 url 作为查询字符串参数

> ID：13670632
> 
> 赞同：2
> 
> 时间：2012-12-02T15:20:24.773
> 
> 标签：c#, asp.net, .net, c#-4.0

我需要发送一个重定向 url 作为查询字符串参数，不幸的是这个 url 包含多个查询字符串参数，如下所示

> “http://host:port/page2.aspx?param1=value¶m2=value¶m3=value”

问题是当我编码这个 url 并通过 querystring 发送它时，它看起来好像没有编码，所以我的应用程序认为重定向 url 参数值只是

> “http://host:port/page2.aspx?param1=value”

并考虑

> "¶m2=值¶m3=值"

作为当前网址的一部分

我试过`Server.UrlEncode` 了`Server.HtmlEncode`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T15:43:44.183

```
string myUrl = “http://host:port/page2.aspx?param1=value&param2=value&param3=value”;

string EncodedUrl = myUrl.EncodeTo64(); 
```

将此作为查询字符串传递并使用检索：

```
 EncodedUrl.DecodeFrom64(); 
```

职能：

```
public static string EncodeTo64(this string target)
    {

        byte[] toEncodeAsBytes

              = System.Text.ASCIIEncoding.ASCII.GetBytes(target);

        string returnValue

              = System.Convert.ToBase64String(toEncodeAsBytes);

        return returnValue;

    }

public static string DecodeFrom64(this string target)
    {

        byte[] encodedDataAsBytes

            = System.Convert.FromBase64String(target);

        string returnValue =

           System.Text.ASCIIEncoding.ASCII.GetString(encodedDataAsBytes);

        return returnValue;

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:18:14.837

将 url 中的 '&' 替换为 '%26' 或使用 Server.UrlEncode

```
Responsse.redirect("redirectURL?a='http://url2?a=5%26b=7'&b=9'");
 or
Responsse.redirect("redirectURL?a="+Server.UrlEncode("http://url2?a=5&b=7")+"&b=9'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T16:19:57.817

对 URL 进行编码

```
System.Web.HttpUtility.UrlEncode(string url) 
```

# google-apps-script - 第一个 Google 脚本 - 以 xls 格式保存数据并上传文件

> ID：13670633
> 
> 赞同：1
> 
> 时间：2012-12-02T15:20:31.993
> 
> 标签：google-apps-script

GAS 新手，正在为我的第一个脚本而苦苦挣扎。任何帮助将不胜感激。UI 显示，但我无法在 xls 文件中写入数据。当我使用处理程序时它正在工作，但是，我必须将其更改为 doPost 才能使文件上传工作。

我想要拥有多个字段和 2 个文件上传选项的 UI。有没有人有我可以用来开始的示例脚本？

我的剧本

```
function doGet(e)  
 Create a vertical panel with a grid that has  text boxes
 Create a form that has a file upload box 

function doPost(e) { 
var doc = SpreadsheetApp.openById('0Auxvh5UNOiURdE1uc1VOVGNlTE01bjF4THRmdzFnSXc'); 
var lastRow = doc.getLastRow();
var cell = doc.getRange('a1').offset(lastRow, 0);
cell.setValue(e.parameter.universityname);
cell.offset(0, 1).setValue(e.parameter.eventname);to age 
cell.offset(0, 2).setValue(e.parameter.city);

var fileBlob = e.parameter.thefile;
var doc = DocsList.createFile(fileBlob);

 var app = UiApp.getActiveApplication(); 
 app.close(); 
 return app; 
} 
```

# python - 认证会话切换

> ID：13670635
> 
> 赞同：0
> 
> 时间：2012-12-02T15:20:46.640
> 
> 标签：python, session, authentication

我计划构建一个网络应用程序（“我的应用程序”），用户已经登录到客户运行的另一个网络应用程序（“他们的应用程序”）可以访问该应用程序。目标是用户不必重新进行身份验证（将他们的密码重新输入到我的应用程序中），而是他们的应用程序应该将一些信息传递给我的应用程序，我可以使用这些信息来验证用户。

我知道我可以做点什么，比如传递使用预共享密钥和一些盐签名的用户 ID，但我想知道这个用例是否有现有的方案或库。我的应用程序将使用 Python，这两个应用程序都在不同域下的不同机器上运行，我希望将对他们的应用程序进行必要的更改保持在最低限度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:25:57.843

我相信这类交易最流行的协议是[OAuth](http://oauth.net/)。它也有一个[Python 库](https://github.com/simplegeo/python-oauth2)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T17:11:36.803

SAML 是不同网站（例如不同域）之间 SSO 的另一个标准。ping 客户以查看他们是否已经获得支持。如果是这样，[维基百科页面](http://en.wikipedia.org/wiki/Security_Assertion_Markup_Language)是一个开始立足的好地方。还可以查看Stack Overflow 上的[这个先前的线程](https://stackoverflow.com/questions/5056475/python-library-for-implementing-saml2-based-service-provider-and-identity-provid)

# scala - Scala 2.9 中定义的 Numeric 和 Double 之间的隐式转换在哪里

> ID：13670636
> 
> 赞同：3
> 
> 时间：2012-12-02T15:20:46.703
> 
> 标签：scala, numeric, implicit-conversion

我一直在研究一些编译良好的 scala 代码，但不知何故我破坏了隐式转换，我无法弄清楚我做错了什么。将其归结为一个非常简单的情况，此代码无法编译，原因似乎是我没有导入 Double 和 Numeric[Double] 之间的隐式转换：

```
import scala.math.Numeric
import scala.math.Numeric._
import scala.math.Numeric.Implicits._
import Ordering.Implicits._

object ImplicitNumericConversions {
  val v: Numeric[Double] = 3.0
} 
```

通过提供我自己的功能，我可以很容易地解决这个问题：

```
import scala.math.Numeric

object ImplicitNumericConversions {
  def convertDoubleToNumeric(d: Double)(implicit num: Numeric[Double]): Numeric[Double] = num

  val v: Numeric[Double] = convertDoubleToNumeric(3.0)
} 
```

如果我将转换函数设为隐式，那么我会得到我正在寻找的东西：

```
import scala.math.Numeric

object ImplicitNumericConversions {

  implicit def convertDoubleToNumeric(d: Double)(implicit num: Numeric[Double]): Numeric[Double] = num

  val v: Numeric[Double] = 3.0
} 
```

...但是为什么从 scala.math.Numeric 的导入不为我做这个？

我正在处理的实际问题如下所示：

```
class NumericRange[T <% Numeric[T]](val lower: T, val upper: T) { ... }

object NumericRange {

  def apply[T](lower: T, upper: T)(implicit num: Numeric[T]) = {
    import num._
    new NumericRange[T](lower, upper)
  }
} 
```

...创建新 NumericRange 的行无法编译并出现以下错误：

```
Multiple markers at this line
    - No implicit view available from T => scala.math.Numeric[T].
    - not enough arguments for constructor NumericRange: (implicit evidence$1: T => scala.math.Numeric[T])org.reductio.rtree.NumericRange[T]. Unspecified value parameter 
     evidence$1.
    - not enough arguments for constructor NumericRange: (implicit evidence$1: T => scala.math.Numeric[T])org.reductio.rtree.NumericRange[T]. Unspecified value parameter 
     evidence$1.
    - No implicit view available from T => scala.math.Numeric[T]. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T15:55:16.627

`Numeric`是一个[类型类](http://en.wikipedia.org/wiki/Type_class)，这意味着您不使用`Numeric[Double]`这种方式的实例，而是`Numeric[Double]`在范围内有一个隐式指定如何执行数字操作（有关 的相关讨论，`Double`请参见[我的答案](https://stackoverflow.com/a/13556542/334519)`Ordering`）。

所以你正在寻找一个隐含的`Numeric[T]`，而不是一个`T => Numeric[T]`. 幸运[的是，在 Double 范围内有一个](http://www.scala-lang.org/api/current/scala/math/Numeric$$DoubleIsFractional$.html)，所以你可以写：

```
class NumericRange[T: Numeric](val lower: T, val upper: T) { ... } 
```

或者：

```
class NumericRange[T](val lower: T, val upper: T)(implicit
  ev: Numeric[T]
) { ... } 
```

第一个中的“上下文绑定”只是第二个中隐式参数的语法糖。

# linux - 如何从 bash shell SSH 到多个服务器并提供完整登录？

> ID：13670638
> 
> 赞同：0
> 
> 时间：2012-12-02T15:20:51.700
> 
> 标签：linux, bash, ssh

这似乎是一个非常受欢迎的问题，根据您查看的论坛，它有大约 1,000 个不同的答案。不幸的是，没有一个对我有用。

我正在尝试编写一个 bash shell 脚本，该脚本通过 SSH 连接到服务器列表并运行一个简单的`stop <x> service`命令来关闭每台机器上的应用程序服务器。

要手动执行此操作：

```
ssh user@server01.ourdomain.tld
user@server01.ourdomain.tld's password: ourpassword
Last login: Fri Nov 30 14:37:51 2012 from <some-ip-addr>
server01:[user@machinename ~]# (now we are SSHed in) 
```

所以我问：给定一组服务器名称（`server01`通过`server25`），我如何编写一个 bash 脚本以 SSH 连接到所有服务器并运行`service ourservice stop`？该脚本一旦启动就不需要任何人工交互，因此应该为 SSH 命令提供适当的密码 ( `ourpassword`) 以供使用。此外，我需要在脚本 SSH 进入每个服务器后正确退出（或关闭连接），这样我们就不会挂起资源（打开连接等）。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T15:33:37.987

做这个

1.  `ssh-keygen`使用命令使自己成为公钥/私钥对
2.  将您的私钥保存在`.ssh/authorized_keys`文件夹内的所有服务器中

现在**您无需输入密码即可连接到任何服务器**，这是我们在这里的第一个目标。

现在您可以使用以下语法向您的服务器发送命令：

```
ssh username@serverid 'command' 
```

[在这个页面上](http://systemsboy.com/2006/07/send-remote-commands-via-ssh.html)有一个很好的简短描述。

因此，您只需将 25 个命令连接到一个文件中并启动它，如下所示：

```
ssh user@server1.yourservers.com 'service ourservice stop'
ssh user@server2.yourservers.com 'service ourservice stop' 
```

# android - 相机意图未运行

> ID：13670642
> 
> 赞同：0
> 
> 时间：2012-12-02T15:21:26.727
> 
> 标签：android

我的相机活动不起作用：

我从 listActivity 启动它。我还有来自列表活动的另外三个活动，但相机活动/意图`force closes`。

* * *

## 相机.java

```
 package com.alpha.beta;

               import java.io.IOException;

               import android.app.Activity;
               import android.content.Intent;
               import android.graphics.Bitmap;
               import android.os.Bundle;
               import android.view.View;
               import android.widget.ImageButton;
               import android.widget.ImageView;

               public class Camera extends Activity implements View.OnClickListener {

ImageView Image;
ImageView setWall;
ImageButton TakePic;
Bitmap bmap;
Intent i;
final static int cameraData = 0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.camera);
    vars();

}

private void vars() {
    // TODO Auto-generated method stub
    Image = (ImageView) findViewById(R.id.ivReturnPic);
    setWall = (ImageView) findViewById(R.id.bSetWallpaper);
    TakePic = (ImageButton) findViewById(R.id.iBTakePic);
    setWall.setOnClickListener(this);
    TakePic.setOnClickListener(this);
}

public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.iBTakePic:
        try {
            getApplicationContext().setWallpaper(bmap);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        break;
    case R.id.bSetWallpaper:
        i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(i, cameraData);
        break;

    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK) {
        Bundle extras = data.getExtras();
        bmap = (Bitmap) extras.get("data");
        Image.setImageBitmap(bmap);
    }
}

     } 
```

* * *

## 日志猫

```
 12-02 20:44:11.229: W/dalvikvm(6322): threadid=1: thread exiting with uncaught exception (group=0x40018578)
       12-02 20:44:11.229: E/AndroidRuntime(6322): FATAL EXCEPTION: main
       12-02 20:44:11.229: E/AndroidRuntime(6322): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.alpha.beta/com.alpha.beta.Camera}: java.lang.ClassCastException: android.widget.Button
       12-02 20:44:11.229: E/AndroidRuntime(6322):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
       12-02 20:44:11.229: E/AndroidRuntime(6322):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
       12-02 20:44:11.229: E/AndroidRuntime(6322):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
       12-02 20:44:11.229: E/AndroidRuntime(6322):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
       12-02 20:44:11.229: E/AndroidRuntime(6322):  at android.os.Handler.dispatchMessage(Handler.java:99)
       12-02 20:44:11.229: E/AndroidRuntime(6322):  at android.os.Looper.loop(Looper.java:130)
       12-02 20:44:11.229: E/AndroidRuntime(6322):  at android.app.ActivityThread.main(ActivityThread.java:3687)
       12-02 20:44:11.229: E/AndroidRuntime(6322):  at java.lang.reflect.Method.invokeNative(Native Method)
       12-02 20:44:11.229: E/AndroidRuntime(6322):  at java.lang.reflect.Method.invoke(Method.java:507)
       12-02 20:44:11.229: E/AndroidRuntime(6322):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
       12-02 20:44:11.229: E/AndroidRuntime(6322):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
       12-02 20:44:11.229: E/AndroidRuntime(6322):  at dalvik.system.NativeStart.main(Native Method)
       12-02 20:44:11.229: E/AndroidRuntime(6322): Caused by: java.lang.ClassCastException: android.widget.Button
       12-02 20:44:11.229: E/AndroidRuntime(6322):  at com.alpha.beta.Camera.vars(Camera.java:34)
       12-02 20:44:11.229: E/AndroidRuntime(6322):  at com.alpha.beta.Camera.onCreate(Camera.java:27)
       12-02 20:44:11.229: E/AndroidRuntime(6322):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
       12-02 20:44:11.229: E/AndroidRuntime(6322):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615) 
```

## 12-02 20:44:11.229: E/AndroidRuntime(6322): ... 11 更多

## 清单文件

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.alpha.beta"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.SET_WALLPAPER" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Splash"
        android:label="@string/title_activity_app" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Menu"
        android:label="@string/title_activity_app" >
        <action android:name="com.alpha.beta.Menu" />

        <category android:name="android.intent.category.DEFAULT" />
    </activity>
    <activity
        android:name=".App"
        android:label="@string/title_activity_app" >
    </activity>
    <activity
        android:name=".TextPlay"
        android:label="@string/title_activity_app" >
    </activity>
    <activity
        android:name=".Email"
        android:label="@string/title_activity_app" >
    </activity>
    <activity
        android:name=".Camera"
        android:label="@string/title_activity_app" >
    </activity>
</application>

    </manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T15:28:18.907

您没有显示您的**布局**文件，但存在（或其来源）。你做错的事情是这样的：你的布局元素是例如`ImageView`，但你做`findViewById()`了并将结果转换为 ie `ImageButton`。这会导致强制转换异常。所以检查你所有的布局元素和你的代码，看看是否没有所说的不匹配。

除非您不需要特定视图的任何特殊功能，而是只想将侦听器附加到它，或更改其可见性等，否则您应该只将结果`findViewById()`转换`View`为不需要关心这是否是正确的转换（所有 UI 元素都是 View 的子元素）。

# c# - 在 ActionFilter 中为基类属性添加值

> ID：13670643
> 
> 赞同：1
> 
> 时间：2012-12-02T15:21:36.487
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我正在为我的网站创建一个简单的私人消息系统。这是模型：

```
public class PrivateMessage : GlobalViewModel
{
    [Key]
    public int MessageId { get; set; }

    public bool IsRead { get; set; }
    public DateTime CreatedDate { get; set; }
    [MaxLength(100)]
    public string Subject { get; set; }

    [MaxLength(2500)]
    public string Body { get; set; }

    public virtual UserProfile Sender { get; set; }

    public virtual UserProfile Receiver { get; set; }
} 
```

如果您有任何新消息，我想检查每个页面请求，以便通知用户。因此，我制作了一个基本视图模型，其中包含：

```
public class GlobalViewModel
{
    [NotMapped]
    public virtual int NewMessages { get; set; }
} 
```

所有其他视图模型都继承自此类。为了获取用户的新私人消息的数量，我这样做：

```
 public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        DBContext db = new DBContext();
        int userID = (int)Membership.GetUser().ProviderUserKey;
        int newMessages = db.PrivateMessages.Where(a => a.Receiver.UserId == userID && a.IsRead == false).Count();
        base.OnActionExecuted(filterContext);
    } 
```

我来到这里，每个动作都确实调用了 OnActionExecuting。但我的问题是：

**如何将 newMessages 添加到 GlobalViewModel？**

我最终想要做的是在“主”视图中调用它

```
 You have @Model.NewMessages new messages 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T15:31:24.860

您可以覆盖[`OnActionExecuted`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.onactionexecuted%28v=vs.98%29.aspx)在您的操作完成运行后运行的事件，这将允许您检查传递给视图的模型并可能通过在其上设置一些属性来修改它：

```
public class PrivateMessageFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutedContext filterContext)
    {
        GlobalViewModel model = null;

        var viewResult = filterContext.Result as ViewResultBase;
        if (viewResult != null)
        {
            // The action returned a ViewResult or PartialViewResult
            // so we could attempt to read the model that was passed
            model = viewResult.Model as GlobalViewModel;
        }

        if (model == null)
        {
            var jsonResult = filterContext.Result as JsonResult;
            if (jsonResult != null)
            {
                // The action returned a JsonResult
                // so we could attempt to read the model that was passed
                model = jsonResult.Data as GlobalViewModel;
            }
        }

        if (model != null)
        {
            // We've managed to read the model 
            // Now we can set its NewMessages property
            model.NewMessages = GetNewMessages();
        }
    }

    private int GetNewMessages()
    {
        int userId = (int)Membership.GetUser().ProviderUserKey;
        int newMessages = db.PrivateMessages.Where(a => a.Receiver.UserId == userId && a.IsRead == false).Count();
    }
} 
```

作为使用基本视图模型的替代方法，您可以编写一个自定义 HTML 帮助程序，该帮助程序将返回此信息。

# ruby-on-rails - 如何在视图中仅输出我想要在 Ruby On Rails 中的变量值？

> ID：13670645
> 
> 赞同：-3
> 
> 时间：2012-12-02T15:22:01.243
> 
> 标签：ruby-on-rails, ruby, model-view-controller, methods, for-loop

现在在我的views文件夹中的application.html.erb中，我写了这个。

```
<p>List of all post IDs: <%= Post.all.each {|i| print i.id } %></p> 
```

我希望它只输出每个帖子的 post.id。但相反，它显示了这一点

```
List of all post IDs: [#<Post id: 1, title: "Our First Post", content: "Content for our first post", created_at: "2012-11-24 11:22:02", updated_at: "2012-11-26 17:40:54", user_id: 1>, #<Post id: 3, title: "Our Second Post", content: "Content for our second post", created_at: "2012-11-24 11:51:32", updated_at: "2012-11-26 17:41:33", user_id: 2>, #<Post id: 8, title: "Our Second Post", content: "Content of Our mandatory Second Post", created_at: "2012-11-24 19:42:02", updated_at: "2012-11-27 20:46:57", user_id: 1>, #<Post id: 10, title: "C Post", content: "Hi I'm Cee nice to meet you", created_at: "2012-11-26 17:51:20", updated_at: "2012-11-26 17:51:20", user_id: 3>, #<Post id: 20, title: "11", content: "11", created_at: "2012-11-27 19:58:48", updated_at: "2012-11-27 19:58:48", user_id: 4>, #<Post id: 21, title: "22", content: "22", created_at: "2012-11-27 19:58:53", updated_at: "2012-11-27 19:58:53", user_id: 4>, #<Post id: 25, title: "I'm Super Singha!", content: "Yessar!!!", created_at: "2012-11-27 20:45:07", updated_at: "2012-11-27 20:45:07", user_id: 6>, #<Post id: 26, title: "Should this be a blog or a forums or a whatever-wha...", content: ";asljdfi;asfi;asdf;lasbfurbofioboboeifhosdsdbvisbvw...", created_at: "2012-11-27 20:46:28", updated_at: "2012-12-02 14:17:14", user_id: 1>, #<Post id: 27, title: "Hullow", content: "Yoyoyo", created_at: "2012-11-30 07:35:38", updated_at: "2012-11-30 07:35:54", user_id: 6>, #<Post id: 649, title: "um", content: "hey", created_at: "2012-11-30 12:20:58", updated_at: "2012-11-30 12:20:58", user_id: 2>, #<Post id: 82692, title: "LALALALAL", content: "hiopsdahfiosadhfioahfio", created_at: "2012-12-02 13:59:04", updated_at: "2012-12-02 14:22:41", user_id: 2>, #<Post id: 82693, title: "ggg", content: "fff", created_at: "2012-12-02 14:29:42", updated_at: "2012-12-02 14:29:42", user_id: 2>, #<Post id: 82694, title: "sick", content: "sick", created_at: "2012-12-02 14:41:32", updated_at: "2012-12-02 14:41:32", user_id: 5>] 
```

我已经尝试过，`puts`而不是`print`，这也不起作用。

进一步：我还想根据预期结果为每个帖子显示页面创建一个链接，我该如何实现？

这是我的仓库：[https](https://github.com/nixor/cpblog) ://github.com/nixor/cpblog ，这里是 heroku 网站：[http ://still-plains-5469.herokuapp.com/](http://still-plains-5469.herokuapp.com/)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T15:52:34.773

```
<p>List of all post IDs: 
</p>
<%= Post.all.each do |e| %>
  <p>
    <%= e.Id %>
  <p>
  <%= link_to "Show", e %> 
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:04:34.077

问题在于您如何在此处使用 ERB 标签：

```
<%= Post.all.each {|i| print i.id } %> 
```

每当您使用`<%=`时，都会呈现块的结果。在您的情况下，`Post.all.each {}`返回一个数组对象，这正是您在呈现的 HTML 中看到的。

为了打印出每个项目，您需要遍历项目 using`<%`然后打印出您想要 using 的内容`<%=`。

```
<p>List of all post IDs: 
  <% Post.all.each |post| do %>
    <%= link_to post.id, post_path(post) %>
  <% end %>
</p> 
```

# java - Java GUI应用程序，从列表中将数据加载到Jtable

> ID：13670646
> 
> 赞同：1
> 
> 时间：2012-12-02T15:22:34.363
> 
> 标签：java, swing, netbeans-7

Java GUI 应用程序，从列表中将数据加载到 Jtable 我找到了以下链接，但我没有找到答案：[http ://docs.oracle.com/javase/tutorial/uiswing/components/table.html](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

请有人能给我举个例子我应该怎么做。我的对象有 5 个字段：姓名、等级、薪水、出生年份、性别，并且该列表是从文件中读取的，所以我不知道该列表有多少对象。我在netbeans工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:35:49.630

您链接到的教程有一个示例：[http](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data) ://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data 。您应该能够`List<Employee>`轻松地将其调整为：

```
public int getRowCount() { 
    return list.size();
}

public int getColumnCount() {
    return 5; 
}

public Object getValueAt(int row, int col) {
    Employee employee = list.get(row);
    if (col == 0) {
        return e.getName();
    }
    else if (col == 1) {
        return e.getGrade();
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:33:02.770

使用矢量应该对您有所帮助。 [将数组加载到 Java 表中](https://stackoverflow.com/questions/3090013/load-an-array-to-a-java-table)。

```
Vector model = new Vector();
Vector row = new Vector();

row.add("abce");
row.add("def");
row.add("ghi");
model.add(row);

row = new Vector();
row.add("sds");
row.add("sdfds");
row.add("24");
model.add(row); 
```

JTable 表 = 新 JTable(模型);

Vector的所有方法都是同步的。但是，ArrayList 的方法是不同步的。

# php - 文件访问权限

> ID：13670648
> 
> 赞同：0
> 
> 时间：2012-12-02T15:22:50.713
> 
> 标签：php, apache, ftp

请问有人可以确认管理文件的“000”访问权限是安全的吗？

我想在服务器上安全地存储私人数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:26:03.643

如果文件的权限为000，那么数学上意味着666-000=666权限意味着只有超级用户可以访问，但不会获得执行权限。该文件的所有者可以访问该文件，但在更改权限之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:24:33.537

000 不会授予任何人或任何东西访问权限，包括您，甚至是 root。

# javascript - 画布：为游戏化目的创建类似游戏的爆炸星星效果

> ID：13670654
> 
> 赞同：2
> 
> 时间：2012-12-02T15:23:43.753
> 
> 标签：javascript, canvas, html5-canvas

来自 Web 开发的主干方面，我们正试图找到一个解决方案，以解决向我们的任务管理 Web 应用程序添加视觉和声音效果的请求。对于初学者 - 我们正在寻找一种方法来创建像您在游戏中看到的爆炸星星效果。

这可以用 HTML5 画布完成吗？我们应该使用闪光灯吗？任何想法如何开始？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T15:32:09.227

到目前为止，Flash 可以在视觉上做的任何事情都可以通过现代浏览器上的 HTML5 画布来完成。

对于“星爆”视觉效果，这听起来很简单，只需创建一个随机的对象数组，每次画布更新时这些对象都会以随机的预设方向移动。

示例： http: [//jsfiddle.net/amDAW/](http://jsfiddle.net/amDAW/)（点击画布创建星爆）

至于声音，这不是在画布中处理的，而是在`Audio`标签或相当新的`WebAudio`API 中处理的。如果您使用前者（更多浏览器支持），您最关心的是资源预加载，但有一些帮助库可以将其抽象出来（无耻广告：[https](https://github.com/jsweeneydev/ResourceLoader) ://github.com/jsweeneydev/ResourceLoader ）。

# ruby-on-rails - 如何修改 Rails 中间件以从 Heroku 提供 gzip 资产？

> ID：13670655
> 
> 赞同：0
> 
> 时间：2012-12-02T15:23:44.583
> 
> 标签：ruby-on-rails, heroku

[我的问题与“从 Heroku 提供 gzip 资产的任何方式](https://stackoverflow.com/questions/12326191/any-way-to-serve-gzip-assets-from-heroku)”密切相关

最好的方法指向一个要点：[https](https://gist.github.com/2152663) ://gist.github.com/2152663 那么，我该如何让它工作呢？对于问的人来说这似乎很明显，但我很难把它放在一起。

我知道我必须`compressed_static_assets.rb`放入**/lib**然后从我**的**`production.rb`.

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:17:17.787

这可能是一个较老的问题，但您是否尝试过[heroku-deflater gem](https://rubygems.org/gems/heroku-deflater)？看起来它做同样的事情，但更容易启动和运行。**

# mysql - MySQL 局部变量

> ID：13670659
> 
> 赞同：31
> 
> 时间：2012-12-02T15:24:01.037
> 
> 标签：mysql, variables, set, local, declare

我正在尝试为查询定义和初始化 MySQL 变量。

我有以下内容：

```
declare @countTotal int;
SET @countTotal = select COUNT(*)
 from nGrams; 
```

我在 Netbeans 中使用 MySQL，它告诉我有一个错误。我的错误是什么/在哪里？

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-02T15:29:37.313

MySQL 有两种不同类型的变量：

*   **局部变量**（*不*以 为前缀`@`）是强类型的，并作用于声明它们的存储程序块。请注意，如[`DECLARE`语法](http://dev.mysql.com/doc/en/declare.html)中所述：

    > [`DECLARE`](http://dev.mysql.com/doc/en/declare.html)只能在[`BEGIN ... END`](http://dev.mysql.com/doc/en/begin-end.html)复合语句中使用，并且必须位于其开头，在任何其他语句之前。

*   [**用户变量**](http://dev.mysql.com/doc/en/user-variables.html)（以*为*前缀`@`）是松散类型的，并限定在会话范围内。请注意，它们既不需要也不能声明——直接使用它们即可。

因此，如果您正在定义一个存储程序并且确实需要一个“局部变量”，那么根据您问题中的措辞，您需要删除该`@`字符并确保您的`DECLARE`语句位于程序块的开头。否则，要使用“用户变量”，请删除该`DECLARE`语句。

此外，您需要将查询括在括号中，以便将其作为子查询执行：

```
SET @countTotal = (SELECT COUNT(*) FROM nGrams); 
```

否则，您可以使用[`SELECT ... INTO`](http://dev.mysql.com/doc/en/select-into.html)：

```
SELECT COUNT(*) INTO @countTotal FROM nGrams; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-02T15:26:12.207

试试这个：-

```
 select @countTotal := COUNT(*) from nGrams; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-02T15:26:30.920

函数示例：

```
DROP FUNCTION IF EXISTS test;

DELIMITER $$
CREATE FUNCTION test(in_number INT) RETURNS INT
    BEGIN
        DECLARE countTotal INT;
        SET countTotal = SELECT COUNT(*) FROM nGrams;
    RETURN countTotal + in_number;
END $$
DELIMITER ; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T15:31:42.283

根据[DECLARE Syntax](http://dev.mysql.com/doc/refman/5.5/en/declare.html)，`declare`必须在 begin...end 块内。

# jquery - jquery 更好的方法来最小化命令脚本

> ID：13670663
> 
> 赞同：0
> 
> 时间：2012-12-02T15:24:42.633
> 
> 标签：jquery, plugins, command, simplify

每次我希望用户能够使用他们的键盘执行快捷键时，我都会包含这个按键命令脚本。但我想知道是否有办法将其最小化或简化，因为在同一个脚本中一遍又一遍地基本上是同一件事。也许是一个数组或什么？

```
 var isCtrl = false;

 $(document).keyup(function (e) {
    if(e.which == 17 || e.which == 91) isCtrl=false;
 }).keydown(function (e) {

    // Check if CTRL || CMND is hold down
    if(e.which == 17 || e.which == 91) isCtrl=true;

    // CTRL+S || CMND+S
    if(e.which == 83 && isCtrl == true) {
        ctrl_s_command();
        return false;
    }

    /** HOTKEYS **/

    // ESC Key
    if (e.keyCode == 27) {
        esc_key_command();
        return false;
    }

    // Enter Key
    if (e.keyCode == 13) {
        enter_key_command();
        return false;
    }

    // Space Bar
    if (e.keyCode == 32) {
        space_bar_command();
        return false;
    }

    // Alt Key
    if (e.keyCode == 18) {
        alt_key_command();
        return false;
    }

    // Tab key
    if (e.keyCode == 9) {
        tab_key_command();
        return false;
    }

    // Shift key
    if (e.keyCode == 16) {
        shift_key_command();
        return false;
    }

    // Caps Lock
    if (e.keyCode == 20) {
        caps_lock_command();
        return false;
    }

    // Backspace key
    if (e.keyCode == 8) {
        backspace_key_command();
        return false;
    }

    // Home key
    if (e.keyCode == 36) {
        home_key_command();
        return false;
    }

    // End key
    if (e.keyCode == 35) {
        end_key_command();
        return false;
    }

    // Delete key
    if (e.keyCode == 46) {
        delete_key_command();
        return false;
    }

    // Insert key
    if (e.keyCode == 45) {
        insert_key_command();
        return false;
    }

    // Page Up key
    if (e.keyCode == 33) {
        page_up_key_command();
        return false;
    }

    // Page Down key
    if (e.keyCode == 34) {
        page_down_key_command();
        return false;
    }

    // Numlock key
    if (e.keyCode == 144) {
        numlock_key_command();
        return false;
    }

    // Scroll Lock key
    if (e.keyCode == 145) {
        scroll_lock_command();
        return false;
    }

    // Pause Break key
    if (e.keyCode == 19) {
        pause_break_command();
        return false;
    }

    /** ARROWS **/

    // Left Arrow Key
    if (e.keyCode == 37) {
        left_arrow_command();
        return false;
    }

    // Up Arrow Key
    if (e.keyCode == 38) {
        up_arrow_command();
        return false;
    }

    // Right Arrow Key
    if (e.keyCode == 39) {
        right_arrow_command();
        return false;
    }

    // Down Arrow Key
    if (e.keyCode == 40) {
        down_arrow_command();
        return false;
    }

    /** F Keys **/

    // F1 Key
    if (e.keyCode == 112) {
        f1_key_command();
        return false;
    }

    // F2 Key
    if (e.keyCode == 113) {
        f2_key_command();
        return false;
    }

    // F3 Key
    if (e.keyCode == 114) {
        f3_key_command();
        return false;
    }

    // F4 Key
    if (e.keyCode == 115) {
        f4_key_command();
        return false;
    }

    // F5 Key
    if (e.keyCode == 116) {
        f5_key_command();
        return false;
    }

    // F6 Key
    if (e.keyCode == 117) {
        f6_key_command();
        return false;
    }

    // F7 Key
    if (e.keyCode == 118) {
        f7_key_command();
        return false;
    }

    // F8 Key
    if (e.keyCode == 119) {
        f8_key_command();
        return false;
    }

    // F9 Key
    if (e.keyCode == 120) {
        f9_key_command();
        return false;
    }

    // F10 Key
    if (e.keyCode == 121) {
        f10_key_command();
        return false;
    }

    // F11 Key
    if (e.keyCode == 122) {
        f11_key_command();
        return false;
    }

    // F12 Key
    if (e.keyCode == 123) {
        f12_key_command();
        return false;
    }

 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:56:39.623

您可以像这样声明您的函数：

```
var keyCommand = {};
    // ESC Command
    keyCommand[27] = function() { alert("Escape"); };
    // Enter Command
    keyCommand[13] = function() { alert("Enter"); };
    // Tab key Command
    keyCommand[9] = function() {  alert("Tab"); };
    // etc etc 
```

或将它们分配给已定义的功能：

```
var keyCommand = {};
    // ESC Command
    keyCommand[27] = esc_key_command;
    // Enter Command
    keyCommand[13] = enter_key_command;
    // Tab key Command
    keyCommand[9] = tab_key_command;
    // etc etc 
```

然后使用调用相关函数

```
 if (typeof keyCommand[e.keyCode] == 'function') 
    keyCommand[e.keyCode](); 
```

# php - 教义2检查一个实体是否通过多对多关系与另一个实体相关

> ID：13670669
> 
> 赞同：0
> 
> 时间：2012-12-02T15:25:31.037
> 
> 标签：php, doctrine-orm

例如，我有 2 个实体：`event`并且`user`两者都有`ManyToMany`关系。

```
class Event {

/**
 * @Id @Column(type="integer") @GeneratedValue
 */
protected $id;
/**
 * @ManyToMany(targetEntity="User", inversedBy="participated_events")
 */
protected $participations;
} 
```

和

```
class User {

/**
 * @Id @Column(type="integer") @GeneratedValue
 * */
protected $id;
/**
 * @ManyToMany(targetEntity="Event", inversedBy="participations")
 */
protected $participated_events;
} 
```

我如何检查参与是否`$em->getRepository('event')->find(RANDOM_ID)`相互`$em->getRepository('user')->find(RANDOM_ID)`关联？换句话说，如何检查用户是否参与了这个活动？什么是最好的方法？我知道我可以获得所有参与的活动并检查，`foreach()`但我认为这一定是一种更简单的方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:00:56.593

您必须创建一个自定义存储库 DQL 并选择您想要执行的字段。

我个人避免使用多对多关系，因为我更容易做你想做的事情，如果我需要在 join_table 中添加额外的列。所以，我几乎总是用对应的 manyTo one 和 onetoMany 引用创建一个连接实体。所以在你的实例中会有一个 ParticipatedEvent 实体，它有 manyToOne 用户和 manyToOne 事件（以及他们的目标实体 oneToMany）你仍然有你的关系，但你有额外的加入模型（或实体）

所以，你最终是这样的：

```
 $particpated_event = $em->getRepository('ParticipatedEvents')->findOneBy('event_id'=>RANDOM_ID, 'user_id'=>RANDOM_USER_ID);
   if($particpated_event) {
       $event =  $particpated_event->getEvent(); //or get user.
   } 
```

你仍然可以做这样的事情

```
$particpated_events = $em->getRepository('event')->find(RANDOM_ID)->getParticipatedEvents();
foreach( $particpated_events as  $particpated_event){

      $user = $particpated_event->getUser();
  } 
```

再看看什么最适合你。如前所述，您可以使用 DQL 查询创建存储库类

# c++ - 底层集合的抽象迭代器

> ID：13670671
> 
> 赞同：5
> 
> 时间：2012-12-02T15:25:44.130
> 
> 标签：c++, c++-standard-library

所以基本上我想做的是有一个纯虚方法将迭代器返回到具体类型的任意集合，例如在伪代码中：

```
virtual Iterator<T> getIterator() const = 0; 
```

这个类的用户实际上并不关心子类使用什么实现。它可以是集合、向量、列表、数组等。

我知道这个`std::iterator`类，但我找不到正确指定它的方法，以便使用简单的向量。

```
virtual std::iterator<std::random_access_iterator_tag,T> getIterator() const = 0;

myVector.begin() // compilation error in implementation 
```

定义`std::iterator`为`const T`类型参数也没有奏效。我还尝试离开`T`，而是将指针和引用类型定义为`const T*`and `const T&`。

通过查看实现，`std::vector`我发现它`std::vector::const_iterator`实际上源自`_Iterator012`.`_Iterator_base`

没有任何方法可以处理 std 中的任意集合，这真的让我很困扰。由于两个原因，将我的类实现为模板`<algorithm>`对我来说不是一个选项：

*   无法控制实际值类型
*   我只是不想让我的类模板使我的设计复杂化很多并且让事情变得不那么灵活。

使用的类型参数`T`只是为了演示，实际上这是一个具体的类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T15:51:55.577

这是使用类型擦除的基本且非常基本的骨架方法。但是，您必须填写*很多*缺失的细节！

```
#include <memory>

template <typename T>
class TEIterator
{
    struct TEImplBase
    {
        virtual ~TEImplBase() { }
        virtual std::unique_ptr<TEImplBase> clone() const = 0;
        virtual void increment() = 0;
        virtual T & getValue() = 0;
        T * getPointer() { return std::addressof(getValue()); }
    };

    template <typename Iter>
    struct TEImpl
    {
        Iter iter;

        TEImpl(Iter i) : iter(i) { }

        virtual T & getValue()
        { return *iter; }

        virtual std::unique_ptr<TEImplBase> clone() const
        { return std::unique_ptr<TEImplBase>(new TEImpl<Iter>(*this)); }

        virtual void increment()
        { ++iter; }
    };

    std::unique_ptr<TEImplBase> impl;

public:

    template <typename T>
    TEClass(T && x)
    : impl(new TEImpl<typename std::decay<T>::type>(std::forward<T>(x)))
    {
    }

    TEClass(TEClass && rhs) = default;

    TEClass(TEClass const & rhs) : impl(rhs.impl.clone()) { }

    TEIterator & operator++()
    {
        impl->increment();
        return *this;
    }

    T & operator*() { return impl->getValue(); }
    T * operator->() { return impl->getPointer(); }
}; 
```

**用法：**

```
std::vector<int> v;
std::deque<int> dq;

TEIterator<int> a = v.begin(), b = dq.end(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:46:20.033

如果要使用虚方法，则不能使用任意返回值。您可以做的是定义一个基类，它是迭代器的包装器，以及该包装器类的子类。

但即便如此，您也必须将自己限制在最小的公分母上，因为 C++ 标准库中有几个迭代器类。

所以，AFAICS，这种带有任意迭代器的方法在不使用模板的情况下是不可行的。

# php - 在类中使用 $this 从空值创建默认对象

> ID：13670673
> 
> 赞同：3
> 
> 时间：2012-12-02T15:25:46.873
> 
> 标签：php, exception, pdo

我在此处找到的 PHP PDO Wrapper 类上使用了一些细微的变化：[http ://www.imavex.com/php-pdo-wrapper-class/](http://www.imavex.com/php-pdo-wrapper-class/)

这是我正在使用的新构造函数：

```
public function __construct($dsn, $user='', $passwd='') {
    $options = array(
        PDO::ATTR_PERSISTENT => true, 
        PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION
    );

    try {
        parent::__construct($dsn, $user, $passwd, $options);
    } catch (PDOException $e) {
        $this->error = $e->getMessage();
    }
} 
```

`error`是这个类的一个私有变量，定义在类的开头，在constructor.strong文本之上

当我像这样使用它时

```
$database = new Database(
        'mysql:host=' . $config['mysql_host'] . ';port=' . $config['mysql_port'] . ';dbname=' . $config['mysql_database'],
        $config['mysql_username'],
        $config['mysql_password']
); 
```

它向我显示了这个错误：**从空值创建默认对象**，指向数据库类文件，在行`$this->error = $e->getMessage();`。

抛出异常的原因是因为我还没有设置mysql用户名和密码，所以不用担心。我试图弄清楚它为什么会出现这个错误以及如何解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:23:21.070

似乎由于 db 类扩展了 PDO，当 PDO 构造函数抛出异常时 $this 变为 NULL。

```
class db extends PDO {
    public function __construct($dsn, $user="", $passwd="") {
        $options = array(
            PDO::ATTR_PERSISTENT => true,
            PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION
        );

        try {
            parent::__construct($dsn, $user, $passwd, $options);
        } catch (PDOException $e) {
            echo "Got PDOException\n";
            var_dump($this);
        }
    }
}

new db('mysql:host=localhost;port=3306;dbname=something', 'invaliduser', 'invalidpass'); 
```

如果您运行该代码，您将获得以下输出：

```
Got PDOException
NULL 
```

为了解决这个问题，您可以删除有问题的行并检查 db 对象是否为 null 或删除 try-catch 并在实例化新数据库时进行异常处理。或者，您可以重写该类以将 PDO 对象存储在变量中，而不是扩展 PDO。

# java - Android WebView 只显示半屏

> ID：13670683
> 
> 赞同：1
> 
> 时间：2012-12-02T15:26:30.840
> 
> 标签：java, android, android-layout, android-webview

我的网络视图显示良好，没有任何问题。但是，在我应用“选定文本”功能后，Web 视图只显示在屏幕的一半上（见下图）。

![在此处输入图像描述](../Images/fa27cb3007ee1cb2f945a6767ed5ba9c.png)

这是我的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE); 
    setContentView(R.layout.content);

    Intent i = this.getIntent();

    final int wordId = i.getIntExtra("id", -1);
    mCurrentWord = i.getStringExtra("word");
    mSelectedDB = i.getStringExtra("db");
    mContentStyle = i.getStringExtra("style");

    prefs = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());

    loadHistoryFromPreferences();
    loadFavouriteFromPreferences();

    wvContent = (WebView) findViewById(R.id.wvContent);
    initWebview();
    String content = getContentById(wordId);
    showContent(content);

    //This is the beginning of what I added
    webkit=new Webkit(this);
    wvContent.addView(webkit);
    WebkitSelectedText webkitSelectedText=new WebkitSelectedText(getApplicationContext(), webkit);
    webkitSelectedText.init();

    wvContent.setOnClickListener(new View.OnClickListener() {           
        @Override
        public void onClick(View v) {
            finish();
        }
    });
    //This is the end of what I added 
```

我不知道我做错了什么。除了这个显示问题，包括新添加的所有其他功能都可以`Selected text`正常工作。

我希望你们能意识到这个问题并帮我解决它。非常感谢。

**已编辑**

这是布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:gravity="bottom|fill_vertical"
>
    <LinearLayout xmlns:android=
    "http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scrollbars="vertical"
    android:layout_weight="1"
    >       
    <WebView  
        android:id="@+id/wvContent"
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent"
        android:layout_gravity="top" 
        android:layout_weight="1"  
    />

</LinearLayout>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:orientation="horizontal"
>
    <ImageButton
        android:id="@+id/btnHome"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:src="@drawable/home"
        android:layout_weight="0.25"
    />
    <ImageButton
        android:id="@+id/btnPronounce"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:src="@drawable/pronounce"
        android:layout_weight="0.25" 
    />      
    <ImageButton
        android:id="@+id/btnShowHistory"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:src="@drawable/history"
        android:layout_weight="0.25"
    /> 
    <ImageButton
        android:id="@+id/btnAddFavourite"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:src="@drawable/add_favourite"
        android:layout_weight="0.25" 
    />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-01T21:22:12.133

我遇到了同样的问题，并认为我在 WebViewClient 中使用以下代码修复了它：

```
webView.setVisibility(View.VISIBLE); 
```

我的问题是它在第一次加载时只显示半屏，只要我单击菜单或更改设备的方向，视图就会以全屏方式重新绘制。将其设置为可见似乎会触发重新绘制该修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:32:34.440

问题可能出在布局上。

在 res/layout 的 content.xml 中，确保将 webview 的 android:layout_height 的属性设置为 fill_parent。

那应该解决。不是，也粘贴布局的内容。我们可以提供帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T10:01:00.877

我不确定这是否可以帮助有类似问题的人，但最后我通过更改解决了我的问题：

```
wvContent.addView(webkit); 
```

至

```
wvContent.addView(webkit,0,0); 
```

也许不是真正的解决方案，而是一种解决方法。

# java - 从方法获取 ScriptableObject 时，Getter 和 Setter 不起作用

> ID：13670684
> 
> 赞同：2
> 
> 时间：2012-12-02T15:26:41.343
> 
> 标签：java, javascript, rhino

我有这两个类：

```
public class JavaScriptObject extends ScriptableObject {

    private int someInt;

    public int jsGet_someInt()
    {
        return someInt;
    }

    public void jsSet_someInt(int value)
    {
        someInt = value;
    }

    @Override
    public String getClassName() 
    {
        return "JSO";
    }   
}

public class FunctionPool {
    public JavaScriptObject getJso() {
        return new JavaScriptObject();
    }
} 
```

我有这个脚本：

```
var jso = fp.getJso();
jso.someInt += 1;
var i = jso.someInt; 
```

第二行和第三行不起作用。问题是 jso 对象不知道任何 setter 或 getter，因此 getter 返回 undefined 并且 setter 不做任何事情。如果我使用 ScriptableObject.putProperty 创建 jso 对象，它们也不起作用。只有当我在这样的脚本中创建它时它才有效：

```
var jso = new JSO(); 
```

那么关于如何使其工作的任何想法？

# asp-classic - 得到 VBSCRIPT 错误：“800a03f4”

> ID：13670687
> 
> 赞同：2
> 
> 时间：2012-12-02T15:27:05.250
> 
> 标签：asp-classic, vbscript

我有以下功能：

```
Function getNext10(num)
    pageLen = len(num)
    If pageLen = 1 Then
        next10 = 10
    ElseIf pageLen>1 Then
        pageRem = 10
        pageTen = right(num, 1)
        next10 = num + pageRem - pageTen
    End If
    getNext10 = next10
End Function 
```

如果我使用该功能，我会收到以下错误：

> Microsoft VBScript 编译“800a03f4”
> 
> '如果'预期
> 
> /display/paging.asp，第 27 行
> 
> 结束函数
> ------^

该功能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T12:32:43.553

尝试这个：

```
Function getNext10(num)
    pageLen = len(num)
    If pageLen = 1 Then
        next10 = 10
    End If
    If pageLen>1 Then
        pageRem = 10
        pageTen = right(num, 1)
        next10 = num + pageRem - pageTen
    End If
    getNext10 = next10
End Function 
```

# java - java调用main方法数组参数（简单但令人困惑）

> ID：13670688
> 
> 赞同：3
> 
> 时间：2012-12-02T15:27:17.657
> 
> 标签：java, recursion

我想在 main 方法中调用代码，但它似乎并没有真正起作用。

```
public class RecursiveSelectionSort {

public static void sort(double [] list){

    sort(list, 0, list.length -1);
}
public static void sort(double [] list, int low, int high){
    if (low < high){
        int indexOfMin = low;
        double min = list[low];
        for(int i = low + 1; i <= high; i++){
            if(list[i]< min){
                min = list[i];
                indexOfMin = i;
            }
        }
        list[indexOfMin] = list[low];
        list[low] = min;

        sort(list, low + 1, high);
    }
}
public static void main(String [] args){
    double [] list = {3.0,4.0,1.0};//I tried but it doesn't work
    System.out.print(sort(list));//it doesn't go to sort(list);
}
} 
```

我想知道我是否可以调用它。这看起来很容易，但确实令人困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T15:32:01.737

该方法`sort`返回`void`，但您试图将其结果传递给`print`. 试试这个：

```
double [] list = {3.0,4.0,1.0};
sort(list);
System.out.print(Arrays.toString(list)); 
```

请注意，我还使用了实用程序方法[`Arrays.toString`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28double%5B%5D%29)，这是必要的，因为数组本身不会覆盖`toString`以显示其内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T15:32:11.293

`sort`是一种`void`方法，你不能打印它的结果。先尝试`sort`ing，*然后*单独打印列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T15:30:59.347

该`println`函数不支持`void`参数。IT 期望一些**非 void**对象作为输入。但是你的排序函数**什么也不**返回。这就是它不打印的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T15:34:12.683

```
public class Mainn {

    public static void sort(double [] list){
            //change 1
        System.out.println("Inside sort");
        sort(list, 0, list.length -1);
    }
    public static void sort(double [] list, int low, int high){
        if (low < high){
            int indexOfMin = low;
            double min = list[low];
            for(int i = low + 1; i <= high; i++){
                if(list[i]< min){
                    min = list[i];
                    indexOfMin = i;
                }
            }
            list[indexOfMin] = list[low];
            list[low] = min;

            sort(list, low + 1, high);
        }
    }
    public static void main(String [] args){
        double [] list = {3.0,4.0,1.0};//I tried but it doesn't work

        //change 2
        sort(list);
        //return type of sort was void

        //print sorted list here
        System.out.println(Arrays.toString(list));
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T15:46:14.640

试试这个

```
public class RecursiveSelectionSort {

    public static double[] sort(double [] list){
    return sort(list, 0, list.length -1);
    }
    public static double[] sort(double [] list, int low, int high){
        if (low < high){
            int indexOfMin = low;
            double min = list[low];
            for(int i = low + 1; i <= high; i++){
                if(list[i]< min){
                    min = list[i];
                    indexOfMin = i;
                }
            }
            list[indexOfMin] = list[low];
            list[low] = min;
            return sort(list, low + 1, high);
        }
            else return list;
    }
    public static void main(String [] args){
        double [] list = {3.0,4.0,1.0};
        list = sort(list);
        for (int i = 0; i < list.length; i++)
            System.out.println(list[i]);
    }
} 
```

# php - 在 phing 中获取生成的 exec 的 pid

> ID：13670690
> 
> 赞同：7
> 
> 时间：2012-12-02T15:27:21.403
> 
> 标签：php, linux, command-line, phing

我正在使用 phing 并通过 ExecTask 运行 selenium 服务器。有时我需要通过终止其进程来停止运行服务器。

phing 是否有可能获得在 ExecTask 中生成的进程的 PID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-02T19:18:33.773

不，ExecTask 不能直接给出衍生进程的 pid。它只能返回它的退出状态和输出。

也许您可以修改您在 ExecTask 本身中运行的命令以保存生成进程的 pid。您可以使用`$!`获取最新后台命令的 pid。

```
job1 &                     //start job1 and run in background, end command with &
p1=$!                      //stores the pid 
echo $p1                   //gives pid of job1 
```

当你想杀死 selenium 服务器时，你可以在另一个 ExecTask 中调用它：

```
pkill pid_to_kill 
```

我不确定使用 ExecTask 在 shell 环境中所做的更改是否保留。如果是，那么您可以使用`$p1`. 将 pid_to_kill 替换为 $p1 以终止 job1。否则，您将不得不回显 pid 并使用其输出中的值。

否则你将不得不做`pgrep name_of_program`。它将给出包含该名称的所有进程。然后你可以用 杀死它`pkill`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T15:32:00.483

有可能，您可以使用`exec`命令中的第二个参数。

```
exec("Script To Run", $output); 
```

第二个变量以数组格式获取当前运行脚本的输出。因此，为了从输出中显示完整且可读的文本，我将使用一个`foreach`循环：

```
exec("ifconfig", $output); // Presuming you are developing for a Linux server
foreach ($output as $outputvar) {
    echo $outputvar . "<br>"; 
} 
```

之后，我会使用类似的方法从您要查找的字符串中`strpos`提取信息。`$outputvar`

我希望这与您正在寻找的内容相似。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-29T20:46:40.650

而不是启动要从 exec 任务中终止的进程（在您的情况下为 selenium 服务器）。使用 exec 任务启动脚本（我使用 bash，但 ruby​​、python 等也可以）。此脚本将启动所需的任务并回显 pid。在下面替换您要运行的所需路径和可执行文件。

```
#!bin/bash

./path_to_executable/process_to_run &
echo $! 
```

请注意“&”这会将进程发送到后台并允许 phing 继续构建您的项目。最后一行输出 pid，然后可以由 phing exec 任务捕获并保存到文件中。要保存此 pid，请将输出选项添加到 phing exec 任务：

```
<exec command="your_script" spawn="true" output="./pid.txt" /> 
```

output 选项会将 exec 任务的输出保存到当前目录中的 pid.txt 文件中。请注意，您可能需要 chown 这个文件（给运行 phing 的用户）以便以后读取它。

在单独的任务中，您可以从文件中读取 pid，然后使用 exec 任务终止进程。

```
<loadfile property="pid" file="./pid.txt" />
<exec command="kill ${pid}" dir="./" /> 
```

注意：在上面你可能需要在 kill 命令前面加上 sudo （取决于谁拥有该进程，以及它是如何启动的。

可选但值得考虑的是添加一个任务来删除 pid.txt 文件。这将防止任何杀死错误进程的可能性（基于过时的 pid）。您可能还想彻底检查 pid.txt 文件的内容，因为如果发生错误，它可能包含 pid 以外的其他内容。

虽然这可能不是最直接或最佳的解决方案，但它确实有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-25T11:45:09.893

我最终创建了一个 phing 任务来保存已启动程序的 pid，并在您请求时停止它。它使用[Cocur\BackgroundProcess](https://github.com/cocur/background-process)在后台启动进程，也可以返回 pid。

```
<?php

require_once "phing/Task.php";

class BackgroundExecTask extends Task {

    protected $command = null;
    protected $executable = null;
    protected $id = null;

    protected static $pidMap = [];

    public function init() {
        if (!class_exists('\Cocur\BackgroundProcess\BackgroundProcess')) {
            throw new BuildException("This task requires the Cocur Background Process componente installed and available on the include path", $this->getLocation());
        }
    }

    public function main() {
        switch ($this->command) {
            case "start":
                return $this->start();
            case "stop":
                return $this->stop();
        }
    }

    protected function start() {
        $process = new \Cocur\BackgroundProcess\BackgroundProcess($this->executable);
        $process->run();
        // you can also return the pid
        //$this->project->setProperty($this->pidProperty, $process->getPid());
        self::$pidMap[$this->id] = $process;
    }

    protected function stop() {
        self::$pidMap[$this->id]->stop();
    }

    public function setCommand($command)
    {
        $this->command = "" . $command;
    }

    public function setExecutable($executable)
    {
        $this->executable = "" . $executable;
    }

    public function setId($id)
    {
        $this->id = "" . $id;
    }

} 
```

用法：

```
<backgroundexec id="myprogram" command="start" executable="somebinary" />
<backgroundexec id="myprogram" command="stop" /> 
```

# python - 重新加载模块时强制重新加载类

> ID：13670691
> 
> 赞同：0
> 
> 时间：2012-12-02T15:27:22.040
> 
> 标签：python, python-2.7, sage

在我的客户代码中，我有：

```
import sys
import os
YAP_PATH = "/package/src/python"
if YAP_PATH not in sys.path:
    sys.path.append(YAP_PATH)

if 'yap' in sys.modules:  
    reload(yap)

import yap

print "working dir", os.getcwd() 
```

（这是sage的开发环境，所以不要对hacky解决方案大喊大叫）

在我的模块中`__init__.py`：

```
import Repository

__all__ = ['Repository']

print "yap loaded" 
```

每次我评估第一个代码块（在圣人单元中）时，这都会打印“yap loaded”，因此每次都会真正重新加载模块。

我现在想要实现的`__init__.py`是每次重新加载模块时，`Repository`也要重新加载类。

如何做到这一点，而不将代码放在鼠尾草单元中，而是放在`__init__.py`文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:22:23.333

得到它的工作，也许有人觉得它有帮助：

```
from Repository import Repository

__all__ = ['Repository']

def main(path):
    import sys
    _module_ = sys.modules[__name__]
    if hasattr(_module_, 'WORKING_PATH'):
        for m in __all__:
            if __name__ + "." + m in sys.modules:
                m = sys.modules[__name__ + "." + m]
                reload(m)
    else:
        _module_.WORKING_PATH = path

if __name__ == 'yap':
    print "yap loaded" 
```

欢迎补丁

# java - 403禁止使用Java但不是Web浏览器？

> ID：13670692
> 
> 赞同：63
> 
> 时间：2012-12-02T15:27:31.907
> 
> 标签：java, http-status-code-403

我正在编写一个小型 Java 程序来获取给定 Google 搜索词的结果量。出于某种原因，在 Java 中我得到了 403 Forbidden，但我在 Web 浏览器中得到了正确的结果。代码：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.URL;

public class DataGetter {

    public static void main(String[] args) throws IOException {
        getResultAmount("test");
    }

    private static int getResultAmount(String query) throws IOException {
        BufferedReader r = new BufferedReader(new InputStreamReader(new URL("https://www.google.com/search?q=" + query).openConnection()
                .getInputStream()));
        String line;
        String src = "";
        while ((line = r.readLine()) != null) {
            src += line;
        }
        System.out.println(src);
        return 1;
    }

} 
```

和错误：

```
Exception in thread "main" java.io.IOException: Server returned HTTP response code: 403 for URL: https://www.google.com/search?q=test
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(Unknown Source)
    at DataGetter.getResultAmount(DataGetter.java:15)
    at DataGetter.main(DataGetter.java:10) 
```

为什么要这样做？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-12-02T16:51:10.140

您只需要设置用户代理标头即可使其工作：

```
URLConnection connection = new URL("https://www.google.com/search?q=" + query).openConnection();
connection.setRequestProperty("User-Agent", "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11");
connection.connect();

BufferedReader r  = new BufferedReader(new InputStreamReader(connection.getInputStream(), Charset.forName("UTF-8")));

StringBuilder sb = new StringBuilder();
String line;
while ((line = r.readLine()) != null) {
    sb.append(line);
}
System.out.println(sb.toString()); 
```

从您的异常堆栈跟踪中可以看出，SSL 已为您透明地处理。

但是，获取结果量并不是那么简单，在此之后，您必须通过获取 cookie 并解析重定向令牌链接来假装您是浏览器。

```
String cookie = connection.getHeaderField( "Set-Cookie").split(";")[0];
Pattern pattern = Pattern.compile("content=\\\"0;url=(.*?)\\\"");
Matcher m = pattern.matcher(response);
if( m.find() ) {
    String url = m.group(1);
    connection = new URL(url).openConnection();
    connection.setRequestProperty("User-Agent", "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11");
    connection.setRequestProperty("Cookie", cookie );
    connection.connect();
    r  = new BufferedReader(new InputStreamReader(connection.getInputStream(), Charset.forName("UTF-8")));
    sb = new StringBuilder();
    while ((line = r.readLine()) != null) {
        sb.append(line);
    }
    response = sb.toString();
    pattern = Pattern.compile("<div id=\"resultStats\">About ([0-9,]+) results</div>");
    m = pattern.matcher(response);
    if( m.find() ) {
        long amount = Long.parseLong(m.group(1).replaceAll(",", ""));
        return amount;
    }

} 
```

运行我得到[的完整代码](http://pastebin.com/gSDYhgku)`2930000000L`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-06-27T10:23:51.360

对我来说，它通过添加标题来工作：“接受”：“*/*”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T15:30:45.343

您可能没有设置正确的标题。在浏览器中使用`LiveHttpHeaders`（或等效）来查看浏览器发送的标头，然后在您的代码中模拟它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T15:34:11.143

这是因为该站点使用 SSL。尝试使用 Jersey HTTP 客户端。您可能还需要了解一些有关 HTTPS 和证书的知识，但我认为 Jersey 可以设置为忽略与实际安全性相关的大部分细节。

# php - 无法将 $_POST['variable'] 分配给对象属性

> ID：13670694
> 
> 赞同：1
> 
> 时间：2012-12-02T15:27:47.933
> 
> 标签：php, class, object, post, oop

我正在与代码作斗争：

```
$worker = new Worker(); // :|
$worker->addWorker;
//testing                   
//testing
// $_SESSION['worker']->addWorker();
echo $_POST['name'];
echo $worker->name; 
```

最后两行应该显示相同的值。类中的 assign 方法如下所示：

```
public function addWorker()
{
      $this->name = $_POST['name'];
      $this->surname = $_POST['surname'];
      $this->dob = $_POST['dob'];
      $this->skills = $_POST['skills'];
      $this->postcode = $_POST['postcode'];
      $this->street = $_POST['street'];
      $this->email = $_POST['email'];
      $this->tel = $_POST['tel'];
      $this->erefnumber = $_POST['erefnumber'];
} 
```

我已经声明了类 Worker 属性。问题是我没有任何错误， $worker->name 只是给出了任何东西。echo $_POST['name'] 工作正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T15:32:04.030

您的代码几乎没问题，但是您可以：

```
$worker->addWorker; 
```

虽然它应该是：

```
$worker->addWorker(); 
```

此外，为了提高代码的可读性，我会考虑更改`addWorker()`为 require 数组参数：

```
public function addWorker( array $postArray ) {
    $this->name = $postArray['name'];
    .... 
```

并`$_POST`在调用时通过：

```
$worker->addWorker( $_POST ); 
```

# android - 为什么日期选择器会在我的视图中添加日历？

> ID：13670695
> 
> 赞同：24
> 
> 时间：2012-12-02T15:27:48.467
> 
> 标签：android, android-layout, android-calendar

我开始学习如何在 Android 上开发。这很简单，但我面临一个我在任何地方都没有提到的问题......

我有一个看法：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
     android:paddingLeft="16dp"
android:paddingRight="16dp"
android:orientation="vertical">

    <EditText
        android:id="@+id/editNomProduit"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:hint="@string/ht_nom_produit" />

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
     android:paddingLeft="16dp"
android:paddingRight="16dp"
android:orientation="horizontal">

        <TextView
            android:id="@+id/labelQuantiteProduitEdit"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/labelQuantiteProduitEdit"
            android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
        android:id="@+id/editQuantite"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:inputType="number" />

<Spinner
    android:id="@+id/spinnerUnite"
    android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

    </LinearLayout>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
     android:paddingLeft="16dp"
android:paddingRight="16dp"
android:orientation="horizontal">

        <TextView
            android:id="@+id/labeDateAchatProduitEdit"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/labelDateAchatProduitEdit"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <DatePicker
            android:id="@+id/dpDateAchatProduit"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

</LinearLayout>

</LinearLayout> 
```

其中显示了一个日期选择器。问题是日期选择器似乎在日期选择器的经典滚轮之外添加了一个日历（见图）。我不想要这个视图，只是日期的滚轮。我是以错误的方式使用日期选择器还是这是原始行为？谢谢 ！

纪尧姆

![带有日历的日期选择器](../Images/a811bb86dca667815e20e8b387bcc40f.png)

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-12-02T15:37:04.340

将此行添加到您的日期选择器 xml

```
android:calendarViewShown="false" 
```

这将删除日历。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-02T15:41:45.787

您需要添加的所有内容：

```
 <datepicker> 
```

方法，只需添加：

```
 android:calendarViewShown="false" 
```

这将删除日历，但保留滚动条。

希望这可以帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-30T08:07:01.490

I had the same problem. I haven't created any xml file. So I fixed by changing the value of `calendarviewshow` in Activity. Hope it will help somebody.

We can hide the calendar view in `DatePicker` using two methods.

1 In Layout(XML file)(Thanks to @coconess)

> ```
> <DatePicker
>     android:id="@+id/datepickerv1"
>     android:calendarViewShown="false"> 
> ```

2 In Activity(Java file)

```
Note: If you are not using "calendarViewShow" in xml, follow this step. 
```

> ```
> DatePicker dp=(DatePicker)findViewById(R.id.datepickerv1);
> dp.setCalendarViewShown(false); 
> ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-29T08:47:54.453

从 xml 更改您的日期选择器，如下所示：

```
<DatePicker
android:id="@+id/dpDateAchatProduit"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:calendarViewShown="false" />
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-21T08:02:42.593

添加

```
android:datePickerMode="spinner" 
```

代替

```
android:calenderViewShown="false" 
```

# javascript - 悬停暂停功能

> ID：13670699
> 
> 赞同：0
> 
> 时间：2012-12-02T15:28:21.063
> 
> 标签：javascript, jquery, image

我有一个用 javascript 编写的函数，它允许我滚动浏览以特定间隔迭代的图像数组，现在我想通过在将鼠标悬停在数组中的任何图像上时暂停旋转来为其添加更多功能。

**Javascript**

```
(function() {
    var rotator = document.getElementById('bigImage');
    var imageDir = '../images/headers/';
    var delayInSeconds = 5;
    var images = ['ImageOne.png', 'ImageTwo.png', 'ImageThree.png', 'ImageFour.png',
        'ImageFive.png',
        'ImageSix.png'];
    var num = 0;
    var changeImage = function() {
        var len = images.length;
        bigImage.src = imageDir + images[num++];
        if (num == len) {
            num = 0;
        }
    };
    setInterval(changeImage, delayInSeconds * 1000);

})();​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T15:33:26.020

您可以存储从 setInterval 返回的 id，并在图像悬停时将其传递给 clearInterval。

因此，在鼠标悬停时，您清除，在鼠标移出时，您再次设置它。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T15:37:38.047

使用 jQuery：

```
var rotationRunning = true;

var changeImage = function() {
    if (rotationRunning) {
        var len = images.length;
        rotator.src = imageDir + images[num++];
        if (num == len)
            num = 0;
        }
    }
};

$(rotator).hover(
    function() { rotationRunning = false; },
    function() { rotationRunning = true; }
); 
```

# uiimageview - 以编程方式设置 UIImageView 会导致 UIImageView 移动？

> ID：13670700
> 
> 赞同：0
> 
> 时间：2012-12-02T15:28:21.340
> 
> 标签：uiimageview, uiimage

无论是否启用自动布局，当尝试更改原型单元内的 UIImageView 时，ImageView 似乎会移动到不同的位置，如下面的设计所示。

**IB设计：**

![在此处输入图像描述](../Images/4ae0d11d778592de7d9a8c85e165da28.png)

**模拟器：**

![在此处输入图像描述](../Images/61daa9f4093d758fa904214ae9f61de1.png)

我添加了约束并将它们全部设置为“必需”，甚至尝试删除原型单元中的其他内容，但这也不起作用。

我可能做错了什么？

***编辑***

当我记录我的约束时，它们似乎只是`UIImageView`

```
2012-12-02 15:49:30.313 myApp[7551:c07] Constraints - (
    "<NSLayoutConstraint:0x80985c0 V:[UIImageView:0x80982d0(80)]>",
    "<NSLayoutConstraint:0x8098600 H:[UIImageView:0x80982d0(160)]>"
) 
```

***编辑 2***

当`UIImageView`完全删除时，它仍然产生相同的输出，即相同位置的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:24:31.380

好的，事实证明`UITableViewCell`已经有一个`UIImageView`名为“imageView”的东西，把我改成`IBOutlet`不那么通用的东西就解决了这个问题。

*请务必检查 UITableView 子类中不存在的名称！*

# ruby-on-rails - 在我进行捆绑更新后 Rails 服务器无法启动

> ID：13670707
> 
> 赞同：0
> 
> 时间：2012-12-02T15:29:08.643
> 
> 标签：ruby-on-rails, less

在我执行 a 之后`bundle update`，当我尝试运行 rails s 时出现此错误：

（我唯一添加的是`bcrypt-ruby`宝石，但我认为这与此无关......）

```
/Users/fettass/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/railtie/configuration.rb:85:in `method_missing': undefined method `less' for #<Rails::Application::Configuration:0x007fc33b079468> (NoMethodError)
    from /Users/fettass/.rvm/gems/ruby-1.9.3-p194/gems/twitter-bootstrap-rails-2.1.6/lib/twitter/bootstrap/rails/engine.rb:15:in `block in <class:Engine>'
    from /Users/fettass/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `instance_exec'
    from /Users/fettass/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `run'
    from /Users/fettass/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /Users/fettass/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `each'
    from /Users/fettass/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `run_initializers'
    from /Users/fettass/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/application.rb:136:in `initialize!'
    from /Users/fettass/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /Users/fettass/Documents/RailsApps/epyhrepus/config/environment.rb:5:in `<top (required)>'
    from /Users/fettass/Documents/RailsApps/epyhrepus/config.ru:4:in `require'
    from /Users/fettass/Documents/RailsApps/epyhrepus/config.ru:4:in `block in <main>'
    from /Users/fettass/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
    from /Users/fettass/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
    from /Users/fettass/Documents/RailsApps/epyhrepus/config.ru:1:in `new'
    from /Users/fettass/Documents/RailsApps/epyhrepus/config.ru:1:in `<main>'
    from /Users/fettass/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
    from /Users/fettass/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
    from /Users/fettass/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
    from /Users/fettass/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/commands/server.rb:46:in `app'
    from /Users/fettass/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
    from /Users/fettass/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
    from /Users/fettass/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/commands/server.rb:70:in `start'
    from /Users/fettass/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/commands.rb:55:in `block in <top (required)>'
    from /Users/fettass/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/commands.rb:50:in `tap'
    from /Users/fettass/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T15:39:00.423

看起来您需要将 less-rails gem 添加到您的 Gemfile 中：

```
gem "less-rails", "~> 2.2.6" 
```

# sql - 如何设计这个数据库，一对多？

> ID：13670711
> 
> 赞同：0
> 
> 时间：2012-12-02T15:29:38.883
> 
> 标签：sql, sql-server, database

我是数据库新手，但一直在研究技术，但不太清楚我的数据库的最佳计划？

我有一个包含以下列的“index_table”（大约 65,000 行）

```
dbo.index_table
Line
Locality
Route (unique) 
```

然后我计划了大约 65,000 个包含以下列的表：（每个大约有 20-40 行）

```
dbo.table2,3.4....etc
Route 
Place
Name
Stop 
```

我的 C# Web 服务在 index_table 中查找行和位置之间的匹配，结果将是 Route。然后我需要返回其他表中的所有匹配行。基本上每个表（除了 index_table）都包含公交路线上的停靠点，所以我从路线标识符中找到停靠点。

这是正确的设计方式还是我应该以不同的方式来简化和性能原因。

我是初学者，请温柔:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T15:39:25.750

我认为绝对不需要 65,000 张桌子。您应该阅读[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)以了解有关拥有高效且有组织的模式的原则。尝试实施和管理 65,000 个表会使您的生活变得更加困难。可以非常有效地管理具有 (65000 * 20-40) 1300000-2600000 行的单个表。

在你的`index_table`, 当你的意思是`route`, 你是指一个单一的价值吗？或者这`route`会有多个价值吗？

我对设计的想法是：

**路线**（路线，线路，地点）

**route_stop**（路线、地点、名称、站点）

*   `route_stop.route`将是一个外键`route.route`
*   由于我没有示例数据，因此您的主键`route_stop`可能是具有唯一值的列的组合

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T16:00:05.153

有 65,000 条路线，每条路线有 20 到 40 个停靠点，您的数据非常少，而且离数据库在一张庞大的表格的重压下死亡的地步还很远。（如果您有数千万个停靠点，您仍然可以使用 1-3 个表，必要时使用分区或分片和其他技术）。

njk 是正确的，因为如果您在路线和站点之间是一对多的，那么您只需要一个路线表和一个站点表（顺便说一句，他 +1）。

但是我无法想象你在这里真的有一个*一对多的*场景。在我所知道的所有交通系统中，停靠点在路线之间共享，并且您将有一个*多对多的*场景。我会`stop_id`为停靠点表引入一个主键，然后有一个连接表来链接路线和停靠点。连接表将包含路径中停靠点位置的第三列。

所以在关系数据库中：三个表。

```
ROUTE: route_id, line, locality
STOP: stop_id, name, place
ROUTE_STOP: route_id, stop_id, position 
```

（顺便说一句：如果您对 NoSQL 感兴趣，这将是一个非常好的应用程序，可以让您熟悉文档数据库，例如 MongoDB。然后您可以使用每个站点的列表，而不需要位置编号来订购停在一条路线内-顺便说一句，我“很温柔” :) 如果我理解正确的话，您的原始问题似乎缺少一些东西....）

# yii - YII UserIdentity 每次刷新都没有更新？

> ID：13670712
> 
> 赞同：0
> 
> 时间：2012-12-02T15:29:40.023
> 
> 标签：yii

我有：

```
class WebUser extends CWebUser {
  private $_balance;
  public function getBalance()          { return $this->_balance; }
} 
```

问题是，每次刷新页面时都需要更新这个 getBalance 值。但它目前只在用户第一次登录时这样做。如果用户被禁止并且他已经登录，我将遇到同样的问题。

我该如何解决这个问题？换句话说，每次用户重新加载页面时，如何强制刷新存储的用户状态？

这是设置实际用户的代码：

公共功能验证（）{

```
$api = new api();
$user = $api->getAccountDetailsByCellNr($this->username);

if (empty($user)) {
  $this->errorCode = self::ERROR_USERNAME_INVALID;
}
else {

  if(!isset($this->username))
    $this->errorCode = self::ERROR_USERNAME_INVALID;
  else if($user->password !== md5($this->password) )
    $this->errorCode = self::ERROR_PASSWORD_INVALID;
  else {
    $this->errorCode = self::ERROR_NONE;

    $this->setState('balance', $user->balance);

  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:00:14.720

覆盖`init()`WebUser 类中的函数。就像是：

```
class WebUser extends CWebUser {
  ...
  public function init()
  {
    parent::init();
    $user = $api->getAccountDetailsByCellNr($this->username);
    $this->_balance = $user->balance;
  }
} 
```

# javascript - 调试 window.load()。事件未触发，没有 js 或 php 错误输出

> ID：13670713
> 
> 赞同：0
> 
> 时间：2012-12-02T15:30:00.537
> 
> 标签：javascript, jquery, html

我在让 window.load() 事件在[此站点](http://syrp.co.nz/wordpress/)上触发时遇到问题。

问题发生在昨晚，没有输出 js 或 php 错误。这使得查明问题变得特别困难。

如果您查看 syrp.home.main.js 文件，您会看到主页中的所有部分都被一一初始化。我已经尝试过并评论每一个，但这并没有为问题提供任何洞察力。

我已经查看了 Chrome 开发工具中的 JS Profiler，但我还无法将其缩小到函数内的内存泄漏或无限循环。这可能是因为我对 JS Profiler 不够熟悉。

任何关于下一步看什么的提示将不胜感激。

谢谢，凸轮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:29:16.177

Located the problem, a coool 6 hours later.

I had declared my function that window.load() called as a var.

```
GLOBAL.els.$WINDOW.load(onPageLoad);

var onPageLoad = function(){}; 
```

changing it back to;

```
GLOBAL.els.$WINDOW.load(onPageLoad);

function onPageLoad(){}; 
```

note to self, never do that again.

# jsp - 使用 DAO 类验证用户名密码，无需脚本或 .jsp 页面中的 java 代码

> ID：13670714
> 
> 赞同：0
> 
> 时间：2012-12-02T15:30:26.123
> 
> 标签：jsp, jstl, javabeans, jsp-tags

我只想在 javaBean 类中运行一个方法（它不是 getter 或 setter 方法），它需要 2 个参数（用户名、密码）并返回一个布尔值（在从数据库中改变它之后（单独的 DAO 类））。

然后我想根据该布尔值做出决定以显示一些文本或重定向页面。我该怎么做。？**我需要 JSTL 或 jsp:action（useBean 和设置/获取属性）标记还是足够了？**

**.jsp 页面中没有 SCRIPTLETS 或 java 代码。没有任何框架，如 struts 或 spring** 任何实用代码？

索引.jsp

```
 <%@page contentType="text/html" pageEncoding="UTF-8"%>
  <!DOCTYPE html>
  <html>
      <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Open-Pages</title>
      </head>
      <body>
      <form method="post" action="/open-pages/comments.jsp">
        User Name: <input type="text" name="userName">
        <br />
        Password: <input type="password" name="password">
        <input type="submit" value="submit">
        <input type="reset" value="reset">
      </form>
      </body>
  </html> 
```

评论.jsp

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
    </head>
    <body>
    <%
//         out.println(request.getParameter("userName"));
//         out.println(request.getParameter("userName"));
    %>

    <jsp:useBean id="verifyUser" class="entry.UserBean" scope="page" />
    <jsp:setProperty name="verifyUser" property="userName" param="userName" />
    <jsp:setProperty name="verifyUser" property="password" param="password" />

    <jsp:getProperty name="verifyUser" property="userName" />
    <jsp:getProperty name="verifyUser" property="password" />

    </body>
</html> 
```

用户Bean.java

```
 /*
      * To change this template, choose Tools | Templates
      * and open the template in the editor.
      */
      package entry;

      import java.io.Serializable;

      /**
      *
      * @author user1
      */
      public class UserBean implements Serializable{
      private String userName;
      private String password;
      private boolean validUser;

      /**
      * @return the userName
      */
      public String getUserName() {
          return userName;
      }

      /**
      * @param userName the userName to set
      */
      public void setUserName(String userName) {
          this.userName = userName;
      }

      /**
      * @return the password
      */
      public String getPassword() {
          return password;
      }

      /**
      * @param password the password to set
      */
      public void setPassword(String password) {
          this.password = password;
      }

      public boolean getValidUser(String user, String password) {
          if(entry.userAuthDAO.verifyUserPass(user,password)){
        return true;
        }else {
        return false;
        }
      }

      public void setValidUser(boolean validUser) {
          this.validUser = validUser;
      }
      } 
```

UserAuthDAO

```
 package entry;

      import entry.Constants;
      import java.sql.Connection;
      import java.sql.DriverManager;
      import java.sql.PreparedStatement;
      import java.sql.ResultSet;
      import java.sql.SQLException;
      import java.util.logging.Level;
      import java.util.logging.Logger;

      /*
      * To change this template, choose Tools | Templates
      * and open the template in the editor.
      */

      /**
      *
      * @author user1
      */
      public class userAuthDAO {

      static String authUser = "select userName, password "
              + "from users "
              + "where userName = ? and password = ?";
      public static boolean verifyUserPass(String userName, String password){

          try {
          Connection con = DriverManager.getConnection(Constants.DBHost, userName, password);
          PreparedStatement pStmt = con.prepareStatement(authUser);

          pStmt.setString(1,userName);
          pStmt.setString(2, password);

          ResultSet rs = pStmt.executeQuery();
          String rsUserName = null;
          String rsPassword = null;
          if(rs.next()){
              rsUserName = rs.getString("userName");
              rsPassword =  rs.getString("password");    
          }

          con.close();

          if (rsUserName.equals(userName) && rsPassword.equals(password)){
              return true;
          }

        } catch (SQLException ex) {
            Logger.getLogger(userAuthDAO.class.getName()).log(Level.SEVERE, null, ex);

        }
        return false; 
      }

      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:38:42.390

不要在 JSP 中这样做。这不是 JSP 的用途。它们是视图组件，应该用于生成 HTML 标记。

从 servlet 或您首选的 MVC 框架的操作中执行此操作。一旦 servlet 或操作得到结果，然后分派到 JSP 或重定向。

# php - 在 CakePHP 2.2 中获取登录表单的验证

> ID：13670720
> 
> 赞同：0
> 
> 时间：2012-12-02T15:31:06.453
> 
> 标签：php, cakephp

我已经用用户登录系统构建了一个简单的 CakePHP 应用程序，并连接了 Milesj.me 的 Cake Form 插件（不确定这是否会导致问题）。

但是，我的验证似乎已应用于登录表单和注册表单。因此，当我尝试登录时，我收到诸如“用户名已在使用”之类的错误。

有什么想法会导致这种情况吗？CakePHP 中是否发生了一些变化，也将验证添加到了身份验证表单中？

**另外，为什么我必须在模型中对密码进行哈希处理？我的印象是 CakePHP 会自动对密码进行哈希处理？而且我以前不需要这样做。但是，如果我不这样做，那么它将密码保存在数据库中，而不是散列......**

这是我的视图、控制器和模型：

```
<?php echo $this->Form->create(); ?>

    <?php echo $this->Form->input('User.username',
    array('tabindex'=>1, 'autofocus',
    'label'=>array('class'=>'placeholder','text'=>'Username'))); ?>

    <?php echo $this->Form->input('User.password',
    array('tabindex'=>2, 'type'=>'password',
    'label'=>array('class'=>'placeholder','text' =>'Password' ))); ?>

    <div class="input button">
        <button class="orangeButton" tabindex="3" type="submit"><span class="icon login">Log in</span></button>
    </div>

<?php echo $this->Form->end(); ?> 
```

控制器：

```
public function login() {
    if ($this->request->data) {
        $this->User->set($this->request->data);

        if ($this->User->validates() && $this->Auth->login()) {
            if ($user = $this->Auth->user()) {
                $this->User->Profile->login($user['id']);
                $this->Session->delete('Forum');

                $this->redirect($this->referer());
            }
        }
    }
} 
```

**注意：对 Profile 模型的登录调用只是保存了一些上次登录时间的数据和其他内容，实际上并没有对身份验证做任何事情！**

和模型：

```
class User extends AppModel {

    public $name = 'User';

    public $hasOne = array(
        'Profile' => array('className' => 'Forum.Profile')
    );

    public $hasMany = array(
        'Access' => array('className' => 'Forum.Access'), 
        'Moderator' => array('className' => 'Forum.Moderator')
    );

    public $validate = array(
        'email' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'A valid email address is required'
            ),
            'email' => array(
                'rule' => array('email'),
                'message' => 'This is not a valid email address'
            ),
            'unique' => array(
                'rule' => array('isUnique'),
                'message' => 'This email is already in use'
            )
        ),
        'username' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'A username is required'
            ),
            'unique' => array(
                'rule' => array('isUnique'),
                'message' => 'This username is already in use'
            ),
            'alphaNumeric' => array(
                'rule' => array('alphaNumeric'),
                'message' => 'Usernames must only contain letters and numbers'
            ),
            'between' => array(
                'rule' => array('between', 4, 20),
                'message' => 'Usernames must be between 4 and 20 characters long'
            )
        ),
        'password' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'A password is required'
            )
        )
    );

    public function beforeSave()
    {
        if (isset($this->data[$this->alias]['password']))
        {
            $this->data[$this->alias]['password'] = AuthComponent::password($this->data[$this->alias]['password']);
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:24:22.743

只需添加到您的验证规则`'on' => 'create'`

[http://book.cakephp.org/2.0/en/models/data-validation.html#on](http://book.cakephp.org/2.0/en/models/data-validation.html#on)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:02:13.103

根据 cakephp

> 默认情况下每个字段有多个规则，如果特定规则失败，则返回该规则的错误消息，并且不处理该字段的以下规则。
> 
> 但是如果第一条规则没有失败，那么它会继续评估第二条规则。

您可以通过以下方式删除特定验证

```
$this->validator()->remove('username', 'unique'); 
```

# programming-languages - 编写热键实用程序

> ID：13670728
> 
> 赞同：-2
> 
> 时间：2012-12-02T15:32:07.657
> 
> 标签：programming-languages, keyboard, hotkeys, keyhook

我有一个项目，我需要在其中使用热键，它可以在整个 Windows 操作系统中全局工作。现在，据我所知，我只知道如何阅读当前表单上的关键事件。我将如何编写热键实用程序？什么是最好的语言呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T15:41:33.853

对于 C#/.Net 和低级钩子（使用互操作），请查看 Stephen Toubs 示例here（完整的源代码）：

[**C# 中的低级键盘挂钩**](http://blogs.msdn.com/b/toub/archive/2006/05/03/589423.aspx)

有关更完整的示例（还有 C#/.Net 和 Interops），但所有内容都整齐地包含在一个单独的类中，包括在客户端使用普通事件捕获按键，请查看此内容（实际源代码的链接在博客文字，有点难以发现）：

[**.NET 的全局热键**](http://bloggablea.wordpress.com/2007/05/01/global-hotkeys-with-net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:54:06.710

你在找这样的东西吗？即使程序未激活，它也应该响应按键。在窗户里，

```
#include<windows.h>
if(GetAsyncKeyState(0x41)){
     //do somethong here
 } 
```

注意：参考虚拟键统计[http://msdn.microsoft.com/en-us/library/ms927178.aspx](http://msdn.microsoft.com/en-us/library/ms927178.aspx)

# parameters - 在 Rspec 中通过科目

> ID：13670731
> 
> 赞同：1
> 
> 时间：2012-12-02T15:32:36.923
> 
> 标签：parameters, rspec

我正在尽我所能了解 Rspec 的流程，但最简单的事情似乎让我无法理解。

我想在两个不同的模型上重用一些属性格式有效性的测试。所以，我想我会将那些 Rspec 测试转移到另一种方法中，然后只用被测对象调用该方法。即从：

```
 describe "when email format is invalid" do
    it "should be invalid" do
      addresses = %w[user@foo,com user_at_foo.org example.user@foo.
                 foo@bar_baz.com foo@bar+baz.com]
      addresses.each do |invalid_address|
        @user.email = invalid_address
        @user.should_not be_valid
      end
    end
  end 
```

对于这样的事情：

```
 describe "email format checking" do
    valid_email_check(@user)
  end 
```

..和实用程序.rb

```
def valid_email_check(subject)
  describe "when email format is invalid" do
    it "should be invalid" do
      addresses = %w[user@foo,com user_at_foo.org example.user@foo.
                     foo@bar_baz.com foo@bar+baz.com]
      addresses.each do |invalid_address|
        subject.email = invalid_address
        subject.should_not be_valid
      end
    end
  end
end 
```

传递给此函数时，“subect”始终为零。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T08:42:05.383

看起来您正在引用[Rails 教程中的清单 6.16](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#code-email_format_validation_tests)。我在那里使用[`shoulda-matchers`gem](https://github.com/thoughtbot/shoulda-matchers)和实用程序方法完成了与电子邮件相关的验证测试，类似于您的想法。

我认为将整个`describe`块放在实用程序方法中不是最好的（/可能？）；只是您可能在多种方法中引用的代码片段，或者像包含电子邮件地址的数组这样的长代码。无论如何，供您参考，这就是我最终得到的结果：

**宝石文件**

```
# ...
gem 'shoulda-matchers', '1.4.2' 
```

**规格/模型/user_spec.rb**

```
describe User do

  let(:user) { FactoryGirl.create(:user) }

  subject { user }

  # ...      

  describe "validations" do
    # ...
    context "for email" do
      it { should validate_presence_of(:email) }
      it { should_not allow_value(" ").for(:email) }
      it { should validate_uniqueness_of(:email).case_insensitive }

      context "when email format is invalid" do
        invalid_email_addresses.each do |invalid_address|
          it { should_not allow_value(invalid_address).for(:email) }
        end
      end

      context "when email format is valid" do
        valid_email_addresses.each do |valid_address|
          it { should allow_value(valid_address).for(:email) }
        end
      end
    end
  end
end 
```

**规范/支持/实用程序.rb**

```
# ...
def invalid_email_addresses
  %w[user@foo,com user_at_foo.org example.user@foo.
     foo@bar_baz.com foo@bar+baz.com]
end

def valid_email_addresses
  %w[user@foo.com A_USER@f.b.org frst.lst@foo.jp a+b@baz.cn]
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:46:46.413

您正在寻找的可能是共享示例组，这是 rSpec 中用于干涸测试的功能。

[https://www.relishapp.com/rspec/rspec-core/v/2-0/docs/example-groups/shared-example-group#shared-example-group-applied-to-two-groups](https://www.relishapp.com/rspec/rspec-core/v/2-0/docs/example-groups/shared-example-group#shared-example-group-applied-to-two-groups)

当您有一个具有通用功能的父类，或者使用 mixin 在 2 个（或更多）类之间共享内容时，通常会使用它。

# javascript - 我如何打印数组的数据？

> ID：13670733
> 
> 赞同：0
> 
> 时间：2012-12-02T15:33:12.580
> 
> 标签：javascript, node.js

这是我的代码：

```
app.get('/index/:name',function(req, res){
    data = connection.query('SELECT * FROM deneme', function(err, rows, fields){
        if(err) throw err;
        veri = rows;
        return veri;
    });

    console.log(data);

    res.render('index', {
        title: req.params.name,
        para: data
    });
}); 
```

当我调用`localhost:8080/index/example`它返回时，`[object Object]` 我想打印数组的数据，我该怎么做？

当我使用带有 print_r() 函数的 php 时，我可以做到这一点。

同时，数组的数据：

```
Id Name
1  yab
2  sad 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T15:44:07.100

我认为 OP 只想打印数据以进行调试，为此您可以使用以下跨浏览器方式使用 JSON 打印数据的良好表示：

```
console.log( JSON.stringify(data, null, 4) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:43:55.180

要输出到控制台，您可以执行以下操作：

```
for(var index in data) {
    var item = data[index];
    var output = [];
    for(var field in item) {
        output.push(item[field]);
    }
    console.log(output.join("\t"));
} 
```

对于以 html 格式输出，您会执行类似的操作，但会创建实际的 HTML 节点。也许，像：

```
var output = ["<table>"];
for(var index in data) {
    output.push("<tr>");
    var item = data[index];
    for(var field in item) {
        output.push("<td>");
        output.push(item[field]);
        output.push("</td>");
    }
    output.push("</tr>");
    console.log(output.join("\t"));
}
output.push("</table>");
element.innerHTML = output.join(""); 
```

我没有在浏览器中尝试过，所以可能会有一些错误，但应该这样做。

如果您需要更多帮助，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T15:37:20.847

像这样的东西应该工作：

```
for (var colName in data) {
    console.log("column " + colName);
    var rows = data[colName];
    for (var i = 0; i < rows.length; i++) {
        console.log(rows[i]);
    }
} 
```

您必须根据需要对其进行调整，这是迭代此类对象的一般方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T15:38:04.287

您需要迭代结果集合并打印属性

```
 $.each(resultArray, function() {
             this.id;//use this to write id
             this.name;//use this to write name
       }); 
```

# ios - 带有 ARC 的 iOS 5+ 中的延迟加载属性

> ID：13670734
> 
> 赞同：6
> 
> 时间：2012-12-02T15:33:23.173
> 
> 标签：ios, ios5, lazy-loading

### 问题

我正在迁移一些遗留代码（iOS 5 之前），我在其中延迟加载一些`readonly`属性。我想用 ARC 将此代码更新到 iOS 5+。但我只是了解ARC。

**。H**

```
@property (nonatomic, retain, readonly) NSDateFormatter *timeFormatter; 
```

**.m**

```
- (NSDateFormatter *)timeFormatter {
    if (timeFormatter == nil) {
        timeFormatter = [[NSDateFormatter alloc] init];
        [timeFormatter setDateFormat:@"h:mm a"];
    }

    return timeFormatter;
} 
```

### 我试过的

我试图简单地更新我的代码，但收到一个：*Assignment to readonly property*。

**。H**

```
@property (nonatomic, strong, readonly) NSDateFormatter *timeFormatter; 
```

**.m**

```
- (NSDateFormatter *)timeFormatter {
    if (self.timeFormatter == nil) {
        self.timeFormatter = [[NSDateFormatter alloc] init];
        [self.timeFormatter setDateFormat:@"h:mm a"];
    }

    return self.timeFormatter;
} 
```

我还回顾了：

*   [ios ARC强和alloc](https://stackoverflow.com/questions/12166323/ios-arc-strong-and-alloc)
*   [iOS上的线程安全延迟初始化](https://stackoverflow.com/questions/7856733/thread-safe-lazy-initialization-on-ios)
*   [http://www.cocoanetics.com/2012/02/threadsafe-lazy-property-initialization/](http://www.cocoanetics.com/2012/02/threadsafe-lazy-property-initialization/)

### 问题

`readonly`使用 ARC 在 iOS 5+ 中延迟加载属性的正确方法是什么？非常感谢*.h*和*.m*的代码示例。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-02T15:53:33.217

对于自定义（惰性）getter 方法，您必须直接访问实例变量（无论您是否使用 ARC）。因此，您应该将属性综合为

```
@synthesize timeFormatter = _timeFormatter; 
```

那么你的getter方法是

```
- (NSDateFormatter *)timeFormatter {
    if (_timeFormatter == nil) {
        _timeFormatter = [[NSDateFormatter alloc] init];
        [_timeFormatter setDateFormat:@"h:mm a"];
    }

    return _timeFormatter;
} 
```

如果同时从多个线程访问该属性，则只需添加一些同步机制，这也与 ARC 无关。

（*备注：*较新的 Xcode 版本可以自动创建`@synthesize`语句并为实例变量使用下划线前缀。但是，在这种情况下，由于属性是只读的并且您提供了 getter 方法，Xcode 不会*自动*合成属性。）

**添加：**为方便起见，这是一个完整的代码示例：

*MyClass.h：*

```
#import <Foundation/Foundation.h>

@interface MyClass : NSObject
@property (nonatomic, strong, readonly) NSDateFormatter *timeFormatter;
@end 
```

*我的班级.m：*

```
#import "MyClass.h"

@implementation MyClass
@synthesize timeFormatter = _timeFormatter;

- (NSDateFormatter *)timeFormatter {
    if (_timeFormatter == nil) {
        _timeFormatter = [[NSDateFormatter alloc] init];
        [_timeFormatter setDateFormat:@"h:mm a"];
    }

    return _timeFormatter;
}

@end 
```

* * *

**更多信息：**事实上，`timeFormatter`如果属性被合成为

```
@synthesize timeFormatter; // or: @synthesize timeFormatter = timeFormatter; 
```

您犯的唯一“错误”是在 getter 方法中替换`timeFormatter`为。`self.timeFormatter`这会产生两个问题：

*   在 getter 方法内部读取`self.timeFormatter`会导致无限递归。
*   `self.timeFormatter`由于只读属性，不允许设置。

因此，如果您只保留`timeFormatter`getter 方法（使用`timeFormatter`方法内的实例变量），那么它也适用于 ARC。

我仍然建议在我的代码示例中为属性的实例变量添加下划线前缀，因为 Xcode 对自动合成属性的处理方式相同。

*（我希望这会有所帮助，并且不会增加混乱！）*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-02T15:39:21.917

只读属性就是：只读。不应该有二传手参与。好的部分是，如果您将类扩展中的变量（通常带有一对空括号）重新声明为 readwrite（甚至只是完全删除 readonly），那么您可以在 .m 中分配给它，但是类导入它会将其视为只读。

```
@interface MyClass ()

@property (nonatomic, strong) NSDateFormatter *timeFormatter;

@end 
```

这种重新声明允许以更简洁的方式在内部访问和改变属性，而无需求助于脆弱的 iVar 综合（现在编译器已经为您完成了它，这已成为一种古老）。您可以，或者当然，仍然可以使用 iVar，如另一个答案中所示，但 -init 或合成 getter 之外的 iVar 访问是不必要的。 *

[*正如Martin正确指出的那样，即使您的分配成功，您仍然会导致无限递归，因此iVar访问是必要的，除非您明确声明getter，否则您可以使用属性访问。]

# javascript - chrome 扩展中的基本消息传递似乎失败了

> ID：13670738
> 
> 赞同：0
> 
> 时间：2012-12-02T15:33:46.823
> 
> 标签：javascript, google-chrome-extension

我已经阅读了文档，这应该是基本的，但我似乎无法让这些警报出现。怎么了？

popup.html

```
<html>
<head>
<script>
    function finder() {
        chrome.tabs.getSelected(null, function(tab) {
          chrome.tabs.sendMessage(tab.id, {type: "feature"}, function(response) {
            console.log(response.farewell);
          });
        });
    }
</script>
<style>
    p {
        border: 1px solid black;
        width:200px;
        font-size:10px;
    }
</style>
</head>
<body>
<p><a id="jira">Click to populate FE description</a></p>
<script>
var jira = document.getElementById('jira');
jira.addEventListener('click', finder, false);
</script>
</body>
</html> 
```

内容脚本：

```
chrome.extension.onMessage.addListener(function(request, sender, sendResponse) {
    alert('sreceived');
    if (request.type == "feature") {
        alert('score!');
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T18:34:13.027

[内联 JavaScript 将不会被执行。此限制禁止内联块和内联事件处理程序](https://developer.chrome.com/extensions/contentSecurityPolicy.html#JSExecution)（例如`<button onclick="...">`）。

通过以上几行很明显您的 popup.html 违反了限制，可以通过以下方式解决：

删除所有`<script>`标签`popup.html`并将原始代码移动到`popup.js`.

```
<html>
<head>
<script src="popup.js"></script> <!-- Added this line -->
<style>
    p {
        border: 1px solid black;
        width:200px;
        font-size:10px;
    }
</style>
</head>
<body>
<p><a id="jira">Click to populate FE description</a></p>
</body>
</html> 
```

我并没有从字面上复制粘贴代码`popup.js`。这些是我所做的更改：

1.  [`chrome.tabs.getSelected()`](https://groups.google.com/a/chromium.org/forum/?fromgroups=#!topic/chromium-extensions/A5bMuwCfBkQ)不推荐使用[`chrome.tabs.query()`](https://developer.chrome.com/extensions/tabs.html#method-query)，所以我更新了`chrome.tabs.getSelected(null, function(tab) {});`
2.  注释掉，`console.log(response.farewell);`因为内容脚本没有响应处理程序。

**最终 popup.js**

```
function finder() {
    chrome.tabs.query({
        "status": "complete",
        "currentWindow": true,
        "active": true
    }, function (tabs) {
        chrome.tabs.sendMessage(tabs[0].id, {
            type: "feature"
        }, function (response) {
            //console.log(response.farewell);
        });
    });
}
document.addEventListener('DOMContentLoaded',= function() {
    document.getElementById('jira').onclick = finder;
}); 
```

***manifest.json 的注意事项***

1.  确保权限可用作`"permissions":["tabs","<all_urls>"],`
2.  内容脚本的权限也

    ```
    "content_scripts": [
        {
          "matches": ["<all_urls>"],
          "js": ["content.js"]
        }
    ] 
    ```

**最终清单.json**

```
{
"name":"Basic Message Passing",
"description":"This demonstrates Basic Message Passing",
"browser_action":{
    "default_popup":"popup.html",
    "default_icon":"screen.png"
},
"manifest_version":2,
"version":"2",
"permissions":["tabs","<all_urls>"],
"content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["content.js"]
    }
  ]
} 
```

您的内容脚本很好，所以我没有更改它。

## 示范

**输出：**

![在此处输入图像描述](../Images/1da4204b2914b71dd4d037e0bb6f2675.png)

![在此处输入图像描述](../Images/b59b43628edca00ca105d784e7d649c4.png)

如果您需要更多信息，请与我们联系..

# xforms - 根据布尔值插入节点

> ID：13670739
> 
> 赞同：1
> 
> 时间：2012-12-02T15:33:55.873
> 
> 标签：xforms, xsltforms

我有一个 XForm（在 XSLTForms 中），其中有一个复选框（`xf:input`即已绑定到一个`xs:boolean`类型）。是否可以（在提交时）根据该复选框的值在我的模型中插入一个节点？

为了澄清，如果我有以下模型：

```
<xf:model>
    <xf:instance id="data">
        <data xmlns="">
            <element1/>
        </data>
    </xf:instance>
    <xf:instance id="helper">
        <data xmlns="">
            <bool1/>
        </data>
    </xf:instance>
    <xf:bind nodeset="instance('helper')/bool1" type="xs:boolean" />
</xf:model> 
```

这是我的形式：

```
<xf:input ref="instance('helper')/bool1" incremental="false">
    <xf:label>Some checkbox:</xf:label>
</xf:input> 
```

我想读取复选框的值，如果它是真的，我需要在我的实例中插入一个`element2`节点。`data`如果为假，则不插入任何内容。因此，如果设置了复选框，我想以此结束：

```
<data xmlns="">
    <element1/>
    <element2/>
</data> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:08:13.783

与其`element2`在提交之前插入，不如根据与复选框关联的节点声明它相关并将提交限制到相关节点会更容易。

-阿兰

# java - JVM中的老年代空间利用

> ID：13670744
> 
> 赞同：1
> 
> 时间：2012-12-02T15:34:48.127
> 
> 标签：java, garbage-collection, jvm

据我所知，对于老一代 JVM 的空间，它可以用于两个目的，

1.  用于从年轻代提升到老年代的对象？
2.  用于特殊用例中的新对象分配[（https://stackoverflow.com/questions/9053144/will-i-encounter-java-lang-outofmemoryerror-even-with-no-lack-of-memory](https://stackoverflow.com/questions/9053144/will-i-encounter-java-lang-outofmemoryerror-even-with-no-lack-of-memory)）

我的问题是，

1.  是否还有其他用例可以利用老年代的空间？
2.  我认为将对象从年轻代复制到老年代涉及内存复制，是深拷贝还是浅拷贝？

提前谢谢， 林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:20:57.977

放置此代码以回答@Lin Ma 在他的评论中提出的问题：

```
class SomeClass{
    private static List<Object> memoryLeakCulprit = new ArrayList<Object>();

    void someMethod(Object obj){

          //adding the reference of some object in the culprit list
          memoryLeakCulprit.add(obj);

    }

    //supposed to remove the reference passed
    void someOtherMethod(Object obj){

         obj = null;

         //bummer forgot to remove the reference from list

         //now the instance is not reachable by obj
         //so now as new references are added to culprit list the memory will keep on increasing in size

    }

} 
```

**UDPATE**

如何解决此泄漏

```
oid someOtherMethod(Object obj){

              //before setting the obj reference to null it must be removed from culprit list
              memoryLeakCulprit.remove(obj);

              //now its safe to set this reference to null
              obj = null;

        } 
```

解决泄漏的唯一方法是使用**JProfiler**、**VisualVM**等分析工具对应用程序进行分析，并找出导致泄漏的类**。**

 ****当您找到课程时，必须**更改代码**，这是唯一的方法。

程序退出前**无需释放引用。**原因是`static`变量 ( `memoryLeakCulprit`) 绑定到**Class**对象，一旦您退出程序，所有引用都会自动释放，包括 Class 对象。

另一方面，请务必确保在退出程序之前关闭系统资源（套接字、数据库连接）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T15:40:22.093

让我回答 2。它绝对不是深拷贝：GC 将对象作为不同的内存块处理，而深拷贝实际上仅意味着复制许多连接到对象图中的不同对象。此外，想象一个**动作**而不是一个副本会更好地为您服务；复制实际上只是一个“实现细节”，想要的效果是重新定位。****

# mongodb - session_store 不起作用

> ID：13670747
> 
> 赞同：3
> 
> 时间：2012-12-02T15:35:12.647
> 
> 标签：mongodb, mongoid

我尝试将用户 http 会话存储在 mongodb 中。我找到了这个不错的宝石：[https](https://github.com/biilmann/mongo_sessions) ://github.com/biilmann/mongo_sessions 并尝试使用它。我得到**了 Mongoid:Module 的未定义方法“master”**

比我改变旧的

```
:collection => lambda { Mongoid.master.collection('sessions') } 
```

到应该工作并带来**会话**集合的东西：

```
Mongoid::Sessions.default.collections.find{|i| i.name == 'sessions'} 
```

但我得到：Moped::Collection 的未定义方法“find_one”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:28:37.220

In your Gemfile, try using the Github repository for this gem instead of the one hosted on rubygems.org. There was a pull request submitted within the last few weeks that has been merged into master, but not yet published as a gem. It looks like it might address your issue.

```
gem "mongo_sessions", :require => "mongo_sessions/rails_mongo_store", :git => 'git://github.com/biilmann/mongo_sessions' 
```

# c# - 在 MouseDown 上显示 MessageBox 会占用 MouseUp 事件

> ID：13670753
> 
> 赞同：7
> 
> 时间：2012-12-02T15:35:51.723
> 
> 标签：c#, wpf, mouseevent

我正在开发一个 WPF 应用程序，在该应用程序中我处理了一个最终显示 MessageBox 的鼠标按下事件。但是在 MessageBox 出现在 mouseDown 上之后，它吃掉了控件的相应 MouseUp 事件。

通过在 WPF 窗口中简单地处理 MouseDown 和 MouseUP 事件，可以轻松重现场景：-

```
private void Window_MouseDown(object sender, MouseButtonEventArgs e)
{
   MessageBox.show("Hello, Mouse down");
}

private void Window_MouseUP(object sender, MouseButtonEventArgs e)
{
   MessageBox.show("Hello, Mouse Up");
} 
```

一旦消息框出现在 MouseDown 事件上，就永远不会显示 MouseUp 消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T15:54:39.460

初始化一个新的实例`System.Threading.Thread`来调用 ，`MessageBox`以便主用户界面线程不会被提示中断呢？

**例子**

```
private void Window_MouseDown(object sender, MouseEventArgs e)
{
    Thread mythread = new Thread(() => MessageBox.Show("Hello, Mouse Down")); //Initialize a new Thread to show our MessageBox within 
    mythread.Start(); //Start the thread
}

private void Window_MouseUP(object sender, MouseEventArgs e)
{
    Thread mythread = new Thread(() => MessageBox.Show("Hello, Mouse Up")); //Initialize a new Thread to show our MessageBox within 
    mythread.Start(); //Start the thread
} 
```

**截屏**

![在不同的线程中调用 MessageBox 以避免中断主用户界面线程](../Images/ac39f7e7d65cf36e5c7b0c991f19ea5c.png)

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:54:09.747

正如您原始帖子的评论者所说，似乎这里发生的事情是用户的鼠标失去焦点以单击消息框，甚至只是为了显示它，所以鼠标无论如何都会“向上”移动 - 事件是从来没有打电话。如果您只想显示消息框，那么只需使用：

```
private void Window_MouseDown(object sender, MouseButtonEventArgs e)
{
   MessageBox.show("Hello, Mouse down");
   MessageBox.show("Hello, your mouse must be up because you've shifted focus!");
} 
```

应该做的工作。如果更改窗口标题或任何不需要用户输入的操作重复此行为，那么这可能是一个问题，但我 100% 确定这只是 MessageBox 的一个问题。希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-21T11:25:39.617

@picrofo 解决方案也很好很简单，但我是这样做的

```
 DialogResult result;
 private void button1_MouseDown(object sender, MouseEventArgs e)
    {
        string message = "would you like to see mouse up event?";
        string caption = "event trick";
        MessageBoxButtons buttons = MessageBoxButtons.YesNo;

        result = MessageBox.Show(message, caption, buttons);
        textBox1.Text = result.ToString();
        if (result == System.Windows.Forms.DialogResult.Yes)
        {
            button1_MouseUp(sender, e);

        }

    } 
```

# javascript - CAAT - 对事件触发的重复行为影响

> ID：13670754
> 
> 赞同：1
> 
> 时间：2012-12-02T15:36:01.893
> 
> 标签：javascript, events, animation, 2d

使用 CAAT，我可以将事件绑定到向参与者添加行为。但是我无法弄清楚如何在后续事件触发器上重复行为效果。这是代码：

```
circle.mouseDown = function(e){
    circle.emptyBehaviorList();
    circle.addBehavior(circle_jump);
} 
```

[http://jsfiddle.net/S4frL/1/](http://jsfiddle.net/S4frL/1/)

单击圆圈使其跳转一次，然后再次单击什么也不做，尽管 BehaviorList 在再次添加相同的行为之前应该为空。

我错过了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T20:59:01.737

那是因为你必须声明/应用一次行为，然后当你需要演员（球）移动时，你只需要说“何时”。基本上，您必须将代码更改为以下内容：

```
circle.addBehavior(circle_jump);
scene.addChild(circle);

circle.mouseDown = function(e){
    circle_jump.setFrameTime(scene.time,2000);
} 
```

setFrameTime() 告诉演员何时 [scene.time -> now] 以及演员必须遵循他的行为多长时间 [2000 毫秒]。我希望我已经足够清楚了。

附言。球现在在页面加载时跳跃，那是因为你必须评论这一行：

```
 var circle_jump = new CAAT.PathBehavior().
                setPath(path_jump).
    /* THIS ONE setFrameTime(0,2000). */
                setCycle(false).
                setAutoRotate(false); 
```

# applescript - HTML 代码的纯文本 URL (Automator/AppleScript)

> ID：13670756
> 
> 赞同：1
> 
> 时间：2012-12-02T15:36:15.123
> 
> 标签：applescript, automator

假设我在 TextEdit 等文本编辑器中有一个纯 txt 文件：

```
title 1
http://a.b/c

title 2
http://d.e/f

... 
```

我想将所有以 http:// 开头的行转换为 URL 的 HTML 代码，以便上述内容变为：

```
title 1
<a href="http://a.b/c">http://a.b/c</a>

title 2
<a href="http://d.e/f">http://d.e/f</a>

... 
```

如何在 Automator 或 AppleScript 中完成这项工作？（我目前的解决方案是使用 Gmail，但它涉及多步复制粘贴。）

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:25:42.293

这将使您避免使用另一个编辑器：

```
set inFile to "/Users/you/Desktop/Urls.txt"
set outFile to "/Users/you/Desktop/Urls2.txt"

do shell script "sed 's/\\(http[^ ]*\\)/<a href=\"\\1\">\\1<\\/a>/g' " & quoted form of inFile & " >" & quoted form of outFile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:00:44.470

只需在文本编辑器或终端中进行正则表达式搜索和替换：

```
sed -E 's|^(http:.*)|<a href="\1">\1</a>|g' file.txt 
```

# javascript - 使用 D3.js 重现 Protovis Sunburst 标签

> ID：13670758
> 
> 赞同：1
> 
> 时间：2012-12-02T15:36:51.323
> 
> 标签：javascript, d3.js, label, hierarchy, sunburst-diagram

我正在将旧的 Rails/Protovis 站点迁移到 Django 和 D3.js。我使用了 Protovis sunburst 的修改版本（[http://mbostock.github.com/protovis/ex/sunburst.html——](http://mbostock.github.com/protovis/ex/sunburst.html)我的代码参见[http://www.eafsd.org/assignments_sunbursts](http://www.eafsd.org/assignments_sunbursts)）并且想重新创建这在 D3.js 中使用 sunburst 示例（[http://bl.ocks.org/4063423](http://bl.ocks.org/4063423)）作为基线，但我遇到了在弧上附加标签的墙壁。

我查看了其他几个 SO 问题，包括[在圆弧 d3js 内对齐文本](https://stackoverflow.com/questions/13202407/aligning-text-inside-circular-arc-d3js)和[寻找在旭日形图上显示标签的方法（找不到工作示例）](https://stackoverflow.com/questions/13317534/looking-for-a-way-to-display-labels-on-sunburst-chart-could-not-find-a-working)，但我似乎无法使文本路径正常工作。如果可能的话，最好让标签呈放射状显示，因为我正在显示的文本（18 世纪的外交头衔）可能会变得很长。

我已经尝试了示例中的以下代码：

```
 d3.json("../assignment-by-type.json", function(error, root) {
      var path = svg.datum(root)
          .selectAll("path")
          .data(partition.nodes)
         .enter()
          .append("path")
          .attr("display", function(d) {
              return d.depth ? null : "none";
          }) // hide inner ring
          .attr("d", arc)
          .style("stroke", "#fff")
          .style("fill", function(d) {
              return color((d.children ? d : d.parent).name);
          })
          .style("fill-rule", "evenodd")
          .each(stash);

      /* my additions begin here */

      path.append("title")
          .text(function(d) {return d.name + ": " + d.size});

      path.append("text")
          .attr("dy", ".3em")
          .style("text-anchor", "middle")
          .append("textpath")
          .attr("class", "textpath")
          .attr("xlink:href", "#path")
          .text(function(d) { return d.name });

      /* end of what I've added, back to the example code*/

      d3.selectAll("input").on("change", function change() {
          var value = this.value === "count"
                ? function() { return 1; }
                : function(d) { return d.size; };

          path.data(partition.value(value).nodes)
              .transition()
              .duration(1500)
              .attrTween("d", arcTween);
      });
    }); 
```

旭日形显示和标题显示在鼠标悬停（虽然内环没有尺寸功能，所以它返回为未定义）。

我正在尝试进行另外两个修改：我找不到显示如何递归计算包大小的 D3js 片段，以便内部节点可以显示其关联叶子的总大小。

最后，我不知道如何添加自己的颜色范围。

我真的很感谢你的时间。非常感谢。

# human-computer-interface - 是否有研究使用不同的控件（按钮、滑动条等）来执行不同的操作

> ID：13670762
> 
> 赞同：2
> 
> 时间：2012-12-02T15:37:13.220
> 
> 标签：human-computer-interface

基本上，我正在尝试研究如何在图形用户界面（GUI）中使用不同的组件来执行不同的操作。例如：如果我们正在测试音量，三个测试将是一个按钮、一个滑动条和一个用于输入值的文本框。我正在寻找很长的那些行，但我没有找到任何。我知道这听起来像是常识，但重要的是我用基于证据的事实来支持我的所有设计决策。谢了，兄弟们！

# regex - 正则表达式匹配正向后视和正向前瞻之间的多行

> ID：13670769
> 
> 赞同：1
> 
> 时间：2012-12-02T15:37:46.867
> 
> 标签：regex, lines, lookahead, lookbehind

我需要匹配和之间的内容`###`，`###`现在我的正则表达式我想出了“作品”，但我也在开始和结束时使用新行来获取内容，这让我的生活非常复杂。

这是我的正则表达式：

```
(?<=\#\#\#)[\w\W]*?(?=\#\#\#) 
```

我想知道我可以只匹配内容，而不匹配新行。

一些示例文本：

```
###
stackoverflow.com - penguin;stackoverflow;html;nospin
http://stackoverflow.com
Writing the perfect question
How to ask questions the smart way
Help vampires
How to ask a question
###
stackoverflow.com - pyramid;stackoverflow;bb;spin
http://stackoverflow.com
Writing the perfect question
How to ask questions the smart way
Help vampires
How to ask a question
###
stackoverflow;stackoverflow;wiki;nospin
http://stackoverflow.com
Writing the perfect question
How to ask questions the smart way
Help vampires
How to ask a question
###
stackoverflow;stackoverflow;bb;spin
http://stackoverflow.com
Writing the perfect question
How to ask questions the smart way
Help vampires
How to ask a question
### 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:43:42.917

您可以尝试在前瞻/后置断言中添加换行符：

```
(?<=###\n)[\w\W]*?(?=\r?\n###) 
```

这应该让他们远离正则表达式匹配。

# jquery - 更改标签上的类别

> ID：13670775
> 
> 赞同：4
> 
> 时间：2012-12-02T15:38:13.733
> 
> 标签：jquery, class, onclick

我想在点击时更改标签类。

jsFiddle 在这里：http: [//jsfiddle.net/9u8Nc/](http://jsfiddle.net/9u8Nc/)

得到这个 HTML 代码：

```
<ul class="tags">
  <li> <a href="javascript:void(0)" class="tag">Aventure</a>
    <div class="user-info">
      <p><b>Aventure</b> <br>
        + 2.300 activités</p>
    </div>
  </li>
  <li> <a href="javascript:void(0)" class="tag">Famille</a>
    <div class="user-info">
      <p><b>Famille</b> <br>
        + 1.500 activités</p>
    </div>
  </li>
  <li> <a href="javascript:void(0)" class="tag">Gourmet</a>
    <div class="user-info">
      <p><b>Gourmet</b> <br>
        + 500 activités</p>
    </div>
  </li>
</ul> 
```

当我单击时，我想要更改样式。

当我再次单击它时，我想要返回样式。

试试这个，但它不起作用。

```
$('.tag').click(function() {
    $(this).addClass('active');
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T15:39:05.947

您可以使用[toggleClass](http://api.jquery.com/toggleClass/)功能：

```
$('.tag').click(function() {
    $(this).toggleClass('active');
}); 
```

单击时，如果未设置，则设置类，如果已设置，则将其删除。

在你的 CSS 中，替换

```
.tag .active 
```

和

```
.tag.active 
```

as`.tag .active`不匹配具有两个类的元素，而是与 class`active`的另一个元素中的元素匹配`tag`。

[示范](http://jsfiddle.net/6PADy/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T15:39:25.140

您可以使用[**切换类**](http://api.jquery.com/toggleClass/)

**[现场演示](http://jsfiddle.net/4Fn4U/)**

```
$('.tag').click(function() {
    $(this).toggleClass('active');
}); 
```

# scheme - 需要 #t 但获得第一个元素（方案）

> ID：13670780
> 
> 赞同：1
> 
> 时间：2012-12-02T15:38:42.130
> 
> 标签：scheme

我想我几乎已经解决了以前的问题：[Foldr in scheme](https://stackoverflow.com/questions/13661367/foldr-in-scheme) but in code is a little trouble. 我需要#t，但我得到第一个元素，false 是可以的。这是我的代码：

```
(define accum
  (lambda (list1 pre?)
    (foldr (lambda (x y)
             (if y
                 (if (or (equal? y #t) (pre? x y))
                     x
                     #f)
                 #f))
           #t
           list1)))

(accum '(1 2 3 4) <=) --> 1 (should be #t)
(accum '(2 2 4 4) <=) --> 2 (should be #t)
(accum '(1 2 5 4) <=) --> #f
(accum '(5 7 2 3) <=) --> #f 
```

如果我写“x --> #t”，我总是得到#t，即使是#f。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:44:28.870

好吧，你总是可以用另一个返回正确类型的过程来包装结果：

```
(define (accum? list1 pre?)
  (if (accum list1 pre?) #t #f)) 
```

# sql - 从 INSERT 返回多个值并将其插入另一个表

> ID：13670785
> 
> 赞同：0
> 
> 时间：2012-12-02T15:39:07.857
> 
> 标签：sql, oracle, stored-procedures, oracle11g

我有以下 Oracle 程序（我已经删除了一些细节以使问题更笼统：

```
create or replace
procedure Insert_Row (foo IN VARCHAR2,  
                      buzz in VARCHAR2,
                      t_in MyType)
is
l_cur_id number;
begin
    insert into table1 (foo,buzz)
returning bar into l_cur_id;
BEGIN
FOR i IN 1..t_in.count LOOP
insert into table2 (bar, something)
    values(l_cur_id,t_in(i));
    commit;
END LOOP;
end;
end; 
```

它所做的只是在 中插入一行`table1`，从刚刚插入的行中获取 ID`table1`并使用它来插入`table2`。

这是我上面使用的类型：

```
create or replace
TYPE MyType AS VARRAY(200) OF VARCHAR2(50); 
```

**我的问题：**如何`buzz`插入`table2`？即第二个值。`buzz`我认为一定很简单，因为我在插入之前已经有了值。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T15:43:01.730

好的，我要做的就是：

更改自：

```
BEGIN
FOR i IN 1..t_in.count LOOP
insert into table2 (bar, something)
    values(l_cur_id,t_in(i));
    commit;
END LOOP; 
```

对此：

```
BEGIN
FOR i IN 1..t_in.count LOOP
insert into table2 (bar, something,buzz)
    values(l_cur_id,t_in(i),buzz);
    commit;
END LOOP; 
```

如此明显：-S。

# java - 在 JPanel 或 JComponent 上绘制同心形状

> ID：13670787
> 
> 赞同：2
> 
> 时间：2012-12-02T15:39:19.193
> 
> 标签：java, swing, jpanel, paint, jcomponent

我基本上是一个刚开始使用swing的新手。所以请容忍我在这里。我可以使用 swing 库中的预制组件来做简单的 GUI 工作。然而，现在我正试图弄清楚如何在 JPanel 上绘制基本形状。在这种情况下，它是我递归收集的 Square 对象的集合，并且应该围绕彼此同心显示。

几周前，我们做了一个涉及绘制形状的小项目，只不过这些形状是直接绘制到 JFrame 上的。现在我试图在 JPanel 或扩展 JComponent 的类中执行此操作，我遇到了太多的绊脚石。此时，JPanel 上没有显示任何内容。

这是我到目前为止的课程。

方班。这只是创建了一个简单的 Square

```
public class Square
{
    private int x, y, width, height;
    private Color theColor;

    public Square(int xS, int yS, int widthS, int heightS, Color squareColor)
    {
        x = xS;
        y = yS;
        width = widthS;
        height = heightS;
        theColor = squareColor;
    }

    public void draw(Graphics2D g2)
    {
        g2.setColor(theColor);
        Rectangle rectDraw = new Rectangle(x,y,width,height);
        g2.draw(rectDraw);
    }
} 
```

图形用户界面类

```
public class SquareGUI extends JFrame
{
    private JComboBox colorChoices, shapeChoices;
    private JTextArea numberOfTimes;
    private SquarePanel thisPanel;

    public SquareGUI()
    {
        thisPanel = new SquarePanel();
        JPanel northPanel = new JPanel(new FlowLayout());
        setSize(640, 480);
        setLayout(new BorderLayout());
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        ActionListener listener = new CommandListener();

        colorChoices = new JComboBox();
        shapeChoices = new JComboBox();
        numberOfTimes = new JTextArea(1,3);
        colorChoices.addItem("Black");
        colorChoices.addItem("Blue");
        colorChoices.addItem("Red");
        colorChoices.addItem("Green");
        shapeChoices.addItem("Square");
        shapeChoices.addItem("Circle");

        colorChoices.addActionListener(listener);
        shapeChoices.addActionListener(listener);

        northPanel.add(colorChoices);
        northPanel.add(shapeChoices);
        northPanel.add(new JLabel("Number of Shapes:"));
        northPanel.add(numberOfTimes);
        add(northPanel, BorderLayout.NORTH);

        add(thisPanel, BorderLayout.CENTER);

        setVisible(true);
    }

    public void addShapesRecursively(int x, int y, int width, int height, int times)
    {
        if (times == 0) { return; }
        Color colorChoice = null;
        switch (colorChoices.getSelectedIndex())
        {
            case 0: colorChoice = Color.BLACK; break;
            case 1: colorChoice = Color.BLUE; break;
            case 2: colorChoice = Color.RED; break;
            case 3: colorChoice = Color.GREEN; break;
        }
        if (shapeChoices.getSelectedIndex() == 0)
            thisPanel.add(new Square(x, y, width, height, colorChoice));
        else
            System.out.println("todo");

        addShapesRecursively(x-15, y-15, width + 15, height + 15, times - 1);
    }

    class CommandListener implements ActionListener
    {

        @Override
        public void actionPerformed(ActionEvent arg0) 
        {
            addShapesRecursively(getWidth()/2,getHeight()/2,20,20,Integer.parseInt(numberOfTimes.getText()));
        }

    }

    public static void main(String[]args)
    {
        new SquareGUI();
    }
} 
```

还有我的 JPanel 类，它应该显示正方形。

```
public class SquarePanel extends JPanel
{

    private ArrayList<Square> squareList;
    public SquarePanel()
    {
        setBackground(Color.WHITE);
        squareList = new ArrayList<Square>();

    }

    protected void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        Graphics2D g2 = (Graphics2D)g;

        for (int i = 0; i < squareList.size(); i++)
        {
            Square tempSquare = squareList.get(i);
            tempSquare.draw(g2);
        }
    }

    public void add(Square addSquare)
    {
        squareList.add(addSquare);
    }
} 
```

我很抱歉，目前还没有评论等。只是把我的头发拉出来试图让它发挥作用。我知道递归位有效，因为 ArrayList 运行后有 x 个 Square 对象。这只是在 JPanel 上绘制这些方块的问题。

我首先尝试了一个扩展 JComponent 的单独类，但永远无法让被覆盖的paintComponent 在其中触发。所以我环顾四周，发现你也可以在 JPanel 中覆盖paintComponent。所以它按预期触发，但 JPanel 本身没有出现任何内容。

我的总体问题是，如何让方块正确显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T18:57:23.023

您需要鼓励面板自行更新。

在面板`repaint`的方法中添加调用...`add`

```
public void add(Square addSquare) {
    squareList.add(addSquare);
    repaint();
} 
```

# android - 带有 GLSurfaceView.Renderer 的 android 传感器

> ID：13670792
> 
> 赞同：1
> 
> 时间：2012-12-02T15:39:31.503
> 
> 标签：android, opengl-es, sensors

我有主要活动

```
public class MainActivity extends Activity {

  private static SensorManager sensorService;
  private GLSurfaceView view;
  private Sensor sensor;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        GLSurfaceView view = new GLSurfaceView(this);
        view.setRenderer(new SceneView());
        setContentView(view);

        sensorService = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
        sensor = sensorService.getDefaultSensor(Sensor.TYPE_ORIENTATION);
        if (sensor != null) {
            sensorService.registerListener(mySensorEventListener, sensor,
                    SensorManager.SENSOR_DELAY_NORMAL);
            Log.i("Compass MainActivity", "Registerered for ORIENTATION Sensor");

        } else {
            Log.e("Compass MainActivity", "Registerered for ORIENTATION Sensor");
            Toast.makeText(this, "ORIENTATION Sensor not found",
                    Toast.LENGTH_LONG).show();
            finish();
        }
    }

    private SensorEventListener mySensorEventListener = new SensorEventListener() {

        @Override
        public void onAccuracyChanged(Sensor sensor, int accuracy) {
        }

        @Override
        public void onSensorChanged(SensorEvent event) {
            // angle between the magnetic north directio
            // 0=North, 90=East, 180=South, 270=West
            float azimuth = event.values[0];
            view.updateData(azimuth);

        }
    };

    @Override
    protected void onDestroy() {
        super.onDestroy();
        if (sensor != null) {
            sensorService.unregisterListener(mySensorEventListener);
        }
    }

} 
```

和

场景

```
public class SceneView implements GLSurfaceView.Renderer {

    private float position = 0;
    private Square mSquare;

    public SceneView() {
        mSquare = new Square();
    }

    public void onSurfaceCreated(GL10 gl, EGLConfig config) {
        gl.glClearColor(0.0f, 0.0f, 0.0f, 0.5f);
        gl.glShadeModel(GL10.GL_SMOOTH);
        gl.glClearDepthf(1.0f);
        gl.glEnable(GL10.GL_DEPTH_TEST);
        gl.glDepthFunc(GL10.GL_LEQUAL);
        gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST);
    }

    public void onDrawFrame(GL10 gl) {
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
        gl.glLoadIdentity();
        gl.glTranslatef(0, 0, -6);
        mSquare.draw(gl);
    }

    public void onSurfaceChanged(GL10 gl, int width, int height) {
        gl.glViewport(0, 0, width, height);
        gl.glMatrixMode(GL10.GL_PROJECTION);
        gl.glLoadIdentity();
        GLU.gluPerspective(gl, 45.0f, (float) width / (float) height, 0.1f, 100.0f);
        gl.glMatrixMode(GL10.GL_MODELVIEW);
        gl.glLoadIdentity();
    }

    public void updateData(float position) {
    }

} 
```

当我打电话时，`updateData`我收到错误，因为`view`如何`SensorEventListener mySensorEventListener`解决这个问题？

在[http://www.vogella.com/articles/AndroidSensor/article.html](http://www.vogella.com/articles/AndroidSensor/article.html)作者使用`extends View`和他的代码完美地工作，当我使用`implements GLSurfaceView.Renderer`不同的构造函数时都中断

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T16:37:36.077

您在方法中`GLSurfaceView`再次将您的声明为*局部*变量：`onCreate`

 *```
GLSurfaceView view = new GLSurfaceView(this); 
```

所以在`onCreate`引用的时候，并不是指*成员GLSurfaceView* ( `private GLSurfaceView view`)，而是指*本地*成员。

省略`view`in的声明`onCreate`：

```
view = new GLSurfaceView(this); 
```

它会起作用。*

# c++ - 将值从一个函数传递到另一个函数

> ID：13670796
> 
> 赞同：-7
> 
> 时间：2012-12-02T15:40:07.517
> 
> 标签：c++

如何将值从一个函数发送到另一个函数？

我有这个例子：

```
/* Include files */
#include <iostream>
#include <string>
#include <limits>
#include <sqlca.h>
#include <sqlcpr.h>
#include <iomanip>
#include <conio.h> // ntuk password masking

/* Declaration of functions and constants used */
#include "Functions.h"

using namespace std;

void fnMainMenu();

void fnLogin()
{
char data[6] = "hello";
fnMainMenu(); // call Main Menu and I want to pass "hello"

}

void fnMainMenu()
{   
cout << "I want to display hello here?";
}

int main()
{   

    fnLogin();
    return 0;
} 
```

我该怎么做呢？我从网上找到的教程解释了在 main 上显示数据。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T15:43:23.690

您可以将对象作为参数传递给函数。在这里，`fnMainMenu`将一个常量`std::string`对象的引用作为参数并将其打印到标准输出：

```
void fnMainMenu(const std::string& msg)
{
  std::cout << msg << "\n";
} 
```

然后`fnLogin()`可以调用该函数并将其传递给它喜欢的任何字符串：

```
void fnLogin()
{
  std::string s = "hello";
  fnMainMenu(s); // call Main Menu and I want to pass "hello"

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T17:32:55.340

```
#include <iostream>
using namespace std;

void fnMainMenu(char *s)
{
cout << s;
}

void fnLogin()
{
 char data[]="hellow";
fnMainMenu(data); // call Main Menu and I want to pass "hello"
}

int main(){
 fnLogin(); 

} 
```

# java - 聊天客户端如何禁止用户名被第二次使用？

> ID：13670797
> 
> 赞同：2
> 
> 时间：2012-12-02T15:40:14.807
> 
> 标签：java, multithreading, swing, methods, wait

当输入用户名并按下连接按钮时：

```
public connect{...
sock = new Socket("77.70.65.222", 5000);
InputStreamReader streamreader = new InputStreamReader(sock.getInputStream());
reader = new BufferedReader(streamreader);
writer = new PrintWriter(sock.getOutputStream());
Thread IncomingReader = new Thread(new IncomingReader());
IncomingReader.start();
writer.println("``connecto"); 
//sends message to server, which sends back a message ,which when read by my 
//IncomingReader class(implements Runnable) prints online users in "onlineUsersArea"
writer.flush();
String[] a = onlineUsersArea.getText().split("\n");
for(String s:a){if(s.equals(username)) throw new Exception();}
//throws an exception if the selected username exists
writer.println(username + "`has connected.`Connect"); // Displays to everyone that user connected.
writer.flush(); // flushes the buffer
...} 
```

问题是该方法不会等待`IncomingReader`打印在线用户，因此`a[]`在方法完成之前不包含任何内容。我该怎么做才能让它等待`IncomingReader`然后继续`writer.flush();` 如果我添加一个`IncomingReader.join();`，在我按下连接按钮后，客户端停止响应。
如果我有其他方法可以阻止用户使用已经使用过的用户名，我将非常高兴听到它。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T19:33:22.543

这只是一种尝试，但是如果您在另一个线程上运行编写器呢？我认为问题可能是在等待另一个线程完成工作时主线程被阻塞。

（提示：如果我是你，我不会使用 throw simple `Exception`-s。定义一个新`Exception`类型并在需要时仅处理该类型。）

# list - Prolog - 字符串或字符的 CharCode 列表

> ID：13670798
> 
> 赞同：8
> 
> 时间：2012-12-02T15:40:18.590
> 
> 标签：list, character-encoding, prolog, character

我在序言中有一个字符代码列表。

我想把它们变成字符。

例如，

`L = "abc"` 返回 `L = [97,98,99]`

假设我从`L = [97,98,99]`

无论如何将 L 转换回 abc 这样，如果存在方法

`convert(L, X)`返回`X = abc`

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T15:57:42.570

鉴于`L="abc", convert(L, X), X = abc`我会说您想从序言字符串中获取原子（请参阅[数据类型描述）。](http://en.wikipedia.org/wiki/Prolog#Data_types)我猜你想要[`atom_codes/2`](http://www.swi-prolog.org/pldoc/man?predicate=atom_codes%2f2)或类似的东西。它应该像`L="abc", atom_codes(X, L).`文档中所说的那样工作。

不幸的是，目前我的系统中没有 SWI-Prolog。但这里是包含[atom_codes/2的](http://www.dcc.fc.up.pt/~vsc/Yap/yap.html#index-atom_005fcodes_002f2-2)[YAP](http://www.dcc.fc.up.pt/~vsc/Yap/)

```
YAP 6.3.2 (x86_64-linux): Sat Sep  1 08:24:15 EEST 2012
MYDDAS version MYDDAS-0.9.1
?- L="abc", atom_codes(X,L).
L = [97,98,99],
X = abc 
```

也不要忘记，如果您需要输出字符串，则不需要将其转换为 atom。请参阅[SWI](http://www.swi-prolog.org/pldoc/man?predicate=format/2)（或[YAP](http://www.dcc.fc.up.pt/~vsc/Yap/yap.html#index-format_002f2-2)）中的 format/2

```
?- L="abc", format("~s~n", [L]).
abc
L = [97,98,99] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T15:48:39.917

`char_code(?Atom, ?ASCII)`在地图列表中使用。

> char_code(?Atom, ?ASCII) 在字符和单个字符的 ASCII 值之间转换。(16)

[来源](http://www.csse.uwa.edu.au/programming/swi-prolog/sec-3.21.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-04T16:42:28.430

字符表示为长度为 1 的原子。您可以生成它们：

*   在读取时通过更改 Prolog 标志`double_quotes`。有关更多信息，请参阅[这个](https://stackoverflow.com/a/8269897/772868)和[那个](https://stackoverflow.com/a/36645725/772868)链接。

    ```
    :- set_prolog_flag(double_quotes, chars). 
    ```

*   动态地，您可以使用`atom_codes/2`和`atom_chars/2`。或者你可以`char_code/2`直接使用。

# asp.net-mvc - 如果选择了 DropDownList 的定义选项，则禁用 CheckBox

> ID：13670800
> 
> 赞同：2
> 
> 时间：2012-12-02T15:40:39.193
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我正在开发一个 asp.net mvc3 应用程序。我有一个`@Html.DropDownList("abcd")`和一个 `@Html.CheckBox("efgh")`。

我想要的是：

如果将选择 DropDownList 的已定义选项，则应禁用 CheckBox。

我想…… 像那样：

```
@if "defined option" is chosen of DropDownList("abcd") {
    disable checkbox("efgh") 
```

我已经找到了如何禁用复选框：

```
@Html.CheckBox("efgh", new { disabled = "disabled" }) 
```

如您所见，我正在使用剃须刀

提前致谢！！你们在这里做得很好:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T15:43:42.310

> 我想…… 像那样：

不，您应该考虑使用 javascript 函数，因为下拉菜单上的更改发生在客户端上，而不是服务器上。所以基本上你需要订阅`onchange`你的下拉事件，读取选定的值并根据这个值切换复选框禁用状态。

例如，如果您使用 jQuery，这可能看起来像这样：

```
$(function() {
    $('#abcd').change(function() {
        var disabled = this.value == 'defined option';
        $('#efgh').prop('disabled', disabled);
    });
}); 
```

在我的示例`abcd`中，显然是下拉列表`efgh`的 id 和复选框的 id。因此，请确保它们是正确的并与您的实际值相匹配。

哦，作为旁注，我不会忘记，如果您禁用 HTML 输入元素，则在提交表单时，它的值将永远不会发送到服务器。如果您仍然希望在无法修改输入的情况下将值提交给服务器，您可能希望创建它`readonly`而不是禁用它。

```
var readonly = this.value == 'defined option';
$('#efgh').prop('readonly', readonly); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:13:10.410

这现在对我有用

```
$(function() {
    $('#abcd').change(function() {
        if (this.value == 'defined option') {
          $('#efgh').attr('disabled', disabled);
        } else {
          $('#efgh').removeAttr('disabled', disabled);
        }
    });
}); 
```

# php - 错误：调用非对象的成员函数

> ID：13670808
> 
> 赞同：-1
> 
> 时间：2012-12-02T15:41:28.143
> 
> 标签：php, ajax

我正在尝试在服务器上为我正在创建的游戏设置一个计时器，但我不断收到“在非对象上调用成员函数 stop()”错误。

为了开始时间，我进行了以下 ajax 调用

```
$.post('game.php', {
    action: 'start'
}, function(res) {
},'json'); 
```

游戏结束后，我尝试通过进行以下 ajax 调用来停止计时器

```
$.post('game.php', {
    action: 'stop'
}, function(res) {
},'json'); 
```

game.php 代码是

```
$action = $_POST['action'];

switch($action) {
case 'start':
    $gameTime = new timer();
    $gameTime->start();
    break;
case 'stop':
    $gameTime->stop();
    break;
}

class Timer {

   var $classname = "Timer";
   var $start     = 0;
   var $stop      = 0;
   var $elapsed   = 0;

   # Constructor
   function Timer( $start = true ) {
      if ( $start )
         $this->start();
   }

   # Start counting time
   function start() {
      $this->start = $this->_gettime();
   }

   # Stop counting time
   function stop() {
      $this->stop    = $this->_gettime();
      $this->elapsed = $this->_compute();
   }

   # Get Elapsed Time
   function elapsed() {
      if ( !$elapsed )
         $this->stop();

      return $this->elapsed;
   }

   # Get Elapsed Time
   function reset() {
      $this->start   = 0;
      $this->stop    = 0;
      $this->elapsed = 0;
   }

   #### PRIVATE METHODS ####

   # Get Current Time
   function _gettime() {
      $mtime = microtime();
      $mtime = explode( " ", $mtime );
      return $mtime[1] + $mtime[0];
   }

   # Compute elapsed time
   function _compute() {
      return $this->stop - $this->start;
   }
} 
```

当我调用停止计时器时，我收到错误消息。我试图找出问题所在，想知道是不是因为我在进行 ajax 调用？

有谁知道让这个工作的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:42:43.087

这个

```
switch($action) {
case 'start':
    $gameTime = new timer();
    $gameTime->start();
    break;
case 'stop':
                   <-----there should be  $gameTime = new timer();
    $gameTime->stop();
    break;
} 
```

应该

```
 switch($action) {
    case 'start':
        $gameTime = new timer();
        $gameTime->start();
        break;
    case 'stop':
     $gameTime = new timer();
        $gameTime->stop();
        break;

} 
```

或尝试

```
 $gameTime = new timer();
      switch($action) {
    case 'start':

        $gameTime->start();
        break;
    case 'stop':

        $gameTime->stop();
        break;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:44:32.717

在您的停止情况下，您必须像在开始情况下一样初始化计时器。

# objective-c - 带有不完整字符串的 NSXMLParser 输入

> ID：13670814
> 
> 赞同：1
> 
> 时间：2012-12-02T15:42:17.067
> 
> 标签：objective-c, macos, nsxmlparser

这是我的代码：

。H

```
NSMutableString *dmxCharacters;
NSXMLParser *parser; 
```

.m

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    parser = [[NSXMLParser alloc] init];
}

- (void) receivedData:(NSString *)data {

NSData *data2 = [data dataUsingEncoding:NSUTF8StringEncoding];
parser = [[NSXMLParser alloc] initWithData:data2];
[parser setDelegate:(id)self];
[parser parse];

}
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict {

    dmxCharacters = [[NSMutableString alloc] initWithCapacity:500];
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {

    [dmxCharacters appendString:string];
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    NSRunAlertPanel(@"", dmxCharacters, @"", @"", @"");

} 
```

receivedData:(NSString*)data 在通过串口接收数据时被调用。我有基本的 XML 数据进来。串行数据进来：`<DMX>255,23,1,4,6</DMX>`问题是，它不是作为一个统一的字符串进来的。它是碎片化的。比如, `<DM`, `X>255`, `,23,1,4,`, 等等。它是随机的，所以我无法追踪它。有时它会发送整个内容，有时它会一次发送几个字符。

我在这里添加了一个 NSLog（导出字符串）：`- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string`它给了我 "255,23,1" 或 "255,23,1,4" 它没有得到全部。另外， didEndElement 永远不会被调用。我认为这是因为我一直在重新启动 NSXMLParser 并且当串行数据在它没有正确启动解析之后进来时。很难解释。

有什么解决办法吗？不重新启动 NSXMLParser 而是向其中添加数据的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:36:00.870

程序是：

**1.**当 didStartElement 被调用时，分配一个新的字符串来包含新标签的值；
**2.**继续连接你在 foundCharacters 方法中得到的每一段字符串（是的，foundCharacters 只返回你必须连接的部分字符串，而不是整个字符串）；
**3.**在调用 didEndElement 方法时将字符串复制到某处。

**编辑**

考虑到您正在执行该过程，但是您没有使用包含所有数据的唯一数据来初始化解析器。
因此，在您的位置，我将使用 NSMutableData 附加每条数据，然后仅在拥有完整数据时才初始化解析器：

```
@property (nonatomic, strong) NSMutableData* data; // not synthesizing it

- (void) receivedData:(NSString *)data 
{

    NSData *data2 = [data dataUsingEncoding:NSUTF8StringEncoding];
    [self.data appendData: data2];
} 
```

问题是：您是否有办法检查何时收到所有数据？

# go - Go中的对/元组数据类型

> ID：13670818
> 
> 赞同：157
> 
> 时间：2012-12-02T15:43:00.580
> 
> 标签：go, tuples

在进行[Tour of Go 的最后练习时](http://tour.golang.org/#71)，我决定需要一个 ( `string`, `int`) 对的队列。这很容易：

```
type job struct {
    url string
    depth int
}

queue := make(chan job)
queue <- job{url, depth} 
```

但这让我想到：Go 中有内置的对/元组数据类型吗？支持从函数[返回多个值](http://golang.org/doc/effective_go.html#multiple-returns)，但是 AFAICT，产生的多个值元组不是 Go 类型系统中的一等公民。是这样吗？

至于“你尝试过什么”部分，显而易见的语法（来自 Python 程序员的 POV）

```
queue := make(chan (string, int)) 
```

没用。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-12-02T16:06:06.363

你可以这样做。它看起来比元组更冗长，但这是一个很大的改进，因为您可以进行类型检查。

编辑：按照尼克的建议，用完整的工作示例替换片段。游乐场链接：[http ://play.golang.org/p/RNx_otTFpk](http://play.golang.org/p/RNx_otTFpk)

```
package main

import "fmt"

func main() {
    queue := make(chan struct {string; int})
    go sendPair(queue)
    pair := <-queue
    fmt.Println(pair.string, pair.int)
}

func sendPair(queue chan struct {string; int}) {
    queue <- struct {string; int}{"http:...", 3}
} 
```

匿名结构和字段适用于像这样的快速和肮脏的解决方案。但是，对于除了最简单的情况之外的所有情况，您最好像您所做的那样定义一个命名结构。

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2012-12-03T15:08:35.400

Go 中没有元组类型，你是对的，函数返回的多个值并不代表一等对象。

尼克的回答展示了如何使用`interface{}`. （我可能使用数组而不是结构来使其像元组一样可索引，但关键是`interface{}`类型）

我的另一个答案显示了如何做类似的事情来避免使用匿名结构创建类型。

这些技术具有元组的一些属性，但不，它们不是元组。

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2012-12-02T16:15:23.960

如果你愿意，你可以做这样的事情

```
package main

import "fmt"

type Pair struct {
    a, b interface{}
}

func main() {
    p1 := Pair{"finished", 42}
    p2 := Pair{6.1, "hello"}
    fmt.Println("p1=", p1, "p2=", p2)
    fmt.Println("p1.b", p1.b)
    // But to use the values you'll need a type assertion
    s := p1.a.(string) + " now"
    fmt.Println("p1.a", s)
} 
```

但是，我认为您已经拥有的内容是完全惯用的，并且该结构完美地描述了您的数据，这比使用普通元组具有很大的优势。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-12-29T09:27:50.030

[Go 1.18](https://go.dev/blog/go1.18beta1)（预计 2022 年 2 月发布）将增加对泛型的支持。

这将使声明元组类型变得非常容易：

```
type Pair[T, U any] struct{
    T First
    U Second
}

func main() {
    queue := make(chan Pair[string, int])
} 
```

您可以立即使用 Beta 版试用！

您还可以使用我编写的通用元组库（[go-tuple](https://github.com/barweiss/go-tuple)）。

# javascript - 按 id 属性的一部分查找所有元素

> ID：13670821
> 
> 赞同：15
> 
> 时间：2012-12-02T15:43:07.363
> 
> 标签：javascript, jquery

我想知道这是否可能：

我有一组 div，每个都有一个以“_font”结尾的 ID，例如“body_font”、“heading_font”、“tagline_font”等。

有没有办法通过搜索它们名称的共同部分来获取这些元素，在这种情况下是“_font”，以便我以后可以使用 jQuery 操作它们？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-02T15:43:59.813

您可以使用[“属性以结尾”选择器](http://api.jquery.com/attribute-ends-with-selector/)：

```
var elems = $("div[id$='_font']"); 
```

如果您花一些时间浏览 jQuery API，您应该能够自己回答此类问题，而无需在 Stack Overflow 上发帖。

其他可能有用的选择器：

*   [属性以选择器开头](http://api.jquery.com/attribute-starts-with-selector/)
*   [属性包含选择器](http://api.jquery.com/attribute-contains-selector/)
*   [属性等于选择器](http://api.jquery.com/attribute-equals-selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T15:44:30.360

您可以使用通配符，将为您提供以给定字符串结尾的元素，[**在此处**](http://api.jquery.com/attribute-ends-with-selector/)`$`了解有关以 selctor 结尾的更多信息。[](http://api.jquery.com/attribute-ends-with-selector/)

 **```
elements = $('[id$=_font]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T15:44:48.590

尝试这个：-

```
 var elements = $("[id$='_font']"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T15:44:52.123

是的，有可能，使用：

```
var elements = $('[id$=_font]'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T15:45:28.490

jQuery 的[Attribute Ends With Selector](http://api.jquery.com/attribute-ends-with-selector/)应该可以满足您的要求：

```
$("div[id$='_font']") 
```**

# c - 计算C中数组的所有可能排列

> ID：13670826
> 
> 赞同：0
> 
> 时间：2012-12-02T15:43:51.777
> 
> 标签：c, arrays, permutation

> **可能重复：**
> [打印给定元素排列的程序](https://stackoverflow.com/questions/9148543/program-to-print-permutations-of-given-elements)

我试图找到一种方法来找到 C 中数组的所有可能排列，但它并不完全奏效。

```
int[] permutations (int a[], int l) {
if (l == 1) {
    return a;
}
int n[l-1];
int i, j, x, d;
for (i = 0; i < l; i++) {
    printf("i = %d\n", i);
    for (d = 0; d < l; d++) printf("a[%d] = %d\n", d, a[d]);
    x = a[0];
    a[0] = a[i];
    a[i] = x;
    for (j = 1; j < l; j++) {
        n[j-1] = a[j];
    }
    for (k = 0; j < l; k++) {
        a[k+1] = (permutations(n, l-1))[k]
    }
} 
```

}

# javascript - 请求商店套件中的产品不起作用

> ID：13670828
> 
> 赞同：0
> 
> 时间：2012-12-02T15:43:56.210
> 
> 标签：javascript, iphone, in-app-purchase, titanium, storekit

嗨，我正在使用钛金属商店套件。我正在使用此代码

```
 Ti.App.storekit=require('ti.storekit');
   Ti.App.storekit.requestProduct('553XXXXXX.testproductname', function (product) {
    var buySingleItem = Ti.UI.createButton({
        title: 'Buy ' + product.title + ', ' + product.formattedPrice,
        top: 60, left: 5, right: 5, height: 40
    });
    buySingleItem.addEventListener('click', function () {
        purchaseProduct(product);
    });
    HomeWin.add(buySingleItem);
}); 
```

但是它给了我一个错误，它是未定义的，而不是一个函数有人可以帮我解决这个问题吗谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:48:43.967

切勿将模块注入 Titanium 命名空间。它将意外地被垃圾收集。你迟早会遇到这种情况，所以现在就改变它。

此外，它是“requestProducts”，而不是“requestProduct”（应该是复数）。

回顾一下模块及其文档中包含的示例。这一切都摆在那里。

```
var Storekit = require('ti.storekit');
Storekit.requestProducts([ '553XXXXXX.testproductname' ], function (evt) {
    if (!evt.success) {
        alert('ERROR: We were not able to get the product!');
    }
    else if (evt.invalid) {
        alert('ERROR: We requested an invalid product!');
    }
    else {
        alert(evt.products[0]);
    }
}); 
```

# python - 编写一个 PEP-302 导入钩子，它知道哪个模块正在导入哪个

> ID：13670835
> 
> 赞同：0
> 
> 时间：2012-12-02T15:44:41.523
> 
> 标签：python, import-hooks

假设我有模块`foo.py`，`bar.py`并且它们的代码中都有`import baz`语句。

我想编写一个导入钩子，我可以插入`sys.meta_path`它知道`baz`是从 导入`foo`还是从`bar`.

我想这样做的原因是因为我希望我的应用程序能够加载插件并保持它们的依赖项隔离，就像我可以通过`ClassLoader`在 Java 中使用单独的实例一样。这样，插件`foo`和插件`bar`将能够捆绑不同版本的库`baz`而不会发生冲突。我的意思是通过更改导入机制来为`import baz`语句生成单独的模块，具体取决于该语句的来源。

如果有人有更好的方法，请随时在您的答案中提出建议。

# php - 将类链接在一起

> ID：13670838
> 
> 赞同：0
> 
> 时间：2012-12-02T15:44:53.173
> 
> 标签：php, oop

我创建 PHP 应用程序，但我对架构有疑问。

我的应用程序中有一些*系统*。例如，*缓存系统*、*输出系统*、*应用程序系统*等。我还有*注册表*用于将这些系统链接在一起。

这是在*应用程序*中使用*缓存*的示例：

 *```
class Manager {

    public function __construct() {
        $registry = \Jx\System\JxRegistry::getInstance();
        $this->JxCache = $registry -> JxCache;
    }

    public function getAppInfo($JxId) {
        $someInfo = $this->JxCache->Applications->$JxId;
    }

} 
```

但是这种方式我需要在任何地方调用*Registry*并且我需要创建局部变量来存储对象。

我有另一个想法，是这样的：

```
class Kernel {
    public function __construct() {
        $this->JxCache = new JxCache;
    }
}
/* .. */
new Kernel();
/* .. */
class Manager extends Kernel {

    public function __construct() {

    }

    public function getAppInfo($JxId) {
        $someInfo = $this->JxCache->Applications->$JxId; //JxCache declared in class 'Kernel'
    }

} 
```

哪个变种更正确？你能推荐你的变种吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:51:40.507

Yii 框架有不同的做法可能你可以喜欢它：

[Yii 行为](http://www.yiiframework.com/wiki/44/behaviors-events/#hh1)*

# c++ - 无法从 GPU 复制到 CPU (OpenGL)

> ID：13670839
> 
> 赞同：2
> 
> 时间：2012-12-02T15:44:53.860
> 
> 标签：c++, opengl

这是我的纹理类：

```
struct GPUAllocation {
    uint ID,VectorType,DataType,Width,Height,Format,IntFormat;
    //ID is the output from glGen* and Format is the format of the texture and IntFormat
    //is the Internal Format of this texture. (Width and height and too obvious)
    //DataType is like GL_FLOAT...
    bool isFinalized;
    GPUAllocation(uint vectorType,uint dataType,uint width,uint height);
    void SetSlot(int n);
    void Finalize();
    ~GPUAllocation();
}; 
```

将此纹理复制到 RAM 的代码：

```
void memcpy(GPUAllocation src,void* dst) {
    glBindTexture(GL_TEXTURE_2D,src.ID); //ID is the output from glGen*
    glTexSubImage2D(GL_TEXTURE_2D,0,0,0,src.Width,src.Height,src.Format,src.DataType,dst);
} 
```

运行这个函数的代码是：

```
GPUAllocation gpu_alloc(PCPU_Vector1,PCPU_Float,4096,4096); //I generate Format and IntFormat here.
//The generated format is correct because when I copied from GPU to CPU I didn't got any error
float *cpu_alloc=new float[4096*4096];
memcpy(gpu_alloc,cpu_alloc); //The error occurred here! 
```

发生的错误是`1281`。

* * *

编辑：我发现当我从 GPU 复制到 CPU，然后从 CPU 复制到 GPU 时，我得到了那个错误。如果我首先从 GPU 复制到 CPU，我没有收到任何错误。从 CPU 复制到 GPU 的函数是：

```
void memcpy(void* src,GPUAllocation dst) {
    glBindTexture(GL_TEXTURE_2D,dst.ID);
    glGetTexImage(GL_TEXTURE_2D,0,dst.Format,dst.DataType,src);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T15:55:38.153

`glTexSubImage*`函数复制**到**纹理，而不是从。用于`glReadPixels`从 GL 读取纹理到客户端内存。

我还强烈建议观看[优化的纹理传输](http://www.gputechconf.com/gtcnew/on-demand-gtc.php?topic=14#1414)

PS。当然，错误`glReadPixels`是从帧缓冲区中读取，而不是从纹理中`glGetTexImage`读取，而是从纹理中读取。

# java - “使用名称创建 bean 时出错”创建事务管理器时

> ID：13670840
> 
> 赞同：4
> 
> 时间：2012-12-02T15:45:11.367
> 
> 标签：java, spring, hibernate, tomcat, hibernate-4.x

这是我的 hibernate.cfg.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
          "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
          "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
    <session-factory>
        <!-- Database connection settings -->
        <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="connection.url">jdbc:mysql://localhost:3306/sometable</property>
        <property name="connection.username">root</property>
        <property name="connection.password">somepassword</property>

        <!-- JDBC connection pool (use the built-in) -->
        <property name="connection.pool_size">1</property>

        <!-- SQL dialect -->
        <property name="dialect">org.hibernate.dialect.MySQLDialect</property>

        <!-- Echo all executed SQL to stdout -->
        <property name="show_sql">true</property>

        <!-- All Entity Classes for hibernate to check for annotations here -->

        <mapping class ="data.Person"/>
    </session-factory>
</hibernate-configuration> 
```

这是我的 applicationContext.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="
       http://www.springframework.org/schema/beans 
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/tx 
       http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
       http://www.springframework.org/schema/aop 
       http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">

    <bean id="sessionFactory" scope="singleton"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="configLocation" value="classpath:hibernate.cfg.xml"></property>
    </bean>

    <!-- Springs Hibernate Transaction Manager -->
    <bean id ="transactionManager" class = "org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name = "sessionFactory" ref = "sessionFactory"/>
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager"/>

    <!-- Inject my business services class to the action -->
    <bean id="services" class ="services.Services" scope ="singleton">
        <property name = "sessionFactory" ref = "sessionFactory"/>
    </bean>

</beans> 
```

启动 Tomcat 后，我​​收到此错误

```
Dec 02, 2012 11:36:39 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is org.hibernate.service.UnknownUnwrapTypeException: Cannot unwrap to requested type [javax.sql.DataSource]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:605)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:925)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:472)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.hibernate.service.UnknownUnwrapTypeException: Cannot unwrap to requested type [javax.sql.DataSource]
    at org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.unwrap(DriverManagerConnectionProviderImpl.java:91)
    at org.springframework.orm.hibernate4.SessionFactoryUtils.getDataSource(SessionFactoryUtils.java:101)
    at org.springframework.orm.hibernate4.HibernateTransactionManager.afterPropertiesSet(HibernateTransactionManager.java:264)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 22 more

Dec 02, 2012 11:36:39 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart
Dec 02, 2012 11:36:39 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/Events] startup failed due to previous errors
Dec 02, 2012 11:36:39 PM org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext
Dec 02, 2012 11:36:39 PM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc
SEVERE: The web application [/Events] registered the JDBC driver [com.mysql.jdbc.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
4600 [pool-2-thread-1] ERROR org.springframework.web.context.ContextLoader  - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is org.hibernate.service.UnknownUnwrapTypeException: Cannot unwrap to requested type [javax.sql.DataSource]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:605)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:925)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:472)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.hibernate.service.UnknownUnwrapTypeException: Cannot unwrap to requested type [javax.sql.DataSource]
    at org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.unwrap(DriverManagerConnectionProviderImpl.java:91)
    at org.springframework.orm.hibernate4.SessionFactoryUtils.getDataSource(SessionFactoryUtils.java:101)
    at org.springframework.orm.hibernate4.HibernateTransactionManager.afterPropertiesSet(HibernateTransactionManager.java:264)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 22 more 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:49:40.580

这个论坛有一个解决方案：

[http://www.coderanch.com/t/581183/Spring/Spring-Hibernate-transaction-Management-unwrap](http://www.coderanch.com/t/581183/Spring/Spring-Hibernate-transaction-Management-unwrap)

SO也有重复：

[Spring源码套件spring3 + Hibernate4 + maven 3 + MySQL 5](https://stackoverflow.com/questions/10691486/spring-source-suite-spring3-hibernate4-maven-3-mysql-5)

# jquery - ReferenceError: $未定义奇怪

> ID：13670842
> 
> 赞同：0
> 
> 时间：2012-12-02T15:45:20.437
> 
> 标签：jquery

为什么 homecooked.js 中的所有内容都可以正常工作，但它下面的脚本却没有，并且浏览器在该特定部分给了我“ReferenceError: $ is not defined”？

```
 <script src="assets/jquery-1.8.2.min.js" type="text/javascript"></script>
<script src="assets/homecooked.js" type="text/javascript"></script>
<script type="text/javascript">
        $(document).ready(function(){
        <?php if($profile_messages){?>
            $('.page').hide().eq('2').show();
        <?php } else { ?>
            $('.page:gt(0)').hide();
        <?php } 

        for($i = 0; $i < ($image_array_length); $i++){ ?>
                $(".modal-textarea").limit("120",".comment-counter");
            <?php }?>
        });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T15:50:57.237

尝试改变这个：

```
jQuery(document).ready(function($){ 
```

我们可以尽可能多地使用美元符号代替 jQuery。

您可以在这里查看文档：http: [//docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)

# php - 启用执行功能

> ID：13670847
> 
> 赞同：3
> 
> 时间：2012-12-02T15:46:09.290
> 
> 标签：php, apache

我在共享服务器（apache）上有一个网站，我的一个脚本需要 exec 功能才能工作，但我的网络主机似乎已禁用它..有没有办法通过 .htaccess 启用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T15:48:50.160

没有。`disable_functions`指令仅`php.ini`出于安全原因才可用。请参阅[此处的文档](http://php.net/manual/en/ini.core.php)，列“**可更改**”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:47:19.850

不，没有。这是一个 php 内部设置，而 .htaccess 只处理 apache 内部请求处理。

顺便说一句：由于这显然是您正在使用的托管站点：有*很好*的理由禁用该功能。对于网络空间托管商来说，这将是一个巨大的安全问题。

# java - 为什么 Java 中的类默认不可克隆

> ID：13670848
> 
> 赞同：7
> 
> 时间：2012-12-02T15:46:13.253
> 
> 标签：java, cloning

在Java中，要使一个类可克隆，我们需要实现`Cloneable`接口。实现这个接口，就是说这个类支持克隆。

但是，Java 语言设计者不将“允许克隆”作为每个类的默认功能的动机是什么？

我们已经存在浅拷贝的默认实现。那么为什么会有这个限制呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T15:50:03.757

考虑克隆具有嵌套属性的对象。你想递归多深？这对内存来说可能很困难，所以开发人员把它留给我们来决定。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T15:49:03.843

这是一个标记接口，让 Java 知道实现类是**有意为克隆而设计的**（与其他标记接口的使用类似）。如果您进一步阅读，您会发现以下内容：

> 按照惯例，实现此接口的类应使用公共方法**覆盖 Object.clone （受保护的）。**有关覆盖此方法的详细信息，请参阅 Object.clone()。

您需要提供自定义方法进行克隆。通过拥有 interface `Cloneable`，Java 知道您有意支持对象的克隆。通过提供您的自定义`clone`方法，您将覆盖`clone`对象的默认方法。

这样，**您可以灵活地决定(Mark)**哪些对象可以被克隆，哪些不能。如果可以克隆，那么可以达到什么级别（在对象图情况下非常有用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T15:48:40.263

许多原因阻碍了这一点，主要原因是克隆对于一般情况来说不是一个可以解决的问题，就像序列化一样。

默认情况下获得的浅拷贝在许多情况下会破坏对象的不变量，因此它作为一般的默认克隆机制不适用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T15:50:31.623

“可克隆”接口是称为“标记类”的设计模式的一部分。基本上，在 clone 方法中会引用“Cloneable”类型。当您实现可克隆接口时，这意味着您的类可以被引用为“可克隆”类型。

实际上，另一个原因是您覆盖了“clone()”方法，并以您自己的特定方式进行克隆。这意味着您认为重要的数据存在于新类中。

# sql - SQL 复合键

> ID：13670851
> 
> 赞同：2
> 
> 时间：2012-12-02T15:46:30.997
> 
> 标签：sql, compound-key

我正在尝试创建一个表，该表作为主键使用其他表中的值。我的讲座说这是一个复合键（主键+外键），但我似乎无法找到如何启动它。有人可以吗尝试解释这个概念以及如何尝试实现它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T16:09:14.407

考虑由学生和课程集组成的数据。当您将其存储在 DBMS 中时，每个学生（或课程）都会有一个关联的唯一 ID，这将被称为学生（或课程）的主键

```
students(id, name, dob)
courses(id, name, credits) 
```

要将学生与他们注册的课程相关联，您将创建一个如下所示的表。

```
student_course(student_id, course_id) 
```

要在 mysql 中实际创建它，您可以编写如下内容：-

```
CREATE TABLE student_course(student_id INT NOT NULL, 
                            course_id INT NOT NULL, 
                            PRIMARY KEY (student_id, course_id),
                            FOREIGN KEY (student_id) REFERENCES student(id), 
                            FOREIGN_KEY (course_id) REFERENCES course(id)) 
```

# git - 为什么 HEAD 提交如此命名？

> ID：13670852
> 
> 赞同：1
> 
> 时间：2012-12-02T15:46:40.147
> 
> 标签：git, version-control

我正在尝试学习 Git，但我无法想象为什么`HEAD`指针会被这样称呼。如果我知道，记住它的含义会容易得多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T15:51:07.003

在计算机科学中，*头部*通常是概念上最接近观察者的数据结构的一部分，例如链表的第一个元素。相反的是*tail*，它是最远的元素。

在 git`HEAD`中是您当前正在操作的提交，并且显然是历史图中最接近的提交。git 在这个命名中并不是唯一的；[Subversion](http://svnbook.red-bean.com/en/1.7/svn.tour.revs.specifiers.html#svn.tour.revs.keywords)和[CVS](http://cvsbook.red-bean.com/cvsbook.html#update)也使用该`HEAD`术语来表示等效概念。

# php - htaccess 仅在从另一个文件夹重定向时打开文件夹

> ID：13670853
> 
> 赞同：0
> 
> 时间：2012-12-02T15:46:47.097
> 
> 标签：php, wordpress, .htaccess

我在这里搜索了很多，找到了类似的帖子，但对我不起作用。

我有一个 wordpress 网站，出于安全原因，我想在根文件夹中创建一个名为“father”的新文件夹。并使其受密码保护，然后在用户输入密码后，它将他重定向到“wp-admin”登录。但是，任何没有去“父亲”文件夹的人都无法访问“wp-admin”文件夹。

我真的不知道 htaccess 是如何工作的，但我知道它在这方面起着重要作用。

有什么帮助吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T15:52:33.820

只需将 .htaccess/.htpasswd 文件放入您的 wp-admin 文件夹即可。如果您不知道如何创建文件，您可以使用像[这样的 htaccess 生成器...](http://www.webmaster-toolkit.com/htaccess-generator.shtml)

# java - Java 和 XML 输出

> ID：13670854
> 
> 赞同：0
> 
> 时间：2012-12-02T15:46:52.253
> 
> 标签：java, xml

我有一个关于 XML 输出的问题。我有第一个和第二个数字的扫描仪...我想准备带有表单的 xml 输出文件（例如第一个数字是 10，第二个是 15）

```
<line>
    <Point>
        <X>10</X>
    </Point>
</line>
<line>
    <Point>
         <X>11</X>
    </Point>
</line>

<line>
    <Point>
       <X>12</X>
    </Point>
</line> 
```

依此类推...直到第二个数字

```
try{

               XMLOutputFactory f = XMLOutputFactory.newInstance();
               XMLStreamWriter w = f.createXMLStreamWriter(new FileOutputStream(output));

               w.writeComment("XMLOutput");

               w.writeStartElement("line");
               w.writeStartElement("Point");
               w.writeStartElement("X");
              String pointX0 = String.valueOf(a);
               w.writeCharacters(pointX0);
              w.writeEndElement();

              w.writeEndElement();

               }
               w.writeEndElement();
               w.writeEndDocument();
               w.close();
                } catch (XMLStreamException ex) {
                    Logger.getLogger(Output.class.getName()).log(Level.SEVERE, null, ex);
                }
    } 
```

我正在为循环而苦苦挣扎，但我不知道我应该把它放在哪里......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:01:11.037

尝试使用 XStream [http://x-stream.github.io/](http://x-stream.github.io/)从 POJO 序列化您需要的 XML。

# sql - 从表中删除重复条目

> ID：13670858
> 
> 赞同：1
> 
> 时间：2012-12-02T15:47:27.043
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个如下表（使用 MS SQL Server 2008）

```
Contact1    Contact2
--------    ---------
1234567890  9087654321
9087654321  1234567890
1234567890  1234567890
9087654321  9087654321
8989898989  9898989898
9898989898  8989898989 
```

第 2 行和第 5 行的 Contact1 和 Contact2 的值分别是第 1 行和第 6 行的值的交换形式。在第 3 行和第 4 行中，这两个值也相等。

由于有几个虚假条目，我需要删除它们。结果表应如下所示 -

```
Contact1    Contact2
--------    ---------
1234567890  9087654321
8989898989  9898989898 
```

我是 SQL 的初学者，没有任何想法继续进行。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T17:51:00.717

[我从 MSDN论坛](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/3d635afa-e909-46d5-92e6-49844dccd053)得到了解决方案

```
WITH swapped_Contacts AS (
     SELECT
        CASE WHEN Contact1 <= Contact2 THEN Contact1 ELSE Contact2 END AS Contact1
        ,CASE WHEN Contact2 > Contact1 THEN Contact2 ELSE Contact1 END AS Contact2
    FROM dbo.Contacts
)
,ordered_Contacts AS (
    SELECT 
        Contact1
        , Contact2
        , ROW_NUMBER() OVER(PARTITION BY Contact1, Contact2 ORDER BY Contact1, Contact2) AS rownum
    FROM swapped_Contacts
    )
DELETE
FROM ordered_Contacts
WHERE 
rownum > 1

DELETE Contacts
FROM   Contacts C1
WHERE  Contact1 = Contact2
AND   EXISTS (SELECT *
          FROM   Contacts C2
          WHERE  C1.Contact1 IN (C2.Contact1, C2.Contact2) 
            AND  C2.Contact1 <> C2.Contact2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:05:37.603

我会这样做：

1.  将表重命名为 contacts_old（使用`sp_rename`）
2.  创建联系人表。
3.  将 Contact1 = Contact2 的记录从 contacts_old 插入到联系人。
4.  从contacts_old中删除Contact1 = Contact2的记录
5.  现在我们留下了记录
    1.  联系人记录是唯一的，没有任何交换。您可以通过使用条件与 WHERE 子句 as`LEFT INNER JOIN`对同一表执行 a 来识别此类记录。插入联系人后，您可以删除这些记录。`JOIN``c1.Contact1 = c2.Contact2 AND c1.Contact2 = c2.Contact1``c2.Contact1 IS NULL`
    2.  联系人列被交换并呈现。既然你有一些东西要开始，你可能想自己考虑一下。

# javascript - 开关/案例变量错误

> ID：13670861
> 
> 赞同：0
> 
> 时间：2012-12-02T15:47:41.767
> 
> 标签：javascript, html, switch-statement

我正在尝试获取四个文本框的输入，并根据单选复选框选项显示它。我在这里讨论了更多：

[具有多个单选按钮的表单的最有效编码样式](https://stackoverflow.com/questions/13662166/most-efficient-coding-style-for-forms-with-multiple-radio-buttons)

我在使用以下代码行时遇到问题：

```
//Gets value from input boxes  into array
var values = $('.names').map(function() { 
  if(this.value != '') return this.value; 
}).get();

//Check radio boxes
var selectedValue = $('input[name=friend]:checked').val();

//Determines array length
var length = values.length;

//if only one name
if (length==1) {
  switch(selectedValue) {
    case "na":
      values = values;
      break;
    case "van":
      values = values.join("och van");
      break;
    case "vanner":
      values = values.join("och vanner");
      break;
  }
}
alert(selectedValue); 
```

它不会将值“och van”或“och vanner”添加到变量“values”中。独立运行一切正常。即“values”返回名称，“selectedValue”返回选中的单选框，“length”返回数组中元素的数量。但是当我尝试通过 If 语句组合它并切换大小写时它不起作用。

有问题的HTML在这里：

```
 <div id="inputboxes">
      <input type="text" name="name1" id="names1" class="names" value="" placeholder="1) Name Here . . .">
      <input type="text" name="name2" id="names2" class="names" value="" placeholder="2) Name Here . . .">
      <input type="text" name="name3" id="names3" class="names" value="" placeholder="3) Name Here . . .">
      <input type="text" name="name4" id="names4" class="names" value="" placeholder="4) Name Here . . .">
    </div>
  </li>
</ul>
<ul>
  <li>
    <div id="radios1">
      <input type="radio" id="na" value="na" name="friend" class="{src:'img/n.people.png',checked:'img/n.people.c.png',hover:'/img/unchecked.png'}"  checked="checked"/> 
      <input type="radio" id="van" value="van" name="friend" class="{src:'img/o.person.png',checked:'img/o.person.c.png',hover:'/img/unchecked.png'}"  /> 
      <input type="radio" id="vanner" value="vanner" name="friend" class="{src:'img/m.people.png',checked:'img/m.people.c.png',hover:'/img/unchecked.png'}"  /> 
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:31:51.783

固定的。

在开始时定义变量，并将其替换为：

```
var och = " och ";
var van = " och vän"
var vanner =" och vänner";
var nameout; 
```

和更新的 IF 语句：

```
if (length==1)
switch(selectedValue)
 {
   case "na":
   nameout = values;
   break;
   case "van":
   nameout = values + van;
   break;
   case "vanner":
   nameout = values + vanner;
   break;

 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:27:21.977

问题是 join 没有任何要加入的元素（数组只有一个元素），因此它不会将分隔符字符串放入数组中。您需要再添加两个元素才能在它们之间实际插入一些东西。我确实注意到这没有在任何地方拼出，但我想它应该从名称中显而易见。

# java - 在一个类中设置一个值并从 Java 中的另一个类中检索（Android 应用程序）

> ID：13670862
> 
> 赞同：1
> 
> 时间：2012-12-02T15:47:43.417
> 
> 标签：java, android

当用户在应用程序启动时输入它时，我正在从我的 Main 类中设置一个 id。考虑到我将它设置在一个名为 GetSet.java 的类中，该类也有一个在被调用时返回它的方法。所以我需要一个名为 MySQLitehelper.java 的类中的第一个类的 id 集，这样我就可以根据 id 集检索数据，而不是对其进行硬编码。这将使我的应用程序动态而不是静态。这是我的代码：

*/----MainActivity.java-----/* _ _

```
public class MainActivity extends Activity {

EditText etGWid;
Button OKbtn;

public final static String EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    etGWid = (EditText)findViewById(R.id.etGWID);
    OKbtn = (Button)findViewById(R.id.OKbtn);

    final GetSet obj_getset = new GetSet();
    //MySQLitehelper db = new MySQLitehelper(null);

    final SharedPreferences app_preferences = PreferenceManager.getDefaultSharedPreferences(this);  
            // Create a shared preferences variable using the SharedPreferenceManager for storing GWids

    SharedPreferences.Editor editor = app_preferences.edit();  // We also need a shared preferences editor to handle the shared preference requests
    // Call the edit method (library function) to editor variable can edit the key, values.

    editor.putInt("47688507", 47688507);   // put in the shared preferences values of user GWids and give them a key for retrieval purposes
    editor.putInt("1234567", 1234567);
    editor.putInt("7654321", 7654321);

    editor.commit();   //commit is necessary to save the shared preferences

    OKbtn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            String gwidCheck = etGWid.getText().toString();  //get the value user enters for GWid

            if(app_preferences.contains(gwidCheck))       // this will check the stored shared preferences and compare with the value entered
            {
                Context context = getApplicationContext();
                CharSequence text = "Login Successfull";
                int duration = Toast.LENGTH_SHORT;                              //If it exists, then create a toast message for success

                //etGWid.setText("");    // make the textbox empty
                long setid = Long.parseLong(gwidCheck);   // take the string gwid and convert to long
                obj_getset.setId(setid);    // set the gwid entered

                Toast toast = Toast.makeText(context, text, duration);
                toast.show();
                intentfunction();
            } 
            else
            {
                Context context = getApplicationContext();
                CharSequence text = "Login Failed";                     // If doesnt exist, create a toast for fail
                int duration = Toast.LENGTH_SHORT;

                Toast toast = Toast.makeText(context, text, duration);
                toast.show();
            }

        }
    });
}

private void intentfunction()
{
     Intent intent = new Intent(this, SelectOptions.class);
     //editText = (EditText) findViewById(R.id.editText1);
     //editText = new EditText(this);
     etGWid.setText("");   //set the edit text to blank
    String message = "TestHello";
    intent.putExtra(EXTRA_MESSAGE, message);
    startActivity(intent);

}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

}

/*-----GetSet.java----*/

public class GetSet {

long gwid=0;

public void setId(long id)
{
    gwid = id;
}

public long getId()
{
    return gwid;
}

} 
```

/ *---MySQLitehelper.java---* /

```
public class MySQLitehelper {

//public static final String TABLE_COMMENTS = "comments";
  public static final String COLUMN_ID = "GWid";
  public static final String COLUMN_DATE = "DateGWU";
  public static final String COLUMN_LOCATION = "location";
  public static final String COLUMN_TIME = "time";

  public static final String TABLE_NAME = "UPDTable";

  private static final String DATABASE_NAME = "UPDdb_version6";
  private static final int DATABASE_VERSION = 6;

  private final Context context;
  GetSet getset = new GetSet();
  public void GetIdForGwid(GetSet get)
  {
     getset=get; 
  }

  // Database creation sql statement
  private static final String DATABASE_CREATE = "CREATE TABLE " + TABLE_NAME +
                                " (" +COLUMN_ID+ " integer," + COLUMN_DATE + " VARCHAR," +
                                COLUMN_LOCATION+" VARCHAR," +COLUMN_TIME +" VARCHAR);";

//  private static final String DATABASE_INSERT = "INSERT INTO " +TABLE_NAME +
//                                              " Values (47688507,'DEC-07-2012','MARVIN 203','20:00');";

  private static final String DATABASE_INSERT = "INSERT INTO " +TABLE_NAME +  " (" +COLUMN_ID+ " ," + COLUMN_DATE + "," +
          COLUMN_LOCATION+" ," +COLUMN_TIME +" )"  +
                          " Values (47688507,'DEC-07-2012','MARVIN 203','20:00');";

  DatabaseHelper dbhelper;
  SQLiteDatabase db;

 public MySQLitehelper(Context ctx)
  {
      this.context = ctx;
      dbhelper = new DatabaseHelper(ctx);
  }

private static class DatabaseHelper extends SQLiteOpenHelper {

     public DatabaseHelper(Context context)
     {
         super(context,DATABASE_NAME, null,DATABASE_VERSION);
     }

 @Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    db.execSQL(DATABASE_CREATE);            //execute create table
    db.execSQL(DATABASE_INSERT);            //execute insert query
    db.execSQL("INSERT INTO " +TABLE_NAME +  " (" +COLUMN_ID+ " ," + COLUMN_DATE + "," +COLUMN_LOCATION+" ," +COLUMN_TIME +" )" +" Values (47688507,'DEC-22-2012','OLD MAIN','23:00');");
    db.execSQL("INSERT INTO " +TABLE_NAME +  " (" +COLUMN_ID+ " ," + COLUMN_DATE + "," +COLUMN_LOCATION+" ," +COLUMN_TIME +" )" +" Values (1234567,'DEC-14-2012','FUNGER','12:00');");
    db.execSQL("INSERT INTO " +TABLE_NAME +  " (" +COLUMN_ID+ " ," + COLUMN_DATE + "," +COLUMN_LOCATION+" ," +COLUMN_TIME +" )" +" Values (7654321,'DEC-29-2012','GELMAN','22:00');");
    db.execSQL("INSERT INTO " +TABLE_NAME +  " (" +COLUMN_ID+ " ," + COLUMN_DATE + "," +COLUMN_LOCATION+" ," +COLUMN_TIME +" )" +" Values (47688507,'DEC-12-2012','IVORY','23:00');");
 }

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub
    Log.w(MySQLitehelper.class.getName(),
            "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
        onCreate(db);
    }
}

// open the DB
 public MySQLitehelper open() throws SQLException
 {
    System.out.println("Inside open function");
     db = dbhelper.getWritableDatabase();
    return this;
 }

 public void close()
 {
     dbhelper.close();
 }

 public void insertRecord(long gwid, String date, String location, String time)
     {
           ContentValues initialValues = new ContentValues();
          initialValues.put(COLUMN_ID, gwid);
          initialValues.put(COLUMN_DATE, date);
          initialValues.put(COLUMN_LOCATION, location);
          initialValues.put(COLUMN_TIME, time);
          db.insert(TABLE_NAME, null, initialValues);
     }

public Cursor getAllrows()      //function to get all rows in the DB. Testing initially.
{

     Cursor cur = db.rawQuery("SELECT * FROM "+TABLE_NAME, null);
     return cur;
}

public Cursor getRecord() throws SQLException
{
        Cursor mCursor =
        db.query(true, TABLE_NAME, new String[] {COLUMN_ID,
        COLUMN_DATE, COLUMN_LOCATION, COLUMN_TIME},
        COLUMN_ID + "= 47688507", null, null, null, null, null);   //HARDCODED. Please make it dynamic
        if (mCursor != null) 
        {
            mCursor.moveToFirst();
        }
 return mCursor;
 }

} 
```

我正在底部的上述类中的 getRecord() 方法中检索它，而不是`COLUMN_ID + "= 47688507`我希望从`GetSet`类（`getId`方法）中获取设置值并将其替换为`47688507`. 有什么建议么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T19:54:10.640

阅读“单例模式”，这是一种创建持久对象以保存要从一个地方传递到另一个地方的信息的方法。

但是，请记住，一旦`onPause()`在您的 Activity 上被调用，系统就可以完全销毁您的应用程序，并在以后重建它。这意味着即使是单例类也不能保证在您的应用程序重新启动时您的数据会在那里。您必须始终准备好在 onCreate() 方法中从持久存储中恢复您的状态。

下面是我如何使用单例类来实现全局首选项持有者： 简而言之，任何有 Context 的地方，都可以调用 Prefs.getPrefs() 来获取首选项对象。在第一次调用时，它将从持久存储中读取首选项。在所有后续调用中，它只返回指向已加载对象的指针。如果您的应用程序被系统杀死并重新启动，getPrefs() 会根据需要无缝地重新读取首选项。

```
/**
 * This is a singleton class to hold preferences.
 */
public class Prefs {
    private static volatile Prefs instance = null;

    // The values held by this class
    String identity = null;
    String apiUrl = "http://example.com/cgi-bin/api";
    int interval = 3600;    // when there's no activity

    /**
     * Return the single instance of this class, creating it
     * if necessary. This method is thread-safe.
     */
    public static Prefs getPrefs(Context ctx) {
        if (instance == null) {
            synchronized(Prefs.class) {
                if (instance == null) {
                    instance = new Prefs();
                    instance.readPrefs(ctx);
                }
            }
        }
        return instance;
    }

    /**
     * Re-read all preferences (you never need to call this explicitly)
     */
    private void readPrefs(Context ctx) {
        try {
            SharedPreferences sp =
                PreferenceManager.getDefaultSharedPreferences(ctx);
            identity = sp.getString("identity", identity);
            apiUrl = sp.getString("apiUrl", apiUrl);
            interval = sp.getInt("interval", interval);
        } catch (Exception e) {
            Log.e(TAG, "exception reading preferences: " + e, e);
            // TODO: report it
        }
    }

    /**
     * Save preferences; you can call this from onPause()
     */
    public void savePrefs(Context ctx) {
        try {
            SharedPreferences.Editor sp =
              PreferenceManager.getDefaultSharedPreferences(ctx).edit();
            sp.putString("identity", identity);
            sp.putString("apiUrl", apiUrl);
            sp.putInt("interval", interval);
            sp.commit();
        } catch (Exception e) {
            Log.e(TAG, "exception reading preferences: " + e, e);
            // TODO: report it
        }
    }

    /**
     * Save preferences to a bundle. You don't really need to implement
     * this, but it can make start-up go faster.
     * Call this from onSaveInstanceState()
     */
    public void onSaveInstanceState(Bundle state) {
        state.putString("identity", identity);
        state.putString("apiUrl", apiUrl);
        state.putInt("interval", interval);
    }

    /**
     * Recall preferences from a bundle. You don't really need to implement
     * this, but it can make start-up go faster.
     * Call this from onCreate()
     */
    public void restoreInstanceState(Bundle state) {
        identity = state.getString("identity");
        apiUrl = state.getString("apiUrl");
        interval = state.getInt("interval");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T16:03:37.457

*   使用全局单例来存储和检索[数据](http://www.vogella.com/articles/DesignPatternSingleton/article.html)。执行此操作时，请确保单例不包含对您的活动或上下文的引用。
*   由于 mysqlitehelper 具有对上下文的引用，因此您还可以从 SharedPreferences 中检索持久数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T16:01:01.430

我认为，您应该能够使用您的实例变量`obj_getset`来设置 id

`obj_getset.setid(mCursor.COLUMN_ID)`

在您的`getRecord`函数中，然后在需要时以相同的方式检索它

`obj_getset.getID()`

# jquery - NodeJS + jsDom 同步调用

> ID：13670863
> 
> 赞同：1
> 
> 时间：2012-12-02T15:47:44.737
> 
> 标签：jquery, node.js, asynchronous, web

我有一个非常棘手的任务，但是 NodeJS 的新手。

所以我需要遍历 URL 数组，从数组中获取每个页面，通过 jsdom+jquery 传递它并在数组末尾添加新找到的 URL。

乍一看，任务非常简单，但由于 NodeJS 的异步，它变成了噩梦。

现在我有类似的代码（为了更好地理解它被简化了）

```
var jsdom = require("jsdom");
var fs = require("fs");
var jquery = fs.readFileSync("./jquery.js").toString();

var fields = ['http://some.url/page.html']

for(var b=0, len = fields.length;b<len;b++){

jsdom.env({
      html: fields[b],
      src: [jquery],
      done: function (errors, window) {
            var $ = window.$;
            $("div.pager a").each(function() {
                //Push new finded hyperlinks in array
              fields.push($(this).attr('href'));
            });

        }
    });
    //recalculate actual length of array to make more loop
    len=fields.length;
} 
```

并且由于 NodeJS 的概念，它的构造肯定是行不通的。有人可以建议如何将它变成现实生活吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-26T00:11:27.097

您应该为此使用 async.eachSeries()。当您有需要在循环中运行的异步代码时，您应该始终使用异步库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T19:50:44.093

我会明确建议你花一些时间来学习异步行为，没有它 node.js 没有任何意义。您粘贴的代码错误有几个原因。

请看一下我对链接爬虫的实现，对于我做的宠物项目。锄头有帮助。

[https://github.com/alexanderbeletsky/freeze/blob/master/src/crawler.js](https://github.com/alexanderbeletsky/freeze/blob/master/src/crawler.js)

# php - 使用 PDO API 防止 SQL 注入？

> ID：13670867
> 
> 赞同：4
> 
> 时间：2012-12-02T15:48:27.057
> 
> 标签：php, pdo, sql-injection

> **可能重复：**
> [PDO 准备好的语句是否足以防止 SQL 注入？](https://stackoverflow.com/questions/134099/are-pdo-prepared-statements-sufficient-to-prevent-sql-injection)

我对推出一个我已经工作了几天的新 API 的主要关注是安全性。

我是 PDO 用法的初学者，但知道主要结构。但我不知道如何保护查询免受 SQLInjection 的影响。

我的代码如下：

```
<?php
    $Start = new Db();
    class Db 
    {
        private $dbh = null;

        public function __construct()
        {
            $this->dbh = new PDO('mysql:host=localhost;dbname=pdo', 'root', 'xxxxx');
        }

        public function PDOFetch($Var)
        {
            $sth = $this->dbh->prepare("$Var");
            $sth->execute();
            $result = $sth->fetchAll();
            return $result; 
        }

        public function PDONumb ($Var)
        {
            $sth = $this->dbh->prepare("$Var");
            $sth->execute();
            $count = $sth->rowCount();
            return $count;
        }

        public function PDODel ($Var)
        {
            $Delete = $this->dbh->exec("$Var");
            return $Delete;
        }

        public function PDOQuery ($Var)
        {
            $Query = $this->dbh->query("$Var");
            return $Query;
        }
    }
?> 
```

我将如何防止 SQL 注入和其他漏洞？

编辑：

例如，传递到 API 的查询是从“index.php”页面完成的。

一行是：

```
 $Num = $Start->PDONumb("SELECT * FROM news"); 
```

但后来，当我用这个掩盖了我的踪迹时。我想更高级地使用它，所以它会传递用户定义的变量（因此是 SQL 注入问题）

但目前，通过的查询是由管理员定义的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T15:55:46.483

如果没有看到您传入的 SQL，我们就无法判断。如果您正在使用不受信任的数据创建不安全的 SQL 语句，那么它们是否在 PDO 中执行并不重要。您仍然可以接受 SQL 注入。

例如，如果您`$userid`从 Web 获取并构建：

```
$sql = "SELECT * FROM users WHERE userid=$userid"; 
```

该 SQL 语句对 SQL 注入开放，因为如果值为`$userid`，`0; DROP TABLE users;`那么您将创建的 SQL 将是

```
SELECT * FROM users WHERE userid=0; DROP TABLE users; 
```

不管你是否通过 PDO 执行它都没有关系：你仍然在执行一个坏人发给你的代码。

要正确使用 PDO，您需要[绑定您的参数](http://php.net/manual/en/pdostatement.bindparam.php)。

* * *

与您的问题无关，但新手经常遇到的重要一点：没有必要在您的单个变量周围加上双引号。你的代码

```
$Delete = $this->dbh->exec("$Var"); 
```

最好写成

```
$Delete = $this->dbh->exec($Var); 
```

# java - 如果数据库查询低于 100 毫秒，我应该线程吗

> ID：13670868
> 
> 赞同：0
> 
> 时间：2012-12-02T15:48:34.287
> 
> 标签：java, android, database, performance, android-asynctask

我正在编写一个需要从数据库中写入和检索数据的应用程序。我想知道我是否应该在线程/Asynctask 中运行查询，因为它需要不到 100 毫秒，事实上，一个调用通常需要大约 30-70 毫秒（包括解析游标）。此调用仅从 2 个（不同的）数据库中的每一个中检索一行。如果我添加一个异步任务，时间会达到 120-170 毫秒（我猜是开销）。在这么短的时间内使用线程/异步任务是否值得（或更好的做法）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T15:52:24.363

在 AsyncTask 上运行查询是个好习惯。一开始一切都很顺利，但是当数据库变大时，查询可能会超过第二次。然后您应该能够为用户显示等待对话框，而不仅仅是冻结 UI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T16:19:57.923

您想在单独的线程中运行数据库查询的原因是因为数据库是您无法完全控制的外部依赖项（在生产代码中）。这意味着即使您的查询*通常*在 100 毫秒内愉快地运行，有时会出现问题，您需要一种方法来处理查询甚至根本不返回的情况。通过将此功能封装在单独的线程中，您可以更好地控制出现问题时发生的情况。例如，如果数据库有问题，可以设置一个超时时间，在此之后您的代码可以假设发生错误并重试或终止挂起的查询线程，而不会导致整个程序被阻塞并需要重新启动接着说。有几种技术可以做我刚才所说的，所以我不能太具体，因为我不知道你的确切情况涉及什么以及可能的取舍。

Writing dependable multi-threaded code is hard work. I recommend you take the time to read and understand Goetz's book **Java Concurrency in Practice** to help you solve your concurrency problems.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T15:55:23.200

任何会消耗时间的事情都不应该在主 UI 线程上完成。始终建议在异步任务中执行数据库操作。主要原因之一是您的操作时间指标会因手机配置和其他参数而异。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T15:53:10.950

我认为当您需要实现并行性时，多线程是必要的。如果您的代码连续运行，我的意思是从头到尾一个接一个，那么您不需要线程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T15:53:12.843

如果您依赖于查询输出的结果，那么无论如何您都必须等待结果。

为了获得更好的数据库性能，请考虑使用**Prepared Statement Caching**（使用参数化的 Prepared statements）

这应该会增加一些性能。

# objective-c - 让 NSTimer 调用方法的问题

> ID：13670875
> 
> 赞同：2
> 
> 时间：2012-12-02T15:49:21.657
> 
> 标签：objective-c, nstimer

我只是在学习使用 Objective-C 并尝试使用`NSTimer`with scheduledTime Interval 但没有运气。我正在使用的代码如下所示：

```
#import <Foundation/Foundation.h>
#import "timerNumber1.h"

int main(int argc, const char * argv[])
{
@autoreleasepool {

    NSTimer *timerNumber1;

    NSInteger counter=0;

    while (counter<5){

        timerNumber1 = [NSTimer scheduledTimerWithTimeInterval:1 target:timerNumber1 selector: @selector(updateTimer:) userInfo:nil repeats:YES];

    NSLog(@"Hello, World!");
        counter++;
    }
}
return 0;
} 
```

timerNumber1 标头如下所示

```
#import <Foundation/Foundation.h>

@interface timerNumber1 : NSObject
-(void) updateTimer;

@end 
```

和实施是

```
#import "timerNumber1.h"

@implementation timerNumber1

-(void) updateTimer{
NSLog(@"Timer Updated!");

}
@end 
```

该方法似乎永远不会触发，我也从未看到 Timer Updated。
我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:21:37.087

该变量`timerNumber1`尚未初始化（可能`nil`），因此该`target`参数将无效。该`updateTimer`方法将在`nil`对象上调用，这在 Objective-C 中默默地失败。

您需要先创建对象，然后才能照常进行。

旁注：您有一个与变量名称完全相同的类，这有点不寻常。这通常不是一个好主意，至少为了可读性。此外，我不是 100% 确定您需要为每次重复创建一个计时器，因为您有`repeats:YES`. 但我会让你判断你想用你的代码做什么。:-)

编辑：刚刚也注意到了别的东西，选择器可能有点偏离——`:`选择器中有一个，但`updateTimer`不带任何参数。我认为在这种情况下不应该有冒号。

所以，试试这样的事情：

```
int main(int argc, const char * argv[])
{
    @autoreleasepool {

        NSTimer *timer;
        timerNumber1 *timerNumber1Object = [[timerNumber1 alloc] init];

        NSInteger counter=0;

        while (counter<5){
            timer = [NSTimer scheduledTimerWithTimeInterval:1 target:timerNumber1Object selector: @selector(updateTimer) userInfo:nil repeats:YES];

            NSLog(@"Hello, World!");
            counter++;
        }
    }
    return 0;
} 
```

# javascript - jQuery Cycle：延迟“点击暂停”

> ID：13670876
> 
> 赞同：0
> 
> 时间：2012-12-02T15:49:27.550
> 
> 标签：javascript, jquery, jquery-cycle

在我的幻灯片中，如果单击幻灯片，它将暂停。但我想禁用点击暂停功能，直到**第**一个幻灯片转换（标题幻灯片）之后。现在，只要 DOM 准备好，“#slideshow” div 就可以点击了；对我来说太早了。

我现在拥有的精简版：

```
$(document).ready(function(){

  $('#slideshow img').toggle(function() {
        $('#slideshow').cycle('pause');
  }, function() {
        $('#slideshow').cycle('resume');
  });

  $('#slideshow').cycle({
        /*options*/
  });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:21:36.377

您可以使用. `.toggle`_ `.click`_`.toggle``after``.cycle`

# c# - 在网络中共享 Access 数据库并从多个 C# 应用程序连接它

> ID：13670877
> 
> 赞同：0
> 
> 时间：2012-12-02T15:49:31.947
> 
> 标签：c#, ms-access, sharing

我想在本地网络中共享一个 Access 数据库（通过在 Windows 中共享一个包含该数据库的文件夹）。

我想编写一个打开共享数据库然后选择、更新和删除一些记录的应用程序（C# windows 窗体）。

我的应用程序的几个实例将在网络中运行（来自不同的计算机），并且所有实例都打开同一个数据库。

是否可以从网络中的不同计算机更改 Access 数据库？

**注意**：我不想使用 SQL SERVER 或 SQL SERVER EXPRESS，因为网络中的所有计算机都太旧且安装 SQL SERVER 太慢。安装和支持 SQL SERVER 或 SQL SERVER EXPRESS 也很困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:18:13.960

首先必须添加`Mode=Share Deny None`（这将以完全共享模式打开您的数据库文件）到连接字符串以访问多个用户，之后您可以通过两种方式执行此操作：

1.  与服务器中的数据库共享原始应用程序，并将其文件夹添加为其他系统中的虚拟驱动器。

2.  在每个系统中制作 3 个副本并将数据库放入服务器，共享并将连接字符串更改为服务器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-27T14:44:52.423

如果您使用的是 ODCB 驱动程序，您可以简单地提供网络上的共享文件夹并让它使用您的数据库，您可以在所有系统上运行它

# javascript - 数学随机误差

> ID：13670878
> 
> 赞同：0
> 
> 时间：2012-12-02T15:49:32.110
> 
> 标签：javascript

当我运行以下代码时，会发生此错误：

> 糟糕，再试一次。您是否使用 Math.random() 来获取随机数？

使用：

> 声明一个变量并使其等于 Math.random()，该变量将等于 0 到 1 之间的数字

```
var userChoice = prompt("Do you choose rock,paper or scissors ?");
var computerChoice = Math.random();

console.log (computerChoice);

if (computerChoice < 0.29) {
    computerChoice = 'rock';
} else if (computerChoice > 0.30 && computerChoice < 0.60) {
    computerChoice = 'paper';
} else {
    computerChoice = 'scissors';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T01:31:38.070

我正在寻找完全不同的东西，偶然发现了这个问题。

OP 指的是 Codecademy 上的 Build Rock Paper Scissors 练习 2.4。

我相信他正在寻找的代码是：

```
var userChoice = prompt("Do you choose rock, paper or scissors?");
var computerChoice = Math.random();
if (computerChoice <0.34){
    computerChoice = "rock";
}else if(computerChoice <=0.67){
    computerChoice = "paper";
}else{
    computerChoice = "scissors";
}
var compare = function(choice1, choice2){
    if (choice1 == choice2){
        return("The result is a tie!");
    }
    if (choice1 == "rock"){
        if (choice2 == "paper"){
        return("paper wins");
    } else {
        return("rock wins");
    }
    }
    if (choice1 == "paper"){
        if (choice2 == "rock"){
        return("paper wins");
    } else {
        return("scissors wins");
    }
    }
    if (choice1 == "scissors"){
        if (choice2 == "rock"){
            return("rock wins");
        } else {
            return("scissors wins");
        }
    }
};
compare (userChoice, computerChoice); 
```

我敢肯定，OP 早就在 CC 论坛上找到了他的课程的答案。但我想我会回答它，以防其他人上课，来到这里，看到帖子并需要答案。

我相信OP问题的原始来源来自： [Link to Task](http://www.codecademy.com/courses/javascript-beginner-en-Bthev-mskY8/1#!/exercises/3)

# internet-explorer - IE 不在 DIV 中使用外部 CSS

> ID：13670881
> 
> 赞同：0
> 
> 时间：2012-12-02T15:49:36.320
> 
> 标签：internet-explorer, stylesheet

如果以前有人问过这个问题 - 请原谅我，我找不到。

我正在使用 javascript 将 HTML 文档 AJAXing 到 div。这段代码是一个简化。

Chrome-23 和 FF-8 使用 ietest.css 文件呈现 HTML，但 IE-9 没有。使用 iframe 而不是 div 会很困难。

欢迎任何建议。

谢谢，约翰在多伦多

```
<!--
Style sheet contents:
p.bu1 {color: Blue; font-size:2em; font-weight:bold;}
p.rd1 {color: Red;  font-size:2em; font-weight:bold;}
-->

<html>
<head>
<script>
function write_doc()
{
  document.getElementById('div').innerHTML = "<link rel='stylesheet' type='text/css' href='ietest.css?v=1'>\
   <p class='bu1'>BLUE</p><p class='rd1'>RED</p>";
}
</script>
</head>
<body>
<div id='div' onclick='write_doc()'>Click Me</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:15:51.740

谢谢蒂姆，

我找到了解决方法。

我在查询页面中加载了一个 CSS 文件（涵盖了大多数引用的样式），然后在将其发送到 div 之前，在 HTML 字符串中添加对其类之一的引用。

例如

* * *

在 CSS 文件中： ... span.ie_dummy {font-size: 0.1em;} ...

脚本：

var archdoc = "<span class='ie_dummy'> </span>" + xmlhttp.responseText;

* * *

（  必须使用，空格字符不起作用。）

这需要我合并存档中的所有 CSS 文件并消除任何歧义。我很想给 IE 用户留下无样式的文本。也许他们会切换浏览器。

# 3d - 仅当鼠标在画布上时才允许鼠标控制 three.js 场景

> ID：13670886
> 
> 赞同：12
> 
> 时间：2012-12-02T15:49:42.763
> 
> 标签：3d, three.js

three.js 画布是一个 500 x 500 的正方形，位于较大的网页内，包含其他内容，我需要鼠标控制相机（用于围绕对象缩放和旋转），只有当鼠标位于 500 x 500 正方形内时才会发生。

此外，我无法滚动网页，但当我们将鼠标事件侦听器隔离到 500 x 500 画布时，这可能会得到解决。

当前代码：

```
<!DOCTYPE html>
<html>
<head> 
   <style>
    div         { 
            position:relative;
            left:100px;           
            top:100px;
            background-color: #eeeeee;
            border:1px solid black;             
            width:500px;
            height:500px;
                }

    canvas      {
            width:500px;
            height:500px;
                }

   </style> 
</head>     
<body> 

    <script src="https://raw.github.com/mrdoob/three.js/master/build/three.min.js"></script>

    <script src="https://raw.github.com/mrdoob/three.js/master/examples/js/loaders/STLLoader.js"></script>

    <script src="https://raw.github.com/mrdoob/three.js/master/examples/js/controls/TrackballControls.js"></script>

    <script>
        var container, camera, scene, renderer, controls;

        init();
        animate();

        function init() {

            container = document.createElement( 'div' );
            document.body.appendChild( container );

            var width = container.clientWidth;
            var height = container.clientHeight;

            camera = new THREE.PerspectiveCamera( 10 , width / height , .1 , 10000 );

            camera.position.set( 0, 0, 10);

            scene = new THREE.Scene();

            controls = new THREE.TrackballControls( camera ); // mouse control
            controls.addEventListener( 'change', render );    // mouse control

            // object

            var loader = new THREE.STLLoader();
            loader.addEventListener( 'load', function ( event ) {

                var geometry = event.content;

                var material = new THREE.MeshLambertMaterial( { ambient: 0xff5533, color: 0xff5533 } );

                var mesh = new THREE.Mesh( geometry, material );

                scene.add( mesh );

            } );

            loader.load( 'slotted_disk.stl' ); // from https://raw.github.com/mrdoob/three.js/master/examples/models/stl/slotted_disk.stl

            // lights

            scene.add( new THREE.AmbientLight( 0x222222 ) );

            var directionalLight = new THREE.DirectionalLight( 0xffffff, 1 );
            directionalLight.position = camera.position;
            scene.add( directionalLight );

            // renderer

            renderer = new THREE.WebGLRenderer( { antialias: true } );
            renderer.setSize( width , height );
            container.appendChild( renderer.domElement );

            window.addEventListener( 'resize', onWindowResize, false );

        }

        function addLight( x, y, z, color, intensity ) {

            var directionalLight = new THREE.DirectionalLight( color, intensity );
            directionalLight.position.set( x, y, z )
            scene.add( directionalLight );

        }

       function onWindowResize() {   

            camera.aspect = width / height;
            camera.updateProjectionMatrix();

            renderer.setSize( width, height );
        }

        function animate() {

            requestAnimationFrame( animate );
    controls.update();
            render();

        }

       function render() {

           camera.lookAt( scene.position );
           renderer.render( scene, camera );

       }

    </script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-02T16:26:19.300

大多数控件允许您指定将事件侦听器添加到哪个 DOM 节点。事件处理程序默认添加到文档中，但这应该将鼠标处理限制在您的容器元素中：

```
controls = new THREE.TrackballControls( camera , container); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-15T13:10:41.913

建议的答案对我不起作用，但这确实有效。希望它可以帮助某人！

```
controls = new THREE.TrackballControls(camera, renderer.domElement); 
```

# ios - Xcode 快照 - 放弃更改

> ID：13670894
> 
> 赞同：0
> 
> 时间：2012-12-02T15:50:45.083
> 
> 标签：ios, iphone, xcode4.5, snapshot

我想知道为什么在恢复快照期间的每个更改都显示为灰色以便丢弃。我想将我的项目恢复到以前的快照，但保留我的一些新更改（因此它们出现在旧项目中）。

有人知道吗？

# android - 如何检查数据库android中是否存在联系人

> ID：13670897
> 
> 赞同：3
> 
> 时间：2012-12-02T15:50:48.283
> 
> 标签：android, android-contentprovider, android-sqlite

我如何检查 android 数据库中是否存在特定联系人以将其添加到数据库中，如果我检查联系人姓名可能存在另一个同名联系人的问题，所以任何人都可以帮助我，我的代码是：

```
String where = ContactsContract.RawContacts.DISPLAY_NAME_PRIMARY+" = ? AND "+
               ContactsContract.RawContacts.ACCOUNT_TYPE + " = ? AND "+ 
               ContactsContract.RawContacts.ACCOUNT_NAME+" = ?";
String[] whereArg = new String[] {displayName, AccountType, AccountName};

Cursor SameName = cResolver.query(ContactsContract.RawContacts.CONTENT_URI, null, where, whereArg,null);

if (SameName == null || SameName.getCount() == 0) {
                    // the addContact method
                }else {

                    // do nothing, the contact is exsist

                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-09T06:13:07.297

它很简单，只需执行一个查询即可

```
String query ="SELECT * FROM " + TABLE_NAME + " WHERE displayName " + " = whateverNameYouWantToCheckFor" ; 

/*To avoid confusions of different contacts having the same name, extended the search criteria, by including other fields during the query.*/

Cursor c = cResolver.rawQuery(query,null);

int duplicate = c.getCount(); // If there is a row containing the searched name then the count of the cursor will not be 0.

if(duplicate !=0)
{
  //Code to do whatever you want when the name exists already.
}
else
{
  //Code to do whatever you want when the name does not exist.
} 
```

希望能帮助到你...

# php - PHP MySQL 语句 - "select as" 和 "where"

> ID：13670911
> 
> 赞同：0
> 
> 时间：2012-12-02T15:52:35.947
> 
> 标签：php, mysql, select, printf

我有以下 SQL 语句，它从数据库中选择公司（带有存储的 lat/lng）并显示离客户位置最近的 5 个位置。这是完美的工作：

> $query = sprintf("SELECT company_name、地址、电话、传真、contact_email、网站、url、纬度、经度、(1.609344 * 3959 * acos( cos( radians('".$center_lat."') ) * cos( radians ( 纬度 ) ) * cos( 弧度( 经度 ) - 弧度('".$center_lng."') ) + sin( 弧度('".$center_lat."') ) * sin( 弧度(纬度) ) ) ) AS distance FROM cmsms_module_compdir_companies WHERE status='published' AND latitude!='' AND longitude!='' ORDER BY distance limit 5 ",
> mysql_real_escape_string($center_lat),
> mysql_real_escape_string($center_lng),
> mysql_real_escape_string($center_lat));

但是，我想将结果限制在距离客户位置 X 距离内的商店——比如 50 公里。我想我可以在下面用粗体添加一点：

> $query = sprintf("SELECT company_name、地址、电话、传真、contact_email、网站、url、纬度、经度、(1.609344 * 3959 * acos( cos( radians('".$center_lat."') ) * cos( radians ( 纬度 ) ) * cos( 弧度( 经度 ) - 弧度('".$center_lng."') ) + sin( 弧度('".$center_lat."') ) * sin( 弧度(纬度) ) ) ) AS distance FROM cmsms_module_compdir_companies WHERE status='published' AND latitude!='' AND longitude!='' **AND distance<'50'** ORDER BY distance limit 5", mysql_real_escape_string($center_lat),
> mysql_real_escape_string($center_lng),
> mysql_real_escape_string($center_lat ));

...但这根本不返回任何结果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T16:00:12.177

您不能 `distance`在`where`条件中使用计算值。

请使用`having`

```
where ....
having distance < 50 
```

顺便说一句：距离的单位是公里？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:00:49.237

您不能在`WHERE`子句中使用列别名。

所以你应该使用

```
 WHERE (1.609344 * 3959 * acos( cos( radians('".$center_lat."') ) * cos( radians( latitude ) ) * cos( radians( longitude ) - radians('".$center_lng."') ) + sin( radians('".$center_lat."') ) * sin( radians( latitude ) ) ) ) < 50 
```

或者添加一个查询选择作为表（未测试，请耐心等待）

```
SELECT tmpt.distance, company_name, address, telephone, fax, contact_email, website, url, latitude, longitude, 
   FROM (SELECT *your expression* FROM table_name) AS tmpt, 
   cmsms_module_compdir_companies
   WHERE  status='published' AND latitude!='' AND longitude!='' AND distance<'50' ORDER BY distance limit 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T16:05:38.543

您只能在`ORDER BY`,`GROUP BY`和 in`HAVING`子句中使用别名。`HAVING`在您的查询中使用`distance` 像这样使用您的代码：

```
$query = sprintf("SELECT company_name, address, telephone, fax, contact_email, website, url, latitude, longitude, (1.609344 * 3959 * acos( cos( radians('".$center_lat."') ) * cos( radians( latitude ) ) * cos( radians( longitude ) - radians('".$center_lng."') ) + sin( radians('".$center_lat."') ) * sin( radians( latitude ) ) ) ) AS distance FROM cmsms_module_compdir_companies WHERE status='published' AND latitude!='' AND longitude!='' HAVING  distance<50 ORDER BY distance limit 5 ", mysql_real_escape_string($center_lat),
    mysql_real_escape_string($center_lng),
    mysql_real_escape_string($center_lat)); 
```

# python - 无法导入 pygame.font

> ID：13670914
> 
> 赞同：1
> 
> 时间：2012-12-02T15:52:55.087
> 
> 标签：python, sdl, pygame, sdl-ttf

我的操作系统是 OSX 10.8（山狮），我使用的是 python 2.7.3。我以为我已经成功安装了pygame。不幸的是，我错了。我*可以*导入 pygame，但是导入 pygame.font 时出现问题

```
>>> import pygame
>>> import pygame.font
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
ImportError: dlopen(/usr/local/lib/python2.7/site-packages/pygame/font.so, 2): Symbol not found: _TTF_CloseFont
Referenced from: /usr/local/lib/python2.7/site-packages/pygame/font.so
Expected in: flat namespace
in /usr/local/lib/python2.7/site-packages/pygame/font.so 
```

我猜这是框架 SDL_ttf 的问题，但我相信我已经成功安装了这个框架。我按照[这个说明](http://techjotting.blogspot.tw/2012/11/install-pygame-on-mac-os-x-108-mountain.html)安装了pygame，这是运行的结果`sudo python config.py`

```
Hunting dependencies...
Framework SDL found
Framework SDL_ttf found
Framework SDL_image found
Framework SDL_mixer found
Framework smpeg not found
PNG     : found
JPEG    : found
SCRAP   : not found
PORTMIDI: not found
Framework CoreMidi found 
```

我应该怎么做才能导入 pygame.font？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T07:45:13.787

我无法弄清楚这个问题的解决方案，但我有另一种方法可以避免它。

而不是用我在问题中提到的方式安装pygame，我决定使用下面的方式来安装它。幸运的是，现在一切正常。我也强烈推荐想要使用以下方法安装 pygame 的人。

1.从python.org安装python：http: [//www.python.org/ftp/python/2.7.3/python-2.7.3-macosx10.6.dmg](http://www.python.org/ftp/python/2.7.3/python-2.7.3-macosx10.6.dmg)

**pygame需要这个版本的python。您必须安装此版本，但其他任何版本！** 此 .dmg 文件将在以下路径中安装 python：`/Library/Frameworks/Python.framework/Versions/2.7/`

如果没有问题，.dmg 文件会自动将此路径添加到您的 .bash_profile 中。如果它不适合您，只需编辑您的 .bash_profile 并向其中添加以下行：

```
PATH="/Library/Frameworks/Python.framework/Versions/2.7/bin:${PATH}"
export PATH 
```

打开一个新的 bash，并使用它`which python`来检查您正在使用的 python 版本。如果您使用的版本是上述版本，则可以执行第 2 步。

2.从pygame.org下载pygame1.9.1：http://pygame.org/ftp/pygame-1.9.1release-python.org-32bit-py2.7-macosx10.3.dmg[并](http://pygame.org/ftp/pygame-1.9.1release-python.org-32bit-py2.7-macosx10.3.dmg)安装。

3\. pygame 只支持 32 位，这意味着你必须用 32 位 python 运行你的 pygame。幸运的是，使用 32 位 python 很容易：`python2.7-32 your_pygame.py`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T21:47:09.253

您可以导入 pygame 但不能导入 pygame.font，这很奇怪。但是，您不必单独导入 pygame.font。导入 pygame 时应该会自动导入。只是不要导入 pygame.font，你应该没问题。

# java - 使用 SingleClientConnManager 和 AsyncTask 时出错

> ID：13670915
> 
> 赞同：0
> 
> 时间：2012-12-02T15:52:59.500
> 
> 标签：java, android, eclipse

我对android编程很陌生，而且我已经被这段代码困住了好几天了。我得到的错误是“SingleClientConnManager 的使用无效：仍然分配了连接。” - 我理解为什么会发生这种情况，但不知道如何解决它。我正在使用的代码：

```
protected class loader extends AsyncTask<String, Void, String> {

    protected void onPreExecute()
    {
        nameValuePairs = new ArrayList<NameValuePair>(1);
        nameValuePairs.add(new BasicNameValuePair("username_in",username.getText().toString().trim()));
        nameValuePairs.add(new BasicNameValuePair("password_in",password.getText().toString().trim()));
        tv.setText("Started onPreExecute");

    }

    @Override
    protected String doInBackground(String... params) {

        try {
            httpclient = new DefaultHttpClient();
            httppost = new HttpPost("http://www.myurl.com/phplogin.php");

            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            response=httpclient.execute(httppost);

            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            final String response = httpclient.execute(httppost, responseHandler);

            //Toast.makeText(MainActivity.this,response, Toast.LENGTH_LONG).show();
            if(response.equalsIgnoreCase("User Found"))
            {
                httppost.getEntity().consumeContent();
                //startActivity(new Intent("com.example.obligatorisk.BROWSER"));
            }
        }
        catch(IOException e){
            e.printStackTrace();
        }
        return null;
    }

    protected void onPostExecute(String result)
    {
        tv.setText("Reached onPostExecute");
    }
    // TODO Auto-generated method stub      
} 
```

完整的错误日志：

```
10-18 14:30:52.134: W/SingleClientConnManager(3940): Invalid use of SingleClientConnManager: connection still allocated.
10-18 14:30:52.134: W/SingleClientConnManager(3940): Make sure to release the connection before allocating another one.
10-18 14:30:52.414: W/System.err(3940): org.apache.http.client.HttpResponseException: Internal Server Error
10-18 14:30:52.414: W/System.err(3940):     at org.apache.http.impl.client.BasicResponseHandler.handleResponse(BasicResponseHandler.java:71)
10-18 14:30:52.424: W/System.err(3940):     at org.apache.http.impl.client.BasicResponseHandler.handleResponse(BasicResponseHandler.java:59)
10-18 14:30:52.424: W/System.err(3940):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:657)
10-18 14:30:52.424: W/System.err(3940):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:627)
10-18 14:30:52.424: W/System.err(3940):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:616)
10-18 14:30:52.424: W/System.err(3940):     at com.example.obligatorisk.MainActivity$loader.doInBackground(MainActivity.java:113)
10-18 14:30:52.424: W/System.err(3940):     at com.example.obligatorisk.MainActivity$loader.doInBackground(MainActivity.java:1)
10-18 14:30:52.424: W/System.err(3940):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
10-18 14:30:52.434: W/System.err(3940):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
10-18 14:30:52.434: W/System.err(3940):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
10-18 14:30:52.434: W/System.err(3940):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
10-18 14:30:52.443: W/System.err(3940):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
10-18 14:30:52.443: W/System.err(3940):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
10-18 14:30:52.443: W/System.err(3940):     at java.lang.Thread.run(Thread.java:856) 
```

该项目背后的想法是为应用程序制作登录功能。

我一直试图在网上寻找解决方案和帮助，但无论我尝试什么，我都无法弄清楚。我真的希望有人会花时间在这里帮助我。如果您需要有关代码、错误等的更多信息，请告诉我，我会添加。

谢谢你，也感谢之前帮助过我的每一个人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:22:39.307

`httppost.getEntity().consumeContent();`如果响应等于“用户找到”，您只会这样做。无论如何，您都必须完全消费内容。将该方法调用移到条件之外。

```
 ResponseHandler<String> responseHandler = new BasicResponseHandler();
    final String response = httpclient.execute(httppost, responseHandler);

    //Toast.makeText(MainActivity.this,response, Toast.LENGTH_LONG).show();
    if(response.equalsIgnoreCase("User Found"))
    {
        //startActivity(new Intent("com.example.obligatorisk.BROWSER"));
    }
    httppost.getEntity().consumeContent(); 
```

# objective-c - Objective-c：在基类上调用 [self message] 正在调用后代方法

> ID：13670919
> 
> 赞同：4
> 
> 时间：2012-12-02T15:53:16.630
> 
> 标签：objective-c, inheritance, superclass

我刚开始学习这个，很抱歉，如果这有一些我仍然无法掌握的明显解决方案。

我有这两个类：

```
@implementation Person
-(void)saySomething:(NSString*) something {
    NSLog(@"%@",something);
}
-(void)yellSomething:(NSString*) something {
    [self saySomething:[something uppercaseString]];
}
@end 
```

和

```
@implementation ShoutingPerson : Person

-(void)saySomething:(NSString*)something {
    [super yellSomething:something];
}

@end 
```

这会导致循环引用调用，因为`saySomething`总是**在**后代类上调用。

如何在类而不是后代类上`yellSomething`调用`saySomething`方法？`Person`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T16:07:29.937

你没有。这就是继承在 Objective-C 中的工作方式。相反，您应该在基类中记录`-yellSomething:`仅调用的默认实现`-saySomething:`。然后，不搞砸堆栈跟踪成为子类的责任。

如果您真的希望能够更改调用什么的内容，请在基类中使用第三种方法：

`-vocalizeSomething: (NSString *)what loudly: (BOOL)loudly;`

是会说话的人。两者都`-saySomething:`直接`-yellSomething:`调用它而不是相互调用。然后子类可以安全地覆盖任一方法来调用另一个方法，或者`vocalizeSomething:loudly:`在不创建无限循环的情况下调用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-02T18:00:35.353

正如乔纳森所说，如果可能的话，你真的应该避免这种情况。需要这个功能只是一个糟糕的设计。如果您的基类打算被子类化，那么它的文档应该说明哪些方法**必须**被覆盖，哪些方法*可以*被覆盖。**不应**覆盖其他任何内容，以避免出现此类问题。

也就是说，如果您处于非常不寻常的情况下（也许您被困在无法重构的第 3 方代码中），这是可能的。但这并不漂亮。在构造指向and的[struct objc_super](https://developer.apple.com/library/mac/documentation/cocoa/reference/objcruntimeref/Reference/reference.html#//apple_ref/doc/uid/TP40001418-CH3g-BBCFBBGA)实例之后，您需要手动调用[objc_msgSendSuper](https://developer.apple.com/library/mac/documentation/cocoa/reference/objcruntimeref/Reference/reference.html#//apple_ref/doc/uid/TP40001418-CH1g-objc_msgSendSuper)或[objc_msgSendSuper_stret](https://developer.apple.com/library/mac/documentation/cocoa/reference/objcruntimeref/Reference/reference.html#//apple_ref/doc/uid/TP40001418-CH1g-objc_msgSendSuper_stret)。`self``YourBaseClass`

请注意，如果您来自 C++，则默认行为是相同的 - 如果您`SomeFunction()`从基类调用并且它是虚拟方法，则将执行子类的覆盖。您必须在调用前加上明确拼写出类的前缀，例如`MyBaseClass::SomeFunction()`. 在 Objective-C 中没有直接的等价物 - 我会说因为这通常是一个坏主意。

# javascript - 使用 AJAX 为图形检索大量数据

> ID：13670920
> 
> 赞同：0
> 
> 时间：2012-12-02T15:53:19.087
> 
> 标签：javascript, json, graph

我正在设计一个向 Web 客户端以及移动客户端（第 2 阶段）提供数据/信息的服务器。数据将填充图表；成像绘制 5 年内每天的股票价格（显示最小值/最大值/平均值）。

1] 如果我向客户端发送 3000 个数据点，则需要发送大量数据，然后进行绘图。相反，如果我在服务器上构建图形，我可以向客户端发送 PNG。哪个更好？

2] 在 5 年内绘制每个点是一种不好的做法吗？MySQL有没有办法一次平均5个数据点（天）并返回它？

仍处于设计阶段，但我意识到这个决定会真正影响应用程序的性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:12:02.723

你能估计一下你将要发送的数据量吗？3000 个数据点可以是 12K（每个 4 字节`float`）和 100K（时间戳 + 文本格式的值）之间的任何值。虽然 12K 不算什么，但 100K 很重要，尤其是对于移动设备。

处理时间也很重要。与在画布上生成图表相比，使用一些较低级别的语言在服务器上生成数据并返回 PNG 会更加高效。

但是您应该考虑图表的分辨率。如果要绘制 3000 个点，则水平方向至少需要 3000 个像素。如今最大的屏幕达到[2560 像素宽度](http://en.wikipedia.org/wiki/Display_resolution)，这意味着您将永远无法显示所有数据，您将不得不隐藏一些点。手机上就差很多了。争取 200-300 像素宽度和至少两倍的数据点。

话虽如此，我建议采用以下方法：

*   计算平均值并向浏览器返回不超过 100-200 个数据点（平均值必须是智能的，这样您就不会失去一些有趣的极端情况）。

*   在浏览器上使用数十个 JavaScript 图表库之一

*   一旦您需要更详细的信息，用户可以放大图表，这将要求服务器提供更高分辨率的数据。

# java - 使用 IF、ELSE IF 语句进行计算

> ID：13670921
> 
> 赞同：1
> 
> 时间：2012-12-02T15:53:21.593
> 
> 标签：java, if-statement

我不知道为什么我不能用正确的方法来用 if 和 else if 语句来编码我的简单计算。

所有变量都只返回一个“0.0”值，我猜不出有什么问题？你能帮我解决这个问题吗？

这是我的代码：

```
public class MonthlyComputation extends MyActivity
{
String civil_status;

public void DoComputation()
{

    final EditText net_salary = (EditText) findViewById(R.id.et_net_monthly);
    final EditText tax_due = (EditText) findViewById(R.id.et_taxdue);
    final Button btn_compute = (Button) findViewById(R.id.btn_compute_from_monthly);
    final TextView txt3 = (TextView) findViewById(R.id.textView3);
    final TextView txt4 = (TextView) findViewById(R.id.textView4);

    final TextView txt5 = (TextView) findViewById(R.id.textView5);
    final TextView txt6 = (TextView) findViewById(R.id.textView6);

    btn_compute.setOnClickListener(new Button.OnClickListener()
    {

        @Override
        public void onClick(View v)
        {

            double netSalary, taxDue, rate = 0, exemption = 0, subtrahend = 0, withRate;
            String ns, td, r, e, s, wr;

            ns = net_salary.getText().toString();
            netSalary = Double.parseDouble(ns);

            /* Single or Married with no dependent */

            if ((civil_status == "SME") && (netSalary >= 4167) && (netSalary < 5000))
            {
                rate = 0.05;
                exemption = 0.00;
                subtrahend = 4167;
            }

            else if ((civil_status == "SME") && (netSalary >= 5000) && (netSalary < 6667))
            {
                rate = 0.1;
                exemption = 41.67;
                subtrahend = 5000;
            }

            taxDue = netSalary - subtrahend;
            withRate = taxDue * rate;
            taxDue = withRate + exemption;
            tax_due.setText(Double.toString(taxDue));

            td = String.valueOf(taxDue);
            e = String.valueOf(exemption);
            s = String.valueOf(subtrahend);
            r = String.valueOf(rate);

            txt3.setText(td);
            txt4.setText(e);
            txt5.setText(s);
            txt6.setText(r);

        }
    });
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-02T15:56:15.503

**永远不要**用来`==`比较`String`（和一般的对象），你很可能会得到`false`，因为它比较对象引用，而不是值。

有关更多信息，请参阅其他问题：[Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)

解决方案？改用`.equals()`：

```
...
if ("SME".equals(civil_status) && (netSalary >= 4167) && (netSalary < 5000))
{
    rate = 0.05;
    exemption = 0.00;
    subtrahend = 4167;
}
... 
```

# android - Android Button 动画进入 PopupView

> ID：13670923
> 
> 赞同：1
> 
> 时间：2012-12-02T15:53:29.530
> 
> 标签：android, animation, button

我的 PopupView 中有一个 LinearLayout，这个 LinearLayout 中有一个按钮。此按钮的事件侦听器工作正常，但按下（突出显示）的动画未启动。我做错了什么？求求你了！

```
 public class PopupView extends View 
{
    private PopupWindow popUp;
    private LinearLayout popUpLayout;
    private TextView titleTextView;
    private TextView lengthTextView;
    private TextView heighTextView;
    private TextView percentTextView;
    private Button buttonOk;
    private Button buttonDelete;
    private EditText edTextLength, edTextHeight;
    private OnClickListener onClick;
    private LayoutParams params;
    private int popUpWidth = 0;
    private int popUpHeight = 0;
    private int lastPopupped;
    private boolean isCreated = false;
    private int popUpX, popUpY;

    public static final int POINT_MOVE = 1;

    public PopupView(Context context)
    {
        super(context);
        popUp = new PopupWindow(context);
        popUpLayout = new LinearLayout(context);
        titleTextView = new TextView(context);
        lengthTextView  = new TextView(context);
        heighTextView  = new TextView(context);
        percentTextView = new TextView(context);
        buttonOk = new Button(context);
        buttonDelete = new Button(context);
        titleTextView.setTextColor(Color.BLACK);
        lengthTextView.setTextColor(Color.BLACK);
        heighTextView.setTextColor(Color.BLACK);
        percentTextView.setTextColor(Color.BLACK);
        buttonOk.setText("OK");
        buttonOk.setId(1);
        buttonDelete.setText("Delete");
        buttonDelete.setId(2);

        params = new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT);
        popUpLayout.setClickable(true);
        popUpLayout.setOrientation(LinearLayout.VERTICAL);

        popUp.setContentView(popUpLayout);
    }

    public void createPopup (View parent, int typeOfPopUp, DataContainer dContainer, int numOfPoint, int statusBar, 
            float scaleFactor, int scrollX, int scrollY)
    {
        switch (typeOfPopUp)
        {       
        case 1: 
            titleTextView.setText("Ground Point # " + (1 + numOfPoint));
            lengthTextView.setText("Length = " + dContainer.groundPoints.get(numOfPoint).length);
            heighTextView.setText("Heigh = " + dContainer.groundPoints.get(numOfPoint).heigh);

            onClick = new OnClickListener()
            {
                public void onClick (View v)
                {
                    switch (v.getId())
                    {
                    case 1:
                        System.out.println("OK pressed!");
                        break;

                    case 2:

                        break;
                    }
                }
            };

           buttonOk.setOnClickListener(onClick);
           buttonOk.setFocusable(true);
           buttonDelete.setOnClickListener(onClick);

            popUpLayout.removeAllViews();
            popUpLayout.addView(titleTextView, params);
            popUpLayout.addView(lengthTextView, params);
            popUpLayout.addView(heighTextView, params);
            buttonDelete.setEnabled(true);
            popUpLayout.addView(buttonDelete, params);
            popUpLayout.addView(buttonOk, params);

            popUpWidth = (int)(titleTextView.getTextSize() / 2 * 18);
            popUpHeight = (int)(titleTextView.getTextSize() * 13);

            popUpX = (int)((dContainer.groundPoints.get(numOfPoint).length) * scaleFactor - scrollX);
            popUpY = (int)((dContainer.groundPoints.get(numOfPoint).heigh) * scaleFactor + statusBar - scrollY);

            popUpX += statusBar;
            popUpY += statusBar;

            popUp.showAtLocation(parent, Gravity.NO_GRAVITY, popUpX, popUpY);
            popUp.update(popUpX, popUpY, popUpWidth, popUpHeight);

            lastPopupped = numOfPoint;
            isCreated = true;
            break;
        }
    }

    public void removePopup ()
    {
        if (isCreated)
        {
            popUp.dismiss();
        }
    }

    public void updatePopup (DataContainer dContainer, int statusBar, 
            float scaleFactor, int scrollX, int scrollY)
    {
        if (isCreated)
        {
            popUp.update((int)((dContainer.groundPoints.get(lastPopupped).length) * scaleFactor - scrollX),
                    (int)((dContainer.groundPoints.get(lastPopupped).heigh) * scaleFactor + statusBar - scrollY),
                    popUpWidth, popUpHeight);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T22:50:57.880

默认情况下 PopupView 是不可聚焦的。需要调用方法popup.setFocusable(true)。谢谢大家！

# javascript - 使用 javascript 为多个 div 设置动画

> ID：13670925
> 
> 赞同：0
> 
> 时间：2012-12-02T15:54:01.563
> 
> 标签：javascript, jquery, html

我目前正在使用 javascript 向矩形添加一些动画，一旦动画完成，我将框设置为不显示。看看下面的代码来做到这一点。

**Javascript**

```
$(document).ready(function() {  
  $(".filled-rectangle").stop().animate({top:'20px'}, 5000).queue(function(next){
    $(".filled-rectangle").css('display', 'none'); 
  });
}); 
```

现在我想在这样的容器中添加更多的盒子，

**HTML**

```
<div class="container">
  <div class="filled-rectangle"></div>
</div> 
```

**上面的代码现在适用于一个 div，.filled-rectangle 我想添加更多 div，并对所有 div 使用相同的动画。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:14:53.600

有多种方法。您可以使用嵌套[回调](http://api.jquery.com/jQuery.Callbacks/)，它基本上让您在另一个函数完成后执行一个函数。由于您使用了一个类（“填充矩形”），因此您可以在 jquery 中选择该类并获取一个包含该类的所有元素的数组。该数组可用于使用[每个](http://api.jquery.com/jQuery.each/)对象并延迟每个对象所需的动画，但在这种情况下，您不能为每个对象使用不同的动画，它必须相同。

看看这个例子-> [https://stackoverflow.com/a/4661858/1841875](https://stackoverflow.com/a/4661858/1841875)

**简而言之：**

一个又一个不同的动画：嵌套回调/队列

多个对象上的相同动画一个接一个：每个（）延迟动画

在您的情况下，请使用每个延迟解决方案；）

# sql - SQLite SELECT 与 JOIN 和 GROUP？

> ID：13670931
> 
> 赞同：1
> 
> 时间：2012-12-02T15:54:25.713
> 
> 标签：sql, sqlite

我正在尝试根据以下字符串的结果添加一列：

```
SELECT product_code AS "Product Code", SUM(quantity) AS "Quantity" 
FROM receipts_items
GROUP BY product_code
ORDER BY SUM(quantity) DESC 
```

这个字符串给了我一个产品代码和销售数量。我需要添加的是，基于产品代码，该产品代码的描述。

product_code 和 descriptions 列在同一个表中“产品”数量在另一个表中“receipts_items”

谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T15:57:58.743

你想把`JOIN`这两个表放在`product_code`。

你真的应该做一个`LEFT JOIN`捕获没有相关收据项目的产品，然后`CASE`在你的声明中将值`SUM`减少`NULL`到 0。

```
SELECT p.product_code AS "Product Code",
    p.description AS "Description", 
    SUM(CASE WHEN ri.quantity IS NULL THEN 0 ELSE ri.quantity END) AS "Quantity" 
FROM products AS p
    LEFT JOIN receipts_items AS ri ON ri.product_code = p.product_code
GROUP BY p.product_code
ORDER BY SUM(ri.quantity) DESC 
```

# c# - 使用 valueinjecter 将 EF4 var 对象映射到 DTO

> ID：13670932
> 
> 赞同：1
> 
> 时间：2012-12-02T15:54:29.430
> 
> 标签：c#, entity-framework-4, automapper, valueinjecter

我有如下的 linQ 查询

```
 var records = (from P in Person
                join B in BankAccount
                on P.ID equals B.PersonID
                select new { P, B}).ToList(); 
```

人员表有很多字段，但我只需要使用 ID 和名称。同样，对于 BankAccount，我只需要使用 ID、AccountType 和 AccountBalance

然后我将上面的记录 var 类型传递给另一个映射器类，方法如下

```
 public List<CompositeDTO> MapToDto(IEnumerable<object> data)
    {
        foreach (var rec in data) 
        {
         dto.InjectFrom(rec );
         dtoList.Add(dto);
        }
        return dtoList;
    } 
```

CompositeDTO 如下

```
public class CompositeDTO 
{
  public int PersonID {get; set;}
  public String PersonName {get; set;}
  public int AccountID {get; set;}
  public String AccountType{get; set;}
  public int AccountBalance{get; set;}
} 
```

问题是我无法将任何值放入我的类型对象`CompositeDTO`中`dto.InjectFrom(rec )`

这应该怎么做？[此处](http://valueinjecter.codeplex.com/wikipage?title=step%20by%20step%20explanation&referringTitle=Documentation)的文档仅说明了如何为来自两个不同源类的一个字段执行此操作。我错过了什么吗？这可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:35:06.987

`target.InjectFrom(source)`将从源获取属性并将它们注入到与它们匹配的目标`Name`中`Type`

所以在你的情况下，来源是匿名的

```
 {
   public Person P { get; set; }
   public BankAccount B { get; set; } 
 } 
```

并且目标 CompositeDTO 没有名为 P 或 B 类型为 Person 和 BankAccount 的属性，因此不匹配

* * *

一个可行的例子：

```
var source = new { PersonID = 7, PersonName = "Jon" };

var target = new CompositeDTO();

target.InjectFrom(source); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:06:52.333

正如我在这个线程[AutoMapper vs ValueInjecter](https://stackoverflow.com/questions/4663577/automapper-vs-valueinjecter)上读到的：

> 您还可以使用 ValueInjecter 从匿名和动态对象映射

并且 AFAIK 必须在没有声明任何自定义映射的情况下完成，只是按照约定，必须可用。签出[文档](http://valueinjecter.codeplex.com/wikipage?title=SmartConventionInjection)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T16:22:36.470

我认为 AutoMapper 在这里做得更好。我使用 AutoMapper 修改了 map 方法，如下所示，它有效

```
public List<CompositeDTO> MapToDto(IEnumerable<object> data)
{
     dtoList = data.Select(Mapper.DynamicMap<CompositeDTO>).ToList();

    //foreach (var rec in data) 
    //{
    // dto.InjectFrom(rec );
    // dtoList.Add(dto);
    //}
    return dtoList;
} 
```

我需要做的就是将我在 linQ 查询中使用的别名添加到`CompositeDTO`'s 属性中`P_PersonID`，如下所示`B_AccountType`

我认为 ValueInjecter 应该致力于添加此功能。我真的很喜欢在使用它之前不必创建地图，就像目前在 AutoMapper 中针对非动态类型所做的那样。我现在在我的代码中使用两个不同的对象映射器。那不好吗？

# java - 将文本转换为语音java代码

> ID：13670934
> 
> 赞同：3
> 
> 时间：2012-12-02T15:54:52.173
> 
> 标签：java, text-to-speech

我不明白这个语法错误，`insert ")" to complete MethodInvocation Syntax error, insert ";" to complete Statement at demojsapi.main(demojsapi.java:46)`

我实际上正在使用以下代码将文本转换为 speesh 的 java 项目：

```
import javax.speech.*;
import java.util.*;
import javax.speech.synthesis.*;

public class demojsapi
{
    String speaktext;

    public void dospeak(String speak,String  voicename)
    {
        speaktext=speak;
        String voiceName =voicename;
        try
        {
            SynthesizerModeDesc desc = new SynthesizerModeDesc(null,"general",  Locale.US,null,null);
            Synthesizer synthesizer =  Central.createSynthesizer(desc);
            synthesizer.allocate();
            synthesizer.resume();
            desc = (SynthesizerModeDesc)  synthesizer.getEngineModeDesc();
            Voice[] voices = desc.getVoices();
            Voice voice = null;
            for (int i = 0; i < voices.length; i++)
            {
                if (voices[i].getName().equals(voiceName))
                {
                    voice = voices[i];
                    break;
                }
            }
            synthesizer.getSynthesizerProperties().setVoice(voice);
            synthesizer.speakPlainText(speaktext, null);
            synthesizer.waitEngineState(Synthesizer.QUEUE_EMPTY);
            synthesizer.deallocate();
        }
        catch (Exception e)
        {
            String message = " missing speech.properties in " + System.getProperty("user.home") + "\n";
            System.out.println(""+e);
            System.out.println(message);
        }
    }

    public static void main(String[] args)
    {
        demojsapi obj=new demojsapi(); obj.despeak("shit","kevin16");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T16:01:35.430

该`despeak`方法不存在。您应该`dospeak`改为使用常规引号调用：

```
obj.dospeak("foo", "kevin16"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-09T20:22:29.350

请从给定的链接从谷歌下载 freetts-1.2.2-bin 和

[http://sourceforge.net/projects/freetts/?source=directory](http://sourceforge.net/projects/freetts/?source=directory)

在 net beans 中尝试我的程序

不要忘记将所有 jar 文件添加到您的库文件夹中，代码如下所示。它的工作..我的方法---

```
private static final String VOICENAME = "kevin16";                                        
void mySpeak()
{
Voice voice;
VoiceManager vm = VoiceManager.getInstance();
voice = vm.getVoice(VOICENAME);
voice.allocate();
try{
voice.speak("Hi Mr Gaur Welcome to VITS. Thanks To choose Us");
}catch(Exception e){}
} 
```

从您的内部代码中调用此方法..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-21T17:10:24.610

**很好地解释了运行代码的完整过程 -** [使用 Freetts 在 Java 中的文本到语音](http://tryjustlikethis.blogspot.in/2013/10/text-to-speech-converter-in-java.html#.V15S3NJ97IU)

工作代码：

```
import javax.speech.*;    
import java.util.*;    
import javax.speech.synthesis.*;    

public class Text2Speech    
{    
String speaktext; 
public void dospeak(String speak,String  voicename)    
{    
    speaktext=speak;    
    String voiceName =voicename;    
    try    
    {    
        SynthesizerModeDesc desc = new SynthesizerModeDesc(null,"general",  Locale.US,null,null);    
        Synthesizer synthesizer =  Central.createSynthesizer(desc);    
        synthesizer.allocate();    
        synthesizer.resume();     
        desc = (SynthesizerModeDesc)  synthesizer.getEngineModeDesc();     
        Voice[] voices = desc.getVoices();      
        Voice voice = null;
        for (int i = 0; i < voices.length; i++)    
        {    
            if (voices[i].getName().equals(voiceName))    
            {    
                voice = voices[i];    
                break;     
            }     
        }    
        synthesizer.getSynthesizerProperties().setVoice(voice);    
        System.out.print("Speaking : "+speaktext);    
        synthesizer.speakPlainText(speaktext, null);    
        synthesizer.waitEngineState(Synthesizer.QUEUE_EMPTY);    
        synthesizer.deallocate();    
    }    
    catch (Exception e)   
    {    
        String message = " missing speech.properties in " + System.getProperty("user.home") + "\n";    
        System.out.println(""+e);    
        System.out.println(message);    
    }    
}    

public static void main(String[] args)    
{    
    Text2Speech obj=new Text2Speech(); obj.dospeak("Hello i am kevin ","kevin16");    
}    
} 
```

# java - java Normalizer 在不同的机器上表现不同

> ID：13670936
> 
> 赞同：0
> 
> 时间：2012-12-02T15:55:01.223
> 
> 标签：java, string, multilingual

这段代码在开发环境中运行良好，但在生产环境中运行良好。

```
import java.text.Normalizer;
public class TestNorm {
        public static void main(String args[]) {
                String s = "";

                for (String s1: args) {
                        s = s + " " + s1;
                }

                System.out.println(Normalizer.normalize(s.toLowerCase(), Normalizer.Form.NFD).replaceAll("[^\\p{ASCII}]", "").replaceAll("[^\\p{Alnum}]+", "-").replaceAll("^[^a-z0-9]+", "").replaceAll("[^a-z0-9]+$", ""));
        }
} 
```

（空白的）

```
DevEnv$ java TestNorm hellö 
> hello 
```

（空白的）

```
ProdEnv$ java TestNorm hellö
> hell 
```

**我错过了什么？为什么我没有得到相同的 Normalizer 结果；“你好”？**

可能是一个有用的信息

```
DevEnv$ java -version
java version "1.6.0_37"
Java(TM) SE Runtime Environment (build 1.6.0_37-b06-434-11M3909)
Java HotSpot(TM) 64-Bit Server VM (build 20.12-b01-434, mixed mode) 
```

（空白的）

```
ProdEnv$ java -version
java version "1.7.0_01"
Java(TM) SE Runtime Environment (build 1.7.0_01-b08)
Java HotSpot(TM) Client VM (build 21.1-b02, mixed mode, sharing) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:44:58.397

好的，我为所有有同样问题的人找到了解决方案！

我查看了这个网站； [http://perlgeek.de/en/article/set-up-a-clean-utf8-environment](http://perlgeek.de/en/article/set-up-a-clean-utf8-environment)

执行此；

```
export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8
export LANGUAGE=en_US.UTF-8 
```

并用这个测试

```
perl -Mcharnames=:full -CS -wle 'print "\N{EURO SIGN}"' 
```

输出应该是“€”

我上面写的代码也可以工作......

# tomcat - 使用 Axis 应用程序记录 Tomcat 的所有 SOAP 消息

> ID：13670938
> 
> 赞同：0
> 
> 时间：2012-12-02T15:55:07.087
> 
> 标签：tomcat, soap, axis

为了能够调试它们，我想查看从我的 Axis Web 服务发送/接收的 SOAP 消息。

托管服务器是 Tomcat。

如何启用所有 SOAP 请求/响应的日志记录以及日志文件存储在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T20:45:51.080

如果要记录 SOAP 消息，则需要创建自定义处理程序。[处理请求/响应时会调用轴处理程序](http://ws.apache.org/axis/java/apiDocs/org/apache/axis/handlers/package-summary.html)，因此您只需注册自己的。[以下是如何记录消息的示例](http://javaonline.free.fr/Frameworks/Axis/part-5.php)。

如果要将消息写入文件[，例如可以使用 Log4j](http://www.dzone.com/tutorials/java/log4j/log4j-tutorial/log4j-tutorial.html)。如果您只想调试消息，还可以使用[Apache TCPMon](http://ws.apache.org/commons/tcpmon/tcpmontutorial.html)之类的东西。

# javascript - Rails 中的不同视图选项

> ID：13670940
> 
> 赞同：1
> 
> 时间：2012-12-02T15:55:17.857
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3

在 Rails 中创建具有不同视图选项的视图页面的最佳实践是什么，例如具有主要文本的基本视图和具有图形功能的高级视图？更具体地说，我想要一个视图页面，用户可以在其中切换基本/高级显示视图。单击切换按钮会呈现一组与所选视图相对应的 div。这应该通过 html 标记中的 form_for/if-else 语句来完成，还是最好在 javascript 中完成？我想打开`<div id="id">`/关闭可以通过以下方式在javascript中完成：

```
$("#id").show()
$("#id").hide() 
```

我在理解如何完成 rails 实现时遇到问题，我在哪里放置 if-else 语句（即，如果用户基本视图切换为 render `<div id="basic">`，else `<div id="advanced">`）？

```
<%= form_for ??? do |f| %>
  ...
  <%= f.submit ??? %>           
<% end %> 
```

**编辑2：**

```
<div class="row">
  <div class="span6">
    <div class="btn-group" id="basic-advanced" data-toggle="buttons-radio">
        <a class="btn btn-small" href="#" id="basicbutton">Basic</a>
        <a class="btn btn-small" href="#" id="advancedbutton">Advanced</a>
    </div>
 </div>
</div>

<div class="container" id="basic">
  This is the basic view
</div>

<div class="container" id="advanced">
  This is the advanced view
</div> 
```

现在在javascript中我有以下内容：

```
$("#basic").toggle();
$("#basic-advanced").click(function (){
  $("#basic").toggle();
  $("#advanced").toggle();
}); 
```

我已经添加了上面的代码，但是如何跟踪页面处于哪种查看模式？从答案来看，似乎可以将实例变量@viewing_mode 设置为与模式相对应的值，但是应该怎么做呢？通过表格？

**更新**：我设法使用会话变量和 if/else 语句实现了切换，这里描述了该过程：[Session variable not persisting after switch](https://stackoverflow.com/questions/13740313/session-variable-not-persisting-after-switch)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:58:49.523

这是一个 JavaScript 对象（用 CoffeScript 编写），它允许您使用约定在任意数量的模式之间切换：

```
class ModeSwitcher
  constructor: ($area, modes) ->
    $area = $ $area
    me = this

    bindToggle = (mode) ->
      $area.find('a.toggle.' + mode).click ->
        me.toggle mode

    $ ->
      bindToggle(mode) for mode in modes

  toggle: (mode) ->
    $('.mode').hide()
    $('.' + mode + '.mode').show() 
```

这是一个如何构造对象的示例（JavaScript/jQuery）：

```
 var switcher = new ModeSwitcher('body', ['basic', 'advanced']);
  $(function() {
    switcher.switch("<%= @mode %>");
  }); 
```

实例变量在 Rails 控制器中设置，`@mode`并说明视图应该以哪种模式开始：

`@mode = params[:mode] || 'basic'`

至于它是如何按惯例工作的，你会有这样的部分：

```
<div class="basic mode">...</div>
<div class="advanced mode">...</div> 
```

你会有这样的链接：

```
<a class="toggle advanced">Switch to advanced mode</a>
<a class="toggle basic">Switch to basic mode</a> 
```

构造时，对象将遍历所有声明的模式并查找切换链接。然后它将切换功能绑定到这些链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T15:58:29.340

如果您正在使用这意味着您需要呈现基本和高级 div 标签`jQuery.show()`。`jQuery.hide()`Rails 需要同时渲染它们。你可以只切换 `display:hidden`css，这里我用 variable 做到了`@use_advanced`。

```
<div id="advanced" <%= (@use_advanced) ? '' : ' style="display:hidden"' %>>...

<div id="basic" <%= (@use_advanced) ? ' style="display:hidden"' : '' %>>... 
```

要在两者之间切换，您可以使用一个按钮：`<button>toggle</button>`

```
$('button').click(function () {
  $('#advanced').toggle();
  $('#basic').toggle();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T16:05:21.777

有一些不同的情况：

1）如果您只能使用更改视图`CSS`- 那么您应该将所有页面包含在分类 div 中：

```
<div class='my-style'>
  ...
</div> 
```

2）如果第一个解决方案不适用，那么您可以使用 if-else 语句：

```
<% if @my_style_selected %>
  <div>My style</div>
<% else %>
  <div>Default</div>
<% end %> 
```

3）最后，如果两种解决方案都不适合您。你可以写一些`JS`来动态替换你的`divs`. 最好的解决方案是使用`AJAX`. 如果您将呈现这两个变体并隐藏其中一个 - 这将使您的页面加载时间几乎翻倍。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-02T16:11:56.573

鉴于 yiou 正在使用 rails，我会考虑为不同的视图使用布局，而不是使用条件逻辑。

有关更多信息，请参阅[rails 3，如何添加与应用程序其他部分不使用相同布局的视图？](https://stackoverflow.com/q/5090084/631619)

# python - 格式化姓氏，名字

> ID：13670945
> 
> 赞同：-1
> 
> 时间：2012-12-02T15:55:50.487
> 
> 标签：python, dictionary, formatting

我正在做这个项目来从包含“员工姓名”和“每月销售数据”的外部 .txt 文件中提取数据。文本文件的格式（完整文件：是 'string' 后跟 12 个浮点实例）

```
last name, first name
45
23
34
....
last name2, first name2
78
32
23
.... 
```

我的程序几乎完成了，但我需要在打印结果时将“姓氏，名字”格式化为“名字，姓氏”。这是该部分的代码，因此您可以获得更好的主意。我正在使用 'dict()' 和 .iteritems() 来查看原始文件中的 7 名员工及其各自 12 个月的销售额：

```
data = {} # dict: list of all values for person by person name
with open("SalesData.txt", "rt") as f:
    data_key = f.readline() # We remember first line (first man)
    data[data_key] = [] # empty list of values
    for line in f:
        # then we suppose every line is float.
        try:                             
            # convert to float
            value = float(line.strip())  
            # add to data
            data[data_key].append(value)
            # If it does not convert, then it is next person
        except ValueError: 
            # next person's name
            data_key = line
            # new list
           data[data_key] = []
for employee, stats in data.iteritems():
    print employee 
```

请注意，“员工”存储为“姓氏，名字”，我只想切换它并去掉“，”。

任何帮助将不胜感激！我刚开始使用 dict()，有时我发现很难操作数据。

*更新* 主要问题不是实际的格式。这就是发生的事情：我曾经在收集数据后，格式化“姓氏，名字”

```
print ' '.join(employee.split(',')[::-1]).strip() 
```

这项工作，但结果完全以这种方式打印：

```
Shelly (first name)
 Adams (last name -also notice the blank space before Adams) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:39:43.550

问题是您在每个名称的末尾保留换行符，因此（例如）“姓氏，名字\ n”而不是“姓氏，名字”。您的格式化行很好，您只需要修改 data_key 设置为的行：

`data_key = f.readline().strip()`

和

`data_key = line.strip()`

不要以 结尾`print employee`，而是使用您已经提出的行​​：

`print ' '.join(employee.split(',')[::-1]).strip()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:30:21.207

尝试这个 ：

```
print (' '.join((employee.split(',')[::-1])).strip()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T16:13:04.297

```
employees = {}
with open('path/to/file') as infile:
    lname, fname = infile.readline.strip().split(', ')
    stats = [float(infile.readline().strip()) for _ in range(12)]
    employees["%s %s" %(fname.strip(), lname.strip())] = stats
for employee in employees:
    print employee 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T16:00:45.400

```
print ' '.join(employee.split(',')[::-1]).strip() 
```

或者

```
print "{0[1]} {0[0]}".format(employee.split(',')).strip() 
```

# tabs - Sublime Text 2 - 缺少当前打开的标签

> ID：13670946
> 
> 赞同：9
> 
> 时间：2012-12-02T15:55:51.507
> 
> 标签：tabs, editor, sublimetext2

我开始使用 Sublime Text 2 编辑器，它看起来很酷，但有一点让我有点困惑。

当我打开一个项目，然后我会打开我需要更新的文件时，这些文件没有显示在顶部栏中的选项卡中，如屏幕截图所示？

我怎样才能显示它们？

![截屏](../Images/f844cacba3098e52a23c3d6eac3b27b6.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-02T16:12:09.370

您是否真的打开了文件（即从侧边栏中双击它）或者您只是查看文件预览，根据设计，它不会在主窗口中显示为选项卡。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-14T12:15:37.367

您可以通过键入`CTRL`+ `P`（Windows）或++ `Command`（Mac）打开命令托盘并键入“查看：切换选项卡”来查看选项卡。这将切换文件选项卡。`Shift``p`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-05T10:52:31.947

我有同样的问题，我尝试了所有方法，但没有显示打开的文件

在 SUBLINE EDITOR 的顶部，我双击每个文件但只显示

在左侧底座上，而不是在 SUBLINE 作为选项卡的顶部。

[![在此处输入图像描述](../Images/3ec25a4ce12f1cf5ee90c5850df6b116.png)](https://i.stack.imgur.com/HBXh0.png)

# javascript - 使用breezejs 在javascript 中查询信息不是很危险吗？

> ID：13670948
> 
> 赞同：21
> 
> 时间：2012-12-02T15:56:15.463
> 
> 标签：javascript, breeze

刚开始使用[breath.js](http://www.breezejs.com/home)，因为编码时间明显增加，即管理直接在Javascript 中从服务器访问模型数据（我是这里的新手，所以显然是裸露的！）。

过去，我使用股票 ajax 调用来获取/发布数据到服务器，并且过去我使用了一些不同的客户端工具来提供一些帮助来查询本地数据，例如[jLinq](http://hugoware.net/projects/jlinq)。

我的问题是这个。在 Javascript 中拥有基本上完整的模型查询访问权限不是很危险吗？我一定遗漏了一些东西，因为它看起来像是一个经过深思熟虑的工具。在过去，我至少控制了可以通过后端查询过程发送给客户端的内容，并且再次使用 jLinq 等我可以过滤数据等。我也可以理解权衡可能与获得直接查询/不重复的本地模型问题，所以是否有人可以对此提供一些见解？

谢谢！

***编辑*** 显然我不是唯一一个，但我猜有一个合理的响应 - 可能会限制使用 DTO 方法或其他方法请求的数据？[发布的另一个问题是here](https://stackoverflow.com/questions/13662496/how-is-breeze-js-handling-security-and-avoiding-exposing-business-logic)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-03T20:11:18.890

暴露完整的商业模式可能很危险。允许对您想要向客户端公开的模型部分进行无限制的查询是很危险的。无论您提供易于查询的 API 还是难以查询的 API，都是如此。

这就是为什么我们的团队对我们如何构建我们的服务非常谨慎。

您应该只公开您的客户端应用程序需要的类型。如果您想限制对某个类型的授权实例的访问，您可以编写仔细规定的不可查询服务方法。微风可以打电话给他们就好了。您不必对每个请求都使用 Breeze 查询工具。您仍将受益于缓存、相关实体导航、更改跟踪、验证、保存捆绑、缓存查询、离线支持。

重复：您的服务方法不必返回 IQueryable。即使它们确实返回 IQueryable，您也可以轻松地编写服务方法来将查询结果限制为仅允许用户查看的那些实体。

幸运的是，您可以在同一个服务或协作服务中混合这两种方法。

微风给你选择。明智地行使这些选择取决于您。走出去，设计您的服务以满足您的要求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T12:52:41.027

当你暴露元数据时呢？这不被认为是危险的。恕我直言，从 DbContext 公开元数据是不安全的。我知道您可以在客户端上构建元数据，但关键是尽快做事（如果安全的话）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-02T16:10:01.803

从这个意义上说， Breeze 并不意味着*成为*您的业务逻辑。请记住，如果您在 Javascript 中执行某项操作，任何人都可以执行此操作，那么您应该根据需要限制您自己的服务数据的可见性。

换句话说，如果您打算让数据公开可见，这对您很有用。但只公开您乐于公开并允许任何人查询的实体；另一种看待它的方式是，您的 API 成为您网站的公共 API（但不是您宣传并告诉所有人使用的 API）。

我*个人*不喜欢以这种方式做事，因为在后端实现的架构上创建了依赖项。如果我想更改我的数据库表，我现在必须考虑我的 Javascript。我在集成和单元测试方面也缺乏。

但是，如果您想在非敏感数据上快速构建网站功能，而无需构建服务方法和各个层的实现，它可以发挥作用。

# ruby-on-rails-3.2 - 无法批量分配受保护的属性：post_id

> ID：13670950
> 
> 赞同：1
> 
> 时间：2012-12-02T15:56:25.293
> 
> 标签：ruby-on-rails-3.2

我一直在尝试为我的 RoR 3 网站创建一个赞按钮。我使用了此链接中建议的解决方案：[Simple like/unlike button with rails 3, jquery, and ajax](https://stackoverflow.com/questions/6482354/simple-like-unlike-button-with-rails-3-jquery-and-ajax)

我有一个用户、帖子和喜欢的模型。但是喜欢按钮部分从我的显示帖子页面显示“无法批量分配受保护的属性：post_id”错误。我已经研究了其他线程的解决方案，但似乎没有任何效果。粘贴我的代码摘录以供参考。

```
class Like < ActiveRecord::Base
  belongs_to :user
  belongs_to :post
end

class Post < ActiveRecord::Base
   attr_accessible :title, :content, :posts_attributes
   belongs_to :user
   has_many :likes
   accepts_nested_attributes_for :likes
   .
   .
   .
end

class User < ActiveRecord::Base
   attr_accessible :email, :name, :password, :password_confirmation
   has_many :posts, dependent: :destroy
   has_many :likes
   .
   .
   .
end 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:11:55.917

将 attr_accessible :post_id, :user_id 添加到您的 Like 模型

# position - ServiceStack WS 上请求的排序位置 XML 节点的意外行为

> ID：13670952
> 
> 赞同：1
> 
> 时间：2012-12-02T15:56:35.923
> 
> 标签：position, servicestack, datacontractserializer, requirements

现在我知道 ServiceStack 使用 .NET 的 Xml DataContractSerializer 来序列化/反序列化 XML，但是如果我们的 web 服务 API 不使用 .NET 框架，我们就会遇到一些麻烦。

如果尝试对问题进行简短描述，则此问题在[这篇文章](http://neimke.blogspot.com/2012/03/serialization-ordering-causes-problems.html)中描述得非常好：

严格的节点顺序要求 XML 对于一些外部没有非常不舒服。网络系统。

是否有可能使用不同的序列化或配置所使用的ServiceStack，让他没想到元素处于一个死板的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:35:00.763

[ServiceStack](http://www.servicestack.net/)在底层使用 .NET 的 XML DataContract 序列化程序。除了底层 .NET 的框架实现所提供的功能之外，它是不可定制的。

在前面的问题中，我已经回答了如何使用自定义 XML 序列化器覆盖 ServiceStack 的默认 XML 序列化：

[https://stackoverflow.com/a/13498725/85785](https://stackoverflow.com/a/13498725/85785)

# php - 尝试从网站 PHP (OOP) 中提取关键字

> ID：13670953
> 
> 赞同：1
> 
> 时间：2012-12-02T15:57:17.123
> 
> 标签：php, extract, keyword

哈哈，我仍然有关键字的问题，但这是我正在创建的代码。

是一个糟糕的代码，但这是我的创作：

```
<?php
$url = 'http://es.wikipedia.org/wiki/Animalia';
Keys($url);
function Keys($url) { 
$listanegra = array("a", "ante", "bajo", "con", "contra", "de", "desde", "mediante", "durante", "hasta", "hacia", "para", "por", "que", "qué", "cuán", "cuan", "los", "las", "una", "unos", "unas", "donde", "dónde", "como", "cómo", "cuando", "porque", "por", "para", "según", "sin", "tras", "con", "mas", "más", "pero", "del"); 

    $doc = new DOMDocument();
    libxml_use_internal_errors(true);
    $doc->loadHTMLFile($url);
    $webhtml = $doc->getElementsByTagName('p');
    $webhtml = $webhtml ->item(0)->nodeValue;

    $webhtml = strip_tags($webhtml);
    $webhtml = explode(" ", $webhtml);

    foreach($listanegra as $key=> $ln) {
    $webhtml = str_replace($ln, " ", $webhtml);
    }
    $palabras = str_word_count ("$webhtml", 1 ); 
    $frq = array_count_values ($palabras); 
    $frq = asort($frq);
    $ffrq = count($frq);
$i=1;
while ($i < $ffrq) {
    print $frqq[$i];
    print '<br />';
    $i++;
}
}
?> 
```

尝试提取网站关键字的代码。提取网页的第一段，并删除变量“$listanegra”的单词。接下来，计算重复单词并将所有单词保存在“数组”中。在我调用数组之后，这会告诉我这些单词。

问题是......它不起作用的代码=（。

当我使用代码时，它显示为空白。

可以帮我完成我的代码吗？建议我使用“tf-idf”，但我稍后会使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:41:30.053

我相信这就是你想要做的：

```
$url = 'http://es.wikipedia.org/wiki/Animalia';

$words = Keys($url);

/// do your database stuff with $words

function Keys($url)
{
    $listanegra = array('a', 'ante', 'bajo', 'con', 'contra', 'de', 'desde', 'mediante', 'durante', 'hasta', 'hacia', 'para', 'por', 'que', 'qué', 'cuán', 'cuan', 'los', 'las', 'una', 'unos', 'unas', 'donde', 'dónde', 'como', 'cómo', 'cuando', 'porque', 'por', 'para', 'según', 'sin', 'tras', 'con', 'mas', 'más', 'pero', 'del');

    $doc = new DOMDocument();
    libxml_use_internal_errors(true);
    $doc->loadHTMLFile($url);
    $webhtml = $doc->getElementsByTagName('p');
    $webhtml = $webhtml->item(0)->nodeValue;
    $webhtml = strip_tags($webhtml);
    $webhtml = explode(' ', $webhtml);

    $palabras = array();
    foreach($webhtml as $word)
    {
        $word = strtolower(trim($word, ' .,!?()')); // remove trailing special chars and spaces
        if (!in_array($word, $listanegra))
        {
            $palabras[] = $word;
        }
    }
    $frq = array_count_values($palabras);
    asort($frq);
    return implode(' ', array_keys($frq));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:51:50.050

如果您正在测试，您的服务器应该显示错误：在之后添加

```
ini_set('display_errors', 1); 
ini_set('log_errors', 1); 
ini_set('error_log', dirname(__FILE__) . '/error_log.txt'); 
error_reporting(E_ALL); 
```

这样你会看到错误：第 24 行的数组到字符串转换*（如果你不放 5 个新行，第 19 行）*

这是我发现的一些错误 4 个函数没有被使用，因为它们应该 str_replace、str_word_count、asort、array_count_values。

使用**[str_replace](http://php.net/manual/en/function.str-replace.php)**有点棘手。尝试查找和删除 a 会删除文本中的所有“a”，即使在“动物”中也是如此。(str_replace("a","animal") => nmal) 这个链接应该很有用：**[link](https://stackoverflow.com/questions/3426265/php-string-replace-match-whole-word)**

**[asort](http://php.net/asort)**返回 true 或 false 这样做只是：

```
asort($frq); 
```

将按字母顺序对值进行排序。$frq 返回**[array_count_values](http://php.net/array_count_values)**的结果--> $frq = array($w​​ord1=>word1_count , ...) 这里的值是单词被使用的次数，所以以后你有：

```
 print $**frq**[$i]; // you have  print $frqq[$i]; in your code 
```

结果将为空，因为该数组的索引是单词，而值是单词在文本中出现的次数。

同样使用**[str_word_count](http://php.net/str_word_count)**您必须非常小心，因为您正在阅读西班牙文文本，并且文本可以有数字，您应该使用它

```
str_word_count($string,1,'áéíóúüñ1234567890'); 
```

我建议的代码：

```
<?php
header('Content-Type: text/html; charset=UTF-8');
ini_set('display_errors', 1); 
ini_set('log_errors', 1); 
ini_set('error_log', dirname(__FILE__) . '/error_log.txt'); 
error_reporting(E_ALL);

$url = 'http://es.wikipedia.org/wiki/Animalia';
Keys($url);
function Keys($url) { 
$listanegra = array("a", "ante", "bajo", "con", "contra", "de", "desde", "mediante", "durante", "hasta", "hacia", "para", "por", "que", "qué", "cuán", "cuan", "los", "las", "una", "unos", "unas", "donde", "dónde", "como", "cómo", "cuando", "porque", "por", "para", "según", "sin", "tras", "con", "mas", "más", "pero", "del"); 

$html=file_get_contents($url);

    $doc = new DOMDocument('1.0', 'UTF-8');
    $html = mb_convert_encoding($html, "HTML-ENTITIES", "UTF-8"); 
    libxml_use_internal_errors(true);
     $doc->loadHTML($html);
    $webhtml = $doc->getElementsByTagName('p');

    $webhtml = $webhtml ->item(0)->nodeValue;

    $webhtml = strip_tags($webhtml);
    print_r ($webhtml);
    $webhtml = explode(" ", $webhtml);

   // $webhtml = str_replace($listanegra, " ", $webhtml); str_replace() accepts array

    foreach($listanegra as $key=> $ln) {

    $webhtml = preg_replace('/\b'.$ln.'\b/u', ' ', $webhtml);
    }

    $palabras = str_word_count(implode(" ",$webhtml), 1, 'áéíóúüñ1234567890');

    sort($palabras);

    $frq = array_count_values ($palabras);

foreach($frq as $index=>$value) {
    print "the word <strong>$index</strong>  was used <strong>$value</strong> times";
    print '<br />';

}
}
?> 
```

试图找出特殊字符问题真的很痛苦

# python - 如何使用 PyQt 更新 QGraphicsView 中的 QPixmap

> ID：13670954
> 
> 赞同：4
> 
> 时间：2012-12-02T15:57:21.303
> 
> 标签：python, pyqt, repaint, qgraphicsview, qpixmap

我正在尝试在 QGraphicsView 内的 QPixmap 上绘画。这幅画工作正常，但 QGraphicsView 没有更新它。

这是一些工作代码：

```
#!/usr/bin/env python

from PyQt4 import QtCore
from PyQt4 import QtGui

class Canvas(QtGui.QPixmap):
    """ Canvas for drawing"""
    def __init__(self, parent=None):
        QtGui.QPixmap.__init__(self, 64, 64)
        self.parent = parent
        self.imH = 64
        self.imW = 64
        self.fill(QtGui.QColor(0, 255, 255))
        self.color = QtGui.QColor(0, 0, 0)

    def paintEvent(self, point=False):
        if point:
            p = QtGui.QPainter(self)
            p.setPen(QtGui.QPen(self.color, 1, QtCore.Qt.SolidLine))
            p.drawPoints(point)

    def clic(self, mouseX, mouseY):
        self.paintEvent(QtCore.QPoint(mouseX, mouseY))    

class GraphWidget(QtGui.QGraphicsView):
    """ Display, zoom, pan..."""
    def __init__(self):
        QtGui.QGraphicsView.__init__(self)
        self.im = Canvas(self)
        self.imH = self.im.height()
        self.imW = self.im.width()
        self.zoomN = 1            
        self.scene = QtGui.QGraphicsScene(self)
        self.scene.setItemIndexMethod(QtGui.QGraphicsScene.NoIndex)
        self.scene.setSceneRect(0, 0, self.imW, self.imH)
        self.scene.addPixmap(self.im)
        self.setScene(self.scene)
        self.setTransformationAnchor(QtGui.QGraphicsView.AnchorUnderMouse)
        self.setResizeAnchor(QtGui.QGraphicsView.AnchorViewCenter)
        self.setMinimumSize(400, 400)
        self.setWindowTitle("pix")

    def mousePressEvent(self, event):
        if event.buttons() == QtCore.Qt.LeftButton:
            pos = self.mapToScene(event.pos())
            self.im.clic(pos.x(), pos.y())
            #~ self.scene.update(0,0,64,64)
            #~ self.updateScene([QtCore.QRectF(0,0,64,64)])
            self.scene.addPixmap(self.im)
            print('items')
            print(self.scene.items())
        else:
            return QtGui.QGraphicsView.mousePressEvent(self, event)

    def wheelEvent(self, event):
        if event.delta() > 0:
            self.scaleView(2)
        elif event.delta() < 0:
            self.scaleView(0.5)

    def scaleView(self, factor):
        n = self.zoomN * factor
        if n < 1 or n > 16:
            return
        self.zoomN = n
        self.scale(factor, factor)

if __name__ == '__main__':
    import sys
    app = QtGui.QApplication(sys.argv)
    widget = GraphWidget()
    widget.show()
    sys.exit(app.exec_()) 
```

在`mousePressEvent`QPixmap 上做了一些绘画。但是我发现更新显示的唯一解决方案是创建一个新实例（这不是一个好的解决方案）。

我该如何更新它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T22:59:55.570

像素图无法链接到您的场景，该项目使用它的内部副本，因此您必须`QGraphicsPixmapItem`使用新的像素图更新：

```
def __init__(self):
    ...
    # save the item as a member
    self.imItem = self.scene.addPixmap(self.im) 
    ...

def mousePressEvent(self, event):
    if event.buttons() == QtCore.Qt.LeftButton:
        pos = self.mapToScene(event.pos())
        self.im.clic(pos.x(), pos.y())
        self.imItem.setPïxmap(self.im)
    ... 
```

但是让你的类`Canvas`继承自`QGraphicsPixmapItem`而不是更有意义`QPixmap`，你仍然必须使用 获取像素图`pixmap()`，在其上绘制，然后调用`setPixmap`以更新它。作为奖励，该代码将在项目自己的`mousePressEvent`方法中。

# php - 在 php 中优化 n-queens 解决方案

> ID：13670955
> 
> 赞同：1
> 
> 时间：2012-12-02T15:57:28.810
> 
> 标签：php, optimization, n-queens

我有一个基本的蛮力解决方案，可以找到用 php 编写的 n-queens 问题的一种解决方案。 [这是一个演示](http://ericjankowski.com/php/nqueens.php)。在 n=16 时，服务器开始抛出内存不足错误。

[gitHub 上的源代码](https://github.com/jankenstein/php/blob/master/recursion/nqueens.php)。

```
<?php

function isAttacked($board, $x, $y){
    foreach($board as $key => $value){
        if($value != -1){
            if ($key==$x){
                return true;
            }else if($value==$y){
                return true;
            }else if(($key-$x) / ($value-$y) == 1){
                return true;
            }else if(($key-$x) / ($value-$y) == -1){
                return true;
            }
        }
    }
    return false;
}

function allQueensPlaced($board){
    $done = true;
    for($i=0;$i<sizeof($board);$i++){
        if($board[$i]==-1){
            $done = false;
        }
    }
    return $done;
}

function placeQueens($board, $index){

    if($index==sizeof($board) && allQueensPlaced($board)){  
        return $board;
    }

    $nextPosition = $board[$index] + 1;
    $board[$index] = -1;

    for($i=$nextPosition; $i<sizeof($board);$i++){
        if(!isAttacked($board, $index, $i)){
            $board[$index]=$i;
            return placeQueens($board, $index+1);
        }
    }
    $board[$index] = -1;
    return placeQueens($board, $index-1);
}
?>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="../css/reset.css">
        <link rel="stylesheet" type="text/css" href="../css/style.css">
        <style>
            div{
                float:left;

            }
            div.black{
                background-color:#B58862;
                width:40px;
                height:40px;
                text-align:center;

            }
            div.white{
                background-color:#F0D9B5;
                width:40px;
                height:40px;
                text-align:center;

            }
        </style>
    </head>
    <body>
        <h1>Recursion: Brute Force N-Queens</h1>
        <form action="nqueens.php" method="GET">
            <p>Number of queens: <input name="queens" type="text" /><input name="submit" type="submit" value="Go" /></p>
        </form>
        <div style='margin:50px;border:1px solid black;'>
<?php

if(isset($_GET['queens']) && is_numeric($_GET['queens'])){
    $queens = $_GET['queens'];
}else{
    $queens=8;
}

if($queens > 25 || $queens < 4){
    $queens = 8;
}

$placements = array($queens);

for($i=0;$i<$queens;$i++){
    $placements[$i]=-1;
}

$placements = placeQueens($placements, 0);

for ($i=0;$i<$queens;$i++){
    echo "<div style='clear:left;'>\n";
    for($j=0;$j<$queens;$j++){
        if(($i+$j)%2==0){
            echo "<div class='black'>";
        }else{
            echo "<div class='white'>";
        }
        if ($placements[$i]==$j){
            echo "<img height='40' src='../images/queen.png'/>";
        }else{
            echo "&nbsp;";
        }
        echo "</div>\n";
    }
    echo"</div>\n";
}

?>
        </div>
    </body>
</html> 
```

您会建议在代码或算法中进行哪些改进以使页面能够显示更多皇后的解决方案？我正在尝试学习如何编写更好的代码，因此假设对进程分配的内存进行猴子操作超出了范围。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-06-05T12:49:36.987

最好避免使用暴力破解。如果你能让它工作，与其他方法相比，解决时间仍然会很长。至少如果您只需要一个解决方案。

试试看这个页面：http: [//yuval.bar-or.org/index.php ?item=9](http://yuval.bar-or.org/index.php?item=9)

问候，

每

# jquery - 将我的 H1 放在我的 jQuery 幻灯片上

> ID：13670958
> 
> 赞同：0
> 
> 时间：2012-12-02T15:58:01.167
> 
> 标签：jquery, slideshow

我正在制作幻灯片，但不知道如何将标题文本保留在幻灯片上方。这是我的代码。

html

```
 <h1>Baltimore Maryland</h1>
    <img src="images/Baltimore_Main-1.jpg" />
    <img src="images/Row-Baltimore-top.jpg" />
    <img src="images/bmoreBoat.jpg" />

  </div> 
```

jQuery

```
 $('#header').cycle(); 
```

我知道它正在用我的照片循环我的 h1，因为我的目标是我的标题 id。我试过 z-index 但它不起作用，因为[http://malsup.com/jquery/cycle/lite/](http://malsup.com/jquery/cycle/lite/)插件覆盖了我分配的 z-index。我已经尝试在我的图像周围放置一个 div 并添加带有这样目标的 div $('#header div').cycle(); 它不起作用。它将 div 放在我的标题上，或者只是像故障一样弄乱了我的订单。它错开我的 div 和 h1。如何让 h1 保持在幻灯片的顶部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:05:51.227

您不能将 H1 标签放在包装 div 内（您命名为 header 的标签）将其放在该 div 之外并使用 css 解决问题，您可以将其设为绝对并设置顶部和左侧，并使用真实的包装器. 像这样的东西：

```
<div class="relative_wrapper" style="position: relative;">
<h1 style="display: block; position: absolute; top: -15px; left: -15px; z-index:900;">Baltimore           Maryland</h1>
<div id="header">
    <img src="images/Baltimore_Main-1.jpg" />
    <img src="images/Row-Baltimore-top.jpg" />
    <img src="images/bmoreBoat.jpg" />
</div>
</div> 
```

# hibernate - Grails/Hibernate 不会在 MySQL Linux 上自动创建表

> ID：13670959
> 
> 赞同：0
> 
> 时间：2012-12-02T15:58:26.153
> 
> 标签：hibernate, grails

我在 Windows localhost 上成功运行了 Grails 应用程序。然后我将战争部署到 Linux 上。整个应用程序正常工作，除了 Hibernate（我相信）不希望在那里创建任何表：

```
org.springframework.dao.InvalidDataAccessResourceUsageException:
   could not execute query;
   ...
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException:
   Table 'xxx.yyy' doesn't exist
   ...
(no other errors noticed) 
```

一旦我手动创建了所有表，该应用程序就可以正常工作。

问题是**如何使表自动创建？**就像它应该的那样。

本地 MySQL：

```
MySQL Ver 14.14 Distrib 5.5.28, for Win64 (x86) 
```

服务器的 MySQL：

```
mysql  Ver 14.14 Distrib 5.5.24, for debian-linux-gnu (x86_64) using readline 6.2 
```

文件`/etc/tomcat7/context.xml`：

```
 <Resource name="jdbc/XXX" auth="Container"
          type="javax.sql.DataSource" driverClassName="com.mysql.jdbc.Driver"
          url="jdbc:mysql://localhost:3306/xxx"
          username="xxx" password="xxx" maxActive="20" maxIdle="10"
          removeAbandoned="true" removeAbandonedTimeout="60" logAbandoned="true"
          maxWait="-1"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T16:04:34.713

在您的休眠配置文件中将休眠属性 hbm2ddl.auto 设置为“创建”。

# r - 如果使用局部变量，函数返回值会发生变化

> ID：13670961
> 
> 赞同：1
> 
> 时间：2012-12-02T15:58:28.463
> 
> 标签：r

我有两个代码片段，我希望它们的行为相同，但它们没有：

```
 position <- function(t) {
    coordinates <- c(cosh(t), sinh(t))

    return(coordinates[1])
  } 
```

和

```
 position <- function(t) {
    coordinates <- c(cosh(t), sinh(t))

    return(cosh(t))
  } 
```

我使用该函数`position`绘制曲线。第一个片段没有绘制曲线。使用第二个片段绘制曲线。

两个片段之间的功能差异是什么，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T16:36:54.207

返回的内容取决于传递的参数类型。如果参数“t”是一个矩阵，正如设计用于处理坐标的函数所预期的那样，那么矩阵将从`cosh(t)`和 from返回`sinh(t)`。

第一个函数将只返回形成的矩阵的第一个元素，然后“拉直”，因为该`c`函数导致它松散了尺寸。如果您想保留矩阵字符，请使用`rbind`或`cbind`取决于下一个处理数据的函数。

第二个函数将首先计算“坐标”，然后让它消失在垃圾收集器中，因为它返回的是由 形成的矩阵`cosh(t)`。

您将无法获得更好的答案，因为您目前正在让我们都猜测您传递给函数的数据结构类型。您应该`dput()`将参数的结果发布到此函数。你应该告诉我们绘图函数的帮助页面期望什么作为参数类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T16:07:17.213

的结果

```
coordinates <- c(cosh(t), sinh(t)) 
```

是长度的数值向量`2 * length(t)`。

命令

```
return(coordinates[1]) 
```

仅返回此向量的第一个值。（`coordinates[1]`和的结果`cosh(t)`仅在 时相同`length(t) == 1`。）要返回 的结果，您可以使用基于 的长度的序列进行`cosh(h)`索引：`coordinates``t`

```
coordinates <- c(cosh(t), sinh(t))

return(coordinates[seq_along(t)]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T16:01:51.833

在您的第一个示例中使用双括号。

```
 coordinates[[1]] 
```

* * *

作为故障排除时的有用提示，如果您使用`str(position(x))`两个不同的功能探索两个功能的输出，您应该会看到差异。

也试试

```
 str(vec[1])
   str(vec[[1]]) 
```

# android - 从 ViewPager 设置壁纸

> ID：13670965
> 
> 赞同：1
> 
> 时间：2012-12-02T15:58:47.400
> 
> 标签：android, eclipse, gallery, android-viewpager, wallpaper

我有一个 ViewPager，我在其中使用 swype 更改图像。现在我想制作一个按钮，它将用户看到的当前图像设置为墙纸。如何实现 onPageSelected 或类似的东西来完成这项工作？

代码：

```
package com.example.app;

import java.io.IOException;
import android.app.Activity;
import android.app.WallpaperManager;
import android.content.Context;
import android.os.Bundle;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.support.v4.view.ViewPager.OnPageChangeListener;
import android.view.View;
import android.view.ViewGroup;
import android.view.Window;
import android.view.animation.AnimationUtils;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.ImageSwitcher;
import android.widget.ImageView;
import android.widget.Toast;
import android.widget.ViewSwitcher;
import android.view.View.OnClickListener;
import android.widget.ViewSwitcher.ViewFactory;

public class MainActivity extends Activity {

      @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_main);

            ViewPager viewPager = (ViewPager) findViewById(R.id.view_pager);
            ImagePagerAdapter adapter = new ImagePagerAdapter();
            viewPager.setAdapter(adapter);

      }

          private class ImagePagerAdapter extends PagerAdapter {
            private int[] mImages = new int[] {
                R.drawable.image1,
                R.drawable.image2,
                R.drawable.image3,
                R.drawable.image4

            };

            @Override
            public int getCount() {
              return mImages.length;
            }

            @Override
            public boolean isViewFromObject(View view, Object object) {
              return view == ((ImageView) object);
            }

            @Override
            public Object instantiateItem(ViewGroup container, final int position) {
              Context context = MainActivity.this;
              ImageView imageView = new ImageView(context);
              int padding = context.getResources().getDimensionPixelSize(
                  R.dimen.padding_medium);
              imageView.setPadding(padding, padding, padding, padding);
              imageView.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
              imageView.setImageResource(mImages[position]);
              ((ViewPager) container).addView(imageView, 0);
              return imageView;
            } 

            @Override
            public void destroyItem(ViewGroup container, final int position, Object object) {
              ((ViewPager) container).removeView((ImageView) object);
            }
          }
    }
} 
```

之前用的按钮代码，现在不知道如何在ViewPager中实现：

```
Button button = (Button) this.findViewById(R.id.button1); 
button.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            WallpaperManager myWallpaperManager = WallpaperManager.getInstance(getApplicationContext());            
                                try {
                myWallpaperManager.setResource(mImages[position]);
                      Toast.makeText(MainActivity.this, "Wallpaper ok!", Toast.LENGTH_SHORT).show();
                 } catch (IOException e) {
                    Toast.makeText(MainActivity.this, "Wallpaper error!", Toast.LENGTH_SHORT).show();
                    }
          }
       }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:11:02.127

你可以使用喜欢

```
viewPager.setOnPageChangeListener(new OnPageChangeListener() {

        @Override
        public void onPageSelected(int arg0) {
            // TODO Auto-generated method stub
            //Here you can set the wallpaper
                    curruntPosition=arg0;

        }

        @Override
        public void onPageScrolled(int arg0, float arg1, int arg2) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onPageScrollStateChanged(int arg0) {
            // TODO Auto-generated method stub

        }
    }); 
```

接着

```
 Button button = (Button) this.findViewById(R.id.button1); 
button.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            WallpaperManager myWallpaperManager = WallpaperManager.getInstance(getApplicationContext());            
                                try {
                myWallpaperManager.setResource(mImages[curruntPosition]);
                      Toast.makeText(MainActivity.this, "Wallpaper ok!", Toast.LENGTH_SHORT).show();
                 } catch (IOException e) {
                    Toast.makeText(MainActivity.this, "Wallpaper error!", Toast.LENGTH_SHORT).show();
                    }
          }
       }); 
```

并且不要忘记声明一个全局变量

```
int curruntPosition=0; 
```

# shortest-path - 使用 A* 算法进行航班搜索；合适的成本和好运

> ID：13670966
> 
> 赞同：2
> 
> 时间：2012-12-02T15:58:51.270
> 
> 标签：shortest-path, a-star, preflight

当给出源机场和目的地机场时，我将使用 A* 算法找到最快和最便宜的航班。这两条路径将分别找到。

为了找到最快的路径，我将使用源机场和目的地机场之间的平均旅行时间作为 huristic 值。

我有几个问题：

1.  你能告诉我，我在哪里可以找到每个机场对之间的平均旅行时间的数据源？或者任何包含每个机场对之间距离的数据源？

2.  找到最便宜的路径并不像我想的那样容易。所有票价都不能作为优势的成本（航班段作为优势）。因为某些票价适用于多个航班段。例如：从 SFO通过 BOS 100 美元到肯尼迪国际机场。

    2.1 你能建议我找到最便宜的路径吗？

    2.2 A*适合这个吗？

    2.3 如果合适，最合适的 huristic 值是什么？

    2.4 有没有办法获得包含每个机场对之间平均票价的数据源？

伟大的帮助朋友......在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:44:01.860

一些杂七杂八的答案：

1.  你可能不需要它。直线飞机的速度非常一致（平均约为 800/900 公里/小时），因此您可以简单地将距离除以速度并获得时间。距离可以很容易地从网络上的任何地图服务（例如谷歌地图）获得。为了更好地估计，您可以对运营商的网站进行数据挖掘（见下文）。

2.  看起来您必须使用多重加权边缘分析。也就是说：每条边都会有不止一个与之相关的权重/成本，您必须将所有这些都考虑在内。这是因为总成本通常是许多独立元素的总和。同一票价适用于多个航班这一事实可能无关紧要。只需对所有涉及的航班应用相同的票价，然后继续。

2.1 见上文。

2.3 最有可能的是，您还应该考虑“收缩层次结构”：[https](https://en.wikipedia.org/wiki/Contraction_hierarchy) ://en.wikipedia.org/wiki/Contraction_hierarchy 。看看 OSRM：[http](http://project-osrm.org/) ://project-osrm.org/ 。

2.4 最有可能的是，唯一的方法是对网络进行数据挖掘（因为票价在不断变化）。

对网络中的距离、旅行时间和其他数据进行数据挖掘并不容易，可能需要与运营商达成某种协议。查看他们的网站以获取信息。

# linux - 防止Linux上实时进程中的小页面错误

> ID：13670970
> 
> 赞同：7
> 
> 时间：2012-12-02T15:59:48.913
> 
> 标签：linux, real-time, page-fault

我需要使该过程尽可能实时运行。

所有通信都是通过共享内存完成的 - 内存映射文件 - 根本没有系统调用 - 它在共享内存上使用忙等待。

该进程以实时优先级运行，并且所有内存都被锁定`mlockall(MCL_CURRENT|MCL_FUTURE)`，成功并且进程有足够`ulimits` 的内存锁定所有内存。

当我在它上面运行它时，`perf stat -p PID`我仍然会得到一些轻微的页面错误。

我用进程亲和力和没有进程亲和力对此进行了测试。

**问题：**

是否有可能完全消除它们——即使是轻微的页面错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T15:21:02.337

我通过从内存映射文件切换到 POSIX 共享内存`shm_open`+ 内存锁定解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:07:51.013

如果我正确理解了这个问题，那么完全避免轻微的页面错误是不可能的。在包括 Linux 在内的大多数现代操作系统中，操作系统不会在程序启动时将所有文本和数据段加载到内存中。它分配内部数据结构，当需要文本和数据时，页面本质上是错误的。这导致页面错误物理内存可供进程使用，从后备存储交换页面。因此，可以在不访问后备存储的情况下避免轻微的页面错误，这可能是不可能的。

# php - mysql php js 实时搜索

> ID：13670979
> 
> 赞同：1
> 
> 时间：2012-12-02T16:00:45.150
> 
> 标签：php, ajax, search, live

我目前正在做一个基于 Jquery/ajax/php 的实时搜索表单，但它似乎有效。你们能在我的代码中发现问题吗？:)

```
function getStates(value) {
  $.post("search.php",{ partialState: value }, function(data) { 
    $("#results").html(data);
  });
}

<input type="text" onkeyup="getStates(this.value)" />
<div id="results"></div> 
```

搜索.php：

```
$partialStates = $_POST['partialState'];
$states = mysql_query("SELECT institution_name FROM sb_institutions WHERE institution_name LIKE '%$partialStates%'");

while($stateArray = mysql_fetch_array($states)) {
    echo "<div>" . $state['institution_name'] . "</div>";
} 
```

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T17:27:30.217

您的代码看起来不错。

解决 ajax 问题的最佳方法是使用带有 Firebug 扩展的 Firefox。

这样你就可以看到：

1.  如果函数被触发

2.  如果 $_POST 值很好：url + 参数

3.  服务器作为响应发送的内容

4.  如果你的 js 有错误

    所有这些都将在 firebug 的控制台选项卡中。安装 firebug 后，右键单击页面并选择 debug with firebug。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T21:13:25.133

这是您可以使用 Ajax、PHP 和 JQuery 执行的操作。希望这有助于或给你一个开始。

在此处查看现场演示和源代码。

[http://purpledesign.in/blog/to-create-a-live-search-like-google/](http://purpledesign.in/blog/to-create-a-live-search-like-google/)

创建一个搜索框，可能是这样的输入字段。

```
<input type="text" id="search" autocomplete="off"> 
```

现在我们需要听用户在文本区域输入的任何内容。为此，我们将使用 jquery live() 和 keyup 事件。在每个 keyup 上，我们都有一个 jquery 函数“search”，它将运行一个 php 脚本。

假设我们有这样的 html。我们有一个输入字段和一个列表来显示结果。

```
 <div class="icon"></div>
 <input type="text" id="search" autocomplete="off">
 <ul id="results"></ul> 
```

我们有一个 Jquery 脚本，它将监听输入字段上的 keyup 事件，如果它不为空，它将调用 search() 函数。search() 函数将运行 php 脚本并使用 AJAX 在同一页面上显示结果。

这是JQuery。

```
 $(document).ready(function() {  

        // Icon Click Focus
        $('div.icon').click(function(){
            $('input#search').focus();
        });

        //Listen for the event
            $("input#search").live("keyup", function(e) {
            // Set Timeout
            clearTimeout($.data(this, 'timer'));

            // Set Search String
            var search_string = $(this).val();

            // Do Search
            if (search_string == '') {
                $("ul#results").fadeOut();
                $('h4#results-text').fadeOut();
            }else{
                $("ul#results").fadeIn();
                $('h4#results-text').fadeIn();
                $(this).data('timer', setTimeout(search, 100));
            };
        });

        // Live Search
        // On Search Submit and Get Results
        function search() {
            var query_value = $('input#search').val();
            $('b#search-string').html(query_value);
            if(query_value !== ''){
                $.ajax({
                    type: "POST",
                    url: "search_st.php",
                    data: { query: query_value },
                    cache: false,
                    success: function(html){
                        $("ul#results").html(html);

                    }
                });
            }return false;    
        }

    })

; 
```

在 php 中，对 mysql 数据库进行查询。php 将返回将使用 AJAX 放入 html 的结果。在这里，结果被放入一个 html 列表中。

假设有一个虚拟数据库，其中包含两个表动物和鸟类，它们具有两个相似的列名“type”和“desc”。

```
//search.php

// Credentials
$dbhost = "localhost";
$dbname = "live";
$dbuser = "root";
$dbpass = "";

//  Connection
global $tutorial_db;

$tutorial_db = new mysqli();
$tutorial_db->connect($dbhost, $dbuser, $dbpass, $dbname);
$tutorial_db->set_charset("utf8");

//  Check Connection
if ($tutorial_db->connect_errno) {
    printf("Connect failed: %s\n", $tutorial_db->connect_error);
    exit();
}
    $html = '';
    $html .= '<li class="result">';
    $html .= '<a target="_blank" href="urlString">';
    $html .= '<h3>nameString</h3>';
    $html .= '<h4>functionString</h4>';
    $html .= '</a>';
    $html .= '</li>';
     $search_string = preg_replace("/[^A-Za-z0-9]/", " ", $_POST['query']);
    $search_string = $tutorial_db->real_escape_string($search_string);

// Check Length More Than One Character
if (strlen($search_string) >= 1 && $search_string !== ' ') {
    // Build Query
    $query = "SELECT *
     FROM animals
     WHERE type LIKE '%".$search_string."%'
     UNION ALL SELECT *
     FROM birf
     WHERE type LIKE '%".$search_string."%'"
     ;
    $result = $tutorial_db->query($query);
        while($results = $result->fetch_array()) {
            $result_array[] = $results;
        }

        // Check If We Have Results
        if (isset($result_array)) {
            foreach ($result_array as $result) {

                // Format Output Strings And Hightlight Matches
                $display_function = preg_replace("/".$search_string."/i", "<b class='highlight'>".$search_string."</b>", $result['desc']);
                $display_name = preg_replace("/".$search_string."/i", "<b class='highlight'>".$search_string."</b>", $result['type']);
            $display_url = 'https://www.google.com/search?q='.urlencode($result['type']).'&ie=utf-8&oe=utf-8';

                // Insert Name
                $output = str_replace('nameString', $display_name, $html);

                // Insert Function
                $output = str_replace('functionString', $display_function, $output);

                // Insert URL
                $output = str_replace('urlString', $display_url, $output);

                // Output
                echo($output);
            }
        }else{

            // Format No Results Output
            $output = str_replace('urlString', 'javascript:void(0);', $html);
            $output = str_replace('nameString', '<b>No Results Found.</b>', $output);
            $output = str_replace('functionString', 'Sorry :(', $output);

            // Output
            echo($output);
        }
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-16T20:53:01.620

另请参阅此[http://crewow.com/AutoSuggest_Search_Tutorial.php](http://crewow.com/AutoSuggest_Search_Tutorial.php) 实时搜索教程是一个基于 PHP Ajax 的教程，其中包含以下页面和文件夹。

# image - 如何在 AS3 中动态添加图像？

> ID：13670984
> 
> 赞同：0
> 
> 时间：2012-12-02T16:01:21.497
> 
> 标签：image, actionscript-3, containers

好的，我想添加一系列图像，然后能够拖放每个图像。我将所有图像都嵌入到类图像中。s0,s1,s2 是图像类的实例。现在这就是我所做的

```
public function Main():void 
{
    if (stage) init();
    else addEventListener(Event.ADDED_TO_STAGE, init);

    function init(e:Event = null):void 
    {
        var a:Array = new Array(); 
        var imageContainer:Sprite = new Sprite;
        var imgClass:Images = new Images(); 

       for (var i:int = 0; i < 9; i++) {
            a[i].push(imgClass.(s+String(i)));
            imageContainer.addChild[a[i]]; 
        }
        stage.addChild(imageContainer);
        imageContainer.addEventListener(MouseEvent.MOUSE_UP, takeIt);
        imageContainer.addEventListener(MouseEvent.MOUSE_DOWN, dropIt);

        function takeIt(event:MouseEvent) {
            event.currentTarget.startDrag(); 
        }
        function dropIt(event:MouseEvent) {
            event.currentTarget.stopDrag(); 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:05:11.427

我已经稍微改写了你的代码，但我无法测试它抱歉。

我注意到的第一个想法是您的`init`方法在您的`Main`方法中。然后你的`takeIt`和`dropIt`方法在里面`init`。我不确定这是否真的有效，但我已经在下面的代码中修复了它。

在我的代码中，我假设您在`Images`类中拥有的图像实例是`Bitmap`. 这意味着在`for`循环中我必须将每个都添加到 a`Sprite`以便您可以访问`startDrag`and `stopDrag`。我在每个图像上监听`MOUSE_DOWN`事件，并将图像设置为`selectedImage`var 并执行 startDrag。我还听`MOUSE_UP`on the `stage`，并删除 currentImage。

```
package 
{
    import flash.display.Bitmap;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.MouseEvent;

    public class  Main extends Sprite
    {
        private var selectedImage:Sprite;

        public function Main():void 
        {
            if (stage) init();
            else addEventListener(Event.ADDED_TO_STAGE, init);
        }

        function init(e:Event = null):void 
        {
            removeEventListener(Event.ADDED_TO_STAGE, init);

            var imageContainer:Sprite = new Sprite();
            var imgClass:Images = new Images(); 

            for (var i:int = 0; i < 9; i++) 
            {
                var imgInstance:Bitmap = imgClass['s' + i.toString()] as Bitmap;
                var imgSprite:Sprite = new Sprite();
                imgSprite.addChild(imgInstance); // Put image in a sprite so we can use startDrag on it.
                imageContainer.addChild(imgSprite);
                imgInstance.addEventListener(MouseEvent.MOUSE_DOWN, img_mouseDownHandler);
            }

            addChild(imageContainer);

            stage.addEventListener(MouseEvent.MOUSE_UP, stage_mouseUpHandler);
        }

        private function dropSelectedImage():void 
        {
            if (selectedImage) 
            {
                selectedImage.stopDrag(); 
            }
        }

        private function img_mouseDownHandler(e:MouseEvent):void 
        {
            dropSelectedImage();
            selectedImage = e.currentTarget as Sprite;
            selectedImage.startDrag();
        }

        private function stage_mouseUpHandler(e:MouseEvent):void 
        {
            dropSelectedImage();
        }
    }
} 
```

要在循环中构建图像，您也可以手动构建数组，然后像这样循环遍历数组：

```
var images:Array = [imgClass.s0, imgClass.s1, imgClass.s2, imgClass.s3, imgClass.s4, imgClass.s5, imgClass.s6, imgClass.s7, imgClass.s8];
for each (var img:Bitmap in images) 
{
    var imgSprite:Sprite = new Sprite();
    imgSprite.addChild(img); // Put image in a sprite so we can use startDrag on it.
    imageContainer.addChild(imgSprite);
    imgInstance.addEventListener(MouseEvent.MOUSE_DOWN, img_mouseDownHandler);
} 
```

希望这有帮助。随时要求我在评论中详细说明或解释其他任何内容。

# java - 我们可以实例化一个抽象类吗？

> ID：13670991
> 
> 赞同：615
> 
> 时间：2012-12-02T16:01:58.503
> 
> 标签：java, oop, class, object, abstract

在我的一次采访中，有人问我“我们是否可以实例化一个抽象类？”

我的回答是“不，我们不能”。但是，面试官告诉我“错了，我们可以。”

我为此争论了一下。然后他让我自己在家试试。

```
abstract class my {
    public void mymethod() {
        System.out.print("Abstract");
    }
}

class poly {
    public static void main(String a[]) {
        my m = new my() {};
        m.mymethod();
    }
} 
```

在这里，我正在创建我的类的实例并调用抽象类的方法。谁能给我解释一下？我面试的时候真的错了吗？

* * *

## 回答 #1

> 赞同：771
> 
> 时间：2012-12-02T16:04:01.307

> 在这里，我正在创建我的班级的实例

不，您不是在这里创建抽象类的实例。相反，您正在创建抽象类的*匿名子类的实例。*然后您在指向*子类 object的**抽象类*引用上调用该方法。

 *[这种行为在JLS - 第 15.9.1 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.9)中明确列出： -

> 如果类实例创建表达式以类体结尾，则被实例化的类是匿名类。然后：
> 
> *   如果 T 表示一个类，则声明由 T 命名的类的匿名直接子类。如果 T 表示的类是最终类，则这是编译时错误。
> *   如果 T 表示一个接口，则声明一个实现由 T 命名的接口的 Object 的匿名直接子类。
> *   在任何一种情况下，子类的主体都是类实例创建表达式中给出的 ClassBody。
> *   **被实例化的类是匿名子类。**

强调我的。

此外，在[JLS - 第 # 12.5 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.5)中，您可以阅读有关*对象创建过程*的信息。我将在这里引用一个声明：-

> 每当创建一个新的类实例时，都会为其分配内存空间，并为该类类型中声明的所有实例变量和该类类型的每个超类中声明的所有实例变量（包括所有可能隐藏的实例变量）分配空间。
> 
> 就在作为结果返回对新创建对象的引用之前，使用以下过程处理指示的构造函数以初始化新对象：

您可以在我提供的链接上阅读完整的程序。

* * *

要实际看到被实例化的类是*Anonymous SubClass*，您只需要编译您的两个类。假设您将这些类放在两个不同的文件中：

**我的.java：**

```
abstract class My {
    public void myMethod() {
        System.out.print("Abstract");
    }
} 
```

**聚.java：**

```
class Poly extends My {
    public static void main(String a[]) {
        My m = new My() {};
        m.myMethod();
    }
} 
```

现在，编译两个源文件：

```
javac My.java Poly.java 
```

现在在您编译源代码的目录中，您将看到以下类文件：

```
My.class
Poly$1.class  // Class file corresponding to anonymous subclass
Poly.class 
```

看到那个类 - `Poly$1.class`。它是编译器创建的类文件，对应于您使用以下代码实例化的匿名子类：

```
new My() {}; 
```

所以，很明显有一个不同的类被实例化。只是，那个类只有在编译器编译后才被命名。

通常，您的类中的所有匿名子类都将以这种方式命名：

```
Poly$1.class, Poly$2.class, Poly$3.class, ... so on 
```

这些数字表示这些匿名类出现在封闭类中的顺序。

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2012-12-02T16:04:53.127

上面实例化了一个匿名内部类，它是`my`抽象类的子类。它并不严格等同于实例化抽象类本身。OTOH，每个子类实例都是其所有超类和接口的实例，因此大多数抽象类确实是通过实例化它们的具体子类之一来实例化的。

如果面试官只是说“错了！” 没有解释，并举了这个例子，作为一个独特的反例，我认为他不知道他在说什么，虽然。

* * *

## 回答 #3

> 赞同：88
> 
> 时间：2012-12-02T16:29:18.867

`= my() {};`意味着有一个匿名实现，而不是一个对象的简单实例化，它应该是 : `= my()`。你永远不能实例化一个抽象类。

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2012-12-06T16:12:15.507

你可以做的只是观察：

1.  为什么要`poly`延长`my`？这是没用的...
2.  编译的结果是什么？三个文件`my.class`：`poly.class`和`poly$1.class`
3.  如果我们可以像这样实例化一个抽象类，我们也可以实例化一个接口......奇怪......

**我们可以实例化一个抽象类吗？**

不，我们不能。我们可以做的是，创建一个匿名类（即第三个文件）并实例化它。

**那么超类实例化呢？**

抽象超类不是由**我们**实例化的，而是由 java 实例化的。

**编辑：让他测试一下**

```
public static final void main(final String[] args) {
    final my m1 = new my() {
    };
    final my m2 = new my() {
    };
    System.out.println(m1 == m2);

    System.out.println(m1.getClass().toString());
    System.out.println(m2.getClass().toString());

} 
```

输出是：

```
false
class my$1
class my$2 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2012-12-07T04:09:10.577

您可以简单地回答，只需一行

> **不**，你永远不能实例化抽象类

但是，面试官还是不同意，那你可以告诉他/她

> 你所能做的就是，你可以创建一个匿名类。

并且，根据匿名类，**类在同一位置/行声明和实例化**

因此，面试官可能有兴趣检查您的信心水平以及您对 OOP 的了解程度。

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2015-04-07T05:20:32.083

技术部分在其他答案中已经很好地涵盖了，主要以：
“他错了，他什么都不知道，请他加入 SO 并全部清除:)”

我想说明一个事实（在其他答案中已经提到），这可能是一个[压力问题](http://faze.ca/the-stress-interview-dealing-with-it/)，并且是许多面试官了解更多关于您以及您如何应对困难和不寻常情况的重要工具。通过给你错误的代码，他*可能*想看看你是否反驳。要知道您是否有信心在类似的情况下与您的前辈抗衡。

PS：不知道为什么，感觉面试官看了这篇文章。

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2012-12-03T09:14:11.727

抽象类不能被实例化，但它们可以被子类化。[看到这个链接](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)

最好的例子是

虽然**Calender 类有一个抽象方法 getInstance()**，但是当你说`Calendar calc=Calendar.getInstance();`

**calc 将类 GregorianCalendar 的类实例称为“GregorianCalendar extends Calendar** ”

事实上**匿名内部类型** **允许您创建抽象类的无名子类**和它的实例。

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2013-03-18T03:10:59.217

**技术解答**

抽象类不能被实例化——这是定义和设计的。

来自 JLS，第 8 章。类：

> *命名类可以被声明为抽象的（第 8.1.1.1 节），如果实现不完整，则必须声明为抽象；这样的类不能被实例化，但可以被子类扩展。*

来自 Classes.newInstance() 的 JSE 6 java 文档：

> *InstantiationException - 如果这个 Class 表示抽象类、接口、数组类、原始类型或 void；或者如果该类没有空构造函数；或者如果实例化由于某种其他原因而失败。*

当然，您可以实例化抽象类（包括匿名子类）的具体子类，也可以对抽象类型的对象引用进行类型转换。

**不同的角度 - 团队合作和社交智能：**

当我们处理复杂的技术和法律规范时，这种技术误解在现实世界中经常发生。

“人际交往能力”在这里可能比“技术技能”更重要。如果竞争性地和积极地试图证明你的论点，那么理论上你可能是正确的，但你也可能在打架/破坏“面子”/制造敌人时造成比其价值更大的伤害。在解决你的分歧时要和解和理解。谁知道-也许您“都对”，但对术语的含义略有不同？

谁知道呢——虽然不太可能，但面试官可能会故意引入一个小冲突/误解，让你陷入一个充满挑战的境地，看看你在情感和社交方面的表现如何。与同事保持亲切和建设性，听从前辈的建议，并在面试后通过电子邮件或电话解决任何挑战/误解。表明你有积极性和注重细节。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2013-02-14T12:33:26.240

这是一个公认的事实，`abstract class`不能像每个人都回答的那样实例化**。**

当程序定义匿名类时，编译器实际上创建了一个不同名称的新类（具有匿名类编号的`EnclosedClassName$n`模式`n`）

因此，如果你反编译这个 Java 类，你会发现如下代码：

我的课

```
abstract class my { 
    public void mymethod() 
    { 
        System.out.print("Abstract"); 
    }
} 
```

poly$1.class（“匿名类”的生成类）

```
class poly$1 extends my 
{
} 
```

ploly.cass

```
public class poly extends my
{
    public static void main(String[] a)
    {
        my m = new poly.1(); // instance of poly.1 class NOT the abstract my class

        m.mymethod();
    }
} 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2013-11-03T15:39:24.907

扩展一个类并不意味着您正在实例化该类。实际上，在您的情况下，您正在创建子类的实例。

我很确定抽象类不允许启动。所以，我会说不：你不能实例化一个抽象类。但是，您可以扩展它/继承它。

您不能直接实例化抽象类。但这并不意味着您不能间接获得类的实例（实际上不是原始抽象类的实例）。我的意思是你不能实例化原始抽象类，但你可以：

1.  创建一个空类
2.  从抽象类继承
3.  实例化派生类

因此，您可以通过派生类实例访问抽象类中的所有方法和属性。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2013-12-26T10:43:10.427

**关于抽象类**

*   无法创建抽象类的对象
*   可以创建变量（可以表现得像数据类型）
*   如果子级不能覆盖父级的至少一个抽象方法，则子级也变为抽象
*   抽象类没有子类是没用的

抽象类的目的是表现得像一个基类。在继承层次结构中，您将看到顶部的抽象类。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2014-01-04T07:24:44.683

不，您不能实例化抽象类。我们只实例化匿名类。在抽象类中，我们声明抽象方法并仅定义具体方法。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2015-11-25T12:31:05.820

**你可以说：**
我们不能实例化一个抽象类，但是我们可以使用`new`关键字来创建一个匿名类实例，只需`{}`在抽象类的末尾添加 as implement body。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2014-06-03T16:11:27.513

实例化抽象类是不可能的。你真正能做的是，在抽象类中实现一些常用方法，让其他方法未实现（声明它们是抽象的），并让具体的后代根据他们的需要实现它们。然后你可以创建一个工厂，它返回这个抽象类的一个实例（实际上是他的实现者）。然后在工厂中决定选择哪个实施者。这被称为工厂设计模式：

```
 public abstract class AbstractGridManager {
        private LifecicleAlgorithmIntrface lifecicleAlgorithm;
        // ... more private fields

        //Method implemented in concrete Manager implementors 
        abstract public Grid initGrid();

        //Methods common to all implementors
        public Grid calculateNextLifecicle(Grid grid){
            return this.getLifecicleAlgorithm().calculateNextLifecicle(grid);
        }

        public LifecicleAlgorithmIntrface getLifecicleAlgorithm() {
            return lifecicleAlgorithm;
        }
        public void setLifecicleAlgorithm(LifecicleAlgorithmIntrface lifecicleAlgorithm) {
            this.lifecicleAlgorithm = lifecicleAlgorithm;
        }
        // ... more common logic and getters-setters pairs
    } 
```

具体实现者只需要实现声明为抽象的方法，但可以访问抽象类中那些未声明为抽象的类中实现的逻辑：

```
public class FileInputGridManager extends AbstractGridManager {

private String filePath;

//Method implemented in concrete Manager implementors 
abstract public Grid initGrid();

public class FileInputGridManager extends AbstractGridManager {

    private String filePath;

    //Method implemented in concrete Manager implementors 
    abstract public Grid initGrid();

    public Grid initGrid(String filePath) {
        List<Cell> cells = new ArrayList<>();
        char[] chars;
        File file = new File(filePath); // for example foo.txt
        // ... more logic
        return grid;
    }
} 
```

最后工厂看起来像这样：

```
public class GridManagerFactory {
    public static AbstractGridManager getGridManager(LifecicleAlgorithmIntrface lifecicleAlgorithm, String... args){
        AbstractGridManager manager = null;

        // input from the command line
        if(args.length == 2){
            CommandLineGridManager clManager = new CommandLineGridManager();
            clManager.setWidth(Integer.parseInt(args[0]));
            clManager.setHeight(Integer.parseInt(args[1]));
            // possibly more configuration logic
            ...
            manager = clManager;
        } 
        // input from the file
        else if(args.length == 1){
            FileInputGridManager fiManager = new FileInputGridManager();
            fiManager.setFilePath(args[0]);
            // possibly more method calls from abstract class
            ...
            manager = fiManager ;
        }
        //... more possible concrete implementors
        else{
            manager = new CommandLineGridManager();
        }
        manager.setLifecicleAlgorithm(lifecicleAlgorithm);
        return manager;
    }
} 
```

AbstractGridManager 的接收者将调用他的方法并获取逻辑，在具体的下降器中（部分在抽象类方法中）实现，而不知道他得到的具体实现是什么。这也称为控制反转或依赖注入。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2015-04-21T19:06:19.553

不，我们不能创建抽象类的对象，而是创建抽象类的引用变量。引用变量用于引用派生类的对象（抽象类的子类）

这是说明此概念的示例

```
abstract class Figure { 

    double dim1; 

    double dim2; 

    Figure(double a, double b) { 

        dim1 = a; 

        dim2 = b; 

    } 

    // area is now an abstract method 

    abstract double area(); 

    }

    class Rectangle extends Figure { 
        Rectangle(double a, double b) { 
        super(a, b); 
    } 
    // override area for rectangle 
    double area() { 
        System.out.println("Inside Area for Rectangle."); 
        return dim1 * dim2; 
    } 
}

class Triangle extends Figure { 
    Triangle(double a, double b) { 
        super(a, b); 
    } 
    // override area for right triangle 
    double area() { 
        System.out.println("Inside Area for Triangle."); 
        return dim1 * dim2 / 2; 
    } 
}

class AbstractAreas { 
    public static void main(String args[]) { 
        // Figure f = new Figure(10, 10); // illegal now 
        Rectangle r = new Rectangle(9, 5); 
        Triangle t = new Triangle(10, 8); 
        Figure figref; // this is OK, no object is created 
        figref = r; 
        System.out.println("Area is " + figref.area()); 
        figref = t; 
        System.out.println("Area is " + figref.area()); 
    } 
} 
```

在这里，我们看到我们无法创建 Figure 类型的对象，但我们可以创建 Figure 类型的引用变量。这里我们创建了一个 Figure 类型的引用变量，Figure 类引用变量用于引用 Rectangle 类和 Triangle 类的对象。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-11-24T12:16:23.633

实际上我们不能直接创建抽象类的对象。我们创建的是抽象调用的引用变量。引用变量用于引用继承抽象类的类的对象，即抽象类的子类。*

# android - Web 移动应用程序在浏览器中打开但不在 web 视图中

> ID：13670992
> 
> 赞同：1
> 
> 时间：2012-12-02T16:02:11.673
> 
> 标签：android, android-webview

我在使用 webview 时遇到问题。当我在 android 浏览器中打开 web 移动 url 时，它会完美打开，但是当我使用 webView 时，它不会呈现任何视图并卡住显示进度条。我正在使用以下代码：

```
myWebView = (WebView) findViewById(R.id.ctn_webview);
WebSettings webSetting = myWebView.getSettings();
webSetting.setJavaScriptEnabled(true);
webSetting.setDomStorageEnabled(true);
webSetting.setAppCacheEnabled(true);
webSetting.setBuiltInZoomControls(true);
webSetting.setJavaScriptCanOpenWindowsAutomatically(true);
webSetting.setGeolocationDatabasePath("/data/data/<my-app-pkg>/databases");
webSetting.setGeolocationEnabled(true);
webSetting.setDatabasePath("/data/data/<my-app-pkg>/databases");
webSetting.setDatabaseEnabled(true);

webSetting.setAllowFileAccess(true);
myWebView.setWebViewClient(new WebViewClient());
myWebView.loadUrl(myUrl); 
```

请注意，该页面位于登录凭据后面，因此它会重定向到中间的许多 url 以到达最终页面。登录页面运行良好，经过身份验证后，我被重定向到最后一页，我看到一个圆形进度在移动（下图）。在那里它应该呈现许多按钮和表单的东西。

此外，当我在模拟器中的浏览器中打开相同的 url 时，它运行良好。我不知道我错过了什么。请帮忙。

![我卡住的页面。 它不是渲染视图。](../Images/265a99359301d917c58594cb21bc2d71.png)

# perl - 使用 awk/perl 过滤 tomcat 日志

> ID：13670994
> 
> 赞同：-1
> 
> 时间：2012-12-02T16:02:36.340
> 
> 标签：perl, tomcat, logging, awk, filtering

我正在尝试从 tomcat 日志中提取错误|异常。由于 tomcat 日志在多行中有错误详细信息。我想将每个新日志条目视为我的记录，即日期可以作为记录分隔符。

```
`Oct 4, 2012 4:00:38 PM org.apache.catalina.loader.WebappClassLoader loadClass
INFO: Illegal access: this web application instance has been stopped already.  Could not load com.google.common.base.Stopwatch.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
java.lang.IllegalStateException
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1531)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1491)
        at com.myweb.ontest.stats.RpcInterceptor.intercept(RpcInterceptor.java:45)
        at com.myweb.ontest.platform.SupplySource$Iface$$EnhancerByCGLIB$$6b5e8142.finalize()
        at java.lang.ref.Finalizer.invokeFinalizeMethod(Native Method)
        at java.lang.ref.Finalizer.runFinalizer(Finalizer.java:83)
        at java.lang.ref.Finalizer.access$100(Finalizer.java:14)
        at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:160)
Oct 4, 2012 4:00:38 PM Org.apache.catalina.loader ....` 
```

`请让我知道如何使用 awk/perl 脚本来完成。`

 `谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:26:11.383

我首先在记录之间添加一个空行：

```
awk '/^[A-Z][a-z]/ && f++{print ""}1' file 
```

因此您可以通过使用空行作为记录分隔符在后续的 awk 脚本中轻松处理它：

```
awk '/^[A-Z][a-z]/ && f++{print ""}1' file |
awk -v RS= -F'\n' '{print "Record #" NR; for (i=1;i<=NF;i++) print "Field #" i, "[" $i "]"}'
Record #1
Field #1 [Oct 4, 2012 4:00:38 PM org.apache.catalina.loader.WebappClassLoader loadClass]
Field #2 [INFO: Illegal access: this web application instance has been stopped already.  Could not load com.google.common.base.Stopwatch.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.]
Field #3 [java.lang.IllegalStateException]
Field #4 [        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1531)]
Field #5 [        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1491)]
Field #6 [        at com.myweb.ontest.stats.RpcInterceptor.intercept(RpcInterceptor.java:45)]
Field #7 [        at com.myweb.ontest.platform.SupplySource$Iface$$EnhancerByCGLIB$$6b5e8142.finalize()]
Field #8 [        at java.lang.ref.Finalizer.invokeFinalizeMethod(Native Method)]
Field #9 [        at java.lang.ref.Finalizer.runFinalizer(Finalizer.java:83)]
Field #10 [        at java.lang.ref.Finalizer.access$100(Finalizer.java:14)]
Field #11 [        at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:160)]
Record #2
Field #1 [Oct 7, 2012 4:00:38 PM org.apache.catalina.loader.WebappClassLoader loadClass]
Field #2 [INFO: just a dummy record]
Field #3 [java.lang.IllegalStateException]
Field #4 [        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1531)]
Field #5 [        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1491)]
Field #6 [        at com.myweb.ontest.stats.RpcInterceptor.intercept(RpcInterceptor.java:45)]
Field #7 [        at com.myweb.ontest.platform.SupplySource$Iface$$EnhancerByCGLIB$$6b5e8142.finalize()]
Field #8 [        at java.lang.ref.Finalizer.invokeFinalizeMethod(Native Method)]
Field #9 [        at java.lang.ref.Finalizer.runFinalizer(Finalizer.java:83)]
Field #10 [        at java.lang.ref.Finalizer.access$100(Finalizer.java:14)]
Field #11 [        at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:160)] 
```

您没有发布您希望输出的样子，因此如果上述内容没有为您提供足够的信息来执行此操作，请发布您的示例输入的预期输出

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T21:52:33.373

假设您要将这些错误放入 MySQL 数据库中，我会这样做。

```
#!/usr/bin/perl -Tw

use strict;
use warnings;
use English qw( -no_match_vars $OS_ERROR );
use Readonly;
use DBI;

Readonly my $LOG_FILENAME => '/var/log/tomcat.log';

Readonly my $DATE_REGEX => qr{
    \w{3} \s \d+, \s        # Oct 4,
    \d{4}         \s        # 2012
    \d+:\d+:\d+   \s \w{2}  # 4:00:38 PM
}xms;

my $sth;
{
    my $dbh = DBI->connect(
        'DBI:mysql:database=errors;host=localhost',
        'error_monitor',
        '*********',
        { 'RaiseError' => 1 }
    );

    die $DBI::errstr
        if !$dbh;

    $sth = $dbh->prepare_cached( q{
        INSERT INTO error (
            date,
            text
        ) VALUES (
            ?,
            ?
        )
    } );

    die $DBI::errstr
        if !$sth;
}

my $fh;
{
    open $fh, '<', $LOG_FILENAME
        or die "open $LOG_FILENAME: $OS_ERROR";
}

my ( $count, %record ) = ( 0, () );

while ( my $line = <$fh> ) {

    if ( $line =~ m{\A ( $DATE_REGEX ) \s ( .+ ) }xms ) {

        my ( $date, $text ) = ( $1, $2 );

        if (%record) {
            $sth->execute( @record{qw( date text )} );
            %record = ();
            $count++;
        }

        @record{qw( date text )} = ( $date, $text );
    }
    elsif ( exists $record{date} ) {

        $record{text} .= $line;
    }
    else {

        warn "malformed message: $line";
    }
}

if (%record) {
    $sth->execute( @record{qw( date text )} );
    $count++;
}

close $fh
    or die "close $LOG_FILENAME: $OS_ERROR";

print "inserted $count error records\n"
    or die "print: $OS_ERROR";

__END__ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T16:32:26.730

在 perl 中你可以这样做：-

```
use strict;
my $log = join('', <STDIN>);
my %entries = split(/([\r\n]*\w{3} \d+, \d+ \d+:\d+:\d+ [AP]M )/m, $log);

foreach my $key(keys %entries)
{
    print "$key\n";
    print "$entries{$key}\n";
} 
```

上面的代码从标准输入读取整个日志，将其拆分为日期并存储日期，输入哈希并在最后打印哈希。`

# mysql - 如何在 MySQL JOIN 中每行返回多个相关项？

> ID：13670995
> 
> 赞同：1
> 
> 时间：2012-12-02T16:02:50.607
> 
> 标签：mysql, sql

我有一张`articles`桌子和一张`tags`桌子。标签表包含分配给文章的标签。它看起来像这样：

```
id | article_id | tag_name
---------------------------------

1  | 345        | cats
2  | 345        | dogs 
```

我获取文章（以及分配给每篇文章的所有标签）的查询如下所示：

```
SELECT *
FROM `articles` a
JOIN `tags` t ON t.article_id = a.id 
```

问题是，这仅返回 1 个标签，如果为特定文章分配了超过 1 个标签，则这些标签不会返回。有没有一种方法可以让我使用 JOIN 获取与文章关联的所有标签，或者如果没有第二次查询，这是不可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T16:09:23.800

如果您追求多对多关系，我建议您将数据模型拆分为`Article`，`Tag`并`ArticleTag`保持`ArticleTag`关系。

该`ArticleTag`表可能有`ArticleId`和列`TagId`。然后，您将文章和标签放在单独的表格中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-02T16:05:40.523

如果您想获取与文章关联的所有标签，您只需要

```
select * from tags where article_id = ? 
```

如果您还需要文章数据，则在进行连接时将得到*非规范化*结果：

```
select a.*, t.tag_name
from articles a
join tags t
on t.article_id = a.id 
```

仅当您将名称转换为字符串并将它们连接起来，或者让您的应用程序摆弄这种东西时，才能为每篇文章创建一个标签名称列表。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-02T16:09:11.550

虽然你没有完全提到这两个表，但我认为你需要加入 a.article_id = t.article_id

# iphone - 为不同的单元格设置文本

> ID：13670996
> 
> 赞同：0
> 
> 时间：2012-12-02T16:03:03.243
> 
> 标签：iphone, ios, xcode, uitableview

我有一个有几行的表，所有的占位符文本都是相同的。如何以编程方式仅更改第一个占位符文本？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:27:26.657

您需要运行 if 语句来检查单元格的索引。0 是第一个索引，因此您需要检查该行是否为 0。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
       static NSString *CellIdentifier = @"Cell"; 
       UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
       if (cell == nil) {
           cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
       }
       if (indexPath.row == 0) 
           cell.textLabel.text = @"First Cell";
       else
           cell.textLabel.text = @"Not First Cell";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T16:18:53.717

为了在创建/重用单元后访问您的单元，请尝试使用`- (UITableViewCell *)cellForRowAtIndexPath:(NSIndexPath *)indexPath`uitableview 对象的方法！有关此方法的详细说明，请参阅[以下Apple 文档。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)笔记：

> 返回值
> 
> 表示表格单元格的对象，如果单元格不可见或 indexPath 超出范围，则为 nil。

# vba - 设置文本框 VBA 的控制源

> ID：13670997
> 
> 赞同：3
> 
> 时间：2012-12-02T16:03:13.780
> 
> 标签：vba, ms-access, textbox, ms-access-2007

在我的 Access 2007 表单中，我之前成功设置了文本框的 controlSource，直接在属性窗口中，使用此代码

```
=UCase(Left([txtLName],6) & "_" & Left([TxtFName],1)) 
```

但是，为了将其硬编码到表单中，我尝试使用 VBA 使用以下代码设置 controlSource 属性：

```
Me.txtCodePersonal.ControlSource = "=UCase(Left([txtLName],6) & "_" & Left([TxtFName],1))" 
```

在我的调试中，它将我的问题解决到`"_"`这一行的部分。

我不知道 controlSource 属性在 VBA 中是如何工作的，所以我不知道如何纠正这个问题。提前感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T16:38:12.380

您正在尝试为该`.ControlSource`属性分配一个字符串值。但是，该字符串中包含引号。同样，在立即窗口中，这将引发错误：

```
Debug.Print "=UCase(Left([txtLName],6) & "_" & Left([TxtFName],1))" 
```

将字符串内的引号加倍以避免该问题。

```
Debug.Print "=UCase(Left([txtLName],6) & ""_"" & Left([TxtFName],1))"
=UCase(Left([txtLName],6) & "_" & Left([TxtFName],1)) 
```

# objective-c - 核心情节：如何将数据标签始终放在条形图的顶部

> ID：13670999
> 
> 赞同：1
> 
> 时间：2012-12-02T16:03:20.513
> 
> 标签：objective-c, ios, ios5, core-plot

我使用 Core Plot (1.1) 创建了一个条形图，并希望在其条形上方绘制所有数据标签。

**问题**：没有显示负值条的数据标签。

**问题**：如何绘制为条形顶部的负条绘制的数据标签？

谢谢！

![在此处输入图像描述](../Images/387739ca115a2f4e373575dfeeeee904.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:07:59.923

我不认为有一个简单的方法可以做到这一点。您可以隐藏负条的标签并使用绘图空间注释自己绘制它们。