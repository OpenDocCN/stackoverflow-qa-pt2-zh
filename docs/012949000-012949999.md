# StackOverflow 问答 12949000-12949999

# c# - 如何在 xml 中获取节点的内部值

> ID：12949000
> 
> 赞同：0
> 
> 时间：2012-10-18T07:11:17.573
> 
> 标签：c#, xml, xml-parsing

我有一个像这样的 XML：

```
<Employee>
<Name> XXXX </Name>
<Address> YYYY </Addeess>
<Country> ZZZZ </Country>
</Employee> 
```

如何获得 Country 的内在价值？这里 Country 是动态生成的（基于用户输入）。

它可能存在或不存在。如果存在，我需要使用 c# 获取内部值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T07:35:25.110

这可能会帮助您：

```
XmlDocument ob = new XmlDocument();
ob.Load("yourxmlfile.xml");
XmlNodeList obj_country = ob.GetElementsByTagName("Country");
  if(obj_country!= null)
     {
        string innertext_country_node = obj_country[0].InnerText;
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T07:22:05.393

```
 var countryElement = XElement.Parse(xml).Element("Country");
 string result = (countryElement != null) ? countryElement.Value : string.Empty; 
```

# android - Android中的重叠图像菜单

> ID：12949002
> 
> 赞同：1
> 
> 时间：2012-10-18T07:11:24.550
> 
> 标签：android, listview

你知道这种布局是否可以实现listview吗？如果是这样，我应该如何进行？我有分离的卡片图像，我希望文本是动态的（带有白色阴影的渐变文本）

谢谢！

![在此处输入图像描述](../Images/fccec79a87c5ea47ce4125525113160b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:16:27.883

嗨，乔迪·普伊格德里沃尔，

您可以使用形状标签在可绘制文件夹中创建圆角列表视图，并且可以将该形状标签文件设置为列表视图的背景。

有关形状标签和所有这些东西的更多信息，您可以参考以下问题。

1.  [Android上列表项的圆角？](https://stackoverflow.com/questions/4026426/rounded-corner-of-list-item-on-android)

2.  [如何在 Android 中创建带圆角的 ListView？](https://stackoverflow.com/questions/1683185/android-listview-with-rounded-corners)

并参考以下博客

3.  [http://shenhengbin.wordpress.com/2012/03/19/android-practice-listview-with-round-corner/](http://shenhengbin.wordpress.com/2012/03/19/android-practice-listview-with-round-corner/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T07:31:30.250

是的，这绝对是可能的。只需将 listview 行布局设置为具有卡片背景的背景可绘制 (png)。

文字有点棘手。该库可以帮助您创建渐变文本 - [https://github.com/koush/Widgets](https://github.com/koush/Widgets)。

然后你应该还可以设置 GradientTextView 的阴影颜色、大小和偏移量。

# .htaccess - 为什么 id #1 的用户不能编辑用户详细信息？

> ID：12949007
> 
> 赞同：0
> 
> 时间：2012-10-18T07:11:35.860
> 
> 标签：.htaccess, drupal-6

我在 Drupal 6 中有一个站点。当我以用户 #1 身份登录并访问用户/[uid]/edit 中的页面时，我无法访问此页面。我收到拒绝访问错误。

谁能告诉我可能是什么问题以及解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:24:06.777

我认为这是您的任何自定义代码的问题。在代码的某个地方，您可能已经编写了一些条件，因此您正面临这个问题。只需检查您的自定义代码，它可以在访问回调之类的地方。

**另一种方法：**
如果许多开发人员正在处理项目并且配置了 SVN（或任何版本控制），那么只需返回任何修订版，您就可以找到对您造成问题的代码。
希望它会帮助你。

# sql - 如何在查询结果中为不存在的行添加 0 数据？

> ID：12949008
> 
> 赞同：0
> 
> 时间：2012-10-18T07:11:38.687
> 
> 标签：sql, oracle, plsql

我有包含列的表格：“月”和“年”，以及其他数据。

表中的所有行都有不同的值“月”和“年”。

但是对于某些月份和年份行不存在。

我想创建 SQL 查询（... where year in (2010, 2011, 2012) ...），结果这个 SQL 查询有选择年的所有月份，如果某个月份不存在，则将其添加到结果在其他数据列中为 0。

示例：输入：表格

```
data / month / year
+-----+---+------+
| 3.0 | 1 | 2011 |
| 4.3 | 3 | 2011 |
| 5.7 | 4 | 2011 |
| 2.2 | 5 | 2011 |
| 5.4 | 7 | 2011 |
+-----+---+------+ 
```

输出：SELECT ... WHERE year IN (2011)

```
+-----+----+------+
| 3.0 |  1 | 2011 |
|   0 |  2 | 2011 |
| 4.3 |  3 | 2011 |
| 5.7 |  4 | 2011 |
| 2.2 |  5 | 2011 |
|   0 |  6 | 2011 |
| 5.4 |  7 | 2011 |
|   0 |  8 | 2011 |
|   0 |  9 | 2011 |
|   0 | 10 | 2011 |
|   0 | 11 | 2011 |
|   0 | 12 | 2011 |
+-----+----+------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T07:40:41.220

尝试[分区外连接](http://docs.oracle.com/cd/E11882_01/server.112/e25555/tdpdw_sql.htm#CIHFDGIA)：

```
SELECT
  NVL(T.DATA, 0) DATA,
  F.MONTH,
  T.YEAR
FROM <your_table> T
PARTITION BY(T.YEAR)
RIGHT JOIN (SELECT LEVEL MONTH FROM DUAL CONNECT BY LEVEL <= 12) F ON T.MONTH = F.MONTH 
```

在末尾添加您的 WHERE 子句，或使用该定义创建一个视图并对其进行查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T07:33:56.547

```
select datecol, 
       nvl(val,0),
       to_char(d.date_col,'MM') month,
       to_char(d.date_col,'yyyy') year
from(
    select add_months('1-Jan-2011',level-1) as datecol
    from dual connect by level <= 12
     ) d
left join(
    select sum(val) as val, month, year
    from your_table
    group by month, year
    ) S
on (to_char(d.date_col,'MM') = s.month and to_char(d.date_col,'yyyy') = s.year) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T09:02:27.880

```
select nvl(t.data, 0), x.month, nvl(t.year, <your_year>) as year
  from <your_table> t,
       (select rownum as month from dual connect by level < 13) x
 where (t.year is null or t.year = <your_year>)
   and t.month(+) = x.month
 order by x.month 
```

# android - .xml 视图对齐

> ID：12949010
> 
> 赞同：0
> 
> 时间：2012-10-18T07:11:40.443
> 
> 标签：android, xml

我有一个问题，我现在真的不知道如何处理它。这是我的 .xml 文件：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ScrollView01"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="top"
    android:fillViewport="true"
    android:overScrollMode="always"
    android:scrollbarAlwaysDrawVerticalTrack="false" >

<RelativeLayout
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/rlActivityDetails"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#000000"
    android:overScrollMode="always" >

    <ImageButton
        android:id="@+id/ibStartTrip"
        android:layout_width="95dp"
        android:layout_height="80dp"
        android:layout_marginLeft="16dp"
        android:layout_marginTop="10dp"
        android:src="@drawable/car" />

   <TextView
        android:id="@+id/tvStartTrip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/ibStartTrip"
        android:layout_marginLeft="35dp"
        android:textColor="#FFFFFF" />

    <ImageButton
        android:id="@+id/ibStartActivity"
        android:layout_width="95dp"
        android:layout_height="80dp"
        android:layout_alignTop="@+id/ibStartTrip"
        android:layout_toRightOf="@+id/ibStartTrip"
        android:src="@drawable/tools" />

     <TextView
        android:id="@+id/tvStartActivity"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/ibStartActivity"
        android:layout_centerHorizontal="true"
        android:textColor="#FFFFFF" />

    <ImageButton
        android:id="@+id/ibEndActivity"
        android:layout_width="95dp"
        android:layout_height="80dp"
        android:layout_alignTop="@+id/ibStartActivity"
        android:layout_toRightOf="@+id/ibStartActivity"
        android:src="@drawable/finish" />

    <TextView
        android:id="@+id/tvEndActivity"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/ibEndActivity"
        android:layout_below="@+id/ibEndActivity"
        android:layout_marginRight="16dp"
        android:textColor="#FFFFFF" />

    <TableLayout
        android:id="@+id/tableLayoutInfo"
        android:padding="10dp"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"       
        android:layout_margin="10dp"
        android:layout_below="@+id/tvStartActivity"
        android:layout_centerHorizontal="true" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_marginTop="5dp"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >
            <ImageView
               android:id="@+id/imageView1"
               android:layout_width="24dp"
               android:layout_height="24dp"
               android:layout_column="0"
               android:src="@drawable/number" />            
            <TextView
                android:id="@+id/tvActivityIdValue"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_column="1"
                android:layout_weight="1"
                android:layout_marginLeft="10dp"
                android:text="aaaaaaaaaaaaaaaa"
                android:textColor="#FFFFFF"
                android:textSize="16dp" />             
        </TableRow>

        <TableRow
            android:id="@+id/tableRow5"
            android:layout_marginTop="5dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
            <ImageView
                android:id="@+id/imageView2"
                android:layout_width="24dp"
                android:layout_height="24dp"
                android:layout_column="0"
                android:src="@drawable/activity_type" />                
            <TextView
                android:id="@+id/tvActivityTypeValue"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:layout_column="1"
                android:layout_weight="1"
                android:text="aaaaaaaaaaaaaaaa"
                android:textColor="#FFFFFF"
                android:textSize="16dp" />      
         </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
            <ImageView
                android:id="@+id/imageView3"
                android:layout_width="24dp"
                android:layout_height="24dp"
                android:layout_column="0"
                android:src="@drawable/site" />                      
            <TextView
                android:id="@+id/tvSiteNameValue"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_column="1"
                android:layout_weight="1"
                android:layout_marginLeft="10dp"
                android:textColor="#FFFFFF"
                android:text="aaaaaaaaaaaaaa"
                android:textSize="16dp" />                  
        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_marginTop="5dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
            <ImageView
                android:id="@+id/imageView4"
                android:layout_width="24dp"
                android:layout_height="24dp"
                android:layout_column="0"
                android:src="@drawable/brand" />                    
            <TextView
                  android:id="@+id/tvBrandValue"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_column="1"
                  android:layout_marginLeft="10dp"
                  android:gravity="fill_horizontal"
                  android:text="aaaaaaaaaaaaaaaaaa"
                  android:layout_weight="1"
                  android:textColor="#FFFFFF"
                  android:textSize="16dp" />                    
        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_marginTop="5dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
            <ImageView
                android:id="@+id/imageView5"
                android:layout_width="24dp"
                android:layout_height="24dp"
                android:layout_column="0"
                android:src="@drawable/subject" />          
             <TextView
                android:id="@+id/tvSubjectValue"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:layout_column="1"
                android:textColor="#FFFFFF"
                android:layout_marginLeft="10dp"
                android:text="aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
                android:textSize="16dp" />                               
        </TableRow>

        <TableRow
            android:id="@+id/tableRow5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
            <ImageView
                  android:id="@+id/imageView6"
                  android:layout_width="24dp"
                  android:layout_height="24dp"
                  android:layout_column="0"
                  android:src="@drawable/text" />           
            <TextView
                  android:id="@+id/tvTextValue"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_column="1"
                  android:layout_marginLeft="10dp"
                  android:text="aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaasssssssssssssssssss"
                  android:textColor="#FFFFFF"
                  android:layout_weight="1"
                  android:textSize="16dp"
                  android:width="0dip" />            
        </TableRow>
         </TableLayout>

    <TableLayout
        android:id="@+id/tableLayoutAssets"
        android:padding="10dp"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:layout_below="@+id/tableLayoutInfo"
        android:layout_centerHorizontal="true" >
        <TableRow
            android:id="@+id/tableRow6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
            </TableRow>

     </TableLayout>

     <HorizontalScrollView
            android:id="@+id/horizontalScrollImageView"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_below="@+id/tableLayoutAssets"
            android:layout_marginTop="10dp">     

                 <LinearLayout
                    android:id="@+id/myGallery"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal" >                            
                 </LinearLayout>             
         </HorizontalScrollView>   

         <ProgressBar
             android:id="@+id/progressBarAttachment"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_marginTop="10dp"
             android:layout_centerHorizontal="true"
             android:layout_below="@+id/tableLayoutAssets"
             android:visibility="gone" 
                />

             <ImageButton 
               android:id="@+id/ibAddImage"  
               android:layout_width="wrap_content"
               android:layout_height="wrap_content" 
               android:layout_below="@+id/horizontalScrollImageView"
               android:src="@drawable/add_button"
               android:layout_marginBottom="50dp"/>

</RelativeLayout>
</ScrollView> 
```

正如你所看到的，我有 3 个图像按钮。在它们下面有一个 6 行的表格布局。之后是另一个动态填充的表格布局，下面是一个动态填充图片的水平滚动视图，以及一个用于添加新图片的图像按钮.

现在，我的问题是，每次我打开活动时，在水平滚动视图中加载图片后，我的第一个表格布局的最后一行正在消失（没有完全消失，但它的宽度变得非常小，只适合每行一个字母）。我认为加载图片后，整个布局正在重绘，第一个表不维护他的属性（加载图片后“权重”属性也不再适用）。我真的可以使用一些帮助。任何建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:02:28.437

不需要`android:width`last 上的属性`TextView`。删除它并且`TextViews`应该表现。

# database - 将字符串与数据库对象 django 进行比较

> ID：12949014
> 
> 赞同：0
> 
> 时间：2012-10-18T07:11:44.707
> 
> 标签：database, django, templates, object, comparison

环境：Python 2.7.3 || Django 1.4.1

我正在尝试根据登录用户的角色来限制网页菜单选项。我在模型中创建了一个 UserProfile 类，并将其链接到用户，如文档中所述（在添加用户时，在 Django Admin 中完美工作）。例如，普通用户只有“home”和“mytasks”，而管理员用户也将有“域任务”。

下面是 base.html 模板中的代码：

```
{% if user.get_profile.role == "Admin" %}
    <ul id="nav">
    <li><a href="{% url home %}">Home</a></li>
    <li><a href="{% url mytasks %}">My Tasks</a></li>
    <li><a href="{% url domaintasks %}">Domain Tasks</a></li>
    </ul> 
```

为整个站点渲染导航栏时，会检查上述内容。

我认为问题在于将字符串与数据库对象（打印在下面）进行比较，但无法找出如何进行比较。

```
>>> b = Role.objects.all()
>>> print b
[<Role: Admin>, <Role: User>] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:47:11.730

解决问题的正确方法是为每种类型的用户创建组，您可以使用 django admin 在用户注册时分配这些组，您甚至可以为现有用户编写脚本，然后使用 in_group 模板过滤器检查是否用户具有所需的权限。

但是按照您的方法，角色是返回字符串的 userprofile 类中的属性还是函数？如果是，那么我认为您的代码应该可以工作。但如果角色是另一个模型的外键对象，那么你应该使用类似的东西进行比较：-

```
user.get_profile.role.attribute_in_the_other_model 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:08:12.820

有两种方法可以做到这一点。

*   `Role`像你做的那样检查 , 而不是对象的适当属性。因此，如果您具有`name`in 属性`Role`，则可以检查为

`{% if user.get_profile.role.name == "Admin" %}`

*   如果您可以修改模型代码的另一种`Role`方法是在模型中实现一个方法`Role`来检查角色是否为管理员并在模板中使用它。

`{% if user.get_profile.role.is_admin %}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:36:42.527

另一种方法是调用 Role 模型的字符串表示方法

```
{% if user.get_profile.role.__str__ == "Admin" %} 
```

或者

```
{% if user.get_profile.role.__unicode__ == "Admin" %} 
```

# asp.net - 要在 silverlight mvvm 中的数据网格中绑定的组合框选定项

> ID：12949016
> 
> 赞同：0
> 
> 时间：2012-10-18T07:11:51.677
> 
> 标签：asp.net, silverlight, mvvm

我有一个疑问。这个概念是这样的。我用 MVVM 架构完成了一个 Silverlight 应用程序。在那个设计页面中，我有以下内容。一个组合框和一个数据网格。我使用 observablecollection 绑定数据网格，Employee 字段是 Fname、Sname、Dept。我在组合框中绑定部门。如果我选择任何部门，则需要根据部门值更改数据网格。但它没有更新。我使用 linq 查询来获取结果。它获取值。但它没有约束力。我的代码是，（在 ViewModel 中）

```
Employees = Silverlight_MVVM.DataHelper.EmployeeDataHelper.EmployeeData();

             var semp = from s in Employees where s.Dept.Equals(Names.Dept) select s; 
```

如果你知道答案或方法请告诉。

我需要将 linq“semp”中的选定值分配给 View 中的 Datagrid。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:58:41.810

海我找到了解决方案..

```
 2 things to be happened here.. 
```

1）我在员工中有所有获取的数据结果。因此，如果我从组合框中选择了任何值，我需要将所选结果绑定到数据网格中。为此，我们需要使用Employees.Clear() 方法清除Employees。之后使用 Foreach 循环访问“semp”并返回值..

2) 现在Employees 只包含一个组合框选择值。所以Datagrid 和ComboBox 只显示一个值。如何克服.. 结果如下。

XAML：

```
<ComboBox ItemsSource="{Binding disemp}"  DisplayMemberPath="Dept" SelectedItem="{Binding Names, Mode=TwoWay}" Margin="130,117,0,0" Height="26" VerticalAlignment="Top" HorizontalAlignment="Left" Width="120">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="SelectionChanged">
                    <si:CallDataMethod Method="BindNew"/>
                    <si:SetProperty TargetName="LayoutRoot"/>
                </i:EventTrigger>
                <i:EventTrigger EventName="Loaded">
                    <si:CallDataMethod Method="Selnew"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>

        </ComboBox> 
```

视图模型：

```
public IList<Employee> Employees { get; private set; }
public ObservableCollection<Employee> disemp { get; private set; }
public ObservableCollection<Employee> dgrids { get; private set; }
public ObservableCollection<Employee> EmployeeCopy{ get; private set; }
public EmployeeListViewModel()
        {
            Employees = Silverlight_MVVM.DataHelper.EmployeeDataHelper.EmployeeData ();
            disemp = Silverlight_MVVM.DataHelper.EmployeeDataHelper.Employeedist();
            dgrids=Silverlight_MVVM.DataHelper.EmployeeDataHelper.dgrid();

        }
public void BindNew()
          {
                  Employee emplo = new Employee();
                  Employees = Silverlight_MVVM.DataHelper.EmployeeDataHelper.EmployeeData();
                  EmployeeCopy = dgrids.ToList ();
                  string name = Names.Dept.ToString();
                  var semp = from emp in EmployeeCopy where emp.Dept.Equals(name) select emp;
                  List<Employee> lt = new List<Employee>();
                  lt = semp.ToList();
                  lt.Count();
                  //int i;
                  Employees.Clear();
                  for (int i = 0; i < lt.Count(); i++)
                  {
                      emplo.Fname = lt[0].Fname.ToString();
                      emplo.Sname = lt[0].Sname.ToString();
                      emplo.Dept = lt[0].Dept.ToString();
                      Employees.Add(emplo);
                  }
                  RaisePropertyChanged("Employees");
              }
       } 
```

我添加了虚拟 ObservableCollections.. 仅此而已.. 问题已解决..

# c++ - Windows 更新代理纯 win32 API

> ID：12949018
> 
> 赞同：6
> 
> 时间：2012-10-18T07:11:56.263
> 
> 标签：c++, winapi, windows-update

我正在开发一个示例代码来获取有关 Windows 更新监控的信息。我碰到了 Windows 更新代理 API。链接： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa387099 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa387099(v=vs.85).aspx)

但我找不到任何适用于 win32 的 API。我发现只有 C#/.NET 接口。有没有对应的win32 API？

具体来说，我想找出 Windows 更新/补丁的“发布日期”。期待任何建议和指导。

*   斯里瓦萨

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-18T15:47:17.857

[WUA API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa387287%28v=vs.85%29.aspx)包含一组可从 C++ 应用程序使用的 COM 接口，因此请尝试这些[`IUpdateSearcher`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa386515%28v=vs.85%29.aspx),[`IUpdateSession`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa386854%28v=vs.85%29.aspx)和[`IUpdate`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa386099%28v=vs.85%29.aspx).

检查此示例 c++ 应用程序，该应用程序检索更新和发布日期。

```
#include "stdafx.h"
#include <wuapi.h>
#include <iostream>
#include <ATLComTime.h>
#include <wuerror.h>

using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    HRESULT hr;
    hr = CoInitialize(NULL);

    IUpdateSession* iUpdate;
    IUpdateSearcher* searcher;
    ISearchResult* results;
    BSTR criteria = SysAllocString(L"IsInstalled=1 or IsHidden=1 or IsPresent=1");

    hr = CoCreateInstance(CLSID_UpdateSession, NULL, CLSCTX_INPROC_SERVER, IID_IUpdateSession, (LPVOID*)&iUpdate);
    hr = iUpdate->CreateUpdateSearcher(&searcher);

    wcout << L"Searching for updates ..."<<endl;
    hr = searcher->Search(criteria, &results); 
    SysFreeString(criteria);

    switch(hr)
    {
    case S_OK:
        wcout<<L"List of applicable items on the machine:"<<endl;
        break;
    case WU_E_LEGACYSERVER:
        wcout<<L"No server selection enabled"<<endl;
        return 0;
    case WU_E_INVALID_CRITERIA:
        wcout<<L"Invalid search criteria"<<endl;
        return 0;
    }

    IUpdateCollection *updateList;
    IUpdate *updateItem;
    LONG updateSize;
    BSTR updateName;
    DATE retdate;

    results->get_Updates(&updateList);
    updateList->get_Count(&updateSize);

    if (updateSize == 0)
    {
        wcout << L"No updates found"<<endl;
    }

    for (LONG i = 0; i < updateSize; i++)
    {
        updateList->get_Item(i,&updateItem);
        updateItem->get_Title(&updateName);
        updateItem->get_LastDeploymentChangeTime(&retdate);
        COleDateTime odt;
        odt.m_dt=retdate;
        wcout<<i+1<<" - "<<updateName<<"  Release Date "<< (LPCTSTR)odt.Format(_T("%A, %B %d, %Y"))<<endl;
    }
    ::CoUninitialize();
    wcin.get();
    return 0;
} 
```

# yii - Yii：搜索日期时间段

> ID：12949020
> 
> 赞同：0
> 
> 时间：2012-10-18T07:11:59.700
> 
> 标签：yii

我有一个包含 2 个 mysql DATE 字段“validFrom”和“validTo”的表。

我需要允许用户**搜索 validFrom 和 validTo 之间的时间段（包括）**

使用搜索

*   validFrom >= 搜索的 validFrom 和
*   validTo <= 搜索到的 validTo

**我必须改变什么？**搜索（） ？.

Gii 创建的代码告诉我这个（我认为这是一个 'LIKE %string%' 搜索）

```
$criteria->compare('validFromDate',$this->validFromDate,true);
$criteria->compare('validToDate',$this->validToDate,true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:16:46.750

```
$criteria->addBetweenCondition('colName', $this->validFrom, $this->validTo); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:30:29.853

```
public function search() {
        // Warning: Please modify the following code to remove attributes that
        // should not be searched.

        $criteria = new CDbCriteria;
        $criteria->with = array('user');

        $criteria->compare('nota_id', $this->nota_id, true);
        $criteria->compare('user.nume', $this->filter_nume, true);
        $criteria->compare('persoana1', $this->persoana1, true);
        $criteria->compare('persoana2', $this->persoana2, true);

        $d = $this->getFilterDateRange($this->data_discutie);
        if (!empty($d[0]) && !empty($d[1])) {
            // between condition
            $criteria->addBetweenCondition('data_discutie', $d[0], $d[1]);
        } else if (!empty($d[0])) {
            $criteria->compare('data_discutie', '>=' . $d[0]);
        } else if (!empty($d[1])) {
            $criteria->compare('data_discutie', '<=' . $d[1]);
        }

        $d = null;
        //echo $this->urmatoarea_discutie;
        $d = $this->getFilterDateRange($this->urmatoarea_discutie);
        //print_R($d);
        if (!empty($d[0]) && !empty($d[1])) {
            // between condition
            $criteria->addBetweenCondition('urmatoarea_discutie', $d[0], $d[1]);
        } else if (!empty($d[0])) {
            $criteria->compare('urmatoarea_discutie', '>=' . $d[0]);
        } else if (!empty($d[1])) {
            $criteria->compare('urmatoarea_discutie', '<=' . $d[1]);
        }

        return new CActiveDataProvider($this, array(
                    'criteria' => $criteria,
                    'pagination' => array(
                        'pageSize' => '15',
                    ),
                    'sort' => array(
                        'defaultOrder' => 'coalesce(nullif(t.urmatoarea_discutie, ""), \'zzzzzz\') ASC, t.data_discutie ASC',
                        'attributes' => array(
                            'urmatoarea_discutie',
                            'data_discutie',
                            'persoana2',
                            'persoana1',
                            'filter_nume' => array(
                                'asc' => 'user.nume asc',
                                'desc' => 'user.nume desc'
                            ),
                        ),
                    ),
                ));
    }

    protected function getFilterDateRange($key) {
        $ret = array(&$from, &$to);
        switch ($key) {
            case '-1':
                // past
                $to = strtotime('next hour');
                break;
            case '1':
                // future
                $from = strtotime('last hour');
                break;
            case '-7':
                $from = strtotime('-1 week last monday midnight');
                $to = strtotime('last sunday midnight');
                break;
            case '7':
                $from = strtotime('last monday');
                $to = strtotime('next sunday midnight');
                break;
        }
        return $ret;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T07:32:16.127

根据您要执行的操作，模型中的 search() 不一定是您要查找的位置。这是一个标准的 Yii 查询：

```
$model = WhateverModel::model()->findAll(array(
    "condition" => "'.date('Y-m-d H:i:s' BETWEEN validRrom AND validTo).'",
)); 
```

如果您提供更详细的帮助，您将不得不提供更多详细信息:)

# java - 找不到 Spring MVC 404 页面

> ID：12949023
> 
> 赞同：0
> 
> 时间：2012-10-18T07:12:11.770
> 
> 标签：java, spring-mvc

我`AuthenticationController`工作正常：它的所有方法都在运行，我可以看到方法的记录输出。身份验证成功后，我返回一个新的模式，如下所示：

```
 modelAndView = new ModelAndView("redirect:/home/");
.....
 return modelAndView; 
```

我有另一个名为 的控制器`HomePageController`，但是，在从 Authentication 返回模型后，我无法以`HomePageController`.

我需要什么映射？

```
@Controller
@RequestMapping(value = "/home")
@SessionAttributes({"loginModel"})
public class HomePageController extends AbstractController { 
```

注意：所有方法`AuthenticationController`都工作正常..

web.xml 文件：[http ://snipt.org/vgEd7](http://snipt.org/vgEd7)

mct-serverlet.xml 文件：[http ://snipt.org/vgEf2](http://snipt.org/vgEf2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:25:00.353

替换尾随空格

```
 modelAndView = new ModelAndView("redirect:/home");
.....
 return modelAndView; 
```

那将寻找 /home/index.htm 或其他东西。并在您的 HomepgageController 中，确保有一些方法可以返回 /home url 的视图。

```
@Controller
@RequestMapping(value = "/home")
@SessionAttributes({"loginModel"})
public class HomePageController extends AbstractController {    
    public string handleHomePage(){
        return "View Name";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:52:50.897

试试这个返回语句： return new ModelAndView("redirect:home");
在 home 操作后避免在“redirect:/home/”中使用 /。它将自动查找索引操作。

# c# - 检测线程是否已在 C# .net 中运行？

> ID：12949024
> 
> 赞同：3
> 
> 时间：2012-10-18T07:12:16.170
> 
> 标签：c#, .net

我正在使用以下代码。

```
public void runThread(){
    if (System.Diagnostics.Process.GetProcessesByName("myThread").Length == 0)
    {
    Thread t = new Thread(new ThreadStart(go));
    t.IsBackground = true;
    t.Name = "myThread";
    t.Start();
    }
    else
    {
      System.Diagnostics.Debug.WriteLine("myThreadis already Running.");
    }   
}
public void go()
{
    //My work goes here
} 
```

我多次调用 runThread() 函数，但我希望线程仅在线程未运行时启动。这怎么可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T07:18:10.477

GetProcessesByName 不会在您的应用程序中查找线程，而是在您的机器中查找进程。事实上，在您自己的应用程序中没有很好的方法来查询线程（除了编写调试器之外，还有一个问题）。

对于你想要的，你可以[为你的线程创建一个包装类，](https://stackoverflow.com/a/1827802/402022)这样你就可以查询它们是否正在运行。或者[通过其他方式自己跟踪线程](https://stackoverflow.com/a/12949099/402022)。

~~您还可以考虑拥有一个`Lazy<Thread>`在需要时将被初始化的字段，并且您可以查询线程是否处于活动状态。~~经过测试`Lazy<Thread>`不是一个好主意。

* * *

源自[西蒙的回答](https://stackoverflow.com/a/12949099/402022)：

```
private int running;

public void runThread()
{
    if (Interlocked.CompareExchange(ref running, 1, 0) == 0)
    {
        Thread t = new Thread
        (
            () =>
            {
                try
                {
                    go();
                }
                catch
                {
                    //Without the catch any exceptions will be unhandled
                    //(Maybe that's what you want, maybe not*)
                }
                finally
                {
                    //Regardless of exceptions, we need this to happen:
                    running = 0;
                }
            }
        );
        t.IsBackground = true;
        t.Name = "myThread";
        t.Start();
    }
    else
    {
        System.Diagnostics.Debug.WriteLine("myThreadis already Running.");
    }   
}

public void go()
{
    //My work goes here
} 
```

*：[必须抓住](http://forums.thedailywtf.com/forums/p/8499/161761.aspx) [所有的人](http://www.dodgycoder.net/2011/11/yoda-conditions-pokemon-exception.html)

* * *

[Wajid](https://stackoverflow.com/a/12949133/402022)和[Segey](https://stackoverflow.com/a/12949135/402022)是对的。你可以只拥有一个 Thread 字段。请允许我提供示例：

```
private Thread _thread;

public void runThread()
{
    var thread = _thread;
    //Prevent optimization from not using the local variable
    Thread.MemoryBarrier();
    if
    (
        thread == null ||
        thread.ThreadState == System.Threading.ThreadState.Stopped
    )
    {
        var newThread = new Thread(go);
        newThread.IsBackground = true;
        newThread.Name = "myThread";
        newThread.Start();
        //Prevent optimization from setting the field before calling Start
        Thread.MemoryBarrier();
        _thread = newThread;
    }
    else
    {
        System.Diagnostics.Debug.WriteLine("myThreadis already Running.");
    }
}

public void go()
{
    //My work goes here
} 
```

**注意**：最好使用第一个替代方案（源自 Simon 的答案），因为它是线程安全的。也就是说，如果有多个线程同时调用 runThread 方法，则不会有创建多个线程的风险。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T07:16:15.847

一种简单的方法是，您可以有一个标志来指示它是否正在运行。`lock`如果有一些冲突，您可能必须使用一些。

```
public static bool isThreadRunning = false;

public void runThread()
{
    if (!isThreadRunning)
    {
        Thread t = new Thread(new ThreadStart(go));
        t.IsBackground = true;
        t.Name = "myThread";
        t.Start();
    }
    else
    {
      System.Diagnostics.Debug.WriteLine("myThreadis already Running.");
    }   
}
public void go()
{
    isThreadRunning = true;
    //My work goes here
    isThreadRunning = false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T07:17:54.177

你可以`Thread.IsAlive`用来检查prevoius线程是否正在运行。这是给线程状态。你可以把这个检查放在前面`mythread.Start().`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T07:17:59.867

您是否仅在运行线程方法中创建线程？如果是这样，请将其作为包含 runThread 方法的类的字段并询问 t.IsAlive。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-13T14:11:47.970

也许这可以帮助你

```
static bool isRunning = false;
public void RunThread(){
    if (!isRunning)
    {
    Thread t = new Thread(()=> { go(); isRunning = true;});
    t.IsBackground = true;
    t.Name = "myThread";
    t.Start();
    }
    else
    {
      System.Diagnostics.Debug.WriteLine("myThread is already Running.");
    }   
}
public void go()
{
    //My work goes here
} 
```

# forms - 位于 drupal 站点或模板中的 search-theme-form.tpl.php 文件在哪里？

> ID：12949026
> 
> 赞同：1
> 
> 时间：2012-10-18T07:12:20.833
> 
> 标签：forms, drupal, drupal-7, search-form

在 Drupal（我的是第 7 版）中，在搜索模块中，默认情况下正在查看搜索按钮中的文本“搜索”。大概这东西背后的HTML结构是这样的：

```
<input type="submit" value="Search"  /> 
```

我放置了一个图像而不是默认的搜索按钮图像/背景颜色。我想`value="Search"`从 HTML`<input/>`标记中删除该部分。

我去了模块/搜索，但没有这样的带有`<input/>`标签的文件。那么我如何删除文本？

我从[http://mydrupalblog.lhmdesign.com/theming-search-submit-button-css-cross-browser-compatible-solution](http://mydrupalblog.lhmdesign.com/theming-search-submit-button-css-cross-browser-compatible-solution)得到了一个解决方案，我所谓的“ *Bangla Shamadhan* ” 。

事情是这样`text-indent`的：

```
#search-block-form input.form-submit, #search-form input.form-submit {
  height: 24px;
  width: 24px;
  cursor: pointer;
  text-indent: -9999px;
  border: none;
  background: url(images/mag_glass.jpg) no-repeat left top;
} 
```

文本缩进无限空间。它对我有用，但对我来说不是一个好习惯。

![在此处输入图像描述](../Images/eb3731654f58778df9f913ad7bc05f9b.png)

那么，如何`<input/>`在 Drupal 模板或模块中编辑标签以删除属性`value="Search"`？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:07:35.373

我认为 hook_form_alter() 在这种情况下是你需要的：

```
function mymodule_form_alter(&$form, $form_state, $form_id) {
  if($form_id=='search_form') {
    $form['basic']['inline']['submit']['#value'] = '';  // OR
    unset($form['basic']['inline']['submit']['#value']);
  }
} 
```

# jquery - 使用服务器端处理隐藏 DataTable 的 JSON 中存在的列

> ID：12949027
> 
> 赞同：4
> 
> 时间：2012-10-18T07:12:22.643
> 
> 标签：jquery, datatable, html-table

我关注了这篇文章：[DataTable：ASP.Net 中的服务器端处理](https://stackoverflow.com/questions/3531438/jquery-datatables-server-side-processing-using-asp-net-webforms)
我正在使用此代码来初始化 DataTable：

```
<script type="text/javascript">
    $(function () {
        $('#example').dataTable({
            'bProcessing': true,
            'bServerSide': true,
            'sAjaxSource': '/data.ashx'
        });
    });
</script> 
```

我的 JSON 是这样的：

```
{    
 "iTotalRecords": "57",
 "iTotalDisplayRecords": "57",
 "aaData": [
  [
     "id001",
     "Name001",
     "Addr001",
  ],
  [
     "id002",
     "Name002",
     "Addr002",
   ]
  ]
} 
```

我想实现以下相同：

```
<table id="datatable">
   <thead>...</thead>
   <tbody>
     <tr id="id001">
        <td>Name001</td>
        <td>Addr001</td>
     </tr>
     <tr id="id002">
        <td>Name002</td>
        <td>Addr002</td>
     </tr>

     .
     .
   </tbody>
 </table> 
```

**注意：**
要将 id 分配给`<tr>`我正在使用：

```
"fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull) {
     $(nRow).attr("id",aData[0]);
     return nRow;
} 
```

但它并没有隐藏该`ID`列。请帮忙。

**更新：** 我为我的问题找到了一个完美的解决方案。
我必须如下创建我的 JSON

```
 {    
 "iTotalRecords": "57",
 "iTotalDisplayRecords": "57",
 "aaData": [
  [         
     "0":"Name001",
     "1":"Addr001",
     "DT_RowId": "id001",
  ],
  [        
     "0":"Name002",
     "1":"Addr002",
     "DT_RowId": "id002",
   ]
  ]
} 
```

有关更多信息，请查看此链接：[DateTable - 自动添加行 ID](http://datatables.net/release-datatables/examples/server_side/ids.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T06:19:19.467

用于`aoColumnDefs`隐藏列。[数据表示例](http://www.datatables.net/release-datatables/examples/basic_init/hidden_columns.html)

```
$('#datatable').dataTable({
    aaData: aaData,
    "fnRowCallback": function(nRow, aData, iDisplayIndex, iDisplayIndexFull) {
        //console.log(nRow);

        $(nRow).attr("id", aData[0]);
        return nRow;
    },
    "aoColumnDefs": [
        {
        "bSearchable": false,
        "bVisible": false,
        "aTargets": [0]
        },
    ]
});​ 
```

工作[小提琴](http://jsfiddle.net/YLhP6/1/)

# c - 自旋锁实现 (OSSpinLock)

> ID：12949028
> 
> 赞同：1
> 
> 时间：2012-10-18T07:12:23.457
> 
> 标签：c, multithreading, macos, thread-safety

我刚刚开始研究多线程编程和线程安全。我熟悉忙等待，经过一些研究，我现在熟悉自旋锁背后的理论，所以我想我会看看 OSSpinLock 在 Mac 上的实现。它归结为以下函数（在 objc-os.h 中定义）：

```
static inline void ARRSpinLockLock(ARRSpinLock *l)
{
again:
   /* ... Busy-waiting ... */
    thread_switch(THREAD_NULL, SWITCH_OPTION_DEPRESS, 1);
    goto again;
} 
```

（[这里完全实现](http://www.opensource.apple.com/source/objc4/objc4-532.2/runtime/objc-os.h)）

在进行了一些挖掘之后，我现在对`thread_switch`参数的作用有了大致的了解（[这个站点](http://www.gnu.org/software/hurd/gnumach-doc/Hand_002dOff-Scheduling.html)是我找到它的地方）。我对我所读内容的解释是，对 thread_switch 的特定调用将切换到下一个可用线程，并将当前线程的优先级降低到 1 个周期的绝对最小值。“最终”（在 CPU 时间内）该线程将再次激活并立即执行重新`goto again;`开始忙碌等待的指令。

不过，我的问题是，为什么这个电话实际上是必要的？[我在这里](http://www.codeproject.com/Articles/784/User-Level-Spin-Locks)找到了另一种自旋锁的实现（这次是针对 Windows），它根本不包括（Windows 等效的）线程切换调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T07:27:44.310

You can implement a spin lock in many different ways. If you find another `SpinLock` implementation for Windows you'll see another algorithm for that (it may involves `SetThreadPriority`, `Sleep` or `SwitchToThread`).

Default implementation for `ARRSpinLockLock` is clever enough and after one first spinning cycle it "depress" thread priority for a while, this has following advantages:

*   it gives **more opportunities** to the thread that owns the lock to **release** it;
*   it wastes **less CPU time** (and **power**!) performing `NOP` or `PAUSE`.

Windows implementation doesn't do it because Windows API doesn't offer that opportunity (there is no equivalent `thread_switch()` function and multiple calls to `SetThreadPriority` **could be** less efficient).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T07:23:32.903

我真的不认为他们有什么不同。在第一种情况下：

```
static inline void ARRSpinLockLock(ARRSpinLock *l)
{
    unsigned y;
again:
    if (__builtin_expect(__sync_lock_test_and_set(l, 1), 0) == 0) {
        return;
    }
    for (y = 1000; y; y--) {
#if defined(__i386__) || defined(__x86_64__)
        asm("pause");
#endif
        if (*l == 0) goto again;
    }
    thread_switch(THREAD_NULL, SWITCH_OPTION_DEPRESS, 1);
    goto again;
} 
```

我们尝试获取锁。如果失败了，我们在`for`循环中旋转，如果它同时可用，我们立即尝试重新获取它，否则我们放弃 CPU。

在另一种情况下：

```
inline void Enter(void)
{
    int prev_s;
    do
    {
        prev_s = TestAndSet(&m_s, 0);
        if (m_s == 0 && prev_s == 1)
        {
            break;
        }
        // reluinquish current timeslice (can only
        // be used when OS available and
        // we do NOT want to 'spin')
        // HWSleep(0);
    }
    while (true);
} 
```

注意下面的注释`if`，它实际上说如果操作系统给了我们这个选项，我们可以旋转或放弃 CPU。事实上，第二个示例似乎只是将这部分留给程序员[在此处插入您喜欢的继续代码的方式]，因此从某种意义上说，它不像第一个示例那样是完整的实现。

My take on the whole thing, and I'm commenting on the first snippet, is that they're trying to achieve a balance between being able to get the lock fast (within 1000 iterations) and not hogging the CPU too much (hence we eventually switch if the lock does not become available).

# jquery - 将 jquery 变量分配给输入

> ID：12949041
> 
> 赞同：7
> 
> 时间：2012-10-18T07:12:57.433
> 
> 标签：jquery

我正在尝试将 jquery 变量值传递给输入文本。我尝试了以下并收到消息“赋值的左侧必须是变量”。如何将jquery变量值发送到输入框？

//输入如下

```
<input  type="hidden" id="rowValues" value="" name="rowValues"> 
```

//jquery如下。rowData 变量值应传递给输入

```
 var rowData = JSON.stringify(rows); ; 

$("#rowValues").val() = rowData; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-18T07:14:14.207

做：

```
$("#rowValues").val(rowData); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T07:16:45.710

`$("#rowValues").val()`当您想从中获取数据时使用

```
 var data = $("#rowValues").val(); 
```

但是对于将数据分配给输入

```
 $("#rowValues").val(data); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T07:14:29.903

试试这个：

```
 $("#rowValues").val(rowData); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T07:14:48.620

要设置值，请将参数传递给[`.val()`](http://api.jquery.com/val/)函数。

```
$("#rowValues").val(rowData); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T07:14:52.147

应该

```
$("#rowValues").val(rowData); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-18T07:16:56.103

```
var rowData = JSON.stringify(rows);
$("#rowValues").val(rowData); 
```

# c# - 新手系统监控方法

> ID：12949059
> 
> 赞同：0
> 
> 时间：2012-10-18T07:14:03.710
> 
> 标签：c#, .net, class, service, monitoring

我正在编写一个代理来使用用 C# (.NET) 编写的 Windows 服务来监视和收集各种 Windows 系统设置/信息。主服务在启动时从配置文件中读取，并在列表中存储它必须运行的所有测试。然后计时器以适当的频率运行各个方法。我创建了一个类库，其中包含用于检查服务、regkeys、获取系统信息等的各个类。主服务中的方法使用类库中的方法来获取它们的信息，然后再将数据写入文件并上传到主服务器. 类中的大多数方法都是静态的（尽管有些不是）。牢记这些方法将在一天中以设定的频率重复调用，这使它们成为静态的好主意或坏主意。内存使用稳定，但比我预期的 25-30MB 略高。任何人都可以看到我这样做的方式有任何重大缺陷吗？ ![例子](../Images/ee4d2bd85a94885dfd8d2ea6f2901f97.png)

我的 WriteToFile 和 WriteToLog 方法都是静态无效的，并且在调用它们时都创建和处置 StreamWriter。我想知道这是否有意义或者我应该以不同的方式来做（比如在服务启动时创建一个 StreamWriter 并将其传递给 WriteTo 方法）。

我不明白的其他事情是我从文本文件加载要运行的检查列表，文本文件的大小只有 3KB，但与文本文件为空白相比，它需要额外的 7MB 内存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:10:37.403

> 请记住，这些方法将在一天中以设定的频率重复调用，这使它们成为静态的好主意或坏主意。

将方法设为静态并不会显着提升性能。

当你设计一个系统时，你应该问自己：“我如何测试它？”。

很难测试基于静态类的系统，您不能轻易隔离事物以独立测试（您必须为此目的使用[Moles ）。](http://research.microsoft.com/en-us/projects/moles/)

在静态类中维护包含核心逻辑的系统也很困难，因为您无法限制其范围。

> 内存使用稳定，但比我预期的 25-30MB 略高。

如果您的程序将在桌面平台上运行，请不要担心，30MB 对于现代台式计算机来说不算什么。

# java - 调度任务以防止 Java 中的处理和带宽使用重叠

> ID：12949060
> 
> 赞同：0
> 
> 时间：2012-10-18T07:14:03.863
> 
> 标签：java, scheduled-tasks, scheduler

我正在创建一个守护进程，它将运行某些计划的日志记录任务，但我担心某些点会出现瓶颈。

实际上，我有一些我想每 15 分钟执行一次的日志记录任务，而有些我只想每 30 分钟执行一次，依此类推，直到每月只需要运行一次的任务。基本上，我有一个在每个时间间隔要进行的检查列表。这些被放入队列并由线程池处理。

目前我看到任务正在运行这样的东西

```
15
15, 30
15, 30, 60
15, 30, 60, 120
15, 30, 60, 120, 240... 
```

这意味着如果守护程序在 00:00 开始，那么到 04:00 将有五个进程同时运行，这不是它的结束。目前这导致下一个计划为 15 分钟的任务运行缓慢，并且只能访问有限的带宽。

然而，任务不必按小时运行。因此，如果 15 分钟任务在整点运行，则 30 分钟可能会在整点后 5 分钟开始，以尽量减少重叠。甚至可以将两个 30 分钟的任务（例如 00:00 和 00:30）拆分为四个 15 分钟的过程，以减少受到“一次性”类型问题的影响，但这确实让我头晕目眩。

是否有任何众所周知的方法来管理此类问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:26:55.117

你绝对应该看看[Quartz](http://quartz-scheduler.org/)，尤其是`cron`风格[触发器](http://quartz-scheduler.org/documentation/quartz-2.1.x/tutorials/tutorial-lesson-06)。

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:38:49.803

好吧，从长远来看（正如我从您的问题中看到的那样），您将不得不寻找类似[quartz](http://www.quartz-scheduler.org/documentation/quartz-2.x/tutorials/)的东西。

除此之外，我还有更多的担忧和建议：

1.  用于`[ScheduledExecutorService][2]`管理这些线程。即使使用`ScheduledExecutorService`, 看起来您也想以单独的时间间隔运行它们，而不管它们的执行时间如何。`SchedulewithFixedRate`而不是`ScheduleWithFixedDelay`.

2.  即使你实现了这样的任何东西，你的逻辑也会`fail if your threads start to run on multiple hosts`。运行每小时线程的 2 台主机将每 30 分钟有效运行一次。

3.  我宁愿有一个`centralized management in terms of Database`跟踪最后一次运行和所有。这`ExecutorService`将是可扩展的和准确的。

假设您有 1000 个计划，在数据库中创建 1000 行。

列会有点像这样

```
id, P_Key
ScheduleName, AnyIdentifier for the daemon to run or task to do.
lastRunTime, lastTime it was run.
granularity, 15 mins, 30 mins etc. 
```

您可以保留`CreationTime`和`ModificationTime`作为最佳实践。

# c++ - 使用 libtiff 的 TIFFReadRawTile 获取 jpeg 瓦片，无需解压/压缩

> ID：12949061
> 
> 赞同：0
> 
> 时间：2012-10-18T07:14:03.677
> 
> 标签：c++, libjpeg, libtiff

我有一个金字塔平铺的 tiff 文件，我想在不解码和重新编码 jpeg 的情况下提取图块，我已经看到使用 TIFFReadRawTile() 函数可以在不解码的情况下提取原始图块，我如何编写提取的缓冲区到可读的 jpeg 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:58:39.593

你要完成的任务不是一件小事。您可能想仔细查看 tiff2pdf 实用程序的源代码。该实用程序可以满足您的需要，您可以从中提取相关部分。

问题是，该实用程序执行许多其他您将不得不丢弃的事情。此外，该实用程序无法成功处理任何 JPEG-in-TIFF。基本上，因为那里有足够多的半损坏 TIFF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:10:23.023

我发现实际上没有办法在不直接弄乱 tiff 的霍夫曼表的情况下获得编码的图块，这非常棘手。

我发现的唯一方法是读取解码的图块，然后用 vips 做一些魔术直接输出到 jpeg。

```
tdata_t buf;
tsize_t len;

buf = _TIFFmalloc( TIFFTileSize( tif ) );
len = TIFFReadEncodedTile(tif, tile, buf, (tsize_t) -1);

VImage result ((void *) buf, 256, 256, 3, VImage::FMTUCHAR);

void *outBuffer;
unsigned long len;
vips_jpegsave_buffer(result, &outBuffer, &len, "Q", 90, NULL); 
```

并使用 cout 在一些标题之后输出图像。

# python - python：当类属性、实例属性和方法都同名时会发生什么？

> ID：12949064
> 
> 赞同：32
> 
> 时间：2012-10-18T07:14:13.707
> 
> 标签：python, methods, instance-variables, class-attributes

当名称相同时，python如何区分类属性、实例属性和方法？

```
class Exam(object):

    test = "class var"

    def __init__(self, n):
        self.test = n

    def test(self):
        print "method : ",self.test

test_o = Exam("Fine")

print dir(test_o)

print Exam.test
print test_o.test
test_o.test() 
```

输出 ：

```
['__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__',    '__hash__', '__init__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'test']
<unbound method load.test>
Fine
Traceback (most recent call last):
  File "example.py", line 32, in <module>
    test_o.test()
TypeError: 'str' object is not callable 
```

如何打电话

1.  类属性， `Exam.test`-->`<unbound method load.test>`输出显示方法
2.  实例属性 `test_o.test` -->`"Fine"`
3.  方法 `test_o.test()`-->`TypeError: 'str' object is not callable`

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-18T07:31:32.903

类属性可以通过类访问：

```
YourClass.clsattribute 
```

或者通过实例（如果实例没有覆盖类属性）：

```
instance.clsattribute 
```

如[ecatmur 在他的回答](https://stackoverflow.com/a/12949167/510937)中所述，方法是描述符并设置为类属性。

如果您通过实例访问方法，则实例将作为`self`参数传递给描述符。如果要从类中调用方法，则必须显式传递一个实例作为第一个参数。所以这些是等价的：

```
instance.method()
MyClass.method(instance) 
```

对实例属性和方法使用相同的名称将使该方法通过实例隐藏，但该方法仍然可以通过类使用：

```
#python3
>>> class C:
...     def __init__(self):
...         self.a = 1
...     def a(self):
...         print('hello')
... 
>>> C.a
<function a at 0x7f2c46ce3c88>
>>> instance = C()
>>> instance.a
1
>>> C.a(instance)
hello 
```

结论：不要给实例属性和方法起相同的名字。我通过给出有意义的名称来避免这种情况。方法就是动作，所以我通常使用动词或句子来表示它们。属性是数据，所以我对它们使用名词/形容词，这样可以避免方法和属性使用相同的名称。

请注意，您根本不能拥有与方法同名的类属性，因为该方法将完全覆盖它（最后，方法只是可调用的类属性，并且会自动接收类的实例作为第一个属性） .

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T07:19:41.850

你可以写

```
Exam.test(test_o) 
```

或者

```
Exam.test.__get__(test_o)() 
```

在后一种情况下，您使用方法是[描述符](http://docs.python.org/howto/descriptor.html)的事实将其转换`<unbound method load.test>`为绑定方法，因此您可以使用单括号调用它。

当您编写 时`test_o.test()`，Python 不知道您正在尝试调用一个方法；您可能正在尝试调用已作为实例数据成员安装在对象上的函数或可调用对象。相反，它查找属性`test`，首先在对象上，然后在其类上，但由于属性存在于对象上，它隐藏了类上的方法。

班级成员

```
test = "class var" 
```

不可访问（实际上它在任何地方都不存在），因为它被方法覆盖`test`；当一个[`class`语句](http://docs.python.org/reference/compound_stmts.html#class-definitions)被执行时，它的命名空间在被传递给它的元类之前被收集到一个字典中，后面的名字会覆盖前面的名字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-12T22:41:34.917

> 如何调用
> 类属性， `Exam.test`

你不能因为在执行时`def test(self)`名称`test`被绑定到类中的方法并且对的引用`"class var"`丢失了。

> 实例属性 `test_o.test`-->“好”

你已经这样做了。

> 方法 `test_o.test()`

您不能这样调用它，因为在执行时`self.test = n`，名称`test`会绑定到实例中的任何对象`n`引用，并且对实例中方法的引用会丢失。

但正如其他答案中所指出的，您可以调用类中的方法并将实例传递给它：`Exam.test(test_o)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T07:20:05.407

您可以将方法称为类方法并将您的实例传递给它：

```
Exam.test(test_o) 
```

或者，如果您不想使用`Exam`：

```
type(test_o).test(test_o) 
```

# c# - asp.net 中的自定义验证器

> ID：12949072
> 
> 赞同：0
> 
> 时间：2012-10-18T07:14:33.890
> 
> 标签：c#, asp.net, customvalidator

我创建了一个自定义验证器来检查最低工资和最高工资。我所做的意味着我在一个文本框中获得最低工资值，在一个文本框中获得最高工资。如果 maxsalary 小于 minsalary 意味着它将显示一些错误消息。

一些测试用例 min-40 max-65 -Noerror min-40 max-400-Error

实际上它所做的意味着它将最低工资的第一位数字与最高工资的第一位数字和第二位数字进行比较，同样它会检查。如果它小于意味着它会自动显示错误消息。谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:24:29.580

使用 CompareValidator 而不是 customvalidator 不是更容易吗？像这样：

```
<asp:CompareValidator ID="CompareValidator1" runat="server" ControlToValidate="txtMaxSal" Operator="LessThan" ControlToCompare="txtMinSal" Type="Integer" Text="*" ErrorMessage="Error Text here"></asp:CompareValidator> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:17:06.347

将文本更改为数字，然后使用 > 或 < 进行比较。您无法按字母顺序比较数字，这正是您想要做的。

# python - 如何从 Python Pyramid 提供临时文件

> ID：12949077
> 
> 赞同：10
> 
> 时间：2012-10-18T07:14:44.480
> 
> 标签：python, pyramid

目前，我只是提供这样的文件：

```
# view callable
def export(request):
    response = Response(content_type='application/csv')
    # use datetime in filename to avoid collisions
    f = open('/temp/XML_Export_%s.xml' % datetime.now(), 'r')
        # this is where I usually put stuff in the file
    response.app_iter = f
    response.headers['Content-Disposition'] = ("attachment; filename=Export.xml")
    return response 
```

这样做的问题是我无法关闭，或者更好的是，在返回响应后删除文件。该文件被孤立。我可以想到一些解决这个问题的方法，但我希望在某个地方有一个标准的方法。任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T08:50:17.133

**更新：**

请参阅 Michael Merickel 的答案以获得更好的解决方案和解释。

如果您希望文件被删除一次`response`返回，您可以尝试以下操作：

```
import os
from datetime import datetime
from tempfile import NamedTemporaryFile

# view callable
def export(request):
    response = Response(content_type='application/csv')
    with NamedTemporaryFile(prefix='XML_Export_%s' % datetime.now(),
                            suffix='.xml', delete=True) as f:
        # this is where I usually put stuff in the file
        response = FileResponse(os.path.abspath(f.name))
        response.headers['Content-Disposition'] = ("attachment; filename=Export.xml")
        return response 
```

* * *

您可以考虑使用[`NamedTemporaryFile`](http://docs.python.org/library/tempfile.html#tempfile.NamedTemporaryFile)：

```
NamedTemporaryFile(prefix='XML_Export_%s' % datetime.now(), suffix='.xml', delete=True) 
```

设置`delete=True`为文件一关闭就被删除。

现在，在您的帮助下，`with`您始终可以保证文件将被关闭并因此被删除：

```
from tempfile import NamedTemporaryFile
from datetime import datetime

# view callable
def export(request):
    response = Response(content_type='application/csv')
    with NamedTemporaryFile(prefix='XML_Export_%s' % datetime.now(),
                            suffix='.xml', delete=True) as f:
        # this is where I usually put stuff in the file
        response.app_iter = f
        response.headers['Content-Disposition'] = ("attachment; filename=Export.xml")
        return response 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-18T15:56:42.207

您不想将文件指针设置为`app_iter`. 这将导致 WSGI 服务器逐行读取文件（与 相同`for line in file`），这通常不是控制文件上传的最有效方式（假设每行一个字符）。Pyramid 支持的文件服务方式是 via `pyramid.response.FileResponse`。您可以通过传递文件对象来创建其中之一。

```
response = FileResponse('/some/path/to/a/file.txt')
response.headers['Content-Disposition'] = ... 
```

另一种选择是将文件指针传递给`app_iter`但将其包装在`pyramid.response.FileIter`对象中，这将使用合理的块大小来避免仅逐行读取文件。

WSGI 规范有严格的要求，即包含`close`方法的响应迭代器*将*在响应结束时被调用。因此设置`response.app_iter = open(...)`不应导致任何内存泄漏。两者都`FileResponse`支持`FileIter`一种`close`方法，因此将按预期进行清​​理。

作为对这个答案的一个小更新，我想我会解释为什么`FileResponse`采用文件路径而不是文件指针。WSGI 协议为服务器提供了一种可选的能力，以提供一种优化的机制来通过`environ['wsgi.file_wrapper']`. `FileResponse`如果您的 WSGI 服务器提供了该支持，它将自动处理此问题。考虑到这一点，您发现将数据保存到 ramdisk 上的 tmpfile 并提供`FileResponse`完整路径是一种胜利，而不是尝试将文件指针传递给`FileIter`.

[http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/api/response.html#pyramid.response.FileResponse](http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/api/response.html#pyramid.response.FileResponse)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T01:46:22.863

Michael 和 Kay 的响应组合在 Linux/Mac 下效果很好，但在 Windows 下不起作用（用于自动删除）。Windows 不喜欢 FileResponse 试图打开已经打开的文件这一事实（参见 NamedTemporaryFile 的描述）。

我通过创建一个 FileDecriptorResponse 类来解决这个问题，该类本质上是 FileResponse 的副本，但采用打开的 NamedTemporaryFile 的文件描述符。只需将 open 替换为 seek(0) 并将所有基于路径的调用 (last_modified, content_length) 替换为其 fstat 等效项。

```
class FileDescriptorResponse(Response):
"""
A Response object that can be used to serve a static file from an open
file descriptor. This is essentially identical to Pyramid's FileResponse
but takes a file descriptor instead of a path as a workaround for auto-delete
not working with NamedTemporaryFile under Windows.

``file`` is a file descriptor for an open file.

``content_type``, if passed, is the content_type of the response.

``content_encoding``, if passed is the content_encoding of the response.
It's generally safe to leave this set to ``None`` if you're serving a
binary file.  This argument will be ignored if you don't also pass
``content-type``.
"""
def __init__(self, file, content_type=None, content_encoding=None):
    super(FileDescriptorResponse, self).__init__(conditional_response=True)
    self.last_modified = fstat(file.fileno()).st_mtime
    if content_type is None:
        content_type, content_encoding = mimetypes.guess_type(path,
                                                              strict=False)
    if content_type is None:
        content_type = 'application/octet-stream'
    self.content_type = content_type
    self.content_encoding = content_encoding
    content_length = fstat(file.fileno()).st_size
    file.seek(0)
    app_iter = FileIter(file, _BLOCK_SIZE)
    self.app_iter = app_iter
    # assignment of content_length must come after assignment of app_iter
    self.content_length = content_length 
```

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T14:35:44.867

还有[repoze.filesafe](http://docs.repoze.org/filesafe/)会为你生成一个临时文件，并在最后删除它。我用它来保存上传到我的服务器的文件。也许它对你也有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T09:02:07.847

因为您的对象**响应**持有文件“/temp/XML_Export_%s.xml”的文件句柄。使用**del**语句删除句柄 'response.app_iter'。

```
del response.app_iter 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-27T15:52:05.667

Michael Merickel 和 Kay Zhu 都很好。我发现我还需要在 NamedTemporaryFile 的开始处重置文件位置，然后再将其传递给响应，因为似乎响应从文件中的实际位置开始，而不是从开头（没关系，你只需要现在它）。使用带有删除集的 NamedTemporaryFile，您无法关闭并重新打开它，因为它会删除它（并且无论如何您都无法重新打开它），因此您需要使用以下内容：

```
f = tempfile.NamedTemporaryFile()
#fill your file here
f.seek(0, 0)
response = FileResponse(
    f,
    request=request,
    content_type='application/csv'
    ) 
```

希望能帮助到你 ;）

# android - 我无法运行安卓 WXGA720 模拟器

> ID：12949083
> 
> 赞同：0
> 
> 时间：2012-10-18T07:14:56.470
> 
> 标签：android

必须在我的 Eclipse 环境中运行 Android XHDPI：（三星 Galaxy S III）大小的模拟器。

我做了以下设置。

目标：Google API (Google Inc) - API 级别 15

SD卡：大小：1024mb

皮肤：内置：WXGA720

硬件：抽象液晶密度：320

```
 VM application heap size: 48

        Device ram size: 1024 
```

请问模拟器没有运行任何想法。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T02:27:50.907

正如我在这里提到的：[https ://stackoverflow.com/a/14420779/1993898](https://stackoverflow.com/a/14420779/1993898)

如果您的错误是“未能分配内存：8”，我可以通过“以管理员身份”运行 AVD 来修复此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:56:52.577

我经常遇到这个问题，我有 8gb 的 ram 可用，但它仍然不接受 1gb 的 ram 用于模拟器。例如，您是否尝试将 ram 值更改为 512？因为那对我有用。

另一个经常使用的解决方案是手动设置屏幕尺寸，因此不要使用 WXGA720 之类的预设。

请参阅此主题：[分配内存失败：8](https://stackoverflow.com/questions/7222906/failed-to-allocate-memory-8)

# java - 如何修复 Coldfusion cfcontent 中的属性验证错误（java.string.lang 不支持变量类型）？

> ID：12949087
> 
> 赞同：2
> 
> 时间：2012-10-18T07:15:24.643
> 
> 标签：java, coldfusion, error-handling, gzip, binary-data

我有一个 Coldfusion 应用程序，我在其中生成 HTML 服务器端、压缩、手动 gzip 并作为 cfcontent 发回。

看起来像这样：

```
<cfsavecontent variable="renderedResults">
    <cfoutput><p>Hello World</p></cfoutput>
</cfsavecontent>

<cfscript>
    compressedHTML = reReplace(renderedResults, "\>\s+\<", "> <", "ALL");
    compressedHTML = reReplace(compressedHTML, "\s{2,}", chr(13), "ALL");
    compressedHTML = reReplace(compressedHTML, "\s{2,}", chr(09), "ALL");
</cfscript>

<cfif cgi.HTTP_ACCEPT_ENCODING contains "gzip">
    <cfinvoke component="services.utils" method="gzip" stringToZip="#compressedHTML#" returnvariable="compressedHTML"></cfinvoke>   
    <cfheader name="Content-Encoding" value="gzip">
</cfif>

<cfheader name="Content-Type" value="text/html; charset=ISO-8859-1">
<cfheader name="Content-Length" value="#len(compressedHTML)#" >
<cfcontent reset="no" variable="#compressedHTML#" />
<cfreturn  /> 
```

我的 GZIP 实用程序功能：

```
<cfscript>
    var result="";
    var text=createObject("java","java.lang.String").init(arguments[1]);
    var dataStream=createObject("java","java.io.ByteArrayOutputStream").init();
    var compressDataStream=createObject("java","java.util.zip.GZIPOutputStream").init(dataStream);
    compressDataStream.write(text.getBytes());
    compressDataStream.finish();
    compressDataStream.close();

    if(arrayLen(arguments) gt 1){
        result=binaryEncode(dataStream.toByteArray(),arguments[2]);
    }else{
        result=dataStream.toByteArray();
    }
    return result;
</cfscript> 
```

我在所有页面上都运行它，并且无论页面是直接请求还是通过 AJAX 请求，它大部分时间都运行良好。

**但是有时我会收到以下错误**：

`Diagnose: Attribute validation error for tag cfcontent. java.lang.String is not a supported variable type. The variable is expected to contain binary data. <br>The error occurred on line 338.` `Browser: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)`

这是`cfcontent`行。

**问题**：
这可能是浏览器请求的页面不支持 GZIP 或禁用了 GZIP？因为那时 HTML 只会被压缩而不是二进制编码？

如果是这样，解决方法是我必须对压缩的 HTML 进行二进制编码吗？

如果两者都错了，请尽可能说明一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:42:16.817

[尝试使用ToBinary()](http://www.cfquickdocs.com/#ToBinary)函数将变量转换为二进制，然后再将其传递给 cfcontent ，如下所示...

```
<cfcontent reset="no" variable="#ToBinary(compressedHTML)#" /> 
```

# php - imagecolorallocatealpha 返回白色图像

> ID：12949088
> 
> 赞同：2
> 
> 时间：2012-10-18T07:15:27.357
> 
> 标签：php, png, transparency, gd

我对 PHP 中的 imagecolorallocatealpha 有疑问。将不透明度设置为 127 时，我得到的是白色图像而不是透明图像。

这是我的代码

```
$image = imagecreatetruecolor($width, $height);
imagesavealpha($image, true);
$color = imagecolorallocatealpha($image, 255, 255, 255, 127);
imagefill($image, 0, 0, $color);
header('Content-type: image/png');
imagepng($image);
imagedestroy($image);
exit; 
```

我也试过这个，但我得到了同样的结果

```
$image = imagecreatetruecolor($width, $height);
$x = imagecolorat($image, 0,0);
imagecolortransparent($image, $x);
header('Content-type: image/png');
imagepng($image);
imagedestroy($image);
exit; 
```

任何想法 ？它可能与服务器配置有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-11T09:40:26.667

替换第一行

```
$image = imagecreatetruecolor($width, $height); 
```

和

```
$image = imagecreate($width, $height); 
```

透明度现在应该可以工作了，但是调色板不会正确显示一些真实的颜色。

任何白色像素现在都是透明的。

要从白色更改透明度颜色，请使用：

```
$r = *red colour value (0 to 255)*;
$g = *green colour value (0 to 255)*;
$b = *blue colour value (0 to 255)*;
$color = imagecolorallocatealpha($image, $r, $g, $b, 127); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T10:33:37.433

如果这就是您用于图像文件的**所有**`$width`代码，那么您还没有为和`$height`变量定义任何值，并且脚本会引发错误。

作为一般规则，当您要调试图像时，请删除 Content-Type 标头。这样，您可以通过在浏览器中访问脚本来查看任何潜在的错误。

# android - Android：共享偏好值即使在提交后也不会改变

> ID：12949090
> 
> 赞同：0
> 
> 时间：2012-10-18T07:15:27.423
> 
> 标签：android, sharedpreferences

**在 Activity_A 中，我有：**

```
public static final String PREFS_NAME = "MyPrefsFile";

SharedPreference settings = getSharedPreferences(PREFS_NAME, 0);
SharedPreferences.Editor editor = settings.edit();
editor.putBoolean("hasLoggedIn", true);
editor.commit(); 
```

**在 Activity_B 我有：**

```
//changing the previously added **city** value
SharedPreferences settings = getSharedPreferences(Activity_A.PREFS_NAME, 0);
SharedPreferences.Editor editor = settings.edit();
editor.putString("city", myCity);
editor.commit(); 
```

**在 Activity_C 我有：**

```
SharedPreferences settings = getSharedPreferences(Activity_A.PREFS_NAME, 0);
String city = settings.getString("city", "default");
//here i am getting the previous value of **city**, not the updated 1 from Activity_B 
```

但是一旦我重新启动应用程序，它就会给出正确的值。

我究竟做错了什么？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:24:26.670

在`Activity C`你想显示价值的地方，你什么时候从`SharedPreferences`？

您应该在我认为的方法中获取`SharedPreferences`值，`onResume`因为如果您在该`onCreate`方法中执行此操作，那么如果您返回到`Activity C`.

这是因为只有在第一次创建该`onCreate`方法时才会调用该方法。`Activity`当您从它向后（离开）导航时`Activity C`，继续使用或`backstack`稍后恢复。这意味着不再调用该方法。`onRestart``onResume``onCreate`

所以我建议你从方法`SharedPreferences`中获取`onResume`。

活动生命周期：http: [//developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

我是正确的？

罗尔夫

# perl - 在 Perl 中，如何设置 HTTP POST 参数以在本地伪造 HTTP 环境？

> ID：12949091
> 
> 赞同：3
> 
> 时间：2012-10-18T07:15:29.057
> 
> 标签：perl, http, cgi

我有一个第三方 Perl 脚本，旨在由浏览器执行并处理 HTTP POST 请求中的数据。

该脚本可以从命令行执行，但这样做时它不会在预期的环境中执行，因此无法访问所需的用户数据。

我需要非常频繁地执行脚本，并希望避免启动 Apache 进程来处理可以在命令行中处理的内容的开销。该脚本从命令行执行比通过 Apache 快得多（至少没有输入数据）。

我想包装脚本，以便将命令行参数传递给脚本，就好像它们存在于 HTTP POST 请求中一样。

我对 Perl 不是很熟悉，想用 PHP 提供一个（基本的）示例来表示我打算实现的目标。

```
<?php

$_POST['example1'] = $argv[1];
$_POST['example2'] = $argv[2];

include /var/www/thirdPartyScript.php

?> 
```

Perl 脚本按如下方式访问数据：

```
#!/usr/bin/perl -T

use CGI 3.40 qw(-newstyle_urls -private_tempfiles redirect);
# ...
my $q = CGI->new();
# ...
if ($q->param('example1') {

} else {

} 
```

包装脚本需要设置什么，以便第三方脚本可以访问相关数据，就好像这些数据是在 HTTP POST 请求中提供的一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T07:18:57.913

如果第三方脚本是CGI，可以在命令行提供参数：

```
your_script.pl name1=value1&name2=value2 
```

[请参阅CGI.pm 文档](http://perldoc.perl.org/CGI.html#DEBUGGING)中有关如何测试 POST 和 GET 方法的更多详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T10:35:47.943

您可以轻松地[发出真正的 HTTP 请求](http://p3rl.org/LWP%3a%3aUserAgent#ua-post-url-form-)以进行测试：

```
use LWP::UserAgent qw();
my $ua = LWP::UserAgent->new;
$ua->post(
    'http://localhost:5000',
    [
        foo => 23,
        bar => 42,
    ]
); 
```

您可以[从 hashref 或文件初始化 CGI 对象](http://p3rl.org/CGI#CREATING-A-NEW-QUERY-OBJECT-FROM-AN-INPUT-FILE)。

```
use CGI qw();
my $c = CGI->new({
    foo => 23,
    bar => 42,
}); 
```

比起这些虚假的请求，更喜欢真正的 HTTP 请求！假的，包括一月份答案中的命令行变体，缺少一些属性，例如`request_method`.

# c# - 会话在 asp.net 的处理程序中为空？

> ID：12949092
> 
> 赞同：0
> 
> 时间：2012-10-18T07:15:31.750
> 
> 标签：c#, asp.net, session, handler

我想访问处理程序中的会话，因为我继承了“IRequireSessionState”类。但是在评估会话时它会变为空，但在网页上它是有价值的。我不知道为什么会这样我的处理程序代码是：

```
 public void ProcessRequest(HttpContext context)
{
String Name = Common.GetSessionValue("UserId").ToString() ;
// my code......... 
```

这是我获取 Session 值的常用方法

```
 public static Guid GetSessionValue(string SessionName)
    {
        Guid returnvalue = Guid.Empty;
        if (HttpContext.Current.Session[SessionName] != null)
        {
            returnvalue = new Guid(HttpContext.Current.Session[SessionName].ToString());
        }
        else
        {
            HttpContext.Current.Response.Redirect("Login.aspx");
        }
        return returnvalue;
    } 
```

请帮我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:33:45.293

您可以尝试通过将值暴露给外界[http://forums.asp.net/t/1506625.aspx/1](http://forums.asp.net/t/1506625.aspx/1)然后尝试使用获取处理程序中的值

```
context.Request.Form["returnvalue"]; 
```

你可以在 Mozilla 的 firebug AddOn 中看到暴露的值

# html - 如何仅使用 CSS 样式表替换图像

> ID：12949093
> 
> 赞同：4
> 
> 时间：2012-10-18T07:15:44.483
> 
> 标签：html, css, inline

我想知道是否可以仅使用样式表替换 html 页面上的图像。我知道这不是常见的做法，但我唯一可以访问的是样式表，他们在 html 中使用了内联样式。我无法编辑 html 文件。

我检查了元素，它看起来像这样：

我正在尝试替换“bullet_ball_glass_green”图像。我可以通过将其添加到样式表来隐藏它：

```
.rmLeftImage{

visibility: hidden;
} 
```

但是是否可以在不编辑 html 页面的情况下替换图像或在其上添加另一个图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:24:28.280

css 的层次结构比 html 中的样式更高，您可以添加

```
img.rmLeftImage {
   background-image: url('path to your image');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:25:42.350

继续隐藏图像

> 可见性：隐藏；

因为您希望它保持图像的宽度/高度并使用

> 背景：url（'urltoyourimage'）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T07:28:15.327

这可能是一个有点争议的技术，它支持[IE8+ 和几乎所有其他浏览器](http://caniuse.com/#search=after)。

```
.rmLeftImage { 
    content: '';
}

.rmLeftImage:after {
    display: block;
    content: '';
    background: url(../your/new/image);
    width: 220px; /* image width */
    height: 240px; /* image height */
    position: relative;  /* image width */
}
​ 
```

有关示例，请参见[http://jsfiddle.net/z9QUu/2/ 。](http://jsfiddle.net/z9QUu/2/)到目前为止，我只在 chrome 中测试过它，它似乎可以工作。如果它可以跨浏览器工作，您根本不需要修改 HTML。

有趣的是，我只能在申请时让它工作`content: '';`，`.rmLeftImage`这里没有它的 jsfiddle：http: [//jsfiddle.net/Mw76h/](http://jsfiddle.net/Mw76h/)，仅用于演示目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T07:20:17.920

您可以在图像周围设置 div 的背景图像（并保留隐藏图像的 css）。

```
.div_class{ 
  background:url('http://yourdomain.com/yourimage.jpg') no-repeat 50% 50%; 
  width:100px;
  height:100px;
} 
```

# ios - CALayer 的属性“过滤器”如何在 iOS 中工作？

> ID：12949095
> 
> 赞同：0
> 
> 时间：2012-10-18T07:15:57.290
> 
> 标签：ios

我正在尝试深入研究这个主题，但我发现很难理解该`filter`属性是如何工作的。

**来自文档：** *过滤器属性应通过调用 setValue:forKeyPath: 在过滤器附加到的每一层上进行修改。*

该`filter`属性是一个数组......所以我的问题是：如何创建 keyPath ？！？！在 OSX 中，我们可以为任何过滤器设置名称并通过如下路径访问过滤器`"filters.myFilterName.filterPropery"`：但在 iOS 中，我们不能`setName`在过滤器上使用该功能！我找不到有关此的文档:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:22:56.130

**同样来自文档：** *注意：您不能在 iOS 中向图层对象添加过滤器。*

对不起。

# .htaccess - Zend 框架中站点地图的 RewriteRule

> ID：12949100
> 
> 赞同：1
> 
> 时间：2012-10-18T07:16:19.817
> 
> 标签：.htaccess, zend-framework, mod-rewrite

我有以下 .htaccess 规则：

```
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]

RewriteRule ^sitemap_(.*)\.xml$ /xml/sitemap/$1 #[L]

RewriteRule ^.*$ /index.php [NC,L] 
```

不幸的是，我不能使用 Zend Framework 内部路由来处理站点地图，但是上面的规则不起作用。

站点地图 URL 如下所示：

```
/sitemap_index.xml
/sitemap_pages.xml
/sitemap_news.xml 
```

在我将其设置为 R=301 重定向或注释掉最后一条规则的情况下，所需的重写工作正常。这两个都不是选项。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:57:04.453

不能说.htaccess。通过zend路由器可能更容易做到。把它放在引导程序中：

```
public function _initRouter() {
    $frontController = Zend_Controller_Front::getInstance();
    $router = $frontController->getRouter();
    $route = new Zend_Controller_Router_Route_Regex(
                    'sitemap_(.*)\.xml',
                    array(
                        'controller' => 'xml',
                        'action' => 'sitemap'
                    ),
                    array(
                        1 => 'sitemap'
                    )
    );
    $router->addRoute('sitemap', $route);
} 
```

# mysql - 如何查询这张表？

> ID：12949101
> 
> 赞同：0
> 
> 时间：2012-10-18T07:16:25.503
> 
> 标签：mysql, join

我有以下两张表。

1.  节点
2.  属性

**节点**

```
id  title
1   test
2   test2 
```

**属性**

```
id  node_id  title    value
1   1        featured   1
2   1        age        13
3   2        featured   2 
```

我想要属性标题为“特色”的查询节点及其所有属性。

我尝试加入，但不知道如何同时查询其他属性。

是否可以进行单个查询来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:18:14.990

我认为这是一个简单的加入

```
SELECT  b.title as NodeTitle, a.title, a.value
FROM    attributes a
        INNER JOIN nodes b
            ON a.node_id = b.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T07:21:53.300

您可以使用子查询来获取所有具有“特色”属性的节点的 ID。外部查询将是`JOIN`获取其余属性。

像：

```
SELECT n.*, a.* 
FROM nodes n JOIN attributes a ON a.node_id=n.id 
WHERE n.id IN
  (SELECT DISTINCT no.id 
   FROM nodes no JOIN attributes at ON at.node_id=no.id AND at.title='featured') 
```

# mongodb - MongoDB 在运行实例上添加副本集

> ID：12949114
> 
> 赞同：0
> 
> 时间：2012-10-18T07:17:00.213
> 
> 标签：mongodb

有人知道将副本集添加到尚未使用 -replSet 启动且无需重新启动它的 mongo 实例的方法吗？换句话说，是否可以创建一个副本集并添加已经运行的 mongodb 实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:17:43.273

您需要从`mongod`参数`--replSet`（或[`replSet`配置文件选项](http://docs.mongodb.org/manual/reference/configuration-options/#replSet)）开始才能使用复制。在独立模式下未启用复制后台任务和其他服务器内部。

没有方法（在 MongoDB 2.2.0 中）可以将正在运行的`mongod`实例的角色从独立模式更改为副本集模式（反之亦然）。

> 换句话说，是否可以创建一个副本集并添加已经运行的 mongodb 实例？

如前所述，您需要使用`replSet`参数重新启动这些实例。

但是，您可以在不停机的情况下将其他成员添加到正在运行的副本集中。

有关更多信息，请参阅 MongoDB 手册：[将成员添加到副本集](http://docs.mongodb.org/manual/tutorial/expand-replica-set/)。

# mysql - 在 MySQL 中将 VARCHAR 的一部分排序为 INT

> ID：12949118
> 
> 赞同：0
> 
> 时间：2012-10-18T07:17:15.283
> 
> 标签：mysql, sql-order-by

我试图将字符串的一部分作为整数排序，`CAST(pid AS SIGNED)`但没有成功。

我想我需要这样的伪代码：`CAST ON REGX('^islandora(/d?)$') OF pid AS SIGNED`

`doFields`表具有以下结构：

```
+---------------+--------------+------+-----+---------+-------+
| Field         | Type         | Null | Key | Default | Extra |
+---------------+--------------+------+-----+---------+-------+
| pid           | varchar(64)  | NO   | MUL | NULL    |       |
| ownerId       | varchar(255) | YES  |     | NULL    |       |
+---------------+--------------+------+-----+---------+-------+ 
```

这是样本数据：

```
+----------------+---------+
| pid            | ownerId |
+----------------+---------+
| islandora:1050 | 8       |
| islandora:1052 | 8       |
| islandora:1053 | 8       |
| islandora:1054 | 8       |
| islandora:1055 | 8       |
+----------------+---------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T07:23:03.940

如何替换单词`islandora:`并将其转换为 int。

```
SELECT *
FROM tableName
ORDER BY CAST(REPLACE(pid, 'islandora:', '') AS SIGNED) ASC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T07:22:47.080

试试这个：

```
order by 
       cast(substr(pid,locate(':',pid)+1) as SIGNED) 
```

如果整数部分始终为 4 个字母长度，则

```
 Order by
      cast(right(pid,4) as SIGNED) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T07:32:04.203

尝试使用此 ORDER BY -

```
ORDER BY SUBSTRING_INDEX(pid, ':', -1) * 1; 
```

# mysql - SQL/MYSQL 更新父级下的子级直到为空

> ID：12949122
> 
> 赞同：0
> 
> 时间：2012-10-18T07:17:22.007
> 
> 标签：mysql, sql, database

我有一个这样的数据库表。

```
 userID         RefralID         balance
        1              0               0
        2              1               0
        3              2               0
        4              3               0
        5              8               0 
```

现在我想要一个 MYSQL 查询来更新用户 ID 1 下每个孩子的余额。从 10 小时起就卡在那里，但找不到所需的解决方案。

如果我们更新 balance=balance + 10 其中 userID = '1'，结果应该是这样的，因为 2,3,4 是 '1' 的孩子和孙子，所以他们的余额应该更新

```
 userID         RefralID         balance
        1              0               0
        2              1               10
        3              2               10
        4              3               10
        5              8               0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:50:55.197

```
update tblA T2 join
 (
   SELECT 
        @r AS _id,
        (SELECT @r := userid FROM tblA WHERE refralid = _id limit 1) AS userid,
        @l := @l + 1 AS lvl
    FROM
        (SELECT @r := 1, @l := 0) vars,
        tblA m
    ) T1
ON T1._id = T2.userid  
set balance=balance+10 
where T2.userid<>1 
```

* * *

```
@r := 1
T2.userid<>1 

The value 1 above is the userid=1 
```

可以删除@l（级别）作为参考。

[http://sqlfiddle.com/#!2/e606a/2](http://sqlfiddle.com/#!2/e606a/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:38:49.557

一般的方法是：

```
create table temp1 (int id);
create table temp2 (int id);

insert into temp1 select ReferalID from your_table where userID = 1

while exists (select 1 from temp1)
begin
       truncate table temp2

       update your_table 
       set balance = balance + 10 
       where userID in (select * from temp1)

       insert into temp2 select * from temp1

       truncate table temp1

       insert into temp1 
       select ReferalID 
       from your_table 
       where userID in (select * from temp2)       
end 
```

# struts2 - 使用 struts 2 动作传递参数

> ID：12949124
> 
> 赞同：0
> 
> 时间：2012-10-18T07:17:25.740
> 
> 标签：struts2, parameter-passing, struts-action

如何使用 struts 2 操作传递参数？

这是我的代码。

```
<s:form>

    <s:select name="menuItem" list="menuItems" listKey="menuItemID"
        listValue="menuItemName" headerKey="" headerValue="--MenuItems--"
        cssClass="selectbox_bg2" id="select"
        onchange="handleChange(this.value)" />

    <s:textfield name="select_value" id="select_value" />

</s:form>

<script type="text/javascript">

function handleChange(value) {

    window.location = "callMyAction?ValueToSubmit=" + value;

}

</script> 
```

我的问题是如何在我的操作类中获取此参数（值）。并传递一个参数以返回 jsp 页面。

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:07:26.200

1 只需使用公共 getter 和 setter 在您的操作类中创建“valueToSubmit”变量

```
public MyAction extends ActionSupport {

  private BigDecimal valueToSubmit;

  public String execute{
    ... some code.....
  }

  public BigDecimal getValueTOoubmit(){
    return valueToSubmit;
  }

  public void setValueToSubmit(BigDecimal valueToSubmit){
    this.valueToSubmit = valueToSubmit;
  }
} 
```

Struts2 ParametersInterceptor 会从request 中获取参数值并自动设置为action parameer。

2 要在动作结果jsp页面中读取此参数，只需使用一些struts标签

```
 <s:property value="valueToSubmit"/>, 
  <s:textfield name="valueToSubmit"/>, 
  etc.. 
```

# c - 确保 PID 引用正确的进程

> ID：12949127
> 
> 赞同：1
> 
> 时间：2012-10-18T07:17:30.780
> 
> 标签：c, fork, pid

我 fork() 一个父进程给一个子进程，fork() 返回的 PID 存储在父进程的内存中，然后时间过去，子进程终止；现在我可以确定存储在父内存中的 PID 值是否仍然指向同一个分叉的子进程，以及如何确保这个 PID 不会引用具有相同 PID 的不同进程，这些进程最终可能在子进程之后出生终止？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T07:26:32.897

在父进程确认它知道子进程已停止执行之前，操作系统*不能重用子进程的 PID。*

父级使用`wait`and`waitpid`调用进行确认。终止的子进程保持在“僵尸”状态，而父进程不调用这些函数。在这些调用返回后，父进程将知道如果有一个进程以与子进程相同的 PID 运行，则它不是子进程。

为了额外的安全，您可能有兴趣[检查子进程的父 PID](https://stackoverflow.com/questions/1525605/linux-programmatically-get-parent-pid-of-another-process)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T07:22:06.747

你可以：

*   打电话给`man 2 wait`父母，在孩子去世时得到通知；
*   发明父母和孩子之间的轮询协议。如果孩子仍然是相同的，它必须以与产卵后相同的值响应父母的民意调查。您可以为此使用一些 POSIX IPC 机制。当您的父级只有一个执行线程并且您不能在父级中使用线程时，这可能很有用。

# oracle - hibernate @Size max 和 oracle varchar 的相关性（以字节为单位）

> ID：12949128
> 
> 赞同：1
> 
> 时间：2012-10-18T07:17:30.260
> 
> 标签：oracle, hibernate, size, byte

我有字段的@Size 注释：

```
@Column(name = "SHARE_PART_STR")
@Size(max = 10)
private String shareStr; 
```

该字段在 Oracle 中声明为：

```
CREATE TABLE ...
(
  SHARE_PART_STR  VARCHAR2(10 BYTE)
) 
```

@Size(max = 10) 与 10 BYTE 有什么关系？hibernate 是否尝试将 VARCHAR2(10 CHAR) 保存到 VARCHAR2(10 BYTE)？这是期望的正确行为吗？或者将 VARCHAR2(... BYTE) 与休眠一起使用是不正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:20:30.043

`NVARCHAR2`如果这是一个使用非 ascii 字符，尤其是 UTF-8 的字段，我建议使用。

# php - 用数据库中的数据替换结果

> ID：12949130
> 
> 赞同：1
> 
> 时间：2012-10-18T07:17:37.687
> 
> 标签：php, database

我对 php 很陌生，但要掌握它。

我有一个工具可以返回结果

我得到的结果每次都可能不同，但显示例如：101、102、103、104

这些结果设置在`$errorcodes`

这些数字是指我拥有的数据库中的一个数字。这些数字在第 1 列，数字的含义在第 2 列，例如：

```
column1:              column 2:
101                    error 1
102                    error 2
103                    error 3 
```

我的问题是如何用第 2 列中的值替换结果编号。

我希望任何人都明白我的意思并能帮助我。

# java - PreparedStatement 和 Axis2

> ID：12949143
> 
> 赞同：0
> 
> 时间：2012-10-18T07:18:31.327
> 
> 标签：java, tomcat, jdbc, prepared-statement, axis2

我将 Axis2 与 Apache Tomcat 一起使用。我需要 web 服务的客户端能够查询数据库，所以我在互联网上发现，通过将以下资源添加到 Tomcat 的上下文中，它将自动创建一个连接池：

```
资源名称="jdbc/TestDB" auth="容器"
               类型="javax.sql.DataSource"
               removeAbandoned="true"
               removeAbandonedTimeout="30"
               最大活动=“80”   
               最大空闲=“30”
               maxWait="10000"
               用户名="用户"
               密码=""
               driverClassName="org.postgresql.Driver"
               url = "jdbc:postgresql://localhost:5432/mydb"
               使用Unicode="真"
               字符编码="utf-8"
               characterSetResults="utf8"
               验证查询="/* ping */ SELECT 1"

```

它似乎正在工作，但现在我想做的是重用相同的 PreparedStatement，因此每次客户端发出请求时都不会对其进行解析。因此，我为所有客户端连接设置了 PreparedStatement 静态，当我创建它时，我调用 statement.setPoolable(true)，据我了解，这是多余的（PreparedStatement 已经是可池化的）。我希望这样，PreparedStatement 不会被绑定到单个连接。不过，我得到了错误：

**java.sql.SQLException: org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement 地址 * 已关闭。**

奇怪的是，如果我在进行任何设置之前调用 statement.isClosed()，它会返回 false。然后，我设置了一些东西，它抛出了那个异常。

代码是：

 `````
try {
        Connection conn;

        Context envCtx = (Context) new InitialContext().lookup("java:comp/env");

        DataSource ds = (DataSource) envCtx.lookup("jdbc/TestDB");
        conn = ds.getConnection();    

        if(statement == null){
        //statement is static, so it won't be null at the second call                
            statement = conn.prepareStatement(query);
            statement.setPoolable(true);        
        }
        if(statement.isClosed()){
            statement = conn.prepareStatement(query);
            //it never gets here
        }
        else{
            Logger.getLogger(HelloAxisWorld.class.getName()).log(Level.INFO, "STATEMENT IS NOT CLOSED", new Object());  
            //it always gets here
        }

        statement.setString(1, par1); //here, the second call throws an exception
        ResultSet rs = statement.executeQuery();
        while (rs.next()) {
            cur_value = rs.getInt("cur_value");
        }         
        rs.close();

        conn.close();

    }catch (Exception ex) {            
        Logger.getLogger(HelloAxisWorld.class.getName()).log(Level.SEVERE, null, ex);          
    } 
````  `我不明白为什么 statement.isClosed 返回 false，但是异常说它已关闭。也许这不是重用preparedStatement的方法，但是我该怎么做呢？我读到，如果我在同一个查询上调用 conn.prepareStatement，jdbc 将从缓存中返回 PreparedStatement（它不会再次被解析），但我不确定它是否属实。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:31:17.137

有一个名为 c3p0 的项目专门用于处理您遇到的一种情况。该网站在这里[https://sourceforge.net/projects/c3p0/](https://sourceforge.net/projects/c3p0/)和这里[http://www.mchange.com/projects/c3p0/](http://www.mchange.com/projects/c3p0/)它处理数据源 JNDI 绑定、连接池和语句池。还有一个关于 stackoverflow 的参考，关于某人使用这个库和 servlets [what-is-a-good-strategy-for-caching-prepared-statements-in-tomcat](https://stackoverflow.com/questions/946513/what-is-a-good-strategy-for-caching-prepared-statements-in-tomcat)``

# iphone - 将事件传输到父视图（Titanium Studio、iPhone）

> ID：12949152
> 
> 赞同：6
> 
> 时间：2012-10-18T07:18:51.760
> 
> 标签：iphone, ios, events, titanium-mobile, transfer

我是 Titanium Studio 移动开发的新手。我想知道是否可以将事件转移到视图的父视图。

例如，假设我在一个名为 parentView 的视图之上添加了一个名为 imgVw 的图像视图，并且我想将 imgVw 的触摸事件传递给 parentView。请让我知道是否可能。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T11:28:25.083

请试试这个：

A simple technique is to set the **touchEnabled** property of child view to **false**, which passes the event to the parent view. Hope it helps.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T06:45:28.630

您可以创建一个自定义事件监听器。当用户触摸图像视图时，您可以触发该事件。你甚至可以将参数传递给事件。

在您的父视图中定义一个自定义事件监听器

```
Ti.App.addEventListener('imageTouch',function(e) {
  //This `e` will hold the  argument passed
}); 
```

现在当您触摸图像视图时

将 eventListener 添加到您的 ImageView 以捕获触摸事件，

```
myImage.addEventListener('touch',function(e) {
     //Now fire your custom event here, this will take you to the custom 
     // event defined in your parent view
     Ti.App.fireEvent('imageTouch',{
        touchArg:[e] // here we save your touch callback in an array `touchArg` and pass this to the custom eventListener.
     });
 }); 
```

希望有帮助:)

# javascript - 使用事件监听器时保持“this”的值

> ID：12949155
> 
> 赞同：1
> 
> 时间：2012-10-18T07:19:01.580
> 
> 标签：javascript, jquery, this, event-listener

我有以下功能：

```
onDocumentKeyUp: function (e) {
    if (e.keyCode === 27) {
       this.deactivate();
    }
} 
```

我想像这样绑定它：

```
$(document).on('keyup', onDocumentKeyUp); 
```

但是，当我这样做时，函数`this`内部是`onDocumentKeyUp`指文档。我通过这样做解决了这个问题：

```
var self = this;
$(document).on('keyup', function(e) { self.onDocumentKeyUp(e); }); 
```

这行得通，但有件事告诉我有一种更清洁的方法可以解决这个问题。会`.call()`或`.apply()`以某种方式......在这里申请？我仍然不确定这些功能是如何工作的。

另外，我不一定需要将自己限制在`jQuery.on()`. 如果有这样做的“香草”方式，请成为我的客人来教我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:55:02.547

您可以使用[`.bind()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)来设置上下文（无需立即将其称为`call`or `apply`）：

```
$(document).on('keyup', this.onDocumentKeyUp.bind(this)); 
```

由于此方法仅受 ES5.1 兼容的浏览器支持，因此您可以使用[`jQuery.proxy`](http://api.jquery.com/jQuery.proxy/)它而不是 polyfill。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T07:42:30.067

请注意这里方法的`data`参数： [http](http://api.jquery.com/on/) ://api.jquery.com/on/ 您也可以使用 jQuery.proxy 方法：[http ://api.jquery.com/jQuery.proxy/](http://api.jquery.com/jQuery.proxy/)`on`

这是 jsFiddle：[jsFiddle](http://jsfiddle.net/1stein/h3CTK/)

# actionscript-3 - 为什么 scrollRect 只影响下一帧？

> ID：12949158
> 
> 赞同：0
> 
> 时间：2012-10-18T07:19:16.187
> 
> 标签：actionscript-3, flash

运行此代码

```
 var sp:Sprite = new Sprite();
        sp.graphics.beginFill(0xff);
        sp.graphics.drawRect(0,0,400,400);
        sp.graphics.endFill();
        sp.scrollRect = new Rectangle(0,0,350,350);
        addChild(sp);

        var count:int = 0;
        var f:Function = function(...args):void{
            trace(count++,sp.width,sp.height);
            if(count>5){
                removeEventListener(Event.ENTER_FRAME,f);
            }
        }
        addEventListener(Event.ENTER_FRAME,f); 
```

得到

```
0 400 400
1 350 350
2 350 350
3 350 350
4 350 350
5 350 350 
```

无论如何我可以让scrollRect在第一帧工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:28:45.407

我刚刚检查了一下，这可能是因为 Flash Player 中的一些内部渲染内容（实际上需要两帧才能获得真实尺寸，当前一帧和之后一帧）。从视觉上看，矩形不会改变大小，因此只有对象边界的值会在两帧后更新（您可以通过设置非常低的帧速率来轻松证明这一点，例如 1 FPS）。

一种解决方法是通过将舞台绘制到 1x1 BitmapData 来强制执行“硬”渲染过程……这将有效地更新整个显示列表，并且这些值应该在 draw() 调用后立即正确。所以你的代码看起来像这样：

```
var sp:Sprite = new Sprite();
sp.graphics.beginFill(0xff);
sp.graphics.drawRect(0,0,400,400);
sp.graphics.endFill();
sp.scrollRect = new Rectangle(0,0,350,350);
addChild(sp);

var count:int = 0;
function f(event:Event = null):void{
    new BitmapData(1,1).draw(stage);
    trace(count++,sp.width,sp.height);
    if(count>5){
        removeEventListener(Event.ENTER_FRAME,f);
    }
}
addEventListener(Event.ENTER_FRAME,f);
f(); 
```

（请注意，我更改了您声明函数的方式，因为这是大多数（如果不是全部）Flash 开发人员的首选方式。）

将对象添加到舞台后，您只能执行一次绘制调用，但我不知道如果对象发生更改会有多安全。

# c# - 如何将项目（对象）添加到javascript中的组合框

> ID：12949162
> 
> 赞同：1
> 
> 时间：2012-10-18T07:19:24.377
> 
> 标签：c#, ajax, c#-4.0, asp.net-mvc-4, telerik-mvc

我的代码：

```
 function onLoad(e)
    {
         var element = document.getElementById('cmbGender');
         $.ajax({ type: "POST",
                    url: "@(Url.Action("LoadGenderNames", "Search"))",
                    success: function (data) {
                         // How to add the "data" object items in to the combo box here. 
                    },
                });
    } 
```

如何将项目（对象）添加到函数（数据）内的组合框中。谢谢。

**编辑**：这是 Telerik 组合框 Html.Telerik().ComboBox() .Name("cmbGender")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:28:04.887

如果你想通过 ajax 绑定组合框，你可以使用下一个代码：

```
<%= Html.Telerik().ComboBox().Name("cmbGender") 
            .AutoFill(true)
            .DataBinding(binding => binding.Ajax()
                                           .Select("LoadGenderNames", "Search"))                
    %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:17:46.897

假设 data 是一个字符串数组，您可以执行以下操作：

```
success: function (data)
{
    element.trackChanges();

    for (var i=0; i<data.length; i++)
    {
        var comboItem = new Telerik.Web.UI.RadComboBoxItem();
        comboItem.set_text(data[i]);
        element.get_items().add(comboItem);
    }

    element.commitChanges();
}, 
```

[您可以在Telerik 网站](http://www.telerik.com/help/aspnet-ajax/combobox-items-client-side-code.html)上找到更多信息。

# maven - Maven 问题

> ID：12949168
> 
> 赞同：-1
> 
> 时间：2012-10-18T07:19:41.617
> 
> 标签：maven, default

当我在 pom 所在的机器上输入 mvn 命令时，它将运行哪个阶段？mvn 安装或部署？

当我在我的机器中使用 mvn eclipse:eclipse 将 maven 项目转换为 eclipse 项目时，它将从默认生命周期执行哪些阶段？它会再次运行所有阶段吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T07:23:00.797

> 当我在 pom 所在的机器上输入 mvn 命令时，它将运行哪个阶段？

没有目标被执行，相反你会得到：

```
[ERROR] No goals have been specified for this build. You must specify a valid lifecycle phase or a goal [...] 
```

您可以使用以下`pom.xml`声明指定默认目标：

```
<build>
  <defaultGoal>install</defaultGoal>
  ...
</build> 
```

> 当我在我的机器中使用 mvn eclipse:eclipse 将 maven 项目转换为 eclipse 项目时，它将从默认生命周期执行哪些阶段？

它在[文档](http://maven.apache.org/plugins/maven-eclipse-plugin/eclipse-mojo.html)中描述：

> ### 属性：
> 
> *   需要执行一个 Maven 项目。
>     
>     
> *   `generate-resources`在执行自身之前调用生命周期阶段的执行。

# 也可以看看

*   [如何在 maven 2 中指定一串目标作为 defaultGoal？](https://stackoverflow.com/questions/3530306)

# php - Magento：如何将制造国属性复制到另一个属性中？

> ID：12949172
> 
> 赞同：3
> 
> 时间：2012-10-18T07:20:11.350
> 
> 标签：php, magento, attributes

我只是想知道，有没有办法将 Magento 内置的 country_of_manufacturer 的值（基本上是所有国家的列表）复制到一个新属性中？

我知道这是一个有趣的问题，而我们可以只使用内置属性。但我需要将该值用于另一个属性（即 country_region）。那么我该怎么做呢？

PS请不要投反对票，因为我搜索了很多但找不到答案。也不知道我还能怎么做。：/

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T12:31:44.243

您要做的是配置您的新属性以使用`catalog/product_attribute_source_countryofmanufacture`源模型（请参阅[`Mage_Catalog_Model_Product_Attribute_Source_Countryofmanufacture::getAllOptions()`[链接]](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Catalog/Model/Product/Attribute/Source/Countryofmanufacture.php#L42)。此模型从目录表中获取选项。

理想情况下，您将在模块的升级脚本中创建和配置此属性。您需要必要的配置来为您的模块运行升级脚本，然后您可以将其用作脚本的基础：

```
$installer = Mage::getResourceModel('catalog/setup','default_setup');
/* @var $installer Mage_Catalog_Model_Resource_Setup */

$installer->startSetup();

$installer->addAttribute(
    Mage_Catalog_Model_Product::ENTITY,
    'your_attr_code',
    array(
        'type'      => 'varchar',
        'input'  => 'select',
        'source'    => 'catalog/product_attribute_source_countryofmanufacture',
        // other settings as desired...
    )
);

$installer->endSetup(); 
```

您还可以在管理员中创建一个“下拉”属性，在`eav_attribute`表中找到它，然后编辑其`source_model`列以具有列出的源模型。对于适当的设置，请运行此 sql 语句...

```
SELECT * FROM eav_attribute WHERE attribute_code = 'country_of_manufacture';` 
```

...或首先[查看`country_of_manufacture`属性是如何创建的。](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Catalog/sql/catalog_setup/upgrade-1.6.0.0.1-1.6.0.0.2.php#L28)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T09:27:36.687

您可以设置自己的扩展并在 中`fieldsets`声明`config.xml`以将值从一个表复制到另一个表。但在你的情况下，我真的不知道该怎么做。只需搜索“magento 字段集”...</p>

```
<config>
    <global>
        <fieldsets>
            <checkout_onepage_billing>
                <username><to_customer>*</to_customer></username>
            </checkout_onepage_billing>
        </fieldsets>
        <!-- … -->
    </global>
</config> 
```

# javascript - 如何使用 javascript JQuery 解析 XML 结构

> ID：12949174
> 
> 赞同：5
> 
> 时间：2012-10-18T07:20:17.287
> 
> 标签：javascript, jquery, xml, xml-parsing

这是 XML 文件：

```
<Test>
    <Category>
        <SubCat>
            <Name>Name</Name>
            <Properties>
                <Key>Key</Key>
                <Value>Value</Value>
            </Properties>
        </SubCat>
        <SubCat>
            <Name>Name</Name>
            <SubCat>
                <Name>AnotherName</Name>
                <Properties>
                    <Key>Key</Key>
                    <Value>Value</Value>
                </Properties>
            </SubCat>
        </SubCat>
    </Category>
</Test> 
```

我想得到名字。但只有第一个 SubCat 的名称。和属性键值。问题是 SubCat 存在两次。

我试过这个：

```
$(xml).find('SubCat').each(function() {
    var name = $(this).find("Name").text();
    alert(name);

} 
```

但这显示了第一个和第二个 SubCat 的名称。

我搜索这样的东西。

```
rootElement(Category).selectallchildren(SubCat).Name for the first SubCat Name
rootElement(Category).selectallchildren(SubCat).(SubCat).Name for the second SubCat Name 
```

对键和值进行相同的显式选择

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:56:14.307

这里的诀窍是利用 jQuery 评估 CSS3 选择器的能力。

`SubCat:nth-of-type(1)``SubCat`选择具有任意父元素的每个第一次出现的。

所以这应该工作：

```
$(xml).find("SubCat:nth-of-type(1)").each(function(){
    var name = $(this).find("Name").text(),
        property = { };    //use an object to store the key value tuple
    property[$(this).find("Properties Key").text()] = $(this).find("Properties Value").text();

    console.log(name, property);
});

//Output:
//Name Object { Key="Value" }
//AnotherName Object { Key="Value"} 
```

希望这就是你想要的；在写我的第一个答案时，我显然误解了你的问题，很抱歉造成混乱......

# c# - 从 C# 中的另一个类调用函数

> ID：12949175
> 
> 赞同：0
> 
> 时间：2012-10-18T07:20:19.293
> 
> 标签：c#, draw, shape

我正在处理一个新项目。我有一个类可以将矩形绘制到 windows 窗体。我想把这个类嵌入到另一个类中。代码如下；

主代码将调用形状代码；

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;
using System.Xml.Serialization;
using sekilciz_uygulama;

namespace xml_test_v1

{
class Program
{
    static void Main(string[] args)
    {
        XmlDocument xDoc = new XmlDocument();

        xDoc.Load("c:\\sw_xml_test_4.xml");
        int rad=0;
        string giris_text = Console.ReadLine().ToString();

        Console.WriteLine(giris_text);
            foreach(XmlNode node in xDoc.SelectNodes("network/switch"))

            {

                string ip_adress =      node.SelectSingleNode("ip_adress").InnerText.ToString();

                Console.WriteLine(ip_adress);

                if (ip_adress.Contains(giris_text))

                {
                   // call for shape code!!!
                }

                }}}} 
```

创建形状的代码；

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Drawing;

namespace sekilciz_uygulama
{
public class Sekilciz
{

    public Rectangle[] skare;

    private SolidBrush firca;
    private int x,y, genislik, yukseklik;

    public Sekilciz()

    {
      skare = new Rectangle[5];
        firca = new SolidBrush(Color.Blue);

        x = 500;
        y = 200;
        genislik= 100;

        yukseklik =100;

        for(int i=0; i< skare.Length;i++)

        {
             skare[i] = new Rectangle(x,y,genislik,yukseklik);

            x-=150;
        }
    }

    public void kareciz(Graphics duzlem)

    {
        foreach(Rectangle rec in skare)

        {
            duzlem.FillRectangle(firca,rec);
        }
    }
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:24:18.830

```
// "this" is  your windows form, or control like button
var myGraphic = this.CreateGraphics();
var sekilciz = new Sekilciz(myGraphic);
sekilciz.kareciz(); 
```

但是您的构造函数中正在进行太多处理。最好在同一个类中以其他方法移动该代码。

在此处查看在 Windows 窗体上绘图的完整示例： **[在 Windows 窗体上绘制图形的基础知识](http://www.c-sharpcorner.com/uploadfile/TheButler/the-basics-of-drawing-graphics-onto-windows-forms/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:28:50.910

```
var sekilciz = new Sekilciz();
sekilciz.kareciz(null); 
```

您需要将参数传递给您的方法`kareciz`

# jquery - jQuery在img / text悬停时从左到右滑动div

> ID：12949178
> 
> 赞同：3
> 
> 时间：2012-10-18T07:20:26.857
> 
> 标签：jquery, css

我正在尝试在 上滑动文本`hover`，`img/text`其他 div 也应该与`div`.

我已经实现了滑动效果，但无法`div`沿路径滑动 s。这是[演示](http://jsfiddle.net/snehapatani/mqzuD/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:04:57.600

尝试这个：

```
$('.holdingbox').hover(function(){
        $('.rightbox').animate({width: '90px'}, 1000)
    }, function(){
        $('.rightbox').animate({width: '0'}, 1000)
    }); 
```

**HTML**

```
<div class="holdingbox">
 <span class="leftbox">Stuff</span>
 <span class="rightbox">
     <span class="content">Stuff to reveal</span>
 </span>
</div>
<div class = "box">Text</div> 
```

**CSS**

```
.rightbox {
    position: relative;
    display:inline-block;
    overflow:hidden;
    width:0;
    height:30px;
    vertical-align:top;
}
.content{
    width:100px;
    position:absolute;
    left:0;
    top:0;
} 
```

检查这个[http://jsfiddle.net/mqzuD/10/](http://jsfiddle.net/mqzuD/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:41:33.860

尝试这个

```
$('div.holdingbox').bind("mouseenter", function() {
      $(this).find('span').animate({
             "left": "+=5px",
                "opacity" : "show"
              }, {
            duration: 1000
      });   
 }); 
```

[http://jsfiddle.net/mqzuD/8/](http://jsfiddle.net/mqzuD/8/)

希望这是你想要的。

# javascript - 替换数组以表示为字符串 - 逻辑错误

> ID：12949180
> 
> 赞同：0
> 
> 时间：2012-10-18T07:20:31.790
> 
> 标签：javascript, arrays

我有一个以下格式的 Javascript 数组；

```
["One","Two","Three"] 
```

我希望这是以下格式的字符串；

```
('One','Two','Three') 
```

我尝试了以下方法；但它说`TypeError: arr.replace is not a function`（我猜这是因为`arr`是一个数组）

```
 arr=arr.replace("[","(");
arr=arr.replace("]",")"); 
```

如上所述如何替换字符串`[ " ]`。`( ' )`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:24:11.447

好吧，您不能在 Array 上使用 .replace。您可以执行以下操作

```
var arr = ["One","Two","Three"];
    arr = "('" + arr.join("', '") + "')"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T07:23:50.617

您可以使用`Array.join()`：

```
> var a = ["One","Two","Three"];
> "('" + a.join("','") + "')"
"('One','Two','Three')" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T07:25:39.460

您可以使用此代码将数组转换为字符串

```
var arr = ["One","Two","Three"]​;
var str = "('"+arr.join("','")+"')";
alert(str);
​ 
```

## [小提琴演示](http://jsfiddle.net/aa5mF/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T07:23:55.330

您必须将其转换为字符串，而不是数组实例。~~尝试这个~~：

```
arrStr = arr.toString();
arrStr=arrStr.replace("[","(");
arrStr=arrStr.replace("]",")"); 
```

**编辑**我记错了，这不会提供适当的结果......输出将是：

```
One,Two,Three. 
```

推荐的解决方案首先由@Blender 发布，将数组部分连接在一起，并添加所需的开括号和右括号...

如果您必须仅使用 replace() 来解决此问题，则会得到正确的结果：

```
arrStr = arr.toString();
arrStr=arrStr.replace(",","','");
arrStr = "('" + arrStr "')"; 
```

# java - JavaEE 6 应用程序中的一个 Mongo 实例

> ID：12949182
> 
> 赞同：2
> 
> 时间：2012-10-18T07:20:37.483
> 
> 标签：java, mongodb, jakarta-ee, java-ee-6, cdi

据说`Mongo`每个JVM应该有一个实例。我正在尝试`Mongo`在 JEE6 应用程序中进行设置，到目前为止我已经这样做了。

```
@Startup
@Singleton // EJB not CDI singleton
public class MongoDatabase {

  private Mongo mongo;

  @PostConstruct
  public void init() throws Exception {
    mongo = new Mongo();
  }

  @PreDestroy
  public void shutdown() {
    mongo.close();
  }

  @Produces
  public DBCollection getProjectsCollection() {
    return mongo.getDB("testdatabase").getCollection("mycollection");
  }

} 
```

没关系，我可以`@Inject`将它用于我想要的所有 CDI 服务并在应用程序启动时启动，但它不是每个 JVM 一个，而是每个应用程序一个。`Mongo`如果我在我的应用服务器上部署了多个应用程序，所有这些应用程序都可以在需要时自行设置。

如何`Mongo`在 JEE6 中为每台服务器设置一个，以便所有部署的应用程序都可以访问同一个连接池（类似于 RDBMS 的数据源）？我可以以某种方式在 JNDI 中注册它吗？或者也许不需要，因为每个应用程序就足够了？

# html - 更改自动生成的 HTML 电子邮件中的字体

> ID：12949183
> 
> 赞同：0
> 
> 时间：2012-10-18T07:20:37.657
> 
> 标签：html, email

我需要发送很多号码，所以想将字体更改为 Courier。

我该怎么做？我的构造是...

```
$message = "Contact      : ".$_SESSION["Contact"]."\n\r".

...

$mail_sent = @mail( $to, $subject, $message, $headers ); 
```

当我尝试简单的测试（如粗体开/关或其他地方建议的跨度）时，它们仅显示为文本，并在 Outlook 和我的 iPhone 中以相同的方式传输和显示。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:58:57.030

看来您正在使用 php，因此下一个语法应该可以工作。只需将下一个标题添加到您已有的标题中，或用类似内容替换您已有的标题：

```
$headers .= "Content-Type: text/html; charset=utf-8\r\n";
$headers .= "MIME-Version: 1.0\r\n"; 
```

并将您的文本更改为以下内容：

```
$message = "Contact      : "<span style="font-face:courier;">.$_SESSION["Contact"]<span>."\n\r". 
```

我假设该行是您要格式化的数字。但是当然您可以修改消息中的任何行

再见

# android - 停止以前运行的线程，它是在 android 的上一个类中创建的

> ID：12949185
> 
> 赞同：2
> 
> 时间：2012-10-18T07:20:45.600
> 
> 标签：android, android-activity

我只需要停止在同一应用程序的先前运行时创建的线程。这就是场景。我正在后台使用线程从数据库中检索数据以获取通知，但是当我再次启动该应用程序时，线程数正在增加。我需要阻止这一切。我认为最好在应用程序主类的 onCreate() 方法中停止后台运行线程。但是没办法做到。请尽快帮我解决这个问题。

谢谢和最好的问候，Shehan。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:43:49.647

在活动类中保留对正在运行的线程的静态引用。在您的线程内部，您需要有一个可以设置的布尔变量或一个可以调用的方法，这将导致您的线程完成。你可以检查你是否有一个正在`onCreate()`运行的线程，如果有，告诉它停止。这是一个代码示例：

在您的活动中：

```
private static Thread myThread; 
```

在您的活动中，当您创建线程时：

```
if (myThread != null) {
    if (myThread.isAlive()) {
        myThread.running = false; // Tell the thread to stop running now
    }
}
myThread = new Thread(...);
myThread.start(); 
```

在你的线程中：

```
public boolean running = true; // Initator of this thread should set this to false to make the thread complete

public void run() {
    while (running) {
        // do whatever your thread does in a loop
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:33:29.590

您可以停止活动的 onDestroy() 运行线程。

请找到以下内容，例如：

```
 static boolean stopThread=false;
    public myThread implements Ruunable{
    public void run(){
    while(true){
    //your logic
    if(stopThread)
    break;
    }
    }

    @Override
        protected void onDestroy() 
        {    

          stopThread=true;
        } 
```

# tfs - 成功构建运行脚本后的 TFS 2010

> ID：12949187
> 
> 赞同：1
> 
> 时间：2012-10-18T07:20:58.647
> 
> 标签：tfs, build, post-build

我正在尝试在 TFS2010 上构建我的解决方案，在成功构建后，我试图让 TFS2010 运行另一个应用程序，例如 VS Post-build 事件。

有可能吗？我怎样才能做到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T02:53:18.590

您可能需要做的是在您的构建过程模板中添加一个活动。

在您的构建配置中，流程区域允许您指定将用于执行构建的模板。此 XAML 文件应该已经在您的 TFS 项目中进行了源代码控制。您可以根据当前的 XAML 创建一个新的 XAML，或者如果您已经创建了自己的 XAML，只需检查您的 XAML 并对其进行编辑。

我不熟悉 DBDeploy 或如何调用它，但如果它具有命令行参数，您可能会在构建工作流中添加一个 InvokeProcess 活动并执行 Powershell 命令脚本来执行构建后需要添加的操作。

# joomla - 如何在 VirtueMart 2 中禁用发货

> ID：12949188
> 
> 赞同：3
> 
> 时间：2012-10-18T07:21:00.267
> 
> 标签：joomla, virtuemart, shipping

有什么方法可以禁用 VirtueMart 2 中的运输方式。我正在使用 Joomla 网站，并使用 VirtueMart 组件设置购物车。每当我尝试检查产品时，它都会要求提供运输方式。我不想要这种运输方式，也没有找到任何禁用该运输方式的选项。任何人都可以帮我解决这个问题...

问候

迪乔大卫

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T08:25:50.197

如果您想在结帐过程中跳过运输步骤，只需启用`Automatic Selected Shipment`配置。转到

> 美德商城->配置->结账

然后检查`Automatic Selected Shipment`并保存。

# android - 为什么我的 GPS 没有触发？

> ID：12949190
> 
> 赞同：0
> 
> 时间：2012-10-18T07:21:02.917
> 
> 标签：android

我的应用程序无法获取我的 GPS 位置。

首先，我的清单中有两件事：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

然后我有一个这样的位置代码：

```
LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
LocationListener locationListener = new LocationListener() {
    public void onLocationChanged(Location location) {
      // Called when a new location is found by the network location provider.
      makeUseOfNewLocation(location);
    }
    public void onStatusChanged(String provider, int status, Bundle extras) {}
    public void onProviderEnabled(String provider) {}
    public void onProviderDisabled(String provider) {}
  };
locationManager.requestLocationUpdates(0l, 0f, new Criteria(), locationListener, Looper.getMainLooper()); 
```

现在奇怪的是：

当我启用了 wifi 并且我在我的网络中时，我得到了一个位置。如果我只启用了 GPS，我就无法获得我的位置。甚至我在手机顶部也没有看到显示应用程序何时使用我的 gps 的 gps 图标。

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:50:31.647

对于 GPS：

```
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener); 
```

对于网络：

```
locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener); 
```

# java - 如何部署到 Intellij IDEA Tomcat 文件夹？

> ID：12949191
> 
> 赞同：12
> 
> 时间：2012-10-18T07:21:05.393
> 
> 标签：java, tomcat, deployment, intellij-idea

我使用 Intellij IDEA 11.1.2 终极版。我从 Intellij IDEA 运行 Tomcat 6。在我的 .war 应用程序旁边，我还有另一个包含静态 HTML 文件的文件夹。当我从命令行手动运行 tomcat 时，我将该文件夹放在 Tomcat 的 webapp 文件夹下，它会自动部署它并运行。但是我想调试我的应用程序，所以我想从 Intellij IDEA 运行 Tomcat。我认为 Intellij IDEA 将 tomcat 应用程序部署到 .IntelliJIdea11\system\tomcat 文件夹中。从 Intellij IDEA 运行 Tomcat 时，我可以将包含静态文件的文件夹放在哪里？

（我在我的 .war 文件的 HTML 页面之一请求 iframe 中静态 HTML 文件夹的主页）

有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-18T13:07:13.037

Tomcat 运行配置具有从服务器部署其他应用程序的选项（已存在于原始 webapps 文件夹中），例如您的静态文件：

![部署](../Images/f81ce9c802816c872a5bab6d31da56af.png)

另一种选择是使用另一个工件为静态内容创建第二个模块，并部署来自 IntelliJ IDEA 的两个工件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:43:58.893

我认为 CrazyCoder 的回答要好一些。但这是我的解决方案。

*   去`File -> Project Structure...`
*   选择您的 Web 方面
*   在 Web 资源目录部分中单击以`+`
*   `Web resource directory path`是你的静态内容
*   `Relative path in deployment directory`是你想在你的应用程序战争中找到它的地方

![项目结构](../Images/8182111c5b1c5f8452e004cb80d38b03.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T07:48:57.337

如果要调试，则无需从 IDEA 运行 Tomcat。您可以使用远程调试功能。只需将 Tomcat 设置为接受调试（监听特定端口）。并从 IDEA 创建调试配置以附加到此端口。

# c++ - c++ 带有静态变量的静态函数的奇怪行为

> ID：12949195
> 
> 赞同：1
> 
> 时间：2012-10-18T07:21:16.850
> 
> 标签：c++, function, variables, static

我正在尝试创建一堆 void 方法并稍后在程序中调用它们。我将在前面演示代码，以帮助更好地理解我的问题。

```
.h file
static float sfloat;
namespace someNamespace
{
static void foo();
}
.cpp file
void someNamespace::foo(){cout<<sfloat<<endl} 
```

*   上面的代码是我正在研究的类的更简单版本。

我在其他 .cpp 文件中初始化 sfloat

```
otherFile.cpp
void initializeAndUseFoo(){sfloat = 5; someNamespace::foo();} 
```

据我了解，我希望 foo 打印出 5 但它会打印出 0 。这种行为发生在我拥有的所有其他静态变量（包括指针）中。似乎不知何故，函数内部的变量从未初始化为我分配的值。

但是，如果我不通过函数调用“sfloat”，那么我可以正确调用它。（如果我只是在控制台上打印出来

```
cout<<"just print it not through the function : " <<sfloat<<endl; 
```

那么它确实是5

感谢您的阅读。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T07:23:47.107

全局静态变量在一个编译单元内是静态的。如果您制作另一个编译单元，它将拥有该静态变量的单独副本。

[这个 SO question](https://stackoverflow.com/questions/4992247/how-is-compilation-unit-defined-in-c)解释了 C++ 中的编译单元是什么。

由于您的变量同时是*静态*的和*全局*的，因此在它的编译单元中将有一个它的实例。如果要从另一个文件访问该确切变量，则必须使用`extern`关键字。没有它，将在每个编译单元中创建该变量的新副本。例如，您可以[在此处](http://bytes.com/topic/c/answers/860211-global-variable-static-global-variable)找到一些信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T07:24:12.643

那不是一个类，它是一个命名空间。`static`在命名空间内或在全局范围内提供方法和变量的内部链接。这意味着每个翻译单元都有一份副本。

因为您在 中修改（**而不是初始化**）`sfloat`，`otherFile.cpp`所以只修改了该版本的变量。原始的，在 中初始化`.cpp file`，保留相同的值（这是由`someNamespace::foo()`.

# php - 如何在 php 中创建数组以请求 complexType 的 SOAPclient？

> ID：12949200
> 
> 赞同：1
> 
> 时间：2012-10-18T07:21:49.220
> 
> 标签：php, soap-client

如何在 php 中创建一个数组，以传递对这个 complexType 的请求？

```
<xsd:schema targetNamespace="path" elementFormDefault="qualified">
<xsd:element name="Security">
<xsd:complexType>
</xsd:complexType>
</xsd:element>
<xsd:complexType name="UsernameTokenType">
<xsd:sequence><xsd:element name="Username" type="xsd:string"/>
<xsd:element name="Password" type="PasswordType"/>
</xsd:sequence></xsd:complexType><xsd:complexType name="PasswordType">
<xsd:simpleContent>
<xsd:extension base="xsd:string">
<xsd:attribute name="partyType" type="xsd:string" use="optional"/>
</xsd:extension>
</xsd:simpleContent>
</xsd:complexType>
</xsd:schema> 
```

# html - HTML5：鼠标悬停时更改圆角矩形的颜色

> ID：12949214
> 
> 赞同：1
> 
> 时间：2012-10-18T07:22:34.860
> 
> 标签：html, css

我在 html5 中创建了一个圆角矩形。这是代码-

```
<div style="position:absolute; width:148px; height:44px; left:90px; -webkit-border-radius: 22px;-moz-border-radius: 22px;border-radius: 22px; border:2px solid #FFFFFF; background-color:#4D0C00; cursor:pointer; top: 98px;"> </div> 
```

现在我想改变鼠标悬停的背景颜色。有什么帮助吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:29:11.383

```
<div style="position:absolute; width:148px; height:44px; left:90px; -webkit-border-radius: 22px;-moz-border-radius: 22px;border-radius: 22px; border:2px solid #FFFFFF; background-color:#4D0C00; cursor:pointer; top: 98px;"> </div> 
```

更改此代码。使用内联样式不是一个好习惯。

```
<div class="myDiv"> </div> 
```

为内联样式创建 CSS 类。

```
.myDiv{position:absolute;width:148px;height:44px; left:90px; -webkit-border-radius: 22px;-moz-border-radius: 22px;border-radius: 22px; border:2px solid #FFFFFF; background-color:#4D0C00; cursor:pointer; top: 98px;}

.myDiv:hover{background-color:#FF0000; /* put your color here */ } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T07:27:51.637

检查这个[演示](http://jsfiddle.net/jDWVE/)

```
<div class="divClass"> </div>

.divClass:hover{ background: red; } 
```

# asp.net-membership - 在控制台应用程序中使用 Umbraco 成员资格

> ID：12949215
> 
> 赞同：0
> 
> 时间：2012-10-18T07:22:40.240
> 
> 标签：asp.net-membership, umbraco

我正在创建一个控制台应用程序，它需要访问 Umbraco 成员才能完成一些维护工作。

我想要做的是获得特定角色的所有用户：

```
Roles.GetUsersInRole("SomeRole"); 
```

我添加了一个 app.config 文件并引用了我认为需要的程序集。我可能会遗漏一些东西，因为我收到以下错误：

```
Unhandled Exception: System.TypeLoadException: Could not load type 'umbraco.providers.members.UmbracoRoleProvider' from assembly 'System.Web, Version=4.0.0.0
at System.Web.Security.Roles.Initialize() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:41:08.437

Umbraco API 不能在 HttpContext 之外工作 - 这是 MVC 版本 v5 旨在解决的当前限制之一（在 2012 年 6 月正式封存之前）。

但是，有一组 Web 服务可以满足您的要求 - 在您的安装中检查 /umbraco/webservices/api/MemberService.asmx 并在您的控制台应用程序中引用它 - 如果您引用它，那么您可以与成员合作存储在直接 HttpContext 之外。

# cassandra - cassandra - 无法在复合列中使用 ruby 客户端插入十进制数字

> ID：12949217
> 
> 赞同：4
> 
> 时间：2012-10-18T07:22:45.363
> 
> 标签：cassandra, cassandra-0.7, fluentcassandra

我有一个具有以下架构的复合列族

```
CREATE TABLE employees ( 
                          name varchar,
                          month int,
                          date int,
                          salary decimal,
                          PRIMARY KEY(name,month,date)
                       ); 
```

从 CQL 执行时，这可以正常工作。

```
#INSERT INTO employees (name,month,date,salary) VALUES ('joe',1,1,1000); 
```

但是，当尝试使用 Ruby Clinet 插入时，这会失败。

```
client = Cassandra.new('keyspace_name', '127.0.0.1:9160')
colkey = Cassandra::Composite.new([4].pack('N'), [5].pack('N'), 'salary')
client.insert(:employees, 'nick', {colkey=> [2000].pack("D")}) - This is failing
client.insert(:employees, 'nick', {colkey=> "2000"}) - This works fine 
```

这是错误：

```
CassandraThrift::InvalidRequestException: CassandraThrift::InvalidRequestException
        from /usr/local/lib/ruby/gems/1.9.1/gems/cassandra-0.16.0/vendor/0.8/gen-rb/cassandra.rb:252:in `recv_batch_mutate'
        from /usr/local/lib/ruby/gems/1.9.1/gems/cassandra-0.16.0/vendor/0.8/gen-rb/cassandra.rb:243:in `batch_mutate'
        from /usr/local/lib/ruby/gems/1.9.1/gems/thrift_client-0.8.2/lib/thrift_client/abstract_thrift_client.rb:148:in `handled_proxy'
        from /usr/local/lib/ruby/gems/1.9.1/gems/thrift_client-0.8.2/lib/thrift_client/abstract_thrift_client.rb:51:in `batch_mutate'
        from /usr/local/lib/ruby/gems/1.9.1/gems/cassandra-0.16.0/lib/cassandra/protocol.rb:7:in `_mutate'
        from /usr/local/lib/ruby/gems/1.9.1/gems/cassandra-0.16.0/lib/cassandra/cassandra.rb:463:in `insert'
        from (irb):41
        from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands/console.rb:47:in `start'
        from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands/console.rb:8:in `start'
        from /usr/local/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:41:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

我做错了什么？或者它是一个错误？

问候，马杜

# android - 如何为自定义列表适配器动态创建可绘制对象以分配给图像视图？

> ID：12949222
> 
> 赞同：2
> 
> 时间：2012-10-18T07:23:00.383
> 
> 标签：android, imageview, drawable, listadapter

我在数据库中有一个列，可以是字母的任意组合`RGBMCY`，`(Red, Green, Blue, Magenta, Cyan, Yellow)`. 长度可以是1-6个字符，任意顺序，只要每个字母最多出现1次即可。大约有 720 种可能的不同组合。创造每一种可能性都是非常耗时的，而且还要让 APK 膨胀得更多。

我有一个自定义`ListAdapter`设置`ListView`数据库信息中的行。每个列表行都有一个`ImageView`. `drawable`对于每种颜色，我在文件夹中也有一个小的风格化点图像。我需要生成一个 6 个子图像宽的图像，以给定的顺序并排绘制每个给定的点。如何即时生成图像并分配给`ImageView`？是否可以检查缓存路径以查看其是否已生成并返回，或者生成图像，将其保存到缓存路径然后返回？缓存会很好地工作，因为每个用户都倾向于使用某些组合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:31:50.680

尝试覆盖 ListAdapter 的 getView 方法。

```
 listAdapter = new ArrayAdapter<String>(this, R.layout.list_item) {

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            final TextView row = (TextView) super.getView(position,
                    convertView, parent);

            String[] values = row.getText().toString().split(" ");
            Integer rowColor = Color.rgb(Integer.parseInt(values[0]),
                    Integer.parseInt(values[1]),
                    Integer.parseInt(values[2]));

            row.setBackgroundColor(rowColor);

            return row;
        }

    }; 
```

# json - 如何在asp.net web-api中接收带有间隔字段名称的Json？

> ID：12949230
> 
> 赞同：0
> 
> 时间：2012-10-18T07:23:32.273
> 
> 标签：json, asp.net-web-api, json.net

在我的 MVC-4 Web-API 服务器中，我收到一个名称中包含空格的 Json 字符串：

```
{ "field name" : "some value" , "simpleName" : "some string" } 
```

我定义了一个`Model`类，例如：

```
public class SomeJsonModel
{
    [DataMember(Name = "field name")]
    public string FieldName { get; set; }

    public string SimpleName { get; set; }
} 
```

现在`SimpleName`通过（尽管它的第一个字母大写不匹配，这很好），但`FieldName`变成`null`.

如何成功接收字段名称中有空格的 Json（预定义 - 我无法更改客户端数据源）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:20:47.893

Try adding [DataContract] on your class:

```
[DataContract]
public class SomeJsonModel
{
    [DataMember(Name = "field name")]
    public string FieldName { get; set; }

    [DataMember]
    public string SimpleName { get; set; }
} 
```

Here is more info about this:

*   on [MSDN](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute.aspx): "*Apply the DataMemberAttribute attribute in conjunction with the DataContractAttribute to identify members of a type that are part of a data contract.*"
*   a [Json.NET issue](http://json.codeplex.com/workitem/22431) relating to the DataMember's Name property being ignored. The resolution for that was to "*Put DataContract on the class.*"

# android - 显示 WindowManager$ BadTokenException 的 android 警报对话框

> ID：12949232
> 
> 赞同：1
> 
> 时间：2012-10-18T07:23:35.907
> 
> 标签：android

我已经实现了以下代码来显示自定义警报对话框，但是当我调用此对话框时，它显示异常：

WindowManager.BadTokenException

```
public static void showAlertDialog(final String title, String message,
            final Context context, final boolean redirectToPreviousScreen) {
        AlertDialog.Builder alertbox = new AlertDialog.Builder(context);
        alertbox.setMessage(message);
        alertbox.setTitle(title);

        alertbox.setNeutralButton("Ok", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface arg0, int arg1) {

            }
        });
        try{
            alertbox.show();    
        }catch (Exception b) {

        } 
```

# python - 为什么我的默认编码是 python 2.7.2 的“utf-8”？

> ID：12949234
> 
> 赞同：2
> 
> 时间：2012-10-18T07:23:45.377
> 
> 标签：python, python-2.7

在 Python 中，defaultencoding 存储在 'unicode_default_encoding' 中，我找到了所有 Python 源代码，它有 2 个函数。

1.  `_PyUnicode_Init() //strcpy(unicode_default_encoding, "ascii");`
2.  `setencoding()`在站点.py

所以没有人修改默认编码。那为什么我的默认编码是“utf-8”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T02:37:29.353

看起来 site.py 中的设置会影响默认编码。

查看[http://blog.ianbicking.org/illusive-setdefaultencoding.html](http://blog.ianbicking.org/illusive-setdefaultencoding.html)

> 直接编辑 site.py（在标准库中）。似乎是个坏主意。虽然也许我会删除 del sys.setdefaultencoding 行...无论如何，site.py 也可能出现在您计算机上的其他位置（例如，/etc/pythonX.Y/site.py）。

# hibernate - 将参数设置为@Filter 时，休眠引发“NullPointerException”

> ID：12949239
> 
> 赞同：2
> 
> 时间：2012-10-18T07:23:54.910
> 
> 标签：hibernate, jpa

我有一个非常奇怪的问题。我正在使用 Hibernate 4.1.7 和 Postgres 9.1。在我的实体类中，我使用注释定义了一个过滤器：

```
@FilterDef(name = "filterName", parameters=@ParamDef(name="paramInt", type="integer" )) 
```

然后我将@Filter 添加到集合中。如果过滤器是这样定义的：

```
@OneToMany(cascade = CascadeType.ALL, mappedBy = "linkField")
@Filter(name = "filterName", condition = "fieldVal=0")
private Collection<ChildClass> children; 
```

一切正常，集合被正确过滤，我只看到 fieldVal 为 0 的孩子。另一方面，如果我这样做：

```
@OneToMany(cascade = CascadeType.ALL, mappedBy = "linkField")
@Filter(name = "filterName", condition = "fieldVal=:paramInt")
private Collection<ChildClass> children; 
```

我在我的代码中设置了参数，“过滤器”设置正确（在调试器中检查它）但是，在访问集合时，它会引发以下异常：

```
java.lang.NullPointerException: 
    at org.hibernate.engine.spi.QueryParameters.processFilters(QueryParameters.java:492)
    at org.hibernate.engine.spi.QueryParameters.processFilters(QueryParameters.java:462)
    at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:1688)
    at org.hibernate.loader.Loader.doQuery(Loader.java:832)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:293)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:263)
    at org.hibernate.loader.Loader.loadCollection(Loader.java:2094)
    at org.hibernate.loader.collection.CollectionLoader.initialize(CollectionLoader.java:61)
    at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:678)
    at org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:82)
    at org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:1801)
    at org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:524)
    at org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:212)
    at org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:520)
    at org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:125)
    at org.hibernate.collection.internal.AbstractPersistentCollection$1.doWork(AbstractPersistentCollection.java:152)
    at org.hibernate.collection.internal.AbstractPersistentCollection$1.doWork(AbstractPersistentCollection.java:139)
    at org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:212)
    at org.hibernate.collection.internal.AbstractPersistentCollection.readSize(AbstractPersistentCollection.java:138)
    at org.hibernate.collection.internal.PersistentBag.size(PersistentBag.java:242) 
```

我没有想法，几天来我一直在试图弄清楚它可能是什么，到处搜索都无济于事。有人知道可能是什么吗？

谢谢！

编辑：在引发异常时更清楚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:31:47.970

好吧，这完全是我的错，即使文档对此并不十分清楚。

您确实可以通过注释传递变量，但问题出在过滤器的名称上。我在示例中简化了太多（因此是我的错）并使用了不同的过滤器名称。您不能使用与命名查询相同的策略命名过滤器（即 class.filtername），因为这样做 Hibernate 将“拆分”过滤器并仅获取点之前的部分。因此过滤器不存在，导致上述异常。

我的过滤线是：

```
@Filter(name = "className.filterName", condition = "fieldVal=:value") 
```

这引发了异常，因为 Hibernate 在处理 QueryParameters.java 的第 492 行的过滤器时，拆分过滤器名称并仅查找名为 className 的过滤器。将其更改为：

```
@Filter(name = "filterName", condition = "fieldVal=:value") 
```

工作正常。

# swing - 改变树叶的背景颜色

> ID：12949240
> 
> 赞同：0
> 
> 时间：2012-10-18T07:23:57.013
> 
> 标签：swing, background-color, jtree

想在一种特定条件下改变树叶的颜色。

```
if (l_sel_node_object.getIsEnabled().trim().equalsIgnoreCase("N"))
    defaultTreeCellRenderer.setBackgroundSelectionColor(Color.red); 
```

但它正在改变每个选定节点的背景。谁能帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:00:21.740

仅在金属外观和感觉上测试：

![在此处输入图像描述](../Images/e804033167e48fb2542933b1fc761536.png)

```
import java.awt.*;
import javax.swing.*;
import javax.swing.tree.*;

public class MainPanel {
  public JPanel makeUI() {
    JTree tree = new JTree();
    tree.setCellRenderer(new RedTreeCellRenderer());
    JPanel p = new JPanel(new BorderLayout(5, 5));
    p.add(new JScrollPane(tree));
    return p;
  }
  public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
      @Override public void run() {
        createAndShowGUI();
      }
    });
  }
  public static void createAndShowGUI() {
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    f.getContentPane().add(new MainPanel().makeUI());
    f.setSize(320, 240);
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }
}
//*
class RedTreeCellRenderer extends DefaultTreeCellRenderer {
  @Override public Component getTreeCellRendererComponent(
        JTree tree, Object value, boolean isSelected,
        boolean expanded, boolean leaf, int row, boolean hasFocus) {
    JComponent c = (JComponent)super.getTreeCellRendererComponent(
        tree, value, isSelected, expanded, leaf, row, hasFocus);
    if(isSelected) {
      c.setForeground(getTextSelectionColor());
      if (leaf && value.toString().equalsIgnoreCase("red")) {
        //<strong>
        c.setOpaque(true);
        //</strong>
        c.setBackground(Color.RED);
      } else {
        c.setOpaque(false);
        c.setBackground(getBackgroundSelectionColor());
      }
    } else {
      c.setOpaque(false);
      c.setForeground(getTextNonSelectionColor());
      c.setBackground(getBackgroundNonSelectionColor());
    }
    return c;
  }
}
/*/
class RedTreeCellRenderer2 extends DefaultTreeCellRenderer {
  @Override public Component getTreeCellRendererComponent(
    JTree tree, Object value, boolean isSelected,
    boolean expanded, boolean leaf, int row, boolean hasFocus) {
    JComponent c = (JComponent)super.getTreeCellRendererComponent(
                     tree, value, isSelected, expanded, leaf, row, hasFocus);
    if(isSelected) {
      if(leaf) {
        setParticularCondition(value.toString());
      }
      c.setForeground(getTextSelectionColor());
      c.setBackground(getBackgroundSelectionColor());
    } else {
      c.setForeground(getTextNonSelectionColor());
      c.setBackground(getBackgroundNonSelectionColor());
    }
    return c;
  }
  boolean particularCondition = false;
  private void setParticularCondition(String str) {
    particularCondition = str.equalsIgnoreCase("red");
  }
  @Override public Color getBackgroundSelectionColor() {
    if(particularCondition) return Color.RED;
    else return super.getBackgroundSelectionColor();
  }
}
//*/ 
```

# java - 试图返回一个字符串数组

> ID：12949242
> 
> 赞同：0
> 
> 时间：2012-10-18T07:24:04.137
> 
> 标签：java, arrays, string

我已经写了这个方法，但不知道为什么我会出错。我对编程还是很陌生，所以有人认为这有什么不妥吗？

```
public String[] gen() {
    String big = "A";
    String small = "a";
    return String[] {big, small};   
} 
```

注意：得到一个红线`return String[]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T07:26:24.380

您省略了`new`关键字。

```
return new String[] {big, small}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T07:26:37.300

将其更改为

```
public String[] gen() {

            String big = "A";
            String small = "a";
            return new String[] {big, small};

    }

String[]{String, String} //is not a valid array constructor, 
```

相反，您应该使用

```
new String[]{String, String} constructor. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T07:39:15.313

你错过了关键字`new`

```
return new String[] {big, small}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T07:26:40.843

```
public String[] gen() {

        String big = "A";
        String small = "a";
        return new String[] {big, small};
    } 
```

用这个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T07:26:48.977

尝试

```
return new String[] {big, small}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T07:26:52.710

试试这个，你需要使用`new`关键字创建字符串数组

```
public String[] gen() {

            String big = "A";
            String small = "a";
            return new String[] {big, small};

    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-18T07:26:53.010

您需要使用`new`数组，使用：

```
return new String[] {big, small}; 
```

```
public String[] gen() {    
        String big = "A";
        String small = "a";
        return new String[] {big, small};    
} 
```

# php - $_SESSION[] 未设置

> ID：12949247
> 
> 赞同：0
> 
> 时间：2012-10-18T07:24:18.290
> 
> 标签：php, ajax, session

我正在制作一个登录系统，当我从 AJAX 连接发送请求时，没有设置会话。发送连接：

```
function onSubmit(form){
    var username = form.username.value;
    var password = form.password.value;
    if(username == ''){
        document.getElementById('error').innerHTML='<font color="red"><b>Please enter a username</b></font>';
        return;
    }
    if(password == ''){
        document.getElementById('error').innerHTML='<font color="red"><b>Please enter a password</b></font>';
        return;
    }
    if(username != '' && password != ''){
        document.getElementById('error').innerHTML='';
        showDiv('loadinglogin');    
        var dataString = 'username='+username+'&password='+password;
    $.ajax({  
      type: "POST",  
      url: "util/login.php",  
      data: dataString,  
      success: function(msg) {  
        if(msg == "ok"){
            document.getElementById('error').innerHTML='<font color="green"><b>Login good, redirecting</b></font>';
            hideDiv('loadinglogin');    
            window.location = "test.php";
        }else{
            document.getElementById('error').innerHTML='<font color="red"><b>Invalid login</b></font>';
            hideDiv('loadinglogin');    
        }
      }  
    }); 

    }
} 
```

设置会话/句柄登录：

```
<?php
include('database.php');
session_start();
function in_db($u,$p){
    $p = md5($p);
    $p = sha1($p);
    $p = sha1($p);
    $p = md5($p);
    $sql = "SELECT * FROM `users` WHERE `username` = '$u' AND `password` = '$p'";
    $result = mysql_query($sql) or die(mysql_error());  
    while($row = mysql_fetch_object($result))
    { 
        return true;    
    }
    return false;
} 
if(isset($_POST['username']) && isset($_POST['password']) && !isset($$_SESSION['user']) && !isset($$_SESSION['pass'])){
    $username = mysql_real_escape_string($_POST['username']);
    $password = mysql_real_escape_string($_POST['password']);
    if(in_db($username,$password)){
        $_SESSION['user'] = $user;
        $_SESSION['pass'] = $pass;
        print("ok");
    }else{
        print("bad");
    }
}else{
    print("bad");
}
?> 
```

不确定我是否做错了什么：/

编辑：我从 ERROR_LOG 中提取了这个

[18-Oct-2012 07:27:00 UTC] PHP 警告：session_start() [function.session-start]：会话 id 太长或包含非法字符，有效字符为 az、AZ、0-9 和 ' -,' 在 /util/login.php 第 2 行

PHP.ini

```
register_globals = off
allow_url_fopen = off

expose_php = Off
max_input_time = 60
variables_order = "EGPCS"
extension_dir = ./
upload_tmp_dir = /tmp
precision = 12
SMTP = relay-hosting.secureserver.net
url_rewriter.tags = "a=href,area=href,frame=src,input=src,form=,fieldset="

; Only uncomment zend optimizer lines if your application requires Zend Optimizer support

;[Zend]
;zend_optimizer.optimization_level=15
;zend_extension_manager.optimizer=/usr/local/Zend/lib/Optimizer-3.3.3
;zend_extension_manager.optimizer_ts=/usr/local/Zend/lib/Optimizer_TS-3.3.3
;zend_extension=/usr/local/Zend/lib/Optimizer-3.3.3/ZendExtensionManager.so
;zend_extension_ts=/usr/local/Zend/lib/Optimizer_TS-3.3.3/ZendExtensionManager_TS.so

; -- Be very careful to not to disable a function which might be needed!
; -- Uncomment the following lines to increase the security of your PHP site.

;disable_functions = "highlight_file,ini_alter,ini_restore,openlog,passthru,
;             phpinfo, exec, system, dl, fsockopen, set_time_limit,
;                     popen, proc_open, proc_nice,shell_exec,show_source,symlink" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:25:47.147

放在`session_start();`文件的最开头，在`include()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:28:23.590

检查您的代码 - 什么是 $$_SESSION['user']？应该是 $_SESSION？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T16:38:14.797

试试这个：[PHP手册](http://www.php.net/manual/en/function.session-start.php#82957)

并检查您的 $$_SESSION 错字。

另外，请尝试

```
print(session_id()); 
```

在开始您的会话之前。

也试试

```
session_id("my_session"); 
```

在开始您的会议之前，让我们知道结果。

# javascript - javascript条件if语句中的错误

> ID：12949249
> 
> 赞同：0
> 
> 时间：2012-10-18T07:24:18.650
> 
> 标签：javascript, if-statement, conditional

将我的 PHP 项目上传到 Internet 主机 (000webhost.com) 后，我得到了一份保险。它在我的本地主机上运行良好，但在互联网主机上却不行。这是我的代码：

```
//view.php (use a hidden iframe to received data after submitting)
<form action="model.php" method="POST"  target="my_iframe" id="my_form" style="display: none;">
                <input type="hidden" name="user" id="user" value=""/>
                <input type="hidden" name="user_lastname" id="user_lastname" value=""/>
                <input type="hidden" name="user_firstname" id="user_lastname" value=""/>
            </form>
<iframe name="my_iframe" id="my_iframe" style="display: none;"></iframe>
<div id="sent">Sent</div>
<srcipt type="text/javascript">
    jQuery('#sent').unbind('click').click(funtion(){
        jQuery('#user').val("an user name");
        jQuery('#user_lastname').val("a last name");
        jQuery('#user_firstname').val("a first name");
        jQuery('#my_form').submit();
        jQuery('#my_iframe').unbind('load').load(function(){
            if(jQuery(this).contents().text()!='success')
               alert('Update failed');
            else
               alert('Update successful');
        });
     });

</script>

//model.php
if(UpdateUser($_REQUEST['user'],$_REQUEST['user_firstname']),$_REQUEST['user_lastname'])==true)
   echo 'success';
else
   echo 'Fail in updating'; 
```

在我的本地主机上，我收到一条消息“更新成功”，但在我的互联网主机上，我收到一条消息“更新失败”。感谢进步。对不起，因为我的英语不好。

---EDIT--- 我改变了 iframe 的 style="display:block" 来显示它的内容。我看到 iframe 的内容是“成功”，但我仍然收到消息“更新失败”。这意味着：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:56:32.060

我更正了拼写错误（在脚本的第一行中还有另一个：函数拼写为“功能”）。jQuery 脚本正在运行，所以问题一定出在 PHP 页面上。也许 000webhost 在您的 PHP 页面输出之前放置了一些输出，或者更新失败。检查 PHP 页面的输出。

# javascript - JavaScript/HTML5库实现自定义组织结构图

> ID：12949250
> 
> 赞同：0
> 
> 时间：2012-10-18T07:24:20.553
> 
> 标签：javascript, html, charts

![在此处输入图像描述](../Images/da8a4a95653677a44226b215caa70840.png)

我需要一个 JavaScript/HTML5 库来实现以下要求**，同一级别（ 1 和 2 ）中的节点应位于两个不同的位置**[根据另一个数据属性。]

我看虽然有很多图书馆但无法实现这一点，有什么直接或间接实现这一点的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:13:09.047

您有两个选择： 1\. 您创建两个项目模板，第一个必须在底部有一个额外的空间。并且项目应该与底部对齐，因此它会产生影响，您的第一个项目在行内提出。2\. 您需要创建明确的行集合并设置它们的最小高度。然后垂直对齐每个项目。

一般来说，我认为这是在浪费屏幕空间。您可以通过颜色、边框宽度、阴影等实现相同的效果，而不会浪费屏幕空间。看起来您正试图在您的应用程序中模仿纸质组织结构图，从我的角度来看这是错误的。

# php - 我应该写什么来调整我的网页大小以在 Ipod 和 Iphone 上查看？

> ID：12949254
> 
> 赞同：0
> 
> 时间：2012-10-18T07:24:34.873
> 
> 标签：php

当我运行我的代码来检测 Ipod 和 Iphone 时，我试图添加一些代码，但我在 webb 上找不到任何信息。

```
$iPod = stripos($_SERVER['HTTP_USER_AGENT'],"iPod");
$iPhone = stripos($_SERVER['HTTP_USER_AGENT'],"iPhone");
$iPad = stripos($_SERVER['HTTP_USER_AGENT'],"iPad");
if(stripos($_SERVER['HTTP_USER_AGENT'],"Android") && stripos($_SERVER['HTTP_USER_AGENT'],"mobile"))
{
    $Android = true;
}
else if(stripos($_SERVER['HTTP_USER_AGENT'],"Android"))
{
    $Android = false;
    $AndroidTablet = true;
}
else
{
    $Android = false;
    $AndroidTablet = false;
}
$webOS = stripos($_SERVER['HTTP_USER_AGENT'],"webOS");
$BlackBerry = stripos($_SERVER['HTTP_USER_AGENT'],"BlackBerry");
$RimTablet= stripos($_SERVER['HTTP_USER_AGENT'],"RIM Tablet");

//do something with this information
if( $iPod || $iPhone )
{
    // What code should It be here.
} 
```

# javascript - Breadcrumb Consistency / Ajax Form Post 和 History.Back()

> ID：12949255
> 
> 赞同：2
> 
> 时间：2012-10-18T07:24:36.453
> 
> 标签：javascript, ajax, user-interface

我目前正在设计一个涉及链接在一起的表单的网络应用程序。例如：

员工网格 > 带休假请求网格的单个员工表单 > 带替代员工网格的单个休假请求表单 > 单个员工表单...

我的问题是如何管理后退按钮。如果用户执行以下操作：

*   从员工网格打开单一员工表单。*[Back会将他们带到员工网格。]*
*   从员工表单中打开一个单次休假申请表*[返回将带他们到员工表单。]*
*   对发布并重定向到单身员工表单的单身休假申请表进行更改*[回到这里将带他们回到单身休假申请表，然后是员工表单，然后是员工网格。他们会期望它把他们带回员工网格吗？]*
*   从 Employee Form 中打开另一个 Single Leave Request Form，进行更改以发布并重定向到 Single Employee Form。*[回到这里将再次将他们带回单次休假申请表，然后是员工表，然后是单次休假申请表，然后是员工表，然后是员工网格。他们会期望它把他们带回员工网格吗？]*

这条链可能会变得很长。

我的一个想法是通过使用 Ajax 发布表单然后调用 history.back() 来实现一种遵循面包屑的行为。这带来了另一组复杂性（如果用户在新选项卡/窗口中打开页面或使用书签 URL 怎么办），但我相信这可以使用 history.length 和 window.name 属性来处理。

我是否低估了我的用户——他们是否知道会发生什么，或者这条链是否需要简化——如果是这样，你认为我的解决方案会奏效吗？

# php - 处理数据库日期/时间转换的“正确”方法是什么？

> ID：12949256
> 
> 赞同：0
> 
> 时间：2012-10-18T07:24:42.210
> 
> 标签：php, database, date

我有一个 PHP 站点，它以人类形式从用户那里获取日期（例如 2012-10-18 或类似的）并将它们存储在数据库中。在数据库中，它们存储为 unix 时间戳。我可以使用 PHP 函数进行转换，只存储/检索时间戳，或者我可以使用 SQL/数据库函数在查询中进行转换，并存储/检索格式化的日期。
是否有理由更喜欢一种方法而不是另一种？其中之一是否更“正确”（关注点分离等）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:28:26.247

使用数据库中的日期。数据库能够计算偶数，因此没有理由在您的 PHP 脚本中进行这种类型的处理。也许如果您不想这样做，一个有效的论点可能是因为您的查询由于其中的逻辑而变得有点复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T07:47:02.730

我发现在 SQL 中尝试处理用户时区很复杂（至少在 SQLite 中，不确定其他数据库是否在其日期函数中有更好的时区支持），所以 PHP 似乎是处理这个问题的更好地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T07:37:03.157

恕我直言，这两种方法在性能方面没有区别，但使用 PHP 转换/格式化 sql-dates 具有更简洁的代码和本地化能力的优势。

# jquery - 如何更改 tooltwist 页面模板中的标题，以便包含 jquery-ui 库？

> ID：12949262
> 
> 赞同：2
> 
> 时间：2012-10-18T07:24:57.683
> 
> 标签：jquery, jquery-ui, tooltwist

每当我使用 tooltwist 进行部署时，我发现标头不包含我的应用程序所需的 jquery-ui 库。我怎样才能将它插入到零件中以使其工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T00:09:09.793

一种方法和最简单的方法是为您的 tooltwist 扩展项目自定义页面模板，因此您将在您的 tooltwist 项目中部署它。

**自定义：**

1.  将ttWbd/widgets/toolbox 下的**page/**和**page_template/**文件夹复制到项目的小部件目录中。（例如 {projectName}_t/widgets/{projectName}_widgets/）
2.  打开 page_template 的 conf.xml 并适当更改**linkedWidget**、**label**和**description**节点的配置。**linkedWidget**将具有类似项目**{projectName}_widgets.page的值**
3.  如果您已经在项目中创建了页面，则需要将所有页面的配置文件 (conf.xml) 的 linkedWidget 节点从**toolbox.page**替换为**{projectName}_widget.page，**包括所有版本文件夹。
4.  在文件夹**page/**下，您可以根据您在设计器中选择的页面模式自定义模板标题。对于**mode = 页面**更新**new_jquery_header.jsp**。

*页面模板：*

![在此处输入图像描述](../Images/fb3a9243102a72af5c91e4d67ba09c0b.png)

**注意：**
创建新资产时，新页面模板选项将出现在您的资产列表中。

# facebook - 如何在 FBFriendPickerView 中实现 didSelectRow 方法

> ID：12949265
> 
> 赞同：2
> 
> 时间：2012-10-18T07:25:03.737
> 
> 标签：facebook, ios5, ios6, ios4

我正在我的应用程序中集成最新的 Facebook SDK，它运行良好，但现在我想在其中做一些改进。我想要这样，当我从 FBFriendPickerView 中单击我的任何朋友时，我想导航到其他视图意味着我想实现 didSelectRow表视图中的功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:39:59.540

**您可以在“ friendPickerViewControllerSelectionDidChange** ”委托方法中尝试推送视图。我没有尝试过，但应该成功了。只需检查[http://developers.facebook.com/docs/reference/ios/3.0/protocol/FBFriendPickerDelegate/#friendPickerViewControllerSelectionDidChange%3A](http://developers.facebook.com/docs/reference/ios/3.0/protocol/FBFriendPickerDelegate/#friendPickerViewControllerSelectionDidChange%3A)

# c# - 无法为组合框中的单个项目触发 SelectedIndexChanged 事件

> ID：12949266
> 
> 赞同：1
> 
> 时间：2012-10-18T07:25:06.657
> 
> 标签：c#, asp.net, events, combobox

我只在论坛中解决了一些常见问题： [Select Index does not fire for a single item](https://stackoverflow.com/questions/541789/selectedindexchanged-event-does-not-fire-if-item-is-already-selected-in-dropdown)

但是我有两个相互关联的组合框，在 A 中选择的值决定了 B 中的值，在选择 B 组合框项时，将显示数据。所以我想要这个事件，即使是 B 组合框中的单个项目。

我是否应该在 B 组合框中附加一个选择项，以便用户选择（但这是最后一个选项）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:40:53.433

还有其他的解决方案，一种是在页面加载方法中调用同一个选中索引事件的事件。所以通过这种方式，我们也可以显示单个项目的结果。这不是最好的方法，但它对我有用。

# jsf - 使用 JSF 显示 RTF

> ID：12949267
> 
> 赞同：1
> 
> 时间：2012-10-18T07:25:15.753
> 
> 标签：jsf, rtf, viewer

我需要使用 JSF 显示 RTF 文档 - 仅显示。我不需要像[http://www.primefaces.org/showcase/ui/editor.jsf这样的 RTF 编辑器](http://www.primefaces.org/showcase/ui/editor.jsf)

这

```
<h:outputText value="#{bean.text}" escape="false" /> 
```

不起作用 - 它只显示 rtf-source

谢谢

托马斯

# asp.net - 一条一条更新记录

> ID：12949270
> 
> 赞同：0
> 
> 时间：2012-10-18T07:25:38.077
> 
> 标签：asp.net, sql-server-2008

我有 5000 条记录，我正在计算一个用户的工资并更新他在数据库中的数据。所以更新 5000 条记录需要很长时间。我想先计算所有用户的工资，然后更新到数据库中的记录。有没有其他方法可以通过单击更新数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:00:30.293

这实际上取决于您如何管理数据访问层以及进行计算需要哪些数据？您是否仅在一个表中拥有所需的所有数据，或者对于每条记录，您需要从另一个表中获取一些其他数据？

一种方法是检索每条记录并在事务中进行计算，然后将其存储在数据库中。这样，您还可以利用 ajax UI 通知用户计算进度。这样，您应该使用 SqlDataReader 来获取数据，因为它非常优化并且比使用 DataSet 和 DataTables 具有更少的开销，并且您可以防止多次类型转换。此外，您还可以利用 TPL 对其进行优化，或者使其可配置为每次获取/更新 N 条记录。如果您有记录的 ID，则此方法有效。您还需要为您的记录提供一个字段来跟踪您的计算，以防任何断开连接、崩溃或 iisreset 执行，以便您可以恢复计算而不是再次重新运行它。

# iphone - 如何创建 .ipa 文件以及如何在 iphone/ipad 中安装 .ipa？

> ID：12949272
> 
> 赞同：0
> 
> 时间：2012-10-18T07:25:38.107
> 
> 标签：iphone

我已经使用 jquerymobile 开发了一个移动原生应用程序。

现在我想将该应用程序部署在`iPhone`.

对于这个我想要**.ipa**文件。如何创建`.ipa`和安装**.ipa**文件`iPhone`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:55:10.127

要完成此操作，您需要执行以下操作：

*   在`Xcode`，转到`Product -> Archive`（这将构建应用程序）

*   构建完成后，`Organizer - Archives`将显示窗口（这会列出您应用的所有存档版本）

*   在列表的左上方会有一个`Distribute`按钮，点击它

*   这将打开一个用于创建**.ipa**文件的“向导”

*   选择`Save for Enterprise or Ad-Hoc Deployment`选项

*   点击下一步

*   您现在需要选择一个`Code Signing Identity`（这是在苹果开发者门户的 Provisioning 区域中创建的

*   如果您没有开发或分发证书来创建一个去[https://developer.apple.com/ios/manage/provisioningprofiles/index.action](https://developer.apple.com/ios/manage/provisioningprofiles/index.action)并为您计划为其创建 ipa 文件的应用程序创建一个

*   **注意：** *您需要先在钥匙串上安装证书，然后它才会成为一个选项，如果您正在创建文件，您可能需要在将证书安装到钥匙串后重新启动*

*   选择您为开发/分发创建的证书

*   点击下一步

*   这将需要一些时间，所以请耐心等待，一旦完成，它会询问您要为新文件命名什么

*   输入新 ipa 文件的名称，这将是您需要发送或提供给用户的文件

之后，对于需要在其设备上安装 ipa 的用户，您可以查看[http://www.itexico.com/blog/bid/41187/iPhone-or-iPad-Testing-Installing-applications-with-a- ipa 文件](http://www.itexico.com/blog/bid/41187/iPhone-or-iPad-Testing-Installing-applications-with-a-ipa-file)

**注意：**我的用户不需要使用该`.mobileprovision`文件，但这是我的经验

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:14:37.033

查看可能满足您需求的[PhoneGap](http://www.phonegap.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T07:36:19.543

在`Xcode`，转到，`Product -> Archive`然后在构建存档后它将显示一个屏幕，其中会有一个选项，例如`Share`。单击后，您将获得其他选项，其中一个是**.ipa**。选择并构建它。对于安装，您需要通过 iTunes 添加。

# c++ - Boost asio tcp socket available 报告不正确的字节数

> ID：12949274
> 
> 赞同：6
> 
> 时间：2012-10-18T07:25:42.007
> 
> 标签：c++, boost, boost-asio

在 SSL 客户端服务器模型中，我使用下面的代码从客户端或服务器端的套接字读取数据。

我只在有可用数据时读取数据。要知道何时有可用数据，我检查`available()`了`lowest_layer()`. `asio::ssl::stream`在我从客户端向服务器发送 380 字节并在服务器上输入读取方法后，我看到以下内容。

's' 是我提供的缓冲区。
'n' 是我提供的缓冲区的大小。
'a1' 是读取前 available() 的结果，将报告 458 字节。
'r' 是实际读取的字节数。它将报告 380，这是正确的。
'a2' 是读取后 available() 的结果，将报告 0 字节。这是我所期望的，因为我的客户发送了 380 个字节并且我已经全部阅读了它们。

为什么第一次调用会`available()`报告太多字节？

类型：

```
/**
 * Type used as SSL Socket. Handles SSL and socket functionality.
 */
typedef boost::asio::ssl::stream<boost::asio::ip::tcp::socket> SslSocket;
/**
 * A shared pointer version of the SSL Socket type.
 */
typedef boost::shared_ptr<SslSocket>                           ShpSslSocket; 
```

成员：

```
ShpSslSocket                     m_shpSecureSocket; 
```

部分读取方法：

```
std::size_t a1 = 0;
if ((a1 = m_shpSecureSocket->lowest_layer().available()) > 0)
{
   r += boost::asio::read(*m_shpSecureSocket,
                          boost::asio::buffer(s, n),
                          boost::asio::transfer_at_least(1));
}

std::size_t a2 = m_shpSecureSocket->lowest_layer().available(); 
```

* * *

添加信息：

所以我改变了我的读取方法来更彻底地检查是否还有数据可以从 boost::asio::ssl::stream 中读取。我不仅需要检查套接字级别是否有可用数据，而且可能还有数据卡在某处的 OpenSSL 缓冲区中。SSL_peek 可以解决问题。除了检查可用数据之外，它还会检查 TCP 端口状态，只要没有超时，它就会执行所有这些操作。

这是我创建的 boost::iostreams::device 类的完整读取方法。

```
std::streamsize SslClientSocketDevice::read(char* s, std::streamsize n)
{
   // Request from the stream/device to receive/read bytes.
   std::streamsize r = 0;

   LIB_PROCESS::TcpState eActualState = LIB_PROCESS::TCP_NOT_EXIST;

   char chSslPeekBuf; // 1 byte peek buffer

   // Check that there is data available. If not, wait for it.
   // Check is on the lowest layer (tcp). In that layer the data is encrypted.
   //  The number of encrypted bytes is most often different than the number
   //  of unencrypted bytes that would be read from the secure socket.
   // Also: Data may be read by OpenSSL from the socket and remain in an
   //  OpenSSL buffer somewhere. We also check that.
   boost::posix_time::ptime start = BOOST_UTC_NOW;
   int         nSslPeek  = 0;
   std::size_t nAvailTcp = 0;
   while ((*m_shpConnected) &&
          (LIB_PROCESS::IpMonitor::CheckPortStatusEquals(GetLocalEndPoint(),
                                                         GetRemoteEndPoint(),
                                                         ms_ciAllowedStates,
                                                         eActualState)) &&
          ((nAvailTcp = m_shpSecureSocket->lowest_layer().available()) == 0) &&
          ((nSslPeek  = SSL_peek(m_shpSecureSocket->native_handle(), &chSslPeekBuf, 1)) <= 0) && // May return error (<0) as well
          ((start + m_oReadTimeout) > BOOST_UTC_NOW))
   {
      boost::this_thread::sleep(boost::posix_time::millisec(10));
   }

   // Always read data when there is data available, even if the state is no longer valid.
   // Data may be reported by the TCP socket (num encrypted bytes) or have already been read
   //  by SSL and not yet returned to us.
   // Remote party can have sent data and have closed the socket immediately.
   if ((nAvailTcp > 0) || (nSslPeek > 0))
   {
      r += boost::asio::read(*m_shpSecureSocket,
                             boost::asio::buffer(s, n),
                             boost::asio::transfer_at_least(1));
   }

   // Close socket when state is not valid.
   if ((eActualState & ms_ciAllowedStates) == 0x00)
   {
      LOG4CXX_INFO(LOG4CXX_LOGGER, "TCP socket not/no longer connected. State is: " <<
                                    LIB_PROCESS::IpMonitor::TcpStateToString(eActualState));
      LOG4CXX_INFO(LOG4CXX_LOGGER, "Disconnecting socket.");
      Disconnect();
   }

   if (! (*m_shpConnected))
   {
      if (r == 0)
      {
         r = -1; // Signal stream is closed if no data was retrieved.
         ThrowExceptionStreamFFL("TCP socket not/no longer connected.");
      }
   }

   return r;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:19:32.373

所以也许我知道这是为什么。这是一个 SSL 连接，因此传输的字节将被加密。由于块的大小，加密数据的大小很可能不同。我想这回答了为什么 TCP 级别上可用的字节数与读取的字节数不同的问题。

# python - Python Django 溢出错误 mktime 参数超出范围

> ID：12949277
> 
> 赞同：1
> 
> 时间：2012-10-18T07:26:09.460
> 
> 标签：python, django, django-models

我正在使用 Django 开发一个应用程序。

在其中一个模型中，我有一个字段`models.DateTimeField('date_of_birth')`。

我试图从 django 管理站点添加一些记录。添加的记录很少，没有任何问题。但是，出生日期为 1956-01-01 的记录会导致 ' `Overflow error`' 异常值 ' `mktime argument out of range`'。

一些谷歌搜索建议当日期早于纪元时出现 mktime 错误（请参阅[此处](https://stackoverflow.com/questions/2518706/python-mktime-overflow-error)）。

解决方法建议使用 datetime 来查找与纪元的差异并保存它。

这不是错误吗？是否有任何解决方法而不是转换为差异？

对于法庭记录，我在 Windows 7 x64 上使用 python 2.7、django 1.4.1 和 MySQL 5.5。

# c# - 如何获取插入数据库的序列/触发主键并将其插入我的类参数 id C#

> ID：12949278
> 
> 赞同：1
> 
> 时间：2012-10-18T07:26:09.360
> 
> 标签：c#, visual-studio-2010, plsql

我有以下问题。我在数据库中有一个序列和触发器，它们可以工作。这意味着我在 C# 中的插入函数不会插入 ID，而是插入其余列。问题是现在我无法将 ID 绑定到参数。我有另一个函数，它从插入后命中的表中选择所有内容作为一种刷新，即使该函数获得正确的 ID，它仍然会在以后丢失，我相信因为它没有在插入时绑定到类中的参数。

所以这是我的插入：

```
 transaction = oleCon.BeginTransaction();
                    oleComd = new OleDbCommand();
                    oleComd.Connection = oleCon;
                    oleComd.Transaction = transaction;
                    oleComd.CommandText = "Insert into OBJEKTI" +
                    "(NAZIV_OBJEKTA, SIFRA_MJESTA, SIFRA_REGION)" + "Values(:naziv, :mjesto, :region)";

                    oleComd.Parameters.AddWithValue(":naziv",  objekti.NazivObjekta);
                    oleComd.Parameters.AddWithValue(":mjesto", objekti.Sifra_Mjesta);
                    oleComd.Parameters.AddWithValue(":region", objekti.Sifra_Region);

                    oleComd.ExecuteNonQuery();
                    transaction.Commit();

                    oleCon.Close(); 
```

这是我的触发器：

```
create or replace
TRIGGER "OBJEKTI_ID_TRIG"
BEFORE INSERT ON "OBJEKTI"

FOR EACH ROW
DECLARE

BEGIN 

SELECT OBJEKAT_ID_SEQ.NEXTVAL
INTO :NEW.OBJEKAT_ID
FROM DUAL;

END; 
```

无论如何，我真的希望你们能帮助我。

我刚才也尝试了 RETURNING 语句，但即使它编译并通过没有错误，它仍然给我我的密钥为 0（即使在数据库中它不是，我检查了）

```
oleComd.CommandText = "Insert into OBJEKTI" +
                    "(NAZIV_OBJEKTA, SIFRA_MJESTA, SIFRA_REGION)" + "Values(:naziv, :mjesto, :region) RETURNING (OBJEKAT_ID) into (:id)";

                    oleComd.Parameters.AddWithValue(":naziv",  objekti.NazivObjekta);
                    oleComd.Parameters.AddWithValue(":mjesto", objekti.Sifra_Mjesta);
                    oleComd.Parameters.AddWithValue(":region", objekti.Sifra_Region);
                    oleComd.Parameters.AddWithValue(":id", objekti.ObjekatId); 
```

编辑：

我测试了这段代码：

```
set serveroutput ON;
DECLARE
varid NUMBER;

BEGIN

Insert into OBJEKTI (NAZIV_OBJEKTA, SIFRA_MJESTA, SIFRA_REGION) Values('dino', 1, 1)
RETURNING OBJEKAT_ID INTO varid;

dbms_output.put_line (varid);

END; 
```

这很有效， varid 显示了它应该做什么，这告诉我在我的插入中使用返回应该也可以工作，但这不是因为它仍然在那里放一个 0。

所以问题必须是

```
OleComd.Parameters.AddWithValue 
```

功能，但我不知道要使用什么其他功能来使它工作。

编辑2：

因此，在 Oracle 论坛的一些帮助下，我也尝试了这个：

```
oleComd.CommandText = "Insert into OBJEKTI" +
                    "(NAZIV_OBJEKTA, SIFRA_MJESTA, SIFRA_REGION)" + " Values(:naziv, :mjesto, :region ) RETURNING OBJEKAT_ID INTO :id";

                    oleComd.Parameters.AddWithValue(":naziv",  objekti.NazivObjekta);
                    oleComd.Parameters.AddWithValue(":mjesto", objekti.Sifra_Mjesta);
                    oleComd.Parameters.AddWithValue(":region", objekti.Sifra_Region);
                    //oleComd.Parameters.Add(":id", OleDbType.).Direction = ParameterDirection.Output;
                    OleDbParameter id = new OleDbParameter();
                       id.ParameterName = "id";
            id.OleDbType = OleDbType.Integer;
            id.Direction = ParameterDirection.Output;
            oleComd.Parameters.Add(id);
            objekti.ObjekatId = Convert.ToInt32(id.Value); 
```

但我又一次无处可去。它将参数 id 的值报告为 null。我不明白。

希望有人可以提供帮助

编辑3

我最近的尝试，失败，阅读器出现错误：“行/列上不存在数据”

```
 transaction = oleCon.BeginTransaction();
                    oleComd = new OleDbCommand();

                    oleComd.Connection = oleCon;

                    oleComd.Transaction = transaction;

                    oleComd.CommandText = "Insert into OBJEKTI" +
                    "(NAZIV_OBJEKTA, SIFRA_MJESTA, SIFRA_REGION)" + " Values(:naziv, :mjesto, :region )";

                    oleComd.Parameters.AddWithValue(":naziv",  objekti.NazivObjekta);
                    oleComd.Parameters.AddWithValue(":mjesto", objekti.Sifra_Mjesta);
                    oleComd.Parameters.AddWithValue(":region", objekti.Sifra_Region);

                    oleComd.ExecuteNonQuery();
                    transaction.Commit();
                    //oleCon2.Open();
                    transaction2 = oleCon.BeginTransaction();
                    oleComd2 = new OleDbCommand();
                    oleComd2.Connection = oleCon;
                    oleComd2.Transaction = transaction2;

                    oleComd2.CommandText = "select Objekat_ID from OBJEKTI where NAZIV_OBJEKTA=:naziv";
                    oleComd2.Parameters.AddWithValue(":naziv", objekti.NazivObjekta);

                    OleDbDataReader Reader = oleComd2.ExecuteReader();
                    objekti.ObjekatId = Convert.ToInt32(Reader["OBJEKAT_ID"]);
                    Reader.Close();
                    oleComd2.ExecuteNonQuery();
                    transaction2.Commit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:25:00.240

解决方案

```
OleDbParameter id = new OleDbParameter();
                    id.ParameterName = "id";
                    id.OleDbType = OleDbType.Integer;
                    id.Direction = ParameterDirection.ReturnValue;
                    oleComd.Parameters.Add(id);
                    oleComd.ExecuteNonQuery();
                    transaction.Commit();
                    objekti.ObjekatId=Convert.ToInt32(oleComd.Parameters["id"].Value);

                    oleCon.Close(); 
```

谢谢大家

# javascript - Extjs 4在按钮单击中捕获组合框选定值

> ID：12949281
> 
> 赞同：0
> 
> 时间：2012-10-18T07:26:23.107
> 
> 标签：javascript, combobox, extjs4, extjs-mvc

我刚开始使用 Extjs 4，我需要获取组合框的选定值来更改商店并渲染与每个商店的数据对应的图表。

我正在使用 MVC 模型，这是包含组合框的视图：

```
Ext.define('Metrics.view.Params', {
extend: 'Ext.grid.Panel',
alias: 'widget.params',

title: 'Select Parameters',
hideHeaders: true,

initComponent: function() {
    this.columns = [{
        dataIndex: 'name',
        flex: 1
    }];

    this.dockedItems = [{
        xtype: 'container',
        items: [{
                    xtype: 'combobox',
        id : 'cmbGraph',
        mode : 'queryMode',
                    name : 'graph',
                    fieldLabel: 'Graph',
        store: ['Small data','Big data'],
        editable : false
                },
                 {
                    //another combobox here..

                  }] 
```

我的控制器是：

```
Ext.define('Metrics.controller.RenderGraph', {
extend: 'Ext.app.Controller',

refs: [{
    ref : 'params',
    selector : 'params'

}],

stores: ['GraphData'],

init: function() {
    // Start listening for events on views
    this.control({
        'paramsbtn button[action=apply]': {
        click : this.launchChart
        }
    });

launchChart : function(button){
    var params = this.getParams();
    var combo1 = params.items[cmbGraph];
    console.log(Ext.encode(combo1));
    var v = combo1.getValue();
    var r = combo1.findRecord(combo1.valueField || combo1.displayField,v);
    return(combo1.store.indexOf(r));
    console.log('combo item' + r + 'selected'); 
} 
```

如您所见，我正在尝试使用 ID = cmbGraph 获取组合框的值，但它不起作用，我收到的错误消息是：

```
Uncaught TypeError: Cannot call method 'getValue' of undefined 
```

Extjs 4 很复杂，因为我必须使用控制器访问视图的元素。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T22:22:47.587

您还可以保留 refs，以便在需要时可以重复使用它们，如果需要，可以使用类似的东西：

```
refs: [{
    ref : 'graph',
    selector : 'params > container > combobox'
}], 
```

或者

```
refs: [{
    ref : 'graph',
    selector : 'params #cmbGraph'
}], 
```

甚至是直的：

```
refs: [{
    ref : 'graph',
    selector : '#cmbGraph'
}], 
```

这些都应该为您提供对组合框的相同引用。仅取决于您如何安排代码。

```
var comboValue = me.getGraph().getValue(); 
```

# php - 在 category.php 中突出显示（活动）菜单帖子标题

> ID：12949283
> 
> 赞同：0
> 
> 时间：2012-10-18T07:26:28.830
> 
> 标签：php, javascript, jquery, html, wordpress

这是我正在开发的网站：[http://canal.es/wordpress/](http://canal.es/wordpress/)

我遇到的问题是，如果你去“ **Pasteeria dulce** ”（这是一个 category.php 文件），它会显示一个带有该类别活动标题的左侧边栏，它会在中心显示一个帖子，并显示在下方图像相同类别的帖子列表。

我还没有找到解决方案来突出显示在我进入类别时自动打开的帖子标题。这是我在 category.php 文件中使用的代码：

```
 <!--  Highlight menu from current category -->
    <?php
        if (is_category()) {
            $this_category = get_category($cat);
            }
        if($this_category->category_parent)
            $this_category = wp_list_categories('orderby=id&title_li=&child_of='.$this_category->category_parent."&echo=0"); else
            $this_category = wp_list_categories('orderby=id&title_li=&child_of='.$this_category->cat_ID."&echo=0");
        if ($this_category) { ?>
        <ul class="sub-menu">
            <?php echo $this_category; ?>
        </ul>
    <?php } ?>

    <div class="producto_column">           
       <?php /* Start the Loop */ ?>
        <?php while ( have_posts() ) : the_post(); ?>

            <div class="producto_image">
                <img src="<?php the_field('imagen_producto'); ?>" alt=""/>
            </div>

                <div class="share_item">
                    <a class="minimal" id="premium">
                        <img src="<?php bloginfo('template_directory') ?>/images/share.png" alt="share">
                    </a>
                    <a class="maillink" href="http://canal.local/?page_id=220">
                        <img src="<?php bloginfo('template_directory') ?>/images/email.png" alt="email">
                    </a>
                </div>

            <?php get_template_part( 'content', get_post_format() ); ?>

        <?php endwhile; ?>

    <!--  Post list from current category -->
    <ul id="submenu_productos" class="clearfix">
        <?php
            $IDOutsideLoop = $post->ID;
            while( have_posts() ) {
                the_post();
                foreach( ( get_the_category() ) as $category )
                    $my_query = new WP_Query('category_name=' . $category->category_nicename . '&orderby=title&order=asc&showposts=100');
                if( $my_query ) {
                    while ( $my_query->have_posts() ) {
                        $my_query->the_post(); ?>
                <li<?php print ( is_single() && $IDOutsideLoop == $post->ID ) ? ' class="test"' : ''; ?>>
                    <a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a> |
                </li>
        <?php
                }
            }
        }
        ?>
    </ul> 
```

如何激活打开类别页面时出现的当前帖子标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:40:12.233

尝试使用此解决方案：

```
<ul>

    <?php
        $lastposts = get_posts('numberposts=5&orderby=rand&cat=-52');
        foreach($lastposts as $post) :
        setup_postdata($post); ?>

        <li<?php if ( $post->ID == $wp_query->post->ID ) { echo ' class="current"'; } else {} ?>>

            <a href="<?php the_permalink() ?>"><?php the_title(); ?></a>

        </li>

    <?php endforeach; ?>

</ul> 
```

# android - 如何从默认帐户而不是用户自己的帐户使用 fb android sdk 从 facebook 相册获取图像？

> ID：12949285
> 
> 赞同：0
> 
> 时间：2012-10-18T07:26:28.107
> 
> 标签：android, facebook-graph-api, facebook-android-sdk

我的意图是该应用程序将使用自己的帐户访问 FB，即不是手机用户的帐户，然后从该默认帐户的相册下载图像到手机。

而且用户也不会看到任何身份验证或登录对话框。当用户按下按钮时，将从 Facebook 相册下载图像并存储在用户手机的 SD 卡中。

这是否可行，如果可能的话，任何人都可以告诉我一些实现这个或任何教程的路径。

用户登录后，我可以从用户的 fb 相册中获取图像，但我想从我随应用程序提供的默认帐户中获取图像，而用户不必登录仅下载图像。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:34:19.950

我认为不可能使用默认帐户登录/验证。但是，如果您要获取的是图像之类的东西，您可以将要下载的项目的默认帐户隐私设置设为公开，这样您就可以下载图像而无需验证用户身份。

# android - Android中复用Views的Horizo ntal Scroll View的思考

> ID：12949286
> 
> 赞同：1
> 
> 时间：2012-10-18T07:26:31.127
> 
> 标签：android, android-widget, android-viewpager, horizontalscrollview

嗨，我仍然感到震惊，没有来自具有水平滚动视图的 android 的这种支持，我的 delim 如下：我需要一个水平滚动视图，当然，足够公平，有一个名为

```
HorizontalScrollView 
```

我可以使用它，我喜欢它，因为它给你这种滚动的感觉。问题是我不能使用它，因为它不是适配器视图，这意味着它不会回收视图。这不好，因为我有很多对象要显示，我需要那些正在滚动的视图，所以我可以重新使用它们。

现在当然可以选择

```
viewpager 
```

这个小部件有一个适配器，太棒了！！正是我想要的我可以重用视图，滚动很烂的问题......只需尝试滚动 viewpager 与水平滚动视图，水平滚动视图更平滑，如果你真的用力滑动它会响应，viewpager 滚动不好

它也没有这个小滚动条来指示您何时处于滚动状态，就像水平滚动视图一样

我试图避免第 3 方，除非它真的很好并且没有错误...如果是这样，请随意推荐它，但是否可以根据自定义创建我们自己的？如果是这样，如何？

我想要水平滚动视图的平滑和滚动条以及视图寻呼机中视图（适配器）的可重用性

为什么android没有每个人都会使用的通用小部件？

# c - 如何找到丢失的 C 头文件（没有 Internet）？

> ID：12949290
> 
> 赞同：3
> 
> 时间：2012-10-18T07:26:42.693
> 
> 标签：c, header-files

我刚遇到这个错误：

```
main.c:8: error: implicit declaration of function ‘malloc’
main.c:8: error: incompatible implicit declaration of built-in function ‘malloc’
main.c:14: error: implicit declaration of function ‘printf’
main.c:14: error: incompatible implicit declaration of built-in function ‘printf’ 
```

由于我之前有这些错误，我知道我忘了添加

```
#include <stdlib.h>
#include <stdio.h> 
```

谷歌搜索很快就会发现丢失的标题。

但是，如果我没有互联网，我会怎么做？如何找到丢失的头文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T07:26:42.693

# `apropos`和`man`

`apropos [text]`可以搜索 man 文件，例如：

```
$ apropos malloc
__malloc_hook (3)    - malloc debugging variables
malloc (3)           - Allocate and free dynamic memory
malloc_hook (3)      - malloc debugging variables
mtrace (1)           - Interpret output from MALLOC_TRACE
mtrace (3)           - malloc debugging
muntrace (3)         - malloc debugging
XtMalloc (3)         - memory management functions 
```

然后你可以看一下手册页：

```
$ man malloc

NAME
       calloc, malloc, free, realloc - Allocate and free dynamic memory

SYNOPSIS
       #include <stdlib.h>

       void *calloc(size_t nmemb, size_t size);
       void *malloc(size_t size);
       void free(void *ptr);
       void *realloc(void *ptr, size_t size);

DESCRIPTION
       calloc()  allocates memory for an array of nmemb elements of size bytes
       each and returns a pointer to the allocated memory.  The memory is  set 
```

这表明这`#include <stdlib.h>`是缺失的。

# `find`和`grep`

如果`apropos`不起作用，例如以下示例，您可以使用`find`and`grep`搜索所有源文件：

```
//#include "stdint.h"
#include <stdio.h>

main() {
    int8_t   *xy = (int8_t*) 1;
    printf("%p\n", xy);
} 
```

```
test.c: In function ‘main’:
test.c:4: error: ‘int8_t’ undeclared (first use in this function)
test.c:4: error: (Each undeclared identifier is reported only once
test.c:4: error: for each function it appears in.)
test.c:4: error: ‘xy’ undeclared (first use in this function)
test.c:4: error: expected expression before ‘)’ token 
```

解决方案：

```
moose@pc07:/usr/include$ find *.h | xargs grep "int8_t"
db.h:   u_int8_t fileid[DB_FILE_ID_LEN];/* File id. */
db.h:   u_int8_t *bp;           /* Allocated read buffer. */
db.h:   u_int8_t            /* Unique file ID. */
db.h:   int (*get_fileid) __P((DB_MPOOLFILE *, u_int8_t *));
db.h:   int (*set_fileid) __P((DB_MPOOLFILE *, u_int8_t *));
db.h:   int   (*prepare) __P((DB_TXN *, u_int8_t *));
db.h:   u_int8_t gid[DB_GID_SIZE];
db.h:   u_int8_t  gid[DB_GID_SIZE]; /* Global transaction ID */
db.h:   u_int8_t fileid[DB_FILE_ID_LEN];/* File's unique ID for locking. */
db.h:   (pointer = (u_int8_t *)(dbt)->data +                \
db.h:       retdata = (u_int8_t *)(dbt)->data + *__p--;     \
db.h:       if (retdlen == 0 && retdata == (u_int8_t *)(dbt)->data) \
db.h:       retkey = (u_int8_t *)(dbt)->data + *__p--;      \
db.h:       retdata = (u_int8_t *)(dbt)->data + *__p--;     \
db.h:       retdata = (u_int8_t *)(dbt)->data + *__p--;     \
db.h:       pointer = (u_int8_t *)(dbt)->data +         \
db.h:       u_int32_t __off = ((pointer) == (u_int8_t *)(dbt)->data +\
db.h:       if ((u_int8_t *)(dbt)->data + __off + (writedlen) > \
db.h:           (u_int8_t *)(__p - 2))              \
db.h:           writedata = (u_int8_t *)(dbt)->data + __off;    \
db.h:       u_int32_t __off = ((pointer) == (u_int8_t *)(dbt)->data +\
db.h:       if ((u_int8_t *)(dbt)->data + __off + (writeklen) + \
db.h:           (writedlen) > (u_int8_t *)(__p - 4)) {      \
db.h:           writekey = (u_int8_t *)(dbt)->data + __off; \
db.h:           writedata = (u_int8_t *)(dbt)->data + __off;    \
db.h:       pointer = (u_int8_t *)(dbt)->data +         \
db.h:       u_int32_t __off = ((pointer) == (u_int8_t *)(dbt)->data +\
db.h:       if (((u_int8_t *)(dbt)->data + __off) + (writedlen) >   \
db.h:           (u_int8_t *)(__p - 3))              \
db.h:           writedata = (u_int8_t *)(dbt)->data + __off;    \
db.h:   u_int8_t       *lk_conflicts;   /* Two dimensional conflict matrix */
db.h:   int  (*get_lk_conflicts) __P((DB_ENV *, const u_int8_t **, int *));
db.h:   int  (*set_lk_conflicts) __P((DB_ENV *, u_int8_t *, int));
stdint.h:#ifndef __int8_t_defined
stdint.h:# define __int8_t_defined
stdint.h:typedef signed char        int8_t;
stdint.h:typedef unsigned char      uint8_t;
xf86drmMode.h:extern int drmModeAddFB(int fd, uint32_t width, uint32_t height, uint8_t depth,
xf86drmMode.h:          uint8_t bpp, uint32_t pitch, uint32_t bo_handle, 
```

# ios - 需要有关循环子视图的帮助

> ID：12949293
> 
> 赞同：0
> 
> 时间：2012-10-18T07:26:51.123
> 
> 标签：ios

我在我的 uitableviewcell 中添加了一个 uibutton 并尝试在录制它时更改其背景图像 这里是代码

```
-(void)downloadImage:(UIButton *)link
{
    UITableViewCell *cell = (UITableViewCell*)[link superview];

    UIButton *view = [[UIButton alloc]init];
    NSArray *subviews = [cell subviews];

    for (view in subviews)
    {
        if([view isKindOfClass:[UIButton class]])
        {
            view = (UIButton*)subviews;
            [view setBackgroundImage:[UIImage imageNamed:@"yellow"] forState:UIControlStateNormal];
        }
    }
... 
```

但它不工作

如果我添加这一行

> 视图 = (UIButton*) 子视图；

我收到这个错误

> 线程 1：信号 SIGTRAP

如果没有这条线，什么都不会发生，知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:07:00.860

这取决于您如何将子视图添加到您的 UITableViewCell 中：

```
-(UITableViewCell)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *cellID = @"cellID";

    UITableViewCell *cell = [tableView dequeReusableCellForID:cellID];

    if(cell == nil)
    {
        ...

        myButton = [[UIButton alloc] initWithFrame....];
        [myButton addTarget:self selector:@selector(downloadImage:) forControlEvent:UIControlEventTouchUpInside];

        // -------------------------------------------------------
        // This is the important part here.
        // Usually, we add "myButton" to the cell's contentView
        // You will need to match this subview hierarchy
        // in your "downloadImage:" method later
        // -------------------------------------------------------

        [cell.contentView addSubview:myButton];
    }

    return cell;
}

-(void)downloadImage:(id)sender
{
    // -------------------------------------------------------
    // Here, "sender" is your original "myButton" being tapped
    //
    // Then "[sender superview]" would be the parent view of your
    // "myButton" subview, in this case the "contentView" of
    // your UITableViewCell above.
    //
    // Finally, "[[sender superview] superview]" would be the
    // parent view of the "contentView", i.e. your "cell"
    // -------------------------------------------------------

    UIButton *button = (UIButton *)sender;

    // button now references your "myButton" instance variable in the .h file
    [button setBackgroundImage:[UIImage imagenamed:@"filename.png"] forControlState:UIControlStateNormal];
} 
```

希望有帮助。

至于为什么你的应用程序在你这样做时崩溃：

```
view = (UIButton*)subviews; 
```

那是因为“子视图”是所有子视图的 NSArray。您告诉 iOS 将 NSArray * 类型转换为 UIButton *，但它不知道该怎么做。所以你最终导致应用程序崩溃。

在你的 for 循环中，你可能想要做这样的事情（尽管如果你使用我上面的“downloadImage”方法你不应该这样做）：

```
for (view in subviews)
{
    if([view isKindOfClass:[UIButton class]])
    {
        // ------------------------------------------------
        // When you go for(view in subviews), you're saying
        // view = [subviews objectAtIndex:i]
        //
        // Hence view = (UIButton *)subviews become
        // redundant, and not appropriate.
        // ------------------------------------------------

        //view = (UIButton*)subviews; // <--- comment out/delete this line here

        [view setBackgroundImage:[UIImage imageNamed:@"yellow"] forState:UIControlStateNormal];
    }
} 
```

# c# - 如何在登录后加载 MS Word 2010 加载项并在退出时卸载

> ID：12949301
> 
> 赞同：0
> 
> 时间：2012-10-18T07:27:08.417
> 
> 标签：c#, add-in

我有启用用户登录的 Windows 应用程序。登录后，我希望加载加载项。并且当用户退出该特定 Word 实例（登录应用程序运行时只能存在一个 word 实例）时，加载项也会被卸载。我试图做到这一点

```
 addin.Connect = false;//Application.COMAddins. Connect 
```

它将 LoadBehaviour（COM 加载项列表）设置为 2，加载时我将其设置为 3

它可以工作，但 MSword 在退出时会显示很多错误消息，有时还会禁用我的加载项。有没有其他方法可以动态加载和卸载加载项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T06:07:21.820

在加载项的启动事件中，我检查了登录表单的属性。如果已设置，则执行以下行

```
 addin.Connect = true; 
```

并添加了一个退出事件处理程序

```
 ((Microsoft.Office.Interop.Word.ApplicationEvents4_Event)app).Quit += new Microsoft.Office.Interop.Word.ApplicationEvents4_QuitEventHandler(App_Quit); 
```

在其 App_Quit 方法中

```
void App_Quit()
    {
       addin.Connect = false;
    } 
```

现在当我退出单词时；我的加载项已卸载。终于它开始工作了:-)

# spring - Spring 不是动态的 Switch 数据源

> ID：12949309
> 
> 赞同：2
> 
> 时间：2012-10-18T07:27:41.133
> 
> 标签：spring

**为什么使用 AbstractRoutingDataSource 不能动态切换 DataSource 这是配置信息**

```
public class DynamicSwitch {
    public static final ThreadLocal<String> local=new ThreadLocal<String>();

    public static void setDB(String id){
        local.set(id);
    }
    public static String getDB(){
        return local.get();
    }
    public static void removeDB(){
         local.remove();
    }
}

public class DynamicSource extends AbstractRoutingDataSource implements InitializingBean{
    @Override
    protected Object determineCurrentLookupKey() {
        // TODO Auto-generated method stub
        return DynamicSwitch.getDB();
    }
}

<bean id="dynamic" class="com.aware.DynamicSource">
    <property name="targetDataSources">
        <map key-type="java.lang.String">
                <entry key="1" value-ref="dataSource"></entry>
                <entry key="2" value-ref="localdataSource"></entry>
        </map>
    </property>
    <property name="defaultTargetDataSource" ref="dataSource"></property>
</bean>

<bean id="methodService" class="com.test.service.MethodServiceImpl">
    <property name="sqlMapClient" ref="sqlMapClient"></property>
</bean>

<bean id="test" class="com.test.Test" scope="prototype"></bean>

public class Test2 extends ActionSupport{

    public String execute() throws Exception {
        // TODO Auto-generated method stub
        DynamicSwitch.setDB("2");
        MethodService methodService=(MethodService)ApplicationAware.getBean("methodService");
        Map<String, String> map=new HashMap<String, String>();
        List list=methodService.testList("Service_ks_missionSpace.getService_ks_missionList", map);
        System.out.println(list.size());
        return SUCCESS;
} 
```

**调用 DynamicSwitch.setDB("2") 发现不能切换数据源。DataSource 还是默认dataSource 为什么**

# ios - 表格单元作为按钮

> ID：12949314
> 
> 赞同：0
> 
> 时间：2012-10-18T07:28:07.367
> 
> 标签：ios, xcode, twitter, ios6, tablecell

我有一个由四个表格单元组成的数组，第一个在按下时应该调用“撰写推文功能”，第二个是 facebook，第三个是打开的 youtube，最后一个是“撰写”电子邮件。我对此感到很困惑，因为我不确定如何分别调用每个按钮。这是我“实现撰写推文功能”的代码

```
-(void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath

{
if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter])
{
    SLComposeViewController *tweetSheet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];
    [tweetSheet setInitialText:@"@SybreLabs"];
}

}
@end 
```

让我知道你们的想法，请我是编码新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:51:23.483

对于您的 UITableView（假设您使用的是一个），您可以使用 UITableView 委托方法确定哪个单元格被点击：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    switch case([indexPath row])
    {
        case 1:
            // do facebook action
            break;
        case 2:
            // do twitter action
            break;
        case 3:
            // do email action
            break;
        case 4:
            // do youtube action
            break;  
    }
} 
```

这是Apple的参考方法：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView:didSelectRowAtIndexPath](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView:didSelectRowAtIndexPath)：

# jquery - 在没有 AJAX 的情况下设置超时

> ID：12949316
> 
> 赞同：1
> 
> 时间：2012-10-18T07:28:08.880
> 
> 标签：jquery, ajax, load, timeout

> **可能重复：**
> [为 ajax (jQuery) 设置超时](https://stackoverflow.com/questions/5225597/set-timeout-for-ajax-jquery)

我想在 2 秒后超时，然后显示“无法获取页面”。但我不知道该怎么做......这是我的ajax代码

```
// AJAX product options modal
$('.optionsTrigger').on('click', function() {
    var target, url;
    target = $(this).attr('data-target');
    url = $(this).attr('href');
    $(target).load(url, function(){
        $(target).modal({
            show: true
        });
    });
});
$('#productOptions').on('hidden', function() {
    $('#productOptions').html('<img src="<?php echo $this->getSkinUrl("img/loading.gif"); ?>" id="optionsLoading" />');

}); 
```

# iphone - 如何将 CCSpriteFrame 转换为 CCTexture2D (Cocos2d)？

> ID：12949322
> 
> 赞同：1
> 
> 时间：2012-10-18T07:28:26.300
> 
> 标签：iphone, ios, xcode, cocos2d-iphone

> **可能重复：**
> [如何将 CCSpriteFrame 转换为 CCTexture2D (Cocos2d)](https://stackoverflow.com/questions/8261132/how-to-convert-a-ccspriteframe-to-a-cctexture2d-cocos2d)

是否可以获取从 CCSpriteFrameCache 获取的 CCSpriteFrame，并将其转换为 CCTexture2D？

我试过这个：

```
-(id)initWithFile:(NSString*)filename body:(b2Body*)body  original:(BOOL)original
{
    NSAssert(filename != nil, @"Invalid filename for sprite");

    CCTexture2D *texture =  [[[CCSpriteFrameCache sharedSpriteFrameCache]spriteFrameByName:filename ]texture];

    return [self initWithTexture:texture body:body original:original];
} 
```

但在屏幕上显示整个 spritesheet 纹理不仅仅是一帧。

这个链接有一个类似的问题：[How to convert a CCSpriteFrame to a CCTexture2D (Cocos2d)](https://stackoverflow.com/questions/8261132/how-to-convert-a-ccspriteframe-to-a-cctexture2d-cocos2d) 但我没有发现这个链接的答案有帮助。

我也试过这个，但我得到了相同的结果：

```
-(id)initWithFile:(CCSpriteFrame*)filename body:(b2Body*)body  original:(BOOL)original
{
   NSAssert(filename != nil, @"Invalid filename for sprite");

   CCSprite * sprite_ = [CCSprite spriteWithSpriteFrame:filename];
   CCTexture2D *texture =  [sprite_ texture];
   return [self initWithTexture:texture body:body original:original];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:40:22.000

此代码适用于我（cocos2d 2.0）

```
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"walk_cpu_fighter_asleep.plist"];
CCSpriteFrame *fr = [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"walk_cpu_fighter_asleep0001.png"];
CCSprite *spr = [CCSprite spriteWithSpriteFrame:fr];

CGPoint p = [[GEPlayGrid sharedPlayGrid] positionForTileAtX:1 andY:1];

spr.position = p;
[[GameEngine sharedGameEngine].mapProvider.mapUnitsLayer addChild:spr]; 
```

spriteWithSpriteFrame 构造函数根据精灵帧中包含的裁剪规范正确裁剪。绝对需要纹理，你可以使用 CCSprites 吗？很难猜测代码中的**self**是什么以及它扩展了什么 :) ...但也许您可能想要 initWithSpriteFrame:body:original。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:21:06.620

你试过了吗：

```
-(void) addSpriteFramesWithFile:(NSString*)plist textureFile:(NSString*)textureFileName 
```

在那之后：

```
CCTexture2D *cachedTexture = [[CCTextureCache sharedTextureCache] textureForKey:textureFileName]; 
```

?

# haskell - Agda 类型检查和交换性 / + 的关联性

> ID：12949323
> 
> 赞同：18
> 
> 时间：2012-10-18T07:28:28.020
> 
> 标签：haskell, functional-programming, agda, dependent-type

由于`_+_`-Operation for`Nat`通常是在第一个参数中递归定义的，因此类型检查器知道它显然不是微不足道的`i + 0 == i`。但是，当我在固定大小的向量上编写函数时，我经常遇到这个问题。

一个例子：我如何定义一个 Agda 函数

```
swap : {A : Set}{m n : Nat} -> Vec A (n + m) -> Vec A (m + n) 
```

哪个将第一个`n`值放在向量的末尾？

由于 Haskell 中的一个简单解决方案是

```
swap 0 xs     = xs
swap n (x:xs) = swap (n-1) (xs ++ [x]) 
```

我在 Agda 中类似地尝试过，如下所示：

```
swap : {A : Set}{m n : Nat} -> Vec A (n + m) -> Vec A (m + n)    
swap {_} {_} {zero} xs          = xs 
swap {_} {_} {suc i} (x :: xs)  = swap {_} {_} {i} (xs ++ (x :: [])) 
```

但是类型检查器失败并显示消息（与`{zero}`上述`swap`-Definition 中的 -case 相关）：

```
.m != .m + zero of type Nat
when checking that the expression xs has type Vec .A (.m + zero) 
```

所以，我的问题是：如何教 Agda `m == m + zero`？以及如何`swap`在 Agda 中编写这样的函数？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-18T16:00:57.370

教 Agda`m == m + zero`并不太难。例如，使用等式证明的标准类型，我们可以写出这样的证明：

```
rightIdentity : (n : Nat) -> n + 0 == n
rightIdentity zero = refl
rightIdentity (suc n) = cong suc (rightIdentity n) 
```

`rewrite`然后我们可以使用关键字告诉 Agda 使用这个证明：

```
swap : {A : Set} {m n : Nat} -> Vec A (n + m) -> Vec A (m + n)    
swap {_} {m} {zero} xs rewrite rightIdentity m = xs 
swap {_} {_} {suc i} (x :: xs) = ? 
```

然而，为第二个等式提供必要的证明要困难得多。一般来说，尝试**使您的计算结构与您的 types 的结构相匹配是**一个更好的主意。这样，您就可以少做定理证明（或者在这种情况下没有）。

例如，假设我们有

```
drop : {A : Set} {m : Nat} -> (n : Nat) -> Vec A (n + m) -> Vec A m
take : {A : Set} {m : Nat} -> (n : Nat) -> Vec A (n + m) -> Vec A n 
```

（这两者都可以在没有任何定理证明的情况下定义），Agda 很乐意接受这个定义，而不用大惊小怪：

```
swap : {A : Set} {m n : Nat} -> Vec A (n + m) -> Vec A (m + n)
swap {_} {_} {n} xs = drop n xs ++ take n xs 
```

# jquery - 如何在 Facebook 应用程序中居中模式窗口？

> ID：12949326
> 
> 赞同：1
> 
> 时间：2012-10-18T07:28:46.147
> 
> 标签：jquery, facebook-apps

我正在使用他们的 iframe 方法开发 Facebook 应用程序。如何在 iframe 中找到我的位置以使模态窗口居中？

调用 $(window.height()) 返回 iframe 页面高度而不是父页面。使用 scrollTop() 不起作用，因为我们不在同一个域中。任何帮助，将不胜感激。

这些家伙能够以某种方式做到这一点，但我无法弄清楚...... [http://apps.facebook.com/mylistfb/?r=true](http://apps.facebook.com/mylistfb/?r=true)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T23:16:09.640

找到了，对不起 FB 应用程序的新手。在 FB 文档中错过了它。

```
FB.Canvas.getPageInfo(
    function(info) {
        alert(info.scrollTop);
    }
); 
```

（* iframe 上边缘与 iframe 视口上边缘之间的像素数）

[http://developers.facebook.com/docs/reference/javascript/FB.Canvas.getPageInfo/](http://developers.facebook.com/docs/reference/javascript/FB.Canvas.getPageInfo/)

# ios - 完成音频后调用方法

> ID：12949328
> 
> 赞同：0
> 
> 时间：2012-10-18T07:28:50.793
> 
> 标签：ios, audio, loops, methods, call

我是IOS开发的新手。我有一个播放音频的方法，该方法在循环内。所以我想延迟该方法并检查播放音频是否完成。

代码看起来像这样

```
 for (int i=0; i<arrcount; i++) {

  [self performSelector:@selector(partsbuttonclicked:) withObject:[pArr objectAtIndex:0] afterDelay:0];

     [pArr removeObjectAtIndex:0];
 } 
```

# mysql - 是否可以将 MYsql 与 sql server 连接起来？

> ID：12949329
> 
> 赞同：0
> 
> 时间：2012-10-18T07:28:57.823
> 
> 标签：mysql, sql, sql-server-2008

我正在使用一个支持 mysql 的开源软件，我创建了使用 asp.net 4.0 和 sql server 2008 的应用程序......

是否可以将 MYsql 与 sql server 连接起来？

我希望对两个数据库服务器进行每次插入和更新，因为它们具有相同的表架构，但一个是 mysql，另一个是 sql server 2008？

如果可能，请逐步解释

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:05:00.597

希望这会有所帮助，这显示了一步一步的连接

[http://www.codeproject.com/Articles/29106/Migrate-MySQL-to-Microsoft-SQL-Server](http://www.codeproject.com/Articles/29106/Migrate-MySQL-to-Microsoft-SQL-Server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:13:34.333

您可以在 MS SQL Server 中使用链接服务器。

来自文档 -*链接服务器允许访问针对 OLE DB 数据源的分布式异构查询。*

看看[sp_addlinkedserver](http://msdn.microsoft.com/en-us/library/ms190479.aspx)函数。

# javascript - 模态窗口和对话窗口有什么区别？

> ID：12949331
> 
> 赞同：5
> 
> 时间：2012-10-18T07:29:01.467
> 
> 标签：javascript, jquery

这个问题准确地描述了我想知道的内容。模态窗口和对话有什么区别。当模态窗口变成对话时，反之亦然？我如何实现两者？朝正确方向轻推将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T07:42:28.480

模态窗口是在应用程序之上运行的窗口，因此在关闭模态窗口之前，您无法对应用程序执行任何操作。

jQuery 对话框不是一个单独的窗口，所以从技术上讲它不能是一个模态窗口。但是，它可以模拟模态窗口的大部分功能，方法是在页面的其余部分放置一个覆盖元素，这样您就无法与之交互。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T07:32:22.273

模态窗口不会让您继续，直到您关闭它。

# c# - 来自另一个线程的消息框

> ID：12949333
> 
> 赞同：0
> 
> 时间：2012-10-18T07:29:09.963
> 
> 标签：c#, multithreading

编辑：我得到的错误与我的问题无关。：/ -1

我在一个新线程上启动一个服务，然后我想捕获一个错误并显示一个消息框。因为它不在 UI 线程中，所以我收到错误消息。我怎样才能解决这个问题？

（WPF 窗口）

代码：

```
xmlServiceHost = XcelsiusServiceHost.CreateXmlServiceHost(Properties.Settings.Default.XmlDataService);

serviceThread = new Thread(_ => 
{
  try { xmlServiceHost.Open(); }
  catch (AddressAccessDeniedException)
  {
    CreateRegisterDashboardServiceFile();

    //Error not in UI thread.
    //this.ShowUserInfoMessage("The dashboard service needs to be registered. Please contact support.");
  }
});

serviceThread.Start(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T21:40:45.780

（此答案适用于 WPF。）

好吧，你可以从一个工作线程打开一个消息框，但是你不能将它的父级设置为属于 UI 线程的东西（因为工作线程会通过添加一个新的子窗口来更改父窗口，并且父窗口不属于工作线程，它通常属于UI线程），所以你基本上是被迫离开父空。

如果用户不关闭它们而是重新激活应用程序窗口，这将导致一堆消息框位于您的应用程序窗口后面。

您应该做的是使用适当的父窗口在 UI 线程上创建消息框。为此，您将需要 UI 线程的调度程序。调度程序将在 UI 线程上打开您的消息框，您可以设置其正确的父级。

在这种情况下，我通常在启动线程时将 UI 调度程序传递给工作线程，然后使用一个小助手类，这对于处理工作线程上的异常特别有用：

```
 /// <summary>
/// a messagebox that can be opened from any thread and can still be a child of the 
/// main window or the dialog (or whatever) 
/// </summary>
public class ThreadIndependentMB
{
    private readonly Dispatcher uiDisp;
    private readonly Window ownerWindow;

    public ThreadIndependentMB(Dispatcher UIDispatcher, Window owner)
    {
        uiDisp = UIDispatcher;
        ownerWindow = owner;
    }

    public MessageBoxResult Show(string msg, string caption="",
        MessageBoxButton buttons=MessageBoxButton.OK,
        MessageBoxImage image=MessageBoxImage.Information)
    {
        MessageBoxResult resmb = new MessageBoxResult();
        if (ownerWindow != null)
        uiDisp.Invoke(new Action(() =>
        {
            resmb = MessageBox.Show(ownerWindow, msg, caption, buttons, image);

        }));
        else
            uiDisp.Invoke(new Action(() =>
            {
                resmb = MessageBox.Show( msg, caption, buttons, image);

            }));
        return resmb;
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T07:54:52.537

只需在该线程上显示一个正常的消息框就可以了。“this”关键字和在我的 UI 线程上调用方法是问题所在。

```
xmlServiceHost = XcelsiusServiceHost.CreateXmlServiceHost("http://localhost:123/naanaa");//Properties.Settings.Default.XmlDataService);

serviceThread = new Thread(_ =>
{
  try { xmlServiceHost.Open(); }
  catch (AddressAccessDeniedException)
  {
    CreateRegisterDashboardServiceFile();
    System.Windows.MessageBox.Show("The dashboard service needs to be registered. Please contact support.");
  }
});

serviceThread.Start(); 
```

# iphone - 如何使用 html url IOS 播放 mp4 文件

> ID：12949336
> 
> 赞同：0
> 
> 时间：2012-10-18T07:29:18.727
> 
> 标签：iphone, ios, cocoa-touch, mpmovieplayercontroller, mp4

我一直在尝试播放 mp4 文件，我正在从服务器接收 url，我已将其提供给 MPMoviePlayerController，播放器正在加载但文件未播放。这是代码...

```
 NSURL *url = [NSURL URLWithString:obj->msg_url]; // obj->url is a html php url not a direct file url.
    moviePlayer =  [[MPMoviePlayerController alloc]
                    initWithContentURL:url];

    moviePlayer.controlStyle = MPMovieControlStyleDefault; 
    moviePlayer.shouldAutoplay = YES;
    [self.view addSubview:moviePlayer.view];
    [moviePlayer setFullscreen:YES animated:YES]; 
```

所以在这种情况下，我如何使用 MPMoviePlayerController 从 html url 播放。任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:07:56.180

试试看 `[moviePlayer play];` shouldAutoplay 似乎并不总是有预期的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:57:20.030

我已经先下载并播放它现在的工作。

```
 NSArray       *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString  *documentsDirectory = [paths objectAtIndex:0];

        NSString  *filePath = [NSString stringWithFormat:@"%@/%@", documentsDirectory,@"sample.mp4"];
        [urlData writeToFile:filePath atomically:YES];

        NSURL *file_url = [NSURL fileURLWithPath:filePath];
        moviePlayer =  [[MPMoviePlayerController alloc]
                        initWithContentURL:file_url];

        moviePlayer.controlStyle = MPMovieControlStyleDefault;
        moviePlayer.shouldAutoplay = YES;
        [self.view addSubview:moviePlayer.view];
        [moviePlayer setFullscreen:YES animated:YES]; 
```

# javascript - 使用 jQuery Toggle 更改 div 文本

> ID：12949338
> 
> 赞同：27
> 
> 时间：2012-10-18T07:29:20.687
> 
> 标签：javascript, jquery, string, toggle

使用时`slideToggle`，如何更改文本关闭/显示？我做了一个简单的，但无法恢复文本更改。

这是我所做的：

```
$(document).ready(function(){
    $('.open').click(function(){        
            $('.showpanel').slideToggle('slow');
            $(this).text('close');
    });

        $('.open2').click(function(){        
            $('.showpanel2').slideToggle('slow');
            $(this).text('close');
    });        
});
```

```
body{
font-size:20px;
}
#box{
    border:2px solid #000;
    width:500px;
    min-height:300px;      
}
.open,.open2 {
    width:450px;
    height:50px;
    background:blue;
    margin:5px auto 0 auto;
    color:#fff;     
    }
.showpanel,.showpanel2{
    width:450px;
    height:300px;
    margin:0 auto 10px auto;
    background:red;
    display:none;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="box">

<div class="open">Show</div>
<div class="showpanel">This is content</div>

<div class="open2">Show</div>
<div class="showpanel2">This is content</div>
</div>
```

[http://jsfiddle.net/9EFNK/](http://jsfiddle.net/9EFNK/)

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-18T07:36:54.580

您可以使用`is()`断言方法在动画的回调中检查面板是打开还是关闭，并相应地设置文本 - [http://jsfiddle.net/9EFNK/7/](http://jsfiddle.net/9EFNK/7/)

```
$('.open').click(function(){
    var link = $(this);
    $('.showpanel').slideToggle('slow', function() {
        if ($(this).is(':visible')) {
             link.text('close');                
        } else {
             link.text('open');                
        }        
    });       
}); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-18T07:33:01.053

只需添加一个简单的 if 语句来像这样测试文本

```
$('.open').click(function(){

       $('.showpanel').slideToggle('slow');
       if($(this).text() == 'close'){
           $(this).text('Show');
       } else {
           $(this).text('close');
       }
}); 
```

喜欢这个[DEMO](http://jsfiddle.net/9EFNK/2/)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-18T07:34:55.657

不是最漂亮的方法，但它在一个语句中完成了这项工作。

```
$(this).text(($(this).text() == 'Close') ? 'Show' : 'Close'); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-18T07:39:17.827

使用 .toggle()

这是[**工作演示**](http://jsfiddle.net/9EFNK/15/)

```
$('.open').click(function(){    
        $('.showpanel').slideToggle('slow');                  
    }).toggle(function() {
            $(this).text('Hide');
        }, function() {
            $(this).text('Show');
        }); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-18T07:33:00.290

检查这可能是用户问题是解决[小提琴](http://jsfiddle.net/9EFNK/9/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-18T07:33:11.920

这是一个更新版本[http://jsfiddle.net/9EFNK/1/](http://jsfiddle.net/9EFNK/1/)

您可以简单地在关闭/打开时切换一个类，对该类执行检查并相应地更改包含的文本

```
if( $(this).hasClass('active') )
  $(this).text('open');
else
  $(this).text('Show');

$(this).toggleClass('active'); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-18T07:36:41.507

试试这个**[演示](http://jsfiddle.net/pintu31/9EFNK/10/)**

```
$(document).ready(function(){
$('.open').toggle(function(){    
        $('.showpanel').slideToggle('slow');
        $(this).text('close');
}, function(){
    $('.showpanel').slideToggle('slow');
    $(this).text('Show');
});

    $('.open2').toggle(function(){

        $('.showpanel2').slideToggle('slow');
        $(this).text('close');
    }, function(){
        $('.showpanel2').slideToggle('slow');
        $(this).text('Show');
    });   
});​ 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-01-31T09:08:55.353

用这个

```
jQuery.fn.toggleText = function() {
    var altText = this.data("alt-text");
    if (altText) {
        this.data("alt-text", this.html());
        this.html(altText);
    }
}; 
```

这是你如何使用它

```
 jQuery.fn.toggleText = function() {
    	var altText = this.data("alt-text");

    	if (altText) {
    		this.data("alt-text", this.html());
    		this.html(altText);
    	}
    };

    $('[data-toggle="offcanvas"]').click(function ()  {

    	$(this).toggleText();
    });
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
<button data-toggle="offcanvas" data-alt-text="Close">Open</button>
```

您甚至可以使用 html，前提是它的 html 编码正确

# ios - Appcelerator Titanium + iOS + webview - 更改触摸/点击按钮的 CSS

> ID：12949340
> 
> 赞同：0
> 
> 时间：2012-10-18T07:29:35.877
> 
> 标签：ios, css, webview, titanium, appcelerator

我正在使用 Appcelerator Titanium + iOS，但我遇到了问题。我正在使用没有顶部/底部阴影的 webview，所以看起来它不是 webview，但这不是问题 - 问题是，我有一些按钮

```
<a href="#" onclick="click()">button</a> 
```

我想在触摸/点击时添加到 CSS 动作中。我怎样才能做到这一点 ？我尝试使用**a:hover**或**a:active**但它不能正常工作。我想更改触摸/单击按钮的背景。任何帮助将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:25:27.073

好吧，这并不是一个真正的 Appcelerator 问题，而是一个简单的 html/javascript 问题。由于您的代码发生在 Web 视图中，因此它应该具有标准的 html 文档结构。你有没有尝试过这样的事情？

```
<a href="#" onclick="document.getElementsByTagName('body')[0].style.backgroundColor='someColor';">button</a> 
```

# ios - 错误“加载了”XXXX“笔尖但未设置视图出口。”，当不使用界面生成器时

> ID：12949345
> 
> 赞同：0
> 
> 时间：2012-10-18T07:29:59.740
> 
> 标签：ios, simulator

我在控制台上得到这个日志：

> ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“-[UIViewController _loadViewFromNibNamed:bundle:] 加载了“AboutView”笔尖，但未设置视图出口。

...当我使用根视图控制器（类`AboutViewController`）实例化自定义 UINavigationController 子类并尝试以模态方式呈现它时。

我***确实***有一个`AboutViewController`，但它以编程方式创建它的视图。没有类或关联的 xib 文件之类的***东西。***`AboutView`事实上，整个项目中并没有一个 nib/xib 文件。

我在这里多次看到这个问题，但总是由使用 Interface Builder 的人提出（不是我的情况，因此没有解决方案适用）。

**注意：**这只发生在 5.0 模拟器上；6.0模拟器，运行5.0.1的设备，6.0没问题...

这是怎么回事？

# django - django IOError：从 BlackBerry 请求数据读取错误

> ID：12949347
> 
> 赞同：1
> 
> 时间：2012-10-18T07:30:06.497
> 
> 标签：django, blackberry

我的网站是一个 Intranet，每天有数百次点击。问题是 django 崩溃了几次，我收到了这个回溯错误：

```
Traceback (most recent call last):

  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 105, in get_response
    response = middleware_method(request, callback, callback_args, callback_kwargs)

  File "/usr/local/lib/python2.7/dist-packages/django/middleware/csrf.py", line 200, in process_view
    request_csrf_token = request.POST.get('csrfmiddlewaretoken', '')

  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 210, in _get_post
    self._load_post_and_files()

  File "/usr/local/lib/python2.7/dist-packages/django/http/__init__.py", line 284, in _load_post_and_files
    self._post, self._files = QueryDict(self.raw_post_data, encoding=self._encoding), MultiValueDict()

  File "/usr/local/lib/python2.7/dist-packages/django/http/__init__.py", line 248, in _get_raw_post_data
    self._raw_post_data = self.read(content_length)

  File "/usr/local/lib/python2.7/dist-packages/django/http/__init__.py", line 296, in read
    return self._stream.read(*args, **kwargs)

IOError: request data read error 
```

相关信息是，在程序崩溃的所有时候，我都在调试数据上发现了这一点：

```
 'HTTP_USER_AGENT': 'Mozilla/5.0 (BlackBerry; U; BlackBerry 9300; es) AppleWebKit/534.8+ (KHTML, like Gecko) Version/6.0.0.668 Mobile Safari/534.8+',
 'HTTP_X_RIM_HTTPS': '1.1',
 'HTTP_X_WAP_PROFILE': '"http://www.blackberry.net/go/mobile/profiles/uaprof/9300_edge/6.0.0.rdf"', 
```

登录表单中的应用程序崩溃。一些想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:38:52.740

正如您可能认为的那样，这不是 django 错误。

见[https://groups.google.com/group/django-users/browse_thread/thread/946936f69c012d96](https://groups.google.com/group/django-users/browse_thread/thread/946936f69c012d96)

我自己有错误（但只有 IE ajax 请求，没有文件上传，只是发布数据）。

如果我知道如何解决这个问题，我会添加一个完整的答案。

REF: [IOError: 请求数据读取错误](https://stackoverflow.com/questions/3823280/ioerror-request-data-read-error)

# c# - 我如何知道麦克风的声音何时开始？

> ID：12949353
> 
> 赞同：0
> 
> 时间：2012-10-18T07:30:32.723
> 
> 标签：c#, .net, microphone, naudio

我有一个问题。如何创建抛出异常的程序，同时在麦克风中开始声音。麦克风总是开着，那是噪音总是太。粗略地说，如果我对着麦克风说话，程序会抛出异常。我正在使用 NAudio。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:37:30.683

您可以查看[使用](http://voicerecorder.codeplex.com/)`NAudio`. 这是检测语音级别的示例。而且，当提高选择的语音级别时，您可以抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:48:10.110

查看 NAudio 中的 WaveInStream 类。它允许您打开麦克风并接收包含最新捕获字节的事件。处理捕获的字节可以了解声音是否开始或没有开始。

# sql - 如何从表中获取最新的“n”更新行

> ID：12949358
> 
> 赞同：1
> 
> 时间：2012-10-18T07:30:35.700
> 
> 标签：sql, oracle, oracle10g, top-n

> **可能重复：**
> [Oracle SQL - 如何检索列的最高 5 个值](https://stackoverflow.com/questions/2306744/oracle-sql-how-to-retrieve-highest-5-values-of-a-column)

我有一个表 abc，其中我有以下列

`act_id,cust_id,lastUpdatedDate,custActivity`. 其中**act_id 是主键**。

lastUpdatedDate 存储为此客户完成的最后一项活动。

我正在尝试根据 lastUpdatedDate 获取给定 custid 的最新 10 行。

我怎样才能实现它。

-维维克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:34:10.157

您可以在 Oracle中使用**ROWNUM 。单击**[此处](http://docs.oracle.com/cd/B28359_01/server.111/b28286/pseudocolumns009.htm)获取文档

```
select *
from  
   ( select * 
     from your_table 
     where cust_id=<given cust_id>
     order by lastUpdatedDate desc ) 
where ROWNUM <= 10; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:33:01.870

Oracle 支持**[`ROW_NUMBER()`](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions137.htm)**和窗口功能。试试下面的，

```
SELECT act_id, cust_id, lastUpdatedDate, custActivity
FROM
(
    SELECT  act_id, cust_id, lastUpdatedDate, custActivity,
            ROW_NUMBER() OVER (PARTITION BY cust_id ORDER BY lastUpdatedDate DESC) rn
    FROM tableNAME
) x
WHERE rn <= 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T07:38:06.853

希望这对你有帮助-

```
select act_id,cust_id,lastUpdatedDate,custActivity
  from (
    select act_id,cust_id,lastUpdatedDate,custActivity, row_number() over (order by lastUpdatedDate) r
      from abc
    where act_id=<cust_id>
  )
where r between 1 and 10; 
```

# c# - C#中桌面应用程序的结构

> ID：12949364
> 
> 赞同：2
> 
> 时间：2012-10-18T07:31:07.823
> 
> 标签：c#, .net, multithreading, desktop-application

请查看我创建的附件图像。这张图是我自己根据网上的资料做了的。该图说明了 C# .NET 中多线程桌面应用程序的结构。如果有人能提出任何改变，那将是非常感激的。明天我必须就这个主题做一个演示:) 如果你知道任何关于这个主题的相关文档并带有一些图表表示，那对我来说真的很有帮助。

期待尽快得到一些答复。

![在此处输入图像描述](../Images/a5f6b7a27ef9ef7abd29edb62bbc3601.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:43:39.430

对我来说看起来不错，但是因为工作线程看起来是孤立的，所以看起来很圆。

# php - 未定义的偏移量：cakephp 中的 1

> ID：12949366
> 
> 赞同：-1
> 
> 时间：2012-10-18T07:31:13.543
> 
> 标签：php, html, cakephp

您好，我一直在探索在实现站点时使用框架 cakephp。在我当前的 PHP 脚本中，出现了这个错误：未定义的偏移量：1，它已经让我头疼了。你们能帮我解决我做错了什么吗？

我的代码在这里：

```
function file_upload($file_array, $id){
    if(count($file_array))
    {
        $location = "files/library-files/";

        foreach ($file_array as $file) {
            $ext = explode(".", $file['name']);
            $new_name = md5(uniqid());
            $target_path = $location . $new_name .".".$ext[1];
            if(move_uploaded_file($file['tmp_name'], $target_path))
            {
                $this->LibraryFiles->create();
                $this->LibraryFiles->set('id', $new_name);
                $this->LibraryFiles->set('library_id', $id);
                $this->LibraryFiles->set('name', $file['name']);
                $this->LibraryFiles->set('ext', $ext[1]);
                $this->LibraryFiles->set('type', $file['type']);
                $this->LibraryFiles->set('size', $file['size']);
                if($this->LibraryFiles->save())
                {

                }
                else
                {

                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:51:01.720

您可以添加以下检查：

```
if(isset($ext[1]))
{
    $target_path = $location . $new_name .".".$ext[1];
}
else if($file['name'] !== '.' && $file['name'] !== '..')
{
    $target_path = $location . $new_name;
}
else
{
    continue;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T08:58:01.707

我刚刚替换了这个 $target_path = $location 。$new_name .".".$ext[1];

和

```
if (isset($target_path)) 
$target_path = $location . $new_name .".".$ext[1]; 
else 
$target_path = ''; 
```

现在我很高兴：D

# iphone - 如何为越狱的 iPhone 创建防火墙？

> ID：12949369
> 
> 赞同：1
> 
> 时间：2012-10-18T07:31:20.217
> 
> 标签：iphone, ios, firewall, jailbreak

是否可以为 iOS 6 或 iOS 5 的越狱 iPhone 创建防火墙？我实际上想在我的 iPhone 上获得所有互联网连接并自己控制它们的连接。

# c# - 无法在 Visual Studio 2008 中将启用 HTTPS 的 Web 服务添加为服务引用。错误 403

> ID：12949372
> 
> 赞同：1
> 
> 时间：2012-10-18T07:31:26.973
> 
> 标签：c#, visual-studio, web-services

如果在 IIS 中指定“需要客户端证书”，同时通过 Visual Studio 2008 添加启用 HTTPS 的 WebService 作为服务引用，则会发生以下异常：

**下载“https://10.95.185.119/service1.asmx”时出错。请求失败，HTTP 状态为 403：禁止。元数据包含无法解析的引用：“https://10.95.185.119/service1.asmx”。客户端身份验证方案“匿名”禁止 HTTP 请求。远程服务器返回错误：(403) Forbidden。如果在当前解决方案中定义了服务，请尝试构建解决方案并再次添加服务引用。**

在 IE 中，我可以毫无问题地在 IE 中获取 WSDL。如果我删除“证书要求” - 一切都好！

应用程序运行时会重复此问题。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:57:12.707

听起来您和需要身份验证的服务器之间有一个代理（我猜是基于 Windows）。IE 将在前一个会话中进行身份验证，这就是您能够看到端点的原因。

但是，Visual Studio 不会针对此代理进行身份验证，这就是您看到 403 的原因。

# php - 如何避免在代码中的多个位置存储数据库凭据？

> ID：12949377
> 
> 赞同：1
> 
> 时间：2012-10-18T07:31:47.433
> 
> 标签：php, class, global-variables, database-connection, connection-string

早在 2010 年，用户“Chacha102”就发布了以下代码来回答[这个](https://stackoverflow.com/q/2777325/1288274)问题。我喜欢他的代码（如下所示），但想就如何避免数据库连接凭据出现在代码中的多个位置提出建议。

这是他的代码：

```
$cb_db = new cb_db(USER, PASSWORD, NAME, HOST);
$cb_user = new cb_user($cb_db);

class cb_user {
    public __construct(cb_db $database)
    {
        $this->database = $database
    }

    protected function find_by_sql( $sql ) {

        $this->database = new cb_db(USER, PASSWORD, NAME, HOST);
        $result_set = $cb_db->query( $sql );

        $object_array = array();
        while( $row = $cb_db->fetch_array( $result_set ) ) {
            $object_array[] = self::instantiate( $row );
        }
        return $object_array;
    }
} 
```

问题是我将有许多类和函数，并且不希望将用户名和密码硬编码到每个类和函数中。如果有必要，我更喜欢它，它可以只在一个地方更新。

请问最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T07:33:33.960

为什么不使用“config.php”来声明您将使用的所有变量，例如用户名、数据库、服务器、其他可能与站点相关的设置等。

# c++ - 这个 C++ 代码是如何工作的？未初始化的指针

> ID：12949380
> 
> 赞同：4
> 
> 时间：2012-10-18T07:31:53.460
> 
> 标签：c++

> **可能重复：**
> [当我在 NULL 对象指针上调用成员函数时会发生什么？](https://stackoverflow.com/questions/2533476/what-will-happen-when-i-call-a-member-function-on-a-null-object-pointer)

```
class A {
  public:
    void foo() { cout << "Work";}
    void bar() { this->foo(); }//new edit, works too!
};

class B {
  private:
    A *a; //never initialized
  public:
    A& getA() {
      return *a;
    }
};

void SomeFunction() {
    B *b = new B();
    B& bRef = *b;
    bRef.getA().bar();//edited
    delete b;
} 
```

我在没有初始化“a”的情况下调用了 SomeFunction()，它仍然正确打印“Work”。我不明白为什么，它应该因分段错误而退出！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T07:34:37.220

这是未定义的行为，但它可以在大多数编译器上工作，因为`foo`不是`virtual`，它不使用`this`指针。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T07:45:24.927

请记住，类只是 C++ 的构造。编译后，所有类方法都只是接受隐藏`this`参数的静态方法。

鉴于您的`foo()`方法从不引用任何数据成员，它永远不需要使用它，因此尽管 this 的值未初始化，但运行良好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T07:59:02.377

语义上，

```
o.f(args) 
```

是相同的

```
f(o, args) 
```

因此，您可以认为您正在调用的函数 ( `A::foo()`) 等效于：

```
void A_foo(A* pthis)
{
    cout << "Work";
} 
```

如您所见，`pthis`它永远不会被取消引用，因此不会发生无效的内存访问。即使您键入`this->foo()`，它也是完全相同的调用，`this`不需要取消引用。

至少，这是编译器实现它的一种常见方式。可能发生的具体情况尚未确定，因此在死亡站 9000 上运行代码可能会将一只小猫送入太空。想想小猫吧！

# c# - 获取 linq 中的子项计数到实体查询

> ID：12949382
> 
> 赞同：2
> 
> 时间：2012-10-18T07:32:01.400
> 
> 标签：c#, linq-to-entities

我的数据库（MySql）中的两个表之间存在多对多关系：

*   类别（id、名称、id_parent）
*   声音（ID，名称）

一个类别***可以***有 1 个父类别，因此一个类别***可以***有多个子类别。如果一个类别至少有一个孩子，它就没有声音。我不允许声音和儿童类别在一起。

因此，对于父类别，我想获得所有可能有孩子的孩子（...），并且我想递归地计算所有孩子的声音。

例子：

Cat -> (CCat1 -> CCCat11(2 个声音), CCat2 (5 个声音), CCat3 -> CCat31 -> CCCat311 -> (CCCCat3111 (10 个声音), CCCCat3111 (1 个声音))

没有深度限制，这就是为什么我需要一种“递归”方式来计算声音。

*   猫有3个孩子。
*   CCat1 有 1 个孩子。
*   Ccat2 没有孩子。
*   CCat3 有 1 个孩子有 1 个孩子有 2 个孩子。

Cat.nbSounds = 18

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:19:03.777

答案在于`SelectMany`运营商的用户。

```
int count_soundsinparent = parentCategory
    .Select(x=> x.ChildCategory)
    .SelectMany(x=> x.Sounds)
    .Count(); 
```

假设您会使用常规的`Select`; 它会返回一个声音列表（每个子类别一个项目）的列表（每个子类别有一个项目），从而创建一个二维列表。

所做的是获取该列表中`SelectMany`的所有元素，并将其放入一维列表中。然后你计算该列表中的项目，瞧，你有总数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:23:58.263

> 递归地

此要求意味着您不会在单个 LINQ 查询中执行此操作。Linq 不能真正用 linq to *objects*表达递归查询，更不用说像 Linq to Entities 这样更复杂的提供程序了。

使用您描述的架构，您最好编写一个存储过程。如果您有一个嵌套集合模型，您*可能*能够对左右边缘数字进行一些数学操作，但可能无法使用那些额外的规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T15:57:42.637

经过更多的研究，似乎我们不能做我想做的事。

所以我创建了一个递归方法来检索孩子并计算每个类别中的声音数量（我计算类别中的声音或我计算类别中的孩子的声音数量）。

如果你找到了一种神奇的方式来使用 linq to entity，我接受它！

# c++ - 将原始数据类型转换为 void 指针类型

> ID：12949383
> 
> 赞同：4
> 
> 时间：2012-10-18T07:32:03.337
> 
> 标签：c++, c, pointers, pthreads

[我在这里](https://computing.llnl.gov/tutorials/pthreads/)阅读 pthreads 。在一个例子中，他们给出了[这个](https://computing.llnl.gov/tutorials/pthreads/samples/hello.c)源代码。

在创建线程时，他们将一个 long 类型，类型转换为 void * 类型传递给函数！。

在函数内部，他们接收这个值并反向转换以获得长值。

Q1：是否允许将指针类型转换为原始数据类型，反之亦然（在 C 和 C++ 中）？

Q2。如果是这样，这样做是一件好事吗？他们不应该创建一个指向这个 long 类型的指针，然后将这个指针类型转换为 void * 并将其传递给函数。

这种将原始类型转换为指针类型的想法让我很困惑？从任何指针类型到 void* 的转换是可以理解的，但是原始数据类型如何存储在 void* 类型中？在特定系统上，原始类型的大小是否有可能大于为指针类型分配的大小？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T07:37:53.350

Q1：是的，但是这是否可行是由实现定义的（=取决于平台）。一个更安全的版本将使用`uintptr_t`而不是`long`.

Q2：这绝对是糟糕的风格。`long`通过分配 a并传递地址来正确执行此操作并没有太大的性能损失。

# css - 悬停元素的宽度应该增加高亮框的大小并保留下拉菜单

> ID：12949392
> 
> 赞同：0
> 
> 时间：2012-10-18T07:32:23.367
> 
> 标签：css, css-position, nav

我在 CSS 中有三个问题。作为开发人员而不是设计专业人士，但需要解决这个问题。我有一个导航栏，看起来像这样：

```
<nav id="primary">
   <ul>
      <li><a href="#">Home</a></li>
      <li><a href="#">About</a>
          <ul>
            <li><a href="#" class="outer"><span class="arrow">></span>Item1</a></li>
            <li><a href="#" class="outer"><span class="arrow">></span>Item2</a></li>
          </ul>
      </li>
      <li><a href="#">Contact</a></li>
   </ul>
</nav> 
```

我的嵌入式 CSS 看起来像

```
#primary ul li ul
{
display: none;
}
#primary li:hover >ul
{
  display: block;
  position: absolute;
  background: #bfe9f7;
  -webkit-border-shadow :0 1px 1px rgba(0,0,0,.2);
  -moz-box-shadow:0 1px 1px rgba(0,0,0,.2);
  box-shadow: 0 1px 1px rgba(0,0,0,0.2);
}
#primary ul li
{
  display: inline;
}
#primary li:hover
{
  position: relative;
}
#primary li a:hover
{
  background: #8ac142;
}
#primary li:hover ul 
{
  left: 0px;
  top: 30px;
  padding: 3px;
  width: 180px;
}
.arrow
{
  color: #009aca;
}
#primary ul li ul li a.outer 
{
  color: #3d3d3d;
  -webkit-box-shadow: 0px 4px 2px -2px #4cbadd;
  -moz-box-shadow: 0px 4px 2px -2px #4cbadd;
  box-shadow: 0px 4px 2px -2px #4cbadd;
} 
```

现在，当我将鼠标悬停在“关于”上时，会显示下拉菜单，但是，1\. 如果我稍微移动一下，它就会消失，使我无法单击“项目” 2\. 关于的悬停状态给出了我想要的背景颜色绿色增加悬停面积。3\. 我提到了#primary li:hover >ul '>' 实际上是做什么的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:33:06.490

1.  删除 #primary li:hover ul 的顶部和左侧的 css

    ```
    #primary li:hover ul 
    {
      padding:10px;
      width: 180px;
    } 
    ```

2.  增加你的填充。

    ```
    #primary ul li ul li a.outer 
    {
       padding:5px;
    }​ 
    ```

    示例：http: [//jsfiddle.net/j2NsZ/3/](http://jsfiddle.net/j2NsZ/3/)

3.'>' 是子元素的选择器（[更多信息](https://stackoverflow.com/questions/3225891/what-does-mean-in-css-rules)）

# c# - 网络资源的无效交易尝试给出错误

> ID：12949395
> 
> 赞同：4
> 
> 时间：2012-10-18T07:32:44.270
> 
> 标签：c#, asp.net, payment-gateway, payment-processing

我使用网络资源 SOAP 工具包 API 来执行交易。事务捕获工作正常，但是每当我尝试使事务无效时，我都会收到响应代码 246：“您要求对一种无法无效的事务进行无效”。为什么会这样？我已包含无效交易所需的所有参数

```
 RequestMessage request = new RequestMessage();
                request.voidService = new VoidService();
                request.voidService.run = "true";
                request.voidService.voidRequestID = "value";
                request.voidService.voidRequestToken = "value";
                request.merchantID = "value";
                request.merchantReferenceCode = "value";
                TransactionProcessorClient proc = new TransactionProcessorClient();
                proc.ChannelFactory.Credentials.UserName.UserName
            = "merchantID";
                proc.ChannelFactory.Credentials.UserName.Password
                    = "password";

                ReplyMessage reply = proc.runTransaction(request); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T23:25:19.287

我遇到了同样的问题。基本上，错误 246 意味着[捕获信息已经发送到支付处理器](http://support.cybersource.com/cybskb/index?page=content&id=C156&pmv=print&impressions=false)。根据[Cyber​​source 服务器发行说明](http://www.cybersource.com/developers/download/documentation/release_notes/view.php?page_id=1407)：

> 仅当我们尚未将信息提交给您的处理器时，交易才能无效。通常我们每天向您的处理者提交一次此类信息，因此您成功执行作废的窗口相对较小。如果我们已经将交易信息发送给处理者，我们将拒绝您的无效请求。

如果您在 Cyber​​source 沙箱上测试 void（就像我一样），我认为发生的情况是，由于沙箱是一个测试环境并且付款实际上并未发送到支付处理器，Cyber​​source 将捕获视为发送到立即支付处理器，因此取消捕获将永远不会在沙盒环境中起作用。

但是，我做了一些假设，但我找不到任何文档来肯定地验证这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T08:26:56.993

如果是，您是否尝试提出退款请求，如果正确，请尝试`ccCreditService`Work Perfect 。`RequestID`尝试`ccCreditService`取消付款订单。

# javascript - 如何在jquery中创建数组

> ID：12949397
> 
> 赞同：1
> 
> 时间：2012-10-18T07:32:45.223
> 
> 标签：javascript, jquery

我想创建所选元素的每个子元素的宽度数组。我试过了 ：

```
var width = $(element).children().map(function () { return this.style.width; }); 
```

但这不起作用。当我`alert(width[0])`然后而不是显示宽度它显示`objectHtmlElement`。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T07:35:41.870

仅当您设置内联样式时，尝试`.width()`样式属性才有效。

```
var widths = $(element).children().map(function () { return $(this).width(); }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T07:36:29.387

如果你想得到基本数组，你应该调用`get`方法，map 方法返回一个 jQuery 包装的数组。

> 由于返回值是一个 jQuery 包装的数组，因此 get() 返回的对象与基本数组一起使用是很常见的。

```
var widths = $(element).children().map(function() {
     return this.style.width; 
}).get(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T07:37:30.840

```
var obj = $('li');
var arr = $.makeArray(obj); 
```

结果将是：

```
(typeof obj === 'object' && obj.jquery) === true;
jQuery.isArray(arr) === true; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T07:38:54.707

在 map 之后使用 jquery width() 和 get() ：

```
var widths = $(element).children().map(function() {
     return $(this).width(); 
}).get(); 
```

# javascript - jQuery从ajax成功将参数传递给函数调用

> ID：12949398
> 
> 赞同：1
> 
> 时间：2012-10-18T07:32:46.070
> 
> 标签：javascript, jquery, ajax, parameters, callback

我想在 jQuery Ajax 请求成功时调用一个函数。我想将一个参数传递给第二个函数，该函数显然（它不起作用）在 jquery 匿名函数中不存在。

这是我的 Ajax 函数：

```
function core_get_title(url,id_of_link){

                $.ajax({
                    type: "POST",
                    url: "url_handler.php",
                    data: { 
                        url: url,
                        cmd: "get_title",
                        },
                    success: function(data) {
                        core_title_auto(data,id_of_link);
                        }   
                });

            } 
```

而调用core_title_auto时，id_of_link参数为空。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:35:09.793

通过放置警报功能，在 ajax 调用之前检查并查看 id_of_link 中的内容

```
function core_get_title(url,id_of_link){
                alert("id_of_link"+id_of_link);  
                $.ajax({
                    /*...... your code */  
                });

            } 
```

# entity-framework - 如何编写编辑操作

> ID：12949409
> 
> 赞同：0
> 
> 时间：2012-10-18T07:33:15.877
> 
> 标签：entity-framework, asp.net-mvc-4, visual-studio-2012, entity-framework-migrations

我正在尝试提出一个编辑操作。到目前为止，请参阅下文。

**视图模型：**

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace GlobalUnitedSC.WebUI.Models
{
public sealed class CreateMensPlayerViewModel
{
    //Player profile starts here

    [HiddenInput(DisplayValue=false)]
    public int MensTeamId { get; set; }

    [HiddenInput(DisplayValue = false)]
    public int PlayerId { get; set; }

    [Required]
    public string Name { get; set; }

    [DataType(DataType.Date)]
    public DateTime? BirthDate { get; set; }

    [Required]
    public string Position { get; set; }

    public int ShirtNumber { get; set; }

    [DataType(DataType.Date)]
    public DateTime? Joined { get; set; }

    public string Country { get; set; }

    [DataType(DataType.MultilineText)]
    public string Description { get; set; }

    public byte[] ImageData { get; set; }

    [HiddenInput(DisplayValue = false)]
    public string ImageMimeType { get; set; }

    [DataType(DataType.EmailAddress)]
    public string EmailAddress { get; set; }

    [DataType(DataType.PhoneNumber)]
    public string PhoneNumber { get; set; }

    //Player Statistics starts here
    public int Games { get; set; }
    public int Goals { get; set; }
    public int Assists { get; set; }
    public int TotalShots { get; set; }
    public int ShotsOnGoal { get; set; }
    public int FoulsDrawn { get; set; }
    public int FoulsCommitted { get; set; }
    public int Saves { get; set; }
    public int BlueCards { get; set; }
    public int YellowCards { get; set; }
    public int RedCards { get; set; }
 }
} 
```

**创建动作：**

```
 [HttpGet]
    public ActionResult Create(int mensTeamId)
    {
        new CreateMensPlayerViewModel {MensTeamId = mensTeamId};

        return View();
    }

    [HttpPost]
    public ActionResult Create(CreateMensPlayerViewModel viewModel, HttpPostedFileBase  image)
    {
        if (ModelState.IsValid)
        {
            var mensTeam = _dataSource.MensTeams.Single(t => t.Id == viewModel.MensTeamId);
            var mensPlayer = new MensPlayer
                                 {
                                     Name = viewModel.Name,
                                     BirthDate = viewModel.BirthDate,
                                     Position = viewModel.Position,
                                     ShirtNumber = viewModel.ShirtNumber,
                                     Joined = viewModel.Joined,
                                     Country = viewModel.Country,
                                     Description = viewModel.Description,
                                     EmailAddress = viewModel.EmailAddress,
                                     PhoneNumber = viewModel.PhoneNumber,
                                     Games = viewModel.Games,
                                     Goals = viewModel.Goals,
                                     Assists = viewModel.Assists,
                                     TotalShots = viewModel.TotalShots,
                                     ShotsOnGoal = viewModel.ShotsOnGoal,
                                     FoulsDrawn = viewModel.FoulsDrawn,
                                     FoulsCommitted = viewModel.FoulsCommitted,
                                     Saves = viewModel.Saves,
                                     BlueCards = viewModel.BlueCards,
                                     YellowCards = viewModel.YellowCards,
                                     RedCards = viewModel.RedCards
                                 };

            mensTeam.MensPlayers.Add(mensPlayer);

            _dataSource.Save();
            TempData["message"] = string.Format("{0} has been saved", mensPlayer.Name);

            return RedirectToAction("detail", "MensTeam", new {id =         viewModel.MensTeamId});
        }

        return View(viewModel); 
    } 
```

**HttpGet 编辑动作**

```
[HttpGet]
    public ActionResult Edit (int id)
    {
        var mensPlayer = _dataSource.MensPlayers.FirstOrDefault(p => p.Id == id);

        return View(mensPlayer);
    } 
```

现在任何人都可以帮助我进行 HttpPost 编辑操作，最好是基于上述模型类的操作？

我希望它与下面的行有关，如果这会创建一个新播放器，我可以写什么来编辑该播放器？

```
var mensPlayer = new MensPlayer {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:04:43.767

由于它是一个帖子，因此该方法有点等于您的创建方法。您将收到一个 MensPlayer 作为参数。

然后检查模型是否有效（验证等）并将条目标记为已修改并保存更改。

```
[HttpPost]
public ActionResult Edit(MyModel myModel)
{
    if (ModelState.IsValid)
    {
        DbContext.Entry(myModel).State = EntityState.Modified;
        DbContext.SaveChanges();
        return RedirectToAction("Index");
    }
    return View(myModel);
} 
```

数据库上下文

```
public class ModelContext : DbContext
{
    public DbSet<MyModel> MyModelSet{ get; set; }
} 
```

[有关 DBContext 的更多信息](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext%28v=vs.103%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:07:36.167

在 Slauma 的帮助下，在此问题的转发或扩展中的评论中：

[转发/扩展](https://stackoverflow.com/questions/12962737/edit-method-in-mvc4-and-visual-studio-2012/12964463#12964463)

这就是他建议我做的，并且有效。

添加到 IDataSource 接口：

```
 void Update(MensPlayer mensPlayer); 
```

更新在 Db 类中实现：

```
void IDataSource.Update(MensPlayer mensPlayer)
    {
        Entry(mensPlayer).State = EntityState.Modified;
    } 
```

编辑动作：

```
[HttpPost]
    public ActionResult Edit(MensPlayer mensPlayer)
    {
        if (ModelState.IsValid)
        {
            //Save Player
            _dataSource.Update(mensPlayer);
           _dataSource.Save();

           TempData["message"] = string.Format("{0} has been saved", mensPlayer.Name);
            return RedirectToAction("Detail", "MensPlayer", new {id = mensPlayer.Id});
        }
        return View(mensPlayer);
    } 
```

就像这样，一切正常，尽管我假设我会像使用 Save 一样对整个 DbSet 实施更新。

# c++ - 视频处理指南

> ID：12949411
> 
> 赞同：3
> 
> 时间：2012-10-18T07:33:22.737
> 
> 标签：c++, opencv

我刚刚开始处理视频中的图像而不是静止图像。正确的做法是什么？

1.  我们通常会处理每一帧图像吗？
    *   意思是，如果我想将 RGB 更改为 HSV 颜色空间等。人们通常在这里做什么？

在这里需要一些指导，因为我没有视频处理经验。

谢谢大家。

编辑：有谁知道为什么在opencv中处理的视频与原始视频相比存在显着滞后，即使它只是从RGB转换为HSV？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T08:50:23.463

视频处理总是逐帧完成。例如，如果您想将 RGB 视频转换为 HSV，您将执行以下步骤：

1.  打开视频文件。
2.  读取一个颜色帧（RGB 帧）。
3.  将帧从 RGB 转换为 HSV 颜色空间。
4.  对转换后的帧做任何你想做的事情。
5.  转到第 2 步。

**更新：**

将 RGB 视频转换为 HSV 的 C++ 示例代码：

```
#include<iostream>
#include<string>
#include<opencv2/core/core.hpp>
#include<opencv2/highgui/highgui.hpp>
#include<opencv2/imgproc/imgproc.hpp>

using namespace std;

int main()
{
   cv::VideoCapture capture;
   cv::Mat RGB, HSV;

   string videoPath = "C:/video.avi";

   if(!capture.open(videoPath))
   {
     cout<<"Video Not Found"<<endl;
     return;
   }

    while(true)
    {
       capture>>RGB;  //Read a frame from the video

       if(RGB.empty()) //Check if the frame has been read correctly or not
       {
          cout<<"Capture Finished"<<endl;
          break;
       }

       cv::cvtColor(RGB,HSV,CV_BGR2HSV);

       cv::imshow("HSV Image",HSV);
       cv::waitKey(10);
    }

    capture.release();
    return 0;
} 
```

颜色转换功能可能需要为 HSV 预分配内存。[在此处](http://docs.opencv.org/2.4/modules/imgproc/doc/miscellaneous_transformations.html#cvtcolor)阅读文档。

# c# - 如何让 Autofixture 创建包含具有接口类型的属性的类型的实例？

> ID：12949417
> 
> 赞同：9
> 
> 时间：2012-10-18T07:33:37.847
> 
> 标签：c#, autofixture, test-data

我有这样一堂课：

```
public class ViewModel
{
    public IPagination<Data> List { get; set; } // interface!
    public SearchFilter SearchFilter { get; set; }
    public string Test { get; set; }
}

public class SearchFilter
{
    public string Name { get; set; }
} 
```

围绕 IPagination 接口创建一个动态代理，并用测试数据填充代理。现在是否可以让 AutoFixture 创建 ViewModel 类型的实例？请注意，我只知道运行时的类型 ( `typeof(ViewModel)`)。

现在我知道我可以做到这一点：

```
var context = new SpecimenContext(fixture.Compose());
var value = context.Resolve(new SeededRequest(typeof(ViewModel), null)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T07:49:24.583

一个简单的可能性是注册一个工厂方法：

```
fixture.Register<YourInterface>(() =>  new InterfaceImpl()); 
```

* * *

要让 AutoFixture 自动为您想要使用自动模拟自定义项之一的接口创建代理：

*   AutoMoq定制
*   AutoRhinoMock定制
*   AutoFakeItEasy定制

在您的具体情况下，这将创建一个表示空列表的接口实例。
当您想在该列表中包含测试数据时，您不想使用自动模拟自定义，而是使用理解语义的自定义，`IPagination`如[本博客文章](http://blog.ploeh.dk/2012/07/31/TheOrderOfAutoFixtureCustomizationsMatter.aspx)中所述。
如果这太复杂，您仍然可以使用以下`Register`方法：

```
fixture.Register(() => (IPagination<Data>)new Pagination(
                                            fixture.CreateMany<Data>())); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T15:31:19.337

从理论上讲，应该可以填充自动模拟实例的属性。

假设类型的`IPagination<T>`属性`ViewModel`定义为：

```
public interface IPagination<T>
{
    SearchFilter Property1 { get; set; }
    string Property2 { get; set; }
} 
```

我们可以创建一个*临时的*自动模拟自定义，例如`MyCustomization`.

```
var fixture = new Fixture()
    .Customize(new MyCustomization());
var context = new SpecimenContext(fixture.Compose()); 
```

然后，以下调用将创建一个实例`ViewModel` *（仅在运行时知道）*，提供一个自动模拟实例，`IPagination<Data>`并**为属性赋值。**

```
var value = context.Resolve(typeof(ViewModel));
// List -> {IPagination`1Proxy593314cf4c134c5193c0019045c05a80}
// List.Property1.Name -> "Namef71b8571-a1a0-421d-9211-5048c96d891b" 
// List.Property2 -> "f58cae65-b704-43ec-b2ce-582a5e6177e6" 
```

### 我的定制

> 在应用此自定义之前，请记住这仅适用于此特定场景（因此描述中*的临时*）。我强烈建议在其他任何地方**使用 Auto Mocking、[AutoMoq](http://nuget.org/packages/AutoFixture.AutoMoq)、[AutoRhinoMocks](http://nuget.org/packages/AutoFixture.AutoRhinoMocks)、[AutoFakeItEasy](http://nuget.org/packages/AutoFixture.AutoFakeItEasy)或[AutoNSubstitute](http://nuget.org/packages/AutoFixture.AutoNSubstitute)**的扩展之一。

```
internal class MyCustomization : ICustomization
{
    public void Customize(IFixture fixture)
    {
        fixture.Customizations.Add(new MySpecimenBuilder());
    }

    private class MySpecimenBuilder : ISpecimenBuilder
    {
        public object Create(object request, ISpecimenContext context)
        {
            var type = request as Type;
            if (type == null || !type.IsInterface)
            {
                return new NoSpecimen(request);
            }

            object specimen = this
                .GetType()
                .GetMethod(
                    "Create",
                    BindingFlags.NonPublic | BindingFlags.Static)
                .MakeGenericMethod(new[] { type })
                .Invoke(this, new object[] { context });

            return specimen;
        }

        private static object Create<TRequest>(ISpecimenContext context)
            where TRequest : class
        {
            var mock = new Mock<TRequest>();
            mock.SetupAllProperties();

            foreach (PropertyInfo propInfo in typeof(TRequest).GetProperties())
            {
                object value = context.Resolve(propInfo.PropertyType);
                propInfo.SetValue(mock.Object, value);
            }
            return mock.Object;
        }
    }
} 
```

# image-processing - 在 2D 点云中寻找简单的形状

> ID：12949418
> 
> 赞同：3
> 
> 时间：2012-10-18T07:33:41.640
> 
> 标签：image-processing, cloud, shape, point

我目前正在寻找一种将简单形状（例如 T 或 L 形状）拟合到 2D 点云的方法。结果，我需要的是形状的位置和方向。

我一直在研究几种方法，但大多数似乎都非常复杂，并且首先涉及构建和学习示例数据库。当我处理非常简单的形状时，我希望可能有一种更简单的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:51:34.867

说你不想做任何训练，我猜你的意思是你不想做任何特征匹配；特征匹配用于对图像中对象的姿势（位置和方向）做出良好的猜测，并且将与 RANSAC 一起适用于您的问题，以猜测和验证关于对象姿势的良好假设。

最*简单*的方法是模板匹配，但这可能在计算上过于复杂（这取决于您的用例）。在模板匹配中，您只需遍历对象的可能位置及其可能的方向和可能的比例，并检查模板（在该位置和方向和比例看起来像 L 或 T 的云）匹配（或者您采样可能的位置方向和比例随机）。如果您的点被组织（或者您通过例如将它们转换为像素来组织它们），则可以相当快地检查模板。

如果这太慢了，有很多方法可以使模板匹配更快，我会向您推荐*广义霍夫变换*。在这里，在开始搜索模板之前，您在您正在寻找的形状的边界（T 或 L）上循环，对于其边界上的每个点，您查看渐变方向，然后查看渐变方向和该点之间的角度对象模板的原点，以及到原点的距离。您将其添加到每个边界点的表格（让我们称之为`Table A`），最终得到一个表格，该表格从梯度方向映射到对象原点的一组可能位置。现在你设置了一个 2D 投票空间，它实际上只是一个 2D 数组（让我们称之为`Table B`) 其中每个像素都包含一个数字，表示该位置对象的投票数。然后对于目标图像（点云）中的每个点，您检查梯度并找到与`Table A`该梯度相对应的一组可能的对象位置，然后为`Table B`（霍夫空间）中的所有相应对象位置添加一票。

这是一个非常简洁的解释，但是知道要查找模板匹配和广义霍夫变换，您将能够在网络上找到更好的解释。例如，查看模板匹配和霍夫变换的 Wikipedia 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T18:17:33.910

您可能需要：

1-从您正在寻找对象的图像中提取一些特征。

2-在对象的图像中提取另一组特征

3-匹配特征（可以使用SIFT之类的方法）

4-当您找到匹配项时应用 RANSAC 算法。它为您提供变换矩阵（包括平移、旋转信息）。

使用 SIFT 从[这里](http://robwhess.github.io/opensift/)开始。它实际上是为 SIFT 编写的最好的源代码之一。它包含 RANSAC 算法，您不需要自己实现它。

[您可以在此处](http://en.wikipedia.org/wiki/RANSAC)阅读有关 RANSAC的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-30T19:53:54.930

在二维点云数据中检测形状（L、T、...）的两种常用方法是使用 OpenCV 或点云库。我将解释在 OpenCV 中检测这些形状可能采取的步骤。为此，您可以使用以下 3 种方法，正确方法的选择取决于形状（大小、形状的面积……）：

*   霍夫线变换
*   模板匹配
*   寻找轮廓

第一步是将您的点转换为灰度`Mat`对象，通过这样做，您基本上可以制作 2D 点云数据的图像，因此您可以使用其他 OpenCV 函数。然后你可以平滑图像以减少噪声，结果会以某种方式包含真实边缘的模糊图像，如果你的应用程序不需要实时处理，你可以使用`bilateralFilter`. [您可以在此处](https://docs.opencv.org/2.4/doc/tutorials/imgproc/gausian_median_blur_bilateral_filter/gausian_median_blur_bilateral_filter.html)找到有关平滑的更多信息。下一步将是选择方法。如果形状只是某种正交线（例如 L 或 T），您可以使用霍夫线变换来检测线条，检测后，您可以遍历线条并计算`dot product`线的数量（因为它们是正交的，所以结果应该是 0）。[您可以在此处](https://docs.opencv.org/2.4/doc/tutorials/imgproc/imgtrans/hough_lines/hough_lines.html)找到有关霍夫线变换的更多信息。另一种方法是使用模板匹配检测您的形状。基本上，您应该制作一个形状（L 或 T）的模板并在`matchTemplate`函数中使用它。您应该考虑要使用的模板的大小应该按照图像的顺序排列，否则您可能会调整图像的大小。更多关于算法的信息可以在[这里](https://docs.opencv.org/2.4/doc/tutorials/imgproc/histograms/template_matching/template_matching.html)找到。如果形状包括您可以使用 找到形状轮廓的区域`findContours`，它将为您提供要检测的形状周围的多边形数量。例如，如果您的形状是`L`，它将具有大约 6 条线的多边形。此外，您还可以使用其他一些过滤器，`findContours`例如计算形状的面积。

# c# - .net C# 中的 Ldap 连接

> ID：12949421
> 
> 赞同：2
> 
> 时间：2012-10-18T07:33:55.040
> 
> 标签：c#, email, ldap

我有一个可以发送电子邮件的应用程序。现在要求用于`ldap` 验证用户电子邮件。我对这个概念很陌生。我已获得`ldap`服务器链接。不知道如何继续。任何文章或点击都会非常有帮助。

这是我正在尝试的代码

```
public static UserDetail GetUserDetails(string EmailId, string domainName)
{
    UserDetail userDetail = new UserDetail();

    try
    {
        string filter = string.Format("(&(ObjectClass={0})(sAMAccountName={1}))", "person", EmailId);
        string[] properties = new string[] { "fullname" };

        DirectoryEntry adRoot = new DirectoryEntry("LDAP://" + domainName, null, null, AuthenticationTypes.Secure);
        DirectorySearcher searcher = new DirectorySearcher(adRoot);
        searcher.SearchScope = SearchScope.Subtree;
        searcher.ReferralChasing = ReferralChasingOption.All;
        searcher.PropertiesToLoad.AddRange(properties);
        searcher.Filter = filter;
        SearchResult result = searcher.FindOne();

        DirectoryEntry directoryEntry = result.GetDirectoryEntry();
        string displayName = directoryEntry.Properties["displayName"[0].ToStrin();
        string firstName = directoryEntry.Properties["givenName"][0].ToString();
        string lastName = directoryEntry.Properties["sn"][0].ToString();
        string emailId = directoryEntry.Properties["mail"][0].ToString();

        userDetail.EmailId = emailId;
    }
    catch (Exception)
    {

    }
    return userDetail;
} 
```

我想通过单击搜索按钮来实现它。如何调用方法并传递变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:43:24.090

如果您使用的是 .NET 3.5 或更高版本，则可以使用 a`PrincipalSearcher`和“按示例查询”主体进行搜索：

```
// create your domain context
PrincipalContext ctx = new PrincipalContext(ContextType.Domain);

// define a "query-by-example" principal - here, we search for a UserPrincipal 
// and with the e-mail of "bruce@example.com"
UserPrincipal qbeUser = new UserPrincipal(ctx);
qbeUser.EmailAddress = "bruce@example.com";

// create your principal searcher passing in the QBE principal    
PrincipalSearcher srch = new PrincipalSearcher(qbeUser);

// try to find that user
UserPrincipal found = srch.FindOne() as UserPrincipal;

if(found != null)
{
    // do whatever here - "found" is the user that matched the e-mail given
}
else
{
    // there wasn't any user with that e-mail address in your AD
} 
```

如果您还没有 - 一定要阅读 MSDN 文章[Managing Directory Security Principals in the .NET Framework 3.5](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)，它很好地展示了如何充分利用 .NET Framework 中的新功能`System.DirectoryServices.AccountManagement`。或查看[System.DirectoryServices.AccountManagement](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)命名空间上的 MSDN 文档。

当然，根据您的需要，您可能希望在您创建的“示例查询”用户主体上指定其他属性：

*   `DisplayName`（通常：名字 + 空格 + 姓氏）
*   `SAM Account Name`- 您的 Windows/AD 帐户名称
*   `User Principal Name`- 您的“username@yourcompany.com”样式名称

您可以在 上指定任何属性`UserPrincipal`并将其用作`PrincipalSearcher`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T07:49:53.833

给定 emailAddress 的输入（类型字符串），此代码将在 LDAP 目录中搜索具有匹配电子邮件地址的用户，并返回有关该用户的一些信息：

```
string fullName = string.Empty;
            string givenName = string.Empty;
            string distinguishedName = string.Empty;
            string sAMAccountName = string.Empty;
            using (var context = new PrincipalContext(ContextType.Domain, "DOMAIN"))
            {
                using (var searcher = new PrincipalSearcher(new UserPrincipal(context)))
                {
                    foreach (Principal result in searcher.FindAll())
                    {
                        var de = result.GetUnderlyingObject() as DirectoryEntry;

                        if (de.Properties["cn"].Value.ToString().Contains(" "))
                        {

                            //var userEntry = new DirectoryUser(de.Properties["sAMAccountName"].Value.ToString());
                            var currentUserEmail = de.Properties["mail"].Value.ToString().ToLower();
                            if (currentUserEmail == emailAddress)
                            {

                                if (de.Properties["cn"].Value != null)
                                    fullName = de.Properties["cn"].Value.ToString();
                                if (de.Properties["givenName"].Value != null)
                                   givenName = de.Properties["givenName"].Value.ToString();
                                if (de.Properties["distinguishedName"].Value != null)
                                    distinguishedName =de.Properties["distinguishedName"].Value.ToString();
                                if (de.Properties["sAMAccountName"].Value != null)
                                    sAMAccountName = de.Properties["sAMAccountName"].Value.ToString();

                            }
                        }
                    }
                }
            } 
```

它需要参考：

```
System.DirectoryServices;
System.DirectoryServices.AccountManagement; 
```

我想提一下的一个警告是，目录查找例程可能非常慢。如果您的域中有 100,000 个用户，则此过程将需要一段时间才能运行。我倾向于做的是定期将目录搜索的输出转储到数据库表中，并对该表执行任何查找。数据库转储的频率当然取决于您的业务逻辑。有时我只是在执行新转储之前截断表，而在其他情况下，我转储到“暂存”表，并且仅将“增量”更新应用于活动目录记录表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T07:56:18.583

*   如果可能，请使用 SSL 连接到目录服务器。也可以使用 StartTLS 扩展操作将非安全连接提升为安全连接。
*   向服务器发送一个 SEARCH 请求，该请求包含客户端希望从其开始搜索的基本 DN、搜索范围（基本、一级或子树）以及使用 LDAP 客户端知道的信息的过滤器将搜索结果缩小到所需用户和属性`1.1`.
*   服务器将使用包含匹配搜索请求参数的条目数和匹配的每个条目的可分辨名称的 SEARCH 响应进行响应。
*   通过安全连接将 BIND 请求传输到目录服务器。BIND 请求包含专有名称和专有名称的凭据
*   目录服务器将验证凭据并返回带有整数结果代码的 BIND 响应，指示凭据是否与存储在服务器数据库中的凭据匹配

### 也可以看看

*   [LDAP：编程实践](http://www.ldapguru.info/ldap/ldap-programming-practices.html)
*   [LDAP：搜索实践](http://www.ldapguru.info/ldap/ldap-search-best-practices.html)

# android - android中的下拉菜单

> ID：12949426
> 
> 赞同：0
> 
> 时间：2012-10-18T07:34:01.467
> 
> 标签：android, android-layout

我的操作栏和菜单有问题。我想在操作栏中创建下拉菜单。我有图标，当我点击它时，我会得到下拉列表，其中项目有图标和标题。操作栏中是否有任何标准图标，或者我需要创建其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:43:30.507

研究这些链接 [link1](http://developer.android.com/guide/topics/ui/actionbar.html#Dropdown)

[link2](http://android-developers.blogspot.in/2011/04/customizing-action-bar.html)希望这能解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:43:58.760

将 Menus 项添加到您的`ActionBar`和 set `android:showAsAction="never"`中，如果标准操作栏上没有空间，ActionBar 将创建一个下拉菜单并显示您的所有菜单项。

您还可以使用 更改样式`android:actionDropDownStyle`。

读[这个](http://developer.android.com/guide/topics/ui/actionbar.html)

# eclipse - Eclipse Web 视图

> ID：12949430
> 
> 赞同：1
> 
> 时间：2012-10-18T07:34:14.063
> 
> 标签：eclipse, webview

我想在 webview 中而不是在 webbrowser 中打开 url。我不是程序员，找不到解决方案。帮助将不胜感激。我希望 url 在名为 activity_webview 的新活动中打开。提前致谢

```
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import com.casovi.luxury_new.R;

public class MainCars extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_cars);
    }

    public void GoKoenigsegg(View view) {
        goToUrl("http://www.koenigsegg.com/");
    }
    public void GoMercedes(View view) {
        goToUrl("http://www.mercedes-amg.com/#/home");
    }

    private void goToUrl(String url) {
        Uri uriUrl = Uri.parse(url);
        Intent launchBrowser = new Intent(Intent.ACTION_VIEW, uriUrl);
        startActivity(launchBrowser);
    }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-27T11:37:58.950

让你的主要活动像这样：首先创建一个 webview，第二个启用 webviewclients，第三个启用 contentview，最后加载你想要的 url。一切顺利..

```
public class MainCars extends Activity {

WebView web;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    web = (WebView) findViewById(R.id.webView1);
    web = new WebView(this);  
    web.getSettings().setJavaScriptEnabled(true);
    web.loadUrl("http://www.koenigsegg.com/");
    web.setWebViewClient(new myWebClient());
    web.setWebChromeClient(new WebChromeClient());
    setContentView(web);
}
```

# php - php和codeigniter中的Paypal自适应方法

> ID：12949431
> 
> 赞同：2
> 
> 时间：2012-10-18T07:34:14.453
> 
> 标签：php, codeigniter, paypal

我正在使用 Codeigniter 并实现贝宝延迟链式自适应方法。我已经成功完成了第一站。付款将发送给主要接收方，但是当我通过传递 PayKey 使用执行付款时，这给了我以下错误结果：

```
Array (
        [Receiver] => 
        [Category] => Application
        [Domain] => PLATFORM
        [ErrorID] => 550001
        [ExceptionID] => 
        [Message] => This payment request must be authorized by the sender
        [Parameter] => 
        [Severity] => Error
        [Subdomain] => Application
    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:34:28.193

我猜你使用IPN方法？

我在使用自适应支付中的 IPN 机制时也遇到了问题。Paypal 的示例代码中存在错误。在您的流程中的某处，您需要向 Paypal 返回完全相同的请求。他们的示例代码是这样的：

```
$req = 'cmd=_notify-validate&'
if (isset($_POST))
{
    foreach ($_POST as $key=>$value)
    {
        $req .= "&".$key."=".urlencode(stripslashes($value));
    }
} 
```

这是行不通的，因为 PHP 解释为数组的请求中有括号。你需要做：

```
$req = 'cmd=_notify-validate&'.file_get_contents("php://input"); 
```

请看一下我在 CI 论坛上发布的这个论坛主题：

[http://codeigniter.com/forums/viewthread/195377/](http://codeigniter.com/forums/viewthread/195377/)

另外，我想让您了解 CI 的新支付火花：

[http://getsparks.org/packages/codeigniter-payments/versions/HEAD/show](http://getsparks.org/packages/codeigniter-payments/versions/HEAD/show)

这应该会让你的工作更轻松！

# ssis - 在 SSIS 中跟踪参数映射

> ID：12949437
> 
> 赞同：1
> 
> 时间：2012-10-18T07:34:33.083
> 
> 标签：ssis

在 SSIS 项目中，我知道如何设置一个变量来保存连接管理器的连接字符串 - 但我该如何走另一条路呢？即 - 我有一个现有的 SSIS 包，并想找出为特定连接管理器提供连接字符串的变量的名称。

我可以找到有关如何设置它的大量参考资料，并且确实希望转到 Connection manager>Properties>Expressions 会告诉我，但事实并非如此。我确实设法通过转到包配置管理器找到它，选择合理命名的参数，编辑它们，转到向导的第二个对话框以找到导出的属性名称。这不可能是唯一的方法，当然？

问候，斯图尔特

编辑 - 这是在 Visual Studio 2008 中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:59:39.413

首先，获取[BIDSHelper](http://bidshelper.codeplex.com/)，它是 Visual Studio 的免费插件，至少它有助于识别元素何时应用了表达式和配置。一个会有青色高光，另一个是紫红色，是的，一个物体可以同时拥有。

您描述的第一个场景，查看属性、表达式并确定表达式的使用。其他对象，您可能需要查看“表达式”选项卡。

配置的工作方式不同。您可以使用环境变量、注册表值、父包值、XML 文件或 SQL Server 表。前三个提供配置值和配置项（变量、连接管理器等）之间的 1:1 映射。XML 和 SQL Server 可以配置很多项。应用的订单配置很重要，因为您可以有 5 个配置条目，并且每个配置条目都使用不同的值修改相同的设置。2005 和 2008 应用配置的方式也有所不同，因此请查看[了解集成服务如何应用配置](http://msdn.microsoft.com/en-us/library/cc671625.aspx)

加载包时，BIDS 将指示它尝试加载的配置（查看您的输出窗口）。除了 BIDS 突出显示和那些消息之外，这些消息是您存在和正在应用配置的其他线索。这也是您检测丢失配置的机会（我希望找到配置 X 但没有找到它 = 配置资源不存在）或（我希望配置属性 X 但找不到它 = 正在配置的东西不存在存在）

我发现最好的方法是定义一个环境中的所有应用程序都使用的一组通用配置（销售连接、仓库连接），并使用一致的配置命名方法。然后，我们为项目级别的事物使用自定义配置（InsuranceProcessing 包的输入和输出路径将适用于所有包，但对于销售将不同），然后是第三组特定于包的配置。我们为此使用 SQL Server 表，因为它使检查值比通过大量丑陋的 XML 更容易。

很多信息，但没有什么能直接回答你的问题。对于那个很抱歉。您也许可以检查对象模型并查看已配置的内容，但这很难看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:11:09.587

感谢上面的答案，我意识到它不是一个变量，而是一个配置。一旦明白这一点，更多的谷歌搜索导致解释了为什么包配置管理器中的目标对象是空白的（可能有多个）。

答案在配置数据库中；PackagePath 条目包含 \Package.Connections[connection manager name].Properties[ConnectionString]，因此要找出特定映射的来源，请使用类似这样的内容。

```
 SELECT TOP 1000 [ConfigurationFilter]
  ,[ConfiguredValue]
  ,[PackagePath]
  ,[ConfiguredValueType] 
```

FROM [Database].[dbo].[Configurations_table] where ConfiguredValue like '%object in which you areinterested%'

（不知道为什么所有这些都没有进入代码块）。

我仍然认为它应该更容易，但我希望这对其他人有帮助。

问候，斯图尔特

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T20:05:34.883

比林克的好答案。除了那个答案（或者更确切地说是充实“检查对象模型并查看配置的内容”部分），我在任何包的开头运行一个脚本，将所有连接管理器连接字符串的值添加到输出窗口，后跟每个管理器的连接字符串表达式。此外，它循环遍历脚本中指定使用的所有变量并输出值。在生产中不太有用，但在开发/测试时非常有用。

只需将脚本任务添加到包流的开头，指定要调试的任何变量，然后将以下代码添加到脚本中：

```
 'Report number of connections
    Dts.Events.FireInformation(99, "debug", "number of connections = " & Dts.Connections.Count, "", 0, True)

    'Loop through connection collection
    For Each cConnection As Microsoft.SqlServer.Dts.Runtime.ConnectionManager In Dts.Connections

        'Report connection string value
        Try
            Dts.Events.FireInformation(99, "debug", "connection """ & cConnection.Name & """ value = " & cConnection.ConnectionString, "", 0, True)
        Catch
        End Try

        'Report connection string expression
        Try
            Dts.Events.FireInformation(99, "debug", "connection """ & cConnection.Name & """ constring  expression = " & cConnection.GetExpression("ConnectionString"), "", 0, True)
        Catch
        End Try

    Next

    'Report number of variables
    Dts.Events.FireInformation(99, "debug", "Number of Variables = " & Dts.Variables.Count, "", 0, True)

    'Loop through variables collection
    For Each vVariable As Microsoft.SqlServer.Dts.Runtime.Variable In Dts.Variables

        'Report variable value
        Try
            Dts.Events.FireInformation(99, "debug", "Variable """ & vVariable.Name & """ value = " & vVariable.Value, "", 0, True)
        Catch
        End Try

    Next 
```

# qt - QTreeView：如何通知项目扩展的开始/结束？

> ID：12949443
> 
> 赞同：1
> 
> 时间：2012-10-18T07:35:30.433
> 
> 标签：qt, signals, qtreeview

我有一个显示文件列表的 QtreeView（使用从 QFileSystemModel 派生的模型）。由于文件列表的构建需要很多时间（我必须读取每个文件的内容以确定文件是否可见）我想在分析过程中显示等待光标。等待光标必须在用户选择一个项目（目录）时开始，并且只要没有显示所有列表就一直停留。

为此，我做了很多尝试：

*   使用扩展信号。但这个信号与绘图无关。因此它几乎立即到达，
*   在我的模型的 data() 函数中管理光标。但在这种情况下，我有一个可怕的闪烁光标，
*   通过覆盖 painEvent 来管理光标。在这种情况下，我有一个小闪烁，光标最近出现
*   ...

所以，我的“解决方案”都不是完美的。因此，你有办法做我想做的事吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:01:03.710

还有一个想法，但我没有尝试：

尝试在*QTreeView::expanded()*信号之后在计时器中检查[QAbstractItemView::State 。](http://qt-project.org/doc/qt-4.8/qabstractitemview.html#State-enum)

# jsf - h:selectOneMenu 中的验证错误与转换器

> ID：12949444
> 
> 赞同：0
> 
> 时间：2012-10-18T07:35:34.643
> 
> 标签：jsf

以下代码：

```
<h:selectOneMenu id="discountCode" value="#{customerMBean.details.discountcode}"   
     title="DiscountCode" required="true" requiredMessage="The DiscountCode      field is required."  
     converter="#{customerMBean.discountCodeConverter}">   
     <f:selectItems value="#{customerMBean.allDiscountCodes}"/> 
</h:selectOneMenu>
<h:commandButton id="back" value="Back" action="#{customerMBean.list}"/>  
<h:commandButton id="update" value="Update" action="#{customerMBean.update}"/> 
```

无论单击的按钮如何，都会显示以下错误：

> j_idt6:discountCode：验证错误。

```
public Converter getDiscountCodeConverter() {  
return discountCodeConverter;  
}

private Converter discountCodeConverter = new Converter() {  

@Override  
public Object getAsObject(FacesContext context, UIComponent component, String value) {  
    return new ConverterException("On verra la conversion String->Objet plus tard...");  
}  
    @Override  
   public String getAsString(FacesContext context, UIComponent component, Object value)     {  
    DiscountCode dc = (DiscountCode) value;  
    return dc.getDiscountcode()+" : "+dc.getRate()+"%";   
} 
}; 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:44:24.127

在 中使用自定义转换器时`h:selectOneMenu`，您应该始终覆盖所`equals()`涉及对象的方法。

**也可以看看**

*   [使用自定义转换器时出现 JSF 验证错误](https://stackoverflow.com/questions/3762070/jsf-validation-error-while-using-custom-converter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:43:51.520

使用 < **h:message** /> 标签它将显示验证错误并在单击按钮时更新它，或者您可以使用自动更新。

据我说： -

为什么你的按钮不起作用**？**因为每次单击提交按钮时，它都会向您显示验证错误，但您没有使用，这就是它在屏幕上不可见的原因。

在后退按钮上使用**immediate=true**它将跳过验证阶段。

# time - 从 HTML sbmitted 时间获取本地 UTC 时间

> ID：12949447
> 
> 赞同：0
> 
> 时间：2012-10-18T07:35:46.347
> 
> 标签：time, utc, unix-timestamp

我有一个包含日期和时间字段的 HTML 表单。我假设当用户输入日期/时间时，他们是在本地时间这样做的，但是当我将它存储在数据库中时，我需要它在 UTC 中，然后在显示它时我需要将其调整为观众时间.
我可以从服务器知道客户端时区吗（我正在使用 PHP 和 Apache，但将来可能会使用 IIS，所以如果可能的话，我宁愿不依赖 Apache 的行为）？或者我可以用 Javascript 在客户端上进行 UTC <-> 本地转换吗？

示例：UTC+1 时区的用户提交`2012-10-18 01:30`. 这应该存储为`2012-10-18 00:30:00`（无论是什么）的时间戳。然后，如果使用本地 DST 的 UTC-5 客户端查看记录，他们应该会看到`2012-10-17 20:30`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:47:52.750

```
<html>
<head>
<script>
function test()
{
    var d = new Date(2012, 6, 13, 12, 0, 0, 0);
    console.log(d);
    var hours = d.getUTCHours();
    console.log(hours);
}
</script>
</head>
<body>
<input type="button" onclick="test()" value="test"/>
</body>
</html> 
```

您输入 d 作为本地时间，并使用 getUTCHours()、getUTCDates() 等获取 UTC 时间......然后将 UTC 时间发送回服务器。

# blackberry - 知道设备何时完全打开

> ID：12949451
> 
> 赞同：2
> 
> 时间：2012-10-18T07:35:54.737
> 
> 标签：blackberry, java-me, blackberry-jde

我正在开发一个应用程序，我想在其中集成 SQL 数据库。到目前为止，我的代码工作正常。我让应用程序在启动时自动运行，并立即检查 SDCard 是否存在。如果存在，我将在 SDCard 上创建数据库，如果没有，我将在设备上创建它。

问题是当应用程序自动运行时，它会在设备找到 SDCard 之前启动，所以我总是无法检测到 SDCard 是否存在。

我应该使用什么监听器来知道设备已完全打开？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T08:48:34.160

[`SystemListener`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/system/SystemListener.html)将完成这项工作。我通常是这样做的：

```
 public class MyApp extends Application implements SystemListener {

        public static void main(String[] args){
            MyApp app = new MyApp();
            if (ApplicationManager.getApplicationManager().inStartup()) {
                app.addSystemListener(app);
                //wait for powerUp callback
            } else {
                app.startup();
            }
        }

        public void powerUp() {
            removeSystemListener(this);
            startup();      
        }

        private void startup(){
            //Perform initialization here, most typically show first screen and stuff.
        }

        // Remaining SystemListener callbacks not shown for brevity
    } 
```

# java - 按列表过滤 - Objectify

> ID：12949452
> 
> 赞同：0
> 
> 时间：2012-10-18T07:35:55.533
> 
> 标签：java, google-app-engine, objectify

此查询有效，该`fullPath`字段是`List<String>`：

```
 KeyLookup lookup 
        = ofy().load().type(KeyLookup.class).filter("fullPath IN", key.getFullPath()).first().get(); 
```

上面的查询还获取在as with中具有相同`String`元素的实体，但是它还获取列表中具有相同字符串的那些实体，并在列表中获取**更多**字符串。`List<String>``key.getFullPath()`

 **如何仅过滤列表中具有完全相同元素的实体，例如*“不多不少”*

**更新：**

例如

一个实体（比如 Object1）字段 fullPath 包含：

*   “一”
*   “二”
*   “三”

另一个实体（比如 Object2）字段 fullPath 包含：

*   “一”
*   “二”
*   “三”
*   “四”

key.getFullPath 包含：

*   “一”
*   “二”
*   “三”
*   “四”

然后上面的查询将返回`Object1`，`Object2`但是我需要的是它只返回`Object2`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T15:51:44.920

假设您想要**完全**匹配（没有更多的值，也没有更少的值），没有“本机数据存储”方式来实现这一点。IN 给你一个*or*操作，多次调用 filter() 给你一个*and*操作——它们都不是完全匹配的。但是，有办法。

选项 1：将列表加入单个索引属性

将列表中的所有项目连接成单个值并将其存储为合成索引属性。也许您需要根据订单或大小写的重要性对其进行规范化。查询该属性，而不是列表属性。

这仅在保证连接值小于 500 个字符时才有效。似乎不太可能。相反，您可能想要...

选项 2：对列表的哈希进行索引和查询

1.  创建一个合成属性，其中包含所有列表值的哈希，例如`fullPathHash`. 它不需要加密安全；MD5 没问题。
2.  每当您更新列表属性时，都会更新哈希。
3.  索引`fullPathHash`；您不需要索引列表属性。
4.  当您查询项目列表时，请查询哈希。由于可能存在冲突，请进行查询后检查以确保列表相等并跳过任何误报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:33:33.453

这是意料之中的，因为在比较查询中的两个列表时，实际上发生的事情是数据存储区为过滤器列表中的每个值触发多个查询。因此，当您查询 时`Object2`，将对 中的每个值执行四个查询`Object2`。因为，`Object1`是 的“子集” `Object2`，它也匹配查询。这就是您同时获得`Object1`和的原因`Object2`。

您可以修改查询以使用`AND`运算符以强制精确匹配。因此，您可以拥有以下内容：

```
Query<KeyLookup> q = ofy().load().type(KeyLookup.class);
for (String f : key.getFullPath()) {
    q = q.filter("fullPath", f);
}
KeyLookup lookup = q.first().get(); 
```

希望这可以帮助。**

# java - 如何从 Java 中执行 HTTP 清除？

> ID：12949457
> 
> 赞同：7
> 
> 时间：2012-10-18T07:36:07.023
> 
> 标签：java, httpurlconnection, varnish, http-method

我正在尝试使用 HttpUrlConnection 执行 PURGE，如下所示：

```
private void callVarnish(URL url) {
    HttpURLConnection conn = null;

    try {
        conn = (HttpURLConnection) url.openConnection();
        conn.setRequestMethod(PURGE_METHOD);
        conn.setDoOutput(true);
        conn.setInstanceFollowRedirects(true);
        conn.setRequestProperty("Host", "www.somehost.com");
        conn.connect();
        System.out.print(conn.getResponseCode() + " " + conn.getResponseMessage());
     }
     catch (Exception e) {
         log.error("Could not call varnish: " + e);
     } finally {
         if (conn != null) {
             conn.disconnect();
         }
     }
} 
```

但我得到：

```
08:56:31,813 ERROR [VarnishHandler] Could not call varnish: java.net.ProtocolException: Invalid HTTP method: PURGE 
```

使用 curl 没有问题：

curl -I -X PURGE -H "主机：www.somehost.com" someurl

```
HTTP/1.1 404 Not in cache.
Server: Varnish
Content-Type: text/html; charset=utf-8
Retry-After: 5
Content-Length: 401
Accept-Ranges: bytes
Date: Thu, 18 Oct 2012 06:40:19 GMT
X-Varnish: 1611365598
Age: 0
Via: 1.1 varnish
Connection: close
X-Cache: MISS 
```

那么我该怎么做呢？我需要从 Java 卷曲还是有其他可以使用的库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T07:44:04.233

您可以使用 Apache 的 HttpClient 库：[http ://hc.apache.org/httpcomponents-client-ga/](http://hc.apache.org/httpcomponents-client-ga/)

您可以使用[BasicHttpRequest或实现您自己的扩展](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/message/BasicHttpRequest.html)[HttpRequestBase](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/methods/HttpRequestBase.html)的 HttpPurge 类。

您可以在此处找到快速入门指南：http: [//hc.apache.org/httpcomponents-client-ga/quickstart.html](http://hc.apache.org/httpcomponents-client-ga/quickstart.html)

例子：

```
DefaultHttpClient httpclient = new DefaultHttpClient();
BasicHttpRequest httpPurge = new BasicHttpRequest("PURGE", "www.somehost.com") 
HttpResponse response = httpclient.execute(httpPurge); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T08:12:35.010

**使用 org.apache.httpcomponents 4.2.1：**

班级：

```
import org.apache.http.client.methods.HttpRequestBase;

import java.net.URI;

public class HttpPurge extends HttpRequestBase {

    public final static String METHOD_NAME = "PURGE";

    public HttpPurge() {
        super();
    }

    @Override
    public String getMethod() {
        return METHOD_NAME;  //To change body of implemented methods use File | Settings | File Templates.
    }

    public HttpPurge(final String uri) {
        super();
        setURI(URI.create(uri));
    }

    public String getName() {
        return "PURGE";
    }
} 
```

来电：

```
import org.apache.http.Header;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicHeader;
import org.apache.http.util.EntityUtils;
import test.HttpPurge

private void callVarnish(URL url) {

        DefaultHttpClient httpclient = new DefaultHttpClient();
        HttpPurge httpPurge = new HttpPurge(url.toString());
        Header header = new BasicHeader("Host", "www.somewhere.se");
        httpPurge.setHeader(header);
        try {
            HttpResponse response = httpclient.execute(httpPurge);
            System.out.print("-------------------------------------");
            System.out.println(response.getStatusLine());
            System.out.print("-------------------------------------");
            HttpEntity entity = response.getEntity();
            // If the response does not enclose an entity, there is no need
            // to worry about connection release
            if (entity != null) {
                // do something useful with the response body
                // and ensure it is fully consumed
                EntityUtils.consume(entity);
            }
        } catch (IOException ex) {

            // In case of an IOException the connection will be released
            // back to the connection manager automatically
        } catch (RuntimeException ex) {

            // In case of an unexpected exception you may want to abort
            // the HTTP request in order to shut down the underlying
            // connection and release it back to the connection manager.
            httpPurge.abort();
        }
} 
```

使用已弃用的 org.apache.commons.httpclient.HttpMethodBase：

班级：

```
import org.apache.commons.httpclient.HttpMethodBase;

public class PurgeMethod extends HttpMethodBase {

    public PurgeMethod() {
        super();
        setFollowRedirects(true);
    }

    public PurgeMethod(String url) {
        super(url);
        setFollowRedirects(true);
    }

    public String getName() {
        return "PURGE";
    }
} 
```

来电：

```
import org.apache.commons.httpclient.Header;
import org.apache.commons.httpclient.HttpClient;
import org.apache.commons.httpclient.HttpMethod;

private void callVarnish(URL url) {
    HttpClient client = new HttpClient();
    HttpMethod method = new PurgeMethod(url.toString());

try {
    int status = 0;
    status = client.executeMethod(method);

    log.debug(status);
} catch (Exception e) {
    // something
} finally {
    method.releaseConnection();
} 
```

}

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-26T14:06:50.183

使用 HttpComponents，API 发生了变化。当前版本的 uldall 答案如下：

```
HttpHost host = new HttpHost(hostname, port);
HttpClient httpclient = HttpClientBuilder.create().build();
BasicHttpRequest purgeRequest = new BasicHttpRequest("PURGE", "/some/url");
HttpResponse response = httpclient.execute(host, purgeRequest); 
```

# iphone - 将非拉丁字符替换为拉丁字符，如电话簿应用程序

> ID：12949458
> 
> 赞同：0
> 
> 时间：2012-10-18T07:36:08.867
> 
> 标签：iphone, ios, unicode, casting, char

我有一个电话簿应用程序，通过比较条目的第一个字母来生成部分标题的标题。

索引是预定义的，所以我希望从 AZ 和数字 # 分配字母。

问题是在许多语言中有许多带有重音符号的字母，包括 ü、İ、ç 等。在我的方法中，由于这些字符不属于 AZ 范围，因此它们被分配给 # 这是不希望的。

原生 iOS 电话簿应用程序将例如 ü 分配给 U 等等。有没有一种简单的方法可以在不定义一组字符的情况下进行这种转换？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T04:07:56.153

查看 Unicode 规范化。您可能需要 NFD 和足够数据提取的某种组合。如果你从 Unicode 看[这个文件](http://www.unicode.org/Public/reconstructed/1.0.1/UnicodeData.txt)，你会看到类似

> 00E9;拉丁文小写字母 E ACUTE;Ll;0;L;0065 0301;;;;N;;;00C9;;00C9

其中`00E9`，即 'é'，被分解为`0065 0301`。你拿起`0065`（a），丢弃`0301`（´）。这个文件应该让你很好地开始。Objective-C/iOS 中可能有等效的功能，但我不知道从哪里开始......

# mysql - 带有变量列表的mysql循环

> ID：12949462
> 
> 赞同：0
> 
> 时间：2012-10-18T07:36:32.503
> 
> 标签：mysql

```
update [database].[table] 
set 
    [fieldalpha] = REPLACE(fieldAlpha,
        '/c/', '/c/[variable]')
where [fieldbravo] like "[variable]%"; 
```

所以这段代码可以正常工作并完成我需要它做的事情。但是，我有大量变量需要应用于大约 50k 条记录。有没有办法用 [variable] 的替换列表遍历这段代码？

# extjs - 将数据库值加载到组合框 - EXTJS

> ID：12949463
> 
> 赞同：3
> 
> 时间：2012-10-18T07:36:36.543
> 
> 标签：extjs, combobox, jsonstore

我需要将 db 值加载到组合框。我不知道为什么值没有加载到组合框中。通过 firebug，console.log 值被打印出来。这是我的组合框代码，

```
var groups = new Ext.data.JsonStore({
    fields: [{
        id: 'id'
    }, {
        name: 'name'
    }],
    root: 'rows',
    autoDestroy: true,
    autoLoad: true,
    proxy: new Ext.data.HttpProxy({
        url: GO.settings.modules.schedule.url + 'groups.php',
    }),
    reader: {
        type: 'json',
        root: 'rows'
    },
    listeners: {
        load: function (obj, records) {
            Ext.each(records, function (rec) {
                console.log(rec.get('name'));
            });
        }
    }
});

var taskGroup = new Ext.form.ComboBox({
    name: 'Group',
    hiddenName: 'group',
    triggerAction: 'all',
    editable: false,
    fieldLabel: 'Group',
    mode: 'local',
    autoLoad: true,
    displayField: 'text',
    store: groups,
    columns: [{
        dataIndex: 'name'
    }],
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:06:24.527

您已经设置了 displayField，但还需要 valueField：

```
valueField: 'id' 
```

# jquery - 动态更改jquery属性值中的文本

> ID：12949470
> 
> 赞同：0
> 
> 时间：2012-10-18T07:36:51.510
> 
> 标签：jquery, replace

我有以下 jQuery 代码：

```
var fnVal = $(_placeHolder[0].parentElement.children[0]).attr('onclick'); 
```

在调试时我可以看到`fnVal`as

```
function onclick(event) { 
    javascript:DisplayData($('#divexpand')[0],'true'); 
} 
```

我希望将功能替换`true`为.`DisplayData``false`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T07:41:07.947

只需为其分配一个新函数，它将替换旧函数（在此也不需要 jQuery）：

```
_placeHolder[0].parentElement.children[0]).onclick = function() {
    DisplayData(document.getElementById('divexpand'),'false'); 
}; 
```

# android - 从 Android 中的 ListView 过滤项目时出现什么问题？

> ID：12949475
> 
> 赞同：-1
> 
> 时间：2012-10-18T07:37:03.220
> 
> 标签：android, listview, filtering

我有一个使用 BaseAdapter 的自定义 listView。在其中显示电话簿联系人。在此 listView 中，两个文本框相应地显示名称和数字。现在我正在尝试在 listView 的搜索框顶部添加功能但我遇到了一些问题我不知道当我在 Eclipse 中看到我的 logcat 窗口时会发生什么然后我可以清楚地看到过滤后的列表但设备 listView 不是再改变。请按照我的代码如下：

```
 package com.leaning.him;

 public class ForHimActivity extends Activity {

private ListView contactList = null;
private LayoutInflater mInflater;
private String phoneNo;
private String contact;
private ContentResolver cr;
private Cursor cursor;
public ArrayList<String> aarr = new ArrayList<String>();
public ArrayList<String> aarr2 = new ArrayList<String>();
private static String ClickedNum;
private static boolean check;
private DBAdapter db;
CustomkListAdapter adapter;
EditText searchBar;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    searchBar = (EditText)findViewById(R.id.serchEditBox);
    aarr.clear();
    aarr2.clear();

    adapter = new CustomkListAdapter(ForHimActivity.this);
    contactList = (ListView)findViewById(R.id.facebookList);

    contactList.setAdapter(adapter);

    TextWatcher searchTextWatcher  = new TextWatcher() {

        public void onTextChanged(CharSequence s, int arg1, int arg2, int arg3) {

            Log.v("","This is what you entred : "+s.toString());
            adapter.getFilter().filter(s);
            adapter.notifyDataSetChanged();
            contactList.setAdapter(adapter);
        }

        public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                int arg3) {
            // TODO Auto-generated method stub
        }

        public void afterTextChanged(Editable arg0) {
            // TODO Auto-generated method stub
        }
    };

    searchBar.addTextChangedListener(searchTextWatcher);
     }

  public class CustomkListAdapter extends BaseAdapter {

    ArrayList<String> arrayList;
    ArrayList<String> originallist;
    public CustomkListAdapter(Context context){

    //  Log.v("","This is context of BaseAdapter Class : "+context);
        mInflater = LayoutInflater.from(context);
        arrayList = new ArrayList<String>();
        originallist = new ArrayList<String>();
        originallist = aarr;
        cr = context.getContentResolver();
        cursor = cr.query(
                ContactsContract.Contacts.CONTENT_URI,
                null,
                ContactsContract.Contacts.IN_VISIBLE_GROUP + "=1",
                null,
                null);

        db = new DBAdapter(context);

    }

    public int getCount() 
    {
        return cursor.getCount();
      //            return 5;
    }

    public Object getItem(int position) 
    {
        return aarr.get(position);
    }

    public long getItemId(int position) 
    {
        return position;
    }

    public void getContacts(){

         while(cursor.moveToNext()){

                int nameFiledColumnIndex = cursor.getColumnIndex(
                        ContactsContract.Contacts.DISPLAY_NAME);
                String id = cursor.getString(
                                                                                                     cursor.getColumnIndex(ContactsContract.Contacts._ID));
                Cursor pCur = cr.query(
                     ContactsContract.CommonDataKinds.Phone.CONTENT_URI, 
                     null, 
                     ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?", 
                     new String[]{id}, null);   
                while (pCur.moveToNext()) {
                 phoneNo = pCur.getString(pCur.getColumnIndex(
                         ContactsContract.CommonDataKinds.Phone.NUMBER));
                }//end inner while
                contact = cursor.getString(nameFiledColumnIndex);

                 aarr.add(contact);
                aarr2.add(phoneNo);

                //Log.v("","Checkd this : "+aarr);
         }

    }

    public View getView(final int position, View convertView, ViewGroup parentView) 
    {
        int i = 0;
        ViewHolder holder = null;   

        if(convertView == null)
        {
        //  Log.v("","position : "+position);

        }//end if
        else
        {
            holder = (ViewHolder) convertView.getTag();
        }//end else

        holder = new ViewHolder();
        convertView = mInflater.inflate(R.layout.twitter_row, null);
        holder.txtName = (TextView) convertView.findViewById(R.id.txtName);
        holder.txtnumber = (TextView) convertView.findViewById(R.id.txtnumber);
        holder.chkBox = (CheckBox) convertView.findViewById(R.id.chkAdd);
        if(cursor != null){

        getContacts();

         db.open();
         Cursor c = db.getAllData();
         if(c.moveToFirst()){
             do {
                                                                                                                                                                 if(aarr2.get(position).replace("-",                                                                                                  "").equals(c.getString(2))){
                    holder.chkBox.setChecked(true);
                 }
            } while (c.moveToNext());
         }

         db.close();
         c.close();

        }else
        {
            //Log.v("","Not Found any contacts....");
        }   

         holder.txtName.setText(aarr.get(position));
         holder.txtnumber.setText(aarr2.get(position));
        // Log.v("","Now heck : "+aarr.get(i));

         i++;
         if(position == 1){
             for(int j=0;j<100;j++){
                //
                // Log.v("","Contacts :"+aarr.get(i));
             }
         }

         holder.chkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            public void onCheckedChanged(CompoundButton buton, boolean itemChked) {
                check = itemChked;
                ClickedNum = aarr2.get(position).replace("-", "");

                if(check == true){
                    //Log.v("","This will save : "+ClickedNum.replace("-", ""));
                    db.open();
                    db.insert(ClickedNum, check);
                    db.close();

                }else if (check == false){
                    db.open();
                    db.deleteFromNum(ClickedNum);
                    db.close();
                }
            }
        });
         cursor.close();

    //  Log.v("","Latest getView() : "+aarr.get(position));
        return convertView;

    }
    public class ViewHolder 
    {
        public TextView txtName, txtnumber ;
        CheckBox chkBox;
        Button btn;
    }

    public Filter getFilter() {

        Filter filter = new Filter(){
            @Override
            protected void publishResults(CharSequence constraint, FilterResults results) {
                Log.v("","from pubishResult()");
                arrayList = (ArrayList<String>) results.values;
                Log.v("","This is array lsit from publishResults() : "+arrayList);
                notifyDataSetChanged();
            }

            @Override
            protected FilterResults performFiltering(CharSequence constraint) {
                Log.v("","from performFiltering()");

                FilterResults results = new FilterResults();
                List<String> FilteredArrList = new ArrayList<String>();

                if (originallist == null )    {
                    originallist = new ArrayList<String>(arrayList);

                }

                 if (constraint == null || constraint.length() == 0) {
                        results.count = originallist.size();

                        results.values = originallist;
                 }
                 else{
                     constraint = constraint.toString();
                        for (int i = 0; i < originallist.size(); i++) {
                            String data = originallist.get(i);

                            if (data.toLowerCase().startsWith(constraint.toString()))   {
                                FilteredArrList.add(data);
                            }
                        }
                        results.count = FilteredArrList.size();
                        results.values = FilteredArrList;
                 }
                 Log.v("","This is result : "+results);
                  return results;
            }
        };
        Log.v("","This is filter : "+filter.toString());
        return filter;
    }
} 
```

}

当我从edittex按“A”时，以下是我的日志catwindow::

```
10-18 12:57:41.273: I/InputDispatcher(1483): Delivering touch to current input target:        action: 1, channel '407b51d8 com.android.settings/com.android.settings.WirelessSettings (server)'
10-18 12:57:41.406: I/ActivityManager(1483): Starting: Intent { act=android.intent.action.MAIN cmp=com.android.settings/.TetherSettings } from pid 6709
10-18 12:57:41.414: W/ActivityManager(1483): Trying to launch com.android.settings/.TetherSettings
10-18 12:57:41.429: I/ApplicationPackageManager(6709): cscCountry is not German : INU
10-18 12:57:41.445: I/webclipboard(6709): clipservice: android.sec.clipboard.ClipboardExManager@40571208
10-18 12:57:41.546: D/WML_SISO(6709): InitPasteboardJni
10-18 12:57:41.671: D/dalvikvm(6709): GC_CONCURRENT freed 109K, 45% free 3116K/5639K, external 647K/1031K, paused 3ms+4ms
10-18 12:57:41.695: I/ActivityManager(1483): Displayed com.android.settings/.TetherSettings: +282ms
10-18 12:57:41.921: E/StatusBarPolicy(1535): ecio: 31
10-18 12:57:41.921: E/StatusBarPolicy(1535): iconLevel: 4
10-18 12:57:42.187: I/InputReader(1483): dispatchTouch::touch event's action is 0
10-18 12:57:42.187: I/InputDispatcher(1483): Delivering touch to current input target: action: 0, channel '407cbfc0 com.android.settings/com.android.settings.TetherSettings (server)'
10-18 12:57:42.203: I/InputReader(1483): dispatchTouch::touch event's action is 1
10-18 12:57:42.203: I/InputDispatcher(1483): Delivering touch to current input target: action: 1, channel '407cbfc0 com.android.settings/com.android.settings.TetherSettings (server)'
10-18 12:57:42.335: D/Tethering(1483): Tethering usb0
10-18 12:57:42.335: D/Tethering(1483): [ActiveSync] internet sharing is NOT blocked 
```

请指导我哪里出错............我希望我上面描述的内容足以理解我的问题。

# php - 通过谷歌地图获取我当前位置10公里半径内所有位置的纬度和经度（使用PHP）

> ID：12949476
> 
> 赞同：7
> 
> 时间：2012-10-18T07:37:08.013
> 
> 标签：php, google-maps, google-maps-api-3

我是谷歌地图的新手。我有一张表，其中列出了所有位置（超级商店的位置）及其纬度和经度。

现在我想知道这些超级商店在我当前位置半径 10 公里内的所有可能位置（可能是纬度和经度）。

我不知道如何使用 Google 地图（在 php 代码中）来做到这一点。我应该使用什么谷歌地图 API？任何建议，项目代码，信息将对我有所帮助

提前致谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-18T08:57:22.843

请参阅[使用 Google 地图和 MySQL 进行半径搜索](http://spinczyk.net/blog/2009/10/04/radius-search-with-google-maps-and-mysql/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-10-15T18:35:02.887

您可以使用Mysql的以下查询来获取指定里程内的所有商店

```
select * from stores where lat!='' and lng!='' and ( 3959 * acos( cos( radians(" . $centerpoints['lat'] . ") ) * cos( radians( lat ) ) * cos( radians( lng ) - radians(" . $centerpoints['lng'] . ") ) + sin( radians(" . $centerpoints['lat'] . ") ) * sin( radians( lat ) ) ) ) < " . $distanceInMile 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-18T07:53:07.727

[https://developers.google.com/maps/articles/phpsqlsearch_v3](https://developers.google.com/maps/articles/phpsqlsearch_v3) 看看上面。应该给你一个好主意。

> 要在标记表中查找位于给定纬度/经度的某个半径距离内的位置，您可以使用基于 Haversine 公式的 SELECT 语句。Haversine 公式通常用于计算球体上两对坐标之间的大圆距离。Wikipedia 给出了深入的数学解释，并且在 Movable Type 的网站上对与编程相关的公式进行了很好的讨论。
> 
> 下面的 SQL 语句将找到距离 37, -122 坐标 25 英里半径范围内最近的 20 个位置。它根据该行的纬度/经度和目标纬度/经度计算距离，然后仅询问距离值小于 25 的行，按距离对整个查询进行排序，并将其限制为 20 个结果。要按公里而不是英里搜索，请将 3959 替换为 6371。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-16T17:35:05.083

```
function getLatLong(lat, lng, radius) {
  const earth = 6371 // earth radius in miles
  const maxLat = ((lat + Math.PI / 2) * 180) / Math.PI
  const minLat = ((lat - Math.PI / 2) * 180) / Math.PI
  const maxLng = ((lng + (Math.PI * radius) / earth) * 180) / Math.PI
  const minLng = ((lng - (Math.PI * radius) / earth) * 180) / Math.PI
  return {
    maxLat: maxLat,
    minLat: minLat,
    maxLng: maxLng,
    minLng: minLng,
  }
} 
```

# asp.net-mvc-3 - 如何在我的视图中使用 Viewbag

> ID：12949479
> 
> 赞同：0
> 
> 时间：2012-10-18T07:37:20.090
> 
> 标签：asp.net-mvc-3

我不明白，我的控制器中有我的：

```
[HttpGet]
public ActionResult Detail(int userId)
{
  var user = ZincService.GetUserForId(userId);
  if (user != null)
  { 
      ViewBag.user = userId;
      ViewBag.email = user.Email;
      ViewBag.title = user.JobTitle;
      ViewBag.node = user.Node;
  }
  return View(user);
} 
```

然后是我的观点，Detail.aspx

```
<div id="user-details-view">
<div>
  Title:
</div>
<div>
   <%: Model.JobTitle %>
   <%: Model.News %>
   <%: Model.Node %>
</div>
<div>
   <%: Html.ActionLink("Change Email Address", "ChangeEmailAddress", new { @id = Model.UserId })%>
</div>
</div> 
```

当我运行我的应用程序时，我收到一个错误：

无法找到该资源。说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。

请求的 URL：/Areas/Admin/Views/User/Detail.aspx

我不明白？是因为语法错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T07:53:41.860

以前的帖子在逻辑上是正确的，但是您在控制器中分配了不同的 viewbag 名称。它应该是：

```
<div id="user-details-view">
    <div>
       Title:
    </div>
    <div>
        <%: ViewBag.email %>
        <%: ViewBag.title %>
        <%: ViewBag.node %>
    </div>
    <div>
        <%: Html.ActionLink("Change Email Address", "ChangeEmailAddress", new { @id = ViewBag.user })%>
    </div>
</div> 
```

希望能帮助到你..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T07:39:07.717

应该是这样的

```
 <%: ViewBag.JobTitle %>
   <%: ViewBag.News %>
   <%: ViewBag.Node %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T07:39:31.190

替换`Model.`为`ViewBag.`

```
 <%: ViewBag.title %>
   <%: ViewBag.email %>
   <%: ViewBag.node %> 
```

并改变这个

```
<%: Html.ActionLink("Change Email Address", "ChangeEmailAddress", new { id = ViewBag.user })%> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T08:05:50.283

您必须使用该语法：

```
<%: ViewBag.email %>
<%: ViewBag.title %>
<%: ViewBag.node %> 
```

但是如果你使用模型会更好：

```
public class UserInfo
{
    public int UserId { get; set; }
    public string Email { get; set; }
    public string Title { get; set; }
    public NodeType Node { get; set; }
}

[HttpGet]
public ActionResult Detail( int userId )
{
    var data = ZincService.GetUserForId( userId );
    var user = new UserInfo();
    if ( data != null )
    {
        user.UserId = userId;
        user.Email = data.Email;
        user.Title = data.JobTitle;
        user.Node = data.Node;
    }
    return View( user );
} 
```

在视图 (MVC3) 中使用 razor sintax：

```
@model UserInfo
<div id="user-details-view">
<div>
  Title:
</div>
<div>
   @Model.Title
   @Model.Node
</div>
<div>
   @Html.ActionLink("Change Email Address", "ChangeEmailAddress", new { @id = Model.UserId })
</div>
</div> 
```

# django - 如何在 django 模板中检查值的数据类型？

> ID：12949484
> 
> 赞同：0
> 
> 时间：2012-10-18T07:37:34.897
> 
> 标签：django, django-templates

我想在 django 模板中获取值的数据类型。我相信有一种方法，因为当您执行 `value|date:"Y-m-d"` django 模板时，您会知道该值是时间戳。django 是如何做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:27:40.827

你看到的 "|date" 被称为[模板过滤器](https://docs.djangoproject.com/en/dev/ref/templates/builtins/)，是 django 的内置函数

您可能想要创建一个您自己的（[方法](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)如下），它将某些内容作为输入并返回其数据类型。

但是，imo，这不是最佳实践，因为模板应该主要用于显示和格式化数据。如果您需要对类型进行评估，我建议您将其移动到视图中并最终在上下文中返回结果

# android - Android Google Cloud Messaging (GCM) 和不匹配的发件人 ID

> ID：12949487
> 
> 赞同：7
> 
> 时间：2012-10-18T07:37:54.083
> 
> 标签：android, google-cloud-messaging

我正在尝试在我的 android 应用程序中使用 GCM 服务。

为此，我使用了来自[http://developer.android.com/guide/google/gcm/gcm.html的 android 文档](http://developer.android.com/guide/google/gcm/gcm.html)

我使用发件人 ID 等创建了客户端注册过程，并创建了使用注册 ID 和发件人 ID 发送消息的服务器端应用程序。

当我通过 Eclipse 在手机中安装应用程序时，推送通知工作正常，所以我拥有的发件人 ID 是正确的。

然后，当我使用 Eclipse 导出 apk 文件并将其安装到手机中时，我收到 SenderId 错误的错误消息

```
MissmatchedSenderId 
```

任何人都知道我为什么会得到这个。

我已经阅读了这些主题：

[为什么我从 GCM 服务器端得到“MismatchSenderId”？](https://stackoverflow.com/questions/11313342/why-do-i-get-mismatchsenderid-from-gcm-server-side)

[使用 GCM 发送消息时，我不断收到响应“MismatchSenderId”](https://stackoverflow.com/questions/11307689/when-sending-messages-using-gcm-i-keep-getting-response-mismatchsenderid)

但在我的情况下奇怪的是，在将应用程序导出为 apk 之前一切正常，然后我遇到了这个问题。

任何想法都是受欢迎的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T09:00:14.073

我实际上遇到了同样的问题，并且研究了 10 多个小时。

我终于发现了问题！与服务器 API 密钥或浏览器 API 密钥或 SenderID 无关。问题是谷歌文档：

```
final String regId = GCMRegistrar.getRegistrationId(this);
if (regId.equals("")) {
  GCMRegistrar.register(this, SENDER_ID);
} else {
  Log.v(TAG, "Already registered");
} 
```

谷歌说你必须调用 getRegistrationId 函数，并且只有当 id 为空时才调用寄存器！这对我根本不起作用......当我这样做时，我总是在发送到这个 regId 时返回 MismatchSenderId。

我的解决方案是：总是打电话

```
GCMRegistrar.register(this, SENDER_ID); 
```

当函数

```
protected void onRegistered( Context c, String regId ) 
```

称为将 regId 保存在我的服务器数据库中。

如果我这样做，一切正常！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-18T19:10:33.000

GCM 提供的 SenderID 和 API 密钥的组合对于每个应用程序都是唯一的。

当我们在客户端更新我们的 senderID 但仍然使用与旧的 senderID 相关的 API 密钥时，我们遇到了 senderID 不匹配的问题。

更新服务器 API 密钥后，我们能够解决该问题。@schurtertom 的回答也很有帮助

# java - HTTP 状态 404 - 请求的路径无效

> ID：12949488
> 
> 赞同：2
> 
> 时间：2012-10-18T07:37:58.743
> 
> 标签：java, struts

我正在使用 struts1.2.9 开发应用程序，以下是我的文件夹结构。 ![在此处输入图像描述](../Images/ee2b24aa34fe81aa5f37c17feb9f1a1e.png)

一旦我登录到系统就可以了，我没有遇到任何问题，以下是主页。 ![在此处输入图像描述](../Images/12bec6216755ed37b88552f315a4db20.png)

当我点击左侧的菜单时，我得到以下异常，页面看起来像这样

```
HTTP Status 404 - Invalid path was requested 
```

![在此处输入图像描述](../Images/3c21a9cf6cf27ddfc3b89be95e3457bb.png)

我的菜单链接是这样的：`<a href=\"#\" target=\"workFrame\" onclick=\"getMenuRequest('DepartmentAction','goToHome')\">"Department"</a>`

这是javascript：

```
function getMenuRequest(actionName,methodName){
                       document.forms[0].action=actionName+".htm";
                       document.forms[0].method.value=methodName;
                       document.forms[0].submit();
                   } 
```

以下是我的动作类方法：

```
public ActionForward goToHome(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws Exception {
        //call method to verify Pagetoken
        forwardRequestTo = "departmentHome";
        return mapping.findForward(forwardRequestTo);
    } 
```

以下是struts-config.xml

```
<action path="/DepartmentAction" name="SecurEyesForm" type="com.secureyes.eswastha.struts.action.DepartmentAction" scope="request" parameter="method" validate="false">
            <forward name="departmentHome" path="/WEB-INF/Masters/DepartmentMaster.jsp"></forward>            
        </action> 
```

我正在使用框架集。

现在，当我单击菜单名称时，它给出了上述异常。

请帮忙。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:50:50.400

```
 document.forms[0].action=actionName+".htm"; 
```

应该改为

```
 document.forms[0].action=actionName+".do"; 
```

我假设 *.do 是 web.xml 中 ActionServlet 的 url 映射，
将 *.do 替换为您的扩展名（检查您的 web.xml）

# sql - 将一条记录中的字段复制到同一张表中的另一条记录中

> ID：12949493
> 
> 赞同：0
> 
> 时间：2012-10-18T07:38:28.137
> 
> 标签：sql, ms-access

我有一张包含许多课程详细信息的表格，其结构如下

```
CourseName
BasicInfo
CourseDetails
OtherInfo
AgeGroup
StartDate 
```

有许多课程具有相同的 CourseName 和 BasicInfo、CourseDetails 但单独的 Age 和 StartDate。每条记录的课程名称已存在，但 BasicInfo 和 CourseDetails 为空。

我创建了一个表单供用户输入详细信息。所以他们进入第一门课程并输入详细信息。然后我需要让他们能够将这两个字段复制到 CourseName 匹配的每个记录中。

对于我的生活，我无法弄清楚如何做到这一点。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:50:11.233

如果您多次重复相同的 basicInfo 和 courseDetails，则应考虑将该信息放在单独的表中。这样您就可以在每次选择课程时包含该信息，并且只需要在一个地方进行更改。我不知道你想要达到什么目标，但我认为以下结构应该让你朝着正确的方向前进：

```
Table: Course
id (PK)
courseName
basicInfo
courseDetails

Table: CourseDate
Id (PK)
startDate
courseId (FK) 
```

我希望这至少对您有所帮助。不确定我是否将您的问题解释为 100% 正确。

OP评论后编辑。

# gwt - 包装 GWT 对话框页脚

> ID：12949499
> 
> 赞同：0
> 
> 时间：2012-10-18T07:39:00.073
> 
> 标签：gwt

DialogBox 实际上是一组`<div>`元素。基本上有 TitleBar、MainContent 和 Footer。默认情况下，将元素添加到 DialogBox 会将它们放入主内容中。

我想要的是在页脚中加入一些东西。它基本上是这个div： `<div class="dialogBottomCenterInner">`

我在继承自 DialogBox 的类中创建了这个方法来包装页脚：

```
public HTMLPanel getFooter() {
    Element td = getCellElement(2, 1);
    td.setId("footer"); //html at this point = <div class="dialogBottomCenterInner" id="footer"></div>              
    HTMLPanel panel = HTMLPanel.wrap(td);
    return panel;
} 
```

不幸的是它失败`HTMLPanel.wrap(td);`了 java.lang.AssertionError: null

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:06:59.923

对话框中没有页脚。您引用的元素是对话框周围边框的一部分。

# android - 将列添加到现有表以供其他活动使用

> ID：12949510
> 
> 赞同：0
> 
> 时间：2012-10-18T07:39:58.213
> 
> 标签：android, sqlite

我用一个表打开了一个 SQLIte 数据库，它有数据列（字符串名称）和 id 列（长 id）。这个属于MainActivity。我想做的下一件事是在同一个表中打开附加列（字符串项目）和（int 价格）。此列将属于 ChildActivity。

我的两个问题是：

1.  选择哪种方式 - 再打开两列或将项目和价格值存储在一个 String[] 数组中，然后将其放在一列中。应该提到的是，我也需要单独计算的价格。据我了解，放入两个单独的列将更容易获得价格。但是列项目和列价格的 id 会有所不同吗？如果是的话，一切都会变得一团糟。如果我将两者都放在一个 String[] 数组中，是否很容易获取价格（int）值进行计算？

2.  由于我将通过选择名称并获取它们的 ID 从 MainActivity 访问 ChildActivity，所以当我在现有表中打开新列时，项目的 ID 和价格与我已有的不同？如果不是，那么这是否意味着我必须为项目和价格打开带有新列的新表，并且它们将有自己的 ID？

我是 android 环境和研究 SQLite 的新手，所以如果我的问题看起来很简单，请您为我提供最简单但有效的解决方案并宽容。

先感谢您。

桌子

```
 MainActivity   =====|====>            ChildActivity
                           |
Column id     Column names | Column (id ?)   Column item  Column (id ?)   Column price
1             A            |                 item_1                       100
2             B            |                 item_2                       300
3             C            |                 item_3                       500
4             D            |                 item_4                       200
5             E            |                 item_5                       100

Another way to do

TABLE

Column id     Column names   Column (id ?)   Column item and price    
1             A                              String[] item_and_price = {"item_1", 100}     
2             B                              String[] item_and_price = {"item_2", 300}     
3             C                              String[] item_and_price = {"item_3", 500}     
4             D                              String[] item_and_price = {"item_1", 200}     
5             E                              String[] item_and_price = {"item_1", 100} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:44:12.957

When started to work close with SQLite have found that njzk2 and Yaqub Ahmad are correct. string[] is not convenient to store or to query. ids belong to row and to solve my issue of having item and price chained I have to create new table with column for item and column for price, each entry will have id for both. Hope this information will help for beginners.

# c# - 确定 n X n 网格中的像素位置

> ID：12949512
> 
> 赞同：1
> 
> 时间：2012-10-18T07:40:06.383
> 
> 标签：c#, algorithm, silverlight, graphics

让我介绍一下我的项目：我的项目是关于在 n X n 网格中绘制对象。在银光中。

我做了什么？
[http://www.codeproject.com/Articles/174093/16x16-DotMatrix](http://www.codeproject.com/Articles/174093/16x16-DotMatrix)从此我在银光中绘制了网格。我必须在该网格上以任何字体类型绘制圆形或任何曲线或任何字母。我已经做到了。现在，我需要改变曲线通过的矩形的颜色。我使用了光栅扫描和 dda 曲线绘制算法............

请建议我最好的算法。

# iphone - 背景图片不适合屏幕

> ID：12949513
> 
> 赞同：2
> 
> 时间：2012-10-18T07:40:11.440
> 
> 标签：iphone, ios, uiimage, uibackgroundcolor

在我的应用程序中，我使用的背景图像大小为 320 x 480，但在屏幕末尾有些部分不可见，这是我的代码

```
self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"ibg.png"]]; 
```

请帮我解决以使图像屏幕适合.. ![在此处输入图像描述](../Images/9c6f833c7a4f65a9d8bcf802a1fa71f6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:47:03.467

如果不可见部分的高度等于 50 像素，那么您能否尝试使用将您的图像（ibg.png）调整为 320 x 430

```
- (UIImage *)imageWithImage:(UIImage *)image convertToSize:(CGSize)size {
    UIGraphicsBeginImageContext(size);
    [image drawInRect:CGRectMake(0, 0, size.width, size.height)];
    UIImage *destImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return destImage;
} 
```

之后

```
self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"ibg.png"]]; 
```

应该可以，希望对你有帮助，请给我反馈，谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:41:56.917

您的图像可能会被状态栏偏移，它在屏幕顶部占据 20 像素（或“点”）的空间。如果您的状态栏可见，则全屏背景图像的 Y 位置必须为 -20 而不是 0。

# xslt-1.0 - 如何在使用 xslt 最后出现特定元素后将一个 xml 数据复制到另一个

> ID：12949515
> 
> 赞同：2
> 
> 时间：2012-10-18T07:40:12.053
> 
> 标签：xslt-1.0

我有两个 xml 文件。我想将一个 xml 文件数据复制到最后一次出现的元素下的另一个文件中。以下是我拥有的 xml：

```
---------- xml-1---------------
<?xml version="1.0"?>
<parent>
....
<form id="1" name="world"/>
 <source id="1" name="abc1"/>
 <source id="2" name="abc2"/>
 <source id="3" name="abc3"/>
 <file id="1" name="xyz"/>
....
</parent> 

----------- xml-2--------------
<?xml version="1.0"?>
<root>
<source id="4" data="anything"/>
<source id="5" data="anything"/>
<source id="6" data="anything"/>
<source id="7" data="anything"/>
</root>

------------------The desired output I want-----------------
<?xml version="1.0"?>
<parent>
....
<source id="1" name="abc1"/>
<source id="2" name="abc2"/>
<source id="3" name="abc3"/>
<source id="4" data="anything"/>
<source id="5" data="anything"/>
<source id="6" data="anything"/>
<source id="7" data="anything"/>
<file id="1" name="xyz"
....
</parent> 

============== xslt I am using =============

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="node()|@*" name="identity">
    <xsl:copy>
        <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="source">
    <xsl:choose>
      <xsl:when test="'id=3'">
          <xsl:call-template name="identity"/>
          <xsl:copy-of select="document('file:///D:/Softwares/JEE    eclipse/JEEworkspace/Migration/TestMigrationWithoutDeletingProject/xml2.xml')/*/*"/>
      </xsl:when>
    </xsl:choose>
</xsl:template>
</xsl:stylesheet> 
```

* * *

我试图根据 id 属性找出它，但它在 xml-1 数据的每个源元素之后复制 xml-2 数据。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T23:03:35.697

我认为您的代码中有两个小问题：

*   调用`<xsl:call-template name="identity"/>`应该在您的`choose`部分之外（或更确切地说是之前）。顺便说一句：因为你没有一个`otherwise`部分，所以在这里使用会稍微短一些`xsl:if`。
*   正确插入点的测试应该是`test="@id = 3"`因为该术语`"'id=3'"`只是一个总是产生的字符串`true()`。

# c# - DataGrid 模板列绑定

> ID：12949516
> 
> 赞同：0
> 
> 时间：2012-10-18T07:40:27.543
> 
> 标签：c#, wpf, datagrid

我有一个自动生成它的列的 DataGrid。

在代码中，我实现了 AutoGeneratingColumn 事件，为我的翻译数据类型设置了某个模板：

```
 private void DataGrid_AutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
    {
        if(e.PropertyType == typeof(Translation)){
            DataGridTemplateColumn templateColumn = new DataGridTemplateColumn();
            templateColumn.CellTemplate = (DataTemplate)Resources["LanguageTemplate"];
            e.Column = templateColumn;
        }

    } 
```

数据模板：

```
 <DataTemplate x:Key="LanguageTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"></ColumnDefinition>
                <ColumnDefinition Width="20"></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <TextBlock Text="{Binding Name.ActualTranslation}" HorizontalAlignment="Stretch" Grid.Column="0"></TextBlock>
            <Image Source="{lex:LocImage en}" Height="15" HorizontalAlignment="Right" Grid.Column="1" Visibility="{Binding Name.HasCurrentLanguage, Converter={StaticResource boolToVis}, ConverterParameter=true}" ></Image>
        </Grid>

    </DataTemplate> 
```

现在出现了一个问题：TextBlock 绑定到 Name 属性。如果要显示的对象具有名称属性，则可以正常工作。但是，如果我有未命名为“名称”的翻译属性，显然不会显示任何数据。我将如何正确绑定以涵盖所有翻译项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:45:58.283

创建一个`DataTemplateSelector`可以`DataTemplate`为您当前的翻译类选择正确的位置并将其添加到您的`TextBlock.Text`绑定中。查看[更多](http://www.switchonthecode.com/tutorials/wpf-tutorial-how-to-use-a-datatemplateselector)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:06:20.113

因为它看起来像单向绑定，所以用转换器做一个简单的绑定：

```
TextBlock Text="{Binding Converter={StaticResource your_converter}}" ... 
```

并在转换器中实现您的逻辑。如果要绑定的 ViewModel 不一致，这是最简单的方法。

# c# - C#：向循环内的存储过程添加参数

> ID：12949517
> 
> 赞同：0
> 
> 时间：2012-10-18T07:40:32.333
> 
> 标签：c#, sql, stored-procedures, return, parameter-passing

我一直在尝试将参数添加到循环内的存储过程。下面给出的是我声明变量的代码。

```
 SqlConnection con = new SqlConnection();
        Connect conn = new Connect();
        SqlDataReader readerCourseID = null;
        con = conn.getConnected();
        con.Open();
        SqlCommand cmdAssignCourse;
        cmdAssignCourse = new SqlCommand("assignCourse", con);
        cmdAssignCourse.CommandType = CommandType.StoredProcedure;
        cmdAssignCourse.Parameters.Add("@sID", System.Data.SqlDbType.VarChar);
        cmdAssignCourse.Parameters.Add("@cID", System.Data.SqlDbType.VarChar);
        SqlParameter retValue = cmdAssignCourse.Parameters.Add("return", System.Data.SqlDbType.Int); 
```

下面是我将值插入到之前声明的变量中的代码。

```
foreach (DataRow row in dt.Rows)
            {
                //get course id from course name. Pass  row["Course Name"].ToString()
                int i = getCourseID(row["Course Name"].ToString());

                //assignment of the course to student
                cmdAssignCourse.Parameters["@sID"].Value = studentCurrID.Value.ToString();
                cmdAssignCourse.Parameters["@cID"].Value = i;
                retValue.Direction = ParameterDirection.ReturnValue;
                cmdAssignCourse.ExecuteNonQuery();
                if (retValue.Value.ToString() == "0")
                {
                    MessageBox.Show("Added Course Successfully!");
                    //return 0;
                }
                else
                {
                    MessageBox.Show("An error occured! Possibly a duplication of data!");
                    //return -1;
                }

            } 
```

但是，此代码成功运行并显示消息“已成功添加课程！” 一次。但是在第一次成功运行之后，每隔一次运行它就会给我“发生错误！可能是数据重复！” 信息。可能的错误是没有清除变量。如何清除以下变量。请帮我解决一下这个。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:33:25.413

通过重新使用相同的 SqlCommand 和 SqlConnection，您不会获得任何好处。连接池将为您完成所有艰苦的工作，无需重新发明轮子。将代码分离出来会更清晰、更健壮，因此创建一个新方法来执行该过程：

```
private int GenerateReturnValue(int courseID, int studentID)
{
    using (var connection = new SqlConnection("Your Connection String"))
    using (var command = new SqlCommand("assingCourse", connection)
    {
        connection.Open();
        command.CommandType = CommandType.StoredProcedure;
        command.Parameters.Add("@sID", System.Data.SqlDbType.VarChar).Value = studentID.ToString();
        command.Parameters.Add("@cID", System.Data.SqlDbType.VarChar).Value = courseID.ToString();
        command.Parameters.Add("@Return", System.Data.SqlDbType.Int).Direction = ParameterDirection.ReturnValue;
        command.ExecuteNonQuery();

        return (int)command.Parameters["@Return"].Value;
    }
} 
```

然后只需在循环中调用该方法。

```
foreach (DataRow row in dt.Rows)
{
    int i = GenerateReturnValue(getCourseID(row["Course Name"].ToString()), studentCurrID.Value);
    if (i = 0)
    {
        MessageBox.Show("Added Course Successfully!");
        //return 0;
    }
    else
    {
        MessageBox.Show("An error occured! Possibly a duplication of data!");
        //return -1;
    }
} 
```

此外，我认为[詹姆斯](https://stackoverflow.com/a/12949608/1048425)说问题在于以下事实是正确的`you never re-pull the return value from the query, you are missing that line after execution:`

# iframe - z-index 没有 IFRAME 的 Google 地球

> ID：12949518
> 
> 赞同：0
> 
> 时间：2012-10-18T07:40:33.613
> 
> 标签：iframe, z-index, google-earth

我创建了一个小部件来显示 Google 地球，但 Google 地球始终位于顶部，所以我看不到这样的 HTML[元素](https://stackoverflow.com/questions/506984/how-can-i-place-a-html-div-over-the-google-earth-plugin-involves-wmode-i-imagi)。我在谷歌搜索，我看到这个错误可以通过 IFRAME 修复，但我不想使用它。我想用另一种方式。任何人都可以帮助我吗？Tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T06:53:41.623

示例：google shim iframe 解释[http://lineandpixel.com/blog/iframe-shim-for-google-earth](http://lineandpixel.com/blog/iframe-shim-for-google-earth)

# c++ - 调整 Tiny 大小时 DirectX 崩溃

> ID：12949520
> 
> 赞同：1
> 
> 时间：2012-10-18T07:40:37.947
> 
> 标签：c++, resize, directx, buffer

我正在努力使我的程序更加防弹。我的程序可以很好地调整大小，直到我把它变成这样的超小：

![在此处输入图像描述](../Images/454a2ffb13ef166257a55c22041b10bc.png)

防止这种情况发生的一种方法是设置最小尺寸，我已经知道该怎么做。在我这样做之前，我想更深入地研究这个问题。

以下是函数开始崩溃的地方。

```
hr=swapChain->ResizeBuffers(settings.bufferCount, settings.width, settings.height, DXGI_FORMAT_UNKNOWN, 0);
if(FAILED(hr)) return 0; 
```

我认为这是因为缓冲区太小，所以我设置了一个故障安全缓冲区大小。不过也失败了。

```
hr=swapChain->ResizeBuffers(settings.bufferCount, fallback.width, fallback.height, DXGI_FORMAT_UNKNOWN, 0);
if(FAILED(hr)) return 0; 
```

**当我把它变小时，程序阻塞的原因是什么？**我认为这是缓冲区太小了。似乎并非如此。

**编辑：**
自从我发布这个已经有一段时间了，所以我的代码已经改变了很多。现在它在调用**deviceContext->ClearRenderTargetView()**时会出现未处理的异常崩溃。

# regex - 正则表达式：- 需要编写一个不允许数字的正则表达式

> ID：12949521
> 
> 赞同：0
> 
> 时间：2012-10-18T07:40:37.903
> 
> 标签：regex

我需要编写一个不允许任何数字的正则表达式。它应该允许除数字之外的任何其他字符。我试过这样的表达：- ~[0-9]+

但它限制了一切。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:42:21.880

目前尚不清楚您需要哪种正则表达式，但总的来说，以下其中一项应该有效：

```
^[^0-9]*$
^[^\d]*$
^\D*$
^[[:^digit:]]*$
^\P{IsDigit}*$ 
```

最后两种形式适用于 Unicode 数字。

原子`[^0-9]`匹配除*数字*以外的任何东西；为了确保在整个字符串中没有数字，我添加了字符串 start ( `^`) 和 end ( `$`) 的标记。

如果要匹配包含至少一个非数字字符的字符串的任何部分，请将`^...*$`正则表达式的部分替换为`...+`：

```
[^0-9]+
\D+ 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:42:38.590

试试`[^0-9]+`。请注意，这只会阻止 ASCII 数字出现，而不是 Unicode 数字。

# jsp - 如何从同一页面获取jsp表单中提交按钮的状态？

> ID：12949523
> 
> 赞同：0
> 
> 时间：2012-10-18T07:40:42.600
> 
> 标签：jsp

我正在使用提交按钮导航到表单内的其他页面

```
<form action = "dummy.jsp" method="POST">
    <label for="disabledInput" class="control-label">Item Id</label>
    <input type="text" value=<%=downloadHelper.getFileName()%> name = "fileSelect" id = "fileSelect"/>
    <input type="hidden" name = "storeSelect" value = <%=downloadHelper.getStoreName()%> /> </br></br>
    <button type="submit" class="btn btn-success" name="Download" value="Download">Download</button>
    <a href="/index.jsp" class="btn btn-danger">Cancel</a>
</form> 
```

如何检查`Download`当前页面中是否单击按钮的天气。我可以从`dummy.jsp`片段中检查它：

```
if(request.getParameter("Download") != null) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:30:36.493

您应该[避免使用 scriptlet](http://www.oracle.com/technetwork/articles/javase/code-convention-138726.html)并改用[JSTL](https://stackoverflow.com/tags/jstl/info)和[EL](https://stackoverflow.com/tags/el/info)。

使用 EL，您可以简单地使用三元表达式，例如：

```
<button ${empty param.Download ? '' : 'disabled="disabled"'} /> 
```

# jquery - 鼠标退出时的Jquery，菜单隐藏不起作用

> ID：12949524
> 
> 赞同：0
> 
> 时间：2012-10-18T07:40:46.640
> 
> 标签：jquery, html, css

我正在编写一个代码，其中当用户将鼠标悬停在标题（菜单）上时会显示隐藏菜单，如果用户没有在隐藏菜单上访问（现在正在显示），则标题（菜单）将隐藏，这意味着不工作带有隐藏菜单（现在显示）..

[http://jsbin.com/icobin/12](http://jsbin.com/icobin/12)

```
 $(document).ready(function(){

        $(function(){
            jQuery.fn.delay = function(millis,callBack){
                var object = $(this);
                $.extend(object,{callBack:callBack});
                return window.setTimeout(function() {
                    object.callBack();
                    return object;
                }, millis);
            };
        });

        var navFadeOutDelay = 500; // Set delay for drop down to slide down (in ms)

        // Navigation:
        var nav = {count:0};

        $(function(){
            $("#navigtion_wrap #navigation_top").hide(); //hide navigation on page load. 

            $('#nav_menu_text').bind('hover',function(){ 
                // On mouseenter, hide title and show navigation
 $("#navigtion_wrap #nav_menu_text").hide();
 $("#navigtion_wrap #navigation_top").fadeIn();

              nav.count += 1;
            }).bind('hoverend',function(){ // On mouseleave, fade out navigation and show title
                var tmp = nav.count;
                $("#navigtion_wrap #navigation_top").delay(navFadeOutDelay, function(){ 
                    // Delay: wait X ms before navigation FadeOut                

                    if (tmp == nav.count) { 
                        // prevent delay from firing if user hovers navigation before the end of delay
                        $(this).fadeOut('slow', function(){ //Callback                  
                            $("#navigtion_wrap #nav_menu_text").show(); 
                        }); 
                    }               
                });   
            });
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:07:54.187

```
 $('#navigtion_wrap #nav_menu_text').mouseover(function(){
    // on mouse over
    $(this).hide();
    $("#navigtion_wrap #navigation_top").fadeIn();
});

$('#navigtion_wrap #navigation_top').mouseleave(function(){
    // on mouse leave
    $(this).fadeOut();
    $("#navigtion_wrap #nav_menu_text").show();
}); 
```

# sharepoint - NHibernate 配置问题：“找不到入口点”

> ID：12949528
> 
> 赞同：0
> 
> 时间：2012-10-18T07:41:08.840
> 
> 标签：sharepoint, mapping, entry-point, nhibernate-configuration

我在 SharePoint 2010 Web 应用程序上配置 NHibernate。以前，当映射和域在一个项目中时，它可以正常工作。但是在重构过程中，我将解决方案拆分为几个项目。我还实现了我想要初始化休眠配置的自定义 IHttpModule

```
 protected void context_BeginRequest(object sender, EventArgs e)
    {
        var httpApplication = sender as HttpApplication;

        lock (httpApplication )
        {
            if (!httpApplication.Context.Items.Contains(ApplicationConstants.IsApplicationInitialized))
            {
                httpApplication.Context.Items.Add(ApplicationConstants.IsApplicationInitialized, true);
                InitInRequest(httpApplication);
            }
        }

        httpApplication.Context.Items.Add(ApplicationConstants.SESSION, NhibernateManager.GetSession());
    }

    private void InitInRequest(HttpApplication httpApplication)
    {
        NhibernateManager.Init(ApplicationVariables.ApplicationSettingsPath);
    } 
```

和 NHibernateManager.Init()：

```
 public static void Init(string configurationFilePath)
    {
        specifiedConfigurationFilePath = configurationFilePath;
        Configure();
        InitSessionFactory();
    }

    private static void Configure()
    {
        if (config == null)
        {
            if (string.IsNullOrEmpty(specifiedConfigurationFilePath) == false)
            {
                config = new Configuration();
                config = config.Configure(specifiedConfigurationFilePath);
                config = Fluently.Configure(config)
                                    .Mappings(m => m.FluentMappings.AddFromAssemblyOf<ItemMap>())
                                    .BuildConfiguration();
            }
            else
            {
                config = Fluently.Configure()
                                    .Mappings(m => m.FluentMappings.AddFromAssemblyOf<ItemMap>())
                                    .BuildConfiguration();
            }
        }
    } 
```

在 BuildConfiguration() 中我有一个非常奇怪的错误（InnerException）：“找不到入口点。” 堆栈跟踪显示获取映射信息是错误的原因：

```
at System.Collections.Generic.IDictionary`2.TryGetValue(TKey key, TValue& value)
at NHibernate.Cfg.Configuration.GetClassMapping(String entityName)
at NHibernate.Cfg.Configuration.GetClassMapping(Type persistentClass)
at FluentNHibernate.PersistenceModel.Configure(Configuration cfg)
at FluentNHibernate.Cfg.MappingConfiguration.Apply(Configuration cfg)
at FluentNHibernate.Cfg.FluentConfiguration.BuildConfiguration() 
```

所有程序集都在 GAC 中。我试图将它们复制到 _app_bin 或 bin 但没有成功。

**更新**

请帮我！我被这个奇怪的问题困住了:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:08:07.290

我找到了解决方案。

看看我的配置行：

```
config = new Configuration();
config = config.Configure(specifiedConfigurationFilePath);
config = Fluently.Configure(config)
                 .Mappings(m => m.FluentMappings.AddFromAssemblyOf<ItemMap>())
                 .BuildConfiguration(); 
```

我正在创建新的 nhibernate 配置对象，将其传递给 fluent-nhibernate 静态初始化方法。这是事情发生的地方。Fluent-nhibernate 无法从指定文件中获取配置。相反，它可以采用带有指定文件路径的 nhibernate 配置对象，然后用于构建配置。我的应用程序的早期版本在一个程序集中，这种配置方式似乎工作正常。但是当我拆分应用程序时，问题就出现了。所以为了解决这个问题，我应该从 web.config 文件中获取 nhibernate 配置信息。我无法像在单程序集项目中那样将计时器作业和 Web 应用程序的设置合并到一个文件中。所以我必须有几个配置文件，并且总是使用这样的经典行：

```
Fluently
 .Configure()
  .Mappings(p => p.FluentMappings
                   .AddFromAssemblyOf<ItemMap>())
                    .BuildConfiguration() 
```

它似乎是某种流利的休眠错误或其他东西......

# iphone - 如何在 iOS 中用颜色遮盖图像？

> ID：12949529
> 
> 赞同：2
> 
> 时间：2012-10-18T07:41:07.887
> 
> 标签：iphone, objective-c, ios

基本上我想从图像中删除图像的背景颜色。这就是为什么我想用清晰的颜色掩盖我的图像，它可以使图像透明。

或者我们有没有其他方法可以清除图像的背景颜色并获得透明图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:45:41.730

通过使用 CGImageCreateWithMaskingColors 屏蔽背景创建一个新图像。指定背景颜色范围 (RGB) 值。这足以创建背景透明图像。

# web-services - 集成 Web 服务的最佳实践（使用 Camel）

> ID：12949531
> 
> 赞同：1
> 
> 时间：2012-10-18T07:41:10.240
> 
> 标签：web-services, jms, integration, apache-camel

我有以下情况。一些服务主要通过 SOAP 接口提供它们的功能。有一个模块想要使用此功能以集成到网站中。这样做的最佳做法是什么？

服务的功能可能会发生变化。因此，每个单独的函数/方法都应该是“可重新路由的”。Web 服务可能托管在不同的机器上。

将所有 Web 服务映射到 JMS 队列是否合理（我的第一个想法）？网站模块将只与 JMS 对话。路由器会将所有传入的 JMS 消息路由到不同的 Web 服务（或其他地方）。

或者：可能有一个专门的 Web 服务，它集成了所有功能，供该网站专门使用？这里的优点是参数和返回值是类型化的。

你有什么建议？还有什么更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T23:21:02.240

如果我理解正确，您的目标是为您的 webapp 模块提供一个同质接口、一个连贯的 API，为多个远程接口（主要是 SOAP 接口）提供外观。

关于您提到的 JMS 方法 - 这似乎是合理的，但是：

*   而不是许多队列，我宁愿在队列之后立即使用带有基于 Camel 内容的路由器的单个 JMS 目标（或请求/回复模式的两个队列）这将使事情“可重新路由”并将 Web 模块与服务更改隔离开来.

*   您的请求将不太容易出现与服务相关的错误、服务可用性方面的短暂问题等，同时仍保留执行请求/回复样式调用的能力（这对于 SOAP 的 RPC 式性质很常见）。

*   我会在适用的任何地方使用单向样式调用（以提高可靠性和反应性）。

*   您不必担心缺少类型，WSDL+SOAP 似乎强制执行强类型，但这是由自动生成的存根驱动的错觉。您仍然需要来回整理数据。我会使用 JSON 而不是 SOAP，因为它比 XML 更干净且冗余更少（可能更快，但这通常无关紧要）。**Jackson**是一个非常高效的 JSON 库，并且已经在 Camel 发行版中得到支持。JMS`ObjectMessage`是一个很大的**问题**（[关于一些`ObjectMessage`陷阱](http://www.jmesnil.net/weblog/2012/07/27/on-jms-objectmessage-and-its-pitfalls/)的好文章）

单服务方法似乎是将 web 模块与服务层分离的好方法。它缺乏 JMS 方法的灵活性和容错性，但似乎更容易实现。

如果有许多呼叫可以单向方式结束，我会说使用 JMS 并在队列之后重新路由消息。

# linux - 为什么 binutils 或 gcc 安装在两个位置？

> ID：12949533
> 
> 赞同：0
> 
> 时间：2012-10-18T07:41:11.163
> 
> 标签：linux, gcc, binutils

我正在学习 linux 知识，当我编译 binutils 或 gcc 并安装它们时，它们总是出现在两个位置。

我想这一定是一个原因，我不知道为什么？

其实我正在学习lfs。当我编译 binutils 的 pass I 时，书中的说明是：

```
../binutils-2.22/configure     \
    --prefix=/tools            \
    --with-sysroot=$LFS        \
    --with-lib-path=/tools/lib \
    --target=$LFS_TGT          \
    --disable-nls              \
    --disable-werror 
```

在 I `make`&&之后`make install`，它安装在两个位置：`/tools/bin`和`/tools/$LFS_TGT/bin`.

我想知道这样做的原因和目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:57:24.680

本质上，其中的二进制文件`/tools/$LFS_TGT/bin`是专门为该特定`$LFS_TGT`. 第二个副本放置在 中`/tools/$LFS_TGT`，因为该工具旨在替换已经存在的那个，因为您使用该`--with-sysroot`选项告诉它这样做

# iphone - iOS 从 CoreData 中获取按主键排序的对象

> ID：12949540
> 
> 赞同：2
> 
> 时间：2012-10-18T07:41:45.427
> 
> 标签：iphone, ios, core-data, nssortdescriptor

我已经使用 CoreData 将数据保存到数据库中。我需要以与保存数据相同的顺序从我的表中获取数据。在表内，它按 Z_PK 排序 - 隐藏的 CoreData 键。我怎样才能创建这样的排序描述符。如果我使用没有排序描述符的获取请求，我的数据对象的顺序错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T12:26:28.723

Core Data 框架未向您公开的任何内容都是实现细节。存在且当前适合您的目的的事实是`Z_PK`不可依赖的。

如果创建/保存顺序对您的模型很重要，那么它应该包含在您的模型中。真的没有别的了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T17:08:35.720

核心数据框架中没有适当的方法来按主键对对象进行排序，但我认为我们可以使用 objectID 作为主键并按 objectID 排序。特定对象的 ObjectID 总是会增加..因此您可以使用以下方法

```
/*!
@param <NSManagedObject> array 
@return <NSManagedObject> sortedarray
*/

+ (NSArray *) sortManagedObjectArrayByObjectID:(NSArray *) array {

    NSArray *compareResult = [array sortedArrayUsingComparator:^NSComparisonResult(NSManagedObject *obj1, NSManagedObject *obj2) {

        NSString *s = [obj1.objectID.URIRepresentation lastPathComponent];
        NSString *r = [obj2.objectID.URIRepresentation lastPathComponent];
        return [s compare:r];

    }];

    return compareResult;

} 
```

希望这会有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-18T19:49:00.883

使用排序描述符 with`self`作为排序键。底层 SQL 将具有`ORDER BY t0.Z_PK`.

# html - 为什么我们在一个简单的文档中得到空文本节点

> ID：12949546
> 
> 赞同：2
> 
> 时间：2012-10-18T07:42:18.580
> 
> 标签：html, css, internet-explorer-9, textnode

鉴于这个简单的代码

```
<!Doctype html>
<html>
<head>
<title>Start Here</title>
</head>
<body>
<script type="text/javascript">
document.write("<h1>Start Here!</h1>");
</script>
</body>
</html> 
```

我在 IE9 中得到很多空文本节点，如下所示。

![图片](../Images/0f89371a59893c2511d4d0461d10f59d.png)

在经历了类似的问题后，我尝试了以下方法。

*   关闭所有标签。
*   删除所有空格。
*   使用没有 BOM 的 UTF
*   EOL = unix 格式

它没有帮助。没有什么严重的车针想知道这是为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T07:43:39.837

所有字符，包括换行符，都会生成文本节点。

如果删除换行符，空文本节点将消失。例如从

```
<head>
<title>Start Here</title> 
```

到

```
<head><title>Start Here</title> 
```

将从`head`块的开头删除空文本节点。

据我所知，您也无法控制 IE9 开发人员工具栏中空文本节点的可见性。作为一种解决方法，您可以安装和使用[Firebug Lite](http://getfirebug.com/firebuglite)，它可以为您提供更清晰的元素树表示：

![IE9 中的 Firebug Lite](../Images/b73ba06c2909547de85b1201f5df4112.png)

请注意，空文本节点只是文档结构的正常部分，您无需担心——请注意，即使换行符也会生成它们。

# tooltwist - ToolTwist 应用程序中“提交响应后无法转发”错误的可能原因是什么

> ID：12949549
> 
> 赞同：1
> 
> 时间：2012-10-18T07:42:26.723
> 
> 标签：tooltwist

在生产环境中运行 ToolTwist 应用程序时出现这些错误。这似乎经常发生。可能导致这些堆栈跟踪的代码错误有哪些？

```
2012-02-13 11:00:04,242 ERROR ServletUiModule - Error in Servlet tooltwist.ecommerce.RoutingUIM.doPost():
java.lang.IllegalStateException: Cannot forward after response has been committed
        at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:312)
        at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:38:42.350

回答
HttpServlet 有两种获取输出流的变体——response.getWriter() 和 response.getOutputStream()。在我们的例子中，我们使用 uh.getResponse() 来获取响应对象。

几条规则——

   1\. 可以使用其中一种方法。

   2\. 选择的方法不能被调用两次。

   3\. 一旦你有了输出对象，不管你有一个作家还是一个输出流，一旦你关闭它，你就不能再次使用它，也不能再得到另一个。

简而言之，编写 servlet 输出是一次性操作。你得到对象，你写，你从 servlet 返回。

回答 B
我似乎记得也可能存在这样一种情况，即您正在写入输出，但随后错误处理程序开始处理异常，并且错误页面在创建进一步输出时出现问题。任何用于处理错误的页面都必须特别具有 errorpage 标签（我不记得确切的标签）。

答案 C
一旦你在 servlet 的输出中写了一些东西，你就不能在没有这个错误的情况下转发到另一个页面。

# ios - 我在 MonoTouch 中将 UIButton 子类化，但底层 ObjC 类仍然是 UIButton

> ID：12949554
> 
> 赞同：2
> 
> 时间：2012-10-18T07:42:59.927
> 
> 标签：ios, uiview, xamarin.ios, uikit

我有`BackButton`那个继承`UIButton`。
它没有 xib，非常简单，并且包含一些我省略的布局逻辑。

这是我声明它的方式：

```
[Register("BackButton")]
public class BackButton : UIButton
{
    public BackButton (string text, EventHandler handler)
        : base (UIButtonType.Custom)
    {
        TouchUpInside += handler;
        SetTitle (text, UIControlState.Normal);
    }

    public BackButton(IntPtr handle) : base(handle) { }
} 
```

如果我`BackButton`在另一个视图的 xib 中使用，它的基础类被视为`BackButton`：

![](../Images/0b51d3a363e9303c0bf848601a47afac.png)

但是，当我从代码创建实例时，基础类只是`UIButton`：

![](../Images/26bcfd41fa1c8944ac7246d8e5664b9c.png)

这令人沮丧，因为我正在尝试将[UIAppearance](https://stackoverflow.com/q/12939321/458193)用于此类，并且我需要它是正确的实例。

有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T09:13:14.880

事实证明，我必须调用无参数`UIButton`构造函数，而不是我正在调用的构造函数。
从构造函数定义中删除`: base (UIButtonType.Custom)`足以使其工作：

```
public BackButton (string text, EventHandler handler)
     // : base (UIButtonType.Custom) -- remove this line
{
    TouchUpInside += handler;
    SetTitle (text, UIControlState.Normal);
} 
```

事后看来，这很有意义，因为`UIButton(UIButtonType)`MonoTouch 提供的构造函数实际上调用了`[UIButton buttonWithType:]`：

```
public UIButton (UIButtonType type) : base (
    Messaging.IntPtr_objc_msgSend_int (UIButton.class_ptr,
        UIButton.selButtonWithType_, (int)type)
    ) { } 
```

我想，没有办法`[UIButton buttonWithType:]`知道我的自定义视图，所以它只会创建一个`UIButton`.

# php - PHP MySQL准备好的语句：执行死亡，既不返回真也不返回假

> ID：12949558
> 
> 赞同：1
> 
> 时间：2012-10-18T07:43:17.743
> 
> 标签：php, mysql, sql, prepared-statement

在这个块中，$stmt 不会像预期的那样返回 false，$bind 是 true，但是当我到达 $stmt->execute() 时，它退出，并且既不返回 true 也不返回 false。我唯一能从中得到错误的情况是，如果我在参数中使用一些变量来执行它的文档，但我从未在执行调用中使用过参数，而且我找不到其他人的例子在程序准备的语句中使用一个除外。我不知道我是否遗漏了什么。有人有想法么？

```
$stmt = $mysqli->prepare("SELECT ... FROM `table` WHERE `tid` = ?");

if ($stmt !== FALSE) {
    echo 'Statement was true.';
    $bind = $stmt->bind_param('s', $this->tid);
    echo 'after bind';
    if ($bind)
        echo 'bind was good ';
    else
        echo 'bind was bad';
    $exec = $stmt->execute();
    if ($exec)
        echo 'exec was good';
    else
        echo 'exec was bad';
    echo 'after execute';
    // etc.
} else {
 // rest of code
} 
```

@tntu 接受的答案和以下评论让我走上了解决这个问题的正确轨道。[链接]http://stackoverflow.com/questions/5580039/fatal-error-uncaught-exception-mysqli-sql-exception-with-message-no-index-us

MySQL 可以做很多错误报告，我已经在堆栈和相关函数中设置了 mysqli_report(MYSQLI_REPORT_ALL)，以便找出其他一些问题。无论如何，设置 mysqli_report(MYSQLI_REPORT_OFF) 可以让执行按预期运行，而不是让 php 因警告和错误而陷入困境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:44:29.170

```
$bind = $stmt->bind_param('s', $this->tid); 
```

**s**代表字符串

将其更改为**i**，它应该可以工作。

另见关于做一些错误管理。`mysqli_erro`,`mysqli_errno`

像这样的东西：

```
if ($mysqli->errno) { logging("ERRO: ".$mysqli->error . "( " . $mysqli->errno . " )"); } 
```

# ejb - 在同一服务器和单元上查找 ejb

> ID：12949560
> 
> 赞同：1
> 
> 时间：2012-10-18T07:43:22.707
> 
> 标签：ejb, websphere, jndi

我有一个 ejb 应用程序 Xdate 和一个 Web 应用程序 Y 部署在 websphere 服务器/单元上，并且 Web 应用程序使用 Xdate ejb 的客户端 jar 进行查找。我可以使用“ejb 类型”的名称空间绑定通过我的 Web 应用程序查找此 ejb 吗？请注意，ejb 应用程序和 Web 应用程序是同一服务器上的两个不同应用程序。如何使用名称空间绑定查找部署在同一服务器上的 ejb

我正在使用以下字符串进行查找。“java:comp/env/ejbs/XdateRemote”

web.xml 中的条目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:43:59.740

因此，您有一个名为 的企业应用程序`X`，其中包含一个 EJB 模块。另外，您有一个名为 的企业应用程序`Y`，其中包含一个 Web 模块。您希望其中的 Web 模块`Y`能够引用包含在`X`.

如果这是正确的，那么您不一定需要 EJB 名称空间绑定才能使其工作。如果两个应用程序在同一台服务器上运行（您提到就是这种情况），那么它们都访问同一个 JNDI 树。

当客户端和 EJB 在同一单元中的不同目标上运行时，需要 EJB 名称空间绑定。

# javascript - 如何根据此项目顺序将项目添加到列中

> ID：12949562
> 
> 赞同：1
> 
> 时间：2012-10-18T07:43:26.350
> 
> 标签：javascript, jquery

我正在尝试遍历一组项目并将它们中的每一个放在几列中。我已经设法做到这一点，但我希望订单略有不同。

我试图说明我想要实现的目标以及我的问题在这里：http: [//jsfiddle.net/yXGA7/9/](http://jsfiddle.net/yXGA7/9/)

如果单击“Prepend”链接，第一个列框中将出现六个 div。但是，顺序不是我想要的。我希望它被阅读（从左上角开始）：

```
5 4 3 2
1 0 
```

并不是：

```
1 0 3 2
5 4 
```

我知道这里需要做一些事情：

```
colCounter = 1;
cols = 4;

$("#prepend").click(function(){
  $.each(makeDivs(), function (index, value) {
    var item = $(value);
    $("#col" + colCounter).prepend(item);
    colCounter++;
    if(colCounter > cols) {
      colCounter = 1;
    }
  });  
}) 
```

但不确定该怎么做。

有人愿意帮我解决这个问题吗？

**更新** 不幸的是，我需要使用 Prepend 函数。我相信“附加”会起作用，但恐怕不能使用它。

**更新 2** 我更新了 jsFiddle 来说明我想要发生的事情：http: [//jsfiddle.net/yXGA7/9/](http://jsfiddle.net/yXGA7/9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:16:17.810

不要反转您的 makeDivs 数组并从 colCounter 2 开始以向后工作：

```
$(document).ready(function() {
    var ds = makeDivs();
    var colCount = 4; 
    var colCounter = ds.length % colCount;  // simply assign to 2 if you don't want to make it dynamic
    // push out the items to the columns

    $("#prepend").click(function(){
      $.each(ds , function (index, value) {
        var item = $(value);
        $("#col" + colCounter).prepend(item);
        colCounter--;  // go backwards
        if(colCounter < 1) {  
          colCounter = colCount; //reset to 4
        }
      });  
    })
});
function makeDivs() {
   var divs = new Array();   
   for(var i=0;i<6;i++){
      div = $('<div></div>').addClass('item');
      p = "<p>"+i+"</p>";
      div.append(p);
      divs.push(div);
    }

  return divs; // don't reverse
} 
```

小心使用 i、colCounter 等进行全局变量声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T07:49:19.063

而不是像这样**预先**使用**附加**：

```
 $("#col" + colCounter).append(item); 
```

# mysql - 如何设置mysql默认值NONE

> ID：12949575
> 
> 赞同：2
> 
> 时间：2012-10-18T07:44:10.320
> 
> 标签：mysql, default-value

我正在使用包含列的表“media_content”

```
id varchar(50) NOT NULL,
shorttitle varchar(200) DEFAULT NULL,
sourceimage blob 
```

后来我将 sourceimage 列修改为默认值`NULL`

```
ALTER TABLE media_content
MODIFY COLUMN sourceimage VARCHAR(250) DEFAULT NULL; 
```

现在我想将`sourceimage`列默认设置为`NONE`，可以这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T07:47:02.213

您可以将（字符串类型列的）默认值指定为字符串文字常量，例如，但请注意，这样的值实际上与（表示根本没有值）`'NONE'`具有非常不同的含义。`NULL`

如[使用`NULL`值](http://dev.mysql.com/doc/en/working-with-null.html)下所述：

> `NULL`在您习惯之前，它的价值可能会令人惊讶。从概念上讲，`NULL`表示“缺失的未知值”，它的处理方式与其他值有些不同。
> 
> `[ deletia ]`
> 
> 使用时的一个常见错误`NULL`是假设不可能将零或空字符串插入定义为 的列中`NOT NULL`，但事实并非如此。这些实际上是价值，而`NULL`意味着“没有价值”。</p>

如果您只想以`NULL`其他方式向用户呈现值，您应该在应用程序的表示层处理它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T07:48:03.627

使用相同的`ALTER`语法，可以将默认值更改`NONE`为如下：

```
ALTER TABLE media_content
MODIFY COLUMN sourceimage VARCHAR(250) DEFAULT 'NONE'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-15T18:30:00.497

`NULL || NOT NULL`对我来说，当您考虑以下问题时，问题（以及 , 和默认值之间的关系）变得更加清晰：

`NOT NULL`⇒**要求**：必须有默认值，否则不允许插入没有指定值的记录（指定默认值，或选择“无”⇒未指定默认值；可能表明您在这两个选项之间的偏好：后者选项意味着在该字段中没有值的插入应该被拒绝并出现错误）；然而：

`NULL`⇒ **NOT REQUIRED** —`NULL`表示*没有*为字段指定值，或者值未知。（如果一个字段是“可空的”，那么试图说您不想指定默认值将是无稽之谈；因为根据可空性，即使您不指定此字段，也将允许插入值！因此，该字段必须具有默认值：无论是默认`NULL`值还是某个特定值。）

如果您使用的是 phpMyAdmin，您应该访问相关表的结构选项卡，找到相关列定义，然后选择“更改”。在“默认”下拉菜单中，您将看到“无”选项：选择该选项，然后按“保存”。记下由此生成的 SQL 命令，您将看到如下内容：

```
ALTER TABLE  `…_tbl` CHANGE  `…_fld` `…_fld` TEXT NOT NULL; 
```

但是，如果我们尝试在用户界面中指定默认值应为“无”但应允许 NULL；那么默认值将改为“”（空字符串）或“0000-00-00 00:00:00”（在`DATETIME`字段的情况下）等。所以这里的关键是列（字段）是否为`NULL`ABLE或不！

这个“无”选项可能部分是 phpMyAdmin 用来表示底层数据库中实际发生的事情的抽象的产物（这是不同的）。

在将您的字段更改为`NOT NULL`类型之前；首先检查现有值，并确保它们会以您批准的方式自动更改。

换句话说：`NULL`/`NOT NULL`和默认值；本质上是相互关联的：通过限制您可以指定的值组合来有效地表示这种关系的用户界面在人体工程学上是有缺陷的。phpMyAdmin 可能还有其他工具，可以在这方面进行改进。

# c# - 在 Azure 上将 Active Directory 设置为故障转移实例

> ID：12949579
> 
> 赞同：0
> 
> 时间：2012-10-18T07:44:22.893
> 
> 标签：c#, azure, active-directory, adfs

我们希望在 Azure 上设置我们的企业 Active Directory 作为故障转移选项。即如果本地 AD 出现故障，我们应该能够无缝切换到 Azure 进行身份验证。我们如何意识到这一点？

1.  我应该考虑 Windows Azure Active Directory (WAAD) 还是在 Azure VM 映像上设置域控制器？
2.  在这两种情况下，我们如何设置同步以确保本地和 Azure AD 始终保持同步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:01:44.810

我不是 100% 确定，但我认为 Windows Azure Active Directory 不能用于企业登录。它可以与 On-Premises AD 同步以提供跨应用程序的 SSO 功能，但不能提供 Windows Kerberos 身份验证。

在 Windows Azure VM 中安装 AD 将是这里的方法。您的做法是[创建一个副本 AD](https://azure.microsoft.com/documentation/articles/virtual-networks-install-replica-active-directory-domain-controller/)，将您的主 AD 放在本地，将辅助 AD 放在 Azure VM 中。您已经[创建了一个虚拟网络](https://azure.microsoft.com/documentation/articles/virtual-networks-create-vnet-arm-pportal/)并将其添加到本地网络，以便可以从本地网络访问 Azure VM。

值得一提的是[Windows Azure 名称解析](https://azure.microsoft.com/documentation/articles/virtual-networks-name-resolution-for-vms-and-role-instances/)的工作原理。

# hadoop - 在 hadoop 流中使用 fopen

> ID：12949582
> 
> 赞同：1
> 
> 时间：2012-10-18T07:44:37.137
> 
> 标签：hadoop, native, hadoop-streaming

当我使用 hadoop 流执行它时，如何在本机应用程序中打开文件？

例如，我的代码如下所示：

```
int main(int argc, char** argv){
   FILE* fp = fopen(argv[1], "a+");
   ...
   fscanf(fp, "%d", val);
   ...
   fclose(fp);
} 
```

如果不可能，您能否建议任何其他方法或与之相关的建议。

如果可能，是否有此主题的任何文档。如何不为 hadoop-streaming 编程。

对不起我的英语不好。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T16:11:01.113

> 当我使用 Hadoop 流执行文件时，如何在本机应用程序中打开文件？

[HDFS 通过WebHDFS](http://hadoop.apache.org/docs/r1.0.3/webhdfs.html)和[HttpFS](http://hadoop.apache.org/docs/current/hadoop-hdfs-httpfs/index.html)为各种操作提供了 REST API 。可以从所有语言务实地访问 REST API。另请注意，这些语言还具有可轻松针对 REST API 进行编程的库。

# perl - Perl 中的哈希值

> ID：12949584
> 
> 赞同：-1
> 
> 时间：2012-10-18T07:44:40.303
> 
> 标签：perl, perl-data-structures

我在 Perl:Input 5 mobile set details (Invoice number, Model, Company, Memory, Price, Quantity)中有问题。打印所有详细信息、总金额（数量 * 价格）、总数量、每家公司的手机数量。

我的脚本是：

```
#!/usr/bin/perl

my %mobset = (
    '1' => {
        'Invoice No' =>'3456',
        'Model'      =>'S9900',
        'Company'    =>'Sonyericcson',
        'Memory'     =>'1GB',
        'Price'      =>'8000',
        'Qnty'       =>'1',
    },
    '2' => {
        'Invoice No' => '3457',
        'Model'      => 'S3322',
        'Company'    => 'Samsung',
        'Memory'     => '2GB',
        'Price'      => '9000',
        'Qnty'       => '2',
    },
    '3' => {
        'Invoice No' => '3458',
        'Model'      => 'N4140',
        'Company'    => 'Nokia',
        'Memory'     => '512MB',
        'Price'      => '5000',
        'Qnty'       => '2',
    },
    '4' => {
        'Invoice No' => '3459',
        'Model'      => 'S4636',
        'Company'    => 'Samsung',
        'Memory'     => '256MB',
        'Price'      => '6000',
        'Qnty'       => '1',
    }, 
    '5' => {
        'Invoice No' => '3460',
        'Model'      => 'S7854',
        'Company'    => 'Samsung',
        'Memory'     => '128MB',
        'Price'      => '7000',
        'Qnty'       => '1',
    }
);

print "All the mobile set details are as follows:\n";
foreach my $id(sort keys %mobset) {

    print "Mobile SlNo. = $id, Invoice No. = $mobset{$id}{'Invoice No'}, Model No. = $mobset{$id}{'Model'}, CompanyName = $mobset{$id}{'Company'}, Memory = $mobset{$id}{'Memory'}, Price = $mobset{$id}{'Price'}, Quantity = $mobset{$id}{'Qnty'}\n";

    $totqty += $mobset{$id}{'Qnty'};
    $totprice += $mobset{$id}{'Price'};
}

print "Total Quantity of mobile set is $totqty\n";
$totamt = $totqty * $totprice;
print "Total Amount of mobile set is Rs.$totamt\n";

print "The company names of mobile are:\n";
foreach my $id(sort keys %mobset) {

    print "$mobset{$id}{'Company'}\n"; 
}

$name = SonyericcsonSamsungNokiaSamsungSamsung;
my @names = ($name =~ m/([A-Z][a-z]+)/g);
join(',',@names);
my %count;

foreach (@names) {

    if (exists $count{$_}) {

        $count{$_}++;
    } 
    else {

        $count{$_} = 1;
    }
}

print "The number of mobiles from each company are:\n";
foreach (keys %count)  {

    print "$_ \t = $count{$_}\n";
} 
```

我的输出是：

```
All the mobile set details are as follows:
Mobile SlNo. = 1, Invoice No. = 3456, Model No. = S9900, CompanyName = Sonyericcson, Memory = 1GB, Price = 8000, Quantity = 1
Mobile SlNo. = 2, Invoice No. = 3457, Model No. = S3322, CompanyName = Samsung, Memory = 2GB, Price = 9000, Quantity = 2
Mobile SlNo. = 3, Invoice No. = 3458, Model No. = N4140, CompanyName = Nokia, Memory = 512MB, Price = 5000, Quantity = 2
Mobile SlNo. = 4, Invoice No. = 3459, Model No. = S4636, CompanyName = Samsung, Memory = 256MB, Price = 6000, Quantity = 1
Mobile SlNo. = 5, Invoice No. = 3460, Model No. = S7854, CompanyName = Samsung, Memory = 128MB, Price = 7000, Quantity = 1
Total Quantity of mobile set is 7
Total Amount of mobile set is Rs.245000
The company names of mobile are:
Sonyericcson
Samsung
Nokia
Samsung
Samsung
The number of mobiles from each company are:
Sonyericcson = 1
Nokia = 1
Samsung = 3 
```

但是我得到了手机数量的 o/p，因为我确实硬编码了我不应该的手机名称。我该如何解决代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:06:37.860

将收集计数的代码片段更改为：

```
my %count;
foreach my $key ( %mobset ) {
   my $name = $mobset{$key}{Company} ;
   $count{$name}++ ;
} 
```

或者，更好的是，将其包含在上一个循环中：

```
print "The company names of mobile are:\n";
foreach my $id(sort keys %mobset) {

    my $name = $mobset{$id}{Company}; 
    print "$name\n" ;
    $count{$name}++
} 
```

注意

1.  `{Company}`数组键中的引号可以去掉，所以可以写成`{'Company'}`, 和
2.  增加一个未定义的哈希元素是可以的（它将被视为0），因此无需检查该元素是否存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:07:17.133

手机名称是您之前在`foreach my $id(sort keys %mobset)`循环中打印的名称，不是吗？您可以执行另一个类似的循环，也可以在该循环期间将名称保存在数组中并使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:09:45.093

真的不需要硬代码。你知道这个名字 - 它在你正在行走的 hasref 中。只需根据公司价值建立一个计数数组

```
my %count;
foreach my $id (sort keys %mobset) {
    ++$count{$mobset{$id}->{Company}};
}

print "The number of mobiles from each company are:\n";
foreach (keys %count)  {

    print "$_ \t = $count{$_}\n";
} 
```

# ios - “您的 Apple ID 已被禁用。”

> ID：12949586
> 
> 赞同：5
> 
> 时间：2012-10-18T07:44:46.947
> 
> 标签：ios, in-app-purchase, storekit

我正在尝试在我的设备上测试 iOS StoreKit 应用内购买。我在 iTunesConnect 中创建了一个测试用户并退出了 App Store。我打开我的应用程序，单击购买，然后系统提示我输入测试用户的 Apple ID 和密码。我输入这些内容，然后我收到一个错误对话框，上面写着“您的 Apple ID 已被禁用”。

我尝试使用 iForgot 重置我的测试用户的密码；没有帮助。

为什么会这样？我该怎么办？

# javascript - 如何使用 JavaScript 在 IE 6 7 8 9 中分离事件

> ID：12949590
> 
> 赞同：6
> 
> 时间：2012-10-18T07:45:16.507
> 
> 标签：javascript, dom-events, bookmarklet

这是部分代码，不是完整版本。

**我有一个荧光笔，可以在鼠标悬停**时突出显示特定的 html 元素。

我也有一个**click 事件和 listener**。

我的问题是：使用 Internet Explorer v6 v7 v8 v9 时，**荧光笔事件/侦听**器不会分离

我究竟做错了什么？

这就是我附加事件并启动事件侦听器的方式：

```
if (document.body.addEventListener) {
                        //alert(11);
                        document.body.addEventListener('mousemove', handler, false);
                    } else if (document.body.attachEvent) {
                        //alert(12);
                        var ff=function(e) {
                            return handler(e || window.event);
                        };
                        //alert(ff);
                        document.body.attachEvent('onmousemove', ff);
                    } else {
                        //alert(13);
                        document.body.onmousemove = handler;
                    } 
```

这就是我停止`onmousemove`/ `mouse`event/listener 的方式：

```
if (document.body.removeEventListener) {
                    document.body.removeEventListener('mousemove', handler, false);
                } else if (document.body.detachEvent) {
                    document.body.detachEvent('onmousemove', function(e) {
                        return handler(e || window.event);
                    });
                } else {
                    document.body.removeAttribute("onmousemove");
                } 
```

这就是我停止`onclick`/`click`事件/监听器的方式：

```
if (document.body.removeEventListener) {
                    document.body.removeEventListener('click', ClosetAffairHighlighter.highlightClick, false);
                } else if (document.body.detachEvent) {
                    document.body.detachEvent('onclick', ClosetAffairHighlighter.highlightClick);
                } else {
                    document.body.removeAttribute("onclick");
                } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-18T07:52:36.103

基于[这篇文章](http://zh.scribd.com/doc/92683134/210/Internet-Explorer-Event-Handlers)，一个跨浏览器的事件处理程序可以是：

```
var EventUtil = {
    addHandler: function(element, type, handler) {
        if (element.addEventListener) {
            element.addEventListener(type, handler, false);
        } else if (element.attachEvent) {
            element.attachEvent("on" + type, handler);
        } else {
            element["on" + type] = handler;
        }
    },
    removeHandler: function(element, type, handler) {
        if (element.removeEventListener) {
            element.removeEventListener(type, handler, false);
        } else if (element.detachEvent) {
            element.detachEvent("on" + type, handler);
        } else {
            element["on" + type] = null;
        }
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T07:48:23.580

您需要传递给`detachEvent`您添加的函数`attachEvent`。在您的代码中，您正在传递一个新代码（它们具有相同的`toString()`功能并且会做相同的事情，但它们不一样）。

您应该`ff`使用

```
var ff;
if (document.body.addEventListener) {
    document.body.addEventListener('mousemove', handler, false);
} else if (document.body.attachEvent) {
     ff=function(e) {
          return handler(e || window.event);
     }; 
```

然后打电话

```
else if (document.body.detachEvent) {
     document.body.detachEvent('onmousemove', ff);
} 
```

删除旧 IE 中的侦听器。

**注意：**我真的很怀疑`document.body.removeAttribute("onclick");`：真的有这种情况有用吗？

# google-app-engine - Appengine 通道尝试连接到 IP 0.0.0.0

> ID：12949592
> 
> 赞同：1
> 
> 时间：2012-10-18T07:45:26.027
> 
> 标签：google-app-engine, channels

我正在调试 Channel API 使用的问题，该问题在本地（编译）并在我 GWT 编译时根据我的 GWT Logging 配置进行部署。

注意：我知道 GAE 1.7.2 中带有 Channels 的问题，并在本地运行时在我的 web.xml 中添加 _ah_DevSocketFilter 以解决它。

在本地启动我的页面 (127.0.0.1:8888) 我在 Chrome 的控制台中得到以下输出：

```
GET http://127.0.0.1:8888/_ah/channel/dev?command=connect&channel=channel-vzwzro-1350552986426-ALL:ALL 500 (ApplicationError: 2: Received exception executing http method POST against URL http://0.0.0.0:8888/_ah/channel/connected/: Permission denied: Not allowed to issue a socket connect: permission denied.) 
```

有谁知道它从哪里获得 0.0.0.0 IP 地址，为什么？

# c# - 高质量图像缩放

> ID：12949595
> 
> 赞同：2
> 
> 时间：2012-10-18T07:45:47.173
> 
> 标签：c#, xaml, windows-8, microsoft-metro, windows-runtime

我已经阅读了这个问题[High Quality Image Scaling Library](https://stackoverflow.com/questions/249587/high-quality-image-scaling-c-sharp)，但它只与 GDI+ 相关。

当我在我的应用程序中缩小一个`Image`时，它变得非常锯齿。

我在类上找不到任何`Image`可以提高缩小质量的属性。

我怎样才能做到这一点？

编辑：

我现在使用了这段代码：

```
BitmapImage img = new BitmapImage();
img.UriSource = new Uri(Graphic, UriKind.Relative);
return img; 
```

包含图像路径的`Graphic`a在哪里，但出现此异常：`string`

> Weather.DLL 中出现“System.ArgumentException”类型的异常，但未在用户代码中处理
> 
> 附加信息：给定的 System.Uri 无法转换为 Windows.Foundation.Uri。有关详细信息，请参阅[http://go.microsoft.com/fwlink/?LinkID=215849](http://go.microsoft.com/fwlink/?LinkID=215849)。

据我所知，`Windows.Foundation.Uri`没有在`.net`框架中使用。

那么为什么它给我这个错误呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T13:03:22.547

在 XAML 中：

```
 <Image Width="250" Height="250" Stretch="UniformToFill">
        <Image.Source>
           <BitmapImage UriSource="{Binding ImagePath}" DecodePixelHeight="250"/>
        </Image.Source>
    </Image> 
```

在 C# 中：

```
 BitmapImage bitmapImage = BitmapImage("URL HERE");
    bitmapImage.DecodePixelHeight = 250; 
```

仅设置 DecodePixelHeight 或 DecodePixelWidth。

[http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.decodepixelheight.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.decodepixelheight.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T00:56:47.757

通过使用对图像缩放的内置支持，您可能可以完全避免遇到的问题：

[http://msdn.microsoft.com/en-us/library/windows/apps/hh465362.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465362.aspx)

您可以包含不同分辨率的图像的多个版本（相同的文件名但具有已知后缀或位于已知文件夹中），系统将自动为用户设备的 DPI 加载适当的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:59:11.160

我最终创建了第二个更小的图像，并在我需要缩小它的所有地方使用它。

# java - 运行基本 Spring Batch 示例时出错 - 原因：java.lang.ClassNotFoundException: org.hsqldb.jdbcDriver

> ID：12949599
> 
> 赞同：4
> 
> 时间：2012-10-18T07:45:57.330
> 
> 标签：java, maven, spring-batch

我正在尝试使用 STS（SpringSource 工具套件）中的简单 spring 批处理项目模板运行示例 Spring 批处理项目。

为此，我在 Eclipse 中运行了以下步骤：

右键 -> 新建 -> 其他选择的 SpringSource 工具套件 -> Spring Template Project -> Simple Spring Batch 输入了相关的项目名和包名

然后我尝试使用

```
mvn exec:java 
```

我收到以下错误：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'exampleConfiguration': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.springframework.batch.core.repository.JobRepository com.spring.hello.ExampleConfiguration.jobRepository; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jobRepository': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Could not get Connection for extracting meta data; nested exception is org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot load JDBC driver class 'org.hsqldb.jdbcDriver'
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:288)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
at org.springframework.batch.core.launch.support.CommandLineJobRunner.start(CommandLineJobRunner.java:282)
at org.springframework.batch.core.launch.support.CommandLineJobRunner.main(CommandLineJobRunner.java:574)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:290)
at java.lang.Thread.run(Thread.java:619)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.springframework.batch.core.repository.JobRepository com.spring.hello.ExampleConfiguration.jobRepository; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jobRepository': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Could not get Connection for extracting meta data; nested exception is org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot load JDBC driver class 'org.hsqldb.jdbcDriver'
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:508)
at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285)
... 20 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jobRepository': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Could not get Connection for extracting meta data; nested exception is org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot load JDBC driver class 'org.hsqldb.jdbcDriver'
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:480)
... 22 more
Caused by: org.springframework.jdbc.support.MetaDataAccessException: Could not get Connection for extracting meta data; nested exception is org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot load JDBC driver class 'org.hsqldb.jdbcDriver'
at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:293)
at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:320)
at org.springframework.batch.support.DatabaseType.fromMetaData(DatabaseType.java:93)
at org.springframework.batch.core.repository.support.JobRepositoryFactoryBean.afterPropertiesSet(JobRepositoryFactoryBean.java:145)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
... 32 more
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot load JDBC driver class 'org.hsqldb.jdbcDriver'
at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80)
at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:280)
... 37 more
Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot load JDBC driver class 'org.hsqldb.jdbcDriver'
at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1136)
at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:880)
at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:111)
at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:77)
... 38 more
Caused by: java.lang.ClassNotFoundException: org.hsqldb.jdbcDriver
at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:169)
at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1130)
... 41 more 
```

看起来没有找到和/或正确加载 HSQLDB 驱动程序。

我已经检查了 Maven 依赖项，并且 hsqldb 肯定在那里并且被拉到类路径上的 Eclipse 中。

```
 <dependency>
        <groupId>hsqldb</groupId>
        <artifactId>hsqldb</artifactId>
        <version>1.8.0.7</version>
    </dependency> 
```

任何想法为什么我会看到这个？

编辑：添加 ApplicationContext xml

```
<?xml version="1.0" encoding="UTF-8"?> 
```

http://www.springframework.org/schema/batch http://www.springframework.org/schema/batch/spring-batch-2.1.xsd [http://www.springframework.org/schema/jdbc](http://www.springframework.org/schema/jdbc) http:// /www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd [http://www.springframework.org/schema/beans](http://www.springframework.org/schema/beans) http://www.springframework.org/schema/beans/spring-beans-3.0 .xsd [http://www.springframework.org/schema/context](http://www.springframework.org/schema/context) http://www.springframework.org/schema/context/spring-context-3.0.xsd">

```
<context:property-placeholder location="classpath:batch.properties" />

<context:component-scan base-package="com.spring.hello" />

<jdbc:initialize-database data-source="dataSource">
    <jdbc:script location="${batch.schema.script}" />
</jdbc:initialize-database>

<batch:job-repository id="jobRepository" />

<import resource="classpath:/META-INF/spring/module-context.xml" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:02:16.950

有时，Eclipse 的行为很奇怪。我猜 Eclipse 无法使用您新添加的依赖项（HSQLDB 驱动程序）更新项目构建路径。我建议您使用 Eclipse 的 maven 集成插件[http://www.eclipse.org/m2e/](http://www.eclipse.org/m2e/)这将使您的生活变得轻松。您可以从 eclipse(juno) 市场下载它。

# ios - GPUImage 需要很长时间才能将图像保存在 iphone4 4s 中。我能怎么做？

> ID：12949602
> 
> 赞同：1
> 
> 时间：2012-10-18T07:46:23.090
> 
> 标签：ios, gpuimage

我在一个视图类中定义了这个函数， **filter = GPUImageWhiteBalanceFilter**

```
[self.stillCamera capturePhotoAsImageProcessedUpToFilter:self.filter withCompletionHandler:^(UIImage * image,NSError * error){
        @autoreleasepool {
            if (!image) {//得到照片发生错误
                if ([self.delegate respondsToSelector:@selector(gpuImageCameraViewStillImageCaptured:image:error:)]) {
                    [self.delegate gpuImageCameraViewStillImageCaptured:self image:nil error:error];
                }
            }
            else{
                if ([self.delegate respondsToSelector:@selector(gpuImageCameraViewStillImageCaptured:image:error:)]) {
                    [self.delegate gpuImageCameraViewStillImageCaptured:self image:image error:nil];
                }
            }
        }
    }]; 
```

我像这样在 ViewController 中完成委托

```
NSInvocationOperation *op = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(savePhotosThreadSingle:) object:image];
    [_threadQueue addOperation:op];
    [op release]; 
```

savePhotosThreadSingle：是一种将图像保存到照片库的方法， **但在 iPhone4s 中保存该图像大约需要 3 秒**我该怎么办？谢谢

# c# - 获取与给定点重叠的所有点（带半径的圆）

> ID：12949605
> 
> 赞同：2
> 
> 时间：2012-10-18T07:46:40.617
> 
> 标签：c#, sql-server-2008, gis, geocoding

我需要找到“圆圈重叠给定点”系统的最佳方法。

我有很多点，例如餐馆，每个项目都有地点的一个点，以及例如“带出食物”的半径。半径不同，有的有 3 公里，有的有 10 公里。我正在从一个点搜索。例如“我的位置”纬度/经度。

我需要找到与我的观点重叠的所有餐厅的最佳方法。（会给我带来食物）。（不是圆圈中的点，而是哪些圆圈与我的观点重叠。）

我正在考虑将 lat/lng 存储为 SQLServer 2008 中的地理类型。这是这样做的方法吗？

可以直接在sqlserver上面查询吗？还是我需要在代码中做到这一点？这样做的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:07:32.400

是的，这正是`geography`空间法擅长的东西。这是一个简短的例子：

```
DECLARE @Restaurant TABLE (
    Name nvarchar(50),
    Location geography,
    DeliveryRadiusMetres int
);

INSERT @Restaurant
VALUES
-- long lat
('Dominos','POINT(-0.109339 51.532835)',2000 ),
('Pizza Hut','POINT(-0.102961 51.541157)',2000 ); 
```

请注意，这里要构造`geography`值，我使用的是字符串的隐式转换，它在幕后调用`geography::Parse`.

```
DECLARE @MyLocation geography = 'POINT(-0.115063 51.550231)';

SELECT
    Name
FROM
    @Restaurant R
WHERE
    R.Location.STDistance(@MyLocation) <= R.DeliveryRadiusMetres
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:00:54.903

是的，您可以将圆圈绘制为地理/几何数据类型的点。然后，您可以使用 STWithin 和 STTouches 等函数直接针对这些数据编写 SQL 查询。

将您的餐厅位置设置为具有半径的点。然后你可以写一个这样的查询：

```
DECLARE @RestaurantCoverage Geometry
SET @RestaurantCoverage = 'Point(10 5)' --Location
SET @RestaurantCoverage = @RestaurantCoverage.STBuffer(5)     --Cover radius
DECLARE @YourLocation Geometry
SET @YourLocation = 'Point(13 5)' --Your location

SELECT @YourLocation.STWithin(@RestaurantCoverage) 
```

[http://technet.microsoft.com/en-us/library/bb933991.aspx](http://technet.microsoft.com/en-us/library/bb933991.aspx)

也可以使用 where 语句直接处理表数据。

# android - adb shell 命令使 Android 软件包卸载对话框出现

> ID：12949609
> 
> 赞同：132
> 
> 时间：2012-10-18T07:46:59.397
> 
> 标签：android, adb, uninstallation

我已经`adb`运行并且设备以调试模式连接到我的系统，

我想使用意图启动卸载应用程序`adb shell am start <INTENT>`

我不想卸载使用`adb uninstall com.company.apppackage`，我也不想这样做，即使使用`adb shell pm uninstall com.company.apppackage`

如何`android.intent.action.DELETE`针对特定包发送带有操作的意图，以允许用户查看提示并卸载程序？

* * *

## 回答 #1

> 赞同：224
> 
> 时间：2012-12-12T05:48:25.540

在 cmd 中使用此命令：

> adb shell pm uninstall -k **com.packagename**

例如：

```
adb shell pm uninstall -k com.fedmich.pagexray 
```

该`-k`标志告诉包管理器保留缓存和数据目录，即使应用程序已被删除。如果您想要完全卸载，请不要指定`-k`.

* * *

## 回答 #2

> 赞同：179
> 
> 时间：2012-10-18T08:17:56.247

您可以使用以下命令从 adb 执行此操作：

```
adb shell am start -a android.intent.action.DELETE -d package:<your app package> 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-12-10T21:02:14.230

使用 ADB，您可以使用以下三个命令中的任何一个：

```
adb shell am start -a android.intent.action.UNINSTALL_PACKAGE -d "package:PACKAGE"
adb shell am start -n com.android.packageinstaller/.UninstallerActivity -d "package:PACKAGE"
adb shell am start -a android.intent.action.DELETE -d "package:PACKAGE" 
```

将 PACKAGE 替换为已安装用户应用程序的包名称。该应用程序必须不是设备管理员才能使命令成功运行。所有这些命令都需要用户确认才能删除应用程序。

该命令的详细信息可以通过检查*am*的使用来了解`adb shell am`。

我使用[Elixir 2](https://play.google.com/store/apps/details?id=com.bartat.android.elixir)获得了有关这些命令的信息（使用任何等效的应用程序）。我用它来展示 Package Installer 应用程序的活动（您在安装和删除应用程序期间看到的 GUI）以及相关的意图。你去吧。

我使用的另一种方法是：我尝试使用 GUI 卸载应用程序，直到看到最终确认。我没有确认但执行命令

```
adb shell dumpsys activity recents   # for Android 4.4 and above
adb shell dumpsys activity activities # for Android 4.2.1 
```

除其他外，它向我展示了后台传递的意图的有用细节。例子：

```
intent={act=android.intent.action.DELETE dat=package:com.bartat.android.elixir#com.bartat.android.elixir.MainActivity flg=0x10800000 cmp=com.android.packageinstaller/.UninstallerActivity} 
```

在这里，您可以看到动作、数据、标志和组件 - 足以达到目标。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-11-09T10:27:14.577

虽然上述答案有效，但如果您有多个设备连接到您的计算机，则可以使用以下命令从其中一个设备中删除应用程序：

```
adb -s <device-serial> shell pm uninstall <app-package-name> 
```

如果要查找设备序列号，请使用以下命令：

```
adb devices -l 
```

这将为您提供连接的设备列表。左列显示设备序列号。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-01-03T19:24:23.037

我假设您`developer mode`在您的 android 设备上启用并且您已连接到您的设备并且您具有 shell 访问权限 ( `adb shell`)。

完成此操作后，您可以使用此命令卸载应用程序`pm uninstall --user 0 <package.name>`。**0 是 root id** - 这样你就不需要太 root 设备了。

### 这是我在华为 P110 lite 上的操作示例

```
# gain shell access
$ adb shell

# check who you are
$ whoami
shell

# obtain user id
$ id
uid=2000(shell) gid=2000(shell)

# list packages
$ pm list packages | grep google                                                                                                                                                         
package:com.google.android.youtube
package:com.google.android.ext.services
package:com.google.android.googlequicksearchbox
package:com.google.android.onetimeinitializer
package:com.google.android.ext.shared
package:com.google.android.apps.docs.editors.sheets
package:com.google.android.configupdater
package:com.google.android.marvin.talkback
package:com.google.android.apps.tachyon
package:com.google.android.instantapps.supervisor
package:com.google.android.setupwizard
package:com.google.android.music
package:com.google.android.apps.docs
package:com.google.android.apps.maps
package:com.google.android.webview
package:com.google.android.syncadapters.contacts
package:com.google.android.packageinstaller
package:com.google.android.gm
package:com.google.android.gms
package:com.google.android.gsf
package:com.google.android.tts
package:com.google.android.partnersetup
package:com.google.android.videos
package:com.google.android.feedback
package:com.google.android.printservice.recommendation
package:com.google.android.apps.photos
package:com.google.android.syncadapters.calendar
package:com.google.android.gsf.login
package:com.google.android.backuptransport
package:com.google.android.inputmethod.latin

# uninstall gmail app
pm uninstall --user 0 com.google.android.gms 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-12-19T08:44:47.480

在我的情况下，我`adb shell pm list packages`首先查看我的 Android 设备或模拟器中安装了哪些包/应用程序，然后在找到所需的包/应用程序后，我执行`adb shell pm uninstall -k com.package.name`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-23T13:14:39.397

运行@neverever415 我得到的答案：

> 失败 [DE​​LETE_FAILED_INTERNAL_ERROR]

在这种情况下，请检查您是否编写了*正确的包名称*，也许它是一个调试版本，例如`com.package_name.debug`：

```
adb shell pm uninstall com.package_name.debug 
```

或查看[https://android.stackexchange.com/questions/179575/how-to-uninstall-a-system-app-using-adb-uninstall-command-not-remove-via-rm-or](https://android.stackexchange.com/questions/179575/how-to-uninstall-a-system-app-using-adb-uninstall-command-not-remove-via-rm-or)。

# iphone - 使用 frontFacingCamera 在 UIImagePickerController 中镜像图像

> ID：12949612
> 
> 赞同：0
> 
> 时间：2012-10-18T07:47:02.730
> 
> 标签：iphone, ios, uiimage, uiimagepickercontroller

我正在开发一个应用程序并使用`UIImagePickerController`. 当应用程序启动`UIImagePickerController`的对象时，它具有后置摄像头作为默认选择。后置摄像头一切正常。

但是，当我将相机源更改为`frontFacingCamera`imagePicker 的切换相机按钮并捕获图像时，我得到了一个镜像图像。我的左臂在图像中显示为右臂。我该如何解决这个问题？

1.  那么有可能解决这个问题`UIImagePickerController`吗？
2.  如果不是，有什么方法可以进行图像处理以获得正常图像？
3.  是否必须`AVFoundation`为此问题学习课程？
4.  如果是的话，第三。请导航到一个很好的教程。

不幸的是，我在`AVFoundation`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:27:12.470

我遇到了同样的问题，并使用此方法以相反的方式镜像图像。

```
- (UIImage *) flipImageLeftRight:(UIImage *)originalImage {
    UIImageView *tempImageView = [[UIImageView alloc] initWithImage:originalImage];

    UIGraphicsBeginImageContext(tempImageView.frame.size);
    CGContextRef context = UIGraphicsGetCurrentContext();

     //CGAffineTransformMake(<#CGFloat a#>, <#CGFloat b#>, <#CGFloat c#>, <#CGFloat d#>, <#CGFloat tx#>, <#CGFloat ty#>)
     CGAffineTransform flipVertical = CGAffineTransformMake(1, 0, 0, -1, 0,  tempImageView.frame.size.height);
     CGContextConcatCTM(context, flipVertical);

     [tempImageView.layer renderInContext:context];

     UIImage *flipedImage = UIGraphicsGetImageFromCurrentImageContext();
     flipedImage = [UIImage imageWithCGImage:flipedImage.CGImage scale:1.0 orientation:UIImageOrientationDown];
     UIGraphicsEndImageContext();

     [tempImageView release];

     return flipedImage;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T23:52:51.543

请尝试下面的代码

```
- (UIImage *)PictureFlipe:(UIImage *)picture
{
    UIImage * flippedImage = [UIImage imageWithCGImage:picture.CGImage scale:picture.scale orientation:UIImageOrientationLeftMirrored];

    return flippedImage;
} 
```

# android - Google ADK 2012 - 购买地点

> ID：12949616
> 
> 赞同：-1
> 
> 时间：2012-10-18T07:47:33.337
> 
> 标签：android, adk

有人知道我在哪里可以买到 Google ADK 2012 吗？

谢谢托马斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T07:50:46.243

你不能，但如果你在谷歌搜索它，你可以找到一些替代品。

示例： [http ://www.seeedstudio.com/depot/seeeduino-adk-main-board-p-846.html](http://www.seeedstudio.com/depot/seeeduino-adk-main-board-p-846.html)

从开发者网站：

> 在 Google I/O 2012 开发者大会上生产和分发了数量有限的这些工具包。如果您没有收到这些工具包之一，请不要害怕！硬件的规格和设计文件也已发布，供制造商和爱好者使用。您应该期望看到可以购买具有类似功能的套件，或者您可以自己构建一个！ [http://developer.android.com/tools/adk/adk2.html](http://developer.android.com/tools/adk/adk2.html)

注意：此板与 ADK 2012 不兼容，仅与 2011 ADK 兼容。

# javascript - TypeError：无法从 null 读取属性“长度”

> ID：12949618
> 
> 赞同：1
> 
> 时间：2012-10-18T07:47:52.507
> 
> 标签：javascript, null

我对 javascript 非常陌生，并试图在 Google 电子表格和邮件中使用邮件合并功能。我复制了教程脚本并进行了一些必要的更改（至少我能想到的）。但是当我尝试运行脚本时，我得到了 TypeError: Cannot read property "length" from null。（第 43 行）

上面提到的第 43 行就是下面的 for 循环。有人可以帮我知道要修复什么，以便我可以运行脚本吗？

```
// Replaces markers in a template string with values define in a JavaScript data object.
// Arguments:
//   - template: string containing markers, for instance ${"Column name"}
//   - data: JavaScript object with values to that will replace markers. For instance
//     data.columnName will replace marker ${"Column name"}
// Returns a string without markers. If no data is found to replace a marker, it is
// simply removed.
function fillInTemplateFromObject(template, data) {
    var email = template;
    // Search for all the variables to be replaced, for instance ${"Column name"}
    var templateVars = template.match(/\$\{\"[^\"]+\"\}/g);
    // Replace variables from the template with the actual values from the data object.
    // If no value is available, replace with the empty string.
    for (var i = 0; i < templateVars.length; ++i) {
        // normalizeHeader ignores ${"} so we can call it directly here.
        var variableData = data[normalizeHeader(templateVars[i])];
        email = email.replace(templateVars[i], variableData || "");
    }
    return email;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:58:24.340

如果正则表达式没有匹配项，则为`templateVars`null。您需要在循环之前检查这一点。

更新：

```
if (templateVars !== null) {
    for (var i = 0; i < templateVars.length; i++) {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-30T08:37:38.863

# objective-c - 如何在自定义视图控制器中处理后台/前台委托

> ID：12949625
> 
> 赞同：0
> 
> 时间：2012-10-18T07:48:10.630
> 
> 标签：objective-c, uiviewcontroller, background, appdelegate

我有一个应用程序，它有一个`SynchViewController`. 当同步视图控制器处于活动状态时，应用程序可能会进入后台并在几天后回到前台。在这种情况下，我必须重新加载已经显示的同步视图控制器。现在 - 我的问题。实现这一目标的最佳实施是什么？我是否订阅了`reloadSynch`在 my中调用的通知`SynchViewController`，然后在`applicationWillEnterForeground`我中`AppDelegate`发送通知？或者这是一个坏主意？

这种情况下的*最佳实践*是什么？

安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:12:08.107

您可以观察 UIApplication 的通知：`UIApplicationWillEnterForegroundNotification`和`UIApplicationDidEnterBackgroundNotification`.

# c# - 在 Web 服务调用中发送用户名和密码

> ID：12949629
> 
> 赞同：0
> 
> 时间：2012-10-18T07:48:34.203
> 
> 标签：c#, wcf, web-services

我创建了一个 wbservice。在网络服务中，我创建了一个发送确认的方法。为了发送确认，我在 web.config 文件中提供了 url 的链接，如下所示：-

```
<applicationSettings>
 <ABCD.Properties.Settings>
 <setting name="Servicename"
serializeAs="String">
  <value>http://10.237.1.1/X/Y/Z</value>
 </setting>
  </ABCD.Properties.Settings>
  </applicationSettings>
</configuration> 
```

但是当我运行我的 web 服务时，我收到以下错误：- 请求失败，HTTP 状态为 401：未经授权。是不是我必须在发送确认时提供用户名和密码。如果是，那么请告诉我这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:08:58.597

如果服务托管在 IIS 中，您可能已经设置了身份验证，如果是这样，您需要让您的客户端根据您的身份验证类型发送凭据。如果您不打算设置身份验证，请将其设置为允许匿名访问

# iphone - ASIHttpRequest setProgress：仅调用 0.0 和 1.0 的值

> ID：12949631
> 
> 赞同：0
> 
> 时间：2012-10-18T07:48:41.510
> 
> 标签：iphone, ios, http, asihttprequest, progress

我在[YouTube Resumable Uploads 上醒来](https://developers.google.com/youtube/2.0/developers_guide_protocol_resumable_uploads#Sending_a_Resumable_Upload_API_Request)

使用 ASIHTTPRequest，进度从 0 跳到 1。这是我的代码：

```
-(void)uploadVideoFile:(NSDictionary *) params
{
    if(_location && _location.length != 0)
    {
        NSURL *url = [NSURL URLWithString:_location];
        ASIFormDataRequest *theRequest = [ASIFormDataRequest requestWithURL:url];
        [theRequest setRequestMethod:@"PUT"];

        NSString *length = [NSString stringWithFormat:@"%lld",[WSKSharerHelper fileSizeWithPath:_filePath]];
        [theRequest addRequestHeader:@"Content-Type"    value:@"video/quicktime"];
        [theRequest addRequestHeader:@"Content-Length"  value:length];

        [theRequest appendPostDataFromFile:_filePath];

        theRequest.delegate = self;
        theRequest.uploadProgressDelegate = self;
        theRequest.timeOutSeconds = 100;
        [[ASIManager manager] addRequest:theRequest];
        [[ASIManager manager] startQueue];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T08:23:50.967

```
theRequest.showAccurateProgress = YES; 
```

这将开启准确的进度跟踪。请注意，它在某些情况下会影响性能。有关更多信息，请参阅[文档](http://allseeing-i.com/ASIHTTPRequest/How-to-use)。

# android - 如何使用 FLAG_ONGOING_EVENT 将通知转换为持续类型

> ID：12949632
> 
> 赞同：0
> 
> 时间：2012-10-18T07:48:40.933
> 
> 标签：android, notifications, flags

我注意到在 android 设备的屏幕顶部出现了 2 种不同类型的通知。一个是“正在进行”，另一个是标记为“通知”。我想将我的通知更改为正在进行的类型。一些研究表明我必须将标志设置为：Notification.FLAG_ONGOING_EVENT。我将如何在下面的代码中执行此操作，我还需要做什么才能将其更改为“持续”类型？

```
 NotificationCompat.Builder mBuilder =
                new NotificationCompat.Builder(AudioService.this)
                .setSmallIcon(R.drawable.ic_launcher)
                .setContentTitle("My notification")
                .setContentText("Hello World!");
        // Creates an explicit intent for an Activity in your app
        Intent resultIntent = new Intent(AudioService.this, MainActivity.class);

        // The stack builder object will contain an artificial back stack for the
        // started Activity.
        // This ensures that navigating backward from the Activity leads out of
        // your application to the Home screen.
        TaskStackBuilder stackBuilder = TaskStackBuilder.create(AudioService.this);
        // Adds the back stack for the Intent (but not the Intent itself)
        stackBuilder.addParentStack(MainActivity.class);
        // Adds the Intent that starts the Activity to the top of the stack
        stackBuilder.addNextIntent(resultIntent);
        PendingIntent resultPendingIntent =
                stackBuilder.getPendingIntent(
                    0,
                    PendingIntent.FLAG_UPDATE_CURRENT
                );
        mBuilder.setContentIntent(resultPendingIntent);
        NotificationManager mNotificationManager =
            (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
        // mId allows you to update the notification later on.
        mNotificationManager.notify(mId, mBuilder.build()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T07:55:21.047

Builder 有一个“setOngoing”方法。

```
 NotificationCompat.Builder mBuilder =
                    new NotificationCompat.Builder(AudioService.this)
                    .setSmallIcon(R.drawable.ic_launcher)
                    .setContentTitle("My notification")
                    .setContentText("Hello World!")
                    .setOngoing(true); 
```

# python - 使用 Tornado 框架的 Python 中的正则表达式路由

> ID：12949634
> 
> 赞同：1
> 
> 时间：2012-10-18T07:48:43.463
> 
> 标签：python, regex, routing, tornado

我目前在我的路由中有这个：

(r"/admin", AdminController.Index ), (r"/admin/", AdminController.Index ),

我如何将它们与一行合并并让管理员和管理员/转到 AdminController.Index？

我知道这可以通过正则表达式来实现，但它似乎不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:07:38.420

你说没有用...

由于这是一个正则表达式，它正在匹配，一个正则表达式`/admin/?`将匹配`/admin/`, `/admin`, 和`/admin/foo`.

```
import re
bool(re.match("/admin/","/admin/foo"))
>>> True
bool(re.match("/admin/?$","/admin/foo"))
>>> False 
```

你真正想做的是确保你的正则表达式已经完成。

```
r'/admin/?$' 
```

更有可能是您正在寻找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:29:48.443

这个怎么样：r'/admin/?' 还是 r'/admin/{0,1}？请注意，我只是在谈论正则表达式，不知道这是否适用于 Django。

# c# - 将当前 Datagrid 数据转换为 DataTable

> ID：12949635
> 
> 赞同：0
> 
> 时间：2012-10-18T07:48:45.727
> 
> 标签：c#, wpf, datagrid, datatable

如何将当前的 Datagrid 数据转换为 DataTable？我已经过滤了数据网格，现在我只想过滤数据到数据表中。Datagrid.ItemSource 或 DatagridView 在这里没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:02:09.897

您可以将数据从 datagrid 放入 datatble，如下所示：

```
 DataTable dt = new DataTable();  
        DataColumn[] dcs = new DataColumn[]{};  

        foreach (DataGridViewColumn c in dgv.Columns)  
        {  
            DataColumn dc = new DataColumn();  
            dc.ColumnName = c.Name;  
            dc.DataType = c.ValueType;  
            dt.Columns.Add(dc);  

        }  

        foreach (DataGridViewRow r in dgv.Rows)  
        {  
            DataRow drow = dt.NewRow();  

            foreach (DataGridViewCell cell in r.Cells)  
            {  
                drow[cell.OwningColumn.Name] = cell.Value;  
            }  

            dt.Rows.Add(drow);  
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:08:15.280

将更新的数据保存在会话中，或者将其写入 XML 并随时获取数据。

像这样的东西

```
 private void BindGrid()
    {
        DataTable dt;
        if (Session["GridData"] == null)
        {
            dt = GetData();//From database or and other source
            Session["GridData"] = dt;
        }
        else
        {
            dt = (DataTable)Session["GridData"];
        }

        GridView.datasource = dt;
        GridView.Databind();
    }

    private void UpdataData(object sender, EventArgs e)
    {
        DataTable dt;
        if (Session["GridData"] != null)
        {
            dt = (DataTable)Session["GridData"];

        // Do whatever you want with dt (datatable);
        Session["GridData"] = dt;

        BindGrid();
       }

    } 
```

# asp.net - 无法访问列表视图中的控件

> ID：12949637
> 
> 赞同：4
> 
> 时间：2012-10-18T07:49:09.413
> 
> 标签：asp.net

无法访问列表视图中的控件

**错误**

你调用的对象是空的。

**。CS**

```
public void lnkaddtocart_Command(Object sender, CommandEventArgs e)
{
  ((TextBox)ListView_ProductDetails.FindControl("txtbox_pqty")).Visible = false;   
} 
```

**.aspx**

```
<asp:ListView runat="server" ID="ListView_ProductDetails">
     <LayoutTemplate>
        <asp:PlaceHolder ID="itemPlaceholder" runat="server"></asp:PlaceHolder>
     </LayoutTemplate>
     <ItemTemplate>
              <div class="qty">
                  Qty:
                  <asp:TextBox ID="txtbox_pqty" Text="1" runat="server"/>
                  <input type="hidden" name="product_id" size="2" value="41" />
                       <asp:LinkButton ID="lnkaddtocart" runat="server" 
                            CommandArgument='<%#Eval("pid") %>' 
                            OnCommand="lnkaddtocart_Command"  
                            cssclass="button">
                               <span>Add to Cart</span>
                        </asp:LinkButton>
                  </div>
    </ItemTemplate>
</asp:ListView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:57:30.537

您在项目模板中使用文本框，因此将有多个文本框（每个项目一个）。话虽如此，Listview 不会知道它应该获取哪些文本框。

您必须在单击链接按钮的特定行上查找文本框。

例如：

```
public void lnkaddtocart_Command(Object sender, CommandEventArgs e)
{
    var item = ((Control)sender).NamingContainer as ListViewItem;
    if (item != null)
    {
        ((TextBox)item.FindControl("txtbox_pqty")).Visible = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T08:01:29.427

您需要`FindControl`在`NamingContainer`of the`TextBox`上使用，[`ListViewItem`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listviewitem.aspx)而不是`ListView`. 因此，您可以使用该`LinkButton's` [`NamingContainer`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.namingcontainer.aspx)属性来查找[`ListViewItem`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listviewitem.aspx).

```
var ctrl = (Control) sender;
var lvi = (ListViewItem) ctrl.NamingContainer;
var txt = (TextBox)lvi.FindControl("txtbox_pqty");
txt.Visible = false; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T08:12:57.730

除了“马里奥”之外，在您的列表视图中添加事件，如下所示：

```
<asp:ListView runat="server" ID="ListView_ProductDetails" onitemcommand="lnkaddtocart_Command">
    <LayoutTemplate>
        <asp:PlaceHolder ID="itemPlaceholder" runat="server"></asp:PlaceHolder>
    </LayoutTemplate>
    <ItemTemplate>
        <div class="qty">
            Qty:
            <asp:TextBox ID="txtbox_pqty" text='<%#Eval("pid") %>' runat="server" />
            <input type="hidden" name="product_id" size="2" value="41" />
            <asp:LinkButton ID="lnkaddtocart" runat="server" text='<%#Eval("pid") %>' CommandArgument='<%#Eval("pid") %>'
            cssclass="button"><span>Add to Cart</span></asp:LinkButton>
        </div>
    </ItemTemplate>
</asp:ListView> 
```

CS：

```
public void lnkaddtocart_Command(object sender, ListViewCommandEventArgs e)
    {
        TextBox txt = (TextBox)e.Item.FindControl("txtbox_pqty");
        txt.Visible = false;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T08:20:52.967

**代码内联：**

```
<asp:ListView runat="server" ID="ListView_ProductDetails" DataSourceID="SqlDataSource1"
            OnItemCommand="ListView_ProductDetails_ItemCommand">
            <LayoutTemplate>
                <asp:PlaceHolder ID="itemPlaceholder" runat="server"></asp:PlaceHolder>
            </LayoutTemplate>
            <ItemTemplate>
                <div>
                    Qty:
                    <asp:TextBox ID="txtbox_pqty" Text="1" runat="server" />
                    <input type="hidden" name="product_id" size="2" value="41" />
                    <asp:LinkButton ID="lnkaddtocart" CommandName="addtocart" runat="server" CommandArgument='<%#Eval("pid") %>'
                        CssClass="button"><span>Add to Cart</span></asp:LinkButton>
                </div>
            </ItemTemplate>
 </asp:ListView> 
```

**代码背后：**

```
protected void ListView_ProductDetails_ItemCommand(object sender, ListViewCommandEventArgs e)
    {
        if (e.CommandName == "addtocart")
        {
            ((TextBox)e.Item.FindControl("txtbox_pqty")).Visible = false;
        }
    } 
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T08:02:12.567

您要查找的控件实际上存在于 ListView 产品详细信息的重复元素中。要找到控件，您需要遍历控件层次结构。

让我们从这里开始，用你的方法。首先要做的是获取对包含您的按钮的 ListViewItem 的引用。在这些 .NET 事件签名中，**sender**指的是引发事件的控件。

```
public void lnkaddtocart_Command(Object sender, CommandEventArgs e)
{
    // Attempt to cast sender to a LinkButton
    LinkButton originator = sender as LinkButton;

    // Check that we've found it
    if ( originator != null )
    {
       // Now traverse the control hierarchy to get a ListViewItem
       var parentItem = originator.Parent as ListViewItem;

       if ( parentItem != null 
            && parentItem.ItemType == ListViewItemType.DataItem)
       {
          var textBox = parentItem.FindControl("txtbox_pqty") as TextBox;

          if ( textBox != null )
          {
             textBox.Visible = false;
          }
       }
    }
} 
```

# c - C 编程：从标准输入读取所有 ascii 字符

> ID：12949642
> 
> 赞同：2
> 
> 时间：2012-10-18T07:49:29.353
> 
> 标签：c

我是 C 新手。我很难找到一种方法来编写一个能够从标准输入读取所有 ASCII 字符（包括非打印字符和空格）的程序。我知道 scanf 不适用于空白字符（不确定其他非打印字符）。基本上我想将整个文件放入一个数组中，其中包含原始文本文件（stdin = .txt 文件）中的所有内容。有谁知道我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T07:51:44.480

继续阅读`getchar()`以获取“所有 ascii 字符”。也`fgetc(stdin)`。

要写入文件，您需要使用`FILE *fopen(const char *filename, const char *mode) function, fputc(int c, FILE *stream), fclose(FILE *)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:05:35.280

```
#include<stdio.h>
int main(){
  char buf[16]; 
  int c; 
  while (c=fread(buf,1,16,stdin)) 
    fwrite(buf,1,c,stdout);
} 
```

# javascript - 使用 jQuery 创建新属性

> ID：12949645
> 
> 赞同：6
> 
> 时间：2012-10-18T07:49:49.257
> 
> 标签：javascript, jquery, image, attr

> **可能重复：**
> [jQuery .attr 检索自定义属性返回未定义](https://stackoverflow.com/questions/6303775/jquery-attr-retrieving-custom-attribute-returns-undefined)

我有一个奇怪的问题，但我希望我只是在做一些愚蠢的事情。`<img>`我正在尝试使用 jQuery 在元素上创建一个新属性，这一行：

```
$(selector).attr('selected', 'no'); 
```

当我在 Chrome 中检查 DOM 时，我只看到 selected="selected"，无论我将值设置为什么。

只是一些额外的信息：我不能只使用布尔值，因为我需要跟踪“是”、“否”和“部分”属性值。我正在从 img 本身的“onClick”事件中调用一个 JS 函数，并`this`作为参数传递。我检查了方法中的对象，并传递了正确的对象；设置属性的事实（即使设置了错误的值）也支持这一点。

我很确定我在这里做了一些愚蠢的事情......任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T07:51:17.193

Selected 已经是 HTML 标准中的属性，因此您不能创建具有相同名称的自定义属性。在这种情况下，您应该改用`data-`属性并创建一个属性`data-selected`。

在 jQuery 中，您使用该[`.data()`](http://api.jquery.com/jQuery.data/)方法处理自定义数据属性。

自定义数据属性在[此处](http://dev.w3.org/html5/spec/global-attributes.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)的 HTML5 规范中进行了描述。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T07:51:17.523

你可以像这样插入一个`data-*`自定义属性

```
$(selector).data('selected', 'no'); 
```

您的元素将设置一个`data-selected`属性

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T07:51:31.970

如果您需要将任意数据附加到元素，请使用`.data()`，而不是`.attr()`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T07:51:25.637

DOM 属性与 DOM 属性不同；）

我建议`$(selector).data()`用于您的用例。

# ios - 在 iOS 中重新接收短信

> ID：12949647
> 
> 赞同：0
> 
> 时间：2012-10-18T07:49:59.007
> 
> 标签：ios, xcode, sms

我想知道是否可以从 iOS 应用程序中的特定号码重新接收短信。我需要有办法在越狱而不是手机上做到这一点。我需要该应用程序完全重新接收短信 - 不显示通知或出现在消息中。我不需要能够从手机发送短信，也不需要阅读其他短信，只需从特定号码捕获短信并在我的应用程序中显示来自短信的信息。这已经在 android 中完成了，现在它需要在 iOS 上运行。如果当前的 api 无法实现，也许您可​​以建议我一些不同的方法来让这种想法发挥作用？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:51:33.200

您不能在 iOS 上使用官方 SDK 执行此操作。

# android - 如何有效检查 SD 卡是否存在且可写？

> ID：12949649
> 
> 赞同：1
> 
> 时间：2012-10-18T07:50:06.057
> 
> 标签：android, emulation, sd-card

我正在使用以下代码来检查 SD 卡是否存在并且是否可写。但是当我在模拟器的 SD 卡的上下文中使用该代码时，它显示 Sd 卡不存在于模拟器中，但实际上，文件资源管理器正在显示相应模拟器的SD卡的内容。这是代码：

```
static public boolean hasStorage(boolean requireWriteAccess) {
    //TODO: After fix the bug,  add "if (VERBOSE)" before logging errors.
    String state = Environment.getExternalStorageState();
    System.out.println("storage state is " + state);

    if (Environment.MEDIA_MOUNTED.equals(state)) {
        if (requireWriteAccess) {
            boolean writable = checkFsWritable();
            System.out.println("storage writable  is " + writable );
            return writable;
        } else {
            return true;
        }
    } else if (!requireWriteAccess && Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
        return true;
    }
    return false;
} 
```

此代码显示未安装 SD 卡但文件资源管理器显示不同的图片。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:53:30.350

这项工作将检查已安装和是否可读。

```
private boolean isExternalStorageAvailable() {

        String state = Environment.getExternalStorageState();
        boolean mExternalStorageAvailable = false;
        boolean mExternalStorageWriteable = false;

        if (Environment.MEDIA_MOUNTED.equals(state)) {
            // We can read and write the media
            mExternalStorageAvailable = mExternalStorageWriteable = true;
        } else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
            // We can only read the media
            mExternalStorageAvailable = true;
            mExternalStorageWriteable = false;
        } else {
            // Something else is wrong. It may be one of many other states, but
            // all we need
            // to know is we can neither read nor write
            mExternalStorageAvailable = mExternalStorageWriteable = false;
        }

        if (mExternalStorageAvailable == true
                && mExternalStorageWriteable == true) {
            return true;
        } else {
            return false;
        }
    } 
```

# javascript - 如何在 bazaarvoice api 中使用搜索选项

> ID：12949661
> 
> 赞同：1
> 
> 时间：2012-10-18T07:50:45.340
> 
> 标签：javascript, jquery, api, sdk

我们正在尝试使用 Filter 和 Filter_[Type] 选项搜索评论，但未成功，并且教程中缺少此示例。

请指导我们。我们曾尝试过以下事情

```
http://reviews.apitestcustomer.bazaarvoice.com/bvstaging/data/reviews.json?callback=?&apiversion=4.9&include=products,authors&filter=IsRatingsOnly:true&filter=DisplayLocale:en_US&passkey=kuy3zj9pr3n7i0wxajrzj04xo&limit=5 
```

使用上面的 URL，我们只过滤带有评级的评论

我们正在尝试过滤 ReviewText、Title 标签。我们尝试了下面列出的网址

```
http://reviews.apitestcustomer.bazaarvoice.com/bvstaging/data/reviews.json?callback=?&apiversion=4.9&include=products,authors&filter=ReviewText:this is a test&filter=DisplayLocale:en_US&passkey=kuy3zj9pr3n7i0wxajrzj04xo&limit=5 

http://reviews.apitestcustomer.bazaarvoice.com/bvstaging/data/reviews.json?callback=?&apiversion=4.9&include=products,authors&filter_[Reviews]=ReviewText:this is a test&filter=DisplayLocale:en_US&passkey=kuy3zj9pr3n7i0wxajrzj04xo&limit=5 

http://reviews.apitestcustomer.bazaarvoice.com/bvstaging/data/reviews.json?callback=?&apiversion=4.9&include=products,authors&filter=tag_ReviewText:Morbi bibendum&passkey=kuy3zj9pr3n7i0wxajrzj04xo&limit=5 
```

我们尝试上述 URL 失败。

请指导我们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:33:55.873

在将数据传递给 json 时使用`search="search_text"`属性来搜索所有评论。

# scheduled-tasks - 在集群设置中播放 2 个 Java 计划的 Akka 作业

> ID：12949662
> 
> 赞同：3
> 
> 时间：2012-10-18T07:50:46.977
> 
> 标签：scheduled-tasks, playframework-2.0, akka

我在 Play 2.0.4 开发设置上运行了一些 Akka 作业。对于生产，应用程序将部署到集群设置中，我需要确保某些计划的作业不会并行发生 - 例如，导入仅在单个节点中发生，并且在完成之前不会启动新的导入。

有什么建议或指示吗？或者 Akka 是不是这样的错误工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:34:58.640

我的猜测是您应该将“前端”与“后端”分开。让集群化的 Play 应用程序处理网络请求并构建另一个应用程序来处理后台作业。

也可以调整 Akka 配置，使负责后台作业的 Actor 始终在单个集群节点上查找。不过，这可能只有在您需要一种简单的方式与该演员交流时才有意义。查看[有关 Remoting 的 Akka 文档以](http://doc.akka.io/docs/akka/2.0.3/scala/remoting.html)获取更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-19T18:40:54.337

这是一个合适的 Akka 集群吗？

您可以使用集群单例来强制作业只发生 1 次

[http://doc.akka.io/docs/akka/snapshot/contrib/cluster-singleton.html](http://doc.akka.io/docs/akka/snapshot/contrib/cluster-singleton.html)

如果您的工作量对于 1 个演员来说太多了，那么您仍将希望使用集群单例.. 但将他用作主人，并让他将工作分配给奴隶来完成实际工作。如果你只保留 1 个 master 和 N 个 slave，你可以确保只做一次工作。

# c# - 使用两个打开的表单最大化应用程序

> ID：12949664
> 
> 赞同：0
> 
> 时间：2012-10-18T07:50:52.407
> 
> 标签：c#, winforms

我的应用程序中有两个表单，第一个表单使用了第一个表单上显示的背景和 sec 表单，其中包含以下代码：

```
frsform _frsform=new frsform();     
_frsform.TopLevel = true;
_frsform.ShowInTaskbar = false;
_frsform.ShowDialog(); 
```

我使用此代码最小化两个打开的表单

```
 foreach (Form frm in Application.OpenForms)
 {
   frm.WindowState = FormWindowState.Minimized;
 } 
```

但是当我点击任务栏最大化我的应用程序时，第二个表单被隐藏了，我只看到第一个表单。

当我最大化应用程序时，我必须做什么才能看到这两种形式？（见 sec 表格后面的第一个表格）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:38:32.323

当您调整大小时，下面将在您的第一个表单上捕获事件，然后允许您对第二个表单进行所需的调整：

```
 private void Form1_Resize(object sender, EventArgs e)
   {
       if (this.WindowState == FormWindowState.Maximised)

       {
              // add code here to show second form

       }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:58:45.507

您将“_frsform”显示为主窗体上的对话框。当您最小化“_frsform”时会自行关闭。所以最好使用“Show”而不是“Showdialog”。

# arrays - 将长度不均匀的结构数组重新排列为单个一维数组

> ID：12949665
> 
> 赞同：2
> 
> 时间：2012-10-18T07:50:52.720
> 
> 标签：arrays, performance, matlab, structure

我有一个结构数组，包含三个字段——一个数组、数组的长度和一个数字。

```
N = 5;
data = struct;
for i=1:N
    n = ceil(rand * 3);
    data(i).len = n;
    data(i).array = rand(1,n);
    data(i).number = i;
end 
```

数据如下所示：

```
data = 
1x5 struct array with fields:
    len    = [ 1 3 3 1 1 ]
    array  = [[0.8]; [0.7 0.9 0.4]; [0.7 0 0.3]; [0.1]; [0.3]]
    number = [ 1 2 3 4 5 ] 
```

我可以通过多种方式将数组作为 1x9 数组返回：

```
>>> [data.array] 
>>> cat(2,data.array)
[0.8 | 0.7 0.9 0.4 | 0.7 0 0.3 | 0.1 | 0.3]     %  | shows array separation 
```

我想重复数字 ( `data.number`)`len`次，以生成与串联数组相同长度的数组。

我目前正在这样`arrayfun`做`cell2mat`：

```
>> x = arrayfun(@(x) repmat(x.number, 1, x.len), data, 'UniformOutput', false)
x = 
    [1]    [1x3 double]    [1x3 double]    [4]    [5]
>> cell2mat(x)
[ 1 2 2 2 3 3 3 4 5] 
```

这使得数字与数组对齐。

```
arrays =  [ 0.8 | 0.7 0.9 0.4 | 0.7 0 0.3 | 0.1 | 0.3 ] 
numbers = [ 1   | 2   2   2   | 3   3   3 | 4   | 5   ] 
```

* * *

这背后的想法是将数据提供给 GPU 进行处理 - 但重新排列数据所需的时间比实际处理时间长几个数量级。

`Arrayfun`当 N=100,000 时需要约 5 秒，而 for 循环调用`repmat`需要约 4 秒。

有没有更快的方法将结构中不均匀数组中的数据重新排列成匹配长度的一维数组？我愿意使用不同的数据结构。

* * *

**测试向量化方法：**

```
data = struct;
data(1).len = 1;
data(1).array = [1 2 3];
data(1).number = 11;
data(2).len = 0;
data(2).array = [];
data(2).number = 12;
data(3).len = 2;
data(3).array = [4 5 6; 7 8 9];
data(3).number = 13;

list_of_array = cat(1,data.array)

idx = zeros(1,size(list_of_array,1));
% Set start of each array to 1
len = cumsum([data.len])
idx(len) = 1
% Flat indices
idx = cumsum([1 idx(1:end-1)])

nf = [data.number]
repeated_num_faces = nf(idx) 
```

给出输出：

```
list_of_array =
     1     2     3
     4     5     6
     7     8     9
len =
     1     1     3    % Cumulative lengths
idx =
     1     0     1    % Ones at start
idx =
     1     2     2    % Flat indexes - should be [1 3 3]
nf =
    11    12    13    % Numbers expanded
repeated_num_faces =
    11    12    12    % Wrong .numbers - should be [11 13 13] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:03:02.300

好吧，`struct`这里不是最容易处理的。当然，你不应该使用`repmat`. 而不是这样，预分配`data_number`数组并执行`for`循环：

```
tic;
data_array  = [data(:).array];
data_number = zeros(size(data_array));
start = 1;
for i=1:N
    nel = data(i).len;
    data_number(start:start+nel-1) = data(i).number;
    start = start+nel;
end
toc; 
```

这是另一个“矢量化”解决方案，`cumsum`用于标记“平面”矢量中的索引

```
tic;
data_array  = [data.array];
data_number = zeros(size(data_array));

% cumulative sum of number of elements in every array
len = cumsum([data.len]);

% mark the end of every array in a 'flat' vector
data_number(len) = 1;

% compute 'flat' indices for every data(i).array
data_number = cumsum([1 data_number(1:end-1)]);

% extract the data.number field
data_num = [data.number];
data_number = data_num(data_number);
toc; 
```

对于一个数据集`N=1e5`的时间是：

```
Elapsed time is 0.153539 seconds.
Elapsed time is 0.110694 seconds. 
```

# grails - 如何将 AngularJS 与服务器端框架结合起来？

> ID：12949667
> 
> 赞同：0
> 
> 时间：2012-10-18T07:50:55.983
> 
> 标签：grails, angularjs

我正在使用 Grails 创建很酷的网站。它有自己的模板引擎、控制器、路由规则等。AngularJS 也有模板引擎、控制器、路由规则。什么时候应该使用 Grails/什么时候应该使用 Angular JS？我是 AngularJS 的新手，所以我很难只使用 AngularJS + JSON 服务器响应来实现整个事情

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:20:18.570

标准方法似乎是在服务器端构建一个 REST 接口并使用它与 Angular 进行通信。我不了解 Grails，但我确信会有一些插件/库用于创建 REST API，或者您可以编写自己的。

最常见的类型将接收您的请求并将 JSON 对象返回到 Angular。

Angular 教程的第 11 步展示了如何将 Angular 连接到 REST。 [http://docs.angularjs.org/tutorial/step_11](http://docs.angularjs.org/tutorial/step_11)

正如亚历山德罗所指出的，这是一个非常广泛的问题，您可能需要做更多的阅读才能使某些东西发挥作用，但这是最常见的方法。

# c++ - 引用数据成员更改 const 函数内的另一个数据成员

> ID：12949671
> 
> 赞同：2
> 
> 时间：2012-10-18T07:51:10.440
> 
> 标签：c++, reference, constants

如果这个问题已经被问过，我很抱歉，但我找不到同样的问题。请将我重定向到相关问题。

```
#include<iostream>

using namespace std;

class ABC
{
    int a;
    int &ref;
public:    
    ABC(int arg = 0):a(arg), ref(a){}
    void mutate_func(int arg) const {
        ref = arg;
    }
    void print_val() {
        cout << endl << &a << "\t" << &ref;
        cout << endl << a << "\t" << ref;
    }
};

int main()
{
    ABC abc_obj(5);
    cout << sizeof(abc_obj);

    abc_obj.print_val();
    abc_obj.mutate_func(10);
    abc_obj.print_val();
    return 0;
} 
```

我正在尝试通过仅属于同一类的引用变量来修改 const 成员函数内的类的数据成员。

我有两个问题——

1.  为什么它不抛出编译错误。

2.  我正在打印两个变量的地址，并且正如预期的那样，它们都显示相同的地址，但实例的 sizeof() 仍然显示大小为 8 个字节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:08:52.797

1.  编译器无法在编译时完全跟踪引用目标。
2.  因为它需要存储在引用所指的地方。

这是一个非常容易触发未定义行为的类。只需为其创建一个 const 对象并调用 const 成员函数。

C++ 支持`mutable`在 const 成员函数中更改对象位的受支持机制的关键字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:14:35.327

我可以回答 sizeof 和 address 部分。

引用可以看作是语法较轻的指针，因此它需要与指针等效的存储空间（此处为 4 个字节）。

引用仅在其初始化期间被修改`ref(a)`。在其初始化之后，对引用的任何操作都是在被引用的值上执行的，因此`&ref`给出被引用值的地址而不是引用本身。所以`&a == &ref`完全有道理。

# r - 聚合时间序列时避免 for 循环

> ID：12949683
> 
> 赞同：3
> 
> 时间：2012-10-18T07:52:10.160
> 
> 标签：r, functional-programming, plyr

我明白为什么矢量化函数比 for 循环更好。

但是有一些问题我看不到矢量化函数式编程解决方案。其中之一是将月度数据相加以获得季度数据。替换此代码的任何建议...

```
month <- 1:100
A422072L <- c(rep(NA, 4), rnorm(96, 100, 5) ) + 2 * month
A422070J <- c(NA, NA, rnorm(96, 100, 5), NA, NA) + 2 * month
Au.approvals <- data.frame(month=month, A422072L=A422072L, A422070J=A422070J)

Au.approvals$trend.sum.A422072L.qtr <- NA
Au.approvals$sa.sum.A422070J.qtr <- NA
for(i in seq_len(nrow(Au.approvals)))
{
    if(i < 3) next
    if(all(!is.na(Au.approvals$A422072L[(i-2):i])))
        Au.approvals$trend.sum.A422072L.qtr[i] <- sum(Au.approvals$A422072L[(i-2):i])
    if(all(!is.na(Au.approvals$A422070J[(i-2):i])))
        Au.approvals$sa.sum.A422070J.qtr[i]    <- sum(Au.approvals$A422070J[(i-2):i])
}

print(Au.approvals) 
```

现在有足够的数据作为示例运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T08:02:36.573

让我们创建一些虚假的时间序列：

```
time_dat = data.frame(t = 1:100, value = runif(100)) 
```

要获得滚动总和，请查看`rollapply`zoo 包：

```
require(zoo)
time_dat = transform(time_dat, 
                     roll_value = rollapply(value, 10, sum, fill = TRUE)) 
```

在这里，我假设较粗的分辨率（每季度）比较细的分辨率粗 10 倍。

* * *

非滚动平均值的原始答案：

我喜欢使用`plyr`包中的函数，但是`ave`、`aggregate`和`data.table`也是不错的选择。对于大型数据集，`data.table`速度非常快。但要回到一些`plyr`魔法：

首先创建一个附加列，指定更粗略的时间频率，即您在哪个季度观察：

```
time_dat[["coarse_t"]] = rep(1:10, each = 10)
> head(time_dat)
  t     value coarse_t
1 1 0.9045097        1
2 2 0.4174182        1
3 3 0.5638139        1
4 4 0.8228698        1
5 5 0.7059027        1
6 6 0.5285386        1 
```

现在我们可以聚合`time_dat`更粗略的时间频率：

```
time_dat_coarse = ddply(time_dat, .(coarse_t), summarise, sum_value = sum(value))
> time_dat_coarse
   coarse_t sum_value
1         1  6.097348
2         2  4.834720
3         3  3.988809
4         4  4.170656
5         5  4.538269
6         6  6.198716
7         7  4.399282
8         8  5.507384
9         9  6.089072
10       10  4.663287 
```

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T18:53:16.100

Paul 的回答很棒，但我只想补充一点，chron 包有许多出色的日期/时间分类操作，可以与 plyr 配对进行聚合

```
library("chron") 
# chron uses chron-specific object representation. 
# If a different representation is needed, a conversion is necessary
# eg. if a$date is a chron date object, I would us as.POSIXct(a$date) to get a POSIXct representation

# create chron date objects and values
a<-data.frame(date=as.chron(Sys.Date() + 1:1000), value = 1:100*runif(100,0,1))

# cuts dates into 15 intervals
a$interval1<-cut(a$date,15)
# cuts dates into 10 number of intervals using a label you define
a$interval2<-cut(a$date,10,paste("group",1:10))
# cuts dates into weeks
a$weeks<-cut(a$date,"weeks",start.on.monday=FALSE)
# cuts dates into months
a$months<-cut(a$date,"months")
# cuts dates into years
a$years<-cut(a$date,"years")
# classifies day based on day of week
a$day_of_week<-day.of.week(a$date)

# creating a chron time object
b<-data.frame(day_time=as.chron(Sys.time()+1:1000*100), value = 1:100*runif(100,0,1))
# cuts times into days - note: uses first time period as the start
b$day<-cut(b$day_time,"days")
# truncates time to 5 minute interval
b$min_5<-trunc(b$day_time, "00:05:00")
# truncates time to 1 hour intervals
b$hour1<-trunc(b$day_time, "01:00:00")
# truncates datetime to 1 hour and 2 second intervals
b$days_3<-trunc(b$day_time, "01:00:02") 
```

我经常使用 chron，因为它使时间聚合变得更加容易。

此外，zoo 和 xts 包还有更多功能，这些功能非常适合在一天的细节级别之后进行各种聚合。他们的文档非常庞大，可能很难找到您想要的东西，但几乎所有您想要的东西都在那里。一些亮点：

```
library("zoo")
library("xts")
?rollapply
?rollsum
?rollmean
?rollmedian
?rollmax
?yearmon
?yearqtr
?apply.daily
?apply.weekly
?apply.monthly
?apply.quarterly
?apply.yearly
?to.minutes
?to.minutes3
?to.minutes5
?to.minutes10
?to.minutes15
?to.minutes30
?to.hourly
?to.daily
?to.weekly
?to.monthly
?to.quarterly
?to.yearly
?to.period 
```

# android - 资产中的android html5 jquery代码无法正常工作

> ID：12949688
> 
> 赞同：0
> 
> 时间：2012-10-18T07:52:35.573
> 
> 标签：android, jquery, html

在我的代码中，我从服务器获取 html 并将其附加到一个 jquery 脚本，该脚本将一些 div 替换为自定义 html5 画布。

我在 jquery 中编写代码并将其附加到我项目的资产文件夹中。几乎所有代码功能都可以正常工作，我总是得到这个错误：

```
10-18 09:44:04.890: E/Web Console(3595): Uncaught TypeError: Cannot read property 'pageX' of undefined at file:///android_asset/sketch.js:104 
```

但是当我在涟漪插件中或只是在浏览器中使用相同的javascript代码运行相同的html时，一切都很好......

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:17:16.683

我认为这是因为 android 2.2 没有完全支持 HTML5，你可以在这里看到它 -> [http://mobilehtml5.org/](http://mobilehtml5.org/) 上个月我也在尝试使用谷歌图形 API 开发一个 HTML5 应用程序，它工作得很好三星银河笔记（ICS）但在三星银河S2（姜饼）中没有显示任何内容

# java - Java ArrayList如何在开头添加元素

> ID：12949690
> 
> 赞同：227
> 
> 时间：2012-10-18T07:52:43.530
> 
> 标签：java, arrays, arraylist, stack

我需要将元素添加到`ArrayList`队列中，但是当我调用函数添加元素时，我希望它在数组的开头添加元素（因此它具有最低索引）并且如果数组有 10 个元素添加新的结果是删除最旧的元素（索引最高的元素）。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：372
> 
> 时间：2012-10-18T07:54:28.617

`List`有方法[`add(int, E)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)，所以你可以使用：

```
list.add(0, yourObject); 
```

之后，您可以使用以下命令删除最后一个元素：

```
if(list.size() > 10)
    list.remove(list.size() - 1); 
```

但是，您可能需要重新考虑您的要求或使用不同的数据结构，例如[`Queue`](http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html)

**编辑**

也许看看 Apache 的[`CircularFifoQueue`](https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/queue/CircularFifoQueue.html)：

> `CircularFifoQueue`是一个具有固定大小的先进先出队列，如果已满则替换其最旧的元素。

只需用你的最大尺寸初始化它：

```
CircularFifoQueue queue = new CircularFifoQueue(10); 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2015-02-20T14:22:49.827

## 使用特定的数据结构

有多种数据结构针对在第一个索引处添加元素进行了优化。但请注意，如果您将收藏转换为其中之一，则对话可能需要时间和空间复杂度`O(n)`

### 双端队列

JDK 包括[`Deque`](https://docs.oracle.com/javase/7/docs/api/java/util/Deque.html)提供方法的结构，例如[`addFirst(e)`](https://docs.oracle.com/javase/7/docs/api/java/util/Deque.html#addFirst(E))和[`offerFirst(e)`](http://offerFirst(e))

```
Deque<String> deque = new LinkedList<>();
deque.add("two");
deque.add("one");
deque.addFirst("three");
//prints "three", "two", "one" 
```

### 分析

插入的空间和时间复杂度为`LinkedList`常数 ( `O(1)`)。请参阅[Big-O 备忘单](http://bigocheatsheet.com/)。

## 反转列表

一个非常简单但低效的方法是使用反向：

```
 Collections.reverse(list);
 list.add(elementForTop);
 Collections.reverse(list); 
```

[如果您使用 Java 8 流，您可能会对这个答案感兴趣。](https://stackoverflow.com/a/24011264/774398)

### 分析

*   时间复杂度：`O(n)`
*   空间复杂度：`O(1)`

查看[JDK 实现](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Collections.java#Collections.reverse%28java.util.List%29)，这具有`O(n)`时间复杂度，因此仅适用于非常小的列表。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-18T07:57:18.180

你可以看看[add(int index, E element)](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#add%28int,%20E%29)：

> 在此列表中的指定位置插入指定元素。将当前位于该位置的元素（如果有）和任何后续元素向右移动（将其索引加一）。

添加后，您可以检查 ArrayList 的大小并在最后删除那些。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-06-30T13:10:47.727

你可能想看看 Deque。它使您可以直接访问列表中的第一个和最后一个项目。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-18T08:00:38.783

您所描述的，是使用的适当情况[`Queue`](http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html)。

既然你想要`add`新元素，`remove`那就是旧元素。您可以在末尾添加，从开头删除。这不会有太大的不同。

队列有方法`add(e)`，`remove()`它们分别在末尾添加新元素和从开头删除旧元素。

```
Queue<Integer> queue = new LinkedList<Integer>();
queue.add(5);
queue.add(6);
queue.remove();  // Remove 5 
```

因此，每次向 中添加元素时，都可以通过方法调用`queue`对其进行备份。`remove`

* * *

**更新**： -

如果你想**修复 的大小`Queue`**，那么你可以看看： -[`ApacheCommons#CircularFifoBuffer`](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/buffer/CircularFifoBuffer.html)

来自[`documentation`](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/buffer/CircularFifoBuffer.html)： -

> CircularFifoBuffer 是一个具有固定大小的先进先出缓冲区，如果已满则替换其最旧的元素。

```
Buffer queue = new CircularFifoBuffer(2); // Max size

queue.add(5);
queue.add(6);
queue.add(7);  // Automatically removes the first element `5` 
```

如您所见，当达到最大尺寸时，添加新元素会自动删除插入的第一个元素。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-18T08:23:14.417

I think the implement should be easy, but considering about the efficiency, you should use LinkedList but not ArrayList as the container. You can refer to the following code:

```
import java.util.LinkedList;
import java.util.List;

public class DataContainer {

    private List<Integer> list;

    int length = 10;
    public void addDataToArrayList(int data){
        list.add(0, data);
        if(list.size()>10){
            list.remove(length);
        }
    }

    public static void main(String[] args) {
        DataContainer comp = new DataContainer();
        comp.list = new LinkedList<Integer>();

        int cycleCount = 100000000;

        for(int i = 0; i < cycleCount; i ++){
            comp.addDataToArrayList(i);
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-02-14T06:18:14.977

Java LinkedList 提供了 addFirst(E e) 和 push(E e) 方法，用于将元素添加到列表的前面。

[https://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html#addFirst(E)](https://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html#addFirst(E))

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-03-18T16:01:52.190

您可以使用列表方法，删除和添加

```
list.add(lowestIndex, element);
list.remove(highestIndex, element); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-18T08:01:00.123

你可以使用这个代码

```
private List myList = new ArrayList();
private void addItemToList(Object obj){
    if(myList.size()<10){
      myList.add(0,obj);
    }else{
      myList.add(0,obj);
      myList.remove(10);
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-18T08:10:25.367

您可以使用

```
public List<E> addToListStart(List<E> list, E obj){
list.add(0,obj);
return (List<E>)list;

} 
```

用您的数据类型更改 E

如果需要删除最旧的元素，则可以添加：

```
list.remove(list.size()-1); 
```

在返回语句之前。否则 list 将在开头添加您的对象并保留最旧的元素。

这将删除列表中的最后一个元素。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-11-09T12:20:26.637

```
import com.google.common.collect.Lists;

import java.util.List;

/**
 * @author Ciccotta Andrea on 06/11/2020.
 */
public class CollectionUtils {

    /**
     * It models the prepend O(1), used against the common append/add O(n)
     * @param head first element of the list
     * @param body rest of the elements of the list
     * @return new list (with different memory-reference) made by [head, ...body]
     */
    public static <E> List<Object> prepend(final E head, List<E> final body){
        return Lists.asList(head, body.toArray());
    }

    /**
     * it models the typed version of prepend(E head, List<E> body)
     * @param type the array into which the elements of this list are to be stored
     */
    public static <E> List<E> prepend(final E head, List<E> body, final E[] type){
        return Lists.asList(head, body.toArray(type));
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-09-25T05:22:18.570

```
import java.util.*:
public class Logic {
  List<String> list = new ArrayList<String>();
  public static void main(String...args) {
  Scanner input = new Scanner(System.in);
    Logic obj = new Logic();
      for (int i=0;i<=20;i++) {
        String string = input.nextLine();
        obj.myLogic(string);
        obj.printList();
      }
 }
 public void myLogic(String strObj) {
   if (this.list.size()>=10) {
      this.list.remove(this.list.size()-1);
   } else {
     list.add(strObj); 
   }
 }
 public void printList() {
 System.out.print(this.list);
 }
} 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2020-06-10T12:05:16.450

举个例子：-

```
List<String> element1 = new ArrayList<>();
element1.add("two");
element1.add("three");
List<String> element2 = new ArrayList<>();
element2.add("one");
element2.addAll(element1); 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2017-08-09T17:38:01.387

我有一个类似的问题，试图在现有数组的开头添加一个元素，将现有元素向右移动并丢弃最旧的元素（数组 [length-1]）。我的解决方案可能不是很高效，但它适用于我的目的。

```
 Method:

   updateArray (Element to insert)

     - for all the elements of the Array
       - start from the end and replace with the one on the left; 
     - Array [0] <- Element 
```

祝你好运

# python - python sed不工作

> ID：12949694
> 
> 赞同：0
> 
> 时间：2012-10-18T07:52:58.527
> 
> 标签：python, regex, sed, python-2.4

为什么在 Python 中做类似 sed 的操作这么难？

```
cat temp$$ | sed '/ENTRY/d' | sed '/VERSION/d' > temp$$1 
```

以下尝试根本不起作用（而不是写入我正在打印到屏幕的文件）：

```
 70 for line in open("temp5027", 'r'):
 71     
 72     if re.search("ENTRY|VERSION", line) != None:
 73         pass
 74     else:
 75         print line 
```

一个沮丧的第一次 python 用户。

注意：我使用的是 python 2.4，所以还没有“with”支持。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T08:02:04.680

**使用 Python 2.4 写入文件**

```
import re

i = open("in.txt")
o = open("out.txt", "w")

for line in i:
    if re.search("ENTRY|VERSION", line):
       o.write(line)

o.close()
i.close() 
```

**使用现代 Python 写入文件**

```
import re

with open("in.txt") as i, open("out.txt", "w") as o:
    for line in i:
        if re.search("ENTRY|VERSION", line):
           o.write(line) 
```

**奖金**

提高您的`sed`使用率。

```
$ sed -e '/ENTRY/d' -e '/VERSION/d' < in.txt > out.txt 
```

# javascript - 未定义的javascript函数

> ID：12949697
> 
> 赞同：0
> 
> 时间：2012-10-18T07:53:01.953
> 
> 标签：javascript, jquery

我有以下代码：

```
var LabourItems = {
   rate: null,
   hours: null,
   total: null,
   init: function(object) {
      var rate = $(object).children('.rate').first();
      var hours =$(object).children('.hours').first();
      total = rate * hours;
      updateTotal(object,total);
   },
   updateTotal: function(object,  total) {
      $(object).children('.total').first().attr('value', total)
   }
}

//reactTochange for those inputs that you want to observe
$('.hours').live("click", function() {
   jQuery.each($('.labouritems'), function(key,value){
      LabourItems.init(value);
   });
}); 
```

并得到一个未定义的函数错误：

> updateTotal(object, total) 未定义

你能否让我知道我做错了什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T07:54:14.823

`updateTotal`是`LabourItems`调用中的一个函数

`LabourItems.updateTotal(object,total);`

或（仅当从它的任何其他函数`LabourItems`或实例调用时）

`this.updateTotal(object,total);`

更新 ：

```
var LabourItems = {
   rate: null,
   hours: null,
   total: null,
   init: function(object) {
      var rate = $(object).children('.rate').first();
      var hours =$(object).children('.hours').first();
      this.total = rate * hours;
      this.updateTotal(object);
   },
   updateTotal: function(object) {
      $(object).children('.total').first().attr('value', this.total)
   }
}

//reactTochange for those inputs that you want to observe
$('.hours').live("click", function() {
   jQuery.each($('.labouritems'), function(key,value){
      LabourItems.init(value);
   });
}); 
```

# oauth-2.0 - 使用 Fusion Table 像使用 PHP 的数据库以及使用 oauth 时如何关闭提示页面

> ID：12949701
> 
> 赞同：2
> 
> 时间：2012-10-18T07:53:15.047
> 
> 标签：oauth-2.0, google-fusion-tables

我正在开发一个 PHP 应用程序，它只在后台使用 Google Fusion Tables 作为数据库。该应用程序包括一个用于基本安全的简单登录部分。我下载了 google-api-php-client 并使用 oAuth 成功建立了与我的 Fusion Table 的连接。没关系。但是，我想摆脱提示屏幕，它说我注册的应用程序想要访问 Fusion Tables 并要求我允许或禁止。由于该应用程序将使用托管在我的帐户上的 Fusion Table，我认为没有必要向用户提出这个问题。你能告诉我任何解决方法吗？我计划让它尽可能简单，如果有一种方法可以在不提示用户任何额外屏幕的情况下完成身份验证，我会非常高兴。

非常感谢你的帮助！

[https://developers.google.com/fusiontables/docs/articles/oauthfusiontables](https://developers.google.com/fusiontables/docs/articles/oauthfusiontables)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:51:37.303

如果您想访问用户融合表，则需要您描述的 OAuth 提示，因此您基本上要求用户访问他的帐户，以便您可以使用它来创建表和存储/检索数据。

但是在您的情况下，您希望让您的用户访问您使用您的帐户创建的 Fusion Tables。谷歌为此用例引入了所谓的[服务帐户](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)。

你所要做的就是：

1.  创建一个服务帐户（您可以在[Google API 控制台](https://code.google.com/apis/console/)->“访问 API”中执行此操作）
2.  下载私钥
3.  让服务帐户访问您的表（单击 Fusion Tables Web UI 中的“共享”按钮）
4.  在您的代码中使用服务帐户访问 Fusion Tables

前段时间，我[使用 Service Account 创建了一个简单的 UPDATE 示例](https://github.com/odi86/GFTPrototype/blob/master/examples/php/UpdateTable.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:24:29.437

此外，如果您确实不需要 Fusion Tables 的共享、可视化和发布功能，而只需要一个云数据库，请考虑使用专为此用途设计的 Google Cloud SQL。

[https://developers.google.com/cloud-sql/docs/introduction](https://developers.google.com/cloud-sql/docs/introduction)

# java - 如何检查重复的单元格？

> ID：12949704
> 
> 赞同：0
> 
> 时间：2012-10-18T07:53:26.523
> 
> 标签：java, jsp

我已经导入了我的 excel 文件，但我想检查 excel 表中的重复单元格。

我想检查每个单元格读取并在 jsp 页面中重复单元格显示警报消息。

```
Iterator obj = new Itertor();
StringBuffer sb = new StringBuffer();
while(obj.hasNext()) {  
    Row myrow = (ROW) obj.next();  
    class obj1 = new class();
    obj1.setname();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:15:08.383

我不太了解您的数据结构。你在使用 Apache POI 吗？您如何从 excel 中获取值？

要识别重复项，请创建一个 HashSet 并开始向该集合添加值。如果添加了值，则 Add 方法返回 true。否则为假。

```
Iterator sheetInterator = new Itertor();
Set<Object> set = new HashSet();
while(sheetInterator.hasNext()) { 
    Row myrow = (Row) obj.next();
    Iterator rowIterator = myrow.iterator();
    while(rowIterator.hasNext()) {
        Cell cell = (Cell) rowIterator.next();
        String value = cell.getValue();
        if(!set.add(value)){
            // value has not been added to the set -> it is at least 2nd occurrence of this value 
        }
    }
} 
```

# php - 将一个图像放在另一个图像上并使用 imagemagick 使区域透明

> ID：12949707
> 
> 赞同：0
> 
> 时间：2012-10-18T07:53:39.927
> 
> 标签：php, imagemagick

我有一个白色的背景，上面有一个图像“A”。我有另一个图像“B”，我想把它放在图像“A”上（图像“B”是图像“A”的 50%）。

将图像“B”放在“A”上后，我需要与图像“B”等效的区域变得透明，这样我才能看到白色背景。

我如何使用 imagemagick 在 php 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:04:31.523

我能够使用复合常量来实现上述目标：imagick 中的 DSTOUT。

```
$background->composite($overlay, COMPOSITE_DSTOUT, 0, 0); 
```

# php - 使用 AJAX 完成后，链接的 JavaScript 会被多次加载

> ID：12949710
> 
> 赞同：-4
> 
> 时间：2012-10-18T07:53:42.797
> 
> 标签：php, javascript, jquery, ajax

我在我们的网站上遇到了最奇怪的行为，这让事情变得异常缓慢。

我和我的团队有一个完全在 AJAX 上运行的网站。所以对于登录，我有一些 js ajax 将登录框加载到我们的索引页面中。包含登录框的 html 在头部有一个脚本链接。该脚本监听登录表单提交，并通过ajax将表单数据发送到服务器进行认证。

包含登录框的 html 只加载一次，但它链接到的 js 文件会加载多次。次数变化。从 5 次到 15 次，我看不到模式或任何东西。这发生在我们网站的任何地方，而不仅仅是在登录时。

这个问题真的让我很难过，我完全被卡住了。是因为我在最初用ajax加载的js文件中有ajax吗？

我非常感谢您的洞察力和帮助！

编辑：

根据要求，一些代码：

这是 Interface.js 文件中 loadContent() 的精简版。此特定功能将所有站点内容加载到 index.php 上的内容区域中。当页面刷新时，首先发送给函数的是 login.php 文件的位置，其中包含登录框：

```
loadContent: function(page) {

var self = this;

//just some animations to make things look good
$(self.error).fadeOut(150, function() {
    $(self.content).fadeOut(150, function() {
        $(self.loading).fadeIn(150, function() {
            $.ajax({
                url: page,
                success: function(data) {                            
                    //response data
                    var $response = $(data);                         

                    $(self.content_1).html($response);                    

                    //definitions for contentbox-2
                    self.contentHeading_2.html("Replies:");                           
                    self.content_2.html(postReplies);

                    //redisplay the  content after it has loaded in.
                    $(self.loading).fadeOut(150, function() {
                        $(self.content).fadeIn(150, function() {
                            // Content faded in
                        });
                    });
                },
                error: function() {
                    $(self.loading).fadeOut(150, function() {
                        $(self.error).fadeIn(150, function() {
                            // Error faded in
                        });
                    });
                }
            });
        });
    });
});

this.page = page;
} 
```

然后是 login.php 文件：

```
<!DOCTYPE HTML>
<html>
    <head>
        <title></title>
        <script type="text/javascript" src="js/login.js"></script>        
    </head>
    <body>
        <div class="padded loginphp">
            <div id="loginbox">
                <!-- the login box comes here
            </div> <!-- #loginbox -->

        </div>
    </body>
</html> 
```

和 login.js 文件：

```
$(document).ready(function() {  
    $('#honeyloginform').submit(function(event) {
        //event.preventDefault();
        login();
        return false;
    });
});

function login() {
    $('.errorinputfields').removeClass('errorinputfields');
    if (isEmpty($('#username'))) {
        $('#username').addClass('errorinputfields');
        $('#username').focus();
        return;
    }
    if (isEmpty($('#password'))) {
        $('#password').addClass('errorinputfields');
        $('#password').focus();
        return;
    }
    $('#honeyloginform').fadeOut(100, function(){
        $('#loginbox .loading').fadeIn(300, function(){                                         
            var pword = $('#password').val();
            var remember = "no";
            if ($('#remember').is(':checked')) {
                remember = "yes";
            }
            var JSONobj = {
                username: $('#username').val(),
                password: pword,
                rem: remember
            };
            $.ajax({
                url: 'ajax/login.php',
                data: JSONobj,
                success: function(data) {
                    //alert(data);
                    var JSONobj = JSON.parse(data);
                    if (JSONobj.Success) {
                        Interface.login(); //just loads the landing page after login
                        //window.setTimeout('location.reload()', 300);
                    } else {
                        $('#loginbox .loading').fadeOut(300,function(){
                            $('#honeyloginform').fadeIn(300);
                        });
                        $('#username').focus();
                        $('#loading-message').text(JSONobj.Message).show();                         
                    }
                }
            });                         
        });    
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:08:24.423

我已经设法找到问题并解决它！

我对界面布局进行了更改，结果，三个选择器 ,`$(self.error)`和`$(self.content)`每个`$(self.loading)`都包含多个元素，而每个元素始终只包含一个。

这似乎导致回调函数被复合或其他什么，因为最终回调中的所有内容都`loadContent()`被调用了 9 次。

所以这是一个重新定义选择器的简单案例，这样它们每个都引用一个元素。

# android - 如何在 Android 中通过 ListView 搜索数据

> ID：12949715
> 
> 赞同：0
> 
> 时间：2012-10-18T07:54:17.540
> 
> 标签：android, android-layout, search, android-emulator, android-widget

我正在尝试通过`ListView`来自网络服务的数据搜索数据..

说明：如果我在搜索中输入**[abc]**`editview[searchText]`并且如果我单击`serachbutton(buttonSearch)`，它必须显示所有相关数据`listview(listView)`

例如：abc、abacd、abcderg 等以这种方式...

这个话题对我来说是新的。

这是我的代码。请帮我做。

我已经尝试过了，但我无法弄清楚如何做到这一点。

**工作清单视图.java**

```
 ArrayList<Patient> patientListArray;

 listView = (ListView) findViewById(R.id.workListview);
    objectAdapter = new WorkListAdapter(this, patientListArray);
    listView.setAdapter(objectAdapter);     
    listView.setTextFilterEnabled(true);

    searchText = (EditText) findViewById(R.id.searchView);
    searchText.addTextChangedListener(new TextWatcher() {
        public void afterTextChanged(Editable s) {
        }
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        }
        public void onTextChanged(CharSequence s, int start, int before, int count) {
             dataAdapter.getFilter().filter(s.toString());

        }
    }); 

WorkListAdapter.java

public Filter getFilter() {

    Filter myFilter = new Filter() {

        @Override
        protected void publishResults(CharSequence constraint, FilterResults results) {

            if (!patientListArray.isEmpty()){
                clear();
            }

            for (int i = 0; i < patientListArray.size(); i++) {
                if(patientListArray.get(i).getName().toLowerCase().startsWith(constraint.toString().toLowerCase())){
                    add(patientListArray.get(i));
                }
            }

            notifyDataSetChanged();
        }

        private void add(Patient patient) {

        }

        private void clear() {

        }

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {

            return null;
        }
    };  

    return myFilter;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:32:15.980

从图形上看，您需要一个带有 EditText (TextWatcher) 和 listview 的布局。然后，您的列表视图的适配器将始终使用过滤器（ dataAdapter.getFilter().filter(s.toString()); ）监听 TextWatcher 上的更改

更多细节[在这里](http://www.mysamplecode.com/2012/07/android-listview-edittext-filter.html)

祝你好运。

# javascript - 出现的文本取决于网站上的语言 (js)

> ID：12949718
> 
> 赞同：0
> 
> 时间：2012-10-18T07:54:27.197
> 
> 标签：javascript, joomla, internationalization, multilingual

在我的网站[http://www.incognito.preart.grandhost.pl/](http://www.incognito.preart.grandhost.pl/)上，当您进入任何页面时，都会有一个返回主菜单的链接（当您悬停标题时）。网站有 5 种语言。但是文本只有英文。需要在每种语言中都有文本“返回菜单”。

.js 代码：

```
var j = jQuery.noConflict();

j(document).ready(function() {
    j("body").css("display", "none");
    j("body").fadeIn(1000);
    j("a.transition").click(function(event){
        event.preventDefault();
        linkLocation = this.href;
        j("body").fadeOut(1000, redirectPage);      
    });     
    function redirectPage() {
        window.location = linkLocation;
    }

    var prevText = j('div#lContent h2 a').text();
    j('div#lContent h2 a').hover(function(){

        j(this).text('Back to menu');
    }, function(){
        j(this).text(prevText);
    });
}); 
```

我想我需要这样的东西：

*   如果在 url 中有`/en/`显示“返回菜单”
*   如果在 url 中有`/fr/`显示“retour au menu”等。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:14:38.950

正如 BenM 所说，在 JS 上进行本地化并不是最好的主意。

虽然如果你真的坚持，你可以这样做。在您的后端，php 代码 - 创建一个保存语言的全局 js 变量。比方说，

```
var LANG = "EN"; // or you might want to add that as an attribute to an object 
```

在您的 JS 代码中，创建一个查找对象

```
var BACK_TXT = {
  "EN" : "Back to Menu",
  "PL" : "I don't speak Polish : (",
  "GR" : "Pisw re"
}; 
```

当你设置文本而不是做*j(this).text('Back to menu');* 做

```
j(this).text( BACK_TXT[ LANG ] ); 
```

添加对有效语言的检查也是明智的

```
if( !parent_obj.LANG )
     parent_obj.LANG = "EN"; 
```

只是要小心你放置代码和记录它的方式，因为这样的事情将来很容易变得难以维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:46:24.453

使用 Javascript 来控制语言是一个非常糟糕的主意。如果用户关闭了 javascript，您认为会发生什么？即使认为这被认为是愚蠢的，优秀的 Web 开发人员总是会考虑到这一点。

我认为[JoomFish](http://www.joomfish.net/en/downloads)可能是您正在寻找的。

希望这可以帮助

# java - Java 按钮创建无法正常工作

> ID：12949720
> 
> 赞同：0
> 
> 时间：2012-10-18T07:54:29.813
> 
> 标签：java, swing, jframe, awt

这是我的程序。这个程序只是使用java中的swings创建一个框架并首先创建一个网格并将按钮添加到该框架：

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;

public class one {
    private static void createAndShowGUI() {
        JFrame frame = new JFrame("HelloWorldSwing");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        frame.setSize(400,400);
        frame.getContentPane().setPreferredSize(new Dimension(500,500));
        frame.pack();
        frame.setVisible(true);
        Container pane=frame.getContentPane();
        pane.setLayout(new GridLayout(5,6));

        JButton[] buttons = new JButton[26];

        String  b[]={"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"};
        for(int i = 0; i<buttons.length; i++) {
            buttons[i] = new JButton(b[i]);
            buttons[i].setSize(80, 80);
            buttons[i].setActionCommand(b[i]);
            buttons[i].addActionListener(new ActionListener(){
                public void actionPerformed(ActionEvent e) {
                    String choice = e.getActionCommand();
                    JOptionPane.showMessageDialog(null, "You have clicked: "+choice);
                }
            });
            System.out.println("adding button\n");
            pane.add(buttons[i]);
        }

    }
    public static void main(final String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

该程序编译得很好。但是按钮创建我只能看到一个“A”按钮，其余按钮我无法在窗格中看到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T08:11:39.807

事实证明，这似乎是一个竞争条件和/或系统相关类型问题，因为它适用于其他人。无论如何，[java.awt.Container.add() 的 Javadoc](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#add%28java.awt.Component%29)声明：

> 此方法更改与布局相关的信息，因此使组件层次结构无效。如果容器已显示，则必须随后验证层次结构以显示添加的组件。

因此，您应该在添加所有组件后调用 pane.validate()（或者，正如 MadProgrammer 所说，在添加所有组件**后**执行 setVisible() 调用）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T08:04:01.393

基本上有两种方法可以解决这个问题。

第一个是在`frame.setVisible(true)`您完成将按钮添加到`pane`.

二是打电话

```
pane.invalidate();
pane.repaint(); 
```

将所有按钮添加到`pane`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:13:10.630

我可以看到按钮（AZ）。我无法重现您的问题。 ![在此处输入图像描述](../Images/d9d36d0f0ca2681b7406c8f6bbcb0b0b.png)

# wordpress - 在 Wordpress 中将标签帖子更改为文章

> ID：12949722
> 
> 赞同：8
> 
> 时间：2012-10-18T07:54:34.573
> 
> 标签：wordpress, wordpress-theming

我正在研究wordpress。任何人都可以帮助我如何更改 wordpress 中的管理面板菜单标签。

具体来说，我想将帖子的标签更改为文章。以及文章帖子管理面板中的所有实例。

好心提醒。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-18T08:16:03.937

这是您需要添加到主题函数文件中的代码。

```
// Replace Posts label as Articles in Admin Panel 

function change_post_menu_label() {
    global $menu;
    global $submenu;
    $menu[5][0] = 'Articles';
    $submenu['edit.php'][5][0] = 'Articles';
    $submenu['edit.php'][10][0] = 'Add Articles';
    echo '';
}
function change_post_object_label() {
        global $wp_post_types;
        $labels = &$wp_post_types['post']->labels;
        $labels->name = 'Articles';
        $labels->singular_name = 'Article';
        $labels->add_new = 'Add Article';
        $labels->add_new_item = 'Add Article';
        $labels->edit_item = 'Edit Article';
        $labels->new_item = 'Article';
        $labels->view_item = 'View Article';
        $labels->search_items = 'Search Articles';
        $labels->not_found = 'No Articles found';
        $labels->not_found_in_trash = 'No Articles found in Trash';
}
add_action( 'init', 'change_post_object_label' );
add_action( 'admin_menu', 'change_post_menu_label' ); 
```

改编自：[https ://wordpress.stackexchange.com/questions/9211/chang-admin-menu-labels](https://wordpress.stackexchange.com/questions/9211/changing-admin-menu-labels)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-06-01T18:56:10.340

我能够`post_type_labels_{$post_type}`像这样使用过滤器解决这个问题

```
add_filter( 'post_type_labels_post', 'change_post_labels' );

function change_post_labels( $args ) {
        foreach( $args as $key => $label ){
            $args->{$key} = str_replace( [ __( 'Posts' ), __( 'Post' ) ], __( 'News' ), $label );
        }

        return $args;
} 
```

这个答案也使翻译支持完好无损。唯一需要注意的是，您可能必须从插件中运行它，因为主题加载得太晚了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-17T12:48:16.070

在您的主题函数文件中包括以下几行：

```
//Change Posts labels in sidebar admin menu
  function custom_post_menu_label() {
     global $menu;
     global $submenu;
     $menu[5][0] = 'News';
     $submenu['edit.php'][5][0] = 'News';
     $submenu['edit.php'][10][0] = 'Add News';         
  }

 //Change Posts labels in other admin area
  function custom_post_object_label() {
    global $wp_post_types;
    $labels = &$wp_post_types['post']->labels;
    $labels->name = 'News';
    $labels->singular_name = 'News';
    $labels->add_new = 'Add News';
    $labels->add_new_item = 'Add News';
    $labels->edit_item = 'Edit News';
    $labels->new_item = 'News';
    $labels->view_item = 'View News';
    $labels->search_items = 'Search News';
    $labels->not_found = 'No results on News';
    $labels->not_found_in_trash = 'No News in Trash';
    $labels->name_admin_bar = 'Add News';       

   }

 add_action( 'init', 'custom_post_object_label' );
 add_action( 'admin_menu', 'custom_post_menu_label' ); 
```

先前答案的作者忘记包含 '$labels->name_admin_bar = 'Add News';' 细绳。

# javascript - HTML5 localStorage 从值中获取键

> ID：12949723
> 
> 赞同：16
> 
> 时间：2012-10-18T07:54:37.650
> 
> 标签：javascript, html

localStorage.getItem 将检索值。

和 setItem 将设置值。

但是如果我想知道哪个键与这个特定值相关联？那么如何获得那个的Key。？

[所以我提出的问题](https://stackoverflow.com/questions/3357553/how-to-store-an-array-in-localstorage)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-18T07:58:14.000

访问[Html5 存储文档](http://diveintohtml5.info/storage.html)以获取更多详细信息。使用以下语法设置和获取 localstorage/sessionstorage 中的值，用于存储会话的值

```
sessionStorage.getItem('key')
sessionStorage.setItem('key','value') 
```

或使用永久存储值

```
localStorage.getItem('key')
localStorage.setItem('key','value') 
```

你说你想知道值但你想要密钥然后你可以使用这个功能

```
 localStorage.key(i); 
```

或者您也可以遍历可用的键并通过交叉检查值来获取所需的键

```
for(var i=0, len=localStorage.length; i<len; i++) {
    var key = localStorage.key(i);
    var value = localStorage[key];
    if(value.equals(desired_value))
    console.log(key + " => " + value);
} 
```

# feature-extraction - 如何处理 tf-idf 中非常不常见的术语？

> ID：12949724
> 
> 赞同：2
> 
> 时间：2012-10-18T07:54:43.933
> 
> 标签：feature-extraction, relevance, tf-idf, noise-reduction, oov

我正在实现一个天真的“关键字提取算法”。我是自学成才的，所以我缺乏一些在线文学中常见的术语和数学。

因此，我正在查找文档的“最相关关键字”：

1.  我计算每个术语在当前文档中使用的频率。我们称之为*tf*。
2.  我查看了这些术语在整个文档数据库中的使用频率。我们称之为*df*。
3.  我通过*r = tf / df*计算每个术语的相关权重*r*。

 *每个文档都是语料库的适当子集，因此没有文档包含不在语料库中的术语。这意味着我不必担心被零除。

*我按它们的r*对所有术语进行排序，并保留许多最重要的术语。这些是与本文档最密切相关的顶级关键字。本文档中常用的术语更为重要。在整个文档数据库中通用的术语不太重要。

我相信这是[***tf-idf***](http://en.wikipedia.org/wiki/Tf%E2%80%93idf)的一种幼稚形式。

*问题是，当术语在整个数据库中非常罕见但出现在当前文档中时，它们的r*值似乎太高了。

由于样本量小，这可以被认为是某种人工制品。弥补这一点的最佳方法或通常方法是什么？

*   丢弃在整个数据库中不常见于某个阈值的术语。如果是这样，该阈值是如何计算的？似乎它取决于太多因素而不能成为硬编码值。
*   可以通过某种数学函数（例如平方反比或余弦）对其进行加权或平滑吗？

我已经尝试在网上搜索并阅读*tf-idf*，但我发现的大部分内容都是比较文档，我对此并不感兴趣。此外，其中大多数的解释与行话和公式的比例都很低。

（事实上​​，我的项目是对这个问题的概括。我真的在 Stack Exchange 网站上使用标签，所以术语的总数很少，停用词无关紧要，低使用率的标签可能比低使用率的词更常见在标准情况下。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T02:51:50.337

我花了很多时间尝试对特定的 tf-idf 信息进行有针对性的 Google 搜索，并挖掘了许多文档。

最后，我找到了一个文档，其中包含清晰简洁的解释以及我可以理解的公式：[文档处理和语义网，第 3 周第 1 讲：信息检索排名](http://comp.mq.edu.au/units/comp348/03aInformationRetrieval.pdf)，麦格理大学计算机系的 Robert Dale：

第 20 页：

![PDF 第 20 页](../Images/b96aa7ed43b016468e290c26b9827680.png)

我缺少的两件事是考虑到集合中的文档数量，并使用逆*df*的对数而不是直接使用逆*df*。*

# c# - 设备响应 css

> ID：12949725
> 
> 赞同：0
> 
> 时间：2012-10-18T07:54:48.007
> 
> 标签：c#, javascript, .net, html, css

这可能看起来与大多数其他问题相似，但似乎找不到这个确切的解决方案？

我想要一个对 Device-max-width 做出响应的网页设计，这样当普通浏览器用户最小化他的网页时，它就会成为常规网站，但是当你从手机进入时，你会看到移动网站（但它仍然用css完成）atm我有这个：

```
<link href="<%= AutoVersioning.VersionizePath("/css/all.css") %>" rel="stylesheet" type="text/css" media='screen and (min-width: 480px)' />
<link href='/css/mobile.css' rel='stylesheet' type="text/css" media='screen and (min-width: 0px) and (max-width: 480px)' /> 
```

这是在这里执行此操作的简单方法，它要求浏览器宽度而不是设备宽度..

总结一下我如何询问设备宽度以及如何使用它来选择 css 表？

**编辑***

我发现我想问一下该设备是否是移动设备，如果是，则使用另一个样式表，因为现在很多手机的像素都高于 480 像素

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:01:15.927

你可以试试这个

```
<link href  ="all.css" rel="stylesheet" />
<link href  ="/css/mobile.css" rel='stylesheet'
      media ='screen and (max-device-width: 480px)' /> 
```

加载`all.css`桌面和移动设备的通用规则，然后恢复以前的规则或添加新规则以`mobile.css`检查`max-device-width`

参见 jsbin 示例： http: [//jsbin.com/emafuk/1/edit](http://jsbin.com/emafuk/1/edit)
即使您调整桌面浏览器的大小，使用 max-device-width 定义的规则也不会应用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T08:42:41.193

如果您想在不考虑屏幕大小的情况下为移动设备使用特定样式表，我建议您检查服务器端的用户代理，如果确定是移动浏览器，则仅输出移动 CSS 的链接标签页面的请求。

这是我通常用来检查请求是否来自移动浏览器的函数。

```
 public static bool MobileBrowserDetected()
    {
        var context = HttpContext.Current;

        var userAgent = context.Request.ServerVariables["HTTP_USER_AGENT"];

        if (userAgent != null)
        {
            userAgent = userAgent.ToLower();
        }

        // Checks the user-agent
        if (userAgent != null)
        {
            // Checks if its a Windows browser but not a Windows Mobile browser
            if (userAgent.Contains("windows") && !userAgent.Contains("windows ce") && !userAgent.Contains("iemobile"))
            {
                return false;
            }

            // Checks if it is a mobile browser
            const string pattern = "up.browser|up.link|windows ce|iphone|iemobile|mini|mmp|symbian|midp|wap|phone|pocket|mobile|pda|psp|android";
            var mc = Regex.Matches(userAgent, pattern, RegexOptions.IgnoreCase);
            if (mc.Count > 0)
                return true;

            // Checks if the 4 first chars of the user-agent match any of the most popular user-agents
            const string popularUserAgent = "|acs-|alav|alca|amoi|audi|aste|avan|benq|bird|blac|blaz|brew|cell|cldc|cmd-|dang|doco|eric|hipt|inno|ipaq|java|jigs|kddi|keji|leno|lg-c|lg-d|lg-g|lge-|maui|maxo|midp|mits|mmef|mobi|mot-|moto|mwbp|nec-|newt|noki|opwv|palm|pana|pant|pdxg|phil|play|pluc|port|prox|qtek|qwap|sage|sams|sany|sch-|sec-|send|seri|sgh-|shar|sie-|siem|smal|smar|sony|sph-|symb|t-mo|teli|tim-|tosh|tsm-|upg1|upsi|vk-v|voda|w3c |wap-|wapa|wapi|wapp|wapr|webc|winw|winw|xda|xda-|";
            if (popularUserAgent.Contains("|" + userAgent.Substring(0, 4) + "|"))
                return true;
        }

        // Checks the accept header for wap.wml or wap.xhtml support
        var accept = context.Request.ServerVariables["HTTP_ACCEPT"];
        if (accept != null)
        {
            if (accept.Contains("text/vnd.wap.wml") || accept.Contains("application/vnd.wap.xhtml+xml"))
            {
                return true;
            }
        }

        // Checks if it has any mobile HTTP headers

        var xWapProfile = context.Request.ServerVariables["HTTP_X_WAP_PROFILE"];
        var profile = context.Request.ServerVariables["HTTP_PROFILE"];
        var opera = context.Request.Headers["HTTP_X_OPERAMINI_PHONE_UA"];

        return xWapProfile != null || profile != null || opera != null;
    } 
```

# android - 如何在应用程序中创建语音活动？

> ID：12949726
> 
> 赞同：1
> 
> 时间：2012-10-18T07:54:49.260
> 
> 标签：android, gridview, voice

我正在为孩子们创建一个新的应用程序。这个应用程序是为孩子们学习字母。

现在我创建了一个主屏幕，其中使用 GridView 显示字母。现在我想要的是，当单击特定字母时，它应该转到该屏幕中的下一个屏幕，它应该使用线条绘制一个字母，然后应该添加一个像（Apple 的'A'）这样的声音？

有没有人知道该怎么做然后请帮助我...

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:35:13.417

试试这个：

```
TextToSpeech mTextToSpeech = new TextToSpeech(this,new TextToSpeech.OnInitListener()
{
  @Override
  public void onInit(int status)
  {
    // TODO Auto-generated method stub
    if(status == TextToSpeech.SUCCESS)
    {
      // set language
      int supported = mTextToSpeech.setLanguage(Locale.US);
      if((supported != TextToSpeech.LANG_AVAILABLE)&&(supported != TextToSpeech.LANG_COUNTRY_AVAILABLE))
      {
        displayToast("dont support current language");
      }
    }
  } 
});

// start to speak
mTextToSpeech.speak("A for Apple", TextToSpeech.QUEUE_FLUSH, null);  

// store your voice to file
int r = mTextToSpeech.synthesizeToFile(mEditText.getText().toString(), null, "/mnt/sdcard/speak.wav");
if(r == TextToSpeech.SUCCESS) displayToast("save success！"); 
```

# git - 是否有 git 命令可以获取远程 git 存储库服务器上的项目/文件的版本列表

> ID：12949729
> 
> 赞同：0
> 
> 时间：2012-10-18T07:55:02.793
> 
> 标签：git

假设我有一个版本为 4 的文件，而远程存储库服务器上的同一文件是版本 8。我想获取项目/文件的版本列表。

然后我想将我的文件与版本 6 合并。

我该怎么做

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:03:11.787

*请注意，在 git 中，每个版本（提交）都描述了存储库的完整状态，而不是基于每个文件的版本控制。*

您可以使用以下命令执行您想要的操作：

```
git fetch origin 
```

这会从称为`origin`. 您可以将其视为从源更新所有分支的本地缓存状态。

然后以下命令将列出所有对文件进行更改的提交，而这些更改`docs/foo.txt`在本地当前分支中没有：

```
git log -p ..origin/master -- docs/foo.txt 
```

该`-p`选项表示还包括输出中版本之间的完整差异。您可以将其排除在外，以获得更简洁的输出，仅显示提交消息。

# android - ContentProvider 实现，如何将“Selection”和“SelectionArgs”转换为键值对？

> ID：12949730
> 
> 赞同：2
> 
> 时间：2012-10-18T07:55:09.457
> 
> 标签：android, android-contentprovider

我正在实现一个 ContentProvider，当我实现查询方法时，我遇到了一些困难。

```
public final Cursor query (Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) 
```

如何获取参数的键值对？

假设用户传递类似“a=? and b=?”的内容 和 2,"hello" 作为 selectionArgs，我想获得一个 HashMap {a:2,b:"hello"}。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T08:43:21.520

这是一个程序，它演示了您正在寻找的解决方案。仔细查看该`getHashmap()`方法，该方法将选择字符串和选择参数作为参数并返回您要查找的内容的哈希图。我以您的数据集为例。根据您要寻找的内容，它应该更接近您的解决方案。唯一需要注意的是，如果您要使用除“=”之外的不同逻辑比较，则需要修改正则表达式。让我知道它是否适合您

```
 public static void main(String[] args) {
        String sel = "a=? and b=?";
    String[] ags = new String[] { "2", "hello" };
        HashMap<String, String> result = getHashmap(sel, ags);

    Iterator it = result.entrySet().iterator();
    while (it.hasNext()) {
        Map.Entry pairs = (Map.Entry) it.next();
        System.out.println(pairs.getKey() + " = " + pairs.getValue());
        it.remove();
    }

}

public static HashMap<String, String> getHashmap(String selection,
        String[] selectionArgs) {
        HashMap<String, String> result = new HashMap<String, String>();

    Pattern pattern = Pattern.compile("[a-z]*(\\s)*=\\?",
    Pattern.CASE_INSENSITIVE);

    Matcher matcher = pattern.matcher(selection);

    int pos = 0;
    while (matcher.find()) {
        String[] selParts = matcher.group(0).split("=");
        result.put(selParts[0], selectionArgs[pos]);
    pos++;
    }

    return result;
} 
```

# javascript - 如何将jquery代码转换为javascript

> ID：12949734
> 
> 赞同：0
> 
> 时间：2012-10-18T07:55:15.463
> 
> 标签：javascript, jquery

昨天我提出了正确回答的问题，但现在我想将相同的代码转换为 javascript。我做了一些改变，但它不起作用

工作代码- [http://jsfiddle.net/SXzyR/8/](http://jsfiddle.net/SXzyR/8/)

mycode- [http://jsfiddle.net/SXzyR/11/](http://jsfiddle.net/SXzyR/11/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:59:05.527

请阅读一些关于 jQuery 的教程。[这](http://docs.jquery.com/Tutorials%3aGetting_Started_with_jQuery)是一个好的开始，也看看[这里](http://docs.jquery.com/Tutorials)。

jQuery 不是另一种语言，它是 JavaScript 的库。从您的“翻译”代码中考虑以下行：

```
txtval(document.getElementById(this) 
```

而不是写 document.getElementById 你可以简单地使用 jQuery 来写

```
txtval($(this)) 
```

如第一个示例（工作代码）。

此外，您还在代码中将 jQuery 与“本机”JavaScript/DOM 函数混合在一起。不要重新发明轮子，使用 jQuery 来完成你的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T07:59:38.580

您想使用`this.id`而不是[`document.getElementById(this)`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)获取`this`DOM 元素所在的 id 字符串。

# android - 适用于 2.3 但不适用于 4.0 的 Android 应用

> ID：12949736
> 
> 赞同：0
> 
> 时间：2012-10-18T07:55:20.537
> 
> 标签：android, android-manifest, android-4.0-ice-cream-sandwich, android-2.3-gingerbread, android-2.1-eclair

好的，我已经在 Android 应用程序上工作了一段时间。它基本上是一个 RSS 接收器。我使用 RSS 来查看新闻、天气预报、电视节目表和星座运势。

当我在 Android 2.3.3、2.3.6 甚至 2.1 上测试它时，一切都很好；但是当我将它发送给我的朋友使用 Android 4.0 时，它不起作用。我很怀疑，所以我在模拟器上测试了它。4.0 和 4.1 模拟器都不能运行它。在这里，我提供 Manifest 和一个类。如果有人知道如何解决这个问题，那就太好了。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="XXX.XXXXX.XXX"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="14" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Vodic"
        android:label="@string/title_activity_pocetna" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".Pomoc"
        android:label="@string/m_tel_vodi_za_odlu_ne"
        ></activity>
    <activity
        android:name=".Pomocna"
        android:label="@string/m_tel_vodi_za_odlu_ne"
        ></activity>
    .
    .
    .

    <activity
        android:name=".TvRasporedTreca"
        android:label="@string/m_tel_vodi_za_odlu_ne"
        ></activity>

</application>

<uses-permission android:name="android.permission.INTERNET" />

<!-- Needed to check when the network connection changes -->
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>

</manifest> 
```

这是一堂课：

```
public class Vodic extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_pocetna);
    Button tv = (Button)findViewById(R.id.tv);
    Button vijesti = (Button)findViewById(R.id.vijesti);
    Button horoskop = (Button)findViewById(R.id.horoskop);
    Button vremenska_prognoza = (Button)findViewById(R.id.vremenska_prognoza);
    Button o_aplikaciji = (Button)findViewById(R.id.o_aplikaciji);
    Button pomoc = (Button)findViewById(R.id.pomoc);

    tv.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View arg0) {
            Intent fy=new Intent(getApplicationContext(), TV_Raspored.class);
            startActivity(fy);
        }
    });

    .
    .
    .

    pomoc.setOnClickListener(new View.OnClickListener() {
        @Override
    public void onClick(View arg0) {
            Intent fy=new Intent(getApplicationContext(), Pomoc.class);
            startActivity(fy);
        }
    });

}

public boolean isOnline() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if(netInfo != null && netInfo.isConnected()) {
        return true;
    }
    return false;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_pocetna, menu);
    return true;
}
} 
```

所以，总结一下。它适用于 2.1 和 2.3.3 但不适用于 4.0 和 4.1 。我不知道出了什么问题..所以如果有人知道，请帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:31:30.957

从 Android 3.x 及更高版本开始，Google 添加了一些检查，如果您的应用程序采用非常糟糕的做法，则会产生错误。
没有日志很难确认，但最可能的情况是您在活动的核心进行网络操作，生成 NetworkOnUIThread 异常。
这不是 Android 框架中的错误。问题是您的活动在主线程中运行，即 UI 线程。
因此，当您在 Activity 中进行网络调用时，整个 UI 会冻结，直到您得到答案（或超时）；这是您绝对要避免的事情。这个问题的一个简单解决方案是使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)：它是一种易于实现的内置解决方案，可以在辅助线程中进行操作。

# javascript - 如何在javascript中使用for循环加载手风琴？

> ID：12949740
> 
> 赞同：1
> 
> 时间：2012-10-18T07:55:45.357
> 
> 标签：javascript, html

我有一个只有一个标题的手风琴，它将显示文档名称和编号，如果单击标题，手风琴将打开并显示为文档的详细信息页面，现在我要问的是。每个登录到移动应用程序的用户，都会有不同数量的文件连接到用户名......现在我需要的是如何让那个手风琴复制自己，以便为 web 服务加载的 X 数量的文件。我在 javascript 中需要这个，因为我使用的是：-visual studio express for windows phone/HTML5/CSS/Javascript。所有的教程都显示了一个为数据创建一个新的 for 循环，但我已经有了一个 div（手风琴），我需要的只是加载它，以免说 10 次只是为了看看它是否有效，然后将假数据输入输入字段

**手风琴的 HTML**

```
 <div id="AccordionContainer" class="AccordionContainer">
<div onclick="runAccordion(1)">
  <div class="Accordiontitle" onselectstart="return false;">
    <a>
      <input class="AccordionLink" type="button" href="ItemPages.html" id="docname"/>
    </a>
    <br/>
    <a id="POnumber"></a>
  </div>
</div>
<div id="Accordion1Content" class="AccordionContent" style="background-color:white; color:grey;">
  <form>
    <p>
      <label for="create" >Created by :</label>
      <input type="text" style="margin-left:60px;" readonly="readonly" DISABLED="DISABLED" size="22" id="create"/>
    </p>
    <p>
      <label for="createdate" >Created Date :</label>
      <input type="text" style="margin-left:43px;" readonly="readonly" DISABLED="DISABLED" size="22" id="createdate"/>
    </p>
    <p>
      <label for="process" >Process name :</label>
      <input type="text" style="margin-left:36px;" readonly="readonly" DISABLED="DISABLED" size="22" id="process"/>
    </p>
    <p>
      <label for="transtype">Transaction type :</label>
      <input type="text" style="margin-left:20px;" readonly="readonly" DISABLED="DISABLED" size="22" id="transtype"/>
    </p>
    <p>
      <label for="lastact">Last action :</label>
      <input type="text" style="margin-left:61px;" readonly="readonly" DISABLED="DISABLED" size="22" id="lastact"/>
    </p>
    <p>
      <label for="lastuser">Last user :</label>
      <input type="text" style="margin-left:73px;" readonly="readonly" DISABLED="DISABLED" size="22" id="lastuser"/>
    </p>
    <p>
      <label for="lastupd">Last update :</label>
      <input type="text" style="margin-left:55px;" readonly="readonly" DISABLED="DISABLED" size="22" id="lastupd"/>
    </p>
    <p>
      <label for="duration">Duration :</label>
      <input type="text" style="margin-left:78px;" readonly="readonly" DISABLED="DISABLED" size="22" id="duration"/>
    </p>
    <p>
      <label for="saved">Saved :</label>
      <input type="text" style="margin-left:93px;" readonly="readonly" DISABLED="DISABLED" size="22" id="saved"/>
    </p>
    <p>
      <label for="adhoc">Ad hoc user :</label>
      <input type="text" style="margin-left:53px;" readonly="readonly" DISABLED="DISABLED" size="22" id="adhoc"/>
    </p>
  </form>
</div>
</div> 
```

即使是正确的网站链接也可以使用:) thnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:52:20.083

我想[这](http://jsfiddle.net/Vandeplas/WTf8y/1/)是第一步...

```
/* a helper method */

function getElsByClassName(classname, container){
    var rv = [];
    container = container || document;

    var elems  = container.getElementsByTagName('*')
    if (elems.length){
        for (var x in elems ){
            if (elems[x] && elems[x].className && elems[x].className == classname){
                rv.push(elems[x]);
            }
        }
    }
    return rv; 
}

/* the code */
var accordions = document.getElementById("accordions"),
    accordion = getElsByClassName("AccordionContainer")[0],
    numberOfAcc = 10;

for(var i = 0; i< numberOfAcc; i++){
    var obj = accordion.cloneNode(true),
        btn = getElsByClassName("runAccordionButton", obj)[0];
    /* here you can attach on click handlers and set values using javascript */
   btn.onclick = function() {
      alert('clicked It');
      //here goes the logic
   };

    //setting values
   var creator = getElsByClassName('create',obj)[0]
   creator.value = 'John Do the ' + i + 'th';  

    //add it to the container       
    accordions.appendChild(obj);
}

​ 
```

# c# - 开关 C# 中的多个条件

> ID：12949741
> 
> 赞同：3
> 
> 时间：2012-10-18T07:55:45.930
> 
> 标签：c#

无法在 switch 语句中添加多个条件。如何使用 switch 语句来做到这一点？我必须使用多个 if 条件吗？

```
string oldValue = ".....long string1....";
string newValue = ".....long string2....";
switch (oldValue.Length && newValue.Length)
{
    case <500 && <500:
        //insert as is
        break;
    case >500 && <500:
        //split oldValue into array of strings and insert each
        //insert newValue as is
        break;
    case <500 && >500:
        //insert oldValue As is
        //split newValue into array of strings and insert each
        break;
    case >500 && >500:
        //split oldValue into array of strings and insert each
        //split newValue into array of strings and insert each
        break;
    default:
        break;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T07:57:09.613

不，你不能这样做。`switch`语句测试值，而不是表达式。

您需要改用`if`语句。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T08:00:01.287

查看您的评论， 的长度`oldValue`仅影响您使用的内容`oldValue`，而 的长度`newValue`仅影响您使用的内容`newValue`。

为什么不把它分成两个单独的语句？甚至变成通用方法？

```
string[] GetValuesToInsert(String input)
{
    if (input.Length < 500)
        return new[] {input};
    else
        return input.Split(...);
}

whatever.Insert(GetValuesToInsert(oldValue));
whatever.Insert(GetValuesToInsert(newValue)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T07:57:37.800

你不能这样做，你需要使用`if`and `else if`。

`switch`通常使用不同的技术来跳转到正确的分支（称为 jumptable）。基本上它是一个单跳，其目标位置是从 of 中计算出来的`value`，`switch(value)`而不是许多顺序比较。细节取决于架构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T08:00:38.880

只是你打破了 switch 语句规则。你不能在那里传递表达式。您需要传递一个值。请参考以下链接 [http://msdn.microsoft.com/en-us/library/06tc147t(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/06tc147t(v=vs.71).aspx)

您需要使用 if-else 语句。

# biopython - Bio.Entrez.Parser.ValidationError：未能在 DTD 中找到标记“构建”

> ID：12949747
> 
> 赞同：3
> 
> 时间：2012-10-18T07:56:24.993
> 
> 标签：biopython

我刚刚安装了 Biopython 并想尝试它的功能，所以我开始阅读教程。

然而，当我到达关于从 Entrez 获取信息的章节时，我遇到了一个问题。

教程中的示例很简单：

```
from Bio import Entrez
Entrez.email = "A.N.Other@example.com"
handle = Entrez.einfo(db="pubmed")
record = Entrez.read(handle) 
```

这工作正常。但是，一旦我想解析与 pubmed 不同的数据库，我就会收到以下错误：

```
Bio.Entrez.Parser.ValidationError: Failed to find tag 'Build' in the DTD. To skip all tags that are not represented in the DTD, please call Bio.Entrez.read or Bio.Entrez.parse with validate=False. 
```

尝试 validate=False 选项也不起作用，因为这会引发 Bio.Entrez.Parser.NotXMLError。

有人可以告诉我我做错了什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T16:48:07.643

为了解决这个问题，只需将您的调用更改`Entrez.read()`为包含验证参数，如下所示：

```
record = Entrez.read(handle,validate=False) 
```

这个问题的另一个答案是正确的。这是 Biopython 解析器中的一个错误。希望他们能尽快更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T05:53:11.960

**这不是一个真正有效的解决方案，但显示了问题所在。我认为这可能是 biopython (Entrez.Parse) 错误，所以我会与他们取得联系，看看他们的想法。**

因此，Biopython 的一些黑客行为表明问题在于“构建”标签名称。

如果我们手动执行此操作，XML 请求的前几行`pubmed`如下所示

```
<eInfoResult>
  <DbInfo>
    <DbName>pubmed</DbName>
    <MenuName>PubMed</MenuName>
    <Description>PubMed bibliographic record</Description>
    <Count>22224084</Count>
    <LastUpdate>2012/10/30 03:30</LastUpdate>
    .... 
```

但是蛋白质请求看起来像这样；

```
<eInfoResult>
  <DbInfo>
    <DbName>protein</DbName>
    <MenuName>Protein</MenuName>
    <Description>Protein sequence record</Description>
    <Build>Build121030-0741m.1</Build>                   <-------- THIS IS BAD
    <Count>59244879</Count>
    <LastUpdate>2012/10/30 18:39</LastUpdate> 
```

我看了一下 Entrez.Parser 的工作原理，它基本上无法识别`build`标签。进一步生根显示标签是在 DTD 文件和 einfo DTD 文件中定义的，在我的系统上是这里；

```
/usr/local/lib/python2.7/dist-packages/Bio/Entrez/DTDs 
```

如果我们检查相关文件`eInfo_020511.dtd`并添加一个构建标记行（下面带有箭头的行以前不存在）；

```
<!--    
                This is the Current DTD for Entrez eInfo
$Id: eInfo_020511.dtd,v 1.1 2008-05-13 11:17:44 mdehoon Exp $
-->
<!-- ================================================================= -->

<!ELEMENT   DbName      (#PCDATA)>  <!-- \S+ -->
<!ELEMENT   Name        (#PCDATA)>  <!-- .+ -->
<!ELEMENT   FullName    (#PCDATA)>  <!-- .+ -->
<!ELEMENT   Description (#PCDATA)>  <!-- .+ -->
<!ELEMENT   Build       (#PCDATA)>  <!-- .+ -->     <------- I ADDED THIS LINE
<!ELEMENT   TermCount   (#PCDATA)>  <!-- \d+ -->
<!ELEMENT   Menu        (#PCDATA)>  <!-- .+ --> 
```

现在可以了。对该文件的评论表明它自 2008 年以来没有更新（下面的行来自 DTD 标头）。

```
 $Id: eInfo_020511.dtd,v 1.1 2008-05-13 11:17:44 mdehoon Exp $ 
```

我的猜测是，从那时起就添加了构建标签，但该文件从未更新以反映这一点。

# common-lisp - 对于由多个包组成的 Common Lisp 库，是否有标准的方法来导出 API？

> ID：12949749
> 
> 赞同：4
> 
> 时间：2012-10-18T07:56:26.363
> 
> 标签：common-lisp

显然，外部可见的 API 是通过导出符号来发布的。但是......如果我有多个包（比如 A、B 和 C）并且 A 的导出符号并不都是外部 API 的一部分——B 和 C 需要其中的一些？（类似地，B 为 A 和 C 导出一些符号，为外部 API 导出一些符号；C 是“顶级”包，它所有导出的符号都是公共 API 的一部分；我想保持模块化并允许 A 隐藏其内部来自 B 和 C，所以我避免使用 '::')。

我现在的解决方案是从 C 重新导出所有应该公开的内容，并记录公共 API 仅包含 C 的导出符号，人们应该远离 A 和 B 的公共符号，因为错误和代码被破坏内部接口改变的未来。

有没有更好的办法？

更新：这是我对 Xach 回答的理解的实现：

首先，让我完成我的示例。我想导出符号`symbol-a-1`和`symbol-a-2`包`a`，符号`symbol-b-1`和`symbol-b-2`包`b`和符号`api-symbol-1`以及`api-symbol-2`包`c`。只有从中导出的符号`c`是公共 API 的一部分。

首先， 的定义`a`：

```
(defpackage #:a
  (:use #:cl)) 
```

请注意，没有任何导出的符号:-)

辅助宏（使用 Alexandria）：

```
(defmacro privately-export (package-name &body symbols)
  `(eval-when (:compile-toplevel :load-toplevel :execute)
     (defun ,(alexandria:format-symbol *package*
                                       "IMPORT-FROM-~a"
                                       (symbol-name package-name)) ()
       (list :import-from
             ,package-name
             ,@(mapcar (lambda (to-intern)
                         `',(intern (symbol-name to-intern) package-name))
                       symbols))))) 
```

使用宏“私下导出”:-)：

```
(privately-export :a :symbol-a-1 :symbol-a-2) 
```

现在定义`b`：

```
(defpackage #:b
  (:use #:cl)
  #.(import-from-a)) 
```

... `b`'出口'：

```
(privately-export :b :symbol-b-1 :symbol-b-2) 
```

...`c`的定义：

```
(defpackage #:c
  (:use #:cl)
  #.(import-from-a)
  #.(import-from-b)
  (:export :api-symbol-1 :api-symbol-2) 
```

这种方法的问题：

*   `a`不能使用符号 from `b`（在两者都被定义后没有`import`ing 符号 from `b`from `a`）；
*   该语法`package:symbol`基本上不适用于“私人”导出的符号（它只是`symbol`或`package::symbol`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:46:37.967

如果 A 和 B 主要用于 C 的实现，您可以让 C 的 defpackage 形式通过选择性地使用来驱动事物`:import-from`，因为您可以导入非外部的事物。然后您可以有选择地从那里重新导出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T09:06:43.133

您可以添加第三个包 D，它导出所有公共 API 符号，并将 A、B 和 C 包视为私有包。然后，您可以使用限定名称限定 API 包中的所有函数和变量定义，例如

`(defun D:blah () ...)`

便于直观地发现公共入口点的定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T12:18:04.223

Probably, the easiest way is proposed by [Hans](https://stackoverflow.com/users/928528/hans23).

You may also wan to take a look at Tim Bradshaw's [Conduit packages](http://www.tfeb.org/lisp/hax.html#CONDUITS)

# iphone - 如何设置 UIButton 标题标签自上而下

> ID：12949751
> 
> 赞同：0
> 
> 时间：2012-10-18T07:56:26.743
> 
> 标签：iphone, ios, xcode, uibutton

想知道如何在自上而下的 UIButton 标题标签中设置文本。

上面的文字是“按我”

想展示

```
"
p
r
e
s
s

m
e
" 
```

我做了这个

```
CGAffineTransform newTransform = CGAffineTransformMakeRotation(90 * (M_PI / 180));
    self.activeButton.transform = newTransform; 
```

但它只改变了按钮方向而不是文本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:12:56.147

将文本垂直旋转不同于将每个字母写在单独的行上，这是我从您的问题中收集到的您的意图。

为此，您实际上需要将每个字母写在单独的行上！您可以在 UIButton 文本中创建新行，方法是在 Interface Builder 的文本字段中按 Enter 的同时按住 Alt/Option。请注意，这必须是实用程序面板中的文本字段属性，如果您通过双击按钮来编辑文本，则无法添加新行。

完成此操作后，将“换行”模式更改为 Character Wrap 或 Word Wrap 以显示多行。

编辑：我意识到您可能正在尝试在代码中使用您的按钮，所以我写了这篇文章，应该将常规按钮的文本转换为垂直间隔，一个字母一个字母：

```
// Create a temporary NSString to store the new formatted text string
// Set it to the first character so we can have a simple loop from the second to the last character
NSString *newText = [NSString stringWithFormat:@"%C",[button.titleLabel.text characterAtIndex:0]];
for(int i=1;i<button.titleLabel.text.length;i++) {
    // Format newText to include a newline and then the next character of the original string
    newText = [NSString stringWithFormat:@"%@\n%C",newText,[button.titleLabel.text characterAtIndex:i]];
}
// We must change the word wrap mode of the button in order for text to display across multiple lines.
button.titleLabel.lineBreakMode = NSLineBreakByCharWrapping;
// .. and for an unknown reason, the text alignment needs to be reset. Replace this if you use something other than center alignment.
button.titleLabel.textAlignment = NSTextAlignmentCenter;
// newText now contains the properly formatted text string, so we can set this as the button label
[button setTitle:newText forState:UIControlStateNormal]; 
```

# c# - WindowFromPoint 在 64 位 .NET Framework 上无法正常工作

> ID：12949753
> 
> 赞同：2
> 
> 时间：2012-10-18T07:56:33.327
> 
> 标签：c#, .net, winforms, 64-bit

我用 C# 和 .NET 4.0 编写了简单的测试程序。

```
[DllImport("user32.dll")]
static extern IntPtr WindowFromPoint(int xPoint, int yPoint);

Point pt = MousePosition;
IntPtr w = WindowFromPoint(pt.X, pt.Y); 
```

如果它构建为 32 位，它可以工作。但如果它构建为 64 位，则会返回一个不相关的窗口句柄。有解决方案或替代方案吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T08:45:30.383

对，那行不通。WindowFromPoint() 不需要**两个**参数，它只需要一个。POINT 类型的结构。你在 32 位代码中侥幸逃脱了它，运气在 64 位模式下用完了，因为它以不同的方式传递参数。

使用 pinvoke.net 网站查找正确的 pinvoke 声明。

# android - 在安卓应用中嵌入 ustream 直播视频

> ID：12949755
> 
> 赞同：4
> 
> 时间：2012-10-18T07:56:45.233
> 
> 标签：android, live-streaming

有没有人找到一种在安卓应用中轻松嵌入 ustream 实时视频的方法？我已向 ustream 支持发送电子邮件，但没有回复。我尝试使用 webview 和 playerview，但效果很好。有办法做到这一点iOS。这是链接[如何将 Ustream 视频嵌入 iOS](https://stackoverflow.com/questions/7321334/how-to-embed-ustream-video-into-ios) 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T10:12:49.133

嵌入使用`WebView`然后启用 JavaScript 使用

> webview.getSettings().setJavaScriptEnabled(true);

# java - 如何处理 .tif 图像？

> ID：12949756
> 
> 赞同：2
> 
> 时间：2012-10-18T07:56:46.567
> 
> 标签：java, image, tiff, jai

现在我必须对一些 .tif 图像进行一些处理（例如读取/保存），但似乎我无法通过 java 读取或写入图像。有没有图书馆可以帮助我？以及如何使用它来读取或保存图像？感谢您的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T08:00:14.493

我猜你需要使用 JAI（Java 高级成像包），看看[这个](http://www.rgagnon.com/javadetails/java-0605.html)，看看[这个例子](https://stackoverflow.com/a/1958845/395659)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T08:05:46.627

[Java Advanced Imaging](https://stackoverflow.com/tags/jai/info)提供了对 TIFF 的开箱即用支持。或者，在应用程序的运行时类路径上为 TIFF添加一个[服务提供程序接口Jar。](http://docs.oracle.com/javase/tutorial/sound/SPI-intro.html)并且`ImageIO`能够处理它们（至少加载它们，它可能不会提供对“多页”TIFF 写入的支持）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T08:07:00.573

Java默认支持读取和写入jpeg、gif和png，使用`ImageIO`. 为了读取 tiff 图像，您必须使用名为 jai_imageio.jar 的 JAI 插件。您只需将此 jar 放入类路径中，您就可以读取 tiff 图像。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-23T11:56:43.870

使用`jai`现在不工作，无法获得“com.sun.image”。但找到了另一个有效的包 - `jdeli`. 它有一个类`TiffDecoder`，可用于将具有 alpha 通道的 tiff 图像解码（读取）为`Buffered image`. 然后你可以使用`ImageIO.write`

# gwt - 如何在 GWT CellTable 中捕获 doubleClickEvent

> ID：12949760
> 
> 赞同：3
> 
> 时间：2012-10-18T07:56:54.700
> 
> 标签：gwt, double-click, celltable

我正在尝试让 GWT`CellTable`捕获类型的事件`DoubleClickEvent`，但是当在 UI 中单击一行时`CellTable`正确接收类型的事件，当双击该行时`ClickEvent`它看不到任何事件。`DoubleClickEvent`

因此，如果我单击 UI 中的一行，则声明的处理程序`ClickEvent`会正确触发，但如果我双击声明的处理程序，`DoubleClickEvent`则*不会*触发。

我是做错了什么还是`CellTable`自己根本无法处理`DoubleClickEvent`？在后一种情况下，捕捉表格中双击的好方法是什么？

下面是我的 CellTable 声明的代码：

```
CellTable<ServiceTypeUI> contentTable = new CellTable<ServiceTypeUI>(10, style);
contentTable.setSelectionModel(new SingleSelectionModel<ServiceTypeUI>());
contentTable.addHandler(new DoubleClickHandler() { // HANDLER NOT CORRECTLY TRIGGERED
   @Override
   @SuppressWarnings("unchecked")
   public void onDoubleClick(DoubleClickEvent event) {
       presenter.doubleClickHandler(event);
   }

}, DoubleClickEvent.getType());
contentTable.addHandler(new ClickHandler() { // HANDLER CORRECTLY TRIGGERED
   @Override
   @SuppressWarnings("unchecked")
   public void onClick(ClickEvent event) {
       presenter.clickHandler(event);
   }

}, ClickEvent.getType()); 
```

我还尝试删除`ClickEvent`处理程序声明和`SelectionModel`声明，以避免其中任何一个捕获`DoubleClickEvent`事件并将其视为，`ClickEvent`但即使在这种情况下也没有触发 DoubleClickHandler。

```
CellTable<ServiceTypeUI> contentTable = new CellTable<ServiceTypeUI>(10, style);
contentTable.addHandler(new DoubleClickHandler() { // HANDLER NOT CORRECTLY TRIGGERED
   @Override
   @SuppressWarnings("unchecked")
   public void onDoubleClick(DoubleClickEvent event) {
       presenter.doubleClickHandler(event);
   }

}, DoubleClickEvent.getType()); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T12:46:23.133

```
 SingleSelectionModel<T> selectionModel
     = new SingleSelectionModel<T>();

   cellTable.setSelectionModel(selectionModel);
   cellTable.addDomHandler(new DoubleClickHandler() {

        @Override
        public void onDoubleClick(final DoubleClickEvent event) {
            T selected = selectionModel
                    .getSelectedObject();
            if (selected != null) {
                //DO YOUR STUFF

                                  }

        }
    }, 
    DoubleClickEvent.getType()); 
```

You have to replace the T with the your "ServiceTypeUI" . The value selected will be the object which was been chosen from the user.

# c# - 工作单元、通用存储库和业务层

> ID：12949762
> 
> 赞同：2
> 
> 时间：2012-10-18T07:57:07.727
> 
> 标签：c#, repository, unit-of-work

首先很抱歉，如果已经问过这个问题，但我找不到这个“特殊情况”的答案。

我有一个工作单元界面：

```
public interface IUnitOfWork
{
    DbContext Context { get; set; }
    void Dispose();
    void Save();
} 
```

并使用通用存储库类：

```
public class GenericRepository<TEntity> where TEntity : class
    {

        private DbSet<TEntity> dbSet;

        private IUnitOfWork UnitOfWork { get; set; }
        private DbContext context { get { return UnitOfWork.Context; } }

        public GenericRepository(IUnitOfWork unitOfWork)
        {
            UnitOfWork = unitOfWork;
            this.dbSet = context.Set<TEntity>();
        }

        public virtual IEnumerable<TEntity> Get(
            Expression<Func<TEntity, bool>> filter = null,
            Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>> orderBy = null,
            string includeProperties = "")
        {
            IQueryable<TEntity> query = dbSet;

            if (filter != null)
            {
                query = query.Where(filter);
            }

            foreach (var includeProperty in includeProperties.Split
                (new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries))
            {
                query = query.Include(includeProperty);
            }

            if (orderBy != null)
            {
                return orderBy(query).ToList();
            }
            else
            {
                return query.ToList();
            }
        }

        public virtual TEntity GetByID(object id)
        {
            return dbSet.Find(id);
        }

        public virtual void Insert(TEntity entity)
        {
            dbSet.Add(entity);
        }

        public virtual void Delete(object id)
        {
            TEntity entityToDelete = dbSet.Find(id);
            Delete(entityToDelete);
        }

        public virtual void Delete(TEntity entityToDelete)
        {
            if (context.Entry(entityToDelete).State == EntityState.Detached)
            {
                dbSet.Attach(entityToDelete);
            }
            dbSet.Remove(entityToDelete);
        }

        public virtual void Update(TEntity entityToUpdate)
        {
            dbSet.Attach(entityToUpdate);
            context.Entry(entityToUpdate).State = EntityState.Modified;
        }
    } 
```

我不想在我的 MVC 控制器中执行我的逻辑，所以我添加了一个业务层。我的问题是，我应该在哪里实例化（和分配）我的 IUnitOfWork，在我的控制器中并将它传递给我的业务层？例子：

```
 public static class CircleLogic
    {
        public static void DeleteCircle(IUnitOfWork uow, int id)
        {
            try
            {
                var circleRep = new GenericRepository<Circle>(uow);

                var circle = circleRep.GetByID(id);
                 ......
                  circleRep.Delete(id);            

                uow.Save();

            }
            catch (Exception ex)
            {
                throw;
            }
        }
    } 
```

我已经看到[了，](https://stackoverflow.com/questions/5580651/what-is-the-correct-way-to-use-unit-of-work-repositories-within-the-business-lay "这")但我不想在我的业务层中实例化它。最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:27:20.970

我认为按照您的建议将其传递到您的业务层没有任何害处。但是，如果您想让您的业务层完全不了解持久性，我建议您引入一个`IRepository<T>`接口并将其传入。

在处理对象方面，我会让您的`IUnitOfWork`/Repository 类都实现`IDisposable`，以便您可以使用该`using`语句，例如

```
public ActionResult DeleteCircle(int id)
{
    using (IUnitOfWork uow = new UnitOfWork())
    {
        using (IRepository<Circle> repo = new GenericRepository<Circle>(uow))
        {
            CircleLogic.DeleteCircle(repo, id);
        }
        uow.Save();
    }
}

...

public static class CircleLogic
{
    public static void DeleteCircle(IRepository<Circle> repo, int id)
    {
        var circle = repo.GetById(id);
        ...
        repo.Delete(id);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:02:39.867

因为您的具体`UnitOfWork`实现很可能存在于您的持久层中，所以在持久层或业务层的上一层中实例化它是明智的。您的 UI 应该不知道您使用什么技术来持久化您的实体/数据。

# html - 无论物理尺寸如何，如何在任何显示器上的相同位置显示 div

> ID：12949767
> 
> 赞同：0
> 
> 时间：2012-10-18T07:57:16.957
> 
> 标签：html, css, screen, screen-resolution

我想将**添加**div 放置在任何显示器上的相同位置，无论显示器的物理尺寸是否相同。这怎么可能 ？

```
<div id="iphone">
    <div id = "add" style="position:absolute; left:37%; top:23%; width:52%; height:77%; z-index:1">

           <iframe src='index.php/test.php' frameborder='1'; width='452%'; height='79%';scrolling='yes'; align='center';></iframe>
      </div>
</div>​ 
```

CSS是：

```
#iphone 
{
width: 35%;
height: 100%;
margin: 0 auto;
margin-top: 5%;
padding-left: 1px;
background: url("/debug-console/images/img_iphone.jpg") no-repeat;
background-position:center;  
}
#add 
{
margin: 0 0 0;
border: 0;
} 
```

任何帮助将不胜感激在此先感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:04:57.447

```
position: fixed;
top: 50px;
left: 50px; 
```

将始终使其距顶部和左侧 50 像素，无论如何，或者`position: absolute;`如果您希望它与浏览器一起滚动，请使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:07:13.370

当您使用百分比来设置位置时，例如`top:23%;`，如果您最小化屏幕 - 空间也会最小化，因此，如果您希望空间始终保持不变，则必须使用像素。（例如 - `top:100px;`）

# php - 运行脚本时未调用函数

> ID：12949768
> 
> 赞同：1
> 
> 时间：2012-10-18T07:57:19.750
> 
> 标签：php, ajax

我正在使用 Ajax 调用此脚本。脚本的“写入数据库”部分运行良好，但由于某种原因，脚本运行时 send_receipt() 函数没有运行。

发送电子邮件函数需要包含在自定义函数中，因为脚本最终将发送两封电子邮件——一封给客户的收据和一封给公司的通知。因此，所有的 mail() 变量和数据都将重复，但目标电子邮件地址不同，脚本运行时会调用这两个函数。

非常感谢任何帮助。

谢谢！

阿贾克斯：

```
 $.ajax({
        type: "POST",
        url: "selfnormal.php",
        data: "fname="+ fname +"& lname="+ lname +"& worktel="+ worktel +"& privtel="+ privtel +"& mobtel="+ mobtel +"& email="+ email +"& workaddress="+ workaddress +"& homeaddress="+ homeaddress +"& level="+ level +"& size="+ size +"& deliv="+ deliv +"& venue="+ venue +"& ioshdate="+ ioshdate +"& isdiscount="+ isdiscount +"& elcas="+ elcas +"& funding="+ funding +"& paytype="+ paytype +"& selfinvoicead="+ selfinvoicead +"& companyname="+ companyname +"& companyaddress="+ companyaddress +"& PO="+ PO +"& tcs="+ tcs +"& finalprice="+ finalprice +"& finalvat="+ finalvat +"& finalfee="+ finalfee +"& finaltotal="+ finaltotal +"& finalmonthly="+ finalmonthly +"& finaladmin="+ finaladmin,
        success: function(){
        alert ("success");
        } 
```

PHP：

```
<?php
$firstname = htmlspecialchars(trim($_POST['fname']));
$lastname = htmlspecialchars(trim($_POST['lname']));
$worktel = htmlspecialchars(trim($_POST['worktel']));
$privtel = htmlspecialchars(trim($_POST['privtel']));
$mobtel = htmlspecialchars(trim($_POST['mobtel']));
$email = htmlspecialchars(trim($_POST['email']));
$workaddress = htmlspecialchars(trim($_POST['workaddress']));
$homeaddress = htmlspecialchars(trim($_POST['homeaddress']));
$level = htmlspecialchars(trim($_POST['level']));
$size = htmlspecialchars(trim($_POST['size']));
$deliv = htmlspecialchars(trim($_POST['deliv']));
$venue = htmlspecialchars(trim($_POST['venue']));
$ioshdate = htmlspecialchars(trim($_POST['ioshdate']));
$isdiscount = htmlspecialchars(trim($_POST['isdiscount']));
$elcas = htmlspecialchars(trim($_POST['elcas']));
$funding = htmlspecialchars(trim($_POST['funding']));
$paytype = htmlspecialchars(trim($_POST['paytype']));
$selfinvoicead = htmlspecialchars(trim($_POST['selfinvoicead']));
$companyname = htmlspecialchars(trim($_POST['companyname']));
$companyaddress = htmlspecialchars(trim($_POST['companyaddress']));
$po = htmlspecialchars(trim($_POST['PO']));
$tcs = htmlspecialchars(trim($_POST['tcs']));
$courseprice = htmlspecialchars(trim($_POST['finalprice']));
$vat = htmlspecialchars(trim($_POST['finalvat']));
$fee = htmlspecialchars(trim($_POST['finalfee']));
$admin = htmlspecialchars(trim($_POST['finaladmin']));
$total = htmlspecialchars(trim($_POST['finaltotal']));
$monthly = htmlspecialchars(trim($_POST['finalmonthly']));

$dbc = mysqli_connect('xxxx', 'xxxx', 'xxxx', 'xxxx')
or die ('Could not connect to MySQL server.');

$query = "INSERT INTO enrolments (fname, lname, worktel, privtel, mobtel, email, workaddress, homeaddress, level, size, deliv, venue, ioshdate, isdiscount, elcas, funding, paytype, selfinvoicead, companyname, companyaddress, po, tcs, price, VAT, BIFM_Fee, Total, Monthly, adminfee)" . 
"VALUES ('$firstname', '$lastname', '$worktel', '$privtel', '$mobtel', '$email', '$workaddress', '$homeaddress', '$level', '$size','$deliv','$venue', '$ioshdate','$isdiscount','$elcas', '$funding', '$paytype','$selfinvoicead','$companyname','$companyaddress','$po','$tcs', '$courseprice', '$vat', '$fee', '$total', '$monthly', '$admin')";

$result = mysqli_query($dbc, $query)
or die ('error querying database');
mysqli_close($dbc);

function send_receipt() {
$to = $email;
$subject = $firstname . ', thank you for enrolling on the ' . $level . ' ' . $size . ' (' . $deliv . ')';
$msg = "Hi $firstname," . PHP_EOL . 
    PHP_EOL .
    "Thanks for enrolling with us. Please find a summary of your enrolment below. We'll be in touch shortly to arrange payment, after which we will send you joining instructions and course details." . PHP_EOL .
    PHP_EOL . 
    "Please be aware that in accordance with UK Legislation, you are legally entitled to a 7 day 'cooling off' period during which you may cancel your course at no cost. After this period, you will be liable for full payment as detailed below." . PHP_EOL . 
    PHP_EOL . 
    "Level: $level" . PHP_EOL .
    "Scale: $size" . PHP_EOL .
    "Delivery Method: $deliv" . PHP_EOL .
    "Payment Method: $paytype" . PHP_EOL .
    "Course Price: £$courseprice" . PHP_EOL .
    "VAT: £$vat" . PHP_EOL .
    "ILM/BIFM fee: £$fee" . PHP_EOL .
    "Total: £$total" . PHP_EOL .
    PHP_EOL . 
    "We look forward to welcoming you onto the course in the near future." . PHP_EOL .
    PHP_EOL .
    "Kind regards" . PHP_EOL .
    PHP_EOL .
    "The Xenon Group staff";

    mail ($to, $subject, $msg, 'From: Xenon Group Enrolments');
}

send_receipt(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:02:55.543

首先，您的 PHP 依赖于函数范围之外的 var。这不是 PHP 的工作方式。如果您希望访问函数外部的变量，则必须使用`global $var;`将变量拉入函数的范围...如果您不这样做，则变量将全部未定义，因此您的`mail()`函数将不知道将其发送到哪里正在发送，因为`$email`将为空。

```
function send_receipt(){

  global $email, $firstname, $lastname; /* and so on... */

} 
```

但是，最好定制您的函数，以便您将要使用的参数发送到其中 - 这使得它更可重用：

```
function send_receipt( $email, $firstname, $lastname ){

  /* and so on ... */

} 
```

甚至更便携（因为您可以发送灵活的数据）：

```
function send_receipt( $email_to, $user_data ){

  /// place any default values here - just in case a value is missed
  $user_data += array(
    'firstname' => '',
    'lastname' => '',
  );

  /// create a shortcut to the data
  $ud = $user_data;

  $msg  = "Hi {$ud[firstname]}," . PHP_EOL .
          "Thanks for enrolling with us....";

  /* and so on ... */

} 
```

其次，为了避免 URL 编码问题，最好像这样制定 jQuery ajax 调用：

```
$.ajax({
    type: "POST",
    url: "selfnormal.php",
    data: {
      "fname": fname,
      "lname": lname,
      "worktel": worktel,
      /* and so on */
    },
    success: function(){
     alert ("success");
    }
 }); 
```

这是因为 jQuery 将为您正确处理 URL 编码值，而不是您之前所做的......它没有编码并且会破坏您的数据包含非法 URL 字符的第二个。

### 回应克里斯的评论:)

上述内容不会改变您的 PHP 脚本接收数据的方式，它只会在数据传输到您的服务器时对其进行保护 - 以便您的 PHP 脚本在开始解析信息后可以正确解释信息。例如，如果您不进行 URL 编码，则以下内容会破坏您之前的 URL。

```
var firstname = 'Pebbl & Pebbl';
var lastname = 'Pebbl';
var url = 'firstname=' + firstname + '&lastname=' + lastname; 
```

使用上面的 URL，您的 PHP 脚本很可能会收到：

```
echo $_POST['firstname'];

/// would output 'Pebbl ' rather than the correct 'Pebbl & Pebbl' 
```

关于您如何在 PHP 端接收数据，以下可能会使它更容易 - 尽管您所做的很好，但它只是没有使用服务器端脚本的功能；）

```
/// define array of 'allowed param names' and 'var names to use in your script'
$allowed_fields = array(
  'fname' => 'firstname',
  'lname' => 'lastname',
  'email' => 'email',
  /* and so on ...*/
);

/// step each of the allowed fields
foreach( $allowed_fields as $field_name => $script_name ){

  /// check the post array to see if we have a value for that param name
  if ( !empty($_POST[$field_name]) ) {
    /// if we do, process by removing whitespace
    $value = trim( $_POST[$field_name] );
    /// and converting html to safe characters
    $value = htmlspecialchars( $value );
  }
  else {
    /// if no value default to empty
    $value = '';
  }

  /// use a variable variable to set the variable defined by $script_name 
  /// to $value i.e. if $script_name == 'email', then this would be the 
  /// same as writing $email = $value;
  $$script_name = $value;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:06:26.647

尝试修改您的 ajax 以显示错误消息响应：

```
$.ajax({
    type: "POST",
    url: "selfnormal.php",
    data: "fname="+ fname +"& lname="+ lname +"& worktel="+ worktel +"& privtel="+ privtel +"& mobtel="+ mobtel +"& email="+ email +"& workaddress="+ workaddress +"& homeaddress="+ homeaddress +"& level="+ level +"& size="+ size +"& deliv="+ deliv +"& venue="+ venue +"& ioshdate="+ ioshdate +"& isdiscount="+ isdiscount +"& elcas="+ elcas +"& funding="+ funding +"& paytype="+ paytype +"& selfinvoicead="+ selfinvoicead +"& companyname="+ companyname +"& companyaddress="+ companyaddress +"& PO="+ PO +"& tcs="+ tcs +"& finalprice="+ finalprice +"& finalvat="+ finalvat +"& finalfee="+ finalfee +"& finaltotal="+ finaltotal +"& finalmonthly="+ finalmonthly +"& finaladmin="+ finaladmin,
    success: function(){
        alert ("success");
    },
    error: function (xhr, status, thrownError) {
       alert(xhr.responseText);
       alert(thrownError);
    }
}); 
```

# build - TFS 构建和工作区

> ID：12949770
> 
> 赞同：0
> 
> 时间：2012-10-18T07:57:23.753
> 
> 标签：build, tfs, workspace

首先，我想为我的英语道歉，这不是我的第一语言！

在构建配置期间 (TFS 2010)，在 Workspace 选项卡中，我可以指定所需的目录，以避免每次运行构建时都获取整个源代码。

除了这样做之外，是否可以指定构建以自动获取解决方案中的项目来构建而不是别的？

非常感谢你的帮助 ！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:01:55.520

简而言之，没有。您必须指定一个文件夹来获取源代码，因为当您在服务器上构建时，构建步骤与获取步骤完全分开。

Visual Studio 中的此行为是在您*打开*解决方案时提供的，它是 IDE 的一项功能，旨在帮助开发人员，但如果您直接从命令行构建，则不会获得此帮助。

# c++ - const 对象的复制构造函数

> ID：12949773
> 
> 赞同：0
> 
> 时间：2012-10-18T07:57:43.513
> 
> 标签：c++, constants, copy-constructor

我有以下课程 foo

```
class foo
{
    int *arr; // arr holds numbers
    int sz; // size of array
    public:
    // Suppose I have made default and 1 parameter c'tor
    foo(const foo &f)
    {
        sz = f.sz;
        arr = new int[sz];
        for(int i=0;i<sz;i++)
            arr[i]=f.arr[i];
    }
};

int main()
{
    foo x(5); //5 is size of array
    const foo y = x; //doesn't work as I haven't initialized in member-initialization list, but how to write for loop in member initialization list ?
} 
```

那么如何在成员初始化列表中编写 for 循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:01:10.283

在这种情况下，您可以只使用 a `std::vector`……无论如何。

通常，我将创建一个私有静态方法来执行分配和复制。然后可以使用初始化列表：

```
static int* CloneInts(const foo& f) {
    int* ints = new ...
    ...copy them from @a f.arr...
    return ints;
} 
```

然后您的初始化列表将如下所示：

```
foo(const foo& f) : arr(CloneInts(f)), sz(f.sz) { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T08:01:44.423

您是否尝试过直接使用复制构造函数构造它？

`const foo y(x);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T08:28:46.493

您应该澄清您的问题，因为问题中的问题实际上并不存在。

该`const foo y = x;`行将编译并使用该复制构造函数。在构造函数完成之前，正在构造的 const 对象不是“const”。因此，即使正在构造的对象是 const，构造函数主体也可以修改对象。

还要注意，示例中的循环甚至没有修改任何曾经是 const 的东西——因为数组是动态分配的，即使对象本身不是，这些数组元素也是可修改的。例如，`arr`在 ctor 完成后指针不可修改，但`arr[0]`仍然是。

尝试以下操作以查看这两点的实际效果：

```
#include <stdio.h>
#include <algorithm>

class foo
{
    int *arr; // arr holds numbers
    int sz; // size of array
    public:
    foo() : arr(0), sz(0) { puts("default ctor");}
    foo(int x) : arr(0), sz(x) {
        puts( "int ctor");
        arr = new int[sz];
        for(int i=0;i<sz;i++)
            arr[i]=0;
    }

    foo(const foo &f)
    {
        puts("copy ctor");
        sz = f.sz;
        arr = new int[sz];
        for(int i=0;i<sz;i++)
            arr[i]=f.arr[i];
    }

    ~foo() {
        delete [] arr;
    }

    foo& operator=(const foo& rhs) {
        if (this != &rhs) {
            foo tmp(rhs);
            std::swap( arr, tmp.arr);
            std::swap( sz, tmp.sz);
        }

        return *this;        
    }

    void update() const {
        for(int i = 0; i < sz; i++) {
            arr[i] = arr[i] + 1;
        }
    }

    void dump() const {
        for(int i = 0; i < sz; i++) {
            printf("%d ", arr[i]);
        }
        puts("");
    }
};

int main()
{
    foo x(5); //5 is size of array
    const foo y = x; 

    y.dump();
    y.update(); // can still modify the int array, even though `y` is const
    y.dump();
} 
```

我认为您可能会将构造 const 对象与构造具有 const 成员的对象混淆，因为这些成员必须在初始化列表中进行初始化。

# windows-8 - 在 Windows 应用商店应用程序中使用嵌入字体

> ID：12949776
> 
> 赞同：3
> 
> 时间：2012-10-18T07:57:46.760
> 
> 标签：windows-8, windows-runtime, embedded-fonts

我想在 Windows RT 应用程序中使用[Anonymous Pro字体。](http://www.ms-studio.com/FontSales/anonymouspro.html)我试图按照[这个线程](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/8019a0ac-77ef-4ebb-83f3-87b6c521625d/)的步骤进行操作，但没有成功。

这是我的尝试：

```
<TextBlock Text="{Binding Title}" HorizontalAlignment="Center" FontSize="56"
           FontFamily="/Assets/Fonts/Anonymous Pro.ttf"
           /> 
```

使用默认字体代替 Anonymous Pro。实际上，它是指定字体系列的示例（参见链接），但我不确定：我应该这样做还是不应该这样做。如果我应该，哪个家庭应该在那里？

那么如何在 Windows RT 应用程序中嵌入自定义字体并从那里使用它呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T10:21:53.770

给你..刚刚附加了字体名称..当我看到你发布 [http://invokeit.wordpress.com/2012/10/18/embed-use-custom-font-in-windows-8-商店应用程序-win8dev-winrt/](http://invokeit.wordpress.com/2012/10/18/embed-use-custom-font-in-windows-8-store-apps-win8dev-winrt/)

# ruby-on-rails - Rails 3 的 jQuery 文件上传 v4，路由错误

> ID：12949785
> 
> 赞同：-1
> 
> 时间：2012-10-18T07:58:31.703
> 
> 标签：ruby-on-rails

我正在学习本[教程](https://github.com/blueimp/jQuery-File-Upload/wiki/jQuery-File-Upload-v4-for-Rails-3)并遇到了困难。

我通过调用获得路由错误`http://localhost:3000/home` 也许我只是调用了错误的页面。如果有人帮助我，我将不胜感激。

Hier 是我的 routes.rb：

```
Try::Application.routes.draw do
 resources :uploads
 root :to => "home#index"
end 
```

uploads_controller.rb：

```
class UploadsController < ApplicationController
  def home
  end

  def index
  end

  def create
    @upload = Upload.new(params[:upload])
    if @upload.save
      render :json => { :pic_path => @upload.picture.url.to_s , :name => @upload.picture.instance.attributes["picture_file_name"] }, :content_type => 'text/html'
    else
      render :json => { :result => 'error'}, :content_type => 'text/html'
    end
  end

end 
```

和意见/主页/index.html.erb：

```
<%= stylesheet_link_tag('jquery.fileupload-ui') %>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script>
<%= javascript_include_tag 'jquery.fileupload', 'jquery.fileupload-ui' %>

<script type="text/javascript" charset="utf-8"> 
   $(function () {
  $('.upload').fileUploadUI({
        uploadTable: $('.upload_files'),
        downloadTable: $('.download_files'),
        buildUploadRow: function (files, index) {
            var file = files[index];
            return $('<tr><td>' + file.name + '<\/td>' +
                    '<td class="file_upload_progress"><div><\/div><\/td>' +
                    '<td class="file_upload_cancel">' +
                    '<button class="ui-state-default ui-corner-all" title="Cancel">' +
                    '<span class="ui-icon ui-icon-cancel">Cancel<\/span>' +
                    '<\/button><\/td><\/tr>');
        },
        buildDownloadRow: function (file) {
            return $('<tr><td><img alt="Photo" width="40" height="40" src="' + file.pic_path + '">' + file.name + '<\/td><\/tr>');
        },
    });
});
</script>

<div class="files"> 
<%= form_for @upload, :html => { :class => "upload", :multipart => true } do |f| %>
  <%= f.file_field :picture %>
  <div>Upload files</div>
<% end %>

<table class="upload_files"></table>
<table class="download_files"></table>
</div> 
```

home_controller.rb：

```
class HomeController < ApplicationController
def index
  @upload  = Upload.new
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:21:19.570

您的路线文件说根路径，即“/”将指向 home#index。

'/home' 没有路由 建议你添加：

```
match '/home' => 'uploads#home' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T08:05:44.933

当您在路由文件中说 root :to => "home#index" 时，这意味着主控制器索引操作

您的视图文件结构也需要修改为views/controller_name/index.html.erb：

# jsp - 在 jsp 中 servlet 会话不一样

> ID：12949788
> 
> 赞同：0
> 
> 时间：2012-10-18T07:58:41.763
> 
> 标签：jsp, servlets, tomcat6, sessionid

我正在创建一个会话 ID

`HttpSession session = request.getSession(true);`

在登录 servlet 中并从那里调用欢迎页面...在两个页面中打印会话值

`<% System.out.println(session.getID()); %>`. 虽然这些会话值在我的本地机器和本地 tomcat 服务器上是相同的，但是当我在远程 tomcat 服务器上运行它时，我得到两个不同的会话值。Tomcat 中是否有任何可能影响此的配置设置。我正在使用`java1.6, Tomcat6.0.25, xml2.4`. 谁能帮我解决这个奇怪的问题。

我最近注意到 set-cookie PATH 设置为“/website-name”，而我看到几个在线文档说“Path=/”。这可能是一个问题吗？在哪里/如何更改此路径以查看其效果？

[解决了]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T09:04:40.967

这可能不是一个好的编程技巧，但这个问题需要更改 web-app>METAINF>context.xml 文件中的 sessioncookiepath 值。特别是我的问题，放置以下代码有帮助： Context sessionCookiePath="" 这可能是由于我的网站结构。

# iphone - 提供对ios6的支持

> ID：12949789
> 
> 赞同：-3
> 
> 时间：2012-10-18T07:58:43.047
> 
> 标签：iphone, ios6, ios5

嗨，我的应用程序是为 IOS 5.1 版构建的，但现在我想为 IOS6 支持它，因为我对视网膜 4 英寸 iPhone 模拟器的所有看法都已向上移动。你能帮助解决这个问题的最简单方法是什么。因为我的屏幕上有很多视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:07:02.750

好的，您应该做的是创建另一个 XIB 并在其上附加“_iPhone5”。像这样：

> ViewController1_iPhone5

在那个 xib 中，将 Files Owner 设置为视图控制器，然后根据自己的喜好重新布局所有 UI 元素并设置插座。现在，每当您展示此视图控制器时，您都想检查设备是否是 iPhone 5，并相应地调整 nib 名称：

在前缀文件中定义它（一个文件被导入到您创建的每个文件中，因此如果您导入一个类，那么所有文件都将导入该类）。如果您不想在您的前缀文件中定义它（应该在您的支持文件中找到），您可以在视图控制器中定义它：

```
#define IS_IPHONE_5 ( fabs ( (double)[[UIScreen mainScreen] bounds].size.height - ( double)568 ) < DBL_EPSILON ) 
```

然后你可以使用这个：

```
 if (IS_IPHONE_5 && [[UIDevice currentDevice] userInterfaceIdiom] != UIUserInterfaceIdiomPad) {

    UIViewController *vc1 = [[MenuMileIndexViewController alloc] initWithNibName: @"ViewController_iPhone5" bundle: nil];

   // present the view controller

} 
```

如果您不使用 XIB，并以编程方式对视图进行编码，请使用以下命令：

```
 if (IS_IPHONE_5 && [[UIDevice currentDevice] userInterfaceIdiom] != UIUserInterfaceIdiomPad) {

// Reposition and resize your subviews

} 
```

注意：确保添加 iPhone 5 默认图像

# c# - OPOS .NET 4.0 扫描仪/秤

> ID：12949790
> 
> 赞同：0
> 
> 时间：2012-10-18T07:58:46.977
> 
> 标签：c#, .net-4.0, barcode-scanner, opos, pos-for-.net

我正在使用 POS For .NET 在 opos 应用程序中使用票务打印机、扫描仪和秤。我从 Monroe 安装了 CCO，让他们在 Windows 7 / .NET 4.0、WPF 应用程序上工作。

我的 Epson 打印机和 Datalogic 扫描仪工作正常。这就是我用来让它在我的 app.config 中工作的方法。

```
 <runtime>
      <NetFx40_LegacySecurityPolicy enabled="true"/>
  </runtime> 
```

现在我在尝试使用 Symbol 扫描仪和 Mettler toledo 秤时遇到了问题。他们都给出了访问冲突异常：

```
Attempted to read or write protected memory. This is often an indication that other memory is corrupt. 
```

当我尝试评论标尺之间的代码时，而不是符号。你们中有人对如何解决这个问题有任何想法吗？或者潜在的问题可能是什么？我已经在互联网上寻找了几天，所以非常感谢一个解决方案。

谢谢，扎科斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T13:09:01.717

对于每个遇到此问题的人：

--> 永远不要使用线程来激活/创建对象扫描仪、打印机或秤。

这是我的问题，有些厂商不支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-05T15:00:45.647

正如 Zarkos 所说，某些设备在通过 POS for .NET 访问时不喜欢使用线程。

我最近遇到了 AURES ODP-333 打印机的问题，在执行该`printer.DeviceEnabled = true`步骤时会造成严重的崩溃。从线程中调用该行会在调试期间使 vshost 崩溃，没有有用的异常。检查事件查看器，错误是随机混合`BEX`或`APPCRASH`错误引用`MFC41.dll`我的应用程序中的任何一个或某些内容，但总是会提到异常代码`0xc0000005`，这意味着某处发生了非托管访问冲突。

值得注意的是，这并不影响所有设备。EPSON 收据打印机和霍尼韦尔条码扫描仪没有螺纹。

我本来想将此作为评论添加到 Zarkos 的答案中，但我还没有足够的声誉！对不起！

# java - 在 Android 上的 OpenCV 中旋转 VideoCapture

> ID：12949793
> 
> 赞同：10
> 
> 时间：2012-10-18T07:58:54.320
> 
> 标签：java, android, opencv, video-capture

在 OpenCV 上使用 VideoCapture 类时如何旋转相机？（Android 上的人脸检测示例）。我正在旋转画布：

```
if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT)
{
    Matrix matrix = new Matrix();
    matrix.preTranslate(
    (canvas.getWidth() - bmp.getWidth()) / 2,
    (canvas.getHeight() - bmp.getHeight()) / 2);
    matrix.postRotate(270f, (canvas.getWidth()) / 2,
    (canvas.getHeight()) / 2);
    canvas.drawBitmap(bmp, matrix, null);
} 
```

但来自相机的图像不旋转：人脸检测不起作用。

相机从以下接收流：

```
protected Bitmap processFrame(VideoCapture capture) {

    capture.retrieve(mRgba, Highgui.CV_CAP_ANDROID_COLOR_FRAME_RGBA);

    capture.retrieve(mGray,
    Highgui.CV_CAP_ANDROID_GREY_FRAME); 
```

更新我做了以下事情：

```
@Override
    protected Bitmap processFrame(VideoCapture capture) {

    if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT) {
        Core.flip(mRgba.t(), mRgba, 0);
    }

    else {
    }
    capture.retrieve(mRgba, Highgui.CV_CAP_ANDROID_COLOR_FRAME_RGBA);
    capture.retrieve(mDetect_thread.mGray,
            Highgui.CV_CAP_ANDROID_GREY_FRAME); 
```

但是是行不通的。当我以 portret 方向运行程序时（在 android 设备上）- 程序不启动当我以横向方向运行 rogram 时 - 程序工作，但是当我旋转设备时，程序工作，但显示的图像不旋转

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-21T14:20:26.493

您的问题主要[与此重复](https://stackoverflow.com/questions/2259678/easiest-way-to-transpose-an-image-rotate-by-90-degrees-using-opencv)，除了您正在寻找 Android 版本。它非常相似，但在这里，**可以通过转置然后翻转图像来获得 90º 旋转：**

```
# rotate 90º counter-clockwise
Core.flip(mRgba.t(), mRgba, 0); //mRgba.t() is the transpose

# rotate 90º clockwise
Core.flip(mRgba.t(), mRgba, 1); 
```

对于其他旋转，您可以使用[warpAffine](http://docs.opencv.org/modules/imgproc/doc/geometric_transformations.html#void%20warpAffine%28InputArray%20src,%20OutputArray%20dst,%20InputArray%20M,%20Size%20dsize,%20int%20flags,%20int%20borderMode,%20const%20Scalar&%20borderValue%29)：

```
Point center = new Point(x,y);
double angle = 90;
double scale = 1.0;

Mat mapMatrix = Imgproc.getRotationMatrix2D(center, angle, scale);
Imgproc.warpAffine(srcMat, dstMat, mapMatrix, Imgproc.INTER_LINEAR); 
```

**编辑 - 更完整的例子如下：**

```
 /** 
     * Image is first resized-to-fit the dst Mat and then rotated. 
     * mRgba is the source image, mIntermediateMat should have the same type.
     */
    private void rotationTutorial(){
        double ratio =  mRgba.height() / (double) mRgba.width();

        int rotatedHeight = mRgba.height();     
        int rotatedWidth  = (int) Math.round(mRgba.height() * ratio);

        Imgproc.resize(mRgba, mIntermediateMat, new Size(rotatedHeight, rotatedWidth));

        Core.flip(mIntermediateMat.t(), mIntermediateMat, 0);

        Mat ROI = mRgba.submat(0, mIntermediateMat.rows(), 0, mIntermediateMat.cols());

        mIntermediateMat.copyTo(ROI);       
    }

    /** 
     * Image is rotated - cropped-to-fit dst Mat.
     * 
     */
    private void rotationAffineTutorial(){
        // assuming source image's with and height are a pair value:
        int centerX = Math.round(mRgba.width()/2);
        int centerY = Math.round(mRgba.height()/2);

        Point center = new Point(centerY,centerX);
        double angle = 90;
        double scale = 1.0;

        double ratio =  mRgba.height() / (double) mRgba.width();

        int rotatedHeight = (int) Math.round(mRgba.height());       
        int rotatedWidth  = (int) Math.round(mRgba.height() * ratio);

        Mat mapMatrix = Imgproc.getRotationMatrix2D(center, angle, scale);

        Size rotatedSize = new Size(rotatedWidth, rotatedHeight);
        mIntermediateMat = new Mat(rotatedSize, mRgba.type());

        Imgproc.warpAffine(mRgba, mIntermediateMat, mapMatrix, mIntermediateMat.size(), Imgproc.INTER_LINEAR);

        Mat ROI = mRgba.submat(0, mIntermediateMat.rows(), 0, mIntermediateMat.cols());

        mIntermediateMat.copyTo(ROI);
    } 
```

笔记：

*   这些示例可能是特定于方向的，我将它们用于横向。
*   您不应为每个视频帧调用这些示例中的代码。有些代码应该只运行一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-12T10:52:34.187

如果您只需要进行 90、180 或 270 度旋转（这似乎是您的情况），您最好使用更快的 Core.flip()。下面是一个为你做的方法：

```
public static Mat rotate(Mat src, double angle)
{
    Mat dst = new Mat();
    if(angle == 180 || angle == -180) {
        Core.flip(src, dst, -1);
    } else if(angle == 90 || angle == -270) {
        Core.flip(src.t(), dst, 1);
    } else if(angle == 270 || angle == -90) {
        Core.flip(src.t(), dst, 0);
    }

    return dst;
} 
```

# entity-framework - 使用插入记录的身份而不提交

> ID：12949795
> 
> 赞同：0
> 
> 时间：2012-10-18T07:58:59.193
> 
> 标签：entity-framework

假设我有两个表：表 Category 和表 Book

我想添加一个类别，然后使用它的 ID 插入一本书（其中有一个 CategoryId 字段指向表 Category）。

为了获取此信息，我现在在插入类别后提交我的更改，因为它没有提供其他方式。

有没有办法在插入我的书而不在插入类别后提交时指向这个类别？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:05:41.557

如果ID是由数据库生成的，那么不，直到提交后才能获取

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:24:07.800

听起来你有一个 FK 关系设置。如果是这种情况，如果您将`Category`和`Book`实体关联在一起 - 应该创建必要的 FK。

例如：

```
var Category = new Category();
Book.Category = Category;
context.Books.Add(Book);
context.SaveChanges(); 
```

将创建一本书和一个类别，并根据您的映射设置方式设置适当的字段。如果不是这种情况，您可以发布您的模型吗？

# unixodbc - 有时 isql 不连接而 tsql 连接

> ID：12949799
> 
> 赞同：1
> 
> 时间：2012-10-18T07:59:15.640
> 
> 标签：unixodbc

我遇到了一个有时在 unixODBC 和 freeTDS 周围发生的问题。我有一个 CentOS 网络服务器，我将配置文件设置为：

odbc.ini：

```
[XYZ]
Driver = FreeTDS
Server = X.X.X.X
Port = 1433
Database = mydatabase
TDS_Version = 8.0 
```

odbcinst.ini

```
[PostgreSQL]
Description = ODBC for PostgreSQL
Driver  = /usr/lib/libodbcpsql.so
Setup   = /usr/lib/libodbcpsqlS.so
FileUsage   = 1

[FreeTDS]
Description = v0.82 with protocol v8.0
Driver  = /usr/local/lib/libtdsodbc.so
Setup   = /usr/local/lib/libtdsodbc.so
UsageCount  = 1
Trace       = Yes
TraceFile   = /tmp/freetds.log
ForceTrace  = Yes
FileUsage   = 1

[ODBC]
;Trace  = Yes
;TraceFile  = /tmp/freetds.log
;ForceTrace = Yes
;Pooling    = No 
```

freetds.conf

```
#   $Id: freetds.conf,v 1.12 2007/12/25 06:02:36 jklowden Exp $
#
# This file is installed by FreeTDS if no file by the same 
# name is found in the installation directory.  
#
# For information about the layout of this file and its settings, 
# see the freetds.conf manpage "man freetds.conf".  

# Global settings are overridden by those in a database
# server specific section
[global]
    # TDS protocol version
    tds version = 8.0

    # Whether to write a TDSDUMP file for diagnostic purposes
    # (setting this to /tmp is insecure on a multi-user system)
;   dump file = /tmp/freetds.log
;   debug flags = 0xffff

    # Command and connection timeouts
;   timeout = 10
;   connect timeout = 10

# If you get out-of-memory errors, it may mean that your client
    # is trying to allocate a huge buffer for a TEXT field.  
    # Try setting 'text size' to a more reasonable limit 
    text size = 64512

# A typical Sybase server
[egServer50]
    host = symachine.domain.com
    port = 5000
    tds version = 5.0

# A typical Microsoft server
[egServer70]
    host = ntmachine.domain.com
    port = 1433
    tds version = 7.0

[XYZ]
host = X.X.X.X
port = 1433
tds version = 8.0 
```

并在无法连接时执行 isql -v XYZ 用户名密码，它会给出以下跟踪日志：

```
[ODBC][22870][__handles.c][444]
        Exit:[SQL_SUCCESS]
            Environment = 0x938ab58
[ODBC][22870][SQLAllocHandle.c][345]
        Entry:
            Handle Type = 2
            Input Handle = 0x938ab58
[ODBC][22870][SQLAllocHandle.c][463]
        Exit:[SQL_SUCCESS]
            Output Handle = 0x938b130
[ODBC][22870][SQLConnect.c][3549]
        Entry:            
            Connection = 0x938b130            
            Server Name = [XYZ][length = 14 (SQL_NTS)]            
            User Name = [username][length = 11 (SQL_NTS)]            
            Authentication = [*************][length = 13 (SQL_NTS)]
        UNICODE Using encoding ASCII 'ISO8859-1' and UNICODE 'UCS-2LE'

        DIAG [42000] [FreeTDS][SQL Server]Login failed for user 'username'.

        DIAG [42000] [FreeTDS][SQL Server]Cannot open database "mydatabase" requested by the login. The login failed.

        DIAG [S1000] [FreeTDS][SQL Server]Unable to connect to data source

[ODBC][22870][SQLConnect.c][3917]
        Exit:[SQL_ERROR]
[ODBC][22870][SQLError.c][424]
        Entry:                
            Connection = 0x938b130                
            SQLState = 0xbf8ba54e                
            Native = 0xbf8ba350                
            Message Text = 0xbf8ba359                
            Buffer Length = 500                
            Text Len Ptr = 0xbf8ba356
[ODBC][22870][SQLError.c][461]
        Exit:[SQL_SUCCESS]                    
            SQLState = S1000                    
            Native = 0xbf8ba350 -> 0                    
            Message Text = [[unixODBC][FreeTDS][SQL Server]Unable to connect to data source]
[ODBC][22870][SQLError.c][424]
        Entry:                
            Connection = 0x938b130                
            SQLState = 0xbf8ba54e                
            Native = 0xbf8ba350                
            Message Text = 0xbf8ba359                
            Buffer Length = 500                
            Text Len Ptr = 0xbf8ba356
[ODBC][22870][SQLError.c][461]
        Exit:[SQL_SUCCESS]                    
            SQLState = 37000                    
            Native = 0xbf8ba350 -> 4060                    
            Message Text = [[unixODBC][FreeTDS][SQL Server]Cannot open database "mydatabase" requested by the login. The login failed.]
[ODBC][22870][SQLError.c][424]
        Entry:                
            Connection = 0x938b130                
            SQLState = 0xbf8ba54e                
            Native = 0xbf8ba350                
            Message Text = 0xbf8ba359                
            Buffer Length = 500                
            Text Len Ptr = 0xbf8ba356
[ODBC][22870][SQLError.c][461]
        Exit:[SQL_SUCCESS]                    
            SQLState = 37000                    
            Native = 0xbf8ba350 -> 18456                    
            Message Text = [[unixODBC][FreeTDS][SQL Server]Login failed for user 'username'.]
[ODBC][22870][SQLError.c][424]
        Entry:                
            Connection = 0x938b130                
            SQLState = 0xbf8ba54e                
            Native = 0xbf8ba350                
            Message Text = 0xbf8ba359                
            Buffer Length = 500                
            Text Len Ptr = 0xbf8ba356
[ODBC][22870][SQLError.c][461]
        Exit:[SQL_NO_DATA]
[ODBC][22870][SQLError.c][504]
        Entry:                
            Environment = 0x938ab58                
            SQLState = 0xbf8ba54e                
            Native = 0xbf8ba350                
            Message Text = 0xbf8ba359                
            Buffer Length = 500                
            Text Len Ptr = 0xbf8ba356
[ODBC][22870][SQLError.c][541]
        Exit:[SQL_NO_DATA]
[ODBC][22870][SQLFreeHandle.c][268]
        Entry:
            Handle Type = 2
            Input Handle = 0x938b130
[ODBC][22870][SQLFreeHandle.c][317]
        Exit:[SQL_SUCCESS]
[ODBC][22870][SQLFreeHandle.c][203]
        Entry:
            Handle Type = 1
            Input Handle = 0x938ab58 
```

当 tsql 命令起作用时……可能是什么？

unixODBC 版本是 2.2.11-7.1 并且 freeTDS 没有显示为已安装但它存在，因为 /usr/local/lib.. 中存在 libtdsodbc.so

我还不得不说，只有完全重新启动 CentOS 机器 isql 才能恢复正常工作......

我可以做什么或检查什么？提前非常感谢！

干杯，路易吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:38:15.503

您应该修复 odbc.ini 以在 freetds.conf 中配置服务器名称

```
instead of "Server = x.x.x.x" put "servername = XYZ" 
```

# mysql - 如何在mysql中搜索以使重音字符与非重音字符相同？

> ID：12949800
> 
> 赞同：2
> 
> 时间：2012-10-18T07:59:26.977
> 
> 标签：mysql

我想要：

piščanec = mysql 中的 piscanec。我的意思是，我也想搜索 piscanec 以找到 piščanec。

所以 č 和 c 将是相同的， š 和 s 等...

我知道可以使用正则表达式来完成，但这很慢 :-( 任何其他的 LIKE 方式？我也经常使用全文搜索。

**更新：**

```
select CONVERT('čšćžđ' USING ascii) as text 
```

不起作用。产生：`?????`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:03:14.793

这并不简单，但您最好为 fulltrext 搜索创建自己的排序规则。这是一个例子：

[http://dev.mysql.com/doc/refman/5.5/en/full-text-adding-collat​​ion.html](http://dev.mysql.com/doc/refman/5.5/en/full-text-adding-collation.html)

更多信息在这里：

[http://dev.mysql.com/doc/refman/5.5/en/adding-collat​​ion.html](http://dev.mysql.com/doc/refman/5.5/en/adding-collation.html)

这样，您的排序逻辑就完全独立于您的 SQL 和业务逻辑，而且您不必为自己的 SQL 变通办法做任何繁重的工作。

**编辑：**由于排序规则用于***所有***字符串匹配操作，这可能不是最好的方法：您最终会混淆语言上离散的字符之间的差异。

如果您想抑制特定操作的这些差异，那么您可以考虑编写一个函数，该函数接受一个字符串并以有针对性的方式替换字符，就当前操作而言，这些字符被认为是相同的。

您可以定义一个包含基本字符（š、č 等）的表和另一个包含等价字符的表。然后在您的字符串上运行 REPLACE。

**另一种方法**是将`CAST`您的字符串添加到`ASCII`，从而抑制所有非`ASCII`字符。

例如

```
SELECT CONVERT('<your text here>' USING ascii) as as_ascii 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T08:59:25.957

用排序规则声明列`utf8_generic_ci`。此排序规则认为 š 等于 s 且 č 等于 c：

```
create temporary table t (t varchar(100) collate utf8_general_ci);
insert into t set t = 'piščanec';
insert into t set t = 'piscanec';
select * from t where t='piscanec';
+------------+
| t          |
+------------+
| piščanec   |
| piscanec   |
+------------+ 
```

如果您不想或不能`utf8_generic_ci`对列使用排序规则——也许你在列上有一个唯一索引并且想要考虑 piščanec 和 piscanec 不同？——你可以在查询中使用排序规则：

```
create temporary table t (t varchar(100) collate utf8_bin);
insert into t set t = 'piščanec';
insert into t set t = 'piscanec';
select * from t where t='piscanec';
+------------+
| t          |
+------------+
| piscanec   |
+------------+
select * from t where t='piscanec' collate utf8_general_ci;
+------------+
| t          |
+------------+
| piščanec   |
| piscanec   |
+------------+ 
```

FULLTEXT 索引应该直接使用列排序规则；您不需要定义新的排序规则。显然全文索引只能在列的存储排序规则中，因此如果要`utf8_general_ci`用于搜索和`utf8_slovenian_ci`排序，则必须`collate`按顺序使用：

```
select * from tab order by col collate utf8_slovenian_ci; 
```

# php - 在 Mac 上，当 safari 浏览器关闭时，会话不会自行终止

> ID：12949802
> 
> 赞同：0
> 
> 时间：2012-10-18T07:59:33.997
> 
> 标签：php, javascript, jquery, ajax

当我在以管理员登录模式关闭我的网站后再次打开浏览器时，它再次显示我以管理员身份而不是访客身份登录。在 Windows 上的 IE 中做同样的事情效果很好。仅在 Mac 上的 Safari 浏览器上才会注意到此问题。我已经尝试通过使用“onbeforeunload”事件使用 java 脚本终止会话来解决此问题，但这会导致另一个问题，即当我刷新页面或移动到站点上的其他页面时，它会被注销。javascript 的刷新事件 116 也不适用于 safari。我写的代码是这样的：

```
function checkKeycode(e) {
var keycode;
if (window.event)
    keycode = window.event.keyCode;
else if (e)
    keycode = e.which;
if (keycode == 116) {
    isClose = true;
}
} 
```

任何人都可以告诉我这个问题的解决方案，即如何使用 javascript 在客户端终止会话，以便下次我在 safari braowser 上启动我的网站时，它会以访客身份而不是管理员身份显示我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:14:46.733

您可能正在关闭最后一个 Safari 浏览器窗口，但并未退出浏览器。关闭最后一个窗口将退出 Windows 上的大多数应用程序，但不会在 OS X 上退出。您需要通过菜单、⌘+q、右键单击 Dock 中的图标等显式退出。（会话 cookie 在浏览器关闭时被删除辞职。）

# sql-server-2008 - 通过 sql server 代理使用计划作业重复插入

> ID：12949804
> 
> 赞同：0
> 
> 时间：2012-10-18T07:59:39.417
> 
> 标签：sql-server-2008

我有一个通过 SQL 代理计划的工作。它计划每 2 分钟运行一次。当我查看作业历史日志时，我看到它已经运行了一次。但是当我查看表格时，它插入了两条记录，两条记录之间的时间差只有几毫秒。

我试图找出它发生的原因，并试图防止这种情况发生。我在 Windows server 2008 上使用的 Sql server 版本是 2008。

存储过程没有任何问题，在插入之前我有一个检查如果不存在（在表中）然后插入。而且那张桌子上也没有触发器。

谢谢

# bash - 用于截屏并保存图像的 Bash 脚本 - Ubuntu

> ID：12949806
> 
> 赞同：1
> 
> 时间：2012-10-18T08:00:10.190
> 
> 标签：bash, shell, ubuntu

我写了一个bash脚本如下：

```
#!/bin/bash
echo "Enter a file name"
read filename
import -window root $HOME/Desktop/$filename.png 
```

我希望这个脚本能够截取屏幕截图并将给定文件名的图像保存在 m 桌面上......

问题：我的 ubuntu 终端出错。导入：找不到命令

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:03:54.287

我猜这是来自 imagemagick 的“导入”：

sudo apt-get install imagemagick

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-22T10:07:04.283

尝试这个

```
while true; do scrot -d 900 'DEMO%d-%H:%M:%S.png' -e 'mv $f /home/'; done 
```

# sharepoint - Sharepoint 2013 扩展 ContentBySearchWebpart

> ID：12949808
> 
> 赞同：1
> 
> 时间：2012-10-18T08:00:16.187
> 
> 标签：sharepoint

> 我的简短查询：

我扩展了 ContentBySearchWebpart，以便为搜索创建自定义查询。我修改了 DataProviderJSON 属性并在其中添加了我的自定义 QueryTemplate。但是 Webpart 使用默认结果呈现

> 我想做的是：

1.  我创建了目录网站集和其他发布网站集
2.  在目录站点中创建了一个列表，将其启用为目录，在发布站点中建立了此目录的连接。
3.  在其结果源是上述目录连接的发布站点中添加了 CSWP。
4.  现在我想自定义我的查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:03:39.987

我已经解决了我的问题。我们需要在扩展 webpart 的构造函数中设置一些基本属性。下面是一个代码示例：

```
 string dataProviderJson = "{{'Properties':{{'TryCache':true,'Scope':'{0}','HHTitle_WB_Marker1':50,'HHTitle_WB_Marker2':60,'UpdateLinksForCatalogItems':true,'EnableStacking':true,'searchTerms':'','Tag':''}},'QueryGroupName':'Default','SourceID':'8413cd39-2156-4e00-b54d-11efd9abdb89','SourceName':'Local SharePoint Results (System)','SourceLevel':'Ssa','CollapseSpecification':'','QueryTemplate':'{{searchTerms?}} (contentclass:sts_listitem OR IsDocument:True) SPSiteUrl:{1} ListId:3d001e7a-d856-428b-9785-edf7ec4f4876 {{?owstaxidMetadataRegion:{{Tag}}}}  owstaxIdMetadataRegion:{2}','FallbackSort':[{{'p':'Rank','d':0}}],'RankRules':[],'AsynchronousResultRetrieval':false,'SendContentBeforeQuery':true,'BatchClientQuery':true,'FallbackLanguage':-1,'FallbackRankingModelID':'8f6fd0bc-06f9-43cf-bbab-08c377e083f4','EnableStemming':true,'EnablePhonetic':false,'EnableNicknames':false,'EnableInterleaving':true,'EnableQueryRules':true,'EnableOrderingHitHighlightedProperty':false,'HitHighlightedMultivaluePropertyLimit':-1,'IgnoreContextualScope':false,'ScopeResultsToCurrentSite':false,'TrimDuplicates':true,'ClientType':'ContentSearchRegular','UpdateAjaxNavigate':true,'SummaryLength':180,'DesiredSnippetLength':90,'PersonalizedQuery':false,'FallbackRefinementFilters':null,'IgnoreStaleServerQuery':false,'RenderTemplateId':'DefaultDataProvider','AlternateErrorMessage':null,'Title':''}}";
            string siteUrl = SPContext.Current.Site != null ? SPContext.Current.Site.Url.Trim() : "";
            base.ResultsPerPage = 3;
            base.BypassResultTypes = true;
            base.AlwaysRenderOnServer = false;
            dataProviderJson = String.Format(dataProviderJson, siteUrl, siteUrl + "/sites/Catalog", "en");
            base.DataProviderJSON = dataProviderJson;
            base.ItemTemplateId = "/_catalogs/masterpage/Display Templates/Content Web Parts/Banner.js";
            base.GroupTemplateId = "/_catalogs/masterpage/Display Templates/Content Web Parts/Group_Content.js";
            base.SelectedPropertiesJson = "['PublishingImage','PictureURL','PictureThumbnailURL','Path','Title','Description','SecondaryFileExtension','ContentTypeId']";
            base.HitHighlightedPropertiesJson = "['Title','Path','Author','SectionNames','SiteDescription']";
            base.QueryGroupName = "Default";
            base.RenderTemplateId = "/_catalogs/masterpage/Display Templates/Content Web Parts/Control_Banner.js";
            base.StatesJson = "{}";
            base.Title = "Banner Search WebPart";
            base.Description = "Banner Search WebPart";
            base.AllowMinimize = true;
            AllowConnect = true;
            AllowEdit = true;
            AllowHide = true;
            base.ZoneID = "ImportedPartZone"; 
```

# c# - WPF在扩展器中滚动数据网格

> ID：12949817
> 
> 赞同：0
> 
> 时间：2012-10-18T08:00:39.110
> 
> 标签：c#, wpf, ribbon

我在扩展器中有一个数据网格，而 gatagrid 有 10 多列。然后
应该滚动扩展器中的数据网格。但它不能滚动查看其他列。我的代码如下。

```
 <Expander Header="Attribute" VerticalAlignment="Top" Grid.Row="1" >
                    <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Visible" CanContentScroll="True" Grid.Row="1" >
                           <DataGrid DataContext="{Binding}" Height="257" ItemsSource="{Binding}"  MinHeight="200" Name="gridview1" Grid.Row="2" Grid.Column="0" 
                           VerticalAlignment="Bottom" IsReadOnly="True"></DataGrid>
                     </ScrollViewer>
                </Expander> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T09:59:26.920

DataGrid 在其 ControlTemplate 中嵌入了一个 ScrollViewer。

所以你可以做两件事：

如果您真的想使用自己的 ScrollViewer（但请注意，这样做会丢失 DataGrid 虚拟化等功能）此代码应该可以工作：

```
<Expander Header="Attribute" VerticalAlignment="Top" Grid.Row="1" >
    <ScrollViewer HorizontalScrollBarVisibility="Visible" VerticalScrollBarVisibility="Visible" CanContentScroll="False" Grid.Row="1" >
        <DataGrid Height="257"  MinHeight="200" Name="gridview1" Grid.Row="2" Grid.Column="0" 
                       VerticalAlignment="Bottom" IsReadOnly="True">
            <DataGrid.Style>
                <Style>
                    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled" />
                    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Disabled" />
                </Style>
            </DataGrid.Style>
        </DataGrid>
    </ScrollViewer>
</Expander> 
```

但是，我建议您只需这样做：

```
<Expander Header="Attribute" VerticalAlignment="Top" Grid.Row="1" >
        <DataGrid Height="257"  MinHeight="200" Name="gridview1" Grid.Row="2" Grid.Column="0" VerticalAlignment="Bottom" IsReadOnly="True">
            <DataGrid.Style>
                <Style>
                    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Visible" />
                    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Visible" />
                </Style>
            </DataGrid.Style>
    </DataGrid>
</Expander> 
```

DataGrid.Style 甚至不应该是必需的。

# ruby-on-rails-3 - rails 3重复代码多个项目

> ID：12949827
> 
> 赞同：1
> 
> 时间：2012-10-18T08:01:18.583
> 
> 标签：ruby-on-rails-3

我正在处理多个项目，其中大多数都有共同的控制器和视图。

有没有办法能够复制脚本或其他东西中的所有公共代码？

对此有任何想法

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:08:54.967

您正在寻找一个 rails 引擎，它是您可以在其他项目中使用的 gem。gem 提供控制器、视图等[。Devise](https://github.com/plataformatec/devise)可能是最好的例子之一，它提供了一个身份验证框架。

谷歌上第一个有希望的关于如何制作的文章是[这个](http://coding.smashingmagazine.com/2011/06/23/a-guide-to-starting-your-own-rails-engine-gem/)，但我相信你可以找到更多。

# ios - 动画缓动/iOS 动画与 CSS3 三次贝塞尔曲线

> ID：12949832
> 
> 赞同：0
> 
> 时间：2012-10-18T08:01:40.210
> 
> 标签：ios, css, core-animation, css-transitions, bezier

试图在我正在开发的一些 iOS 应用程序中简化我的动画。

在 CSS3 动画和过渡方面有很多经验，我想在 iOS 中定义我的动画，就像在 CSS3 中可行的一样准确（如这里所示的 CSS3 例如[http://www.roblaplaca.com/examples/bezierBuilder/](http://www.roblaplaca.com/examples/bezierBuilder/) )

如果我比较 facebook 或 youtube 的侧滑菜单，甚至是来自 Path 的菜单；他们开场动画的方式是不一样的。这就是我正在寻找的那种动画定制

我应该在 iOS 中从哪里开始？任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:13:11.773

您可以像这样定义自己的计时功能的控制点：

```
myAnimation.timingFunction = [CAMediaTimingFunction functionWithControlPoints:x1 
                                                                             :y1 
                                                                             :x2 
                                                                             :y2]; 
```

它的工作原理与您在问题中链接到的 bezierBuilder 完全相同。

如果您不熟悉 Core Animation，我建议您阅读[Core Animation Programming Guide](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004627-SW1)。真的很棒。

# ajax - 启用 history.pushState 页面上的 AdSense

> ID：12949835
> 
> 赞同：7
> 
> 时间：2012-10-18T08:01:50.350
> 
> 标签：ajax, adsense, pushstate, pjax, google-dfp

首先，我知道这已经被讨论[了](https://stackoverflow.com/questions/6394594/how-to-force-advert-to-show-on-ajax-loaded-page-adsense)[一遍](https://stackoverflow.com/questions/10834751/adsense-with-ajax)又[一遍](https://stackoverflow.com/questions/435391/refresh-a-div-that-has-a-google-ad-inside-it#441425) 。但是，让我们将此视为“2012 年末版”，因为互联网上的事情往往会迅速变化。

我有[这个网页](http://www.igre123.com)，它是一个带有整页刷新的“经典”网页。每次内部点击都会产生新的内容。我们可以毫无问题地以这种方式展示 AdSense 广告。

现在，出于性能原因，我开始研究整个页面的“ajaxifying”（PJAX）（我实际上已经制作了一个原型版本，它工作得很好）。整个过程仅适用于支持`history.pushState`.

最终结果是，用户会看到一个全新的页面（包括更改后的 URL 和其他内容），并且只有提供页面的机制发生了更改（完全重新加载与 AJAX）。就谷歌（和旧版浏览器）而言，这仍然是一个带有常规链接的常规页面（渐进增强等等）。

然而，没有办法展示 AdSense，因为`document.write`'s 和 AdSense 的 TOS 毁了聚会。

我的问题：是否有**谷歌批准**（我对会让我们被禁止的黑客行为不感兴趣）的方式来在这样的页面上显示 AdSense 广告（我还没有找到）。或者如果没有，Google 是否有任何计划在未来支持此功能（同样，我还没有找到与此相关的任何内容）。

**更新**

经过一番挖掘后，我发现了[Google DFP](http://www.google.com/dfp/info/sb/index.html)，它似乎支持异步加载添加。但是，我不确定是否可以在不破坏 TOS 的情况下通过它动态加载 AdSense 广告。我 100% 确定我可以通过这种方式加载其他广告，但不适用于 AdSense。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:47:02.237

根据[此页面](http://www.google.com/dfp/info/sb/policies.html)通过 DFP 加载 Adsense 广告，您需要同时遵守 DFP 和 Adsense 条款。所以我想如果你遵循当前的 Adsense 条款，你就不能做你所说的......同时谷歌提供了一个相当[简单的方法](http://support.google.com/dfp_premium/bin/answer.py?hl=en&answer=1650154&expand=pubservice_details#refresh)来做你想要用 DFP 做的事情......

它仍然是一个灰色地带...

# c++ - 有谁知道为什么 fstream 在这条线上崩溃？

> ID：12949844
> 
> 赞同：0
> 
> 时间：2012-10-18T08:02:27.163
> 
> 标签：c++, fstream, ifstream

这是我第一次遇到这个问题，所以我不知道如何解决它。编辑：没关系。看起来我的构造函数中的一个错误导致这种情况以某种方式发生

* * *

```
#include <iostream>
#include <fstream>
#include "graphm.h"

using namespace std;

int main() {

   ifstream infile1("data31.txt");

   for(;;){
      GraphM G;
      G.buildGraph(infile1);
      if (infile1.eof()) 
         break;
} 
```

* * *

```
void GraphM::buildGraph(ifstream& infile){
    int i = 0;
    infile >> i;     //it crashes here
} 
```

我的文本文件只有 1 行：5

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T08:09:12.893

问题可能与文件未打开有关。您应该始终检查文件是否已成功打开：

```
ifstream infile1("data31.txt");

if ( !infile1 )
{
    // Failed to open data31.txt
    return -1;
} 
```

或者您可以使用显式函数而不是重载`operator!`

```
if ( infile1.fail() ) 
{
    return -1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:14:13.193

你得到什么错误？通过检查 infile.is_open() 函数确保文件已打开。你可以在这里找到示例代码：

[http://www.cplusplus.com/reference/iostream/ifstream/is_open/](http://www.cplusplus.com/reference/iostream/ifstream/is_open/)

您还可以检查此线程：

[使用 C++ ifstream 提取运算符>> 从文件中读取格式化数据](https://stackoverflow.com/questions/7443787/using-c-ifstream-extraction-operator-to-read-formatted-data-from-a-file)

它有使用 ifstream 的有用说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:14:01.507

代码可能存在的问题：

```
1\. Unopenable file/unopened file
2\. Unopenable file/unopened file
3\. Unopenable file/unopened file
4\. Unopenable file/unopened file 
```

如何解决这个问题？遵循@MaximSkurydin 的代码。

# unicode - jFreeChart：在图表中正确显示 unicode 字符

> ID：12949846
> 
> 赞同：1
> 
> 时间：2012-10-18T08:02:35.070
> 
> 标签：unicode, jfreechart

我正在创建一个图表`jFreeChart`：

```
final JFreeChart chart = ChartFactory.createLineChart(
            "Line Chart Demo 1",       // chart title
            "Caf\00E9",                    // domain axis label
            "Voil\00E0",                   // range axis label
            dataset,                   // data
            PlotOrientation.VERTICAL,  // orientation
            true,                      // include legend
            true,                      // tooltips
            false                      // urls
        ); 
```

如您所见，轴中的标签有 unicode 字符：“Caf\00E9”显示“Café”，“Voil\00E0”显示“Voilà”。

当生成此图表的应用程序在“某些”服务器上运行时，它运行良好。对于其他人，它显示问号（“？”）而不是重音字符。

由于它并非一直运行，因此我有强制编码的想法。

问题是：如何强制标签将这些 un​​icode 字符转换为可读字符？我在文档中找不到正确转换这些字符串的方法。我在网上找到了一些这样的代码

```
domainAxis.setTickLabelFont(new Font("Lucida Sans Unicode", Font.PLAIN, 12)); 
```

我觉得很有趣，但是，如何将它应用于域轴和范围轴标签？

问候。

**编辑1：**

我想出了如何使用字体“强制”：

```
Font font = new Font("Tahoma", Font.PLAIN, 12);
categoryplot.getDomainAxis().setLabelFont(font); 
```

但是，输出仍然很奇怪：对于“Caf\00E9”，它显示“Café”。有没有办法将此字符串转换为可读的（Café）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T16:26:14.900

（我想发表评论，但这个声誉限制仍然阻止我......）

这可能只是一个复制粘贴错字，但请检查您的[unicode 是否以 "\u" 开头](https://stackoverflow.com/questions/5585919/creating-unicode-character-from-its-number)。

此外，在“某些”（*nix）服务器上，您可能希望[从您自己的资源中加载字体。](https://stackoverflow.com/questions/5669477/accessing-custom-font-from-jar)

# macos - 将窗口移动到左上角

> ID：12949850
> 
> 赞同：2
> 
> 时间：2012-10-18T08:02:40.553
> 
> 标签：macos, window, applescript

我正在尝试将一个窗口移动到屏幕的左上角。

这是我写的：

```
tell application "System Events"
    tell application process "appIT"
        tell window 1
            --Move lobby to left corner
            set s to size
            activate
            set the bounds to {40, 40, item 1 of s, item 2 of s}
        end tell
    end tell
end tell 
```

但是当我运行脚本时，我收到了这个错误：

> 系统事件发现错误：我无法将应用程序进程“appIT”的窗口 1 的边界设置为 {40、40、1037、696}

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:09:18.783

我让它工作：

```
tell window 1
    activate
    set position to {0, 20}
end tell 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:25:33.477

我能够用这样的东西让它工作：

```
tell application "appIT"
    tell window 1
        --Move lobby to left corner
        set s to bounds
        activate
        set the bounds to {40, 40, (item 3 of s) - (item 1 of s), (item 4 of s) - (item 2 of s)}
    end tell
end tell 
```

# java - 请帮助我在我的 Java 应用程序中过滤掉 Apache Log4j 的第三方日志记录

> ID：12949856
> 
> 赞同：2
> 
> 时间：2012-10-18T08:03:03.117
> 
> 标签：java, logging, log4j

我正在使用第三方 jar，它们将自己的日志附加到我的 Java 应用程序的日志文件中，我不想将这些第三方日志附加到我的日志文件中，因为它使日志文件非常笨拙和混乱。

我知道这种方法 log4j.logger.org.springframework.jdbc.core.JdbcTemplate=OFF 来关闭我的 lo4j.properties 中这个特定包 org.springframework.jdbc.core.JdbcTemplate 中的日志记录，但问题是我有在我的应用程序中添加了许多这样的 jar，因此，希望避免为与 jar 关联的每个包手动编写。

此外，如果再次添加任何新 jar，我必须将此配置附加到我的 log4j.properties 文件中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T08:58:32.607

您可以删除整个库，如

```
log4j.logger.org.springframework=OFF 
```

或者您可以关闭根记录器本身的日志记录，并为您感兴趣的类/包启用它

```
log4j.rootLogger=OFF
log4j.logger.com.your-package=DEBUG, yourappender 
```

这将为所有子包和类启用调试日志记录`com.your-package`

[在Log4j 介绍](http://logging.apache.org/log4j/1.2/manual.html)中查看 Logging Hierarchies

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-30T09:33:33.730

对于其他仍然为此感到困惑的人，我使用的是带有 log4j2 的 spring 4。Spring 4 似乎只检查 log4j，而不是 log4j2.xml。

我在我的资源中添加了一个 log4j.xml 文件（以及 log4j2.xml），这对我有用。

希望它可以帮助别人

# php - 如何获取任何源文件的内容

> ID：12949864
> 
> 赞同：-6
> 
> 时间：2012-10-18T08:03:16.837
> 
> 标签：php, parsing, curl

示例：当 url 为[http://www.google.com](http://www.google.com)

我知道，如何获取内容以及如何通过`file_get_contents`or`curl`方法解析它。

所以，我的问题是：**如何获取内容并解析该网页的源文件。**

例如：查看源：[http ://www.google.com](http://www.google.com)

当我尝试解析上述源文件时，我发现最初没有加载文件内容进行解析。

所以我需要帮助，

如何加载`view-source:http://www.google.com`页面内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:13:22.130

`file_get_contents`并且`view-source`在 chrome 浏览器中应该返回相同的东西 - 页面的**HTML**代码。如果您试图获取该 HTML 背后的代码（PHP、.net 等...） - 您不能。

`view-source`正在向您显示与or返回的代码**完全相同的内容**，并且它仅是 Chrome 浏览器中的一项功能 - 它不是有效的 URL 地址方案。`cUrl``file_get_contents`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T08:13:25.547

您写道：“例如：查看源代码：[http ://www.google.com](http://www.google.com)

当我试图解析上面的源文件时，我发现文件内容没有被加载”

这就是问题所在：`view-source:`是 chrome 的一个特性——不是一个有效的 url。这就是内容不被加载的原因。php 函数需要一个有效的 url：[http](http://www.google.com) ://www.google.com ，它可以从中加载源代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T08:19:49.617

您通过 file_get_contents("http://www.google.com"); 获取网页内容 不是 file_get_contents("view-source: [http://www.google.com](http://www.google.com) ");

然后你解析它：

```
$html = file_get_contents("http://www.google.com");
$doc = new DOMDocument();
$doc->loadHTML($html); 
```

如果 php DOM API 无法解析，你可以试试 PHP Simple HTML DOM Parser。[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

# java - spring mongoTemplate 找专栏

> ID：12949870
> 
> 赞同：3
> 
> 时间：2012-10-18T08:03:52.380
> 
> 标签：java, mongodb, spring-data

我可以使用 mongoTemplate 或其他类/接口在集合中查找一个/几个列吗？

例如，如果我只想从集合中获取名称： users(name, password, age, email) ，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:12:27.580

您可以使用方法指定查询返回的字段`Query.fields()`。

因此，在您的情况下，假设用户集合映射到`User`类，查询可能如下所示：

```
Query query =new Query(whatever criteria you have);
query.fields().include("name");
List<User> list = template.find(query, User.class); 
```

另一种方法是 o 扩展 MongoRepository 并指定字段 qith`Query`注释：

```
public interface UserRepository extends MongoRepository<User, String> {

   @Query(fields="{ 'name' : 1}")
   List<User> findUserNames();

} 
```

`findUserNames`应该返回`User`只初始化了 name 和 id 字段的实例。

**编辑**

从外观上看，它`spring-data-mongo`没有要`String`注册的转换器，因此您必须使用`User`除查询集中包含的字段之外的所有字段进行检索，`null`或者创建并注册一个转换器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-17T09:15:38.773

使用 Google Guava 解决您的问题。当然，您可以使用标准的 foreach 构造，但在我看来，Guava 实施起来更快并且经过良好测试。

这是带有很好示例的链接 [http://www.leveluplunch.com/java/tutorials/002-transform-objects-with-guava/](http://www.leveluplunch.com/java/tutorials/002-transform-objects-with-guava/)

# java - 从 TabActivity 调用 startActivityForResult

> ID：12949876
> 
> 赞同：0
> 
> 时间：2012-10-18T08:04:15.790
> 
> 标签：java, android, tabactivity

我有一个 TabActivity 类，它托管三个选项卡 Tab1 Tab2 和 Tab3 我想从 tab2 开始一个活动，它将结果传递给 tab1。所有选项卡都托管在 MyTabActivity.java 类中，请帮助 guyz

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:11:21.127

分配给选项卡的活动不能被其他活动替换。而是尝试更改其内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:19:16.250

您可以使用`public abstract MenuItem add (int groupId, int itemId, int order, int titleRes)`此 TabActivity 的方法，例如，..

```
menu.add(1, 1, 1, "TAB1"); 
```

您可以参考此链接进行后续步骤，..

[http://developer.android.com/reference/android/view/Menu.html#add%28int,%20int,%20int,%20int%29](http://developer.android.com/reference/android/view/Menu.html#add%28int,%20int,%20int,%20int%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T13:02:14.750

得到了问题的解决方案。当按下特定选项卡时，很难启动结果意图，因为无法接收结果。对此的简单解决方案是使用公共静态变量将数据从一个类获取到另一个类。

# android - 如何在 GridView onclick 中调用另一个 Activity

> ID：12949878
> 
> 赞同：-2
> 
> 时间：2012-10-18T08:04:36.917
> 
> 标签：android

```
String[] countries = new String[] {"India","Pakistan"};    
int[] flags = new int[]{R.drawable.india, R.drawable.pakistan};    
List<HashMap<String,String>> aList = new ArrayList<HashMap<String,String>>();    
for(int i=0;i<10;i++){
    HashMap<String, String> hm = new HashMap<String,String>();    
    hm.put("txt", countries[i]);    
    hm.put("flag", Integer.toString(flags[i]) );    
    aList.add(hm);
}    
String[] from = { "flag","txt"};    
int[] to = { R.id.flag,R.id.txt};    
SimpleAdapter adapter = new SimpleAdapter(getBaseContext(), aList, R.layout.gridview_layout, from, to);    
GridView gridView = (GridView) findViewById(R.id.gridview);    
gridView.setAdapter(adapter); 
```

这是我的网格视图。当鼠标单击 India Image 时，我想调用另一个 Activty。并在单击巴基斯坦时调用另一个活动。我想用 Intent 做到这一点。如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:12:15.883

实现`OnItemSelected`接口并在那里处理点击事件。您可以检查被单击的项目并基于此触发不同的意图。

见[http://developer.android.com/reference/android/widget/AdapterView.OnItemSelectedListener.html#onItemSelected](http://developer.android.com/reference/android/widget/AdapterView.OnItemSelectedListener.html#onItemSelected)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:25:25.697

请为此添加 Gridview 的 onitemclicklistener 代码。

```
gridView.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        // TODO Auto-generated method stub
        if(countries[arg2].equals("India")){
            Intent mIndia=new Intent(this, India_Activity.class);
            startActivity(mIndia);
        } else if(countries[arg2].equals("Pakistan")){
            Intent mPakistan=new Intent(this, Pakistan_Activity.class);
            startActivity(mPakistan);
        }
    }
}); 
```

# openlayers - OpenLayers Control ScaleLine - 仅显示米

> ID：12949880
> 
> 赞同：2
> 
> 时间：2012-10-18T08:04:50.160
> 
> 标签：openlayers

我有一个使用`OpenLayers`库的应用程序。

我创建了一条比例线：

```
map.addControl(new OpenLayers.Control.ScaleLine()); 
```

但它同时显示米和 fs。我只需要显示米。我将下一个代码添加到 openlayers.css

```
.olControlScaleLineBottom {
    visibility: hidden; 
} 
```

但它仍然显示英尺。我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T16:30:25.260

您可以通过将 topOutUnits 或 bottomOutUnits 设置为空字符串来禁用比例线的顶部或底部：

```
map.addControl(new OpenLayers.Control.ScaleLine({bottomOutUnits: ''})); 
```

文档中没有提到这种行为，但是当您查看控件的源代码时，您可以轻松找到它。

# asp.net-mvc - 如何激活 div 标签

> ID：12949881
> 
> 赞同：0
> 
> 时间：2012-10-18T08:04:53.873
> 
> 标签：asp.net-mvc, visual-studio-2010, jquery-ui, kendo-ui

我正在使用 Kendo UI 网格和表单，它们由 Kendo 拆分器分隔。

```
<div id="splitter" style="width:100%;height:100%;">
        <div id ="grid" style="height:100%;width:100%;"></div>
        <div id ="Form" style="display:none">
             <input type = "text"/>
             <input type ="button"/>
        </div>
 </div> 
```

最初我必须在拆分器的左半部分显示网格，在网格中选择一行后，我想在拆分器的右侧显示表单（我想激活“表单”div 标签）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:19:10.550

我不确定你在追求什么，但似乎你想显示隐藏的表单。

```
$("#Form").show(); 
```

这条线当然应该是网格行选择处理程序的一部分，通过选择某个复选框（通常以这种方式实现时通常是固定网格列）或单击网格行来发生。在任何情况下，您都应该在事件处理程序中添加上线。

但是，除非您提供一些如何在网格中选择行的详细信息，否则我们无法更详细，因为一切都只是推测，可能与现实没有相关的联系。

> ***仅供参考**：您的问题似乎与您的分离器没有任何关系，而且似乎更让人分心。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:57:15.817

在点击事件上也试试这个代码

```
 $("#Form").css("display","block"); 
```

# ajax - Jquery 和 Ajax - 使用按钮触发加载

> ID：12949885
> 
> 赞同：0
> 
> 时间：2012-10-18T08:05:01.447
> 
> 标签：ajax, jquery

我正在尝试制作一个页面，其中使用 jquery 显示内容。
当用户访问网站时，内容从数据库加载。
我想添加一个按钮，它会触发从数据库加载新数据，但在同一页面上。我该怎么做呢？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:10:23.390

下面的内容应该可以帮助您入门：

```
$(function() {
            $.ajax({
                type:'POST',
                url:'path/to/database file',
                success: function() {
                        $("body").append(whatever you want to add);

                }
                });
                }); 
```

# xamarin.ios - monotouch 中的代码覆盖率

> ID：12949886
> 
> 赞同：5
> 
> 时间：2012-10-18T08:05:07.903
> 
> 标签：xamarin.ios, monodevelop, code-coverage

是否可以在 Monotouch 中设置代码覆盖率？

我发现这些文章解释了如何在 XCode 中执行此操作：http: [//softnoise.wordpress.com/2010/11/14/ios-running-unit-tests-with-code-coverage-in-hudson/](http://softnoise.wordpress.com/2010/11/14/ios-running-unit-tests-with-code-coverage-in-hudson/) 和 [http ://supermegaultragroovy.com/2005/11/03/unit-testing-and-code-coverage-with-xcode/](http://supermegaultragroovy.com/2005/11/03/unit-testing-and-code-coverage-with-xcode/)

在 XCode 中需要执行以下操作：在“GCC 4.2 Preprocessing”部分启用“Generate Test Coverage Files”和“Instrument Program Flow”，并将 -lgcov 添加到“Linking”部分的“other linker flags”。

我还没有找到一种方法来实现单点触控。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T20:45:05.997

目前无法做到这一点。

# c# - WPF - 当 tabitem.visibility=hidden 时 TabItem 内容仍然可见

> ID：12949890
> 
> 赞同：7
> 
> 时间：2012-10-18T08:05:24.670
> 
> 标签：c#, .net, wpf

这个问题有什么好的解决办法吗。

我已经设置

> tabitem.visibility=隐藏

但是这个 tabitem 中的内容仍然可见。我想隐藏 tabitems 的所有内容。

我确实寻找解决方案，但没有运气。2009 年有人提出了这个问题，但现在仍然没有关于如何实现这一点的结果。网址：[http ://social.msdn.microsoft.com/Forums/en-US/wpf/thread/e4d23ace-0eb5-45a9-86f5-43c6351cb0ed/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/e4d23ace-0eb5-45a9-86f5-43c6351cb0ed/)

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T09:22:53.797

要解决您的问题，请使用 Visibility.Collapsed。Visibility.Hidden 不会更改布局，因此您将始终在选项卡标题中保留该空白区域。发生这种情况时，请务必更改选定的选项卡。

我不建议隐藏这样的标签项。从概念上讲，它们要么是开放的，要么是封闭的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:07:37.980

尝试通过将 TabControl 的可见性设置为 Visibility.Hidden 或切换到另一个选项卡（可能是空的？）来隐藏 TabControl。你没有给出太多的理由，但是如果你真的想隐藏tabcontrol中的所有控件，你也可以遍历tabItem.Children并将它们的Visibility设置为Visibility.Hidden。

# c# - 不能在 .ascx 中使用“var”变量？

> ID：12949893
> 
> 赞同：0
> 
> 时间：2012-10-18T08:05:35.730
> 
> 标签：c#, .net

在 .ascx.cs 我有这个代码，例如：

```
var xDoc = XDocument.Parse(xml); //or XDocument.Load(fileName)
var list =  xDoc.Descendants("ordinanza")
                .Select(n => new
                {
                    Numero = n.Element("numero").Value,
                    Titolo = n.Element("titolo").Value,
                })
                .ToList(); 
```

好吧，现在我想在我的 .ascx 上“foreach”这个匿名类型，但我不能使用 protected/public for `list`（因为 is `var`）。

那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:11:34.577

您提取的数据是较大实体的缩减版本，并且您在视图中使用此数据。在 MVC 或 MVP 术语中，这将是一个视图模型（一种用于在 UI 中显示数据的数据传输对象）。

您可以做的是创建一个简单的轻量级类（视图模型）来保存这些数据：

```
public CustomerContactViewModel()
{
    public string Name { get; set; }

    public string Phone { get; set; }
} 
```

然后将您的 LINQ 查询更新为：

```
IEnumerable<CustomerContactViewModel> custQuery =
    from cust in customers
    where cust.City == "Phoenix"
    select new CustomerContactViewModel() { Name = cust.Name, Phone = cust.Phone }; 
```

# wcf - 无法从远程计算机调用 WCF 服务方法

> ID：12949894
> 
> 赞同：0
> 
> 时间：2012-10-18T08:05:36.533
> 
> 标签：wcf, wcf-client

我们创建了 WCF 服务并托管在特定机器上的 IIS 中。WCF 客户端托管在同一 LAN 中的其他计算机上。

我们能够调用它。突然它开始给出错误。它抛出了一些超时异常。

请告诉我可能出现此类错误的情况。如果 WCF 客户端和 WCF 服务都在同一台机器上，那么它不会抛出任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:54:58.460

您可以从设置客户端的机器上 ping 服务吗？

是否有任何防火墙导致此问题？但是你说你原本可以调用它？是否有任何事件日志可供参考？

您可以尝试设置 WCF 日志记录

# javascript - Javascript 显示和 CSS

> ID：12949900
> 
> 赞同：0
> 
> 时间：2012-10-18T08:05:49.643
> 
> 标签：javascript, css

我不得不只使用 Javascript 创建一个“假”天气页面。我在布局上苦苦挣扎，有几个问题：

*   我尝试了一切以在我的“h1”标题上方添加填充，但没有任何效果。

*   我希望天气照片和信息显示在盒子的中间（就像在第 0 天那样），但我无法让它这样做。

*   您会建议将我的 .js 文件为每个函数分成不同的文件，还是可以将它们全部放在一个中。我想避免混淆？

HTML：

```
<!doctype html>

<html lang="en">

<head> 
 <meta charset="utf-8"> 
 <title>AccuMeteo</title>
 <meta name="description" content="AccuMeteo Weather Forecast">
 <meta name="keywords" content="Daily and Weekly Weather forecast">
 <link href="css/accumeteo.css" rel="stylesheet">
   <script type="text/javascript" src="js/accumeteo.js"></script>   
</head>

<body>
   <!-- wrapper  section starts -->
    <div id="wrapper">

        <!-- header  section starts -->
    <div id="header">

    <img src="images/header.jpg" width="975" height="220" alt="Blue Sky Header" class="floatleft">

    </div>

        <!-- header  section ends -->

  <!-- menu  section starts -->     
    <div id="menu">
        <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="vancouver.html" id="current" class="first">Vancouver</a></li>
                <li><a href="dallas.html">Dallas</a></li>
                <li><a href="ny.html">New York</a></li>
                    <li><a href="placeholder.html">Contact Us</a></li>
            </ul>
    </div>

        <!-- menu  section ends -->

<div id="content">

<div id="city">
    <h1>Vancouver, BC</h1>
</div>    

<div id="date">
    <noscript> <div>! JavaScript is not enabled.</div> </noscript>

    <div id="PST"></div>
    <div id="year"></div>
    <div id="ordinal"></div>
    <div id="day"></div>
</div>

<div id="panel">

    <div id="day0">
    </div>

    <div id="day1">
    </div>

    <div id="day2">
    </div>

    <div id="day3">
    </div>

    <div id="day4">
    </div>

    <div id="day5">
    </div>

    <div id="day6">
    </div>
</div>

</div>

        <!-- footer section starts -->
    <div id="footer">
        <p class="bottom">Copyright &copy; 2012 JC Design  |  All Rights Reserved  |  <a href="#">Terms and Conditions</a></p>
    </div>
    <!-- foot section ends -->      

    <!-- wrapper section starts -->
  <script>
    displayTime("PST");
</script>
   </div>

</body>
</html> 
```

.css

```
/*Homepage* /

/*Body*/
html {background-color: #e2e2e2}

body {
   color: #000; background: #fff;
   font-family: Verdana,helvetica,arial, sans-serif; 
   font-size: 90%;
   text-align: left;
   width: 975px;
   margin-left: auto;
   margin-right: auto;
}

p {
   margin-left: 35px;
   margin-right: 25px;
   text-align: left;
}

/*---------------Navigation  styles-------------------*/

#menu {
  float: left; 
  margin:0;
  padding-top: 0px;
  width: 100%;
  background: #4186d3; color: #04356c;
}  

#menu ul {
  margin: 0px;
  position: relative 
}

#menu ul li {
  display: inline; 
}

#menu ul li a {
  float: left;
  padding: 5px 16px;
  margin-right: 0px;
  background: #4186d3; color: #04356c;
  text-decoration: none;
  border-right: 1px solid #e2e2e2;
}

#menu ul li a:hover {
  color: #04356c; background: #fff;
  text-decoration: underline;
}

#menu li a#current {
  background: #0d56a6; color: #fff;
}

/*Bottom link formatting*/

p.bottom a:link { 
   background: #04356c; color: #fff;
}

p.bottom a:visited { 
   color: #ba1212;
}

p.bottom a:hover {
   color: #f9b41f;  
   text-decoration: none; 
}

p.bottom a:active{
    background: #3ca0d0; color: #000;
}

/*Page wrapper*/
#wrapper {
   margin: 0 auto; 
   width: 975px; 
   text-align: left;
}

/*Banner styles*/

#header {
   background-color: #2d1d06; color: #7d890d;
   font-family: verdana, helvetica, arial, sans-serif;
   font-size: 150%;
   width: 925px;
   padding: 0px;
}

#footer {
   clear: both;
  background: #04356c; color: #fff;
   font-family: Verdana,helvetica, arial, sans-serif;
   font-size: 90%;
   font-weight: normal;
   width: 975px;
   padding-bottom: 3px;
   padding-top: 3px;
}

#footer p {
   text-align: center;
}

.content {
  padding: 0px 0px 0px 160px;
  position: relative;
}

/* Images*/
img { 
   border: 0px; 
   padding: 0px;
}

.floatleft { 
   float: left;
   margin: 0px;
   padding: 0px; 
   border: none;  
}

/*Headings*/
hr{
  position: absolute;
   width: 45%;
   margin-left: 35px;
   margin-right: 45px;
   border: 1px dotted #000; 
}
h1{
   color: #7d890d;
   font-size: 140%;
   font-weight: normal;
   margin-left: 35px;
}

h2{
   color: #052a6e;
   font-weight: normal;
   font-size: 125%;
   margin-left: 35px;
}

/*********************/
/*  Date Properties  */
/*********************/

#date {
   float: right;
   margin: 10px;
}

#day, #ordinal, #year {
   float: right;
}

#ordinal {
   vertical-align: baseline;
   font-size: 0.8em;
   position: relative;
   top: -0.2em;
}

/*  JavaScript Panel Properties  */

#panel {
   font-size: 0.8em;
   width: 100%;
   float: left;
   margin: 5px;
}

#day0, #day1, #day2, #day3, #day4 {
   float: left;
   width: 181px;
   height: 355px;
   border: 1px solid black;
   margin: 4px;
   text-align: center;
}

td,th {
   width: 175px;
   height: 35px;
   font-size: 1.3em;
}

th {
   font-size: 1.5em;
}

#spacerCell {
   height: 70px;
}

.tempLow, .tempHigh {
   font-size: 2em;
   color: blue;
}

.tempHigh {
   color: red;
} 
```

.js

```
var thisDate = new Date();
var day = thisDate.getDate();
var dayNames = [ "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday" ];
var monthNames = [ "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" ];

var sun = new Forecast( "sunny.png", "Sunny", 17, 31 );
var clouds = new Forecast( "cloudy.png", "Cloudy", 10, 23 );
var showers = new Forecast( "mix.png", "Mix of Sun and Cloud", 12, 20 );    
var rain = new Forecast( "rain.png", "Rain", 6, 14 );  

var fList = [ sun, clouds, showers, rain ];    
var pList = [ "day0", "day1", "day2", "day3", "day4" ];    

var low, high;

// Functions

function init()
{
    displayDate();
    displayForecast();
}
window.onload=init;

function Forecast( image, title, minTemp, maxTemp )
{
    this.image=image;
    this.title=title;
    this.minTemp=minTemp;
    this.maxTemp=maxTemp;
}

function randomNumber( min, max )
{
    var rand = Math.random() * (max - min + 1) + min;
    rand = Math.floor(rand)
    return rand;
}

function displayTime( timeZone )
{
    var timeE = document.getElementById( timeZone );
    var offset, hh, mm, AMorPM;

    switch ( timeZone )
    {
        case "PST":
            offset = -7;
            break;
        case "EST":
            offset = -4;
            break;
        case "CDT":
            offset = -5;
            break;
        default:
            timeE.innerHTML += "Error!";
    }

    thisDate = calcTime( offset );
    hh = thisDate.getHours();
    mm = thisDate.getMinutes();

    if( mm < 10 ){ mm = "0" + mm; }

    if( hh > 12 )
    {
        hh -= 12;
        AMorPM = " PM";
    }
    else
    {
        AMorPM = " AM";
    }

    timeE.innerHTML += hh + ":" + mm + " " + AMorPM + " (" + timeZone + ")";
}

// This will return a Date object with the city's current time based on that city's "offset" from the GMT.
function calcTime( offset )
{
    var date = new Date();
    date.setTime(date.getTime() + date.getTimezoneOffset()*60*1000 + offset*60*60*1000);
    return date;
}

//This will return a new Date object for a single forecast
function addDays(myDate,days)
{
    return new Date(myDate.getTime() + days*24*60*60*1000);
}

function displayDate()
{
    var dayE = document.getElementById("day");
    var ordinalE = document.getElementById("ordinal");
    var yearE = document.getElementById("year");

    // Display the day of the week and the date (month, day)
    dayE.innerHTML = dayNames[ thisDate.getDay() ] +", ";
    dayE.innerHTML += monthNames[ thisDate.getMonth() ] +" ";
    dayE.innerHTML += " " +day;

    // Function determining which ending to use for the date and displaying it
    switch (day)
    {
        case 1:
        case 21:
        case 31:
            ordinalE.innerHTML += "st";
            break;
        case 2:
        case 22:
            ordinalE.innerHTML += "nd";
            break;
        case 3:
        case 23:
            ordinalE.innerHTML += "rd";
            break;
        default:
            ordinalE.innerHTML += "th";
    }

    // Display the year
    yearE.innerHTML = ", " +thisDate.getFullYear();
}

function getDayTitle( i )
{
    var dayTitle;
    var dayOfWeek = addDays( thisDate, i )
    var d = dayOfWeek.getDay();

    if( d > 6 )
    {
        d -= 7;
    }

    // Function determining which title to use (today, tomorrow, day of the week)
    switch ( i )
    {
        case 0:
            dayTitle = "Today";
            break;
        case 1:
            dayTitle = "Tomorrow";
            break;
        default:
            dayTitle = dayNames[d];
    }
    return dayTitle;
}

function displayForecast()
{
    for( i=0; i < pList.length; i++)
    {
        displayDailyForecast( i );
    }
}

function displayDailyForecast( i )
{
    var forecastE = document.getElementById( pList[i] );
    var forecast = fList[ randomNumber(0,3) ];
    var html = "<table>";

    if( i == 0)
    {
        html += "<tr><td id='spacerCell'></td></tr>"
    }

    html += "<tr><th colspan='2'>" + getDayTitle(i) + "</th></tr>";

    html += "<tr><td colspan='2'><img src='images/" + forecast.image + "' width='100' height='100'></td></tr>";

    html += "<tr><td colspan='2'>" + forecast.title + "</td></tr>";

    getTemp( forecast.minTemp, forecast.maxTemp );
    html += "<tr><td class='tempLow'>"+ low +"&degC</td>";
    html += "<td class='tempHigh'>"+ high +"&degC</td></tr>";

    forecastE.innerHTML += html;
}

function getTemp( min, max )
{
    var t1, t2;

    t1 = randomNumber( min, max );
    t2 = randomNumber( min, max );

    if( t1 < t2 )
    {
        low = t1;
        high = t2;
    }
    else if( t1 > t2 )
    {
        low = t2;
        high = t1;
    }
    else // if t1==t2
    {
        low = t1;
        high = t1 + 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:42:36.123

首先我想问你，你真的需要几天使用表格标签吗？我的意思是你不能使用 div 标签吗？因为在 table 标记中，所有内部标记始终具有相对位置。

您可以在 day0 / day1 等带有绝对位置的标签中插入 div 标签，然后使用
divId.innerHTML = getDayTitle(i) （所有您各自的方法）来设置文本，而不是通过 js 生成整个表格。

其次，如果将来如果您更改文本的字体等，那么表格也会产生问题，因为它总是使用“适合内容”类型的方法，因此 tr 大小可能会根据您的文本大小而增加

使用 div 标签，它肯定会工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:19:52.470

[给你](http://jsfiddle.net/PYBS5/2/)。使用 padding 属性进行填充，你使用的是 spacercell td 来显示中间的东西，没有一个 js 文件是好的。

编辑：修复了几件事。您在 css 中使用了 .content 选择器而不是 #content 选择器。[这](http://jsfiddle.net/WMBwM/)是更新的版本。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-18T08:16:24.893

对于新浏览器，请使用 flexbox。 [http://www.html5rocks.com/en/tutorials/flexbox/quick/](http://www.html5rocks.com/en/tutorials/flexbox/quick/)

# ruby - Student:Class 的未定义方法“每个”

> ID：12949904
> 
> 赞同：5
> 
> 时间：2012-10-18T08:05:58.427
> 
> 标签：ruby, arrays, class, nomethoderror

我想加载一个文件，将其内容拆分为数组，并将类应用于内容。

```
class Student
    def initialize( name, grade )
        @name = name
        @grade = grade
        @grade = @grade.to_i
        @newgrade = @grade*1.45
    end

    def show()
        return "#{@name} ,#{@grade} , #{@newgrade}" 
    end
end

# Opening the file into an array
arr = File.open("exam_results.txt", "r+")
allStudents = Array.new

for a in arr
    b = a.split(",")
    name = b[0]
    score = b[1]
    allStudents << Student.new(@name, @grade)
end

for i in Student
    puts show()
end 
```

我越来越

> Student:Class (NoMethodError) 的未定义方法“每个”

在第 28 行，即该`puts show()`行。关于我如何进一步了解这一点的任何线索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:09:07.467

我认为你有一个错字（除其他外）。你这样做：

```
for i in Student
  puts show()
end 
```

显然，`Student`该类不是您可以迭代的集合。我想，你的意思是这样写的：

```
allStudents.each do |student|
  puts student.show
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T08:09:47.757

那是因为您正在尝试迭代“学生”类而不是 Array/Collection 对象`for i in Student`

基本上你做错了。它应该是类似的东西

```
allStudents.each do |student|
  puts student.show
end 
```

# c# - 如何返回 int 数组的总和和平均值？

> ID：12949907
> 
> 赞同：10
> 
> 时间：2012-10-18T08:06:19.223
> 
> 标签：c#

我需要定义两种方法来返回int 数组的`sum`and 。`average`方法定义如下：-

```
public int Sum(params int[] customerssalary)
{

         // I tried the following but it fails   return customerssalary.sum();
} 
```

另一个问题是，如何返回这些 int 值的平均值？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-18T08:07:54.793

```
customerssalary.Average();
customerssalary.Sum(); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-18T08:17:51.707

这是你应该这样做的方式，我这么说是因为你显然是 C# 的新手，并且可能应该尝试理解一些基本的东西是如何工作的！

```
public int Sum(params int[] customerssalary)
{
   int result = 0;

   for(int i = 0; i < customerssalary.Length; i++)
   {
      result += customerssalary[i];
   }

   return result;
} 
```

使用此`Sum`功能，您也可以使用它来计算平均值...

```
public decimal Average(params int[] customerssalary)
{
   int sum = Sum(customerssalary);
   decimal result = (decimal)sum / customerssalary.Length;
   return result;
} 
```

在第二个函数中使用`decimal`类型的原因是因为除法很容易返回非整数结果

* * *

其他人提供了一个 Linq 替代方案，无论如何我都会使用它，但是对于 Linq，无论如何拥有自己的功能是没有意义的。我假设你被要求实现这些功能作为一项任务来展示你对 C# 的理解，但我可能错了。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-10-18T08:11:33.187

使用`ints.sum()`有两个问题：

*   变量被称为`customerssalary`，而不是`ints`
*   C# 区分大小写 - 方法被调用`Sum()`，而不是`sum()`.

此外，您需要一个 using 指令

```
using System.Linq; 
```

一旦你得到了总和，你可以只除以数组的长度来得到平均值——你不需要使用`Average()`which 将再次遍历数组。

```
int sum = customerssalary.Sum();
int average = sum / customerssalary.Length; 
```

或作为`double`：

```
double average = ((double) sum) / customerssalary.Length; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-24T14:23:19.707

尽管上面所有的答案都是不同的正确答案，但我想提供以下解决方案，其中包括一个空检查：

```
decimal sum = (customerssalary == null) ? 0 : customerssalary.Sum();
decimal avg = (customerssalary == null) ? 0 : customerssalary.Average(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-18T08:09:34.277

您尝试了错误的变量，`ints`不是正确的参数名称。

```
public int Sum(params int[] customerssalary)
{
    return customerssalary.Sum();
}

public double Avg(params int[] customerssalary)
{
    return customerssalary.Average();
} 
```

但是你觉得这些方法真的有必要吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T08:20:02.667

如果您使用的是 Visual Studio 2005，那么

```
public void sumAverageElements(int[] arr)
{
     int size =arr.Length;
     int sum = 0;
     int average = 0;

     for (int i = 0; i < size; i++)
     {
          sum += arr[i];
     }

     average = sum / size; // sum divided by total elements in array

     Console.WriteLine("The Sum Of Array Elements Is : " + sum);
     Console.WriteLine("The Average Of Array Elements Is : " + average);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-18T11:18:48.567

我参考了很多结果并修改了我的代码它的工作

```
foreach (var rate in rateing)
                {
                    sum += Convert.ToInt32(rate.Rate);
                }
                if(rateing.Count()!= 0)
                {
                    float avg = (float)sum / (float)rateing.Count();
                    saloonusers.Rate = avg;
                }
                else
                {
                    saloonusers.Rate = (float)0.0;
                } 
```

# prestashop - 为 Prestashop 中的所有其他产品添加价格规则

> ID：12949909
> 
> 赞同：0
> 
> 时间：2012-10-18T08:06:25.227
> 
> 标签：prestashop, rule

我一直在寻找以这种方式在 Prestashop 中进行价格裁决的选项：

第一件产品售价 10 美元，其他每件售价 8 美元。

我似乎找不到它，想知道我是否可以以任何方式破解 prestashop 来实现这一点。

可以选择包括百分比和固定金额折扣，但这并不像我们的营销方式那样起作用。感谢您的输入 ！

请注意，我也在网上搜索了这个，但没有找到相关的解决方案。如果它不属于stackoverflow，我很抱歉。

我见过一些模块，价格从 50 到 200 欧元不等，我想知道是否有简单的，甚至可能是免费的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:25:25.093

你可以试试：`Catalog->Choose product->Prices tab->Add a new specific price->Starting at 2 unit->And add new price`。但这样 1 和 2 项目将有一个新的价格。不只是第二个产品。

# tomcat - 当我尝试打开任何其他网页时，为什么会出现 Tomcat 的欢迎页面？

> ID：12949913
> 
> 赞同：1
> 
> 时间：2012-10-18T08:06:38.787
> 
> 标签：tomcat, iptables, netfilter

美好的一天，我正在我的服务器上的 8080 端口上运行 Tomcat。Tomcat 可以从外部通过 80 端口以及服务器本身很好地访问（我使用 iptables 重定向了端口）。但是，当我尝试在服务器上的 Web 浏览器中打开任何其他网页（例如[http://www.google.com](http://www.google.com)等）时，我得到了 Tomcat 的欢迎页面。如果我改用 IP 地址也无济于事。我的 iptables 配置似乎有问题：

```
# Generated by iptables-save v1.4.7 on Thu Oct 18 08:55:16 2012
*filter
:INPUT DROP [0:0]
:FORWARD DROP [0:0]
:OUTPUT ACCEPT [0:0]
:SSH - [0:0]
-A INPUT -i lo -j ACCEPT 
-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT 
-A INPUT -m state --state INVALID -j DROP 
-A INPUT -p tcp -m tcp --dport 22 -m state --state NEW -j SSH 
-A INPUT -p tcp -m tcp --dport 8080 -m state --state NEW -j ACCEPT 
-A INPUT -j DROP 
-A SSH -s 10.0.0.0/8 -j ACCEPT 
-A SSH -m limit --limit 5/sec --limit-burst 100 -j ACCEPT 
-A SSH -j DROP 
COMMIT
# Completed on Thu Oct 18 08:55:16 2012
# Generated by iptables-save v1.4.7 on Thu Oct 18 08:55:16 2012
*nat
:PREROUTING ACCEPT [810:128855]
:POSTROUTING ACCEPT [41:2705]
:OUTPUT ACCEPT [26:1805]
-A PREROUTING -p tcp -m tcp --dport 80 -j REDIRECT --to-ports 8080 
-A OUTPUT -p tcp -m tcp --dport 80 -j REDIRECT --to-ports 8080 
COMMIT
# Completed on Thu Oct 18 08:55:16 2012 
```

请指教。提前谢谢了。沃杰科技

编辑：

所以我发现当我删除以下行时它开始工作。有人可以解释一下这条线到底是做什么的，这样我就可以在打开例如谷歌网页时看到我的 Tomcat 的欢迎页面？

```
-A OUTPUT -p tcp -m tcp --dport 80 -j REDIRECT --to-ports 8080 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:46:03.503

您要询问的行使用协议 TCP 将 OUTPUT 链上的任何数据包发送到目标端口 80 并将其移动到您不想要的[REDIRECT](http://www.faqs.org/docs/iptables/targets.html#REDIRECTTARGET)链。因为，除非您还使用该规则指定目标 ip，否则*所有 http 请求*都将转到您的 Tomcat。当事情来自 <local process> 时，您希望他们转到他们指定的目标 IP（google.com 等），而不是将它们重定向到您的本地计算机。

以供参考：

![netfilter 中的链和跳转](../Images/07fbf07efd82c01999ee838bdb28342c.png)

# ruby-on-rails - Ransack：如何使用现有范围？

> ID：12949915
> 
> 赞同：14
> 
> 时间：2012-10-18T08:06:55.870
> 
> 标签：ruby-on-rails, ruby-on-rails-3, arel, ransack

将 Rails 2 应用程序转换为 Rails 3，我必须替换 gem [searchlogic](https://github.com/binarylogic/searchlogic)。现在，将 Rails 3.2.8 与 gem [Ransack](https://github.com/ernie/ransack)一起使用，我想构建一个使用现有范围的搜索表单。例子：

```
class Post < ActiveRecord::Base
  scope :year, lambda { |year| 
    where("posts.date BETWEEN '#{year}-01-01' AND '#{year}-12-31'") 
  }
end 
```

据我所知，这可以通过定义自定义[ransacker](http://rdoc.info/github/ernie/ransack/Ransack/Ransacker)来实现。可悲的是，我没有找到任何关于此的文档。我在`Post`课堂上试过这个：

```
ransacker :year, 
          :formatter => proc {|v| 
            year(v)
          } 
```

但这不起作用：

```
Post.ransack(:year_eq => 2012).result.to_sql
=> TypeError: Cannot visit ActiveRecord::Relation 
```

我尝试了`ransacker`声明的一些变体，但它们都不起作用。我需要一些帮助...

**更新：**上面的范围只是一个例子。我正在寻找一种方法来使用 Ransack 中的每个现有范围。在 Ransack 的前身 MetaSearch 中，有一个特性要求`search_methods`使用范围。Ransack 还[没有](https://github.com/ernie/ransack/issues/61)开箱即用的支持。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-11-22T17:31:24.353

[合并https://github.com/activerecord-hackery/ransack/pull/390](https://github.com/activerecord-hackery/ransack/pull/390)后，ransack 支持开箱即用。您应该声明 ransakable_scopes 方法以添加对 ransack 可见的范围。

从手册

继续上一节，按范围搜索需要在模型类上定义一个 ransackable_scopes 的白名单。白名单应该是一个符号数组。默认情况下，所有类方法（例如作用域）都被忽略。范围将应用于匹配真值，或者如果范围接受值，则应用于给定值：

```
class Employee < ActiveRecord::Base
  scope :activated, ->(boolean = true) { where(active: boolean) }
  scope :salary_gt, ->(amount) { where('salary > ?', amount) }

  # Scopes are just syntactical sugar for class methods, which may also be used:

  def self.hired_since(date)
    where('start_date >= ?', date)
  end

  private

  def self.ransackable_scopes(auth_object = nil)
    if auth_object.try(:admin?)
      # allow admin users access to all three methods
      %i(activated hired_since salary_gt)
    else
      # allow other users to search on `activated` and `hired_since` only
      %i(activated hired_since)
    end
  end
end

Employee.ransack({ activated: true, hired_since: '2013-01-01' })

Employee.ransack({ salary_gt: 100_000 }, { auth_object: current_user }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:07:24.567

Ransack 让您为此创建自定义谓词，不幸的是，文档留下了改进的空间，但结帐：[https ://github.com/ernie/ransack/wiki/Custom-Predicates](https://github.com/ernie/ransack/wiki/Custom-Predicates)

另外，我相信您要解决的问题在他们的问题跟踪器上。那里正在进行一个很好的讨论：[https ://github.com/ernie/ransack/issues/34](https://github.com/ernie/ransack/issues/34)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-22T12:22:49.380

我编写了一个名为[siphon](https://github.com/charly/siphon)的 gem ，它可以帮助您将参数转换为 activerelation 范围。将它与 ransack 结合可以实现这一点。

你可以[在这里阅读完整的解释](https://github.com/charly/siphon/wiki/Combine-Ransack-with-Siphon)。同时这里是它的要点

## 风景

```
= form_for @product_search, url: "/admin/products", method: 'GET' do |f|
  = f.label "has_orders"
  = f.select :has_orders, [true, false], include_blank: true
  -#
  -# And the ransack part is right here... 
  -#
  = f.fields_for @product_search.q, as: :q do |ransack|
    = ransack.select :category_id_eq, Category.grouped_options
``` 
```

好的，所以现在`params[:product_search]`拥有范围并`params[:product_search][:q]`具有洗劫的优点。现在，我们需要找到一种方法将这些数据分发给表单对象。所以首先让 ProductSearch 在控制器中吞下它：

## 控制器

```
# products_controller.rb
def index
  @product_search = ProductSearch.new(params[:product_search])
  @products ||= @product_formobject.result.page(params[:page])
end 
```

## 表单对象

```
# product_search.rb
class ProductSearch
  include Virtus.model
  include ActiveModel::Model

  # These are Product.scopes for the siphon part
  attribute :has_orders,    Boolean
  attribute :sort_by,       String

  # The q attribute is holding the ransack object
  attr_accessor :q

  def initialize(params = {})
    @params = params || {}
    super
    @q = Product.search( @params.fetch("q") { Hash.new } )
  end

  # siphon takes self since its the formobject
  def siphoned
    Siphon::Base.new(Product.scoped).scope( self )
  end

  # and here we merge everything
  def result
    Product.scoped.merge(q.result).merge(siphoned)
  end
end 
```

# ruby-on-rails-3.2 - nil:NilClass（用户和评论模型）的未定义方法“电子邮件”

> ID：12949916
> 
> 赞同：1
> 
> 时间：2012-10-18T08:06:56.807
> 
> 标签：ruby-on-rails-3.2

我收到以下错误：

```
undefined method `email' for nil:NilClass
Extracted source (around line #6):

3:   <div class="post-author">
4:     <div class="post-author-info">
5:       <span class="post-author-name">
6:         <strong><%= link_to comment.user.email, comment.user %></strong>
7:       </span>
8: 
9:       <span class="post-date secondary"> 
```

评论.rb：

```
 def show
    @comment = Comment.find(params[:id])
  end

  def create
    @post = Post.find(params[:post_id])
    comment_attr = params[:comment].merge :user_id => current_user.id
    @comment = @post.comments.create(comment_attr)
    redirect_to post_path(@post)
  end 
```

post.rb:

```
 attr_accessible :title, :content

  belongs_to :user

  has_many :comments, :dependent => :destroy 
```

用户.rb：

```
 has_many :posts, :dependent => :destroy
  has_many :comments, :dependent => :destroy 
```

评论.rb：

```
 attr_accessible :content, :user_id

  belongs_to :post, :counter_cache => true
  belongs_to :user 
```

路线.rb：

```
 resources :posts do
    resources :comments
  end 
```

架构.rb：

```
 create_table "comments", :force => true do |t|
    t.text     "content"
    t.integer  "post_id"
    t.integer  "user_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

create_table "users", :force => true do |t|
    t.string   "email",                  :default => "", :null => false
    t.string   "encrypted_password",     :default => "", :null => false
    t.string   "reset_password_token"
    t.datetime "reset_password_sent_at"
    t.datetime "remember_created_at"
    t.integer  "sign_in_count",          :default => 0
    t.datetime "current_sign_in_at"
    t.datetime "last_sign_in_at"
    t.string   "current_sign_in_ip"
    t.string   "last_sign_in_ip"
    t.datetime "created_at",                             :null => false
    t.datetime "updated_at",                             :null => false
    t.string   "provider"
    t.string   "uid"
  end 
```

我不确定有什么问题。上面的文件中的一切似乎都很好。

有什么建议么？

**编辑：**

帖子/show.html.erb：

```
<div id="post-<%= @post.id %>" class="post-single">
  <h3 class="post-title"><%= @post.title %></h3>

  <span class="post-author-name">
    <strong><%= link_to @post.user.email, @post.user %></strong>
  </span>

  <span class="post-content">
    <%= @post.content %>
  </span>

  <div class="comments">
    <h4 class="comments-count"><%= pluralize(@post.comments_count, "Comment") %></h4>

    <%= render @comments %>
    <%= render 'comments/form' %>
  </div>
</div> 
```

评论/_comment.html.erb：

```
<div id="comment-<%= comment.id %>" class="comment">

  <div class="post-author">
    <div class="post-author-info">
      <span class="post-author-name">
        <strong><%= link_to comment.user.email, comment.user %></strong>
      </span>

      <span class="post-date secondary">
        <%= time_ago_in_words(comment.created_at) %>
      </span>
    </div>

    <span class="post-author-control">
      <% unless current_user == nil %>
        <% if current_user.id == comment.user_id %>
          <%= link_to 'Edit', edit_post_comment_path(@post, comment) %>
        <% end %>
      <% end %>
    </span>
  </div>

  <div class="comment-body">
    <p><%= comment.content %></p>
  </div>
</div> 
```

帖子.rb：

```
 def show

    @post = Post.find(params[:id])
    @comments = @post.comments
    @comment = @post.comments.build
  end 
```

评论/_form.html.erb：

添加评论：

```
<%= form_for([@post, @comment]) do |f| %>
  <div class="field">
    <%= f.label :content %><br />
    <%= f.text_area :content %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:46:30.270

问题是您的控制器中的以下行创建了一个与帖子相关的评论对象，但与用户无关，因此导致您的部分错误：

```
@comment = @post.comments.build 
```

要消除错误，您应该将上面的行更改为：

```
@comment = Comment.new 
```

或从您的控制器中删除该行并将您的评论表单更改为：

```
<%= form_for [@post, Comment.new] do |f| %> 
```

# iphone - ios developer certificate private key

> ID：12949917
> 
> 赞同：1
> 
> 时间：2012-10-18T08:06:57.760
> 
> 标签：iphone, ios

my certificate was about to expire, so i revoked the old one from the ios provisioning portal and created a new one with xcode (everything worked automatically). After that i set the provisioning profiles to the new certificate within the ios provisioning portal and pressed the "renew" button within the organizer.

Now i recognized that if i want to use some old ipa (wich was signed with a different certificate) i cannot install it on the iphone (getting some message like signature is invalid or so). I've read that when you create a new certificate you should use the old private key. Unfortunally i dont know where the old private key is located (since i'm new at this project).

Just for clarification: if i would create the new certificate with the old private key, will the old ipa work or do i still have to create a new one with the new certificate signed.

And will there any complications when i decide to update my app within the apple store?

thx for help,

kuku

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:18:56.460

No, the certificate will not complicate any updates to AppStore apps, just be sure that the BundleID is the same. ( You can't send in a update if the bundle id is not the same).

I've been updating one app for 4 years now and have even switched machines in those years, I have create many different certificates for the same account and update the apps many times.

# javascript - 不能在 SelectBoxIt 中制表符

> ID：12949926
> 
> 赞同：2
> 
> 时间：2012-10-18T08:07:28.690
> 
> 标签：javascript, tabindex

你好，我的名字是谢恩，

我正在编写一个自定义网站。我已经建立了一个联系表单，并且正在使用 SelectBoxIt (http://gregfranko.com/jquery.selectBoxIt.js/) 作为我的下拉功能。我有几个输入字段、两个按钮和一个选择框（下拉）。我的表格工作得很好，我的问题是 TabIndex。我在每个输入中都编码了正确的标签索引，但是当我选择选择框时，它会被忽略。

这是页面：[http](http://www.lightupco.com/contact.htm) ://www.lightupco.com/contact.htm 注意：您必须单击信封/钢笔图标才能显示表格。

我从研究类似问题的论坛中获得的唯一线索是，它与底层 UL 相关，导致标签索引关闭。

我不确定我的页面中的哪些代码要包含在这里，以获得帮助来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:22:54.357

嘿 Shane 我写了 SelectBoxIt。您的选择框 tabindex 被忽略的原因是因为 SelectBoxIt 隐藏了原始选择框并将其替换为更易于设置样式的新 HTML（一个 div 元素）。因此，tabindex 属性没有设置在可见下拉列表（div 元素）上，只有隐藏的选择框。

如果您不介意在[Github](https://github.com/gfranko/jquery.selectBoxIt.js/issues)上创建问题，我很乐意向 SelectBoxIt 添加一个功能，该功能将原始选择框上的任何 tabindex 属性复制到新的可见下拉列表中。那应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:16:26.843

选择框的索引为 0。如果单击 Name: 输入，则索引为 1，因此，您的索引错误。

毕竟，为什么要使用 tabindex？-.-

# performance - matlab代码的向量化

> ID：12949936
> 
> 赞同：4
> 
> 时间：2012-10-18T08:08:04.123
> 
> 标签：performance, matlab, optimization, vectorization

我对矢量化有点陌生。自己试过但做不到。有人可以帮我对这段代码进行矢量化处理，并简要说明你是如何做到的，这样我也可以调整思维过程。谢谢。

```
function [result] = newHitTest (point,Polygon,r,tol,stepSize)
%This function calculates whether a point is allowed.

%First is a quick test is done by calculating the distance from point to 
%each point of the polygon. If that distance is smaller than range "r", 
%the point is not allowed. This will slow down the algorithm at some 
%points, but will greatly speed it up in others because less calls to the 
%circleTest routine are needed.
polySize=size(Polygon,1);
testCounter=0;

for i=1:polySize
d = sqrt(sum((Polygon(i,:)-point).^2));

if d < tol*r
    testCounter=1;
    break
end
end

if testCounter == 0
circleTestResult = circleTest (point,Polygon,r,tol,stepSize);
testCounter = circleTestResult;
end

result = testCounter; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T08:37:00.407

给定`Polygon`二维信息，`point`是一个行向量，其他变量是标量，这是您的新函数的第一个版本（向下滚动以查看有很多方法可以给这只猫剥皮）：

```
function [result] = newHitTest (point,Polygon,r,tol,stepSize)
result = 0;
linDiff = Polygon-repmat(point,size(Polygon,1),1);
testLogicals = sqrt( sum( ( linDiff ).^2 ,2 )) < tol*r;    
if any(testLogicals); result = circleTest (point,Polygon,r,tol,stepSize); end 
```

Matlab 中向量化的思考过程涉及尝试使用单个命令对尽可能多的数据进行操作。大多数基本的内置 Matlab 函数在多维数据上运行非常有效。使用`for`循环与此相反，因为您将数据分解为更小的部分进行处理，每个部分都必须单独解释。通过使用`for`循环进行数据分解，您可能会失去一些与 Matlab 内置函数背后高度优化的代码相关的巨大性能优势。

在您的示例中首先要考虑的是主循环中的条件中断。您不能脱离矢量化过程。相反，计算所有可能性，为数据的每一行创建一个结果数组，然后使用`any`关键字查看是否有任何行表明`circleTest`应该调用该函数。

注意：在 Matlab 中有效地有条件地打破计算并不容易。但是，由于您只是在循环中计算欧几里德距离的一种形式，因此通过使用矢量化版本并计算所有可能性，您可能会看到性能提升。如果循环中的计算成本更高，输入数据很大，并且您想在遇到特定条件时立即中断，那么使用编译语言制作的 matlab 扩展可能比矢量化版本快得多，其中您可能正在执行不必要的计算。但是，这是假设您知道如何使用可编译为本机代码的语言编写与 Matlab 内置程序性能相匹配的代码。

回到主题...

首先要做的是获取和行向量`linDiff`之间的线性差异（在代码示例中）。要以矢量化方式执行此操作，两个变量的维度必须相同。实现此目的的一种方法是使用复制每一行以使其大小与. 但是，通常是 repmat 的更好替代方案（[如最近的 SO 问题中所述](https://stackoverflow.com/questions/12951453/in-matlab-when-is-it-optimal-to-use-bsxfun/12955706#comment17565043_12955706)），使代码......`Polygon``point``repmat``point``Polygon``bsxfun`

```
function [result] = newHitTest (point,Polygon,r,tol,stepSize)
result = 0;
linDiff = bsxfun(@minus, Polygon, point);
testLogicals = sqrt( sum( ( linDiff ).^2 ,2 )) < tol*r;    
if any(testLogicals); result = circleTest (point,Polygon,r,tol,stepSize); end 
```

我通过在第二个轴上求和将您的值滚动`d`到一列中`d`（注意从命令中删除数组索引`Polygon`并`,2`在`sum`命令中添加）。然后我更进一步，通过`testLogicals`计算距离度量来评估逻辑数组。您很快就会发现重向量化的一个缺点是它会使不熟悉 Matlab 的人的代码可读性降低，但性能提升是值得的。评论非常有必要。

现在，如果您想完全发疯，您可能会争辩说测试函数现在非常简单，以至于它需要使用“匿名函数”或“lambda”而不是完整的函数定义。是否值得做的测试`circleTest`也不需要`stepSize`参数，这可能是使用匿名函数的另一个原因。您可以将您的测试滚动到一个匿名函数中，然后`circleTest`在您的调用脚本中使用，从而使代码在一定程度上自我记录。. .

```
doCircleTest = @(point,Polygon,r,tol) any(sqrt( sum( bsxfun(@minus, Polygon, point).^2, 2 )) < tol*r);

if doCircleTest(point,Polygon,r,tol)
    result = circleTest (point,Polygon,r,tol,stepSize); 
else
    result = 0;
end 
```

现在一切都被矢量化了，函数句柄的使用给了我另一个想法。. .

如果您计划在代码中的多个点执行此操作，那么`if`语句的重复会变得有点难看。为了保持[干燥](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)，将带有条件函数的测试放在一个函数中似乎是明智的，就像您在原始帖子中所做的那样。但是，该函数的效用将非常狭窄——它只会测试该`circleTest`函数是否应该执行，然后在需要时执行它。

现在想象一下，过了一会儿，你有一些其他的条件函数，就像`circleTest`，它们自己的等价物`doCircleTest`。也许重用条件切换代码会很好。为此，请制作一个类似于原始函数的函数，该函数采用默认值、计算成本低的测试函数的布尔结果以及昂贵的条件函数的函数句柄及其相关参数......

```
function result = conditionalFun( default, cheapFunResult, expensiveFun, varargin )
if cheapFunResult
    result = expensiveFun(varargin{:});
else
    result = default;
end
end %//of function 
```

您可以使用以下内容从主脚本中调用此函数。. .

```
result = conditionalFun(0, doCircleTest(point,Polygon,r,tol), @circleTest, point,Polygon,r,tol,stepSize); 
```

...它的美妙之处在于您可以使用任何测试、默认值和昂贵的功能。这个简单的例子可能有点矫枉过正，但当我提出使用函数句柄的想法时，这就是我的想法。

# c# - SetFilePointer 不会失败，但也不会移动指针

> ID：12949937
> 
> 赞同：5
> 
> 时间：2012-10-18T08:08:05.607
> 
> 标签：c#, c++, winapi

首先，如果我说些傻话，请原谅我，我不是 IT 人，而是电子工程师，但我被分配到需要更多技能的工作。

我需要在 SD 卡中写入和读取物理扇区。我已经用 C++ 完成了它，但是主应用程序是用 C# 编写的，所以我认为现在是编写我的第一个 dll 的好时机。

这是用 C++ 编写扇区的代码。

```
private: System::Void button4_Click(System::Object^  sender, System::EventArgs^  e) {
HANDLE hFile   = INVALID_HANDLE_VALUE;
    BOOL fSuccess  = FALSE;

    DWORD dwBytesWritten = 0; 

    unsigned char  chBuffer[SIZE]; 

    long SectorActual = 39;
    long PosicionInicio = SectorActual * 512;

        for (int i=0; i<SIZE; i++) // Garbage values to be written
        {
            chBuffer[i]= i % 16;
            if((i/16)%2==0)
            {
                chBuffer[i]= 15 - chBuffer[i];
            }
        }
        hFile = CreateFileA("\\\\.\\PhysicalDrive5",GENERIC_READ|GENERIC_WRITE,0,NULL,OPEN_EXISTING,FILE_ATTRIBUTE_NORMAL,NULL);

        if (hFile == INVALID_HANDLE_VALUE) 
        { 
            textBox1->Text += "Could not open file (error " + GetLastError() + ") \r\n";
            return; 
        }

        DWORD dwPtr = SetFilePointer( hFile, 
                                PosicionInicio, 
                                NULL, 
                                FILE_BEGIN ); 

        if (dwPtr == INVALID_SET_FILE_POINTER) // Test for failure
        { 
            textBox1->Text += "Error moving pointer (error " + GetLastError() + ") \r\n";
            return;     // Deal with failure 
        } // End of error handler 

        fSuccess = WriteFile(hFile, chBuffer, TAMANYO_SECTOR, &dwBytesWritten, NULL); 
        if (!fSuccess) 
        {
            textBox1->Text += "WriteFile failed\r\n";
        }
        else
        {
            textBox1->Text += "WriteFile wrote " + dwBytesWritten.ToString() + " bytes\r\n";
        }

        CloseHandle(hFile);
    } 
```

然后我制作了DLL。功能是这样的：

```
 int AccesoBajoNivel::EscribeBloqueFisico(char numeroDisco, unsigned char * buffer, long      BytesQueEscribir, long posicion_inicio)
{
    HANDLE hFile   = INVALID_HANDLE_VALUE;
            BOOL fSuccess  = FALSE;
    DWORD dwBytesWritten = 0; 

    char ArrayDeChars[] = "\\\\.\\PhysicalDrive5";
            ArrayDeChars[17] = numeroDisco;
    LPCSTR pathAlDisco = ArrayDeChars;

    hFile = CreateFileA(pathAlDisco,GENERIC_READ|GENERIC_WRITE,0,NULL,OPEN_EXISTING,FILE_ATTRIBUTE_NORMAL,NULL);

    if (hFile == INVALID_HANDLE_VALUE) 
    { 
        //printf("Could not open file (error %d)\n", GetLastError());
        CloseHandle(hFile);
        return -1; 
    }

    DWORD dwPtr = SetFilePointer( hFile, 
                            posicion_inicio, 
                            NULL, 
                            FILE_BEGIN ); 

    if (dwPtr == INVALID_SET_FILE_POINTER) // Test for failure
    { 
        CloseHandle(hFile);
        return -2;     // Deal with failure 
    } // End of error handler 

    fSuccess = WriteFile(hFile, buffer, BytesQueEscribir, &dwBytesWritten, NULL); 
    if (!fSuccess) 
    {
        CloseHandle(hFile);
        return -3;
    }
    else
    {
        CloseHandle(hFile);
        //return dwBytesWritten;
        return dwPtr;
    }

    CloseHandle(hFile);
} 
```

然后我在C#项目中导入：

```
[DllImport("AccesoBajoNivel.dll", CallingConvention = CallingConvention.Cdecl)]
static extern int EscribeBloqueFisico(char numeroDisco, byte[] buffer, long BytesQueEscribir, long posicion_inicio); 
```

然后我调用函数：

```
int ResultEscribir = EscribeBloqueFisico(numeroDiscoFisico, BufferEscritura, 512, SectorEscribir * 512); 
```

始终写入第一个扇区，无论“posicion_inicio”的值如何（是起始偏移量，对西班牙标签感到抱歉）这就是为什么我将 api 中的写入函数更改为返回 dwPtr（SetFilePointer 的结果）而不是写入的字节. 这似乎总是为零，这显然不是我想要的。但是找不到为什么第一个函数有效而 dll 调用无效。

也许是乍一看应该看到的东西，但正如我所说，我是电子人，不习惯这种编程......

其他功能（如读取 DISK_GEOMETRY 或 VOLUME_DISK_EXTENTS）起作用，我用它来确定哪个物理驱动器是给定的逻辑单元。正如我所说，写作和阅读也很好，只是我总是指向零扇区......

提前致谢。另外，这是我第一次在这里发帖。看了很多遍（这就是我选择在这里提问的原因）但是如果我在发布问题时犯了错误，请指出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:35:38.983

C++ 中的*long*是 32 位的。这使它成为 C# 中的*int*。在 pinvoke 声明中将 long 替换为 int。

你应该得到一个 PInvokeStackImbalance 警告。如果您将其关闭，请确保重新启用该警告。并且很容易看出 *posicion_inicio* 的值在调试器中是错误的。请务必启用非托管调试、项目 + 属性、调试选项卡。现在您可以在 C++ 代码中设置断点。

# java - 什么是基于 JAX-RPC 的 Web 服务端点（在 EJB 的上下文中）？

> ID：12949943
> 
> 赞同：1
> 
> 时间：2012-10-18T08:08:42.387
> 
> 标签：java, web-services, jakarta-ee, ejb, java-ee-6

我从 Antonio Goncalves阅读*了使用 GlassFish 3 开始 Java EE 6 平台。*在关于 EJB 的章节中，他写道 EJB 的某些特性可能会在 Java EE 的下一个版本中被弃用。

> > EJB 3.1 中实际上没有删除以下任何特性，但下一个版本将不得不删除或保留其中一些特性：
> 
> *   基于 JAX-RPC 的 Web 服务端点

但我不明白他在这里的意思。他写了关于用`@Stateless`和注释`@WebService`的类 IE

```
@Stateless
@WebService
public class MyService { 

} 
```

所以用这两个注释来注释一个类是不好的做法？分班比较好？创建一个仅充当 EJB 的类，并创建另一个仅充当 WebService 的类（它将方法调用委托给定义为类成员的 EJB）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:12:16.123

两者都不是 JAX-RPC 的一部分`@Stateless`。`@WebService`它们属于 EJB3 和 JAX-WS。它们不会被弃用。

[JAX-RPC 2.0](http://weblogs.java.net/blog/kohlert/archive/2005/05/jaxrpc_20_renam.html)在 2005 年更名为 JAX-WS 2.0。

# c - 分段拆解helloworld

> ID：12949947
> 
> 赞同：0
> 
> 时间：2012-10-18T08:08:56.960
> 
> 标签：c, debugging, assembly, arm

社区成员推荐我分析以下内容以了解在 ARM 架构中发出的系统调用。我怀疑如何在这种结构中获取程序。我已经尝试过 gdb disas 命令，但是部分不可见。请帮忙。

```
.data 

HelloWorldString:
      .ascii "Hello World\n"

.text 

.globl _start 

_start:
      # Load all the arguments for write () 

      mov r7, #4
      mov r0, #1
      ldr r1,=HelloWorldString
      mov r2, #12
      svc #0

      # Need to exit the program 

      mov r7, #1
      mov r0, #0
      svc #0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:17:37.103

```
gcc -S filename.c -o filename.S 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:18:07.553

如果您使用的是 GNU 工具链，您可以尝试 objdump 实用程序。它会是这样的：

```
arm-xxx-objdump -d your-binar-or-object-file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T08:55:03.420

使用以下命令，您必须能够更好地读取对象转储。

你的工具链objdump -d -S a.out > dump.txt

这是使用 arc-gcc 的示例 C 代码和相应的对象转储。

```
int f2()
{
   int f2_var1 = 10;
   int f2_var2 = 20;
   return f2_var1+f2_var2;
}
void f1()
{
   int f1_var1 = 0;
   f1_var1 = f2();
}
int main(void)
{
   f1();
   return 0;
} 
```

我使用的命令是 arc-linux-uclibc-objdump -d -S a.out > dump.txt

dump.txt 如下。（文件有点大。但无能为力）

```
a.out:     file format elf32-littlearc

Disassembly of section .init:

00010240 <_init-0x4>:
   10240:   00 00 00 00                            

00010244 <_init>:
   10244:   f1 c0                       push_s     blink
   10246:   e0 78                       nop_s      
   10248:   c6 08 00 00                 bl         1030c <frame_dummy>

   1024c:   7a 09 00 00                 bl         103c4 <__do_global_ctors_aux>

   10250:   d1 c0                       pop_s      blink
   10252:   e0 7e                       j_s [blink] 
Disassembly of section .plt:

00010254 <.plt>:
   10254:   00 16 0b 70 01 00 d0 24     ld         r11,[0x000124d0]
   1025c:   00 16 0a 70 01 00 d4 24     ld         r10,[0x000124d4]
   10264:   20 20 80 02                 j          [r10]
   10268:   cc 24 01 00                 cmp.z      r4,r0
   1026c:   30 27 8c 7f 00 00 6c 22     ld         r12,[pcl,0x226c]
   10274:   20 7c                       j_s.d      [r12]
   10276:   ef 74                       mov_s      r12,pcl
Disassembly of section .text:

00010278 <__start>:
   10278:   4a 23 00 30                 mov        fp,0
   1027c:   00 c1                       ld_s       r1,[sp,0]
   1027e:   b8 70                       mov_s      r5,r0
   10280:   81 c2                       add_s      r2,sp,4
   10282:   cf 70 01 00 a4 03           mov_s      r0,0x000103a4
   10288:   cf 73 01 00 44 02           mov_s      r3,0x00010244
   1028e:   0a 24 80 0f 01 00 0c 04     mov        r4,0x0001040c
   10296:   84 24 3f 3e                 and        sp,sp,-8
   1029a:   0a 26 00 07                 mov        r6,sp
   1029e:   d2 0f cf ff                 bl         1026c <_init+0x28>

   102a2:   07 00 00 00                 b          102a6 <_exit_halt>

000102a6 <_exit_halt>:
   102a6:   e9 20 60 00                 flag       1
   102aa:   4a 26 00 70                 nop        
   102ae:   4a 26 00 70                 nop        
   102b2:   4a 26 00 70                 nop        
   102b6:   f3 07 cf ff                 b          102a6 <_exit_halt>

   102ba:   4a 26 00 70                 nop        
    ...

000102c0 <__do_global_dtors_aux>:
   102c0:   f1 c0                       push_s     blink
   102c2:   fc 1c c8 b6                 st.a       fp,[sp,-4]
   102c6:   0a 23 00 37                 mov        fp,sp
   102ca:   00 16 82 70 01 00 dc 24     ldb        r2,[0x000124dc]
   102d2:   0b ea                       breq_s     r2,0,102e6 <__do_global_dtors_aux+0x26>

   102d4:   29 00 00 00                 b          102fc <__do_global_dtors_aux+0x3c>

   102d8:   44 6a                       add_s      r2,r2,4
   102da:   00 1e 80 70 01 00 1c 24     st         r2,[0x0001241c]
   102e2:   22 20 c0 00                 jl         [r3]
   102e6:   00 16 02 70 01 00 1c 24     ld         r2,[0x0001241c]
   102ee:   60 82                       ld_s       r3,[r2,0]
   102f0:   f4 eb                       brne_s     r3,0,102d8 <__do_global_dtors_aux+0x18>

   102f2:   01 d8                       mov_s      r0,1
   102f4:   00 1e 02 70 01 00 dc 24     stb        r0,[0x000124dc]
   102fc:   04 14 1b 34                 ld.ab      fp,[sp,4]
   10300:   00 14 1f 32                 ld.a       blink,[sp,0]
   10304:   e0 7f                       j_s.d [blink] 
   10306:   40 24 1c 31                 add        sp,sp,4
   1030a:   e0 78                       nop_s      

0001030c <frame_dummy>:
   1030c:   f8 1c c8 b6                 st.a       fp,[sp,-8]
   10310:   0a 23 00 37                 mov        fp,sp
   10314:   00 16 02 70 01 00 c8 24     ld         r2,[0x000124c8]
   1031c:   4b 7a                       tst_s      r2,r2
   1031e:   20 00 01 00                 bz         1033c <frame_dummy+0x30>

   10322:   cf 72 00 00 00 00           mov_s      r2,0
   10328:   4b 7a                       tst_s      r2,r2
   1032a:   14 00 01 00                 bz         1033c <frame_dummy+0x30>

   1032e:   cf 70 01 00 c8 24           mov_s      r0,0x000124c8
   10334:   04 14 1b 34                 ld.ab      fp,[sp,4]
   10338:   a1 c0                       add_s      sp,sp,4
   1033a:   00 7a                       j_s        [r2]
   1033c:   04 14 1b 34                 ld.ab      fp,[sp,4]
   10340:   e0 7f                       j_s.d [blink] 
   10342:   40 24 1c 31                 add        sp,sp,4
   10346:   e0 78                       nop_s      

00010348 <f2>:
   10348:   f8 1c c8 b6                 st.a       fp,[sp,-8]
   1034c:   0a 23 00 37                 mov        fp,sp
   10350:   a2 c1                       sub_s      sp,sp,8
   10352:   0a d8                       mov_s      r0,10
   10354:   f8 1b 00 b0                 st         r0,[fp,-8]
   10358:   14 d8                       mov_s      r0,20
   1035a:   fc 1b 00 b0                 st         r0,[fp,-4]
   1035e:   f8 13 03 b0                 ld         r3,[fp,-8]
   10362:   fc 13 02 b0                 ld         r2,[fp,-4]
   10366:   5a 63                       add_s      r2,r3,r2
   10368:   48 70                       mov_s      r0,r2
   1036a:   a2 c0                       add_s      sp,sp,8
   1036c:   04 14 1b 34                 ld.ab      fp,[sp,4]
   10370:   e0 7f                       j_s.d [blink] 
   10372:   40 24 1c 31                 add        sp,sp,4
   10376:   e0 78                       nop_s      

00010378 <f1>:
   10378:   f1 c0                       push_s     blink
   1037a:   fc 1c c8 b6                 st.a       fp,[sp,-4]
   1037e:   0a 23 00 37                 mov        fp,sp
   10382:   a2 c1                       sub_s      sp,sp,8
   10384:   00 d8                       mov_s      r0,0
   10386:   fc 1b 00 b0                 st         r0,[fp,-4]
   1038a:   c2 0f cf ff                 bl         10348 <f2>

   1038e:   fc 1b 00 b0                 st         r0,[fp,-4]
   10392:   a2 c0                       add_s      sp,sp,8
   10394:   04 14 1b 34                 ld.ab      fp,[sp,4]
   10398:   00 14 1f 32                 ld.a       blink,[sp,0]
   1039c:   e0 7f                       j_s.d [blink] 
   1039e:   40 24 1c 31                 add        sp,sp,4
   103a2:   e0 78                       nop_s      

000103a4 <main>:
   103a4:   f1 c0                       push_s     blink
   103a6:   fc 1c c8 b6                 st.a       fp,[sp,-4]
   103aa:   0a 23 00 37                 mov        fp,sp
   103ae:   ce 0f cf ff                 bl         10378 <f1>

   103b2:   00 d8                       mov_s      r0,0
   103b4:   04 14 1b 34                 ld.ab      fp,[sp,4]
   103b8:   00 14 1f 32                 ld.a       blink,[sp,0]
   103bc:   e0 7f                       j_s.d [blink] 
   103be:   40 24 1c 31                 add        sp,sp,4
   103c2:   e0 78                       nop_s      

000103c4 <__do_global_ctors_aux>:
   103c4:   f1 c0                       push_s     blink
   103c6:   f8 1c 48 b3                 st.a       r13,[sp,-8]
   103ca:   fc 1c c8 b6                 st.a       fp,[sp,-4]
   103ce:   0a 23 00 37                 mov        fp,sp
   103d2:   00 16 02 70 01 00 b8 24     ld         r2,[0x000124b8]
   103da:   cf 75 01 00 b8 24           mov_s      r13,0x000124b8
   103e0:   19 0a 80 0f ff ff ff ff     breq       r2,-1,103f8 <__do_global_ctors_aux+0x34>

   103e8:   22 20 80 00                 jl         [r2]
   103ec:   fc 15 02 92                 ld.a       r2,[r13,-4]
   103f0:   f9 0a 81 8f ff ff ff ff     brne       r2,-1,103e8 <__do_global_ctors_aux+0x24>

   103f8:   04 14 1b 34                 ld.ab      fp,[sp,4]
   103fc:   02 14 1f 36                 ld.as      blink,[sp,2]
   10400:   00 c5                       ld_s       r13,[sp,0]
   10402:   e0 7f                       j_s.d [blink] 
   10404:   40 24 1c 33                 add        sp,sp,12
Disassembly of section .fini:

00010408 <_fini-0x4>:
   10408:   00 00 00 00                            

0001040c <_fini>:
   1040c:   f1 c0                       push_s     blink
   1040e:   e0 78                       nop_s      
   10410:   b2 0e cf ff                 bl         102c0 <__do_global_dtors_aux>

   10414:   d1 c0                       pop_s      blink
   10416:   e0 7e                       j_s [blink] 
```

希望这可以帮助。

# javascript - 图层中每个多边形的信息窗口

> ID：12949950
> 
> 赞同：0
> 
> 时间：2012-10-18T08:09:09.207
> 
> 标签：javascript, google-maps, google-fusion-tables

通常对于一个层，我们可以在 onclick 事件引发时生成 InfoWindow。但是在这里我在单层中有许多多边形。因此，通过查询中的 where 条件，我们可以获得每个条件并为它们设置样式差异。但这里我需要的是，对于层的每个多边形，必须为 onclick 事件生成一个 InfoWndow。

这是我为图层中的每个多边形设置样式的代码。

```
 var layer =  new google.maps.FusionTablesLayer(
                                    {
                                         query: {
                                                    select: 'geometry',
                                                    from: 'myTableId'
                                                },
                                         styles: [  
                                                    {
                                                        where: "Dist_id in ('0101001') and Insert_date='25/08/2012'",
                                                        polygonOptions: {   strokeColor:"#0071bc",fillColor:"#0000FF",fillOpacity:0.2,strokeWeight:2,clickable:false }
                                                     },
                                                    {
                                                        where: "Dist_id in ('0101002') and Insert_date='25/08/2012'",
                                                        polygonOptions: {   strokeColor:"#0071bc",fillColor:"#FF0000",fillOpacity:0.2,strokeWeight:2,clickable:false }
                                                     },
                                                    {
                                                        where: "Dist_id in ('0101003') and Insert_date='25/08/2012'",
                                                        polygonOptions: {   strokeColor:"#0071bc",fillColor:"#00FF00",fillOpacity:0.2,strokeWeight:2,clickable:false }
                                                     },
                                                    {
                                                        where: "Dist_id in ('0101004') and Insert_date='25/08/2012'",
                                                        polygonOptions: {   strokeColor:"#0071bc",fillColor:"#FF00FF",fillOpacity:0.2,strokeWeight:2,clickable:false }
                                                     },
                                                    {
                                                        where: "Dist_id in ('0101005') and Insert_date='25/08/2012'",
                                                        polygonOptions: {   strokeColor:"#0071bc",fillColor:"#00FFFF",fillOpacity:0.2,strokeWeight:2,clickable:false }
                                                     }
                                                 ],
                                                 map:map                                              
                                    }); 
```

现在我如何为图层的每个多边形生成信息窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:59:45.193

如果您希望多边形可点击，请从选项中删除“可点击：false”。

另一种选择（失去 FusionTablesLayer 基于图块渲染的优势）类似于[此示例](http://www.geocodezip.com/v3_GoogleEx_FusionTables_generic_JSON_linkto.html?lat=37.174668&lng=-38.845970&zoom=2&type=m&tableid=1foc3xO9DyfSIF6ofvN0kp2bxSfSeKog5FbdWdQ&tablequery=SELECT%20%20kml_4326%,%name%20FROM&where=name%20does%20not%20contain%20%27Antarctica%27)，它使用 Fusion Tables API v1.0 查询表并将多边形渲染为原生 Google Maps API v3 多边形。

# java - 只有一个单选按钮

> ID：12949963
> 
> 赞同：0
> 
> 时间：2012-10-18T08:10:02.140
> 
> 标签：java, android

我读过一个例子，如果你使用多个单选按钮，你应该`RadioGroup`像这样使用：

```
<RadioGroup
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

       <RadioButton
           android:id="@+id/radio_pirates"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_marginTop="14dp"
           android:layout_marginLeft="100dp"
           android:onClick="onRadioButtonClicked"
           android:text="@string/attendance"
           android:textSize="8dp"

            />
   <RadioButton
           android:id="@+id/radio_pirates2"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_marginTop="14dp"
           android:layout_marginLeft="100dp"
           android:onClick="onRadioButtonClicked"
           android:text="@string/attendance"
           android:textSize="8dp"

            />
       </RadioGroup> 
```

如果我只有一个单选按钮，我可以删除`<RadioGroup>`还是错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:17:53.280

从[文档](http://developer.android.com/reference/android/widget/RadioButton.html)

> 单选按钮是一个有两种状态的按钮，可以选中或取消选中。当单选按钮未选中时，用户可以按下或单击它来选中它。然而，与 CheckBox 不同的是，单选按钮一旦被选中就不能被用户取消选中。

**然而，与 CheckBox 不同的是，单选按钮一旦被选中就不能被用户取消选中。**

因此，如果您只想提供一个选项按钮来选择用户，请使用`CheckBox`或`ToggleButton`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:17:39.567

是的你可以。
但是，如果有一个单选按钮，那么一旦您选中它，您就可以取消选中它，因为。

```
Intially, all of the radio buttons are unchecked.While it is not possible to
uncheck a particular radio button, the radio group can be cleared to remove the 
checked state. 
```

所以最好使用`Check Box`而不是单选按钮。[例子](http://www.mkyong.com/android/android-checkbox-example/)

# c++ - QTreeWdiget 在特定位置添加子元素

> ID：12949965
> 
> 赞同：3
> 
> 时间：2012-10-18T08:10:04.090
> 
> 标签：c++, qt, qtreewidget, qtreewidgetitem

我正在尝试以一种可以在我想要的位置插入元素的方式构建一棵树。这是我的初始阶段的树：

```
+Project
+--Version 1.0
+--Version 2.0 
```

现在，假设我制作了一个 1.1 版，我想将它添加到 beetween`Version 1.0`和`Version 2.0`. 喜欢：

```
+Project
+--Version 1.0
+--Version 1.1
+--Version 2.0 
```

我尝试使用 insertChild ( [http://doc.qt.digia.com/4.7-snapshot/qtreewidgetitem.html#insertChild](http://doc.qt.digia.com/4.7-snapshot/qtreewidgetitem.html#insertChild) ) 添加它，但该项目没有在树中创建。这是代码：

```
void VersionGuiElements::createGuiElements(QTreeWidgetItem* projectItem, int idxAfter)
{
    QTreeWidgetItem* versionItem = new QTreeWidgetItem(0, QStringList(QString("Version ") + m_version->getVersionText())) ;

    if(idxAfter == -1)
    {
        projectItem->addChild(versionItem);
    }
    else
    {
        projectItem->insertChild(idxAfter, versionItem);
    }
} 
```

但是树中没有插入任何东西......知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:22:32.587

You should point out the parent of tree node when you create it:

```
QTreeWidgetItem* versionItem = new QTreeWidgetItem(projectItem, QStringList(QString("Version ") + m_version->getVersionText())) ; 
```

Then:

```
if(idxAfter == -1)
{
    projectItem->addChild(versionItem);
}
else
{
    projectItem->insertChild(idxAfter, versionItem);
} 
```

# c# - 如何停止/恢复后台工作程序/递归循环？

> ID：12949971
> 
> 赞同：0
> 
> 时间：2012-10-18T08:10:32.633
> 
> 标签：c#

在 form1 的顶部，我添加了：

```
System.Threading.ManualResetEvent _busy = new System.Threading.ManualResetEvent(true); 
```

并且还在 form1 的顶部添加了两个标志：

```
bool pause;
bool resume; 
```

这两个标志在构造函数中都设置为 false。

然后我有一个递归循环的函数：

```
private List<string> test(string url, int levels,DoWorkEventArgs eve)
        {
            if (pause == true)
            {
                _busy.Reset();
            }
            if (resume == true)
            {
                _busy.Set();
            }
            this.Invoke(new MethodInvoker(delegate { label3.Text = label3.Text = (Int32.Parse(label12.Text) + Int32.Parse(label10.Text)).ToString(); }));

            HtmlWeb hw = new HtmlWeb();
            List<string> webSites;
            List<string> csFiles = new List<string>();

            csFiles.Add("temp string to know that something is happening in level = " + levels.ToString());
            csFiles.Add("current site name in this level is : " + url);

            try
            {
                this.Invoke(new MethodInvoker(delegate { ColorText.Texts(richTextBox1, "Loading The Url:   " , Color.Red); }));
                this.Invoke(new MethodInvoker(delegate { ColorText.Texts(richTextBox1, url + "...",Color.Blue); }));
                HtmlAgilityPack.HtmlDocument doc = TimeOut.getHtmlDocumentWebClient(url, false, "", 0, "", "");

                this.Invoke(new MethodInvoker(delegate { ColorText.Texts(richTextBox1, " Done " + Environment.NewLine, Color.Red); }));

                    currentCrawlingSite.Add(url);
                    webSites = getLinks(doc);
                    removeDupes(webSites);
                    removeDuplicates(webSites, currentCrawlingSite);
                    removeDuplicates(webSites, sitesToCrawl);
                    if (removeExt == true)
                    {
                       for (int i = 0; i < webSites.Count; i++)
                       {
                           webSites.Remove(removeExternals(webSites));
                       }
                    }
                    if (downLoadImages == true)
                    {
                        webContent.retrieveImages(url);                     }

                    if (levels > 0)
                        sitesToCrawl.AddRange(webSites
                    this.Invoke(new MethodInvoker(delegate { label7.Text = sitesToCrawl.Count.ToString(); }));
                    this.Invoke(new MethodInvoker(delegate { label12.Text = currentCrawlingSite.Count.ToString(); }));

                    if (levels == 0)
                    {
                        return csFiles;
                    }
                    else
                    {

                        for (int i = 0; i < webSites.Count(); i++)//&& i < 20; i++)                         {

                            string t = webSites[i];
                            if ((t.StartsWith("http://") == true) || (t.StartsWith("https://") == true)) // replace this with future FilterJunkLinks function
                            {
                                csFiles.AddRange(test(t, levels - 1, eve));                                
                            }

                        }
                        return csFiles;
                    }

            }
            catch
            {
                failedUrls++;
                this.Invoke(new MethodInvoker(delegate { label10.Text = failedUrls.ToString(); }));
                this.Invoke(new MethodInvoker(delegate { ColorText.Texts(richTextBox1, " Failed " + Environment.NewLine, Color.Green); }));
                return csFiles;
            }

        } 
```

在后台工作人员 DoWork 事件中，我添加了以下内容：

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            _busy.WaitOne();
                this.Invoke(new MethodInvoker(delegate { label2.Text = "Website To Crawl: "; }));
                this.Invoke(new MethodInvoker(delegate { label4.Text = mainUrl; }));
                test(mainUrl, levelsToCrawl, e);
        } 
```

然后我有两个按钮单击事件，一个用于暂停，一个用于恢复：

```
private void button4_Click(object sender, EventArgs e)
        {
            pause = true;
        }

        private void button5_Click(object sender, EventArgs e)
        {
            resume = true;
        } 
```

但是当我点击按钮暂停时，恢复按钮上也没有任何反应。这个过程还在继续。我也尝试在每个按钮中不使用标志来制作 _busy.Reset(); 和 _busy.Set(); 但什么都没有。

我想要的是以某种方式暂停递归循环并恢复它。我不确定它是否连接到后台工作人员，但想法是暂停并恢复该过程。

我该怎么办 ？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:24:47.710

```
 _busy.WaitOne(); 
```

这就是会导致工人暂停的语句。但是，它只出现在 DoWork() 的开头，该事件永远不会被重置。您需要将其移动到循环内。

第二个你还没有遇到过的错误是，一旦你暂停，你将永远无法再次恢复。因为工人不再运行并且不会关注*resume*变量。摆脱这些变量，您的 Click 事件应该直接调用 Set() 和 Reset() 方法。

# database - ERD 包括超类型、子类型数据库

> ID：12949973
> 
> 赞同：0
> 
> 时间：2012-10-18T08:11:13.927
> 
> 标签：database, erd, subtype, supertype

我正在为数据库绘制 ERD，并想知道您是否需要在 ERD 中包含超类型和子类型。如果是，如何表示。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:13:49.377

谷歌搜索“ER 专业化”。这是 ER 文献中用于子类型的术语。你应该有一些方法来绘制它，使用“Is-a”三角形连接器。一些教程将它放在“扩展 ER 功能”中。

# c# - 是否可以在配置中覆盖硬编码的事务超时？

> ID：12949980
> 
> 赞同：2
> 
> 时间：2012-10-18T08:11:38.713
> 
> 标签：c#, .net, transactions, transactionscope

在我们的软件中，有一个硬编码（在工作流中的 C# 代码中表示）事务超时已在事务范围中实现。有没有办法在**不**更改代码的情况下覆盖（增加！）设置？

.Net 3.5
WF 3.5

我知道有默认和最大事务超时设置，但遗憾的是它们在这里无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:29:01.660

修改您的代码以使用配置文件中的设置。之后，只需更改配置文件中的值，代码将自动读取新值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:35:31.197

没有可能这样做。

# java - 如何使用堆转储计算堆碎片统计信息

> ID：12949983
> 
> 赞同：0
> 
> 时间：2012-10-18T08:11:52.230
> 
> 标签：java, garbage-collection, heap-memory, fragmentation

有谁知道是否有任何工具可以使用堆转储计算堆碎片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:25:09.233

我有一个可视化堆的工具（http://bobah.net/d4d/tools/cpp-heapmap），但它使用 {op;address;size} 三元组列表，而不是原始堆转储。您可以使用它来直观地估计堆的糟糕程度。在某些情况下，这已经足够了。它的 malloc 拦截器显然不适合 Java 应用程序，但 UI 并不关心数字来自哪里，而是会显示来自任何来源的数字。

但是让我们假设我们能够从转储中构建一个堆映射（我相信有人会在这里准确地回答）。问题的主要部分是计算碎片曲线 F(s), s - 目标分配大小。F(s) - (total_free_space/s) 与考虑特定堆布局实际可以分配的大小为 s 的块数之比。

一旦 F(s) 建立起来，就可以在从 1 到 S（总堆大小）的区间内对其进行积分，以获得表示堆碎片或使用效率的单个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:26:16.733

[IBM 垃圾收集和内存分析器](http://www.ibm.com/developerworks/java/jdk/tools/gcmv/)非常适合这类事情，而且是免费的。

# objective-c - NSWindow 附加到光标

> ID：12949985
> 
> 赞同：1
> 
> 时间：2012-10-18T08:12:01.480
> 
> 标签：objective-c, xcode, macos, cocoa, nscursor

我想制作一个自定义面板，显示当前光标位置的缩放。就像“Sip”一样。我在网上搜索了示例，但没有找到任何具体的内容。

我找到了`NSEvent`'s`addGlobalMonitorForEventsMatchingMask:handler:`和`addLocalMonitorForEventsMatchingMask:handler:`方法。现在我可以设置窗口的框架原点。但我不确定这是否真的是正确的解决方案。

有一个更好的方法吗？谁能指出我一些示例代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T03:15:19.187

基本上就是这样。

您还可以使用 Quartz Event Tap 函数系列 CGEventTap，因为它会在 Mac 应用程序切换器和 Exposé 或 Mission Control 或 Dashboard 等事件期间提供更多响应。但是，设置起来有点困难，并且使用 C 回调方法，在某些事情上使用起来有点困难。

Quartz Event Taps 在其他方面是一样的，但可能会稍微快一些。

如果您使用它，请务必使用该功能`CGPoint CGEventGetUnflippedLocation(CGEventRef aCGEvent)`

如： `CGPoint eventLocation = CGEventGetUnflippedLocation(aCGEvent);`

这将确保您的 y 坐标像 Cocoa 的其余部分一样位于左下角。否则使用它的兄弟姐妹`CGEventGetLocation()`，由于一些奇怪的命名原因并不表示它返回翻转坐标。（但文档确实说明了这一点）

# objective-c - kCGImageAlphaPremultipliedFirst 和 kCGImageAlphaFirst

> ID：12949986
> 
> 赞同：5
> 
> 时间：2012-10-18T08:12:05.470
> 
> 标签：objective-c, bitmap, quartz-graphics, pixel, cgcontext

你能解释一下`kCGImageAlphaPremultipliedFirst`和之间的区别`kCGImageAlphaFirst`吗？`Premultiplied`在实践中意味着什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T08:18:07.240

简而言之，预乘意味着当表示一个不透明的像素时，alpha 值也会影响像素的颜色分量值。

来自 Quartz 2D 绘图指南：

> 对于具有 alpha 分量的位图，颜色分量是否已经乘以 alpha 值。预乘 alpha 描述了其分量已经乘以 alpha 值的源颜色。预乘通过消除每个颜色分量的额外乘法运算来加速图像的渲染。例如，在 RGB 颜色空间中，使用预乘 alpha 渲染图像会消除图像中每个像素的三个乘法运算（红色乘 alpha、绿色乘 alpha 和蓝色乘 alpha）。

顺便说一句，预乘可能是 API 会强制您使用的，因为这是 Quartz 的偏好。幸运的是，转换并不可怕（有损 OTOH……）。

* * *

解释这一点的最短方法是在`float`组件中，使用 range `[0...1]`。

如果我们的 RGBA 输入表示是：

```
typedef struct t_rgba { float r,g,b,a; } t_rgba;
const t_rgba rgba = { 0.5, 0.5, 0.5, 0.5 }; 
```

然后预乘它：

```
t_rgba rgba_PreMul = rgba;
rgba_PreMul.r *= rgba_PreMul.a;
rgba_PreMul.g *= rgba_PreMul.a;
rgba_PreMul.b *= rgba_PreMul.a; 
```

然后去预乘它：

```
t_rgba rgba_DePreMul = rgba_PreMul;
if (0.0 < rgba_DePreMul.a && 1.0 > rgba_DePreMul.a) {
  const float ialpha = 1.0/rgba_DePreMul.a;
  rgba_DePreMul.r *= ialpha;
  rgba_DePreMul.g *= ialpha;
  rgba_DePreMul.b *= ialpha;
} 
```

你可能也想要一些饱和度。

现在这是基本形式，可以重新用于其他数字表示。请注意，这些转换*是有损的*。同样，注意不要在需要常规位图的地方传递预乘位图，反之亦然。

# sed - Rearrangement rows to columns on linux

> ID：12949995
> 
> 赞同：0
> 
> 时间：2012-10-18T08:12:31.797
> 
> 标签：sed, tr

I want that rows to rearrangement to columns with spaces between the strings.

```
q9I6OEFg003411
q9I5IHv5006818
q9I6Gi6P024439
q9I5RoA0019541

```

Expected view:

```
q9I6OEFg003411 q9I5IHv5006818 q9I6Gi6P024439 q9I5RoA0019541

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T08:15:54.440

You can use `tr` to translate `<newline>` to `<space>`:

```
tr '\n' ' ' < file 
```

* * *

Also in `sed`:

```
sed -n '1h;1!H;${g;s/\n/ /g;p}' file 
```

* * *

In `awk`:

```
awk -vORS=' ' 1 file 
```

* * *

If file is small, you can use `cat`:

```
echo `cat file` 
```

* * *

If you know `vim`:

```
:%s/\n/ / 
```

* * *

*maybe more ...*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:16:22.860

Using paste command:

```
paste -sd" " file 
```

d option to set delimiter.

# regex - 如何在字符串中捕获罗马数字？

> ID：12949997
> 
> 赞同：6
> 
> 时间：2012-10-18T08:12:40.913
> 
> 标签：regex, perl

我想在字符串中捕获罗马数字（低于 80 的数字就足够了）。我在[How do you match only valid roman numbers with a regular expression? 中找到了很好的基础？](https://stackoverflow.com/questions/267399/how-do-you-match-only-valid-roman-numerals-with-a-regular-expression). 问题是：它处理整个字符串。我还没有找到如何检测字符串中的罗马数字的解决方案，因为没有任何强制性，每个组都可能是可选的。到目前为止，我尝试过这样的事情：

```
my $x = ' some text I-LXIII iv more ';

if (  $x =~  s/\b(
                    (
                        (XC|XL|L?X{0,3}) # first group 10-90
                    |
                        (IX|IV|V?I{0,3}) # second group 1-9
                    )+
            )
        \b/>$1</xgi ) { # mark every occurrence
    say $x;
}

__END__
 ><some>< ><text>< ><>I<><-><>LXIII<>< ><>iv<>< ><more>< 
 desired output:
  some text >I<->LXIII< >iv< more 
```

所以，这个也可以自己捕获单词边界，因为所有组都是可选的。如何完成？如何使这两组中的一组成为强制性的，而无法分辨哪一组是强制性的？也欢迎其他捕捉罗马人的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T09:41:38.107

您可以使用[Roman](http://search.cpan.org/~chorny/Roman-1.23/lib/Roman.pm) CPAN 模块

```
use Roman;

my $x = ' some text I-LXIII VII XCVI IIIXII iv more ';
if (  $x =~  
    s/\b
    (
        [IVXLC]+
    )
    \b
    /isroman($1) ? ">$1<" : $1/exgi ) {
    say $x;
} 
```

**输出：**

```
some text >I<->LXIII< >VII< >XCVI< IIIXII >iv< more 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T11:53:32.650

这就是 Perl 让我们失望的地方，因为它缺少其他地方可用的`\<`和（开始和结束词边界）结构。即使不消耗任何目标字符串，`\>`类似的模式也会匹配，因为第二个模式会很高兴地第二次匹配*开始*的单词边界。`\b...\b``...``\b`

 *然而，结束词边界只是`(?<=\w)(?!\w)`为了我们可以使用它。

这个程序会做你想做的事。它对包含在单词边界中的一串潜在的罗马字符进行前瞻（所以我们必须在*开始*的单词边界处），然后检查后面没有单词字符的*合法*罗马数字（所以现在我们' re 在*结束*词边界）。

请注意，我已经颠倒了你的`>...<`标记，因为它们让我感到困惑。

```
use strict;
use warnings;

use feature 'say';

my $x = ' some text I-LXIII iv more ';

if ( $x =~ s{
    (?= \b [CLXVI]+ \b )
    (
      (?:XC|XL|L?X{0,3})?
      (?:IX|IV|V?I{0,3})?
    )
    (?!\w)
    }
    {<$1>}xgi ) {

    say $x;
} 
```

**输出**

```
some text <I>-<LXIII> <iv> more 
```*

# c - 在 linux 中调用 pthread_create() 会导致“分段错误”

> ID：12949999
> 
> 赞同：0
> 
> 时间：2012-10-18T08:12:45.807
> 
> 标签：c, linux

每次我调用方法'pthread_create'时，编译代码后运行它，总是导致错误'Segmentation fault'，我的代码如下所示，任何人都可以帮助我，非常感谢！

```
int iLogThreadID;
pthread_t dwLogThread;
iLogThreadID = pthread_create(&dwLogThread, NULL, &logInformation, NULL); 
```

方法“logInformation”如下所示

```
void* logInformation(void * info)
{
    char logInfoString[SINGLE_LOG_SIZE];
    memset(logInfoString,0,SINGLE_LOG_SIZE);
    if(gLogFile == NULL)
    {
        return EXEC_ERROR;
    }
    while(g_logThreadStatus == LOG_THREAD_RUNNING)
    {
        if(g_logBufferStartIndex == g_logBufferEndIndex)
        {
            sleep(10 );
            continue;
        }
        if(popLogBuffer(logInfoString) == EXEC_ERROR)
            continue;
        fputs(logInfoString, gLogFile);
        memset(logInfoString,0,SINGLE_LOG_SIZE);
    }
    g_logThreadStatus = LOG_THREAD_TERMINATED;
    return EXEC_OK;
} 
```

生成文件

```
CXX= /usr/bin/gcc
LIBDIR=../coapLib
CFLAGS= -I${LIBDIR}
CXXFLAGS= ${CFLAGS} -g
LIBS= -lm -pthread -nostartfiles
OBJ = coapClient.o Block.o CoapMsg.o CoapObserve.o CoapOpt.o Common.o Config.o    IfMatch.o IO.o link.o md5.o cHashtable.o cJSON.o Log.o MsgHandle.o Network.o URIdatabase.o    messagePrint.o ConMsgBase.o ClientMsgHandle.o ClientInterpreter.o 
coapClient: ${OBJ}
    ${CXX} $(CXXFLAGS) -o coapClient ${OBJ} ${LIBS}
coapClient.o: coapClient.c
        ${CXX} ${CXXFLAGS} -c coapClient.c
...
clean:
rm -f *.o coapClient 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:18:12.687

一个可能的原因（特别是如果您`sizeof(void*)`的`sizeof(int)`系统上不同）是线程启动例程的签名不正确。它应该返回一个`void*`，而不是一个`int`。

从[man pthread_create](http://linux.die.net/man/3/pthread_create)：

```
int pthread_create(pthread_t *thread, const pthread_attr_t *attr,
                   void *(*start_routine) (void *), void *arg); 
```

代码中也可能存在竞争条件 if `popLogBuffer()`uses`g_logBufferStartIndex`并且另一个线程正在修改它，因为它可能在`if`条件检查和`popLogBuffer()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T08:20:26.340

该`logInformation`函数有一个错误的原型：它应该是`void *logInformation(void *info)`.

你也应该通过它如下：

```
int ecode = pthread_create(&dwLogThread, NULL, logInformation, NULL); 
```

最后，请注意`pthread_create`返回一个错误代码，即 0 表示一切正常。