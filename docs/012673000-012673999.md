# StackOverflow 问答 12673000-12673999

# c# - 控制台应用程序中强大的异常处理

> ID：12673000
> 
> 赞同：0
> 
> 时间：2012-10-01T12:10:35.880
> 
> 标签：c#, exception-handling, try-catch, console-application

如果我将`AppDomain.CurrentDomain.UnhandledException`代码放在控制台应用程序中，而不是通常的 try-catch 以捕获未处理的异常。这意味着，是否确定任何异常都不会强制应用程序在两者之间终止？如果不是，什么类型的例外不在它的范围内？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:13:37.907

不会。这意味着您将有机会在应用程序崩溃*之前*运行一些代码，但您将无法防止崩溃。[文档](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)：

> 此事件提供未捕获异常的通知。它允许应用程序在系统默认处理程序向用户报告异常并终止应用程序之前记录有关异常的信息。

*试图通过盲目地捕获所有*异常来使应用程序“防崩溃”是徒劳的：既然你真的不知道出了什么问题，你怎么知道程序可以继续运行呢？

从理论上讲，您在事件处理程序中所做的*任何事情*都可能以任何可能的方式出错（因为抛出了未处理的异常，而您不知道它是什么，它可能是任何事情）。所以不仅不可能防止应用程序崩溃，而且你还应该*非常*小心你在处理程序中所做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:13:44.220

不，应用程序无论如何都会被终止，但它让您有机会在应用程序退出之前正确记录异常。见这里：http: [//msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)

> 它允许应用程序在系统默认处理程序向用户报告异常并终止应用程序之前记录有关异常的信息。

# c# - 使用套接字c#通过代理将请求从客户端中继到服务器

> ID：12673001
> 
> 赞同：2
> 
> 时间：2012-10-01T12:10:36.793
> 
> 标签：c#, sockets, tcp, proxy

我有自定义 tcp 服务器在端口 5888（虚拟端口）上侦听。代理服务器侦听传入连接。当代理收到 HTTP 请求时，它应该将相同的请求中继到不同的服务器。

例如：

代理接收：[http](http://proxyserver.com/mypage.html) ://proxyserver.com/mypage.html 代理应中继：http: [//MainServer.com/mypage.html](http://MainServer.com/mypage.html)

来自主服务器的响应应直接发送到请求客户端。

在将新的 HTTP 请求中继到主服务器之前，我使用套接字来接受连接并解析原始 HTTP 请求。这变得太复杂了，因为我必须将原始 HTTP 请求发送到主服务器，获取响应并将其发送到客户端机器。代理基本上成为中间人。我希望代理仅用于通信的一侧，即将主机地址更改为 MainServer，然后主服务器应负责将响应发送给请求客户端。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:26:57.573

HTTP 通过从客户端发起到服务器的 TCP 连接工作。在存在代理的情况下，您至少需要两个连接——一个从客户端到代理，一个从代理到服务器。这两个连接在某种意义上是“独立的”，它们都传输标准的 HTTP 请求和响应。此处的代理充当终端服务器的客户端。

您想要的至少涉及三个 TCP 连接，并且需要在与发起 HTTP 请求的连接不同的连接上发送 HTTP 响应。这超出了 HTTP 本身的范围——客户端不知道它在其他地方需要第二个连接，以及如何将一个连接上的请求与另一个连接上的响应相匹配。您可以在 HTTP 中做的最好的事情是重定向到不同的服务器，例如，使用特殊生成的 URL 或其他东西。

请记住，HTTP 响应必须来自与原始请求相同的 TCP 连接。

# c - fseek 在 Linux 中不起作用

> ID：12673002
> 
> 赞同：0
> 
> 时间：2012-10-01T12:10:38.110
> 
> 标签：c, linux, io, inputstream, fseek

> **可能重复：**
> [将 fseek 与指向标准输入的文件指针一起使用](https://stackoverflow.com/questions/4917801/using-fseek-with-a-file-pointer-that-points-to-stdin)

我有一个使用*fseek*清除输入缓冲区的程序，它在 Windows 中运行良好，在 Linux 中 buf 失败。请帮我 。

```
#include <stdio.h>
#define NO_USE_FSEEK    0

int main(int argc, char *argv[])
{
   char ch = 'a';
   int i = 1;
   long int fpos = -1;

   while(1)
   {
      printf("loop : %d\n", i);

      fseek(stdin, 0L, SEEK_END); /*works in Windows with MinGW, fails in Linux*/
      fpos = ftell(stdin);
      if (-1 == fpos)
      {
         perror("ftell failure:");   /*perror tells it is Illegal Seek*/
         printf("\n");
      }
      else
      {
         printf("positon indicator:%ld\n", fpos);
      }
      scanf("%c", &ch);
      printf("%d : %c\n", (int)ch, ch);
      i++;

   }

   return 0;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:29:06.477

这不是在 Windows 或 Linux 上“清除输入缓冲区”的公认方式。

在 Windows 上，使用标准 C 函数的 MSVCRT 版本，有一个扩展允许`fflush(stdin)`实现此目的。请注意，在其他系统上，这是未定义的行为。

Linux 有一个`fpurge`以相同目的调用的函数。

但是，我不得不问，*为什么*要清除输入缓冲区？如果这是人们对 scanf 没有读到行尾的常见抱怨，那么最好编写代码来实际读取并丢弃行的其余部分（循环`getc`直到读取 a `'\n'`，例如，如 pmg 的回答） . 当用于重定向文件或管道而不是正常的控制台/tty 输入时，清除输入缓冲区将倾向于跳过大量数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:20:23.797

测试from的返回值`fseek()`（其实就是测试所有`<stdio.h>`输入函数的返回值）。

```
if (fseek(stdin, 0, SEEK_END) < 0) { perror("fseek"); exit(EXIT_FAILURE); } 
```

使用成语

```
while ((ch = getchar()) != '\n' && ch != EOF) /* void */;
/* if (ch == EOF)
**     call feof(stdin) or ferror(stdin) if needed; */ 
```

忽略输入缓冲区中的所有字符，直到下一个 ENTER（或文件结尾或输入错误）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T12:17:42.953

我猜 fseek 不适用于标准输入。因为标准输入的大小是未知的。

# java - 无法将数据附加到现有的 Excel

> ID：12673004
> 
> 赞同：0
> 
> 时间：2012-10-01T12:10:51.543
> 
> 标签：java, excel, apache-poi

我无法将数据附加到现有的 Excel 工作表中。
这是我的代码：

```
fis = new FileInputStream(file);
fs = new POIFSFileSystem(fis);
HSSFWorkbook wb1 = new HSSFWorkbook(fs);
sheet1 = wb1.getSheet("sheet1");
System.out.println("Last Row No.: " + sheet1.getLastRowNum());
row = sheet1.createRow(sheet1.getLastRowNum()+ 1);
System.out.println("Last Row No.: " + sheet1.getLastRowNum());

row.createCell(0).setCellValue(2);          
row.createCell(1).setCellValue(2.2);
row.createCell(2).setCellValue(true);   

fos = new FileOutputStream(file,true);
wb1.write(fos);
fos.flush();
fos.close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T13:11:04.823

excel 文件格式不是可附加格式。要写出更改，您必须更新整个文件。

只需将您的 FileOutputStream 更改为替换而不是追加，然后您的代码应该按照您的预期运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T08:59:26.243

尝试使用此代码附加

```
fis = new FileInputStream(file);
Workbook wb=WorkbookFactory.create(fis);
sheet1 = wb1.getSheet("sheet1");
System.out.println("Last Row No.: " + sheet1.getLastRowNum());
row = sheet1.createRow(sheet1.getLastRowNum()+ 1);
System.out.println("Last Row No.: " + sheet1.getLastRowNum());

row.createCell(0).setCellValue(2);          
row.createCell(1).setCellValue(2.2);
row.createCell(2).setCellValue(true);   

fos = new FileOutputStream(file,true);
wb1.write(fos);
fos.flush();
fos.close(); 
```

# java - 导入 freemarker 宏

> ID：12673005
> 
> 赞同：1
> 
> 时间：2012-10-01T12:10:54.070
> 
> 标签：java, import, macros, freemarker

我的`macros.txt`文件是

```
<#macro macro1>
Helloworld.
</#macro> 
```

我有另一个文件`testMacro.txt`。我想在文件中使用这个宏`testMacro.txt`。我试过以下

```
<#import "./macros.txt" as my>
<@my.macro1 /> 
```

但它似乎不起作用。

在我使用模板文件的 java 文件中，我有（在我的 MacroWorking.java 中）

```
template = new Template(null,new FileReader("testMacro.txt"),new configuration()); 
```

例外是。

```
Exception in thread "main" java.lang.NullPointerException
at freemarker.core.LibraryLoad.<init>(LibraryLoad.java:82)
at freemarker.core.FMParser.Import(FMParser.java:1727)
at freemarker.core.FMParser.FreemarkerDirective(FMParser.java:2389)
at freemarker.core.FMParser.Content(FMParser.java:2618)
at freemarker.core.FMParser.OptionalBlock(FMParser.java:2786)
at freemarker.core.FMParser.Root(FMParser.java:2958)
at freemarker.template.Template.<init>(Template.java:149)
at freemarker.template.Template.<init>(Template.java:172)
at msjava.hdom.examples.DbQuery.main(MacroWorking.java:24) 
```

MacroWorking.java 的第 24 行是上面给出的。

编辑：使用相同的代码，但我`testMacro.txt`只有文本`HELLOWORLD`，即没有导入语句，那么它工作正常。我该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:46:35.947

这些模板没有问题，问题在于您使用 FreeMarker 的 Java API 的方式。

当`#import`尝试解析`./macros.txt`路径时，它会尝试相对于当前模板的路径来解析它，但是由于模板是从 a 加载的`Reader`并且您已`null`作为模板名称传递（与模板路径相同），因此它将遇到NPE 情况。这是一条不正确的错误消息，但它无论如何都无法解析该路径，因为它不知道当前模板来自何处（请记住，您只`Reader`向 FreeMarker 提供了一个）。正确的方法是：

```
Configuration cfg = new Configuration();
cfg.setDirectoryForTemplateLoading(new File("/where/you/store/the/templates"));

Template template = cfg.getTemplate("testMacro.txt"); 
```

现在 FreeMarker 将模板的名称设置为`testMacro.txt`并且还负责加载和缓存它。如果您仍然需要直接从 a 加载模板`Reader`，您可以这样做：

```
Template template = new Template("testMacro.txt", new FileReader(...), cfg); 
```

请注意非空模板名称。这是否真实并不重要，但它将用于解析该模板中的相对路径。另请注意，必须在 中正确设置模板加载器`Configuration`，因为 FreeMarker 使用虚拟路径。

# magento - 从 pdf 发票 (magento) 中的捆绑产品中删除商品价格

> ID：12673007
> 
> 赞同：1
> 
> 时间：2012-10-01T12:11:01.417
> 
> 标签：magento, pdf

在捆绑产品的每件商品之后，我在 Magento 的 pdf 发票中得到价格，在我的情况下为 0.00 美元，我该如何删除它？我发现产品是由 $this->_drawItem($item, $page, $order); 写的 在发票.php

如何从我的 pdf 发票中删除 0.00 美元？

太感谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T00:13:21.887

配置中定义的每种产品类型的渲染器。默认渲染器和分组产品类型定义在`app/code/core/Mage/Sales/etc/config.xml`：

```
<pdf>
    <invoice>
        <default>sales/order_pdf_items_invoice_default</default>
        <grouped>sales/order_pdf_items_invoice_grouped</grouped>
    </invoice>
    ...
</pdf> 
```

对于捆绑产品类型`app/code/core/Mage/Bundle/etc/config.xml`：

```
<pdf>
    <invoice>
        <bundle>bundle/sales_order_pdf_items_invoice</bundle>
    </invoice>
    ...
</pdf> 
```

对应的模型是`Mage_Bundle_Model_Sales_Order_Pdf_Items_Invoice`

您可以在*本地*命名空间中创建自己的渲染器扩展此模型，复制并更改`draw()`方法并在配置文件中定义此渲染器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T04:52:39.727

您需要查看 Mage_Bundle_Block_Catalog_Product_View_Type_Bundle_Option 并修改 getPrice 函数，但要正确执行此操作需要重写类，这完全是另一个主题。重写的一个很好的起点是这样的参考：[http ://codemagento.com/2011/02/rewriting-a-block-class/](http://codemagento.com/2011/02/rewriting-a-block-class/)

# nhibernate - 在 HasManyToMany 中删除

> ID：12673010
> 
> 赞同：2
> 
> 时间：2012-10-01T12:11:11.057
> 
> 标签：nhibernate, orm, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

我有三个表 - 1\. Anomaly 2\. Markup 3\. Anomaly_Markup

映射 -

```
 public AnomalyMap()
    {
        Table("anomaly");

        Id(x => x.Id).Column("ID").CustomType("decimal");

        HasManyToMany<DMMarkupData>(x => x.DMMarkupData)
            .Table("anomaly_markup")
            .ParentKeyColumn("ANOMALY_ID")
            .ChildKeyColumn("MARK_UP_ID")
            .Cascade.All()
            .LazyLoad();
    }

    public MarkupDataMap()
    {
        Table("markup");
        Id(x => x.Id).Column("ID");
    } 
```

健康）状况 ：

1.  通过 Anomaly 保存数据 - Anomaly 包含 MarkupData。它保存数据。它对我有用。
2.  删除标记 - 应该从地图表和标记数据中删除关系。我正面临这个问题。

任何人都帮我找出解决方案，如何删除标记数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:08:13.207

从您发布的内容来看，您似乎没有在 DMMarkupData -> Anomaly 上定义关系，因此 NHibernate 不会知道从 anomaly_markup 表中删除 MarkupData 条目（尽管存在反向关系）。您可以使用数据库级级联解决它，该级联在删除 MarkupData 时删除 anomaly_markup 中的条目，或者您可以在代码和 NHibernate 中映射关系，然后 NHibernate 将为您执行级联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:22:20.787

我看不到 MarkUpData 与 Anomaly 的关系。必须有相同的关系，您应该在映射中使用 Inverse 属性指定对级联操作的控制。您可以参考：[如何在 Fluent NHibernate 中将“级联删除”选项设置为“设置 Null”？](https://stackoverflow.com/questions/8345893/how-to-set-cascade-delete-option-to-set-null-in-fluent-nhibernate)

要删除 DMMarkupData，只需从集合中删除对象并调用 Save Anomaly。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T09:36:41.410

NHibernate 不管理对象图，它只持久化它。删除列表中的项目是**业务逻辑的责任**！

（所有带有触发器和解决方法的技巧都会导致事务中的不一致和副作用，从而导致更改。从持久性无知的角度来看，不推荐这样做。我只会在遇到无法解决的性能问题时这样做用另一种方式解决。）

您可以通过使用**组件**来简化它。前提是

*   您没有从其他地方引用*相同的标记*
*   您不需要查询与异常无关的标记
*   标记永远不会存在于异常之外

考虑到所有这些，使用组件要容易得多。（我不知道它是如何用流利的方式调用的，但在 xml 映射中它被称为“复合元素”）。

使用组件时，不需要从数据库中删除标记。您只需将其从它所在的列表中删除即可。

# android - foo.setVisibility(View.GONE) 和 parent.removeView(foo) 之间的区别

> ID：12673017
> 
> 赞同：11
> 
> 时间：2012-10-01T12:11:22.817
> 
> 标签：android, android-layout, memory-management, android-view

`foo.setVisibility(View.GONE)`如果 foo 是一个视图，和有什么区别`fooParent.removeView(foo)`？我对两个语句之前和之后视图的内存消耗特别感兴趣。

可见性设置为 GONE 的视图是否会消耗内存？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T12:13:23.990

如果您需要删除它们然后再次显示它们，最好将可见性设置为消失，然后再次更改回可见。

另一方面，如果您不需要它们再次可见，只需将它们删除即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:25:40.780

**假设**，

> 如果您需要在选择特定航班后删除所有可用的飞行选项。然后使用 fooParent.removeView(foo)。

或者，

> 如果您需要选择特定航班，所有飞行选项都会消失，取消选择飞行选项会再次显示所有可用选项，然后使用 foo.setVisibility(View.GONE) 和 foo.setVisibility(View.VISIBLE)

```
setVisibility(View.VISIBLE) = setVisibility(0)
setVisibility(View.GONE) = setVisibility(8)
setVisibility(View.INVISIBLE ) = setVisibility(4) 
```

# java - 在 Android 中用 strings.xml 编写

> ID：12673029
> 
> 赞同：0
> 
> 时间：2012-10-01T12:12:08.993
> 
> 标签：java, android, xml, string, xml-serialization

我正在开发一个 android 应用程序，在该应用程序中我从服务器以 JSON 格式获得响应。我想将键值对存储在 strings.xml 中。怎么做？JSON 响应如下。

```
 {
"ResourceStrings": [
    {
        "Key": "AccountNumber",
        "Value": "Account Number"
    },
    {
        "Key": "AccountPassword",
        "Value": "Account Password"
    },
    {
        "Key": "AccountSettings",
        "Value": "Account"
    },
    {
        "Key": "AccountSettings.Load.InfoMessage",
        "Value": "The Account Number and Password only needs to be set one time.  \r\n\r\nIf you do not know the Account information please contact you system administrator or your DataXchange reseller."
    },
    {
        "Key": "Add",
        "Value": "Setup"
    },
    {
        "Key": "AddandModifytheScreens",
        "Value": "Add and Modify the Screens"
    },
    {
        "Key": "AddButton",
        "Value": "Add"
    },
    {
        "Key": "AddButtonClick.InfoMessage",
        "Value": "Enter the new information and press the Enter button to save the changes.\r\n\r\nOr, press the Cancel button to discard the new information."
    },
    {
        "Key": "AddCommunication",
        "Value": "Add Communication"
    },
    {
        "Key": "AdvancedSettings",
        "Value": "Advanced Settings"
    }
]
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T12:14:04.787

您不能在运行时的 strings.xml 中写入任何内容。相反，您可以写入共享首选项、数据库或内部/外部存储中的文件。所有这些方式都列在[Android 开发者网站上](http://developer.android.com/intl/ru/guide/topics/data/data-storage.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:16:15.273

正如[@ingsaurabh](https://stackoverflow.com/a/5233098/1265724)所说

无法以编程方式在 string.xml 中编写任何内容，但可以通过 SharedPreferences [http://developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)来完成。

但是有更多的价值才能更好地维护数据库

# php - php中用户输入的确认消息

> ID：12673034
> 
> 赞同：0
> 
> 时间：2012-10-01T12:12:34.860
> 
> 标签：php, javascript

我对以下代码有疑问。我对插入和更新都有一个功能。根据行数，将执行每个函数。我想在执行操作之前提供一个确认框。在取消消息时，它不应该执行该功能。我怎样才能做到这一点？
以下是代码：

```
if (isset($_POST['Save']))

{

$query = "SELECT * FROM `table_name` WHERE `submission_id` = '$submission_id'";

$sqlsearch = mysql_query($query);

$resultcount = mysql_num_rows($sqlsearch);

if ($resultcount > 0) 
{
mysql_query("UPDATE `table_name` SET 
    `name` = '$name',
    `email` = '$email',
    `phone` = '$phonenumber',
    `subject` = '$subject',
    `message` = '$message' 
    WHERE `submission_id` = '$submission_id'") or die(mysql_error());
} 
else 
{
mysql_query("INSERT INTO `table_name` (submission_id, formID, IP, 
    name, email, phone, subject, message) 
    VALUES ('$submission_id', '$formID', '$ip', 
    '$name', '$email', '$phonenumber', '$subject', '$message') ") or die(mysql_error());
        }
    }
?>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:22:17.943

在表单操作上尝试 javascript`confirm`函数`onsubmit`

```
var conf=confirm('Are You Sure You Want to Add/Edit?');
if(conf){
 return true; //perform the task
}else{
  return false; // Cancel the task
} 
```

**更新**：

在表单中有一个隐藏值，如果设置了 id，则调用 js 操作，类似这样

```
<input type="hidden" id="user_id" value="<?php echo $user_id;?>" /> 
```

然后，

```
var user_id= $('#user_id').val();
if(user_id) {
  var conf=confirm('Are You Sure You Want to Update?');
    if(conf){
     return true; //perform the task
    }else{
      return false; // Cancel the task
    }
}else{
//your action
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:22:35.867

改变这个：

```
$resultcount = mysql_numrows($sqlsearch); 
```

对此：

```
$resultcount = mysql_num_rows($sqlsearch); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T12:28:42.457

使确认框显示“保存按钮”的 onClick 事件：

```
<input type="submit" name="save" onclick="return confirm('Are you sure you to....?')"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T12:29:04.133

您可以向表单上的 onsubmit 属性添加验证。（点击no时表单不会提交）

```
<form name="example" action="saver.php" onsubmit="return confirm('Confirmation Message');">
<!-- Inputs / Elements -->
</form> 
```

关于您的其他查询（将您的 Javascript 结果传递给您的 PHP 文件）：

如果您想要用户选择的值，您可以插入一个带有确认框状态的隐藏字段。例如

```
<form name="example" action="saver.php" onsubmit="return updateExecuted();">
<input type="hidden" id="confirmationStatus" name="confirmationStatus" />
<!-- Inputs / Elements -->
</form>

<script type="text/javascript">
    function updateExecuted(){
       var con=confirm('Confirmation question');
       if(con){
          document.getElementById('confirmationStatus').value = "yes";
       }
       else{
          document.getElementById('confirmationStatus').value = "no";
          //See comments below regarding - return false;
       }
       return true;
    }
</script> 
```

这是一个如何将 javascript 确认结果变量传递到 php 文件的示例。`$_POST['confirmationStatus']`您可以通过引用值来检查 php 文件中此变量的状态。

我有点着急，但我希望这会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T12:32:46.953

只需将其添加到您的表单中

```
onsubmit="return confirm('Your Confirmation Message');"> 
```

在你的情况下

```
<input type="submit" name="save" onsubmit="return confirm('Your Confirmation Message');> 
```

# jquery - jQuery else if 使用 Ajax

> ID：12673037
> 
> 赞同：1
> 
> 时间：2012-10-01T12:12:43.860
> 
> 标签：jquery, if-statement

我想说 else if (delete_box is clicked) 我怎么能在 else if (当前为空) 中做到这一点？它们（man 和 delete_box）都具有相同的目的，但是如果您单击其中一个，则会发生一些稍微不同的事情。

```
$(man).add(delete_box).click(function(){ 
        if(App.manager != true){
            overlay.fadeIn('fast',function(){
                box_2.animate({'top':'200px'},500);

                    $('#manager_pass').submit(function(evt){ 

                        evt.preventDefault();

                        data = {
                            managerPassword: $('#token').attr('value'),
                            action: 'passwordManager'
                        };

                        App.manager = $('#token').attr('value'); // set the manager token to the one inserted so that it's stored inside the page

                            $.ajax({
                                url: App.URL_manager,
                                data : data,
                                dataType: 'json',
                                type: 'POST',
                                success: function(r){
                                    if (r.success) {
                                           box_2.animate({'top':'-250px'},500,function(){
                                           overlay.fadeOut('fast');
                                           });

                                            $('.action_wrapper').fadeOut(1000,function(){
                                                    $('.add_staff').fadeIn(1000);
                                            })
                                    }

                                    else {
                                            $('#manager_pass').fadeOut(1000,function(){
                                                $('.error').fadeIn(1000);
                                            })
                                         }
                                }

                            });

                    });

                });
        }

        else if()

        else{
            action_wrapper.fadeOut(1000, function(){
                $('#add_staff').fadeIn(1000);

            })
        }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:18:55.760

你可以使用`is`方法。

```
$(man).add(delete_box).click(function(event){ 
    // ...
    else if ($(event.target).is(delete_box)) {
       // ...
    }
}) 
```

[http://jsfiddle.net/9gcdQ/](http://jsfiddle.net/9gcdQ/)

# iphone - 使用前面的按钮获取特定行的数据并将该数据传递给 clickButton 函数

> ID：12673040
> 
> 赞同：0
> 
> 时间：2012-10-01T12:12:52.067
> 
> 标签：iphone, objective-c, xcode, ios5

我目前在 cellForRow 方法中，每行前面都有一个按钮。

```
CellForRow:
JSONDecoder *decoder=[[JSONDecoder alloc] initWithParseOptions:JKParseOptionNone];
NSMutableArray *json=[decoder objectWithData:myData]; {This has a list of items in the dictionary format}

NSDictionary *dict=[json objectAtIndex:indexPath.row]; 
NSString *status=[dict valueForKey:@"status key in json"];

"dict" can be represented as:
{
   status key in json="approved";
   name="abc";
   type="resourceName";
},
{
   status key in json="rejected"; 
   name="xyz";
   type="bus";

},
{
   status key in json ="pending";
   name="pqr";
   type="resource";  
 }...and so on . 
```

打印状态将为我提供所有行的状态。批准 拒绝 待定

但我只需要我要单击按钮的特定行的状态。这是因为当我单击该行前面的按钮时，我需要将每一行的状态分别发送到 buttonPressed 方法。我不想在 didSelectRow 方法中这样做。

如何获取特定行的 indexPath.row（单击该行），以便我可以在单击与该特定行对应的按钮时编写方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:32:47.437

您只需将按钮添加为单元格的子视图，并将 indexpath.row 作为按钮标记传递。就是这样。

我已经给出了样本

//创建你的单元格然后执行以下操作

```
UIButton *objBtn=[UIButton buttonWithType:UIButtonTypeCustom];
[objBtn setFrame:CGRectMake(100,5,50,50)];
[objBtn addTarget:self action:@selector(methodWhichGetsCallOnButtonClick:)forControlEvents:UIControlEventTouchUpInside];
objBtn.tag = indexPath.row;
[cell addSubview:objBtn]; 
```

现在在“methodWhichGetsCallOnButtonClick”方法中添加您的业务逻辑。

**[也看看这个问题。](https://stackoverflow.com/questions/3416174/iphone-sdk-opening-a-cell-with-a-dedicated-button-not-by-cell-tapping/3416366#3416366)**

编辑：

[另请参阅此链接](http://www.techotopia.com/index.php/Creating_a_Simple_iPhone_Table_View_Application)

试试这个，如果需要更多帮助，请回复我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:28:32.260

您可以对 UIButton 使用标签。

在 cellForRowAtIndexPath 方法中

您像这样将标签设置为 Button

btn.tag=indexpath.row;

在 Button Action 方法中，您可以使用此行检索标记值

Button 的操作方法 -(void)btnAction:(id)sender

{

UIButton *btn=(UIButton *) 发送者；

int tagValue=btn.tag; NSDictionary *dict=[json objectAtIndex:tagValue];

// 从这个字典中你不能访问 status 键值

}

我希望这个对你有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T12:18:04.797

如果我没有错，您希望单击按钮上的单元格的 indexPath。您可以获得该按钮的单元格（在按钮操作中），如下所示：

```
UIButton *theButton = sender;
CreatedCell *cell = (CreatedCell *)[[theButton superview] superview]; 
```

获取单元格后，您可以获取该单元格的 indexPath，如下所示：

```
theIndexPath = [[m_TableView indexPathForCell:cell] retain]; 
```

# python - 一点数学和逻辑

> ID：12673041
> 
> 赞同：3
> 
> 时间：2012-10-01T12:12:54.830
> 
> 标签：python, math, logic

所以我在这里遇到了这个问题：

> 如果我们列出所有小于 10 且是 3 或 5 的倍数的自然数，我们会得到 3、5、6 和 9。
> 这些倍数的和是 23。
> 求出 1000 以下的所有 3 或 5 的倍数之和。

我在这里写了这个：

```
def multiples(num, below):
    counter = 1
    z = 0
    while True:
        x = num * counter
        if x < below:
            z += x
        else:
            break
        counter += 1
    return z
below = 1000
print "Multiples of 3: " + str(multiples(3, below))
print "Multiples of 5: " + str(multiples(5, below))
print "Added: " + str(multiples(3, below) + multiples(5, below)) 
```

如果我设置`below`为 10，我会得到正确的答案，23

```
Multiples of 3: 18
Multiples of 5: 5
Added: 23 
```

但是当我将它设置为 1000 时，我得到了这个：

```
Multiples of 3: 166833
Multiples of 5: 99500
Added: 266333 
```

这应该是错误的，有什么我没有得到的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T12:14:45.863

实际上，一旦低于 1000，您需要删除 15 的倍数，因为它将在 3 和 5 中重复。这在 10 以下不会发生。

```
Multiple of 3 & 5  = (multiple of 3 + multiple of 5 - multiple of 15) 
```

因此，您可以使用 a`Set`来存储这些倍数，以删除重复的..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T12:18:53.257

一种 Pythonic 方法是使用列表理解（或生成器理解）：

```
sum( n for n in xrange(1,1000) 
        if n % 3 == 0 or n%5 == 0 ) 
```

.

您遇到的问题是您`n%3==0 and n%5==0`两次包含了 15 的倍数（那些 ），在一个列表中执行此操作可避免此类错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T12:15:05.093

```
multiples_of_3 = range(0,1000,3)
multiples_of_5 = range(0,1000,5)
sum_of_multiples = sum(set(itertools.chain(multiples_of_3, multiples_of_5))) 
```

或者

```
multiples_of_3 = range(0,1000,3)
multiples_of_5 = range(0,1000,5)
multiples_of_15 = set(range(0,1000,15))
sum_of_multiples = sum(set(i for i in itertools.chain(multiples_of_3, multiples_of_5) if i not in multiples_of_15)) 
```

# .net - 在 String.Format() 中处理 CultureInfo

> ID：12673045
> 
> 赞同：2
> 
> 时间：2012-10-01T12:12:58.610
> 
> 标签：.net, globalization

我正在尝试满足新库中的所有 FxCop 规则。因此，我需要为我的所有 String.Format() 调用指定一个 IFormatProvider。例子：

```
public string Example(string value) {
    return string.Format(CultureInfo.CurrentCulture, 
                         "You entered: {0}", value);
} 
```

数百次指定 CultureInfo 变得非常乏味，所以我做了一个助手：

```
public string Example2(string value) {
    return CurrentCulture("You entered: {0}", { value });
}

private string CurrentCulture(string value, object[] objects) {
    return string.Format(CultureInfo.CurrentCulture, value, objects);
} 
```

这行得通，但如果我的部件格式错误，我会丢失所有的 Resharper 警告`"You entered: {0}", { value }`。

也许最好只使用一个简短的别名：

```
public string Example3(string value) {
    return string.Format(Current(), "You entered: {0}", value);
}

private CultureInfo Current() {
    return CultureInfo.CurrentCulture;
} 
```

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:22:00.803

我实际上会使用包装方法。当您将您的方法与 ReSharper 关联时，您可以保留您的 ReSharper 警告`JetBrains.Annotations.StringFormatMethodAttribute`。

**更新**我错过了`params`签名中的关键字。感谢@EricMSFT 的评论/提示。

```
[StringFormatMethod("value")]
private string CurrentCulture(string value, params object[] objects) {
    return string.Format(CultureInfo.CurrentCulture, value, objects);
} 
```

最简单的方法（还有其他方法，例如`StringFormatMethodAttribute`在您自己的代码库中定义）可能只是`"C:\Program Files (x86)\JetBrains\ReSharper\v6.1\Bin\JetBrains.Annotations.dll"`在您的项目中引用。

更多细节[在这里](http://www.jetbrains.com/resharper/webhelp/Code_Analysis__String_Formatting_Methods.html)。

# r - R输出相异矩阵

> ID：12673057
> 
> 赞同：2
> 
> 时间：2012-10-01T12:13:46.420
> 
> 标签：r

我是 R 的新手，我想从 R 中导出一个具有相异矩阵的文件。到那时我已经写了：

```
 x<-read.table("C:\\Users\\A\\Documents\\R\\new all.csv",
              header=T,sep=";",row.names=1)
  library(betapart)
  beta<-beta.pair(x[,1:192], index.family="sorensen") 
```

我应该使用哪个函数来导出它？干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:43:33.533

如果您检查`str(beta)`，您会注意到这`beta`是以下三个元素的列表，每个元素都是 class `dist`: `beta.sim`、`beta.sne`和`beta.sor`。您可以按照@pogonomyrmex 的建议导出`beta`使用`write.csv()`或`write.table()`函数的每个元素，但首先您需要首先将每个元素指定`beta`为 a`matrix`而不是 a `dist`：

```
m.sim <- as.matrix(beta$beta.sim)
m.sne <- as.matrix(beta$beta.sne)
m.sor <- as.matrix(beta$beta.sor) 
```

然后您可以单独导出每个矩阵：

```
write.csv(m.sim, "sim.csv")
write.csv(m.sne, "sne.csv")
write.csv(m.sor, "sor.csv") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:27:36.170

您可以使用该`write.table(beta, "file.txt")`函数输出文本文件。如果您想要一个 csv 文件，请使用`write.csv()`或将`sep=","`参数添加到 write.table 函数。

# testing - 有一个离线软件可以在不同的浏览器中测试一个网站吗？

> ID：12673060
> 
> 赞同：4
> 
> 时间：2012-10-01T12:13:50.613
> 
> 标签：testing, web, cross-browser, offlineapps

我正在寻找一种可以加快在不同浏览器中测试网站的*离线软件。*

是的，我可以安装 Opera、Firefox、Chrome、IE 和 Safari 并在每一个中进行测试，但这会减慢过程，因为我正在工作的网站需要进行大量更改，并且必须对每个更改进行全面测试浏览器。

更具体地说，我正在寻找类似于[IETester](http://www.my-debugbar.com/wiki/IETester/HomePage)的东西，但适用于不同的浏览器。我对在线服务不感兴趣（有很多），但离线。

那么，有人知道这样的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T13:38:54.843

我发现 Selenium 工具 [ [http://seleniumhq.org/](http://seleniumhq.org/) ] 对于此类需求非常有用：

*   几乎所有现代和不太现代的浏览器都有驱动程序：firefox、IE、Opera、Chrome、Safari..
*   通过 webdriver 可以很好地扩展（在许多不同主机上远程控制执行测试），并且
*   已经很成熟了：周围有很多资源可以用来开发和部署它。

主要缺点，就我自己的经验而言：学习曲线有些艰难。

还有一个很好的测试管理工具，特别针对 Selenium：[Bromine](http://www.brominefoundation.org)（免责声明：我还没有使用 Bromine，但看到了很好的评论）。

问候，

——鲍里斯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T12:18:32.743

~~[**Adobe BrowserLab**](https://browserlab.adobe.com/en-us/index.html) for Desktop Browsers (Free)~~正如评论中所指出的，这已经停止了。但他们[**推荐**](http://blogs.adobe.com/browserlab/2013/03/13/browserlab-is-shutting-down-on-march-13-2013/) [**Sauce labs**](https://saucelabs.com/)和[**Browser Stack**](https://www.browserstack.com/)。

Adobe Edge Inspect aka [**Shadow**](http://html.adobe.com/edge/inspect/)也可以使用，并且可以很好地完成上述所有操作。它主要用于移动浏览器测试和调试。

Microsoft 的 Expression Suite 也有自己的跨浏览器测试实用程序，称为[**Expression Web Super-Preview**](http://expression.microsoft.com/en-us/dd565874.aspx)。

用微软的话来说，

> 您可以水平或垂直并排查看浏览器渲染，或叠加它们以识别差异。您可以使用标尺和指南来测量和突出视觉问题。您可以放大和缩小页面并查看所有浏览器渲染的同步更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-03T11:09:10.193

您可以尝试 BrowseEmAll ( [http://www.browseemall.com](http://www.browseemall.com) )，它是一个适用于 windows 的桌面应用程序（遗憾的是 windows 在线）。

它仍然包含适用于 iOS 和 Android 的所有主要浏览器和模拟器，这应该比手动在不同浏览器之间切换更容易。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-02T09:28:38.417

如果你喜欢 groovy，那就试试 Spock。我已经用 Spock 和 Gem 进行了 BDD 测试。

# c# - LDAP SetPassword 访问被拒绝

> ID：12673073
> 
> 赞同：7
> 
> 时间：2012-10-01T12:14:26.543
> 
> 标签：c#, active-directory

以下代码工作了 3 个月没有任何问题。从今天开始，我收到以下错误；“异常已被调用的目标抛出”和内部异常；“访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)”

身份验证功能有效。这是我的功能；

```
public bool Authenticate(string strUserName, string strPassword)
    {
        bool authenticated = false;
        using (
                var entry = new DirectoryEntry("LDAP://myldapserver", strUserName + "@domain", strPassword,
                                               AuthenticationTypes.Secure))
        {
            try
            {
                object nativeObject = entry.NativeObject;
                authenticated = true;
            }
            catch (DirectoryServicesCOMException ex)
            {
                return false;
            }

        }
        return authenticated;
    } 
```

和 ChangePassword 方法；

```
 public bool ChangePassword(string strUserName, string strOldPassword, string strNewPassword)
    {
        const long ADS_OPTION_PASSWORD_PORTNUMBER = 6;
        const long ADS_OPTION_PASSWORD_METHOD = 7;
        const int ADS_PASSWORD_ENCODE_REQUIRE_SSL = 0;
        const int ADS_PASSWORD_ENCODE_CLEAR = 1;
        string strPort = "636";
        int intPort;
        intPort = Int32.Parse(strPort);

        try
        {
            string strUserString = "domain" + @"\" + strUserName.Trim();

            var entry = new DirectoryEntry("LDAP://myldapserver", strUserString, strOldPassword,
                                           AuthenticationTypes.Secure);
            var search = new DirectorySearcher(entry);
            string strFilter = "(SAMAccountName=" + strUserName + ")";
            search.Filter = strFilter;
            SearchResult result = search.FindOne();
            DirectoryEntry user = result.GetDirectoryEntry();

            user.Invoke("SetOption", new object[] { ADS_OPTION_PASSWORD_PORTNUMBER, intPort });
            user.Invoke("SetOption", new object[] { ADS_OPTION_PASSWORD_METHOD, ADS_PASSWORD_ENCODE_CLEAR });
            **user.Invoke("SetPassword", new object[] { strNewPassword });**
            user.CommitChanges();
            user.Close();
        }

        catch (Exception exception)
        {
            string msg = exception.InnerException.Message;
            return false;
        }
        return true;
    } 
```

当我调用 SetPassword 属性时，它会引发异常。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:33:48.697

这是示例：-

```
PrincipalContext pr = new PrincipalContext(ContextType.Domain, "corp.local", "OU=" + OU + ",OU=Users,dc=corp,dc=local", username, password);
UserPrincipal us = new UserPrincipal(pr); 
```

更改密码

```
user.SetPassword("setPassword"); 
```

如果您希望用户在下次登录时更改密码，您可以这样使用。

```
user.ExpirePasswordNow(); 
```

**这是您的完整代码：-**

```
public static Boolean ResetPassword(string username, string password, string DomainId, string setpassword, Boolean UnlockAccount,Boolean NextLogon)
{
   PrincipalContext pr = new PrincipalContext(ContextType.Domain, "corp.local", "dc=corp,dc=local", username, password);
   UserPrincipal user = UserPrincipal.FindByIdentity(pr, DomainId);

   Boolean flag = false;
   if (user != null && user.Enabled == true)
    {
       if (UnlockAccount)
        {
          user.UnlockAccount();
        }
        user.SetPassword(setpassword);
        if (NextLogon)
        {
          user.ExpirePasswordNow();
        }
        user.Save();
        flag = true;
    }
    else
      {
         flag = false;
      }
    user.Dispose();
    pr.Dispose();
    return flag;
   } 
```

我在这里找到了一篇好文章，如果您想以自己的方式使用它，请看这里，

[http://www.primaryobjects.com/cms/article66.aspx](http://www.primaryobjects.com/cms/article66.aspx)

# python - 我应该如何理解 dis.dis 的输出？

> ID：12673074
> 
> 赞同：91
> 
> 时间：2012-10-01T12:14:33.647
> 
> 标签：python, python-2.7

我想了解如何使用[dis（Python 字节码的反汇编器）](http://docs.python.org/library/dis.html)。具体来说，应该如何解释[`dis.dis`](http://docs.python.org/library/dis.html#dis.dis)（或[`dis.disassemble`](http://docs.python.org/library/dis.html#dis.disassemble)）的输出？

.

*这是一个非常具体的示例（在 Python 2.7.3 中）：*

```
dis.dis("heapq.nsmallest(d,3)")

      0 BUILD_SET             24933
      3 JUMP_IF_TRUE_OR_POP   11889
      6 JUMP_FORWARD          28019 (to 28028)
      9 STORE_GLOBAL          27756 (27756)
     12 LOAD_NAME             29811 (29811)
     15 STORE_SLICE+0  
     16 LOAD_CONST            13100 (13100)
     19 STORE_SLICE+1 
```

我看到[`JUMP_IF_TRUE_OR_POP`](http://docs.python.org/library/dis.html#opcode-JUMP_IF_TRUE_OR_POP)etc. 是字节码指令*（虽然有趣的是，`BUILD_SET`它没有出现在这个列表中，尽管我希望它可以作为[`BUILD_TUPLE`](http://docs.python.org/library/dis.html#opcode-BUILD_TUPLE)）*。我认为右侧的数字是内存分配，左侧的数字是[goto](http://en.wikipedia.org/wiki/GOTO)数字......我注意到它们*几乎*每次都增加 3（但不完全）。

如果我包装`dis.dis("heapq.nsmallest(d,3)")`在一个函数中：

```
def f_heapq_nsmallest(d,n):
    return heapq.nsmallest(d,n)

dis.dis("f_heapq(d,3)")

      0 BUILD_TUPLE            26719
      3 LOAD_NAME              28769 (28769)
      6 JUMP_ABSOLUTE          25640
      9 <44>                                      # what is <44> ?  
     10 DELETE_SLICE+1 
     11 STORE_SLICE+1 
```

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-10-01T12:24:17.137

您正在尝试反汇编包含源代码的字符串，但`dis.dis`Python 2 不支持这种方式。使用字符串参数时，它会将字符串视为包含字节码（请参阅参考资料[`disassemble_string`中`dis.py`](http://hg.python.org/cpython/file/ed76eac4491e/Lib/dis.py#l110)的函数）。因此，您会看到基于将源代码误解为字节码的无意义输出。

Python 3 中的情况有所不同，它在反汇编之前[`dis.dis`编译字符串参数：](http://docs.python.org/dev/library/dis.html#dis.dis)

```
Python 3.2.3 (default, Aug 13 2012, 22:28:10) 
>>> import dis
>>> dis.dis('heapq.nlargest(d,3)')
  1           0 LOAD_NAME                0 (heapq) 
              3 LOAD_ATTR                1 (nlargest) 
              6 LOAD_NAME                2 (d) 
              9 LOAD_CONST               0 (3) 
             12 CALL_FUNCTION            2 
             15 RETURN_VALUE 
```

在 Python 2 中，您需要自己编译代码，然后再将其传递给`dis.dis`：

```
Python 2.7.3 (default, Aug 13 2012, 18:25:43) 
>>> import dis
>>> dis.dis(compile('heapq.nlargest(d,3)', '<none>', 'eval'))
  1           0 LOAD_NAME                0 (heapq)
              3 LOAD_ATTR                1 (nlargest)
              6 LOAD_NAME                2 (d)
              9 LOAD_CONST               0 (3)
             12 CALL_FUNCTION            2
             15 RETURN_VALUE 
```

这些数字代表着什么？`1`最左边的数字是编译这个字节码的源代码中的行号。左边一列的数字是指令在字节码中的偏移量，右边的数字是*opargs*。让我们看一下实际的字节码：

```
>>> co = compile('heapq.nlargest(d,3)', '<none>', 'eval')
>>> co.co_code.encode('hex')
'6500006a010065020064000083020053' 
```

在字节码的偏移量 0 处，我们找到`65`了 的操作码`LOAD_NAME`，带有 oparg `0000`；然后（在偏移量 3 处）`6a`是操作码`LOAD_ATTR`，带有`0100`oparg，依此类推。请注意，opargs 是 little-endian 顺序的，所以它`0100`是数字 1。未记录的`opcode`模块包含表格`opname`，为您提供每个操作码的名称，并`opmap`为您提供每个名称的操作码：

```
>>> opcode.opname[0x65]
'LOAD_NAME' 
```

oparg 的含义取决于操作码，完整的故事你需要阅读 CPython 虚拟机[在`ceval.c`](http://hg.python.org/cpython/file/ed76eac4491e/Python/ceval.c). For`LOAD_NAME`和`LOAD_ATTR`oparg 是`co_names`代码对象属性的索引：

```
>>> co.co_names
('heapq', 'nlargest', 'd') 
```

因为`LOAD_CONST`它是`co_consts`代码对象属性的索引：

```
>>> co.co_consts
(3,) 
```

对于`CALL_FUNCTION`，它是传递给函数的参数数量，以 16 位编码，低字节为普通参数的数量，高字节为关键字参数的数量。

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2017-11-28T10:32:16.040

[*我正在重新发布我对[另一个问题](https://stackoverflow.com/questions/3299648/python-compilation-interpretation-process)的回答，以确保在谷歌搜索时找到它`dis.dis()`。*]

* * *

为了完成伟大的[Gareth Rees 的回答](https://stackoverflow.com/a/12673195/2291710)，这里只是一个小的逐列摘要来解释反汇编字节码的输出。

例如，给定这个函数：

```
def f(num):
    if num == 42:
        return True
    return False 
```

这可以反汇编成（Python 3.6）：

```
(1)|(2)|(3)|(4)|          (5)         |(6)|  (7)
---|---|---|---|----------------------|---|-------
  2|   |   |  0|LOAD_FAST             |  0|(num)
   |-->|   |  2|LOAD_CONST            |  1|(42)
   |   |   |  4|COMPARE_OP            |  2|(==)
   |   |   |  6|POP_JUMP_IF_FALSE     | 12|
   |   |   |   |                      |   |
  3|   |   |  8|LOAD_CONST            |  2|(True)
   |   |   | 10|RETURN_VALUE          |   |
   |   |   |   |                      |   |
  4|   |>> | 12|LOAD_CONST            |  3|(False)
   |   |   | 14|RETURN_VALUE          |   | 
```

每列都有特定的用途：

1.  源码中对应的**行号**
2.  可选地指示**当前**执行的指令（例如，当字节码来自[帧对象](https://docs.python.org/3/library/inspect.html#the-interpreter-stack)时）
3.  一个标签，表示**`JUMP`从较早的指令**到本指令的可能
4.  字节码中对应于字节索引的**地址（它们是 2 的倍数，因为 Python 3.6 每条指令使用 2 个字节，而在以前的版本中可能会有所不同）**
5.  指令名称（也称为**opname**），每一个在模块中都有简单的解释，[它们`dis`的](https://docs.python.org/3.6/library/dis.html#python-bytecode-instructions)实现可以在[`ceval.c`](https://github.com/python/cpython/blob/master/Python/ceval.c)（CPython的核心循环）中找到
6.  Python内部使用的指令的**参数**（如果有）来获取一些常量或变量，管理堆栈，跳转到特定指令等。
7.  指令参数的**人性化解释**

# jquery - 从具有相同类的多个下拉列表中仅切换一个

> ID：12673077
> 
> 赞同：-1
> 
> 时间：2012-10-01T12:14:50.803
> 
> 标签：jquery, multiple-instances

我找到了一个不错的下拉脚本。问题是，我试图在同一页面上有多个下拉菜单，但使用相同的类，所以我不必复制样式。

脚本在这里形成：

[http://www.jankoatwarpspeed.com/post/2009/07/28/reinventing-drop-down-with-css-jquery.aspx](http://www.jankoatwarpspeed.com/post/2009/07/28/reinventing-drop-down-with-css-jquery.aspx)

我已经下载了代码并尝试在页面上添加两个，但是当单击其中一个时，它会同时触发两者。我用 .parent()、.children() 等尝试了几件事，但没有任何效果。

任何人都可以帮助并指出我正确的方向吗？这是可以看到源代码的演示页面：

[http://www.jankoatwarpspeed.com/examples/reinventing-drop-down/](http://www.jankoatwarpspeed.com/examples/reinventing-drop-down/)

更新：这是我正在处理的演示页面的副本：http: [//multideveloper.com/tests](http://multideveloper.com/tests)

太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:19:46.010

最好定义一个 ID，如果你已经有了它。再定义一个类，每个下拉菜单都不同。您可以为单个元素定义多个类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:23:35.087

这是因为下拉组件假定只有一个实例并通过类名绑定到它。

通过对脚本进行一些更改，您可以使多个实例正常工作。更改摘要如下。

**演示：http:** [//jsfiddle.net/fZbx6/1/](http://jsfiddle.net/fZbx6/1/)

我在评论中强调了这些变化。

```
$(document).ready(function() {
    $(".dropdown img.flag").addClass("flagvisibility");

    $(".dropdown dt a").click(function() {

        // old
        //$(".dropdown dd ul").toggle();

        // new
        $(this).parents(".dropdown").find("dd ul").toggle();

    });

    $(".dropdown dd ul li a").click(function() {
        var text = $(this).html();

        // old
        //$(".dropdown dt a span").html(text);
        //$(".dropdown dd ul").hide();

        // NEW
        var dd = $(this).parents(".dropdown");
        dd.find("dt a span").html(text);
        dd.find("dd ul").hide();

        $("#result").html("Selected value is: " + getSelectedValue("sample"));
    });

    function getSelectedValue(id) {
        return $("#" + id).find("dt a span.value").html();
    }

    $(document).bind('click', function(e) {
        var $clicked = $(e.target);
        if (! $clicked.parents().hasClass("dropdown"))
            $(".dropdown dd ul").hide();
    });

    $("#flagSwitcher").click(function() {
        $(".dropdown img.flag").toggleClass("flagvisibility");
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T12:25:59.520

该脚本基本上采用下拉菜单并显示列表元素 -`$('#sample > dd > ul').show();`

最好给每个选择元素一个唯一的 ID，然后触发下拉菜单。这样，只会显示目标元素。

# c++ - 如何从iptables队列中的数据包中提取源和目标端口号

> ID：12673079
> 
> 赞同：0
> 
> 时间：2012-10-01T12:15:00.817
> 
> 标签：c++, linux, network-programming, iptables, netfilter

我正在使用 libnetfilter_queue 库。但我想不出一种在回调函数中提取端口号的方法。我有点新。详细的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:36:40.137

可以通过以下方式在回调函数中完成：

```
len = nfq_get_payload(nfa, &buffer);
src_port = *((unsigned short*) (buffer + 20));
dst_port = *((unsigned short*) (buffer + 22)); 
```

# jquery - div 位置的动画不会导致实际移动

> ID：12673082
> 
> 赞同：0
> 
> 时间：2012-10-01T12:15:18.077
> 
> 标签：jquery, jquery-animate

无法弄清楚为什么这个简单的动画不会移动（不透明度部分工作正常）。任何想法我做错了什么？

```
$("#par").ready(function(){
    $("div").animate({
        right:"200px",
        opacity:".4"
    },2000);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:17:25.623

从[文档](http://api.jquery.com/animate/)中：

> 方向属性（上、右、下、左）如果元素的位置样式属性是静态的（默认情况下是静态的），则对元素没有明显的影响。

例如，如果您将 设置`position`为固定（如[本示例](http://jsfiddle.net/dystroy/mLha9/)中所示），则此方法效果很好。

```
<div id=div style="position:fixed">AAA</div>​ 
```

接着

```
 $("#div").animate({
     right:"200px",
     opacity:".4"
 },2000); 
```

# objective-c - 防止 UITableView 在自定义子视图处理触摸时滚动

> ID：12673083
> 
> 赞同：4
> 
> 时间：2012-10-01T12:15:20.210
> 
> 标签：objective-c, ios, cocoa-touch, uitableview, touch

在我的 iOS 应用程序中有一个 UITableView，它在其中一个单元格中包含一个自定义子视图。这个单元格是一个交互式视图，它处理触摸事件（touchesBegan、touchesEnded、touchesMoved）以更新自身。

问题是当用户向上或向下“拖动”时，tableView 会捕获这些触摸（尽管我没有将触摸传递到响应者链上），滚动表格并阻止子视图正常工作。只要用户触摸该特定子视图，我就想防止表格滚动。

子视图根本没有对 tableView 的引用。

如何防止表格的滚动行为？

* * *

**更新**

尽管接受了下面的答案，但我最终还是以不同的方式处理了我的情况。我现在在我的自定义视图中处理触摸事件，将它们传递给响应者链（到表格单元格），单元格也处理触摸事件，使用它们来启用/禁用超级视图（表格）上的滚动。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T17:56:18.923

在 UITableView 中关闭“可取消的内容触摸”为我解决了这个问题（在 Scroll View / Touch 下的 UITableView 属性检查器中）。我从这个 SO 问题中得到了这个：[Scrolling a UITableView inside a UIScrollView](https://stackoverflow.com/questions/3422915/scrolling-a-uitableview-inside-a-uiscrollview)

从 UIScrollView:canCancelContentTouches 文档：

> 如果此属性的值为 NO，则一旦内容视图开始跟踪，无论手指移动如何，滚动视图都不会滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:22:14.843

在这种情况下，我最常用的方法是将信息委托给事件链。设置代表的方式：

```
subview->cell->table 
```

您可以做的第二件事是通过通知中心发送通知。Table 将监听任何禁止正常滚动的事件。它是超调的，但它会使您的代码保持一致。

目前我没有更多的想法。

# iphone - iOS - 创建符号链接...安全吗？

> ID：12673086
> 
> 赞同：0
> 
> 时间：2012-10-01T12:15:43.360
> 
> 标签：iphone, ios, ipad

我有一个以多种语言本地化的应用程序，导致大量资源重复。我使用 unix "ln -s" 命令创建了符号链接，链接重复文件，这样我就可以摆脱文件冗余。

在这种情况下使用符号链接安全吗？

我已经在模拟器和我的设备上进行了测试，它可以工作。

客户设备中是否会遵循这些链接？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:31:41.807

我记得如果我在应用程序中包含符号链接，Xcode 会出现无法构建的奇怪问题。也许这个问题在 Xcode 4.5 中得到了修复（我不久前向 Apple 提交了一份错误报告）。

事实上，你已经能够构建它，它现在必须被修复。但是，构建的 IPA 文件可能会有多个文件副本。解压缩构建的文件并检查是否有多个副本是值得的。

如果事实证明存在多个副本，那么在 Xcode 中链接到同一个文件可能是一个更好的选择。

# pdf-generation - 使用 Zend Framework 2 生成 PDF 文件

> ID：12673089
> 
> 赞同：4
> 
> 时间：2012-10-01T12:15:56.503
> 
> 标签：pdf-generation, zend-framework2

我现在开始学习 ZF2，注意到 zend 框架 2 上没有“Zend_Pdf”或类似的东西......

如何在此版本的框架上创建 pdf？

谁知道好的教程？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-01T16:04:19.557

Zend Framework 2 已将许多旧的 Zend Framework 库移出主要核心并创建了模块。Zend_Pdf 是移动到模块中的库之一。您可以[在 GitHub 上的 Zend Framework 存储库](https://github.com/zendframework)中找到它们。

您需要[ZendPdf 包](https://github.com/zendframework/ZendPdf)，只需按照页面上的说明进行操作。文档还没有准备好仅仅是因为它不是核心模块。一旦使用核心内容解决了所有错误，文档可能会随之而来。

另请参阅[Zend Framework 包存储库](http://packages.zendframework.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T08:44:13.840

如果您需要在 ZF2 环境中生成 PDF，有[一个简短的教程如何使用 PD4ML 来完成](http://pd4ml.com/cookbook/pd4ml_and_zend_framework_2.htm)。该方法不需要对 PDF 布局进行编程（如 createPdfDocument()、startParagraph()、addImage() 等）。它只是将现有的渲染视图（HTML + CSS + SVG + 图像）转换为 PDF 或可选的 RTF。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-28T13:31:22.553

如果您需要一个允许从 url 或 html 轻松生成缩略图、快照或 PDF 的模块，您可以查看基于 Snappy PHP (5.3+) 包装器的 MvlabsSnappy，用于[wkhtmltopdf](https://github.com/mvlabs/MvlabsSnappy)**和 wkhtmltoimage**转换实用程序。

# java - FacesContext：单独的错误和成功消息

> ID：12673090
> 
> 赞同：3
> 
> 时间：2012-10-01T12:16:03.423
> 
> 标签：java, jsf, jsf-2

我正在以这种方式创建错误消息：

```
public static void setErrorMessage(String errorMessage) {
  FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(errorMessage));
} 
```

并在出现错误时在表格上显示它们（红色）：

```
<h:messages styleClass="error"/> 
```

如何在 JSF 中分离错误和成功消息？简单地说，如何用绿色显示积极信息，用红色显示消极信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T12:28:50.973

使用`errorClass`and`infoClass`属性来为这些严重性指定不同的样式类（还有`warnClass`and `fatalClass`，另见[标签文档](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/messages.html)）：

```
<h:messages infoClass="info" errorClass="error" /> 
```

`styleClass`涵盖了无与伦比的严重性。您只需要更改创建消息的方式。当您不指定严重性时，它默认为“信息”。[另请`FacesMessage`](http://docs.oracle.com/javaee/6/api/javax/faces/application/FacesMessage.html)参阅[javadoc](http://docs.oracle.com/javaee/6/api/javax/faces/application/FacesMessage.html)。

```
public static void setErrorMessage(String errorMessage) {
    FacesContext.getCurrentInstance().addMessage(null, 
        new FacesMessage(FacesMessage.SEVERITY_ERROR, errorMessage, null));
} 
```

# python - python中的UnboundLocalError令人困惑

> ID：12673098
> 
> 赞同：1
> 
> 时间：2012-10-01T12:16:41.223
> 
> 标签：python

谁能解释以下代码的异常。它仅在我将 display() 中的 var sub 更改为另一个名称时才有效。也没有全局变量 sub 。所以发生了什么事 ？

```
def sub(a, b):
    return a - b

def display():
    sub = sub(2,1) // if change to sub1 or sth different to sub, it works
    print sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:51:47.110

您在作用域内分配给的任何变量都被视为局部变量（除非您声明它`global`，或者在 python3 中`nonlocal`），这意味着它不会在周围的作用域中查找。

具有相同错误的简化示例：

```
def a(): pass

def b(): a = a() 
```

现在，考虑这里涉及的不同范围：

全局命名空间包含`a`和`b`。

该函数`a`不包含局部变量。

该函数`b`包含一个赋值`a`- 这意味着它被解释为一个局部变量并`a`从外部范围（在本例中为全局范围）隐藏该函数。由于在调用之前`a`没有在内部定义`b`，它是一个未绑定的局部变量，因此是 UnboundLocalError。这和你写这个完全一样：

```
def b(): x = x() 
```

解决方法很简单：为`sub`调用结果选择一个不同的名称。

重要的是要注意使用和分配的顺序没有区别 - 如果你这样编写函数，错误仍然会发生：

```
def display():
    value = sub(2,1)         #UnboundLocalError here...
    print value
    sub = "someOtherValue"   #because you assign a variable named `sub` here 
```

这是因为局部变量列表是在 python 解释器创建函数对象时生成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:26:58.633

这原本是一条评论。OP发现这作为一个有用的答案。因此，我将其重新发布为答案

最初，`sub`是一个函数。然后，它成为函数的返回值。因此，当您说 时`print sub`，python 不知道`sub`您指的是哪个。

**编辑**：

首先你定义一个函数`sub`。现在，python 知道是什么了`sub`。

当您创建一个变量并尝试分配给它（例如`x = 2`）时，python 会评估 右侧的东西`=`并将评估的值分配为 . 左侧的东西的值`=`。因此，右侧的所有内容都应该实际计算。

因此，如果您的语句是`x = x+1`，那么`x`最好在该行之前为其分配一个值；并且前面定义`x`的必须是某种与添加兼容的类型`1`。

但是假设是一个函数，并且您在其他函数中`x`调用了一个变量，并尝试为其分配一个使用 function 计算的值，那么这真的开始混淆您所指的python。这确实是对[这个答案](https://stackoverflow.com/a/12092094/198633)的过度简化，它在解释 Python 函数中的变量范围和阴影方面做得更好`x``x``x`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T13:23:48.450

对于使用的每个变量，Python 都会确定它是局部变量还是非局部变量。引用未知变量将其标记为非本地变量。稍后重用与局部变量相同的名称被认为是程序员的错误。

考虑这个例子：

```
def err():
    print x # this line references x
    x = 3   # this line creates a local variable x
err() 
```

这给你

```
Traceback (most recent call last):
  File "asd.py", line 5, in <module>
    err()
  File "asd.py", line 2, in err
    print x # this line references x
UnboundLocalError: local variable 'x' referenced before assignment 
```

基本上，Python 会跟踪代码中对名称的所有引用。当它读取这一行时`print x`，Python 知道这`x`是来自外部范围（上值或全局）的变量。但是，in`x = 3`被`x`用作局部变量。由于这是代码中的不一致，Python 提出了一个引起`UnboundLocalError`程序员注意的问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-01T12:41:43.853

Python 开始执行你的代码并首先获取函数

```
def sub(a, b):
    return a - b 
```

所以在执行这个解释器之后得到`sub`一个函数。现在当来到下一行时，它发现

```
def display():
    sub = sub(2,1) // if change to sub1 or sth different to sub, it works
    print sub 
```

所以第一行`sub = sub (2, 1)`会将`sub`函数转换为`sub`变量。从这个函数中，您将返回`sub`变量。所以它会产生问题。

# nservicebus - 如何获取 nservicebus 的工作线程列表

> ID：12673101
> 
> 赞同：0
> 
> 时间：2012-10-01T12:17:07.687
> 
> 标签：nservicebus

如何获取 nservicebus 的工作线程列表。我需要将workerThread id注册到db，然后将某种类型的消息绑定到确切的workerthread。真正的想法是处理有毒信息。想要阻止所有线程不处理除指定消息之外的有害消息。将有一个单独的服务将通过数据库管理线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:07:48.123

我不会尝试那样做。几乎肯定会遇到问题。

当然，为了获得每个线程的某种“身份”，您可以在消息处理程序中放置类似这样的内容：

```
[ThreadStatic]
private static readonly Guid ThreadId = Guid.NewGuid(); 
```

但同样，*我不会那样做！*每次重新启动端点时，向导都会改变，例如。

您还可以直接从 .NET 查询线程列表并尝试确定哪些是消息处理线程，但这听起来太可怕了，我什至不想进入它。

**真正的问题：毒消息处理**

正如您的评论所述，真正的问题是有毒信息确实是有毒的。它不仅失败了，而且这样做需要很长时间，以至于它真的把所有其他线程都搞砸了！

由于您能够根据消息的某些属性识别这些消息，因此我会在操作超时之前检测并抛出异常。每时每刻。

如果您希望能够定期测试以查看问题是否已解决，您有几个选择：

1.  通过其他方式进行测试，并在修复后将消息返回到源队列。
2.  添加一个 appSetting 以便在启用配置设置时跳过快速抛出行为。然后，您可以定期编辑配置，重新启动端点，查看它是否已修复，如果未修复则将其切换回来。
3.  创建另一个保持线程锁定增量值为零的消息处理程序。向它发送一条控制消息，说“嘿，现在试试吧。” 然后，您的快速投掷行为会降低该值并让人们看到会发生什么。这当然也很危险。确保您的锁定是严格的，因为您现在正在不同的消息处理线程之间共享此状态。

# java - 向我登录的浏览器用户发送消息？

> ID：12673105
> 
> 赞同：0
> 
> 时间：2012-10-01T12:17:17.373
> 
> 标签：java, jsp, broadcast

我必须为管理员创建一个界面，管理员用户可以在其中登录`broadcast`并向用户发送消息。

我希望在每个用户的浏览器上显示该消息，以便登录的任何人都能看到它。

我不希望用户查看的页面需要轮询消息。有没有一种方法可以**在页面不重复发出请求的情况下**做到这一点？

当前登录的用户的日志在数据库中可用。

# web-services - 使用 Jquery 在 asp.net 中调用 ASP.net 1.1 服务

> ID：12673107
> 
> 赞同：1
> 
> 时间：2012-10-01T12:17:24.817
> 
> 标签：web-services, jquery, asp.net-1.1

我正在尝试使用 Jquery 在 asp.net 中调用 ASP.net 1.1 服务，无法确定我在这里做错了什么，请帮助

Javascript 方法

```
function YesCheckChanged(vSRID) {
    var para = {
        SRID: vSRID
    };

    jQuery.ajax({
        type: "POST",
        url: serviceUrl + "/YesRdoClicked",
        dataType: "xml",
        data: para,
        contentType: "application/xml; charset=utf-8",
        success: function(data, status) {
            alert(data);
            edata = $(data).find("string").text();
            alert(edata);
        },
        error: function(e, status) {

            alert(status);
        }
    });

}​ 
```

错误

> System.InvalidOperationException：请求格式无效：
> application/xml；字符集=utf-8。
> 在 System.Web.Services.Protocols.HttpServerProtocol.ReadParameters()
> 在 System.Web.Services.Protocols.WebServiceHandler.CoreProcessRequest()

服务方式代码

```
[WebMethod(true)]       
public string YesRdoClicked(int SRID)
{
    clsEntity obj = new clsEntity();
    obj.New_DeleteTempEntity(SRID);
    return "yes";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T07:00:54.800

[http://www.codeproject.com/Articles/1231/ASP-NET-Web-Service](http://www.codeproject.com/Articles/1231/ASP-NET-Web-Service)

我终于求助于本机 Activex 调用，因为似乎没有其他方法对我有用。我个人想避免使用它。但它运作良好。

这里需要注意的是，除了 IE 之外的浏览器对 activeX 的支持不是很好，因此您需要拥有仅限 IE 的应用程序或说服客户端升级到更高版本的 asp.net。

# wix - 如何在 Wix 包中指定 .msi 包的不同安装/卸载顺序？

> ID：12673111
> 
> 赞同：5
> 
> 时间：2012-10-01T12:17:43.337
> 
> 标签：wix, bundle, wix3.6, burn

这是我的第一个 Wix 包，所以我可能不知道明显的东西，但我有以下要求：

如果我有一个 Wix 捆绑包，里面有一个引导程序应用程序和两个 .msi 包（我们称它们为 A 和 B）。我知道如果我将它们放在 Chain 元素中，它们将按该顺序安装，在我的情况下，我希望先安装 A，然后是 B。但是在卸载时，我希望先卸载 B，而不是 A。是那可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T12:50:11.313

您所描述的是默认行为 - 如果 Burn 在 B 之前安装 A，那么 A 也将在 B 之后被卸载。

顺序由元素的`After`参数定义，该参数[`MsiPackage`](http://wix.sourceforge.net/manual-wix3/wix_xsd_msipackage.htm)标识应安装此包的包。如果它不存在，则默认为父元素中的前一个元素`Chain`，因此安装顺序只是您的子元素中的顺序`Chain`。

# asp.net-mvc - jquery ajax 绑定下拉列表 MVC

> ID：12673117
> 
> 赞同：0
> 
> 时间：2012-10-01T12:18:06.807
> 
> 标签：asp.net-mvc, html.dropdownlistfor

我有一个 2 下拉列表，我必须根据从第一个下拉列表中获得的 Id 绑定第二个。在第一个下拉列表中，我添加了`OnChange`事件。

```
function onChange() {
    var variantDropDown = $('#VariantName');
    $.ajax({
            url: '/Admin/CustomProductPinCodesManagement/GetProductVarinats',
            type: 'post',
            data: { productId: $("#ProductName").data("tDropDownList").value() },
                      success: function (data) {
                          $.each(variants, function (i, variant) {
                              $states.append('<option value="' + variant.Id + '">' +   variant.Name + '</option>');
            });
        },
        error: function () {
            alert('Error');
        }
    });
} 
```

这是 c# 代码。

```
[HttpPost]
public ActionResult GetProductVarinats(string productId)
{
    var variants = _productService.GetProductVariantsByProductId(Convert.ToInt32(productId));
    return Json(new { Result = true, data = variants }, JsonRequestBehavior.AllowGet);
} 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:23:01.637

AcidMedia 有一个名为 TTControls 的库，它使用 Telerik，您可以使用 TTControls.LinkedDropDown 控件来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:24:11.070

使用`val()`代替`value()`

变更声明

```
data: { productId: $("#ProductName").data("tDropDownList").value() } 
```

到

```
data: { productId: $("#ProductName").data("tDropDownList").val() } 
```

成功应该是这样的

```
success: function (data) {
  //For getting list of variants, you should access it by `data.data.variants`
  //because you will get your json object in data, and for getting the value `variants`
  //you should capture the `data` property of returned json object like `data.data`

  $.each(data.data.variants, function (i, variant) {

     $states.append('<option value="' + variant.Id + '">'+ variant.Name + '</option>');

     //you can try this also for creating options
     //$states.append($('<option/>').text(variant.Name).attr('value',variant.Id));
  });
} 
```

所以你的功能应该是这样的：

```
function onChange() {
   var variantDropDown = $('#VariantName');
   $.ajax({
      url: '/Admin/CustomProductPinCodesManagement/GetProductVarinats',
      type : 'post',
      data: { productId: $("#ProductName").data("tDropDownList").val() },
      success: function (data) {
        $.each(data.data.variants, function (i, variant) {
           $states.append($('<option/>').text(variant.Name).attr('value',variant.Id));
         });
      },
      error: function () {
         alert('Error');
      }
    });
 } 
```

# mongodb - mongodb/mongoose 受保护的属性

> ID：12673119
> 
> 赞同：0
> 
> 时间：2012-10-01T12:18:15.510
> 
> 标签：mongodb, mongoose

如何保护属性不被猫鼬大量分配？就像在 rails :attr_protected 中一样。我尝试用下划线作为前缀，但它仍然是“可分配的”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:35:19.500

您可以将属性设为只读[virtual](http://mongoosejs.com/docs/guide.html#virtuals)。

# javascript - 如何在输入字段中检测非“GSM 7 位字母”字符

> ID：12673120
> 
> 赞同：12
> 
> 时间：2012-10-01T12:18:19.083
> 
> 标签：javascript, regex, gsm

我正在尝试检测文本输入字段是否有任何不属于 GSM 7 位字母表的字符。带有字符的表格在这里[http://www.dreamfabric.com/sms/default_alphabet.html](http://www.dreamfabric.com/sms/default_alphabet.html)

经过大量搜索后，我发现这个（[我需要什么正则表达式来检查一些非拉丁字符？](https://stackoverflow.com/questions/2550951/what-regular-expression-do-i-need-to-check-for-some-non-latin-characters)）它非常接近我想要完成的，因为它检测到非拉丁字符。如何更改正则表达式以包含 GSM 7 位字母？

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>test foreign chars</title>
</head>
<body>

    <input id="foreign_characters" size="12" type="text" name="foreign_characters" value="test">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">

(function(){

    $('#foreign_characters').on("keyup", function(){

        var foreignCharacters = $("#foreign_characters").val();
        var rforeign = /[^\u0000-\u007f]/;

        if (rforeign.test(foreignCharacters)) {
          alert("This is non-Latin Characters");
        } else {
          alert("This is Latin Characters");
        }

    });

})();

    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-01T12:26:18.157

```
function isGSMAlphabet(text) {
    var regexp = new RegExp("^[A-Za-z0-9 \\r\\n@£$¥èéùìòÇØøÅå\u0394_\u03A6\u0393\u039B\u03A9\u03A0\u03A8\u03A3\u0398\u039EÆæßÉ!\"#$%&'()*+,\\-./:;<=>?¡ÄÖÑÜ§¿äöñüà^{}\\\\\\[~\\]|\u20AC]*$");

    return regexp.test(text);
} 
```

这个正则表达式应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-01T12:26:08.243

您可以将所有有效字符放在一个字符串中，然后重复搜索该字符串。

```
gsm = "@£$¥èéùìòÇØøÅåΔ_ΦΓΛΩΠΨΣΘΞ^{}\[~]|€ÆæßÉ!\"#¤%&'()*+,-./0123456789:;<=>?¡ABCDEFGHIJKLMNOPQRSTUVWXYZÄÖÑÜ§¿abcdefghijklmnopqrstuvwxyzäöñüà";
var letter = 'a';
var letterInAlfabet = gsm.indexOf(letter) !== -1; 
```

如果你使用它，请确保你的编码是正确的，**即将你的 Javascript 文件保存为 UTF8 并指定它是 UTF8 到浏览器**。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-11-25T14:50:37.717

接受的答案会起作用，但它们会受到复杂性（使用正则表达式）和性能（需要搜索两个数组）的影响。这是一个性能更好的解决方案，由于使用了查找集，如果找到非 GSM7 字符，则循环将短路。使用 Unicode 点以便在剪切和粘贴此代码时不会出现不同的字符编码问题。

```
const gsmCodePoints = new Set([
  0x000a, 0x000c, 0x000d, 
  0x0020, 0x0021, 0x0022, 0x0023, 0x0024, 0x0025, 0x0026, 0x0027, 0x0028, 0x0029, 0x002a, 0x002b, 0x002c, 0x002d, 0x002e, 0x002f,
  0x0030, 0x0031, 0x0032, 0x0033, 0x0034, 0x0035, 0x0036, 0x0037, 0x0038, 0x0039, 0x003a, 0x003b, 0x003c, 0x003d, 0x003e, 0x003f,
  0x0040, 0x0041, 0x0042, 0x0043, 0x0044, 0x0045, 0x0046, 0x0047, 0x0048, 0x0049, 0x004a, 0x004b, 0x004c, 0x004d,
  0x004e, 0x004f,
  0x0050, 0x0051, 0x0052, 0x0053, 0x0054, 0x0055, 0x0056, 0x0057, 0x0058, 0x0059,  0x005a, 0x005b, 0x005c, 0x005d, 0x005e, 0x005f, 
  0x0061, 0x0062, 0x0063, 0x0064, 0x0065, 0x0066, 0x0067, 0x0068, 0x0069, 0x006a, 0x006b, 0x006c, 0x006d, 0x006e, 0x006f, 
  0x0070, 0x0071, 0x0072, 0x0073, 0x0074, 0x0075, 0x0076, 0x0077, 0x0078, 0x0079, 0x007a, 0x007b, 0x007c, 0x007d, 0x007e,
  0x00a1, 0x00a3, 0x00a4, 0x00a5, 0x00a7,
  0x00bf,
  0x00c4, 0x00c5, 0x00c6, 0x00c7, 0x00c9,
  0x00d1, 0x00d6, 0x00d8, 0x00dc, 0x00df,
  0x00e0, 0x00e4, 0x00e5, 0x00e6, 0x00e8, 0x00e9, 0x00ec,
  0x00f1, 0x00f2, 0x00f6, 0x00f8, 0x00f9, 0x00fc,
  0x0393, 0x0394, 0x0398, 0x039b, 0x039e, 0x03a0, 0x03a3, 0x03a6, 0x03a8, 0x03a9,
  0x20ac,
]);

function isGsmMessage(message) {
  for (const s of message) {
    const codePoint = s.codePointAt(0);
    if (codePoint && !gsmCodePoints.has(codePoint)) {
      return false;
    }
  }
  return true;
}

isGsmMessage('foo'); // -> true
isGsmMessage('⚡️ bar '); // -> false

// All GSM characters
isGsmMessage('@£$¥èéùìòÇ\nØø\rÅåΔ_ΦΓΛΩΠΨΣΘΞÆæßÉ\x20!"#¤%&\'()*+,-./0123456789:;<=>?¡ABCDEFGHIJKLMNOPQRSTUVWXYZÄÖÑÜ§¿abcdefghijklmnopqrstuvwxyzäöñüà\f^{}\\[~]|€'); // -> true 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-09T12:18:07.297

我有`textarea`id `smscontent`。我使用下面的正则表达式/代码

```
$('#smscontent').on('input, change keyup', function(){
    $(this).val($(this).val().replace(/[^A-Za-z0-9 \r\n@£$¥!\"#$%&amp;'\(\)*\+,_.\/:;&lt;=&gt;?^{}\\\[~\]]*/ig, ''));
}); 
```

测试 Lajos 共享的正则表达式 - [https://www.regextester.com/99623](https://www.regextester.com/99623)

测试此答案中使用的正则表达式 - [https://www.regextester.com/?fam=106436](https://www.regextester.com/?fam=106436)

# c++ - C ++管道字符串到邮件命令

> ID：12673123
> 
> 赞同：0
> 
> 时间：2012-10-01T12:18:40.717
> 
> 标签：c++, email, pipe

我正在尝试制作一个 c++ 程序，该程序使用 mail 命令发送电子邮件，使用字符串作为正文。要设置消息的字符串，我正在尝试输入一条消息。

例如，我正在尝试以下操作，它应该向 email@gmail.com 发送一封电子邮件，其中包含一条消息“测试”，但没有发送任何消息。有任何想法吗？：

```
fp = fopen("mail email@gmail.com", "w+");
dup2(fileno(fp), 1);
fclose(fp);
printf("test\n"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T12:21:07.457

您的第一个参数`fopen`不是文件，而 fopen 用于打开文件。

尝试使用[popen](http://linux.die.net/man/3/popen)打开*连接到子进程的管道*：

```
fp = popen("mail email@gmail.com", "w") 
```

# django - 如何实现一个表格来更新数量？

> ID：12673124
> 
> 赞同：0
> 
> 时间：2012-10-01T12:18:45.910
> 
> 标签：django, django-orm

如何实现一个表单来更新 Car 的数量？我不知道该怎么做。谢谢

```
class Car(models.Model):
    name = models.CharField(max_length=50)
    price = models.DecimalField()    

class GarageCar(models.Model):
    car = models.ForeignKey('Car')
    garage = models.ForeignKey('Garage')
    quantity = models.IntegerField()

class Garage(models.Model):
    name = models.CharField("Garage_Name", max_length=30)
    cars = models.ManyToManyField('Car', through='GarageCar', blank=True, null=True)
    owner = models.ForeignKey(User, related_name='owner_garage', verbose_name='Owner Garage') 
```

这样更新数量：

```
In [2]: c = Car.objects.get(id=1) #here I need car ID

In [3]: g = Garage.objects.get(owner=1)

In [4]: q = 33 #here I need data from form

In [5]: c= GarageCar.objects.filter(car=c, garage=g).update(quantity=q) 
```

意见：

```
def show(request):
    user = request.user
    garage = Garage.objects.get(owner=user)

    return render_to_response('garage.html', {'garage': garage, 'form':form}) 
```

在garage.html中：

```
{% for item in garage.garagecar_set.all %}
        Car:      {{item.car.name}}
        Price:    {{item.car.price}} 
        Quantity: {{item.quantity}} 
        ID:       {{item.car.id}}
{% endfor %} 
```

在forms.py中：

```
from django import forms

class QuantityForm(forms.Form):
    q = forms.IntegerField 
```

如何创建 ORM 查询来更新数量？

如何在模板中的每辆车旁边显示一个表单字段（使用“更新”按钮）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:10:29.030

看起来您会对 FormSets，特别是 InlineFormSets 感兴趣：

[https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#using-an-inline-formset-in-a-view](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#using-an-inline-formset-in-a-view)

如果你想让它变得非常简单（可能以理解它是如何工作为代价的），你可以将我的通用视图用于这个用例。

我的图书馆：[https ://github.com/AndrewIngram/django-extra-views](https://github.com/AndrewIngram/django-extra-views)

然后...

视图.py：

```
import extra_views 

class EditProductReviewsView(extra_views.InlineFormSetView):
    model = Garage
    inline_model = GarageCar
    fields = ('quantity', )
    template_name = 'garage.html' 
```

车库.html：

```
<form action="." method="post">
{% csrf_token %}

{{ formset.management_form }}

<table>
{% for form in formset %}
<tr>
<td>{{ form.instance.car.name }}</td>
<td>{{ form.instance.car.price }}</td>
{% for field in form.visible_fields %}
<td>
{{ field }}
</td>
{% endfor %}
<div style="display: none;">
{% for field in form.hidden_fields %}{{ field }}{% endfor %}
</div>
<td>{{ form.quantity }}</td>
<td>{{ form.instance.car.id }}</td>
</tr>
{% endfor %}
</table>

<input type="submit" />
</form> 
```

我没有测试过这个例子，我不记得你是否需要将 id 字段添加到`fields`元组中。但基本要点应该是正确的。

# android - 阻止谷歌在应用内购买

> ID：12673128
> 
> 赞同：0
> 
> 时间：2012-10-01T12:18:55.660
> 
> 标签：android, in-app-purchase

我正在寻找在通过我的应用程序启动的应用程序中阻止 google inapp 购买的解决方案。
我有一个应用程序，它现在列出了手机中安装的应用程序数量，如果用户从我的应用程序打开任何列出的应用程序并想要执行任何购买，它不应该被允许这样做。如果他从默认启动器启动应用程序，用户可以执行购买。

# java - NetBeans + EJB3 + MySQL：访问两个具有相同名称的表的数据库

> ID：12673130
> 
> 赞同：0
> 
> 时间：2012-10-01T12:19:07.097
> 
> 标签：java, mysql, netbeans, ejb, enterprise

我正在 NetBeans 7.2 中建立一个 Maven 企业项目来开发 MIS（管理信息系统）。碰巧我们有一个旧数据库必须迁移到新数据库。在新工具尚未准备好投入生产之前，我必须从旧的更新它，该系统仍将使用。

我的问题是：我有两个持久性单元（比如说“oldBase_PU”和“newBase_PU”），但我无法创建 EJB，因为两个数据库中都有同名的表。创建 EJB 时，IDE 仅创建一个 EJB 而不是两个（每个数据库一个，在不同的包中）。

我尝试创建两个 EJB 项目并将其添加到 Maven 项目中，但没有成功。关于如何做到这一点的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:47:05.487

为所有旧表添加前缀，例如 Old_User，您将能够将数据从 Old_User 迁移到 User。此外，您必须注意约束。

# android - 以编程方式从android中的资产文件夹安装apk

> ID：12673134
> 
> 赞同：4
> 
> 时间：2012-10-01T12:19:18.733
> 
> 标签：android, android-intent, android-install-apk

我正在尝试从资产文件夹以编程方式安装 apk，但没有成功，请帮助我。我为此使用以下代码。谢谢你。

```
Intent intent = new Intent(Intent.ACTION_VIEW)
.setData(Uri.parse("file:///android_asset/youtuberanjit.apk"))
.setType("application/vnd.android.package-archive");
startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-01T12:20:00.543

```
AssetManager assetManager = getAssets();

InputStream in = null;
OutputStream out = null;

try {
    in = assetManager.open("myapk.apk");
    out = new FileOutputStream("/sdcard/myapk.apk");

    byte[] buffer = new byte[1024];

    int read;
    while((read = in.read(buffer)) != -1) {

        out.write(buffer, 0, read);

    }

    in.close();
    in = null;

    out.flush();
    out.close();
    out = null;

    Intent intent = new Intent(Intent.ACTION_VIEW);

    intent.setDataAndType(Uri.fromFile(new File("/sdcard/myapk.apk")),
        "application/vnd.android.package-archive");

    startActivity(intent);

} catch(Exception e) { } 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-11-20T06:52:07.177

将 apk 文件复制到 assets 文件夹中。

试试这个对我有用的方法............

```
private void launchComponent(String packageName, String name) { 

  // Name should be starting activity complete name with package name
        Intent launch_intent = new Intent("android.intent.action.MAIN");
        launch_intent.addCategory("android.intent.category.LAUNCHER");
        launch_intent.setComponent(new ComponentName(packageName, name));
        launch_intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

        this.startActivity(launch_intent);
    } 
```

# java - java.util.zip.CRC32 比较图像文件

> ID：12673142
> 
> 赞同：0
> 
> 时间：2012-10-01T12:19:39.833
> 
> 标签：java, crc32, image-comparison

是否有任何建议（一段代码）可以帮助我理解如何比较两个不同的图像文件（无论它们是否相同）的概念？

提前致谢。

编辑：我的意思是，例如，我应该通过文件大小检查来检查 CRC32（我不知道该怎么做）。那么这意味着它们是相同的图片......

EDIT2：当我说图像相同时，我的意思是图像对用户来说看起来完全一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:38:45.547

您可以使用 CRC32 对任何文件求和。但是，如果您想知道两个图像是否相同，您必须确定两个看起来相同的图像是否相同。例如，以下图像都有不同的大小，更不用说不同的 CRC32 数字了。

![在此处输入图像描述](../Images/910a37055b809744ce7f3044a5bdc23a.png) ![在此处输入图像描述](../Images/5886f295f01b99dbf97a23248395b0c3.png) ![在此处输入图像描述](../Images/f40c692aeb694f97125863528d08d07c.png) ![在此处输入图像描述](../Images/6765ff0416853eabaf30c0e398883123.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:45:30.497

zip 条目的校验和具有以下含义：不同时文件不同。

[CRC32](http://docs.oracle.com/javase/6/docs/api/java/util/zip/CRC32.html)类允许您自己计算字节的校验和。

为了有效地检查两个图像是否*几乎*相等，有很多[方法](https://stackoverflow.com/questions/8644960/java-library-to-compare-image-similarity)，例如制作一个小的 8x8 图像并比较颜色值的差异。

# android - 在 android 上读取并显示 ms word doc

> ID：12673153
> 
> 赞同：0
> 
> 时间：2012-10-01T12:20:02.957
> 
> 标签：android

我想阅读微软的word文档并在android上显示相同的内容。在iphone webview中可以做到这一切，但在android中没有这种支持。我搜索了许多开源jar但无济于事。请任何人指导我或任何人都做过这种事情，请帮助，因为我很长一段时间都在努力完成这项工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:29:03.517

Android 本身不支持渲染 .doc 或 .ppt 文件。可以使用公共意图，允许您的应用重用其他应用的活动来显示这些文档类型。但这仅适用于安装了支持此 Intent 的应用程序的手机。 [http://developer.android.com/guide/topics/intents/intents-filters.html](http://developer.android.com/guide/topics/intents/intents-filters.html)
如果您安装了一些应用程序，那么您可以使用以下代码

```
Intent intent = new Intent();
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.setAction(Intent.ACTION_VIEW);
String type = "application/msword";
intent.setDataAndType(Uri.fromFile(file), type);
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:29:29.757

AFAIK，没有用于阅读 MS Office 文档的库。我只看到 3 种方法来做到这一点。

1.  您可以为 Android 编写自己的 MS Word 模拟
2.  您可以重写其中一种开源办公套件（OpenOffice/LibreOffice）
3.  您可以使用 Google 文档。
4.  您可以使用其他格式或使用转换器。

我认为，只有第三种和第四种方式是可以实现的。

# java - 如何在 JTable 中的前导选择单元格上显示消息？

> ID：12673161
> 
> 赞同：2
> 
> 时间：2012-10-01T12:20:50.300
> 
> 标签：java, swing, jtable

我有一个`JTable`带有自定义的`ListSelectionModel`，其中包含自定义选择模式。此选择模式可确保仅在一行中进行选择，但包含多个单元格。当用户单击选择表格中的某些单元格时，选定的单元格都与第一个选定的单元格位于同一行。

现在我想在前导选择单元格的右上角创建一个小消息，它显示一些数据，即所选单元格的计数。更改前导选择时应移动消息。

但是我该怎么做呢？它不是工具提示，因为它旨在在用户单击表格并选择单元格时显示，而不是通过将鼠标悬停在其上。

有什么建议么？

最好的问候， htz

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T13:37:15.380

或者（不是很漂亮，但效果很好），您可以利用 JTable 和所有其他 JComponent 一样的事实，因此您可以向它添加子组件。您所要做的就是确保正确调整组件的大小和位置（这只是因为 JTable 使用空布局）。

这是一个带有 JLabel 的小演示，它显示所选项目的数量。标签会自动定位在第一个可见行上，除非它是当前的潜在客户选择，在这种情况下，标签会移动到第二个可见行：

```
import java.awt.BorderLayout;
import java.awt.Point;
import java.util.Vector;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.ListSelectionModel;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;

public class TestTable {

    protected void initUI() {
        Vector<Vector<Object>> data = new Vector<Vector<Object>>();
        Vector<String> colNames = new Vector<String>();
        for (int i = 0; i < 5; i++) {
            colNames.add("Col-" + (i + 1));
        }
        for (int i = 0; i < 200; i++) {
            Vector<Object> row = new Vector<Object>();
            for (int j = 0; j < 5; j++) {
                row.add("Cell " + (i + 1) + "-" + (j + 1));
            }
            data.add(row);
        }
        table = new JTable(data, colNames);
        someText = new JLabel();
        someText.setOpaque(true);
        table.add(someText);
        table.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);
        table.getSelectionModel().addListSelectionListener(new ListSelectionListener() {

            @Override
            public void valueChanged(ListSelectionEvent e) {
                int count = table.getSelectedRowCount();
                someText.setText("You currently have selected " + count + " item" + (count > 1 ? "s" : ""));
                layoutLabel();
            }
        });
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        scrollpane = new JScrollPane(table);
        scrollpane.getViewport().addChangeListener(new ChangeListener() {

            @Override
            public void stateChanged(ChangeEvent e) {
                layoutLabel();
            }
        });
        frame.add(scrollpane, BorderLayout.CENTER);
        frame.pack();
        frame.setVisible(true);
    }

    private JLabel someText;
    private JTable table;
    private JScrollPane scrollpane;

    private void layoutLabel() {
        someText.setSize(someText.getPreferredSize());
        Point location = scrollpane.getViewport().getViewRect().getLocation();
        int leadSelectionIndex = table.getSelectionModel().getLeadSelectionIndex();
        if (leadSelectionIndex > -1) {
            if (table.rowAtPoint(location) == leadSelectionIndex) {
                location.y += table.getRowHeight(leadSelectionIndex);
            }
        }
        someText.setLocation(location);
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTable().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T12:30:52.517

*   您可以`Locations`为[ToolTip](http://docs.oracle.com/javase/tutorial/uiswing/components/tooltip.html)设置与 MsExcell 中类似的效果，

> 它不是工具提示，因为它旨在在用户单击表格并选择单元格时显示，而不是通过将鼠标悬停在其上。

*   您可以使用`JPopup`/`JWindow`而不是`ToolTip`, 对于不可编辑的内容

*   `JPopup`/`JWindow`默认情况下不能包含可编辑的`JComponent`( `JTextComponents`)

*   对于用户输入，您只能使用未装饰`JDialod`的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T13:58:22.540

另一种选择是实现每个组件的 glassPane（JLayer 用于 1.7，JXLayer 用于 1.6 的众多角色之一），如下所示。请注意，我并没有试图美化这个位置（就像@Guillaume 所做的那样）。此外，您必须稍微修改 Rob 的 DragLayout 以确保该框显示在表格区域内。

```
public static class ToolTipUI extends LayerUI<JTable> {
    private JLayer<JTable> layer;
    private JToolTip toolTip;

    @Override
    public void installUI(JComponent c) {
        super.installUI(c);
        this.layer = (JLayer) c;
        installGlassPane();
        installListeners();
    }

    private void installListeners() {
        ListSelectionListener l = new ListSelectionListener() {

            @Override
            public void valueChanged(ListSelectionEvent e) {
                if (e.getValueIsAdjusting()) return;
                updateToolTip();
            }

        };
        getTable().getColumnModel().getSelectionModel().addListSelectionListener(l);
        getTable().getSelectionModel().addListSelectionListener(l);
    }

    private void updateToolTip() {
        int[] selectedColumns = getTable().getColumnModel().getSelectedColumns();
        int selectedRow = getTable().getSelectedRow();
        if (selectedRow < 0 || selectedColumns.length == 0) {
            setToolTipText("");
        } else {
            String text = "selected cells: ";
            for (int i = 0; i < selectedColumns.length; i++) {
                text += " " + selectedColumns[i];
            }
            setToolTipText(text);
        }
    }

    private void setToolTipText(String string) {
        toolTip.setTipText(string);
        Rectangle cellBounds = getTable().getCellRect(getTable().getSelectedRow(), 0, false);
        toolTip.setLocation(cellBounds.getLocation());
        doLayout(layer);
    }

    @Override
    public void doLayout(JLayer<? extends JTable> l) {
        super.doLayout(l);
        l.getGlassPane().doLayout();
    }

    private JTable getTable() {
        return layer.getView();
    }

    private void installGlassPane() {
        toolTip = ((JComponent) layer.getView()).createToolTip();
        layer.getGlassPane().setBorder(BorderFactory.createLineBorder(Color.RED));
        // DragLayout by Rob Camick http://tips4java.wordpress.com/2011/10/23/drag-layout/
        layer.getGlassPane().setLayout(new DragLayout());
        layer.getGlassPane().add(toolTip);
        layer.getGlassPane().setVisible(true);
    }

}

// usage:
JTable table = new JTable(new AncientSwingTeam());
JLayer layer = new JLayer<JTable>(table, new ToolTipUI()); 
```

# sbt - 在 sbt 中重新加载插件

> ID：12673164
> 
> 赞同：2
> 
> 时间：2012-10-01T12:21:13.007
> 
> 标签：sbt

如何让 sbt 0.11.3 使用插件的新快照版本？

```
reload plugins 
```

不起作用。

```
reload plugins
clean
update 
```

不起作用。

删除 ivy 缓存中插件的元数据文件并重新启动 sbt 不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-06-09T19:27:56.360

```
sbt ";reload plugins ;update ;reload return" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T12:26:22.063

我的错。该插件没有被重新加载，因为新的快照尚未针对我正在使用的 sbt 版本发布。

# python - 如何从解析的json中提取具有特定键的数据？

> ID：12673166
> 
> 赞同：1
> 
> 时间：2012-10-01T12:21:35.557
> 
> 标签：python, json

我已经解析了如下的 json 数据：

```
{
    "results": {
        "authors": [
            [
                {
                    "person": "Person1 Name",
                    "key": "director"
                }
            ],
            [
                {
                    "person": "Person2 Name",
                    "key": "author"
                },
                {
                    "person": "Person3 Name",
                    "key": "author"
                }               
            ]
        ]
    }
} 
```

即可以有几个导演和几个作者。我应该得到它作为字符串：

```
directors = "Person1 Name"
authors = "Person2 Name, Person3 Name" 
```

看起来我应该遍历每个值并检查它的`key`. 但是我怎么能用simplejson呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T12:29:21.863

要从 json 结构中提取数据，您可以使用该`jsonpath`模块。请参阅[http://goessner.net/articles/JsonPath/](http://goessner.net/articles/JsonPath/)。我不是这个模块的作者。

您的代码将如下所示：

```
directors = jsonPath(json, '$..authors[?(@.key=="director")]')
authors = jsonPath(json, '$..authors[?(@.key=="author")]') 
```

您将需要提取名称并将它们连接在一起，但我认为您会发现这很容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:31:19.177

以下代码适用于我：

```
authors = []
directors = []
for persons in movie_json.get('results').get('authors'):
    for person in person:
        if person.get('person'):
            if person.get('key')=='author':
                authors.append(person.get('person'))
            elif person.get('key')=='director':
                directors.append(person.get('person'))
authors = None if authors == [] else ', '.join(authors)
directors = None if directors == [] else ', '.join(directors) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T12:32:16.863

我认为你的 json 设计是错误的。你应该像这样制作json：

```
foo =    {
        "results": {
            "directors": [            
                        "person": "Person1 Name",
                ],
            "authors":[                
                        "person": "Person2 Name",                 
                        "person": "Person3 Name",
                ]        
        }
    } 
```

现在如果有人要求董事做

```
directors = ','.join(foo["directors"]) 
```

和作者

```
authors = ','.join(foo["authors"]) 
```

谢谢

# php - yii CDbException: CDbConnection failed to open the DB connection: 找不到驱动程序

> ID：12673172
> 
> 赞同：0
> 
> 时间：2012-10-01T12:22:00.767
> 
> 标签：php, mysql, ini, yii

我正在尝试使用该`yii`框架一段时间。我一直在指 - [first-app-doc](http://www.yiiframework.com/doc/guide/1.1/en/quickstart.first-app)和[yiic-doc](http://www.yiiframework.com/doc/guide/1.1/en/quickstart.first-app-yiic)。

我已经阅读了关于“stackoverflow”的所有与我相关的帖子，但无法解决我的问题。主要是因为我被困在`.ini`文件和`pdo`.

我已经`protected/config/main.php`根据我的数据库配置修改了配置文件。我正在使用命令行工具 -`yiic`创建`model`. 它给了我 'http://hostname/path/to/index.php?r=user' 来命中。

当我击中`http://localhost/index.php?r=user`; 它给出了`CDbException`-`CDbConnection failed to open the DB connection: could not find driver`在浏览器本身。`pdo_mysql`好像找不到
另外，我没有`php.ini`文件`/etc/php5/`，但我有不同`php.ini`的文件`/etc/php5/cgi/`，`/etc/php5/apache2/`和`/etc/php5/cli/`。

另外，这个`php5-mysql`包，我已经安装在我的电脑上了。

我一直在尝试和尝试。这像是不可能做到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-16T13:42:50.443

我知道这是一个有点老的问题，但希望它可以帮助其他人，我实际上遇到了同样的问题，我在我们设置服务器的谷歌计算引擎上使用它，我们发现你也必须安装 sqlite PDO 扩展作为 MySQL PDO 扩展。

有关我的问题的更多信息：[https ://stackoverflow.com/a/24555366/817213](https://stackoverflow.com/a/24555366/817213)

希望这也可以帮助其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-31T09:14:59.740

1-尝试使用 MAMP 或 WAMP 或 XAMP 访问数据库，甚至首先通过命令行访问数据库。然后，您将知道是否需要用户名和密码。

2-检查你有什么数据库。你会知道数据库是否存在。

3-检查项目中的数据库连接字符串是否正确。

# php - Magento - 覆盖 tablerate 资源模型

> ID：12673185
> 
> 赞同：0
> 
> 时间：2012-10-01T12:23:15.187
> 
> 标签：php, e-commerce, shopping-cart, magento-1.7

我已经阅读了这里的各种线程，但是我仍然无法解决以下问题。我正在尝试使用以下方法覆盖资源模型，但是我一点运气都没有。

Magento 版本：1.7

我想重写位于以下位置的**Mage_Shipping_Model_Resource_Carrier_Tablerate** 类：

```
app/code/core/Mage/Shipping/Model/Resource/Carrier/Tablerate 
```

我也复制了文件：

```
app/code/local/me/Shipping/Model/Resource/Carrier/Tablerate.php 
```

并将文件中的类重命名为：

```
me_Shipping_Model_Resource_Carrier_Tablerate 
```

我在 app/etc/modules/me_Shipping.xml 中创建了一个文件，其中包含：

```
<?xml version="1.0"?>
<config>
    <modules>
        <me_Shipping>
            <active>true</active>
            <codePool>local</codePool>
            <depends>
                <Mage_Shipping />
            </depends>
        </me_Shipping>
    </modules>
</config> 
```

最后，我在以下位置创建了一个 config.xml：**app/code/local/me/Shipping/etc/config.xml**

我在这个文件中尝试了很多变体，我最新的是：

```
<?xml version="1.0"?>
<config>
    <modules>
        <me_Shipping>
            <version>1.0</version>
        </me_Shipping>
    </modules>

    <global>
        <models>
            <shipping>
                <rewrite>
                    <resource_carrier_tablerate>me_Shipping_Model_Resource_Carrier_Tablerate</resource_carrier_tablerate>
                </rewrite>
            </shipping>
        </models>
    </global>
</config> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:27:44.673

```
 <shipping_resource>
        <rewrite>
            <carrier_tablerate>me_Shipping_Model_Resource_Carrier_Tablerate</carrier_tablerate>
        </rewrite>
    </shipping_resource> 
```

这解决了问题

# actionscript-3 - 动作脚本 3 从远程域加载图像

> ID：12673186
> 
> 赞同：0
> 
> 时间：2012-10-01T12:23:16.730
> 
> 标签：actionscript-3, vk, loading-image

我有一个在门户 VK com 上运行的应用程序。我需要从他们的域（基本上是玩家头像）加载图像（.png）。我得到的是`SecurityError: Error #2123`。看起来在他们域上的 crossdomain.xml 文件中没有适当的标签。

我做了以下事情：

1.  `allowSecurityDomain`在我的 swf 中设置为 *
2.  我正在传递`LoaderContext`给这样定义的 Loader::load 方法：

    ```
    var context:LoaderContext = new LoaderContext();
    var context.checkPolicyFile = true;
    loader.load(new URLRequest(img), context); 
    ```

这适用于其他门户（facebook、mojmir、odnoklassiniki 等），但不是这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:40:04.317

如果要加载图像，可以使用 Image 标签：

```
 <mx:Image source="http://...." autoload="true" /> 
```

您不必处理跨域策略。

在 AScript 中，您可以使用：

```
var img:Image = new Image();
img.autoLoad = true;
img.source = "http://someurl/img.png"
img.addEventListener(Event.COMPLETE, function(e:Event):void {
   //loaded
});
img.addEventListener(IOErrorEvent.IO_ERROR, function(e:IOErrorEvent):void {
   //not loaded
}); 
```

# c++ - 对字符串数组进行自定义排序

> ID：12673187
> 
> 赞同：5
> 
> 时间：2012-10-01T12:23:21.850
> 
> 标签：c++, sorting

给定一个包含彩虹七种颜色但以随机顺序排列的字符串数组，我应该以某种方式对该数组进行排序以按该顺序输出红色、橙色、绿色、....、紫罗兰色。彩虹颜色的顺序。如何对这个数组进行排序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T12:27:14.967

您应该编写一个自定义比较器。这就是我将如何去做。

```
//somewhere in initalization code;
std::map<string, int> mapOrder;
mapOrder["red"] = 1;
mapOrder["orange"] = 2;
...
mapOrder["violet"] = 7;

bool isRainbowLess(const std::string& a, const std::string& b)
{
    return mapOrder[a] < mapOrder[b];
}

int main()
{
    std::vector<std::string> myVector;
    ....
    std::sort(myVector.begin(), myVector.end(), &isRainbowLess);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T14:06:58.700

好的，请不要马上投反对票。我知道这是一个不好的例子。我写它是因为 OP 专门要求一个非 STL 解决方案，并展示它（坏）会/可能会是什么样子。

好吧，你去。代码未完成。但是您应该了解总体思路。我跳过的一件事是整数本身的排序。因为它应该是微不足道的。如您所见，映射有点 PIA，看起来很糟糕。但是由于您禁止使用 STL，因此没有`std::map`. 此外，我暗示所有表的静态大小`N`。可以动态分配，没问题，也没有`std::vector`。

我使用`else if`s`map*`来模仿`std::map`功能。可能`switch ... case`可以使用，但它应该在一个体面的编译器上工作几乎相同。

我在下面编写的代码在提供的功能方面与 Armen 的代码几乎相同。我会推荐他的解决方案。我跳过了相同的部分。所以你可以看到它更丑，打字更多。它看起来几乎像纯 C。如果您真的渴望在非常大的情况下实现速度，也许可以进行一次修改。那将使用一个临时数据结构来保存映射值，对其进行排序，然后将其映射回来。确切地说，我建议避免在高性能约束下调用`map::operator[](const &T)`（或任何访问器）以避免散列计算。`std::string`但仅此而已。

还有一些要讨论的。就像您希望两种颜色具有相同的值或使用非整数权重一样。基于 STL 的解决方案更具适应性。

干杯。

编码：

```
/* This will map color literals (color names) to integers, which will associate them with 
   a numerical value, than can be used for comparison */
enum Colors { Red, Orange, Green, /*...*/ Violet };

/* this should read colors as std::string instances from the input array and assing
   the the appropriate color codes into output array at corresponding indexes     */
void mapString2Color( const std::string* input, int* output, size_t N ){
  for(size_t i = 0; i < N; i++){
    if ( input[i] == std::string("red") ) output[i] = Colors::Red;
    else if ( input[i] == std::string("orange") ) { output[i] = Colors::Orange; }
    else if ( input[i] == std::string("green") )  { output[i] = Colors::Green;  }
    /*...*/
    else if ( input[i] == std::string("violet") ) { output[i] = Colors::Violet; }
    else {/*unspecified color code */}
  }
}
/* this is supposed to do the opposite to mapString (i.e. put appropriate 
   string at output[i] based on input[i])  */
void mapColor2String( const int* input, std::string* output, size_t N ){
  for(size_t i = 0; i < N; i++){
    if ( input[i] == Colors::Red ) output[i] = std::string("red");
    else if ( input[i] == Colors::Orange ) { output[i] = std::string("orange"); }
    else if ( input[i] == Colors::Green  ) { output[i] = std::string("green");  }
    /*...*/
    else if ( input[i] == Colors::Violet ) { output[i] = std::string("violet"); }
    else {/*unspecified color index*/}
  }
}

void sort(int* array, size_t N){
 /* any in-place sort of your liking for table of (unsigned) integers */
}

main(){
  std::string[N] input_array;
  std::string[N] output_array;
  int[N] temp_array;

  //map (translate) colors to their numerical values
  mapString2Color(input_array, temp_array, N);
  //sort it
  sort(temp_array, N);
  //map (translate) the values back to color names
  mapColor2String(temp_array, output_array, N);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:39:50.513

我要做的第一件事是创建一个映射。您可以通过映射或通过线性迭代预排序的字符串数组并获取匹配条目的索引来执行此操作。一种非常简单的方法（实际上是出于演示目的）可能只是将逻辑编码为封装函数，如下所示：

```
int intForCol( const string& col ) 
{
    if ( col == "red" ) return 0; 
    else if ( col == "orange" ) return 1;
    else if ( col == "yellow" ) return 2;
    else if ( col == "green" ) return 3;
    else if ( col == "blue" ) return 4;
    else if ( col == "indigo" ) return 5;
    else if ( col == "violet" ) return 6;
    throw "Invalid colour"; 
} 
```

这将根据输入字符串提供一个排序整数。下一步是创建一个比较器：

```
int colComp( const string& lhs, const string& rhs )
{
    return intForCol( lhs ) - intForCol( rhs );
} 
```

这将允许我们将字符串一起比较返回负 if `lhs`<`rhs`和正 if `lhs`>`rhs`

现在可以在 STL 中使用它——或者作为关联容器中的比较器，或者直接在排序算法中使用——相对容易。或者，如果无法使用 STL，或者这样做的目的是了解排序的工作原理，您可以实现自己的排序，如下面的简单且（非常）低效的算法：

```
 const int col_size = 7;
    string input[col_size];
    input[0] = "indigo";
    input[1] = "green";
    input[2] = "red";
    input[3] = "blue";
    input[4] = "yellow";
    input[5] = "violet"; 
    input[6] = "orange";

    // simple bubble sort
    int passes = col_size;
    int last = col_size; 
    while ( passes-- )
    {
        for ( int i = 0; i < last - 1; ++i ) 
            if ( colComp( input[i], input[i+1] ) > 0 )
            {
                string temp = input[i]; input[i] = input[i+1]; input[i+1] = temp;
            }
        last--;
    } 
```

# nhibernate - NHibernate 复合元素代码映射

> ID：12673189
> 
> 赞同：2
> 
> 时间：2012-10-01T12:23:36.287
> 
> 标签：nhibernate, nhibernate-mapping, mapping-by-code

我正在尝试通过翻译“NHibernate in Action”中的示例来通过代码学习 NHibernate 映射，但其中一个示例有问题。我已经包含了我正在尝试翻译的 XML 以及我在翻译它时所做的努力。代码基本上在类别和项目之间具有多对多关系。它使用一个名为 CategorizedItem 的组件类来维护两个实体之间的关系。

我遇到的问题是，一旦我在 lambda 中声明了 Category 的 Items 属性，Item Class 的属性就是组件映射中唯一可供选择的属性。我想让映射知道 CategorizedItem 的属性是要在关系中映射的属性，但我不知道这是如何实现的。下面是我要翻译的 XML...

```
<set name="Items" table="CATEGORY_ITEM" lazy="true" >
  <key column="CATEGORY_ID"/>
  <composite-element class="CategorizedItem">
    <parent name="Category"/>
    <many-to-one name="Item" class="Item" column="ITEM_ID" not-null="true"/>
    <many-to-one name="User" class="User" column="USER_ID" not-null="true"/>
    <property name="DateAdded" column="DATE_ADDED" not-null="true"/>
  </composite-element>
</set> 
```

...这是我部分完成的映射。

```
Set(
    category => category.Items,
    map =>
    {
      map.Key(key =>
        {
          key.Column("CATEGORY_ID");

        });
      map.Table("CATEGORY_ITEM");
      map.Lazy(CollectionLazy.Lazy);
    },
    r => r.Component(m =>
    {
      m.Class

    })
  ); 
```

组件的类属性看起来像可能的目标，但它拒绝 CategorizedItem 作为类型参数。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T15:35:06.103

您快到了 - 在对组件的调用中，您需要设置组件的属性如何映射到关系表，即：

```
 Set(
            category => category.Items,
            map =>
                {
                    map.Key(key =>
                                {
                                    key.Column("CATEGORY_ID");

                                });
                    map.Table("CATEGORY_ITEM");
                    map.Lazy(CollectionLazy.Lazy);
                },
            r => r.Component(
                m =>
                    {
                        m.Parent(ci => ci.Parent);
                        m.ManyToOne(ci => ci.Item, r2 => r2.Column("ITEM_ID"));
                        m.ManyToOne(ci => ci.User, r2 => r2.Column("USER_ID"));
                        m.Property(ci => ci.DateAdded);
                    })
            ); 
```

# sql - 使用带有 LIKE 关键字的左外连接的 on 子句使用动态列表

> ID：12673190
> 
> 赞同：3
> 
> 时间：2012-10-01T12:23:37.440
> 
> 标签：sql, join, sql-like

我在表中有一个可以包含字符串的列`CSV`，我想使用 LIKE 对所有这些值运行查询，该 LIKE 是外连接的 ON 子句的一部分。

```
DECLARE @to VARCHAR(max) = (SELECT value FROM dbo.table WHERE id = 'key');
DECLARE @t table ( value varchar(max) )
INSERT INTO @t SELECT item FROM fn_csv_splitstring ( @to , ',' ) 
```

获得所有 CSV 值后，我现在希望将临时表中的每个值用作 LIKE 关键字的表达式，类似于以下选择

```
 SELECT * FROM 
 dbo.table e 
 where e.value LIKE '%' + (SELECT value FROM [@t]) + '%' 
```

确切的语句用于左外连接语句，ON 子句链接两个表行 ID `e.id = t.id`，然后有一个附加的 AND 表达式 `AND e.value LIKE 'col%'`此时我需要能够将我的临时表中的所有行作为一堆`OR LIKE '%'`或其他东西充当`LIKE '%' + (SELECT value FROM [@t]) + '%'`

我已经尝试过`IN`关键字，但`IN`似乎只适用于完全匹配而不是通配符。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:27:45.650

使用 EXISTS 检查 e.value 是否类似于 ANY t.value（通配符）

```
SELECT *
FROM dbo.table e
WHERE EXISTS (
    SELECT *
    FROM @t t
    WHERE e.value LIKE '%' + t.value + '%') 
```

# c# - 将 TimeSpan 从格式“hh:mm:ss”转换为“hh:mm”

> ID：12673194
> 
> 赞同：46
> 
> 时间：2012-10-01T12:24:11.660
> 
> 标签：c#, asp.net, textbox, timespan

我只想在文本框中显示小时和分钟

```
var test = dataRow.Field<TimeSpan>("fstart").ToString();  
//test ="08:00:00"  
var tb = (TextBox) gridViewRow.Cells[2].FindControl("fstart");
tb.Text = test; 
```

如何只显示小时和分钟`"hh.mm"`

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-10-01T12:29:04.213

您需要将数据转换为 TimeSpan，然后使用格式：`"hh\:mm"`

```
string test ="08:00:00";
TimeSpan ts = TimeSpan.Parse(test);
Console.Write(ts.ToString(@"hh\:mm")); 
```

在你的情况下：

```
var test = dataRow.Field<TimeSpan>("fstart").ToString(@"hh\:mm")); 
```

记得避开冒号`:`

您可能会看到：[自定义 TimeSpan 格式字符串](http://msdn.microsoft.com/en-us/library/ee372287.aspx)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-01T12:38:49.173

无需从 转换`hh.mm.ss`为`hh.mm`。`TimeSpan`存储为多个滴答声（1 个滴答声 == 100 纳秒）并且没有固有格式。您要做的就是将 转换`TimeSpan`为人类可读的字符串！这涉及格式化。如果您没有明确指定格式，将使用默认格式。在这种情况下`hh.mm.ss`。

```
string formatted = timespan.ToString(@"hh\.mm"); 
```

注意：`ToString`自 .NET 4.0 以来就存在这种重载。*它不支持日期和时间占位符分隔符！因此，您必须将它们包含为（转义的）字符串文字。*

由于某些奇怪的原因，格式化字符串的常用方法似乎不起作用（使用 .NET 3.5 测试）。（是否转义分隔符没有任何区别）：

```
var timespan = TimeSpan.FromSeconds(1234);
string formatted = String.Format(@"{0:hh\.mm}", timespan); // ==> 00:20:34 
```

但是，您可以像这样构造字符串

```
string formatted =
    String.Format("{0:00}.{1:00}", Math.Floor(timespan.TotalHours), timespan.Minutes); 
```

或从 VS2015 / C# 6.0 开始，使用字符串插值：

```
string formatted = $@"{timespan:hh\:mm}"; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-01T12:26:55.007

您可以使用 TimeSpan 方法：

```
ToString("hh':'mm")
// or
ToString(@"hh\:mm") 
```

还要在此处检查所有可用格式[http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-01T12:27:21.193

```
var test = dataRow.Field<TimeSpan>("fstart").ToString("hh.mm");  
//test ="08:00"  
var tb = (TextBox) gridViewRow.Cells[2].FindControl("fstart");
tb.Text = test; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-04-28T13:45:14.223

我知道这是一个非常古老的问题。如果有人想在您的小时数为一位数时显示一位数小时数，那么您可以使用

```
var hoursWithMinutes = TimeSpan.FromHours(hours).ToString(@"h\:mm") 
```

这样，当你的小时数是两位数时，我的意思是大于 9，那么它将显示 10:00 类似的东西。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-20T08:43:17.947

如果 hours>24 则以前的解决方案不会运行，如果您有非常多的时间（以分钟为单位），请尝试此解决方案

```
int minutes = 159000;
TimeSpan t = new TimeSpan(0, minutes, 0);

String HOURS = Math.Round(t.TotalHours, 0).ToString();
if (HOURS.Length==1)
{
    HOURS = "0"+HOURS;
}

String MINUTES = t.Minutes.ToString();
if (MINUTES.Length == 1)
{
    MINUTES = "0" + MINUTES;
}

String RESULT = HOURS + ":" + MINUTES; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-16T10:11:40.793

您可以通过以下方式实现：

```
 var hhmm = TimeSpan.FromMinutes(minutes).ToString(@"hh\:mm") 
```

# uitableview - UITableView 和 UIRefreshControl

> ID：12673197
> 
> 赞同：14
> 
> 时间：2012-10-01T12:24:41.560
> 
> 标签：uitableview, uirefreshcontrol

我正在尝试将 UIRefreshControl 移动到我的 headerView 之上，或者至少让它与 contentInset 一起使用。有谁知道如何使用它？

在 TableView 中滚动时，我使用 headerView 来获得漂亮的背景。我想要一个可滚动的背景。

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
// Set up the edit and add buttons.

self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone;
self.tableView.backgroundColor = [UIColor clearColor];

[self setWantsFullScreenLayout:YES];

self.tableView.contentInset = UIEdgeInsetsMake(-420, 0, -420, 0);

UIImageView *top = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"top.jpg"]];
self.tableView.tableHeaderView = top;

UIImageView *bottom = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"bottom.jpg"]];
self.tableView.tableFooterView = bottom;

UIBarButtonItem *leftButton = [[UIBarButtonItem alloc]initWithImage:[UIImage imageNamed:@"settingsIcon"] style:UIBarButtonItemStylePlain target:self action:@selector(showSettings)];
self.navigationItem.leftBarButtonItem = leftButton;

UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(addList)];
self.navigationItem.rightBarButtonItem = addButton;

//Refresh Controls
self.refreshControl = [[UIRefreshControl alloc] init];

[self.refreshControl addTarget:self action:@selector(refreshInvoked:forState:) forControlEvents:UIControlEventValueChanged];
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-16T15:56:20.997

我不太确定您对 contentInset 的意图是什么，但就将 UIRefreshControl 添加到 UITableView 而言，可以做到。UIRefreshControl 实际上是与 UITableViewController 一起使用的，但如果你只是将它作为子视图添加到 UITableView 中，它就会神奇地工作。请注意，这是未记录的行为，可能在另一个 iOS 版本中不受支持，但它是合法的，因为它不使用私有 API。

```
- (void)viewDidLoad
{
    ...
    UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
    [refreshControl addTarget:self action:@selector(handleRefresh:) forControlEvents:UIControlEventValueChanged];
    [self.myTableView addSubview:refreshControl];
}

- (void)handleRefresh:(id)sender
{
    // do your refresh here...
} 
```

感谢@Keller[注意到这一点](https://stackoverflow.com/a/12502450/337392)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-29T21:16:22.870

@Echelon's answer is spot on, but I have one minor suggestion. Add the refresh control as a @property so you can access it later.

in YourViewController.h

```
@property (nonatomic, strong) UIRefreshControl *refreshControl; 
```

in YourViewController.m

```
-(void) viewDidLoad {
    self.refreshControl = [[UIRefreshControl alloc] init];
    [self.refreshControl addTarget:self action:@selector(refresh) forControlEvents:UIControlEventValueChanged];
    [self.tableView addSubview:self.refreshControl]; //assumes tableView is @property
} 
```

And the big reason to do it this way...

```
-(void)refresh {
    [self doSomeTask]; //calls [taskDone] when finished
}

-(void)taskDone {
    [self.refreshControl endRefreshing];
} 
```

Just gives you class-wide access to the UIRefreshControl so you can endRefreshing or check the isRefreshing property of UIRefreshControl.

# c# - 获取第一行加入

> ID：12673198
> 
> 赞同：0
> 
> 时间：2012-10-01T12:24:46.043
> 
> 标签：c#, linq, join

我有一个连接两个表的 linq 查询（实际数据库中没有关系）

关系是：公司 1 - n 电话

```
var miniCompanies =
    (from companies in db.Companies 
     join phones in db.Phones on companies.Id equals phones.CompanyId
     select new
     {
         companies.Name,
         phones.Phone,
     }).ToList().Distinct(); 
```

这会返回类似：

```
----------------------------
company1     |    12345    |
----------------------------
company1     |    23456    |
----------------------------
company2     |    43242    |
----------------------------
company2     |    34234    |
----------------------------
company2     |    65442    |
---------------------------- 
```

我只需要获取电话表中的第一个而不是所有内容怎么做？
编辑：也许我不清楚要为此感到抱歉。
我 ment:
----------------
company1 | 12345 |
----------------------------
公司2 | 43242 |
----------------------------

我想要每个公司的第一部电话

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:55:39.223

您可以使用 GroupBy：

```
var miniCompanies =
(from companies in db.Companies 
 join phones in db.Phones on companies.Id equals phones.CompanyId
 select new
 {
     companies.Name,
     phones.Phone,
 }).GroupBy(c=>c.Name).Select(c=>c.FirstOrDefault()).ToArray(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-01T12:27:15.793

1 你可以试试`First operator`

```
(from companies in db.Companies 
 join phones in db.Phones on companies.Id equals phones.CompanyId
 select new
 {
     phones.Phone,
 }).First(); 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/vstudio/system.linq.queryable.first.aspx](http://msdn.microsoft.com/fr-fr/library/vstudio/system.linq.queryable.first.aspx)

2 你也可以使用`FirstOrDefault`

链接：http: [//msdn.microsoft.com/fr-fr/library/vstudio/system.linq.queryable.firstordefault.aspx](http://msdn.microsoft.com/fr-fr/library/vstudio/system.linq.queryable.firstordefault.aspx)

3 你也可以使用`Take(1);`

链接：http: [//msdn.microsoft.com/fr-fr/library/vstudio/bb300906.aspx](http://msdn.microsoft.com/fr-fr/library/vstudio/bb300906.aspx)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-01T12:29:26.887

我会使用以下内容：

```
var miniCompanies =
(from companies in db.Companies 
 join phones in db.Phones on companies.Id equals phones.CompanyId
 select new
 {
     companies.Name,
     phones.Phone,
 }).ToList().Distinct().FirstOrDefault(); 
```

'FirstOrDefault()' 方法将返回集合中的第一项。如果集合不包含任何元素，则将返回默认对象。对于可空类型，这将是一个“空”对象。这是防止您的应用程序由于与空集合相关的异常而失败的好方法。

# jquery - 对 JSON 输出进行排序（Chrome 问题）

> ID：12673200
> 
> 赞同：1
> 
> 时间：2012-10-01T12:24:54.103
> 
> 标签：jquery, json, sorting

我有一个从 MySQL 数据库中提取数据并输出 JSON 的函数。这是一个结果示例：

```
{"success":"true","message":"Data loaded","data":{"11":{"id":"11","timestamp2":1349091206,"timestamp":" 1\. oktober kl. 13:33","date_from":"25\. oktober kl. 8:45","date_to":"25\. oktober kl. 8:45","initials":"rt","trafikselskab":"Sydtrafik","alarm_comment":"sr6yer6y","transport_comment":"et6et7","vogn_comment":"uet7uet7","events_comment":"rt7ujrt7ury7u","system_comment":"urt7j","other_comment":"ry8kykytik"},"10":{"id":"10","timestamp2":1349091195,"timestamp":" 1\. oktober kl. 13:33","date_from":" 1\. oktober kl. 1:40","date_to":" 1\. oktober kl. 1:40","initials":"rt","trafikselskab":"Sydtrafik","alarm_comment":"sr6yer6y","transport_comment":"et6et7","vogn_comment":"uet7uet7","events_comment":"rt7ujrt7ury7u","system_comment":"urt7j","other_comment":"ry8kykytik"},"9":{"id":"9","timestamp2":1349089753,"timestamp":" 1\. oktober kl. 13:09","date_from":"25\. oktober kl. 8:15","date_to":"25\. oktober kl. 14:15","initials":"PSH","trafikselskab":"Midttrafik","alarm_comment":"ftyhdrtyh","transport_comment":"dtyjtr7j","vogn_comment":"rtyujkytik","events_comment":"yuilyiol","system_comment":"tuikul","other_comment":"yuolyu9lio"},"8":{"id":"8","timestamp2":1348230434,"timestamp":"21\. september kl. 14:27","date_from":"27\. september kl. 8:30","date_to":"21\. september kl. 8:30","initials":"PSH","trafikselskab":"Movia","alarm_comment":"srtyh","transport_comment":"dyh","vogn_comment":"dtyjhdtyj","events_comment":"teyhtryj","system_comment":"dtyhteyj","other_comment":"trydjrtyuj"}}} 
```

我有一个 JS 函数，它从 JSON 中获取数据并将其放入 HTML 标记中：

```
function overlevering() {
$.getJSON('/test/ajax2.php?type=test', function(data) {
    if(data.data != '') {
        $.each(data.data, function(fravaer, type) {
                $('#overlevering').append('<article id="'+ type.timestamp2 +'"><h2>Modtaget '+ type.timestamp +'</h2><p class="from">Periode: '+ type.date_from +' - '+ type.date_to +'</p><p class="from">Fra '+ type.initials +', '+ type.trafikselskab +'</p><h3>Alarmer, der kræver særlig opmærksomhed</h3><p>'+type.alarm_comment+'</p><h3>Information vedr. teletaxer, flexture og handicapture</h3><p>'+type.transport_comment+'</p><h3>Information vedr. vogne, vognmænd og centraler</h3><p>'+type.vogn_comment+'</p><h3>Information vedr. systemer</h3><p>'+type.system_comment+'</p><h3>Information vedr. begivenheder, der kan påvirke driften</h3><p>'+type.events_comment+'</p><h3>Øvrige</h3><p>'+type.other_comment+'</p></article>');

        });
    }
});
} 
```

在 Safari 中访问结果页面时，结果会按照 JSON 格式（按日期）进行排序。然而，在 Chrome 中，它们似乎没有按照任何规则进行排序，只是被扔在那里。

我想不可能在 JSON 中排序，那么我该如何解决这个问题，并始终在顶部显示最新的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:32:11.673

实际上可以对 JSON 数组进行排序。基本上，一旦你得到它，它就只是一个 javascript 对象。

这是一个示例：[按值排序 JSON](https://stackoverflow.com/questions/881510/json-sorting-in-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:35:49.640

啊，我想通了。我使用 JS 的 sort() 方法在 getJSON 之后对数据进行排序：

```
 var articles = $("#overlevering article");

        articles.sort(function(a,b) {
        if (a.id < b.id) return 1;
        else if (a.id > b.id) return -1;
        else return 0
    })

    $("#overlevering").empty().append( articles ); 
```

# three.js - 导出凹凸贴图和高光贴图

> ID：12673204
> 
> 赞同：2
> 
> 时间：2012-10-01T12:25:09.123
> 
> 标签：three.js, bump-mapping, specular

我已经看到了新的 MeshPhongMaterial Bump 和 Specular 高光，迫不及待地想将它们加入我的游戏引擎。目前我正在使用 python 转换器将 OBJ 文件转换为 .js 文件。然而，51 版出口商似乎无法处理这些材料。

我还担心我的大多数网格都有 2 种或更多材料，并且正在使用 MeshFaceMaterial。

更改为 MeshPhongMaterial 会破坏多个纹理吗？我应该使用不同的出口商来实现这一目标吗？使用凹凸贴图和高光贴图从 .3ds 文件转换的最佳工作流程是什么？我应该等待一段时间让这个话题平静下来吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:01:55.817

我假设您已经使用了漫反射纹理（也许是兰伯特材质？），因此也导出了纹理坐标。

您可以手动将属性添加`mapBump`到`mapSpecular`.js 模型文件中的相关材料。它们是指向纹理的字符串，就像`mapDiffuse`. 还将属性更改`shading`为“Phong”，您应该一切顺利，尽管您可能还想调整`specularCoef`和`colorSpecular`材料属性。

简单地切换材料类型不会破坏面材。

# javascript - 如何在 before_save 过滤器中运行 JavaScript 函数以在保存到数据库之前替换某些值？

> ID：12673211
> 
> 赞同：0
> 
> 时间：2012-10-01T12:25:31.383
> 
> 标签：javascript, ruby-on-rails, before-save

我已经分类，用户选择。如果用户选择“自动”，我需要用结果替换它，这是什么给了我的 JavaScript 功能 - 设置默认浏览器语言。

这是 JS 函数的 JavaScript 示例 - [http://fiddle.jshell.net/xCgsb/](http://fiddle.jshell.net/xCgsb/)

这是我在网站模型中的 before_save 过滤器：

```
before_save :auto_language

def create
 website = current_user.websites.new params[:website]
 if @website.language == "Auto"
  @website.language = request.env['HTTP_ACCEPT_LANGUAGE'].scan(/^[a-z]{2}/).first
 end
...
#error
undefined local variable or method `request' for #<Website:0x244e1b0> 
```

有人可以帮我解决这个问题吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:22:15.177

您不应该使用 Javascript 来设置您的默认语言环境。

看看这个：

[http://guides.rubyonrails.org/i18n.html#setting-the-locale-from-the-client-supplied-information](http://guides.rubyonrails.org/i18n.html#setting-the-locale-from-the-client-supplied-information)

他们使用 Ruby 来检测语言环境

```
def set_locale
   logger.debug "* Accept-Language: #{request.env['HTTP_ACCEPT_LANGUAGE']}"
   I18n.locale = extract_locale_from_accept_language_header
   logger.debug "* Locale set to '#{I18n.locale}'"
end  

private

def extract_locale_from_accept_language_header
    request.env['HTTP_ACCEPT_LANGUAGE'].scan(/^[a-z]{2}/).first
end 
```

如果你想获得完整的语言，你可以使用 switch case：

```
def full_language_name(lang) 
  case lang
    when 'ru'
      return 'Russian'
    when 'en'
      return 'English'
    when 'fr'
      return 'French'
    else
      return 'English'
end 
```

如果这些条件均未得到验证，则“else”情况是默认行为。关键字“return”是可选的。

希望这可以帮助！

# java - HTTP 状态 405 - 使用 WebServices 调用 DELETE 方法时出现方法不允许错误

> ID：12673212
> 
> 赞同：2
> 
> 时间：2012-10-01T12:25:33.603
> 
> 标签：java, web-services, rest, jersey, jax-rs

我正在尝试使用以下@DELETE 方法从“联系人”表中删除“联系人”（使用 Jersey 框架（JAX-RS 实现）

```
@DELETE
@Path("/delete/{contact}")
public String deleteContact(@PathParam("contact") String name) throws ClassNotFoundException, SQLException {

    String response = DAOaccess.deleteContact(name);
    return response; 
} 
```

以下 url 用于从浏览器调用 web 服务：

**/联系人/删除/联系人姓名**

**但是 HTTP Status 405 - Method Not Allowed**这样做会引发。

可能是什么原因？我该如何克服呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T12:43:34.177

**URL** = **/联系人/删除/联系人姓名**

405 因为

似乎 delete 总是表现得像`submit (Post method)` 你试图`get`从`URL`. `This is not possible to call the post method as like get`. 如果你真的想从浏览器调用这个 web 服务进行测试，只需下载一个`Mozilla plugin (Poster)`它会帮助你在你的所有方法类型中提交 web 服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T13:26:10.810

如果您使用的是 Firefox，请使用[此](https://addons.mozilla.org/en-US/firefox/addon/restclient/)插件来测试您的服务。当您从浏览器直接点击 URL 时，它会作为`@GET`请求发送，在这种情况下是不允许的。[`RestClient`](http://code.google.com/p/rest-client/)也可作为独立应用程序使用。如果您需要更多功能，请尝试`SoapUI`. 我还在 上发布了对您的[问题`@DELETE`](https://stackoverflow.com/questions/12670169/not-able-to-invoke-an-delete-web-service-in-rest-jersey)的回复。

# javascript - 创建操作后的 Rails 模态弹出窗口

> ID：12673215
> 
> 赞同：0
> 
> 时间：2012-10-01T12:25:41.130
> 
> 标签：javascript, ruby-on-rails, popup, modal-dialog

我在我的 Rails 应用程序中有一个简单的投票操作，我希望在成功的创建操作后显示一个模式弹出窗口（如 twitter 引导程序中的 on）。我有一个模态视图部分，一个接受 .js 的 respond_to 块和一个 create.js.erb 文件，理论上应该在调用 create 操作时显示，如果我没记错的话？

我只是不太明白如何将所有这些东西连接在一起，（我也认为javascript不正确）任何提示都会非常感谢！

控制器.rb

```
def create
    @vote = Vote.new(params[:vote])
    respond_to do |format|
    if @vote.save
      format.html { redirect_to :back,  notice: "Thank you for voting! why not Tweet your vote?" }
      format.js  <!--should there be a call to a specific file here?-->
    else
      flash[:error] = "please try again"
      redirect_to :back
    end
    end
  end
end 
```

投票/info.html.erb

```
<div class="modal hide fade">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3>Thanks for voting!</h3>
  </div>
  <div class="modal-body">
    <p>Why not tweet your selection?</p>
  </div>
  <div class="modal-footer">
    <a href="#" class="btn">Close</a>
    <a href="#" class="btn btn-primary">Save changes</a>
  </div>
</div> 
```

投票/create.js.erb

```
$(".modal").html(<%= escape_javascript render partial: 'votes/info' %>);
$(".modal").show(); 
```

投票_form.html.erb

```
<%= form_for([Vote.new(hotel_id: hotel.id)]) do |f| %>
    <%= f.hidden_field :hotel_id %>
    <%= f.submit "Vote", class: "btn-large btn-info" %>
    <% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:59:26.977

您没有向我们展示 votes/new.html.erb 但我认为问题在于`<div class="modal hide fade">`需要在该文件中，而不是部分。此外，请确保部分文件名以下划线“_info.html.erb”开头。

# java - JFree Barchart DefaultCategoryDataset 值被替换

> ID：12673216
> 
> 赞同：1
> 
> 时间：2012-10-01T12:25:46.823
> 
> 标签：java, jakarta-ee, jfreechart

在创建条形图时，我以以下方式填充数据集

```
DefaultCategoryDataset dataset = new DefaultCategoryDataset();

dataset.setValue(40, "ram", "sunday");
dataset.setValue(50, "ram", "monday");
dataset.setValue(40, "arun", "sunday");
dataset.setValue(50, "arun", "sunday"); 
```

在最后一条语句中，值为 .，在上一条语句中，`50,arun,sunday`值为`40,arun,sunday`.。在数据集中，始终考虑值 50，始终覆盖值 40。

我需要保留它。不知道该怎么做。有什么我想念的吗？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:36:33.053

`DefaultCategoryDataset`在内部使用[DefaultKeyedValues2D](http://www.jfree.org/jfreechart/api/gjdoc/org/jfree/data/DefaultKeyedValues2D.html)存储值。

[正如在DefaultKeyedValues2D#setValue](http://www.jfree.org/jfreechart/api/gjdoc/org/jfree/data/DefaultKeyedValues2D.html#setValue%3aNumber%3aComparable%3aComparable)的 Java 文档中所说。

> 添加或更新一个值。

这就是为什么如果您使用相同的值会更新您的值`key`。这里的关键是指`arun`

# ruby - HTML5 视频和 Rails 3

> ID：12673218
> 
> 赞同：5
> 
> 时间：2012-10-01T12:25:55.320
> 
> 标签：ruby, ruby-on-rails-3, html, html5-video

在过去的 2 个小时里，我一直在尝试使 HTML5 视频正常工作。有人可以告诉我我做错了什么吗？我有一个家庭控制器，它只有一个被调用的动作`index`，我用它来呈现主页（index.html.erb）。我的路线文件是：

```
TEST::Application.routes.draw do
  get "home/index"

  root :to => 'home#index'

..
.. 
```

我的 index.html.erb 文件只有以下几行：

```
<div class="row"> <h3>TEST </h3> </div>

<div class="row">

    <div class="span12">
        <%= video_tag("test_video_1.ogg", :size => "320x240", :controls => true, :autobuffer => true) %>
    </div>

</div> 
```

我将此添加到我的“config/application.rb”文件中：

```
# Enable the asset pipeline
config.assets.enabled = true
config.assets.paths << "#{Rails.root}/app/assets/videos" 
```

愚蠢的视频文件在那里。在“/app/assets/videos”中。我正在使用瘦服务器。现在为什么我会得到这个错误？

```
Started GET "/videos/test_video_1.ogg" for 127.0.0.1 at 2012-10-01 13:13:00 +0100

ActionController::RoutingError (No route matches [GET] "/videos/test_video_1.ogg"): 
```

有人可以解释一下发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T01:21:51.157

它似乎`video_tag`在您的公用文件夹下查找内容，因此您有两个选择。将您的视频放在 public/videos 下，并从资产路径中删除额外的路径，或手动编写指向“assets/test_video_1.ogg”的视频标签。（注意这里缺少“视频”）

[http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-video_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-video_tag)

# javascript - 使用 javascript self.location 和正则表达式创建“下一页”按钮

> ID：12673221
> 
> 赞同：0
> 
> 时间：2012-10-01T12:25:57.837
> 
> 标签：javascript, regex

我对一个非常简单的功能有疑问。这是一个“下一页”按钮，无论我做什么，它都会简单地返回“未定义”。

```
<script>
    $(document).ready(function() { 
    $('#nextButton').click(function() {
            rgx = /page=(\d+)/g;
            page = rgx.exec(self.location)[1];
            var pageNow = parseInt(page);
            var pageNext = pageNow + 1;
            if (page >= 1) {
                var url = self.location;
                self.location = url.replace('&page=' + pageNow, '&page=' + pageNext);
            }
        });
    });
    </script>

<body>
<button id="nextButton">Next</button>
</body> 
```

该按钮当前重定向到带有未定义 url 结尾的页面。

提前道歉，因为您在基本问题上占用了您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:37:38.523

我认为`self.location`是一个位置对象。尝试`self.location.href`改用。

```
 if (page >= 1) {
        var url = self.location.href;
        self.location.href = url.replace('&page=' + pageNow, '&page=' + pageNext);
    } 
```

# ios - iOS - NSConcreteData 崩溃

> ID：12673232
> 
> 赞同：2
> 
> 时间：2012-10-01T12:26:26.330
> 
> 标签：ios, printing, crash

我有一个`UIButton`链接到一些调用`UIPrintInteractionController`以打印 PDF 文档的代码。

如果我点击按钮，会弹出视图让我选择打印机，然后打印文档。但是，如果我在视图外部点击以关闭弹出窗口，然后再次*快速*点击“打印”按钮，则会出现以下崩溃：

```
[NSConcreteData respondsToSelector:]: message sent to deallocated instance 0xa4696d0 
```

我在启用 NSZombies 的情况下进行了调试，崩溃发生在这一行：

```
printController.printingItem = dataToPrint; 
```

`dataToPrint`以相同的方法实例化，但在此`printController`行之前：

```
NSData *dataToPrint = [NSData dataWithContentsOfFile:pdfFileName]; 
```

只有当我快速点击时才会发生这种崩溃，如果我给它一秒钟，一切都会顺利进行。

有人知道这可能是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T15:13:28.167

使“dataToPrint”成为一个强大的 ivar，并且只有在您 100% 确定它不会再次使用时才将其设为 nil。'printController.printingItem' 很可能会保留它，但是当您关闭弹出窗口时，它会在再次点击“打印”按钮之前被释放。

# php - 如何在 Magento 中取消操作

> ID：12673235
> 
> 赞同：0
> 
> 时间：2012-10-01T12:26:32.220
> 
> 标签：php, magento, magento-1.7

我正在尝试更改顶级链接结构。我不想在默认主题中弄乱 xml 文件。我只有一个包含所有内容的 xml 文件。我不想在我的主题布局文件夹中创建多个 xml 文件。我正在尝试取消 top.links 块内的操作。

这是我想要做的方式：

```
<reference name="top.links">
  <action method="unsetChild"><child>addLink</child></action>
      <!--  <remove name="checkout_cart_link" /> -->
</reference> 
```

当我放置删除标签时，它可以完美运行。但是，当我尝试为 addLink 操作执行 unsetChild 时，它不起作用。你知道我应该如何解决这个问题吗？我不想要与默认主题中名称相同的单独 xml 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:06:38.407

该`unsetChild`函数来自抽象块模型，用于删除当前块的子块。具有名称的块`top.links`没有称为 addLink 的子块，因此您的配置没有做任何事情。具有该方法的操作节点`addLink`调用块上的 addLink 函数`Mage_Page_Block_Template_Links`。如果目标是删除其中一个链接，则需要使用 action `removeLinkByUrl`。

```
<reference name="top.links">
  <action method="removeLinkByUrl"><url>link/here</url></action>
</reference> 
```

确切的论点显然取决于您要删除的链接。

# ruby - ruby 使用管道时捕获输入

> ID：12673236
> 
> 赞同：1
> 
> 时间：2012-10-01T12:26:32.607
> 
> 标签：ruby

我有一个通过管道运行的脚本，它似乎不想捕获用户输入。

这是最简单的例子：

```
 echo "gets.chomp" | ruby
 -:1: private method `chomp' called for nil:NilClass (NoMethodError) 
```

目标是确认一个动作（你确定要这样做吗？是/否：）。使用管道时如何捕获输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:50:47.843

$stdin = IO.new(IO.sysopen('/dev/tty', 'r'), 'r')

# hover - CSS：发光文本非常宽和高

> ID：12673240
> 
> 赞同：2
> 
> 时间：2012-10-01T12:26:48.903
> 
> 标签：hover, css, glow

我从几天开始就在研究 box-shadow 和 text-shadow 。我试图获得以下效果。`<a>`我想从曾经盘旋的文字中散发出光芒。很简单，这应该很容易，因为我使用 text-shadow 进行了探索。好的，但它适用于小光晕，我的意思是，一旦光晕变大，由于它的高度模糊，你就看不到光晕。必须有一个解决方案。一张图片将比 100 个单词更好地解释。

这就是我想要获得的：

**关联：**

![在此处输入图像描述](../Images/05edc587fdfaafc58a66e2d096d8c5c3.png)

**徘徊：**

![在此处输入图像描述](../Images/bbe31d0b5ac6e5452e60d31c5a460279.png)

这是我用过的代码

```
#projectBox a:LINK{
    background-image: url('../_img/showcase/projectTabs/link.png');
}

#projectBox a:HOVER{
    background-image: url('../_img/showcase/projectTabs/link.png');
    color:#fa0000;
    text-shadow: 0 0 80px white;
} 
```

我知道我可以再次使用背景图像进行悬停，但我想避免这种情况。问题是如果你添加更多的模糊它就不会再出现了，因为它太模糊了。其他两个属性没有太大帮助，因为我希望发光从中间开始。

让我们一起解决这个问题，看看我们如何使用 CSS 实现宽高的发光效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T12:36:34.493

您可以添加多个文本阴影：

```
text-shadow: 
-3px 0px 10px #FFF,
3px 0px 10px #FFF,
0px 0px 10px #FFF,
-3px -3px 10px #FFF,
3px -3px 10px #FFF,
0px -3px 10px #FFF,
-3px 3px 10px #FFF,
3px 3px 10px #FFF,
0px 3px 10px #FFF; 
```

这将为您提供更宽、更饱满的光晕，因为文本周围有 9 个单独的阴影。调整值以获得您正在寻找的强度。

（这些值是随机猜测的 - 未经测试，因为我在我的手机上）:)

[http://jsfiddle.net/pzMmC/](http://jsfiddle.net/pzMmC/) -

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T12:43:27.330

您可以叠加同心阴影以增加效果：

```
a:hover {
    text-shadow: 0 0 80px white,
                 0 0 70px white,
                 0 0 60px white,
                 0 0 50px white,
                 0 0 40px white,
                 0 0 30px white;
} 
```

我写了一个测试：http: [//jsfiddle.net/simbirsk/DnHKk/](http://jsfiddle.net/simbirsk/DnHKk/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T12:42:40.290

为什么不使用 CSS3 的渐变？

看看[这个](http://jsfiddle.net/TT9sk/)小提琴。

[您可以在此处](http://www.colorzilla.com/gradient-editor/)或[此处](http://ie.microsoft.com/testdrive/graphics/cssgradientbackgroundmaker/default.html)生成自己的渐变。

# java - Glassfish 将字符串“ejb”附加到特定 mobule 的 EJB 的 JNDI

> ID：12673246
> 
> 赞同：4
> 
> 时间：2012-10-01T12:26:58.643
> 
> 标签：java, jakarta-ee, glassfish, ejb, glassfish-3

我有一个带有多个 EJB jar 的 EAR，例如：

*   模块1.jar
*   模块2.jar

但是当我在日志中部署应用程序时，我可以看到`module1.jar`部署的 ejb-s 使用了一个奇怪的 JNDI 名称：

*   EJB ejb1 的可移植 JNDI 名称：`java:global/myappl/`**module1ejb**`/ejb1`
*   EJB ejb2 的可移植 JNDI 名称：`java:global/myappl/`**module1ejb**`/ejb2`

但其余模块会定期部署（不`ejb`以模块名称结尾）：

*   EJB ejb1 的可移植 JNDI 名称：`java:global/myappl/`**module2**`/ejb1`
*   EJB ejb2 的可移植 JNDI 名称：`java:global/myappl/`**module2**`/ejb2`

是什么让 Glassfish 附加以 JNDI 结尾的**“ejb” ？**

Glassfish 版本：3.1.1

重启几次，delete generated，osgi-cache等都无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T14:01:08.723

最后我发现了问题：在`application.xml`定义中`module1`偶尔加倍：

```
<module>
    <ejb>module1.jar</ejb>
</module>
...
<module>
    <ejb>module1.jar</ejb>
</module> 
```

删除重复项后，JNDI 名称再次正常。

# c# - DevExpress LayoutView cardchange

> ID：12673247
> 
> 赞同：0
> 
> 时间：2012-10-01T12:27:06.440
> 
> 标签：c#, winforms, devexpress, xtragrid

我有一个带有 LayoutView 的 XtraGrid。我使用轮播在此视图中显示我的卡片。是否有可能对“ActiveCardChanged”事件或某事做出反应。像这样。我刚刚找到“FocusedRowChanged”，但如果我单击活动卡，这只会做出反应。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T18:08:09.463

我建议您使用[LayoutView.VisibleRecordIndexChanged](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsLayoutLayoutView_VisibleRecordIndexChangedtopic)事件。此事件在 Layout View 滚动并且当前可见卡片的索引发生更改时引发。

# html - IE 8 边框半径不起作用

> ID：12673250
> 
> 赞同：1
> 
> 时间：2012-10-01T12:27:12.847
> 
> 标签：html, css

> **可能重复：**
> [在 IE 中支持“border-radius”](https://stackoverflow.com/questions/635851/support-for-border-radius-in-ie)

在 IE 中创建网站时遇到问题

```
-moz-border-radius:8px;
border-radius:8px; 
```

有什么方法可以`border-radius`在 IE 8 中实现吗？有谁知道如何实现边界的透明度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T12:31:36.270

您可以使用 .htc 文件拼凑边框半径。我会选择 CSS3PIE - [http://css3pie.com/](http://css3pie.com/)但还有其他可用的 - [http://code.google.com/p/curved-corner/downloads/detail?name=border-radius.htc](http://code.google.com/p/curved-corner/downloads/detail?name=border-radius.htc)

将文件上传到您的服务器到网站根目录，然后在任何应用了边框半径的 CSS 选择器中添加这个

```
behavior: url(path/to/PIE.htc); 
```

**笔记：**

由于一些经典的 Microsoft 胡言乱语，.htc 文件路径必须指向服务器的根目录。它们与**CSS**文件无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:45:09.707

IE8 不支持边框半径：所以你可以试试[http://css3pie.com/](http://css3pie.com/)

# c++ - C++中对象的继承和双端队列

> ID：12673253
> 
> 赞同：1
> 
> 时间：2012-10-01T12:27:15.630
> 
> 标签：c++, inheritance, deque

我有多个这样组织的控件：

```
deque<wxTextCtrl*> dequeEdit;
deque<wxStaticText*> dequeText;
deque<wxComboBox*> dequeCombo; 
```

所有这些控件都继承自 wxWindow，它具有显示方法。我想一次显示（或隐藏）整个双端队列，而不需要为每个双端队列使用多种方法。怎么可能做到？

我正在考虑为每个控件制作 wxWindow 的双端队列，所以我可以编写方法

```
ShowDeque(deque<wxWindow*> deque) 
```

所以显示会很容易，但另一方面，如果我想使用例如组合框，我必须将它输入回 wxComboBox。还有其他可能吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:31:10.433

利用：

```
for_each(dequeEdit.begin(), dequeEdit.end(), mem_fun(&wxWindow::Show)); 
```

对于任何其他双端队列也是如此。

或者封装在一个函数中：

```
template <class Deque>
void showAll(const Deque& dequeObj)
{
   using namespace std;
   for_each(dequeObj.begin(), dequeObj.end(), mem_fun(&wxWindow::Show));
}

showAll(dequeEdit); 
```

1.  `std::for_each`：[http ://en.cppreference.com/w/cpp/algorithm/for_each](http://en.cppreference.com/w/cpp/algorithm/for_each)
2.  `std::mem_fun`：[http ://en.cppreference.com/w/cpp/utility/functional/mem_fn](http://en.cppreference.com/w/cpp/utility/functional/mem_fn)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:32:01.240

您可以使用函数模板。

```
template <typename T>
void show_all(const std::deque<T*>& d) {
    for (typename std::deque<T*>::iterator it=d.begin(); it!=d.end(); ++it)
        (*it)->Show();
} 
```

然后，您可以像调用普通函数一样调用它。

```
deque<wxTextCtrl*> dequeEdit;
deque<wxStaticText*> dequeText;
deque<wxComboBox*> dequeCombo;

show_all(dequeEdit);
show_all(dequeText);
show_all(dequeCombo); 
```

使用函数模板，您甚至可以`show_all`通过添加额外的模板参数来独立于您使用的容器。

```
template <typename C, typename T>
void show_all(const C<T*>& d) {
    for (typename C<T*>::iterator it=d.begin(); it!=d.end(); ++it)
        (*it)->Show();
} 
```

`C`然后可以是任何 STL 容器，甚至可以是任何支持相同迭代器接口的容器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T12:32:25.997

如果它是一个简单的方法，让它成为一个模板：

```
template <typename WxT>
void ShowDeque(std::deque<WxT*> &d) { ... } 
```

或者更好的是，使用迭代器来抽象出容器类型：

```
template <typename WxIter>
void ShowDeque(WxIter begin, WxIter end) { ... } 
```

或者更好的是使用标准设施（Piotr 在我打字的时候打败了我！）

# javascript - JavaScript 不会使用 HTML DOM 显示日期

> ID：12673257
> 
> 赞同：1
> 
> 时间：2012-10-01T12:27:25.483
> 
> 标签：javascript, dom

我正在使用一个名为 showDate() 的 JavaScript 函数，它传递了一个参数（称为 id）。我试图让函数显示带有在函数调用中传递给函数的 innerHTML 属性的日期。

这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
<title>My bored html</title>
<script type = "text/javascript">
function showDate(id)
{
document.getElementById(id).innerHTML = Date();
}
</script>
</head>
<p id = "Datepara" style = "font-family:comic sans ms;color:orange;text-align:center;font-size:25px;">
Date: 24/9/12 <br /><br /><br/>
</p>
<input type = "button" onclick = "showDate(Datepara)" value = "Display today's date" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:29:03.927

改变

```
showDate(Datepara) 
```

经过

```
showDate('Datepara') 
```

否则，您将传递 html 元素而不仅仅是 id。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T12:29:56.287

您需要在元素的 id 字符串周围加上引号：

```
<!DOCTYPE html> 
<html> 
<head> 
<title>My bored html</title> 
<script type = "text/javascript"> 
function showDate(id) 
{ 
document.getElementById(id).innerHTML = Date(); 
} 
</script> 
</head> 
<p id = "Datepara" style = "font-family:comic sans ms;color:orange;text-align:center;font-size:25px;"> 
Date: 24/9/12 <br /><br /><br/> 
</p> 
<input type = "button" onclick = "showDate('Datepara')" value = "Display today's date" /> 
</body> 
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T12:40:36.990

最好的方法是：

```
<input type = "button" onclick = "show Date('Datepara')" value = "Display today's date" /> 
```

我希望这是有帮助的。

# javascript - 由于不兼容而停止加载带有消息的网站

> ID：12673258
> 
> 赞同：-1
> 
> 时间：2012-10-01T12:27:29.413
> 
> 标签：javascript, html, css

我使用 HTML5 和 CSS3 开发了一个简单的网站。我在使它与 chrome 以外的浏览器兼容时遇到了很多困难。“更改背景图像”动画在 Firefox、IE 中不起作用。它仅在 Chrome 中有效。我希望我网站的访问者只有在拥有 chrome 时才能访问网站，否则它应该给出警告消息，或者它可能会打开 chrome 下载页面。我只是不希望访问者能够查看在所有其他浏览器中实际上非常糟糕但不是 chrome 的“不太愉快”的网站。JavaScript 会很好，但我对此一无所知。你可以在这里查看网站：http: [//aspspider.org/samarth](http://aspspider.org/samarth)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:51:51.547

网站通常被开发为与大多数用户兼容，而不是少数。我强烈建议您重新设计您的网页，或者至少构建一个外观更好的网页，它没有 Chrome 版本的功能，但仍然可供使用 IE 和 FF 的人使用。将您的网页限制为使用 Chrome 的人是一个非常糟糕的主意。如果您真的希望 chrome 用户能够获得您拥有的全部功能，那么请在后台创建一个为所有其他浏览器构建的单独网站。然后，当不使用 chrome 的用户加载 Chrome 页面时（默认情况下），然后将他们重定向到辅助功能较少的网页，并在辅助页面顶部放置一条通知，其中包含“你不是使用谷歌浏览器。要充分利用此网页，*（这是 GC 下载页面的链接）并在该浏览器中*重新加载*（链接到默认起始页面）此网页。”重定向脚本将如 Merca 上面建议的那样：*

 *```
<script type="text/javascript">
var is_chrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;
if (!is_chrome) window.location.href = "nonchrome/IEindex.html"; // redirects to IE & FF compatible webpage
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:30:18.713

试试谷歌框架。只要客户端是 IE 浏览器，它就可以加载：

[http://www.google.com/chromeframe?prefersystemlevel=true](http://www.google.com/chromeframe?prefersystemlevel=true)

或者使用 JS 检测浏览器是否是 Chrome：

```
<script type="text/javascript">
var is_chrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;
if (!is_chrome) window.location.href = "/get-chrome"; // or something...
</script> 
```*

# android - 通过 android 4+ 版本中的 android 应用程序菜单处理应用程序卸载

> ID：12673261
> 
> 赞同：0
> 
> 时间：2012-10-01T12:27:35.493
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-4.2-jelly-bean

从冰淇淋三明治及以上版本，应用程序可以在不进入设置的情况下卸载，但在应用程序菜单中&只需选择卸载。但在 android 4.0 之前，如果用户打开设置，我们可以通过使用密码提示等来限制访问它与 activityManager.runningTasks()。是否可以将类似的场景应用于这个新的卸载过程。当用户单击菜单上的卸载时，我尝试捕获活动名称、标签、进程名称，但还没有运气。

谢谢。

# php - odbc_execute 参数不起作用（空警告）

> ID：12673264
> 
> 赞同：1
> 
> 时间：2012-10-01T12:28:09.967
> 
> 标签：php, ms-access, odbc

我正在尝试对 MS-Access 数据库执行简单的选择查询。当然我想防止 SQL 注入，所以我想使用带参数的准备好的语句

```
$conn = odbc_connect("DRIVER={Microsoft Access Driver (*.mdb, *.accdb)}; DBQ=/path/to/mdb/file.mdb", "ADODB.Connection", "password", SQL_CUR_USE_ODBC);
$res = odbc_prepare($conn, "SELECT * FROM customers WHERE holdingnumber = ?");
odbc_execute($res, array( 20000 ));
$row = odbc_fetch_array($res);
print_r($row); 
```

当我尝试这样做时，我得到一个空警告：

```
Warning: odbc_execute(): in D:\xampp\htdocs\ZEOnline\test.php on line 5 
```

但是当我在没有参数的情况下执行此操作时（用 20000 替换“？”并从 odbc_execute 中删除数组），它可以工作。

有谁知道为什么这不起作用，或者有没有其他方法可以正确地为 odbc 转义字符串？

PHP版本是5.4.4，MS Access Driver应该是最新版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-13T23:33:29.960

我很久以前就找到了错误的原因。我看到有人支持这个，所以我现在发布这个：

MS Access 根本不支持准备好的语句！

这有点令人困惑，因为 PHP 实际上允许您使用 odbc_prepare() 调用，只要没有实际参数并且错误消息没有说明任何相关内容。

但是用 MS ACCESS 数据库做准备好的语句是不可能的。

# ruby - 我的日期格式：09/28/2012 16:35:34，我想要日期格式，例如：2012-09-28T16:35:34，使用 gsub

> ID：12673265
> 
> 赞同：-2
> 
> 时间：2012-10-01T12:28:10.807
> 
> 标签：ruby, regex, date

> **可能重复：**
> [Ruby - 将日期格式的字符串更改为另一种格式](https://stackoverflow.com/questions/9649268/ruby-change-string-in-a-date-format-to-another-format)

我的日期格式：`09/28/2012 16:35:34`，我希望日期格式为：`2012-09-28T16:35:34`，我需要在 jruby 中编译代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T12:40:50.067

您可能希望将日期转换为更有用的内容：

```
require 'date'
dt = DateTime.strptime "09/28/2012 16:35:34", '%m/%d/%Y %H:%M:%S'
# => #<DateTime: 2012-09-28T16:35:34+00:00 (106107805067/43200,0/1,2299161)> 
```

现在您可以进行任何转换：

```
dt.strftime '%FT%T'
# => "2012-09-28T16:35:34" 
```

当日期格式错误时，这也会引发异常，这对于在事情中断时进行通知很有用。

有关更多信息，请[参阅`Date`](http://ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:39:44.913

寻找

```
(\d+)\/(\d+)\/(\d+) ([\d:]+) 
```

用。。。来代替

```
$3-$1-$2T$4 
```

[在这里](http://rubular.com/r/XR45DYUaw9)您可以看到组（在正则表达式中是 中的部分`()`），$1 是第一个组，$2 是第二个，依此类推。基本上，您需要重新排序放在`-`中间和`T`小时之前的组。

# spring - 错误“无法打开类路径资源，因为它不存在”

> ID：12673271
> 
> 赞同：0
> 
> 时间：2012-10-01T12:28:32.537
> 
> 标签：spring, classpath, file-not-found

我正在尝试开发一个简单的 Spring 3 Web 应用程序，它连接到一个小型数据库，只是为了习惯它！

我在不同的 xml 文件中定义了数据库连接，并尝试通过`<listener>`和`<context-param>`标记将其包含在 web.xml 文件中。

现在我为xml定义文件创建了一个不同的文件夹并将其添加到类路径中，但是上面提到的错误仍然存​​在！

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:02:24.970

我不知道这是否是一个好习惯，但我将它移到了`persons-servlet.xml`我的应用程序的源文件夹中，现在它可以工作了。

# core-data - 如何将对象添加到特定索引处的核心数据

> ID：12673272
> 
> 赞同：0
> 
> 时间：2012-10-01T12:28:38.690
> 
> 标签：core-data, indexing

我真正想要的是一个持久的有序列表。在 xcode 上学习了一年之后，他就傲慢地为它处理了 Core Data。

所以我添加了核心数据，复制了样板代码，并让它在一定程度上与单个实体和单个属性一起工作。

我想做的是，在一个特定的索引处，插入一个新的对象，在啄食顺序的下方，所有在它上面的对象都向上移动一个位置。谷歌搜索似乎表明自 ios5 以来它是可能的；但是几乎没有代码可以让我抓紧。

在设置核心数据以使其可索引时，我是否错过了一些显而易见的事情？添加 NSOrderedSet 作为并行属性？或者像 Magic Records 之类的东西用简单的一行代码就能很好地做到这一点？

还是我一无所有？

非常感谢。蜜蜂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:19:01.577

您可能想要做的是使用现有字段对查询进行排序，或添加专门用于排序的字段。

一旦你有一个字段可以很容易地在你的获取请求中添加一个 NSSortDescriptor 进行排序。

像这样的东西应该工作。

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"fieldToSortOn" ascending:YES];
[fetchRequest setSortDescriptors:[NSArray arrayWithObject:sortDescriptor]]; 
```

# ubuntu - 如何等待多个远程进程（通过 ssh）完成？

> ID：12673273
> 
> 赞同：1
> 
> 时间：2012-10-01T12:28:40.397
> 
> 标签：ubuntu, ssh, distributed, wait

我的情况是我有许多进程应该在不同的远程主机中同时启动（或多或少）。生成所有远程进程的主脚本应该等待所有进程完成，然后才能继续进行下一个分布式执行。到目前为止我尝试过的方法（在 Ubuntu Server 12.04 上没有成功，/bin/sh 指向 /bin/bash）是：

```
#!/bin/bash

for run_input in run1.data run2.data ; do
   for i in `seq 0 10` ; do
      ssh node$i "/path/to/bin $run_input /path/to/node$i.config" &
   done
   wait
done 
```

那么，上述方法有什么问题呢？

编辑：

请注意，每个远程主机的命令都不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:52:34.870

只是回答我自己的问题，我这样做的方式没有任何问题（尽管有些人可能会推荐使用 pssh 或类似的东西）。我在问题中建议的方式是使用远程主机为发送的每个命令创建一个临时 ssh 会话。这个 ssh 会话保持在后台运行，并且通过简单地调用`wait`，脚本应该暂停，直到所有后台子进程都完成 - 在这种情况下是 ssh 会话。

我做错了什么是我将文件输送到一个while循环中，例如：

```
cat file.txt | while read line ; do
    ssh node "do_something_with $line" &
done
wait 
```

上面的问题是，当管道进入 while 循环时，会创建一个子 shell，所以创建的远程 ssh 会话不是这个脚本的孩子，而是子 shell。因此，呼叫`wait`没有任何效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:36:42.717

要同时运行并行 ssh，我建议使用[pssh](http://code.google.com/p/parallel-ssh/)

文档在那里：[http ://www.theether.org/pssh/docs/0.2.3/pssh-HOWTO.html](http://www.theether.org/pssh/docs/0.2.3/pssh-HOWTO.html)

然后 ：

```
pssh -h /PATH/TO/FILE/WITH/HOSTS command 
```

# java - 简单的 android 和 ASP.NET 混合

> ID：12673277
> 
> 赞同：0
> 
> 时间：2012-10-01T12:28:53.110
> 
> 标签：java, c#, android, asp.net

我编写了一个将文本数据发送到 asp.net 网络服务器的 android 应用程序。我正在使用下一个代码通过 Http 发送数据：

```
try {
    URL url = new URL(serverUrl);
    connection = (HttpURLConnection)url.openConnection();
    connection.setDoInput(true);
    connection.setDoOutput(true);
    connection.setUseCaches(false);

    // Enable POST method
    connection.setRequestMethod("POST");

    connection.setRequestProperty("Connection", "Keep-Alive");
    connection.setRequestProperty("Content-Type", "text/plain; charset=utf-8");
    output = new DataOutputStream(connection.getOutputStream());
    String finalUri = sendedUrl.replace("gaburl", "");
    output.writeChars(finalUri);
    //Toast.makeText(context, finalUri, 1000).show();
    output.flush();
    output.close();
}
catch(Exception e) {
    Toast.makeText(context, e.toString(), 5);
} 
```

**如何** `output.writeChars(finalUri)` **在 ASP.NET 应用程序中接收和显示通过方法发送的数据？**这个过程应该像下面描述的那样执行：

1）我们有 asp.net 表单，它们是发送者的 android 方法的目标，较早地被删除；

2）表单应该读取发送给它的字符串数据并显示它。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:05:39.780

```
Using Ksoap2 library and write .net web service 
Sucessful Connection with Asp.net Webservice-----
package ProductVerificationCard.in;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class AdminLogin extends Activity {
    /** Called when the activity is first created. */
    Button btn_ok;
    TextView textView;
    private static final String SOAP_ACTION = "http://tempuri.org/Login";

    private static final String OPERATION_NAME = "Login";

    private static final String WSDL_TARGET_NAMESPACE = "http://tempuri.org/";

    private static final String SOAP_ADDRESS = "http://10.0.2.2/new/WebService.asmx";
    String s;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        btn_ok=(Button) findViewById(R.id.btn_login);
        textView=(TextView) findViewById(R.id.tv_error);

        btn_ok.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE,
                        OPERATION_NAME);

                        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                        SoapEnvelope.VER11);
                        envelope.dotNet = true;

                        envelope.setOutputSoapObject(request);

                        HttpTransportSE httpTransport = new HttpTransportSE(SOAP_ADDRESS);

                        try

                        {

                        httpTransport.call(SOAP_ACTION, envelope);

                        Object response = envelope.getResponse();

                        //textView.setText(response.toString());
                         s=response.toString();
                         if(s=="true")
                         {
                             Intent intent=new Intent(AdminLogin.this,MenuForm.class);
                                startActivity(intent);

                         }

                         else
                         {
                             textView.setText("Enter Valid Username or Password");
                         }
                        }

                        catch (Exception exception)

                        {

                        textView.setText(exception.toString());

                        }
                // TODO Auto-generated method stub
                }
        });

    }
} 
```

# git - Git：是否必须为需要时间编码的文件执行 git add ？

> ID：12673282
> 
> 赞同：0
> 
> 时间：2012-10-01T12:29:03.633
> 
> 标签：git

我使用 Git 1.7 版本作为我们的存储库。

作为开发过程的一部分，我对本地文件进行了一些更改（即在我的 Eclipse Workspace 中）

每天一到办公室，我都会使用 git pull 命令从远程存储库中签入最新代码。

今天我执行 git pull 命令时，出现以下错误。

```
$ git pull
Updating 2be0f0d..e2f796e
error: Your local changes to the following files would be overwritten by merge:
       LoginServlet.java 
Please, commit your changes or stash them before you can merge.
Aborting 
```

我的问题是，我是否必须执行 git add （要将我的文件添加到暂存区，因为我担心文件不是代码，它正在处理中）

（是否需要将我的文件添加到暂存区，该暂存区仍在编码中）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T12:37:32.227

将它添加到舞台区域将无济于事。该消息只是告诉您有人对远程存储库上的文件 LoginServlet.java 进行了更改，这会导致与您的本地更改发生冲突。

这也意味着您正在运行拉入脏工作目录。要下载最近的更改，您应该暂时搁置本地更改，进行拉取，然后将本地更改应用到新的远程状态之上。

这是`git stash`为了什么。您可能想要做的是这样的事情：

```
$ git stash
$ git pull
$ git stash pop 
```

什么时候把东西放在暂存区没有一般规则。

# asp.net - 只想更新 gridView 但整个页面正在刷新

> ID：12673289
> 
> 赞同：1
> 
> 时间：2012-10-01T12:29:26.810
> 
> 标签：asp.net, .net, ajax

请帮帮我.... 我是 ASP.net 编程的新手.. 我有一个主页，在那个页面上我有一个按钮**Button1**，现在单击该按钮应该会弹出一个面板。

```
<ajaxToolkit:ModalPopupExtender ID="modelPopupExtender1"
     CancelControlID="Btcancel"
    PopupControlID="Panel1" TargetControlID="Button1"  
    Drag="true" BackgroundCssClass="ModelPopupBG" 
    runat="server" DropShadow="True" 

    > 
```

现在在**Panel1**我有 2 个图像按钮。1）搜索输入的数据（我使用文本框输入）并将数据填充到**gridview1** 和2）以取消弹出窗口。

```
<asp:Panel ID="Panel1" runat="server" >  
<div class="HelloWorldPopup">    
<div class="PopupBody">
<div class="PopupHeader" id="PopupHeader"><b ><p style="margin-top: 10px">  Selection Panel</p></b></div><div id="UpperBody">  
    <table border="1" runat="server">
    <tr>
        <th >
        <asp:TextBox ID="entry" runat="server"></asp:TextBox></th><th>
        <asp:DropDownList ID="DropDownList1" runat="server" CssClass="dropdowns">
        <asp:ListItem Text="Name"  >
        </asp:ListItem><asp:ListItem Text="Address" >
        </asp:ListItem><asp:ListItem  Text="Telephone">
        </asp:ListItem></asp:DropDownList></th><th>
         <asp:ImageButton ID="Btok" runat="server" onclick="Btok_Click"  ImageUrl="~/images/isearch.png"/>
       </th>
        <th  >
       <asp:ImageButton ID="Btcancel" runat="server" ImageUrl="~/images/cancel.gif" />         
       </th>           
        </tr>                   
    </table>
    </div>   
    <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        style="margin-top: 11px" BackColor="White" BorderColor="White" 
        BorderStyle="Ridge" BorderWidth="2px" CellPadding="3" CellSpacing="1" 
        GridLines="None" Width="100%"      onselectedindexchanged="GridView1_SelectedIndexChanged" >
        <Columns>
            <asp:BoundField DataField="id" HeaderText="ID" Visible="False" />
            <asp:BoundField DataField="name" HeaderText="Name" />
            <asp:BoundField DataField="address" HeaderText="Address" />
            <asp:BoundField DataField="telephone" HeaderText="Telephone" />
            <asp:CommandField HeaderText="Select" ShowSelectButton="True" />
        </Columns>
        <FooterStyle BackColor="#C6C3C6" ForeColor="Black" />
        <HeaderStyle BackColor="#4A3C8C" Font-Bold="True" ForeColor="#E7E7FF" />
        <PagerStyle BackColor="#C6C3C6" ForeColor="Black" HorizontalAlign="Right" />
        <RowStyle BackColor="#DEDFDE" ForeColor="Black" />
        <SelectedRowStyle BackColor="#9471DE" Font-Bold="True" ForeColor="White" />
        <SortedAscendingCellStyle BackColor="#F1F1F1" />
        <SortedAscendingHeaderStyle BackColor="#594B9C" />
        <SortedDescendingCellStyle BackColor="#CAC9C9" />
        <SortedDescendingHeaderStyle BackColor="#33276A" />
    </asp:GridView>

</div> 
```

一切都很好，但我面临的唯一问题是整个页面正在刷新，而不仅仅是**gridview1**，而我只想在单击**BtOk时刷新 gridview1 数据**

我想为那个 gridView 使用 updatePanel 可以为我解决问题.. 但不知道如何......我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:34:25.613

我认为您有答案-UpdatePanel（这是一种方法）

```
<asp:UpdatePanel runat="server" ID="GridUpdatePanel">
<ContentTemplate>

   <asp:GridViewID="GridView1" runat="server">
    </asp:GridView>

</ContentTemplate>
</asp:UpdatePanel> 
```

只需创建一个 UpdatePanel 标记，并将您的 GridView 放在`ContentTemplate`

# javascript - A reduce function in Javascript

> ID：12673295
> 
> 赞同：2
> 
> 时间：2012-10-01T12:29:47.067
> 
> 标签：javascript, functional-programming, abstraction, higher-order-functions

I'm studying Javascript using Marijn Haverbeke's book *Eloquent JavaScript* and didn't understand the following example:

```
function reduce(combine, base, array) {
    forEach(array, function (element) {
        base = combine(base, element);
    });
    return base;
}

function add(a, b) {
    return a + b;
}

function sum(numbers) {
    return reduce(add, 0, numbers);
} 
```

The `forEach` function is one he introduces earlier in the book, which is the following:

```
function forEach(array, action) {
    for(var i = 0; i < array.length; i++)
        action(array[i]);
} 
```

Now, back to the `reduce` function, what I don't understand is why, in the `sum` function, `0` is passed as `base` to `reduce`. Isn't that weird? Let's say I try to run `sum([1,2,3])`... wouldn't it look something like `0 = add(0,1)` in its first loop? I don't get it.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:33:16.900

After adding it is putting the sum to `base` only. So it is getting incremented on every loop.

`base = combine(base, element)`

This statement first computes `combine(base, element)` and assigns it to `base`. Its not comparing `0` and `add(0, 1)`. So for the next iteration, `base` would have the sum for all the previous values.

**EDITED**

Suppose, you call `reduce(combine, 0, [10, 22, 7, 5])`. Loop will be iterated as

```
Iteration           base          element
1                   0             10 
```

After computing `add(base, element)`, `base` is set to 10\. So for the next iteration, its value is 10.

```
1                   10            22 
```

After computing `add(base, element)`, `base` is set to 32\. So for the next iteration, its value is 32.

```
1                   32            7 
```

After computing `add(base, element)`, `base` is set to 39\. So for the next iteration, its value is 39.

```
1                   39            5 
```

After computing `add(base, element)`, `base` is set to 44\. Since there are no more elements left, the answer is 44.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:35:21.913

base is the variable that will contain the sum of all elements. It's normal that it starts with 0\.

It's not : 0 = add(0,1)

but rather : base will contain the sum of previous value of base and 1

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-07T01:08:40.067

Remember as well that the content on the right side of the equals sign is evaluated first. So,

```
base = combine(base, element) 
```

is taking the result of `combine(base, element)` and assigning it to the variable `base` (which now overwrites what `base` was previously assigned to).

# vb.net - 在 VB.net 的文件中搜索绝对出现的字符串

> ID：12673297
> 
> 赞同：0
> 
> 时间：2012-10-01T12:29:57.807
> 
> 标签：vb.net, file-io

我需要在文件中找到绝对出现的字符串。

*   如果文件中有字符串“I_LOVE_INDIA”。
*   如果输入字符串为“I_LOVE”，则搜索状态应为假。
*   如果输入字符串是“I_LOVE_INDIA”，那么搜索状态应该为真。

我无法使用以下一种：

```
System.IO.File.ReadAllText("D:\asdf\def.txt").IndexOf("string_to_search") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T04:03:24.423

这将起作用：

```
System.IO.File.ReadAllText("D:\asdf\def.txt").IndexOf("I_LOVE_INDIA") 
```

如果您希望它在查找“I_LOVE_INDIA_TOO”时失败，那么您需要检查它，例如：

```
Dim s as String = System.IO.File.ReadAllText("D:\asdf\def.txt")
Dim success as Boolean = CheckStringContainsILoveIndia(s)

Public Function CheckStringContainsILoveIndia(Byval s as String) as Boolean
Dim success as Boolean = False
If s.IndexOf("I_LOVE_INDIA_TOO") == -1 AND s.IndexOf("I_LOVE_INDIA") > -1 Then
success = True    
End If
return success
End Sub 
```

# lift - Lift Framework - 将 url 参数传递给 Snippet 类的问题

> ID：12673298
> 
> 赞同：0
> 
> 时间：2012-10-01T12:30:12.997
> 
> 标签：lift, param

我正在尝试做一个简单的 /author/ 案例，并让 Lift 根据传入的 id 构建一个 Person 对象。

目前我有一个作者片段

```
 class Author(item: Person) {

       def render = {
       val s = item match { case Full(item) => "Name"; case _ => "not found" }

       " *" #> s;
       }
   }

object Author{

val menu = Menu.param[Person]("Author", "Author", authorId => findPersonById(authorId),  person => getIdForPerson(person)) / "author"

 def findPersonById(id:String) : Box[Person] = {

  //if(id == "bob"){
      val p = new Person()
      p.name="Bobby"
      p.age = 32
      println("findPersonById() id = " +id)
      Full(p)

  //}else{
     //return Empty
  //}

}

def getIdForPerson(person:Person) : String = {

  return "1234"
}
} 
```

我试图做的是获取代码来构建一个装箱的人对象并将其传递给 Author 类的构造函数。在渲染方法中，我想确定框是否已满并酌情进行。

如果我改变

```
class Author(item: Person) { 
```

至

```
class Author(item: Box[Person]) { 
```

它不再有效，但如果我保持原样，它不再有效，因为 Full(item) 不正确。如果我删除 val s 行，它可以工作（并用 item.name 替换 s）。那我该怎么做。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:00:01.913

从 findPersonById(id:String) 返回的 Box ： Box[Person] 被评估，如果 Box 为 Full，则未装箱的值将传递给您的函数。如果 Box 为空或失败，则应用程序将显示 404 或适当的错误页面。

如果您想自己处理此错误检查，您可以尝试对您的退货进行双重装箱（以便此方法的结果始终是一个完整的盒子）。

```
def findPersonById(id:String) : Box[Box[Person]] = {
  if(id == "bob"){
      val p = new Person()
      p.name="Bobby"
      p.age = 32
      println("findPersonById() id = " +id)
      Full(Full(p))
  }else{
     return Full(Empty)
  }
} 
```

然后这应该工作：

```
class Author(item: Box[Person]) 
```

# ios - NSDateFormatter 为特定日期返回 null

> ID：12673302
> 
> 赞同：7
> 
> 时间：2012-10-01T12:30:19.390
> 
> 标签：ios, nsdateformatter, null, date-format

我遇到了问题`NSDateFormatter`。它会`null`在某些特定日期返回。

我做了这个功能来调试案例：

```
- (void) debugTest:(NSString *)dateStr{

    NSLog(@"String: %@", dateStr);

    NSDateFormatter *df = [[NSDateFormatter alloc] init];
    [df setDateFormat:@"yyyy-MM-dd"];

    NSDate *dateObj = [df dateFromString: dateStr];

    NSLog(@"Date: %@", dateObj);

} 
```

这是我在某些日期的日志输出：

```
String: 2012-10-18
Date: 2012-10-18 03:00:00 +0000
String: 2012-10-19
Date: 2012-10-19 03:00:00 +0000
String: 2012-10-20
Date: 2012-10-20 03:00:00 +0000
String: 2012-10-21
Date: (null)
String: 2012-10-22
Date: 2012-10-22 02:00:00 +0000
String: 2012-10-23
Date: 2012-10-23 02:00:00 +0000 
```

为什么它只为日期返回 null `2012-10-21`？

我用间隔`2011-10-01 to 2014-11-01`和以下日期进行了其他测试`null`：

```
2011-10-16, 2012-10-21, 2013-10-20, 2014-10-19 
```

这是某种错误吗？我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T13:13:12.567

如果有人遇到同样的问题，我将回答我自己的问题以进行注册：

我添加到我的日期格式化程序 `[df setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"]];`AND `[df setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];`。

所以，我的新代码是：

```
- (void) debugTest:(NSString *)dateStr{

    NSLog(@"String: %@", dateStr);

    NSDateFormatter *df = [[NSDateFormatter alloc] init];
    [df setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"]];
    [df setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];
    [df setDateFormat:@"yyyy-MM-dd"];

    NSDate *dateObj = [df dateFromString: dateStr];

    NSLog(@"Date: %@", dateObj);

} 
```

我认为问题与设备的配置有关，设置两个属性解决了问题。

# objective-c - 在表视图之间传递数据

> ID：12673305
> 
> 赞同：0
> 
> 时间：2012-10-01T12:30:31.330
> 
> 标签：objective-c, ios, cocoa-touch, tableview

我有多个 uitableviews。我需要将这些表视图中的选择传递给另一个表视图。

我该怎么做这个任务？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:36:10.720

通常你会有单独的 UITableViewControllers 在每个。

如果您正在使用情节提要，则在 prepareForSegue 中执行此操作，如果您不使用情节提要，则在您为要推送的 TVC 分配 - initWithNibName 之后执行此操作。

在新的 TableViewController 中为您要传递的信息设置一个变量...

```
@property NSString *selectedName; 
```

然后在第一个表所在的VC中设置这个值，然后再推送它。

IE

用故事板...

```
nextViewController = segue.destinationViewController;

nextViewController.selectedName = @"blah"; 
```

没有故事板....

```
nextViewController = [[MyViewController alloc] initWithNibName:@"MyViewController" bundle:nil];

nextViewController.selectedName = @"blah";

[self.navigationController pushViewController:nextViewController animated:YES]; 
```

这是最好的方法。

# xslt - 更新 xslt 中的变量

> ID：12673307
> 
> 赞同：0
> 
> 时间：2012-10-01T12:30:42.777
> 
> 标签：xslt

XML:

```
<sample>
    <test>
        <Cell1>John</Cell1>
        <Cell2>A</Cell2>
        <Cell4>xy</Cell4>
    </test>
    <test>
        <Cell1>John</Cell1>
        <Cell2>B</Cell2>
        <Cell6>10</Cell6>
    </test>
    <test>
        <Cell1>John,Jade</Cell1>
        <Cell2>A,Y</Cell2>
        <Cell4>1</Cell4>
    </test>
    <test>
        <Cell1>John,Jade</Cell1>
        <Cell2>A C,X</Cell2>
    </test>
    <test>
        <Cell1>John,Jade</Cell1>
        <Cell2>C D,Y</Cell2>
    </test>
    <test>
        <Cell1>John</Cell1>
        <Cell2>A B</Cell2>
        <Cell4>xy</Cell4>
    </test>
</sample> 
```

XSLT：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="xs">
    <xsl:output method="xml" encoding="UTF-8" indent="no"/>
    <xsl:template match="/">
        <xsl:apply-templates select="sample"/>
    </xsl:template>
    <xsl:template match="sample">
        <xsl:variable name="atomictest">
            <!--Store the test containing only one value in cell2-->
            <xsl:copy-of select="test[not(contains(Cell2,',')) or not(contains(Cell2,' '))]"/>
        </xsl:variable>
        <xsl:variable name="copy">
            <xsl:apply-templates select="test">
                <xsl:with-param name="atomictest" select="$atomictest"/>
            </xsl:apply-templates>
        </xsl:variable>
    </xsl:template>
    <xsl:template match="test">
        <xsl:param name="atomictest"/>
        <xsl:choose>
            <xsl:when test="contains(Cell2,',')">
                <xsl:variable name="Cell1">
                    <xsl:copy-of select="Cell1"/>
                </xsl:variable>
                <!-- tokenize cell2 based on comma -->
                <xsl:for-each select="tokenize(Cell2,',')">
                    <xsl:variable name="str">
                        <xsl:value-of select="."/>
                    </xsl:variable>
                    <xsl:variable name="pos">
                        <xsl:value-of select="position()"/>
                    </xsl:variable>
                    <xsl:choose>
                        <!-- If cell2 contains space -->
                        <xsl:when test="contains(.,' ')">
                            <!-- tokenize cell2 based on comma -->
                            <xsl:for-each select="tokenize(.,' ')">
                                <xsl:variable name="str">
                                    <xsl:value-of select="."/>
                                </xsl:variable>
                                <!-- if cell2 value not contained in the atomic collected -->
                                <xsl:if test="not($atomictest/test[normalize-space(Cell2/text())=normalize-space($str)])">
                                    <!--Store Cell2 value -->
                                    <xsl:variable name="Cell2">
                                        <xsl:value-of select="."/>
                                    </xsl:variable>
                                    <!-- tokenize cell1-->
                                    <xsl:for-each select="tokenize($Cell1/Cell1,',')">
                                        <xsl:if test="position()=$pos">
                                            <test>
                                                <Cell1>
                                                    <xsl:value-of select="."/>
                                                </Cell1>
                                                <Cell2>
                                                    <xsl:value-of select="$Cell2"/>
                                                </Cell2>
                                            </test>
                                        </xsl:if>
                                    </xsl:for-each>
                                </xsl:if>
                            </xsl:for-each>
                        </xsl:when>
                        <xsl:otherwise>
                            <!-- if cell2 doesnot contains space -->
                            <xsl:if test="not($atomictest/test[normalize-space(Cell2/text())=normalize-space($str)])">
                                <xsl:variable name="Cell2">
                                    <xsl:value-of select="."/>
                                </xsl:variable>
                                <xsl:for-each select="tokenize($Cell1/Cell1,',')">
                                    <xsl:if test="position()=$pos">
                                        <test>
                                            <Cell1>
                                                <xsl:value-of select="."/>
                                            </Cell1>
                                            <Cell2>
                                                <xsl:value-of select="$Cell2"/>
                                            </Cell2>
                                        </test>
                                    </xsl:if>
                                </xsl:for-each>
                            </xsl:if>
                        </xsl:otherwise>
                    </xsl:choose>
                </xsl:for-each>
            </xsl:when>
            <xsl:when test="contains(Cell2,' ')">
                <xsl:variable name="Cell1">
                    <xsl:copy-of select="Cell1"/>
                </xsl:variable>
                <!-- tokenize cell2 based on space or comma -->
                <xsl:for-each select="tokenize(Cell2,' ')">
                    <xsl:variable name="str">
                        <xsl:value-of select="."/>
                    </xsl:variable>
                    <xsl:variable name="pos">
                        <xsl:value-of select="position()"/>
                    </xsl:variable>
                    <!-- if cell2 value not contained in the atomic rows collected -->
                    <xsl:if test="not($atomictest/test[normalize-space(Cell2/text())=normalize-space($str)])">
                        <xsl:if test="position()=$pos">
                            <test>
                                <Cell1>
                                    <xsl:value-of select="$Cell1"/>
                                </Cell1>
                                <Cell2>
                                    <xsl:value-of select="$str"/>
                                </Cell2>
                            </test>
                        </xsl:if>
                    </xsl:if>
                </xsl:for-each>
            </xsl:when>
            <xsl:otherwise>
                <test>
                    <Cell1>
                        <xsl:value-of select="Cell1"/>
                    </Cell1>
                    <Cell2>
                        <xsl:value-of select="Cell2"/>
                    </Cell2>
                </test>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

1.  我已将包含单个值的 cell2 存储在 atomictest 变量中
2.  检查 Cell2 是否包含逗号。如果为真，则基于逗号标记 Cell2 并检查标记化的 Cell2 值是否存在于原子测试中 -> 如果没有，则将 Cell2 和 Cell1 值添加到输出
3.  我想将输出中新添加的 Cell1 和 Cell2 值更新为 atomictest 变量，以便下次我需要跳过相同的 Cell2 值时。这该怎么做？？

我得到的输出：

```
<test>
    <Cell1>John</Cell1>
    <Cell2>A</Cell2>
</test>
<test>
    <Cell1>John</Cell1>
    <Cell2>B</Cell2>
</test>
<test>
    <Cell1>Jade</Cell1>
    <Cell2>Y</Cell2>
</test>
<test>
    <Cell1>John</Cell1>
    <Cell2>C</Cell2>
</test>
<test>
    <Cell1>Jade</Cell1>
    <Cell2>X</Cell2>
</test>
<test>
    <Cell1>John</Cell1>
    <Cell2>C</Cell2>
</test>
<test>
    <Cell1>John</Cell1>
    <Cell2>D</Cell2>
</test>
<test>
    <Cell1>Jade</Cell1>
    <Cell2>Y</Cell2>
</test> 
```

结果输出应如下所示：

```
<test>
        <Cell1>John</Cell1>
        <Cell2>A</Cell2>
    </test>
    <test>
        <Cell1>John</Cell1>
        <Cell2>B</Cell2>
    </test>
    <test>
        <Cell1>Jade</Cell1>
        <Cell2>Y</Cell2>
    </test>
    <test>
        <Cell1>John</Cell1>
        <Cell2>C</Cell2>
    </test>
    <test>
        <Cell1>Jade</Cell1>
        <Cell2>X</Cell2>
    </test>
    <test>
        <Cell1>John</Cell1>
        <Cell2>D</Cell2>
    </test> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:55:04.817

变量在 XSLT 中是只读的。也就是说，您只能将它们分配一次。之后它们是只读的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T14:31:53.200

这个 XSLT 2.0 样式表...

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:temp="http://stackoverflow.com/questions/12673307"
  exclude-result-prefixes="xsl temp">
<xsl:output omit-xml-declaration="yes" indent="yes" />
<xsl:strip-space elements="*" />  

<xsl:variable name="phase-1-output">
  <temp:tests>
    <xsl:apply-templates select="/*/test" mode="phase-1" />
  </temp:tests>
</xsl:variable>

<xsl:variable name="phase-2-output">
  <xsl:apply-templates select="$phase-1-output" mode="phase-2" />
</xsl:variable>

<xsl:template match="/">
 <xsl:copy-of select="$phase-2-output"/>
</xsl:template>

<xsl:template match="*" mode="phase-1" />

<xsl:template match="test[Cell1!=''][Cell2!='']" mode="phase-1">
  <xsl:variable name="cell2" select="tokenize(Cell2,',')" />
  <xsl:for-each select="tokenize(Cell1,',')" >
    <xsl:variable name="cell1-pos" select="position()" />
    <xsl:variable name="cell1" select="." />
    <xsl:for-each select="tokenize($cell2[$cell1-pos],' ')">
      <temp:test>
        <temp:Cell1><xsl:value-of select="$cell1" /></temp:Cell1>
        <temp:Cell2><xsl:value-of select="." /></temp:Cell2>
      </temp:test>
    </xsl:for-each>
  </xsl:for-each>
</xsl:template>

<xsl:template match="temp:tests" mode="phase-2">
  <xsl:for-each-group select="temp:test" group-by="concat(temp:Cell1,'|',temp:Cell2)">
    <test>
      <Cell1><xsl:value-of select="substring-before(current-grouping-key(),'|')" /></Cell1>
      <Cell2><xsl:value-of select="substring-after(current-grouping-key(),'|')" /></Cell2>
    </test>
  </xsl:for-each-group>
</xsl:template>

</xsl:stylesheet> 
```

...将转换此输入...

```
<sample>
    <test>
        <Cell1>John</Cell1>
        <Cell2>A</Cell2>
        <Cell4>xy</Cell4>
    </test>
    <test>
        <Cell1>John</Cell1>
        <Cell2>B</Cell2>
        <Cell6>10</Cell6>
    </test>
    <test>
        <Cell1>John,Jade</Cell1>
        <Cell2>A,Y</Cell2>
        <Cell4>1</Cell4>
    </test>
    <test>
        <Cell1>John,Jade</Cell1>
        <Cell2>A C,X</Cell2>
    </test>
    <test>
        <Cell1>John,Jade</Cell1>
        <Cell2>C D,Y</Cell2>
    </test>
    <test>
        <Cell1>John</Cell1>
        <Cell2>A B</Cell2>
        <Cell4>xy</Cell4>
    </test>
</sample> 
```

...进入...

```
<test>
   <Cell1>John</Cell1>
   <Cell2>A</Cell2>
</test>
<test>
   <Cell1>John</Cell1>
   <Cell2>B</Cell2>
</test>
<test>
   <Cell1>Jade</Cell1>
   <Cell2>Y</Cell2>
</test>
<test>
   <Cell1>John</Cell1>
   <Cell2>C</Cell2>
</test>
<test>
   <Cell1>Jade</Cell1>
   <Cell2>X</Cell2>
</test>
<test>
   <Cell1>John</Cell1>
   <Cell2>D</Cell2>
</test> 
```

* * *

## 替代解决方案

这是另一种单相解决方案。它更简单，但适应性较差。

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output omit-xml-declaration="yes" indent="yes" />
<xsl:strip-space elements="*" />  

<xsl:template match="/">
  <xsl:for-each select="
     distinct-values(
       for $t in /*/test,
           $p1 in 1 to  count( tokenize($t/Cell1,',')),
           $cell1 in           tokenize($t/Cell1,',')[$p1],
           $cell2 in tokenize( tokenize($t/Cell2,',')[$p1], ' ') return
               concat($cell1,'|',$cell2))">
    <test>
      <Cell1><xsl:value-of select="substring-before(.,'|')" /></Cell1>
      <Cell2><xsl:value-of select="substring-after( .,'|')" /></Cell2>
    </test>
  </xsl:for-each>  
</xsl:template>

</xsl:stylesheet> 
```

## 笔记

两种解决方案都依赖于以下假设：

1.  Cell1 和 Cell2 的逗号数相同。
2.  Cell1 永远不会包含竖线 ('|') 字符。

# windows - Windows 8 应用程序打包

> ID：12673315
> 
> 赞同：1
> 
> 时间：2012-10-01T12:31:14.383
> 
> 标签：windows, windows-8

我正在创建一个 Windows 8 应用程序。UI 使用的是 HTML5。使用 WinJs 我正在调用 WCF 服务，该服务返回用于构建 UI 的数据表。这一切都很好。

我还想创建一个与应用程序打包在一起的 Window 服务，因此当有人下载​​/安装它时，它会被解包并启动/执行 Windows 服务。这种配置可能吗？

今天的 WCF 服务是一个 Web 服务，但我想把它变成一个 Windows 服务。这个想法是让一切都自给自足。如果我想走这条路，这将使我可以在 Microsoft 在线商店中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:49:51.700

Windows 8 应用程序不支持安装服务。你能做的最好的就是单独安装一个服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T06:44:30.210

您的 WCF 服务应该与您的应用程序分离，并且很可能在不同的机器上运行！我很确定它们不会允许您在 Windows 应用商店应用程序的上下文中安装或运行服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T14:39:45.230

对于任何 Windows 8 应用程序，安装 Windows 服务都不是理想的方法。我知道您想让一切都自给自足，但是，为什么要作为 WCF 本地服务呢？你为什么不考虑让它在你的应用程序本身中有一个数据访问层？只是一个想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T01:25:10.837

**关于客户端**

Web 服务是独立的项目和独立的部署模型。您可以拥有一个用于 Windows 8 客户端应用程序的 Visual Studio 项目和一个用于 Web 服务端的项目。

Windows 8 应用程序有多种用于保存持久数据的选项，例如用于使用 Web 服务的端点。

存储 Windows 8 应用程序数据时有几个考虑因素，例如要使用的 Web 服务的位置。

Windows 8 应用程序数据还包括会话状态、用户首选项和其他设置。它在应用程序运行时创建、读取、更新和删除。

有**3 种类型的尺寸**需要考虑。系统为您的应用程序管理这些数据存储：(1)**本地**：仅存在于当前设备上的持久数据 (2)**漫游**：存在于用户安装了应用程序的所有设备上的数据 (3)**临时**：数据应用程序未运行时可以随时被系统删除

作为开发人员，您需要关注几个对象来持久化应用程序数据：第一个容器对象是 ApplicationDataContainer。另一个是应用程序数据。您可以使用这些对象来存储本地、漫游或临时数据。

**关于服务器端**

您的 Windows 8 客户端应用程序将使用基于 http 的 Web 服务。

大多数开发人员将 Web 服务部署到云中，供 iOS、Android、Windows 和其他服务器端服务使用。

Windows Azure 是一种云产品，它使向客户公开服务变得非常简单。

您可以利用**云服务**来提供强大的解决方案，也可以利用轻量级的**Azure 网站。**

您通常可以选择以下**两种项目类型**中的任何一种来创建 Web 服务：

（1）Windows通信基金会WCF；或者

(2) ASP.NET Web API，包含在 MVC 版本 4 中。

**WCF**存在的时间更长，并且历来是开发人员在公开服务时的主要​​选择。

微软关于 Web 服务的更现代的概念与真正包含 HTTP 概念（URI 和动词）的**ASP.NET Web API相关。**此外，ASP.NET Web API 可用于创建利用请求/响应标头、超媒体等的服务。

# objective-c - iOS 5.1 (Xcode 4.4) 网页无法使用 UIWebViewer 在我的标签栏控制器中加载

> ID：12673316
> 
> 赞同：1
> 
> 时间：2012-10-01T12:31:15.100
> 
> 标签：objective-c, xcode4.4

我是 Apple AppDevelopment 的新手，虽然我在 VS2010 上使用 C# 有一些经验，但我已经发现了一些相似之处。但是我遇到了一些奇怪的故障。我目前正在为 Iphone 和 Ipad 上的 iOS 5.1 开发一个程序。此应用程序应该能够执行以下操作：

1.  使用相机选项拍照
2.  查看图书馆
3.  浏览网页
4.  轻松将图像上传到 HTML 表单中。

这些功能都组合在一个标签栏控制器中。

然而，在泥泞中挣扎了 2 周后，我无法让 webviewer 正常工作。

没有显示错误，但是应该加载的网页（只是谷歌）没有加载并且屏幕保持白色。我在网上浏览一些很好的教程来帮助我弄清楚如何开发一个做这样的事情的应用程序。（不幸的是，徒劳无功）我希望有人能够帮助我解决这个问题。我将在下面留下我的源代码以供检查。提前感谢你的帮助。

亲切的问候 App.Dev.: TheWolf

PS：我在这个项目中使用故事板。

代码 Webapp.h

```
#import <UIKit/UIKit.h>
@interface Webapp : UIViewController
@property (nonatomic, weak) IBOutlet UIWebview *webView;
@end 
```

代码 Webapp.m

```
#import "Webapp.h"
@interface Webapp ()
@end

@implementation
@synthesize webView = _webview;

-(void) ViewDidLoad
{
  [super.viewDidLoad];
  self.webView.scalesPageToFit = YES;
  [self.webView loadRequest: NSURLRequest resquestWithURL:[NSURL URLWithString:@"http://www.google.com"]]];
}

-(void) ViewDidUnload
{
  [super.viewDidUnload];
}

- (BOOL) shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation)interfaceOrientation
{
  return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

# ruby-on-rails-3 - elasticsearch geo_distance查询给我错误如何编写geo_distance查询？

> ID：12673320
> 
> 赞同：0
> 
> 时间：2012-10-01T12:31:37.610
> 
> 标签：ruby-on-rails-3, search, search-engine, elasticsearch

我有一张表，`schools`其中包含以下字段：id、name、address、city、state、zip、latitude 和 longitude。

我想通过给出经纬度搜索12公里内的学校；我正在使用此查询，但它不起作用。

```
curl -X GET "http://localhost:9200/schools/school/_search?=true" -d '{"filter" : {"geo_distance" : {"distance" :"12km", "location": "40,-70"}}}' 
```

我收到以下错误：

```
{
"error":"SearchPhaseExecutionException[
    Failed to execute phase [query], total failure;
    shardFailures {[_na_][schools][0]: No active shards}{[_na_][schools][1]: 
    No active shards}{[_na_][schools][2]: No active shards}{[_na_][schools][4]: 
    No active shards}{[WJV55VsxQU-XW8VPmXImwA][schools][3]: 
        RemoteTransportException[[Archie Corrigan][inet[/192.168.1.109:9300]][search/phase/query]]; nested: 
            SearchParseException[[schools][3]: from[-1],size[-1]: Parse Failure [Failed to parse source [
        {\"filter\" : 
            {\"geo_distance\" : 
                {\"distance\" :\"12km\", \"location\": \"40,-70\"}
            }
        }]
 ]
 ]; nested: QueryParsingException[[schools] failed to find geo_point field [location]];}]",
"status":500
} 
```

rails中的模型配置

```
# ElasticSearch integration
  include Tire::Model::Callbacks
  include Tire::Model::Search
  include Search::ReloadHelper

  tire do
    settings({
      :analysis => {
        :filter => Search::Filters.hs_name_filters,
        :analyzer => Search::Analyzers.hs_name_analyzers
      }
    })

    mapping do
      indexes :id, :type => 'integer', :index => :not_analyzed
      indexes :name, :type => 'string', :analyzer => :hs_name_analyzer
      indexes :address, :type => 'string', :index => :not_analyzed
      indexes :city, :type => 'string', :analyzer => :hs_name_analyzer
      indexes :state, :type => 'string', :index => :not_analyzed
      indexes :zip, :type => 'integer', :index => :not_analyzed
      indexes :location, :type => 'geo_point', :lat_lon => true
    end
  end

  def to_indexed_json
    {
      :id   => id,
      :name => name,
      :address => address,
      :city => city,
      :state => state,
      :zip => zip,
      :location => {
        :lat => latitude,
        :lon => longitude
      }
    }.to_json
  end 
```

我怎样才能让它工作？

# css - 有哪些软件可以作为 CSS 的多合一跨浏览器？

> ID：12673322
> 
> 赞同：2
> 
> 时间：2012-10-01T12:31:44.507
> 
> 标签：css, debugging, browser

我只知道IE测试仪。如果用户使用的是旧版本的 safari、chrome、firefox、opera、flock 怎么办？是否有任何用于 CSS 调试的一体化浏览器软件？如果没有，我在哪里可以下载旧版本的浏览器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:39:41.560

您可以免费试用 Adob​​e 的浏览器实验室。如果您没有，您只需要免费使用一个帐户。

这里的链接：[https ://browserlab.adobe.com](https://browserlab.adobe.com)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T12:35:39.220

这个工具对你有用：[http ://www.browserstack.com](http://www.browserstack.com)

引用：

> 我们提供真正的IE6、IE7、IE8、IE9以及所有版本的Firefox、Safari、Chrome和Opera进行测试。借助触手可及的完整浏览器堆栈，您将向超过 99.5% 的用户提供有效的网页。

这是一种付费工具，但如果您是赚钱的开发人员或为一家大公司工作，那么它是值得的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T12:41:01.707

多浏览器查看器 >> [http://www.multibrowserviewer.com](http://www.multibrowserviewer.com)

微软 SuperPreview >> [http://www.microsoft.com/expression/products/SuperPreview_Overview.aspx](http://www.microsoft.com/expression/products/SuperPreview_Overview.aspx)

我用它们:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T12:45:36.837

chrome 的用户代理或者你最喜欢的浏览器是什么？

它为您的问题提供免费的解决方案，与他们一起玩，它甚至显示平板电脑、手机等的视口！

只需获取项目字符串，然后将其作为新设备输入到您的用户代理测试仪，我更喜欢 chrome 您在**[这里](https://chrome.google.com/webstore/detail/djflhoibgkdhkhhcedjiklpkjnoahfmg?hl=da)**找到的扩展名它们有几个不同的一次，但我喜欢这个

# php - Magento 产品未添加到购物车

> ID：12673324
> 
> 赞同：1
> 
> 时间：2012-10-01T12:31:57.667
> 
> 标签：php, magento, cart, shopping

此刻，magento 购物车有点问题。

我不知道为什么，但是当我尝试将某些东西添加到购物车时，我会被定向到一个空的购物车页面，该页面告诉我该产品已添加到其中。显然购物车中没有产品，但它只是不想这样做。

它在随附的屏幕截图中。我安装了高级自定义选项，我觉得这可能是一个促成因素。我已经删除了它的所有痕迹，它似乎仍然存在。

![在此处输入图像描述](../Images/a9b932dcb39866dd45967f9b77757943.png)

任何帮助。任何帮助！告诉我应该看什么！！

谢谢 :) 汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:12:20.477

删除您已安装的其他插件。并追踪代码。可能是插件的问题。我的事情你没有正确配置它。

# asp.net - ASP.NET MVC 3 Ajax.BeginForm 意外重置模型值

> ID：12673325
> 
> 赞同：0
> 
> 时间：2012-10-01T12:31:57.743
> 
> 标签：asp.net, ajax, asp.net-mvc-3

我有一个包含以下片段的部分视图：

```
@model Mbrrace.Domain.MbrraceForm
<div class="row">
    <div class="span12 form-horizontal">
    @using (Ajax.BeginForm("DetailsSection11", "DataForm",
        new AjaxOptions
        {
            HttpMethod = "POST",
            OnComplete = "NextTab"
        }
        )) 
```

在调用显示此部分视图的视图的控制器中，一些模型值是预设的，但不显示或以其他方式使用。当 Ajax 提交发生时，其中一些值已被清除（整数变为零，字符串变为空），但保留了日期值。正确返回表单本身中设置的值。

我已经检查了预设值在使用@Html.DisplayFor 显示它们到达表单时是否正确。

我在解决方案的其他地方使用 Ajax.BeginForm 和模型，完全没有问题。我在提交之前和之后检查了 ModelState 并且它是有效的。我也试过 ModelState.Clear() 没有效果。

在我撕掉我的头发所剩无几之前，任何想法可能是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:35:25.350

如果表单中的这些值没有相应的输入字段，则在 POST 表单时它们将永远不会提交到服务器。因此，默认模型绑定器将无法从请求中绑定您的模型，当然所有这些属性都将具有其默认值。所以你有几种可能性：

*   将这些属性作为隐藏字段包含在表单中。
*   从您在 GET 操作（数据库或其他东西）中获取它们的任何位置，在您的 POST 控制器操作中获取它们。

# c# - 如何在两个视图模型中创建触发事件

> ID：12673327
> 
> 赞同：1
> 
> 时间：2012-10-01T12:32:06.767
> 
> 标签：c#, wpf

我只是想知道是否可以创建从一个视图模型到另一个视图模型的触发事件。如果是这样，如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:50:25.390

从技术上讲，这是可能的——例如，您可以使用事件。但另一个问题——这真的是你需要的吗？

ViewModel 与 View 或 Views 一起工作。下一阶段是 ViewModel 和 Model 等之间的通信。

回答您的问题 - 是的，这是可能的，但很可能这不是软件开发的最佳实践。

# ruby-on-rails - Rails 中的事件触发系统设计

> ID：12673330
> 
> 赞同：0
> 
> 时间：2012-10-01T12:32:21.713
> 
> 标签：ruby-on-rails, ruby

我正在重新设计我的活动提要，我已经用 redis 和 rails 实现了逻辑（顺便说一句，效果很好）但我仍然不确定如何创建/触发事件。

在我的第一种方法中，我使用了观察者，它的缺点是没有 current_user 可用。而且，无论如何使用观察者都是一个坏主意:)

我首选的方法是在控制器中创建/触发事件，它应该看起来像：

```
class UserController < LocationController
  def invite
    ...
    if user.save
      trigger! UserInvitedEvent, {creator: current_user, ...}, :create
      ....
    end
  end
end 
```

触发方法应该

*   使用一些参数创建 UserInvitedEvent。(:create 可以是默认选项)
*   可以停用（例如停用以进行测试）
*   可以用例如 resque 执行

我查看了一些宝石（fnordmetrics，...），但我找不到一个巧妙的实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:19:15.773

我会构建如下内容：

```
# config/initializers/event_tracking.rb
modlue EventTracking

  attr_accessor :enabled

  def enable
    @enabled = true
  end

  def disable
    @enabled = false
  end

  module_function

  def Track(event, options)
    if EventTracking.enabled
      event.classify.constantize.new(options)
    end
  end

end

include EventTracking
EventTracking.enable unless Rails.env.test? 
```

`module_function`hack让我们全局拥有函数，并将其`Track()`导出到全局命名空间，你（关键是该方法被**复制**到全局范围，所以它实际上是全局的，在这里阅读更多：[http://www.ruby-doc .org/core-1.9.3/Module.html#method-i-module_function](http://www.ruby-doc.org/core-1.9.3/Module.html#method-i-module_function) )

然后我们为除生产之外的所有模式启用跟踪，我们调用`event.classify.constantize`Rails 应该变成类似的东西`:user_invited_event`，`UserInvitedEvent`并提供命名空间的可能性，例如`Track(:'users/invited')`. 其语义由 ActiveSupport 的变形模块定义。

我认为这应该是您跟踪代码的一个不错的开始，到目前为止，我一直在一个项目中使用它，并取得了很大的成功！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:23:40.190

使用（新的）rails 仪表和`ActiveSupport::Notifications`系统，您可以将通知和实际的 feed 结构完全分离。

请参阅[http://railscasts.com/episodes/249-notifications-in-rails-3?view=asciicast](http://railscasts.com/episodes/249-notifications-in-rails-3?view=asciicast)

# neo4j - 将数据从 Neo4j 迁移到 SQL

> ID：12673331
> 
> 赞同：0
> 
> 时间：2012-10-01T12:32:21.890
> 
> 标签：neo4j, data-migration

嗨，我在我的应用程序中使用 neo4j，我的结构如下：

1.  我正在使用**嵌入式图形**API
2.  我有几个数据库指向使用我在应用程序中维护的池，例如- **>** db1、db2、db3、..... db100
3.  当我想访问特定数据库时，我使用**new EmbeddedGraphDatabase("Path to db(n)")指向它**
4.  问题在于，当连接池计数增加时，应用程序消耗的**RAM 大小会****不断增加**，并在某个限制点**破坏应用程序。**
5.  所以我正在考虑从**Neo4j 迁移到其他一些 Database**。
6.  此外**，我的数据库中只有一小部分**使用了**图形结构**。

**迁移的一种方法是我为它编写一个脚本。有没有更好的选择？**

**我的另一个问题是什么是最好的数据库，以便可以维护我的结构。**

**我正在考虑的其他观点是我可以将部分数据保存到 Neo4j 中，并将另一部分转移到其他数据库中。**

如果有什么不清楚的，我可以澄清一下。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:36:39.017

EmbeddedGraphDatabase 实例*不*等同于 SQL 中的“连接”。它旨在运行很长时间（几天，几个月）。因此，启动/停止成本很高。

在同一个 JVM 中拥有数百个独立数据库的用例是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T21:59:16.413

由于 graphdb 旨在将整个数据模型保存在单个主机上，因此您的许多小型数据库将表现不佳。

您是否为每个数据库运行一个 JVM？

您可以通过为内存映射提供正确的属性来控制 neo4j 使用的内存量，还可以使用来自 neo4j-enterprise 的 gcr 缓存并控制缓存大小属性变量。

我认为将图形部分保留在 Neo4j 中并且只移动非图形部分仍然是有意义的。

# android - 在 Android 中有没有办法包装 Linkify 文本？

> ID：12673335
> 
> 赞同：0
> 
> 时间：2012-10-01T12:32:27.517
> 
> 标签：android, text, webview, linkify

我想显示可点击的文本，而不是在 webview 中使用 url。例如，我的文本将是 google，当用户点击它时，它将启动 action_view 意图到 google 的 url。有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:36:13.553

您可以使用 android:linkfy 属性并将其设置为 top true 以使您的文本视图中的 URL 默认为 linkfy。

# dictionary - 我在哪里可以获得 Anagram Dictionary 单词？

> ID：12673339
> 
> 赞同：1
> 
> 时间：2012-10-01T12:32:39.020
> 
> 标签：dictionary, anagram, crossword

嗨，我正在实施一个字谜填字游戏。我需要很多字典单词来实现填字游戏。那么我在哪里可以在互联网上获得大量的字谜词？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T13:50:40.193

让你谷歌搜索字典单词。这是您的示例链接 [http://www.becomeawordgameexpert.com/wordlists10.htm](http://www.becomeawordgameexpert.com/wordlists10.htm)

# android - RingtonePreference：是否可以更改对话框标题？

> ID：12673340
> 
> 赞同：1
> 
> 时间：2012-10-01T12:32:41.287
> 
> 标签：android

默认情况下，RingtonePreference 对话框的标题是“Ringtones”。我想将其更改为其他内容，但我没有看到明显的方法来做到这一点。

在 xml 中设置标题不起作用：

```
<RingtonePreference 
    android:key="@string/pref_key_notifications_sound"
    android:title="@string/prefs_notification_sound"
    android:ringtoneType="notification"
    android:showDefault="true"
    android:showSilent="true"
    android:persistent="true"
    /> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:41:24.780

我不确定这是否可能。此外，不能保证 RingtonePreference 会打开系统的铃声选择器。用户可能安装了另一个应用程序，该应用程序具有在清单中声明的[​​ android.intent.action.RINGTONE_PICKER](http://developer.android.com/reference/android/media/RingtoneManager.html#ACTION_RINGTONE_PICKER)意图过滤器的活动，他甚至可能将其作为默认的铃声选择器。

您可能会实现自定义 RingtonePreference 和自定义 RingtonePickerActivity 并强制打开自定义铃声选择器，但您可能会激怒您的用户。

如果我可以问，你为什么要改变它？

# javascript - 在 Gmail 和其他阻止捕获的网站中捕获 TAB 键

> ID：12673345
> 
> 赞同：2
> 
> 时间：2012-10-01T12:32:56.137
> 
> 标签：javascript, jquery, greasemonkey, jquery-events, preventdefault

使用`preventDefault()`on a`keydown`适用于除某些网站（如 Gmail）上的 tab键**之外的所有键。**

1.  为什么会这样？tab 键有什么特别之处——不应该和其他键一样对待`keypress`吗？

2.  如何阻止 Tab 键循环浏览 Gmail 中的元素？

这是我目前正在使用的 Greasemonkey（带有 jQ​​uery 的 JS）代码：

```
$("body.editable.LW-avf").keydown(function(event){
    if(event.which == 9){
        event.preventDefault();
    }
}); 
```

`tab`（例如）以外的任何东西都`a`有效 -`keypress`停止了。如何捕获制表键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:38:08.587

Gmail 可能已经在使用`preventDefault`重新定义事件处理程序，因为它没有使用`tabindex`. 在这种情况下，您需要覆盖以下定义`preventDefault`：

```
Event.prototype.preventDefault = function(){} 
```

# ios - 确定与登录 iOS 设备的 Apple ID 关联的国家/地区

> ID：12673351
> 
> 赞同：4
> 
> 时间：2012-10-01T12:33:26.183
> 
> 标签：ios, objective-c, ipad, userlocation

我的应用程序中有一个特定场景，其中需要根据用户所在的位置或国家/地区显示一些内容（来自服务）。

我想出了两种/三种方法来实现这一点，但它们有一些缺点，如下所述。

1) 使用 NSLocale

NSLocale *locale = [NSLocale currentLocale]; NSString *countryCode = [locale objectForKey: NSLocaleCountryCode];
缺点：可由用户更改，可从设置->常规->国际->区域格式配置

2）使用核心位置

确定纬度和经度 (CLLocationManager & CLLocation)。从纬度和经度确定使用**反向地理编码**的国家。在我看来，这是实现我的目的的最准确方式。

缺点：如果用户不允许核心位置服务找不到经纬度，再次依赖用户。

这是我的几个问题

1）我想知道 APPLE 是否有可用的 API 可以帮助我了解购买我的应用程序的 Apple ID 以及该 Apple ID 所属的国家/地区？

2）考虑到Apple的安全环境，这可能是非常不可能的，但仍然......是否有可能通过Apple ID获得与信用卡（如果相关）相关联的国家/地区？

等待答复。

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:13:11.333

这两个问题的答案都是否定的（有充分的理由）。Apple 不提供对设备所有者 Apple ID 的编程访问。当然没有任何与信用卡相关的信息。我会询问用户是否允许获取他们的位置，并解释为什么你的应用需要它（在 iOS 6 中，你可以提供请求位置的上下文）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-26T11:47:17.193

您可以使用 CTTelephonyNetworkInfo 访问有关设备 SIM 卡的数据。当然，这只有在用户有 SIM 卡的情况下才有效。而且它的价值值得怀疑，因为大多数人都被允许前往地球上的大多数地方。

# c++ - 友元函数范围

> ID：12673352
> 
> 赞同：0
> 
> 时间：2012-10-01T12:33:32.373
> 
> 标签：c++, g++, friend

我有两个类，**一个**和**两个**，每个都有一个**朋友**成员函数和一个指向另一个的指针。第一个头文件如下：

```
#ifndef FIRSTCLASS_H
#define FIRSTCLASS_H

class two;

class one {

private:
int one_data;

public:
friend void second_data (two *);
};

#endif 
```

第二个头文件如下所示：

```
#ifndef SECONDCLASS_H
#define SECONDCLASS_H

class one;

class two {

private:
int two_data;

public:
friend void first_data (one *);
};

#endif 
```

实际功能位于第三个 .cpp 文件中。我用适当的类限定符编写了函数，它给出了编译错误。我正在使用 g++。功能如下：

```
#include "firstclass.h"
#include "secondclass.h"

void two::first_data (one * class1) {

}

 void one::second_data (two * class2) {

} 
```

错误如下：

```
 error:no ‘void two::first_data (one*)’ member function declared in class ‘two’ 
 error: no ‘void one::second_data(two*)’ member function declared in class ‘one’ 
```

当我在函数名之前删除类限定符时，代码会编译。修改后的功能如下：

```
 void first_data(one * class1) {

 }

 void second_data(two * class2) {

 } 
```

我是 C++ 新手，我不确定在第一种情况下我是否做错了什么。请赐教。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T12:35:14.950

您声明的是作为类朋友的独立函数。
他们不是任何阶级的真正成员。

```
friend void first_data (one *); 
```

将独立函数声明`first_data`为您的类的朋友，这并不意味着它`first_data`是您的类的成员函数。因此，当您在 cpp 文件中定义函数时，编译器会抱怨该函数从未被声明过。

还，

```
void two::first_data (one * class1){}

Returntype ClassName ScopeResolution FunctionSignature 
```

`two::`告诉编译器函数属于这个特定的类，它不是命名空间规范，而是类限定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T12:36:07.130

那不是`namespace`, 那是`class`限定词。

```
void two::first_data (one * class1) {

} 
```

定义`first_data`类中的方法`two`。

但是，您将 free 函数声明为friend `first_data`：

```
friend void first_data (one *); 
```

这是不一样的。如果您想要免费函数作为朋友，请使用`friend`您已有的声明。如果没有，您可以将方法声明为类似的朋友：

```
friend void two::first_data (one *); 
```

# javascript - jquery如何显示隐藏表列

> ID：12673354
> 
> 赞同：1
> 
> 时间：2012-10-01T12:33:39.870
> 
> 标签：javascript, jquery, html

如何使用 jQuery 隐藏整个表格列？

我设法隐藏了一个`td`，但没有隐藏`td`它下面的其他 2 s。隐藏表格的代码`td`：

```
$("#td_maand").hide(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T12:35:37.327

给所有相同的列 tds 相同的类，然后`$(".columnClass").hide();`

例如

```
<tr><td class="firstcolumn"></td><td class="secondcolumn"></td></tr>
<tr><td class="firstcolumn"></td><td class="secondcolumn"></td></tr>
<tr><td class="firstcolumn"></td><td class="secondcolumn"></td></tr>
<script>$(".firstcolumn").hide();</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T12:37:00.447

您可以使用[**nth-child**](http://api.jquery.com/nth-child-selector/)选择器来实现这一点，像这样使用它：

```
$('#yourtable tr td:nth-child(3)').hide(); 
```

这将隐藏您的第三列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T12:37:55.190

你可以轻松做到：

```
var i = [your_column_index];
$('td:nth-child(' + i + ')').hide();​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T12:38:46.990

您可以使用

```
$(this) // assuming this points to a td
  .closest('tbody') // find closest tbody (container)
  .find('> tr > td:nth-child('+$(this).index()+')') // find all td in the same column
  .hide(); // hide them 
```

[在http://jsfiddle.net/jFv6d/](http://jsfiddle.net/jFv6d/)演示
（*它隐藏了点击的列*）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T12:35:06.897

尝试`$("#td_maand").parent().hide();`

# objective-c - 整个对象属性的 KVO

> ID：12673356
> 
> 赞同：11
> 
> 时间：2012-10-01T12:33:50.357
> 
> 标签：objective-c, ios, key-value-observing

如果任何被监控的对象属性被修改，是否可以添加一个观察者来获得通知？例如：

```
@interface OtherObject : NSObject

@property (nonatomic) MyObject* myObject;

@end 
```

和

```
@interface MyObject : NSObject

@property (nonatomic) unsigned int property1;
@property (nonatomic) unsigned int property2;

@end 
```

我想做类似的事情：

```
[otherObject addObserver:self
               forKeyPath:@"myObject"
                  options:0
                  context:nil] 
```

并在 property1 或 property2 被修改时得到通知。如果我注册持有对象，它似乎不起作用（不知何故，因为 myObject 在我修改 property1 时并没有真正修改）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-01T12:55:17.190

我可以想到两个选择。

*   您可以创建一个单独的“主”属性并使其依赖于您的所有其他属性。

    ```
    @interface MyObject : NSObject
    @property (nonatomic) id masterProperty;
    @property (nonatomic) unsigned int property1;
    @property (nonatomic) unsigned int property2;
    @end 
    ```

     </p>

    ```
    + (NSSet *)keyPathsForValuesAffectingMasterProperty {
        return [NSSet setWithObjects:@"property1", @"property2", nil];
    } 
    ```

    如果您观察到`masterProperty`任何属性发生更改，您将收到通知。

*   您使用 Objective-C 运行时获取所有属性的列表并观察它们。

    ```
    - (void)addObserverForAllProperties:(NSObject *)observer
                                options:(NSKeyValueObservingOptions)options
                                context:(void *)context {
        unsigned int count;
        objc_property_t *properties = class_copyPropertyList([self class], &count);
        for (size_t i = 0; i < count; ++i) {
            NSString *key = [NSString stringWithCString:property_getName(properties[i])];
            [self addObserver:observer forKeyPath:key 
                      options:options context:context];
        }
        free(properties);
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T12:41:02.527

您可以做的是具有修改 myObject 的特定属性的功能...

```
-(void)setMyObjectName:(NSString*)name; 
```

然后在函数中有这个代码......

```
- (void)setMyObjectName:(NSString*)name
{
    [self willChangeValueForKey:@"myObject"];

    myObject.name = name;

    [self didChangeValueForKey:@"myObject"];
} 
```

这将在 myObject 上的该属性更改时通知观察者。

无论您需要这样做，请使用此模式，您可以收到有关 myObject 的任何更改的通知。

::EDIT:: 话虽如此，您应该可以使用...

```
[otherObject addObserver:self
              forKeyPath:@"myObject.property1"
                 options:0
                 context:nil]; 
```

这将观察 property1 并对其他属性执行相同的操作。

但这意味着为每个属性单独添加一个观察者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-21T10:44:42.320

DrummerB 答案的 Swift 版本，具有删除观察结果的附加功能（例如 in `deinit`）：

```
extension NSObject {
    func addObserverForAllProperties(
        observer: NSObject,
        options: NSKeyValueObservingOptions = [],
        context: UnsafeMutableRawPointer? = nil
    ) {
        performForAllKeyPaths { keyPath in
            addObserver(observer, forKeyPath: keyPath, options: options, context: context)
        }
    }

    func removeObserverForAllProperties(
        observer: NSObject,
        context: UnsafeMutableRawPointer? = nil
    ) {
        performForAllKeyPaths { keyPath in
            removeObserver(observer, forKeyPath: keyPath, context: context)
        }
    }

    func performForAllKeyPaths(_ action: (String) -> Void) {
        var count: UInt32 = 0
        guard let properties = class_copyPropertyList(object_getClass(self), &count) else { return }
        defer { free(properties) }
        for i in 0 ..< Int(count) {
            let keyPath = String(cString: property_getName(properties[i]))
            action(keyPath)
        }
    }
} 
```

# android - 如何在 android 中仅从 lat, long 获取 City, State, Country

> ID：12673357
> 
> 赞同：21
> 
> 时间：2012-10-01T12:33:54.793
> 
> 标签：android, google-geocoder, street-address

我有下面的代码将 lat、long 转换为人类可读的地址。现在我正在获取完整的详细信息，包括街道名称。我怎样才能只得到城市、州、国家？我不想要更多细节。请帮我。

```
Geocoder geoCoder = new Geocoder(getBaseContext(), Locale.getDefault());
try {
   List<Address> addresses = geoCoder.getFromLocation(latitude, longitude, 1);

   String add = "";
   if (addresses.size() > 0) 
   {
      for (int i=0; i<addresses.get(0).getMaxAddressLineIndex();i++)
     add += addresses.get(0).getAddressLine(i) + "\n";
   }

   showToastMessage(add);
}
catch (IOException e1) {                
   e1.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-11-27T04:20:14.397

对来自地址的对象使用以下方法：

`getLocality()`

`getCountryName()`

采用

`getAdminArea()`返回状态。

我不知道这对于其他国家/地区有多准确，但对于美国的地址，这会返回正确的州名。

PS很抱歉写了一个完整的单独答案，我还不能发表评论。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-01T12:41:12.843

反向地理编码位置描述中的详细信息量可能会有所不同，例如，一个可能包含最近建筑物的完整街道地址，而另一个可能仅包含城市名称和邮政编码。这将返回城市名称和国家名称

```
 if (addresses.size() > 0) {
        System.out.println(addresses.get(0).getLocality());
        System.out.println(addresses.get(0).getCountryName());
    } 
```

有关详细信息，您可以查看[Address](http://developer.android.com/reference/android/location/Address.html)对象

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T12:39:35.040

查看从地理编码器返回的`Address`( [javadoc )。](http://developer.android.com/reference/android/location/Address.html)这有单独的方法，例如`getLocality()`返回城市组织`getCountry()`以返回国家名称等。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-07T11:18:14.830

要通过以下方式获取城市、州和国家/地区使用代码 -

```
if (addresses.size() > 0) {
    System.out.println(addresses.get(0).getLocality());
    System.out.println(addresses.get(0).getAdminArea());
    System.out.println(addresses.get(0).getCountryName());
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-01T12:39:44.580

对来自地址的对象使用以下方法：

```
 getLocality()
 getCountryName() 
```

我不确定如何获得状态。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-07T13:17:32.320

在您的字符串文件中添加此国家/地区代码列表。

```
<string-array name="CountryCodes">
        <item>93,AF</item>
        <item>355,AL</item>
        <item>213,DZ</item>
        <item>376,AD</item>
        <item>244,AO</item>
        <item>672,AQ</item>
        <item>54,AR</item>
        <item>374,AM</item>
        <item>297,AW</item>
        <item>61,AU</item>
        <item>43,AT</item>
        <item>994,AZ</item>
        <item>973,BH</item>
        <item>880,BD</item>
        <item>375,BY</item>
        <item>32,BE</item>
        <item>501,BZ</item>
        <item>229,BJ</item>
        <item>975,BT</item>
        <item>591,BO</item>
        <item>387,BA</item>
        <item>267,BW</item>
        <item>55,BR</item>
        <item>673,BN</item>
        <item>359,BG</item>
        <item>226,BF</item>
        <item>95,MM</item>
        <item>257,BI</item>
        <item>855,KH</item>
        <item>237,CM</item>
        <item>1,CA</item>
        <item>238,CV</item>
        <item>236,CF</item>
        <item>235,TD</item>
        <item>56,CL</item>
        <item>86,CN</item>
        <item>61,CX</item>
        <item>61,CC</item>
        <item>57,CO</item>
        <item>269,KM</item>
        <item>242,CG</item>
        <item>243,CD</item>
        <item>682,CK</item>
        <item>506,CR</item>
        <item>385,HR</item>
        <item>53,CU</item>
        <item>357,CY</item>
        <item>420,CZ</item>
        <item>45,DK</item>
        <item>253,DJ</item>
        <item>670,TL</item>
        <item>593,EC</item>
        <item>20,EG</item>
        <item>503,SV</item>
        <item>240,GQ</item>
        <item>291,ER</item>
        <item>372,EE</item>
        <item>251,ET</item>
        <item>500,FK</item>
        <item>298,FO</item>
        <item>679,FJ</item>
        <item>358,FI</item>
        <item>33,FR</item>
        <item>689,PF</item>
        <item>241,GA</item>
        <item>220,GM</item>
        <item>995,GE</item>
        <item>49,DE</item>
        <item>233,GH</item>
        <item>350,GI</item>
        <item>30,GR</item>
        <item>299,GL</item>
        <item>502,GT</item>
        <item>224,GN</item>
        <item>245,GW</item>
        <item>592,GY</item>
        <item>509,HT</item>
        <item>504,HN</item>
        <item>852,HK</item>
        <item>36,HU</item>
        <item>91,IN</item>
        <item>62,ID</item>
        <item>98,IR</item>
        <item>964,IQ</item>
        <item>353,IE</item>
        <item>44,IM</item>
        <item>972,IL</item>
        <item>39,IT</item>
        <item>225,CI</item>
        <item>81,JP</item>
        <item>962,JO</item>
        <item>7,KZ</item>
        <item>254,KE</item>
        <item>686,KI</item>
        <item>965,KW</item>
        <item>996,KG</item>
        <item>856,LA</item>
        <item>371,LV</item>
        <item>961,LB</item>
        <item>266,LS</item>
        <item>231,LR</item>
        <item>218,LY</item>
        <item>423,LI</item>
        <item>370,LT</item>
        <item>352,LU</item>
        <item>853,MO</item>
        <item>389,MK</item>
        <item>261,MG</item>
        <item>265,MW</item>
        <item>60,MY</item>
        <item>960,MV</item>
        <item>223,ML</item>
        <item>356,MT</item>
        <item>692,MH</item>
        <item>222,MR</item>
        <item>230,MU</item>
        <item>262,YT</item>
        <item>52,MX</item>
        <item>691,FM</item>
        <item>373,MD</item>
        <item>377,MC</item>
        <item>976,MN</item>
        <item>382,ME</item>
        <item>212,MA</item>
        <item>258,MZ</item>
        <item>264,NA</item>
        <item>674,NR</item>
        <item>977,NP</item>
        <item>31,NL</item>
        <item>599,AN</item>
        <item>687,NC</item>
        <item>64,NZ</item>
        <item>505,NI</item>
        <item>227,NE</item>
        <item>234,NG</item>
        <item>683,NU</item>
        <item>850,KP</item>
        <item>47,NO</item>
        <item>968,OM</item>
        <item>92,PK</item>
        <item>680,PW</item>
        <item>507,PA</item>
        <item>675,PG</item>
        <item>595,PY</item>
        <item>51,PE</item>
        <item>63,PH</item>
        <item>870,PN</item>
        <item>48,PL</item>
        <item>351,PT</item>
        <item>1,PR</item>
        <item>974,QA</item>
        <item>40,RO</item>
        <item>7,RU</item>
        <item>250,RW</item>
        <item>590,BL</item>
        <item>685,WS</item>
        <item>378,SM</item>
        <item>239,ST</item>
        <item>966,SA</item>
        <item>221,SN</item>
        <item>381,RS</item>
        <item>248,SC</item>
        <item>232,SL</item>
        <item>65,SG</item>
        <item>421,SK</item>
        <item>386,SI</item>
        <item>677,SB</item>
        <item>252,SO</item>
        <item>27,ZA</item>
        <item>82,KR</item>
        <item>34,ES</item>
        <item>94,LK</item>
        <item>290,SH</item>
        <item>508,PM</item>
        <item>249,SD</item>
        <item>597,SR</item>
        <item>268,SZ</item>
        <item>46,SE</item>
        <item>41,CH</item>
        <item>963,SY</item>
        <item>886,TW</item>
        <item>992,TJ</item>
        <item>255,TZ</item>
        <item>66,TH</item>
        <item>228,TG</item>
        <item>690,TK</item>
        <item>676,TO</item>
        <item>216,TN</item>
        <item>90,TR</item>
        <item>993,TM</item>
        <item>688,TV</item>
        <item>971,AE</item>
        <item>256,UG</item>
        <item>44,GB</item>
        <item>380,UA</item>
        <item>598,UY</item>
        <item>1,US</item>
        <item>998,UZ</item>
        <item>678,VU</item>
        <item>39,VA</item>
        <item>58,VE</item>
        <item>84,VN</item>
        <item>681,WF</item>
        <item>967,YE</item>
        <item>260,ZM</item>
        <item>263,ZW</item>
    </string-array> 
```

然后使用以下代码添加位置更改方法。

```
@Override
    public void onLocationChanged(Location location) {
        super.onLocationChanged(location);
        try {
            Geocoder gcd = new Geocoder(context, Locale.getDefault());
            List<Address> addresses = gcd.getFromLocation(location.getLatitude(),
                    location.getLongitude(), 1);

            if (addresses.size() > 0) {
                String countryName = addresses.get(0).getCountryCode();
                LogUtils.LOGE("TAG_DATA", getCountryZipCode(countryName), Const.LOG_VISIBILITY);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public String getCountryZipCode(String country) {
        String CountryZipCode = "";

        String[] rl = this.getResources().getStringArray(R.array.CountryCodes);
        for (String aRl : rl) {
            String[] g = aRl.split(",");
            if (g[1].trim().equals(country)) {
                CountryZipCode = "+" + g[0];
                break;
            }
        }
        return CountryZipCode;
    } 
```

# php - 如何使用 alertview clickedbutton 更新 msql 中的值？

> ID：12673359
> 
> 赞同：0
> 
> 时间：2012-10-01T12:33:58.967
> 
> 标签：php, iphone, mysql, objective-c, xcode

我想使用这个空白

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
if ([[alertView buttonTitleAtIndex:buttonIndex] isEqualToString:@"One point，Not good"])
{
} 
```

连接到 mysql 并更新名为 score 的列中的值。

例如

在开始的列中有五个点，我按下alertview按钮“一个点”

那么值列将变为六个点。

我不知道如何使用这个 void 来做到这一点，我已经搜索了很多信息，但我没有得到它

我使用json和php连接到mysql，我使用phpmyadmin。

不管我做错了，还是这个空白不能用在这个上面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:47:05.640

首先为您的 UIAlertview 设置标签值，然后

您应该使用按钮索引值而不是其字符串文本

//我刚刚将标签值设为204

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
if(alertView.tag==204 && buttonIndex==1)
{

   //your logic

}

else if(alertView.tag==204 && buttonIndex==0)
{

   //your logic

}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:11:05.963

您可以使用 UIAlertView 委托方法

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex
{
if(buttonIndex == 0)
    {
        //do something if you press the "cancel" button
    } else if (buttonIndex == 1) {
        //do other thing with other button
    }
} 
```

对于多个 UIAlertView，您可以为每个警报视图设置**标签。**

您还需要为 UIAlertView 设置委托：**UIAlertViewDelegate**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:12:04.213

方法声明开头的 (void) 只是表示该方法在代码执行后不返回任何值。另一方面，声明如下：

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView; 
```

表示将在方法结束时返回 NSInteger，因此您实际上可以将方法设置为等于变量，如下所示：

```
NSInteger number = [self numberOfSectionsInTableView:scoreTable]; 
```

对于您的问题，如果您希望通过 PHP 更新位于远程服务器上的一些 MySQL 表，您需要创建一个可以使用 NSURLConnection 将值发布到服务器上的 PHP 脚本的方法。这远远超出了我具体回答的范围，因为它真的应该分解成更小的问题。

问题 1：如何编写我的 PHP 脚本？

1.  声明将在消息正文中的传入 $_['POST'] 变量
2.  使 mysql_connect 连接到您的数据库
3.  编写 SQL 语句检索要更新的记录，并更新它

问题 2：如何使用 NSURLConnection 将更新发布到网络服务器

1.  使用处理 MySQL 更新的 .php 脚本的 URL 创建一个 NSURL 对象
2.  创建一个 NSMutableURLRequest，给它 NSURL 并将 HTTPMethod 属性设置为 @"POST"
3.  困难的部分是创建 bodyData，它将是与 PHP 脚本中的 $_['POST'] 变量相对应的编码标头。
4.  创建一个 NSURLConnection 对象，将 request 属性设置为您的 NSMutableURLRequest 并设置 Delegate 以接收回调信息
5.  启动 NSURLConnection

我认为，如果您搜索 SO，您可以找到这两个问题的答案。

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T12:47:20.487

你必须使用的功能是这个

```
- (void)alertView:(UIAlertView *)alertView
clickedButtonAtIndex:(NSInteger)buttonIndex; 
```

要使用此功能，您的 ViewController 必须实现`UIAlertViewDelegate`

在里面`.h` `yourViewController : UIViewController <UIAlertViewDelegate>`

例子

```
- (void)alertView:(UIAlertView *)alertView
clickedButtonAtIndex:(NSInteger)buttonIndex
{ 
    if(buttonIndex == 0)
    {
        //do something if you press the "cancel" button
    } else if (buttonIndex == 1) {
        //do other thing with other button
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T12:42:48.917

使用按钮索引

```
if(buttonIndex == 1)
{
// write the logic here
return;
}
else if(buttonIndex == 2)
{
// write the logic here
return;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T16:32:16.637

**首先**，要检查是否单击了右键，您应该使用某些头文件中定义的内容。例如：

```
#define CORRECT_BUTTON_TITLE @"One point，Not good" 
```

然后，做你的检查

```
 -(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
    {
    if ([[alertView buttonTitleAtIndex:buttonIndex] isEqualToString:CORRECT_BUTTON_TITLE])
    {
       // UPDATE YOUR DATABASE
    }} 
```

这应该允许您一次轻松地修改您的名称并避免错误。

**其次**，如何更新你的数据库。简单地说，您必须将指令发送到位于您的服务器上的 PHP 文件，“旁边”是您的 MySQL 数据库。您的指令是通过 HTTP POST 请求发送的。在你的 php 中，

```
if( isset($_POST["updateScore"]) and isset($_POST["newScore"])) ){
   $newScore = intval( $_POST["newScore"] );
   // execute mysql queries
} 
```

在 XCode 中，您可以使用 ASIHTTPRequest 发送 POST 请求。假设您的 PHP 文件位于`www.example.com/update.php`.

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
        {
        if ([[alertView buttonTitleAtIndex:buttonIndex] isEqualToString:CORRECT_BUTTON_TITLE])
        {
           // UPDATE YOUR DATABASE
           NSURL *url = [NSURL URLWithString:@"www.example.com/update.php"];
           ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
           [request setPostValue:@"1" forKey:@"updateScore"];
           [request setPostValue:[NSString stringWithFormat:@"%i", 6] forKey:@"newScore"];
           [request setDelegate:self];
           [request startAsynchronous];
        }} 
```

# android - Google Play 商店的搜索 API

> ID：12673360
> 
> 赞同：5
> 
> 时间：2012-10-01T12:34:00.977
> 
> 标签：android, api, google-play

Google Play 商店有搜索 API 吗？我正在寻找类似 [Apple Search API](http://itunes.apple.com/search)的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T12:35:51.750

有一个，但它是一个非官方的 API： [http ://code.google.com/p/android-market-api/](http://code.google.com/p/android-market-api/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-28T00:57:03.810

调用[WhereDat](http://wheredatapp.com/developers/) API 就像执行 HTTP Get 一样简单，只需将“facebook”替换为您的搜索参数：

[http://api.wheredatapp.com/search?q=facebook](http://api.wheredatapp.com/search?q=facebook)

这就是结果的样子：

```
{
  "apps": [
    {
      "category": "Social",
      "rating": 3.9948248863220215,
      "updated": 1435805622,
      "created": 1427510074,
      "icon_url": "https://lh3.googleusercontent.com/ZZPdzvlpK9r_Df9C3M7j1rNRi7hhHRvPhlklJ3lfi5jk86Jd1s0Y5wcQ1QgbVaAP5Q=w300",
      "title": "Facebook",
      "download_url": "https://play.google.com/store/apps/details?id=com.facebook.katana",
      "package": "com.facebook.katana",
      "ratings_count": 29588232,
      "short_description": "Keeping up with friends is faster than ever.• See what friends are up to• Share updates, photos and videos• Get notified when friends like and comment on your posts• P..."
    },
    {
      "category": "Business",
      "rating": 4.130451679229736,
      "updated": 1435644682,
      "created": 1427510616,
      "icon_url": "https://lh4.ggpht.com/vcyZimfIRlWrLarEpIj7MMSuqgwIkF4bx5nArKhFWsEqGclnPTAeLLK4cFiQ5QscRIEc=w300",
      "title": "Facebook Pages Manager",
      "download_url": "https://play.google.com/store/apps/details?id=com.facebook.pages.app",
      "package": "com.facebook.pages.app",
      "ratings_count": 693199,
      "short_description": "Pages Manager helps admins connect with their audience and keep up with activity on multiple Pages, all in one place.• Post updates and photos and respond to comments ..."
    },
    {
      "category": "Social",
      "rating": 4.149935245513916,
      "updated": 1435881022,
      "created": 1427510065,
      "icon_url": "https://lh5.ggpht.com/sFV8zzvuM__JTl0QDhtp0sGMzBXKGrEQWLpdJr_DhNxHNIJ7rNbvEewTJdhULTjsgM0=w300",
      "title": "Facebook Groups",
      "download_url": "https://play.google.com/store/apps/details?id=com.facebook.groups",
      "package": "com.facebook.groups",
      "ratings_count": 106446,
      "short_description": "This app gives you a dedicated space for you and your groups.See all of your Facebook Groups in one place. Discuss, plan and collaborate easily and without distraction..."
    },
    {
      "category": "Social",
      "rating": 4.336362838745117,
      "updated": 1435319250,
      "created": 1431991423,
      "icon_url": "https://lh3.googleusercontent.com/Alon4Gigwl2DqrT36O6JMn-M40tinuxFHWROtv0TP8ozX8Sr5MiBM1CuHX-veqFhnKvQ=w300",
      "title": "Facebook Lite",
      "download_url": "https://play.google.com/store/apps/details?id=com.facebook.lite",
      "package": "com.facebook.lite",
      "ratings_count": 95510,
      "short_description": "This version of Facebook is efficient with data and works in all network conditions.Facebook Lite:- Installs quickly — the app is less than 1 MB- Works on all Android ..."
    }
  ]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T08:38:00.453

实际上有一个像上面提到的那样。但是使用它是非法的，我们曾考虑在我们的创业公司中使用它，我们请了一位律师检查我们是否可以使用它。经过一个小的研究（基于用户协议），他告诉我们使用这个 API 是非法的。不使用它的另一个原因是你不知道它什么时候会停止工作（如果谷歌改变了他们的协议，API 将无法工作）

# tomcat - catalina.out：忽略特定的错误信息？

> ID：12673364
> 
> 赞同：1
> 
> 时间：2012-10-01T12:34:35.013
> 
> 标签：tomcat, logging, catalina.out

我在 catalina.out 中收到与 java-sdk-http-connection-reaper 相关/来自 java-sdk-http-connection-reaper 的错误。

1）这些错误的原因是什么？

2）是否有某种方法可以从 catalina.log中专门针对某些**特定错误**（例如上述错误）或**一般情况下？**可以通过更改 log4j 配置或其他一些记录器日志记录级别或要求它忽略某些特定日志消息来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:34:16.150

Q> 这些错误的原因是什么？
A> 将有助于查看实际错误以更详细地回答。

通常，catalina.out 会捕获您的 webapp 打印到的所有内容`System.out`。

也有可能通过 log4j 记录并`ConsoleAppender`使用内容。如果是这种情况，配置就像在 中指定以下内容一样简单`log4j.xml`：

```
<logger name="class.that.needs.to.be.suppressed">
  <level value="off"/>
</logger> 
```

否则，尝试`$tomcat_home/conf/logging.properties`通过添加修改：

```
class.that.needs.to.be.suppressed = ERROR 
```

# sql - 使用开始日期和结束日期对月度报告中的数据进行分组

> ID：12673365
> 
> 赞同：1
> 
> 时间：2012-10-01T12:34:52.000
> 
> 标签：sql, sql-server, sql-server-2008-r2, pivot

我有一个名为的表`tours`，其中有以下字段

```
tourId, tourStartDate, tourEndDate , tourDetail ,deptCode,targetYear, and officerName 
```

现在我想把我的数据总结成几个月，所以结果表应该像下面的模式

```
declare @temp table (
  id int identity(1,1) not null,
  officerName, 
  jan int ,feb int,
  march int,april int, 
  may int,
  june int ,
  july int, 
  aug int,
  sep int, 
  oct int, 
  nov int, 
  dec int
);
select * from  @temp 
```

我尝试`with cte`遍历每一行并使用 case 插入临时表，但它看起来不是很好的解决方案，所以任何线索或指南都对我有很大帮助。

**该月官员完成的旅行计数将作为值显示在月份列中**

**已编辑**

开始日期在 1 月，结束日期在其他月份的巡演，比如说 2 月，那么它的值将出现在两个月

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:51:34.887

为了使它出现在两个月中，如果 end 在不同的月份，则将 (1) 按开始日期 (2) 按结束日期的查询部分[联合起来。](http://msdn.microsoft.com/en-us/library/ms180026.aspx)要比较月份，请使用[MONTH](http://msdn.microsoft.com/en-us/library/ms187813.aspx)获取日期的月份。

要将列名称作为月份，请使用[DateName](http://msdn.microsoft.com/en-us/library/ms174395.aspx) (Month, )。为了使其保持一致，请使用[LEFT](http://msdn.microsoft.com/en-us/library/ms177601.aspx)仅使用前 3 个字符。

要将行转换为列，请使用[PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)。

```
SELECT officerName, Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec
FROM (
    select LEFT(datename(month,tourStartDate),3) mon, officerName
    from tbl
    union all
    select LEFT(datename(month,tourEndDate),3) mon, officerName
    from tbl
    where month(tourStartDate) != month(tourEndDate)
) P
PIVOT (COUNT(mon) for mon in (Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec)) PV 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T12:37:20.907

您正在寻找一个`pivot`

[http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx)

就像是

```
select *
from  (select officername, month(tourstartdate) tsm, value from tours) src
pivot 
(sum(value) for tsm in ([1],[2],[3],[4],[5],[6],[7],[8],[9],[10],[11],[12])) p 
```

# wpf - 更改图像的颜色 - 在运行时

> ID：12673367
> 
> 赞同：0
> 
> 时间：2012-10-01T12:34:58.507
> 
> 标签：wpf, silverlight

我要为汽车经销商申请新的。他们基本上想要一个 WPF/silverlight 应用程序，可以在其中选择汽车（模型），然后通过调色板选择汽车的颜色（从预定义的颜色中）。他们还需要能够适应不同类型的轮辋、前灯和内饰。

什么是最好/最简单的方法。一直在考虑拥有所有不同的图像，然后在选择更改时将它们换掉。然而，这具有不存在所有组合的所有图像的潜在问题（例如，红色大众、金属轮辋、白色皮革内饰）等。

还有其他方法吗？更换颜色？拥有一个基本模型，然后在顶部复制汽车的“车身”，在顶部复制轮辋等，然后只需要启用/禁用图像的特定“层”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T09:40:15.597

我会通过使用不同的图层来做到这一点：以汽车颜色为半透明部分的基本模型，在这张带有不同附加组件的图片之上，背景颜色是汽车的颜色。诀窍是将所有东西组合在一起，看起来不错。

根据颜色（也许您想要阴影或镀铬效果），您可以为每种颜色制作一个模型的图片，然后在此之上添加附加组件和内饰。

# powershell - Powershell 开放端口配置文件，全部（私有公共域）

> ID：12673368
> 
> 赞同：5
> 
> 时间：2012-10-01T12:35:05.190
> 
> 标签：powershell

我有一个打开端口 5555 的 powershell 脚本，但是当我希望它全部（私有、公共、域）时，它默认为 profile = private。如何修改脚本以实现此目的？

```
$port = New-Object -ComObject HNetCfg.FWOpenPort
$port.Port = 5555
$port.Name = 'MyPort'
$port.Enabled = $true

$fwMgr = New-Object -ComObject HNetCfg.FwMgr
$profile = $fwMgr.LocalPolicy.CurrentProfile
$profile.GloballyOpenPorts.Add($port)

$port = New-Object -ComObject HNetCfg.FWOpenPort
$port.Port = 6521
$port.Name = 'ArkleSQL'
$port.Enabled = $true

$fwMgr = New-Object -ComObject HNetCfg.FwMgr
$profile = $fwMgr.LocalPolicy.CurrentProfile
$profile.GloballyOpenPorts.Add($port) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-13T13:34:29.617

您可以使用`FwPolicy2`和`FWRule`为所有配置文件创建规则：

```
$fwPolicy = New-Object -ComObject HNetCfg.FwPolicy2

$rule = New-Object -ComObject HNetCfg.FWRule
$rule.Name = 'MyPort'
$rule.Profiles = $NET_FW_PROFILE2_ALL
$rule.Enabled = $true
$rule.Action = $NET_FW_ACTION_ALLOW
$rule.Direction = $NET_FW_RULE_DIR_IN
$rule.Protocol = $NET_FW_IP_PROTOCOL_TCP
$rule.LocalPorts = 5555

$fwPolicy.Rules.Add($rule) 
```

以下是使用的常量：

```
$NET_FW_PROFILE2_DOMAIN = 1
$NET_FW_PROFILE2_PRIVATE = 2
$NET_FW_PROFILE2_PUBLIC = 4
$NET_FW_PROFILE2_ALL = 2147483647

$NET_FW_IP_PROTOCOL_TCP = 6
$NET_FW_IP_PROTOCOL_UDP = 17
$NET_FW_IP_PROTOCOL_ICMPv4 = 1
$NET_FW_IP_PROTOCOL_ICMPv6 = 58

$NET_FW_RULE_DIR_IN = 1
$NET_FW_RULE_DIR_OUT = 2

$NET_FW_ACTION_BLOCK = 0
$NET_FW_ACTION_ALLOW = 1 
```

（来源： http: [//www.ohmancorp.com/files/RefWin-AdvFirewall-JCopyFWRules.txt](http://www.ohmancorp.com/files/RefWin-AdvFirewall-JCopyFWRules.txt)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T15:02:46.610

COM 对象有两个值用于防火墙管理。0 代表域网络，1 代表标准网络。似乎（在此 API 中）此公共配置文件和私有配置文件之间没有区别。

您可以替换的最后一部分

```
$fwMgr = New-Object -ComObject HNetCfg.FwMgr
$profile = $fwMgr.LocalPolicy.CurrentProfile
$profile.GloballyOpenPorts.Add($port) 
```

和

```
$Profiles = @{
    NET_FW_PROFILE_DOMAIN = 0
    NET_FW_PROFILE_STANDARD = 1
}

$fwMgr = New-Object -ComObject HNetCfg.FwMgr

$profile.GloballyOpenPorts.Add($port)
foreach ($ProfileKey in $Profiles.Keys)
{
    $Profile = $fwMgr.LocalPolicy.GetProfileByType($profiles[$ProfileKey])
    $Profile.GloballyOpenPorts.Add($Port)
} 
```

# android - 使用phonegap的android应用程序中的页面重叠

> ID：12673380
> 
> 赞同：2
> 
> 时间：2012-10-01T12:35:37.727
> 
> 标签：android, css, cordova, iui

在我的应用程序的主页（消息）中有两个按钮（编辑和设置），单击每个按钮都会导航到单独的页面。

问题：在模拟器上一切正常，但在真正的安卓设备上存在重叠（所有三个页面都重叠）。

我不知道问题出在哪里，因为它在模拟器上正常工作。

下面是我的phonegap代码：

```
function home() {

            document.removeEventListener("backbutton", handleBackButton, false);
            document.addEventListener("backbutton", handleBackButtonOnHome, false);

            //Start Refresh
            gAppControl.refresh = true;

            onDeviceReady();

            //Tool Bars
            document.getElementById("toolHome").style.display = 'block';
            document.getElementById("toolEdit").style.display = 'none';
            document.getElementById("toolMessage").style.display = 'none';
            document.getElementById("toolSetting").style.display = 'none';
            document.getElementById("bottomButtons").style.display = 'none';

            //New changes by romit
            document.getElementById('delete_a').onclick='';
            document.getElementById('delete_a').classList.add('whiteButton');
            document.getElementById('delete_a').classList.remove('redButton');

            //Messages
            document.getElementById("home").style.display = 'block';
            document.getElementById("edit").style.display = 'none';
            document.getElementById("setting").style.display = 'none';
            for (i=0;i<gAppControl.messageCount;i++) 
            document.getElementById("details"+i).style.display = 'none';
        }

function edit() {

            document.removeEventListener("backbutton", handleBackButtonOnHome, false);
            document.addEventListener("backbutton", handleBackButton, false);

            //Stop Refresh
            gAppControl.refresh = false;

            //Tool Bars
            document.getElementById("toolEdit").style.display = 'block';
            document.getElementById("bottomButtons").style.display = 'block';
            document.getElementById("toolHome").style.display = 'none';
            document.getElementById("toolMessage").style.display = 'none';

            //Messages
            document.getElementById("home").style.display = 'none';
            document.getElementById("edit").style.display = 'block';
            for (i=0;i<gAppControl.messageCount;i++) 
            document.getElementById("details"+i).style.display = 'none';
        }

function setting() {

            document.removeEventListener("backbutton", handleBackButtonOnHome, false);
            document.addEventListener("backbutton", handleBackButton, false);

            //Stop Refresh
            gAppControl.refresh = false;

            //Tool Bars
            document.getElementById("toolSetting").style.display = 'block';
            document.getElementById("toolEdit").style.display = 'none';
            document.getElementById("toolHome").style.display = 'none';
            document.getElementById("toolMessage").style.display = 'none';

            //Messages
            document.getElementById("setting").style.display = 'block';
            document.getElementById("home").style.display = 'none';
            document.getElementById("edit").style.display = 'none';
            for (i=0;i<gAppControl.messageCount;i++) 
            document.getElementById("details"+i).style.display = 'none';

            getSettings();

        } 
```

这是我的CSS：

```
.button2 {
    position: absolute;
    overflow: hidden;
    top: 8px;
    left: 6px;
    margin: 0;
    border-width: 0 5px;
    padding: 0 3px;
    width: auto;
    height: 30px;
    line-height: 30px;
    font-family: inherit;
    font-size: 12px;
    font-weight: bold;
    color: #FFFFFF;
    text-shadow: rgba(0, 0, 0, 0.6) 0px -1px 0;
    text-overflow: ellipsis;
    text-decoration: none;
    white-space: nowrap;
    background: none;
}

.blueButton {
    border-width: 0 5px;
}

.button {
    -webkit-border-image: url(toolButton.png) 0 5 0 5;
    -moz-border-image: url(toolButton.png) 0 5 0 5;
}

.blueButton {
    -webkit-border-image: url(blueButton.png) 0 5 0 5;
    -moz-border-image: url(blueButton.png) 0 5 0 5;
} 
```

提前致谢。七无

# java - 导出为可运行的 jar，但具有可编辑的属性文件？

> ID：12673384
> 
> 赞同：1
> 
> 时间：2012-10-01T12:35:40.700
> 
> 标签：java, eclipse

我有一个客户项目的属性文件。我想将客户端导出为可运行的 jar，但不应将属性文件*集成*到此 jar 中。因为我当然想对其进行编辑，而不必重新编译 jar 客户端文件。

如何使用 eclipse 以这种方式导出它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:46:09.117

我目前没有使用 Java，但我曾经使用 Eclipse 导出可运行的 JAR。我使用[属性](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)来存储设置，文件是在 Jar-File 的周围文件夹中自动生成的。我不知道这是否对您有帮助，但这可能是一个起点......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:15:13.637

使用标准 Eclipse 的导出作为可运行 JAR 似乎不可能做到这一点（右键单击项目 -> 导出 -> 可运行 JAR 文件 -> 另存为 ANT 脚本）。但是，Eclipse 允许您将导出的定义存储为 Ant 文件，以后可以对其进行修改。

修改如下所示（我用注释标记了修改的部分；它应该很容易与您的 Eclipse 生成的脚本进行比较）。

```
<target name="create_run_jar">
    <jar destfile="/mytargetlib/myjar.jar">
        <manifest>
            <attribute name="Main-Class" value="Main"/>
              <!-- Here we only add lib/properties, the rest should be pre-generated by Eclipse -->
            <attribute name="Class-Path" value=". lib/myjar1.jar lib/myjar2.jar lib/properties"/>
        </manifest>
        <fileset dir="/bin" excludes="**/*.properties" /> 
    </jar>
    <delete dir="/mytargetdir/lib"/>
    <mkdir dir="/mytargetdir/lib"/>       
    <copy file="myjar.jar" todir="/mytargetdir/lib"/>
    <copy file="/myprojectdir/lib/myjar1.jar" todir="/mytargetdir/lib"/>
    <copy file="/myprojectdir/lib/myjar2.jar" todir="/mytargetdir/lib"/>
      <!-- Again, all the above was generated by Eclipse. We only add a copy of our property file --> 
        <mkdir dir="/mytargetdir/lib/properties"/>
        <copy file="/myprojectdir/properties/mypropertyfile.properties" todir="/mytargetdir/lib/properties"/>
      <!-- end of our addition --> 
</target> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T12:48:06.433

您必须将它们放在项目工作区中，使其位于 jar 中（但不是这种情况，因为您不希望这样做）或从预定义的目录加载它们，例如，您可以要求属性文件始终位于与可运行的 jar 文件相同的目录。

顺便说一句，如果将属性文件放在 jar 中，则不必重新编译项目。jar 文件只是一个包，您可以将其解包，对属性文件进行编辑，然后再次打包。它会按照您的要求工作。

如果你改变主意，请看[这篇](https://stackoverflow.com/questions/333363/loading-a-properties-file-from-java-package)文章。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T12:57:11.717

如果您希望属性文件与 JAR 文件位于同一目录中，只需在 Ant 构建中添加一个额外步骤以压缩属性文件和 JAR 文件。

如果没有，让您的 Java 代码在第一次运行 Java 应用程序时在您想要的位置创建属性文件。

# r - 如果标题字符串太长，如何适应 strip.text.x

> ID：12673392
> 
> 赞同：1
> 
> 时间：2012-10-01T12:36:09.697
> 
> 标签：r, ggplot2

数据框：x

```
Date          Duration  Test
1/1/2012      10        This is the first that took place on1/1/2012
2/1/2012      3         This test peformed the best result 
```

我在前往适合图表的 strip.text.x 时遇到了挑战。有没有人有任何建议我该如何解决这个问题？

```
ggplot(x, aes(Date, Duration, group=Test, colour=Test)) 
+ geom_line() 
+ geom_smooth(method="lm", se=T, size=1) 
+ facet_wrap(~Test, scale="free") 
+ opts(strip.text.x = theme_text(size=8, colour="navyblue")) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:01:11.233

如果可以使用`facet_grid`而不是`facet_wrap`，则可以使用`labeller`参数的功能来任意换行文本。（`facet_wrap`没有（[还](https://github.com/hadley/ggplot2/issues/25)）有`labeller`论据。）

使`x`可重现

```
x <-
structure(list(Date = structure(c(-719143, -718778), class = "Date"), 
    Duration = c(10L, 3L), Test = c("This is the first that took place on1/1/2012", 
    "This test peformed the best result")), .Names = c("Date", 
"Duration", "Test"), row.names = c(NA, -2L), class = "data.frame") 
```

[包装标签的辅助函数（在 ggplot2 wiki 上有](https://github.com/hadley/ggplot2/wiki/labeller)更详细的讨论）

```
library("plyr")
label_wrap_gen <- function(width = 25) {
    function(variable, value) {
      laply(strwrap(as.character(value), width=width, simplify=FALSE), 
            paste, collapse="\n")
    }
} 
```

绘制代码。更改为点，因为只给出了两个值，所以线条和平滑没有意义。但无论如何，这些都不是问题的焦点。

```
ggplot(x, aes(Date, Duration, group=Test, colour=Test)) + 
  geom_point() +
  facet_grid(~Test, scale="free", labeller=label_wrap_gen(width=10)) + 
  opts(strip.text.x = theme_text(size=8, colour="navyblue")) 
```

![在此处输入图像描述](../Images/b0b9bae702264c44ddc2c8e72e7357fc.png)

编辑：

由于`facet_grid`对您不起作用，您可以将换行符`Test`直接嵌入到变量中，然后使用`facet_wrap`.

```
x$Test <- laply(strwrap(as.character(x$Test), width=10, simplify=FALSE), 
                paste, collapse="\n")
ggplot(x, aes(Date, Duration, group=Test, colour=Test)) + 
  geom_point() +
  facet_wrap(~Test, scale="free") + 
  opts(strip.text.x = theme_text(size=8, colour="navyblue")) 
```

![在此处输入图像描述](../Images/5686a659f60467fa3173a212155405aa.png)

我不明白你在评论中提出的关于标题的其他问题。也许从中提出一个新的、更清晰的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-14T14:33:47.993

现在可以在`ggplot2::label_wrap_gen`.

# ruby-on-rails-3 - 保存 ActiveRecord 记录时出现奇怪的编码错误

> ID：12673395
> 
> 赞同：0
> 
> 时间：2012-10-01T12:36:13.763
> 
> 标签：ruby-on-rails-3, activerecord, encoding

我有以下情况：我的 web 服务正在接收 JSON 数据并创建模型（典型的 REST 场景）。有时我得到一个

```
Encoding::CompatibilityError Exception: incompatible character encodings: ASCII-8BIT and UTF-8 
```

保存记录时的错误消息，只能（或）绑定到两个属性。启动调试器，将这两个属性中的任何一个设置为空字符串并保存工作，如下所示：

```
model = Model.new(params[:model])
model.save! # Fails with above error message

model = Model.new(params[:model])
model.attribute1 = ""
model.save! # Works

model = Model.new(params[:model])
model.attribute2 = ""
model.save! # Works too! 
```

现在params都是从http请求中解析出来的，怎么会相互依赖呢？

有同样情况的人吗？

**编辑：** 我们找到了兼容性错误的原因：[https](https://github.com/jruby/activerecord-jdbc-adapter/issues/229) ://github.com/jruby/activerecord-jdbc-adapter/issues/229看起来，JDBC 适配器在 utf-8 编码方面存在一些错误，这已在传统红宝石中固定了很长时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:50:59.533

正如在对我的原始问题的编辑中添加的那样，问题是 JRuby 的 JDBC 适配器中的一个错误（我忘了将其添加为约束，我的错！）：[https ://github.com/jruby/activerecord-jdbc-适配器/问题/229](https://github.com/jruby/activerecord-jdbc-adapter/issues/229)

# delphi - Delphi XE - System.Pos 函数的更快替代方案

> ID：12673397
> 
> 赞同：4
> 
> 时间：2012-10-01T12:36:17.927
> 
> 标签：delphi, delphi-xe, delphi-xe3

我知道许多来自 FastStrings 的代码已包含在 Delphi XE 中。我需要处理数千个文件并进行一些文本处理。[System.Pos](http://docwiki.embarcadero.com/Libraries/en/System.Pos)例程是否有“更快”的替代方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T12:42:15.350

是的。[`PosEx`函数来自 FastCode](http://en.wikipedia.org/wiki/FastCode#Contributions_to_Delphi_RTL)，与 System.Pos 相比要快得多。它位于[StrUtils](http://docwiki.embarcadero.com/Libraries/en/System.StrUtils)单元中。

# ios - Monotouch自定义UITableViewCell键值编码错误

> ID：12673400
> 
> 赞同：2
> 
> 时间：2012-10-01T12:36:20.377
> 
> 标签：ios, uitableview, xamarin.ios, monodevelop, nib

为我们的项目评估 Monotouch 并收到此错误：

> MonoTouch.Foundation.MonoTouchException：抛出Objective-C异常。名称：NSUnknownKeyException 原因：[ setValue:forUndefinedKey:]：此类与键 labelJobNo 的键值编码不兼容。

当我将标签添加到自定义 UITableViewCell xib 并将其与 ctrl-drag 方法链接时，就会发生这种情况。

如果我只是添加标签而不链接它，它工作正常。知道如何解决吗？

这是 JobListCell.designer.cs 的外观：

```
 [Register ("JobListCell")]
partial class JobListCell
{
    [Outlet]
    MonoTouch.UIKit.UILabel labelJobNo { get; set; }

    void ReleaseDesignerOutlets ()
    {
        if (labelJobNo != null) {
            labelJobNo.Dispose ();
            labelJobNo = null;
        }
    }
} 
```

# php - IE 的条件标签 - 如果浏览器是 IE，是否可以不加载 JS 文件？

> ID：12673404
> 
> 赞同：0
> 
> 时间：2012-10-01T12:36:37.277
> 
> 标签：php, javascript, internet-explorer, internet-explorer-8

这听起来可能很奇怪，但是当用户在 IE 8 上时，我不想添加其他文件，而是想删除一个通常在所有其他浏览器中加载的 JS 文件。

再说一遍。

我的里面有这个`head`：

```
<script type="text/javascript" async src="my-script.js"></script> 
```

而且我希望该脚本可以在除 IE 之外的所有浏览器中运行（因为它不起作用，所以我不想加载它）。

我知道通常的条件标签是这样的

```
<!--[if lt IE 9]>
<![endif]--> 
```

但我想没有办法反过来使用它们，所以我想到的唯一解决方案是......</p>

```
<?php if (strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE') == FALSE) { ?>
      <script type="text/javascript" async src="my-script.js"></script>
<?php } ?> 
```

这是执行此操作的最佳解决方案吗？此外，我实际上需要测试所有低于 9 的 IE 版本。所以我不希望 JS 文件在 IE8、IE7 和 IE6 中加载。

先感谢您。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T12:39:05.227

**除了 IE**

```
<!--[if !IE]> -->
<script type="text/javascript" async src="my-script.js"></script>
<!-- <![endif]--> 
```

**仅 IE 9 及更高版本**

```
<!--[if gt IE 8]>
<script type="text/javascript" async src="my-script.js"></script>
<![endif]--> 
```

或者

```
<!--[if gte IE 9]>
<script type="text/javascript" async src="my-script.js"></script>
<![endif]--> 
```

**IE 9 及更高版本 + 其他浏览器**

理论上，您可以使用 OR 运算符，但 NOT IE 注释样式不支持此操作。

```
<!--[if !(IE)|(gte IE 9)]>
Test
<![endif]--> 
```

您还可以使用这样的嵌套注释：

```
<!--[if !IE]><![if gte IE 9]>-->
Test
<!--<![endif]><![endif]--> 
```

[更多信息](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)

# django - Django：外键关系取决于选择

> ID：12673407
> 
> 赞同：2
> 
> 时间：2012-10-01T12:36:48.820
> 
> 标签：django, model, foreign-keys

在 Django 中，有没有办法在模型之间创建以下动态关系？

```
 class ClothingMale(models.Model):
     # male specific fields

 class ClothingFemale(models.Model):
     # female specific fields

 class Person(models.Model):
    gender = models.IntegerField(max_length=2, choices=GENDER_CHOICES, blank=True)
    clothes = models.ForeignKey(???) 
```

我正在为 Person 使用 ModelForm。表单内的衣服字段应根据选择的性别动态变化。我知道 GenericForeignKeys 但我想知道是否有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:49:16.193

恕我直言，这是数据库设计的问题；我会选择一个`PersonClothing`超类并用 and 子类化`MalePersonClothing`它`FemalePersonClothing`。超`PersonClothing`类将是 Django[抽象基类](https://docs.djangoproject.com/en/dev/topics/db/models/#abstract-base-classes)；*当您想将一些通用信息放入许多其他模型时，*一个特定的类很有用。

为此，只需在模型的[meta](https://docs.djangoproject.com/en/dev/ref/models/options/)中指定以下选项：

```
class Meta:
    abstract = True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:42:03.283

一种选择是使用[`GenericForeignKey`](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#django.contrib.contenttypes.generic.GenericForeignKey). `filter()`这当然有 int 的缺点，例如你不能`GenericForeignKey`

另一种选择是使用[模型继承](https://docs.djangoproject.com/en/dev/topics/db/models/#model-inheritance)，它也有很多陷阱。

# android - 自动检测 android:minSdkVersion 的简单方法？

> ID：12673412
> 
> 赞同：0
> 
> 时间：2012-10-01T12:37:14.093
> 
> 标签：android

我不太熟悉属于哪个android版本的哪些功能。有没有一种简单的方法来发现我的应用程序可以运行的最低版本的 android？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-14T15:44:14.790

您可以使用[lint](http://developer.android.com/tools/help/lint.html)工具来完成。尝试设置`minSdkVersion`为 1 并运行 lint。它将显示以后需要 API 的所有方法和对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:40:27.123

最低 SDK 版本是您在清单中声明的​​版本，例如以下行会将您应用的最低 SDK 版本设置为 7。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T12:41:13.277

你不能这样发现。如果您想在所有版本的 avds 中测试您的应用

设置您的应用程序`minSdkVersion to 8`和`targetSdkVersion to 15`

*   创建您要测试的所有版本的 Android 虚拟机（avd）

*   在您通过选择 android 目标创建的所有版本的 avds 中运行您的应用程序

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T12:41:24.540

`android:minSdkVersion`— 指定应用程序能够运行的最低 API 级别。默认值为“1”。

在设置最低 sdk 版本之前，请在此处查看场景。您可以通过编程方式检测它。

[http://developer.android.com/about/dashboards/index.html](http://developer.android.com/about/dashboards/index.html)

![在此处输入图像描述](../Images/957785c397b3dbb9f19375d576730918.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T12:41:31.517

没有办法以编程方式进行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T13:45:47.003

检测是什么意思.. 取决于您希望您的应用程序支持的最低 api 级别。选择任何**android:minSdkVersion** 例如 8,10 等。如果您使用的任何功能在此 api 级别上不受支持，Eclipse 会自动告诉，否则使用 Android Lint

# vb.net - 如何在 VB 中拆分字符串并在循环中使用它们？

> ID：12673419
> 
> 赞同：1
> 
> 时间：2012-10-01T12:37:35.500
> 
> 标签：vb.net, string, loops, exchangewebservices, string-split

我得到一个带有电子邮件地址的字符串，用“;”分隔 看起来像这样：

> geve@krag.de;;;Tobias@nxs.de;Wissel@weg.de;Sand@nex.de;Claudia@bea.de;;

我想在这里向这些电子邮件地址发送一个约会样本给一个人：

```
Dim appointment As New EWS.Appointment(esb)
            appointment.Subject = "Einladung zu einem Termin"
            appointment.Body = txtThema.Text
            appointment.Start = Von
            appointment.End = Bis
            appointment.Location = "Raum 202 Kleinostheim"
            appointment.RequiredAttendees.Add("geve@krag.de")  // HERE ARE THE Attendees
            appointment.Save(EWS.SendInvitationsMode.SendToAllAndSaveCopy) 
```

我需要除第一个之外的每个电子邮件地址，因为他会发送邮件。我怎样才能做到这一点？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T13:12:19.937

以下是实际将字符串拆分为字符串数组的方法：

```
Dim emails As String() = emailString.Split({";"}, StringSplitOptions.RemoveEmptyEntries) 
```

还有其他版本的重载“Split”方法，但那个特定版本允许您传入 StringSplitOptions 值，从而允许您立即排除空白条目。

获得字符串数组后，您可以通过几种不同的方式循环并省略第一个数组。

我们可以使用 For 循环并完全跳过第一个条目：

```
' Regular For loop approach
Dim emails As String() = emailString.Split({";"}, StringSplitOptions.RemoveEmptyEntries)

Dim appointment As New EWS.Appointment(esb)
With appointment
    .Subject = "Einladung zu einem Termin"
    .Body = txtThema.Text
    .Start = Von
    .End = Bis
    .Location = "Raum 202 Kleinostheim"             
End With

' start at i = 1 to skip index 0
For i = 1 To emails.Length - 1
    appointment.RequiredAttendees.Add(emails(i))  ' HERE ARE THE Attendees
Next

appointment.Save(EWS.SendInvitationsMode.SendToAllAndSaveCopy) 
```

或者识别发件人的电子邮件并使用 For Each 和 If 来省略它：

```
' For Each approach
' set up string array and appointment object like above

Dim sender As String = emails.FirstOrDefault()

' ignore all instances of the sender's address
For Each address In emails
    If address.ToLower <> sender.ToLower Then
        appointment.RequiredAttendees.Add(emails(i))  ' HERE ARE THE Attendees
    End If
Next

appointment.Save(EWS.SendInvitationsMode.SendToAllAndSaveCopy) 
```

我会说玩它，并使用最适合你的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:59:12.640

您可以使用 split 函数解析出每封电子邮件并使用 Linq 删除空白并跳过第一个条目。我认为这种语法可以在 VB 中使用。

```
Dim emailString = "geve@krag.de;;;Tobias@nxs.de;Wissel@weg.de;Sand@nex.de;Claudia@bea.de;;"

Dim emaillist = (From email In emailString.Split(";").Skip(1) Where email.Length > 0 Select email).ToArray() 
```

# objective-c - ios- uiscrollview 中的 pdf 生成

> ID：12673422
> 
> 赞同：2
> 
> 时间：2012-10-01T12:37:53.937
> 
> 标签：objective-c, ios, pdf-generation

在我的 ios 应用程序中，我在滚动视图中列出了一些数据。单击按钮时，页面中的数据将以 pdf 文件格式生成。以下是一小段代码。

```
- (void)createPDFfromUIView:(UIView*)aView saveToDocumentsWithFileName:(NSString*)aFilename{
    // Creates a mutable data object for updating with binary data, like a byte array
    NSMutableData *pdfData = [NSMutableData data];

    // Points the pdf converter to the mutable data object and to the UIView to be converted
    UIGraphicsBeginPDFContextToData(pdfData, aView.bounds, nil);
    UIGraphicsBeginPDFPage();
    CGContextRef pdfContext = UIGraphicsGetCurrentContext();

    // draws rect to the view and thus this is captured by UIGraphicsBeginPDFContextToData
    [aView.layer renderInContext:pdfContext];

    // remove PDF rendering context
    UIGraphicsEndPDFContext();

    // Retrieves the document directories from the iOS device
    NSArray* documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);

    NSString* documentDirectory = [documentDirectories objectAtIndex:0];
    NSString* documentDirectoryFilename = [documentDirectory stringByAppendingPathComponent:aFilename];

    // instructs the mutable data object to write its context to a file on disk
    [pdfData writeToFile:documentDirectoryFilename atomically:YES];
    NSLog(@"documentDirectoryFileName: %@",documentDirectoryFilename);
} 
```

从上面的代码中，我能够生成一个 pdf 文件，但我面临以下问题。如果我有超过 50 个数据，在我的应用程序中，我只能看到前 10 个数据，并看到我需要滚动它们的其他数据。在这种情况下，当生成 pdf 文件时，它只获取前 10 个数据而不是其他数据。如何获取其他数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:35:27.420

`renderInContext:`只会呈现您当前看到的内容 - UIScrollView 很智能，并且只会在层次结构中包含您现在需要的视图。您需要一个 for 循环来手动滚动和重绘。这可能很难正确处理，可能在滚动后手动调用 [aView layoutSubviews] 以强制 scrollView 立即重新排列子视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T07:18:38.123

正如 steipete 所说，您可以使用循环来渲染上下文 - 您需要计算循环数 numOfLoop = webview.ScrollView.ContentSize.Height/weview.frame.size.height

*   使用循环来渲染上下文 for(int i = 0; i < numOfLopp; i ++)

    1.UIGraphicsBeginPDFPage()

    1.  获取当前上下文
    2.  渲染上下文

这种方式在我的应用程序中运行正确，但是当 numOfLoop lager 时我遇到了大问题 - 你会变慢 renderInContext - 内存会增加 - >关闭应用程序这样，当我在一次时如何删除/释放上下文环形 ？

其他方式，您可以使用[https://github.com/iclems/iOS-htmltopdf/blob/master/NDHTMLtoPDF.h](https://github.com/iclems/iOS-htmltopdf/blob/master/NDHTMLtoPDF.h) 生成 PDF

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-19T04:23:12.690

@steipete，@all 嗨，我尝试了下面的代码，它生成了多页 PDF，但是所有页面都重复了视图中的可见区域。请添加任何进一步的想法以改善结果。

```
-(void)createPDFfromUIView:(UIWebView*)aView saveToDocumentsWithFileName:(NSString*)aFilename

{

NSString *oldFilePath= [[NSBundle mainBundle] pathForResource:@"ABC" ofType:@"pdf"];

NSMutableData *pdfData = [NSMutableData data];

UIGraphicsBeginPDFContextToData(pdfData, aView.bounds, nil); 

CFURLRef url = CFURLCreateWithFileSystemPath (NULL, (CFStringRef)oldFilePath, kCFURLPOSIXPathStyle, 0); 

CGPDFDocumentRef templateDocument = CGPDFDocumentCreateWithURL(url); 

CFRelease(url); size_t count = CGPDFDocumentGetNumberOfPages(templateDocument); 

for (size_t pageNumber = 1; pageNumber <= count; pageNumber++) 

{ 

UIGraphicsBeginPDFPage(); 

CGContextRef pdfContext = UIGraphicsGetCurrentContext(); 

[aView.layer renderInContext:pdfContext]; 

}

 CGPDFDocumentRelease(templateDocument); 

// remove PDF rendering context UIGraphicsEndPDFContext(); 

// Retrieves the document directories from the iOS device 
NSArray* documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);

NSString* documentDirectory = [documentDirectories objectAtIndex:0];

NSString* documentDirectoryFilename = [documentDirectory stringByAppendingPathComponent:aFilename];

 [pdfData writeToFile:documentDirectoryFilename atomically:YES];

NSLog(@"documentDirectoryFileName: %@",documentDirectoryFilename);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-27T15:11:07.037

检查[ScrollViewToPDF](https://github.com/azu/ScrollViewToPDF/tree/master/ScrollViewToPDF)示例

它使用相同`scrollview's` `layer` `renderInContext`，但这里的 PDF 是根据您的要求创建的，例如一页 PDF 或多页 PDF

### 注意：它捕获 scrollView 的所有可见和不可见部分

# primefaces - Primefaces自定义主题不使用图像

> ID：12673428
> 
> 赞同：0
> 
> 时间：2012-10-01T12:38:20.983
> 
> 标签：primefaces

我正在尝试在我的 Primefaces 项目中使用自定义主题。我使用 Themeroller 创建了主题并将 jar 打包如下：

*   primefaces-spl.jar
*   *   网络信息
*   *   *   资源
*   *   *   *   primefaces-spl
*   *   *   *   *   主题.css
*   *   *   *   *   图片

然后我将此文件放入我的 WEB-INF/lib 文件夹并在我的 web.xml 中将 primefaces.THEME 属性指定为“spl”。

项目貌似可以找到并使用jar，但是页面看起来是这样的： ![](../Images/aed4c205c6e41493c88c6923429792b9.png)

因此，看起来资源图像未正确读取。在 theme.css 中，我已将所有图像标签替换如下：

.ui-widget-overlay { 背景：#aaaaaa url("#{resource['primefaces-spl:images/ui-bg_flat_0_aaaaaa_40x100.png']}") 50% 50% repeat-x; 不透明度：.30；过滤器：Alpha（不透明度=30）；}

我还尝试将 jar 添加到类路径以及此处提到的替代策略：[http:](http://www.mkyong.com/jsf2/primefaces/create-a-custom-theme-in-primefaces/) //www.mkyong.com/jsf2/primefaces/create-a-custom-theme-in-primefaces/ 我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T21:54:54.413

还可以使用在线工具将 ThemeRoller zip 文件转换为 Primefaces 主题 jar： [https](https://themeroller.osnode.com) ://themeroller.osnode.com 。ThemeRoller 版本：支持 1.10.3 和 1.9.2。

只需将您的 zip 文件拖过来并下载转换后的 jar 文件。包括 Maven 指令。

虽然这不能直接回答您的问题，但您可以通过检查生成的主题 jar 来轻松获得所需的知识，该 jar 可以正确组织您的文件。

Also your question might not be relevant when there i alternate way of achieving your goal without having to inspect file structures...

# wcf - WCF 数据合同验证

> ID：12673432
> 
> 赞同：2
> 
> 时间：2012-10-01T12:38:53.603
> 
> 标签：wcf

我想知道在验证方面是否有任何数据注释可以添加到 DataContract 中的 DataMember 中。

假设我们有一个 firstname(string) 数据成员，我们不希望其长度超过 50 个字符。如果 firstname 的长度超过 50，是否有任何方法可以捕获它，或者我们是否需要实现自定义故障异常以引发异常。

我们需要对 WCF 安全性进行此验证。对此有何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:25:04.953

DataContractSerializer 没有允许您通过注释 DataMembers 以声明方式指定验证的功能。

如果您将 DataMember 定义为属性（而不是字段），那么您可以在属性设置器中编写代码以在反序列化期间验证数据。代码可以在验证失败或更改数据时引发异常（例如，在您的名字成员示例中将其截断为 50 个字符）。

```
[DataMember]
public string FirstName
{
  get { return ...; }
  set { if (value.Length > 50) throw new MyValidationException(); }
} 
```

# wpf - RadGridview，滚动时 RowVisibility 折叠

> ID：12673433
> 
> 赞同：0
> 
> 时间：2012-10-01T12:38:53.730
> 
> 标签：wpf, silverlight, xaml, telerik

我有一个**RadExpander**，在它里面我有一个**RadGridView**和一个**ToggleColumn**。问题是当一行内容很大时，如果我尝试向右滚动以查看文本的结尾，则当前行会折叠。这些行是自动生成的，以防万一。

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:04:26.013

好吧，这是解决方案，问题与我使用的切换列的类型有关..

```
<UserControl x:Class="RadGridView_SL5_AR_34.MainPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
             xmlns:my="clr-namespace:RadGridView_SL5_AR_34"
             mc:Ignorable="d" d:DesignHeight="700" d:DesignWidth="700">
    <UserControl.Resources>
        <my:MyViewModel x:Key="MyViewModel" />
    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Visible" DataContext="{StaticResource MyViewModel}">
        <Grid Background="#FFB9B9B9">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <telerik:RadExpander x:Name="expanderRunningReqs"
                                 IsExpanded="False"
                                 VerticalContentAlignment="Top"
                                 telerik:AnimationManager.IsAnimationEnabled="True"
                                 Grid.Row="1">
                <telerik:RadExpander.Header>
                    <StackPanel Orientation="Horizontal"
                                Grid.Column="1"
                                Grid.Row="0">
                        <TextBlock Text="Clubs"
                                   Margin="5" />
                    </StackPanel>
                </telerik:RadExpander.Header>
                <telerik:RadExpander.Content>
                    <telerik:RadGridView x:Name="grdClubs"
                                         Margin="3"
                                         ShowGroupPanel="False"
                                         RowIndicatorVisibility="Collapsed"
                                         IsReadOnly="True"
                                         MaxHeight="300"
                                         HorizontalAlignment="Stretch"
                                         AutoGenerateColumns="False"
                                         CanUserFreezeColumns="False"
                                         ItemsSource="{Binding Clubs}">
                        <telerik:RadGridView.Columns>
                            <telerik:GridViewToggleRowDetailsColumn />
                            <telerik:GridViewDataColumn Header="Name"
                                                        DataMemberBinding="{Binding Name}" />
                            <telerik:GridViewDataColumn DataMemberBinding="{Binding Established}"
                                                        Header="Established"
                                                        DataFormatString="{} {0:dd, MMM, yyyy H:mm}" />
                            <telerik:GridViewDataColumn Header="StadiumCapacity"
                                                        DataMemberBinding="{Binding StadiumCapacity}" />
                        </telerik:RadGridView.Columns>
                        <telerik:RadGridView.RowDetailsTemplate>
                            <DataTemplate >
                                <telerik:RadGridView x:Name="grdDetails"
                                 ItemsSource="{Binding Players}"
                                 ShowGroupPanel="False"
                                 RowIndicatorVisibility="Collapsed"
                                 IsReadOnly="True"
                                 MaxHeight="200"
                                 HorizontalAlignment="Stretch"
                                 AutoGenerateColumns="False"
                                 CanUserFreezeColumns="False">
                                    <telerik:RadGridView.Columns>
                                        <telerik:GridViewDataColumn DataMemberBinding="{Binding Name}"
                                                Header="Name" />
                                        <telerik:GridViewDataColumn DataMemberBinding="{Binding Number}"
                                                Header="Number" />
                                        <telerik:GridViewDataColumn Header="Country"
                                                DataMemberBinding="{Binding Country}"
                                                MinWidth="150" />
                                        <telerik:GridViewDataColumn Header="Position"
                                                DataMemberBinding="{Binding Position}"
                                                MinWidth="500" />
                                    </telerik:RadGridView.Columns>
                                </telerik:RadGridView>
                            </DataTemplate>
                        </telerik:RadGridView.RowDetailsTemplate>
                    </telerik:RadGridView>
                </telerik:RadExpander.Content>
            </telerik:RadExpander>
        </Grid>
    </ScrollViewer>
</UserControl> 
```

# django - 如何超越一些tinymce的方法 - 特别是渲染

> ID：12673434
> 
> 赞同：1
> 
> 时间：2012-10-01T12:38:56.787
> 
> 标签：django, tinymce, render, django-tinymce

我想覆盖 TinyMCE 的渲染方法出于某种原因我想在 TinyMCE 旁边使用一个按钮，我写了一些行，但它没有效果：

这是我的课：

```
class UpdateTinyMCE(TinyMCE):
    def render(self, *args, **kwargs):
    html = super(UpdateTinyMCE, self).render(*args, **kwargs)
    return mark_safe(html + '<input type="button" value="submit" />') 
```

这是用法：

```
class ArticleForm(ModelForm):

class Meta:
    model = Article
    exclude = ['slug', 'rating', 'numberOfRates', 'isCommentApproval', 'maximumRate']
    widgets = {
        'renderType': Select(attrs={'onChange': 'changeRenderType();' }),
        'content':UpdateTinyMCE(attrs={'cols': 100, 'rows': 30})
    } 
```

# c# - 为什么 HttpException.GetHttpCode() 返回一个 int 而不是 System.Net.HttpStatusCode？

> ID：12673437
> 
> 赞同：4
> 
> 时间：2012-10-01T12:39:06.563
> 
> 标签：c#, http, http-status-codes

我知道我可以将[GetHttpCode()](http://msdn.microsoft.com/en-us/library/system.web.httpexception.gethttpcode.aspx)的结果类型转换为[HttpStatusCode](http://msdn.microsoft.com/en-us/library/system.net.httpstatuscode.aspx)，但我不喜欢对枚举进行类型转换。特别是因为 MSDN 文档没有明确说明枚举的值始终是确切对应的 http 状态代码。

我觉得[GetHttpCode()](http://msdn.microsoft.com/en-us/library/system.web.httpexception.gethttpcode.aspx)应该只返回[HttpStatusCode](http://msdn.microsoft.com/en-us/library/system.net.httpstatuscode.aspx)。

我应该停止抱怨和打字吗？

```
catch(HttpException ex)
{
    switch((HttpStatusCode)ex.GetHttpCode())
    {
        case HttpStatusCode.NotFound: 
            // Do stuff...
            break;
        // More cases...
    }
} 
```

编辑：请注意[HttpWebResponse.StatusCode](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.statuscode.aspx) *的*类型为[HttpStatusCode](http://msdn.microsoft.com/en-us/library/system.net.httpstatuscode.aspx)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T12:47:19.797

值得注意的是，HTTP 允许*自定义*状态代码，因此不能保证枚举将包含您的响应中的值。出于这个原因，API 返回`int`值而不是尝试使用枚举是明智的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:47:30.770

HTTP 状态代码不必来自固定列表，尽管它们通常这样做。使用枚举很方便。要求枚举是错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T12:43:48.090

响应包含错误代码的整数值。int 是实际的错误代码。枚举允许错误代码的“友好”表示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T12:44:04.550

> 我应该停止抱怨和打字吗？

是的。或者使用相应的整数值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T12:46:51.567

是的，你应该这样做。最重要的是，因为您自己提供的代码使您无法同时使用任何整数值或状态数字。所以从技术上讲，枚举值是否与状态编号相对应并不重要。

# c# - 如何检查结构是否已实例化？

> ID：12673440
> 
> 赞同：41
> 
> 时间：2012-10-01T12:39:26.367
> 
> 标签：c#, struct, null

我有一个结构（就这个问题而言）几乎模仿了内置`Point`类型。

我需要在使用它之前检查它是否已经实例化。当它是时`Point`，我可以这样做：

```
if (this.p == null) 
```

但是现在会产生以下错误：

> 运算符“==”不能应用于“ProportionPoint”和“<null>”类型的操作数

如何将我的结构与 null 进行比较？还有另一种检查实例化的方法吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-01T12:43:43.470

A`struct`是一种值类型 - 它永远不会为空。

您可以检查`default(ProportionPoint)`，这是结构的默认值（例如零）。但是，对于某个点，默认值（原点）可能也是“有效”值。

相反，您可以使用`Nullable<ProportionPoint>`.

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-10-01T12:42:16.577

结构是值类型，与引用类型相反，它们永远不能为空。您可以检查默认值：

```
if (this.p.Equals(default(ProportionPoint))) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-01T12:41:20.473

**结构不能为**null 。它是**值类型**，而不是引用类型。您需要检查具有默认值的属性。就像是：

```
if(p.X == 0 && p.Y == 0) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-07-15T17:50:25.213

因为 p 是 struct 它永远不会为空，所以你应该将它与它的默认值进行比较。为了检查您的值和默认值之间的等价性。如果你使用 == 你会得到

```
cannot be applied to operands of type 'ProportionPoint' and 'ProportionPoint' error 
```

因为结构在默认情况下没有得到 == 的实现。所以你需要在你的结构中重载 == 和 != 运算符，如下所示：

```
public static bool operator ==(firstOperand op1,  secondOperand2 op2) 
{
    return op1.Equals(op2);
}

public static bool operator !=(firstOperand op1,  secondOperand2 op2) 
{
   return !op1.Equals(op2);
} 
```

接着 ：

```
if (this.p == default(ProportionPoint)) 
```

另一种选择是直接使用 Equals：

```
f (this.p.Equals.default(ProportionPoint)) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-01T12:42:07.613

结构永远不能为空，因此您不能将其与空进行比较。并且结构总是被初始化 - 如果不是由你初始化，那么由编译器使用默认值。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-01T12:45:33.487

使用可为空的：

```
ProportionPoint? p1 = null;
if (p1 == null) ... 
```

或者

```
if (!p1.HasValue) ... 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-12-15T18:04:57.120

结构不能为空，但如果您确实想在任何时候在其中存储与默认值等效的值，则根据其默认值检查结构的解决方法可能会给出假阴性。

（例如，具有值的结构`(0,0,0)`可以是未触及的默认值，或者它可以将原点存储在 3D 空间中。）

避免这种假阴性问题的另一种方法是向结构添加另一个属性 - 例如 bool 或 int - 以跟踪数据是否实际存储在其中。然后让任何使用实际数据初始化结构的构造函数将此值设置为 true/1。在默认结构中，此值仍为 false/0，因此`default(MyStruct)`即使存储在其中的所有其他数据与默认值匹配，检查也不应该给您一个假阴性。

```
public Struct MyStruct { 
    public float x { get; private set; }
    public bool initialized { get; private set; }

    public MyStruct(float _x){
        x=_x;
        initialized = true;
    }
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-01-28T20:41:18.993

我做了一个只适用于结构的扩展方法：

```
public static bool IsNull<T>(this T source) where T:struct
{
  return source.Equals(default(T));
} 
```

调用约定：

```
if(myStruct.IsNull())
  DoSomething(); 
```

我知道它并没有真正检查它是否是`null`. 但是，如果我给它一个更准确的名称，比如`IsEmpty`or `IsDefault`，六个月后我会忘记它的存在，并且在看到可用方法列表时不会选择它。从技术上讲，这不是空检查；但从概念上讲它是。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-01T15:03:55.767

与引用类型的变量或值不同，它是对该类型的零个或一个实例的*引用，结构变量或值**是*结构实例。如果有一个以 开头的代码块`{Point myPoint; ...}`，并且块中没有任何内容关闭`MyPoint`（当`yield return`块中有 a 时，或者当 lambda 或匿名方法使用封闭块中的变量时发生关闭），那么`Point`will的实例在执行进入块之前的某个时间开始存在，并且可能在执行离开块后的任何时间停止存在。在任何可以使用结构类型变量的上下文中，结构都存在。

所有结构类型都被认为具有无操作默认构造函数的原因是结构类型隐含地存在。当执行类似 的语句时，它会创建一个由 100 个结构`Point[] myPoints = new Point[100];`组成的零填充数组；`Point`进行中，`100`零填充点实例立即出现。在 C++ 中，如果一个类型具有构造函数，则创建该类型的数组将按顺序在数组的每个元素上调用构造函数，然后任何代码都可以访问该数组。如果在构造任何元素时抛出异常，编译器生成的代码将对在数组本身蒸发之前成功创建的每个元素运行确定性析构函数。虽然这是一个非常强大的功能，但将其包含在 .net 中会使框架大大复杂化。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-12-12T20:42:11.630

您无法检查 struct 是否为 null，但您可以检查默认的未初始化值，如下所示：

```
if (instanceOfYourStruct == default) 
```

# regex - TRegExpr 为什么 (.*$) 表达式在字符串上工作两次？

> ID：12673441
> 
> 赞同：1
> 
> 时间：2012-10-01T12:39:28.957
> 
> 标签：regex, delphi

我正在用 解析字符串`TRegExpr`。表达式如下：

```
(.*$) 
```

这意味着它应该找到整个字符串，但是当我使用 command 找到它之后，它会找到空字符串，但是由于符号`ExecNext`，该行已经结束。`$`

有人可以解释这种行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:49:53.667

默认情况下，正则表达式`.`（点）不匹配换行符。如果您输入有换行符，您会看到这种行为。

尝试这个：

```
(?s)(.*$) 
```

该表达式`(?s)`为正则表达式的其余部分打开“点匹配换行符”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T12:50:58.047

那是因为`*`量词。它将匹配之前出现的 0 个或多个字符。0 次出现意味着它将匹配空字符串。

一个[锚点](http://www.regular-expressions.info/anchors.html)`$`，一个零宽度的断言。它不匹配字符串的结尾，它匹配字符串结尾之前的位置（或字符串中最后一个字符的换行符之前）。

那么会发生什么？

1.  您的正则表达式首先匹配字符串，直到字符串结尾。

2.  正则表达式引擎的位置在最后一个字符之后，但在字符串结尾之前。当您现在调用时`ExecNext`，它匹配字符串结尾之前的空字符串。

如果你想避免这种情况，请使用`+`量词，它需要至少一个字符来匹配 ==>`.+$`只会找到一个匹配项。

# c# - 从一个到另一个表单加载进度条不显示

> ID：12673443
> 
> 赞同：0
> 
> 时间：2012-10-01T12:39:31.197
> 
> 标签：c#

我在其他表单上有一个主表单和一个进度条，在主表单上加载时我想在其他表单上加载进度条，比如 Comscanner，我在下面的 Comscanner 表单中编写了两种方法：

```
 public void SetMaximum(int max)
    {
        PrgComPortScan.Maximum = max;
        PrgComPortScan.Value   = 0;
    }

    public void Increment()
    {
        if(PrgComPortScan.Maximum > (PrgComPortScan.Value + 1)) 
        {
            PrgComPortScan.Value = PrgComPortScan.Value + 1;
        }  
    } 
```

但是在使用计时器在我的主窗体上调用这些方法时，我无法显示进度条，我还使用了计时器控件及其刻度属性，我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:46:39.247

要从一个到另一个访问进度条，请尝试以下代码：

```
frmProgramExport objexport = new frmProgramExport(); // Where frmProgramExport your from name 
objexport.prgImport.PerformStep(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:43:19.533

我认为您希望在活动中同时更新两种表格`OnLoad`。 ![截图](../Images/674e9813a22de8cfa626d1ef3aba2e11.png)

这是第二种形式的代码：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);
        Application.DoEvents();            
    }

    public void SetProgress(int value)
    {
        progressBar1.Value=value;
    }
    public void SetProgress(int value, int max)
    {
        progressBar1.Maximum=max;
        progressBar1.Value=value;            
    }
    public void Increment()
    {
        progressBar1.PerformStep();
    }
} 
```

这是主要形式的代码：

```
public partial class MainForm : Form
{
    public MainForm()
    {
        InitializeComponent();
    }

    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);
        this.Show();
        label1.Text="Initializing Form1";
        Form1 dlg=new Form1();
        dlg.Show();
        Application.DoEvents();
        dlg.Location=new Point(this.Location.X+this.Size.Width+5, this.Location.Y);
        System.Threading.Thread.Sleep(1400);

        for(int i=0; i<10; i++)
        {
            label1.Text="Setting Progress Bar at "+(i+1).ToString()+" of 10";
            dlg.SetProgress(i+1, 10);
            Application.DoEvents();
            System.Threading.Thread.Sleep(1400);
        }
        label1.Text="Done!";
    }
} 
```

这一切都始于

```
 static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new MainForm());
    } 
```

# python - 计划任务 - 没有下次运行时间

> ID：12673450
> 
> 赞同：0
> 
> 时间：2012-10-01T12:39:47.093
> 
> 标签：python, win32com

这是我的问题。当我在 python 中使用 win32com 创建一个新的计划任务时，该任务没有下一次运行时间。它在任务调度程序 gui 中显示“从不”。

我创建任务的工作流程：

1.  尝试制作新任务，如果失败，获取现有任务进行更新，
2.  为任务创建每日触发器，
3.  全部保存。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:45:15.770

所以这是一个简单的解决方案。

我检查了触发器的默认参数，然后我看到，Flags 设置为 4，这意味着 DISABLED。

看来，这是任务新触发器的默认设置。

# python - CVXOPT GLPK 返回错误的解决方案

> ID：12673451
> 
> 赞同：0
> 
> 时间：2012-10-01T12:39:51.897
> 
> 标签：python, linear-programming, convex-optimization

我正在使用 GLPK 的 python 接口。我正在寻找一个解决方案 X：

*   最小化 c
*   G * X <= H
*   A * X = b

我正在使用以下语句

```
glpk.ilp(c,G,h,A,b,I=set(range(25))) 
```

那是我的 G 矩阵：

```
-1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  -1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  -1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  -1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  -1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  -1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  -1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  -1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  -1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  -1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  -1  0  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  -1  0  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  -1  0  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  -1  0  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  -1  0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  -1  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  -1  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  -1  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  -1  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  -1  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  -1  0  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  -1  0  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  -1  0  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  -1  0
0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0   0 -1
-1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 0  0   0  0 
```

那是我的 h 矩阵

```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.001 
```

那是我的A矩阵

```
0 0 1 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0
0 0 1 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0
0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0
0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 1 0 0 0 1 0 0
0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 1 0 0 0 0 0 0 1 0 0
0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 1 0 0 0 0 0 0 1 0 0
0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 1 0 0 0 0 0 0 1 0 0
0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 0 1 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 1 0 0 0 1 0
0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 0 0 0 0 0 0 0 1 0
0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 1 0
0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 1 0
0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 1 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 0 0 1 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 1 0 0 0 0 1
0 0 0 0 0 1 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 1
0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 1 0 0 0 0 1
0 0 0 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 1
0 0 0 0 0 0 0 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1
0 0 0 0 0 0 0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 
```

那是我的B矩阵

```
21.0 21.0 21.0 21.0  21.0 21.0 21.0 21.0 21.0 21.0  21.0 21.0 21.0 21.0 21.0  21.0  21.0  21.0  21.0  21.0 
```

然而，通过执行以下操作：

```
sol=glpk.ilp(c,G,h,A,b,I=set(range(25))) 
```

我得到以下解决方案：

```
0 0 1 0 0 1 0 1 1 1 0 0 0 1 1 1 1 0 1 1 0 0 1 1 1 
```

这显然是错误的。

因为 A * X != b

我没有任何线索来解决这个问题。文档很少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-23T11:37:57.497

d我将您的数组复制到文本文件（名称应该不言自明）并运行以下代码没有问题。

也许将您的数组转换为正确的 cvxopt 矩阵是问题所在？

```
import numpy as np
import cvxopt
import cvxopt.glpk

c=cvxopt.matrix(np.loadtxt('c.txt'),tc='d')
A=cvxopt.matrix(np.loadtxt('A.txt'),tc='d')
b=cvxopt.matrix(np.loadtxt('b.txt'),tc='d')
G=cvxopt.matrix(np.loadtxt('G.txt'),tc='d')
h=cvxopt.matrix(np.loadtxt('h.txt'),tc='d')

sol=cvxopt.glpk.ilp(c,G,h,A,b,I=set(range(25)))

x=[i for i in sol[1]]
# x=[0 0 10 0 0 10 0 10 10 10 0 0 0 10 10 10 10 0 10 10 0 0 1 1 1]

eq=(np.dot(A,x)==b.T[0]).all()
# eq=True 
```

因此，解向量 x 与您报告的不同。

特别是，最后一行检查是否相等 A*x=b 并评估为真。

希望有帮助！

# android - 实现 OnClickListener 以使用短按而不是长按来显示上下文菜单

> ID：12673452
> 
> 赞同：0
> 
> 时间：2012-10-01T12:39:52.210
> 
> 标签：android, click, contextmenu, onclicklistener, implements

我有这样的代码：

```
public class ListConActivity extends Activity {

    private String[] Distro = { "Ubuntu", "Arch Linux", "Mandriva",
            "Open Suse", "IGOS Nusantara", "Linux Mint", "Debian", "Fedora",
            "CrunchBang", "Backtrack", "Puppy Linux", "OpenBSD", "Slackware",
            "BlankOn", "CentOS" };
    private String[] pilihan_menu = { "Tambah Data", "Edit Data", "Hapus Data",
            "Kirim Data" };

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Arrays.sort(Distro);

        ListView list = (ListView) findViewById(R.id.list);
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, Distro);
        list.setAdapter(adapter);
        registerForContextMenu(list);
    }

    public void onCreateContextMenu(ContextMenu menu, View tampil,
            ContextMenuInfo menuInfo) {
        if (tampil.getId() == R.id.list) {
            AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) menuInfo;
            menu.setHeaderTitle(Distro[info.position]);
            for (int i = 0; i < pilihan_menu.length; i++) {
                menu.add(Menu.NONE, i, i, pilihan_menu[i]);
            }
        }
    }

    public boolean onContextItemSelected(MenuItem item) {
        AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) item
                .getMenuInfo();
        String aksi = pilihan_menu[item.getItemId()];
        String nama_pilihan = Distro[info.position];
        String isi = String.format("Anda melakukan operasi %s pada pilihan %s",
                aksi, nama_pilihan);

        Toast.makeText(this, isi, Toast.LENGTH_LONG).show();
        return true;
    }
} 
```

它的工作完美地显示了长按的上下文菜单。我更改了代码以实现 onclick，以便能够通过短按打开上下文菜单。

```
public class ListConActivity extends Activity implements OnClickListener {

    private String[] Distro = { "Ubuntu", "Arch Linux", "Mandriva",
            "Open Suse", "IGOS Nusantara", "Linux Mint", "Debian", "Fedora",
            "CrunchBang", "Backtrack", "Puppy Linux", "OpenBSD", "Slackware",
            "BlankOn", "CentOS" };
    private String[] pilihan_menu = { "Tambah Data", "Edit Data", "Hapus Data",
            "Kirim Data" };

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Arrays.sort(Distro);

        ListView list = (ListView) findViewById(R.id.list);
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, Distro);
        list.setAdapter(adapter);
        registerForContextMenu(list);
        list.setOnClickListener(this);

    }

    public void onCreateContextMenu(ContextMenu menu, View tampil,
            ContextMenuInfo menuInfo) {
        if (tampil.getId() == R.id.list) {
            AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) menuInfo;
            menu.setHeaderTitle(Distro[info.position]);
            for (int i = 0; i < pilihan_menu.length; i++) {
                menu.add(Menu.NONE, i, i, pilihan_menu[i]);
            }
        }
    }

    public boolean onContextItemSelected(MenuItem item) {
        AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) item
                .getMenuInfo();
        String aksi = pilihan_menu[item.getItemId()];
        String nama_pilihan = Distro[info.position];
        String isi = String.format("Anda melakukan operasi %s pada pilihan %s",
                aksi, nama_pilihan);

        Toast.makeText(this, isi, Toast.LENGTH_LONG).show();
        return true;
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        openContextMenu(v);
    }
} 
```

编译成功..但我逼近了。你能帮我吗？多谢，伙计！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:40:21.330

是的：为 listView 做一个 setOnItemClickListener 并在那个点击方法中从 Activity 类调用 openContextMenu(view)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:46:13.570

您设置了点击监听器`ListView`，而不是列表项。使用[`setOnItemClickListener`](https://developer.android.com/reference/android/widget/AdapterView.html#setOnItemClickListener%28android.widget.AdapterView.OnItemClickListener%29)和[`AdapterView.OnItemClickListener`](https://developer.android.com/intl/ru/reference/android/widget/AdapterView.OnItemClickListener.html)

# c - 返回前测试错误和清理的正确方法

> ID：12673455
> 
> 赞同：0
> 
> 时间：2012-10-01T12:40:03.130
> 
> 标签：c, coding-style, error-handling, return

**就编码风格**而言，以下两种实现中哪一种更好，为什么？

```
UINT Fn1()
{
    HKEY hRegKey;

    if(RegOpenKeyEx(..., KEY_NAME, &hRegKey) != ERROR_SUCCESS)
        return ERROR_KEY_OPEN;
    if(RegQueryValueEx(hRegKey, VAL_A_NAME, ...) != ERROR_SUCCESS)
    {
        RegCloseKey(hRegKey);
        return ERROR_KEYVAL_A;
    }

    if(RegQueryValueEx(hRegKey, VAL_B_NAME, ...) != ERROR_SUCCESS)
    {
        RegCloseKey(hRegKey);
        return ERROR_KEYVAL_B;
    }

    RegCloseKey(hRegKey);
    return ERROR_SUCCESS;
} 
```

* * *

```
UINT Fn2()
{
    UINT rVal;
    HKEY hRegKey;

    if(RegOpenKeyEx(..., KEY_NAME, &hRegKey) == ERROR_SUCCESS)
    {
        if(RegQueryValueEx(hRegKey, VALUE_A_NAME, ...) == ERROR_SUCCESS)
        {
            if(RegQueryValueEx(hRegKey, VALUE_B_NAME, ...) == ERROR_SUCCESS)
                rVal = ERROR_SUCCESS;
            else
                rVal = ERROR_KEYVAL_B;
        }
        else
            rVal = ERROR_KEYVAL_A;
        RegCloseKey(hRegKey);
    }
    else
        rVal = ERROR_KEY_OPEN;

    return rVal;
} 
```

另外，还有更好的方法吗？
**注意：请不要混淆片段的细节 - 强调代码流和样式。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:01:55.863

这在很大程度上是个人品味的问题。我个人会说既不好看也不容易理解。我个人比较喜欢的 C 语言形式是：

```
int
fn(void)
{
    struct foo *foo;
    int error = 0;
    if ((foo = foo_open(...)) == NULL)
        return FOO_ERROR_OPEN;
    if (foo_do_something(1)) {
        error = FOO_ERROR_1;
        goto out;
    }
    if (foo_do_something(2)) {
        error = FOO_ERROR_2;
    }
out:
    foo_close(foo);
    return error;
} 
```

但如前所述，这是一个品味问题，关于这个问题的意见与程序员一样多。我更喜欢这种风格，因为这就是我在职业生涯早期使用的大量代码的编写方式，这使它对我来说最易读。

如果我必须选择您提出的一种样式，我会选择 1，因为 2 看起来很乱，因为压痕很深。我的经验法则是可读性随着缩进深度而降低。

# android - 使用共享数据库开发安卓和 iPhone 应用程序

> ID：12673463
> 
> 赞同：-1
> 
> 时间：2012-10-01T12:40:33.120
> 
> 标签：android, iphone

我对智能手机应用程序有一个好主意，我想开发一个适用于 android 和 iPhone 的应用程序。此外，我需要使用空间数据库进行地理索引，这将为两个应用程序共享。我是这个应用程序世界的新手，我有一些问题。

*   两台机器都可以开发吗？我知道java但不知道客观c。

我的猜测是我需要将数据库与计算分开以支持这两个应用程序。

*   可以托管服务器的具有空间数据库支持的最佳云计算提供商有哪些？
*   我需要 2 台托管服务器还是只有一台服务器可以同时支持它们？
*   哪个数据库提供商可以支持地理索引并支持这种集成，我更喜欢具有合理免费配额的提供商。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:22:40.620

看看 www.parse.com

他们有 iOS 和 Android SDK。所有的云后端都是为您处理的，并且很容易实现。当然，您至少需要一些 Objective-C 印章，但是如果您按照指南进行操作，那应该很容易。

所有 PHP、MySQL 类型的东西都被抽象出来了，您无需担心扩展和来自云服务的所有其他令人头疼的问题。

# java - 如何关闭postgres打开的 所有端口？

> ID：12673464
> 
> 赞同：3
> 
> 时间：2012-10-01T12:40:33.670
> 
> 标签：java, linux, postgresql, port

我在 JSP 网站中使用 PostgreSQL 数据库。

在某处我的连接没有在代码中关闭。因此 PostgreSQL 打开的端口保持在 ESTABLISHED 状态，并且仅保持在该状态。

在某个端口数超过 PostgreSQL 总限制的限制之后，我必须通过以下方式从 Linux 手动重新启动 PostgreSQL，

> > 服务 PostgreSQL 重启

有什么办法可以删除PostgreSQL通过JAVA文件打开的所有端口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T12:48:33.470

看看 pg_cancel_backend() 函数：[http ://www.postgresql.org/docs/8.2/static/functions-admin.html](http://www.postgresql.org/docs/8.2/static/functions-admin.html)

但是，您应该考虑尝试修复代码中未关闭的连接，因为您可能会遇到内存问题和其他奇怪问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:06:21.090

我强烈建议您修复代码中的连接泄漏。

# git - 从远程分支到本地分支：git issue

> ID：12673465
> 
> 赞同：1
> 
> 时间：2012-10-01T12:40:35.123
> 
> 标签：git, pull

我在 github 上的一个 repo 上。我有一个名为：master 的本地分支，在远程仓库中有两个分支，branch1 和 branch2。我从 branch1 克隆了 repo。但是后来，我想把与branch1完全不同的branch2拉到master中。所以我做了： git pull origin master:branche2

但是当我在 master 和新的本地 branch2 之间运行 git diff 命令时，我没有任何区别。这是否意味着没有合并，并且以前的 master 已完全被导入的 branch2 取代？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:20:04.230

在 git 中，如果您需要从一个分支更改为另一个分支，您需要执行以下操作：

```
git checkout branch_name 
```

示例：只需更改为您想要作为基础的分支：

例子：`git checkout branch1`

如果您在 branch1 上并想将 branch2 合并到 branch1 上，则：

```
git merge origin/branch2 
```

现在您将分支 2 上的差异合并到分支 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:22:19.910

请执行下列操作：

```
git branch branch2
git checkout branch2
git pull origin branch2
git checkout master
git merge branch2 
```

# ruby - Ruby 读取 CSV 并挑选变量

> ID：12673466
> 
> 赞同：0
> 
> 时间：2012-10-01T12:40:35.757
> 
> 标签：ruby, csv

> **可能重复：**
> [在 Ruby 中读取 CSV 的最佳方式。更快的CSV？](https://stackoverflow.com/questions/4369039/best-way-to-read-csv-in-ruby-fastercsv)

是否可以让 Ruby 逐行读取 CSV 文件并使用该行的内容设置为不同的变量？

例如，一行是`Matt,Masters,18-04-1993`，我想拆分该行并使用：

*   马特=名字
*   大师=姓氏
*   18-04-1993 = 出生日期

到目前为止，我有：

```
require 'uri/http'
require 'csv'

File.open("filename.csv").readlines.each do |line|

d = line.split(",")

puts d

end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T12:49:32.273

你应该能够做到

```
File.open("filename.csv").readlines.each do |line|
  CSV.parse do |line|
    firstname, surname, dob = line
    #you can access the above 3 variables now
  end
end 
```

现在就可以使用`firstname`,`surname`和`dob`在块中了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:47:12.463

也许你正在寻找这样的东西......

```
File.open("filename.csv").read.split("\n").each do |line|
  first_name, last_name, age = line.split(",")
  # do something
end 
```

# java - 为什么 spring-mvc dispatcherservlet 不会启动？

> ID：12673468
> 
> 赞同：0
> 
> 时间：2012-10-01T12:40:42.910
> 
> 标签：java, web-applications, spring-mvc

我只是想设置我的第一个 spring-mvc 应用程序，以便我可以使用该框架。

但是，转到此网址：localhost:8080/springmvctest/home 我收到 404 错误。但是，转到 localhost:8080/springmvctest 我确实看到了欢迎页面（index.jsp）

我在这里做错了什么？

Web.xml

```
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>springmvctest</display-name>
  <servlet>
    <servlet-name>DispatcherServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>/WEB-INF/app-config.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>DispatcherServlet</servlet-name>
    <url-pattern>*.htm</url-pattern>
  </servlet-mapping> 
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
</web-app> 
```

应用程序配置.xml

```
<!-- Scans the classpath of this application for @Components to deploy as beans -->
<context:component-scan base-package="controller" />

<!-- Configures the @Controller programming model -->
<mvc:annotation-driven />

<!-- Resolves view names to protected .jsp resources within the /WEB-INF/views directory -->
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/jsp/"/>
    <property name="suffix" value=".jsp"/>
</bean> 
```

控制器

```
@Controller
public class TestController {

    @RequestMapping(value = {"/home","/","/index"}, method = RequestMethod.GET)
    public String hello() {
        return "home";
    }
} 
```

主页.jsp

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <h1>Hello home!</h1>
    </body>
</html> 
```

我的文件结构

```
├── pom.xml
├── src
│   ├── main
│   │   ├── java
│   │   │   └── com
│   │   │       └── something
│   │   │           └── springmvctest
│   │   │               ├── testclass.java
│   │   │               └── TestController.java
│   │   └── webapp
│   │       ├── index.jsp
│   │       └── WEB-INF
│   │           ├── app-config.xml
│   │           ├── jsp
│   │           │   └── home.jsp
│   │           └── web.xml
│   └── test
│       └── java
│           └── com
│               └── something
│                   └── springmvctest 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:55:20.983

这种模式

```
<url-pattern>*.htm</url-pattern> 
```

只生成以 htm 和这个 url 结尾的数学表达式：

```
localhost:8080/springmvctest/home 
```

没有结束 htm 因此它不会被 spring 的调度员带走。

**解决方案：**

改变

```
 <url-pattern>*.html</url-pattern> 
```

至

```
 <url-pattern>/*</url-pattern> 
```

**或者**

在您的控件中使用

@RequestMapping(value = {"/home.htm","/index.htm"}, 方法 = RequestMethod.GET)

# android - 如何使用 Java Annotation 在 Android 中创建 Sqlite DB 列名？

> ID：12673471
> 
> 赞同：0
> 
> 时间：2012-10-01T12:40:56.693
> 
> 标签：android, sqlite, annotations

我在安卓平台上工作。我正在使用 POJO 类来创建 Sqlite DB 字段名称。

前任

```
class Provider {
    int id;
    String data;
    String value;
} 
```

基于上述 POJO 类，将在 SQlite DB 生成 3 个具有给定名称的字段。但我想在 Sqlite DB 中创建不同名称的字段（列）名称。

前任

```
class Provider {
    @Annotation(FieldNameInDB = loginId)
    int id;

    @Annotation(FieldNameInDB = providerData)
    String data;

    @Annotation(FieldNameInDB = providerValue)
    String value;
} 
```

上面的 POJO 类具有注释，并且列名已经使用注释给出，无论使用什么名称都需要创建为列名**(loginId,providerData,providerValue)**。

因此，SQLite DB 将有 3 个名为 **(loginId,providerData,providerValue)**的列。

请提供使用 Java Annotation 在 SQLite DB 中创建自定义列名称的解决方案，并使用自定义名称，我们可以从中检索值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T12:44:55.110

试试看：

```
@DatabaseField(columnName="providerData")
private String data; 
```

# java - 无法编译显然相同的源

> ID：12673482
> 
> 赞同：0
> 
> 时间：2012-10-01T12:41:33.953
> 
> 标签：java, json

大家好，我正在开发一个 Restful + JSON servlet，但是我遇到了一个奇怪的问题，如果我尝试使用这种方法编译我的项目源代码：

```
public
static
WipdDBTable
parseJSON(String JSONBody)
{
    JSONObject jsonObj;
    JSONTokener jsonTok;
    Iterator it;
    String[] labels;
    String[][] fields;
    int i;

    try  {
        jsonTok = new JSONTokener(JSONBody);
        jsonObj = new JSONObject(jsonTok);

        labels = new String[jsonObj.length()];
        fields = new String[1][labels.length];

        i = 0;
        it = jsonObj.keys(); 
        while(it.hasNext())  {
            String key = it.next().toString();
            labels[i] = key;
            fields[0][i] = jsonObj.get(key);
            i++;
        }

        return new WipdDBTable(labels, fields);
    } catch(JSONException ex)  {
        return null;
    }
} 
```

我收到此错误：

```
WipdJSON.java:102: incompatible types
found   : java.lang.Object
required: java.lang.String
                fields[0][i] = jsonObj.get(key); 
```

所以我写了一个测试类，显然有相同的来源，但是这个我没有得到任何错误：

```
public class jsontest
{
    public static
    void
    main(String[] args)
    {
        String s1;
        JSONObject jsonObj;
        JSONTokener jsonTok;

        s1 = "{\"lo\":\"ol\",\"json\":{\"1\":\"2\"},\"yo\":{\"lol\":\"lol\"}}";

        try  {
            jsonTok = new JSONTokener(s1);
            jsonObj = new JSONObject(jsonTok);

            Iterator it = jsonObj.keys();
            while(it.hasNext())  {
                String key = it.next().toString();
                System.out.print(key + "=>");
                System.out.println(jsonObj.get(key));
            }
        } catch(JSONException ex)  {
            ex.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:43:09.860

`jsonObj.get(key);`返回一个对象，如果要获取字符串变量中的值，则需要将其转换为字符串。JSONObject 类中有一个[getString方法：](http://www.json.org/javadoc/org/json/JSONObject.html#getString%28java.lang.String%29)

```
fields[0][i] = jsonObj.getString(key); 
```

*而且您的测试*类中不会出现任何错误，因为您只输出调用[toString()](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString%28%29)方法的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:47:55.527

```
fields[0][i] = jsonObj.get(key); 
```

将其更改为

```
fields[0][i] = (String) jsonObj.get(key); 
```

现在，您正在投射`Object`到`String`. 如果您不确定，`String`请始终与`instanceof`操作员核对。

```
Object obj = jsonObj.get(key); 
if(obj instanceof String)
{
    fields[0][i] = (String) jsonObj.get(key); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T12:53:13.497

获取方法签名看起来像这样

```
 java.lang.Object get(java.lang.String key) 
```

**所以绝对你必须在你的实际类型中使用它。**

例如

```
String key = (String)jsonObj.get(key); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T12:57:12.360

嗨，错误可以通过替换线来消除

`fields[0][i] = jsonObj.get(key);`

和

`fields[0][i] = (String)jsonObj.get(key);`

并且它在第二个代码片段中没有给出错误，因为您在 System.out.println 中打印它但没有将它分配给任何 String 变量

`System.out.println(jsonObj.get(key));`

因此，如果您尝试将其分配给任何 String 变量而不将其转换为 String 变量，它也会给出错误。

# google-maps-api-3 - Google 地图定位服务 OVER_QUERY_LIMIT/每秒

> ID：12673483
> 
> 赞同：0
> 
> 时间：2012-10-01T12:41:35.427
> 
> 标签：google-maps-api-3

我们正在使用 Google Maps place service API。我对 over_query_limit 有疑问。根据文档，限制为每秒 10 个请求。但我的应用程序每秒至少需要 40 个请求。

我可以获得每秒 40 个请求的商业谷歌地图位置服务 API 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:15:21.667

根据[Maps API for Business FAQ](https://developers.google.com/maps/documentation/business/faq#places_limits) Places API 请求不受速率限制（如果您付费）：

> 如果您在 Maps API for Business 合同中购买了 Google Places API，则您的 Places API 限制将列在 API 控制台的配额部分中。Places API 请求不受速率限制。

# ruby - 如何使用 rspec 为 CLI 测试标准输入

> ID：12673485
> 
> 赞同：4
> 
> 时间：2012-10-01T12:41:40.193
> 
> 标签：ruby, rspec, command-line-interface, stdin, thor

我正在制作一个小型 Rub​​y 程序，但不知道如何编写模拟多个用户命令行输入的 RSpec 规范（功能本身有效）。我认为[这个 StackOverflow 答案](https://stackoverflow.com/q/12222175/567863)可能涵盖了离我最近的地方，但这并不是我所需要的。我将[Thor](https://github.com/wycats/thor/)用于命令行界面，但我认为这不是 Thor 中的任何问题。

该程序可以从文件或命令行读取命令，并且我已经能够成功编写测试以读取并执行它们。这是一些代码：

**cli.rb**

```
class CLI < Thor
  # ...
  method_option :filename, aliases: ['-f'],
                desc: "name of the file containing instructions",
                banner: 'FILE'

  desc "execute commands", "takes actions as per commands"
  def execute
    thing = Thing.new
    instruction_set do |instructions|
      instructions.each do |instruction|
        command, args = parse_instruction(instruction) # private helper method
        if valid_command?(command, args) # private helper method
          response = thing.send(command, *args)
          puts format(response) if response
        end
      end
    end
  end

  # ...

  no_tasks do
    def instruction_set
      if options[:filename]
        yield File.readlines(options[:filename]).map { |a| a.chomp }
      else
        puts usage
        print "> "
        while line = gets
          break if line =~ /EXIT/i
          yield [line]
          print "> "
        end
      end
    end
    # ..
  end 
```

我已经成功测试了使用以下代码执行文件中包含的命令：

**规范/cli_spec.rb**

```
describe CLI do

  let(:cli) { CLI.new }

  subject { cli }

  describe "executing instructions from a file" do
    let(:default_file) { "instructions.txt" }
    let(:output) { capture(:stdout) { cli.execute } }

    context "containing valid test data" do
      valid_test_data.each do |data|
        expected_output = data[:output]

        it "should parse the file contents and output a result" do
          cli.stub(:options) { { filename: default_file } } # Thor options hash
          File.stub(:readlines).with(default_file) do
            StringIO.new(data[:input]).map { |a| a.strip.chomp }
          end
          output.should == expected_output
        end
      end
    end
  end
  # ...
end 
```

`valid_test_data`上面提到的格式如下：

**支持/实用程序.rb**

```
def valid_test_data
  [
    {
      input: "C1 ARGS\r
              C2\r
              C3\r
              C4",
      output: "OUTPUT\n"
    }
    # ...
  ]
end 
```

我现在想做的是完全相同的事情，但是我不想从“文件”中读取每个命令并执行它，而是想以某种方式模拟用户输入`stdin`. 下面的代码是*完全错误*的，但我希望它可以传达我想要去的方向。

**规范/cli_spec.rb**

```
# ...
# !!This code is wrong and doesn't work and needs rewriting!!
describe "executing instructions from the command line" do
  let(:output) { capture(:stdout) { cli.execute } }

  context "with valid commands" do
    valid_test_data.each do |data|
      let(:expected_output) { data[:output] }
      let(:commands) { StringIO.new(data[:input]).map { |a| a.strip } }

      it "should process the commands and output the results" do
        commands.each do |command|
          cli.stub!(:gets) { command }
          if command == :report
            STDOUT.should_receive(:puts).with(expected_output)
          else
            STDOUT.should_receive(:puts).with("> ")
          end
        end
        output.should include(expected_output)
      end
    end
  end
end 
```

我已经尝试`cli.stub(:puts)`在各个地方使用，并且通常会重新排列这段代码，但似乎无法让我的任何存根将数据放入标准输入。我不知道我是否可以像处理命令文件一样解析我期望从命令行获得的输入集，或者我应该使用什么代码结构来解决这个问题。如果已经指定命令行应用程序的人可以加入，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T12:51:04.837

我认为一些间接操作可以帮助您为此代码编写单元测试，而不是对整个宇宙进行存根。您可以做的最简单的事情是允许`IO`注入输出对象，并将其默认为`STDOUT`：

```
class CLI < Thor
  def initialize(stdout=STDOUT)
    @stdout = stdout
  end

  # ...

  @stdout.puts # instead of raw puts
end 
```

然后，在您的测试中，您可以使用 a`StringIO`检查打印的内容：

```
let(:stdout) { StringIO.new }
let(:cli) { CLI.new(stdout) } 
```

另一种选择是使用 Aruba 或类似的东西，并编写完整的集成测试，您可以在其中实际运行您的程序。这也有其他挑战（例如非破坏性并确保不压缩/使用系统或用户文件），但这将是对您的应用程序的更好测试。

Aruba 是 Cucumber，但断言可以使用 RSPec 匹配器。或者，您可以使用 Aruba 的 Ruby API（未记录，但公开且效果很好）来执行此操作，而无需 Gherkin 的麻烦。

无论哪种方式，您都将从使您的代码更易于测试中受益。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T13:20:31.983

我最终找到了一个解决方案，我认为该解决方案与从文件执行指令的代码非常接近。我克服了主要障碍，最终意识到我可以编写`cli.stub(:gets).and_return`并在我想要执行的命令数组中传递它（由于 splat`*`运算符作为参数），然后将`"EXIT"`命令传递给它以完成。如此简单，却又如此难以捉摸。非常感谢[这个 StackOverflow 问题和答案](https://stackoverflow.com/q/4643277/567863)让我越界。

这是代码：

```
describe "executing instructions from the command line" do
  let(:output) { capture(:stdout) { cli.execute } }

  context "with valid commands" do
    valid_test_data.each do |data|
      let(:expected_output) { data[:output] }
      let(:commands) { StringIO.new(data[:input]).map { |a| a.strip } }

      it "should process the commands and output the results" do
        cli.stub(:gets).and_return(*commands, "EXIT")
        output.should include(expected_output)
      end
    end
  end
  # ...
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T12:48:46.257

你看过[阿鲁巴岛](https://github.com/cucumber/aruba)吗？它允许您为命令行程序编写 Cucumber 功能测试。您可以通过这种方式定义 CLI 的输入。

您可以使用 RSpec 编写功能定义，因此它不是全新的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-30T11:46:30.230

`Thor::Actions`您可以使用 Rspec存根所有内容`allow_any_instance_of`

这是一个例子：

```
it "should import list" do
   allow_any_instance_of(Thor::Actions).to receive(:yes?).and_return(true)
end 
```

# jquery - 将几个 jQuery 选择合并为一个，然后使用 .each 遍历

> ID：12673489
> 
> 赞同：1
> 
> 时间：2012-10-01T12:41:57.180
> 
> 标签：jquery, jquery-selectors

我需要为页面上的大多数链接添加点击事件。问题是我需要通过选择链接的容器而不是简单地来做到这一点`$('a')`，因为我需要使用容器的类作为一个或单击处理程序调用中的参数。

我只想拥有一个可以使用 .each 迭代并绑定处理程序的大型集合。至少会有几十个不同的容器，那么有没有办法在没有很长的字符串`$(class1).add(class2).add(class3)`等的情况下做到这一点？

该页面上有许多块和部分。当在用户定义为逻辑块/部分的任何内容中单击链接时，需要传递代码。在一种情况下，代码可能是包含标签链接列表的容器，因此所有标签都将具有 [great[grand]] 父级和相同的代码。容器必须携带代码而不是链接的原因是它是一个动态站点，并且该块/区域的内容可以随时由编辑器更改，因此它是该块在屏幕上的位置这决定了代码，而不是其中的内容。所以当页面加载时，容器（部分/块）是已知的，它们的代码应该是什么。他们不知道他们的内容（我也是），链接也不知道他们的容器。

[我向谁添加了我在尝试删除我的回复时不小心删除的评论表示歉意]

```
<div class="code1">
  <div>
    <h2>title</h2>
  </div>
  <div>
    <ul>
       <li><a>link1</a></li>
       <li><a>link2</a></li>
    </ul>
  </div>
</div>
<div class="code2">
  <div>
    <img>
    <p></p>
    <a>text</a>
  </div>
  <div>
    <a><img></a>
  </div>
</div> 
```

所以在这种情况下，您可以看到这两个部分的结构除了包含链接之外没有任何共同之处。我控制围绕具有类的容器创建 html。这些容器的内容是完全动态的，事实上，第一个的内容很容易变成第二个的内容，唯一保持不变的是 div 及其代码。

我想一种方法是选择该类下方的所有链接，然后在添加点击处理程序时将该类添加到这些链接中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:44:47.113

您可以用逗号分隔多个选择器：

```
$('.class1, .class2, .class3').each(function() { ... }); 
```

如果`class1`是一个容器，你当然可以`a`像这样访问标签：

```
$('.class1 a, .class2 a, ...') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:46:08.500

或者

```
$('.container1, .container2, .container3').find('a').on('click',function(){
   //link click handler
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T12:46:48.670

在不知道所有要求的情况下，我会说选择所有 A 标签会更容易（或者在所有应该获得 onlick 的 A 标签上设置一个类并通过它选择），然后在点击事件中获取父类，例如. .$(this).parent().attrib("class")。

给我 som html 和 javascript，我会给你一个更直观的例子 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T12:50:15.510

如果不绑定单个事件或让锚知道它的特殊父级，可能很难获得你需要的类。不过，您可以使用事件目标来判断点击了什么：

```
$(".class1, .class2, .class3").click(function (e) {
   if (e.target.nodeName !== 'A') { return; }
   var cl = $(this).attr('class');
   //do whatever you want with $(e.target);
}); 
```

现场示例：http: [//jsfiddle.net/k2VuG/](http://jsfiddle.net/k2VuG/)

# symfony - 捆绑呼叫的侦听器

> ID：12673492
> 
> 赞同：1
> 
> 时间：2012-10-01T12:42:15.123
> 
> 标签：symfony

我的意思是在某个 Bundle（比如说 AdminBundle）中的所有控制器中调用一个通用函数。我有一个登录监听器，我设置了一个包含 true 或 false 的会话，我需要在我的 AdminBundle 的每个方法之前检查这个会话。

所以我尝试在我的 AdminBundle 控制器中创建一个 __construct() 函数，但似乎我无法通过此方法访问服务（因为尚未加载容器，所以我无法访问 $this）。

最佳实践应该是在这些控制器的非常方法之前使用监听器来调用此服务，但我无法弄清楚我需要使用哪个监听器（在谷歌上找不到线索......）。

希望足够清楚，如果您不理解我的观点，请随时提出问题！

提前感谢您提供任何解决方案/想法（如果您认为我没有使用正确的方法来做到这一点，请解释我的观点！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:55:02.100

在这个问题的下午之后，感谢 mahok，我终于得到了解决方案。

对于那些有同样问题的人，这是我的控制器监听器：

```
<?php
namespace Site\MyBundle\Listener;

use Symfony\Component\Security\Core\SecurityContext;
use Symfony\Component\HttpKernel\HttpKernelInterface;
use Symfony\Component\HttpKernel\Event\FilterControllerEvent;
use Symfony\Component\HttpKernel\HttpKernel;
use Symfony\Component\Routing\Router;
use Symfony\Component\HttpFoundation\RedirectResponse;
use Symfony\Component\DependencyInjection\ContainerInterface;

class ControllerListener
{
    protected $container;
    protected $router;

    public function __construct(ContainerInterface $container, Router $router)
    {
        $this->router = $router;
        $this->container = $container;
    }

    public function onKernelController(FilterControllerEvent $event)
    {       
        if (HttpKernel::MASTER_REQUEST == $event->getRequestType()) 
        {
            $controller = $event->getController();
            $controller = $controller[0];

            $new = new \ReflectionObject($controller);

            if($new->getNamespaceName() == 'Site\MyBundle\Controller')
            {
                $test = $this->container->get('myservice')->test(); 
                if(empty($test) || !$test)
                {
                    $index = $this->router->generate('index');
                    $event->setController(function() use($index) {
                        return new RedirectResponse($index);
                    });
                }
            }
        }
    }
} 
```

因此，基本上它将您当前控制器操作的名称空间与另一个进行比较，如果为真，我检查一些变量以了解用户是否可以在这里。

再次感谢你给我指路！

# .htaccess - Codeigniter htaccess index.php 站点关闭

> ID：12673496
> 
> 赞同：1
> 
> 时间：2012-10-01T12:42:38.087
> 
> 标签：.htaccess, codeigniter, mod-rewrite, web

即使没有对任何文件进行任何更改，Codeigniter htaccess 也会突然出现问题。我可以访问

*   www.mysite.com/index.php/controller/method

但是当我访问

*   www.mysite.com/controller/method

它给出了一般的 404，而不是 codeigniter 404。任何帮助表示赞赏。该网站已关闭。

这是我现在的 htaccess

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

 #Removes access to the system folder by users.
 #Additionally this will allow you to create a System.php controller,
 #previously this would not have been possible.
 #'system' can be replaced if you have renamed your system folder.
 RewriteCond %{REQUEST_URI} ^system.*
 RewriteRule ^(.*)$ /index.php/$1 [L]

 #Checks to see if the user is attempting to access a valid file,
 #such as an image or css document, if this isn't true it sends the
 #request to index.php
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 #This last condition enables access to the images and css folders, and the robots.txt file 
#Submitted by Michael Radlmaier (mradlmaier)
 RewriteCond $1 !^(index\.php|images|robots\.txt|css)
 RewriteRule ^(.*)$ index.php/$1 [L]
 </IfModule>

 <IfModule !mod_rewrite.c>
 # If we don't have mod_rewrite installed, all 404's
 # can be sent to index.php, and everything works as normal.
 # Submitted by: ElliotHaughin

 ErrorDocument 404 /index.php
 </IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T20:34:35.023

在这种情况下，我 100% 确定您的 mod_rewrite 无法正常工作。还要确保您的 .htacess 文件位于您的根目录中。让这个在我的服务器上正常工作可能会对您有所帮助：-

```
# rewrite rules
RewriteEngine On

# ditch index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

# xna - 创建 XNA 项目时出错

> ID：12673500
> 
> 赞同：0
> 
> 时间：2012-10-01T12:43:04.523
> 
> 标签：xna, visual-studio-templates

我刚刚安装了 XNA Game Studio 4。但是当我创建一个新的 XNA 项目时，我得到一个错误：

> 未找到“代码/XnaWindowsGeme.vstemplate”。

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:06:36.900

根据文件扩展名和出现错误的上下文，Visual Studio 似乎无法查找与 XNA Windows 游戏项目关联的模板。我的猜测是 XNA 安装程序无法将此模板安装到您的 Visual Studio 实例中。可能是由于安装了多个 Visual Studio 实例/版本。您也可以尝试重新安装 XNA。

# c++ - 什么是 sdkddkver.h？

> ID：12673504
> 
> 赞同：1
> 
> 时间：2012-10-01T12:43:10.543
> 
> 标签：c++, windows

当我尝试编译 MFC 项目时，我被告知我需要包含此文件。它是什么，在哪里？为什么我需要它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T14:55:39.343

这是一个相当重要的 Windows SDK 头文件，是第一个在`<windows.h>`. 它声明了 Windows 版本号，您应该在程序中使用该版本号，说明您希望与哪个版本的 Windows 兼容。MSDN 库文章[在此处](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383745%28v=vs.85%29.aspx)。

如果您的机器上实际上缺少此文件（从问题中不清楚），那么您要么有一个非常旧的 SDK 版本并且正在混合标头（非常糟糕），要么你有一些磁盘损坏（非常非常糟糕）。当您被困在旧版本的 Visual Studio 并尝试使用现代 Windows api 函数时，您会遇到这种问题。不要混搭，不会有好的结局。

# c++ - 验证本地计算机的 Active Directory 域信任关系

> ID：12673506
> 
> 赞同：2
> 
> 时间：2012-10-01T12:43:17.567
> 
> 标签：c++, .net, winapi, active-directory

我必须查明本地计算机是否仍加入域，或者另一台计算机是否已使用该计算机帐户，或者该计算机帐户是否已被重置。

也就是说，我需要验证本地机器和域之间的信任关系

NLTest /SC_VERIFY:{Domain} 做得很好。

是否有任何 API 函数可用于检测本地计算机是否已失去与域的信任关系？我不喜欢从我的程序中调用外部可执行文件。

到目前为止我尝试了什么：

*   NetGetJoinInformation()：它没有意识到。
*   DsBind*()：它没有意识到。还尝试在本地系统帐户下调用它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T17:18:06.757

好的。经过大量挖掘，我终于找到了解决方案：[I_NetLogonControl2](http://msdn.microsoft.com/en-us/library/bb432349%28v=vs.85%29.aspx)

```
NETLOGON_INFO_2* buffer=NULL;
LPBYTE domainName = (LPBYTE) L"eng";

int ret = I_NetLogonControl2(NULL, NETLOGON_CONTROL_TC_VERIFY, 2, (LPBYTE) &domainName, (LPBYTE*)&buffer);
wprintf( L"I_NetLogonControl2() returned %i\n", ret);
if (ret==0)
{
    wprintf( L"PdcConenctionStatus: %i\n", buffer->netlog2_pdc_connection_status);
    if (buffer->netlog2_pdc_connection_status==0)
        wprintf(L"Trust relationship verified.\n");
    else
        wprintf(L"Trust relationship FAILED.\n");

    wprintf( L"TcConenctionStatus: %i\n", buffer->netlog2_tc_connection_status);
    wprintf( L"Flags: %i\n", buffer->netlog2_flags);
}

return 0; 
```

所以神奇的东西隐藏在 NETLOGON_INFO_2::netlog2_pdc_connection_status 中。
如果此值为 86 (ERROR_INVALID_PASSWORD) 或 5 (ERROR_ACCESS_DENIED)，则计算机帐户已更改（或重置）。
如果计算机帐户已被删除，则值为 1787 (ERROR_NO_TRUST_SAM_ACCOUNT)

希望这对其他人有帮助！

不幸的是，MSDN 文档并不精确。当您指定“NETLOGON_CONTROL_TC_VERIFY”时，数据参数 (LPBYTE) 必须指向 (LPWSTR*)！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:11:09.343

您可以尝试使用[LogonUser](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378184%28v=vs.85%29.aspx)函数进行网络登录（LOGON32_LOGON_NETWORK）。

如果工作站破坏了与域的信任，它将无法验证您的凭据。

当然，您将需要一些可以执行网络登录的域凭据，而不是本地凭据。

您的另一个选择是使用已授予网络服务登录权限的本地帐户并尝试访问其他域工作站资源。您可能会收到拒绝访问错误或信任关系失败取决于哪个服务器上的哪个资源。

最后，您仍然可以在系统事件日志中搜索事件 ID 信号信任失败。

> 但我们没有任何众所周知的帐户可用于此目的

在您以某种方式进行身份验证之前，您无法检查域站点（在 AD 中）上的工作站帐户状态，只是本地状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-19T13:03:46.623

NetLogon_Control2 用于 BDC 到 PDC 通信；不适用于我在 Win 7 中的测试

微软页面——

**评论**

此功能可用于请求 BDC 确保其 SAM 数据库副本是最新的。它还可以用于确定**BDC当前是否具有对****PDC**开放的安全通道。

# wcf - FileTransfer 到 WCF 服务接收 405

> ID：12673510
> 
> 赞同：0
> 
> 时间：2012-10-01T12:43:33.950
> 
> 标签：wcf, rest, cordova

我正在使用 PhoneGap 开发一个移动应用程序，其中一个功能涉及将图像上传到 Web 服务进行处理。我编写了一个托管在 IIS 中的 WCF 服务来接受图像，其合同如下所示：

```
[ServiceContract]
public interface IImages
{
    [OperationContract(Name="UploadImage")]
    [WebInvoke(UriTemplate = "?file_key={fileKey}", Method = "POST", BodyStyle = WebMessageBodyStyle.Bare)]
    ImageResource UploadImage(string fileKey, Stream imageStream);
} 
```

我的 web.config 中的配置部分如下所示：

```
 <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true">
      <serviceActivations>
        <add service="Services.Images" relativeAddress="images.svc" />
      </serviceActivations>
    </serviceHostingEnvironment>
    <services>
      <service behaviorConfiguration="DefaultServiceBehavior" name="Services.Images">
        <endpoint behaviorConfiguration="DefaultEndpointBehavior" binding="webHttpBinding" bindingConfiguration="PublicStreamBinding" contract="Services.Contracts.IImages" />
      </service>
    </services>
    <bindings>
      <webHttpBinding>
        <binding name="PublicStreamBinding"
                maxReceivedMessageSize="2000000000" transferMode="Streamed">
          <security mode="None" />
        </binding>
      </webHttpBinding>
    </bindings>
    <behaviors>
      <endpointBehaviors>
        <behavior name="DefaultEndpointBehavior">
          <webHttp helpEnabled="true" />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="DefaultServiceBehavior">
          <serviceMetadata httpGetEnabled="false" />
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceThrottling maxConcurrentCalls="30" maxConcurrentInstances="30" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

当我尝试使用 PhoneGap 的 FileTransfer 类将文件上传到端点时，从服务返回的响应是 405 Method Not Allowed。我在这里做错了什么？

**更新：**我的移动应用程序中上传文件的功能如下。此代码以前在指向较旧的 ASMX 服务时运行良好。

```
 ns.UploadImage = function(){
        //alert(ns.Dictionary['LocalImagePath']);

        var uri = ns.Dictionary['LocalImagePath'];

        try {
            var options = new FileUploadOptions();

            options.fileKey = uri.substr(uri.lastIndexOf('/')+1) + ".jpeg";
            options.fileName = uri.substr(uri.lastIndexOf('/')+1) + ".jpeg";
            options.mimeType = "image/jpeg";

            var ft = new FileTransfer();

            ft.upload(uri, GetServerUrl()+"images.svc?file_key="+options.fileKey, ns.UploadImageSuccess, ns.UploadImageError, options);

        } catch (e) {
            ns.UploadImageError(e);
        }
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:15:59.500

好的，所以我想我想通了。显然，当方法像这样托管在根目录时，如果您没有在 uri 中使用“/”跟随服务的名称，请求将无法正确路由。因此，在上传文件的函数中，我将 ft.upload 行更改为以下内容：

```
ft.upload(uri, GetServerUrl()+"images.svc/?file_key="+options.fileKey, ns.UploadImageSuccess, ns.UploadImageError, options); 
```

哪个有效。

# ajax - 在 wordpress 中使用 Ajax “加载更多帖子”

> ID：12673524
> 
> 赞同：1
> 
> 时间：2012-10-01T12:44:57.813
> 
> 标签：ajax, wordpress, pagination

我正在尝试在博客页面上创建 ajax 分页。我需要做的是最初显示 5 个帖子，然后在单击“加载更多帖子”链接时再加载 5 个。

下面是我正在使用的 javascript：

```
<script>
    jQuery(document).ready(function() {
        // ajax pagination
        jQuery('.nextPage a').live('click', function() { 

            // if not using wp_pagination, change this to correct ID
            var link = jQuery(this).attr('href');

            // #main is the ID of the outer div wrapping your posts
            jQuery('.blogPostsWrapper').html('<div><h2>Loading...</h2></div>');

            // #entries is the ID of the inner div wrapping your posts
            jQuery('.blogPostsWrapper').load(link+' .post')
        });
    }); // end ready function
</script> 
```

问题是，当我单击链接时，旧帖子被新帖子替换，我需要显示旧帖子以及新帖子......

这是启用 ajax 分页的更新的 jQuery 代码。

```
jQuery(document).ready(function(){
jQuery('.nextPage a').live('click', function(e){
  e.preventDefault();
  var link = jQuery(this).attr('href');
  jQuery('.blogPostsWrapper').html('Loading...');
  jQuery('.blogPostsWrapper').load(link+' .post');
  });
  }); 
```

现在唯一的问题是旧帖子被删除了，我需要保留旧帖子和新帖子..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:11:19.243

这是我使用的最终代码，现在一切正常......

```
// Ajax Pagination
jQuery(document).ready(function($){
    $('.nextPage a').live('click', function(e)  {
    e.preventDefault();
    $('.blogPostsWrapper').append("<div class=\"loader\">&nbsp;</div>");

    var link = jQuery(this).attr('href');

    var $content = '.blogPostsWrapper';
    var $nav_wrap = '.blogPaging';
    var $anchor = '.blogPaging .nextPage a';
    var $next_href = $($anchor).attr('href'); // Get URL for the next set of posts

    $.get(link+'', function(data){
    var $timestamp = new Date().getTime();
    var $new_content = $($content, data).wrapInner('').html(); // Grab just the content
    $('.blogPostsWrapper .loader').remove();
    $next_href = $($anchor, data).attr('href'); // Get the new href
    $($nav_wrap).before($new_content); // Append the new content
    $('#rtz-' + $timestamp).hide().fadeIn('slow'); // Animate load
    $('.netxPage a').attr('href', $next_href); // Change the next URL
    $('.blogPostsWrapper .blogPaging:last').remove(); // Remove the original navigation
    });

    });
}); // end ready function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:47:56.017

你可以试试下面的代码吗？这就是我在自己的网站上进行这项工作的方式。

代替：

```
jQuery('.blogPostsWrapper').load(link+' .post') 
```

和：

```
$.get(link+' .post', function(data){
$('.blogPostsWrapper').append(data);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:03:02.647

您应该使用 jQuery [append()](http://api.jquery.com/append/)添加新帖子而不使用旧帖子。

jQuery [load()](http://api.jquery.com/load/)将替换元素中找到的数据。引用自 jQuery API：

> .load() 将匹配元素的 HTML 内容设置为返回的数据。这意味着该方法的大多数用途都非常简单：

# com - ASP.Net MVC 4 - 我应该创建一个自定义成员资格提供程序（Intranet，没有数据库，没有 sso）

> ID：12673526
> 
> 赞同：2
> 
> 时间：2012-10-01T12:44:57.993
> 
> 标签：com, asp.net-mvc-4, membership, intranet

在 Intranet ASP.NET MVC 4 应用程序中，我必须使用表单身份验证进行身份验证。我不能为此应用程序使用集成安全性，因为它还必须可以被不受信任的实体访问。还有另一个限制：Web 应用程序是具有自己的登录机制（用户名 + 密码）的 COM 支持的解决方案的某种接口。所以我没有数据库。

我想尽可能多地使用内置功能。
我不需要实施注册或管理帐户的流程。基本上，我只需要登录、注销和更改密码。

这种情况下最好的方法是什么？

我倾向于创建自定义会员提供程序？这是一个好主意吗？

问候，马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T10:01:32.510

你说的对。当您构建自己的 CustomMembershipProvider 时，您可以自由地对其进行自定义以满足您的要求。特别是身份验证本身可以更改为使用您现有的解决方案登录和注销。

# javascript - html5画布使用图像作为掩码

> ID：12673527
> 
> 赞同：8
> 
> 时间：2012-10-01T12:45:01.430
> 
> 标签：javascript, html, canvas

是否可以将具有形状的图像用作整个画布或画布内图像的蒙版？

我想将图像放在带有蒙版的画布中，然后将其另存为新图像。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-01T13:37:11.370

您可以使用'source-in' globalCompositeOperation 将黑白图像用作蒙版。首先将遮罩图像绘制到画布上，然后将 globalCompositeOperation 更改为“source-in”，最后绘制最终图像。

您的最终图像只会在覆盖蒙版的地方绘制。

```
var ctx = document.getElementById('c').getContext('2d');

ctx.drawImage(YOUR_MASK, 0, 0);
ctx.globalCompositeOperation = 'source-in';
ctx.drawImage(YOUR_IMAGE, 0 , 0); 
```

[有关全球复合业务的更多信息](https://developer.mozilla.org/samples/canvas-tutorial/6_1_canvas_composite.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:48:59.910

除了 Pierre 的回答之外，您还可以通过将黑白图像的数据复制到 CanvasPixelArray 中来使用黑白图像作为图像的遮罩源，例如：

```
var
dimensions = {width: XXX, height: XXX}, //your dimensions
imageObj = document.getElementById('#image'), //select image for RGB
maskObj = document.getElementById('#mask'), //select B/W-mask
image = imageObj.getImageData(0, 0, dimensions.width, dimensions.height),
alphaData = maskObj.getImageData(0, 0, dimensions.width, dimensions.height).data; //this is a canvas pixel array

for (var i = 3, len = image.data.length; i < len; i = i + 4) {

    image.data[i] =  alphaData[i-1]; //copies blue channel of BW mask into A channel of the image

}

//displayCtx is the 2d drawing context of your canvas
displayCtx.putImageData(image, 0, 0, 0, 0, dimensions.width, dimensions.height); 
```

# c# - 将 CompositeTransform 设置为独立动画 (EnableDependentAnimation == false)

> ID：12673529
> 
> 赞同：0
> 
> 时间：2012-10-01T12:45:10.760
> 
> 标签：c#, windows-runtime, windows-phone

我在 windows phone 7 中使用以下代码为 a 设置动画`CompositeTransform`：

```
 var da = new DoubleAnimationUsingKeyFrames() ;
        _storyboard.Children.Add (da);
        _translateXKeyFrame = new EasingDoubleKeyFrame {...}
        da.KeyFrames.Add (_translateXKeyFrame);
        Storyboard.SetTarget (da, _transform);
        Storyboard.SetTargetProperty(da, "TranslateX"); 
```

为我使用此代码的属性设置动画：

```
 _translateXKeyFrame.Value = value;
        _storyboard.Begin (); 
```

不幸的是，此代码不适用于 winrt（动画不运行）。

对于 winrt，有依赖动画和独立动画的概念。如果我设置了`EnableDependentAnimation`标志，那么动画似乎会运行。问题是，动画仅在用户完成与触摸屏的交互后运行。

我猜这是因为 UI 线程在用户做某事时被阻塞，所以依赖动画不会运行。

`EnableDependentAnimation`当动画作为独立动画运行时（即设置为 false），为什么动画不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:04:46.100

此代码有效。

```
image1.RenderTransform = new TranslateTransform(); 

animateY = new DoubleAnimation();
animateY.from=0;
animateY.To += 200;
animateY.Duration = TimeSpan.FromMilliseconds(400);

Storyboard.SetTarget(animateY, image1.RenderTransform);
Storyboard.SetTargetProperty(animateY, "TranslateTransform.Y");

_story.Children.Add(animateY); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T15:10:25.133

EnableDependentAnimation 属性不需要设置动画翻译值。WinRT 始终建议对值进行动画处理，这不会影响布局，因此动画不会阻塞 UI 线程。要为高度/宽度等属性设置动画，必须将 EnableDependentAnimation 设置为 true。

RenderTransform 和投影值可以在不设置此属性的情况下设置动画。

[http://www.codeproject.com/Articles/415721/Fast-and-Fluid-Animations-in-your-Windows-UI-App](http://www.codeproject.com/Articles/415721/Fast-and-Fluid-Animations-in-your-Windows-UI-App)

# c - 无法重新定义枚举类型 def

> ID：12673530
> 
> 赞同：0
> 
> 时间：2012-10-01T12:45:20.947
> 
> 标签：c, enums, embedded, typedef, multiple-definition-error

我有 bool typedef 的代码

```
typedef enum bool {
    false,
    true,
} bool; 
```

在两个头文件中，如果最终父头文件中不包含它，则子 C 文件当然不能使用 bool 类型，尽管也定义了它的较小头文件的子文件可以。

但是，如果我在最终的父头文件中定义它，那么较小的头文件定义错误“布尔已在当前范围内声明”

我需要一个较小标题的解决方案，它可能包含在可能已经或可能尚未定义 bool 的项目中......最好的方法是什么？

塔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:03:14.807

首先，如果您使用的是 C99 或更高版本的编译器，那么`stdbool.h`.

其次，您通常可以避免直接针对`true`和`false`值进行测试，多年来我发现这实际上导致代码更易于阅读且不易出错（不过，这只是个人意见——YMMV）。

直接的解决方案是用包含保护包围你的 typedef：

```
#ifndef BOOL_DEFINED
#define BOOL_DEFINED
typedef enum bool {
  false,
  true
} bool;
#endif 
```

这将防止该类型被多次声明。但是，正如您所发现的，将相同的类型定义放在两个不同的标头中会导致胃灼热。最好将定义放在它自己的头文件中（使用如上所示的包含保护），然后在必要时包含该文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:00:33.410

我会将这个和任何其他共享定义分解到一个 types.h 标头中，该标头包含在您的每个其他标头中。

或者，你可以做类似的事情

```
#ifndef BOOL_DEFINED
#define BOOL_DEFINED
typedef enum bool {
    false,
    true,
} bool;
#endif 
```

在两个标题中。

# sql - SQL - 使用 BLOBS 进行查询

> ID：12673531
> 
> 赞同：4
> 
> 时间：2012-10-01T12:45:21.603
> 
> 标签：sql, sql-server

我们今天的设置采用 XML 数据并将该数据拆分为 SQL 中的多个表。这样做的唯一好处是报告是好的。然而，每当我们想要检索数据时，我们都必须重新绑定数百个表中的所有数据以重新导出 XML。每个 XML 可以是几 MB 到几 GB。

我们几乎从不讽刺地运行报告，但经常检索/保存数据。由于将其拆分/编译为多个表，因此保存和检索都不是很有效。

由于数据以 XML 的形式出现，我正在考虑更新我们的方法并将 XML 作为大 BLOB 保存到表中。就这么简单。

现在的问题与报告有关 - 由于无法索引 blob，我想知道我可以使用哪些选项来尽可能高效地运行报告。

数据库为 100 GB。

我不是 DBA（我是 C# 人员） - 我刚刚在工作中担任这个职位，所以我能想到的唯一方法是使用 C# 来完成 - 将每个 BLOB 构建为 XML 然后查询C# 中的 XML 数据。然而，这似乎是非常低效的。也许 SQL 中的 XQuery 更好？！尽管不是 DBA，但我对任何编程 (C#/VB) 或 SQL 建议都非常满意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T12:49:57.653

您可以将数据保存在数据库中的单个[XML 类型列](http://msdn.microsoft.com/en-us/library/ms187339.aspx)中，然后通过 XQuery 访问数据。

XQuery 对我个人来说有点繁琐，但我发现这个提示列表很有帮助：

[http://www.jackdonnell.com/?p=266](http://www.jackdonnell.com/?p=266)

优点是您只保留一个数据版本，因此更新和读取速度很快，除了 XML 解析位（但这可能取决于您的数据量）。从 C# 将数据导入数据库很简单，因为您可以将 XML 映射到相应的`SqlDbType`.

# ruby-on-rails - 如何使友好的 id 不区分大小写？

> ID：12673549
> 
> 赞同：5
> 
> 时间：2012-10-01T12:46:09.637
> 
> 标签：ruby-on-rails, ruby, friendly-id

如何在 URL 不区分大小写的情况下复制 twitter 用户名：

*   [www.site.com/users/My_Name](http://www.site.com/users/My_Name)
*   [www.site.com/users/my_NAMe](http://www.site.com/users/my_NAMe)
*   [www.site.com/users/MY_NAME](http://www.site.com/users/MY_NAME)

所有这些 URL，当他将用户名保存为“MY_Name”等时打开用户页面。

并且 Model.find('my_NAmE') 方法查找名为 MY_Name 的用户记录。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T13:27:00.433

使比较不区分大小写的方法是规范化数据库和搜索输入中的大小写，以便搜索始终返回结果，无论输入大小写如何。

1.  在将用户名保存到数据库之前始终将其小写

2.  使用`Model.find(params[:id].to_s.downcase)`或自定义方法执行不区分大小写的查找

你在这。

如果您不想更改原始用户名大小写，则在存储降级版本的用户表中添加第二列。然后在该字段而不是原始用户字段上执行搜索。

# ejb-3.0 - ScheduleExpression 每 40 天？

> ID：12673551
> 
> 赞同：0
> 
> 时间：2012-10-01T12:46:28.227
> 
> 标签：ejb-3.0

如何声明每 x 天调用一次的计时器？例如，我想每 40 天调用一次计时器。我应该如何设置我的计时器？我无法将“40 天”转换为小时，因为小时的预期范围在 0-23 之间。我不能在 dayOfMonth 中放置 40 天，因为它预期的范围在 1 到 31 之间。那么我应该怎么做呢？

```
ScheduleExpression expression = new ScheduleExpression();
expression.second("0").minute("0").hour("0").dayOfMonth("40"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:14:03.743

您可以尝试下面的`TimerService`接口方法来创建一个间隔计时器，该计时器将每 40 天到期一次，方法是将其指定为`intervalDuration`初始化后的持续时间（`initialDuration`以毫秒为单位）。

`createTimer(long initialDuration, long intervalDuration, java.io.Serializable info) Create an interval timer whose first expiration occurs after a specified duration, and whose subsequent expirations occur after a specified interval.`

# javascript - Javascript/jquery - 添加一个类以在可变位置列出

> ID：12673552
> 
> 赞同：1
> 
> 时间：2012-10-01T12:46:32.007
> 
> 标签：javascript, jquery

我有一个包含项目编号的变量......像这样：

```
myvariable = '3'; //Note: This is currently a string so it might need converting? 
```

然后我有填充列表视图的代码：

```
$('#listview').live("pageinit", function(){
$.getJSON("myjson.json", function(data){
    $.each(data.unis, function(index, value){

        $('<li><a class="listitem" href="#">' + value.name + '</a></li>').insertAfter('#' + value.sortLetter);

        $('#' + value.sortLetter).show();

    });

    $("#listview").listview("refresh");

}); 
```

以上所有工作正常。

现在，我需要将一个类插入到位于 myvariable 值位置的项目中。

因此，如果 myvariable 是，`3`则列表视图将如下所示：

```
<ul>
<li><a class="listitem" href="#">' + value.name + '</a></li>
<li><a class="listitem" href="#">' + value.name + '</a></li>
<li><a class="listitem AddedClassHere" href="#">' + value.name + '</a></li>
</ul> 
```

如果 myvariable 是`1`那么：

```
<ul>
<li><a class="listitem AddedClassHere" href="#">' + value.name + '</a></li>
<li><a class="listitem" href="#">' + value.name + '</a></li>
<li><a class="listitem" href="#">' + value.name + '</a></li>
</ul> 
```

等等...

我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:07:13.677

一种方法是为每个项目动态构建类列表，如果索引与您在变量中指定的幻数匹配，则可选择添加您的类。将您的代码更改为：

```
$.each(data.unis, function(index, value){
    var classList = 'listItem';
    if(index == (myvariable - 1)) {
        classList += ' addedClass';
    }
    $('<li><a class="' + classList + '" href="#">' + value.name + '</a></li>').insertAfter('#' + value.sortLetter);

    $('#' + value.sortLetter).show();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T12:48:58.433

您可以使用`:eq()`选择器，注意`:eq()`是从零开始的。

```
$('ul li:eq("'+ (myvariable-1) +'") a').addClass('class'); 
```

或者：

```
$('ul li').eq(myvariable-1).find('a').addClass('class'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T13:01:14.477

还有一个 eq() 方法：

```
$('ul li').eq(myvariable - 1).find("a").addClass('class'); 
```

[请参阅 http://api.jquery.com/eq-selector/](http://api.jquery.com/eq-selector/)获取更多文档。

注意：注意如果您在同一页面上使用多个（或嵌套）ul，那么您需要一种不同的方法......

# c# - 将组添加到现有的 MS Office 功能区选项卡

> ID：12673556
> 
> 赞同：4
> 
> 时间：2012-10-01T12:46:42.037
> 
> 标签：c#, ms-word, vsto, ms-office

我正在寻找一种以编程方式将组添加到 Microsoft Office Word 2010 功能区的现有选项卡（例如，在我的情况下为开发人员选项卡）的方法。

在网上找不到任何有用的示例。MS Office 2010 中是否允许这些类型的自定义，如果允许，请提供任何有用的链接或代码示例，说明我如何做到这一点

![在此处输入图像描述](../Images/a5327b2ec900eab81262c6efb5d4e33d.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T13:40:29.490

您可以为插件指定相应的 ControllId `RibbonTab`： ![选项卡 ID](../Images/e67e01a8bc264d958683c6e20a2ab6e8.png)

你想用`TabDeveloper`. 可从[此处](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=3582)获得完整列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:20:39.540

[这个答案](https://stackoverflow.com/questions/10841134/adding-existing-group-to-custom-ribbon-in-office-word-2010)可能对你的情况有帮助

# sql - Rails - 使用分组和计数的日期查询

> ID：12673562
> 
> 赞同：0
> 
> 时间：2012-10-01T12:46:53.040
> 
> 标签：sql, ruby-on-rails, count, group-by

我正在尝试按商业周获取电话数量。我已经写了sql：

```
select strftime('%W', date_time_origination) as week, count(*)
from calls
group by week; 
```

然后我尝试在rails中运行它，首先使用这个：

```
calls_by_week = Call.select("strftime('%W',date_time_origination) as week, count(*) as total_number_of_calls").group("week") 
```

这返回了具有正确数据但重复多次的对象集合（json 表示）：

```
[{ "total_number_of_calls": 5435, "week": 39 },.....] 
```

鉴于它应该返回一个对象，我尝试更改 rails 查询结构：

```
calls_by_week = Call.select("strftime('%W', date_time_origination) as week").group("strftime('%W', date_time_origination)").count 
```

这一次，查询返回一个哈希，减去命名参数：

```
{ "31": 3123, "32": 1231,... } 
```

我希望将数据以 json 格式显示如下：

```
{ "week": 31, "total_number_of_calls": 12412,.....} 
```

有没有办法消除第一个查询产生的重复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:32:12.323

第一：如果你使用`Call.select(...)`rails 会尝试实例化`Call`对象。你想要的不是`Call`对象，只是散列。您可以使用`Call.connection.execute("SELECT .... blah blah").to_enum.to_a`和使用生成的数组数组。

但是要将结果转换为哈希形式，请使用

```
returned_hash = { "31": 3123, "32": 1231,... }
what_you_want = returned_hash.collect do |k,v|
  {"week" => k.to_i, "total_number_of_calls" => v.to_i}
end 
```

另一种方法是使用`.uniq`应用于查询，它仍然会构建`Call`对象，但至少它们不会有重复的数据。

# vb.net - 通过 System.Net.WebClient 下载文件不起作用

> ID：12673565
> 
> 赞同：0
> 
> 时间：2012-10-01T12:47:01.067
> 
> 标签：vb.net

我无法使用以下代码下载任何文件：

```
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
    DownloadFile("http://mirror.switch.ch/ftp/mirror/videolan/vlc/2.0.3/vlc-2.0.3.tar.xz", "C:\TEST\vlc-2.0.3.tar.xz")
End Sub

Public Sub DownloadFile(ByVal _URL As String, ByVal _SaveAs As String)
        Dim _WebClient As New System.Net.WebClient()
        _WebClient.DownloadFile(_URL, _SaveAs)
End Sub 
```

将弹出以下错误：（从德语翻译成英语）：

从 Microsoft 错误弹出窗口： ![在此处输入图像描述](../Images/f4ee1b3fcb440a8a75e8e798f5746153.png)

==> System.dll 中出现了来自“System.Net.WebException”类型的未处理异常。

在调试器中： ![在此处输入图像描述](../Images/3cbe6062810d6095c56a88b993587d06.png)

==> Exeption: Triggered: "An invalid argument has been specified" (System.Net.Sockets.SocketException) System.Net.Sockets.SocketException 已被触发。“指定了无效参数”

完整代码：

```
Imports System
Imports System.Net

Public Class Form2
    Dim str_hd As String

    Private Sub Form2_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

        For Each drive As System.IO.DriveInfo In My.Computer.FileSystem.Drives
            Dim dbl_capacity As Double
            Dim dbl_free As Double
            Dim dbl_used As Double

            If drive.IsReady Then
                dbl_capacity = drive.TotalSize / 1073741824
                dbl_free = drive.TotalFreeSpace / 1073741824
                dbl_used = dbl_capacity - dbl_free

                dbl_capacity = Fix(dbl_capacity * 1) / 1
                dbl_free = Fix(dbl_free * 10) / 10
                dbl_used = Fix(dbl_used * 10) / 10

                str_hd = str_hd & "Laufwerk " & drive.Name & "  -  " _
                        & drive.VolumeLabel & vbCrLf _
                        & "Benutzt: " & dbl_used & " GB" & " / " & dbl_capacity & " GB" & vbCrLf & "Frei: " _
                        & dbl_free & "GB" & vbCrLf & "-------------------------------" & vbCrLf
            End If
        Next

        txtbox_hd.Text = str_hd

    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Form1.Close()
    End Sub

    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        DownloadFile("http://www.aerztekammer-hamburg.de/berufsrecht/Berufsordnung.pdf", "C:\TEST\Berufsordnung.pdf")
    End Sub

    Public Sub DownloadFile(ByVal _URL As String, ByVal _SaveAs As String)
            Dim _WebClient As New System.Net.WebClient()
            _WebClient.DownloadFile(_URL, _SaveAs)
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:53:13.170

文件夹`C:\TEST`存在吗？另外，从文档中：

> 在中间层应用程序（例如 ASP.NET 页面）中使用此方法时，如果执行应用程序的帐户没有访问文件的权限，您将收到错误消息。
> 
> Wenn Sie diese Methode in einer Anwendung der Middle-Tear verwenden, z。B. einer ASP.NET-Seite, erhalten Sie eine Fehlermeldung, wenn das Konto, unter dem die Anwendung ausgeführt wird, nicht über die Berechtigung zum Zugriff auf die Datei verfügt。

# jquery - jQuery 在表单提交时不在 Safari 中运行

> ID：12673568
> 
> 赞同：4
> 
> 时间：2012-10-01T12:47:05.947
> 
> 标签：jquery, forms, safari, submit

我有一个让我头疼的特殊问题...以下代码在 Firefox 中完美运行，但在 Mac OS 上的 Safari 中却不行。

我想在上传文件时显示一个简单的“加载消息”。所以我的页面看起来像这样：

```
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title></title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
        <script>
            $(document).ready(function () {
                $('#upload').on('submit', function () {

                    $("#loading").fadeIn();

                });

            });
        </script>
    </head>

    <body>
        <p id="loading" style="display:none">UPLOADING...</p>

            <form name="upload" id="upload" method="post" action="upload.php" enctype="multipart/form-data">
                <input type='file' name='file[]' multiple/>
                <input type="submit" value="Upload..."/>
            </form>

    </body>
</html> 
```

在 Firefox 上，在将我转移到 upload.php 之前，文件正在上传时会显示“UPLOADING...”行。在 Safari 上，“上传...”行*没有显示*，一旦文件上传，它就会将我转移到 upload.php。

如果 Safari 不支持此功能，我该如何实现完全相同的功能？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T12:57:23.887

好的，我得到它的工作...

我没有使用“提交”按钮，而是将其更改为 id='send' 的“按钮”。我修改了脚本，首先在点击时显示 p 标签，然后在回调中添加表单提交，如下所示：

```
<script>
            $(document).ready(function () {

                $("#send").click(function () {

                    $("#loading").fadeIn(function () {
                        $("#upload").submit();
                    });

                });

            });
</script> 
```

它现在适用于所有浏览器。在 IE、FF、Chrome 和 Safari 中测试。

# objective-c - 无法使用情节提要在 UIViewControllers 之间切换

> ID：12673569
> 
> 赞同：0
> 
> 时间：2012-10-01T12:47:08.213
> 
> 标签：objective-c, ios, xcode, presentmodalviewcontroller

我是目标 C 的新手，所以如果这是一个愚蠢的问题，请原谅我（我已经搜索过！）

我在 xcode (4.4.1) 中使用故事板，我有 2 个 UIViewControllers 我试图以编程方式在它们之间切换（不确定这是否是正确的术语？）

```
 UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    UIViewController *vc = [mainStoryboard instantiateViewControllerWithIdentifier:@"BookingView"];
    [self presentModalViewController:vc animated:YES]; 
```

上面的代码稍后在我的项目中完美运行，但是当我尝试在第一个 UIViewController 的 viewdidload 方法中的 if() 中调用 if 时，它不起作用。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:55:55.463

您不应该在 viewDidLoad: 方法中执行此类任务。您正在尝试以模态方式在另一个仅在内存中分配并加载但尚不可见的视图控制器上呈现视图控制器。这意味着您的演示文稿将无法正常工作。您应该将代码移动到 viewDidAppear：

我建议您阅读本指南以了解有关视图控制器委托的基础知识：http: [//developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html%23//apple_ref/doc/uid/ TP40007457](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html%23//apple_ref/doc/uid/TP40007457)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:55:06.773

为什么不`self.storyboard`代替`[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];`？

假设您所有的视图控制器都来自同一个故事板:)

# code-reuse - 记录我公司项目中所有可重用组件的工具

> ID：12673570
> 
> 赞同：0
> 
> 时间：2012-10-01T12:47:08.880
> 
> 标签：code-reuse, reusability

我公司开发了几个项目。随着时间的推移，我们发现某些功能在不止一个项目中实现了不止一次。

现在我们的目标是将通用代码提取到可重用的组件中。

但是，我们需要一个工具来作为所有可重用组件的目录，这样当开发人员需要搜索某个功能是否已经实现到组件中时，他可以搜索这个“可重用组件”工具，如果找到，他可以阅读快速描述这个组件的作用。

我的问题是：是否有任何**免费**工具可以用来记录我们的可重用组件？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:15:14.043

是的，那里有免费的工具，例如[doxygen](http://www.doxygen.nl/)和[Javadoc](http://www.oracle.com/technetwork/java/javase/documentation/index-jsp-135444.html)，它们可用于帮助记录您的代码和组件。

但是，所有这些工具都需要程序员的帮助。我提到的两种工具都需要遵守一些纪律，以特定格式在代码中进行注释。我自信地断言，从没有特别注释的代码中自动生成*有用的文档远远超出了任何可用的（免费或昂贵的）文档工具的能力。*

如果您使用您使用的编程语言和其他工具的详细信息来编辑您的问题，您可能会得到比这个更有用的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:02:42.470

我想你正在寻找一个维基。

例如，看看[DokuWiki](http://en.wikipedia.org/wiki/DokuWiki)。它是免费软件。它只需要一个带有 PHP（无数据库）的服务器。

每个片段/组件都可以在自己的页面上（带有语法突出显示的代码标记）。您可以链接所有页面。因此，您将通过链接页面来组织适合您需求的结构。

所有用户都可以编辑（如果您想允许）这些页面。您可以限制对 wiki 的访问（因此只有您的员工可以阅读/编辑 wiki）。

* * *

当然还有很多其他的[wiki 软件](http://en.wikipedia.org/wiki/List_of_wiki_software)。

# python - 如何更改内容类型 Python

> ID：12673580
> 
> 赞同：2
> 
> 时间：2012-10-01T12:47:40.483
> 
> 标签：python, post, content-type

我想将文件上传到远程设备。如果我查找与wireshark的连接，我会得到这个

```
POST /saveRestore.htm.cgi HTTP/1.1
Host: 10.128.115.214
User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:15.0) Gecko/20100101 Firefox/15.0.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: de-de,de;q=0.8,en-us;q=0.5,en;q=0.3
Accept-Encoding: gzip, deflate
Connection: keep-alive
Referer: http://10.128.115.214/saveRestore.htm
Cache-Control: max-age=0
Content-Type: multipart/form-data; boundary=---------------------------961265085509552220604142744
Content-Length: 10708

-----------------------------961265085509552220604142744
Content-Disposition: form-data; name="restore"; filename="config(2).cfg"
Content-Type: application/octet-stream 
```

现在这表示浏览器只接受 text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8

如果我用我的脚本上传文件，它会说

```
--0a7125aebb8845ba8ab9aa21306b01f6
Content-Disposition: form-data; name="restore"; filename="Config.cfg"
Content-Type: text/plain; charset=utf-8 
```

所以这是一个错误的文件类型..

那么如何更改文件的内容类型？

到目前为止，我的代码如下所示：

```
#!/usr/bin/python

import httplib
import urllib2
from poster.encode import multipart_encode
import poster
from poster.streaminghttp import register_openers
register_openers()

params = {'restore': open("Config.cfg", "rb"), 'upload': 'PC ==>; Unit'}

datagen, headers = multipart_encode(params)

request = urllib2.Request('http://10.128.115.214/saveRestore.htm.cgi', datagen, headers)
u = urllib2.urlopen(request)
print u.read() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:11:41.237

在它的[文档中`poster.encode.MultipartParam`](http://atlee.ca/software/poster/poster.encode.html#poster.encode.MultipartParam)说：

> 如果`filetype`设置，则用作此参数的 Content-Type。如果未设置，则默认为“text/plain; 字符集=utf8”</p>

因此，不要像这样指定参数：

```
params = {'restore': open("Config.cfg", "rb"), 'upload': 'PC ==>; Unit'} 
```

像这样指定它们：

```
params = [MultipartParam('restore', open("Config.cfg", "rb"),
                         filetype = 'application/octet-stream'),
          ('upload', 'PC ==>; Unit')] 
```

# c# - 使用 Entity Framework 加载子实体时性能不佳

> ID：12673581
> 
> 赞同：2
> 
> 时间：2012-10-01T12:47:43.640
> 
> 标签：c#, asp.net, linq, entity-framework

我正在使用实体框架（代码优先）构建一个 ASP.Net 应用程序，并且我已经实现了一个存储库模式[，就像这个示例中的那样](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)。

我的数据库中只有两个表。一个叫`Sensor`一个叫`MeasurePoint`（只包含`TimeStamp`and `Value`）。一个传感器可以有多个测量点。目前我有 5 个传感器和大约 15000 个测量点（每个传感器大约 3000 个点）。

在我的一个 MVC 控制器中，我执行以下行（以获取传感器的最新 MeasurePoint）

```
DbSet<Sensor> dbSet = context.Set<Sensor>();
var sensor = dbSet.Find(sensorId);
var point = sensor.MeasurePoints.OrderByDescending(measurePoint => measurePoint.TimeStamp).First(); 
```

这个调用需要大约 1 秒的时间来执行，这对我来说感觉很重要。调用导致以下 SQL 查询

```
SELECT 
[Extent1].[MeasurePointId] AS [MeasurePointId], 
[Extent1].[Value] AS [Value], 
[Extent1].[TimeStamp] AS [TimeStamp], 
[Extent1].[Sensor_SensorId] AS [Sensor_SensorId]
FROM [dbo].[MeasurePoint] AS [Extent1]
WHERE ([Extent1].[Sensor_SensorId] IS NOT NULL) AND ([Extent1].[Sensor_SensorId] = @EntityKeyValue1) 
```

执行只需约 200 毫秒，因此时间花在了其他地方。

我在 Visual Studio Profiler 的帮助下分析了代码，发现导致延迟的调用是

```
System.Data.Objects.Internal.LazyLoadBehavior.<>c_DisplayClass7`2.<GetInterceptorDelegate>b_1(!0,!1) 
```

所以我想这与延迟加载有关。我必须忍受这样的表现还是我可以做出改进？是否是按时间排序导致性能下降，如果是，我有什么选择？

**更新：** 我已经更新了代码以显示`sensor`来自哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:52:28.273

What that will do is load the entire children collection into memory and then perform the .First() linq query against the loaded (appx 3000) children.

If you just want the most recent, use this instead:

`context.MeasurePoints.OrderByDescending(measurePoint => measurePoint.TimeStamp).First();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:51:22.253

如果这是它正在运行的查询，它会将所有 3000 个点加载到传感器的内存中。尝试直接在 DbContext 上运行查询，而不是使用导航属性，看看性能差异是什么。您的开销可能来自您不需要加载的 2999 个点。

# dojo - Dojo CheckedMultiSelect 文本换行和水平滚动

> ID：12673582
> 
> 赞同：0
> 
> 时间：2012-10-01T12:47:53.500
> 
> 标签：dojo

如果选择文本大于控件大小，如何使 DOJO CheckedMultiSelect 文本包装以及如何在同一控件中启用水平滚动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:09:45.737

您所需要的只是覆盖 CSS 规则。请参阅 jsFiddle 的工作示例：http: [//jsfiddle.net/phusick/qrSWu/](http://jsfiddle.net/phusick/qrSWu/)

**对于您的两种**需求，您都需要限制`width`. `dojox/form/CheckedMultiSelect`可以将`narrow`类添加到标记`<select data-dojo-type="dojox/form/CheckedMultiSelect" class="narrow">`或 JavaScript（通过`className`）：

```
.narrow .dojoxCheckedMultiSelectWrapper {
    width: 100px;
} 
```

对于**水平滚动**，还要添加`scroll`类 ( `class="narrow scroll"`)：

```
.scroll .dojoxCheckedMultiSelectWrapper {
    overflow-x: scroll;
} 
```

为了**包装**选项文本添加`wrap`类（`class="narrow wrap"`）：

```
.wrap .dojoxMultiSelectItemLabel {
    white-space: normal;
}

.wrap .dojoxMultiSelectItemBox {
    vertical-align: top;
    margin-top: 3px;
} 
```

根据您包含样式表的顺序，您可能需要添加`!important`.

# drupal-7 - Drupal 7 查看自定义模板

> ID：12673585
> 
> 赞同：0
> 
> 时间：2012-10-01T12:47:56.043
> 
> 标签：drupal-7, drupal-views

我创建了 1 个视图，其中包括 5 种类型的内容类型节点。

我想要做的是自定义视图模板。

前 2 个故事以其他格式显示，如完整标题、摘要和图像

最后 3 个故事只有标题。

使用视图如何实现。

或者我必须使用`$view=views_get_view_result()`方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:10:06.017

您可以将前 2 个故事创建为常规视图（页面或块，无论您要使用哪个），并将其余 3 个故事创建为第一个视图的附件。

在视图中，您应该能够创建一个附件，然后您可以将其附加到第一个视图的末尾。

![添加视图附件](../Images/b64e1e3cbd98e2738ef2f278c9636091.png)

这样，您可以为每个视图配置稍微不同的配置，但仍将它们放在同一个视图页面或块中，例如：

![在带有附件显示的视图中创建的一个块](../Images/5afda636618fdf38198503454e3509d3.png)

我在我的博客[http://nmc-codes.blogspot.ca/2012/10/views-attachment-in-drupal-7.html](http://nmc-codes.blogspot.ca/2012/10/views-attachment-in-drupal-7.html)

# spring-security - 如何使用标签库检查具有 Spring Security 的授予权限？

> ID：12673586
> 
> 赞同：0
> 
> 时间：2012-10-01T12:48:04.067
> 
> 标签：spring-security, el

我有一组 jQuery 选项卡。我只希望这些标签中的一些在它们具有正确的授予权限 impl 时显示。是否可以通过在安全标签中使用 EL 进行检查，还是我需要添加另一个角色并通过它进行检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:14:19.923

是的，您可以使用 EL：

```
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags" %>

<sec:authorize access="hasRole('authority_name_you_want_to_check_for')">
   content conditional on having required authority
</sec:authorize> 
```

# css - 垂直标签使用 CSS3 变换：旋转属性定位困难

> ID：12673590
> 
> 赞同：0
> 
> 时间：2012-10-01T12:48:14.167
> 
> 标签：css, tabs, rotation, transform

我已经设置了一个测试 FIDDLE，其中包含水平工作选项卡所需的所有工具。

还存在这些类以允许选项卡使用不同的 CSS 类在左侧或右侧垂直工作。问题是它们没有正确定位。我想这是由于变换原点属性，但我很挣扎。

[http://jsfiddle.net/H7gG8/19/](http://jsfiddle.net/H7gG8/19/)

```
.tabs {
    width:400px; height:400px;
}
.tab { 
    position:relative;
}
.tab li {
    border-radius:10px 10px 0 0; height:40px; width:110px; background:#DDD; float:left; cursor:pointer;
} 
.tab.v {
    -webkit-transform:rotate(90deg);
}
.tab li.l {
    width:180px;
}
.tab.r {
    -webkit-transform:rotate(-90deg);
}
.tab.r li {
    float:right;
}
.tabs .conts {
   height:100%; position:relative; clear:both;
}
.tabs .cont {
    background:#EEE; height:300px; position:absolute; width:100%;
}
​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:15:16.233

将选项卡容器的高度属性重置为整个选项卡框架的高度，即。高度：100%；向容器添加一个 top:-40px ，然后为垂直选项卡添加 right:0 和 top:0；

[http://jsfiddle.net/H7gG8/71/](http://jsfiddle.net/H7gG8/71/)

简单的..

# javascript - 比较两个相等的字符串返回 false

> ID：12673591
> 
> 赞同：1
> 
> 时间：2012-10-01T12:48:21.037
> 
> 标签：javascript

这是我的台词：

```
myArray[i].innerText == x 
```

以下是来自 Chrome 控制台的值：

myArray[i] = "13 毫升阿波罗釉雪利酒松露 250 毫升"

x = "13 毫升阿波罗釉雪利酒松露 250 毫升"

myArray[i].innerText == x 返回 false 为什么会这样？

这是我定义 myArray 的方式：

```
myArray= $($('#myIframe').contents()).find('body#tinymce').find('p, li'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T12:54:15.900

调试它，你很可能有一些额外的空白字符。

```
console.log(escape(myArray[i].innerText)); 
```

你可能需要[修剪它](https://stackoverflow.com/questions/498970/how-do-i-trim-a-string-in-javascript)。

或者 HTML 实体在那里。

```
var replacedString = myArray[i].innerText.replace(/&nbsp;/g," "); 
```

如果您有一堆特殊字符，则需要全部替换它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:49:57.640

你不是在比较两个字符串。

您正在将字符串与`innerText`相同字符串的属性进行比较

```
myArray[i] === x 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T12:49:53.257

看起来您应该比较`myArray[i]`而不是`myArray[i].innerText`，因为这是您分配的内容。`myArray[i].innerText`总是 yield `undefined`， if`myArray[i]`是一个字符串（除非你正在做一些奇怪的原型设计）。

# web-services - Axis2 与 JAX-WS

> ID：12673592
> 
> 赞同：4
> 
> 时间：2012-10-01T12:48:21.943
> 
> 标签：web-services, soap, jax-ws, ejb-3.0, axis2

我必须为一个项目实现基于 SOAP 的 Web 服务。我们正在考虑不同的选项，例如axis2、ejb as a web service、jax-ws，但不确定这些选项的优缺点。有人可以在这方面提供帮助。

如果有人可以指出实现基于 SOAP 的 Web 服务的任何其他替代方案，那就太好了。

提前致谢，-Csn

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T13:01:15.717

对我来说，如果您使用像 JBoss 这样的 Java EE 服务器，那么公开 Web 服务的最简单方法是创建带有注释的 EJB (JAX-WS)。

使用 WS 有点不同，但我也更喜欢 JAX-WS，因为如果使用复杂的参数（类）并添加属性，Axis2 会抛出异常。JAX-WS 为序列化的 xml 调用每个“get”和“set”。如果没有实施'set'，没问题。这是向后兼容的优势。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T16:08:56.083

我强烈建议使用[Apache CXF](http://cxf.apache.org/)来开发`SOAP`Web 服务。该堆栈基于`JAX-WS`但具有更多功能。`CXF`与`Spring`. 互联网上有很多关于如何使用这个框架创建 Web 服务的文档。如果我要开发全新的 Web 服务，我肯定会选择`Apache CXF`.

# regex - RegEx 匹配的比我想象的要多

> ID：12673593
> 
> 赞同：1
> 
> 时间：2012-10-01T12:48:24.157
> 
> 标签：regex, regex-negation

我有这个正则表达式：`CMD?(S?[1-8][0-1]|R?[1-8]|[qQ])`

它应该匹配这些情况：

所有情况都应以“CMD”开头

其次是：

1.  'S' 后跟
    1.  [1-8] 后跟
    2.  [0-1]
2.  'R' 后跟
    1.  [1-8]
3.  “q”或“Q”

但我发现它也匹配`CMD[1-8][1-0]`我无法弄清楚我做错了什么。

最后，除了这些情况外，我应该怎么做才能获得正则表达式匹配，因为我找不到否定该声明的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:52:14.463

您似乎混淆了 的含义`?`，它实际上表示“前面字符的 0 或 1”。这就是为什么你在没有`S`.

您正在寻找的正则表达式是：

```
CMD(S[1-8][01]|R[1-8]|[qQ]) 
```

**编辑：**

对不起，我错过了你问题的后半部分。

这取决于您使用的是什么实现。例如，在 Perl 中，它就像编写`!~`而不是`=~`. 否则，您可以使用所谓的“否定前瞻断言”。假设您仍然希望否定系列以 a 开头`CMD`：

```
CMD(?!S[1-8][01]|R[1-8]|[qQ]) 
```

# lotus-notes - 在 Lotus Notes 视图中隐藏空列

> ID：12673595
> 
> 赞同：2
> 
> 时间：2012-10-01T12:48:27.680
> 
> 标签：lotus-notes, lotus-domino, lotus-formula

如果整个列是空的，有没有办法在 Lotus Notes 中隐藏一列？我试过使用

```
@ThisValue = "" 
```

在列属性中，但如果至少一个值为空，而不是所有值都为空，则会导致列消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T07:32:10.760

将检查列是否为空的代码放入视图的 QueryOpen 处理程序中。根据您的检查结果，为环境变量设置一个值（fe“0”或“1”）：

`Call notesSession.SetEnvironmentVar("hidecolumn", "1")`

或者

`@SetEnvironment("hidecolumn"; "1")`

并在您的专栏中隐藏-当公式编写时`@Environment("hidecolumn") = "1"`

它适用于 LN6.x 及更高版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:56:43.913

您可以尝试使用@DbColumn。我自己没有使用/测试过它，但根据帮助，它应该在 Hide-When 中工作，即使它不适用于列值。所以也许它确实有效。我会尝试结合@Unique 来获得唯一的值来测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:10:38.563

更好的逻辑是

```
!(@Thisvalue != "") 
```

因为如果任何值不为空，这将返回 False，并且仅当它们都为空时才返回真（因为公式语言将默认对列表进行操作）。

但是，即使将“@ThisValue”替换为列的程序名称，我也无法使其在隐藏时公式中起作用。

我对这个问题的最初反应是，您将无法根据其自身的值在 Notes 客户端中隐藏列，并且在快速测试之后，如果您管理它，我会感到惊讶和非常感兴趣。

菲尔

# javascript - 通过单击带有 javascript 的按钮添加文本字段：除文本字段外的所有内容在单击时消失

> ID：12673596
> 
> 赞同：0
> 
> 时间：2012-10-01T12:48:30.017
> 
> 标签：javascript, html

我想要一个按钮，每次按下该按钮时`Add another field`都会创建一个文本字段。`<input type="text" name="pet">`

**我目前有[这个代码](http://jsfiddle.net/NcJy6/)：**

```
<html>
<head>
<script>    
function add_field() 
{
  document.write( '<input type="text" name="pet">' );
};
</script>
</head>
<body>

<form name="input" method="get">
Favourite pets:<br> 
<input type="text" name="pet">
<button type="button" onclick="add_field()">Add another field</button><br>
<input type="submit" value="Submit"><br>
</form>

</body>
</html> 
```

但是当我按下`Add another field`按钮时，我只得到一个只有一个文本字段的页面，我所有的其他内容都消失了。**如何在添加另一个文本字段的同时保留其他 html 内容？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:54:53.717

这一行：

```
document.write( '<input type="text" name="pet">' ); 
```

将用插入的标记替换整个文档。如果要追加输入字段，则需要找到要追加的表单，创建输入字段并追加。尝试类似：

```
var form = document.getElementsByTagName('form')[0],
    input = document.createElement('input');

input.setAttribute('type', 'text');
input.setAttribute('name', 'pet');
form.appendChild(input); 
```

这将`input`在表单的末尾插入。您可以使用其他方法，例如`insertBefore`将输入字段放置在您想要的位置。

或者使用 jQuery。

# python - Python：QTableWidget 中的数值排序

> ID：12673598
> 
> 赞同：2
> 
> 时间：2012-10-01T12:48:36.950
> 
> 标签：python, sorting, pyqt, qtablewidget

我需要将 QTableWidget 的第一列填充为： Row: 1, Row: 2...Row: 100 ，但排序不能按预期工作（数字上）。使用此代码排序工作正常，但我没有得到预期的文本：

```
for i in range(0, self.rows):
    item = QtGui.QTableWidgetItem()
    item.setData(Qt.DisplayRole, "Row: %s" %(i) )
    item.setData(Qt.EditRole, i)
    self.ui.tableWidget.setItem(i, 0, item) 
```

我得到：1,2,3,4... 而不是 Row: 1, Row: 2, Row: 3... 我希望 EditRole 将用于编辑目的（用于数字排序，效果很好）但我还期望显示文本，因为它是使用 DisplayRole 设置的。我可以以某种方式做到这一点，或者为排序目的编写函数是唯一的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T15:10:44.213

对于`QTableWidgetItem`,`Qt.DisplayRole`和`Qt.EditRole`的处理方式相同。

这意味着，在代码中：

```
item.setData(Qt.DisplayRole, "Row: %s" %(i) )
item.setData(Qt.EditRole, i) 
```

第二行将简单地覆盖第一行中的数据集。因此，实际上，没有单独`EditRole`的（除非重新实现`data`and`setData`函数）。

改变排序行为的标准方法是重新实现小于运算符`QTableWidgetItem`（默认情况下，它被硬编码以使用`DisplayRole`数据进行排序）。

以下子类将重现 Qt 通常对数字排序所做的事情：

```
class TableWidgetItem(QtGui.QTableWidgetItem):
    def __lt__(self, other):
        return (self.data(QtCore.Qt.UserRole).toLongLong() <
                other.data(QtCore.Qt.UserRole).toLongLong()) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T13:33:26.693

我仍然对为什么 DisplayRole 和 EditRole 没有达到我的预期感兴趣，但我已经解决了这样的问题：

```
class MyTableWidgetItem(QtGui.QTableWidgetItem):
    def __init__(self, text, sortKey):
            QtGui.QTableWidgetItem.__init__(self, text, QtGui.QTableWidgetItem.UserType)
            self.sortKey = sortKey

    #Qt uses a simple < check for sorting items, override this to use the sortKey
    def __lt__(self, other):
            return self.sortKey < other.sortKey 
```

...填充表：

```
for i in range(0, self.rows):
    item = MyTableWidgetItem("Row: %s" %(i), i)
    self.ui.tableWidget.setItem(i, 1, item) 
```

# python - argparse 什么时候停止显示没有参数的“简短帮助”？

> ID：12673599
> 
> 赞同：1
> 
> 时间：2012-10-01T12:48:38.620
> 
> 标签：python, argparse

Python 的 argparse 的某些版本在没有给出参数时会打印简短的帮助，而其他版本则不会。如何在 Python 版本中获得一致的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T14:10:34.937

如果您使用子解析器，这发生在 3.3 中。它在 3.2.3 中仍然有效。

见[http://bugs.python.org/issue16308](http://bugs.python.org/issue16308)

# php - 使用包含 PHP 内容的 JavaScript 重新加载 div

> ID：12673601
> 
> 赞同：0
> 
> 时间：2012-10-01T12:48:53.843
> 
> 标签：php, javascript

我有一个具有这种结构的 PHP 页面：

```
<?php
include 'header.php';
include 'content.php';
include 'footer.php';
?> 
```

在 header.php 中，我有一个计算数据库中一些行的函数。

```
$show =$mysql->count('someparam', $foo['bar']);
   if ($show > 0) {
       echo $show;
   } 
```

这都很好。现在，在 content.php 文件中，用户可以执行更改`$show`标题中此值的操作，但我需要重新加载页面才能看到更新后的`$show`数字。

我想用 JavaScript 解决这个问题，但不知道该怎么做。

我尝试通过在计时器上重新加载 JavaScript 来解决它，如下所示：

```
<script>
function render (){
    $('.customer-database').html(.customer-database)
}
window.setInterval(render, 500);
</script> 
```

计数器在`$show`div 类`costumer-database`中。这不起作用，因为我需要在 HTML 之后放入 HTML 代码，但我不想放入 HTML 代码。我只是想重新加载它。这可能吗？

我愿意接受 JavaScript 和 PHP 中的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:55:46.193

这应该工作：

```
function render (){
    $('.customer-database').parent().load('myscript.php .customer-database');
    ^                              ^ ^     ^          ^ ^                ^ ^
    |   select the container in    | |     |   url    | | select content | |
    |   which to reload content    | |     | to your  | |  to put in the | |
    |______________________________| |     |   page   | |    container   | |
                                     |     |__________| |________________| |
                                     | send ajax call and replace content  |
                                     |_____________________________________|
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:54:44.450

如果您知道要替换的内容区域的名称/ID 是什么，那么插入 jquery ajax 请求以仅重新加载页面的一部分是相当简单的。假设你已经包含了你的 jquery 库，你可以使用这个 javascript 块

```
path = "/path/to/my/action/"
$.ajax({
    url : path,
    success : function(response) {
        $('.customer-database').replaceWith(response);
    },
    error : function(xhr) {
        alert('Error!  Status = ' + xhr.status);
    }
}); 
```

然后你可以编写一个基本上只给你计数的动作，然后将该动作重新加载到你的元素中 - 动作以你喜欢的任何 count+html 响应

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T12:52:33.080

您可以做的是对单独的 PHP 文件的**AJAX 请求。**单独的 PHP 文件具有返回数字的代码，如您的代码：

```
$show =$mysql->count('someparam', $foo['bar']);
   if ($show > 0) {
       echo $show;
   } 
```

使用 jQuery 创建 AJAX 调用时，请参阅[http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/以获得帮助。](http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T13:02:05.497

正如其他人所描述的，您想使用 ajax。而 jQuery 在这方面非常擅长。使用 jQuery，它会像

```
//whatever you do to change the $show value as a trigger, maybe a click?
$(".show_value_button").click(function(){
  $("#header_div_id").load("header.php");
}); 
```

# jms - 何时在 Java 消息传递和队列系统中使用持久性

> ID：12673603
> 
> 赞同：8
> 
> 时间：2012-10-01T12:49:01.407
> 
> 标签：jms, activemq, rabbitmq, messaging, amqp

我正在对 (Java) 消息传递和队列系统进行贸易研究，以便即将重新设计主要 Web 应用程序的后端框架（在 Amazon 的 EC2 云上，x-large 实例）。我目前正在评估 ActiveMQ 和 RabbitMQ。

计划是有 5 个不同的队列，其中一个是死信队列。每天发送的消息数量将在 40K 到 400K 之间。由于我计划将消息内容作为指向数据存储中 XML 文件位置的指针，因此我希望消息大约为 64 个字节。但是，出于评估目的，我还想考虑在消息中发送原始 XML，平均文件大小为 3KB。

我的主要问题：每天应该在什么时候/多少条消息被持久化？考虑到我上面指定的数量，保留所有消息是否合理？我知道坚持会降低性能，也许会降低很多。但是，由于不持久化，正在使用大量 RAM。你们中的一些人会推荐什么？

另外，我知道网上有很多关于 ActiveMQ (JMS) 与 RabbitMQ (AMQP) 的信息。我已经进行了大量的研究和测试。似乎任何一种实现都适合我的需求。考虑到我上面提供的信息（文件大小和消息数量），任何人都可以指出使用我可能错过的特定供应商的原因吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T22:51:10.580

> When/how many messages should be persisted on a daily basis? Is it reasonable to persist all messages, considering the amounts I specified above?

JMS persistence doesn't replace a database, it should be considered a short-lived buffer between producers and consumers of data. that said, the volume/size of messages you mention won't tax the persistence adapters on any modern JMS system (configured properly anyways) and can be used to buffer messages for extended durations as necessary (just use a [reliable message store architecture](http://activemq.apache.org/replicated-message-store.html))

> I know that persisting will decrease performance, perhaps by a lot. But, by not persisting, a lot of RAM is being used. What would some of you recommend?

in my experience, enabling message persistence isn't a significant performance hit and is almost always done to guarantee messages. for most applications, the processes upstream (producers) or downstream (consumers) end up being the bottlenecks (especially database I/O)...not JMS persistence stores

> Also, I know that there is a lot of information online regarding ActiveMQ (JMS) vs RabbitMQ (AMQP). I have done a ton of research and testing. It seems like either implementation would fit my needs. Considering the information that I provided above (file sizes and # of messages), can anyone point out a reason(s) to use a particular vendor that I may have missed?

I have successfully used ActiveMQ on many projects for both low and high volume messaging. I'd recommend using it along with a routing engine like [Apache Camel](http://camel.apache.org) to streamline [integration](http://camel.apache.org/components.html) and [complex routing patterns](http://camel.apache.org/eip.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T15:05:21.617

消息传递系统必须用作临时存储。应用程序应设计为尽快提取消息。消息数量越多，性能就越差。如果您正在提取消息，那么将有更好的性能以及更少的内存使用。是否仍将使用持久性内存，因为消息将保留在内存中以获得更好的性能，并且如果消息类型仅是持久性的，则会在磁盘上备份。

消息持久性的决定取决于消息的重要性以及它是否需要在消息传递提供程序重新启动后继续存在。

您可能想看看 IBM WebSphere MQ。它可以满足您的要求。它具有 JMS 以及用于开发应用程序的专有 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-03T14:21:24.327

ActiveMQ 是开源 JMS 的不错选择，我可以推荐更昂贵的 TIBCO EMS 或 Solace。

但是 JMS 实际上是为一次性交付而构建的，规范中省略了更长的持久性。你当然可以去数据库，但这很重而且可能很昂贵。

我会推荐（注意：我为 CodeStreet 工作）是我们的“JMS 重播服务”。它让您可以将任何类型的 JMS 消息（或本机 WebSphere MQ 消息）存储在基于文件的高性能磁盘存储中。每条消息都会自动分配一个纳秒时间戳和一个您可以在发布时覆盖的 globalMsgID。因此，ReplayServer 可以记录 XML 消息，而您的实际消息可能只包含 globalMsgID 作为参考。也许还有一些属性？

一旦接收者接收到 globalMsgID，如果需要，它就可以从 ReplayServer 重播该消息。

但另一方面，400K*3KB 的 XML 消息对于 ActiveMQ 或其他人来说应该很容易实现。此外，您应该在发送之前压缩您的 XML 消息。

# php - PHP __sleep() 不适用于 APC

> ID：12673604
> 
> 赞同：0
> 
> 时间：2012-10-01T12:49:04.077
> 
> 标签：php, object, apc

我的功能有问题`__sleep()`。

这是我正在使用的代码。如果我`__sleep()`从类中删除函数，那么一切都会按预期工作。

```
class Test {
    private $name;

    function setName($value){
        $this->name = $value;
    }

    function getName(){
        return $this->name;
    }

    /* Works good without this function */
    public function __sleep() {
        echo 'Sleep';
    }
}

$obj = new Test;
$obj->setName('Juris');

apc_store('test', $obj);

$objAPC = apc_fetch('test');

// Output = Juris    
echo $obj->getName();
// No output and "Call to a member function getName() on a non-object" if __sleep() function is in class. Otherwise output = Juris
echo $objAPC->getName(); 
```

为什么这段代码不起作用？使用 APC 和 有什么限制`__sleep()`吗？

PHP版本：5.3.14

APC 版本：3.1.10

**从答案更新：**

如果我将`__sleep()`功能更改为此，这将起作用

```
public function __sleep() {
    return array('name');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:52:05.347

神奇的 __sleep() 方法必须返回一个应该序列化的属性名称数组，你什么都不返回。

引用[手册](http://www.php.net/manual/en/language.oop5.magic.php#object.sleep)（我的重点）：

> 它可以清理对象，并且**应该返回一个数组，其中包含应该序列化的该对象的所有变量的名称**。如果该方法没有返回任何内容，则序列化 NULL 并发出 E_NOTICE。

# android - 相同密度不同对角线长度的Android布局

> ID：12673605
> 
> 赞同：2
> 
> 时间：2012-10-01T12:49:10.927
> 
> 标签：android

我有 2 部不同的安卓手机。细节是

nexus s：480 x 800 像素，4.0 英寸（~233 ppi 像素密度）
希望 s：480 x 800 像素，3.70 英寸（~252 ppi 像素密度）

现在我的布局文件夹为 layout_hdpi 和 layout_xhdpi。现在这两款手机都属于 hdpi 手机。我有一个向左和向右填充 5dip 的控件。但在这些手机上，5dip 转换为不同的宽度，因此一部手机的边框比另一部手机的边框更宽。增加一个也会增加另一个。有人能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:36:14.857

对于不同的屏幕尺寸使用相对布局..它不会导致不同手机上不同宽度的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:01:14.890

首先`layout_hdpi`and`layout_xhdpi`应该被声明为`layout-hdpi`and `layout-xhdpi`。其次，HDPI指的是161-240（ppi）的范围。因此，您的 Nexus 手机符合 HDPI 限定符的条件，但您的 Desire S 符合 XHDPI 限定符的条件，因为 xhdpi 的范围是 241–319。

# android - Android FragmentStatePagerAdapter outofmemoryerror

> ID：12673607
> 
> 赞同：0
> 
> 时间：2012-10-01T12:49:16.417
> 
> 标签：android, android-viewpager

嗨，我正在开发一个 android 杂志应用程序。

它有很多图片。在应用程序中，我全屏显示每张图片，用户可以在图片之间滑动。

我`ViewPager`与`FragmentStatePagerAdapter`. 每件事都很好。当我第一次旋转设备时，它也可以正常工作。

但是如果我尝试几次它就会出错。错误是`outofmemoryerror`。

viewpager in`horizontal`和 in的适配器`portrait`是不同的。

任何人都可以帮助我做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:54:25.557

如果你正在使用`Bitmaps`，Bitmap 持有的内存不会被 GC 释放，我们必须手动通过调用来释放内存`bitmap.recycle()`。

请查看我对同一问题的回答：[位图大小超出 Vm 预算错误 android](https://stackoverflow.com/questions/10737582/bitmap-size-exceeds-vm-budget-error-android/10738115#10738115)

它对这个问题有通用的答案。

# events - 来自 iframed 页面的谷歌分析跟踪事件

> ID：12673609
> 
> 赞同：2
> 
> 时间：2012-10-01T12:49:26.657
> 
> 标签：events, iframe, google-analytics, tracking

我在从 iFramed 页面跟踪 GA 事件时遇到了这个问题。它正在跟踪，但显然跟踪错误。

唯一事件数据似乎还可以，总事件绝对不行......它显示了平均。一次访问产生 80 个事件，我知道这是不对的。

我没有在 GA 跟踪代码中添加任何标记。这只是一个简单的域跟踪代码。

因此，我将跟踪代码放入我的页面中，并将此页面 iFramed 放入另一个页面。这是一个简单的交互式横幅，用于跟踪点击事件。

我猜我在 GA 跟踪代码中遗漏了一些东西以使其正常工作。

有没有人遇到过这个问题，我缺少什么来正确跟踪事件？

# javascript - 如何在不使用 iframe 的情况下对一些外部 Javascript 进行沙箱处理？

> ID：12673610
> 
> 赞同：2
> 
> 时间：2012-10-01T12:49:26.573
> 
> 标签：javascript, web, sandbox

我想向网页添加一些外部脚本。这个脚本是插件，应该只能访问和修改它们分配的 dom 部分。这些脚本将由永恒的开发人员开发，我将无法手动控制它们。

我知道我可以通过为每个要运行的插件创建一个 iframe 来轻松解决这个问题。不幸的是，这个解决方案在移动设备上真的很慢。

如何在不使用 iframe 的情况下对这些脚本进行沙箱处理？（我也可以在服务器端做一些工作）

非常感谢 ：）

# java - 在 jboss 独立模式下设置数据源

> ID：12673612
> 
> 赞同：2
> 
> 时间：2012-10-01T12:49:39.707
> 
> 标签：java, jboss

我想在 jboss 独立模式下设置一个 mysql 数据源。我已经部署了mysql-connector-java-5.1.15-bin.jar，并在datasources下的standalone.xml中设置了以下数据源配置

```
<datasource jndi-name="java:jboss/datasources/MySqlDS" pool-name="MySqlDS" enabled="true" use-java-context="true">
        <connection-url>jdbc:mysql://localhost:3306/testdb</connection-url>
        <driver>mysql</driver>
        <security>
        <user-name>root</user-name>
        </security>
</datasource> 
```

当我在 Web 控制台中单击配置的数据源名称时，出现以下错误，

```
Internal server error{
"outcome" => "failed",
"failure-description" => "JBAS014739: No handler for read resource at address [
(\"subsystem\"=>"\datasource\"),
(\"data-source\"=>"\MySqlDS\"),
(\"statstics\"=>"\pool\"),
"],
"roleback" => "true"
} 
```

我没有在驱动程序部分添加任何东西，因为它不是必需的，

下面一个是设置为jboss中设置的示例数据源

```
<drivers>
      <driver name="h2" module="com.h2database.h2">
      <xa-datasource-class>org.h2.jdbcx.JdbcDataSource</xa-datasource-class
      </driver>
</drivers> 
```

请问我在这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:56:25.570

您还需要指定驱动程序类

```
 <driver-class>com.mysql.jdbc.Driver</driver-class> 
```

查看此链接[如何将我的应用程序从 AS5 或 AS6 迁移到 AS7](https://docs.jboss.org/author/display/AS7/How+do+I+migrate+my+application+from+AS5+or+AS6+to+AS7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-25T14:30:54.577

我在相同的情况下遇到了同样的问题。问题是我的 AS 没有 PostgreSQL 所需的模块。检查`jboss/modules/org`您是否有一个名为`postgresql`. 如果没有，则创建它。然后在其中创建一个名为`main`. 然后，您必须在其中有两个文件：

*   PostgreSQL JDBC JAR

*   module.xml 配置文件

根据您使用的数据库下载 JAR 文件并将其复制到此处。至于`module.xml`只是创建一个新文件并设置配置。我的看起来像这样，根据你的情况定制它：

```
<?xml version="1.0" encoding="UTF-8"?>
<module xmlns="urn:jboss:module:1.1" name="org.postgresql">
<resources>
    <resource-root path="postgresql-9.3-1100.jdbc4.jar"/>
</resources>
<dependencies>
    <module name="javax.api"/>
    <module name="javax.transaction.api"/>
</dependencies>
</module> 
```

基本上，您只需将资源路径更改为您的 JAR 文件所在的位置。

*这是 JBOSS 的一个问题，即使缺少 JDBC 驱动程序，它也不会警告您。我浪费了大量时间来寻找这个隐藏的错误：D*

# mysql - MySQL 查询最新的副本

> ID：12673613
> 
> 赞同：1
> 
> 时间：2012-10-01T12:49:42.983
> 
> 标签：mysql, duplicates

编辑：

我正在尝试做一个 MySQL 查询，它将为我提供重复项的最新条目以及没有任何重复项的条目。

这是我的桌子的样子：

导师表：

```
 mentor_id    applicant_id    mentor_count    mento_email mentor_name mentor_pass
    193     92      1       test@yahoo.com  test        1234
    194     92      2       table@yahoo.com table       4567
    195     92      3       lamp@yahoo.com  lamp        7890
    196     92      1       test@yahoo.com  test        1234
    197     92      2       table@yahoo.com table       4567
    198     92      3       lamp@yahoo.com  lamp        7890 
```

MF表：

```
 mf_id     mentor_id   dept        contact     orgname     yrs     length      sak social  char    goal    resp    emomat  res others  impact  evaluation
43      193     math dept   9111111     etc     1       1       e   e   e   e   e   e   e   e   e   good
114     196     math dept   9111111     etc     1       1       e   e   e   e   e   e   e   e   e   good
193     197     sci dept    9222222     org     2       2       n   n   n   n   n   n   n   n   n   medium
194     194     sci dept    9222222     org     2       2       n   n   n   n   n   n   n   n   n   medium
220     195     eng dept    9333333     hello       3       3       q   q   q   q   q   q   q   q   q   bad 
```

我尝试使用此查询：

```
 SELECT *
FROM mentor m1
LEFT JOIN (

SELECT mentor_name, max( mentor_id ) AS maxid
FROM mentor m
GROUP BY m.mentor_id
)m2 ON m1.mentor_name = m2.mentor_name
AND m1.mentor_id < m2.maxid
LEFT JOIN mf ON m1.mentor_id = mf.mentor_id
WHERE m1.applicant_id =833
AND m2.maxid IS NULL
ORDER BY m1.mentor_id ASC
LIMIT 0 , 30 
```

但这就是发生的事情：

```
mentor_id   applicant_id    mentor_count    mentor_email    mentor_name mentor_pass mentor_name maxid   mf_id   mentor_id   dept    contact orgname yrs length  sak social  char    goal    resp    emomat  res others  spirit  concept comm    impact  evaluation
/*there is data here but the column for mentor_name onwards is null*/ 
```

我怎样才能使导师名以后的列不为空，但仍显示最新的重复项以及没有任何重复项的列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:56:38.733

我猜你想添加`mentor.application_id = mf.application_id`到`JOIN`条件

```
select * 
from mentor 
inner join
(
    SELECT *, max(mentor_id) as maxid 
    from mf 
    group by mentor_id
) mf on mentor.mentor_id = mf.maxid AND mentor.application_id = mf.application_id
where applicant_id = 92 
```

通常，您需要一个额外的条件来获取重复项。除非在同一张表中`WHERE applicant_id = 92`有其他相同的人，否则不会重复。`applicant_id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:54:05.720

尝试

```
select * from mentor 
where mentor_id in 
(
      SELECT max(mentor_id) from mf 
      where applicant_id = 92 
      group by mentor_id
) 
```

# javascript - 如何在 JavaScript 中使字体/粗细样式的文本变为粗体

> ID：12673615
> 
> 赞同：6
> 
> 时间：2012-10-01T12:49:46.667
> 
> 标签：javascript

我需要更改 JavaScript 中文本元素的字体粗细：

我的代码在这里不起作用：

```
var btn = document.getElementById('accessibilityButton');
btn.innerHTML = 'Default Text';
btn.innerHTML.style.fontWeight = 'bold'; 
```

我究竟做错了什么？

请注意，我不想使用任何库（jQuery 等）并且正在寻找一个简单的 JS 解决方案。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-01T12:52:44.933

你需要使用：

```
btn.style.fontWeight = 'bold'; 
```

因为它是元素本身的属性。

见：http: [//jsfiddle.net/6ypS8/](http://jsfiddle.net/6ypS8/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T12:52:05.543

您应该将您的样式直接应用在您的按钮上，而不是在 button.innerHTML 上：

```
btn.style.fontWeight = 'bold'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-06T13:07:29.610

保持'return false'以防止回发。

```
<button id="btn" onclick="this.style.fontWeight = 'bold';return false;" >TEXT</button>
```

# python - Python 私有方法返回值

> ID：12673616
> 
> 赞同：0
> 
> 时间：2012-10-01T12:49:50.213
> 
> 标签：python

假设我有一个带有一个公共方法和一个私有方法的简单类。如果我在公共方法中调用私有方法 - 它应该返回一个值，还是应该将该值设置为我的对象中的一个字段，例如，

```
class Test:
    def __init__(self, path):
        self.path = path
    def __getNoOfFiles(self):
       'count files in self.path'
       return no_of_files
    def readDir(self)
        ...
        no_of_files = __getNoOfFiles() 
```

或者

```
class Test:
    def __init__(self, path):
        self.path = path
        self.no_of_files = 0
    def __getNoOfFiles(self):
       self.no_of_files = 'count files in self.path'
    def readDir(self)
        __getNoOfFiles()
        no_of_files = self.no_of_files 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:54:26.790

IMO、getter 和 setter 应该是公开的；即，不要在方法签名之前加上双下划线。同样在 Python 中，如果要在该特定类实例之外使用该值，则通常可以简单地访问该值。

关于 getter 和 setter 实用性的讨论应该会在您的第一个 OOP 步骤中为您提供更多帮助；你可以从阅读[这个问题](https://stackoverflow.com/questions/1568091/why-use-getters-and-setters)开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:58:52.657

在大多数情况下，这几乎没有什么区别，但是选择一种方式或另一种方式有一些次要的原因。如果该值可能被多次使用并且计算成本很高，则将其缓存在类实例中可能会有所帮助。但是类通常包含除了从实例返回值之外什么都不做的方法，因此 return-value 选项适合这种风格。

一般来说，任何看起来更好的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T12:52:02.537

你可以用任何一种方式来做......它没有太大的区别......（但一个重要的区别是，在第二种情况下，你正在为你的实例创建一个额外的实例属性......如果你想要它用于其他方法，那么这是合适的）。

此外，您无需在公共方法中创建*局部变量*即可使用创建的实例属性...您可以直接访问该属性`instance attribute`...

**在第二种**情况下，您不需要在公共方法中执行此操作：

```
no_of_files = self.no_of_files 
```

您可以直接*访问您的实例属性*...

你应该在`self`实例上调用你的方法......你不能只用它的名字来称呼它......

所以，你应该更换：

```
__getNoOfFiles() 
```

和：

```
self.__getNoOfFiles() 
```

`__getNoOfFiles()`并不像 Pythonic 那样——`__get_no_of_files()`只是一个*建议*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T12:52:22.133

这真的取决于你。如果你需要`no_of_files`在外面`readDir`，它可能值得保存。如果不...

请注意，在您的示例中，您应该使用`no_of_files = self.__getNoOfFiles()`: 您需要`self`方法之前的。

# c# - 如何为控制台应用程序设置自动调试

> ID：12673619
> 
> 赞同：-1
> 
> 时间：2012-10-01T12:49:53.610
> 
> 标签：c#, .net

我在控制台应用程序上开发。我成功完成了。我的要求是，该应用程序每周自动运行一次。我不知道如何设置自动调试。请任何人帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T12:51:40.360

创建控制台应用程序时，您将获得一个可执行文件`*.exe`。您可以调度`exe`使用操作系统调度。这样，您可以指定应用程序自行启动的时间和间隔。您不能将其设置为通过 Visual Studio 进行调试。

另一种方法是创建 Windows 服务应用程序，但您可能不需要它。调度是一个更好的选择。

您可能会看到这篇文章：[如何安排程序自动运行](http://www.techsupportalert.com/how_to_schedule_programs_to_run_automatically.htm)。

# javascript - 在 jQuery Mobile 中构建 .JS 的最佳方式？

> ID：12673622
> 
> 赞同：3
> 
> 时间：2012-10-01T12:50:00.613
> 
> 标签：javascript, jquery, jquery-mobile

由于 jQuery Mobile 的 changePage 方法只会加载设置了 data-role="page" 属性的元素，因此我无法在项目中使用外部 .js 文件。

我遇到的几个解决方法：

*   在第一页一次加载所有 .js。它运行良好，我可以在每个页面加载时使用事件并将其构建在不同的 .js 文件上。不过我觉得不合适。
*   在 data-role="page" div 中使用标签。它也可以，但我不知道在 HTML 中的随机位置插入有多“优雅”。
*   使用 jQuery 异步加载它。我会在新页面加载时提出请求。缺点：也不是很优雅，会产生两个请求。

我在文档中找不到有关此问题的任何信息。什么解决方案被认为是最好的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:42:06.073

不要认为很多人已经上了 jqmobile 乐队的旅行车，但因此缺乏文档。我会看看像[http://www.jqmgallery.com/](http://www.jqmgallery.com/)这样的画廊，看看人民的来源。

看看[http://m.twitpolls.com/](http://m.twitpolls.com/)与大多数其他人相比做了什么。他们汇总并删减了所有 css/js 文件。这必须是您的最佳选择。

老实说，您以后的观点/选择听起来不太好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:56:15.770

普遍接受的方法似乎是使用构建脚本（例如 Node.js jakefile [https://github.com/mde/jake](https://github.com/mde/jake)）来构建 Web 应用程序的“生产”副本，其中所需的脚本都是聚合成一个并缩小。

使用 hack 可以动态加载 JS 文件，但我认为这通常不值得。

# ajax - 使用定期 AJAX/XMLHttpRequest 调用时如何修复浏览器的内存增长？

> ID：12673623
> 
> 赞同：11
> 
> 时间：2012-10-01T12:50:01.373
> 
> 标签：ajax, memory-leaks, xmlhttprequest, refresh, intervals

我花了整个周末来详细说明我用 Dojo 编写的 Web 应用程序中的内存增长问题。

Web 应用程序将“永远运行”，因此不打算重新启动浏览器。

应用程序定期从服务器（非跨域）更新动态数据；每 5 秒进行一次 AJAX 调用以将新数据检索为 JSON。

通过让应用程序运行几个小时，我观察到浏览器内存不断增长（在最新的 Chrome 和 Firefox 上，在最新的 Windows 和 Mac OS X 上）。

起初，我认为是 Dojo 导致了这种行为。事实上，通过使用 XMLHttpRequest 对象切换到本机实现，我可以显着减少内存增长，但它仍然存在。对于每个 AJAX 请求，内存都会增长一点（大约 4-8KB）。

**我已经尝试过的：**

*我有...*

*   ...尝试使用其他框架，例如 jQuery、YUI 等*- 没有效果*
*   ...切换到使用本机 `XMLHttpRequest` 对象*- 帮助很大，但不完全*
*   ...在检索数据后停用 DOM 操作*- 无效*
*   ...通过设置为 `null` 并在每次迭代后将其删除来重置 `xhr` *- 无效*
*   ...在每次迭代后将 onreadystatechange 处理程序重置为 null 或空方法*- 无效*
*   ...重用了 `xhr` 对象和 `onreadystatechange` 处理程序，因为它总是相同的*- 没有效果*

因此，即使我对加载的数据什么都不做（如下面的第一个 StackOverflow 链接中所述），内存使用量也会增加：

**我已经阅读的内容：**

*   [带有 XMLHttpRequest 和 setInterval 的内存泄漏](https://stackoverflow.com/questions/9806115/memory-leak-with-an-xmlhttprequest-and-setinterval)
*   [使用 XMLHttpRequest 自动刷新网页内存泄漏](https://stackoverflow.com/questions/3858917/automatic-web-page-refresh-memory-leak-using-xmlhttprequest)
*   [包装的 XMLHttpRequest 函数的内存泄漏](https://stackoverflow.com/questions/7469749/memory-leak-at-a-wrapped-xmlhttprequest-function)
*   [http://forum.jquery.com/topic/memory-leaks-with-ajax-calls](http://forum.jquery.com/topic/memory-leaks-with-ajax-calls)
*   以及更多...

我的测试 HTML 代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Native XHR Async</title>
</head>
<body>
<script>

var update = document.createElement("div");
document.body.appendChild(update);

var timeout = null;
var xhr = new XMLHttpRequest();
xhr.onreadystatechange = onReadyState;

function loadData()
{
    xhr.open("GET","memory-leak.json?" + new Date().getTime());
    xhr.send(null);
}

function onReadyState()
{
   if (this.readyState === 4)
   {
       if( this.status === 200 )
       {
           update.innerHTML = "";
           update.innerHTML = this.responseText;
       }

       if( timeout !== null )
       {
           clearTimeout(timeout);
           delete timeout;
       }

       timeout = setTimeout(loadData, 1000);
   }       
}

loadData();

</script>

</body>
</html> 
```

还有我的测试 JSON（在同一目录中）：

```
{
    "errorstatus":"Okay",
    "B0":{"P":"0 Watt"},
    "E0":{"P":"28 Watt"},
    "Z0":{"P":"28 Watt"},
    "S0":{"P":"0 Watt","SOC":"74%"},
    "Z1":{"P":"0 Watt"},
    "R0":0,
    "R1":0,
    "R2":0,
    "date":"29.09.2012 09:23:19",
    "Version":"Sep 28 2012-15.22"
} 
```

我对此问题没有任何解释，因此非常感谢任何帮助。如果您需要有关此的任何进一步信息，请随时问我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T09:54:42.997

XmlHttpRequest 将缓存每个响应，这就是您附加日期以使 URL 唯一的原因。

缓存照常写入磁盘，但也将保存在 XmlHttpRequest 中，只要它存在就发出请求。

您应该为每个请求使用一个实例并将其销毁，或者确保通过 pragma 和 xhr 设置禁用缓存。

# ruby-on-rails-3 - 耙中止！UTF-8、Rails 3、ruby 1.9.3、Ubuntu 12.04 LTS 中的无效字节序列，最近更新

> ID：12673627
> 
> 赞同：0
> 
> 时间：2012-10-01T12:50:17.337
> 
> 标签：ruby-on-rails-3, utf-8, rake, rvm, ubuntu-12.04

这是堆栈跟踪，

```
$ bundle exec rake --trace 
rake aborted!
invalid byte sequence in UTF-8
/home/gautam/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:183:in `glob'
/home/gautam/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:183:in `block in have_rakefile'
/home/gautam/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:181:in `each'
/home/gautam/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:181:in `have_rakefile'
/home/gautam/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:468:in `find_rakefile_location'
/home/gautam/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:486:in `raw_load_rakefile'
/home/gautam/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:82:in `block in load_rakefile'
/home/gautam/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/gautam/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:81:in `load_rakefile'
/home/gautam/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:65:in `block in run'
/home/gautam/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/gautam/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/home/gautam/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/home/gautam/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `load'
/home/gautam/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `<main>'
/home/gautam/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
/home/gautam/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>' 
```

有人知道为什么会这样吗？几天前我更新了我的 Ubuntu 12.04 LTS，这开始发生了。

到目前为止，我已经尝试重新安装 rvm 和 gemsets，重新安装 Postgresql 并在本地安装 node.js，以便 execjs 找到它。

# mysql - 列重命名时出现Mysql错误150

> ID：12673629
> 
> 赞同：5
> 
> 时间：2012-10-01T12:50:26.183
> 
> 标签：mysql, character-encoding, alter-table

我有一个旧数据库，其列字符集为 latin1

现在我正在尝试更改 utf8 中的整个数据库，我制作了一个脚本来更改 utf8 中的所有表，如下所示：

```
ALTER TABLE `mytable` CHARACTER SET utf8; 
```

和所有这样的列：

```
ALTER TABLE `mytable` CHANGE `mycolumn` `mycolumn` varchar(200) CHARACTER SET utf8; 
```

但是在某些列上（我猜是主键和约束）我收到了这个错误：

```
Error on rename of './test/#sql-5028_217b96' to './test/mytable' (errno: 150) 
```

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T12:56:45.290

您最有可能`mycolumn`是外键的一部分。如果是这样，您必须删除约束，然后更改主键/外键的类型，然后再次添加约束。

# algorithm - 用于字符串数组的 delphi 归并排序

> ID：12673633
> 
> 赞同：0
> 
> 时间：2012-10-01T12:50:34.560
> 
> 标签：algorithm, delphi, delphi-7, pascal, mergesort

[在http://www.explainth.at/en/delphi/dsort.shtml](http://www.explainth.at/en/delphi/dsort.shtml)上找到了这个编码的合并排序（站点关闭，但尝试使用 wayback 机器或这个站点：[http ://read.pudn.com/downloads192/sourcecode/delphi_control/901147 /Sorts.pas__.htm](http://read.pudn.com/downloads192/sourcecode/delphi_control/901147/Sorts.pas__.htm)）但本质上定义的数组不是字符串数组。 `type TSortArray = array[0..8191] of Double;` 我想传递一个字符串数组，它可能会消除重复项（这将是联合？）*，并尽可能保留原始顺序，以便以后将其恢复到原始索引位置减去重复项（原始索引）*，以便可以将数组传回用于进一步处理。我正在使用非常大的字符串文件，其中包含数百万个字符串（14 到 3000 万）所以`TStringList`不是一种选择。这些大文件的最佳选择是使用字符串数组或记录数组（或者可能是单链表？？）并使用为大量数据制作的稳定算法进行排序。

1.  如何更改它以获取字符串数组？
2.  如何进一步修改以删除或至少标记重复项？
3.  是否可以存储原始索引号以将字符串放回原始位置？
4.  与单个链表相比，字符串数组或记录数组是否更适合大量字符串？

问题按重要性顺序列出，因此如果您只回答第 1 个问题就可以了。预先感谢您的所有意见。

* * *

```
procedure MergeSort(var Vals:TSortArray;ACount:Integer);
var AVals:TSortArray;

  procedure Merge(ALo,AMid,AHi:Integer);
  var i,j,k,m:Integer;
  begin
    i:=0;
    for j:=ALo to AMid do
    begin
      AVals[i]:=Vals[j];
      inc(i);
      //copy lower half or Vals into temporary array AVals
    end;

    i:=0;j:=AMid + 1;k:=ALo;//j could be undefined after the for loop!
    while ((k < j) and (j <= AHi)) do
    if (AVals[i] < Vals[j]) then
    begin
      Vals[k]:=AVals[i];
      inc(i);inc(k);
    end else
    begin
      Vals[k]:=Vals[j];
      inc(k);inc(j);
    end;
    {locate next greatest value in Vals or AVals and copy it to the
     right position.}

    for m:=k to j - 1 do
    begin
      Vals[m]:=AVals[i];
      inc(i);
    end;
    //copy back any remaining, unsorted, elements
  end;

  procedure PerformMergeSort(ALo,AHi:Integer);
  var AMid:Integer;
  begin
    if (ALo < AHi) then
    begin
      AMid:=(ALo + AHi) shr 1;
      PerformMergeSort(ALo,AMid);
      PerformMergeSort(AMid + 1,AHi);
      Merge(ALo,AMid,AHi);   <==== passing the array as string causes AV breakdown here
    end;
  end;

begin
  SetLength(AVals, ACount);
  PerformMergeSort(0,ACount - 1);
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T16:46:16.447

回答第二个问题：合并排序修改与重复删除。应该适用于字符串。

```
//returns new valid length
function MergeSortRemoveDuplicates(var Vals: array of Integer):Integer;
var
  AVals: array of Integer;

   //returns index of the last valid element
  function Merge(I0, I1, J0, J1: Integer):Integer;
  var
    i, j, k, LC:Integer;
  begin
    LC := I1 - I0;
    for i := 0 to LC do
      AVals[i]:=Vals[i + I0];
      //copy lower half or Vals into temporary array AVals

    k := I0;
    i := 0;
    j := J0;
    while ((i <= LC) and (j <= J1)) do
    if (AVals[i] < Vals[j]) then begin
      Vals[k] := AVals[i];
      inc(i);
      inc(k);
    end else  if (AVals[i] > Vals[j]) then begin
      Vals[k]:=Vals[j];
      inc(k);
      inc(j);
    end else begin //duplicate
      Vals[k] := AVals[i];
      inc(i);
      inc(j);
      inc(k);
    end;

    //copy the rest
    while i <= LC do begin
      Vals[k] := AVals[i];
      inc(i);
      inc(k);
    end;

    if k <> j then
      while j <= J1 do begin
        Vals[k]:=Vals[j];
        inc(k);
        inc(j);
      end;

    Result := k - 1;
  end;

 //returns index of the last valid element

  function PerformMergeSort(ALo, AHi:Integer): Integer; //returns
  var
    AMid, I1, J1:Integer;
  begin

  //It would be wise to use Insertion Sort when (AHi - ALo) is small (about 32-100)
    if (ALo < AHi) then
    begin
      AMid:=(ALo + AHi) shr 1;
      I1 := PerformMergeSort(ALo, AMid);
      J1 := PerformMergeSort(AMid + 1, AHi);
      Result := Merge(ALo, I1, AMid + 1, J1);
    end else
      Result := ALo;
  end;

begin
  SetLength(AVals, Length(Vals) div 2 + 1);
  Result := 1 + PerformMergeSort(0, High(Vals));
end;

//short test
var
  A: array of Integer;
  i, NewLen: Integer;
begin
  Randomize;
  SetLength(A, 12);
  for i := 0 to High(A) do
    A[i] := Random(10);
   NewLen := MergeSortRemoveDuplicates(A);
   SetLength(A, NewLen);
   for i := 0 to High(A) do
     Memo1.Lines.Add(IntToStr(A[i]))
  end; 
```

字符串的简单修改：

```
function MergeSortRemoveDuplicates(var Vals: array of String):Integer;
var
  AVals: array of String; 
```

和测试用例：

```
var
  List: TStringList;
  Arr: array of string;
  i, n: Integer;
begin
  with TStringList.Create do try
    LoadFromFile('F:\m2.txt'); //contains some equal strings
    SetLength(Arr, Count);
    for i := 0 to Count - 1 do
      Arr[i] := Strings[i];
  finally
    Free
  end;
  n := MergeSortRemoveDuplicates(Arr);
  for i := 0 to n - 1 do
    Memo1.Lines.Add(Arr[i]);
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T16:26:56.430

1.  您需要将声明 TSortArray 从 double 数组修改为字符串数组（或 MyRecord 数组）

    合并嵌套过程中的比较例程需要与字符串兼容。检查确定是否为 AVal[x] < / > AVal[y] 的任何地方。Delphi 有这方面的程序（AnsiCompareText / AnsiCompareStr 取决于您是否需要区分大小写）

    那*应该*可以，但是如果您在之前的尝试中没有这样做，那么 Delphi 应该抱怨类型不匹配而不是提供 AV，所以可能还有其他事情发生

2.  我认为重复检查应该在排序后进行 - 它只需要对数据进行一次扫描

3.  如果要存储原始索引数据，则可能需要使用记录数组（数据：字符串；原始索引：整数）。然后需要修改 Merge 过程中的代码以将 Vals[x].Data 传递给比较例程。在调用 Merge 过程之前填充 OriginalIndex 值将是一个快速扫描

4.  说实话，不是 100% 确定 - 使用链表移动大块连续的数据比使用数组更容易，而且数组不需要弄乱指针。如果您的数据集足够大，您甚至可能需要求助于流式传输到磁盘，这可能比这些点中的任何一个更能推动您的选择。

# python - 用 C 应用程序打包 numpy/scipy 和其他 Python 包？

> ID：12673637
> 
> 赞同：0
> 
> 时间：2012-10-01T12:51:24.067
> 
> 标签：python, package, setuptools, distutils, software-distribution

如果我有一个应用程序是用 Python 编写的，并且有 numpy 和 scipy 等依赖项和 C 的一部分，我如何将它打包为可执行文件（例如对于 Linux）或以不依赖于安装的方式作为源分发numpy/scipy 和其他 Python 模块？即是否可以将 numpy/scipy 打包成二进制文件？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:46:54.367

如果您想要一个独立的可执行文件，我建议您尝试[PyInstaller](http://www.pyinstaller.org/)。它是跨平台的（Windows、Linux、MacOS X 等），并且对许多具有二进制依赖项的[包（包括](http://www.pyinstaller.org/wiki/SupportedPackages)*numpy*）提供了非常广泛的开箱即用支持。

# php - 代码提示/代码完成 PHPStorm

> ID：12673644
> 
> 赞同：0
> 
> 时间：2012-10-01T12:51:51.750
> 
> 标签：php, plugins, phpstorm

当我启动我的 PhpStorm 时，我对 php/js/... 的代码提示不再起作用。只有 HTML 和 CSS 似乎工作。很烦人，我找不到解决方法。有人对phpstorm有同样的问题吗？如果是这样，请分享？我的一个朋友一年前遇到了同样的问题，但从未修复它（并停止开发），所以这不是答案..

没有关于你的喜好等的jibberjabber，一切都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:03:34.630

在 Dev： ctrl space 没有做任何事情（当然）。

通过安装 3 个旧版本和 2 个测试版来修复它。更新其中一个似乎可以解决它。很奇怪。

# android - Android键盘在点击/焦点/ requestFocus / inputmanager show_forced时不显示

> ID：12673645
> 
> 赞同：1
> 
> 时间：2012-10-01T12:51:57.163
> 
> 标签：android, keyboard, focus

我遇到了android软键盘的问题。有时键盘不会弹出，看起来editText没有获得焦点。光标已设置并闪烁，但 editText 的边框没有改变（通常为蓝色或橙色焦点）。

应用程序的其余部分运行良好，但每个 editText 都卡住了。我尝试执行 requestFocus()（返回 true）并在调试时通过 InputManager 或使用 onFocuschange- 和 onClickListener 显示键盘。没有变化。我确信正确的 editText 具有窗口的焦点 (getCurrentFocus())。我无法想象这是一个内存问题，因为 GC 日志显示 15-30% 是免费的。

我不能发布任何代码，因为应用程序非常庞大，而且问题“随机”出现，没有任何错误日志或异常。

感谢您的任何建议 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:42:45.967

解决了。inputManager activeElement 是一个关闭的对话框，解决方案是在正确的时刻调用 looper.quit() 。

# asp.net-mvc-4 - CSS 捆绑和 Internet Explorer 的限制

> ID：12673646
> 
> 赞同：2
> 
> 时间：2012-10-01T12:51:57.727
> 
> 标签：asp.net-mvc-4, bundling-and-minification

当我将 jquery ui 添加到包中时，我最终得到：

```
bundles.Add(new StyleBundle("~/Content/css").Include(
                            "~/Content/themes/base/jquery.ui.core.css",
                            "~/Content/themes/base/jquery.ui.resizable.css",
                            "~/Content/themes/base/jquery.ui.selectable.css",
                            "~/Content/themes/base/jquery.ui.accordion.css",
                            "~/Content/themes/base/jquery.ui.autocomplete.css",
                            "~/Content/themes/base/jquery.ui.button.css",
                            "~/Content/themes/base/jquery.ui.dialog.css",
                            "~/Content/themes/base/jquery.ui.slider.css",
                            "~/Content/themes/base/jquery.ui.tabs.css",
                            "~/Content/themes/base/jquery.ui.datepicker.css",
                            "~/Content/themes/base/jquery.ui.progressbar.css",
                            "~/Content/themes/base/jquery.ui.theme.css" 
```

Internet Explorer[限制](https://stackoverflow.com/questions/9906794/internet-explorers-css-rules-limits)加载 31 个样式表，其中 jquery 占用了 12 个。添加 yui reset、base 和 fonts 我已经有 15 个样式表，没有加载任何网站样式或插件样式表。

显然，捆绑后一切正常，因为只生成了一个样式表。我的第一直觉是使用那些使用 @Import 的那些，但这会导致捆绑[失败](https://stackoverflow.com/questions/11970293/mvc4-bundling-css-failed-unexpected-token-found-import)或不缩小。

**除了更少的样式表之外，最好的解决方法是什么？** 我目前的解决方案是一种`#if DEBUG`构造，但有更好的方法吗？

```
#if DEBUG
     bundles.Add(new StyleBundle("~/Content/css").Include(
                        "~/Content/themes/base/jquery.ui.all.css"));
#else
     bundles.Add(new StyleBundle("~/Content/css").Include(
                            "~/Content/themes/base/jquery.ui.core.css",
                            "~/Content/themes/base/jquery.ui.resizable.css",
                            "~/Content/themes/base/jquery.ui.selectable.css",
                            "~/Content/themes/base/jquery.ui.accordion.css",
                            "~/Content/themes/base/jquery.ui.autocomplete.css",
                            "~/Content/themes/base/jquery.ui.button.css",
                            "~/Content/themes/base/jquery.ui.dialog.css",
                            "~/Content/themes/base/jquery.ui.slider.css",
                            "~/Content/themes/base/jquery.ui.tabs.css",
                            "~/Content/themes/base/jquery.ui.datepicker.css",
                            "~/Content/themes/base/jquery.ui.progressbar.css",
                            "~/Content/themes/base/jquery.ui.theme.css"));
#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:59:44.343

如果您真的需要所有主题，只需`jquery.ui.all.css`在 DEBUG 和 RELEASE 模式中包含。

```
bundles.Add(new StyleBundle("~/Content/css").Include(
    "~/Content/themes/base/jquery.ui.all.css")); 
```

这样，在 DEBUG 模式下你会得到一个 CSS 文件，而在 RELEASE 模式下你会得到一个带有缓存头的压缩 CSS 文件。

# c# - Async-Await 的真正优势？

> ID：12673650
> 
> 赞同：6
> 
> 时间：2012-10-01T12:52:09.787
> 
> 标签：c#, performance, async-await

早些时候，我发布了[这个](https://stackoverflow.com/questions/12634551/difference-between-applying-async-await-at-client-and-at-service)与在客户端或服务中应用 Async-Await 相关的问题。在继续这个问题之前请阅读这个问题，因为它与问题紧密相关。

根据答案，我测试了 C# 4.0 (TPL) 和 C# 5.0 (Async - Await) 的代码。我使用服务提供的方法的异步和同步版本调用服务，并比较每种情况下使用的线程数。以下是我用来测试所用资源的代码：

**主要方法**

```
List<Task<string>> tasksList = new List<Task<string>>();
List<int> asyncThreads = new List<int>();
List<int> tplThreads = new List<int>();
Stopwatch watch = new Stopwatch();
watch.Start();

// Call the Async version of the method
for (int i = 0; i < 500; i++)
{
    tasksList.Add(GetNameFromServiceAsync("Input" + i.ToString(), asyncThreads));
}

Task.WaitAll(tasksList.ToArray());

watch.Stop();

foreach (var item in asyncThreads.Distinct())
{
    Console.WriteLine(item);
}

Console.WriteLine("(C# 5.0)Asynchrony Total Threads = " + asyncThreads.Distinct().Count());
Console.WriteLine(watch.ElapsedMilliseconds.ToString());

watch.Restart();

tasksList.Clear();

// Call the normal method
for (int i = 0; i < 500; i++)
{
    tasksList.Add(GetNameFromService("Input" + i.ToString(), tplThreads));
}

Task.WaitAll(tasksList.ToArray());

watch.Stop();

foreach (var item in tplThreads.Distinct())
{
    Console.WriteLine(item);
}

Console.WriteLine("(C# 4.0)TPL Total Threads" + tplThreads.Distinct().Count());

Console.WriteLine(watch.ElapsedMilliseconds.ToString()); 
```

**异步和同步调用到服务**

```
static async Task<string> GetNameFromServiceAsync(string name, List<int> threads)
{
  Console.WriteLine(" Start Current Thread : " + System.Threading.Thread.CurrentThread.ManagedThreadId);
    var task = await client.GetNameAsync(name);
    threads.Add(System.Threading.Thread.CurrentThread.ManagedThreadId);
   // Console.WriteLine("End GetNameFromServiceAsync Current Thread : " + System.Threading.Thread.CurrentThread.ManagedThreadId);
    return task;
}

static Task<string> GetNameFromService(string name, List<int> threads)
{

    var task = Task<string>.Factory.StartNew(() =>
        {
            threads.Add(System.Threading.Thread.CurrentThread.ManagedThreadId);
         //   Console.WriteLine("GetNameFromService Current Thread : " + System.Threading.Thread.CurrentThread.ManagedThreadId);
            return client.GetName(name);
        });

    return task;
} 
```

现在我已经研究了答案并找出了以下结果：

*   如果我对服务进行 500 次调用，它只使用 4-5 个线程。
*   TPL 调用产生大约 44-45 个线程。
*   异步调用的时间约为 17 - 18 秒
*   TPL 调用时间约为 42 - 45 秒。

我想对我的发现有一些反馈，以便它对其他社区成员也有用。这是我之前问题的答案吗？

**编辑**

问：我的观察得出结论，如果我们使用 Async-Await 而不是 TPL 的 Task.Factory.startNew ，那么它将消耗更少的线程。这有多正确？如果不是，那么提出这种比较的正确方向是什么？

问：当我正在学习 async - await 时，我想通过某种比较和可靠的代码来证明它的价值。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-01T13:03:59.753

客户端`async`（与同步代码相比）通常会以少量内存*成本提高响应速度。*

服务器端`async`（与同步代码相比）通常通过减少内存/线程使用来提高可伸缩性。这些优势也适用于客户端`async`（与多线程代码相比）。

这两种都是极端的概括，当然在某些情况下它们是错误的。

**更新：**

> 我的观察得出结论，如果我们使用 Async-Await ...，那么它将消耗更少的线程。

`async`/`await`启用可维护的异步代码。它们本身与创建线程没有任何关系。但是，它们通常与`Task.Run`（或`Task.Factory.StartNew`）一起用于创建后台任务。

> 当我正在学习 async - await 时，我想通过某种比较和可靠的代码来证明它的价值。

`async`并且`await`是编译器转换。它们使编写异步程序变得更容易——仅此而已。

如果您将它们与同步代码进行比较，那么您通常会看到改进的响应性和/或可伸缩性。如果您将它们与现有的异步代码进行比较，那么它们的效率通常会*稍低*，但在代码可维护性方面弥补了这一点。

# c# - DOC 文件中的图片

> ID：12673653
> 
> 赞同：0
> 
> 时间：2012-10-01T12:52:22.093
> 
> 标签：c#, ms-office, office-interop

我有 DOC 格式的文件（MS Word 97-2003），我想获取此文件中使用的所有图像的列表。我尝试在下面的代码中使用“Microsoft.Office.Interop.Word”命名空间

```
Application application = new Application();
Document document = application.Documents.Open(dataPath);

var words = document.InlineShapes;
int count = words.Count;

for (int i = 0; i < count; i++)
{
    if (words[i] != null)
    {
        Console.WriteLine("{0} : {1}", i, words[i].PictureFormat);
    }
} 
```

但我在这个文件中找不到任何图像（实际上存在两个图像）。也许我做错了什么？你能推荐我任何图书馆，这会很容易。我无法将文件转换为 DOCX

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:02:10.007

用于`document.InlineShapes`抓取图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T12:55:51.477

这可能很有趣，但在这种情况下，我认为编号从 1 开始。这就是为什么你会得到 COMException：“集合中不存在元素”。

尝试：

```
for (int i = 1; i <= count; i++)
{
    if (words[i] != null)
    {
        Console.WriteLine("{0} : {1}", i, words[i].PictureFormat);
    }
} 
```

# c# - 将接口扩展为抽象类

> ID：12673657
> 
> 赞同：19
> 
> 时间：2012-10-01T12:52:31.157
> 
> 标签：c#, oop

我有一个应该移动一些形状的界面（移动）。

```
interface Move { move(); }
abstract class Shape : Move

class Circle : Shape
class Square : Shape
class Triangle : Shape 
```

我的疑问是，我必须有一个可以移动 Shapes 的界面，但只有 Circle 和 Triangle 应该能够移动，那么如何从 Square 中“删除”界面？我应该从 Shape 中删除接口并在 Circle 和 Triangle 上手动添加它吗？我对此有点困惑。希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-01T12:54:35.237

你应该像这样设置你的类：

```
interface IMovable { move(); } 
abstract class Shape : { } 

class Circle : Shape, IMovable { } 
class Square : Shape { } 
class Triangle : Shape, IMovable { } 
```

如果不是每个形状都可以移动，那么`Shape`就不能实现接口。另请注意，我将您的界面重命名为`IMovable`，这不是什么大不了的事，但它更容易被接受并且命名约定更好。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-10-01T12:55:36.060

您不能从继承树中删除接口。

您的模型似乎需要两个抽象类 -`Shape`和`MovableShape`.

```
interface IMove { move(); } 
abstract class Shape : {} 
abstract class MovableShape : IMove, Shape {} 

class Circle : MovableShape{}
class Square : Shape{}
class Triangle : MovableShape{} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T12:56:03.137

您应该让自己更熟悉接口、类和 OO 背后的想法。您要说明的是以下内容：

*   每个形状都可以移动。
*   正方形是一种形状。
*   但是 Square 不能移动。

显然这是没有意义的。所以你必须调整你的班级设计。要么每个形状都可以移动，Shape（和 Square）应该实现 Move，或者不是每个形状都可以移动，那么 Shape 不应该实现 Move。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-01T12:56:16.883

试试这个：

```
interface IMove { move(); }
abstract class Shape { }

class Circle : Shape, IMove { }
class Square : Shape { }
class Triangle : Shape, IMove { } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-01T13:04:51.790

其他选项可能只是`IMove.Move`在类中实现方法`Shape`并默认抛出一个`NotSupportedException`。

```
public abstract class Shape : IMove 
{
     public virtual void Move()
     { 
         throw new NotSupportedException();
     }
} 
```

因此，归根结底，“任何形状都可以是可移动的”，但“可移动的形状应该提供自己的移动实现方式”。

最后，让我们假设有一堆形状以相同的方式移动。您将创建一个`DefaultMovableShape`抽象类 deriving `Shape`，它会覆盖`Shape.Move`虚拟方法。

```
public abstract class DefaultMovableShape 
{
     public override void Move()
     {
           // Do stuff
     }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-01T17:47:18.547

最佳答案将取决于这些类的用例和环境。作为开发应用程序或框架的团队的一部分，采用该团队使用的设计模式比寻求“完美”的解决方案更可取，因为它会使其他人更容易采用和维护您的代码。

您期望如何使用和扩展这些类也很重要。您认为“Square”将来需要可移动吗？Shape 的可移动性总是静态的，还是作为动态属性更有用？Move() 对非 Shapes 的类有任何价值吗？如果可移动性可用作动态属性，请考虑：

```
public abstract class Shape
{
     public bool isMovable()
     {
         return false;
     }

     public virtual void Move()
     { 
         if (!isMovable() {
             throw new NotSupportedException();
         } else {
             throw new BadSubclassException();
         }
     }
} 
```

然后，您的子类可以覆盖 isMovable 以提供静态或动态行为，并且可以随着时间的推移进一步修改或子类化，只要您的文档明确说明 isMoveable 应该始终在调用 Move 之前。默认行为应该基于您期望使用您的代码的其他人的期望，基于他们如何实现相关的设计模式。

通过查看集合类的可变性在不同框架中如何演变的历史，可以找到做出这些决定所面临挑战的一个很好的例子。有些设计将可变类（集合、数组、字典等）作为基类，在子类中实现不变性，反之亦然。这两种方法以及动态方法都有有效的论据，但对于框架的用户来说，最重要的因素是***一致性，***因为正确的实际上是最容易使用的问题，提供安全性和性能不是妥协。

# mongodb - 使用 Mongo TTL 的未来日期

> ID：12673659
> 
> 赞同：2
> 
> 时间：2012-10-01T12:52:35.807
> 
> 标签：mongodb

我们目前正在试验 Mongo 的新 TTL 功能，并希望记录根据记录创建时间的“未来”日期到期。这是因为不同的记录可以有不同的有效期。

例如，像这样：

```
db.createCollection("sushi")
db.sushi.ensureIndex({"best_before": 1}, {expireAfterSeconds: 1})
db.sushi.insert({name: "ngiri", best_before: new Date('2012/10/02')}) 
```

但是在我们最初的测试中，如果索引日期字段在创建记录时是将来的，则不会从集合中删除文档。有什么理由不应该这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:30:59.520

看起来是夏令时让我来到这里。学习到教训了。

# http - 需要元标记使用浏览器超时保持活动

> ID：12673661
> 
> 赞同：2
> 
> 时间：2012-10-01T12:52:39.863
> 
> 标签：http, connection, meta-tags, keep-alive, page-refresh

我正在尝试解决这个问题，但我有一些疑问。如何使用这个标签？

```
<meta http-equiv="Keep-Alive:timeout=600" content="600" /> 
```

或者

```
<meta http-equiv="connection:Keep-Alive" content="600" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:03:30.747

无法使用纯 HTML 发送保持*活动信号；*这是服务器设置。请看这里：[如何启用keep-alive？](https://stackoverflow.com/questions/8232068/how-can-i-enable-keep-alive)

您可以使用 HTML 元标记做更多关于浏览器缓存的事情。如果您想每 600 秒刷新一次页面，则`http-equiv="refresh"`可以完成工作（但这里同样有一些更强大的服务器端解决方案）。这实际上取决于您实际尝试做的事情；有了更多详细信息，我们一定能够为您提供进一步的帮助。

# cocoa - 如何在 PopUp 样式的 NSPathControl 中设置所选项目？

> ID：12673664
> 
> 赞同：1
> 
> 时间：2012-10-01T12:52:46.150
> 
> 标签：cocoa

我有`NSPathControl`弹出式风格。当我尝试选择其他“预定义”位置时 - 不会发生任何变化。

例子：

```
-------------
选择...
-------------
一些 MacBook
一些桌面
一些高清
等等。
-------------

```

默认情况下，例如“某些 macBook”被选中，但是当我尝试选择其他的，例如“某些 HD”时，没有任何变化：弹出菜单消失，默认选择显示相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:23:10.303

设置和连接 NSPathControl

。H

```
 @property (nonatomic, weak) IBOutlet NSPathControl pathControl; 
```

.m

```
 -(void) awakeFromNib {
 // Give Path control some value
      [_pathControl setURL:[NSURL fileURLWithPath:@"/Users/Username/MyPath" isDirectory:YES]];
 } 
```

连接 IB 中的操作。

***注意：我注意到如果您使用绑定对象进行连接，此操作将不会返回值。***如果您使用绑定，则需要使用一些 KVC 陷阱的解决方案。

```
-(IBAction) pathControlClicked:(id)sender {
NSPathControl* pathCntl = (NSPathControl *)sender;

NSPathComponentCell *component = [pathCntl clickedPathComponentCell];   // find the path component selected
[pathCntl setURL:[component URL]];          // set the url to the path control

_ivarStringVariable=component.URL.path;

// If you want to configure pathComponentCells here is place to do it.

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T09:05:14.423

我不知道为什么会存在这种行为，这对用户来说非常混乱。

我通常只是通过实现委托方法来“禁用”它：

```
- (void)pathControl:(NSPathControl *)pathControl willPopUpMenu:(NSMenu *)menu {
    // We don't want to show the useless "parent folders" menu items, as they are very confusing.
    while ([[menu itemArray] count] >= 4) {
        [menu removeItemAtIndex:3];
    }
} 
```

希望这可以帮助！

# r - R - 如何使用应用（或某些变体）来替换嵌套循环

> ID：12673665
> 
> 赞同：1
> 
> 时间：2012-10-01T12:52:46.883
> 
> 标签：r, nested, apply

我已经在论坛上搜索了一段时间，但我似乎无法找出我的问题的答案（尽管我已经接近了几次）。如果这已经在其他地方得到回答并且我错过了，我很抱歉。

我正在使用 HSAUR2 库中的埃及头骨数据。我将通过下面的代码解释我的问题。我首先加载头骨数据并在其上运行统计摘要（例如箱线图、平均值、标准开发人员等）。这些摘要（此处未显示）按变量（头骨数据的第 2-5 列）和“纪元”（头骨数据的第 1 列）细分。

```
library(HSAUR2)  # load the skulls data
head(skulls)
#     epoch  mb  bh  bl nh
# 1 c4000BC 131 138  89 49
# 2 c4000BC 125 131  92 48
# 3 c4000BC 131 132  99 50
# 4 c4000BC 119 132  96 44
# 5 c4000BC 136 143 100 54
# 6 c4000BC 138 137  89 56 
```

然后我调用 powerTransform（`car`包的一部分）来建议适当的转换来转换数据，以便生成的分布“更正常”。我对每个变量/时代组合都有一个转换。

```
library(car)
tfms_mb <- by(skulls$mb,skulls$epoch, function(x) powerTransform(x))
tfms_bh <- by(skulls$bh,skulls$epoch, function(x) powerTransform(x))
tfms_bl <- by(skulls$bl,skulls$epoch, function(x) powerTransform(x))
tfms_nh <- by(skulls$nh,skulls$epoch, function(x) powerTransform(x)) 
```

为了提取系数，我使用`sapply`.

```
mbc <- sapply(tfms_mb,coef)
bhc <- sapply(tfms_bh,coef)
blc <- sapply(tfms_bl,coef)
nhc <- sapply(tfms_nh,coef) 
```

**问题：**

如何对每个变量/纪元对应用适当的转换？我目前正在使用该`bct()`函数（来自`TeachingDemos`包）来应用转换，我可以计算出如何使用一个设定值来做到这一点（例如，将所有数据提高到 1.5 的幂）：

```
library(TeachingDemos)
by(skulls[,-1], skulls[,1], function(x) { bct(x,1.5)}) 
```

我的问题是，如何替换上一行中的“1.5”，以循环遍历 mbc、bhc 等中的系数并将正确的功率应用于每个变量/时期组合？

我已经阅读了`apply`几个小时的功能系列以及`plyr`包装，但这个让我很难过！任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T04:29:33.660

这是一个`data.table`节省内存和时间的解决方案

```
library(data.table)
SKULLS <- data.table(skulls)

SKULLS[, lapply(.SD, function(x){bct(x,coef(powerTransform(x)))}),by = epoch] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:35:25.450

这是使用`lapply`两次的解决方案：

```
library(HSAUR2)
library(car)
library(TeachingDemos) 

do.call("rbind",
   lapply(unique(skulls[["epoch"]]),
          function(x) { 
             coefs <- coef(powerTransform(subset(skulls, epoch == x)[ , 2:5]));
             do.call("cbind", 
               lapply(seq(length(coefs)),
                function(y) bct(subset(skulls, epoch == x)[ , (y+1)], coefs[y])))

          }
    )
) 
```

# javascript - 使用 Javascript 更改 URL 时 IE 中的权限被拒绝错误

> ID：12673666
> 
> 赞同：1
> 
> 时间：2012-10-01T12:52:49.027
> 
> 标签：javascript, security, internet-explorer, permission-denied

我正在从主（父）窗口打开一个弹出窗口，并为会话传递主窗口 cookie。

两个窗口都是不同的站点，我使用 cookie 来共享一些信息。那是站点 www.site1.com 的主窗口和 www.site-two.com 的打开弹出窗口。

但是，如果我注销主（父）窗口并清除会话 cookie，然后我在 IE 中刷新弹出窗口说，权限被拒绝。

但在 Firefox、Chrome 中运行良好。

在 site-two.com 中，popup.html

```
<script src="www.site1.com/JS/logoff.js" /> 
```

在 Site1.com 的 logoff.js 中

```
function ClosePopup(){

 self.opener.location = self.location.href; // Error permission denied 
```

}

**self.opener**的所有属性都说“拒绝访问”

可能是什么原因？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T10:06:07.957

这是针对 Untrusted Uncertificate 相关问题...

要变通解决此问题，请将受影响的网站添加到 Internet Explorer 中的受信任站点安全区域。若要这样做，请按照下列步骤操作： 启动 Internet Explorer。在工具菜单上，单击 Internet 选项。在安全选项卡上，单击受信任的站点，然后单击站点。在“将此网站添加到区域”框中，键入受影响的网站的 URL，然后单击“添加”。单击确定。

# workflow-foundation-4 - Workflow Foundation 4 Imports 面板未刷新

> ID：12673667
> 
> 赞同：0
> 
> 时间：2012-10-01T12:52:54.393
> 
> 标签：workflow-foundation-4

我想将一个新的引用导入到我的 Workflow Designer 中，但是我遇到了一个奇怪的问题。

这是我导入参考的代码。

```
var root = GetRootElement();
VisualBasicSettings vbs = VisualBasic.GetSettings(root);
vbs.ImportReferences.Add(new VisualBasicImportReference { Assembly = Assembly.Load("Castle.Core").FullName, Import = "Castle.Core.Configuration.Xml" });

private object GetRootElement()
{
     var modelservice = workflowDesigner.Context.Services.GetService<ModelService>();
     if (modelservice == null)
         return null;
     var rootmodel = modelservice.Root.GetCurrentValue();
     return rootmodel;
} 
```

它在我第一次加载我的设计器时工作，程序集很好地添加到哈希集 ImportReferences 然后我还在“导入”面板中看到命名空间。但是当我在用户通过选择器对话框选择 dll 时调用上述方法时，我调用上面的代码，程序集也很好地添加到 ImportReferences，但是“导入”面板没有刷新......

有任何想法吗 ？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:43:13.003

您是否尝试过[DesignerView.OnReferenceUpdated](http://msdn.microsoft.com/en-us/library/system.activities.presentation.view.designerview.onreferenceupdated.aspx)？看来您正在寻找什么：

> 如果添加了引用的程序集，则会将在程序集中找到的类型的命名空间添加到导入的命名空间列表中。如果删除了引用的程序集，则程序集中找到的类型的命名空间将从导入的命名空间列表中删除。

使用示例：

```
var designerView = workflowDesigner.Context.Services.GetService<DesignerView>();
designerView.OnReferenceUpdated(assemblyName, true/false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:11:32.933

实际上，命名空间很好导入，它被隐藏在上面的下拉列表中。

这是导入命名空间的最简单代码。 [http://blogs.msdn.com/b/tilovell/archive/2011/11/02/wf4-adding-vb-namespace-imports-to-your-workflow-programmatically.aspx](http://blogs.msdn.com/b/tilovell/archive/2011/11/02/wf4-adding-vb-namespace-imports-to-your-workflow-programmatically.aspx)

# svn - 我可以对 svn 分支使用 ediff 吗？

> ID：12673673
> 
> 赞同：2
> 
> 时间：2012-10-01T12:53:13.963
> 
> 标签：svn, emacs, diff, emacs-ediff

我经常在需要合并到我的分支中的另一个颠覆分支中发生冲突的更改；ediff 将在很大程度上使这变得更容易。

但是，似乎 psvn.el 和 ediff 仅支持针对同一分支中的修订进行差异化，除非我读错了文档。最好点击热键，提示输入分支名称，然后合并。唉，除了调整我的 .emacs 文件之外，我的 lisp 技能是不存在的。

有什么推荐的解决方案吗？是的，我可以签出另一个分支并合并为文件，但不必那样做肯定会很好。谢谢。

# android - DirectionalViewPager，每页有 30 个按钮

> ID：12673678
> 
> 赞同：1
> 
> 时间：2012-10-01T12:53:41.300
> 
> 标签：android, android-viewpager

我正在尝试使用[DirectionalViewPager](https://github.com/JakeWharton/Android-DirectionalViewPager)在每个页面中显示 30 个按钮。通常这个viewpager工作得很好。但是，如果我在添加按钮后尝试使用此寻呼机，则触摸不灵敏或不流畅。当片段上有一些可点击的项目时，我观察到滞后和不规则的触感。

当我尝试通过使用不可点击的项目拖动来拖动页面时，它工作得很好。

任何人都可以帮助我处理这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:22:03.757

此问题是由于 gridview 中的子按钮而发生的。因为如果我们为 Button 重写 onTouch 方法，那么 X 和 Y 点仅针对该特定按钮给出。因此，如果您将这些值传递给父级，那么您应该根据父级更改值，否则您可以直接传递按钮的 X、Y 点，这将进一步提高触摸灵敏度。

# php - 在多个变量上使用 if (!empty) 但如果一个不为空则显示内容

> ID：12673680
> 
> 赞同：1
> 
> 时间：2012-10-01T12:53:49.603
> 
> 标签：php, variables

我正在使用以下

```
if (!empty($data['var_1']) 
 && !empty($data['var_2']) 
 && !empty($data['var_3']) 
 && !empty($data['var_4'])
 && !empty($data['var_5']) 
 && !empty($data['var_6']) 
 && !empty($data['var_7']) 
 && !empty($data['var_8']) 
 && !empty($data['var_9'])) {
//BLOCK HERE
} 
```

基本上，我想要实现的是如果*所有*变量都为空，则隐藏块。如果 8 个或更少为空，则显示该块。

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:56:10.643

你`||`不想`&&`。只有当它们都不为空时，才会显示该块。不过，我认为可能有更好的方法来做到这一点，比如`array_filter`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T12:57:27.350

好吧，你可以只使用一个循环和一个`$isok`变量：

```
$isok = false;
for($i=1; $i<10; $i++) {
    if( !empty($data['var_'.$i])) {
        $isok = true;
        break; // no need to continue looping
    }
}
if( $isok) {
    // BLOCK HERE
} 
```

这也更容易编辑，以防您更改`var_`零件或想要不同的数字范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T12:59:41.897

你也可以试试

```
$data = array_filter($data); // remove all empty value form array

if (count($data)) {
    // do your thing
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T12:56:29.377

如果所有变量都不为空，您编写的代码将显示该块。如果您希望在任何变量不为空时显示它，请使用 OR 而不是 AND 通过替换`&&`by `||`。

```
<?php
if (!empty($data['var_1']) || !empty($data['var_2']) || !empty($data['var_3']) || !empty($data['var_4']) || !empty($data['var_5']) || !empty($data['var_6']) || !empty($data['var_7']) || !empty($data['var_8']) || !empty($data['var_9'])) {
    //BLOCK HERE
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T12:59:49.640

您可以为此使用[**array_values()**](http://php.net/manual/en/function.array-values.php)：

```
if ( count(array_values($data)) ) {
    //BLOCK HERE
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T13:03:31.370

将 && (AND) 替换为 || （或者）

```
if (!empty($data['var_1']) 
 || !empty($data['var_2']) 
 || !empty($data['var_3']) 
 || !empty($data['var_4'])
 || !empty($data['var_5']) 
 || !empty($data['var_6']) 
 || !empty($data['var_7']) 
 || !empty($data['var_8']) 
 || !empty($data['var_9'])) {
//BLOCK HERE
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-01T13:10:21.007

```
if (empty(array_values($data))) { /* will return you true if all variables are empty*/} 
```

# javascript - 如果是周末则更改日期的功能

> ID：12673681
> 
> 赞同：1
> 
> 时间：2012-10-01T12:53:55.593
> 
> 标签：javascript, date, weekend

如果是周末，我已经完成了一个更改日期的功能，但是它没有给我第二天它对我的第 + 1 天，例如，我输入了 31-09-2012，这是最后一个星期日。

我有我的功能

```
<script type="text/javascript">
    function getdate2() {
        var items = new Array();
        var itemCount = document.getElementsByClassName("datepicker hasDatepicker");

        for (var i = 0; i < itemCount.length; i++) {
            items[i] = document.getElementById("date" + (i + 1)).value;
        }

        for (var i = 0; i < itemCount.length; i++) {
            items[i] = document.getElementById("date" + (i + 1)).value;
            var itemDtParts = items[i].split("-");
            var itemDt = new Date(itemDtParts[2], itemDtParts[1] - 1, itemDtParts[0]);
                    if (itemDt.getDay() == 6) {

                itemCount[i].value = (itemDt.getDate() < 9 ? "0" : "")+ (itemDt.getDate()+2)+ "-" + (itemDt.getMonth() < 9 ? "0" : "") + (itemDt.getMonth() + 1) + "-" + itemDt.getFullYear();

            }
                        if (itemDt.getDay() == 0) {

               itemCount[i].value = (itemDt.getDate() < 9 ? "0" : "")+ (itemDt.getDate()+1)+ "-" + (itemDt.getMonth() < 9 ? "0" : "") + (itemDt.getMonth() + 1) + "-" + itemDt.getFullYear();

            }

        }
       return items;
       }
</script> 
```

但是它没有给我第一个 10 月，而是给了我不存在的 31-09-2012。

真不知道怎么处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:13:41.273

您需要将每月的最大天数存储在数组中。

```
var dayspermonth = new array(31,28,31,30,31,30,31,31,30,31,30,31); 
```

最好在单独的函数中执行此操作：

```
function int lastDay(d, m){
    var result = d
    var dayspermonth = new array(31,28,31,30,31,30,31,31,30,31,30,31);
    if(d > dayspermonth[m]){
        d=1;
    }
    return d;
} 
```

然后你只需要做（例如）：

```
itemCount[i].value = (itemDt.getDate() < 9 ? "0" : "")+ lastDay((itemDt.getDate()+1), itemDt.getMonth())+ "-" + (itemDt.getMonth() < 9 ? "0" : "") + (itemDt.getMonth() + 1) + "-" + itemDt.getFullYear(); 
```

**编辑：** 如果发生这种情况，您需要将月份增加 1。如果旧日期是 31-12-YYYY，您需要将 1 添加到年份并将月份设置为 1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:17:11.803

试试[**date.js**](http://code.google.com/p/datejs/)轻松[**找到周末**](http://code.google.com/p/datejs/#Syntax_Overview)

`Date.today().is().weekday() // Is today a weekday?`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:16:12.030

2012/07/25 - 星期六。代码检查是否是星期六 - 添加 2 天，如果是星期日 - 添加 1 天 [http://jsfiddle.net/S3Q4P/](http://jsfiddle.net/S3Q4P/)

```
var mydate=new Date(2012,07,25)
if(mydate.getDay() == 6) //Saturday
mydate =new Date(mydate.getFullYear(),mydate.getMonth(),mydate.getDate()+2)
else if (mydate.getDay() == 0) //Sunday
     mydate =new Date(mydate.getFullYear(),mydate.getMonth(),mydate.getDate()+1) 
```

# javascript - 使用 Javascript 的真实或更好的随机数

> ID：12673691
> 
> 赞同：28
> 
> 时间：2012-10-01T12:54:30.530
> 
> 标签：javascript, random

我有各种依赖 javascript 随机数的资源。但是，由于我生成随机数的方式，我已经看到了很多随机不是那么随机的问题。

是否有任何 javascript 资源可供我生成真实的或更好的随机数？

我知道我可以与 Random.org 交互，但我还有哪些其他选择？

我正在使用：

```
function rand( lowest, highest){
    var adjustedHigh = (highest - lowest) + 1;       
    return Math.floor(Math.random()*adjustedHigh) + parseFloat(lowest);
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-01T12:57:15.870

假设您不只是看到不存在的模式，请尝试 Mersenee Twister（[此处为 Wikipedia 文章](http://en.wikipedia.org/wiki/Mersenne_twister)）。[在 github 上](https://gist.github.com/300494)有各种类似的实现。

类似的问题：

[可播种的 JavaScript 随机数生成器](https://stackoverflow.com/questions/424292/how-to-create-my-own-javascript-random-number-generator-that-i-can-also-set-the)

如果你想要更接近真正随机的东西，那么考虑使用[random.org API](http://www.random.org/clients/http/)来获得真正的随机数，尽管我建议只使用它来播种，而不是每个数字，因为你需要遵守它们的使用限制。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-02-11T03:16:58.530

## 调整数字，使它们“看起来随机”

我同意 Phil H 的观点，即人类非常善于发现模式，以至于他们经常认为即使在“完全随机”的数字序列中也能看到模式（[聚类错觉](https://en.wikipedia.org/wiki/clustering_illusion)、apophenia、赌徒谬误等）。

真正随机位置的图通常有很多“巧合”非常靠近的团块和点，这看起来很可疑。

艺术家经常采用完全随机生成的图案并“轻推”它们以使它们*看起来*“更随机”，即使仔细轻推实际上会使图案*不那么*随机[(a)](http://devmag.org.za/2009/05/03/poisson-disk-sampling/)、[(b)](http://lin-ear-th-inking.blogspot.com/2010/05/more-random-points-in-jts.html)、[(c)](http://blogs.sas.com/content/iml/2011/01/28/random-uniform-versus-uniformly-spaced-applying-statistics-to-show-choir/)、[(d)](http://muller.lbl.gov/teaching/physics10/old%20physics%2010/chapters%20%28old%29/4-Randomness.htm)等。

或者，[低差异序列](https://en.wikipedia.org/wiki/low-discrepancy_sequence)有时比真正的随机序列“看起来更好”，并且生成速度要快得多。

## 快速随机数生成器

从“极快”到“相对慢”，从“即使是人类也很容易看到模式”到“无人协助的人不可能看到任何模式”到“密码安全”，整个范围内都有许多“随机数生成器”并且，在植入足够量的熵之后，据我们所知，对于任何使用少于人类一个月产生的能量的攻击者来说，它与随机无异。”

仍然提供出色输出的非加密强度随机数生成器（不太可能没有辅助的人类可以看到任何模式）包括[Mersenne twister](https://en.wikipedia.org/wiki/Mersenne_twister)、[multiply-with-carry](https://en.wikipedia.org/wiki/multiply-with-carry)、[Lagged Fibonacci generator](https://en.wikipedia.org/wiki/Lagged_Fibonacci_generator)、[Well equidistributed long-period linear](https://en.wikipedia.org/wiki/Well_equidistributed_long-period_linear)、[Xorshift](https://en.wikipedia.org/wiki/Xorshift)等。

## 适用于某些浏览器的加密随机数技术

我听说[Cryptocat](http://en.wikipedia.org/wiki/Cryptocat)和其他 JavaScript 应用程序使用方便的`window.crypto.getRandomValues()`or `window.msCrypto.getRandomValues()`or`SubtleCrypto.generateKey()`函数来生成加密随机数。不幸的是，该功能在 IE 11 及更低版本中不可用。

由于网络浏览器一直使用随机数（对于它们获取的每个“https://”页面），这些函数（如果可用）很可能比大多数用 JavaScript 编写的随机数生成器运行得更快——甚至是非加密的算法。

## 兼容古代和现代浏览器的密码随机数技术

在 JavaScript 中生成真正随机数的一种方法是捕获鼠标事件并将它们添加到熵池中，跟踪添加的熵的一些（希望是保守的）估计。一旦池“满”（估计表明至少添加了 128 位熵），使用一些密码安全的随机数生成器从池中生成随机数 - 通常使用单向哈希，以便序列几千个输出数不足以推断熵池的状态并因此预测下一个输出数。

一种实现方式：http: [//lightsecond.com/passphrase.html](http://lightsecond.com/passphrase.html)

## 进一步阅读

*   [window.crypto](https://developer.mozilla.org/en-US/docs/Web/API/Window/crypto)
*   [window.crypto.getRandomValues() 的兼容性](https://stackoverflow.com/questions/16084766/compatibility-of-window-crypto-getrandomvalues)
*   [在javascript中保护随机数？](https://stackoverflow.com/questions/4083204/secure-random-numbers-in-javascript)
*   [https://security.stackexchange.com/questions/20029/generate-cryptographically-strong-pseudorandom-numbers-in-javascript](https://security.stackexchange.com/questions/20029/generate-cryptographically-strong-pseudorandom-numbers-in-javascript)
*   [IE 和 Webkit 中是否有任何内置的浏览器支持加密随机数？Firefox 有 window.crypto](https://stackoverflow.com/questions/4083643/is-there-any-built-in-browser-support-for-crypto-random-numbers-in-ie-and-webkit)
*   [JavaScript 中更好的随机函数](https://stackoverflow.com/questions/16884631/better-random-function-in-javascript)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-01-14T14:25:31.227

在寻找 Math.random 的替代方案时，我偶然发现了这个问题。

虽然这些是有效的答案，但对我有用的解决方案只是使用 Math.random 两次。
并在浮点数的小数上使用模数。
基本上是为了增加随机性。

也许它可能对一些被谷歌引导到这个问题的人有用。

这是一个包含该功能的片段，并且运行了一百万次。

```
function rand(min, max){
    return (Math.floor(Math.pow(10,14)*Math.random()*Math.random())%(max-min+1))+min;
}

// testing rand
function rollRands(min, max, rolls) {
    let roll = 0, n = 0;
    let counts = {};

    for(let i = min; i <= max; i++){
        counts[i]=0
    }

    while (roll < rolls){
        roll++;
        counts[rand(min,max)]++;
    }
    return counts;
}

console.log(rollRands(36, 42, 1000000));
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-07-18T19:18:14.860

[Rando.js](https://github.com/nastyox/Rando.js)在密码学上是安全的。它基本上[`window.crypto.getRandomValues()`](https://developer.mozilla.org/en-US/docs/Web/API/Crypto/getRandomValues)用作[`window.msCrypto.getRandomValues()`](https://developer.mozilla.org/en-US/docs/Web/API/Crypto/getRandomValues)故障保护和[`Math.random()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random)最后的故障保护，但它更容易实现和使用。这是一个基本的密码安全随机 [0, 1) 数：

```
console.log(rando());
```

```
<script src="https://randojs.com/2.0.0.js"></script>
```

好，易于。如果这就是你想要的，你就可以走了。如果你想让它为你做更多的事情，它也能做到这一切：

```
console.log(rando(5));                      //an integer between 0 and 5 (could be 0 or 5));  
console.log(rando(5, 10));                  //a random integer between 5 and 10 (could be 5 or 10));  
console.log(rando(5, "float"));             //a floating-point number between 0 and 5 (could be exactly 0, but never exactly 5));  
console.log(rando(5, 10, "float"));         //a floating-point number between 5 and 10 (could be exactly 5, but never exactly 10));  
console.log(rando(true, false));            //either true or false  
console.log(rando(["a", "b"]));             //{index:..., value:...} object representing a value of the provided array OR false if array is empty  
console.log(rando({a: 1, b: 2}));           //{key:..., value:...} object representing a property of the provided object OR false if object has no properties  
console.log(rando("Gee willikers!"));       //a character from the provided string OR false if the string is empty. Reoccurring characters will naturally form a more likely return value  
console.log(rando(null));                   //ANY invalid arguments return false  

//Prevent repetitions by grabbing a sequence and looping through it
console.log(randoSequence(5));              //an array of integers from 0 through 5 in random order  
console.log(randoSequence(5, 10));          //an array of integers from 5 through 10 in random order  
console.log(randoSequence(["a", "b"]));     //an array of {index:..., value:...} objects representing the values of the provided array in random order  
console.log(randoSequence({a: 1, b: 2}));   //an array of {key:..., value:...} objects representing the properties of the provided object in random order  
console.log(randoSequence("Good gravy!"));  //an array of the characters of the provided string in random order  
console.log(randoSequence(null));           //ANY invalid arguments return false
```

```
<script src="https://randojs.com/2.0.0.js"></script>
```

它也支持使用 jQuery 元素，但我没有在这个演示中使用它，所以我不必在 jQuery 中获取源代码。如果您需要，只需在[GitHub](https://github.com/nastyox/Rando.js)或[网站](https://randojs.com)上查看。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-07-18T06:48:31.417

更好的是，您可以使用量子密码学来生成非常难以预测的随机性。您可以使用[ANU Quantum Random Numbers API](https://qrng.anu.edu.au/API/api-demo.php)来获得一些随机性，这些随机性可以强制转换为类似的数字输出`Math.random`。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-10-10T01:30:13.190

这里似乎在两件非常不同的事情之间存在轻微的混淆：

*   随机数；
*   伪随机数。

向那些已经知道这一点的人道歉，但这两者是天壤之别。伪随机数*看起来*是随机的，甚至可以通过复杂的随机性测试，但它们是确定性的。因此，它们对密码学**毫无用处**，并且可能存在需要真正随机性的其他缺陷。

真正的随机性是不确定的，因此是不可预测的。这里的一个关键概念是熵，或包含的非冗余信息量。获得真正随机数据的方法数量有限。“好”的来源是：

1.  放射性衰变——通常很难做到；
2.  背景无线电噪声——与普遍认为的相反，这主要与大爆炸的背景微波辐射无关，而是更狭隘；
3.  电子通过反向偏置齐纳二极管移动的噪声：实际上非常有用且在实践中易于实现，电路简单。

其他“随机性来源”，如鼠标移动和计算机磁盘计时的内部变化等，经常被利用，但可能不够完美。一般来说，我发现在 Linux 系统上访问熵池比在 Windows 下更容易，但这可能只是个人偏见。

如果您只想要随机出现的数字，那么可以，使用 Mersenne twister 是一个可行的选择。它疯狂地跳来跳去。如果您正在生成随机数以用作例如[版本 4 UUID](https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_(random))，那么您需要更加小心。如果它不存在，您不能简单地“添加熵”，即使通过应用确定性加密函数也是如此。

如果您打算将随机性用于密码学，您还应该密切注意随机性来源可能受到损害的多种方式。例如，如果您使用基于 Internet 的“随机性来源”，谁能利用它？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-09-07T16:28:37.870

您可以通过异步请求一些数据来生成一个随机数池，因为 performance.now() 可以为您提供高达微秒的时间精度。然后将响应时间用作随机算法中的盐，

```
var randomNumbers = [];
for(var i = 0; i < 10; i++) {
  setTimeout(function () {
    var timeStart = performance.now();
    xhttp = new XMLHttpRequest();
    xhttp.open('GET', 'https://cdn.polyfill.io/v2/polyfill.min.js?rand=' + Math.random(), true);
    xhttp.onload = function () {
      var timeEnd = performance.now() - timeStart;
      var rNumber = parseInt(timeEnd.toString().replace('.', ''));
      randomNumbers.push(rNumber)
    };
    xhttp.send();
  }, i * 10);
} 
```

影响这个时间的因素有很多：

*   浏览器速度
*   走一条路
*   服务器响应时间
*   回程

以这种方式生成数百万个数字是不好的，但很少。也许连接一些结果以获得一个好的、长的随机数。

* * *

## 回答 #8

> 赞同：-7
> 
> 时间：2017-07-31T22:43:40.390

我制作了一个 JavaScript 库，它使用余弦和正弦函数使用 Date.now() 和 new Date().getTime() 生成随机数。对于每个随机数，我都会测试该数字是否已被使用。如果有，我重复这个过程，直到我得到一个新号码。如果我得到一个新号码，我将这个号码添加到已用列表中，然后返回该值。在同一个库中，我还添加了一个随机性测试器，它循环通过一个随机数生成器并寻找模式。这种方式很好，因为它可以快速加载数字（我用 console.time 计时），而无需不必要地联系其他页面。

你可以在这里找到这个库：punbb.atspace.cc/scripts/libraries/random.js

# android - 可调整大小的 Android 小部件

> ID：12673693
> 
> 赞同：2
> 
> 时间：2012-10-01T12:54:38.320
> 
> 标签：android, widget, resize

我只是试图编写一个可调整大小的小部件。

我用 Jelly Bean 在我的 Nexus 上试过，但我只能水平调整它的大小。

```
<appwidget-provider 
xmlns:android="http://schemas.android.com/apk/res/android"
android:minHeight="100dp"
android:minWidth="280dp"
android:updatePeriodMillis="1800000"
android:initialLayout="@layout/widget"
android:previewImage="@drawable/preview"
android:resizeMode="vertical|horizontal" /> 
```

我也尝试了 minResizeHeight，但没有奏效。

我希望有一个人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:02:47.167

试试`android:resizeMode="horizontal|vertical"`吧。

# r - 代码在 R 中显示为注释？

> ID：12673697
> 
> 赞同：2
> 
> 时间：2012-10-01T12:54:44.977
> 
> 标签：r, comments

我知道：

```
# this is a comment
code <- ("this is code") 
```

任何人都可以告诉我，即使我没有在代码前面声明 # ，一些 R 代码如何以绿色显示（如评论）？代码可以毫无问题地运行，这是奇怪的部分吗？

我的一个学生有这个“问题”，我不明白为什么代码显示为绿色？

提前感谢您的回答:)

亲切的问候玛丽亚

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T13:09:15.463

我强烈怀疑你的学生没有那个确切的问题。相反，我怀疑发生的事情是他们在评论之前错过了一些语音标记。例如，这段代码

```
x = "fred
#Some stuff
# this is a comment
code = ("this is code") 
```

在 Rstudio 中，一切都变得“绿色”：

![在此处输入图像描述](../Images/f9fbf7d88dceb88dda2f69ed98eacba7.png)

# shell - !:1- 在 csh 中的正确语法是什么

> ID：12673702
> 
> 赞同：0
> 
> 时间：2012-10-01T12:55:02.127
> 
> 标签：shell, csh

我在我的 cshrc 文件中创建了这样的别名，但我无法让它正常工作

```
alias fxg "find . -type f -name \!:1'*' | xargs grep \!:2-" 
```

据我了解！：2- 应该给我从第二个到最后一个的论点。

```
alias fxg "find . -type f -name \!:1'*' | xargs grep \!:2" 
```

此行按预期工作，它只是所有 var-arg 事物命令不起作用。有没有人知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T22:00:25.723

您需要使用 !2*：

```
% alias sec 'echo $\!2*'
% sec 1 2 3 
```

如果可能，请[不要使用 csh](http://www.grymoire.com/Unix/CshTop10.txt)（没有功能、临时不可预测的解析器、损坏的 I/O 重定向——请参阅链接）；这是一个可怕的外壳，将来只会给您带来问题（您将尽自己的一份力量使这个不值得的外壳保持活力）。

# javascript - 在 IE 中检索选定的文本

> ID：12673705
> 
> 赞同：0
> 
> 时间：2012-10-01T12:55:11.717
> 
> 标签：javascript, internet-explorer, selection, getselection

> **可能重复：**
> [getSelection() 在 IE 中不起作用](https://stackoverflow.com/questions/5421892/getselection-not-working-in-ie)

我试图获取选定的内容，我发现了这个：

```
 window.getSelection().toString(); 
```

它适用于大多数浏览器，除了显而易见的 IE。

那么该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:03:30.030

完整的语法是：

```
document.selection.createRange().text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:57:14.997

只有 IE9 及以上版本支持`window.getSelection()`. 您可以`document.selection`在早期版本中使用。

# blackberry - 如何从应用程序启动 AppWorld？[黑莓]

> ID：12673706
> 
> 赞同：4
> 
> 时间：2012-10-01T12:55:11.677
> 
> 标签：blackberry, appworld

这可能是一个简单的问题，但我找不到解决方案。我想通过单击我的 BB 应用程序中的按钮来打开 AppWorld。例如，当用户点击此按钮时，Appworld 将显示“Facebook 应用程序”页面。我可以这样做吗？

在 Android 平台上，这条线启动了 Facebook 应用程序的 GooglePlay。黑莓是否支持这种方法？

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=com.facebook.katana"))); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T15:09:12.643

这是一个简单的方法来做到这一点：

```
Browser.getDefaultSession().displayPage("http://appworld.blackberry.com/webstore/content/2360/?lang=en"); 
```

上面的代码将在应用程序中调用浏览器并打开*BlackBerry App World*，我在设备中对其进行了测试，它运行良好。现在我放了一个*WhatsApp Messenger*链接，但您可以根据您的要求自定义链接。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T09:34:44.710

您可以使用以下代码直接从您的 BB 应用程序打开 App World。此代码避免先打开浏览器。

```
Registry registry = Registry.getRegistry(this.getClass().getName());
Invocation invocation = new Invocation(null, null, 
                                       "net.rim.bb.appworld.Content", 
                                       false, ContentHandler.ACTION_OPEN);
invocation.setArgs(new String[] { /* app id in appworld */ });
registry.invoke(invocation); 
```

# android - SimpleCursorApdater 的 onRestoreInstanceState

> ID：12673712
> 
> 赞同：1
> 
> 时间：2012-10-01T12:55:39.517
> 
> 标签：android, listview, android-cursoradapter, screen-rotation

如何保存/恢复`ListView`附加到的状态`CursorAdapter`？例子：

我有一个`Activity`带有 3的 Android 设备`ListView`：国家、地区、城市。

它们连接到 3 `SimpleCursorApdater`: `CountryAdapter`, `RegionAdapter`, `CityAdapter`。

*   选择国家列表中的项目将通过更改查询条件过滤地区列表的项目`RegionAdapter`
*   在 Regions List 中选择一个 item 将通过更改 Cities List 的查询条件来过滤 Cities List 中的项目`CityAdapter`

伪代码：

```
void countryList_onItemSelected() {
    regionsAdapter.getFilter().filter(countryId);
}
void regionList_onItemSelected() {
    cityAdapter.getFilter().filter(regionId);
}

Cursor regionAdapter_FilterQueryProvider_runQuery(countryId) {
    Cursor cur = dbHelper.getReadableDatabase().
            query("Select * from Region where countryId = "+countryId);
    return cur;
}

Cursor cityAdapter_FilterQueryProvider_runQuery(regionId) {
    Cursor cur = dbHelper.getReadableDatabase().
            query("select * from City where regionId = "+regionId);
    return cur;
} 
```

当`onRestoreInstanceState()`调用 时，`cityListView`是空的，因为这 2 个`runQuery()`方法还没有被终止。所以我不能直截了当：

```
void onRestoreInstanceState(Bundle state) {
    ...
    savedCitySelection = state.getInt("citySelectedItemPosition")
    cityListView.setSelection(savedCitySelection); // <= NOOO! the cityListView is empty
} 
```

**问题：如何使用 和 保存/恢复这 3 个列表的`onSaveInstanceState()`状态`onRestoreInstanceState().`**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T03:20:54.870

我建议使用`Loader`.

然后，当加载完成并交换光标时，您可以`smoothScrollToPosition(int position)`在`ListView`.

CommonsWare 有一个很好的 CursorLoader 基于这里的支持库：

[https://github.com/commonsguy/cwac-loaderex](https://github.com/commonsguy/cwac-loaderex)

* *（注：smoothScrollToPosition 需要 Android 2.2）*

# javascript - winJS ListView中每个组的不同布局

> ID：12673714
> 
> 赞同：0
> 
> 时间：2012-10-01T12:55:44.097
> 
> 标签：javascript, listview, windows-8, winjs

我想知道是否可以在 Windows 8 Metro Style Apps 的分组 ListView 中为每个组使用不同的布局？

如果是，如何？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:00:34.240

当然，但不是你想要的。

除非您进行一些动态模板交换，否则分组的 ListView 使用相同的项目模板，这是可能的，但我不建议使用模板交换来交换整个组。交换更适合对混合在一起的不同类型的项目使用不同的模板。

我的建议是，在您的 ViewModel 级别，您将分组列表拆分为不同的列表，并为每个列表构建完全不同的 ListView。听起来您正在谈论一个带有部分的中心页面，并试图让它们看起来不错，如果是这种情况，您可能想要查看不对称的 ListViews 或只使用 Grid 并手动填充它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T17:18:40.270

我建议您查看 HTML ListView 项目模板示例中的场景 4：

[http://code.msdn.microsoft.com/windowsapps/ListView-item-templates-7d74826f/view/SourceCode#content](http://code.msdn.microsoft.com/windowsapps/ListView-item-templates-7d74826f/view/SourceCode#content)

该场景展示了如何以编程方式创建模板，这使您可以更好地控制输出。

在分组项目场景中，您可以检查 currentItem.group.key 以确定您正在处理的组，并为每个组提供不同的呈现。

缺点是，根据您想要多少不同的布局，代码可能会有所涉及（尽管如果您通过将每个“组模板”分解为自己的函数来考虑可重用性，这可能会有所帮助）。但是你应该能够通过在代码中构建模板来完成你想要的。

要记住的一件事是，如果您希望 ListView 中的项目大小不同，则需要为 ListView 控件提供 groupInfo，如下所示：

```
<div id="listView" 
    data-win-control="WinJS.UI.ListView" 
    data-win-options="{ 
        itemDataSource: myCellSpanningData.dataSource, 
        itemTemplate: MyCellSpanningJSTemplate, 
        ...
        layout: { 
            groupInfo: { 
                enableCellSpanning: true, 
                cellWidth: 310, 
                cellHeight: 80 
            },
            type: WinJS.UI.GridLayout 
        } 
    }"
></div> 
```

（我认为我上面的语法是正确的......我正在组合示例中的一些部分以使它们更简洁，因此示例应该是最终的仲裁者）

您也可以通过编程方式进行设置，如下所示：

```
leaderListView.winControl.layout = new WinJS.UI.GridLayout({
    groupInfo: {
        enableCellSpanning: true,
        cellWidth: 200,
        cellHeight: 200
    }
}); 
```

值得注意的是，tile 只能是 cellWidth 和 cellHeight 的倍数，因此在规划布局时，请考虑到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T10:26:06.040

是的，有可能，看看文档

[http://msdn.microsoft.com/en-us/library/windows/apps/jj244627.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj244627.aspx)

[http://msdn.microsoft.com/en-us/library/windows/apps/jj657974.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj657974.aspx)

# vb.net - 如何使用 Visual Studio 2010 将项目从 .Net 2.0 升级到 .Net 4.0？

> ID：12673722
> 
> 赞同：2
> 
> 时间：2012-10-01T12:56:13.560
> 
> 标签：vb.net, visual-studio-2010, web, .net-2.0, upgrade

我是 ac# web 开发人员，vb.net 项目对我来说并不熟悉。
我在 .net 2.0 中有一个项目，我想使用 Visual Studio 2010 将其升级到 .net 4.0。
当我使用 Visual Studio 2010 打开该项目时，一切正常，似乎在 .net 2.0 中工作。
我用 Visual Studio 创建了一个新项目，并将所有 .net 2.0 项目文件添加到新项目中。
但在那之后我有很多错误，如下所示：

`'List' is not declared. It may be inaccessible due to its protection`

我做错了什么，如何升级该项目？
我在哪里可以找到项目的 .Net 框架版本用于 VB 语言（在 c# 中，我们可以通过右键单击项目和属性来更改它，但这里没有这样的属性）？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T13:04:09.083

您有“Visual Studio 转换向导” [http://msdn.microsoft.com/en-us/library/dd483478(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd483478(v=vs.100).aspx)

# java - 阿拉伯语编码

> ID：12673724
> 
> 赞同：3
> 
> 时间：2012-10-01T12:56:18.153
> 
> 标签：java, jsp, arabic

我有一个简单的 Web 应用程序，它由 Servlet 和 JSP 组成。在一个 JSP 中，输入数据以发送到 Servlet，Servlet 与后端交互以将数据保存在 DB (MySQL) 中。

我的问题是数据是阿拉伯语，因此我使用 UTF-8 编码设置页面指令，并添加了一个过滤器以将请求和响应编码设置为 utf-8，但我仍然从 JSP 到 Servlet 获取垃圾数据。

请注意，我使用的是 Apache Tomcat Server v6.0，您知道我的问题在哪里吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T12:59:50.863

默认情况下，Tomcat`ISO-8859-1`在解码从浏览器接收到的 URL 时使用字符编码。您必须确保您的 tomcat 的 server.xml 文件连接器元素具有 URIEncoding 属性，其值为`UTF-8`：

```
<Connector port="8080" 
           protocol="HTTP/1.1"
           connectionTimeout="20000"
           URIEncoding="UTF-8"
           redirectPort="8443"/> 
```

在[这里](https://confluence.atlassian.com/display/DOC/Configuring+Tomcat%27s+URI+encoding)查看更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:06:40.310

确保将文本作为 unicode 而不是字符串保存到数据库中。然后在显示时将其编码为 utf-8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-07T16:21:14.163

1- 转到：程序->neatbans->neatbeans.config，然后在其中添加以下行：
`netbeans_default_options=" .... -J-Dfile.encoding=UTF-8"`

2- 转到服务器控制台 (glassfish) -> 配置 -> 服务器配置 -> JVM 选项 -> 添加 Jvm 选项，然后添加： `-Dfile.encoding=UTF-8 and save`

3-将数据集的主机更改为：
`<property name="URL" value="jdbc:mysql://localhost:3306/chokrbd?characterEncoding=UTF-8"/>`

此博客中的更多详细信息 [https://android-dev-go.blogspot.com/](https://android-dev-go.blogspot.com/)

# .net - 在字符串/xml 中搜索 EF

> ID：12673727
> 
> 赞同：1
> 
> 时间：2012-10-01T12:56:29.697
> 
> 标签：.net, linq, entity-framework

我正在开发一个使用 EF 和 mysql 的 Web 应用程序。搜索变得越来越复杂，所以我考虑创建一个 searchTable，我将在其中放置搜索过滤器所需的所有数据。对于一对一的表来说效果很好，但是一对多呢，我应该如何将它保存在一行中？例如经验或资格等问题是如何将该部分放入 EF/Linq 的搜索条件中？比如获得具有mba资格的用户。

```
 for (int i = 0; i < searchFilter.Count; i++)
        {
            keyValuePair = searchFilter.ElementAt(i);
            if (keyValuePair.Key.Equals("FullName"))
            {
                whereClause.Add("FullName.Contains(@" + i + ")");
                whereValues.Add(keyValuePair.Value);
            }

           ....

            if (keyValuePair.Key.Equals("City"))
            {
                whereClause.Add("AddressCity.Contains(@" + i + ")");
                whereValues.Add(keyValuePair.Value);
            }
        }

        StringBuilder str = new StringBuilder();
        for (int i = 0; i < whereClause.Count; i++)
        {
            str.Append(whereClause[i]).Append(" && ");
        }

        string strWhere = str.ToString().TrimEnd(" && "); //hypothetical code 

        AcmeDB db = new AcmeDB();
        var searchResult = db.SearchSummaries.Where(strWhere, whereValues);

        return searchResult; 
```

现在，如果我想搜索让我们说经验，该怎么做？因为此表包含我需要从每个用户的单行中搜索的所有内容，所以我希望在一行中包含姓名、用户名、地址、资格、经验等。我希望我解释得对吗？

# cordova - Phonegap 2.0.0 - 2.1.0 Facebook 集成

> ID：12673729
> 
> 赞同：1
> 
> 时间：2012-10-01T12:56:35.747
> 
> 标签：cordova, phonegap-plugins

我是 Phonegap 的新手，但我已经有了一个应用程序。我希望它连接到 Facebook，但我找不到 Phonegap 2.0.0 或 Phonegap 2.1.0 的任何解决方案。谁能指出我可以开始的正确方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:01:18.813

我使用了以下插件，它工作正常：

[https://github.com/Wizcorp/phonegap-facebook-plugin](https://github.com/Wizcorp/phonegap-facebook-plugin)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:28:39.647

我还在使用 GIT 的插件 for PhoneGap 2.1 [Facebook-plugin-integration-for-PhoneGap-2.1](http://www.oodlestechnologies.com/blogs/Facebook-plugin-integration-for-PhoneGap-2.1-for-iOS-and-Android)

# sql - 在 XML 类型列上创建索引

> ID：12673731
> 
> 赞同：0
> 
> 时间：2012-10-01T12:56:38.187
> 
> 标签：sql, sql-server, xquery

我有一个关于我可能会遇到的情况的问题。

一个数据库有很多 GB，但仅包含 1 列（[XML 类型的列](http://msdn.microsoft.com/en-us/library/ms187339.aspx)）。

我的问题是关于这种类型的专栏的报道。我可以根据 XML 数据创建索引吗（我假设不是）。我是否有任何选择，或者我只能接受，由于数据量，使用 XQuery 可能不会很快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:10:41.603

根据 Vikdor 在 OP 中的评论

[http://msdn.microsoft.com/en-us/library/ms191497%28v=sql.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms191497%28v=sql.100%29.aspx)

*XML 索引可以在 xml 数据类型列上创建。它们为列中 XML 实例上的所有标签、值和路径编制索引并提高查询性能。在以下情况下，您的应用程序可能会受益于 XML 索引*

# .net - 如果通过 C# .net 2.0 发送电子邮件会收到垃圾邮件，但如果使用 Outlook，则会进入收件箱

> ID：12673733
> 
> 赞同：0
> 
> 时间：2012-10-01T12:56:49.300
> 
> 标签：.net

如果我使用自己的软件发送电子邮件，我的电子邮件就会收到垃圾邮件。该软件使用 C#（带有 .net framework 2.0）。

如果我使用 Outlook 发送相同的邮件（所有相同的设置，即相同的 ip、相同的帐户、相同的主题和正文），它将进入收件箱。

真的很头疼，为什么只有通过我的应用程序发送邮件才会收到垃圾邮件，而 Outlook 一切正常。

感谢任何形式的帮助...

问候， Shail2k4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:02:47.260

那么你的邮件被标记为垃圾邮件是有原因的 - 获取垃圾邮件报告的副本 - 如果可以的话，看看它被标记的理由 - 通常是因为它的格式不完美。

如：

没有邮件类型以奇数顺序排列的字段包含特定短语发送服务器是一个开放的中继..

# c++ - 为什么数据类型的大小会随着操作系统的变化而变化？

> ID：12673735
> 
> 赞同：6
> 
> 时间：2012-10-01T12:56:51.610
> 
> 标签：c++, c, operating-system, size

在一次采访中向我提出了这个问题，在某些操作系统中大小`char`为 2 字节，但在某些操作系统中为 4 字节或不同。

为什么呢？

为什么它与其他基本类型不同，例如`int`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T12:57:31.283

这可能是一个棘手的问题。`sizeof(char)`始终为**1**。

如果大小不同，可能是因为编译器不符合标准，在这种情况下，问题应该是编译器本身，而不是 C 或 C++ 语言。

### 5.3.3 大小[expr.sizeof]

> 1 **sizeof 运算符产生其操作数的对象表示中的字节数**。操作数要么是一个不求值的表达式，要么是一个带括号的类型 ID。sizeof 运算符不得应用于具有函数或不完整类型的表达式，或应用于所有枚举数都已声明之前的枚举类型，或应用于此类类型的括号名称，或应用于指定位域的左值。**`sizeof(char)`，`sizeof(signed char)`并且`sizeof(unsigned char)`是 1。 sizeof 应用于任何其他基本类型（3.9.1）的结果是实现定义的。**（强调我的）

除了指出的类型之外，其他类型的 sizeof 是实现定义的，并且由于各种原因而有所不同。如果 An`int`以 64 位而不是 32 位表示，则它具有更好的范围，但在 32 位架构上它也更有效作为 32 位。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-01T13:35:07.523

类型的物理大小（根据位数）通常由目标硬件决定。

例如，某些 CPU 只能以不小于 16 位的单位访问内存。为了获得最佳性能，`char`可以再定义一个 16 位整数。如果你想在这个 CPU 上使用 8 位字符，编译器必须生成额外的代码，用于将 8 位值打包和解包到 16 位内存单元中。额外的打包/解包代码将使您的代码更大更慢。

这还不是结束。如果将 16 位存储单元细分为 8 位字符，则有效地在地址/指针中引入了一个额外位。如果 CPU 中的普通地址是 16 位的，那么你把这个额外的第 17 位放在哪里？有两种选择：

*   使指针更大（32位，其中15个未使用）并浪费内存并进一步降低速度
*   将可寻址地址空间的范围缩小一半，浪费内存，失去速度

后一种选择有时可能是实用的。例如，如果整个地址空间被分成两半，其中一个由内核使用，另一个由用户应用程序使用，那么应用程序指针将永远不会使用其地址中的一位。您可以使用该位在 16 位存储单元中选择一个 8 位字节。

C 被设计为在尽可能多的不同 CPU 上运行。这就是为什么`char`, `short`, `int`, `long`, `long long`, `void*`, `void(*)()`, `float`, `double`, `long double`,`wchar_t`等的物理尺寸会有所不同。

现在，当我们谈论在不同编译器中为同一 CPU 生成代码时的不同物理尺寸时，这更像是一种任意选择。然而，它可能并不像看起来那么随意。例如，许多 Windows 编译器定义`int`= `long`= 32 位。他们这样做是为了避免程序员在使用 Windows API 时产生混淆，这些 API 需要`INT`= `LONG`= 32 位。由于失去程序员的注意力，定义`int`和`long`作为其他东西会导致错误。因此，在这种情况下，编译器必须效仿。

最后，C（和 C++）标准使用`chars`and操作`bytes`。它们在尺寸方面是相同的概念。但是 C 的字节不是典型的 8 位字节，它们可以合法地比前面解释的要大。为避免混淆，您可以使用术语`octet`，其名称暗示数字 8。许多协议为此目的使用该词。

# c# - 带有 Windows Phone 7 布局的基本页面

> ID：12673740
> 
> 赞同：0
> 
> 时间：2012-10-01T12:57:11.090
> 
> 标签：c#, windows-phone-7, custom-controls

我正在尝试为我的所有 Windows Phone 7 页面定义一个公共基本页面，其中包括一个用于派生页面添加其标记的公共位置，类似于 ASP.NET 中的内容占位符。

到目前为止，我看到的代码示例都添加了代码行为，但没有一个显示我如何使用基本页面来执行以下操作：

*   将应用程序标题放在左上角
*   将公司标志放在右上角
*   有一个动态的（意味着用户可以改变它）背景图片

我可以定义一个自定义的 MyTitleControl 来实现上面的大部分项目，但我仍然必须依赖引用它的所有页面（而不是从公共基础页面派生）。这在 WP7 中甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:16:25.707

使用基页类执行此操作的唯一方法是使用“已加载”事件或更好的方法 OnNavigatedTo 并根据需要更改可视化树。

PhoneApplicationPage 类派生自 UserControl，因此它的可视化树是使用 InitializeComponent 自动生成的方法构建的。生成它是为了读取 XAML 和实例化控件并将根控件设置为当前用户控件的内容（在此场景中为页面）。

所以你可能会在以后使用它（不是在 ctor 中）或者在这个方法之后修改树。

另一种选择可能是为页面创建样式并将其应用于所有页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:45:24.260

你不能。这是 WP7 的限制。

每个 WP7 应用程序都有一个与之关联的 PhoneApplicationFrame 实例。每次当前页面更改时，PhoneApplicationFrame 'Content' 属性都会设置为 PhoneApplicationPage。并且一个 PhoneApplicationPage 不支持里面有额外的 PhoneApplicationPages。

完成类似操作的唯一方法是将所有页面转换为 UserControl，并确保只有一个 PhoneApplicationPage 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T09:20:16.720

您可以从 PhoneApplicationPage 继承并为您的新类提供附加属性、新的默认样式、新模板 - 毕竟页面只不过是具有自定义属性的 UserControl。

然后更改您的 myPage.xaml.cs 和 myPage.xaml 文件以从您的新类而不是从 PhoneApplicationPage 继承。

# deployment - Teamcity 部署：将修订号传递给 MSBuild

> ID：12673751
> 
> 赞同：2
> 
> 时间：2012-10-01T12:57:40.110
> 
> 标签：deployment, msbuild, teamcity

我使用 TeamCity 作为构建服务器，并希望将修订号从 svn 传递到我的 msbuild 脚本。原因是我想用这个数字在测试/登台服务器上创建一个目录。

我用 bing （和 google ;)）搜索，但找不到解决方案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T14:07:36.427

据我所知，内部版本号已经传递给 msbuild 您是否尝试过使用以下方法进行检索：

```
$(BUILD_NUMBER) 
```

另一种选择是使用构建参数：

[配置构建参数](http://confluence.jetbrains.net/display/TCD7/Configuring+Build+Parameters)

从上面的页面：

*.... 一种将通用或特定于环境的设置传递到构建脚本的便捷方式。*

构建参数会自动附加到 msbuild 命令行，例如：

```
msbuild.exe test.sln .... /property:foo=bar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:58:32.197

该变量`%build.vcs.number%`包含 svn 版本号。

在 MSBuild 运行器的命令行参数下，您可以传递此值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T15:33:30.677

您实际上需要以上两个答案来实现您想要的。您需要将 teamcity 构建设置为使用 %build.vcs.number% ，这样当您将参数 BUILD_NUMBER 设置为该值时。

# html - IE 8 中的不透明度

> ID：12673752
> 
> 赞同：-3
> 
> 时间：2012-10-01T12:57:40.740
> 
> 标签：html, css, internet-explorer

我正在尝试为 IE 8 实现不透明度。目前我使用此代码来实现不透明度：

```
background-clip: padding-box; 
background-color: #FFFFFF;
border: 5pt solid rgba(0, 0, 0, 0.5);
border-radius: 5px 5px 5px 5px;
color: #BBBBBB;
height: auto; max-width: 800px; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:00:28.460

IE8 不支持您的代码。

如果你想在 IE 上使用不透明度过滤器，你应该使用这个：

```
filter: alpha(opacity = 50); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T12:59:51.130

IE 8 不[支持 rgba 颜色](http://caniuse.com/#search=rgba)。

它支持的唯一不透明度是通过专有`filter`CSS 属性实现的整体元素不透明度。

# objective-c - 如何检查我的应用程序是否以全屏模式运行？

> ID：12673757
> 
> 赞同：3
> 
> 时间：2012-10-01T12:58:34.760
> 
> 标签：objective-c, macos, cocoa, fullscreen

我需要检查我的应用程序是否以全屏模式运行。因为我有按钮女巫滑出面板，全屏时应该以不同的方式切片。我怎样才能检查它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T13:08:58.683

全屏显示的窗口应该已经`NSFullScreenWindowMask`设置好了。

在此处查看[Apple 的文档](https://developer.apple.com/library/mac/#documentation/General/Conceptual/MOSXAppProgrammingGuide/FullScreenApp/FullScreenApp.html)

例如，您可以使用：

```
if ([yourwindow styleMask] & NSFullScreenWindowMask) {
  ....it's full screen
} 
```

# iis - 上传到另一个域会给出 HTTP 代码 405

> ID：12673759
> 
> 赞同：-1
> 
> 时间：2012-10-01T12:58:55.803
> 
> 标签：iis, file-upload, http-headers, cross-domain, plupload

我正在尝试使用 plupload 将文件（可能非常大）从一台服务器的网站上传到另一台服务器的后端。让我们说：

```
domain 1 = http://www.websitedomain.com/uploadform
domain 2 = http://www.backenddomain.com/uploadhandler 
```

尝试上传我发送以下内容：

```
OPTIONS /main/uploadnetwork.php HTTP/1.1
Host: backenddomain.com
Connection: keep-alive
Access-Control-Request-Method: POST
Origin: http://www.websitedomain.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.79 Safari/537.4
Access-Control-Request-Headers: origin, content-type
Accept: */*
Referer: http://www.websitedomain.com/uploadform
Accept-Encoding: gzip,deflate,sdch
Accept-Language: nl-NL,nl;q=0.8,en-US;q=0.6,en;q=0.4
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
DNT: 1 
```

但是当我尝试开始上传时，服务器返回以下内容：

```
HTTP/1.1 405 Method Not Allowed
Allow: GET, HEAD, OPTIONS, TRACE
Content-Type: text/html
Server: Microsoft-IIS/7.5
X-Powered-By: ASP.NET
X-Powered-By-Plesk: PleskWin
Date: Mon, 01 Oct 2012 12:41:57 GMT
Content-Length: 999 
```

在做了一些研究之后，我发现浏览器这样做是为了检查服务器是否会接受预期的消息。看起来我的服务器不想接受一个简单的 POST 调用，即使我一直使用 post。

Google Chrome 控制台给出以下错误：

```
XMLHttpRequest cannot load http://www.backenddomain.com/uploadhandler. Origin http://www.websitedomain.com is not allowed by Access-Control-Allow-Origin. 
```

有谁知道如何阻止浏览器检查或我如何告诉我的服务器只接受 POST？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:15:03.923

您似乎面临[同源政策问题](http://en.wikipedia.org/wiki/Same_origin_policy)

在某些浏览器上添加一个特殊的标题应该会有所帮助： [http ://en.wikipedia.org/wiki/Cross-origin_resource_sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

这个问题的答案也可能会有所帮助： [JavaScript 中的跨域数据访问](https://stackoverflow.com/q/1244182/1236044)

您还应该检查跨域标签：[https ://stackoverflow.com/questions/tagged/cross-domain](https://stackoverflow.com/questions/tagged/cross-domain)

# jquery - jQuery Fancybox 标题

> ID：12673762
> 
> 赞同：0
> 
> 时间：2012-10-01T12:59:09.983
> 
> 标签：jquery, html, jquery-plugins, fancybox, title

所以我正在使用jquery插件fancybox并且我让它工作但我想知道如何稍微调整它。所以这是我的html：

```
<a id="pics" title="This is some text that displays" href="Images/test.jpg">
<img alt="pics" src="Images/test.jpg"/></a> 
```

这是我的jQuery：

```
$("a#pics").fancybox({
    openEffect : 'elastic',
    openSpeed  : 150,
    closeEffect : 'elastic',
    closeSpeed  : 150,
    closeClick : true,
    helpers : {
        title : {
            type : 'over'
        }
    }
}); 
```

所以当我点击图片时，它会在图片上显示文字，这很棒。不好的是，当您将鼠标悬停在图片上时，所有标题文本都会出现在光标旁边（我知道这就是 title 属性的作用）。但是无论如何修改上面的 html/jquery 代码以显示所有相同的东西，但只是没有在悬停时显示该工具提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T13:14:58.653

显示带有锚标题属性内容的小工具提示是浏览器行为。
您可以使用另一个属性，以便浏览器不显示工具提示，试试这个：

```
<a id="pics" caption="This is some text that displays" href="Images/test.jpg">
<img alt="pics" src="Images/test.jpg"/></a> 
```

和花式框选项：

```
$("a#pics").fancybox({
    openEffect : 'elastic',
    openSpeed  : 150,
    closeEffect : 'elastic',
    closeSpeed  : 150,
    closeClick : true,
    beforeLoad: function() {
        this.title = $(this.element).attr('caption');
    }
    helpers : {
        title : {
            type : 'over'
        }
    }
}); 
```

[您可以通过 fancybox](http://jsfiddle.net/vkDcG/)看到一个工作示例。

# php - 如何使用 javascript 或 jquery 将文本框添加到表单

> ID：12673763
> 
> 赞同：0
> 
> 时间：2012-10-01T12:59:10.520
> 
> 标签：php, javascript, forms

我在 javascript 中创建了一个函数来在表单中添加一些“”，但是当我提交表单时，我无法在 $_POST[""] 中获取这些输入的值，并且这些添加的“”不会显示在浏览器的源代码中我在（IE和chrome）中测试过

这是我的代码：

```
<SCRIPT language="javascript">

    function addRow(tableID)
    {
        var hdnVal=document.getElementById("hdn");

        var table = document.getElementById(tableID);
        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);

        var cell1 = row.insertCell(0);
        var element1 = document.createElement("input");
        element1.type = "checkbox";

        cell1.appendChild(element1);

        var cell2 = row.insertCell(1);
        cell2.innerHTML = rowCount + 1;

        var cell3 = row.insertCell(2);
        var element2 = document.createElement("input");
        element2.type = "text";
        element2.name="Quantity"+hdnVal;
        element2.name="q"+hdnVal;
        cell3.appendChild(element2);

        var cell4 = row.insertCell(3);
        var element3 = document.createElement("input");
        element3.type = "text";
        element3.name="Description"+hdnVal;
        element3.name="D"+hdnVal;
        cell4.appendChild(element3);

        var cell5 = row.insertCell(4);
        var element4 = document.createElement("input");
        element4.type = "text";
        element4.name="Amount"+hdnVal;
        element4.name="A"+hdnVal;

        cell5.appendChild(element4);
        var a= parseInt(hdnVal.value);
        a++;
        hdnVal.value=a;
    }

    function deleteRow(tableID)
    {
        try {
            var table = document.getElementById(tableID);
            var rowCount = table.rows.length;

            for(var i=0; i<rowCount; i++) {
                var row = table.rows[i];
                var chkbox = row.cells[0].childNodes[0];
                if(null != chkbox && true == chkbox.checked) {
                    table.deleteRow(i);
                    rowCount--;
                    i--;
                }
            }
        }catch(e) {
            alert(e);
        }
    }

</SCRIPT>

</head>

<form method="post" action="PurchaseOrder.php" name="t1">

<INPUT type="button" value="Add Row" onclick="addRow('dataTable')" />
<INPUT type="button" value="Delete Row" onclick="deleteRow('dataTable')" />

<TABLE id="dataTable" width="350px" border="1">

    <tr>
        <th>Check</th>    <th>Pos No</th>  <th>Quantity</th>  <th>Description</th> <th>Amount</th>
    </tr>

    <TR>
        <TD><INPUT type="checkbox" name="chk"/></TD>
        <TD> 1 </TD>
        <TD> <INPUT type="text" name="Quantity"  /> </TD>
        <TD> <INPUT type="text" name="Description" /> </TD>
        <TD> <INPUT type="text" name="Amount" /> </TD>
    </TR>

    </TABLE>
<input type="hidden" name="hdn" id="hdn" value="0" />
<INPUT type="submit"  name="submit" value="Send"/>

</form> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:05:39.670

试试这个，希望它会工作

请删除

```
<input type="hidden" name="hdn" id="hdn" value="0" /> 
```

并添加这样的代码

```
<TR>
        <TD><INPUT type="checkbox" name="chk"/></TD>
        <TD> 1 </TD>
        <TD> <INPUT type="text" name="Quantity"  /> </TD>
        <TD> <INPUT type="text" name="Description" /> </TD>
        <TD> <INPUT type="text" name="Amount" /> </TD>
</TR>

<TR><span id='hdn'></span></TR> 
```

并更改此行

```
hdnVal.value=a; 
```

进入

```
hdnVal.innerHTML=a; 
```

此外，当您在 post 方法中取值时，请使用您在动态中创建的字段名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:06:10.537

在页面加载后使用 javascript 添加任何元素只会在 DOM 上添加该元素。因此，您不会看到它按 Ctrl + U（或浏览器用于显示当前页面源代码的任何快捷方式）。实际查看动态插入元素的唯一方法是使用 Firebug、Chrome 开发工具或类似工具。

至于 POST 问题，请确保您的元素具有“名称”标签。

# c# - 如何将三视图节点复选框设置为混合状态，即如果选择了任何子节点，则父节点应填写以指示

> ID：12673765
> 
> 赞同：2
> 
> 时间：2012-10-01T12:59:11.717
> 
> 标签：c#, .net, winforms, treeview

我正在开发一个 Windows 窗体应用程序，我在其中连接到数据库并获取项目和子项目的列表。我可以将其显示为带有复选框的树视图，以后用户可以选择执行进一步的操作。

My problem is that, I can't set the Parent node state when one of the child nodes is selected. 在这里，我想要一些指示，如果选择了任何子节点，则父节点应填写以显示在该父节点下方已选择了某些内容。

![这是我想做的事情](../Images/1ddba12bfeecad924e93997d23e9d94a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:27:53.237

好的，与此同时，我找到了问题的答案。不是很明智，但要感谢这个简单的三态 TreeView 控件。 [代码链接在这里。](http://www.codeproject.com/Articles/59514/Simple-Tri-State-TreeView)

我一定会尝试构建我自己的自定义版本。目前，这工作正常。

# sql - 存储过程返回一个额外的列，其中包含 SQL 中的外部 id 计数

> ID：12673769
> 
> 赞同：2
> 
> 时间：2012-10-01T12:59:28.713
> 
> 标签：sql, sql-server, sql-server-2008

首先，我是 SQL 新手，在设置一个简单的存储过程时遇到了麻烦。我正在学习 SQL，在这里需要一些帮助。

设想：

*   我有两张桌子，`Fruits`并且`Oranges`

*   `Fruits`有以下列

    *   水果ID
    *   水果季节
*   `Oranges`有以下列

    *   器官ID
    *   水果ID
    *   橙名

我想创建一个存储过程来返回`Fruits`一个额外的列计数，这个计数将是 id 中的水果总数`Oranges`。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:03:05.247

试试这个：

```
CREATE PROC ProcName
AS 
  SELECT f.Id, f.fruitSeason, COUNT(g.fruitId) 'Total Fruits in Oranges'
  FROM @fruits f 
  LEFT JOIN @Oranges g ON g.fruitId = f.Id
  GROUP BY f.Id, f.fruitSeason 
```

## [这是一个现场演示](https://data.stackexchange.com/stackoverflow/query/81421)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T13:04:18.730

听起来你想要这个：

```
create procedure yourFruit
as
    select f.fruitid, 
        f.fruitSeason,
        o.cnt TotalFruitOranges
    from fruits f
    left join 
    (
        select count(*) cnt, fruitid
        from oranges
    ) o
        on f.fruitid = o.fruitid
GO 
```

# jquery - 点击时jQuery停止动画

> ID：12673770
> 
> 赞同：0
> 
> 时间：2012-10-01T12:59:30.810
> 
> 标签：jquery

当我单击另一个按钮时，如何阻止以下情况发生？

```
box_2.animate({'top':'-250px'},500,function(){                                                      overlay.fadeOut('fast');
                                 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:00:52.287

```
$('button').click(function() {
    box_2.stop(true,true);
}) 
```

# twitter-bootstrap - 使用 twitter bootstrap 构建的网站的适当许可

> ID：12673778
> 
> 赞同：0
> 
> 时间：2012-10-01T12:59:52.793
> 
> 标签：twitter-bootstrap, licensing

[twitter bootstrap](http://twitter.github.com/bootstrap/)似乎有 apache v2.0 许可证，所以如果我使用 twitter bootstrap 构建一个网站，然后决定完全部署和分发它们（网站文件以及引导文件），我是否需要以某种方式与许可证兼容?

我也对编程语言的一般情况感到好奇。我不清楚现有的许可证是针对语言还是针对编译器的，如果它们完全不同的话（尤其是关于 go 等新语言）。如果有人能给我关于这些问题的见解，那就太好了。

**编辑：** hakre 的回答似乎适合 twitter bootstrap。有关 go 语言的类似问题，请参阅[此内容。](https://stackoverflow.com/questions/12795381/go-language-license)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:54:59.950

> 我需要以某种方式与许可证兼容吗？

是的，否则您将有权使用。检查 Apache 2.0 许可证文本以获取详细信息。

你问题的第二部分我不清楚。您可能希望对版权法和软件许可有更一般的了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T16:33:37.653

这可能有点晚了，但是。. .

AL2 要求您将许可文本与您分发的原始软件（在本例中为 Twitter Bootstrap）的任何部分一起分发，它要求您在分发时在原始软件中更改的任何文件中放置更改通知（ “簿记条款”），并且它要求您将原始软件源中的任何 NOTICE 文件与您重新分发的内容一起保留（“项目组织条款”）。除此之外，还有一些许可证不兼容问题。例如，除 v3 之外，没有任何 GPL 或 LGPL 版本与 AL2 兼容。这意味着，例如，GPLv2 与 AL2 不兼容，但 GPLv3 兼容。这是 copyleft 许可证的常见问题，在某些情况下也是 AL2 的问题（但没有像 GPL 变体这样的 copyleft 许可证的情况那么多）。

# apache - HTTP：将网页信息分成两页的语义

> ID：12673785
> 
> 赞同：0
> 
> 时间：2012-10-01T13:00:14.543
> 
> 标签：apache, http

我有一个网页，其信息必须分成两个单独的页面。我希望访问者知道现在有两个不同的页面，从而为旧单页页面的访问者提供自定义错误页面，例如

```
(Depending on who you are, ) the page you want is either of these:

    *Link to page A*
    *Link to page B* 
```

这应该是 HTML 格式（遵守一般的网站风格）。

我不清楚的是语义和apache配置

1.  提供什么 HTTP 状态码？有`301 Moved Permanently`，但我提供的选择不止一种。
2.  是否可以在没有 hacky LocationMatch 或类似的情况下根据我的需要配置 apache？理想情况下，我想使用正常的文件服务语义，但 HTTP 状态代码不应为 200。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T21:08:35.057

感谢您的澄清评论。

在回答你的两个问题时，我会说：

1.  是的，301 是正确的回应。这将表示旧页面已永久移动，并将用户重定向到带有链接的插页式页面。

2.  您可以通过在旧单页所在的目录中的[.htaccess](http://httpd.apache.org/docs/2.2/howto/htaccess.html)文件中添加一行来完成此操作（假设您也将新页面保留在那里）。或者，您可以在主[httpd.conf 文件](http://httpd.apache.org/docs/2.2/configuring.html)中添加一行。这些行看起来像这样：

.htaccess

```
Redirect 301 ./old_page.html ./new_interstitial_page.html 
```

httpd.conf

```
Redirect 301 /path/to/old_page.html /path/to/new_interstitial_page.html 
```

**编辑：**没有更多上下文，这听起来确实像重定向场景。在 HTTP 术语中，曾经在旧位置可用的“资源”现在在新位置可用（尽管是部分），因此您可以将客户端“重定向”到新位置或插页式页面。

但是，如果这对您来说不合适，您可以尝试“410 Gone”。这表示该资源根本不存在，而是将客户端引导到错误页面。然后，您可以自定义错误页面以包含指向页面 A 和页面 B 的链接。您的 .htaccess 将如下所示：

```
# Enable URL matching and match the old page with "Gone" (G), "Last rule" (L)
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^oldPage.html$ - [G,L]
</IfModule>

# Special 410 page with links to Page A and Page B
ErrorDocument 410 /path/to/custom/410-page.html 
```

# javascript - 如何选择gridview中的所有复选框？

> ID：12673786
> 
> 赞同：0
> 
> 时间：2012-10-01T13:00:16.403
> 
> 标签：javascript, asp.net, listview, gridview

我想检查放置在 Gridview 内的 ListView 内的复选框。Gridview 有很多行，每行都有一个带有关联记录的列表视图。每行都包含一个名为全选的复选框。我想检查该特定行随附的子 ListView 控件的复选框。

我有一个服务器端代码，我可以从中执行此操作。但它花费了太多时间.. 即如果有超过 1000 条记录，选择记录几乎需要 1-2 分钟。我希望使用 Javascript 来完成。我怎么能做到这一点。

![图片](../Images/de0930c680121982811318cea323367f.png)

这是表示 GridView 和 ListView 的图像。GridView 是组，联系人是 ListView 当我在 GridView 中选择“SelectAll”按钮时，应选择适当的联系人。

如何使用 Javascript 实现这一点。

这是网格视图的代码

```
 <asp:GridView ID="GridViewGroups" runat="server" AutoGenerateColumns="False"                                      
                                onrowdatabound="GridViewGroups_RowDataBound" Width="100%" 
                                BorderColor="Silver" BorderStyle="Solid" BorderWidth="1px" 
                                onselectedindexchanged="GridViewGroups_SelectedIndexChanged" 
                                meta:resourcekey="GridViewGroupsResource1" >
                            <Columns>
                                <asp:TemplateField HeaderText="Groups" 
                                    meta:resourcekey="TemplateFieldResource1" HeaderStyle-CssClass="tSubHead">
                                    <ItemTemplate>
                                        <div align="left" >
                                     <asp:Panel ID="PanelContainer" runat="server" Width="100%" 
                                                meta:resourcekey="PanelContainerResource1" >

                                    <asp:Panel ID="PanelHeaderList" runat="server"   
                                             meta:resourcekey="PanelHeaderListResource1" CssClass="tSubHead2" style="cursor:pointer;">
                                    <asp:ImageButton ID="Image1" runat="server" ImageUrl="../micons/IC_Plus.png" CssClass="tImage" 
                                            AlternateText="Expand or Collapse" meta:resourcekey="Image1Resource1"/>
                                    <asp:Label ID="LabelGrpName_sm" runat="server" 
                                            Text='<%# string.Format("{0} ({1})", Eval("Grp_Name"),Eval("CountNo")) %>' 
                                            meta:resourcekey="LabelGrpName_smResource1" />
                                     </asp:Panel>
                                    <div style="float:left;width:200px;" >  
                                    <asp:HiddenField ID="hfGrpID" runat="server" Value='<%# Eval("Grp_ID") %>' />     
                                        <asp:CheckBox ID="CheckBoxSelect" runat="server"  AutoPostBack="True" class='<%#Eval("Grp_ID") %>'
                                            OnCheckedChanged="GroupCheckChanged" 
                                            meta:resourcekey="CheckBoxSelectResource1"  />            
                                  <b>  <asp:Label ID="Grp_NameLabel" runat="server" 
                                            Text="Select All" 
                                            meta:resourcekey="Grp_NameLabelResource1" />
                                            </b>

                                    </div>

                                  <br />
                                    <p>
                                    <asp:Panel ID="PanelGroupsItem" runat="server" Width="100%" 
                                            meta:resourcekey="PanelGroupsItemResource1" >
                                    <asp:Panel ID="MyGroups" runat="server" ScrollBars="Vertical" Height="300px" 
                                            Width="100%" Visible='<%# GetFlag(Convert.ToInt32(Eval("Grp_ID"))) %>' 
                                            meta:resourcekey="MyGroupsResource1">

                                        <asp:ListView ID="ListViewContactsInGrp" runat="server"  onitemdatabound="ListView1_ItemDataBound" >
                                        <LayoutTemplate>
                                            <table id="Table1" runat="server" style="width:100%;">
                                                <tr id="Tr1" runat="server">
                                                    <td id="Td1" runat="server">
                                                        <table ID="itemPlaceholderContainer" runat="server" border="0" style="width:100%;">
                                                            <tr id="Tr2" runat="server" style="">
                                                                <th id="Th1" runat="server" colspan="2" class="tSubHead2">
                                                                    Contacts</th>                                
                                                            </tr>
                                                            <tr ID="itemPlaceholder" runat="server">
                                                            </tr>
                                                        </table>
                                                    </td>
                                                </tr>
                                                <tr id="Tr3" runat="server">
                                                    <td id="Td2" runat="server" style="">
                                                    </td>
                                                </tr>
                                            </table>
                                        </LayoutTemplate>
                                        <ItemTemplate>
                                         <tr style="">
                                                <td class="tListViewAlignment" style="width:10px">
                                                    <asp:CheckBox ID="chkFlag" runat="server" meta:resourcekey="chkFlagResource1" class='<%#Eval("grp_id") %>' />
                                                </td>                
                                                <td class="tListViewAlignment"><asp:Label ID="LabelContacts" runat="server" Text='<%# Eval("cont_name") %>' 
                                                        meta:resourcekey="LabelContactsResource1"></asp:Label>
                                                <asp:HiddenField ID="hfGSM" runat="server" Value='<%# Eval("cont_gsm") %>' />
                                                </td>
                                            </tr>
                                        </ItemTemplate>

                                        </asp:ListView>

                                       </asp:Panel>
                                    </asp:Panel>
                                      </p>
                                    <asp:CollapsiblePanelExtender ID="CollapsiblePanelExtender1" runat="server"
                                                Collapsed="True"
                                                TargetControlID="PanelGroupsItem"
                                                CollapseControlID="PanelHeaderList"
                                                ExpandControlID="PanelHeaderList"
                                                ImageControlID="Image1"
                                                ExpandedImage="~/micons/IC_minus.png"
                                                CollapsedImage="~/micons/IC_Plus.png"
                                                SuppressPostBack="True" Enabled="True">
                                    </asp:CollapsiblePanelExtender>
                                    </asp:Panel>
                                    </div>

                                    </ItemTemplate>
                                    <ItemStyle BorderColor="Silver" />
                                </asp:TemplateField>
                            </Columns>
                            <HeaderStyle BorderColor="Silver" />
                            <RowStyle BorderColor="Silver" />
                        </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:20:52.197

If you have given a name to each checkbox of contact list as:

```
<input type="checkbox" name="contacts" id="contact_id" /> 
```

For the main checkbox which selects all checkboxes:

```
<input type="checkbox" name="select_all" id="contact_id" onclick="checkAll(this.id)" /> 
```

You can use following javascript function:

```
 function checkAll(chkid) 
    {
        var chk = document.getElementById(chkid);

        var allchk = document.getElementsByName("contacts");
        for (var i = 0; i < allchk.length; i++) {
            allchk[i].checked = chk.checked;
        }
    } 
```

Using this, when you select the "select all" checkbox it will select all the chekboxes named as "contacts" and it will remove the selected checkbox if "select all" is unselected.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:08:38.743

你可以用 jQuery 做这样的事情。

```
$("#gridviewID input[type='checkbox']").each(function () {
   $(this).prop('checked', true);
}); 
```

或者，如果您所有的复选框都具有相同的类

```
$(".checkboxClass").prop('checked', true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:04:24.857

我认为你需要这样的东西：

```
function SelectCheckboxes(toCheck){
    $("#GridViewGroups input."+toCheck+":checkbox").each(function () {
        this.attr("checked", "checked");
    });
} 
```

你这样称呼它：

```
OnClick(SelectCheckboxes("class_to_check");) 
```

# c# - 如何在实体框架中使用 DateTime.AddDays(x)

> ID：12673792
> 
> 赞同：15
> 
> 时间：2012-10-01T13:00:30.460
> 
> 标签：c#, entity-framework, datetime, linq-to-entities

我有这个代码：

```
from pr in e.ProgramSetup.Include("Program").Include("Program.Client")
        where pr.DateBegin < DateTime.Now
        && pr.DateEnd > DateTime.Now.AddDays(pr.DateEndOffset) 
select pr).ToList(); 
```

它不起作用，因为 AddDays() 不能用于生成 sql。

那么还有其他方法吗？现在我选择所有内容并最终通过 foreach 过滤它，但在我看来这不是一个好方法。

问题是 pr.DateEndOffset 也只在数据库中，它不是恒定的......

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2018-01-11T16:06:40.383

```
using System.Data.Entity;
...
DbFunctions.AddDays(dateFromDataStore, numDaysToAdd); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-01T17:27:15.563

您需要使用映射到规范函数的 EntityFunction 之一。这是 AddDays 的示例：

```
public class MyEntity
{
    public int Id { get; set; }
    public DateTime Date { get; set; }
}

public class MyContext : DbContext
{
    public DbSet<MyEntity> Entities { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        using (var ctx = new MyContext())
        {
            if (!ctx.Entities.Any())
            {
                ctx.Entities.Add(new MyEntity() { Date = new DateTime(2000, 1, 1) });
                ctx.Entities.Add(new MyEntity() { Date = new DateTime(2012, 10, 1) });
                ctx.Entities.Add(new MyEntity() { Date = new DateTime(2012, 12, 12) });
                ctx.SaveChanges();
            }

            var q = from e in ctx.Entities
                    where e.Date > EntityFunctions.AddDays(new DateTime(2012, 10, 1), 10)
                    select e;

            foreach (var entity in q)
            {
                Console.WriteLine("{0} {1}", entity.Id, entity.Date);
            }
        }
    }
} 
```

# android - 为什么 ProgressDialog 在我们运行时没有显示出来？

> ID：12673793
> 
> 赞同：1
> 
> 时间：2012-10-01T13:00:30.607
> 
> 标签：android, json, android-widget

我是 Android 新手，并且正在编写代码以满足我的各种需求。

我有一个奇怪的问题，我需要显示进度对话框来掩盖我从 Facebook 下载图像的背景工作，并在我将它们放入矢量对象后将它们显示在 ListView 中。

我的代码是这样的：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        facebook.authorize(this, new String[] { "email", "publish_checkins",
                "user_photos" },

        //new Dialog Listner code

        btnAlb = (Button) findViewById(R.id.btnAlb);
        logout = (Button) findViewById(R.id.logout);

        btnAlb.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

    //**            Log.i("pDialog","Entry");
        pdialog = ProgressDialog.show(MainActivity.this, "Processing Data","Loading..");
    //this is not working !!
    //**            Log.i("pDialog","Exit");

                try {

    //Lot of JSON Parsing
                    pdialog.dismiss();

                    Intent intent = new Intent(MainActivity.this,AlbumHolder.class);

                    startActivity(intent);

                } catch (Exception e) {
                    e.printStackTrace();
                    pdialog.dismiss();
                }

            }
        });

} 
```

所以我已经记录了 ProgressDialog 的开始和结束，并希望对话框出现。但事实并非如此。有人可以解释为什么吗？

我也使用了 runOnUiThread() 线程，但它也产生了相同的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T13:03:30.987

您定义进度对话框的方法不正确。像这样试试

```
 pdialog =new ProgressDialog(mContext);
 pdialog.setMessage("Your message");
 pdialog.show(); 
```

这`mContext`是您的活动上下文并用于`pdialog.dismiss();`解除它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:07:27.807

您应该使用 pdialog.dismiss(); 当你的任务完成时。对于这个问题，你应该使用 AsyncTask 类。更多信息[阅读此图。](http://www.vogella.com/articles/AndroidPerformance/article.html)

# javascript - 第一个 XMLHttpRequest 失败但仅在 IE9 上

> ID：12673795
> 
> 赞同：11
> 
> 时间：2012-10-01T13:00:42.800
> 
> 标签：javascript, debugging, ssl, xmlhttprequest, internet-explorer-9

我有一个网站，我输入用户名/密码并单击登录按钮。登录按钮创建一个 XMLHttpRequest 对象，并将其触发。

在 Chrome、Firefox、Opera、Safari、Android 设备、iOS 设备上运行良好。只要我使用 HTTP 地址而不使用 HTTPS，IE9 就可以正常工作。

在 HTTPS 上，IE9 的行为如下：

第一个登录请求永远不会返回任何内容。F12 屏幕确实在网络选项卡中显示了我的登录请求，并且一切看起来都正确。脚本选项卡永远不会引发错误。根本没有任何反应。

这是疯狂的部分： - 如果我再次单击登录，它确实有效。- 如果我在浏览器上单击刷新，然后登录，那也可以！

我提出如下要求：

```
 var x = new XMLHttpRequest();
   x.open("POST", "/Relative/URL/Path", true);
   x.setRequestHeader("Content-Type", "text/plain");
   x.onreadystatechange = function () {
      if ((x.readyState == 4) && (x.status == 200)) {
            // handle callback
      }
   }
   x.send(my request); 
```

当这失败时，调试器将从 x.send() 行进入 onreadystatechange 代码。readyState 将是 1。这将是我可以调试的最后一个，因为没有其他任何事情发生。

任何想法将不胜感激。

[编辑]：我让一个请求去看看会发生什么。onreadystatechange 事件再次触发，readyState = 4 和 status = 12152。IE9 的 F12 屏幕中的网络视图显示结果为 Aborted，所用时间为 1589.07s。谷歌搜索显示这意味着服务器上的连接已关闭。

[编辑 2]：根据下面的评论，我重新编写了这段代码，只使用 jQuery 的 ajax() 方法。我认为这可能有机会消除我的不良代码。没有这样的运气。发生相同的行为。

```
 $.ajax({
      "url": sUrl,
      "success": function (data, textStatus, x) {
         workerCallback(data, id, "");
      },
      "error": function (x, testStatus, errorThrown) {
         workerCallback("nc", id, errorThrown);
      },
      "contentType": "text/plain",
      "data": JSON.stringify(req),
      "dataType": "json",
      "timeout": 1600000,
      "type": "POST"
   }); 
```

[最终更新：] 我已经更新了代码。如果发生超时，我只需重新发布相同的请求 - 仅一次。相当黑客，但它的工作原理。除非有人找到解决方案，否则我会将赏金分配给人们在下面提出的一些有用的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:57:20.243

这似乎是一个奇怪的问题，如果不在 https 网站上查看代码，就很难对其进行测试。

如果您想要快速修复，您可以尝试执行初始（虚拟）请求，然后立即使用短暂的 setTimeout 中止它并发出第二个（真实）请求。

根据您的描述，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:37:43.743

在第一个请求的调试过程中，这是通过

![在此处输入图像描述](../Images/a3e9c1ea86fabed6937a3bf16d3b6d49.png)

这个确切的错误有一个相关的帖子... [IE 9 Javascript error c00c023f](https://stackoverflow.com/questions/7287706/ie-9-javascript-error-c00c023f)

作者在 onreadystatechange 处理程序中放了以下内容

```
if (xmlHttpRequest.aborted==true) { 
  stopLoadAnimation();
  return;
} 
```

这可能有助于为您指明正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T20:55:16.963

*   [超时](http://www.w3.org/TR/XMLHttpRequest/#the-timeout-attribute)可防止请求在 readyState 1 处终止，并且之后由于内容嗅探而成功。

*   使用 Web 服务器配置在登录表单上配置 SSL 客户端身份验证

*   插入引用需要 SSL 客户端身份验证的 URL 的隐藏元素（例如图像）

*   使用协议相关的 gif 超链接，例如`//example.com/image.gif`，避免 SEC7111[混合内容漏洞](http://blogs.msdn.com/b/ieinternals/archive/2009/06/22/https-mixed-content-in-ie8.aspx)

*   [open方法](http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain)的URL在使用HTTP时匹配域，但不匹配HTTPS，导致请求失败，但后续请求回退到[安全区域策略](http://msdn.microsoft.com/en-us/library/ms537183)

*   `window.location.protocol`使用和之间的比较`document.location.protocol`来检查脚本是否在与页面相同的上下文中执行

*   将 JSON 作为 MIME 类型发送`text/plain`可能会触发[内容嗅探](http://blogs.msdn.com/b/ie/archive/2010/10/26/mime-handling-changes-in-internet-explorer.aspx)

*   比较失败请求和成功请求之间的[Accept 标头](http://blogs.msdn.com/b/ieinternals/archive/2009/07/01/ie-and-the-accept-header.aspx)

*   [HTTPS 缓存](http://blogs.msdn.com/b/ieinternals/archive/2010/04/21/internet-explorer-may-bypass-cache-for-cross-domain-https-content.aspx)可能是个问题

*   可能需要设置[Connection 标](https://stackoverflow.com/questions/3731420/)头

*   [代理](http://blogs.msdn.com/b/ieinternals/archive/2013/10/11/web-proxy-configuration-and-ie11-changes.aspx)配置可能是个问题

*   初始[标头](http://forums.asp.net/p/1696125/4488940.aspx/1?504+or+12152+xhr+response+from+jquery+when+wcf+service+is+returning+large+data)响应值可能太大（例如 HTTP 状态描述限制为 512 个字符）

*   [document.readystate](http://msdn.microsoft.com/en-us/library/ms536957)在初始请求上可能不完整，这会导致[过早执行](https://github.com/SlexAxton/yepnope.js/issues/113)问题

*   [证书吊销检查](http://blogs.msdn.com/b/ieinternals/archive/2011/04/07/enabling-certificate-revocation-check-failure-warnings-in-internet-explorer.aspx)可能会阻止初始 JSON POST，但允许 GET 回调之后的后续请求

*   应使用[回调范围](http://www.w3.org/TR/XMLHttpRequest/#xmlhttprequesteventtarget)而不是变量 x 来引用 readyState 和 status 属性，以避免使用闭包范围：

```
    函数 cb()
      {
      if ( (this.readyState === 4) && (this.status === 200) )
        {
        // 处理回调
        }
      }

    onreadystatechange = cb;

```

# objective-c - 在 Textfield 中，在 ios 5 中完美工作时，无法使用 ios 6 和 xcode 4.5 键入任何内容

> ID：12673796
> 
> 赞同：1
> 
> 时间：2012-10-01T13:00:43.547
> 
> 标签：objective-c, ios, uitextfield

我遇到了一个与 ios 6 相关的问题。我的登录视图有两个名为用户名和密码的字段。在两者中输入一些文本后，用户可以登录。完成某些任务后，按下注销按钮并再次出现在登录视图中，但这次用户无法在文本字段中输入任何内容。它在 ios 5 中工作，但在 ios 6 中却不能。为了找到解决方案，我再次使用 xcode 4.5 制作了我的应用程序，只是复制了所有代码，但所有视图控制器都是新的。但我无法解决它。

我在应用程序委托中完成了它：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:   

     (NSDictionary *)launchOptions

       {

        [self.window makeKeyAndVisible];

        [self.window setRootViewController:_navController];

        [[UINavigationBar appearance] setBackgroundImage:[

        UIImage imageNamed: @"top_barBG.png"] forBarMetrics:UIBarMetricsDefault];

       _navController.navigationBarHidden = NO;

        navimage = [[UIImageView alloc] init];

       navimage.frame = CGRectMake(100, 25, 118, 32);

       navimage.image = [UIImage imageNamed:@"Logo.png"];

      [_navController.view addSubview:navimage];

    return YES; 
```

}

一个问题更多是在内部视图控制器中，当光标出现在键盘上并且 resignFirstResponder 不起作用时，我所有的文本字段都无法输入任何内容。

请大家帮帮我。这将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T15:11:29.713

文本字段在 iOS 6 上不起作用的问题来自一个未设置的 xib 窗口：

以您的第一个 ViewController 为例，它定义了您的 rootviewcontroller。他的 xib 必须与一个窗口相关联：将此窗口的“可见启动”属性设置为 true。

# rabbitmq - 使用 Pika 0.9.5 向 RabbitMQ 发送大消息：消息被 Rabbit 静默丢弃

> ID：12673797
> 
> 赞同：1
> 
> 时间：2012-10-01T13:00:45.450
> 
> 标签：rabbitmq, celery, pika

我有一堆 celery 任务，它们获取结果并将它们发布到 RabbitMQ 消息队列。发布的结果可能会变得非常大（最多几兆）。关于在 RabbitMQ 消息中放入大量数据是否是一个好主意的观点参差不齐，但我在其他情况下看到了这种方法，只要控制内存，它似乎就可以工作。

但是，对于我当前的一组任务，rabbit 似乎只是在丢弃似乎太大的消息。我已将其简化为一个相当简单的测试用例：

```
#!/usr/bin/env python
import string
import random
import pika
import os
qname='examplequeue'
connection = pika.BlockingConnection(pika.ConnectionParameters(
            host='mq.example.com'))
channel = connection.channel()

channel.queue_declare(queue=qname,durable=True)

N=100000
body = ''.join(random.choice(string.ascii_uppercase) for x in range(N))

promise = channel.basic_publish(exchange='', routing_key=qname, body=body, mandatory=0, immediate=0, properties=pika.BasicProperties(content_type="text/plain",delivery_mode=2))

print " [x] Sent 'Hello World!'"
connection.close() 
```

我有一个 3 节点的 RabbitMQ 集群，以及`mq.example.com`每个节点的循环。客户端在 Ubuntu 12.04 上使用 Pika 0.9.5，RabbitMQ 集群在 Erlang R14B04 上运行 RabbitMQ 2.8.7。

执行此脚本会打印 print 语句并退出，不会引发任何异常。该消息永远不会出现在 RabbitMQ 中。

更改`N`为`10000`使其按预期工作。

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T11:04:28.420

我想你对 RabbitMq 中的 tcp-backpressure mechanizm 有问题。您可以阅读有关[http://www.rabbitmq.com/memory.html](http://www.rabbitmq.com/memory.html)的信息。我看到了两种解决这个问题的方法：

1.  添加 tcp-callback 并重新连接来自 rabbit 的每个 tcp-call
2.  在发送给rabbit之前使用压缩消息，这将更容易推送给rabbit。

> ```
> def compress(s):
>      return binascii.hexlify(zlib.compress(s))
> 
> def decompress(s):
>     return zlib.decompress(binascii.unhexlify(s)) 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-09T08:36:07.953

这就是我发送和接收数据包的方式。它比 hexlify 更有效，因为 base64 可能使用一个字节，而 hexlify 需要两个字节来表示一个字符。

```
import zlib
import base64

def hexpress(send: str):
    print(f"send: {send}")
    bsend = send.encode()
    print(f"byte-encoded send: {bsend}")
    zbsend = zlib.compress(bsend)
    print(f"zipped-byte-encoded-send: {zbsend}")
    hzbsend = base64.b64encode(zbsend)
    print(f"hex-zip-byte-encoded-send: {hzbsend}")
    shzbsend = hzbsend.decode()
    print(f"string-hex-zip-byte-encoded-send: {shzbsend}")
    return shzbsend

def hextract(recv: str):
    print(f"string-hex-zip-byte-encoded-recv: {recv}")
    zbrecv = base64.b64decode(recv)
    print(f"zipped-byte-encoded-recv: {zbrecv}")
    brecv = zlib.decompress(zbrecv)
    print(f"byte-encoded-recv: {brecv}")
    recv = brecv.decode()
    print(f"recv: {recv}")
    return recv

print("sending ...\n")
send = "hello this is dog"
packet = hexpress(send)
print("\nover the wire -------->>>>>\n")
print("receiving...\n")
recv = hextract(packet) 
```

# android - Android WebView 字体大小（以像素为单位）

> ID：12673798
> 
> 赞同：6
> 
> 时间：2012-10-01T13:00:46.627
> 
> 标签：android, fonts, webview

我想将我在 WebView 中使用的字体大小设置为特定的像素大小。我正在做一些事情

```
<p style="font-size: 18px">Text</p> 
```

但是，字体的大小在不同的设备上是不同的。知道如何进行这项工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T20:31:30.923

我找到的解决方案是将以下元标记添加到 HTML

```
 <meta name=\"viewport\" content=\"target-densitydpi=device-dpi\" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T13:22:23.740

您可以使用 webview 获取设置对象和[`setDefaultFontSize(int size)`](https://developer.android.com/reference/android/webkit/WebSettings.html#setDefaultFontSize(int))方法来设置默认字体大小。

例如：

```
myWebView.getSettings().setDefaultFontSize(20); 
```

或者，您可以使用[`setInitialScale(int percentage)`](https://developer.android.com/reference/android/webkit/WebView.html#setInitialScale(int))Web 视图上的方法来设置所需的百分比缩放，您可以尝试使用不同的百分比，看看您喜欢哪一个。

例如：

```
myWebView.setInitialScale(85); 
```

您还可以使用 webview 来获取它的设置对象，然后使用[`setBuiltInZoomControls(boolean value)`](https://developer.android.com/reference/android/webkit/WebSettings.html#setBuiltInZoomControls(boolean))方法来允许/禁止用户使用默认缩放控件，以便他们可以根据自己的喜好进行缩放。

例如：

```
myWebView.getSettings().setBuiltInZoomControls(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-13T16:46:57.987

这些都不适合我，我需要这样做：

```
WebSettings settings = wv.getSettings();
if (Utils.hasIceCreamSandwich())
    settings.setTextZoom( (int)(settings.getTextZoom() * 1.2));
else {
    settings.setTextSize(WebSettings.TextSize.LARGER);
} 
```

# css - CSS 速记属性的顺序

> ID：12673799
> 
> 赞同：2
> 
> 时间：2012-10-01T13:00:49.227
> 
> 标签：css

如您所知，我们可以在 css 中使用速记属性。但我发现属性值的顺序很重要。

'边框：1px红色实心；' 等于'border: 1px solid red;'

* * *

但是'font:italic bold 12px/20px'**不**等于'font:italic 12px/20px bold;'

我仔细阅读了手册，但找不到任何关于属性值顺序的内容；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:02:18.657

这是一个很好的备忘单，可以帮助您记住：[http ://www.land-of-web.com/freebies/css-shorthand-property-cheat-sheet.html](http://www.land-of-web.com/freebies/css-shorthand-property-cheat-sheet.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T14:49:40.780

订单的相关性是在每个属性的基础上定义的。例如，[速记的](http://www.w3.org/TR/CSS2/fonts.html#propdef-font)[描述`font`](http://www.w3.org/TR/CSS2/fonts.html#propdef-font)使用以下语法：

```
[ [ <'font-style'> || <'font-variant'> || <'font-weight'> ]? <'font-size'>
[ / <'line-height'> ]? <'font-family'> ] | caption | icon | menu | message-box |
 small-caption | status-bar | inherit 
```

这看起来有点乱，但是使用元注释的关键在[1.4.2 CSS 属性定义](http://www.w3.org/TR/CSS2/about.html#property-defs)部分。它说，除其他外：

1.  几个并列的词意味着它们都必须按照给定的顺序出现。
2.  竖线 (|) 分隔两个或多个备选方案：其中一个必须出现。
3.  双杠 (||) 分隔两个或多个选项：它们中的一个或多个必须以任意顺序出现。

所以我们可以读到字体样式、字体变体和字体粗细可以以任何顺序出现，并且它们都是可以省略的，但如果出现，它们必须在字体大小和字体系列之前，它们都是必需的，并且必须按该顺序出现。

幸运的是，大多数属性都比较简单。大多数情况下，值中项目的顺序并不重要，因为设计可以从格式推断项目的角色。而且您永远不需要`font`速记：您可以随时记下各个字体属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:02:56.367

```
font-weight: bold;
font-style: italic;
font-variant: small-caps;
font-size: 1em;
line-height: 1.5em;
font-family: verdana,sans-serif 
```

将会：

```
font: bold italic small-caps 1em/1.5em verdana,sans-serif 
```

这是命令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T13:05:41.683

这是字体速记的一个很好的参考：[https](https://www.sitepoint.com/introduction-css-shorthand/) : //www.sitepoint.com/introduction-css-shorthand/ - 整个站点点参考实际上非常好。

# c# - 为什么我不能从班级访问在班级海峡内声明的变量

> ID：12673804
> 
> 赞同：-4
> 
> 时间：2012-10-01T13:01:00.147
> 
> 标签：c#, class

我的意思是，例如，如果我在这样的类中声明一个 int i ：

```
class NewClass
{
int i;

} 
```

我不能像这样从类中访问它：

```
class NewClass
{

int i;
i=5; //gives me an error
} 
```

我尝试将“i”变量设为静态，但也没有帮助（NewClass.i=5 也给了我一个错误）。

我遇到的另一个问题是：

```
class NewClass
{
Board NewBoard2 = new Board();
public NewClass (Board NewBoard)
{
NewBoard2=NewBoard
}enter code here
//here I can't access nor NewBoard or NewBoard2
} 
```

我很长一段时间没有写代码，所以这就是为什么我有所有这些愚蠢的问题......谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:03:14.647

您不能将语句（除了声明和赋值声明）直接放在类定义中。代码需要在方法（或 ctor、dtor、静态初始化块）中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:06:35.057

你不能这样做：

```
class NewClass 
{ 
int i; 
i=5; //gives me an error 
} 
```

您需要在类中为您的代码提供一个方法，例如：

```
class NewClass 
{ 
 int i; 
 public void set_i()
 {
  i=5;
 }
} 
```

所以在你更大的班级里：

```
class NewClass 
{ 
Board NewBoard2 = new Board(); 
public NewClass (Board NewBoard) 
{ 
NewBoard2=NewBoard 
}enter code here 
//here I can't access nor NewBoard or NewBoard2 
} 
```

那行不通，但是

```
class NewClass 
{ 
Board NewBoard2 = new Board(); 
public NewClass (Board NewBoard) 
{ 
NewBoard2=NewBoard; 
// You can use NewBoard, or NewBoard2 here.
}

public void dostuff()
{
//You can use NewBoard2 here...
}
} 
```

# c++ - 删除重复字符

> ID：12673809
> 
> 赞同：1
> 
> 时间：2012-10-01T13:01:26.683
> 
> 标签：c++, string, character, recurring

对于我在 C++ 中尝试的一些东西，我已经接受了一个字符串（比如'atomato is red'）并去掉了空格（'atomatoisred'）。

现在我将如何只删除重复出现的字符，条件是该字符的第一个实例可以保留（所以我们的示例变为“atomisred”）？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T13:05:36.707

您可以将[擦除删除习语](http://en.wikipedia.org/wiki/Erase-remove_idiom)与一组跟踪重复字符一起使用：

```
std::set<char> dupes;

str.erase(
    std::remove_if(
        str.begin(), str.end(),
        [&](char c) { return not dupes.insert(c).second; }),
    str.end()); 
```

这也利用了返回值`std::set::insert`是一对，其第二个元素是`bool`表示插入是否发生的事实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:09:31.630

如果你想自己实现它（**没有** `stl`），有很多方法。

1.  通过排序。如果您不关心字符的顺序，则此方法有效。首先对字符串进行排序，然后遍历它，对每个元素执行非常简单的检查：

    ```
    if( currentElement == elemebtBeforeIt )
        deleteCurrentElement 
    ```

2.  另一种方法是有一个专门用于唯一字符的数组（好吧，也许不是数组，但你会明白的）。遍历您的字符串，并为每个字符检查：

    ```
    foreach Element of the string:
        if( arrayOfUniqueElements contains currentElement ) 
            do nothing
        else
            put currentElement into the arrayOfUniquElements 
    ```

    在此之后，您将拥有专用数组中的所有唯一元素。

# php - 项目范围之间的PHP简单搜索

> ID：12673810
> 
> 赞同：1
> 
> 时间：2012-10-01T13:01:27.567
> 
> 标签：php, mysql, search, between

首先，在写下 PHP 代码之前。我在 mySQL 数据库中有一个名为 items 的表。假设它在**item_no**中有以下记录：

*   1L900BK
*   1L900BE
*   1L900BR
*   2L900BK
*   2L902BE
*   2L910PU

PHP代码是：

```
require_once('connect_db.php');
$from = $_POST['from'];
$to = $_POST['to'];

$query = "SELECT * FROM items WHERE item_no BETWEEN '".$from."' AND '".$to."' ORDER BY item_no Asc";
$result = mysql_query($query);

if(mysql_num_rows($result)>0){
$num = mysql_num_rows($result);

for($i=0;$i<$num;$i++){
$row = mysql_fetch_assoc($result);
echo $row['item_no'];
echo "<br /><br />";    
}   
} 
```

现在问题从这里开始：假设我想搜索一个从**1l900bk**到**2l900BK**的项目，它将输出它们之间的所有 item_no ( 1L900bk 1L900BE ------- 2L900BK) 这是完美的！

但是当我想搜索 item_no FROM **1L9** TO **2L9** ...结果或输出不正确（1L900BK - 1L900BE - 1L900BR - 并停止！！） 2L900 的位置在哪里？当 for 循环达到此值时，它会跳过 2l9。

现在我只想在写下 2l9 时输出所有 2l900 ......我认为查询中的 BETWEEN 有问题，但我找不到替代方法。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:58:05.377

它停在那里，因为与字符串的比较是按字母顺序进行的。这意味着**2L9**小于**2L900**。

```
1L9 <= foo <= 2L9 <2L900 
```

**在这种情况下，您将获得**foo 。**另一个例子可能是，**

 **```
SELECT * FROM users WHERE name BETWEEN "A" and "Bart" 
```

你会得到一个像 Baracus 这样的名字，因为**Bara**小于“Bart”，但不是 Bartholomew（按字母顺序大于 Bart）。

所以如果你想要 2L900，你必须设置你想要的最大可能元素，即**2L900BR**

请参阅[二进制排序](http://underpop.free.fr/m/mysql/teach-yourself/ch07lev1sec1.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T14:00:45.020

结果是正确的`"2L9" < "2L900BK"`。它就像一本字典，你不希望以前找到`add`，`a`是吗？

您应该尝试使用 的子字符串`item_no`，其长度等于 和 之间的最大`$from`长度`$to`：

```
$from = $_POST['from'];
$to = $_POST['to'];
$length = max(strlen($from), strlen($to));

$query = "SELECT * FROM items WHERE SUBSTRING(item_no, 1, ".$length.") BETWEEN '".$from."' AND '".$to."' ORDER BY item_no Asc"; 
```**

# javascript - 使用 Javascript 添加到 textarea 中的现有文本

> ID：12673811
> 
> 赞同：1
> 
> 时间：2012-10-01T13:01:27.567
> 
> 标签：javascript, jquery, html, textarea, append

我需要有一个“添加功能”按钮，它将以下文本附加到文本区域中已经存在的文本中：

```
<b>Features:</b>
<ul>
<li>Feature 1 here</li>
<li>Feature 2 here</li>
</ul> 
```

它需要以 html 形式出现，以便用户可以看到标签及其内容。这是我正在使用的 HTML：

```
<tr class="addItemFormDark">
    <td class="descriptionLabel">
        <p>Description:</p>
    </td>
    <td>
        <textarea name="description" id="addItemDescription" cols="77" rows="6"></textarea>
    </td>
</tr>
<tr class="addItemFormDark">
    <td colspan="2">
        <input type="button" onclick="addFeatures('addItemDescription')" value="Add Features"/>
    </td>
</tr> 
```

...这是我正在使用的 JavaScript：

```
function addFeatures(id) {
    var contents = document.getElementById(id).innerHTML;
    contents += "<b>Features:</b>\r<ul>\r\t<li>Feature 1 here</li>\r\t<li>Feature 2 here</li>\r</ul>";
    document.getElementById(id).innerHTML = contents;
} 
```

现在这是我遇到麻烦的那部分。如果 textarea 是空的，就像一开始一样，所需的文本将被添加到 textarea 中，并且可以重复多次，每个文本块都在最后一个之后成功添加。

但是，如果用户在框中键入任何内容，无论是在空白文本区域中，还是在成功添加所需代码块之一之后，这都会完全禁用按钮。在页面刷新之前，它将不再向 textarea 添加任何内容。

如果我使用 JQuery 的 .append 方法并给 textarea 和 button 一个 id，我会得到完全相同的结果。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T13:03:20.283

`innerHTML`不是用于设置 textarea 值的正确属性。改为使用`value`。

```
function addFeatures(id) {
    var textarea = document.getElementById(id);
    textarea.value += "<b>Features:</b>\r<ul>\r\t<li>Feature 1 here</li>\r\t<li>Feature 2 here</li>\r</ul>";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T13:11:15.210

使用 jquery 我会使用这个：

```
var appendData = //the HTML text you want to add
var currentData = $("#textboxID").val();
var newData = currentData+appendData;

$("#textboxIS").val(newData); 
```

# android-layout - 如何在android中动态设置layout_gravity？

> ID：12673812
> 
> 赞同：1
> 
> 时间：2012-10-01T13:01:36.457
> 
> 标签：android-layout

如何以编程方式设置 layout_gravity？

我需要设置按钮的位置或`LEFT`在特定布局中，我使用了但是，它设置了按钮文本的重力。`CENTER``RIGHT``myButton.setGravity(Gravity.LEFT);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:05:52.550

我通过将您的标题放在搜索栏中找到[了这一点。](https://stackoverflow.com/a/8049860/645270)简短版本：使用`LayoutParams`

# ember.js - Ember.js 对象何时加载的数据加载指示器？

> ID：12673815
> 
> 赞同：2
> 
> 时间：2012-10-01T13:01:42.860
> 
> 标签：ember.js

在我们的 Ember 应用程序中加载“页面”时，我们无法获得某种形式的视觉指示。

尝试了 gif 方法和[Spin JS](http://fgnass.github.com/spin.js/)。两者都失败了，因为它们非常滞后并且只有在所有 Ember 对象都加载后才完全加载。[与此问题类似的问题](https://stackoverflow.com/questions/10358065/animated-gif-pauses-when-ember-js-objects-are-loading)。

其他人在面向公众的构建中使用什么方法？

**编辑**：这是应用程序第一次加载的时候。初始负载足够长，需要某种形式的视觉指示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:07:35.577

您可以使用加载指示器向文档添加叠加层。当您通过 CSS 添加它时，它会在 Ember 初始化之前加载。ember 初始化后，您可以删除覆盖。

下面是我如何实现它的示例：

HTML：

```
<html>
  <head> ... load dependencies ... </head>
  <body class="loading"> ... handlebars templates ... </body>
</html> 
```

CSS：

```
body.loading:after {
  content: '';
  background: rgba(255,255,255,.3) url(images/loader.gif) 50% no-repeat;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 10;
} 
```

灰烬代码：

```
App.ApplicationView = Ember.View.extend({
    removeLoader: function() {
        $('body').removeClass('loading');
    }.on('didInsertElement')
}); 
```

这种方式在 Ember 初始化之前会显示一个加载指示器，但是当 Ember 完成初始化时，加载器会被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:18:40.440

您可以为此使用[jQuery ajax 回调](http://api.jquery.com/category/ajax/global-ajax-event-handlers/)：

```
$(document).ajaxStart(function(){ console.log("ajax started")})
$(document).ajaxStop(function(){ console.log("ajax stopped")}) 
```

这适用于所有 ajax 请求。

# eclipse - 如何让 UIMA JCasGen 在 Eclipse 中运行？(OSX)

> ID：12673825
> 
> 赞同：2
> 
> 时间：2012-10-01T13:02:06.237
> 
> 标签：eclipse, macos, uima

我已经安装了 UIMA 插件，似乎工作正常。我还安装了 UIMA SDK，它也可以正常工作。

我遇到的问题是，在 UIMA 菜单中有一个运行 JCasGen 的选项，但它永远不会启动。

我仍然可以在运行配置中手动从 SDK 运行 JCas Gen，但我想让这个菜单选项工作。

是否需要为 OSX 设置一些额外的东西？

```
Eclipse 4.2.0
UIMA 2.4.0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T22:39:04.097

尝试“打开方式”>“组件描述符编辑器”

然后在“类型系统”选项卡中，单击“JCasGen”

![在此处输入图像描述](../Images/0144edd1742dcb1481e443a6fa10754f.png)

# c# - 对于 LINQ 性能专家 - 通过非泛型 ICollection 进行搜索

> ID：12673830
> 
> 赞同：4
> 
> 时间：2012-10-01T13:02:20.677
> 
> 标签：c#, performance, linq, search, icollection

我需要搜索包含时间属性的“项目”对象集合。我有一个快速的解决方案，但它非常混乱（如果没有更好的方法会发布）。以下是我自己使用 LINQ 等执行搜索的尝试。

在我的特殊情况下，我*知道*这些物品是根据时间从低到高排列的。当我遍历它们时，它是 9/12、9/13、9/14。我想找到一个快速的解决方案，即使没有订购，但现在并不重要。

```
//ICollection c = GetCollection(); //25,000+ items
DateTime TIME = DateTime.Now.AddDays(-1);

EventLog scan = new EventLog("Application", "Server", "N/A");
EventLogCollection c = scan.Entries;
Console.WriteLine(logs.Count); // All entries already in list here

// 64 sec - SLOW
List<Item> l1 = new List<Item>();
foreach (Item i in c) { 
  if (i.time > TIME) { 
    l1.Add(i); }
}

// 93 sec - SLOWER
var l2 = c.Cast<Item>().AsParallel().Select(n => n.time > TIME);
var i = l2.Count();

// 98 sec - EVEN SLOWER!
List<Item> l3 = new List<Item>();
Parallel.ForEach(c.Cast<Item>(), n => {
    if (n.time > TIME) {
        l3.add(n);
    }
}); 
```

我当前的解决方案是对开始时间和结束时间进行 BinarySearch，并根据这些索引循环遍历 ICollection。它非常快（1-2 秒）但非常混乱。我*不需要*不同的解决方案，但我想我会把它扔给你的性能专家。

**是否有更快、更优雅的方式来搜索 ICollection？**顺便说一句，我无法控制我收到的集合，也无法更改它的结构。.NET 4.0

不，我不能使用 System.Diagnostics.Eventing.Reader 因为我坚持使用 Windows XP

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:08:18.930

您的“查询”不正确。您实际上是在选择一堆布尔值，而不是过滤。你要：

```
var l2 = c.Cast<EventLogEntry>().AsParallel().Where(n => n.time > TIME); 
```

这*可能*不会更快，但值得一试。哎呀，我什至不会一开始就并行执行。

事实上，`Count`有一个带有谓词的重载，所以你可以使用这个：

```
var count = c.Cast<EventLogEntry>().Count(n => n.time > TIME); 
```

或并行版本：

```
var count = c.Cast<EventLogEntry>().AsParallel().Count(n => n.time > TIME); 
```

像克里斯一样，我很震惊，*任何*实施都需要一分钟多的时间......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:52:37.363

**编辑**

[关于dasblinkenlight 的回答](https://stackoverflow.com/a/12674996/659190)通常是正确的断言，我写了一个快速的通用辅助函数。

```
public static int BinaryFirstIndexOf<T>(
    Func<int, T> indexer,
    Func<T, boo> predicate,
    int count)
{
    var low = 0;
    var high = count - 1;

    while (low < (high - 1))
    {
        var mid = low + ((high - low) / 2);

        if (predicate(indexer(mid))
        {
            high = mid;
        }
        else
        {
            low = mid;
        }
    }

    if (predicate(indexer(low)))
    {
        return low;
    }

    if (low != high && predicate(indexer(high)))
    {
        return high;
    }

    return -1;
} 
```

我会这样使用，

```
var time = DateTime.Now.AddDays(-1);
var c = scan.Entries;

var first = BinaryFirstIndexOf(
     i => c[i], 
     e => e.TimeGenerated > time,
     c.Count);

if (first >= 0)
{
    var result = new List<Item>(c.Count - first);
    Enumerable.Range(first, c.Count - first).AsParallel()
    .ForAll(i => 
        {
            var j = i - first;
            result[j] = (Item)c[i];
        });
} 
```

* * *

你不想做这样的事情吗

```
var time = DateTime.Now.AddDays(-1);
var c = scan.Entries;

var cutOff = 0;
for (var i = c.Count - 1; i > - 1; i--)
{
    if (c[i].TimeGenerated < time)
    {
        cutOff = i;
        break;
    }
}

var result = new List<Item>(c.Count - cutOff - 1);
var j = 0;
for (var i = cutOff + 1; i < c.Count; i ++)
{
    result[j] = (Item)c[i];
    j++;
} 
```

我假设您想要的数据在最后并且占用不到一半的集合。

或者也许使用 linq 并行进行强制转换，

```
var time = DateTime.Now.AddDays(-1);
var c = scan.Entries;

var cutOff = 0;
for (var i = c.Count - 1; i > - 1; i--)
{
    if (c[i].TimeGenerated < time)
    {
        cutOff = i;
        break;
    }
}

var result = new List<Item>(c.Count - cutOff - 1);
Enumerable.Range(cutOff + 1, c.Count - cutOff - 1).AsParallel()
    .ForAll(i => 
        {
            var j = i - cutOff - 1;
            result[j] = (Item)c[i];
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:15:49.063

这第一个声明：

```
List<Item> l1 = new List<Item>();
foreach (Item i in c) { 
  if (i.time > TIME) { 
    l1.Add(i); }
} 
```

它是否会提高性能更改为（将在运行 foreach 之前过滤列表）：

```
List<Item> l1 = new List<Item>();
foreach (Item i in c.Where(a => a.time > TIME)) { 
    l1.Add(i);
} 
```

# oracle-adf - ampool 中的应用程序模块实例未被重用

> ID：12673832
> 
> 赞同：-1
> 
> 时间：2012-10-01T13:02:25.050
> 
> 标签：oracle-adf

我正在关注托管在 weblogic 上的 adf 应用程序的 ampool 指标。我正在使用多个用户会话运行事务。与使用更严格的其他应用程序模块相比，我的应用程序模块池之一显示实例的最大数量突然增加。什么可能导致我的 am 实例不被重用但总是创建新实例？任何方向都将受到高度赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:52:12.960

可能是您正在从不会将 AM 释放回池的代码中访问此 AM？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:22:52.840

AM 的 AM 池设置是什么？您是否更改了设置或保持默认设置？

# linux - 删除文件 txt 中所有没有模式的字符

> ID：12673833
> 
> 赞同：0
> 
> 时间：2012-10-01T13:02:33.923
> 
> 标签：linux

我有一个非常大的文件，其中包含模式信息：

```
 0 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>274</font>
 1 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>284</font>
 2 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>299</font>
 3 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>296</font>
 4 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>273</font> 
```

我想将此行更改为

```
274
284
299
296
273 
```

模式是：

```
'#4e9a06'>[0-9]*</font> 
```

我用这个：

```
perl -i.bak -pe 's/.*4e9a06//' copy.txt 
```

但我仍然有：

```
'>274</font>
'>284</font>
'>299</font>
'>296</font>
'>273</font>
'>272</font> 
```

我尝试使用 sed ：

```
cat file.bak | sed 's/form>/ /g' > copy2.txt 
```

但这行不通。你能帮我删除其余的字符吗？谢谢你的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:18:15.700

假设您有一个名为 的文件`copy.txt`，其中存储了您的信息。然后你只需运行：

```
cat copy.txt |egrep -o ">[0123456789]+<"|tr -d  "<"|tr -d ">" 
```

这会打印文件的行，然后只输出匹配的正则表达式的一部分（而不是整行，就像 egrep 那样）。然后你把“<”和“>”剪掉，这也是匹配的。

-编辑-

也许更友好的语法和一些额外的修复。

```
cat copy.txt |egrep -o ">[1-9][0-9]*<"|tr -d  "<"|tr -d ">" 
```

这里的数字必须以 1 到 9 的数字开头。然后其他数字可能存在也可能不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:22:07.663

请尝试以下方法：

```
sed -e "s#.*>\([0-9]*\)</font>\$#\\1#" source.txt >out.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:24:22.413

我有使用 Python 的解决方案：

```
$ python -c 'import re,sys; print "\n".join(",".join(j for j in re.findall("06'\''>(.*)</fo", i)) for i in sys.stdin)' <xy
274
284
299
296
273 
```

不是一个好的程序，但我打算将其作为单行程序来完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T13:43:12.410

请不要使用正则表达式解析 html。

```
cat<<EOF | html2text | perl -lne 'print for /int (\d+)/g'
0 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>274</font>
1 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>284</font>
2 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>299</font>
3 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>296</font>
4 <font color='#888a85'>=&gt;</font> <small>int</small> <font color='#4e9a06'>273</font>
EOF 
```

输出 ：

```
274
284
299
296
273 
```

# css - Internet Explorer 8 中的字体旋转

> ID：12673834
> 
> 赞同：1
> 
> 时间：2012-10-01T13:02:37.743
> 
> 标签：css, internet-explorer-8

我正在使用 font-face 并使用过滤器旋转包含它的 div：

```
 .ie8{
font-family: cscriptie, Georgia, Palatino, Times New Roman, serif;
 background: transparent\9;
filter: progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand',
        M11=1.5320888862379554, M12=-1.2855752193730787,
        M21=1.2855752193730796, M22=1.5320888862379558),progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF, endColorstr=#00FFFFFF),alpha(opacity = 100);
 zoom: 1;
 position:absolute;
}

@font-face {
    font-family: cscriptie;
    src: url('/fonts/cscript-webfont.eot');
    src: url('cscript-webfont.eot?#iefix') format('embedded-opentype'),
         url('cscript-webfont.woff') format('woff'),
         url('cscript-webfont.ttf') format('truetype'),
         url('cscript-webfont.svg#webfont') format('svg');
} 
```

它在除 IE 8 和 IE 7 之外的所有浏览器中都能正常工作，在这些浏览器中，字母周围的黑色像素看起来很奇怪。

我不能使用背景颜色，因为页面之间的背景会发生变化。

这只发生在 IE 8 和 7 上的过滤器旋转以及字体。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:15:27.073

这不会是小菜一碟...

当您使用过滤器时，文本抗锯齿功能会关闭...

尝试使用这个 CSS 属性：

```
font-weight:lighter; 
```

你可能会走运。

否则你可能不得不使用[cufons](http://fearlessflyer.com/2009/10/cufonize-your-pages-how-to-add-cufon-to-your-web-design/)、 svg、 flash、 pngs ......或者干脆忘记 ie

# iphone - iPhone AudioStreamer AudioQueue 实时 FFT

> ID：12673835
> 
> 赞同：1
> 
> 时间：2012-10-01T13:02:38.513
> 
> 标签：iphone, mp3, fft, audioqueue, audiostreamer

我正在使用 Matt Gallagher 的 AudioStreamer 播放 mp3 音频流。现在我想在 iPhone 上使用 OpenGL ES 实时进行 FFT 并可视化频率。

我想知道在哪里捕获音频数据并将其传递给我的“Super-Fancy-FFT-Computing-3D-Visualization-Method”。Matt 正在使用 AudioQueue 框架，并且设置了一个回调函数：

```
err = AudioQueueNewOutput(&asbd, ASAudioQueueOutputCallback, self, NULL, NULL, 0, &audioQueue); 
```

回调看起来像这样：

```
static void ASAudioQueueOutputCallback(void*                inClientData, 
                                AudioQueueRef           inAQ, 
                                AudioQueueBufferRef     inBuffer){...} 
```

在我从 AudioQueueBufferRef 传递数据的那一刻，结果看起来很奇怪。但是对于 FFT 和可视化，有很多地方可以搞砸，我想确保至少将正确的数据传递给 FFT。我以这种方式从缓冲区读取数据而忽略了每一秒的值，因为我只想分析一个通道：

```
SInt32* buffPointer = (SInt32*)inBuffer->mAudioData;
int count = 0;
for (int i = 0; i < inBuffer->mAudioDataByteSize/2; i++) {
    myBuffer[i] = buffPointer[count];
    count += 2;
} 
```

然后使用包含 512 个值的 myBuffer 进行 FFT 计算。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T18:12:34.110

与其将您从音频文件流回调中收到的数据直接发送到音频队列，不如将其转换为 PCM，运行您的分析，然后如果您仍需要播放它，则将其提供给音频队列（作为 PCM）。要进行转换，您可以使用音频转换器服务（这将是一场没有尽头的尖叫噩梦）或离线音频队列。

选项 3：查看 iOS 6 上的新音频队列“点击”，它可以让您查看队列中的数据。我仍然需要检查一下……它看起来很酷（我将在 CocoaConf 上发表三周的演讲，所以，是的……）

（转自： http: [//lists.apple.com/archives/coreaudio-api/2012/Oct/msg00034.html](http://lists.apple.com/archives/coreaudio-api/2012/Oct/msg00034.html)）

# ruby - 从外部停止套接字读取操作的优雅方法

> ID：12673837
> 
> 赞同：3
> 
> 时间：2012-10-01T13:02:42.260
> 
> 标签：ruby, networking

我在 Ruby 中实现了一个小型客户端服务器应用程序，但遇到以下问题：服务器在新线程中为每个连接的客户端启动一个新的客户端会话，但应该可以关闭服务器并停止所有客户端会话礼貌'的方式从外部而不只是杀死线程，而我不知道它处于哪个状态。

所以我决定客户端会话对象获得一个可以从外部设置的“停止”标志，并在每个操作之前进行检查。问题是它不应该等待客户端，如果它只是在等待请求。我有以下临时解决方案：

```
def read_client
  loop do
    begin 
      timeout(1) { return @client.gets }
    rescue Timeout::Error
      if @stop
        stop # Notifies the client and closes the connection
        return nil
      end
    end
  end
end 
```

但这很糟糕，看起来很糟糕而且直观，这应该是一件很正常的事情，必须有一个“正常”的解决方案。我什至不知道它是否安全，或者 get 操作是否会读取客户端请求的一部分，但不是全部。另一个问题是，如果设置/获取布尔标志是 Ruby 中的原子操作（或者如果我需要一个额外的 Mutex 标志）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:34:08.470

每个客户端线程的方法通常是服务器设计的灾难。如果没有特定于操作系统的技巧，阻塞 I/O 也很难中断。查看非阻塞套接字，例如，请参阅[此问题](https://stackoverflow.com/questions/2174266/ruby-tcp-server-class-with-non-blocking-or-mutlithread-functionality)的答案。

# c - C语言中的atoi（）保存邮政编码

> ID：12673854
> 
> 赞同：0
> 
> 时间：2012-10-01T13:03:21.020
> 
> 标签：c, atoi

从文件中读取时使用`atoi()`它会删除某些邮政编码中的第一个 0，例如：

```
int x = atoi("06461"); 
```

似乎在节省`x = 6461`。是否删除了函数的非重要 0 部分`atoi`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T13:04:57.030

它不会降为零。它存储号码。而作为数字（十进制）的 06461 和 6461 是完全相同的值。如何*呈现*数字由您决定——带 ( `printf("%05d",zip)`) 或不带 (`%d`在 的情况下`printf`) 前导零。

PS 请注意，c 人对前导零非常困惑，他们倾向于将数字视为八进制。PPS 我完全支持 Joachim 对您的问题的评论。

# android - 如果使用 webview 完成身份验证，如何使用 Intent 过滤器处理 OAuth URL 回调？

> ID：12673862
> 
> 赞同：17
> 
> 时间：2012-10-01T13:03:30.487
> 
> 标签：android, authentication, webview, callback, oauth-2.0

我正在开发一个使用 OAuth 进行身份验证的应用程序，但我在处理 OAuth 回调时遇到了一点问题。

**认证**

我的应用程序有一个**webview**作为登录屏幕，我得到一个 url 来在我的 webview中加载**身份验证表单。**假设网址是：

```
https://myoauthhost.com/oauth/auth?response_type=code&client_id=XXXXXXX&redirect_uri=YYYYYYYY&scope=ZZZZZZZZZZ 
```

在身份验证活动（AuthActivity.java）中，我有以下内容：

```
 String authURL = https://myoauthhost.com/oauth/auth?response_type=code&client_id=XXXXXXX&redirect_uri=YYYYYYYY&scope=ZZZZZZZZZZ
    myWebView.loadUrl(authURL); 
```

在 manifest.xml 中，我有以下 oauth 回调处理：

```
<activity
            android:name=".AuthActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >

            <intent-filter>
                <action android:name="android.intent.action.VIEW" />

                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />

                <data
                    android:host="authprovider"
                    android:scheme="auth" />
            </intent-filter>
</activity> 
```

**问题**

此 url 在 webview 中使用时（使用 loadURL() 方法）重定向到另一个包含**REAL OAUTH WEB FROM**的 url （应该在 webview 中加载）。问题是这种**重定向**会自动启动 Android 中的**意图选择**：由于 URL 应该由 Web 浏览器处理，Android 允许您选择手机上可用的 Web 浏览器之一来打开 URL。

由于这不是我想要的，我必须包含以下代码，以便在 webview 中处理重定向但不启动 web 浏览器（或其他）：

```
myWebView.setWebViewClient(new WebViewClient()); 
```

因此，使用此代码，重定向是“在 webview 内”处理的，并且我显示了登录屏幕。

然后我可以输入凭据（例如：通过 Twitter 的 oauth），但是当身份验证完成时，会收到回调，但是应该处理回调的活动（配置为在清单中接收回调的 AuthActivity）没有启动。相反，我让 webview 显示一条消息，指出无法找到 url 回调（在我们的例子中： authprovider://auth/XXX?xxx=yyy 在清单中配置）。

原因可能是以下代码：

```
myWebView.setWebViewClient(new WebViewClient()); 
```

前面介绍过，告诉Android webview 处理一切。所以现在，由于回调 url 不是 web url，它处理起来很麻烦，甚至无法启动可以处理它的意图。

**问题**

我怎么解决这个问题 ？我应该能够让活动处理回调，但不能让 webview 尝试加载它。

任何帮助，将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-01T13:19:29.173

首先在您的清单中，将这些属性设置为启动 WebView 的活动

```
android:launchMode="singleInstance" 
```

并为其添加一个意图过滤器

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    <data android:scheme="oauth-testing" />
</intent-filter> 
```

然后在用户单击登录按钮时在您的代码中

```
mReqToken = mTwitter.getOAuthRequestToken(CALLBACK_URL);
WebView webView = new WebView(this);
webView.requestFocus(View.FOCUS_DOWN);
webView.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
            case MotionEvent.ACTION_UP:
            if (!v.hasFocus()) {
                v.requestFocus();
            }
            break;
        }
        return false;
    }
});
webView.loadUrl(mReqToken.getAuthenticationURL());
mainLayout.removeAllViews();
mainLayout.addView(webView); 
```

这里是回调 url
`private static final String CALLBACK_URL = "oauth-testing:///";`
，您正在创建一个动态 webview 并向用户显示。登录后，webview 关闭，代码进入`onNewIntent()`. 您需要在登录后实现您的功能。

```
@Override
protected void onNewIntent(Intent intent) {
    super.onNewIntent(intent);
    dealWithTwitterResponse(intent);
}  
private void dealWithTwitterResponse(Intent intent) {
    Uri uri = intent.getData();
    System.out.println("URI=" + uri);
    if (uri != null && uri.toString().startsWith(CALLBACK_URL)) {
        String oauthVerifier = uri.getQueryParameter("oauth_verifier");
        authoriseNewUser(oauthVerifier);
    }
} 
```

我知道我已经添加了很多代码片段，其中一些可能不相关，但我希望有一天它会对某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:15:05.400

好吧，首先您可能需要调用您的服务提供商提供的 URL，如果存在任何重定向，您将获得 HTTP 状态代码 3xx。接下来，如果存在任何重定向，您可以尝试调用实际 URL。对于正常的 HTTP 响应，您将获得 HTTP 2xx 状态码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-09T09:31:06.630

由于您拥有 WebView 的对象，因此您可以重载它，然后以这两种方式处理您想要导航到 Activity 的 url。

```
private  class MyWebView extends WebViewClient{   
            @TargetApi(Build.VERSION_CODES.N)
            @Override
            public boolean shouldOverrideUrlLoading(WebView webView, WebResourceRequest request)
            {
                Uri uri = request.getUrl();
                return shouldOverrideUrlLoading(uri.toString());
            }

            private boolean shouldOverrideUrlLoading(final String url)
            {
                Log.i(TAG, "shouldOverrideUrlLoading() URL : " + url);
                   //your code to handle the url for navigation will go here
                try{
                      if(url.contains("yourcondition")){
                        //1st way to handle 
                        Intent intent = new Intent(Intent.ACTION_VIEW);
                        intent.setData(Uri.parse(url));
                        YourActivity.this.startActivity(intent);
                       }else{
                           //2nd way 
                        Intent intent = new Intent(YourActivity.this,NewActivity.class);
                        //you can set the data 
                        intent.setData(Uri.parse(url));
                        YourActivity.this.startActivity(intent);
                       }
                     }catch(ActivityNotFoundException e) {    
                       Log.e(LOGTAG,"Could not load url"+url);
                    }                    
               return false;
               // return true; // this True means that application wants to leave the WebView and try to go to browser and handle the url itself, otherwise return false.
             } 
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) 
    {

        try {
              if(url.contains("yourcondition")){
                //1st way to handle 
              Intent intent = new Intent(Intent.ACTION_VIEW);
              intent.setData(Uri.parse(url));
              YourActivity.this.startActivity(intent);
            }else{
           //2nd way 
            Intent intent = new Intent(YourActivity.this,NewActivity.class);
           //you can set the data 
            intent.setData(Uri.parse(url));
            YourActivity.this.startActivity(intent);
            }

        }   catch(ActivityNotFoundException e) {

            Log.e(LOGTAG,"Could not load url"+url);
        }

        return false;     
    }
} 
```

您可以设置 `mWebView.setWebViewClient(new WebViewClient());`默认设置，但只需添加默认自定义 WebViewClient 将仅允许 WebView 处理任何已加载的 url 本身，即在 webView 而不是浏览器中。

但是如果你通过上面的传递来重载，`class MyWebView`那么`mWebView.setWebViewClient(new MyWebView());`你可以控制 url 的加载，你可以实现同样的事情

```
myWebView.setWebViewClient(new WebViewClient(){ 

                @TargetApi(Build.VERSION_CODES.N)
                @Override
                public boolean shouldOverrideUrlLoading(WebView webView, WebResourceRequest request)
                {
                    Uri uri = request.getUrl();
                    return shouldOverrideUrlLoading(uri.toString());
                }

                private boolean shouldOverrideUrlLoading(final String url)
                {
                    Log.i(TAG, "shouldOverrideUrlLoading() URL : " + url);
                       //your code to handle the url for navigation will go here
                    try{
                          if(url.contains("yourcondition")){
                            //1st way to handle 
                            Intent intent = new Intent(Intent.ACTION_VIEW);
                            intent.setData(Uri.parse(url));
                            YourActivity.this.startActivity(intent);
                           }else{
                               //2nd way 
                            Intent intent = new Intent(YourActivity.this,NewActivity.class);
                            //you can set the data 
                            intent.setData(Uri.parse(url));
                            YourActivity.this.startActivity(intent);
                           }
                         }catch(ActivityNotFoundException e) {    
                           Log.e(LOGTAG,"Could not load url"+url);
                        }                    
                   return false;
                   // return true; // this True means that application wants to leave the WebView and try to go to browser and handle the url itself, otherwise return false.
                 } 

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) 
    {

        try {
             if(url.contains("yourcondition")){
             //1st way to handle
            Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setData(Uri.parse(url));
            YourActivity.this.startActivity(intent);
            }else{
             //2nd way 
                Intent intent = new Intent(YourActivity.this,NewActivity.class);
           //you can set the data 
            intent.setData(Uri.parse(url));
            YourActivity.this.startActivity(intent);
           }    
        }   catch(ActivityNotFoundException e) {

            Log.e(LOGTAG,"Could not load url"+url);
        }

        return false;      

    }}); 
```

如果您无法控制 webview 对象，那么这不是我将在解决此问题后更新的解决方案。

# iphone - iOS - 检测我如何到达 viewController

> ID：12673865
> 
> 赞同：0
> 
> 时间：2012-10-01T13:03:48.873
> 
> 标签：iphone, ios, ipad

我有 3 个按顺序出现的 viewController，A -> B -> C

A 调用 B 使用

```
[self.navigationController pushViewController:controllerB animated:YES]; 
```

C调用B

```
[self.navigationController popViewControllerAnimated:YES]; 
```

有没有办法让 B 知道是谁叫它的，A 还是 C？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:07:32.487

您可以使用 NavigationControllers viewControllers 属性。查看导航堆栈中的项目。

> 根视图控制器在数组中的索引 0 处，后视图控制器在索引 n-2 处，顶部控制器在索引 n-1 处，其中 n 是数组中的项目数。

您想要索引 n-2 处的视图控制器。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)

**编辑（添加示例）**

```
NSString *previousView = NSStringFromClass([[self.navigationController.viewControllers objectAtIndex:(self.navigationController.viewControllers.count - 2)] class]);
if([previousView isEqualToString:@"SettingsViewController"]){
     // Do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:07:12.680

是的。

制作一个名为（或任何你想要的）`@property`的类型。当你推送它时，只需将它的属性设置为当前类。`UIViewController``comingFrom`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:07:47.867

当我重用视图控制器时，我能想到的一种方法是在视图控制器上设置一个可以查询的属性。分配/初始化您的视图控制器，设置您的属性（NSString 或 NSInteger），然后推送视图。这样，您可以使用代码来查询该属性的创建者和推送者。

简单，但有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T13:08:40.563

是的，您可以创建一些枚举，例如 ClassA 和 ClassC，并在推送或弹出时只为该枚举分配相应的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T13:26:13.417

如果 B 从 A 调用，-(void)viewDidLoad{} 方法将被调用，如果 B 从 C 调用该方法不应该调用，因此您可以全局放置变量，并在 viewDidLoad() 方法中分配一些值。并在您按下 C 时删除该值，然后在 viewWillAppear 方法中您知道它在哪里。

# javascript - 您可以将未定义的变量设置为函数参数吗？

> ID：12673866
> 
> 赞同：3
> 
> 时间：2012-10-01T13:03:56.847
> 
> 标签：javascript, jquery, function, variables, parameters

我正在构建一个函数来匹配变量类型。它将是`typeof <var> === "something"`.

我的函数调用如下所示：`is("some text")["string"]`。它返回真，或`is([])["element"]`。现在它返回 false，但我有一个问题。

例如，如果我尝试将一个未定义的变量（如“undefVar”）发送到一个函数，我期待这样的东西：`is(undefVar)["undefined"]`，但我收到一个错误，指出“undefVar”未定义。

**我可以使用未定义的变量以某种方式使我的函数工作吗？这可能吗？**

**ps：**我必须经常使用这个功能，所以（对我来说）使用这样的东西会更好 :`is(var)[type]`而不是`typeof var === type`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:06:18.657

`typeof`对不存在的变量是特殊的。你不能用函数来模仿它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:06:34.860

不，您不能盲目地将未定义的变量从调用站点传递给您的函数，并全局更改 JS 引擎的行为以适应这种情况。

`typeof`是内置运算符，不受“普通”函数规则的约束，这就是为什么它可以做自定义函数不能做的事情。

最后，我强烈反对使用替代语法实际上更可取，即使这是可能的。

# charts - 使用场景构建器创建的 Javafx PieChart 不显示数据

> ID：12673873
> 
> 赞同：4
> 
> 时间：2012-10-01T13:04:25.390
> 
> 标签：charts, javafx, builder, scene, pie-chart

我在使用 Oracle 的一些 Javafx 示例时遇到问题，因为“场景”不是使用 Scene Builder 创建的，因此代码与我想要使用的代码不同。

我正在尝试使用包含饼图的场景构建器创建布局。我已将图表的 fxid 设置为“myPieChart”，并`@FXML private Chart myPieChart;`在代码开头设置了相应的值。

我还添加了以下在初始化时执行的代码，我认为这些代码会创建图表：-

```
 ObservableList<PieChart.Data> pieChartData = FXCollections.observableArrayList(
            new PieChart.Data("Grapefruit", 13),
            new PieChart.Data("Oranges", 25),
            new PieChart.Data("Plums", 10),
            new PieChart.Data("Pears", 22),
            new PieChart.Data("Apples", 30));

    PieChart myPieChart = new PieChart(pieChartData); 
```

所有的值都被放入一个可观察的列表中，然后用 ObsevableList 值实例化饼图。

不幸的是，我的饼图没有显示......我想念什么？

为任何帮助而欢呼。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T20:05:08.007

不要创建新的饼图。

FXML 加载过程将为您创建一个图表实例并将其作为 FXML 定义的布局窗格的子项插入。@FXML 注释会将图表的引用注入到您的控制器中。

您在 Controller 的初始化程序中需要做的就是用您的数据填充现有图表。您可以通过在 myPieChart 上调用[setData来完成此操作。](http://docs.oracle.com/javafx/2/api/javafx/scene/chart/PieChart.html#setData%28javafx.collections.ObservableList%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-18T12:06:51.553

您可以通过在 fxml 中为图表设置 id 来做到这一点

```
public class GraphScreenController implements Initializable {

    @FXML
    PieChart chart;

@Override
public void initialize(URL url, ResourceBundle rb) {
    // TODO
 ObservableList<PieChart.Data> pieChartData =
            FXCollections.observableArrayList(
            new PieChart.Data("Executed", 60),
            new PieChart.Data("Passed", 25),
            new PieChart.Data("Fails", 15));

 chart.setData(pieChartData);

}
} 
```

# r - 根据 R 中一列中拆分的字符串重塑数据框

> ID：12673874
> 
> 赞同：7
> 
> 时间：2012-10-01T13:04:32.570
> 
> 标签：r, dataframe, reshape

我有以下数据结构

```
ID  Type  Values
1   A     5; 7; 8
2   A     6
3   B     2; 3 
```

我想使用 R 将其重塑为以下内容：

```
ID  Type  Values
1   A     5
1   A     7
1   A     8
2   A     6
3   B     2
3   B     3 
```

我一直在尝试解决如何使用 plyr 但没有任何成功。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T13:29:41.780

由于您要求`plyr`解决方案，因此您可以：

```
ddply(df, .(Type), function(foo) {
    values <- unlist(strsplit(c(foo$Values), ";"))
    data.frame(Type = rep(unique(foo$Type), length(values)), Values = values)
    }) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T05:37:02.263

一种`data.table`编码优雅的方法

```
library(data.table)
DT <- data.table(dat)
DT[, list(Value = unlist(strsplit(as.character(Values), '; '))), by = list(ID, Type)] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T13:42:30.633

我的镜头：

```
a <- data.frame(id = 1:3, 
                type = c("A", "A", "B"), 
                values = c("5; 7; 8", "6", "2; 3"))

g <- strsplit(as.character(a$values), ";")
data.frame(id = rep(a$id, lapply(g, length)), 
            type = rep(a$type, lapply(g, length)),
            values = unlist(g)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T13:23:03.543

不是一个漂亮的答案，但它可能很有用

```
DF <- data.frame(ID=1:3,
                 Type=c('A','A','B'), 
                 Values=c(' 5; 7; 8', '6', ' 2;3')) # this is your df

    # split vectors and coercing values to be numeric
    List <- lapply(strsplit(Values, ';'), as.numeric)

# The desired output
    data.frame(ID=rep(ID, sapply(List, length)), 
               Type=rep(Type, sapply(List, length)),
               Values =   unlist(List))
 ID Type Values
1  1    A      5
2  1    A      7
3  1    A      8
4  2    A      6
5  3    B      2
6  3    B      3 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-01T17:33:30.837

到目前为止的答案都很棒。这是另一个。

```
# The data
DF <- data.frame(ID=1:3,
                 Type=c('A','A','B'), 
                 Values=c(' 5; 7; 8', '6', ' 2;3')) 
```

此解决方案使用`colsplit()`“reshape2”包中的函数。一个缺点是它希望您知道所需的结果列数。

```
require(reshape2)
DF2 <- data.frame(DF[-3], colsplit(DF$Values, ";", c("V.1", "V.2", "V.3")))
na.omit(melt(DF2, id.vars=c("ID", "Type")))
#   ID Type variable value
# 1  1    A      V.1     5
# 2  2    A      V.1     6
# 3  3    B      V.1     2
# 4  1    A      V.2     7
# 6  3    B      V.2     3
# 7  1    A      V.3     8 
```

从这里您可以根据需要对列进行排序和删除，以获得最终所需的输出。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T13:21:23.867

这应该可行，但也许有更好的方法：

```
#recreate data set
dat <- data.frame(ID=1:3, Type=c("A", "A", "B"), Values=c("5; 7; 8", "6", "2; 3"))
#split the Value column by ;
a <- strsplit(as.character(dat$Values), ";", fixed=TRUE)
#remove extra white
a <- lapply(a, function(x) gsub("^\\s+|\\s+$", "", x))
#get the length of each cell in Value so we can use this to index the rows
lens <- sapply(a, length)
#index rows and rename row names to numeric indexes
dat2 <- dat[rep(1:nrow(dat), lens), 1:2]
rownames(dat2) <- NULL
#add the stretched new column back
dat2$Value <- as.numeric(unlist(a)) 
```

# c# - C# WriteFile()，无法写入 USB HID 设备

> ID：12673875
> 
> 赞同：3
> 
> 时间：2012-10-01T13:04:36.670
> 
> 标签：c#

我对 C# 和 windows 编程相当陌生，我正在尝试在 USB HID 设备之间建立通信。我使用“SetupDiGetDevicexxxxxx”成功获取了设备路径，并使用“CreateFile()”获取了 Handle。下面是我的代码。

```
public const uint FILE_SHARE_READ = 0x00000001;
public const uint FILE_SHARE_WRITE = 0x00000002;
public const int OPEN_EXISTING = 3;
public const uint GENERIC_READ = 0x80000000;
public const uint GENERIC_WRITE = 0x40000000;
CreateFile(string Devicepath)
{
    HidHandle = CreateFile(Devicepath, GENERIC_READ | GENERIC_WRITE, FILE_SHARE_READ | FILE_SHARE_WRITE, 0, OPEN_EXISTING, 0, 0);                     
} 
```

获取设备句柄信息后，我正在调用写入文件函数，如下所示。

```
Result = WriteFile(HidHandle, outputReportBuffer[], outputReportBuffer.Length, NumberOfBytesWritten, 0); 
```

Outputbuffer 是长度为 8 的字节数组。由于某种原因，我无法写入 USB HID 设备。“结果”始终为零。任何帮助表示赞赏。另外，谁能告诉我如何验证它`HidHandle`是否有效。当我运行该程序时，我得到它作为“1124”。

我确实关注了关于此类问题的上一篇文章：[无法使用 writefile() 与 USB HID 设备成功通信](https://stackoverflow.com/questions/11691619/cannot-communicate-successfully-with-usb-hid-device-using-writefile)，但没有帮助。

下面是创建文件和写入文件的两种方法。

```
[DllImport("kernel32.dll", SetLastError = true)]
private static extern int CreateFile(string lpFileName, uint dwDesiredAccess, uint dwShareMode, uint lpSecurityAttributes, uint dwCreationDisposition, uint dwFlagsAndAttributes, uint hTemplateFile );    

[DllImport("kernel32.dll")]
static public extern bool WriteFile(int hFile,  byte lpBuffer, int nNumberOfBytesToWrite,  int lpNumberOfBytesWritten, int lpOverlapped) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T20:35:59.050

您可能必须使用 USB 库，例如[这个](http://code.google.com/p/libusbsharp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:16:38.313

我确信您使用如此低级的 Win32 函数是有原因的，但我建议您是否只想在某处写入文件，只需使用 .net 中的 File 类。

如果您只想写入字节，那么最简单的方法之一是使用 File.WriteAllBytes() 方法。

[http://msdn.microsoft.com/en-us/library/system.io.file.writeallbytes.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.writeallbytes.aspx)

# java - 如何查看 System.out 的可执行 jar？

> ID：12673878
> 
> 赞同：5
> 
> 时间：2012-10-01T13:04:46.433
> 
> 标签：java, eclipse, jar

我有一个小的 java 工具，它应该通过`System.out.println()`. 但是如果我将它导出为可运行的 jar 并运行它`javaw.exe -jar path\to\myfile.jar`，它会被执行但控制台上没有输出！

我可能做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T13:24:56.780

`javaw.exe`没有与之关联的控制台。你需要使用`java.exe`. 如果 java 不在路径上，请输入完整路径，例如`path\to\java.exe -jar path\to\myfile.jar`

# android - 清单屏幕支持仅设备和平板电脑条目

> ID：12673881
> 
> 赞同：5
> 
> 时间：2012-10-01T13:04:54.037
> 
> 标签：android, android-manifest, google-play, android-screen-support, android-market-filtering

什么应该是仅支持设备而不支持平板电脑的 Android 应用程序的清单条目。设备尺寸可以变化，但最大应为 7 英寸。

我已经为设备和平板电脑开发了一个不同版本的应用程序，现在我想在市场上推出这两种版本，但在清单条目之后也支持 10 英寸平板电脑。

```
<uses-sdk
    android:minSdkVersion="6"
    android:targetSdkVersion="8" />

<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:resizeable="true"
    android:smallScreens="true"
    android:xlargeScreens="false" /> 
```

我想限制用户在 10 英寸平板电脑上下载此版本，并且 10 英寸平板电脑版本不应该在 10 英寸平板电脑上下载。

请为此建议我完美的清单条目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T09:36:53.097

在尝试了支持屏幕和 SDK 版本的所有可能组合后，我仍然无法限制 10 英寸平板设备下载该应用程序。

如果您只想排除 10 英寸平板设备，只需从支持设备列表中手动排除所有平板设备。

如果您有相同应用程序的另一个构建，则也上传该构建并使其版本代码高于设备构建。版本代码在任何情况下都不能冲突。因为如果多个 apk 支持任何设备，则更高版本的 apk 将支持该设备。

当我在我的谷歌帐户中上传两个版本时，以下注释/警告似乎对我有帮助：

```
"Warning: Multiple active APKs support some of the same devices. If a device is supported by more than one APK, it will receive the one with the higher version." 
```

并遵循我的应用程序的清单条目：

对于设备构建：

```
<uses-sdk
android:minSdkVersion="6"
android:targetSdkVersion="8" />

<supports-screens
android:anyDensity="true"
android:largeScreens="true"
android:normalScreens="true"
android:resizeable="true"
android:smallScreens="true"
android:xlargeScreens="false" /> 
```

对于平板电脑构建：

```
<uses-sdk
android:minSdkVersion="6"
android:targetSdkVersion="8" />

<supports-screens
android:anyDensity="true"
android:largeScreens="false"
android:normalScreens="false"
android:resizeable="false"
android:smallScreens="false"
android:xlargeScreens="true" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:12:18.387

您应该在清单中使用此属性

`android:largestWidthLimitDp="enter mobile pixel value which above you want restrict."`

```
<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:resizeable="true"
    android:largestWidthLimitDp="500"
    android:smallScreens="true"
    android:xlargeScreens="false" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:17:04.457

看看[http://developer.android.com/guide/topics/manifest/supports-screens-element.html](http://developer.android.com/guide/topics/manifest/supports-screens-element.html)

禁用超大屏幕的代码是

```
<supports-screens
 android:xlargeScreens="false"
 /> 
```

据我所见，这仍然允许您从 Eclipse 在平板设备上运行该应用程序，但应在发布时禁用它。

# c# - 扩展 TabControl 和 TabItem

> ID：12673884
> 
> 赞同：0
> 
> 时间：2012-10-01T13:05:10.797
> 
> 标签：c#, wpf, xaml, tabcontrol

我只是为了好玩而尝试扩展 TabControl 和 TabItem；包括提供自定义样式。我正在以编程方式创建 ExTabControl，并将几个 ExTabItem(myDataObject) 添加到 tabcontrol。myDataObject 有几个属性，例如“Title”和“Editor”。编辑器是 UIElement 类型。

我正在努力解决的是如何将 Editor 属性绑定为选项卡面板的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T17:43:03.430

将选项卡项的内容属性绑定到控件或其他属性。

# matlab - 将矩阵的每一列乘以另一个矩阵

> ID：12673891
> 
> 赞同：7
> 
> 时间：2012-10-01T13:05:40.517
> 
> 标签：matlab, matrix, vectorization, matrix-multiplication

我有一个`M x N`矩阵。我想将每一`N`列乘以一个`M x M`矩阵。以下循环执行此操作，但我不知道如何对其进行矢量化。

```
 u=repmat(sin(2*pi*f*t),[n 1]);
 W = rand(n);
 answer = size(u);
 for i=1:size(u,2)
   answer(:,i) = W*u(:,i);
 end 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-01T13:15:18.080

您只需将两个矩阵相乘：

```
answer = W*u; 
```

想一想：在循环的每次迭代中，您都将矩阵乘以向量。该操作的结果是一个向量，您将其保存到第 i 列的答案中。矩阵乘法是类似的事情：您可以将其理解为矩阵 (W) 与一组向量的乘法，这些向量形成您的矩阵 u。

所以你的代码很好，只需删除循环:)

# c# - 显示正在观察剪贴板的进程

> ID：12673893
> 
> 赞同：0
> 
> 时间：2012-10-01T13:05:46.867
> 
> 标签：c#, windows

为了找出用户报告的一些错误，我需要一些方法来找出当前正在观察剪贴板的进程。有没有办法做到这一点（甚至是已经这样做的应用程序）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:24:59.857

直截了当的答案是枚举“全球挂钩链”。然而，这是一个相当艰难的过程。据我所知，没有 C# 代码可以做到这一点。

[在 windows 中检索全局钩子链](https://stackoverflow.com/questions/3746193/retrieve-the-global-hook-chain-in-windows)

可以通过列出应用程序中加载的所有模块来解决此问题 - 通过检查已注入的 DLL，您可能能够了解哪些已安装的应用程序导致问题。这在代码或第三方应用程序中很容易实现。请参阅[如何列出所有已加载的程序集？](https://stackoverflow.com/questions/458362/how-do-i-list-all-loaded-assemblies)

上述问题的答案提供了一些见解：[https ://stackoverflow.com/a/3748945/1042744](https://stackoverflow.com/a/3748945/1042744)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:08:35.373

剪贴板“挂钩”可能会有所帮助。

[http://www.codeproject.com/Articles/19858/Global-Windows-Hooks](http://www.codeproject.com/Articles/19858/Global-Windows-Hooks)

# javascript - 第二次从 DropDownList 中选择一个值时。它不使用新选择的值。它使用旧值

> ID：12673895
> 
> 赞同：0
> 
> 时间：2012-10-01T13:05:50.663
> 
> 标签：javascript, jquery, asp.net

我有一个名为“ddlFiles”的 div。它包含一个 DropDownList，其中包含一堆 id。我想要做的是让用户选择一个 id，然后通过传入选定的值来执行操作。（存储过程需要它）该操作第一次通过。但是当我再次尝试选择一个 id 时，它会使用旧的 id 而不是新的。因此，为了让我传入正确的 id，我必须让用户选择一个新 id 两次，然后才能真正采用第二个新 id。

（注意：viewExpensesGrid 是我的 flexigrid）——不是很有用，但我想我会把它添加进去。

这是我从 DropDownList 获取所选值的函数，然后将其传递给函数：

```
 function getCaseFiles(canMoveExpenses) {
            //create Popup with content from div
            $('#ddlFiles').dialog({
                autoOpen: true,
                height: 'auto',
                width: 'auto',
                modal: true,
                buttons: {
                    "Ok": function () {
                        var dropDownList = document.getElementById("ddlCaseFilesNew");
                        var newCaseDdl = dropDownList.options[dropDownList.selectedIndex].value;
                        //alert("newCaseDdl = " + newCaseDdl);

                        var oldCaseFile = $("#hidCaseFile").val();
                        //alert(oldCaseFile);

                        if (newCaseDdl != -1) {
                            moveCasefile(canMoveExpenses, newCaseDdl, oldCaseFile);
                            $(this).dialog('close');
                            $("#viewExpensesGrid").flexReload();//simply refresh flexigrid
                        }
                        else {
                            showMessage("Error. Please Select a Value From The Lists.");
                        }
                    },
                    Cancel: function () {
                        $(this).dialog('close');
                        $("#viewExpensesGrid").flexReload();
                    }
                }
            });
        } 
```

这是我的 div =“ddlFiles”：

```
<div id="ddlFiles">
    <label>
        Select new CaseFile:</label>
    <asp:DropDownList runat="server" ID="ddlCaseFilesNew" DataSourceID="dsCaseFiles"
        DataTextField="Display" DataValueField="FileID" 
        OnPreRender="ddl_PreRender" Width="300px"/>
</div> 
```

我的存储过程需要一个新的 CaseId 和一个旧的 CaseId，hidCaseFile 是一个 hiddenField。（这已经包含旧文件 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:12:26.877

尝试改变这个：

```
var dropDownList = document.getElementById("ddlCaseFilesNew"); 
```

有了这个

```
var dropDownList = $("#<%= ddlCaseFilesNew.ClientID %>"); 
```

执行时，服务器控件的 ID 与 ID 标签中指定的 ID 不同，因此您应该使用其 ClientID 获取它，而不是“ddlCaseFilesNew”。

# php - 哪个使脚本更慢（我有两个选择）

> ID：12673897
> 
> 赞同：-1
> 
> 时间：2012-10-01T13:05:52.253
> 
> 标签：php

我在数据库中有一个名为 ads 的表，该表包含有关每个广告的数据。我想从表格中获取该数据以显示广告。

现在，我有两个选择：

1.  要么从表中获取所有数据并将其存储在数组中，然后，我将使用此数组处理以在其位置显示每个广告`by using loops`。
2.  或者直接访问表并获取每个广告数据以显示它，注意这种方式会消耗更多对数据库的查询。

哪一个是最好的方法，而不是让脚本更慢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:13:34.040

In most Cases #1 is better.

Because, if you can select the data (smallest, needed set) in one query, then you have less roundtrips to the database server.

Accessing Array or Objectproperties (from Memory) are usually faster than DB Queries. You could also consider to prepare your Data and don't mix `fetching` with `view` output.

The second Option "select on demand" could make sense if you need to "lazy load", maybe because you can or want to recognize client properties, like viewport.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:13:44.540

You should always try to run a PHP script with the least amount of database queries possible. Whenever you query the database, a request must be sent to the database (usually) over the network, and your script will idle until the request came back.

You should, however, make sure not to request any more data from the database than necessary. So try to filter as much in the WHERE clause as possible instead of requesting the whole table and then picking individual rows on the PHP layer.

We could help with writing that SQL query when you tell us how your table looks and how you want to select which ads to display.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T13:12:18.813

我想强调以下部分：

> 从表中获取所有数据并将其存储在数组中

您不需要将所有行存储到数组中。您还可以采用一个表示结果集的迭代器，然后使用该迭代器。

根据您使用的数据库对象，这通常是内存占用较少的变体。此外，您将在此处只运行一个查询，这是更可取的。

迭代器实际上在现代数据库结果对象中很常见。

此外，这有助于将视图代码与实际的数据库交互分离，您也可以推迟执行 SQL 查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T13:12:47.380

您应该尽量减少查询量，但也应该尽量减少实际从数据库中获取的数据量。

所以：只获取您实际展示的那些广告。例如，您可以使用`columnPK IN (1, 2, 3, 4)`来获取这些广告。

一个值得注意的例外：如果您的应用程序以“广告”为中心，并且您几乎在任何地方都需要它们，和/或它们不会消耗太多内存，和/或没有太多添加，那么在性能方面可能会更好将所有（或部分）广告存储在一个数组中。

最重要的是：`Measure, measure, measure`！

很难预测哪种算法最有效。通常，您实施某些“因为它会更有效”只是后来才发现您的优化实际上正在减慢您的应用程序。

# playframework-2.0 - Playframework 2 和 Netty 开发

> ID：12673900
> 
> 赞同：2
> 
> 时间：2012-10-01T13:06:03.170
> 
> 标签：playframework-2.0, netty

我在 web 上使用 playframework 2，但现在我还需要向 netty 添加一些自定义功能，添加 flash 套接字、flash 策略文件，也许稍后会添加一些流。所有的 netty 代码都可以在网上找到，这不是我的问题。我只是想知道如何将 playframework 与 netty 集成，将 playframework 2 中的这些功能添加到 netty 的最佳方法是什么。

例如，如果我编写一个自定义 playframework 2 模块，我会将 netty 代码放在哪里？或者我有一个 playframework 网络应用程序，我在哪里放置 netty 代码，我如何组织应用程序。

我不是不专业，所以解释越简单越好，谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-02T20:14:55.453

我知道这个问题很老了，但是对于下一个来到这里的人：

简短的回答： - play2 框架有一个 FlashPolicyHandler 类，它应该开箱即用。- 但是如果你想在 flash 和 netty 之间交换消息，你需要更多，你可以看看[netty 游戏服务器](https://github.com/menacher/java-game-server)就可以了。但它需要一点技能才能准确理解它是如何工作的。顺便说一句，它处理 as3 和 netty 之间的通信方式。这是一种自定义方式，我不确定您是否可以使用内置的 flex 方法（flex 是一个 gui as3 框架）。

现在，你谈论网络和游戏......让我们解释一下谁是谁......

Netty “只是”一个处理 NIO 非阻塞 IO 的框架。使用 netty，您可以让任何服务器监听套接字并将数据返回给客户端，在任何协议 TCP/UDP http SMTP 等中...例如 google netty+smtp 或 netty+UDP ..+loadbalancer 等。

小伙伴们都做了什么？他们在不修改网络的情况下构建了“在”网络之下的游戏。最好的理解方法是查看早期版本的 play 并查看 package 中的入口点类：play.server.Server。看看这个包，你会学到很多东西。您会看到他们为 http 和 https 分别创建了 2 个服务。如果您查看 HttpServerPipelineFactory 类，您会发现 flashPolicy 是他们处理的第一件事。

我不是play框架的高级用户，所以我不知道如何实现模块。但实际上你可以在服务器类中添加一个新服务，你需要一个新的 ChannelPipeline、一个新的 boostrap 等。

这是我为 amf3 所做的示例

```
 package org.domorobo.scale.server.amf3;
import java.net.InetSocketAddress;
import java.util.concurrent.Executors;
import org.domorobo.scale.server.api.IServer;
import org.jboss.netty.bootstrap.ServerBootstrap;
import org.jboss.netty.channel.socket.nio.NioServerSocketChannelFactory;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
public class AMF3Server  implements IServer{
    private static final Logger l = LoggerFactory.getLogger(AMF3Server.class);
    public void start() {
        l.info("server start");
        // Configure the server.
        NioServerSocketChannelFactory factory = null;
        factory = new NioServerSocketChannelFactory(Executors.newCachedThreadPool(),             Executors.newCachedThreadPool());
        ServerBootstrap serverBosstrap = new ServerBootstrap(factory);
        // Set up the event pipeline factory.
        try {
            serverBosstrap.setPipelineFactory(new Amf3PipelineFactory());
            serverBosstrap.setOption("child.tcpNodelay", true);
            // Bind and start to accept incoming connections.
            serverBosstrap.bind(new InetSocketAddress(8089));
            if (l.isInfoEnabled() == true) {
                l.info("server started listenning at 8089 port");
            }
        } catch (Exception e) {
            l.error("OHO\r\n", e);
        }
} 
```

您可以在 Amf3PipelineFactory 类中找到一个 frameDecoder 列表，您可以为自己的协议实现。

我们习惯做的是不直接修改框架，所以我不建议你修改播放框架。您应该询问他们在哪里放置新服务和新管道。

# java - Java 测试覆盖率：谁覆盖了什么？

> ID：12673912
> 
> 赞同：6
> 
> 时间：2012-10-01T13:07:04.500
> 
> 标签：java, unit-testing, static-analysis, emma

是否有类似于 emma 的工具，可以报告*哪个*测试涵盖了特定的实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T13:34:47.270

如果您想查看哪些测试覆盖了哪一行代码，您可以使用[Clover](http://www.atlassian.com/software/clover/overview "阿特拉斯三叶草") 来显示：

*   一条线被覆盖了多少次
*   哪些测试涵盖了有问题的行

要了解人们对 Clover 的期望，这里是一个屏幕截图： ![三叶草覆盖率报告。 打开了关于测试的信息，第 49 行](../Images/5e0035bbb93a87dd5d2bd59974787ba0.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-01T01:41:32.493

如果您不想费心支付/设置 Cover，一个**更简单的方法**是：

*   删除/禁用所有断点
*   在你知道覆盖它的测试的行上放一个断点
*   在调试模式下重新运行测试
*   查看堆栈跟踪以找到调用它的测试

此方法还允许您查看一行被覆盖的次数以及所有调用它的测试。

# javascript - 建议在 html 页面上使用许多元素 ID？

> ID：12673913
> 
> 赞同：1
> 
> 时间：2012-10-01T13:07:06.623
> 
> 标签：javascript, jquery, html, google-analytics

我想考虑一个案例，我有一个 html 页面，我想使用 javascript 解析元素的信息并将其用于#googleanalytics 跟踪

但是我有一个问题是最好为 html 页面的每个区域指定元素 ID 以通过 javascript/jquery 进行解析？可取吗？它对页面加载时间有影响吗？

示例：我有一个页面，我有大约 6-8 个（可能更多）区域来填充某些信息，并使用这些信息在谷歌分析中根据用户的交互进行跟踪，即用户点击特定区域

请让我知道你的建议。如果我需要提供更多信息。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T13:11:34.440

缺点是您正在向 html 添加字符。

好处是它使您编写的任何代码都更易于维护。最后，它可能会减小整个页面的大小，因为您不必进行繁琐的 DOM 遍历扭曲，而是`document.getElementById`为您完成所有这些工作。也`document.getElementById`很快。

使用 ID。只是不要重复它们。

# mysql - ROW_COUNT 在 INSERT 或 UPDATE 后返回 0

> ID：12673925
> 
> 赞同：6
> 
> 时间：2012-10-01T13:07:41.157
> 
> 标签：mysql

我有一个使用 Pear DB 处理 MySQL 数据库的 PHP 项目。该项目中的一个函数依赖于`SELECT ROW_COUNT()`找出受某些 SQL 语句影响的行数的结果。在 MySQL 5.1`ROW_COUNT()`上表现如预期，而在 5.5 上它总是返回**0**。

我也尝试过通过 MySQL Workbench 执行插入并执行`SELECT ROW_COUNT()`，它也返回 0。虽然，通过 MySQL cli 做同样的事情，工作正常！

有人偶然发现这个吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:14:14.410

MySQL 5.5 中的行为发生`row_count()`了变化。有关更多信息，请参阅[MySQL RefMan for row_count()](http://dev.mysql.com/doc/refman/5.5/en//information-functions.html#function_row-count)。

# javascript - 如果 Javascript 的原生 OOP 是无类的，那么构造函数呢？不是说要上课吗？

> ID：12673927
> 
> 赞同：3
> 
> 时间：2012-10-01T13:07:53.050
> 
> 标签：javascript, oop, prototype

我认为 Javascript 原生 OOP 系统据说是无类的，并且是基于对象的，而不是基于类的。但是我看到的每个示例总是以类似于以下的构造函数开头

```
function Person(name) {
    this.name = name;
} 
```

仅仅通过这种方式使用构造函数，这不是已经暗示正在使用一个类吗？（一个叫做 Person 的类）

* * *

细节：

如果我们可以使用

```
a.__proto__ = b; 
```

在任何 Javascript 平台上，那么我认为它是无类的。但我们不能那样做。如果我们想要这种行为，我们需要使用

```
function F() { }
F.prototype = b;
a = new F(); 
```

因此，必须使用构造*函数*。因此，如果构造函数是 Javascript 中的基石，则意味着它旨在成为 Person、Widget 等的构造函数，而这些都是类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T13:29:56.117

The OOP in Javascript is slightly different from, for instance, the Java OOP. The Javascript constructors do not refer to a class definition (so it is classless). Rather the constructor refers to a prototype. The base of the OOP in Javascript is the Object object (not the Object class), from where all the others objects are derived.

Prototyping grants you inheritance, and the possibility to extend an existing object with properties and methods.

I suggest you [this article](http://eloquentjavascript.net/chapter8.html).

In your example:

```
function Person(name) {
    this.name = name;
}

Mike = new Person('Mike'); 
```

the Person() function lets you create a new object prototyped on the `Object` object with a new property called `name`. Well, such a kind of function in Javascript oop is called a constructor.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T13:11:47.887

无类可能是描述 JavaScript 在 OOP 上的方法的不准确方式。

JavaScript 确实缺少*类定义*。

它还缺少类到对象的对应关系。

您无法检查使用构造函数（例如`Person`is *of class* `Person` ）实例化的对象。

您可以检查它是否包含预期的对象成员并得出结论它属于预期的类。

但是，如果对象成员在此过程中发生了更改，您将不会获得所需/预期的结果。

## TL;博士

JavaScript 公开*构造函数*（适当命名的*原型*）作为您可以定义用于构造普通对象的模板的方式。

重要的是原型调用的最终结果是一个带有一些预定义成员**的普通对象，而不是****某个类的对象**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T13:26:20.820

将 javascript 视为无类环境是件好事。如果您认为 javascript 类，您应该能够假设当有类并且它们被严格执行时，您可以做一些有用的事情。但是，您不能假设那些某些有用的东西。看起来像构造函数的东西的存在并不表示您正在创建一个类。

例如，假设你`var dude = Person('Ashton Kutcher')`。现在，当你 时`dude instanceOf person`，你会变得真实。你假设你有一个人的属性和方法。如果出现一些代码并说`dude.personMethod = undefined`. 现在，虽然`dude instanceOf person`仍然是正确的，但`personMethod`不再可用。

您可以将 javascript 视为具有类，但它是一个泄漏的抽象。在确定某物是什么以及您对它的期望时，最好将 javascript 视为具有原型继承系统。

更多信息在这里：http: [//javascript.crockford.com/prototypal.html](http://javascript.crockford.com/prototypal.html)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-01T13:21:39.153

使用对象构造器创建一个类，原型设计可以帮助我们创建该类的许多实例，而无需在每次需要时重新定义对象。

所以在上面的例子中

```
function Person(name)

 {
    this.name = name;
} 
```

你可以创建两个不同名字的人。例子 ：

var personA = new Person(); personA.name = "詹姆斯";

var personB = new Person(); personB.name = "汤姆";

警报（personA.name + personB.name）；

我建议您阅读此链接会有所帮助 [http://www.javascriptkit.com/javatutors/oopjs2.shtml](http://www.javascriptkit.com/javatutors/oopjs2.shtml)

# c++ - Why does this template code work in VS2010, but not in VS2012?

> ID：12673928
> 
> 赞同：10
> 
> 时间：2012-10-01T13:07:59.687
> 
> 标签：c++, templates, template-meta-programming, visual-c++-2012

I have inherited a project making heavy use of template meta programming, and am now in the process of upgrading from Visual Studio 2010 to 2012\. Some of the template-code no longer works in 2012\. I have distilled a minimal example:

```
template <typename T, int i>
class MyClass
{
private:
    typedef typename T::Nested<i> Found;
}; 
```

Gives this error message:

```
 source.cpp(5): error C2059: syntax error : '<'
    source.cpp(6) : see reference to class template instantiation 'MyClass<T,i>' being compiled
    source.cpp(5): error C2238: unexpected token(s) preceding ';' 
```

Further down in `MyClass`, I can use `T::Nested<i>`, it is just the `typedef` that does not work.

This example compiles in 2010, but not in 2012\. What is wrong with this code?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T13:16:49.127

Each VS version is more and more strict about requiring `template` and `typename`. You're missing a `template`, and VS2012 is right to complain.

# c# - HttpClient / 在 Metro 应用程序中

> ID：12673940
> 
> 赞同：3
> 
> 时间：2012-10-01T13:08:40.527
> 
> 标签：c#, windows-8, windows-runtime

我创建了一个 HttpClient 来等待服务。这在 asyncron 函数的线程中运行。问题是，服务会在 2 到 3 分钟后发送响应。目前，在我从服务器获得成功响应之前，这些任务将被取消。是否有可能等待超过 2 或 3 分钟的响应？在下面我的代码中：

```
private async Task<string> loginService()
    {
        try
        {
            string post_data = "user_data";

            string uri = "http://myserver.de";

            HttpClient httpClient = new HttpClient();
            httpClient.MaxResponseContentBufferSize = 256000;
            httpClient.DefaultRequestHeaders.Add("user-agent", "Mozilla/5.0 (compatible; MSIE 10.0; WIndows NT 6.2; WOW64; Trident/6.0)");

            HttpContent content = new FormUrlEncodedContent(new[]
            {
                new KeyValuePair<string, string>("data", post_data)
            });

            HttpResponseMessage response = await httpClient.PostAsync(new Uri(uri), content);
            response.EnsureSuccessStatusCode();
            string responseBodyAsText = await response.Content.ReadAsStringAsync();
            return responseBodyAsText;
        }
        catch
        {
            return "Error...";
        }
    } 
```

哪种方法最好，我可以在 3 分钟后得到回复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:28:05.270

超时的默认值为 100 秒。您可以使用 Timeout 属性将 HTTPClient 上的[超时设置为 3 分钟（或更高）。](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.timeout.aspx)

```
 httpClient.Timeout = new TimeSpan(0,3,0); 
```

# php - 返回最小数组值索引

> ID：12673943
> 
> 赞同：0
> 
> 时间：2012-10-01T13:08:59.547
> 
> 标签：php

我正在尝试比较 3 个不同的数组价格以找到最低的，以便我可以决定哪些数组值应该输入到数据库中，代码现在看起来像这样......

```
$array_a = array(
   "id"    => 398,
   "price" => 100 
);

$array_b = array(
   "id"    => 387,
   "price" => 60
);

$array_c = array(
   "id"    => 127,
   "price" => 50
);

if($array_a && $array_b && $array_c){
   $newArr = array($array_a['price'], $array_b['price'], $array_c['price']);
   array_keys($newArr, min($newArr));
   print_r($newArr)."\n"; 
} 
```

上面的代码没有返回具有最低价格的数组的正确索引，在这种情况下为 2 (array_c)，找出最低值的键的正确方法是什么。

还有什么是确保只有数字与 min() 函数而不是字符串进行比较的最佳方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:12:20.307

例如，您可以以这种方式自动化它：

```
$newArr = array($array_a['price'], $array_b['price'], $array_c['price']);
asort($newArr, SORT_NUMERIC);
echo "Minimum: ".reset($newArr).", given in array #".key($newArr); 
```

我不太确定如何回答您的最后一个问题——如果这些值实际上没有输入为数字，会发生什么？

**更新：**这是排除非数字值的一种方法：

```
asort($newArr, SORT_NUMERIC);
while (!is_numeric(current($newArr))) next($newArr);
if (key($newArr) === null) {
    echo "No valid elements found";
}
else {
    echo "Minimum: ".current($newArr).", given in array #".key($newArr);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:14:16.500

你可以做：

```
$newArr = array($array_a['price'], $array_b['price'], $array_c['price']);
sort($newArr);
$lowest = array_shift($newArr); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T13:19:06.610

试试这个：

```
$keys = array_keys($your_array);
asort($keys);
$min = $keys[0];
echo "Smallest index: ".$min; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T13:19:53.583

```
<?php
$array_a = array(
   "id"    => 398,
   "price" => 100 
);

$array_b = array(
   "id"    => 387,
   "price" => 60
);

$array_c = array(
   "id"    => 127,
   "price" => 50
);

if($array_a && $array_b && $array_c){
   $newArr = array($array_a['price'], $array_b['price'], $array_c['price']);
   $key_min = array_keys($newArr, min($newArr));
   echo $key_min[0];

}
?> 
```

# c# - FileVersionInfo 在从 WPF 应用程序和命令行应用程序运行的 dll 之间的行为不同

> ID：12673944
> 
> 赞同：0
> 
> 时间：2012-10-01T13:09:05.120
> 
> 标签：c#, dll, fileversioninfo

我正在编写一个 dll，它将在多个环境中使用，即来自我们的构建机器。该程序负责获取文件的 FileVersion。我在 .dll 中使用以下代码：

```
public string GetVersion(string filePath)
{
  FileVersionInfo temp = FileVersionInfo.GetVersionInfo(filePath);
  return temp.FileVersion;
} 
```

现在，当我从 WPF 测试应用程序运行这个函数时，我写的一切正常；为 FileVersionInfo 对象填写所有值。

但是，当我在控制台应用程序项目中运行这个完全相同的函数时，FileVersionObject 中的所有值都为空。

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:41:43.357

实际上我想通了，我从控制台检索文件路径的方式不正确，我在目录名称的末尾有一个空格字符。我对此感到很愚蠢oO

# javascript - jQuery 的 .hide() 没有设置 style="display: none;" 跨浏览器一致

> ID：12673945
> 
> 赞同：1
> 
> 时间：2012-10-01T13:09:08.467
> 
> 标签：javascript, jquery, dom

**背景：**
我正在使用以下方式`QUnit`验证`DOM`元素的创建（到目前为止一直运行良好）：

```
$actual = Mylibrary.createSomething();
$expected = $('<div........');
ok($actual[0].isEqualNode($expected[0]),'Node properly created'); 
```

更多信息`isEqualNode`：[MDN](https://developer.mozilla.org/en-US/docs/DOM/Node.isEqualNode)，[W3](http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-isEqualNode)

**问题：**
我在使用该`jQuery's .hide()`方法时比较节点时遇到问题，因为：

*   它产生`style="display: none;"`（之后没有额外的空间`;`）`Firefox`
*   它产生`style="display: none; "`（之后的额外空间`;`）与`Chrome`
*   `isEqualNode`认为这`style="display: none;"`是不同的`style="display: none; "`（您可以具有不同顺序的属性，并且`isEqualNode`仍然认为节点是相等的，但额外的空间不是）。
*   建造时`$expected`，我只能满足两种情况中的一种。

因此，我的测试最终总是失败，`Chrome`或者`Firefox`取决于我选择创建的情况`$expected`。

这是一个[jsFiddle，这样你就可以明白我的意思](http://jsfiddle.net/Xd7X4/3/)

我可以检查元素是否隐藏，`.is(':hidden')`但这对我来说并不理想，因为：

*   我无法再将整套 DOM 元素与`.isEqualNode`我目前所做的比较，并且必须编写许多单独的测试来获得等效的测试，这将使我的测试非常广泛且难以维护。
*   我觉得通过使用`DOM`方法（即`isEqualNode`）我的测试比使用`jQuery`方法（例如`.is(':hidden')`）更健壮，因为我的元素是首先生成的，`jQuery`并且具有`jQuery`独立的验证方法更有可能发现问题。

**`jQuery`您是否看到's`.hide()`方法将`stype="display`属性生成为错误/问题的方式存在差异？（即我应该在[http://bugs.jquery.com/](http://bugs.jquery.com/)上提出它吗）？**

**您是否看到允许我在不使用`jQuery`方法的情况下比较我的节点的解决方案？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:13:02.787

从 QUnit 的角度来看，执行以下检查以查看元素是否隐藏：

```
equal(element.css('display'), 'none', 'element is not hidden'); 
```

这消除了您比较字符串差异的需要。如果您不使用 jQuery，请执行：

```
equal(element.style.display, 'none', 'element is not hidden'); 
```

如果您想创建一些实用程序扩展来模块化您的单元/交互测试，那么 isEqualNode 不是您最好的方法。更好地为自己提供以下方法：

```
checkClass(element, cssClass)
checkAttribute(element, attr, value)
checkAttributeExists(element, attr)
etc... 
```

# c# - 损坏的数据库和列表框问题

> ID：12673946
> 
> 赞同：-1
> 
> 时间：2012-10-01T13:09:12.643
> 
> 标签：c#, database, listbox

我在 WinForms C# 中工作。

出于某种原因，当我想填充我的 listBox 时，它会停止并说我的数据库已损坏。我添加了一条维修线，然后代码运行，但没有任何反应。我的列表框未填充。

这是我使用的代码：

```
public void button1_Click(object sender, EventArgs e)
    {
        SqlCeConnection cn = new SqlCeConnection(@"Data Source = Database1.mdf");
        cn.Open();
        SqlCeCommand cm = new SqlCeCommand("SELECT * FROM tblprojects ORDER BY Projekt_liste ASC", cn);

        try
        {
            SqlCeDataReader dr = cm.ExecuteReader();

            while (dr.Read())
            {
                ListBox project_list = Application.OpenForms["Form1"].Controls["tabControl1"].Controls["tabPage1"].Controls["Project_list"] as ListBox;
                project_list.Items.Add(dr["Projekt_liste"].ToString());
            }
            cn.Close();
            cn.Dispose();
        }
        catch (Exception ex)
        {
        }
    }

    public void button2_Click(object sender, EventArgs e)
    {

        SqlCeConnection cn = new SqlCeConnection();

        SqlCeEngine engine = new SqlCeEngine("Data Source = Database1.mdf");

        if (false == engine.Verify())
        {
            MessageBox.Show("Database is corrupted.");
            engine.Repair(null, RepairOption.RecoverAllPossibleRows);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:17:49.130

来自[微软网站](http://msdn.microsoft.com/en-us/library/ms172420.aspx)

> 修复方法不保证对每个数据库都进行完整的数据恢复。无论应用程序选择了何种修复选项，某些形式的数据损坏都无法完全修复。

这可能是您的文件已损坏的情况之一。

也请尝试直接在呼叫上方进行维修呼叫以填充列表中的数据。

这可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:38:39.187

例如，如果您想加载项目

```
1\. make sure you have a ListBox on the winform
2\. name the ListBox 
3\. Create a ListItem 
4 Add the ListItem to the ListBox

while(dr.Read())
{
  ListViewItem obj=new ListViewItem(Convert.ToString(dr[0]),Convert.ToString(dr[1]);
  //in object of ListViewItem give display member at first and give value member at second position 
  listView1.Items.Add(obj); // add object to the listbox
} 
```

这里有一些链接，您也可以使用它们来展示如何填充 ListBox 的不同方法

one is Windows and the other will be if you are using or plan to use ASP.NET

[Populate a ListBox when using SQLDataReader](http://www.akadia.com/services/dotnet_data_reader.html)

[asp.net SqlDataReader example: how to use Read() method to populate ListBox](http://asp-net-example.blogspot.com/2008/12/aspnet-sqldatareader-example-how-to-use.html)

[Populate ASP.NET ListBox using SqlDataReader](http://www.dotnetcodecentral.com/Post/57/ado-net-querying-for-data/populate-asp-net-listbox-using-sqldatareader)

# php - 在 PHP 中添加或到 if 条件

> ID：12673947
> 
> 赞同：0
> 
> 时间：2012-10-01T13:09:13.113
> 
> 标签：php, mysql, if-statement, conditional-statements, or-operator

我有这个条件：

```
if (isset($_REQUEST['altgeraet'])) {
    $Altgeraet = 'OK';
} else {
    $Altgeraet = 'NOK';
} 
```

我想在 SQL 表`Host_alt`中的值“KeinAlterHost”是

```
$Altgeraet = 'OK' 
```

这是我尝试过的，但没有奏效：

```
if (isset($_REQUEST['altgeraet']) 
        OR ($resultarray['Hostname_alt'] == "KeinAlterHost")) {
    $Altgeraet = 'OK';
} else {
    $Altgeraet = 'NOK';
} 
```

那么这个设置对吗？我用`array_key_exists`

```
if ((isset($_REQUEST['altgeraet']) OR (array_key_exists('KeinAlterHost',$resultarray['Hostname_alt'])) {
        $Altgeraet = 'OK';
        } else {
        $Altgeraet = 'NOK';
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:20:50.480

The isset isn't quit right...

```
if (isset($_REQUEST['altgeraet']) OR ($resultarray['Hostname_alt'] == "KeinAlterHost")) {
    $Altgeraet = 'OK';
} else {
    $Altgeraet = 'NOK';
} 
```

You need to quit it earlyer:

```
if (isset($_REQUEST['altgeraet']) OR ($resultarray['Hostname_alt'] == "KeinAlterHost")) {
    $Altgeraet = 'OK';
} else {
    $Altgeraet = 'NOK';
} 
```

Because it checks if the request isset, and the hostname isset at you're old code. by the new one, it checks if the request isset, if not check if hostname == keinalterhost and then do the stuff...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:11:21.000

您需要一个用于 OR 的管道

所以代码将是这样的：

```
if (isset($_REQUEST['altgeraet']) || ($resultarray['Hostname_alt'] == "KeinAlterHost")) 
```

# magento-1.7 - “可用产品列表排序方式”不会从下拉列表中删除选项

> ID：12673949
> 
> 赞同：5
> 
> 时间：2012-10-01T13:09:19.043
> 
> 标签：magento-1.7, magento

我想删除/隐藏我的类别中的一些属性排序选项。

为此，我取消选中“使用所有属性”并选择了我想在排序选择中显示的属性。

在此之后，我清除了缓存并重新索引了类别和产品数据。

但是我仍然有按选择排序的所有属性。有人可以帮我吗？

我正在使用修改后的toolbar.phtml来隐藏“位置”排序选项，但我认为这与问题无关：

```
<div class="sort-by">
    <label><?php echo $this->__('Sort By') ?></label>
    <select onchange="setLocation(this.value)">
    <?php foreach($this->getAvailableOrders() as $_key=>$_order): ?>
        <?php if ($_order != $this->__('Position')) : // Remove "Position" from the sort option list ?>
            <option value="<?php echo $this->getOrderUrl($_key, 'asc') ?>"<?php if($this->isOrderCurrent($_key)): ?> selected="selected"<?php endif; ?>>
                <?php echo $this->__($_order) ?>
            </option>
        <?php endif; ?>
    <?php endforeach; ?>
    </select>
    <?php if($this->getCurrentDirection() == 'desc'): ?>
        <a href="<?php echo $this->getOrderUrl(null, 'asc') ?>" title="<?php echo $this->__('Set Ascending Direction') ?>"><img src="<?php echo $this->getSkinUrl('images/i_desc_arrow.gif') ?>" alt="<?php echo $this->__('Set Ascending Direction') ?>" class="v-middle" /></a>
    <?php else: ?>
        <a href="<?php echo $this->getOrderUrl(null, 'desc') ?>" title="<?php echo $this->__('Set Descending Direction') ?>"><img src="<?php echo $this->getSkinUrl('images/i_asc_arrow.gif') ?>" alt="<?php echo $this->__('Set Descending Direction') ?>" class="v-middle" /></a>
    <?php endif; ?>
</div> 
```

编辑：

这是我在类别中的显示设置中的图像：

![显示设置](../Images/242b5171baf4c7eb4bd7144689f248d4.png)

但在我的商店视图中，所有选项都显示

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-16T19:35:32.423

对我来说，问题正是错误所说的，只是很难理解。您不能选择未启用的默认排序选项

![在此处输入图像描述](../Images/590f7e8a5df2058692f72d186c9cd053.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:16:49.760

好的，解决了问题：

我更改了所有商店视图中的设置，但在所有 sotre 视图中都没有更改。当我尝试在“语言视图”中更改设置使用默认值时。我收到错误“可用产品列表排序依据中不存在默认产品列表排序依据”。

所以我“只是”需要更改每种语言的所有类别设置。

编辑：

编辑某些类别并选中/取消选中“使用默认值”后，错误消失了，我将所有“使用默认值”设置为是。

# iphone - Phonegap iOS 应用程序屏幕在双击时向上滑动

> ID：12673951
> 
> 赞同：2
> 
> 时间：2012-10-01T13:09:35.860
> 
> 标签：iphone, ios, html, cordova

我正在为 iOS 开发一个 phonegap 应用程序。当我双击屏幕底部时，主屏幕向上滑动。这只发生在纵向模式下。

我试过禁用滚动..但这没有奏效。这是我的 html 代码：

```
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0 " />
<body>
<div class="mainScreenContent" align="center">
<table>
<form>
<tbody>
<tr >
<td>
<button type="submit" class="largeButton grayGradientEffect">Button 1</button>
</td>
</tr>
<tr>
<td >
<button type="submit" class="largeButton grayGradientEffect" onclick="">Button 2</button>
</td>
</tr>
</tbody>
</form>
</table>
</div>
</body> 
```

以下是屏幕截图：

这是主屏幕的样子：

![在此处输入图像描述](../Images/dd73c6897f74f75634f88aff79dd5e72.png)

这是双击底部后的样子：

![在此处输入图像描述](../Images/6b066823836a4c7fef35426519cb09f6.png)

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T13:28:40.213

如果您使用的是 jquery，请拦截此事件。

下面是 Johan Sundström 的解决方案

[https://gist.github.com/2047491](https://gist.github.com/2047491)

要使用，请将以上内容添加到您的 javascript。然后拦截任何合适的元素。

例如

```
$("body").nodoubletapzoom(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:39:46.667

您可以尝试将以下内容添加到您的元视口查询中吗？

```
user-scalable=0 
```

# xml - 如何使用模板或循环来最小化xsl中的代码

> ID：12673959
> 
> 赞同：1
> 
> 时间：2012-10-01T13:10:18.747
> 
> 标签：xml, xslt, xslt-1.0

我正在尝试将预测数据从 XML 文件提取到我的 XSLT 1.0。我是这些语言的新手，所以我多次使用相同的代码行。给定代码的区别仅在于 for-each 循环上的属性 @aac。

```
<xsl:for-each select="product/forecast/area[@aac='SA_PT001']">
    <xsl:value-of select="@description" /> :
    <xsl:value-of select="forecast-period/text[@type='precis']"/> : Min
    <xsl:value-of select="forecast-period/element[@type='air_temperature_minimum']"/> : Max
    <xsl:value-of select="forecast-period/element[@type='air_temperature_maximum']"/><br/>
</xsl:for-each>

<xsl:for-each select="product/forecast/area[@aac='QLD_PT015']">
    <xsl:value-of select="@description" /> :
    <xsl:value-of select="forecast-period/text[@type='precis']"/> : Min
    <xsl:value-of select="forecast-period/element[@type='air_temperature_minimum']"/> : Max
    <xsl:value-of select="forecast-period/element[@type='air_temperature_maximum']"/><br/>
</xsl:for-each>

<xsl:for-each select="product/forecast/area[@aac='NSW_PT027']">
    <xsl:value-of select="@description" /> :
    <xsl:value-of select="forecast-period/text[@type='precis']"/> : Min
    <xsl:value-of select="forecast-period/element[@type='air_temperature_minimum']"/> : Max
    <xsl:value-of select="forecast-period/element[@type='air_temperature_maximum']"/><br/>
</xsl:for-each> 
```

你能告诉我使用循环或 XSL 模板来减少代码大小吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:30:26.963

您可以将 for-each 的主体更改为模板：

```
<xsl:template match="area">
    <xsl:value-of select="@description" /> :
    <xsl:value-of select="forecast-period/text[@type='precis']"/> : Min
    <xsl:value-of select="forecast-period/element[@type='air_temperature_minimum']"/> : Max
    <xsl:value-of select="forecast-period/element[@type='air_temperature_maximum']"/><br/>
</xsl:template>

<xsl:template match="/">
    <xsl:apply-templates select="product/forecast/area[@aac='SA_PT001']"/>
    <xsl:apply-templates select="product/forecast/area[@aac='QLD_PT015']"/>
    <xsl:apply-templates select="product/forecast/area[@aac='NSW_PT027']"/>
</xsl:template> 
```

这将`SA_PT001`首先为您提供所有区域，然后是所有`QLD_PT015`区域等。您可以使用将三个选择组合为一个

```
<xsl:template match="/">
    <xsl:apply-templates select="product/forecast/area[@aac='SA_PT001' or @aac='QLD_PT015' or @aac='NSW_PT027']"/>
</xsl:template> 
```

但这将按`aac`文档顺序为您提供三个值中任何一个的所有区域，而不是按`aac`.

编辑：你说你想按描述按字母顺序排序：

```
<xsl:template match="/">
    <xsl:apply-templates select="product/forecast/area[@aac='SA_PT001' or @aac='QLD_PT015' or @aac='NSW_PT027']">
        <xsl:sort select="@description" />
    </xsl:apply-templates>
</xsl:template> 
```

将按描述对它们进行排序。你可以使用多个`<xsl:sort>`所以

```
<xsl:template match="/">
    <xsl:apply-templates select="product/forecast/area[@aac='SA_PT001' or @aac='QLD_PT015' or @aac='NSW_PT027']">
        <xsl:sort select="@aac" />
        <xsl:sort select="@description" />
    </xsl:apply-templates>
</xsl:template> 
```

将首先分组`aac`，然后在每个`aac`组内按描述排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:17:16.197

```
<xsl:variable name="aac_list">NSW_PT027,QLD_PT015,NSW_PT027</xsl:variable>

<xsl:for-each select="product/forecast/area">
    <xsl:sort select="@description"/>
    <xsl:if test="contains($aac_list, ./@aac)">
        <xsl:value-of select="@description" /> :
        <xsl:value-of select="forecast-period/text[@type='precis']"/> : Min
        <xsl:value-of select="forecast-period/element[@type='air_temperature_minimum']"/> : Max
        <xsl:value-of select="forecast-period/element[@type='air_temperature_maximum']"/><br/>
    </xsl:if>
</xsl:for-each> 
```

`aac_list`您可以动态构建的变量

# jquery - 自定义搜索引擎按钮点击

> ID：12673963
> 
> 赞同：0
> 
> 时间：2012-10-01T13:10:46.287
> 
> 标签：jquery, click

我试图在自定义搜索引擎搜索按钮单击时调用函数。

我现在尝试的代码是：

```
<script type="text/javascript">
$(".gsc-search-button input[type=button]").click(function()
{
  alert("1");
});
</script> 
```

不工作。

网站：[http ://akcijos.igloro.info/?q=Android](http://akcijos.igloro.info/?q=Android)

编辑：

在帖子中找到解决方案：[将点击事件绑定到 Google 自定义搜索中的“搜索”按钮](https://stackoverflow.com/questions/5560615/bind-click-event-to-search-button-in-google-custom-search)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:41:06.133

在其他 stackoverflow 帖子上找到了解决方案。

原因：

> 搜索框是在 window.onload 之后使用 google js api 创建的，因此 .bind() 失败。用 jquery.live() 解决了这个问题。

代码：

```
<script type="text/javascript">
$("input.gsc-search-button[type=submit]").live('click', function()
{
  console.log("clicked");
  alert("1");
});
</script> 
```

其他帖子网址：[将点击事件绑定到 Google 自定义搜索中的“搜索”按钮](https://stackoverflow.com/questions/5560615/bind-click-event-to-search-button-in-google-custom-search)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:13:55.047

您是否试图覆盖按下按钮的默认操作？你可以尝试这样做：

```
$(".gsc-search-button input[type=button]").click(
    function(e)
    {
        e.preventDefault();
        alert("1");
    }
); 
```

# winapi - WinApi, ATL 创建上下文菜单函数处理程序

> ID：12673965
> 
> 赞同：2
> 
> 时间：2012-10-01T13:10:50.510
> 
> 标签：winapi, visual-c++, mfc, atl

下面的代码创建了一个窗口，实现了一个 CListViewCtrl 并尝试创建一个具有 3 个选项的上下文菜单：新建、编辑和删除。

```
class CGuiView : public CWindowImpl<CGuiView, CListViewCtrl>
{
    HMENU hPopupMenu;
    MENUINFO m_ContextMenuInfo;

public:
    DECLARE_WND_CLASS(NULL)

    BOOL PreTranslateMessage(MSG* pMsg)
    {
        pMsg;
        return FALSE;
    }

    BEGIN_MSG_MAP(CGuiView)
        MESSAGE_HANDLER(WM_PAINT, OnPaint)
    //  MESSAGE_HANDLER(WM_LBUTTONUP,)
         MSG_WM_CONTEXTMENU(OnContextMenu) 
         COMMAND_ID_HANDLER(ID_CTXMENU_NEW, OnNewTask)
    END_MSG_MAP()

    LRESULT OnPaint(UINT /*uMsg*/, WPARAM /*wParam*/, LPARAM /*lParam*/, BOOL& /*bHandled*/)
    {
        CPaintDC dc(m_hWnd);

        //TODO: Add your drawing code here

        return 0;
    }
     void OnContextMenu ( HWND hwndCtrl, CPoint ptClick )
    {

        hPopupMenu = CreatePopupMenu();

        InsertMenu(hPopupMenu,  0, MF_BYCOMMAND | MF_STRING, ID_CTXMENU_DELETE, TEXT("Delete"));
        InsertMenu(hPopupMenu, ID_CTXMENU_DELETE, MF_BYCOMMAND | MF_STRING, ID_CTXMENU_EDIT, TEXT("Edit"));
        InsertMenu(hPopupMenu, ID_CTXMENU_EDIT, MF_BYCOMMAND | MF_STRING | MF_ENABLED, ID_CTXMENU_NEW , TEXT("New"));

        TrackPopupMenu(hPopupMenu, TPM_TOPALIGN | TPM_LEFTALIGN, ptClick.x, ptClick.y, 0,GetParent(), NULL); 

    }

    LRESULT OnNewTask(WORD /*wNotifyCode*/, WORD /*wID*/, HWND /*hWndCtl*/, BOOL& /*bHandled*/)
    {

        CAboutDlg dlg;
        dlg.DoModal();
        return 0;
    }

}; 
```

问题是当我点击我在 OnContextMenu 函数中创建的 New 菜单项时，上面的代码没有进入 OnNewTask。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:17:53.633

您将`GetParent()`作为参数提供给`TrackPopupMenu`API 函数。所以`WM_COMMAND`发送到列表视图父级，而不是列表视图本身。

将其发送到列表视图，或将命令从父级转发到列表视图。您还可以使用 Spy++ 工具检查被调试进程中的消息，以查看确切发送的内容和发送位置。

# actionscript-3 - 这些 AS3 变量应该去哪里？

> ID：12673974
> 
> 赞同：1
> 
> 时间：2012-10-01T13:11:29.917
> 
> 标签：actionscript-3, flash, variables, actionscript, scope

我正在尝试为 Actionscript 3 中的平台游戏打下基础。我还是 AS3 的新手，但我希望这将有助于建立我的知识。

反正，

我知道我可以通过扩展 Sprite/Movieclip 类来创建与 Sprite 或 MovieClip 等内容相关联的 Actionscript 文件。我也知道作为“文档类”工作的 Actionscript 文件。

我的游戏中的每个关卡都有不同的属性，例如重力。我应该在哪里存储这些变量？显然不在播放器中......不确定他们是否应该进入时间线或文档类，或者他们是否有自己的单独 AS 文件。有人告诉我，拥有全局变量通常很糟糕，所以我不确定该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:40:10.590

您可以将关卡制作为单独的文件，甚至不是 Actionscript，而是 XML 或 JSON，因为您的关卡基本上是具有不同起始值的数据结构。您可以创建一个可以获取此类文件的关卡类，对其进行解析并根据读取的内容初始化游戏中的关卡结构。是的，此类数据不应该进入时间线，因为如果您需要更改其中的一部分数据，它可能会隐式影响其他游戏流程。此外，一个简单的右键单击可能会毁掉这样的游戏 :) 我自己使用 JSON 文件作为我的关卡数据持有者，我在初始化时解析它们，你可以这样做或者说当你的关卡被加载时。

简而言之，如果某些东西在初始数据上有所不同，但在方法中很常见，那么它应该与主代码或整个代码分开，并作为数据包含在内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:22:45.207

我认为这个类似的问题和答案会对您有所帮助：

[As3 OOP 游戏结构（类架构）](https://stackoverflow.com/questions/1486032/as3-oop-game-structure-class-architecture)

基本上，“你要做的就是将游戏中的变化与游戏本身分开”。所以绝对不要在时间线中包含代码。

# database - 暴力破解是在访问中进行更新查询的唯一方法吗？

> ID：12673979
> 
> 赞同：1
> 
> 时间：2012-10-01T13:11:39.453
> 
> 标签：database

我现在正在尝试在 Access 中进行更新查询。我有两位老师，他们在不同的数据库中拥有相同的数据表，除了他们自己输入的信息。除了他们单独输入的信息外，一切都是一样的。我正在尝试合并他们的两个 tblDemographics 表，以便他们可以看到彼此做了什么，以防学生搬到他们所覆盖的学校之一。我想知道我是否必须基本上输入每个必须更新到的字段，或者是否有一些简写可以使它基本上可以说在哪里 Null，更新到同名字段？

对不起，如果这没有意义。我只是想看看是否有更有效的方法来做到这一点。

```
UPDATE tbleDemographics LEFT JOIN tbleDemographics1 ON tbleDemographics.[Local ID] = tbleDemographics1.[Local ID] SET tbleDemographics.FName = [tbleDemographics1.Fname], tbleDemographics.LName = [tbleDemographics1.LName], tbleDemographics.MName = [tbleDemographics1.MName]
WHERE (((tbleDemographics.FName) Is Null) AND ((tbleDemographics.LName) Is Null) AND ((tbleDemographics.MName) Is Null) AND ((tbleDemographics.ClMgr) Is Null) AND ((tbleDemographics.School) Is Null) AND ((tbleDemographics.Grade) Is Null) AND ((tbleDemographics.[Prim Dis]) Is Null) AND ((tbleDemographics.[Sec Dis]) Is Null) AND ((tbleDemographics.[Third Dis]) Is Null) AND ((tbleDemographics.[Local ID]) Is Null) AND ((tbleDemographics.GTID) Is Null) AND ((tbleDemographics.Status) Is Null) AND ((tbleDemographics.[Homeroom Teacher]) Is Null) AND ((tbleDemographics.[GPS Math Teacher]) Is Null) AND ((tbleDemographics.[Number Worlds Teacher]) Is Null) AND ((tbleDemographics.IntervHMcCain) Is Null) AND ((tbleDemographics.InterMSmith) Is Null) AND ((tbleDemographics.InterALacey) Is Null) AND ((tbleDemographics.InterLDaughtry) Is Null) AND ((tbleDemographics.DelInclusion) Is Null) AND ((tbleDemographics.DelRegEd) Is Null) AND ((tbleDemographics.DelConsult) Is Null) AND ((tbleDemographics.DelRes) Is Null) AND ((tbleDemographics.DelPara) Is Null) AND ((tbleDemographics.[DelMIPull-out]) Is Null) AND ((tbleDemographics.DelMIInc) Is Null) AND ((tbleDemographics.OTServices) Is Null) AND ((tbleDemographics.PTServices) Is Null) AND ((tbleDemographics.OIServices) Is Null) AND ((tbleDemographics.SpServices) Is Null) AND ((tbleDemographics.Notes) Is Null)); 
```

这看起来对我的口味来说太乱了，但如果可能的话，我想简单地说一下，这样我实际上不必对每个条目进行限定。

又看了几眼，觉得自己这里放的SQL挺傻的。所以是的，我看到我把 Is Nulls 放在了错误的位置，而且我设置它的方式基本上覆盖了所有内容......哎呀。我希望虽然一般的想法被理解。

好的......所以现在我越来越多地进入这个数据库试图自己解决这个问题......我看到了很多问题，甚至都不好笑。这个数据库的设置非常糟糕，以至于它是一场噩梦......如果有人仍然能对我正在做的事情提出一个大致的想法，那将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:17:07.957

数据库合并是一个问题，您可能最好将数据从两个数据库中转储出来，合并数据，然后将其导入新数据库。请注意，您可能需要对添加到数据库中的任何记录的键重新编号，因为键将与其他数据库中的条目发生冲突。但由于它是一个数据库，因此链接到该数据库的任何记录中的键也需要更改。

如果一个数据库中缺少一条记录，而另一个数据库中没有，是删除还是插入？还是版本问题？

在 Access 中，这尤其困难，因为没有日志可以帮助您查看更新历史记录。

# jsf-2 - RichFaces tabPanel 与 switchType ajax 和 a4j:status

> ID：12673980
> 
> 赞同：7
> 
> 时间：2012-10-01T13:11:44.377
> 
> 标签：jsf-2, richfaces, ajax4jsf

## 我试图达到的目标

我有一个`rich:tabPanel`with`switchType="client"`并且其中一个选项卡已将其设置为`switchType`，`ajax`因为加载其数据是一项昂贵的操作。当我单击此*Ajax 选项卡*时，我希望将其标题更改为*Loading...*以表明单击已被识别。完成加载后，标题应切换回*Ajax Tab*。

```
[Client Tab] [Ajax Tab]
<click on 'Ajax Tab'>
[Client Tab] [Loading...]
<wait...>
[Client Tab] [Ajax Tab]
<click on 'Client Tab'>
[Client Tab] [Ajax Tab] 
```

## 问题描述

实际上，上述大部分内容都按预期工作，我唯一的问题是，当我从*Ajax 选项卡导航到任何其他选项卡时，* *Ajax*选项卡的标题会切换回*Loading...*：

```
[Client Tab] [Ajax Tab]
<click on 'Ajax Tab'>
[Client Tab] [Loading...]
<wait...>
[Client Tab] [Ajax Tab]
<click on 'Client Tab'>
[Client Tab] [Loading...] 
```

### 研究

我在[RichFaces 的 JIRA](https://issues.jboss.org/browse/RF-3201)中发现了一个问题，但这个问题自 3.2.1 版以来已得到修复。此外，我用谷歌搜索了几个小时，但找不到任何类似的问题。

### 环境

*   雄猫 7.0.30
*   莫哈拉 2.1.12
*   RichFaces 4.2.2.Final

## 代码（减少）

### JSF

```
<ui:composition template="WEB-INF/templates/default.xhtml">
    <ui:define name="content">
        <h:form id="form">
            <rich:tabPanel id="tabPanel" switchType="client">
                <rich:tab id="clientTab">
                    <f:facet name="header">
                        <h:outputText value="Client Tab" />
                    </f:facet>
                    <h:outputText value="Foo" />
                </rich:tab>
                <rich:tab id="ajaxTab" switchType="ajax" status="ajaxTabStatus">
                    <f:facet name="header">
                        <a4j:status id="ajaxTabStatus">
                            <f:facet name="start">
                                <h:outputText value="Loading..." />
                            </f:facet>
                            <f:facet name="stop">
                                <h:outputText value="Ajax Tab" />
                            </f:facet>
                        </a4j:status>
                    </f:facet>
                    <h:outputText value="#{bean.value}" />
                </rich:tab>
            </rich:tabPanel>
        </h:form>
    </ui:define>
</ui:composition> 
```

### Ajax Tab的Backing Bean

```
@ManagedBean
@ViewScoped
public class Bean implements Serializable {

    private static final long serialVersionUID = -8405248908693334970L;

    private String value = "noValue";

    private static final Logger log = LoggerFactory.getLogger(Bean.class);

    @PostConstruct
    public void init() {
        log.info("Init bean.");
        value = getDummyValueWithFakeDelay();
    }

    public String getValue() {
        log.info("Get value.");
        return value;
    }

    private String getDummyValueWithFakeDelay() {
        try {
            Thread.sleep(1000);
        } catch (InterruptedException ex) {
        }

        return DateFormat.getTimeInstance().format(new Date());
    }
} 
```

## 更新1：

我发现 an 的标识符（我的意思是您指定`<rich:someTag ... status="someStatus" />`的一个 like ）`a4j:status`不是它`id`，而是它的`name`属性。所以我`a4j:status`的只是针对该页面上的*每个*Ajax 请求。给它一个名字并使用这个命名状态是行不通的，因为现在什么都没有发生。

```
<rich:tab id="ajaxTab" switchType="ajax" status="ajaxTabStatus">
    <f:facet name="header">
        <a4j:status id="ajaxTabStatus" name="ajaxTabStatus">
            <f:facet name="start">
                <h:outputText value="Loading..." />
            </f:facet>
            <f:facet name="stop">
                <h:outputText value="Ajax Tab" />
            </f:facet>
        </a4j:status>
    </f:facet>
    <h:outputText value="#{bean.value}" />
</rich:tab> 
```

## 更新 2：

我还找到了另一种方法，使用`onbegin`和`oncomplete`属性与一些代码，如：

```
<rich:tab id="ajaxTab" switchType="ajax"
    onbegin="#{rich:component('ajaxTab')}.?"
    oncomplete="#{rich:component('ajaxTab')}.?"> 
```

好吧，如您所见，我还没有找到一种方法来操作选项卡标题（而且我没有找到任何有用的文档来说明我可以使用rich:component 做什么）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:07:07.150

我不是很熟悉`RichFaces 4.x`。然而，这是如何做到这一点`RichFaces 3`。
假设这是你`tabPanel`。

```
<h:form>
  <rich:tabPanel>
    <rich:tab label="Client Tab" switchType="client">
      Tab - client
    </rich:tab>

    <rich:tab label="Ajax Tab" id="ajaxTab" switchType="ajax" ontabenter="changeLabel(event)">
      <h:outputText value="#{bean.value}" />
    </rich:tab>
  </rich:tabPanel>
</h:form> 
```

请注意`ontabenter`ajax 选项卡中的事件。

现在你的脚本会是这样的。

```
<script>
    function changeLabel(tabId) {
        var tabLabel = event.target || event.srcElement;
        tabLabel.innerHTML = 'Loading...';
    }
</script> 
```

我不太了解`RF4`。但是，`RF3`不需要将`oncomplete`事件添加到选项卡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-08T21:39:16.610

我用richfaces 4.3.7 做下面的代码。它似乎工作。（我显示加载面板而不是修改选项卡标题。）

```
<a4j:status oncomplete="#{rich:component('busy')}.hide()"
    onerror="#{rich:component('busy')}.hide()"
    onbegin="#{rich:component('busy')}.show()">
    <rich:popupPanel id="busy" modal="true" moveable="false"
        resizeable="false" autosized="true">
        <h:panelGrid styleClass="alignCenter" width="100%" id="busyPanel"
            columns="1" border="0" cellpadding="0" cellspacing="2">
            <h:outputLabel value="Loading..." />
        </h:panelGrid>
    </rich:popupPanel>
</a4j:status>
<h:form>
    <rich:tabPanel switchType="ajax" 
        oncomplete="#{rich:component('busy')}.hide()" 
        onerror="#{rich:component('busy')}.hide()"
        onbegin="#{rich:component('busy')}.show()"
        >
        <rich:tab label="Client Tab" switchType="client">
          Tab - client
        </rich:tab>

        <rich:tab label="Ajax Tab" id="ajaxTab" >
          <h:outputText value="#{bean.value}" />
        </rich:tab>
    </rich:tabPanel>
</h:form> 
```

# exe - 如何使用没有 Jre 的 Launch4J 工具运行从 .jar 文件转换的 .exe 文件

> ID：12673985
> 
> 赞同：0
> 
> 时间：2012-10-01T13:11:49.500
> 
> 标签：exe, java, executable-jar, launch4j

我使用 Launch4J 将我的 jar 文件转换为 .exe。现在根据我的需要，我必须在没有安装 JRE 的系统上运行这个 exe 文件。是否可以在没有 JRE 的情况下运行从 jar 文件转换的 .exe 文件，或者有没有办法将 JRE 与 .exe 文件一起嵌入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T20:03:03.630

exe只是在windows上运行程序的工具，它还需要JRE。

[]的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-04T06:25:51.733

我不知道 Launch4J。

但是您可以使用 NetBeans 和一些工具来完成。结果是一个独立的安装程序，它打包了您需要的所有内容（包括 java 文件），因此您的软件可以在不安装 JRE 的情况下运行。但最终它确实需要 JRE 才能运行，只是包含了所有内容，而且它是完全可移植的。 [这是这个解决方案](https://stackoverflow.com/questions/664858/how-can-you-package-an-executable-jar-with-a-portable-jre/58196153#58196153)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-18T07:30:20.007

1.  没有 JRE 就无法运行 exe（因为 exe 只是 jar 的包装器）
2.  我建议您使用安装工具来创建安装程序。这是最简单的方法。Launch4j 无法将 JRE 放入 exe，因此您必须发送 2 个部分（exe + JRE）。但是，如果您创建一个安装程序，您将只有 1 个 exe 文件，您已经将所有内容打包。我推荐 Inno Setup Compiler。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-09T05:14:26.620

我认为您不需要 JRE 来运行 .exe 文件。但是如果您从 jar 文件创建 .exe 文件，则您的系统或任何其他要运行 .exe 文件的 PC 中都应该有 JAVA。所以JRE在安装时附带了JAVA（只是基本的东西）。我认为您可以使用launch4j 包含JRE。我很久以前就用过。但我个人不会推荐它。我总是使用 Jar2EXE 将 jar 文件转换为 .exe 文件。

# php - Joomla 扩展组织结构图

> ID：12673998
> 
> 赞同：0
> 
> 时间：2012-10-01T13:12:27.997
> 
> 标签：php, mysql, joomla

我已经从 [http://www.blueflyingfish.com/orgchart/index.php?option=com_orgchart&view=entitytree&Itemid=53](http://www.blueflyingfish.com/orgchart/index.php?option=com_orgchart&view=entitytree&Itemid=53)下载了这个扩展的组织结构图。我的 Joomla 版本是 1.5.26 但是，每当我尝试安装该扩展程序时，它都会说 NO XML setup found 但是它有 install.xml 这里是代码。或建议任何其他

```
<?xml version="1.0" encoding="utf-8"?>
     <extension type="component" version="1.6.0" method="upgrade">
     <name>orgchart</name>
     <creationDate>12/21/2011</creationDate>
     <author>E. Wayne Madison</author>
     <authorEmail>ewaynemadison2004@yahoo.com</authorEmail>
     <authorUrl>http://www.blueflyingfish.com/orgchart</authorUrl>
     <copyright>Copyright Info</copyright>
     <license>GNU/GPL v2</license>
     <version>1.0.2</version>
     <description>Component made by E. Wayne Madison for Joomla! 1.6/1.7 by http://www.blueflyingfish.com/orgchart</description>

 <install>
   <sql>
     <file charset="utf8" driver="mysql">install.mysql.utf8.sql</file>
   </sql>
 </install>
 <uninstall>
   <sql>
     <file charset="utf8" driver="mysql">uninstall.mysql.utf8.sql</file>
   </sql>
 </uninstall>

 <installfile>install.orgchart.php</installfile>
 <uninstallfile>uninstall.orgchart.php</uninstallfile>

 <files folder="site">
    <filename>controller.php</filename>
    <filename>index.html</filename>
    <filename>router.php</filename>
    <filename>orgchart.php</filename>
    <folder>controllers</folder>
    <folder>css</folder>
    <folder>helpers</folder>
    <folder>images</folder>
    <folder>models</folder>
    <folder>views</folder>
 </files>

 <media destination="orgchart" folder="media">
    <folder>css</folder> 
    <folder>images</folder> 
    <folder>images/persons</folder>
    <folder>images/persons/cache</folder>       
    <folder>images/persons/src</folder>
    <folder>images/types</folder>
    <folder>images/types/cache</folder>
    <folder>images/types/src</folder>                       
    <folder>js</folder> 
 </media>

 <languages>
      <language tag="en-GB">language/en-GB.com_orgchart.ini</language>
 </languages>

 <administration>
      <menu task="default" img="js/ThemeOffice/component.png">orgchart</menu>
         <submenu>
            <menu link="option=com_orgchart">Control Panel</menu>
            <menu link="option=com_orgchart&amp;view=groups">Groups</menu>
            <menu link="option=com_orgchart&amp;view=positions">Positions</menu>
            <menu link="option=com_orgchart&amp;view=persons">Persons</menu>
            <menu link="option=com_orgchart&amp;view=types">Types</menu>
            <menu link="option=com_orgchart&amp;view=entities">Entities</menu>      
            <menu link="option=com_orgchart&amp;view=entity_tree">The Tree</menu>
            <menu link="option=com_orgchart&                                amp;view=entitylist">List</menu>        
         </submenu>

 <files folder="admin">
    <filename>config.xml</filename>
    <filename>controller.php</filename>
    <filename>index.html</filename>
    <filename>install.orgchart.php</filename>
    <filename>install.mysql.utf8.sql</filename>
    <filename>install.mysql.nonutf8.sql</filename>              
    <filename>orgchart.php</filename>
    <filename>uninstall.orgchart.php</filename>
    <filename>uninstall.mysql.utf8.sql</filename>
    <filename>uninstall.mysql.nonutf8.sql</filename>                
    <folder>controllers</folder>
    <folder>css</folder>
    <folder>helpers</folder>
    <folder>images</folder>
    <folder>js</folder>
    <folder>libraries</folder>              
    <folder>models</folder>
    <folder>tables</folder>
    <folder>views</folder>
 </files>

 <languages folder="admin/language">
     <language tag="en-GB">en-GB.com_orgchart.menu.ini</language>
     <language tag="en-GB">en-GB.com_orgchart.ini</language>
 </languages>
 </administration>
 </extension> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:23:01.733

这是因为您使用的是 Joomla 1.5，并且该扩展是为 Joomla 1.6 开发的。

通常，如果它是一个小模块，我会向您展示如何转换它以使其与 1.5 兼容，但是这是一个组件并且要复杂得多。检查您下载扩展程序的站点后，没有可用的 1.5 版本，因此如果您真的想使用它，您需要下载 Joomla 2.5

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:55:16.953

这不仅是 1.5 版 Joomla 扩展中的组织结构图。也试试其他的。