# StackOverflow 问答 12645000-12645999

# automation - Lync 和远程桌面连接，已修订

> ID：12645002
> 
> 赞同：0
> 
> 时间：2012-09-28T17:54:57.163
> 
> 标签：automation, remote-desktop, lync

我最初提交了[这个问题](https://stackoverflow.com/questions/9914454/lync-remote-desktop-connections)，但我遇到了同样的问题，我意识到我问错了。（无论出于何种原因，我认为问题是我登录了两台计算机。）

情景：当接待员去吃午饭时，我坐在她的办公桌前，远程连接到我的电脑。但是，她锁定了计算机而不是注销，因此她仍然登录到 Lync。据我了解，Lync 并非旨在支持多个用户一次登录到一个工作站。这很明显，我接到电话，但无法接听——“通知”在我的屏幕上弹出，然后在我拿起电话时消失。

我的第一个想法是，也许有一种方法可以将她的计算机配置为在计算机锁定时从 Lync 注销，然后在她解锁时重新登录。（就像您如何在关机时自动注销，以及（可以选择）在您启动计算机时自动登录。）这听起来可行吗？

也欢迎任何其他建议/方法。我知道这可以通过她在吃午饭时注销 Lync 来轻松解决，但如果她忘记了，自动执行会更好。（在其他情况下，她可能会离开，而我坐在她的办公桌前也会突然出现，所以她不太可能在那些时候记得。）

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:34:12.113

使用 Lync Client SDK 关闭 Lync ( [MSDN](http://msdn.microsoft.com/en-us/library/lync/hh348186%28v=office.14%29.aspx) ) 会强制注销，并且还会使唱歌更容易，因为您只需调用 Lync exe，它就会自动登录。如果您在计算机上运行 Lync 实例（一个已登录，一个未登录），它还可以避免您遇到任何可能发生的多实例问题。

我从未尝试过，但我确信 .net 应用程序可以对计算机被锁定/解锁做出反应。必须有一个登录状态或什么？

# bash - 简单的 Bash OS 帮助

> ID：12645004
> 
> 赞同：0
> 
> 时间：2012-09-28T17:55:13.790
> 
> 标签：bash, operating-system

我正在尝试编写一个简单的操作系统。当我说准系统时，我的意思只是系统必需品：bash、mount、cd、ls 等。

从哪里开始是个好地方？

我在网上找遍了，但一无所获:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:01:04.790

尝试来自 Wikipedia 的[轻量级 Linux 发行版。](http://en.wikipedia.org/wiki/Lightweight_Linux_distribution)

[BusyBox](http://www.busybox.net)是另一个起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:17:42.350

您可以使用 LFS 构建自己的发行版：[http ://www.linuxfromscratch.org/](http://www.linuxfromscratch.org/)

您可以控制包含或不包含的内容。

# multithreading - Spring MVC WebApp 问题

> ID：12645005
> 
> 赞同：0
> 
> 时间：2012-09-28T17:55:13.643
> 
> 标签：multithreading, spring, jakarta-ee, spring-mvc, spring-security

我们正在为我们的 WebApplication 使用 Spring MVC 3。我从应用程序中看到了一个奇怪的行为。当用户执行操作（例如：按钮单击）时，我看到控制器日志记录了两次，控制器中的后续调用也是如此。我们使用的控制器是默认的，单例的。所以，

1.  我想在控制器中打印线程信息（如threadName。尝试过Thread.getName（）..是唯一的）..有什么帮助吗？

2.  如何确保只加载了一个 Spring 容器？ - 有什么建议么？

log4j 道具：

```
 `log4j.appender.ROLL_FILE=org.apache.log4j.RollingFileAppender 
     log4j.appender.ROLL_FILE.File=/ws/was/dept/logs/${module.jvm.instance}_module.log
     log4j.appender.ROLLING_FILE.Append=true 
     log4j.additivity.ROLLING_FILE.Append=false 
     log4j.appender.ROLLING_FILE.MaxFileSize=10MB 
     log4j.appender.ROLLING_FILE.MaxBackupIndex=20 
     log4j.appender.ROLLING_FILE.layout=org.apache.log4j.PatternLayout 
     log4j.appender.ROLLING_FILE.layout.ConversionPattern=[module] %d - %c -%-4r [%t] %-5p %c %x - %m 
```

网页.xml：

```
<display-name>module</display-name>
<context-param>
<param-name>contextConfigLocation</param-name>
<param-value>classpath*:/spring/int/root-int-context.xml,/WEB-INF/spring/root-  context.xml</param-value>
   </context-param>
<listener>
   <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>
      <servlet>
    <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
      <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet.xml</param-value>
      </init-param>          
     <load-on-startup>1</load-on-startup>
  </servlet>`
   <servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>
 ..........
 .........
 ......... 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:29:16.523

1.  用于`Thread.getId()`获取唯一线程 ID。
2.  检查您的记录器配置-我猜您正在使用`log4j`或`slfj`-您可能有多个记录器拦截消息在父记录器中定义的附加器之上添加附加器，这可能会导致打印两条消息-因此请检查是否你有那个并定义`additivity`为假的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:23:47.417

*我想在控制器中打印线程信息（如threadName。试过Thread.getName（）..是唯一的）*

*   使用日志框架。你可以找到几个例子。[在此处](http://crazygui.wordpress.com/2011/12/12/configure-logback-logging-with-spring/)检查以配置 logback

*如何确保只加载了一个 Spring 容器？*

*   我真的不明白你在这里的意思，但是如果在你的 web.xml 中适当地定义了 contextConfigLocation，那么 Spring 容器将被正确加载

    ```
    <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        classpath*:/META-INF/spring/*.xml 
    </param-value> 
    ```

# objective-c - “多个基类”是什么意思？

> ID：12645006
> 
> 赞同：2
> 
> 时间：2012-09-28T17:55:17.997
> 
> 标签：objective-c, inheritance

*David Chisnall*的“ *Objective-C for Java Programmers，第 1 部分*”介绍说

 *> 因为可以有多个基类，Objective-C 引入了 id 类型来表示指向某种对象的指针。您可以在任何对象类型和 id 之间隐式转换。

据我所知，Objective-C 是**单继承**（就像 Java，但不像 C++）。

那么“多个基类”是什么意思（在这种情况下）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T17:58:58.517

这意味着您可以定义自己的根或“基”类。

```
@interface MyRootClass
@end 
```

请注意，它不继承自`NSObject`.

在实践中，这永远不会完成，因为所述类不能真正与其他系统 API 互操作地使用，因为它们都期望`NSObject`继承行为。

不过，这并不是这种类型背后的真正动机`id`。类型意味着，从`id`字面上看，*这个对象引用可以是任何类的实例*。

可能有多个基类是完全正交的。

不，实施`NSObject` `@protocol`还不够好。*

# mercurial - Mercurial 移动后跟 diff

> ID：12645007
> 
> 赞同：1
> 
> 时间：2012-09-28T17:55:26.793
> 
> 标签：mercurial

我的 Mercurial 存储库中有两个非常大的项目。
我正在将它们都重构为更小的子项目。
这涉及将源集从父项目目录移动到子项目的子目录中。
对于大多数文件，我只是移动了它们。
对于某些文件，我还必须进行更改。
在我提交重构更改之前，我想回顾一下我对任何源文件所做的任何编辑。在 GUI 工具 SourceTree 中 - 它向我显示了任何修改（除了指示文件已被移动/重命名）。有什么方法可以确定 Mercurial 命令行还修改了哪些文件？

这是我正在谈论的一个具体示例：

iphonedev:EveryScape cdoucette$ hg status -C Engineering/iOS/ESSDK/src/ESSDK-Miscellaneous/ESDataManagerInMemory.m
A Engineering/iOS/ESSDK/src/ESSDK-Miscellaneous/ESDataManagerInMemory.m Engineering/iOS/ESSDK/src/ESDataManagerInMemory。米

如何将旧版本与不同位置的当前工作副本进行比较？

如果我这样做：

```
hg diff Engineering/iOS/ESSDK/src/ESSDK-Miscellaneous/ESDataManagerInMemory.m 
```

它向我显示了文件的全部内容（因为从技术上讲，它已添加到新位置）。

相反，我想区分：

1.  Engineering/iOS/ESSDK/src/ESDataManagerInMemory.m（存储库副本-以前的修订版）
2.  Engineering/iOS/ESSDK/src/ESSDK-Miscellaneous/ESDataManagerInMemory.m（工作副本）

我确实搜索过类似的问题。这篇文章很接近 - 但似乎只有在我继续并提交我的更改时才有意义。相反，我想在提交之前找到并查看我的更改。
[移动/重命名后，Mercurial diff 不起作用](https://stackoverflow.com/questions/10277773/mercurial-diff-not-working-after-move-rename)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T23:05:49.727

我会这样编写脚本：

```
hg cat -r <oldrev> <oldfilename> > oldfile.oldrev

diff <newfilename> oldfile.oldrev 
```

# version-control - 有没有人为使用 Mercurial 的 NAV 创建了本地源代码控制插件

> ID：12645019
> 
> 赞同：9
> 
> 时间：2012-09-28T17:56:14.643
> 
> 标签：version-control, mercurial, fogbugz, kiln, dynamics-nav

我们使用 Mercurial 来控制 C# 和 Progress 代码的源代码。

我们现在正在开发 Microsoft 的 Dynamic NAV。没有内置的源代码控制，手动将代码放入/取出我们的 Mercurial 存储库以进行版本控制很麻烦（而且容易出错）。

我想知道是否有人使用 Mercurial 开发了一个本土的、集成的 NAV 源代码控制系统。您可以分享哪些步骤以及哪些建议/想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T12:27:12.600

您可以组合一些脚本来自动从 C/SIDE 导出和导入到 TXT 文件，并结合“hg add”/“hg update”。

如果您使用的是 NAV 2013，则可以通过[使用 ExportObjects 命令运行 finsql.exe](http://msdn.microsoft.com/en-us/library/hh166064%28v=nav.70%29.aspx)来导出。我不认为这直接适用于早期版本，但您可能可以使用[app code 中的 EXPORTOBJECTS 函数](http://msdn.microsoft.com/en-us/library/dd983800.aspx)做类似的事情。有相应的导入功能。

[沃尔多博客上的这篇文章](http://dynamicsuser.net/blogs/waldo/archive/2009/06/05/exporting-and-importing-objects-with-c-side-in-nav-2009.aspx)也可能很有趣。他还有许多其他相关的职位，因为他来自[Revision](http://www.ifacto.be/en/revision)背后的团队，这是 NAV 和 TFS 之间的集成。

# linux - Nginx - 从源代码构建 - 不工作

> ID：12645023
> 
> 赞同：0
> 
> 时间：2012-09-28T17:56:25.163
> 
> 标签：linux, nginx

我正在使用此代码安装 Nginx

```
aptitude -y install nginx
aptitude -y full-upgrade 
```

这工作正常。但是，我想从源代码安装我的应用程序以提供更多控制权。然后我使用了这段代码：

```
cd /opt/
wget http://nginx.org/download/nginx-1.2.3.tar.gz
tar xvfz nginx-1.2.3.tar.gz
cd nginx-1.2.3
./configure
make
make install 
```

但是，它似乎已经在服务器上提取并安装得很好，但我在我的网站上看不到任何东西。用于重新启动我的 Nginx 的命令也不再有效：

```
/etc/init.d/nginx restart 
```

有没有人能给我更多关于可能出了什么问题的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:31:52.397

您需要检查服务器的安装位置。可能它已安装到`/usr/local/bin`目录中。它指定的二进制文件`/etc/init.d/nginx`位于`/usr/bin`.

此外，您可以`set -x`在第二行添加`/etc/init.d/nginx`以查看启动它时会发生什么。

# android - Android Native Browser：CSS层点击点击

> ID：12645025
> 
> 赞同：2
> 
> 时间：2012-09-28T17:56:29.400
> 
> 标签：android, behind

我正在为 Android 构建一个页面，它使用 CSS。我现在正在测试的手机是 ICS。我发现在本机浏览器中，当我单击 z-index 比页面高的 div 时，我实际上激活了 div 后面的元素。这意味着我无意中点击了让我离开页面的广告和链接。

不过，这不会在 ICS chrome 浏览器上发生。有没有人知道我可以做些什么来解决这个问题，以便我的 div 被窃听？

谢谢，

# jsf - Primefaces 从数据表下载文件

> ID：12645031
> 
> 赞同：3
> 
> 时间：2012-09-28T17:57:03.923
> 
> 标签：jsf, jsf-2, primefaces

我有这个奇怪的问题，文件下载选项没有从 XHTML 中调用。我对 JSF 很陌生，所以我可能搞砸了一些基本的东西，但任何帮助都将不胜感激。

这是我的 XHTML

```
<p>Files List</p>
<h:form prependId="false">
    <p:dataTable value="#{pc_ArchiveFiles.archiveFiles}" var="fs"
        paginator="true" rows="5"
        paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
        rowsPerPageTemplate="5,10,15">
        <f:facet name="header">  
            Client Files  
        </f:facet>
        <p:column>
            <f:facet name="header">
                File Name
            </f:facet>
             <h:outputText value="#{fs.fileName}" /> 
        </p:column>
        <p:column>
            <f:facet name="header">
                File Size
            </f:facet>
            <h:outputText value="#{fs.fileSizeInKB}" />
        </p:column>
        <p:column>
            <f:facet name="header">
               Download File
            </f:facet>
            <p:commandLink id="downloadLink" value="Download" ajax="false">  
                    <p:fileDownload value="#{pc_ArchiveFiles.downloadPDF}" />
            </p:commandLink> 
        </p:column>
    </p:dataTable>
</h:form> 
```

这是后备豆

```
@ManagedBean(value = "pc_ArchiveFiles")
@RequestScoped
public class ArchiveFiles extends PageCodeBase {
private static final Logger logger = LoggerFactory
        .getLogger(ArchiveFiles.class);
 @Value("${archive.location}")
private String repository;
public List<ArchiveFile> getArchiveFiles() {

    Map<String, String> params = FacesContext.getCurrentInstance()
            .getExternalContext().getRequestParameterMap();
    subCategory = params.get("categoryName");

    // Build request object
    ArchiveFilesRequest request = new ArchiveFilesRequest();
    request.setCaseWorkerId(SecurityUtil.getLoggedInUser().getLoggedUserId());
    request.setClientId(getSelectedConsumer().getConsumerId());
    request.setCategoryName(subCategory);
    ArchiveFilesResponse response = archiveService.getArchiveFiles(request);
    if((response.getResponseType() == ResponseType.SUCCESS || response.getResponseType() == ResponseType.WARNING) && response.getFileCount() > 0) { // There is at least one file
        archiveFiles = new ArrayList<ArchiveFile>();
        archiveFiles.addAll(response.getFileSet());
        return archiveFiles;
    } else {
        return Collections.<ArchiveFile> emptyList();
    }
}

 public void downloadPDF() throws IOException {

        FacesContext facesContext = FacesContext.getCurrentInstance();
        ExternalContext externalContext = facesContext.getExternalContext();
        HttpServletResponse response = (HttpServletResponse) externalContext.getResponse();

        facesContext.responseComplete();
    } 
```

}

![显示下载链接的 JSF 页面](../Images/af89922390feb9fdfcb4fd26be75041d.png)

当我单击下载时，我希望调用 downloadPDF()。但它似乎再次调用 getArchiveFiles() 方法而不是 downloadPDF()。我已将 p:CommandLink 更改为以下代码，但它仍然没有调用正确的方法。最重要的是，如果我让它工作，我还必须传入文件名参数。

```
<h:commandLink id="downloadLink" value="Download PDF" target="_blank" action="#{pc_ArchiveFiles.downloadPDF}" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:06:41.277

****p:fileDownload**的**value 属性**应该是**StreamedContent 的一个实例**。[在第 174 页的此处](http://www.primefaces.org/documentation.html)查看文档，它应该类似于以下代码：**

 **```
 <p:commandButton id="downloadLink" value="Download" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop)"   
        icon="ui-icon-arrowthichk-s">  
    <p:fileDownload value="#{fileDownloadController.file}" />  
</p:commandButton>  

 private StreamedContent file;  
 public StreamedContent getFile() {  
        return file;  
    }    
public void setFile(StreamedContent file){
 InputStream stream = ((ServletContext)FacesContext.getCurrentInstance().getExternalContext().getContext()).getResourceAsStream("/images/optimusprime.jpg");  
        file = new DefaultStreamedContent(stream, "image/jpg", "downloaded_optimus.jpg");  
} 
```

如果你想从**h:commandLink**触发downloadPDF()**监听**器，你应该使用 actionListener 而不是 action 属性：

 **```
<h:commandLink id="downloadLink" value="Download PDF" target="_blank" actionListener="#{pc_ArchiveFiles.downloadPDF}" /> 
```****

# git-tf - 理解为什么 git-tf 有时会在 pull --deep --rebase 上失败

> ID：12645033
> 
> 赞同：1
> 
> 时间：2012-09-28T17:57:21.600
> 
> 标签：git-tf

背景：我刚刚开始使用 git-tf，因为等待时间拉低了一个有 50 多个分支的 TFS 项目（以及许多其他原因），这让我感到非常沮丧。以前不是 git 用户，所以我正在学习所有的命令和功能。

我在本地分支中完成所有开发工作，然后当我准备好推送到 TFS 时，我换回 master 并执行**git tf pull --deep --rebase**。大多数情况下，这一切都完美无缺——一切都被拉下来，文件被更新，生活很美好。但最近，它偶尔会失败并显示以下消息：

```
Fetching and merging changes in $/TFS/repo at latest changeset: 100%, done

All files were fetched to commit 59ad2a4\. The rebase operation was aborted with 
the following failures:

Project.Subproject/Folder/SomeRandomFile.sql : the file has uncommitted changes in the 
working folder 
```

在运行 pull 之前，git status 确认我在 master 中的更改为零。在此之后， git status 仍然确认我没有修改过的文件。

在这一点上，我可以（并且已经）将 '59ad2a4' 或其他任何内容合并到 master 中，它按预期工作，我回去工作了。只是好奇这里到底发生了什么，如果我做错了什么或不理解，因为这似乎是随机发生的。

# sql - 在循环中使用 SELECT 结果作为变量

> ID：12645035
> 
> 赞同：0
> 
> 时间：2012-09-28T17:57:23.767
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我在这里和其他地方搜索过，还没有找到答案。希望我没有错过。

使用 SQL Server Management Studio 2008 R2。

我的服务器上有 n 个特定数据库（还有其他数据库，但我只对其中一些感兴趣）

这些数据库中的每一个都有一个表，它们都具有相同的名称。唯一的区别是数据库名称。我想将这些表聚合在一起，在不同的数据库（不同于其他数据库）上创建一个大表。

我可以从查询结果中获取数据库名称。

N 未知。

循环是解决这个问题的方法吗？

我正在考虑以下伪代码的内容：

```
Set @dbnames = SELECT DISTINCT dbname FROM MyServer.dbo.MyTable

For each @name in @dbnames
    INSERT INTO ADifferentDB.dbo.MyOtherTable
    SELECT * FROM @name.dbo.table
Next name 
```

（显然我对使用 SQL 变量也是新手，如您所见）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T18:10:29.623

你的第一个问题是关于迭代数据库：你可以用游标来做

然后你有另一个问题，执行一个查询，其中一部分是变量（数据库的名称）。你可以用`execute`函数来做到这一点。

所有这些都与此类似：

```
DECLARE @query VARCHAR(max)
DECLARE @dbname VARCHAR(100)
DECLARE my_db_cursor CURSOR
            FOR SELECT DISTINCT dbname FROM MyServer.dbo.MyTable
OPEN my_db_cursor 
FETCH NEXT FROM my_db_cursor 
INTO @dbname
WHILE @@FETCH_STATUS = 0
BEGIN
    SET @query = 'INSERT INTO ADifferentDB.dbo.MyOtherTable
                   SELECT * FROM ' + @dbname + '.dbo.table'
    EXECUTE(@query)  

    FETCH NEXT FROM my_db_cursor 
    INTO @dbname
END
CLOSE my_db_cursor 
DEALLOCATE my_db_cursor 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:01:24.500

您要做的是`CURSOR`为行级操作定义一个。这是一些[文档](http://msdn.microsoft.com/en-us/library/ms180169.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T18:17:31.820

我建议使用[`sp_MSForEachDB`](http://weblogs.sqlteam.com/joew/archive/2008/08/27/60700.aspx)：

```
EXEC sp_MSForEachDB '
-- Include only the databases you care about.
IF NOT EXISTS (
    SELECT *
    FROM MySever.dbo.MyTable
    WHERE dbname = ''?''
)
    -- Exit if the database is not in your table.
    RETURN

-- Otherwise, perform your insert.
INSERT INTO ADifferentDB.dbo.MyOtherTable
SELECT * FROM ?.dbo.table
' 
```

在这种情况下，`?`是一个被服务器上的每个数据库替换的令牌。

# ruby - 无法让文本输入在我的简单 Sinatra 文本数字游戏上工作

> ID：12645036
> 
> 赞同：1
> 
> 时间：2012-09-28T17:57:24.143
> 
> 标签：ruby, forms, sinatra, haml

我用 Ruby 制作了一个简单的游戏来帮助学习它。现在，我一直在尝试在 Sinatra 中实现它，但是我无法让文本输入与“while”循环交互。谁能帮我看看我做错了什么？

```
require 'rubygems'
require 'sinatra'
require 'sinatra/reloader'
require 'haml'
#use Rack::Session::Pool

module HotColdApp
  def initialize
    guesses = 1
    i = rand(10)
  end

  def play
    "Guess a number from 1 to 10"
    "You have 5 tries"
    "----------"
    guess = gets.to_i
    while guess != i and guesses < 5
      guesses = guesses + 1
      if guess < i
        "too cold"
        guess = gets.to_i
      else guess > i
        "too hot"
        guess = gets.to_i
      end
    end
    if guess == i
       "just right"
    else
       "try again next time"
    end
  end
end

include HotColdApp
  get '/' do
    p initialize
    haml :index
  end

  post '/' do
    guess = params[:guess]
    haml :index, :locals => {:name => guess}
  end

__END__

@@ index
!!!!
%html
  %head
    %title Hot/Cold
  %body
    %h1 hOt/cOld
    %p
    Guess a number from 1 to 10\. You have 5 tries.
    %form{:action => "/", :method => "POST"}
    %p
    %input{:type => "textbox", :name => "guess", :class => "text"}
    %p
    %input{:type => "submit", :value => "GUESS!", :class => "button"}
    %p 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:20:07.210

我不确定这是否完全符合您的要求，但确实可以玩游戏。需要注意的一些事情：我改变了播放方法。使用 while 循环并获取并没有多大意义。相反，我抓住了参数并传递给play，同时保持猜测的数量。我缩进了表单，因为您没有嵌套提交或表单内的文本字段。我建议您在使用 haml 生成后查看页面的来源。它没有看到你完全理解发生了什么。这应该给你更多的步骤来获得成功。

```
require 'sinatra'
require 'sinatra/reloader'
require 'haml'
#use Rack::Session::Pool

module HotColdApp
  def initialize
    @guesses = 5 
    @i = rand(10)
  end 

  def play(guess)
    guess = guess.to_i
    if(@i != guess && @guesses > 1)
      @guesses -= 1
      if guess < @i
        return "#{@guesses} left. Too cold"
      else guess > @i
        return "#{@guesses} left. Too hot"
      end 
    elsif(@i != guess && @guesses == 1)
      return "You lose!"
    elsif(@i == guess)
      return "You win!"
    end 
  end 
end

include HotColdApp
  get '/' do
    p initialize
    haml :index
  end 

  post '/' do
    guess = params[:guess]
    @result = play(guess)
    haml :index, :locals => {:name => guess}
  end 

__END__

@@ index
!!!!
%html
  %head
    %title Hot/Cold
  %body
    %h1 hOt/cOld
    %p
    Guess a number from 1 to 10\. You get 5 tries.
    %form{:action => "/", :method => "POST"}
      %p
      %input{:type => "textbox", :name => "guess", :class => "text"}
      %p
      %input{:type => "submit", :value => "GUESS!", :class => "button"}
    %p
    %p= @result 
```

# php - stristr 不使用 html 标签

> ID：12645038
> 
> 赞同：0
> 
> 时间：2012-09-28T17:57:45.820
> 
> 标签：php, html, string, dom, html-parsing

我正在创建一个 RSS 提要聚合器，它不仅可以通过访问每个链接来检索帖子的描述，还可以检索帖子的全部内容。我正在使用 stristr 过滤帖子中不需要的信息，例如 facebook、twitter 关注者和其他内容。它非常适合一个人饲料并且不能与其他人一起使用。这是我的代码：

```
<?php
function getcontent($l,$b,$c)
{
    $dom=file_get_html($l);
    $atitle=$dom->find($b);
    $content=$dom->find($c);
    $contents=implode(" ",$content);
foreach($atitle as $t)
            {
                echo "<b>".$t."</b>";

            }
            echo "<br /><br />";
        echo $contents;
        echo "<br />";
}
function filtercontent($strip,$l,$b,$c)
{
    $dom=file_get_html($l);
    $atitle=$dom->find($b);
    $content=$dom->find($c);
    $contents=implode(" ",$content);
    $contents=stristr($contents,$strip,true);
    foreach($atitle as $t)
            {
                echo "<b>".$t."</b>";

            }
            echo "<br />";
            echo $contents;
            echo "<br /><br />";

}
ini_set('default_charset', 'UTF-8');
ini_set('max_execution_time',0);
ini_set('memory_limit', -1);
include("simple_html_dom.php");

$url=array("http://www.deccanherald.com/rss/news.rss","http://syndication.indianexpress.com/rss/798/latest-news.xml");

$atitle=NULL;
$content=NULL;
foreach($url as $feed)
{
    $f=$feed;
    $feed=simplexml_load_file($feed);
    //echo $feed;
    if($feed)
    {
        //$feed_title=$feed->channel->title;
        //echo "<br />".$feed_title."<br />";
        $items=$feed->channel->item;
        foreach($items as $item)
        {
            //foreach($keywords as $key)
            //{
            //if(strtolower($item->description)==$key || strtolower($item->title)==$key)
            //{

        $title=$item->title;
        //echo "<h1><b>".$title."</b></h1><br />";
        $link=$item->link;
        //echo "<a href='".$link."'>".$link."</a><br />";
        $des=$item->description;
        //echo "<br />".$des."<br />";

            if($f=="http://beta.thehindu.com/news/?service=rss")
            {
            $title_class=".detail-title";
            $content_class=".body";
            getcontent($link,$title_class,$content_class);

            }
            if($f=="http://in.news.yahoo.com/rss/national/")
            {
            $title_class=".headline";
            $content_class=".yom-art-content";
            getcontent($link,$title_class,$content_class);
            }

        if($f=="http://syndication.indianexpress.com/rss/798/latest-news.xml")
            {

            $link=$link."0";
            $title_class=".headstory";
            $content_class=".contentLeftbigstory";
            $strip='<div class="paginationNew">';
            filtercontent($strip,$link,$title_class,$content_class);

            }
            if($f=="http://www.indiatvnews.com/rssfeed/india_news.xml")
            {

            $title_class=".topstorytitsub";
            $content_class=".standard";
            foreach($link as $post)
            {
                $dom=file_get_html($link);
                $title=$dom->find($title_class);
                $content=$dom->find('div[style=min-height:350px]');
                foreach($title as $t)
                echo "<b>".$t."</b><br />";
                foreach($content as $c)
                {
                    echo $c;

                }

            }

            }
            if($f=="http://beta.thehindu.com/news/?service=rss")
            {
            $title_class=".detail-title";
            $content_class=".body";
            getcontent($link,$title_class,$content_class);

            }
            if($f=="http://www.deccanherald.com/rss/news.rss")
            {
            $title_class=".newsText";
            $content_class=".postedBy";
            $strip='<a href="#top" class="gototop">Go to Top</a>';
            filtercontent($strip,$link,$title_class,$content_class);            
            }

            }
    }
        }

?> 
```

我使用[简单的html dom解析器](http://simplehtmldom.sourceforge.net/manual.htm)来解析html。filtercontent函数将一段字符串作为输入，而不是其他输入。这个称为strip的字符串用于过滤并返回第一次出现strip字符串之前的所有内容。它工作得很好使用 syndication.com 提要，但使用 deccanherald.com 提要失败。为了便于理解，我排除了其他提要，其他提要也使用 getcontent 功能，效果很好。deccan herald 中帖子的示例来源是：

```
<h1>Crazy star Ravichandran takes potshots at TV channels</h1>

                                                            <div class="postedBy">Mysore, September 28, 2012, DHNS:
                                                                                            <p>Actor opens ‘Conflux 2012’ media fest at Mahajana’s college in city</p>
                                                        <a name="top"></a>

                                                        <p><p><strong>When actor, director and producer of Kannada filmdom V&#8200;Ravichandran was invited to inaugurate &lsquo;Conflux 2012&rsquo; a two-day inter-collegiate media and communication fest of&#8200;SBRR&#8200;Mahajana First&#8200;Grade College in the city on Friday, many would have thought it contrasting.</strong><br /><br />However, when Ravi as he is popular among his acolytes, took over the dais and addressed the gathering where youngsters topped others, the choice of selecting Ravichandran to open the fest seemed apt. <br /><br />Mincing no words, the actor nick named &lsquo;Crazy Star&rsquo; made a relevant remark taking potshots at the electronic media for opting negativism rather than positive aspects to up their television rating points (TRP). Taking the names of two channels in Kannada, the actor said they are indulging in taking the people for a ride with concocted facts.<br /><br /> More than that, almost all the channels are airing moribund programmes. Said&#8200;Ravichandran; &ldquo; Pen is mightier than sword and show your talent in reaching the people and guide them.&rdquo;<br /><br />On filmdom, Ravichandran said that the fans still want him to romance heroines like what he did in Premaloka and other flicks. &ldquo;&#8200;I have already turned 50&rdquo;, said&#8200;Ravichandran making it clear that he cannot redo what he did in the past.&#8200;Referring to &lsquo;Manjina Hani&rsquo; the most awaited movie from his banner from the past several years, the actor said &lsquo;he is discovering the man in him&rsquo;.  <br /><br />Earlier, it was a filmy welcome to the actor. No sooner he entered the hall, pat filled the air an all time hit song from Ranadheera; baa baaro ranadheera...  <br /><br />Principal of the college&#8200;Prof K&#8200;V&#8200;Prabhakar said students from as many as 18 colleges from several parts of the State are participating in the fest.</p><p>To avoid chaos, the management had prohibited the entry of outsiders (especially students). <br /><br />Barring the participants, dignitaries and media, others were not allowed with students of the college keeping a tab on the visitors at the main gate of Vivekananda Hall of the college.<br /><br />Jayalakshmipuram police had to disperse the mad crowd who had dared to assemble in front of the hall.<br /><br />Chairman of&#8200;Mahajana Education Society R&#8200;Vasudevamurthy, HoD, mass communication and journalism Nivedita and others were present.<br /><br /><strong>Supports Cauvery stir</strong><br /><br />Actor&#8200;Ravichandran on&#8200;Friday extended support to ongoing agitation against the centre&rsquo;s directive to State to release 9,000 cusec of water to Tamil Nadu. On Karnataka bandh call given by various organisations on October 6 over the same issue, the actor said he too will support following Karnataka&#8200;Film&#8200;Chamber of Commerce&rsquo;s (KFCC) similar announcement. &ldquo;When the State itself is facing acute water shortage, how can we release water to them&rdquo;, the actor asserted. He also denied any interests to join politics saying; nange rajakeeya barolla (I don&rsquo;t know politics).</p></p>

                            <p class="gotoTop"><a href="#top" class="gototop">Go to Top</a></p>

                            <div class="socialNetworkingLinks">
                                 <a href="http://www.deccanherald.com/tell_a_friend.php?id=281782" style="margin-left:-5px;"><img src="http://www.deccanherald.com/images/email.jpg" alt="" border="0" /></a> 
                                <a href="#" onClick="javascript:window.print();"><img src="http://www.deccanherald.com/images/print.jpg" alt="" border="0" onClick="javascript:window.print();" /></a> 
                                <a href="javascript:addToFavorites()"><img src="http://www.deccanherald.com/images/bookmark.jpg" alt="" border="0" /></a> 
```

我也使用过，`$strip='<p class="gotoTop">'`但没有任何效果，一切都返回结果与顶部和社交工具栏。为什么它不起作用。我的代码有什么问题。它适用于一个提要，但不适用于另一个提要。请帮我解决这个问题。`$strip='<div class="socialNetworkingLinks">'``$strip="Go to Top"`

截屏： ![在此处输入图像描述](../Images/c83e122da8428c8f15a72b7de548eace.png)

我想删除从“转到顶部”开始的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:13:57.217

我认为问题出在`$content_class=".postedBy";`. 该类中唯一的东西是`Mysore, September 28, 2012, DHNS:`, 不匹配`$strip`。

编辑：

PostedBy DIV 看起来像：

```
<div class="postedBy">Mysore, September 28, 2012, DHNS:</div> 
```

它不包括文章的正文。

# php - php ftp_get() 返回权限被拒绝

> ID：12645042
> 
> 赞同：4
> 
> 时间：2012-09-28T17:57:55.880
> 
> 标签：php, ftp, cron

我正在使用 ftp 上传脚本将一台服务器传输到另一台服务器。它在浏览器窗口中运行良好，并且在 ssh 命令行中运行良好：php /var/www/vhosts/domain.com/httpdocs/ftp_shell.php

但是当我从 cron 运行完全相同的命令时，我得到了这个：

PHP 警告：ftp_get(ftp.tmp)：无法打开流：/var/www/vhosts/domain.com/httpdocs/ftp_shell.php 中的权限被拒绝，第 516 行 PHP 警告：ftp_get()：打开 ftp.tmp 时出错/var/www/vhosts/domain.com/httpdocs/ftp_shell.php 在第 516 行

我查看了第 516 行，即：

```
 if((ftp_get($ftp_from,"ftp".$tmp.".tmp",$fname,FTP_BINARY) ||
        ftp_get($ftp_from,"ftp".$tmp.".tmp",$fname,FTP_ASCII)) &&
       (ftp_put($ftp_to,$fname,"ftp".$tmp.".tmp",FTP_BINARY) ||
        ftp_put($ftp_to,$fname,"ftp".$tmp.".tmp",FTP_ASCII)) &&
       ftp_site($ftp_to,"chmod ".base_convert($chmod,10,8)." $fname") &&
       f_size()&&unlink("ftp".$tmp.".tmp")) {echoout(" (".$size_b." bytes) ok<br>");$count_f++;} 
```

我知道它正在将文件写入临时文件，但为什么它允许我在浏览器和命令行中执行此操作，而不是 cron？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T18:03:29.633

可能临时文件是由 php 脚本（apache 用户）创建的，您想从 cron 作业（root 用户）中读取它。出于安全原因，临时文件无法从一个用户读取给其他用户。

您必须更改您的 cron 作业以由 apache 用户执行，或者您可以更改临时文件的权限以供所有人读取，但不建议这样做，因为任何其他进程都可以读取该文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:02:21.567

在 cron 下运行的作业将具有与您从网络服务器和/或命令行运行的任何不同的默认工作目录。很可能在 cron 中被用作默认目录的任何目录都没有适当的权限供 cron 作业使用。

尝试使用绝对路径，例如

```
ftp_get($ftp_from,"/real/path/to/file/ftp".$tmp.".tmp",$fname,FTP_BINARY)
                   ^^^^^^^^^^^^^^^^^^^ 
```

而不是您使用的相对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T18:06:26.923

错误说：

`PHP Warning: ftp_get(ftp.tmp): failed to open stream`

这条线是：

`if((ftp_get( $ftp_from, "ftp" . $tmp . ".tmp", $fname ...`

所以错误必须在一个空`$tmp`变量中

# c# - 从 SQL 文件构建数据库

> ID：12645053
> 
> 赞同：2
> 
> 时间：2012-09-28T17:58:52.600
> 
> 标签：c#, sql, sql-server-ce, build-process

这是针对数据库课程中的一个项目，所以我试图避免使用 EF Code First 之类的东西，让我假装数据库实际上并不存在，而数据只是神奇地持续存在。

基本上，我希望能够从 SQL 脚本中拆除并重新构建本地 SQL Server CE 数据库，作为项目中的构建步骤。我正在使用 VS2012 express，它是一个 WPF 项目。理想情况下，从 IDE 的项目中可以看到一个 SQL 文件夹，其中包含按顺序运行的脚本。

我所能找到的只是帮助您避免编写 SQL 的工具。关于我如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T18:06:37.207

您可以编写一些 C# 代码来读取目标文件夹的内容并针对数据库执行它（使用纯粹的、简单的 SqlCommands），然后将此代码放入 MSBuild`Task`中，并将其添加到`AfterBuild`您的`csproj`.

编辑：更好的是，使用预先存在的 MSBuild 包（如[http://www.natthompson.com/?p=183](http://www.natthompson.com/?p=183)这个）为您执行 sql！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:46:01.040

或者，您可以将 SQL 文件的内容（一次一个）读入字符串，并使用简单的 ADO.Net 调用以编程方式对 DB 执行它们。

你可以使用这样的东西：

```
 /// <summary>
    /// This method internally uses the ExecuteNonQuery method of the SqlCommand object
    /// to run a query that returns no values (updates/inserts/deletes).
    /// </summary>
    /// <param name="sql">The SQL to execute</param>
    /// <param name="parameters">The SqlParameters to use (pass null if there are none)</param>
    /// <remarks>This method is thread safe.</remarks>
    public static void runNonQuery(string sql, IList<SqlParameter> parameters, string dbConnectionString)
    {
        // Old-school, using simple ADO.Net to run a non-query (updates/inserts/deletes) - KDR
        try
        {
            Monitor.Enter(_lock);
            using (SqlConnection conn = new SqlConnection(dbConnectionString))
            {
                using (System.Data.SqlClient.SqlCommand cmd = new System.Data.SqlClient.SqlCommand())
                {
                    conn.Open();
                    cmd.Connection = conn;
                    cmd.CommandType = CommandType.Text;
                    cmd.CommandText = sql;

                    if (parameters != null && parameters.Count() != 0)
                    {
                        foreach (SqlParameter param in parameters)
                        {
                            cmd.Parameters.Add(param);
                        }
                    }
                    cmd.ExecuteNonQuery();
                }
                if (conn.State != ConnectionState.Closed) { conn.Close(); }
            }
        }
        finally
        {
            Monitor.Exit(_lock);
        }
    } 
```

只需在字符串 sql 中传递 SQL 脚本文件的内容，为参数列表传递 null，然后在 dbConnectionString 中将连接字符串传递给您的数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T15:52:06.007

sqlcmd.exe（命令行实用程序）不适用于 Sql Server CE。
（如果您使用的是完整版 Sql Server（或 Sql Server Express），我将从 sqlcmd.exe 开始。）

所以这是一个（也许）让你开始使用 CE 的想法。请参阅下面的网址。

[http://blogs.msdn.com/b/stevelasker/archive/2007/03/31/creating-your-sql-server-compact-edition-database-and-schema-in-code.aspx](http://blogs.msdn.com/b/stevelasker/archive/2007/03/31/creating-your-sql-server-compact-edition-database-and-schema-in-code.aspx)

# amazon-web-services - 使用 AWS Java 开发工具包为作业流指定密钥对

> ID：12645059
> 
> 赞同：1
> 
> 时间：2012-09-28T17:59:17.473
> 
> 标签：amazon-web-services

创建作业流时如何使用 AWS Java 开发工具包指定密钥对？我需要指定密钥对，以便以后可以 ssh 进入主节点。

我使用 RunJobFlowRequest 类，但它没有指定密钥对的方法。RunInstancesRequest 类为此提供了一个 api (setKeyName)，但我想专门创建一个 Job Flow。

我知道如何使用控制台创建作业流程，从而指定密钥对。但我正在寻求自动化，所以我想弄清楚如何使用 Java SDK 做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T23:13:00.410

查看以下`setInstances`方法`RunJobFlowRequest`： [http ://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/index.html](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/index.html)

该方法允许您传入一个`JobFlowInstancesConfig`对象： [http ://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/elasticmapreduce/model/JobFlowInstancesConfig.html](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/elasticmapreduce/model/JobFlowInstancesConfig.html)

在该`JobFlowInstancesConfig`对象中，您可以使用该方法指定在以用户身份登录到实例`setEc2KeyName`时启用哪个 EC2 密钥对。`hadoop`

# c++ - 如何从 C Microsoft PC 应用程序向 iPhone 发送 APNS 推送通知？

> ID：12645060
> 
> 赞同：0
> 
> 时间：2012-09-28T17:59:17.553
> 
> 标签：c++, push, apple-push-notifications

如何从 C++ Microsoft PC 应用程序向 iPhone 发送 APNS 推送通知？...

有关于如何从 Mac 向 ios iPhone 应用程序发送推送通知以及如何将 WNS 推送通知发送到 Microsoft 手机的信息“在那里”......但是有没有人有信息或更有用的代码示例来说明如何从 PC 上运行的 Microsoft C++ MFC 应用程序向 ios iPhone 应用程序发送推送通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:06:44.150

派对迟到了，但仍然...

...不像一块馅饼那么容易，你需要玩几天才能成功。

首先[从 Apple 阅读这件事](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html#//apple_ref/doc/uid/TP40008194-CH101-SW1)，然后全部阅读。

并看看其中一个很好的[教程](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)。

简而言之，您的后端通过 TCP SSL 通道将通知推送到 Apple 推送通知服务 (APNS)。然后那个疯狂的东西将通知推送到 iOS 设备本身。

您的应用需要注册通知，并向您的后端提供令牌。

出于安全考虑，Apple 以这种方式处理事情，所以这是你唯一的选择。

如果您阅读文档，则非常简单。祝您 PN 好运；）

# shell - 如何在shell中设置ant属性“output.root”？

> ID：12645065
> 
> 赞同：0
> 
> 时间：2012-09-28T17:59:48.900
> 
> 标签：shell, ant, cygwin

我需要`output.root`从 Cygwin shell 中指定 ant 属性，因为我无法编辑`build.xml`. 目前，我正在尝试导出一个环境变量，比如

> 导出输出.root="/d/output"。

但这给了我一个错误：

> 导出：`output.root=/d/output'：不是有效的标识符

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:33:11.287

您必须`.`从变量名中删除或将其替换为`_`.

**更新**

Ant 属性不是 shell 变量。`ant`您必须在using的命令行中指定 ant 属性`-D`：

```
ant -Doutput.root="/d/output" target1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:07:25.650

标识符中只允许使用 ASCII 字母数字字符和下划线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T19:57:53.317

要从命令行设置 ant 属性，您应该使用语法

```
ant -D<property>=<value> [target [target2 [target3] ...]] 
```

参考：[Ant 手册](http://ant.apache.org/manual/running.html#options)。

# javascript - object.style.hasOwnProperty('MozTransform') 返回 false？

> ID：12645066
> 
> 赞同：1
> 
> 时间：2012-09-28T17:59:50.937
> 
> 标签：javascript, firefox

当使用“hasOwnProperty”检查样式属性是否存在时，Firefox 将返回 false，而 Chrome 和 IE 的行为方式与我预期的一样，并将使用各自的转换前缀返回 true。但是，如果我使用“in”运算符，它就可以正常工作。

```
object = document.getElementById('myThing');
console.log(object.style.hasOwnProperty('MozTransform') // False
console.log("MozTransform" in object.style); // True 
```

我想知道是否有人可以解释为什么 hasOwnProperty 在 Firefox 中的工作方式如此不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T01:46:25.937

根据规范，像这样的属性是原型自己的属性，而不是对象本身的属性。因此，您在 Firefox 中看到的行为。

# php - 如何控制 Magento 块渲染顺序（不是位置）

> ID：12645067
> 
> 赞同：1
> 
> 时间：2012-09-28T17:59:53.217
> 
> 标签：php, magento, layout, block, magento-1.5

在我们的 Magento 商店中，我们有“特色”页面，这些页面基本上是产品集合，其中设置了某个“特色”属性。为此，我使用 CMS 页面以及带有自定义块类的自定义模块来显示产品。这很好用。我现在正在为这些页面添加 Magento 的分层导航。事实证明，这比我想象的更困难，主要是因为分层导航依赖于**current_category**。我已经能够通过创建我自己的分层导航块和我自己的 Layer 类来解决这个问题。我现在让它工作了，但是我遇到了块内容呈现顺序的问题。

Magento 渲染布局时，似乎是先渲染 Left 结构块，其中包含类别树和分层导航块。不幸的是，我自定义的分层导航块取决于内容块中的产品列表。渲染分层导航块时，尚未创建过滤的产品集合。这会导致可过滤属性的空列表，因此分层导航块仅显示类别列表。

我已经能够通过在我的布局 XML 文件中移动块定义来解决该问题，因此它发生在创建内容块之后。虽然这可行，但这并不是我所希望的优雅解决方案。我创建了一个自定义布局句柄，用于处理所有“特色”页面的所有共享块。对于每个“特色”页面，我都会调用`<update handle="featured_default">`. 最初，我尝试将分层导航块定义放在**features_default**句柄中，但这导致了上述问题（即产品集合尚未准备好）。通过将它放在它正确呈现的产品列表块定义之后*。*但这意味着我必须把它放在*所有的**布局*更新中*特色页面。正如我所说，这不是我希望的优雅解决方案。*

 *所以这让我想到了我的问题……如果你还在我身边。是否可以控制块的*渲染*顺序？我知道您可以使用块定义中的**before**和**after属性来控制块的***放置*，但这只能控制它们在父块中的位置。我想做的是在渲染内容块*之后渲染分层导航块的输出。*这可能吗？

 *****一个后续问题是：我这样做对吗？鉴于我要完成的工作，是否有更好的解决方案来解决这个问题？我在网上找到的大部分关于将分层导航块放在 CMS 页面上的信息都向您展示了如何设置类别 ID 以与分层导航块一起使用，但这不是我所拥有的。这些产品可以属于不同的类别。它们唯一的共同点是它们的特定属性值设置为**true**。

很抱歉这个冗长的问题。我希望这是有道理的。如果您需要查看我的任何代码，请告诉我，我会发布您需要的任何内容。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-08T08:38:07.110

在 Magento 中，`before="child.block.name"`和`after="child.block.name"`属性用于定义块的顺序。如果没有指定这些属性，那么这些块将按照 Magento 读取它们的顺序呈现。

例如

从左到右移动购物车侧边栏块：

```
<reference name="left">
    <action method="unsetChild"><alias>cart_sidebar</alias></action>
</reference>
<reference name="right">
    <action method="insert"><blockName>cart_sidebar</blockName></action>
</reference> 
```

*   blockName：是您的块唯一名称。
*   兄弟名称：是一个块唯一名称，它已经存在于插入目标块中。
*   after: 是块位置的布尔标识符。如果等于 1，则该块将被添加到兄弟名称之后，如果兄弟名称为空，则该块将添加到子列表的底部
*   alias：是你的块的别名，如果它是空的，blockName 将被使用。******

# google-chrome - 插件中的 Google Chrome 'onLaunched' 错误

> ID：12645069
> 
> 赞同：6
> 
> 时间：2012-09-28T17:59:59.080
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-app

我正在关注[http://developer.chrome.com/trunk/apps/first_app.html](http://developer.chrome.com/trunk/apps/first_app.html)上的 google chrome 网络应用程序开发，并且网络应用程序没有启动。当我单击页面上的应用程序图标时，它会关闭选项卡。我已经从 github 下载了示例应用程序和插件，但是当我查看控制台时它们也无法正常工作，我收到此错误，请不要我在 chrome://flags 中启用了实验性 API。

```
Uncaught TypeError: Cannot read property 'onLaunched' of undefined 
```

我已将我的 chrome 浏览器更新到版本 22.0.1229.79。我的 manifest.json 文件是

```
{
"name": "Hello World!",
"description": "My first packaged app.",
"manifest_version": 2,

"version": "0.1",
"app": {
    "background": {
        "scripts": ["background.js"]
    }
},
"icons": {
    "16": "calculator-16.png", 
    "128": "calculator-128.png"
} 
```

}

还有我的 background.js 文件

```
 chrome.app.runtime.onLaunched.addListener(function() {
    chrome.app.window.create('window.html', {
        'width': 400,
        'height': 500
    });
}); 
```

有人可以指出我哪里出错了吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-25T21:56:43.547

如果您省略`"app": {}`manifest.json 中的声明，也会发生此错误。

即`"background": { "scripts": [ "background.js" ] },` 会给出这个错误。

并且`"app": { "background": { scripts": ["background.js"] },`会正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T22:33:39.957

新样式的打包应用程序（在清单`background`中的部分中具有密钥`app`）仅在 Chrome 23（目前在开发通道中，即将在测试通道中）和更高版本中受支持。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T18:54:16.673

获取至少版本 23的[Chrome](http://www.chromium.org/getting-involved/dev-channel)开发/测试版副本。

在运行示例之前，我还必须将以下行添加到 manifest.json 文件中

```
{
  ...,
  "minimum_chrome_version": "23",
  ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T23:48:18.513

[您可以在此处](http://www.chromium.org/developers/calendar)关注 Chromium 开发日历。

# asp.net-mvc-3 - System.Data.Objects.ObjectSet`1 而不是数据库表

> ID：12645071
> 
> 赞同：0
> 
> 时间：2012-09-28T18:00:03.603
> 
> 标签：asp.net-mvc-3

我有数据库 CarsDB，其中有 Table Car。我想查看汽车表，但只获得 System.Data.Objects.ObjectSet`1 而不是数据库表

```
public CarsBDEntities db = new CarsBDEntities();

    public ActionResult Index()
    {
        ViewBag.Carlist = db.Cars.ToString();
        return View();
    } 
```

我已经制作了一张桌子，然后从中创建了一个模型。使用实体框架和 ado.net。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:09:16.287

您正在尝试将 ObjectSet 转换为字符串，这就是您获得“System.Data.Objects.ObjectSet”的原因。您需要将数据从表中提取出来才能查看。例如，类似：

```
string firstCarMake = db.Cars.FirstOrDefault().Make.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:20:01.137

你不想使用`ToString`; 如果你只是返回`db.Cars`，那会给你一个`IEnumerable`你可以使用的。

```
var cars = db.Cars;
return View(cars); 
```

您可以使用它来制作将显示您的数据的 Webgrid。剃刀视图：

```
@model IEnumerable<Namespace.Models.Cars>

@{
    var grid = new WebGrid(Model);
}

@grid.GetHtml() 
```

# java - Java 与 JavaScript 变量范围

> ID：12645073
> 
> 赞同：0
> 
> 时间：2012-09-28T18:00:09.063
> 
> 标签：java, javascript, scope

在以下 Java 代码段中，范围`i`仅限于`for`循环内部。这就是为什么它会导致错误。但是，在类似的 JS 片段中，`i`显然可以在循环之外访问。这怎么可能？

爪哇：

```
for(int i=0;i<10;i++) {
    ...
}
System.out.println(i); 
```

输出：“我没有定义”

JS：

```
for(var i=0;i<10;i++) { 
    ...
}
console.log(i); 
```

输出：10

我没想到会看到 JS 的输出。我想知道 JS 与 Java 有何不同。JavaScript 变量作用域是如何工作的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-28T18:03:43.313

在 Javascript 中，“本地”变量具有*函数作用域*，而不是*块作用域*。

所有局部变量声明都“提升”到当前范围的顶部，因此您的代码等效于：

```
var i;
for (i = 0; i < 10; ++i) {
}
console.log(i); 
```

请注意，当*声明*被提升时，任何*分配*都不会。例如这段代码

```
function test() {
    console.log(i);  // undefined
    var i = 1;       // declaration and assignment
    console.log(i);  // 1
} 
```

相当于：

```
function test() {
    var i;           // declaration hoisted
    console.log(i);  // undefined
    i = 1;           // assignment still happens here
    console.log(i);  // 1
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T18:03:58.227

Javascript 只有两种类型的作用域——全局和函数。Javascript在函数级别的[词法范围。](http://en.wikipedia.org/wiki/Scope_%28computer_science%29#Lexical_scoping_and_dynamic_scoping)

# php - exec 的编码问题

> ID：12645074
> 
> 赞同：1
> 
> 时间：2012-09-28T18:00:11.897
> 
> 标签：php, character-encoding

我正在使用 exec 和 SVN 日志命令在我们公司的内部网页上从 SVN 获取一些信息。该网页按要求是 ISO-8859-1，但 SVN-server/exec 输出是 UTF8，特殊字符是十进制编码而不是“正常”编码。

据我所知，这使得无法使用 UTF8_decode 或类似功能，而且我无法真正掌握返回的确切格式，否则 str_replace 暂时可以作为一种解决方法。例如，据我所见，ä 由 ?\195?\164 表示，但我无法在输出中找到并替换该字符串，因此可能还有其他一些事情正在发生，我错过了

我的 SVN 服务器是 CentOS，网络服务器是运行 Apache 的 Debian，如果罪魁祸首可能在某处

伪代码

```
exec('svn log PATH' , $output);
foreach ($output as data){
    $data = str_replace(array('?\195?\165', '?\195?\182'), array('å','ö'), $data);
    echo $data . '<br>';
}

foreach ($output as data){
    $data = utf8_decode($data);
    echo $data . '<br>';
}

foreach ($output as data){
    $data = mb_convert_encoding($data, 'ISO-8859-1', 'UTF-8');
    echo $data . '<br>';
} 
```

回显的示例字符串是“Buggfix f?\195?\182r 7.1.34”，但应该是“Buggfix för 7.1.34”

# android - SQLite 数据库创建？

> ID：12645075
> 
> 赞同：0
> 
> 时间：2012-09-28T18:00:12.653
> 
> 标签：android

```
public static final String TABLE_COMMENTS = "comments";
  public static final String COLUMN_ID = "_id";
  public static final String COLUMN_COMMENT = "comment";

// Database creation sql statement
  private static final String DATABASE_CREATE = "create table "
      + TABLE_COMMENTS + "(" + COLUMN_ID
      + " integer primary key autoincrement, " + COLUMN_COMMENT
      + " text not null);"; 
```

任何人都可以解释上面的行在做什么。我是 android 的新手。TABLE_COMMENT 是我们正在创建的表中的列吗？为什么我们使用“（”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:04:25.733

TABLE_COMMENTS：表的名称。

COLUMN_ID：自动增量 ID 字段的名称。

COLUMN_COMMENT：注释，表中文本字段列的名称

为什么你使用“（”？因为那是语法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:05:47.710

TABLE_COMMENTS 是一个名为： 的表`comments`。

COLUMN_ID 和 COLUMN_COMENT 是列。

`"("`就是打开表格首选项，代码是这样的：`Create a table > (inside the brackets it creates the columns.)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T18:02:09.113

`TABLE_COMMENTS`是您的表的名称，它解析为`comments`!

```
private static final String DATABASE_CREATE = "create table "
      + TABLE_COMMENTS + "(" + COLUMN_ID
      + " integer primary key autoincrement, " + COLUMN_COMMENT
      + " text not null);"; 
```

完整的查询将变为

```
create table comments (
      id integer primary key autoincrement, 
      comment text not null
  ); 
```

# c++ - 随机分割错误

> ID：12645077
> 
> 赞同：1
> 
> 时间：2012-09-28T18:00:19.720
> 
> 标签：c++, c, segmentation-fault

我正在开发一款游戏。在某些地方，有时我会收到分段错误，而在其他所有时间代码都可以正常工作。如果我再次运行游戏（收到分段错误后），它会恢复（没有任何代码更改）并且运行良好。但过了一段时间又会出现这种情况。

我尝试使用 GDB 对其进行调试。我得到以下信息：

1.  有一个函数调用：func(&s.x)，其中 s 是一个结构，x 是它的 int 类型成员。地址 (&s.x) 为 0xb3456721
2.  在函数 func 中，参数中接收到的值为 0xb。
3.  程序崩溃说无法访问 0xb 的内存。当我使用 GDB 打印变量时，我再次收到无法访问内存。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T18:07:15.530

当给定相同的输入时，有时会崩溃但其他时候不会崩溃的程序中有一个不确定的数据源。通常源是未初始化的变量或内存块，但它可能依赖于时间戳、进程 ID 或来自系统的其他不同输入源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:44:52.153

我之前在 Linux 上成功地使用过[valgrind](http://valgrind.org/)来调试由未初始化变量引起的非确定性行为。

这是`valgrind`我使用的命令，您的程序和选项应该遵循

```
valgrind --tool=memcheck --leak-check=yes --show-reachable=yes --num-callers=20 --track-fds=yes --track-origins=yes -v 
```

如果您在 Windows 上运行，请查看此答案以查找`valgrind`替代品

[有没有很好的 Valgrind 替代 Windows？](https://stackoverflow.com/questions/413477/is-there-a-good-valgrind-substitute-for-windows)

你的程序是多线程的吗？非确定性的一个来源是[竞争条件](http://en.wikipedia.org/wiki/Race_condition#Computing)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T18:13:40.990

由于存在 C++ 标记，但您说您正在调用 then 函数：`func(&s.x)`，那么鉴于它在其参数参数中`func`收到的说法让我相信实际上是一个未正确初始化的引用。例如，考虑：`0xb``s`

```
struct foo {
    char a[12];
    int x;
};

void func (int *x) {
    *x = 0;
}

int main () {
    foo *sp = (foo *)-1;
    foo &s = *sp;
    func(&s.x);
} 
```

由于您没有提供足够的信息，因此无法准确诊断问题的性质。

# html - 让 SVG 在 HTML 页面中保持其纵横比

> ID：12645080
> 
> 赞同：8
> 
> 时间：2012-09-28T18:00:37.427
> 
> 标签：html, svg

我有下面这样的 HTML。我创建了一个具有 100x100 视图框的 SVG。渲染（在 Chrome 中）时，svg 将自身渲染为 200px 宽（好）但 ~500px 高，并且文本被推离页面底部。让我的窗口变大或变小没有任何影响——SVG 只会相应地增加或缩小高度。

为什么 svg 没有以任何方式限制高度？有没有办法让它自动保持 1:1 的纵横比？*SVG内部*的内容很好 - 它可以适当地缩放。这引起了一些严重的头痛

```
<html>
  <head>
    <title>SVG Ahoy</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body>
    <div style="width: 200px;">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" 
          preserveAspectRatio="xMinYMin meet" version="1.1"></svg>
      <div>content below</div>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T18:06:30.903

您在此处设置了 prserveApsectRatio，但我没有在您的 div 上看到高度。这会导致问题吗？另外，如果您查看 svg 文档，svg 项目**默认为 100% width 和 height**。尝试将它的高度和宽度明确设置为像素值，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-22T20:51:23.120

将 svg 放入`<img>`标签中：`<img src="path_to_svg" />`

图片样式：{width: 100%; 高度：自动；}

将高度设置为自动是秘密。像这样，即使是 preserveAspectRatio 属性也是可选的。（将其放入表格布局会破坏 Internet Explorer 的兼容性）。

# ruby - rails在保存之前去除非数值

> ID：12645083
> 
> 赞同：29
> 
> 时间：2012-09-28T18:00:50.533
> 
> 标签：ruby, regex, ruby-on-rails-3

我已经搜索过了，看起来这应该很简单，但我无法让它工作。我试图在保存电话号码之前删除所有非数字字符。这是我目前拥有的：

```
before_save { |workorder| workorder.phonenumber = 
                  phonenumber.to_s.gsub(/\D/, '').to_i } 
```

所以如果用户输入

```
925-555-5555 
```

它应该保存 9255555555 但它实际上只保存 925 并忽略之后的所有内容

我也试过：

```
before_save { |workorder| workorder.phonenumber = 
                  phonenumber.to_s.gsub(/[^0-9]/, "").to_i } 
```

结果相同。

解决了：

```
def raw_phonenumber
  self.phonenumber
end
def raw_phonenumber=(s)
  self.phonenumber=s.gsub(/\D/, '')
end 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-09-28T18:23:01.510

您当然已将`phonenumber`列定义为数字。这就是为什么当你`'925-555-5555'`在`phonenumber`属性中设置时，它被转换为一个数字，并且只`925`保留。

最好的解决方案是将数据库中列的类型更改为`string`. 创建一个新的迁移：

```
change_column :table_name, :phonenumber, :string, limit: 30 
```

否则，您可以像这样覆盖设置器以删除非数字字符（**但它不会修复以 '0's 开头的电话号码**）：

```
def phonenumber=(phonenumber)
  write_attribute(:phonenumber, phonenumber.gsub(/\D/, ''))
end 
```

[此博客文章](http://blog.arkency.com/2016/01/drop-this-before-validation-and-use-method/)中的更多替代方案

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-09-10T00:17:36.880

最简单的方法是改变`field=`方法：

```
def field=(value)
  super(value.delete('^0-9'))
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-25T10:21:38.330

您可以像这样创建保存/显示手机号码的自定义方法：

```
def mobile_number(arg)

if arg.downcase.include?('special chars')

phone_number = arg.downcase.split('special chars')

phone = if phone_number[0].to_i == 0 || phone_number[0].to_i.to_s.size < 10
number_to_phone(phone_number[0].gsub!(/[^0-9A-Za-z]/, '').to_i, area_code: true)
else
number_to_phone(phone_number[0].to_i, area_code: true)
end

return phone.to_s + ' Ext'+ remove_unnecessary_keywords(phone_number[1])

elsif arg.include?('(') || arg.include?(')') || arg.include?('-') || 
arg.include?('.') || arg.include?(' ')

return  number_to_phone(arg.gsub!(/[^0-9A-Za-z]/, '').to_i, area_code: true)    

else

return number_to_phone(arg.to_i, area_code: true) 

end

end 
```

# c# - Google Drive：获取（现有）文件的内容会导致 404 响应错误

> ID：12645085
> 
> 赞同：1
> 
> 时间：2012-09-28T18:00:54.637
> 
> 标签：c#, asp.net, httpresponse, google-drive-api

我的驱动器中有一个具有“公共”可见性的文件。我使用驱动器 api 的示例页面中的代码（如下）来检索文件内容。文件元数据显示我的文件在那里。但是 hhtp 响应告诉我它不存在（远程服务器返回错误：（404）未找到。）。（哦顺便说一下文件是由具有“所有者”权限的用户上传的，现在我试图检索具有“作者”权限的不同用户的相同文件。）有什么想法吗？

```
 public static System.IO.Stream DownloadFile(
     IAuthenticator authenticator, Google.Apis.Drive.v2.Data.File file)
    {
        if (!String.IsNullOrEmpty(file.DownloadUrl))
        {
            try
            {
                HttpWebRequest request = (HttpWebRequest)WebRequest.Create(new Uri(file.DownloadUrl));
                authenticator.ApplyAuthenticationToRequest(request);
                HttpWebResponse response = (HttpWebResponse)request.GetResponse();
                if (response.StatusCode == HttpStatusCode.OK)
                {
                    return response.GetResponseStream();
                }
                else
                {
                    Console.WriteLine(
                        "An error occurred: " + response.StatusDescription);
                    return null;
                }
            }
            catch (Exception e)
            {
                Console.WriteLine("An error occurred: " + e.Message);
                return null;
            }
        }
        else
        {
            // The file doesn't have any content stored on Drive.
            return null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T00:50:20.370

对于此类问题，请使用[https://developers.google.com/drive/v2/reference/files/get#try-it上的表格进行尝试](https://developers.google.com/drive/v2/reference/files/get#try-it)

这样您就可以确定是您的代码有问题还是文件有问题。

# jquery - 如何在while循环中使用jquery显示/隐藏表行

> ID：12645088
> 
> 赞同：1
> 
> 时间：2012-09-28T18:01:03.503
> 
> 标签：jquery, loops, while-loop, html-table, tablerow

所以我有一个使用while循环从数据库生成的表。数据按行显示。关键是有一些“隐藏”的行，其中的数据仅在点击时可用（如显示详细信息）。基本上我想要这样的东西：[http](http://www.transfercar.co.nz/) ://www.transfercar.co.nz/ - 如果你点击表格行，下面会出现更多数据（在新行中）。

我的代码如下所示：

```
while ($row = mysqli_fetch_array($r, MYSQLI_ASSOC)) {
$display1=$display1+1;
    echo '
    <tr class="tablerow">
        <td>' . $row['id'] . '</td>
        <td><p class="state">' . $row['name'] . '</p></td>
        <td><p class="state">' . $row['surname'] . '</p></td>
        <td>' . $row['country'] . '</td>
        <td>' . $row['city'] . '</td>
        <td>' . $row['category'] . '</td>
    </tr>';
if($row['id']==$_GET['showrow'])
{
    echo '
    <tr class="subtable" style="display:none;">';
        echo '<td colspan="3" class="detalji"></td>
        <td align="left" colspan="3" class="detalji"></td>
        </tr>';}} // End of WHILE loop.
echo '</table>'; 
```

我的 jQuery 看起来像这样：

```
/* Table row click */
$(".tablerow").click(function()
{
  $(".subtable").show();
}); 

$(".subtable").click(function()
{
  $(".subtable").hide();
}); 
```

重点是一旦点击了所有子表显示，我自然只想要点击的表行下方的那个..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:05:31.367

尝试这个

```
$(".tablerow").click(function() {
    // Hideing all the tr with class subtable rows initially
    $('.subtable').hide();
    // Find the next tr which has class subclass in current context
    $(this).next('.subtable').show();
});

$(".subtable").click(function() {
    // Hide current row that has class subtable
    $(this).hide();
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T13:32:12.187

我已经设法使用这样的代码解决它：

```
$(".tablerow").click(function()
{
  $(this).next(".subtable").slideDown("slow");
}); 

$(".subtable").click(function()
{
  $(".subtable").hide();
}); 
```

sushanth reddy 非常有帮助，谢谢！我不确定为什么这段代码有效而 Sushanth 不是。某处可能有错字，但无论如何 Susanth 提供了正确的答案，因此我将使用正确的代码编辑他的回复。

# json - asmx web 服务 - jQuery ajax post json (500 错误) - CORS (Access-Control-Allow-Origin 设置为 *)

> ID：12645092
> 
> 赞同：6
> 
> 时间：2012-09-28T18:01:24.013
> 
> 标签：json, web-services, jquery, iis-6, cross-domain

这个话题似乎是一个拥有一百万个“解决方案”的主题，结果更加复杂。所以请放慢我的脚步，因为我将尝试展示发生了什么，我正在使用什么以及我如何尝试解决这个问题。

我的测试环境正在运行 IIS6 asp.net 2.0，我已经设置好了

```
'Access-Control-Allow-Origin' * 
```

我还将 .asmx 扩​​展的动词设置为

```
"GET,HEAD,POST,DEBUG,OPTIONS" 
```

通过 jQuery v1.7.2 ajax() 调用，我能够从服务器获取 xml 文件，并 POST 到返回具有跨域预期结果的字符串的基本服务。所以我知道至少部分我的跨域请求正在工作。

当我开始对此进行扩展并使用 json 将数据发布到服务时，我的问题就出现了

我有一个简单的 asmx webservice 方法：

```
 [WebMethod]
        [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
        public SubResponse HelloWorldX(SubRequestXX SubReq)
        {
            SubResponse sr = new SubResponse();

            sr.resultCode = "777";
            sr.resultMsg = "hello - " + SubReq.EmailAddress;

            return sr;
        } 
```

非常简单，那里并没有发生什么神奇的事情，我要做的就是传入“SubRequestXX”对象，现在只需验证它到达那里并做出响应。

```
Using jQuery:

    $.ajax({
        type: "POST",
        url: "http://somedomain/subscription/MyService.asmx/HelloWorldX",
        processData: false,
        data: '{ "SubReq" : {"EmailAddress":"user@test.com"} }',
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        cache: false,
        success: function(data, textStatus, jqXHR) {
            ajaxSucccess3(data, textStatus, jqXHR);
        },
        error: function(jqXHR, textStatus, errorThrown) {
            console.log("Retrieve Hello Failed (AJAX Error): " + jqXHR.statusText + " | " + textStatus + " | " + errorThrown);
        }
    });
} 
```

也许答案就在那里？但这是 fiddler 的 RAW 数据显示我使用来自同一域上的页面的完全相同的 JS 代码（成功 - 结果代码 200）：

```
REQUEST:
    POST http://somedomain/subscription/Service.asmx/HelloWorldX HTTP/1.1
    Accept: application/json, text/javascript, */*; q=0.01
    Content-Type: application/json; charset=utf-8
    X-Requested-With: XMLHttpRequest
    Referer: http://somedomain/subscription/subscription_-cors.html
    Accept-Language: en-us
    Accept-Encoding: gzip, deflate
    User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; 9LA)
    Host: somedomain
    Content-Length: 45
    Connection: Keep-Alive
    Pragma: no-cache

    { "SubReq" : {"EmailAddress":"user@test.ca"} }

RESPONSE:

    HTTP/1.1 200 OK
    Date: Fri, 28 Sep 2012 16:59:15 GMT
    Server: Microsoft-IIS/6.0
    X-Powered-By: ASP.NET
    Access-Control-Allow-Origin: *
    X-AspNet-Version: 2.0.50727
    Cache-Control: private, max-age=0
    Content-Type: application/json; charset=utf-8
    Content-Length: 147

    {"d":{"__type":"SubService.DataObj.SubResponse","resultCode":"777","resultMsg":"hello - rob@test.ca"}} 
```

所以一切看起来都很好，并且表现如预期。现在，如果我采用相同的 html/js 代码，在另一台服务器上部署并发出相同的请求（跨站点）提琴手显示（失败结果代码 500）：

```
REQUEST:
    POST http://somedomain/subscription/Service.asmx/HelloWorldX HTTP/1.1
    Accept: */*
    Origin: http://www.crossdomainsite.com
    Accept-Language: en-US
    Accept-Encoding: gzip, deflate
    User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; 9LA)
    Host: somedomain
    Content-Length: 0
    Connection: Keep-Alive
    Pragma: no-cache

RESPONSE:
HTTP/1.1 500 Internal Server Error
Date: Fri, 28 Sep 2012 16:58:56 GMT
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
Access-Control-Allow-Origin: *
X-AspNet-Version: 2.0.50727
Cache-Control: private
Content-Type: text/html; charset=utf-8
Content-Length: 4732

.....

Request format is unrecognized for URL unexpectedly ending in '/HelloWorldX'

.....

[InvalidOperationException: Request format is unrecognized for URL unexpectedly ending in '/HelloWorldX'.]
   System.Web.Services.Protocols.WebServiceHandlerFactory.CoreGetHandler(Type type, HttpContext context, HttpRequest request, HttpResponse response) +405961
   System.Web.Services.Protocols.WebServiceHandlerFactory.GetHandler(HttpContext context, String verb, String url, String filePath) +212
   System.Web.Script.Services.ScriptHandlerFactory.GetHandler(HttpContext context, String requestType, String url, String pathTranslated) +47
   System.Web.HttpApplication.MapHttpHandler(HttpContext context, String requestType, VirtualPath path, String pathTranslated, Boolean useAppConfig) +193
   System.Web.MapHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +93
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +155 
```

许多搜索结果显示了一些 web.config 更改。如果我将以下内容添加到我的 system.web 部分：

```
 <webServices>
        <protocols>
            <add name="HttpGet"/>
            <add name="HttpPost"/>
        </protocols>
    </webServices> 
```

然后我的请求看起来像

```
POST http://somedomain/subscription/Service.asmx/HelloWorldX HTTP/1.1
Accept: */*
Origin: http://www.crossdomainsite.ca
Accept-Language: en-US
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; 9LA)
Host: somedomain
Content-Length: 0
Connection: Keep-Alive
Pragma: no-cache 
```

我的回应：

```
HTTP/1.1 500 Internal Server Error
Date: Fri, 28 Sep 2012 17:37:00 GMT
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
Access-Control-Allow-Origin: *
X-AspNet-Version: 2.0.50727
Cache-Control: private
Content-Type: text/plain; charset=utf-8
Content-Length: 461

System.InvalidOperationException: HelloWorldX Web Service method name is not valid.
   at System.Web.Services.Protocols.HttpServerProtocol.Initialize()
   at System.Web.Services.Protocols.ServerProtocol.SetContext(Type type, HttpContext context, HttpRequest request, HttpResponse response)
   at System.Web.Services.Protocols.ServerProtocolFactory.Create(Type type, HttpContext context, HttpRequest request, HttpResponse response, Boolean& abortProcessing) 
```

因此，将该部分添加到我的 web.config 中做了一些事情，因为我的结果略有不同。但我无法辨别是什么。

其他解决方案建议使用这些 web 配置设置，因为我使用的是 asp.net 2.0，请注意，我已将这些设置保留在上述所有结果中，注释掉的是来自项目创建的原件：

```
 <httpHandlers>
            <remove verb="*" path="*.asmx"/>
            <!--<add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>-->
            <add path="*.asmx" verb="*" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />

            <!--<add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>-->
            <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>

            <!--<add verb="GET,HEAD" path="ScriptResource.axd" validate="false" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>-->
            <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" validate="false"/>
        </httpHandlers> 
```

所以......最大的问题......为什么我的跨站点请求使用相同的代码失败，尽管上述所有内容？似乎只要请求来自另一个域，它就会阻塞 JSON。

任何帮助将不胜感激解决这个谜。我假设它要么是 IIS6（服务器）设置，要么是我的 $.ajax() 调用，我觉得它可能很简单或很小，但我似乎无法理解它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-22T11:13:16.313

我通过 JSONP 尝试了类似的东西。我想我的解决方案基于这篇文章。

[JSONP + CORS](https://stackoverflow.com/questions/14221429/how-can-i-produce-jsonp-from-an-asp-net-web-service-for-cross-domain-calls)

另一个潜在的事情是，将 JSON 作为字符串放入 WCF 服务通常不会很好地结束（我知道这不是 WCF，只是说它可能是同一个问题）。我通常这样做：

```
Using jQuery:

$.ajax({
    type: "POST",
    url: "http://somedomain/subscription/MyService.asmx/HelloWorldX",
    processData: false,
    data: JSON.parse('{ "SubReq" : {"EmailAddress":"user@test.com"} }'),
    dataType: "json",
    contentType: "application/json; charset=utf-8",
    cache: false,
    success: function(data, textStatus, jqXHR) {
        ajaxSucccess3(data, textStatus, jqXHR);
    },
    error: function(jqXHR, textStatus, errorThrown) {
        console.log("Retrieve Hello Failed (AJAX Error): " + jqXHR.statusText + " | " + textStatus + " | " + errorThrown);
    }
});
} 
```

JSON.parse 的使用还将捕获任何通过的错误 JSON。

希望这能解决您的问题。

# php - 使用 javascript 检测浏览器中操作系统版本的类型

> ID：12645094
> 
> 赞同：0
> 
> 时间：2012-09-28T18:01:34.963
> 
> 标签：php, javascript, macos, browser

> **可能重复：**
> [从浏览器检测确切的操作系统版本](https://stackoverflow.com/questions/647969/detect-exact-os-version-from-browser)

我一直在寻找用户试图获取操作系统版本的不同帖子，但我没有找到正确的解决方案来检测确切的操作系统版本名称。

我正在开发一个在*MAC OS X 10.8.2 version(Lion)*上运行不佳的 Web 应用程序。我有自动定位的东西，但它不起作用，我试图从客户端浏览器获取确切的版本号并相应地导航代码。我知道我可以使用获取操作系统名称

```
if (navigator.appVersion.indexOf("Mac")!=-1) OSName="MacOS"; 
```

**但是版本名称呢？**

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:09:43.780

```
var matches = navigator.userAgent.match(/Mac OS X ([0-9.]+)/i);

if(matches !== null && typeof matches[1] !== 'undefined')
{
    var versionNames = { '10.0': 'Cheetah', '10.1': 'Puma', '10.2': 'Jaguar', '10.3': 'Panther', '10.4': 'Tiger', '10.5': 'Leopard', '10.6': 'Snow Leopard', '10.7': 'Lion', '10.8': 'Mountain Lion' };

    if(typeof versionNames[matches[1]] !== 'undefined')
    {
        alert(versionNames[matches[1]]);
    }
    else
    {
        alert('Unidentified Mac version');        
    }
}
else
{
    alert('You are not running Mac OS X');    
} 
```

这可能是您正在寻找的，尽管这可能不可靠。

[在 jsFiddle 演示](http://jsfiddle.net/m8Yb6/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:04:56.153

这就是你要找的吗？

```
navigator.platform 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T18:15:44.003

看一下 navigator.useragent 变量。这不是 100% 可靠的，但使用演绎法，您至少可以在*大多数*情况下通过一些工作来为该功能提供支持。较旧的浏览器可能没有设置此值，但大多数较新的浏览器（过去 5 年左右）应该 - 这就是您的大多数用户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T18:16:05.733

```
var v = navigator.userAgent.match(/Mac OS X ([\d_]+)/)
if(v!=null && v[1] == "10_8_2") {
    alert("U r not support!");
} 
```

# c# - 如何将锯齿状的字符串数组绑定到 C# 中的 DataGrid？

> ID：12645095
> 
> 赞同：0
> 
> 时间：2012-09-28T18:01:36.210
> 
> 标签：c#, visual-studio-2010

我在 C# 中有一个锯齿状的字符串数组。

如何将它绑定到 DataGrid 以便我可以看到数组的内容？

目前在 DataGrid 中，我看到的不是数组的内容，而是一个列，上面写着“长度”、“长长度”、“等级”、“同步根”等……基本上，是数组的属性，而不是数组的内容大批。

我的代码：

```
string[][] jagged = new string [100][];

//...jagged array is populated...

dataGridView1.DataSource = jagged; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:08:38.680

这是一个示例，您可以尝试按照我没有使用 String[] 执行此操作，但您可以得到这个想法

```
//
// 1\. Create two dimensional array
//

const int  dim = 1000;

double[,]  array = new double[dim,dim];

Random ran = new Random();
for(int r = 0; r < dim; r++)
{
    for(int c = 0; c < dim; c++)
    {
        array[r,c] = (ran.Next(dim)); // fill it with random numbers.
    }
}

// 2\. Create ArrayDataView class in which 
// constructor you pass the array 
// and assign it to DataSource property of DataGrid. 

 dataGrid1.DataSource = new ArrayDataView(array); 
```

对于 String[][] 这里是一个例子

```
string[][] arr = new string[2][];

arr[0] = new String[] {"a","b"};
arr[1] = new String[] {"c","d"};

DataGrid1.DataSource = arr[0];
DataGrid1.DataBind();//The result is: a,b in datagrid 
```

使用 LinQ 看看这个

```
List<string> names = new List<string>(new string[]
{
    "John",
    "Frank",
    "Bob"
});

var bindableNames =
    from name in names
    select new {Names=name};

dataGridView1.DataSource = bindableNames.ToList(); 
```

将 LINQ 用于多密度阵列

```
string[][] stringRepresentation = ds.Tables[0].Rows  
    .OfType<DataRow>()  
    .Select(r => ds.Tables[0].Columns  
        .OfType<DataColumn>()  
        .Select(c => r[c.ColumnName].ToString())  
        .ToArray())  
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T21:38:45.500

正如当前接受的答案所给出的以及 Michael Perrenoud 在评论中提到的那样，您可以使用 Mihail Stefanov 的[ArrayDataView 类](http://www.codeproject.com/KB/database/BindArrayGrid.aspx)来实现此绑定。然而，他的原始代码最初被设想为仅适用于多维数组。此后，我修改了他的代码以使用锯齿状数组，并通过 Accord.NET Framework 使其可用。

现在，您不需要使用整个框架来执行此操作，您可以简单地使用[此处提供的更新类](http://code.google.com/p/accord/source/browse/trunk/Sources/Accord.Controls.Statistics/Bindings/ArrayDataView.cs?r=397)。将这些类合并到您的项目中后，您所要做的就是

```
dataGridView.DataSource = new ArrayDataView( yourArray ); 
```

我希望这个澄清会有所帮助。

正如我所提到的，我是 Accord.NET 的作者，但最初的功劳确实归功于 Stefanov。

# google-app-engine - 搜索 API 编号找到的准确性

> ID：12645099
> 
> 赞同：3
> 
> 时间：2012-09-28T18:01:49.597
> 
> 标签：google-app-engine, search

使用 Search API 时，我们可以通过为结果设置限制和偏移量来分页结果。我们还可以选择使用“number_found”属性返回搜索结果的总数。在文档中，它清楚地指出这个数字是一个近似值，而不是一个精确的计数。

我的问题是，在我们的生产应用程序中，这种近似值非常不准确（例如，当只有 200 条记录存在时，它会报告 1200 条匹配项）。现在我们可以简单地在查询选项中将“number_found_accuracy”设置为“MAXIMUM_NUMBER_FOUND_ACCURACY”常量，但是这只能满足一两个月的时间，直到索引文档的数量超过该常量。

出于我们的目的，“number_found”计数不必精确，但我们希望它接近。话虽如此，我有什么选择可以确保随着存储和索引的文档数量的增加，文档计数保持相对准确？

# r - 如何停止 ggplot2 facet 复制变量？

> ID：12645101
> 
> 赞同：1
> 
> 时间：2012-09-28T18:01:56.273
> 
> 标签：r, ggplot2, facet

所以我正在使用 ggplot2 用我的数据制作一个漂亮的小图：

```
df1 <- data.frame(Background = factor(c("Input", "H3", "Overlap","Input", "H3", "Overlap"), levels=c("Input", "H3", "Overlap")), 
            Condition = factor(c("control", "control", "control","treatment", "treatment", "treatment")),
            Count = c(10, 9, 5, 8, 7, 6))

barplot = ggplot(data=df1, aes(x=Condition, y=Count, fill=Background)) +
    geom_bar(position=position_dodge()) +
    facet_grid(. ~ Condition) 
```

我想将“控制”与“治疗”分开。我有点实现了这一点，但两者仍然存在于各个面板中：

![在此处输入图像描述](../Images/88cf1339e6f53fa1d50250322bbc6501.png)

如何避免这种情况？

干杯。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T18:09:15.357

泰勒的评论是一种解决方案。但是为什么要将 facet 变量绘制为 x 变量呢？相反，我会使用背景作为你的 x。

```
barplot = ggplot(data=df1, aes(x=Background, y=Count, fill=Background)) +   
  geom_bar(position='dodge') + 
  facet_grid(.~Condition) 
```

# jquery - JQuery Ajax XMLHttprequest 成功但未返回成功消息

> ID：12645104
> 
> 赞同：1
> 
> 时间：2012-09-28T18:02:08.927
> 
> 标签：jquery, ajax, json, post, xmlhttprequest

我正在尝试创建一个从表单中收集姓名、电子邮件、消息类型和消息的联系表单。到目前为止，字段验证、获取信息和发送电子邮件都正常工作。我似乎无法解决的主要问题是，一旦提交了信息，就假设在发送电子邮件后会显示一条成功消息。这就是我的问题所在。

这是假设完成所有工作的功能。：

**jQuery**

```
// make our ajax request to the server
function submitForm(formData) {

    $.ajax({    
        type: 'POST',
        url: 'Scripts/send_email.php',
        dataType: 'json',       
        data: formData,
        cache: false,
        /*timeout: 8000, // timeout after 8 seconds*/
        success: function(data,textStatus,XMLHttpRequest) {
            $('form #error-div').removeClass('').addClass((data.error === true) ? 'xmark-img' : 'check-img');

                if ($('form #error-div').hasClass('check-img')) {
                    $('form #error-div').addClass('success').html(data.msg).fadeIn('fast'); 
                }

                $('form').slideUp().hide();
                $('form').find('span').hide();
                $('form').find('label').hide();
                $('form').find('input').hide();
                $('form').find('select').hide();
                $('form').find('textarea').hide();

                setTimeout($('form #error-div').fadeOut('slow'), 4000); 
                return true;        
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) {
                $('form #error-div').removeClass('').addClass('xmark-img').addClass('error-box').html('');
                $('form #error-div').html('There was an ' + errorThrown +
                                          ' error due to a ' + textStatus + 
                                          ' condition.'+ 'XMLHttpRequest: ' + XMLHttpRequest[0] + 
                                          ' Error Thrown: ' + errorThrown + '<br/>' + 
                                          ' textStatus:  ' + textStatus + ' <br />msg: ' 
                                          + msg + '<br />data: ' + data).fadeIn('fast')

            return false;
        },              
        complete: function(XMLHttpRequest, status) {
                $('form')[0].reset();           
        }
    }); 
}; 
```

现在提交表单后，error-div 显示发送消息动画 gif，我确实收到了电子邮件。但是，它不执行成功或错误回调。使用萤火虫我也得到一个错误“TypeError：数据为空”。我不确定我做错了什么，因为电子邮件确实已发送。

* * *

**PHP 脚本**

```
<?php 
sleep(3);

//Sanitize incoming data and store in variable
$name = trim(stripslashes(htmlspecialchars($_POST['name'])));
$email = trim(stripslashes(htmlspecialchars($_POST['email'])));
$message = trim(stripslashes(htmlspecialchars($_POST['message'])));
$message_type = trim(stripslashes(htmlspecialchars($_POST['message_type'])));   

$humancheck = $_POST['humancheck'];
$honeypot = $_POST['honeypot'];

if ($honeypot == 'http://' && empty($humancheck)) {         
        //Validate data and return success or error message
        $error_message = '';    
        $reg_exp = "/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+[\.]{1}[a-zA-Z]{2,4}$/";

        if (!preg_match($reg_exp, $email)) {
                $error_message .= "You must provide a valid e-mail address <br/>";             
        }

        if (empty($name)) {
                $error_message .= "You must include your name <br/>";
        }
        if (empty($message_type)) {
                $error_message .= "You must select a message type for your message. <br/>";
        }               
        if (empty($message)) {
                $error_message .= "You must enter a message. <br/>";
        }       
        if (!empty($error_message)) {
                $return['msg'] = 'Error: The request was successful but your form is not filled out correctly. '.$error_message;
                $return['error'] = true;
                exit();
        }else {
                    $ToEmail = "tony.hall@tonyhallportfolio.com";
                    $EmailSubject_Response = $message_type." from ".$name." (".$email.")"; 

                    $mailheader_Response = "From: ".$email."\r\n";
                    $mailheader_Response .= "To: ".$ToEmail."\r\n"; 
                    $mailheader_Response .= "Reply-To: ".$email."\r\n";
                    $mailheader_Response .= "Content-type: text/html; charset=iso-8859-1\r\n"; 

                    $MESSAGE_BODY_Response  = "<html><head><link rel='stylesheet' type='text/css' href='http://tonyhallportfolio.com/CSS/email_style.css' /></head><body>";
                    $MESSAGE_BODY_Response .= "<div class='header'><img src='http://tonyhallportfolio.com/images/logo-ns.png'/></div>\n";
                    $MESSAGE_BODY_Response .= "<hr/>\n";
                    $MESSAGE_BODY_Response .= "<div class='content'><h3>E-Mail Message via Tonyhallportfolio.com </h3>";
                    $MESSAGE_BODY_Response .= "<h4>Name: </h4>".$name."\n"; 
                    $MESSAGE_BODY_Response .= "<h4>Email: </h4>".$email."\n"; 
                    $MESSAGE_BODY_Response .= "<h4>Message Details: </h4>".nl2br($message)."</div>"; 
                    $MESSAGE_BODY_Response .= "<body/><html/>";

                    mail($ToEmail, $EmailSubject_Response, $MESSAGE_BODY_Response, $mailheader_Response) or die ("Failure");

                    if($message_type == "Website Inquiry"){
                        $EmailSubject_Inq = "Conformation of ".$message_type." sent via tonyhallportfolio.com"; 

                        $mailheader_Inq = "From: ".$ToEmail."\r\n";
                        $mailheader_Inq .= "To: ".$email."\r\n"; 
                        $mailheader_Inq .= "Reply-To: ".$ToEmail."\r\n";
                        $mailheader_Inq .= "Content-type: text/html; charset=iso-8859-1\r\n"; 

                        $MESSAGE_BODY_Inq  = "<html><head><link rel='stylesheet' type='text/css' href='http://tonyhallportfolio.com/CSS/email_style.css' /></head><body>";
                        $MESSAGE_BODY_Inq .= "<div class='header'><img src='http://tonyhallportfolio.com/images/logo-ns.png'/></div>\n";
                        $MESSAGE_BODY_Inq .= "<hr/>\n";
                        $MESSAGE_BODY_Inq .= "<div class='content'>"."<p>Thank you for reaching out to me in order to build a website for yourself or your business. This email confirms that your message has been sent. Please allow me ample time to respond back to you as I may have others inquiring for my services. I will make sure to review the information you sent me and respond in a reasonable amount of time. Thanks again for your inquiry.</p>";

                        $MESSAGE_BODY_Inq .= "<h3>".$message_type." for Tony Hall via Tonyhallportfolio.com </h3>";
                        $MESSAGE_BODY_Inq .= "<h4>Name: </h4>".$name."\n"; 
                        $MESSAGE_BODY_Inq .= "<h4>Email: </h4>".$email."\n"; 
                        $MESSAGE_BODY_Inq .= "<h4>Message Details: </h4>".nl2br($message)."</div>"; 
                        $MESSAGE_BODY_Inq .= "<body/><html/>";

                        mail($email, $EmailSubject_Inq, $MESSAGE_BODY_Inq, $mailheader_Inq) or die ("Failure");

                        $return['msg'] = '<h3>'.$name.' ,Thank you for your message. </h3>';    
                        $return['error'] = false;

                    }else{
                        $EmailSubject_msg = "Conformation of ".$message_type." sent via tonyhallportfolio.com"; 

                        $mailheader_msg   = "From: ".$ToEmail."\r\n";
                        $mailheader_msg  .= "To: ".$email."\r\n"; 
                        $mailheader_msg  .= "Reply-To:".$email."\r\n";
                        $mailheader_msg  .= "Content-type: text/html; charset=iso-8859-1\r\n"; 

                        $MESSAGE_BODY_msg  = "<html><head><link rel='stylesheet' type='text/css' href='http://tonyhallportfolio.com/CSS/email_style.css' /></head><body>";
                        $MESSAGE_BODY_msg .= "<div class='header'><img src='http://tonyhallportfolio.com/images/logo-ns.png'/></div>\n";
                        $MESSAGE_BODY_msg .= "<hr/>\n";
                        $MESSAGE_BODY_msg .= "<div class='content'>"."<p>Thank you for leaving me a message on my E-Portfolio website. This email confirms that your message has been sent. I will make sure to review your message and take your comments and/or suggestions in consideration to help improve the site. Your input is greatly appreciated.</p>";

                        $MESSAGE_BODY_msg .= "<h3>".$message_type." for Tony Hall via Tonyhallportfolio.com </h3>";
                        $MESSAGE_BODY_msg .= "<h4>Name: </h4>".$name."\n"; 
                        $MESSAGE_BODY_msg .= "<h4>Email: </h4>".$email."\n"; 
                        $MESSAGE_BODY_msg .= "<h4>Message Details: </h4>".nl2br($message)."</div>"; 
                        $MESSAGE_BODY_msg .= "<body/><html/>";

                        mail($email, $EmailSubject_msg, $MESSAGE_BODY_msg, $mailheader_msg) or die ("Failure");

                        $return['msg'] = $name.' ,Thank you for your message.'; 
                        $return['error'] = false;
                        exit(); 
                    }
             }          

}else {
    $return['msg'] = 'There was a problem with your submission. Please try again.';
    $return['error'] = true;
    exit(); 
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:40:32.060

您正在`$return`那里返回一个数组，您需要将其转换为 JSON 格式，然后再像这样回显它：

```
echo json_encode($return); 
```

# .net - MSVS 2012 上的 LNK2022（重复的托管类型具有不同的可见性）

> ID：12645105
> 
> 赞同：10
> 
> 时间：2012-09-28T18:02:10.450
> 
> 标签：.net, visual-studio, visual-c++, c++-cli

我正在将解决方案从 MSVS2005 移植到 MSVS2012。这些项目在 C++ .NET 中，但也使用自制的本地 C++ 库。我们使用 2005 构建项目没有问题，但现在，我无法使用 2012 构建项目。我收到以下错误消息：

MyFile.obj：错误 LNK2022：元数据操作失败 (801311E4)：重复的托管类型具有不同的可见性。

这是什么意思？你需要什么信息来帮助我？

谢谢你的帮助？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T17:20:06.983

我发现了这个错误。它混合了这里建议的所有内容。

在项目的某个地方，包含了一个本地 C++ 头文件。此文件中的一个类通过以下方式公开：

```
#include "File_Where_ClassName_Is_Defined.h"
#pragma make_public( ClassName ) 
```

但是在我自己的代码中，我包含了第二个标头，该标头本身包含定义了公开类的标头。因此，此时，该类在同一项目的一个文件中“公开”，而在另一个文件中“**未**公开”。“具有不同可见性的重复”来自那里。

让我走上错误道路的唯一一点是错误消息：“重复的托管类型具有不同的可见性”。但在这里，它是一种非托管类型。

因此，如果有一天您遇到此错误，请在项目中查找**#pragma make_public(...)**，然后在有问题的文件中查找重复的包含项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-13T15:58:43.937

我有同样的问题，并且确实有 dom_beau 的回答中描述的相同情况，所以我很确定我也有相同的根本原因。然而，为了能够解决这个错误，我必须找到实际的违规类（有一些，而且错误消息对你找到它们几乎没有帮助！）。

因此，我编写了以下 LINQ 查询，该查询查找在多个 *.obj 文件中定义的所有具有冲突可见性的类。它可能对某人有用，所以我将其发布在这里。

```
// Analyze text files produced by ildasm when given *.obj files.
// Use "for %1 in (*.obj) do ildasm /text %1 > %1-ildasm.txt" to produce the files.

from file in Directory.GetFiles(@"your project's intermediate folder")
where file.EndsWith("-ildasm.txt")
let lines = File.ReadAllLines(file)
from i in Enumerable.Range(0, lines.Count() - 1)
where lines[i].Contains("TypDefName:")
let type = lines[i].Substring(16,lines[i].IndexOf(" (")-17)
let flags = lines[i+1]
group new {file, flags} by type into g
where g.Select(t=>t.flags).Distinct().Count() > 1
select g 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-13T15:13:03.617

Microsoft 在修补程序中修复了此问题：[KB2848798](http://support.microsoft.com/kb/2848798)。

它帮助我将 VS2010 解决方案迁移到 VS2012。

你可以[在这里下载](http://thehotfixshare.net/board/index.php?autocom=downloads&showfile=17884)

上述修补程序链接中的相关详细信息：CLR 问题 1

症状

从 Microsoft Visual Studio 2010 升级到 Visual Studio 2012 后，某些 C++/CLI 项目无法生成，并且它们报告类似于以下内容的链接器错误：

MSVCMRTD.lib(mstart.obj)：错误 LNK2022：元数据操作失败 (801311E4)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-10T10:32:12.250

我在尝试在 Win2008R2 机器上编译 VC++2013 项目时遇到了同样的问题（在 Win8.1 上编译得非常好）。只是删除任何重复的*#include*并不能解决我的问题。

然而，我随后启用了预编译头文件并将该项目的**所有** `make_public()`语句移动到 stdafx.h，最终成功了！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-29T15:42:34.977

从 VS2008 升级到 VS2012 有同样的问题。对我来说，修补程序的另一种解决方案是移动

```
#pragma make_public( ClassName ) 
```

从到目前为止的 .cpp 文件到 stdafx.h 的语句。

# actionscript-3 - FlashDevelop 教程中的 Flex 元数据编译器扩展

> ID：12645106
> 
> 赞同：5
> 
> 时间：2012-09-28T18:02:10.623
> 
> 标签：actionscript-3, compiler-construction, metadata

在过去的 2 个小时里，我一直在谷歌搜索，寻找一些关于如何在 as3 中添加我自己的自定义元数据标签的简单说明，但没有成功。我开始认为我可能没有在寻找正确的术语。

## 问题

最终，我想要做的是在函数上添加自定义元数据，该函数将函数作为参数并确保给定函数具有正确的参数。

即我有以下功能：

```
public function testCallback(callback:Function):void
{
    callback("test");
} 
```

当我这样调用它时，我想得到一个编译器错误：

```
public function doNothing():void
{
    // doing nothing
}

public function someRandomFunction():void
    // ...
    testCallback(doNothing);
} 
```

我正在考虑这样做的方式是拥有这个元数据：

```
[Callback(paramName="callback",callbackParams="string")]
public function testCallback(callback:Function):void
{
    callback("test");
} 
```

扩展将*在编译期间*运行，如果传递的函数不包含正确的参数，**则会抛出编译时错误**。我认为使用*flex2.compiler.util.ThreadLocalToolkit.logError* (path, line, errorMessage); 我可以做到这一点。

## 搜索

我已经在谷歌上搜索了几个小时，但找不到可以让我入门的简单教程。我发现了一些 SDK 错误报告（[SDK-18718](https://bugs.adobe.com/jira/browse/SDK-18718)、[SDK-26041](https://bugs.adobe.com/jira/browse/SDK-26041)）、[未完成的论坛帖子、关于](http://forums.adobe.com/thread/459515?tstart=0)[如何在 FlexBuilder 中添加自定义元数据](http://ravigeek.wordpress.com/2011/07/10/digging-into-custom-metadata-tag-in-flex-and-actionscript/)的教程（？）（我正在使用 FlashDevelop），一个[不太有用的答案在 StackOverflow](https://stackoverflow.com/a/5729427/2644)和更多死胡同中。

## 帮助

到目前为止，据我所知，我将使用 Java 创建扩展，然后使用编译器命令将其添加到我的项目中。但是，我不知道我需要什么才能开始。

**我的两个主要问题是：**
A）我需要什么才能在 Java 中创建扩展？（我需要 Flex Builder 吗？Eclipse？我的类路径中需要哪些库？）
B）一旦我将它编译成某种东西（一个 swc？），我如何将它包含在我的 AS3 项目中的 FlashDevelop 中？

提前致谢！

## 更新

我已经能够在 Eclipse 中创建一个 Java 项目，添加 Flex 库，实现 IMxmlcExtension 接口并将项目编译到一个带有正确 MANIFEST 文件的 jar 中。不幸的是，在 FlashDevelop 中添加额外的 -extension=MyTest.jar 并没有起到任何作用。

如果它有用，编译器的生成命令行是

> mxmlc -load-config+=obj\MyProject.xml -debug=true -incremental=true -swf-version=10 -extension=flex_test.jar -o obj\MyProject634846490611881374

## 更新 2

[Timofei Davydik](https://stackoverflow.com/users/592882/timofei-davydik)帮助我缩小了问题范围。似乎 FlashDevelop 是主要问题。创建一个扩展并在命令行中编译它是可行的。我在 FlashDeveloper 的论坛中创建了一个主题。如果您有兴趣，该线程是：[-extension 编译器选项](http://www.flashdevelop.org/community/viewtopic.php?uid=9313&f=9&t=9985&start=0)

## 更新 3

[Pilippe](https://stackoverflow.com/users/27219/philippe)是正确的，看来问题出在 FlashDevelop 使用[Flex Compiler SHell (fcsh)](http://livedocs.adobe.com/flex/3/html/help.html?content=compilers_32.html)的事实。我现在正在研究如何切换编译器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T12:03:18.127

真的很有趣的问题。我做了一些研究。是的，我们可以编写 mxmlc 扩展并添加一些自定义功能。但是处理自定义元数据确实很复杂，需要大量时间调试和探索 flex 编译器源。我在我的博客中创建了一篇关于扩展的帖子，您可以查看它：

[http://tim-davydik.blogspot.com/2012/09/flex-compiler-mxmlc-extensions-forcing.html](http://tim-davydik.blogspot.com/2012/09/flex-compiler-mxmlc-extensions-forcing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T02:55:33.583

**如何使元数据标签在动作脚本中工作**

[Timofei Davydik](https://stackoverflow.com/users/592882/timofei-davydik)在他的博客中写了一个快速简单的教程来回答我的问题，命名为[Flex 编译器 mxmlc 扩展。强制编译器语言](http://tim-davydik.blogspot.com/2012/09/flex-compiler-mxmlc-extensions-forcing.html)，并帮助我找出问题所在（这就是我给他赏金的原因）。在他的帖子中，他使用的是 Flash Builder 而不是 FlashDevelop，这将我们带到下一个问题的答案：

**如何使用 Flash Develop 对它们进行编程**

不幸的是，正如[Phillipe](https://stackoverflow.com/users/27219/philippe)指出的，对于 AS3 项目，FlashDevelop 使用不支持元数据的 Flex Compiler SHell (FCSH)。由于 FlashDevelop 是开源的，我将尝试（并且可能会失败）切换编译器以进行测试。对于其他对此感兴趣的人，我认为这个论坛帖子是一个好的开始：[[礼物] 在 flashDevelop 4.x 中尝试新的 AS3 编译器 (ASC 2.0)](http://www.flashdevelop.org/community/viewtopic.php?f=7&t=9918)

# python - wxwidgets pubsub -- 检测哪个对象发送了消息

> ID：12645108
> 
> 赞同：1
> 
> 时间：2012-09-28T18:02:13.727
> 
> 标签：python, model-view-controller, wxpython, wxwidgets

我正在使用 wxPython 构建一个 GUI，并试图通过将我的视图隐藏在我的模型中来保持对 MVC 的忠诚。我正在使用 pubsub 库从控制器将订阅的模型发送消息，然后根据需要更新视图。

然而，我确实有一个并发症。我的模型有一个相同对象的实例列表，每个对象都需要发送自己的健康和状态状态更新消息。每个对象在视图中都有自己的面板，如下所示。

![餐饮哲学家地位表](../Images/e275d2bfafdf6f96b19c36d9ca06ad25.png)

我的控制器有一个对象列表：

```
kierkegaard   = PhilosophersWithMetaData("Soren Kierkegaard", "thumbnails/kierkegaard.jpg", forks[0], forks[4])
lewis         = PhilosophersWithMetaData("C.S. Lewis", "thumbnails/lewis.jpg", forks[1], forks[0])
dostoevsky    = PhilosophersWithMetaData("Fyodor Dostoevsky", "thumbnails/dostoevsky.jpg", forks[2], forks[1])
descartes     = PhilosophersWithMetaData("Rene Descartes", "thumbnails/descartes.jpg", forks[3], forks[2])
kant          = PhilosophersWithMetaData("Immanuel Kant", "thumbnails/kant.jpg", forks[4], forks[3])

philosopher_list = [kierkegaard, lewis, dostoevsky, descartes, kant] 
```

模型中的每个哲学家都有：

```
def changeState(self, new_state):
    self.state = new_state
    pub.sendMessage("STATE_CHANGED", self.state) 
```

我的问题是，我如何知道是哪个对象发送了消息，以便更新正确的面板？我需要一个索引或对象来引用，这样我就可以将更新传递给视图。是否有“MVC 批准”的方式来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T18:22:08.790

你可以在

`Publisher.sendMessage("someMessage",["some_argument",1])`

在这种情况下，你会做

```
Publisher.sendMessage("someMessage",self)
...
Publisher.subscribe(self.MyPubsubListenerForSomeMessage,"someMessage")
... 
def MyPubsubListenterForSomeMessage(self,e):
    print e.data 
```

# asp.net-mvc-3 - 下拉选择上的 MVC3 调用控制器功能

> ID：12645112
> 
> 赞同：0
> 
> 时间：2012-09-28T18:02:36.413
> 
> 标签：asp.net-mvc-3

我在部分视图中有以下代码

```
Country Selector</label>
    @Html.DropDownListFor(model => model.CountryGroup, Model.CountryCodes, new { id = "CountryGroup", name = "country-codes" })
    @Html.ValidationMessageFor(model => model.CountryGroup, "*") 
```

在控制器中我有

```
public ActionResult ProcessRemoteOrder()
    {
        var a = 1;
        return null;
    } 
```

我假设当代码运行时 var a 上的断点会被命中。它不是。有人可以告诉我在哪里可以找到如何运行控制器中的功能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:09:14.663

如果要在下拉选择项时调用控制器动作，则需要监听下拉的`change`事件，并使用jQuery ajax调用action方法

```
$(function(){
  $("#CountryGroup").change(function(){
     $.get("@Url.Action("ProcessRemoteOrder","YourControllerName")",
                                                                  function(data){
         //do some thing with the response, in data variable.
     });
  });
}); 
```

检查它是否正在运行。在您要调试的行的代码中设置断点，当代码执行该行时，断点将以黄色突出显示。

# .net - 使用 .net windows 安装程序安装 VB6 应用程序和 dll

> ID：12645113
> 
> 赞同：1
> 
> 时间：2012-09-28T18:02:37.853
> 
> 标签：.net, windows, dll, vb6, installation

如何通过创建 .Net(4.0) windows 安装程序来安装 VB 6.0 应用程序及其相关的 DLL 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:02:18.070

完全可以使用 .NET 安装程序为 Visual Basic 6 应用程序创建安装包。但是，我只推荐使用作为 Visual Basic 6 安装的一部分提供的 VB6 安装程序，除非您使用 COM Interop 并且需要 .NET DLL 作为应用程序的一部分。

# math - 从给定高度水平发射的物体的轨迹方程

> ID：12645114
> 
> 赞同：0
> 
> 时间：2012-09-28T18:02:40.793
> 
> 标签：math, box2d, game-physics

有谁知道获得重力和质量的射弹的当前*x*位置和当前*y位置的方程？**物体从给定高度h*以初始速度*v*水平发射。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T19:24:10.990

轨迹将是一条抛物线。如果您在高度*y* [0水平（即正]*x*方向）发射弹丸，那么您将在其顶点处进入抛物线，为此我将使用坐标（*x* [0]，*y* [0]）。忽略摩擦力，您的速度的水平分量将始终等于初始速度，而垂直速度将随时间线性增加。积分可以为您提供给定时间*t*的位置：

 ****   *x* = *x* [0] + *vt*
*   *y* = *y* [0] - *gt* ² /2

在第二个方程中，*g*表示9.81 m/s ^(2的)[重力加速度](http://en.wikipedia.org/wiki/Gravitational_acceleration)。除非考虑摩擦，否则物体的质量根本没有影响，因为更高的重力会被更大的惯性所补偿。这些方程显然假设正*y*向上*，*而重力*向下*。***

# c++ - 运行 cmake 后未定义的引用错误

> ID：12645117
> 
> 赞同：2
> 
> 时间：2012-09-28T18:03:01.217
> 
> 标签：c++, cmake, sfml, physfs

我尝试用 Cmake 构建 PhysFS 库，我使用的是 Code::Blocks mingw makefiles。我可以在我的项目中导入，我可以在技术上声明 PhysFS_init() 函数（尽管这给了我太少的参数错误）但是当我添加一个参数时它告诉我 PHYSFS_init 是一个未定义的引用。

这对我来说听起来很愚蠢，当它没有参数时你怎么能识别它，但当我添加参数时却假装它不存在？我已经运行了两次 CMake，但我只是得到了这个：

```
[...]\src\main.cpp|20|undefined reference to `PHYSFS_init'| 
```

代码，如有必要（只是一点点，其余的无关紧要）：

```
#include <SFML/Window.hpp>
#include <SFML/System.hpp>
#include <iostream>
#include "Globals.h"
#include "GameStates.h"
#include "GameWindow.h"
#include "GameMenu.h"
#include <physfs.h>

int main(int argc, char** argv)
{
///<|===================| Classes & Declarations |===================|>
    sf::Event ev;
    sf::RenderWindow winMain ( sf::VideoMode( WindowWidth, WindowHeight, 32 ), WindowTitle );
    sf::Image Icon;
    GameStates gameState;
    GameMenu TitleMenu;
    MenuButton buttons[4];
    PHYSFS_init(NULL); 
```

为什么会这样？我必须做什么才能在我的项目中使用 PhysFS？我用 CMake 构建了库，包含了我需要的库，我尝试初始化 PhysFS，这给了我一个错误，这让我觉得 C++ 编译程序的方式很愚蠢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T18:16:03.323

这是对 C++ 库如何工作的一般解释：

PHYSFS 可能由头文件和静态/动态库组成。头文件是声明库的所有函数/类但未定义的地方。因此，当您将头文件包含到您的项目中时，您的编译器现在可以知道您在库中调用的函数是否存在，以及它们所采用的参数类型等。

所以要使用一个库，你必须包含它的头文件，这意味着你必须将它的包含目录添加到 project/cmakelists.txt 中。

```
#some similar path to this
include_directories( /path/to/PHYSFS/include) 
```

现在，当您实际将可执行文件链接到二进制文件时，必须“解析”这些函数，以便链接器知道它们的实际位置，以便调用它们。这称为与库的“链接”。

因此，要使用库，您必须链接其库文件。

在 cmake 中，这是按如下方式完成的：

```
add_executable(myexe myexe.cpp)

#Add library directory paths here
link_directories( /path/to/PHYSFSlibs/)

#libPHYS.a or libPHYS.so if using gcc convention, libPHYS.lib if MSVC convention
#cmake allows us to use the name of the library, instead of the filename to be portable.
target_link_libraries(myexe PHYSFS) 
```

我对 PHYSFS 不是特别熟悉，但如果你将它编译为一个库，你应该可以链接到其中一个文件。

> 对 `PHYSFS_init 的未定义引用

这是“链接”的问题，通常意味着您未能链接库，或者库缺少此函数的实现。链接库应该可以解决这个问题。

**编辑**

我误读了您的问题，并假设您在项目中使用 cmake 并链接到 PHYSFS。

首先，您必须单独构建 PHYSFS，它将根据平台/IDE 生成一个库文件（.a、.so 或 .lib），然后您必须在 C::B 链接器选项中链接该库文件。

去做这个：

转到项目-> 构建选项。单击链接器设置。

图片（来自[这里](http://www.noquarterarcade.com/setting-up-a-codeblocks-project-with-sdl-on-windows)）： ![C::B 中的链接器设置](../Images/211e2c95f53c42f25d9ec85a302bd0af.png)

添加库。

# linux - 发送 (2) 在无法访问的网络上成功建立连接

> ID：12645119
> 
> 赞同：0
> 
> 时间：2012-09-28T18:03:24.260
> 
> 标签：linux, ssh, network-programming, system-calls

我在理解`send (2)`我的 linux x86 机器上的系统调用时遇到了一些麻烦。考虑我在我的应用程序中与 LAN 中的其他主机建立了 SSH 连接。然后我放下网络（例如拔下电缆）并调用函数（从我的应用程序）通过连接发送一些 SSH 数据包。这个函数里面调用`send`像

```
w = send(s->fd_out,buffer, len, 0); 
```

在调试器中我发现`send`返回`len`（即`w == len`在调用之后）。如果网络不可达怎么办？当我打电话`netstat`时，它说我的 SSH 连接处于状态`ESTABLISHED`，即使网络已关闭。

无法理解为什么`send`正常执行并且不返回任何错误（如`EPIPE`or `ECONNRESET`）。可能是 SSH 连接在网络关闭后仍然存在一段时间？

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T05:24:08.837

这是由于 TCP 的实现（而 ssh 使用 TCP）。您的 send() 只是写入一个套接字，这只是一个文件描述符，返回意味着此操作成功。这并不意味着数据已发送。毕竟，文件描述符只是一些带有内核状态的指针。它在内核中实现，以在会话失败之前将 TCP 状态保持更长时间。事实上，内核被允许无限期地保持这个会话，直到你明确地调用 close() 或终止你的进程。因此，您的数据实际上是在内核空间中缓冲的，以供网卡稍后传送。

这是一个你可以做的快速实验：编写一个服务器，在建立连接后继续接收消息

```
socket();
bind();
listen();
while (1) {
    accept();
    recv();
} 
```

编写客户端建立连接，接受 cin 输入，并在您点击返回时向服务器发送消息。

```
socket();
connect();
while (1) {
    getline();
    send();
} 
```

请注意，切勿在任一侧的 while 循环中调用 close()。现在，如果您在建立连接后拔下电缆，发送一条消息，再次重新连接，然后发送另一条消息，您将在服务器端找到两条消息。
您永远不会观察到的是，您在收到第一条消息之前收到了第二条消息。您要么将它们全部丢失，要么按顺序接收它们。

现在让我解释一下它为什么会这样。这是 TCP 会话的状态图。
[https://dl.dropbox.com/u/17011409/TCP_State.png](https://dl.dropbox.com/u/17011409/TCP_State.png)

您可以清楚地看到，在您显式调用 close() 之前，连接将始终处于已建立状态。这是 TCP 的预期行为。建立 TCP 连接代价高昂，保持会话活动对性能有好处。（这部分是那些 TCP DOS 的工作原理。攻击者不断建立连接，直到服务器耗尽资源来保存 TCP 状态信息。）

在这种状态下，您的 send() 将被委托给内核进行实际发送。TCP 保证有序、可靠的传递，但网络随时可能丢失数据包。所以 TCP 必须缓冲你的数据包，并继续尝试。有一些算法可以限制这种重试，但它在声明失败之前已经缓冲了很长时间。在 Linux 中，假设丢包的默认超时时间是 3 秒。但是在丢失之后，TCP会重试。然后在几秒钟后重试。您拔下电缆的事实与在到达目的地的过程中丢失数据包的情况相同。再次插入电缆后，重试成功，TCP 将开始按顺序发送剩余的消息。

我知道我一定没能彻底解释清楚。您确实需要了解 TCP 的详细信息才能推断此行为。它是 TCP 为您提供的属性所必需的。将内部实现暴露给程序员是不可接受的。（发送调用有时会在几毫秒内返回，有时会在 10 秒后返回呢？我敢打赌，没有人会希望在他们的代码中出现这种性能炸弹。拥有 TCP 库的目的正是为了隐藏这种丑陋的网络性质。）事实上，您甚至需要了解 TCP 如何在有损网络上实现有序可靠交付的多个 RFC 和算法。拥塞控制也会影响缓冲区的存在时间。维基百科是一个很好的起点，但这是一个完整的学期”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T06:42:00.747

使用零标志参数，send() 等效于 write(2)。它会将您的数据写入文件描述符（存储在内核空间中以提供）。

您必须使用其他类型的标志：MSG_CONFIRM 可能会帮助您。

# jquery - 自定义 jQuery 自动完成与淘汰赛

> ID：12645125
> 
> 赞同：2
> 
> 时间：2012-09-28T18:03:39.673
> 
> 标签：jquery, autocomplete, knockout.js

> **可能重复：**
> [带有 Knockout JS 模板/JQuery 的自动完成组合框](https://stackoverflow.com/questions/7537002/autocomplete-combobox-with-knockout-js-template-jquery)

我们正在开发一个 MVC/MVVM/JQuery/Knockout 项目。所以客户端大部分是断开连接的，所有数据都由控制器初始化并序列化到我们的客户端视图模型中。我在使用自动完成时遇到了问题，并创建了一个可以工作的自定义 jquery 自动完成，但我需要让它更容易实现。我们使用的是 jqAuto，但是一旦我们删除了我们的存根数据并开始从服务器接收它，我就无法让它工作……我尝试了又尝试了更多……只是行不通。

所以这就是我所拥有的......并且它有效。

```
<input id="DiagramNumberInput" />
<input id="DiagramNumberSelectionID" data-bind="value:viewModel.SelectedValue"/>

    $('#DiagramNumberInput').autocomplete({
    source: $.map(viewModel.InitializationValues.ListsOptions.AvailableDiagramNumbersArray(), function (item) {
        return {
            lable: item.Name(),
            value: item.Name(),
            id: item.ID()
        };
    }),
    minLength: 1,
    select: function (event, ui) {
        $('#DiagramNumberSelectionID').val(ui.item.id);
    }
  }); 
```

正如我所说，我有很多自动完成功能，我需要封装这个函数并且希望它能够工作，所以我不必为选定的 ID 绑定使用单独的 html 输入。

这就是我要找的

```
<input id="DiagramNumberInput" data-bind="value: myfunction(myarray, viewModel.SelectedDiagNumberID)/> 
```

# security - 证书和哈希检查？

> ID：12645128
> 
> 赞同：0
> 
> 时间：2012-09-28T18:03:52.207
> 
> 标签：security, ssl, certificate, public-key-encryption

我问这个问题是为了百分百确定。

[关联](http://ntrg.cs.tcd.ie/mepeirce/Dce/99/ssl/works.htm)

> 为了验证证书以确保它包含由证书颁发机构数字签名的信息，Web 浏览器会验证数字签名。由于数字签名是根据证书内容计算的加密哈希值，因此 Web 浏览器需要比较哈希值。Web 浏览器根据它收到的证书的内容计算一个哈希值。然后它解密数字签名以确定证书颁发机构计算的哈希值。如果两个哈希值匹配，则 Web 浏览器确信证书包含证书颁发机构验证和数字签名的信息。

问题 ：

> Web 浏览器根据收到的证书内容计算哈希值

浏览器*知道*证书在哪个摘要算法中使用，因此他*也*使用它来计算哈希 - 基于证书内容。

> 然后它解密数字签名以确定证书颁发机构计算的哈希值

*浏览器知道哪个 CA 创建了证书，因此他从适当的计算机存储位置*获取公钥并将其应用于加密的哈希值。结果是解密的哈希值。

然后看看两者是否相同。

我对吗 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T19:21:10.323

（您可能对 Security.SE 上的[这个问题感兴趣。）](https://security.stackexchange.com/q/16595/2435)

这是[X.509 证书的结构](https://www.rfc-editor.org/rfc/rfc5280#section-4.1)：

> ```
> Certificate  ::=  SEQUENCE  {
>      tbsCertificate       TBSCertificate,
>      signatureAlgorithm   AlgorithmIdentifier,
>      signatureValue       BIT STRING  }
> 
> TBSCertificate  ::=  SEQUENCE  {
>      version         [0]  EXPLICIT Version DEFAULT v1,
>      serialNumber         CertificateSerialNumber,
>      signature            AlgorithmIdentifier,
>      issuer               Name,
>      validity             Validity,
>      subject              Name,
>      subjectPublicKeyInfo SubjectPublicKeyInfo,
>      issuerUniqueID  [1]  IMPLICIT UniqueIdentifier OPTIONAL,
>                           -- If present, version MUST be v2 or v3
>      subjectUniqueID [2]  IMPLICIT UniqueIdentifier OPTIONAL,
>                           -- If present, version MUST be v2 or v3
>      extensions      [3]  EXPLICIT Extensions OPTIONAL
>                           -- If present, version MUST be v3
>      } 
> ```

当出现证书时，浏览器会从证书本身获取签名算法。通常，这类似于`RSAwithSHA1`.

在这种情况下，它确实可以重新计算`TBSCertificate`（证书的实际内容）的 SHA-1 摘要。

此外，`TBSCertificate`它可以从 中找到颁发者名称：这是用于从已知 CA 证书中查找信任锚的名称（颁发者名称必须与 CA 证书的主题匹配）。当它在它已经信任的列表中找到具有正确名称的 CA 证书时，它可以从该 CA 证书中获取公共 RSA 密钥。

同时拥有 SHA-1 摘要和 RSA 公钥，它可以验证`signatureValue`匹配。

> 数字签名是一个加密的哈希值

严格来说，这不是真的，尽管人们常说。数字签名是数字签名，而不是加密。

问题在于 RSA 使用相同的数学来加密和签名：使用公钥加密和使用私钥签名。通常，一个与另一个混淆（即使在 OpenSSL API 中）。用私钥“加密”是没有意义的，因为“加密”意味着隐藏（如果你把公钥泄露出去，你就不会隐藏任何东西，这样它就可以“解密”签名）。

这种关于散列和数字签名加密的微妙之处不适用于其他一些算法，例如仅用于签名的 DSA。

这就是为什么许多数字签名 API 将散列和密钥使用组合成一个“签名”或“验证”操作的原因。这就是 Java [Signature](http://docs.oracle.com/javase/7/docs/api/java/security/Signature.html) API 所做的，例如：您告诉它使用`RSAwithSHA1`or `DSAwithSHA1`，给它密钥和消息，并告诉它签名或验证，您不必手动进行摘要或“加密”。

用于证书验证的目的：浏览器从证书中获取颁发者并找到对应的公钥（来自受信任的 CA 证书），它还从证书中获取签名算法，然后用该公钥和 TBSCertificate 验证签名内容，根据签名算法的规定。

# iphone - 从哪里获得自定义标签栏图标和背景？

> ID：12645135
> 
> 赞同：2
> 
> 时间：2012-09-28T18:04:28.003
> 
> 标签：iphone, tabbar

有没有人有用于 iPhone/iPad 开发的定制标签栏控制器资源的链接？

示例：Apple 的 Find my Friends 应用程序有一些自定义的标签栏按钮和背景。我不想从头开始设计它们。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T18:28:51.173

[Noun Project](http://thenounproject.com)为几乎所有内容提供了大量图标。您可以将图标下载为 SVG 文件，这是一个巨大的优势，因为您可以根据需要将它们放大到大象的大小。

**图标**

*   [Glyphish 图标集](http://www.glyphish.com)（支持 Retina，25 美元，400 个图标。还提供免费版本，但不支持 Retina）
*   [选项卡图标](http://www.tabsicons.com/classic/#tabs_free)（有一些免费图标，但大多数是付费图标集）
*   [工作组图标集](http://blog.twg.ca/2010/11/retina-display-icon-set/)（Retina 就绪，为 UIToolbar 制作，但也可以与标签栏一起使用）
*   [Icons Berlin](http://www.iconsberlin.com)（付费图标，1 欧元/图标，如果您想创建自己的图标，他们还提供免费的标签栏图标在线编辑器）
*   [iconfinder.com](http://www.iconfinder.com/search/?q=home)（图标搜索引擎，许可证可能有所不同）

**背景/自定义UITabBars**

*   [30 种免费皮革纹理](http://naldzgraphics.net/freebies/30-free-good-quality-leather-textures/)
*   [cocoacontrols](http://www.cocoacontrols.com)（iOS 和 Mac OS 的自定义 UI 元素）
*   [Instagram 喜欢标签栏](http://idevrecipes.com/2010/12/16/raised-center-tab-bar-button/)
*   [潘多拉用户界面](http://designmodo.com/pandora-free/)

因为我主要发现提供付费图标的网站：我不隶属于任何这些网站，只是添加了谷歌向我展示的内容:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:01:39.920

我建议你看看[http://www.iconbeast.com](http://www.iconbeast.com)

IconBeast Pro 现在有 1700 个 iOS 标签栏和工具栏图标，其中大部分图标都是独一无二的。

[他们在http://www.iconbeast.com/free](http://www.iconbeast.com/free)也有一组免费图标，但图标要少得多，而且没有矢量文件。

# c++ - g++，创建分发静态库

> ID：12645137
> 
> 赞同：2
> 
> 时间：2012-09-28T18:04:46.630
> 
> 标签：c++, boost, g++, static-libraries

我的代码使用以下makefile编译得很好

```
all: sample

sample: sample.o mylib.o
    g++ -Wall -O3 -ffast-math -funroll-loops -ansi -pedantic-errors -o sample -L/usr/lib sample.o mylib.o -lboost_serialization -lboost_iostreams -lz -I /usr/include/boost 

sample.o: sample.cpp
    g++ -O3 -ffast-math -funroll-loops -ansi -pedantic-errors -I /usr/include/boost -c -o sample.o sample.cpp

mylib.o: mylib.cc mylib.h
    g++ -O3 -ffast-math -funroll-loops -ansi -pedantic-errors -I /usr/include/boost -c -o mylib.o mylib.cc 
```

现在，mylib.cc 和 mylib.h 包含许多我想分享的有用代码。但是，这取决于我的目标受众可能没有或不知道如何正确安装的 Boost。

有没有办法让我用 mylib.h 分发一个静态的 mylib.o，我的最终用户可以编译成他们自己的代码而无需安装 Boost？

附加说明：mylib.h 不包含任何 BOOST 标头，但 mylib.cc 包含 boost 标头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:06:56.207

如果您能够创建“无增强”标题，则可以这样做。

只要您有任何引用来提升标题中的内容（您需要重新分发），您就不能。

如果你的 cc 文件使用了非标头的 boost 类，你也需要分发这些文件——无论是在源代码中，还是在目标文件中——但是，如果用户使用另一个版本的boost 库并尝试实例化已在您的目标文件中定义的类。

一种可能的解决方案是找出需要哪些 cc 文件的 boost 并在不同的命名空间中编译它们，例如使用`-Dboost=my_boost`：

```
g++ -Dboost=my_boost <put additional compiler options here> my_boost_file.cc -c my_boost_file.o 
```

您还应该使用该定义编译您自己的目标文件。

最后创建一个包含所有所需目标文件的存档；

```
ar rvs my_archive.a mylib.o my_boost_file.o 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:07:35.693

如果`mylib.h`包含 Boost 头文件，则这些头文件需要以某种形式存在于开发人员的系统中。至少，您必须将 Boost 的那一部分与您的代码一起发布。

但是，如果您可以创建一个较小的头文件，该文件只公开您的库的一部分并且不包含或引用 Boost 中的任何内容，那么您可以。Boost 的大部分内容都是仅头文件（所需的 Boost 代码已经编译到您的库中）。

# groovy - Groovy 'assert'：如何显示值？

> ID：12645142
> 
> 赞同：25
> 
> 时间：2012-09-28T18:05:46.240
> 
> 标签：groovy, assert

如何在groovy中显示一个值是真还是假？我使用 Eclipse 作为我的 IDE。

```
 assert 4 * ( 2 + 3 ) - 6 == 14 //integers only 
```

而且我不太了解 Groovy 中的“断言”。它像 Java 中的 if() 语句/布尔值吗？

“断言”在 Groovy 中扮演什么角色？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-29T10:13:44.803

断言类似于 if，它验证您提供的表达式：如果表达式为真，则继续执行到下一条语句（并且不打印任何内容），如果表达式为假，则引发 AssertionError。

您可以自定义错误消息，提供由冒号分隔的消息，如下所示：

```
assert 4 * ( 2 + 3 ) - 5 == 14 : "test failed" 
```

这将打印：

```
java.lang.AssertionError: test failed. Expression: (((4 * (2 + 3)) - 5) == 14) 
```

但我不得不改变你的测试值，以使其失败。

断言的使用取决于您的口味：您可以使用它们来断言在您的工作继续之前必须为真的东西（请参阅[按合同设计](http://en.wikipedia.org/wiki/Design_by_contract)）。

例如，一个需要正数才能使用的函数，可以测试参数是否为正的事实，并将断言作为第一个语句：

```
def someFunction(n) {
    assert n > 0 : "someFunction() wants a positive number you provided $n"
    ...
    ...function logic...
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-23T21:31:23.863

Groovy 断言现在非常令人印象深刻！他们实际上会打印出语句中每个变量的值（这对于调试来说非常棒）

例如，如果 b 为 5，a 为 {it^2} 且 c 为 15，它可能会打印如下内容：

```
assert( a(b)  == c)
.       | |   |  |
.      25 |  !=  15
.         5 
```

（嗯 - 类似的东西 - Groovy 可能会看起来好多了）。

如果我们能在异常行上得到这种打印输出......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T19:44:49.160

断言“断言”表达式的结果将为真

# jquery - Onclick 旋转（动画）没有发生

> ID：12645145
> 
> 赞同：0
> 
> 时间：2012-09-28T18:05:52.043
> 
> 标签：jquery, rotation, jquery-animate

我有一个关于我遇到的小问题的问题，我在这里画了草图：http: [//jsfiddle.net/gm3mG/1/](http://jsfiddle.net/gm3mG/1/)

我想旋转 中的箭头`<span id="rotator">`，但无法使其工作。我究竟做错了什么？

**编辑：**

我的第二个问题：如何使它在单击后 1 秒后将箭头旋转回来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T18:14:17.083

首先，您使用的是 jQuery，而不是 Mootools，因此您必须相应地配置 jsFiddle（查看`Choose Framework`左侧窗格中的部分）。

其次，CSS 转换不适用于内联元素，并且`<span>`元素默认是内联的。用它来设计它可以`display: inline-block`解决你的问题。

[你会在这里](http://jsfiddle.net/gm3mG/16/)找到一个更新的小提琴。

**编辑：**关于你问题的第二部分，规范的答案是使用[window.setTimeout()](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)。但是，您也可以使用 jQuery 动画工具，如[delay()](http://api.jquery.com/delay/)和[queue()](http://api.jquery.com/queue/)来实现相同的效果：

```
$("#rotator").addClass("lol").delay(1000).queue(function(next) {
    $(this).removeClass("lol");
    next();
}); 
```

[您可以在此处](http://jsfiddle.net/gm3mG/23/)测试此解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:13:13.773

该[`transform`属性](http://www.w3.org/TR/2012/WD-css3-transforms-20120911/#transform-property)仅适用于可[变形元素](http://www.w3.org/TR/2012/WD-css3-transforms-20120911/#TermTransformableElement)，您`<span>`不是其中之一。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T18:13:06.587

我会首先确保 .lol 类首先工作。只需将其应用于 span#rotator 即可。我试过小提琴，但它一开始就不起作用，更不用说用javascript动态添加类了......

# jquery - WCF 正在更改我从 JSON 格式的 jQuery .axaj 调用返回的 DateTime

> ID：12645147
> 
> 赞同：1
> 
> 时间：2012-09-28T18:06:13.687
> 
> 标签：jquery, asp.net, wcf, datetime

我知道这个问题已经在这里被问过很多次了，但还没有答案为我提供解决方案。请帮忙，我正在用头撞墙。

问题：我有一个简单的 ASP.NET Web 表单应用程序，只有一页 - Default.aspx。此页面包含 jQuery、JSON2、Rick Strahl 的 ServiceProxy.js 和我的 javascript 文件引用 (timezone.js)。在同一个项目中，我有一个 WCF 服务，我使用 ServiceProxy（它是 jQuery 的 .ajax POST 的一个方便的包装器）从 timezone.js 调用它。该调用应返回具有 DateTime 属性的对象。我正在不同时区的两台客户端机器上进行测试并得到不同的结果。以下是 IIS 托管的应用程序的屏幕截图：

编辑：看起来 StackOverflow 不允许我发布图片。这是渲染的文本...

在 GMT 机器上，我得到：WCF 调用中 js 渲染的日期：**Fri Sep 28 13:30:00 UTC+0100 2012**

在东部标准时间机器上，我得到：来自 WCF 调用的 js 呈现的日期： **Fri Sep 28 08:30:00 EDT 2012**

正如您在两个屏幕截图的右侧所看到的，WCF 调用的结果是不同的时间。

我想完全控制发回的日期，我已经接近将其转换为服务器上的字符串并在 javascript 中解析字符串。我还必须使用 POST 到启用 WCF 的 Ajax 服务。

这是 Default.aspx 背后的代码

```
public class DateContainerObject
{
    public DateTime theDate { get; set; }
}

public static class DateMaker
{
    public static DateContainerObject MakeDateObj()
    {
        DateContainerObject obj = new DateContainerObject();
        DateTime origUTCDate = new DateTime(2012, 9, 28, 13, 30, 0);
        DateTime newKindDate = DateTime.SpecifyKind(origUTCDate, DateTimeKind.Unspecified);
        obj.theDate = newKindDate;

        return obj;
    }
}

public partial class Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        Literal1.Text = DateMaker.MakeDateObj().theDate.ToString();
    }
} 
```

这是 WCF 服务代码：

```
[ServiceContract(Namespace = "")]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class TimeZoneService
{
    [OperationContract]
    public DateContainerObject GetDateObject()
    {
        return DateMaker.MakeDateObj();
    }
} 
```

这是 timezone.js 代码：

$（函数（）{

```
var dObj = {};
var proxy = new ServiceProxy("/TimeZoneService.svc/", { isWcf: true });
proxy.invoke("GetDateObject",
        dObj,
        function (result) {
            $('#spanDateJSRender').text(result.theDate);
        },
        function (e) {
            alert(e);
        },
        function () { },
        false
        ); 
```

});

我尝试将 DateTimeKind 指定为所有不同的值，但它并没有给我准确的日期和时间。我也尝试过使用 DateTimeOffset 并得到相同的结果。我可以用这个例子做些什么来获得在服务器上创建的确切日期时间以在浏览器中呈现？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T02:25:13.067

只是为了结束这个。我正在将我的 DateTime 对象转换为字符串并让 JavaScript 在客户端上解析它们。这感觉不太好，但它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T19:54:47.207

'Fri Sep 28 13:30:00 UTC+0100 2012' 和 'Fri Sep 28 08:30:00 EDT 2012' 代表相同的时间点（9 月 28 日 12:30 UTC）。如果您想要日期的统一表示，请不要使用`toString`转换的方法`result.theDate`，而是使用类似的方法`toUTCString()`。

# java - 如何自动关闭 JMXConnectorServer

> ID：12645155
> 
> 赞同：2
> 
> 时间：2012-09-28T18:06:45.647
> 
> 标签：java, jmx

我正在尝试启动 JMXConnectorServer 以进行管理和调试。但我不希望此服务在最后一个非守护线程终止时阻止应用程序正常退出。

换句话说，我希望以下程序立即终止：

```
public class Main {
    public static void main(final String[] args) throws IOException {
        MBeanServer mbs = ManagementFactory.getPlatformMBeanServer();
        JMXServiceURL jmxUrl = new JMXServiceURL("rmi", null, 0);
        JMXConnectorServer connectorServer =
            JMXConnectorServerFactory.newJMXConnectorServer(jmxUrl, null, mbs);
        connectorServer.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:17:49.760

是的，你需要`connectorServer.stop();`在某个时候这样做。

**编辑：**

在阅读您的评论时，听起来您应该执行以下操作：

```
connectorServer.start();
try {
    // create thread-pool
    ExecutorService threadPool = Executors...
    // submit jobs to the thread-pool
    ...
    threadPool.shutdown();
    // wait for the submitted jobs to finish
    threadPool.awaitTermination(Long.MAX_LONG, TimeUnit.SECONDS);
} finally {
    connectorServer.stop();
} 
```

@Nicholas 关闭挂钩的想法是一个很好的想法。然而，通常情况下，我让我的线程等待从JMX 操作`main`设置的某种变量。`shutdown()`就像是：

```
public CountDownLatch shutdownLatch = new CountDownLatch(1);
...

// in main
connectorServer.start();
try {
    // do the main-thread stuff
    shutdownLatch.await();
} finally {
    connectorServer.stop();
}

// in some JMX exposed operation
public void shutdown() {
    Main.shutdownLatch.countDown();
} 
```

顺便说一句，您可以使用我的[SimpleJMX](http://256stuff.com/sources/simplejmx/)包来管理您的 JMX 服务器。

```
JmxServer jmxServer = new JmxServer(8000);
jmxServer.start();
try {
    // register our lookupCache object defined below
    jmxServer.register(lookupCache);
    jmxServer.register(someOtherObject);
} finally {
    jmxServer.stop();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T04:06:07.167

我玩过类似的问题并写了这个类：

```
public final class HardDaemonizer extends Thread {

    private final Runnable target;
    private final String newThreadName;

    public HardDaemonizer(Runnable target, String name, String newThreadName) {
        super(name == null ? "Daemonizer" : name);
        setDaemon(true);
        this.target = target;
        this.newThreadName = newThreadName;
    }

    @Override
    public void run() {
        try {
            List<Thread> tb = getSubThreads();
            target.run();
            List<Thread> ta = new java.util.ArrayList<>(getSubThreads());
            ta.removeAll(tb);
            for (Thread thread : ta) {
                thread.setName(newThreadName);
            }
            Thread.sleep(Long.MAX_VALUE);
        } catch (InterruptedException ex) {
            Logger.getLogger(HardDaemonizer.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public static Thread daemonize(String daemonizerName, String newThreadName, Runnable target) {
        HardDaemonizer daemonizer = new HardDaemonizer(target, daemonizerName, newThreadName);
        daemonizer.start();
        return daemonizer;
    }

    private static List<Thread> getSubThreads() {
        ThreadGroup group = Thread.currentThread().getThreadGroup().getParent();
        Thread[] threads = new Thread[group.activeCount()];
        group.enumerate(threads);
        return java.util.Arrays.asList(threads);
    }
} 
```

你可以这样使用它：

```
HardDaemonizer.daemonize(null, "ConnectorServer", new Runnable(){
    @Override
    public void run() {
        try {
            connectorServer.start();
        } catch (IOException ex) {
            Logger.getLogger(Ralph.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
}); 
```

小心 - 这很棘手！

* * *

**编辑**

啊...这不是您的解决方案。它仅对连接器线程进行硬守护，当 jvm 停止时，该线程将被终止。另外，您可以自定义此线程的名称。

或者，您可以在方法中添加标志`completed`和睡眠循环，`daemonize`直到连接器服务器启动。

* * *

**简化**

这是简化的守护进程，没有棘手的线程重命名：

```
public abstract class Daemonizer<T> extends Thread {

    private final T target;
    private boolean completed = false;
    private Exception cause = null;

    public Daemonizer(T target) {
        super(Daemonizer.class.getSimpleName());
        setDaemon(true);
        this.target = target;
    }

    @Override
    public void run() {
        try {
            act(target);
        } catch (Exception ex) {
            cause = ex;
        }
        completed = true;
        try {
            Thread.sleep(Long.MAX_VALUE);
        } catch (InterruptedException ex) {
        java.util.logging.Logger.getLogger(Daemonizer.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
    }

    public abstract void act(final T target) throws Exception;

    public static void daemonize(Daemonizer daemonizer) throws Exception {
        daemonizer.start();
        while (!daemonizer.completed) {
            Thread.sleep(50);
        }
        if (daemonizer.cause != null) {
            throw daemonizer.cause;
        }
    }
} 
```

用法：

```
Daemonizer.daemonize(new Daemonizer<JMXConnectorServer>(server) {
    @Override
    public void act(JMXConnectorServer server) throws Exception {
        server.start();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T18:13:31.527

您可以添加一个[JVM 关闭挂钩](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)来停止连接器服务器。

**===== 更新 =====**

不知道为什么你的关机钩子不起作用。也许您可以提供您的示例代码。这是一个例子：

```
public static void main(String[] args) {        
    try {
        log("Creating Connector Server");
        final JMXConnectorServer jcs = JMXConnectorServerFactory.newJMXConnectorServer(new JMXServiceURL("rmi", "localhost", 12387), null, ManagementFactory.getPlatformMBeanServer());
        Thread jcsStopper = new Thread("JCS-Stopper") {
            public void run() {
                if(jcs.isActive()) {
                    try {
                        jcs.stop();
                        log("Connector Server Stopped");
                    } catch (Exception e) {
                        log("Failed to stop JCS");
                        e.printStackTrace();
                    }                       
                }
            }
        };
        jcsStopper.setDaemon(false);
        Runtime.getRuntime().addShutdownHook(jcsStopper);
        log("Registered Server Stop Task");
        jcs.start();
        log("Server Started");
        Thread.sleep(3000);
        System.exit(0);

    } catch (Exception ex) {
        ex.printStackTrace(System.err);
    }
} 
```

输出是：

```
[main]:Creating Connector Server
[main]:Registered Server Stop Task
[main]:Server Started
[JCS-Stopper]:Connector Server Stopped 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T13:18:34.163

```
String port = getProperty("com.sun.management.jmxremote.port");
if (port == null) {
    port = String.valueOf(getAvailablePort());
    System.setProperty("com.sun.management.jmxremote.port", port);
    System.setProperty("com.sun.management.jmxremote.ssl", "false");
    System.setProperty("com.sun.management.jmxremote.authenticate", "false");

    sun.management.Agent.startAgent();
}
log.info(InetAddress.getLocalHost().getCanonicalHostName() + ":" + port); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-24T13:51:47.013

根据我的经验，`JMXConnectorServer`当您明确创建它时，它只会在用户线程中运行。

如果您改为通过系统属性为平台 MBean 服务器配置 RMI 访问，则隐式创建的 JMX 连接器服务器将作为守护进程运行，并且不会阻止 JMV 关闭。为此，您的代码将缩小为以下

```
public class Main {
    public static void main(final String[] args) throws IOException {
        MBeanServer mbs = ManagementFactory.getPlatformMBeanServer();
    }
} 
```

但您需要设置以下系统属性：

```
-Dcom.sun.management.jmxremote.port=1919
-Dcom.sun.management.jmxremote.authenticate=false
-Dcom.sun.management.jmxremote.ssl=false 
```

# java - Java 变量转换

> ID：12645161
> 
> 赞同：0
> 
> 时间：2012-09-28T18:07:06.133
> 
> 标签：java, converter

我需要编写一个小型 Java 程序来处理涉及金钱的计算。因此，它需要具有准确性。（例如：没有`float`/`double`变量，只有`long`）。

不幸的是，我需要使用的原始值是通过一种只能将变量读取为“double”的方法导入的。

现在，我尝试`long`使用类似于以下的方法将其转换为：

```
double importedValue = x;
double importedValueConverted = (long) x; 
```

但是，当我尝试将 importValueConverted 除以另一个“长”变量时，我得到：

> 必需：长期发现：双重错误：可能丢失精度

这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T18:11:01.580

```
double importedValue = x;
double importedValueConverted = (long) x; 
```

请注意，这两个变量都被声明为“double”。这会导致您的错误（释义）：（您正在执行的操作需要 a）`long`（但是当它尝试时发现 a）`double`。

你要：

```
double importedValue = x;
long importedValueConverted = (long) x; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T20:06:30.573

忘记所有的铸造业务。如果您正在处理财务计算，您可以直接使用 BigDecimal 包装所谓的方法返回的双精度数，并使用 BigDecimal 提供的适合您需要的适当舍入机制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T18:53:35.350

**更新：**

这篇文章提出了一个我认为从未得到回答的额外问题——为什么使用`int`，或者更好，`long`或者`BigDecimal`用于货币计算。这是在这里回答的：

[为什么不使用 double 或 float 来表示货币（或需要任何精确计算的地方）？](https://stackoverflow.com/questions/3730019/why-not-use-double-or-float-to-represent-currency)

> 因为浮点数和双精度数不能准确地表示大多数以 10 为底的实数。

即使在使用时`BigDecimal`，也必须使用`String`构造函数而不是构造函数`float`。

综上所述，您最好的选择是：

*   将所有值转换为美分并存储为`long`（将每个美元金额乘以 100）
*   以美分进行操作
*   最后除以 100 转换回美元

这将保持所需的精度。显然，这个解决方案考虑到了美元，任何外币兑换都需要适当考虑。

* * *

`long`考虑四舍五入到最接近的值，而不是强制转换：

```
double d = 1234.56;
long x = Math.round(d); 
```

我真的问你为什么要从 a`double`转到 a `long`，因为这会让你失去十进制值的精度。

如果你想保持一些精度（比如最多 3 位），并且你绝对**只能使用 long**来做到这一点，你可以将两个双精度数乘以 1,000，然后将所有后续操作缩放相同的因子，然后缩放它们全部回到最后，就像这样：

```
double starting = 1234.5678;
double worker = starting * 1000;
long roundedWorker = Math.round(worker);

// do other computations here...
// due to earlier scaling, adding 1000 is equivalent to adding 1 to the original
long longResult = roundedWorker + 1000;

double threeDigitPreciseResult = longResult / 1000d;
System.out.println("Adding 1 to original number as a long: " + threeDigitPreciseResult); 
```

**更新**

在对问题进行了更好的解释之后，听起来您正在寻找的是`DecimalFormat`. 下面是一个`roundToTwoDecimals()`使用它的方法，以及一个演示它的测试用例：

```
import java.text.DecimalFormat;

import org.junit.Test;

public class ExampleTest {
  @Test
  public void test() {
    double num1 = 29334.32942032432;
    double num2 = 438.95940;
    double result = num1 / num2;
    System.out.println("Before rounding: " + result);

    double rounded = roundToTwoDecimals(result);
    System.out.println("After rounding: " + rounded);
  }

  public double roundToTwoDecimals(double d) {
    DecimalFormat twoDForm = new DecimalFormat("#.##");
    return Double.valueOf(twoDForm.format(d));
  }

} 
```

打印出来：

```
Before rounding: 66.82697629968585
After rounding: 66.83 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T18:39:42.290

为什么不看看[BigDecimal](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigDecimal.html#BigDecimal%28double%29)。当我使用它时效果很好。使用 Double ctor 时要小心，因为 Double 不是那么精确（例如，它不能准确地存储 0.1）。[将String](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigDecimal.html#BigDecimal%28java.lang.String%29) ctor 用于 BigDecimal可能更有用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T18:14:22.257

如果你想投双倍长，你可以在下面做。

```
 double importedValue = 8.0;
    long importedValueConverted = (long) 8.0;
    System.out.println(importedValueConverted/(long)8); 
```

输出：1

```
double importedValue = x;
double importedValueConverted = (long) x; 
```

您试图将 double 转换为 long 并将转换的值重新分配给 double。你应该把它分配给long。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T18:14:34.790

你正在铸造`x`一个长而不是试图将它分配给一个双倍。

那没有意义。

如果你想要一个长的，你应该使用一个长的。

`long longValue = (long) 4.64;`

# java - 是否可以调用带有 null 参数但参数不为 null 的方法？

> ID：12645167
> 
> 赞同：8
> 
> 时间：2012-09-28T18:07:19.357
> 
> 标签：java

在下面的函数中，我可以用什么来代替`<typedefinition>`让程序打印“O noes！”？

```
public static void main(String[] args) {
    Object o = null;
    story(o);
}

private static void story(<typedefinition> o) 
{
    if (o != null)
      System.out.println("O noes!");
    else
      System.out.println("O yes");
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-28T18:14:54.963

```
 private static void story(Object... o) 
```

因为如果您传递 null，则被视为 1 个元素的数组 (Object[])（因此 != null）

# php - 是否有任何用 PHP 或 Go 编写的 SMTP 服务器？

> ID：12645173
> 
> 赞同：8
> 
> 时间：2012-09-28T18:07:37.000
> 
> 标签：php, email, smtp, go

我不是指[SMTP/IMAP 客户端](http://roundcube.net/)，我指的是可以接收和发送电子邮件的工作[SMTP服务器。](http://en.wikipedia.org/wiki/SMTP)

有很多只侦听 SMTP 连接的部分[PHP](https://github.com/flashmob/Guerrilla-SMTPd)和[Go](http://websomtep.danga.com/) SMTP 服务器示例 - 没有显示如何发送邮件的示例吗？

我对学习简单邮件传输协议的后半部分非常感兴趣。我知道有很多与标准不同的不良服务器 - 但我想了解整个协议从头到尾是如何实现的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-28T18:36:53.180

我认为您误解了 SMTP 应该如何工作。这是一个简化版本：

1.  邮件用户代理 (MUA) 通过将邮件发送到邮件提交代理 (MSA) 来对邮件进行排队以进行传递。

2.  MSA 通过 SMTP 连接到邮件传输代理（“smtp 服务器”）。

3.  然后 MTA 使用 DNS 查找收件人域的 MX 记录。然后它作为*SMTP 客户端*联系收件人的 MX 服务器。

4.  MX 服务器接受信封；然后它将其转发给邮件传递代理 (MDA)。

5.  然后，MDA 将信封放入某个消息存储区，一些 IMAP 或 POP3 服务器在其中读取消息。然后 MUA 连接到这些服务器以检索消息。

整个过程使用三个主要命令。`MAIL`,`RCPT`和`DATA`.

*   `MAIL`= 信封信息、退回地址等。
*   `RCTP`= 收件人。
*   `DATA`= 有效载荷。

SMTP 服务器做出响应——实际上很像 HTTP，带有错误代码，基于此，MTA 知道如何处理信封（它会被退回，因此发送适当的回复等）

在此过程中，没有“检索电子邮件”之类的东西（暂时忽略[`ETRN`](https://www.rfc-editor.org/rfc/rfc1985)）；因为 SMTP 纯粹用于电子邮件传输而不是检索。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T22:28:49.223

我发现了一个用 PHP 编写的完整[SMTP 服务器](https://github.com/jasonjohnson/php-smtp)——甚至包括一个令人讨厌的开放中继。

```
$ sudo php php-smtp.php [ip-address] [port] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T12:50:57.187

没有 SMTP 的“后半部分”，只有协议。如果您的 MUA 直接通过 TCP 与邮件服务器交互（而不是使用像大多数 Unix 上的**/usr/bin/sendmail**二进制文件这样的帮助程序），那么它使用 SMTP 协议。MTA 在投递邮件时使用相同的协议与其他 MTA 通信。视情况而定，它可能会使用更大的可用动词集。

查看 MTA 的 PHP 或 Go 实现的代码将向您展示一个人/团队如何*实现*SMTP 协议。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-29T23:32:50.670

这是一个只处理邮件的 PHP smtpd 服务器 - [https://github.com/flashmob/Guerrilla-SMTPd](https://github.com/flashmob/Guerrilla-SMTPd) 和一个端口 [https://github.com/flashmob/go-guerrilla](https://github.com/flashmob/go-guerrilla)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-19T12:47:54.793

在 ReactPhp 之上有一个用 PHP 编写的非阻塞 SMTP 服务器：

[https://bitbucket.org/david_garcia_garcia/smtpserver](https://bitbucket.org/david_garcia_garcia/smtpserver)

它是为最终用户设计的，具有自定义身份验证和传递实现，其余的 SMTP 行为开箱即用。

# clojure - “-？>”去哪儿了？

> ID：12645177
> 
> 赞同：3
> 
> 时间：2012-09-28T18:08:25.387
> 
> 标签：clojure, macros

我正在寻找“-?>”，它与“->”的工作方式相同，除非其中一个线程函数返回 nil。如果在线程处理过程中遇到 nil，则线程表达式的返回值为 nil。有用。

这是我发现提到这件事的地方。 [http://clojuredocs.org/clojure_contrib/clojure.contrib.core/-_q%3E](http://clojuredocs.org/clojure_contrib/clojure.contrib.core/-_q%3E)

*从上面的网站*

```
Same as clojure.core/-> but returns nil as soon as the threaded value is nil itself (thus short-circuiting any pending computation).
Examples :
(-?> "foo" .toUpperCase (.substring 1)) returns "OO"
(-?> nil .toUpperCase (.substring 1)) returns nil 
```

我在clojure 1.4上。

什么/在哪里/如何访问此功能？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T18:27:24.957

[*去哪儿了`clojure.contrib`？*](http://dev.clojure.org/display/design/Where+Did+Clojure.Contrib+Go)`clojure.contrib.core`（部分）迁移到[`clojure.core.incubator`](https://github.com/clojure/core.incubator). 这包括旧的`-?>`宏。

# javascript - 如果打开时间过长，可以将加载 iframe 转移到弹出窗口吗？

> ID：12645179
> 
> 赞同：0
> 
> 时间：2012-09-28T18:08:40.357
> 
> 标签：javascript, iframe, dynamic, frameset

我有一个进行大量后台处理的网络应用程序，我正在尝试查看是否有一种方法可以传输正在加载响应的 iframe，无需重新处理请求，而是继续对 iframe 的初始请求。

### 好场景：

1.  表单已提交，处理需要一段时间才能完成；
2.  用户足够耐心并在页面上停留足够长的时间以从 iframe 中返回的操作中获得响应
3.  用户将根据 iframe 中的说明完成在步骤 #1 中发起的请求

### 有问题的场景：

1.  表单已提交，但处理时间过长（第 3 方可能需要 10 分钟才能完成请求）；
2.  用户不想停留在同一页面并等待响应完成并单击离开以转到另一个页面以继续他在应用程序中的工作
3.  在步骤 #1 中从未从帖子中收到来自 iframe 的响应，并且处理结果最终是未知的

### 预期的解决方案：

我试图找出的是是否有办法让我向当前页面添加一个 onunload 事件，该事件会将 iframe 传输到单独的弹出窗口，并且它将继续加载它并等待响应，而不是启动新请求? 这样，一旦处理完成，我就可以让用户注意弹出窗口。

### 一个好的工作场景的简单示例：

1.  主应用页面有一个计时器设置为 60 秒的表单
2.  -> 用户提交表单（提交帖子到 iframe）
3.  -> iframe 从 60 秒开始倒计时
4.  -> 用户离开当前页面
5.  -> 弹出窗口打开并继续倒计时（而不是从头开始）

# ajax - Ajax 与 Web 套接字与 Web Worker

> ID：12645186
> 
> 赞同：27
> 
> 时间：2012-09-28T18:09:09.950
> 
> 标签：ajax, html, web

这三个有什么区别？他们似乎在做同样的事情。为什么以及何时选择使用一种方法而不是另一种方法？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-28T18:23:21.247

AJAX 和 websocket 执行类似的任务——它们都建立了到服务器的通信通道。Web Worker 与它们中的任何一个都无关，它们只是 JS 执行的独立线程。

AJAX 比 websockets 更成熟——它的存在时间更长，并且拥有更广泛的浏览器支持。AJAX 是面向请求的——你向服务器发出请求，服务器响应，然后关闭连接。另一方面，Websockets 建立到服务器的持久连接，您可以在该连接上双向交换多条消息。

如果您想在不阻塞浏览器界面的情况下执行处理器密集型任务，Webworkers 非常有用。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-11-26T12:41:53.007

他们不一样。但是可以一起使用它们来构建高级应用程序。

Ajax：States 是异步 javascript 和 xml.. 的缩写，用于在调用时从服务器动态加载内容。

Websockets：Websockets 是 HTML5 中定义的特性。正如维基百科所说，“WebSocket 是一种通过单个 TCP 连接提供全双工通信通道的协议。” 所以这主要用于实时通信，如视频通话、实时聊天等。

WebWorkers：这个特性也在 HTML5 中定义。这主要用于在 Javascript 中引入多线程功能。由于 javascript 是一种单线程编程语言，因此只要使用它完成繁重的计算任务，它就会中断或暂停。为了克服这种破坏，将 Webworkers 添加到 javascript 中。

您可以在 Webworkers 中执行 Ajax 和 Websockets。但是由于安全原因，您不能使用 webworkers 操作 DOM。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-09-28T18:15:58.293

它们是不相同的。

Ajax：它是一种从 UI 渲染器异步与 Web 服务器交互的方式

Web Sockets：一种 HTML5 功能，您可以使用它与任何扩展浏览器范围的 Socket 服务器进行交互

Web Workers：另一个 HTML5 功能，可帮助您使用 Java Script 从 Web 浏览器进行多线程编程

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-01T22:12:23.757

**AJAX**：示例：Google 搜索栏 - 在您键入时出现建议。这是 AJAX 的实际应用。

IT 允许网页与幕后的“服务器”对话，让您无需离开 URL 即可更新网页。回到过去的网络时代，如果您想在网页上显示不同的内容，用户将不得不导航到不同的 URL：不再使用 AJAX。这个概念已经通过单页应用程序和应用程序（如 React、Vue、Elm 等）提升到了一个新的水平。

**网络工作者：** **当您需要进行密集计算时**——如果您要求网页将 Pi 计算到小数点后 100000 位：这可能需要一段时间。网页可能会冻结，您可能会损失 $$。因此，互联网爱好者认为把所有的辛苦工作都交给“工人”来做是个好主意。如果你这样做了，那么工作就可以完成，而不会阻止你的网页，也不会让它感觉缓慢/迟缓。

**Websockets：**这类似于 AJAX。您的网页与您的服务器对话，并且您的服务器响应 - 除非您这样做，就像您在打电话一样。您的用户的浏览器和您的服务器之间存在“连接”。AJAX 不存在这种“连接”：在这种情况下，您有一个简单的请求和一个从服务器返回的响应。换句话说，如果您想持续进行视频会议或流式传输股市数据：使用 websockets 可能比 AJAX 更好。

# python - 如何在 Windows 7 上安装 python imagemagick。我按照这些说明进行操作

> ID：12645195
> 
> 赞同：5
> 
> 时间：2012-09-28T18:09:31.200
> 
> 标签：python, wand

在 Windows 64 位 (python 2.6) 上安装 python IMagick binding wand api

这就是我所做的：

1.  下载并安装[ImageMagick-6.5.8-7-Q16-windows-dll.exe](http://www.imagemagick.org/download/binaries/ImageMagick-6.5.8-7-Q16-windows-dll.exe)

2.  [从http://pypi.python.org/pypi/Wand](http://pypi.python.org/pypi/Wand)下载`wand`的模块

3.  之后我`python setup.py install`从`wand`目录运行，

4.  然后我执行了第6步。但我得到了导入错误：找不到magickband库

5.  下载了magickwand'模块并从magickwand目录执行'python setup.py install'。

6.  然后我尝试了这段代码

    ```
    from wand.image import Image
    from wand.display import display

    with Image(filename='mona-lisa.png') as img:
        print img.size
        for r in 1, 2, 3:
            with img.clone() as i:
                i.resize(int(i.width * r * 0.25), int(i.height * r * 0.25))
                i.rotate(90 * r)
                i.save(filename='mona-lisa-{0}.png'.format(r))
                display(i) 
    ```

7.  但此后我再次收到相同的导入错误，未找到魔法带库，我厌倦了这个，因为我已经完成了所有安装。但无法执行代码。因为每次我收到 magickband libraray..import 错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T17:24:14.337

您必须先设置`MAGICK_HOME`环境变量。[请参阅本节](http://docs.wand-py.org/en/0.2-maintenance/guide/install.html#install-imagemagick-on-windows)的最后一部分。

> [![](../Images/211e87d01a4ce1c40584d37c91150984.png)](https://i.stack.imgur.com/KKEG5.png)
> [（来源：[wand-py.org](http://docs.wand-py.org/en/0.2-maintenance/_images/windows-envvar.png)）]

>

> 最后，您必须将`MAGICK_HOME`环境变量设置为 ImageMagick 的路径（例如`C:\Program Files\ImageMagick-6.7.7-Q16`）。您可以在*Computer ‣ Properties ‣ Advanced system settings ‣ Advanced ‣ Environment Variables... 中*进行设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T14:09:16.693

首先我必须安装 ImageMagic 并设置环境变量`MAGIC_HOME`，就在我能够安装`Wand`之后`pip`

# ruby-on-rails - rspec 中的实例变量如何工作？

> ID：12645198
> 
> 赞同：20
> 
> 时间：2012-09-28T18:10:03.523
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, instance-variables

这是 M Hartl 的 Ruby on Rails 教程中的一些代码。谁能解释为什么需要实例变量（@user）以及为什么不使用局部变量。另外，由于实例变量应该是类实例中的变量，@user 是从哪个类实例化的？

```
require 'spec_helper'

describe User do

  before { @user = User.new(name: "Example User", email: "user@example.com") }

  subject { @user }

  it { should respond_to(:name) }
  it { should respond_to(:email) }
end 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-28T18:18:47.453

在该实例中使用局部变量意味着它的范围将被限制为`before`并因此导致错误。是 User 类型，`@user`但它是`describe`块的实例变量。Rspec 有一些魔力，可以在运行时从每个`describe`块中生成一个类。每个示例（`it`块）最终成为所述类的子类。类继承让示例看到`@user`。

**2017-05-14 编辑**

链接的博客文章不再可用。在此处使用 Wayback Machine 链接 + 内联相关部分进行更新。

请注意，这被视为反模式，如本[博文](http://bitfluxx.com/2011/05/23/some-rspec-tips-and-best-practices.html)中所述。改为使用`let`。

`let`具有以下优点：

*   它在一个示例中多次使用时会被记住，但不会跨示例使用。
*   它是延迟加载的，因此您不会浪费时间为不引用它的示例初始化变量。
*   如果您的变量名中有拼写错误，将引发异常。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-28T18:19:38.017

您不能使用局部变量，因为局部变量仅存在于局部方法的范围内。`before`，`subject`并`it`在同一类中生成不同的范围。

以下代码

```
before { user = User.new(name: "Example User", email: "user@example.com") } 
```

当你调用它时会引发一个未定义的变量

```
subject { user } 
```

该实例`@user`是该类的一个实例`User`（毕竟，您是使用 来创建它的`User.new`）。

但是，您可能希望使用该`let`命令而不是实例变量。另外，如果你定义

```
subject { User.new(name: "Example User", email: "user@example.com") } 
```

`before`不需要使用。您还将获得额外的好处，即获得`subject`可用于访问实例的方法，等于 define `let(:subject)`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T18:19:19.943

`subject`广告`it`块处于不同的范围内，因此局部变量不起作用。`@user`属于 RSpec 在后台生成的类。

# cassandra - 向 CloudFoundry 添加新的数据库服务

> ID：12645199
> 
> 赞同：1
> 
> 时间：2012-09-28T18:10:21.550
> 
> 标签：cassandra, cloud-foundry

我想将 Cassandra 添加到 CloudFoundry。怎样才能做到这一点？我正在查看此处发布的信息：[CloudFoundry 中的 CouchDB？](https://stackoverflow.com/questions/12458058/couchdb-in-cloudfoundry)但那是使用包含的 CouchDB。

我也一直在梳理这个 wiki [https://github.com/cloudfoundry/oss-docs/tree/master/vcap/adding_a_system_service](https://github.com/cloudfoundry/oss-docs/tree/master/vcap/adding_a_system_service)，但这并没有给我足够的信息来说明如何指向我的外部托管的 Cassandra 服务。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T22:44:23.243

虽然关于它的信息不多，但 Service Broker 工具可以让您将外部服务公开给 VCAP 部署（以便在运行时显示该服务`vmc services`）。

[https://github.com/cloudfoundry/vcap-services/tree/master/service_broker](https://github.com/cloudfoundry/vcap-services/tree/master/service_broker)

没有操作方法或其他文档可言，所以最好的办法是阅读源代码并在 vcap-dev 谷歌组上发布问题。这是 Service Broker 上的现有线程：

[https://groups.google.com/a/cloudfoundry.org/d/topic/vcap-dev/sXF9rWzMMHc/discussion](https://groups.google.com/a/cloudfoundry.org/d/topic/vcap-dev/sXF9rWzMMHc/discussion)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:22:23.820

如果您想从私有云直接连接现有服务，我会看到 2 个解决方案：

*   不做任何特别的事情，让你的代码连接到这些服务，假设它们在网络上是可见的并且它们之间没有防火墙。当然，你会想让他们的地址可配置，但除此之外，就好像你在打第三方
*   创建某种“网关”服务，其作用是代理与您的私人服务的连接

当然，第三种解决方案是拥有一个真正的面向“CloudFoundry”的 Cassandra 服务，并将您现有的数据迁移到它（但随后将无法从您的 IS 的其余部分访问它，除非您以相反的方式创建桥梁)

我将从选项 1) 开始，然后根据您的流程和使用情况，研究解决方案 2)。

# scheme - 如何匹配结构

> ID：12645202
> 
> 赞同：1
> 
> 时间：2012-09-28T18:10:28.120
> 
> 标签：scheme, racket

我想匹配一个 struct `test`，并从中构建一个 struct ，但我该怎么做呢？
我什至不能`eval`用来做这个？

请参考代码，

```
#lang racket

  (struct test (num) #:prefab)

  (define s `((AK= #(struct:test 100))
   (AV)
   ))

  (define ns (make-base-namespace))
   (define (set-state-space-vals!)
   (namespace-set-variable-value! 'test test #f ns)
   )

(match s
   [`((AK= #(struct:test ,val) (AV)))  ;; can't match
     (displayln val)
    ]
   [`((AK= ,val) (AV))   ;; can match, but how to build the struct?
     (struct? (eval val ns))
     (match-define (struct test (num)) (eval val ns)) ;this will fail
     (displayln num)
    ]  ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T18:53:06.127

我想你正在寻找这样的东西：

```
(struct test (num) #:prefab)

(define s '((AK= #s(test 100)) (AV)))

(match s
  [`((AK= ,(struct test (val))) (AV))
   (displayln val)]) 
```

此外，一般来说，`eval`在这种情况下使用是非常不可取的。如有疑问，请勿使用`eval`. 有关详细说明，请参阅[此博客文章](http://blog.racket-lang.org/2011/10/on-eval-in-dynamic-languages-generally.html)。您可能还想查看有关[预制件](http://docs.racket-lang.org/guide/define-struct.html?q=prefab#(tech._prefab))和[模式匹配](http://docs.racket-lang.org/guide/match.html)的指南条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T19:01:50.697

此外，虽然它不在 match 的文档中，但 `((AK= #s(test ,val)) (AV)) 是一个有效的模式。

# java - 将重复分组直到特定计数

> ID：12645203
> 
> 赞同：0
> 
> 时间：2012-09-28T18:10:29.217
> 
> 标签：java, grouping

我有一些随机出现的 xml，其中包含 Ocount、Lnumber 以及其他数据。我创建了一个类来获取该数据。

我的问题是如何将具有相同**Lnumber(string) 的 xml 分组，直到它到达 Ocount(int)。**（具有相同 lnumber 的 xml 具有相同的 Ocount）。并最终发出一封电子邮件，告知已处理 xmls。

```
String readLine = FileHandler.checkListFile(sh.getShipmentHeader().getBillToCustomer());

            if (!readLine.isEmpty())
            {
                int orderCount = 0;
                int index = readLine.indexOf(";") + 1;

                String customerName = readLine.substring(index, readLine.indexOf(";", index)).trim();

                index = readLine.indexOf(";", index) + 1;
                String to = readLine.substring(index, readLine.length()).trim();

                if (!billMap.containsKey(sh.getShipmentHeader().getBillToCustomer()))
                    {
                    billMap.put(sh.getShipmentHeader().getBillToCustomer(), 1);
                    orderCount = 1;
                    }
                else
                    {
                    billMap.put(sh.getShipmentHeader().getBillToCustomer(), ((int) billMap.get(sh.getShipmentHeader().getBillToCustomer())) + 1);
                    orderCount = (int) billMap.get(sh.getShipmentHeader().getBillToCustomer());
                    } 

                outboundMessage += sh.getShipmentHeader().getOrderNumber() + li ;

                logger.info("On-Demand Outbound Export Info: " + orderCount + " processed out of " + sh.getShipmentHeader().getOrderCount() + 
                        " for " + customerName);

                if (orderCount == sh.getShipmentHeader().getOrderCount())
                    {
                    Email email = new Email();
                    billMap.remove(sh.getShipmentHeader().getBillToCustomer());
                    outboundMessage += li + "Total of #"+ sh.getShipmentHeader().getOrderCount() + " orders processed for "+ customerName + li ;
                    logger.info("On-Demand Email sent for " + customerName);
                    System.out.println(outboundMessage);
                    email.outboundEmail("TEST: Orders for " + customerName + " complete", outboundMessage, to);
                    outboundMessage = "";
                    email = null;
                    }} 
```

我已经为此工作了几天，我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:33:04.127

您似乎很难从 xmls 中获取信息。我建议使用 XStream [1]。它能够将对象序列化为 xml 并返回。通过使用 XStream，您可以从 xml 中获取 Object 并轻松比较变量（Lnumber 和 Ocount）。

如果您坚持使用此代码，我建议添加注释以通知我们您在做什么，但如果想要更简单的替代方法来使用 java 处理 xml 文件，我强烈建议使用 XStream 作为解决方案。

[1] [http://x-stream.github.io/](http://x-stream.github.io/)

# bash - 在命令行问题中输出 git repo 的脏状态

> ID：12645205
> 
> 赞同：0
> 
> 时间：2012-09-28T18:10:48.843
> 
> 标签：bash, .bash-profile

如果我在 git repo 的命令行中运行它

```
git status 2> /dev/null | grep -iw 'modified' 
```

我得到的输出

```
#   modified:   .rvmrc 
```

所以我的假设是，如果我将它插入到 if 语句中，我将得到正确的执行代码行

但是当我创建函数作为 .bash_profile 的一部分时，这是我拥有的代码：

```
## Prompt ##
path="$white\w$reset"
folder_name="$white\W$reset"
git_branch="\$(git branch 2>/dev/null | grep -e '\* ' | sed 's/^..\(.*\)/$red(\1)$reset/')"
rvm="$green(\$(~/.rvm/bin/rvm-prompt i v p))$reset"

# Checks if working tree is dirty
function _git_st {
  if [[ $(git status 2> /dev/null | grep -iw 'modified')  ]]; then
    echo "[x]"
  fi
}
git_st="$yellow`_git_st`$reset"

PS1="$rvm $folder_name $git_branch $git_st \$ " 
```

X 没有回显....我有点迷茫，不知道我做错了什么。

这是我得到的输出：

```
(ruby-1.9.2-p290) folder-git (master)  $ git status
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   .rvmrc
#
no changes added to commit (use "git add" and/or "git commit -a")
(ruby-1.9.2-p290) folder-git (master)  $ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:10:17.637

这样做的原因是因为您正在使用一个变量`git_st`来设置`PS1`，该变量将在设置时进行评估`PS1`。您可以尝试的是调用被调用的函数`_git_st`，而不是使用`git_st`ie try something on the lines of:
`PS1="$rvm $folder_name $git_branch \$(_git_st) \$ "`。
此外，您可能有兴趣知道`git`提供此类实用程序的更新版本的提供功能以及 bash 完成。如果可用，您可以查看`__git_ps1`功能。
希望这可以帮助！
PS：[这](https://stackoverflow.com/questions/4133904/ps1-line-with-git-current-branch-and-colors)是 SO 帖子，可能会提供一些使用`__git_ps1`. [这](http://fedoraproject.org/wiki/Git_quick_reference)是谷歌的快速搜索结果。

# html - HTML5 点对点视频？

> ID：12645212
> 
> 赞同：0
> 
> 时间：2012-09-28T18:11:29.877
> 
> 标签：html, video-streaming, websocket, html5-video, p2p

我很难找出 W3C 是否真的为点对点语音和视频指定了一些东西。

有几个旧的解决方案（2011），这里有几个博客和帖子说这些解决方案已经过时了。其中包括 Flash 10+ 中的 Adob​​e Cirrus / Stratus、Ericcson Lab 的 API，还有人说用于 HTML5 的 WebSockets API 尚未确定。

HTML5 或任何非 Adob​​e 技术是否支持 P2P 视频？WebSockets 是 HTML5 点对点的标准吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:12:29.390

[Bowser](https://labs.ericsson.com/apps/bowser)是索尼爱立信的网络浏览器。其中有默认的嵌入式 WebRTC。

![在此处输入图像描述](../Images/ddfd61ecf56717e8985833a354ad706d.png)

它适用于鲍泽

*   Firefox（默认忽略 webRTC）
*   Chrome（默认忽略 webRTC）
*   Internet Explorer（默认忽略 webRTC）

Firefox、Chrome、Internet Explorer 应该停止争吵，并在所有最新版本中嵌入 WebRTC 默认版本，因为索尼爱立信已经让 Bowser 来证明它并展示它是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T19:56:15.713

如果您在谈论 webrtc，可以在此处找到草稿

[w3c webrtc 草案](http://dev.w3.org/2011/webrtc/editor/webrtc.html)

# python - pyPandas 功能请求：反向/负 df.drop

> ID：12645216
> 
> 赞同：6
> 
> 时间：2012-09-28T18:11:46.360
> 
> 标签：python, pandas

我认为反向/负 dataframe.drop 功能将是一个非常有用的工具。有人对此有过克服吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T04:49:45.753

通常，我发现自己在获得选择的逆时使用[布尔索引](http://pandas.pydata.org/pandas-docs/stable/indexing.html#boolean-indexing)和波浪号运算符，而不是 df.drop()，尽管当布尔索引用于形成要删除的标签数组时，相同的概念适用于 df.drop . 希望有帮助。

```
In [44]: df
Out[44]: 
          A         B
0  0.642010  0.116227
1  0.848426  0.710739
2  0.563803  0.416422

In [45]: cond = (df.A > .6) & (df.B > .3)

In [46]: df[cond]
Out[46]: 
          A         B
1  0.848426  0.710739

In [47]: df[~cond]
Out[47]: 
          A         B
0  0.642010  0.116227
2  0.563803  0.416422 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T18:59:47.293

如果我理解正确，您可以通过在索引上使用“isin”进行索引来获得这种效果：

```
>>> df
         A         B         C
0  0.754956 -0.597896  0.245254
1 -0.987808  0.162506 -0.131674
2 -1.064639 -2.193629  1.814078
3 -0.483950 -1.290789  1.776827
4 -0.191055 -0.461204  0.412220
>>> df[df.index.isin([0, 2, 3])]   # Drop rows whose label is not in the set [0, 2, 3]
         A         B         C
0  0.754956 -0.597896  0.245254
2 -1.064639 -2.193629  1.814078
3 -0.483950 -1.290789  1.776827 
```

# php - Magento - 使用跟踪号发货时出现 500 内部服务器错误

> ID：12645218
> 
> 赞同：0
> 
> 时间：2012-09-28T18:12:03.533
> 
> 标签：php, magento, internal-server-error

我的 Magento 1.6.2 有问题

当我在另一个后端进行基本装运时，一切正常。

但是当我想添加一个跟踪号码并单击发送 magento 时会显示一个白屏。Firebug 说：500 内部服务器错误

白屏的url：/index.php/admin/sales_order_shipment/save/order_id/293/key/KEYNUMBER/

谁能帮我？因为我也想利用这个未来……

更新：错误日志：

```
PHP Fatal error:  Call to a member function getStoreId() on a non-object in /var/www/vhosts/liefstoereigenwijs.nl/magento-test/app/code/community/Vianetz/AdvancedInvoiceLayout/Model/Order/Pdf/Shipment.php on line 24
PHP Warning:  spl_autoload(): open_basedir restriction in effect. File(mage.inc) is not within the allowed path(s): (/var/www/vhosts/liefstoereigenwijs.nl/:/tmp/) in /var/www/vhosts/liefstoereigenwijs.nl/magento-test/app/code/core/Mage/Core/functions.php on line 244
PHP Warning:  spl_autoload(): open_basedir restriction in effect. File(mage.php) is not within the allowed path(s): (/var/www/vhosts/liefstoereigenwijs.nl/:/tmp/) in /var/www/vhosts/liefstoereigenwijs.nl/magento-test/app/code/core/Mage/Core/functions.php on line 244
PHP Fatal error:  Class 'Mage' not found in /var/www/vhosts/liefstoereigenwijs.nl/magento-test/app/code/core/Mage/Core/functions.php on line 0 
```

一块高级发票布局文件：

```
<?php
/**
 * AdvancedInvoiceLayout Order Shipment PDF model
 *
 * @category   Vianetz
 * @package    Vianetz_AdvancedInvoiceLayout
 * @author     Christoph Massmann <C.Massmann@vianetz.com>
 * @license    http://www.vianetz.com/license
 */
class Vianetz_AdvancedInvoiceLayout_Model_Order_Pdf_Shipment extends Vianetz_AdvancedInvoiceLayout_Model_Order_Pdf_Abstract
{
    public function getPdf($shipments = array())
    {   
        $this->_beforeGetPdf();
        $this->_initRenderer('shipment');

        $this->pdf = new Zend_Pdf();
        $style = new Zend_Pdf_Style();
        $this->_setFontBold($style, 10);

        foreach ($shipments as $shipment) {
            if ($shipment->getStoreId()) {
                Mage::app()->getLocale()->emulate($shipment->getStoreId());
                Mage::app()->setCurrentStore($invoice->getStoreId());
            }
            $this->page = $this->_newPage($this->pdf, $shipment->getStore());

            $order = $shipment->getOrder();

            Mage::helper('advancedinvoicelayout')->loadConfig($this, $shipment->getStore()); 
```

第 24 行是：

```
Mage::app()->setCurrentStore($invoice->getStoreId()); 
```

谁能告诉我出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:24:06.807

PHP 内存不足，[Magento 至少需要 256MB](http://www.magentocommerce.com/system-requirements)。通过创建然后查看显示以下内容的 PHP 文件来检查当前配置的内容：

```
<?php phpinfo(); 
```

Magento 的默认 .htaccess 文件将内存限制设置为 256MB。如果这没有生效，那么您需要修改服务器的 php.ini 文件。如果限制是正确的，那么尝试再增加一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T09:07:38.010

我已经在 Vianetz 提交了一份错误报告。谢谢大家帮助我朝着正确的方向前进。

# java - 既然他们停止为 Eclipse 开发 derby 插件，是否可以在 Eclipse 中使用来自 apache 的 derby？

> ID：12645223
> 
> 赞同：1
> 
> 时间：2012-09-28T18:12:39.427
> 
> 标签：java, database, derby

我想使用 apache 中的 Derby，以便在我目前正在开发的桌面应用程序中包含数据库管理。

不幸的是，我发现他们已经停止开发这个插件，我在网上阅读的所有教程都参考了这个插件。

所以我的问题是，如何在 Eclipse 上使用最新版本的 Derby？我应该遵循哪些步骤？我希望我的应用程序是独立的并且易于转移。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T18:31:40.213

Apache Derby 就像其他通过 JDBC 提供接口的数据库一样。您不需要特定的插件来连接 Derby。只需使用通常的 JDBC 例程即可。

基本步骤：

1.  如果你想使用最新的 Derby 版本，首先你需要从[这里下载](http://db.apache.org/derby/derby_downloads.html)
2.  您需要在类路径中包含该 jar。
3.  您只需要使用 JDBC 建立连接并执行查询，如[Oracle JDBC Tutorial](http://docs.oracle.com/javase/tutorial/jdbc/basics/connecting.html)中更好的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:38:22.623

同上婴儿车。

我在使用 Eclipse 开发的 Java 应用程序中使用 Derby，但我不知道有插件。我连接到 Derby 就像连接到任何其他数据库一样。我使用 Derby 命令行界面来管理表。\

（我希望在 Derby 中看到其他 db 的一个特性：具有 SQL 扩展来显示 db 元数据，例如 MySql 的“show”和“describe”命令。Derby 在命令行界面中有这些，但它们显然已经实现那里而不是 SQL 引擎本身，所以你不能在 CLI 之外使用它们。太糟糕了。当我开发时，我经常在应用程序中构建一个临时查询屏幕，让我可以输入并执行任意查询。 （不，我不会将它部署到公共网站。）但我离题了。）

我不知道插件对你有什么作用。我从来没有为任何数据库使用过 Eclipse 插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T15:48:15.173

该插件仍以源代码形式提供，构建它的说明可在 Derby 网站上找到：http: [//svn.apache.org/viewvc/db/derby/code/trunk/plugins/eclipse/Readme.txt ?view=标记](http://svn.apache.org/viewvc/db/derby/code/trunk/plugins/eclipse/Readme.txt?view=markup)

不时更改构建插件的说明；您可能希望查看此问题的状态以获取进一步更新：[https ://issues.apache.org/jira/browse/DERBY-5272](https://issues.apache.org/jira/browse/DERBY-5272)

# scala - 为什么使用 toInt 方法将 '1' char 转换为 int 结果为 49？

> ID：12645225
> 
> 赞同：0
> 
> 时间：2012-09-28T18:13:03.567
> 
> 标签：scala

我想将 char 转换为 int 值。我对这种`toInt`工作方式有点困惑。

```
println(("123").toList)         //List(1, 2, 3)
("123").toList.head             // res0: Char = 1
("123").toList.head.toInt       // res1: Int = 49 WTF?????? 
```

49无缘无故随机弹出。如何以正确的方式将 char 转换为 int？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T20:24:52.763

对于简单的数字到整数的转换，有`asDigit`：

```
scala> "123" map (_.asDigit)
res5: scala.collection.immutable.IndexedSeq[Int] = Vector(1, 2, 3) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T18:14:52.123

使用 Integer.parseInt("1", 10)。请注意，这里的 10 是基数。

```
val x = "1234"
val y = x.slice(0,1)
val z = Integer.parseInt(y)
val z2 = y.toInt //equivalent to the line above, see @Rogach answer
val z3 = Integer.parseInt(y, 8) //This would give you the representation in base 8 (radix of 8) 
```

49 不会随机弹出。这是“1”的ASCII表示。见[http://www.asciitable.com/](http://www.asciitable.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T18:15:30.437

`.toInt`会给你ascii值。这可能是最容易写的

```
"123".head - '0' 
```

如果你想处理非数字字符，你可以做

```
c match {
  case c if '0' <= c && c <= '9' => Some(c - '0')
  case _ => None
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T20:01:39.793

你也可以使用

```
"123".head.toString.toInt 
```

# apache-flex - Ant Build for flex 文件需要很多时间

> ID：12645230
> 
> 赞同：0
> 
> 时间：2012-09-28T18:13:27.913
> 
> 标签：apache-flex, ant

Ant build 为我的项目消耗了大量的时间和内存。特别是 flex 和 groovy 编译占用了大部分时间。使用 Aspect 连接的 Java 构建在 3-5 分钟内完成，但 flex 和 groovy 组件一起需要 120 分钟。当我从 bat 文件运行 Ant 时，ANT_OPTS 设置是：

```
set ANT_OPTS=-Xms512m -Xmx1024m -XX:MaxPermSize=256m -XX:ReservedCodeCacheSize=128m 
```

系统配置是

```
Ant 1.6
JDK 1.6
Flex SDK 3.6a
RAM 8 GB 
```

在构建期间，我收到以下警告：

```
Java HotSpot(TM) Client VM warning: CodeCache is full. Compiler has been disabled.
Java HotSpot(TM) Client VM warning: Try increasing the code cache size using -XX
:ReservedCodeCacheSize= 
```

我注意到 flex 编译器 [mxmlc] 构建所有应用程序文件，无论它们是否被更改。有什么办法可以让它更快吗？目前构建我的应用程序需要 120 分钟，在此期间我无法使用我的机器。

# iphone - 自定义 UIView 覆盖 iPhone 上的 UITabBar 而不是 iPad

> ID：12645234
> 
> 赞同：1
> 
> 时间：2012-09-28T18:13:53.527
> 
> 标签：iphone, ipad, uiview, uitabbar, uiwindow

我正在创建一个覆盖窗口的自定义 uiView。它的行为有点像导航控制器中的诱饵 uiview。所以我不得不这样做来覆盖导航栏......长篇大论......

这是它的设置方式。

```
self.searchPopDown.frame = CGRectMake(0, 20, self.navigationController.view.frame.size.width, self.navigationController.view.frame.size.height-20);

    self.searchPopDown.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

20是为了补偿状态栏。

然后我只需将视图作为子视图添加到应用程序窗口。

```
//this will add the view ontop of a modalViewController and support rotation!
UIWindow* window = [UIApplication sharedApplication].keyWindow;
if (!window) {
    window = [[UIApplication sharedApplication].windows objectAtIndex:0];
}

if ([[[window subviews] objectAtIndex:0] isKindOfClass:[SVProgressHUD class]]){
    //There is a chance that the window will be the SVProgressHUD in this case we need to get the main window.

    window = [[UIApplication sharedApplication].windows objectAtIndex:0];
}
    [[[window subviews] objectAtIndex:0] addSubview:self.searchPopDown]; 
```

所有这些工作都很棒而且花花公子。但是我注意到了一些奇怪的事情。在 iPhone 上，这个视图最终会被调整大小以覆盖我应用程序底部的 UITabBar。但在 iPad 上，它会正确调整大小以补偿 UITabBar。任何想法为什么？

谢谢

==================

以下是描述该问题的一些屏幕截图。这就是当视图加载到所有内容的假视图时的样子。视图显示（就用户而言，只是视图和导航栏上的按钮略有变化。当您搜索此假视图时消失，显示下面的真实视图和搜索结果。在 ipad 上，假视图没有'不要覆盖标签栏。为什么它不在iphone上也这样做？

![iphone标签栏被底部覆盖](../Images/50ede05cf2494add54b80a65ab1a269a.png)

![视图按预期消失](../Images/75a6d5bf3201d93c26a28fb86b07f7f3.png)

![ipad版本正常工作](../Images/c2ba540583b7718b14e0ac6f57d88125.png)

==========

编辑 2 另一个奇怪的事情。我正在生成日志消息以获取导航控制器的高度。它会改变 49，具体取决于我是正常显示还是显示为模态视图并且没有标签栏。

所以日志说 431 应该是正确的高度。我进入界面生成器并设置了一个简单的粉红色视图，测量值为 431，它看起来很棒:) 但是当我手动将大小设置为 431 时，它不起作用。我必须将大小设置为 298 才能使其正常工作......奇怪......

看到粉红色的酒吧了吗？它实际上是 431 高……日志说这就是我的观点……但事实并非如此：/

![粉色尺寸对比](../Images/85dccce72d6e334577e4f08c99bcd621.png)

=============

编辑：3

我已将其追溯到图像背景，气泡徽标的大小调整不正确...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:59:18.330

我不得不检查图像视图所在的父视图上的“剪辑子视图”......解决了问题......

# c - C从fork调用的多个exec中读取stdout

> ID：12645236
> 
> 赞同：3
> 
> 时间：2012-09-28T18:14:01.237
> 
> 标签：c, exec, fork, pipe

在下面的代码中，一个进程创建了一个子进程（**fork()**），然后该子进程通过调用**exec()**来替换自己。exec的**标准输出**是写在**管道**而不是 shell 中的。然后父进程从管道中读取 exec 使用 **while (read(pipefd[0], buffer, sizeof(buffer)) != 0) 写入的内容**

有人可以告诉我如何做与上述完全相同的事情，但有 N 个子进程（如上所述用 exec 替换自己）。

```
int pipefd[2];
pipe(pipefd);

if (fork() == 0)
{
    close(pipefd[0]);    // close reading end in the child

    dup2(pipefd[1], 1);  // send stdout to the pipe
    dup2(pipefd[1], 2);  // send stderr to the pipe

    close(pipefd[1]);    // this descriptor is no longer needed

    exec(...);
}
else
{
    // parent

    char buffer[1024];

    close(pipefd[1]);  // close the write end of the pipe in the parent

    while (read(pipefd[0], buffer, sizeof(buffer)) != 0)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T20:24:27.703

我找到了答案。我制作了一组管道，以便一个进程不会覆盖另一个进程的输出。

这是我的代码。你发现有什么错误吗？

```
#include <signal.h>
#include <stdio.h>
#include <sys/types.h>
#include <unistd.h>
#include <stdlib.h>
#include <sys/time.h>

#define N 10

int main(int argc, char *argv[]) {
    ssize_t readlen;
    int pipefd[N][2];
    int i;
    for (i = 0; i < N; i++) {
        pipe(pipefd[i]);
    }

    int pid = getpid();

    for (i = 0; i < N; i++) {
        if (fork() == 0) //The parent process will keep looping
        {

            close(pipefd[i][0]);    // close reading end in the child

            dup2(pipefd[i][1], 1);  // send stdout to the pipe
            dup2(pipefd[i][1], 2);  // send stderr to the pipe

            close(pipefd[i][1]);    // this descriptor is no longer needed

            char b[50];
            sprintf( b, "%d", i);

            execl("/bin/echo", "echo", b,NULL);

        }
    }

    if (pid == getpid()) {

        // parent

        char buffer[1024];

        for (i = 0; i < N; i++) {
            close(pipefd[i][1]);  // close the write end of the pipe in the parent

            while ((readlen=read(pipefd[i][0], buffer, sizeof(buffer))) != 0)
            {
                        buffer[readlen] = '\0';
            }

            printf("%s\n",buffer);

        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:55:24.147

也许这段代码可以完成这项工作：

```
const int N = 10; //Number of child processes
int pipefd[2];
pipe(pipefd);
int i;
for (i = 0; i < N; i++) {
    if (fork() == 0) //The parent process will keep looping
    {
        close(pipefd[0]);    // close reading end in the child

        dup2(pipefd[1], 1);  // send stdout to the pipe
        dup2(pipefd[1], 2);  // send stderr to the pipe

        close(pipefd[1]);    // this descriptor is no longer needed

        exec(...);
    }
}

// parent

char buffer[1024];

close(pipefd[1]);  // close the write end of the pipe in the parent

while (read(pipefd[0], buffer, sizeof(buffer)) != 0)
{
} 
```

警告：输出将是混合的。如果您希望所有进程在不混合的情况下转储数据，那么您应该设法同步进程（例如，通过公共锁）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T19:11:54.767

我认为您可以在文件系统的任何位置（如本地套接字）创建命名通道并将所有接收到的数据读取到父进程。所以子进程必须将他们获得的数据写入这个通道。它将是类 Unix 架构。

# ios - 在 Core Data 应用程序中建模短期对象

> ID：12645238
> 
> 赞同：1
> 
> 时间：2012-09-28T18:14:06.117
> 
> 标签：ios, core-data

我有一个应用程序可以与服务器对话以获取`Item`当前用户的一些项目（类）并存储它。到现在为止还挺好。

我想实现搜索，它本质上返回了一组 Item 对象，但显然我不想保留每个搜索结果。另一个用例是服务器 API 有不同的端点，如推荐/新/即将到来/返回相同的项目对象，但在不同的上下文中，所以我想以某种方式区分它们。

我的第一个想法是使用一次性托管上下文，从那里的 API 加载对象，进行获取，当用户完成后，只需销毁上下文。一般来说这是个好主意吗？它节省了代码，因为我的大多数 VC 已经与核心数据进行了交流。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:46:14.653

与其把 Core Data 的整个美妙的基础设施扔掉，不如利用它来实现你的目的。

*   向您的实体添加时间戳属性，并使用它有选择地显示搜索结果，甚至从旧项目中清除您的商店。

*   向您的实体添加类别属性并在搜索时按类别过滤。

两者都可以通过`NSPredicate`添加到`NSFetchRequest`. 例如：

```
fetchRequest.predicate = [NSPredicate predicateWithFormat:
   @"timestamp > %@", [[NSDate date] dateByAddingTimeInterval:numberOfSeconds]]; 
```

或者

```
fetchRequest.predicate = [NSPredicate predicateWithFormat:
  @"category = %@", @"new"]; 
```

# file - 比较 2 个文件中的特定列并返回 common (UNIX)

> ID：12645242
> 
> 赞同：0
> 
> 时间：2012-09-28T18:14:26.417
> 
> 标签：file, unix

我有两个文件：

档案一：

```
apple 123 jfglkfdg
banana 567 kxflkjfkg
orange 431 dkfgd
strawberry 756 kfljxkg 
```

文件 B：

```
banana 8712 sjflgkj
strawberry 812 mdflkgm 
```

我只想比较两个文件的第 1 列并在第三个文件中返回共同的东西。

所以我的输出文件应该是这样的：

输出文件 ：

```
banana 
strawberry 
```

我该怎么办？有单行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:21:40.500

尝试这个：

```
cut -d' ' -f1 filea|sort>tempfile; cut -d' ' -f1 fileb|sort|join tempfile -; rm tempfile; 
```

# jboss - 我想制作一个在 JBoss 中运行的 UDP 服务器/侦听器

> ID：12645245
> 
> 赞同：1
> 
> 时间：2012-09-28T18:14:34.310
> 
> 标签：jboss, udp, netty

我必须实现侦听 UDP 数据包并将其内容保存到数据库的软件。

如果它可以在 JBoss 中运行会很方便，因为这是我们现在使用的基础架构。

我已经看到 Netty 非常适合对侦听器部分进行编程。

有没有办法在 JBoss 中使用“嵌入”的 Netty？我在网上上下搜索过，我找到的示例都是针对独立侦听器程序的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:34:06.643

当然，但是您必须澄清*“嵌入在 JBoss 中*”的含义。如果您正在编写标准 EJB 应用程序，只需将 Netty 引导代码放入`@PostConstruct`单例会话 bean 中，然后将其销毁`@PreDestroy`。

如果它是一个 Web 应用程序，请使用任何 servlet 的`init()`方法（必须在启动时急切地创建 servlet）。

请注意，EJB 规范不允许创建自定义线程和监听任意端口——Netty 违反了这两个要求。但 JBoss 不会强制执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T14:34:45.053

听起来 JCA 可能是合适的路径。

# ios - iOS：setFrame 不再适用于 viewDidLoad 或 viewWillAppear

> ID：12645248
> 
> 赞同：9
> 
> 时间：2012-09-28T18:14:57.287
> 
> 标签：ios, ios6

我更喜欢禁用`autoresizesSubviews`并使用`setFrame`来放置我的所有子视图。从 iOS 6 开始，情况似乎发生了很大变化。当我在视图中调用 setFrame 时`viewDidLoad`，没有效果。我试过了`viewWillAppear`；一样。

一个 setFrame 调用将在 中工作`willAnimateRotationToInterfaceOrientation`，但最初不像在 iOS 5 中那样调用它。

有人可以澄清一下我应该从哪里布局我的观点吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-28T18:28:24.317

我猜你想从 UIViewController 布局你的视图。您是否尝试过在[viewDidLayoutSubviews](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/viewDidLayoutSubviews)中执行布局任务：

```
- (void)viewDidLayoutSubviews 
```

根据苹果的文档：

> 您的视图控制器可以覆盖此方法以在视图布置其子视图后进行更改。

由于您的视图本身不对其子视图进行布局（您不使用 autosize、autolayout 或 layoutSubViews:)，您可以在此方法中执行布局任务。

尽管如此，优雅的方法是使用自定义父 UIView 并在那里执行所有布局，覆盖 UIView `layoutSubViews:`（除非您动态添加/删除视图）。引用 Apple 关于[“视图控制器如何参与视图布局过程”](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/AdoptingaFull-ScreenLayout/AdoptingaFull-ScreenLayout.html#//apple_ref/doc/uid/TP40007457-CH13-SW2)的文档：

> **理想情况下，视图本身执行所有必要的工作来重新定位自己，而根本不需要视图控制器参与该过程。**但是，如果视图控制器动态添加和删除视图，则 Interface Builder 中的静态布局可能无法实现。在这种情况下，视图控制器是控制流程的好地方，因为视图本身通常只有场景中其他视图的有限图片。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-02T11:03:29.987

如果在 Interface Builder 中取消选中 Autolayout 选项，则可以使用`setFrame`in 。`viewDidLoad`如果您需要使用自动布局，您需要在`viewDidLayoutSubviews:`.

![在 Interface Builder 中取消选中自动布局](../Images/de1c0be0e7b42a10e8956a5fb74f696c.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T08:58:48.370

关于“要求视图展示自己对我来说没有意义。视图无权说出它们应该去哪里。这就是控制器的角色，不是吗？”。我认为答案通常是否定的。它是父视图（不是视图控制器），它通常扮演布置它自己的子视图的角色。它通过使用 autoresizingMask 或 autolayout（仅限 iOS 6）来实现。或者您可以通过覆盖`-layoutSubviews`父视图的方法以编程方式进行布局。

当然，就像 Imre 提到的那样，控制器也可以通过覆盖来参与布局过程`- (void)viewDidLayoutSubviews`。当我不想继承视图控制器的顶级视图以保持简单时，我经常使用这种方法。

最后，我发现这篇[文章](http://kevin.dew.name/post/18579273258/where-to-progmatically-lay-out-views-in-ios-5-and)非常有用。即使有一些小错误，这篇文章也提供了视图布局过程的大图。

# c++ - 在c中登录注册

> ID：12645250
> 
> 赞同：0
> 
> 时间：2012-09-28T18:15:12.090
> 
> 标签：c++, file-io, login

我正在用 C++ 编写一个基于简单登录/注册系统但涉及文件输入/输出的程序。

一个想法是为每个注册的用户创建一个新文件，在该文件中放置/更新用户的数据。但这似乎并不理想，因为可能有成千上万的用户。

另一个想法是将用户信息以 JSON 格式放置，例如：

> {“moin”：{“pw”：“moinpw”，“电子邮件”：“moin@example.com”，“名称”：“Muhammad Moin Uddin”}}

然后写入/更新它。它需要一个文件作为数据库。为此，我搜索了 JSON 解析器并尝试[了 JsonCpp](http://jsoncpp.sourceforge.net)，但由于我是 C++ 领域的学习者，所以在运行该程序时没有运气。

我正在尝试下面的代码：

> int main() { Json::Value root;

```
 ifstream file("json.json");
   file >> root;
   cout << root;

system("pause");

return 0; 
```

> }

但是遇到了很多错误。我已经包含了所有需要的头文件。

请提出一些更好的解决方案，或者只是指导我让这个 JSON 东西运行。

提前致谢。

> [http://jsoncpp.sourceforge.net](http://jsoncpp.sourceforge.net)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:27:40.190

我建议你看看 SQLite 包，特别是如果你认为你将拥有成千上万的用户（记录）。

这是[SQLite C/C++ 接口简介](http://www.sqlite.org/cintro.html)。

# php - 如何使用 php 从 ftp 文件夹中获取图像的 url

> ID：12645252
> 
> 赞同：1
> 
> 时间：2012-09-28T18:15:14.617
> 
> 标签：php, html, image, ftp

我想获取我的 ftp 服务器上传目录中的图像 URL，并使用 PHP 脚本将它们保存到数组中。在我这样做之后，我想将这些图像显示为缩略图。这就是我正在尝试的

```
<?php 

$conn = ftp_connect("ftp.something.com") or die("Could not connect");
ftp_login($conn,"user","pass");

$images = array(ftp_nlist($conn,"upload"));
echo '$images';

for($i=0;$i<20;$i++) {
    echo"<img src='$images[$i]'>";
}
ftp_close($conn);

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T18:22:27.543

[`ftp_nlist`](http://php.net/manual/en/function.ftp-nlist.php)已经返回一个数组，所以如果你把它放在一个数组中，你会得到一个多维数组，只有一个元素在索引 0 处。

你应该只使用：

```
$images = ftp_nlist($conn,"upload"); 
```

然后检查其内容：

```
var_dump($images); 
```

另请注意，要在 html 中使用您的列表，您需要添加服务器地址（如果它不在同一服务器上）和路径：

```
echo"<img src='http://www.some_server.com/upload/{$images[$i]}'>"; 
```

# haskell - 类型类函数调用的 GHC 代码生成

> ID：12645254
> 
> 赞同：21
> 
> 时间：2012-09-28T18:15:27.487
> 
> 标签：haskell, code-generation, ghc, typeclass

在 Haskell 中要定义类型类的实例，您需要提供类型类所需的函数字典。即要定义 的实例`Bounded`，您需要为`minBound`和提供定义`maxBound`。

出于这个问题的目的，让我们将此字典称为`vtbl`类型类实例。让我知道这是否是一个糟糕的类比。

我的问题集中在当我调用类型类函数时，我可以从 GHC 中获得什么样的代码生成。在这种情况下，我看到了三种可能性：

1.  用于查找实现功能的 vtbl 查找在运行时已关闭
2.  vtbl 查找在编译时完成，并在生成的代码中发出对实现函数的直接调用
3.  vtbl 查找在编译时完成，实现函数在调用站点内联

我想了解这些情况何时发生 - 或者是否还有其他可能性。

此外，类型类是否在单独编译的模块中定义而不是“主”编译单元的一部分是否重要？

在可运行的程序中，Haskell 似乎知道程序中所有函数和表达式的类型。因此，当我调用类型类函数时，编译器应该知道 vtbl 是什么以及确切调用哪个实现函数。我希望编译器至少生成对实现函数的直接调用。这是真的？

（我在这里说“可运行程序”是为了将其与编译您不运行的模块区分开来。）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-28T18:57:42.367

与所有好的问题一样，答案是“视情况而定”。经验法则是任何类型类多态代码都有运行时成本。然而，库作者在使用 GHC 的重写规则消除这种成本方面具有很大的灵活性，特别是有一个[`{-# SPECIALIZE #-}`编译指示](http://www.haskell.org/ghc/docs/latest/html/users_guide/pragmas.html#specialize-pragma)可以自动创建多态函数的单态版本，并在可以推断出多态函数用于单态函数时使用它们。类型。（我认为这样做的代价是库和可执行文件的大小。）

`-ddump-simpl`您可以使用 ghc 的标志回答任何特定代码段的问题。例如，这是一个简短的 Haskell 文件：

```
vDouble :: Double
vDouble = 3
vInt = length [2..5]
main = print (vDouble + realToFrac vInt) 
```

如果没有优化，您可以看到 GHC 在运行时进行字典查找：

```
Main.main :: GHC.Types.IO ()
[GblId]
Main.main =
  System.IO.print
    @ GHC.Types.Double
    GHC.Float.$fShowDouble
    (GHC.Num.+
       @ GHC.Types.Double
       GHC.Float.$fNumDouble
       (GHC.Types.D# 3.0)
       (GHC.Real.realToFrac
          @ GHC.Types.Int
          @ GHC.Types.Double
          GHC.Real.$fRealInt
          GHC.Float.$fFractionalDouble
          (GHC.List.length
             @ GHC.Integer.Type.Integer
             (GHC.Enum.enumFromTo
                @ GHC.Integer.Type.Integer
                GHC.Enum.$fEnumInteger
                (__integer 2)
                (__integer 5))))) 
```

...相关位是`realToFrac @Int @Double`. 另一方面`-O2`，您可以看到它静态地进行字典查找并内联实现，结果是一次调用`int2Double#`：

```
Main.main2 =
  case GHC.List.$wlen @ GHC.Integer.Type.Integer Main.main3 0
  of ww_a1Oq { __DEFAULT ->
  GHC.Float.$w$sshowSignedFloat
    GHC.Float.$fShowDouble_$sshowFloat
    GHC.Show.shows26
    (GHC.Prim.+## 3.0 (GHC.Prim.int2Double# ww_a1Oq))
    (GHC.Types.[] @ GHC.Types.Char)
  } 
```

库作者也可以选择将多态函数重写为对单态函数的调用，而不是内联单态函数的实现；这意味着您提出的*所有*可能性（以及更多）都是可能的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-29T12:30:22.893

如果编译器可以在编译时“告诉”您正在使用的实际类型，那么方法查找会在编译时发生。否则它会在运行时发生。如果查找发生在编译时，方法代码*可能会*被内联，具体取决于方法的大小。（这也适用于常规函数：如果编译器知道您正在调用哪个函数，如果该函数“足够小”，它将内联它。）

例如，考虑`(sum [1 .. 10]) :: Integer`。在这里，编译器静态知道该列表是一个 take 列表`Integer`，因此它可以内联`+`函数 for `Integer`。另一方面，如果你做类似的事情

```
foo :: Num x => [x] -> x
foo xs = sum xs - head x 
```

然后，当您调用 时`sum`，编译器不知道您使用的是什么类型。（这取决于赋予的类型`foo`），因此它不能进行任何编译时查找。

另一方面，使用`{-# SPECIALIZE #-}`pragma，您可以执行类似的操作

```
{-# SPECIALIZE foo:: [Int] -> Int #-} 
```

这样做是告诉编译器编译`foo`输入是`Int`值列表的特殊版本。这显然意味着*对于该版本*，编译器可以在编译时进行所有方法查找（并且几乎可以肯定将它们全部内联）。现在有两个版本`foo`- 一个适用于任何类型并进行运行时类型查找，另一个仅适用于`Int`，但 [可能] 快得多。

当你调用`foo`函数时，编译器必须决定调用哪个版本。如果编译器可以在编译时“告诉”您想要该`Int`版本，它就会这样做。如果它不能“告诉”你将使用什么类型，它将使用较慢的任何类型版本。

请注意，您可以对单个函数进行多个专业化。例如，你可以做

```
{-# SPECIALIZE foo :: [Int] -> Int #-}
{-# SPECIALIZE foo :: [Double] -> Double #-}
{-# SPECIALIZE foo :: [Complex Double] -> Complex Double #-} 
```

现在，只要编译器知道您正在使用其中一种类型，它就会使用为该类型硬编码的版本。但是如果编译器不能告诉你使用的是什么类型，它就永远不会使用专门的版本，而且总是使用多态版本。（例如，这可能意味着您需要专门化调用 的函数`foo`。）

如果您浏览编译器的核心输出，您可能可以准确地弄清楚它在任何特定情况下做了什么。不过，您可能会发疯似的发疯……

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-30T01:56:45.787

正如其他答案所描述的，任何这些都可能发生在不同的情况下。对于任何特定的函数调用，唯一确定的方法是查看生成的内核。也就是说，在某些情况下，您可以很好地了解会发生什么。

**在单态类型上使用类型类方法。**

当在编译时类型完全已知的情况下调用类型类方法时，GHC 将在编译时执行查找。例如

```
isFive :: Int -> Bool
isFive i = i == 5 
```

这里编译器知道它需要`Int`s Eq 字典，所以它发出代码来静态调用函数。该调用是否被内联取决于 GHC 通常的内联规则，以及`INLINE`编译指示是否适用于类方法定义。

**暴露多态函数**

如果多态函数从已编译的模块中公开，则基本情况是需要在运行时执行查找。

```
module Foo (isFiveP) where

isFiveP :: (Eq a, Num a) => a -> Bool
isFiveP i = i == 5 
```

GHC 实际所做的是将其转换为形式的函数（或多或少）

```
isFiveP_ eqDict numDict i = (eq_op eqDict) i (fromIntegral_fn numDict 5) 
```

所以函数查找需要在运行时执行。

无论如何，这是基本情况。实际发生的是 GHC 在跨模块内联方面可能非常激进。 `isFiveP`足够小，可以内联到调用站点。如果可以在调用站点确定类型，则字典查找将全部在编译时执行。即使多态函数没有在调用站点直接内联，由于 GHC 的常用函数转换，字典查找仍可能在编译时执行，如果代码曾经到达函数（带有类字典参数）可以的形式应用于静态已知的字典。

# wpf - 在 VisualBrush 内部时忽略画布背景

> ID：12645257
> 
> 赞同：4
> 
> 时间：2012-09-28T18:15:32.963
> 
> 标签：wpf, xaml, background, drawing

鉴于此 XAML：

```
<Style TargetType="PasswordBox">
    <Setter Property="Background">
        <Setter.Value>
            <VisualBrush TileMode="Tile"
                         Viewport="0,0,10,10" ViewportUnits="Absolute">
                <VisualBrush.Visual>
                    <Canvas Background="{x:Static SystemColors.WindowBrush}">
                        <Path Data="M0,0 L10,10 M0,10 L10,0">
                            <Path.Stroke>
                                <SolidColorBrush Color="{x:Static SystemColors.HighlightColor}"/>
                            </Path.Stroke>
                        </Path>
                    </Canvas>
                </VisualBrush.Visual>
            </VisualBrush>
        </Setter.Value>
    </Setter>
    ... 
```

画布背景被忽略，而是在对 PasswordBox 后面的表单透明的背景上可见路径。那么我应该在哪里设置“背景的背景”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T18:32:57.593

问题是`Canvas`没有大小。

将其更改为此，您应该会看到它：

```
<Canvas Background="{x:Static SystemColors.WindowBrush}"
        Width="10"
        Height="10"> 
```

要减少对这些维度的引用数量，您可以将它们声明为资源。由于您正在处理正方形，因此可以将其减少到一个值：

```
 <Grid.Resources>
        <System:Double x:Key="Width">10</System:Double>
        <System:Double x:Key="Height">10</System:Double>
        <Style TargetType="PasswordBox">
            <Setter Property="Background">
                <Setter.Value>
                    <VisualBrush TileMode="Tile"
                                 ViewportUnits="Absolute">
                        <VisualBrush.Viewport>
                            <Rect Width="{StaticResource Width}"
                                  Height="{StaticResource Height}" />
                        </VisualBrush.Viewport>
                        <VisualBrush.Visual>
                            <Canvas Background="{x:Static SystemColors.WindowBrush}" 
                                    Width="{StaticResource Width}"
                                    Height="{StaticResource Height}" > 
```

当然，如果你绑定到一个视图模型，你也可以通过绑定来驱动维度。

# java - 从 Hibernate 本机查询的结果中获取动态生成的列名

> ID：12645258
> 
> 赞同：4
> 
> 时间：2012-09-28T18:15:36.237
> 
> 标签：java, sql-server-2008, hibernate

我正在使用 Hibernate 本机方法执行存储过程，此存储过程根据另一个表 ID 创建列名。所以它的列看起来像这样：

> | 编号 | ...其他一些列... | 姓名 | c_1 | c_2 | c_4 | c_.. |

如果我称它为`Query.getResultList()` 返回`List<Object[]>`，并且我不知道列名。我必须知道列名（和相应的列索引）才能继续我的进一步业务逻辑。我也不能使用`EntityManager.createNativeQuery(String s, Class aClass)`，因为它不是一个 POJO 类。

目前我`List<Object[]>`没有问题，但我需要，例如，`Map<String,Object[]>` 列名作为键，列值作为对象数组。

如何获取所有列名及其值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T09:13:34.347

最后，找到了解决方案，我将与您分享（也许对某人有帮助）。这是我所做的：

*   我在我的应用程序中添加了 Spring JDBC Support，然后，
*   I used Spring SimpleJdbcTemplate Querying, there is a method: [`SimpleJdbcDaoSupport.getSimpleJdbcTemplate().queryForList(nativeQuery)`](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jdbc/core/simple/SimpleJdbcTemplate.html#queryForList%28java.lang.String,%20java.lang.Object...%29) which returns `List<Map<String,Object>>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T19:49:51.557

（这只是一个想法，我没有测试过。它需要 Criteria API。）

如果你设法得到结果 as `List<javax.persistence.Tuple>`，你可以拿一个`Tuple`并调用`getElements()`它——你会得到一个`TupleElement<?>`你可以调用的 s列表`getAlias()`。大概这将是列名。但我不是 100% 确定，如果没有返回元组（结果），它就行不通，但我认为值得一试。见[9.2。元组条件查询](https://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/querycriteria.html#querycriteria-tuple)。

对于这种方法，这可能会有所帮助：

*   [从 Java / JPA 调用存储过程](https://stackoverflow.com/questions/3572626/calling-stored-procedure-from-java-jpa)
*   [如何使用带有 jpa 的 spring 调用存储过程](https://stackoverflow.com/questions/7886401/how-can-i-call-stored-procedure-using-spring-with-jpa)

# javascript - 在 Google 应用程序脚本中获取 json 数组中的键-> 值

> ID：12645263
> 
> 赞同：1
> 
> 时间：2012-09-28T18:16:00.433
> 
> 标签：javascript, json, google-apps-script

在 Google Apps 脚本中，我得到了一组 JSON 对象。如果我想访问“id：value”的键值对，我可以简单地执行以下操作吗？

```
 var id = myArrayofJson[0].id; 
```

我会使用 jQuery，但在 Google Api 中是不允许的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T07:11:47.200

我拥有的是一组 json 对象，所以我的问题的答案是：

```
for(i=0; i < myArray.length; i++){
  var receive = myArray[i][jsonId][anotherId];
 } 
```

我只是不知道如何正确使用 json 数组，但得到了您和其他人的帮助。谢谢你。

# php - PHP推送通知权限被拒绝IOS

> ID：12645264
> 
> 赞同：0
> 
> 时间：2012-09-28T18:16:01.830
> 
> 标签：php

我目前正在尝试使用 php 设置推送通知服务器。我有一些代码，如果我在命令行上运行它就可以了。但是，当我通过 Web 浏览器访问同一个 php 文件以测试它是否给了我一个权限被拒绝的错误。

可能是什么原因造成的，我相信它一定是apache有问题，但我不知道是什么。

编辑：我相信这是一个 SELinix 问题，因为当我尝试运行脚本时，这些错误会出现在审核日志中。

```
type=AVC msg=audit(1348856835.712:48079): avc:  denied  { name_connect } for  pid=587 comm="httpd" dest=2195 scontext=unconfined_u:system_r:httpd_t:s0 tcontext=system_u:object_r:port_t:s0 tclass=tcp_socket
type=SYSCALL msg=audit(1348856835.712:48079): arch=40000003 syscall=102 success=no exit=-13 a0=3 a1=bfb8c910 a2=4514ad8 a3=10 items=0 ppid=584 pid=587 auid=0 uid=48 gid=48 euid=48 suid=48 fsuid=48 egid=48 sgid=48 fsgid=48 tty=(none) ses=2395 comm="httpd" exe="/usr/sbin/httpd" subj=unconfined_u:system_r:httpd_t:s0 key=(null) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:38:45.440

事实证明，服务器关闭了 SELinux 布尔值 h​​ttpd_can_network_connect。一旦我打开它，脚本就会按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:19:19.233

这几乎肯定是您机器上的 apache（或nobody）用户没有足够的权限来执行 php 脚本应该执行的任何操作的结果。你说的是服务器端吧？如果是这样，请删除那些不相关的苹果和 iOS 标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T18:33:04.663

您的 VHOST 配置是什么？您是否允许访问您的 DocRoot 目录？下面的示例配置：

```
<VirtualHost *:80>
    ServerName your.server.com
    DocumentRoot /var/www/

    <Directory /var/www/>
        DirectoryIndex index.php
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

# c# - 未实现接口成员 - C#

> ID：12645268
> 
> 赞同：0
> 
> 时间：2012-09-28T18:16:04.847
> 
> 标签：c#

我不断收到这个错误，我不确定我做错了什么。错误 1“Home.Services.InventoryImpl”未实现接口成员“Home.Services.InventorySvc.CreateInventory(Home.Services.InventoryImpl)”

我的界面代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Home;
using Home.Domain;

namespace Home.Services
{
    public interface InventorySvc
    {
        void CreateInventory(InventoryImpl CreateTheInventory);
    }
} 
```

我的实现代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Home.Domain;
using System.IO;
using System.Runtime.Serialization;
using System.Runtime.Serialization.Formatters.Binary;

namespace Home.Services
{
    public class InventoryImpl: InventorySvc
    {
        public void CreateTheInventory(CreateInventory createinventory)
        {

            FileStream fileStream = new FileStream
            ("CreateInventory.bin", FileMode.Create, 
            FileAccess.Write);
            IFormatter formatter = new BinaryFormatter();
            formatter.Serialize(fileStream, createinventory);
            fileStream.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T18:16:58.900

您的方法被调用`CreateTheInventory`，但在接口中被调用`CreateInventory`。方法签名必须与接口成员完全匹配，以便编译器将该方法视为实现接口成员，并且名称不匹配。

此外，参数类型不匹配 - 在您的实现中，您`CreateInventory`将参数类型作为参数类型，但接口采用 type 的参数`InventoryImpl`。

如果您更正了这两个错误，您的代码应该会构建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T18:17:55.173

您的`InventorySvc`界面定义：

```
void CreateInventory(InventoryImpl CreateTheInventory); 
```

但是你已经实现了：

```
public void CreateTheInventory(CreateInventory createinventory) 
```

看到不同？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T18:39:21.130

您在类中的方法签名与接口方法的签名不匹配。

使用将鼠标悬停在接口名称上时出现的智能标记，以创建接口实现。这使一切都适合您。

此外，您应该调用您的 interface `IInventorySvc`。接口名称的指导方针规定大写的“I”应该放在逻辑名称之前，即使后者以“I”开头。

# c - 是否可以在案例陈述中进行 OR？

> ID：12645270
> 
> 赞同：4
> 
> 时间：2012-09-28T18:16:10.033
> 
> 标签：c, syntax, switch-statement

我想做类似的事情：

```
case someenumvalue || someotherenumvalue:
    // do some stuff
    break; 
```

这在C中合法吗？

我正在打开的变量是一个枚举列表数据结构。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-28T18:17:00.663

您可以依赖这样一个事实，即如果没有以下语句，`case`语句就会*失败*`break`：

```
case SOME_ENUM_VALUE:  // fall-through
case SOME_OTHER_ENUM_VALUE:
    doSomeStuff();
    break; 
```

您也可以在更复杂的情况下使用它，其中两个值都需要共享工作，但其中一个（或多个）还需要特定工作：

```
case SOME_ENUM_VALUE:
    doSpecificStuff();
    // fall-through to shared code
case SOME_OTHER_ENUM_VALUE:
    doStuffForBothValues();
    break; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T18:17:12.507

是的，您可以简单地跳过`break`第一个`case`以实现穿透效果：

```
switch (expr) {
    case someenumvalue: // no "break" here means fall-through semantic
    case someotherenumvalue:
        // do some stuff
        break;
    default:
        // do some other stuff
        break;
} 
```

许多程序员因忘记插入`break`. 这在过去让我有些头疼，尤其是在我无法访问调试器的情况下。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T18:17:26.110

你需要：

```
case someenumvalue:
case someotherenumvalue :
    do some stuff
    break; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T18:17:11.200

您可以使用[fallthrough](https://en.wikipedia.org/wiki/Switch_statement#C.2C_C.2B.2B.2C_D.2C_Java.2C_PHP.2C_ActionScript.2C_JavaScript)来获得这种效果：

```
case someenumvalue:
case someotherenumvalue :
    do some stuff
    break; 
```

像 a 这样的`case`语句`goto`- 您的程序将执行它之后的所有内容（包括其他`case`语句），直到您到达`switch`块的末尾或`break`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T18:36:23.397

正如其他人所指定的那样，是的，您可以通过使用跌倒在逻辑上将事物组合在一起：

```
case someenumvalue:         //case somenumvalue 
case someotherenumvalue :   //or case someothernumvalue
   do some stuff
   break; 
```

但是要直接回答您的问题，是的，您也可以对它们进行逻辑或按位操作`or`（这只是操作结果的一个案例），请注意您得到的结果是什么：

```
enum
{
  somenumvalue1 = 0,
  somenumvalue2 = 1,
  somenumvalue3 = 2
};

int main()
{
  int val = somenumvalue2; //this is 1
  switch(val) {
     case somenumvalue1: //the case for 0
          printf("1 %d\n", mval);
          break;
     case somenumvalue2 || somenumvalue3: //the case for (1||2) == (1), NOT the
          printf("2 %d\n", mval);         //case for "1" or "2"
          break;
     case somenumvalue3:     //the case for 2 
          printf("3 %d\n", mval);
          break;
  }
  return 0;
} 
```

如果您选择执行第二个实现，请记住，由于您正在执行`||`操作，您将得到 1 或 0，仅此而已。

# vim - vim 中的智能标签

> ID：12645271
> 
> 赞同：5
> 
> 时间：2012-09-28T18:16:10.587
> 
> 标签：vim

有什么方法可以`tab`通过接下来的两种方式使 vim 处理按下？

1.  插入缩进的常用制表符。
2.  插入空格进行对齐。

使用结果应如下所示（`--->`它是制表符，`_`它是空格）

```
foo() {
--->int_a_____=_2;
--->int_count_=_12;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T18:43:02.803

有[智能标签插件](http://www.vim.org/scripts/script.php?script_id=231)。我不使用它，但它看起来像你想要的。

*编辑*：实际上，我已经编写了自己的实现，因为我想要一些额外的功能（比如在注释前缀之后仍然使用 Tabs），并且需要它与我自己的*SuperTab*插件变体集成，它也覆盖了键。我刚刚上传了我的[IndentTab 插件](http://www.vim.org/scripts/script.php?script_id=4243)，以便您选择。

# xcode - 在开发 iOS 6 应用程序时，这些仍然是反对使用 Storyboard 的有效负面因素吗？

> ID：12645276
> 
> 赞同：12
> 
> 时间：2012-09-28T18:16:51.293
> 
> 标签：xcode, storyboard, ios6, xib

使用故事板代替传统的 .xib 策略是我仍在努力解决的问题，因为在没有真正了解它在做什么以及我真正控制什么的情况下，我对采用在幕后做这么多事情的东西有些犹豫输。

BNR iOS Programming Book 强调了使用 Storyboard 的几个“缺点”。我在下面列出了它们，我的问题是： **这些负面因素在 iOS 6 中仍然有效吗？**

1.  故事板很难在团队中使用
2.  故事板搞砸了版本控制
3.  故事板打乱了编程流程
4.  故事板为了易用性而牺牲了灵活性和控制力
5.  故事板总是创建新的视图控制器实例

我正在寻找那些真正在构建，最好是部署真正的 iOS 应用程序并且自己在“storyboards vs .xib”问题上苦苦挣扎的人的答案。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-29T13:25:06.250

我不认为 iOS 6 解决了这些情况。更重要的是，xcode 4.5 没有修复它们，甚至没有尝试这样做。列出的问题似乎反映了观点或风格偏好，也许还有一些错误信息。这些不是可以在代码中修复的东西。

我正在将情节提要用于一个重要的应用程序，我发现它们是一个真正的生产力福音。我鼓励您尝试他们，看看您是否不同意。

关于问题列表的一些评论：

1.  我不知道团队和 SB 有任何问题，但如果 2 是真的（事实并非如此），那就可以解释这种担忧。我认为这是基于2的误解。
2.  不对。我虔诚地使用 Git，并且经常提交。没问题。在提交期间，SB 以其源代码形式 (XML) 显示。差异完美地工作，实际上提供了一些关于如何实现 SB 的见解。这减少了神秘的“幕后”行为的感觉，这成为熟悉的问题。
3.  不同意。他们不会破坏流程，他们提供不同的流程 - 这是他们获得力量的地方。许多程序员在 MVC 规则强加的分离中发现了价值。SB 引入了 UI 元素放置和支持代码之间的分离。这是一个自然的拆分，并消除了大量无意识的代码（消除了拼写错误的机会，并“整理”了剩余的真实代码）。
4.  部分同意 - 它们肯定会提高易用性。但我根本找不到任何牺牲。即使在使用 SB 时，如果需要，您也可以随时恢复为对任何对象进行手动编码。没有牺牲灵活性或控制力。
5.  不知道这意味着什么，以及为什么它可能是一个问题。当然，我们会为不同的场景创建不同的 VC——这很自然。但是在 SB 中重用 VC 类当然是可能的。此项可能是对如何为 SB 对象设置类的误解。这一步很容易忘记，有时会让初学者感到困惑。但是改正是微不足道的，很快设置类就成了一种习惯。

对我来说，真正的担忧是：

1.  使用 SB 需要大量的屏幕空间用于开发。在小型显示器上使用 SB 可能会令人沮丧。
2.  具有许多场景的高度复杂的 UI 应拆分为多个 SB。完全支持多个 SB，但很容易失败。（这就像重构一个变得太大的方法。通常我注意到我需要在某些东西已经变得混乱之后重构代码。）

SB 在布局过程中的便利性以及消除大量使 VC 对象混乱的样板代码是一个巨大的好处。（我删除的每一行代码都是我无法搞砸的行，也是无法掩盖剩下的真实代码的行。）

简而言之，我无法想象没有SB的生活。是的，这是一个变化。但我没有发现任何真正严重的缺点。尤其重要的是要记住，即使使用 SB，所有非 SB 编码技术仍然有效。试一试SB，并报告您自己的经验。祝你好运！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-29T14:46:52.840

我一般同意jbbenni。我在您的观点中看到的唯一“有效”批评是关于“故事板总是创建一个新实例”。基本上，这意味着尽管您可以连接一个按钮来将视图控制器推送到堆栈上，但如果没有额外的代码，您无法连接一个按钮来弹出堆栈。这已经在 Xcode 4.5 中通过“exit segues”解决了，它让你表明你想要弹回之前的控制器而不是创建一个新的实例。

许多人抱怨的故事板的另一个限制是您不能在故事板本身中嵌入子视图控制器。Xcode 4.5 中也解决了这个问题。

故事板是 iOS 开发向前迈出的重要一步。诸如“合并困难”之类的抱怨是没有根据的；故事板并不比其他代码更难合并；您只需要花时间实际阅读差异，而不是将其掩饰为“不是 Obj-C；无法阅读”。

自从引入故事板以来，我已经在团队环境中成功使用了故事板。不要让不知情的人吓跑你。他们真棒。

# vba - 如何将带有换行符的 mailItem.Body 复制到网站 Textarea？

> ID：12645277
> 
> 赞同：2
> 
> 时间：2012-09-28T18:16:54.210
> 
> 标签：vba, outlook

我`objItem.Body`用来填写网站文本区域。

对于 HTML 电子邮件，它会为换行符或其他内容添加空格，我该如何解决？这是一个[示例电子邮件。](http://nerd-alert.info/images/hesk/001.png)

使用`ie.document.getElementById("message").Value = objItem.Body`您可以看到添加了两个额外的空格/返回。它还添加了`HYPERLINK="mailto:xxxxx"`.

使用以下内容转换为纯文本：

```
objitem.BodyFormat = olFormatPlain 
objItem.Body = Replace(objItem.Body, " " & vbCrLf, vbCr) 
```

保留额外的间距并破坏原始电子邮件（我想保留屏幕截图等）。

我怎样才能`mailItem.Body`正确转移？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:43:28.513

唯一剩下的就是删除超链接！IE HYPERLing "mailto:email"email 和 HYPERLINK"website" 网站

这是如何让 objitem.body 在 html 电子邮件上做正确的间距..

`ie.document.getElementById("message").Value = Replace(objItem.Body, vbCrLf & vbCrLf, vbCrLf)`

# linux - 如何以更改文件部分数据长度的方式修改 ELF 文件？

> ID：12645284
> 
> 赞同：3
> 
> 时间：2012-09-28T18:17:14.110
> 
> 标签：linux, elf

我正在尝试修改我自己的 ELF 文件的可执行内容，看看这是否可行。我编写了一个程序，它读取和解析 ELF 文件，搜索它应该更新的代码，对其进行更改，然后在更新节标题中的 sh_size 字段后将其写回。

但是，这不起作用。如果我只是用其他字节交换一些字节，它就可以工作。但是，如果我更改大小，它会失败。我知道一些 sh_offsets 是直接相邻的；但是，当我*减小*可执行代码的大小时，这无关紧要。

当然，我的程序中可能存在一个错误（或多个），但我已经煞费苦心地完成了它。

除了寻求帮助来调试我的程序，我只是想知道，除了我需要更新的 sh_size 字段之外，还有什么其他的东西需要更新才能使这项工作（减小大小时）？除了该字段之外，还有什么会导致更改长度失败的吗？

编辑：

看来安迪·罗斯是完全正确的。即使在这个非常简单的程序中，我也遇到了 __libc_start_main 中的一些间接寻址，我无法轻易修改它来更新它将达到的偏移量。

不过我很好奇，仍然试图尽可能解决这个问题的最佳方法是什么？我知道我不能在每种情况下都解决这个问题，但是对于一些简单的程序，应该可以更新使其运行所需的内容？我应该尝试编写自己的虚拟机还是尝试开发一个“调试器”，用 INT 3 替换每个可疑的问题指令？有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T18:58:40.993

文本段可能在内部与相对偏移量相关联。所以一个函数可能试图跳转到，比如说，“当前地址加上 194 个字节”。如果你移动东西使得跳转目标现在是 190 字节，你显然会破坏东西。某些架构上的常量数据也是如此（例如 x86-64 但不是 i686）。要知道内部引用在哪里，没有简单的方法可以完全反汇编，事实上，要找到它们在计算上是无法确定的（即，试图找出运行时计算分支的所有可能的跳转目标是停止问题）。

基本上，这在一般情况下是无法解决的，所以如果你有一个来自其他人的 ELF 二进制文件，你正在尝试修补，你需要尝试其他技术。但是（非常！）小心，可以生成一个库，其中所有内部引用都通过 GOT/PLT，可以像这样分割和重新链接。你想达到什么目的？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T05:22:56.977

> 除了我需要更新的 sh_size 字段之外，是否还有其他内容才能完成这项工作

听起来您正在修补完全链接的二进制文件（`ET_EXEC`或`ET_DYN`）。请注意，在静态链接完成后，`.sh_size`它*不会*用于任何事情。您可以剥离整个节表，二进制文件将继续正常工作。运行时重要的是ELF中的*段，而不是**section*。

ELF 代表*可执行*和*链接*格式，*可执行*和*链接*形成 ELF 的“双重性质”。在（静态）*链接*时使用部分来组合成段；在执行时（又名运行时，又名动态链接时）使用。

当然，您还没有确切地告诉我们，当您缩小二进制文件时，您的修补策略是什么，以及结果以何种方式被破坏。安迪·罗斯的回答很可能是你断线的真正原因。

# ipad - iPad被覆盖时是否有消息？我想为隐私目的屏蔽该应用程序

> ID：12645285
> 
> 赞同：0
> 
> 时间：2012-09-28T18:17:23.647
> 
> 标签：ipad, events

问题：当 iPad 盖翻转关闭时是否会触发消息/事件？目的：我有一个收集私人信息的 iPad 应用程序，这样当有人进入房间时，用户可能会关闭盖子。如果其他人拿起 iPad，应用程序会自行关闭或以其他方式掩盖用户信息，这是有道理的 - 并且用户已请求。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:26:50.410

有人建议使用 AppDelegate 的 applicationWillResignActive 和 applicationDidBecomeActive 委托方法并实例化加速度计。当设备被锁定（盖子关闭）时，加速度计被禁用并且不会注册事件，但如果应用程序在后台，它仍然处于活动状态。从未尝试过，但它可能会起作用。

[在这里解释](https://stackoverflow.com/questions/706344/lock-unlock-events-iphone/7479052#7479052)

# magento-1.7 - 为什么我找不到正在加载的默认 Magento 主题？

> ID：12645286
> 
> 赞同：0
> 
> 时间：2012-09-28T18:17:24.253
> 
> 标签：magento-1.7, magento

应该很简单。我正在尝试查找 Magento 中加载的主题以创建我自己的自定义主题。问题是我的（版本 1.7.0.2）在 frontend->default->default 文件夹中没有文件，所以我无法在其中放置任何打印语句或查看 Magento 正在加载哪个模板以了解更多信息。base->default 中的打印语句似乎也不起作用。

主页模板在哪里？

我不知道为什么 Magento 让这变得如此困难，或者我只是在查看不再适用的旧信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T18:27:50.110

[打开模板路径提示](http://www.magentocommerce.com/blog/template-path-hints-tutorial-video/)。在进行任何主题工作时，还可以从**系统 > 缓存管理**中禁用缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:29:57.373

+1 建议您打开模板路径提示的其他答案。这是了解 Magento 中事物工作方式的结构的好方法。

我也会推荐用户指南。它已更新为适用于 1.7。您过去必须为指南付费，但他们现在免费提供。

[http://www.magentocommerce.com/resources/magento-user-guide](http://www.magentocommerce.com/resources/magento-user-guide)

以及最新的设计师指南，其中包含特定于模板等的信息。

[http://www.magentocommerce.com/design_guide](http://www.magentocommerce.com/design_guide)

# sql - 将多行合并为一列而不重复

> ID：12645297
> 
> 赞同：33
> 
> 时间：2012-09-28T18:18:15.607
> 
> 标签：sql, sql-server, tsql

我正在处理一个查询，该查询将从表中收集数据并显示报告的数据。

数据如下所示：

```
Player Score
001      10
001      20
002      20
002      20
001      10
002      10
003      20
002      20
001      10 
```

我希望它像这样显示

```
Player Score
001    10,20
002    10,20
003    20 
```

但我得到的只是分数列中所有数据的组合列表，如下所示

```
Player Score
001    10,20,10,10
002    20,20,10,20
003    20 
```

有谁知道如何使这项工作？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-28T18:22:31.827

对于 SQL Server，您可以使用：

```
select player,
  stuff((SELECT distinct ', ' + cast(score as varchar(10))
           FROM yourtable t2
           where t2.player = t1.player
           FOR XML PATH('')),1,1,'') 
from yourtable t1
group by player 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-12T19:24:25.073

对于另一个 RDBMS 来说有点晚了，而且有点离题，但我发现这个线程在 Postgres 中寻找解决这个问题的方法。我找到了一个，所以如果其他人需要在 Pg 中解决这个问题：

```
SELECT string_agg(DISTINCT <column>,'delimiter') FROM <table> GROUP BY <column2> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-09-23T14:39:25.383

以前接受的答案在 SQL 2017 及更高版本中被 STRING_AGG 取代：

```
SELECT Player, STRING_AGG(Score,', ') FROM YourTable GROUP BY Player 
```

无需使用笨拙的 FOR XML 语法。

我在 100K 行上并排运行了这个和接受的答案。接受的答案需要 90 秒，STRING_AGG 版本需要不到 1 秒。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2018-05-23T18:16:21.697

```
UPDATE AllNews 
    SET ArticleSource = pp.[NewsText]
  FROM AllNews AS an
  INNER JOIN (  select t1.Id,
  stuff((SELECT distinct '.' + t2.[Text]
           FROM NewsPhotos t2
           where t2.NewsId = t1.Id
           FOR XML PATH('')),1,1,'') as [NewsText]
             from AllNews t1
             group by t1.Id) as pp
  ON pp.Id = an.Id 
```

# java - 了解 Thread.currentThread().getContextClassLoader().getResourceAsStream()

> ID：12645298
> 
> 赞同：9
> 
> 时间：2012-09-28T18:18:19.747
> 
> 标签：java, classloader, contextclassloader

我正在查看一个代码示例，但我不确定这意味着什么。

```
Thread.currentThread().getContextClassLoader()
    .getResourceAsStream("MyProperty.properties"); 
```

似乎它希望读取属性文件，但我不确定 MyProperty.properties 的位置。

感谢您的帮助，谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T18:23:49.817

> 似乎它希望读取属性文件，但我不确定它`MyProperty.properties`的位置。

正如您目前拥有的那样，它将`MyProperty.properties`在您的类路径顶部查找文件。可能在您的`src/main/resources`目录或其他 src 文件夹中——这取决于您的应用程序 (jar/war) 的构建方式。

如果您正在构建一个 jar，那么您应该能够解压缩它并在 jar 的顶层看到您的属性文件。如果您正在构建战争，也许它应该在`WEB-INF/classes`目录中。同样，这取决于它是如何构建的。

通常，该`log4j.properties`文件也位于类路径的顶部，因此您可能需要查找该文件并将您的属性文件放在它旁边。

# azure-sql-database - 将 SQL Server 表移植到 SQL Azure 联合

> ID：12645300
> 
> 赞同：0
> 
> 时间：2012-09-28T18:18:30.257
> 
> 标签：azure-sql-database, federated-table

```
CREATE TABLE MyTable
(
     ID uniqueidentifier NOT NULL PRIMARY KEY
     Column1 nvarchar(256) NOT NULL UNIQUE,
     Column2 nvarchar(256) NOT NULL UNIQUE,
) 
```

如何在不丢失 Column1 和 Column2 上的唯一性验证或 ID 上的主键约束的情况下将下表移植到 SQL Azure 联合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:45:55.383

今天唯一可行的方法是将联合密钥设置为 VARBINARY(900)（varbinary 作为联合密钥的最大允许大小为 900 字节）。

然后，您将只有一列 - ColumnX varbinary(900)，而不是 Column1 nvarchar(256) 和 Column2 nvarchar(256)。

该列将包含与 Column2 连接的 Column1 的二进制表示。当然，这是比预期更大的重构，您很可能会失去直接在该列上执行搜索的可能性（[一些想法](http://www.sqlservercentral.com/Forums/Topic773239-338-1.aspx)）。

# android - 在 Android 清单中

> ID：12645302
> 
> 赞同：7
> 
> 时间：2012-09-28T18:18:34.633
> 
> 标签：android, android-manifest, andengine

我是 Android 新手，我需要有关此问题的帮助。我正在使用 Eclipse 开发游戏。在我的项目中，我将 AndEngine 和 AndEngine 增强现实添加为库。我在我的 Android 设备上测试该项目，每次我点击使用 AR 类的文本时，它都会强制关闭。有人告诉我在我的 Android 清单文件中注册 AndEngine。我已经检查过并使用了`<uses-library />`. 现在，我将这两行放在我的清单中：

```
<uses-library android:name="org.andengine.extension.augmentedreality" 
           android:required="true"/> 
       <uses-library android:name="org.andengine" 
            android:required="true"/> 
```

但我收到此错误消息：`Installation error: INSTALL_FAILED_MISSING_SHARED_LIBRARY`

当我注释掉这些行时`<uses-library />`，我可以运行该应用程序，但在点击指向 AR 类的文本时它会强制关闭。使用有什么问题吗？或者有什么更好的方法吗？请以易于新手理解的方式发布您的所有建议。谢谢你！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T21:46:10.387

`<uses-library>`并不意味着在您的应用程序中包含库。它用于根据设备上已有的图书馆（如地图）的可用性来限制 Google Play 中的应用程序可用性。AndEngine 是一个库项目，因此通过 Ant、Maven 或您使用的任何 IDE 将其包含在您的构建中。

如果您不熟悉什么是库项目，这里有一个链接：

[https://www.vogella.com/tutorials/AndroidLibraryProjects/article.html](https://www.vogella.com/tutorials/AndroidLibraryProjects/article.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-02T15:37:23.190

> 如果此元素存在并且其`android:required`属性设置为 true，则 PackageManager 框架不会让用户安装应用程序，除非该库存在于用户的设备上。

`<uses-library>`- 指定应用程序必须链接的共享库。该元素告诉系统将库的代码包含在包的类加载器中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T18:28:30.793

在 res 文件夹中创建一个 libs 文件夹并将 AndEngine jars 放入其中。设置 jar 的类路径。

# json - 存储加载后 Extjs MVC 运行函数

> ID：12645303
> 
> 赞同：0
> 
> 时间：2012-09-28T18:18:42.163
> 
> 标签：json, extjs, grid, extjs4

我有一个通过 json 存储获取数据的网格。我想显示网格中的总行数。问题是 store.count() 函数在商店加载之前运行，所以它返回 0。我怎样才能让我的 count 函数只在商店加载后运行？我在 MVC 中工作，这是我的 app.js，其中包含我的计数逻辑。

感谢您的任何帮助

```
 Ext.application({
            name: 'AM',
            appFolder: 'app',
            controllers: [
                    'Users'
            ],
            launch: function(){
                  Ext.state.Manager.setProvider(Ext.create('Ext.state.CookieProvider'));
                  Ext.create('Ext.container.Viewport', {
                            resizable: 'true',
                            forceFit: 'true',
                            layout: 'fit',
                            items:[{
                                    xtype: 'userpanel',
                            }]
                  });
                  var     port = Ext.ComponentQuery.query('viewport')[0],
                          panel = port.down('userpanel'),
                          grid = panel.down('userlist'),
                          label = panel.down('label');
                  var count = grid.store.getCount();
                  var labelText = "Number of people in list: " + count;
                  label.setText(labelText);
            }
    }); 
```

店铺代码：

```
Ext.define('AM.store.Users', {
    extend: 'Ext.data.Store',
    model: 'AM.model.User',
    autoLoad: true,
    autoSync: true,
    purgePageCount: 0,
    proxy: {
            type: 'rest',
            url: 'json.php',
            reader: {
                    type: 'json',
                    root: 'queue',
                    successProperty: 'success'
            }
    },
sortOnLoad: true,
    //autoLoad: true,
    sorters: [
            {
                    property: 'PreReq',
                    direction: 'DESC'
            },
            {
                    property: 'Major1',
                    direction: 'ASC'
            },
            {
                    property: 'UnitsCompleted',
                    direction: 'DESC'
            }
    ],
listeners:{
            onload: function(){
                    var     port = button.up('viewport'),
                            grid = port.down('userlist'),
                            panel = port.down('userpanel'),
                            label = panel.down('label'),
                            count = grid.store.getCount(),
                            labelText = "Number of people in list: " + count;
                    label.setText(labelText);
            },
            scope: this
    }
}); 
```

网格代码：

```
Ext.define('AM.view.user.List' , {
    extend: 'Ext.grid.Panel',
    alias: 'widget.userlist',
    store: 'Users',
    height: 'auto',
    width: 'auto',
    //resizable: 'true',
    features:[{
            ftype: 'grouping'
    }],
autoFill: 'true',
    layout: 'fit',
    autoScroll: 'true',
    initComponent: function() {
            function renderTip(value, metaData, record, rowIdx, colIdx, store) {
                    metaData.tdAttr = 'data-qtip="' + value + '"';
                    return value;
            };
            var dateRender = Ext.util.Format.dateRenderer('m/d/Y');
            this.columns=[
                //code for all my columns
            ]
            ];
            this.callParent(arguments);

}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:33:10.873

尝试在商店中放置一个监听器，然后监听 onload 事件获取计数并以这种方式更新字段。尽管有很多方法可以做到这一点，但这只是其中一种。

但是在上面的示例中，您从不加载刚刚创建的商店，这就是您看到零的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:24:17.483

想通了，需要为“load”事件添加一个监听器，而不是“onLoad”。下面的代码...

```
Ext.define('APP.store.Store', {
    extend: 'Ext.data.Store',
    model: 'APP.model.Model',
    autoLoad: true,
    autoSync: true,
    purgePageCount: 0,
    proxy: {
            type: 'rest',
            url: 'json.php',
            reader: {
                    type: 'json',
                    root: 'users',
                    successProperty: 'success'
            }
    },
    sortOnLoad:true,
    sorters: [{
            property: 'last',
            direction: 'ASC'
    }],
    listeners: {
            load:{
                    fn:function(){
                            var label = Ext.ComponentQuery.query('#countlabel')[0];
                            label.setText(this.count()+ ' Total Participants);
                    }
            }
    }
}); 
```

# javascript - Ext.js 的奇怪语法错误

> ID：12645304
> 
> 赞同：0
> 
> 时间：2012-09-28T18:18:43.680
> 
> 标签：javascript, extjs

我正在与 Ext.js 合作一个项目，我从中得到了奇怪的行为。

我使用的代码会抛出`SyntaxError: Unexpected identifier`，它只在以下两种情况下抛出：

```
var thing = Ext.extend(Ext.Panel, {
    constructor : function(){
        this.superclass.constructor.apply(this, [{  //Throws SyntaxError 
```

或者

```
var thing = Ext.extend(Ext.Panel, {
    constructor : function(){
        this['superclass'].constructor.apply(this, [{  //Throws SyntaxError 
```

但是，它适用于以下情况：

```
this.superclass().constructor.apply(this, [{ 
```

和

```
this['superclass']().constructor.apply(this, [{ 
```

我对如何`this.superclass.constructor.apply`抛出`SyntaxError`而完全困惑`this.superclass().constructor.apply`。前者似乎是完全有效的语法，所以我不完全确定问题是什么。

谁能详细说明为什么这是无效的语法？

非常感谢。

**编辑：**我想知道 Ext.js 是否`SyntaxError`抛出了 . 如果我在这方面不正确，并且 Ext.js 正在抛出它，请告诉我。

# python - 如何在python中将列表['1']，['2']，['3']更改为1,2,3

> ID：12645305
> 
> 赞同：-3
> 
> 时间：2012-09-28T18:18:45.487
> 
> 标签：python, list

我想改

```
mylist = [['1'],['2'],['3']] 
```

成为

```
mynewlist = (1,2,3) 
```

如何在 python 中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T18:20:02.660

一个简单的列表理解就可以了：

```
mynewlist = [int(x[0]) for x in mylist] 
```

当然，如果你真的想要一个元组作为输出：

```
mynewtuple = tuple(int(x[0]) for x in mylist) 
```

# vb.net - 使用 VB.Net 的 SMS 网关

> ID：12645308
> 
> 赞同：0
> 
> 时间：2012-09-28T18:18:56.127
> 
> 标签：vb.net

我正在使用 VB.Net 开发短信服务网关，是否有任何现有的免费代码或电子书或短期课程？

我不想使用互联网协议或HTTP，而是在调制解调器中使用卡的纯协议可能会从手机写短信并发送它。

最重要的是，我想从我的电脑上用VB.Net开发的应用程序发送短信，然后发送到手机上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:25:51.510

快速谷歌搜索让我找到了这个： [http ://www.scampers.org/steve/sms/libraries.htm#gsmcomm](http://www.scampers.org/steve/sms/libraries.htm#gsmcomm)

# ruby-on-rails - Rails 模块工作了一段时间 - 然后停止从我的控制器工作

> ID：12645309
> 
> 赞同：0
> 
> 时间：2012-09-28T18:19:05.207
> 
> 标签：ruby-on-rails, module, controller

我已经修改`application.rb`为自动加载我的 lib 目录：

```
config.autoload_paths += %W(#{config.root}/lib) 
```

我`X::Y`在文件中定义了一个`lib/x/y.rb`带有函数的模块`execute(param)`。

在控制器 ( `A::B`) 中，我通过包含文件然后调用函数在此文件中调用执行：

```
require 'x/y'
results = X::Y.execute(param) 
```

这在应用程序加载后的短时间内完美运行，但很快我开始收到错误：

```
NameError in A::B#index
uninitialized constant A::B::X 
```

有谁知道我在这里可能做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:43:53.870

为了方便起见，我决定将它们移到模型中。

# .htaccess - htaccess 从重写的动态 url 重定向到新的动态 url

> ID：12645311
> 
> 赞同：0
> 
> 时间：2012-09-28T18:19:08.947
> 
> 标签：.htaccess, redirect, dynamic-url

我遇到了一个非常独特的问题，我希望有人能提供帮助！

所以我们最近创建了一个新的电子商务网站，我们让它上线了，一切都很好，但是当我们从旧页面实施 301 时，我们得到了一些奇怪的东西

所以下面的代码确实有效

```
Redirect 301 /directory/ http://mysite.com/index.php?cat=1 
```

这段代码不

```
Redirect 301 /directory/sub_directory/ http://mysite.com/index.php?cat=2 
```

当我尝试执行此重定向时的输出是“指定的参数无效！” 在空白网页和地址栏中它有这个

[http://mysite.com/index.php?cat=1/sub_directory/](http://mysite.com/index.php?cat=1/sub_directory/)

我们认为问题可能是因为我们的旧页面是动态的，但是 mod_rewrite 用于创建更具可读性的 url，我们还删除了所有旧文件，因为它们干扰了我们的新页面渲染

任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:30:41.747

这很奇怪，因为重定向应该只匹配列出的特定 url，因为它看起来像 rewriterule 并且部分匹配子目录 url 与第一条规则..

尝试将更具体的规则置于不太具体的规则之上，如下所示：

```
Redirect 301 /directory/sub_directory/ http://mysite.com/index.php?cat=2
Redirect 301 /directory/ http://mysite.com/index.php?cat=1 
```

这样更具体的规则将首先被击中，并且 /directory/ only 规则只有在上面更具体的匹配失败时才会匹配

或者，您可以尝试 RewriteRules：

```
RewriteRule ^directory/$ http://mysite.com/index.php?cat=1 [R=301,NC,L]
RewriteRule ^directory/sub_directory/$ http://mysite.com/index.php?cat=2 [R=301,NC,L] 
```

^ 和 $ 锚应该防止任何不需要的部分匹配

# algorithm - 游戏服务器：数据包分析

> ID：12645312
> 
> 赞同：0
> 
> 时间：2012-09-28T18:19:12.027
> 
> 标签：algorithm, encryption, reverse-engineering, packet, emulation

我最喜欢的赛车游戏服务器即将关闭。在此之前，我想破译尽可能多的信息以供以后使用，以便我和我的朋友们仍然可以玩。

碰壁后，我认为比我更有经验的人可能能够识别一些有说服力的字节。

我正在寻找使用的加密和/或压缩方法，以便我可以开始解密它。如果有人想看看，我在下面有几个值得注意的数据包，其中包含一些关于它们的注释。

```
1d 35 05 00 0a d0 83 b5  23 33 00 00 00 01 00 0e
04 c7 00 00 6c 8b 69 28  df 40 8d 30 9b 81 5f b6
e3 8b 8f b7 4e d2 4d 48  35 40 ea 14 ce e8 65 f5
a7 cd a3 42 6c e2 d9 51  45 5f f0 b5 53 51 6d 2b
c0 e2 34 14 8f 5f 06 d4  28 e4 76 3d 5c ba 2d 11
38 76 e8 11 86 d8 58 24  91 0a af ad f4 7c ee db
ca f3 85 2f dd 73 10 cf  30 49 50 c1 77 78 ae 7e
27 2c 5d bf 4a 78 e0 b0  d2 f4 d7 66 40 f0 ad 75
75 9c 9b 9f e8 2b 32 4d  27 10 3c 31 19 73 2c 80
73 3b b8 b3 4a 78 e0 b0  d2 f4 d7 66 8c c3 08 a5
d8 40 fb f6 2b f2 04 61  47 6f 2e 0e 29 59 cc 1b
f2 13 a0 67 4a 78 e0 b0  d2 f4 d7 66 55 68 45 fd
96 21 16 b1 ed e9 86 43  e2 8b 70 5f b7 bd a3 8c
4d c3 8a e2 4a 78 e0 b0  d2 f4 d7 66 ab 6f ac bd
c1 91 f8 8e 4a 78 e0 b0  d2 f4 d7 66 46 0d 43 4f
4a b4 a2 7b 4a 78 e0 b0  d2 f4 d7 66 f7 af c5 c8
41 69 ed 27 ba c5 16 5e  c7 cf 46 d1 8a 79 70 a4
7b d6 a3 8f cc a7 76 fb  52 8b 76 6a 70 ff bb b0
01 17 8f 16 8d 5a ec cd  90 7b 11 37 36 e0 7a d5
b7 97 24 41 6d 94 13 39  17 1f f9 fc de 03 3d d4
3b 54 b6 84 1c 63 c7 48  15 de ef 8c 80 95 d3 84
d9 6d 80 47 06 31 fd 39  2d 78 b9 ac 33 40 69 40
72 52 57 fd 9a 3a 84 41  a9 4d 52 95 9f af a7 bf
80 3d 54 61 d5 fc ce 18  c7 7f 8e 3b e2 52 ee 20
a1 49 f8 ec 8a 5e fe 06  97 6c da 06 ce 84 09 95
bd 39 83 b2 20 3b 47 1b  03 a1 d3 d4 2f e0 ee 46
60 54 97 20 5b 2e 6b 3d  01 ee 3a 08 95 46 e5 e3
f0 d2 2d c4 21 0e 71 0b  2a 66 1c 2d 85 0f 55 2f
e8 7c 5c 2b 9e 8f be d3  cb 9e aa 0a f3 87 6d ee
e8 b4 8a c7 94 66 53 6c  62 93 68 e2 ed 4a 25 30
62 fd 7b 4f 3b 89 e3 59  d3 ca 47 2c 57 55 0e ea
a2 a3 f9 e8 3a 1b db 30  a5 71 64 e0 84 ae 68 f5
7c b9 04 40 d7 4e 9d 9e  4e 88 6f 5b 48 dd 7c 75
e8 93 a2 0c d7 4e 9d 9e  4e 88 6f 5b f0 b0 76 40
3b a0 c2 14 a4 4f 70 a0  f6 f9 68 65 10 b8 e3 b3
82 60 c0 e3 7b d5 7e 06  7d 38 d4 0c d7 4e 9d 9e
4e 88 6f 5b 82 f3 da ff  f5 ba 01 cd e4 c0 61 13
ed 06 81 ce 94 42 9f 47  7f 61 01 82 d7 4e 9d 9e
4e 88 6f 5b 06 ce 5d 28  17 85 72 e2 d9 09 3f 97
6f f7 a4 29 3c c8 3a 96  b1 20 95 8a aa 89 54 8a
71 2a 06 a9 ce 1f d3 63  61 54 db 95 2b f2 04 61
47 6f 2e 0e c9 16 f9 83  fe fd 59 49 69 6a 5b 9f
36 35 63 c7 df 86 d0 e8  f5 ec 27 21 e6 c0 7f 3e
cd 8c a0 bd ac 98 17 8d  dd bf 84 7c e6 c0 7f 3e
cd 8c a0 bd 6f 92 ba d1  4c 8f 37 bd e6 c0 7f 3e
cd 8c a0 bd c0 6a c3 31  ab 6c cf 86 a4 4f 70 a0
f6 f9 68 65 3b a2 22 37  83 39 a5 4e eb 84 25 c5
08 76 1a 53 e6 c0 7f 3e  cd 8c a0 bd 82 7e 70 31
d8 1c de 8d 5d f1 b4 76  8d 87 80 b6 41 a5 4c 4d
0e 1c ef a4 e6 c0 7f 3e  cd 8c a0 bd b5 06 a1 35
e8 e1 e0 9e 0b 3d a5 8f  ad eb 72 ec 09 b4 db d8
f4 0e 27 6d 4f 46 9c 93  8a 6c 99 62 f3 75 f2 a9
52 59 75 90 cd e3 f7 d0  20 de db b9 c6 bd 91 f3
1b 59 c6 14 d7 02 5b de  c8 4e 47 14 35 3c 74 f2
50 ae 3f a1 be b4 99 c0  5b 32 06 21 00 60 77 5f
14 37 3f 26 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0
f6 f9 68 65 f0 95 42 32  ff 36 3a 74 58 b0 0e c4
32 84 82 6d a7 d7 2d 61  ab 31 c7 fd ff 97 d7 ae
28 f0 61 fa 81 6b dd 60  a8 1f d4 55 21 3c 8d 22
5c bb a4 82 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0
f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0
f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 aa 89 54 8a
71 2a 06 a9 da d8 f4 fd  82 c5 ef 9a a4 89 65 af
ec 9a d7 d9 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0
f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0
f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0
f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 f1 14 06 7a
3e 83 8b ed 58 b0 0e c4  32 84 82 6d 06 75 0b 7b
d4 99 7d 60 aa ba 49 33  7e 03 ce 28 cb a5 7e 41
93 19 ea 5c 95 33 ab ef  ca d7 14 d8 a4 4f 70 a0
f6 f9 68 65 9a a4 e8 da  49 b1 e3 4f 28 22 71 95
9c a8 c1 20 ac 42 a3 6e  6e a3 54 2c 22 ba 13 23
cc df 4d f4 aa 9c a0 69  e7 77 91 5f 7b e9 8f ac
70 f0 1a 21 45 aa f0 71  df a0 d3 99 ba 40 64 58
17 2e e9 cf a4 0b 53 d8  86 89 5b 6e fd ab 78 43
98 58 c2 3c 50 ed 3a 9b  d9 dc a0 ee fc 18 d5 95
cc fd 31 be 2d 5b 5e 33  d7 fa 22 a7 69 c8 ae 34
48 7e d4 fc 37 de 4a 2c  36 5c d8 a8 
```

* * *

```
1d 35 05 00 0a d0 83 b5  23 33 00 00 00 01 00 0e
04 c7 00 00 29 c0 fa 0f  59 3c fc b6 13 24 b3 d3
ce cc 1e 87 4e d2 4d 48  35 40 ea 14 ce e8 65 f5
a7 cd a3 42 6c e2 d9 51  45 5f f0 b5 53 51 6d 2b
c0 e2 34 14 8f 5f 06 d4  28 e4 76 3d 5c ba 2d 11
38 76 e8 11 86 d8 58 24  91 0a af ad f4 7c ee db
ca f3 85 2f dd 73 10 cf  30 49 50 c1 77 78 ae 7e
27 2c 5d bf 4a 78 e0 b0  d2 f4 d7 66 40 f0 ad 75
75 9c 9b 9f e8 2b 32 4d  27 10 3c 31 19 73 2c 80
73 3b b8 b3 2b f2 04 61  47 6f 2e 0e 8c c3 08 a5
d8 40 fb f6 2b f2 04 61  47 6f 2e 0e 29 59 cc 1b
f2 13 a0 67 2b f2 04 61  47 6f 2e 0e 55 68 45 fd
96 21 16 b1 4f 46 9c 93  8a 6c 99 62 b7 bd a3 8c
4d c3 8a e2 2b f2 04 61  47 6f 2e 0e ab 6f ac bd
c1 91 f8 8e 4a 78 e0 b0  d2 f4 d7 66 46 0d 43 4f
4a b4 a2 7b 4a 78 e0 b0  d2 f4 d7 66 f7 af c5 c8
41 69 ed 27 ba c5 16 5e  c7 cf 46 d1 8a 79 70 a4
7b d6 a3 8f cc a7 76 fb  52 8b 76 6a 70 ff bb b0
01 17 8f 16 8d 5a ec cd  90 7b 11 37 36 e0 7a d5
b7 97 24 41 6d 94 13 39  17 1f f9 fc de 03 3d d4
3b 54 b6 84 1c b2 d0 c3  73 5c 25 0b 80 95 d3 84
d9 6d 80 47 bb a2 a9 62  49 53 d3 62 33 40 69 40
72 52 57 fd 89 f3 14 bf  bd 15 f4 2d 9f af a7 bf
80 3d 54 61 d5 fc ce 18  c7 7f 8e 3b e2 52 ee 20
a1 49 f8 ec b5 8e d6 79  85 9d cd 7c ce 84 09 95
bd 39 83 b2 20 3b 47 1b  03 a1 d3 d4 2f e0 ee 46
60 54 97 20 3e 7f 7a e7  e0 2a f1 77 95 46 e5 e3
f0 d2 2d c4 21 0e 71 0b  2a 66 1c 2d 85 0f 55 2f
e8 7c 5c 2b 9e 8f be d3  cb 9e aa 0a f3 87 6d ee
e8 b4 8a c7 cd 7e ce 4f  73 4c fd 0d ed 4a 25 30
62 fd 7b 4f 3b 89 e3 59  d3 ca 47 2c 57 55 0e ea
a2 a3 f9 e8 3a 1b db 30  a5 71 64 e0 84 ae 68 f5
7c b9 04 40 d7 4e 9d 9e  4e 88 6f 5b 48 dd 7c 75
e8 93 a2 0c d7 4e 9d 9e  4e 88 6f 5b f0 b0 76 40
3b a0 c2 14 a4 4f 70 a0  f6 f9 68 65 10 b8 e3 b3
82 60 c0 e3 7b d5 7e 06  7d 38 d4 0c d7 4e 9d 9e
4e 88 6f 5b 82 f3 da ff  f5 ba 01 cd e4 c0 61 13
ed 06 81 ce 94 42 9f 47  7f 61 01 82 d7 4e 9d 9e
4e 88 6f 5b 06 ce 5d 28  17 85 72 e2 d9 09 3f 97
6f f7 a4 29 3c c8 3a 96  b1 20 95 8a aa 89 54 8a
71 2a 06 a9 ce 1f d3 63  61 54 db 95 2b f2 04 61
47 6f 2e 0e c9 16 f9 83  fe fd 59 49 69 6a 5b 9f
36 35 63 c7 df 86 d0 e8  f5 ec 27 21 e6 c0 7f 3e
cd 8c a0 bd ac 98 17 8d  dd bf 84 7c e6 c0 7f 3e
cd 8c a0 bd 6f 92 ba d1  4c 8f 37 bd e6 c0 7f 3e
cd 8c a0 bd c0 6a c3 31  ab 6c cf 86 a4 4f 70 a0
f6 f9 68 65 9c b3 25 70  7c 21 66 1d eb 84 25 c5
08 76 1a 53 90 57 0c b7  3a 8f 07 50 82 7e 70 31
d8 1c de 8d f7 2a 0e 09  c5 0c 9a 39 41 a5 4c 4d
0e 1c ef a4 e6 c0 7f 3e  cd 8c a0 bd b5 06 a1 35
e8 e1 e0 9e 0b 3d a5 8f  ad eb 72 ec 09 b4 db d8
f4 0e 27 6d 4f 46 9c 93  8a 6c 99 62 f3 75 f2 a9
52 59 75 90 ad 8a 17 b8  b5 b4 5d a3 c6 bd 91 f3
1b 59 c6 14 e7 15 64 f5  d5 62 49 51 35 3c 74 f2
50 ae 3f a1 be b4 99 c0  5b 32 06 21 00 60 77 5f
14 37 3f 26 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0
f6 f9 68 65 f0 95 42 32  ff 36 3a 74 58 b0 0e c4
32 84 82 6d a7 d7 2d 61  ab 31 c7 fd 2d 61 4e d8
2a a8 9f 96 c6 36 d8 6e  07 6b 2f bd 7a c1 9a f0
66 3f c7 ed a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0
f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0
f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 aa 89 54 8a
71 2a 06 a9 da d8 f4 fd  82 c5 ef 9a 8b ff 8e 2e
7c 8c b2 cb d8 b4 32 d5  89 09 75 3a 34 0a 46 15
33 a0 78 70 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0
f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0
f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 f1 14 06 7a
3e 83 8b ed 58 b0 0e c4  32 84 82 6d 06 75 0b 7b
d4 99 7d 60 aa ba 49 33  7e 03 ce 28 cb a5 7e 41
93 19 ea 5c 95 33 ab ef  ca d7 14 d8 a4 4f 70 a0
f6 f9 68 65 9a a4 e8 da  49 b1 e3 4f 01 53 da 40
25 58 9d 0a ac 42 a3 6e  6e a3 54 2c 22 ba 13 23
cc df 4d f4 e0 31 28 a3  52 33 f5 a7 49 ec 01 d3
83 ce 13 01 dc ad 3b 01  22 14 00 b4 82 28 d3 38
8a bf 02 82 ce 88 c3 0f  1f f5 4d 50 eb 8a b7 3c
4c 87 9a a2 78 15 c6 05  66 24 dd 18 1a 01 e9 d9
61 e6 91 8d 2d 5b 5e 33  d7 fa 22 a7 69 c8 ae 34
48 7e d4 fc 25 4b 63 94  90 c2 1f 24 
```

当我刷新人们拥有的种族列表时，会发送先前的数据包（UDP，我只显示了数据）。有两个数据包（刷新列表两次），但是两者都应该包含相似的数据。它们在地方有所不同，因此我将两者都发布了以防万一。它可能只是发送列表的顺序。

列出的比赛有名称、报名费和奖金金额。因此，至少这些信息必须包含在这些数据包中：

```
Grand Tantalus $100 $2970
Anya (Top-Model) $110 $5193
The judgement way $130 $2151
Pearl City $50 $18585
East to West - LH $0 $9000
Kelekole Pass $10 $72
Makiki****no cheater! $300 $79020
Koko Head Park||||| $950 $185130
nicmax -chit,go home! $50 $19260
                       $0 $0 
```

最后一场比赛是我创建并命名的，只有空格（总共 22 个空格）以帮助破译信息。

另外值得注意的是，当您最初启动游戏时，最初交换的几个数据包并未加密：

```
I send this (which includes game version, my name "Mctittles", and CD key 
in plain text)

00000000  fd c7 00 3f 00 00 2a 7b  4d 43 20 31 2e 36 36 20 ...?..*{ MC 1.66 
00000010  41 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 A....... ........
00000020  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000030  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000040  00 00 00 00 00 00 00 00  00 47 53 43 41 2d 32 4b ........ .GSCA-2K
00000050  51 4b 2d 41 59 33 43 2d  4c 43 51 58 00 4d 63 74 QK-AY3C- LCQX.Mct
00000060  69 74 74 6c 65 73 00 00  00 00 00 00 00 00 00 00 ittles.. ........
00000070  00 00 00 3d                                      ...=

Server sends this back

00000000  1d 35 01 00 ae 47 65 1c  22 b9 52 75 00 00 00 00 .5...Ge. ".Ru....
00000010  00 00 52 75 00 00 2a 7b  4d 43 20 31 2e 36 36 20 ..Ru..*{ MC 1.66 
00000020  41 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 A....... ........
00000030  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000040  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000050  00 00 00 00 00 00 00 00  00 00 00 00 00 00 3a 9d ........ ......:.
00000060  00 00 52 37 00 00 06 3a  68 74 74 70 3a 2f 2f 77 ..R7...: http://w
00000070  77 77 2e 61 74 61 72 69  2e 63 6f 6d 2f 73 75 70 ww.atari .com/sup
00000080  70 6f 72 74 2f 6b 62 2f  33 32 36 36 00 00 00 00 port/kb/ 3266....
00000090  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
000000A0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
000000B0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
000000C0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
000000D0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
000000E0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
000000F0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000100  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000110  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000120  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000130  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000140  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000150  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000160  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000170  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000180  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000190  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
000001A0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
000001B0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
000001C0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
000001D0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
000001E0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
000001F0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000200  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000210  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000220  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000230  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000240  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000250  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000260  00 00 00 00 00 00 00 03                          ........ 

I send the same information again

00000074  fd c7 02 01 00 00 2a 7b  4d 43 20 31 2e 36 36 20 ......*{ MC 1.66 
00000084  41 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 A....... ........
00000094  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
000000A4  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
000000B4  00 00 00 00 00 00 00 00  00 29 62 00 00 00 3a 9d ........ .)b...:.
000000C4  00 00 52 37 00 00 06 3a  9c 2f 44 2d c4 e6 ff 0f ..R7...: ./D-....
000000D4  bc 2b 5f 0b 47 53 43 41  2d 32 4b 51 4b 2d 41 59 .+_.GSCA -2KQK-AY
000000E4  33 43 2d 4c 43 51 58 00  4d 63 74 69 74 74 6c 65 3C-LCQX. Mctittle
000000F4  73 00 00 00 00 00 00 00  00 00 00 00 00 00 62 00 s....... ......b.

Server responds 

00000268  1d 35 03 00 00 01 00 0e  0a d0 83 b5 23 28 01 00 .5...... ....#(..
00000278  68 74 74 70 3a 2f 2f 77  77 77 2e 61 74 61 72 69 http://w ww.atari
00000288  2e 63 6f 6d 2f 73 75 70  70 6f 72 74 2f 6b 62 2f .com/sup port/kb/
00000298  33 32 36 36 00 00 00 00  00 00 00 00 00 00 00 00 3266.... ........
000002A8  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
000002B8  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
000002C8  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
000002D8  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
000002E8  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
000002F8  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000308  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000318  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000328  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000338  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000348  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000358  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000368  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000378  00 00 00 00 00 00 00 9d  3a 00 00 37 52 00 00 3a ........ :..7R..:
00000388  06 00 00 2d 44 2f 9c 0f  ff e6 c4 0b 5f 2b bc 45 ...-D/.. ...._+.E
00000398  34 45 32 44 45 42 34 00  00 00 00 48 64 41 00 c0 4E2DEB4\. ...HdA..
000003A8  f8 29 03 00 01 01 00 f8  9e 3a 03 a8 99 3a 03 00 .)...... .:...:..
000003B8  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
000003C8  00 00 00 00 00 00 00 00  00 00 00 7a 1d 62 25 00 ........ ...z.b%.
000003D8  00 00 a4 76 65 72 73 69  6f 6e 73 2f 54 65 73 74 ...versi ons/Test
000003E8  44 72 69 76 65 55 6e 6c  69 6d 69 74 65 64 2d 4f DriveUnl imited-O
000003F8  6e 6c 69 6e 65 44 69 73  74 72 69 62 2d 4d 43 20 nlineDis trib-MC 
00000408  31 2e 36 36 20 41 2e 65  78 65 00 00 00 00 00 00 1.66 A.e xe......
00000418  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000428  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000438  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000448  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000458  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........
00000468  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 ........ ........

After this it becomes encrypted
Me:

00000104  fd c7 04 01 0a d0 83 b5  23 28 06 00 00 01 00 0e ........ #(......
00000114  01 1a 81 7c cf 45 60 14  53 6f 5f b9 8b ff e7 2b ...|.E`. So_....+
00000124  61 29 de 13 94 67 0e 25  e5 ac 8b 02 63 f1 25 7e a)...g.% ....c.%~
00000134  a4 f7 99 be 21 40 7f c0  f5 22 8a 35 b4 ac 2d 34 ....!@.. .".5..-4
00000144  23 b7 a7 80 79 4c 68 85  1e 74 60 15 8e 65 2b 11 #...yLh. .t`..e+.
00000154  c5 45 0e 50 9e 31 ba a5  d0 5f b6 d6 a4 4f 70 a0 .E.P.1.. ._...Op.
00000164  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000174  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000184  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000194  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
000001A4  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
000001B4  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
000001C4  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
000001D4  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
000001E4  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
000001F4  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000204  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000214  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000224  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000234  f6 f9 68 65                                      ..he

Server:

00000478  1d 35 05 00 0a d0 83 b5  23 28 00 00 00 01 00 0e .5...... #(......
00000488  04 0a 00 00 50 47 4d 5a  e8 bb 11 6c ee 82 22 a5 ....PGMZ ...l..".
00000498  15 1b 74 18 59 09 12 b0  a4 59 dd ed 17 10 62 f1 ..t.Y... .Y....b.
000004A8  e4 35 c5 6e df f7 63 51  9d 0f 68 25 cf ac 1f 60 .5.n..cQ ..h%...`
000004B8  35 6c 33 3d 9c 29 fb bf  6a 8a e6 8e a2 7f 9d dc 5l3=.).. j.......
000004C8  62 a6 40 ac d8 92 70 66  ad 76 fb e5 16 3d 03 89 b.@...pf .v...=..
000004D8  a5 d3 b4 a4 41 9e 67 86  be 1f f4 17 d6 8b b8 a2 ....A.g. ........
000004E8  52 58 03 1a 7c 7a 0c 50  78 e2 ca b1 bb 9f 7a 07 RX..|z.P x.....z.
000004F8  78 cd be ec 57 77 88 6b  09 fa 14 b9 6f 0c ac c0 x...Ww.k ....o...
00000508  4c 9a 16 e9 11 d8 b7 c2  f7 4f a0 3e e0 dd be fe L....... .O.>....
00000518  ce 1a 3a a0 63 c0 01 15  6d ec 8c 1b 3e e7 a0 00 ..:.c... m...>...
00000528  2c 5b 5d 86 ed ee 6c 69  df 7a b8 47 d8 82 69 e6 ,[]...li .z.G..i.
00000538  c7 21 eb e0 b9 47 9e a1  ca 5c 5d 3e 00 01 c7 51 .!...G.. .\]>...Q
00000548  3f 04 c4 06 f5 5a 43 14  03 65 84 ef a4 4f 70 a0 ?....ZC. .e...Op.
00000558  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000568  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000578  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000588  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000598  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
000005A8  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
000005B8  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
000005C8  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
000005D8  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
000005E8  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
000005F8  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000608  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000618  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000628  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000638  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000648  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000658  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000668  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000678  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000688  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000698  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
000006A8  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
000006B8  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
000006C8  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
000006D8  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
000006E8  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
000006F8  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000708  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000718  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000728  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000738  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000748  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000758  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000768  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000778  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000788  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000798  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
000007A8  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
000007B8  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
000007C8  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
000007D8  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
000007E8  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
000007F8  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000808  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000818  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000828  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000838  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000848  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000858  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000868  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000878  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 a4 4f 70 a0 ..he.Op. ..he.Op.
00000888  f6 f9 68 65 a4 4f 70 a0  f6 f9 68 65 00 d8 ad 79 ..he.Op. ..he...y
00000898  a8 ef 0c 3e                                      ...>

and so on... 
```

除了连接玩家和列出游戏之外，服务器似乎没有做太多事情。大部分游戏玩法是从玩家转移到玩家 ip，顺便说一句，它是纯文本的。如果我能破译这些数据包，我应该能够替换他们的连接/列表服务器并且仍然可以玩。

感谢您的关注，也许我会很幸运，有人会看到我没有看到的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:25:13.127

仅查看数据并找出格式几乎是不可能的。在最好的情况下，它可以用于超级简单的格式（例如，只是一个由空终止符分隔的字符串列表）。但是，一旦您有更复杂的东西，您将不知道数据的含义。

我建议从另一个角度来解决这个问题。据我了解，您应该有一个服务器客户端。您可以对其进行逆向工程并查看它与服务器的通信方式。这也相当耗时。但是，通过这种方式，您将能够更多地了解他们正在使用的协议。

# iphone - Facebook 设置 iOS 6 - 应用名称未显示在允许应用列表中

> ID：12645315
> 
> 赞同：3
> 
> 时间：2012-09-28T18:19:25.600
> 
> 标签：iphone, facebook, settings, ios6, facebook-login

在 iOS 6 中，用户可以通过设置>Facebook 登录 Facebook。该视图中有一个部分列出了用户可以选择允许/禁止使用 Facebook 帐户的应用程序。

我已将 FacebookSDK.framework 集成到我的应用程序中，并且此列表中的应用程序会出现一行。只是，我的应用程序的名称没有列出，它的应用程序图标也没有列出。

我已经进行了几次搜索，但似乎找不到将名称/图标添加到列表中的方法。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T18:19:04.023

您需要使用帐户存储方法来请求访问权限：

```
-(void)authenticateFacebook {
if([UIActivityViewController class] ) {
    NSArray *faceBookPermissions = @[@"publish_stream"];
    ////ACFacebookAppVersionKey: @"1.0",

    NSDictionary *faceBookOptions = @{
ACFacebookAppIdKey: @"xxxxxxxx",
ACFacebookPermissionsKey:faceBookPermissions,
ACFacebookAudienceKey:ACFacebookAudienceFriends
    };

    AppDelegate *del = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    if(del.accountStore == nil) {
        del.accountStore = [[ACAccountStore alloc] init];
    }
    if(del.facebookAccount == nil) {
        ACAccountType *facebookAccountType = [del.accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
        [del.accountStore requestAccessToAccountsWithType:facebookAccountType
                                                   options:faceBookOptions
                                                completion:^(BOOL granted, NSError *error)
         {
             if (granted) {
                 NSArray *accounts = [del.accountStore accountsWithAccountType:facebookAccountType];
                 del.facebookAccount = [accounts lastObject];
                 NSLog(@"got an account");
                 [self performSelectorOnMainThread:@selector(gotAnAccount) withObject:self waitUntilDone:NO];
             } else {
                 NSLog(@"No account");
                 //fail gracefully
                 [self performSelectorOnMainThread:@selector(noAccount) withObject:self waitUntilDone:NO];
             }
         }];
    }
} 
```

完成后，您可以使用您的应用程序 ID 发布到 Facebook，如下所示：

```
 -(void)postToFacebook:(NSDictionary *)parameters  {

    AppDelegate *del = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    NSURL *feedURL = [NSURL URLWithString:@"https://graph.facebook.com/me/feed"];

    SLRequest *request = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                            requestMethod:SLRequestMethodPOST
                                                      URL:feedURL
                                               parameters:parameters];
    request.account = del.facebookAccount;
    [request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
        NSString *alertText;
        if (error) {
            alertText = [NSString stringWithFormat:
                         @"error: domain = %@, code = %d",
                         error.domain, error.code];
            [self performSelectorOnMainThread:@selector(errorWithRequest:) withObject:alertText waitUntilDone:NO];
        } else {
            alertText = @"Posted action, id: %@";
            [self performSelectorOnMainThread:@selector(cancelButtonAction:) withObject:nil waitUntilDone:NO];

        }
        NSLog(@"%@",alertText);
    }];
} 
```

您需要您的应用程序委托拥有 accountStore 和 account 变量，然后创建使用的 @selector 方法。请注意，如果完成处理程序对 UI 执行任何操作，则它们应该在主线程上运行，否则您将等待一段时间等待完成处理程序 UI 代码运行。

# command-line - 来自 Mac 终端的 sqlite3 命令行参数

> ID：12645316
> 
> 赞同：0
> 
> 时间：2012-09-28T18:19:27.297
> 
> 标签：command-line, sqlite

我正在尝试自动化一些脚本。现在，我这样做：

```
sqlite3 testDB < mySqlScript.sql 
```

我需要多次运行此脚本，只需在脚本中更改我的 TableName。所以而不是手动做

```
CREATE TABLE sometableXXX
insert into someTableXXX 
```

我希望能够将某些内容传递到 mySqlScripts.sql 中，以便我可以自动将该值插入 for

```
someTableXXX 
```

那可能吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:25:58.957

是整个 SQL 代码不同还是只是表名不同？然后我会做这样的事情：

```
for i in tableName1 tableName2 tableName3 etc ; do
    sed -e "s/someTableXXX/${i}/g" mySqlScript.sql | sqlite3 testDB
done 
```

# haskell - 是否有适用于 TLS 的 Haskell IMAP 库？

> ID：12645319
> 
> 赞同：7
> 
> 时间：2012-09-28T18:19:44.340
> 
> 标签：haskell, imap

HaskellNet 似乎是 Haskell 唯一可用的 IMAP 客户端库，但它似乎不支持 TLS 连接，这是访问 Gmail 的 IMAP 服务器所必需的。是否有任何替代的 Haskell 库或解决方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-29T23:16:57.167

很抱歉在这里挖出一篇相当老的帖子，但是当我不久前遇到同样的问题时，我遇到了这个帖子，并且后来编写了一个库，为 HaskellNet 添加了 SSL/TLS 支持。它使用了另一个库 connection，我认为在最初发布这个问题时不存在，这使得添加 TLS 支持比以前容易得多。你可以在这里找到它：http: [//hackage.haskell.org/package/HaskellNet-SSL](http://hackage.haskell.org/package/HaskellNet-SSL)

希望这对偶然发现此线程以查找有关连接到 gmail 帐户的信息的其他任何人都有用。事实上，对于 gmail，[存储库中有用于连接到其 IMAP/SMTP 服务器的](https://github.com/dpwright/HaskellNet-SSL/blob/master/examples/gmail.hs)示例代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T03:35:53.647

在 hackage 上查看[imapget](http://hackage.haskell.org/package/imapget)。它通过创建代理端口来绕过这个限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-11T22:36:09.407

自从您上次发布以来，似乎出现了新库：[imap](https://hackage.haskell.org/package/imap)：一个高效的 IMAP 客户端库，带有 SSL 和流媒体。

# java - FTP 异常 501“路径名”超过 8 个字符

> ID：12645325
> 
> 赞同：0
> 
> 时间：2012-09-28T18:20:12.087
> 
> 标签：java, url, ftp, uri, mvs

我正在尝试使用 FTP 协议通过 URI 访问文件。出于明显的安全原因，我不得不进行一些更改，但这似乎是问题的来源。

我的URI如下： `ftp://user:pasword@host.net/u/Bigpathname/XYZ/ABC/BigPathname/bigpathname/xyz/abc/MY_LOG.LOG`

我看到了这个例外：

```
sun.net.ftp.FtpProtocolException: CWD Bigpathname:501 “Bigpathname”中的限定符超过 8 个字符
```

这真的很令人困惑，因为我可以使用 CD 命令从 Windows 7 命令行访问该文件。一次一个目录和一个完整路径。

我发现一篇文章提到 MVS 文件名必须是 8 个或更少的字符，但这并不能解释我如何从命令行访问这些相同的文件！它们确实存在，那里有我可以下载手册的数据，但我无法通过 Java 中的 URI 到达那里。

PS 我使用 .toURL().openStream() 在我的本地机器上获取文件就好了，只有当我尝试从我的服务器获取它们时它才会失败。

**编辑 10 月 1 日**

我可以使用 FileZilla 和 Windows 7 命令行中的基本 FTP 客户端访问 MVS 主机上的文件 - 但我仍然无法从 URI/URL 获取它们。我下载了一个非常基本的 Java 构建的 FTP 客户端，并尝试从那里访问我的程序中的同一个文件，并且路径有效，但是因为我的文件名中有一个点“MY_LOG.LOG”，所以我对此`File does not exist 501 Invalid data set name "MY_LOG.LOG". Use MVS Dsname conventions.` 感到非常困惑.. .

**编辑十月 1 日下午 :)**

好的，我终于让它在我的 Java 代码中与 FTP 客户端一起工作——但我仍然想使用 URL 类，因为我在本地和远程机器上都有日志。有没有办法对 URL 字符串进行编码，以便它可以使用 FTP 协议从远程计算机检索文件？我不确定它在 Java URL 类中是如何工作的，但在 FTP 客户端中，我必须使用 CWD，然后使用 RETR 命令。

如果我能做到这一点，那么我就有一个获取所有日志的解决方案，否则我将不得不检测它是文件还是 ftp URL，然后表现不同。不是世界末日，但不是我想要的……

尝试仅使用 URL 获取文件的代码如下：（sysc 是有效主机）

```
void testFTP()
{
   String ftp = "ftp://user:pword@sysc/u/Xxxxxxxxxx/ICS/YT7/XxxxxXxxxxxxx/xxxxxxxxx/logs/xxxxxxxx/XX_YT.LOG";

   try
   {
       URI uri = new URI(ftp);
       URL ftpFile = uri.toURL();

       BufferedReader in = new BufferedReader(new InputStreamReader(ftpFile.openStream()));

       String inputLine;
       while ((inputLine = in.readLine()) != null)
        System.out.println(inputLine);

       in.close();
    }
    catch(Exception e)
    {
       e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T20:21:14.603

尝试使用路径的短名称。就像是`/U/BIGPAT~1/XYZ/ABC/BIGPAT~1/BIGPAT~1/XYZ/ABC/MY_LOG.LOG`

您可以使用 . 找到任何长度超过 8 个字符的目录的短名称`dir /x`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:08:49.977

鉴于服务器实现的变化（和错误），FTP 客户端是出了名的难以编写。

我敢打赌，MVS 不完全支持`sun.net.ftp.FtpClient`，这是当您调用`URL.openStream`FTP URL 时在后台使用的类。

[Apache Commons Net 库](https://commons.apache.org/net/)应该支持 MVS，但听起来您已经找到了一个工作客户端。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T18:23:04.360

在这种情况下，我认为问题也与服务器相关，它对我来说对 Filezilla 服务器来说一切正常，除非文件名长度（包括目录）超过 255 个字符，但是如果你想将 URL 类与另一个 FTP 一起使用，你必须覆盖或实现你自己的 URLStreamHandlerFactory。

```
 URL.setURLStreamHandlerFactory(...); 
```

我还没有找到任何我最喜欢的 java FTP 客户端女巫是 Apache 的，所以我开发了一个，但可能需要一些修饰。

```
package net.custom.streamhandler.apacheftp;

import java.io.IOException;
import java.io.InputStream;
import java.net.SocketException;
import java.net.URL;
import java.net.URLConnection;
import java.net.URLStreamHandler;
import java.net.URLStreamHandlerFactory;

import org.apache.commons.net.ftp.FTPClient;
import org.apache.commons.net.ftp.FTPReply;

public class ApacheURLStreamHandlerFactory implements URLStreamHandlerFactory { 
    public URLStreamHandler createURLStreamHandler(String protocol) { 
        //this will only override the chosen protocol  
        if ( protocol.equalsIgnoreCase("ftp") ) 
            return new CustomHandler(); 
        else 
            return null;
    } 
}
class CustomHandler extends URLStreamHandler { 
    protected URLConnection openConnection(URL url) 
       throws IOException { 
        return new CustomURLConnection(url); 
    } 
} 

class CustomURLConnection extends URLConnection { 

    int reply;
    FTPClient ftp = new FTPClient();
    InputStream in;
    static int defaultPort = 21; 
    static String defaultPath = "/"; 

    CustomURLConnection ( URL url) 
        throws IOException { 
        super( url ); 
    } 
    synchronized public void connect() throws IOException {  
            try {
                int port; 
                if ((port = url.getPort()) == -1 ) 
                    port = defaultPort; 

                ftp.connect(url.getHost(), port);
                String login = "anonymous";
                String password = "";
                if(url.getAuthority().indexOf(':')>-1 && 
                        url.getAuthority().indexOf('@')>-1){
                            String []auxArray = url.getAuthority().replaceAll("@", ":").split(":");
                            login = auxArray[0];
                            password = auxArray[1];
                }               

                ftp.login(login, password);             

                reply = ftp.getReplyCode();
                if (FTPReply.isPositiveCompletion(reply)) {
                    System.out.println("Connected Apache Success");
                } else {
                    System.out.println("Connection Apache Failed");
                    ftp.disconnect();
                }
                in = ftp.retrieveFileStream(url.getFile());

            } catch (SocketException ex) {
                ex.printStackTrace();
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        connected = true;        

    } 
    synchronized public InputStream getInputStream() 
       throws IOException { 
        if (!connected) 
            connect(); 
        return ( in );  
    }  
} 
```

*请记住，您可以通过这种方式实现处理 java.net.URL 的不同协议的新方法。

你的代码...

```
 ...
{
   String ftp = "ftp://user:pword@sysc/u/Xxxxxxxxxx/ICS/YT7/XxxxxXxxxxxxx/xxxxxxxxx/logs/xxxxxxxx/XX_YT.LOG";    
   try
   {
       URL.setURLStreamHandlerFactory(new ApacheURLStreamHandlerFactory()); 
    ... 
```

再见

**（犯错是人，宽恕是神）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T23:13:49.373

您是否考虑过使用 RMI 来传输文件，您可以在不使用 ftp 的情况下将文件的直接路径作为参数提供，然后将文件以字节数组的形式发送回。

# ruby-on-rails - 从github克隆后安装rails的正确方法是什么？

> ID：12645328
> 
> 赞同：0
> 
> 时间：2012-09-28T18:20:23.423
> 
> 标签：ruby-on-rails

我从 github 克隆了 rails 4 并想从本地 repo 安装 rails。进行安装的最佳方法是什么？我从一个新的 gemset 开始运行 install.rb 但由于缺少 gem 而失败。任何人都知道一个帖子，走过这个？我应该先从远程 github repo 安装，然后运行 ​​install.rb 文件吗？

另外，只想在这里说清楚。我不是在尝试使用 gem install 或在我的 gem 文件中使用 :git 进行安装。请不要将这些说明放在您的评论中。当我遇到未修复的错误时，我绝对想从本地克隆安装，作为修复 Rails 的第一步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T18:28:34.957

捆绑本地宝石。

```
gem "rails", :path => "~/your/rails/checkout"
gem "activerecord", :path => "~/your/rails/checkout"

etc... 
```

# json - 出现在实体框架中的不需要的导航属性

> ID：12645330
> 
> 赞同：1
> 
> 时间：2012-09-28T18:20:57.890
> 
> 标签：json, entity-framework, serialization

我正在使用实体框架来创建一个模型，我对实体框架很陌生，所以请耐心等待。

我希望我的数据库始终是所有生成的结果，所以我不想对模型本身进行修改。我想对数据库进行所有修改，然后点击“从数据库更新模型”。这一直在游泳！但是，如果我在两个表之间具有一对一的关系，并且我在数据库中设置了外键约束，我会在子表中获得一个导航属性，该属性可以返回到父表。

因此，如果我想从孩子访问父母，我可以做 child.parent.fieldName

这在理论上听起来不错，但是当我需要为实体框架创建的 JSON 序列化对象时，我的问题就出现了。我总是得到一个错误，因为它试图将父对象与子对象一起序列化。这通常在这一点上有一个无效的状态，所以.. A）它不能被序列化，B）我不想要所有额外的信息。

我是否以某种方式错误配置了数据库？有没有办法让数据库指定我只需要模型中的 Parent.Child Navigation 属性？而不是 Child.Parent？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T19:53:42.537

> 我是否以某种方式错误配置了数据库？有没有办法让数据库指定我只需要模型中的 Parent.Child Navigation 属性？而不是 Child.Parent？

不，数据库不知道您打算在其上使用某些工具的意图。如果您不想要导航属性，则必须在 EDMX 中通过删除它来更改它，但有时您需要该属性，但您也需要序列化。在这种情况下，您必须修改用于生成类的策略（如果您不使用 T4 模板，这将非常困难）以使用一些依赖于所使用的序列化 API 的特殊属性来将某些属性标记为未序列化。

正确的方法不是序列化实体，而是创建从实体填充的特殊数据传输对象，这些对象仅包含您要序列化的属性/数据，因此您不会遇到此问题。

# qt4 - QMake 不更新子目录 makefile

> ID：12645333
> 
> 赞同：10
> 
> 时间：2012-09-28T18:21:19.887
> 
> 标签：qt4, qmake, qt4.8

* * *

## **问题**

我正在使用 qmake 和 QT Creator 开发一个多可执行 QT 项目。每个可执行文件都有自己的 .pro 文件，所有这些文件都包含在一个总体 .pro 文件（模板=子目录）中。每个单独的 .pro 文件还包括一个通用的 .pri 文件，该文件设置 DESTDIR 以便所有可执行文件最终位于同一位置。这个 DESTDIR 取决于它是被编译为调试还是发布。在我们通过另一个子目录 .pro 添加了一组可执行文件之前，这一直非常有效。整体设置如下所示：

*   All.pro
*   | - Project1.pro
*   | - Project2.pro
*   | - Subdirs.pro
*   | -- | - Project3.pro
*   | -- | - Project4.pro

如果你有一个新签出的副本，你可以运行 qmake 并且一切都会工作，直到你从调试切换到发布，反之亦然。当您这样做时，Project1.pro 和 Project2.pro 更新就好了，并将它们的可执行文件放在正确的目录中，但 Project3.pro 和 Project4.pro 使用旧目录。

* * *

## **尝试**

如果我手动删除所有受影响的 makefile，qmake 将生成新的。我想我可以编写某种预编译命令来每次删除所有 makefile，但这似乎是错误的做事方式，更不用说我必须花费大量时间来确保它在我们所有的平台上都能正常工作.

我在 QT 4.6.4 到 4.8.1 中试过这个

当我使用 QT Creator 时，我通过不同的构建配置在调试和发布模式之间切换，这模仿了我在命令 lie 上所做的事情（即添加或删除 CONFIG+=debug）

* * *

## **问题**

*   是什么阻止 qmake 更新 makefile？
*   如果它只是 qmake 中的一个错误，那么最好的解决方法是什么？

* * *

非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T14:27:37.467

即使 QMake 文档表明它仅适用于项目模式（创建 .pro 文件），请尝试将`-r`选项添加到 qmake 以强制它通过目录递归。

这是我们过去在多层次深 SUBDIR 项目中使用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:51:41.627

我们遇到了同样的问题，并通过在调试/发布之间切换后从顶级目录运行“make qmake”来解决它。

# objective-c - 如何关闭 UITableViewCell 的删除模式？

> ID：12645334
> 
> 赞同：0
> 
> 时间：2012-09-28T18:21:19.440
> 
> 标签：objective-c

我正在使用 UITableViewCell。

当用户被取消删除时，我想以编程方式将 UITableViewCell 的模式从删除更改为编辑。

请让我知道如何更改。

谢谢您的帮助。

这是尝试代码。

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {

    UITableViewCell *aCell;
    aCell = [self tableView:gbl_tableView cellForRowAtIndexPath:gbl_indexPath];

    if (buttonIndex == 0){
        NSUInteger row = (NSUInteger) [gbl_indexPath row];
        [userListStr removeObjectAtIndex:row];
        [userImage removeObjectAtIndex:row];
        [gbl_tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:gbl_indexPath]
                             withRowAnimation:UITableViewRowAnimationAutomatic];
    }
    else if (buttonIndex == 1) {
        // When user canceled.  
        [aCell setEditing:NO animated:YES]; <==== ??? I can't know how.. This code don't work.

    }

} 
```

![在此处输入图像描述](../Images/8221078d80fe3758a565825a4f55d34c.png) 从删除到编辑->![在此处输入图像描述](../Images/4312702eebb6d7ee2be3263edc5fbd12.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:31:10.713

有可能`aCell`是null/nil吗？我相信从 UITableViewController 中提取单元格的正确方法是：

```
UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:nowIndex]; 
```

在你的情况下，它会是

```
UITableViewCell *cell = [gbl_tableView cellForRowAtIndexPath: gbl_indexPath]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:32:46.030

你试过这个方法吗？

```
- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView  editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath 
```

你可以退货`UITableViewCellEditingStyleNone`

# java - jvm垃圾收集太不频繁 - clojure

> ID：12645338
> 
> 赞同：5
> 
> 时间：2012-09-28T18:21:45.770
> 
> 标签：java, clojure, garbage-collection, jvm

我正在开发一个 clojure 应用程序，它似乎使用了比它应该使用的更多的内存。我认为这是内存泄漏，但在使用 jvisualvm 查看后，似乎 GC 运行的频率不够高。红色轮廓是我手动调用 GC 的地方。为什么它似乎在使用 30mb 左右时分配 300mb？

![](../Images/98b0a53199e9fe04f6fd023fccd13425.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T18:27:44.980

如果您认为堆太大，请使您的堆更小。GC 只在必要时运行。

（多年来，控件发生了变化，但我认为它们仍然是初始堆大小、增量大小和最大大小。如果您的初始堆大小很小，只要没有堆使用中的“高水位线”将其推高。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T18:29:06.037

JVM 具有调节内存管理的参数，包括初始分配的数量和要分配的最大数量。除了这些参数，JVM 无法知道您认为合理的内存使用量。据我所知，JVM 没有要求按任何特定的时间表运行 GC，也没有任何目标内存使用量是 Java 定义的一部分。

假设您说 JVM 可用的最大内存是 100 MB，而您目前正在使用 50 MB，包括死对象。您有一个需要 1 MB 的 NEW。JVM 应该运行 GC 吗？这不是必需的：在达到最大值之前您有足够的空间。这是个好主意吗？这很难说。使用大量内存或执行大量 GC 哪个更糟？

作为 Java 程序员，您通常不应该知道或关心。只要它在声明你内存不足之前进行一次GC，它有什么区别？如果您的应用程序使用的内存过多，以至于其他应用程序无法分配所需的内存，则可以更改运行时参数以减少您将使用的最大值。那应该是重要的事情的极限。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-28T18:42:54.317

JVM 使用分代垃圾收集器。如果您通常在任何给定时间都有大约 30MB 的内容，也许您应该将*新一代*大小设置为 60MB 左右。这样垃圾收集器应该在它们被提升到老一代之前收集你之前传递的所有东西（收集的频率要低得多）。

Sun/Oracle JVM有大量的[性能调整选项](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html#PerformanceTuning)。您可能要为此设置`-XX:NewSize=60m`。

你想设置哪个选项我可能是错误的——可能有一个更适合这个问题。但是，我认为使用这些 GC 标志进行调整是一个比其他答案中建议的仅仅减少总堆大小更好的选择。

***更新：***这是我在设置特定于生成的堆大小的主题上找到的更多信息：

[调优 JVM：指定堆大小值](http://docs.oracle.com/cd/E13222_01/wls/docs81/perform/JVMTuning.html#1109778)

# c - 函数计算

> ID：12645339
> 
> 赞同：3
> 
> 时间：2012-09-28T18:21:50.263
> 
> 标签：c

```
double cost_factor(int num_of_sections, int num_of_students) {
    double cost;
    cost = 35 * num_of_sections / num_of_students;
    printf("Cost = %.2lf\n", cost);
    return cost;

} 
```

无论我为 num_of_sections 和 num_of_students 输入什么，我都会得到 1.00 的返回值。如果我输入 11 (num_of_sections) 和 364 (num_of_students)，我得到 1.00，虽然它应该是 1.06。任何人都可以识别他们的错误吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T18:23:00.583

你正在用整数做数学。所以你会得到整数值。

```
const = 35 * num_of_sections / num_of_students 
```

即使`cost`是 double 也会给你一个 int ，因为所有组件都是`ints`.

您将需要对值进行类型转换以获得`double`输出

```
cont = 35.0 * (double)num_of_sections /  (double)num_of_students; 
```

请注意，这太过分了，将等式中的一个值提升为两倍就足够了。

```
cont = 35.0 * num_of_sections / num_of_students; 
```

然后，C 会自动为您提升其他值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T18:23:42.527

两个整数相除返回一个整数，去掉了小数部分。试试这个：

```
cost = 35.0 * num_of_sections / num_of_students; 
```

`35.0`是双精度文字而不是整数文字。这将导致表达式`35.0 * num_of_sections`被评估为`double * double`（在计算之前将`int`转换为 a `double`），然后除法也将使用两个双精度数进行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T18:25:02.857

问题是促进`num_of_students`和`num_of_sections`加倍，以便`cost`可以正确计算。

```
double cost(double num_of_students, double num_of_sections) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T18:27:05.273

看看你所有的操作：它们都只涉及整数，所以 C 做整数数学。最快的解决方法是做`35`a `double`，这将导致`double`其他操作数的提升（如果操作中的任何操作数是`double`另一个被提升）。

因此，您可以执行以下任一操作：

```
cost = ((double)35) * num_of_sections / num_of_students; 
```

或更好，

```
cost = 35\. * num_of_sections / num_of_students; 
```

（有些人更喜欢`35.0`，但末尾的点`35.`足以指定它是`double`文字；`35`相反，单独用作`int`文字）

# machine-learning - 是否存在使用 Perceptron 算法的情况，我不想在每次迭代之前置换数据？

> ID：12645347
> 
> 赞同：0
> 
> 时间：2012-09-28T18:22:31.033
> 
> 标签：machine-learning, perceptron

我的机器学习教科书问了这个问题，讨论感知器算法，实在想不出满意的答案。

有哪些案例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:36:27.843

与任何没有全局最优解的迭代学习算法一样，感知器算法将从起点收敛到局部最优解。这通常意味着早期的数据会比后期的影响更大。

在感知器算法的大多数应用中，您尝试通过以随机顺序多次应用训练数据来消除这种偏差。

在某些应用程序中，这种偏差是学习问题的一部分，因此顺序很重要，并且最终结果在没有随机化的情况下会更好。

# c# - StringBuilder.ToString() 抛出“索引超出范围”异常

> ID：12645351
> 
> 赞同：35
> 
> 时间：2012-09-28T18:23:01.010
> 
> 标签：c#, exception, tostring, stringbuilder

我非常感谢有人帮助我解决以下问题：

我不时遇到以下异常：

> 指数超出范围。必须是非负数且小于集合的大小。参数名称：chunkLength

上`stringBuilder.ToString()`。

奇怪的是，如果我把`stringBuilder.ToString()`手表放进去，它工作得很好。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-28T18:36:00.807

看起来这是一个多线程问题。我锁定了线程以防止同时对 stringBuilder 进行多次访问。

```
public void AddString(string s)
{
  lock(this.LockObject)
  {
     StringBuilder.AppendLine(s);
  }
} 
```

# asp.net-mvc - Ninject 调用方法返回构造函数参数

> ID：12645353
> 
> 赞同：0
> 
> 时间：2012-09-28T18:23:05.783
> 
> 标签：asp.net-mvc, ninject

我正在尝试在我们的应用程序中使用 Ninject 绑定服务并指定构造函数参数。构造函数参数是一个可以从查询字符串或 cookie 中提取的值。我们目前拥有的代码是这样的

```
kernel.Bind<SomeService>()
      .ToSelf()
      .InRequestScope()
      .WithConstructorArgument("someID", ctx =>
           // Try to get it from the posted form values
           System.Web.HttpContext.Current.Request.Form["someID"] != null ? 
           long.Parse(System.Web.HttpContext.Current.Request.Form["someID"]) :                                          

           // Try to get it from the query string
           System.Web.HttpContext.Current.Request.QueryString["someID"] != null ?
           long.Parse(System.Web.HttpContext.Current.Request.QueryString["someID"]) 

           : 0); 
```

这有效，但非常难看。我意识到还有其他方法可以实现这一点，例如将 Form 值或 QueryString 值作为参数传递，但我们喜欢在 Binding 中定义它。理想情况下，我们想做的是这样的：

```
 kernel.Bind<SomeService>()
          .ToSelf()
          .InRequestScope()
          .WithConstructorArgument("someID", ctx => GetSomeID()); 
```

据我所知，这是不可能的。是否有另一种方法可以将构造函数参数注入逻辑分解为另一种方法，这样我们就不必嵌套一行 if 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:12:52.743

我建议通过接口绑定对查询字符串/HTTP 表单的依赖。这种方法似乎更符合依赖注入模式（从特定实现和类中解耦代码）。

```
public interface IParameters
{
    string SomeID { get; }
}

public class ParametersFromHttpContext
{
    IQueryString _queryString;
    IRequestForm _requestForm;

    public ParametersFromHttpContext(IQueryString queryString, IRequestForm requestForm)
    {
        _queryString = queryString;
        _requestForm = requestForm;
    }

    public string SomeID
    {
        get
        {
            return
                // Try to get it from the posted form values
               _requestForm["someID"] != null ? 
               long.Parse(_requestForm["someID"]) :                                          

               // Try to get it from the query string
               _queryString["someID"] != null ?
               long.Parse(_queryString["someID"]) 

               : 0;
        }
    }
} 
```

现在您想要的逻辑可以包含在绑定中，而无需在内核中引用 HttpContext。

```
kernel.Bind<IParameters>().To<ParametersFromHttpContext>(); 
```

# c# - ParallelEnumerable.Range 与 Enumerable.Range.AsParallel？

> ID：12645354
> 
> 赞同：7
> 
> 时间：2012-09-28T18:23:15.253
> 
> 标签：c#, .net, linq, parallel-processing

`ParallelEnumerable.Range` 和 和 有什么区别`Enumerable.Range(...).AsParallel()`？

`ParallelEnumerable.Range`创建范围分区（最适合每个项目的 cpu 时间相等的操作）

as`Enumerable.Range(...).AsParallel()`可能执行为`range`or`chunk`

有什么性能差异吗？我什么时候应该使用 which ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T18:35:47.323

如果你正在执行一个操作，它的 CPU 压力随着它的迭代而增长，那么你会想要使用它，`AsParallel`因为它可以在迭代时进行调整。但是，如果您只需要并行运行并且操作在迭代时不会产生更大的压力，那么请使用它，`ParallelEnumerable.Range`因为它可以立即对工作进行分区。

参考[这篇文章](http://blogs.msdn.com/pfxteam/archive/2007/12/02/6558579.aspx)以获得更详细的解释。

因此，假设您在每次迭代中执行一些复杂的数学运算，并且随着输入值的增长，数学运算需要更长的时间，您将希望使用`AsParallel`它来进行调整。但是，如果您将相同的选项与设置注册表设置之类的设置一起使用，您会看到性能下降，因为与此相关的开销`AsParallel`是不必要的。

# css - 为什么 :before 在我的代码中似乎只工作一次？

> ID：12645357
> 
> 赞同：1
> 
> 时间：2012-09-28T18:23:32.423
> 
> 标签：css

我正在使用 :before 在菜单项之前显示 webfont 图标。出于某种原因 :before 只在一个类上工作，而完全忽略了另一类。如果我将前面应该有图标的两个 li 上的两个类更改为工作类名称，则会显示该图标。

想法？

这是一个例子：http: [//jsfiddle.net/bigdmachine/erxjE/1/](http://jsfiddle.net/bigdmachine/erxjE/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:42:34.380

我宁愿将 CSS 更新为；

```
nav#al-top-menu .log-out a:before, 
nav#al-top-menu .setting a:before {
     content: "X";
     margin-left: 15px;
     margin-right: 5px;    
     font-family: 'WebSymbolsRegular';
     font-size: 14px;
     color: blue; 
```

}

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-28T18:33:37.327

我不认为你可以在`<ul>`这样的内部创建“免费”伪元素，列表应该只包含列表项。

# php - 在mysql中的一个查询中选择行以及总数

> ID：12645358
> 
> 赞同：7
> 
> 时间：2012-09-28T18:23:34.210
> 
> 标签：php, mysql, sql, select

假设我有一个表 t 并且表 t 有 15000 个条目

假设查询

```
SELECT * FROM t WHERE t.nid <1000 
```

返回 1000 行

但后来我只想要前 10 行，所以我做了一个 LIMIT

```
SELECT * FROM t WHERE t.nid <1000 LIMIT 10 
```

是否可以构造一个查询，其中除了使用上面的 LIMIT 子句返回 10 行信息之外，它还返回满足 WHERE 子句中设置的条件的行的总数，因此除了返回 10上面的行，它也返回 1000，因为总共有 1000 行满足 WHERE 子句......并且都在单个查询中返回

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T18:28:48.607

# 首选解决方案

首先，found_rows() 函数不可移植（它是一个 MySQL 扩展）并且**将被删除**。正如用户@Zveddochka 指出的那样，它已经在 MySQL 8.0.17 中被弃用。

但更重要的是，事实证明，**如果您使用正确的索引**，那么**运行两个查询实际上会更快**。该`SQL_CALC_FOUND_ROWS`指令是通过产生额外恢复成本的“虚拟扫描”实现的。当查询没有被索引时，这个成本将与 a 相同`COUNT()`，因此运行两个查询将花费双倍 - 即，使用`SQL_CALC_FOUND_ROWS`将使事情运行速度提高 50%。

但是当查询**被**正确索引时会发生什么？[Percona 的人检查了它](https://www.percona.com/blog/2007/08/28/to-sql_calc_found_rows-or-not-to-sql_calc_found_rows/)。事实证明，不仅`COUNT()`速度非常快，因为它只访问元数据和索引，而且查询`SQL_CALC_FOUND_ROWS`速度更快，因为它不会产生任何额外的成本；**两个查询组合的成本低于增强的单个查询的成本**：

> SQL_CALC_FOUND_ROWS 的结果如下：对于每个 b 值，执行非缓存需要 20-100 秒，预热后需要 2-5 秒。这种差异可以通过这个查询所需的 I/O 来解释——mysql 访问这个查询可以在没有 LIMIT 子句的情况下产生的所有 10k 行。
> 
> 结果如下：第一次运行此查询需要 0.01-0.11 秒，所有连续运行需要 0.00-0.02 秒。
> 
> 因此，正如我们所见，SELECT+COUNT 的总时间（0.00-0.15 秒）远小于原始查询的执行时间（2-100 秒）。让我们来看看解释...

那么该怎么办？

```
// Run two queries ensuring they satisfy exactly the same conditions

$field1 = "Field1, Field2, blah blah blah";
$field2 = "COUNT(*) AS rows";

$where  = "Field5 = 'X' AND Field6 = 'Y' AND blah blah";

$cntQuery = "SELECT {$field2} FROM {$joins} WHERE {$where}";
$rowQuery = "SELECT {$field1} FROM {$joins} WHERE {$where} LIMIT {$limit}"; 
```

现在第一个查询返回计数，第二个查询返回实际数据。

# 旧答案（仅对非索引表有用）

*不要这样做。如果您发现答案的这一部分比上面的部分更适合您，这几乎肯定是一个信号，表明您的设置中的其他东西不是最佳的 - 很可能您没有正确使用索引，或者您需要更新您的MySQL 服务器，或运行数据库分析/优化以更新基数统计信息*。

你可以，但我认为这将是一个性能杀手。

您最好的选择是使用`SQL_CALC_FOUND_ROWS`MySQL 扩展并发出第二个查询以使用 FOUND_ROWS() 恢复全部行数。

```
 SELECT SQL_CALC_FOUND_ROWS * FROM t WHERE t.nid <1000 LIMIT 10;
 SELECT FOUND_ROWS(); 
```

参见例如[http://www.arraystudio.com/as-workshop/mysql-get-total-number-of-rows-when-using-limit.html](http://www.arraystudio.com/as-workshop/mysql-get-total-number-of-rows-when-using-limit.html)

或者您可以简单地运行不带`LIMIT`子句的完整查询，并仅检索前十行。然后，您可以根据需要使用一个查询，并且还可以通过`mysql_num_rows()`. 这并不理想，但对于大多数查询来说也不是那么灾难性。

但是，如果您最后这样做，请**非常小心地关闭查询并释放其资源**：我发现检索不到完整的结果集并忘记释放 rs 句柄是[“元数据锁定”的一个突出原因](https://stackoverflow.com/a/60357929/1428679)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T18:27:22.837

你可以试试`SQL_CALC_FOUND_ROWS`，它可以在不再次运行语句的情况下获得总记录数。

```
SELECT SQL_CALC_FOUND_ROWS * FROM t WHERE t.nid <1000 LIMIT 10;   -- get records
SELECT FOUND_ROWS();                -- get count 
```

参考：[http ://dev.mysql.com/doc/refman/5.0/en/information-functions.html](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-08-01T10:19:07.410

> “是否可以构造一个查询，其中除了使用上面的 LIMIT 子句返回 10 行信息之外，它还返回满足 WHERE 子句中设置的条件的行的总数”

是的，可以通过使用窗口函数即`COUNT(*) OVER()`（MySQL 8.0+）在单个查询中执行这两项操作：

```
SELECT t.*, COUNT(*) OVER() AS cnt 
FROM t 
WHERE t.nid <1000 
LIMIT 10; 
```

**[db<>小提琴演示](https://dbfiddle.uk/?rdbms=mysql_8.0&fiddle=0a7482c6f161eae7926ed8c86245474a)**

* * *

边注：

`LIMIT`没有明确`ORDER BY`是不确定的。它可能会在多次运行之间返回不同的结果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-08-02T00:57:24.630

有很多事情需要讨论。

*   `LIMIT`没有 a 的A`ORDER BY`有点不可预测，因此有点无意义。

*   但是如果你添加一个`ORDER BY`，它可能需要找到所有的行，对它们进行排序，然后只提供你想要的 10 行。

*   或者，`ORDER BY`可以由`INDEX`.

您的特定查询，如果变成 2 个查询（根据 8.0.17 之后的需要），将是

```
SELECT * FROM t WHERE t.nid < 1000 LIMIT 10;
SELECT COUNT(*) FROM t WHERE t.nid < 1000; 
```

请注意，这些中的每一个都将从中受益`INDEX(nid)`。第一个将从索引的 BTree 中挑选 10 个项目，然后在数据的 BTree 中查找它们——每个项目只涉及 10 行。第二个将扫描 INDEX 直到它达到 1000，并且不接触数据 BTree。

如果您按照建议添加 ORDER BY，则*第一个查询*：

```
SELECT * FROM t WHERE t.nid < 1000 ORDER BY t.nid LIMIT 10; 
```

将与上述相同。但

```
SELECT * FROM t WHERE t.nid < 1000 ORDER BY t.abcd LIMIT 10; 
```

将需要扫描很多行，而且速度很慢。并且可能使用临时表和文件排序。（检查`EXPLAIN`细节。） `INDEX(nid, abcd)`会有所帮助，但只有一点点。

还有其他变体，例如索引何时可以“覆盖”。

“一次查询”的目标是什么？

*   速度？——如上所述，还有其他更相关的因素。

*   一致性？-- 您可能需要一个事务来避免，例如，从第一个查询中获取 N 行并从`COUNT`.

    ```
     BEGIN;
     SELECT * ...
     SELECT COUNT(*) ...
     COMMIT; 
    ```

*   单命令？-- 考虑一个结合了 2 个语句的存储过程。或者

    ```
     SELECT * FROM t WHERE t.nid < 1000 LIMIT 10
     UNION ALL
     SELECT COUNT(*) FROM t WHERE t.nid < 1000; 
    ```

但这变得很棘手，因为列数不同，因此需要一些杂凑才能使第二个查询具有相同的列数。另一个变体涉及`GROUP BY WITH ROLLUP`. （但它可能更难制造。）

卢卡斯的答案看起来很有希望。但是，它提供了一个额外的列（这可能很好），它的性能需要测试。如果您使用的是 8.0 并且他们的答案对您很有效，请接受该答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-02T15:46:25.960

Count(*) 时间复杂度为 O(1)，所以可以使用子查询

```
SELECT *, (SELECT COUNT(*) FROM t WHERE t.nid <1000) AS cnt
FROM t 
WHERE t.nid <1000 
LIMIT 10 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-28T18:29:03.897

听起来你想要[FOUND_ROWS()](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows)

```
SELECT SQL_CALC_FOUND_ROWS * FROM t WHERE t.nid <1000 LIMIT 10;
SELECT FOUND_ROWS(); 
```

# html - HTML 中的数据网格

> ID：12645359
> 
> 赞同：0
> 
> 时间：2012-09-28T18:23:35.930
> 
> 标签：html, asp.net-mvc

如何在具有可排序列和查找的视图中添加数据网格。我可以使用内置的 HTML 功能来实现这一点吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T18:26:43.413

如果您不介意使用 jquery，我已经成功使用 jqgrid。网上有各种使用 asp.net mvc 的教程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T11:32:19.543

链接在这里。看到这个例子 [http://www.trirand.com/blog/jqgrid/jqgrid.html](http://www.trirand.com/blog/jqgrid/jqgrid.html)

# ruby-on-rails - 简化 Rails 查询

> ID：12645363
> 
> 赞同：0
> 
> 时间：2012-09-28T18:24:02.250
> 
> 标签：ruby-on-rails, activerecord, associations

我正在尝试减少应用程序中的查询数量，并且需要以下设置方面的帮助：

我有 5 个模型：

*   赌注
*   选择
*   现货价格
*   斑点区域
*   产品

它们与以下内容相关：

*   投注属于_to 选择
*   选择belongs_to Spotarea
*   选择belongs_to产品
*   选择 has_many 投注
*   Spotprice 属于_to Spotarea
*   Spotprice 属于_to 产品
*   Spotarea has_many Spotprices
*   Spotarea has_many 选择
*   产品有_many Sprotprices
*   产品有_很多选择

我的目标是找到与特定投注匹配的 Spotprices。为此，我使用以下查询，但我确信它可以以更好的方式完成，所以当我运行 100 个赌注并想查看它们是高于还是低于对应的 Spotprice 时，我不会超载数据库与查询。

```
a = Bet.find(5)

b = Choice.find(a.choice_id)

c = Spotprice.where(:spotarea_id => b.spotarea_id, :product_id => b.product_id, 
    :deliverydate => b.deliverydate).first 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:51:53.357

在尝试减少查询数量之前，您应该在您的应用程序上运行性能测试，并监控数据库负载。有时最好运行几个小查询而不是一个包含几个连接的大查询。某些版本的 Oracle 似乎特别不擅​​长连接。

如果您想避免 n+1 查询问题，则连接的替代方法是使用`preload`并传递关联（`preload`采用与 相同的参数`includes`）。这使得 ActiveRecord 对每个表运行一个查询。

基本上：

1.  你总是想避免 n+1 问题。
2.  尝试将多个查询组合成一个连接在最好的情况下可能是过早的优化，而在最坏的情况下实际上会使性能变差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:59:37.773

首先，设置连接桥：

```
class Choice
  has_many :spotprices, :through => :spotarea
end

class Bet
  has_many :spotprices, :through => :choice
end 
```

然后你可以查询像

```
Bet.joins(:spotprices).where("spotprices.price > bets.value") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T18:47:30.537

好吧，这是一个非常简单的更改：

```
b = Bet.includes(:choice).find(5).choice 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T09:59:14.460

After a few hours and a lot of Google search I found a solution that works.. After adding the join bridges I wanted to do:

```
Bet.find(5).spotprice 
```

But that didn't work because to do that I needed something like this in my Choice model:

```
has_one :spotprice, :through => [:spotarea, :product] :source => :spotprices 
```

I that is not possible.. apperently..

So I found this link [has_one :through => multiple](https://stackoverflow.com/questions/6976852/has-one-through-multiple) and I could use that answer in my situation.

```
class Choice < ActiveRecord::Base
  belongs_to :user
  belongs_to :spotarea
  belongs_to :product
  has_many   :bets

  def spotprice
    Spotprice.where(:product_id => self.product_id, :spotarea_id => self.spotarea_id, :deliverydate => self.deliverydate).first
  end

class Bet < ActiveRecord::Base
  belongs_to :user
  belongs_to :choice
  has_one    :spotprice, :through => :choice 
```

With the above I can now do:

```
Bet.find(5).choice.spotprice 
```

If anybody got a better solution please let me know :)

# css - CSS 响应中心区

> ID：12645366
> 
> 赞同：7
> 
> 时间：2012-09-28T18:24:14.933
> 
> 标签：css, html, background, center

我想将一些具有背景图像的 div 居中。这个 div 的响应存在问题，因为如果我将宽度设置为 80%，将高度设置为 80%，则 bg-image 不在中心。我尝试了一切，但图片不能只是站在中心，如果浏览器更小或更大，这是非常大的问题。

所以如果你看图片

![挡在中心](../Images/415b1319598eedd9f542ed869e6bac5c.png)

我想让这个白色块响应。

我已经写了一些 css，但现在没有响应：

```
top: 20%;
left: 30%;
display: block;
position: absolute;
background: url(images/background.png) no-repeat;
background-size: 750px 417px;
width: 750px;
height: 417px; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2017-01-26T20:36:28.987

您可以使用 CSS 转换：

```
position: fixed;
left: 50%;
top: 50%;
transform: translate(-50%, -50%); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-28T18:33:02.253

2年前我想做同样的事情，有解决方案：

因为您希望它具有响应性，您可以使用`@media`CSS3 中的功能。像这样：

```
@media (max-width: 480px) {
    #div {
        top: 50%; /* IMPORTANT */
        left: 50%; /* IMPORTANT */
        display: block;
        position: absolute;
        background: url(images/background.png) no-repeat center center;
        width: 750px;
        height: 417px;

        margin-top: -208.5px; /* HALF OF THE HEIGHT */
        margin-left: -375px; /* HALF OF THE WIDTH */
    }
} 
```

您使用的`max-width`是设备屏幕的最大宽度。您只需复制它并更改`width, height, margin-left and margin-top`图像。另外，您应该更改`background`标签！

它将图像在页面上居中。

您可以在以下位置查看示例：[Créations MicroWeb - Carrières](http://www.careers.creationsmicroweb.com/)。即使您更改窗口侧，图像也完全居中。

当分辨率太低时，您可以添加`overflow: hidden;`以使页面不可滚动。`body`就像我一样。

**编辑**：[JSFiddle](http://jsfiddle.net/jZKyE/1/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-09-16T13:56:08.317

尝试使用自动边距并显示为表格：

```
.your-class {
  margin-left: auto;
  margin-right: auto;
  display: table;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-28T18:51:25.697

请试试这个：

```
img { max-width:100%; max-height:100%; margin:auto; } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-28T18:25:47.343

`margin:0 auto;`只要 div 的宽度小于容器 div 的宽度，就可以将其水平居中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-13T05:14:19.857

我已经使用`display: inline-block;`元素来居中和`text-align: center;`父 div 上。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-10-28T11:25:05.010

```
.container{display: flex; justify-content: center; align-items: center} 
```

# asp.net-mvc-3 - 没有为此对象定义无参数构造函数 MVC3 - 从数据库示例训练中获取数据

> ID：12645371
> 
> 赞同：0
> 
> 时间：2012-09-28T18:24:42.197
> 
> 标签：asp.net-mvc-3, asp.net-mvc-3-areas

我找到了一些关于这个问题的例子，但我无法在我的软件中使用你知道怎么做吗？你能解释一下我为什么会遇到这个问题吗？

没有为此对象定义无参数构造函数。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.MissingMethodException：没有为此对象定义无参数构造函数。

SpotrStore.Domain

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.Entity;
using SportsStore.Entities;

namespace SportsStore.Concrete
{
    public class EFDbContext : DbContext
    {
        public DbSet<Towar> Products { get; set; }
    }
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using SportsStore.Entities;

namespace SportsStore.Concrete
{

    namespace SportsStore.Domain.Concrete
    {
        public class EFProductRepository 
        {
            public EFDbContext context = new EFDbContext();
            public IQueryable<Towar> Towar
            {
                get { return context.Products; }
            }
        }
    }
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using SportsStore.Entities;

namespace SportsStore.Concrete
{
    public interface ITowarRepository
    {
        IQueryable<Towar> Towar { get; }
    }
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel.DataAnnotations;

namespace SportsStore.Entities
{
    [Table("Towar")]
   public class Towar
    {

       [Key]
       public int Id_tow { get; set; }
       public string Nazwa { get; set; }
       public string Opis { get; set; }
       public string Cena { get; set; }
       public int Id_kat { get; set; }

    }
} 
```

SportStore.WebUi

```
 using System.Linq;
    using System.Web;
    using System.Web.Mvc;
    using SportsStore.Concrete;
    using SportsStore.WebUI.Models;

    namespace SportsStore.WebUI.Controllers
    {
        public class DefaultController : Controller
        {
            public ITowarRepository repository;

            public DefaultController(SportsStore.Concrete.ITowarRepository repo)
            {
                repository = repo;

            }

            public ActionResult Index()
            {
                SomeView ViewModel = new SomeView
                {
                    Towar = repository.Towar
                    .OrderBy(p => p.Id_kat)
                };
                return View(ViewModel);
            }

        }
    }

    -----------------------------------------------

    @model SportsStore.WebUI.Models.SomeView

    @{
        ViewBag.Title = "Index";
    }

    <h2>Index</h2>

    @foreach (var item in @Model.Towar)
    {
        @item.Id_kat
    }
---------------------------

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace SportsStore.WebUI.Models
{
    public class SomeView
    {
        public IEnumerable<SportsStore.Entities.Towar> Towar { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:35:48.780

默认情况下，框架将调用一个无参数的构造函数，它在您的控制器中不存在。一个简单的解决方法是添加这个无参数构造函数：

```
public DefaultController() : this(new SportsStore.Concrete.ITowarRepository()) { } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:42:11.423

除了@dombenoit 的回答，因为您唯一的构造函数是：

```
public DefaultController(SportsStore.Concrete.ITowarRepository repo) 
```

看起来您正在尝试使用依赖注入来构造函数注入数据存储库的实例。所以可能你的问题是你有一些你正在尝试使用的依赖注入框架，并且配置不正确？

# javascript - Javascript 设置 window.name - IE 中的问题

> ID：12645374
> 
> 赞同：2
> 
> 时间：2012-09-28T18:25:04.100
> 
> 标签：javascript, internet-explorer, variables, window, global-variables

我有以下情况。

网站 A 正在打开网站 B 使用`window.open("Website B", "windowName");`

在网站 BI 中有以下代码：

```
<script>
  window.name='';  
  window.location.href = 'Website C'; 
</script> 
```

在网站 CI 中，Firefox 和 Chrome（所有版本）`window.name`等于 ''，但在 IE（版本 9、10、11）中，它等于 'windowName'。

有人可以解释为什么吗？当我到达网站 C 时，我需要一个解决方法`window.name = ''`。我无法在网站 B 中使用 windows.open 打开网站 C，我需要使用 window.location。

源代码添加：

index.html（站点 A）

```
<!DOCTYPE html>
<html>
<title>Page A</title>
<head>
<script>
    function test2(){
        window.open("index2.html","Some window name","width=500,height=500");
    }
</script>
</head>
<body>
    <input type="button" onClick="test2();">
</body>
</html> 
```

index2.html（站点 B）

```
<!DOCTYPE html>
<html>
<title>Page B</title>
<head>
<script>
    document.write("initial window name: [" + window.name + "]<br/><br/>");
    window.name=""; //we set it to empty string
    document.write("after we set window.name to empty string: [" + window.name + "]"); //all fine in all browsers, shows nothing
    document.location= 'index3.html';
</script>
</head>
<body>
</body>
</html> 
```

index3.html（站点 C）

```
<!DOCTYPE html>
<html>
<title>Page C</title>
<head>
<script>
    document.write("initial window name: [" + window.name + "]"); //OK in Firefox (shows nothing). Not OK in IE, shows "Some window name"
</script>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T18:33:49.073

根据 MSDN 文档，该`name`属性是可变的：

[http://msdn.microsoft.com/en-us/library/ie/ms534187%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ie/ms534187%28v=vs.85%29.aspx)

我尝试更改`name`属性，它在 IE9 中运行良好：

[http://jsfiddle.net/Guffa/5cBBy/1/](http://jsfiddle.net/Guffa/5cBBy/1/)

我还尝试将其更改为空字符串，并且有效：

[http://jsfiddle.net/5cBBy/2/](http://jsfiddle.net/5cBBy/2/)

因此，您的代码可能还有其他问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-14T10:16:11.603

我遇到了同样的问题，发现您需要在设置新的 window.location 之后重命名窗口。这对我有用！

# jquery - Jquery POST AJAX 将请求的页面返回到浏览器

> ID：12645377
> 
> 赞同：0
> 
> 时间：2012-09-28T18:25:25.073
> 
> 标签：jquery, django

我使用 jQuery 脚本发布表单。
在 AJAX 请求之后，我不想使用响应。

我的麻烦是，AJAX 响应是由浏览器启动的。

我的脚本：

```
$(document).ready(function() {

  $('button[num]').click(function(){
    $.fn.validRef($(this).attr('num'));
  });

  $.fn.validRef = function(refId){

    var R = {}  
    var form = $('#R'+refId+'Form')
    var tab = $('#R'+refId+'Tab')

    $('form input').each(function(index) {
      R[$(this).attr('name')] = $(this).val();
    });
    $('form select').each(function(index) {
      R[$(this).attr('name')] = $(this).val();
    });

    $.ajax({
      type: "POST",
      url: "/events/",
      data: R,
      async: false,
      cache: false,
      error: function() { alert('err'); },
      success: function(data){
        form.hide();
        tab.hide();
      }
    });
  }

}); 
```

我尝试使用`return false`and `console.log(data)`，
但无论如何都会出现问题。

您还可以提供不同的方式来使用或放置前面的 2 个命令。

`/ajax`最后一件事，我使用 Django 和请求不是本身的网页。

当我从控制台启动它时，它可以工作！但不是当我使用`onclick`我的功能时。
我这样声明我的函数：`function validRef(){ ... }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T05:32:03.043

解决 ：

我添加`return false`了点击句柄。

```
 ...
  $('button[num]').click(function(){
    $.fn.validRef($(this).attr('num'));
    return false
  });
  ... 
```

# css - align divs horrizontaly - 第一个占据所有水平可用空间

> ID：12645378
> 
> 赞同：2
> 
> 时间：2012-09-28T18:25:27.913
> 
> 标签：css, html, width, alignment

我有 2 个 div 需要水平排列，我知道第二个的宽度，我需要第一个来占用所有剩余的可用空间。任何人都可以帮助我并告诉我css以实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T18:59:56.313

你可以这样做：

```
<div style="width:500px;">
    <div style="width:100px;float:right;background-color:cyan;">bar</div>
    <div style="margin-right:100px;background-color:magenta">foo</div>
</div> 
```

bar 浮动在右侧 100px 处，位于 foo 的边距之上。foo 占用另外 400px。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T18:33:53.880

尝试做这样的事情：

```
<div style="width:200px; float:left;"></div>
<div style="width:auto;"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T18:34:18.077

您可以使用百分比，当您不关心确切的宽度时，这很方便。如果您需要精确的宽度，请使用 javascript 获取您知道的 div 的 offsetwidth，并浮动两个 div。然后，相应地设置另一个 div 的宽度。我要注意的是以像素为单位设置另一个 div 的值——如果用户调整窗口大小，你必须考虑它，这需要更多的工作。如果您不需要完全精确，请将另一个 div 设置为百分比，这将自动处理窗口大小调整。其他问题也随之而来，但基本上这是实现它的一种方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T18:32:33.100

尝试将第二个容器的宽度设置为您的已知值，将第一个容器的宽度设置为`width:100%;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T18:40:42.370

你的要求有点棘手。但这应该工作......

[http://jsfiddle.net/2hseV/2/](http://jsfiddle.net/2hseV/2/)

这样做是使用 div 定位。这应该是跨浏览器兼容的。我这样做的原因是没有简单的方法说“有两个兄弟 div，其中一个消耗所有可用空间”而不将第二个 div 推到右边。

例如，如果您尝试使用百分比，您要么将 div 推到右侧，要么缩短：

```
<div style="width: 200px; height: 100px;">
  <div style="width: 100%; height: 100%; float: left;"></div>
  <div style="width: 90px; height: 100%; float: left;"></div>
  <div style="clear: both;"></div>
</div> 
```

因此，我建议您使用绝对位置g 将第二个 div 重叠到第一个 div 上，如下所示：

```
<div style="width: 200px; height: 100px; position: relative;">
  <div style="width: 100%; height: 100%; float: left; position: relative;"><!-- Content of first div here --></div>
  <div style="width: 90px; height: 100%; float: left; position: absolute; right: 0; top: 0;"><!-- Content of second div here --></div>
</div> 
```

您必须记住的一件事是，**如果您的第一个 div 变得太宽，它的内容将低于第二个 div - 所以您可能需要限制宽度！**

# html - IIS 显示页面在 Firefox 中不可用，但在其他浏览器中工作正常？

> ID：12645385
> 
> 赞同：0
> 
> 时间：2012-09-28T18:25:57.197
> 
> 标签：html, firefox, iis, iis-8

[http://i.stack.imgur.com/LRy2h.png](http://i.stack.imgur.com/LRy2h.png)

我使用安装在我的计算机上的 IIS，并将其用作服务器。您可以看到该页面在 Net 中可用，并且在其他浏览器中可以正常工作，但在 Firefox 中无法正常工作。我已经在 Firefox 和最新的 nightly 中尝试过，但没有成功。

1.  我进入私人模式并打开站点并显示，但在两种模式下，如果我按几次刷新它的文件未找到问题。

同样的事情在其他浏览器中工作正常。有人知道发生了什么。

在网络面板中，我可以看到 304，但页面对我不起作用。

有人知道在这种情况下会发生什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T20:07:09.280

我会检查 Firefox 中的代理设置。

工具 > 选项 > 网络 > 连接 > 设置（确保选中“无代理”）

# ios6 - iOS 6：将 iPhone 4 应用程序移植到 iPhone 5

> ID：12645387
> 
> 赞同：1
> 
> 时间：2012-09-28T18:26:34.373
> 
> 标签：ios6

> **可能重复：**
> [如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)

我想将基于 iOS 4 的应用程序移植到 iOS 6。随着 iPhone 5 屏幕的高度放大，我们是否需要更改项目中的资源（xib/storyboard）文件以将其移植到完全适合 iPhone 5 屏幕（或) 它自动工作并由 iOS 6 处理？请指教。

谢谢你。

# c - 增量运算符给出分段错误？

> ID：12645392
> 
> 赞同：2
> 
> 时间：2012-09-28T18:26:53.723
> 
> 标签：c

> **可能重复：**
> [通过指针更改 C 中的字符串文字？](https://stackoverflow.com/questions/10202013/change-string-literal-in-c-through-pointer)

这是一个代码示例

```
void main()  
{

    char *i="prady";  printf("%c ",++*i); 
} 
```

谁能告诉我为什么这段代码在 gcc 中出现分段错误，而我猜它应该给出“q”。当我只使用`*i++`它给我结果但只使用预增量时，它给我一个分段错误。

还告诉我为什么 void main 不是编写`main()`函数的正确方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T18:29:03.503

`++*i`意味着`++(*i)`。您正在尝试修改字符串文字的第一个字符，这是不允许的。就 C 标准而言，行为是未定义的，但此实现有助于提醒您注意该问题。

`*i++`意味着`*(i++)`。您正在修改您的指针`i`，这很好。

`void main()`不是编写`main`函数的正确方法，因为标准说`main`返回`int`. 返回值用于指示程序的成功或失败。实现可以支持其他形式的`main`，但有两种是必需的：`int main(void)`和`int main(int argc, char *argv[])`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:42:59.267

Steve Jessop 已经告诉过你为什么 ++*i 返回一个错误，所以我不会再告诉你了。

*i++ 将返回 p，单词的第一个字母，因为 "++" 运算符首先返回值，只有在它返回值之后才会递增它。所以如果你想让你的程序打印 'q' 你必须说`printf("%c ",*i+1)`. 此外，如果您希望程序打印第二个字符，请尝试： `printf("%c ", *(i+1))`。单词的第三个字母之后的字母表中的下一个字母将是`printf("%c ", *(i+2)+1)`，依此类推。

为什么你应该使用 int main 而不是 void？main 函数返回的值通知操作系统程序是如何结束的。o（如返回 0）告诉操作系统程序已正确执行。当程序因错误而必须结束时，您通常使用非 0 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T18:40:43.937

```
++*i 
```

意味着你预先增加你的指针。例如

```
int *i

*i = 1; 
```

假设 i 是指向地址的指针，`0x8FF43FF0` 如果您`++*i`在取消引用`i`指向之前进行编译`0x8FF43F4`

```
++(*i) 
```

意味着，首先取消引用`i`，而不是增量

# pypy - PyPy 怎么比 Cpython 快

> ID：12645394
> 
> 赞同：5
> 
> 时间：2012-09-28T18:27:01.003
> 
> 标签：pypy

我读过[PyPy——它怎么可能打败 CPython？](https://stackoverflow.com/questions/2591879/pypy-how-can-it-possibly-beat-cpython)和无数其他的东西，但我无法理解用 Python 编写的东西如何比 Python 本身更快。

我能想到的唯一方法是 PyPy 以某种方式绕过 C 并直接编译成汇编语言指令。如果是这样的话，那就没问题了。

有人可以向我解释 PyPy 是如何工作的吗？我需要一个简单的答案。

我喜欢 python 并想开始贡献。无论他们是否拉取我的代码，PyPy 看起来都是一个很棒的起点。但我无法从我所做的简短研究中理解。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-30T02:36:08.030

理解 PyPy 的最简单方法是忘记它是用 Python 实现的。

它实际上不是，无论如何，它是在 RPython 中实现的。RPython 可以使用 Python 解释器运行，但 Python 代码**不能**由 RPython 编译器（PyPy 翻译框架）编译。RPython 是 Python 的一个子集，但被“遗漏”的部分足够实质性，以至于在 RPython 中编程与在 Python 中正常编程有*很大*不同。

因此，由于 Python 代码不能被视为 RPython 代码，而且惯用的 RPython 程序的“外观”与惯用的 Python 程序非常不同，让我们完全忽略它们之间的联系，并考虑一个虚构的例子。

假装我用编译器开发了一种新语言 Frobble。我已经在 Frobble 中编写了一个 Python 解释器。我声称我的“FrobblePython”解释器通常比 CPython 解释器快得多。

这让你觉得奇怪或不可能吗？当然不是。一个新的 Python 解释器可以比 CPython 解释器更快或更慢（或者更有可能，在某些事情上更快，在其他事情上更慢，幅度不同）。是否更快将取决于 FrobblePython 的实现，以及我的 Frobble 编译器编译的代码的性能特征。

这**正是**你应该如何看待 PyPy 解释器。用于实现它的语言 RPython 恰好能够被 Python 解释器解释（与编译和运行 RPython 程序具有相同的外部结果）这一事实与理解它的速度*完全无关。*重要的是 PyPy 解释器的实现，以及由 RPython 编译器编译的代码的性能特征（例如 RPython 编译器可以自动将某些类型的 JITing 能力添加到它编译的程序中）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-29T19:38:09.947

“它有 JIT”的答案在技术上是正确的，但还不够。PyPy 作为 Python 代码运行，通过 Python 解释器，可以 JIT 编译*它解释的 Python 代码（事实上，JIT 测试经常以这种方式运行）但仍然非常慢（**开始解释*可能需要几分钟）。

缺失的部分早于 JIT 并且实际上是 JIT 所必需的，它是在 Python 的受限子集（称为 RPython）中编写解释器，然后将其编译为 C 代码。这样，您将获得一个运行在大致 C 抽象级别的程序（尽管被编写为更高的抽象级别）。这个解释器在历史上一直，AFAIK 仍然比 CPython 慢一些，但不会慢几个数量级（就像解释器那样）。

您对“直接编译为汇编”的评论暴露了混乱。汇编代码不会自动比 C 代码快——事实上，你很难在生成汇编代码方面击败当今的 C 编译器，而且 C 代码更容易编写和/或生成，即使没有进入整个可移植性混乱。问题不在于将 Python 转换为 C 或汇编（看看 Nuitka），问题在于以更有效的方式解释程序而不影响语义。直接进行汇编并不能解决任何困难的问题，使为更高效的程序生成代码的相对简单的问题变得更加困难，并且很少允许您无法在 C 中表达的任何优化。

现在，PyPy 的 JIT 确实会生成机器代码，但 PyPy 可执行文件是由 C 编译器从 C 代码编译的。如果 PyPy 开发人员试图在单个平台上与现有的 C 编译器竞争，他们将是白痴，更不用说多个平台了。幸运的是，他们不是白痴并且知道这一点。让 JIT 生成汇编代码的原因是不同的，而且要好得多（对于初学者，在 JIT 的上下文中，有*一些*您不能在 C 中进行的优化）。

顺便说一句，我上面写的大部分内容也在您链接到的问题的答案中说明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T18:34:32.347

Pypy 有 JIT (Just In Time) 编译。JIT 编译可以在运行时进行优化（因为它不是预编译的）。

代码不会从一开始就编译为汇编或 C。它是解释代码（在 Pypy 解释器中运行）。然后解释器可以“即时”进行编译。

[http://en.wikipedia.org/wiki/Just-in-time_compilation](http://en.wikipedia.org/wiki/Just-in-time_compilation)

[http://en.wikipedia.org/wiki/Interpreted_language](http://en.wikipedia.org/wiki/Interpreted_language)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-29T23:52:13.970

PyPy 本身是用 RPython 编写的，它是 Python 的一个受限子集。虽然您可以在 CPython 之上运行它，但它非常慢，因此您可以将这个 RPython 翻译成 C，从而绕过解释。从理论上讲，这已经可以比 CPython 快，但实际上要慢很多。除此之外，还实现了一个即时编译器（也在 RPython 中），它将 Python 编译为汇编程序。

简而言之，在运行时的任何时间点都不涉及实际的双重解释，因此没有问题。

# django - django - 字典中的 html 代码被转义

> ID：12645399
> 
> 赞同：0
> 
> 时间：2012-09-28T18:27:09.977
> 
> 标签：django

好！

我有这个字典：

```
PERIOD = [
    (1,"&lt; 3 mnths"),
    (2,"3 - 6mths"),
    (3,"6mths - 1yr"),
    (4,"1 - 2yrs"),
    (5,"&gt; 2yrs"),
] 
```

我想在我的 django 页面中显示。以前，我用点大括号`<`代替`&lt;`东西，但后来我意识到我不仅显示了一个下拉菜单，而且在网站的其他部分，我正在显示内容（所以，你知道，只有第 3 项）。

有了以上内容，当我只显示第三项时？一切看起来都很好。但是当我将字典显示为选择下拉列表时？然后 django 决定不解码这些`&gt;`东西。

鉴于我将字典发送到模板：

```
periodChoice = ChoiceField(label='', choices=PERIOD, widget=forms.Select(attrs={'class':'regDropDown'})) 
```

在模板中我这样显示：

```
Choose from  {{ theForm.periodChoice }} 
```

我如何让模板做我想做的事？我试着很好地询问，我什至尝试了|安全...没有运气！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T19:21:33.027

尝试这个：

```
from django.utils.safestring import mark_safe

PERIOD = [
    (1, mark_safe("&lt; 3 mnths")),
    (2,"3 - 6mths"),
    (3,"6mths - 1yr"),
    (4,"1 - 2yrs"),
    (5, mark_safe("&gt; 2yrs")),
] 
```

其余部分保持原样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:37:52.237

只需`|safe`在模板中指定为过滤器。

```
{{ theForm.periodChoice|safe }} 
```

# c# - 如何按表的 DateTime 过滤 ReportViewer

> ID：12645402
> 
> 赞同：1
> 
> 时间：2012-09-28T18:27:17.223
> 
> 标签：c#, .net, mysql

我正在使用 Visual Studio 2010、C# 和 MySQL。

我创建了一个 DataSet 并用我的表填充它，该表显示**所有日期**，但我希望 ReportViewer 仅显示当天的日期，如 DateTime.Now。

我正在努力

```
=FormatDateTime(now,DateTime.ToLongDateString) + " ás " + Format(now,"HH:mm") 
```

我怎样才能做到这一点 ？

# collections - Emberjs CollectionView 从 0.9.7.1 更改为 1.0.pre？

> ID：12645408
> 
> 赞同：0
> 
> 时间：2012-09-28T18:27:29.253
> 
> 标签：collections, ember.js

我有一些代码将 ArrayController 与 CollectionView 连接起来，一旦升级到 1.0.pre，它就不再工作了。

似乎 CollectionView 不再将集合的每个元素传递给它的模板视图类？

我已经将我的问题提炼到了这个 jsFiddle：http: [//jsfiddle.net/chaodoze/CbwCN/](http://jsfiddle.net/chaodoze/CbwCN/)

请注意，它在 1.0.pre 中的每行输出为“1,2,3”。在 0.9.7.1 中，它在每行上正确输出为单个数字。

我在这里做错了什么还是这是一个错误？解决此问题的最佳方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T21:13:51.600

在 1.0.pre 中，视图的上下文发生了变化。当您访问时，`{{content}}`您实际上是在访问`{{controller.content}}`，即`[1,2,3]`. 您需要访问视图的内容，这些内容在个人编号中，使用`{{view.content}}`.

见[http://jsfiddle.net/CbwCN/2/](http://jsfiddle.net/CbwCN/2/)

# powershell - Powershell/Polymon 监控

> ID：12645409
> 
> 赞同：1
> 
> 时间：2012-09-28T18:27:30.640
> 
> 标签：powershell, batch-file

所以我的老板希望我们使用 Polymon 监控来监视服务器的打印假脱机程序，因为它最近一直无缘无故地自行关闭。当 Polymon 看到 spooler 关闭时，我们在服务器桌面上有一个简单的 bat 脚本来运行“net start spooler”。但是，我使用的脚本没有运行 bat 文件……这是 Polymon 所说的：

> 监视器状态可通过以下 $Status 对象属性获得：$Status.StatusID、$Status.Status 以下 StatusID 值具有相应的状态值：1=OK、2=WARN、3=FAIL
> 
> 监视器计数器可通过 $Counters 集合获得。此集合公开了一个默认 Item 属性，该属性按索引值检索 Counter，例如 $Counters(0)，还公开了一个按名称检索 Counter 的 Counter 属性，例如 Counters.Counter("MyCounterName")
> 
> Counter 对象公开以下属性：CounterName、CounterValue

我的脚本是：

```
cmd /c C:\Documents and Settings\Username\Desktop\start_spooler1.bat 
```

Polymon 说脚本签出，但是当我手动关闭后台处理程序服务时，我得到的只是通知，后台处理程序没有重新打开。想法？我是 Powershell 的新手……Polymon 要求动作脚本要么在 Powershell 要么在 VB 中，所以我愿意接受任何可以使它工作的脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T00:01:44.920

我认为您的问题仅仅是由于批处理脚本路径中的空格。在路径周围加上引号，它可以工作：

```
cmd /c "C:\Documents and Settings\Username\Desktop\start_spooler1.bat" 
```

但请注意，您不需要为此使用 cmd - powershell 将运行`.bat`并`.cmd`自行归档。由于路径中的空格，您将再次需要一些引用，并且`&`操作符：

```
& "C:\Documents and Settings\Username\Desktop\start_spooler1.bat" 
```

# php - PHP ImageMagick 使图像透明并将它们绘制在其他图像之上

> ID：12645411
> 
> 赞同：0
> 
> 时间：2012-09-28T18:27:42.933
> 
> 标签：php, imagemagick, transparency

我正在尝试制作一个程序，该程序可以导出图像，并在其上绘制另一个图像（即半透明）。我希望能够控制顶部图像的每像素值的透明度；并且相当快地做到这一点。ImageMagick 中有内置的东西来做到这一点吗？这两个图像在加载时都将具有完全不透明度，因为它们都是 jpeg。

我想您可以将其视为一种水印，尽管它是程序性的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:33:55.127

您可以先使用[Imagick::setImageOpacity](http://php.net/manual/en/imagick.setimageopacity.php)设置水印的不透明度。

然后，使用[Imagick::compositeImage](http://php.net/manual/en/imagick.compositeimage.php)将水印图像应用到您的基础之上。

# mysql - 通过加入计数和分组

> ID：12645414
> 
> 赞同：1
> 
> 时间：2012-09-28T18:27:54.010
> 
> 标签：mysql, sql

我有一个产品表和一个已购买产品的用户表。在 products 表 A 中有 site_name，它决定了产品是在哪里购买的。

表 B 显示了用户和他们购买了什么。

我正在使用以下内容显示按 site_name 购买的产品列表，并将产品名称分组在一起。

```
SELECT product FROM A JOIN B ON A.prod_id = B.prod_id WHERE A.site_name = 'ebay' group by A.product 
```

产品表 A 为：

```
prod_id
site_name
product 
```

用户的表 B 是：

```
user_id
prod_id 
```

我不知道如何获得每行购买的产品数量。

例如，在表 A 中有

```
prod_id    site_name    product
-------    ---------    -------
1          ebay         chair
2          amazon       desk
3          ebay         lamp 
```

在表 b 上

```
user_id    prod_id
-------    -------
1000         1
1001         2
1002         1
1003         3 
```

因此，我想显示 site_name 是 ebay 的每一行以及购买了多少产品，最先订购，例如：

```
chair    2
lamp     1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T18:31:29.563

我会使用 a `LEFT JOIN`，这样如果有一个从未购买过的产品，它将显示为 0。

另外，我会使用`COUNT(users.prod_id)`, 而不是`COUNT(*)`, 以便它只计算满足`LEFT JOIN`条件的行：

```
SELECT
    products.product,
    COUNT(users.prod_id) AS productsBought
FROM
    A AS products
    LEFT JOIN B AS users
        ON products.prod_id = users.prod_id
WHERE products.site_name = 'ebay'
GROUP BY products.product 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:58:16.343

对迈克尔的查询进行了微小的更改。

```
SELECT
    products.product,
    COUNT(users.prod_id) AS productsBought
FROM
    A AS products
    INNER JOIN B AS users
        ON products.prod_id = users.prod_id
WHERE products.site_name = 'ebay'
GROUP BY products.product 
```

上述查询不会返回尚未购买的产品。

# windows - Delphi 主题工具栏可以在其工具按钮之间设置分隔线吗？

> ID：12645417
> 
> 赞同：8
> 
> 时间：2012-09-28T18:28:18.583
> 
> 标签：windows, delphi, winapi

我注意到 Delphi 工具栏有一个相当烦人的奇怪之处。我有一个`TToolbar`具有逻辑图标组的图标。为了使分组脱颖而出，我想使用带有样式的分隔按钮`tbsDivider`。

当我这样做时，它看起来像这样：

![在此处输入图像描述](../Images/a1f0071e574fe858b23a4b88eb7d78da.png)

注意每个图标之间的双垂直线。右手是在分隔工具按钮的中间。左边的是分隔工具按钮的左边缘。

所以，我可以切换到`tbsSeparator`哪个删除中间线：

![在此处输入图像描述](../Images/f291ee3bb12855a35f20f9e54a8eb152.png)

但我并不热衷于此，因为我希望分隔线位于中间。

我查看了我的真实应用程序的一个古老版本，发现它有居中的分隔符。当 Windows 主题被禁用时，这似乎是可能的。`tbsDivider`以下是删除应用程序清单后的样子：

![在此处输入图像描述](../Images/7a58b99e6382886a8fa1d2ca6f9152a4.png)

这就是我正在寻找的布局。当主题活跃时，这是否可以实现？

我确实在 Embarcadero 论坛上找到了有关该问题的讨论，但没有有用的见解：[https ://forums.embarcadero.com/message.jspa?messageID=467842](https://forums.embarcadero.com/message.jspa?messageID=467842)

为了完整起见，这是 .dfm 文件的相关摘录

```
object ToolButton1: TToolButton
  Left = 0
  Top = 0
  ImageIndex = 0
end
object ToolButton2: TToolButton
  Left = 23
  Top = 0
  Width = 16
  ImageIndex = 1
  Style = tbsDivider
end
object ToolButton3: TToolButton
  Left = 39
  Top = 0
  ImageIndex = 1
end
object ToolButton4: TToolButton
  Left = 62
  Top = 0
  Width = 16
  ImageIndex = 2
  Style = tbsDivider
end
object ToolButton5: TToolButton
  Left = 78
  Top = 0
  ImageIndex = 2
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T19:06:28.160

对我来说，这看起来像是 VCL 中的一个缺陷。该`tbsDivider`样式不映射到 Win32 中的等效样式。具有该样式的工具按钮在 VCL 中以与样式相同的方式实现`tbsSeparator`，但使用自定义绘制方法。这是从`TToolButton.Paint`：

```
if Style = tbsDivider then
  with Canvas do
  begin
    R := Rect(Width div 2 - 1, 0, Width, Height);
    if StyleServices.Enabled then
    begin
      Details := StyleServices.GetElementDetails(ttbSeparatorNormal);
      StyleServices.DrawElement(Handle, Details, R);
    end
    else
      DrawEdge(Handle, R, EDGE_ETCHED, BF_LEFT)
  end; 
```

在 v6 之前的 comctl32 以前，该`tbsSeparator`样式映射到 Win32`TBSTYLE_SEP`样式工具按钮。在 v6 之前的 comctl32 中，它只是呈现为没有垂直线的空间。VCL 设计师显然想做得更多，并添加`tbsDivider`了上面的自定义绘画。

快进到 v6 comctl32。`TBSTYLE_SEP`现在公共控件在所有分隔符的左侧边缘绘制一条垂直线。所以上面的代码只是在分隔符的中间添加了一条额外的垂直线。

`tbsDivider`我们可以尝试通过修改如下代码来摆脱左侧的垂直线：

```
if Style = tbsDivider then
  with Canvas do
  begin
    if StyleServices.Enabled then
    begin
      //re-paint the background to remove the vertical line drawn
      //for the standard separator button
      R := Rect(0, 0, Width, Height);
      StyleServices.DrawParentBackground(FToolBar.Handle, Handle, nil, False, R);
    end;

    R := Rect(Width div 2 - 1, 0, Width, Height);
    if StyleServices.Enabled then
    begin
      Details := StyleServices.GetElementDetails(ttbSeparatorNormal);
      StyleServices.DrawElement(Handle, Details, R);
    end
    else
      DrawEdge(Handle, R, EDGE_ETCHED, BF_LEFT)
  end; 
```

但是，这行不通，因为在绘制左手线然后再涂上时，会出现很多闪烁。

我怀疑 VCL 设计者只是在过渡到 v6 comctl32 时错过了这个神秘的细节。

我会在适当的时候提交一份质量控制报告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T01:09:24.073

当工具栏具有平面样式时，本机控件为分隔按钮绘制垂直线。因此，如果您删除扁平样式，您将只剩下 VCL 的*分隔线*。当应用程序为主题时，您可以安全地删除样式，主题工具栏按钮不考虑平面样式（为什么工具栏分隔符，我不知道）。但是，当主题被禁用时，将再次出现两行。在这种情况下，保留分隔符而不是分隔符似乎是更好的选择。

[正如文档](http://docwiki.embarcadero.com/Libraries/en/Vcl.ComCtrls.TToolBar.Flat)所述，人们会猜测取消设置该`Flat`属性会产生任何影响。但是在启用时无条件启用它。因此需要 API 调用；`TToolBar.CreateParams``StyleServices`

```
procedure TForm1.FormCreate(Sender: TObject);
var
  TbStyle: DWORD;
begin
  if StyleServices.Enabled then begin
    TbStyle := SendMessage(ToolBar1.Handle, TB_GETSTYLE, 0, 0);
    SendMessage(Toolbar1.Handle, TB_SETSTYLE, 0, TbStyle and not TBSTYLE_FLAT);
  end;
end; 
```

这消除了部分问题，剩下的部分是分隔线不在两个按钮之间的中心。VCL 的问题是，它不想自己画线。所以它调用主题 api 将分隔线绘制到分隔符的左侧。为了规避，VCL 将分隔符矩形的右半部分传递给 api，而该行*大约*在中间。我不知道是否有任何方法可以准确地告诉主题 api 在哪里绘制它，我怀疑是否存在。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-22T19:13:41.210

如前所述，由于操作系统的变化，您不能使用 TToolBar 执行此操作。

但是，通过使用 ActionToolBars，您可以实现您想要实现的目标 - 即使使用当前版本的 Delphi (XE6) 和 Windows 8.1/2012 R2 主题。以下是步骤：

1.  创建操作管理器
2.  添加尽可能多的操作
3.  添加一个 ImageList （和另一个可选的禁用菜单项）
4.  将您的每个动作与图像相关联
5.  将 ActionToolBar 添加到表单
6.  将您希望在工具栏上显示的每个操作拖放到工具栏上
7.  将工具栏上的单个操作设置为 ShowCaption := False（如果需要）
8.  拖放“Drag to create Separators”（来自 ActionManager 编辑器）框以添加分隔符
9.  将 ActionClientItems（当您将操作拖放到 ActionTooLBar 上时创建）拖放到您想要的位置。

最终结果 - 一个漂亮的应用程序，图标之间有分隔线。

![在此处输入图像描述](../Images/71ee4e29db4f99185d4aab151036218f.png)

# jquery - 在第一次滚动时运行函数，然后再也不滚动

> ID：12645428
> 
> 赞同：2
> 
> 时间：2012-09-28T18:28:58.130
> 
> 标签：jquery, function, scroll

我需要在第一次`.scrollTop()`更改时运行一个函数，然后再也不运行。我尝试了几件事，包括以下内容，但没有运气：

```
var view = $('#workspace');

view.bind("scroll resize", function() {
  doThisEveryScroll();
  if(view.scrollTop() == 3) {
    doThisOnFirstScroll();
  }
}); 
```

由于多种原因，这是错误的，但我不确定如何以其他方式解决此问题。

1.  这只会在用户碰巧碰到滚轮时才会运行，`.scrollTop() == 3`而滚轮并不总是如此。
2.  `.scrollTop() == 3`可能多次为真。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T18:30:35.020

用于`.one()`设置一个事件处理程序，该处理程序一旦被调用就会自行分离：

```
$('#workspace').on('scroll resize', function() {
  doThisEveryScroll();
}).one('scroll resize', function() {
  if (Math.abs(100 - $(this).scrollTop()) < 20) {
    doThisOnFirstScroll();
  }
}); 
```

您还可以通过计算与目标的距离来为目标滚动位置提供误差范围：

```
Math.abs(100 - $(this).scrollTop()) < 20 
```

`true`如果用户在 范围内`20px`，这将返回`100px`。

# message-queue - 向其他用户发送消息

> ID：12645430
> 
> 赞同：1
> 
> 时间：2012-09-28T18:29:02.900
> 
> 标签：message-queue, progress-4gl

我想知道如何使用 Progress 4gl 向另一个用户发送消息。我们正在尝试减少我工作的 PA 扬声器，我想要某种方式来通知某些用户/用户一些预定义的消息。我不确定 Progress 是否可以做到这一点，或者是否有可以使用的消息队列。如果有人有任何样品、想法或以前做过，请告诉我。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:54:16.303

您可能会发现这很有帮助：

> 继在波士顿和芬兰的演讲之后，dot.r 很高兴地宣布开源 Stomp 项目立即可用。
> 
> 从[http://www.dotr.com](http://www.dotr.com)或 [https://bitbucket.org/jmls/stomp](https://bitbucket.org/jmls/stomp)下载，dot.r stomp 程序允许您将进度会话连接到连接到相同的任何其他应用程序或服务消息代理。
> 
> 支持 Stomp 的开源免费消息代理是：
> 
> **保险丝**(http://fusesource.com/products/fuse-mq-enterprise/)
> 
> [现在归红帽公司所有的 Progress 公司] Fuse MQ Enterprise 是一个基于标准的开源消息传递平台，其部署占用空间非常小。无需支付许可费用，再加上可与任何开发环境一起使用的高性能、可靠消息传递，提供了一种支持随处集成的解决方案
> 
> **ActiveMQ** (http://activemq.apache.org/)
> 
> Apache ActiveMQ (tm) 是最流行和最强大的开源消息传递和集成模式服务器。Apache ActiveMQ 速度快，支持许多跨语言客户端和协议，带有易于使用的企业集成模式和许多高级特性，同时完全支持 JMS 1.1 和 J2EE 1.4。
> 
> Apache ActiveMQ 在 Apache 2.0 许可下发布
> 
> **兔MQ**
> 
> RabbitMQ 是一个消息代理。主要思想非常简单：它接受和转发消息。您可以将其视为邮局：当您将邮件发送到邮箱时，您很确定邮递员先生最终会将邮件递送给您的收件人。使用这个比喻 RabbitMQ 是一个邮箱、一个邮局和一个邮递员。
> 
> RabbitMQ 和邮局之间的主要区别在于它不处理纸张，而是接受、存储和转发二进制数据块 - 消息。
> 
> * * *
> 
> 请随时在 [https://bitbucket.org/jmls/stomp](https://bitbucket.org/jmls/stomp)问题系统上记录任何问题，并 fork 项目以提交您要添加的所有新功能......
> 
> dot.r Stomp 使用宽松的 MIT 许可证 (http://en.wikipedia.org/wiki/MIT_License)
> 
> 玩得开心，享受！
> 
> 朱利安

我试过了——安装和运行代码非常简单。窥视源头是一种乐趣。

ApacheMQ 上手非常轻松。这是一种非常非常简单的消息传递方式。

如果您是一个基于字符的旧化石（例如我自己），您可能希望跳过 GUI 示例。您可以通过以下方式发送消息：

```
/* stompQOut.p
 *
 */

dotr.Stomp.Helper.SendMessage:ToQueue("myQueue","a test message") 
```

并通过以下方式接收消息：

```
/* stompQIn.p
 *
 */

define variable stompClient as dotr.Stomp.StompClient no-undo.

define variable msgTxt as character no-undo format "x(60)".

stompClient = new dotr.Stomp.StompClient().

stompClient:Subscribe( this-procedure ).
stompClient:SubscribeToQueue( "myQueue" ).

pause 0 before-hide.

wait-for close of this-procedure.

procedure NewStompMessage:
  define input parameter stompMessage as dotr.Stomp.StompMessage no-undo.
  message string( stompMessage:Body ).
end. 
```

# ios - UIView 仅在另一个视图上投影

> ID：12645438
> 
> 赞同：1
> 
> 时间：2012-09-28T18:29:16.630
> 
> 标签：ios, core-graphics, shadow

关于如何为视图绘制阴影有很多问题。但是我怎样才能让我的视图投下只有另一个视图才能接收到的阴影呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:39:59.760

*   制作一个白色背景的应用程序。
*   使您的视图加上阴影。
*   截屏。
*   使用原始应用程序中的屏幕截图。

当然，您也可以在代码中即时制作图片，但这更具挑战性。无论如何，这将是您最终应用程序中不需要的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T19:28:37.107

如果视图 A 是带有阴影的视图，而视图 B 是 A 的父视图，则可以将作为 B 层的属性的 maskToBounds 设置为 YES。

B 及其子视图的内容不会显示在 B 之外。它们将被剪裁。

更多细节在这里：[如果设置为 YES，UIView layer.masksToBounds 正在做什么？](https://stackoverflow.com/questions/2648681/what-uiview-layer-maskstobounds-is-doing-if-set-to-yes)

但是，如果您希望在更复杂的场景中出现阴影，您可能需要更具体一些。

# mysql - 使用 Sql 子查询显示帖子

> ID：12645439
> 
> 赞同：0
> 
> 时间：2012-09-28T18:29:17.357
> 
> 标签：mysql

我正在为我的部门建立一个小型社交网络。

我的主页是你可以发表评论的地方，你的朋友可以评论它。

我有**4 个表**...allposts_tb、friendship_tb、response_tb 和 signup_tb ..

**allposts_tb**收集人们发布的更新和帖子，它具有以下列 ( `all_id(PK)`, `name`, `comment`, `time`)

**友谊**_tb作为列 ( `friend_id(Pk)`, `myname`, `newfriend`, `status`)

**response_tb**作为列（`id(Pk)`, `name`, `response`, `all_id(Fk)`, `time`）

signup_tb**作为**列 ( `signup_id`, `lastname`, `firstname`, `email`, `password`, `country`, `profilepicture`)

我可以使用下面的 sql 查询轻松显示人们发表的评论

```
 SELECT allposts_tb.all_id,allposts_tb.name,allposts_tb.comment, allposts_tb.time,
friendship_tb.myname,friendship_tb.newfriend,signup_tb.firstname,
signup_tb.lastname,signup_tb.email,signup_tb.profilepicture,
allposts_tb.expand   
FROM allposts_tb,friendship_tb,signup_tb
WHERE allposts_tb.name = friendship_tb.newfriend
 and friendship_tb.myname=colname and
 allposts_tb.name=signup_tb.email
ORDER BY allposts_tb.all_id DESC
and colname=$_SESSION['MM_Username'] 
```

好吧，在评论下方显示人们对特定评论的回复时遇到问题……就像复制 facebook 的页面一样。你马上说些什么，它应该显示在评论下方……我知道我打算使用 sub询问。就在我给你们的查询中……已经阅读了很多网页，但无法正常工作……请帮助我……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:24:42.593

除了使用 response_tb 而不是 allposts_tb 表之外，您可以创建与第一个查询类似的第二个查询。然后在两个查询之间放置一个 UNION ALL 语句，结合结果。最后，您可以放置​​一个 ORDER BY 子句并按 all_id 排序，然后按时间排序。

只需将来自 response_tb 的查询中的“comment”字段替换为“response”即可。

SQL 很可能看起来像这样：

```
SELECT allposts_tb.all_id,allposts_tb.name,allposts_tb.comment, allposts_tb.time,
friendship_tb.myname,friendship_tb.newfriend,signup_tb.firstname,
signup_tb.lastname,signup_tb.email,signup_tb.profilepicture,
allposts_tb.expand   
FROM allposts_tb,friendship_tb,signup_tb
WHERE allposts_tb.name = friendship_tb.newfriend
 and friendship_tb.myname=colname and
 allposts_tb.name=signup_tb.email
and colname=$_SESSION['MM_Username']

UNION ALL

SELECT response_tb.all_id,response_tb.name,response_tb.response, response_tb.time,
friendship_tb.myname,friendship_tb.newfriend,signup_tb.firstname,
signup_tb.lastname,signup_tb.email,signup_tb.profilepicture,
response_tb.expand   
FROM response_tb,friendship_tb,signup_tb
WHERE response_tb.name = friendship_tb.newfriend
 and friendship_tb.myname=colname and
 response_tb.name=signup_tb.email
and colname=$_SESSION['MM_Username']
ORDER BY all_id DESC, time desc 
```

# sqlite - 如何访问项目文件夹中的文件 - Windows 8 商店应用程序？

> ID：12645440
> 
> 赞同：1
> 
> 时间：2012-09-28T18:29:29.777
> 
> 标签：sqlite, windows-8, file-access

我有一个 Windows 8 商店应用程序，我在其中创建了一个“App_Data”文件夹。我添加了一个 sqlite 数据库文件，现在我正在尝试获取文件路径以创建连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T21:57:08.400

我将现有的 sqlite 文件添加到项目的 Common 文件夹中，并将 Build Action 设置为 Content。您无法写入此文件，因此您需要将其复制到应用程序的本地存储文件夹中。我创建了一个 StorageManagement 类来在应用程序启动时初始化我的数据库。

```
 public static class StorageManagement
    {
        public static async Task<bool> DoesFileExistAsync(string file)
        {
            try
            {
                await Windows.Storage.ApplicationData.Current.LocalFolder.GetFileAsync(file);
                return true;
            }
            catch
            {
                return false;
            }
        }

        public static async void InitializeDatabaseAsync()
        {
            if (!DoesFileExistAsync("MyDb.sqlite").Result)
            {
                string databaseFile = Path.Combine(Windows.ApplicationModel.Package.Current.InstalledLocation.Path, @"Common\MyDb.sqlite");
                StorageFile file = await StorageFile.GetFileFromPathAsync(databaseFile);
                await file.CopyAsync(Windows.Storage.ApplicationData.Current.LocalFolder);
            }
        }
    } 
```

如果数据库文件不在本地存储文件夹中，那么它才会从公共文件夹中复制文件。然后我可以使用本地存储中的文件创建我的 sqlite 连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T21:27:12.233

一种方法是构造文件的 uri，然后使用它来访问文件。

```
var uri = new Uri("ms-appdata:///local/app_data/database.data");
var file = await StorageFile.GetFileFromApplicationUriAsync(uri); 
```

另一种方法是使用 ApplicationData 类。

```
var folder = await ApplictionData.Current.LocalFolder.GetFolderAsync("app_data");
var file = await folder.GetFileAsync("database.data"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T19:09:14.560

您是否在项目文件夹中创建了这个“app_data”文件夹？这不起作用，因为您只能直接访问保存在应用程序隔离存储中的文件，或者您需要用户从使用文件选择器中选择文件，然后才能在应用程序中访问它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T19:10:50.287

我遇到了类似的问题。在我们拥有生成 JSON 的服务之前，我需要从一个文本文件中读取 JSON，该文本文件将作为应用程序的一部分打包，作为中间步骤。

使用 LocalStorage 不是这里的答案，InstalledLocation 是用来读取作为应用程序一部分打包的文件的东西，如下所示：

```
 var file = await Package.Current.InstalledLocation.GetFileAsync("app_data\\tempjsonfile.json");
    String json = await FileIO.ReadTextAsync(file); 
```

这从我在项目中创建的 app_data 目录中的 json 文件中读取。基本：在 JSON 文件的属性中，将构建操作设置为“内容”并将复制到输出目录设置为“始终复制”。

# git - 如何在不检查该分支的情况下查看不同分支中文件的提交历史记录？

> ID：12645445
> 
> 赞同：2
> 
> 时间：2012-09-28T18:29:53.100
> 
> 标签：git

有什么办法可以强制“git log”从不同的分支读取提交历史记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T18:39:54.413

只需输入“git log 分支名--文件名”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T04:45:30.073

您可以使用

```
git whatchanged branch filename 
```

获取在该分支中更改文件的所有提交的概述。和

```
git whatchanged -p branch filename 
```

将为您提供每个提交的该文件的详细差异。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T18:34:08.620

您可以签出不同的分支，而无需提交您当前所在的分支

```
git checkout <<branchname>> -f 
```

我相当确定这不会影响您当前的（未提交的）分支

# entity-framework - EF 5 代码优先字典映射

> ID：12645451
> 
> 赞同：4
> 
> 时间：2012-09-28T18:30:05.737
> 
> 标签：entity-framework, ef-code-first, entity-framework-5

有没有办法使用 Entity Framework 5 映射字典？

从我在搜索时发现的情况来看，直到 EF 4.1 才支持它，不确定 EF 5 是否提供任何创新方法来轻松映射它。

我正在使用字典为类的每个对象存储“可变数量的属性”。

如果不支持，在这种情况下使用的最佳替代数据结构是什么（由 EF 支持）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T19:48:54.117

仍然不支持没有字典。您必须使用传统的一对多关系。您当前在字典中的每个键/值对都将作为记录存储在表中，并与主实体（包含字典的那个）的外键相关。实体应如下所示：

```
public class Item {
    public int Id { get; set; } // unique autogenerated database key
    public string Key { get; set; }
    public string Value { get; set; }
    public int PrincipalId { get; set; } // FK to principal entity
} 
```

属性类型和外键名称将根据您当前的情况而有所不同。主要实体将只有：

```
public virtual ICollection<Item> Items { get; set; } 
```

# asp.net - 共享主机上的“该程序集不允许部分受信任的调用者”异常

> ID：12645452
> 
> 赞同：2
> 
> 时间：2012-09-28T18:30:09.263
> 
> 标签：asp.net

我已将基于 ASP 的站点迁移到新服务器，请注意我几乎没有 ASP 经验（我主要使用基于 PHP 的站点）。尽管我遇到了一些问题，但我已经设法解决了问题，但不幸的是，在完成迁移后我注意到了剩下的一个问题。问题在此页面上：http: [//playvictoria.org/EN/main/involved/join.aspx](http://playvictoria.org/EN/main/involved/join.aspx)

我已经对“该程序集不允许部分受信任的调用者”异常进行了几次谷歌搜索。据我了解，这与“信任级别”有关，因为它是共享主机，因此可能设置为中等。我猜这个程序集必须被添加到一个叫做“GAC”的东西中，但由于它是共享主机，我想我无论如何都无法访问它。我还读到我可以在某个 .cs 文件中设置一个标志，但我找不到这些标志的位置。

任何帮助都将不胜感激，请记住，在一般情况下，我是 ASP 和 Windows 服务器的新手。

# c# - 从 View 的 DataContext 引用 ViewModel 会阻止 XAML 设计器编辑

> ID：12645453
> 
> 赞同：1
> 
> 时间：2012-09-28T18:30:19.923
> 
> 标签：c#, wpf, mvvm

我正在尝试将我的视图模型作为数据上下文“连接”到我的视图。我将使用一个应用程序范围的视图到视图模型场景。

我喜欢使用以下方法附加的想法（它成功了）：

```
 <UserControl ......Window Stuff.......>
        <UserControl.DataContext >
             <vm:MyViewModel/>
         </UserControl.DataContext>
 </UserControl> 
```

然而，xaml 编辑器在下面放置了一条紫色波浪线，`<vm:MyViewModel/>`并且 hovertext 给出了错误

```
 "Cannot create instance of vm:MyViewModel" 
```

但它正确构建/运行我的应用程序并呈现数据，该方法：

```
 <UserControl>
    <UserControl.Resources>
        <DataTemplate DataType="{x:Type vm:MyViewModel}">
             <vw:MyView/>
        </DataTemplate>
   </UserControl.Resources>
 </UserControl> 
```

不显示我的数据，尽管它似乎是可接受的代码。

注释掉 DataContext 引用对于手动编辑控件来说真的很痛苦。我做错了什么/我忘记了什么吗？

提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:50:04.520

视图模型的构造函数中可能发生了一些事情，导致模型无法在 Visual Studio 中实例化。

尝试`return`在视图模型的构造函数中完成任何操作之前添加一条语句，重新构建并查看错误是否消失。

这是一个扩展方法，它将确定当前进程是否在 Visual Studio 中：

```
public static class Extensions
{
    /// <summary>
    /// Extension method to determine if the current process is executing
    /// code within the Visual Studio designer or not.
    /// </summary>
    public static bool IsVisualStudioDesigner( this Process process )
    {
        return process.MainModule.ModuleName.Contains( "devenv.exe" );
    }
} 
```

然后在你的构造函数中：

```
public ctor()
{
  if ( Process.GetCurrentProcess().IsVisualStudioDesigner() )
    return;

  // do constructor stuff
} 
```

# ruby-on-rails - 在 Rails 3 中附加文件 - mimepart Mailer

> ID：12645455
> 
> 赞同：3
> 
> 时间：2012-09-28T18:30:33.393
> 
> 标签：ruby-on-rails, attachment, mailer

我正在使用 Rails 发送电子邮件，如下所示：

```
attachments["ticket.pdf"] = WickedPdf.new.pdf_from_string(render_to_body(pdf: "ticket", template: 'template' })) 
```

这在 Gmail 中运行良好，但在其他几个客户端中，附加的 pdf 只是没有出现。

查看源代码，我意识到这是 mimeparts 的问题。

我很难在雅虎和其他几个电子邮件客户端（如 Thunderbird）中显示附件文件，如果我分析发送的电子邮件的源代码，我会发现：文件的每个部分的 mimepart 都是相同的。 .层次结构（据我所知）必须是这样的：

```
multipart/mixed
multipart/alternative
multipart/related
text/html
image/png (e.g. for an inline attachment; pdf would be another good example)
text/plain
application/zip (e.g for an attachment--not inline) 
```

这是我从[https://github.com/jcoleman/mail_alternatives_with_attachments中提取的](https://github.com/jcoleman/mail_alternatives_with_attachments)

这是电子邮件来源（只是部分内容以便更好地理解）：

```
Delivered-To: someone@yahoo.com
Received: by 10.194.54.135 with SMTP id j7csp144091wjp;
        Fri, 28 Sep 2012 10:55:03 -0700 (PDT)
Received: by 10.224.187.146 with SMTP id cw18mr18768052qab.35.1348854902751;
        Fri, 28 Sep 2012 10:55:02 -0700 (PDT)
Return-Path: <somewhare@company.com>
Received: from mail-qa0-f46.company.com (mail-qa0-f46.company.com [209.85.216.46])
        by mx.company.com with ESMTPS id c6si13006455qao.34.2012.09.28.10.55.02
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 28 Sep 2012 10:55:02 -0700 (PDT)
Received-SPF: pass (company.com: domain of somewhere@company.com designates 209.85.216.46 as permitted sender) client-ip=xx.xxx.xxx.xxx;
Authentication-Results: mx.company.com; spf=pass (company.com: domain of somwhere@company.com designates 209.85.216.46 as permitted sender) smtp.mail=somewhere@company.com; dkim=pass header.i=@company.com
Received: by mail-qa0-f46.company.com with SMTP id c26so105866qad.5
        for <someone@company.com>; Fri, 28 Sep 2012 10:55:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=company.com; s=20120113;
        h=date:from:reply-to:to:message-id:subject:mime-version:content-type
         :content-transfer-encoding;
        bh=nETVpMomUq0PkrNf9ScGjdaBPc5tYF0m1Rphx5FNS4c=;
        b=I1ICSRRK10cdrqXxkNWmK5cLvXOqFpxXmzxNMlIVa8jh+4U1GwqwI1GZF7BRXh5FAU
         wCyTzXfSkBrmn2cVGwUUiNEh956KT2ssWx37cQIb915lSp6rdIqflgQcF9yKwmtJoxDL
         qO+nEVse7+Azi828zC7D6VV7ebAbmnr006KmppkH9bxILk+syiPKLvp4rZXAMIp0IFW8
         nYZ2jY+n/ryduTSl0qDaBDCzVrky2eNwpqfJYizoYWIhxFuDmUWwaPpKzfWoxzT4b0+P
         Mp/Ugv6iN1QyETJWbOfX4lpGezFzcaV7reZaBXLzcqUe1dc8elxFfWncsE0vozmFaj8m
         z37Q==
Received: by 10.224.58.134 with SMTP id g6mr18690371qah.40.1348854902269;
        Fri, 28 Sep 2012 10:55:02 -0700 (PDT)
Return-Path: <somwhere@company.com>
Received: from localhost.localdomain (company.com. [xx.xxx.xxx.xx])
        by mx.company.com with ESMTPS id ck11sm13357478qab.17.2012.09.28.10.54.56
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 28 Sep 2012 10:55:00 -0700 (PDT)
Return-Path: <bounces1@somewhere.com>
Date: Fri, 28 Sep 2012 15:09:56 -0300
From: somewhere <somewhere@company.com>
Reply-To: someone@company.com
To: someone@company.com
Message-ID: <5065e7f4b41bf_a9e43fdbdd45a7601574c@megara.local.mail>
Subject: algun subject
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_5065e7f4af345_a9e43fdbdd45a760153b9";
 charset=UTF-8
Content-Transfer-Encoding: 7bit

----==_mimepart_5065e7f4af345_a9e43fdbdd45a760153b9
Date: Fri, 28 Sep 2012 15:09:56 -0300
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: quoted-printable
Content-ID: <5065e7f4b0ead_a9e43fdbdd45a7601546@megara.local.mail>

********
texto cualquiera
********

----==_mimepart_5065e7f4af345_a9e43fdbdd45a760153b9
Date: Fri, 28 Sep 2012 15:09:56 -0300
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: quoted-printable
Content-ID: <5065e7f4b1d7d_a9e43fdbdd45a76015576@megara.local.mail>

<html xmlns=3D'http://www.w3.org/1999/xhtml'>
  <html xml:lang=3D'en' xmlns=3D'http://www.w3.org/1999/xhtml'>
    <head>
      <meta content=3D'text/html; charset=3Dutf-8' http-equiv=3D'Content-=
Type'>
      <title>somewhere</title>
      <link href=3D'/assets/ev_classic_mailer.css' rel=3D'stylesheet' typ=
e=3D'text/css'>
      <link href=3D'/assets/mailer_colors.css' rel=3D'stylesheet' type=3D=
'text/css'>
    </head>
    <body>
      <table class=3D'mail-container-table'>
        <tr>
          <td class=3D'decoration' colspan=3D'3'></td>
        </tr>
        <tr>
          <th background=3D'https://here.company.com/ass=
ets/mail/ev_classic_hd.png' class=3D'bcolor12 border header-01' colspan=3D=
'3'>
            <h1>cogotudo</h1>
          </th>
        </tr>
      </table>
    </body>
  </html>
</html>

----==_mimepart_5065e7f4af345_a9e43fdbdd45a760153b9
Date: Fri, 28 Sep 2012 15:09:56 -0300
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: quoted-printable
Content-ID: <5065e7f4b2ede_a9e43fdbdd45a76015666@megara.local.mail>

<html xmlns=3D"http://www.w3.org/1999/xhtml" style=3D"outline: 0; font-we=
ight: inherit; font-style: inherit; font-size: 100%; font-family: inherit=
; vertical-align: baseline; margin: 0; padding: 0; border: 0;">
  <html xml:lang=3D"en" xmlns=3D"http://www.w3.org/1999/xhtml" style=3D"o=
utline: 0; font-weight: inherit; font-style: inherit; font-size: 100%; fo=
nt-family: inherit; vertical-align: baseline; margin: 0; padding: 0; bord=
er: 0;">
    <head>
      <meta content=3D'text/html; charset=3Dutf-8' http-equiv=3D'Content-=
Type'>
      <title>somewhere</title>
      <link href=3D'/assets/ev_classic_mailer.css' rel=3D'stylesheet' typ=
e=3D'text/css'>
      <link href=3D'/assets/mailer_colors.css' rel=3D'stylesheet' type=3D=
'text/css'>
    </head>
    <body style=3D"outline: 0; font-weight: inherit; font-style: inherit;=
</body>
  </html>
</html>

----==_mimepart_5065e7f4af345_a9e43fdbdd45a760153b9
Date: Fri, 28 Sep 2012 15:09:56 -0300
Mime-Version: 1.0
Content-Type: application/pdf;
 charset=UTF-8;
 filename=ticket.pdf
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
 filename=ticket.pdf
Content-ID: <5065e7f43b81b_a9e43fdbdd45a760150c9@megara.local.mail>

JVBERi0xLjQKMSAwIG9iago8PAovVGl0bGUgKP7/KQovQ3JlYXRvciAo/v8p
Ci9Qcm9kdWNlciAo/v8AUQB0ACAANAAuADgALgAyACAAXCgAQwBcKQAgADIA
MAAxADEAIABOAG8AawBpAGEAIABDAG8AcgBwAG8AcgBhAHQAaQBvAG4AIABh
AG4AZAAvAG8AcgAgAGkAdABzACAAcwB1AGIAcwBpAGQAaQBhAHIAeQBcKAAt
AGkAZQBzAFwpKQovQ3JlYXRpb25EYXRlIChEOjIwMTIwOTI4MTgwOTU1KQo+
PgplbmRvYmoKMiAwIG9iago8PAovVHlwZSAvQ2F0YWxvZwovUGFnZXMgMyAw
IFIKPj4KZW5kb2JqCjQgMCBvYmoKPDwKL1R5cGUgL0V4dEdTdGF0ZQovU0Eg
dHJ1ZQovU00gMC4wMgovY2EgMS4wCi9DQSAxLjAKL0FJUyBmYWxzZQovU01h
c2sgL05vbmU+PgplbmRvYmoKNSAwIG9iagpbL1BhdHRlcm4gL0RldmljZVJH

----==_mimepart_5065e7f4af345_a9e43fdbdd45a760153b9-- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-10T04:06:02.957

您所有的 mimepart 边界都是相同的……它们都是“替代”边界。

> --==_mimepart_5065e7f4af345_a9e43fdbdd45a760153b9

对于包含 HTML、纯文本和附件的电子邮件，您需要通过将边界正确放置在正确的位置来声明并正确封装单独的部分。了解其外观的最简单方法是在电子邮件客户端中手动创建一封电子邮件，其中包含您想要的所有“功能”（HTML + 纯文本 + 附件），然后查看源代码并记下 mimepart边界被划定。

电子邮件源的每个“部分”实际上都声明了边界的样子，然后在每个部分的末尾有一条或多条边界线表示该部分的结束。部件可以而且应该封装在其他部件中。这该死的复杂，但带回家的注意事项是，在您的示例中，您只有一个 mimepart 声明并在您应该拥有更多时使用（正如您在层次结构中指出的那样）。

现在至于哪里/什么时候出了差错，我们必须查看您用于从头到尾生成电子邮件的代码。

# c# - 在 Keypress 事件中使特定列仅接受 datagridview 中的数值

> ID：12645458
> 
> 赞同：48
> 
> 时间：2012-09-28T18:31:00.793
> 
> 标签：c#, datagridview, keypress

我需要制作仅在按键事件中仅接受特定列的数值的 datagridview。有没有最好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-02-01T03:35:05.097

*   添加EditingControlShowing事件
*   在 EditingControlShowing 中，检查当前单元格是否位于所需的列中。
*   在 EditingControlShowing 中注册一个新的 KeyPress 事件（如果上述条件为真）。
*   删除之前在 EditingControlShowing 中添加的任何 KeyPress 事件。
*   在 KeyPress 事件中，检查如果键不是数字则取消输入。

例子：

```
private void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
{
    e.Control.KeyPress -= new KeyPressEventHandler(Column1_KeyPress);
    if (dataGridView1.CurrentCell.ColumnIndex == 0) //Desired Column
    {
        TextBox tb = e.Control as TextBox;
        if (tb != null)
        {
            tb.KeyPress += new KeyPressEventHandler(Column1_KeyPress);
        }
    }
}

private void Column1_KeyPress(object sender, KeyPressEventArgs e)
{
    if (!char.IsControl(e.KeyChar) && !char.IsDigit(e.KeyChar))
    {
        e.Handled = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-09-28T19:34:45.753

您必须像这样使用[DataGridView.CellValidating 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellvalidating.aspx)：

```
 private void dataGridView1_CellValidating(object sender, 
                                           DataGridViewCellValidatingEventArgs e)
    {
        if (e.ColumnIndex == 1) // 1 should be your column index
        {
            int i;

            if (!int.TryParse(Convert.ToString(e.FormattedValue), out i))
            {
                e.Cancel = true;
                label1.Text ="please enter numeric";
            }
            else
            {
                // the input is numeric 
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-09-17T05:25:09.837

```
 private void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
    {
        e.Control.KeyPress -= new KeyPressEventHandler(Column1_KeyPress);
        if (dataGridView1.CurrentCell.ColumnIndex == 4) //Desired Column
        {
            TextBox tb = e.Control as TextBox;
            if (tb != null)
            {
                tb.KeyPress += new KeyPressEventHandler(Column1_KeyPress);
            }
        }

    }
    private void Column1_KeyPress(object sender, KeyPressEventArgs e)
    { 
          // allowed only numeric value  ex.10
        //if (!char.IsControl(e.KeyChar)
        //    && !char.IsDigit(e.KeyChar))
        //{
        //    e.Handled = true;
        //}

               // allowed numeric and one dot  ex. 10.23
        if (!char.IsControl(e.KeyChar)&& !char.IsDigit(e.KeyChar)
             && e.KeyChar != '.')
        {
            e.Handled = true;
        }

        // only allow one decimal point
        if (e.KeyChar == '.'
            && (sender as TextBox).Text.IndexOf('.') > -1)
        {
            e.Handled = true;
        }
    } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-12T11:48:40.263

除非您像其他人指出的那样需要小数位，否则给出的答案非常好。在这种情况下，您需要扩展验证，在下面添加 using 和 vars 以获得小数分隔符的区域性变量值

```
using System.Globalization;

NumberFormatInfo nfi = Thread.CurrentThread.CurrentCulture.NumberFormat;
char decSeperator;

decSeperator = nfi.CurrencyDecimalSeparator[0]; 
```

将验证扩展到：

```
if (!char.IsControl(e.KeyChar) && !(char.IsDigit(e.KeyChar) 
| e.KeyChar == decSeperator))
{
    e.Handled = true;
}
// only allow one decimal point
if (e.KeyChar == decSeperator
    && (sender as TextBox).Text.IndexOf(decSeperator) > -1)
{
    e.Handled = true;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-17T11:27:00.267

```
Private WithEvents txtNumeric As New DataGridViewTextBoxEditingControl

Private Sub DataGridView1_EditingControlShowing(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewEditingControlShowingEventArgs) Handles DataGridView1.EditingControlShowing

txtNumeric = CType(e.Control, DataGridViewTextBoxEditingControl)
End Sub

Private Sub txtNumeric_KeyPress(sender As Object, e As KeyPressEventArgs) Handles txtNumeric.KeyPress
    If (DataGridView1.CurrentCell.ColumnIndex > 0) Then
        If (Not Char.IsControl(e.KeyChar) And Not Char.IsDigit(e.KeyChar) And Not e.KeyChar = ".") Then
            e.Handled = True
        Else
            'only allow one decimal point
            If (e.KeyChar = "." And txtNumeric.Text.Contains(".")) Then
                e.Handled = True
            End If
        End If
    End If
End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-18T05:33:02.090

您也可以尝试这种方式，接受小数字符

```
 private void Column1_KeyPress(object sender, KeyPressEventArgs e) 
    {
        //allow number, backspace and dot
        if (!(char.IsDigit(e.KeyChar) || e.KeyChar == (char)Keys.Back || e.KeyChar == '.'))
        {
            e.Handled = true;

        }
        //allow only one dot
        if (e.KeyChar == '.' && (sender as TextBox).Text.Contains("."))
        {
            e.Handled = true;

        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-19T22:10:54.577

我正在做一个矩阵计算器，并且正在使用两个 DataGridView 对象。这是一个对我有用的代码。我从这篇文章中获取了第一条评论并对其进行了一些修改。

```
//Adding characters to a cell
    private void dataGridView_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
    {

            if (e.Control != null)
            {
                e.Control.KeyPress += new KeyPressEventHandler(Column1_KeyPress);
                Console.WriteLine(e.Control.Text);
            }
    }
    //Handling presses for minus dot and numbers
    private void Column1_KeyPress(object sender, KeyPressEventArgs e)
    {
        if (!char.IsControl(e.KeyChar) && !char.IsDigit(e.KeyChar) && e.KeyChar != '-' && e.KeyChar != '.')
            e.Handled = true;
        if (e.KeyChar == '.')
        {
            if (((DataGridViewTextBoxEditingControl)sender).Text.Length == 0)
                e.Handled = true;
            if (((DataGridViewTextBoxEditingControl)sender).Text.Contains('.'))
                e.Handled = true;
        }
        if (e.KeyChar == '-')
        {
            if (((DataGridViewTextBoxEditingControl)sender).Text.Length != 0)
                e.Handled = true;
            if (((DataGridViewTextBoxEditingControl)sender).Text.Contains('-'))
                e.Handled = true;
        }
    } 
```

# iphone - CGPointMake 在 vi ewDidLoad 中不起作用

> ID：12645462
> 
> 赞同：0
> 
> 时间：2012-09-28T18:31:34.990
> 
> 标签：iphone, uibutton, viewdidload

我有一个按钮，我需要在 viewDidLoad 上移动，但它不想移动......奇怪的是，如果我在 -(IBAction) 上使用相同的确切代码，那么它应该会移动......任何线索为什么会这样？我用来移动按钮的代码是这样的：

```
self.myButton.center = CGPointMake(50, 120); 
```

谢谢你的帮助。和平，马西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T14:46:33.567

对于遇到相同问题的任何人，我在此步骤中找到了解决方案：[presentViewController: crash on iOS <6 (AutoLayout)](https://stackoverflow.com/questions/11198981/presentviewcontroller-crash) 删除“使用自动布局”选项让我的应用程序正常工作。

# java - Spring 安全 @PreAuthorize("hasAnyRole('....')")

> ID：12645463
> 
> 赞同：3
> 
> 时间：2012-09-28T18:31:37.047
> 
> 标签：java, spring, spring-security

我正在使用 spring security @PreAuthorise 来检查谁和谁不能访问我的服务层中的方法。它真的很好用。通常我的服务方法都带有注释

```
@PreAuthorize("hasAnyRole('MY_USER_ROLE')") 
```

我的问题是我有一个由几个 jar 文件组成的战争文件。这些 jar 文件中的每一个都负责一段业务逻辑。我现在想要一个 jar 文件中的一项服务访问另一个 jar 文件中的另一项服务。由于权限，这被拒绝。如果我注释掉许可，那么一切正常。

无论如何我可以在调用此服务之前通过 spring 进行身份验证吗？（也许有一个虚拟用户？）或者可能关闭同一应用程序中 jar 的安全性？还是我的设计错了？

其他人有这种问题吗？我应该改用什么设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T06:15:07.343

您需要为调用服务的线程（在另一个 jar 中）提供`@PreAuthorize`（对于调用的服务）所需的权限。

如果线程是由用户请求在 Web 应用程序中触发的，那么这通常是用户权限。

但是如果线程是由某个计时器服务触发的，那么您需要给他们正确的身份验证

```
 Authentication authentication = new UsernamePasswordAuthenticationToken("dummy", "password");
    SecurityContext securityContext = SecurityContextHolder.getContext();
    securityContext.setAuthentication(authentication); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-28T18:54:54.507

我相信这是一个很好的例子，你应该使用 Spring security @Secured 注解

*   什么是@Secured 注解？
    *从 2.0 版开始，Spring Security 大大改进了对向服务层方法添加安全性的支持。它提供对 JSR-250 注释安全性以及框架的原始 @Secured 注释的支持。*

    来源：[Spring Security 3.1 参考 2.4 方法安全](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ns-config.html#ns-protect-pointcut)
    *@Secured 注解允许您在方法中设置限制。例如，您可以授权所有注册用户都可以访问 get() 方法。但是对于 edit() 方法，您可以将其标记为仅供管理员访问。*

在以下位置查看一些教程：
[http ://burtbeckwith.com/blog/?p=1398](http://burtbeckwith.com/blog/?p=1398)
[http://krams915.blogspot.in/2010/12/spring-security-3-mvc-using-secured.html](http://krams915.blogspot.in/2010/12/spring-security-3-mvc-using-secured.html)

# javascript - 如何拥有可重用方法和私有属性的 Javascript 对象创建模式？

> ID：12645465
> 
> 赞同：11
> 
> 时间：2012-09-28T18:31:45.853
> 
> 标签：javascript, jquery, oop, design-patterns, object

考虑到具有私有属性的对象创建模式，一种方法是：

```
function MyStack (){
    var list = [],
        index = 0;

    this.push =  function(val){ 
        return list[index++] = val;
    };
    this.pop = function(){// ...}
}

var stack1 = new MyStack();       stack1.push(5);
var stack2 = new MyStack();       stack2.push(11); 
```

问题在于：Stack 的每个实例都有自己的方法“push”和“pop”的副本。

实现构造方法的另一种方法是：

```
function MyStack(){ 
    this.list = []; 
    this.index = 0;
}
MyStack.prototype = {
    insert: function(val){
            return this.list[this.index++] = val;
        },
    pop:function(){//...}
} 
```

这里的问题：我们失去了列表和索引的隐私。

有没有办法让我们可以在实例之间重用方法和属性的隐私？

我知道我们可以将这个用于不对对象的任何状态进行操作的方法，但我更多地谈论的是那些对状态进行操作的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:36:15.213

您应该查看 John Resig 的[Simple Javascript Inheritance](http://ejohn.org/blog/simple-javascript-inheritance/)。这是一本很好的读物，并且已经扩展为提供对私有的支持，恰当地称为[Privates.js](https://gist.github.com/821272)；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T02:34:00.353

是的。我已经编辑了这段代码，所以它实际上完全可以按照您的预期工作。这对我来说似乎有点多余，但是，它确实为您提供了提供公共接口的能力，但让您的变量保持私有并控制用户与它们交互的方式。

```
function MyStack(){ 
    var list = []; 
    var index = 0;

    this.getIndex = function(){
        return index;
    }
    this.setIndex = function(val){
        index = val;
    }
    this.list = function(val){
        if(val){
           // setter if a value was provided. Illustrating how you can control
           // index, which I assume is the point of having these things private 
           // to begin with
           return list[this.setIndex(this.getIndex() + 1)] = val;
        }

        // always return list - acts like a getter
        return list;
    }
}
MyStack.prototype = {
    insert: function(val){
            return this.list(val);
        },
    pop:function(){}
}

var stack1 = new MyStack();       
stack1.insert(5);
var stack2 = new MyStack();       
stack2.insert(11); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T02:09:16.027

构造函数可以返回任何对象（不一定是*this*）。可以创建一个构造函数，它返回一个代理对象，其中包含对“真实”实例对象的“真实”方法的代理方法。这听起来可能很复杂，但事实并非如此；这是一个代码片段：

```
var MyClass = function() {
    var instanceObj = this;
    var proxyObj = {
        myPublicMethod: function() {
            return instanceObj.myPublicMethod.apply(instanceObj, arguments);
        }
    }
    return proxyObj;
};
MyClass.prototype = {
    _myPrivateMethod: function() {
        ...
    },
    myPublicMethod: function() {
        ...
    }
}; 
```

好处是代理创建可以自动化，如果我们定义一个命名受保护方法的约定。我创建了一个这样做的小库：http: [//idya.github.com/oolib/](http://idya.github.com/oolib/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T09:43:16.210

我认为在您提到的两种方法中，当使用构造函数模式创建对象时，属性将被复制到其对象中。您提到的第一种方法是值得关注的。我觉得同样适用于第二种方法以及您对这种方法的关注。

当我们想将“MyStack”的属性扩展到其他类时，我们通常会使用您提到的第二种方法。

假设我想将您的类 MyStack 扩展到 MyTest，如下所示

```
var dummy = function();
dummy.prototype = MyStack.prototype;
var MyTest = function(){
};
MyTest.prototype = new dummy(); // Assigning MyStack properties to MyTest
var obj = new MyTest(); 
```

# mercurial - 如何确定变更集 B 是否是 A 的后代？

> ID：12645468
> 
> 赞同：1
> 
> 时间：2012-09-28T18:31:48.967
> 
> 标签：mercurial

给定变更集 A 和 B，是否有命令判断 B 是否是 A 的后代？

假设 B 是 A 的后代，但两者之间有许多变更集。我只是想对这种关系给出是/否的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-24T19:19:28.293

我相信答案应该是：

```
 hg log -r "A:: and B" 
```

或者在 TortoiseHg 中（使用 2.8 版，括号似乎不是强制性的）：

```
 (A:: and B) 
```

要解释结果，如果 B 确实是后代，您应该获取日志，如果不是，则什么都没有（不匹配）。

对不起，但我不能简单地评论原始答案 - 缺乏声誉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:43:14.117

答案：使用修订集

hg log -r "A 和 B::"

如果您使用 tortosehg，请在搜索窗口中使用以下内容。括号是关键

```
(A and B::) 
```

# python - Python：将 try 代码与 try 语句放在同一行有什么好处吗？

> ID：12645470
> 
> 赞同：2
> 
> 时间：2012-09-28T18:32:00.977
> 
> 标签：python, coding-style, format, try-catch

我经常看到人们写这样的代码：

```
try: some_function()
except: print 'something' 
```

当我认为这样做明显更清洁时：

```
try:
        some_function()
except:
        print 'something' 
```

我试图弄清楚为什么？将代码与尝试放在同一行是否存在一些固有的速度差异？（有点像“内联”，但不是真的）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T18:36:36.220

我不认为前者是一个好习惯。人们可能认为 try & except 块足够短，可以写成一行。

引自 PEP8：

> 虽然有时可以将带有小主体的 if/for/while 放在同一行，但切勿对多子句语句执行此操作。还要避免折叠这么长的线！
> 
> 当然不：
> 
> ```
> try: something()
> finally: cleanup() 
> ```

（参考： http: [//www.python.org/dev/peps/pep-0008/](http://www.python.org/dev/peps/pep-0008/)）

因此，始终将 try 写在单独的行中是一个好习惯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:34:29.310

答案就在你的问题中。总是使用第二种形式：它更干净。还有一个很好的[Python 风格指南](http://code.google.com/p/soc/wiki/PythonStyleGuide)，你可能想看看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T18:35:22.410

同意 Joran 的观点，这是风格和可读性偏好的问题。当然，编码回车后实际文件大小会稍大一些，但性能不会受到影响。

# arrays - Scala 数组属于哪个类别？

> ID：12645471
> 
> 赞同：4
> 
> 时间：2012-09-28T18:32:03.437
> 
> 标签：arrays, scala, programming-languages

我正在对 Scala 中的数组进行分析。我正在按照一本书（Robert W. Sebesta 的《编程语言概念》）进行此分析。根据这本书，有五类数组，基于绑定到下标范围、绑定到存储以及从哪里分配存储。类别是：

*   **静态数组**：下标范围是静态绑定的，存储分配是静态的（在运行时之前完成）。静态数组的优点是效率：不需要动态分配或释放。缺点是数组的存储在程序的整个执行时间内是固定的。

*   **固定堆栈动态数组**：是一种下标范围是静态绑定的，但分配是在执行期间的声明细化时完成的。固定堆栈动态数组相对于静态数组的优势在于空间效率。一个子程序中的大数组可以使用与不同子程序中的大数组相同的空间，只要两个子程序不同时处于活动状态。如果这两个阵列在不同的块中同时不活动，情况也是如此。缺点是需要分配和释放时间。

*   **堆栈动态数组**：是一种下标范围和存储分配在细化时动态绑定的数组。但是，一旦绑定了下标范围并分配了存储空间，它们在变量的生命周期内保持不变。堆栈动态数组相对于静态和固定堆栈动态数组的优势在于灵活性。在数组即将被使用之前，不需要知道数组的大小。

*   **固定堆动态数组**：类似于固定堆栈动态数组，在分配存储后，下标范围和存储绑定都是固定的。不同之处在于下标范围和存储绑定都是在用户程序在执行期间请求它们时完成的，并且存储是从堆而不是堆栈分配的。固定堆动态数组的优点是灵活性——数组的大小总是适合问题。缺点是堆的分配时间，比栈的分配时间长。

*   **堆动态数组**：下标范围和存储分配的绑定是动态的，并且可以在数组的生命周期内更改任意次数。堆动态数组相对于其他数组的优势在于灵活性：数组可以在程序执行期间随着空间需求的变化而增长和缩小。缺点是分配和释放时间较长，在程序执行过程中可能会发生多次。以下段落给出了这五个类别的示例。

## **Scala 语言使用了哪些类型的矩阵？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T18:38:28.780

Scala 和 Java 都使用`fixed heap-dynamic array`原始数组。有一些类，例如 Java`Vector`和 Scala 的`ArrayBuffer`，它们建立在原语之上以提供`heap-dynamic array`.

# javascript - Draggable 总是去最外层的可排序

> ID：12645473
> 
> 赞同：1
> 
> 时间：2012-09-28T18:32:07.420
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-draggable, nested-sortable

我正在尝试编写一个页面，用户可以在其中将项目拖到三个嵌套的、可排序的 UL 之一中。无论用户将可拖动对象放在哪里，它总是落在外部（或最顶部）UL 上。我制作了一个简化版本来说明[jsFiddle](http://jsfiddle.net/vexxecon/2q72M/3/)上的问题。

我无法通过 id 来定位 UL，因为 id 是在运行时确定的。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:20:28.757

Javascript 事件冒泡。由于您的可排序对象包含在彼此内部，因此该事件冒泡到您的第一个（最内层）可排序对象，然后事件冒泡到第二个可排序对象，依此类推，直到最终被最后一个（最外层）可排序对象捕获。`event.stopPropigation()`您可以通过添加到可排序接收函数中来防止事件进一步冒泡。

# ruby - 重新连接 tcpsocket（或如何检测关闭的套接字）

> ID：12645474
> 
> 赞同：6
> 
> 时间：2012-09-28T18:32:08.433
> 
> 标签：ruby, ruby-on-rails-3

我有一个连接到服务器的 ruby​​ tcpsocket 客户端。

在发送数据之前如何检查套接字是否已连接？

我是否尝试“拯救”断开连接的 tcpsocket，重新连接然后重新发送？如果是这样，是否有人有一个简单的代码示例，因为我不知道从哪里开始:(

我很自豪我设法在 Rails 中获得了一个持久连接的客户端 tcpsocket。然后服务器决定杀死客户端，一切都崩溃了；）

**编辑**

我已经使用此代码来解决一些问题 - 如果未连接，它将尝试重新连接，但如果服务器关闭则不会处理这种情况（它将继续重试）。这是正确方法的开始吗？谢谢

```
def self.write(data)
  begin
    @@my_connection.write(data)
  rescue Exception => e  
    @@my_connection = TCPSocket.new 'localhost', 8192
    retry
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-11T02:26:50.873

在这些类型的场景中，我通常做的是跟踪变量中的连续重试，并使用其他一些设置重试上限的变量。一旦我们达到顶峰，抛出某种类型的异常，表明存在网络或服务器问题。当然，您需要在成功时重置重试计数变量。

# javascript - Cordova 2.1：如何检查是否在设备或 PC 浏览器上运行？

> ID：12645478
> 
> 赞同：1
> 
> 时间：2012-09-28T18:32:42.170
> 
> 标签：javascript, cordova

在 javascript 中检查我的 Cordova 应用程序是在设备中还是在我的 PC 浏览器中运行的最佳方法是什么？

# http - Apache Camel 中的 org.apache.http.conn.HttpHostConnectException：什么时候抛出？

> ID：12645479
> 
> 赞同：0
> 
> 时间：2012-09-28T18:32:45.063
> 
> 标签：http, apache-camel

我正在尝试在 Apache Camel 中连接一些异常处理程序，并且我已经记住这`org.apache.http.conn.HttpHostConnectException`可能是一个很好的异常尝试几次重试，而不仅仅是记录和放弃。我一直相信，如果 http 端点暂时关闭/不可用，这是我们可以预期的异常。

什么情况下`HttpHostConnectException`抛出？我如何模拟这种情况来验证重试行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:43:38.567

HttpHostConnectException 不是由 Camel 显式抛出的，而是从 HttpClient execute() 调用传回的（参见[http://hc.apache.org/httpclient-3.x/exception-handling.html](http://hc.apache.org/httpclient-3.x/exception-handling.html)）

看看这个骆驼单元测试，了解如何处理/重现它的例子......

[https://svn.apache.org/repos/asf/camel/trunk/components/camel-http4/src/test/java/org/apache/camel/component/http4/HttpNoConnectionRedeliveryTest.java](https://svn.apache.org/repos/asf/camel/trunk/components/camel-http4/src/test/java/org/apache/camel/component/http4/HttpNoConnectionRedeliveryTest.java)

# java - CipherInputStream 仅读取 16 个字节（AES/Java）

> ID：12645489
> 
> 赞同：9
> 
> 时间：2012-09-28T18:33:16.580
> 
> 标签：java, encryption, stream, aes

我正在使用 CipherInputStream 和 CipherOutputStream 使用 AES 加密文件。

`encrypt(...)`似乎工作正常，但我的`decrypt(...)`函数只解密文件的前 16 个字节。

这是我的课：

```
public class AESFiles {

    private byte[] getKeyBytes(final byte[] key) throws Exception {
        byte[] keyBytes = new byte[16];
        System.arraycopy(key, 0, keyBytes, 0, Math.min(key.length, keyBytes.length));
        return keyBytes;
    }

    public Cipher getCipherEncrypt(final byte[] key) throws Exception {
        byte[] keyBytes = getKeyBytes(key);
        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        SecretKeySpec secretKeySpec = new SecretKeySpec(keyBytes, "AES");
        IvParameterSpec ivParameterSpec = new IvParameterSpec(keyBytes);
        cipher.init(Cipher.ENCRYPT_MODE, secretKeySpec, ivParameterSpec);
        return cipher;
    }

    public Cipher getCipherDecrypt(byte[] key) throws Exception {
        byte[] keyBytes = getKeyBytes(key);
        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        SecretKeySpec secretKeySpec = new SecretKeySpec(keyBytes, "AES");
        IvParameterSpec ivParameterSpec = new IvParameterSpec(keyBytes);
        cipher.init(Cipher.DECRYPT_MODE, secretKeySpec, ivParameterSpec);
        return cipher;
    }

    public void encrypt(File inputFile, File outputFile, byte[] key) throws Exception {
        Cipher cipher = getCipherEncrypt(key);
        FileOutputStream fos = null;
        CipherOutputStream cos = null;
        FileInputStream fis = null;
        try {
            fis = new FileInputStream(inputFile);
            fos = new FileOutputStream(outputFile);
            cos = new CipherOutputStream(fos, cipher);
            byte[] data = new byte[1024];
            int read = fis.read(data);
            while (read != -1) {
                cos.write(data, 0, read);
                read = fis.read(data);
                System.out.println(new String(data, "UTF-8").trim());
            }
            cos.flush();
        } finally {
            fos.close();
            cos.close();
            fis.close();
        }
    }

    public void decrypt(File inputFile, File outputFile, byte[] key) throws Exception {
        Cipher cipher = getCipherDecrypt(key);
        FileOutputStream fos = null;
        CipherInputStream cis = null;
        FileInputStream fis = null;
        try {
            fis = new FileInputStream(inputFile);
            cis = new CipherInputStream(fis, cipher);
            fos = new FileOutputStream(outputFile);
            byte[] data = new byte[1024];
            int read = cis.read(data);
            while (read != -1) {
                fos.write(data, 0, read);
                read = cis.read(data);
                System.out.println(new String(data, "UTF-8").trim());
            }
        } finally {
            fos.close();
            cis.close();
            fis.close();
        }
    }

    public static void main(String args[]) throws Exception {
        byte[] key = "mykey".getBytes("UTF-8");
        new AESFiles().encrypt(new File("C:\\Tests\\secure.txt"), new File("C:\\Tests\\secure.txt.aes"), key);
        new AESFiles().decrypt(new File("C:\\Tests\\secure.txt.aes"), new File("C:\\Tests\\secure.txt.1"), key);
    }
} 
```

所以我的问题是，为什么`decrypt`函数只读取前 16 个字节？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-28T19:41:42.757

这是非常微妙的。您的问题是您`fos` *在*`cos`. 在您的`encrypt(...)`方法中，您正在执行以下操作：

```
} finally {
    fos.close();
    cos.close();
    fis.close();
} 
```

这`FileOutputStream`从下面关闭了输出，`CipherOutputStream`因此加密输出的最终填充块永远不会被写入输出文件。如果您关闭`fos` *之后*，`cos`那么您的代码应该可以正常工作。

确实，您应该考虑执行以下操作：

```
 FileOutputStream fos = null;
    CipherOutputStream cos = null;
    FileInputStream fis = null;
    try {
        fis = new FileInputStream(inputFile);
        fos = new FileOutputStream(outputFile);
        cos = new CipherOutputStream(fos, cipher);
        // once cos wraps the fos, you should set it to null
        fos = null;
        ...
    } finally {
        if (cos != null) {
           cos.close();
        }
        if (fos != null) {
           fos.close();
        }
        if (fis != null) {
           fis.close();
        }
    } 
```

仅供参考：`org.apache.commons.io.IOUtils`有一个很棒的`closeQuietly(...)`方法可以`null`为您处理检查并捕获异常。

# ruby - 创建范围从 11AA 到 99ZZ 的数组

> ID：12645491
> 
> 赞同：1
> 
> 时间：2012-09-28T18:33:18.063
> 
> 标签：ruby, arrays, range

我不知道如何制作从 11AA 到 99ZZ 的数组。是否可以在 Ruby 中做到这一点？

我想要这个数组：

```
['11AA', '11AB', '11AC',..., '99ZX', '99ZY', '99ZZ'] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T18:36:27.093

尝试以下操作：

```
('11AA'..'99ZZ').to_a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:39:45.173

伪代码将是：

```
for i '1' to '9'
 for j '1' to '9'
  for k 'A' to 'Z'
   for l 'A' to 'Z'
    insert_in_array(i+j+k+l); 
```

当然，这些值存储为字符串，用双“”不是“”。这是一个伪代码，它可以应用于任何编程语言。

# python - PIL - 需要抖动，但限制调色板会导致问题

> ID：12645492
> 
> 赞同：4
> 
> 时间：2012-09-28T18:33:27.737
> 
> 标签：python, image, python-imaging-library, dithering

我是 Python 新手，并尝试使用 PIL 执行我需要的 Arduino 项目的解析任务。这个问题与`Image.convert()`调色板、抖动等的方法和选项有关。

我有一些硬件能够一次仅显示 16 种颜色的图像（但它们可以指定为 RGB 三元组）。因此，我想自动执行获取任意真彩色 PNG 图像的任务，选择“最佳”16 色调色板来表示它，并将图像转换为仅包含 16 种颜色的调色板。

我想使用抖动。问题是，这种`image.convert()`方法似乎有点古怪。它的论点没有完全记录（[Image.convert() 的 PIL 文档](http://www.pythonware.com/library/pil/handbook/image.htm#Image.convert)），所以我不知道这是我的错还是该方法有问题。

我的代码的简单版本如下：

```
import Image
MyImageTrueColor = Image.new('RGB',100,100) # or whatever dimension...

# I paste some images from several other PNG files in using MyImageTrueColor.paste()

MyImageDithered = MyImageTrueColor.convert(mode='P',
    colors=16,
    dither=1
    ) 
```

根据我所做的一些搜索（例如：[如何使用 PIL 减少调色板](https://stackoverflow.com/questions/1065945/how-to-reduce-color-palette-with-pil)），我认为这种方法应该可以满足我的要求，但没有运气。它使图像抖动，但会产生超过 16 种颜色的图像。

只是为了确保，我删除了“抖动”参数。相同的输出。

我重新添加了“dither=1”参数并加入了 Image.ADAPTIVE 参数（如上面的链接所示），只是为了看看发生了什么。这导致图像包含 16 种颜色，但没有抖动。

我在这里错过了什么吗？PIL 有问题吗？我想出的解决方案是执行 2 个步骤，但这似乎草率且不必要。我想弄清楚如何正确地做到这一点:-) 为了完整起见，这是我的代码版本，它产生了正确的结果——但它以一种草率的方式做到了。（第一步会产生 >16 色的抖动图像，而第二步会产生仅包含 16 色的图像。）

```
MyImage_intermediate = MyImageTrueColor.convert(mode='P',
    colors=16
    )
MyImageDithered = MyImage_intermediate.convert(mode='P',
    colors=16,
    dither=1,
    palette=Image.ADAPTIVE
    ) 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T19:36:26.783

好吧，你没有正确调用事物，所以它不应该工作......但即使我们正确调用事物，我也不确定它是否会工作。

首先，PIL 手册的“官方”免费版既不完整又过时；[http://effbot.org/imagingbook/image.htm](http://effbot.org/imagingbook/image.htm)上的草稿版本不那么完整和过时。

> im.convert(“P”, **options) ⇒ 图像
> 
> 相同，但在将“RGB”图像转换为 8 位调色板图像时提供了更好的控制。可用选项有：
> 
> 抖动=。控制抖动。默认值为 FLOYDSTEINBERG，它将误差分布到相邻像素。要禁用抖动，请使用 NONE。
> 
> 调色板=。控制调色板生成。默认为 WEB，即标准的 216 色“Web 调色板”。要使用优化的调色板，请使用 ADAPTIVE。
> 
> 颜色=。当调色板为自适应时，控制用于调色板的颜色数量。默认为最大值，256 色。

`colors`所以，首先，你不能不使用`ADAPTIVE`——原因很明显：唯一的另一个选择是`WEB`，它只处理固定的 216 色调色板。

其次，你不能传递`1`给`dither`. 如果它恰好是 的值，那可能会起作用`FLOYDSTEINBERG`，但那是`3`。因此，您正在传递一个未记录的值；谁知道那会做什么？特别是因为，查看所有听起来像是抖动算法可能名称的常量，它们都没有值 1。

因此，您可以尝试将其更改为`dither=Image.FLOYDSTEINBERG`（连同`palette=Image.ADAPTIVE`），看看是否会有所不同。

但是，看看代码，看起来这不会有任何好处：

```
if mode == "P" and palette == ADAPTIVE:
    im = self.im.quantize(colors)
    return self._new(im) 
```

这发生在我们得到抖动代码之前。所以它与调用（现已弃用/私有）方法 quantize 完全相同。

多个线程表明高级`convert`功能仅用于公开“抖动到 Web 调色板”或“映射到最近的 N 种颜色”。这似乎与 1.1.6 及更高版本略有不同，但文档和实现仍然不完整。在[http://comments.gmane.org/gmane.comp.python.image/2947](http://comments.gmane.org/gmane.comp.python.image/2947)，其中一位开发人员建议阅读 PIL/Image.py 源代码。

所以，看起来这就是你需要做的。无论`Image.convert`在`Image.WEB`模式中做什么，您都希望这样做——但使用将由 生成的调色板，而`Image.quantize(colors)`不是 Web 调色板。

当然，大部分内容都发生在 C 代码中（在`self.im.quantize`、`self.im.convert`等）中，但是您可以执行以下伪代码之类的操作：

```
dummy = img.convert(mode='P', paletter='ADAPTIVE', colors=16)
intermediate = img.copy()
intermediate.setpalette(dummy.palette)
dithered = intermediate._new(intermediate.im.convert('P', Image.FLOYDSTEINBERG)) 
```

再说一次，你可能不会。您可能需要查看 C 头文件甚至源代码才能找到答案。或者在 PIL 邮件列表上询问。

PS，如果你不熟悉 PIL 的胆量，`img.im`就是 PIL Image object 下面的 C 成像对象`img`。根据我过去的经验，前 3 次浏览 PIL 代码并不清楚，然后突然间一切都变得更有意义了。

# php - 使用带有 php 变量的 Img 源

> ID：12645493
> 
> 赞同：1
> 
> 时间：2012-09-28T18:33:27.377
> 
> 标签：php

我想在 WP 循环中使用一些缩略图生成的图像，代码如下所示：

```
if (!$thumbnail && wpbdp_get_option('use-default-picture'))
    $thumbnail = 'http://images.thumbshots.com/image.aspx?cid=xxxxxxxxxx&v=1&w=283&url=URLHERE'; 
```

URLHERE 是由此生成的：

如何用以下输出（输出和 URL）替换 URLHERE 事物：

```
<?php echo wpbusdirman_the_listing_meta('single'); ?> 
```

我非常不擅长 php。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:22:10.050

```
$thumbnail = 'http://images.thumbshots.com/image.aspx?cid=HIPFHapOLHw%3d&v=1&w=283&url='.urlencode(wpbusdirman_the_listing_meta('single')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:44:53.280

URL 编码返回值！！您将 URL 放入 URL - 如果您不对其进行 URLEncode，您需要的不仅仅是一点点麻烦。我相信它很简单：

```
<?php echo urlencode(wpbusdirman_the_listing_meta('single')); ?> 
```

:)

# javascript - 无法使用 facebook API 加载朋友图像

> ID：12645499
> 
> 赞同：0
> 
> 时间：2012-09-28T18:34:03.133
> 
> 标签：javascript, facebook, image

我正在按照 Facebook 的教程制作移动网站应用程序。但是我不能从朋友那里加载图像。我明白了：

```
<img src="[object Object]"> 
```

它应该可以工作，因为我从示例中复制了整个代码（仅更改了 appId）

这是完整的代码：

```
 <html>
<head>
  <title>Hello World</title>
  <meta name="viewport" content="initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
  <meta property="og:title" content="Hello world" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Hello World" />
  <meta property="og:description" content="Hello World!  This is my mobile web sample app." />
  <meta property="og:image" content="http://www.facebookmobileweb.com/hackbook/img/facebook_icon_large.png"/>
</head>
<body>
  <div id="fb-root"></div>
  <script>
    (function() {
      var e = document.createElement('script'); e.async = true;
          e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
          document.getElementById('fb-root').appendChild(e);
          }());
  </script>

  <script>
    window.fbAsyncInit = function() {
      FB.init({ appId: '226909127331855', 
      status: true, 
      cookie: true,
      xfbml: true,
      oauth: true});

      FB.Event.subscribe('auth.statusChange', handleStatusChange);  
    };
  </script>

  <script>
   function handleStatusChange(response) {
     document.body.className = response.authResponse ? 'connected' : 'not_connected';

     if (response.authResponse) {
       console.log(response);
       updateUserInfo(response);
     }
   }
   </script>

   <div id="login">
     <p><button onClick="loginUser();">Login</button></p>
   </div>
   <div id="logout">
     <div id="user-info"></div>
     <p><button  onClick="FB.logout();">Logout</button></p>
   </div>

  <script>
    function loginUser() {    
      FB.login(function(response) { }, {scope:'email'});    
    }
  </script>

  <style>
    body.connected #login { display: none; }
    body.connected #logout { display: block; }
    body.not_connected #login { display: block; }
    body.not_connected #logout { display: none; }
  </style>

  <div id="user-info"></div>
  <script>
    function updateUserInfo(response) {
      FB.api('/me', function(response) {
        document.getElementById('user-info').innerHTML = '<img src="https://graph.facebook.com/' + response.id + '/picture">' + response.name;
      });
    }
  </script>

  <a href="#" onclick="getUserFriends();">Get friends</a><br>
  <div id="user-friends"></div>
  <script>
  function getUserFriends() {
    FB.api('/me/friends&fields=name,picture', function(response) {
      console.log('Got friends: ', response);

      if (!response.error) {
        var markup = '';

        var friends = response.data;

        for (var i=0; i < friends.length && i < 25; i++) {
          var friend = friends[i];

          markup += '<img src="' + friend.picture + '"> ' + friend.name + '<br>';
        }

        document.getElementById('user-friends').innerHTML = markup;
      }
    });
  }
  </script>

  <a href="#" onclick="publishStory();">Publish feed story</a><br>
  <script>
  function publishStory() {
    FB.ui({
      method: 'feed',
      name: 'I\'m building a social mobile web app!',
      caption: 'This web app is going to be awesome.',
      description: 'Check out Facebook\'s developer site to start building.',
      link: 'http://www.facebookmobileweb.com/hello',
      picture: 'http://www.facebookmobileweb.com/hackbook/img/facebook_icon_large.png'
    }, 
    function(response) {
      console.log('publishStory response: ', response);
    });
    return false;
  }
  </script>

  <a href="#" onclick="sendRequest();">Send request</a><br>
  <script>
  function sendRequest() {
    FB.ui({
      method: 'apprequests',
      message: 'invites you to learn how to make your mobile web app social',
    }, 
    function(response) {
      console.log('sendRequest response: ', response);
    });
  }
  </script>

  <fb:like></fb:like>
</body>
</html> 
```

这是教程：[https ://developers.facebook.com/docs/mobile/web/build/](https://developers.facebook.com/docs/mobile/web/build/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T19:12:00.153

尝试将您的代码更改为：

```
'<img src="' + friend.picture.data.url + '"> ' 
```

正如@Gyan 提到的，看看开放的图形浏览器，看看底层数据结构是什么样子的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T18:56:21.323

你在这个链接上做的有点[不对](https://developers.facebook.com/tools/explorer?method=GET&path=me/friends&fields=name,picture)

你会交到朋友，比如

```
{
      "name": "Nishant Porwal", 
      "id": "522901714", 
      "picture": {
        "data": {
          "url": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-ash4/372008_522901714_1470071180_q.jpg", 
          "is_silhouette": false
        }
      }
    } 
```

现在看看你的代码

```
 '<img src="' + friend.picture + '"> ' 
```

您必须明确地解析您发现您正在放置一个对象而不是放置 url 所以更改您的代码并获取 url 因为 src 总是适用于图像 url :) 可能我知道你错在哪里

将其更改为

```
'<img src="' + friend.picture.data.url + '"> ' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T18:39:23.860

一般建议是检查您的方法返回的对象类型。由于您正在返回一个对象，因此您可能可以从该对象中引用像图像这样的属性......像 objectName.imageURI

# api - 如何访问/读取 Phonegap API？

> ID：12645502
> 
> 赞同：0
> 
> 时间：2012-09-28T18:34:15.850
> 
> 标签：api, cordova

我知道有这个：[http](http://docs.phonegap.com/en/2.1.0/index.html) ://docs.phonegap.com/en/2.1.0/index.html但它并没有真正帮助。

我正在尝试了解 appView 变量（我认为它是一个变量）。我会说这是一门课，但它以小写字母开头：/

我试图学习的原因是因为我试图理解 appView.addJavascriptInterface(Object, String) 方法。

我的主要目标是将变量从 java 文件发送到 javascript 文件。网上的教程好像是用上面说的方法。因为该方法接受一个对象，所以教程似乎正在创建另一个类。我想尽可能地简化我的代码，所以我想看看是否还有其他选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T01:55:35.720

在 appView.addJavascriptInterface(Object, String) 方法中，Object 是指您希望将数据从 Java 传输到 Java 脚本的 Java 对象。

不创建新类就无法实现功能。除了上面提到的插件使用方式之外，只有我们可以在 phonegap 应用程序中实现 java 和 javascript 之间的通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T18:57:16.797

您将要[编写一个 Plugin](http://docs.phonegap.com/en/2.1.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)。我们已经经历了从 JS 到 Java 再回到 JS 通信的痛苦。如果你纯粹使用 addJavaScriptInterface，你会遇到一些它不起作用的边缘情况，我们已经提防了。

# python - Python 检查元组的任何项目是否在字符串中

> ID：12645505
> 
> 赞同：13
> 
> 时间：2012-09-28T18:34:21.197
> 
> 标签：python, ubuntu

> **可能重复：**
> [检查另一个字符串中是否存在多个字符串](https://stackoverflow.com/questions/3389574/check-if-multiple-strings-exist-in-another-string)
> [检查以确保一个字符串不包含多个值](https://stackoverflow.com/questions/6542801/check-to-ensure-a-string-does-not-contain-multiple-values)

所以伙计们。如果我有

```
example = "1", "2", "3" 
```

我将如何检查是否有任何项目在字符串中。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-28T18:37:08.363

使用[`any()`](http://docs.python.org/library/functions.html#any)：

```
if any(s in some_string for s in example):
    # at least one of the elements is a substring of some_string 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-28T18:39:25.397

一个例子：

```
>>> example = "1", 2, "3"
>>> str in [type(entry) for entry in example] 
```

如果元组中有 str，将返回 True。

# objective-c - xcode 4.5，iPhone 5 打破了我的 UIScrollView

> ID：12645506
> 
> 赞同：7
> 
> 时间：2012-09-28T18:34:23.303
> 
> 标签：objective-c, uiscrollview, xcode4.5

所以我有一个非常复杂的项目。我直接使用 interface builder 和 xcode 来构建对象。现在，我在 IB 中构建了 UIScrollView，它们需要在其中构建，并且 UIButton 构建在这些滚动视图之上。在同一个地方有几个滚动视图，但这真的不应该有太大的区别。

无论如何，问题在于它在 iPhone 4 上完美运行。但是在 iPhone 5 上构建时，它将滚动视图移动到屏幕底部，之前它是 x=0，y=361。我所有的其他对象都被正确放置，它们下面有一些空白空间。我知道如何检查 iPhone 5：

我不知道如何在这里用颜色和诸如此类的东西发布代码，它们使它变得超级复杂，所以我将如何执行 if/then：

```
 if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone){
        CGSize result = [[UIScreen mainScreen] bounds].size;
        if(result.height == 480){
            // iPhone Classic
        }
        if(result.height == 568){
            // iPhone 5
        }
    } 
```

我不知道在 IB 中做 if/then 的方法。我尝试以这种方式手动更改位置：

```
[peopleScrollView scrollRectToVisible:CGRectMake(0, 449, 320, 58) animated:NO]; 
```

那没有用。那么，我要问的是有没有办法在代码本身中更改 UIScrollView 的位置？如果没有，那么我想我将不得不在代码中手动构建所有 5 个 UIScrollView，我绝对不想这样做。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-01T04:40:46.533

如果选择 Scroll View 对象，然后单击 Size Inspector 模块，您会注意到默认的 Autosize Mask 设置为：Left，Top。

![左上自动调整大小/偏移蒙版](../Images/13f87cc9c54c2c1be03078721724cd12.png)

根据您的视图“模式”选项和视图的“自动调整子视图大小”选项，与 3.5" 屏幕相比，此视图和子视图将在 4" 屏幕上向下移动。

取决于您的特定视图在每个屏幕上*的*外观取决于您。在我的项目中，我将自动调整大小蒙版调整为左、上和下，

![左上下自动遮罩/偏移](../Images/5359b7a18626c813fca97f1c1df4743e.png)因为我希望我的 UIScrollView 和子视图保持在 3.5" 和 4" 的屏幕顶部（如在 IB 中绘制的那样）。

您还可以在自动调整图形的框内设置垂直和/或水平尺寸箭头

![垂直和水平自动调整大小蒙版](../Images/a08b04fddf5d2b95b4caf4760c3969ff.png). 这将尝试为动态大小的屏幕相应地缩放对象。

Autosize Mask 应该是您使用 iPhone5 的新朋友。

请参阅[Xcode 界面生成器。这些自动调整大小的蒙版设置有何不同？](https://stackoverflow.com/questions/9828425/xcode-interface-builder-how-do-these-autosizing-mask-settings-differ)了解更多信息。

# php - 提交带有多个提交按钮的 PHP 表单

> ID：12645510
> 
> 赞同：1
> 
> 时间：2012-09-28T18:34:49.930
> 
> 标签：php, forms, submit

再次编辑：新修订版

所以我已经纠正了我的表格中缺少标签，我已经在我的表单中添加了 id，我已经为每个表单添加了一个隐藏字段，其值也与表单 id 相同（如建议的那样）

我试图修改我的原始 if isset 以包含表单 ID，但这就是我遇到的问题。

如前所述，这是页面创建的 HTML：

```
 <br><table border=1><tr><th>customer</th><th>product</th><th>employee</th><th>return_date</th><th>complete</th></tr><br><tr><td>marne1</td><td>basketball</td><td>user</td><td>01-10-12</td><td>        <FORM id="1" method ="post" action ="g.php">
        <input type='hidden' name='x' value='1'>
        <Input type = 'Radio' Name ='ir' value= '47'> 47        <input type="submit" name="return"/>
        </FORM>
        </td></tr><br><tr><td>marne1</td><td>basketball</td><td>user</td><td>01-10-12</td><td>      <FORM id="2" method ="post" action ="g.php">
        <input type='hidden' name='x' value='2'>
        <Input type = 'Radio' Name ='ir' value= '48'> 48        <input type="submit" name="return"/>
        </FORM>
        </td></tr><br><tr><td>marne1</td><td>basketball</td><td>user</td><td>02-10-12</td><td>      <FORM id="3" method ="post" action ="g.php">
        <input type='hidden' name='x' value='3'>
        <Input type = 'Radio' Name ='ir' value= '49'> 49        <input type="submit" name="return"/>
        </FORM>
        </td></tr><br><tr><td>marne1</td><td>basketball</td><td>user</td><td>29-09-12</td><td>      <FORM id="4" method ="post" action ="g.php">
        <input type='hidden' name='x' value='4'>
        <Input type = 'Radio' Name ='ir' value= '50'> 50        <input type="submit" name="return"/>
        </FORM>
        </td></tr><br><tr><td>marne1</td><td>basketball</td><td>user</td><td>01-10-12</td><td>      <FORM id="5" method ="post" action ="g.php">
        <input type='hidden' name='x' value='5'>
        <Input type = 'Radio' Name ='ir' value= '51'> 51        <input type="submit" name="return"/>
        </FORM>
        </td></tr><br><tr><td>marne1</td><td>basketball</td><td>user</td><td>01-10-12</td><td>      <FORM id="6" method ="post" action ="g.php">
        <input type='hidden' name='x' value='6'>
        <Input type = 'Radio' Name ='ir' value= '52'> 52        <input type="submit" name="return"/>
        </FORM>
        </td></tr><br><tr><td>marne1</td><td>basketball</td><td>user</td><td>02-10-12</td><td>      <FORM id="7" method ="post" action ="g.php">
        <input type='hidden' name='x' value='7'>
        <Input type = 'Radio' Name ='ir' value= '60'> 60        <input type="submit" name="return"/>
        </FORM>
        </td></tr><br><tr><td>marne1</td><td>basketball</td><td>user</td><td>02-10-12</td><td>      <FORM id="8" method ="post" action ="g.php">
        <input type='hidden' name='x' value='8'>
        <Input type = 'Radio' Name ='ir' value= '61'> 61        <input type="submit" name="return"/>
        </FORM>
        </td></tr><br></table> 

    <fieldset>
<legend>???</legend>
<form action="z.php" method="post">
Customer Name: <input type="text" name="ir" /> <br><br>
<input type="submit" name="return"/>
</form> 
```

这是创建此 HTML 的 PHP 页面（使用我多次尝试的表单 id 测试）：

```
 <?php
$db_host = "localhost"; 
$db_username = "root";  
$db_pass = "usbw";  
$db_name = "test"; 
mysql_connect("$db_host","$db_username","$db_pass") or die ("could not connect to mysql");
mysql_select_db("$db_name") or die ("no database"); 
$result = mysql_query("SELECT * FROM rental WHERE customer = '$_POST[customer]' AND complete = '0' ") or die (mysql_error());
?> 

    <?php
    echo '<br>';
    echo '<table border=1>';
    echo '<tr><th>customer</th><th>product</th><th>employee</th><th>return_date</th><th>complete</th></tr>';
    echo "<br>";
    $x=1;
    while($row=mysql_fetch_array($result))
    {   
        echo '<tr>';
        echo '<td>';
        echo $row ['customer'];
        echo '</td><td>' ;
        echo $row ['product'];
        echo '</td><td>';
        echo $row ['employee'];
        echo '</td><td>';
        echo $row ['return_date'];
        echo '</td><td>';
        $cur_return = $row ['rental_id'];
        ?>
        <FORM id="<?php echo $x; ?>" method ="post" action ="g.php">
        <input type='hidden' name='x' value='<?php echo $x; ?>'>
        <Input type = 'Radio' Name ='ir' value= '<?php echo $cur_return ?>'> <?php echo $cur_return ?>
        <input type="submit" name="return"/>
        </FORM>
        <?php
    echo '</td></tr>'; 
    echo '<br>';
    $x++;
    }
    echo '</table>';
    ?> 

    <fieldset>
<legend>???</legend>
<form action="z.php" method="post">
Customer Name: <input type="text" name="ir" /> <br><br>
<input type="submit" name="return"/>
</form>

    <?php
    if (isset($_POST['return']))
    {
    if ($_POST['x']==1)
        {
        mysql_query("UPDATE rental SET complete = '1' WHERE rental_id = '$_POST[ir]'") or die (mysql_error());
        }   
    }
    ?> 
```

我真的很感谢你们提出的所有帮助，并为我花了这么多时间来解决这个问题表示歉意:)

富有的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T18:41:00.923

等等。您在这里有多行数据，并且您想提交一个特定的数据行，但它们都在同一个表单中？我有点困惑。看起来您真正在这里寻找的是为每一行生成不同的表单元素。但是你不能让多个提交按钮提交同一个表单的不同部分，这不是表单的工作方式。提交按钮将提交属于表单的所有数据。

在这种情况下，只需将开始表单标签移动到您的 while 循环内部的最开始，然后将您的提交按钮和关闭表单标签移动到您的 while 循环的底部。它将生成每个表格并仍然保持表格的结构。但是你不能让一个表单只提交自身的某些部分，这违背了基本的 HTML 原则。

我**强烈**建议在每个表格上打一个 ID，以供将来参考和更新。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T19:05:25.293

您可以使用 javascript 执行此操作，但不能使用 php。但它无缘无故地过于复杂。制作不同的表格并将它们分配给不同的 ID。您可以使用相同的方法="post" 和相同的操作="g.php"。要在 g.php 上有所不同，只需将其放在每种形式中：

```
<input type='hidden' name='x' value='1'> 
```

接着

```
<input type='hidden' name='x' value='2'> 
```

然后很简单 if $_POST['x']==1

另外，请确保保护 g.php，对于处理表单的文件来说，这是一个非常不安全的名称。

# emacs - 获取所选文本的极值点

> ID：12645516
> 
> 赞同：1
> 
> 时间：2012-09-28T18:35:30.130
> 
> 标签：emacs, elisp

> **可能重复：**
> [如何访问 Emacs Lisp 中当前区域的内容？](https://stackoverflow.com/questions/605846/how-do-i-access-the-contents-of-the-current-region-in-emacs-lisp)

(point) 可用于在 elisp 中查找光标的位置。是否有任何类似的函数可以返回所选文本区域的起点和终点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T19:05:57.093

在 Emacs 中，“区域”可能会被突出显示，也可能不会被突出显示，位于`(point)`和之间`(mark)`。

由于标记可以位于点之前或之后，实用程序函数将分别返回两者中较小的和较大的`region-beginning`。`region-end`

`(mark)``nil`如果标记从未在缓冲区中设置，则将返回，在这种情况下，`region-beginning`两者`region-end`都会发出错误信号。标记的非零值并不意味着当前突出显示区域。该区域是否被认为是活跃的也受`transient-mark-mode`和`mark-even-if-inactive`选项的影响。该功能`use-region-p`可用于测试是否适合对该区域进行操作。

# android - 智能手机上的地图旋转

> ID：12645520
> 
> 赞同：0
> 
> 时间：2012-09-28T18:35:41.293
> 
> 标签：android, ios, google-maps-api-3, mapkit, osmdroid

我们正在使用 MapKit 和 Cloudmade 在 iOS 和 Android 上开发室内应用程序来进行地图绘制。

我们拥有的映射应该能够在线和离线工作。我的映射期望在如何使地图旋转以面对用户面对的方式时遇到麻烦。

因此，我们能够进行实时跟踪并将其显示在地图上预先绘制的路线上，但我们需要让地图上显示的人的行走方向与用户面对的方向相同。

我们应该怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T01:53:26.800

下面描述的用于 Google 地图的技术和 Android SDK 示例也适用于 osmdroid。

[在 Android 中旋转 MapView](https://stackoverflow.com/questions/1830391/rotate-mapview-in-android)

# box2d - applyForce 如何在 Corona/Box2d 中计算速度

> ID：12645522
> 
> 赞同：0
> 
> 时间：2012-09-28T18:35:46.737
> 
> 标签：box2d, game-physics, coronasdk

现在我被困在试图找出弹丸的轨迹。我在想问题是我的速度错误。现在我正在使用我传递给 applyForce 的东西作为我的速度，但我认为质量必须考虑在内。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T16:23:56.690

计算速度的最好方法是做一些反向检查......

您创建一个 enterFrame 事件，然后跟踪最后一次、最后一次位置、新时间和新位置，查看其增量并计算。

如果你的弹丸不会改变很多方向，你可以通过长时间使用该数据的中位数来获得更高的精度......

但是现在对您的问题的更直接的回答是：是的，质量确实包含在其中... Box2D 模拟现实世界的物理学，包括牛顿定律，该定律指出加速度与施加在质量上的力成正比，因此加速度就是力乘以质量。

速度是稍后加速所做的。

因此，如果您在质量为 10 的物体上施加 10 的力，则加速度为 1，在第一帧中您的速度为 0，在第二帧中速度为 1，在第三帧中速度为 2，依此类推。然后，如果您在第 8 帧中将力更改为 20，则该帧中的速度为 7，但在接下来的帧中，您将获得速度 9、11、13 等...

# windows-8 - GestureRecognizer 中的接触点数量

> ID：12645524
> 
> 赞同：2
> 
> 时间：2012-09-28T18:35:50.670
> 
> 标签：windows-8, touch, windows-runtime, windows-phone

我正在使用`GestureRecognizer`来检测拖动和捏合手势。

,`ManipulationStarted`和事件提供捏和拖动所需的平移和缩放值`ManipulationUpdated`。`ManipulationCompleted`

但是我不知道如何区分拖动（1 个触摸点）和捏合（2 个触摸点）手势。中没有关于接触点数量的信息`GestureRecognizer`。

如何区分拖动和捏合`GestureRecognizer`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:30:21.903

我已经为同一个问题苦苦挣扎了几个小时，看起来 WinRT 平台不提供。它提供的是 Delta.Rotation 和 Delta.Scale 值以及 Delta.Translation 以及 ManipulationUpdated 回调的参数。

如果 Delta.Rotation 为 0（或非常接近于零 - 因为它是一个浮点值）且 Delta.Scale 为 1（或非常接近 1），您可以得出结论，捏合操作不是这种情况，而拖动操作是被携带，否则它是一个捏操作。这不是你能得到的最好的，但它看起来是目前唯一可用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-22T15:41:43.227

好吧，我觉得它非常 hacky（因为大多数解决方案似乎都是针对可用的 WinRT 应用程序），但是您可以创建一个`List<uint>`来跟踪当前在屏幕上的指针数量。您必须在`PointerPressed`与之交互的任何控件上处理事件（假设您正在使用 a `Canvas`）以在按下指针时“捕获”指针。那是您将填充`List<uint>`. 不要忘记在事件结束时清除列表`ManipulationCompleted`以及在任何手势结束时触发的任何事件（如`PointerReleased`、`PointerCanceled`和`PointerCaptureLost`）。确保在`ManipulationStarted`事件中清除列表可能是个好主意。也许您可以尝试一下，看看它对您有用。

在这种情况`ManipulationCompleted`下，您可以检查您的 List 是否正好包含 2 个元素（PointerIds）。如果是这样，那么你知道这是一个捏/缩放。

这是它的样子：

```
private void Canvas_PointerPressed(object sender, PointerRoutedEventArgs e)
{
    var ps = e.GetIntermediatePoints(null);
    if (ps != null && ps.Count > 0)
    {
        this.gestureRecognizer.ProcessDownEvent(ps[0]);
        this.pointerList.Add(e.Pointer.PointerId);
        e.Handled = true;
    }
}

private void gestureRecognizer_ManipulationCompleted(GestureRecognizer sender, ManipulationCompletedEventArgs args)
{         
    if (this.pointerList.Count == 2)
    {
       // This could be your pinch or zoom.
    }
    else
    {
       // This could be your drag.
    }

    // Don't forget to clear the list.
    this.pointerList.Clear();
}

// Make sure you clear your list in whatever events make sense.
private void Canvas_PointerReleased(object sender, PointerRoutedEventArgs e)
{
    this.pointerList.Clear();
}

private void Canvas_PointerCanceled(object sender, PointerRoutedEventArgs e)
{
    this.pointerList.Clear();
} 
```

# c# - Delphi 如何通过 SOAP 理解 nillable int ？

> ID：12645527
> 
> 赞同：4
> 
> 时间：2012-09-28T18:36:06.270
> 
> 标签：c#, delphi, soap, wsdl

> **可能重复：**
> [Int64 类型的 Web 服务中的空白值](https://stackoverflow.com/questions/12434202/blank-value-in-web-service-for-int64-type)

我有一个用 c# 制作的 WebService，它需要通过 Delphi 桌面应用程序访问。

```
 <s:element minOccurs="1" maxOccurs="1" name="ParamName" nillable="true" type="s:int" /> 
```

但看起来 Delphi 无法处理 WSDL 中定义的 nillable int 。我怎样才能做到这一点？

# java - 使用 Java 将 BinHex 文件转换为普通文件

> ID：12645528
> 
> 赞同：3
> 
> 时间：2012-09-28T18:36:12.760
> 
> 标签：java, decoding

我有一个 binhex 文件。应使用 java 代码将此文件转换为普通可读文件。我在这里发现了一个类似的问题，

[使用java代码进行binhex解码](https://stackoverflow.com/questions/12467973/binhex-decoding-using-java-code)

但答案是行不通的。

我尝试了 Base64，该文件被转换为其他一些人类不可读的格式。

请帮我解决这个问题。

我试过的代码如下

```
File f = new File("Sample.pdf");
Base64 base64 = new Base64();
byte[] b = base64.decode(getBytesFromFile(f));          
FileOutputStream fos = new FileOutputStream("Dcode.pdf");           
fos.write(b);
fos.close();

public static byte[] getBytesFromFile(File file) throws IOException {
    InputStream is = new FileInputStream(file);
    long length = file.length();
    byte[] bytes = new byte[(int)length];
    int offset = 0;
    int numRead = 0;
    while (offset < bytes.length && (numRead=is.read(bytes, offset, bytes.length-offset)) >= 0) 
    {
        offset += numRead;
    }
    if (offset < bytes.length) {
        throw new IOException("Could not completely read file "+file.getName());
    }
    is.close();
    return bytes;
} 
```

文件 Sample.pdf 是 BinHex 编码的。我希望对文件进行解码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T21:39:17.930

# 与 Base64 的区别

从我在网上找到的内容来看，[BinHex](http://en.wikipedia.org/wiki/Binhex)格式有不同的版本。[它们中没有一个与Base64](http://en.wikipedia.org/wiki/Base64)完全相同。然而，有很大的相似之处。以[BinHex 4.0 规范](http://files.stairways.com/other/binhex-40-specs-info.txt)为例，我们看到主要的二进制内容使用基于 64 的编码方案进行编码，因此将 3 个八位字节编码为 4 个字符。不过，它使用不同的字母表：

```
BinHex: !"#$%&'()*+,-012345689@ABCDEFGHIJKLMNPQRSTUVXYZ[`abcdefhijklmpqr
Base64: ABCDEFGHIJKLMNOPQERTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/ 
```

因此，您要么必须将一组字符转换为另一组字符，要么自己进行解码。

除了大部分二进制内容外，格式中还包含一些额外的元数据。根据规范，这包括数据和资源分叉内容、校验和和其他一些信息之间的分隔符。

# 执行

以下代码将解码 BinHex 输入文件并将其数据分支写入输出文件。根据您的需要调整此代码应该很容易。

```
import java.io.*;
import java.nio.charset.Charset;

public class BinHexDec {

    private Charset charset;

    private String filename;

    private int dbegin, dend, rbegin, rend;

    public BinHexDec(String... args) throws IOException {
        InputStream in = System.in;
        OutputStream out = System.out;
        charset = Charset.defaultCharset();
        if (args.length >= 1)
            in = new FileInputStream(args[0]);
        if (args.length >= 2)
            out = new FileOutputStream(args[1]);
        if (args.length >= 3)
            charset = Charset.forName(args[2]);
        Reader reader = new InputStreamReader(in, charset);
        byte[] data;
        data = unbase(reader);
        reader.close();
        if (data.length < 27)
            throw new IOException("Too little data");
        data = unrle(data);
        parse(data);
        out.write(data, dbegin, dend - dbegin);
    }

    private byte[] unbase(Reader in) throws IOException {
        String digits = "!\"#$%&'()*+,-012345689@ABCDEFGHIJKLMNPQRSTUVXYZ" +
            "[`abcdefhijklmpqr";
        assert digits.length() == (1 << 6);
        int[] value = new int[128];
        for (int i = 0; i < value.length; ++i)
            value[i] = -1;
        for (int i = 0; i < digits.length(); ++i)
            value[digits.charAt(i)] = i;

        int state = 0;
        int accum = 0;
        int alen = 0;
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        while (true) {
            int chr = in.read();
            if (chr == -1)
                throw new EOFException();
            switch (state) {
            case 0:
                switch (chr) {
                case '\n':
                case '\r':
                case '\t':
                case ' ':
                    state = 1;
                    break;
                }
                break;
            case 1:
                switch (chr) {
                case '\n':
                case '\r':
                case '\t':
                case ' ':
                    break;
                case ':':
                    state = 2;
                    break;
                default:
                    state = 0;
                }
                break;
            case 2:
                int v = -1, c = chr & 0x7f;
                if (c == chr) {
                    v = value[c];
                    if (v != -1) {
                        accum = (accum << 6) | v;
                        alen += 6;
                        if (alen > 8) {
                            alen -= 8;
                            baos.write((byte)(accum >>> alen));
                        }
                        break;
                    }
                }
                if (chr == ':') {
                    return baos.toByteArray();
                }
                break;
            }
        }
    }

    private static final byte RLE_MARK = (byte)0x90;

    private byte[] unrle(byte[] in) throws IOException {
        int len = in.length;
        if (in[0] == 0x90)
            throw new IOException("Incomplete RLE at beginning");
        for (int i = 0; i < in.length; ++i) {
            if (in[i] == RLE_MARK) {
                ++i;
                if (i == in.length)
                    throw new IOException("Incomplete RLE at end");
                int cnt = in[i] & 0xff;
                if (cnt == 0)
                    len -= 1;
                else
                    len += cnt - 3;
            }
        }
        byte[] out = new byte[len];
        for (int i = 0, o = 0; i < in.length; ++i) {
            if (in[i] == RLE_MARK) {
                ++i;
                int cnt = in[i] & 0xff;
                if (cnt == 0)
                    out[o++] = RLE_MARK;
                else {
                    byte b = out[o - 1];
                    for (int c = 1; c < cnt; ++c)
                        out[o++] = b;
                }
            }
            else {
                out[o++] = in[i];
            }
        }
        return out;
    }

    private int get4(byte[] data, int offset) {
        return ((data[offset    ] & 0xff) << 24)
            |  ((data[offset + 1] & 0xff) << 16)
            |  ((data[offset + 2] & 0xff) <<  8)
            |  ((data[offset + 3] & 0xff)      );
    }

    private int get2(byte[] data, int offset) {
        return ((data[offset] & 0xff) << 8)
            |  ((data[offset + 1] & 0xff));
    }

    private void crcCheck(byte[] data, int begin, int end) throws IOException {
        int crc = 0;
        for (int i = begin; i < end; ++i) {
            crc = ((crc  << 4)&0xffff) ^ (crc >> 12)*0x1021;
            crc = ((crc  << 4)&0xffff) ^ (crc >> 12)*0x1021;
            crc = crc ^ (data[i] & 0xff);
        }
        crc = ((crc  << 4)&0xffff) ^ (crc >> 12)*0x1021;
        crc = ((crc  << 4)&0xffff) ^ (crc >> 12)*0x1021;
        crc = ((crc  << 4)&0xffff) ^ (crc >> 12)*0x1021;
        crc = ((crc  << 4)&0xffff) ^ (crc >> 12)*0x1021;
        int expected = get2(data, end);
        if (expected != crc)
            throw new IOException("CRC mismatch");
    }

    private void parse(byte[] in) throws IOException {
        int namelen = in[0] & 0xff;
        int headlen = namelen + 20;
        int dlen = get4(in, headlen - 8);
        int rlen = get4(in, headlen - 4);
        if (dlen < 0 || rlen < 0)
            throw new IOException("Unsigned data lenhgths not supported");
        dbegin = headlen + 2;
        dend = dbegin + dlen;
        rbegin = dend + 2;
        rend = rbegin + rlen;
        if (in.length != rend + 2 &&
            (in.length != rend + 3 || in[rend + 2] != 0))
            throw new IOException("Incorrect data size:" +
                                  " expected " + (rend + 2) +
                                  " but got " + in.length + " bytes");
        crcCheck(in, 0, headlen);
        crcCheck(in, dbegin, dend);
        crcCheck(in, rbegin, rend);
        filename = new String(in, 1, namelen, charset);
        System.err.println(filename);
    }

    public static void main(String[] args) throws IOException {
        new BinHexDec(args);
    }

} 
```

# ruby - 如何在这个 PostgreSQL 数据集中找到每年两个类别的总和？

> ID：12645535
> 
> 赞同：1
> 
> 时间：2012-09-28T18:36:30.013
> 
> 标签：ruby, postgresql, sequel

这是我的数据集（CSV 格式，便于阅读）：

```
item_category,year,price
"Bacon",1890,0.12
"Bacon",1891,0.126
"Bacon",1892,0.129
"Bacon",1893,0.142
"Eggs (dozen)",1890,0.208
"Eggs (dozen)",1891,0.221
"Eggs (dozen)",1892,0.221
"Eggs (dozen)",1893,0.224 
```

我想找出每年培根和鸡蛋的价格总和。所以，我想要的结果是：

```
item_category,year,price
"Bacon and eggs",1890,0.328
"Bacon and eggs",1891,0.347
"Bacon and eggs",1892,0.35
"Bacon and eggs",1893,0.366 
```

我是 SQL 的新手，我一直在研究 Self-Join 方法，但它们似乎并不是我正在寻找的——我现在基本上已经没有想法了。

如果有帮助，我还知道如何使用 Sequel gem for Ruby。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:47:22.897

您似乎正在寻找[`GROUP BY`](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-GROUPBY)和[聚合函数](http://www.postgresql.org/docs/current/interactive/functions-aggregate.html)，而不是自联接：

```
SELECT string_agg(DISTINCT item_category, ' and ' ORDER BY item_category)
                                                                   AS items
     , year
     , sum(price) AS price
FROM   tbl
GROUP  BY year
ORDER  BY year 
```

`string_agg(DISTINCT item_category, ' and ' ORDER BY item_category)`可选择连接不同的名称以自动形成新标签。可以为你工作。否则用您的静态标签替换它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:47:54.180

```
select "Bacon and eggs", year, sum(price) 
from    table_name 
group by "Bacon and eggs", year
order by year; 
```

# php - Laravel 公用文件夹

> ID：12645538
> 
> 赞同：5
> 
> 时间：2012-09-28T18:36:35.910
> 
> 标签：php, laravel

我想知道是否有人可以解释为什么 laravel 应用程序的 index.php 文件存在于公共目录中。如果我将其移动到根目录有什么风险？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T01:25:44.107

laravel 公用文件夹中的文件和文件夹旨在可通过网络访问。为了安全起见，laravel 框架中的所有其他文件和文件夹都不应该是 Web 可访问的。

将 index.php 移动到 laravel 根目录会破坏框架并违背最佳实践。

按照[这些](http://laravel.com/docs/install#server-configuration)说明确保您的服务器配置指向 DocumentRoot 的公共目录

# android - 从毫秒子串正确的数字

> ID：12645542
> 
> 赞同：1
> 
> 时间：2012-09-28T18:36:41.053
> 
> 标签：android, substring, stopwatch, milliseconds

我尽我所能来解决这个问题，但从未成功，我也环顾网络，但没有找到我想要的东西。

所以。我正在开发一个秒表应用程序，我希望它显示毫秒，但我无法显示正确的摘要，因为我只希望它显示厘秒，我的意思是两位数，从 00 到 99 然后1 秒过去了。

当我使用下面的代码运行应用程序时，它看起来就像在模拟器中一样，我可以工作，（不能完全分辨，因为模拟器很慢而且很迟钝）但是当我在我的 Galaxy nexus 4.1.1 上运行它时，我得到了强制关闭。

任何帮助都感激不尽

这是毫秒字符串的代码：

```
milliseconds = String.valueOf((long)time);
    if(milliseconds.length()==3){
        milliseconds = "0"+milliseconds;
    }
    if(milliseconds.length()<=1){
        milliseconds = "00";
    }
    milliseconds = milliseconds.substring(milliseconds.length()-3,   milliseconds.length()-1); 
```

完整的java：

```
package com.tutorial.stopwatch;

import android.os.Bundle;
import android.os.Handler;
import android.app.Activity;
import android.view.Menu;
import android.app.Activity;  
import android.content.res.Configuration;
import android.widget.LinearLayout;
import android.widget.TextView;  
import android.graphics.Typeface;  
import android.os.Bundle;  
import android.util.DisplayMetrics;  
import android.util.TypedValue;
import android.view.View;  
import android.widget.Button;  

public class MainActivity extends Activity {

    private TextView tempTextView; //Temporary TextView
    private Button tempBtn; //Temporary Button 
    private Handler mHandler = new Handler();
    private long startTime;
    private long elapsedTime;
    private final int REFRESH_RATE = 100;
    private String hours,minutes,seconds,milliseconds;
    private long secs,mins,hrs,msecs;
    private boolean stopped = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        checkScreenDensity();

        /*-------Setting the TextView Fonts-----------*/  

        Typeface fonttimer = Typeface.createFromAsset(getAssets(), "roboto.ttf");
        tempTextView = (TextView) findViewById(R.id.timer);  
        tempTextView.setTypeface(fonttimer);
        tempTextView = (TextView) findViewById(R.id.timerMs);  
        tempTextView.setTypeface(fonttimer);
        tempTextView = (TextView) findViewById(R.id.timerHs);  
        tempTextView.setTypeface(fonttimer);

        Typeface font = Typeface.createFromAsset(getAssets(), "roboto.ttf");
        tempTextView = (TextView) findViewById(R.id.backgroundText);  
        tempTextView.setTypeface(font);  
        Button tempBtn = (Button)findViewById(R.id.startButton);  
        tempBtn.setTypeface(font);  
        tempBtn = (Button)findViewById(R.id.resetButton);  
        tempBtn.setTypeface(font);  
        tempBtn = (Button)findViewById(R.id.stopButton);  
        tempBtn.setTypeface(font);  

    }

    private void checkScreenDensity(){  
        tempTextView = (TextView)findViewById(R.id.backgroundText);  
        switch (getResources().getDisplayMetrics().densityDpi) {  
        case DisplayMetrics.DENSITY_LOW:  
            tempTextView.setVisibility(View.GONE);  
            break;  
        case DisplayMetrics.DENSITY_MEDIUM:  
            tempTextView.setVisibility(View.GONE);  
            break;  
        case DisplayMetrics.DENSITY_HIGH:  
            tempTextView.setVisibility(View.VISIBLE);  
            break;  
        }  
    }  

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    //---------- on click procedures - id from layout.xml -----------

    public void startClick (View view){
        showStopButton();
        if(stopped){
            startTime = System.currentTimeMillis() - elapsedTime;
        }
        else{
            startTime = System.currentTimeMillis();
        }
        mHandler.removeCallbacks(startTimer);
        mHandler.postDelayed(startTimer, 0);
    }

    public void stopClick (View view){
        hideStopButton();
        mHandler.removeCallbacks(startTimer);
        stopped = true;
    }

    public void resetClick (View view){
        hideStopButton();
        mHandler.removeCallbacks(startTimer);
        stopped = false;
        ((TextView)findViewById(R.id.timer)).setText("00:00");
        ((TextView)findViewById(R.id.timerMs)).setText(":00");
        ((TextView)findViewById(R.id.timerHs)).setText("00:");
    }

    //---------- Button change (start/reset to stop button)
    private void showStopButton(){
        ((Button)findViewById(R.id.startButton)).setVisibility(View.GONE);
        ((Button)findViewById(R.id.resetButton)).setVisibility(View.VISIBLE);
        ((Button)findViewById(R.id.stopButton)).setVisibility(View.VISIBLE);
    }

    private void hideStopButton(){
        ((Button)findViewById(R.id.startButton)).setVisibility(View.VISIBLE);
        ((Button)findViewById(R.id.resetButton)).setVisibility(View.VISIBLE);
        ((Button)findViewById(R.id.stopButton)).setVisibility(View.GONE);
    }

    //-------- time from MiliSeconds to regular time ---------------------------------

    private void updateTimer (float time){
        secs = (long)(time/1000);
        mins = (long)((time/1000)/60);
        hrs = (long)(((time/1000)/60)/60);

        /* Setting the timer text to the elapsed time */
        ((TextView)findViewById(R.id.timerHs)).setText(hours + ":");
        ((TextView)findViewById(R.id.timer)).setText(minutes + ":" + seconds);
        ((TextView)findViewById(R.id.timerMs)).setText(":" + milliseconds);

        /* Convert the seconds to String
         * and format to ensure it has
         * a leading zero when required
         */
        secs = secs % 60;
        seconds=String.valueOf(secs);
        if(secs == 0){
            seconds = "00";
        }
        if(secs <10 && secs > 0){
            seconds = "0"+seconds;
        }

        /* Convert the minutes to String and format the String */

        mins = mins % 60;
        minutes=String.valueOf(mins);
        if(mins == 0){
            minutes = "00";
        }
        if(mins <10 && mins > 0){
            minutes = "0"+minutes;
        }

        /* Convert the hours to String and format the String */

        hours=String.valueOf(hrs);
        if(hrs == 0){
            hours = "00";
        }
        if(hrs <10 && hrs > 0){
            hours = "0"+hours;
        }

        /* milliseconds  */

        milliseconds = String.valueOf((long)time);
        if(milliseconds.length()==3){
            milliseconds = "0"+milliseconds;
        }
        if(milliseconds.length()<=1){
            milliseconds = "00";
        }
        milliseconds = milliseconds.substring(milliseconds.length()-3,   milliseconds.length()-1);

    }

    //------------- Timer Runnnable -----------------------------------------------------------

    private Runnable startTimer = new Runnable() {
           public void run() {
               elapsedTime = System.currentTimeMillis() - startTime;
               updateTimer(elapsedTime);
               mHandler.postDelayed(this,REFRESH_RATE);
            }
        };

    //------------------ screen orientation fix -----------------------------------------------------------

        @Override
        public void onConfigurationChanged(Configuration newConfig) {
            super.onConfigurationChanged(newConfig);
            if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
                TextView timer = (TextView) findViewById(R.id.timer);
                timer.setTextSize(TypedValue.COMPLEX_UNIT_SP, 90);
                TextView timerMs = (TextView) findViewById(R.id.timerMs);
                timerMs.setTextSize(TypedValue.COMPLEX_UNIT_SP, 40);

            }
            else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
                TextView timer = (TextView) findViewById(R.id.timer);
                timer.setTextSize(TypedValue.COMPLEX_UNIT_SP, 70);
                TextView timerMs = (TextView) findViewById(R.id.timerMs);
                timerMs.setTextSize(TypedValue.COMPLEX_UNIT_SP, 30);

            }
        }

} 
```

更新：

我编辑了代码以适应我的布局，但我崩溃了：

```
private void updateTimer (long time) {
    Calendar c = Calendar.getInstance();
    c.setTimeInMillis(time);

    // This will output one string in Hour:Minute:Seconds: with zeroes added
    String h = String.format("%1$tH", c);
    String ms = String.format("%1$tM:%1$tS", c);
    // Unfortunately, theres no format specifier for centiseconds, so we'll have
    // to make do with the substring of ms
    String cs  = String.format("%1$L").substring(0,2);

    String printMe = h + ms + cs;

    /* Setting the timer text to the elapsed time */
        ((TextView)findViewById(R.id.timerHs)).setText(h);
        ((TextView)findViewById(R.id.timer)).setText(ms);
        ((TextView)findViewById(R.id.timerMs)).setText(cs);

} 
```

日志：

```
09-28 19:32:29.986: D/dalvikvm(1832): GC_FOR_ALLOC freed 42K, 4% free 8005K/8259K, paused 112ms, total 118ms
09-28 19:32:30.008: I/dalvikvm-heap(1832): Grow heap (frag case) to 9.331MB for 1536016-byte allocation
09-28 19:32:30.116: D/dalvikvm(1832): GC_CONCURRENT freed <1K, 4% free 9504K/9799K, paused 33ms+17ms, total 109ms
09-28 19:32:30.426: D/dalvikvm(1832): GC_FOR_ALLOC freed 3K, 2% free 9864K/10055K, paused 40ms, total 41ms
09-28 19:32:30.756: D/gralloc_goldfish(1832): Emulator without GPU emulation detected.
09-28 19:32:41.536: D/AndroidRuntime(1832): Shutting down VM
09-28 19:32:41.588: W/dalvikvm(1832): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
09-28 19:32:41.646: E/AndroidRuntime(1832): FATAL EXCEPTION: main
09-28 19:32:41.646: E/AndroidRuntime(1832): java.util.MissingFormatArgumentException: Format specifier: 1$L
09-28 19:32:41.646: E/AndroidRuntime(1832):     at java.util.Formatter.getArgument(Formatter.java:1109)
09-28 19:32:41.646: E/AndroidRuntime(1832):     at java.util.Formatter.doFormat(Formatter.java:1074)
09-28 19:32:41.646: E/AndroidRuntime(1832):     at java.util.Formatter.format(Formatter.java:1040)
09-28 19:32:41.646: E/AndroidRuntime(1832):     at java.util.Formatter.format(Formatter.java:1009)
09-28 19:32:41.646: E/AndroidRuntime(1832):     at java.lang.String.format(String.java:1998)
09-28 19:32:41.646: E/AndroidRuntime(1832):     at java.lang.String.format(String.java:1972)
09-28 19:32:41.646: E/AndroidRuntime(1832):     at com.tutorial.stopwatch.MainActivity.updateTimer(MainActivity.java:138)
09-28 19:32:41.646: E/AndroidRuntime(1832):     at com.tutorial.stopwatch.MainActivity.access$3(MainActivity.java:129)
09-28 19:32:41.646: E/AndroidRuntime(1832):     at com.tutorial.stopwatch.MainActivity$1.run(MainActivity.java:155)
09-28 19:32:41.646: E/AndroidRuntime(1832):     at android.os.Handler.handleCallback(Handler.java:615)
09-28 19:32:41.646: E/AndroidRuntime(1832):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-28 19:32:41.646: E/AndroidRuntime(1832):     at android.os.Looper.loop(Looper.java:137)
09-28 19:32:41.646: E/AndroidRuntime(1832):     at android.app.ActivityThread.main(ActivityThread.java:4745)
09-28 19:32:41.646: E/AndroidRuntime(1832):     at java.lang.reflect.Method.invokeNative(Native Method)
09-28 19:32:41.646: E/AndroidRuntime(1832):     at java.lang.reflect.Method.invoke(Method.java:511)
09-28 19:32:41.646: E/AndroidRuntime(1832):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-28 19:32:41.646: E/AndroidRuntime(1832):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-28 19:32:41.646: E/AndroidRuntime(1832):     at dalvik.system.NativeStart.main(Native Method) 
```

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:48:36.240

来自：[http ://www.java2s.com/Code/Java/Language-Basics/JavaformattedIOtheprecisionmodifier.htm](http://www.java2s.com/Code/Java/Language-Basics/JavaformattedIOtheprecisionmodifier.htm)

导入 java.util.Formatter；

公共类 MainClass { public static void main(String args[]) { Formatter fmt = new Formatter();

```
// Format 4 decimal places.
fmt.format("%.4f", 123.1234567);
System.out.println(fmt);

// Format to 2 decimal places in a 16 character field.
fmt = new Formatter();
fmt.format("%16.2e", 123.1234567);
System.out.println(fmt);

// Display at most 15 characters in a string.
fmt = new Formatter();
fmt.format("%.15s", "Formatting with Java is now easy.");
System.out.println(fmt); 
```

} }

本质上你想要 fmt.format("%.2d", decimalNumberValue);

当然，您可以使用数字操作构建自己的，但这是内置在库中的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:57:45.690

你为什么要用字符串来处理你的时间？这只会给你带来痛苦和痛苦:) Java 格式化程序有一个更好的方法来处理时间：

```
// Note the long type here - that's what you're passing in anyway, best make it
// official
private void updateTimer (long time) {
    Calendar c = Calendar.getInstance(TimeZone.getTimeZone("UTC"));
    c.setTimeMillis(time);

    // This will output one string in Hour:Minute:Seconds: with zeroes added
    String hms = String.format("%1$tH:%1$tM:%1$tS:", c);
    // Unfortunately, theres no format specifier for centiseconds, so we'll have
    // to make do with the substring of ms
    String cs  = String.format("%1$tL", c).substring(0,2);

    String printMe = hms + cs
} 
```

有关更多信息，请参阅[格式化程序](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html)

# salesforce - 本机与开放 API SalesForce 应用程序

> ID：12645544
> 
> 赞同：2
> 
> 时间：2012-09-28T18:36:46.527
> 
> 标签：salesforce, native

原生 SalesForce 应用程序和与 SalesForce 兼容的应用程序有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:19:39.903

这个答案可能并非在所有情况下都是正确的。本机应用程序使用 Salesforce 数据库。兼容的应用程序与 Salesforce 以及一些数据/代码/等集成。对于兼容的应用程序，可能并非仅存在于 Salesforce 平台上。

# android - 回送地址可以在安卓手机上使用吗？

> ID：12645546
> 
> 赞同：0
> 
> 时间：2012-09-28T18:36:56.363
> 
> 标签：android, network-programming

我想知道我们在计算机中使用的相同环回地址（127.0.0.1）是否也适用于安卓手机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:02:30.007

在我用过的所有设备上，是的。我将它用于 xmms2 IPC。但是，您需要获得`INTERNET`许可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:38:51.320

仅当您的手机运行 Web 服务器时 - 一些人已经这样做了： [在 Android 上运行 AMP (apache mysql php)](https://stackoverflow.com/questions/6571911/running-amp-apache-mysql-php-on-android)

# python - 我应该使用 scipy.pi、numpy.pi 还是 math.pi？

> ID：12645547
> 
> 赞同：154
> 
> 时间：2012-09-28T18:36:58.927
> 
> 标签：python, numpy, scipy, pi

在使用 SciPy 和 NumPy 的项目中，我应该使用`scipy.pi`、`numpy.pi`还是`math.pi`？

* * *

## 回答 #1

> 赞同：226
> 
> 时间：2012-09-28T18:38:41.900

```
>>> import math
>>> import numpy as np
>>> import scipy
>>> math.pi == np.pi == scipy.pi
True 
```

所以没关系，它们都是相同的值。

所有三个模块都提供`pi`值的唯一原因是，如果您只使用三个模块中的一个，您可以方便地访问 pi 而无需导入另一个模块。他们没有为 pi 提供不同的值。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2014-05-12T06:29:48.240

需要注意的一件事是，当然，并非*所有*库都会对 pi 使用相同的含义，所以知道你在使用什么永远不会有什么坏处。例如，符号数学库 Sympy 对 pi 的表示与 math 和 numpy 不同：

```
import math
import numpy
import scipy
import sympy

print(math.pi == numpy.pi)
> True
print(math.pi == scipy.pi)
> True
print(math.pi == sympy.pi)
> False 
```

# android - Android 模拟器 - JumpTap 广告返回错误 404

> ID：12645550
> 
> 赞同：0
> 
> 时间：2012-09-28T18:37:23.803
> 
> 标签：android, android-emulator, ads

我在我的项目中使用 JumpTap 来显示横幅广告。

广告已在他们的门户网站上为我的应用程序获得批准，但如果它尝试在模拟器中运行项目，在 logcat 中，

我看到类似 JAdFetcher.getContent 的错误 - 收到错误 [404]

有什么可以检查来解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T12:08:26.943

You will get a 404 if the publisher, site or spot that is passed in the call to Jumptap's server is invalid. If you send me a note I'll work with you to get everything verified and on the road to get ads back.

Disclaimer: I am representative of Jumptap.

# iphone - 使用 iphone 应用程序登录

> ID：12645551
> 
> 赞同：0
> 
> 时间：2012-09-28T18:37:44.823
> 
> 标签：iphone, objective-c

我正在尝试使用 xcode 制作登录页面。

我已阅读有关此的所有主题，并且我很确定我的应用程序已成功将用户名和密码发送到网页。

但我的问题是，当我调用响应字符串时，我仍然从网页上的登录屏幕获取源代码。当我的应用程序发送密码和用户名时，我该从哪里开始？

我使用 ASIformdatarequest 来发布用户名和密码。

这是我发送用户名和密码的代码

（Brugernavn = 用户名，Adgangskode = 密码）

```
 ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:@"http://coutbound.dk/login.asp"]];

    [request setPostValue:[self.bnavn text] forKey:@"Brugernavn"];
    [request setPostValue:[self.kord text] forKey:@"Adgangskode"];
    [request setDelegate:self];
    [request startAsynchronous];

}

- (void)requestFailed:(ASIHTTPRequest *)request {
    NSLog(@"Request failed: %@",[request error]);
}

- (void)requestFinished:(ASIHTTPRequest *)request {
    NSLog(@"Submitted form successfully");
    NSLog(@"Response was:");
    NSLog(@"%@",[request responseString]);
} 
```

还有网页

```
<html>
  <head>
    <title>Login script</title>
    <link rel=stylesheet title=std href="typografi.css" type="text/css">
  </head>
  <body style="background-color: transparent;">
    <img border="0" src="aeble.gif" width="161" height="120">

    <form method="POST" action="login.asp">
    <table border="0" width="100%" height="2">
      <tr>
        <td width="41%" height="1">
          <p align="left"><script language="JavaScript">
            day = new Date()
            hr = day.getHours()
            if (hr < 5)
            hilsen = "God aften"
            if (hr >= 5)
            hilsen = "God morgen"
            if (hr >= 10)
            hilsen = "God formiddag"
            if (hr >= 12)
            hilsen = "God eftermiddag"
            if (hr >= 17)
            hilsen = "God aften"
            document.write(hilsen)
            </script>  og velkommen<script>
            today = new Date();
            document.write(' på COutbound i dag den '+today.getDate()+'. ')
            tmonth = today.getMonth()
            if (tmonth==0) document.write('januar ')
            if (tmonth==1) document.write('februar ')
            if (tmonth==2) document.write('marts ')
            if (tmonth==3) document.write('april ')
            if (tmonth==4) document.write('maj ')
            if (tmonth==5) document.write('juni ')
            if (tmonth==6) document.write('juli ')
            if (tmonth==7) document.write('august ')
            if (tmonth==8) document.write('september ')
            if (tmonth==9) document.write('oktober ')
            if (tmonth==10) document.write('november ')
            if (tmonth==11) document.write('december ')
            document.write(today.getUTCFullYear())
            document.write('<br>')
            s = 'December 24, '
            if (today.getMonth()==11)
            if (today.getDate()>24) {
            if (today.getYear()<100)
            s += today.getYear() + 1901
            else s += today.getYear() +1
            }
            else s += today.getYear()
            if (today.getMonth()==11)
            if (today.getDate()==24)
            document.write('<font size=+2>så idag er det Juleaften</font>')
            else {
            BigDay = new Date(s)
            msPerDay = 24 * 60 * 60 * 1000 ;
            timeLeft = (BigDay.getTime() - today.getTime());
            e_daysLeft = (timeLeft / msPerDay)+1;
            daysLeft = Math.floor (e_daysLeft);
            document.write('der er '+daysLeft+' dage til Juleaften i ');
            if (BigDay.getYear()<100)
            document.write(BigDay.getYear()+1900)
            else document.write(BigDay.getYear())
            document.write('</font><p>')
            }
            </script></p>
            <p style="margin: 0">Angiv brugernavn og adgangskode herunder. Har du ikke brugernavn og adgangskode skal du oprette dig som bruger
              ved at klikke på linket under formularen!
          </tr>
        </table>

  <table border="0" width="45%" height="47">
    <tr>
      <td width="50%" height="26">Brugernavn:</td>
      <td width="50%" height="26"><input type="text" name="Brugernavn" size="25"></td>
    </tr>
    <tr>
      <td height="26">Adgangskode:</td>
      <td height="26"><input type="password" name="Adgangskode" size="25"></td>
    </tr>
    <tr>
      <td width="100%" align="center" colspan="2"><input type="submit" value="Login" name="Action" style="font-size: 8pt"></td>
    </tr>
    <tr>
      <td width="100%" align="center" colspan="2" height="25" valign="bottom"><a href="Login2.asp">Opret ny bruger</a>&nbsp&nbsp<a href="forgotp.asp">Jeg har glemt mit kodeord</a></td>
    </tr>
  </table>
</form>
</body>
</html> 
```

**解决方案**

我解决了我的问题，向按钮“action”发帖，值为“login”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T21:29:27.380

为什么不为您的应用程序创建一个简单的 PHP 接口 API，如下所示？

```
<?php
 $username = $_REQUEST['username'];
 $password = $_REQUEST['password'];

 $result = mysql_query("SELECT * FROM users WHERE username='$username' AND password='$password'");

 $exists = mysql_num_rows($result);

 if($exists > 0) {
     $array = array('success' => 1);
 } else {
     $array = array('success' => 0);
 }

 echo json_encode($array);
?> 
```

然后让您的应用程序侦听响应 JSON 并检查成功是 1 还是 0。如果是 1，那么您已经成功登录。否则在数据库中找到它时出错。

# asp.net - 如何使用 ASP.NET MVC3 创建 Facebook 分享按钮

> ID：12645555
> 
> 赞同：1
> 
> 时间：2012-09-28T18:37:59.583
> 
> 标签：asp.net, facebook, asp.net-mvc-3

我想使用 ASP.NET MVC3 实现一个 Facebook 分享按钮，如下图所示。

![http://i.stack.imgur.com/tlJwd.png](../Images/7edfd40179549c88d2be1a1eea9c2202.png)

我已经在我的 MVC 应用程序中安装了 Microsoft Web Helper，我可以使用创建 Facebook Like 按钮`@Facebook.LikeButton();`；但是如何创建 Facebook 分享按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:22:28.947

[Facebook不再正式支持](http://barbariangroup.com/posts/7544-the_facebook_share_button_has_been_deprecated_called_it)分享按钮。但是，现在您仍然可以通过使用 Facebook 的“sharer.php”应用程序来实现旧的分享按钮的功能。

只需将以下格式的链接应用到您的按钮图像或链接文本：

```
https://www.facebook.com/sharer.php?u=http%3A%2F%2Fwww.yourpage.com 
```

但从长远来看，您更安全的解决方案是使用仍受支持的[社交插件](http://developers.facebook.com/docs/plugins/)之一，例如“赞”按钮或[“发送”按钮](http://developers.facebook.com/docs/reference/plugins/send/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T19:54:22.210

facebook 分享按钮在 facebook 助手中不可用，只有以下社交插件：

*   喜欢按钮
*   活动提要
*   建议
*   喜欢盒子
*   登录按钮
*   面罩
*   注释
*   现场直播

[http://facebookhelper.codeplex.com/documentation](http://facebookhelper.codeplex.com/documentation)

顺便说一句，分享按钮已被弃用，未来将不再支持，因为点赞按钮的点击率更高。本页底部的更多信息：

[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

# actionscript-3 - Flash Builder URLRequest 本地路径未解析

> ID：12645556
> 
> 赞同：4
> 
> 时间：2012-09-28T18:37:59.847
> 
> 标签：actionscript-3, air, path, flash-builder, urlrequest

这是我的基本文件夹结构：http: [//i.stack.imgur.com/l1YnV.jpg](http://i.stack.imgur.com/l1YnV.jpg)

我的代码是这样的：

```
private var xmlLoader:URLLoader=new URLLoader();
private var url:URLRequest=new URLRequest("../src/NPClist.xml");

xmlLoader.load(url); 
```

我得到以下信息：

```
Error #2044: Unhandled ioError:. text=Error #2032: Stream Error. URL: app:/src/NPClist.xml 
```

无论我在 URLRequest 构造函数中放了多少“../”，它都只有在 NPClist.xml 与 .swf（bin-debug）位于同一文件夹中时才有效，我什至尝试复制它。似乎它忽略/不解决“../”。我也尝试导出发布版本，但它没有工作。有趣的是，类似的 Embeds 也可以工作（assets 文件夹与 src 和 bin-debug 处于同一级别）。

```
[Embed(source="assets/mainmenu/somefile.png")] 
```

* * *

这是我如何让它工作的：

```
var xmlFile:File=new File(File.applicationDirectory.nativePath).resolvePath("../src/NPClist.xml");
var url:URLRequest=new URLRequest(xmlFile.url); 
```

“../”最初不起作用，但如果您像这样使用它，它就会起作用。

* * *

回过头来，这似乎也是错误的。以下是它绝对按预期工作的方式：

我在安装程序中包含了资产，我正在使用

```
imgFile=File.applicationDirectory.resolvePath("assets/folder/file");
urlReq=new URLRequest(imgFile.nativePath);
ldr.load(urlReq); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-20T09:37:47.110

您必须将本地资产保存在 html-template 文件夹中，然后它将为 Web 应用程序加载没有 IOError 的资产，否则在 AIR 应用程序的情况下使用 file:/// 加载本地资产

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-28T19:19:13.347

您不能使用 URLRequest 访问本地文件系统资源 - URLRequest 使用 HTTP 协议来获取资源。

URLRequest 只能访问应用了跨域安全的 Internet 资源。

如果要打开本地文件，您应该：

*   或者明确地强制用户打开文件使用打开文件对话框（http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html）

*   或使用 AIR 运行时（使用 AIR，您可以打开本地文件，但不能使用 URLRequest 而是使用 File 类）。

# sql - SQL中的条件语句定义变量

> ID：12645559
> 
> 赞同：0
> 
> 时间：2012-09-28T18:38:14.613
> 
> 标签：sql, conditional

我有一个这样的查询：

```
SELECT c.review, u.username, c.date, c.good, c.rate_id, r.rating
FROM comments AS c
LEFT JOIN users AS u
    ON c.user_id = u.user_id
LEFT JOIN items as i
    ON i.items_id = c.item_id
LEFT JOIN master_cat AS m
    ON m.cat_id = i.cat_id
LEFT JOIN ratings as r
    ON r.item_id = c.item_id 
WHERE i.item = '{$item}' AND c.user_id = r.user_id
ORDER by {$sort}; 
```

但这是限制性的。因为如果 WHERE 语句 ( `c.user_id = r.user_id`) 匹配，我将 JSON 打印出来`c.rating`。如果没有，它会在我的应用程序中打印出来，它会跳过我需要的数据。

例如，如果它将评论与来自同一用户的评分相匹配，它将对数据进行配对。但有些评论*还没有*相关的评分（您可以从 1 到 5 评分）。因此，我不想使用不灵活的 WHERE 子句*跳过*数据，而是想使它有条件并打印出 0 ，稍后我可以说`IF 0, print out "not rated"`。（这不会在 SQL 中完成，而是在 JAVA 中完成。在 SQL 中，我只需要在`MySQL`数据库中存储 0。）

我假设我需要放弃`WHERE`并成为`SELECT`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:48:59.750

```
LEFT JOIN ratings as r
    ON r.item_id = c.item_id AND c.user_id = r.user_id
WHERE i.item = '{$item}' 
```

该条件放在`where`子句中时`left join`会将`inner join`

# javascript - 带有 SSL 的 Azure Worker Role 上的 Node.js 导致 ERR_SSL_PROTOCOL_ERROR

> ID：12645561
> 
> 赞同：3
> 
> 时间：2012-09-28T18:38:22.180
> 
> 标签：javascript, node.js, ssl, azure

我有一个 WorkerRole 配置为通过 csdef 中的 Runtime/EntryPoint/ProgramEntryPoint 元素启动 node.exe，并在端口 443 上为 https 配置了一个 HttpsIn EndPoint，并带有有效证书。我还在 Runtime/Environment 中设置了 PORT 环境变量，节点使用它来监听传入的请求。

当我启动服务（在本地开发结构或 Azure 中）并尝试访问该服务时，我收到以下错误：

```
SSL connection error
Unable to make a secure connection to the server. This may be a problem with the server, or it may be requiring a client authentication certificate that you don't have.
Error 107 (net::ERR_SSL_PROTOCOL_ERROR): SSL protocol error. 
```

我已经验证 node.exe 确实在服务启动时启动，如果我在 Compute Emulator 中查找本地端口，通常是这样的：

```
http://localhost:444 
```

我可以使用我的浏览器直接成功地点击节点。未配置 SSL 时，我也可以通过 Azure 访问节点。

我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T03:45:56.210

问题是我在 Node.js 中启动 Web 服务器时使用的是 http 模块而不是 https 模块。一旦我使用 ssl 证书启动 https 服务器就可以工作。

我正在关注 WebRole 中带节点的 SSL 指南，该指南需要与 WorkerRole 中带节点的 SSL 不同的设置。

# php - 重写规则解释

> ID：12645564
> 
> 赞同：2
> 
> 时间：2012-09-28T18:38:39.247
> 
> 标签：php, .htaccess, mod-rewrite, localhost

谁能解释一下以下两行？

```
RewriteEngine on
RewriteRule ^(.*)-(.*)-(.*)$   index.php?page=$1&id=$2&im=$3 
```

我希望是一个详细的解释，因为我对 .htaccess 文件一无所知。

任何机构都可以帮助我吗？我很感激任何建议..谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T18:41:19.623

该规则是所谓的正则表达式，其中每个组都在括号中。点是一个随机字符，可以用星号修改 0...n 次。加号表示 1...n。如果没有添加修饰符，它只需要一个字符。

不确定蒂姆库珀是否犯了错误，但我在这里回应原始的重写规则（`^(.)-(.)-(.*)$`）：

该规则采用如下 URL：[http](http://example.com/a-b-def) ://example.com/ab-def并将其重定向到：index.php?page=a&id=b&im=def

您还应该知道，没有正确模式的输入将不匹配，因此 URL [http://example.com/aaa-bb-def](http://example.com/aaa-bb-def)将不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T18:46:20.377

RewriteRule 主要包含 3 个所以称之为部分：

1.  `^(.*)-(.*)-(.*)$` **这是您的网址将被重写的规则**
2.  `index.php?page=$1&id=$2&im=$3` **是要重写的 url 规则**
3.  在第二条规则之后，您可以添加一些重定向类型`[R=301]` **，这意味着它是永久重定向**

所以基本上你的规则将产生：
[http://domain.com/pagenumber-idnumber-imdefinition](http://domain.com/pagenumber-idnumber-imdefinition)
来自
[http://domain.com/index.php?page=pagenumber&id=idnumber&im=imdefinition](http://domain.com/index.php?page=pagenumber&id=idnumber&im=imdefinition)

我希望我很清楚...

# css - 如何在 ui-grid 中统一 ui-block 的高度

> ID：12645569
> 
> 赞同：1
> 
> 时间：2012-09-28T18:38:57.417
> 
> 标签：css, jquery-mobile

我在 jQuery Mobile 中剥离了交替的 ui 块行。共有三列，但是当一行中的一个单元格包含的换行数与其相邻单元格不同时，背景颜色只会填充被占用的行。

例如 ui-block-a（1 行）、ui-block-b（2 行）、ui-block-c（2 行）。如果这是一个条纹行块 b 和 c 将显示 2 行带有背景颜色的文本。块 A 在文本行之后显示一个空白行以保持高度一致，但不幸的是，条纹的背景颜色仅显示在块 a 的第一行。

这是CSS和HTML

CSS

```
.stripe {
  background-color: #EAEAEA; 
} 
```

HTML

```
<div data-role="content">   
    <div class=ui-grid-b>
      <div class=ui-block-a><strong>First Name</strong></div>
      <div class=ui-block-b><strong>Last Name</strong></div>
      <div class=ui-block-c><strong>Organization</strong></div>

      <div class="ui-block-a stripe">Allison</div>
      <div class="ui-block-b stripe">Akhnoukh</div>
      <div class="ui-block-c stripe">Education Consultant</div>

      <div class=ui-block-a>Kemi</div>
      <div class=ui-block-b>Akinsanya-Rose</div>
      <div class=ui-block-c>New York City Department of Education</div>      
    </div>
</div><!-- /content --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T00:00:43.240

是的，太糟糕了，没有[row class](http://twitter.github.io/bootstrap/scaffolding.html#gridSystem)，类似于您在 Bootstrap 中的内容。话虽如此，也许您可​​以像这样将另一个 div 作为块项目的包装器浮动：

```
<div class=ui-grid-b>
    <div style="float:left;width:100%">
      <div class=ui-block-a><strong>First Name</strong></div>
      <div class=ui-block-b><strong>Last Name</strong></div>
      <div class=ui-block-c><strong>Organization</strong></div>
    </div>

    <div style="float:left;width:100%">
      <div class="ui-block-a">Allison</div>
      <div class="ui-block-b">Akhnoukh</div>
      <div class="ui-block-c">Education Consultant</div>
    </div>

    <div class="stripe" style="float:left;width:100%">
      <div class=ui-block-a>Kemi</div>
      <div class=ui-block-b>Akinsanya-Rose</div>
      <div class=ui-block-c>New York City Department of Education</div>      
    </div>
</div> 
```

示例小提琴[在这里找到](http://jsfiddle.net/scottiemc7/Xmx6E/3/)

# jquery - 流畅的 jquery/javascript 动画

> ID：12645571
> 
> 赞同：1
> 
> 时间：2012-09-28T18:39:00.007
> 
> 标签：jquery, animation, smooth

我正在使用 jquery 上下滑动内容，但它没有提供我需要的平滑度。动画在 chrome 和 safari 等 webkit 浏览器上运行良好，但在基于 mozilla 的浏览器上表现不佳。

我怎样才能让我的 jquery 动画像这些一样流畅 - [http://www.audentio.com/preview/mybb/darkseries](http://www.audentio.com/preview/mybb/darkseries)

流畅动画的秘诀是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:44:15.033

没有任何东西可以保证流畅的动画。动画速度取决于布局引擎需要完成多少工作。当你的动画很慢时，什么是慢的？Firebug 有一个非常好的分析器，所以你应该能够找出时间花费在哪里并采取措施来缓解。

此外，构建一个可以与 Stack Overflow 共享的最小样本将有助于获得准确的答案。向我们展示代码！:)

# asp.net-mvc - 视图模型最佳实践中的 ASP.NET MVC 自定义验证

> ID：12645574
> 
> 赞同：5
> 
> 时间：2012-09-28T18:39:19.560
> 
> 标签：asp.net-mvc, validation, viewmodel

我正在尝试将域驱动设计与测试驱动开发相结合，用于我在 ASP.NET MVC 3 中构建的这个应用程序。我的架构设置有存储库、域模型、视图模型、控制器和视图。所有验证都将在视图模型中处理。我将视图模型设置为从“IValidatableObject”继承，这样当我的控制器方法调用“ModelState.IsValid”时，我的验证属性和我在“Validate”方法中设置的自定义验证都会执行。我遇到的问题是在我的视图模型的 Validate 方法中访问我的存储库。我需要访问存储库以检查数据库中的重复记录。似乎最好的主意是创建一个 IRepository 类型的属性，并通过将我的存储库注入到视图模型的构造函数中来设置该属性。例如：

```
public class UserViewModel : IValidatableObject
{
       public UserViewModel(User user, IUserRepository userRepository)
       {
              FirstName = user.FirstName;
              LastName = user.LastName;
              UserRepository = userRepository;
              UserName = user.UserName;
       }
       public string UserName { get; set; }
       public string FirstName { get; set; }
       public string LastName { get; set; }
       public IUserRepository UserRepository { get; set; }
       public IEnumerable<ValidationResult> Validate()
       {
           UserCriteria criteria = new UserCriteria { UserName = this.UserName };
           IList<User> users = UserRepository.SearchUsers(criteria);

           if (users != null && users.count() > 0)
           {
               yield return new ValidationResult("User with username " + this.UserName + " already exists."
           }
       }
} 
```

大家觉得这是个好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T18:54:15.587

这已经足够了，但如果我是你，我会用

```
...
private readonly Func<IUserRepository> userRepositoryFactory;
...
public IEnumerable<ValidationResult> Validate()  
   {  
       UserCriteria criteria = new UserCriteria { UserName = this.UserName };  
       using(var UserRepository = userRepositoryFactory())
       {
           IList<User> users = UserRepository.SearchUsers(criteria);  

           if (users != null && users.count() > 0)  
           {  
               yield return new ValidationResult("User with username " + this.UserName + " already exists."  
           }  
       }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T19:25:29.637

您可以添加域服务类以获取与您的条件匹配的对象并在域服务级别进行验证

```
 public class PurchaseOrder
    {
        public string Id { get; private set; }
        public string PONumber { get; private set; }
        public string Description { get; private set; }
        public decimal Total { get; private set; }
        public DateTime SubmissionDate { get; private set; }
        public ICollection<Invoice> Invoices { get; private set; }

        public decimal InvoiceTotal
        {
            get { return this.Invoices.Select(x => x.Amount).Sum(); }
        }

    }

    public class PurchaseOrderService
    {
        public PurchaseOrderService(IPurchaseOrderRepository repository)
        {
            this.repository = repository;
        }

        readonly IPurchaseOrderRepository repository;

        public void CheckPurchasedOrderExsist(string purchaseOrderId)
        {
                var purchaseOrder = this.repository.Get(purchaseOrderId);
                if (purchaseOrder != null)
                    throw new Exception("PO already exist!");
        }
    } 
```

# powershell - 执行异步 BITS 传输，然后执行 RESTful 请求

> ID：12645578
> 
> 赞同：1
> 
> 时间：2012-09-28T18:39:27.097
> 
> 标签：powershell, asynchronous, powershell-2.0, microsoft-bits

我有一个 powershell 脚本，我在其中执行上传，然后我必须对刚刚上传的文件执行 RESTful 请求。现在它作为一种非异步方法工作得很好

```
Start-BitsTransfer -Source $fullPath -Destination "https://www.example.com/bitsupload/$Guid.$SourceFile" -Credential $Credential -TransferType Upload

$web = New-Object Net.WebClient
$web.DownloadString("https://www.example.com/newbitspost/?filename=$Guid.$SourceFile&filedescription=$Description&Friendlyname=$SourceFile") 
```

但是我想在后台运行它，以便最终用户可以关闭窗口（更重要的是，我的最终目标是注销）并且它仍然会传输。

我知道我可以添加`-Asynchronous`到我的`Start-BitsTransfer`，但我不知道如何在传输完成后执行该 GET 请求。

* * *

由于误报 Duplicate question 链接（另一个问题的答案从未真正解决问题，它只是展示了如何在之后手动执行某些事情）我的问题归结为：**如何`/SetNotifyCmdLine`从[已弃用的 BitsAdmin 程序](http://technet.microsoft.com/en-us/library/cc753592%28v=ws.10%29.aspx)中复制功能。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:58:08.417

答案是：*你不能。*

至少不使用 PowerShell v2 中的 BITS cmdlet / BitsTransfer 模块。您唯一的选择是使用已弃用的功能，或推出与 BITS API 接口的自定义解决方案。有一个名为[SharpBITS.NET](http://sharpbits.codeplex.com/)的项目可能会有所帮助。

有关您希望完成的任务的更多详细信息也可能有助于其他人提供替代方案。我也很好奇您考虑过哪些替代方案-例如您可以在上传文件之前执行 RESTful GET 吗？甚至可能作为上传的一部分 - 在查询字符串中嵌入参数？我还会考虑在没有用户登录或其他用户登录的情况下在后台进行上传意味着什么，或者如果他们关闭计算机（或以其他方式中断传输）会发生什么。例如，让登录脚本检查 BITS 传输作业的状态并在那时采取行动可能更有意义。对于他们不注销的情况，您还可以隐藏窗口并定期轮询 BITS 作业以检查是否完成。

我知道这些并不理想——甚至可能不值得接受接受的答案。我确实希望他们有所帮助。

# jsf-2 - 从侦听器方法更改 inputText 值

> ID：12645593
> 
> 赞同：4
> 
> 时间：2012-09-28T18:41:07.440
> 
> 标签：jsf-2

我有一个输入文本：

```
<h:inputText id="result" value="#{guessNumber.result}"/> 
```

和另一个输入文本：

```
<h:inputText id="name" value="#{guessNumber.named}" onchange="submit()" valueChangeListener="#{guessNumber.processValueChange}"/> 
```

在 processValueChange 方法中，我添加了以下行：

```
result = "hello"; 
```

但是“结果” inputText 的显示值仍然没有链接，有什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-28T19:01:39.323

该`valueChangeListener`方法不打算以这种方式对模型进行更改。它旨在聆听模型值的实际变化，恰好在您*同时*掌握旧模型值和新模型值的那一刻。例如，执行一些日志记录。它在验证阶段结束时运行，就*在*更新模型值阶段之前。*因此，您在侦听器方法中自己*对模型值所做的任何更改都将在更新模型值阶段被覆盖。

你需要一个`<f:ajax listener>`代替。这在更新模型值阶段*之后的调用操作阶段运行。*

```
<h:outputText id="result" value="#{guessNumber.result}" />
<h:inputText id="name" value="#{guessNumber.named}">
    <f:ajax listener="#{guessNumber.namedChanged}" render="result" />
</h:inputText> 
```

*（请注意，我已经删除了`onchange="submit()"`JavaScript 处理程序！）*

和

```
public void namedChanged(AjaxBehaviorEvent event) {
    result = "Hello, you entered " + named;
} 
```

*（参数是可选的；如果你不需要它，就省略它）*

### 也可以看看：

*   [何时使用 valueChangeListener 或 f:ajax 监听器？](https://stackoverflow.com/questions/11879138/when-to-use-valuechangelistener-or-fajax-listener)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-29T09:11:48.980

我找到了解决方案：我没有将 inputText 的*value*属性绑定到 bean 内的 String 属性（结果），而是将 inputText 绑定到 bean 内的 UIInput 属性：

```
<h:inputText id="result" binding="#{guessNumber.result}"/> 
```

在 bean 中：

```
private UIInput result = null; 
```

这让监听器方法可以直接修改 inputText 的*值*，而不是修改绑定到 inputText 的*value*属性的属性：

```
result.setValue("Hello"); 
```

感谢每一位试图解决我的问题的人。

# ajax - expressJS 中的 AJAX 调用

> ID：12645597
> 
> 赞同：2
> 
> 时间：2012-09-28T18:41:22.650
> 
> 标签：ajax, node.js, express

我似乎无法正确调用 AJAX。还有其他 QA 处理该`$.ajax()`功能，但我正在尝试使用`$.post()`.

单击表单按钮时，将执行头部的 javascript，其中包括`$.post()`. url`/login`被路由并传递给`loginPost`函数。确定响应并将其发送回javascript（对吗？）。相反，网页呈现响应（通过 || 失败）。

为什么 AJAX 调用的响应没有被发回处理？

这是一个简单的示例，我正在使用它来让我更好地了解 expressJS 和 jQuery 中的 AJAX 是如何工作的。任何帮助是极大的赞赏！

--views **/login.jade**

```
script(src='/_js/jquery-1.8.2.min.js')
script
  $(document).ready(function(req, res) {
    $('#login').submit(function() {
    var formData = $(this).serialize();
    console.log(formData);
    $.post('/login', formdata, processData).error('ouch');

    function processData(data, status) {
      console.log(status);
      console.log(data);
      if (data == 'pass') {
        $('#content').html('<p>You have successfully loggin in!</p>');
      } else {
        if (! $('#fail').length) {
          $('#formFrame').prepend('<p id="fail">Incorrect login information. Please try again)</p>');
        }
      }
    } //end processData
  }); //end submit
}); //end ready

div.main
h1= title
div#formFrame
  form(id='login', action='/login', method='POST')
p
  label(for='username') Username:
  input(id='username', type='text', name='username')
p
  label(for='password') Password:
  input(id='password', type='password', name='password')
p
  input(id='button', type='submit', name='button', value='Submit') 
```

--**路由/index.js**

```
app.post('/login', loginPost); 
```

--**路由/loginPost**

```
module.exports.loginPost = function(req, res) {
    var password = 'admin'
      , username = 'user'
      , data = req.body;

    if (data.username == username && data.password == password) {
      res.send('pass');
    } else {
      res.send('fail');
    }
}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T19:17:48.177

您仍然必须通过其默认操作阻止`<form>`提交，这可以通过以下方式完成[`event.preventDefault()`](http://api.jquery.com/event.preventDefault/)：

```
$('#login').submit(function(evt) {
  evt.preventDefault();
  // ...
}); 
```

否则，`<form>`将页面重定向到它的`action`（如果没有`action`给出，则返回到当前地址），中断`$.post`请求。

# android - 通过 XML 将选项卡添加到操作栏

> ID：12645599
> 
> 赞同：2
> 
> 时间：2012-09-28T18:41:41.370
> 
> 标签：android, android-layout, android-xml

我知道可以使用 /res/menu 目录中的 XML 文件将 MenuItems 添加到 ActionBar。

我一直在寻找一个示例，说明如何使用 XML 将选项卡添加到 ActionBar，但没有成功。

我只找到了一种方法来调用：actionbar.newTab() 方法，但我不想在代码中这样做......

你有什么主意吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T18:45:24.957

没有办法做到这一点，对不起。您只能通过 Java 代码在操作栏中定义选项卡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-29T10:36:47.300

在 array.xml 中：

```
<string-array name="actionBarTabs">
    <item>tab1</item>
    <item>tab2</item>
    <item>tab3</item>        
</string-array> 
```

* * *

```
onCreate() {

    // setup action bar for tabs
    ActionBar actionBar = getSupportActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    actionBar.setDisplayShowTitleEnabled(false);

    for (String each:getResources().getStringArray(R.array.actionBarTabs)) {
        Tab tab = actionBar.newTab()
                .setText(each)
                .setTabListener(this);
        actionBar.addTab(tab);              
    }     
} 
```

# c# - WindowsIdentity 和经典 .Net 应用程序池

> ID：12645601
> 
> 赞同：3
> 
> 时间：2012-09-28T18:41:45.763
> 
> 标签：c#, asp.net, iis-7

我有一个 ASP.NET 网站，要求我的 App Pool 是 Classic .Net App Pool。该站点在 IIS 7 上的 .NET 3.5 上运行。当我尝试获取登录用户的 Active Directory 用户名时：

```
System.Security.Principal.WindowsIdentity.GetCurrent().Name 
```

我得到以下信息：

```
IIS APPPOOL\\Classic .NET AppPool 
```

但是，当我将应用程序池设置为 .net 4.0 时，它会返回登录的用户名（这是我想要的）。我错过了一个设置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T19:25:38.300

首先将这些行放在 web.config 配置部分中：

```
<authentication mode="Windows"/>
<authorization>
  <deny users="?"/>
</authorization>
<identity impersonate="true"/> 
```

第二次转到 IIS 管理器打开您的 Web 应用程序属性并检查以下身份验证设置：

匿名身份验证 = 已禁用，ASP.NET 模拟 = 已启用（这不是必需的），Windows 身份验证 = 已启用

此设置将为您提供 Active Directory 用户并模拟它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:56:12.040

如果使用相同的代码并且它在一个应用程序池中工作而不是另一个，我会检查应用程序池的设置。查找 Identity 属性。我想，在 .NET 4.0 池下，您将拥有 ApplicationPoolIdentity，在 3.5 下，您将拥有一个硬编码帐户。

**编辑**

因此，听起来您并没有真正获得用户凭据。当然，当您在本地运行时，您会获得域帐户......该过程在您的凭据下运行。但是当您在另一台机器上运行时，它会在处理请求的帐户的凭据下运行......直到您告诉它模拟用户。即便如此，您可能必须为站点设置 Windows 身份验证以获取凭据，或使用带有 AD 挂钩的表单身份验证来获取当前用户帐户下的所有内容。

# ios - 更改 CoreData 实体层次结构

> ID：12645603
> 
> 赞同：0
> 
> 时间：2012-09-28T18:41:56.273
> 
> 标签：ios, core-data, migration, entity, hierarchy

我有一个看起来像这样的 CoreData 模型：

*   抽象实体
    *   实体 1
    *   实体 2
        *   实体 3

“抽象实体”是层次结构中的顶级实体。“实体 1”和“实体 2”是“抽象实体”的对等子实体。“实体 3”是“实体 2”的子实体。

该应用程序已在 App Store 中发布，因此对模型的任何修改都必须保留所有现有数据。不幸的是，我现在需要重新排列模型层次结构，如下所示：

*   抽象实体
    *   实体 2
        *   实体 3
            *   实体 1

有没有什么方法不涉及创建一个新的“Entity 4”实体并编写一个将所有“Entity 1”数据转换为“Entity 4”格式的函数？我宁愿不要以这样一个粗暴的等级制度告终：

*   抽象实体
    *   实体 1
    *   实体 2
        *   实体 3
            *   实体 4

我想出的避免上述情况的唯一方法是将我需要的所有属性从实体 2 和 3 复制到 1 中，完全忽略层次结构问题，这是一个糟糕的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:24:15.477

我建议您阅读并创建自定义[映射模型](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/CoreDataVersioning/Articles/vmMappingOverview.html#//apple_ref/doc/uid/TP40004399-CH5-SW1)。

# ios - Xcode 4.5 - 崩溃日志未符号化

> ID：12645606
> 
> 赞同：2
> 
> 时间：2012-09-28T18:42:26.627
> 
> 标签：ios, xcode, xcode4.5, symbolicatecrash, symbolicate

一位用户通过电子邮件向我发送了我提交到 App Store 的应用程序的崩溃日志。我在 Xcode 中仍然有原始的应用商店提交存档，但他的崩溃报告不会象征性。单击“重新符号化”不会执行任何操作。我找不到使用 mdfind 的 symbolicatecrash 脚本，它仍然是 Xcode 4.5 的一部分吗？有什么方法可以象征这个崩溃日志？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T23:22:55.643

如果您还没有尝试过，请将您的 Mac 升级到 OSX 10.8.2 或更高版本。我运行的*是*OSX 10.7.5，升级**后立即**解决了我的符号化问题。

我已经尝试了几乎**所有**方法来让我的崩溃日志具有象征意义。我以前从来没有遇到过问题，但是自从我查看崩溃日志以来已经过去了几个月；在那段时间的某个时候，我升级到了 Xcode 4.5.2。在我看来，Xcode 4.5.2 symbolicatecrash perl 脚本的某些内容在运行 OSX 10.7.5 的 Mac 上无法正常工作。在 symbolicatecrash 中，它调用 atos 来符号化一个地址；它找不到匹配的符号，即使我**知道**我有正确的 xcarchive。无论如何，OSX 10.8.2 或更新版本的 spring 并希望这对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T22:24:34.700

将 dsym 和日志放在一个文件夹中，然后尝试打开崩溃日志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T11:20:11.580

我的解决方法是：

使用终端转到 xarchive 文件夹。跑：`mdimport .`

xcode 现在可以正确地重新符号化。问题是聚光灯由于某些愚蠢的原因没有索引档案文件夹（lion 10.7）！

# opengl-es - OpenGL ES 2.0 中的多通道着色器

> ID：12645609
> 
> 赞同：4
> 
> 时间：2012-09-28T18:42:38.763
> 
> 标签：opengl-es, opengl-es-2.0, glsl

首先 -**子程序**是否需要 GLSL 4.0+？所以它在 OpenGL ES 2.0 的 GLSL 版本中不可用？

我*很*明白什么是多通道着色器。
那么我的图片是什么：

1.  使用一些着色器将一组东西（例如精灵）绘制到 FBO。
2.  将 FBO 视为大屏幕四边形的大纹理，并使用另一个着色器，例如，将纹理颜色转换为灰度。
3.  用灰度颜色将 FBO 纹理四边形绘制到屏幕上。

还是这叫别的？

所以多通道=使用另一个着色器输出到另一个着色器输入？所以我们渲染一个对象两次或更多？着色器输出如何到达另一个着色器输入？

**例如**

```
glUseProgram(shader_prog_1);//Just plain sprite draw
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, /*some texture_id*/);
 //Setting input for shader_prog_1
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);
//Disabling arrays, buffers
glUseProgram(shader_prog_1);//Uses same vertex, but different fragment shader program
//Setting input for shader_prog_2
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4); 
```

任何人都可以以基本方式提供这个简单的例子吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-28T19:06:53.120

一般来说，术语“多次渲染”是指使用不同的着色器多次渲染同一个对象，并将结果累积在帧缓冲区中。积累通常是通过混合完成的，而不是使用着色器。也就是说，第二个着色器*不*获取第一个着色器的输出。它们各自执行部分计算，混合阶段将它们组合成最终值。

如今，这主要用于前向渲染场景中的照明。您为每个灯光渲染每个对象一次，传递不同的光照参数，并且每次渲染灯光时可能使用不同的着色器。用于累积结果的混合模式是加法的，因为光反射率是一种加法属性。

> 子程序是否需要 GLSL 4.0+？所以它在 OpenGL ES 2.0 的 GLSL 版本中不可用？

这是一个与您帖子的其余部分完全不同的问题，但答案是肯定的和否定的。

不，从某种意义上说 ARB_shader_subroutine 是 OpenGL 扩展，因此它可以由任何 OpenGL 实现来实现。是的，实际上任何*可以*实现 shader_subroutine 的硬件也可以实现 GL 4.x 的其余部分，因此已经在宣传 4.x 的功能。

实际上，您不会发现非 4.x OpenGL 实现支持的 shader_subroutine。

它在 GLSL ES 2.0 中不可用，因为它是 GLSL **ES**。不要将*桌面 OpenGL*与 OpenGL *ES*混淆。它们是两个不同的东西，具有不同的 GLSL 版本和不同的功能集。他们甚至不共享*扩展名*（除了极少数最近的扩展名）。

# fft - 如何使用非重叠块进行 FFT 平均

> ID：12645611
> 
> 赞同：2
> 
> 时间：2012-09-28T18:42:42.343
> 
> 标签：fft, scilab

我正在尝试对我捕获的一些数据进行 FFT。我在 10MHz-100MHz 范围内工作，所以我的 8192 样本捕获不足以在对它们进行 FFT 时传达任何有意义的信息。因此，我正在对正弦波进行许多非重叠捕获，并希望将它们平均在一起。

我目前在每个文件的 for 循环中（在 Scilab 中）做的是：

```
temp1 = read_csv(filename,"\t");
temp1_fft = fft(temp1);
temp1_fft = temp1_fft .* conj(temp1_fft);
temp1_fft = log10(temp1_fft);
fft_code = fft_code + temp1_fft; 
```

然后当我完成所有文件时，我： `fft_code = fft_code./numFiles;`

但我不太确定我是否正确处理了这个问题。对于不重叠的样本有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:34:40.703

我认为你已经接近了，但你应该`temp1_fft`在取`log10`. 否则，您实际上最终将它们相乘而不是平均。因此，只需`log10`像这样将 for 移到 for 循环之外（我不知道 scilab 语法）：

```
for filename in files:
    temp1 = read_csv(filename,"\t");
    temp1_fft = fft(temp1);
    temp1_fft = temp1_fft .* conj(temp1_fft);
    fft_code = fft_code + temp1_fft;

fft_code = fft_code./numFiles;
fft_code = log10(fft_code); 
```

您肯定想要使用幅度（当您乘以 时，您已经在这样做了`conj`），因为相位信息将取决于您的采样相对于信号开始的时间。如果您需要相位信息，您必须确保您的采集与信号同步。

这称为[“功率谱平均”](http://www.go-ci.com/note/new/note_379.html)：

> 功率谱平均也称为 RMS 平均。RMS 平均计算幅度平方和的加权平均值（FFT 乘以其复共轭）。权重是线性的或指数的。RMS 平均可减少数据的波动，但不会降低实际的本底噪声。通过足够数量的平均值，可以显示实际随机本底噪声的非常好的近似值。由于 RMS 平均只涉及幅度，因此显示 RMS 平均的实部或虚部或相位没有任何意义，功率谱平均也没有相位信息。

# android - 不是整个列表项在 ListView 中是可点击的

> ID：12645624
> 
> 赞同：1
> 
> 时间：2012-09-28T18:43:31.423
> 
> 标签：android, android-listview

是的，我读过[这个](https://stackoverflow.com/questions/8761726/make-whole-line-in-a-listview-clickable)问题。不，它没有帮助。

问题是我的`ListView`单元格中只有突出显示的区域是可点击的。它是填充文本的区域。看一下图片：

![在此处输入图像描述](../Images/f840a0a4c59e2ddeae764c163c8507b3.png)

因此，当您单击圆圈区域时 - 它不会响应。

关于如何使其正常工作的任何想法？？？

**编辑：**我的列表布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dp">

    <ImageView
        android:id="@+id/shoulderLogo"
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="20dp"
        android:layout_marginTop="5dp">
    </ImageView>

    <TextView
        android:id="@+id/shoulderLabel"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
    </TextView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T18:53:29.020

我很确定这是因为您的列表布局 LinearLayout 有一个`layout_width`. `wrap_content`这将导致您的行仅与其中包含的视图一样宽。如果您将其设置为，`fill_parent`否则`match_parent`它将扩展以填充列表的宽度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T18:47:34.043

试试改成这个

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:padding="5dp">

<ImageView
    android:id="@+id/shoulderLogo"
    android:layout_width="wrap_content"
    android:layout_height="100dp"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="20dp"
    android:layout_marginTop="5dp">
</ImageView>

<TextView
    android:id="@+id/shoulderLabel"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">
</TextView> 
```

# php - Joomla - 获取 Youtube 视频 ID 的简单 RSS 阅读器

> ID：12645625
> 
> 赞同：1
> 
> 时间：2012-09-28T18:43:33.127
> 
> 标签：php, joomla, youtube, thumbnails, rss-reader

我正在尝试修改 Simple RSS Reader 以获取 RSS 中某个项目的 Youtube 视频 ID 以确定缩略图，我似乎在正确的轨道上，但 PHP 不太好 - 这是来自 helper.php，一旦完成可能是许多其他人使用它来修改他们自己的用于 Joomla 的简单 RSS 阅读器模块......

我想知道如何使这个函数“getYTid”将Id放在最后的URL Veriable中 - 代码在两个地方关闭，@函数，并且在最后声明变量不仅我该怎么做，但是如果可能的话，请将我引导到一个我可以更好地理解使用混合文本声明变量的语法的地方，如果可能的话，我似乎经常遇到这个问题

```
function getYTid('$feed->itemLink') {

    $ytvIDlen = 11; // This is the length of YouTube's video IDs

    // The ID string starts after "v=", which is usually right after 
    // "youtube.com/watch?" in the URL
    $idStarts = strpos($ytURL, "?v=");

    // In case the "v=" is NOT right after the "?" (not likely, but I like to keep my 
    // bases covered), it will be after an "&":
    if($idStarts === FALSE)
        $idStarts = strpos($ytURL, "&v=");
    // If still FALSE, URL doesn't have a vid ID
    if($idStarts === FALSE)
        die("YouTube video ID not found. Please double-check your URL.");

    // Offset the start location to match the beginning of the ID string
    $idStarts +=3;

    // Get the ID string and return it
    $ytvID = substr($ytURL, $idStarts, $ytvIDlen);

    return $ytvID;

}
                $feedItem->feedImageSrc = 'http://i3.ytimg.com/vi/'$ytvID'/default.jpg'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:08:36.033

您应该使用正则表达式从 URL 字符串中解析 YouTube ID。[PHP中的preg_match解析](https://stackoverflow.com/questions/2936467/parse-youtube-video-id-using-preg-match/6382259#6382259 "使用 Preg_Match 从字符串中解析 YouTube ID")

要在 PHP 中连接字符串，请使用句点：

```
$feedItem->feedImageSrc = 'http://i3.ytimg.com/vi/' . $ytvID . '/default.jpg'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T19:11:34.843

这是一个工作示例，您可以轻松调整它以适合您：

```
function get_yt_id($yturl, $idlen) {

    $idchk_que = strpos($yturl, "?v=");
    $idchk_amp = strpos($yturl, "&v=");

    if ($idchk_que > -1 || $idchk_amp > -1) {

        if ($idchk_que > -1) {

            $yturl_exploded = explode("?v=", $yturl);

        }
        else if ($idchk_amp > -1) {

            $yturl_exploded = explode("&v=", $yturl);

        }
        $yturl_exp = $yturl_exploded[1];
        $ytid = substr($yturl_exp, 0, $idlen);

        return $ytid;

    }
    else {

        return "ID NOT FOUND";

    }

}

$id_from_yturl = get_yt_id("http://www.youtube.com/watch?v=YvbQ9G0yXeU&t=14m36s", "11");

print $id_from_yturl; 
```

*   我做了一点编辑，使这个功能更防弹......

# .net - 可移植类库与特定于平台的版本

> ID：12645626
> 
> 赞同：4
> 
> 时间：2012-09-28T18:43:35.093
> 
> 标签：.net, multiplatform, portable-class-library

随着[可移植类库](http://msdn.microsoft.com/en-us/library/gg597391.aspx)的引入，开发人员可以发布一个跨多个平台兼容的库。不利的一面是 PCL 必须将自身缩减为在所有指定平台上兼容的最低通用类集。

如果您想发挥特定平台的优势和功能，（或者如果您想访问仅存在于某些平台中的类），我假设您必须执行以下操作之一：

1.  发布一组“基础”类作为可移植类库，并附带构建在其上的特定于平台的库。

    *   一个示例可能是 MVVM 库：将通用基类发布为单个可移植类库 - 名为“MyCustomMvvm.dll” - 并以“MyCustomMvvm.Extras.WPF.dll”和“MyCustomMvvm.Extras”的形式发布一些额外的平台功能.WP7.dll”等...或者：
2.  为每个平台保留一个单独的项目，使用“链接”源文件和#if 语句有条件地编译特定于平台的功能。
    *   对于此示例，所有库都将具有相同的文件名（“MyCustomMvvm.dll”），但每个平台都有一个单独的副本，使用解决方案中特定于平台的项目构建。

我的问题是：只有这两个选择吗？有没有明显“更好”的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:51:03.103

查看[http://blogs.msdn.com/b/rxteam/archive/2012/03/12/reactive-extensions-v2-0-beta-available-now.aspx](http://blogs.msdn.com/b/rxteam/archive/2012/03/12/reactive-extensions-v2-0-beta-available-now.aspx)特别是“迈向便携式图书馆世界”部分。Rx 针对许多不同的运行时，因此它是一个很好的示例用例。他们通常会按照您的建议作为选项 1，并使用 NuGet 来管理大量分发。

NuGet 2.1 正在进行更改以帮助完成这项工作： http: [//nuget.codeplex.com/discussions/391121](http://nuget.codeplex.com/discussions/391121)

您的第二个建议是 MVVM light 如何按照[http://blogs.msdn.com/b/dsplaisted/archive/2012/08/27/how-to-make-portable-class-libraries-work-for-you 完成。 aspx](http://blogs.msdn.com/b/dsplaisted/archive/2012/08/27/how-to-make-portable-class-libraries-work-for-you.aspx)除非没有理由将所有程序集命名为相同。

我不确定是否有可靠或有用的替代方案。

# fortify - 如何避免 Fortify 中的“路径操作”错误？

> ID：12645627
> 
> 赞同：2
> 
> 时间：2012-09-28T18:43:35.213
> 
> 标签：fortify

> **可能重复：**
> [如何从 Fortify 扫描报告中修复以下代码示例的“路径操作”问题](https://stackoverflow.com/questions/4732967/how-to-fix-path-manipulation-issue-from-fortify-scan-report-for-tthe-following)

Fortify 在 where 在线给出路径操作错误`new FileWriter(psPath + psFileName + psExtension, false)`。

谁能告诉我如何解决这个问题，以便 fortify 不会给出这个错误？

```
public void setWriter(String psPath, String psFileName, String psExtension)
        throws Exception {
    fwFileWriter = new FileWriter(psPath + psFileName + psExtension, false);
    bwFileWriter = new BufferedWriter(fwFileWriter);
} 
```

# visual-studio-2010 - 是否可以为视觉工作室中的动态对象提供智能感知？

> ID：12645630
> 
> 赞同：8
> 
> 时间：2012-09-28T18:43:51.813
> 
> 标签：visual-studio-2010, c#-4.0, intellisense

我在项目中使用动态对象，我想为对象提供智能感知。我知道 Visual Studio 不知道要为智能感知显示什么，但如果我可以插入智能感知，我确实知道应该显示哪些条目。

有没有办法扩展 Visual Studio 的智能感知？如果是这样，任何指针？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T22:19:07.190

您可以使用编辑器扩展点。

您可以在本页底部附近找到扩展 Intellisense 的具体信息：

[编辑器扩展点](http://msdn.microsoft.com/en-US/library/dd885244%28v=vs.100%29.aspx)

从此页面中，您可以获取有关[ICompletionSource](http://msdn.microsoft.com/en-US/library/microsoft.visualstudio.language.intellisense.icompletionsource%28v=vs.100%29.aspx)和[ICompletionSourceProvider](http://msdn.microsoft.com/en-US/library/microsoft.visualstudio.language.intellisense.icompletionsourceprovider%28v=vs.100%29.aspx)的信息，这两个接口必须实现才能提供自动完成功能。

# function - dojo 1.7+ timer/setInterval 误解

> ID：12645633
> 
> 赞同：0
> 
> 时间：2012-09-28T18:44:18.530
> 
> 标签：function, time, dojo, setinterval

我有一个创建简单时钟的 javascript 代码。

```
define([
    "dojo/_base/declare",
    "dojo/dom",
    "dojo/date/locale",
    "dojo/_base/event"
], 
function(declare, dom, locale, event) {
    return declare([], {
        ...
        ...
        createClock : function() {
            html_time = dom.byId("time");
            window.setInterval(this.tick(), 1000);
        }
    });
}); 
```

**JS 代码工作正常！**另外，我有一个html代码：

```
<body>
    <script>
        require([ "gui/common/Clock"
        ],
        function(Clock) {
            var clock = new Clock();
            clock.createClock();
        });
    </script>
    Current time: <span id="time"></span>
    ... 
```

但是，如果我在浏览器中运行代码，则会出现错误：

```
Error: useless setInterval call (missing quotes around argument?)
[Break On This Error]   

window.setInterval(this.tick(), 1000); 
```

在浏览器中会出现时间，但不会打勾。任何人都可以解释我的问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:50:17.217

不执行该方法：`window.setInterval(this.tick, 1000);`

同样要`tick`在`this`范围内执行，请使用`lang.hitch`as of`dojo/_base/lang`模块：

```
window.setInterval(lang.hitch(this, "tick"), 1000); 
```

[您可以在我对How to do something while a dojo xhr request is waiting or loading 的](https://stackoverflow.com/questions/8512483/how-to-do-something-while-a-dojo-xhr-request-is-waiting-or-loading/8515115#8515115)回答中找到一些灵感。

# json - Hive：解析 JSON

> ID：12645634
> 
> 赞同：20
> 
> 时间：2012-09-28T18:44:19.623
> 
> 标签：json, hadoop, hive

我正在尝试从数百万行（5 TB+ 表）的嵌套 JSON 中获取一些值。最有效的方法是什么？

这是一个例子：

```
{"country":"US","page":227,"data":{"ad":{"impressions":{"s":10,"o":10}}}} 
```

我需要上述 JSON 中的这些值：

```
Country        Page      impressions_s       impressions_o
---------      -----     -------------       --------------
US              2        10                  10 
```

这是 Hive 的 json_tuple 函数，我不确定这是否是最好的函数。 [https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-getjsonobject](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-getjsonobject)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-03-18T16:58:35.250

您可以使用 get_json_object：

```
 select get_json_object(fieldname, '$.country'), 
        get_json_object(fieldname, '$.data.ad.s') from ... 
```

使用 json_tuple 您将获得更好的性能，但我找到了一个“如何”在 json 中获取 json 中的值；要格式化您的表格，您可以使用以下内容：

`from table t lateral view explode( split(regexp_replace(get_json_object(ln, ''$.data.ad.s'), '\\[|\\]', ''), ',' ) ) tb1 as s` 上面的这段代码会将您转换为列中的“数组”。

形成更多：[https ://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF)

我希望这有助于...

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-07-27T06:18:37.477

这是您可以快速尝试的方法，我建议使用[Json-Ser-De](https://github.com/rcongiu/Hive-JSON-Serde)。

纳米/tmp/hive-parsing-json.json

```
{"country":"US","page":227,"data":{"ad":{"impressions":{"s":10,"o":10}}}} 
```

创建基表：

```
hive > CREATE TABLE hive_parsing_json_table ( json string ); 
```

将 json 文件加载到表中：

```
hive > LOAD DATA LOCAL INPATH  '/tmp/hive-parsing-json.json' INTO TABLE hive_parsing_json_table; 
```

查询表：

```
hive >  select v1.Country, v1.Page, v4.impressions_s, v4.impressions_o 
from hive_parsing_json_table hpjp
     LATERAL VIEW json_tuple(hpjp.json, 'country', 'page', 'data') v1
     as Country, Page, data
     LATERAL VIEW json_tuple(v1.data, 'ad') v2
     as Ad
     LATERAL VIEW json_tuple(v2.Ad, 'impressions') v3
     as Impressions
     LATERAL VIEW json_tuple(v3.Impressions, 's' , 'o') v4
     as impressions_s,impressions_o; 
```

输出 ：

```
v1.country  v1.page     v4.impressions_s    v4.impressions_o
US      227     10          10 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-31T07:12:26.177

使用 hive native `json-serde('org.apache.hive.hcatalog.data.JsonSerDe')`你可以做到这一点.. 这里是步骤

添加 JAR /path/to/hive-hcatalog-core.jar;

```
create a table as below 
 CREATE TABLE json_serde_nestedjson (
  country string,
  page int,
  data struct < ad: struct < impressions: struct < s:int, o:int  > > >
)
ROW FORMAT SERDE 'org.apache.hive.hcatalog.data.JsonSerDe'; 
```

然后加载数据（存储在文件中）

```
LOAD DATA LOCAL INPATH '/tmp/nested.json' INTO TABLE json_serde_nestedjson; 
```

然后使用获取所需数据

```
SELECT country, page, data.ad.impressions.s, data.ad.impressions.o 
FROM json_serde_nestedjson; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T18:48:13.167

实施 SerDe 以解析 JSON 格式的数据是一种更好的方式。

可以在此处找到有关如何实现 SerDe 以解析 JSON 的教程

[http://blog.cloudera.com/blog/2012/12/how-to-use-a-serde-in-apache-hive/](http://blog.cloudera.com/blog/2012/12/how-to-use-a-serde-in-apache-hive/)

您也可以使用以下示例 SerDe 实现

[https://github.com/rcongiu/Hive-JSON-Serde](https://github.com/rcongiu/Hive-JSON-Serde)

# c# - 重新排序 StackPanel 子项拖放

> ID：12645635
> 
> 赞同：5
> 
> 时间：2012-09-28T18:44:20.333
> 
> 标签：c#, wpf

我有一个包含许多按钮的 Stackpanel，那么如何通过像 Expression Blend 或“Visual Studio Xaml Window Designer”那样拖放按钮来重新排序按钮

![在此处输入图像描述](../Images/f93d51f30bb07c9a12ea1b8a61189c18.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T23:09:20.660

[该线程](http://social.msdn.microsoft.com/Forums/en/wpf/thread/d32bb0af-b14f-4e88-ad36-098d11cd375c)提供了一些有用的信息。尽管如此，您可以通过搜索找到很多资源，这些资源将提供大量相关信息。

# ios - 来自 Github 的 Facebook iOS SDK 3.1 缺少 FacebookSDK.framework

> ID：12645636
> 
> 赞同：6
> 
> 时间：2012-09-28T18:44:21.690
> 
> 标签：ios, facebook, ios6

我想在 XCode 4.5 上使用 Facebook SDK 与 iOS6 集成。

我读了这个[教程](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)。我正在使用[这个 .dmg 包](https://github.com/downloads/facebook/facebook-ios-sdk/FacebookSDK-3.1.pkg)来安装库，但我需要跟踪和阅读一些方法的实现，所以我注意到[Github](https://github.com/facebook/facebook-ios-sdk)上有一个包含当前源代码的 repo。

我的问题是我不知道如何像使用.dmg 包一样正确安装它。关于如何做的任何想法？我试图只导入 src 文件夹并引用整个项目，但我遇到了很多问题、警告和错误。

**更新**

我不得不再次这样做，所以现在我让它工作了。这是我所做的：

我尝试了两种方法，构建源代码 (1) 和直接导入文件 (2)。第一个场景很简单，在 Github repo 的根文件夹中运行：

```
sudo scripts/build_framework.sh 
```

您将获得所需的文件，与使用 .pkg 安装时获得的文件相同。但我需要跟踪功能，所以我尝试导入文件。

首先，我在我的项目中添加了来自 Github 存储库的 src 文件夹。我在每个文件上都有重复定义的问题。问题出在我的*Build Settings (BS)*上，我仍在引用 Facebook 的 .pkg 安装目录，所以我复制了文件。*我删除了BS*上对该文件夹的所有引用*上对该文件夹的所有引用，然后添加了文件。*

 *之后，在导入我得到的 Facebook 文件的文件上：

```
Undefined symbols for architecture i386 
```

当我将文件复制到 XCode 时，.m 文件不会自动添加到构建阶段/编译源中。我手动添加了它们并在我的文件中导入了 FBConnect.h。

希望它可以帮助有同样问题的人。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T18:58:34.203

如果通过 git 包含 FacebookSDK，则需要构建框架。从 FacebookSDK 目录中运行以下命令：

```
scripts/build_framework.sh 
```

然后，FacebookSDK.framework 会出现在 FacebookSDK/build

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T20:03:52.790

将整个 src 文件夹添加到您的项目中。在要使用 Facebook 的任何类中导入 FBConnect.h。连接类导入其余必要的类。

```
#import "FBConnect.h" 
```*

# objective-c - 核心数据：executeFetchRequest vs performFetch

> ID：12645641
> 
> 赞同：12
> 
> 时间：2012-09-28T18:44:43.777
> 
> 标签：objective-c, core-data, nsfetchedresultscontroller, nsfetchrequest

我想要一份关于两者比较的完整清单。我知道的事情：

`executeFetchRequest`：

*   发送到 MOC 的消息
*   返回一个托管对象数组
*   目标：从持久存储中获取对象到 MOC
*   与表视图：与表视图无关
*   频率：经常在循环中使用，因此可以被多次调用

`performFetch`：

*   发送到 FRC 的消息
*   调用后，用于`fetchedObjects`返回托管对象数组
*   使用表视图：FRC 专门用于保持托管对象和表视图行同步，并用于`performFetch`初始化该过程。
*   频率：通常只有一次。除非 FRC 的 fetch 请求发生变化，否则不需要`performFetch`第二次 调用

如果我错了，请纠正我并附加列表。谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-29T13:16:39.443

关于`executeFetchRequest:`

> 发送到 MOC 的消息

是的

> 返回一个托管对象数组

可以，但您也可以更改要检索的结果类型。在`NSFetchRequest`您可以设置不同的结果类型：

```
- (void)setResultType:(NSFetchRequestResultType)type 
```

where`NSFetchRequestResultType`可以是不同的类型。取自苹果文档：

```
enum {
   NSManagedObjectResultType        = 0x00,
   NSManagedObjectIDResultType      = 0x01,
   NSDictionaryResultType           = 0x02
   NSCountResultType                = 0x04
};
typedef NSUInteger NSFetchRequestResultType; 
```

> 目标：从持久存储中获取对象到 MOC

是的，创建`NSFetchRequest`并执行请求，它与在 SQL 中创建 SELECT 语句相同。如果您还使用 a`NSPredicate`它与使用 SELECT-WHERE 语句相同。

> 与表视图：与表视图无关

是的，但是您可以使用检索到的数据填充表格

> 频率：经常在循环中使用，因此可以被多次调用

这取决于您想要实现的目标。它可能在一个循环内，也可能不在一个循环内。在循环中执行请求可能会影响性能，但我不会担心。在引擎盖下，Core Data 维护着一种缓存机制。每次执行请求时，如果数据不在缓存中，Core Data 会在您的存储（例如 sql 文件）上执行一次往返，并用它检索到的对象填充缓存。如果执行相同的查询，由于缓存机制，往返不会再次执行。无论如何，您可以避免在运行循环中执行请求，只需将该请求移出循环即可。

关于`performFetch:`

> 发送到 FRC 的消息

是的

> 调用后，使用 fetchedObjects 返回一个托管对象数组

`[_fetchedResultsController objectAtIndexPath:indexPath];`是的，但是如果您要填充表格中的特定单元格，您也可以检索对象。

在这里，我真的建议阅读关于[NSFetchedResultsController的不错的教程](http://www.raywenderlich.com/999/core-data-tutorial-how-to-use-nsfetchedresultscontroller)

> 使用表视图：FRC 专门用于保持托管对象和表视图行同步，并使用 performFetch 来初始化该过程。

是的，a`NSFetchedResultsController`与 a `NSManagedObjectContext`for you 结合使用。此外，它还支持延迟加载数据。假设您检索了 1000 个元素，并且希望将它们显示在`UITableView`. 设置一个`NSFetchRequest`类似的请求：

```
[fetchRequest setFetchBatchSize:20]; 
```

并将它与 a 的实例一起使用`NSFetchedResultsController`，它首先允许加载 20 个元素。然后当您滚动时，会加载其他 20 个元素，依此类推。如果没有，`NSFetchedResultsController`您必须手动实现此行为。请参阅我提供的教程以获取更多信息。

> 频率：通常只有一次。除非 FRC 的 fetch 请求发生变化，否则无需再次调用 performFetch

这取决于您想要达到的目标。大多数时候你可以调用一次。

希望有帮助。

**编辑**

您必须`performFetch`明确调用。我喜欢`NSFetchedResultsController`在我的头文件（.h）中创建一个属性，比如

```
@property (nonatomic, strong, readonly) NSFetchedResultsController* fetchedResultsController; 
```

并在你的实现文件（.m）中合成它，比如

```
@synthesize fetchedResultsController = _fetchedResultsController; 
```

然后总是在 .m 文件中覆盖 getter 以创建它的新实例：

```
- (NSFetchedResultsController*)fetchedResultsController
{
    // it already exists, so return it
    if(_fetchedResultsController) return _fetchedResultsController;

    // else create it and return

    _fetchedResultsController = // alloc-init here with complete setup

   return _fetchedResultsController;
} 
```

完成后，在您的课程中（例如在`viewDidLoad`方法中）使用它

```
NSError *error = nil;
if (![[self fetchedResultsController] performFetch:&error]) {

    // Handle the error appropriately.
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T18:58:04.943

您正在比较错误的元素。`NSFetchedResultsController`使用`NSManagedObjectContext`来执行获取，并在适当的配置下，监视托管对象上下文中的更改以验证它正在监视的获取属性的状态，但实际的获取是由上下文完成的。在这两种情况下，`NSManagedObjectContext`都进行提取。不同之处在于，`NSManagedObjectContext`直接使用，您将获得一个 NSArray 类型的对象（实际的运行时类与您使用的数组不同`[NSArray array]`），同时`NSFetchedResultsController`具有不同的目的（拥有结果集合并监视对记录和实体的更改在其获取请求上）。换句话说，`NSFetchedResultsController`使用上下文工作，但它的工作方式与简单的对象集合不同。

一个观察：你不应该`executeFetchRequest`在循环中使用，特别是称之为“很多次”。每个提取都有其性能成本。您可以调用`executeFetchRequest`一次，然后循环检查结果。

# java - Spring MVC 注解配置

> ID：12645644
> 
> 赞同：1
> 
> 时间：2012-09-28T18:45:04.913
> 
> 标签：java, spring-mvc, annotations, pojo

有人可以指出我在使用注释时如何配置**applicationContext.xml**和**Servlet.xml文件的链接或资源。**我还想了解**POJO需要哪些注释以及****applicationContext.xml**和**Servlet.xml**中需要哪些定义**文件**

 **任何帮助，即使它的代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:30:38.197

这就是我学会设置 Spring MVC（配置文件等）的方式：

*   [Spring MVC 入门](http://blog.springsource.com/2011/01/04/green-beans-getting-started-with-spring-mvc/)，来自 Spring 的博客。开始真的很好。
*   [好的旧 Spring 文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)，超越基础。

* * *

至于 Spring 层和注释，一些有趣的 Stack Overflow 帖子：

*   [Spring 中的@Component、@Repository 和@Service 注解有什么区别？](https://stackoverflow.com/q/6827752/400545)
*   [最小化控制器责任](https://stackoverflow.com/questions/12569832/minimizing-controller-responsibility)
*   [https://stackoverflow.com/a/12442657/400545](https://stackoverflow.com/a/12442657/400545)
*   [Spring 术语中的命令、表单、业务和实体对象之间的区别？](https://stackoverflow.com/q/11475673/400545)**

# c - 当我们在 C 中取消引用 NULL 指针时，操作系统会发生什么？

> ID：12645647
> 
> 赞同：45
> 
> 时间：2012-09-28T18:45:13.297
> 
> 标签：c, pointers, null, operating-system

假设有一个指针，我们用 NULL 对其进行初始化。

```
int* ptr = NULL;
*ptr = 10; 
```

现在，程序将崩溃，因为`ptr`它没有指向任何地址，我们正在为那个分配一个值，这是一个无效的访问。那么，问题是，操作系统内部发生了什么？是否发生页面错误/分段错误？内核甚至会在页表中搜索吗？还是在此之前发生崩溃？

我知道我不会在任何程序中做这样的事情，但这只是为了知道在这种情况下操作系统或编译器内部发生了什么。这不是一个重复的问题。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-09-28T19:04:25.283

**简短回答**：这取决于很多因素，包括编译器、处理器架构、特定处理器型号和操作系统等。

**长答案（x86 和 x86-64）**：让我们深入到最低级别：CPU。在 x86 和 x86-64 上，该代码通常会编译成如下指令或指令序列：

```
movl $10, 0x00000000 
```

其中说“将常量整数 10 存储在虚拟内存地址 0 处”。英特尔[® 64 位和 IA-32 架构软件开发人员手册](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)详细描述了执行此指令时会发生什么，因此我将为您总结一下。

CPU 可以在几种不同的模式下运行，其中一些是为了向后兼容更老的 CPU。现代操作系统以一种称为*保护模式*的模式运行用户级代码，该模式使用[分页](http://en.wikipedia.org/wiki/Paging)将虚拟地址转换为物理地址。

对于每个进程，操作系统都保留一个*页表*，该页表指示地址的映射方式。页表以 CPU 理解的特定格式存储在内存中（并受到保护，以便用户代码无法修改它们）。对于发生的每一次内存访问，CPU 都会根据页表对其进行转换。如果转换成功，它会对物理内存位置执行相应的读/写操作。

当地址转换失败时会发生有趣的事情。并非所有地址都是有效的，如果任何内存访问产生无效地址，处理器就会引发*页面错误异常*。这会触发从*用户模式*（又名x86/x86-64 上的*当前特权级别 (CPL) 3*）到*内核模式*（又名 CPL 0）到内核代码中特定位置的转换，由*中断描述符表*(IDT)定义.

内核重新​​获得控制权，并根据来自异常的信息和进程的页表，找出发生了什么。在这种情况下，它意识到用户级进程访问了一个无效的内存位置，然后它会做出相应的反应。在 Windows 上，它将调用[结构化异常处理](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680657%28v=vs.85%29.aspx)以允许用户代码处理异常。在 POSIX 系统上，操作系统将向`SIGSEGV`进程传递信号。

在其他情况下，操作系统将在内部处理页面错误并从其当前位置重新启动进程，就好像什么都没发生一样。例如，[保护页](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366549%28v=vs.85%29.aspx)被放置在堆栈的底部，以允许堆栈按需增长到一个限制，而不是为堆栈预先分配大量内存。类似的机制用于实现[写时复制](http://en.wikipedia.org/wiki/Copy-on-write)内存。

在现代操作系统中，通常设置页表以使地址 0 成为无效的虚拟地址。但有时可以改变这一点，例如在 Linux 上通过将 0 写入 pseudofile `/proc/sys/vm/mmap_min_addr`，之后可以使用`mmap(2)`映射虚拟地址 0。在这种情况下，取消引用空指针不会导致页面错误。

上面的讨论都是关于当原始代码在用户空间运行时会发生什么。但这也可能发生在内核内部。内核可以（并且肯定比用户代码更有可能）映射虚拟地址 0，因此这样的内存访问是正常的。但是如果它没有被映射，那么接下来发生的事情大致相似：CPU 引发一个页面错误错误，该错误会陷入内核的预定义点，内核检查发生了什么，并做出相应的反应。如果内核无法从异常中恢复，它通常会以某种方式恐慌（例如，*内核恐慌*、*内核 oops*或 Windows 上的 BSOD），通过将一些调试信息打印到控制台或串行端口然后停止。

另请参阅[有关 NULL 的废话：利用内核 NULL 取消引用](https://blogs.oracle.com/linux/post/much-ado-about-null-exploiting-a-kernel-null-dereference)，以获取攻击者如何利用内核内部的空指针取消引用错误以获得 Linux 机器上的 root 权限的示例。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-28T19:28:31.620

作为旁注，为了强调架构上的差异，由一家以其三字母缩写名称而闻名的公司开发和维护的某个操作系统通常被称为大原色，具有最令人着迷的 NULL 确定。

他们在一个巨大的“事物”中为所有数据（内存和磁盘）使用 128 位线性地址空间。根据他们的操作系统，“有效”指针*必须*放置在该地址空间内的 128 位边界上。顺便说一句，这会对包含指针的结构（无论是否打包）造成迷人的副作用。无论如何，隐藏在每个进程专用页面中的是一个位图，它为进程地址空间中可以放置有效指针的每个有效位置分配一个*位。*硬件和操作系统上所有可以生成并返回有效内存地址并将其分配给指针的操作码都将设置表示该指针（目标指针）所在的内存地址的位。

那么为什么有人要关心呢？出于这个简单的原因：

```
int a = 0;
int *p = &a;
int *q = p-1;

if (p)
{
// p is valid, p's bit is lit, this code will run.
}

if (q)
{
   // the address stored in q is not valid. q's bit is not lit. this will NOT run.
} 
```

真正有趣的是这个。

```
if (p == NULL)
{
   // p is valid. this will NOT run.
}

if (q == NULL)
{
   // q is not valid, and therefore treated as NULL, this WILL run.
}

if (!p)
{
   // same as before. p is valid, therefore this won't run
}

if (!q)
{
   // same as before, q is NOT valid, therefore this WILL run.
} 
```

它的东西你必须看到相信。我什至无法想象为维护该位图而进行的内务管理，尤其是在复制指针值或释放动态内存时。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-28T18:59:26.497

在支持虚拟内存的 CPU 上，如果您尝试读取内存地址，通常会发出页面错误异常`0x0`。操作系统页面错误处理程序将被调用，然后操作系统将确定页面无效并中止您的程序。

请注意，在某些 CPU 上，您还可以安全地访问内存地址`0x0`。

正如 C 标准所说，取消引用空指针是未定义的，如果编译器能够在编译时（甚至运行时）检测到您正在取消引用空指针，它可以做任何它想做的事情，比如用详细的错误消息中止程序.

> (C99, 6.5.3.2.p4) “如果一个无效值被分配给指针，一元 * 操作符的行为是未定义的。87)”
> 
> 87）：“一元 * 运算符取消引用指针的无效值包括空指针、与指向的对象类型不恰当对齐的地址，以及对象在其生命周期结束后的地址。”

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-28T19:07:25.990

在*典型*情况下，`int *ptr = NULL;`将设置`ptr`为指向地址 0。C 标准（和 C++ 标准）非常谨慎地*不*要求这样做，但它仍然*非常*普遍。

当你这样做`*ptr = 10;`时，CPU 通常会在地址线和`10`数据线上生成 0，同时设置 R/W 线以指示写入（并且，如果总线有这样的东西，则断言内存与 I/ O 行表示写入内存，而不是 I/O）。

假设 CPU 支持内存保护（并且您正在使用启用它的操作系统），CPU 将在它发生之前检查（尝试）访问。例如，现代 Intel/AMD CPU 将使用将虚拟地址映射到物理地址的分页表。在典型情况下，地址 0 不会映射到*任何*物理地址。在这种情况下，CPU 将产生访问冲突异常。对于一个相当典型的示例，Microsoft Windows 未映射前 4 兆字节，因此该范围内的*任何*地址通常都会导致访问冲突。

在较旧的 CPU（或未启用 CPU 保护功能的较旧操作系统）上，尝试写入通常会成功。例如，在 MS-DOS 下，通过 NULL 指针写入将简单地写入地址零。在小型或中型模型（具有 16 位数据地址）中，大多数编译器会将一些已知模式写入数据段的前几个字节，当程序结束时，他们会检查该模式是否保持不变（并且如果失败，请做一些事情以表明您已通过 NULL 指针写入）。在紧凑型或大型模型（20 位数据地址）中，它们通常只会写入地址零而不会发出警告。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T18:49:53.833

我想这取决于平台和编译器。NULL 指针可以通过使用 NULL 页来实现，在这种情况下您会遇到页面错误，或者它可能低于向下扩展段的段限制，在这种情况下您会遇到分段错误。

这不是一个确定的答案，只是我的猜想。

# php - mysql锁定时分叉进程

> ID：12645650
> 
> 赞同：2
> 
> 时间：2012-09-28T18:45:51.407
> 
> 标签：php, mysql, cakephp

我正在处理 cakephp 中的 shell 脚本，该脚本处理我的 mysql 数据库中的项目队列。为了加快我使用 pcntlfork 的过程，如下所示：

```
$pids = array();
$i = 0;
for($i = 0; $i < count($queue); $i++) 
{

     $pids[$i] = pcntl_fork();

      if(!$pids[$i]) {
        # do code
        exit();
      } 
    } 
```

在执行此代码时，shell 脚本可能会在当前脚本有时间从队列中删除项目之前运行。我正在使用mysql并像这样锁定表：

```
$this->Queue->query("SELECT GET_LOCK('".$this->mysqlLock."', ".$this->mysqlLockTime.") AS 'GetLock'"); 
```

此实现不起作用，给我错误“一般错误：mysql 服务器已消失”。这是因为孩子们失去了联系。这似乎是 php 中 fork 本身的一个缺陷。

我的问题是有更好的解决方案来锁定这个进程直到它完成然后释放它以供其他 shell 脚本执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:53:38.150

我找到了确保程序不会调用和执行自身实例的最佳解决方案。我将在 php 中使用信号量来锁定程序。

这是一个关于信号量的简短教程： [http ://www.re-cycledair.com/php-dark-arts-semaphores](http://www.re-cycledair.com/php-dark-arts-semaphores)

# hadoop - 如何从映射器或减速器外部增加 hadoop 计数器？

> ID：12645652
> 
> 赞同：2
> 
> 时间：2012-09-28T18:45:58.710
> 
> 标签：hadoop

我想从映射器外部向 hadoop 计数器添加一些东西。所以，我想像这样访问上下文对象上的 getCounter：

```
context.getCounter(counter, key).increment(amount) 
```

我无法从我开始工作的地方获取上下文对象。我只能做

```
job.getCounters().findCounter() 
```

这不允许我向 hadoop 计数器添加一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:50:46.613

您只能在 mapper/reducer 任务中使用/写入计数器。作业跟踪器内置了与计数器交互的功能，您真的不想干扰已经很复杂的设置。

几个月前我遇到了这个问题，试图使用计数器来存储临时信息，但我决定将我需要的信息写入定义的 hdfs 目录并在我的工作完成后读取它。

**编辑**：为什么和你想在映射器***之外使用计数器？***

**编辑#2**：如果你想要完成工作的统计数据，那么计数器不是适合的地方，因为a）一旦工作跟踪器完成收集数据，它们似乎就不可写了，b）它们打算被使用用于跨任务聚合指标。我最近有类似的需求，最终在作业设置类（在我的边缘节点上）中进行了统计汇总，然后将数据写入日志。

# java - Spring Web Flow Action-State 控制器应该返回什么？

> ID：12645654
> 
> 赞同：1
> 
> 时间：2012-09-28T18:46:06.283
> 
> 标签：java, spring, spring-webflow

Spring Web Flow Action-State 控制器应该返回什么？看看我下面的流程，我有一个动作状态，基于对控制器的调用，我可以进入 4 个不同的路径。

我不知道我必须在我的控制器中进行哪些更改才能将去往的地方传回。

以下是我的流程：

```
<action-state id="checkStatus">
        <evaluate expression="flowControllerActions.checkStatus(member)" />
        <transition on="NoSSN" to="NoSSN"/>
        <transition on="MemberExists" to="endStateMemberExists" />
        <transition on="IsDeceased" to="endStateMemberDeceased" />
        <transition on="OK" to="address" />
    </action-state> 
```

这是我在控制器中的方法。有人可以告诉我如何使转换工作：

```
public String checkStatus(Member member) {
        LOGGER.debug("[" + member.toString() + "]");

        //
        // HOW DO I RETURN??
        //

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T22:35:51.160

您应该能够在控制器中返回 String(s): "NoSSN","MemberExists","IsDeceased" 和 "OK"

# asp.net - 使用资源文件进行本地化

> ID：12645658
> 
> 赞同：3
> 
> 时间：2012-09-28T18:46:20.790
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, localization, resx

我对基于 resx 的本地化有疑问。

这是一个 ASP.NET MVC3 项目。我有两个程序集：`Web`和`Resource`. `Web`包含所有与 MVC 相关的内容，并`Resource`包含用于本地化的 resx 文件（我正在构建具有 3 种不同语言的站点，例如`file.resx`, `file.en-AU.resx`, `file.en-US.resx`）。

现在奇怪的是，当我将资源项目引用添加为项目时，这一切在我使用 VS2010 和 IIS 的本地计算机上运行得非常好，但是当我在我的 bin 中添加对 Resource.dll 的引用时 - 它没有工作。

我试图`Thread.CurrentThread.CurrentUICulture`在我的视图中输出，就在输出本地化字符串之前。它给了我选择的文化，这是正确的，但是字符串被呈现为后备值，而不是本地化的。

谁能告诉我，如果我将引用作为 dll 文件添加到我的 bin 中，为什么它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T17:53:09.487

如果我没记错的话，您还应该将生成的 bin、en-au 和 en-us 文件夹添加到您的 bin 中，您应该在资源项目的 bin 中找到这些文件夹

另一种选择确保您拥有具有公共访问器的资源文件

# java - 使用 java 应用程序发送电子邮件

> ID：12645660
> 
> 赞同：0
> 
> 时间：2012-09-28T18:46:33.343
> 
> 标签：java, email

为什么此代码不能发送电子邮件？没有错误，只是没有发送。

```
package tips.mails;

import java.util.Properties;

import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.Message.RecipientType;
import javax.mail.internet.AddressException;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public class SendMail {
private String from;
private String to;
private String subject;
private String text;

public SendMail(String from, String to, String subject, String text){
    this.from = from;
    this.to = to;
    this.subject = subject;
    this.text = text;
}

public void send(){

    Properties props = new Properties();
    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.smtp.port", "465");

    Session mailSession = Session.getDefaultInstance(props);
    Message simpleMessage = new MimeMessage(mailSession);

    InternetAddress fromAddress = null;
    InternetAddress toAddress = null;
    try {
        fromAddress = new InternetAddress(from);
        toAddress = new InternetAddress(to);
    } catch (AddressException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    try {
        simpleMessage.setFrom(fromAddress);
        simpleMessage.setRecipient(RecipientType.TO, toAddress);
        simpleMessage.setSubject(subject);
        simpleMessage.setText(text);

        Transport.send(simpleMessage);
    } catch (MessagingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

    public static void main(String args[])
    { 
        new SendMail("source", "dist","Subject", "Test Message!!!");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T18:52:03.680

你实例化一个`SendMail`对象，然后什么也不做。也许你也应该执行你的`send()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:58:51.080

你忘了打电话给发送。尝试这个

```
 new SendMail("source", "dist","Subject", "Test Message!!!").send(); 
```

# php - 如何列出和计算字符串中所有可能的组合？

> ID：12645661
> 
> 赞同：0
> 
> 时间：2012-09-28T18:46:40.617
> 
> 标签：php, math

> **可能的重复：**
> [PHP：如何获得一维数组的所有可能组合？](https://stackoverflow.com/questions/10834393/php-how-to-get-all-possible-combinations-of-1d-array)
> [使用一组字符串生成所有可能的组合](https://stackoverflow.com/questions/12160843/generate-all-possible-combinations-using-a-set-of-strings)

```
$s = 'A,B,C'; 
```

给定一组字符串，你如何计算可能有 AAA BBB CCC ABC ACB BCA 等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:50:52.867

在 c++ 中将是：

```
do{
cout << s << endl;
}while(next_permutation(s,s+s.size()); 
```

所以只需经历所有排列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:51:01.220

查找或编写包含对数组进行递归循环的函数。那应该为您返回一个包含所有可能组合的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T18:54:49.190

```
$s = explode($s,",")

function recursion($string, $depth, $maxdepth, $s)
{
   if($depth == $maxdepth)
       echo $string
   else
   {
      for($i = 0;$i < sizeof($s); $i++)
      {
         recursion($string+$s[$i], $depth+1, $maxdepth, $s)
      }
   }
}

recursion("",0, sizeof($s), $s) 
```

当然，您可以制作 $maxdepth 和 $s 全局变量以将它们从参数列表中排除

# bash - cygwin中的readlink

> ID：12645662
> 
> 赞同：2
> 
> 时间：2012-09-28T18:46:46.073
> 
> 标签：bash, cygwin

我在每个脚本中做最基本的事情

```
 SCRIPT=`readlink -f ${0}`
  HOME=`dirname $SCRIPT` 
```

并且，给定`$0 = C:\Users\dir\file`，`readlink`给我`/cygdrive/c/CURRENT_DIRECTORY/C:\Users\dir\file`，以便下一个`dirname`产生可怕`/cygdrive/c/Users/CURRENT_DIRECTORY/C:\Users\dir`的而不是`C:\Users\dir`或`/cygdrive/c/Users/dir`

它应该以这种方式工作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T19:50:44.170

看来我找到了答案：我们应该转换`$0`成 cygwin 格式然后`readlink`可以使用它

```
ZERO=`cygpath ${0}`
SCRIPT=`readlink -f ${ZERO}` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-05T15:17:01.687

cygwin（Windows 7）中的 readlink 让我发疯。相同的代码工作，然后不工作，时不时地，输入数据没有变化。大多数情况下它现在不起作用（2013 年 5 月）。它于 2013 年 1 月开始工作。

```
$ ln -s foo bar
$ perl -e 'print readlink("/cygdrive/C/bin/bar")'
foo 
```

但是在正在运行的程序中尝试它并不总是有效。readlink(`cygpath $file`) 在我第一次运行时工作，但在立即重新运行程序时，它无法再读取相同的 $file 并返回 undef。

我目前正在使用这个可怕的kludge。它有效，但我讨厌它：

```
if (-l $file) {
    my $real = readlink($file);
    if (!$real) {
         # KLUDGE FOR CYGWIN
         my $cmd = "perl -e 'print readlink(\"$file\")'";
         $real = `$cmd`;
         die "ERR: No link for link $file date=$fileDate" unless $real; 
```

# android - Android：在画布上绘制 ASCII 箭头

> ID：12645665
> 
> 赞同：2
> 
> 时间：2012-09-28T18:47:00.283
> 
> 标签：android, canvas, ascii

是否可以在画布上使用以下方法绘制 ASCII 字母？

```
canvas.drawText(...) 
```

特别是我想向上/向下绘制箭头。

（如果可能的话，我可以避免两张照片）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T23:24:17.520

我使用 Unicode 管理它：

```
canvas.drawText("\u2191", ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T19:56:47.567

我不完全确定这个问题。我也不确定 ASCII 本身是否有箭头。

你绝对可以画出一堆符合 ASCII 标准的字母。请记住，Android 本身使用其中一种 Unicode，而 Java 使用 UTF-16

# objective-c - 如何在不超出范围的情况下将指针地址传递给线程？

> ID：12645666
> 
> 赞同：0
> 
> 时间：2012-09-28T18:47:05.557
> 
> 标签：objective-c, xcode, multithreading, macos, cocoa

我有一个 Objective-C 方法，它创建一个指针，然后使用 performSelectorInBackground: 将它传递给一个新线程。问题是，我需要将指针的*地址*传递给线程，因为我想从线程中释放与其关联的内存。我遇到的问题是，当新线程启动时，调用方法结束，导致指针超出范围。如何在线程可以接收指针地址的地方保持足够长的时间？

如果我只是在主线程上调用“pointerTest”方法，这一切当然都有效。

这是我的代码：

```
-(void)pointerTest:(NSValue*)pointer
{   
    void **p = (void**)[pointer pointerValue];
    fprintf(stderr,"p was %s\n",(char*)(*p)); //prints "Hello There!"
    free(*p);
    *p = NULL;
} 
```

现在，在主线程上：

```
-(IBAction)doTest:(id)sender
{
    char *str = "Hello There!";

    void *p = malloc(strlen(str)+1);
    strcpy(p, str);

    //this works
    //[self pointerTest:[NSValue valueWithPointer:&p]];

    //this fails
    [self performSelectorInBackground:@selector(pointerTest:) withObject:[NSValue valueWithPointer:&p]];

    if(!p){
        fprintf(stderr,"p was NULL!\n");
    }else{
        fprintf(stderr,"p was NOT NULL: %s\n",p);
    }
} 
```

**更新：**

这段代码表明，如果我不将指针传递给 pointerTest:，我无法从 pointerTest 中释放 p：

```
-(void)pointerTest:(NSValue*)pointer
{   
    void *p = (void*)[pointer pointerValue];
    fprintf(stderr,"p was %s\n",(char*)p); //prints "Hello There!"
    free(p);
    fprintf(stderr,"p was %s\n",(char*)p); //STILL prints "Hello There!"
    *p = NULL;
    fprintf(stderr,"p was %s\n",(char*)p); //prints "(null)"
} 
```

现在，在调用方法中：

```
//I pass p, NOT a pointer to p
[self pointerTest:[NSValue valueWithPointer:p]];

if(p){
    //p is not NULL, and in fact I can print its value
    fprintf(stderr,"p was NOT NULL: %s\n",p);
} 
```

但是，如果我将指针传递给 p 而不是 p，我可以按预期从 pointerTest 中释放它的值：并且在从 pointerTest 返回时，调用方法中的 p 为 NULL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T21:26:37.160

*[我不会问你为什么将`malloc`C 字符串与 Objective-C 混合，我猜你是在试验。这样做本身并没有错，只是在这种情况下很不寻常。]*

您根本不需要将指针传递给*指针*。

*指针*是*框*的*名称*。_ 一些框包含字符、一些员工记录等以及一些*框名称*（其他框的）。找到所需大小的盒子并返回其名称，您可以像传递整数值一样传递它 - 您不需要传递包含包含您的字符的盒子名称的盒子名称......**`malloc`**

 **此外，当`malloc`您需要在 C 字符串上允许尾随 NUL 字符时，请在字符串长度上加 1。

尝试：

```
- (void) pointerTest:(NSValue *)pointer
{   
   void *p = (void *)[pointer pointerValue];
   fprintf(stderr,"p (%p) was %s\n", p, (char *)p);

   free(p);
}

- (IBAction) doTest:(id)sender
{
   char *str = "Hello There!";

   void *p = malloc(strlen(str)+1); // allow for NUL
   fprintf(stderr,"p is %p\n", p);
   strcpy(p, str);

   // this works
   // [self pointerTest:[NSValue valueWithPointer:p]];

   // and so does this
   [self performSelectorInBackground:@selector(pointerTest:) withObject:[NSValue valueWithPointer:p]];

   if(!p)
   {
      fprintf(stderr,"p was NULL!\n");
   }
} 
```

请注意，您不需要总结`p`，`NSValue`将指针值传递给 Objective-C 方法没有错。

高温高压

**评论后**

您将指针的*有效性*与指针所指的内存中可能发生的事情混淆了。

指针指向的内存被*释放*。您的指针值在调用后不再有效`free`- 它是一个*悬空指针*。

您现在悬空的指针值所引用的内存可以随时重新使用。碰巧的是，您`fprintf`的内存尚未被重新使用，因此您会看到旧内容-释放内存不会将其清除。

您存储`NULL`到变量中的目的是删除您的悬空指针，这样做通常可能是一种很好的做法，但是您发现获取短期变量的地址并将其传递给另一个方法是创建一个好方法悬空指针。因此，您最终尝试通过使用指向框 A 的悬空指针来清理从框 A 到框 B 的悬空指针，因为框 A 已经被释放了......让我们尝试用不同的方式来解释它；-)

在这种情况下，您创建了一个指向属于 的局部变量 (box) 的指针`p`，`doTest`一旦`doTest`完成，系统就会将正用于`p`空闲盒子堆（或本例中的堆栈）的盒子返回，并且您的指针变成了一个悬空; 当您的原始代码`pointerTest`尝试`NULL`通过那个现在悬空的指针将 a 存储到该框中时，您遇到了问题。**

# optimization - GCC 的昂贵优化是什么？

> ID：12645669
> 
> 赞同：17
> 
> 时间：2012-09-28T18:47:18.473
> 
> 标签：optimization, gcc

[GCC 文档](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)对此并不特别详细。它说的是：

> -昂贵的优化：
> 
> ```
>  Perform a number of minor optimizations that are relatively expensive. 
> ```

这些是哪种优化？有什么例子吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-29T15:02:10.727

我没有足够的编译器 gee^H^H^H 专家来做这个，但也许有人可以在它的基础上构建......

gcc 的相关位可以通过以下方式轻松获得（如果您不尝试检查整个内容）：

```
svn co --depth=immediates svn://gcc.gnu.org/svn/gcc/trunk/gcc gcc
cd gcc
svn --set-depth infinity update config c cp 
```

（至少那是我在其中找到的似乎与 C/C++ 相关的子集；如果您对 gcc 支持的其他语言感兴趣，请添加其他目录）

接着

```
grep -R flag_expensive_optimizations . | grep -v .svn 
```

在少量文件上产生一个屏幕的价值（35 行）点击。我会把它留给其他人发布更详细的分析（如果有人真的足够关心的话）。

其中有几个引起了我的注意。我会提到（在撰写本文时）：

*   `flag_expensive_optimizations`在（C++ 支持）中唯一提到的`cp/`是一段代码注释`/* Handle ordinary C++ destructors. */`，似乎影响 `LOOKUP_NONVIRTUAL`标志的设置，以及相关的注释`/* Optimize for space over speed here. */`

*   在特定于处理器的 config/ 目录 (sparc, alpha, sh, i386) 中有一些命中。唯一的 i386`TARGET_AVX`在不优化尺寸时适用并被评论`/* When not optimize for size, enable vzeroupper optimization for TARGET_AVX with -fexpensive-optimizations and split 32-byte AVX unaligned load/store. */`

看了一些其他的文章就说服了我，我应该满足于将我对这个特性的了解留在 gcc 文档的级别。

# java - 有没有办法在 Java 中“清理”一个接受标头？

> ID：12645672
> 
> 赞同：0
> 
> 时间：2012-09-28T18:47:31.010
> 
> 标签：java, http, servlets, jersey

因此，如果有人发送此接受标头：

```
*/*'"!@$^*\/:;.,?{}[]`~-_<sCrIpT>alert(81363)</sCrIpT> 
```

它使用 Jersey 在响应中返回。我需要拦截并逃脱它。我还没有找到任何方法来做到这一点。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T17:56:40.267

您可以使用过滤器拦截您的请求并在它们到达您的服务类之前进行清理。检查这个[例子](http://www.avajava.com/tutorials/lessons/what-is-a-filter-and-how-do-i-use-it.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T21:41:11.303

您可以读取请求标头，并以这种方式修改响应标头（您不能修改请求标头，它是只读映射）：

```
@Context HttpHeaders headers;

@Path("yourPath")
public Response yourMethod(){
    List<String> accept = headers.getRequestHeader(HttpHeaders.ACCEPT);
    if ( accept contains invalid characters)) {
        do something    
    }
    //If you set a null value, the header is deleted. 
    //Anyway, deletion is useless, if you have not yet set 
    // the Accept header on the response.
    return  Response.ok().header(HttpHeaders.ACCEPT, null).build();
} 
```

# python - Pydoc 搞砸了 -*- 编码：utf-8 -*-

> ID：12645673
> 
> 赞同：6
> 
> 时间：2012-09-28T18:47:33.740
> 
> 标签：python, emacs, encoding, pydoc

我用 Emacs 编辑 Python 脚本，我总是把它放在我脚本的开头：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*- 
```

[在PEP 0236](http://www.python.org/dev/peps/pep-0263/)中推荐（至少，不阻止）。

但是，我只是发现`pydoc`不能正确识别（忽略）它：

```
$ pydoc myscript.py
Help on module myscript:

NAME
    myscript - # -*- coding: utf-8 -*- 
```

有没有办法解决这个问题？还是使用的好选择`-*- coding: utf-8 -*-`？

我正在使用 Python 2.6

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T18:59:20.000

看来，如果您实际上提供了文档字符串，则将跳过编码行。

文件内容：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
"""Documentation for myscript""" 
```

pydoc 输出：

```
$ pydoc myscript.py
Help on module myscript:

NAME
    myscript - Documentation for myscript 
```

# asp.net-mvc-3 - 带有 Completex IEnumerable 的 Viewmodel 的 MVC 3 帖子

> ID：12645675
> 
> 赞同：0
> 
> 时间：2012-09-28T18:47:36.120
> 
> 标签：asp.net-mvc-3, razor

我有一个复杂的类，它是视图模型属性的一部分。我的视图模型有一个酒类属性，一个酒类有一个名为 CaseProductions 的 ICollection 属性。CaseProduction 类也有几个属性。

在 create GET 事件中，NewWineViewModel 被实例化，然后它运行 GetCaseProductionDefaults 并创建具有一些默认值但大部分为空的 CaseProduction 类的列表。

现在，我最初使用 razor 来执行 foreach 语句，然后按照我想要的方式弹出我的表格。但是我发现将这种类型的 IEnumerable 绑定回 POST 上的视图模型不起作用。我试过使用下面的，但没有骰子。

```
EditorFor(m => m.Wine.CaseProductions) 
```

我真的在寻找有关处理此问题的最佳方法的建议。每款酒都会有一系列案例制作，我希望将其绑定回视图模型中的酒。他们是否可以通过某种方式在 razor 中编辑这些元素的 id 以确保它们绑定？处理这个问题的最佳方法是什么？

视图模型：

```
 public class NewWineViewModel
    {

        public Wine Wine { get; set; }
        public VOAVIRequest VOAVIRequest { get; set; }
        public bool IsRequest { get; set; }

        public Dictionary<int, int> BottlesPerCase { get; set; }
        public SelectList VarTypes { get; set; }
        public SelectList Origins { get; set; }
        public SelectList Apps { get; set; }
        public SelectList Vintages { get; set; }
        public SelectList Importers { get; set; }
} 
```

案例制作类：

```
public class CaseProduction
{
    public int CaseProductionID { get; set; }
    public int WineID { get; set; }
    public int CaseProductionSizeID { get; set; }
    public int CaseCount { get; set; }
    public int CountPerCase { get; set; }

    public virtual CaseProductionSize CaseProductionSize { get; set; }
    public virtual Wine Wine { get; set; }

} 
```

获取默认案例制作：

```
public List<CaseProduction> GetCaseProductionDefaults(vfContext db)
{
    //creates blank list of all formats
    List<CaseProduction> cp = new List<CaseProduction>();
    foreach (CaseProductionSize size in db.CaseProductionSizes)
    {
        int defaultBottlesPerCase = 1;
        switch ((CaseProductionSizeEnum)size.CaseProductionSizeID)
        {
            case CaseProductionSizeEnum.s187ml:
                defaultBottlesPerCase= 24;
                break;
            case CaseProductionSizeEnum.s375ml:
                defaultBottlesPerCase = 12;
                break;
            case CaseProductionSizeEnum.s500ml:
                defaultBottlesPerCase = 12;
                break;
            case CaseProductionSizeEnum.s750ml:
                defaultBottlesPerCase = 12;
                break;
            default:
                defaultBottlesPerCase = 1;
                break;
        }

        cp.Add(new CaseProduction { CaseProductionSizeID = size.CaseProductionSizeID, CountPerCase = defaultBottlesPerCase, CaseProductionSize = size, WineID = this.Wine.WineID });
    }
    return cp;
} 
```

我的案例生产表的剃须刀代码：

```
 @foreach (vf2.Models.CaseProduction cp in Model.Wine.CaseProductions)
            {
                <tr>
                    <td>@cp.CaseProductionSize.Name
                    </td>
                    <td>@Html.Raw(@Html.TextBoxFor(m => m.Wine.CaseProductions.Where(c => c.CaseProductionSizeID == cp.CaseProductionSizeID).First().CaseCount, new { @class = "caseCount", id = "txt" + cp.CaseProductionSize.Name }).ToString().Replace("CaseCount","txt" + cp.CaseProductionSize.Name))
                    </td>
                    <td>
                        @Html.DropDownListFor(m => m.Wine.CaseProductions.Where(c => c.CaseProductionSizeID == cp.CaseProductionSizeID).First().CountPerCase, new SelectList(Model.BottlesPerCase, "Key", "Value", cp.CountPerCase), new { @class = "countPerCase", id = "ddl" + cp.CaseProductionSize.Name, name = "ddl" + cp.CaseProductionSize.Name})
                    </td>
                    <td class="totalBottleCalc">
                    </td>
                </tr>
 } 
```

我的 caseproduction 集合的实例化：

```
 public ActionResult Create(int ID = 0, int VintUpID = 0)
        {
            NewWineViewModel nw = new NewWineViewModel();

            nw.Wine.CaseProductions = nw.GetCaseProductionDefaults(db);
            nw.BottlesPerCase = nw.GetBottlesPerCase(db); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:52:08.467

您必须在父模型构造函数中实例化嵌套列表和复杂模型。默认模型绑定器不会实例化子类。

如果您这样做，那么您可以使用 EditorFor(m => m.Wine.CaseProductions) 应该可以工作，并且您不需要正在使用的复杂视图代码。

如果您想自定义 CaseProduction 的呈现方式，则可以在 ~/Shared/EditorTemplates 中创建一个 CaseProduction.cshtml 文件，它将使用此定义来呈现集合中的每个项目（它会自动为您遍历集合） .

此外，您不应在视图中执行 linq 查询。您的问题是看起来您将数据实体直接传递给视图。这是一个糟糕的设计。您需要创建一个仅包含渲染视图所需信息的 ViewModel。然后，在将数据分配给 View 模型之前过滤数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T19:04:44.750

我相信模型活页夹不会拾取您的`CaseProduction`对象，因为它们看起来不像`CaseProduction`对象。

您已重命名`CaseCount`，您`CaseProductionSize`没有 Id（也没有`CaseProduction`，并且它缺少几个属性。在您的循环中，您必须包含所有属性，并保持名称与您的 POCO 的名称一致。否则模型绑定器将不知道什么它们是。如果需要，您可以将所有属性放在隐藏字段中。

# google-chrome-extension - 为什么 Chrome 不能使用允许 localhost 的内容安全策略加载扩展程序？

> ID：12645683
> 
> 赞同：3
> 
> 时间：2012-09-28T18:48:24.020
> 
> 标签：google-chrome-extension, content-security-policy

我正在开发 Chrome 扩展程序，并希望从中加载脚本以`localhost`进行开发。所以我更新了清单文件以具有以下行：

```
"content_security_policy": "script-src 'self' http://localhost; object-src 'self'", 
```

根据有关[内容安全策略](http://developer.chrome.com/extensions/contentSecurityPolicy.html#relaxing-remote-script)的文档，使用`localhost`或`127.0.0.1`不使用`https`.

但是，当我尝试从以下位置加载扩展时，会收到以下（嘲讽）错误消息`chrome://chrome/extensions/`：

> 无法从“/Users/Tim/Desktop/temp/test”加载扩展。“content_security_policy”的值无效：必须指定“script-src”和“object-src”指令（显式或通过“default-src”隐式指定），并且都必须仅将安全资源列入白名单。您可以包括以下任何来源：“'self'”、“'unsafe-eval'”、“http://127.0.0.1”、“http://localhost”或任何“https://”或“chrome-extension://”来源。有关详细信息，请参阅[http://developer.chrome.com/extensions/contentSecurityPolicy.html](http://developer.chrome.com/extensions/contentSecurityPolicy.html)

要确认问题，您可以使用以下`manifest.json`文件创建一个空目录：

```
{
  "name": "Example extension",
  "description": "Trying to demonstrate a bug in Chrome",
  "version": "0.1",
  "homepage_url": "http://example.com",
  "content_security_policy": "script-src 'self' http://localhost; object-src 'self'",

  "manifest_version": 2
} 
```

并将目录加载为解压缩的扩展名。你应该得到错误。如果您将其删除`http://localhost`或更改为`https://localhost`，它将正常加载。

我错过了什么吗？

（注意：我使用的是 Chrome 22.0.1229.79）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T22:32:21.377

添加`localhost`到 CSP 值的功能由[Chromium 修订版 151470](http://src.chromium.org/viewvc/chrome?view=rev&revision=151470)启用，该版本在 Chrome 23 中（目前在开发通道中，很快将在 beta 通道中）。

# css - 第 n 个孩子漂浮在列中

> ID：12645684
> 
> 赞同：1
> 
> 时间：2012-09-28T18:48:25.340
> 
> 标签：css

我这里有这个 html

```
<ul>
    <li><a href="#">home</a></li>
    <li><a href="#">tours</a></li>
    <li><a href="#">mission</a></li>
    <li><a href="#">contact</a></li>
    <li><a href="#">resources</a></li>
    <li><a href="#">explorers</a></li>
</ul> 
```

我试图取前三个并将其向左浮动在左列中，最后三个向右浮动。我无法让它工作，它们全部对齐并且没有以正确的顺序出现。我这样标记CSS：

```
li:nth-child(-n+3) {float: left;}, 
li:nth-child(n+4) {float: right;} 
```

我错过了什么？谢谢！

编辑以添加 html 链接：[这里是页面](http://kimwilddesigns.com/TrailGuide_website/TrailGuide_website-class/index_fluid.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:19:00.487

我[摆弄](http://jsfiddle.net/MattiasBuelens/DZnHE/)了一下 CSS3 列。实际上，这非常简单：

```
ul {
    -moz-column-count: 2;
    -webkit-column-count: 2;
    column-count: 2;

    -moz-column-gap: 0;
    -webkit-column-gap: 0;
    column-gap: 0;
} 
```

基本上，您在包含列表中定义了两列，以便第一个列表项放在第一列中，而其他列表项最终放在第二列中。默认情况下，浏览器将列之间的间距设置为 about `1em`，因此您需要将其设置`0`为以及折叠该空间。

正如您所料，[浏览器对此的支持仅限于现代浏览器](http://caniuse.com/multicolumn)，例如 Firefox 1.5+、Safari 3+、Chrome、IE10 和 Opera 11.1+。

如果要调整列之间的平衡，可以使用`column-break-before`在某个元素之前强制分列。例如，如果您只想要第一列中的两个项目，而第二列中的其余项目，您可以添加以下代码段：

```
li:nth-child(3) {
    -moz-column-break-before: always;
    -webkit-column-break-before: always;
    column-break-before: always;
} 
```

不幸的是，在撰写本文时，只有 Safari 3+、Chrome、IE10 和 Opera 11.1 支持`column-break-before`。Firefox 尚未实现此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-01T15:21:34.353

您确实可以使用第 n 个孩子。这是我最近遇到的一个例子。它针对多种屏幕宽度进行设置并进行相应调整： [http ://codepen.io/bradfrost/full/xkcBn](http://codepen.io/bradfrost/full/xkcBn)

它使用一个简单的无序列表。

# scala - sortWith 似乎没有按预期工作

> ID：12645688
> 
> 赞同：0
> 
> 时间：2012-09-28T18:48:52.997
> 
> 标签：scala, sorting, calendar

事件类定义

```
 class event extends MongoRecord[event] with MongoId[event]{
      def meta = event
      object title extends StringField(this, 70)
      object description extends StringField(this, 200)
      object date_time extends DateTimeField(this)
      object email extends StringField(this, 70)
      object placeName extends StringField(this, 70)
      object placeLat extends DoubleField(this) 
      object placeLon extends DoubleField(this) 
      object placeCity extends StringField(this, 100)

      }
object event extends event with MongoMetaRecord[event] 
```

从文本中存储日期：

```
val event_temp = event.createRecord
val cal = Calendar.getInstance()
val dashDate = new SimpleDateFormat("yyyy/MM/dd HH:mm")
cal.setTime(dashDate.parse(String))
event_temp.date_time(cal)
event_temp.save 
```

获取事件和排序

```
val events= event.findAll
events.sortWith(_.date_time.is before _.date_time.is) 
```

events 是 List[event]，而 date_time.is 返回 java.util.Calendar。它返回未排序的 List[event]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:33:21.043

我认为 Scala 2.9.1 没有问题：

```
scala> def d(y:Int) = { val c = Calendar.getInstance; c.setTime(new Date(y,0,0)); c }
warning: there were 1 deprecation warnings; re-run with -deprecation for details
d: (y: Int)java.util.Calendar

scala> val cs = d(100) :: d(1) :: d(1000) :: d(150) :: Nil 
// List[java.util.Calendar] .. removed long and useless

scala> val cs2 = cs sortWith { _ before _ } 
// List[java.util.Calendar] .. removed long and useless

scala> cs map { _.getTimeInMillis }
res21: List[Long] = List(946605600000, -2177528012000, 29347927200000, 2524528800000)

scala> cs2 map { _.getTimeInMillis }
res22: List[Long] = List(-2177528012000, 946605600000, 2524528800000, 29347927200000) 
```

# testing - 使用具有动态行为的 EasyMock 模拟 void 函数

> ID：12645691
> 
> 赞同：2
> 
> 时间：2012-09-28T18:49:11.577
> 
> 标签：testing, easymock

我需要使用 EasyMock 模拟一个 void 函数，以便第一次调用返回异常，而下一次调用成功。

例如：

```
this.myObject.move((String) EasyMock.anyObject());
EasyMock.expectLastCall().once().andThrow(new RetryableDependencyException());
EasyMock.expectLastCall().once(); 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:42:17.540

这是行不通的，因为第二个 expectLastCall() 找不到任何呼叫。

你有没有试过这个：

```
this.myObject.move((String) EasyMock.anyObject());
EasyMock.expectLastCall().once().andThrow(new RetryableDependencyException());
this.myObject.move((String) EasyMock.anyObject());
EasyMock.expectLastCall().once(); 
```

我知道这有点冗长，但它应该让你排序:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T10:53:34.850

最短的是

```
myObject.move(anyString());
expectLastCall().andThrow(new RetryableDependencyException()).asStub(); 
```

假设在异常之后多次调用该方法并不重要。如果这很重要，那将是

```
myObject.move(anyString());
expectLastCall().andThrow(new RetryableDependencyException());
myObject.move(anyString()); 
```

有趣的事实：

*   您可以链接并返回
*   我强烈建议使用静态导入以获得更清晰的代码
*   anyString 用于防止字符串中的强制转换
*   once() 不是必需的，因为它是默认值
*   expectLastCall 不是必需的，调用 void 方法足以记录调用而没有任何副作用（如抛出）

# java - 为什么动作执行3次？

> ID：12645693
> 
> 赞同：3
> 
> 时间：2012-09-28T18:49:25.070
> 
> 标签：java, swing, combobox, action, jcombobox

我想要有历史的命令窗口。我做了`okAction`并将它绑在`Ok`按钮上。发出命令时调用此命令。

如果命令成功，则从输入单元格中删除命令文本并添加到历史记录中。这是用 editable 制作的`JComboBox`。

`Ok`如果用户从历史记录中选择了某个命令，则与按下按钮时相同。所以我也将相同的动作绑定到组合框。

不幸的是，使用组合框进行操作也会导致调用动作。在下面的例子中，这是模拟命令失败，一个动作被调用了 3 次。

为什么？

```
import java.awt.*;
import java.awt.event.*;
import java.util.Random;
import javax.swing.*;
import javax.swing.border.*;

public class JCommandWindow extends JFrame {

    private static final Random rnd = new Random();
    private static final long serialVersionUID = 1L;
    private AbstractAction okAction = new AbstractAction("Ok") {

        private static final long serialVersionUID = 1L;

        @Override
        public void actionPerformed(ActionEvent e) {

            if (issue((String) inputComboBox.getSelectedItem())) {
                inputComboBox.setSelectedItem("");
            } else {
                inputComboBox.getEditor().selectAll();
            }
        }
    };
    private AbstractAction cancelAction = new AbstractAction("Cancel") {

        private static final long serialVersionUID = 1L;

        @Override
        public void actionPerformed(ActionEvent e) {
            close();
        }
    };
    private JTextArea logTextArea = new JTextArea();

    {
        logTextArea.setWrapStyleWord(true);
        logTextArea.setBorder(new EtchedBorder());
        logTextArea.setEditable(false);
    }
    private JScrollPane logScrollPane = new JScrollPane(logTextArea);

    {
        logScrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
        logScrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
    }
    private JPanel logPanel = new JPanel();

    {
        logPanel.setLayout(new BorderLayout());
        logPanel.setBorder(new EmptyBorder(5, 5, 0, 5));
        logPanel.add(logScrollPane, BorderLayout.CENTER);
    }
    private DefaultComboBoxModel historyModel = new DefaultComboBoxModel();
    private JComboBox inputComboBox = new JComboBox();

    {
        inputComboBox.setModel(historyModel);
        inputComboBox.setEditable(true);
        inputComboBox.addActionListener(okAction);
    }
    private JPanel inputPanel = new JPanel();

    {
        inputPanel.setLayout(new BorderLayout());
        inputPanel.setBorder(new EmptyBorder(5, 5, 5, 0));
        inputPanel.add(inputComboBox, BorderLayout.CENTER);
    }
    private JButton okButton = new JButton(okAction);
    private JButton cancelButton = new JButton(cancelAction);
    private JPanel buttonPanel = new JPanel();

    {
        buttonPanel.setLayout(new FlowLayout());
        buttonPanel.add(okButton);
        buttonPanel.add(cancelButton);
    }
    private JPanel bottomPanel = new JPanel();

    {
        bottomPanel.setLayout(new BorderLayout());
        bottomPanel.add(inputPanel, BorderLayout.CENTER);
        bottomPanel.add(buttonPanel, BorderLayout.EAST);
    }
    private final JRootPane rootPane = getRootPane();

    {
        rootPane.setLayout(new BorderLayout());
        rootPane.add(logPanel, BorderLayout.CENTER);
        rootPane.add(bottomPanel, BorderLayout.SOUTH);

        rootPane.setDefaultButton(okButton);
        rootPane.addKeyListener(new KeyListener() {

            @Override
            public void keyTyped(KeyEvent e) {
                // TODO Auto-generated method stub
            }

            @Override
            public void keyReleased(KeyEvent e) {
                // TODO Auto-generated method stub
            }

            @Override
            public void keyPressed(KeyEvent e) {
                if (e.getKeyCode() == KeyEvent.VK_ESCAPE) {
                    cancelAction.actionPerformed(null);
                }
            }
        });
        addWindowFocusListener(new WindowFocusListener() {

            @Override
            public void windowLostFocus(WindowEvent e) {
                // TODO Auto-generated method stub
            }

            @Override
            public void windowGainedFocus(WindowEvent e) {
                inputComboBox.requestFocusInWindow();
            }
        });
    }

    public JCommandWindow() {
        setDefaultCloseOperation(DISPOSE_ON_CLOSE);
    }

    public void close() {
        WindowEvent wev = new WindowEvent(this, WindowEvent.WINDOW_CLOSING);
        Toolkit.getDefaultToolkit().getSystemEventQueue().postEvent(wev);
    }

    @Override
    public void pack() {
        super.pack();
        // Get the size of the screen
        Dimension dim = Toolkit.getDefaultToolkit().getScreenSize();
        int w = dim.width * 2 / 3;
        int h = dim.height * 2 / 3;
        setSize(w, h);
        int x = (dim.width - w) / 2;
        int y = (dim.height - h) / 2;
        // Move the window
        setLocation(x, y);
    }

    public void addText(String text) {
        logTextArea.append(text + "\n");
        logTextArea.setCaretPosition(logTextArea.getDocument().getLength());
    }

    public void rememberCommand(String command) {
        historyModel.addElement(command);
    }

    public boolean issue(String command) {
        /*
        if( rnd.nextBoolean() ) {
        addText(command + " succeeded");
        rememberCommand(command);
        return true;
        }
        else {
        addText(command + " failed");
        return false;
        }
         */
        addText(command + " failed");
        return false;
    }

    public static void main(String[] args) {
        JCommandWindow commandWindow = new JCommandWindow();
        commandWindow.pack();
        commandWindow.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T19:00:03.303

当可编辑组合框失去焦点时，触发事件的`contentsChanged`方法，`JComboBox`触发`actionPerformed`. `ActionListener`然后，`focusLost`再次调用相同的`actionPerformed`.

然后，最终触发按钮按下的动作。

# mysql - 在 MySQL 中检索多行

> ID：12645694
> 
> 赞同：0
> 
> 时间：2012-09-28T18:49:30.097
> 
> 标签：mysql

我有一个我想从我的 MySQL 数据库中检索的手工列出的 uniqueID 列表。截至目前，我正在使用：

```
Select * from TABLE where uniqueID = "111" or uniqueID = "124" or uniqueID = "220"... 
```

显然，这是非常耗时的。uniqueID 列表未写入任何文件。我只是想要更有效的查询来告诉数据库检索具有唯一ID 的行。有没有类似的东西，

```
Select * from TABLE where uniqueID = {"111", "124", "220"...} 
```

我可以用吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T18:51:27.007

```
Select * from TABLE where uniqueID IN ('111','124','220',...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:51:47.193

`SELECT * from table WHERE uniqueID IN (111,123,220);`

# knockout.js - 如何应用 knockoutjs css 绑定

> ID：12645695
> 
> 赞同：1
> 
> 时间：2012-09-28T18:49:41.413
> 
> 标签：knockout.js

我不确定这个绑定声明有什么问题。

```
css: { 'error': responseStatus < 0, 'success': responseStatus > 0 } 
```

这是一个工作示例：http: [//jsfiddle.net/awoehler/zEn3t/](http://jsfiddle.net/awoehler/zEn3t/)

我的服务器将响应包含 response.MESSAGE 或 response.ERROR 的 JSON 响应，我想根据收到的响应应用一个类。

```
viewUserModel = {           
    serverResponse: ko.observable(),
    responseStatus: ko.observable( 0 ),  // -1, 0, or 1 
    displayServerResponse: ko.observable( false )
//....
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T19:10:21.787

在表达式中引用 observable 时，必须将它们作为函数调用以获取它们的值。所以改变这个：

```
css: { 'error': responseStatus < 0, 'success': responseStatus > 0 } 
```

对此：

```
css: { 'error': responseStatus() < 0, 'success': responseStatus() > 0 } 
```

应该使您的代码工作。

# ms-access - 将 Access 数据库导入 SQL Express (Visual Studio)

> ID：12645696
> 
> 赞同：-1
> 
> 时间：2012-09-28T18:49:48.700
> 
> 标签：ms-access, sql-server-express

我试图了解 Visual Studio 如何与数据库一起工作，但无法弄清楚。

我有一个带有内置（.mdf）数据库的 Visual Studio 项目，该数据库位于 APP_DATA 文件夹中。我的计算机上的其他地方也有一个访问 .accdb 文件。我想要做的是将它导入 mdf 数据库。

我知道 APP_DATA 中的 mdf 文件对应于 SQL Express。但是，我完全感到困惑，因为看起来我的计算机有自己的单独版本的 SQL 表达式，因为有一个单独的文件夹位于

C:\Program Files\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\DATA

带有自己的 mdf/ldf 文件。此外，当我使用 Navicat 连接时，我可以连接但看不到数据库。

如何与与我的 Visual Studio 项目一起运行的 SQL Express 实例交互并以这种方式导入数据？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:56:27.360

您可以使用 Access 内部的 Upsize to SQL Server 选项或下载用于 Access 的 Sql Server 迁移助手 (http://www.microsoft.com/sqlserver/en/us/product-info/migration-tool.aspx#Access ） 工具。

最后的选择是在 Sql Management Studio 中打开 MDF，并通过 TASKS->Import data 工具导入数据。

# python - 如何在循环中打印值之间的空格？

> ID：12645697
> 
> 赞同：4
> 
> 时间：2012-09-28T18:49:48.943
> 
> 标签：python, printing, python-3.x

我对 Python 有点陌生，所以我想知道如何在 print() 语句中的值之间放置空格，例如：

```
for i in range(5):
    print(i, sep='', end='') 
```

印刷

```
012345 
```

我想打印

```
0 1 2 3 4 5 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T19:19:31.597

虽然其他人已经给出了答案，但这里一个不错的选择是完全避免使用循环和多个打印语句，而只需使用`*`运算符将[​​您的迭代解包到](http://docs.python.org/py3k/tutorial/controlflow.html#unpacking-argument-lists)打印参数中：

```
>>> print(*range(5))
0 1 2 3 4 
```

由于`print()`自动在参数之间添加空格，这使得执行此操作的方式非常简洁易读，无需循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T18:53:28.127

```
>>> for i in range(5):
...    print(i, end=' ')
...
0 1 2 3 4 
```

说明：该`sep`参数只影响*一个*语句中*多个*值的分隔。但是在这里，您有*多个*打印语句，*每个语句都有一个值*，因此您必须指定为一个空格（默认情况下它是换行符）。 *`print`**`end`***

 **** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T18:56:51.387

在 Python 2.x 中，你也可以这样做

```
for i in range(5):
    print i, 
```

或者

```
print " ".join(["%s"%i for i in range(5)]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-18T12:25:47.083

只需在末尾添加引号之间的空格即可。它应该是：

```
end = " " 
```***

# c - 请告诉我我做错了什么，因为monthstr2num返回的值是错误的

> ID：12645699
> 
> 赞同：-3
> 
> 时间：2012-09-28T18:50:01.610
> 
> 标签：c, arrays, string, function

请告诉我我做错了什么

```
//I'm trying to get the number of the month by sending its name.
#include <stdio.h> 
```

我的功能

```
int monthstr2num (char month[]){                                                

if (month == "September")
    return 8;

}

int main (){
char month []={"September"};
int num;

num = monthstr2num (month);//func call 
```

显示错误的输出，如 37814040

```
printf ("%d", num);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T18:57:34.163

你的问题出在两个地方。

首先是你`==`用来比较字符串的地方，这在 C 中是不可能的（这是未定义的行为，它可以编译但不会做你想做的事）。您必须使用 C 库中名为`strcmp`. 它位于`string.h`并且可以像这样使用：

```
if(strcmp(month,"September")==0)
    return 8; 
```

此外，当该 if 语句返回 false 时，您必须在 if 语句之外有另一个返回，例如`return 0;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:53:15.383

这段代码有两个问题：

1)`(month == "September")`比较指针而不是实际数据

2）当`(month == "September")`为假时，函数返回一些垃圾，因为这种情况没有返回语句

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T18:51:51.703

```
if (month == "September") 
```

是错的。使用`strcmp`. 我对这个编译有点惊讶（因为我的数组/指针的微妙之处并不完美），但这最终会将这两个实体的内存地址作为指针进行比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T18:52:09.080

不要`==`用来比较字符串。C 字符串是 a `char *`，`==`并将比较指针。

C 标准库提供了用于比较 C 字符串的函数，例如：[`strcmp`](http://www.cplusplus.com/reference/clibrary/cstring/strcmp/)、 just `#include <string.h>`。

# c# - C#-位图到字节数组

> ID：12645705
> 
> 赞同：3
> 
> 时间：2012-09-28T18:50:31.077
> 
> 标签：c#, asp.net, wpf, winforms

我有一种方法可以从面板中保存图像。此方法使用 Bitmap 类。我希望我的方法应该返回图像的字节数组。

```
 private byte[] SaveImage()
    {
        byte[] byteContent = null;
        using (Bitmap bitmap = new Bitmap(500, 500))
        {
            using (Graphics g = Graphics.FromImage(bitmap))
            {
                Rectangle rectangle = myPanel.Bounds;
                Point sourcePoints = myPanel.PointToScreen(new Point(myPanel.ClientRectangle.X, myPanel.ClientRectangle.Y));
                g.CopyFromScreen(sourcePoints, Point.Empty, rectangle.Size);
            }

            string fileName = @"E:\\MyImages.Jpg";
            bitmap.Save(fileName, System.Drawing.Imaging.ImageFormat.Jpeg);
        }
        return byteContent;
    } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-28T18:56:17.643

您需要使用 MemoryStream 将位图序列化为图像格式并获取字节；

```
using (Bitmap bitmap = new Bitmap(500, 500))
{
    using (Graphics g = Graphics.FromImage(bitmap))
    {
        ...
    }

    using (var memoryStream = new MemoryStream())
    {
        bitmap.Save(memoryStream, System.Drawing.Imaging.ImageFormat.Jpeg);
        return memoryStream.ToArray();
    }
} 
```

有[多种输出格式可供选择，您可能需要 Bmp 或 MemoryBmp](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.imageformat.aspx)。

# maven - Maven Central Repo 的更新间隔

> ID：12645707
> 
> 赞同：0
> 
> 时间：2012-09-28T18:50:40.047
> 
> 标签：maven

对 Maven 的经验为零，我正在一个项目上运行 mvn clean install，这是我得到的错误：

```
[ERROR] Failed to execute goal on project dnasequencing.CompaNY.com: Could not resolve dependencies for project com.CompaNY.dnasequencing:dnasequencing.

CompaNY.com:war:1.0-SNAPSHOT: The following artifacts could not be resolved: dsr-kepler:dsr-kepler:jar:0.0.1-SNAPSHOT, dsr-parser:dsr-parser:jar:0.0.1-
SNAPSHOT: Failure to find dsr-kepler:dsr-kepler:jar:0.0.1-SNAPSHOT in http://repo1.maven.org/maven2/ was cached in the local repository, resolution 
will not be reattempted until the update interval of Maven_Central_Repo has elapsed or updates are forced -> [Help 1] 
```

基于这些错误消息，我应该从什么出发点来查找问题所在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T20:00:47.093

您可以强制 Maven 使用该`-U`标志更新快照。

至于出了什么问题，您可以随时使用浏览器查看实际的 Maven 网站，看看依赖项是否确实存在。

[http://search.maven.org/](http://search.maven.org/)

如果依赖项未托管在 Maven 中心，那么它似乎是一个本地依赖项，您必须将其安装在本地缓存中（`mvn clean install`从该项目运行）。

# c# - 如何创建图像标签？

> ID：12645711
> 
> 赞同：0
> 
> 时间：2012-09-28T18:50:58.123
> 
> 标签：c#, asp.net, image, printing, tiff

我具有以下功能，可让我遍历多页单 tiff 文件中的每一页。

```
// This function will iterate all pages, one at a time. //

 protected void PrintAll_Click(object sender, EventArgs e)
 {
    // counts number of pages in the fax document.//
    int number = _FaxPages.Count;

    // for loop to iterate through each page. //
    for (int i = 0; i < number; i++)
    {
        string _FaxId = Page.Request["FaxId"];

        _PageIndex = i;

        imgFax.ImageUrl = "ShowFax.ashx?n=" + _FaxId + "&f=" + _PageIndex + "&mw=750";

        PrintAll.Attributes.Add("onclick", "return printing()");             
    }
} 
```

我想知道如何在 for 循环中动态创建单独的图像标签……这样我就可以使用这些图像来打印 tiff 文件中的所有页面。

现在如果我在我的 javascript 中使用 window.print().. 它会打印整个网页以及按钮、链接、文本框、复选框等。我只需要能够打印传真文档中的图像这是一个具有多页（帧）的单个 TIFF 文件。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:58:09.963

您应该创建一个用于打印的备用样式表。

```
<link rel="stylesheet" href="print.css" type="text/css" media="print" /> 
```

在您的情况下，您可以隐藏所有元素并仅显示`img`标签。这似乎非常具体，因此可能只在此页面上创建`print.fax.css`并使用它。

# iphone - 无法完全象征 iOS 崩溃日志

> ID：12645714
> 
> 赞同：8
> 
> 时间：2012-09-28T18:51:05.097
> 
> 标签：iphone, ios, xcode, symbolicatecrash, symbolicate

我可能已经阅读了超过 20 篇关于这个主题的文章和论坛帖子，但我仍然无法让它发挥作用。

我的应用程序似乎象征性很好，但我不能象征性系统调用，这是我收到的大多数崩溃日志似乎崩溃的地方。

我努力了：

*   多个版本的 Xcode
*   使用 GitHub 上已修补的 symbolicatecrash 脚本
*   使用 mdimport 导入应用存档和 Xcode 应用
*   将运行 iOS 6 的 iPad 连接到 Xcode 以便它可以扫描它（查看 Xcode 包内部会发现 DeviceSupport 目录中名为“6.0 (10A403)”的文件夹，这是 iOS 6 的最终版本）
*   将崩溃日志导入 Xcode。它失败了，没有错误。使其导入的唯一方法是从另一个日志中复制 Incident Identifier 和 CrashReporterKey 字段，但它仍然无法符号化系统调用。

为什么这不起作用？其他人如何设法让它发挥作用？（注：这个问题我已经有很久了，所以跟iOS 6和Xcode 4.5的新版本无关。）

脚本输出充满了很多这样的行：

```
Searching in Spotlight for dsym with UUID of f167dacec44b3a86a8eee73400ff7a83
Running mdfind "com_apple_xcode_dsym_uuids == F167DACE-C44B-3A86-A8EE-E73400FF7A83"
@dsym_paths = (  )
@exec_names = (  )
Did not find executable for dsym
## Warning: Can't find any unstripped binary that matches version of /usr/lib/system/libsystem_kernel.dylib 
```

我正在使用以下终端命令：

```
/Applications/Xcode/Xcode4.5.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/PrivateFrameworks/DTDeviceKit.framework/Versions/A/Resources/symbolicatecrash -v ~/Desktop/My\ App.crash /Users/me/Library/Developer/Xcode/Archives/2012-07-23/My\ App\ 1.1.6\ 7-23-12\ 11.20\ AM.xcarchive/Products/Applications/My\ App.app 
```

这会产生以下输出：

```
Incident Identifier: [TODO]
CrashReporter Key:   [TODO]
Hardware Model:      iPad2,1
Process:         My App [393]
Path:            /var/mobile/Applications/E2A55086-4318-4A18-803D-60C8F02A7524/My App.app/My App
Identifier:      com.company.MyApp
Version:         1160
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-09-28 17:42:33 +0000
OS Version:      iPhone OS 6.0
Report Version:  104

Exception Type:  SIGSEGV
Exception Codes: SEGV_ACCERR at 0x9
Crashed Thread:  0

Thread 0 Crashed:
0   libobjc.A.dylib                     0x399625b0 0x3995f000 + 13744
1   UIKit                               0x380cc781 0x37f98000 + 1263489
2   UIKit                               0x37fb2183 0x37f98000 + 106883
3   UIKit                               0x3806039f 0x37f98000 + 820127
4   UIKit                               0x37f9fc19 0x37f98000 + 31769
5   UIKit                               0x380b9be9 0x37f98000 + 1186793
6   UIKit                               0x380b950b 0x37f98000 + 1185035
7   UIKit                               0x380b8d31 0x37f98000 + 1183025
8   UIKit                               0x380803dd 0x37f98000 + 951261
9   UIKit                               0x3826d479 0x37f98000 + 2970745
10  UIKit                               0x37fa4837 0x37f98000 + 51255
11  UIKit                               0x37fa329b 0x37f98000 + 45723
12  UIKit                               0x37fae1ef 0x37f98000 + 90607
13  UIKit                               0x37faddbb 0x37f98000 + 89531
14  UIKit                               0x37f9b809 0x37f98000 + 14345
15  UIKit                               0x37f9b123 0x37f98000 + 12579
16  GraphicsServices                    0x39b245a3 0x39b1e000 + 26019
17  GraphicsServices                    0x39b241d3 0x39b1e000 + 25043
18  CoreFoundation                      0x37a05173 0x3796e000 + 618867
19  CoreFoundation                      0x37a05117 0x3796e000 + 618775
20  CoreFoundation                      0x37a03f99 0x3796e000 + 614297
21  CoreFoundation                      0x37976ebd 0x3796e000 + 36541
22  CoreFoundation                      0x37976d49 0x3796e000 + 36169
23  GraphicsServices                    0x39b232eb 0x39b1e000 + 21227
24  UIKit                               0x37fef301 0x37f98000 + 357121
25  My App                           0x00002ecf main (main.m:14)

(...removed for brevity...)

Thread 0 crashed with ARM (Native) Thread State:
    r0: 0x00309420     r1:      0x398cac29     r2:      0x38428185     r3:      0x3cab85fc
    r4: 0x00000001     r5:      0x38428185     r6:      0x0000007c     r7:      0x2fdfdc90
    r8: 0x00112f20     r9:      0x0e632b0a    r10:      0x398c9d92    r11:      0x3ccc4e8c
   r12: 0x3cc28d64     sp:      0x2fdfdc7c     lr:      0x380cc7cf     pc:      0x399625b0

Binary Images:
0x1000 - 0x2d000  My App armv7 <8c376a0dd06f391c8a2241924a496b72> /var/mobile/Applications/E2A55086-4318-4A18-803D-60C8F02A7524/My App.app/My App
0x3578a000 - 0x3594e000  Foundation armv7 <2e1ac190c4f837e2a1059043dd7b1c63> /System/Library/Frameworks/Foundation.framework/Foundation
0x37f98000 - 0x384ec000  UIKit armv7 <98789fe7c21b3fe0bf5c0bb36648147f> /System/Library/Frameworks/UIKit.framework/UIKit
0x34166000 - 0x3429f000  CoreGraphics armv7 <903960bfcfe93adb943752851f88491e> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x389e6000 - 0x38a6c000  MessageUI armv7 <acd711b4e9cb3bdba768a884c4d6976a> /System/Library/Frameworks/MessageUI.framework/MessageUI
0x39182000 - 0x391b6000  CoreMIDI armv7 <9c1e141eaab43c44bef50146804890f2> /System/Library/Frameworks/CoreMIDI.framework/CoreMIDI
0x39b2a000 - 0x39b6a000  SystemConfiguration armv7 <44d84d23d10f344c90b4d9e9611ec976> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x327bb000 - 0x32807000  libstdc++.6.dylib armv7 <55a7612b28c43cfcad7089b688591b80> /usr/lib/libstdc++.6.dylib
0x334df000 - 0x334e0000  libSystem.B.dylib armv7 <f2cad3bd15f63f448a9c5be732c65819> /usr/lib/libSystem.B.dylib
0x384fa000 - 0x384fb000  libgcc_s.1.dylib armv7 <b25697291f6237feb3458df23485a759> /usr/lib/libgcc_s.1.dylib
0x3796e000 - 0x37aa1000  CoreFoundation armv7 <e30fc309df7b3c9f8ac57f0f6047d65f> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x3995f000 - 0x39a5e000  libobjc.A.dylib armv7 <5224e803eca737a4b2c6451d136b3d28> /usr/lib/libobjc.A.dylib
0x34b24000 - 0x34c6e000  libicucore.A.dylib armv7 <0253932c1b9038a0849ef73c38e076ca> /usr/lib/libicucore.A.dylib
0x37c1d000 - 0x37ccb000  libxml2.2.dylib armv7 <ef245c0afc113f54b6f30921671edab2> /usr/lib/libxml2.2.dylib
0x391bb000 - 0x391c8000  libz.1.dylib armv7 <a3bba3842596315a81aa171a8bbda7b5> /usr/lib/libz.1.dylib
0x37678000 - 0x3773e000  CFNetwork armv7 <3e973794a4d13428bb974edcb2027139> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x3871b000 - 0x3874a000  Security armv7 <be87724ccad837479efd45ca9f2c6b2c> /System/Library/Frameworks/Security.framework/Security
0x32835000 - 0x3287f000  IOKit armv7 <c4786e65ac913839b1bb3b85a9c951fa> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x335c4000 - 0x335db000  libCRFSuite.dylib armv7 <9b3fd56781103f209be2c43e48c1efc9> /usr/lib/libCRFSuite.dylib
0x32899000 - 0x3289a000  liblangid.dylib armv7 <a04b639c18593885bd81bfa623a6f07c> /usr/lib/liblangid.dylib
0x39937000 - 0x39944000  GenerationalStorage armv7 <74d50f4c8d243a35ad3ae89d85f2793a> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x360cf000 - 0x360e3000  libc++abi.dylib armv7 <c5a5f03138353747b539e620ef2bb5c0> /usr/lib/libc++abi.dylib
0x33e05000 - 0x33e09000  libcache.dylib armv7 <e08b913e17753180b91728a8bd5dda7b> /usr/lib/system/libcache.dylib
0x3b84e000 - 0x3b855000  libcommonCrypto.dylib armv7 <690aaa493b5c3f9582499f174adf4964> /usr/lib/system/libcommonCrypto.dylib
0x3641d000 - 0x36420000  libcompiler_rt.dylib armv7 <7add7c91a2673641b0c5f0433a203da6> /usr/lib/system/libcompiler_rt.dylib
0x35e86000 - 0x35e8c000  libcopyfile.dylib armv7 <15aa2c3c8d523273913d4fc6717d3b7c> /usr/lib/system/libcopyfile.dylib
0x3524d000 - 0x3526b000  libdispatch.dylib armv7 <4abccf75caf33fa5a0c6037b2e1c5f41> /usr/lib/system/libdispatch.dylib
0x3928a000 - 0x3928c000  libdnsinfo.dylib armv7 <6c912cedc1e938ad914dfce91a529b68> /usr/lib/system/libdnsinfo.dylib
0x389e4000 - 0x389e6000  libdyld.dylib armv7 <3a149b4730663b1ea84e4a0a68ccc689> /usr/lib/system/libdyld.dylib
0x36b70000 - 0x36b71000  libkeymgr.dylib armv7 <8a2e3a8fdf9335e2867a33e2d1a9baf8> /usr/lib/system/libkeymgr.dylib
0x37b3b000 - 0x37b41000  liblaunch.dylib armv7 <021ff140d6003f3281dfa29b79fa9e6e> /usr/lib/system/liblaunch.dylib
0x33557000 - 0x3355b000  libmacho.dylib armv7 <2a9fe0b48f473d0f8fe2bf076cd12753> /usr/lib/system/libmacho.dylib
0x3630f000 - 0x36311000  libremovefile.dylib armv7 <6a0dd04f0710329b9c1722db2235f5c3> /usr/lib/system/libremovefile.dylib
0x32791000 - 0x32792000  libsystem_blocks.dylib armv7 <993c9bfe8bf031548b9ddba63cc17015> /usr/lib/system/libsystem_blocks.dylib
0x34fae000 - 0x35035000  libsystem_c.dylib armv7 <d45dc8901531343caf9b7e703d3eba50> /usr/lib/system/libsystem_c.dylib
0x37acb000 - 0x37ad2000  libsystem_dnssd.dylib armv7 <6c1c1aaf9a3537d7ada4b519d14da7ab> /usr/lib/system/libsystem_dnssd.dylib
0x34627000 - 0x34640000  libsystem_info.dylib armv7 <be3d5625aed733ffb2d53400655fe110> /usr/lib/system/libsystem_info.dylib
0x39a7f000 - 0x39a96000  libsystem_kernel.dylib armv7 <f167dacec44b3a86a8eee73400ff7a83> /usr/lib/system/libsystem_kernel.dylib
0x36218000 - 0x36235000  libsystem_m.dylib armv7 <7b2a25c750063de480f6a691f716b9d7> /usr/lib/system/libsystem_m.dylib
0x338b3000 - 0x338c2000  libsystem_network.dylib armv7 <d0fb0eda6cb53a4da859d598c59e7522> /usr/lib/system/libsystem_network.dylib
0x3aab0000 - 0x3aab8000  libsystem_notify.dylib armv7 <6e39f8511ecc3c3489829714eb6fde12> /usr/lib/system/libsystem_notify.dylib
0x34659000 - 0x3465b000  libsystem_sandbox.dylib armv7 <46cd200d99323aebbf6d81e5fb16424f> /usr/lib/system/libsystem_sandbox.dylib
0x37bd3000 - 0x37bd4000  libunwind.dylib armv7 <85e7546accc23ae1a973da4758512b7f> /usr/lib/system/libunwind.dylib
0x372d8000 - 0x372ee000  libxpc.dylib armv7 <9fbb123276823c2383fc34b7a55404d7> /usr/lib/system/libxpc.dylib
0x3358e000 - 0x335c4000  libcorecrypto.dylib armv7 <ebd023957d853fa8bd35309592e92dac> /usr/lib/system/libcorecrypto.dylib
0x3937c000 - 0x39402000  libsqlite3.dylib armv7 <759ca29f533a33e88a81fddc3364bf19> /usr/lib/libsqlite3.dylib
0x34b17000 - 0x34b24000  libbsm.0.dylib armv7 <e98708fbfa683df2a91d45dc765071a7> /usr/lib/libbsm.0.dylib
0x37ecb000 - 0x37f6c000  UIFoundation armv7 <795a2f216cc3379c95eb645c633cc527> /System/Library/PrivateFrameworks/UIFoundation.framework/UIFoundation
0x3b7d0000 - 0x3b7d5000  IOSurface armv7 <1f598a3806073bdaa906c51dccc9429e> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x3355b000 - 0x33563000  liblockdown.dylib armv7 <257ecb171a363e4298a63f72d7fffea2> /usr/lib/liblockdown.dylib
0x34d56000 - 0x34d5d000  MobileKeyBag armv7 <a81d768a49cf37a1a111594d39cea3fe> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x3a9b5000 - 0x3a9c5000  CoreVideo armv7 <092f3aa965803a1aaea69af2ac5143f5> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x36420000 - 0x3645f000  VideoToolbox armv7 <bfc75ceef01e366e8335949abf037d4b> /System/Library/Frameworks/VideoToolbox.framework/VideoToolbox
0x3ab6e000 - 0x3ab9c000  MobileAsset armv7 <23e6b8ea85dd3dea84d8c295b4777753> /System/Library/PrivateFrameworks/MobileAsset.framework/MobileAsset
0x39ae7000 - 0x39af5000  TelephonyUtilities armv7 <0e07c7484ca63c189fd19790eb48bb28> /System/Library/PrivateFrameworks/TelephonyUtilities.framework/TelephonyUtilities
0x35d6f000 - 0x35d8e000  WebBookmarks armv7 <012ed1a1f54a3d6d836e2836781d4f73> /System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks
0x34583000 - 0x3459b000  BackBoardServices armv7 <e3eb5191f83339a1abad4c332c1b9d83> /System/Library/PrivateFrameworks/BackBoardServices.framework/BackBoardServices
0x33f13000 - 0x33f1b000  XPCObjects armv7 <5bc4f7282e9d3945a6c1885217670667> /System/Library/PrivateFrameworks/XPCObjects.framework/XPCObjects
0x369a5000 - 0x36a5b000  CoreImage armv7 <ba744c4f6a1c3c0598de9d429022093a> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x39a96000 - 0x39ab0000  DictionaryServices armv7 <e1f8d258d02c344cb0d17cec31818d3f> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x39b1e000 - 0x39b2a000  GraphicsServices armv7 <c5879083e8693aba827c78a32abe2391> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x3504c000 - 0x35225000  ImageIO armv7 <fdfa8aa6307235b29435e5c8f6bc9819> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x371c2000 - 0x372d8000  QuartzCore armv7 <d96571a6986c3012b315cb860f4d65ca> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x37d5c000 - 0x37d6e000  SpringBoardServices armv7 <22255260ec6436d19176696422441c40> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x38833000 - 0x3886f000  AppSupport armv7 <74ed50d2f7d23ce696b029dd817749c0> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x34520000 - 0x34583000  CoreText armv7 <4a0bece315e9316fa1aa1b5923740f55> /System/Library/Frameworks/CoreText.framework/CoreText
0x35558000 - 0x355b2000  MobileCoreServices armv7 <d831f1f9285535acac5035a29d84aaaf> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x3abae000 - 0x3ac8b000  WebKit armv7 <73fa195f63bc32c29060ac0fecabdca6> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x39b7c000 - 0x3a4ac000  WebCore armv7 <cd34aedf72653d1dbef6b14fdfd0c053> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x34dae000 - 0x34e23000  ProofReader armv7 <cc89a352199a393ba0e46af69e670ef9> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x32892000 - 0x32899000  libAccessibility.dylib armv7 <9e8bfe02e370375ea8439ab895528982> /usr/lib/libAccessibility.dylib
0x35d65000 - 0x35d66000  Accelerate armv7 <22bee3e96cbc3538bfc50ca5be618cc0> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x346bc000 - 0x346e5000  PrintKit armv7 <a8ef6136b9773d42ac20f7eb54279039> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x360fb000 - 0x36108000  libMobileGestalt.dylib armv7 <0338ce49444332ec88cfc45c624bb39b> /usr/lib/libMobileGestalt.dylib
0x3282f000 - 0x32835000  IOMobileFramebuffer armv7 <3a351ca1d4ae3146a787f3e13564294b> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x3602d000 - 0x3602f000  CoreSurface armv7 <b3f9d4e8dd803a48b88c58a0663d92a3> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x386cc000 - 0x38717000  libc++.1.dylib armv7 <a361a382693032b9bdfb2860033b3024> /usr/lib/libc++.1.dylib
0x334ca000 - 0x334d2000  OpenGLES armv7 <e035b741746c316dba8f1e59a568bf17> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x3b6c9000 - 0x3b6ce000  libGFXShared.dylib armv7 <6a8f59f89218372d9f24c4193a179008> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x35d1c000 - 0x35d20000  AggregateDictionary armv7 <20bde7d58a573f2fbd5d6458d4e50ef8> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x3796c000 - 0x3796e000  IOAccelerator armv7 <de8af6be681832008d180d7424d55f0d> /System/Library/PrivateFrameworks/IOAccelerator.framework/IOAccelerator
0x33519000 - 0x33557000  libGLImage.dylib armv7 <7db25f3d55b93f31868e37326fba1e57> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x37b45000 - 0x37b46000  libCVMSPluginSupport.dylib armv7 <1fd63e8305ab3ca190b1ef6ab2555f9d> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x3aab8000 - 0x3ab1e000  CoreMedia armv7 <d227864b757e3a7ea5d7d96dcbb948fe> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x33eee000 - 0x33ef4000  CrashReporterSupport armv7 <7bde3532f2953f3894eb725379575926> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x35392000 - 0x353e9000  CoreAudio armv7 <a3a2eb3a29443b42a23aa8ecb1232846> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x34733000 - 0x34789000  CoreTelephony armv7 <54708e241c5c3e2297c2fca0d685497d> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x36023000 - 0x3602d000  AssetsLibraryServices armv7 <e51cbfefefbc30b6b47d99739123033e> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x39a77000 - 0x39a7b000  MobileInstallation armv7 <e6b6ae9d4f5f3831a40fcc370afc1429> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x3b75b000 - 0x3b780000  Bom armv7 <c76b4156e0463ecb922608d44c126d86> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x39a7b000 - 0x39a7f000  MobileSystemServices armv7 <6edd9c74c5a73c33809152446abe1538> /System/Library/PrivateFrameworks/MobileSystemServices.framework/MobileSystemServices
0x3ab9c000 - 0x3aba6000  libbz2.1.0.dylib armv7 <5258dce78afc3fd7934a5674b92ad785> /usr/lib/libbz2.1.0.dylib
0x39431000 - 0x39434000  TCC armv7 <f641dd0500fa3f0087d93da665ea84b8> /System/Library/PrivateFrameworks/TCC.framework/TCC
0x3685f000 - 0x368ac000  IMFoundation armv7 <b1a5542b977e3ae683f40ee5755d5b32> /System/Library/PrivateFrameworks/IMFoundation.framework/IMFoundation
0x34d4e000 - 0x34d54000  CommonUtilities armv7 <cb484bdaf5003e4baa13f83bafff62a9> /System/Library/PrivateFrameworks/CommonUtilities.framework/CommonUtilities
0x35d20000 - 0x35d47000  libtidy.A.dylib armv7 <134c41c587fb33dca014bd525f68a0c7> /usr/lib/libtidy.A.dylib
0x336ad000 - 0x33854000  JavaScriptCore armv7 <6b14c224c0e0306aa9084679ec6a99d2> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x35a14000 - 0x35b53000  vImage armv7 <a7fd7fcd7041356db2ca297402ab6e8c> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x3367d000 - 0x3367e000  vecLib armv7 <66204595f7653ef29e5e26cb8629177a> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x34cf4000 - 0x34d4e000  libvDSP.dylib armv7 <ad4c53081a263f0d96f63b9a80f2ae91> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x32b2d000 - 0x32de3000  libLAPACK.dylib armv7 <dd6f3958c3d536d6be90836682d2ffee> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x32a49000 - 0x32b2d000  libBLAS.dylib armv7 <56d8e00447133cd89457deec007327cb> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x3605c000 - 0x3606e000  libvMisc.dylib armv7 <a3d025234d1a3880a0e5f87879633ee0> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x35227000 - 0x3524d000  OpenCL armv7 <f7706501012430fc94ed99006419fba9> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x3a52b000 - 0x3a93f000  FaceCoreLight armv7 <0cb7a12beb3d32c1abd1834be8328b7c> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x3a98f000 - 0x3a992000  libCoreVMClient.dylib armv7 <e57152bacb36350e8a023e0c1b540a0c> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x38812000 - 0x38833000  libxslt.1.dylib armv7 <7f6f63b31f333c41952f685fdd54a6cb> /usr/lib/libxslt.1.dylib
0x36a82000 - 0x36b70000  libiconv.2.dylib armv7 <faa5abb937e3306ab87c7f7c38315839> /usr/lib/libiconv.2.dylib
0x36da1000 - 0x36db7000  libresolv.9.dylib armv7 <e79b59a3406f34d9b37f8085955115ce> /usr/lib/libresolv.9.dylib
0x3ac8b000 - 0x3af12000  AudioToolbox armv7 <6a4804d0e35e362dbad6f047c25227ca> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x39357000 - 0x3935c000  FTClientServices armv7 <13aa63aa5e2e348ea289e0fd16585890> /System/Library/PrivateFrameworks/FTClientServices.framework/FTClientServices
0x36238000 - 0x362f3000  AddressBookUI armv7 <5c030d99a0113ceda2ae375d348e4cdb> /System/Library/Frameworks/AddressBookUI.framework/AddressBookUI
0x333f9000 - 0x334b3000  Message armv7 <c854843dec583b33a72a9fe047d20f0c> /System/Library/PrivateFrameworks/Message.framework/Message
0x37e66000 - 0x37ecb000  AddressBook armv7 <3c0d5a3207cf3771b0beb0cd8e8a6e12> /System/Library/Frameworks/AddressBook.framework/AddressBook
0x37b96000 - 0x37bd3000  DataAccess armv7 <bd40f7ec5a9c3df7b4a575fffc25c14f> /System/Library/PrivateFrameworks/DataAccess.framework/DataAccess
0x370e0000 - 0x37194000  EventKit armv7 <8dbff0bfcf833661827a76b9adb64d70> /System/Library/Frameworks/EventKit.framework/EventKit
0x38571000 - 0x3857c000  MailServices armv7 <f31a7844317a3f2484cffe092e9fd7c2> /System/Library/PrivateFrameworks/MailServices.framework/MailServices
0x345f0000 - 0x34627000  MIME armv7 <32427c81a9933c4796d1a37a88a3ac44> /System/Library/PrivateFrameworks/MIME.framework/MIME
0x3289a000 - 0x32965000  Celestial armv7 <1a048f93218d3551984b2d07e884694c> /System/Library/PrivateFrameworks/Celestial.framework/Celestial
0x39473000 - 0x39486000  DataAccessExpress armv7 <131d8cf4df333df3b8487ef93438e27c> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x35997000 - 0x359e4000  QuickLook armv7 <ac70bd1a745e3402b9bcd484f34c4203> /System/Library/Frameworks/QuickLook.framework/QuickLook
0x34aa8000 - 0x34aab000  MessageSupport armv7 <44d449b4959a33b99d4ab4a9cd161ee6> /System/Library/PrivateFrameworks/MessageSupport.framework/MessageSupport
0x37d6e000 - 0x37e55000  AVFoundation armv7 <23a8a62a06b03cbcbe7659918951c9f3> /System/Library/Frameworks/AVFoundation.framework/AVFoundation
0x3aa1d000 - 0x3aa96000  IMCore armv7 <552805a4634630bbaad2bc9d862d7196> /System/Library/PrivateFrameworks/IMCore.framework/IMCore
0x3277b000 - 0x32781000  Marco armv7 <755b00548c863f939bf1409f03f2b3ad> /System/Library/PrivateFrameworks/Marco.framework/Marco
0x3385b000 - 0x33899000  FTServices armv7 <aa7fe75a69d538b2a80efa63e3484b2a> /System/Library/PrivateFrameworks/FTServices.framework/FTServices
0x3a4d2000 - 0x3a52b000  ManagedConfiguration armv7 <9d006173bfcc3001b45c44b8e78833ed> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x36460000 - 0x36472000  Accounts armv7 <07b95faa96e73ffeb52694cbad7f3528> /System/Library/Frameworks/Accounts.framework/Accounts
0x360f6000 - 0x360f9000  OAuth armv7 <d3e2bc9ae64b31f0a89c52dc1c2797fc> /System/Library/PrivateFrameworks/OAuth.framework/OAuth
0x362f3000 - 0x36300000  AccountSettings armv7 <0b7524e9a8ef36bf9e9f6a5c445478af> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x35f00000 - 0x35f16000  libmis.dylib armv7 <3afeeea531013420af75315d8d6dd332> /usr/lib/libmis.dylib
0x35d47000 - 0x35d65000  PersistentConnection armv7 <8e4d21f987d4334e927222c28ff1130b> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x3a9fc000 - 0x3a9fe000  DataMigration armv7 <25f8874067393208acc083124bc3eb86> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x36a62000 - 0x36a67000  CertUI armv7 <7e4aee03dc3735559f1270e504d94f02> /System/Library/PrivateFrameworks/CertUI.framework/CertUI
0x33619000 - 0x3361d000  ActorKit armv7 <64235ea1a8b73d23a4a9836410424b6b> /System/Library/PrivateFrameworks/ActorKit.framework/ActorKit
0x36d58000 - 0x36d7c000  MobileSync armv7 <986186369add34f1be231f5a47d2fd2c> /System/Library/PrivateFrameworks/MobileSync.framework/MobileSync
0x392d9000 - 0x392f3000  Notes armv7 <b8fb864f5973319083f926d9a570734e> /System/Library/PrivateFrameworks/Notes.framework/Notes
0x37ada000 - 0x37b33000  CoreLocation armv7 <3235bde1608331bebc291891405896c6> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x36661000 - 0x3669d000  iCalendar armv7 <d5f593ead35b38a98d6cfd4a243e0172> /System/Library/PrivateFrameworks/iCalendar.framework/iCalendar
0x355b2000 - 0x35768000  CoreData armv7 <a42aa4f0f01833c390bc8c6c394dda1c> /System/Library/Frameworks/CoreData.framework/CoreData
0x37757000 - 0x37846000  GeoServices armv7 <6af26ce81030330b97122ba8c1deaaa2> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x37aa1000 - 0x37aaa000  ProtocolBuffer armv7 <359ccc7700c93d58adbbd74ecfda80d9> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x37889000 - 0x37899000  MobileDeviceLink armv7 <5c91ef875c5931a1a26e227ddfd7262d> /System/Library/PrivateFrameworks/MobileDeviceLink.framework/MobileDeviceLink
0x3b71f000 - 0x3b753000  AppleAccount armv7 <2af09d814a5a382192613b68b9327d49> /System/Library/PrivateFrameworks/AppleAccount.framework/AppleAccount
0x3853a000 - 0x3856b000  ContentIndex armv7 <25cc27c7fdac34e6ae5e057c048a3e21> /System/Library/PrivateFrameworks/ContentIndex.framework/ContentIndex
0x34ce1000 - 0x34cef000  ApplePushService armv7 <60dbc7ab243435e099e19bdd3fa83dbb> /System/Library/PrivateFrameworks/ApplePushService.framework/ApplePushService
0x3b8b7000 - 0x3bb3d000  MediaToolbox armv7 <a1df6dd0733233d3b1cba9cddf3991f6> /System/Library/Frameworks/MediaToolbox.framework/MediaToolbox
0x3691d000 - 0x369a5000  CoreMotion armv7 <537e5776244f3ef5a355f8fd14a72a22> /System/Library/Frameworks/CoreMotion.framework/CoreMotion
0x3afa3000 - 0x3b04f000  MediaControlSender armv7 <fba51e235adc368b8132db578723a8fa> /System/Library/PrivateFrameworks/MediaControlSender.framework/MediaControlSender
0x36bc5000 - 0x36c9e000  StoreServices armv7 <9da3466c9cf13402a9f0412065f0ada7> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x32965000 - 0x3296f000  MobileWiFi armv7 <43de6d03af0838f2a1eeec10d4149e9d> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x34da4000 - 0x34dac000  CaptiveNetwork armv7 <c1a469c6ca4a3718bef325ec0f4e1885> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x38acf000 - 0x38ae8000  EAP8021X armv7 <034c653573c233f08edf67e516d66097> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x33027000 - 0x331c0000  MediaPlayer armv7 <45ee55956c693d8cb16dc4c4e85075e4> /System/Library/Frameworks/MediaPlayer.framework/MediaPlayer
0x3a94a000 - 0x3a95e000  AirTraffic armv7 <b588b9fdc83d369db76f1ad5ebf2a4fa> /System/Library/PrivateFrameworks/AirTraffic.framework/AirTraffic
0x3447b000 - 0x344b6000  iTunesStore armv7 <4ff9158eb0583316b34506904b21a4f3> /System/Library/PrivateFrameworks/iTunesStore.framework/iTunesStore
0x33650000 - 0x3365b000  IAP armv7 <6703a23c7d263f33992f15c7f407b50a> /System/Library/PrivateFrameworks/IAP.framework/IAP
0x3857d000 - 0x386cc000  MusicLibrary armv7 <262f509dae9f3c128f25163a7029685b> /System/Library/PrivateFrameworks/MusicLibrary.framework/MusicLibrary
0x33ef4000 - 0x33efe000  MediaRemote armv7 <dbc251adcad43e72a31427f836a060cd> /System/Library/PrivateFrameworks/MediaRemote.framework/MediaRemote
0x342e1000 - 0x3435f000  HomeSharing armv7 <9126a007a413357b8c0275cc505cb197> /System/Library/PrivateFrameworks/HomeSharing.framework/HomeSharing
0x384fe000 - 0x3853a000  libCGFreetype.A.dylib armv7 <7a68e65e523030faa9d91478e939bc00> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x3874f000 - 0x3876b000  libRIP.A.dylib armv7 <6e5f3b4c18e137e0a464fe13095b7dab> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x39519000 - 0x39937000  TextInput armv7 <ee57be9a7f723604afa6f27f85ea8b1d> /System/Library/PrivateFrameworks/TextInput.framework/TextInput
0x3647d000 - 0x3662f000  libmecabra.dylib armv7 <b59b3ee949633384bf5612da5cc73781> /usr/lib/libmecabra.dylib
0x3d4f000 - 0x3d60000  Riven armv7 <08ac9e94f78e366dad2c70bd9ccdea11> /System/Library/TextInput/Riven.bundle/Riven
0x3730f000 - 0x3731a000  Librarian armv7 <ecff1ac52f8f39bf863edadde2092aeb> /System/Library/PrivateFrameworks/Librarian.framework/Librarian
0x3a962000 - 0x3a97b000  Ubiquity armv7 <70c63bf67cff31528bbd98dc9c67c7fe> /System/Library/PrivateFrameworks/Ubiquity.framework/Ubiquity
0x34640000 - 0x34659000  ChunkingLibrary armv7 <13652bd5c5ba3e6f98435e40e91684d9> /System/Library/PrivateFrameworks/ChunkingLibrary.framework/ChunkingLibrary
0x3876b000 - 0x38789000  CoreServicesInternal armv7 <0162575a2e8b35d2915faee400c2bf30> /System/Library/PrivateFrameworks/CoreServicesInternal.framework/CoreServicesInternal 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:54:44.887

只需将 .crash 文件拖入 Xcode 并单击“重新符号化”，我就可以对所有 iOS 方法进行符号化。但不是我自己的应用程序方法。

而且我怀疑是否有可能从 iOS6 开始正确符号化我自己的应用程序方法，因为对于每个单独的崩溃，“开始”方法都有不同的地址。它们曾经是相同的，并且使用 atos 总是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:41:37.990

如果您还没有尝试过，请将您的 Mac 升级到 OSX 10.8.2。我运行的*是*OSX 10.7.5，升级**后立即**解决了我的符号化问题。

我已经尝试了几乎**所有**方法来让我的崩溃日志具有象征意义。我以前从来没有遇到过问题，但是自从我查看崩溃日志以来已经过去了几个月；在那段时间的某个时候，我升级到了 Xcode 4.5.2。在我看来，Xcode 4.5.2 symbolicatecrash perl 脚本的某些内容在运行 OSX 10.7.5 的 Mac 上无法正常工作。在 symbolicatecrash 中，它调用 atos 对地址进行符号化；它找不到匹配的符号，即使我**知道**我有正确的 xcarchive。无论如何，如果您能负担得起 20 美元，请购买 OSX 10.8.2，希望这对您有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-09T02:47:19.447

只是对此进行了一点更新-我仍然无法在 Xcode 中获取日志来进行符号化（而且我现在已经将我的 Xcode 项目移动到网络驱动器上，我很确定我永远不会让它工作），但是我在 PLCrashReporter 1.2 中找到了足够好的解决方案。它可以在当地进行象征，虽然并不完美，但通常足够具体，可以让我深入研究这个问题。

[PLCrashReporter 1.2 符号选项](https://www.plcrashreporter.org/documentation/api/v1.2-beta1/group__enums.html#ga2fccc0cc55180dce6846a39a40c57ca8)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-05T19:34:33.000

如果您的 Xcode 中有存档和相应的崩溃日志，这非常简单。

1.  将您的设备连接到 mac
2.  转到 Xcode-> 窗口-> 设备
3.  在左侧面板上单击您的设备
4.  点击查看设备日志
5.  选择要符号化的日志。（或）如果您的系统上有崩溃日志文件，则单击左侧面板上的所有日志选项并将日志文件拖到左侧面板部分。
6.  右键单击选定的日志，然后单击重新符号化

# android - onclicklistener 在方法中不起作用

> ID：12645717
> 
> 赞同：1
> 
> 时间：2012-09-28T18:51:22.137
> 
> 标签：android, android-layout, onclicklistener

我必须将从数据库中查询的名称列表放入列表（不是列表视图）。我可以通过使用自定义视图膨胀线性布局来做到这一点。我创建了一个新类，其中有一个使用自定义视图扩展布局的方法。在那种方法中，我实现了一个 onclicklistener，但它不起作用。代码：

```
public static void showPeopleInvitedList(Context context, View view, final LinearLayout layout) {
    dbAdapter = new DatabaseHandler(context);
    String[] ENTRIES = dbAdapter.getItems("user_friend_name");
    for (int i = 0; i < 5; i++ ) {
        LayoutInflater inflator = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        view = inflator.inflate(R.layout.people, layout, false);

        view.setId(layout.getChildCount() + 1);
        params = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);

        view.setLayoutParams(params);
        view.setOnClickListener(myClickListener);
        layout.addView(view, 0, params);    

    }

    myClickListener = new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Log.d("click", "clicked");
            layout.removeView(v);
        }
    };
} 
```

但是 onclicklistener 不起作用。我在主要活动中调用此方法。此方法在扩展 LinearLayout 的类中 有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:12:10.427

您尚未实例化 myClickListener，因此您将视图设置`onClickListener`为`null`. 将其初始化移动到`for`循环之前。

```
public static void showPeopleInvitedList(Context context, View view, final LinearLayout layout) {
    dbAdapter = new DatabaseHandler(context);
    String[] ENTRIES = dbAdapter.getItems("user_friend_name");

    myClickListener = new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Log.d("click", "clicked");
            layout.removeView(v);
        }
    };
    for (int i = 0; i < 5; i++ ) {
        LayoutInflater inflator = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        view = inflator.inflate(R.layout.people, layout, false);

        view.setId(layout.getChildCount() + 1);
        params = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);

        view.setLayoutParams(params);
        view.setOnClickListener(myClickListener);
        layout.addView(view, 0, params);    

    } 
```

}

# angularjs - AngularJS 中的模块化是如何减轻的？

> ID：12645720
> 
> 赞同：18
> 
> 时间：2012-09-28T18:51:26.363
> 
> 标签：angularjs

我一直在使用 AngularJS 的种子应用程序，我注意到应用程序的大多数依赖项（控制器、指令、过滤器、服务）都是预先加载的。我想知道如何将 Angular 应用程序模块化为更小的字节，除非需要，否则不会加载依赖项。

例如，如果我有一个带有购物车的大型应用程序，添加/编辑送货地址、搜索结果、产品详细信息、产品列表等......购物网站上的用户可能永远不会遇到这些视图中的任何一个，但看起来就像（来自种子应用程序）这些所有视图的代码都是在启动时加载的。

AngularJS 中的模块化是如何减轻的？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-28T19:40:13.237

这个关于模块化的问题在 SO 和 google 小组中经常被问到。我不是核心团队的一员，但我的理解如下：

1.  您可以通过包含它们（ngInclude）或在指令/路由中引用它们来轻松地按需加载部分（HTML/模板片段）。所以至少你不需要预先下载所有的部分（虽然你可能想这样做，请参阅这里的另一个问题：[有没有办法让 AngularJS 在开始时而不是在需要时加载部分？](https://stackoverflow.com/questions/12346690)）

2.  谈到 JavaScript（控制器、指令、过滤器等 - 基本上是在 AngularJs 模块中定义的所有内容），我相信截至今天，AngularJS 中不支持按需加载模块。核心团队关闭的这个问题就是一个证据：[https ://github.com/angular/angular.js/issues/1382](https://github.com/angular/angular.js/issues/1382)

缺少 AngularJS 模块的按需加载可能听起来像是一个很大的限制，但是：

*   说到性能，在衡量事情之前，我们无法确定；所以我建议简单地衡量这对你来说是否是一个真正的问题
*   通常用 AngularJS 编写的代码非常小，我的意思是，非常小。这个小型代码库被压缩和压缩可能会导致一个非常小的工件下载

现在，由于这个问题经常出现，我确信 AngularJS 团队已经意识到了这一点。事实上，我最近看到了一些实验性提交（[https://github.com/mhevery/angular.js/commit/1d674d5bfc47d18dc4a14ee0feffe4d1f77ea23b#L0R396](https://github.com/mhevery/angular.js/commit/1d674d5bfc47d18dc4a14ee0feffe4d1f77ea23b#L0R396)）表明支持可能正在进行中（或者至少有一些实验）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-21T18:57:06.633

我最近一直在玩 require 模块和 angular，并且我已经实现了部分和控制器的延迟加载。

无需对 Angular 源代码（版本 1.0.2）进行任何修改即可轻松完成。

存储库：[https](https://github.com/matys84pl/angularjs-requirejs-lazy-controllers) ://github.com/matys84pl/angularjs-requirejs-lazy-controllers 。

还有一个使用 Charles Fulnecky 制作的 yepnope ( [https://github.com/cmelion/angular-yepnope](https://github.com/cmelion/angular-yepnope) ) 的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-21T20:43:38.600

我们需要的只是将此代码放入我们的应用程序配置中，如下所示：

```
 application.config [
    "$provide", "$compileProvider", "$controllerProvider", "$routeProvider"
    , ($provide, $compileProvider, $controllerProvider, $routeProvider) ->

      application.controller = $controllerProvider.register
      application.provider = $provide.provider
      application.service = $provide.service
      application.factory = $provide.factory
      application.constant = $provide.constant
      application.value = $provide.value
      application.directive = -> $compileProvider.directive.apply application, arguments

      _when = $routeProvider.when

      $routeProvider.when = (path, route) ->
        loaded = off
        route.resolve = new Object unless route.resolve
        route.resolve[route.controller] = [
          "$q",
          ($q) ->

            return loaded if loaded

            defer = $q.defer()

            require [
              route.controllerUrl
            ], (requiredController) ->
              defer.resolve()
              loaded = on

            defer.promise
        ]

        _when.call $routeProvider, path, route 
```

为了使用，在我们需要的模块中添加我们的组件（提供者、常量、指令等）。像那样：

```
define [
  "application"
  "services/someService"
], (
  application
) ->

  application.controller "chartController", [
    "$scope", "chart", "someService"
    , ($scope, chart, someService) ->

      $scope.title = chart.data.title

      $scope.message = chart.data.message

  ] 
```

someService.coffee 文件：

```
define [
  "application"
], (
  application
) ->

  application.service "someService", ->

    @name = "Vlad" 
```

并将我们的控制器路径添加到 controllerUrl 以进行路由：

```
 application.config [
    "$routeProvider"
    , ($routeProvider) ->

      $routeProvider

        .when "/table",
          templateUrl: "views/table.html"
          controller: "tableController"
          controllerUrl: "controllers/tableController"
          resolve:
            table: ($http) ->
              $http
                type: "GET"
                url: "app/data/table.json"
  ] 
```

tableController.coffee 文件：

```
define [
  "application"
  "services/someService"
], (
  application
) ->

  application.controller "tableController", [
    "$scope", "table"
    , ($scope, table) ->

      $scope.title = table.data.title

      $scope.users = table.data.users

  ] 
```

并且所有组件在我们需要的地方都有“惰性”负载。

# c++ - 对结构向量进行排序

> ID：12645725
> 
> 赞同：0
> 
> 时间：2012-09-28T18:51:48.923
> 
> 标签：c++, sorting, vector, struct

我有一个结构向量，我需要有关如何根据其中一个值对它们进行排序的帮助，如果这两个值相同，则根据另一个参数对其进行排序。

这与其他问题类似，但有更多问题。

我要实现的是基于扫描线的多边形填充算法。

我构建了活动边列表，但随后我需要根据每个结构对象中的 x 值对其进行排序。如果 x 值相同，则需要根据每个结构对象的斜率的倒数对它们进行排序。

这是具有覆盖运算符 < 的结构定义，用于正常排序：

```
struct Bucket
{
    // Fields of a bucket list
    int ymax, x, dx, dy, sum;

    // Override the < operator, used for sorting based on the x value
    bool operator < (const Bucket& var) const
    {
        // Check if the x values are the same, if so
        // sort based on the ivnerse of the slope (dx/dy)
        /*if(x == var.x)
            return (dx/dy) < (var.dx/var.dy);
        else*/
            return (x < var.x);
    }
}; 
```

我注释掉了 if then else 语句，因为它确实可以编译，但会导致浮点错误并且程序崩溃。确切的错误是：“浮点异常（核心转储）”

我还尝试将每个部门转换为 (int) 但这也不起作用。

我的问题：有没有办法进行类似于我的排序，或者我应该编写自己的排序方法。

如果我应该制作自己的排序方法，请提供一个链接或一些可以提供帮助的简单方法。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T19:00:10.023

您应该实现双除法，因为对于整数，例如，当您有 5/6 时，它会导致 0，而我们知道，除以 0 是不可能的。这就是程序崩溃的原因。所以将结构的成员更改为双精度。然后你应该注意一些精度问题，但至少假设你不允许 dy 的值为 0，程序不会崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-20T11:23:25.520

您可以使用覆盖不同运算符的**元组进行字典比较（** [http://en.cppreference.com/w/cpp/utility/tuple/operator_cmp](http://en.cppreference.com/w/cpp/utility/tuple/operator_cmp)）

```
typedef std::tuple<int, int, int, int, int> Bucket; 
```

但是将结构更改为元组有点烦人。您可以使用**tie**为您制作元组。

```
bool operator < (const Bucket& var) const
{
    std::tie(x, dx/dy) < std::tie(var.x, var.dx/var.dy);
} 
```

但是，此解决方案**无法编译**，因为它适用于引用。

```
bool operator < (const Bucket& var) const
{
    int slope = dx/dy;
    int var_slope = var.dx/var.dy;  
    std::tie(x, slope) < std::tie(var.x, var_slope);
} 
```

这不是最有效的解决方案，但可读性相当好。当然，在这个例子中你仍然需要除以 0。

# objective-c - Apple LLVM 编译器是否优化了重复的属性访问？

> ID：12645730
> 
> 赞同：4
> 
> 时间：2012-09-28T18:52:00.750
> 
> 标签：objective-c, optimization, automatic-ref-counting, compiler-optimization

考虑这个 Objective-C 代码（启用 ARC）：

```
[self.aProperty sendMessage];
if (self.aProperty)
{
    [self doSomethingWithProperty:self.aProperty];
} 
```

我想知道将代码重写为下面的片段是否会更快（在发布版本中）：

```
MyPropertyClass* myProperty = self.aProperty;
[myProperty sendMessage];
if (myProperty)
{
    [self doSomethingWithProperty:myProperty];
} 
```

问题是 Apple LLVM Compiler 3.0 是否能够优化对属性 getter 的重复访问？如果属性是非原子的，有什么区别吗？

如果我不得不猜测，我会说编写下面的代码更快，因为编译器不能保证 self.aProperty 在这些行中不会改变。我对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T19:02:10.040

比原子与非原子的问题更重要的是，不能保证 getter 是纯的或幂等的。多次调用 getter 可能不等于调用一次。例如，`someNSEnumerator.nextObject`每次调用它都会返回不同的结果。所以这种优化在一般情况下是不可能的。

但是，关于“更快”，我怀疑任何一个代码片段都会明显更快。正确的答案是进行分析，看看这段代码是否经常运行，是否值得麻烦。

# objective-c - 从 Objective-C 调用 C 函数会丢失传入的值

> ID：12645738
> 
> 赞同：0
> 
> 时间：2012-09-28T18:52:10.377
> 
> 标签：objective-c, c, arrays, floating-point

我试图保持我的表格行高的 float[] 。我在这里找到了一个很好的类：[http](http://forums.macnn.com/t/224809/nsmutablearray-vs-a-plain-c-array-for-storing-floats) ://forums.macnn.com/t/224809/nsmutablearray-vs-a-plain-c-array-for-storing-floats 。

问题是，一旦调用了 C 函数（位于另一个文件中），我传入的浮点数变为 0。这种情况每次都会发生，无论浮点值如何。

C函数：

```
typedef struct
{
    float *array;
    int count;
} floatArray;

BOOL AddFloatToArray ( floatArray *farray, float newFloat )
{
    if ( farray->count > 0 )
    {
        // The array is already allocated, just enlarge it by one
        farray->array = realloc ( farray->array, ((farray->count + 1) * sizeof (float)) );

        // If there was an error, return NO
        if (farray->array == NULL)
            return NO;
    }
    else
    {
        // Allocate new array with the capacity for one float
        farray->array = (float *)malloc ( sizeof (float) );

        // If there was an error, return NO
        if (farray->array == NULL)
            return NO;
    }
    printf("Adding float to array %f\n", newFloat);
    farray->array[farray->count] = newFloat;
    farray->count += 1;
    printArrayContents(farray);
    return YES;
}

int printArrayContents( floatArray* farray)
{
    printf("Printing array contents\n");
    for(int j=0; j < farray->count; j++)
        printf("%f\n", farray->array[j]);

    return 0;
} 
```

调用自：

```
 NSDictionary* review = [self.reviews objectAtIndex:indexPath.row];
    returnHeight = [ReviewCell cellHeightForReview:review];
    NSLog(@"Adding height to array: %0.0f", returnHeight);
    AddFloatToArray(heights, returnHeight); 
```

以下是记录的内容：

```
2012-09-28 11:46:12.787 iOS-app[1605:c07] -[ProductDetailViewController tableView:heightForRowAtIndexPath:] [Line 598] Adding height to array: 101
Adding float to array 0.000000
Printing array contents
0.000000
2012-09-28 11:46:12.788 iOS-app[1605:c07] -[ProductDetailViewController tableView:heightForRowAtIndexPath:] [Line 598] Adding height to array: 138
Adding float to array 0.000000
Printing array contents
0.000000
0.000000
2012-09-28 11:46:12.788 iOS-app[1605:c07] -[ProductDetailViewController tableView:heightForRowAtIndexPath:] [Line 598] Adding height to array: 122
Adding float to array 0.000000
Printing array contents
0.000000
0.000000
0.000000
2012-09-28 11:46:12.789 iOS-app[1605:c07] -[ProductDetailViewController tableView:heightForRowAtIndexPath:] [Line 598] Adding height to array: 139
Adding float to array 0.000000
Printing array contents
0.000000
0.000000
0.000000 
```

如何确保将正确的值实际插入到 float[] 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T20:15:07.903

我没有在#importing 的.h 中声明函数。所以一切都编译并运行了，但类没有正确通信。你会认为这会引发警告或错误。

# expression - 需要一个正则表达式以在 asp.net 的文本框中只允许一个字符

> ID：12645739
> 
> 赞同：0
> 
> 时间：2012-09-28T18:52:16.457
> 
> 标签：expression

我需要一个正则表达式来允许一个文本框只允许一个字符。实际上，我想验证一个文本字段以输入一个初始字符（用于名称）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:59:16.263

在正则表达式中，'.' (dot) 匹配单个字符。如果您想确保这个单个字符是字母，请使用：

```
[a-zA-Z] 
```

或在 posix 系统中：`[:alpha:]`

现在，要确切知道如何实现它，我们需要知道您的代码是用哪种语言编写的。

对于初学者，请查看 [http://en.wikipedia.org/wiki/Regular_expression](http://en.wikipedia.org/wiki/Regular_expression)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:59:45.483

您可以将文本框属性 MaxLength 设置为 1 并使用正则表达式来验证是否为字母。

# android - 将吐司更改为状态栏中的通知？

> ID：12645742
> 
> 赞同：-1
> 
> 时间：2012-09-28T18:52:39.627
> 
> 标签：android, notifications, broadcastreceiver, statusbar, toast

我做短信应用。这是类接收短信：

```
public class TerimaSMS extends BroadcastReceiver {
    @Override

    public void onReceive(Context context, Intent intent) {
        Bundle bundle = intent.getExtras();

        Object messages[] = (Object[]) bundle.get("pdus");
        SmsMessage smsMessage[] = new SmsMessage[messages.length];
        for (int n = 0; n < messages.length; n++) {
        smsMessage[n] = SmsMessage.createFromPdu((byte[]) messages[n]);
        }

        // show first message
            Toast toast = Toast.makeText(context,
                    "SMS Received : " + smsMessage[0].getMessageBody(), Toast.LENGTH_LONG);
                    toast.show();   

    }
} 
```

如何将吐司更改为状态栏中的通知？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T19:01:57.063

添加这个而不是你的吐司：

```
NotificationManager mNotificationManager = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
Context context = getApplicationContext();          
Intent notificationIntent = new Intent(YourClass.this, YourClass.class);
PendingIntent contentIntent = PendingIntent.getActivity(YourClass.this, 0, notificationIntent, 0);
Notification notification = new Notification(R.drawable.icon, "SMS Received : " + smsMessage[0].getMessageBody(), System.currentTimeMillis());
notification.setLatestEventInfo(context, "title", "content", contentIntent);
mNotificationManager.notify(1, notification); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:58:30.530

这是一个链接，它将帮助您获得通知：- [http://mobiforge.com/developing/story/sms-messaging-android](http://mobiforge.com/developing/story/sms-messaging-android)

# sql - 如何在 SQL Server 2008 的文本列中放置多行数据？

> ID：12645748
> 
> 赞同：0
> 
> 时间：2012-09-28T18:53:22.607
> 
> 标签：sql, sql-server-2008

在 SQL Server 2008 中，我创建了一个带有列（文本）的表。然后我想在此列中放入某种格式化数据，例如多行，例如：

```
Line 1
Line 2
Line 3 
```

如果我将上面的数据复制并粘贴到列中，则只有第一行数据保存在列中。如何解决代码和手动输入（如 MSSMS）的这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:56:21.390

首先，使用`varchar(max)`代替[`text`](http://msdn.microsoft.com/en-us/library/ms187993.aspx). `text`已被弃用，并且无论如何都不太方便使用。

其次，您可以在 TSQL 中的字符串文字中包含换行符。

```
Update YourTable 
SET YourColumn = 'Line 1
Line 2
Line 3'
WHERE ... 
```

第三，根据我的经验，将包含换行符的文本复制并粘贴到 SSMS 编辑器中效果很好。粘贴后，您需要使用向上和向下箭头来查看其他文本行。

# json - 将参数传递到另一个页面以从 Json 生成列表视图

> ID：12645762
> 
> 赞同：0
> 
> 时间：2012-09-28T18:54:26.737
> 
> 标签：json, listview, jquery-mobile, geturl

您好，我正在使用这个 js 来传递 url 参数，它工作得很好，但我的问题是，当我定义 JSON 文件的路径时，我不想使用项目的 id...我想使用另一个 ID。例如：我有以下物品：

```
 {"id":"1",
"name":"Winery",
"street":"Chile",
"number":"898",
"phone":"4204040",
"mail":"winery@hotmail.com",
"web":"www.winery.com",
"lat":"-32.891638",
"long":"-68.846522",
"id_localidad":"1",
"id_provincia":"1"} 
```

我想将 id_localidad 放在路径的末尾，以根据城市生成列表视图（id_localidad 是商店所在城市的 id），而不是商品的 id。这对我不起作用。

提前致谢！

**JS文件**

```
 $('#PuntosDeVenta').live('pageshow',function(event){

 var id =  getUrlVars()["id"];

 $.getJSON('http://localhost/CavaOnline/json_PuntosDeVentas.php?id_localidad='+id,  function(vinerias) {
 //THIS IS NOT WORKING, IS THE SAME AS PUTTING id, not id_localidad

 $.each(vinerias, function(index, vineria) {

    $('#listviewVinerias').append( '<li><a href="FichaTecnicaVineria.php?id=' + vineria[id - 1].id + '" > ' +
                '<img src="pics/' + vineria[id - 1].img_url1 + '"/>' +
                '<h4>' + vineria[id - 1].name+'</h4>' +
                '<p>' + vineria[id - 1].street+ ' ' + vineria[id - 1].number+ '</p>' +
                '</a></li>');

    $('#listviewVinerias').listview('refresh') 

  });

 });

});

function getUrlVars() {

var vars = [], hash;

var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');

for(var i = 0; i < hashes.length; i++)

{

    hash = hashes[i].split('=');

    vars.push(hash[0]);

    vars[hash[0]] = hash[1];

}

return vars;

} 
```

**我加载列表的 div**

```
 <div data-role="content">

 <ul id="listviewVinerias" data-role="listview"></ul>

 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T10:07:13.810

所以我假设你`vinerias`是一个包含 JSON 对象列表的变量，即使我不知道你为什么`[id-1]`到处打电话。如果是这样，您可以使用该`.filter()`函数过滤掉 id_localidad 等于指定值的元素。

```
var filteredVinerias = vinerias.filter(function(index){
    return this["id_localidad"] === "1" //The localidad you want
}); 
```

# java - 是否能够在构建过程中将 REST 端点标记为被忽略？

> ID：12645764
> 
> 赞同：1
> 
> 时间：2012-09-28T18:54:45.283
> 
> 标签：java, web-services, rest, maven, jackson

我在 Eclipse 中有一个 Jackson 服务项目，它使用 Maven 进行构建过程，并且我有几个“仅测试”端点，这些端点是单元测试所必需的，但应该在公共构建中删除。是否可以设置注释或其他配置属性，以便在构建过程中（在单元测试通过后）不会部署端点？

例如，我有一个类似的方法：

```
@GET
@Path("/{user}/addresses")
@Produces(MediaType.APPLICATION_JSON)
public Map<String, Object> getUserAddresses(...){ ... } 
```

当这个发布时，用户地址将来自第 3 方系统，但为了测试，我们需要一种添加地址的方法，所以我有

```
@POST
@Path("/{user}/address")
@Produces(MediaType.APPLICATION_JSON)
public Map<String, Object> createAddress( 
```

但我希望第二种方法永远不会存在于实时服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T20:08:06.967

我只会将“仅测试”类放入`src/test/java`. 没有规定只能出现在`src/test/java`单元测试中。

这样，您无需额外配置 Maven 来排除类。

或者，您可以告诉 maven-jar-plugin 或 maven-war-plugin[排除特定类被打包到最终工件](http://maven.apache.org/plugins/maven-jar-plugin/jar-mojo.html#excludes)中，但这有一个缺点是无法捕捉到您不小心导入其中一个“只测试”真实类中的类，因此你在你的 jar/war 中发送一些会导致 NoClassDefFoundError 的东西。如果您将“仅测试”类放入其中`src/test/java`，并因此确保它们仅在测试类路径中，则不会出现这种意外导入问题（主代码的编译将失败）。

# c# - Linq to SQL：通过生成许多 SQL 查询的简单组

> ID：12645767
> 
> 赞同：0
> 
> 时间：2012-09-28T18:54:57.160
> 
> 标签：c#, mysql, linq, linq-to-sql

这是 C#/Linq：

```
Fbc_tickets.GroupBy(t => t.Fbt_household_id) 
```

LinqPad 告诉我这正在被翻译成（MySQL）：

```
SELECT t0.fbt_household_id
FROM fbc_ticket AS t0
GROUP BY t0.fbt_household_id

SELECT t0.fbc_ticket_id, t0.fbt_client_id, ...
FROM fbc_ticket AS t0
WHERE ((t0.fbt_household_id IS NULL AND @n0 IS NULL) OR (t0.fbt_household_id = @n0))
-- n0 = [1]

SELECT t0.fbc_ticket_id, t0.fbt_client_id, ...
FROM fbc_ticket AS t0
WHERE ((t0.fbt_household_id IS NULL AND @n0 IS NULL) OR (t0.fbt_household_id = @n0))
-- n0 = [2]

... 
```

为什么它会生成所有这些查询？我期待更类似于的东西

```
SELECT * FROM fbc_ticket GROUP BY fbt_household_id 
```

就是这样……

`fbt_household_id`是无符号整数且不可为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T21:11:13.067

我一直在 linq-to-sql 中看到这一点。首先是获取分组键的查询，然后是每个键的查询以填充组。我不知道为什么要以这种方式实现它，但是恐怕您对此无能为力。实体框架在这个特定领域（不是在其他领域）要聪明得多。

当我连接到现有的 linq-to-sql 上下文时，Linqpad 也会这样做（并且不要让它动态创建上下文），所以我认为它与 Linqpad 没有任何关系。

# android - android 应用程序在发布 apk 时出现 facebook SSO 失败

> ID：12645768
> 
> 赞同：1
> 
> 时间：2012-09-28T18:55:04.380
> 
> 标签：android, facebook, publish, release-mode

当我想发布集成了 facebook 的 android 应用程序时遇到问题。我用 Eclipse 签署了我的应用程序，并在终端中使用“keytool -exportcert -alias androidreleasekey -keystore MyReleaseKeystore.keystore | openssl sha1 -binary | openssl base64”生成发布密钥，并在“Native Android App”配置中添加。如果我尝试通过应用程序登录 fb，我会收到没有任何内容的对话框。

1.  密钥库文件的路径是正确的，因为 keytool 要求我输入密码。
2.  我使用相同的密钥库在 Eclipse 中签署 apk 并生成 fb 哈希。密码正确。
3.  我将生成的哈希复制到 fb 开发者控制台。

当我使用 debugkey 进行测试时，一切正常。我在调试模式下遇到了哈希问题，但我可以在 facebook sdk Util 类中打开调试并在 logcat 中检查正确的哈希，但在发布 apk 中这个技巧不起作用（我看不到任何错误）。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-02T10:37:19.993

检查您在“-alias androidreleasekey”中的别名是否与您在 ReleaseKeyStore.keystore 中生成的别名相同

# php - 用户购买域后将文件重定向到用户域

> ID：12645769
> 
> 赞同：0
> 
> 时间：2012-09-28T18:55:17.643
> 
> 标签：php, redirect, domain-driven-design

我创建了一个电子商务平台。当用户购买他自己的域时，我希望他重定向他的域，就像 bigcommerce 和 buildabazaar 一样。但我不知道该怎么做。

请就此向我提出建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:47:16.327

此重定向必须在您的买方域/托管方完成：

您需要所谓的“Masked domain foraward”，它是在域注册人控制面板中完成的。

或者你可以做一个简单的框架集，只需将此代码放在买家域的 index.html 中：

```
<html>
<head>
<title>site</title>
</head>
<frameset rows="100%" scrolling="yes" border="0">
<frame src="http://www.your-e-commerce-site.com/yourbuyer_1">
</frameset>
</html> 
```

*   此重定向将保留 URL 中的买家域，但不会为您提供任何子 URL，这意味着即使他点击他的应用程序，URL 栏中将始终是他的域页面，如[http://www.buyersdomain.com ...](http://www.buyersdomain.com)

# c++ - 为变量创建本地别名会增加开销吗？

> ID：12645770
> 
> 赞同：3
> 
> 时间：2012-09-28T18:55:22.383
> 
> 标签：c++, reference

考虑以下情况

```
void func(const A& a)
{
    //Case 1:
    const int& val = a->b->c->d;
    func1(val);
    func2(val);

    //Case 2:
    func1(a->b->c->d);
    func2(a->b->c->d);

    //Case3:
    int val = a->b->c->d;
    func1(val);
    func2(val);
} 
```

wrt 可读性，Case3 是最直接的

为了加快速度，对于一个体面的编译器，以上所有情况都等效吗？如果不是，它们中的哪一个是最快的和最慢的？

假设所有指针都是原始指针并且它们指向堆中的对象。

更新：假设参数是`const`一个如上所示的参数，因此 func1 和 func2 可以通过值或 const 引用来获取参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:02:29.150

*假设两个函数都通过 value 获取参数*，案例 3 至少与案例 1 一样快，案例 1 至少与案例 2 一样快。

正如评论中提到的 ruakh，在优化发生之前需要进行一些复杂的数据流分析。

如果函数参数是引用，那么值的最终内存加载可能永远不会发生。那么案例 1 将是最快的。

如果这些是宏而不是函数，那么所有的赌注都没有了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T19:02:33.310

在第一种情况下，您在 val 中引用 a->b->c->d，因此来自编译器的 pov val 是一个取消引用的指针。

wrt speed 第三个是最快的，因为它只是创建了一个值的副本，而不是使用那个值。

前两种方法的问题是您必须取消引用指针才能获取值，所以您必须这样做

```
case 1
lea eax,[ebp+a]
push eax

case 2
lea eax, [ebp+a]
lea ebx, [eax]
....

case 3
mov eax [ebp+val]
push eax 
```

你可以清楚地看到第三个是最快的

# javascript - Javascript 删除表单数据

> ID：12645776
> 
> 赞同：1
> 
> 时间：2012-09-28T18:55:46.617
> 
> 标签：javascript, jquery

我有一个表单，我只想提交已更改值的发布数据。

所以我一直这样做的方式是这样的：

```
function submit_form(){
var hd = [];
// hd is a big array that is defined here
// hd ['some id_number'] = 'some value'
// main function
for (var id_number in hd ){
    var x=document.getElementById(id_number).selectedIndex;
    var y=document.getElementById(id_number).options;
    selector_text = y[x].text;
    if (hd[id_number] == selector_text){
        $(id_number).remove();
    }
}
document.forms["my_form"].submit()
} 
```

所以目标是如果选择器等于数组中的内容，则不要发布数据。

为此，我一直在执行删除功能。删除功能之前的一切都按预期工作。但是，当我查看发布数据时，我仍然会得到与 hd 中的值匹配的 id_numbers 的选定值。

有没有更好的方法来删除以防止它进入 POST 数据？id.parent.removeChild(id) 方法也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T19:00:05.697

jQuery id 选择器应以 a 开头`#`，但您的似乎不是：

```
 $('#' + id_number).remove(); 
```

您的`for-in`循环应该是常规增量 for 循环，这是在 JavaScript 中迭代数组的正确方法。 `for-in`循环通常用于迭代对象属性而不是数组元素。

```
for (var i=0; i<hd.length; i++) {
  // Access hd[i] in the loop

  var x=document.getElementById(hd[i]).selectedIndex;
  var y=document.getElementById(hd[i]).options;

  selector_text = y[x].text;

  if (hd[i] == selector_text){
     $('#' + hd[i]).remove();
  }
} 
```

由于除了该行之外，您在这里并没有真正使用 jQuery，因此纯 JS 版本是：

```
var removeMe = document.getElementById(hd[i]);
removeMe.parentNode.removeChild(removeMe); 
```

# javascript - div高度变化时执行函数

> ID：12645779
> 
> 赞同：0
> 
> 时间：2012-09-28T18:56:08.407
> 
> 标签：javascript, css

我有一个根据内容改变高度的 div（它的宽度是固定的）。

每次发生 div 高度的自动变化时，我都想执行一个函数。

有人可以帮我实现这一目标吗？提前致谢！

*编辑：* 当我在 div 上拖放一些内容时，div 的高度会发生变化。（我正在使用 JQuery UI 可拖放）。因此，高度的变化是用户发起的。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-03T05:08:43.913

我在这里找到了一个很好的解决方案，由 Filament 组创建：http: [//filamentgroup.com/lab/setting_equal_heights_with_jquery/](http://filamentgroup.com/lab/setting_equal_heights_with_jquery/) - 请不要点击这个；似乎该资源已被删除。

# java - GStreamer 和 PLS 文件

> ID：12645780
> 
> 赞同：-2
> 
> 时间：2012-09-28T18:56:10.557
> 
> 标签：java, gstreamer

我无法使用 GStreamer 播放 PLS 文件，有人知道 GStreamer 框架是否支持该文件格式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:53:16.010

这些是播放列表，而不是媒体文件。为它们使用诸如 totem-plparser 之类的库。

# python - 想要使用正则表达式获取字符串的一部分

> ID：12645782
> 
> 赞同：0
> 
> 时间：2012-09-28T18:56:14.683
> 
> 标签：python, regex, string, url

我有一个字符串：

```
 <a class="x3-large" href="_ylt=Ats3LonepB5YtO8vbPyjYAWbvZx4;_ylu=X3oDMTVlanQ4dDV1BGEDMTIwOTI4IG5ld3MgZGFkIHNob290cyBzb24gdARjY29kZQNwemJ1ZmNhaDUEY3BvcwMxBGVkAzEEZwNpZC0yNjcyMDgwBGludGwDdXMEaXRjAzAEbWNvZGUDcHpidWFsbGNhaDUEbXBvcwMxBHBrZ3QDMQRwa2d2AzI1BHBvcwMyBHNlYwN0ZC1mZWEEc2xrA3RpdGxlBHRlc3QDNzAxBHdvZQMxMjc1ODg0Nw--/SIG=12uht5d19/EXP=1348942343/**http%3A//news.yahoo.com/conn-man-kills-masked-teen-learns-son-063653076.html"  style="font-family: inherit;">Man kills masked teen, learns it&#39;s his son</a> 
```

我只想得到它的最后一部分，即实际消息：

```
Man kills masked teen, learns it&#39;s his son 
```

到目前为止，我做了这样的事情：

```
pattern = '''<a class="x3-large" (.*)">(.*)</a>''' 
```

但它没有做我想要的，第一个`(.*)`匹配链接内的所有垃圾，但第二个是我想要得到的实际消息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T19:02:25.393

本着回答你应该问的问题的精神;^)，是的，你应该使用 BeautifulSoup [[link]](http://www.crummy.com/software/BeautifulSoup/)或 lxml 或真正的解析器来处理 HTML。例如：

```
>>> s = '<a class="x3-large" href="_stuff--/SIG**morestuff" style="font-family: inherit;">Man learns not to give himself headaches using regex to deal with HTML</a>'
>>> from bs4 import BeautifulSoup
>>> soup = BeautifulSoup(s)
>>> soup.get_text()
u'Man learns not to give himself headaches using regex to deal with HTML' 
```

或者，如果要捕获多个文本：

```
>>> s = '<a class="test" href="ignore1">First sentence</a><a class="test" href="ignore1">Second sentence</a>'
>>> soup = BeautifulSoup(s)
>>> soup.find_all("a")
[<a class="test" href="ignore1">First sentence</a>, <a class="test" href="ignore1">Second sentence</a>]
>>> [a.get_text() for a in soup.find_all("a")]
[u'First sentence', u'Second sentence'] 
```

或者，如果您只想要某些值`class`：

```
>>> s = '<a class="test" href="ignore1">First sentence</a><a class="x3-large" href="ignore1">Second sentence</a>'
>>> soup = BeautifulSoup(s)
>>> soup.find_all("a", {"class": "x3-large"})
[<a class="x3-large" href="ignore1">Second sentence</a>] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:58:55.370

键入`([^"]*)`而不是第一个`(.*)`，`([^<]*)`而不是第二个。或使用非贪婪量词，如`(.*?)`.

# git - git pull 自动合并

> ID：12645787
> 
> 赞同：11
> 
> 时间：2012-09-28T18:56:22.570
> 
> 标签：git, merge, pull

我有一个`master`分支和一个`feature_swap`分支。我想继续并行处理这两个分支。我做了一些改变`master`，然后承诺。我想对分支应用一些算法更改，`master`看看`feature_swap`该版本是如何工作的。所以我做了

```
git pull origin feature_swap 
```

并收到此消息

```
 * branch            feature_swap -> FETCH_HEAD
Auto-merging collator.h
Merge made by recursive. 
```

我不想合并。相反，我只想放置一些我应用的选定更改`master`（`feature_swap`可能通过复制粘贴）。如果这符合我的期望，我将通过这些更改再次提交到该分支。我再次想要的。

恐怕，我还没做过`git push`。我可以`merge branch 'feature_swap'`在`git log`. 我现在需要做什么来恢复状态？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-28T18:59:06.027

考虑到`git pull`is的定义`git fetch && git merge`，合并并不意外。

您可能想要这样做`git rebase master`，这会将提交重新应用`master`到`feature_swap`. 结合`cherry-pick`你可以指定你想要的提交。

要从`fetch`远程，只需使用`git fetch`它将从远程下载提交但不应用它们。

# sql-server - 在 SQL Server 中连接 bigint 值

> ID：12645795
> 
> 赞同：2
> 
> 时间：2012-09-28T18:57:19.067
> 
> 标签：sql-server

我有一个包含 3 列的表：

*   `PersonId uniqueidentifier`- 钥匙
*   `DeviceId uniqueidentifier`- 钥匙
*   `Counter bigint`

`counter`值上升，但有时有差距。计数器值的一个示例是`(1,2,3,1000,10000,10001,10002,...)`。计数器值一次保存一个。如果我为每个计数器值插入一行，表格会很快变大。我必须保留最后 1000 个计数器值，并且可以删除早期值。

是否可以将计数器值连接到类型中的 1 行或几行中`varbinary(8000)`，并在插入操作的过程中删除二进制开头的早期值？在编写此查询时，我需要帮助。我不喜欢使用`varchar`，因为每个字符会占用 2 个字节。可能有比我想象的更好的方法。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:56:45.123

也许你可以选择一个中间的解决方案：让每一行有 10 个左右的 bigint 类型的列。这会将行数减少 10 行，并将每行开销减少 10 倍。也许这对你来说已经足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T23:36:20.317

为什么要尝试这样做而不是使用带有 PersonID、DeviceID、Counter 的表，并且每个 PersonID 和 DeviceID 对只允许一定数量的计数器？

如果您的目标是节省空间，请记住 varbinary(8000) 将保留 8000 个字节，最多允许 1000 个 bigint 值，而不考虑您有多少个计数器。

这些 PersonID 和 DeviceID 对中的大多数有 1000 个计数器的可能性有多大？

最后，你只是让自己变得更复杂，让未来的员工更难维护，但你真的在节省空间吗？

您还必须添加一些事务进程，这将占用更多服务器资源。

但是要严格回答您的问题：是的，这是可能的。我猜存储过程结束时的触发器或进程可以处理你想要做的事情。

# html - 隐藏在框架后面的下拉菜单

> ID：12645805
> 
> 赞同：1
> 
> 时间：2012-09-28T18:58:07.937
> 
> 标签：html, css, menu, frame

我有一个使用框架构建的网站。在 topFrame.php 中，我有一个加载下拉子菜单的菜单。在主框架中，有网站的内容。问题是，当 topFrame 加载子菜单时，它隐藏在 mainFrame 后面。有什么办法可以阻止这种情况？使整个网站无框架对我来说将非常耗时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T20:14:01.197

据我所知，菜单不能在框架外可见。摆脱框架是个好主意。但如果它很耗时，建议选择一个看起来像**[这样](http://users.tpg.com.au/j_birch/plugins/superfish/#sample4)**的菜单（选项卡式子菜单）。

如果您的菜单项集有限，它不会超出框架。希望能帮助到你！

# java - 居中对齐要打印到文件上的字符串

> ID：12645812
> 
> 赞同：1
> 
> 时间：2012-09-28T18:58:38.573
> 
> 标签：java, string, formatting, string-formatting

当左右对齐使用[格式化](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)程序等如此简单时，为什么要找到一个字符串函数来居中对齐我的字符串是一项如此艰巨的任务？

我想格式化我的输出文件

```
 Nodes Expanded
                       Euclidean   Manhattan    Chessboard
Input1                     2           2             2
Input2                     6           6             6
Input3                     -           -             - 
```

伪代码：

```
 String line1="Nodes Expanded";
    line1.center(50);  //length of string =50 
```

然后我可以使用 PrintWriter 到字符串。

我必须为此建立一个逻辑还是我不知道一些内置功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T19:33:24.973

这是使文本居中的一种方法：

```
public String center (String s, int length) {
    if (s.length() > length) {
        return s.substring(0, length);
    } else if (s.length() == length) {
        return s;
    } else {
        int leftPadding = (length - s.length()) / 2; 
        StringBuilder leftBuilder = new StringBuilder();
        for (int i = 0; i < leftPadding; i++) {
            leftBuilder.append(" ");
        }

        int rightPadding = length - s.length() - leftPadding;
        StringBuilder rightBuilder = new StringBuilder();
        for (int i = 0; i < rightPadding; i++) 
            rightBuilder.append(" ");

        return leftBuilder.toString() + s 
                + rightBuilder.toString();
    }
} 
```

# python - Python数组操作

> ID：12645814
> 
> 赞同：1
> 
> 时间：2012-09-28T18:58:42.647
> 
> 标签：python, arrays

我有数组`[1,2,1,2,3,4,3,4,1,2]`

我想循环它 x 次，每次将数组的每个元素向前移动 1 个位置：

所以下一个循环将是：

2.`[2,1,2,3,4,3,4,1,2,1]`

3. `[1,2,3,4,3,4,1,2,1,2]`

ETC....

我怎样才能像这样操作数组？

**编辑：**

我的想法，但也许有一些更好的技巧：

只需使用 while 循环遍历数组并使用 for 循环创建新数组。

```
for i in range(11)
    array[i] = array[i-1] 
```

**等等等等..它的伪代码**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T19:05:18.963

使用 List 数据结构不是执行此操作的有效方法。**队列**会更合适。任何状况之下：

**使用队列**

正如我所建议的，使用队列（[collections.deque](http://docs.python.org/library/collections.html#collections.deque)）：

```
>>> q = collections.deque([1,2,3,4,5,6,7,8])
>>> for _ in xrange(5):
...     q.rotate(-1)
... 
>>> q
deque([6, 7, 8, 1, 2, 3, 4, 5]) 
```

**保留清单**

```
>>> a = [1,2,3,4,5,6,7,8]
>>> for _ in xrange(5):
...     a = a[1:] + a[:1]
... 
>>> a
[6, 7, 8, 1, 2, 3, 4, 5] 
```

或者（比前一个更快）：

```
>>> a = [1,2,3,4,5,6,7,8]
>>> for _ in xrange(5):
...     a.append(a.pop(0))
... 
>>> a
[6, 7, 8, 1, 2, 3, 4, 5] 
```

在这里，您可以将 xrange 更改为您想要迭代的任何内容。

时间分析：

**弹出追加**

```
>>> timeit.timeit('a.append(a.pop(0))', setup='a = [0,1,2,3,4,5,6,7,8,9]', number=1000000)
0.24548697471618652
>>> timeit.timeit('a.append(a.pop(0))', setup='a = [0,1,2,3,4,5,6,7,8,9]', number=100000000)
23.65538215637207 
```

**切片**

```
>>> timeit.timeit('a=a[1:] + a[:1]', setup='a = [0,1,2,3,4,5,6,7,8,9]', number=1000000)
0.36037278175354004
>>> timeit.timeit('a=a[1:] + a[:1]', setup='a = [0,1,2,3,4,5,6,7,8,9]', number=100000000)
35.06173801422119 
```

**队列**

```
>>> timeit.timeit('q.rotate(-1)', setup='import collections; q = collections.deque([0,1,2,3,4,5,6,7,8])', number=1000000)
0.16829514503479004
>>> timeit.timeit('q.rotate(-1)', setup='import collections; q = collections.deque([0,1,2,3,4,5,6,7,8])', number=100000000)
16.012277841567993 
```

稍微优化一下，基本上去掉了 __getattr__ 对 append、pop 和 rotate 的调用：

**弹出追加**

```
>>> timeit.timeit('aa(ap(0))', setup='a = [0,1,2,3,4,5,6,7,8,9]; aa=a.append; ap=a.pop', number=1000000)
0.15255093574523926
>>> timeit.timeit('aa(ap(0))', setup='a = [0,1,2,3,4,5,6,7,8,9]; aa=a.append; ap=a.pop', number=100000000)
14.50795292854309 
```

**队列**

```
>>> timeit.timeit('r(-1)', setup='import collections; q = collections.deque([0,1,2,3,4,5,6,7,8]); r=q.rotate', number=1000000)
0.13374090194702148
>>> timeit.timeit('r(-1)', setup='import collections; q = collections.deque([0,1,2,3,4,5,6,7,8]); r=q.rotate', number=100000000)
11.435136079788208 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T19:07:55.373

我会使用 a[`deque`](http://docs.python.org/library/collections.html#deque-objects)因为它有内置的方法 rotate：

```
import collections

d = collections.deque([1,2,1,2,3,4,3,4,1,2])
for _ in xrange(number_of_shifts):
    d.rotate(-1)
    print list(d) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T19:02:07.203

```
my_list = [1,2,1,2,3,4,3,4,1,2]
for i in range(10):
    my_list.insert(0,my_list.pop())
    print my_list 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T19:06:33.290

你的问题在这个问题中找到了答案（这有助于改进......） [在python中移动列表的有效方法](https://stackoverflow.com/questions/2150108/efficient-way-to-shift-a-list-in-python)

简而言之，制作一个函数来移动数组：

```
def shift(l, n):
   return l[n:] + l[:n] 
```

然后循环调用这个函数：

```
myarray=[1,2,3,4,5,6,7]
for ii in range(10):
   myarray=shift(myarray, 1)
   print myarray 
```

# java - 在声明部分使用 @SuppressWarnings("unused") 注释

> ID：12645815
> 
> 赞同：2
> 
> 时间：2012-09-28T18:58:42.630
> 
> 标签：java

`@SuppressWarnings("unused")`我有一个与注释有关的基本问题。基本上，我想在我的类的声明部分中抑制未使用的代码块上的警告。我不希望在整个班级禁止未使用的警告。

目前，我正在这样做：

```
public class MyClass {
    //Constants
    private final String ACCEPT = "Yes";
    @SuppressWarnings("unused")
    private final String DENY = "No";            //Not currently used
    private final String TENTATIVE = "Maybe";
    @SuppressWarnings("unused")
    private final String POSTPONE = "Later";     //Not currently used

    //Variables
    private int counter;
    .... 
```

我发现上面的代码对于像这样随机抛出的注释有点混乱。我想做的是：

```
//Constants
@SuppressWarnings("unused")
{
  private final String ACCEPT = "Yes";
  private final String DENY = "No";            //Not currently used
  private final String TENTATIVE = "Maybe";
  private final String POSTPONE = "Later";     //Not currently used
}

//Variables
private int counter;
.... 
```

当然，这在 Java 中是非法的，因为不能像这样简单地制作一个块。这没什么大不了的，但我很好奇我是否错过了一个明显而优雅的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T19:12:43.290

如果您真的想保留所有那些未使用的常量，那么一个快速而肮脏的技巧将是；

```
public class MyClass {
//Variables
    private int counter;

@SuppressWarnings("unused")
    private static final class UnusedConstants{
        private final String ACCEPT = "Yes";
        private final String DENY = "No";            
        private final String TENTATIVE = "Maybe";
        private final String POSTPONE = "Later";     
   }
} 
```

我也会让它们成为静态的，但是你的电话。

**编辑**：或者，我认为更好：

```
public class MyClass {

    private enum Answer {

        ACCEPT ("Yes"),
        DENY ("No"),
        TENTATIVE("Maybe"),
        POSTPONE("Later");

        private final String answer;

        private Answer(String answer) {
        this.answer = answer;
        }

        public String toString() {
            return answer;
        }
    }
} 
```

这样，只要您至少使用其中一个值，您就不会收到未使用的警告。

# java - 获取Android应用lib目录

> ID：12645818
> 
> 赞同：1
> 
> 时间：2012-09-28T18:58:54.620
> 
> 标签：java, android, android-ndk, native, supercollider

我需要在我的 Android 应用程序中指定一些本机库的位置。我用一个硬编码的字符串来完成这个：

```
public static final String DLL_DIR_STR = "/data/data/my.application.package/lib"; 
```

但想从 Android 获取路径。[在这样](https://stackoverflow.com/questions/7105919/creating-directory-in-application-package-on-internal-storage)的帖子之后，我使用 getDir() 来查找 lib 目录，更改

```
superCollider = new SCAudio(DLL_DIR_STR); 
```

到

```
superCollider = new SCAudio(container.$context().getDir("lib", 0).getAbsolutePath()); 
```

奇怪的是，初始库似乎正确加载

```
Trying to load lib /data/data/my.application.package/lib/libsndfile.so 0x42718d80
Added shared lib /data/data/my.application.package/lib/libsndfile.so 0x42718d80
No JNI_OnLoad found in /data/data/my.application.package/lib/libsndfile.so 0x42718d80, skipping init
Trying to load lib /data/data/my.application.package/lib/libscsynth.so 0x42718d80
Added shared lib /data/data/my.application.package/lib/libscsynth.so 0x42718d80 
```

但是当 libscsynth 尝试加载一些额外的代码时，它使用了错误的路径：

```
OK, listing opendir(/data/data/my.application.package/app_lib) 
```

“app_”来自哪里的任何想法？我认为我必须使用 getDir() 错误，但初始文件加载正常。它可能是本机代码中的东西吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T00:37:44.673

我很偶然地在[这篇文章](https://stackoverflow.com/questions/2603648/how-to-get-the-path-to-the-lib-folder-for-an-installed-package?answertab=votes#tab-top)中找到了答案。 [ApplicationInfo.dataDir](http://developer.android.com/reference/android/content/pm/ApplicationInfo.html#dataDir)保存数据目录的位置，“lib”很容易从那里导航到：

```
superCollider = new SCAudio(container.$context().getApplicationInfo().dataDir + "/lib"); 
```

或者，[nativeLibraryDir](http://developer.android.com/reference/android/content/pm/ApplicationInfo.html#nativeLibraryDir)将您直接带到 lib 目录，但需要 API 级别 9。

谢谢你的帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T20:33:54.110

`getDir`将始终将 app_ 添加到目录名称之前，因此它第一次工作很奇怪。我要么只是期望 app_ 在那里，要么尝试使用`getFilesDir`，至少你总是知道它会返回什么。SuperCollider 对目录名称有限制吗？

我发现了另一个[SuperCollider 项目](https://github.com/glastonbridge/SuperCollider-Android/blob/master/src/net/sf/supercollider/android/ScService.java)，它似乎在做与你最初所做的相同的事情，评论“ *// TODO: not very extensible,* ”.. 我觉得这很有趣:)

# jquery - Jquery Infinite Scroll 上的选项问题

> ID：12645831
> 
> 赞同：0
> 
> 时间：2012-09-28T18:59:43.757
> 
> 标签：jquery, jquery-masonry, infinite-scroll

我将无限滚动与 Jquery Masonry 结合使用。一切都很好，除了我无法获得任何用于无限滚动的选项。我正在尝试更改加载文本，添加一个 bufferpx。文档说你可以做到这一点，我完全按照它，但我的网站上没有任何变化。这是我所拥有的：

```
$(function(){

var $container = $('#loop-wrapper');

$container.imagesLoaded(function(){
  $container.masonry({
    itemSelector: '.hentry'
  });
});

$container.infinitescroll({
  animate  : true,   

  navSelector  : '.navigation-links',    // selector for the paged navigation 
  nextSelector : '.navigation-links a:first-of-type',  // selector for the NEXT link (to page 2)
  itemSelector : '.hentry',     // selector for all items you'll retrieve
  loadingText : 'test',
  bufferpx : '80',
  loading: {
      finishedMsg: 'Thats the end of this gallery.',
      img: 'http://ryanswansondesign.com/wp-content/themes/ryan/images/ajax-loader.gif',
    }
  },
  // trigger Masonry as a callback
  function( newElements ) {
    // hide new items while they are loading
    var $newElems = $(newElements).css({ opacity: 0 });
    // ensure that images load before adding to masonry layout
    $newElems.imagesLoaded(function(){
      // show elems now they're ready
      $newElems.animate({ opacity: 1 });
      $container.masonry( 'appended', $newElems, true ); 
      hoverForTitles();
    });
  }
); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T21:19:30.730

删除 '80' bufferpx 值周围的 '' ，否则将其作为字符串传递。此外，您可能想[在这里查看 github](https://github.com/desandro/masonry/issues/145)。

# javascript - jQuery ajax - 为什么没有响应？

> ID：12645834
> 
> 赞同：1
> 
> 时间：2012-09-28T18:59:45.907
> 
> 标签：javascript, ajax, jquery

我已经使用了这个基本的、简化的 ajax 脚本一百次了，现在我一直在思考这次它有什么问题，为什么我没有得到回应：

```
$('#btn-submit').click(function() {

var str = $("#form-submit").serialize();
alert(str); //alert pops up

$.ajax({
  type: "POST",
  url: "ajax-submit.php",
  data: str,
  success: function(msg) {
      alert(msg); //does not show
      if(msg==0) {
            alert(0); //does not show
          }
      }
});

alert('i come after ajax'); //alert pops up
}); 
```

此脚本之前包含 jQuery 文件，并且路径正确（仔细检查，firebug 中没有错误）。

ajax-submit.php 的路径也可以，内容是`<?php echo "test"; ?>`.

有谁知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:30:34.880

我终于发现了一个非常愚蠢的错误：我使用`type="submit"`了按钮，所以每次在调用ajax之前都提交了表单......

# java - Java中JSON格式之间的映射

> ID：12645837
> 
> 赞同：7
> 
> 时间：2012-09-28T18:59:54.193
> 
> 标签：java, json

我从 JavaScript/Ruby 转向 Java。假设我有一个动物的以下 JSON 对象：

```
{
  name: {
    common: "Tiger",
    latin: "Panthera tigris"
  }
  legs: 4
} 
```

我正在处理很多动物 API，我想将它们全部标准化为我自己的通用格式，例如：

```
{
  common_name: "Tiger",
  latin_name: "Panthera tigris",
  limbs: {
    legs: 4,
    arms: 0
  }
} 
```

例如，在 JavaScript 中，这很简单：

```
normalizeAnimal = function(original){
  return {
    common_name: original.name.common,
    latin_name: original.name.latin,
    limbs: {
      legs: original.legs || 0,
      arms: original.arms || 0
    }
  }
} 
```

但是在 Java 中呢？使用 org.json 中的 JSONObject 类，我可以做这样的事情：

```
public JSONObject normalizeAnimal(JSONObject original) throws JSONException{
  JSONObject name = original.getJSONObject("name");
  JSONObject limbs = new JSONObject();
  JSONObject normalized = new JSONObject();
  normalized.put("name_name", name.get("common"));
  normalized.put("latin_name", name.get("latin"));
  try{
    limbs.put("legs", original.get("legs");
  }catch(e){
    limbs.put("legs", 0);
  };
  try{
    limbs.put("arms", original.get("arms");
  }catch(e){
    limbs.put("arms", 0);
  };
  normalized.put("limbs", limbs);
  return normalized;
} 
```

随着我正在处理的 JSON 对象变得越来越深，这种情况变得更糟。除了所有这些，我还与许多动物对象的提供者打交道，我最终会寻找一些简洁的配置格式来描述转换（比如，也许，`"common_name": "name.common", "limbs.legs": "legs"`）。

我将如何在 Java 中减少这种情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T19:16:02.473

使用 Gson 或 Jackson 之类的库并将 JSON 映射到 Java 对象。

所以你会有一个像

```
public class JsonAnima {
    private JsonName name;
    private int legs; 
}
public class JsonName {
    private String commonName;
    private String latinName;
} 
```

可以使用任何库轻松转换，例如（使用杰克逊）

```
ObjectMapper mapper = new ObjectMapper();
JsonAnimal animal = mapper.readValue(jsonString, JsonAnimal.class); 
```

然后你可以创建一个“转换器”来将 JsonAnimal 映射到你的 Animal 类。

这可能是一种方法。:)

* * *

一些链接：

Gson：[http ://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

杰克逊：[http ://wiki.fasterxml.com/JacksonHome](http://wiki.fasterxml.com/JacksonHome)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T19:14:21.603

如果您要将它用于许多不同类型的对象，我建议使用反射而不是手动序列化每个对象。通过使用反射，您不需要创建像 normalizeAnimal 这样的方法，您只需创建一个方法或一个类来将序列化为 json 格式。

如果您搜索“mapping json java”，您会发现一些有用的参考资料。像格森。这是他们网站上的一个例子：

```
 class BagOfPrimitives {
      private int value1 = 1;
      private String value2 = "abc";
      private transient int value3 = 3;
      BagOfPrimitives() {
        // no-args constructor
      }
    }

    //(Serialization)
    BagOfPrimitives obj = new BagOfPrimitives();
    Gson gson = new Gson();
    String json = gson.toJson(obj);  
    ///==> json is {"value1":1,"value2":"abc"}

    ///Note that you can not serialize objects with circular references since that will result in infinite recursion. 

    //(Deserialization)
    BagOfPrimitives obj2 = gson.fromJson(json, BagOfPrimitives.class);   
    //==> obj2 is just like obj 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T16:56:55.407

纯 Java 解决方案都面临着处理源数据结构不可靠的挑战。如果您在 JVM 中运行，我建议您考虑使用 Groovy 对源 JSON 进行解析和构建。结果最终看起来很像您上面概述的 Javascript 解决方案：

```
import groovy.json.JsonBuilder
import groovy.json.JsonSlurper

def originals = [
  '{ "name": { "common": "Tiger", "latin": "Panthera tigris" }, "legs": 4 }',
  '{ "name": { "common": "Gecko", "latin": "Gek-onero" }, "legs": 4, "arms": 0 }',
  '{ "name": { "common": "Liger" }, "legs": 4, "wings": 2 }',
  '{ "name": { "common": "Human", "latin": "Homo Sapien" }, "legs": 2, "arms": 2 }'
]

originals.each { orig ->

  def slurper = new JsonSlurper()
  def parsed = slurper.parseText( orig )

  def builder = new JsonBuilder()
  // This builder looks a lot like the Javascript solution, no?
  builder { 
      common_name parsed.name.common
      latin_name parsed.name.latin
      limbs {
          legs parsed.legs ?: 0
          arms parsed.arms ?: 0
      }
  }

  def normalized = builder.toString()
  println "$normalized"
} 
```

运行上面的脚本处理“锯齿状”JSON（并非所有元素都具有相同的属性）和输出......

```
{"common_name":"Tiger","latin_name":"Panthera tigris","limbs":{"legs":4,"arms":0}}
{"common_name":"Gecko","latin_name":"Gek-onero","limbs":{"legs":4,"arms":0}}
{"common_name":"Liger","latin_name":null,"limbs":{"legs":4,"arms":0}}
{"common_name":"Human","latin_name":"Homo Sapien","limbs":{"legs":2,"arms":2}} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-23T19:47:28.463

你可以试试小的[jmom](https://github.com/antonsjava/jmom) java 库

```
JsonValue json = JsonParser.parse(stringvariablewithjsoninside);
Jmom mom = Jmom.instance()
    .copy("/name/common", "/common_name", true)
    .copy("/name/latin", "/latin_name", true)
    .copy("/arms", "/limbs/arms", true)
    .copy("/legs", "/limbs/legs", true)
    .remove("/name")
    ;
mom.apply(json);
String str = json.toPrettyString("  "); 
```

# php - 如何删除之间的所有内容 PHP中的标签？

> ID：12645839
> 
> 赞同：1
> 
> 时间：2012-09-28T18:59:58.997
> 
> 标签：php, regex, html-parsing

到目前为止，我已经阅读并尝试针对堆栈溢出实施大约 10 种不同的解决方案的变体，但它们都没有工作。我要做的就是替换两个 pre 标签之间的内容（包括标签本身）。我不在乎它是正则表达式还是直接 php。有人有什么建议吗？

一个例子是：

```
This is how to remove pre tags and their contents:<br/>

<pre>
<?php>
[code here]
<?php>

That's all there is to it. 
```

变成：

```
This is how to remove pre tags and their contents:</br>
That's all there is to it. 
```

这需要在 html 呈现到页面之前发生。

我不确定 DOMDocument 是否会起作用。我的代码的上下文是它发生在表达式引擎插件（基于 codeigniter / php 的 CMS）中。该插件将 html 截断为设定的字符长度，并将其呈现回父模板以在浏览器中呈现 - 因此 domdocument 无法呈现给浏览器 - 它只需将代码返回给父模板标签和内容被删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T19:13:23.187

使用`DOMDocument`：

```
$html = '<div id="container">
    <div id="test"></div>
    <pre>
        content
    </pre>
</div>';

$dom = new DOMDocument;
$dom->loadXML($html);

$xpath = new DOMXPath($dom);
$query = '//div[@id="container"]/pre';
// $query = '//pre'; // for all <pre>
$entries = $xpath->query($query);

foreach($entries as $one){
    $newelement = $dom->createTextNode('Some new node!'); 
    $one->parentNode->replaceChild($newelement, $one);
}

echo $dom->saveHTML(); 
```

[键盘示例](http://codepad.org/O0CymAMJ)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T19:15:06.743

如果您使用断言（即前瞻/后瞻），正则表达式将正常工作。这应该删除 pre 标签中的任何内容：

```
$page_content = preg_replace('/<(pre)(?:(?!<\/\1).)*?<\/\1>/s','',$page_content); 
```

如果要包含其他标签，只需将它们添加到初始匹配组中，例如：

```
(pre|script|style) 
```

删除正则表达式标签的唯一真正问题是相同类型的嵌套标签，例如：

```
<div>
    <div>inner closing tag might match beginning outer opening div tag leaving an orphan outer closing tag</div>
<div> 
```

**编辑**

我测试了您在其他答案的其他评论中留下的示例，对我来说效果很好：

```
$html = 'This is a quick snippet that often comes in handy: <pre>[code]blah blah[/code]</pre>';
$html = preg_replace('/<(pre)(?:(?!<\/?\1).)*?<\/\1>/s',"",$html);
var_dump($html); 
```

结果：

```
string(51) "This is a quick snippet that often comes in handy: " 
```

# sql - TSQL Self Join：排除具有设置条件的连续 ID 记录

> ID：12645840
> 
> 赞同：0
> 
> 时间：2012-09-28T19:00:01.853
> 
> 标签：sql, sql-server-2008, tsql

我有一个如下表：

```
ID, DATE, STATUS
1, 01JAN2012, STOP
1, 04JAN2012, RESTART
2, 01JAN2012, STOP-1
3, 10JAN2012, STOP
4, 15JAN2012, RESTART
5, 01JAN2012, STOP-1
5, 04JAN2012, STOP-2
5, 10JAN2012, STOP
5, 15JAN2012, RESTART 
```

预期输出：

```
ID, DATE, STATUS
2, 01JAN2012, STOP-1
3, 10JAN2012, STOP
4, 15JAN2012, RESTART
5, 01JAN2012, STOP-1
5, 04JAN2012, STOP-2 
```

我想要一个 SELECT 语句来排除具有相同 ID 的所有记录（STATUS='RESTART'）和一个连续的先前记录（如果有）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T19:50:19.340

我不确定如果连续两次重新启动会发生什么，但除非出现这种并发症，我认为您可能想要这样的事情：

```
;WITH myTable AS(
SELECT *,ROW_NUMBER() OVER (PARTITION BY ID ORDER BY [DATE]) AS rn
FROM OriginalTable
)
SELECT this.ID, this.DATE, this.STATUS
FROM myTable this
LEFT OUTER JOIN myTable prev ON prev.ID = this.ID and prev.rn = this.rn-1
LEFT OUTER JOIN myTable nxt ON nxt.ID = this.ID and nxt.rn = this.rn+1
WHERE NOT ((this.STATUS= 'RESTART' AND prev.STATUS IS NOT NULL)
           OR (COALESCE(nxt.STATUS,'') = 'RESTART')) 
```

我假设您的 DATE 列的类型是日期或日期时间，但如果它是一个字符串，您应该将其转换为 ROW_NUMBER 调用的 ORDER BY 部分中的日期。

# jquery - 将 JQuery 动画绑定到现有函数

> ID：12645844
> 
> 赞同：0
> 
> 时间：2012-09-28T19:00:18.137
> 
> 标签：jquery, html, css, background

我有一个现有功能，当单击导航菜单项时，垂直站点的背景图像会发生变化。

```
<script type="text/javascript">
$(function() {
    $('a.panel-home').click(function(){
    $("#bgimg").attr('src',"<?php bloginfo('stylesheet_directory'); ?>/images/bg1.jpg");
    return false;
    });
}); 
```

我不知道如何将动画绑定到此函数，以便新的背景图像淡入...现在这是一个苛刻的瞬时转换。我想要的效果

```
$("#bgimg").fadeIn(1500); 
```

...但我对 javascript/jquery 有点陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:04:11.850

将您的图像包含在 a 中`div`，然后将效果应用于`div`，如下所示：

HTML：

```
<div><img id="bgimg" src="...."></div> 
```

JAVASCRIPT：

```
$(function() {
    $('a.panel-home').click(function(){
    $("#bgimg").parent().fadeOut(1000, function() {
        $("#bgimg").attr('src',"<?php bloginfo('stylesheet_directory'); ?>/images/bg1.jpg");
        $(this).fadeIn(1000); 
    });   
    return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T20:06:50.963

要同时淡化它们，您可以使用以下代码：

```
/* This must be called on 'img' tag. Enhanced to support more than one image, first image in options argument,
 * rest are in more_images argument, which is string array with following format:
 * ["400|1000|apple.png","800|apple2.png", "apple3.png"]
 * with 3 elements in pipe separation they are delay|duration|image
 * with 2 elements they are duration|image
 * and with one element, that's image, the default delay is zero and default duration is 800 
 * 
 * Ignore more_images argument if you only want to transition from one image to another one.
 * Any external code can check if there's an animation running by checking if the parent div of the img
 * being animated has the attribute data-anim . This is useful for external code to check 
 * if the transitions have ended (in an setinterval call for example)*/
jQuery.fn.transictionto = function(options, more_images) {
      var settings = jQuery.extend({
   }, options || {});
   //wrap into div if no div is present.
   $(this).each(function() {
      if ($(this).parent('div').length == 0) {
         $(this).wrap('<div></div>')
      }
      //mark to check if animation is in being done
      $(this).parent().attr('data-anim','1');
      //now swap with background trick
      $(this)
      .parent()
         .css('background-image', 'url(' + settings.destinationImage + ')')
         .css('background-repeat', 'no-repeat')
      .end()
      .fadeOut(settings.duration, function() {
         this.src = settings.destinationImage;
         $(this).show();
         if (more_images != null && more_images.length) {
             var im = more_images.shift().split('|');//shift shrinks array
             var dly = im.length == 3 ? parseInt(im[0],10) : 0;
             var drt = im.length > 1 ? parseInt(im[im.length-2],10) : 800;
             $(this).delay(dly).transictionto({ destinationImage: im[im.length-1], duration: drt }, more_images);
         } else {
             $(this).parent().removeAttr('data-anim');
         }
      });
   });
}

$(function() {
    $('a.panel-home').click(function(){
        destImage = "<?php bloginfo('stylesheet_directory'); ?>/images/bg1.jpg";
        $("#bgimg").transictionto({ destinationImage: destImage, duration: 800 });
        return false;
    });
}); 
```

这次`transictionto()`必须在`img`元素上调用该函数。

# sockets - 正在使用 Erlang 的 gen_tcp 一种可扩展的方式来构建高流量套接字服务器

> ID：12645845
> 
> 赞同：7
> 
> 时间：2012-09-28T19:00:23.607
> 
> 标签：sockets, asynchronous, network-programming, erlang, gen-tcp

我正在尝试学习 Erlang 来做一些简单但可扩展的网络编程。我基本上想编写一个程序来完成互联网骨干上的服务器所做的事情——但规模较小。我想尝试建立一个带有 Web 可访问服务器的 Intranet，这些服务器将充当 Intranet [sic] 的网关，并将数据路由到连接的客户端和/或其他网关。

高流量来自这样一个事实，即数据不仅会从客户端流向网关再到客户端，而且可能必须绕过几个网关才能到达目的地（例如数据在互联网上的传输方式）。这意味着网关不仅要处理来自其客户端的流量，还要处理来自其他网关客户端的流量。

我认为这会导致异常高的流量，即使对于中等数量的客户端和网关也是如此。

来自 Python 以及其他脚本语言的背景，我习惯于挖掘自定义模块来解决我的问题。我知道 Erlang 是为高流量网络编程而设计的，但我能找到的关于这类东西的库/模块只有 gen_tcp。

这是否意味着 Erlang 已经针对这种事情进行了如此优化，以至于您可以使用其最基本的模块启动它并期望它能够很好地扩展？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-29T09:17:00.410

`gen_tcp`即使在大量负载的情况下，您也可以期望表现得非常好。如果您只是要传递数据而不是对其进行太多处理，那么我的猜测是您将能够很好地扩展 - 实际上您将只是传递指针。

所有用 Erlang 编写的已知可扩展解决方案都使用`gen_tcp`：

*   牛仔、Mochiweb、Yaws、...
*   里亚克
*   洪流
*   兔MQ

等等。使用它时，有一个提示值得一提：确保运行 erl`erl +K true`以便访问内核轮询。也就是说，`epoll()`在 Linux、`kqueue()/kevent()`BSD 和`/dev/poll`Solaris 上。另请注意，您可以向 TCP 端口发出命令以设置其选项 wrt 缓冲区大小等。最后，对于某些类型的数据包，您可以让 C 层为您解析数据包，查看`erl -man inet`并`setopts/2`调用。`{packet, 4}`一个非常流行的例子。

一般来说，Erlang 有一个相当快的 I/O 子层。您可以期望它执行得非常快，即使对于大型复杂交互也是如此。

# ruby-on-rails-3 - 嵌套模型的Rails 3 UnknownAttributeError

> ID：12645846
> 
> 赞同：0
> 
> 时间：2012-09-28T19:00:34.490
> 
> 标签：ruby-on-rails-3, devise, nested-attributes, simple-form

我无缘无故地收到 UnkownAttributeError，我的模型似乎设置正确......

**学校.rb**

```
class School < ActiveRecord::Base
  attr_protected :id, :created_at, :updated_at

  #relationships
  has_many :users

  accepts_nested_attributes_for :users
end 
```

我的 School 模型曾经有以下内容，但它为用户字段产生了 MassAssignmentSecurity 错误：

```
attr_accessible :country, :name, :state_or_province, :users_attributes 
```

**用户.rb**

```
class User < ActiveRecord::Base

  attr_accessible :email, :password, :password_confirmation, :remember_me, :username, :instructor_id, :first_name, :last_name, :school_id

  #relationships
  belongs_to :school

end 
```

**新的.html.haml**

```
= simple_form_for @school do |f|
  .well
    = f.input :name, :as => :hidden
    = f.input :country, :as => :hidden
    = f.input :state_or_province, :as => :hidden
  .well
    = f.simple_fields_for @school.users.build do |user_form|
      = user_form.input :first_name, :required => true
      = user_form.input :last_name, :required => true
      = user_form.input :username, :required => true
      ...
  = f.button :submit, "Next" 
```

注意：`@school`正在从上一页收集的会话信息中填充我的新操作，我正在制作一个多步骤表单。学校数据完全有效，如果我要删除用户表单，保存学校不会有任何问题。

我在创建操作中收到的特定错误消息：

> **SchoolsController#create 中的 ActiveRecord::UnknownAttributeError**
> 
> 未知属性：用户

发送的参数看起来有点像这样：

> {"school"=>{"name"=>"Elmwood Elementary", "country"=>"38", "state_or_province"=>"448", "user"=>{"first_name"=>"joe", "last_name"=>"asdas", "username"=>"asasdads", "email"=>"asdasd@sdas.ca", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED ]"}}, "提交"=>"下一步"}

这可能是 Devise 或 simple_form 的错误吗？我正在使用 Rails 3.2.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T20:00:26.787

好的，显然我需要提供符号`:users`- 关系的名称作为我的第一个参数，它才能工作。

# javascript - 将 jQuery 转换为 javascript（单击空格后隐藏块）

> ID：12645848
> 
> 赞同：-1
> 
> 时间：2012-09-28T19:00:41.257
> 
> 标签：javascript, jquery

你好亲爱的程序员 Stack Overflow。我开始学习 javascript 并且有一段时间（直到你学会编写复杂的程序）不需要框架来理解“本机”代码的原理。我遇到了这个问题，发现它的实现......但是 jQuery 很难理解更深层次的过程。

[http://jsfiddle.net/P6YeA/25/](http://jsfiddle.net/P6YeA/25/)

有人可以帮助将这个例子分析成它的组成部分吗？我将非常感谢这样一个好心人的帮助！:) 抱歉英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:31:11.717

在纯 JavaScript 中：

```
var toHide = document.getElementById('hideme');
var done = false;
document.onclick = function() {
    if(done) return;
    toHide.style.display = "none";
    return false;
} 
```

# python - Web 自动化 - 处理 .aspx

> ID：12645849
> 
> 赞同：2
> 
> 时间：2012-09-28T19:00:46.920
> 
> 标签：python, web, automation

我正在尝试完成一些自动化，包括在网页上提交表单。表单的值已经按列表中的项目进行了编码。

我已经用 Python 尝试了许多不同的模块，但似乎没有什么能给我答案。我无法访问 Visual Basic，而且我个人以前从未处理过 .aspx 页面。这是表单名称 当我找到表单的参数时，我以为我已经设置好并准备好了： function ShowEditForm(id, param1, param2, param3, param4) #actual parameter names removed for security

这是最令人头疼的部分：

```
<INPUT id=__EVENTTARGET type=hidden name=__EVENTTARGET> <INPUT id=__EVENTARGUMENT     type=hidden name=__EVENTARGUMENT> <INPUT id=__VIEWSTATE type=hidden value=/wEPDw... #This     continues for 800+ characters 
```

我相信这是我的代码失败的原因，我是否正在试图在 python 中发布到 .aspx 表单？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:13:17.497

您需要解析/参数化您的帖子标题和内容。这可能很重要。

查看[mechanize](http://wwwsearch.sourceforge.net/mechanize/)以在 HTTP 级别进行访问，并提供一些表单处理便利。

查看[selenium](http://seleniumhq.org/)，用于在 Python 中驱动真正的浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T19:14:10.567

Asp.net 有一个名为 viewstate（加密的页面状态设置）的功能，您不能伪造它，并且页面可能默认使用它，并且在提交回自身（称为回发）时期望在表单上看到.

如果您控制 .aspx 代码，它可能有一个关联的 .cs 或 .vb 文件，其中包含执行表单处理的代码。您可以更改代码以从发布的表单或 URL 参数中获取值，而不是（或附加于）原始表单上的控件。如果站点已编译并且您没有看到任何要更改的 .vb 或 .cs 文件，则您需要找到解决方案的原始源文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T19:02:57.883

我不认为aspx与它有任何关系。

你试过[http://pypi.python.org/pypi/selenium](http://pypi.python.org/pypi/selenium)吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T19:07:17.580

实际上，如果不存在这些隐藏值，则 POST 请求的服务器端处理将不起作用。ASP.NET 使用这些东西来跟踪多个请求的状态。对 ASP.NET Web 窗体 HTTP 请求进行逆向工程并不是一项有趣的工作。

您可能需要请求页面，抓取它提供给您的隐藏值，并将这些值包含在 POST 中。

逐步完成与页面的手动交互并在诸如 FireBug 之类的东西中捕获请求/响应也将使您对在客户端和服务器之间来回发送的值有一个很好的了解。如果有一些 JavaScript 发送到响应中，它也以服务器预先确定的方式动态修改一些隐藏字段，这不会让我感到惊讶，这有助于指示按下了哪个按钮或以某种方式修改了哪个控件。

# r - 如何返回具有超过 2 个唯一值的所有行？

> ID：12645850
> 
> 赞同：0
> 
> 时间：2012-09-28T19:00:46.623
> 
> 标签：r

现在我有一个名为的向量`closest.labels`，其中包含以下数据：

```
 [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
[1,]    2    2    2    2    2    2    2    2    2     2
[2,]    0    0    0    0    0    0    0    0    0     0
[3,]    9    9    9    9    9    9    9    7    7     4 
```

我想做的是返回行数据以及该行的索引，其中有两个以上的唯一值。在上面的示例中，这只是第三行。到目前为止，我已经部分成功地使用`apply`了我创建的功能。见下文：

```
colCountFx <- function(col){
    result <- subset(list(index=col,count=length(unique(col))),length(unique(col))>2)
    return(result)
}
apply(closest.labels,1, colCountFx) 
```

我的问题是，这也会返回前两条记录的空行。输出：

```
[[1]]
named list()

[[2]]
named list()

[[3]]
[[3]]$index
 [1] 9 9 9 9 9 9 9 7 7 4

[[3]]$count
[1] 3 
```

我需要更改什么才能使当前返回的行不返回任何内容`named list()`？此外，我对 R 相当陌生，所以如果您认为有更好的方法可以解决这个问题，我也对此持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:24:08.050

您可以获取跨行应用`length`的`unique`项目的索引。 `mat`将用作包含项目的矩阵的名称。

```
nUnique <- apply( mat, 1, function(x) length(unique(x)) )
ind <- which(nUnique > 2) 
```

您现在可以根据该索引选择行。

```
mat[ind,] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T19:05:34.610

您可以使用另一个索引来修剪空列表。说：

```
remaining <- apply(closest.labels,1, colCountFx)
remaining.ind <- sapply(remaining,length) != 0
remaining[remaining.ind] 
```

或者，扩展 Patrick Li 的回答：

```
ind <- apply(closest.labels, 1, function(x) length(unique(x)))
which(ind > 2) #indices of rows that have more than 2 unique values
closest.labels[which(ind > 2),] #rows that have at least one unique value 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T19:32:58.093

如果它是`list`你想要的，你可以尝试这样的事情。不过，就我个人而言，我发现嵌套列表有些麻烦。

首先，一些数据（为了清楚起见，我添加了一个额外的行）：

```
closest.labels <- structure(c(2, 0, 9, 8, 2, 0, 9, 8, 2, 0, 9, 8, 2, 0, 9, 8, 2, 
                              0, 9, 8, 2, 0, 9, 5, 2, 0, 7, 6, 2, 0, 7, 7, 2, 0, 
                              4, 8, 2, 0, 4, 9), .Dim = c(4L, 10L)) 
```

接下来，一个修改后的函数：

```
colCountFx <- function(data) {
  temp = apply(data, 1, function(x) length(unique(x)))
  result = which(temp > 2)
  out = vector("list")
  for (i in 1:length(result)) {
    out[[i]] = list(index = data[result[i], ], count = temp[result[i]])
  }
  names(out) = paste("row", result, sep = "_")
  out
} 
```

让我们测试一下：

```
colCountFx(closest.labels)
# $row_3
# $row_3$index
# [1] 9 9 9 9 9 9 7 7 4 4
# 
# $row_3$count
# [1] 3
# 
# 
# $row_4
# $row_4$index
# [1] 8 8 8 8 8 5 6 7 8 9
# 
# $row_4$count
# [1] 5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T19:04:15.110

```
> ind <- apply(x, 1, function(x) length(unique(x)))
> ind
[1] 1 1 3 
```

# html - Soundcloud 在 IE 中无法正确调整大小

> ID：12645851
> 
> 赞同：0
> 
> 时间：2012-09-28T19:00:55.230
> 
> 标签：html, css, internet-explorer, css-float, soundcloud

为网站试用 Soundcloud。我调整了 iframe 的大小以适应空间 - 这在 Chrome/FF/Safari 中无缝工作。

然而，在 IE 上，它不是调整大小而是截断可视空间。

例如：

[它应该看起来的方式：](http://img688.imageshack.us/img688/4135/a1e99371c7c441e8b81f6ba.png)
![](../Images/d2c031ac3387b271859a539d5fb6c5f3.png)

[IE的解释（看不到或点击播放按钮）：](http://img692.imageshack.us/img692/7923/c0c000703a8743039cd7bde.png)

![](../Images/b4624415de21532a191ea622440bc463.png)

HTML：

```
<div class="rightnav_below">
    <iframe width="100%" height="180" scrolling="no" frameborder="no" src="http://w.soundcloud.com/player/?url=http...&amp;auto_play=false&amp;show_artwork=true&amp;color=ff7700"></iframe>
</div><!-- end .rightnav_below --> 
```

CSS：

```
#wrap #content #rightnav_wrapper .rightnav_below {display: block; text-align: left; margin-top: 20px;  background: #ccc; border-color:#fc663d;}

#wrap #content #rightnav_wrapper  .rightnav_below iframe{float: none;  height: 180px; width: 180px; vertical-align: top; } 
```

此外，当我点击那个微小的播放部分时，在 IE 中出现错误：

网页错误详情

```
Message: 'nodeName' is null or not an object
Line: 3
Char: 99080
Code: 0
URI: http://w.soundcloud.com/player/?url=...http...&auto_play=false&show_artwork=true&color=ff7700 
```

有什么想法吗？谢谢！

# ubuntu - 构建自定义内核后没有模块->“无法访问/lib/modules/xyz：没有这样的文件或目录”

> ID：12645854
> 
> 赞同：3
> 
> 时间：2012-09-28T19:01:11.867
> 
> 标签：ubuntu, linux-kernel, kernel, kernel-module

我对内核构建有点陌生，但我想尝试自己的内核。我几乎按照本网站（[elinux.org 教程](http://elinux.org/Panda_How_to_kernel_3_5_rcx)）上的“操作方法”在我的 Pandaboard ES（运行 Ubuntu 12.04）上安装 3.5.0-rc7 内核。

基本上我会。

获取主线内核

```
$ git clone http://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git  
$ cd linux  
$ git checkout v3.5-rcx 
```

为 Pandaboard ES 获取特殊的 uboot 和 MLO

```
$ mkdir pandaboard-es  
$ cd pandaboard-es  
$ git clone git://git.linaro.org/boot/u-boot-linaro-stable.git  
$ cd u-boot-linaro-stable  
$ git checkout -b pandaboard-es origin/Linaro-u-boot-2011.12  
$ make omap4_panda_config  
$ make 
```

制作我自己的配置文件（复制[rc7-configfile](http://elinux.org/images/1/14/Config.3.5-rc7.1)）

```
$ vim .config  
$ sudo make menuconfig (just added OTG support) 
```

构建 uImage

```
$ make uImage 
```

我将 MLO u-boot.bin 和 uImage 复制到我的 Pandaboard 的 FAT 分区，然后尝试启动。系统完全启动，但在启动时抛出以下消息：

```
*FATAL: Could not load /lib/modules/3.5.0-rc7-dirty/modules.dep: No such file or directory
fsck from util-linux 2.20.1  
/dev/mmcblk0p2: clean, 319456/3887104 files, 10158442/31093248 blocks  
modprobe: FATAL: Could not load /lib/modules/3.5.0-rc7-dirty/modules.dep: No such file or directory  
modprobe: FATAL: Could not load /lib/modules/3.5.0-rc7-dirty/modules.dep: No such file or directory* 
```

启动后，我尝试手动加载模块但没有成功。这是结果：

```
*ls: cannot access /lib/modules/3.5.0-rc7-dirty: No such file or directory* 
```

很高兴得到你的帮助。我不知道失败在哪里。。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:20:12.810

我对您的特定构建架构一无所知，但是您不必像在任何常规内核构建之后那样在“make uImage”之后运行“make modules”和“make modules_install”吗？

# ruby-on-rails - 重命名 rails 迁移中列的每个条目（或行）

> ID：12645856
> 
> 赞同：0
> 
> 时间：2012-09-28T19:01:31.543
> 
> 标签：ruby-on-rails, rails-migrations

我想根据哈希重新映射状态列中的值。

例如，如果状态为 a，则将其更改为 b。

如何在 Rails 中执行此操作并对其进行优化，以便它执行一个更改列中所有值的数据库调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T19:10:52.733

```
status_changes = { "a" => "b", "c" => "d" }

status_changes.each do |old, new|
  # first arg is UPDATE, second arg is WHERE
  SomeModel.update_all("status = #{new}", "status = #{old}")
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:30:35.257

我这样做了，使用 heredocs 以获得更好的可读性：

```
status_mapping = {"Open" => 1345, "Closed" => 1346, "Pending" => 1347}
query = ActiveRecord::Base.connection()
    query.execute <<-SQL.strip_heredoc
      UPDATE table_1 
      SET status = CASE 
        WHEN status = #{status_mapping["Open"]} THEN 0
        WHEN status = #{status_mapping["Closed"]} THEN 1 
        WHEN status = #{status_mapping["Pending"]} THEN 2 
        ELSE NULL
      END;
    SQL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T19:07:14.733

如果散列与表相比较小，您可以`UPDATE ... WHERE ...`对散列中的每个条目执行 SQL，将其包装到事务中。

# visual-studio-2010 - WCF 服务，作为服务属性值提供的类型...找不到

> ID：12645863
> 
> 赞同：0
> 
> 时间：2012-09-28T19:02:08.600
> 
> 标签：visual-studio-2010, wcf

我很久以前就遇到过这个问题，只是不记得如何解决它或提出新的问题。我创建了一个 WCF 服务，稍后将在 Web 应用程序中使用该服务，该服务从远程位置调用 WCF 服务等。现在我正在尝试在 IIS 中托管，甚至尝试了 WCFTestClient。我尝试浏览服务时遇到的错误；如下：

```
The type MyService.Service1 provided as the Service attribute 
value in the ServiceHost    directive, or provided in the 
configuration element system.serviceModel/serviceHostingEnvironment/
serviceActivations could not be found. 
```

我想它可能是我的 web.config 文件，但我看不出有什么问题：

```
<?xml version="1.0"?>
<configuration>

<system.web>
<compilation debug="true" strict="false" explicit="true" targetFramework="4.0" />
</system.web>
<system.serviceModel>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
<bindings>
  <webHttpBinding>
    <binding name="webHttpBinding" crossDomainScriptAccessEnabled="false" />
  </webHttpBinding>
</bindings>
<behaviors>
  <endpointBehaviors>
    <behavior name="web">
      <webHttp />
    </behavior>
  </endpointBehaviors>
  <serviceBehaviors>
    <behavior name="webHttpBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<services>
  <service behaviorConfiguration="webHttpBehavior" name="WcfInstanceRules2.Service1">
    <endpoint address="" 
     binding="webHttpBinding" 
       contract="WcfRules2.IServiceS"     behaviorConfiguration="web"/>
    <endpoint address="mex" 
    binding="webHttpBinding" contract="IMetadataExchange"></endpoint>
  </service>
</services> 
```

我希望这最终成为一个以 json 格式提供数据的休息服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:19:41.130

检查您的 .svc 文件并查看它引用的服务 - 可能是 MyService.Service1，它在您的配置中不存在。看起来它应该引用 WcfInstanceRules2.Service1。

# jsf - t:dataScroller 在刷新时无法正常工作

> ID：12645865
> 
> 赞同：0
> 
> 时间：2012-09-28T19:02:19.163
> 
> 标签：jsf, myfaces, tomahawk, datascroller

我正在使用 t:dataScroller 从 at:dataTable 滚动一些数据，它工作正常，除了一件事：每次触发导致屏幕刷新的操作时，t:dataScroller 的索引设置为 1。

更清楚一点：当我在第二页（索引== 2）并且屏幕刷新动作触发时，刷新后，dataTable的数据仍然来自索引2，但dataScroller显示正在显示的页面是第一个。

我以这种方式使用 dataScroller：

```
<t:dataScroller for="myDataTable" id="myDataScroller" paginator="true"
    paginatorMaxPages="#{myBean.paginatorMxPgs}" 
    pageCountVar="pgCount" pageIndexVar="#{myBean.curPg}"
    actionListener="#{myBean.pgListener}">

<f:facet name="prv">
    <h:panelGroup rendered="#{myBean.curPg > 1}" />
</f:facet>
<f:facet name="nxt">
    <h:panelGroup rendered="#{myBean.curPg != pgCount}"/>
</f:facet>
</t:dataScroller> 
```

我正在使用**tomahawk20-1.1.11.jar**和**myfaces-api-2.0.4.jar**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T06:48:09.617

用于将滚动条设置为首页，在提交按钮上设置 actionlistener。

```
<t:commandButton actionListener="#{IFussBean.resetDataScroller}" 
                   action="#{IFussBean.searchLocation}" 
                   image="images/submit-button.png">    
  </t:commandButton> 
```

捆绑：

如果是数据表

```
<t:dataTable id="data"
             headerClass=""
             footerClass=""
             rowClasses="text_holder"
             columnClasses="search_img,search_txt"
             var="item"
             value="#{IFussBean.searchVideoList}"
             preserveDataModel="false"
             rows= "6"
             binding="#{IFussBean.iFussData}"
 > 
```

在你的 Bean 中声明 HtmlDataTable，定义它的 setter getter 如下：

```
private HtmlDataTable iFussData; 
```

获取器和设置器

```
 public HtmlDataTable getiFussData() {
        return iFussData;
    }
    public void setiFussData(HtmlDataTable iFussData) {
        this.iFussData = iFussData;
    } 
```

现在在 Bean 中定义 ActionListener 方法：

```
public void resetDataScroller(ActionEvent e) {
       if(iFussData!= null) {
           iFussData.setFirst(0);
       }
} 
```

当您进行新搜索时，您的页面将设置为第一页。

/ ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** ***** / 如果您正在使用`<rich:dataGrid>`并且您的`<t:dataScroller>`然后是滚动条

```
 <rich:dataGrid 
            id="data"
            var="item" 
            columns="3" 
            elements="6" 
            width="600px"
            value="#{IFussBean.searchVideoList}"
            binding="#{IFussBean.iFussDataGrid}"
    > 
```

在 Bean 中声明 HtmlDataGrid：

```
private HtmlDataGrid iFussDataGrid; 
```

它的 getter 和 setter

```
public HtmlDataGrid getiFussDataGrid() {
        return iFussDataGrid;
    }

 public void setiFussDataGrid(HtmlDataGrid iFussDataGrid) {
            this.iFussDataGrid = iFussDataGrid;
        } 
```

现在在 Bean 中定义它的动作监听器，它将在按下命令按钮时调用 search ：

```
 public void resetDataScroller(ActionEvent e) {
               if(iFussDataGrid != null) {
                   iFussDataGrid.setFirst(0);
               }
          } 
```

在命令按钮上调用 ActionListener

```
<h:commandButton styleClass="submit-button" actionListener="#{IFussBean.resetDataScroller}" action="#{IFussBean.searchLocation}" image="images/submit-button.png"/> 
```

它也给出了欲望的结果。

# c# - TFS 2012 Build 在日志中打印一条消息

> ID：12645866
> 
> 赞同：2
> 
> 时间：2012-09-28T19:02:19.163
> 
> 标签：c#, tfs, tfsbuild, tfs-sdk

对于 TFS 2010，我们使用：

```
context.TrackBuildMessage(message, BuildMessageImportance.High);
context.TrackBuildWarning(message);
context.TrackBuildError(message);
context.TrackBuildWarning(message); 
```

对于 TFS 2012，似乎只有上下文中的 Track 方法。但是，我测试和跟踪错误的尝试不起作用，并且在构建日志中没有显示任何内容。

```
context.Track(new CustomTrackingRecord(message, System.Diagnostics.TraceLevel.Error)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T19:26:56.777

在 TFS 2012 中，您需要使用[`TrackingExtensions`](https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2013/gg433607(v%3Dvs.120))该类。

只需向此命名空间添加一个 using 即可访问这些方法。

```
using Microsoft.TeamFoundation.Build.Workflow.Activities; 
```

# django - django模型表单继承

> ID：12645875
> 
> 赞同：0
> 
> 时间：2012-09-28T19:03:13.343
> 
> 标签：django, django-forms

我在我的模型表单中使用 django modelform 继承，但它似乎在这里不起作用是我的代码示例

```
class ArticleForm(forms.ModelForm):
  title = forms.CharField(required=True)
  sites = forms.ModelMultipleChoiceField(required=True, queryset= Sites.objects.all().order_by('name'), widget=forms.SelectMultiple())

class ArticleAddForm(ArticleForm):
   class Meta(ArticleForm.Meta):
       exclude = ('sites',) 
```

我想从“ArticleAddForm”中排除“站点”，但是在验证它时会引发表单验证错误站点字段，请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T19:34:42.930

我相信，ModelForms 不能很好地处理继承。

可能你能做的最好的事情就是删除`required`子类中的标志：

```
def __init__(self, *args, **kwargs):
    super(ArticleAddForm, self).__init__(*args, **kwargs)
    self.base_fields['sites'].required = False
    self.base_fields['sites'].widget = HiddenInput() # if you want 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T19:42:08.173

在您看来，您需要使用 Article 对象初始化 ArticleAddForm 以填充空白字段，即排除字段。例如：

```
sites = Sites.objects.all()    # modify this according to your needs
article = Article(title='', sites=sites)
form = ArticleAddForm(request.POST, instance=article)
form.save() 
```

# javascript - Objective-C Dropbox SDK 文件下载 - 监听下载完成

> ID：12645877
> 
> 赞同：0
> 
> 时间：2012-09-28T19:03:25.000
> 
> 标签：javascript, objective-c, cordova, phonegap-plugins

我正在从 PhoneGap 应用程序调用 Objective C 以使用 Dropbox 执行功能。

我遇到的问题是，在将文件从 Dropbox 下载到手机的本地文件系统之前，我对 JavaScript 的回调正在触发。

这是我的目标 C 方法，它开始从 Dropbox 下载文件 -

```
- (void) restore:(CDVInvokedUrlCommand*)command
{

    CDVPluginResult* pluginResult = nil;
    NSString* javaScript = nil;
    NSLog(@"Dropbox restore method is executing");

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0]; // Get documents directory
    NSString *localPath = [documentsDirectory stringByAppendingPathComponent:@"PocketHealth-backup.bk"];
    NSString *dropBoxFile = @"/PocketHealth-backup.bk";

    [[self restClient] loadFile:dropBoxFile intoPath:localPath];

    pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK];
    javaScript = [pluginResult toSuccessCallbackString:command.callbackId];

    [self writeJavascript:javaScript];

} 
```

Objective C 中有一个方法在 Dropbox 文件下载到手机时执行。在 Dropbox 文件下载完成后，我确实得到了此方法输出的 NSLog。问题是我需要知道此事件何时发生，然后才能返回我的 JavaScript 回调。

这是 Dropbox 文件下载完成时执行的方法 -

```
- (void) restClient:(DBRestClient*)client loadedFile:(NSString*)localPath 
{
    NSLog(@"File loaded into path: %@", localPath);
} 
```

How can I wait until the Dropbox file download is complete before returning the JavaScript callback that is in the restore method?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:17:38.993

Instead of writing the JavaScript into a local variable inside your `restore` method, add it as an iVar to your class, remove the call to `writeJavascript:` in your `restore` method and call `writeJavascript` from `restClient:loadedFile:`. Then it should get called when the download finished instead of when the actual download is started.

```
- (void) restore:(CDVInvokedUrlCommand*)command
{

    CDVPluginResult* pluginResult = nil;
    NSLog(@"Dropbox restore method is executing");

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0]; // Get documents directory
    NSString *localPath = [documentsDirectory stringByAppendingPathComponent:@"PocketHealth-backup.bk"];
    NSString *dropBoxFile = @"/PocketHealth-backup.bk";

    [[self restClient] loadFile:dropBoxFile intoPath:localPath];

    pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK];
    self.javaScript = [pluginResult toSuccessCallbackString:command.callbackId];
}

- (void) restClient:(DBRestClient*)client loadedFile:(NSString*)localPath 
{
    NSLog(@"File loaded into path: %@", localPath);
    [self writeJavascript:javaScript];
} 
```

# android - Android 检查识别的传感器

> ID：12645879
> 
> 赞同：0
> 
> 时间：2012-09-28T19:03:33.920
> 
> 标签：android, sensors

我需要一点帮助：如何检查已识别的传感器？因为一个做了一个项目并且在 gs2 上有所有的传感器（acc、gyro 等）但是在银河王牌上只有我知道的 acc。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:16:31.553

这很可能是您在以编程方式检查功能时正在寻找的内容

```
PackageManager PM= this.getPackageManager();
boolean gps = PM.hasSystemFeature(PackageManager.FEATURE_LOCATION_GPS);
boolean acc = PM.hasSystemFeature(PackageManager.FEATURE_SENSOR_ACCELEROMETER); 
```

此链接解释了您可以采取哪些措施来过滤市场中的应用程序，具体请查看该部分

我想我找到了...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T09:42:54.920

1.：获取传感器管理器：

```
`mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);` 
```

2.：获取传感器列表：

```
List< sensor> sensorList = mSensorManager.getSensorList(Sensor.TYPE_ALL); 
```

3.：打印传感器：

```
for( Sensor s : sensorList) {
 Log.d("sensor", "Name=" + s.getName());
 Log.d("sensor", "Vendor=" + s.getVendor());
 Log.d("sensor", "Version=" + s.getVersion());
 Log.d("sensor", "MaximumRange=" + s.getMaximumRange());
 Log.d("sensor", "MinDelay=" + s.getMinDelay());
 Log.d("sensor", "Power=" + s.getPower());
 Log.d("sensor", "Type=" + s.getType());
} 
```

# c++ - MainWindow 中的 QDialog 的全屏显示仅有时有效

> ID：12645880
> 
> 赞同：2
> 
> 时间：2012-09-28T19:03:44.007
> 
> 标签：c++, qt, fullscreen, qdialog

（在 Qt 4.8 和 Ubuntu 12.10 上使用 C++ 进行测试）

我有一个显示 QDialog 的主窗口。当我将 Dialog 窗口全屏显示时，它似乎并不总是有效，即使它似乎是一个正确的窗口。意思是，窗口可以全屏显示，尽管只是有时。

有人有想法吗？我知道 Qt 声明它可能不适用于所有 X 环境，但它不会那么糟糕，不是吗？

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    QDialog* d = new QDialog();
    d->setModal(false);
    d->show();       
    qDebug() << d->isWindow();

    // works most of the times, though not always:
    // d->showFullScreen();

    // sometimes works, sometimes it doesn't:
    QTimer::singleShot(2000, d, SLOT(showFullScreen()));
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-06T09:42:39.347

DomTomCat 在 stackoverflow 上展示了一种检测 Ubuntu 的方法，并且 QDialog 问题与 Metacity（Ubuntu 的默认窗口管理器）中的错误有关。

Metacity 管理对话框和主窗口的方式不同，它必须被欺骗，使其认为 QDialog 是一个普通窗口。为了使用 QDialog 类这样做，必须更改窗口标志。

无需执行 DomTomCat 所说的所有步骤，您可以检测会话，然后只需

```
//example inside the QDialog
this->setWindowFlags(Qt::Window);
this->showFullScreen(); 
```

该错误之前已报告（并被忽略），但据我所知，这是第一个简单的解决方法。

[https://bugreports.qt.io/browse/QTBUG-16034](https://bugreports.qt.io/browse/QTBUG-16034)

[https://git.gnome.org/browse/metacity/tree/src/core/window.c#n6326](https://git.gnome.org/browse/metacity/tree/src/core/window.c#n6326)

Ubuntu 也可以使用 compiz。这可以在以下位置看到：

```
grep DefaultProvider-windowmanager /usr/share/gnome-session/sessions/* 
```

此致，

伊克尔·德·埃卡尼兹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T16:35:52.297

我找到了一种可行的方法。我不知道为什么它与调用相比有效`showFullScreen()`。我想这不是完美而干净的解决方案。这肯定可以适应其他环境变量和 X 会话。

```
 QDialog* d = new QDialog();
    d->setModal(false);
    d->show();     

    const QString session = QString(getenv("DESKTOP_SESSION")).toLower();
    QByteArray geometry;
    if (session == "ubuntu") {
        geometry = _d->saveGeometry();
        d->setFixedSize(qApp->desktop()->size());
        d->setWindowFlags(Qt::FramelessWindowHint);
        d->setWindowState( d->windowState() | Qt::WindowFullScreen);
        d->show();
        d->activateWindow();
    } else {
        d->showFullScreen();
    } 
```

为了从全屏状态恢复，这已经奏效

```
 if (session == "ubuntu") {
        d->setMaximumSize(QWIDGETSIZE_MAX, QWIDGETSIZE_MAX);
        d->setMinimumSize(0,0);
        d->restoreGeometry(geometry);
        d->setWindowFlags(Qt::Dialog);
        d->show();
        d->activateWindow();
    } else {
        d->showNormal();
    } 
```

# asp.net-mvc-3 - 如何将部分视图帖子中的视图返回到控制器？

> ID：12645881
> 
> 赞同：0
> 
> 时间：2012-09-28T19:03:44.750
> 
> 标签：asp.net-mvc-3, asp.net-mvc-partialview, ajax.beginform

所以我有一个带有文本框和保存按钮的局部视图“_Customer”。目前，部分视图代码，我有这个：

```
@model CompositeViews.Models.Customer

@using (Ajax.BeginForm("Edit", "Customer", new AjaxOptions { HttpMethod = "Post",     InsertionMode = InsertionMode.Replace, UpdateTargetId = "customerDiv" }))
{
<div id="customerDiv">
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Customer</legend>

        @Html.HiddenFor(model => model.CustomerId)

        <div class="editor-label">
            @Html.LabelFor(model => model.Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Name)
            @Html.ValidationMessageFor(model => model.Name)
        </div>

        <p><input type="submit" value="Save" /></p>
    </fieldset>
</div>
} 
```

该视图与称为 index 的父视图一起存在（它还提供了部分视图所依赖的模型）：

```
@model CompositeViews.ViewModels.CompositeViewModel
<h2>Index</h2>
@Html.Partial("_Customer", Model.Customer) 
```

父视图名为 Index.cshtml，由一个简单的控制器操作提供。当我在局部视图中单击“保存”按钮时，它会转到相应控制器上的适当操作，但我不太确定如何将更新的模型数据返回到局部视图中。

在所有示例中，它是一个执行异步发布的表单，但 UpdateTargetId 以 a 为目标，然后填充某种类型的更新内容。这看起来非常简单明了。

我正在苦苦挣扎的是如何使用现有视图（_Customer）返回相同的表单以及更新的模型信息。基本上，它是一个 BeginForm，它以控制器操作的结果为目标，而不是其他不属于表单的 div。

我不想手动重建 _Customer 视图通过 MVC 框架为我执行的所有 HTML 并将其返回以进行渲染。我想我在将数据提交给控制器的部分视图中遇到了表单，然后需要一种方法让同一视图在从操作方法返回时重新绘制自身。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T20:19:41.050

我希望我说得对，你想在回帖中显示你的更新。在这种情况下，你可以试试这个：

```
<div id="customerDiv">
  @Html.RenderAction("Edit", "Customer", Model)
</div> 
```

并把你`@using (Ajax.BeginForm())`的编辑结果。

# javascript - ES6 什么时候可以在 IE 中使用？

> ID：12645891
> 
> 赞同：19
> 
> 时间：2012-09-28T19:04:29.510
> 
> 标签：javascript, ecmascript-harmony

如果您真的知道答案或可以提供一些信息，这是一个合理的问题。

Firefox 和 Chrome 一直致力于在 ES Harmony 中包含许多功能......

我的问题实际上是两部分：

1.  有谁知道 ES6 什么时候会暂时定型？
2.  Internet Explorer 支持这些功能需要多长时间？我假设它将是IE11。IE11 有预计的发布日期吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-28T19:43:58.413

该草案应该在今年年底之前大致完成功能，并计划在明年年底之前完成新标准。浏览器需要多长时间才能完全实现它是另一个问题（ES6 会非常大）。

我当然不能回答（2），我想即使是 MS 自己也不能在这一点上回答。但我知道他们已经开始对一些特性进行原型设计，比如块作用域。

# javascript - Google App Engine Channel API Javascript 客户端：手动设置轮询计时器

> ID：12645894
> 
> 赞同：2
> 
> 时间：2012-09-28T19:04:40.703
> 
> 标签：javascript, google-app-engine, polling, channel-api

我正在编写一个 Web 客户端，它使用 Google 的官方 GAE Channel API Javascript 客户端支持从 Google App Engine Java 服务器发送的消息。我想知道我是否可以手动设置我的客户端对服务器进行轮询频率的计时器，以获取来自频道的新消息。

我希望在客户端轮询之间使用较慢的计时器，因为我正在尝试使用浏览器检查工具（例如 Firefox 的 Firebug）来调试返回给客户端的消息，并且客户端的轮询发出大量 GET HTTP 请求使这变得困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T21:04:22.393

在生产中，客户端使用长轮询（即 Comet）。你不应该看到频繁的民意调查。不幸的是，它在进行持续轮询的 dev_appserver 上表现不同。

不幸的是，这对你没有帮助。

我建议使用 Chrome/Chromium，它不会发出每个 XHR GET 请求。

# arrays - AS3 Splice(:ed) 并想“重新索引”？

> ID：12645896
> 
> 赞同：0
> 
> 时间：2012-09-28T19:04:48.100
> 
> 标签：arrays, actionscript-3, splice

好的，所以我有一个这样的数组。

```
myArray:Array []

myArray.push(Object) // x 4\. 
```

我的数组中有 4 个对象。然后我拼接第二个。给我留下一个看起来像这样的数组。1,3,4。现在......我想让这个数组看起来像这样：1,2,3。我希望 3 和 4 能够简单地从他们自己的位置切换到少一个位置。

我知道这是可能的，几年前我有一个朋友为我做过。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T20:44:42.490

我认为你在使用拼接时失败了。splice 和 slice 是数组 slice 的不同方法，不会更改原始数组，而是返回具有切片间隙的新数组

例子

```
var arr:Array = ["Cat","Dog", "Mouse", "Cow"];
trace(arr.slice(1,3));// output : Dog,Mouse
trace(arr.slice(2));//output: Mouse,Cow
trace(arr) //output: Cat,Dog,Mouse,Cow 
```

所以当你调用 arr[3] 你得到 Cow 但你的数组根本没有改变

splice 修改您的原始数组

```
var arr:Array = ["Cat","Dog", "Mouse", "Cow"];
arr.splice(1,1); // output: 0->Cat,1->Mouse,2->Cow 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T19:13:26.887

> 我想让这个数组看起来像这样：1,2,3

所以......只是`pop()`最后一个元素：

```
myArray:Array = [1, 2, 3, 4];
myArray.pop();
trace(myArray);  // Prints: 1,2,3 
```

> 我希望 3 和 4 能够简单地从他们自己的位置切换到少一个位置。

嗯...这正是删除第二个元素所做的...

如果您想要的最终结果是将第二个元素放在*end*，即：

```
Before: [1, 2, 3, 4]  --> After [1, 3, 4, 2] 
```

然后，您可以分两步执行此操作：

```
var spliced = myArray.splice(1, 1); // Remove the second element and return it 
myArray.push(spliced);              // Push it to the end of the array 
```

从技术上讲，您可以一步完成，因为拼接将首先发生：

```
myArray.push(myArray.splice(1, 1)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T20:34:31.790

我运行了你的伪代码->结果如下：

[对象猫],[对象鼠标],[对象牛]

跟踪时没有索引..还有一点，我有一些代码

```
trace(arr[0] , arr[1], arr[2]); 
```

我仍然得到

[对象猫],[对象鼠标],[对象牛]

索引在 AS3 中自动正常。

```
package regression 
{
    import flash.display.Sprite;
    /**
     * ...
     * @author Arthur Wulf White
     */
    public class Check_array_index_test_1 extends Sprite
    {

        public function Check_array_index_test_1() 
        {
            var arr: Array = new Array();
            arr.push(new Cat, new Dog, new Mouse, new Cow);
            trace(arr);
            arr.splice(1, 1);
            trace(arr);
                    trace(arr[0] , arr[1], arr[2]);
        }

    }

}

class Cat { }
class Dog { }
class Mouse { }
class Cow {} 
```

# database - 如何按关系的数量或成员对 Doctrine DQL 查询进行排序？

> ID：12645897
> 
> 赞同：5
> 
> 时间：2012-09-28T19:04:53.923
> 
> 标签：database, symfony, doctrine, doctrine-orm, dql

我正在尝试创建一个查询以从 Doctrine 数据库中检索对象，按特定一对多关系的成员数排序。

更具体地说：我有两个实体：个人和联邦。一个人可以是一个联盟的成员（Person 有'federation' 关系），一个联盟可能有*n*个人（Federation 作为'people' 关系）。

我想创建一个 DQL 查询，该查询将返回联邦列表，按该联邦成员的人数排序。这些方面的东西：

```
SELECT f FROM AcmeStatsBundle:Federation f ORDER BY [number of members of f.people] 
```

那将是第一步。还有一个额外的第二步，我不知道是否可以通过单个查询来实现，这将在计数之前过滤关系的成员。像这样：

```
SELECT f FROM AcmeStatsBundle:Federation f ORDER BY [number of (f.people p where p.attr = value)] 
```

第二个将是最佳结果，但第一个满足我的需要，如果第二种情况在单个查询中不可行的话。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-17T08:47:14.390

您可以按照以下方式做一些事情：

```
public function getFederationsOrderedByNumberOfPeople()
{
    return $this->createQueryBuilder('f')
        ->addSelect('COUNT(p) AS HIDDEN personCount');
        ->leftJoin('f.people', 'p');
        ->groupBy('f')
        ->orderBy('personCount', 'DESC');
} 
```

在 Doctrine 2.2 中添加了 HIDDEN 关键字，这意味着所选字段不会出现在结果中，在这种情况下，这意味着您只需返回实体而不是数组。

参考 DQL SELECT 文档：[http ://doctrine-orm.readthedocs.org/en/latest/reference/dql-doctrine-query-language.html#dql-select-examples](http://doctrine-orm.readthedocs.org/en/latest/reference/dql-doctrine-query-language.html#dql-select-examples)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-29T09:33:06.107

您可以在 DQL 中使用 5 个聚合函数（Doctrine 2.2）：`AVG`、`COUNT`、`MIN`和.`MAX``SUM`

以下查询应该有效：

```
SELECT f
FROM AcmeStatsBundle:Federation f
LEFT JOIN f.people p
GROUP BY f.id
ORDER BY COUNT(p)
WHERE p.attr = :some_value 
```

有关更多 DQL 技巧，我建议您查看[官方 Doctrine 文档](http://docs.doctrine-project.org/en/latest/reference/dql-doctrine-query-language.html#aggregate-functions)。

# android - 滑动活动以更改android中的另一个活动并在单个视图中显示多个活动？

> ID：12645898
> 
> 赞同：0
> 
> 时间：2012-09-28T19:04:56.117
> 
> 标签：android, git, page-flipping

嗨，我需要在每个活动页面上滑动以更改下一个视图。如何在 android 中为滑动效果设置动画。我怎样才能刷活动（Mi firstquestion）

我 的第二**个问题在单个视图中显示多个活动？**

例如我有 4 个活动 Activity(1,2,3,4)。在屏幕中，第二个活动应该在中心显示接下来的两个活动（2 和 3 活动）角落显示在页面的左侧和右侧，如果他再次滑动它应该是来自（123）活动的（2,3,4） . 我该怎么做我需要的图像如下

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:21:44.130

如果您在一个屏幕上有多个活动，您可能应该考虑使用`Fragment`s 代替。对于在活动之间滑动，我会使用 a`ViewPager`并在`Fragment`s 之间滑动。

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

[http://android-developers.blogspot.com/2011/08/horizo​​ntal-view-swiping-with-viewpager.html](http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html)

[http://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/](http://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/)

# mysql - 如何在 MySQL 中实现这一点？

> ID：12645900
> 
> 赞同：0
> 
> 时间：2012-09-28T19:05:07.693
> 
> 标签：mysql

这就是我希望单独使用 MySQL 做的事情：（没有 PHP）

PHP代码：

```
$result=mysql_query("select f2 from t1 where f1=constant limit L");

while( $data = mysql_fetch_row($result) )
  mysql_query("update t2 set f4=f4-1 where f3={$data[0]} limit 1"); 
```

如果你不懂 PHP：

```
select f2 from t1 where f1=constant limit L;

for each f2 (from above result) as F:
  update t2 set f4=f4-1 where f3=F limit 1; 
```

如何在 MySQL 中实现这一点？

**细节：**

第一次选择的输出中可能有重复的值，并且对于每个重复的值，都会运行更新语句。因此，如果值“123”在第一个选择的输出中出现三次，则 f4 将更新为 f4-3，其中 f3=123。

'L'是表't1'中满足“f1=constant”条件的次数；这个数字以前是已知的，因此用作限制。

使用限制 1 是因为字段“f3”中的值是唯一的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:07:27.843

使用此查询，并提供缺少的参数：

```
UPDATE t2 SET f4 = f4 - 1

WHERE f3 IN (SELECT f2 FROM t1 WHERE f1 = ? LIMIT ?); 
```

* * *

如果您想为匹配`t2.f4`中的每一行进行修改`f2`（假设它`f2.t1`不是唯一的），那么这应该有效：

```
UPDATE t2, t1 SET t2.f4 = t2.f4 - 1
WHERE t2.f3 = t1.f2
  AND t1.f1 = ?; 
```

# asp.net - 如果数据字段为空，则删除网页上的空间 asp.net c#

> ID：12645903
> 
> 赞同：2
> 
> 时间：2012-09-28T19:05:28.007
> 
> 标签：asp.net, null

早上好，我对 asp.net 很陌生。如果该字段为空，我正在尝试删除空格。我从您的其他帖子中发现，我需要确定该字段是否为空，然后将可见性设置为 false，但是我不确定如何将其放入我的页面中。这是我的代码：

```
<asp:Label ID="MailingAddress" runat="server" Text='<%# Bind("MailingAddress") %>' /> 
```

这是我在您的网站上找到的：

```
=IIF(First(Fields!AddressLine2.Value, "dsPersonData") = "",False,True) 
```

我很尴尬地说我什至不确定这是否是 asp.net c# 代码。我将不胜感激您能给我的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T19:08:05.460

如果你想在 null 的情况下隐藏，试试这个

```
<asp:Label ID="MailingAddress" runat="server" 
   Text='<%# Eval("MailingAddress") %>' 
   Visible='<%# Eval("MailingAddress") != null %>'/> 
```

而这个，也要考虑到空字符串

```
<asp:Label ID="MailingAddress" runat="server" 
   Text='<%# Eval("MailingAddress") %>' 
   Visible='<%# !string.IsNullOrEmpty(Eval("MailingAddress") as string) %>'/> 
```

# vba - 连续（报告）视图的详细信息部分中的项目未被唯一操作

> ID：12645908
> 
> 赞同：0
> 
> 时间：2012-09-28T19:05:48.167
> 
> 标签：vba, ms-access

我有一份需要显示多张图片的报告。在我的报告的详细信息部分，我有一个未绑定的 imageframe 对象和一个包含此图像绝对路径的文本框。我有一个在我的应用程序的其他地方使用的函数，它显示一个图像，给定一个路径和一个图像框架。（连续视图，因此详细信息部分中有多个字符串）。

在 on current 属性中，以及在加载时（我在详细信息部分添加了一个按钮进行测试），我执行代码 showpic(me.imageframe, me.imagepath)。

我的问题是我的报告中的每个图像帧都被渲染到相同的（第一）路径。代码不会针对我报告中的每个元素单独执行。

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:38:32.720

使用 Access 2010、图像框架和以下代码：

```
Private Sub Detail_Format(Cancel As Integer, FormatCount As Integer)
    'Image11 is an image frame and MyImage is a path to a bmp
    Me.Image11.Picture = Me.MyImage
End Sub 
```

我为每个细节项目获得了一个新图像，但仅在打印预览中。所有图像都是bmp。

# android - 可以对扬声器输出进行实时监控吗？

> ID：12645914
> 
> 赞同：2
> 
> 时间：2012-09-28T19:06:47.410
> 
> 标签：android, audio, real-time, monitoring, speaker

我希望创建一个应用程序，在屏幕上显示愚蠢的颜色，这取决于扬声器发出的声音，特别是声音的强度，并且尽可能实时。

我认为有两种可能的情况可以让我到达我想要的地方：

1) 我可以播放我自己的音乐/声音文件并从我自己调用的 MediaPlayer 或

2）我可以只监视连接到扬声器的内部流，然后调用我自己的 MediaPlayer 和 sound.start()。

这两种方法中的一种或两种可能吗？

我已经查找了两种可能的方式，但都没有找到，特别是 AudioTrack，经过一番摸索后，似乎只能使用麦克风输入，这不是我想要的。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T20:46:19.063

我自己没有使用过它，但[Visualizer](http://developer.android.com/reference/android/media/audiofx/Visualizer.html)看起来像是为此目的而设计的。您可以针对特定的 AudioTrack 或 MediaPlayer，或整个输出混音。

[这篇文章](https://stackoverflow.com/questions/3571814/accessing-the-android-media-stream-for-audio-visualization)提出了另一种策略，使用未记录的方法 MediaPlayer.snoop()（至少发布 6）。不过，我并不完全遵循它。我会看看你是否可以让 Visualizer 工作。

[这篇文章](https://stackoverflow.com/questions/6317842/how-to-draw-waveform-of-androids-music-player)还链接到一些示例。

# batch-file - 使用 cmd 的 Start 命令运行 exe。在本地工作，但不在远程

> ID：12645918
> 
> 赞同：1
> 
> 时间：2012-09-28T19:06:57.417
> 
> 标签：batch-file, cmd, psexec

一些背景知识：我们正在尝试在服务器上自动安装代理。自动化工作流程将检查需要此安装的服务器。如果是这样，工作流会复制必要的安装文件以及 .cmd 批处理文件。

在本地调用此 .cmd 脚本时，安装工作正常。但是，当尝试从工作流服务器远程调用此脚本时，它会挂在批处理中的某一行。来自脚本 se_install.cmd 的片段：

```
echo Installing SE 9.4 Agent
start "" /wait "Installcimextensions.exe" -i silent
echo Install completed 
```

我们正在使用 psexec 远程调用上述脚本，使用我们用来执行其他进程的许多其他脚本的管理员级别帐户。以下是工作流服务器将运行的内容：

```
c:\scripts\psexec.exe -accepteula \\targetserver -u domain\username -p password \\targetserver\c$\temp\se\se_install.cmd 
```

远程运行时，我看到的最后一个输出是“Installing SE 9.4 Agent”。在那之后，它似乎无限期地挂起。同时，我在本地服务器上查看正在运行的进程列表，而 installcimextensions.exe 从未像应有的那样出现在此列表中。我找不到远程运行“开始”命令的任何已知问题，但我认为这可能是问题的一部分。或者这可能是我设置引号的方式或“-i silent”标志的问题？我还尝试用调用另一个包含此行但没有骰子的批处理文件来替换批处理中的这个“开始”行。

有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:20:44.377

在第一次回显之后`cd c:\temp\se\se_install.cmd`，事情是在本地运行您当前的工作目录位于具有 .exe 的文件夹中，但是当您远程运行它时，您当前的工作目录是默认目录，您必须将其更改为您的 .bat工作

# c++ - Cmake 缺少 DLL

> ID：12645920
> 
> 赞同：1
> 
> 时间：2012-09-28T19:07:10.900
> 
> 标签：c++, dll, cmake

我正在尝试使用 Cmake，但是当我开始时，我缺少 DLL：libgmp-10.dll

现在我知道这通常是由于错误/缺少环境变量而出现的，但这是不可能的，我既有 Mingw 路径，也有 mingw/bin，此外我已经使用 mingw 一年多了，如果它丢失了，我会有有问题。

是什么原因造成的？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:39:36.573

[我建议您从这里](http://www.cmake.org/cmake/resources/software.html)尝试预构建版本。

解决问题的另一种方法是找到丢失的 dll 并将其与您构建的二进制文件放在一起。

# c# - 一般包装方法以找到性能？

> ID：12645924
> 
> 赞同：0
> 
> 时间：2012-09-28T19:07:26.623
> 
> 标签：c#, performance-testing

我正在尝试包装一堆与 API 服务器交互的方法，以测试每个方法需要多长时间。

例如我想包装这些方法：

```
 public DCResultOfValidateSiteForUser ValidateSiteForUser(int UserId, int UserType, int SiteId)
    {
        return Service.ValidateSiteForUser(UserId, UserType, SiteId);
    }
    public DCResultOfIsSystemInStandby IsSystemInStandby()
    {
        return Service.IsSystemInStandby();
    } 
```

这是我想围绕上述方法的内容：

```
 public static T TestPerf<T>(Action action)
    {
        Stopwatch sw = new Stopwatch();
        sw.Start();

        action();

        sw.Stop();

        StackTrace stackTrace = new StackTrace();
        StackFrame stackFrame = stackTrace.GetFrame(1);
        MethodBase methodBase = stackFrame.GetMethod();

        TextWriter tw = new StreamWriter("perfLog.txt", true);
        string s = String.Format("{0} {1}{2,15}", String.Format("{0:M/d/yyyy HH:mm:ss}", DateTime.Now), methodBase.Name, sw.Elapsed);
        tw.WriteLine(s);
        tw.Close();

        return default(T);
    } 
```

但是，由于 Action 返回 void。然后我做了：

```
 public DCResultOfValidateSiteForUser ValidateSiteForUser(int UserId, int UserType, int SiteId)
    {
        TestPerf<DCResultOfValidateSiteForUser>(() => Service.ValidateSiteForUser(UserId, UserType, SiteId));
        return Service.ValidateSiteForUser(UserId, UserType, SiteId);
    }
    public DCResultOfIsSystemInStandby IsSystemInStandby()
    {
        TestPerf<DCResultOfIsSystemInStandby>(() => Service.IsSystemInStandby());
        return Service.IsSystemInStandby();
    } 
```

我想要的是：

```
 public DCResultOfIsSystemInStandby IsSystemInStandby()
    {
        return TestPerf<DCResultOfIsSystemInStandby>(() => Service.IsSystemInStandby());
    } 
```

我不想将秒表代码放入每个方法中，因为有 100 个。

我感谢可以提供的任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:15:13.123

这应该编译而不是执行两次方法：

```
public DCResultOfValidateSiteForUser ValidateSiteForUser(int UserId, int UserType, int SiteId)
{
    DCResultOfValidateSiteForUser result = null;
    TestPerf<DCResultOfValidateSiteForUser>(() => result = Service.ValidateSiteForUser(UserId, UserType, SiteId));
    return result;
} 
```

# django - Django urls识别错误

> ID：12645928
> 
> 赞同：0
> 
> 时间：2012-09-28T19:08:05.847
> 
> 标签：django, django-urls

我有下面列出的项目`myproject`和应用程序。`myapp`当我尝试 url 时`/add`，我收到此错误：

```
Page not found (404)
Request Method: GET
Request URL:    http://localhost:8000/add/
Using the URLconf defined in myproject.urls, Django tried these URL patterns, in this order:
^$
The current URL, add/, didn't match any of these. 
```

### 设置配置：

```
ROOT_URLCONF = 'myproject.urls' 
```

### 我的项目/urls.py

```
from django.conf.urls import patterns, include, url

urlpatterns = patterns('',
    url(r'^$', include('myapp.urls')),
) 
```

### 我的应用程序/urls.py

```
from django.conf.urls import patterns, include, url

urlpatterns = patterns('myapp.views',
    url(r'^$', 'main'),
    url(r'^add/', 'foo'),
) 
```

### 我的应用程序/views.py

```
from django.shortcuts import render

def main(request):
    return render(request, "main.html", {'test': 1})

def foo(request):
    return render(request, "add.html") 
```

### 模板/main.html

```
{{ test }} 
```

### 模板/add.html

```
{{ test }} 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T19:09:59.150

这一行：

```
url(r'^$', include('myapp.urls')), 
```

意味着只有*完全空*的 URL 将被传递给 myapp 包含。你是这个意思：

```
url(r'^', include('myapp.urls')), 
```

# html - 如何在 mailto 链接中编码空格以创建超链接

> ID：12645931
> 
> 赞同：3
> 
> 时间：2012-09-28T19:08:26.533
> 
> 标签：html, mailto

我正在使用 Outlook 2007，并希望在 mailtolink 的 body 参数中提供一个指向站点的超链接。

该网站的链接中有空格。如果我尝试使用 %20，则会呈现空白，但问题出在 Outlook 中，实际上是超链接的链接部分是从开始到第一个空白。

像这样：

**www.my** site.aspx

所以这里的粗体是实际的超链接。

有谁知道这个问题的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T22:27:28.430

添加`<`并`>`围绕 URL 和 Outlook 将 URL 保持在一起，忽略空格。

# php - 维护未被 javascript escape() 函数转义的字符

> ID：12645932
> 
> 赞同：2
> 
> 时间：2012-09-28T19:08:33.603
> 
> 标签：php, javascript, jquery, escaping

我有一些 javascript/jquery 代码需要一个长字符串，并通过 AJAX 请求将其发送到进一步处理它的 php CodeIgniter 函数。调用如下所示：

```
var params = "str="+escape(JSON.stringify($('#element').find('html').get(0).outerHTML));
xmlhttp1 = new XMLHttpRequest();
xmlhttp1.open("POST", "http://www.url.com/controller/function", false);
xmlhttp1.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xmlhttp1.setRequestHeader("Content-length", params.length);
xmlhttp1.setRequestHeader("Connection", "close");
xmlhttp1.send(params); 
```

它可以很好地传递所需的外层HTML，但是 escape() 无法转义某些字符，例如 php 函数所必需的“+”。是否有其他函数可用于转义这些字符，或者我是否需要在将其发送到 php 函数之前手动处理 outerHTML？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T19:11:37.823

我相信你应该使用[`encodeURIComponent`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)而不是`escape`：

```
var params = "str=" + encodeURIComponent(JSON.stringify($('#element').find('html').get(0).outerHTML)); 
```

# casting - 将字段强制转换为 Pig 中的 Bag 数据类型

> ID：12645935
> 
> 赞同：1
> 
> 时间：2012-09-28T19:08:48.840
> 
> 标签：casting, hadoop, apache-pig

假设我在没有模式文件的情况下将包加载到 Pig 中。我知道包中的每个元组都包含1个字段，这也是一个包，例如

```
{
  ({1, 2, 3}),
  ({3,4,5}),
  ({1,2})
} 
```

我想将每个元组的第一个参数放入一个包中。我该怎么做？

```
data = LOAD '/path/to/data' AS (f:bytearray);
data2 = FOREACH data GENERATE (bag)f;  -- this doesn't work 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T21:45:43.633

```
data = LOAD '/path/to/data' AS (f:bag{(n:int)}); 
```

# ruby-on-rails - 如何在活动管理员中获取请求 uri

> ID：12645936
> 
> 赞同：2
> 
> 时间：2012-09-28T19:08:54.410
> 
> 标签：ruby-on-rails, ruby, activeadmin

我有多态模型：

```
class Picture < ActiveRecord::Base
  belongs_to :imageable, :polymorphic => true  
end

class Service < ActiveRecord::Base
  has_many :pictures, :as => :imageable
end

class Product < ActiveRecord::Base
  has_many :pictures, :as => :imageable
end 
```

为了让我的 activeadmin 模型与父母双方（服务和产品）一起工作，我需要执行以下操作：

```
ActiveAdmin.register Picture do
  def who_do_i_belong_to?
    uri = how_to_get_uri?
    if uri.match(/products/) 
      :product
    else
      :service
    end
  end

  belongs_to  who_do_i_belong_to?
end 
```

解决方法似乎有效。我只是想念如何从 who_do_i_belong_to 中获取 url/uri？方法。

```
controller.controller_name # "admin/services", so it is not useful. 
```

提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T05:14:07.633

如果你想为你的多态嵌套资源（`products/pictures`和`services/pictures`）提供 CRUD，你的应用程序需要有类似`/admin/products/:id/images`和的路由`/admin/services/:id/images`。问题是当你`belongs_to :parent`在一个`register`块中使用时，active_admin 只会生成一个嵌套路由`admin/parents/:id/child`，而你需要两个。此外，`:parent`不能由当前url确定，因为调用`belongs_to :parent`本身是用来创建当前url（资源路径）的。

为了解决这个问题，您可以在 configs.rb 中自己定义路由

```
namespace :admin do
  resources :services do
    resources :pictures
  end

  resources :products do
    resources :pictures
  end
end 
```

`controller.belongs_to :service, :product, polymorphic: true`并通过在您的`register`块中写入来告诉 active_admin 使用这些路由`Picture`。

来源：[https ://github.com/gregbell/active_admin/issues/1183](https://github.com/gregbell/active_admin/issues/1183)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:37:25.877

从模型内部请求 uri 是违反 MVC 设计的。您的方法应该在您的应用程序控制器中。当你想注册一张图片时，你的当前控制器应该告诉模型它是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T21:47:45.980

你可以用它`#imageable_type`来找出父模型是什么。

例如：

```
Image.find(1).imageable_type # => "Product" 
```

# sharepoint - 有没有办法限制向 sharepoint 2010 资源添加显式权限？

> ID：12645937
> 
> 赞同：0
> 
> 时间：2012-09-28T19:08:59.263
> 
> 标签：sharepoint, sharepoint-2010

*我们想要一个必须*通过共享点组管理权限的策略。我们希望允许站点所有者在组中添加和删除用户以管理他们对资源的权限，但我们不希望他们能够创建组或将用户显式添加到资源中。这可能吗？我没有看到任何与限制对资源的显式访问而不是通过组访问相关的权限，但我可能会忽略一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:50:08.617

不，这不可能开箱即用。无论用户是否能够管理权限，都没有更精细的设置来仅允许在组中管理。

不幸的是，也没有您可以使用的事件接收器，例如 PermissionAdded 或 PermissionModified，因此您检查这些事情的唯一方法是编写一个计时器作业，每 X 分钟检查一次是否有任何您不想更改的内容. 或者另一种可能性是**不允许**用户管理权限，而是编写自己的权限管理器，它只允许与组一起工作。然后你可以`RunWithElevatedPriviliges`用来执行你的动作。

# database - 未知的数据库格式

> ID：12645940
> 
> 赞同：1
> 
> 时间：2012-09-28T19:09:29.283
> 
> 标签：database, csv, format

我是大数据文件世界的新手，我想知道我的数据格式可能是什么。数据位于一个非常大的文本文件中，其中包含一些匿名医疗记录。我在下面粘贴了一个示例。

我了解每一列是什么，除了第四列，它似乎是与相似行相关的代码。这种类型的数据是否来自关系数据库？如果是这样，这种格式有名称吗？

任何帮助都感激不尽。

```
649|183|Vital Signs|33877743-BE2A-48EE-A53C-D507D59CE540|1169|Blood Pressure (Diastolic)|80
649|183|Vital Signs|33877743-BE2A-48EE-A53C-D507D59CE540|1170|Blood Pressure (Systolic)|140
649|183|Vital Signs|33877743-BE2A-48EE-A53C-D507D59CE540|1174|Vital Signs Delta|0
649|183|Vital Signs|33877743-BE2A-48EE-A53C-D507D59CE540|1175|Pulse|64
649|183|Vital Signs|33877743-BE2A-48EE-A53C-D507D59CE540|1176|Respiratory Rate|14
649|183|Vital Signs|33877743-BE2A-48EE-A53C-D507D59CE540|1178|Weight|73.7
649|183|Vital Signs|33877743-BE2A-48EE-A53C-D507D59CE540|1180|Weight Units|Kilograms
649|183|Vital Signs|ACEFCC5F-C6FA-426F-AC26-7A23D7E6B26E|1169|Blood Pressure (Diastolic)|
649|183|Vital Signs|ACEFCC5F-C6FA-426F-AC26-7A23D7E6B26E|1170|Blood Pressure (Systolic)| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:12:05.983

看起来像一个普通的分隔样式文本文件，`|`用作分隔符。

它不是一个特定的标准，但许多不同的程序可以生成和使用此类文件。无法判断是什么特定的软件产生了这个。

根据平台和语言，您将能够相当容易地解析此文件 - 它看起来每行一条记录，每个字段由`|`.

第四列是[GUID](http://en.wikipedia.org/wiki/Globally_unique_identifier)。GUID 在许多应用程序中非常常见，并且在非常大的数据库和断开连接的数据库场景中多次用作标识符（因为它们的性质意味着不太可能创建重复项）。

# java - 为什么 Java 的 String#replace() 方法对字符和字符串的工作方式不同？

> ID：12645941
> 
> 赞同：4
> 
> 时间：2012-09-28T19:09:30.803
> 
> 标签：java, string

为什么以下表达式评估为假

```
aStr.replace("H", "H") == "Hello" 
```

而这个替代表达式的计算结果为真？

```
aStr.replace('H', 'H') == "Hello" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T19:11:36.903

Java在字符串池中缓存`String`文字，因此如果没有更改，`String`它将从池中获取一个不可变的实例，因此两者都引用内存中的相同实例，因此`==`引用返回`true`

所以要比较字符串对象，你应该使用`equals()`方法/`compareTo()`方法

* * *

**另见**

*   [Java中的字符串池是什么？](https://stackoverflow.com/questions/3801343/what-is-string-pool-in-java)
*   [Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T00:07:45.643

该类`String`的`replace(char, char)`方法扫描寻找匹配的字符。如果没有找到，它会`String`按原样返回主机实例。自然地，通过`==`运算符将返回的引用与原始引用进行比较返回 true，因为这是测试*引用相等性*，并且两个引用是相同的。

但是，如果原始字符串包含一个 'H' 字符（使用您的示例在这里），那么返回的字符串将*与*原始字符串不同（即使它将逐个字符相同）；它将是一个新分配的实例，它将通过引用相等（同样是`==`运算符）进行比较失败。将返回值`String`与原始 via 进行比较`Object#equals()`将返回 true，因为这两个字符串是*等效*的，但它们将是无法通过引用相等性匹配的不同实例。

相比之下，`String#replace(CharSequence, CharSequence)`将目标字符串视为*正则表达式*；它`Matcher#replaceAll()`在内部使用提供的替换序列替换目标模式中的匹配项。

`Matcher#replaceAll()`现在问题归结为即使模式*不*匹配，是否会返回原始字符串或新分配的副本。通过阅读 Oracle 库中的代码，如果`Matcher`找不到匹配的模式，它会返回`CharSequence#toString()`original `CharSequence`，对于`String`对象来说，它只会返回未受干扰的`this`引用。这让我想知道你是否在这里报告了真实的结果。

所提出的问题中一个明显的漏洞是`String`引用的原始内容`aStr`。您可能打算显示一个声明，例如

```
final String aStr = "Hello"; 
```

但你没有。两个表达式的结果应取决于是否`aStr`包含“H”字符。假设它确实如此，我希望这两个表达式都产生错误，假设任何一个重载都没有[字符串*实习。*](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#intern%28%29)`String#replace()`我们知道字符串文字是实习的，但是我们看到在 Oracle 库的这两种`String#replace()`方法的实现中构造的返回值是新分配的，而不是从实习池中提取的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T19:11:37.060

字符串比较应该使用`.equals()`

如果比较是在字符串文字之间进行的，那么 == 比较可能会起作用，因为文字缓存在池中并引用相同的变量。

`equals()`比较值，`==`比较参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T19:13:25.937

使用 String.equals () 比较字符串。

```
 System.out.println((aStr.replace("H","H").equals("Hello"))); 
```

将返回**true**。

# php - 从桌面应用程序获取用户权限并发布到墙上？

> ID：12645942
> 
> 赞同：1
> 
> 时间：2012-09-28T19:09:33.710
> 
> 标签：php, barcode, offline, facebook-wall, rfid

我正在尝试构思一个 facebook 应用程序，用户会：

1- 通过浏览器登录 FB
2- 接受应用程序的权限（offline_access*、publish_stream 等）

*然后我们将生成一个条形码/rfid 卡，其中主要代码将是他/她的用户名/ID。当用户将他的卡放在读卡器下时，“系统”应该启动一些东西并将一些东西发布到他的墙上/时间线上*

**所以：**

我想我必须开发一个单独的桌面应用程序来接收来自阅读器的代码，然后使用我的应用程序 url 和一些 app_data 启动浏览器？

有没有一种方法可以在卡通过读卡器后自动“登录”用户到我的 FB 应用程序，通过使用一些令牌或类似的（知道用户之前接受了权限）？

我正在抛出想法，希望有人可以分享其他人，这样我就可以清楚这一点

**谢谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:10:09.883

使用**扩展访问令牌**（Long-lived Access Token）

```
$facebook = new Facebook(array(
  'appId'  => $fbconfig['appid'],
  'secret' => $fbconfig['secret'],
  'cookie' => true,
));

//Store or update this in your database when user accesses your application
$extended_access_token = $facebook->getExtendedAccessToken(); 
```

扩展访问令牌的有效期为 60 天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:09:50.567

您需要在步骤 1 中获取并存储访问令牌。使用此令牌，您可以代表用户发布。facebook 帮助页面上详细描述了如何获取令牌。显然没有offline_access。您需要一个有效期较长的令牌[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)。

最后是更糟糕的一点。您想代表用户发帖。如果您打算发布 FIX 内容，我必须警告您 - **facebook 将禁止您**。他们不允许为用户编造内容。它被视为垃圾邮件。您可以做的是发布一个打开的图形操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T06:21:44.930

我的Php技能不好。但它认为您可以使用 HTTP post 使用此脚本进行发布。

```
$url = 'https://graph.facebook.com/USER_ID/feed?access_token=APP_ACCESS_TOKEN&message=YOUR_MESSAGE';
$ch = curl_init($url);

$response = curl_exec($ch);
curl_close($ch); 
```

此响应包含一个包含 post_id 的 JSON 对象。

# ios - iPhone 5中的加速度计数据反转？

> ID：12645943
> 
> 赞同：1
> 
> 时间：2012-09-28T19:09:36.410
> 
> 标签：ios, cocos2d-iphone, ios6, iphone-5

我正在使用加速度计的 iOS 上创建 cocos2d 游戏。我刚开始在 iphone 5 上进行测试，出于某种原因，它正在反转加速度计数据 - 基本上它的行为就像屏幕方向与实际情况翻转 180 度一样，向下倾斜会导致它向上发送东西，向左向右等.

它在运行 iOS 5 的 iphone 4 以及运行 iOS 5 的 ipad 和运行 iOS 6 的 ipad 上都可以正常工作。不确定这是仅 iphone 5 还是所有运行 iOS 6 的 iphone 的问题。

我在网上找不到任何关于此问题的提及，想知道是否有其他人遇到此问题以及您是否知道解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T18:08:03.750

好的，我知道发生了什么。在 iOS 6 中，willRotateToInterfaceOrientation 方法已被弃用，不再被调用。我在那里有代码做两件事 - 检测手机正在加载的横向方向并相应地调整变量，并防止手机在游戏过程中翻转方向（这是一个倾斜移动游戏）。一切都表现得好像视图颠倒的原因是因为它是，并且手机的方向被锁定，并且我的代码没有被调用来纠正这个问题。 [以下是 Apple 对 willRotateToInterfaceOrientation 的评价](http://www.bgr.com/2012/07/16/ios-6-download-beta-3-change-log/)：

> willRotateToInterfaceOrientation:duration:、willAnimateRotationToInterfaceOrientation:duration: 和 didRotateFromInterfaceOrientation: 方法不再在任何对其自身进行全屏呈现的视图控制器上调用——例如，通过调用 presentViewController:animated:completion:。您应该确保您的应用程序没有使用这些方法来管理任何子视图的布局。相反，他们应该使用视图控制器的 viewWillLayoutSubviews 方法并使用视图的边界矩形调整布局。

现在我只需要弄清楚如何使用 willLayoutSubviews 方法来复制我的原始功能。

# matplotlib - imshow：标签为图像索引的任意函数

> ID：12645946
> 
> 赞同：1
> 
> 时间：2012-09-28T19:09:45.050
> 
> 标签：matplotlib, axis-labels

`imshow`根据列索引（x 轴）和行索引（y 轴）绘制矩阵。我希望轴标签不是索引，而是索引的任意函数。

例如音高检测

`imshow(A, aspect='auto')`在哪里`A.shape == (88200,8)`

在 x 轴上，显示大约`[11000, 22000, ..., 88000]` 在 y 轴上的几个刻度，显示频率 bin`[0,1,2,3,4,5,6,7]`

我想要的是：

x 轴标记从样本标准化到秒。对于 44.1kHz 采样率的 2 秒音频，我想要`[1,2]`.

y 轴标注是音高作为音符。我想要音高注释中的标签`['c', 'd', 'e', 'f', 'g', 'a', 'b']`。

理想情况下：

`imshow(A, ylabel=lambda i: freqs[i], xlabel=lambda j: j/44100)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T17:31:18.330

您可以使用`Locator`s 和`Formatter`s [(doc)](http://matplotlib.org/api/ticker_api.html#ticker)的组合来执行此操作。

```
ax = gca()
ax.imshow(rand(500,500))

ax.get_xaxis().set_major_formatter(FuncFormatter(lambda x,p :"%.2f"%(x/44100)))
ax.get_yaxis().set_major_locator(LinearLocator(7))
ax.get_yaxis().set_major_formatter(FixedFormatter(['c', 'd', 'e', 'f', 'g', 'a', 'b']))
draw() 
```

# android - Android RatingBar onRatingChanged 监听器

> ID：12645949
> 
> 赞同：5
> 
> 时间：2012-09-28T19:09:55.830
> 
> 标签：android, variables, oncreate, ratingbar

我在我的应用程序中使用 RatingBar 元素，并尝试使用 OnRatingChangedListener 进行设置。在侦听器中，我在变量上使用 if 语句做不同的事情。问题是，由于某种原因，当我有多个选项时，这个监听器不起作用。它是在 onCreate() 方法中设置的，在 if 语句中的变量获取值之前，但我试图将它移动到不同的位置，但根本没有成功。

我的 onCreate():

```
bar = (RatingBar) findViewById(R.id.serviceLevel);
    bar.setOnRatingBarChangeListener(new OnRatingBarChangeListener() {

        @Override
        public void onRatingChanged(RatingBar ratingBar, float rating,
                boolean fromUser) {

        if(Code==null){
            Toast.makeText(TipCalculatorActivity.this, "Locationing error occured, please report to the developer.", Toast.LENGTH_LONG).show();
        }else if(Code=="1"){
            if(rating==0){
                autochange.setText("Precentage: 0%");
                precentage = 0;
                calculate(value, precentage);
            }else if(rating==0.5){
                autochange.setText("Precentage: 10%");
                precentage = 8;
                calculate(value, precentage);
            }else if(rating==1){
                autochange.setText("Precentage: 11%");
                precentage = 9;
                calculate(value, precentage);
            }else if(rating==1.5){
                autochange.setText("Precentage: 11%");
                precentage = 10;
                calculate(value, precentage);
            }else if(rating==2){
                autochange.setText("Precentage: 12%");
                precentage = 11;
                calculate(value, precentage);
            }else if(rating==2.5){
                autochange.setText("Precentage: 12%");
                precentage = 12;
                calculate(value, precentage);
            }else if(rating==3){
                autochange.setText("Precentage: 13%");
                precentage = 13;
                calculate(value, precentage);
            }else if(rating==3.5){
                autochange.setText("Precentage: 13%");
                precentage = 14;
                calculate(value, precentage);
            }else if(rating==4){
                autochange.setText("Precentage: 14%");
                precentage = 15;
                calculate(value, precentage);
            }else if(rating==4.5){
                autochange.setText("Precentage: 14%");
                precentage = 16;
                calculate(value, precentage);
            }else if(rating==5){
                autochange.setText("Precentage: 15%");
                precentage = 17;
                calculate(value, precentage);
            }
        }else if(Code=="2"){
            if(rating==0){
                autochange.setText("Precentage: 0%");
                precentage = 0;
                calculate(value, precentage);
            }else if(rating==0.5){
                autochange.setText("Precentage: 10%");
                precentage = 10;
                calculate(value, precentage);
            }else if(rating==1){
                autochange.setText("Precentage: 11%");
                precentage = 11;
                calculate(value, precentage);
            }else if(rating==1.5){
                autochange.setText("Precentage: 12%");
                precentage = 12;
                calculate(value, precentage);
            }else if(rating==2){
                autochange.setText("Precentage: 13%");
                precentage = 13;
                calculate(value, precentage);
            }else if(rating==2.5){
                autochange.setText("Precentage: 14%");
                precentage = 14;
                calculate(value, precentage);
            }else if(rating==3){
                autochange.setText("Precentage: 15%");
                precentage = 15;
                calculate(value, precentage);
            }else if(rating==3.5){
                autochange.setText("Precentage: 16%");
                precentage = 16;
                calculate(value, precentage);
            }else if(rating==4){
                autochange.setText("Precentage: 17%");
                precentage = 17;
                calculate(value, precentage);
            }else if(rating==4.5){
                autochange.setText("Precentage: 18%");
                precentage = 18;
                calculate(value, precentage);
            }else if(rating==5){
                autochange.setText("Precentage: 19%");
                precentage = 19;
                calculate(value, precentage);
            }
        }
    }
}); 
```

我的代码变量是在 AsyncTask 完成后设置的，所以可能是在生成 UI 之后。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T19:43:40.920

为了使您的代码正常工作，您必须使用该`equals()`方法检查是否`Code`具有正确的值：

```
// ...
} else if (Code.equals("1")){
// ... 
```

`==`将测试引用并将返回`false`，因为这两个引用不指向同一个对象。

# facebook - wiki 集成的 $wgFbSecret 是什么？

> ID：12645950
> 
> 赞同：0
> 
> 时间：2012-09-28T19:09:57.293
> 
> 标签：facebook, mediawiki

> **可能重复：**
> [在哪里可以找到我的 Facebook 应用程序 ID 和密钥？](https://stackoverflow.com/questions/3203649/where-can-i-find-my-facebook-application-id-and-secret-key)

`$wgFbSecret`Facebook Mediawiki 扩展是什么？它不能是我的密码，因为`$wgFbSecret`令牌位于公开可见的`LocalSettings.php`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:56:46.920

在这里只是在黑暗中刺伤 - 完全没有经验`mediawiki`。我认为这个参数是应用程序的秘密。您可以从应用程序的设置中获取此值 -

![](../Images/f29914471cfa647f0f8cc0c0f72928c7.png)

# grails - 如何将 ZK 与 Grails 的控制器一起使用

> ID：12645951
> 
> 赞同：0
> 
> 时间：2012-09-28T19:09:56.110
> 
> 标签：grails, zk

到目前为止，我已经查看了 ZKGrails 和 ZKUI 插件，但我不相信我想走哪一条路。我的理解是 ZKGrails 根本没有使用 Grails 的控制器，ZKUI 尝试使用 Grails 的控制器，但仍然将一些视图控制权交给了 ZK 作曲家。我正在寻找的是一种利用 Grails 控制器脚手架和视图的方法，同时在这些 Grails 视图中嵌入 ZK 组件。有人有任何资源或想法可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:00:11.250

不幸的是，我认为现有的 ZK Grails/ZKUI 无法满足您的要求。两者似乎都有脚手架支撑，但

*   [ZK Grails 的脚手架从这里](http://code.google.com/p/zkgrails/)检查幻灯片 19~20
*   ZKUI 的静态脚手架在[此处查看](http://books.zkoss.org/wiki/Small_Talks/2012/January/Ajax_GSP_with_ZK#Static_Scaffolding)

然而，这两种解决方案中的脚手架都不是真正的 grails 脚手架，因为 grails 控制器中嵌入了 UI 组件

# iphone - NSPredicate 获取一对多关系中的所有对象

> ID：12645960
> 
> 赞同：1
> 
> 时间：2012-09-28T19:10:20.253
> 
> 标签：iphone, nspredicate

我有一个用户实体和一个电子邮件实体。一个用户有很多电子邮件。如果我有一个用户对象，我可以使用 [用户电子邮件] 访问这组电子邮件。但是如何使用 NSPredicate 来检索用户的所有电子邮件？假设不存在反比关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:13:10.960

应该有一个反比关系，否则程序会给你一个警告。您可以执行以下操作：

```
NSPredicate *predicate=[NSComparisonPredicate predicateWithLeftExpression:[NSExpression expressionForKeyPath:@"user" rightExpression:[NSExpression expressionForConstantValue:yourUser] modifier:NSDirectPredicateModifier type:NSEqualsToPredicateOperatorType options:0]; 
```

请记住，如果您已经拥有用户，则可以从用户对象中获取电子邮件。一对多的关系在这个用户对象中表示为一个 NSSet，您可以使用它来访问来自它的所有电子邮件，或者将集合排序到一个数组中。如果您需要使用某种 NSFetchResultsController，请使用 fetch。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T19:22:00.830

恢复反向关系。即使您不直接使用它们，Core Data 也希望它的内务处理需要反向关系。

一个针对 Email 实体的简单请求将是：

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Email"];
[NSPredicate predicateWithFormat:@"user = %@", user];
NSArray *results = [managedObjectContext executeFetchRequest:request error:&error]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T22:28:40.267

你不需要谓词。你可以把你关心的所有用户都带走：

`[users valueForKey:@"emails"]`

并得到一堆所有的电子邮件。

# css - 循环遍历 SCSS 中的两个 @each 列表

> ID：12645962
> 
> 赞同：2
> 
> 时间：2012-09-28T19:10:29.150
> 
> 标签：css, sass, compass-sass

在我的 CSS 中，我必须创建引用“头发颜色”和“发型”的类

我写了一个 mixin 来帮助我的 CSS 写作更有效率：

```
@mixin hair($hair, $colour) {
    .hair-#{$colour} .#{$hair}  { 
background:image-url("xsppsfhair#{$hair}#{$colour}.svg") center top no-repeat, 
image-url("xsppsheadgrey.svg") center top no-repeat, 
image-url("xsppsbhair#{$hair}#{$colour}.svg") center top no-repeat;
}

}

@include hair(spikyboy, blonde);    
@include hair(curlyafroboy, blonde); 
```

这将产生以下 CSS

```
.hair-blonde .spikyboy {
  background: url('../images/xsppsfhairspikyboyblonde.svg?1348681869') center top no-repeat, url('../images/xsppsheadgrey.svg?1348834673') center top no-repeat, url('../images/xsppsbhairspikyboyblonde.svg?1348682005') center top no-repeat;
}

.hair-blonde .curlyafro {
  background: url('../images/xsppsfhaircurlyafroblonde.svg?1348681869') center top no-repeat, url('../images/xsppsheadgrey.svg?1348834673') center top no-repeat, url('../images/xsppsbhaircurlyafroblonde.svg?1348682005') center top no-repeat;
} 
```

这很棒，但是由于我总共有 35 种头发颜色和发型组合，所以我最终还是有太多的@includes。

[在这个页面上](http://thesassway.com/intermediate/if-for-each-while)，它说 SASS 有一个 @each 可以用来循环列表。[这里](https://stackoverflow.com/questions/11193029/sass-each-loops-in-scss)还有一个例子。但是，这两个示例都只显示循环 1 个列表。是否可以遍历两个列表？

我已经尝试了我的代码的许多变体，但似乎没有一个工作。我认为以下内容肯定会起作用，但我只是收到一条关于 $colour 未定义的错误消息。

```
$hairstyle: (red, blonde, ltbrown);
$haircolour: (red, blonde, ltbrown);

    @each $hair in $haircolour, $colour in $haircolour {
    .hair-#{$colour} .#{$hair}  {
background:image-url("xsppsfhair#{$hair}#{$colour}.svg") center top no-repeat, 
image-url("xsppsheadgrey.svg") center top no-repeat, 
image-url("xsppsbhair#{$hair}#{$colour}.svg") center top no-repeat;
    }

    .girl.hair-#{$colour} #eyelash {
        background: image-url("xsppseyelash#{$colour}.svg") center top no-repeat;
    }
} 
```

有人可以给我一些关于我做错了什么的指示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T20:20:22.300

你需要做的是在第一个循环中创建一个循环（我已经简化了一点，所以更容易看到）：

```
@mixin style-matrix($colors, $styles) {
    @each $s in $styles {
        @each $c in $colors {
            .#{$s} .#{$c} {
                background:image-url("xsppsfhair-#{$s}-#{$c}.svg");
            }
        }
    }
}

$colors: blonde, brunette, auburn;
$styles: beehive, pixie, bob;
@include style-matrix($colors, $styles); 
```

你得到这个输出：

```
.beehive .blonde {
  background: image-url("xsppsfhair-beehive-blonde.svg");
}

.beehive .brunette {
  background: image-url("xsppsfhair-beehive-brunette.svg");
}

.beehive .auburn {
  background: image-url("xsppsfhair-beehive-auburn.svg");
}

.pixie .blonde {
  background: image-url("xsppsfhair-pixie-blonde.svg");
}

.pixie .brunette {
  background: image-url("xsppsfhair-pixie-brunette.svg");
}

.pixie .auburn {
  background: image-url("xsppsfhair-pixie-auburn.svg");
}

.bob .blonde {
  background: image-url("xsppsfhair-bob-blonde.svg");
}

.bob .brunette {
  background: image-url("xsppsfhair-bob-brunette.svg");
}

.bob .auburn {
  background: image-url("xsppsfhair-bob-auburn.svg");
} 
```

# c# - 尝试编写一个简单的计算器... C# 初学者，无法通过异常

> ID：12645963
> 
> 赞同：0
> 
> 时间：2012-09-28T19:10:34.317
> 
> 标签：c#

好的，所以我正在根据我最近的一个学校项目来模拟这个想法，我不确定为什么它现在不起作用。

我目前对该程序的计划是使用 DataManager 来保存一个字符串数组，其中包含用户将从菜单中输入的数字，然后将它们转换为整数，并最终由运算符等通过它们进行描述。我还没有弄清楚最后一部分，我认为这个想法不会像我说的那样奏效。但是现在我无法让程序在数组中存储字符串值。

当我运行程序时，我当前的目标是单击“1”并按“Enter”，当发生这种情况时，我希望输出看起来像“数字：1”，但我一直抛出异常。

> “在 mscorlib.dll 中发生了“System.InvalidCastException”类型的未处理异常

附加信息：源数组中的至少一个元素无法转换为目标数组类型。”

这是我的 DataManager 类中的代码....

```
public class DataManager 
{ 
public ArrayList calculation;

    public DataManager()
    {
        calculation = new ArrayList();
    }

    public void addNumbers(string n)
    {
        calculation.Add(n);
    }
    // public NumbersAndOperators[] getNumbers()
    //{
      // return  //(NumbersAndOperators[])calculation.ToArray(typeof(NumbersAndOperators));
    //}
    public void removeNumbers(NumbersAndOperators n)
    {
        calculation.Remove(n);
    }
    public void addOperators(string o)
    {
        calculation.Add(o);
    }
    public NumbersAndOperators[] getOperators()
    {
        return (NumbersAndOperators[])calculation.ToArray(typeof(NumbersAndOperators));
    }
    public void removeOperators(NumbersAndOperators o)
    {
        calculation.Remove(o);
    }

}

} 
```

这是我的 NumbersAndOperators 类的代码

```
public class NumbersAndOperators 
{ 
private string number; private string operate;

    public NumbersAndOperators(string n, string o)
    {
        number = n;
        operate = o;
    }
    public void setNumber(string n)
    {
        number = n;
    }
    public void setOperate(string o)
    {
        operate = o;
    }
    public string getNumber(string n)
    {
        return n;
    }
    public string getOperate(string o)
    {
        return o;
    }

}

} 
```

这是我表单中的代码

```
public partial class Form1 : Form 

{ 
   public DataManager data;

    public Form1(DataManager d)
    {
        InitializeComponent();
        data = d;
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }
    private void button10_Click(object sender, EventArgs e)
    {
        string n = "0";
        data.addNumbers(n);
    }
    private void button1_Click(object sender, EventArgs e)
    {
        string n = "1";
        data.addNumbers(n);

    }

    private void button2_Click(object sender, EventArgs e)
    {
        string n = "2";
        data.addNumbers(n);
    }

    private void button3_Click(object sender, EventArgs e)
    {
        string n = "3";
        data.addNumbers(n);
    }
    private void button4_Click(object sender, EventArgs e)
    {
        string n = "4";
        data.addNumbers(n);
    }

    private void button5_Click(object sender, EventArgs e)
    {
        string n = "5";
        data.addNumbers(n);
    }

    private void button6_Click(object sender, EventArgs e)
    {
        string n = "6";
        data.addNumbers(n);

    }

    private void button7_Click(object sender, EventArgs e)
    {
        string n = "7";
        data.addNumbers(n);
    }

    private void button8_Click(object sender, EventArgs e)
    {
        string n = "8";
        data.addNumbers(n);
    }

    private void button9_Click(object sender, EventArgs e)
    {
        string n = "9";
        data.addNumbers(n);
    }

    private void division_Click(object sender, EventArgs e)
    {
        string o = "/";
        data.addOperators(o);
    }

    private void multiplication_Click(object sender, EventArgs e)
    {
        string o = "*";
        data.addOperators(o);
    }

    private void subtraction_Click(object sender, EventArgs e)
    {
        string o = "-";
        data.addOperators(o);
    }

    private void addition_Click(object sender, EventArgs e)
    {
        string o = "+";
        data.addOperators(o);
    }

    private void dec_Click(object sender, EventArgs e)
    {
        string n = ".";
        data.addNumbers(n);
    }

    private void equals_Click(object sender, EventArgs e)
    {
        panel1.Controls.Clear();
        NumbersAndOperators[] num = data.getNumbers();
        Label tmp;
        for (int i = 0; i < num.Length; i++)
        {
            tmp = new Label();
            tmp.Text = "Number:" + data.getNumbers();
            tmp.AutoSize = true;
            tmp.Location = new Point(0, 85);

            panel1.Controls.Add(tmp);

        }

    }

}

} 
```

我感谢任何和所有建议，这是我以前从未见过的问题，这使得仅阅读就更难理解。我现在像傻瓜一样在谷歌上搜索了一段时间，出现的一切我根本不明白。

另外，我注释掉了抛出异常的行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T19:20:41.657

你打电话时：

```
public void addNumbers(string n)
{
    calculation.Add(n);
} 
```

您将一个字符串添加到您的 ArrayList。

你打电话时：

```
(NumbersAndOperators[])calculation.ToArray(typeof(NumbersAndOperators)); 
```

它尝试以 NumbersAndOperators 的形式检索数据，这是无效的，因为您将字符串添加到 ArrayList。

最好让您的计算成员为：

```
public List<NumbersAndOperators> calculation; 
```

所以你有一个类型安全列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T19:17:01.523

在这条线上：

```
return  (NumbersAndOperators[])calculation.ToArray(typeof(NumbersAndOperators)); 
```

您正在尝试获取 的数组`NumbersAndOperators`，但您`ArrayList`还包含字符串，并且无法将字符串转换为`NumbersAndOperators`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T19:14:14.703

我猜你的意思是写：

```
for (int i = 0; i < num.Length; i++)
{
    tmp = new Label();
    tmp.Text = "Number:" + num[i]; // <--
    tmp.AutoSize = true;
    tmp.Location = new Point(0, 85);

    panel1.Controls.Add(tmp);

} 
```

# jquery - jQuery (document).ready 不等待 DOM 准备好

> ID：12645964
> 
> 赞同：6
> 
> 时间：2012-09-28T19:10:39.383
> 
> 标签：jquery, dom

我在标题中有一个非常微妙的动画。当第一次加载页面，或者用 cmd+shift+r (mac) 刷新来清除缓存时，jQuery 似乎真的没有等待 DOM 准备好。它在所有正常的 html/css 弹出之前开始动画。

我只是误解了 (document).ready 的实际作用吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T19:15:20.520

DOMContentLoaded 在 DOM 准备就绪时触发，但这并不一定意味着所有 CSS 和图像都已完成加载。如果你愿意，更好的选择是`$(window).on('load',function(){...});`

# java - 使用 superCSV 读取 80GB 的大文本文件

> ID：12645967
> 
> 赞同：4
> 
> 时间：2012-09-28T19:10:55.450
> 
> 标签：java, java.nio.file, supercsv

我想阅读一个巨大的 csv 文件。我们通常使用 superCSV 来解析文件。在这种特殊情况下，文件很大，并且由于明显的原因总是存在内存不足的问题。

最初的想法是将文件作为块读取，但我不确定这是否适用于 superCSV，因为当我对文件进行分块时，只有第一个块具有标头值并将被加载到 CSV bean 中，而其他块没有标头值，我觉得它可能会引发异常。所以

a) 我想知道我的思维过程是否正确
b) 有没有其他方法可以解决这个问题。

所以我的主要问题是

superCSV 是否具有处理大型 csv 文件的能力，我看到 superCSV 通过 BufferedReader 读取文档。但我不知道缓冲区的大小是多少，我们可以根据我们的要求更改它吗？

@Gilbert Le Blanc我已尝试根据您的建议将其拆分为较小的块，但是将大文件分解为较小的块需要很长时间。这是我为此编写的代码。

```
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.io.LineNumberReader;

public class TestFileSplit {

public static void main(String[] args) {

    LineNumberReader lnr = null;
    try {
        //RandomAccessFile input = new RandomAccessFile("", "r");
        File file = new File("C:\\Blah\\largetextfile.txt");
        lnr = new LineNumberReader(new FileReader(file), 1024);
        String line = "";
        String header = null;
        int noOfLines = 100000;
        int i = 1;
        boolean chunkedFiles = new File("C:\\Blah\\chunks").mkdir();
        if(chunkedFiles){
            while((line = lnr.readLine()) != null) {
                if(lnr.getLineNumber() == 1) {
                    header = line;
                    continue;
                }
                else {
                    // a new chunk file is created for every 100000 records
                    if((lnr.getLineNumber()%noOfLines)==0){
                        i = i+1;
                    }

                    File chunkedFile = new File("C:\\Blah\\chunks\\" + file.getName().substring(0,file.getName().indexOf(".")) + "_" + i + ".txt");

                    // if the file does not exist create it and add the header as the first row
                    if (!chunkedFile.exists()) {
                        file.createNewFile();
                        FileWriter fw = new FileWriter(chunkedFile.getAbsoluteFile(), true);
                        BufferedWriter bw = new BufferedWriter(fw);
                        bw.write(header);
                        bw.newLine();
                        bw.close();
                        fw.close();
                    }

                    FileWriter fw = new FileWriter(chunkedFile.getAbsoluteFile(), true);
                    BufferedWriter bw = new BufferedWriter(fw);
                    bw.write(line);
                    bw.newLine();
                    bw.close();
                    fw.close();
                }
            }
        }
        lnr.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T17:58:05.840

您可以在解析器 java 类本身中定义标头。这样您就不需要 CSV 文件中的标题行。

```
// only map the first 3 columns - setting header elements to null means those columns are ignored
final String[] header = new String[] { "customerNo", "firstName", "lastName", null, null, null, null, null, null, null };
beanReader.read(CustomerBean.class, header) 
```

或者

您还可以使用 SuperCSV api 的推土机扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T00:54:32.777

我不确定问题是什么。作为 bean 一次读取一行需要大致恒定的内存消耗。如果您一次存储所有读取的对象，那么是的，您的内存不足。但是这个超级csv的错是什么？

# javascript - 隔离范围属性何时真正添加到范围中？

> ID：12645968
> 
> 赞同：4
> 
> 时间：2012-09-28T19:10:56.203
> 
> 标签：javascript, angularjs

我正在创建一些具有隔离范围和一些别名属性的指令。例如：

```
scope: {
   prop1: '@'
} 
```

我的问题是，何时将这些别名添加到范围？我遇到了一些未在链接函数中定义的属性的问题。运行此 jsFiddle 后查看控制台：http: [//jsfiddle.net/rvd6x/](http://jsfiddle.net/rvd6x/)。

当我尝试正常获取该属性时，它没有定义。如果我稍后尝试通过函数 (doStuff()) 获取它，它就在那里。或者如果我`$timeout`用 0 做 a 它就在那里。显然，我可以使用`$timeout`. `$timeout`必须在我的所有指令中注入是一种痛苦。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T21:53:03.533

我发现这在指令定义中有效：

```
scope: {
    prop1: '@'
},
link: function(scope, element, attrs) {
    ...
    attrs.$observe('prop1', function(val) { 
        scope.prop1 = val || 'default'
    });
    ...
} 
```

使

```
<div my-directive></div> 
```

表现得像

```
<div my-directive prop1="default"></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T20:31:40.437

这是我的理解：通常在指令中，您不能假设范围内的任何变量都已定义或具有稳定的值。你需要 $watch 任何你感兴趣的东西。

想想 ng-repeat - 你重复的东西在链接时可能不存在，它可能经常改变等等 - 由指令来处理这些场景。

现在我知道这并不能回答您的问题 - 您正在创建一个明确设置范围值的隔离范围，因此直观地说，您所做的与 ng-repeat 示例不同。但看起来 Angular 对待它们是一样的，这可能是一件好事。

根据您需要使用该属性的原因，我认为您可以通过两种方式解决您的问题：

1.  如果它是一个评估值并且它可能会发生变化，请将其包裹在手表中，以便您做出反应。
2.  如果它是静态值，您可以使用 attrs.prop1 并将其拉到链接 fn 的开头。

[我在这里](http://jsfiddle.net/roytruelove/rvd6x/2/)添加了这两个选项。

# php - 文件存在并捕获所有搜索

> ID：12645971
> 
> 赞同：0
> 
> 时间：2012-09-28T19:11:22.197
> 
> 标签：php, file

我正在尝试查找文件是否存在。我知道它的名称，但我不知道扩展名。我可以做些什么 PHP 明智地让文件存在函数检查文件而不知道它的扩展名？

```
file_exists('image_storage/ses_' . $session_user_id . 'need to put something here for the 
extension' ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T19:16:35.853

您可以使用 PHP 的[`glob`](http://php.net/glob)函数来获取与给定模式匹配的文件列表：

```
$files = glob('image_storage/ses_' . $session_user_id . '.*');
if (count($files) > 0) {
    // check your files with a loop
    foreach ($files as $file) {
        // do whatever you want; this file exists =]
    }
} 
```

您无需使用`glob`;检查文件是否存在 如果它在数组中返回它，它应该存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T19:22:25.987

如果你在linux中，你可以这样做..

```
$ret = exec("ls image_storage/ses_" . $session_user_id."*");
if(!empty($ret))
{
  //file exists..
} 
```

# matlab - 如何在matlab的多维矩阵中找到每个“切片”的最大值？

> ID：12645972
> 
> 赞同：3
> 
> 时间：2012-09-28T19:11:23.373
> 
> 标签：matlab, matrix, max, multidimensional-array

我有一个 n 维矩阵 Q。我可以通过以下方式找到最后一维的最大值：

```
m = max(Q,[],n). 
```

但是，我不知道如何通过最后一个“切片”找到最大值。我需要一些“喜欢”的东西

```
m = max(Q,[],n-1,n). 
```

例如，如果我有

```
A(:,:,1) = [1 2 3 ; 4 50 6]
A(:,:,2) = [9 8 7 ; 10 12 1] 
```

我想拥有`m = [9 50]`。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T19:52:44.833

您需要对 max 进行两次调用：

```
m = max(max(A, [], 3), [], 2) 
```

# signalr - 如何在 SignalR 连接中使用 Session

> ID：12645973
> 
> 赞同：0
> 
> 时间：2012-09-28T19:11:32.410
> 
> 标签：signalr

在我的数据库中，用户具有一些区域权限。我想要做的是将此区域添加到 SignalR 组中。因此，当用户登录时，我从数据库中获取这些组并保存在 Session["groups"] 中，当用户连接到 signalR 时，我使用此会话添加到组中。像这样的东西：

```
public Task Connect()
{
    var groups = (string[])Session["groups"];
    foreach (var group in groups)
    {
        Groups.Add(Context.ConnectionId, group);
    }
} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:26:01.270

如此处所述[SignalR Hubs - 管理组](https://github.com/SignalR/SignalR/wiki/Hubs)

> 您可以将连接添加到组并将消息发送到特定组。组不会保留在服务器上，因此应用程序负责跟踪哪些组中的连接，以便可以实现组计数等功能。

这意味着您必须提供自己的结构，例如字典来保存您的数据。

例如，一个字典，将组名作为键，将区域列表作为值（或者如果它最适合您，则反过来）。

因此，对于用户的每个新区域，首先更新此词典，然后将用户订阅到已更改的组。

`Groups.Add(Context.ConnectionId, group);`

不过，请查看上面的链接以及此处[基于 Topic 的 pub sub design patern](http://www.codeproject.com/Articles/34333/Topic-based-publish-subscribe-design-pattern-imple)。不要因为标题上的 WCF 而犹豫。仔细看看他实现 Filter 类的方式

# common-lisp - cl-html-parse 中的 ASCII 流解码错误

> ID：12645978
> 
> 赞同：3
> 
> 时间：2012-09-28T19:11:42.773
> 
> 标签：common-lisp, sbcl

`ASCII stream decoding error`当我运行这个时我得到一个：

```
(with-open-file (stream file)
    (net.html.parser:parse-html stream)) 
```

我正在使用 SBCL 1.0.58 和 cl-html-parse 20101006（使用 quicklisp）。

尝试解析使用 curl 下载的页面（在常规 shell 中）时，我经常遇到错误。大多数是UTF-8。

我是否应该以某种方式为文件指定编码，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T19:42:12.243

在阅读了更多内容之后`with-open-file`，我发现我可以通过指定 :external-format 来完成这项工作。

```
(with-open-file (stream file
                        :if-does-not-exist nil
                        :external-format :UTF-8)
    (net.html.parser:parse-html stream)) 
```

仍在试图弄清楚写作（我遇到了类似的错误），但我认为我现在正在寻找正确的地方。

# c++ - 使用本机/C++ 代码在 VS2010 中创建简单 COM 对象的最简单方法是什么？

> ID：12645985
> 
> 赞同：2
> 
> 时间：2012-09-28T19:12:16.177
> 
> 标签：c++, windows, com

这是我之前发布的问题的后续内容（请参见[此处](https://stackoverflow.com/questions/12463113/handling-an-html-button-click-event-in-c-code)）。我正在尝试从在 HTML 页面中运行的 Javascript 调用我的本机/C++ 代码。引用问题中的答案是创建一个 COM 对象。然后，Javascript 可以创建 COM 对象的实例并在其上调用方法以获取本机/C++ 代码。

所以现在我只能尝试创建一个简单的 COM 对象来接受来自 Javascript 的调用。看起来要走的路是创建一个 DLL 并将 COM 对象放入该 DLL 中。多年前，我阅读了大量关于 COM 的内容，但从那时起我一直试图忘记它 :) 现在我很头疼，想知道如何在不成为 COM 专家的情况下轻松解决这个问题。

是否有一种简单/简单的方法可以使用您推荐的 COM 对象设置 DLL？

编辑：我的应用程序是使用本机 C++/Win32/MFC 编写的。我有一个 MFC 对话框，它使用 IE ActiveX 浏览器控件来呈现本地生成的 HTML。目前按钮处理程序代码全部使用 Javascript，但正如您从引用的问题中看到的那样，我的目标是在 C++ 端处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T21:06:51.947

据我所知，创建 COM 对象的简单快捷的方法是创建 ATL 项目。这是一个很好的[教程](http://www.codeproject.com/Articles/38254/A-Beginner-Tutorial-for-Writing-Simple-COM-ATL-DLL)，解释了要遵循的步骤。

# shopify - 可以在 Shopify 中为集合完成用户分类系统吗？

> ID：12645986
> 
> 赞同：1
> 
> 时间：2012-09-28T19:12:37.433
> 
> 标签：shopify

在 Shopify 中，一个集合可以有一个默认的排序顺序，这很棒。但是有没有办法在呈现集合的产品列表之前更改默认排序顺序？我想要完成的是在页面上放置一个“排序依据”下拉菜单，允许客户按照价格、品牌、畅销商品、字母顺序等对当前列表进行排序，就像许多现代购物车一样在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:44:27.073

集合是提前排序的，而不是动态排序的，这样页面可以加载得更快。

您可以使用相同的产品创建多个集合，但排序不同。然后，您可以根据用户输入导航到相关集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T07:44:14.863

现在有一个应用程序： [https ://apps.shopify.com/power-tools-sort-selector](https://apps.shopify.com/power-tools-sort-selector)

*免责声明 - 我是开发者 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-08T15:44:41.447

我们最近添加了在店面动态排序收藏的功能（之前您只能在后端按一个订单对收藏进行排序。

文档： [http ://docs.shopify.com/manual/configuration/store-customization/advanced-navigation/add-a-reorder-drop-down-menu-to-a-collection-page](http://docs.shopify.com/manual/configuration/store-customization/advanced-navigation/add-a-reorder-drop-down-menu-to-a-collection-page)

前代码： [https ://gist.github.com/carolineschnapp/11352987](https://gist.github.com/carolineschnapp/11352987)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-20T13:01:23.273

如果您想避免为应用程序付费——它可能会也可能不会根据所需选择的数量重复每个集合——使用/调整以下代码：

```
 <script>
    // jquery is already running on the site, so we use it to check the document is ready
    $(document).ready(function() {
        // Identify a Select Option from the value in the URL query text
        // Where this exists as an Option Value, add the 'selected' attribute to the Option
        // This ensures that when the page reloads the current option will be showing
        $("#selectSort option[value='{{collection.sort_by}}']").attr('selected', true);
    });
  </script>

  <div>
    <!-- 
    The Select Tag watches for a change, then pushes a new window.location using the value
    of the Option selected by the user
    -->
    <select id="selectSort" onchange='window.location="{{ collection.url }}?sort_by=" + this.value'>
      <option value="price-ascending">Price (lowest first)</option>
      <option value="price-descending">Price (Highest first)</option>
      <option value="title-ascending">A-Z</option>
      <option value="title-descending">Z-A</option>
      <option value="created-descending">Latest Addition</option>
      <option value="best-selling">Most Popular</option>
    </select>
  </div> 
```

# javascript - 在谷歌地图 api V3 中调整标记大小

> ID：12645987
> 
> 赞同：0
> 
> 时间：2012-09-28T19:12:38.697
> 
> 标签：javascript, maps

我有一个关联数组，根据类型保存图像的路径。

```
var customIcons = {
  restaurant: {  icon: 'http://labs.google.com/ridefinde/a2/8.gif',   },
  bar: {  icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png',   }
}; 
```

标记创建于：

```
var icon = customIcons[icones] || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon,   }); 
```

但是图标显得太大了。如何将它们调整为 (30, 30) ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T19:20:03.983

您将图标创建为[标记图像](https://developers.google.com/maps/documentation/javascript/reference#MarkerImage)，如下所示：

`icon: new google.maps.MarkerImage( URL_GOES_HERE , undefined, undefined, undefined, new google.maps.Size(30, 30));`

# asp.net-mvc-4 - 删除已注册的 OAuth 客户端

> ID：12645995
> 
> 赞同：1
> 
> 时间：2012-09-28T19:13:04.000
> 
> 标签：asp.net-mvc-4, dotnetopenauth

使用 OpenAuth 的新 MVC 4 模板，有谁知道注册客户端在添加后是否可以删除？

客户端通常在启动时注册。但是，不一定是这样。您可以随时注册。我正在开发一个允许随时注册内置客户端的模块（这可行），但我似乎找不到在不强制重新启动网站的情况下删除已注册客户端的方法。

API 是否允许在不重新启动站点的情况下执行此操作？

# grails - 无法使用 Spring Security 在 grails 2.1.1 中创建用户对象

> ID：12645996
> 
> 赞同：0
> 
> 时间：2012-09-28T19:13:05.543
> 
> 标签：grails, spring-security, grails-2.0

我有以下课程

```
class SentryUser {

    transient springSecurityService

    String userName
    String password
    boolean enabled
    boolean accountExpired = false
    boolean accountLocked = false
    boolean passwordExpired   = false

    static constraints = {
        userName blank: false, unique: true
        password blank: false
    }

    static mapping = {
        password column: '`password`'
    }

    Set<SentryRole> getAuthorities() {
        SentryUserSentryRole.findAllBySentryUser(this).collect { it.sentryRole } as Set
    }

    def beforeInsert() {
        encodePassword()
    }

    def beforeUpdate() {
        if (isDirty('password')) {
            encodePassword()
        }
    }

    protected void encodePassword() {
        password = springSecurityService.encodePassword(password)
    }
} 
```

我在引导程序中调用以下代码

```
def admin = new SentryUser(userName: "sample@sample.com",
                enabled: true).save(failOnError: true) 
```

并得到以下错误

```
context.GrailsContextLoader Error executing bootstraps: groovy.lang.MissingMethodException: No signature of method: SentryUser.save() is applicable for argument types: () values: [] 
```

我正在使用 grails 2.1.1 并使用 spring 安全插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:38:24.910

您正在打电话`save(Map)`，但 MME 毫无争议地抱怨`save()`。在我的应用程序中没有安装任何持久性插件（hibernate/mongodb）之前，我已经看到了这种差异——它是一个插件项目，我试图作为独立应用程序运行，而新插件项目的默认 BuildConfig不包括对休眠的依赖。

# wpf - 如何在 WPF MVVM 应用程序中传递 DataGridCellEditEventArgs

> ID：12645998
> 
> 赞同：1
> 
> 时间：2012-09-28T19:13:06.700
> 
> 标签：wpf, events, mvvm, datagrid

我正在开发 WPF LOB 应用程序并使用 Prism 和委托命令将 UI 与视图模型分开。

当用户从 UI（而不是视图模型或服务）对特定单元格进行更改时，我需要调用其他一些功能。

我已经创建了附加行为

```
public static class DataGridCellEditEndingBehaviour
{
    private static readonly DependencyProperty CellEditEndingProperty
        = DependencyProperty.RegisterAttached(
        "CellEditEnding",
        typeof(CellEditEnding),
        typeof(DataGridCellEditEndingBehaviour),
        null);

    public static readonly DependencyProperty CommandProperty
        = DependencyProperty.RegisterAttached(
        "Command",
        typeof(ICommand),
        typeof(DataGridCellEditEndingBehaviour),
        new PropertyMetadata(OnSetCommandCallback));

    public static readonly DependencyProperty CommandParameterProperty
        = DependencyProperty.RegisterAttached(
       "CommandParameter",
       typeof(object),
       typeof(DataGridCellEditEndingBehaviour),
       new PropertyMetadata(OnSetCommandParameterCallback));

    public static ICommand GetCommand(DataGrid control)
    {
        return control.GetValue(CommandProperty) as ICommand;
    }

    public static void SetCommand(DataGrid control, ICommand command)
    {
        control.SetValue(CommandProperty, command);
    }

    public static void SetCommandParameter(DataGrid control, object parameter)
    {
        control.SetValue(CommandParameterProperty, parameter);
    }

    public static object GetCommandParameter(DataGrid control)
    {
        return control.GetValue(CommandParameterProperty);
    }

    private static void OnSetCommandCallback
        (DependencyObject dependencyObject, DependencyPropertyChangedEventArgs e)
    {
        DataGrid control = dependencyObject as DataGrid;
        if (control != null)
        {
            CellEditEnding behavior = GetOrCreateBehavior(control);
            behavior.Command = e.NewValue as ICommand;
        }
    }

    private static void OnSetCommandParameterCallback
        (DependencyObject dependencyObject, DependencyPropertyChangedEventArgs e)
    {
        DataGrid control = dependencyObject as DataGrid;
        if (control != null)
        {
            CellEditEnding behavior = GetOrCreateBehavior(control);
            behavior.CommandParameter = e.NewValue;
        }
    }

    private static CellEditEnding GetOrCreateBehavior(DataGrid control)
    {
        CellEditEnding behavior =
            control.GetValue(CellEditEndingProperty) as CellEditEnding;
        if (behavior == null)
        {
            behavior = new CellEditEnding(control);
            control.SetValue(CellEditEndingProperty, behavior);
        }
        return behavior;
    }
}

public class CellEditEnding : CommandBehaviorBase<DataGrid>
{
    public CellEditEnding(DataGrid control)
        : base(control)
    {
        control.CellEditEnding += OnCellEditEnding;
    }

    private void OnCellEditEnding(object sender, DataGridCellEditEndingEventArgs e)
    {
        ExecuteCommand();
    }
} 
```

我可以使用同样的方法调用

```
local:DataGridCellEditEndingBehaviour.Command ="{Binding CellChangedCommand}" 
```

1.  当事件被调用时，我在VM的delegateCommand中没有得到任何事件参数，我如何检索事件参数，我可以通过命令参数设置它吗？如果是这样，我如何将事件参数传递给委托命令？

2.  在 CellEditEndigEvent 期间，该值尚未存储到 VM 中，因为它仍在转换中，有没有办法可以强制它从处理程序发生，所以我不需要从 CellEditEndingEventArgs 读取值，而是可以直接从VM读取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:44:00.090

是附属物。你使用它就像 local:DataGridCellEditEndingBehaviour.CommandParameter="{Binding against any you want to pass}"

您可能已经实现了自定义 DataGrid，它具有指示已编辑单元格的自定义属性或类似的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T03:55:41.240

我在尝试解决类似问题时遇到了这个问题 - 在 MVVM 应用程序中，我们有一个带有 DataGrid 的 UserControl，因此我们需要将 RowEditEnding 事件绑定到命令。我无法完全按照上面的示例进行操作，也无法确定如何找到 CommandBehaviorBase。

部分基于[MvvmLight EventToCommand 和 WPFToolkit DataGrid 双击](https://stackoverflow.com/questions/1878362/mvvmlight-eventtocommand-and-wpftoolkit-datagrid-double-click)的答案，我实现了我们的 AttachedBehaviour 如下：

```
Public Class DataGridHelper
Public Shared ReadOnly RowEditEndingCommandProperty As DependencyProperty =
    DependencyProperty.RegisterAttached("RowEditEndingCommand",
                                        GetType(ICommand),
                                        GetType(DataGridHelper),
                                        New UIPropertyMetadata(AddressOf OnRowEditEnding))

Public Shared Sub SetRowEditEndingCommand(control As DataGrid, command As ICommand)
    control.SetValue(RowEditEndingCommandProperty, command)
End Sub

Private Shared Sub OnRowEditEnding(dependencyObject As DependencyObject, e As DependencyPropertyChangedEventArgs)
    Dim control As DataGrid = TryCast(dependencyObject, DataGrid)
    If control Is Nothing Then
        Throw New InvalidOperationException("This behavior can be attached to a DataGrid item only.")
    End If

    If e.NewValue IsNot Nothing AndAlso e.OldValue Is Nothing Then
        AddHandler control.RowEditEnding, AddressOf RowEditEnding
    ElseIf e.NewValue Is Nothing AndAlso e.OldValue IsNot Nothing Then
        RemoveHandler control.RowEditEnding, AddressOf RowEditEnding
    End If
End Sub

Private Shared Sub RowEditEnding(sender As Object, e As DataGridRowEditEndingEventArgs)
    Dim element As UIElement = DirectCast(sender, UIElement)
    Dim command As ICommand = DirectCast(element.GetValue(DataGridHelper.RowEditEndingCommandProperty), ICommand)
    'command.Execute(Nothing)
    command.Execute(e)
End Sub
End Class 
```

到目前为止，这似乎有效，并且看起来比上面的方法更简单。我们将 DataGridRowEditEndingEventArgs 传递回参数中的 Command，因此它在 ViewModel 中可用。这可能也适用于 CellEditEnding 事件。

# php - 如何更改 html/css/js/php 中的活动菜单项样式

> ID：12645999
> 
> 赞同：0
> 
> 时间：2012-09-28T19:13:08.183
> 
> 标签：php, html, css, menu, navbar

我的html是这样的

```
<ul class="navigation">
<li><a href="index.php">Home</a></li>
<li><a href="index.php?content=about">About us</a></li>
</ul> 
```

如您所见，“关于我们”页面的内容已加载到 index.php。现在我想更改导航栏上不同样式的活动页面链接。

请帮帮我。我希望这个问题很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T20:03:17.563

根据选择将类添加到特定项目；

```
<ul class="navigation"> 
<li <?php if(!isset($_GET['content'])) { echo 'class="active"'; } ?>><a href="index.php">Home</a></li> 
<li <?php if(isset($_GET['content']) && $_GET['content']=='about') { echo 'class="active"'; } ?>><a href="index.php?content=about">About us</a></li> 
</ul> 
```