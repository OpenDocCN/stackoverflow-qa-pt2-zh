# StackOverflow 问答 13203000-13203999

# serialization - 如何 XML 序列化同步的 ArrayList？

> ID：13203002
> 
> 赞同：2
> 
> 时间：2012-11-02T21:02:58.683
> 
> 标签：serialization, synchronization, xml-serialization, java

当我尝试序列化和反序列化`ArrayList`包装在`Collections.synchronizedList`using `beans.XMLEncoder`and`beans.XMLDecoder`中时，我收到以下错误：

```
java.lang.reflect.InvocationTargetException  
Continuing ...  
java.lang.Exception: XMLEncoder: discarding statement XMLEncoder.writeObject*Collections$SynchronizedRandomAccessList);  
Continuing ... 
```

由于我正在处理的程序是多线程音乐库客户端/服务器应用程序，因此我需要同步。如果使用普通的 ArrayList，则序列化/反序列化工作正常。我真的不想使用 Vector，因为它包含很多遗留操作。

以下是我的序列化和反序列化方法：

```
/**  
* Serializes library into an XML file  
* @param xmlFileLocation - location of XML file  
*/ 

public void saveLibrary (String xmlFileLocation) {  
    FileOutputStream fos;  
    try {  
        fos = new FileOutputStream(xmlFileLocation);  
        XMLEncoder encoder = new XMLEncoder(fos);  
        encoder.writeObject(lib);  
        encoder.close();  
        fos.close();  
    } catch (Exception e) {  
    e.printStackTrace();  
    }  
} 

/**  
* Constructor for Library, deserializes XML file  
* @param xmlFileLocation - location of XML file  
*/ 
@SuppressWarnings("unchecked")  
public Library(String xmlFileLocation) {  
    FileInputStream fis;  
    try {  
        fis = new FileInputStream(xmlFileLocation);  
        XMLDecoder decoder = new XMLDecoder(fis);  
        Object o = decoder.readObject();  
        if (o instanceof List)    
            setLib((List<MusicDescription>) o);   
            decoder.close();  
            fis.close();  
    } catch (Exception e) {  
        e.printStackTrace();  
    }     
} 
```

正如我所说，我真的不想使用 Vector，因为它包含很多遗留操作。

# git - 删除“未暂存以进行提交的更改”中的文件

> ID：13203008
> 
> 赞同：4
> 
> 时间：2012-11-02T21:03:11.820
> 
> 标签：git

这是我的 git 状态：

```
# On branch create-views-question
# Changes not staged for commit:
#   (use "git add/rm <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   deleted:    solr/data/development/index/_0.fdt
#   deleted:    solr/data/development/index/_0.fdx
#   deleted:    solr/data/development/index/_0.fnm
#   deleted:    solr/data/development/index/_0.frq
... 
```

目前，我曾经`git rm`一个接一个地删除文件，有没有另一种方法可以同时删除它们？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T21:05:22.177

在这种情况下，你可以做

```
git rm 'solr/data/development/index/_0.*' 
```

注意`'`标记以防止外壳扩展，而是`*`直接将其传递给 git。

这是一个例子：

```
graphite> git status
# On branch master
# Changes not staged for commit:
#   deleted:    a
#   deleted:    b
#
no changes added to commit
graphite> git rm '*'
rm 'a'
rm 'b'
graphite> git status
# On branch master
# Changes to be committed:
#   deleted:    a
#   deleted:    b
# 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-28T03:23:25.243

您还可以使用：

```
git rm --cached `git status | grep deleted | sed 's#^.*:##'` 
```

这删除了所有带有`deleted:`前缀的文件`git status`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-09T18:39:07.997

就个人而言，如果我只是想让我的本地看起来像远程，我喜欢这样做：

```
git reset --hard upstream/BRANCHNAME 
```

# git - Git：从另一个分支添加子模块

> ID：13203009
> 
> 赞同：0
> 
> 时间：2012-11-02T21:03:14.493
> 
> 标签：git

我的项目遇到的一个问题是在一个分支 ( `BRANCH1`) 中，我添加了 2 个子模块 ( `MOD1`, `MOD2`)。现在`BRANCH1`已经搁置了。

现在我正在研究`BRANCH2`，我**只**想要子模块（其余的更改还没有准备好）。我将如何添加`MOD1`和`MOD2`到我当前的分支？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:30:46.037

如果有一个提交`BRANCH1`的唯一效果是添加一个（或两个）子模块，那么您可以`git cherry-pick`将该提交（或那些提交，如果您在单独的提交中添加子模块）到`BRANCH2`. 如果子模块添加是作为您不想要其余部分的更大提交的一部分完成的，您可以使用`git cherry-pick --no-commit`，然后在提交之前清除您不想要的更改。或者你总是可以只运行适当的`git submodule add`命令`BRANCH2`（这可能会或可能不会导致新`clone`的子模块 - 我不能说我曾经遇到过这种情况，所以我不确定......） .

# pseudocode - 这个用于插入排序的伪代码是如何工作的？

> ID：13203013
> 
> 赞同：1
> 
> 时间：2012-11-02T21:03:42.530
> 
> 标签：pseudocode, insertion-sort

我正在学习一个伪代码类，除了第 7 行之外，我正在遵循插入排序算法。有人可以解释一下这是什么意思吗？到目前为止的前几行是有意义的：第 6 行表示索引/占位符`A[i]`向右前进了一步。这是我不清楚“i <- i - 1”的下一步。

```
1 for j ← 2 to length[A]
2   do key ← A[j]
3     ▹ Insert A[j] into the sorted sequence A[1  j - 1].
4     i ← j - 1
5     while i > 0 and A[i] > key
6      do A[i + 1] ← A[i]
7         i ← i - 1
8     A[i + 1] ← key 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:07:06.717

当 i 大于 0 时，做一些事情，然后从 i 中减去一个。否则，循环将永远持续下去。（无限循环）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:26:02.930

实际上，第 6 行将下一个单元格的值指定为当前单元格的值。第 7 行将索引向后移动 1。实际上，假设您在循环中达到了这一点：

```
(Assuming the first item is at index 1)
A = { 1, 2, 3, 4, 5, 6 }
i = 4

Line 6: Set A[i+1] to have the value of A[i]
        ==> A[5]                        A[4]
        ==> A = { 1, 2, 3, *5*, 5, 6 }

Line 7: Shift i to the next lower position
        ==> i = 3 
```

在此之后，您已经到达循环的末尾，并在第 5 行返回到循环的顶部，在那里您测试循环的条件并继续。

# javascript - 刷顺序数据不起作用

> ID：13203014
> 
> 赞同：6
> 
> 时间：2012-11-02T21:03:44.667
> 
> 标签：javascript, d3.js, graph, ordinal

我真的很喜欢[这张图表](http://bl.ocks.org/d/3156751/)及其功能，它非常适合我想要/需要的东西。我唯一需要改变的是我需要它来允许 y 轴上的序数数据，我似乎无法让它工作（我是初学者）。

当我将 y 比例从线性更改为序数时：

`yscale[k] = d3.scale.linear() .domain(d3.extent(data, function(d) { return +d[k]; })) .range([h, 0]));`

至

```
yscale[k] = d3.scale.ordinal().rangePoints([h, 0]),
      yscale[k].domain(data.map(function(d) { return d[k]; }))) 
```

刷牙仍然会显示并自行工作，但它不会过滤留下选定的线条。除非我将它移到轴的最顶部，否则不会出现任何线条，然后全部或大部分都显示出来。当我用萤火虫单步执行代码时，它看起来只是没有得到画笔区域中的线条，而是全部（？）......我似乎无法弄清楚。:(

如果有人可以帮助解决这个问题（尤其是我必须改变的所有地方以及如何改变），我很乐意让它工作并了解我做错了什么:-\

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T21:22:20.467

刷一个序数轴返回像素，刷一个定量轴返回域。

[https://github.com/mbostock/d3/wiki/SVG-Controls#wiki-brush_x](https://github.com/mbostock/d3/wiki/SVG-Controls#wiki-brush_x)

> 尺度通常定义为定量尺度，在这种情况下，范围位于尺度域的数据空间中；但是，它可以改为定义为序数比例，其中范围在比例范围范围内的像素空间中。

我的猜测是您需要向后工作并将像素转换为域值。我发现了这个问题，因为我正在尝试做同样的事情。如果我弄明白了，我会告诉你的。

编辑：这是一个很棒的示例，可以帮助您入门。

[http://philau.willbowman.com/2012/digitalInnovation/DevelopmentReferences/LIBS/d3JS/examples/brush/brush-ordinal.html](http://philau.willbowman.com/2012/digitalInnovation/DevelopmentReferences/LIBS/d3JS/examples/brush/brush-ordinal.html)

```
function brushmove() {
  var s = d3.event.target.extent();
  symbol.classed("selected", function(d) { return s[0] <= (d = x(d)) && d <= s[1]; });
} 
```

他抓取选择范围（以像素为单位），然后选择所有系列元素并确定它们是否位于范围内。您可以基于此过滤元素，并返回数据键或您要添加到过滤器中的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-22T19:04:56.760

这里有一个带有刷牙的序数比例示例：

[http://bl.ocks.org/chrisbrich/4173587](http://bl.ocks.org/chrisbrich/4173587)

正如@gumballhead 所建议的那样，基本思想是，您负责将像素值投影回输入域。示例中的相关片段是：

```
brushed = function(){var selected =  yScale.domain().filter(function(d){return (brush.extent()[0] <= yScale(d)) && (yScale(d) <= brush.extent()[1])});                     
                             d3.select(".selected").text(selected.join(","));} 
```

# triggers - 在 Windows 7 中打开文件夹时如何执行代码

> ID：13203016
> 
> 赞同：1
> 
> 时间：2012-11-02T21:04:04.800
> 
> 标签：triggers

我想创建一个文件夹，其中包含其他文件夹中文件的快捷方式。我总是希望该文件夹包含其他文件夹中最近修改的文件。我计划编写一些代码来更新快捷方式，但我不希望使用此文件夹的人每次需要最新文件时都必须担心运行代码。

有什么方法可以在用户每次访问文件夹时触发代码运行？我还没有决定用什么语言编写代码，但我熟悉 Java、C 和 VBA。

谢谢

# image-processing - 将图像转换为时间序列

> ID：13203017
> 
> 赞同：0
> 
> 时间：2012-11-02T21:04:09.557
> 
> 标签：image-processing, machine-learning, time-series, classification

我正在尝试使用水库计算技术对图像进行分类，但我不确定如何将任意图像转换为时间序列。

我找到[了这种方法](http://izbicki.me/blog/converting-images-into-time-series-for-data-mining)，但它似乎不够通用。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T21:19:17.820

正如那篇文章中所定义的，时间序列只是一个变量的单值函数。然而，图像通常是两个变量的多值函数。因此，为了从图像转换为“时间序列”，您需要从高维空间向下投影到低维空间（例如，所描述的径向扫描技术将图像作为一个整体折叠成轮廓，这将维度减少到一）。一个关键点是这些预测都“丢失了数据”。由于它们都是有损的，因此不会有适用于所有图像的所有用途的“通用”解决方案。根据您的预期应用选择您可以承受丢失的数据是使用此技术的一个关键方面. 所以，我想我的答案是**没有单一的通用方法**将图像转换为适用于所有应用程序的“时间序列”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-08-08T10:44:06.353

我会沿着这些思路思考。

图像是一段时间内记录的静态二维像素阵列。

时间序列是非静态的，就像视频是从一帧到下一帧的一系列图像一样。

不确定我是否回答了这个问题，但我希望这会有所帮助。

# android - 如何在 Android 上创建本地化的时间前字符串

> ID：13203018
> 
> 赞同：10
> 
> 时间：2012-11-02T21:04:13.597
> 
> 标签：android, localization

我正在查看[Google I/O Session 2012 应用程序](https://github.com/google/iosched/blob/master/android/src/main/java/com/google/samples/apps/iosched/util/TimeUtils.java "iosched源代码")并遇到了这个 TODO

```
public static String getTimeAgo(long time, Context ctx) {
    if (time < 1000000000000L) {
        // if timestamp given in seconds, convert to millis
        time *= 1000;
    }

    long now = getCurrentTime(ctx);
    if (time > now || time <= 0) {
        return null;
    }

    // TODO: localize
    final long diff = now - time;
    if (diff < MINUTE_MILLIS) {
        return "just now";
    } else if (diff < 2 * MINUTE_MILLIS) {
        return "a minute ago";
    } else if (diff < 50 * MINUTE_MILLIS) {
        return diff / MINUTE_MILLIS + " minutes ago";
    } else if (diff < 90 * MINUTE_MILLIS) {
        return "an hour ago";
    } else if (diff < 24 * HOUR_MILLIS) {
        return diff / HOUR_MILLIS + " hours ago";
    } else if (diff < 48 * HOUR_MILLIS) {
        return "yesterday";
    } else {
        return diff / DAY_MILLIS + " days ago";
    }
} 
```

这让我想知道本地化它的步骤是什么。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-02T21:53:04.073

如果您不需要自定义字符串，您还可以使用[DateUtils.getRelativeTimeSpanString](http://developer.android.com/reference/android/text/format/DateUtils.html#getRelativeTimeSpanString%28long,%20long,%20long,%20int%29)，它会生成如下字符串：

*   42 分钟前
*   10 秒前
*   1小时内

示例用法：

```
final CharSequence relativeTimeSpan = DateUtils.getRelativeTimeSpanString(time, now, 0); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-02T21:04:13.597

从伊恩湖的回答：

```
final CharSequence relativeTimeSpan = DateUtils.getRelativeTimeSpanString(time, now, 0); 
```

[DateUtils.getRelativeTimeSpanString](http://developer.android.com/reference/android/text/format/DateUtils.html#getRelativeTimeSpanString%28long,%20long,%20long,%20int%29)产生如下内容：

*   42 分钟前
*   10 秒前
*   1小时内

或者，这将允许`res`使用给定的 Android 框架提供翻译`Context`，如果您想要的消息传递与您可以从框架方法中得到的不同，这将很有用。

```
public static String getTimeAgo(long time, Context context) {
    if (time < 1000000000000L)
        // if timestamp given in seconds, convert to millis
        time *= 1000;

    final long now = getCurrentTime(context);
    if (time > now || time <= 0) return "";

    final Resources res = context.getResources();
    final long time_difference = now - time;
    if (time_difference < _A_MINUTE)
        return res.getString(R.string.just_now);
    else if (time_difference < 50 * _A_MINUTE)
        return res.getString(R.string.time_ago,
                             res.getQuantityString(R.plurals.minutes, (int) time_difference / _A_MINUTE, time_difference / _A_MINUTE));
    else if (time_difference < 24 * _AN_HOUR)
        return res.getString(R.string.time_ago,
                             res.getQuantityString(R.plurals.hours, (int) time_difference / _AN_HOUR, time_difference / _AN_HOUR));
    else if (time_difference < 48 * _AN_HOUR)
        return res.getString(R.string.yesterday);
    else
        return res.getString(R.string.time_ago,
                             res.getQuantityString(R.plurals.days, (int) time_difference / _A_DAY, time_difference / _A_DAY));
} 
```

我将常量定义为：

```
/** One second (in milliseconds) */
private static final int _A_SECOND = 1000;
/** One minute (in milliseconds) */
private static final int _A_MINUTE = 60 * _A_SECOND;
/** One hour (in milliseconds) */
private static final int _AN_HOUR = 60 * _A_MINUTE;
/** One day (in milliseconds) */
private static final int _A_DAY = 24 * _AN_HOUR; 
```

然后剩下的工作就是复数和字符串资源的结构。

我的默认本地是 en，所以`res/values/strings.xml`：

```
<!-- time ago strings -->
<string name="just_now">just now</string>
<string name="time_ago">%s ago</string>
<string name="yesterday">yesterday</string> 
```

然后`res/values/plurals.xml`：

```
<plurals name="minutes">
    <item quantity="one">a minute</item>
    <item quantity="other">%d minutes</item>
</plurals>

<plurals name="hours">
    <item quantity="one">an hour</item>
    <item quantity="other">%d hours</item>
</plurals>

<plurals name="days">
    <item quantity="one">a day</item>
    <item quantity="other">%d days</item>
</plurals> 
```

这种方法应该允许您对语言的词汇和语法进行本地化，因为不同的语言不仅对“分钟”之类的词有不同的词，而且对于如何根据数量使词复数也有不同的规则。因此复数资源利用了 Android 框架对复数本地化的支持。剩下的就是提供翻译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-22T17:41:14.673

这个答案类似于 Dandre 的答案，除了：

*   昨天是根据日历时间而不是秒来定义的。
    *   例如，当：
        *   发布时间为*2015 年 1 月 19 日晚上 10:00:00*
        *   当前时间是*01:00:00 am 01/20/2015*
    *   格式化日期应打印：**昨天**而不是**3 小时前**

首先，让我们编写返回格式化日期的主函数：

```
public String getStringFormattedDate(Context context, Date postDate){
    Calendar postCalendar = Calendar.getInstance();
    postCalendar.setTime(postDate);
    Calendar currentCalendar = Calendar.getInstance();

    long delta = Math.abs(currentCalendar.getTimeInMillis() - postCalendar .getTimeInMillis()) / 1000;

    //**yesterday**
    //This has to be checked first, otherwise, yesterday logic 
    //will be overridden by "seconds ago", "minutes ago", "hours ago"
    if(isYesterday(postCalendar , currentCalendar)){
        return context.getResources().getString(R.string.yesterday);
    }
    //seconds ago
    else if (delta < 60)
    {
        return context.getResources().getQuantityString(R.plurals.seconds, (int)delta, (int)delta);
    }
    //minutes ago
    else if (delta < 3600) // 60 * 60
    {
        delta /= 60.0; // convert seconds to minutes
        return context.getResources().getQuantityString(R.plurals.minutes, (int)delta, (int)delta);
    }
    //hours ago
    else if (delta < 86400) // 24 * 60 * 60
    {
        delta /= (60.0*60.0); // convert seconds to hours
        return context.getResources().getQuantityString(R.plurals.hours, (int)delta, (int)delta);
    }
    //older dates
    else{
       delta /= (60.0*60.0*24.0); // convert seconds to days
       return context.getResources().getString(R.string.time_ago, context.getResources().getQuantityString(R.plurals.days, (int) delta , (int) delta));
    }
} 
```

`isYesterday()`检查 postCalendar 与当前日历相比是否为昨天的函数：

```
//return true, if postCalendar is a day behind currentCalendar
private boolean isYesterday(Calendar postCalendar, Calendar currentCalendar){
    Calendar cloneCurrentCalendar = (Calendar) currentCalendar.clone();
    resetTime(cloneCurrentCalendar);

    Calendar clonePostCalendar = (Calendar) postCalendar.clone();
    resetTime(clonePostCalendar);
    clonePostCalendar.add(Calendar.DAY_OF_MONTH, 1);

    return (cloneCurrentCalendar.compareTo(clonePostCalendar) == 0);
} 
```

`resetTime()`重置日历实例仅用于比较日历日期的函数：

```
//set Time to 00:00:00
private void resetTime(Calendar calendar){
    calendar.set(Calendar.MILLISECOND, 0);
    calendar.set(Calendar.SECOND, 0);
    calendar.set(Calendar.MINUTE, 0);
    calendar.set(Calendar.HOUR_OF_DAY, 0);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-14T16:26:29.647

我在答案中稍微编辑了代码。我得到了“0 小时前”字符串，这是由 long 和 int 的除法引起的。此外，`getCurrentTime()`答案中缺少方法，因此我使用了`System.getCurrentTimeInMillis()`. 这是我解决`0 hour ago`问题的修改。

```
public static String getTimeAgo(long time, Context context) {
    if (time < 1000000000000L) {
        // if timestamp given in seconds, convert to millis
        time *= 1000;
    }

    final long now = System.currentTimeMillis();
    if (time > now || time <= 0) return "";

    final Resources res = context.getResources();
    final long time_difference = now - time;

    if (time_difference < C._A_MINUTE)
        return res.getString(R.string.just_now);
    else if (time_difference < 50 * C._A_MINUTE)
        return res.getString(R.string.time_ago,
            res.getQuantityString(R.plurals.minutes, (int) time_difference / C._A_MINUTE, time_difference / C._A_MINUTE));
    else if (time_difference < 24 * C._AN_HOUR)
        return res.getString(R.string.time_ago,
            res.getQuantityString(R.plurals.hours, (int) Math.ceil((double)time_difference / C._AN_HOUR), time_difference / C._AN_HOUR));
    else if (time_difference < 48 * C._AN_HOUR)
        return res.getString(R.string.yesterday);
    else
        return res.getString(R.string.time_ago,
            res.getQuantityString(R.plurals.days, (int) Math.ceil((double)time_difference / C._A_DAY), time_difference / C._A_DAY));
} 
```

`C.java`是我保持常量的地方。这里是：

```
public class C {
    /** One second (in milliseconds) */
    public static final int _A_SECOND = 1000;
    /** One minute (in milliseconds) */
    public static final int _A_MINUTE = 60 * _A_SECOND;
    /** One hour (in milliseconds) */
    public static final int _AN_HOUR = 60 * _A_MINUTE;
    /** One day (in milliseconds) */
    public static final int _A_DAY = 24 * _AN_HOUR; 
```

其他文件 (`plurals.xml`和`strings.xml`) 相同。请看上面的答案。

# mongodb - 按字段聚合，选择另一个字段最大值的文档作为集合

> ID：13203023
> 
> 赞同：7
> 
> 时间：2012-11-02T21:04:27.460
> 
> 标签：mongodb

使用聚合框架，获取每个分组的字段最大值的文档的最佳方法是什么，因此使用下面的集合我希望具有为每个 group_id 具有最新日期的文档返回一个文档的功能。第二个清单显示了所需的结果。

```
group_id date 
1        11/1/12  
1        11/2/12
1        11/3/12
2        11/1/12
3        11/2/12
3        11/3/12 
```

期望的结果

```
group_id date
1        11/3/12
2        11/1/12
3        11/3/12 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T22:07:57.920

您可以使用[`$max`](http://docs.mongodb.org/manual/reference/aggregation/#_S_max)聚合框架中的分组功能来查找每个`group_id`. 您将需要其他查询来根据分组条件检索完整文档。

```
var results = new Array();
db.groups.aggregate(
    // Find documents with latest date for each group_id
    { $group: {
        _id: '$group_id',
        date: { $max: '$date' },
    }},
    // Rename _id to group_id, so can use as find criteria
    { $project: {
        _id: 0,
        group_id:'$_id',
        date: '$date'
    }}
).result.forEach(function(match) {
    // Find matching documents per group and push onto results array
    results.push(db.groups.findOne(match));
}); 
```

示例结果：

```
{
    "_id" : ObjectId("5096cfb8c24a6fd1a8b68551"),
    "group_id" : 1,
    "date" : ISODate("2012-11-03T00:00:00Z"),
    "foo" : "bar"
}
{
    "_id" : ObjectId("5096cfccc24a6fd1a8b68552"),
    "group_id" : 2,
    "date" : ISODate("2012-11-01T00:00:00Z"),
    "foo" : "baz"
}
{
    "_id" : ObjectId("5096cfddc24a6fd1a8b68553"),
    "group_id" : 3,
    "date" : ISODate("2012-11-03T00:00:00Z"),
    "foo" : "bat"
} 
```

# c# - 关闭 HttpRequestValidationException 日志记录？

> ID：13203032
> 
> 赞同：3
> 
> 时间：2012-11-02T21:05:03.597
> 
> 标签：c#, asp.net, asp.net-mvc-3

我们的服务器的事件查看器日志中不断出现一个异常，这是由于我们的 PCI 安全公司明确尝试入侵我们的网站造成的。当它一直出现时，它变得很烦人，最初它正在生成“黄屏死机”并作为未处理的异常登录事件查看器。我们在异常来自的代码周围放置了一个异常处理程序（如果您有兴趣，在 Phalanger 内部），所以它现在不再崩溃并导致黄屏死机，但它仍然会在事件查看器日志中作为警告结束！

知道如何在事件查看器中关闭它而不是完全关闭请求验证，这是我试图避免的吗？

我们正在使用 ASP.NET MVC 3，所以我知道我可以使用新的 ValidateInput 属性来执行此操作，但我宁愿将其保持打开状态，但能够自己处理异常并且不会将它们记录到事件查看器中，即使我抓住它并处理它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T13:44:06.567

将以下代码添加到 Global.asax.cs

```
 void Application_Error(object sender, EventArgs e)
    {
        Exception ex = Server.GetLastError();
        if (ex is HttpRequestValidationException)
        {
            Server.ClearError();
            Response.Clear();
            Response.StatusCode = 200;

            // add content below
            Response.Write("");
            Response.End();
        }
    } 
```

# php - 在 localhost 上运行 Wordpress，想让它在 Windows Server 2003 上运行

> ID：13203036
> 
> 赞同：2
> 
> 时间：2012-11-02T21:05:14.080
> 
> 标签：php, mysql, wordpress, localhost

好的，所以我有一个客户坚持要我在他们运行 Windows Server 2003 SP2 的内部服务器上安装 Wordpress。

到目前为止，我所做的是将 mySQL、PHP 和 Wordpress 安装到可公开访问的目录中（即 www.domain.com 会打开网站）。

显然，如果我在服务器上并导航到`http://localhost`它会打开工作的 Wordpress 网站，但我要做的是更改它，以便当您导航到`http://domain.com`它时会正确打开该网站。目前，如果您这样做，它将打开没有任何样式或图像的站点，因为指向`http://domain.com/page`它的路径而不是指向`http://localhost/page`

请帮助我，我到处寻找解决方案，但我找不到任何关于将它保存在您自己的服务器上的信息，只是移动到另一台服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:14:20.630

您必须在数据库的其余部分中搜索/替换以更改帖子的所有 URL、内容中的 URL 和元中的 URL。在 phpmyadmin 中使用这些查询（如果您手动更改了站点 URL 或在管理员中这样做，则第一个除外）：

```
UPDATE wp_options SET option_value = replace(option_value, 'http://www.olddomain.com/', 'http://www.newdomain.com/') WHERE option_name = 'home' OR option_name = 'siteurl';

UPDATE wp_posts SET guid = replace(guid, 'http://www.olddomain.com/','http://www.newdomain.com/');

UPDATE wp_posts SET post_content = replace(post_content, 'http://www.olddomain.com/', 'http://www.newdomain.com/');

UPDATE wp_postmeta SET meta_value = replace(meta_value, 'http://www.olddomain.com/', 'http://www.newdomain.com/'); 
```

**2016 年 10 月 21 日编辑**

**最好使用这个 PHP 脚本来更改 URL**，因为它可以正确处理数据库中的序列化数据；上面的 SQL 查询将破坏序列化数据，并且您可能会丢失主题和小部件选项。请参阅[https://interconnectit.com/products/search-and-replace-for-wordpress-databases/](https://interconnectit.com/products/search-and-replace-for-wordpress-databases/)

然后还在样式表和主题的functions.php 文件中查找硬编码的URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T22:02:59.950

转到`http://localhost/wp-admin/options-general.php`并更改 WordPress 地址 URL，如果需要，还可以更改站点地址 URL。

这应该有助于检索 CSS。

# mpi - 来自结构的 MPI 派生类型

> ID：13203041
> 
> 赞同：2
> 
> 时间：2012-11-02T21:05:30.890
> 
> 标签：mpi, derived-types

我必须将许多 type: 元素转移 `typedef struct { float w; int a, b; } edge;` 到不同的进程，因此我正在创建一个 MPI 派生类型，如下所示：

```
unsigned int typecount;
MPI_Datatype PEDGE, types[2] = { MPI_FLOAT, MPI_INT };
MPI_Aint offsets[2], extent;
int blocklen[2] = { 1, 2 };

typecount     = 2;
offsets[0]    = 0;
MPI_Type_extent(MPI_FLOAT, &extent);
offsets[1]    = (1*extent);
MPI_Type_struct (typecount, blocklen, offsets, types, &PEDGE);
MPI_Type_commit(&PEDGE); 
```

当我执行 a 时`sizeof(edge)`，我得到 12 个字节，但执行时我只得到 8 个字节`sizeof(PEDGE)`……这是为什么呢？除此之外，我将一些 PEDGE 类型的元素发送到类型数组的代码`edge`失败了，可能是因为这种不匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T21:24:22.513

这里的问题是，`MPI_Datatype`诸如此类的对象`PEDGE`本身并不是新的数据类型，而仅仅是 MPI 可以解释为数据类型的某些特定于实现的实体的不透明句柄。因此，`sizeof()`将无法返回其准确尺寸。改为使用`MPI_Type_size()`。

至于发送失败，如果没有看到您的代码，我不能说太多，但是您的数据类型定义看起来确实正确。

# ios - Admob 仅在 iPad 上向下推视图，我该如何阻止它？

> ID：13203043
> 
> 赞同：0
> 
> 时间：2012-11-02T21:05:31.350
> 
> 标签：ios, xcode, ipad, admob, banner

我在我的应用程序中使用 Admob 中介，基本上，视图在顶部有一个空间保留用于横幅。

所以我的代码允许横幅被告知去哪里，什么时候在 iPad 和 iPhone 上。

它可以在我的 iPhone 上完美运行，奇怪的是，它可以在 iPad 和 iPhone 上的许多其他应用程序上运行，但出于某种原因，在这个仅适用于 iPad 的应用程序上，它在屏幕顶部创建了一个额外的部分，所以而不是横幅位于顶部，而是横幅，然后是一个小间隙，例如 30 像素（大约），这会将屏幕向下推，因此看起来很可怕！

这是用来调用的代码，有什么想法吗？如果我删除该横幅视图的 iPad 部分，则视图加载正常，因此它必须是该代码中的某些内容。

```
- (void)viewDidLoad{

if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{

    bannerView_ = [[GADBannerView alloc] initWithAdSize:kGADAdSizeSmartBannerPortrait];
    bannerView_.adUnitID = MY_BANNER_UNIT_ID;
    CGRect screenRect = [[UIScreen mainScreen] bounds];
    CGFloat screenWidth = screenRect.size.width;
    CGFloat screenHeight = screenRect.size.height;
    CGFloat screenXPos = (screenWidth /2);
    CGFloat screenYPos = screenHeight - 980;
    [bannerView_ setCenter:CGPointMake(screenXPos, screenYPos)];
    bannerView_.rootViewController = self;
    bannerView_.adUnitID = MY_BANNER_UNIT_ID;
    bannerView_.rootViewController = self;
    [self.view addSubview:bannerView_];

}else{

    bannerView_ = [[GADBannerView alloc] initWithAdSize:kGADAdSizeSmartBannerPortrait];
    bannerView_.adUnitID = MY_BANNER_UNIT_ID;
    CGRect screenRect = [[UIScreen mainScreen] bounds];
    CGFloat screenWidth = screenRect.size.width;
    CGFloat screenHeight = screenRect.size.height;
    CGFloat screenXPos = (screenWidth /2);
    CGFloat screenYPos = screenHeight - 455;
    [bannerView_ setCenter:CGPointMake(screenXPos, screenYPos)];
    bannerView_.rootViewController = self;
    bannerView_.adUnitID = MY_BANNER_UNIT_ID;
    bannerView_.rootViewController = self;
    [self.view addSubview:bannerView_];

[super viewDidLoad];
self.navigationController.navigationBarHidden=YES;
isCharging = FALSE;
isFull = FALSE;
count =0;

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:26:43.900

我想知道这是否与隐藏有关`navigationBar`？你可能应该`[super viewDidLoad]`在你的方法中做第一行。如果你隐藏第一个会发生什么`navigationBar`？

另外，如果您将广告展示位置代码移至`viewWillAppear`:（通常已设置视图框架的位置）会更好吗？

# opengl - 支持 GL 版本 3.1 和 4.x

> ID：13203051
> 
> 赞同：0
> 
> 时间：2012-11-02T21:05:52.083
> 
> 标签：opengl, cross-platform, preprocessor, glsl

自从我学习 OpenGL 以来，我一直陷入困境：虽然我有一个支持 GL 4.3（`nVidia GTX 550 ti`型号）的好显卡，但我的笔记本电脑却没有集成显卡（Intel HD 3000，从一个`i5-2410M`到确切地说），它运行版本 3.1。我不知道这张卡是否甚至能够支持 OpenGL 3.2。

无论哪种方式，如果事实证明核心 i3/i5 处理器只需要更新驱动程序来支持 OpenGL 3.2+，我仍然不确定我应该看哪里或者我需要注意什么才能*支持*3.x 和 4.x。

例如，AFAIK GLSL 1.4 不支持使用该`layout(location=x) in blah blah`功能的着色器。但是，GLSL 1.5 有吗？

C/C++*和*GLSL 中的预处理器指令怎么样，我可以用它来区分哪些功能与哪些功能一起使用？或者，是否更推荐（在 GLSL 或 C/C++ 的情况下）只编写完全独立的头文件/源文件/着色器文件来处理这个问题？

因为我只打算支持 3.x 到 4.x，我知道这应该比它可能的要简单。

**更新**

最近在我的笔记本电脑上更新了驱动程序后，事实证明，正如 Nicol Bolas 所说，目前英特尔 3000 卡上没有（并且可能永远不会）对 3.2 的任何支持。因此，为了使这个问题更简单，我想知道与 3.3 及更高版本相比，我可以在 3.1 版上实现哪些着色语言功能（无论是在答案中还是在外部 URL 中）。任何与此相关的 OpenGL 特定 C/C++ 特性/功能也将不胜感激。

我的目标是基本上能够知道我必须做什么才能在我正在处理的项目（当前使用 GL 4.0 上下文）之间进行调解以与 3.1 上下文兼容。

如果还有什么不清楚的，我会相应地更新。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:13:30.600

我通常做的是检查[OpenGL 注册表](http://www.opengl.org/registry/#headers)中名为 glcorearb.h 的最新头文件。它有一个从 1.0 开始的每个函数定义的列表，并按定义标记了它们被引入（并符合条件）的各个版本。

我不能 100% 确定从哪里获得 GLSL 信息，但他们确实保留了旧版本的规范，因此您可以将最新版本与旧版本进行比较。

编辑：更正了错误的链接。

检查[规范](http://www.opengl.org/registry/doc/GLSLangSpec.4.20.11.clean.pdf)和[this](http://www.opengl.org/wiki/Core_Language_%28GLSL%29#Preprocessor_directives)以获取预处理器指令等。

这有帮助吗？

# ajax - 通过 ajax 加载的子页面正在杀死 jquery 功能

> ID：13203053
> 
> 赞同：0
> 
> 时间：2012-11-02T21:06:03.440
> 
> 标签：ajax, jquery

我正在一个网站[http://teneo.telegraphbranding.com/](http://teneo.telegraphbranding.com/)上工作，我希望通过 ajax 加载页面，以便侧边栏及其动画保持一致。

单击“关于”链接时，我需要它通过 jquery ajax 函数加载 about2.php。但我没有任何运气。当我可以通过 ajax 加载页面时，它会杀死页面上的所有 jquery 功能。从我读过的内容来看，我认为我需要在成功完成 ajax 调用后调用 jquery。

我已经尝试了所有看起来但无法正常工作的东西。我需要的是 about2.php 在单击链接时加载，并且 jquery 可以动态调整 div 的大小，就像在主页上一样。我试过这个，但它甚至不会加载页面：

```
//Dropdown
$(document).ready(function () {
var dropDown = $('.dropdown');
$('h3.about').on('click', function() {
    dropDown.slideDown('fast', function() {
        var url = 'about2.php'

        $.get(url, function(data) {

        //anything in this block runs after the ajax call

            var missionWrap = $('#mission-wrap');
            var w = $(window);
            w.on('load resize',function() {
                missionWrap.css({ width:w.width(), height:w.height()});
            });
            var missionContent = $('#mission-content');
            var w = $(window);
            w.on('load resize',function() {
                missionContent.css({ width:w.width() - 205 });
            });
        });
    });
}); 
```

});

然后这会加载页面，但会杀死所有与之关联的 jQuery：

```
var dropDown = $('.dropdown');
$('h3.about').on('click', function() {
    dropDown.slideDown('fast', function() {
        $('#index-wrap').load('/about2.php');
    });
}); 
```

非常感谢你。

我也试过这个，它破坏了一切：

```
$(document).ready(function () {
var dropDown = $('.dropdown');
$('h3.about').on('click', function () {
    dropDown.slideDown('fast', function () {
        $.ajax({
            type: 'GET',
            url: 'about2.php',
            success: function () {
                var missionWrap = $('#mission-wrap');
                var w = $(window);
                w.on('load resize', function () {
                    missionWrap.css({
                        width: w.width(),
                        height: w.height()
                    });
                });
                var missionContent = $('#mission-content');
                var w = $(window);
                w.on('load resize', function () {
                    missionContent.css({
                        width: w.width() - 205
                    });
                });
            };
        });
    });
}); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:54:43.183

这是如何构建应用程序以正确处理此问题的粗略概述。

假设您的 HTML 看起来像这样：

```
<html>
...
<div id="index-wrap">
    <!-- this is the reloadable part -->
    ...
</div>
...
</html> 
```

您需要重构对内部元素的所有 jQuery 增强功能，以便`#index-wrap`在重新加载后可以调用的函数中：

```
function enhance(root) {
    $('#some-button-or-whatever', root).on('click', ...);
} 
```

（即查找使用 AJAX 加载的根元素下的所有元素。）

您需要在页面首次加载时以及完成回调中的 AJAX 调用之后调用此函数：

```
$('#index-wrap').load('/foo.php', function() {
    enhance(this);
}); 
```

*您也可以使用委托*（“实时”）事件来消除其中的一些问题，但最好点击[jQuery 文档了解这些事件是如何工作的](http://api.jquery.com/on/#direct-and-delegated-events)。

至于绑定到的事件`window`或未动态加载的 DOM 元素，您根本不需要根据加载的子页面重新绑定它们，只需检查加载的哪些元素在您设置的处理程序中：

```
$(window).on('load resize', function() {
    var $missionContent = $('#missionContent');
    if ($missionContent.length) {
        $missionContent.css(...);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T21:55:26.180

这应该有效。

```
function resize_me () {
    var w = $(window);
    var missionWrap = $('#mission-wrap');
    var missionContent = $('#mission-content');
    missionWrap.css({ width:w.width(), height:w.height()});
    missionContent.css({ width:w.width() - 205 });
}

//Dropdown
$(document).ready(function () {
    $(window).on('load resize', function () {
        resize_me();
    });
    var dropDown = $('.dropdown');
    $('h3.about').on('click', function() {
        dropDown.slideDown('fast', function() {
            var url = 'about2.php'

            $.get(url, function(data) {
                resize_me();
            });
        });
    });
} 
```

我认为问题在于您附加到窗口对象的加载事件没有被 $.get 的成功加载触发。

# c# - 终止 ac# 控制台应用程序

> ID：13203054
> 
> 赞同：1
> 
> 时间：2012-11-02T21:06:09.460
> 
> 标签：c#, console, exit, terminate

我正在尝试关闭我的 c# 控制台应用程序（在没有调试的情况下运行）并且没有任何工作......我已经尝试了所有具有不同退出代码的常见嫌疑人，但没有任何东西终止它=/是因为该选项在一堆嵌套中如果语句？它可能是我想念的非常简单的东西，但它现在伤害了我的大脑，请有人帮忙！我试过了 ：

```
System.Environment.Exit(0);
System.Environment.Exit(1);
System.Environment.Exit(-1);
return;
Application.Exit(); //(wont even except it) 
```

如果上下文有帮助，我使用嵌套的 if 语句来检查用户是否输入了数字或字母“q”，如果他们输入了数字，则执行计算，如果输入了字母 q，则程序将退出并对于其他任何错误语句都会输出。

```
string userInput;
int userInputDigit = 0;
double userCost = 0;
char userInputChar;

userInput = Convert.ToString(Console.ReadLine());

if (int.TryParse(userInput, out userInputDigit))
{
    if (userInputDigit <= 50)
    {
        userCost = (price * userInputDigit);
        Console.WriteLine("You have purchased {0} Widgets at a cost of {1:c0}", userInputDigit, userCost);
    }
    else if ((userInputDigit > 50) && (userInputDigit <= 80))
    {
        userCost = (price * 50) + ((userInputDigit - 50) * (price - 1));
        Console.WriteLine("You have purchased {0} Widgets at a cost of {1:c0}", userInputDigit, userCost);
    }
    else if ((userInputDigit > 80) && (userInputDigit <= 100))
    {
        userCost = (price * 50) + (30 * (price - 1)) + ((userInputDigit - 80) * (price - 2.50));
        Console.WriteLine("You have purchased {0} Widgets at a cost of {1:c0}", userInputDigit, userCost);
    }
    else
    {
        Console.WriteLine("Error! Please input a number between 0 and 100");
    }

}
else if (char.TryParse(userInput, out userInputChar))
{
    if ((userInput == "q") || (userInput == "Q"))
    {
        System.Environment.Exit(0);
    }
    else
    {
        Console.WriteLine("Incorrect Letter Inputted");
    }
}
else
{
    Console.WriteLine("Error! Please input a number or 'q' to quit");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T21:19:00.267

我认为您需要做的是右键单击您的项目，选择“属性”，然后（引用 msdn.com）：

> 在 Visual Studio 开发环境中设置此链接器选项
> 
> 打开项目的属性页对话框。有关详细信息，请参阅设置 Visual C++ 项目属性。
> 
> 单击链接器文件夹。
> 
> 单击系统属性页。
> 
> 修改子系统属性。

对于子系统，选择控制台。希望这可以帮助！:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T21:36:08.270

我建议您尝试 application.close() 功能。它多次拯救了我的一天。如果没有帮助，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T21:22:12.717

我会首先在调试中运行您的应用程序并检查以确保您的 Application.Exit 确实受到打击。这可能会解释为什么应用程序没有退出。

您应该使用 Environment.Exit(0)。这似乎是结束控制台应用程序的更好方法。

来源： http: [//geekswithblogs.net/mtreadwell/archive/2004/06/06/6123.aspx](http://geekswithblogs.net/mtreadwell/archive/2004/06/06/6123.aspx)

如果此代码在 Main 中，我建议使用 return；在您调用退出应用程序后。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T21:34:49.230

如果您从 Visual Studio 启动控制台应用程序，而不是处于调试模式 (Ctrl+F5)，则控制台窗口会在应用程序完成执行*后保持打开状态。*并提示`Press any key to continue...`。**同样，此时您的控制台应用程序已退出。**

当您运行 *.exe 文件时，您的控制台将在不要求按键的情况下关闭。这只是 Visual Studio 的“功能”——它运行时`cmd.exe`告诉它运行您的可执行文件，然后暂停。

这是 Visual Studio 在您启动应用程序而不进行调试时所做的事情（您可以将其复制到 *.bat 文件并运行它）

```
ECHO OFF
CLS
"Path\To\Your\ConsoleApplication.exe"
PAUSE 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T22:02:15.720

使用循环，让 Main 正常返回。此外，我还尝试简化条件检查以及字符串比较和解析。您的错误消息表明验证范围（“介于”0 和 100 之间）实际上并未由前面的 if/else if 逻辑强制执行。例如，如果用户输入负值，您的第一种情况 (... <= 50) 将为真。另外，我没有看到价格是在哪里宣布的，所以我在我的例子中编了一个常数。

```
static bool ExitRequired(string line)
{
    return string.Equals(line, "q", StringComparison.OrdinalIgnoreCase);
}

static void Main(string[] args)
{
    const double price = 10;
    int userInputDigit;
    double userCost;
    string line = null;

    while (!ExitRequired(line))
    {
        Console.WriteLine("Enter a number or press 'q' to exit...");
        line = Console.ReadLine();

        if (ExitRequired(line))
            break;

        if (int.TryParse(line, out userInputDigit) 
            && userInputDigit > 0 
            && userInputDigit < 100)
        {
            if (userInputDigit <= 50)
            {
                userCost = (price * userInputDigit);
                Console.WriteLine("You have purchased {0} Widgets at a cost of {1:c0}", userInputDigit, userCost);
            }
            else if ((userInputDigit > 50) && (userInputDigit <= 80))
            {
                userCost = (price * 50) + ((userInputDigit - 50) * (price - 1));
                Console.WriteLine("You have purchased {0} Widgets at a cost of {1:c0}", userInputDigit, userCost);
            }
            else if ((userInputDigit > 80) && (userInputDigit <= 100))
            {
                userCost = (price * 50) + (30 * (price - 1)) + ((userInputDigit - 80) * (price - 2.50));
                Console.WriteLine("You have purchased {0} Widgets at a cost of {1:c0}", userInputDigit, userCost);
            }
        }
        else
        {
            Console.WriteLine("Error! Please input a number between 0 and 100");
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T22:40:32.177

当您从 Visual Studio 运行项目时，会添加“按任意键继续”文本。

相反，去垃圾箱并从那里运行它。

确保在运行之前构建项目。如果您从 VS 运行，它将在需要时自动构建，但从 Windows 资源管理器运行文件不会这样做。

# concurrency - 石英作业节流

> ID：13203055
> 
> 赞同：2
> 
> 时间：2012-11-02T21:06:13.313
> 
> 标签：concurrency, quartz-scheduler, jobs, throttling

有点奇怪的要求：

我有一些作为数据收集器的石英工作，在可用时从不同位置收集数据。然后我有另一个工作 [数据加载] 正在从收集器作业中调用/触发以更新我的数据库。

我的要求是如何限制 Load Job 以使只有两个实例并行运行并处理来自收集器作业的工作

收集器作业 1,2,...N > 加载器作业（两个实例）

作业程序部署在集群 Tomcat 中。

两个问题： 1）当 Loader 作业的两个实例已经在处理中时，如何让 Collector 作业等待？有什么方法可以使用石英程序来实现 FIFO 逻辑来限制 Loader 作业的工作？如果一个数据已经在等待处理，我也不希望收集器获取另一个数据。2）有没有办法只用两个线程运行作业？一次不能超过两个实例处于活动状态？我对我的数据库表有限制，只能并行运行两个实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-12-21T07:26:18.663

8 年后，在搜索工作限制时，该问题在谷歌中显示为最高结果。虽然问题中的案例显然要求使用队列，但从未给出实际答案。

所以......要在石英中节流工作，必须使用`TriggerListener`和实施节流`vetoJobExecution`。也可以对作业本身进行注释，以防止使用`@DisallowConcurrentExecution`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:33:27.173

看来你在这里有一个生产者 - 消费者的情况。生产者和消费者通常由一个队列分隔。让您的收集器将项目放入（持久？）队列，并让您​​的加载器从队列中读取并分派最多 2 个处理线程。

# backbone.js - 被相互冲突的教程迷惑的backbone.js noob

> ID：13203058
> 
> 赞同：8
> 
> 时间：2012-11-02T21:06:30.220
> 
> 标签：backbone.js

我是backbone.js 的新手，正在学习一些教程。我发现了一些看起来不错的方法，但是它们的实施方式存在一些不一致之处，因此我正在寻找有关最佳实践的一些指导。

以下是我正在学习的教程：

*   [http://www.jamesyu.org/2011/01/27/cloudedit-a-backbone-js-tutorial-by-example/](http://www.jamesyu.org/2011/01/27/cloudedit-a-backbone-js-tutorial-by-example/)
*   [http://coenraets.org/blog/2011/12/backbone-js-wine-cellar-tutorial-part-1-getting-started](http://coenraets.org/blog/2011/12/backbone-js-wine-cellar-tutorial-part-1-getting-started)

我的问题是：

1.  第一个 tut 使用 Backbone.Controller，但没有使用 Backbone.Collection。第二个则相反。哪个是 MVC 上主干中的“C”的最佳实践？
2.  第一个 tut 在 Model 中定义 url，而第二个在 Collection 中定义它。哪个是更好的做法？
3.  第二个 tut 使用 Backbone.Router，而第一个没有。哪个是最佳实践？

或者，如果有人可以建议遵循最佳实践的更好的介绍教程，我很乐意从那里学习。不幸的是，由于这两者之间的不一致，我担心我可能会从一开始就学习一些坏习惯。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T21:28:27.690

Backbone.Controller去年[更名为Backbone.Router。](https://github.com/jashkenas/backbone/commit/cf3215139acc86a54e94f039a0dbf627b49a5e14)我猜你正在阅读一个旧教程。

[BackboneTutorials.com](http://backbonetutorials.com/)是一个不错的入门教程。

在你学习的过程中构建一个小应用程序，你就会知道 Backbone 为你做了什么。

学习 Backbone 的最好方法是阅读带[注释的源代码](http://documentcloud.github.com/backbone/)。每一行都有注释和解释。

构建应用程序时使用[开发版本而不是缩小版本。](http://documentcloud.github.com/backbone/backbone.js)这有助于调试。

如果您喜欢读书，请查看 Addy Osmani 的[Backbone Fundamentals](https://github.com/addyosmani/backbone-fundamentals)，这是一本免费的电子书。这本书很棒，但很冗长。您可以将其用作参考。

有关资源的最终列表，请参阅Quora 上的[这个问题；](http://www.quora.com/What-are-some-good-resources-for-Backbone-js?)

不要太担心什么是“V”、什么是“C”以及主干在 MVC 上的旋转。该框架在分离与服务器交互的代码和执行核心客户端逻辑的代码方面做得非常出色。DOM 元素的模板化和更新留给您。从这个意义上说，它非常简约。Backbone 提供了使不同部分相互交互的[事件。](http://backbonejs.org/#Events)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T21:26:30.017

这是一个很好的问题。但是，Backbone 并没有决定您应该如何组织您的代码。

所以，真正的答案是：视情况而定。

这取决于您的应用程序的需要以及您的编程习惯。

如果您想了解一些最佳实践，我建议您参考 Backbone Boilerplate 项目：[https ://github.com/tbranyen/backbone-boilerplate](https://github.com/tbranyen/backbone-boilerplate)

这个项目非常扎实，在开始时真的帮助了我。

然后，回答你的问题（这可能让人觉得很自以为是，确实如此）：

**1**：Backbone 主要是一个 MV* 框架（Model-View-Whatever）。控制器逻辑主要存在于 Backbone 视图中，这对于前端开发来说是可以的，因为逻辑通常确实与 UI 相关联（因为我们主要是编码接口）。Backbone 没有内置控制器，但如果您更喜欢这种类型的组织，只需构建您自己的。

**2**：网址取决于您的需要。如果您要获取完整的集合，请将其设置在集合上，如果您只获取（或可能保存）一个模型，请将其设置在模型上。这些也生活得很好。

**3**：关于路由器，如果您要在应用程序上构建多个页面/部分，请使用它们。但请注意不要`routes`像`action`在 RESTful API 中那样使用，这在大多数情况下最终会带来问题（用户按下后退按钮等）。因此，如果您想管理页面，请使用路由。

希望这有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T21:28:38.603

我会根据经验回答：

**问：**第二个正好相反。哪个是 MVC 上主干中的“C”的最佳实践？

**答：**`Controller`当前的 Backbone [http://backbonejs.org/](http://backbonejs.org/)中没有- “C”出现在 View（大多数情况）或 Router（见下文）中。

**问：**第一个 tut 在 Model 中定义 url，而第二个在 Collection 中定义它。哪个是更好的做法？

**A：**有些情况下您不需要收藏。如果你不这样做，你的模型绝对需要一个 URL。当您确实有一个集合时，您为 Collection 指定的 URL 将应用于其模型。

**问：**第二个使用 Backbone.Router，而第一个没有。哪个是最佳实践？

**答：**经验法则 - 您想在 2 种情况下使用路由器：1）当您想要拥有历史记录时，以及 2）当您想要拥有永久链接时。否则你真的不需要路由器。

# javascript - 从 JSON 数组转换为对象后的未定义值

> ID：13203070
> 
> 赞同：0
> 
> 时间：2012-11-02T21:07:58.413
> 
> 标签：javascript

我有一个 JSON 数组，其中一个对象由节点和链接组成。

```
data = [Object]=[ { nodes: Array[..] ,links: Array[…] } ] 
```

这一切都很好，但是例如要访问链接，我必须使用 data[0].links，这有点烦人。我希望数组成为一个对象，以便 data.links 可以访问链接。我试图设置：

```
data = data[0]; 
```

但是随后对象数组 data.links 显示为“未定义”。似乎在访问特定元素时会显示该值，例如`data.links[3].name`。这是为什么？

编辑：

进一步来说：

如果数据 = [ { 节点：数组 [...] ，链接：数组 [...] } ] =>

```
console.log(data[0].links); //shows the data[0].links[0].name = value in the console 
```

如果数据 = { 节点：数组 [...] ，链接：数组 [...] } =>

```
console.log(data.links); //shows data[0].links[0].name = undefined 
```

但有趣的是

```
console.log(data.links[0].name); //shows the correct value. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:15:47.837

几个解决方案：

`[]`如果您控制 JSON 输出，只需删除那些基本上将您的对象包装在数组中的括号。

```
data = { nodes: [...] ,links: [...] }; 
```

如果您不控制 JSON，只需将数组的零索引分配给您实际要使用的变量。

```
json = [ { nodes: [...] ,links: [...] } ];
data = json[0]; 
```

不幸的是，“链接”是一个数组。要访问该数组的成员，您需要访问其索引值。

# html - 使用 Bootstrap 的类似 Mac 的复选框

> ID：13203073
> 
> 赞同：-4
> 
> 时间：2012-11-02T21:08:12.147
> 
> 标签：html, css, twitter-bootstrap

我使用 Bootstrap，我可以设置我的复选框看起来像 Mac 吗？即[http://www.flickr.com/photos/wufoo/5761838808/](http://www.flickr.com/photos/wufoo/5761838808/) 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:13:11.470

设置表单元素的样式真的很困难......

我使用[http://formalize.me](http://formalize.me)来规范跨浏览器的样式，作为奖励，它包含许多有用的示例，您可以根据自己的喜好进行修改。

这个类似的问题[How to style checkbox using CSS?](https://stackoverflow.com/questions/4148499/how-to-style-checkbox-using-css) 建议你使用这个脚本

[http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/](http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/)

# php - 我可以在 PHP 中使用 GET 和 CRON

> ID：13203076
> 
> 赞同：0
> 
> 时间：2012-11-02T21:08:29.307
> 
> 标签：php, get, cron, crontab

> **可能重复：**
> [Cron Jobs 使用变量调用 PHP 脚本](https://stackoverflow.com/questions/3872679/cron-jobs-calling-a-php-script-with-variables)

我设置了一个 cron 作业，我的命令如下所示：

```
php -q home/seatbe5/public_html/shop/index.php?page=sendorder/sendorder 
```

我收到一条错误消息，说没有指定输入文件？

当我删除 route=... 它工作正常。有解决办法吗？

谢谢彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:14:28.517

如果您想将参数传递到 cli 中，请查看： [argv](http://php.net/manual/en/reserved.variables.argv.php)

或者你可以编辑 cron 作业`wget http://site.com`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T21:23:35.833

如果您是主持人，则不允许 wget。编写这个简单的 php 脚本：

脚本.php：

```
<?php
$homepage = file_get_contents('http://www.example.com/?param=2&param2=sdf');
echo $homepage;
?> 
```

然后只需将 script.php 放入您的 cron 中。

我不完全确定你的 cron 需要做什么，它需要返回任何东西吗？如果它只需要调用它，并且您不需要任何动态参数，那就没问题了。

# java - 如何在 JTS 中使用 Delaunay 三角剖分为点插值 Z 值的示例

> ID：13203080
> 
> 赞同：3
> 
> 时间：2012-11-02T21:08:52.473
> 
> 标签：java, geometry, jts

这是一个相当补救的问题。我一直在查看 JTS DelaunayTriangulationBuilder 的文档，我不知道如何做看起来应该很简单的事情。我希望获取一系列点，对它们进行三角剖分，然后在该网格中插入随机点的 Z 值。粗略阅读如何做到这一点并不明显。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T02:24:08.577

加载三角剖分对象后，调用`getSubdivision()`它来获取三角剖分。它使用[四边](http://en.wikipedia.org/wiki/Quad-edge)数据结构，稍后您将需要它。（如果您知道什么是半边或翼边表示，则更容易理解。）结果`QuadEdgeSubdivision`有一个方法`locate`，给定一个坐标，返回封闭三角形的一条边（作为四边形）。用 获取它的源顶点，用 获取它`orig()`的目标顶点`dest()`。获取另一条边，`oNext()`其目标顶点是第三个顶点（dPrev().origin() 也是同一个顶点）。现在您有了三个顶点，将您的测试点表示为 a`Vertex`和 call `interpolateZValue`。

例如：

```
public static double 
interpolateZ(DelaunayTriangulationBuilder triangulation,
             Coordinate coordinate) {
    QuadEdgeSubdivision quadEdgeSubdivision = triangulation.getSubdivision();
    QuadEdge edge = quadEdgeSubdivision.locate(coordinate);
    return new Vertex(coordinate.x, coordinate.y)
            .interpolateZValue(edge.orig(), edge.dest(), edge.oNext().dest());
} 
```

不过，你是对的。通过阅读他们的 API 如何做到这一点并不明显。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T19:59:49.393

I'm not familiar with JTS DelauneyTriangulationBuilder, but it sounds like you have a collection of points `(x,y,z)`, and you are submitting the 2D `(x,y)` pairs to the triangulator. This gives you a planar triangulation of the `(x,y)` points, but also a mesh who's vertices are the original `(x,y,z)` points.

Once you have a triangulation, you wish to find the point `(p,q,r)` on the mesh that corresponds to the planar point `(p,q)`. To do so, find the triangle `T` of the Delauney triangulation that contains `(p,q)`. Find the [barycentric coordinates](http://en.wikipedia.org/wiki/Barycentric_coordinate_system_%28mathematics%29#Barycentric_coordinates_on_triangles) of `(p,q)` relative to `T`, and use these to compute a weighted average `r` of the `z` values corresponding to the vertices of `T`. That weighted average is the `Z` value you're looking for. In other words, `(p,q,r)` is on the mesh.

# objective-c - Objective-C（iOS / Cocoa）：将第一个字母扩展到星期几

> ID：13203081
> 
> 赞同：0
> 
> 时间：2012-11-02T21:09:00.130
> 
> 标签：objective-c, ios, cocoa, switch-statement

我有一个编码字符串“m8”或“w12”，我想将它们扩展为一个日对象“星期一”或“星期三”和一个时间对象“8:00”或“12:00”。我可以处理但很难找到一种简单的方法（可以在一个块中使用）在Objective-C（iOS）中将'm'变成'Monday'......

我最初想得到第一个字母（总是只有一个字母，然后是 1 或 2 个数字。星期四是“h”。周六和周日不适用）。

```
[codedString substringToIndex:1]  // returns 'm' or 'w', etc... 
```

然后使用`switch`语句将另一个变量设置为“星期一”或“星期二”，然后对数字进行类似的设置。但是，然后我记得你不能`switch`在`NSString`. 那么如何在 Objective-C 中进行这样的事情呢？

在 Objective-C 和 Ruby 之间来回切换大脑很痛苦，所以我知道我错过了一些明显的东西......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T21:21:07.600

看起来像字典的工作！

```
NSDictionary *stringToDayMap = @{@"m" : @"Monday", @"t" : @"Tuesday", @"w" : @"Wednesday", @"th" : @"Thursday", @"f" : @"Friday", @"s" : @"Saturday"};
NSString *day = [stringToDayMap objectForKey:[codedString substringWithRange:NSMakeRange(0, 1)]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T21:13:10.740

您可以打开任何 C 原始类型。因此，如果它是一个字母，那么您可以执行以下操作：

```
switch([codedString characterAtIndex:0])
{
     case 'h': NSLog(@"This is Thursday");
     ... etc ...
} 
```

您将打开 a`unichar`但它们明确是 ASCII 的超集，因此 C 字符常量“h”将正确映射到 iOS 或 OS X 目标。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T21:13:12.623

你不能打开一个字符串，但你可以打开一个字符。

```
switch([codedString characterAtIndex:0]) {
    case 'm': day = @"Monday";  break;
    case 't': day = @"Tuesday"; break;
    ...
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-02T21:18:38.083

```
NSRange dayRange = [@"smtwhfa" rangeOfString:[codedString substringToIndex:1]];
NSString* dayString = [dayArray objectAtIndex:dayRange.location]; 
```

其中 dayArray 是一个预加载了 @"Sunday", @"Monday", ... 的 NSArray

（不知道星期六使用什么单个字符——酌情替换。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T21:20:52.420

您可以使用所需的值创建字典。

```
NSDictionary *daysOfTheWeek = @{@"m": @"Monday", @"t":@"Tuesday"}; // and so on... 
```

# java - 如何从主 Activity 刷新片段中的 ListView？

> ID：13203088
> 
> 赞同：1
> 
> 时间：2012-11-02T21:09:55.793
> 
> 标签：java, android, eclipse, android-listview, android-fragments

我有一个`MainActivity`包含两个片段的标签栏：`MainFragment`和`WishlistFragment`. 它们都扩展为`ListFragment`。

当有人从选项菜单中触摸菜单项时，我希望*显示*的片段中的 ListView使用其名为的自定义适配器刷新其列表`LazyAdapter adapter`。

所以在这里是我希望在我的`MainActivity`代码中进行刷新的地方：

```
public boolean onOptionsItemSelected(MenuItem item) {   
     switch (item.getItemId()) {
        case R.id.menu_edit:

               // find out which fragment is showing here
               // refresh the fragment's listview here
               // adapter.notifyDataSetChanged();

               return true;
        }
} 
```

我怎样才能做到这一点？我不确定如何调用片段以及如何确定正在显示哪个片段。

以下是我设置标签的方式`MainActivity`：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    actionBar.addTab(actionBar.newTab().setText("Main").setTabListener(this));
    actionBar.addTab(actionBar.newTab().setText("Wishlist").setTabListener(this));
}

public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    // When the given tab is selected, show the tab contents in the container
    ListFragment newfragment = null;

    switch (tab.getPosition() + 1)
    {
    case 1:
        newfragment = new MainFragment();
        break;

    case 2:
        newfragment = new WishlistFragment();           
        break;
    }

    getSupportFragmentManager().beginTransaction()
            .replace(R.id.container, newfragment)
            .commit();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T21:15:27.260

> 我怎样才能做到这一点？

第 1 步：修复`onTabSelected()`. 您不希望每次用户选择选项卡时都创建一个新片段。相反，您希望有两个片段，由数据成员中的活动持有，并在`replace()`事务中使用这些片段。

步骤#2：当需要时，调用`getSelectedNavigationIndex()`，`ActionBar`使用它来选择你需要的两个片段中的哪一个（从上面步骤#1 中提到的数据成员中获得），并在片段上调用一些方法来做你想做的事。

# math - 数学问题的代码生成

> ID：13203089
> 
> 赞同：6
> 
> 时间：2012-11-02T21:09:56.750
> 
> 标签：math, f#, code-generation, ocaml

我想编写一个程序，该程序接受对数学（优化）问题的描述，对其进行解析，并生成解决该问题的紧凑、高效的 C 代码。在 python 中，我对一个更小、更具体的问题有一个破解的解决方案，但它很丑陋，只依赖于 C 代码的模板 - 所以我有一堆看起来像的字符串

`for (k = 0; k <= %s; k += %s) a[k] = v[k]/%s * a[i];`

然后是一堆复杂的条件逻辑，在填写正确的 %s 值后，在某些时候上面的行被写入 solve_problem.c。

它实际上变得更加复杂，因为通常问题是由具有特定结构的矩阵等参数化的，而上述方法虽然可行，但在其自身的影响下开始分崩离析。

所以我想我正在寻找的是关于如何在代码中表示这些类型的问题的高级建议，或者更确切地说只是其他项目已经解决了这个问题的示例。有人告诉我使用 OCaml 或 F# 并查看 FFTW，但更简单的东西将不胜感激。

我很抱歉如此口齿不清，但我什至很难向自己表达我在寻找什么，我认为这就是问题的根源。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T11:16:50.557

> ```
> for (k = 0; k <= %s; k += %s) a[k] = v[k]/%s * a[i]; 
> ```

您正在寻求表示上述代码的方法。这可以用以下值表示：

```
For("k", Int 0, Leq(Var "k", a), Set("k", Add(Var "k", b)),
    SetElt(Var "a", Var "k",
           Mul(Div(GetElt(Var "v", Var "k"), c, GetElt(Var "a", Var "i"))))) 
```

给定这样的类型：

```
type Expr =
  | Int of int
  | Var of string
  | Leq of Expr * Expr
  | Mul of Expr * Expr
  | Div of Expr * Expr
  | Set of string * Expr
  | SetElt of Expr * Expr * Expr
  | GetElt of Expr * Expr
  | For of string * Expr * Expr * Expr 
```

我编写了一个名为 HLVM 的非常简单的高级 VM，您可能会发现它很有启发性，因为它以简单的方式使用了这种表示。定义在[这里](https://forge.ocamlcore.org/scm/viewvc.php/hlvm.ml?view=markup&root=hlvm)，并且使用这些定义编写的一堆测试在[这里](https://forge.ocamlcore.org/scm/viewvc.php/test.ml?view=markup&root=hlvm)。

这种表示比字符串处理功能强大得多，因为模式匹配编译器会为您进行详尽和冗余检查，从而可以轻松地在这种`Expr`类型的值上编写函数，包括优化通道和代码生成器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T02:41:54.207

您正在尝试实现编译器，这就是您应该解决问题的方式。有一种输入语言可以描述您的优化问题，输出语言是 C。

您可以将您的问题分解为以下任务（不一定按此顺序解决）：

1.  设计一个代表输入语言的[抽象语法的数据结构。](http://en.wikipedia.org/wiki/Abstract_syntax)
2.  设计一个表示输出语言的抽象语法的数据结构，在您的情况下，它是 C 的（一个子集）。
3.  设计输入语言的[具体语法](http://en.wikipedia.org/wiki/Concrete_syntax)。
4.  实现一个词法分析器和一个将具体语法转换为抽象语法的解析器。
5.  实现一个漂亮的打印机，将输出语言的抽象语法转换为具体语法。
6.  实现一个编译器，它将以抽象语法表示的优化问题带入输出，再次以抽象语法表示。

如果你不习惯实现语言和编译器，你会很想走捷径。例如，您可能会考虑使用正则表达式进行解析。或者您可能认为跳过抽象语法并直接生成 C 源代码是个好主意。我强烈建议不要这样做。抽象是你的朋友，因为它会使你的问题易于管理。

您应该仔细选择实现整个过程所使用的语言。当然，像 Ocaml 这样的东西非常适合这项工作。但是，如果您还不了解 Ocaml，则应该坚持使用您最熟悉的任何语言。您不应该尝试手动实现解析器，那里有很多解析器生成器。值得一学。您可能会发现我的[PL Zoo](http://andrej.com/plzoo/)很有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T00:17:55.900

我不知道您在优化方面有多少背景，但我怀疑您描述的路径是要走的路。具体来说，如果您可以编写高效的 C 代码来解决优化问题，我会感到惊讶，除非您将自己限制在特定类别的问题上。优化通常区分不同类型的问题（线性与非线性、整数与连续与混合整数规划），每种问题通常使用非常不同的算法来解决解决方案。

您可能想查看[Microsoft Solver Foundation](http://msdn.microsoft.com/en-us/devlabs/hh145003.aspx)以获得一些想法。本质上，MSF 是一个通用 API，它允许您以多种形式声明您的问题（OML，一种用于指定优化问题的声明性语言，还有 C# 和 F#），然后根据性质将问题提供给适当的求解器的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T22:18:27.480

听起来你想要符号计算之类的东西。查看一些实现，例如：

*   [MATLAB](http://www.mathworks.com/products/optimization/examples.html?file=/products/demos/shipping/optim/symbolic_optim_demo.html)
*   [数学](http://reference.wolfram.com/mathematica/ref/Minimize.html)
*   [汤姆西姆](http://tomsym.com/index.html)
*   [Python](http://sympy.org/en/index.html)

一般来说，尝试查看优化包，许多支持某种符号表示。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-02T21:41:19.177

不知道更简单。建议你看看现有的数学建模工作。我不希望这很简单。求解器代码已经够难了，生成它们也更难。

您需要指定问题细节的方法，以及组装由这些细节控制的答案部分的方法。

我建议：

[Sinapse](http://www.cs.utexas.edu/users/idbaxter/cs395T/papers/Kant94_Sinapse_00210600.pdf)，一个生成数学建模代码的系统；本文讨论了知识是如何组织的以及如何支持有限差分码的生成，

和

[求解有限差分方程](http://dspace.mit.edu/bitstream/handle/1721.1/35407/31359818.pdf?sequence=1)，麻省理工学院的论文也是如此。

（我在 Sinapse 系统的初始开发过程中工作过）。

# java - 找到第 K 个最小的元素。循环

> ID：13203091
> 
> 赞同：1
> 
> 时间：2012-11-02T21:09:59.303
> 
> 标签：java, algorithm

我尝试使用我的代码找到第 k 个最小元素，但无法修复我的代码中的错误。当它尝试使用 pivot = 0 对 [0, 0, 2] 进行分区时，它正在循环。

```
import java.util.Arrays;

public class OrderStat {

    public static void main(String[] args) {
        int[] uA = {13, 32, 28, 17, 2, 0, 14, 34, 35, 0};
        System.out.println("Initial array: " + Arrays.toString(uA));
        int kth = 3; // We will try to find 3rd smallest element(or 2nd if we will count from 0).
        int result = getKthSmallestElement(uA, 0, uA.length - 1, kth - 1);
        System.out.println(String.format("The %d smallest element is %d", kth, result));

        System.out.println("-------------------------------------");
        Arrays.sort(uA);
        System.out.println("Sorted array for check: " + Arrays.toString(uA));
    }

    private static int getKthSmallestElement(int[] uA, int start, int end, int kth) {
        int l = start;
        int r = end;
        int pivot = uA[start];
        System.out.println("===================");
        System.out.println(String.format("start=%d end=%d", start, end));
        System.out.println("pivot = " + pivot);

        //ERROR HERE: When we will work with [0, 0, 2] part of array with pivot = 0 it will give us infinite loop;
        while (l < r) {
            while (uA[l] < pivot) {
                l++;
            }
            while (uA[r] > pivot) {
                r--;
            }
            if (l < r) {
                int tmp = uA[l];
                uA[l] = uA[r];
                uA[r] = tmp;
            }
        }
        System.out.println("After partitioning: " + Arrays.toString(uA) + "\n");

        if (l < kth)
            return getKthSmallestElement(uA, l + 1, end, kth);
        else if (l > kth)
            return getKthSmallestElement(uA, start, l - 1, kth);

        return uA[l];
    }

} 
```

请解释一下，如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T21:31:38.453

交换后

```
if (l < r) {
    int tmp = uA[l];
    uA[l] = uA[r];
    uA[r] = tmp;
} 
```

您需要移动`l`和`r`（或至少其中一个，以取得任何进展）到下一个位置 ( `++l; --r;`)。否则，如果两个值都等于枢轴，则无限循环。

也可用于快速排序的正确分区是

```
// make sure to call it only with valid indices, 0 <= start <= end < array.length
private int partition(int[] array, int start, int end) {
    // trivial case, single element array - garbage if end < start
    if(end <= start) return start;
    int pivot = array[start]; // not a good choice of pivot in general, but meh
    int left = start+1, right = end;
    while(left < right) {
        // move left index to first entry larger than pivot or right
        while(left < right && array[left] <= pivot) ++left;
        // move right index to last entry not larger than pivot or left
        while(right > left && array[right] > pivot) --right;
        // Now, either
        // left == right, or
        // left < right and array[right] <= pivot < array[left]
        if (left < right) {
            int tmp = array[left];
            array[left] = array[right];
            array[right] = tmp;
            // move on
            ++left;
            --right;
        }
    }
    // Now left >= right.
    // If left == right, we don't know whether array[left] is larger than the pivot or not,
    // but array[left-1] certainly is not larger than the pivot.
    // If left > right, we just swapped and incremented before exiting the loop,
    // so then left == right+1 and array[right] <= pivot < array[left].
    if (left > right || array[left] > pivot) {
        --left;
    }
    // Now array[i] <= pivot for start <= i <= left, and array[j] > pivot for left < j <= end
    // swap pivot in its proper place in the sorted array
    array[start] = array[left];
    array[left] = pivot;
    // return pivot position
    return left;
} 
```

然后你可以在一个数组中找到第k个最小的元素

```
int findKthSmallest(int array, int k) {
    if (k < 1) throw new IllegalArgumentException("k must be positive");
    if (array.length < k) throw new IllegalArgumentException("Array too short");
    int left = 0, right = array.length-1, p;
    --k; // 0-based indices
    while(true) {
        p = partition(array, left, right);
        if (p == k) return array[p];
        if (p < k) {
            left = p+1;
            k -= left;
        } else {
            right = p-1;
        }
    }
    // dummy return, never reached
    return 0;
} 
```

# android - MainActivity 找不到 ID 为 android.R.id.list 的 ListView，但它在那里

> ID：13203092
> 
> 赞同：1
> 
> 时间：2012-11-02T21:10:02.507
> 
> 标签：android

我正在关注[**本教程**](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)。

我已经根据我的应用程序的需要对其进行了修改，例如没有**CRUD**功能和没有主菜单 - 我只想列出在应用程序启动时执行的主要活动期间的所有项目。

代码似乎没有错误，但运行它给了我：`Unfortunately, MyFirstApp has stopped`在 VM 中。

**LogCat**给了我这个：

> E/AndroidRuntime(910): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.example.myfirstproject/com.example.myfirstproject.MainActivity}: java.lang.RuntimeException: 您的内容必须有一个 id 属性为的 ListView 'android.R.id.list'

做什么？我检查了我的 .xml 布局并进行了更改，但应用程序仍然崩溃。

**MainActivity.java**

```
package com.example.myfirstproject;

//imports

public class MainActivity extends ListActivity implements OnItemClickListener {

    // Progress Dialog
    private ProgressDialog pDialog;

    // Creating JSON Parser object
    JSONParser jParser = new JSONParser();

    ArrayList<HashMap<String, String>> carsList;

    // url to get all products list
    private static String url_all_cars = "http://localhost/webservice/get_all_cars.php";

    // JSON Node names
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_CARS = "cars";
    private static final String TAG_NAME = "name";

    // products JSONArray
    JSONArray cars = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Hashmap for ListView
        carsList = new ArrayList<HashMap<String, String>>();

        // Loading products in Background Thread
        new LoadAllcars().execute();

        // Get listview
        ListView lv = getListView();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    /**
     * Background Async Task to Load all product by making HTTP Request
     * */
    class LoadAllcars extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(MainActivity.this);
            pDialog.setMessage("Loading cars. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting All products from url
         * */
        protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_all_cars, "GET", params);

            // Check your log cat for JSON reponse
            Log.d("All cars: ", json.toString());

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // products found
                    // Getting Array of Products
                    cars = json.getJSONArray(TAG_CARS);

                    // looping through All Products
                    for (int i = 0; i < cars.length(); i++) {
                        JSONObject c = cars.getJSONObject(i);

                        // Storing each json item in variable
                        String title = c.getString(TAG_NAME);

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_NAME, name);

                        // adding HashList to ArrayList
                        carsList.add(map);
                    }
                } else {
                    // no products found
                    pDialog = new ProgressDialog(MainActivity.this);
                    pDialog.setMessage("No cars found");
                    pDialog.setIndeterminate(false);
                    pDialog.setCancelable(false);
                    pDialog.show();
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data into ListView
                     * */
                    ListAdapter adapter = new SimpleAdapter(
                            MainActivity.this, carsList,
                            android.R.id.list, new String[] {TAG_NAME},
                            new int[] { R.id.title });
                    // updating listview
                    setListAdapter(adapter);
                }
            });

        }
    }
} 
```

**activity_main.xml**（带有 listview 的 mainactivity 的布局）：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/main_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1" >
    </ListView>   
</LinearLayout> 
```

**list_item.xml**（单个列表项的布局）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <!-- Name Label -->
    <TextView
        android:id="@+id/name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingTop="6dip"
        android:paddingLeft="6dip"
        android:textSize="17dip"
        android:textStyle="bold" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T21:12:40.863

看看他们如何在[此处的 ListActivity 文档中定义布局](http://developer.android.com/reference/android/app/ListActivity.html)

您的 ListView Id 是`android:id="@+id/list"`并且它需要是`android:id="@android:id/list"`

此外，您的 ListAdapter 将会崩溃

```
ListAdapter adapter = new SimpleAdapter(
                            MainActivity.this, carsList,
                            android.R.id.list, new String[] {TAG_NAME},
                            new int[] { R.id.title }); 
```

您正在告诉适配器使用 android ListView 作为项目视图。您应该为此传递您的 list_item.xml ID 并使用正确的 TextView ID（名称）

前任：

```
ListAdapter adapter = new SimpleAdapter(
                                MainActivity.this, carsList,
                                R.layout.list_item, new String[] {TAG_NAME},
                                new int[] { R.id.name}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T21:12:49.147

在你的`activity_main.xml`使用中`android:id="@android:id/list"`，而不是`android:id="@+id/list"`它应该工作。

现在您的 ListView 的 ID 是`yourapplicationpackage.R.id.list`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T21:25:49.343

`android:id="@android:id/list"`在 xml 中分配 id 时使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T21:21:22.357

请注意，ListView 的 id**必须**是根据[ListActivity 文档](http://developer.android.com/reference/android/app/ListActivity.html)`@android:id/list`引用所需的。`android.R.id.list`

相反，您的 id`@+id/list`会创建一个新的 id `com.example.myfirstproject.R.id.list`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-27T00:10:30.683

这是旧帖子，但对于其他面临同样问题的人来说，这是我的解决方案：

如果您确定，列表视图或您创建的任何其他对象的 ID 存在于布局中 - 要确保转到生成源，请检查 R.java 文件中的 ID 名称。如果它不存在，那么您没有创建任何项目。- 然后，在 Java 代码中确保 android.R 不在导入列表中。如果这样摆脱。然后手动添加你的包 R.java import com.yourpackagename.R; 现在您可以将我们的项目添加到 Java 代码中： exp: ListView lvitems = (ListView) findViewById(R.id.nameofit);

我不建议在这些情况下使用 Project>Clean，您很容易丢失生成的 R.java 文件。

# sql - 在 SQL 中，如何在更新中使用 Sum 函数

> ID：13203094
> 
> 赞同：2
> 
> 时间：2012-11-02T21:10:16.873
> 
> 标签：sql, ms-access, sum, sql-update

这是我使用的代码

```
UPDATE Customers c   
SET c.TotalP= 
   (SELECT SUM(b.Price) 
    FROM Products b
   WHERE b.CustomerID= c.CustomerID) 
```

我试图将值 x 设置为客户表中的 TotalP 字段。值 x 等于 Products 表中客户 ID 相同的对应价格的总和。

上面的代码返回一个错误`"Operation must be an Updateable query"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:16:10.300

您可以使用 Dsum：

```
UPDATE Customers   
SET TotalP = DSum("Price","Products","CustomerID = " & CustomerID) 
```

但它确实提出了一个问题，即当可以从查询中获取信息时，为什么要使用计算值更新表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-29T18:54:18.630

除了 VBA 脚本，微软还有三种方法： https: [//support.microsoft.com/en-us/kb/116142](https://support.microsoft.com/en-us/kb/116142)

以下是使用交叉连接一次更新一条记录的两条 SQL 语句：

```
UPDATE tmp SET tmp.non_null_cnt = 0;

UPDATE tmp, ESC_Results SET tmp.non_null_cnt = [tmp].[non_null_cnt]+1
WHERE ESC_Results.asset4_id Is Not Null; 
```

它会比其他方法慢，因为它必须重新计算存储的每一行的总和。

# php - php 中的 simplexml_load_file

> ID：13203095
> 
> 赞同：0
> 
> 时间：2012-11-02T21:10:19.213
> 
> 标签：php, xml, simplexml

我一直在使用 simplexml_load_file 来解析具有 15,000 条记录的 xml 文件，它工作正常，但是当我尝试处理许多文件时，每个文件都是 15,000，它给了我这个 errorPHP

```
Fatal error:  Allowed memory size of 134217728 bytes exhausted (tried to allocate 64 bytes) 
```

不知道该怎么做，以下是我正在做的示例，

```
$xml = simplexml_load_file($file)
       or die("Error: Cannot create object");

foreach($xml->children() as $events){
                foreach($events->load as $load){
                        $record = $load->loadrecord['record']."    ";
                        if ($load->loadrecord['record'] == "test"){
                                foreach($events->receiveds as $received){
                                $release = $received->received['release'];
                                }
                                foreach($events->sender as $sender){
                                $test1 = $sender['test1'];
                                $test2 = $sender['test2'];
                                $test3 = $sender['test3'];
                                $test4 = $sender['test4'];
                                }
                                foreach($events->screens as $filter){
                                $record = $filter->filter['record'];
                                }
                        }
} 
```

解析完成后是否需要释放一些东西，请注意文件很多时会出现问题，我尝试了两个文件，没有问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:38:23.727

不要对大文件使用 simplexml。使用 XML DOM 对象。

您可以使用一些高级工具，如 SAX 或 XMLReader 或其他第三方来解析数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T03:33:28.177

终于找到问题了，每次迭代后都需要取消设置，比如这里需要取消设置$xml

```
$xml = simplexml_load_file(file_name )
foreach($xml->children() as $logs){
do_stuff
unset($xml);
} 
```

我之前的情况是这样的

```
$xml = simplexml_load_file(file_name )
foreach($xml->children() as $logs){
do_stuff
}
unset($xml); 
```

没有你的指导不会真的找到它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T22:54:20.197

不幸的是，SimpleXML 类将整个 XML 文件加载到内存中。如果你给它一个大文件，这显然会给你带来问题。

相反，您需要使用 XMLReader 类。此类一次读取一个 XML 元素，并在读取后将其丢弃。这意味着您在任何时候都有最少的数据在内存中。

使用此类的一种便捷方法是将其包装在 Iterator 类中。这意味着您可以使用`foreach()`循环遍历元素，就好像它们是一次性加载的一样。

这是[XMLReader 的 Iterator 类的一个很好的示例的](http://cweiske.de/tagebuch/Importing%20huge%20XML%20files%20using%20PHP5%20-%20efficiently%20and%20conveniently.htm)链接。当我遇到这个问题时，我发现这门课很有帮助。我不得不进行一些小的调整以满足我的需要，但它在第一次时几乎奏效了。我希望它也适合你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T22:04:26.907

您可以考虑使用 cron 作业一个接一个地处理这些文件，然后将它们的输出存储在某处并在完成时检索输出。

这当然取决于您不需要立即获得结果。如果你这样做了，你可以开始这个过程并使用 AJAX 请求来检查它何时完成并获取最终输出。

显然，需求和要求可能意味着这是不可行的。提高内存限制是一种选择，但如果您在共享托管平台上，通常不会。这也只是意味着您绕过问题，而不是解决问题（即如果记录数再次增加，问题将再次出现）

编辑：误读问题，修改答案以适应。

# google-apps-script - 有没有办法在谷歌文档中添加菜单

> ID：13203098
> 
> 赞同：2
> 
> 时间：2012-11-02T21:10:44.470
> 
> 标签：google-apps-script, google-docs, google-docs-api

使用谷歌电子表格，使用谷歌应用脚​​本向界面添加按钮非常简单：

```
var ss = SpreadsheetApp.getActiveSpreadsheet();
var menuEntries = [ {name: "Say Hi", functionName: "sayHi"},
                  {name: "Get this citation", functionName: "main"} ];
ss.addMenu("Tutorial", menuEntries); 
```

谷歌文档有类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T20:50:46.487

是的，你现在可以！

它的一个新功能。

[此处的文档中](https://developers.google.com/apps-script/guides/docs#custom_menus_and_user_interfaces)对此进行了解释：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:39:54.687

这在今天是不可能的，但请在问题跟踪器上加注星标并跟踪[此问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=721)。

# java - 扩展 BufferedImage 类

> ID：13203100
> 
> 赞同：1
> 
> 时间：2012-11-02T21:10:59.413
> 
> 标签：java, casting, bufferedimage, extending

我正在扩展 BufferedImage 类，以添加一些方法，如 getRed、getBlue、getGreen 来获取像素颜色。问题是我的原始图像是 BufferedImage 对象而不是我的扩展对象。当我尝试转换为扩展数据类型时，它不起作用。对不起我的英语不好

我收到这个错误

```
Exception in thread "main" java.lang.ClassCastException: java.awt.image.BufferedImage cannot be cast to asciiart.EBufferedImage 
```

我试图从父类转换的代码

```
EBufferedImage character = (EBufferedImage)ImageClass.charToImage(letter, this.matrix_x, this.matrix_y); 
```

我的扩展课

```
public class EBufferedImage extends BufferedImage 
{
public EBufferedImage(int width, int height, int imageType)
{
    super(width,height,imageType); 
}

/**
* Returns the red component in the range 0-255 in the default sRGB
* space.
* @return the red component.
*/
public int getRed(int x, int y) {
    return (getRGB(x, y) >> 16) & 0xFF;
}

/**
* Returns the green component in the range 0-255 in the default sRGB
* space.
* @return the green component.
*/
public int getGreen(int x, int y) {
    return (getRGB(x, y) >> 8) & 0xFF;
}

/**
* Returns the blue component in the range 0-255 in the default sRGB
* space.
* @return the blue component.
*/
public int getBlue(int x, int y) {
    return (getRGB(x, y) >> 0) & 0xFF;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:21:04.463

你有几个选择：

1.  将构造函数添加到接受 a`BufferedImage`并适当设置所有内容的扩展类。

    ```
    public class ExtendedBufferedImage extends BufferedImage{

      public ExtendedBufferedImage(BufferedImage image){
          //set all the values here
      }

      //add your methods below
    } 
    ```

    这似乎是很多工作和潜在的问题。如果你忘记设置一些变量，你可能会引入一些奇怪的错误，或者丢失你需要的信息。

2.  创建一个包含 a 实例的包装类，`BufferedImage`然后将您的方法添加到其中。

    ```
    public class ExtendedBufferedImage{
      private BufferedImage image;  

      public ExtendedBufferedImage(BufferedImage image){
         this.image = image;
      }

      //add your methods below
    } 
    ```

    这很合理，也不难。`BufferedImage`公开或添加一个 getter 方法，如果需要，您可以从中获取实际内容`BufferedImage`。

3.  创建一个实用程序类，将您的方法设置为静态并`BufferedImage`作为参数传入。

    ```
    public class BufferedImageUtil{

      public static int getRed(BufferedImage image, int x, int y) {
        return (image.getRGB(x, y) >> 16) & 0xFF;
      }

      //add your other methods
    } 
    ```

    有些人不喜欢实用程序类，但我有点喜欢它们。如果您要在所有地方使用这些方法，我认为这是一个不错的选择。

就我个人而言，我会采用实用程序类路线，但如果您不喜欢那些路线，那么将其包装为选项 2 中的做法同样有效。

# java - Java 切换到调试模式，但控制台中没有显示错误

> ID：13203103
> 
> 赞同：0
> 
> 时间：2012-11-02T21:11:24.997
> 
> 标签：java, arrays, arraylist

我有一个数组列表是类类型“检查器”，它存储不同的对象（浮点数、字符串等）。

```
ArrayList<checker> VecAtoms;
checker aux=new checker();
aux.atom="C";
aux.x=0f;
aux.y=0f;
aux.z=0f;
VecAtoms.add(aux); 
```

此时 (VecAtoms.add(aux);) Java 要求切换到调试模式，但控制台中没有显示任何错误，也没有任何细节可以帮助我弄清楚发生了什么。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:12:27.400

`ArrayList<checker> VecAtoms;`指向空。

```
VecAtoms.add(aux); 
```

您正在`null`参考导致`NullPointerException`.

实例化你的arraylist，例如：

```
ArrayList<checker> VecAtoms = new ArrayList<checker>(); 
```

以及确保 aux 没有指向`null`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T21:14:57.773

*VecAtoms*可以为*null*。在对其执行任何操作之前更好地检查它是否为空

```
if(VecAtoms!=null) {
  // add it in the list
}
else{
System.out.println("VecAtom is null")
} 
```

# .net - 通过 URL 请求的 HTML 标签选择 Hello World 消息？

> ID：13203106
> 
> 赞同：1
> 
> 时间：2012-11-02T21:11:46.933
> 
> 标签：.net, vb.net, visual-studio

网址请求：

```
http://localhost:1430/Home/TheMessageView 
```

还：

```
http://localhost:1430/Home/TheMessageView/{Parameter} 
```

家是控制器。MessageView 是视图（作为 VBHTML 文件类型）。

HTML 标签及其内容：

要调用的消息保存在视图中，如下所示：

```
<h2>The Hello World Message Headline</h2>    
<p>This Hello World message in the paragraph here.</p> 
```

问题：

**重新制定：** 目的是通过选择 HTML 标记将其缩小到首选的 HelloWorld 消息。消息要在屏幕上打印的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T04:44:30.320

Your Question is little confusing but,

Try using

```
Html.Encode("MessageHtml") 
```

And try passing it to corresponding url.

# sql - 使用 case 语句有条件地设置变量

> ID：13203108
> 
> 赞同：4
> 
> 时间：2012-11-02T21:11:48.900
> 
> 标签：sql, sql-server, sql-server-2008

我有以下查询。我试图只添加值，如果值不为空，那么整个变量不会最终为空。显然，下面的这个查询出错了，但我不想在测试列上使用 ISNULL 检查，因为它在变量文本的末尾放置了一个逗号。如果变量文本末尾没有逗号，我将如何做到这一点。有时测试列中会有空值，有时则不会。

```
DECLARE @Test TABLE
(
    test varchar(20)
)

INSERT INTO @Test
SELECT 'adfasdfasd'
UNION ALL
SELECT NULL

DECLARE @DocID varchar(max)

SELECT CASE WHEN test IS NOT NULL THEN @DocID = COALESCE(@DocID + ',' ,'')  + test END
FROM @Test

SELECT @DocID 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T21:31:09.000

以下任何一项都应该有效

```
SELECT @DocID = COALESCE(@DocID + ',', '') + test
FROM   @Test
WHERE  test IS NOT NULL 
```

或者

```
SELECT @DocID = CASE
                  WHEN test IS NULL THEN @DocID /*No-op. */
                  ELSE COALESCE(@DocID + ',', '') + test
                END
FROM   @Test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T21:13:51.403

我认为应该是：

```
SELECT
    @DocID = CASE
        WHEN test IS NOT NULL
            THEN COALESCE(@DocID + ',' ,'')  + test
        ELSE NULL
    END
FROM @Test 
```

这将分配最后一行的值`test`to `@DocID`。这意味着使用此表：

```
测试
--------------------
空值
adfasdfasd
```

`@DocId`将会`adfasdfasd`

并使用此表：

```
测试
--------------------
adfasdfasd
空值
```

`@DocId`将会`NULL`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T21:34:11.180

如果您涉及其他领域，则仅需要该模式

```
SELECT @DocID = COALESCE(@DocID + ',' + test, test, @DocID),
       @otherfield ....
FROM @Test; 
```

否则，正如 Martin 评论的那样，使用 WHERE 删除 NULL 很容易

```
SELECT @DocID = COALESCE(@DocID + ',', '') + test
FROM @Test
WHERE test IS NOT NULL; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T21:23:35.747

```
DECLARE @Test TABLE
(
    test varchar(20)
)

INSERT INTO @Test
SELECT 'adfasdfasd'
UNION ALL
SELECT NULL
UNION ALL
SELECT 'Nasenbär'

DECLARE @DocID varchar(max)
Select @DocID=''
SELECT
     @DocID=@DocID + CASE
        WHEN test IS NOT NULL
            THEN Case when LEN(@DocID)>0 then ', ' else '' end + test
        ELSE ''
    END
FROM @Test

SELECT @DocID 
```

# mysql - 基于非唯一列的mysql不同查询

> ID：13203117
> 
> 赞同：0
> 
> 时间：2012-11-02T21:12:52.140
> 
> 标签：mysql

我有一个奇怪的（可能是糟糕的表格设计）查询问题，我想不出一个简单的方法来解决。

这是一个像我一样的表格布局：

```
| id                 | int(11)     | NO   | PRI | NULL    | auto_increment | 
| num                | varchar(15) | YES  | MUL | NULL    |                | 
| type               | varchar(4)  | YES  |     | NULL    |                | 
```

类型实际上是 enum("val1","val2","blah")

num 在表中可以有 3 个条目，每个条目具有 3 种不同的类型。

我需要的查询是具有“val1”和“val2”条目的不同数量的“num”的计数。

我不认为有一个简单的查询来处理这个.. 但我想出的唯一解决方案是将 val1 的不同条目转储到内存表，将 val2 的不同条目转储到内存表。

然后确定哪个表的记录数最少。然后根据较小的表编写一个子查询，在较大的表中查找数字匹配项。

上述听起来像一个糟糕的黑客虽然......

我在这里遗漏了什么......你们中的任何人都看到了更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T21:15:10.237

```
select count(*)
from `MyTable`
where `type` in ('val1', 'val2')
group by `num`
having count(distinct `type`) = 2 
```

# azure - 带有 Windows Azure 移动服务的 Monodroid

> ID：13203122
> 
> 赞同：2
> 
> 时间：2012-11-02T21:13:07.617
> 
> 标签：azure, xamarin.android, azure-mobile-services

我想将使用 Windows Azure 移动服务的身份验证添加到 MonoForAndroid 应用程序。Microsoft 有针对 Windows 8、iOS 和 Windows Phone 8 执行此操作的[代码示例。Xamarin 已](http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-users-dotnet/#add-authentication)[宣布](http://blog.xamarin.com/2012/09/20/xamarin-partners-with-microsoft-to-support-azure-mobile-services-on-android-and-ios/)对此提供支持，但我找不到任何涵盖身份验证的示例（大多数示例只是 TodoItem 数据访问，根本没有身份验证）

我是 Mono 和 Android 的新手，因此将 C# Win8 示例转换为 Mono for Android 并不像我想象的那么简单（他们甚至支持异步等待吗？）。

如果有人可以向我指出一个小代码示例（或博客文章）以将身份验证添加到适用于 android 应用程序的单声道，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T21:14:46.820

在此处查看 Xamarin Azure 移动服务演示

[https://github.com/xamarin/azure-mobile-services](https://github.com/xamarin/azure-mobile-services)

这是一个使用身份验证方法的类

[https://github.com/xamarin/azure-mobile-services/blob/master/sdk/xamarin/android/src/Microsoft.Azure.Zumo.Android/Core/MobileServiceClient.Android.cs](https://github.com/xamarin/azure-mobile-services/blob/master/sdk/xamarin/android/src/Microsoft.Azure.Zumo.Android/Core/MobileServiceClient.Android.cs)

Android 设备目前不支持身份验证。这包括使用 Monodroid 用 Ja​​va 和 C# 编写的应用程序。

当前唯一支持的移动服务功能是使用 JSON 的数据服务。

尚未针对 Android 发布 Microsoft SDK。

尽管 Azure 开发进展迅速，但应该很快就会添加此功能。

请记住，Azure 移动服务仍处于预览阶段，Windows Phone 中可用的许多功能在 Android 上尚不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T22:31:23.123

从 1.1.0 版开始，Xamarin.iOS 和 Xamarin.Android 的移动服务组件与其他平台（Windows 应用商店、WP8 等）具有完全相同的功能，包括身份验证。

请参阅[此处](http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-users-xamarin-ios/)获取教程。

# php - 使用 AFNetwork 上传图像

> ID：13203126
> 
> 赞同：0
> 
> 时间：2012-11-02T21:13:15.827
> 
> 标签：php, objective-c, upload, afnetworking

我已经使用 AFNetwork 搜索了很多有效的上传代码，但没有运气。我想出了这个代码，它是从 2 个不同的站点获得的：

```
NSData *imageData = UIImagePNGRepresentation([UIImage imageNamed:@"1.png"]);
NSURL *url = [NSURL URLWithString:@"http://localhost/project"];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
NSURLRequest *request = [httpClient multipartFormRequestWithMethod:@"POST" path:@"upload.php" parameters:nil constructingBodyWithBlock: ^(id <AFMultipartFormData> formData) {
    [formData appendPartWithFileData:imageData name:@"google" fileName:@"1.png" mimeType:@"image/png"];
}];

AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    NSLog(@"IP Address: %@", [JSON valueForKeyPath:@"origin"]);
} failure:nil];

[operation start]; 
```

但我得到的是“IP 地址：（空）”。我的 php 方面是这样的：

```
function upload(){
$uploaddir = 'uploads/';
$file = basename($_FILES['file']['name']);
$uploadfile = $uploaddir . $file;

if (move_uploaded_file($_FILES['file']['tmp_name'], $uploadfile)) {
    sendResponse(200, 'Upload Successful');
    return true;
}
sendResponse(403, 'Upload Failed');
    return false;
} 
```

我真的很感激一点帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T21:35:45.860

我几天前才做的。iPhone端的代码（它上传一个图像和另一个文本参数，项目）

```
NSString *uploadURL = @"http://www.baseurl.it/";
NSURL *url = [[NSURL alloc]initWithString:uploadURL];
AFHTTPClient *httpClient = [[AFHTTPClient alloc]initWithBaseURL:url];
NSDictionary *dict = [NSDictionary
                      dictionaryWithObjects:@[self.itemValue]
                      forKeys:@[@"item"]];
// self.itemValue is a post parameter type nsstring

NSURLRequest *request = [httpClient multipartFormRequestWithMethod:@"POST" path:@"path/to/page.php" parameters:dict constructingBodyWithBlock: ^(id <AFMultipartFormData> formData) {
// self.itemData is an NSData containing the image
    if (self.itemData)
        [formData appendPartWithFileData:self.itemData name:@"imageData" fileName:@"imageData.jpg" mimeType:@"image/png"];
}];

// sorry for the formatting here, is a long method using blocks
AFJSONRequestOperation *json = [AFJSONRequestOperation JSONRequestOperationWithRequest:request
                                                                               success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON){
                                                                                   NSLog(@"Upload Success");
                                                                               }                                                                                   
                                    failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
                                                                                   NSLog(@"Error: %@", error.description);

                                                                               }];
[json start]; 
```

在 PHP 方面：

```
// file upload
try {
$fileName = $_FILES['imageData']['name'];
$tmpName  = $_FILES['imageData']['tmp_name'];
$fileSize = $_FILES['imageData']['size'];
$fileType = $_FILES['imageData']['type'];

$fp      = fopen($tmpName, 'r');
$content = fread($fp, filesize($tmpName));
$content = addslashes($content);
fclose($fp);

if(!get_magic_quotes_gpc())
{
    $fileName = addslashes($fileName);
}

} catch (Exception $e) {
    echo json_encode("Error:".$e);
}

// $content contains your image 
```

不确定它是否没有错误，因为它取自更长的来源，所以我修改了一些代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:43:24.490

查看我对类似问题的回答。我使用这个自定义类（由我编写（用于我的所有远程 Web 服务操作。它足够灵活，可以与图像文件数据一起发送额外的 POST 参数。processFileUploadRequestWithURL 方法是您需要的方法，其他方法）你可以用也可以不用。

[所以在这里发帖](https://stackoverflow.com/questions/10618056/how-to-post-more-parameters-with-image-upload-code-in-ios/10618557#10618557)

# magento - 在 Magento 中获取所有发票

> ID：13203128
> 
> 赞同：1
> 
> 时间：2012-11-02T21:13:37.540
> 
> 标签：magento, invoice

如何获取所有发票集合？

我知道要获得所有订单是：

```
 $orders = Mage::getModel(sales/order)->getCollection(); 
```

但是，我似乎无法找到发票的等价物（它不是销售/发票）。对不起，如果这是一个愚蠢的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T21:20:46.507

您需要使用：

```
$orders = Mage::getModel("sales/order_invoice")->getCollection(); 
```

对于解释：

当您想在 magento 中访问 i block/model/resource/helper/etc 时：

*   首先，您选择正确的方法来访问它：`Mage::getModel`对于模型

*   其次，您必须告诉 magento 您要访问“哪个”模块。您可以使用参数字符串的第一部分来执行此操作：

> Mage::getModel(" **sales** /order_invoice")

此字符串引用您要访问的类型或资源的 XML 节点。在您的情况下，要访问 Mage_Sales 模块的模型：查看 Mage_Sales 的 config.xml，您将看到要使用的节点（用于模型和资源模型）：

```
[...]
<models>
    <sales><!-- <----- THIS NODE -->
        <class>Mage_Sales_Model</class>
         <resourceModel>sales_resource</resourceModel>
     </sales>
     [...] 
```

*   最后一部分，您需要添加对所需文件的完全访问权限，如果需要，可以使用文件夹。在你的情况下，在 Mage_Sales 模块的 Model 文件夹中（上面的 xml 配置告诉我们这个文件夹是`Mage_Sales_Model`），你会`Invoice.php`在`Order`文件夹中看到一个文件：然后你的路径是“order_invoice”，访问你的模型的完整命令是：

> Mage::getModel("sales/ **order_invoice** ")

# actionscript-3 - AS3 && || 操作员按指示

> ID：13203130
> 
> 赞同：3
> 
> 时间：2012-11-02T21:13:43.577
> 
> 标签：actionscript-3

操作员根据指令评估什么？

喜欢：

```
var flag:Boolean=true;
flag && trace("1") && trace("2") && trace("3"); 
```

输出：1 2 3

```
var flag:Boolean=true;
flag && trace("1") || trace("2") || trace("3"); 
```

输出 1

or 运算符在 idk 什么情况下断句...

编辑：好的，现在我看到了这句话如何与运算符一起使用，但是是否有任何没有返回值的指令被评估为真？

而且您似乎无法评估您想要的任何指令，例如：

```
private function any():void{
true && return;
} 
```

这将引发编译错误。

编辑：在这种情况下，它的行为与第二个示例不同：

```
true && one() || two() || three(); 
```

功能

```
private function one():void{
    trace("1");
}
private function two():void{
    trace("2");
}
private function three():void{
    trace("3");
} 
```

输出：1 2 3

编辑：分配值：

```
var a:int;
(a=1) || trace("1");
(a=2) && trace("2"); 
```

输出：2

编辑： `||`如果为真或可以转换为真，则返回表达式1，否则返回表达式2

`&&`“如果表达式 1 为假或可以转换为假，则返回表达式 1，否则返回表达式 2。可以转换为假的值的示例有 0、NaN、null 和未定义”。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/operators.html#logical_OR](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/operators.html#logical_OR)

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/operators.html#logical_AND](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/operators.html#logical_AND)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T21:22:06.007

这称为短路评估。基本上，当可以确定其结果时，就会停止和/或表达式评估。

例如，当评估和 (&&) 评估可以在发现第一个 false 时停止。`false && true && true && true...`始终为假，无论您在末尾添加多少真值。or 和真值也是如此。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T21:24:19.797

ActionScript 3 是 ECMAScript 变体，这意味着它基于与 JavaScript 相同的标准。

正因为如此`&&`，`||`与其他 C 风格的语言不相似。

[`a || b``a`如果为真则返回`a`，否则返回`b`。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/operators.html#logical_OR)

[`a && b``a`如果为假则返回`a`，否则返回`b`。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/operators.html#logical_AND)

这使得`||`本质上等同于`a ? a : b`，并且`&&`本质上等同于`!a ? a : b`。

它们还具有短路评估机制。如果要返回第一个参数，则不执行第二个参数。

# flash - 命中测试对象的错误 #1034

> ID：13203131
> 
> 赞同：0
> 
> 时间：2012-11-02T21:13:47.790
> 
> 标签：flash

我遇到了问题：我参加了名为“punkty”的公共课。这是脚本：

```
 package
    {
        import flash.display.MovieClip;
        public class punkty extends MovieClip
        {

            public function punkty() : void
            {
            }
        }
    } 
```

现在我创建了我的播放器，称为播放器。我想做的功能：当玩家击中类朋克时做一些思考。所以我在 Flash 文件的层中制作了脚本：

```
 addEventListener(Event.ENTER_FRAME, punkty);
    function punkty(evt:Event){
            if(player.playerex.hitTestObject(punkty)){
                    score_number = (score_number + 1)
            }
    } 
```

playerex 只是播放器移动剪辑中的框。现在我的问题开始了。Flash 显示错误 #1034 表示无法转换为 flash.display.DisplayObject。任何想法如何解决它？我很抱歉我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T19:21:30.473

在我看来，您在同一范围内有一个函数 punkty 和（认为您也有）一个对象 punkty。您不能对功能进行测试。我认为您可能关闭了严格模式，否则您会看到编译器错误。这就是为什么你应该总是把它打开——当有什么东西坏了，你会更好地理解为什么。

# vbscript - 将 Batch 命令转换为 VBScript Shell 命令

> ID：13203134
> 
> 赞同：0
> 
> 时间：2012-11-02T21:14:01.810
> 
> 标签：vbscript

当我从 Windows 批处理文件执行以下命令时...

```
"e:\cdsdk\direct.exe" -f"e:\cdsdk\MyCred.txt" < "\\MyServer\ConfigFiles\MyParams.CDConfig" > "\\MyServer\MyLog.log" 
```

它使用 MyParams.CDConfig 中指定的参数，使用 MyCred.txt 文件中指定的凭据成功执行 direct.exe 程序。它将输出记录到文件 MyLog.log。

但是，当我运行下面的 VB 脚本时，我收到了消息

发生以下错误：

```
While processing the command line, 'M' was encountered, but a '/' or a '-' was expected. 
```

我必须做什么才能让相同的命令在 VBScript 中工作？

```
SET oFS = CreateObject("Scripting.FileSystemObject")
SET sout = oFS.GetStandardStream(1)
sout.WriteLine("Message to Console: Start")

Dim CDCmd 
Dim Quote 
Quote = CHR(34)
CredFile = "e:\cdsdk\MyCred.txt"
ConfigFile = "\\MyServer\ConfigFiles\MyParams.CDConfig"
CdLogFile = "\\MyServer\MyLog.log"

CDCmd = Quote & "e:\cdsdk\direct.exe" & Quote & " -f" & Quote & CredFile & Quote & " < " & Quote & ConfigFile & Quote & " > " & Quote & CdLogFile & Quote
sout.WriteLine("Message to Console: CDCmd=" & CDCmd)

Set objShell = WScript.CreateObject("WScript.Shell")
Dim ReturnValue
ReturnValue = -1
ReturnValue = objShell.Run (CDCmd, 3, true)
sout.WriteLine("Return Value=" & ReturnValue)

sout.WriteLine("Message to Console: End")

WScript.Quit ReturnValue 
```

当我比较写入控制台的 CDCmd 的值时，它看起来与在批处理文件中执行的批处理命令相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:25:34.400

当你想使用像 > 这样的 shell 功能时，你必须通过`%comspec% /c`（或 /k 进行调试）来执行你的命令。如果这没有帮助，则必须使命令的构建变得理智。

**附言**

WScript.Shell.Run/.Exec 启动一个进程（不是 shell）；要获得 shell 功能（如重定向或内置），您必须启动一个 shell - 例如 cmd.exe - 并让它运行您需要的程序。%comspec% 是指向您的 shell 的系统环境变量：

```
echo %comspec%
C:\WINDOWS\system32\cmd.exe 
```

# c++ - 执行时间长的 C 程序示例

> ID：13203139
> 
> 赞同：-5
> 
> 时间：2012-11-02T21:14:37.663
> 
> 标签：c++, c, execution-time

除了通常的排序和递归之外，请向我推荐一些执行时间长的 C 程序示例。我想分析代码的执行时间，并想使用一些执行时间相当长的程序，而不仅仅是毫秒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:21:38.407

实现一个 NP 类算法，例如因数分解。无论如何，这里列出了很多想法： [http ://en.wikipedia.org/wiki/List_of_NP-complete_problems](http://en.wikipedia.org/wiki/List_of_NP-complete_problems)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T21:24:20.437

实施来自[http://projecteuler.net/](http://projecteuler.net/)的任何问题。其中相当多的，尤其是在简单实现的情况下，可能是计算密集型的。

# jsf-2 - 有没有办法在高级模式和自动模式下隐藏 Primefaces 文件上传进度条和按钮？

> ID：13203145
> 
> 赞同：8
> 
> 时间：2012-11-02T21:15:14.990
> 
> 标签：jsf-2, primefaces

有没有办法在高级模式和自动模式下隐藏 Primefaces 文件上传进度条和按钮？

这是我正在使用的代码：

```
<p:fileUpload id="scriptUpload" 
                        widgetVar="importDevicesWidget" 
                        fileUploadListener="#{scriptUploadBean.handleFileUpload}"
                        auto="true"
                        label="Choose.."
                        mode="advanced" 
                        update=":infoMessages"
                        sizeLimit="8192" 
                        allowTypes="/(\.|\/)(txt)$/"
                        onstart="clearInvalidFileMsg();$('#progress').show();"
                        oncomplete="clearInvalidFileMsg();$('#progress').hide();importDevicesDialogWidget.hide()"/> 
```

问题是每个文件的进度条旁边出现的按钮没有意义，因为模式是自动的，所以上传已经开始了！

这是一个屏幕截图：

![在此处输入图像描述](../Images/5c7c788a5f3c6bf2e767ee35c10b5a25.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-03T10:58:12.677

根据 3.4 文档`.ui-fileupload .start`，`.ui-fileupload .cancel`并`.ui-fileupload .progress`选择您的文件上传的开始、取消和进度条：

```
<style type="text/css">
    .ui-fileupload .start {
        display: none;
    }
    .ui-fileupload .cancel {
        display: none;
    }
    .ui-fileupload .progress {
        display: none;
    }
</style> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-06T16:10:25.080

对于**PrimeFaces 5**，这可能是一个解决方案（使用它 atm）

```
.fileupload-simple > .ui-fileupload-content {
    display: none;
}
.fileupload-simple > .ui-fileupload-buttonbar {
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    border-radius: 4px;
} 
```

然后`fileupload-simple`在你的组件中使用类，`fileUpload`你很高兴:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-01T11:06:13.643

为我工作。Primefaces 6.0.1

```
 <style type="text/css">
    .ui-fileupload-content .ui-progressbar {
    width: 0px;
    height: 0px;
    margin: 0
    }
    </style> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T21:30:13.247

好吧，当我可以回答自己的问题时，我喜欢它：

这是更新的代码：

```
<p:dialog appendToBody="true" id="importDevices" widgetVar="importDevicesDialogWidget" header="Import Devices" resizable="false" modal="true" onShow="centerDialog('#importDevicesDialog');">
            <h:form id="importDevicesForm" enctype="multipart/form-data">
                <h:panelGrid columns="1" cellpadding="5">
                    <p:fileUpload id="scriptUpload" 
                        widgetVar="importDevicesWidget" 
                        fileUploadListener="#{scriptUploadBean.handleFileUpload}"
                        auto="true"
                        label="Choose.."
                        mode="advanced" 
                        update=":infoMessages"
                        sizeLimit="8192" 
                        allowTypes="/(\.|\/)(txt)$/"
                        onstart="clearInvalidFileMsg();$('#progress').show();"
                        oncomplete="clearInvalidFileMsg();$('#progress').hide();importDevicesDialogWidget.hide()"/> 
                    <p:spacer height="10px;"/>
                    <p:commandButton value="Cancel" action="javascript.void(0);" onclick="clearInvalidFileMsg();importDevicesDialogWidget.hide();"/>
                </h:panelGrid>
             </h:form>
        </p:dialog> 
```

这是隐藏进度条和按钮并清除错误的更新功能：

```
function clearInvalidFileMsg(){
                if ($("#importDevicesForm").is(':visible')){
                    importDevicesWidget.uploadContent.find("tr.ui-state-error").remove();
                    importDevicesWidget.uploadContent.find("td.progress").remove();
                    importDevicesWidget.uploadContent.find("td.start").remove();
                    importDevicesWidget.uploadContent.find("td.cancel").remove();                        
                }
            } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-12-18T14:31:13.087

在 fileUpload 标记中使用 showButtons="false"。

例如：

```
 <p:fileUpload	id="fileUpload" mode="advanced"	dragDropSupport="false"	update="@form" sizeLimit="100000" 	fileLimit="3" allowTypes="/(\.|\/)(xlsx|xls)$/"	 multiple="false" label="Select File" showButtons="false"/>
```

# ios - 在 iOS 上打开与 Icecast 服务器的套接字连接

> ID：13203154
> 
> 赞同：1
> 
> 时间：2012-11-02T21:16:08.567
> 
> 标签：ios, sockets, streaming, websocket, icecast

我正在尝试为 iOS 上的 Icecast 服务器创建源客户端。

我相信我理解这里的协议[Icecast 2: protocol description, streaming to it using C#](https://stackoverflow.com/questions/5215019/icecast-2-protocol-description-streaming-to-it-using-c-sharp/9985297#9985297)

但是，我无法创建与服务器的套接字连接。假设服务器在[http://myicecastserver.com](http://myicecastserver.com)的 8000 端口上运行。我设置了一个名为 stream 的挂载点，它在将 ezstream 用作输入时工作。我应该如何从 iOS 打开连接？

我已经像这样使用了 AsyncSocket 库：

```
[socket connectToHost:@"http://myicecastserver.com" onPort:8000 error:&err]; 
```

像这样：

```
[socket connectToHost:@"http://myicecastserver.com/stream" onPort:8000 error:&err]; 
```

无济于事。

我也尝试使用与 SocketRocket 的 websocket 连接也无济于事：

```
SRWebSocket *socket = [[SRWebSocket alloc] initWithURL:[NSURL URLWithString:@"http://myicecastserver.com:8000/stream"]];
[socket setDelegate:self];
[socket open]; 
```

这给了我一个 404 错误

我对此进行了一些尝试，但无法打开此连接以挽救我的生命！谢谢！

更新

我正在使用 SocketTest 作为测试源客户端，并且能够在端口 8000 上连接到[http://myicecastserver.com](http://myicecastserver.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:58:32.797

我的解决方案如下：

我正在使用这样的 AsyncSocket 库：

```
[socket connectToHost:@"myicecastserver.com" onPort:8000 error:&err]; 
```

诀窍是删除“http://”（是的，我就是这么傻）然后在连接时我可以发送正确的标题。

# google-apps-script - 如何在 Google 电子表格中存储时间驱动触发器激活的时间和日期

> ID：13203157
> 
> 赞同：0
> 
> 时间：2012-11-02T21:16:35.293
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api

我试图做的是存储通过从 url 导入动态数据创建的静态值，然后将这些值与相同动态数据值的新样本集（以 5 分钟间隔采样）进行比较。然后比较两个样本组的静态值并突出显示第二个样本集中的任何变化。

我想根据可安装的时间驱动触发器运行脚本的时间为每个示例设置自己的时间戳。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T01:18:44.167

`new Date()`脚本启动时立即使用。

# ruby-on-rails - Rails：has_one 和 belongs_to 对两个外键进行存在验证

> ID：13203159
> 
> 赞同：10
> 
> 时间：2012-11-02T21:16:53.980
> 
> 标签：ruby-on-rails, associations, belongs-to, has-one

我有一个带有`users`表格和`user_profiles`表格的应用程序。一个用户`has_one`用户配置文件和一个用户配置文件`belongs_to`一个用户。

我想确保关联场景始终为真，因此我对两个外键的存在进行了验证。问题是我遇到了“鸡和蛋”的情况。当我创建用户时，它不起作用，因为用户配置文件还不存在，当我创建用户配置文件时，它也不起作用，因为用户还不存在。所以我需要在创建用户的过程中创建用户配置文件。更复杂的是，当我创建客户端时，我还在`after_create`回调中创建了一个用户。说够了（或读/写），这里有一些代码：

```
class User < ActiveRecord::Base
    has_one :user_profile
    validates :user_profile_id, presence: true
end

class UserProfile < ActiveRecord::Base
  belongs_to :user
  validates :user_id, presence: true
end

class Client < ActiveRecord::Base
  after_create :create_client_user

  private

  def create_client_user
    User.create!(
      email: "admin@example.com",
      password: "admin",
      password_confirmation: "admin",
      client_id: self.id
      # I need to create a user profile dynamically here
    )
  end
end 
```

有可能做我想做的事吗？

## 更新

我尝试了@cdesrosiers 建议的解决方案，但我的规格无法通过。我主要有三个错误。首先让我向您展示更新的模型：

```
class User < ActiveRecord::Base
  has_one :user_profile, inverse_of: :user
  before_create { build_user_profile }

  validates :user_profile, presence: true

  def client=(client)
    self.client_id = client.id
  end

  def client
    current_database = Apartment::Database.current_database
    Apartment::Database.switch
    client = Client.find(self.client_id)
    Apartment::Database.switch(current_database)
    client
  end
end

class UserProfile < ActiveRecord::Base
  belongs_to :user

  validates :user, presence: true
end

class Client < ActiveRecord::Base
  attr_accessible :domain, :name

  after_create :create_client_database
  after_create :create_client_user
  after_destroy :drop_client_database

  # Create the client database (Apartment) for multi-tenancy
  def create_client_database
    Apartment::Database.create(self.domain)
  end

  # Create an admin user for the client
  def create_client_user
    Apartment::Database.switch(self.domain)

    User.create!(
      email: "admin@example.com",
      password: "admin",
      password_confirmation: "admin",
      client: self
    )

    # Switch back to the public schema
    Apartment::Database.switch
  end

  def drop_client_database
    Apartment::Database.drop(self.domain)
  end
end 
```

我正在使用 FactoryGirl 创建工厂，这是我的工厂文件：

```
FactoryGirl.define do
  factory :client do
    sequence(:domain) { |n| "client#{n}" }
    name              Faker::Company.name
  end

  factory :user do
    sequence(:email)      { |n| "user#{n}@example.com"}
    password              "password"
    password_confirmation "password"
    client
    #user_profile
  end

  factory :credentials, class: User do
    email       "user@example.com"
    password    "password"
  end

  factory :user_profile do
    forename       Faker::Name.first_name
    surname        Faker::Name.last_name
    birthday       (5..90).to_a.sample.years.ago
    #user
  end
end 
```

如果我分别取消注释用户和用户配置文件工厂中的`user_profile`和关联，我会得到一个.`user``WARNING: out of shared memory`

现在，当我创建其中一个工厂时，我得到了以下三个错误之一：

```
Failure/Error: @user = create(:user)
     ActiveRecord::RecordInvalid:
       Validation failed: User profile A user profile is required
     # ./app/models/client.rb:41:in `create_client_user'
     # ./spec/controllers/users_controller_spec.rb:150:in `block (4 levels) in <top (required)>'

Failure/Error: create(:user_profile).should respond_to :surname
    ActiveRecord::RecordInvalid:
      Validation failed: User A user is required
    # ./spec/models/user_profile_spec.rb:29:in `block (4 levels) in <top (required)>'

Failure/Error: let(:client) { create(:client) }
     ActiveRecord::RecordInvalid:
       Validation failed: User profile A user profile is required
     # ./app/models/client.rb:41:in `create_client_user'
     # ./spec/controllers/sessions_controller_spec.rb:4:in `block (2 levels) in <top (required)>'
     # ./spec/controllers/sessions_controller_spec.rb:7:in `block (2 levels) in <top (required)>' 
```

所以我假设 User 模型中的更改不起作用。另请注意，我`user_profile_id`从 users 表中删除了 。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T22:10:21.460

当模型 A`has_one`模型 B 时，这意味着 B 将外键存储到 A 中，就像模型 C`has_many`模型 D 意味着 D 将外键存储到 C 中一样。这种`has_one`关系只是表示您希望只允许 B 中的一条记录在 A 中保存一个特定的外键。鉴于此，您应该`user_profile_id`从`users`架构中删除，因为它没有被使用。仅使用`user_id`from `UserProfile`。

您仍然可以`User`检查 是否存在`UserProfile`，但请`validates_presence_of :user_profile`改用。这将检查用户对象是否具有关联的 user_profile 对象。

您的`UserProfile`对象不应直接检查 a，`user_id`因为在创建新的 user-user_profile 对时此 id 尚不存在。而是使用`validates_presence_of :user`，它将在保存之前检查`UserProfile`是否有关联的对象。`User`然后写`has_one :user_profile, :inverse_of => :user`in `User`，这让`UserProfile`知道其`User`对象的存在，甚至在其中任何一个被持久化并分配一个 id 之前。

最后，您可以在创建新用户时包含一个`before_create`块`User`来构建关联。`UserProfile`（我相信）它会在构建新的 user_profile 后运行验证，所以这些应该通过。

总之，

```
class User < ActiveRecord::Base
    has_one :user_profile, :inverse_of => :user
    validates_presence_of :user_profile

    before_create { build_user_profile }
end

class UserProfile < ActiveRecord::Base
  belongs_to :user
  validates_presence_of :user
end 
```

* * *

## 更新

我对验证回调顺序有误。验证在`before_create`调用回调之前运行，这意味着在构建之前`User`检查是否存在。`UserProfile`

一种解决方案是问问自己从拥有单独的 user 和 user_profile 模型中获得了什么价值。考虑到它们是如此紧密地绑定在一起，以至于没有另一个就不能存在，将它们组合成一个模型是否有意义（并且可能会简化很多代码）？

另一方面，如果您真的发现拥有两个独立模型的价值，也许您不应该使用验证来维持它们的相互存在。在我看来，模型验证*通常*应该用于让用户知道他们提交的数据存在需要修复的错误。`user_profile`但是，他们的对象中缺少 a`user`并不是*他们*可以解决的。因此，也许更好的解决方案是让`user`对象构建一个`user_profile`，如果没有的话。与其抱怨 a`user_profile`不存在，不如更进一步，构建它。两边都不需要验证。

```
class User < ActiveRecord::Base
  has_one :user_profile

  before_save { build_user_profile unless user_profile }
end

class UserProfile < ActiveRecord::Base
  belongs_to :user
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:33:18.217

这个 rail cast 遍历了嵌套表单（一起创建 user/user_profile）。[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)你需要做一些修改，因为它涵盖了 has_many 但你应该能够弄清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T21:34:19.310

您在这里遇到了嵌套问题。可以通过将 user_profile 的表单字段嵌套在用户表单上并同时创建两者来解决。

```
class User
  accepts_nested_attributes_for :user_profile
  attr_accesible :user_profile_attributes
  validates_presence_of :user_profile_attributes

#user/new.haml
form_for @user do |f|
  fields_for @user.user_profile do |fields|
    fields.label "Etc"
    #...... 
```

[http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T21:32:29.623

您无法验证 user_profile_id 是否存在，因为它不存在。has_one 的意思是另一个模型有一个外键引用。

我通常确保您所追求的行为的方式是在创建被引用的模型时有条件地使用外键引用创建模型。在您的情况下，将为用户创建个人资料`after_create`，如下所示：

```
class User < ActiveRecord::Base
  ...
  after_create :create_profile
  private
  def create_profile
    self.user_profile.create
  end
end 
```

# javascript - 使用 JQuery 向下滑动到内部链接目标？

> ID：13203160
> 
> 赞同：0
> 
> 时间：2012-11-02T21:17:04.670
> 
> 标签：javascript, jquery

所以我的网站上有一些内部链接，而且我是 JQuery 的新手。我想知道这是否有一种方法可以让用户单击内部锚定链接文本并使页面顺利“向下滑动”到内部链接目标？

```
 <li>apples</li>
    <li><a href="#benefits">Benefits of Joining</a></li>
    <li>peaches</li>
    ...

    ...

    ...

    ...

    ...

    <a name="benefits">Users of this site get the best benefits</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T21:25:20.750

尝试这样的事情：

```
$('a').click(function() {
    $('html, body').animate({
        scrollTop: $('[name="' + $(this).attr('href').substr(1) + '"]').offset().top
    }, 1000);
    return false;
});​ 
```

参见小提琴例如：http: [//jsfiddle.net/EdmxK/](http://jsfiddle.net/EdmxK/)

如果你喜欢的话，你可能会在网上找到一些 jQuery 滚动插件。

# java - Java：在散列函数溢出方面需要帮助

> ID：13203164
> 
> 赞同：1
> 
> 时间：2012-11-02T21:17:39.287
> 
> 标签：java, hash, hashtable, integer-hashing

我正在处理一项任务，我必须将 10,000 个数字散列到负载大小为 0.1、.2 .3 .... 到 0.9 的散列表中。我的问题是我的散列函数给了我一些溢出或类似的东西。如果我对负载因子为 0.5 的表（如 36077(mod)20,000）进行哈希处理，它会给我 16070 作为键。这只发生在高于负载因子的数字上。这是我的散列函数的代码。

```
 public int linearHash(int in){
    int hashKey = in%hashTableArray.length;
    while(this.hashTableArray[hashKey] != 0){
        hashKey += 1;
    }
    return hashKey;
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:59:52.213

Reimeus指出OutOfBound问题并给出了解决方案。我只是想补充一些关于你处理碰撞的方式。

您的功能看起来像**开放寻址**方法。而不是`hashKey += 1;`也许你可以考虑增加`in`

```
 public int linearHash(int in){   
    int hashKey = in%hashTableArray.length;
    while(this.hashTableArray[hashKey] != 0){
        in ++;
        hashKey = in%hashTableArray.length;
    }
    return hashKey;
} 
```

上面的示例代码没有检查哈希表溢出。自动增量不应发生`hashTableArray.length`多次。否则你的程序会陷入死循环

请注意，通过检查来决定插槽是否空闲`hashTableArray[hashKey] != 0`是不安全的。例如，你的元素中是否有数字`0`和`20000`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:23:42.650

您没有检查是否超出了循环`hashTableArray`中的索引范围。`while`你可以这样做：

```
while (hashKey < hashTableArray.length && this.hashTableArray[hashKey] != 0){ 
```

# ruby-on-rails-3 - 使用 Knockout.js 选择字段

> ID：13203167
> 
> 赞同：0
> 
> 时间：2012-11-02T21:17:56.027
> 
> 标签：ruby-on-rails-3, jquery-ui, select, knockout.js, datepicker

当我包含 knockout.js 库时，我的所有选择字段都会消失。有没有办法让选择字段忽略 knockout.js？

它不仅影响我的下拉菜单，还影响日期选择器......即我有以下代码：

```
 <center>
      <%= f.text_field :firstdate, :style=>"width:150px;" %> 
      - 
      <%= f.text_field :seconddate, :style=>"width:150px;" %>
      <script>
      $(function() {
            $( "#post_firstdate" ).datepicker({
                  changeMonth: true,
                  changeYear: true,
                  yearRange: "-112:+5"
            });
            $( "#post_seconddate" ).datepicker({
                  changeMonth: true,
                  changeYear: true,
                  yearRange: "-112:+5"
            });
      });
      </script>
    </center> 
```

虽然我可以在数据选择器中选择日期，但通常月份和年份字段也是下拉菜单。现在他们消失了。

关于如何让某些字段忽略淘汰赛有什么建议吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:21:55.573

没关系，找到答案...只需从 dropout.css 中删除它这样只有您希望 dropkick 更改的字段才会受到影响。

```
.dk_fouc select {
  position: relative;
  top: -99999em;
  visibility: hidden;
} 
```

# ios - 在 iOS 中使用核心数据时如何为分段表视图构建sections 数组？

> ID：13203168
> 
> 赞同：0
> 
> 时间：2012-11-02T21:18:05.557
> 
> 标签：ios, uitableview, core-data

当您想做一个分段的表格视图（使用核心数据）时，您必须以某种方式为部分标题提供相应的文本；做到这一点的一种方法是拥有一个包含可以由节索引索引的字符串的数组。

我见过很多场景，构建这样的数组是相当简单的，有时甚至是直截了当的。

但是，如果您想要/需要分成部分的是您的实体实例对象集并且标题包含连接多个属性的值，我还没有找到一种 [有效] 方法来构建字符串的“部分”数组你的对象。

通常，您会将实体对象放在另一个数组中，该数组是同一表格视图的数据源。而且我已经按照我想要的部分的特定标准对该数组进行了排序/分组。

当您的部分与实例中只有一个属性的值一样简单时，您可以简单地过滤对象数组并获取一个属性的所有不同值并使用部分数组中的那些值，您就完成了。

当每个实例对象中的多个属性需要用作节的文本时，通常如何创建节数组。您是否连接了您有兴趣成为节标题一部分的那些值？这就是我正在做的事情，然后过滤包含该连接字符串的数组，但想知道这是否正确，或者是否有另一种“更好”的方式来创建这些部分。

例如，现在我在实例中连接 3 个属性：日期、标题和名称（11/02/2012 GROCERIES Frute）。由于我的实例对象按日期、标题、名称排序，因此某些对象属于同一部分，而其他对象属于另一个部分，依此类推。section 数组应该只有不同的连接字符串，因此我对其进行过滤以消除重复项，最终得到 section 数组。

不过，我觉得应该有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:35:35.820

当我在一个不可排序的值或结果上构建一个节数组时，或者连接多个值时，我总是创建一个自定义排序值作为第一个排序描述符传递给`NSFetchedResultsController`.

为了得到 Core Data 生成的正确的“GROUP BY”-SQL 语法，你需要在 SectionNameKeyPath 和第一个 sortdescriptor 中具有相同的属性。

从那里，我覆盖 ,`– controller:sectionIndexTitleForSectionName:`中的方法`NSFetchedResultsControllerDelegate`，并连接或返回给定部分的部分标题：

```
- (NSString*) tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{  
  id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:section];
  NSArray *articles = [sectionInfo objects];
  if ([articles count] > 0)
  {
    Article *article = [articles objectAtIndex:0];
    return article.section;
  }
  return [sectionInfo name];
} 
```

# mysql - rspec mysql vs rails控制器中的大小写敏感性

> ID：13203169
> 
> 赞同：1
> 
> 时间：2012-11-02T21:18:06.947
> 
> 标签：mysql, ruby-on-rails, rspec, case-sensitive

我对过滤姓氏的索引进行了测试，测试通过了：

```
it "finds transactions with a given customer last_name" do
  customer = create :customer, last_name: "Merp"
  t2 = create :transaction, location_id: @location.id
  t1 = create :transaction, location_id: @location.id, customer_id: customer.id
  get :index, last_name: "merp"
  assigns(:transactions).should eq [t1]
end 
```

这是该问题控制器的重要部分：

```
# => @filter = {:customers=>{:last_name=>"merp"}}
# => @joins = [:customer]
@transactions = Transaction
  .joins(@joins)
  .where(@filter) 
```

但是当我在开发环境中手动进行测试时，它只返回区分大小写的匹配（注意测试不是大小写匹配）。

为什么我在实际使用页面时使用不区分大小写的搜索通过了测试，而在不区分大小写的搜索中操作失败？

# jquery - jQuery 验证插件本地化自定义消息

> ID：13203170
> 
> 赞同：2
> 
> 时间：2012-11-02T21:18:10.237
> 
> 标签：jquery, validation, localization

我正在为我的注册表单使用 jquery 验证插件。此表格必须有多种语言版本。我在这里找到了如何本地化默认消息的答案： [JQuery Validation Internationalization Problem](https://stackoverflow.com/questions/7091206/jquery-validation-internationalization-problem)

但我无法本地化我的自定义消息。

我的验证代码如下：

```
registrationForm.validate({
        onkeyup: false,
        errorClass: 'error',
        validClass: 'valid',
        rules: {
            name: { required: true, minlength: 3 },
            email: { required: true, email: true },
            password: { password: "#name" },
            password_confirm: { required: true, equalTo: "#password" }
        },
        messages: {
            password_confirm: {
                required: "Repeat your password",
                minlength: jQuery.format("Enter at least {0} characters"),
                equalTo: "Enter the same password as above"
            }
        }
}) 
```

问题在于 password_confirm.required 消息。

我试过这个：

```
jQuery.extend(jQuery.validator.messages, {
    required: "Dit is een verplicht veld.",
    remote: "Controleer dit veld.",
    email: "Vul hier een geldig e-mailadres in.",
    url: "Vul hier een geldige URL in.",
    date: "Vul hier een geldige datum in.",
    dateISO: "Vul hier een geldige datum in (ISO-formaat).",
    number: "Vul hier een geldig getal in.",
    digits: "Vul hier alleen getallen in.",
    creditcard: "Vul hier een geldig creditcardnummer in.",
    equalTo: "Vul hier dezelfde waarde in.",
    accept: "Vul hier een waarde in met een geldige extensie.",
    maxlength: jQuery.format("Vul hier maximaal {0} tekens in."),
    minlength: jQuery.format("Vul hier minimaal {0} tekens in."),
    rangelength: jQuery.format("Vul hier een waarde in van minimaal {0} en maximaal {1} tekens."),
    range: jQuery.format("Vul hier een waarde in van minimaal {0} en maximaal {1}."),
    max: jQuery.format("Vul hier een waarde in kleiner dan of gelijk aan {0}."),
    min: jQuery.format("Vul hier een waarde in groter dan of gelijk aan {0}."),
    password_confirm: {
                            required: "Herhaal uw wachtwoord",
                            minlength:jQuery.format("Vul hier maximaal {0} tekens in."),
                            equalTo: "Vul hier hetzelfde wachtwoord als hierboven in."
                    }
    }
}); 
```

但无济于事。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:11:23.017

所以我终于想出了如何做到这一点。解决方案（或至少我的解决方案）是对验证插件使用添加规则方法。首先添加所有默认消息，然后使用国际化插件加载具有自定义国际化消息的文件。

相关代码块，

索引.php：

```
...
<script type="text/javascript" src="script.js"></script>
<script type="text/javascript">$.localise('validation/messages', {language: "<?=$language?>"});</script>
... 
```

脚本.js：

```
$(document).ready(function() {
    var registrationForm = $('form:first');
    registrationForm.validate({
        onkeyup: false,
        errorClass: 'error',
        validClass: 'valid',
        rules: {
            name: { required: true, minlength: 3 },
            email: { required: true, email: true },
            password: { password: "#name" },
        }
     });

    addCustomMessages();
}); 
```

消息-en-US.js：

```
function addCustomMessages()
{
   $("#password_confirm").rules("add", {
    required: true,
    equalTo: "#password",
    messages: {
        required: "Repeat your password",
        minlength: jQuery.format("Enter at least {0} characters"),
        equalTo: "Enter the same password as above"
    }
   });
} 
```

消息-nl-NL.js：

```
jQuery.extend(jQuery.validator.messages, {
    required: "Dit is een verplicht veld.",
    remote: "Controleer dit veld.",
    email: "Vul hier een geldig e-mailadres in.",
    url: "Vul hier een geldige URL in.",
    date: "Vul hier een geldige datum in.",
    dateISO: "Vul hier een geldige datum in (ISO-formaat).",
    number: "Vul hier een geldig getal in.",
    digits: "Vul hier alleen getallen in.",
    creditcard: "Vul hier een geldig creditcardnummer in.",
    equalTo: "Vul hier dezelfde waarde in.",
    accept: "Vul hier een waarde in met een geldige extensie.",
    maxlength: jQuery.format("Vul hier maximaal {0} tekens in."),
    minlength: jQuery.format("Vul hier minimaal {0} tekens in."),
    rangelength: jQuery.format("Vul hier een waarde in van minimaal {0} en maximaal {1} tekens."),
    range: jQuery.format("Vul hier een waarde in van minimaal {0} en maximaal {1}."),
    max: jQuery.format("Vul hier een waarde in kleiner dan of gelijk aan {0}."),
    min: jQuery.format("Vul hier een waarde in groter dan of gelijk aan {0}.")
});

jQuery.extend(jQuery.validator.passwordRating.messages, {
    "similar-to-username": "Lijkt te veel op naam",
    "too-short": "Te kort",
    "very-weak": "Erg zwak",
    "weak": "Zwak",
    "good": "Goed",
    "strong": "Sterk"
});

function addCustomMessages()
{
   $("#password_confirm").rules("add", {
    required: true,
    equalTo: "#password",
    messages: {
        required: "Herhaal uw wachtwoord",
        minlength: jQuery.format("Enter at least {0} characters"),
        equalTo: "Enter the same password as above"
    }
    });
} 
```

# ruby-on-rails - Rails / Paperclip - 跳过图像处理

> ID：13203171
> 
> 赞同：3
> 
> 时间：2012-11-02T21:18:10.173
> 
> 标签：ruby-on-rails, paperclip

如何跳过基于虚拟属性的后期处理？

在 before_asset_post_process 回调中，我的虚拟属性始终为零

创造

```
attachment = Attachment.create(asset: File.open(file.png), :skip_thumb => 1) 
```

可连接模型

```
class Attachment < AR::Base
 attr_accessor :skip_thumb

  has_attached_file :asset, :styles => lambda  { |attachment| { :thumb =>  ["100>", 'jpg'] ,
                                                                       :thumb_big =>   ["200>", 'jpg']
                                                                     }
  before_asset_post_process :proceed_or_cancel

  def proceed_or_cancel
    #self.skip_thumb is always nil
    if (self.skip_thumb.present?)
      return false 
    end
  end 

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-06T22:21:36.783

的分配`:asset`将在分配之前发生，`:skip_thumb`如果它是您传递给的哈希中的第一个`Attachment.create()`。因此，如果您将代码更改为：

```
attachment = Attachment.create(skip_thumb: 1, asset: File.open(file.png)) 
```

我希望这还不算太晚...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:22:47.460

你`attr_accessible`在你的`Attachment`模型中使用吗？如果是这样，并且如果它不包括`skip_thumb`，当您尝试通过批量分配分配它时，它会失败（默默地）。

与它相反的`attr_accessible`是`attr_protected`，如果你`skip_thumb`在其中，请将其删除。

# javascript - 显示数组元素

> ID：13203184
> 
> 赞同：0
> 
> 时间：2012-11-02T21:19:18.520
> 
> 标签：javascript, jquery

我正在创建一个 JavaScript 数组是以下方式：

```
var selectedColors= { 'Orange' : $("#Orange").val(),
                         'Light Blue' : $("#LightBlue").val(),
                         'Dark Red' : $("#DarkRed").val(),
                         'Dark Blue' : $("#DarkBlue").val()}; 
```

然后循环遍历每个项目，看看哪个颜色没有被选中，然后将它们存储在另一个数组中：

```
var colorsNotSelected = [];
$.each(selectedColors, function (key, value) {
    if (value.length == 0)
        colorsNotSelected.push({key:key});
}); 
```

在这里，我想显示未选择的颜色，但按以下方式显示键：0,1,2,3 而不是橙色，浅蓝色，深红色，深蓝色。

我在这里做错了什么？

```
if (colorsNotSelected.length > 0)
    $.each(colorsNotSelected, function (key) { alert(key) });
    return false; 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:24:44.180

对象和数组将在 jQuery 中进行相同的迭代。看来您需要使用大括号来检查该 return false 语句：

```
if (colorsNotSelected.length > 0) {
    $.each(colorsNotSelected, function (key) { alert(key) });
    return false;
} 
```

这是不必要的：

```
colorsNotSelected.push({key:key}); 
```

只需这样做：

```
colorsNotSelected.push(key); 
```

这也假设在您的示例代码上方的某个地方您有这个：

```
var colorsNotSelected = []; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:27:52.240

您可能想尝试使用 for / in 循环：

```
for(var i in colorsNotSelected){
   alert(i);
} 
```

# xml - 为什么 XSLT 中的属性不需要名称空间声明

> ID：13203187
> 
> 赞同：5
> 
> 时间：2012-11-02T21:19:36.630
> 
> 标签：xml, xslt, xpath

为什么我不必为 XSLT 中的节点属性指定名称空间？

例如，假设我有一个如下所示的 XML：

```
<?xml version="1.0"?>
<timeline xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
    xmlns="urn:xmlsn:axpz_namespace">

<A>
   <B>
    <C key="in"> bval <\C>
    <C ind="ra"> bra <\C>
   </B>
<\A> 
```

我的xsl文件头是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:mms="urn:xmlsn:axpz_namespace"> 
```

C 的属性的 select 语句如下所示：

```
select="./mms:B/mms:C[@key='in']"/>
select="./mms:B/mms:C[@ind='ra']"/> 
```

但似乎如果您必须指定它`B`并且`C`是 mms 命名空间的一部分，那么您应该必须指定它`key`并且`ind`也是该命名空间的一部分。IE

```
select="./mms:B/mms:C[@mms:key='in']"/>
select="./mms:B/mms:C[@mms:ind='ra']"/> 
```

虽然很明显，如果您指定要在其中的节点命名空间，`mms`那么它的属性也应该在其中，但如果您指定在命名空间内，那么它似乎也`B`应该`mms`在`C`其中。

这可能是一个微不足道的问题，并且可能仅取决于所使用的 XSL 阅读器，但我之所以这么问，是因为它让我很好奇您是否可以在各种节点上混合命名空间。例如，类似：

```
select="./mms:B/othernamespace:C[@mms:key='in']"/> 
```

我正在使用 Saxon8B 阅读器，我猜测这种语法可能取决于我使用的阅读器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T21:21:12.450

尽管为*元素*`xmlns=...`设置了默认命名空间，但它没有为*属性*设置一个命名空间——如果你明确指定它，你只能在属性名称中获得一个命名空间。

 **它根本不应该依赖于您使用的 XML API。

来自[“XML 1.0 中的命名空间”](http://www.w3.org/TR/xml-names/#defaulting)：

> 6.2 命名空间默认
> 
> 默认命名空间声明的范围从它出现的开始标签的开头延伸到相应的结束标签的末尾，不包括任何内部默认命名空间声明的范围。在空标签的情况下，范围是标签本身。
> 
> 默认命名空间声明适用于其范围内的所有无前缀元素名称。**默认命名空间声明不直接应用于属性名称**；无前缀属性的解释由它们出现的元素决定。

（强调我的。）

请注意，这实际上与 XSLT 或 XPath 无关——它与纯 XML 和 XML 名称空间有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T03:52:42.107

**无前缀属性始终位于“无命名空间”中。**

Jon Skeet 的回答是这样的：

> “因为 W3C 命名空间规范是这么说的”

**让我解释一下这种设计决策背后的原因**：

逻辑是属性完全由它出现的元素定义，因此如果元素属于特定命名空间，则无需指定它们的任何属性属于该（或其他）命名空间。

换句话说，属性不像元素那样需要命名空间来消除歧义——因为属性完全由它所属的元素消除歧义。

因此，在设计新的基于 XML 的词汇表时，将属性定义为属于名称空间是一个坏主意。

此常识规则的一个例外是具有*全局*范围的属性（可以出现在任何元素上）。此类属性的示例有：`xml:lang`、`xml:space`、 ... 等。**

# crystal-reports - 晶体中缺少参数错误

> ID：13203190
> 
> 赞同：0
> 
> 时间：2012-11-02T21:19:57.460
> 
> 标签：crystal-reports, crystal-reports-2008, crystal-reports-xi, crystal-reports-2010

我正在运行水晶报告。但我收到以下错误：“缺少参数值”“错误：对象引用未设置为对象的实例。”

所有参数都被传递到前端。提供者也是正确的。

可能是什么问题？

# mysql - 选择或插入表格？

> ID：13203193
> 
> 赞同：0
> 
> 时间：2012-11-02T21:20:12.293
> 
> 标签：mysql

> **可能重复：**
> [如何在 MySQL 中“如果不存在则插入”？](https://stackoverflow.com/questions/1361340/how-to-insert-if-not-exists-in-mysql)

我想做一个选择语句，但如果没有行匹配，那么我想插入一行并获取行 ID。我不知道如何写声明。我想通了，但我不确定它是否有效，但如果有效，是否有更简单的方法来编写它？

```
insert into Blah(a,b,c) select aval, bval, cval 
where null = (
    select id from tbl where cond=1
);
select id from tbl where cond=1; 
```

# asp.net - web.config 从 SQL Server 更改为 MySQL 连接

> ID：13203198
> 
> 赞同：1
> 
> 时间：2012-11-02T21:20:48.907
> 
> 标签：asp.net, mysql, sql-server

我们刚刚完成了一个连接到 SQL Server 数据库的 VB.NET Web 项目的编程。客户现在要求我们在 MySQL 中也支持相同的模式。我尝试通过简单切换连接字符串，但它仍在尝试连接到 (providerName="MySql.Data.MySqlClient") 的提供程序值

这没有用。有人可以告诉我我们是否可以通过 web.config 做到这一点。我不想更改代码来支持不同的连接。我们将来还必须支持 Oracle 数据库。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:34:33.473

如果您没有编写与 DB 无关的代码，那么这并不容易。

有关详细信息和有用的链接，请参阅此问题。 [保持应用程序数据库不可知（ADO.NET 与封装数据库逻辑）](https://stackoverflow.com/questions/3080601/keeping-an-application-database-agnostic-ado-net-vs-encapsulating-db-logic)

# c# - 如何在 Silverlight 中使用 OpenXml (Office)？

> ID：13203201
> 
> 赞同：2
> 
> 时间：2012-11-02T21:20:57.143
> 
> 标签：c#, silverlight, excel, openxml, silverlight-5.0

我安装了这个 SDK 以在我的 Silverlight 应用程序中使用 OpenXml。目的是在没有安装应用程序的情况下从 Excel 导入数据。

但是我意识到我不能在 Silverlight 中使用某些程序集`System.IO.Packages`，所以我不知道如何从 Excel 中获取数据。

你知道从 CodePlex 或其他网站免费组装来获取一些数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:54:15.130

您的 silverlight 应用程序是否托管在 IIS 中？我想更简单的方法是通过 Ria 服务或 Wcf 服务在 asp.net 托管应用程序的服务器中打开 XML -

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:15:46.920

Silverlight 的 SpreadsheetGear 是一个与 Excel 兼容的 Silverlight 电子表格控件，它可以读取和写入 Open XML 文件以及较旧的 xls 文件。

[您可以在此处](https://www.spreadsheetgear.com/downloads/register.aspx)查看 Silverlight 示例的 Live SpreadsheetGear或在[此处](http://www.spreadsheetgear.com/support/samples/silverlight.aspx)下载免费评估以亲自试用。

免责声明：我拥有 SpreadsheetGear LLC

# c# - Windows Phone 8 开发 - 日志记录和 IOC 设计模式

> ID：13203204
> 
> 赞同：3
> 
> 时间：2012-11-02T21:21:03.430
> 
> 标签：c#, .net, logging, inversion-of-control, windows-phone-8

我是 Windows Phone 开发的新手，尤其是 WP8。我在使用 WPF 进行开发方面有一些经验，并且我尝试了一些使用 WP7 的概念验证解决方案。

到目前为止，我一直在挖掘 WP8 并没有找到任何针对 WP8 上的日志记录/跟踪以及 IOC 的一些使用的答案。我一直在为 Android 开发并一直在使用 Guice 和 RoboGuice。我有使用 Windsor 和 Ninject 的经验，但似乎其中任何一个都不支持 WP8。

*   在 WP8 上执行日志记录/跟踪的建议方法是什么？
*   应该使用哪些最佳开发和设计模式？
*   是否有任何 IoC 或服务定位器或任何针对这些功能的库？

你能推荐一些好的库/工具/框架吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T21:50:50.367

BugSense可能对您来说很有趣[。](http://www.bugsense.com/)

此外，作为入门（“只是为了拥有一些东西”）解决方案，您可以将跟踪数据保存到 IsolatedStorage，然后在[http://pastebin.com/](http://pastebin.com/)上共享它，以便其他人可以访问它。

# python - pinax 0.9a 和 0.7.3 之间的官方差异列表在哪里

> ID：13203207
> 
> 赞同：-1
> 
> 时间：2012-11-02T21:21:10.423
> 
> 标签：python, django, eclipse, pinax

谁能指出pinax 0.9a 和 0.7.3 之间差异的**官方列表？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:28:09.437

看看发布的博客文章，它应该回答你的问题： http: [//pinaxproject.com/blog/2011/11/29/pinax-09a2-released/](http://pinaxproject.com/blog/2011/11/29/pinax-09a2-released/)

# performance - 优化集合和组合

> ID：13203216
> 
> 赞同：0
> 
> 时间：2012-11-02T21:21:51.500
> 
> 标签：performance, optimization, set, computer-science, combinations

我有一堆套，A1，A2，A3，... AN。每组包含从 0 到 2000 的值的 N 个元素（可以说最大 1000 个）。例如。

```
A1{1,2,3,4}
A2{2,4,3,5}
A3(1,2,5,6) 
```

现在对于尺寸 k，例如 3，A1 的组合将是 C1(1,2,3), C2(1,2,4), C3(2,3,4) 对于 A1 到 AN 我需要弄清楚如果 A1 中的所有组合也存在于 A2 到 AN 的组合中。

即A1 的组合C3 将匹配A2 中的组合，并且可能匹配AN。现在我需要 A1 的 C1 和 C2 的结果以及 A2 到 AN 的结果。简单而低效的方法是为所有集合 A1 到 AN 生成所有 k 大小的组合。然后对于 A 的 C1 哪里/如果它存在于 A2 到 AN。之后是 C2，然后是 C3。然后继续下一组并重复。

我该如何改进这种方法，因为一旦添加了新集合，它就需要频繁且昂贵的计算？

我发现的另一种解决方案将在 O(N^2 + N) 中运行而不进行优化，这基本上涉及获取 A1 和 A2...AN 的交叉点，计算这些交叉点的​​组合，然后查看每个组合的次数发生在生成的结果中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T06:14:45.520

您可以尝试散列您的组合。您可以在这里使用两种方法，一种优化空间，另一种优化时间。对于时间优化，您的散列函数将为每个组合创建一个唯一键，并且每当您在一个已经被占用的地方被击中时，您就会知道您不是第一次遇到该组合。对于空间优化，方法类似，但密钥不是唯一的。您必须管理与该键对应的组合列表，并在点击时遍历它以查看它是否包含您当前正在检查的组合。您的密钥的唯一性等级将定义您的表的大小，因此您将不得不花费时间来验证命中。

# ios - 获取具有自定义视图的注释边界

> ID：13203221
> 
> 赞同：0
> 
> 时间：2012-11-02T21:22:19.690
> 
> 标签：ios, annotations, mapkit, mkannotationview

我的地图上有许多图钉，我想知道它们视图左上角和右下角的坐标，以便对它们执行特定操作。

这是我需要插入获取特定注释视图边界的代码的代码：

```
- (void)mapView:(MapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view {
    if ([view.annotation isKindOfClass:[PlaceAnnotation class]]) {
        PlaceAnnotationView *placeAnnotationView = (PlaceAnnotationView *)view;
        // How to get the bounds of placeAnnotationView here?
    }
} 
```

相关问题：[如何调整区域以适应刚刚出现的自定义注释标注？](https://stackoverflow.com/questions/13095911/how-to-adjust-region-to-fit-custom-annotation-callout-that-have-just-appeared)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T03:12:58.007

我刚刚发布了这个问题起源的问题的答案。答案可能在那里：[如何调整区域以适应刚刚出现的自定义注释标注？](https://stackoverflow.com/questions/13095911/how-to-adjust-region-to-fit-custom-annotation-callout-that-have-just-appeared)

# objective-c - 如何获取与 CLLocationManager 相关的值 - 即 CLLocationSpeed、CLLocationDirection、CLLocationAccuracy、CLLocationCoordinates？

> ID：13203222
> 
> 赞同：0
> 
> 时间：2012-11-02T21:22:29.503
> 
> 标签：objective-c, cllocation

我在 .m 文件中有以下代码。

该代码用于执行以下任务：

1.  初始化 CLLocationManager 类
2.  获取属性（速度、精度、坐标）
3.  将这些值转换为 NSString
4.  通过使用 NSLog 将这些值记录到屏幕上
5.  设置指定标签中的值，然后最后
6.  循环通过方法“locationUpdate”中包含的代码。

该代码为所有这些属性提供了一个初始值。但是，每个属性的值都是相同的（即 2.7188880）。

此外，当我通过方法“locationUpdate”循环时，代码为每个属性返回 0。

谁能告诉我代码没有返回属性值的原因？

```
- (void)viewDidLoad {
    [super viewDidLoad];
    locationManager = [[CLLocationManager alloc] init];

    [locationManager setDelegate:self];

    [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];

    [locationManager startUpdatingLocation];

    NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval: 2.0
                                                      target: self
                                                    selector:@selector(locationUpdate)
                                                    userInfo: nil repeats:YES];

    [[NSRunLoop currentRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode];

    NSString *spd = [[NSString alloc] initWithFormat:@"%f", speed];

    NSString *crd = [[NSString alloc] initWithFormat:@"%f", coordinates];

    NSString *drc = [[NSString alloc] initWithFormat:@"%f", direction];

    NSString *acc = [[NSString alloc] initWithFormat:@"%f", accuracy];

    NSString *desc = [locationManager description];

    NSLog(@"Speed: %@", spd);
    NSLog(@"Coordinates: %@", crd);
    NSLog(@"Direction: %@", drc);
    NSLog(@"Accuracy: %@", acc);
    NSLog(@"Description: %@", desc);

    Speedometer.text = spd;
    CoordinatesLabel.text = crd;
    DirectionLabel.text = drc;
    AccuracyLabel.text = acc;
    DescriptionLabel.text = desc; 
}

- (void)locationUpdate {

    NSString *desc = [locationManager description];

    NSString *spd = [NSString stringWithFormat:@"%g", speed];
    NSString *crd = [NSString stringWithFormat:@"%g", coordinates];

    NSString *drc = [NSString stringWithFormat:@"%g", direction];

    NSString *acc = [NSString stringWithFormat:@"%g", accuracy];

    NSLog(@"Speed: %@", spd);
    NSLog(@"Coordinates: %@", crd);
    NSLog(@"Direction: %@", drc);
    NSLog(@"Accuracy: %@", acc);

    Speedometer.text = spd;
    CoordinatesLabel.text = crd;
    DirectionLabel.text = drc;
    AccuracyLabel.text = acc;
    DescriptionLabel.text = desc; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:56:43.837

您不应该设置计时器。您只需实现位置管理器委托方法。当有更新时，您会被告知。

您最大的问题是您对变量`speed`、`coordinates`、`direction`和的使用`accuracy`。您永远不会在任何地方设置它们（至少使用您发布的任何代码）。

实现`locationManager:didUpdateLocations:`和/或`locationManager:didUpdateToLocation:fromLocation:`方法。这些将使用更新的位置信息进行调用。使用这些来更新您`speed`和其他 ivars。

编辑：另一个建议。不要使用字符串格式来格式化要显示给用户的数字。改为使用`NSNumberFormatter`。这样，数字就可以根据用户的语言环境正确格式化。

# sql - 自定义查询以显示具有重复计数的记录及其重复出现

> ID：13203223
> 
> 赞同：2
> 
> 时间：2012-11-02T21:22:31.747
> 
> 标签：sql, sql-server

请参考以下脚本

```
 declare @table1 table
            (
            col1 int
            )  

            insert into @table1 values(1)
            insert into @table1 values(3)
            insert into @table1 values(3)
            insert into @table1 values(6)
            insert into @table1 values(4)
            insert into @table1 values(4)
            insert into @table1 values(4) 
```

下面的查询给出

```
 select col1 ,COUNT(col1) cntCol1 from @table1 group by col1 
```

这个输出

```
 ----------------
            col1   | cntCol1
            -------| -------
            | 1    | 1    | 
            | 3    | 2    | 
            | 4    | 3    | 
            | 6    | 1    | 
            --------------- 
```

是否有可能获得以下输出

```
 ----------------
            col1   | cntCol1
            -------| -------
            | 1    | 1    | 
            | 3    | 1    | 
            | 3    | 2    |  
            | 4    | 1    |  
            | 4    | 2    |  
            | 4    | 3    | 
            | 6    | 1    | 
            --------------- 
```

如果是这样，你能帮我查询一下吗？

谢谢，埃森。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T21:25:17.817

试试这个：

```
select 
    col1, 
    Sequence = ROW_NUMBER() OVER(PARTITION BY col1 ORDER BY col1)
from 
    @table1 
```

该`ROW_NUMBER()`函数为数据的每个“分区”提供从 1 开始的连续数字（在您的情况下：对于`col1`表中的每个不同值）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T21:26:01.980

## [SQL小提琴](http://sqlfiddle.com/#!6/d41d8/820/0)

```
 SELECT col1, ROW_NUMBER() OVER (partition by col1 order by col1) cntCol1
        FROM @table1
    ORDER BY col1, cntCol1 
```

**样本数据**：

```
 declare @table1 table
            (
            col1 int
            )  

            insert into @table1 values(1)
            insert into @table1 values(3)
            insert into @table1 values(3)
            insert into @table1 values(6)
            insert into @table1 values(4)
            insert into @table1 values(4)
            insert into @table1 values(4) 
```

**结果：**

```
| COL1 | CNTCOL1 |
------------------
|    1 |       1 |
|    3 |       1 |
|    3 |       2 |
|    4 |       1 |
|    4 |       2 |
|    4 |       3 |
|    6 |       1 | 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T21:28:51.440

```
select *, rn=row_number() over (partition by col1 order by col1 )
  from @table1 
```

# c# - 循环遍历图像的所有点 C#

> ID：13203226
> 
> 赞同：-2
> 
> 时间：2012-11-02T21:22:46.163
> 
> 标签：c#, .net, windows

我有一个位图对象，它是 40 像素 x 40 像素。我希望能够遍历图像中的每个像素。

```
E.g. 1,1
1,2
1,3
...
2,1
2,4
...
39,1
39,2
and so on 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:43:39.870

这是一种使用 LockBits 的方法。然而，它使用了一个不安全的代码块：

```
private void processPixels()
{
    Bitmap bmp = null;
    using (FileStream fs = new FileStream(@"C:\folder\SomeFileName.png", FileMode.Open))
    {
        bmp = (Bitmap)Image.FromStream(fs);
    }

    BitmapData bmd = bmp.LockBits(new Rectangle(0, 0, bmp.Width, bmp.Height), ImageLockMode.ReadOnly, bmp.PixelFormat);

    for (int i = 0; i < bmp.Height; i++)
    {
        for (int j = 0; j < bmp.Width; j++)
        {
            Color c = getPixel(bmd, j, i);

            //Do something with pixel here
        }
    }

    bmp.UnlockBits(bmd);
}

private Color getPixel(BitmapData bmd, int x, int y)
{
    Color result;

    unsafe
    {
        byte* pixel1 = (byte*)bmd.Scan0 + (y * bmd.Stride) + (x * 3);
        byte* pixel2 = (byte*)bmd.Scan0 + (y * bmd.Stride) + ((x * 3) + 1);
        byte* pixel3 = (byte*)bmd.Scan0 + (y * bmd.Stride) + ((x * 3) + 2);

        result = Color.FromArgb(*pixel3, *pixel2, *pixel1);
    }

    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T21:29:22.667

可能是这样的。请注意，如果我没记错的话，既有较新的（System.Windows.Media）类，也有较`Bitmap`旧的（System.Drawing）类，它们的行为可能略有不同。`BitmapImage`

```
Bitmap bmp = ...  // Get bitmap
for(int x=0; x<bmp.PixelWidth; x++)
{
    for(int y=0; y<bmp.PixelHeight; y++)
    {
        Color c = bmp.GetPixel(x,y);
        Console.WriteLine(string.Format("Color at ({0},{1}) is {2}", x, y, c));
    }
} 
```

# jquery - 有什么方法可以获取 jQuery ajax 上传进度吗？

> ID：13203231
> 
> 赞同：8
> 
> 时间：2012-11-02T21:23:26.520
> 
> 标签：jquery, ajax

```
$.ajax({
  xhr: function()
  {
    var xhr = new window.XMLHttpRequest();
    //Upload progress
    xhr.upload.addEventListener("progress", function(evt){
      if (evt.lengthComputable) {
        var percentComplete = evt.loaded / evt.total;
        //Do something with upload progress
        console.log(percentComplete);
      }
    }, false);
    //Download progress
    xhr.addEventListener("progress", function(evt){
      if (evt.lengthComputable) {
        var percentComplete = evt.loaded / evt.total;
        //Do something with download progress
        console.log(percentComplete);
        }
      }, false);
    return xhr;
  },
  type: 'POST',
  url: "/",
  data: {},
  success: function(data){
    //Do something success-ish
  }
}); 
```

这在 jQuery 1.5+ 上不起作用，因为 xhr 被 jqXHR 取代（即原始 XHR 的高级版本）。现在的问题是如何让它与 jqXHR 一起工作......有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-03-17T17:26:19.207

尝试这个

```
$.ajax({
    url: path,
    xhr: function () {
        var xhr = $.ajaxSettings.xhr();
        xhr.upload.onprogress = function (e) {
            if (e.lengthComputable) {
                console.log(e.loaded / e.total);
            }
        };
        return xhr;
    }
}).done(function (e) {

}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-15T11:21:52.307

我制作了一个 jquery 插件来以简单的方式处理上传或下载进度事件。适用于任何 jquery ajax 方法，例如 $.ajax、$.get、$getJSON、$.post 等。您可以从此处下载：[https ://github.com/cvelazquez/jquery.ajax.progress](https://github.com/cvelazquez/jquery.ajax.progress)

```
var jqXHR = $.post('www.somedomain.com', {data:"real long data, o maybe a file upload"}, function(response){
    /* do anything on finish */
});

$(jqXHR).on('uploading', function(proxyEvent, event){
    if (event.lengthComputable) {
        // You can do anything here
        console.log("Uploaded " + parseInt( (event.loaded / event.total * 100), 10) + "%");
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T21:46:02.907

搜索文档和其他问题，似乎有一个插件来监控 jquery ajax 进度：[https ://github.com/hiddentao/jquery.ajaxprogress](https://github.com/hiddentao/jquery.ajaxprogress)

# vimeo - 如果添加了视频，任何 Slider、Accordion、Vimeo 都不会在滑动时暂停

> ID：13203234
> 
> 赞同：1
> 
> 时间：2012-11-02T21:23:39.640
> 
> 标签：vimeo, jquery-ui-accordion, anythingslider

我正在将任何滑块与 Jquery UI 手风琴一起使用，当我将幻灯片附加到手风琴内时会出现问题，如下所示：

```
$( "#accordion" ).accordion({
    active: false,
    collapsible: true,
    heightStyle: "content",
    change: function(event, ui) {
        var active = $("#accordion").accordion('option','active');
        switch(active){
            case 0:
                $("#slider1").append('<li class="panel1"><iframe src="http://player.vimeo.com/video/18011143?title=0&amp;byline=0&amp;portrait=0" width="600" height="338" frameborder="0"></iframe></li>');
                $("#slider1").append('<li class="panel2"><iframe src="http://player.vimeo.com/video/12280336?title=0&amp;byline=0&amp;portrait=0" width="600" height="338" frameborder="0"></iframe></li>');
                $('#slider1').anythingSlider();
                ... 
```

当我浏览幻灯片时，停止工作的事情是暂停（当您在下一张幻灯片上时，视频在后台播放）

如果我用 HTML 编写幻灯片，则暂停效果很好，例如：

```
<ul id="slider1">   <!-- START AnythingSlider -->
    <li class="panel1"><iframe src="http://player.vimeo.com/video/18011143?title=0&amp;byline=0&amp;portrait=0" width="600" height="338" frameborder="0"></iframe></li>
    <li class="panel2"><iframe src="http://player.vimeo.com/video/12280336?title=0&amp;byline=0&amp;portrait=0" width="600" height="338" frameborder="0"></iframe></li>
</ul> <!-- END AnythingSlider --> 
```

我希望我说清楚了，任何帮助将是最appriciated，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:58:26.390

感谢您提供的信息，顺便说一句，经过更多搜索后，我遇到了 ('#id').anythingSliderVideo(); 并在 ('#id').anythingSlider(); 之后调用它 确实有效！

但我不得不将附加部分更改为：

```
$("#panel1").append('<iframe src="http://player.vimeo.com/video/18011143?title=0&amp;byline=0&amp;portrait=0" width="600" height="338" frameborder="0"></iframe>');
$("#panel2").append('<iframe src="http://player.vimeo.com/video/12280336?title=0&amp;byline=0&amp;portrait=0" width="600" height="338" frameborder="0"></iframe>'); 
```

并把：

```
<li class="panel1"></li>
<li class="panel2"></li> 
```

直接转html...

我不知道这是否是最佳选择，但它对我有用。

就是这样，干杯！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T13:57:40.763

现在，AnythingSlider 的视频扩展不支持动态添加视频到滑块。我会考虑在未来添加此功能，但我没有太多时间来重写该扩展。对不起 =(

# c# - 设置定期动态磁贴更新

> ID：13203236
> 
> 赞同：1
> 
> 时间：2012-11-02T21:23:46.193
> 
> 标签：c#, windows-store-apps, microsoft-metro

我一直在开发一个 Windows 商店应用程序，我需要类似的东西

1.  定期调用执行http请求并返回响应字符串的函数
2.  使用返回的字符串更新动态磁贴
3.  只有当应用程序被暂停/导航到开始屏幕或其他东西时，这些才会发生

（我已经编写了执行和返回http请求的函数）

我提到了[这个](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh868228.aspx)链接，但我不知道将这些代码放在我的程序中的什么位置。我应该单独创建后台任务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:55:57.560

您无需设置后台任务。`StartPeriodicUpdate`只需在应用初始化期间调用 然后，Windows 将使用提供的时间间隔代表您的应用程序不断更新磁贴。

# javascript - 谷歌使用 javascript 绘制步行路线图

> ID：13203237
> 
> 赞同：0
> 
> 时间：2012-11-02T21:23:50.687
> 
> 标签：javascript, json, google-maps

我正在尝试在建筑物之间的校园内提供步行路线。当我使用以下代码时，开始和结束坐标被放置在最近的命名道路上，而不是指定的特定路径上。

```
 var request = {
    origin: "34.23974770397957,-118.53099968624116",
        destination: "34.240064785369974,-118.52827992630006",
        travelMode: google.maps.DirectionsTravelMode.WALKING
    };
    directionsService = new google.maps.DirectionsService();
    directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
      }
    }); 
```

您可以在这里[http://www.csun.edu/~kjm39451/maps/mapsError/main.html](http://www.csun.edu/~kjm39451/maps/mapsError/main.html)通过选择两个字段中任何内容的下拉菜单来查看问题。

但我想要的结果看起来像这样[https://maps.google.com/maps?saddr=34.23974770397957,-118.53099968624116&daddr=34.240064785369974,-118.52827992630006&hl=en&ll=34.239825,-118.530614&spn=0.003721,0.004823&sll=34.23962， -118.52964&sspn=0.003721,0.004823&geocode=FQR1CgIdSFzv-A%3BFUF2CgId6Gbv-A&dirflg=w&mra=ls&t=m&z=18](https://maps.google.com/maps?saddr=34.23974770397957,-118.53099968624116&daddr=34.240064785369974,-118.52827992630006&hl=en&ll=34.239825,-118.530614&spn=0.003721,0.004823&sll=34.23962,-118.52964&sspn=0.003721,0.004823&geocode=FQR1CgIdSFzv-A%3BFUF2CgId6Gbv-A&dirflg=w&mra=ls&t=m&z=18)

如何使用谷歌地图 api 来提供方向，就像谷歌地图一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:53:54.757

的目的地和来源属性`DirectionsRequest`可以采用字符串或`LatLng`类。如果您提供 a`LatLng`它似乎正在工作。

```
var request = {
  origin: new google.maps.LatLng(34.23974770397957, -118.53099968624116),
  destination: new google.maps.LatLng(34.240064785369974, -118.52827992630006),
  travelMode: google.maps.DirectionsTravelMode.WALKING
}; 
```

您可以参考地图 API 文档： [https ://developers.google.com/maps/documentation/javascript/3.exp/reference#DirectionsRequest](https://developers.google.com/maps/documentation/javascript/3.exp/reference#DirectionsRequest)

[https://developers.google.com/maps/documentation/javascript/reference#LatLng](https://developers.google.com/maps/documentation/javascript/reference#LatLng)

# url - 区分大小写的 URL - 可以避免这种情况吗？

> ID：13203239
> 
> 赞同：5
> 
> 时间：2012-11-02T21:23:55.800
> 
> 标签：url, iis, expressionengine, case-sensitive, case-insensitive

首先，我知道这有点像“死马”，但我已经在互联网上搜索了一个解决方案，但没有找到。不幸的是，这个正确的答案可能没有答案。

我在表达式引擎中有一个在 IIS7 上运行的站点（不要问），并且正在运行 Structure。

内容编辑者创建或更改条目并希望修改 URL 存在一个常见问题。当他们这样做时，他们往往会疯狂地区分大小写，要么骆驼大小写，要么只是设计自己的大小写方法来修改 URL。

## 第1轮

我遇到的第一个问题是营销团队在营销电子邮件的链接中放置了驼峰式和奇数式 URL 等。通过在 .htaccess 文件中捕获和重写 URL 来解决这个问题，例如：

```
#Make URL's lower case
RewriteEngine On
RewriteMap  lc int:tolower
RewriteCond %{REQUEST_URI} [A-Z]
RewriteRule (.*) ${lc:$1} [R=301,L] 
```

这解决了第 1 轮的 URL 问题。

## 第二轮

下一个问题是两个方面。--> FF 切入点。

折叠 1：他们有运行 IIS .Net 应用程序的内部开发，这些应用程序采用驼峰式格式。这一变化几乎让他们关闭了一上午。（哎呀！）

折叠 2：他们的贡献者以驼峰式的方式修改 URL，或者只是设计自己的对修改后的 URL 进行大小写的方法。

这是我卡住的地方。有没有我可以为此提供的解决方案，或者在这种情况下，他们需要遵守更严格的标准并让自己承担更多责任？

感谢您提供信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T06:58:11.357

ExpressionEngine URL 不应该区分大小写（至少它们不在我见过的任何 EE 站点上，包括[expressionengine.com](http://expressionengine.com/blOG)）。

您可能应该深入了解导致 URL 首先区分大小写的服务器问题。这可能是要做的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-31T23:41:04.970

当我将 Windows Server 2008 升级到 2019 时，我遇到了类似的情况。

我注意到该站点对图像等资源变得“区分大小写”。

在旧的 web.config 中，有一个配置导致了这种情况：

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <staticContent>
        <mimeMap fileExtension=".woff" mimeType="application/font-woff" />
    </staticContent>
</system.webServer> 
```

**评论mimeMap**标记和资源恢复工作就足够了。

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <staticContent>
        <!--
        <mimeMap fileExtension=".woff" mimeType="application/font-woff" />
        -->
    </staticContent>
</system.webServer> 
```

# silverlight - Silverlight 5 MVVM：如何触发从子 ViewModel 到父 ViewModel 的事件？（用户控件）

> ID：13203241
> 
> 赞同：1
> 
> 时间：2012-11-02T21:24:09.560
> 
> 标签：silverlight, mvvm

情况：

我有一个 UserControl（称之为 UCA），它的 DataContext 绑定到一个 ViewModel（称之为 VMA）。UserControl (UCA) 有另一个 UserControl（称为 UCB）嵌套在其中，我有一个用于 UCB 的 ViewModel，称为 VMB。

父 ViewModel (VMA) 有一个属性来实例化 VMB，并将 UCB 的 DataContext 设置为 VMB。

当绑定到 VMB 的 UCB 中的控件值 (TextBox) 发生更改时，它会收到通知 (OnPropertyChanged)。现在，我需要在 VMB 中进行更改以通知“父”VMA，以便父 VMA 可以做一些工作并更新 UCA 中的控件。

所以我在 ViewModel 方面，在我的 VMB OnPropertyChanged 方法中，我试图弄清楚如何将这些数据更改冒泡到 VMA。有什么建议么？提示？

谢谢，罗伯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:33:30.693

VMA 是否拥有 VMB？在 VMA 中注册事件

```
public VMA()            
{
    VMB.PropertyChanged += new System.ComponentModel.PropertyChangedEventHandler(PropertyChanged);
}

void PropertyChanged(object sender, System.ComponentModel.PropertyChangedEventArgs e)
{
    if (e.PropertyName == "MyProperty")
    {
        //TODO: Stuff
    }
} 
```

如果 VMB 实现 INotifyProeprtyChanged，这将起作用。

# php - 搜索 Sessions 变量数组并更新

> ID：13203246
> 
> 赞同：0
> 
> 时间：2012-11-02T21:25:07.847
> 
> 标签：php, arrays, session, variables

我正在使用此代码输出所有注册的会话变量 -

```
 echo "<pre>";
 print_r($_SESSION);
 echo "</pre>";
 exit(); 
```

这就是我得到的

```
Array
 (
[language] => english
[navigation] => navigationHistory Object
    (
        [path] => Array
            (
                [0] => Array
                    (
                        [get] => Array
                            (
                            )

                        [post] => Array
                            (
                            )

                    )

                [1] => Array
                    (

                        [get] => Array
                            (
                            )

                        [post] => Array
                            (

                                [cart_number] => XXXXXXXXXXXX
                                [x] => 62

                            )
                )

            )

        )
 ) 
```

我想将会话数组中的**cart_number**变量从 XXXXXXXX... 更新为 555555。我试过了

```
$_SESSION['navigation']->path[1]['post']['cart_number'] = 5555555 
```

这可行，但问题是，**cart_number**变量并不总是在 [1] => 数组中。它可以在 [2] 或 [3] 或其他任何地方。

所以我的问题是，无论如何我可以通过会话数组搜索该特定变量并用正确的值更新它吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:31:23.383

*简单*的方法是使用`foreach`循环遍历`navigationHistory`对象，直到找到`['post']['cart_number']`（假设只有 1 个）。

**伪代码**

```
foreach ($_SESSION['navigation']->path as $navObj) {
    if (isset($navObj['post']['cart_number'])) {
        // update...
        break;
    }
} 
```

一种更 OO 的方法可能是存在于`navigationHistory`更新`cart_number`或搜索堆栈的方法，例如`find()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:33:11.490

你可以这样设置..

```
foreach($_SESSION['navigation']->path as $key=>$val){
   if(isset($val['post']['cart_number'])) {
      $_SESSION['navigation']->path[$key]['post']['cart_number'] = 5555555;
   }
} 
```

这将覆盖所有已设置的 cart_numbers

# excel - 使用单个连接执行多个存储过程

> ID：13203250
> 
> 赞同：0
> 
> 时间：2012-11-02T21:25:29.173
> 
> 标签：excel, excel-2007, excel-2010, vba

我有一个设计，如下所述，需要一个接一个地执行（可能）多个存储过程。

```
 Dim cn As ADODB.Connection: Set cn = New ADODB.Connection
   Dim srv As String: srv = GetValue("tblBrandDatabase", abbr)
   Dim db As String: db = GetValue("tblBrandDatabase", abbr, 3)
   Dim connstr As String
   connstr = "Provider=SQLNCLI10;Server=" & srv & _
               ";Database=" & db & _
               ";Trusted_Connection=yes"

   cn.Open connstr

   ProcessEmplData wb, cn
   If (cn.State = adStateOpen) Then cn.Close

   cn.Open connstr
   Dim cmd As ADODB.Command: Set cmd = New ADODB.Command
   With cmd
      Set .ActiveConnection = cn

      'Process the new Imported Employee Data
      .CommandText = "Process_EmplData"
      .CommandText = adCmdStoredProc
      .Execute
   End With

   If (cn.State = adStateOpen) Then cn.Close
   Set cn = Nothing 
```

### 问题：

我怎样才能在不获取错误代码的情况下使其成功`Run-time error -2147217900 (80040e14) - Incorrect syntax near '4'`？

需要适用于 2007/2010，因为我们仍然在现场部署了这两个版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:32:36.540

你看到了吗？
4 是 的值`adCmdStoredProc`。你用那个覆盖`.CommandText`。使用`.CommandType`而不是第二个`.CommandText`.

# vb.net - 快速着色不连续的细胞块

> ID：13203252
> 
> 赞同：1
> 
> 时间：2012-11-02T21:25:30.937
> 
> 标签：vb.net, excel

我有一个应用程序可以生成一个（相当大的）电子表格，其中包含需要进行颜色编码的用户输出。当我生成数据时，我发现需要着色的块，但是如果我一次只做一个块，给它们着色会很耗时。我想做的是维护一大组不连续的单元格，并使用一个 Excel 互操作调用对其进行着色。

现在我为每种颜色维护一个范围，每次我找到一个需要该颜色的新块时，我都会将现有范围和新块合并。然后在最后我为那个范围着色。不幸的是，对于大型案例来说，这真的很慢而且有点麻烦。有没有更好的方法来做到这一点？我觉得给几千个细胞上色不应该花这么长时间。:)

**编辑** 以下代码使用条件格式解决了它（假设 B 列中存在 CORRECT 和 INCORRECT 字样）

```
With newSheet.Range("B:B")
    .FormatConditions.Add(Excel.XlFormatConditionType.xlCellValue, Excel.XlFormatConditionOperator.xlEqual, "CORRECT")
    .FormatConditions(1).Interior.ColorIndex = 4

    .FormatConditions.Add(Excel.XlFormatConditionType.xlCellValue, Excel.XlFormatConditionOperator.xlEqual, "INCORRECT")
    .FormatConditions(2).Interior.ColorIndex = 3
End With 
```

我仍然想做的唯一一件事是颜色不仅仅是包含“正确”的单元格。相反，我想为图表中的整行着色（例如，如果 B42 包含“正确”，我希望 A42:H42（包含它的行）为绿色）。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:59:18.390

您可以使用条件格式。

至于同一行中的着色单元格，您需要使用公式条件格式。例如，如果您希望 A、C 和 D 列根据 E 中的值有条件地格式化，您可以执行以下操作（伪代码）：

对于当前行的 A、C 和 D 列，将条件格式设置为公式：基于列 $E 和当前行的谓词

这很可能会转化为：

```
=IF($Erow=something, 1, 0) 
```

[http://msdn.microsoft.com/en-us/library/office/ff822801.aspx](http://msdn.microsoft.com/en-us/library/office/ff822801.aspx)

此外，最初在建议条件格式时，我是在谈论手动执行它。您是否有理由需要使用 VBA 来完成此任务？

# fancybox - SWF FancyBox - 关闭不会关闭 FancyBox

> ID：13203257
> 
> 赞同：0
> 
> 时间：2012-11-02T21:25:50.950
> 
> 标签：fancybox, flash, refresh

我尝试了这些答案，但无济于事......

[Fancy Box - 关闭 iframe 弹出窗口时如何刷新父页面？](https://stackoverflow.com/questions/3269899/fancy-box-how-to-refresh-parent-page-when-close-iframe-popup)

我在一组 SWF 文件上有一个简单的 fancybox 实现：

```
$(document).ready(function() {
    $(".demo-videos").fancybox({
        maxWidth        : 600,
        maxHeight       : 450,
        openEffect      : 'fade',
        closeEffect     : 'fade',
        openSpeed       : 500,
        closeSpeed      : 500,
        allowfullscreen : 'true'
    });
}); 
```

问题是当我关闭fancybox 窗口时，页面仍然变暗，恢复原始父级的唯一方法是刷新。即使在花式框之外单击，虽然它会删除变暗的背景，但不会将页面返回到原始状态。例如，右侧的滚动条丢失，页面被截断。

我在别处实现了 fancybox，但这是我第一次使用 SWF 源文件这样做。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:20:12.470

我升级了我的 Fancybox 和 jQuery 版本，一切都很好。谢谢詹尼斯！+1

# graph - 为什么 Maple 15 图形不取模？

> ID：13203258
> 
> 赞同：0
> 
> 时间：2012-11-02T21:25:51.980
> 
> 标签：graph, modulo, maple

我正在尝试绘制函数 f(x) = x mod 7
该图应该看起来像一堆尖刺线。相反，它绘制了一条直线 f(x) = x
我做错了什么？这似乎很基本。枫木有问题吗？
![在此处输入图像描述](../Images/421c8b8ba6936edf595eaf5e4af9f905.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:55:34.330

您定义的 f 是关于 x 的过程。当 maple 得到 时`plot(f(x),x=1..10)`，它首先尝试计算 f 而不填写 x 的数值。您的解决方案`plot(f,1..10)`是绘制程序的正确方法，第一个是绘制通用公式。在`plot(f,1..10)`Maple 中检测到您正在绘制一个过程并正确填写 x。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T21:37:08.310

我不知道为什么，但需要这种语法：

> 情节（f，1 .. 10）

# visual-studio-2010 - 在 Windows 2012 上使用 Visual Studio 2010 构建 MIDL2398 错误

> ID：13203261
> 
> 赞同：7
> 
> 时间：2012-11-02T21:26:05.133
> 
> 标签：visual-studio-2010, com

每次尝试编译使用 COM 的 Visual C++ (Visual Studio 2010) 项目时，我都会看到 MIDL2398 错误。该项目在我的 Windows 7 开发人员机器和 Windows Server 2008 构建机器上构建得非常好，但在 Windows Server 2012 构建机器上却不行。

我发现了这个关于各种 MIDL 编译器错误的网站：http: [//blog.yezhucn.com/midl/compiler_errors.htm](http://blog.yezhucn.com/midl/compiler_errors.htm)

但是，我尝试了它对 MIDL2398 的建议，我验证了“midlc.exe”与“midl.exe”在同一目录中，并且两者都是相同的版本（两者都是文件版本：7.0.555.1 产品版本：6.1.7600.16385 ，来自 Windows SDK v7.1)。

我猜它与 Windows Server 2012 有关，但我不知道。

有没有人能够让 Windows SDK v7.1 MIDL 编译器在 Windows Server 2012 上工作？或者，有谁知道还有什么可能导致 MIDL2398？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-13T23:57:50.383

我解决了这个问题。

我在构建服务器上安装了 SysInternals 套件 ( [http://technet.microsoft.com/en-US/sysinternals](http://technet.microsoft.com/en-US/sysinternals) )，然后使用进程监视器 (procmon) 查看 MIDL.exe 正在尝试和失败的操作。

就我而言，原来在 C: 驱动器的根目录下有一个名为“Program”的文件，因此该文件的路径是“C:\Program”。我不知道是什么或为什么，但 MIDL.exe 对这个文件做了一些事情。我将文件重命名为“Program--MW”，MIDL2398 错误消失了。

如果其他人遇到 MIDL2398 错误，我建议您也使用 SysInternals 的 Process Monitor，为 Process Name 添加过滤器 -- Contains -- midl，运行编译器并检查 Process Monitor 日志中的错误和奇怪行为。它对我有用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-11T23:56:22.573

在 VS2012 上，midl 错误是由 com0com 安装程序引起的，它在 C 盘下创建了文件 Program。如前所述，这与 MIDL 混淆了。

文件 C:\Program 具有以下内容。只需将此文件重命名为其他名称，例如：C:__Program 即可让 Midl 感到高兴。

```
DIALOG: {
SetupOpenInfFile(C:\WINDOWS\system32\com0com.inf) on line 0
ERROR: 2 - The system cannot find the file specified.

} ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-13T13:37:46.833

其他答案通常是正确的。具体来说，在我的情况下，*该死*文件的存在在文件夹层次结构中更靠后，这导致**midl 失控**。我在 Windows 环境中使用了**Cygwin** shell，下面是一个完整的完全可重播的问题屏幕投射视频，然后是解决方案。

[https://asciinema.org/a/W2wEnv4y8nWHNWl5P3NIw8GnF](https://asciinema.org/a/W2wEnv4y8nWHNWl5P3NIw8GnF)

# mysql-error-1205 - MySQL错误代码1205：尝试删除具有相同ID的多行时超出锁定等待超时

> ID：13203262
> 
> 赞同：1
> 
> 时间：2012-11-02T21:26:15.503
> 
> 标签：mysql-error-1205

尝试从我的表中删除具有相同 ID 的多行时，我收到“超过锁定等待超时错误...”消息（代码 1205）。如果我使用 SELECT 而不是 DELETE，则查询可以正常工作并返回我要删除的行。这是我的查询

```
delete FROM `mydb`.`data` 
WHERE list_id= any
(select t2.list_id from `base`.`cards` as t2
where t2.type=3 and t2.time = "") ; 
```

我不能使用主键/索引，因为同一个 list_id 有多行。我花了几个小时试图在互联网上找到解决方案，但没有任何乐趣。有人可以帮忙吗！？谢谢

# ios - MonoTouch.Dialog：EntryElement 的背景颜色

> ID：13203265
> 
> 赞同：1
> 
> 时间：2012-11-02T21:26:38.233
> 
> 标签：ios, xamarin.ios, monotouch.dialog

**a 的背景颜色**是如何`EntryElement`变化的`MonoTouch.Dialog`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:06:23.220

```
public class PaperEntryElement: EntryElement
{
    public PaperEntryElement(string caption, string placeholder, string value)
        : base(caption,placeholder,value)
    {
    }

    public override UITableViewCell GetCell(UITableView tv)
    {
        var cell= base.GetCell(tv);
        cell.BackgroundColor = 
           UIColor.FromPatternImage(MediaProvider
                                       .GetImage(ImageGeneral.paper_tile));
        return cell;
    }
} 
```

# ruby - ruby 无法从 Thread.abort_on_exception 拯救或看到中止

> ID：13203268
> 
> 赞同：4
> 
> 时间：2012-11-02T21:27:05.693
> 
> 标签：ruby, multithreading, raise, rescue

我需要立即捕获线程中的异常并停止所有线程，因此我在脚本中使用了 abort_on_exception。不幸的是，这意味着异常不会引发到父线程 - 也许这是因为异常最终发生在全局范围内？

无论如何，这是一个显示问题的示例：

```
Thread.abort_on_exception = true

begin
  t = Thread.new {
    puts "Start thread"
    raise saveMe
    puts "Never here.."
  } 
  t.join
rescue => e
  puts "RESCUE: #{e}"
ensure
  puts "ENSURE"
end 
```

使用 abort_on_exception 时，如何挽救线程中引发的异常？

这是一个新的例子，它展示了更令人难以置信的东西。线程能够在开始块内终止执行，但它不会引发任何异常？

```
Thread.abort_on_exception = true
begin
  t = Thread.new { raise saveMe }                     
  sleep 1
  puts "This doesn't execute"
rescue => e 
  puts "This also doesn't execute"
ensure
  puts "But this does??"
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T05:45:32.460

啊——我想通了。

abort_on_exception 显然会发送中止。该线程无关紧要，我们的救援也不会看到基本中止：

```
begin
  abort
  puts "This doesn't execute"
rescue => e
  puts "This also doesn't execute"
ensure
  puts "But this does??  #{$!}"
end 
```

解决方案是使用“救援异常”，它也会捕获中止。

```
begin
  abort
  puts "This doesn't execute"
rescue Exception => e
  puts "Now we're executed!"
end 
```

# actionscript-3 - Actionscript 3 中的最大值？

> ID：13203270
> 
> 赞同：1
> 
> 时间：2012-11-02T21:27:19.250
> 
> 标签：actionscript-3

我想在 AS3 中让敌人跟随我的角色。

我到目前为止的代码是：

```
enemy1.x = (enemy1.x + (character.x - enemy1.x));
enemy1.y = (enemy1.y + (character.y - enemy1.y)); 
```

使用该代码，敌人每帧都会立即出现在我的角色之上。

不过，我不希望它是即时的。我希望敌人的移动具有最大值，例如每刻 2。

我知道您可以为随机值设置最小值和最大值，但是对于这样的事情呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T08:21:07.707

```
enemy1.x += getMovementValue(2, character.x - enemy1.x);
enemy1.y += getMovementValue(2, character.y - enemy1.y);

function getMovementValue(maxMovement:Number, d:Number):Number{
    if(d == 0) return 0;
    return (Math.min(2, Math.abs(d))) * (d / Math.abs(d));
} 
```

您只需将最大允许距离与实际行驶距离的绝对值之间的最小值乘以 1 或 -1，具体取决于当前方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T22:04:34.227

如果运动的计算值太大，那么你需要限制它：

```
max_x = 2

x = (enemy1.x + (character.x - enemy1.x));
if abs(x) > max_x
    if x >0
        enemy.x = max_x
    else
        enemy.x = max_x * -1
else
    enemy.x = x 
```

使其成为一个函数并为 y 重复使用

# c# - ReadBsonType 只能在 State 为 Type 时调用，不能在 State 为 Value 时调用

> ID：13203272
> 
> 赞同：2
> 
> 时间：2012-11-02T21:27:19.623
> 
> 标签：c#, mongodb, mongodb-.net-driver, bson

我正在尝试使用[BsonClassMap](http://docs.mongodb.org/ecosystem/tutorial/serialize-documents-with-the-csharp-driver/)，当它运行时出现以下错误：

> ReadBsonType 只能在 State 为 Type 时调用，不能在 State 为 Value 时调用

# oracle - 自动更改过期密码

> ID：13203277
> 
> 赞同：2
> 
> 时间：2012-11-02T21:28:06.847
> 
> 标签：oracle, oracle10g, passwords, oracle11g, stdin

简而言之，我想在没有管理员干预的情况下通过 shell 脚本自动完成自助过期密码更改。

不幸的是，我的方法失败了，我不确定为什么：

```
sqlplus -S /nolog << !
connect $userid/$password
xyzzy1                                            # my original uses $newpass
xyzzy1                                            # but results are the same
select distinct version from product_component_version;
exit;
! 
```

生产

```
ERROR: ORA-28001: the password has expired        # connection succeeded
Changing password for USER
New password:                                     # carriage return succeeded?
Retype new password:                              # carriage return succeeded?
ERROR: ORA-00988: missing or invalid password(s)  # variables/STDIN may be NULL?
Password unchanged
SP2-0042: unknown command "xyzzy1" - rest of line ignored.
SP2-0042: unknown command "xyzzy1" - rest of line ignored.
SP2-0640: Not connected 
```

它似乎忽略了对新密码请求的传递响应，但同时它没有挂起。

手动连接并以交互方式提供相同的响应*确实*有效。我想知道为什么密码更改过程不接受 STDIN。

有任何想法吗？

注意：老问题[Programmatically Change Expired Oracle DB Password?](https://stackoverflow.com/questions/5005999/programmatically-change-expired-oracle-db-password) 在写这篇文章时提供了，虽然它完全符合我的推导，但它对我不起作用。我不确定这方面的礼仪，所以提前为（重新）发布道歉。

我的环境是 Solaris 和 Oracle 10g/11g。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T18:34:35.433

我建议以特权用户身份连接到数据库并执行以下操作：

```
alter user user_name identified by new_password; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-08T13:33:23.807

## 在 C 语言中

根据[OCI 文档](https://docs.oracle.com/cd/B28359_01/appdev.111/b28395/oci08sca.htm#sthref1165)，您可以通过 C API`OCIPasswordChange()`调用：

> 该`OCIPasswordChange()`调用使应用程序能够根据需要修改用户的数据库密码。如果调用`OCISessionBegin()`返回指示用户密码已过期的错误消息或警告，这将特别有用。

另请参阅[函数](https://docs.oracle.com/cd/B28359_01/appdev.111/b28395/oci17msc007.htm#i573853)[的 API 文档`OCIPasswordChange()`](https://docs.oracle.com/cd/B28359_01/appdev.111/b28395/oci17msc007.htm#i573853)。

## 在 Python 中

其他语言的基于 OCI 的库也可能公开此功能。例如[Python 的`cx_Oracle.connect()`函数](https://cx-oracle.readthedocs.io/en/latest/module.html#cx_Oracle.connect)有一个`newpassword`参数。

# android - 为什么我的手机用android不能在弹出的网站上写一些字符？

> ID：13203278
> 
> 赞同：0
> 
> 时间：2012-11-02T21:28:06.080
> 
> 标签：android

当我在手机上访问网站时，我的设备不允许在开头显示的弹出窗口中放置一些字母，为什么会在我的手机处女（京瓷）上发生？.. 关于这个问题，谁能帮我？在另一台设备上工作得很好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:32:13.133

打开浏览器，然后按`Menu button -> More -> Check if "Text encoding" is "Unicode UTF-8"`。如果不改变它。

# data-binding - 淘汰赛不刷新绑定

> ID：13203281
> 
> 赞同：0
> 
> 时间：2012-11-02T21:28:09.827
> 
> 标签：data-binding, knockout.js, knockout-2.0

我把我的代码放到这个 jsFiddle 里：http: [//jsfiddle.net/damianofusco/ngFM9/](http://jsfiddle.net/damianofusco/ngFM9/)

```
function Person(data) {
    this.Id = data.Id;
    this.FirstName = ko.observable(data.FirstName);
    this.LastName = ko.observable(data.LastName);
    this.FriendlyName = ko.computed(function() {
        return this.Id + ' ' + this.FirstName() + ' ' + this.LastName();
    }, this);
    this.HasValues = ko.computed(function() {
        return this.FirstName().length > 0 && this.LastName().length > 0;
    }, this);
}

var pBlank = new Person({
    Id: 0,
    FirstName: "",
    LastName: ""
});

var p1 = new Person({
    Id: 1,
    FirstName: "Damiano",
    LastName: "Fusco"
});

var p2 = new Person({
    Id: 2,
    FirstName: "John",
    LastName: "Doe"
});

window.myVM = {
    People: ko.observableArray([p1, p2]),
    NewPerson: ko.observable(pBlank),
    AddPerson: function() {
        var newid = this.People().length + 1;
        var newItem = new Person({
            Id: newid,
            FirstName: this.NewPerson().FirstName(),
            LastName: this.NewPerson().LastName()
        });
        console.log(newItem.FriendlyName());
        this.People.push(newItem);
        this.NewPerson(pBlank);
    }
};

window.myVM.People.subscribe(function() {
    console.log('People changed');
});

window.myVM.NewPerson.subscribe(function() {
    console.log('NewPerson changed');
});

window.myVM.NewPerson().FirstName.subscribe(function() {
    console.log('NewPerson.FirstName changed');
}); 
```

在 Knockout 方面比我有更多经验的人可以解释为什么在单击“添加人员”后代码没有重置两个输入文本框，名字和姓氏？

请注意，我正在尝试通过在完成添加后调用 this.NewPerson(pBlank) 来重置它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T22:17:03.003

您的字段持续存在的原因是因为您的 pBlank 对象没有获得新的 observables（即 pBlank 字段在您更改它们时正在更新）。[http://jsfiddle.net/ngFM9/2/](http://jsfiddle.net/ngFM9/2/)。

这就是我会怎么做。 [http://jsfiddle.net/ngFM9/1/](http://jsfiddle.net/ngFM9/1/)（我做了很多改动）

HTML

```
 <div class="ui-widget">
            <div class="ui-widget-header" style="padding:5px">People</div>
            <div class="ui-widget-content" style="padding:5px;height:100%">
                <ul class="selectSingle" id="ulPeople" data-bind="foreach: People">
                    <li class="ui-widget-content" data-bind="text: FriendlyName"></li>
                </ul>

                <form data-bind="submit: AddPerson">
                    <span>First:</span><input type="text" data-bind="value: fname"/>
                    <br/><span>Last:</span><input type="text" data-bind="value: lastname"/>
                    <br/><input type="submit" value="Add Person"/>
                </form>
            </div>
        </div> 
```

JS

```
function Person(id, fname, lastname) {
    this.Id = ko.observable(id);
    this.FirstName = ko.observable(fname);
    this.LastName = ko.observable(lastname);
    this.FriendlyName = ko.computed(function() {
        return this.Id() + ' ' + this.FirstName() + ' ' + this.LastName();
    }, this);
}

var p1 = new Person(1, "Damiano", "Fusco");

var myVM = function(p1){

    this.People = ko.observableArray([p1]);

    this.fname = ko.observable();
    this.lastname = ko.observable();

    this.AddPerson = function() {
        var newid = this.People().length + 1;
        var newItem = new Person(newid, this.fname(), this.lastname());
        this.People.push(newItem);

        this.fname('');
        this.lastname('');

    }
};

ko.applyBindings(new myVM(p1)); 
```

# javascript - 仍然允许桌面事件工作的 Javascript 触摸库

> ID：13203282
> 
> 赞同：1
> 
> 时间：2012-11-02T21:28:14.703
> 
> 标签：javascript, html

我正在寻找一个仍然允许正常事件工作的 javascript 库（主要是滚轮）。我正在开发一个将显示在电视屏幕上并由 Wii 遥控器控制的应用程序，但也需要它在桌面上工作。我已经有适用于桌面的页面，现在我只是在寻找一个不会将其完全变成触摸控制页面的库。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:46:04.920

对于桌面上的移动样式滚动，请使用[cubiq](http://cubiq.org/iscroll-4)的 iScroll4

# php - CGridView 和 CButtonColumn 的使用（Yii 框架）

> ID：13203284
> 
> 赞同：0
> 
> 时间：2012-11-02T21:28:24.943
> 
> 标签：php, yii, cgridview, cbuttoncolumn

我是 Yii 的初学者并试图了解 CGridView 小部件。

首先我了解所有这些代码：

```
$this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider'=>$dataProvider,
    'columns'=>array(
        "url",
        "allowRedirect",
        array(
            "name"=>"Kod",
            "value"=>array($model, "returnHTTPCode"),
            "type"=>"html"
            ),
        array(
            "class"=>"CButtonColumn",
            "template"=>"{update} {delete}",
            ),

        ),
)); 
```

现在我想将*删除*按钮的 url 更改为`http://domain.com/?r=pano/deleteSite`. [在文档](http://www.yiiframework.com/doc/api/1.1/CButtonColumn#deleteButtonUrl-detail)中，有一个 deleteButtonUrl 属性，我正在尝试使用它

```
$this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider'=>$dataProvider,
    'columns'=>array(
        "url",
        "allowRedirect",
        array(
            "name"=>"Kod",
            "value"=>array($model, "returnHTTPCode"),
            "type"=>"html"
            ),
        array(
            "class"=>"CButtonColumn",
            "template"=>"{update} {delete}",
            "deleteButtonUrl"=>"deleteSite"            
            ),

        ),
)); 
```

但我得到了`Use of undefined constant deleteSite - assumed 'deleteSite'`错误。

然后我尝试使用`buttons`CButtonColumn 的属性。

```
$this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider'=>$dataProvider,
    'columns'=>array(
        "url",
        "allowRedirect",
        array(
            "name"=>"Kod",
            "value"=>array($model, "returnHTTPCode"),
            "type"=>"html"
            ),
        array(
            "class"=>"CButtonColumn",
            "template"=>"{update} {delete}",
            "buttons"=>array(
                "delete"=>array(
                            "url"=>"http://localhost/sitelerimacikmi/index.php?r=panos"
                            )
                ),

            ),

        ),
)); 
```

并得到同样的错误。

如何使用 CButtonColumn 的属性？

**注意**，英语不是我的母语，所以请尽可能使用简单的语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:55:20.643

您可以尝试使用：

```
$this->widget('zii.widgets.grid.CGridView', array(
'dataProvider'=>$dataProvider,
'columns'=>array(
    "url",
    "allowRedirect",
    array(
        "name"=>"Kod",
        "value"=>array($model, "returnHTTPCode"),
        "type"=>"html"
        ),
    array(
        "class"=>"CButtonColumn",
        "template"=>"{update} {delete}",
        "deleteButtonUrl" => "Yii::app()->createUrl('pano/deleteSite')" // <- changes here
        ),

    ),
)); 
```

另外，您可以阅读这篇文章：[http ://www.yiiframework.com/wiki/106/using-cbuttoncolumn-to-customize-buttons-in-cgridview/](http://www.yiiframework.com/wiki/106/using-cbuttoncolumn-to-customize-buttons-in-cgridview/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T22:55:49.310

如果需要指定 URL，则必须将其指定为 PHP 表达式。以下是类中删除 URL 的默认值是如何定义的`CButtonColumn`，

```
public $deleteButtonUrl = 'Yii::app()->controller->createUrl(
    "delete",array("id"=>$data->primaryKey)
)'; 
```

这个 url 是使用 php eval 函数评估的，在这个表达式`$data`中是当前正在渲染的模型。

你应该使用：

```
$this->widget('zii.widgets.grid.CGridView', array(
    ...
    'columns'=>array(
        ...
        array(
            'class'=>'CButtonColumn',
            'deleteButtonUrl' => 'Yii::app()->controller->createUrl(
                "pano/deleteSite", array("id" => $data->primaryKey)
            )',
        ),
    ),
); 
```

# dna-sequence - 需要脚本或软件从配对末端读取中删除未配对读取

> ID：13203289
> 
> 赞同：1
> 
> 时间：2012-11-02T21:29:00.497
> 
> 标签：dna-sequence

我想使用 AMOScmp 来分析 illumina 配对端数据。AMOScmp 需要相同数量的配对文件来构建 .afg 文件。原始 fq 文件已配对。在我通过质量、重复序列和人类 DNA 控制分别传递 fq 文件后，我发现配对的末端 fa 文件具有不同的读取数。我想从配对的末端读取中删除未配对的读取，以获得两个具有相同读取数的 fa 文件。有人有脚本或知道什么软件可以帮助我解决问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-28T22:05:04.803

使用[trimmomatic](http://www.usadellab.org/cms/?page=trimmomatic)实用程序来执行此操作。这是一个质量修整程序，将输出 4 个文件：R1_paired、R2_paired、R1_singles、R2_singles

如果您只需要匹配对，那么只需使用单个质量属性运行它，例如：

> 明伦:20

注意：您应该知道，如果您稍后需要对两个配对的结束文件进行洗牌，则在经过一定次数的读取后，两个“配对”文件之间的序列奇偶校验将不会是 1:1。我怀疑这是由于 trimmomatic 的线程。如果您担心它，请务必将线程设置为 1。不确定这是否是一个解决方案，因此请通过查看两个文件中的随机行来验证结果。从两个文件的开头、中间和结尾选择行。然后比较序列 ID 行：

> 头-n 1000 R1_paired.fastq | 尾-n 4
> 
> 头-n 1000 R2_paired.fastq | 尾-n 4

这是一个使用两个成对的末端 FASTQ 文件的示例（注意：假设输入文件名为 R1.fastq 和 R2.fastq，并且 trimmomatic-0.30.jar 位于本地目录中，否则您需要将路径供java跟随）

> java -jar ./trimmomatic-0.30.jar PE -threads 1 -phred33 R1.fastq R2.fastq R1_paired.fastq R1_singles.fastq R2_paired.fastq R2_singles.fastq MINLEN:20

# c# - 更新表适配器配置参考错误

> ID：13203292
> 
> 赞同：2
> 
> 时间：2012-11-02T21:29:27.877
> 
> 标签：c#, sql, xsd

当我尝试更新去年编写的项目时，我遇到了问题。

我在 xsd 表适配器配置上单击配置，在我的选择语句之后我得到：

```
Could not load file or assembly 'microsoft.sql.server.types, version = 11.0.0.0,
culture=neutral,publickeytoken=89845dcd8080cc91 or one of its dependencies. 
```

对我来说奇怪的是我可以预览数据并查看示例选择，但我无法从 gui 进行配置。

我包含了文件`C:\Program Files (x86)\Microsoft SQL Server\100\SDK\Assemblies\Microsoft.SqlServer.Types.dll v. 10.0.0.0`

我已经安装了 SQL Server 2008 R2 SP1。我在哪里可以找到版本 11，为什么选择可以工作但不能配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:10:47.187

我重新安装/修复了 clr 类型，它解决了我的问题....

# iphone - 以编程方式为 iPhone/iPad 外壳着色

> ID：13203293
> 
> 赞同：1
> 
> 时间：2012-11-02T21:29:36.737
> 
> 标签：iphone, objective-c, ios, xcode, ipad

有谁知道是否可以通过编程方式知道 iPhone/iPad 外壳的颜色？我想构建一个加载不同 UI 的应用程序，无论 iPhone/iPad 是黑色还是白色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:08:14.317

据我所知，您可以根据此处讨论的设备序列号确定手机的[颜色：检测 iPhone/iPad/iPod touch 的颜色？](https://stackoverflow.com/questions/8463212/detecting-color-of-iphone-ipod-touch)

我认为你最好的办法是用不同的颜色显示不同型号的手机，然后让用户选择一个。

祝你好运。

# python - MongoDB 和 PyMongo - 类似 SQL 的列

> ID：13203294
> 
> 赞同：1
> 
> 时间：2012-11-02T21:29:39.620
> 
> 标签：python, sql, mongodb, pymongo

我有一个 MySQL 数据库，其中有一个名为***sources***的表，我有两个名为***srctype***和***url***的列，其中 srctype 是一个名称（例如：Hello），而 url 是一个 url（例如：http: [//google.com](http://google.com)）

例如，在使用 SQLAlchemy 的 Python 中，我可以过滤 srctype 并获取 url 列表；

```
src = "hello"    
links = session.query(sources).filter_by(srctype=src).all() 
```

很简单，现在我正在将这些数据迁移到 MongoDB，为此我正在使用***pymongo***。

我有一个函数可以将 srctype 和 url 保存到 mongodb 的数据库中

```
 def insertSources(self, srctype, link):
        """ Insert rss sources so we can parse them """
        new = {srctype: link}
        self.__sources.insert(new) 
```

和一个检索 srctype 的函数

```
 def getSources(self, type=None, single=True): # type == srctype
    if type:
        if single:
            return self.__sources.find_one()
        else:
            return iter(self.__sources.find({srctype:type}))
    else:
        if single:
            return self.__sources.find_one()
        else:
            return iter(self.__sources.find()) 
```

这里的问题是，由于没有名为 srctype 的列，也没有名为 url 的列，我该如何做与 SQLAlchemy/MySQL 示例相同的操作？

在 MySQL 中是；

```
SELECT * FROM sources WHERE srctype="hello" 
```

我想知道在我拥有的检索功能中（也在插入功能中，因为我不确定我在那里所做的是否适合我想要的工作）。在*insertSources*函数中，我简单地将*dict*添加到 MongoDB，显然我将无法在 getSources 函数中获取 srctype，因为 MongoDB 中的 srctype 没有列。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:36:51.680

您的问题是您在保存数据时没有正确设置名称。代替

```
def insertSources(self, srctype, link):
    """ Insert rss sources so we can parse them """
    new = {srctype: link}
    self.__sources.insert(new) 
```

你应该做

```
def insertSources(self, srctype, link):
    """ Insert rss sources so we can parse them """
    new = {'srctype': srctype, 'link': link}
    self.__sources.insert(new) 
```

同样在`getSources()`. 如果`srctype`通过了，`find()`应该`find_one()`会收到`{'srctype': type}`。

# c++ - 如何以编程方式将#include 文件添加到整个库的 C++ 类中

> ID：13203295
> 
> 赞同：1
> 
> 时间：2012-11-02T21:29:52.900
> 
> 标签：c++, header, dependencies

（作为前言，我意识到这很古怪，不是标准的 C++ 实践，但它适合我的目的。）

好的，所以我有一个 C++ 库，它基本上都是头文件，因为它大量使用模板。几乎每个头文件都包含一个类定义（“ButterworthFilter.h”、“Interpolator.h”等）。我想让这些类中的每一个都有第二个“独立”版本，以便它们可以轻松地传输到不同的项目而无需占用整个库。所以基本上这个手动版本将进入每个标题，查看#include依赖项，然后将这些包含的类复制/粘贴到它们在原始文件中#included的顶部。这样做的问题是，只要原始文件之一发生更改，就需要更改，因此无论何时进行更新都应该以编程方式完成。

有没有办法让编译器输出每个依赖文件的全部内容或其他东西？例如，我可以告诉编译器输出 ButterworthFilter.h 的依赖项，它会检查 #includes，查看它是否依赖于 Filter.h，并输出所有 Filter.h（以及递归的任何依赖项）。更好的是实际上是用来操作这样的库的程序。我认为拥有一个可以生成隐藏在某个库中的任何有用类的独立版本的工具会很棒。

无论如何，我希望这个问题有意义，并提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:33:22.363

您可以使用编译器编写预处理的结果。通常，您使用该`-E`选项来获得预处理文件的结果。经过处理的文件往往具有原始文件的行号和指示 - 您可能希望删除这些。当然，这也会扩展宏，但除了包含保护之外，您希望无论如何都不使用任何宏......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T20:57:40.903

你看着正确的方向： http: [//gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html)

有 -M 选项可以生成适合 make 的规则 - 因此它列出了所有依赖文件 - 那是所有头文件，因此 make 可以知道如果头文件更改，则必须重新编译目标文件。与 -MF 选项一起使用。

来自 gcc 文档：

```
-M
不是输出预处理的结果，而是输出适合的规则
用于描述主源文件的依赖关系。
预处理器输出一个包含目标文件名的 make 规则
对于该源文件，冒号和所有包含文件的名称，
包括来自 -include 或 -imacros 命令行选项的那些。
...

此选项不会抑制预处理器的调试输出，例如 -dM。
为避免将此类调试输出与依赖规则混合，您应该明确
使用 -MF 指定依赖输出文件，
或使用像 DEPENDENCIES_OUTPUT 这样的环境变量...

```

# iphone - 解析来自 Web 服务的数据时发生错误

> ID：13203297
> 
> 赞同：-1
> 
> 时间：2012-11-02T21:30:00.487
> 
> 标签：iphone, ios, xcode, json

使用 JSON Parser 在此处解析时发生错误，
请参见以下代码

```
- (void)loadDataSource  {  
    // Request  
    NSString *URLPath = [NSString   stringWithFormat:@"https://ajax.googleapis.com/ajax/services/feed/find?   v=1.0&q=Official%20Google%20Blogs"];      
    NSURL *URL = [NSURL URLWithString:URLPath];  
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:URL];

    [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {

        NSInteger responseCode = [(NSHTTPURLResponse *)response statusCode];

        if (!error && responseCode == 200) {
            id res = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:nil];
            if (res && [res isKindOfClass:[NSDictionary class]]) {
                self.items = [res objectForKey:@"gallery"];
                [self dataSourceDidLoad];
            } else {
                [self dataSourceDidError];
            }
        } else {
            [self dataSourceDidError];
        }
    }];
} 
```

我放了断点，它从 NSURL Connection 中被跳过。如果上面的代码有任何错误，请考虑

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:50:50.323

您的网址中有空格。确保网址正确。

# css - Scala Play 框架：编译后的 css 文件的重复映射

> ID：13203299
> 
> 赞同：13
> 
> 时间：2012-11-02T21:30:08.437
> 
> 标签：css, scala, playframework-2.0, less, sbt

我完成了[todolist 教程](http://www.playframework.org/documentation/2.0.4/ScalaTodoList)并尝试通过在 app/assets/stylesheets 中添加 main.less 样式表来扩展它。但是，当我尝试在浏览器中使用 main.less 中的任何规则或没有规则查看项目时，我收到此错误，浏览器很好地显示：

> 意外异常
> 
> RuntimeException：重复映射：/Users/franklinpearsall/Documents/Programming/play-2.0.4/todolist/target/scala-2.9.1/classes/public/stylesheets/main.css
> 
> 从
> 
> /Users/franklinpearsall/Documents/Programming/play-2.0.4/todolist/public/stylesheets/main.css
> 
> /Users/franklinpearsall/Documents/Programming/play-2.0.4/todolist/target/scala-2.9.1/resource_managed/main/public/stylesheets/main.css

一方面，target/scala-2.9.1/classes 中的 css 文件似乎很奇怪。为什么会这样？我用谷歌搜索，找不到任何相关的东西。任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-04T00:15:51.547

从 public/stylesheets 目录中删除 main.css。好像您在其他地方已经有一个 main.less 文件。

# c# - 为什么我不需要在 C# 的 ContentPlaceHolder 类中使用 new 关键字？

> ID：13203302
> 
> 赞同：1
> 
> 时间：2012-11-02T21:30:16.673
> 
> 标签：c#, asp.net, master-pages

在 ASP.NET 中，拥有 MasterPage 并使用 C#，我可以使用`ContentPlaceHolder`或不使用`new`关键字，并且此类的方法和属性的数量是相同的。

即，两者

```
ContentPlaceHolder ctph; 
```

和

```
ContentPlaceHolder ctph = new ContenPlanceHolder(); 
```

具有相同的方法和属性。我不明白为什么我可以在`ctph`没有 new 关键字的情况下使用该变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:34:47.150

```
ContentPlaceHolder ctph; 
```

`ctph`有价值`default(ContentPlaceHolder)`。对于引用类型，这将是`null`. 对于值类型，这将是一个所有字段默认初始化的有效对象。

`ContentPlaceHolder`是一个引用类型，所以，当你说：

> 具有相同的方法和属性。

嗯，是的，因为这些是由*type*定义的。您是通过 Intellisense 确定这一点吗？嗯……不要。尝试调用一个方法，看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:33:11.070

是的，但你可以在运行时做到这一点吗？

Intellisense（拼写？）是一个纯粹的编译时构造，它不知道您的第一个示例将在运行时为空并引发异常。它只是列出了基于元数据的方法和属性等。

# java - Java ArrayList 与循环中的对象

> ID：13203305
> 
> 赞同：1
> 
> 时间：2012-11-02T21:30:37.110
> 
> 标签：java, arraylist

`ArrayList`在循环中声明对象时如何知道对象的名称？我可以通过索引来获取它，但我不知道它的名称来定位/知道它是否在`ArrayList`.

```
import java.util.ArrayList;

public class Teste {

    public static void main(String[] args) {
        ArrayList<UserClasss> userList = new ArrayList<UserClasss>();

        for (int i = 0; i < 5; i++) {
            UserClasss user = new UserClasss();
            user.setName("name"+i);
            user.setAge((int)(Math.random()*80));
            userList.add(user);
        }
        for (UserClasss forUser:userList){
            System.out.println(forUser.getName());
            System.out.println(forUser.getAge());
        }

        //how can i know if contains it here?
        //userList.contains(user);
        //and how do i know the index of it?
        //userList.indexOf(user);

    }
}

class UserClasss {

    private String name;
    private int age;

    public void setName(String s){
        name = s;
    }
    public String getName(){
        return name;
    }
    public void setAge(int i){
        age = i;
    }
    public int getAge(){
        return age;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T21:33:31.960

要在 List 中找到您的用户类，您必须覆盖类中的 equals 和 hash code 方法`UserClasss`。

通过这样做， contains() 和 indexOf() 方法将能够在`Collection`.

PS eclipse 和其他一些 IDE 可以为您生成这些方法。

要添加的代码（由 eclipse 生成）：

```
@Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + age;
        result = prime * result + ((name == null) ? 0 : name.hashCode());
        return result;
    }
    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        UserClasss other = (UserClasss) obj;
        if (age != other.age)
            return false;
        if (name == null) {
            if (other.name != null)
                return false;
        } else if (!name.equals(other.name))
            return false;
        return true;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T21:36:20.027

你可以使用 contains() 和 indexOf()，但是你的 UserClass 应该有一个 equals() 方法

```
public boolean equals(Object obj) 
```

如果 obj 等于自身，则返回 true。在您的情况下，您应该比较名称。

```
public boolean equals(Object obj) {
   if (! (obj instanceof UserClass) {
      return false;
   }
   return this.name.equals((UserClass)obj).name );
} 
```

当然，您可以比较您想要的所有属性。

# c++ - 可变数量的线程c ++

> ID：13203307
> 
> 赞同：-1
> 
> 时间：2012-11-02T21:30:56.317
> 
> 标签：c++, pthreads

我需要创建一个 c++ 程序，该程序创建一个线程数 a，然后对于每个线程 n `(0<n<a)`，要求每个线程对从 0 到 n 的数字求和。因此，例如，如果 a=5，我需要创建 5 个线程，第三个线程需要从 0 添加到 3。我使用 main 函数和 while 循环来动态创建线程（使用 pthread_create，我必须使用 pthreads）。然后我有一个所有线程都运行的通用函数。我的问题是我不知道如何让每个线程知道它是哪个数字。那么，第三个线程如何知道它是第三个而不是第一个。

我确信这很简单，但我一直无法找到答案。

谢谢你的帮助！

ETK1220

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:36:22.630

创建可变数量的线程并不难。例如：

```
void * func(void *);

std::vector<pthread_t> threads(n);

for (std::vector<pthread_t>::iterator it = threads.begin(); it != threads.end(); ++it)
{
    int r = pthread_create(&*it, NULL, func, args);
} 
```

您需要添加错误检查和适当的回滚机制以防出现错误。有了这个`<thread>`库，它会简单得多，但你说你不能使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:33:25.937

好吧，如果你可以使用 std::threads 那么这很简单，你可以扩展它来完成你的工作

```
 std::vector<std::thead> threads;
 threads.push_back(&your_function, args...); 
```

# php - php回显格式

> ID：13203308
> 
> 赞同：-1
> 
> 时间：2012-11-02T21:31:08.343
> 
> 标签：php, html, format

有人可以帮我为 php echo 格式化这个 html 代码吗？

```
<a href="$title.php?iframe=true&width=100%&height=100%" rel="prettyPhoto[partners]></a> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:34:05.907

去阅读这个[http://php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

这可以满足您在 PHP 中的所有字符串格式化需求

这是格式化包含 PHP 变量和 html 的字符串的一种方法：

```
"<element id='{$variable}' class='{$array['key']}'>Some {$variableText} text</element>" 
```

另一种是像这样使用**heredoc语法**：

```
echo <<<STRING
<a href="{$variable}?query={$values['key']}">Some other 'quoted' material</a>
STRING; 
```

还有很多其他的，您可以通过上面的链接找到所有这些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T21:34:47.640

全部替换`"`为`\"`，然后`"`在任一侧替换为 a 。

而且，[`printf()`](http://ca2.php.net/manual/en/function.printf.php)学习起来很方便。

```
printf('<a href="%s.php?iframe=true&width=100%&height=100%" rel="prettyPhoto[partners]></a>', $title); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T21:39:58.523

只需一次回显完整的 HTML，或者您可以破坏它。对于 PHP 中的完整 HTML 回显：

```
<?php echo "<a href='$title.php?iframe=true&width=100%&height=100%' rel='prettyPhoto[partners]'></a>"; ?> 
```

或者您可以：

```
<a href="<?php echo $title;?>.php?iframe=true&width=100%&height=100%" rel="prettyPhoto[partners]"></a> 
```

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-02T21:36:08.683

使用`printf()`，卢克。不要让你的代码看起来很糟糕，因为这些无意义的`\"` `"` `'`意大利面条乱七八糟：

```
printf( '<a href="%s.php?iframe=true&width=100%%&height=100%%" rel="prettyPhoto[partners]></a>', $title); 
```

或者（为了避免需要逃避`%`），使用伪模板/占位符方法（不是最佳性能有效的代码，但我怀疑你现在需要每毫秒都打扰）：

```
echo str_replace( '#PAGE", $title, '<a href="#PAGE#.php?iframe=true&width=100%&height=100%" rel="prettyPhoto[partners]></a>'); 
```

但是如果你必须使用`echo()`，仍然尽量避免说意大利面条：

```
echo '<a href="' . $title . '.php?iframe=true&width=100%&height=100%" rel="prettyPhoto[partners]></a>'; 
```

或（从可读性的角度来看最糟糕的解决方案）：

```
<a href="<?php echo $title ?>'.php?iframe=true&width=100%&height=100%" rel="prettyPhoto[partners]></a> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-02T21:34:57.187

```
<a href="<?php echo $title ?>.php?iframe=true&width=100%&height=100%" rel="prettyPhoto[partners]></a> 
```

# python - 安装 pinax(0.9a) 包含要求的不同选项有哪些？

> ID：13203315
> 
> 赞同：0
> 
> 时间：2012-11-02T21:31:41.387
> 
> 标签：python, django, eclipse, pinax

我尝试了经典的方式，`pip install Pinax`然后安装需求base.txt，但这不起作用？

安装工作 pinax(0.9) 基础项目包含要求的其他选项是什么？

**更新：**

那是以“正确”方式安装它的例外......

```
Created project mysite
Installing project requirements...
Traceback (most recent call last):
  File "C:\Users\Desktop\Django\lol\mysite-env\Scripts\pinax-admin-script
.py", line 8, in <module>
    load_entry_point('Pinax==0.9a2', 'console_scripts', 'pinax-admin')()
  File "C:\Users\Desktop\Django\lol\mysite-env\lib\site-packages\pinax\co
re\management\__init__.py", line 105, in execute_from_command_line
    runner.execute()
  File "C:\Users\Desktop\Django\lol\mysite-env\lib\site-packages\pinax\co
re\management\__init__.py", line 94, in execute
    self.loader.load(command).run_from_argv(argv)
  File "C:\Users\Desktop\Django\lol\mysite-env\lib\site-packages\pinax\co
re\management\base.py", line 45, in run_from_argv
    self.handle(*args, **options.__dict__)
  File "C:\Users\Desktop\Django\lol\mysite-env\lib\site-packages\pinax\co
re\management\commands\setup_project.py", line 66, in handle
    self.setup_project(args[0], options["base"], options)
  File "C:\Users\Desktop\Django\lol\mysite-env\lib\site-packages\pinax\co
re\management\commands\setup_project.py", line 134, in setup_project
    installer.install_reqs(not options["allow_no_virtualenv"])
  File "C:\Users\Desktop\Django\lol\mysite-env\lib\site-packages\pinax\co
re\management\commands\setup_project.py", line 207, in install_reqs
    pip.call_subprocess([
AttributeError: 'module' object has no attribute 'call_subprocess' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T15:37:58.953

您不再安装 Pinax。

在 Django 中的项目模板之前，Pinax 通过捆绑的启动项目提供此功能。

现在要获得 pinax 入门项目，您可以执行以下操作：

```
pip install Django
django-admin.py startproject --template=https://github.com/pinax/pinax-project-account/zipball/master <project_name> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T02:21:29.983

请参考[这个现有的问题](https://stackoverflow.com/questions/12250317/python-pinax-django-windows-attributeerror-module-object-has-no-attribute)。根据[Ilja Sucharev](https://stackoverflow.com/users/1687173/ilja-sucharev)的说法，这是由于更新版本的 pip 造成的。因此，您需要将 pip.call_subprocess 更改为 pip.util.call_subprocess 到您的 virtualenv_project/lib/site-packages/pinax/core/management/commands/setup_project.py

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-17T05:58:39.137

您可以使用 Pip 或手动下载和解包 Pinax。

```
$ virtualenv mysite-env
$ source mysite-env/bin/activate
(mysite-env)$ pip install Pinax 
```

或者

您可以从 pypi 下载项目并手动安装。

由于您有新版本的 Pip，可能会出现错误。该功能`pip.call_subprocess`已移至`pip.util.call_subprocess`. 请参阅：[https](https://github.com/pypa/pip/pull/464) ://github.com/pypa/pip/pull/464 。`C:\virtualenvs\mysite\lib\site-packages\pinax\core\management\commands\setup_project.py`只需在执行 pinax-admin 之前替换字符串；例如，`(mysite-env)$ pinax-admin setup_project mysite`

# css - 针对 IE 10 专门使用 css？

> ID：13203317
> 
> 赞同：0
> 
> 时间：2012-11-02T21:32:03.803
> 
> 标签：css, internet-explorer, cross-browser, css-selectors

> **可能重复：**
> [是否有针对 IE10 的特定 CSS 选择器？](https://stackoverflow.com/questions/7321093/are-there-specific-css-selectors-targeting-ie10)

我有我想要在 IE8、IE9、Chrome、FF、Safari 和 Opera 中工作的东西。但是无论出于何种原因，我遇到的负边距问题都无法在 ie 10 中运行，有没有办法只针对 IE 10？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:37:57.060

是的，但如果它是 IE10 错误，我会感到惊讶——很可能是您编写的错误。也许你假设一个没有安装的字体，或者没有意识到你没有预料到的东西有一个默认的边距。

IE10 不再支持条件注释（[http://blogs.msdn.com/b/ie/archive/2011/07/06/html5-parsing-in-ie10.aspx](http://blogs.msdn.com/b/ie/archive/2011/07/06/html5-parsing-in-ie10.aspx)），所以这不是一个选项（这是一件好事 - 标记应该在任何地方都相同）。

IE10 的用户代理是以下方面的变体：

```
Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0) 
```

（[http://blogs.msdn.com/b/ie/archive/2012/07/12/ie10-user-agent-string-update.aspx](http://blogs.msdn.com/b/ie/archive/2012/07/12/ie10-user-agent-string-update.aspx)）

因此，您可以使用 PHP 或其他任何东西来检测它，然后将一个类添加到您的`html`标签中以在您的 CSS 中使用。

但是不要，除非你绝对必须——如果它在 IE10 中不起作用，有什么办法阻止它在 Chrome 28 或 Firefox 30 中出现问题？

# javascript - 使用 javascript 删除 Google 地图上的众多标记之一

> ID：13203323
> 
> 赞同：3
> 
> 时间：2012-11-02T21:32:22.120
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers

我目前使用下面的代码向地图添加标记。我希望能够通过推送 javascript 命令随时删除任何一个。这可能吗？

前任。放置 5 个标记.. 删除第 3 个，同时保留其他 4 个。

```
$('#map').show();
var geocoder = new google.maps.Geocoder();
var address = document.getElementById("address").value +", " + document.getElementById("city").value;

geocoder.geocode( { 'address': address}, function(results, status) {
if (status == google.maps.GeocoderStatus.OK) {
    var lat = results[0].geometry.location.lat();
    var lng = results[0].geometry.location.lng();
    locationsall[counter] = new Array();
    locationsall[counter][0] = address;
    locationsall[counter][1] = lat;
    locationsall[counter][2] = lng;
    var mapOptions = {
        zoom: 13,
        center: new google.maps.LatLng(lat, lng),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }

var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
var marker, i;
for (i = 0; i < locationsall.length; i++) {  
    marker = new google.maps.Marker({
    position: new google.maps.LatLng(locationsall[i][1], locationsall[i][2]),
    map: map,
    title: 'You are here!'
    });
}
counter++;
} else {
    alert("Geocode was not successful for the following reason: " + status);
} 
```

}); }

编辑1：

```
 }).text("Remove").click(function() {
    var index2 = $tr2.index();
    $("#locationDeals input[type='hidden']").each(function() {
        this.name = this.name.replace(/\[(\d+)\]/, function(str2, number2) {
          return "[" + (+number2 > index2 - 1 ? number2 - 1 : number2) + "]";
        });
    });
    //locationsall[locations.indexOf(location)].setMap(null);
    $tr2.remove();
    locations.splice(locations.indexOf(location), 1);
    return false;
        }).appendTo($tdRemoveRow2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:13:34.843

在您`for loop`定义的之外`Array`，它将包含所有添加的标记。例如`allMarkers = []`

创建标记`for loop`后，将其推入所述阵列中。例如`allMarkers.push(marker)`

当您要删除第一个标记：`allMarkers[0].setMap(null)`或第三个标记时：`allMarkers[2].setMap(null)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T22:16:38.163

是的，这是可能的。谷歌地图文档完全涵盖了这一点，包括代码示例等。本质上，标记是覆盖而不是地图本身。您可以将这些叠加层放入一个数组中，然后使用`setMap()`to null 来隐藏。

完整的文档[在这里](https://developers.google.com/maps/documentation/javascript/overlays#Markers)。

# ruby - 了解 gem 规范版本

> ID：13203326
> 
> 赞同：2
> 
> 时间：2012-11-02T21:32:38.327
> 
> 标签：ruby, rubygems, gem, dependencies

我正在使用 compass ruby​​ gem（版本 0.7.11），当我运行时`gem spec compass`，部分输出是：

```
dependencies:
- !ruby/object:Gem::Dependency
  name: sass
  requirement: !ruby/object:Gem::Requirement
    none: false
    requirements:
    - - ~>
      - !ruby/object:Gem::Version
        version: '3.1'
  type: :runtime
  prerelease: false
  version_requirements: !ruby/object:Gem::Requirement
    none: false
    requirements:
    - - ~>
      - !ruby/object:Gem::Version
        version: '3.1' 
```

当我运行`gem install compass -v 0.7.11`它时，它确实安装了正确版本的指南针，但它正在使用 sass 3.2。我认为`~>`它将保持在 3.1.x 范围内。有人可以解释发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:20:12.567

杰夫，

该语法`~>`显示了一个丢弃最小版本数字的依赖项，因此`~> 3.1`意味着您可以将每个版本都提高到`4.0`.

请注意，最后一位数字很重要。假设您编写`~> 3.1.0`，在这种情况下，您将获得每个版本`3.2.0`。

`~>`请在(aka `twiddle-wakka`) [here](http://guides.rubygems.org/patterns/)上查找其他一些想法。

# javascript - 从回调中访问属性

> ID：13203327
> 
> 赞同：0
> 
> 时间：2012-11-02T21:32:39.827
> 
> 标签：javascript, callback

我正在根据我在此处找到的解决方案将图像加载到内存中，这很好，但由于它在回调中，因此属性宽度和高度在它之外是未定义的。

```
var originalWidth, originalHeight;
$("<img/>") // Make in memory copy of image to avoid css issues
    .attr("src", $(img).attr("src"))
    .load(function() {
        originalWidth = this.width;   // Note: $(this).width() will not
        originalHeight = this.height; // work for in memory images.
    });
console.log(originalWidth); // undefined obviously since `this` is only accessible within `load`s callback. 
```

我想也许把它放在一个像这样的对象中：

```
var originalWidth, originalHeight;
var imgDimensions = {};
$("<img/>") // Make in memory copy of image to avoid css issues
    .attr("src", $(img).attr("src"))
    .load(function() {
        imgDimensions.originalWidth = this.width;   // Note: $(this).width() will not
        imgDimensions.originalHeight = this.height; // work for in memory images.
    });
console.log(imgDimensions['originalWidth']); // undefined also 
```

如何从 load() 中返回这些属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:35:46.047

在`console.log`加载函数触发之前执行，因此`originalWidth`尚未更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T21:41:07.153

由于您不知道也无法控制回调何时运行，因此您无法保证该值可用于您的日志调用。

根据您要对维度执行的操作，一种解决方案可能是将 onload 事件处理程序添加到您的 img 标记，以便您可以在项目实际加载后访问这些值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T22:47:36.013

如果你`console.log()`从回调中调用，你应该得到一个有用的结果：

```
var originalWidth, originalHeight;
var imgDimensions = {};
$("<img/>") // Make in memory copy of image to avoid css issues
    .attr("src", $(img).attr("src"))
    .load(function() {
        imgDimensions.originalWidth = this.width;   // Note: $(this).width() will not
        imgDimensions.originalHeight = this.height; // work for in memory images.
        console.log(imgDimensions);
    }); 
```

正如其他人所解释的，`.load()`回调将在未来某个未指定的时间执行。在此之前尝试使用 imgDimensions 变量是没有意义的。

# wordpress - Wordpress 使用 functions.php 仅在特定页面模板上运行功能

> ID：13203329
> 
> 赞同：1
> 
> 时间：2012-11-02T21:33:10.167
> 
> 标签：wordpress, wordpress-theming

我有以下代码来检查当前使用的文件是否是`tmp_home_page.php`，但是当我这样做时`echo $template_file;`它显示`functions.php`

```
 add_action('template_redirect', 'are_we_home_yet', 10);
    function are_we_home_yet(){
            global $template;
            $template_file = basename((__FILE__).$template);
            if ( is_home() && $template_file == 'tmp_home_page.php' ) {

            // do stuff

            }
     } 
```

**知道如何确保我`do stuff`的仅在主页上运行并且在使用给定模板时？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T00:02:11.953

你在这方面太努力了，有一个 wordpress 功能。 [`is_page_template()`](https://developer.wordpress.org/reference/functions/is_page_template/)

```
if( is_page_template( 'tmp_home_page.php' ) && is_home() ){
    // Do Stuff
} 
```

此外，在尝试确定用户是否正在查看WordPress 网站的**首页/首页**[`is_front_page()`](https://developer.wordpress.org/reference/functions/is_front_page/)时，它通常是一个更好的选择。[您可以在此处](https://wordpress.stackexchange.com/questions/30385/when-to-use-is-home-vs-is-front-page)查看有关该主题的更多信息。[`is_home()`](https://developer.wordpress.org/reference/functions/is_home/)

# assembly - 代码写入 1，但不写入标准输出？

> ID：13203332
> 
> 赞同：0
> 
> 时间：2012-11-02T21:33:12.163
> 
> 标签：assembly, linker, sparc

我正在尝试在 sparc32 上运行一些简单的汇编代码，但它不会写入标准输出，无论是 ta 0x00 还是 ta 0x08，都会出现问题：

```
# as -s gah.s -o gah.o
# ld gah.o -o gah -lc
# ./gah
#
# truss ./gah
execve("./gah", 0xEFFFFE28, 0xEFFFFE30)  argc = 1
[..]
open("/usr/platform/SUNW,SPARCstation-20/lib/libc_psr.so.1", O_RDONLY) Err#2 ENOENT
close(3)                                        = 0
write(1, " H e l l o ,   W o r l d".., 14)      = 14
_exit(0)
# file gah
gah:            ELF 32-bit MSB executable SPARC Version 1, dynamically linked, not stripped
# echo foo > /dev/fd/1
foo
# uname -a
SunOS foobar 5.6 Generic_105181-05 sun4m sparc SUNW,SPARCstation-20
gcc version 2.95.2 19991024 (release) 
```

这可能是一些与链接器相关的问题吗？我似乎在 truss 输出中看到了一个写入。

输出：[http ://sprunge.us/hMXV](http://sprunge.us/hMXV)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:10:35.360

如果您[深入了解](http://en.wikipedia.org/wiki/Stdout#Standard_output_.28stdout.29)，您会发现这`stdout`只是一个标准文件描述符，它指的是文件描述符编号`1`。

换句话说，当您写入时`stdout`，您会看到一个操作系统调用，该调用将写入指向文件描述符`1`。

# ruby-on-rails - 将 Node.js 设置为 $PATH

> ID：13203335
> 
> 赞同：21
> 
> 时间：2012-11-02T21:33:22.850
> 
> 标签：ruby-on-rails, node.js, ubuntu, deployment, webserver

我正在研究 RoR，我正在将此虚拟机设置为“部署”RoR，但我卡在了 Node.js 安装中。

我使用的是 Ubuntu 12.04，并按照本指南的此步骤操作：

[http://railsapps.github.com/installing-rails.html](http://railsapps.github.com/installing-rails.html)

> 从 Rails 3.1 开始，在 Ubuntu Linux 上进行开发就需要 JavaScript 运行时（Mac OS X 或 Windows 不需要）。在 Linux Ubuntu 上开发，最好安装 Node.js 服务器端 JavaScript 环境：
> 
> `$ sudo apt-get install nodejs`
> 
> 并将其设置在您的 $PATH 中。

“设置为我的 $PATH”是什么意思？

在过去的几个小时里，我一直在谷歌上搜索它，所有的解决方案都不同，针对不同的问题，我没有得到简单的答案。你能在这里给一点光吗？

谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-03T14:53:30.783

您不必担心，该`apt-get install`命令会为您完成。它将 nodejs 进程的路径（通常`/usr/bin/node`）添加到全局 $PATH 变量中。这可确保当您`node`在终端中键入时，它将启动 nodejs 进程。

如果由于某些奇怪的原因无法启动它，则必须手动将节点安装的路径添加到 $PATH。您可以通过编辑`~/.bashrc`文件并添加：

```
PATH=/usr/bin/node:$PATH 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-10-21T12:05:30.913

我一直在尝试安装`npm`，但它抱怨`node`不在路径中。有趣的是，`nodejs`是，但`node`不是。我最终解决了这个问题：

```
$ cd /usr/bin/
$ sudo ln -s nodejs node 
```

...符号链接`node`到`nodejs`. 现在`npm`安装没有投诉。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T21:46:50.410

根据您运行的 shell，答案可能会有所不同，但一个好的起点可能是[http://www.troubleshooters.com/linux/prepostpath.htm](http://www.troubleshooters.com/linux/prepostpath.htm)

和[http://www.linuxjournal.com/article/3645](http://www.linuxjournal.com/article/3645)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-07T00:08:46.663

安装后我重新启动了 Ubuntu。这为我解决了这个问题。

# iphone - iphone MPMoviePlayerViewController CGContext 错误

> ID：13203336
> 
> 赞同：9
> 
> 时间：2012-11-02T21:33:22.943
> 
> 标签：iphone, xcode, cgcontext

我正在为 iPhone 编写一个应用程序，它将使用`MPMoviePlayerViewController`. 到目前为止，我已经让它播放电影，但是它在调试器中抛出了一些以`CGContext`. 我绞尽脑汁试图修复它。以下是我的代码的详细信息：

.h 文件：

```
#import <UIKit/UIKit.h>
#import <MediaPlayer/MediaPlayer.h>
@interface MovieViewController : UIViewController {
    MPMoviePlayerViewController *playerController;
}

-(IBAction) playMovie:(id)sender; 
```

.m 文件：

```
@interface MovieViewController ()
@end
@implementation

-(IBAction)playMovie:(id)sender {
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                     pathForResource:@"moviename" ofType:@"mp4"]];
playerController =  [[MPMoviePlayerViewController alloc]
                     initWithContentURL:url];
[self presentMoviePlayerViewControllerAnimated:playerController];
playerController.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
[playerController.moviePlayer play];
playerController = nil; 
} 
```

当我运行程序时，电影将播放，但是当代码执行该行时：`playerController = [[MPMoviePlayerViewController alloc] initWithContentURL:url];`出现以下错误：

```
<Error>: CGContextSaveGState: invalid context 0x0
<Error>: CGContextClipToRect: invalid context 0x0
<Error>: CGContextTranslateCTM: invalid context 0x0
<Error>: CGContextDrawShading: invalid context 0x0
<Error>: CGContextRestoreGState: invalid context 0x0 
```

我知道这`invalid context 0x0`意味着那些特定的变量没有值，但我不知道如何解决这个问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-03T03:15:31.233

I was having the same issue. Merely saying this:

```
MPMoviePlayerViewController* mpvc = 
    [[MPMoviePlayerViewController alloc] initWithContentURL: m]; 
```

was causing these `invalid context` error messages. The view controller's view (the fullscreen player) did appear when presented, and played the movie no problem; the only issue was these error messages, which I didn't want showing up in the console.

Taking a hint from Norman's solution, I simply wrapped the call in an artificial drawing context, like this:

```
UIGraphicsBeginImageContext(CGSizeMake(1,1));
MPMoviePlayerViewController* mpvc = 
    [[MPMoviePlayerViewController alloc] initWithContentURL: m];
UIGraphicsEndImageContext(); 
```

It's silly, but it works.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-18T20:50:32.787

我认为错误消息是 MPMoviePlayerViewController 中的错误

它们似乎并不致命，尽管我通过添加对 UIGraphicsBeginImageContext(self.view.frame.size); 的调用使它们消失了。在 readyPlayer() 和 viewDidLoad() 中。

我还在 dealloc() 中添加了 UIGraphicsEndImageContext() 来清理生成的上下文。

# notifications - Jenkins：构建固定通知

> ID：13203342
> 
> 赞同：0
> 
> 时间：2012-11-02T21:33:47.963
> 
> 标签：notifications, jenkins

我收到一封带有“Build # - 已修复！”的电子邮件。那么这是否意味着在失败之后构建最终成功构建？我对吗？我是詹金斯/哈德森的新手 :(

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T21:42:28.197

是的，这是 Jenkins 的默认行为；它会在每次构建失败时向您发送电子邮件，但只有在构建失败之前才会发送有关成功构建的电子邮件。请参阅[扩展电子邮件插件](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)的文档，这是大多数网站使用的。

# asp.net-mvc-4 - 在 MVC4 中可序列化？

> ID：13203343
> 
> 赞同：0
> 
> 时间：2012-11-02T21:33:50.600
> 
> 标签：asp.net-mvc-4

我`[Serializable]`在 MVC Futures 中使用 MVC3。它是否以另一种格式进入MVC4？如果我必须安装 MVC3 Futures 包，我只想确保我在 MVC4 中做正确的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T19:14:34.370

您指的是 Html.Serialize 功能吗？如果是这样，不，这没有进入 MVC4，你仍然需要 3 包。实际上很少有它进入 MVC4（不包括 Web API 和工具更改），仅限于真正的 async/await 和两个剃须刀更改、捆绑/缩小和稍微更好的集成。

# java - 在 java 中使用案例并需要有关 .hasNextInt() 的信息

> ID：13203344
> 
> 赞同：0
> 
> 时间：2012-11-02T21:34:01.447
> 
> 标签：java, int, case

所以到目前为止我的代码可以正常工作，但我有两个问题。此代码允许您输入月、日和年，并告诉您它有多少天。本质上它是一个闰年检查器，但包括每个月（无论出于何种原因）。

现在我知道使案例工作的唯一方法是使用数字，但我希望用户能够输入月份的实际名称作为输入，并且代码仍然知道将其带到哪个案例。当我尝试命名案例月份名称时，它说它无法识别该变量。所以这是我的第一个问题。

我的第二个问题是，如果用户尝试在“年份”部分输入不是整数的字符，我希望它给出错误消息。有人告诉我使用 .hasNextInt() 但我完全不确定它的功能或如何实现它。我在这里查看了其他人的代码，试图弄清楚它是如何使用的，但无济于事。这是我的代码，任何建议或指导将不胜感激。先感谢您！

```
public class MonthLength {
  public static void main(String[] args) {
    // Prompt the user to enter a month
    SimpleIO.prompt("Enter a month name: ");
    String userInput = SimpleIO.readLine();
    int month = Integer.parseInt(userInput);

    // Terminate program if month is not a proper month name
    if (month < 1 || month > 12) {
      System.out.println("Illegal month name; try again");
      return;
    }

    // Prompt the user to enter a year
    SimpleIO.prompt("Enter a year: ");
    userInput = SimpleIO.readLine();
    int year = Integer.parseInt(userInput);

    //Terminate program if year is not an integer
    if (year < 0) {
       System.out.println("Year cannot be negative; try again");
       return;
    }

    // Determine the number of days in the month
    int numberOfDays;
    switch (month) {
      case 2:  // February
               numberOfDays = 28;
               if (year % 4 == 0) {
                 numberOfDays = 29;
                 if (year % 100 == 0 && year % 400 != 0)
                   numberOfDays = 28;
               }
               break;

      case 4:  // April
      case 6:  // June
      case 9:  // September
      case 11: // November
               numberOfDays = 30;
               break;

      default: numberOfDays = 31;
               break;
    }

    // Display the number of days in the month
    System.out.println("There are " + numberOfDays +
                       " days in this month");
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:40:20.070

1.  对于您的第一个问题，您可以使用`enum` [如何为 Java 6 枚举实现 values()？](https://stackoverflow.com/questions/1163076/how-is-values-implemented-for-java-6-enums)

2.  对于第二个问题，您可以要求用户输入 a`String`并使用`Integer.parseInt(String)`将其转换为，`int`这样您就不必执行任何检查。希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:37:06.017

*以前的 java 7*版本不允许*String*作为*switch*中的参数。在 java 7 中，您可以将 String 作为参数传递给 switch。

你可以在这里使用枚举。

```
enum Months{
JAN,FEB,MAR,APR} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T21:42:46.347

Chaitanya10 详细说明了为什么您的第一个问题是这样的。如果您需要对字符串（早期的 java 版本）进行比较，则需要构建一个 if-else 块：

```
if (monthInput.toLower().equals("january") {
  month = 1;
} else if (monthInput.toLower().equals("february") {
  ....etc....
} 
```

对于您的第二个问题，我会将用户输入捕获为 a `String`，然后使用检查以确保它是他们输入的数字。创建一个这样的函数：

```
public boolean isNumeric(String input) {
  try {
    Integer.parseInt(input);
    return true;
  } catch (NumberFormatException numForEx) {
    return false;
  }
} 
```

如果返回 true，您可以安全地将 String 转换为整数：

```
year = Integer.parseInt( input ); 
```

# java - 如何为android中类的每个实例调用方法

> ID：13203345
> 
> 赞同：0
> 
> 时间：2012-11-02T21:34:01.417
> 
> 标签：java, class, methods

我想为我的一个类的每个实例调用一个方法，但不知道如何去做。

```
public class demostration{
    public void m(){

    }
}
demonstration d = new demonstration();
demonstration p = new demonstration(); 
```

如何调用方法 m 以便所有演示实例都运行该方法？也就是说，它与写作的效果相同

```
d.m();
p.m(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T21:38:07.623

每当您创建一个新实例时，将其放入某种类型的[可变数组](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)中。当您想调用每个实例的方法 m 时，只需[遍历](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)实例数组，在每个实例上调用 m 即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T21:42:04.703

就像其他人所说的那样，将实例放入 an`ArrayList`最有意义。你可以试试这个：

```
 demonstration a = new demonstration();
 demonstration b = new demonstration();
 demonstration c = new demonstration();

 ArrayList<demonstration> demos = new ArrayList<demonstration>();
 demos.add(a); 
 demos.add(b);
 demos.add(c);

 for(Demonstration d : demos) {

    d.m();

 } 
```

另外，从我的角度来看，这只是一件挑剔的事情：以大写字母开头的类名是一种很好的 Java 样式语法，因此 Demonstrations` 可能是一个更好的名称。只是我的意见：D

# c# - Visual Studio 中的“转到定义”仅显示非项目引用的元数据

> ID：13203346
> 
> 赞同：19
> 
> 时间：2012-11-02T21:34:03.740
> 
> 标签：c#, visual-studio-2010

我有一个 C# 项目，其中包含对 DLL 格式的程序集的引用。我有这些 DLL 文件的 PDB 信息，包含在同一个文件夹中。当我在引用的成员上按 F12 时，我想转到该成员的定义。相反，它给了我元数据，这当然是我不想要的。

当 VS 调试时，如果我单步进入该方法，它确实会转到源代码。但是，如果我在该方法上按 F12，它仍然会将我带到元数据。

这里有一个类似的问题，但它只适用于项目引用，接受的解决方案与我的问题无关。

[Visual Studio 中的“转到定义”仅显示元数据](https://stackoverflow.com/questions/837037/go-to-definition-in-visual-studio-only-brings-up-the-metadata)

总结一下：

*   引用的项目是一个 DLL
*   我有 PDB 信息
*   单步调试模式将我带到源代码
*   F12 将我带到元数据
*   我希望 F12 像调试一样将我带到源代码。

编辑：添加为“项目”不是一个选项，因为它会产生额外的复杂性，因为我们的解决方案文件引用了其他五个项目，这些项目都在单独的源代码控制存储库下。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T16:49:37.170

在 Visual Studio 中展开“引用”部分，选择对相关项目的引用（包含要 F12 进入的源代码的项目）右键单击它并选择“删除”。

然后通过右键单击 References 并选择 Add Reference 将引用添加回项目，在 Projects 选项卡下（如果您使用 VS 2012）选择（或浏览）要添加引用的项目，然后单击 OK 按钮.

这将重建引用，您将能够 F12 进入引用的项目源代码。您需要对解决方案中存在此问题的所有项目执行此操作。

我不知道为什么会发生这种情况，但至少问题的解决方案相当简单

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-25T08:14:17.940

如果您安装了 ReSharper，您应该调出 ReSharper 选项，然后查找`External Sources`. 您可以在此处指定相关选项：

![在此处输入图像描述](../Images/d1c3f9865ab8de18714ff3067c2d6b67.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-27T00:48:22.377

看来这个问题已经在 Visual Studio 2013 中解决了。当我使用 Go To Definition 时，将 PDB 信息与 DLL 放在同一个文件夹中会向我显示源代码。我没有安装反射器扩展。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-02T21:44:25.263

引用的 DLL 是您解决方案中的项目吗？我发现当我拥有项目的源代码并且它在我的解决方案中时，Visual Studio 能够更轻松地链接到此代码。（不显示元数据）。

此外，请务必在“参考”弹出窗口中通过“项目”添加参考。

当我遇到这个问题时，这通常是我所做的

希望这可以帮助！

PS。PDB 文件通常仅用于调试（本地和远程），不用于以您尝试使用它的方式读取源代码。（“转到定义”）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-03T00:01:05.260

此问题的一种解决方案是使用 .NET Reflector、VS 或 VSPro 版本。该程序将修改 Visual Studio 以提供所需的功能。

[http://www.reflector.net/](http://www.reflector.net/)

不幸的是，它的价格为 135 到 195 美元，这不是每个人都可以选择的。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-12-16T16:39:18.483

Add the reference as a project instead of ..\bin\Debug\referenceFile.dll

That solved my issue

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-10-17T12:47:12.227

我还使用添加引用作为项目，我的问题已经解决并且运行良好。实际上我很长一段时间都被困在这一点上，最后我解决了这个问题。

**参考 -> 添加参考 -> 解决方案 -> 项目 -> 选择参考**

[![在此处输入图像描述](../Images/a5659aa4bf24d76303248e218a6635dc.png)](https://i.stack.imgur.com/jX5L4.png)

# php - 在 PHP 的会话变量中添加变量？

> ID：13203358
> 
> 赞同：1
> 
> 时间：2012-11-02T21:35:00.760
> 
> 标签：php, session, variables, cookies

如何将变量添加到`$_SESSION`?

```
$product = 0;
$_SESSION['product_number'.$product.''] = true; 
```

它不工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T21:38:41.690

你需要确保你使用了[session_start()](http://www.php.net/session_start)；

## page1.php

```
<?php
session_start();

$product = 0;
$_SESSION['product_number'.$product] = true;

?> 
```

## page2.php

```
<?php
session_start();
$product = 0;
if ($_SESSION['product_number'.$product]) echo 'Session variable was set!';
else echo 'It was not!';
?> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T21:42:38.760

这可能对您有用：

```
<?
session_start();
$product = 0;
$_SESSION['product_number'] = $product;
?> 
```

# java - 无法作为调试机器人 junit 测试运行

> ID：13203360
> 
> 赞同：0
> 
> 时间：2012-11-02T21:35:18.013
> 
> 标签：java, eclipse, debugging, junit, robotium

我想这是重复的，[我可以运行 Robotium 测试但无法调试它，](https://stackoverflow.com/questions/11573833/i-can-run-robotium-test-but-cannot-debug-it)但没有有效的答案。

我有一个可以用robotium 测试的应用程序。（以 Android Junit Test 运行，测试运行良好）如果我尝试 Debug As Android Junit Test，应用程序无法启动，eclipse 似乎在启动测试时卡住了。

你能告诉我在调试模式下运行我的测试的步骤吗（我想调试测试，而不是应用程序）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:51:01.813

因此，要使其正常工作有两个要求：1.您需要在工作区中设置 AUT（被测应用程序）2.AUT 必须是 debuggable=true（清单文件）

我的错误是因为我只想调试测试，所以我认为我也不需要 AUT 项目。

# linux - 将 linux 编译的程序移植到 macOS 时获取未定义的符号

> ID：13203362
> 
> 赞同：1
> 
> 时间：2012-11-02T21:35:19.933
> 
> 标签：linux, macos, porting, undefined-symbol

我正在尝试在 MAC OSX 上编译一个程序，该程序最初是在 Linux 操作系统上编写的。这是一个包含多个 makefile 的大程序。我已经研究了几个星期，现在似乎无法弄清楚为什么会导致未定义的符号错误。有一个总体 Makefile 调用其他 makefile，以便编译顺序正确。

编译时，它会创建静态库以及多个应用程序。因为这家伙太大了，程序首先创建了这些静态库（.a 文件）。然后，当它专门为应用程序编译源代码时，它会链接静态库。（希望这不会太令人困惑）。

我可以很好地完成静态库的构建，但是一旦我到达构建应用程序的地步，我就会收到大量未定义的符号错误告诉我，例如

未定义符号：“_bagUpdateOptSurface”，引用自：libdbdbv6.a(dbv_bag.o) 中的 _dbv_bag

当我用 nm 检查 dbv_bag.o 时，我得到了很多未使用标题 U 定义的函数。

我可以用 nm 追溯这个函数并发现......

bagUpdateOptSurface.c -->bagUpdateOptSurface.o -->libbag.a --->dbv_bag.c --->dbv_bag.o --->libdbdv6.a --->应用程序

该函数是通过带有标题 T 的静态库 libbag.a 定义的，但目标文件 dbb_bag.o 将其与 U 定义为未定义。在那里的某个地方信息丢失了，我似乎无法理解为什么。

如果那里有更多经验将程序移植到mac的人可以帮助了解正在发生的事情，我将非常感激。欢迎任何想法对或错。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T12:41:05.217

只是出于好奇，您是否尝试过使用**gcc**或**g++**而不是**ld**进行链接？通常这些大型项目使用带有定义变量的 makefile，你可以说**make LD=gcc target**或类似的东西。

只要有“T”版本，很多“U”标志就无关紧要。

您可以尝试制作一个简单的示例。只需几个简短的 1 或 2 行源文件，编译为 .o（使用 -c 标志），放入库（ar -rv），看看能否重现问题。一旦简化，答案通常更容易找到。

如果不是链接器标志问题，则可能是链接行上的排序问题（依赖地狱）。或者你可能只是在某个地方错过了一个图书馆。

我想我还应该询问您使用的是什么版本的 gcc/g++，以及什么版本的 OSX...

另一种可能性是使用 g++ 意外重载函数，以及可能与实现不同的标头签名。

您可以尝试删除所有 .o 和库文件并重新编译世界（一切）。有时 .o 文件（或库）从源文件/头文件中过时，并导致非常多的痛苦和痛苦......

* * *

* * *

回复评论：

正如上面提到的，虽然被埋没了：通常这样的问题是指命令行上的依赖地狱和链接排序。至少他们曾经如此。我不确定是否仍然如此。

您可以复制目录，尽可能多地删除代码（二进制搜索调试），做一个简单的例子，问题通常会变得更容易识别。

使用 gcc/g++ 链接：您可以通过*gcc -c将**file.c*编译为*file.o*，然后通过*ld将**file.o*链接到可执行文件中。或者您可以执行*gcc file.o -o file*调用*gcc* ，然后使用适当的参数调用*ld 。*如果您不太确定需要的库或需要传递给*ld*的标志，有时它会很有用。

 ***Gcc 4.2.1 和 OSX 10.6.8 应该不是问题。我只是好奇你是否使用了一些真正过时的东西，因为旧的编译器有一些有趣的缺点/问题。

虽然，现在我想起来了，你用什么编译器在 Linux 下编译？您可能在 OSX 下使用较新/较旧的 gcc/g++ 编译器，而您的问题源于对编译器的“改进”。

重载函数：gcc/g++ 经常根据文件名后缀来判断 C vs C++ 编译。OSX 通常有一个不区分大小写的文件系统。所以*gcc* file.c和*g++ file.C*都可以工作，无论文件是命名为*file.c*还是*file.C*。但是，C 和 C++ 语言之间的差异可能会咬你一口。例如，如果您定义*了 foo(signed int)*，则类型信息将被合并（损坏）到 C++ 编译下的编译函数名称中。随后从 C 代码调用它不一定有效（链接正确）。

类似地，如果头文件说*foo(short int)*而源代码说*foo(long int)*你可能会遇到有趣的问题。***

# android - 如何使用 Intent 在 Android 中发起 Google Hangout？

> ID：13203364
> 
> 赞同：1
> 
> 时间：2012-11-02T21:35:22.990
> 
> 标签：android, android-intent, google-plus

我想制作一个简单的应用程序，可以使用选定的 google+ 圈子发起 google+ 环聊。有没有办法调用开始谷歌视频群聊的意图？

# android - 读取包含 åäö 的资产中的文本文件

> ID：13203365
> 
> 赞同：1
> 
> 时间：2012-11-02T21:35:31.820
> 
> 标签：android, utf-8, inputstream, assets

我在从资产文件夹中的文件中读取文本时遇到一些问题。
它根本不想显示 åäö，我使用了在不同 StackOverflow 帖子中找到的这段代码，但它不起作用。我只得到“？” 相反，

这是代码：

```
public void loadQuestions() throws IOException {
    atStart = false;

    InputStreamReader reader = new InputStreamReader(getAssets().open("questions.txt"), "UTF-8");
    BufferedReader br = new BufferedReader(reader); 
    String line = br.readLine();
    while (line != null) {
        Log.d("TAG", line);
        questions.add(line);
        line = br.readLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T23:32:49.300

我自己发现了问题。
当我保存我的文本文件时，我必须使用 UTF-8 编码而不是 ANSI 来保存它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-17T04:05:51.520

使用 ISO-8859-15，如下所示： 它的工作原理：

```
InputStreamReader reader = new 
InputStreamReader(getAssets().open("questions.txt"), "ISO-8859-15"); 
```

# regex - Vim 正则表达式范围与当前光标位置

> ID：13203372
> 
> 赞同：2
> 
> 时间：2012-11-02T21:35:58.717
> 
> 标签：regex, vim, range, substitution

作为替代，当前光标位置到文件末尾的正确范围格式是什么？我相信光标是`.`，文件结尾是`$`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T21:41:41.267

对不起，如果我误解了，但如果你想从当前行到文件末尾进行替换，你可以这样做：

```
:.,$ s/original/replace/g 
```

正如@PeterRincker 提到的，当前行可以被认为是隐含的，这意味着您也可以使用：

```
:,$ s/original/replace/g 
```

达到同样的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T21:46:32.593

你已经知道了正确的术语，并且有了正确的想法......你为什么不直接查阅内置帮助；真是太棒了。

```
:help :range 
```

或`:help :s`将引导您`:help [range]`。

# google-maps - Google maps AS3 API：如何移动位置控件？

> ID：13203380
> 
> 赞同：0
> 
> 时间：2012-11-02T21:36:29.347
> 
> 标签：google-maps, controls, move

如何使用 AS3 api 在 Flash 谷歌地图中移动 positionControl？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:36:29.347

```
map.clearControls();

var positionControlOptions:PositionControlOptions = new PositionControlOptions({buttonSize: new Point(17, 17),buttonStyle: new ButtonStyle({}),buttonSpacing: new Point(4, 4),position: new ControlPosition(ControlPosition.ANCHOR_BOTTOM_LEFT, 10,30)});

map.addControl(new PositionControl(positionControlOptions)); 
```

# java - 加法和系列

> ID：13203381
> 
> 赞同：0
> 
> 时间：2012-11-02T21:36:30.290
> 
> 标签：java, for-loop, int, if-statement

```
import java.util.Scanner;
public class Zad01 {

public static void main(String[] args) {

  int [] n;  n = new int [9]; //install

  n[0] = 1;
  n[1] = 3;
  n[2] = 5;
  n[3] = 3;
  n[4] = 4;    //Grades
  n[5] = 2;
  n[6] = 2;
  n[7] = 3;
  n[8] = 3;

  int cnt;
  System.out.println("Grades:");
  for(cnt = 0;n.length > cnt;cnt++)
  {

    System.out.println(n[cnt]);     

    if()
    {

    }
    else
    {

     System.out.println("Error");

    }

   }              
  }     
} 
```

我不确定要输入什么（如果）。基本上我需要做的是从（n）系列中取出所有数字，将它们相加，然后除以 9。我不知道该怎么做一行...任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:38:02.690

```
double sum = 0;

for(int c : n)
     sum += c;

double average = sum / n.length; 
```

# ruby-on-rails - 调用控制器并重新加载部分

> ID：13203383
> 
> 赞同：0
> 
> 时间：2012-11-02T21:36:40.023
> 
> 标签：ruby-on-rails, renderpartial

我有一个呈现多个部分的页面，包括一个需要一段时间才能启动的 Flash div。

我有一个按钮，我想重新点击控制器，拉下任何新数据，然后重新加载页面中除 Flash div 之外的所有部分。

我研究了 rjs，但您似乎需要添加另一个路由和控制器方法来完成此操作。有没有办法将所有逻辑包含在同一页面中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:51:00.860

你应该可以用 jQuery 做到这一点。

单击链接时，通过 ajax 获取整个页面，然后从获取的 HTML 中替换所有元素（您需要为要替换的所有内容提供 ID），但 Flash div 除外。

# .net - 当许多相似但不同的类需要许多相似但不同的依赖项时，我如何最好地实现依赖注入？

> ID：13203385
> 
> 赞同：3
> 
> 时间：2012-11-02T21:36:44.410
> 
> 标签：.net, dependency-injection, mvp

我正在使用 MVP 模式的 Visual Studio .NET 4.0 中开发一个 Windows 应用程序，并且我正在尝试在整个应用程序中学习和应用依赖注入原则。但我无法理解如何最好地处理特定情况。我提前为冗长的解释道歉，但我不知道我是否可以足够具体。

该应用程序是用于许多不同类型记录的通用记录保存应用程序，其中一些彼此相关，而另一些则与其他记录无关。我们使用的每种不同的记录类型在应用程序中构成了一个独特的“功能”。因此，应用程序的启动屏幕本质上是一个开关板，他们可以从中选择他们想要导航到的功能。

当他们进行选择时，该功能的窗口（视图）将打开，并且可以从该窗口执行与该功能相关的各种操作。大多数功能（例如客户、订单）都有一些用户可以执行的通用操作（创建新记录、打开现有记录、保存更改、打印等）。然而，有些具有特定于该功能的操作（例如，特定于订单功能的验证操作）。我的问题在于弄清楚如何在每个功能中执行操作。

由于我使用的是 MVP，因此功能窗口有一个演示者，当用户启动该功能的任何操作时，该演示者会做出响应。但是由于我想遵循单一职责原则，我不希望演示者成为上帝类，并且实际上知道如何创建记录、保存、打印等。所以我的想法是定义单独的类来处理每个操作，如在具有 .Create() 方法的 ICreateOrders 实现、具有 .Save() 方法的 ISaveOrders 实现等方面。只是为了给它们命名，我将它们称为“解析器”，因为它们实际上解决了请求使该操作发生。这些常见的解析器中的一些可能具有基本实现（例如基本 FeatureSave 类），因为大部分代码在特性之间是相似的，但是如果需要，每个功能都需要能够具有特定的实现。这种方法提出了几个问题。

首先，我希望这些操作能够从应用程序中的其他位置启动，而不仅仅是该功能的窗口。例如，除了只能从“订单”功能窗口中打开订单记录外，我还希望能够从“客户”功能中选择“查看订单”并自动打开和显示该客户的订单记录。为了实现代码重用，我想使用相同的 IOpenOrders 实现来完成这项工作，而不管请求是从应用程序中的哪个位置发起的。因此，简单地将所需的解析器嵌入到 Orders 窗口的演示者中似乎不是一种选择。

所以我的想法是创建一个包含 Feature 对象集合的 FeatureService 类。在应用程序启动时，我会从数据库中获取对登录用户有效的所有功能的列表，然后我会遍历该列表并为每个功能创建一个 Feature 对象并将其添加到 FeatureService 的集合中。然后，当我需要从另一个功能中启动一个操作时，我可以通过将 FeatureService 对象注入源类，从中获取目标功能，然后使用它来执行操作来实现。但我也不希望 Feature 类成为 God 类，所以这只是将所有单独的解析器从 Orders 演示者移动到 Feature 类。

但要做到这一点，Feature 对象必须注入它可能需要的所有解析器，而不知道用户是否会执行这些操作。对于一些更复杂的功能，这可能是 20 或 30 个不同的解析器被注入，这看起来像是构造函数注入滥用。虽然这会阻止 Feature 对象成为上帝类，因为它只是将每个操作传递给其注入的解析器，这似乎是错误的。当一个对象成为这样的“上帝协调者”时，这是正确的用法吗？

我的另一个问题是关于这些物体的体积。对于某些客户，可能有 50 个或更多单独的功能可用（毫无疑问，随着时间的推移还会有更多功能）。因此，当我在启动时创建这些功能对象并且我的容器将所有这些解析器依赖项注入每个对象时，我正在创建数百个对象（例如，40 个功能 X 每个功能 20 个解析器），无论我是否曾经访问过其中一些功能或不是。一个典型的用户会话可能只涉及到一些功能，所以像这样在启动时创建这么多对象似乎很浪费。我可以放弃并让 Feature 对象在内部执行 ServiceLocation 以获取其解析器，但如果有更好的方法，我想使用它。

我不知道从这里去哪里。我试图查找并找到这方面的示例和信息，但我不知道我是否知道足以知道要搜索什么。任何人都可以提供的任何指导或见解将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T10:37:02.373

如果我理解正确，您尝试使用`ICreateOrders`and构建的`ISaveOrders`是[Repository 模式](http://martinfowler.com/eaaCatalog/repository.html)。

通常，存储库可能如下所示：

```
public interface IRepository<TEntity>
{
    TEntity GetByKey(int key);

    TEntity CreateNew();

    void Save(TEntity entity);

    void Delete(TEntity entity);
} 
```

> 但要做到这一点，Feature 对象必须注入它可能需要的所有解析器，而不知道用户是否会执行这些操作。对于一些更复杂的功能，这可能是 20 或 30 个不同的解析器被注入，这看起来像是构造函数注入滥用。

有一种将存储库组合在一起的模式。它被称为[工作单元模式](http://martinfowler.com/eaaCatalog/unitOfWork.html)。

工作单元使用业务事务并协调更改的写入，并可能允许访问它所拥有的存储库。

通常，当消费者需要许多存储库时，您会注入一个`IUnitOfWork`。但这只是将存储库注入工作单元的问题。这个问题可以通过将工作单元实现为工厂，或者将存储库工厂注入到工作单元中来解决：

```
public interface IRepositoryFactory
{
     IRepository<TEntity> CreateRepository<TEntity>();
} 
```

创建一个实现`IRepositoryFactory`将是微不足道的，因为这将直接映射到您的 DI 容器：

```
private sealed class FrameworkSpecificRepositoryFactory
    : IRepositoryFactory
{
     private readonly Container container;

     public FrameworkSpecificRepositoryFactory(Container container)
     {
         this.container = container;
     }

     public IRepository<TEntity> CreateRepository<TEntity>()
     {
         return this.container.GetInstance<IRepository<TEntity>>();
     }
} 
```

此实现直接使用 DI 容器。它看起来像是[Service Locator](http://en.wikipedia.org/wiki/Service_locator_pattern) [反模式](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)的一种形式，但这取决于此类所在的位置。如果此实现是您的[Composition Root](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)的一部分，在这种情况下，此实现是一个[基础设施组件](http://blog.ploeh.dk/2011/08/25/ServiceLocatorRolesVsMechanics.aspx)，在这种情况下它很好。诀窍是将任何业务逻辑排除在您的基础设施组件之外。

ps下次尽量缩短你的问题。较短的问题更有可能得到回答。

# google-maps-api-3 - 标记簇样式

> ID：13203388
> 
> 赞同：0
> 
> 时间：2012-11-02T21:36:55.783
> 
> 标签：google-maps-api-3, google-maps-markers, markerclusterer

有没有办法可以更改应用于标记集群的样式？我知道默认值是基于集群的大小，我想改变它。

背景：我有几个颜色的计算机可用性标记，红色=离线，绿色=可用，黄色=不可用。我可以通过使用 setCalculator 函数来更改集群中的数字，并通过计算图标设置为绿色的标记数来设置数字。有没有办法做到这一点，如果集群中有这么多绿色标记，我可以这样改变集群颜色？还有一种方法可以根据缩放级别进行更改吗？

IE：默认缩放级别

```
if #avail < 2 => set red
if 2 < #avail < 5 => set yellow
if #avail > 5 => set green 
```

我试过这个：

```
markerClusterer.setCalculator(function (markers, numStyles) {
      var index = 0;
      var count = markers.length;
    var avail = 0;
    for (var i=0;i<count;i++){
      if (markers[i].icon == "icons/available.png"){
          avail++;
        }
    }

    switch(true) {//change index based on number of available computers
        case (avail == 0)://red
            index = 3;
            break;
        case (0 < avail < 3)://yellow
            index = 2;
            break;
        case (avail >= 3)://blue/green
            index = 1;
            break;
    }
      //index = Math.min(index, numStyles);
      return {
        text: avail,
        index: index
      };
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:22:21.607

添加一个可以满足您需要的功能怎么样。该函数将检查该集群中绿色/彩色标记的数量以及缩放级别（if elseif 条件应该这样做），并相应地覆盖先前为集群设置的图标。您将在`setCalculator()`. 我不认为这会很困难，如果您有任何问题，请尝试并发布您尝试过的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T16:33:34.477

想通了我的开关坏了，黄色的逻辑搞砸了：

```
if(avail == 0){
   index=3;
}
if((0 < avail)&&(avail < 3)){
   index=2;
}
if(avail >= 3) {
   index=1;
} 
```

# sql-server - Service Broker：触发器应该如何启动无限打开的对话框？

> ID：13203389
> 
> 赞同：0
> 
> 时间：2012-11-02T21:36:58.170
> 
> 标签：sql-server, service-broker

问题是[Service Broker 的延续：设计两个 SQL 服务器之间的通信](https://stackoverflow.com/q/13197781/1346705)（使前面的内容相当短）。

上述问题的答案建议使用更简单的方案，即通过*永远*打开的对话框发送定期生成的数据。负责在卫星 SQL 服务器上形成数据并将其发送到中央 SQL 服务器的触发器可能会使用固定的唯一标识符。

无论如何，谈话必须首先开始。说，对话句柄是固定的。当对话尚未打开时，如何检测情况？

如果可以检测到对话尚未开始，我可以将这两种方法结合起来。具有空字符串消息值的特殊请求可以发送到中央，中央将仅针对该特殊请求发回回复。然后，卫星激活程序将立即将丢失的数据发送到中央。

简单地说，我必须解决最初的情况，在卫星机器上可以收集到相当多的数据。卫星激活程序可以分块发送数据，让双方有机会做其他事情，而不是移动数据。一旦来自中心的回复消息在没有其他要发送的情况下到达，激活的过程可以为触发器设置一些持久标志，以开始以独白方式发送单个记录。合理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:54:23.980

有关答案，请参阅 Remus Rusanu 的评论。

（我的回答只是为了完成问题。）

# solr - Solr 关键字搜索 - 哪个更快 - 常见词（在索引中）或不常见？

> ID：13203396
> 
> 赞同：0
> 
> 时间：2012-11-02T21:37:12.053
> 
> 标签：solr, lucene

我有一个连接到 Apache Solr 服务器以获取搜索结果的应用程序。现在，对于应用程序运行状况检查，我想使用一些随机关键字来访问 Solr 核心。如果这让我返回了 http 200，否则我会将系统标记为“健康”。

所以在这里，我只需要一些关键字来查询 Solr 核心并等待 Solr 响应。

我不知道 Solr 索引管理的内部结构。

我想知道这两个中的哪一个会更快（在获取响应时） -
1\. 搜索一个经常在索引数据中找到的关键字。一个很常见的词。2\. 或者搜索一个唯一的词。

感谢输入！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T08:53:25.403

您可以使用更适合健康检查的[PingRequestHandler 。](http://lucene.apache.org/solr/4_0_0/solr-core/org/apache/solr/handler/PingRequestHandler.html)关于你的问题，一个独特的词会更快

# sql - 一个项目中允许的最大数据集数

> ID：13203402
> 
> 赞同：3
> 
> 时间：2012-11-02T21:37:57.887
> 
> 标签：sql, google-bigquery

我可以在一个 BigQuery 项目中创建多少个数据集有限制吗？我没有在文档中提到的任何地方找到这个限制。

我问这个是因为我想每天创建一个数据集。在每日数据集下，将使用每日数据创建相同数量的表。例如，

```
dataset_20121101
   - table1
   - table2
dataset_20121102
   - table1
   - table2
...
dataset_201XXXXX
   - table1
   - table2 
```

另外，如果我想对一系列数据集进行查询，我能做些什么比从每个数据集中显式选择更好吗？例如，

```
select date, sum(price) from 
 dateset_20121101.table1, 
 dateset_20121102.table1,
 dateset_20121103.table1,
 dateset_20121104.table1
 group by date order by date 
```

我猜不是，但只是尝试确认。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T01:56:58.930

**1\. 每个项目的数据集**

您可以为每个项目创建的 BigQuery 数据集的数量没有硬性限制。但是，如果您创建了一个巨大的数量，那么这可能会在尝试以编程方式列出所有内容时带来一些挑战。此外，拥有数百个数据集可能不太容易在 BigQuery UI 中导航。另请注意，[bq 命令行工具](https://developers.google.com/bigquery/docs/cli_tool)目前似乎没有为每个项目分页超过 50 个数据集（它只显示前 50 个，我们将考虑添加分页功能作为功能请求）。

**2\. 查询一系列数据集**

明确列出每个 dataset.table 组合是当前指定要在一系列数据集上运行的查询的唯一方法。但是，引用多个表的改进语法是一个非常常见的开发人员请求，因此我们正在探索改进（例如可能通过模式而不是列表来选择一系列表）。有关新功能的公告，请注册[bigquery-announce](https://groups.google.com/forum/#!forum/bigquery-announce)列表。

# nvd3.js - 具有离散值的 nvd3 堆积条形图

> ID：13203404
> 
> 赞同：20
> 
> 时间：2012-11-02T21:38:00.770
> 
> 标签：nvd3.js

我正在尝试使用 nvd3 创建垂直堆积条形图。我将使用离散数据值，而不是随机生成的值作为他们[网站](http://nvd3.org/livecode/#codemirrorNav)上的示例。

我尝试使用 Group / Stacked Bar Chart 的实时代码示例，并放入包含我自己的值的 JSON 数据。我试图做的是从水平条形图中获取 JSON 数据并将其作为垂直条形图的数据。

这是我在实时代码示例中使用的数据来代替 Group / Stacked Bar Chart 中的数据：

```
[
  {
    "key": "Series1",
    "color": "#d62728",
    "values": [
      { 
        "label" : "Group A" ,
        "value" : -1.8746444827653
      } , 
      { 
        "label" : "Group B" ,
        "value" : -8.0961543492239
      } , 
      { 
        "label" : "Group C" ,
        "value" : -0.57072943117674
      } , 
      { 
        "label" : "Group D" ,
        "value" : -2.4174010336624
      } , 
      {
        "label" : "Group E" ,
        "value" : -0.72009071426284
      } , 
      { 
        "label" : "Group F" ,
        "value" : -0.77154485523777
      } , 
      { 
        "label" : "Group G" ,
        "value" : -0.90152097798131
      } , 
      {
        "label" : "Group H" ,
        "value" : -0.91445417330854
      } , 
      { 
        "label" : "Group I" ,
        "value" : -0.055746319141851
      }
    ]
  },
  {
    "key": "Series2",
    "color": "#1f77b4",
    "values": [
      { 
        "label" : "Group A" ,
        "value" : 25.307646510375
      } , 
      { 
        "label" : "Group B" ,
        "value" : 16.756779544553
      } , 
      { 
        "label" : "Group C" ,
        "value" : 18.451534877007
      } , 
      { 
        "label" : "Group D" ,
        "value" : 8.6142352811805
      } , 
      {
        "label" : "Group E" ,
        "value" : 7.8082472075876
      } , 
      { 
        "label" : "Group F" ,
        "value" : 5.259101026956
      } , 
      { 
        "label" : "Group G" ,
        "value" : 0.30947953487127
      } , 
      { 
        "label" : "Group H" ,
        "value" : 0
      } , 
      { 
        "label" : "Group I" ,
        "value" : 0 
      }
    ]
  }
] 
```

我将javascript中对data（）的函数调用替换为数据：

```
nv.addGraph(function() {
    var chart = nv.models.multiBarChart();

    chart.xAxis
        .tickFormat(d3.format(',f'));

    chart.yAxis
        .tickFormat(d3.format(',.1f'));

    d3.select('#chart svg')
        .datum(data)
      .transition().duration(500).call(chart);

    nv.utils.windowResize(chart.update);

    return chart;
}); 
```

该图正确标记了我的系列，但未显示条形。这张图可以不取这种数据吗？我的数据使用水平条，但如果可能的话，我想使用垂直条。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-24T13:39:23.090

分组/堆叠条形图（*multiBarChart*模型）与`x`和`y`属性一起使用，其中`y`是条形的高度，`x`是标签，可能是一些数字或文本。

不幸的是，没有太多关于确切数据格式的文档，而且我发现的所有示例都使用一些令人困惑的函数来生成数据。所以这是一个我使用混合数字和文本标签工作的例子：

```
var chart = nv.models.multiBarChart();
d3.select('#chart svg').datum([
  {
    key: "S1",
    color: "#51A351",
    values:
    [      
      { x : "A", y : 40 },
      { x : "B", y : 30 },
      { x : 5,   y : 20 }  
    ]
  },
  {
    key: "S2",
    color: "#BD362F",
    values:
    [      
      { x : "A", y : 60 },
      { x : "B", y : 50 },
      { x : 5,   y : 70 } 
    ]
  }
]).transition().duration(500).call(chart);
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/nvd3/1.8.1/nv.d3.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/nvd3/1.8.1/nv.d3.min.css">

<div id="chart" style="height: 200px;"><svg></svg></div>
```

![分组/堆积条形图](../Images/add226339418f691dd42df00cf4ff09d.png)

* * *

现在您的代码有两个问题：

1.  您需要删除`tickFormat`您打算用文本标记的 for 轴。
    该`tickFormat`函数设置轴标签的数字格式。只有当标签可以转换为数字并且会导致`NaN`您的情况时，它才会起作用。

2.  您需要将`label`and`value`属性重命名为`x`and`y`或者您需要创建函数来提供这些值：

    ```
    var chart = nv.models.multiBarChart();

    chart.x(function(d) { return d.label; });
    chart.y(function(d) { return d.value; });

    d3.select('#chart svg')
      .datum( /* your data */ )
      .transition().duration(500).call(chart); 
    ```

# binary-tree - 如何递归地构建最小高度的二叉搜索树？

> ID：13203406
> 
> 赞同：1
> 
> 时间：2012-11-02T21:38:02.413
> 
> 标签：binary-tree, binary-search-tree

我有一个由 26 个整数组成的数组，1-26 的顺序为 a[0]=1...a[25]=26。我一直在玩这段代码，但我似乎无法确定为什么我拥有的当前代码不能正常工作。这是我的构建方法：

```
public static binaryNode buildBalanced(int[] a, int low, int high)
{
    if(low > high)
    {
        return null;
    }
double mid = Math.floor((low + high)/2);
int iMid = (int)mid;
binaryNode node = new binaryNode(a[(int)iMid]);
node.setLeftChild(buildBalanced(a, low, (int)(iMid-1)));
node.setRightChild(buildBalanced(a, (int)(iMid+1), high));
return node;
} 
```

binaryNode 是一个具有右孩子、左孩子和信息的节点。

现在，当我尝试打印出三个遍历（有序、前序和后序）时，这就是我得到的：

按顺序：1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26

预购：13 1 2 3 4 5 6 7 8 9 10 11 12 14 15 16 17 18 19 20 21 22 23 24 25 26

邮购：1 2 3 4 5 6 7 8 9 10 11 12 14 15 16 17 18 19 20 21 22 23 24 25 26 13

在我看来，这段代码不能正常工作。还是我的订单内、订单前和订单后的方法错了？

这些是我使用的三种打印方法： InOrder：

```
public static void printInOrder(binaryNode current, Queue<binaryNode> queue)
{

    if(current == null)
    {
        queue.add(current);
        return;
    }
    if (current.getLeftChild() != null)
    {
        printInOrder(current.getLeftChild(), queue);
    }
    queue.add(current);
    if(current.getRightChild() != null)
    {
        printInOrder(current.getRightChild(), queue);
    }
    if(current.getParent() == null)
    {
        while(!queue.isEmpty())
        {
            System.out.print(queue.remove().getInfo() + " ");               
        }
    }
} 
```

预购：

```
public static void printPreOrder(binaryNode current, Queue<binaryNode> queue)
{
     if(current == null)
        {
            queue.add(current);
            return;
        }
        queue.add(current);
        if (current.getLeftChild() != null)
        {
            printInOrder(current.getLeftChild(), queue);
        }
        if(current.getRightChild() != null)
        {
            printInOrder(current.getRightChild(), queue);
        }
        if(current.getParent() == null)
        {
            while(!queue.isEmpty())
            {
                System.out.print(queue.remove().getInfo() + " ");               
            }
        }
} 
```

邮购：

```
public static void printPostOrder(binaryNode current, Queue<binaryNode> queue)
{
    if(current == null)
    {
        queue.add(current);
        return;
    }
    if (current.getLeftChild() != null)
    {
        printInOrder(current.getLeftChild(), queue);
    }
    if(current.getRightChild() != null)
    {
        printInOrder(current.getRightChild(), queue);
    }
    queue.add(current);
    if(current.getParent() == null)
    {
        while(!queue.isEmpty())
        {
            System.out.print(queue.remove().getInfo() + " ");               
        }
    }

} 
```

您能提供的任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T22:17:39.663

您的构建步骤看起来不错。但是，您的遍历比它们需要的要复杂得多。如果您想进行迭代遍历而不是使用递归，则只需要一个队列。

由于您使用的是递归，因此遍历不需要队列：

```
public static void printInOrder(binaryNode current)
{

    if(current == null)
    {
        return;
    }
    printInOrder(current.getLeftChild());
    System.out.print(current.getInfo() + " ");
    printInOrder(current.getRightChild());
} 
```

# c++ - 在宏内取消字符串化

> ID：13203412
> 
> 赞同：5
> 
> 时间：2012-11-02T21:38:47.920
> 
> 标签：c++

在宏中，我可以使用字符串化操作符`#`：

```
#define STRINGIZE(name) #name

cout << STRINGIZE(SomeClass) << endl; // Prints "SomeClass" 
```

是否可以做相反的*事情*，在宏中取消字符串？如何？

例如：

```
#define RUN_FUNCTION(name) UNSTRINGIZE(name)();

void myFunction {
  cout << "Hello!" << endl;
}

RUN_FUNCTION("myFunction") // Prints "Hello!" 
```

如果没有，有什么原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T21:43:05.123

不，这是不可能的。C++ 预处理器不能以任何方式将标记分解为更小的标记。

你到底想做什么？几乎可以肯定有更好的方法来做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T21:39:29.073

[从评论中提升]
预处理发生在编译之前，也就是运行时之前。您需要反射来做到这一点，而无需定义自己的规则，这需要某种形式的元数据，而 C++ 没有。

我找不到在哪里，但我最近在某个地方（也许[在这里](http://isocpp.org/)，但根据[维基百科](http://en.wikipedia.org/wiki/C%2B%2B11#Features_removed_or_deprecated)，它已被推迟）在未来的某个时候可能会出现在 C++ 中，所以那里可能会有前景。

# java - 如何向 JLabel 添加淡入淡出效果

> ID：13203415
> 
> 赞同：2
> 
> 时间：2012-11-02T21:38:51.680
> 
> 标签：java, swing, jlabel

您好我正在尝试创建一个 Java 游戏并且需要在我的标签上添加一些效果。我有以下问题

1.  如何为我的标签添加淡入/淡出效果。
2.  我有一个 JLabel 但我需要一个形状，可能是一个矩形或云形。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-02T22:13:39.260

您可以使用 a`AlphaComposite`更改组件的不透明度级别...

现在，通过巧妙地使用计时器，您可以使标签淡入淡出或简单地控制不透明度...

![在此处输入图像描述](../Images/70ea298909c16ca589474285bd635b20.png)

```
public class TestFadeLabel {

    public static void main(String[] args) {
        new TestFadeLabel();
    }

    public TestFadeLabel() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new MainPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class MainPane extends JPanel {

        private float direction = -0.05f;
        private FadeLabel label = new FadeLabel();

        public MainPane() {
            setLayout(new BorderLayout());
            JLabel background = new JLabel();
            background.setLayout(new GridBagLayout());
            try {
                background.setIcon(new ImageIcon(ImageIO.read(getClass().getResource("/Storm.jpg"))));
            } catch (Exception e) {
                e.printStackTrace();
            }
            add(background);

            label = new FadeLabel();
            background.add(label);

            Timer timer = new Timer(100, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    float alpha = label.getAlpha();
                    alpha += direction;
                    if (alpha < 0) {
                        alpha = 0;
                        direction = 0.05f;
                    } else if (alpha > 1) {
                        alpha = 1;
                        direction = -0.05f;
                    }
                    label.setAlpha(alpha);
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }
    }

    public class FadeLabel extends JLabel {

        private float alpha;
        private BufferedImage background;

        public FadeLabel() {
            try {
                background = ImageIO.read(getClass().getResource("/Cloud.png"));
            } catch (Exception e) {
            }
            setText("Hide and go seek");
            setHorizontalAlignment(CENTER);
            setVerticalAlignment(CENTER);
            setAlpha(1f);
        }

        public void setAlpha(float value) {
            if (alpha != value) {
                float old = alpha;
                alpha = value;
                firePropertyChange("alpha", old, alpha);
                repaint();
            }
        }

        public float getAlpha() {
            return alpha;
        }

        @Override
        public Dimension getPreferredSize() {
            return background == null ? super.getPreferredSize() : new Dimension(background.getWidth(), background.getHeight());
        }

        @Override
        public void paint(Graphics g) {
            // This is one of the few times I would directly override paint
            // This makes sure that the entire paint chain is now using
            // the alpha composite, including borders and child components
            Graphics2D g2d = (Graphics2D) g.create();
            g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, getAlpha()));
            super.paint(g2d);
            g2d.dispose();
        }

        @Override
        protected void paintComponent(Graphics g) {
            // This is one of the few times that doing this before the super call
            // will work...
            if (background != null) {
                int x = (getWidth() - background.getWidth()) / 2;
                int y = (getHeight() - background.getHeight()) / 2;
                g.drawImage(background, x, y, this);
            }
            super.paintComponent(g);
        }
    }
} 
```

# c++ - 通过 Visual Studio 跟踪更改的文件

> ID：13203418
> 
> 赞同：2
> 
> 时间：2012-11-02T21:39:30.867
> 
> 标签：c++, visual-studio, visual-studio-2012

你们知道是否有可能改变VS跟踪该文件已更改并需要重新编译的方式？

看起来它正在使用文件的更新时间，而不是跟踪用户在 IDE 中修改的内容。

我将源存储在通过 Samba 共享的 Linux 机器 (VmWare) 上。那台机器上的系统时间经常会消失。如果 .cpp 文件的时间相对于主机系统是过去的时间，VS 永远不会重新编译它们:)

有没有办法在 Visual Studio 中改变这种行为？

当然，我也在虚拟机上手动同步时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:47:13.203

看起来没有办法改变 VS 的这种行为。所以我最终在 linux 机器上重新配置`ntpd`以尽可能频繁地更新时间。

# java - 将 4 个字节转换为无符号 32 位整数并将其存储在 long

> ID：13203426
> 
> 赞同：4
> 
> 时间：2012-11-02T21:40:55.640
> 
> 标签：java, bit-manipulation

我正在尝试用 Java 读取二进制文件。我需要读取无符号 8 位值、无符号 16 位值和无符号 32 位值的方法。什么是最好的（最快、最好看的代码）来做到这一点？我已经在 c++ 中完成了这个并做了这样的事情：

```
uint8_t *buffer;
uint32_t value = buffer[0] | buffer[1] << 8 | buffer[2] << 16 | buffer[3] << 24; 
```

但是在 Java 中，如果例如 buffer[1] 包含一个由于左移结果是 int (?) 而设置了符号位的值，则会导致问题。而不是 OR:ing 仅在特定位置的 0xA5 它 OR:s 在 0xFFFFA500 或类似的东西，这会“损坏”两个顶部字节。

我现在有一个代码，如下所示：

```
public long getUInt32() throws EOFException, IOException {
    byte[] bytes = getBytes(4);
    long value = bytes[0] | (bytes[1] << 8) | (bytes[2] << 16) | (bytes[3] << 24);
    return value & 0x00000000FFFFFFFFL;
} 
```

如果我想转换四个字节 0x67 0xA5 0x72 0x50，结果是 0xFFFFA567 而不是 0x5072A567。

编辑：这很好用：

```
public long getUInt32() throws EOFException, IOException {
    byte[] bytes = getBytes(4);
    long value = bytes[0] & 0xFF;
    value |= (bytes[1] << 8) & 0xFFFF;
    value |= (bytes[2] << 16) & 0xFFFFFF;
    value |= (bytes[3] << 24) & 0xFFFFFFFF;
    return value;
} 
```

但是没有更好的方法来做到这一点吗？对于这样一个简单的事情来说，10 位操作似乎有点“有点”。（看看我在那里做了什么？）=）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T09:25:06.097

更常规的版本首先将字节转换为其无符号值作为整数：

```
public long getUInt32() throws EOFException, IOException {
    byte[] bytes = getBytes(4);
    long value = 
        ((bytes[0] & 0xFF) <<  0) |
        ((bytes[1] & 0xFF) <<  8) |
        ((bytes[2] & 0xFF) << 16) |
        ((long) (bytes[3] & 0xFF) << 24);
    return value;
} 
```

不要纠结于位操作的数量，编译器很可能会将这些优化为字节操作。

此外，您不应该`long`仅仅为了避免符号而使用 32 位值，您可以使用`int`并忽略它大部分时间都已签名的事实。看到[这个答案](https://stackoverflow.com/questions/397867/port-of-random-generator-from-c-to-java/397997#397997)。

**更新：**需要将最高有效字节强制转换为 long，因为否则它的最高有效位将被移入 32 位整数的符号位，可能使其为负数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T22:01:33.300

你的想法是对的，我认为没有任何明显的改进。如果您查看[`java.io.DataInput.readInt`规范](http://docs.oracle.com/javase/6/docs/api/java/io/DataInput.html#readInt%28%29)，他们有相同的代码。他们切换 和 的顺序`<<`，`&`但在其他方面是标准的。

除非您使用内存映射区域，否则`int`无法从数组中一次性读取，这对于此*来说*是多余的。`byte`

 *当然，您可以`DataInputStream`直接使用 a 而不是读入`byte[]`first：

```
DataInputStream d = new DataInputStream(new FileInputStream("myfile"));
d.readInt(); 
```

`DataInputStream`在与您使用的相反的字节序上工作，因此您`Integer.reverseBytes`还需要一些调用。它不会更快，但它更清洁。*

# xcode - OSX - 发布 Unity 游戏

> ID：13203435
> 
> 赞同：8
> 
> 时间：2012-11-02T21:41:41.190
> 
> 标签：xcode, macos, unity3d

如何将适用于 Mac OSX 的 Unity Games 推送到 Mac 商店？我似乎无法弄清楚，并且到处都看过。我知道你必须修改 info.plist 和包，但没有明确的指南！

谢谢注意

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T21:44:23.577

提交应用到 Mac 商店：

1.  为 Mac 内置 Unity 仅英特尔

2.  从 Unity 编译后显示 .app 的包内容

2.a. 编辑信息.plist

```
<key>CFBundleShortVersionString</key>
<string>1.0.0</string>
<key>LSApplicationCategoryType</key>
<string>public.app-category.sports-games</string>
<key>NSHumanReadableCopyright</key>
<string>© 2012 Apollo Software Solutions. All rights reserved.</string>
<key>CFBundleIdentifier</key>
<string>com.apolloss.GolfProHD</string>
<key>CFBundleVersion</key>
<string>1.0.0</string> 
```

2.b。将 Resources/UnityPlayer.icns 替换为 1024x1024（您可能需要 icns 编辑器/生成器）

2.c。将“每个人”的 /Data 权限从“无访问权”更改为“只读”

1.  在终端中...（您可能需要权利，如果需要，请创建权利 xml 文件并添加到 codesign 命令）。

    codesign -f -s“第 3 方 Mac 开发者应用程序：Amit Barman”GolfProHD.app

    productbuild --component GolfProHD.app /Applications --sign "3rd Party Mac Developer Installer: Amit Barman" GolfProHD.pkg

***在 productbuild 创建 .pkg 后删除 .app 文件（否则安装程序测试将不起作用）。***

sudo 安装程序 -store -pkg GolfProHD.pkg -target /

1.  验证您的应用程序是否安装在应用程序中

2.  准备好将 .pkg 提交到 iTunes Connect！

# c++ - 用于弹性搜索的 C++ api

> ID：13203436
> 
> 赞同：7
> 
> 时间：2012-11-02T21:41:47.503
> 
> 标签：c++, api, elasticsearch

据我了解，[elasticsearch](http://www.elasticsearch.org)不提供 C++ api。所以，我假设我应该使用一个库来发送/接收用于索引和搜索的 http 请求。关于适合弹性搜索需求的库的任何建议？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-06T07:34:55.100

我刚刚在 github 上发布了一个：[https](https://github.com/QHedgeTech/cpp-elasticsearch) ://github.com/QHedgeTech/cpp-elasticsearch 。

包含一个自制的 http 客户端，但它可以很容易地插入 libcurl。它仍然很少，希望看到你做出贡献，这样它也能满足你的需求。

cpp-elasticsearch 是一个用于 elasticsearch 的小型 C++ API，旨在成为官方 API。文档以及“入门”页面仍然存在。

实际版本是最小的，并且是为 Q-Hedge Technologies 的需要而开发的。此代码中使用了 C++11 的特性。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-04T18:47:00.177

任何网络库都应该可以正常工作。[Libcurl](http://curl.haxx.se/libcurl/)可能是最容易/最快运行的，因为您真正需要的只是简单的 HTTP 请求（Get/Put/Post/Delete）

# android - SurfaceHolder.lockCanvas() 返回 null

> ID：13203437
> 
> 赞同：2
> 
> 时间：2012-11-02T21:41:58.697
> 
> 标签：android, android-canvas, surfaceholder

我正在尝试使用以下代码创建画布并为其绘制位图：

```
Paint paint = new Paint();
InputStream is = assets.open("card_art" + File.separator + "texture.png");
Bitmap bitmap = BitmapFactory.decodeStream(is);
cardFrontBackingImageView = new SurfaceView(Order.getContext()).getHolder().lockCanvas();
if (cardFrontBackingImageView == null)
{
    Log.e("Canvas creation", "Canvas is null");
}
cardFrontBackingImageView.drawBitmap(bitmap, null, frame, paint); 
```

我遇到的问题是我在代码中检查的问题——lockCanvas() 始终返回 null。我或多或少地在学习这一点，所以我对 SurfaceView、SurfaceHolder 或 Canvas 的了解不够，无法以一种或另一种方式说出我可能做错了什么；有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T21:45:01.410

从[文档](http://developer.android.com/reference/android/view/SurfaceHolder.html#lockCanvas%28%29)：

> 返回的 Canvas 可用于绘制到表面的位图中。如果尚未创建曲面或无法编辑曲面，则返回 null。您通常需要实现 Callback.surfaceCreated 以了解 Surface 何时可用。

# c++ - EXIT_SUCCESS 和 EXIT_FAILURE。它是编译一次在任何地方运行还是一次编写到处编译？

> ID：13203439
> 
> 赞同：1
> 
> 时间：2012-11-02T21:42:09.757
> 
> 标签：c++, c, return, std, exit-code

> **可能重复：**
> [（C/C++）从 main 返回 EXIT_SUCCESS 或 0？](https://stackoverflow.com/questions/8867871/c-c-return-exit-success-or-0-from-main)

很长一段时间我都在使用 return 0;，从我开始使用 allegro 开始。比我遇到 C++ 书并找到有关 EXIT_SUCCESS 的信息，比我查看定义它的 stdlib.h 或 cstdlib 并且只有两行：

```
#define EXIT_SUCCESS 0
#define EXIT_FAILURE 1 
```

有人可以向我解释一下吗？我正在使用最后一个 devc++ 4.9.9.2 的 mingw 版本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T21:48:06.977

C99 语言标准定义了这两个宏`EXIT_SUCCESS`，并将`EXIT_FAILURE`其扩展为“可用作 `exit`函数参数的整数常量表达式，分别将不成功或成功终止状态返回给主机环境”（第 7.20/3 节）。

在`exit`函数的描述（§7.20.4.3/5）中，它还说：

> 最后，控制权返回到主机环境。如果 的值为`status`0 或 ，则返回*成功终止*`EXIT_SUCCESS`状态的实现定义形式。如果值为 ，则返回状态*未成功终止*的实现定义形式。否则返回的状态是实现定义的。*`status``EXIT_FAILURE`*

 **因此，如果您以 0 或 退出`EXIT_SUCCESS`，这始终意味着主机环境的“成功终止”。 `EXIT_FAILURE`是一个始终意味着“不成功终止”的值，但不保证除这些值之外的任何非零值都是可移植的。

请注意，从返回`main`等效于以`exit`返回值的状态调用函数（第 5.1.2.2.3 节）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T21:44:17.107

`EXIT_SUCCESS`并且`EXIT_FAILURE`是在`stdlib.h`. C 没有指定这些宏的值。

POSIX 要求`EXIT_SUCCESS`是`0`. （但没有指定任何`EXIT_FAILURE`价值）。**

# javascript - 访问原型中的“私有”变量

> ID：13203445
> 
> 赞同：5
> 
> 时间：2012-11-02T21:42:29.243
> 
> 标签：javascript

是否可以在 JavaScript 中创建一个可以在原型中访问的私有变量？我尝试了以下[显然不起作用](http://jsfiddle.net/TBfk4/)的方法，因为`bar`只能从原型内部访问`Foo` ，而不能从原型内部访问。

```
function Foo() {
    var bar = 'test';
}

Foo.prototype.baz = function() {
    console.log(bar);
}; 
```

我知道我也不能使用`this.bar = 'test'`，因为这会使[财产公开](http://jsfiddle.net/KrAXh/)AFAIK。如何使`bar`变量私有，但可以通过原型访问？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T21:44:55.150

你不能——不可能从那个范围之外访问一个词法范围的变量。

原型方法（根据定义）在所有实例之间共享，并且这样做必须存在于它们自己的范围内。

Douglas Crockford 的文章[*Private Members in JavaScript*](http://www.crockford.com/javascript/private.html)提供了一些有用的解释，但没有满足您要求的解决方案。

# javascript - 使用 svg:image 元素从网络或内部文档导入图像

> ID：13203448
> 
> 赞同：0
> 
> 时间：2012-11-02T21:42:49.130
> 
> 标签：javascript, svg, d3.js

我正在使用 svg:image 将图像导入 D3。我以为我做得对，但它似乎不起作用：

```
 d3.selectAll("#chart").append("svg:image")
    .attr("xlink:href", "http://www.e-pint.com/epint.jpg ")
    .attr("width", "150px")
    .attr("height", "200px"); 
```

这是问题的视觉效果-不确定我哪里出错了-http: [//jsfiddle.net/xwZjN/16/](http://jsfiddle.net/xwZjN/16/)

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:18:51.213

你需要把你的元素放在`svg:image`里面。`svg`用这个：

```
d3.select("#chart").select("svg").append("svg:image")
   .attr("xlink:href", "http://www.e-pint.com/epint.jpg ")
   .attr("width", "150px")
   .attr("height", "200px"); 
```

# java - 有没有像 CVS 这样的 scm 的 Gradle 插件？

> ID：13203450
> 
> 赞同：2
> 
> 时间：2012-11-02T21:43:03.690
> 
> 标签：java, build, cvs, gradle

我是 Gradle 新手...为我的 java 项目编写一个简单的构建脚本..我们使用 CVS 进行源代码管理..我在 Gradle 中找不到任何 CVS/SCM 插件..我相信我可以创建一个ant 任务来访问 CVS 并在我的 gradle 脚本中使用它。但是有没有现成的可用 CVS 插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:16:35.343

一般来说，您的版本控制交互属于持续集成 (CI) 级别。您将需要使用 Jenkins、Hudson、Bamboo 等产品来检查项目的正确版本，然后只需使用 Gradle 来构建存在的任何版本。

# c# - 一个人可以使用什么来代替枚举来进行智能感知的字符串集合？

> ID：13203454
> 
> 赞同：4
> 
> 时间：2012-11-02T21:43:26.077
> 
> 标签：c#, .net, enums

目前在应用程序中使用枚举作为文件名列表，以便能够使用智能感知并确保文件名是现有文件之一（枚举防止拼写错误并且必须逐字记住每个文件名）。枚举中当前有 107 个文件。为了获得音频文件名，使用了枚举值 ToString() 方法。

现在有一种情况，需要根据数据库调用的结果添加一些文件名。这对于枚举是不可能的，并且需要大量的应用程序重组才能实现（更改所有采用枚举的方法以采用字符串）。

首先应该做什么，或者枚举是这个用例的最佳选择？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T21:56:03.747

我不太确定用例，但一个考虑因素是资源文件。您将获得智能感知，以及能够根据本地化更改文件名的额外好处。

有关示例，请参见[此处。](http://www.dev102.com/2008/10/20/how-to-localize-your-application-using-string-tables/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:53:38.673

实际上，做到这一点的一种方法是将每个文件简单地列为字符串常量。但这使得添加新内容令人沮丧，如果您想添加新声音，则必须重新编译和分发*整个应用程序*。

取而代之的是，考虑将您的声音文件列在单个数据文件（也许是 XML？）中。在您的程序中，将数据作为字符串键、字符串值字典导入，其中键是声音的名称，值是文件名。构建一个包装类来保存字典，这样您就可以优雅地处理错误，瞧！您可以访问您的声音，并且您可以从代码本身之外添加和删除声音。

另外，当您调用数据库时，您需要做的就是将额外的声音数据添加到您的字典中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T22:37:27.427

也许您需要创建一个具有常量成员的静态类。

```
static class FileNames
{
    public const string FirstFileName = "FirstFileName.txt";
    //and so on
} 
```

对于数据库部分（未详细说明并留有猜测空间），您可以使用**T4 模板**，该模板生成一个类，其中有以上述形式声明的文件名列表。T4 模板可以在设计时使用常规的 ADO .NET 代码进行数据库调用，然后查询的结果可用于输出文件名和常量成员。

发现 T4 非常值得：查看此链接：http: [//msdn.microsoft.com/en-us/library/bb126445.aspx](http://msdn.microsoft.com/en-us/library/bb126445.aspx)。

# mule - mule 在流程中从类路径中读取单个文件

> ID：13203458
> 
> 赞同：15
> 
> 时间：2012-11-02T21:44:10.943
> 
> 标签：mule

是否有一种简单的方法可以将 Flow 配置为一次从类路径中读取单个文件？我不需要轮询文件。我只需要读取一个已知文件并将其内容设置为消息有效负载。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-02T21:51:34.760

使用`set-payload`消息处理器和 MEL 表达式：

```
<set-payload value="#[Thread.currentThread().getContextClassLoader().getResourceAsStream('my-file.abc')]" /> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-02T14:20:38.093

由于某种原因，我无法使 David Dossot 提出的解决方案起作用。我受到[这个答案](https://stackoverflow.com/questions/14022839/how-do-i-load-a-resource-and-use-its-contents-as-a-string-in-spring/14022842#14022842)的启发并想出了另一个解决方案

```
<spring:bean id="myResource" class="org.apache.commons.io.IOUtils" factory-method="toString">
    <spring:constructor-arg value="classpath:path/to/myResource.txt" type="java.io.InputStream"/>
</spring:bean> 
```

然后您可以通过以下方式使用 set-payload

```
<set-payload value="#[app.registry.myResource]" doc:name="Set Payload"/> 
```

这将导致将文件内容设置为字符串的有效负载。

此方法的优点是资源文件的内容只加载到 String 类型的 bean 中一次。因此，如果您的 set-payload 语句经常执行，这可以提高性能。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-11-26T07:51:25.100

从 Mule 3.4 开始，使用 parse-template 转换器

```
<parse-template location="my-resurce.txt" doc:name="Load resource as a String"/> 
```

这将使事情变得容易得多。

您可能仍需要设置 MIME 类型，具体取决于您将如何使用模板。

常见错误包括在转换器中使用完整路径，例如 c:\users\myusers\mule\myfile.txt 这不会很好地编译。

例如，您还可以在解析模板和富文本中使用 Mule 表达式。

[http://www.mulesoft.org/documentation/display/current/Parse+Template+Reference](http://www.mulesoft.org/documentation/display/current/Parse+Template+Reference)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-15T10:19:57.177

最干净的解决方案似乎是使用[MUnit 文档](https://docs.mulesoft.com/munit/v/1.3/mock-message-processor#loading-payloads-from-files-and-scripts)`getResource()`中描述的专用方法 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-25T22:46:52.033

```
 <scripting:component doc:name="Get xls File">                                        
        <scripting:script engine="Groovy"><![CDATA[new File('C:/project/src/main/resources/account.xls').getText('UTF-8')]]></scripting:script>
    </scripting:component> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-07T16:15:16.233

```
<parse-template location="my-resurce.txt" doc:name="Load resource as a String"/> 
```

该文件可以完全不包含任何 MEL 表达式，在这种情况下，它实际上是按原样加载的，并且它成为有效负载。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-28T09:49:42.600

我正在尝试抛出 Java 类转换器，以便您可以使用以下内容

> 注意：路径是包含要读取的文件的直接包，将路径存储在 mule 变量中，然后读取文件内容并将其值存储到 Payload

.

```
public class PayloadFileReader extends AbstractMessageTransformer {
public Object transformMessage(MuleMessage message, String outputEncoding)
        throws TransformerException {

    String result = "";
    try {
        result = readFileTest(message.getInvocationProperty("path")
                .toString());
    } catch (Exception e) {
        e.printStackTrace();
    }
    message.setPayload(result);
    return message;
}

public String readFileTest(String path) throws FileNotFoundException,
        IOException, Exception {

    ClassLoader classLoader = getClass().getClassLoader();

"+classLoader.getResource("samples/v3/addVal-request.sample").getFile());

    File file = new File(classLoader.getResource(path).getFile());
    FileReader fileReader = new FileReader(file);
    BufferedReader bufferReader = null;
    StringBuilder stringBuffer = new StringBuilder();
    String line;
    try {
        bufferReader = new BufferedReader(fileReader);
        while ((line = bufferReader.readLine()) != null) {
            stringBuffer.append(line);
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        if (bufferReader != null) {
            try {
                bufferReader.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
    return stringBuffer.toString();
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-09T10:29:03.343

您可以创建一个尝试“导入”文件的“Spring Bean”（假设 Mule XML 配置文件）。下面的示例代码：

```
<spring:beans>
 <spring:import resource="classpath:sample-mule-integration.xml"/>
</spring:beans> 
```

或者，您可以尝试将文件放在属性占位符中，如下所示

```
<context:property-placeholder location="file:E:\NewMuleWorkSpace\springbeanproperties\src\main\resources\property.properties"/> 
```

或者，您甚至可以使用带有示例代码的 Groovy 组件来读取文件：

```
 File file = new File("C://Users//schiraboina//Desktop//123.txt")
payload=file.getText() 
```

# sql - 实体框架 - 更新多对多关系

> ID：13203469
> 
> 赞同：1
> 
> 时间：2012-11-02T21:45:21.780
> 
> 标签：sql, entity-framework-4

我在尝试更新表中的多对多类型关系时遇到问题。

这是我的代码：

```
 foreach (ThingCategory category in this.unit.Context.ThingCategories.Where(c => c.ThingId == thingId))
            {
                if (this.unit.Context.Entry(category).State == EntityState.Detached)
                {
                    this.unit.Context.ThingCategories.Attach(category);
                }

                this.unit.Context.ThingCategories.Remove(category);
            }

            foreach (ThingCategory category in categories)
            {
                if (this.unit.Context.Entry(category).State == EntityState.Detached)
                {
                    this.unit.Context.ThingCategories.Attach(category);
                    this.unit.Context.Entry(category).State = EntityState.Added;
                }
                else
                {
                   this.unit.Context.Entry(category).CurrentValues.SetValues(category);
                   this.unit.Context.Entry(category).State = EntityState.Modified;
                }
            }

            this.unit.Context.SaveChanges(); 
```

我越来越：

> ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。

ThingCategory 实体使用由 ThingId 和 CategoryId 组成的复合主键。

有人可以为我指出正确的方向吗？

谢谢，

# ruby - Rails：CSV 数组到字符串（转换）

> ID：13203470
> 
> 赞同：2
> 
> 时间：2012-11-02T21:45:34.713
> 
> 标签：ruby, arrays, ruby-on-rails-3, csv, export-to-csv

我是 Rails 新手，我想导出一个字典（字符串）。目前我正在使用这段代码

```
 Competency.order(:competencies).map(&:competencies).uniq!.join(", ") 
```

生成：

```
 Build a cage!, Build tha pizza, Demonstrated ability in flying, Demonstrated ability in pizza baking 
```

我想将它导出到 csv，但问题是它是一个数组。我想创建单独的字符串（逗号分隔）并将每个字符串显示在不同的行上。目前，将其导出到 csv 时，所有内容都显示在一行上。

任何线索如何做到这一点？我创建了一个数据数组，因为有很多重复数据，而这段代码正在过滤掉所有重复数据。

在我的控制器中：

```
 format.csv { render Competency.order(:competencies).map(&:competencies).uniq!.join(", ") } 
```

我希望任何人都可以帮助我，非常感谢。

编辑：

理想情况下，我想获取所有能力并获得没有重复的输出，这是我的控制器：

```
 def dictionary
      @competencies = Competency.all

        respond_to do |format|
        format.html { render html: positions_dictionary_path }
        format.csv { render Competency.order(:competencies).map(&:competencies).uniq!.join(", ") }
        format.xls { send_data Competency.order(:competencies).map(&:competencies).uniq!.join(", ") }

      end
    end 
```

通常在视图文件中你会这样做：

```
 <div>
        <% @posts.each do |competency| %>
          <%= competency.competencies %>
        <% end %>
      </div> 
```

这会生成所有能力的列表，但也会生成重复项。我的解决方案是创建一个数组。但是，这在导出到 csv 时会产生问题（因为我需要在不同的行/行上进行每个输出。所以我的问题是，如何生成所有“能力”的列表而不重复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:01:03.430

行不会用逗号分隔。他们很可能是新线路终止。如果您希望将它们放在单独的行上，您应该尝试使用新行而不是逗号将它们连接起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T00:10:37.713

csv 不仅仅是用逗号连接字符串。您应该改用内置的 csv 库：

```
require 'csv'
CSV.generate{|csv| rows.each{|row| csv << row}} 
```

# haskell - Haskell中1.0999999999999999背后的数学

> ID：13203471
> 
> 赞同：10
> 
> 时间：2012-11-02T21:45:39.503
> 
> 标签：haskell, floating-point, functional-programming, floating-accuracy

> **可能重复：**
> [Haskell 范围和浮点数](https://stackoverflow.com/questions/7290438/haskell-ranges-and-floats)

为什么haskel会出现如下输出：

```
[0.1,0.3..1]
[0.1,0.3,0.5,0.7,0.8999999999999999,1.0999999999999999] 
```

1.  背后的数学原理是什么`1.0999999999999999`（如果有用的话，我在 64 位 linux 机器上）？
2.  `0.8999999999999999`为什么它在明显`1.0999999999999999`超出范围时不停止？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-02T22:14:31.787

## 为什么会超调？

`[0.1,0.3..1]`简称`enumFromThenTo 0.1 0.3 1.0`

Haskell 报告说

> 对于 Float 和 Double， enumFrom 系列的语义由上面的 Int 规则给出，除了当元素变得*大于 e3 + i∕2*对于正增量 i 或当它们变得小于 e3 + i时列表终止∕2 表示负 i。

这里`e3`= 1.0，你的增量`i`= 0.2，所以`e3 + i∕2`= 1.1。只有当它变得更大时才应该停止。

你要求它停在 1，但它只能停在 0.9 或 1.1。存在舍入误差（浮点类型本质上是不准确的）并且 1.1 最终为 1.09999999999，因此由于它不大于 1.0 + i/2，因此是允许的。

事实上，即使它*等于*1.0+i/2 也是允许的，因为您可以使用确切的`[0.1,0.3..1]::[Rational]`（在导入之后`Data.Ratio`）进行检查。

您可以通过计算您的目标上限 0.9 并指定： 来避免该问题`[0.1,0.3..0.9]`。除非您的增量很小并且您的数字很大，否则您不会遭受舍入误差，即您的工作超出了 Double 对于大数字的准确性。

## 为什么不准确？

1.09 recurring 在数学上与 1.1 没有区别，但这里我们有有限数量的 9，并且严格小于 1.1。

浮点数以科学记数法存储，例如 4.563347x10^-7，但以二进制形式存储，例如 01.1001110101x2^01101110。

这意味着您的数字只能完全准确地存储为浮点数，如果您可以通过求和 2 的幂来表示它，就像您只能用十进制写一个数字，如果您可以通过求和 10 的幂来表示。

在您的示例中，0.2 是二进制的 0.001100110011，0011 永远重复，1.1 又是 1.0001100110011，0011 永远重复。

由于只有有限的一部分会被存储，当转换回十进制显示给你时，它们会有点出。通常差异是如此之小以至于再次被四舍五入，但有时你可以看到它，就像这里一样。

这种固有的不准确性是为什么`enumFromThenTo`让你超过最高数字的原因——它阻止你因为四舍五入错误而拥有太少。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-02T22:13:26.700

## 简单的答案

要理解这种行为，您需要知道表达式`[a,b..c]`将被分解为`enumFromThenTo a b c`where `enumFromThenTo`is`Enum`类的方法。

Haskell[标准](http://www.haskell.org/onlinereport/haskell2010/haskellch6.html#x13-1310006.3.4)说

> 对于`Float`and `Double`，`enumFrom`族的语义由上面的规则给出`Int`，除了当元素变得大于`e3 + i∕2`正增量`i`时，或者当它们变得小于`e3 + i∕2`负时，列表终止`i`。

毕竟，标准就是标准。但这不是很令人满意。

## 更深入

的`Double`实例`Enum`在模块[GHC.Float](http://hackage.haskell.org/packages/archive/base/3.0.3.2/doc/html/src/GHC-Float.html)中定义，让我们看看那里。我们发现：

```
instance Enum Double where
  enumFromThenTo = numericFromThenTo 
```

这并不是*非常*有帮助，但是快速的谷歌搜索显示[GHC.Real](http://www.haskell.org/ghc/docs/latest/html/libraries/base/src/GHC-Real.html)`numericFromThenTo`中定义的，所以让我们去那里：

```
numericEnumFromThenTo e1 e2 e3 = takeWhile pred (numericEnumFromThen e1 e2)
                                where
                                 mid = (e2 - e1) / 2
                                 pred | e2 >= e1  = (<= e3 + mid)
                                      | otherwise = (>= e3 + mid) 
```

这样好一点。如果我们假设一个合理的定义`numericEnumFromThen`，那么调用

```
numericEnumFromThenTo 0.1 0.3 1.0 
```

将导致

```
takeWhile pred [0.1, 0.3, 0.5, 0.7, 0.9, 1.1, 1.3 ...] 
```

因为`e2 > e1`, 的定义`pred`是

```
pred = (<= e3 + mid)
  where
    mid = (e2 - e1) / 2 
```

`x`因此，只要它们满足 ，我们就会从此列表中获取元素（称它们为 ） `x <= e3 + mid`。让我们问 GHCi 那个值是什么：

```
>> let (e1, e2, e3) = (0.1, 0.3, 1.0)
>> let mid = (e2 - e1) / 2
>> e3 + mid
1.1 
```

这就是您`1.09999...`在结果列表中看到的原因。

你看到的原因是因为不能完全用二进制表示`1.0999...`。`1.1``1.1`

## 推理

为什么标准会规定这种奇怪的行为？好吧，考虑一下如果你只取满足的数字会发生什么`(<= e3)`。由于浮点错误或不可表示性，`e3`可能永远不会出现在生成的数字列表中，这可能意味着像这样的无害表达式

```
[0.0,0.02 .. 0.1] 
```

会导致

```
[0.0, 0.02, 0.04, 0.06, 0.08] 
```

这似乎有点奇怪。由于 中的更正`numericFromThenTo`，我们确保我们得到这个（可能更常见的）用例的预期结果。

# objective-c - 如何隐藏 NSScrollView 滚动器？

> ID：13203472
> 
> 赞同：0
> 
> 时间：2012-11-02T21:45:50.427
> 
> 标签：objective-c, macos, cocoa, hide, nsscrollview

我在运行时创建所有滚动视图，我想隐藏 NSScrollView 滚动条我不是说 [self setHasVerticalScroller:NO]; 然而

> ```
> [self setHasVerticalScroller:YES];
> [[self verticalScroller] setHidden:YES]; 
> ```

不起作用，但如果您将滚动条放在设计时，界面生成器上有一个选项。看看下面的图片。

![在此处输入图像描述](../Images/4eea467bd39289cbfb2907e0437a3130.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T09:13:14.217

你可以这样做：

```
NSScrollView *yourTableContainer=....
[yourTableContainer setHasVerticalScroller:NO];
[yourTableContainer setHasHorizontalScroller:NO]; 
```

# jquery - 如何使用范围在 jQuery 滑块中显示多个句柄？

> ID：13203479
> 
> 赞同：1
> 
> 时间：2012-11-02T21:46:19.550
> 
> 标签：jquery, jquery-ui, slider

我正在使用 jQuery 1.8.2 和 jQuery UI 1.9.1。这是我第一次尝试使用滑块。

我试图让四个滑块在同一页面上工作。第一个手柄显示得很好，但我无法让第二个手柄出现。

您可以在此处查看完整文件[http://dev.iqcatalogs.com/avcat/myiq/test-16.cfm](http://dev.iqcatalogs.com/avcat/myiq/test-16.cfm)

我究竟做错了什么？

```
<style>
#SliderWrapper {
    height: 200px;
    width: 200px;
}
.Slider {
    width: 150px;
    margin: 25px;
    float: left;
} 
.Label {
    width: 150px;
    float: left;
} 
</style>    

<div id="SliderWrapper">
<div class='Label'></div>
<div class="Slider" data-min='20' data-max='30'></div>
<div class='Label'></div>
<div class="Slider" data-min='30' data-max='40'></div>
<div class='Label'></div>
<div class="Slider" data-min='50' data-max='70'></div>
<div class='Label'></div>
<div class="Slider" data-min='80' data-max='100'></div>
</div>

<script>

$(".Slider").slider().each(function() {

    // SET VARS
    var $this = $(this),
        RangeLow = $this.data("min"),
        RangeHigh = $this.data("max"),
        ValueMin = RangeLow * .75, 
        ValueMax = RangeHigh * 1.25,
        Message = 'from' + ValueMin + ' to ' + ValueMax;

    $this.prev('div').text(Message);

    $this.slider({
        range: true,
        min: ValueMin,
        max: ValueMax,
        values: [RangeLow, RangeHigh],
        orientation: "horizontal"
    });

});

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:27:10.357

只需`.slider()`从您的`.each()`功能中删除。

IE： `$(".Slider").slider().each(function() {`

变成 `$(".Slider").each(function() {`

编辑：[这是一个小提琴](http://jsfiddle.net/3AdHe/)

您的初始代码不起作用的原因是因为您之前调用`slider()`过`each()`. 调用`slider()`您的类会为您的类添加一个默认滑块（单手柄），然后迭代滑块元素。这会导致您的`each()`块尝试在滑块元素上调用双手柄滑块，而不是您最初的目标类。

# python - 使用 urllib 和 BeautifulSoup 的随机 HTTP 503 错误

> ID：13203480
> 
> 赞同：3
> 
> 时间：2012-11-02T21:46:29.397
> 
> 标签：python, web-scraping, beautifulsoup, urllib2, urllib

我正在用 cookie 抓取网站。他们提供了多个下拉菜单，我正在遍历每个选项并重新捕获每个请求的会话 cookie。代码运行了一段时间，但我随机得到一个 503 错误。

我的代码将数据插入到 PostgreSQL 数据库中，为了帮助强调这个错误的随机性，我想分享一下，在插入少至 1200 个条目（行）和多达 4200 个之后，我收到了 503。似乎没有成为引发此异常的任何模式。我无法理解它。

如果有帮助，这是我的代码的一部分：

```
# -*- coding: utf-8 -*-

import scrape_tools
import psycopg2
import psycopg2.extras
import urllib
import urllib2
import json
import cookielib
import time

tools = scrape_tools.tool_box()
db = tools.db_connect()
psycopg2.extras.register_hstore(db)
cursor = db.cursor(cursor_factory = psycopg2.extras.RealDictCursor)

cookiejar = cookielib.CookieJar()
opener = urllib2.build_opener(
    urllib2.HTTPRedirectHandler(),
    urllib2.HTTPHandler(debuglevel=0),
    urllib2.HTTPSHandler(debuglevel=0),
    urllib2.HTTPCookieProcessor(cookiejar),
)

url ='http://www.website.com/'
soup = tools.request(url)

type_select = soup('select',{'id':'type'})
for option_tag in type_select:
    select_option = option_tag('option')
    for option_contents in select_option:
        if 'Select' in option_contents.contents[0]:
            continue
        type = option_contents.contents[0]
        type_val = option_contents['value']
        print 'Type', type

        get_more_url = 'http://www.website.com/' + type_val
        request2 = urllib2.Request(get_more_url)
        fp2 = opener.open(request2)
        html2_object = fp2.read()
        json_result = json.loads(html2_object)

        for json_dict in json_result:
            for json_key in json_dict:
                if len(json_key) == 0:
                    continue
                more_data = json_dict[json_key]
                print '   ', more_data

               (---Out of courtesy, I'll stop here--) 
```

（*请注意，`scrape_tools`是自定义模块）

我错过了 cookie 存储的东西吗？我错过了一些明显的东西吗？我似乎无法弄清楚为什么会这样。我已经“googled”、“stackoverflowed”等几个小时试图找到遇到类似问题的人，但没有找到任何东西。

我过去也使用 selenium 来抓取数据，并将其放在口袋里作为最后的手段，但这个项目很大，我宁愿 Firefox 一周内不占用服务器上的内存。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T21:57:07.550

HTTP 状态 503，“服务不可用”，意味着由于某种原因服务器无法处理您的请求——但这通常是一个暂时性错误。如果您稍等片刻并重试相同的请求，它可能会起作用。

您确实需要能够在大规模抓取作业中处理这种暂时性故障，因为互联网上充满了暂时性错误。连接失败或一直被丢弃。不过，您通常只需要一个简单的重试策略。

但是，状态 503 可能特别意味着您请求页面的速度太快了。如果您在页面获取之间没有延迟，出于礼貌起见，您应该添加一个。

# excel - 找不到错误：VLOOKUP 未返回值

> ID：13203482
> 
> 赞同：3
> 
> 时间：2012-11-02T21:46:32.110
> 
> 标签：excel, formatting, syntax-error, excel-formula, vlookup

我正在处理一个 excel 文件，我正在尝试使用 vLookUp 函数“映射”一些值。

vLookUp 函数的第一个参数让我头疼：该函数适用于某些值（以文本格式手动输入）...但不适用于预先生成的值（相同的值...但从 ERP 生成系统..）。我检查以确保我正在寻找“相同性质”的值（ text vs text ）......但我不知道为什么前 3 个值（手动输入）很好......但最后 3 个（预生成）给我一个#N / A错误：它必须是“格式”的差异......但我无法找出差异在哪里......

这是使用的公式：=VLOOKUP(D1;$A$1:$B$219;2;FALSE)

[实际文件](https://www.dropbox.com/s/89hm1g3a1l6em0z/vlookup.xlsx)

```
1008600 379.99      1008600 379.99
1008601 379.99      1008601 379.99
1010600 449.99      1010600 449.99
1010601 449.99      1010601 #N/A
1013600 489.99      1013600 #N/A
1014601 509.99      1014601 #N/A
1015600 569.99          
1018603 679.99          
1019600 809.99 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T21:52:44.337

使用这个公式将解决 RocketDonkey 强调的问题

`=VLOOKUP(TEXT(D1,"#"),$A$1:$B$219,2,FALSE)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T21:50:47.260

问题是您尚未将列中的值转换`A`为数字。由于查找范围中的前三个值本身就是字符串，因此它们与字符串化的数字相匹配。

为了修复，单击列中的一个数字`A`，按`Ctrl`+`Space`选择整个列，然后单击感叹号并选择`Convert to number`：

![在此处输入图像描述](../Images/ab0b438124e5b630936bf858f196ea37.png)

之后，您会注意到您之前的值现在显示错误，因此请按照相同的过程将它们转换为数字。@nutsch 的解决方案不需要您修改数据，因此如果您的数据类型不重要，这也是一个很好的解决方案:)

![在此处输入图像描述](../Images/3635b089d46489685d9db661d0397b9a.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-29T13:04:24.957

我可以强调一下 Barry Houdini 在上面 2012 年提出的一个引人注目的回复：

```
 =VLOOKUP(D1&"",$A$1:$B$219,2,FALSE) 
```

尽管您正在处理数字或数字或文本字符串的混合，但这确实有效（在 Excel 2010 中对我而言）。

向巴里致敬，你是真正的胡迪尼

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-05T20:09:35.630

这对我来说也是一个很大的痛苦（Excel 充满了愚蠢的假设）。我所做的是将整个列复制到文本编辑器，更改列以匹配查找列，然后将数据复制并粘贴回列中。这对我来说效果很好。

# zip - 必应 API 报告解压缩

> ID：13203487
> 
> 赞同：1
> 
> 时间：2012-11-02T21:47:01.547
> 
> 标签：zip, bing-api

我正在从 Bing Reporting API 加载 CSV 文件。文档说“报告文件已压缩；因此，您必须将其解压缩才能阅读报告。”所以我按照示例中所示保存原始文件，但无法让 SharpZipLib、7Zip 或 WinRar 读取压缩数据。

如何解压缩 Bing API 报告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:54:15.877

为了回答我自己的问题，我能够让 SharpZipLib 读取压缩数据，但前提是先将其复制到可查找的内存流中。这不是任意大文件的最佳解决方案，但我有理由相信我们的特定数据不会变得太大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-22T03:41:39.223

下载一些 bing 报告可能有点像歌舞 - 但流程有点像这样 -

*   请求报告（返回报告 ID）
*   开始轮询以查看报告何时准备就绪
*   报告准备好后，您将获得一个 URL，您可以在其中下载 zip 文件
*   解压缩文件，然后做你需要做的事情——但要回答你的问题.....
*   下面是一个非常简化的示例，简单地提取 zip 并在某处保存 - 希望这会有所帮助，祝你好运

    ```
    $zip_filepath = "location of the zip file";
    $archive = new ZipArchive();
    // file extension of extracted file

    if ($archive->open($zip_filepath) !== true) {
        throw new \Exception ("Decompress operation from ZIP file failed. Contact Ratio Rick");
    }

    $a = $archive->statIndex(0); 
    $file_name = $a['name'];

    $save_path = "enter save file path";

    $archive->extractTo($path . $file_name);
    $archive->close(); 
    ```

# sql-server - SQL Server INFORMATION_SCHEMA.VIEW_COLUMN_USAGE 未在表更新时更新

> ID：13203489
> 
> 赞同：1
> 
> 时间：2012-11-02T21:47:15.773
> 
> 标签：sql-server, views, system-views

我正在尝试了解有关 SQL Server 的更多信息，但遇到了一些我不理解的东西。我有一个 SQL Server 2008 数据库（免费版）。我有一个使用通配符定义的视图，如下所示：

```
Select * from ApplicantApplications 
```

当我检查系统视图“INFORMATION_SCHEMA.VIEW_COLUMN_USAGE”时，我定义的视图中的每一列都在那里。

后来，我更新了申请人申请表并添加了一个字段“TestValue”

当我回头查看系统视图“INFORMATION_SCHEMA.VIEW_COLUMN_USAGE”时，我添加到表中的新列不存在。我定义的视图中包含新列。

我是否需要做一些特别的事情才能使该列出现在系统视图中？我以为它会自动更新。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T22:07:25.733

查看需要重新编译，EXEC sp_refreshview Viewname。几年前我为此目的写了一个脚本

```
Declare @Name varchar(200)
Declare @SQL varchar(300)
DECLARE VCalc CURSOR FOR  Select name from sysobjects
OPEN VCalc
FETCH Next FROM VCalc INTO @Name
WHILE (@@FETCH_STATUS = 0)
    BEGIN
    Select @SQL='if exists (select * from dbo.sysobjects where id = object_id(N''[dbo].'+@Name+''') and OBJECTPROPERTY(id, N''IsView'') = 1) EXEC sp_refreshview '+@Name
    Print @SQL
    Exec (@SQL)
    FETCH Next FROM VCalc INTO @Name
    END
CLOSE VCalc
DEALLOCATE VCalc 
```

# iphone - MonoTouch iPhone 方向不匹配

> ID：13203490
> 
> 赞同：2
> 
> 时间：2012-11-02T21:47:18.600
> 
> 标签：iphone, xamarin.ios, orientation, warnings, monodevelop

我刚刚开始使用 MonoTouch，并且刚刚编写了通常的 Hello World 类型的应用程序，它做的很少。我试图获得一个完全干净的构建，没有错误或警告。

我收到警告：

```
Info.plist: Warning: Supported iPhone orientations are not matched pairs 
```

我知道为什么 - 这是因为肖像倒置没有被选中。但这是 Apple 的建议（实际上是 MonoTouch 的默认设置！）所以为什么要发出警告。

我如何摆脱这个警告？（显然不加颠倒）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T00:34:44.060

IIRC Apple 建议 iPhone 使用此行为，但 iPad 不推荐。插件可能不会对每种情况进行区分和警告。

> 我如何摆脱这个警告？

我不认为你可以（目前）。但是，这是一个警告（不是错误），因此不会对您的构建造成任何问题。

如果它真的困扰您，我建议您使用 Xamarin（在 MonoDevelop、iPhone 插件下）填写增强[错误报告。](http://bugzilla.xamarin.com)

# email - 如何将参数传递给 .msg 文件？

> ID：13203494
> 
> 赞同：3
> 
> 时间：2012-11-02T21:47:50.393
> 
> 标签：email, batch-file, outlook, autohotkey, msg

我发现了如何将参数发送到 outlook.exe 文件以创建新消息、添加地址、主题和正文：

运行 "C:\Program Files (x86)\Microsoft Office\Office14\outlook.exe" /c ipm.note /m emailaddress@server.com;&;subject=Subject&body=Body_Of_Text

现在我很好奇我是否可以做同样的事情，但对 .msg 文件。我有一个 .msg 文件，其中已经嵌入了主题和地址，但我需要弄清楚是否可以在打开文件时将文本正文传递到文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T20:31:35.070

使用诸如[Redemption之类的](http://www.dimastr.com/redemption/download.htm)[MSG 库](http://www.codeproject.com/Articles/32899/Reading-an-Outlook-MSG-File-in-C)创建一个独立的 MSG 文件或购买诸如[Mailbee.NET 之](http://www.afterlogic.com/mailbee-net/email-components)类的商业许可证会更好。存在许多其他选项，但是一旦您创建了 MSG，您就可以[通过 Outlook 使用](http://office.microsoft.com/en-us/outlook-help/command-line-switches-HP001003110.aspx)[参数](http://office.microsoft.com/en-us/outlook-help/command-line-switches-HP001003110.aspx)打开它。[`/f`](http://office.microsoft.com/en-us/outlook-help/command-line-switches-HP001003110.aspx)

`Run "C:\Program Files (x86)\Microsoft Office\Office14\outlook.exe" /f "C:\Downloads\myCustomMessage.msg"`

# java - Java 和 SwingSet

> ID：13203498
> 
> 赞同：-3
> 
> 时间：2012-11-02T21:48:06.230
> 
> 标签：java

我见过一些图书馆调用swingset。但我是java新手，不知道它是什么。谁能告诉我它是什么。我听说过秋千，但没有秋千

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T22:02:10.827

这只是一些改进 Swing 的库。我有一个可以连接到 ResultSet 的网格

# ios - Core Graphics 绘图在 iPod 第 4 代及更高版本上滞后，但在第 3 代 iPod touch 上流畅？

> ID：13203501
> 
> 赞同：1
> 
> 时间：2012-11-02T21:48:14.120
> 
> 标签：ios, xcode, drawing, core-graphics

我开发了一个使用核心图形的简单绘图应用程序，使用核心图形用手指在屏幕上绘图。

在第 3 代 iPod touch 上，它运行非常流畅，但任何更好或更近的东西都会像疯了一样滞后，即使在新的 iPhone 5 上也是如此！

谁能解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:05:27.393

听起来可能与视网膜显示有关。您可以尝试使用`CGContextSetInterpolationQuality`来加快速度，甚至将内容比例因子更改为更低的值。如果那没有帮助，可能是输入逻辑/时序。

# java - JScrollPane 在 JPanel 的剩余区域上最大化嵌入组件

> ID：13203504
> 
> 赞同：0
> 
> 时间：2012-11-02T21:48:22.580
> 
> 标签：java, swing, jpanel, jscrollpane, jlist

看起来好像当我将 JTextArea 或 JList 放在 JScrollPane 中时，组件在它所在的 JPanel 的剩余区域上最大化：

```
...
this.topPnl = new JPanel();

this.topPnl.setLayout(new BoxLayout(this.topPnl, BoxLayout.X_AXIS));

this.selFileList = new JList(new String[]{"one", "two", "three", "four"});
JScrollPane scroll = new JScrollPane(this.selFileList);

this.topPnl.add(scroll);
... 
```

如果我没有在 JScrollPane 中设置 JList，而只是将其直接添加到 JPanel，则 JList 看起来足够大以显示所有项目，但我想控制容器的大小，即大小固定，以防万一不同数量的元素很高，然后有滚动条，这是使用 JScrollPane 背后的整个想法。

我想知道我做错了什么以及如何完成我上面描述的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T22:30:11.790

您可能正在寻找，[`setVisibleRowCount()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html#setVisibleRowCount%28int%29)这取决于`Scollable`. [这里](https://stackoverflow.com/q/7229226/230513)`JList`有一个例子[，这里](https://stackoverflow.com/a/5760093/230513)有一些有用的警告。

# fortran - IBM xlf 编译器的双精度

> ID：13203507
> 
> 赞同：1
> 
> 时间：2012-11-02T21:48:34.677
> 
> 标签：fortran, precision

我正在尝试将程序从 Red Hat Linux 移植到 IBM AIX，但 IBM 系统的精度似乎与 Red Hat 系统不同。有谁知道为什么会这样？这是一个例子：

```
program main
implicit none
real(8) a
a=0.2D0
print *,a
end program 
```

在 Red Hat 上，我得到输出：

```
0.200000000000000 
```

在 AIX 上，我得到输出：

```
0.200000000000000011 
```

我正在使用的系统版本：

IBM XL Fortran for AIX，V13.1 (5724-X15) 版本：13.01.0000.0005

和

Linux 2.6.18-8.el5 x86_64

ifort 版本 10.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:56:21.920

这可能只是默认打印位数的差异。`0.2`不能准确地表示为二进制浮点数，所以你总是会在最低有效位上有一些垃圾。为浮点数打印的默认位数`ifort`只是设置为足够低，以至于在这种情况下您看不到它。实际计算（很可能）具有相同的精度。用两个编译器试试这个：

```
print '(f24.20)',0.2d0 
```

这将向您显示`ifort`最后也有这些。在我的电脑上，它打印`0.20000000000000001110`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T22:08:12.023

print 语句中的 * 表示列表定向格式。对于实常数，使用位数的“合理**的处理器相关值”（F2008 10.10.4 p6）。**您已经更改了 Fortran 处理器，而这些处理器只是选择了不同数量的数字作为合理的数字。

如果要显式控制输出格式，请使用指定字段宽度、十进制位数和（可能）指数字符数的显式输出格式。这消除了处理器依赖性。

两个处理器的变量的内存精度可能相同（假设 KIND(1.0D0) == 8 并且 KIND 为 8 表示 IEEE 双精度），请注意 0.2 在该浮点表示中不能完全表示。

# sql-server - 不同 ID 字段上的 CTE 链接

> ID：13203513
> 
> 赞同：0
> 
> 时间：2012-11-02T21:49:34.027
> 
> 标签：sql-server, tsql, common-table-expression

我正在尝试创建一个从 3 个不同表中获取数据的 SQL 查询。我的想法是使用 CTE 从 2 个表中收集信息，然后进行右连接以将数据添加到我的其余查询中。我需要从每个字段中引入不同的数据，但遇到了臭名昭著的错误`multi-part identifier could not be bound` 这是我到目前为止所写的：

```
with cte1 as
(
SELECT          
[Physician ID] as InternalIdentifier, NPI, [Last Name] as LastName, [First Name]     
as     
FirstName,
Physician_T1HYCPP.Specialty, DOB, Degree, Department, [State License Number], [UPIN Number],    
[Physician Status]
FROM  Physician_T1HYCPP left outer JOIN PhysicianFile 
on Physician_T1HYCPP.[Physician ID] = PhysicianFile.[TSI MD Number]
where NPI <> ''
),
cteView
AS
(
Select [Doctor_Number], Address, City, State, Zip, Phone, Fax
from V_PhysicianList
)
Select 
InternalIdentifier, NPI, LastName, FirstName,
Specialty, DOB, Degree, Department, [State License Number], [UPIN Number],
[Physician Status],     
[Doctor_Number],
Address,City, State, Zip, Phone, Fax
from cte1
right outer join cteView on
V_PhysicianList.[Doctor_Number] = PhysicianFile.[Doctor Number] 
```

以下是具体错误：

```
Msg 4104, Level 16, State 1, Line 1
The multi-part identifier "V_PhysicianList.Doctor_Number" could not be bound.
Msg 4104, Level 16, State 1, Line 1
The multi-part identifier "PhysicianFile.Doctor Number" could not be bound. 
```

这里的目标是从第一个 CTE 中的 2 个表中引入所有字段，然后“合并”来自第二个 CTE 的字段，以便地址等在最终结果集中得到重视。如何确保 cte1 和 cteView 中的字段正确合并？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:23:48.793

在最后的 SELECT 中，您从 CTE 中选择，但在 JOIN 子句中引用基表。只需使用正确的前缀：

```
Select 
InternalIdentifier, NPI, LastName, FirstName,
Specialty, DOB, Degree, Department, [State License Number], [UPIN Number],
[Physician Status],     
[Doctor_Number],
Address,City, State, Zip, Phone, Fax
from cte1
right outer join cteView on
cteView.[Doctor_Number] = cte1.[Doctor Number] 
```

但是，您还需要在 cte1 中包含该列。在最终选择期间，SQL Server 只能访问其中提到的表、视图或 CTE，因此它无法解析对基表的引用。

# javascript - JavaScript 日期后缀格式

> ID：13203518
> 
> 赞同：5
> 
> 时间：2012-11-02T21:50:13.467
> 
> 标签：javascript

我已经对此进行了尽职调查，但尚未取得任何成功。使用 JavaScript 相当环保，我正在寻求一些帮助。我想显示日期

```
NOV2012<br>
2<sup>nd</sup><br>
5:00 PM 
```

除了能够将日期后缀更改为 st、nd、rd 或 th （视情况而定）之外，我一切正常（不是我的脚本）。

这就是我所拥有的：

```
<pre>  <abbr title="Month">

            <script type="text/javascript">
                      var d=new Date();
                      var month=new Array(12);
                      month[0]="Jan";
                      month[1]="Feb";
                      month[2]="Mar";
                      month[3]="Apr";
                      month[4]="May";
                      month[5]="Jun";
                      month[6]="Jul";
                      month[7]="Aug";
                      month[8]="Sep";
                      month[9]="Oct";
                      month[10]="Nov";
                      month[11]="Dec";
                      document.write(month[d.getMonth()]);
</script></abbr>  

<script type="text/javascript">
    var d = new Date()
    document.write(d.getDate())

    ordinal : function (number) {
            var d = number % 10;
            return (~~ (number % 100 / 10) === 1) ? 'th' :
                (d === 1) ? 'st' :
                (d === 2) ? 'nd' :
                (d === 3) ? 'rd' : 'th';
        }
    });
    </script>
    <sup>%</sup> 
    <abbr><script type="text/javascript">
    var d = new Date()
    document.write(d.getFullYear())
    </script></abbr>
              <sub>

              <script type="text/javascript">
                      <!--
                      var currentTime = new Date()
                      var hours = currentTime.getHours()
                      var minutes = currentTime.getMinutes()
                      if (minutes < 10){
                      minutes = "0" + minutes
                      }
                      document.write(hours + ":" + minutes + " ")
                      if(hours > 11){
                      document.write("PM")
                      } else {
                      document.write("AM")
                      }
                      //-->
            </script>

          </sub>
</pre> 
```

我知道问题出在这部分：

```
<pre> 
<script type="text/javascript">
    var d = new Date()
    document.write(d.getDate())

    ordinal : function (number) {
            var d = number % 10;
            return (~~ (number % 100 / 10) === 1) ? 'th' :
                (d === 1) ? 'st' :
                (d === 2) ? 'nd' :
                (d === 3) ? 'rd' : 'th';
        }
    });

    </script>

   < sup > % < /sup >
</pre> 
```

但我似乎无法找到正确的解决方法。这是它坐的地方：

[http://www.bcreativeservices.com/](http://www.bcreativeservices.com/)

一如既往地感谢你。

乙

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-04T18:23:40.023

首先，分配序数时出现语法错误。*看起来*您最初试图创建一个包含键序号的对象，但后来更改了它。

这可能是你想要的：

```
function ordinal(number) {
  var d = number % 10;
  return (~~ (number % 100 / 10) === 1) ? 'th' :
         (d === 1) ? 'st' :
         (d === 2) ? 'nd' :
         (d === 3) ? 'rd' : 'th';
} 
```

哪个有效，但是双按位 NOT`~~`使您的代码有点难以理解。我不得不去查一下它是什么（我从不使用按位数学），我建议你不要使用它（当然，除非你有充分的理由使用它）。

根据[this question on the subject](https://stackoverflow.com/questions/5971645/what-is-the-double-tilde-operator-in-javascript)，您确实可以提高速度。但是，这些操作只需要几微秒，因此改进实际上可以忽略不计，只会使您的代码更难理解。

* * *

不久前，我写了一个函数来为日期提供这些后缀。经过一些细微的修改（我将我的添加到 Date 原型中），你会得到：

```
function ordinal(date) {
  return (date > 20 || date < 10) ? ([false, "st", "nd", "rd"])[(date%10)] || "th" : "th";
} 
```

这适用于任何有效日期。

编辑：在我看来，我的序数函数版本可能同样无法阅读。为了理智起见，这里有一个具有相同逻辑的不那么精简的版本：

```
function ordinal(date) {
  if(date > 20 || date < 10) {
    switch(date%10) {
      case 1:
        return "st";
      case 2:
        return "nd";
      case 3:
        return "rd";
    }
  }
  return "th";
} 
```

# c# - 每层次表和未来证明

> ID：13203519
> 
> 赞同：1
> 
> 时间：2012-11-02T21:50:18.713
> 
> 标签：c#, nhibernate, database-design, class-table-inheritance

我正在开发一个使用 NHibernate 将“命令”存储在数据库中的应用程序。每个命令都有一组参数。例如，“sleep”命令有一个持续时间，“set text”有一个字符串值。所有这些命令都派生自相同的`Command`基本类型。

我希望将来可以添加其他命令，以尽可能减少对数据库的影响。我最初的反应是使用[按层次结构表的](http://ayende.com/blog/3941/nhibernate-mapping-inheritance)模式，因为唯一需要修改的模式是将一列添加到命令表中。

我还考虑使用 TPH 模式，但映射通用列而不是特定列，然后将它们转换为类本身中的特定（强类型）属性值（即使用强类型公共属性映射映射的通用字符串属性） . 这样，如果我的列数等于任何命令可能需要的最多参数，我根本不必更改表。不过，这些在我的脑海里似乎有点骇人听闻......

作为数据库设计和 NHibernate 使用的相对新手，*有人可以指出这些方法中的漏洞，或者提出更好的建议吗？* 我试图避免更改架构（尽可能），同时允许未来的扩展和简单的 C# API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:06:33.147

查看一个`BaseImmutableUserType<T> : IUserType`实现，这将允许您使用通用列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T22:19:40.893

IMO，您最好的选择是使用包含单个 XML 类型列的表，而不是在可能会或可能不会模拟实际域问题的继承层次结构中烘焙。众所周知，XML 列是一种发展数据模型的无摩擦方式，尤其是您预计随着时间的推移可能会发生显着变化的数据模型。

XML 列可以存储将您的命令对象表示为由 .NET BCL 类序列化或使用您自己的自定义 XML 序列化程序（请参阅 参考资料）进行序列化所需的整个对象图`IXmlSerializable`。

NHibernate 本身支持 XML SQL Server 列类型。谷歌搜索应该带回几个如何进行映射等的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T16:13:56.433

我最终从@mxmissile 那里得到了答案，这里是实现中有趣部分的详细信息，希望能帮助其他人。总体上非常干净，所有逻辑都在映射中处理。

```
/// <summary>NHibernate class mapping file for <see cref="Action"/>.</summary>
internal sealed class ActionMapper : ClassMap<Action>
{
    /// <summary>Constructor.</summary>
    public ActionMapper()
    {
        DiscriminateSubClassesOnColumn("ClassType").Not.Nullable();

        Id(x => x.Id);
    }
}

/// <summary>NHibernate class mapping file for <see cref="SetText"/>.</summary>
internal sealed class SetTextMapper : SubclassMap<SetText>
{
    public SetTextMapper()
    {
        DiscriminatorValue(typeof(SetText).Name);

        Map(x => x.Text).Column("Arg1").CustomType<StringArgType>();
    }
}

/// <summary>NHibernate class mapping file for <see cref="Sleep"/>.</summary>
internal sealed class SleepMapper : SubclassMap<Sleep>
{
    public SleepMapper()
    {
        DiscriminatorValue(typeof(Sleep).Name);

        Map(x => x.Duration).Column("Arg1").CustomType<TimeSpanArgType>();
    }
}

internal class StringArgType : BaseImmutableUserType<String>
{
    public override SqlType[] SqlTypes
    {
        // All arguments map to strings in the database
        get { return new[] {new SqlType(DbType.String)}; }
    }

    public override object NullSafeGet(IDataReader Reader, string[] Names, object Owner)
    {
        return NHibernateUtil.String.NullSafeGet(Reader, Names[0]).As<String>();
    }

    public override void NullSafeSet(IDbCommand Command, object Value, int Index)
    {
        NHibernateUtil.String.NullSafeSet(Command, Value, Index);
    }
}

internal class TimeSpanArgType : BaseImmutableUserType<TimeSpan>
{
    public override SqlType[] SqlTypes
    {
        // All arguments map to strings in the database
        get { return new[] {new SqlType(DbType.String)}; }
    }

    public override object NullSafeGet(IDataReader Reader, string[] Names, object Owner)
    {
        return NHibernateUtil.TimeSpan.NullSafeGet(Reader, Names[0]).As<TimeSpan?>();
    }

    public override void NullSafeSet(IDbCommand Command, object Value, int Index)
    {
        object val = DBNull.Value;

        if (Value != null)
        {
            TimeSpan timespan = (TimeSpan)Value;
            val = timespan.Ticks;
        }

        NHibernateUtil.String.NullSafeSet(Command, val, Index);
    }
} 
```

# regex - ActionScript 中的负向回溯

> ID：13203520
> 
> 赞同：0
> 
> 时间：2012-11-02T21:50:23.840
> 
> 标签：regex, actionscript-3, emoticons, negative-lookbehind

我正在尝试编写一个匹配大多数常见表情符号的正则表达式，但如果它们位于链接内，则不会。

*   我的表情是`:P` `=P` `:-P` `=-P` `:)` `:-)` `=)` `=-)` `:/` `=/` `:-/` `=-/` `:o` `=o` `:-o` `=-o` `:(` `:-(` `=(` `=-(` `:D` `:d` `:-D` `:-d` `=D` `=d` `=-D` `=-d`

*   我不想`http://`匹配表情符号`:/`

*   我也不想`http://something.com?feature=player`在`:p`

*   我不能使用空格作为分隔符，因为我希望人们能够像这样背靠背键入多个表情符号：`:):):)`

我目前**几乎**可以使用的正则表达式是这样的：

```
(?<!http)([:=]{1}-?[\)\/\(ODP\]\[\\])|(;(-)?\)) 
```

问题是链接中仅省略了第一个表情符号匹配，而不是全部。

我一直在使用[Grant Skinner 的 Regexr](http://gskinner.com/RegExr/)进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:13:43.323

匹配正则表达式中的所有 URL 本身就是一项非常复杂的任务……也许，除非您觉得特别有挑战性，否则不值得尝试。编写一个解析所需内容的函数会容易得多。但是，一个很好的近似 URL 可能是`/\w+([-+]\w+)*:[^\s]+/`（一些示例可以让您更好地了解它的原因：`svn+ssh://localhost`、、、`ftp://site_name.ouch.auch/~directory/?paramter:=)#anch:o)r`）`https://Новости-Советского-Информ-Бюро.рф/С%25Новым%25Годом!`。所有这些都是有效的 URL :)

因此，我的策略是首先消除看起来可能是 URL 的内容（这有时也会引起微笑，因为用户最终可能会通过写笑脸来创建有效的 URL），然后解析其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T22:00:25.567

尝试模式

```
(?:(?<!http)(?<!http:):/(?![a-zA-Z0-9])|:-/|=-?/|[:=]-?[()]|[:=]-?[PDdo](?!$)(?![a-zA-Z0-9=])) 
```

# css - 仅通过使用类来通过 CSS 重叠图像？

> ID：13203522
> 
> 赞同：0
> 
> 时间：2012-11-02T21:50:25.960
> 
> 标签：css

请看一下这个：

```
<div class="box photo col2 normaloffer"> 
```

css（简化）如下：

```
.box {
  margin: 5px;
  padding: 5px;
  font-size: 11px;
  line-height: 1.4em;
  float: left;
  border:1px solid #DFDFDF;
  -webkit-border-radius: 5px;
     -moz-border-radius: 5px;
          border-radius: 5px;
}

.normaloffer {
    background: #D8D5D2;
}

.col2 { width: 180px; } 
```

呈现：

![在此处输入图像描述](../Images/f91cef3dcd97d7ec721ea88a5607aed9.png)

好吧，我需要在每个图像的顶部中心重叠一个图像，我知道制作一些 div 并安排它们我可以做到这一点，但我想知道，我可以使用一个类来做这个吗？因为我有时想重叠图像，有时不重叠。就像是：

```
<div class="box photo col2 normaloffer OVERLAP">
.OVERLAP { // no idea what to put in here, is possible? } 
```

**编辑** 结果：![在此处输入图像描述](../Images/fddff2c9d486e09d5db6f3b9cc147a95.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T22:04:41.727

您可以使用 :after 伪类在 div 内部创建一个元素，并将其放置在绝对定位中。

```
.overlap {
    position:relative;
}

.overlap:after {
    content:' ';
    position:absolute;
    top:0;
    left:60px;
    width:60px;
    height:60px;
    background:url("http://placekitten.com/60/60") no-repeat center center red;
} 
```

![在此处输入图像描述](../Images/3fa0f1a1007351e23a9c765c5989c576.png)

**请参阅工作示例：http: [//jsfiddle.net/WpBKr/](http://jsfiddle.net/WpBKr/)**

# wcf - 如何调用返回 bool 的 WCF 数据服务获取“不能包含关键谓词或空括号”。

> ID：13203525
> 
> 赞同：2
> 
> 时间：2012-11-02T21:50:56.123
> 
> 标签：wcf, odata

我有一个带有以下签名的 WCF：

```
 [WebGet]
    public bool UserHasRoles(string UserName, string ApplicationName)
    {
        if (SecurityCheck())
        {
            UserRightsApplicationEntities context = new UserRightsApplicationEntities();
            return context.UserRolesAndFunctions.Where(urf => urf.LogonName == UserName && urf.ApplicationName == ApplicationName).Count() > 0;
        }

        return false;
    } 
```

我可以编译并运行该服务，但是当我调用它时，我得到了错误；“请求 URI 无效。'UserHasRoles' 段不能包含关键谓词或空括号”。

任何帮助，将不胜感激。

这是调用代码：

```
 public static bool UserHasRoles(string applicationName, string userName)
    {
        DataServiceQuery<bool> q = GetApplicationServicesDataContext()
            .CreateQuery<bool>(Constants.ServiceOperations.UserHasRoles)
            .AddQueryOption(Constants.ClassProperties.Application.ApplicationName, string.Format("'{0}'", applicationName))
            .AddQueryOption(Constants.ClassProperties.User.UserName, string.Format("'{0}'", userName));

        bool userHasRoles = q.Execute().FirstOrDefault();
        return userHasRoles;
    } 
```

这是网络电话：

`"http://svr-webdev1:8081/UserRightsApplicationService.svc/UserHasRoles()?ApplicationName='User Rights Management'&UserName='domain\username'"`

有趣的是，如果我从 UserHasRoles 中删除括号，例如：

`"http://svr-webdev1:8081/UserRightsApplicationService.svc/UserHasRoles?ApplicationName='User Rights Management'&UserName='domain\username'"`

它工作正常。

好的，所以我尝试了另一种似乎可行的方法，但不确定为什么：

```
 public static bool DoesUserHaveRoles(string applicationName, string userName)
    {
        string queryString = string.Format("UserHasRoles?ApplicationName='{0}'&UserName='{1}'", applicationName, userName);

        bool doesUserHaveRoles = (GetApplicationServicesDataContext().Execute<bool>(new Uri(queryString, UriKind.Relative))).FirstOrDefault();
        return doesUserHaveRoles;
    } 
```

# java - What exactly is a class and an object in java, please explain in detail

> ID：13203532
> 
> 赞同：-4
> 
> 时间：2012-11-02T21:51:37.943
> 
> 标签：java, class, object

I'm a beginner in java, and I've gone through various definitions of OOP concepts, but I've never really understood the concept of a class and object, so could someone please explain this to me. and please don't just say an object is an instance of a class , what exactly does that mean? examples would help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:57:39.470

In most OOP languages, an "object" is a data-structure upon which you can perform a fixed set of actions or operations and a "class" is the means used to define what data an object contains (or has access to) and what operations it can perform or can be performed upon it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T22:11:47.730

**Object**

*   An object is a thing, both tangible and intangible, that we can imagine.

**Class**

*   A class is a template definition that dictates what objects can and cannot do
*   A class is a prototype from which objects are created

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T22:02:21.020

Okay first off I'd recommend reading [The Java (tm) Tutorials](http://java.sun.com/docs/books/tutorial/), wouldn't hurt watching videos on [Udacity](http://www.udacity.com/overview/Course/cs262/CourseRev/apr2012) too.

```
public class Student {
    private int id;
    private String major;
    private Integer age;
    public Student(int id, String major, Integer age){
        this.id = id;
        this.major = major;
        this.age = age;
    }
    public int getId() {
        return this.id;
    }
    public String getMajor() {
        return this.major;
    }
    public Integer getAge(){
        return this.age;
    }
    . . .
} 
```

So an object in this instance is the data type `Integer` and the primitive object is `int`. Each of `id`, `major`, `age` are instance variables of `Student`. Constructors are used to create objects, each time you initiate a constructor you are creating a new instance (every instance is different from the last).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T22:12:12.443

A Class is a definition of some *thing*. An Object is one of those *things*.

One of the most common examples is a car. Say you have a class `Car`. That class defines everything about the car. Size, color, make, model, and other things that describe a car are called properties.

A car can also do things, like move, accelerate, turn, reverse, shift. These are called methods. They are what the car can do (some languages call these "actions", which I think is a better term).

When you combine properties and methods into a group, you would call that a [class](http://en.wikipedia.org/wiki/Class_%28computer_programming%29), because together they define a car (or whatever you are defining).

An object is an instance of a car. That is the simplest way to put it. But what is an instance? [According to wikipedia](http://en.wikipedia.org/wiki/Instance_%28computer_science%29):

> In object-oriented programming an instance is an occurrence or a copy of an [object](http://en.wikipedia.org/wiki/Object_%28computer_science%29).

That probably seems cyclical, calling an instance an object and vice versa. But technically, an object is a location in memory having a value that can be referenced elsewhere. To make things simpler, we combine the two to mean the same thing. *An instance is an object, an object is an instance*.

## Make it Short

Perhaps the shortest way I can put it is like this:

> A class is a definition, and an object is something that fits that definition.

## Applications in Java

Since you tagged your question with Java, I will continue my example in Java. Let's go back to the car.

The code for what we described above could look something like this:

```
class Car {
  /* Properties */
  int size;
  Color c;
  String make;
  String model;

  /* Constructor */
  Car() {
    // constructor code...
  }

  /* Methods */
  void move() { }
  void accelerate() { }
  void turn() { }
  void reverse() { }
  void shift() { }
} 
```

I've labeled each group of things here. We have the properties at the top; the things *describe* a car. And we have the methods at the bottom; the things that a car can *do*.

But in the middle I put something else. It is something that is required to have in almost every class: the *constructor*. What a constructor does is it instantiates a class into an object.

Using the definitions I made above, we can rewrite that last sentence like this:

> A constructor puts an occurrence of a class into a location in memory.

Hopefully this helps you understand classes a little better.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T22:17:49.393

A class can be seen as a definition of an object; the idea of what makes up a type of object. The object is an example of that class.

Take a (real-world, not the OS) window, such as the one I'm looking out right now. "Window" is a *class* - it has a defined operation (open()), and properties (height and width). This *particular* window I'm looking out of (this *instance* of a Window; this object of the Window class) can be opened by turning a crank, and it is ~60 inches high and 30 inches wide. In java:

```
class Window {
  int width;
  int height;

  void open() {
  }
}

Window myWindow = new Window();  //instance of the class
myWindow.width = 30;
myWindow.height = 60; 
myWindow.open(); 
```

# android - Android 启动器在启动器中按主页以转到默认屏幕

> ID：13203536
> 
> 赞同：4
> 
> 时间：2012-11-02T21:52:26.973
> 
> 标签：android, android-intent, android-launcher, android-homebutton

在默认的 android 启动器中，在另一个活动中按 home 将启动启动器。在启动器中再次按主页将重置为默认主屏幕页面。我不明白这是怎么做到的。无论启动器是否在前台，Android 都会发送相同的意图。用户应用程序也无法拦截 Home 键。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-02T22:21:37.120

> 无论启动器是否在前台，Android 都会发送相同的意图。

正确的。

> 用户应用程序也无法拦截 Home 键。

正确的。

> 我不明白这是怎么做到的。

如果调用`startActivity()`将导致`Intent`传递到活动的现有实例，则不会创建新实例（根据定义）并且使用`onNewIntent()`而不是调用现有实例`onCreate()`。

在主屏幕的情况下，通常真正*是*主屏幕的活动将使用`android:launchMode="singleTask"`或`android:launchMode="singleInstance"`在清单中，例如：

```
 <activity
        android:name="Launcher"
        android:launchMode="singleTask"
        android:clearTaskOnLaunch="true"
        android:stateNotNeeded="true"
        android:theme="@style/Theme"
        android:screenOrientation="nosensor"
        android:windowSoftInputMode="stateUnspecified|adjustPan">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.HOME"/>
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.MONKEY" />
        </intent-filter>
    </activity> 
```

（来自[AOSP 中的旧启动器](https://github.com/android/platform_packages_apps_launcher/blob/master/AndroidManifest.xml)）

然后，活动可以实现`onNewIntent()`做某事。在上述旧启动器的情况下，[它`onNewIntent()`包括](https://github.com/android/platform_packages_apps_launcher/blob/master/src/com/android/launcher/Launcher.java)：

```
 if (!mWorkspace.isDefaultScreenShowing()) {
                mWorkspace.moveToDefaultScreen();
            } 
```

如果用户当前正在查看由主屏幕活动管理的一组屏幕中的某个其他屏幕，这可能会将 UI 动画化回默认屏幕。

`onNewIntent()`触发而不是使用的另一种方法`android:launchMode`是在您调用时选择性地执行它，方法是`startActivity()`在 中包含适当的标志`Intent`，例如`FLAG_ACTIVITY_REORDER_TO_FRONT`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-16T04:58:26.213

更具体地说，做

```
@Override
protected void onNewIntent(Intent intent) {
    super.onNewIntent(intent);
    if ((intent.getFlags() & Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT) !=
            Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT) {
        goHome();
    }
} 
```

# frameworks - CFML中如何引用全局函数库？

> ID：13203538
> 
> 赞同：0
> 
> 时间：2012-11-02T21:52:39.220
> 
> 标签：frameworks, coldfusion, railo, cfml, code-structure

依赖注入允许您避免直接引用对象外部的对象和范围。您改为引用注入的依赖项。

我想知道全局函数库的最佳实践。我目前将我的功能存储在服务器范围内。我希望我的项目能尽快开源，并让其他开发人员易于理解。我希望应用程序更容易编写单元测试并且更松散耦合。

我应该将服务器范围注入到每个使用全局函数的对象中吗？

还是应该在引用这些函数时将“server.functions.myFunction()”范围直接放在组件中？

以下是代码示例：

方法一：

```
<cfcomponent>
    <cffunction name="init">
        <cfscript>
           server.functions.myFunction();
        </cfscript>
    </cffunction>
</cfcomponent> 
```

方法二：

```
<cfcomponent>
    <cffunction name="init">
        <cfargument name="serverScope" type="struct" required="yes">
        <cfscript>
            variables.serverScope=arguments.serverScope;
            variables.serverScope.functions.myFunction();
        </cfscript>
    </cffunction>
</cfcomponent> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:10:38.820

我从来没有把我的答案正式化。根据您在评论中所说的话，我会这样做：

*   将您的全局库分解为更多特定用途的组件，然后将其视为对象（有状态），或者 - 出于所有意图和目的，静态库（无状态）。
*   是的，使用依赖注入*仅*注入特定情况所需的那些。

为了方便起见，我不会破坏封装。

# android - 找出视图中有一个 Horizo ntalScrollView

> ID：13203542
> 
> 赞同：0
> 
> 时间：2012-11-02T21:53:03.713
> 
> 标签：android, android-layout

试图弄清楚 ViewGroup 中的任何视图是否是 Horizo​​ntalScrollView，由于某种原因，这段代码不能很好地工作。如果有人可以帮助我了解我做错了什么，那么我将不胜感激。

我确定我的布局中有一个水平滚动视图，并且它是我传入的 ViewGroup 的子视图。

```
private boolean isAnyViewHorizontallyScrollable(ViewGroup viewGroup) {
    for (int i=0; i < viewGroup.getChildCount(); i++) {
        if (viewGroup.getChildAt(i) instanceof HorizontalScrollView) {
            Log.d(TAG, "Found a horizontal scroll view");
            return true;
        } else if (viewGroup.getChildAt(i) instanceof ViewGroup) {
            isAnyViewHorizontallyScrollable((ViewGroup)viewGroup.getChildAt(i));
        }
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:58:18.970

你递归地调用你的方法，但你没有对这些结果做任何事情......
当你找到一个嵌套的 Horizo​​ntalScrollView 时尝试返回 true，如下所示：

```
else if (viewGroup.getChildAt(i) instanceof ViewGroup &&
         isAnyViewHorizontallyScrollable((ViewGroup)viewGroup.getChildAt(i)))
    return true;
} 
```

# java - Android 位图到列表视图

> ID：13203544
> 
> 赞同：3
> 
> 时间：2012-11-02T21:53:17.223
> 
> 标签：java, android

我正在尝试将位图从 url 传递到我的列表我将位图作为对象传递但我的图像不会显示

```
for(int i=0;i<CarsArray.length();i++){
    HashMap<String, Object> map = new HashMap<String, Object>();

    JSONObject e = CarsArray.getJSONObject(i);

    map.put("InventoryID",  String.valueOf(i));
    map.put("Year", " " +  e.getString("Year") + " " + e.getString("Make") + " " + e.getString("Model"));
    map.put("Stock Number", "Stock#: " + e.getString("StockNumber"));
    map.put("VIN", "VIN: " + e.getString("VIN"));
    map.put("Color", "Exterior Color: " + e.getString("ExteriorColor"));
    map.put("InColor", "Interior Color: " + e.getString("InteriorColor"));
    map.put("Mileage", "Odometer: " + e.getString("Mileage"));
    map.put("Price", "$" + e.getString("Price") + "0");
    map.put("VehicleStatus", e.getString("VehicleStatus"));
    map.put("InsertedDate", e.getString("InsertedDate"));
    bimage =  getBitmapFromURL(imageUrl);
    map.put("Image", bimage);
    mylist.add(map);

}
ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.parsejson,
        new String[] { "Year", "Stock Number", "VIN", "Color", "Mileage", "Price", "VehicleStatus", "InColor", "InsertedDate", "Image"},
        new int[] { R.id.item_title, R.id.item_subtitle, R.id.item_subtitle2, R.id.item_subtitle3 , R.id.item_subtitle4,
                R.id.item_subtitle5, R.id.item_subtitle6, R.id.item_subtitle8,  R.id.item_subtitle9, R.id.imageView1});

setListAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T19:51:27.400

使用自定义适配器并覆盖 getView() 方法。在该方法内部使用这些代码行来显示图像：

```
ImageView imageView = (ImageView) findViewById(R.id.imageView1);
imageView.setImageBitmap(mylist.get("Image")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T09:35:15.147

替换您的以下代码行

```
bimage =  getBitmapFromURL(imageUrl);
map.put("Image", bimage); 
```

和

```
bimage =  getBitmapFromURL(imageUrl);
Drawable d = new BitmapDrawable(getResources(),bitmap);
 map.put("Image", d); 
```

# ruby - 使用 EventMachine 和 RabbitMQ 的 RPC

> ID：13203545
> 
> 赞同：4
> 
> 时间：2012-11-02T21:53:17.397
> 
> 标签：ruby, rabbitmq, amqp, eventmachine

我已经开始使用 AMQP gem doc 中提供的 RabbitMQ [RPC 示例代码](http://rubyamqp.info/articles/patterns_and_use_cases/#code_example)，尝试编写非常简单的代码来执行*同步*远程调用：

```
require "amqp"

module RPC
  class Base
    include EM::Deferrable

    def rabbit(rabbit_callback)
      rabbit_loop = Proc.new {
        AMQP.connect do |connection|
          AMQP::Channel.new(connection) do |channel|
            channel.queue("rpc.queue", :exclusive => false, :durable => true) do |requests_queue|
              self.callback(&rabbit_callback)
              self.succeed(connection, channel, requests_queue)
            end # requests_queue
          end # AMQP.channel
        end # AMQP.connect

        Signal.trap("INT")  { connection.close { EM.stop } }
        Signal.trap("TERM") { connection.close { EM.stop } }
      }

      if !EM.reactor_running?
        EM.run do
          rabbit_loop.call
        end
      else
        rabbit_loop.call
      end
    end
  end

  class Server < Base

    def run
      server_loop = Proc.new do |connection, channel, requests_queue|
        consumer = AMQP::Consumer.new(channel, requests_queue).consume
        consumer.on_delivery do |metadata, payload|
          puts "[requests] Got a request #{metadata.message_id}. Sending a reply to #{metadata.reply_to}..."
          channel.default_exchange.publish(Time.now.to_s,
                                           :routing_key    => metadata.reply_to,
                                           :correlation_id => metadata.message_id,
                                           :mandatory      => true)
          metadata.ack
        end
      end
      rabbit(server_loop)
    end

  end

  class Client < Base

    def sync_push(request)
      result = nil
      sync_request = Proc.new do |connection, channel, requests_queue|
        message_id = Kernel.rand(10101010).to_s

        response_queue = channel.queue("", :exclusive => true, :auto_delete => true)
        response_queue.subscribe do |headers, payload|
          if headers.correlation_id == message_id
            result = payload
            connection.close { EM.stop }
          end
        end

        EM.add_timer(0.1) do 
          puts "[request] Sending a request...#{request} with id #{message_id}"
          channel.default_exchange.publish(request,
                                           :routing_key => requests_queue.name,
                                           :reply_to    => response_queue.name,
                                           :message_id  => message_id)
        end
      end

      rabbit(sync_request)
      result
    end
  end
end 
```

这个想法很简单：我想让一个消息队列随时准备好（这是由`rabbit`方法处理的）。每当客户端想要发送请求时，它都会首先为响应创建一个临时队列以及一个消息 ID；然后它将请求发布到主消息队列，并在临时队列中等待具有相同消息 ID 的响应，以便知道该特定请求的响应何时准备好。我想`message_id`临时队列在某种程度上是多余的（因为队列也应该是唯一的）。

我现在使用这个客户端/服务器代码运行虚拟脚本

```
# server session
>> server = RPC::Server.new
=> #<RPC::Server:0x007faaa23bb5b0>
>> server.run
Updating client properties
[requests] Got a request 3315740\. Sending a reply to amq.gen-QCv8nP2dI5Qd6bg2Q1Xhk0... 
```

和

```
# client session
>> client = RPC::Client.new
=> #<RPC::Client:0x007ffb6be6aed8>
>> client.sync_push "test 1"
Updating client properties
[request] Sending a request...test 1 with id 3315740
=> "2012-11-02 21:58:45 +0100"
>> client.sync_push "test 2"
AMQ::Client::ConnectionClosedError: Trying to send frame through a closed connection. Frame is #<AMQ::Protocol::MethodFrame:0x007ffb6b9c83d0 @payload="\x002\x00\n\x00\x00\x00\f\x00\x00\x00\x00", @channel=1> 
```

有两点我真的不明白：

1.  与 EventMachine 相关：在代码中，如果我希望我的消息真正被发布`Client`，为什么我必须调用？`EM.add_timer`为什么使用`EM.next_tick`不起作用？我的理解是，在这里调用发布时，“一切”都应该是“准备好的”。
2.  与 AMQP 相关：为什么我的客户端由于第二个请求的连接关闭而崩溃？每次推送新请求时，都应该创建一个全新的 EM/AMQP 循环。

遗憾的是，在线处理 EM/AMQP 的代码很少，因此我们将不胜感激任何帮助！任何有关此效率的评论也将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T19:25:07.797

挖掘文档，我终于发现我实际上需要[`once_declared`](http://rubydoc.info/github/ruby-amqp/amqp/master/AMQP/Queue#once_declared-instance_method)回调来确保当客户端开始使用它时队列已准备好。

关于连接问题，似乎不知何故，使用`EM::Deferrable`会导致问题，所以（非常不令人满意的）解决方案只是不包括`EM::Deferrable`.

```
require "amqp"

module RPC

  module Base

    def rabbit(rabbit_callback)
      rabbit_loop = Proc.new {
        AMQP.start do |connection|
          AMQP::Channel.new(connection) do |channel|
            channel.queue("rpc.queue", :exclusive => false, :durable => true) do |requests_queue|
              requests_queue.once_declared do
                rabbit_callback.call(connection, channel, requests_queue)
              end
            end
          end
        end

        Signal.trap("INT")  { AMQP.stop { EM.stop } }
        Signal.trap("TERM") { AMQP.stop { EM.stop } }
      }

      if !EM.reactor_running?
        @do_not_stop_reactor = false
        EM.run do
          rabbit_loop.call
        end
      else
        @do_not_stop_reactor = true
        rabbit_loop.call
      end
    end
  end

  class Server
    include Base

    def run
      server_loop = Proc.new do |connection, channel, requests_queue|
        consumer = AMQP::Consumer.new(channel, requests_queue).consume
        consumer.on_delivery do |metadata, payload|
          puts "[requests] Got a request #{metadata.message_id}. Sending a reply to #{metadata.reply_to}..."
          channel.default_exchange.publish(Time.now.to_s,
                                           :routing_key    => metadata.reply_to,
                                           :correlation_id => metadata.message_id,
                                           :mandatory      => true)
          metadata.ack
        end
      end
      rabbit(server_loop)
    end

  end

  class Client
    include Base

    def sync_push(request)
      result = nil
      sync_request = Proc.new do |connection, channel, requests_queue|
        message_id = Kernel.rand(10101010).to_s

        response_queue = channel.queue("", :exclusive => true, :auto_delete => true)
        response_queue.subscribe do |headers, payload|
          if headers.correlation_id == message_id
            result = payload
            AMQP.stop { EM.stop unless @do_not_stop_reactor }
          end
        end

        response_queue.once_declared do
          puts "[request] Sending a request...#{request} with id #{message_id}"
          channel.default_exchange.publish(request,
                                           :routing_key => requests_queue.name,
                                           :reply_to    => response_queue.name,
                                           :message_id  => message_id)
        end
      end

      rabbit(sync_request)
      result
    end
  end
end 
```

# c++ - 传递给构造函数时无法从数组中取出字符串

> ID：13203547
> 
> 赞同：0
> 
> 时间：2012-11-02T21:53:41.047
> 
> 标签：c++

我花了一整天的时间试图弄清楚为什么这不起作用，我从文本文件中提取信息并将值作为数组发送到构造函数（工作正常，我可以打印出值它们会显示出来。）但是如果不进入无限循环，我就无法在构造函数中创建另一个类的对象。

我的主要文件：

```
int main(int argc, char** argv)
{
string line;
ifstream myfile ("test1.txt");
string rows [15];
int index = 0;

string tempForSize[5];
double * sizeArray = new double[5]; 
int firstIntOccur =0; 

string * arrForEquations = new string[12];
int equationCount = 0;

if (myfile.is_open())       {
    while ( myfile.good() )     {
        getline (myfile,line);
        rows[index] =line;
        index++;
    }
    myfile.close();
}
else 
    cout << "Unable to open file" << endl; 

for(int i=0; i <12;i++)     {
    if(rows[i].find("EQUATIONS: ")!=string::npos)       { 
        i++;
        i++;
        while(i <index) { 
            arrForEquations[equationCount]=rows[i];
            equationCount++;
            i++;
        }
        break;
    }

    if(rows[i].find(':')!=string::npos)     {
        firstIntOccur =rows[i].find(':');
        tempForSize[i].assign(rows[i],firstIntOccur+2,rows[i].size());
    }
}

for(int  i =0;i <5; i++)        {  
    sizeArray[i] = atof(tempForSize[i].c_str());
}
try
{
    string * equations = arrForEquations;
    GeneticAlgorithm a(sizeArray, equations, equationCount);
}
catch(string s)
{
    cout << s << endl;
}

return 0;

 } 
```

遗传算法类的构造函数：

```
GeneticAlgorithm::GeneticAlgorithm(double *& arr, string * sArr, int size)      {
Equation ** e = new Equation*[size];
for(int i = 0; i < size; i++)   {
    e[i] = new Equation(sArr[i]);
}
} 
```

当输入字符串时，方程类可以完美地工作，我只是不知道为什么它不想工作。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:04:26.517

快速注释不能回答您的问题，但我仍然不得不指出。**避免使用指针。**

```
// Instead of using 'string * equations = new string[12]'
std::vector<std::string> equations;

// Instead of using 'double * sizeArray = new double[5]'
std::vector<double> sizeArray; 
```

尽可能使用 STL。提供它们是为了让您的生活更轻松，并且代码看起来不那么神秘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T23:00:29.860

这并不是您问题的真正答案，但它会指出许多其他错误，并且一旦它们被清理干净，就有可能了解实际发生的事情。

第一个问题是没有功能分解。函数太大了，应该分成几个更小的函数。一般来说（也有一些值得注意的例外），如果一个函数超过八行或十行，它就需要重构。

关于更详细的问题：幻数太多，而且在大多数情况下，它们是错误的。您的用户不会输入正好 15 行。他会输入 5 或 500 或谁知道呢。（当然，如果他输入 500，那你就有大问题了。）处理这个问题的最简单和最常见的方法是使用`std::vector`它的`push_back`成员函数。这并不完美（如果您的用户输入 5 万亿行或 1 行包含 5 万亿个字符会发生什么情况），但对于大多数应用程序来说，这已经足够了。

更一般地说，这适用于几乎所有的阵列。只需使用`std::vector`，并让它们根据需要增长，而不是使用魔法常数来确定大小。为什么在地球上：

```
string tempForSize[5];
double * sizeArray = new double[5]; 
```

为什么在一种情况下动态分配，而不是在另一种情况下？（就此而言，无论如何您都不需要`tempForSize`。一旦您在本地临时中获得了字符串值，您可以立即将其转换并放入`sizeArray`.)

循环`while ( myfile.good() )`永远不会真正正确。并且您使用`line`read by`getline`而不测试读取是否成功。做这样的事情的正确方法是：

```
std::vector<std::string>
readRows( std::istream& source )
{
    std::vector<std::string> results;
    std::string line;
    while ( std::getline( source, line ) ) {
        result.push_back( line );
    }
    return results;
} 
```

使用标准的最佳实践重写代码，这样我们就可以看到实际发生了什么，并且我们不会被这么多其他问题分心，如果您仍然有问题，请再次询问。

（BYW：人们到底是从哪里得到循环的想法`file.good()`。它出现了；如果有一些教科书显示它，那么我们真的必须采取某种方式让它停止循环。）

# jquery - Django 中的 jQuery AJAX 链式调用 + Celery

> ID：13203549
> 
> 赞同：0
> 
> 时间：2012-11-02T21:53:48.860
> 
> 标签：jquery, ajax, django, celery

当前单击我的应用程序中的链接之一会触发 AJAX 调用 (GET)，如果成功，则会触发第二个，如果成功，则第二个会调用第三个。

这样，当单击链接当前正在进行时，可以通知用户进程的哪一部分已启动。

因此，在 Django 项目的模板文件中，单击回调正文中提到的链接，如下所示：

```
$("#the-link").click(function(item)) {
    // CALL 1
    $.ajax({
        url: {% url ajax_call_1 %},
        data: {
            // something
        }
    })
    .done(function(call1Result) {

        // CALL 2
        $.ajax({
            url: {% url ajax_call_1 %},
            data: {
                // call1Result passed here to CALL 2
            }
        })
        .done(function(call2Result) {

            // CALL 3
            $.ajax({
                url: {%url ajax_call_3 %},
                data: {
                    // call2Result passed here to CALL 3
                }
            })
            .done(function(call3Result) { // expected result if everything went fine
                console.log("wow, it worked!");
                console.log(call3Result);
            })
            .fail(function(errorObject) {
                console.log("call3 failed");
                console.log(errorObject);
            }
        })
        .fail(function(errorObject)) {
            console.log("call2 failed");
            console.log(errorObject);
        }
    })
    .fail(function(errorObject) {
        console.log("call1 failed");
        console.log(errorObject);
    });
}); 
```

这对我来说很好。**问题是，如果用户关闭浏览器**并且调用未完成（因为完成所有三个调用需要一些时间），我想**防止中断**以下调用，因为 Django 视图函数中有一些额外的逻辑称为在每个 GET 请求中。

 **例如，如果用户在 CALL 1 期间单击链接并关闭浏览器，是否有可能以某种方式继续执行以下 CALL 2 和 CALL 3？

我知道通常我可以使用 Celery Task 来处理该功能，但是在这里提到的链式调用仍然可以吗？

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:58:45.993

不，整个 Javascript 环境是由窗口定义的，当窗口关闭时，所有 Javascript 的优点都消失了。这可能有一百个很好的理由，所有这些都与安全相关。**

# php - 如何查询 MongoDB 集合？

> ID：13203555
> 
> 赞同：2
> 
> 时间：2012-11-02T21:54:26.367
> 
> 标签：php, codeigniter, mongodb

```
[_id] => MongoId Object (
    [$id] => 5090ace3788a466769b3804e
)
[startdate] => MongoDate Object (
    [sec] => 1301616000
    [usec] => 0
)
[enddate] => MongoDate Object (
    [sec] => 1304121600
    [usec] => 0
)
[your_id] => 33902
[odd_blah] => blahblah
[cam_id] => 339
[cost] => 0.01
[iscurrent] => 
[damn_current] => Array (
)

$coll = $this->mongo_db->where('cam_id', 339)->get('collection_name); 
```

这不返回任何内容。您可能会注意到我正在使用 [https://github.com/alexbilbie/codeigniter-mongodb-library/tree/v2](https://github.com/alexbilbie/codeigniter-mongodb-library/tree/v2)

我得到一个空数组。任何人都可以帮忙吗？这听起来很原始，但有点卡在这里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:13:28.743

你非常接近，你需要把你的`where`语句放在一个数组中。

```
$coll = $this->mongo_db
    ->where(array('cam_id' => 339))
    ->get('collection_name'); 
```

我假设您使用的是 Alex Bilbie 的[MongoDB CodeIgniter Library](https://github.com/alexbilbie/codeigniter-mongodb-library)。他的文档确实过时了，更建议查看他的[源代码](https://github.com/alexbilbie/codeigniter-mongodb-library/blob/v2/libraries/Mongo_db.php)注释以获取示例和函数所需的输入类型。

# mongodb - 如何在 MongoDB 集合中存储描述文档的元数据？

> ID：13203556
> 
> 赞同：8
> 
> 时间：2012-11-02T21:54:39.687
> 
> 标签：mongodb, indexing, metadata, database

在 MongoDB 中存储描述集合的元数据的最佳方式是什么？

我有一个集合，其中包含任意数量的文档。当我创建新文档时，我想根据当前集合中的文档数量分配一个新的临时名称（字符串），例如“Doc 1”、“Doc 2”……由于可以删除文档，只需执行 count() 不会产生有用的结果。

一种选择是将描述集合的元数据存储在不同的集合中，但这似乎很尴尬。

由于 Mongo 是无模式的，因此我可以将集合的元数据保存在集合本身中，可能保存在名为“元数据”的文档中。在这种情况下，我将如何快速访问该文档？我是否需要为“元数据”建立一个索引以立即获取它，而无需 O(n) 搜索时间？

有没有比我在上一段中描述的更标准或更简单的方法？将来我可能会得到更多的元数据，而不仅仅是计数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T22:49:59.413

您可以查看此链接[https://docs.mongodb.com/v3.0/tutorial/create-an-auto-incrementing-field/](https://docs.mongodb.com/v3.0/tutorial/create-an-auto-incrementing-field/)。

根据上面的链接，我认为只是将它们存储在一个以`metadata`以下格式命名的集合中：

```
{
    '_id':'collection1'
    'c': 0,
    'other metadata1': 'foo',
    'other metadata2': 'bar'
} 
```

然后您可以根据集合名称获取这些元数据。如果你想在这个文档中添加一个字段，只需使用[$set](http://www.mongodb.org/display/DOCS/Updating#Updating-$set)和更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-24T12:32:51.967

我们经常做的是将设置或元数据等放在一个单独的单文档集合.settings 中。例如。如果您的数据位于集合“用户”中，我将元数据放在“user.settings”中

# node.js - 打字稿生成不起作用的javascript

> ID：13203558
> 
> 赞同：0
> 
> 时间：2012-11-02T21:54:44.383
> 
> 标签：node.js, typescript

Node 对 TypeScript 生成的 Javascript 中的某些内容不满意，我不知道为什么。这是代码

人.ts：

```
export module Models {
    export class Person {
        id: number;
        firstName: string;
        lastName: string;

        constructor(f: string, l: string) {
            this.firstName = f;
            this.lastName = l;
        }

        public saySomething(): void {
            console.log("my name is %s %s", this.firstName, this.lastName);
        }
    }
} 
```

数据库.ts：

```
import P = module("Person");

export module Database {
    export class DB {
        public findPerson(id: number): P.Models.Person {
            return new P.Models.Person("a", "b");
        }
    }
} 
```

测试.ts：

```
var D = require("./DB");
var db = new D.Database.DB();
var p = db.findPerson(123);
p.saySomething(); 
```

它在 Javascript 中编译得很好，但是正在创建的 DB.js 文件似乎有问题。当我尝试在节点中运行 Test.js 时，我得到了这个：

```
$node Test.js
DB.js:2
(function (Database) {
^
TypeError: object is not a function
    at Object.<anonymous> (DB.js:2:1)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (Test.js:1:73)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10) 
```

它发生在导入 DB.js 期间。奇怪的是，如果我将 findPerson() 方法更改为返回字符串而不是 Person，它可以正常工作。它与创建 Person 对象有关。

这是Javascript：

```
(function (Models) {
    var Person = (function () {
        function Person(f, l) {
            this.firstName = f;
            this.lastName = l;
        }
        Person.prototype.saySomething = function () {
            console.log("my name is %s %s", this.firstName, this.lastName);
        };
        return Person;
    })();
    Models.Person = Person;    
})(exports.Models || (exports.Models = {}));

var P = require("./Person")
(function (Database) {
    var DB = (function () {
        function DB() { }
        DB.prototype.findPerson = function (id) {
            return new P.Models.Person("a", "b");
        };
        return DB;
    })();
    Database.DB = DB;    
})(exports.Database || (exports.Database = {}));

var dbx = require("./DB")
var db1 = new dbx.Database.DB();
var p = db1.findPerson(123);
p.saySomething(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T22:27:45.460

在 var P = require("./Person") 之后没有分号 javascript 认为 next (...) 是函数的调用。但您似乎在 Database.ts 中有它，所以 Typescript 可能在编译时丢失了一些分号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T22:45:01.490

主要问题是您正在导入一个名为 的模块`Person`，我认为您的意思是导入`Models`包含一个名为 的类的模块`Person`。

当您针对 nodejs 或其他 CommonJS 平台时，您可以省略模块声明。

您还可以利用构造函数中的自动属性。

所以你会有`Models.ts`：

```
export class Person {
    id: number;

    constructor (public firstName: string, public lastName: string) {

    }

    public saySomething(): void {
        console.log("my name is %s %s", this.firstName, this.lastName);
    }
} 
```

和`Database.ts`

```
import models = module("Models");

export class DB {
    public findPerson(id: number): models.Person {
        return new models.Person("a", "b");
    }
} 
```

# emacs - 突出显示 Emacs 中的标记环位置

> ID：13203560
> 
> 赞同：3
> 
> 时间：2012-11-02T21:54:57.140
> 
> 标签：emacs, highlight

有谁知道如何`mark-ring`在按下时突出显示的过去位置`C-u` `C-Space`，并在按下以外 `C-u` `C-Space`的其他内容时删除？

也许只有一个让我们说 5 没有全屏亮点的历史。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T09:25:18.780

我已经开始编写一个次要模式来做到这一点。你可以在 GitHub 上获得它：

[https://github.com/kleiba/visual-mark-ring-mode](https://github.com/kleiba/visual-mark-ring-mode)

但是，请注意，这是一个非常初步的 0.1 版本——它可能根本不适合您。

（PS：如果有人愿意帮助我改进这个小模式，我将不胜感激。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T09:25:55.850

要突出显示标记环中的位置：

```
(defun highlight-ring-marks ()
  (let ((markstr (char-to-string 8595)))
    (put-text-property 0 1 'face '((:background "yellow") (:foreground "black"))
                       markstr)
    (mapc (lambda (m)
            (let ((ovl (make-overlay m m)))
              (overlay-put ovl 'after-string markstr)
              (overlay-put ovl 'mark-ring-pointer t)))
          mark-ring))) 
```

要取消突出显示它们：

```
(defun dehighlight-ring-marks ()
  (mapc (lambda (ovl)
          (and (overlay-get ovl 'mark-ring-pointer)
               (delete-overlay ovl)))
        (overlays-in (point-min) (point-max)))) 
```

有了这些，剩下的就是将突出显示代码连接到`C-u C-SPC`并将取消突出显示代码添加到`pre-command-hook`，以便在用户按下键时删除指示符：

```
(require 'cl)   ; for lexical-let

(defun set-mark-and-highlight (pos)
  (interactive "P")
  (set-mark-command pos)
  (when pos
    (highlight-ring-marks))
  ;; call dehighlight-ring-marks, but only once
  (lexical-let (hookfn)
    (setq hookfn (lambda ()
                   (dehighlight-ring-marks)
                   (remove-hook 'pre-command-hook hookfn)))
    (add-hook 'pre-command-hook hookfn))) 
```

最后，将新命令绑定到`C-SPC`：

```
(global-set-key (kbd "C-SPC") 'set-mark-and-highlight) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T00:02:57.357

一些 elisp 做你问的事情 [https://www.emacswiki.org/emacs/VisibleMark](https://www.emacswiki.org/emacs/VisibleMark)

谷歌还显示有人在他们自己的网站 [http://retroj.net/visible-mark](http://retroj.net/visible-mark)上添加了该代码， 我目前正在尝试突出显示最后 3 个标记。在我的加载路径中添加了 visible-mark.el。将此添加到我的初始化文件中

```
(require 'visible-mark)
(defface visible-mark-face1
  '((((type tty) (class mono))
     (:inverse-video t))
    (t (:background "gold4"))) "")
(defface visible-mark-face2
  '((((type tty) (class mono)))
    (t (:background "DarkOrange4"))) "")
(defface visible-mark-face3
  '((((type tty) (class mono)))
    (t (:background "red4"))) "")
(setq visible-mark-faces (quote (visible-mark-face1 visible-mark-face2 visible-mark-face3)))

; highlight the last 3 marks
(setq visible-mark-max 3)
; globally activate visible-mark-mode
(global-visible-mark-mode) 
```

# c# - WHERE 子句中的 CASE 等效

> ID：13203562
> 
> 赞同：1
> 
> 时间：2012-11-02T21:55:00.923
> 
> 标签：c#, linq, linq-to-sql

考虑以下 SQL 查询：

```
SELECT
   *
FROM 
   Orders
WHERE
   (AdjShipDate IS NOT NULL OR EstShipDate IS NOT NULL)
    AND
    CASE 
        WHEN AdjShipDate IS NOT NULL THEN AdjShipDate
        WHEN AdjShipDate IS NULL AND EstShipDate IS NOT NULL THEN EstShipDate
    END
    BETWEEN '2011-07-01' AND '2011-07-30' 
```

案例的 WHEN 表达式取决于我要查询的表中的值 (AdjShipDate)。我将如何在 Linq to SQL 中编写类似的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:01:38.127

它本质上是一个 COALESCE：

```
where (o.AdjShipDate ?? o.EstShipDate) >= new DateTime(2011,07,01) 
   && (o.AdjShipDate ?? o.EstShipDate) <= new DateTime(2011,07,30) 
```

虽然我不确定？？Linq-to-SQL 支持运算符。如果不是你可以试试

```
where (o.AdjShipDate != NULL 
           && o.AdjShipDate >= new DateTime(2011,07,01) 
           && o.AdjShipDate <= new DateTime(2011,07,30))
   || (o.AdjShipDate == NULL && o.EstShipDate != NULL 
           && o.EstShipDate >= new DateTime(2011,07,01) 
           && o.EstShipDate <= new DateTime(2011,07,30)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T22:06:54.880

它绝对等同于：

```
SELECT
   *
FROM 
   Orders
WHERE
    (AdjShipDate IS NOT NULL and AdjShipDate BETWEEN '2011-07-01' AND '2011-07-30')
     OR
    (AdjShipDate IS NULL and EstShipDate IS NOT NULL ANd EstShipDate BETWEEN '2011-07-01' AND '2011-07-30') 
```

只需将其编译为 LinqToSql。

# shell - shell“while read”循环的行为不端，以错误的顺序读取

> ID：13203565
> 
> 赞同：-1
> 
> 时间：2012-11-02T21:55:08.300
> 
> 标签：shell, loops

我有一个脚本

```
index=0
while read line 
do  
  echo "read line is $line" 
  line=`echo ${line}|awk '{print $1}'`  

  index=$((index+1)) 

  if((index%2==0));then 
    echo "before continue line is $line"  
    continue 
  fi   

  echo "index is $index and now modify html page with $line" 
  ...
  ...
  done< infile 
```

infile 的内容是：

```
1OrMcP2CdV4 180 

1Wp33RG2XaA 180 

21zUUJ04ovI 180 

2pIqUhaDMLg 180 

2WRU4NUJSVc 180 
...
... 
```

在infile中，有交替的空行，是我自己故意添加的，我为什么这样做，你可以参考[http://goo.gl/K7g0m](http://goo.gl/K7g0m)，这是“while read”循环的另一种奇怪行为。基本上，“读取”无法正确读取偶数行，因此我将偶数行设为空行。

我运行脚本，输出为：

```
read line is 1OrMcP2CdV4 180
index is 1 and now modify html page with 1OrMcP2CdV4

read line is 1Wp33RG2XaA 180
before continue line is 1Wp33RG2XaA

read line is 
index is 3 and now modify html page with 

read line is 21zUUJ04ovI 180
before continue line is 21zUUJ04ovI

read line is 
index is 5 and now modify html page with 
```

所以基本上，“while read loop”似乎按顺序读取行：1 3 2 5 4

然后我修改了空行，比如

```
1OrMcP2CdV4 180 
Axxx
1Wp33RG2XaA 180 
Axxx
21zUUJ04ovI 180 
Axxx 
2pIqUhaDMLg 180 
Axxx  
2WRU4NUJSVc 180 
...
.. 
```

输出很有趣：

```
read line is 1OrMcP2CdV4 180
index is 1 and now modify html page with 1OrMcP2CdV4

read line is xxx
before continue line is xxx

read line is 1Wp33RG2XaA 180
index is 3 and now modify html page with 1Wp33RG2XaA

read line is xxx
before continue line is xxx

read line is 21zUUJ04ovI
index is 5 and now modify html page with 21zUUJ04ovI 

read line is 21zUUJ04ovI 180
before continue line is 21zUUJ04ovI 
```

好的，它现在按顺序读取，但是偶数行“Axxx”被读取为“xxx”，前20行似乎是按顺序排列的，但有时，顺序又乱了！有趣又奇怪，不是吗？

这种行为不端有什么问题？对于脚本，有几个后台命令，比如

```
firefox &
tcpdump & 
```

也喜欢

```
sleep 5 
```

详情可以参考上面的链接，这样会不会有子进程同步的问题？但我不这么认为。

这个问题真的很奇怪，我真的不知道如何处理它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T22:52:39.397

所以你想得到每第二行的第一个字段？然后我建议类似：

```
while read id rest 
do
     # here code to process id
     #  .....
     read again # skip every other line
done 
```

顺便说一句：`index`你的代码中的初始值是多少？

# maven - 使用 maven-assembly-plugin 生成 OSGi 包分发

> ID：13203566
> 
> 赞同：3
> 
> 时间：2012-11-02T21:55:18.407
> 
> 标签：maven, osgi, distribution, maven-assembly-plugin, maven-resources-plugin

我有一个多模块项目，其中每个模块都使用 Apache Felix maven-bundle-plugin 打包为 OSGi 包。整个项目是使用列出上述模块的父 POM 构建的。一些模块包含配置资源（例如 .properties 文件），这些配置资源不应在捆绑包中进行部署，而应在专用配置文件夹中外部化。我的目标是创建一个看起来像这样的分发文件夹（可能是一个 zip 文件）：

```
my-app-distribution
    /bundles
        module1-bundle.jar
        module2-bundle.jar
        etc.

    /conf
        external1.properties
        external2.properties
        etc. 
```

其中目录下的属性文件`/conf`是从各个模块的文件夹中手工挑选的`/target`文件。`.properties`需要从目标文件夹与 src 文件夹中提取文件的原因是我正在使用 Maven 资源过滤，并且*源*属性文件包含`${..}`特定于环境的值的占位符。这些占位符在构建过程中被正确解析 - 每个构建配置文件 - 并且`target/`文件夹包含实际的环境特定值。

我已经多次做过这样的分发文件操作——对于带有可执行 JAR 的分发等。在这种情况下，我想使用程序集描述符的“moduleSets”配置——很容易将所有二进制文件/jar 拉到一个分发文件夹中使用 moduleSet/二进制描述符。在 maven-bundle-plugin 中排除某些文件也很容易被打包到 OSGi 包中。我唯一遇到的问题是创建`/conf`分发文件夹并在那里收集必要的属性文件。我试图在“moduleSet/sources”描述符中使用“fileSets”来仅包含来自`**/target`每个模块的特定文件，但这似乎不起作用。

有人有建议/建议吗？必须有一个简单的方法。还是我根本不应该使用？

谢谢，

简历

* * *

@PetrKozelka 我不确定将特定于不同捆绑包的配置文件提取到单独的模块中是个好主意。OSGi 的全部意义在于捆绑包是独立的并且可能是可重用的——无论是在开发中还是在发行版中。仅在源代码中将功能实现和相关配置文件组合在一起才有意义。对于特定的发行版，尽管我可能需要提取一些文件——如果管理员需要控制某些参数。对于不同的分发/应用程序，这可能会有所不同。程序集配置可能会更改，但捆绑包/源将保持不变。此外，每个捆绑包都可能单独开发和使用，并非所有捆绑包都必须始终属于同一个 uber 项目 - 正如您所假设的那样。*工件的类型*（例如“模型”、“服务”、“数据访问”、“配置”等），而不是按功能域/特性。这种方法在单个应用程序/项目中运行良好，但在企业级别上失败，因为通常需要重用垂直组件的子集（按功能域划分）。

就您依赖模块中的文件布局而言，我同意不应该存在这种依赖关系。文件可以通过其明确的名称或命名约定来手工挑选 - 根据非常具体的发行版要求。（这正是我面临的情况。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T21:08:49.827

我实际上已经想出如何或多或少优雅地做到这一点。如果其他人正在寻求解决类似问题，请在下面发布解决方案。

**概括**

我正在使用`maven-assembly-plugin`从各个模块中提取二进制文件（捆绑 JAR）并将它们打包到`<my-distribution-folder>/bundles`目录中。在应该外部化一些资源文件的每个模块中，我将这些文件合并到`/src/main/resources/external`目录下，并`maven-resources-plugin`在打包阶段使用将这些资源复制到我的专用`distribution`模块中的自动生成的目录中，该目录包含`assembly.xml`描述符文件并且也是作为一部分构建的的顶级项目。我`maven-clean-plugin`在父 POM 中使用在顶级项目构建的 CLEAN 阶段清除分发暂存目录的内容。

**Maven 配置**

在包含需要外部化的资源的每个包的模块 POM 中，我添加了以下资源管理配置：

```
 <build>
    <defaultGoal>install</defaultGoal>

    <!--
    enable resource filtering for resolving ${...} placeholders with environment-specific values 
    exclude any files that must be externalized
    -->
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>
            <excludes>
                <exclude>external/*.*</exclude>
            </excludes>
        </resource>
    </resources>
    ...

   <plugins>
        <!-- Copies contents of resources/external to dedicated folder defined by property in parent -->
        <!-- externalized resources will be packaged according to assembly instructions -->
        <plugin>
           <artifactId>maven-resources-plugin</artifactId>
           <version>2.6</version>
           <executions>
               <execution>
                   <id>copy-resources</id>
                   <phase>package</phase>
                   <goals>
                       <goal>copy-resources</goal>
                   </goals>
                   <configuration>
                       <outputDirectory>
                           ${project.parent.basedir}/${externalizableResourcesStageDir}
                       </outputDirectory>
                       <resources>
                           <resource>
                               <directory>src/main/resources/external</directory>
                               <filtering>true</filtering>
                           </resource>
                       </resources>
                   </configuration>
               </execution>
            </executions>
       </plugin>

        <!-- builds a JAR file for this bundle -->
        <plugin>
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-bundle-plugin</artifactId>
            <extensions>true</extensions>
            <configuration>
                <instructions>
                    <Bundle-SymbolicName>${project.groupId}.${project.artifactId}</Bundle-SymbolicName>
                    <Import-Package>*</Import-Package>
                    <Export-Package>
                        ${project.groupId}.thismodulepackage*;version=${project.version}
                    </Export-Package>
                </instructions>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

其中`externalizableResourcesStageDir`是在顶级/父 POM 中定义的属性。在项目中，我包含了一个特殊的分发模块，其结构如下：

```
distribution
   /ext-resources  (target auto-generated dir for external resources from modules)   
   /src
       /assemble
             assembly.xml   (assembly descriptor) 
```

该`assembly.xml`文件如下所示：

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2
      http://maven.apache.org/xsd/assembly-1.1.2.xsd">
<id>bin</id>

<!-- generate a ZIP distribution -->
<formats>
    <format>zip</format>
</formats>
<includeBaseDirectory>false</includeBaseDirectory>
<baseDirectory>/</baseDirectory>

<moduleSets>
    <moduleSet>
        <!-- Enable access to all projects in the current multi-module build -->
        <useAllReactorProjects>true</useAllReactorProjects>

        <!-- select projects to include-->
        <includes>
            <include>myGroupId:myModuleArtifactId1</include>
            <include>myGroupId:myModuleArtifactId2</include>
            ...
        </includes>

        <!-- place bundle jars under /bundles folder in dist directory -->
        <binaries>
            <outputDirectory>${artifactId}/bundles</outputDirectory>
            <unpack>false</unpack>
        </binaries>
    </moduleSet>
</moduleSets>

<!-- now take files from ext-resources in this module and place them into dist /conf subfolder-->
<fileSets>
    <fileSet>
        <directory>ext-resources</directory>
        <outputDirectory>${artifactId}/conf/</outputDirectory>
        <includes>
            <include>*</include>
        </includes>
    </fileSet>

</fileSets>

</assembly> 
```

分发模块的 POM 如下所示：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<parent>
    <groupId>myGroupId</groupId>
    <artifactId>parentArtifactId</artifactId>
    <version>...</version>
</parent>

<groupId>myGroupId</groupId>
<artifactId>distribution</artifactId>
<version>...</version>

<packaging>pom</packaging>
<name>Distribution</name>
<description>This module creates the <MyProject> Distribution Assembly</description>
<url>http:...</url>

<!-- NOTE: These dependency declarations are only required to sort this project to the
     end of the line in the multi-module build.
-->
<dependencies>
    <dependency>
        <groupId>myGroupId</groupId>
        <artifactId>myModuleArtifactId1</artifactId>
        <version>${project.version}</version>
    </dependency>
 ...
</dependencies>

<build>
    <plugins>
        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <executions>
                <execution>
                    <id>dist-assembly</id>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                    <configuration>
                        <descriptors>
                            <descriptor>src/assemble/assembly.xml</descriptor>
                        </descriptors>
                    </configuration>
                </execution>
            </executions>
        </plugin>

    </plugins>
</build>
</project> 
```

父 POM 将列出所有捆绑模块，加上分发模块，并定义组装插件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>myGroupId</groupId>
    <artifactId>myParentId</artifactId>
    <version>...</version>
    <packaging>pom</packaging>

    <properties>
        ...

        <!-- directory where build may place any sub-modules' resources that should be externalized -->
        <!-- those resources may be picked up by maven-assembly-plugin and packaged properly for distribution -->
        <externalizableResourcesStageDir>
            esb-distribution/ext-resources
        </externalizableResourcesStageDir>

    </properties>

    <!-- all project modules (OSGi bundles + distribution) -->
    <modules>
        <module>bundle-module1</module>
        <module>bundle-module2</module>
        ...
        <module>distribution</module>
    </modules>

    <dependencyManagement>
      <dependencies>
      ...
      </dependencies>
    </dependencyManagement>

    <build>
        <pluginManagement>
            <plugins>
                <!--
                Cleans contents of the folder where the externalized resources will be consolidated
                Each module adds its own external files to the distribution directory during its own build
                -->
                <plugin>
                    <artifactId>maven-clean-plugin</artifactId>
                    <version>2.5</version>
                    <executions>
                        <execution>
                            <id>clean-ext-resources</id>
                            <phase>clean</phase>
                        </execution>
                    </executions>
                    <configuration>
                        <filesets>
                            <fileset>
                                <directory>${externalizableResourcesStageDir}</directory>
                                <includes>
                                    <include>*.*</include>
                                </includes>
                                <followSymlinks>false</followSymlinks>
                            </fileset>
                        </filesets>
                    </configuration>
                </plugin>

                <plugin>
                    <artifactId>maven-assembly-plugin</artifactId>
                    <version>2.3</version>
                    <configuration>
                        <descriptors>
                            <descriptor>src/assemble/assembly.xml</descriptor>
                        </descriptors>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
    </build>

</project> 
```

注意：我们还确保将外部化的资源文件排除在单独的包 JAR 中（请参阅`resources`模块 POM 的部分）。解压缩后的分发将如下所示：

```
my-app-distribution
  /bundles
    module1-bundle.jar
    module2-bundle.jar
    etc.

  /conf
    external1.properties
    external2.properties
    etc. 
```

# redirect - url缩短器301重定向理解

> ID：13203572
> 
> 赞同：6
> 
> 时间：2012-11-02T21:56:05.680
> 
> 标签：redirect, http-status-code-301, url-shortener

我们正在使用 PHP 开发 URL 缩短器项目。我们使用 301 HTTP 重定向并自然地跟踪我们的链接访问。但有一些奇怪的东西：

我们缩短一个URL，通过浏览器浏览后，只跟踪第一次访问，似乎没有向我们的服务器发送任何其他请求，它直接到达目标URL。（我认为这是浏览器缓存后一次尝试）。但 ：

当尝试使用类似**bitly**的服务时，它有不同的处理方式。**相同浏览器上的一些**相同请求在位访问跟踪中被跟踪（实际上不止一个，我不明白为什么，我没有看到任何逻辑），同时它们也使用 301 重定向。（在左边浏览器窗口底部有时会写“等待 bit.ly ...”，有时不会，实际上是随机的）。

这里有什么技巧吗？这种不同的待遇会发生什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T22:05:18.137

阅读[HTTP 规范](http://www.ietf.org/rfc/rfc2616.txt)。响应告诉浏览器请求的`301`资源已永久移动到被重定向到的新 URL，并且不应再使用原始 URL：

> 10.3.2 301 永久移动
> 
> 请求的资源已被分配一个新的永久 URI，并且任何将来对该资源的引用都应该使用返回的 URI 之一。如果可能，具有链接编辑功能的客户端应该自动将对 Request-URI 的引用重新链接到服务器返回的一个或多个新引用。除非另有说明，否则此响应是可缓存的。
> 
> 新的永久 URI 应该由响应中的 Location 字段给出。除非请求方法是 HEAD，否则
> 响应的实体应该包含一个简短的超文本注释，其中包含指向
> 新 URI 的超链接。
> 
> 如果收到 301 状态代码以响应
> GET 或 HEAD 以外的请求，用户代理不得自动重定向
> 请求，除非用户可以确认，因为这可能会
> 改变发出请求的条件。
> 
> ```
>  Note: When automatically redirecting a POST request after
>   receiving a 301 status code, some existing HTTP/1.0 user agents
>   will erroneously change it into a GET request. 
> ```

对于您正在尝试的内容，请尝试使用`302`,`303`或`307`代替。

> 10.3.3 302 找到
> 
> 请求的资源临时驻留在不同的 URI 下。
> 由于重定向有时可能会改变，客户端应该继续使用 Request-URI 来处理未来的请求。此响应
> 仅在由 Cache-Control 或 Expires 标头
> 字段指示时才可缓存。
> 
> 临时 URI 应该由
> 响应中的 Location 字段给出。除非请求方法是 HEAD，否则
> 响应的实体应该包含一个简短的超文本注释，其中包含指向
> 新 URI 的超链接。
> 
> 如果收到 302 状态码以响应GET 或 HEAD 以外的 请求，除非用户可以确认，否则
> 用户代理不得自动重定向请求，因为这可能会 改变发出请求的条件。
> 
> ```
>  Note: RFC 1945 and RFC 2068 specify that the client is not allowed
>   to change the method on the redirected request.  However, most
>   existing user agent implementations treat 302 as if it were a 303
>   response, performing a GET on the Location field-value regardless
>   of the original request method. The status codes 303 and 307 have
>   been added for servers that wish to make unambiguously clear which
>   kind of reaction is expected of the client. 
> ```

.

> 10.3.4 303 见其他
> 
> 可以在不同的 URI 下找到对请求的响应，并且应该使用该资源上的 GET 方法来检索。此方法
> 的存在主要是为了允许 POST 激活脚本的输出
> 将用户代理重定向到选定的资源。新的 URI 不是
> 原始请求资源的替代引用。303
> 响应不能被缓存，但对第二个
> （重定向）请求的响应可能是可缓存的。
> 
> 不同的 URI 应该由
> 响应中的 Location 字段给出。除非请求方法是 HEAD，否则
> 响应的实体应该包含一个简短的超文本注释，其中包含指向
> 新 URI 的超链接。
> 
> ```
>  Note: Many pre-HTTP/1.1 user agents do not understand the 303
>   status. When interoperability with such clients is a concern, the
>   302 status code may be used instead, since most user agents react
>   to a 302 response as described here for 303. 
> ```

.

> 10.3.8 307 临时重定向
> 
> 请求的资源临时驻留在不同的 URI 下。
> 由于重定向有时可能会改变，客户端应该
> 继续使用 Request-URI 来处理未来的请求。此响应
> 仅在由 Cache-Control 或 Expires 标头
> 字段指示时才可缓存。
> 
> 临时 URI 应该由
> 响应中的 Location 字段给出。除非请求方法是 HEAD，否则
> 响应的实体应该包含一个简短的超文本注释，其中包含指向
> 新 URI 的超链接，因为许多 HTTP/1.1 之前的用户代理不
> 理解 307 状态。因此，注释应该包含用户 在新 URI
> 上重复原始请求所需的信息。
> 
> 如果收到 307 状态代码以响应
> GET 或 HEAD 以外的请求，则用户代理不得自动重定向
> 请求，除非用户可以确认，因为这可能会
> 改变发出请求的条件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-15T01:16:52.353

只是为了记下我的评论..

缓存控制标头也在这方面发挥作用。如果您使用 curl 或 firebug 持久跟踪进行检查，您可以在位置之前看到缓存控制标头。bitly 配置为如果用户在 90 秒后单击链接，则返回联系。

# mysql - MySQL Workbench - 数据迁移不起作用

> ID：13203573
> 
> 赞同：1
> 
> 时间：2012-11-02T21:56:10.793
> 
> 标签：mysql, migration, workbench

我正在尝试通过 MySQL Workbench 从一台服务器迁移到另一台服务器。它可以设置架构，但是当涉及到数据时，它会失败。它也没有给我太多信息 - 输出类似于：

```
`schemaname`.`GeneralCodes` has FAILED (0 of 3 rows copied) 
```

这就是它所说的。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:01:59.677

至少，我发现了“找不到网络名称”消息的含义。我在工作中使用网络存储我的转储文件，如“\\myserver\horndinkle\dumps\xxx”。它指的**是**MySql Workbench 无法从那里读取，而不是我正在迁移到/从中迁移的网络名称。一旦我把文件放在我的本地机器上，它工作得很好。

# ios - Cocos2d 处理触摸多层

> ID：13203582
> 
> 赞同：0
> 
> 时间：2012-11-02T21:57:27.563
> 
> 标签：ios, cocos2d-iphone, touch

正如许多其他人在网上建议的那样，我正在尝试为图层启用触摸功能：

```
 hudLayer = [[[CCLayer alloc] init] autorelease];
        [self addChild:hudLayer z:3];

        gameLayer = [[[CCLayer alloc] init] autorelease];
        [self addChild:gameLayer z:1];
        gameLayer.isTouchEnabled = YES;

        rileyLayer = [[[CCLayer alloc] init]autorelease];
        [self addChild:rileyLayer z:2];

        pauseMenu = [[[CCLayer alloc] init] autorelease];
        [self addChild:pauseMenu z:4];

        [[[CCDirector sharedDirector] touchDispatcher] addTargetedDelegate:hudLayer priority:0 swallowsTouches:YES]; 
```

我的触摸方法在这里：

```
- (BOOL)ccTouchBegan:(NSSet *)touch withEvent:(UIEvent *)event {
    return  TRUE;
}

- (void)ccTouchEnded:(NSSet *)touch withEvent:(UIEvent *)event {
    if (!paused) {
        ratMove = 0;
    }
} 
```

但是，这会不断引发错误：由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“Layer#ccTouchBegan override me”

我可以在线找到此错误的唯一原因是，如果您没有包含 ccTouchBegan 功能，但是我是，有其他人知道出现此错误的任何其他原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:19:38.727

子类 CCLayer 具有 hud 层，然后在其中实现这些方法。

您将 hud 层添加为目标委托，然后它必须至少实现`ccTouchBegan:withEvent:`方法。如果您希望您的 hud 成为目标委托，请创建 CCLayer 子类并从目标触摸委托协议中实现方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T23:43:35.917

您的函数没有实现适当的签名。尝试：

```
- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event {
    // your stuff here
} 
```

如果您想要多点触摸处理（您的签名），您应该添加StandardDelegate 而不是targetedTouchDelegate。

编辑：现在在objective-c中：

```
[[CCDirector sharedDirector].touchDispatcher addStandardDelegate:self priority:0]; 
```

触摸调度程序实现了两种协议。您当前正在注册为 targetTouchDelegate，但实现了 standardDelegate 的委托方法。如果您想保留您的方法，请使用上面的行进行注册。

编辑 2：现在是协议的确切语法，直接来自 cocos 的代码。如您所见，没有使用 NSSet（您的签名）的 ccTouchBegan，而是使用 ccTouchesBegan。无论您喜欢哪种处理方法（针对标准），您都必须符合以下协议。

@protocol CCTargetedTouchDelegate

```
/** Return YES to claim the touch.
 @since v0.8
 */
- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event;
@optional
// touch updates:
- (void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event;
- (void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event;
- (void)ccTouchCancelled:(UITouch *)touch withEvent:(UIEvent *)event;
@end

/**
 CCStandardTouchDelegate.

 This type of delegate is the same one used by CocoaTouch. You will receive all the  events (Began,Moved,Ended,Cancelled).
 @since v0.8
*/
@protocol CCStandardTouchDelegate <NSObject>
@optional
- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)ccTouchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event;
@end 
```

# android - 尝试将路径添加到 sdcard 时出现 Nullpointer 异常

> ID：13203585
> 
> 赞同：0
> 
> 时间：2012-11-02T21:57:39.987
> 
> 标签：android, path, nullpointerexception, sd-card

我发布了一个应用程序，我需要将几百 kb 大小的 ogg 文件复制到用户的 sdcard 上。很快我收到了错误报告。就我而言，问题可能是因为该路径不适合该特定手机：

```
String path = "/sdcard/file.ogg"; 

            File file = new File(Environment.getExternalStorageDirectory(), "file.ogg" );
            if (!file.exists()) {

                InputStream in = getResources().openRawResource(R.raw.file);
                FileOutputStream out = null;
                try {
                    out = new FileOutputStream(path);
                } catch (FileNotFoundException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
                byte[] buff = new byte[1024];
                int read = 0;

                try {
                    while ((read = in.read(buff)) > 0) {
                        out.write(buff, 0, read);
                    }
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } finally {
                    try {
                        in.close();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    try {
                        out.close();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                } 
```

所以报告是：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.caodeveloping.androgangnam/com.caodeveloping.androgangnam.Main}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
at android.app.ActivityThread.access$1500(ActivityThread.java:121)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3701)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at com.caodeveloping.androgangnam.Main.onCreate(Main.java:388)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
... 11 more 
```

第 388 行是 out.close(); /sdcard/ 是否可能不是该手机上的合适路径？什么可能导致这种情况？提前致谢！

更新，这个？

```
String path= Environment.getExternalStorageDirectory().getAbsolutePath();
path += "/file.ogg"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:14:12.827

两个问题：

a) 显然，您正在尝试关闭文件 (out.close())，如果您无法打开它，则事件

b) 我建议使用 Environment.getExternalStorageDirectory()，而不是硬编码的目录名称“/sdcard”。不保证 SD 卡将安装到此路径。这正是 Environment.getExternalStorageDirectory() API 的原因。

另外，我建议查看整个代码以进行错误处理（如果某些内容无法打开、读取等）

# ruby - UndefinedConversionError 试图从电子邮件正文中解析阿拉伯语

> ID：13203586
> 
> 赞同：1
> 
> 时间：2012-11-02T21:57:44.977
> 
> 标签：ruby, mongodb, encoding, utf-8, gmail

使用`mail`红宝石我收到这条消息：

```
mail.rb:22:in `encode': "\xC7" from ASCII-8BIT to UTF-8 (Encoding::UndefinedConversionError)
    from mail.rb:22:in `<main>' 
```

如果我删除编码，我会收到一条消息 ruby

```
/var/lib/gems/1.9.1/gems/bson-1.7.0/lib/bson/bson_ruby.rb:63:in `rescue in to_utf8_binary': String not valid utf-8: "<div dir=\"ltr\"><div class=\"gmail_quote\">l<br><br><br><div dir=\"ltr\"><div class=\"gmail_quote\"><br><br><br><div dir=\"ltr\"><div class=\"gmail_quote\"><br><br><br><div dir=\"ltr\"><div dir=\"rtl\">\xC7\xE1\xE4\xD5 \xC8\xC7\xE1\xE1\xDB\xC9 \xC7\xE1\xDA\xD1\xC8\xED\xC9</div></div>\r\n</div><br></div>\r\n</div><br></div>\r\n</div><br></div>" (BSON::InvalidStringEncoding) 
```

这是我的代码：

```
require 'mail'
require 'mongo'

connection = Mongo::Connection.new
db = connection.db("DB")
db = Mongo::Connection.new.db("DB")
newsCollection = db["news"]

Mail.defaults do
  retriever_method :pop3, :address    => "pop.gmail.com",
                          :port       => 995,
                          :user_name  => 'my_username',
                          :password   => '*****',
                          :enable_ssl => true
end
emails = Mail.last
#Checks if email is multipart and decods accordingly. Put to extract UTF8 from body
plain_part = emails.multipart? ? (emails.text_part ? emails.text_part.body.decoded : nil) : emails.body.decoded

html_part = emails.html_part ? emails.html_part.body.decoded : nil

mongoMessage = {"date" => emails.date.to_s , "subject" => emails.subject , "body" => plain_part.encode('UTF-8') }
msgID = newsCollection.insert(mongoMessage) #add the document to the database and returns it's ID
puts msgID 
```

对于英语和希伯来语，它工作得很好，但似乎 gmail 正在发送具有不同编码的阿拉伯语。替换`UTF-8`为`ASCII-8BIT`给出类似的错误。

`plain_part`用于普通电子邮件时，我得到相同的结果。我正在处理来自一个特定来源的电子邮件，因此我可以确信 html_part 不会导致错误。为了使它更加奇怪，阿拉伯语中的主题被完美呈现。我应该使用什么编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:53:02.903

如果您`encode`不使用选项，则会引发此错误，如果您的字符串假装是一种编码但包含来自另一个编码的字符。

以这种方式尝试：

```
plain_part.encode('UTF-8', {:invalid => :replace, :undef => :replace, :replace => '?'}) 
```

这会将给定编码的无效和未定义字符替换为“？”（[更多信息](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-encode)）。如果这不足以满足您的需求，您需要找到一种方法来检查您的`plain_part`字符串是否有效。例如，您可以为此使用`valid_encoding?`（[更多信息](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-valid_encoding-3F)）。

我最近偶然发现了一个类似的问题，我无法确定它到底是什么编码，所以我写了这个（可能有点谦虚）的方法。希望它可以帮助您，找到解决问题的方法。

```
def self.encode!(str)
  return nil if str.nil?

  known_encodings = %w(
    UTF-8
    ISO-8859-1
  )

  begin
    str.encode(Encoding.find('UTF-8'))
  rescue Encoding::UndefinedConversionError
    fixed_str = ""
    known_encodings.each do |encoding|
      fixed_str = str
      if fixed_str.force_encoding(encoding).valid_encoding?
        return fixed_str.encode(Encoding.find('UTF-8'))
      end
    end
    return str.encode(Encoding.find('UTF-8'), {:invalid => :replace, :undef => :replace, :replace => '?'})
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T03:00:23.163

我找到了解决办法。

由于只会将特定的电子邮件发送到此帐户以供在此应用程序上使用，因此我可以完全控制格式。出于某种原因，邮件完美解码`text/plain`附件

所以：

```
emails.attachments.each do | attachment |
  if (attachment.content_type.start_with?('text/plain'))
    # extracting txt file
    begin
body = attachment.body.decoded
    rescue Exception => e
      puts "Unable to save data for #{filename} because #{e.message}"
    end
  end
end
mongoMessage = {"date" => emails.date.to_s , "subject" => emails.subject , "body" => body } 
```

# java - Java - 将文本区域转换为字符串

> ID：13203587
> 
> 赞同：0
> 
> 时间：2012-11-02T21:57:45.660
> 
> 标签：java, string, file

我在这里遇到了一些麻烦，我想将文本区域转换为字符串，因此我可以将其存储在新字符串中并将其传递给 txt 文件。这是我的代码：

```
// ta is my textArea, things is a String

things = ta.toString();
outputFile.println(things);
closeFile(); 
```

但是当我这样做时，它实际上是在获取有关 textArea 的所有内容并将其放入字符串中。我只想将文本放入字符串，而不是 textArea 的所有值。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:00:37.687

你需要使用这样的东西：

```
things = ta.getText();
outputFile.println(things);
closeFile(); 
```

# trigger.io - Trigger.io PHP 会话过期

> ID：13203588
> 
> 赞同：1
> 
> 时间：2012-11-02T21:57:52.950
> 
> 标签：trigger.io

伙计们！

我正在尝试在 Trigger.io 中运行 HTML 应用程序。这个应用程序调用 ajax 从 PHP 页面加载一些数据。此时，我对用户进行身份验证并启动会话。在此之后，我必须调用另一个 PHP 页面。因此，我检查了会话是否已启动，我发现该会话不再处于活动状态。第二个电话是在第一个电话之后进行的。

当我尝试使用 iOS 模拟器（我使用的是 Mac - OS X Mountain Lion）从 Trigger.io ToolKit 运行应用程序时会发生这种情况。当我在 Safari 中测试同一个应用程序时，它运行良好：我的 PHP 服务器识别出之前启动的会话，并且第二个页面由 ajax 加载。

有什么我必须设置的参数吗？或者 Trigger.io 不支持 PHP 会话？

谢谢你。

马西奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:41:34.357

您应该使用`forge.request.ajax(params)`ajax 请求，这是因为跨域限制，因为 Forge 应用程序`file://`在 iOS 上作为 url 加载。

`forge.ajax.request`采用与 jQuery 的 $.ajax 类似的输入，因此如果您想在网站和 Forge 应用程序中使用相同的代码，您可以轻松地在它们之间切换。

我们的文档中提供了更多文档：[http ://docs.trigger.io/en/v1.4/modules/request.html#ajax](http://docs.trigger.io/en/v1.4/modules/request.html#ajax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T18:26:57.270

@Connorhd，非常感谢您的帮助！

首先，我向“app_authUser.php”发出 ajax 请求来验证用户身份。然后，如果好的，我向“app_loadFeed.php”发出另一个 ajax 请求以从服务器加载数据。

在第一个 ajax 请求中，我在 post 参数中传递用户数据（登录名和密码）来验证数据库上的用户。我在 php 文件“app_authUser.php”上调用的第一个命令是“session_start()”，如下所示：

服务器端“app_authUser.php”的代码：

```
<?php
    session_start();

    // Just for test;
    $idSession = session_id(); 
    echo $idSession;

    /*
     Test user authenticate. If ok, then I assign idUser to $_SESSION['idUser'] variable.
    */

    if( $loginOk == true ){
        $_SESSION[ 'idUser' ] = $User->idUser;
    }
?> 
```

在上面的代码中，用户已通过身份验证，并且 $_SESSION['idUser'] 已正确启动。在第二个 ajax 请求中，我测试是否设置了变量 $_SESSION[ 'idUser' ]。这就是重点：它不再设置了。同样，我首先调用“session_start()”：

服务器端“app_loadFeed.php”的代码：

```
<?php
    session_start();

    // Just for test;
    $idSession = session_id(); 
    echo $idSession;

    if( isset( $_SESSION[ 'idUser' ] ) ){
        /* Load data from database to return to user.... */
        echo ...
    }
    else{
        echo '0';
    }
?> 
```

当我从 Trigger.io 编译器调用我的应用程序时，上面的测试总是返回 false。但是，当我从 Safari 调用我的应用程序时，它总是返回 true。

我发现当从在 Trigger.io 编译器上运行的应用程序进行调用时，函数“session_id()”在两个 ajax 请求中返回不同的值，但当应用程序在 Sarari 上运行时返回相同的值：

例子：

*   来自 Trigger.io 的请求：第一个请求：echo $idSession 返回“m7dbsv7qqem92os39lv5ao2ta1” 第二个请求：echo $idSession 返回“h49pble06n7ao9pum06kt4dph0”

*   来自 Safari 的请求：
    第一个请求：echo $idSession 返回“2cbhin1185fm5ehvbb15k6n0b1” 第二个请求：echo $idSession 返回“2cbhin1185fm5ehvbb15k6n0b1”

这意味着会话在第一个示例中不一样。为什么会这样？

我没有在我的应用程序中使用 forge.request.ajax。那是我的 ajax 代码，在我的 javascript 中：

```
<script>

function openAjax()
{
    try
    {
        var ajax = new XMLHttpRequest();
    }
    catch(e)
    {
        try
        {
            var ajax = new ActiveXObject("Msxml2.XMLHTTP");
        }
        catch(ee)
        {
            try
            {
                var ajax = new ActiveXObject("Microsoft.XMLHTTP");
            }
            catch(eee)
            {
                var ajax = false;
                alert("Seu navegador não suporta AJAX!")
            }
        }
    }   
    return ajax;
}

// This is the function called at second time, just after I authenticate my user and have session opened.
function loadFeed(){
    var url = CT_URLBase + 'app_loadFeed.php'; // CT_URLBase = 'http://192.168.1.100/' in my local environment.
    var parameters = '';

    var ajax = openAjax();

    ajax.open('POST', url, true);
    ajax.setRequestHeader('Content-type', 'application/x-www-form-urlencoded; charset=iso-8859-1');

    ajax.onreadystatechange = function(){

        if (ajax.readyState == 4){

            if (ajax.status == 200){

                var retorno = ajax.responseText;

                if( retorno != '0' ){

                    /* Return OK!!! */

                }
                else{

                    /* Error: return is 0 (zero), that means session is not started.

                }
            }
        }
    }

    ajax.send(parameters);

}    

</script> 
```

最让我误解的是，相同的代码在 Safari 中完美运行，但在 Trigger.io 中却不行。

顺便说一句，我访问了您的网站 connorhd.co.uk ！很好！这是一个寻找“有趣的东西”的好地方！恭喜！

非常感谢你的帮助！！！

马西奥·克卢姆

# c++ - 结构的“类型”是否会因计算机而异？

> ID：13203589
> 
> 赞同：1
> 
> 时间：2012-11-02T21:58:06.177
> 
> 标签：c++, types

假设我有这段代码；

```
class Ingredients{
    public:
        Ingredients(int size,string name);
        int getsize();
    private:
        string name;
        int size;
};

struct Chain{
    Ingredients* ing;
    Chain* next;  
} 
```

在我的主要;

```
int main()
{
    cout<<typeid(Chain).name()<<endl;
    cout<<typeid(Chain->ing).name()<<endl;
    cout<<typeid(Chain->next).name()<<endl; 

} 
```

我的标题是；

```
#include <iostream>
#include <typeinfo>

using namespace std; 
```

最后输出；

```
P8Chain
P12Ingredients
P8Chain 
```

所以我的问题是，这种类型在代码中使用它是否可靠？如果类型正在改变（因为 P8 和 P12 的东西，我不确定它是否会相同）从计算机到计算机。这种类型不可靠。你有什么意见？

他们也*不会*在每次运行时都发生变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T22:00:19.483

它们取决于你的编译器，所以不要在你的代码中使用它们。

C++ 标准说明了以下有关`typeid`（[第 5.2.8 节](http://www-d0.fnal.gov/~dladams/cxx_standard.pdf)）的内容：

> `typeid`表达式的结果是静态类型`const std::type_info`和动态类型`const std::type_info`或`const` *名称的左***值**，其中*名称*是从.**`std::type_info`**

 **如果你想要某种[RTTI](http://en.wikipedia.org/wiki/Run-time_type_information) ，你*可以*做的是

```
if (typeid(myobject) == typeid(Chain)) {
    do_something();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T22:19:31.033

这取决于您所说的“类型”。类型的或多或少的标准定义是类型可以采用的一组值和操作，这将从一台机器到另一台机器发生变化，因为 的大小`int`会改变，或者字符串的最大长度。另一方面，类型是编译器和 C++ 标准认为的类型，这是非常真实的意义，它非常粗略地对应于，或至少由作用域名称标识。最后，`std::type_info::name()`功能严重不足。充其量，它对调试很有用（例如，记录调用函数的实际派生类），并不是所有的编译器都提供这一点。就标准而言，编译器总是可以返回一个空字符串，并且仍然符合标准。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T22:41:20.150

“类型”一词有多种含义。

就类型理论而言，C++ 结构根本没有真正定义类型。

更有用的是，C++ 语言标准以一种可以严格接受的方式讨论类型，即使它从未非常严格地定义该术语。在这些术语中，结构声明确实定义了一个唯一且一致的类型。

对你的 C++ 编译器（和 C 链接器）来说，可能更有用的是，类型由诸如内存布局、错位名称、成员名称和类型列表、指向特殊和普通成员函数的指针、可能指向 vtable 的指针之类的东西表示和/或 rtti 信息等。从实施到实施，这将是不同的。在具有相同实现的构建之间，即使没有相关代码更改，某些细节（例如指针指向的位置）也可能会更改，但您可能可以定义一个有用的信息子集，您可以有效地将其称为不会更改的“类型”。

除此之外，`type_info`标准第 18.5.1 节定义的实例不能在明确定义的范围内更改，并且`typeid`第 5.2.8 节定义的结果是该实例或仍然与之相等的兼容对象. 因此，在我看来，如果可以同时`type_info`从两个不同的运行中加载实例，`operator==`则必须返回`true`. 但是，实际上不可能`type_info`从两个不同的运行中加载实例（例如，不要求它们以任何方式可序列化），因此这可能不相关。

最后，由 18.5.1 定义的名称`typeid().name()`是任何实现定义的 NTBS。它可以在同一运行中的构建、运行甚至调用之间发生变化。它可能总是空的。实际上，它通常对调试有用，但不能保证——即使是这样，也无济于事，因为“对调试有用”并不一定意味着“在一个运行并持续运行”。

如果您询问特定的编译器，编译器的文档可能会提供比标准要求更严格的保证。例如，我相信在各种平台上，g++ 保证它将使用 CodeSourcery 中定义的 C++ ABI，并且不会在次要编译器版本中更改 ABI 版本，并将使用 ABI 中定义的错误名称作为`type_info`名称。这意味着将二进制文件带到另一台计算机不会影响名称，甚至在具有相同平台和 g++ 版本的另一台计算机上重新编译源代码也不会影响名称。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T22:08:21.023

根据标准，name() 是实现定义的（以及根据 Stroustrup 书 - 参见第 3 版第 415 页）**

# android - 带有节标题的 GridView

> ID：13203594
> 
> 赞同：3
> 
> 时间：2012-11-02T21:58:55.523
> 
> 标签：android, gridview, android-gridview

我正在尝试使用节标题实现 GridView。我在这里发现了另一个问题[Android GridView with categories?](https://stackoverflow.com/questions/7397988/android-gridview-with-categories) ，但是按照接受的答案给了我“标题”作为单元格，而不是标题在自己的行中。

我不确定我在这里缺少什么（也尝试过 MergeAdapter），有人可以指出在 GridView 中实现节标题所需的细微差别吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T22:31:08.660

这在严格意义上是不可能的。在细胞方面`GridView`做*所有事情。*

现在，欢迎您创建一组单元格，当它们连续显示时，恰好看起来像一个标题。大概我`MergeAdapter`可以处理，虽然我肯定从未尝试过。您需要确保：

*   标题单元格都在一行中，这意味着...
*   空单元格位于前一行的任何空格中，在最后一个“真实”单元格之后和标题单元格之前，并且...
*   您拥有正确数量的标题单元格（即，等于您的列数），并且...
*   标题单元格正确呈现为看起来像一个连续的标题，并且......
*   您使用`areAllItemsEnabled()`并`isEnabled()`正确使用，以便不启用标题单元格和空单元格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-19T14:36:41.843

尝试修改通常的列表视图适配器以返回网格单元，请参见[此处](https://github.com/koros/GridViewExample/tree/master)

# mysql - 删除重复行，不保留一行

> ID：13203596
> 
> 赞同：1
> 
> 时间：2012-11-02T21:59:00.950
> 
> 标签：mysql, duplicates, delete-row

我需要一个查询来遍历数据库中的每个条目，检查单个值是否在数据库的其他地方重复，如果是 - 删除两个条目（或全部，如果超过两个）。

问题是条目是 URL，最多 255 个字符，无法识别行。由于性能限制，Stack Overflow 上的一些现有答案对我不起作用，或者它们使用的 uniqueid 在处理字符串时显然不起作用。

**长版：**

我有两个包含 URL（并且只有 URL）的数据库。一个数据库有大约 3,000 个网址，另一个有大约 1,000 个。

但是，这 1,000 个 url 中的大部分来自 3,000 url 数据库。我只需要将 1,000 合并到 3,000 作为**新条目**。

为此，我创建了第三个数据库，其中包含来自两个表的 URL 组合，大约 4,000 个条目。我需要在这个数据库中找到所有重复的条目并删除它们（它们都没有离开）。

我已经按照这个站点上的几个示例的查询，但是每当我尝试删除这两个条目时，它最终都会删除所有条目，或者给出 sql 错误。

* * *

*或者*：我有两个数据库，每个数据库都包含单独的数据库。我需要检查一个数据库中的每一行，以找到不重复的任何行，然后将它们添加到第三个数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T04:45:14.053

Since you were looking for a SQL solution here is one. Lets assume that your table has a single column for simplicity sake. However this will work for any number of fields of course:

```
CREATE TABLE `allkindsofvalues` (
  `value` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

The following series of queries will accomplish what you are looking for:

```
CREATE TABLE allkindsofvalues_temp LIKE allkindsofvalues;

INSERT INTO allkindsofvalues_temp SELECT * FROM allkindsofvalues akv1 WHERE (SELECT COUNT(*) FROM allkindsofvalues akv2 WHERE akv1.value = akv2.value) = 1;

DROP TABLE allkindsofvalues;
RENAME TABLE allkindsofvalues_temp to allkindsofvalues; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-24T14:31:01.637

OP写道：

> **我有我自己的 PHP 解决方案，它非常 hacky，但是可以工作。**
> 
> 我使用 PHP 脚本来完成此操作，因为我对 PHP 比对 MySQL 更熟悉。
> 
> 这会生成一个简单的 url 列表，这些 url 仅存在于目标数据库中，但不能同时存在。如果要解析的条目超过 7,000 个，这可能需要一段时间，并且您需要将结果复制/粘贴到文本文件中或展开脚本以将它们存储回数据库中。
> 
> 我只是手动操作以节省时间。
> 
> *注意：使用 MeekroDB*
> 
> ```
> <pre>
> <?php
> require('meekrodb.2.1.class.php');
> 
> DB::$user = 'root';
> DB::$password = '';
> DB::$dbName = 'testdb';
> 
> $all = DB::query('SELECT * FROM old_urls LIMIT 7000');
> 
> foreach($all as $row) {
>     $test = DB::query('SELECT url FROM new_urls WHERE url=%s',
>         $row['url']);
> 
>     if (!is_array($test)) {
>             echo $row['url'] . "\n";
>     }else{
>         if (count($test) == 0) {
>             echo $row['url'] . "\n";
>         }
>     }
> }
> ?>
> </pre> 
> ```

# php - 如何将信息从 php 程序发送到 fortran？

> ID：13203599
> 
> 赞同：1
> 
> 时间：2012-11-02T21:59:17.800
> 
> 标签：php, fortran, ipc, send

我有一个 fortran 程序，我想从 php 调用它，并通过网站从 php 传递一些参数。

我已经设置了 php 表单，但我不知道如何将信息发送到 fortran。目前，信息通过提示输入到fortran程序中：

```
write(\*,'("give input image name:",$)')
read(\*,\*) iminput 
```

所以我想发送一个数组或类似的东西，这样我就可以拥有

```
CHARACTER(LEN=*) :: iminput 

iminput = post(1) 
```

或类似的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T22:09:15.330

如果您的程序期望其参数作为标准输入而不是命令行参数，您仍然可以使用管道自动传递信息。例如，如果程序询问您的姓名和年龄，您可以从 shell 一次性输入这些信息，而无需等待它询问，方法是：

```
echo -e "user1795485\n1 day" | theprogram 
```

对于您的问题，您需要能够运行程序，写入其标准输入，然后从其标准输出中读取其响应。我认为[proc-open](http://www.php.net/manual/en/function.proc-open.php)会让你做到这一点。我认为该页面上的示例 1 正是您想要的。基本上，您会调用`proc-open`，然后写入 fortran 程序期望的信息，关闭写入句柄，然后读回结果。请注意，不需要以任何方式修改 fortran 程序。

# javascript - 使用 JavaScript 在 base64 中下载和编码图像

> ID：13203600
> 
> 赞同：0
> 
> 时间：2012-11-02T21:59:25.663
> 
> 标签：javascript, base64

假设我有一个 URL。我想：

1）下载并转换为base64 2）将其上传到某个键/值存储（作为文本） 3）从键/值存储（使用文本/纯mimetype）下载它，从base64重新编码，显示它。

此致

# python - 列表切片的大 O

> ID：13203601
> 
> 赞同：56
> 
> 时间：2012-11-02T21:59:30.013
> 
> 标签：python, list, big-o

假设我有一些 Python 列表，`my_list`其中包含 N 个元素。单个元素可以使用 索引`my_list[i_1]`，其中`i_1`是所需元素的索引。但是，Python 列表也可以在需要从到`my_list[i_1:i_2]`列表的“切片”的地方建立索引。对大小为 N 的列表进行切片的 Big-O（最坏情况）表示法是什么？`i_1``i_2`

就个人而言，如果我正在编写“切片器”，我会从`i_1`to迭代`i_2`，生成一个新列表并返回它，这意味着 O(N)，这是 Python 的做法吗？

谢谢，

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-02T22:01:19.203

得到一个切片是 O( `i_2 - i_1`)。这是因为 Python 对列表的内部表示是一个数组，因此您可以`i_1`从`i_2`.

有关更多信息，请参阅 Python[时间复杂度 wiki 条目](https://wiki.python.org/moin/TimeComplexity#list)

如果您愿意，还可以查看[CPython 源代码中的实现。](https://github.com/python/cpython/blob/c353764fd564e401cf47a5d9efab18c72c60014e/Objects/listobject.c#L440)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-11-02T22:01:33.227

根据[http://wiki.python.org/moin/TimeComplexity](http://wiki.python.org/moin/TimeComplexity)

它是 O(k)，其中 k 是切片大小

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-02T22:01:30.903

对于一个大小为 N 的列表和一个大小为 M 的切片，迭代实际上只有 O(M)，而不是 O(N)。由于 M 通常 << N，这会产生很大的不同。

事实上，如果你仔细想想你的解释，你就会明白为什么。您只是从 i_1 迭代到 i_2，而不是从 0 到 i_1，然后从 I_1 到 i_2。

# jquery - JQuery Map 获取索引

> ID：13203604
> 
> 赞同：2
> 
> 时间：2012-11-02T21:59:46.147
> 
> 标签：jquery

我正在使用以下代码获取 FILE OBJ > 使用 jquery .map 函数解析。代码按设计工作，但我需要获取每个对象的索引。

```
 $.map($('.multiupload').get(0).files, function (file) {

alert(this.length);                             

$('#fileList')
    .append('<li><label>' + file.name + '</label><span><input name="tbDescription" type="text" id="' + file.name + '"></span>' + listitems + '<span class="btn btn-mini">remove</span></li>'); 
```

我需要获取文件（索引）值，以便将其添加到 html 输出中。

**警报（this.length）；**
无论我选择了多少文件，总是返回 0。

如果用户选择 3 个文件，我希望 html 输出为

*   文件 0 一些 html 在这里
*   文件 1 一些 html 在这里
*   文件 2 一些 html 在这里

我该从谁获得文件索引值 $.map($('.multiupload').get(0).files, function (file) ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:38:09.277

我想到了。我缺少函数调用的回调。请参阅文档： [http ://docs.jquery.com/Utilities/jQuery.map](http://docs.jquery.com/Utilities/jQuery.map)

jQuery.map（数组，**回调**）

```
$('.multiupload').live('change', function () {
                $.map($('.multiupload').get(0).files, function (file, i) {
                    // return file.name;
                    alert(i);
                    $('#fileList').append('<li><label>' + file.name.toUpperCase() + '</label><span><input name="tbDescription" type="text" id="' + file.name + '"></span>' + listitems + '<span class="btn btn-mini">remove</span></li>');
                }); 
```

# php - Windows 子目录上的 Apache 403（禁止）

> ID：13203608
> 
> 赞同：0
> 
> 时间：2012-11-02T22:00:13.897
> 
> 标签：php, windows, apache, .htaccess, windows-8

所以昨天我在我的 Windows 8 机器上安装了 Apache 2.2、PHP 5.3 和 MySQL。我在两者上都使用相同的 vhost / .htaccess 文件，但它适用于我的 Mac 而不是 Windows。基本上，当我转到“mysite.dev”时，它会呈现该站点的主页，但是一旦我转到任何页面，例如“mysite.dev/about/”，我就会收到 403 禁止错误。

我已验证 Apache 在我的计算机上作为“系统”运行，然后确保从站点文件夹到 root 的所有权限都设置为用户/组系统的完全访问权限。

我已经尝试了很多东西，但无法弄清楚这一点，而且相当烦人。无论如何，我已在所有设置/日志下方发布。先谢谢了。

**虚拟主机：**

```
<VirtualHost *:80>
    ServerAdmin MyEmail@gmail.com
    DocumentRoot "C:/Users/Michael/Dropbox/Sites/onmytv"
    ServerName onmytv.dev
    ServerAlias www.onmytv.dev

    <Directory "C:/Users/Michael/Dropbox/Sites/onmytv">
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order Deny,Allow
        Allow from all
    </Directory>
</VirtualHost> 
```

**.ht 访问：**

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ %{DOCUMENT_ROOT}/index.php/$1 [L] 
```

**网页上显示的错误：**

```
Forbidden

You don't have permission to access /C:/Users/Michael/Dropbox/Sites/onmytv/index.php/about/ on this server. 
```

**错误日志**

```
[error] [client 127.0.0.1] (20023)The given path was above the root path: Cannot map GET /about/ HTTP/1.1 to file 
```

**访问日志**

```
127.0.0.1 - - [02/Nov/2012:17:57:17 -0400] "GET /about/ HTTP/1.1" 403 256 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T22:43:55.470

解决方案是在 .htaccess 文件中更改以下内容

```
RewriteRule ^(.*)$ %{DOCUMENT_ROOT}/index.php/$1 [L] 
```

至

```
RewriteRule ^(.*)$ index.php/$1 [L] 
```

感谢@Svetlio 的有用评论:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T10:34:38.830

用这个：

```
<VirtualHost *:80>
    ServerAdmin MyEmail@gmail.com
    DocumentRoot "C:/Users/Michael/Dropbox/Sites/onmytv"
    ServerName onmytv.dev
    ServerAlias www.onmytv.dev

    <Directory "C:/Users/Michael/Dropbox/Sites/onmytv">
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order Deny,Allow
        Allow from all
        Require all granted
    </Directory>
</VirtualHost> 
```

# python - 发送没有内容长度或其他标头的 http 请求

> ID：13203611
> 
> 赞同：3
> 
> 时间：2012-11-02T22:00:34.977
> 
> 标签：python, http, http-headers, httprequest

我想知道是否存在仅发送带有给定标头的 HTTP 请求的工具。

我需要这个来测试一些应用程序，并希望在缺少一些 HTTP 标头时观察应用程序的行为。

研究了 urllib2、httplib 和 pycurl，但它们在内部添加了自己的标头（在最好的情况下，我们可以指定这些标头的值或将这些值设为空）。

我需要的是一个实用程序，在该实用程序中，我可以完全/透明地控制要在请求中发送的 HTTP 标头（以便我可以发送缺少`content-length`/`content-type`等的请求），并且应用程序仅使用这些标头形成请求，无需在内部添加任何其他内容。

我可以使用浏览器插件来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T22:08:40.113

正如 abartnert 指出的那样，如果您愿意，您可以只使用套接字，但我认为值得注意的是 CURL 也可以满足您的要求。从[http://curl.haxx.se/docs/manpage.html](http://curl.haxx.se/docs/manpage.html)的手册页：

```
Remove an internal header by giving a replacement without
content on the right side of the colon, as in: -H "Host:". 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T22:06:18.093

有很多方法可以做到这一点，但如果您试图在字节级别完全控制请求，则使用套接字可能更容易：

```
s = socket.socket()
s.connect((host, 80))
s.sendall(myrequest) 
```

您实际上可以在发送后将套接字连接到一些 HTTP 解析器库，但这可能很复杂。如果您在分析整个结果之后，最好直接从套接字读取整个结果：

```
s.shutdown(socket.SHUT_WR)
result = ''
while True:
    buf = s.read(4096)
    if not buf: break
    result += buf 
```

# android - Android相机意图 - 内存不足错误和旋转错误

> ID：13203620
> 
> 赞同：3
> 
> 时间：2012-11-02T22:01:27.347
> 
> 标签：android, bitmap, out-of-memory, mediastore, android-camera-intent

我正在创建一个 Android 应用程序，该应用程序利用相机拍照，然后根据用户输入将它们发送到服务器。我目前在相机意图方面遇到了一些问题。我的主要问题是：

1.  与拍摄的位置相比，获得的照片似乎是旋转的。

2.  当我尝试修复此旋转时，我收到 OutOfMemoryError

所以主要我需要确保图片的方向没有改变，并且我没有得到 OutOfMemoryError。

这是使用相机Intent拍照的功能。

```
private void dispatchTakePictureIntent(int actionCode) {
        Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        File f = new File(Environment.getExternalStorageDirectory(),"/ServerApp/test.jpg");
        takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(f));
        startActivityForResult(takePictureIntent, actionCode);
    } 
```

此功能用于旋转图像并将其保存在该旋转处。

```
private void getRotate() {

        String imagePath ="";
        int rotate = 0;
        File f = null;
        try {
             f = new File(Environment.getExternalStorageDirectory(),"/ServerApp/test.jpg");
             imagePath = f.getAbsolutePath();
            File imageFile = new File(imagePath);
            ExifInterface exif = new ExifInterface(
                    imageFile.getAbsolutePath());
            int orientation = exif.getAttributeInt(
                    ExifInterface.TAG_ORIENTATION,
                    ExifInterface.ORIENTATION_NORMAL);

            switch (orientation) {
            case ExifInterface.ORIENTATION_ROTATE_270:
                rotate = 270;
                break;
            case ExifInterface.ORIENTATION_ROTATE_180:
                rotate = 180;
                break;
            case ExifInterface.ORIENTATION_ROTATE_90:
                rotate = 90;
                break;
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        Bitmap p = BitmapFactory.decodeFile(imagePath);

        Matrix m = new Matrix();
        m.setRotate(rotate);
        Bitmap _bitmapScaled = Bitmap.createBitmap(p, 0, 0, p.getWidth()/2,p.getHeight(), m, false);
        f.delete();

        ByteArrayOutputStream bytes = new ByteArrayOutputStream();
        _bitmapScaled.compress(Bitmap.CompressFormat.JPEG, 100, bytes);

        //you can create a new file name "test.jpg" in sdcard folder.
        File f1 = new File(Environment.getExternalStorageDirectory()
                                + File.separator + "test.jpg");
        try {
            f1.createNewFile();
            FileOutputStream fo = new FileOutputStream(f1);
            fo.write(bytes.toByteArray());

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        //write the bytes in file

    } 
```

最后，这是我的 onActivityResult 方法：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data){
        getRotate();
        File f = new File(Environment.getExternalStorageDirectory(),"/ServerApp/test.jpg");
        mImageView.setImageBitmap(BitmapFactory.decodeFile(f.getAbsolutePath()));
    } 
```

我一直在尝试解决这个问题很长时间，如果我能得到一些帮助，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T15:12:00.340

解决内存不足错误的一种方法是使用 Bitmap.Factory 选项，这有一个选项可以让您将图像解码为缩放图像，因此它不会使用太多内存，缺点是，是生成的图像会小一些。您可以使用它并可能对其进行微调以使其达到可接受的损失。此外，您还需要在创建第二个位图后立即在您的第一个位图上调用 p.dispose()。按照此链接获取示例： [http ://tutorials-android.blogspot.co.il/2011/11/outofmemory-exception-when-decoding.html](http://tutorials-android.blogspot.co.il/2011/11/outofmemory-exception-when-decoding.html)

# c# - 使用 IKVM 指定 .Net 框架

> ID：13203637
> 
> 赞同：2
> 
> 时间：2012-11-02T22:02:38.327
> 
> 标签：c#, java, ikvm

我使用 IKVM 将 Java 应用程序编译为 C# dll。我尝试在使用 .Net Framework 2.0 的 C# 项目中使用此 dll，但由于转换后的 dll 框架显然更高而失败。我查看了 IKVM 编译器的参数，但没有找到有关框架的任何内容。

我现在的问题是：

我可以用 IKVM 指定编译的 DLL/EXE 的框架版本吗？如果是这样，怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T09:06:36.037

当前版本的 IKVM 7.1 是使用框架 2.0 构建的。如果您使用 IKVMC 创建 dll，则默认情况下它使用框架 2.0。另一件事是如果您自己构建 IKVM。

如果你想为更高的框架编译一个 dll 为 2.0 那么你需要使用命令行参数：

```
-nostdlib 
```

您需要使用命令行参数将所有需要的引用（如 mscorlib.dll）设置为目标框架：

```
-r:<file name> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-26T14:10:45.970

根据我对所有 IKVM 版本的搜索，IKVM 0.38.0.2 版本及更高版本都包含使用框架 3.5 构建的 IKVM 二进制文件。

0.36.0.11 是最后一个版本，取决于 2.0。该版本仅支持 Java 6，而且太旧了。

# sql - 无损分解

> ID：13203638
> 
> 赞同：6
> 
> 时间：2012-11-02T22:02:39.013
> 
> 标签：sql, database

考虑一个模式 R(A, B, C, D) 和函数依赖 A ⟶ B 和 C ⟶ D。那么为什么将 R 分解为 R1(A, B) 和 R2(C, D) 不是无损分解? 你能用现实生活中的例子解释一下这里丢失了什么信息吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T22:19:29.083

您当然需要在无损分解中概述的两个关系 R1(A,B) 和 R2(C,D)，但是您丢失了关于哪些 A 值与哪些 C 值相关联的关键信息，这些信息存在于原始 R(A, B, C, D)。所以你还需要 R3(A, C) 来保留所有的原始信息。

关系R

```
A    B    C    D
1    2    13   14
2    2    13   14
3    1    12   15 
```

关系 R1

```
A    B
1    2
2    2
3    1 
```

关系 R2

```
C    D
13   14
12   15 
```

加入 R1 和 R2（笛卡尔积）；标记为 ☜</p> 的虚假行

```
A    B    C    D
1    2    13   14
1    2    12   15   ☜
2    2    13   14
2    2    12   15   ☜
1    3    13   14   ☜
3    1    12   15 
```

由于此连接与 R 不同，因此建议的分解不是无损的。

关系 R3

```
A   C
1   13
2   13
3   12 
```

加入 R1、R2、R3

```
A    B    C    D
1    2    13   14
2    2    13   14
3    1    12   15 
```

由于此结果关系与原始 R 相同，因此分解为 R1、R2 和 R3 是无损的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T22:21:15.663

> 那么为什么将 R 分解为 R1(A, B) 和 R2(C, D) 不是无损分解呢？

因为现在 (A,B) 和 (C,D) 是不相关的，而事实并非如此。您还需要 A 和 C 之间的关系。

# javascript - 使用外部 javascript 更改 html 元素的值

> ID：13203640
> 
> 赞同：0
> 
> 时间：2012-11-02T22:02:52.070
> 
> 标签：javascript, jquery, html, external-js

下面是我要更改的 div

```
<div id="@page.Page" class="pageMessages" data-messages='@Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(@page.Messages))'></div> 
```

当从外部 .js 文件调用 javascipt 函数时，我想更改消息的值。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:17:23.970

像这样...

```
// This Performs the Change
$('#changeme').attr('data-messages', 'New Value');

// Show the Change
$('#changeme').html( $('#changeme').attr('data-messages') ); 
```

这是一个工作[**小提琴**](http://jsfiddle.net/videsignz/A6N49/)

我看到的一个问题是 id='@page.Page' ，这不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T22:15:22.190

我希望我能得到你想要做的事情，你可以使用 jquery 的 change 属性

**查询**

```
<script>
$(document).ready(function(){
   $(".pageMessages").attr("data-messages","your-new-value-here");
});
</script> 
```

**文档：http :** [//api.jquery.com/attr/](http://api.jquery.com/attr/)

# javascript - AJAX 是否应该使用标签 /#!/？

> ID：13203642
> 
> 赞同：10
> 
> 时间：2012-11-02T22:03:02.630
> 
> 标签：javascript, ajax, internet-explorer, hashtag, url-design

我制作了一个具有 URL 形式的网页[http://www.example.com/module/content](http://www.example.com/module/content) 这是一个非常动态的网页，实际上它是一个网络应用程序。

为了使其尽可能响应，我想使用 AJAX 而不是普通的页面请求。这也使我能够使用 JavaScript 添加一个层以提供离线功能。

我的问题只是：我应该如何制作 URL？它们应该是[http://www.example.com/module/content](http://www.example.com/module/content)还是[http://www.example.com/#!/module/content](http://www.example.com/#!/module/content)？

以下只是我在两个方向上的想法。如果您对此已有清晰的想法，则无需阅读。

我想使用第一个版本，因为我想支持新的 HTML5 标准。它易于使用，而且 URL 看起来很漂亮。但更重要的是它允许我这样做：

> 如果用户请求一个页面，它将返回一个完整的 HTML 页面。
> 
> 如果用户然后单击一个链接，它将仅通过 AJAX 将内容插入到容器 div 中。

这将使没有 JavaScript 的用户能够使用我的网站，因为它不需要使用 JavaScript，它只会使用普通的“点击链接-请求-获取完整的 html 页面”-方法。

虽然这很好，但问题当然是 Internet Explorer。只有最新版本的 IE 支持 History API，并且要在旧版本中使用此功能，需要使用主题标签。（我的 50% 的用户将使用 IE，所以我需要支持它......）所以我必须使用 /#!/ 让它工作。

如果同时使用这两种 URL 版本，就会出现问题，即如果 IE 用户将此链接发布到网站，Google 将向服务器发送一个 _unescaped_string（或类似的..），并且它会将带有 IE 版本的页面与井号。有些页面将没有主题标签。

正如我们所记得的那样，在许多不同的事情上，非主题标签会更好。那么，这个搜索引擎问题能被规避吗？是否可以告诉 GoogleBot 如果它正在访问网站的主题标签版本，它应该被重定向到网页的非主题标签版本？这样一来，人们可以获得非标签 URL 的所有好处，并且仍然支持 IE6-IE9。

你认为最好的方法是什么？也许你自己在实践中尝试过？感谢您的回答！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-03T01:12:22.440

如果您希望 Google 为您的 Ajax 内容编制索引，那么您应该像这样使用 #!key=value。这就是[Google 更喜欢](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started)Ajax 导航的方式。

如果你真的更喜欢不带#的漂亮 HTML5 url！那么，是的，您可以同时支持两者而不会出现索引问题！只需添加：

```
<link rel="canonical" href="preferredurl" /> 
```

到`<head>`每个页面的部分（用于初始加载），以便帮助 Google 知道您希望它们索引的 url 版本。在此处阅读有关[规范网址的](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394)更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T23:08:31.153

在这种情况下，解决方案非常简单。您使用第一个 URL 方案，并且不使用旧 IE 浏览器的 AJAX 增强功能。

如果您的宝贵用户不想升级，那是他们的问题，但他们不能抱怨没有这些 kewl 效果和动态。

您可以抛出“您的浏览器严重过时！” 请注意旧版浏览器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T14:07:23.813

我不会`/#!/`在网址中使用。首先确保页面正常工作，有完整的页面请求（这应该很容易）。一旦成功，您可以检查该`window.history`对象，如果存在则添加 AJAX。AJAX 调用可以转到相同的 url，主要区别在于服务器端处理。检查很简单，如果`HTTP_X_REQUESTED_WITH`设置了，则请求是 AJAX 请求，如果未设置，则处理的是标准请求。

您无需担心重复的内容，因为 GoogleBot 不会设置`HTTP_X_REQUESTED_WITH`请求标头。

# java - Vaadin：将私有 java.util.Calendar 项目绑定到 PopupDateField

> ID：13203644
> 
> 赞同：1
> 
> 时间：2012-11-02T22:03:12.127
> 
> 标签：java, forms, vaadin

我有一个带有 type 字段的 bean `java.util.Calendar`。我正在扩展`FormFieldFactory`类以适当地呈现剩余的字段，但我不确定如何使用 PopupDateField 来呈现要键入的字段`java.util.Calendar`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T21:32:28.200

如果您正在构建一个 Web 应用程序 - 您可以向域添加一个瞬态 Date 属性，在 setter 和 getter 上执行日历到日期转换以获取或更新原始字段。希望有帮助！！！

```
@Transient
private Datetime calendarExAsDate; // corresponds to @Column... private Calendar calendarEx property of the  domain.

 public DateTime getCalendarExAsDate() {
        if (this.getCalendarEx() == null) return null;
        return new DateTime(this.getCalendarEx().getTime());
    }

    public void setCalendarExAsDate(DateTime calendarExAsDate) {
        if (calendarExAsDate== null) return;
        this.calendarExAsDate = calendarExAsDate;
        Calendar cal = Calendar.getInstance();
        cal.setTime(calendarExAsDate.toDate());
        this.setCalendarEx(cal);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T08:50:10.083

不久前，我创建了一个自定义版本的`PopupDateField`modified for `java.sql.Date`。我个人会使用 java.util.Date，但决定权不在我手中。在我的例子中，最简单的部分是它不是while`java.sql.Date`的子类。`java.util.Date``java.util.Calendar`

我将描述我对 PopupDateField 派生类所做的修改，但我意识到它可能不会起作用，因为 Calendar 不是从 Date 派生的。

我从来没有玩过 BeanItems，但您可以尝试创建一个自定义`Property`来作为包装器，`Calendar`并且也许创建您自己的`VaadinPropertyDescriptor`以将该字段绑定到您的自定义属性。

这个答案是为了更明确，但我希望它至少有点帮助。如果您有可能影响 bean 结构，我建议您将 Calendar 切换为 Date 并仅在需要时将 Calendar 与 Date 一起使用。

# mobiscroll - Mobiscroll 演示

> ID：13203645
> 
> 赞同：0
> 
> 时间：2012-11-02T22:03:14.917
> 
> 标签：mobiscroll

我正在查看 MobiScroll 的演示并选择了以下选项：

```
Demo Page: Demo
Demo: Time
Display: Modal
Mode: Scroller 
```

演示示例显示了我应该使用的结果 HTML：

```
<input id="i" name="i"  />

<a href="#" id="show" class="btn">Show</a>
<a href="#" id="clear" class="btn">Clear</a> 
```

当我使用这个 HTML 时，显示和清除按钮会显示在页面上，当我单击输入框时，Mobiscroll 会内嵌显示。在演示中，这些按钮与 Mobiscroll 一起出现在模式对话框中。我需要用特殊标签将 HTML 包装在 div 中吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:31:17.837

问题是需要 jQuery Mobile js + css 文件来获取模式弹出窗口。网站上的指示不明确！我添加了以下内容和presto！

```
<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" /> 
```

# android - 使用gson在android中序列化json

> ID：13203654
> 
> 赞同：0
> 
> 时间：2012-11-02T22:04:26.050
> 
> 标签：android, json, gson

我有一个看起来像这样的 json

```
 {"abcd": {
     "id": 1234,
     "response": "authenticated",
     "key": "abrakadaba",
     "userId": 5555
 }} 
```

和一个看起来像这样的类：

```
public class Login
{
    @SerializedName("response")
    public String response;

    @SerializedName("userId")
    public int userId; 

    @SerializedName("id")
    public int employeeId;

    @SerializedName("key")
    public String key;
} 
```

这通常有效，但不适用于具有`{"abcd": {}}`我需要检索的所有信息的json。

我如何处理这个“abcd”标签来查找和序列化所有其他值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:09:33.630

您需要一些东西来包装登录名以与“abcd”一致。gson/jackson/whatever 想要先解析它。您可以创建一个包含登录名的新类。如果该包装类真的要被丢弃，那么您可能只想让它解析 a`Map<String, Login>`然后执行 myParsedMap.get("abcd") 来获取您的 Login 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T22:32:18.187

这是有效的：

```
@SerializedName("auth")
    authorization auth;

    public class authorization
    {
        @SerializedName("response")
        public String response;

        @SerializedName("userId")
        public int userId; 

        @SerializedName("Id")
        public int employeeId;

        @SerializedName("key")
        public String key;
    } 
```

# java - 没有 .read() 的 Java 文件输入流读取

> ID：13203656
> 
> 赞同：3
> 
> 时间：2012-11-02T22:04:26.787
> 
> 标签：java, file, fileinputstream, fileoutputstream

我遇到了一个奇怪的问题，我想知道是否有人知道可能是什么原因。我正在使用 FileInputStream 读取一个文件（一个 472 KB 的小 exe），我计划通过 RMI 连接发送文件，我有一个想法，我可以根据我已经发送了多少来显示上传的百分比与文件的总长度相比。

首先我在本地尝试了它，但我无法让它工作。这是一个例子，我在做什么。

```
FileInputStream fileData = new FileInputStream(file);
reads = new ArrayList<Integer>();
buffers = new ArrayList<byte[]>();
int i = 0;
while ( (read = fileData.read(buffer)) > 0) {
      System.out.println("Run : " + (i + 1));
      outstreamA.write(buffer, 0, read);
      reads.add(read);
      buffers.add(buffer);
      outstreamB.write(this.buffers.get(i), 0, this.reads.get(i));
      i = i + 1;
} 
```

这两个 FileOutputStream 创建了两个文件（相同的只是名称不同），工作正常。但是，当我不使用 fileData.read() 而是任何其他 for / while 时，它​​就不起作用了。它创建完全相同的文件（长度完全相同），但我的 Window 无法运行 exe，我收到一条错误消息：“此文件的版本与您正在运行的 Windows 版本不兼容......”。

这就是我尝试的方式：

```
//for (int i = 0; i < buffers.size(); ++i) {
  i = 0;
//while ( (read = fileData2.read(buffer)) > 0) {
  while ( i < size) {
      System.out.println("Run#2 : " + (i + 1));
      outstreamC.write(this.buffers.get(i), 0, this.reads.get(i));
      i = i + 1;
  } 
```

fileData2 与 fileData 相同。如果我使用 fileData2.read(buffer)，outstreamC 也会创建一个工作文件。

如果我运行直到列表的大小，或者直到等于我输入第一个时间的时间的“大小”，这并不重要。有什么东西不见了，我想不通。

奇怪的是，outstreamB 创建了一个工作文件，但 outstreamC 不能，但它们使用完全相同的项目。

最初我打算每次通过 RMI 连接进入第一个时通过“读取”和“缓冲区”，然后在所有部件到达后将所有东西放在另一边，但现在我的计划有点死了。任何人都可能有一个想法，我该如何解决这个问题，或者实现类似的东西以便能够通过 RMI 发送文件？

最好的问候，米哈利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T22:08:35.250

你的代码永远无法工作。您正在重复读取同一个缓冲区并将同一个缓冲区添加到列表中。因此，该列表包含您读取的最终数据的多个副本。每次循环时都需要分配一个新缓冲区。

# ajax - 为什么是 1x1 GIF 而不是 XHR？

> ID：13203660
> 
> 赞同：3
> 
> 时间：2012-11-02T22:04:42.760
> 
> 标签：ajax, google-analytics, xmlhttprequest, web-analytics

简单的问题：为什么客户端脚本（例如`ga.js`来自 Google Analytics）以嵌入 1x1 GIF 请求中的查询参数的形式将数据发送到服务器？为什么不使用 XMLHttpRequest？

只是为了实现跨浏览器兼容吗？还是有其他原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T22:22:13.060

xhr 受制于同源策略，并非所有客户端都具有可靠的脚本支持。gif 信标是一种可靠的解决方案。//应该是评论

# php - 如果用户没有启用 javascript，则使用 javascript 隐藏输入 - 无论如何要阻止它在页面加载时快速闪烁？

> ID：13203663
> 
> 赞同：0
> 
> 时间：2012-11-02T22:05:05.473
> 
> 标签：php, javascript, jquery, css

我有一个 jquery 范围滑块，如果人们禁用了 javascript，则需要改为两个文本输入。所以我使用 javascript 来隐藏输入，这样如果 JavaScript 被禁用，那么我的非 JavaScript 用户将在那里输入。

因此，当页面加载时，输入仅在 javascript 启动并隐藏它们之前出现几分之一秒。这有点烦人，但我想这不是一个大问题。只是想知道是否有人有更好的方法来做到这一点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T22:07:09.277

是的，将输入字段放在 noscript 标记中（或在 noscript 标记中替代、非隐藏的 css 版本）

IE

```
<script>
// Output your base slider html via javascripthere
</script>
<noscript>
<!-- Your plain HTML fields here -->
</noscript> 
```

# android - 可以为移动设备和计算机编写 Android 应用程序吗？

> ID：13203665
> 
> 赞同：1
> 
> 时间：2012-11-02T22:05:12.430
> 
> 标签：android, cross-platform

如果我创建了一个使用屏幕按钮的 Android 应用程序，如果它在 PC 上运行，我还可以对其进行编码以侦听键盘击键吗？所以我的意思是，如果我开发一个可以在移动设备和 PC 上运行的应用程序，我是否可以保持它们的代码相同，并且仍然在两个版本中听键盘敲击？

因此，如果我在移动设备上打开应用程序，它将使用触摸屏，如果我在计算机上打开相同的应用程序，它将使用键盘进行输入，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:35:32.177

我的朋友 Android 平台仅适用于移动设备，其硬件设计为只能安装 android 平台。对于 PC，我们还有其他平台，如 Windows、LINUX 等。因此，要在 PC 上运行 android 应用程序，您需要有一个可以安装在 PC 上的 android 平台。到目前为止，还没有可以安装在PC上的android平台。但将来可能会提供。然后你可以考虑你的问题。

**玩得开心，等待在 android 中有另一个新的创新，这样它也可以在 PC 上使用**

# java - java中的表达式语言

> ID：13203668
> 
> 赞同：1
> 
> 时间：2012-11-02T22:05:24.287
> 
> 标签：java

我的目录中有文件，例如

```
/home/jay/120123.txt
/home/jay/121343.txt
/home/jay/122123.txt 
```

这里的关键是文件名的前三位是唯一的。我如何在 java 中编写表达式语言（从未在 java 中编写过 EL），这将与 unix 命令“ls 120*”=“120123.txt”相同

所以像 String getFile(String uniqueId) 这样的方法将被称为

```
String file = getFile("120") and the file should be 120123.txt 
```

我需要 getFile() 方法的逻辑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:11:38.123

您想使用 File.listFiles(FilenameFilter)。

也许是这样的：

```
public File[] getFiles(File folder, String prefix){
    return folder.listFiles(new FilenameFilter(){
        public boolean accept(File dir, String name){
            return name.startsWith(prefix);
        }
    };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T22:13:27.807

对于**Java 6**

您可能会发现`WildcardFileFilter`Apache [Commons IO](http://commons.apache.org/io)对此有用：

```
File dir = new File(".");
FileFilter fileFilter = new WildcardFileFilter("120*.txt");
File[] files = dir.listFiles(fileFilter);
for (int i = 0; i < files.length; i++) {
   System.out.println(files[i].getName());
} 
```

对于**Java 7**

[Files.newDirectoryStream](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#newDirectoryStream%28java.nio.file.Path%29)提供了这个功能：

```
Path dir = Paths.get(".");
try (DirectoryStream<Path> stream = Files.newDirectoryStream(dir, "120*.txt")) {
    for (Path entry : stream) {
        System.out.println(entry.getFileName());
    }
} catch (IOException e) {

} 
```

# iphone - 带有 NSManagedObject 的 EXC_BAD_ACCESS

> ID：13203670
> 
> 赞同：1
> 
> 时间：2012-11-02T22:05:28.267
> 
> 标签：iphone, core-data, nsmanagedobject, nsentitydescription

我正在尝试在多个表中插入值（准确地说是 25 个），我能够在除一个表之外的所有表中插入记录，这是因为只有一个属性，如果我删除该属性，它就会开始保存数据到表中，但是当我添加该属性并尝试设置其值时，它以 EXC_BAD_ACCESS 终止。

我尝试更改属性的名称，甚至是表的名称，但没有奏效。下面是我的代码::

```
Ashes *ashesObj = (Ashes *)[NSEntityDescription insertNewObjectForEntityForName:@"Ashes" inManagedObjectContext:managedObjectContext];

[ashesObj setAshes_id:@""];
[ashesObj setArrangement_id:@"34"];
[ashesObj setCasket_order_date:@""];
[ashesObj setCasket_model:@""];
[ashesObj setCasket_supplier:@""];
//[ashesObj setAshes_address:@"N/A"];    (This one is causing problem)
[ashesObj setPostal_code:@"N/A"];
[ashesObj setName_client:@""];
[ashesObj setTelephone:@""];
[ashesObj setEmail:@""];

    NSError *error;

if (![managedObjectContext save:&error])
{
    NSLog(@"Problem saving: %@", [error localizedDescription]);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T22:33:19.157

一般最佳实践，任何时候遇到 EXEC_BAD_ACCESS 时，立即使用 Zombies 工具通过 Instruments 运行您的代码（以及相同的点击/代码路径）。

使用未注释的那行代码来执行此操作。您的应用程序会崩溃，但 Instruments and Zombies 会指出导致崩溃的确切代码行（这与您那里的代码不同）。

很可能您不小心过度释放了一个对象，并且无论出于何种原因，它仅在您执行上面的代码时才被暴露。

您可以使用 Product 菜单从 XCode 启动 Instruments，然后选择 Profile。Instruments 启动后，系统会提示您使用该工具，选择 Zombies。然后一旦模拟器出现，执行测试用例重现问题。崩溃发生后，您将看到来自 Zombies 的信息。

# c#-4.0 - 如果我们只知道文件名的一部分，如何读取完整的文件名，例如，从文件夹开始 XYZ_----.txt

> ID：13203675
> 
> 赞同：0
> 
> 时间：2012-11-02T22:05:48.983
> 
> 标签：c#-4.0

如何从文件夹中读取所有相似的文件名。C:\Records 文件夹中的“Record_*”.txt 等文件名。例如，我的文件名以 Record_.txt 开头。所以在这里我们只知道文件名的第一部分。

这是我尝试过的，但没有用

```
 string path =ConfigurationManager.AppSettings["LogDir"];
     string[] files = Directory.GetFiles("C:\Records", "Record_*" + ".txt", SearchOption.TopDirectoryOnly);

Example for my FileNames 
  Record_12345.txt
  Record_33124.txt
  Record_77624.txt 
```

我想从 C:\Records 文件夹中读取所有文件名，如 "Record_*".txt

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:23:10.703

我认为您只需要在路径中添加第二个反斜杠（即确保正确转义斜杠）。其他一切看起来都不错

```
string path = ConfigurationManager.AppSettings["LogDir"];
string[] files = Directory.GetFiles("C:\\Records\\", "Record_*" + ".txt", SearchOption.TopDirectoryOnly); 
```

# php - 是否可以使用 webhost 使用 websockets 进行网络聊天？

> ID：13203676
> 
> 赞同：0
> 
> 时间：2012-11-02T22:05:49.310
> 
> 标签：php, ajax, node.js, livechat

我是一个没有经验的 PHP 程序员，我正在使用 Codeigniter 创建一个网站，该网站在 webhost 的服务器上运行。除其他功能外，该网站应包含多个聊天室，中型群组（+/- 25 人）可以在其中进行实时聊天会话。聊天室的数量取决于网站的受欢迎程度，因此聊天功能应该是可扩展的，我希望准备好托管成百上千的聊天室。

我发现这样做的一种方法是使用 ajax 短轮询，即将每条消息保存在数据库中并每秒轮询数据库。我认为这种方法不能很好地扩展（因为它对数据库来说似乎非常密集），所以我认为使用长轮询方法会更好，例如带有 node.js 的 websockets。

我没有使用套接字的经验，据我所知，node.js 要求您使用自己的服务器（例如本地主机）。理想情况下，我想将 node.js 的功能集成到我的网站中，以便将每条即将到来的消息推送给所有其他聊天用户，并且每隔一段时间（例如每 10 分钟）将消息发送到数据库，以便以后可以查看聊天记录。

这似乎不可能，因为 node.js 需要在您自己的服务器上独立运行。在使用 webhost 的服务器时，我该怎么做才能使我的聊天与 websockets 一起工作？这可能吗？我应该使用不同的网络服务器而不是网络主机，还是应该坚持短轮询？提前谢谢了。

# sql - 我坚持在 SQL Server 上创建约束

> ID：13203682
> 
> 赞同：0
> 
> 时间：2012-11-02T22:06:36.547
> 
> 标签：sql, sql-server, database

我对 SQL Server 管理完全陌生，我尝试在表中添加约束。

情况是我创建了一个**只有 'Y' 或 'N' allowed to be value**的列。

因此，我尝试通过右键单击表中的“约束”在 Management Studio 中创建约束。

但是，我真的不知道创建约束的语法。最后，我参考网上的模板，尝试将代码输入到“检查约束表达式”窗口。SQL Server 总是告诉我“错误验证约束”。

你们能帮我写第一个约束吗？因为我真的不知道如何开始。

我的要求是：

```
I have a table called "Customer"
I created a column called "AllowRefund"
The column "AllowRefund" is only allowed to 'Y' or 'N' 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:10:27.650

我会建议您不要尝试做什么。有一种数据类型（位）旨在表示具有两种状态的值。如果你使用这种类型，你甚至根本不需要约束。SQL Server 将强制该值为 1 或 0，无需额外工作。您只需将您的应用程序设计为将 1 视为是，将 0 视为否。

您正在尝试的方法不是一个好主意，也不会带来任何好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T22:14:24.813

您可以按如下方式执行此操作：

```
ALTER TABLE Customer 
ADD CONSTRAINT CK_Customer_AllowRefund
CHECK (AllowRefund in ('Y','N')) 
```

但是@JohnFx 是正确的 - 你最好将此列设为位字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T22:14:35.513

我部分同意 JohnFix，但知道定义检查约束的正确语法可能对您将来有用（因为您显然不阅读手册），这里是创建这样一个约束的 SQL：

```
alter table customer 
  add constraint check_yes_no check (AllowRefund in ('Y', 'N')); 
```

您可能还希望将列定义为`NOT NULL`以确保始终具有该值。

（由于我不使用“Management Studio”，我无法告诉您必须在何处以及如何输入该 SQL）。

# javascript - 如何使用backbonejs从对象渲染视图？

> ID：13203685
> 
> 赞同：0
> 
> 时间：2012-11-02T22:06:56.343
> 
> 标签：javascript, jquery, backbone.js

模板代码：

```
<script type="text/template" id="baseTemplate">
        <% collection.each(function() { %>
            <div>
                <%= collection %>
            </div>
        <% }); %>
</script>
<div id="baseContainer"></div> 
```

其他代码是：

```
//model
var PageModel = Backbone.Model.extend({
    defaults: {
        "id":null,
        "title":"",
        "content":""
    },
});
//collection
var PageCollection = Backbone.Collection.extend({
    defaults: {
        model: PageModel
    },
    model: PageModel,
    url: 'api/get_page/?id=6'
});
//view
var PageView = Backbone.View.extend({

    el: $('#baseContainer'),

    initialize: function () {
        this.collection = new PageCollection();
        this.collection.bind("reset", this.render, this);
        this.collection.bind("change", this.render, this);
        this.collection.fetch();
    },
    render: function () {

    var html = _.template($("#baseTemplate").html(), { collection: this.collection });
    this.$el.html(html);
    console.log(html);
    return this;
    }
});

 var page = new PageView(); 
```

问题是它的返回和对象我如何从对象中获取值？api 链接`http://furqankhanzada.com/backbonejs/api/get_page/?id=6`在这里，您可以在浏览器控制台中看到对象，`http://furqankhanzada.com/backbonejs/` 我需要获取标题、内容、附件 -> 图像 -> 大画廊 -> url（使用 each() 的附件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:43:12.980

不确定这是否是正确的解决方案，但您可以尝试一下。

另一种可能是，

```
var html = _.template($("#baseTemplate").html(), { models: this.collection.models }); 
```

传递模型而不是直接传递集合。在模板中你可以做这样的事情，

```
<script type="text/template" id="baseTemplate">
  <% _.each(models, function(mdl) { %>
    <div>
      <%= mdl.get('title') %>
      <%= mdl.get('content') %>
      <% _.each(mdl.get('page').attachments, function(attachment) { %>
        <%= attachment.images["Gallery Large"].url %>
     <% }) %>  
   </div>
  <% }); %>
</script>
<div id="baseContainer"></div> 
```

请根据您的需要修改标记。但是这个解决方案对问题来说太具体了:( :(

# javascript - 使用 arc.Centroid 将 svg:image 放在弧的中间 - 但没有出现

> ID：13203693
> 
> 赞同：0
> 
> 时间：2012-11-02T22:07:43.300
> 
> 标签：javascript, d3.js

我目前正在尝试将 svg:image 放在弧的中心：

```
 var arcs = svg.selectAll("path");

arcs.append("svg:image")
.attr("xlink:href", "http://www.e-pint.com/epint.jpg ")
.attr("transform", function(d) { return "translate(" + arc.centroid(d) + ")"; })
.attr("width", "150px") 
.attr("height", "200px"); 
```

如果有人能给我任何关于为什么它没有出现的建议，我将不胜感激

谢谢：http: [//jsfiddle.net/xwZjN/17/](http://jsfiddle.net/xwZjN/17/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:22:43.890

查看 jsfiddle，您是`path`在尝试将元素附加到元素之后创建元素`svg:image`。应该反过来。您应该首先创建弧线，然后附加图像。

其次，据我所知，该`svg:path`元素不应包含任何`svg:image`标签。如果你在里面放一些，它似乎不会显示它们。相反，您应该做的是创建`svg:g`带有类的标签，`arc`然后使用它们来放置`svg:images`

稍微修改你的 jsfiddle 可能看起来像这样：

```
var colours = ['#909090','#A8A8A8','#B8B8B8','#D0D0D0','#E8E8E8'];

var arcs = svg.selectAll("path");

for (var z=0; z<30; z++){
   arcs.data(donut(data1))
      .enter()
      //append the groups
      .append("svg:g")
      .attr("class", "arc")
      .append("svg:path")
      .attr("fill", function(d, i) { return colours[(Math.floor(z/6))]; })
      .attr("d", arc[z])
      .attr("stroke","black")
} 

//here we append images into arc groups
var pics = svg.selectAll(".arc").append("svg:image")
   .attr("xlink:href", "http://www.e-pint.com/epint.jpg ")
   .attr("transform", function(d,i) {
       //since you have an array of arc generators I used i to find the arc
       return "translate(" + arc[i].centroid(d) + ")"; })
   .attr("x",-5)
   .attr("y",-10)
   .attr("width", "10px") 
   .attr("height", "20px"); 
```

我还减小了图像的大小并偏移它们以使它们适合弧线。

# java - 使用 MouseListener 在 JLabel 中设置和获取对象

> ID：13203694
> 
> 赞同：4
> 
> 时间：2012-11-02T22:07:51.430
> 
> 标签：java, mouselistener

我有`JLabel`一个`MouseListener`

```
label.addMouseListener( new ClickController() ); 
```

要执行的操作在哪里

```
class ClickController{
...
public void mouseClicked(MouseEvent me) {
        // retrieve Label object
} 
```

有什么方法可以将对象与 JLabel 关联，以便我可以从 mouseClicked 方法中访问它？

编辑：

举一个更说明性的例子，我在这里尝试将 JLabels 设置为扑克牌的图形表示。标签旨在表示具有所有实际数据的对象卡。所以我想将该 Card 对象与 JLabel 相关联。

**解决方案：**

正如“满载鳗鱼的气垫船”所暗示的那样，`me.getSource()`这是要走的路。在我的特殊情况下是：

```
Card card = new Card();
label.putClientProperty("anythingiwant", card);
label.addMouseListener( new ClickController() ); 
```

并从侦听器获取 Card 对象：

```
public void mouseClicked(MouseEvent me) {
   JLabel label = (JLabel) me.getSource();
   Card card = (Card) label.getClientProperty("anythingiwant");
   // do anything with card
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T22:29:42.447

您可以通过调用`getSource()`所有 MouseListener 和 MouseAdapter 方法中返回的 MouseEvent 轻松获取单击的对象。如果将 MouseListener 添加到多个组件中，则单击的一个将以这种方式返回。

IE，

```
public void mousePressed(MouseEvent mEvt) {
   // if you're sure it is a JLabel!
   JLabel labelClicked = (JLabel) mEvt.getSource();
} 
```

注意：我通常更喜欢使用该`mousePressed()`方法，`mouseClicked()`因为它不那么“怯懦”并且即使鼠标在按下之后和释放之前移动也会注册按下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T22:34:38.313

您可以简单地使用 a `Map<JLabel, Card>`（如果您想从标签中获取卡片）或 a `Map<Card, JLabel>`（如果您想从卡片中获取标签）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T22:14:45.873

当然，一种简单的方法是创建一个构造函数，`ClickController`其中包含`JLabel`. 然后您可以访问`JLabel`对象中的特定内容。例如：

```
class ClickController{
    private JLabel label;
    public ClickController(JLabel label){
        this.label = label;
    }    ...
    public void mouseClicked(MouseEvent me) {
        label.getText()//Or whatever you want
    }
} 
```

# android - 无法在 Linux 上使用 Eclipse 运行 Android AVD

> ID：13203705
> 
> 赞同：0
> 
> 时间：2012-11-02T22:09:12.937
> 
> 标签：android, ubuntu, avd

我正在尝试让我的 Android AVD 在 Ubuntu 12.10 上与 Eclipse 一起运行。我在 Eclipse 中创建了 AVD，现在它没有运行。这是我在运行 AVD 时收到的输出错误：

> 为 AVD 'My_android-16' 启动模拟器 - 无法启动模拟器：无法运行程序“/usrdata/Dev/android-sdk-linux//tools/emulator”：错误=2，没有这样的文件或目录

我正在使用 Ubuntu 12.10，安装了最新的 Eclipse。

我做了什么：

1.  我给了`/tools/emulator chomod 777`权限。
2.  `cp /usrdata/Dev/android-sdk-linux/tools/emulator /usrdata/Dev/android-sdk-linux`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T14:47:00.413

您不必安装所有 ia32 软件包。您可以使用：

```
sudo apt-get install lib32ncurses5 lib32stdc++6 
```

此外，我需要为[此处](https://stackoverflow.com/questions/11332817/failed-to-load-libgl-so-in-android)提到的 LibGL.so.1 创建软链接。

```
ln -s /usr/lib/libGL.so.1 ~/android-sdk-linux_x86/tools/lib/libGL.so 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-24T04:58:06.957

在终端上运行以下命令：

`apt-get install ia32-libs`

参考：http: [//developer.android.com/sdk/installing/index.html#troubleshooting](http://developer.android.com/sdk/installing/index.html#troubleshooting)

# asp.net - 加载网页时不显示 Gridview ASP.NET

> ID：13203710
> 
> 赞同：0
> 
> 时间：2012-11-02T22:09:42.600
> 
> 标签：asp.net, gridview, objectdatasource

好吧，我对 ASP.NET 很陌生，我已经在这个项目上工作了大约两个星期，但是我无法获得带有 objectdatasource 的 GridView 来显示网页何时加载，我可以在设计时看到所有列。该方法返回一个列表，在设计时我可以看到所有列名称正确的列，但是在加载服务和网页之后什么都没有显示。任何帮助将不胜感激。向所有读者致敬。该方法接收一个字符串值，我已将默认值设置为“q”。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        DataSourceID="ObjectDataSource1">
        <Columns>
            <asp:BoundField DataField="Contraseña" HeaderText="Contraseña" 
                SortExpression="Contraseña" />
            <asp:BoundField DataField="Id_User" HeaderText="Id_User" 
                SortExpression="Id_User" />
            <asp:BoundField DataField="Nombre" HeaderText="Nombre" 
                SortExpression="Nombre" />
            <asp:BoundField DataField="Tipo" HeaderText="Tipo" SortExpression="Tipo" />
            <asp:BoundField DataField="Usuario" HeaderText="Usuario" 
                SortExpression="Usuario" />
        </Columns>
    </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T09:08:58.620

代码看起来不错。您实际上不需要使用 Data Source Control 调用 databind()，而是可能需要检查 objectdatasource 的 SelectMethod 中的返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T22:49:44.040

将以下内容添加到您的 GridView：

```
<asp:GridView ID="GridView1" runat="server" 
  EmptyDataText="DOH! No Data!" 
  ShowHeaderWhenEmpty="True" 
```

# jquery - 将非框架代码实现到 laravel 或 codeigniter 等框架中

> ID：13203711
> 
> 赞同：0
> 
> 时间：2012-11-02T22:09:46.703
> 
> 标签：jquery, mysql, ajax, codeigniter, laravel

我正在尝试在我的 Laravel 应用程序中实现**AJAX Booking Calendar Pro 。***（它是从 CodeCanyon 购买的）*我已经实现了大部分插件，我只需要弄清楚如何将它连接到数据库，以便我可以保存和显示信息。我正在使用控制器方法。js文件的开头是这样的..

```
(function($)
{
    $.fn.DOPBookingCalendar = function(options)
    {
        var Data = {'Type':'BackEnd',
                'DataURL':'/php/load.php',
                'SaveURL':'/php/save.php',
                'DayNames':['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
                'MonthNames':['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
                'AvailableText':'AVAILABLE', // The available text.
                'BookedText':'BOOKED', // The Booked text.
                'UnavailableText':'NOT AVAILABLE', // The unavailable text.
                'DateType':1, // 1: american style; 2: european style;
                'PopupDisplayTime':300, // The time for the Pop-Up to Show/Hide
                'StatusLabel':'Status', // The text for Availability label.
                'PriceLabel':'Price', // The text for Price label.
                'Currency':'$', // The currency.
                'SubmitBtnText':'Submit', // The text for Submit button.
                'ResetBtnText':'Reset', // The text for Reset button.
                'ExitBtnText':'Exit', // The text for Exit button.
                'InvalidPriceText':'Error! Please enter a number for the price.' // The text for Invalid Price Warning.
               }, 
```

在我看来，这可能就像将 DataURL 和 SaveURL 设置为控制器/模型一样简单......但是我将如何连接数据库，以及我如何知道表将具有哪些字段？希望有人对此有经验。

```
//This is the save query

if (isset($_POST['dop_booking_calendar'])){
    require_once 'opendb.php';
    mysql_query('UPDATE schedule SET data="'.$_POST['dop_booking_calendar'].'" WHERE id=1');
}

//this is the load query

require_once 'opendb.php';

$query = mysql_query('SELECT * FROM schedule WHERE id=1');

while ($result=mysql_fetch_array($query)){
    echo $result['data'];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T23:03:15.667

我认为您应该重写脚本的数据库连接和通信部分并将其替换为 Laravel 查询生成器。

例如改变

```
mysql_query('SELECT * FROM schedule WHERE id=1'); 
```

进入：

```
$schedule = DB::query('SELECT * FROM schedule WHERE id=1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:48:00.650

这对某些人来说可能很明显，但我花了一段时间，因为我是直接使用 mySQL 和 PHP 的新手。但是我发现我必须创建一个名为“schedule”的数据库以及名为“id”和“data”的两行，以便日历向它们写入数据。

但我也对 load.php 文件感到困惑。我已成功获取日历以使用 save.php 将数据写入数据库，但 load.php 文件未检索数据。很奇怪。我已经尝试过 Stefan 提供的方法，但仍然没有任何运气。

有人知道如何从上述数据库中检索数据吗？这是我的完整 load.php 文件。

```
<?php
    require_once 'opendb.php';

    $query = mysql_query('SELECT * FROM schedule WHERE id=1');

    while ($result=mysql_fetch_array($query)){
        echo $result['data'];
    }

?> 
```

# django - Django测试增加pk问题

> ID：13203714
> 
> 赞同：1
> 
> 时间：2012-11-02T22:10:10.367
> 
> 标签：django, django-testing

所以我有一个测试类，它有一个设置方法来创建一个可以测试的模型对象：

```
class UserProjectTests(TestCase):

    fixtures = ['admin_test.json']

    def setUp(self):
        ...
        self.project1 = Project.objects.create(
            user=self.user_profile1,
            product=self.product1,
            module=self.module1,
            model=self.model1,
            zipcode=90210
        )
        self.project1.save()

    def test_module_created(self):
        ...

    def test_model_created(self):
        ...

    def test_product_created(self):
        ...

    def test_project_created(self):
        #! what happened to pk<4???
        result1 = Project.objects.get(pk=4)
        self.assertEquals(result1.zipcode, 90210)

    def test_user_cannot_edit_project_they_dont_own(self):
        ... 
```

我的问题是 - 为什么我必须调用`pk=4`来获取测试数据库中的唯一对象？如果我将此测试向上移动几个函数，我必须查询以通过测试的 pk 会减少。似乎每次安装程序运行时它都不会从原始数据库开始，因为 pk 是自动递增的。

谁能告诉我这是为什么？无论它出现在哪个测试功能中，我应该怎么做才能使用 pk=1？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:15:58.630

Django 的测试运行程序在每次测试后刷新数据库，它不会删除它并重新创建它——这会大大减慢测试速度。

与其硬编码一个 pk 号码，您可以只要求第一个元素：`Project.objects.all()[0]`. 由于您使用空表开始每个测试运行，因此可以保证为您提供所需的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T22:15:48.667

如果确实期望这将是数据库中的唯一对象，您可以像这样检索它：

```
result1 = Project.objects.get() 
```

如果找到多个（或没有）对象，则会引发错误。这样做可能更安全：

```
result1 = Project.objects.all()[-1] 
```

这将检索最后一个对象。

# android - 将自定义组件小部件动态添加到 Android 中的布局中

> ID：13203719
> 
> 赞同：3
> 
> 时间：2012-11-02T22:11:03.643
> 
> 标签：android, components

[我使用本教程http://www.anotherandroidblog.com/2011/05/26/custom-composite-android-component/](http://www.anotherandroidblog.com/2011/05/26/custom-composite-android-component/)创建了一个自定义复合组件

现在我正在尝试使用此组件将其动态添加到片段中的布局中。我正在使用充气机..

```
LinearLayout column1 = (LinearLayout) getActivity().findViewById(R.id.linear2);
IdeaWidget idea = (IdeaWidget) inflater.inflate(R.layout.idea_component, column1); 
```

我收到一个错误：

```
11-02 16:07:25.074: E/AndroidRuntime(883): FATAL EXCEPTION: main
11-02 16:07:25.074: E/AndroidRuntime(883): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.architter/com.example.architter.MainActivity}: java.lang.ClassCastException: android.view.ContextThemeWrapper cannot be cast to android.app.Activity 
```

这是代码..谢谢！

自定义组件的 XML 文档* *** *

```
<?xml version="1.0" encoding="utf-8"?>
<com.example.architter.IdeaWidget 
    xmlns:android="http://schemas.android.com/apk/res/android"  
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
    >
    <ImageView
        android:id="@+id/image"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:contentDescription="@string/hello_world"
        ></ImageView>
    <TextView
        android:id="@+id/description"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        ></TextView>
    <ImageButton
        android:id="@+id/archthis"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="@string/hello_world"
        ></ImageButton>
</com.example.architter.IdeaWidget> 
```

自定义组件的 Java 类***** ****

```
package com.example.architter;

import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.util.AttributeSet;
import android.util.Log;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;

public class IdeaWidget extends LinearLayout {

    private ImageView image;
    private TextView description;
    private ImageButton archthis;

    public IdeaWidget(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onFinishInflate() {
        super.onFinishInflate();
        ((Activity)getContext()).getLayoutInflater().inflate(R.layout.idea_component, this);
        setupViewItems();
    }

    private void setupViewItems() {
        description = (TextView) findViewById(R.id.description);
        image = (ImageView) findViewById(R.id.image);
        archthis = (ImageButton) findViewById(R.id.archthis);
    }

    public void setDescription(String text) {
        description.setText(text);
    }

    public void setImage(String url) {
        Bitmap bitImage = getBitmapFromURL(url);
        image.setImageBitmap(bitImage);
    }

    public void setArchthis(ImageButton imgb) {
        archthis = imgb;
    }

    public static Bitmap getBitmapFromURL(String src) {
        try {
            Log.e("src",src);
            URL url = new URL(src);
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            connection.setDoInput(true);
            connection.connect();
            InputStream input = connection.getInputStream();
            Bitmap myBitmap = BitmapFactory.decodeStream(input);
            Log.e("Bitmap","returned");
            return myBitmap;
        } catch (IOException e) {
            e.printStackTrace();
            Log.e("Exception",e.getMessage());
            return null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T22:28:44.167

LogCat 指出您正在尝试将 ContextThemeWrapper 对象转换为 Activity 对象，这是您无法做到的。这似乎发生在这里：

```
((Activity)getContext()).getLayoutInflater().inflate(R.layout.idea_component, this); 
```

好消息是您可以通过不同的方式获取 LayoutInflater 的副本：

```
LayoutInflater.from(this).inflate(R.layout.idea_component, this); 
```

# function - Handlebars.js - Each 和 getter

> ID：13203720
> 
> 赞同：4
> 
> 时间：2012-11-02T22:11:21.757
> 
> 标签：function, loops, each, handlebars.js, getter

我正在使用 Handlebars.js，但遇到了我无法解决的问题。

我想遍历模板中的数组，但问题是我用于迭代器的表达式是 getter 而不是数组。

说明问题的一段代码如下：

HTML：

```
<script id="template" type="text/x-handlebars">
    Accessing directly: {{array}} <br/>
    Accessing by getter: {{getArray}} <br/>

    <br/>

    Looping directly:
    <ul>
    {{#each array}}
        <li>{{this}}</li>
    {{/each}}
    </ul>

    <br/>

    Looping by getter:
    <ul>
    {{#each getArray}}
        <li>{{this}}</li>
    {{/each}}
    </ul>
</script>

<p id="content"></p> 
```

JS：

```
var template = Handlebars.compile($("#template").html());
var element = {
    array: [0, 1, 2],

    getArray: function() {
        return this.array;
    }
};

$("#content").html(template(element)); 
```

问题是`each`使用 getter 的 什么都不做。这可以在这个[jsFiddle](http://jsfiddle.net/ezequielscaruli/wamWd/1/)中看到。

是否有任何干净的方法可以使用 getter 执行此操作，或者我应该编写一个帮助程序或类似辅助函数的东西？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T01:17:23.807

`{{#each}}`需要一个数组，它不会理解其他任何内容。您可以为此添加一个简单的自定义帮助程序，如果您希望这样做，您只需要记住使用[`fn.call(this)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)：

```
getArray: function() {
    return this.array;
} 
```

有权利`this`。这样的事情可能会奏效：

```
Handlebars.registerHelper('smart_each', function(a, block) {
    if(typeof a == 'function')
        a = a.call(this);
    var s = '';
    for(var i = 0; i < a.length; ++i)
        s += block(a[i]);
    return s;
}); 
```

演示：http: [//jsfiddle.net/ambiguous/yuPfD/](http://jsfiddle.net/ambiguous/yuPfD/)

您可能想查看`{{#each}}`Handlebars 源代码中的实现以对其进行一些修饰，但我将把它留作练习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-31T03:19:40.657

如果你使用[正确的 JavaScript getter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/get)，你的技术就会奏效。这是一个使用类的示例，在 ES6 中可用。对于下面代码的 ES5 示例，请参阅[使用 babel.io 的 repl 的这个版本](http://babeljs.io/repl/#?experimental=false&evaluate=true&loose=false&spec=false&code='use%20strict'%0A%0Aconst%20handlebars%20%3D%20require('handlebars')%0Aconst%20template%20%3D%20%22%7B%7B%23each%20letters%7D%7D%20%7B%7Bthis%7D%7D%20%7B%7B%2Feach%7D%7D%22%0Avar%20context%0A%0Aclass%20Alphabet%20%7B%0A%20%20get%20letters()%20%7B%0A%20%20%20%20return%20'abc'.split('')%0A%20%20%7D%0A%7D%0A%0Acontext%20%3D%20new%20Alphabet()%0Aconsole.log('class%20instance%20with%20getter%20methods%3A')%0Aconsole.log(handlebars.compile(template)(context))%0A%0A%0Acontext%20%3D%20%7B%0A%20%20letters%3A%20'xyz'.split('')%0A%7D%0A%0Aconsole.log('regular%20object%3A')%0Aconsole.log(handlebars.compile(template)(context))%0A)。

```
'use strict'

const handlebars = require('handlebars')
const template = "{{#each letters}} {{this}} {{/each}}"
var context

class Alphabet {
  get letters() {
    return 'abc'.split('')
  }
}

context = new Alphabet()
console.log('class instance with getter methods:')
console.log(handlebars.compile(template)(context))

context = {
  letters: 'xyz'.split('')
}

console.log('regular object:')
console.log(handlebars.compile(template)(context)) 
```

输出：

```
❯ node index.js
class instance with getter methods:
 a  b  c 
regular object:
 x  y  z 
```

# ruby-on-rails - Typhoeus::Hydra 的未定义方法“cache_getter”

> ID：13203722
> 
> 赞同：0
> 
> 时间：2012-11-02T22:11:23.833
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, typhoeus, hydra

我不知道为什么我会收到这个错误。两种方法都是正确的。

```
hydra = Typhoeus::Hydra.new

             hydra.cache_getter do |request|
                Rails.cache.read(request.cache_key) rescue nil
             end
             hydra.cache_setter do |request|
               Rails.cache.write(request.cache_key,request.response, expires_in: request.cache_timeout)
             end 
```

ruby 1.9.2p320（2012-04-20 修订版 35421）[x86_64-darwin11.4.2]

导轨 3.2.8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:25:18.517

您收到该错误是因为 Typhoeus::Hydra 的实例上不存在这些方法。[您可以在http://rubydoc.info/gems/typhoeus/0.5.0/frames](http://rubydoc.info/gems/typhoeus/0.5.0/frames)找到可用方法的完整列表

**更新**

通过[此提交在](https://github.com/typhoeus/typhoeus/commit/c4f9a6b5e91a17ef9c3f2f4a9a95b7d9fee3f37e#lib/typhoeus/hydra.rb)[0.4.2 和 0.5.0](https://github.com/typhoeus/typhoeus/compare/v0.4.2...v0.5.0)版本之间删除了这些方法

# java - eclipse java资源泄漏

> ID：13203725
> 
> 赞同：3
> 
> 时间：2012-11-02T22:11:57.903
> 
> 标签：java, eclipse

Eclipse java 警告：资源泄漏：“未分配的可关闭值”永远不会关闭

```
try(FileChannel f = new RandomAccessFile(new File(p),"rw").getChannel();){} 
```

泄漏点在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:33:33.087

资源是 RandomAccesFile。你正在做一个新的对象，但你没有将它存储到任何变量中，所以你永远不能关闭它 randomAccesFile.close()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-04T18:01:58.303

您可以放心地忽略这一点。

由于`FileChannel`is also`Closeable`并且`FileChannel::close`还关闭了基础流。

# git - Git在哪里存储远程跟踪分支

> ID：13203728
> 
> 赞同：11
> 
> 时间：2012-11-02T22:12:19.133
> 
> 标签：git

我必须 Git 存储库`repo1`和`repo2`. 有3个分店`master`，`alpha`和`beta`在`repo1`。`repo2`从`repo1`.

在`repo2`中，我可以看到远程跟踪分支`git branch -a`：

```
remotes/origin/HEAD -> origin/master
remotes/origin/master
remotes/origin/alpha
remotes/origin/beta 
```

但是里面的文件夹`.git/refs/remotes/origin/`只有`repo2`一个文件`HEAD`，其内容是：

```
ref: refs/remotes/origin/master 
```

所以这`HEAD`是一个象征性的参考。但是为什么它指向一个不存在的 ref 呢？顺便说一句，在哪里`repo2`存储 和 的`alpha`信息`beta`？（`repo2`知道`alpha`并且`beta`因为它显示它们`git branch -a`。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T23:27:02.753

裁判可能“打包”在`.git/packed-refs`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T22:21:53.857

这些信息在您添加或修改遥控器时`.git/config`由工具更新并更新。`git remote`上有一个手册页[`git-config`](http://www.kernel.org/pub/software/scm/git/docs/git-config.html)。如果您搜索“跟踪分支”，您将看到如何配置它们的详细信息。

# html - 来自 S3 的流媒体视频断断续续

> ID：13203730
> 
> 赞同：0
> 
> 时间：2012-11-02T22:12:25.953
> 
> 标签：html, video, amazon-s3, streaming, html5-video

我正在开发一个需要将视频从原始格式转换为 mp4 和 ogv 的网站，以便我可以使用 HTML5 视频标签。我使用 ffmpeg 进行转换并将视频上传到 Amazon S3。然后我有一个 Cloud Front 设置，可以从我的 S3 存储桶流式传输。

我已经能够让视频在 HTML5 中播放，但它们非常不稳定。当我在我的电脑上播放视频时，它可以流畅地播放。

我可以做些什么来确保我的视频播放流畅？

[您可以在http://tendermercyclub.com/video.html](http://tendermercyclub.com/video.html)看到断断续续的视频。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T20:48:45.913

下载到我的硬盘时，视频也断断续续，这让我相信这是编码的问题。视频的帧率设置为 20，比特率为 64kb/s。对于这种大小的视频来说，这是相当低的。根据标准，我至少会使用 24 帧速率，但主要是我会将比特率提高到至少 250kb/s，看看它有什么不同。

# java - 使用servlet 是否比struts2 中的action-classes 更好？

> ID：13203731
> 
> 赞同：3
> 
> 时间：2012-11-02T22:12:29.323
> 
> 标签：java, multithreading, jakarta-ee, servlets, struts2

众所周知，**Servlet**对各个*请求*使用单独的线程，这提高了服务器的效率。然而，在 struts2 框架中，每个映射**的 Action-Class都为各自的***requests*创建了自己的对象。

现在，与普通 servlet 中的线程相比，在 struts2 中拥有单个对象是一种好的做法（优化）吗？为什么我们不只有 servlet！？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T22:28:28.563

当请求进入 Web 容器时，容器会从池中获取一个线程来执行请求。处理请求后，线程将返回池以用于后续请求。可以并行处理多个请求，因为池中有多个线程可用。

您在 Web 应用程序中声明的每个 servlet 仅由 Web 容器实例化一次。因此，多个并发线程使用每个 servlet 的单个实例。这就是为什么您的 servlet 必须是线程安全的。

Struts 对上述内容没有任何改变。它的作用是定义一个处理*所有*请求的 servlet 或过滤器。对于针对给定动作路径的每个请求，都会创建一个新的 Struts Action 实例。这就是带有 servlet 的模型不同的地方。servlet 是一个单例（所有请求只有一个实例），而新的 Struts 操作会为每个请求实例化。

优点是动作不需要是线程安全的，因为它只被一个线程使用，然后被丢弃。它可以包含中间状态而不需要任何同步。缺点是创建了许多实例。但是由于 Java 垃圾收集器在回收像 Struts 操作这样的短期对象方面非常快，因此在实践中不会造成任何问题。

# c# - 为什么我的方法 getTaskByID 来自 Mpxj 库中 ProjectFile 的方法返回 null？

> ID：13203732
> 
> 赞同：0
> 
> 时间：2012-11-02T22:12:34.987
> 
> 标签：c#, asp.net-mvc, ms-project, mpxj

我已在页面[http://mpxj.sourceforge.net/apidocs/net/sf/mpxj/ProjectFile.html](http://mpxj.sourceforge.net/apidocs/net/sf/mpxj/ProjectFile.html)中读到 GetTaskById 方法返回请求的任务，如果未找到则返回 null，但我不知道为什么找不到活动。

这是我的代码：

```
 var actividades=db.Actividades.Where(s=>s.ProyectoId==ProyectoId).Include(s=>s.ActApuCompuesto);

        ProjectFile pfile = new ProjectFile();

        foreach(var item in actividades){
            Task task= pfile.addTask();
            task.setName(item.Nombre);
            task.setDuration(Duration.getInstance(item.Cantidad * item.ActApuCompuesto.DuracionApu(), TimeUnit.DAYS));
            task.setID(new Integer(item.Id));
        }
        //pfile have all activities, I check it.

        foreach (Task task in ToEnumerable(pfile.getAllTasks()))
        {

            int valor=task.getID().intValue();
            var precedencias=db.ActividadRelacionPrecedencias.Where(s => s.Actividad1Id ==valor );
              foreach (var item2 in precedencias)
              {//item2.Actividad2Id not is null
                   Task taskPrec = pfile.getTaskByID(java.lang.Integer.valueOf(item2.Actividad2Id));
               //But taskprec is null
                  task.addPredecessor(taskPrec, relationType(item2.RelacionPrecedenciaId), Duration.getInstance(item2.MasDias, TimeUnit.DAYS));
              }

        } 
```

# java - 格式化数字以在 Java 中打印

> ID：13203733
> 
> 赞同：2
> 
> 时间：2012-11-02T22:12:35.813
> 
> 标签：java, formatting, number-formatting

我想在打印时格式化我的号码。我在用着

```
private static DecimalFormat formatter = new DecimalFormat("#00"); 
```

问题是它打印

```
-01  
05 
```

我想打印

```
-1  
05 
```

或者

```
-01  
 05 
```

有没有办法在不使用 if 语句的情况下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T22:17:10.537

好吧，显然您可以提供*两种*格式，一种用于正数，一种用于负数。[看这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DecimalFormat.html)

所以你应该使用

```
DecimalFormat formatter = new DecimalFormat("#00;#0"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T23:18:01.773

您要求 DecimalFormat 做的比它做的更多。它仅格式化*数字*，如果您希望将该数字进一步格式化为*String*，则需要将其与“String” `Formatter`（[此处为 javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)）结合起来。

```
Formatter formatter = new Formatter(System.out);
DecimalFormat numFormatter = new DecimalFormat("#00");
formatter.format("%3s\n", numFormatter.format(-3));
formatter.format("%3s\n", numFormatter.format(11));
formatter.format("%3s\n", numFormatter.format(2)); 
```

输出

```
-03
 11
 02 
```

请注意，字符串格式化程序将所有字符串对齐为三个字符宽。如果您输入的值大于三个字符，那么它将溢出 3 的 [width]（这可能是您想要的）。

# php - 在 PHP 中重用对象

> ID：13203736
> 
> 赞同：0
> 
> 时间：2012-11-02T22:12:55.170
> 
> 标签：php, mysql, session, global-variables

我有一门课程，其中包括`mysql`链接和其他。我在加载首页时创建了此类的一个对象，但我不想在重新加载页面时再次创建。

`mysql`不能存储在会话中，那么有没有其他方法可以全局保存对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T22:16:58.713

我认为你想要的是[持久的数据库连接](http://php.net/manual/en/features.persistent-connections.php)。

这需要稍微修改您的连接代码，但是您无需手动管理持久性（即您无需手动将某些内容放入会话中）。

不过，请确保在继续之前阅读大量内容。有很多含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T22:15:36.187

一些选项：

*   使用 APC 缓存缓存对象
*   `serialize()`对象并将其保存到文件中。再次需要时，读取文件并调用`unserialize()`

请记住，您将无法以这种方式存储资源。正如其他人所提到的，您将希望对对象的该部分使用持久连接。

**编辑**我想我会稍微解释一下，因为有一个明显的问题是无法保存 mysql 连接并且它正在收到评论。

如果要保存/恢复包含数据库连接的对象，则需要处理无法序列化的位。您可以在对象被序列化时取消设置属性，然后在对象被取消序列化时重新创建它们。PHP 提供了两个方便的钩子，`__sleep()`和`__wakeup()`，正是为了这个目的。你可以像这样使用它们：

```
class SaveableConnection {

    $connection = null;

    public function __construct() {
        $this->connect();
    }

    public function connect() {
        // read config and connect
        $this->connection = new PDO($dso);
    }

    public function __sleep() {
        // get rid of the bit that cant be saved
        unset($this->connection);
    }

    public function __wakeup() {
        // re-create the bit that wasn't save on disk
        $this->connect();
    }
} 
```

如果您使用的是持久数据库连接，那么`$this->connection`将通过从相关缓存中复制连接来优化 的值。

您可以为任何暗示序列化的对象使用同样的技巧：保存到文件、缓存在 memcached 或 APC 中，以及**会话**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T22:17:00.457

如果您尝试避免与 MySQL 的多个连接，您可以使用[mysql_pconnect](http://us3.php.net/manual/en/function.mysql-pconnect.php)的持久连接。

> “首先，连接时，该函数将首先尝试查找已使用相同主机、用户名和密码打开的（永久）链接。如果找到，将返回它的标识符，而不是打开新连接。”

# python - s3multiput (boto) 从 EC2 实例上传到 s3 的静默失败

> ID：13203745
> 
> 赞同：3
> 
> 时间：2012-11-02T22:13:43.280
> 
> 标签：python, crontab, boto

我正在尝试自动化一个流程，该流程收集一个（或多个）AWS 实例上的数据，每小时将数据上传到 S3，由解耦流程检索以进行解析和进一步操作。作为第一步，我编写了一些 crontab 启动的 shell 脚本（在 Ubuntu 12.04 LTS 中运行），它调用 boto 实用程序 s3multiput。

在大多数情况下，这工作正常，但非常偶尔（可能每周一次）文件未能出现在 s3 存储桶中，我看不到任何错误或异常抛出以追查原因。

我正在使用 boto 2.6.0 中包含的 s3multiput 实用程序。Python 2.7.3 是实例上的默认 python。我为实例分配了一个 IAM 角色，以向 boto 提供 AWS 凭证。

我有一个 crontab 调用一个脚本，该脚本调用一个调用 s3multiput 的包装器。我`-d 1`在 s3multiput 调用中包含了标志，并重定向了 crontab 作业上的所有输出，`2>&1`但是丢失数据的小时的报告看起来就像之前一小时和之后一小时的报告一样，每个都成功了。

因此，99% 的时间它都有效，但是当它失败时，我不知道为什么，而且我无法确定去哪里寻找。我只是在解析器作业尝试从存储桶中提取数据并且它不存在时才发现失败。数据在它应该上传的目录中是安全可靠的，所以我可以手动完成，但宁愿不必这样做。

如果有帮助，我很乐意发布大约 30-40 行相关代码，但想知道是否有其他人遇到过这个问题，听起来很熟悉。

某个盛大的日子我会回到管道的这一部分并用 python 重写它以消除 s3multiput，但我们还没有开发时间。

我如何调查 s3multiput 上传的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:33:57.703

首先，我会尝试更新 boto；当分段上传失败时，对开发分支的提交会提到日志记录。请注意，这样做需要使用 using `s3put`，因为`s3multiput`它被折叠成`s3put`.

# ruby-on-rails-3 - NameError: 未初始化的常量 ActiveRecord::Errors

> ID：13203750
> 
> 赞同：0
> 
> 时间：2012-11-02T22:14:25.280
> 
> 标签：ruby-on-rails-3, testing

我是 Rails 新手，不知道如何继续。我正在尝试完成“RailsS​​pace”一书，但在有关测试的部分中遇到了错误。（任何可能拥有这本书的人的第 119 页）

导轨 3.2.8

红宝石 1.9.3p194

在控制台中运行时：

```
@error_messages = ActiveRecord::Errors.default_error_messages; 0 
```

我收到此错误：

**NameError: 未初始化的常量 ActiveRecord::Errors**

跑步时`rake test:units`

我得到：

```
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /Users/home/rails_projects/retrospection/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /Users/home/rails_projects/retrospection/config/environment.rb:5)
Run options: 

# Running tests:

EEEEE

Finished tests in 0.108070s, 46.2663 tests/s, 0.0000 assertions/s.

  1) Error:
test_screen_name_maximum_length(UserTest):
NameError: uninitialized constant ActiveRecord::Errors
    /Users/home/rails_projects/retrospection/test/unit/user_test.rb:7:in `setup'

  2) Error:
test_screen_name_minimum_length(UserTest):
NameError: uninitialized constant ActiveRecord::Errors
    /Users/home/rails_projects/retrospection/test/unit/user_test.rb:7:in `setup'

  3) Error:
test_uniqueness_of_screen_name_and_email(UserTest):
NameError: uninitialized constant ActiveRecord::Errors
    /Users/home/rails_projects/retrospection/test/unit/user_test.rb:7:in `setup'

  4) Error:
test_user_invalidity(UserTest):
NameError: uninitialized constant ActiveRecord::Errors
    /Users/home/rails_projects/retrospection/test/unit/user_test.rb:7:in `setup'

  5) Error:
test_user_validity(UserTest):
NameError: uninitialized constant ActiveRecord::Errors
    /Users/home/rails_projects/retrospection/test/unit/user_test.rb:7:in `setup'

5 tests, 0 assertions, 0 failures, 5 errors, 0 skips
rake aborted!
Command failed with status (5): [/Users/home/.rvm/rubies/ruby-1.9.3-p194/bi...]

Tasks: TOP => test:units 
```

我的**user_test.rb**文件如下所示：

```
require 'test_helper'

class UserTest < ActiveSupport::TestCase

  def setup 
    @error_messages = ActiveRecord::Errors.default_error_messages
    @valid_user = users(:valid_user)
    @invalid_user = users(:invalid_user)
  end

  #This user should be valid by construction.
  def test_user_validity
    assert @valid_user.valid?
  end

  #This user should be invalid by construction.
  def test_user_invalidity
    assert !@invalid_user.valid?
    attributes = [:screen_name, :email, :password]
    attributes.each do |attribute|
      #assert @invalid_user.errors.invalid?(attribute) OLD CODE DOES NOT WORK IN RAILS3
       assert @invalid_user.invalid?(attribute)
    end
  end

  def test_uniqueness_of_screen_name_and_email
    user_repeat = User.new( :screen_name => @valid_user.screen_name,
                            :email       => @valid_user.email,
                            :password    => @valid_user.password)
    assert !user_repeat.valid?
    assert_equal @error_messages[:taken], user_repeat.errors.on(:screen_name)
    assert_equal @error_messages[:taken], user_repeat.errors.on(:email)

  end

  #MAKE SURE THE SCREEN NAME CAN'T BE TO SHORT
  def test_screen_name_minimum_length
    user = @valid_user
    min_length = User::SCREEN_NAME_MIN_LENGTH

    #Screen name is too short.
    user.screen_name = "a" * (min_length - 1)
    assert !user.valid?, "#{user.screen_name} should raise a minimum length error"
    #Format the error message based on minimum length.
    correct_error_message = sprintf(@error_messages[:too_short], min_length)
    assert_equal correct_error_message, user.errors.on(:screen_name)

    #Screen name is minimum length.
    user.screen_name = "a" * min_length
    assert user.valid?, "#{user.screen_name} should be just long enough to pass"
  end

  #MAKE SURE THE SCREEN NAME CAN'T BE TOO LONG
  def test_screen_name_maximum_length
      user = @valid_user
      max_length = User::SCREEN_NAME_MAX_LENGTH

      # Screen name is too long.
      user.screen_name = "a" * (min_length + 1)
    assert !user.valid?, "#{user.screen_name} should raise a maximum length error"
    #Format the error message based on maximum length.
    correct_error_message = sprintf(@error_messages[:too_long], max_length)
    assert_equal correct_error_message, user.errors.on(:screen_name)

    #Screen name is maximumlength.
    user.screen_name = "a" * max_length
    assert user.valid?, "#{user.screen_name} should be just short enough to pass"
  end
end 
```

根据错误信息**"/Users/home/rails_projects/retrospection/test/unit/user_test.rb:7:in `setup'"**导致问题的行是

```
@error_messages = ActiveRecord::Errors.default_error_messages 
```

# drupal - 关于drupal分类网站中的分类

> ID：13203751
> 
> 赞同：0
> 
> 时间：2012-11-02T22:14:27.523
> 
> 标签：drupal, drupal-views

嗨，我有一个问题，我正在制作一个分类网站，当我放置上下文过滤器时，我遇到了广告类别的问题，因为我想显示一个页面，其中包含类别和该类别中的广告数量

示例：移动电话服务 (3)

问题是这个上下文过滤器只显示我有一些广告的类别，它没有显示我还没有广告的类别，我做错了什么？有一种方法可以通过这个上下文过滤器来显示我还没有任何广告的类别

例子：我想要那个

手机服务 (3) 手机 (0) 车载套件和免提 (0)

现在看到只向我显示移动电话服务，因为我在此类别中有 3 个广告，即使没有广告，我也想显示所有类别，请有人可以帮助我，我将不胜感激，我正在使用 wampserver 在 localhost 中工作，和drupal 7并且不使用分类法我希望我可以使用视图和上下文过滤器来做到这一点，如果有人了解我的情况，请帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T17:43:55.407

我假设您已经创建了按术语分组的节点视图。我认为您想要的是通过关系拉入相关节点并按术语分组的术语视图。然后你会得到所有的条款。

创建一个新视图。在创建视图页面上，将“显示：内容”更改为“显示：分类术语”。如果您希望对其进行限制，请将“类型：全部”更改为特定词汇。添加您的页面设置。单击继续并编辑。

现在，在“高级”下，添加“分类术语：内容与术语”类型的关系。取消选中“需要这种关系”。

将一个字段添加到您的“内容：标题”类型的视图中，该字段使用您刚刚创建的关系。去掉它的标签。这会引入关联节点的节点标题。

在“格式”下，然后在视图第一列的“设置”下，将“分组字段”更改为“分类术语：名称”。您现在应该会看到带有节点和术语的术语标题。

编辑现有的“分类术语：名称”字段并选中“从显示中排除”。这将删除重复的术语显示。

现在添加两种，首先是“分类术语：名称”，然后是“内容：标题”。

希望有帮助...

# php - 错误的奥尔森时区偏移？

> ID：13203759
> 
> 赞同：12
> 
> 时间：2012-11-02T22:15:06.587
> 
> 标签：php, timezone, timezone-offset

今天我注意到我的脚本将奥尔森时区 ID 转换并显示为城市和 GMT 偏移量产生了一些非常奇怪的结果：阿根廷区域引起了我的注意，因为它们显示的标准（非 DST）时间偏移量为 ±0000 参考 GMT /世界标准时间。

我检查了我的代码，在我的逻辑中发现了一个小错误，但它与差异无关，所以我`timezonedb`通过`pecl`版本更新`2012.8`但它仍然返回错误的偏移量......

以下是一些返回`America/Argentina/San_Luis`时区最近 3 次更改的代码：

```
$timezone = new DateTimeZone('America/Argentina/San_Luis');
$transitions = $timezone->getTransitions();

echo '<pre>';
print_r(array_slice($transitions, -3, null, true));
echo '</pre>'; 
```

这是输出：

```
Array
(
    [59] => Array
        (
            [ts] => 1223784000
            [time] => 2008-10-12T04:00:00+0000
            [offset] => -10800
            [isdst] => 1
            [abbr] => WARST
        )

    [60] => Array
        (
            [ts] => 1236481200
            [time] => 2009-03-08T03:00:00+0000
            [offset] => -14400
            [isdst] => 
            [abbr] => WART
        )

    [61] => Array
        (
            [ts] => 1255233600
            [time] => 2009-10-11T04:00:00+0000
            [offset] => -10800
            [isdst] => 1
            [abbr] => WARST
        )
) 
```

如您所见，索引`59`和`61`是 DST 偏移量，而索引`60`是标准时间偏移量。

但是，如果您检查[Time&Date](http://www.timeanddate.com/worldclock/city.html?n=613)标准偏移量应该是`-10800`（3 小时），而不是`-14400`：

```
Standard time zone: UTC/GMT -3 hours
No daylight saving time in 2012
Time zone abbreviation: ART - Argentina Time 
```

事实上，即使`abbr`是错误的（应该是`ART`从[2009-10-10](http://www.timeanddate.com/worldclock/timezone.html?n=613&syear=2010) DST 起停止了）。

这里出了什么问题？我很确定这无关紧要，但如果重要的话，我正在运行 PHP 5.4.6。

**PS**：我记得读过有关 Olson 数据库的一些法律问题，这可能与此有关吗？

* * *

**更新**：我写了一个小脚本来比较 PHP 非 DST 偏移量和[这个维基百科页面](http://en.wikipedia.org/wiki/List_of_tz_database_time_zones)：

```
function getStandardOffset($timezone)
{
    $timezone = new DateTimeZone($timezone);
    //$hemisphere = (ph()->Value($timezone->getLocation(), 'latitude') >= 0) ? 'north' : 'south';
    $transitions = array_reverse(array_slice($timezone->getTransitions(), -3, null, true), true);

    foreach ($transitions as $transition)
    {
        if ($transition['isdst'] == 1)
        {
            continue;
        }

        return sprintf('%+03d:%02u', $transition['offset'] / 3600, abs($transition['offset']) % 3600 / 60);
    }

    return false;
}

$diff = array();
$html = ph()->HTML->DOM(file_get_contents('http://en.wikipedia.org/wiki/List_of_tz_database_time_zones'));
$timezones = DateTimeZone::listIdentifiers();

foreach ($timezones as $timezone)
{
    $offset = str_replace('−', '-', ph()->HTML->DOM($html, sprintf('//td/a[contains(text(), "%s")]/../..', $timezone), '0.td.4.a'));

    if (strcmp($offset, getStandardOffset($timezone)) !== 0)
    {
        $diff[$timezone] = array
        (
            'php' => getStandardOffset($timezone),
            'wiki' => $offset,
        );
    }
}

echo '<pre>';
print_r($diff);
echo '</pre>'; 
```

以下时区不同：

```
Array
(
    [America/Argentina/San_Luis] => Array
        (
            [php] => -04:00
            [wiki] => -03:00
        )

    [Antarctica/Casey] => Array
        (
            [php] => +08:00
            [wiki] => +11:00
        )

    [Antarctica/Davis] => Array
        (
            [php] => +07:00
            [wiki] => +05:00
        )
) 
```

这不是什么大不了的事，但我很好奇为什么会发生这种情况，因为我拥有最新版本的 Olson tzdb。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:56:01.783

我将在这里举你的第一个例子：

```
[60] => Array
    (
        [ts] => 1236481200
        [time] => 2009-03-08T03:00:00+0000
        [offset] => -14400
        [isdst] => 
        [abbr] => WART
    ) 
```

> 但是，如果您检查 Time&Date 标准偏移量应该是 -10800（3 小时）而不是 -14400

根据我的阅读，这不是真的。根据[这篇文章](http://www.timeanddate.com/news/time/san-luis-new-time-zone.html)，大约在那个时候（2009 年 3 月 3 日），当没有夏令时时区更改为 UTC-4，如果有，则更改为 UTC-3。不过，文章中提到的日期是 2015 年 3 月 14 日而不是 3 月 8 日……我不确定是什么导致了这种差异。

# .net - 使用 lambda 表达式从二维数组 double[,] 中获取 N 个最大数字及其对应的位置（索引）

> ID：13203766
> 
> 赞同：1
> 
> 时间：2012-11-02T22:15:47.603
> 
> 标签：.net, linq, c#-4.0, lambda

这是一个类似于 [ [Get N max numbers from a List<int> using lambda expression](https://stackoverflow.com/questions/9062155/get-n-max-numbers-from-a-listint-using-lambda-expression) ] 的问题

但是我想知道如果我想保留那些 N 最大数字的索引，我应该如何使用 lambda 表达式来编写它。

例子）`List<int> numbers = new List<int> { 12, 5, -8, 4, 7, 28, 3, 22 };`

我们如何通过 lambda: `{28, 22, 12, 7}`plus 索引获得 4 个最大数字`{ 5, 7, 0, 4}`

正如[基里尔](https://stackoverflow.com/users/787016/kirill-polishchuk)建议的那样：`var result = numbers.OrderByDescending(n => n).Take(4);`但是我怎样才能获得**那些 N 最大数字的索引**？它是一个 double[,] 2D 数组（不是列表）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T22:29:52.160

请注意：`OrderBy + Take`是一个 O(N*Log(N)) 操作，其中“Top N”可以更快地完成。[https://codereview.stackexchange.com/questions/9773/optimizing-liststring-performance-in-c/9777#9777](https://codereview.stackexchange.com/questions/9773/optimizing-liststring-performance-in-c/9777#9777)

说；

```
List<int> numbers = new List<int>() { 12, 5, -8, 4, 7, 28, 3, 22 };
var list = numbers.Select((n, i) => new { Num=n, Inx=i })
                    .OrderByDescending(x => x.Num)
                    .Take(4)
                    .ToList(); 
```

# algorithm - 路径追踪：缩放颜色

> ID：13203767
> 
> 赞同：1
> 
> 时间：2012-11-02T22:15:51.350
> 
> 标签：algorithm, graphics, rendering, raytracing

我正在尝试阅读[http://www.kevinbeason.com/smallpt/](http://www.kevinbeason.com/smallpt/)的来源，尤其是我无法掌握的一件事。在第 55 行，上面写着`f=f*(1/p)`.

它是什么？它有什么作用？更重要的是，为什么它读起来完全一样？是某种启发式方法使图像收敛得更快吗？

换句话说，我在文学中看到：

```
function radiance
     ...
    return Le(x) + R(p) * radiance(rn) 
```

重要的是`R(p)`- 我真的不明白它的作用，但对于 99% 来说，它不是`f`从上面那个..

拜托，有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T00:48:08.523

我认为您的答案在这张[幻灯片](http://www.kevinbeason.com/smallpt/smallpt_cline_slides.ppt)中，其中包含对 的显式照明版本的逐行解释`smallpt`，重新格式化为长 75%。

简而言之，线`#55`在函数内部`radiance`，其中估计沿射线的辐射度估计。

```
if (++depth>5) 
    if (erand48(Xi)<p) f=f*(1/p); 
    else return obj.e; 
```

*   首先，这个函数`radiance`是一个递归函数（调用自己）
*   当光线撞击玻璃表面时，光线追踪器必须确定它是进入还是离开玻璃以计算折射光线。
*   `f`是对象的颜色。
*   `p`是表面颜色的最大分量 (r,g,b)。
*   在行`#55`，`Russian Roulette`如果递归深度大于`5`.
*   我们使用 . 根据表面反射率随机停止递归`p`。
*   `f=f*(1/p)`正在使用`p`-`f`对每个分量进行归一化的最大分量，

以便，

```
f.x = f.x / (max(f.x, f.y, f.z))
f.y = f.y / (max(f.x, f.y, f.z))
f.z = f.z / (max(f.x, f.y, f.z)) 
```

该代码定义了一个运算符重载 for`*`但不是 for `/`，这就是为什么`f=f*(1/p)`而不是`f=f/p`.

# php - 如何使用 javascript 创建一组动态下拉菜单

> ID：13203768
> 
> 赞同：0
> 
> 时间：2012-11-02T22:15:50.880
> 
> 标签：php, javascript, forms, dynamic

我正在为我们的网站优化一个表单，让用户使用下拉菜单完成它。我已经想出了如何根据 PHP 查询填充单个下拉菜单，但是我需要根据该选择填充另一个下拉菜单。我正在尝试将 onchange 属性用于选择标记。我知道我在 javascript 中的查询还不是动态的，但我只是想让它首先显示下一个下拉列表，但事实并非如此。当我从第一个下拉菜单中选择某些内容时，什么也没有发生。感谢您提前提供任何帮助。

```
$query2 = "select distinct Provider_Name from CE_ACTIVITY_LIST_T where IS_ACTIVE = 'YES'";
$result2 = mysql_query($query2, $link) or die(mysql_error());
//$row2 = mysql_fetch_array($result2) or die(mysql_error());
echo "<table border='0'><tr><th>";
echo "Course Provider:</th><td><select name='providerName' id='provider'onchange='getResult()'>";
echo "<option SELECTED>Pick Provider</option>";
$i=0;
while($row2 = mysql_fetch_array($result2))
{
    echo "<option value=\"" . $row2['Provider_Name'] . "\">" . $row2['Provider_Name'] . "</option>";
    $i++;
}
echo "</select></td></tr><tr></tr>";

<script type="text/javascript">
function getResult(field)
{
    var field=field;
    var isEqualTo=document.getElementById('provider');
    document.getElementById('selectCourse').innerHTML = '<?php
    include ('connectionOpen.php');
    $queryCourse="select Course_Title from CE_ACTIVITY_LIST_T where Provider_Name = 'Test 1' and isActive = 'YES'";
    echo "<tr><th>";
    echo "Course Title:</th><td><select name='courseTitle'>";
    echo "<option SELECTED>Which course?</option>";
    $i=0;
    while($row2 = mysql_fetch_array($result2))
    {
        echo "<option value=\"" . $row2['Course_Title'] . "\">" . $row2['Course_Title'] . "</option>";
        $i++;
    }
    echo "</select>";
    echo "</td></tr></table>";
    ?>';

}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T22:41:46.590

如果你想填充另一个列表，那么你需要用 ajax 加载它，你可以使用 jQuery 来使它更容易。首先创建 php 脚本，它将为第二个选项列表生成 html，例如。myscript.php，这个脚本应该接收参数名称。

确保包含 jQuery。然后修改你的javascript如下：

```
function onChange()
{
    var name = providerName.value; 
    var url = "path-to-script";
    $.get(url, {name:name}  function(html){
        $("#result").html(html) 
    });
} 
```

而不是第二个选项 `<div id='result'></div>`用作新选项列表的占位符。

# hive - 使用 Hive 读取 Hadoop 序列文件

> ID：13203770
> 
> 赞同：5
> 
> 时间：2012-11-02T22:16:06.153
> 
> 标签：hive, sequencefile

我有一些来自 Common Crawl 的映射数据，这些数据以 SequenceFile 格式存储。我已经反复尝试在 Hive 中“按原样”使用这些数据，这样我就可以在各个阶段对其进行查询和采样。但我的工作输出中总是出现以下错误：

```
LazySimpleSerDe: expects either BytesWritable or Text object! 
```

我什至构建了一个更简单（更小）的 [Text, LongWritable] 记录数据集，但也失败了。如果我将数据输出为文本格式，然后在其上创建一个表格，它就可以正常工作：

```
hive> create external table page_urls_1346823845675
    >     (pageurl string, xcount bigint) 
    >     location 's3://mybucket/text-parse/1346823845675/';
OK
Time taken: 0.434 seconds
hive> select * from page_urls_1346823845675 limit 10;
OK
http://0-italy.com/tag/package-deals    643    NULL
http://011.hebiichigo.com/d63e83abff92df5f5913827798251276/d1ca3aaf52b41acd68ebb3bf69079bd1.html    9    NULL
http://01fishing.com/fly-fishing-knots/    3437    NULL
http://01fishing.com/flyin-slab-creek/    1005    NULL
... 
```

我尝试使用自定义输入格式：

```
// My custom input class--very simple
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapred.SequenceFileInputFormat;
public class UrlXCountDataInputFormat extends 
     SequenceFileInputFormat<Text, LongWritable> {  } 
```

然后我创建表：

```
create external table page_urls_1346823845675_seq 
  (pageurl string, xcount bigint) 
  stored as inputformat 'my.package.io.UrlXCountDataInputFormat' 
  outputformat 'org.apache.hadoop.mapred.SequenceFileOutputFormat'  
  location 's3://mybucket/seq-parse/1346823845675/'; 
```

但我仍然得到相同的 SerDer 错误。

我确定这里缺少一些非常基本的东西，但我似乎无法正确处理。此外，我必须能够就地解析 SequenceFiles（即我无法将数据转换为文本）。所以我需要为我的项目的未来部分找出 SequenceFile 方法。

* * *

**解决方案：** 正如@mark-grover 在下面指出的那样，问题是 Hive 默认忽略密钥。只有一列（即只有值），serder 无法映射我的第二列。

解决方案是使用比我最初使用的要复杂得多的自定义 InputFormat。我在指向 Git 的链接中找到了一个关于使用键而不是值的答案，然后我对其进行了修改以满足我的需要：从内部 SequenceFile.Reader 中获取键和值，然后将它们组合到最终的 BytesWritable 中。即像这样的东西（来自自定义阅读器，因为这是所有艰苦工作发生的地方）：

```
// I used generics so I can use this all with 
// other output files with just a small amount
// of additional code ...
public abstract class HiveKeyValueSequenceFileReader<K,V> implements RecordReader<K, BytesWritable> {

    public synchronized boolean next(K key, BytesWritable value) throws IOException {
        if (!more) return false;

        long pos = in.getPosition();
        V trueValue = (V) ReflectionUtils.newInstance(in.getValueClass(), conf);
        boolean remaining = in.next((Writable)key, (Writable)trueValue);
        if (remaining) combineKeyValue(key, trueValue, value);
        if (pos >= end && in.syncSeen()) {
          more = false;
        } else {
          more = remaining;
        }
        return more;
    }

    protected abstract void combineKeyValue(K key, V trueValue, BytesWritable newValue);

}

// from my final implementation
public class UrlXCountDataReader extends HiveKeyValueSequenceFileReader<Text,LongWritable>
    @Override
    protected void combineKeyValue(Text key, LongWritable trueValue, BytesWritable newValue) {
        // TODO I think we need to use straight bytes--I'm not sure this works?
        StringBuilder builder = new StringBuilder();
        builder.append(key);
        builder.append('\001');
        builder.append(trueValue.get());
        newValue.set(new BytesWritable(builder.toString().getBytes()) );
    }
} 
```

有了这个，我得到了我所有的专栏！

```
http://0-italy.com/tag/package-deals    643
http://011.hebiichigo.com/d63e83abff92df5f5913827798251276/d1ca3aaf52b41acd68ebb3bf69079bd1.html    9
http://01fishing.com/fly-fishing-knots/ 3437
http://01fishing.com/flyin-slab-creek/  1005
http://01fishing.com/pflueger-1195x-automatic-fly-reels/    1999 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T19:08:21.687

不确定这是否会影响您，但 Hive 在读取 SequenceFiles 时会忽略键。您可能需要创建一个自定义 InputFormat（除非您可以在线找到一个:-)）

参考： http: [//mail-archives.apache.org/mod_mbox/hive-user/200910.mbox/%3C5573211B-634D-4BB0-9123-E389D90A786C@metaweb.com%3E](http://mail-archives.apache.org/mod_mbox/hive-user/200910.mbox/%3C5573211B-634D-4BB0-9123-E389D90A786C@metaweb.com%3E)

# jquery - 如何在Django中的jQuery发布后呈现上一页

> ID：13203771
> 
> 赞同：1
> 
> 时间：2012-11-02T22:16:09.927
> 
> 标签：jquery, python, html, django, url

我正在建立一个将主题与问题联系起来的网站。每个问题都与一个主题相关联，每个问题都与一个问题相关联，等等。在主页上，我单击一个主题，它会将我带到一个基于 topic_id 的动态 URL。

```
url(r'^(?P<topic_id>\d+)/$', 'questions'), 
```

当我添加问题时，jQuery 灯箱会在弹出窗口中呈现此 URL

```
url(r'^(?P<topic_id>\d+)/add_question/$', 'add_question'), 
```

一旦我提交了问题，它就会通过 add_question.html

```
#add_question.html    
<div class="questionPopupForm">
    <h5><div class="questionPopupTitle"> Add Question</div></h5>
    <form action = "/home/{{ form.topic.id }}/add_question/" method = "post">{% csrf_token %}
        <p>{{ form.as_p }}</p>
        <p><div class="addQuestionButton"><input type = "submit" value = "Ask Question"     class="btn btn-success" /></div></p>
        <input type = "hidden" name = "next" value = "{{ next|escape }}" />
    </form>
</div> 
```

一旦我提交，Action 会将我带到 /home/{{ form.topic.id }}/add_question，这是上面的 URL，链接到 add_question 视图。

```
#views.py
def add_question(request, topic_id):
    if request.method == "POST":
        form = QuestionForm(request.POST, request.FILES)
        if form.is_valid():
            question = form.save(user = request.user)
            question.topic = Topic.objects.get(pk = topic_id)
            question.save()
            return HttpResponseRedirect("/home/")
    else:
        form = QuestionForm()
        form.q_author = request.user
        form.movie = Topic.objects.get(pk = topic_id)
    return render_to_response("qanda/add_question.html", {'form': form}, context_instance = RequestContext(request)) 
```

现在，它带我回家，返回 HttpResponeRedirect('/home/')。我想做的是将用户重定向回同一页面，但是 URL (/{{ topic.id }}/) 中有一个变量，但是 HttpResponseRedirect 不允许我将变量放入其中。我如何回到同一页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:21:07.657

HttpResponseRedirect 需要一个字符串（在本例中为 URL），但您可以即时构建它。例如：

```
return HttpResponseRedirect("/%s/" % topic.id) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T22:22:16.183

是的，您可以将变量放入`HttpResponseRedirect`, 但作为字符串，如下所示：

```
return HttpResponseRedirect("/%s/" % topic_id) 
```

另外，尝试使用反向使用 url 别名：

```
return HttpResponseRedirect(reverse('questions', topic_id=topic_id)) 
```

或 Django 快捷方式`redirect()`：

```
from django.shortcuts import redirect
return redirect('questions', topic_id=topic_id) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T22:25:38.740

你能试试这个吗？

```
#views.py
def add_question(request, topic_id):
    if request.method == "POST":
        form = QuestionForm(request.POST, request.FILES)
        if form.is_valid():
            question = form.save(user = request.user)
            question.topic = Topic.objects.get(pk = topic_id)
            question.save()
            url = "/home/%s"%(str(topic_id))
            return HttpResponseRedirect(url)
    else:
        form = QuestionForm()
        form.q_author = request.user
        form.movie = Topic.objects.get(pk = topic_id)
    return render_to_response("qanda/add_question.html", {'form': form}, context_instance = RequestContext(request)) 
```

# javascript - 有没有办法在ajax POST请求中发送一个对象以及一个单独的变量

> ID：13203772
> 
> 赞同：0
> 
> 时间：2012-11-02T22:16:17.103
> 
> 标签：javascript, asp.net, ajax, asp.net-mvc, json

我有一个发布请求，我正在这样做：

```
var addProject = function (project, id) {
            return $.ajax(projectUrl, {
            type: "POST",
            data: { project: project, id: id }
    });
}; 
```

这一切都很好，它可以毫无问题地发送我的项目对象（以 JSON 格式）。我想要做的是这个请求，但还要添加一个我可以传递给服务器控制器的密钥（不属于项目对象）。知道我是否可以做到这一点，或者有什么好方法可以做到这一点。我真的不想返回并更改我的对象模型来解释我每隔一段时间才需要的键。

这是一个 ASP.NET MVC4 项目，如果重要的话，它会回到一个 web api 控制器。

编辑：这是我的服务器端的东西

```
 public HttpResponseMessage PostNew(Project project, int id)
    {
        //TODO grab the client to add the project to
        Uow.Projects.Add(project);
        Uow.Commit();

        HttpResponseMessage response = Request.CreateResponse(HttpStatusCode.Created, project);
        //response.Headers.Location = new Uri(Url.Link("ApiControllerAction", new { id = client.ID }));
        return response;
    } 
```

也许我不够清楚。我想传入项目对象，然后只是一个 int 变量。单独传递项目有效，但如果我尝试传递 int 它会给我一个 400 错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T22:19:03.657

```
var addProject = function (project) {
            return 
              $.ajax(projectUrl, {
                type: "POST",
                data: {data1 : 'Object',data2: 'variable'}
              });
}; 
```

您只需发送 2 个数据参数，对象和变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T23:06:32.230

传递复杂对象的最简单方法是对其进行 JSON 编码：

```
var addProject = function (project) {
    return $.ajax(projectUrl, {
        type: "POST",
        contentType: 'application/json',
        data: JSON.stringify(project)
    });   
}; 
```

要在服务器端对此进行解码，您将需要某种 JSON 解码器。我确定 C# 有一些可用的。

# r - 如何在R中绘制关系？

> ID：13203778
> 
> 赞同：2
> 
> 时间：2012-11-02T22:16:50.600
> 
> 标签：r, matrix, plot, social-networking, relationship

该关系表示为如下矩阵`x`：

```
 John Jack Mary Wendy
John     0    2    1     1
Jack     2    0    1     0
Mary     1    1    0     1
Wendy    1    0    1     0 
```

这些条目是指它们拥有的连接数。谁能告诉我如何在 R 中将其绘制为网络？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T22:25:52.390

这被称为邻接矩阵。

[R FAQ](http://www.ats.ucla.edu/STAT/r/faq/snplot.htm)中有一些关于绘制以矩阵表示的社交网络的信息：

> 使用 R 中的 igraph 包可以轻松绘制社交网络数据。 [...] 为了让 igraph 包将此表识别为网络，我们可以首先将其转换为矩阵。然后，如果我们希望计算与图相关的统计数据（介数、接近度、度），我们可以使用矩阵来创建图对象。

常见问题解答提供了一些示例，生成了社会图，例如：

![在此处输入图像描述](../Images/16f383c41181c8007dda44de9b3db49c.png)

该`igraph`库本身[记录在此处](http://igraph.sourceforge.net/index.html)- 它可以生成更复杂的示例 - 请参阅[屏幕截图页面](http://igraph.sourceforge.net/screenshots.html)和下面的示例：

![在此处输入图像描述](../Images/a7cb597fe3a5176d1881bc6c6d84419b.png)

# javascript - Div 的内容编辑器

> ID：13203785
> 
> 赞同：0
> 
> 时间：2012-11-02T22:17:35.340
> 
> 标签：javascript, jquery, html, textarea, edit

我有这个代码：

```
<html>
    <head>
        <title></title>

        <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
        <script type="text/javascript">
        $(document).ready(function() {
            $("#k123").click(function () {
                //var text=$(this).val(); //this does not work
                var text=$(this).text();
                var k='<div id="k123"><textarea rows="10" cols="10">' + text + '</textarea><br /><input     type="button" onclick="save();" value="save"><input type="button" onclick="cancel();"     value="cancel"></div>';
                $(this).replaceWith(k);
            });

        }); 

        function save() {
        }
        function cancel() {
            //alert(text);
            var k='<div id="k123"></div>';
            $("#k123").replaceWith(k);
        }
    </script>
    </head>
    <body>
        <div id="k123">aaaaa</div>
    </body>
</html> 
```

我的问题是：

1）在这两个函数中：取消和保存，如何获取 div id->#k123->textarea->content 函数的内容取消和保存超出范围，它们是我无法告诉 $(this).parent 的独立函数()。

我需要询问具有 id #k123 的 div，然后进入 textarea 的内容并获取它。而且我还必须自动获取 id #k123，因为如果我有很多 div，我无法手动告诉保存和取消 div 的 id，取消和保存应该从输入 type='button'`s parent id 知道 div 的 id 发送者。

* ***请我不喜欢从输入按钮发送 div id 的建议**

* ***我们假设两个输入按钮都没有 IDS 或名称**

我尝试了另一种方法，但仍然遇到我替换的相同问题

```
$(document).ready(function() {
$("#k123").click(function () {
var text=$(this).text();
var k='<div id="k123"><textarea rows="10" cols="10">' + text + '</textarea><br /><input     type="button" value="save"><input type="button" value="cancel"></div>';
$(this).replaceWith(k);
});

//$("#k123 > input").click(function() {
$("#k123").children("input:second").click(function() {
alert("hi");
});

}); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:26:56.713

我在下面为您提供了工作代码。您甚至不需要 id.. 只需要一个容器 div 和事件委托。下面以我认为更简单、更有效的方式完成了我认为你所追求的目标：

（我添加了注释以帮助理解代码）

```
$(document).ready(function() {
    $(".container").on('click', function(e) {
        if (!$(e.target).is('input') && !$(e.target).is('textarea')) { //check to make sure the target is neither an input or a textarea
            var div_text = $(e.target).text(); // use a variable named something other than text, because text is already a method for another element
            $(e.target).data('text',div_text); // set the div's current contents as a hidden data attribute, to be retrieved later.  You can get rid of this and the other line if you want cancel to completely wipe the div.
            var k = '<textarea rows="10" cols="10">' + div_text + '</textarea><br /><input type="button" value="save"><input type="button" value="cancel">';
            $(e.target).html(k); //set the inner HTML of the div, so we don't lose any data saved to that div
        }
        if ($(e.target).is('input') && $(e.target).val() == 'save') {
            $(e.target).parent().html($(e.target).parent().find('textarea').val()); // replace the current contents of the parent div with the contents of the textarea within it.

        } else if ($(e.target).is('input') && $(e.target).val() == 'cancel') {
            $(e.target).parent().html($(e.target).parent().data('text')); //set the contents to the old contents, as stored in the data attribute.  Just replace the contents of the .html() here with '' to completely clear it.
        }
    });
});​ 
```

[**演示**](http://jsfiddle.net/25Hay/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T22:22:48.277

**修订 - 作品**

看看这个……不完全在那里，但很接近！

[修改后的 JS 小提琴](http://jsfiddle.net/videsignz/Wx3Sb/)

```
function editit() {

        var divId = $(this).attr('id');

        var text = $(this).html();

        var k = '<div id="' + divId + '" class="editable"><textarea id="newvalue' + divId +'" rows="10" cols="10">' + text + '</textarea><br /><input id="save'  + divId + '" type="button" value="save"><input id="cancel'  + divId + '" type="button" value="cancel"></div>';

        $('#' + divId).replaceWith(k);

        $('#cancel' + divId).click(function() {
            $('#' + divId).replaceWith('<div id="' + divId + '" class="editable">' + text + '</div>');
            $('.editable').bind('click', editit);
        });

        $('#save' + divId).click(function() {
            $('#' + divId).replaceWith('<div id="' + divId + '" class="editable">' + $("#newvalue" + divId).val()+ '</div>');
            $('.editable').bind('click', editit);
        });

    }

 $('.editable').bind('click', editit); 
```

# c# - 迭代集合联合

> ID：13203789
> 
> 赞同：-2
> 
> 时间：2012-11-02T22:17:38.973
> 
> 标签：c#, .net

我有 2 个实例`IEnumerable<string>`并且需要对它们进行迭代。是否可以在 single 内迭代`foreach`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:22:04.467

`Union`除非您想遍历两者的集合并集，否则将不起作用`IEnumerable`。集合并集被定义为两者的统一，没有重复。因此，如果您依赖迭代重复项，它将无法正常工作，您必须使用`Concat`它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T22:25:19.193

看看[`Enumerable.Concat()`](http://msdn.microsoft.com/en-us/library/bb302894%28v=vs.90%29.aspx)。我认为它会做你想要的：

```
foreach (string str in Enumerable.Concat(collection1, collection2))
{
} 
```

或者

```
foreach (string str in collection1.Concat(collection2))
{
} 
```

# ios - 在 Admob 横幅上显示 UIButton？

> ID：13203790
> 
> 赞同：1
> 
> 时间：2012-11-02T22:17:38.757
> 
> 标签：ios, uibutton, admob

我正在尝试在 AdmobBanner 上显示 UIButton，如下例所示（显然是黑色 X）。我在 Admob SDK 中寻找了这个选项，但找不到任何东西。

我尝试选择按钮-> 编辑器-> 排列-> 发送到前面，但没有结果。

![角落里的 X](../Images/ac19a7426c6c4abe57df1112252c246d.png)

非常感谢您的帮助。

这是我用来显示横幅的代码：

```
CGPoint origin = CGPointMake(0.0,0.0);

// Use predefined GADAdSize constants to define the GADBannerView.
self.adBanner = [[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner
                                                origin:origin];

// Note: Edit SampleConstants.h to provide a definition for kSampleAdUnitID
// before compiling.
self.adBanner.adUnitID = @"a150xxxxxxxxxxx";
self.adBanner.delegate = self;
[self.adBanner setRootViewController:self];
[self.view addSubview:self.adBanner];
self.adBanner.center =
CGPointMake(self.view.center.x, self.adBanner.center.y);
[self.adBanner loadRequest:[self createRequest]]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:29:57.660

我假设您在这里使用界面构建器，并且 AdMob 视图和您的按钮都是同一父视图的子视图。如果是这种情况，只需确保按钮位于左侧“对象”窗格的子视图列表中的 AdMob 视图之前。

另一种选择是进行以下调用`viewDidLoad`：

```
[self.view bringSubviewToFront:button] 
```

如果您以编程方式执行此操作，请确保在插入 AdMob 视图后执行此操作

# asp.net - __doPostBack 在 IE 10 的 DotNetNuke 网站上未定义

> ID：13203792
> 
> 赞同：9
> 
> 时间：2012-11-02T22:17:45.447
> 
> 标签：asp.net, windows-8, dotnetnuke, windows-server-2003, internet-explorer-10

我有一个 DotNetNuke[站点](http://ssplash.com)，今天一位客户打来电话说它在 IE 10 上不起作用。特别是登录和注册链接不起作用，但它们在兼容模式下起作用。我查看了我们的测试 Windows 8 机器，发现它因为`__doPostBack`未定义而失败。在过去的 6 个小时里，我一直在寻找修复程序，而我能够找到的是，IE10 用户代理显然包含在 ie.browser 文件中，我应该安装[此修复程序](http://support.microsoft.com/kb/2600100)并重新启动服务器。那没有用。我没有注意到任何变化，即使我认为新的 ie.browser 文件*应该*与新的用户代理匹配。

我可以采取哪些其他步骤来解决问题？注意：服务器在 Windows server 2003 上运行带有 service pack 1 的 .NET 3.5。该站点运行的是 DotNetNuke 05.06.02。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T22:24:42.020

请参阅 Scott Hanselman 的这篇文章：

[“错误和修复：ASP.NET 无法检测到 IE10 导致 _doPostBack 是未定义的 JavaScript 错误或保持 FF5 滚动条位置”](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T22:46:55.907

在我的生产站点上，我尝试了一些东西，但没有奏效。

我安装了修补程序并重新启动 - 不好

我复制了更新的 ie.browser 文件 - 不好

我尝试修改 default.browser、ie.browser 和 mozilla.browser 文件来为所有内容启用 javascript - 不好。

我做的一件事最终使它工作（这应该适用于一切）是在文件的`InitializePage`函数中`Default.aspx.vb`，我将此行添加到子例程的开头

```
Page.ClientTarget = "uplevel" 
```

这应该（据我了解）将所有浏览器视为可以处理 javascript 和 cookie 以及我们需要的所有其他东西。我觉得这是一个相当安全的赌注。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-20T14:07:28.760

如果 web.config 中存在另一个配置，则会覆盖 Scott Hanselman 提出的修复：

```
<browserCaps> 
```

ASP.NET 浏览器功能嗅探器可以通过 3 种方式进行配置（相互覆盖）：

1.  `Machine wide in <windir>\Microsoft.NET\Framework\<ver>\CONFIG\Browsers`
2.  `Site only by using .browser files in App_Browsers folder`
3.  `Site only by using <browserCaps> Element in web.config`

对于 IE10，在下面添加以下案例`<browserCaps> <case "Mozilla .. MSIE ..>`：

```
<case match="\d{2,}" with="${version}">
  frames=true
  tables=true
  cookies=true
  backgroundsounds=true
  vbscript=true
  javascript=true
  javaapplets=true
  activexcontrols=true
  tagwriter=System.Web.UI.HtmlTextWriter
  ecmascriptversion=3.0
  msdomversion=${major}${minor}
  w3cdomversion=1.0
  css1=true
  css2=true
  xml=true

  <filter with="${letters}" match="^b">
    beta=true
  </filter>
  <filter with="${extra}" match="Crawler">
    crawler=true
  </filter>
</case> 
```

# ios - 过早终止异步 NSURLConnection 加载

> ID：13203794
> 
> 赞同：1
> 
> 时间：2012-11-02T22:18:02.147
> 
> 标签：ios, xcode, nsurlconnection, nsthread

我正在制作一个为数据选择器异步加载数据的应用程序，然后重新加载数据选择器，一切都很好。

问题是，如果用户点击文本字段，应用程序会向网络请求信息，但如果尚未加载，然后用户点击后退按钮，则视图消失，但数据仍在加载在后台。

我尝试在自定义线程上运行此加载方法，然后调用`[myThread cancel];`on `viewWillDisappear`，但数据仍在加载。当他明确不想再加载数据时，我想避免用户使用数据。有什么帮助吗？

我正在考虑杀死 com.apple.nsurlconnectionloader 但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T22:23:08.097

这里需要注意的一点是，取消一个 NSThread 不会立即终止它，它只会将它标记为终止。

相反，我要做的是`NSURLConnection`在. 然后，您可以使用它作为标志来终止操作的运行循环，并且下载将不会继续。`NSOperation``cancel``isCanceled``YES`

Apple 在此处提供了关于使用 NSOperation 的出色技术说明[https://developer.apple.com/library/ios/#technotes/tn2109/_index.html](https://developer.apple.com/library/ios/#technotes/tn2109/_index.html)

# c# - 将多个 ObservableCollection 绑定到一个 ObservableCollection

> ID：13203795
> 
> 赞同：18
> 
> 时间：2012-11-02T22:18:08.023
> 
> 标签：c#, .net, wpf, observablecollection, inotifypropertychanged

有一堆`ObservableCollection<MeClass> Result`并需要将它们全部组合成另一个`ObservableCollection<MeClass> AllResults`，以便我可以将其显示在`listview`.

只是不知道如何将它们组合在一起。

我创建了一个新类来组合它们，但不确定在获得列表后它们将如何更新......所以不太确定要采取哪个方向。

我知道`INotifyPropertyChanged`我只是不确定如何将它们结合起来并随着一切的变化而不断更新。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-03T01:11:44.440

.NET[`CompositeCollection`](http://msdn.microsoft.com/en-us/library/system.windows.data.compositecollection.aspx)允许您将多个集合视为一个集合。它实现`INotifyCollectionChanged`了 ，因此只要您的内部集合也实现`INotifyCollectionChanged`了（在您的情况下确实如此），您的绑定应该可以正常工作。

使用示例：

```
CompositeCollection cc = new CompositeCollection();
CollectionContainer container1 = new CollectionContainer() { Collection = Result1 }
CollectionContainer container2 = new CollectionContainer() { Collection = Result2 }
cc.Add(container1);
cc.Add(container2); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T22:49:21.240

像这样的东西？

```
public class CompositeCollection : ObservableCollection<MeClass>
{
    private ObservableCollection<MeClass> _subCollection1;
    private ObservableCollection<MeClass> _subCollection2;

    public CompositeCollection(ObservableCollection<MeClass> subCollection1, ObservableCollection<MeClass> subCollection2) 
    {
        _subCollection1 = subCollection1;
        _subCollection2 = subCollection2;

        AddSubCollections();
        SubscribeToSubCollectionChanges();
    }

    private void AddSubCollections()
    {
        AddItems(_subCollection1.All);
        AddItems(_subCollection2.All);
    }

    private void AddItems(IEnumerable<MeClass> items)
    {
        foreach (MeClass me in items)
            Add(me);
    }

    private void RemoveItems(IEnumerable<MeClass> items)
    {
        foreach (MeClass me in items)
            Remove(me);
    }

    private void SubscribeToSubCollectionChanges()
    {
        _subCollection1.CollectionChanged += OnSubCollectionChanged;
        _subCollection2.CollectionChanged += OnSubCollectionChanged;
    }

    private void OnSubCollectionChanged(object source, NotifyCollectionChangedEventArgs args)
    {
        switch(args.Action)
        {
            case NotifyCollectionChangedAction.Add:    AddItems(args.NewItems.Cast<MeClass>());
                                                       break;

            case NotifyCollectionChangedAction.Remove: RemoveItems(args.OldItems.Cast<MeClass>());
                                                       break;

            case NotifyCollectionChangedAction.Reset:  Clear();
                                                       AddSubCollections();
                                                       break;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-23T14:03:49.823

我将@GazTheDestroyer 的答案改写成这个（需要 C# 7）：

```
internal sealed class CompositeObservableCollection<T> : ObservableCollection<T>
{
    public CompositeObservableCollection(INotifyCollectionChanged subCollection1, INotifyCollectionChanged subCollection2)
    {
        AddItems((IEnumerable<T>)subCollection1);
        AddItems((IEnumerable<T>)subCollection2);

        subCollection1.CollectionChanged += OnSubCollectionChanged;
        subCollection2.CollectionChanged += OnSubCollectionChanged;

        void OnSubCollectionChanged(object source, NotifyCollectionChangedEventArgs args)
        {
            switch (args.Action)
            {
                case NotifyCollectionChangedAction.Add:
                    AddItems(args.NewItems.Cast<T>());
                    break;
                case NotifyCollectionChangedAction.Remove:
                    RemoveItems(args.OldItems.Cast<T>());
                    break;
                case NotifyCollectionChangedAction.Reset:
                    Clear();
                    AddItems((IEnumerable<T>)subCollection1);
                    AddItems((IEnumerable<T>)subCollection2);
                    break;
                case NotifyCollectionChangedAction.Replace:
                    RemoveItems(args.OldItems.Cast<T>());
                    AddItems(args.NewItems.Cast<T>());
                    break;
                case NotifyCollectionChangedAction.Move:
                    throw new NotImplementedException();
                default:
                    throw new ArgumentOutOfRangeException();
            }
        }

        void AddItems(IEnumerable<T> items)
        {
            foreach (var me in items)
                Add(me);
        }

        void RemoveItems(IEnumerable<T> items)
        {
            foreach (var me in items)
                Remove(me);
        }
    }
} 
```

# facebook-graph-api - Facebook Graph Api 按类别过滤提要

> ID：13203798
> 
> 赞同：2
> 
> 时间：2012-11-02T22:18:30.707
> 
> 标签：facebook-graph-api, filter, feed, categories

有谁知道如何使用图形 API 按类别过滤用户提要？例如....我想提取仅与音乐相关的用户新闻提要

[http://graph.facebook.com/me/home?from_category=Music](http://graph.facebook.com/me/home?from_category=Music)

任何帮助将不胜感激......谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T10:26:26.783

据我所知，没有直接的方法来查询图形 api 以获取过滤的提要，但如果您知道用户流的特定过滤器类型的 filter_key，那么您可以使用标识符过滤器查询图形 api。所以我认为

1）您需要进行 FQL 查询以获取过滤器键，例如： `SELECT filter_key FROM stream_filter WHERE uid=<uid>`您可以从用户的流中获取所有可用的过滤器。请在[此处参考文档](http://developers.facebook.com/docs/reference/fql/stream_filter/)

2）现在当你有你想要的`filter_key`那么你可以请求图形 api 来获取过滤的提要`GET me/home?filter=filter_key`。在此处查看相应的[文档](http://developers.facebook.com/docs/reference/api/user/#home)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-05-04T14:52:51.377

只需使用

me?fields=id,name, **music** .limit(100)

# plugins - 像netbeans的书签笔记插件一样吗？

> ID：13203805
> 
> 赞同：2
> 
> 时间：2012-11-02T22:19:09.443
> 
> 标签：plugins, netbeans, netbeans-7

是否有任何用于 netbeans 的书签笔记插件，可以让我在代码中的书签上写小笔记？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T19:42:22.653

它也包含在 NB7.2 中。

切换到书签视图。在左侧有一个工具栏按钮，如“表格视图”。将打开一个包含多个“名称/密钥/位置”列的书签表。双击名称列中的单元格，您可以为此书签创建注释/别名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-29T01:40:45.413

[看一下Scratch Pad](http://plugins.netbeans.org/plugin/5349/scratch-pad)的 Netbeans 插件页面，它可以做到，但自 NB 6 以来一直没有更新，它看起来有点难看，如果它删除的链接尝试在那里寻找另一个，希望它有帮助。

# html - 访问请求处理程序之外的变量

> ID：13203812
> 
> 赞同：0
> 
> 时间：2012-11-02T22:20:05.417
> 
> 标签：html, css, tornado

我正在使用 CSS3 手风琴效果，我想检测黑客是否会编写脚本来发出并行请求；即：我在同一页面中有一个登录表单和一个注册表单，但只有一个可见，因为有一个 CSS3：要访问该页面，用户代理必须与 HTML5 兼容。我使用的提示是：

```
class Register(tornado.web.RequestHandler): 
    def post(self): 
        tt = self.get_argument("_xsrf") + str(time.time()) 
        rtime = float(tt.replace(self.get_argument("_xsrf"), "")) 
        print rtime 
class LoginHandler(BaseHandler): 
    def post(self): 
        tt = self.get_argument("_xsrf") + str(time.time()) 
        ltime = float(tt.replace(self.get_argument("_xsrf"), "")) 
        print ltime 
```

我使用了这个`xsrf`变量，因为它对每个用户都是唯一的，以避免让服务器认为请求来自同一台机器。现在我想要什么：如何区分时间值： `abs(ltime - rtime)`; 意思是，我如何在类外访问rtime，我只知道如何访问方法外的值，我想做这个操作来检测值是否很小，然后用户正在使用脚本发出并行请求杀死服务器！换句话说（对于一般的python用户）如果我有：

```
class Product: 
   def info(self): 
       self.price = 1000 
   def show(self): 
       print self.price 
>>> car = Product() 
>>> car.info() 
>>> car.show() 

1000 
```

但是如果我有另一个呢

```
class User: 
    pass 
```

那么如何制作一个打印我self.price的方法，我尝试过继承，但出现错误：AttributeError：用户实例没有属性' `price`'，所以只有方法被传递，而不是属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T14:20:30.477

听起来您需要了解使用持久存储数据的模型对象和模式。 `tornado.web.RequestHandler`并且您从中子类化的任何对象仅在您的请求期间存在。从服务器接收到 URL 到通过`self.write()`或将数据发送回浏览器`self.finish()`。

我建议您查看一些 Django 或[Flask 教程](http://docs.mongodb.org/manual/tutorial/write-a-tumblelog-application-with-flask-mongoengine/)，了解如何在 Python 中构建 MVC 应用程序的一些基本想法（据我所知，没有涉及此内容的 Tornado 教程）。

# algorithm - 在边界上找到包含相似单元格的最大子矩阵

> ID：13203813
> 
> 赞同：3
> 
> 时间：2012-11-02T22:20:07.837
> 
> 标签：algorithm, matrix

问题是，给定一个所有单元格为黑色或白色的矩阵，找到所有边界单元格为黑色的最大尺寸子矩阵（内部单元格不必是黑色的）。

目前我最多能想到一个`O(N^4)`解决方案。为此，我制作了 2 个辅助表，一个是每个单元格的每一行右侧连续黑色单元格的计数，另一个是每个单元格该列中连续黑色单元格的计数。然后我这样做：

```
for each row (i):
   for each cell (i,j):
     for each window (1..n-j):
       if auxrow[i,j+window]-auxrow[i,j] == window:   #so, all cells in this window is black
         colsleft = auxcol[i,j]
         colsright = auxcol[i,j+window]
         botttom_row = min(colsleft,colsright)
         for bot in (row..row+mincol):
            if auxrow[bot][j+window]-auxrow[bot][j] == window:
              maxlen = ... #do whatever to save this sub-matrix as answer 
```

如何改进这个解决方案？[我在Topcoder](http://apps.topcoder.com/forums/;jsessionid=DCDBE8B8E6B589B7EDECEDB9B3EB5233?module=Thread&threadID=616767&start=0&mc=18#991440)看到了一些有趣的讨论，特别是 Rem( `O(N^2*log N)`) 的回答，以及 Tomek 提出的后续改进，但我都无法理解这两种解决方案！有人可以提供比我更好的解决方案，或者解释这些算法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T06:36:11.277

O(N^3) 是可能的。

对于每个单元格计算顶部和右侧的连续黑色单元格（可以在 O(N^2) 时间内完成）。

对于每一列（比如第 i 列），你会得到一个包含 n 个元素的数组，它维护着正确的信息，比如 R_i。

现在给定数组 R_i，我们计算 n 个其他数组（所以 Omega(N^3) 空间）如下：

对于每个 d 使得 1 <= d <= n，您创建一个包含 n 个元素的新数组 D_id，如果 R_i 中的相应值即 R_i[j] < d，则它在元素 j 处具有 n+1。如果 R_i[j] >= d，则 D_id 中的相应条目将等于 j。

基本上给定 ad 和 i，使用数组 D_id，我们可以判断第 i 列中的哪些单元格可能是宽度为 d 的矩形的端点。

现在为范围最小查询预处理每个 D_id：即给定一个范围 [u,v]，我们可以在 O(1) 时间内找到子数组 D_id[u...v] 中的最小值。

由于您为每一列花费 O(N^2) 时间，因此这一步是 O(N^3) 时间。

现在要找到一个矩形，您需要考虑每一行并选择可以作为矩形一个边缘的每一对点。将这些点视为矩形的左下角和右下角端点。

假设考虑的点在 i 和 j 列上，矩形的宽度是 d。

现在找到矩形的最大可能高度（使用我们之前计算的最高值）。说是h。

现在，如果您正在考虑的行是 r，那么您现在对范围 (r, rh] 上的 D_id 运行范围最小值查询。如果最小值 <= n，那么您找到了一个矩形。

由于您将考虑 N^3 个这样的可能对（每行 N^2 个点），因此总运行时间为 O(N^3)。

# c# - 打开文件对话框中的 strFileName

> ID：13203815
> 
> 赞同：2
> 
> 时间：2012-11-02T22:20:30.410
> 
> 标签：c#, openfiledialog

我对 c# 相当陌生。

我的问题是打开文件对话框中的 strFileName 是什么？

我目前有这个代码：

```
 string input = string.Empty;

        OpenFileDialog open = new OpenFileDialog();

        open.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.* ";

        open.InitialDirectory = "C:";

        if (open.ShowDialog() == DialogResult.OK)

            strFileName = open.FileName;

        if (strFileName == String.Empty)

            return; 
```

它会在 strFileName 上引发错误。我找不到关于它在这段代码中的作用的解释。

任何帮助将不胜感激，如果之前有人问过这个问题，我深表歉意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T22:27:27.677

在不知道错误是什么的情况下，仅通过查看代码，您可能会在 strFileName 上收到编译错误，因为它没有被声明：

您可以将代码更改为：

```
string input = string.Empty;

OpenFileDialog open = new OpenFileDialog();

open.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.* ";

open.InitialDirectory = "C:";

if (open.ShowDialog() == DialogResult.OK)

   input = open.FileName;

if (input == String.Empty)

   return; 
```

或这个：

```
string strFileName = string.Empty;

OpenFileDialog open = new OpenFileDialog();

open.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.* ";

open.InitialDirectory = "C:";

if (open.ShowDialog() == DialogResult.OK)

   strFileName = open.FileName;

if (strFileName == String.Empty)

   return; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T22:27:01.403

它不会给我一个错误-尽管我确实必须声明它。你是否？

```
 string strFileName = "";  // added this line - it compiles and runs ok

    private void TestFunc()
    {
        string input = string.Empty;

        OpenFileDialog open = new OpenFileDialog();

        open.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.* ";

        open.InitialDirectory = "C:";

        if (open.ShowDialog() == DialogResult.OK)

            strFileName = open.FileName;

        if (strFileName == String.Empty)

            return;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T22:27:35.100

你需要先声明 strFileName

```
string strFileName = string.empty(); 
```

然后使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T22:28:01.980

您需要将变量 strFilename 声明为字符串：

```
string strFileName = string.Empty;
OpenFileDialog open = new OpenFileDialog();
open.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.* ";
open.InitialDirectory = "C:";
if (open.ShowDialog() == DialogResult.OK)
{
    strFileName = open.FileName;
} 
/* you probably don't want this unless it's part of a larger block of code
if (strFileName == String.Empty)
{
    return; 
}
*/

return strFileName; 
```

# java - Java：以随机日期返回日期格式

> ID：13203823
> 
> 赞同：0
> 
> 时间：2012-11-02T22:21:21.497
> 
> 标签：java, date, formatting

> **可能重复：**
> [如何在java中将当前日期转换为字符串？](https://stackoverflow.com/questions/2942857/how-to-convert-current-date-into-string-in-java)

如何以格式返回日期`dd/mm/yyyy`？在

```
package random01;

import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Random;

public class Random01 {

    public static void main(String[] args) throws ParseException {

        Random random = new Random();
        String[] v = new String[5];

        for (int i = 0;
                i < v.length;
                i++) {
            //long tempo = (long) (1293861598 + random.nextDouble() * 60 * 60 * 24 * 365);
            DateFormat dateFormat = new SimpleDateFormat("yyyy");
            Date dateFrom = dateFormat.parse("2012");
            long timestampFrom = dateFrom.getTime();
            Date dateTo = dateFormat.parse("2013");
            long timestampTo = dateTo.getTime();
            long timeRange = timestampTo - timestampFrom;
            long randomTimestamp = timestampFrom + (long) (random.nextDouble() * timeRange);
            System.out.println(randomTimestamp);
        }
    }
} 
```

我需要，例如，2012 年 2 月 11 日

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:23:39.110

使用 SimpleDateFormat

```
SimpleDateFormat formatter= new SimpleDateFormat("dd/MM/yyyy");
System.out.println(formatter.format(new Date(randomTimestamp))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T22:22:48.327

您[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)用于格式化和解析：

```
new SimpleDateFormat("dd/MM/yyyy").format(date); 
```

# android - Android Foursquare 应用探索列表布局

> ID：13203825
> 
> 赞同：2
> 
> 时间：2012-11-02T22:21:31.030
> 
> 标签：android, android-layout, foursquare

![在此处输入图像描述](../Images/96d784836a4782b37d81ae77edd0d8e6.png)

我一直在试图找出在所附图片上实现接口的最佳方法。由于它是一个复杂的 UI，我想知道在不增加太多复杂性的情况下，最好的方法是什么。

所以，我有几个关于如何完成的问题：

1.  使用 ListView 执行此操作是一种好方法（或可能）吗？
2.  绘制他们为每个单元格创建的界面的最佳方式是什么？
3.  似乎他们已经添加了按下单元格布局的不同部分并充当按钮的功能（以蓝色突出显示），他们是如何实现这种效果的？

谢谢！

# java - 如何以文本形式运行和下载 BusinessObjects 报表

> ID：13203828
> 
> 赞同：0
> 
> 时间：2012-11-02T22:21:48.817
> 
> 标签：java, api, sap, business-intelligence, business-objects

**我的问题：**您如何运行和下载文本报告？在 BuessinessObjects 中，您可以将报告下载为纯文本文件。他们的 API 文档表明您可以下载各种格式的报告。这是如何实现的？

**如何将它们下载为 PDF：**在[他们的文档](http://help.sap.com/javadocs/boe/xi/ws/en/com/businessobjects/dsws/reportengine/DocumentInformation.html)中，他们描述了如何将它们下载为 PDF 文件：

```
ViewSupport pdfViewSupport = new ViewSupport();
pdfViewSupport.setOutputFormat(OutputFormatType.PDF);
pdfViewSupport.setViewType(ViewType.BINARY);
pdfViewSupport.setViewMode(ViewModeType.DOCUMENT);

RetrieveBinaryView retBinView = new RetrieveBinaryView();
retBinView.setViewSupport(pdfViewSupport);

RetrieveData retBOData = new RetrieveData();
retBOData.setRetrieveView(retBinView);

DocumentInformation docInfo = boReportEngine.getDocumentInformation(struid, null, null, null, retBOData);
BinaryView myBOView = (BinaryView) boDocInfo.getView();
byte[] docContents = myBOView.getContent(); 
```

当我改变时：

```
pdfViewSupport.setOutputFormat(OutputFormatType.PDF);
pdfViewSupport.setViewType(ViewType.BINARY);
pdfViewSupport.setViewMode(ViewModeType.DOCUMENT); 
```

到

```
pdfViewSupport.setOutputFormat(OutputFormatType.INT_HTML);
pdfViewSupport.setViewType(ViewType.INT_CHARACTER);
pdfViewSupport.setViewMode(ViewModeType.INT_REPORT_PAGE); 
```

我收到以下错误：

```
org.apache.axis2.AxisFault: Binary view of such a document should be only requested with the use of ViewType.BINARY (WRE 01151) 
```

有趣的是，我将 ViewType 设置为 INT_CHARACTER，而不是 BINARY...

它断线：

```
DocumentInformation docInfo = boReportEngine.getDocumentInformation(struid, null, null, null, retBOData); 
```

**我正在尝试做的事情：**这真的很复杂，但我基本上想要一个返回单行的报告，然后将其打印在报告上（仅此而已），然后将该报告作为文本下载，因为文本是我的 xml在另一个程序中使用。

任何帮助都会很棒！

* * *

**注意：**我在 3.2 服务器上运行，但我们很快就会升级到 4.0。因此，如果该解决方案适用于这两个版本，那就太棒了，否则 v4 和 v3.x 解决方案也将很棒 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:03:43.487

这一行的问题：

```
RetrieveBinaryView retBinView = new RetrieveBinaryView(); 
```

所以我不知道这一切是如何运作的，但这就是你要找的：

```
ViewSupport viewSupport = ViewSupport.Factory.newInstance();
viewSupport.setOutputFormat(OutputFormatType.INT_XML);
viewSupport.setViewType(ViewType.INT_CHARACTER);
viewSupport.setViewMode(ViewModeType.INT_REPORT_PAGE);

RetrieveData retBOData = RetrieveData.Factory.newInstance();

RetrieveXMLView retXMLView = RetrieveXMLView.Factory.newInstance();
retXMLView.setViewSupport(viewSupport);
retBOData.setRetrieveView(retXMLView);
DocumentInformation boDocInfo = getDocInfo(actions, retBOData);
XMLView bView = (XMLView) boDocInfo.getView();
ByteArrayOutputStream out = new ByteArrayOutputStream(bView.getContentLength());
bView.getContent().save(out);
byte[] reportBytes = out.toByteArray();
String reportInString = new String(reportBytes); 
```

但是，`reportInString`这里是表示报告的 XML。所以我所做的就是用前缀和后缀封装我想要从报告中得到的东西。因此，例如，假设我用`@#$ThisIsWhatYouWant-`and封装它`-End$#@`，那么我将执行以下操作：

```
Pattern patt = Pattern.compile("(?i)@#$ThisIsWhatYouWant-(.*?)-End$#@", Pattern.DOTALL);
Matcher match = patt.matcher(reportInString);
if (match.find()) {
  return match.group(1);
}
return null; 
```

PS 这应该适用于 3.x 和 4.0 BO 服务器。

# linux - 嵌入式 Linux 能否满足 200ms 的时序要求？

> ID：13203831
> 
> 赞同：1
> 
> 时间：2012-11-02T22:22:03.247
> 
> 标签：linux, real-time, communication

我正在开发一个嵌入式 Linux 项目，我们需要在 200 毫秒内从串行端口确认消息。如果我不使用一些实时变体，那么是否不可能保证 Linux 会在该时限内响应？硬件将是运行 Debian 的 200MHz ARM。当前使用的内核版本是“2.6.32 #1 SMP PREEMPT”。还想知道这里的 PREEMPT 到底是什么意思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:35:18.063

抢占式意味着具有正确优先级的任意任务可以随时中断操作系统调度程序中运行的任何任务。使用此功能，您可以保证具有时序约束的任务能够满足其要求。

下图准确地说明了调度的作用： ![抢占式调度示例](../Images/3770df3d7a630c6021ad3a84abf4c830.png)

如今，几乎所有流行的操作系统都支持用户空间中的抢占式调度。但是，在内核空间（驱动程序，其他关键内核任务）中，这种调度不支持，因此有一些举措，如 RTLinux 以及您的操作系统，[Debian SMP PREEMPT](http://www.pengutronix.de/software/linux-rt/debian_en.html)试图支持操作系统中的完全抢占式调度（使其成为[硬实时系统](http://en.wikipedia.org/wiki/Hard_realtime#Hard.2C_firm.2C_and_soft_real-time)）。

所以是的，您的内核将提供您的应用程序所需的时序约束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T22:36:14.113

这意味着它是一个实时内核。抢占意味着中断或停止一个动作。所以如果一个 irq 请求进入内核，内核会立即停止它正在做的事情并处理 irq。因此，您可以实时响应串行总线或音频输入上发生的事件。

我在需要时使用构建实时内核（通常是音频应用程序），它是一系列可以添加到 vanilla 内核以使其具有抢占性（实时）的补丁。

如果不进行测试，我不知道您是否可以在 200 毫秒内响应串行请求，但这听起来绝对可行。

除了 Debian、RedHat 和其他具有抢占式内核的发行版之外，还有专门针对实时 Linux 的完整发行版，例如 RTLinux，我猜它们中的大多数都会有 ARM 版本。

# css - CSS nth child - 1st/2nd - 3rd/4th 模式

> ID：13203838
> 
> 赞同：2
> 
> 时间：2012-11-02T22:22:34.167
> 
> 标签：css, css-selectors

我有一个 ul 包含大约 20 个元素，需要使用第 n 个子选择器来定位交替对的元素。

IE

```
1st/2nd - 5th/6th - 9th/10th 
3rd/4th - 7th/8th - 11th/12th 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T23:27:13.217

在这里试试这个：

```
 ul li:nth-child(4n+4), ul li:nth-child(4n+3) {
        color:red;
    } 
```

这个不支持IE8！

# php - 不需要的 URL 切换和安全问题。寻找更简单或更好的解决方案

> ID：13203839
> 
> 赞同：-1
> 
> 时间：2012-11-02T22:22:34.853
> 
> 标签：php, security, redirect, data-structures, get

我不能再短了：-/

我的 php 项目有关于重定向和 $_GET 的问题。

我希望你能帮助我:)

假设我的 Web 服务器的根目录中有这 3 个文件夹。

```
/root
   /themes
         /page.php
   /project1
         /index.php
         /content.php
   /project2
         /index.php
         /content.php 
```

`/themes`包含一个名为`/page.php`
`/page.php`包含动态 PHP/HTML 结构或主题的 php 文件，我可以将其用于不同的内容文件。

`/project1`并且`/project2`主要包含由`/page.php`.

`/project1`并且`/project2`是 2 个不同域的根文件夹，因此每个域都包含一个`index.php`.

**现在的问题：**
为了让每个域的网站都能正常工作，我必须将用户重定向到`/themes/page.php`，因为那是功能所在的位置，然后包含正确的内容文件。
为了让`/page.php`知道什么内容文件`/project1`或者`/project2`它必须加载，我使用重定向`index.php`来填充`$_GET`，如下所示：

```
header("Location: root-domain/themes/page.php?path=project1&file=content1"); 
```

这样 page.php 就可以通过 GET 获取所请求文件的路径和文件名。

**但是：**
这样用户就可以知道每个文件夹和每个文件名，甚至是一些 php 文件。不知道这样好不好？
并且 URL 从请求的 URL 更改为我的网络服务器根的 URL。

有人知道更好的解决方案吗？

谢谢！<3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T00:06:20.830

实际上，我认为有一个解决方案，你只需要使用 mod_rewrite，它是 Apache 的一个模块。这样，您可以将所有 URL 请求重定向到您的这一特定页面。不幸的是，mod_rewrite 背后的“魔法”有点复杂，所以我推荐你[这个文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)以供进一步使用。

但是现在，只需检查您是否在服务器配置中打开了 mod_rewrite，然后只需在目录*project1*（或任何其他）中创建一个名为*.htaccess的文件，然后将这段代码插入其中：*

 *```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^([^/.]+)/?([^/.]+)?/?$ /themes/page.php?path=$1&file=$2 [QSA]
</IfModule> 
```

点击保存，应该就是这样。现在每个页面请求都通过*/themes/page.php*。

顺便说一句，您绝对不应该在 url 中公开脚本名称。*

# ruby-on-rails-3 - rails 3中的相关模型

> ID：13203842
> 
> 赞同：0
> 
> 时间：2012-11-02T22:22:54.113
> 
> 标签：ruby-on-rails-3, model

我想我可能在这里遗漏了一些东西，或者我对 Rails 模型关联的理解还不够（仍在学习中）。我有两个模型，一个配方和一个成分。食谱有很多成分，当我填写表格时，我想将食谱和成分参数发布到各自的数据库中

配方模型

```
 class Recipe < ActiveRecord::Base

 attr_accessible :dish_name, :country_of_origin, :difficulty, :preperation_time
 has_many :ingredients

 end 
```

配料模型

```
 class Ingredient < ActiveRecord::Base
belongs_to :recipe
attr_accessible :ingredients
end 
```

配方控制器

```
 def new 

 @recipe = Recipe.new

 end

 def create

 @recipe = Recipe.new(params[:recipe])
 if @recipe.valid?
 @recipe.save
 redirect_to recipes_path, :notice => "Recipe sucessfully created."
 else
 flash.now.alert = "Please ensure all fields are filled in."
 render :new

 end
end 
```

配料控制器

```
 def new
  @ingredient = recipes.find(params[:recipes_id].ingredients.new
  @recipe_id = params[:recipe_id]
  end 
```

形式

```
<%= form_for @recipe  do |f| %>

<%= f.label :dish_name, "Dish Name" %>
<%= f.text_field :dish_name, :placeholder => "Enter Dish Name" %>

more fields here(wanted to keep as short as poss)

<%= f.label :ingredients, "Ingredients" %>
<%= f.text_field :ingredients , :class => :ingred, :placeholder => "Enter Ingredient Here" %><br>
<% end %> 
```

为代码的大小道歉，还有什么需要看看为什么我不能创建一个食谱吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T00:45:54.693

首先，您的成分模型是否包含像“recipe_id”这样的外键列？

此外，如果给定食谱的成分仅存储在单个文本字符串中，为什么不在食谱模型中将其作为一列而不是创建第二个模型呢？或者，如果您要将多种成分绑定到一个配方，您应该查看具有嵌套模型属性的表单。[这里](http://railscasts.com/episodes/196-nested-model-form-part-1)有一条很好的铁轨。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:33:56.697

你的代码应该是链接这个...

- -楷模 - -

```
class Recipe < ActiveRecord::Base
 attr_accessible :dish_name, :country_of_origin, :difficulty, :preperation_time, :ingredients_collection
 has_many :ingredients
 def ingredients_collection
   self.ingredients.collect(&:name).join(" ,")  
 end
 def ingredients_collection(ingredients)
   ingredients.each do |ingredient|
   i = Ingredient.create(:name => ingredient)    
   self.ingredients << i
 end
 end
 end

class Ingredient < ActiveRecord::Base
  belongs_to :recipe
  attr_accessible :name # you should have some valid attribute name as it would conflict with the ingredients which is a method defined by the association (:has_many) in the instance of the Recipe...
  end 
```

- - 控制器 - -

```
def new
 @recipe = Recipe.new
end
def create
  @recipe = Recipe.new(params[:recipe])
  if @recipe.save # no need to call the valid the validations would take care of it by themselves
    redirect_to recipes_path, :notice => "Recipe sucessfully created."
  else
    flash.now.alert = "Please ensure all fields are filled in."
    render :new
  end
end 
```

无需为成分定义控制器...您将仅从配方实例中定义特定配方中的成分...

- -形式 - -

```
 <%= form_for @recipe  do |f| %>
   <%= f.label :dish_name, "Dish Name" %>
   <%= f.text_field :dish_name, :placeholder => "Enter Dish Name" %>
      more fields here(wanted to keep as short as poss)
   <%= f.label :ingredients, "Ingredients" %>
   <%= f.text_field :ingredients_collection , :class => :ingred, :placeholder => "Enter Ingredient Here" %><br>
  <% end %> 
```

我仍然建议您研究虚拟属性，我想它会完全适合您的情况和需求......

从[http://railscasts.com/episodes/16-virtual-attributes了解虚拟属性](http://railscasts.com/episodes/16-virtual-attributes)

# firefox - Firefox HTTP资源测试post参数

> ID：13203849
> 
> 赞同：2
> 
> 时间：2012-11-02T22:23:48.000
> 
> 标签：firefox, post, httpwebrequest

我在 Firefox 上使用 HTTP 资源测试并想模拟 POST 请求。但是我没有找到在哪里写帖子参数。只有 URI、Representation 和 Headers，有什么方法可以通过一些 post 参数传递吗？（Json 格式？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:33:59.063

帖子的有效负载应该放在请求的正文中。它显示在这里：

[https://addons.cdn.mozilla.net/img/uploads/previews/full/54/54035.png?modified=1297743921](https://addons.cdn.mozilla.net/img/uploads/previews/full/54/54035.png?modified=1297743921)

例如，如果您要发布 JSON 文档，您可以将 JSON 粘贴到“正文”文本区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T11:16:06.987

帖子的有效负载应该放在“客户请求”/“表示”中。

它显示[在此屏幕截图](https://addons.cdn.mozilla.net/img/uploads/previews/full/54/54034.png?modified=1297743921)中。

顺便说一句，[这个答案](https://stackoverflow.com/a/9770981/12704)描述了一个出色的测试服务器，可用作完整性检查。

# pydev - “import as”会导致未解决的导入错误，“from .. import”不会

> ID：13203852
> 
> 赞同：0
> 
> 时间：2012-11-02T22:24:27.013
> 
> 标签：pydev

我正在尝试使用 eclipse/pydev 为 irc bot supybot 编写一些插件。Pydev 给了我关于 supybot-modules/packages 上未解决的导入的错误（例如 import supybot.utils as utils），但在例如“from supybot.commands import *”上工作正常。所以我想我正确设置了 dydev，因为它找到了想要的模块。问题必须在 pydev/eclipse 中，因为机器人工作正常，在 eric5 中我也没有得到任何错误。

删除解释器并设置它没有帮助。关于如何解决这个问题的任何其他想法？系统：Arch Linux、Eclipse Juno、PyDev 2.7.1，想要（并设置）python 解释器是 2.7，supybot 安装在 Python 2.7 的站点包中。

编辑：刚刚注意到：PyDev 没有将“from ... import *”标记为错误，但如果我使用从那里导入的函数，我会在该函数上收到错误。

代码示例：

```
[...]
import supybot.utils as utils
from supybot.commands import *
[...]
wunsch = wrap(wunsch, ['text', 'now'])
[...] 
```

第一行错误：未解决的导入：utils
第二行没有错误也没有警告
第三行错误：未定义的变量：wrap
但是“wrap”是在 supybot.commands 中声明的函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:57:31.907

运行`import supybot; print supybot.__path__`以获取 supybot 包的路径。PyDev 可能导入了错误的文件（例如，如果您使用`supybot`工作区中调用的文件夹）。

# calendar - 在线提供日历的最佳方式（CalDav、ics、...）

> ID：13203857
> 
> 赞同：3
> 
> 时间：2012-11-02T22:25:09.830
> 
> 标签：calendar, icalendar, caldav

我有一个日历（即一组事件），我想通过一种允许尽可能多的平台（windows、ios、android、...）订阅/导入该日历的技术来公开它。我一直在阅读有关在线共享日历的解决方案的一段时间，我有点困惑：

*   有时您会被告知您需要做的就是在线提供 ics 文件；这对我来说似乎是合乎逻辑的，但这意味着任何在他们的日历软件中添加此链接的人总是会下载包含所有事件的整个（大）ics 文件？
*   有时我会读到 CalDav，在我看来，它更像是 ics 的生硬下载策略的替代方案。如果我理解得很好，能够处理 CalDav 链接的软件可以以智能方式与日历服务器同步（但是有很多最终用户软件可用于处理 CalDav 链接吗？）

我发现在线提供日历的效率非常低，从用户的角度来看（如果您需要在每次读取时下载整个 ics 文件，这不是很好），从服务器的角度来看也是如此。对可用技术的任何帮助或见解都会很棒。

# python - 如何使用键创建基于树的地图

> ID：13203860
> 
> 赞同：0
> 
> 时间：2012-11-02T22:25:20.907
> 
> 标签：python, map, tree, slots

对于我的计算机科学课程介绍，我们有一个基于树的地图问题。我对如何按照他们要求的方式制作树感到非常困惑。

到目前为止我所拥有的：

```
class EmptyMap():
    __slots__ = ()

class NonEmptyMap():
    __slots__ = ('left','key','value','right')

def mkEmptyMap():
    m = EmptyMap()
    return m

def mkNonEmptyMap(map1, key, value, map2):
    m = NonEmptyMap()
    m.left = map1
    m.key = key
    m.value = value
    m.right = map2
    return m

def mapInsert(key, value, map1):
   if isinstance(map1, EmptyMap):

   else: 
```

我被困在应该是递归的 mapInsert 函数上。我们的辅导实验室现在没有任何辅导员，因此非常感谢您的帮助。

链接到作业文件[http://www.cs.rit.edu/~vcss241/Homeworks/08/TreeMap-stu.pdf](http://www.cs.rit.edu/~vcss241/Homeworks/08/TreeMap-stu.pdf)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T22:50:39.147

我从未写过或见过 Python，但试试这个：

```
def mapInsert(key, value, map1):
  if isinstance(map1, EmptyMap):
    return mkNonEmptyMap(mkEmptyMap(), key, value, mkEmptyMap())
  else:
    if map1.key == key:
      map1.value = value;
    else if map1.key > key:
      return map1.left = mapInsert(key, value, map1.left)
    else:
      return map1.right = mapInsert(key, value, map1.right) 
```

# racket - 如何在球拍网络服务器中运行多个 servlet？

> ID：13203863
> 
> 赞同：3
> 
> 时间：2012-11-02T22:25:32.937
> 
> 标签：racket

我阅读了几个示例，展示了如何在 Racket Web 服务器中部署 servlet，但没有人提到如何一次运行多个。那么，Racket 的 Web 应用程序模型呼吁单 servlet 服务吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T10:42:39.860

目录中的每个文件`servlets`对应一个 servlet。也就是说，获取多个 servlet 所需要做的就是将它们放在 servlets 目录中。这是假设您使用的是默认配置。

如果您想要更多控制，请参阅：

[http://docs.racket-lang.org/web-server-internal/dispatch-servlets.html?q=servlet](http://docs.racket-lang.org/web-server-internal/dispatch-servlets.html?q=servlet)

# php - 如何为 PHP 添加 UTF-8 支持？

> ID：13203867
> 
> 赞同：-3
> 
> 时间：2012-11-02T22:25:49.517
> 
> 标签：php, utf-8

如何向这个 PHP 文件添加 UTF-8 支持？这样文字就乱码了。我尝试添加一些我在网上找到的代码，但它没有工作......

这是我的原始代码。问题是为 UTF-8 支持添加什么。

```
<?php
/*
This first bit sets the email address that you want the form to be submitted to.
You will need to change this value to a valid email address that you can access.
*/

$webmaster_email = "natalie@cakery.co.il";

/*
This bit sets the URLs of the supporting pages.
If you change the names of any of the pages, you will need to change the values here.
*/
$feedback_page = "contact.html";
$error_page = "thanks.html";
$thankyou_page = "thanks.html";

/*
This next bit loads the form field data into variables.
If you add a form field, you will need to add it here.
*/
$Name1 = $_REQUEST['Name1'] ;
$Name2 = $_REQUEST['Name2'] ;
$Phone = $_REQUEST['Phone'] ;
$email_address = $_REQUEST['email_address'] ;
$comments = $_REQUEST['comments'] ;

/*
The following function checks for email injection.
Specifically, it checks for carriage returns - typically used by spammers to inject a CC list.
*/
function isInjected($str) {
    $injections = array('(\n+)',
    '(\r+)',
    '(\t+)',
    '(%0A+)',
    '(%0D+)',
    '(%08+)',
    '(%09+)'
    );
    $inject = join('|', $injections);
    $inject = "/$inject/i";
    if(preg_match($inject,$str)) {
        return true;
    }
    else {
        return false;
    }
}

// If the user tries to access this script directly, redirect them to the feedback form,
if (!isset($_REQUEST['email_address'])) {
header( "Location: $feedback_page" );
}

// If the form fields are empty, redirect to the error page.
elseif (empty($email_address) || empty($comments)) {
header( "Location: $error_page" );
}

// If email injection is detected, redirect to the error page.
elseif ( isInjected($email_address) ) {
header( "Location: $error_page" );
}

// If we passed all previous tests, send the email then redirect to the thank you page.
else {
mail( "$webmaster_email", "Feedback Form Results",
  $comments, "From: $email_address" );
header( "Location: $thankyou_page" );
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T22:39:53.537

您想发送符合 UTF8 标准的电子邮件，那么我*认为*您可以`$comments`在发送电子邮件之前尝试对您的 UTF8 进行编码：

```
$comments = utf8_encode($comments); 
```

但这**并不能保证有效，**因为这完全取决于您的应用程序（特别是收集这些评论的部分）的工作方式、它已经使用的编码以及`$comments`自身的构建方式。

`utf8_encode`（和我的建议）**假设**您看到“乱码”的原因是您实际上是以 UTF-8 为幌子发送 Latin1 编码；但是您的问题可能会有所不同，并且无需查看`$comments`（最重要的是，在 的*十六进制转储*处`$comments`），猜测是任何人都可以做的最好的事情。

另一种可能性（完全相反）是您将未经宣传的 UTF8 发送给将其解码为 ISO-8859-15 的人。在这种情况下，您应该正确宣传内容类型，*而不是*重新编码内容，添加[适当的额外标头](http://php.net/manual/en/function.mail.php)以`mail()`发挥作用。

我推荐 deceze 的链接，即使第二个看起来可能会将我的建议归类为“虚假承诺”:-)

## 更新

好的，让我们说运行

```
$Name1 = $_REQUEST['Name1']; 
```

得到你奇怪的字符。以上来自某种形式；您需要检查显示该表单的页面的编码。假设您在“Name1”字段中输入了值“Léon”。然后，如果您在上面添加说明

```
die(bin2hex($Name1)); 
```

接收页面应该终止并显示一个十六进制字符串。如果名称在 UTF8 中被正确接收，它应该是`4cc3a96f6e`. 但是如果您运行的是 ISO-8859-15，您将看到`4ce96f6e`，这意味着您需要更改传输形式的编码（以便它传输良好的 UTF8），或者您必须`utf8_encode`输入：

```
$Name1 = utf8_encode($_REQUEST['Name1']); 
```

当然，您可能还会收到陌生的十六进制代码：`4c826f6e`，也许。

如果您收到`4cc3a96f6e` *但仍然无法正常工作*，则问题**不在**传输形式或接收 PHP 上，而是在稍后。例如，当您显示字符串时。*该*页面可能采用 ISO-8859-15 编码，输出良好的 UTF8 将不起作用。如果是这种情况，您应该更改输出页面的广告编码，通过提供

```
Header('Content-Type: text/html; charset=UTF-8'); 
```

如果该页面中的其他文本出现损坏，则表示该页面已由 ISO-8859-15 编辑器编辑；因此它包含 ISO-8859-15 特殊字符，您可以通过 ISO 编码正确看到这些字符，但在转换为 UTF-8 时不再显示。在这种情况下，您需要先转换文件，然后从现在开始使用 UTF 编辑器。

# python - 如何写入 CSV 而不会覆盖过去的文本

> ID：13203868
> 
> 赞同：9
> 
> 时间：2012-11-02T22:25:51.173
> 
> 标签：python, python-3.x

下面的代码是我到目前为止所拥有的。当它写入 .csv 时，它会覆盖我之前在文件中写入的内容。我怎样才能以不会删除我以前的文本的方式写入文件。（我的代码的目标是让一个人输入他们的名字并让程序记住他们）

```
def main(src):
    try:
        input_file = open(src, "r")
    except IOError as error:
        print("Error: Cannot open '" + src + "' for processing.")
    print("Welcome to Learner!")
    print("What is your name? ")
    name = input()
    for line in input_file:
        w = line.split(",")
        for x in w:    
            if x.lower() == name.lower():
                print("I remember you "+ name.upper())
            else:
                print("NO")
                a = open("learner.csv", "w")
                a.write(name)
                a.close()
                break
if __name__ == "__main__":
    main("learner.csv") 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-02T22:28:33.413

下次需要追加到文件中。这可以通过以附加模式打开文件来完成。

```
def addToFile(file, what):
    f = open(file, 'a').write(what) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-02T22:31:21.470

更改`open("learner.csv", "w")`为`open("learner.csv", "a")`

open的第二个参数是mode，w是write，a是append。使用 append 它会自动寻找到文件的末尾。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-02T22:31:23.843

您需要以附加模式（'a'）打开文件，而不是写入模式（'w'）；[Python 文档](http://docs.python.org/3.3/tutorial/inputoutput.html#reading-and-writing-files)解释了可用的不同模式。

此外，您可能需要考虑使用 with 关键字：

> 在处理文件对象时，最好使用 with 关键字。这样做的好处是文件在其套件完成后正确关闭，即使在途中引发异常也是如此。

```
>>> with open('/tmp/workfile', 'a') as f:
...     f.write(your_input) 
```

# database - 如何在 Solaris 服务器上使用 qmail 附加文件？

> ID：13203872
> 
> 赞同：0
> 
> 时间：2012-11-02T22:26:33.817
> 
> 标签：database, email, attachment, qmail

具体来说，我想在 Solaris 服务器上使用 tcl 和 qmail 将多个文件附加到外发电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:21:47.170

qmail 是一个 MTA，所以不要指望 qmail 自己附加一些东西。在邮件正文中附加附件也必须符合 rfc。我知道 php 具有 mime_parser 功能，可以自动为附件邮件创建 mime 正文。

如果您希望您可以拥有自己的功能或者可能是一些开源代码，我知道 altermime 可以从邮件正文中添加删除附件、免责声明。

确保在调用 qmail-queue 之前放置此代码。

# cakephp - CakePHP 2.0 - 不包含模型的可包含行为

> ID：13203873
> 
> 赞同：1
> 
> 时间：2012-11-02T22:26:45.867
> 
> 标签：cakephp, cakephp-2.0

*****编辑/更新*****

 **我找到了一个解决方案，但真的不知道为什么会这样。如果有人能回答为什么会这样，那就太好了。

我发现当我将“floorplan_id”添加到 MoveInHome 的字段列表中时，MediaFloorplan 会显示在我的数据中，因为 MoveInHome 有很多楼层平面图。奇怪，因为在包含的“平面图”的字段中找到了“id”

*****结束编辑/更新*****

 **我正在为家庭建筑商开发一个项目，并且在通过可包含获取一些数据时遇到问题。

应用模型有这个：

```
public $actsAs = array("Containable"); 
```

我正在从 FloorplansController 调用 MoveInHome 模型

```
$this->loadModel("MoveInHome");
$moveInReadyData = $this->MoveInHome->getByCommunity($communityid,4); 
```

MoveInHome 属于楼层平面图

平面图有许多媒体平面图

这是模型中的函数：

```
public function getByCommunity($id,$limit=4) {

        $params = array(
            "fields" => array(
                "address",
                "city",
                "state",
            ),
            "conditions" => array(
                "MoveInHome.community_id" => $id,
                "MoveInHome.active" => 1,
                "MoveInHome.sold" => 0
            ),
            "limit" => $limit,
            "order" => "RAND()",
            "contain" => array(
                "MediaMoveInHome" => array(
                    "order" => array(
                        "featured" => "DESC"
                    ),
                    "fields" => array(
                        "media_move_in_home_file_path",
                    ),
                    "limit" => 1,
                ),
                "Floorplan" => array(
                    "fields" => array(
                        "id",
                        "name",
                        "style",
                        "bedrooms",
                        "bathrooms",
                        "sf_bsmt",
                        "sf_1flr",
                        "sf_2flr"
                    ),
                    "MediaFloorplan" => array(
                        "conditions" => array(
                            "MediaFloorplan.type" => "main",
                        ),
                        "fields" => array(
                                "id",
                                "media_floorplan_file_path"
                            )
                    )

                )

            )

        );

        return $this->find("all", $params);

    } 
```

除了 MediaFloorplan 根本没有返回之外，所有数据都可以正常返回。请注意，我在网站的其他区域提出了类似的包含请求。问题是否源于从 FloorplansController 向 MoveInReady 发出请求并试图包含 Floorplan 等？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:24:32.493

当您发现自己时，[DavidYell](https://stackoverflow.com/users/234451/davidyell)在他对该问题的评论中澄清说，您必须在`fields`选项中包含外键。来自实际的 CakePHP 文档：[这里](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html "食谱 - 可容纳")

> 当使用 'fields' 和 'contain' 选项时 - 小心包含您的查询直接或间接需要的所有外键。还请注意，因为 Containable 必须附加到容器中使用的所有模型，您可以考虑将其附加到您的 AppModel。****

# c# - Fluent Security - 配置参数化控制器操作

> ID：13203875
> 
> 赞同：4
> 
> 时间：2012-11-02T22:27:14.697
> 
> 标签：c#, fluent-security

我做了很多研究并测试了 FluentSecurity 库的 1.4 和 2.0 版本，但我似乎无法使用配置模式：

```
configuration.For<MyController>(x => x.GetCustomer())
  .RequireRole(appRoles); 
```

当我的控制器操作需要一个参数时，例如：

```
public ActionResult GetCustomer(int customerID) 
```

当前是否支持这种类型的配置？如果是这样，我如何针对具有必需参数的操作实施角色要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:51:39.547

我也在问同样的问题。目前，您可以传入参数的默认值。

```
configuration
    .For<HomeController>(x => x.Index(default(string)))
    .DenyAnonymousAccess(); 
```

哪里`HomeController`是：

```
public ActionResult Index(string id)
{
    return View();
} 
```

# iphone - 使用 ÅÄÖ 对数组进行排序

> ID：13203880
> 
> 赞同：0
> 
> 时间：2012-11-02T22:27:36.143
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

我对 iPhone/OSX 开发完全陌生，我正在尝试按字母顺序对填充有对象的 NSMutableArray 进行排序，但我失败了。以 Å 或 Ä 开头的项目以 A 开头的项目结束，以 Ö 开头的项目以 O 开头的项目结束。我尝试了在 Stackoverflow 上找到的不同排序方法，但它们似乎都不起作用（对我来说至少）

```
 NSSortDescriptor* stationDescriptor = [[NSSortDescriptor alloc]initWithKey:@"name" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)];
    NSArray* descriptors = [NSArray arrayWithObject:stationDescriptor];
    [stations sortUsingDescriptors:descriptors];

    [stations sortUsingComparator:^NSComparisonResult(Station* obj1, Station* obj2){
        return [[obj1 name] localizedCaseInsensitiveCompare:[obj2 name]];
    }]; 
```

好，进步！通过将模拟器上的语言更改为瑞典语，我已经成功地使其工作，当手机设置为英语时，有什么办法可以得到相同的结果？我知道在 C# 中，您可以在排序/比较字符串时发送对特定文化的引用。

/维克托

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T22:53:35.190

查看[NSString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)的文档会给你答案。

您正在使用[本地化CaseInsensitiveCompare:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-CJBHEBIF)和此状态的文档

> 等等等等等等
> 
> **另请参阅**
> - 比较：选项：范围：区域设置：

所以跳转到[比较文档：options:range:locale:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/compare:options:range:locale:)你可以弄清楚。你需要类似的东西

```
return [[obj1 name] compare:[obj2 name]
                    options:NSCaseInsensitiveSearch
                      range:NSMakeRange(0, [obj1 length])
                     locale:whateverLocaleYouWant]; 
```

# php - PHP继承的方法没有运行

> ID：13203883
> 
> 赞同：1
> 
> 时间：2012-11-02T22:27:48.133
> 
> 标签：php, inheritance, methods, parent

我有以下类层次结构：

```
interface IReportGenerator {

    public function setTitle ($title);

    public function setColumns ($columns);

    public function setPrintArea ($start, $stop);

    public function setPageOrientation ($value);

    public function createReport ($data);

    public function saveReport ($name, $path = null);

    public function saveReportAs ($name, $path = null, $type = null);
}

abstract class AbstractReportGenerator implements IReportGenerator {
    public function __construct() {
        $this->report = new PHPExcel();
    }

    public function setTitle ($title, $now = false) {
        // store

        return $this;
    }

    public function setColumns ($columns) {
        // store

        return $this;
    }

    public function setPaperSize ($value, $now = false) {
        // store

        return $this;
    }

    public function setPageOrientation ($value, $now = false) {
        // store

        return $this;
    }

    public function setPrintArea ($start, $stop, $now = false) {
        // store

        return $this;
    }

    public function saveReport ($name, $path = NULL) {
        return $this->saveReportAs($name,$path,self::EXCEL_2007);
    }

    public function saveReportAs ($name, $path = NULL, $type = NULL) {
        // save report

        return $this;
    }

    public function createReport ($data) {
        $this->doHeader();

        $this->doTitle();

        $this->doColumnHeaders();

        $this->doData($data);

        $this->doFooter();

        $this->doFormatting();

        $this->doMargins();

        $this->doPrintOptions();
    }

    abstract protected function doHeader();

    abstract protected function doTitle();

    abstract protected function doColumnHeaders();

    abstract protected function doData($data);

    abstract protected function doFooter();

    abstract protected function doFormatting();

    abstract protected function doMargins();

    abstract protected function doPrintOptions();
}

class ReportGeneratorSimple extends AbstractReportGenerator {
    public function __construct() {
        parent::__construct();
    }

    protected function doHeader () {
        // do nothing
    }

    protected function doTitle () {
        echo 'title A';
    }

    protected function doColumnHeaders () {
        echo 'column A';
    }

    protected function doData ($data) {
        echo 'data A';
    }

    protected function doFooter () {
        // do nothing
    }

    protected function doFormatting () {
        echo 'format A';
    }

    protected function doMargins () {
        // do nothing
    }

    protected function doPrintOptions () {
        // do nothing
    }
}

class ReportGeneratorFormatted extends ReportGeneratorSimple {
    public function __construct() {
        parent::__construct();
    }

    protected function doHeader () {
        parent::doHeader();
    }

    protected function doFooter () {
        parent::doFooter();
    }

    protected function doFormatting () {
        parent::doFormatting();

        echo 'format B';
    }
} 
```

当我做：

```
$report = new ReportGeneratorFormatted();
$report->setTitle('title');
$report->setColumns($columns);
$report->createReport($data);
$report->saveReport('file.xlsx'); 
```

我得到的输出是（没有特别的顺序）：

```
'data A'
'format A' 
```

知道为什么不打印“标题 A”、“列 A”和“格式 B”吗？saveReport() 和 saveReportAs() 方法也可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:54:23.927

@zerkins - 你是对的，我提供的代码按预期运行。我提供的结果来自生产代码，而不是样本。

鉴于示例工作正常，它就像跟踪生产代码中的差异一样简单。事实证明，在其中一个子类中缺少对“父”的调用。

谢谢！

# c++ - 关于 dllexport/dllimprt 的困惑

> ID：13203885
> 
> 赞同：0
> 
> 时间：2012-11-02T22:27:57.520
> 
> 标签：c++, visual-studio, qt-creator, dllimport

我构建了一个非常简单的容器（仅比结构多），作为对 C++ 中模板和库的简单测试。它保存任意类型的数据并跟踪它的最高值成员以及自上次访问以来数据是否已更改，并且包含在最新的 msvc 编译器生成的微小 .dll 中。我想要做的就是将此库链接到 Qt Creator 中的另一个项目，我已将其配置为使用 msvc 作为它的编译器（我需要使用 Qt 来有效地与 .ui 文件交互）。对于被调用的对象中的每个函数，我得到一个未解析的外部符号，例如：

```
LNK2019: unresolved external symbol "__declspec(dllimport) public: __thiscall collectionContainer<int>::collectionContainer<int>(int *,short,long)" (__imp_??0?$collectionContainer@H@@QAE@PAHFJ@Z) referenced in function _main 
```

我不确定在这里做什么，因为我的印象是导出库时我应该看到的确切符号。

这些函数都以 Visual Studio 有条件地导入/导出函数的常用方式定义了 CONTAINER_API。我确定我只是误解了某些东西，但我的想法已经不多了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:34:02.243

我想知道这个错误是否与 DLL 无关，这只是没有将模板实现放在头文件中的一种情况。看[这里](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

# perl - 使用 perl 集成solvemedia验证码

> ID：13203887
> 
> 赞同：0
> 
> 时间：2012-11-02T22:28:20.183
> 
> 标签：perl, captcha

我想知道如何在我的脚本中插入solvemedia验证码。我确实从他们的网站（https://portal.solvemedia.com/media/download/WWW-SolveMedia-1.1.tar.gz）安装了模块，但不知道在哪里添加这个（他们的说明）：

安装插件后，您可以开始调用 Solve Media API。 **显示小部件**

要在您的一个表单上显示 Solve Media 小部件，请实例化 SolveMedia 类，并为其提供您的 API 密钥。然后调用 get_html 函数。您可以在我的帐户中找到您的 API 密钥：

```
use WWW::SolveMedia;
my $c = WWW::SolveMedia->new( 'my challenge key',
            'my verification key',
            'my hash key' );

# output widget
print $c->get_html(); 
```

**处理答案**

您可以通过调用 SolveMedia.check_answer(...) 检查用户的响应。

```
# check answer
my $result = $c->check_answer( $ENV{REMOTE_ADDR}, $challenge, $response );

if( $result->{is_valid} ){
    print "Yay!";
}else{
    print "Dang it :-(\n";
    print "Error: ".$result->{error};
} 
```

这就是我卡住的地方，因为我不知道如何/在哪里插入该代码。如果你们中的任何人愿意提供帮助，请回复。我愿意付几块钱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:03:09.483

您创建新对象，然后将 get_html 的结果保存到一个变量中，然后将其粘贴到某个网页中，或者内联打印它。

您将 Perl 代码放在生成您希望验证码出现的页面的子例程中。并且您将调用 process 放在处理您打印验证码的页面上的表单提交的代码中。

# php - IF 和 ELSE 语句不起作用

> ID：13203892
> 
> 赞同：0
> 
> 时间：2012-11-02T22:28:51.773
> 
> 标签：php, mysql

如果用户的积分为 10,000，我正在尝试奖励用户徽章。表中有一个名为 badge1 的字段，其默认值设置为**locked**和一个点行。我正在运行**if 语句**，如果用户点数为 10,000，则将 badge1 行从锁定更新为解锁。我的代码看起来是正确的，但它既没有更新字段也没有显示任何错误。

```
<?php
$db = new PDO('mysql:host=hostname;dbname=databasename;charset=UTF-8', 'username', 'password');
$username = $_SESSION['username'];
$q = "SELECT Points FROM login_users WHERE username ='$username'");
$r = mysql_query($q);
$row = mysql_fetch_assoc($r);
$Points = $row['Points'];

if($Points == "10000") {
   $awardBadge = $db->exec("UPDATE login_users SET badge1=unlocked WHERE username=?");
$Points->execute(array($username))
} else {
    print "";
}

?> 
```

**更新：**

**我设法让它工作..但是问题是我对将旧 sql 转换为 PDO 有点新，所以这不是很安全，但这就是有效的：**

```
<?php
$connect = mysql_connect("host","username","password");
mysql_select_db("databasename");
$username = $_SESSION['jigowatt']['username'];
$q = "SELECT Points FROM login_users WHERE username = ('$username')";
$r = mysql_query($q);
$row = mysql_fetch_assoc($r);
$Points = $row['Points'];

?> 

// Place somewhere
<?php
if($Points >= "10000") {
    $result = mysql_query("UPDATE login_users SET maneki='unlocked' WHERE username='$username'");
} else {
    print "Badge has not been unlocked";

}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T23:16:18.357

`"10000" string`应该是一个`10000 int`

而且，您可能也想在这里做出选择。您正在使用 2 种类型的 mysql-database 连接设置。老式的`mysql_function()`方式和新的幻想`PDO method`。

我认为使用 PDO 版本更安全，因为较新的 PHP 版本将不再支持旧方法......那个......而且它看起来很脏;P

试试这个：

```
<?php

session_start();

$dbSession = new PDO('mysql:host=***;dbname=***', '***', '***');

$selectQuery = $dbSession->prepare('
  SELECT `User`.`Points`
  FROM `login_users` AS `User`
  WHERE `User`.`username` = :username
');
$selectQuery->bindParam(':username', $_SESSION['username'], PDO::PARAM_STR);

$user = $selectQuery->fetch(PDO::FETCH_ASSOC);

if ( !empty($user) && $user['Points'] == 10000 ) {
  $updateQuery = $dbSession->prepare('
    UPDATE `login_users`
    SET `badge1` = \'unlocked\'
    WHERE `username` = :username');
  $updateQuery->bindParam(':username', $_SESSION['username'], PDO::PARAM_STR);
  $updateQuery->execute();
}

?> 
```

有用的资源：

*   [PHP 数据库对象 (PDO)](http://nl1.php.net/manual/en/class.pdo.php)
*   [PHP 会话](http://nl1.php.net/manual/en/function.session-start.php)
*   [MySQL 数据操作](http://dev.mysql.com/doc/refman/5.1/en/sql-syntax-data-manipulation.html)
    *   [MySQL SELECT 语法](http://dev.mysql.com/doc/refman/5.1/en/select.html)
    *   [MySQL 更新语法](http://dev.mysql.com/doc/refman/5.1/en/update.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T22:34:03.943

最好检查是否 >= 10000 且尚未授予。那你也可以在 SQL 中完成，所以你不需要 PHP 中的逻辑。

```
UPDATE login_users SET badge1=unlocked WHERE points >= 10000 and badget1 <> unlocked 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T22:34:27.080

试试这个`if($Points == 10000)`而不是`if($Points == "10000")`

`mysql_query()`向与指定链接标识符关联的服务器上当前活动的数据库发送唯一查询（不支持多个查询）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T22:51:36.743

```
if($Points==10000){
    $awardBadge = $db->prepare("UPDATE login_users SET badge1=unlocked WHERE username=?");
    $awardBadge->execute(array($username));
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-02T23:06:59.063

这个问题是由`$point`实际上不等于的值引起的`10000`，但是是`NULL`。

所以我建议`var_dump()`在这种情况下总是使用来获取变量的实际值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-02T23:15:07.780

一个提示：在编写 php 代码之前检查 PDO 文档！您在同一时间使用 PDO 和 mysql 命令来完成相同的工作！？？为什么？？？

# knockout.js - 无法从淘汰赛中启用剑道组合框

> ID：13203893
> 
> 赞同：1
> 
> 时间：2012-11-02T22:28:52.777
> 
> 标签：knockout.js, knockout-2.0, kendo-ui

我使用 KnockoutJS 填充了 Kendo Combox。我正在使用 Knockout-Kendo.js 来做到这一点。

[http://rniemeyer.github.com/knockout-kendo/web/ComboBox.html](http://rniemeyer.github.com/knockout-kendo/web/ComboBox.html)

我有 2 个地址，k1 地址和邮寄地址：

对于这两个地址，如果您从州组合框中选择一个州，则国家组合将被禁用并选择美国。

如果您从州组合框中删除州或手动输入不存在的州，则将启用国家组合框。如果您选择美国以外的任何国家，则州组合框将被禁用。

我得到了k1地址的工作。

```
<input data-bind=" kendoComboBox: { enabled: k1Address.isStateMutable,  dataTextField: 'Name', dataValueField: 'Id', data: states, value: k1Address.stateId }" /> 
```

问题是邮寄地址。还有一个复选框“不同的邮寄地址”，所以我需要检查两个条件（启用：isK1MailDifferfrmAddress && mailingAddress.isStateMutable）。如果我只是这样做（启用：isK1MailDifferfrmAddress）或（启用：mailingAddress.isStateMutable）它们都可以工作。我不知道为什么，当我检查它们时，它不会工作。

```
<input data-bind=" kendoComboBox: { dataTextField: 'Name', dataValueField: 'Id', data: states, value: mailingAddress.stateId, enabled: isK1MailDifferfrmAddress && mailingAddress.isStateMutable }" /> 
```

我在 jsFiddle 上上传了我的代码，你可以在那里进行测试。

[http://jsfiddle.net/gatuV/1/](http://jsfiddle.net/gatuV/1/)

当你运行它时，邮寄地址的州和国家组合框应该被禁用，但它们不是。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T01:51:28.157

通常，当您使用涉及可观察对象或计算可观察对象的表达式时，您需要确保将每个表达式调用为如下函数 `myoption: observableA() + computedB()`：

但是，Kendo 绑定实际上确实需要一个可观察的或直接计算的（或静态值）。因此，您需要有一个表示您启用的概念的计算。

例如，您可以将“不同地址”标志传递给地址构造函数，并将其用作您正在使用的可变计算的一部分。

这是一个示例：http: [//jsfiddle.net/rniemeyer/gatuV/6/](http://jsfiddle.net/rniemeyer/gatuV/6/)

# c#-4.0 - 在窗口上绑定数据集

> ID：13203896
> 
> 赞同：0
> 
> 时间：2012-11-02T22:29:05.003
> 
> 标签：c#-4.0, data-binding, wpf-controls

我想创建一个窗口，它将从数据库中获取一些数据。

我正在将数据从数据库中获取到数据集中。

现在我想将数据集绑定到窗口，这样我就可以在整个窗口中访问文本块、文本框和其他一些控件。

这可能与否。

谢谢

# javascript - D3、嵌套追加和数据流

> ID：13203897
> 
> 赞同：60
> 
> 时间：2012-11-02T22:29:24.283
> 
> 标签：javascript, d3.js

我正在最终学习 D3 的过程中，我偶然发现了一个我无法找到答案的问题。我不确定我的问题是因为我没有习惯性地思考图书馆，还是因为我目前不知道的程序。我还应该提一下，我在 6 月份才开始做与网络相关的事情，所以我对 javascript 还很陌生。

假设我们正在构建一个工具，为用户提供带有相应图像的食物列表。并且让我们添加额外的约束，即每个列表项都需要用唯一 ID 标记，以便可以链接到另一个视图。我解决这个问题的第一个直觉是创建一个`<div>`'s 列表，每个都有自己的 ID，每个`div`都有自己的`<p>`和`<img>`. 生成的 HTML 如下所示：

```
<div id="chocolate">
  <p>Chocolate Cookie</p>
  <img src="chocolate.jpg" />
</div>
<div id="sugar">
  <p>Sugar Cookie</p>
  <img src="sugar.jpg" />
</div> 
```

此工具的数据位于 JSON 数组中，其中单个 JSON 如下所示：

```
{ "label": "sugar", "text": "Sugar Cookie", "img": "sugar.jpg" } 
```

有没有办法一举生成HTML？从添加 div 的基本情况开始，代码可能类似于：

```
d3.select(containerId).selectAll('div')                                                          
   .data(food)
   .enter().append('div')
   .attr('id', function(d) { return d.label; }); 
```

现在，在其中添加 a`<div>`和 a`<p>`怎么样？我最初的想法是做类似的事情：

```
d3.select(containerId).selectAll('div')                                                          
   .data(food)
   .enter().append('div')
   .attr('id', function(d) { return d.label; })
       .append('p').text('somethingHere'); 
```

但是，我看到了两个问题：（1）如何从`div`元素中获取数据，以及（2）如何在一个声明链中将多个子元素附加到同一个父元素？我想不出一种方法来进行第三步，我将在`img`.

我发现在另一篇文章中提到了嵌套选择，该文章指向[http://bost.ocks.org/mike/nest/](http://bost.ocks.org/mike/nest/)。但是嵌套选择，因此将附加分成三个块，适合/惯用这种情况吗？或者实际上是否有一种结构良好的方法可以在一个声明链中形成这种结构？似乎有一种方法可以在[https://github.com/mbostock/d3/wiki/Selections](https://github.com/mbostock/d3/wiki/Selections)上提到子选择，但我对测试该假设的语言不够熟悉。

从概念层面来看，这三个对象（`div`、`p`和`img`）更像是一组而不是单独的实体，如果代码也能反映这一点，那就太好了。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-11-02T23:43:43.537

您不能在一个链接命令中添加多个子元素。您需要将父选择保存在变量中。这应该做你想要的：

```
var data = [{ "label": "chocolate", "text": "Chocolate Cookie", "img": "chocolate.jpg" },
        { "label": "sugar", "text": "Sugar Cookie", "img": "sugar.jpg" }];

var diventer = d3.select("body").selectAll("div")
    .data(data)
  .enter().append("div")
    .attr("id", function(d) { return d.label; });

diventer.append("p")
    .text(function(d) { return d.text; });

diventer.append("img")
    .attr("src", function(d) { return d.img; });​ 
```

见工作小提琴：http: [//jsfiddle.net/UNjuP/](http://jsfiddle.net/UNjuP/)

您想知道类似`p`or的子元素如何`img`访问绑定到其父元素的数据。追加新元素时，数据会自动从父级继承。这意味着 p 和 img 元素将与父 div 绑定相同的数据。

`append`这种数据传播对于该方法来说不是唯一的。它发生在以下`selection`方法中：[`append`](https://github.com/mbostock/d3/wiki/Selections#wiki-append)、[`insert`](https://github.com/mbostock/d3/wiki/Selections#wiki-insert)和[`select`](https://github.com/mbostock/d3/wiki/Selections#wiki-select)。

例如，对于 selection.append：

> # selection.append(名称)
> 
> 附加一个具有指定名称的新元素作为当前选择中每个元素的最后一个子元素。返回包含附加元素的新选择。每个新元素都继承当前元素的数据（如果有），其方式与子选择的选择相同。名称必须指定为常量，但将来我们可能允许附加现有元素或函数以动态生成名称。

如果有不清楚的地方，请随时询问详细信息。

* * *

编辑

您可以使用该方法添加多个子元素，而无需将选择存储在变量中`selection.each`。然后，您还可以直接从父级访问数据：

```
var data = [{ "label": "chocolate", "text": "Chocolate Cookie", "img": "chocolate.jpg" },
        { "label": "sugar", "text": "Sugar Cookie", "img": "sugar.jpg" }];

d3.select("body").selectAll("div")
    .data(data)
  .enter().append("div")
    .attr("id", function(d) { return d.label; })
    .each(function(d) {
        d3.select(this).append("p")
          .text(d.text);
        d3.select(this).append("img")
          .attr("src", d.img);
    }); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-04-20T15:12:05.530

同样，没有本质上的不同，但我首选的方法是使用“呼叫”

```
var data = [{ "label": "chocolate", "text": "Chocolate Cookie", "img": "chocolate.jpg" },
        { "label": "sugar", "text": "Sugar Cookie", "img": "sugar.jpg" }];

d3.select("body").selectAll("div")
    .data(data)
  .enter().append("div")
    .attr("id", function(d) { return d.label; })
  .call(function(parent){
    parent.append('p').text(function(d){ return d.text; });
    parent.append('img').attr("src", function(d) { return d.img; });​
  }); 
```

您不需要存储任何变量，如果您想在其他地方使用类似的结构，您可以将调用的函数分解出来。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-10T15:41:53.243

[这与nautat 的答案](https://stackoverflow.com/a/13204545/1281433)没有根本不同，但我认为通过保存*更新*选择而不是*输入*选择，并从中获取*输入*选择以进行需要它的一个操作（添加周围的div）。

当您将元素插入或附加到**enter()**选择中时，它会添加到您以后可以使用的更新选择中。这意味着您可以加入数据，然后使用输入选择添加一个 div，然后当您附加更新选择时，您将在输入选择中添加*的*div 中追加：

```
var cookies = [
  { "label": "sugar", "text": "Sugar Cookie", "img": "sugar.jpg" },
  { "label": "chocolate", "text": "Chocolate Cookie", "img": "chocolate.jpg" }];

var cookie = d3.select("#cookie-jar").selectAll().data(cookies);
cookie.enter().append("div");
cookie.append("p").text(function(d){ return d.text });
cookie.append("img").attr("src",function(d){ return d.img });
```

```
#cookie-jar div { border: solid 1px black; }
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js"></script>
<div id="cookie-jar"></div>
```

# html - li 元素上的文本阴影延续到子菜单（CSS）

> ID：13203898
> 
> 赞同：0
> 
> 时间：2012-11-02T22:29:38.120
> 
> 标签：html, css

我一直在处理这里的下拉菜单[http://watercookies.topfloorstudio.com/](http://watercookies.topfloorstudio.com/)

我希望主菜单项（参与、播放、查看等）具有文本阴影，但没有下拉菜单项。我尝试了不起作用的特定选择器，我尝试了仅适用于的类那些元素和 sub li 元素仍然有文本阴影。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:37:36.050

将“text-shadow：none”添加到 CSS 中的这一行。

```
ul#main-nav li ul li {
    float: none;
    font-size: 0.5em;
    **text-shadow: none;**
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T22:37:13.650

你有这个CSS：

```
ul#main-nav li { 
    float: left;
    font-family: "Oswald", "Impact", sans-serif;
    position: relative;
    text-shadow: 1px 1px #666666;
} 
```

它正在捕捉*所有*的`li`s。将阴影移动到此选择器：

```
ul#main-nav > li > a 
```

# html - 为什么只有 Internet Explorer 不会加载我的 Google 地图对象

> ID：13203900
> 
> 赞同：0
> 
> 时间：2012-11-02T22:29:44.163
> 
> 标签：html, google-maps, internet-explorer-9

有人可以帮我弄清楚为什么 IE9 不会加载我的谷歌地图，但其他主要浏览器会。我认为它与实际设置或标题而不是javascript有关，但如果您也想要，请告诉我。这是代码：

```
<?php
include('session.php');
?>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>Google Maps API Project</title>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api       /js?sensor=false"></script>
<link rel="stylesheet" href="style.css" type="text/css" />  
</head>
  <body>
    <h1>Title</h1>
<div id="map" style="width: 1000px; height: 500px"></div>
    <div id="message"></div>

   <input type="text" id="search" >
   <input type="button" onclick="search();" value="Search">
<input type="button" onclick="addlaunchMark();" value="Add Launch">
<input type="checkbox" id="launches" checked="checked" onchange="addRemovelaunch()">
</br>
<input type="textbox" id="box1" style="display: none">
<input type="textbox" id="box2" style="display: none">

<script type="text/javascript">

</script>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:49:52.800

问题是由于缺少`<!DOCTYPE html>`声明引起的，（该死的 IE）:)

> 添加很重要，因为它告诉浏览器文档中使用了哪种 html。缺少 DOCTYPE 的文档将以错误兼容模式呈现，因为它被认为是在 DOCTYPE 被广泛使用之前编写的旧文档。

[资源](http://www.oreillynet.com/pub/a/javascript/synd/2001/08/28/doctype.html)

# ios - 代码符号错误 - xCode 4.5

> ID：13203906
> 
> 赞同：-2
> 
> 时间：2012-11-02T22:30:30.153
> 
> 标签：ios, xcode

> **可能重复：**
> [/usr/bin/codesign 失败，退出代码为 1](https://stackoverflow.com/questions/1090288/usr-bin-codesign-failed-with-exit-code-1)

我知道这个问题经常被问到。

我尝试了各种方式，但我得到了这个错误：

```
 CodeSign /Users/iacopocricelli/Library/Developer/Xcode/DerivedData/Prova2-bvdyofacwyoznwbxshegsvewaoan/Build/Products/Debug-iphoneos/Prova2.app
        cd /Users/iacopocricelli/Desktop/Projects/Prova2
        setenv CODESIGN_ALLOCATE
 /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/codesign_allocate

setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
            /usr/bin/codesign --force --sign 48e8251951b5605143fe428c32f588209d2c1ce2 --resource-rules=/Users/iacopocricelli/Library/Developer/Xcode/DerivedData/Prova2-bvdyofacwyoznwbxshegsvewaoan/Build/Products/Debug-iphoneos/Prova2.app/ResourceRules.plist --entitlements /Users/iacopocricelli/Library/Developer/Xcode/DerivedData/Prova2-bvdyofacwyoznwbxshegsvewaoan/Build/Intermediates/Prova2.build/Debug-iphoneos/Prova2.build/Prova2.xcent /Users/iacopocricelli/Library/Developer/Xcode/DerivedData/Prova2-bvdyofacwyoznwbxshegsvewaoan/Build/Products/Debug-iphoneos/Prova2.app

        /Users/iacopocricelli/Library/Developer/Xcode/DerivedData/Prova2-bvdyofacwyoznwbxshegsvewaoan/Build/Products/Debug-iphoneos/Prova2.app: The operation was cancelled by the user.Command /usr/bin/codesign failed with exit code 1 
```

我注册为开发者。我安装所有证书。我检查了没有重复的证书。我检查了捆绑标识符。我检查了构建设置中的代码签名。我将正确的移动设备安装为 Q253------.xxxxx.* 并且我的包标识符是 xxxxxx.myname 我尝试创建其他项目-

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T22:54:42.677

试试这个 点击 Xcode 右上角的管理器窗口。然后单击设备选项卡。然后在左侧 Library 下的 Provisioning Profiles 上，然后单击右下角的刷新图标。

如果您在项目中正确设置了包标识符和代码签名，这通常可以解决大部分代码签名问题。

# iphone - 如何向 UIActivityViewController 对象添加不同的文本

> ID：13203908
> 
> 赞同：6
> 
> 时间：2012-11-02T22:30:43.987
> 
> 标签：iphone, objective-c, ios

我已经实现了一个 UIActivityViewController，用于共享一些信息。在这种情况下，我有一个问题：是否可以在 facebook 共享/twitter 共享/或邮件共享之间制作不同的文本？设置的文本与其他文本不同...

一个好的 UIActivityViewController 教程会非常有用。

我当时的代码是用于显示文本和图像：

```
NSString *text = @"Lime Cat";
        UIImage *image = [UIImage imageNamed:@"MyApp Icon 512x512.png"];
        NSArray *items = [NSArray arrayWithObjects:text,image , nil]; 
```

但是我该如何管理 NSString 仅用于邮件，并为 facebook 共享选项制作单独的 NSString？

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-04T16:57:03.590

你可以去下面的链接，有一个教程可以帮助你：

[https://www.albertopasca.it/whiletrue/objective-c-custom-uiactivityviewcontroller-icons-and-text/](https://www.albertopasca.it/whiletrue/objective-c-custom-uiactivityviewcontroller-icons-and-text/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-11T14:09:40.060

您可以让您的类符合`UIActivityItemSource`协议并实现`activityViewController:itemForActivityType:`. 这`activityType`将是 FB、Twitter、消息应用程序等，因此您可以对其进行切换并根据活动返回不同的对象。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-06-28T05:20:47.403

```
-(void)ShareImageandText:(UIButton *)sender    
{ 
```

NSString *texttoshare =@" [http://qrs.ly/l851gh4](http://qrs.ly/l851gh4) ";

UIImage *image = [UIImage imageNamed:@"default"];

```
 NSString *noteStr = [NSString stringWithFormat:@"Please follow this link below to install the Freedom.desi application on your IPhone. %@",texttoshare];
    NSURL *url = [NSURL URLWithString:texttoshare];

    NSArray *activityItems = @[noteStr,image];

    NSLog(@"this %@",activityItems);

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
        UIActivityViewController *activityVC = [[UIActivityViewController alloc] initWithActivityItems:@[noteStr,image] applicationActivities:nil];
        activityVC.excludedActivityTypes = @[UIActivityTypeAssignToContact, UIActivityTypePrint];

        [self shareText:noteStr
               andImage:image andUrl:nil];

        [self presentViewController:activityVC animated:TRUE completion:nil];

    }
    //if iPad
    else {
        // Change Rect to position Popover
        UIActivityViewController *activityVC = [[UIActivityViewController alloc] initWithActivityItems:@[noteStr, url] applicationActivities:nil];
        activityVC.excludedActivityTypes = @[UIActivityTypeAssignToContact, UIActivityTypePrint];

        [self shareText:noteStr
               andImage:image andUrl:nil];

        UIPopoverController *popup = [[UIPopoverController alloc] initWithContentViewController:activityVC];
        [popup presentPopoverFromRect:CGRectMake(self.view.frame.size.width/2, self.view.frame.size.height/4, 0, 0)inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

    }

} 
```

# linux - 如何调试需要用户输入的 NASM 汇编程序？

> ID：13203909
> 
> 赞同：6
> 
> 时间：2012-11-02T22:30:51.880
> 
> 标签：linux, ubuntu, assembly, nasm, insight

我正在[逐步阅读 jeff 令人惊叹的书籍汇编](https://rads.stackoverflow.com/amzn/click/com/0470497025)，我在第 8 章中，他展示了一个汇编程序示例，该程序以这种方式从用户那里获取文件：

```
SECTION .bss            ; Section containing uninitialized data

    BUFFLEN equ 1024    ; Length of buffer
    Buff:   resb BUFFLEN    ; Text buffer itself 
```

它将文件文本读入`Buff`，并将所有大写的文本版本输出到不同的文件。

我想在调试模式下运行这个程序来逐步分析所有寄存器的情况。

我正在使用 INSIGHT 在 ubuntu 上运行它。

我是一个完整的初学者。我知道如何使用 Insight 单步执行，但用户需要运行此程序的方式是：

```
myProgram > outputfile.txt < inputfile.txt 
```

**我如何在调试器中模仿这个？**

这是完整的来源：

```
;  Executable name : uppercaser2
;  Version         : 1.0
;  Created date    : 3/25/2009
;  Last update     : 3/25/2009
;  Author          : Jeff Duntemann
;  Description     : A simple program in assembly for Linux, using NASM 2.05,
;    demonstrating simple text file I/O (through redirection) for reading an
;    input file to a buffer in blocks, forcing lowercase characters to 
;    uppercase, and writing the modified buffer to an output file.
;
;  Run it this way:
;    uppercaser2 > (output file) < (input file)  
;
;  Build using these commands:
;    nasm -f elf -g -F stabs uppercaser2.asm
;    ld -o uppercaser2 uppercaser2.o
;
SECTION .bss            ; Section containing uninitialized data

    BUFFLEN equ 1024    ; Length of buffer
    Buff:   resb BUFFLEN    ; Text buffer itself

SECTION .data           ; Section containing initialised data

SECTION .text           ; Section containing code

global  _start          ; Linker needs this to find the entry point!

_start:
    nop         ; This no-op keeps gdb happy...

; Read a buffer full of text from stdin:
read:
    mov eax,3       ; Specify sys_read call
    mov ebx,0       ; Specify File Descriptor 0: Standard Input
    mov ecx,Buff        ; Pass offset of the buffer to read to
    mov edx,BUFFLEN     ; Pass number of bytes to read at one pass
    int 80h         ; Call sys_read to fill the buffer
    mov esi,eax     ; Copy sys_read return value for safekeeping
    cmp eax,0       ; If eax=0, sys_read reached EOF on stdin
    je Done         ; Jump If Equal (to 0, from compare)

; Set up the registers for the process buffer step:
    mov ecx,esi     ; Place the number of bytes read into ecx
    mov ebp,Buff        ; Place address of buffer into ebp
    dec ebp         ; Adjust count to offset

; Go through the buffer and convert lowercase to uppercase characters:
Scan:
    cmp byte [ebp+ecx],61h  ; Test input char against lowercase 'a'
    jb Next         ; If below 'a' in ASCII, not lowercase
    cmp byte [ebp+ecx],7Ah  ; Test input char against lowercase 'z'
    ja Next         ; If above 'z' in ASCII, not lowercase
                ; At this point, we have a lowercase char
    sub byte [ebp+ecx],20h  ; Subtract 20h to give uppercase...
Next:   dec ecx         ; Decrement counter
    jnz Scan        ; If characters remain, loop back

; Write the buffer full of processed text to stdout:
Write:
    mov eax,4       ; Specify sys_write call
    mov ebx,1       ; Specify File Descriptor 1: Standard output
    mov ecx,Buff        ; Pass offset of the buffer
    mov edx,esi     ; Pass the # of bytes of data in the buffer
    int 80h         ; Make kernel call
    jmp read        ; Loop back and load another buffer full

; All done! Let's end this party:
Done:
    mov eax,1       ; Code for Exit Syscall
    mov ebx,0       ; Return a code of zero 
    int 80H         ; Make kernel call 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T05:51:26.127

听起来您想将进程附加到 GDB。你可以试试这个。

```
shell$ gdb ./uppercaser2
  gdb> list
  gdb> break read
  gdb> run > ouput.txt < input.txt
  gdb> x/5i $eip 
```

在 shell 提示下，您启动 GDB 并将大写字母 2 附加到 GDB。调试符号应该加载，您可以使用列表来检查以显示您的源代码。通过行号或函数名称在所需位置创建断点。使用 GDB 的 run 来使用您的输入和输出文件启动程序。从这里，您可以使用 GDB 命令分析寄存器并单步执行内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-28T15:05:41.887

在运行命令中，您可以像这样设置用户输入：

```
shell$ gdb ./executable  
gdb> break main  
gdb> run user input 
```

# c# - 预订房间时如何在 jQuery datepicker 中使已经拍摄的日期不可点击？

> ID：13203910
> 
> 赞同：1
> 
> 时间：2012-11-02T22:31:01.940
> 
> 标签：c#, jquery, asp.net-mvc-3

我再次为我的酒店 asp.net MVC 3 应用程序编写了一个 jQuery 脚本。我想在 jQuery 中制作下拉日历，这样已经为特定房间保留的日期是不可点击的。这意味着首先我必须从数据库中读取日期，然后以某种方式在 jQuery 脚本中读取它，然后再显示房间预订日期的适当日历。

我是否需要为此学习 jQuery，如果不需要，该怎么做？数据库检索指定日期是否需要 Ajax？你能帮我么？

非常感谢你

PS 如果我需要学习 jQuery（和/或 Ajax），你能给我一些高质量的资源提示吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:36:04.083

从 google [jQuery UI DatePicker 找到这个：禁用指定的日期](http://davidwalsh.name/jquery-datepicker-disable-days)

您可以将此代码包装在 JS 函数中并将日期列表传递给它（类似于）

```
 function ShowDatePicker(dateList)
{
var disabledDays = dateList;

/* utility functions */
function nationalDays(date) {
  var m = date.getMonth(), d = date.getDate(), y = date.getFullYear();
  //console.log('Checking (raw): ' + m + '-' + d + '-' + y);
  for (i = 0; i < disabledDays.length; i++) {
    if($.inArray((m+1) + '-' + d + '-' + y,disabledDays) != -1 || new Date() > date) {
      //console.log('bad:  ' + (m+1) + '-' + d + '-' + y + ' / ' + disabledDays[i]);
      return [false];
    }
  }
  //console.log('good:  ' + (m+1) + '-' + d + '-' + y);
  return [true];
}
function noWeekendsOrHolidays(date) {
  var noWeekend = jQuery.datepicker.noWeekends(date);
  return noWeekend[0] ? nationalDays(date) : noWeekend;
}

/* create datepicker */
jQuery(document).ready(function() {
  jQuery('#date').datepicker({
    minDate: new Date(2010, 0, 1),
    maxDate: new Date(2010, 5, 31),
    dateFormat: 'DD, MM, d, yy',
    constrainInput: true,
    beforeShowDay: noWeekendsOrHolidays
  });
});
} 
```

# javascript - 小阵列拼图。解释不清楚

> ID：13203911
> 
> 赞同：1
> 
> 时间：2012-11-02T22:31:04.877
> 
> 标签：javascript

我正在做这组 js 测试： [js-assessment](https://github.com/rmurphey/js-assessment)

其中一项测试说：

```
 it("you should be able to find all occurrences of an item in an array", function() {
      var result = answers.findAllOccurrences('abcdefabc'.split(''), 'a');

      expect(result.join(' ')).to.be('0 6');
    }); 
```

我不明白`'0 6'`结果是从哪里来的。任务是查找 的出现`a`，但在该数组中只有两个 a。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:38:56.377

我不知道`findAllOccurrences`具体是如何实现的，但是看到结果它必须执行以下操作：

它需要一个数组和一个字符串作为输入。并返回此输入字符串出现位置的索引数组。

`'abcdefabc'.split('') //=> ["a", "b", "c", ...]`这将为您提供用作输入的数组`findAllOccurrences`

`findAllOccurrences`然后`"a"`在此输入数组的第一个（索引：0）和第七个（索引：6）位置找到，并返回：`[0, 6]`

`[0, 6].join(" ")`会给你`"0 6"`

# dependency-injection - Ninject 3.0.1.10 缺少 IKernel.Get

> ID：13203913
> 
> 赞同：6
> 
> 时间：2012-11-02T22:31:11.347
> 
> 标签：dependency-injection, inversion-of-control, ninject

我刚刚使用 NuGet 将 Ninject 从 v3 更新到 v3.0.1.10，它破坏了我的代码。我在新库中的任何地方都找不到 IKernel.Get 或我依赖的相关方法。我搜索了 Ninject 网站和博客，结果很短，我找不到详细的变更日志。我注意到有一个 Resolve IEnumerable 方法......这是现在检索对象的唯一方法吗？泛型和单实例 Resolve/Get 方法发生了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T23:37:13.883

不，选择没有损坏。

Ninject 中的大多数东西都是扩展方法。你是`using Ninject;`吗？

当您使用`Ctrl-Alt-O`查看完整编译错误时，您确定您没有收到阻止 Ninject 程序集正确加载的早期错误吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:06:52.630

原来与我使用 ReSharper 相关，而不是 Ninject。有时 ReSharper 在扫描解决方案时会遗漏方法、属性等，而删除缓存是让 ReSharper 再次扫描的唯一方法。

[Resharper：无法解析 VS2010 SP1 中的符号“Eval”](https://stackoverflow.com/questions/5539131/resharper-cannot-resolve-symbol-eval-in-vs2010-sp1)

# php - 无法在 PHP 5.4 上使用 sqlsrv 进行连接，但适用于 5.3

> ID：13203917
> 
> 赞同：2
> 
> 时间：2012-11-02T22:31:24.883
> 
> 标签：php, sql, codeigniter, iis-7.5

升级到 PHP 5.4 并使用 CodeIgniter 的 PHP 框架后，我的应用程序拒绝连接到 SQL Server 2005 数据库。没有执行任何配置更改，并且我确保也安装了 PHP SQLSRV 驱动程序 (3.0.3)。来自 CI 的特定消息是“无法使用提供的设置连接到您的数据库服务器”。

切换回 PHP 5.3，一切正常。

为了确保在 PHP 5.4 上安装了 sqlsrv 驱动程序，我运行`php -m`并显示“sqlsrv”。phpinfo() 看起来也不错。

我无法获得有关 sqlsrv 如何/为什么不与新驱动程序连接的任何调试信息。有趣的是，如果我从[MS 网站上这个有趣的驱动程序页面](http://downloads.php.net/pierre/)下载 sqlsrv-5.4-nts-snap.zip - 那么它就可以工作了！但是，它似乎使用的是 sqlsrv 2.0 驱动程序。

SQLSRV 是否适用于 PHP 5.4？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:31:24.883

最后调试这个问题 - 事实证明问题出在使用 TCP/IP 而不是共享内存/命名管道时的连接参数。我在 CodeIgniter 中的连接设置是：

```
$db['default']['hostname'] = 'localhost'; 
```

相当于：

```
$db = sqlsrv_connect("localhost", $config); 
```

我编写了一个自定义页面，它使用正确的配置变量（用户名/密码/UTF-8/等）运行了这个 sqlsrv_connect。然后使用`print_r( sqlsrv_errors());`我遇到了以下问题：

> [Microsoft][SQL Server Native Client 11.0]共享内存提供程序：找不到用于连接 SQL Server 2000 的共享内存 dll

奇怪！但我现在知道它与共享内存与 TCP/IP 有关。在浏览了“Microsoft Drivers for PHP for SQL Server”的文档（chm 文件）后，我发现要通过 TCP/IP（在本地机器上）连接，**您需要使用`(local), 1433`**服务器名称 - 其中 1433 是您使用的任何端口使用。

总结一下变化（CodeIgniter 特有，但也一般用于 sqlsrv_connect）。更改 /application/config/database.php：

```
$db['default']['hostname'] = 'localhost'; 
```

至

```
$db['default']['hostname'] = '(local), 1433'; 
```

# string - 使用 Excel（或其他工具）将长文本分成 255 个字符的组

> ID：13203919
> 
> 赞同：2
> 
> 时间：2012-11-02T22:31:52.107
> 
> 标签：string, excel, excel-formula, excel-2010

在 Excel 中，是否可以粘贴长文本并将其拆分为每个 255 个字符的子组？它不必在空间或类似的地方分割。

我尝试在 Excel 中创建一个简单的公式来获取 A 列中任何内容的前 255 个字符，但不确定如何为接下来的 255 个字符集执行此操作：

这就是我试图从 A 列获取它们的内容：`=LEFT(A1,255)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T23:05:01.950

您可以在 B 列中使用以下公式并将其拖过：

`=MID($A1,255*(COLUMN()-2)+1,255)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T22:36:12.040

使用 MID 函数获取字符的子集。您可以将子部分选择的值放在列标题中，然后在 MID 函数中引用列标题中的值。

# java - 有没有办法在 Android 中确定 Activity 的内容视图是否已创建/显示？

> ID：13203920
> 
> 赞同：4
> 
> 时间：2012-11-02T22:31:57.740
> 
> 标签：java, android, eclipse, android-fragments

在我的应用程序开始时，我在选项卡中加载了一些片段。这是我加载的一个：

```
WishlistFragment wishlistfragment = new WishlistFragment(); 
```

加载并显示 Fragment 后，我​​将从其他 Fragment 调用它：

```
wishlistfragment.adapter.notifyDataSetChanged(); 
```

问题是，如果我在创建/显示 wishlistfragment 之前调用它，我会收到以下异常：

> java.lang.IllegalStateException：尚未创建内容视图。

有没有办法以编程方式确定视图是否已创建？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T22:40:00.777

我不知道内置方式，但您可以设计自己的方法来处理通知并覆盖`onCreateView`您的`WishlistFragment`. 像这样的东西可能会起作用：

```
public class WishlistFragment extends ListFragment {
    private boolean _viewExists = false;

    @Override
    public View onCreateView( LayoutInflater inflater, ViewGroup container, Bundle bundle )
    {
        _viewExists = true
        return super.onCreateView( inflater, container, bundle );
    }

    public void notifyChange()
    {
        if ( _viewExists )
            getListAdapter().notifyDataSetChanged();
    } 
```

# unit-testing - 与 UnitTest++ 链接错误

> ID：13203922
> 
> 赞同：1
> 
> 时间：2012-11-02T22:32:08.140
> 
> 标签：unit-testing, unittest++

使用 Xcode 作为我的 ide，我收到一个奇怪的 Unit Test ++ 链接错误。现在我确实为项目设置了两个目标。一个目标将进行测试，另一个目标暂时什么都不做。

请注意，我确实链接了库并运行了教程中的简单工作示例。我使用来自 macports 的 gcc 4.2.1 编译它。

“std::string::c_str() const”，引用自：UnitTest::MemoryOutStream::GetText() const in libUnitTest++.a(MemoryOutStream.o) “std::basic_ostringstream, std::allocator >::str( ) const"，引用自：UnitTest::MemoryOutStream::GetText() const in libUnitTest++.a(MemoryOutStream.o) "std::basic_ostream >::~basic_ostream()"，引用自：construction vtable for std::ostream libUnitTest++.a(TestRunner.o) 中的 -in-UnitTest::MemoryOutStream 为 libUnitTest++.a(Test.o) 中的 std::ostream-in-UnitTest::MemoryOutStream 构造 vtable "std::basic_ostream >::~basic_ostream( )"，引用自：libUnitTest++.a(TestRunner.o) 中 std::ostream-in-UnitTest::MemoryOutStream 的构造 vtable:: ostream-in-UnitTest:: 构造 vtablelibUnitTest++.a(Test.o) 中的 MemoryOutStream

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:08:34.970

好的，所以当我将 std 库切换到 GNU 标准库而不是 llvm osx 标准库时，所有问题都消失了。所以去构建设置c++标准库libstdc++（GNU C++标准库）

# css - 使用 IcoMoon 字体和在 Chrome 上查看是否存在已知故障？

> ID：13203929
> 
> 赞同：2
> 
> 时间：2012-11-02T22:33:11.043
> 
> 标签：css, fonts, font-face

这是 Chrome（顶部）和 Firefox（底部）上的网站图像。这些图标显示在 Firefox 中，但不在 Chrome 中。

![图标月亮](../Images/f2be4ad85bf2c50c2c4c1bc305192ad9.png)

有趣的是，如果我刷新几次，图标有时会出现。

这是一些 CSS（我也有重置 CSS）和 HTML，以防出现问题：

```
/* CSS */

@font-face {  font-family: 'Oswald';  font-style: normal;  font-weight: 400;  src: local('Oswald Regular'), local('Oswald-Regular'), url(http://themes.googleusercontent.com/static/fonts/oswald/v7/-g5pDUSRgvxvOl5u-a_WHw.woff) format('woff');} @font-face {  
font-family: 'Open Sans';  font-style: normal;  font-weight: 400;  src: local('Open Sans'), local('OpenSans'), url(http://themes.googleusercontent.com/static/fonts/opensans/v6/cJZKeOuBrn4kERxqtaUH3T8E0i7KZn-EPnyo3HZu7kw.woff) format('woff');}

.opensans { font-family: 'Open Sans', sans-serif; } 
.oswald { font-family: 'Oswald', sans-serif; }

html { background:#ccc; }
body { color:#444;font-family:'Open Sans'; }
h1,h2,h3,h4,h5 { font-family:'Oswald'; }
body > div {position:relative;background:#f8f8f8;}
span[class^="icon-"] { font-size: 19px;float: left; }
#top { background:#f3f4f5;border-bottom:solid #333 5px;width:100%; }
#header { background: #414141 url(images/txture.png);color:#999; }
#header span[class^="icon-"] { margin-right:5px; }
#header li {  }
#header a, #header .text { float:left;padding: 5px 13px;color:#999;transition:all .5s; -moz-transition:all .5s; -webkit-transition:all .5s; }
#header a:hover { color:#ccc;background:rgba(100,100,100,0.2); }
#header [class^="icon-"]::before {  }
#header li:last-child a { float:right; } 
```

HTML：

```
<div id="top">
            <ul id="header" class="clearfix">
                <li style="float:left;border-right: solid 1px #000;">
                    <a href="#" style="border-right:solid 1px #333;">
                        <span aria-hidden="true" class="icon-home"></span>
                        <span>Home</span>
                    </a>
                </li>
                <li>
                    <span class="text">Tools:
                    </span>
                    <a href="#" style="padding:5px">
                        <span aria-hidden="true" class="icon-equalizer"></span>
                    </a>
                    <a href="#" style="padding:5px">
                        <span aria-hidden="true" class="icon-bars"></span>
                    </a>
                    <a href="#">
                        <span aria-hidden="true" class="icon-printer"></span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <span aria-hidden="true" class="icon-user"></span>
                        <span>name@email.com</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <span aria-hidden="true" class="icon-key-stroke"></span>
                        <span>Log Out</span>
                    </a>
                </li>
            </ul>
        </div> 
```

## 更新

只是看着控制台，发现当图标不显示时，它有这个警告：

```
Resource interpreted as Font but transferred with MIME type font/svg 
```

## 另一个更新

无论我使用类名还是数据图标内容值方法，都会发生此问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T06:24:55.110

我自己无法重现此问题。生成的示例文件也有这个问题吗？

显然这只发生在 Windows 中。尝试将您的编码重置为 PUA，它可能会解决问题。请让我知道你的结果。

# windows - 递归搜索 HKU 注册表配置单元以查找 DWORD 值

> ID：13203932
> 
> 赞同：4
> 
> 时间：2012-11-02T22:33:26.097
> 
> 标签：windows, recursion, vbscript, registry

我需要有关 VBScript 的帮助，该脚本将递归搜索 Windows`HKU`注册表配置单元以获取`DWORD`值。如果脚本可以忽略仅查看`S-1-5-21*`密钥的系统帐户，那将很有帮助。我必须使用`HKU`hive 而不是`HKCU`hive 来完成此任务，因为我计划用来运行脚本的程序在 system.context 中运行。没办法。

谢谢你。

```
Const HKCU = &H80000001  
Const HKLM = &H80000002  
Const HKU =  &H80000003  

strComputer = "."

Set oReg=GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & _
   strComputer & "\root\default:StdRegProv")

'Read the HKEY_CURRENT_USER hive, registry path, and valuename to retrieve settings
strKeyPath = "Software\Policies\Microsoft\Windows\System\Power"
strValueName = "PromptPasswordOnResume"
oReg.GetDWORDValue HKCU,strKeyPath,strValueName,dwValue

'Return a failure exit code if entry does not exist
If IsNull(dwValue) Then
   Wscript.Echo "The value is either Null or could not be found in the registry."
   WScript.Quit 1

'Return a failure exit code if value does not equal STIG setting    
ElseIf dwValue <> 1 Then
   Wscript.Echo "This is a finding. ", strValueName,"=", dwValue
   WScript.Quit 1

'Return a passing exit code if value matches STIG setting   
ElseIf dwValue = 1 Then
   Wscript.Echo "This is not a finding. "
   WScript.Quit 0

End If 
```

所有这一切都是我最终想出来解决我的问题。

```
Const HKEY_CURRENT_USER = &H80000001  
Const HKEY_LOCAL_MACHINE = &H80000002  
Const HKEY_USERS = &H80000003  

'Set the local computer as the target

strComputer = "."

'set the objRegistry Object 
Set objRegistry = GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & strComputer & "\root\default:StdRegProv")

'Enumerate All subkeys in HKEY_USERS
objRegistry.EnumKey HKEY_USERS, "", arrSubkeys

'Define variables
strKeyPath = "\Software\Microsoft\Windows\CurrentVersion\Policies\Attachments"  
strValueName = "HideZoneInfoOnProperties"  
strSID = "S-1-5-21-\d*-\d*-\d*-\d{4,5}\\"  
strValue = 1  

f = True

For Each i in arrSubKeys
    Set objRegExp = New RegExp
        objRegExp.IgnoreCase = True
        objRegExp.Global = True
        objRegExp.Pattern = strSID

    Set colMatches = objRegExp.Execute(i + strKeyPath)  
        For Each objMatch In colMatches
        objRegistry.GetDWORDValue HKEY_USERS,i + strKeyPath,strValueName,dwValue

            If IsNull(dwValue) Then
                WScript.Echo "This is a finding, the key " & i + strKeyPath & "\" & strValueName & " does not exist."
                f = False
            ElseIf dwValue <> strValue Then
                WScript.Echo "This is a finding, the " & i + strKeyPath & "\" & strValueName & ": " & dwValue & " does not equal REG_DWORD = " & strValue & "."
                f = False
            ElseIf dwValue = strValue Then
                WScript.Echo "This is not a finding " & i + strKeyPath & "\" & strValueName & " = " & dwValue
            End If
        Next

Next

    If f Then
        WScript.Quit 0
    Else
        WScript.Quit 1
    End If 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T13:04:57.033

这里不需要递归。只需遍历 HKEY_USERS 的子键并（尝试）读取该值。的返回码`GetDWORDValue()`将指示是否可以读取该值。

```
Const HKEY_USERS = &h80000003

subkey = "Software\Policies\Microsoft\Windows\System\Power"
name   = "PromptPasswordOnResume"

computer = "."

Set reg = GetObject("winmgmts://" & computer & "/root/default:StdRegProv")

reg.EnumKey HKEY_USERS, "", sidList
For Each sid In sidList
  key = sid & "\" & subkey
  rc = reg.GetDWORDValue(HKEY_USERS, key, name, val)
  If rc = 0 Then
    If val = 1 Then
      WScript.Echo "OK"
      WScript.Quit 0
    Else
      WScript.Echo "Not OK"
      WScript.Quit 1
    End If
  End If
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T09:09:09.390

我不确定我是否正确。如果是你想在HKU而不是在HKCU中搜索，那么关键是HKU中的一个账户映射到了HKCU。就像您的情况一样，S-1-5-21* 将映射到 HKCU。您可以通过修改 HKCU 中的条目来检查它，这将反映在 HKU(S-1-5-21*) 中，反之亦然。

# java - java SSLEngine wrap没有从缓冲区读取我的所有数据

> ID：13203936
> 
> 赞同：0
> 
> 时间：2012-11-02T22:33:46.817
> 
> 标签：java, ssl

我遇到了这个异常

```
 SSLEngineResult result = sslEngine.wrap(b, engineToSocketData);
    if(b.hasRemaining())
        throw new RuntimeException(id+"Bug, should read all my data every time"); 
```

我只看到它发生过一次，不知道如何重现它，但为什么 java 的 SSLEngine 不会从上述代码中的 ByteBuffer b 读取所有数据？我查看了 SSLEngine 和 SSLEngineImpl 的反编译代码，但我看不到任何明显会发生这种情况的地方。有任何想法吗？

谢谢，院长

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T22:53:07.103

没关系，愚蠢的问题，因为结果有一个可以返回缓冲区溢出、下溢等的状态。

# internet-explorer - PIE.htc 不适用于 IE8

> ID：13203937
> 
> 赞同：2
> 
> 时间：2012-11-02T22:33:52.447
> 
> 标签：internet-explorer, css, internet-explorer-8, css3pie

我在我的服务器上下载了 PIE.htc 的未压缩版本。

**HTML**

```
<!DOCTYPE html >
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Test</title>
        <link href="test.css" rel="stylesheet" type="text/css" />

    </head>
    <body>
        <div id="wrapper">          
            <div class="inside-wrapper">
                testing
            </div>
        </div>
    </body>
</html> 
```

**测试.css**

```
 .inside-wrapper{  
        border-radius: 5px;
        -moz-border-radius: 5px;
        -moz-box-shadow: 0 0 1px rgba(0, 0, 0, 0.15);
        border: 1px solid #C3D4DB;
        width: 150px;
        height:150px;   
        behavior: url(PIE.htc);
        position:relative;
        z-index: 100;
    } 
```

我还使用以下代码添加了**PIE.htaccess**

```
AddType text/x-component .htc 
```

*我的 IIS 服务器已配置为 .hta 作为 text/x-component*

**所有文件都在这里**

```
C:\inetpub\wwwroot\testing 
```

我在 IE8 中没有圆角。我错过了什么？

**如果我按 F12 -> 查看 css -> 取消选中`behavior:url(PIE.htc); border-radius:5px`-> 然后再次检查，它可以工作，但是当我刷新页面时，圆角会丢失。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T08:21:19.220

通过下载压缩文件（PIE.htc）解决。未压缩的文件 (PIE_uncompressed.htc) 不起作用。

# ruby-on-rails - 具有复杂遗留模式的 Rails 开发/测试开发策略

> ID：13203951
> 
> 赞同：0
> 
> 时间：2012-11-02T22:35:56.673
> 
> 标签：ruby-on-rails, legacy-database

在使用现有应用程序正在使用的遗留模式开发 Rails 应用程序时，如果表在整个模式中对外部 id 列具有 NOT NULL 约束，为了创建/保存模型以进行测试，这些关联需要存在模型，以及它们的关联等。因此，根据需要一次创建一个模型并使用它进行测试并不容易。

就测试而言，如果您使用 FactoryGirl 并且想要创建和保存模型实例以从控制器返回等，这似乎是一个问题，当涉及所有关联依赖项时。另一种选择是模拟，但模拟可能会花费更多时间，并且它不允许您轻松进行集成测试。另一种是使用固定装置，但这些固定装置既费时又脆弱。另一种方法是使用生产数据预先填充测试数据库，但这并不能解决测试中对工厂等/已知数据的需求，Rails 通常希望从测试环境的干净数据库开始。

当你有一个现有的复杂模式时，你会使用什么策略来开发模型、测试等，并且你正在将 Rails 应用程序连接到 - 不仅用于读取数据，还用于写入现有产品正在使用的现有模式应用？（即“海上重造”问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T03:29:08.033

当我们第一次开始解决这个问题时，我正在寻找可以从现有模式自动生成模型的东西。我找到了 Dr. Nic 的魔法模型生成器，但它只说明在 Rails 2.x 中有效。我运行了一个 Rails 2.x 环境（忘记它工作的特定版本），但它似乎没有多大帮助，所以我编写了一个脚本来生成我们的模型。然而，当我们开始开发时，我们有很多模型，所以我们开始尝试移除我们不需要的模型，然后需要注释掉与不再存在的模型的关联，但其中一些是必需的/NOT NULL 外键，所以我们现在不得不将它们移回并取消注释，比我们想象的要多。

在此过程中，我们确实编写并发现了一些有用的东西，并非所有我们都使用过，但它们可能对其他人有帮助：

*   [https://github.com/influitive/apartment](https://github.com/influitive/apartment)
*   [https://github.com/karledurante/secondbase](https://github.com/karledurante/secondbase)
*   [https://github.com/drnic/composite_primary_keys](https://github.com/drnic/composite_primary_keys)
*   [https://github.com/garysweaver/activerecord-define_nils](https://github.com/garysweaver/activerecord-define_nils)
*   [https://github.com/garysweaver/activerecord-native_db_types_override](https://github.com/garysweaver/activerecord-native_db_types_override)
*   [https://github.com/garysweaver/modelist](https://github.com/garysweaver/modelist)
*   [https://github.com/garysweaver/stepford](https://github.com/garysweaver/stepford)
*   [https://github.com/garysweaver/structure_sql_to_migration](https://github.com/garysweaver/structure_sql_to_migration)

至于测试数据设置，我开始写一个工具来自动化 FactoryGirl 工厂的开发，叫做[Stepford](https://github.com/garysweaver/stepford)并写了[Modelist](https://github.com/garysweaver/modelist)来帮助我们测试模型、解决循环依赖和识别模型依赖，所以我们不必包含所有自动生成的模型.

到目前为止，真的，我想出的唯一答案，也听到其他人的说法是，用不同的技术重建现有的应用程序，即使是零碎的，也是困难的、缓慢的和容易出错的。

# java - Spring 表单处理表单异常

> ID：13203952
> 
> 赞同：-2
> 
> 时间：2012-11-02T22:36:03.007
> 
> 标签：java, model-view-controller, spring-mvc

当我去形成网站`Spring`throw exeptions：

```
01:34:09,257 ERROR [org.springframework.web.servlet.tags.form.LabelTag] (http-localhost-127.0.0.1-8080-1) Neither BindingResult nor plain target object for bean name 'name' available as request attribute: java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'name' available as request attribute
    at org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:141) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:174) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:194) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.tags.form.LabelTag.autogenerateFor(LabelTag.java:129) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.tags.form.LabelTag.resolveFor(LabelTag.java:119) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.tags.form.LabelTag.writeTagContent(LabelTag.java:89) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.apache.jsp.WEB_002dINF.pages.person_jsp._jspx_meth_form_005flabel_005f0(person_jsp.java:112)
    at org.apache.jsp.WEB_002dINF.pages.person_jsp._jspService(person_jsp.java:67)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) [jbossweb-7.0.13.Final.jar:]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:253) [jbossweb-7.0.13.Final.jar:]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:840) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:622) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:560) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:488) [jbossweb-7.0.13.Final.jar:]
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:734) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]

01:34:09,275 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/SpringMVCreName].[jsp]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet jsp threw exception: java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'name' available as request attribute
    at org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:141) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:174) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:194) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.tags.form.LabelTag.autogenerateFor(LabelTag.java:129) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.tags.form.LabelTag.resolveFor(LabelTag.java:119) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.tags.form.LabelTag.writeTagContent(LabelTag.java:89) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.apache.jsp.WEB_002dINF.pages.person_jsp._jspx_meth_form_005flabel_005f0(person_jsp.java:112)
    at org.apache.jsp.WEB_002dINF.pages.person_jsp._jspService(person_jsp.java:67)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) [jbossweb-7.0.13.Final.jar:]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:253) [jbossweb-7.0.13.Final.jar:]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:840) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:622) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:560) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:488) [jbossweb-7.0.13.Final.jar:]
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:734) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]

01:34:09,292 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/SpringMVCreName].[mvc-dispatcher]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet mvc-dispatcher threw exception: java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'name' available as request attribute
    at org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:141) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:174) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:194) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.tags.form.LabelTag.autogenerateFor(LabelTag.java:129) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.tags.form.LabelTag.resolveFor(LabelTag.java:119) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.tags.form.LabelTag.writeTagContent(LabelTag.java:89) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.apache.jsp.WEB_002dINF.pages.person_jsp._jspx_meth_form_005flabel_005f0(person_jsp.java:112)
    at org.apache.jsp.WEB_002dINF.pages.person_jsp._jspService(person_jsp.java:67)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) [jbossweb-7.0.13.Final.jar:]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:326) [jbossweb-7.0.13.Final.jar:]
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:253) [jbossweb-7.0.13.Final.jar:]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:840) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:622) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:560) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:488) [jbossweb-7.0.13.Final.jar:]
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549) [spring-webmvc-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:734) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09] 
```

我有表格`person.jsp`：

```
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<html>
<head>
<title>Person form</title>
</head>
<body>
    <form method="POST" action="addPerson.html">

        <form:label path="name"></form:label>

        <form:label path="lastName"></form:label>

        <form:label path="age"></form:label>

        <input type="submit" value="Add Contact" />

    </form>

</body>
</html> 
```

和控制器：

```
@Controller
public class FormControler {

    @RequestMapping(value="/addPerson", method = RequestMethod.POST)
    private void contrler(@ModelAttribute("person")Person person, BindingResult result) {

        System.out.println("Name "+person.getName());

    }
    @RequestMapping(value="/person", method = RequestMethod.GET)
    public ModelAndView showContscts() {

        return new ModelAndView("person", "command", new Person());
    }

} 
```

并且`Person.java`：

```
public class Person {

    private String name;
    private String lastName;
    private String age;

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getLastName() {
        return lastName;
    }
    public void setLastName(String lastName) {
        this.lastName = lastName;
    }
    public String getAge() {
        return age;
    }
    public void setAge(String age) {
        this.age = age;
    }

} 
```

还有`index`网站`<a href`：

```
<!DOCTYPE html>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<html>
<body>

    <a href="person">Person</a>

</body>
</ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:38:01.653

您必须通过这种方式将表单绑定到模型：

```
<form:form method="POST" action="addPerson.html" modelAttribute="person">
    <form:label path="name"></form:label>
    <form:label path="lastName"></form:label>
    <form:label path="age"></form:label>
    <input type="submit" value="Add Contact" />
</form: form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T06:10:58.150

你有你在 jsp 文件中的形式：假设 jsp 名称是 person.jsp

```
<form:form method="POST" action="addPerson" modelAttribute="person">
    <form:label path="name"></form:label>
    <form:label path="lastName"></form:label>
    <form:label path="age"></form:label>
    <input type="submit" value="Add Contact" />
</form: form> 
```

现在加载 person.jsp 的操作方法应该是这样的：

```
@Controller
public class FormControler {

    @RequestMapping(value="/addPerson", method = RequestMethod.POST)
    private void contrler(@ModelAttribute("person")Person person, BindingResult result)  { 
        System.out.println("Name "+person.getName());
    }

    // Your this method is going to show pseron jsp page
    // dont return model and view, instead try this

    @RequestMapping(value="/person", method = RequestMethod.GET)
    public String showContacts(Model model) {
        // your jsp demands Person.java as modelAttribute
        // add that POJO in model and send along with your jsp

        model.addAttribute("person", new Pseron()); // this attribute name should be same as it is in modelAttribute of jsp form
        return "person";
    }
} 
```

试试这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T21:57:50.567

我使用本主题中的建议解决了我的问题，但我也将名称`ModelAndView("person", "command", new Person())`从更改`command`为`person`。

# jsf-2 - 如何在 JSF 中清除 SessionMap() 而不会在引用此地图时获得 null

> ID：13203953
> 
> 赞同：1
> 
> 时间：2012-11-02T22:36:04.787
> 
> 标签：jsf-2

我使用 tomcat 7.0 和 JSF 2.1，当我在我的 .xhtml 页面中调用类似的东西时遇到问题： `#{homePage.get("userName")}`

我得到 javax.el.E​​LException: Caused by: java.lang.NullPointerException at mainPacket.HomePageBean.get(HomePageBean.java:35)

我有如下 ManagedBean：

```
@ManagedBean(name = "homePage")
@ViewScoped
public class HomePageBean {
    private Map<String, Object> map;

    public HomePageBean() {
        map= FacesContext.getCurrentInstance().getExternalContext().getSessionMap();
        //remove unnecessary values from sessionMap
        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().clear();

    }
    public String get(Object s){
        return map.get(s).toString();
    }
} 
```

当我不使用 clear 时，一切正常。但我想清除 sessionMap。如何解决？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T00:00:08.633

Java 是一种面向对象的语言。它不会在您每次请求时为您提供对象的*副本*。不，它为您提供了对内存中对象实例的*引用。*`Map#clear()`在你在 session map 上调用的那一刻`map`，你之前获得的引用基本上*也*被清空了，因为它指向的正是你刚刚清空的同一个 map 实例！

问题中没有提到您的具体功能要求，并且到目前为止发布的代码中的整个设计实际上没有任何意义（我无法想象任何明智的现实世界用例），因此很难向您提出正确的解决方案. 您能得到的最好的结果是添加空检查的建议。

```
public String get(Object s){
    Object value = map.get(s);
    return (value != null) ? value.toString() : null;
} 
```

顺便说一句，您应该非常小心地以这种方式突然清空会话映射。JSF 将视图范围和会话范围的托管 bean 存储在其中，并且它也被 flash 范围使用。

# java - 缩小位图会导致部分图像不可见

> ID：13203957
> 
> 赞同：1
> 
> 时间：2012-11-02T22:36:32.227
> 
> 标签：java, android, image-processing, bitmap, image-scaling

所以，我正在缩小位图文件，这样我就可以在不超过内存大小的情况下显示图像。[我在这里](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)参考了 android 教程。

我发现，这不仅缩小了我的图像尺寸，因此尺寸不会太大，而且还切断了图像的一部分。或者看起来是这样。我只希望图像占据屏幕的一部分。如何缩小位图并显示整个图像？

如果您能提供任何帮助、想法或建议，我将不胜感激！如果我似乎犯了一个简单的错误，请向我指出。谢谢！

这是代码：

```
 String fileName = data.getStringExtra("file");
    image.setImageBitmap(decodeSampledBitmapFromFile(fileName, screenWidth, screenHeight / 2));

    public static Bitmap decodeSampledBitmapFromFile(String file, int reqWidth, int reqHeight){
    //first decode with inJustDecodeBounds = true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(file, options);

    //calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

    //decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    System.gc();
    return BitmapFactory.decodeFile(file, options);

}

public static int calculateInSampleSize(BitmapFactory.Options options, int reqWidth, int reqHeight){
    //raw height and width of image
    final int imageHeight = options.outHeight;
    final int imageWidth = options.outWidth;
    int inSampleSize = 1;

    if (imageHeight > reqHeight || imageWidth > reqWidth){
        if (imageWidth > imageHeight){
            inSampleSize = Math.round((float) imageHeight / (float) reqHeight);
        }else{
            inSampleSize = Math.round((float) imageWidth / (float) reqWidth);
        }//end of second if statement
    }//end of first if statement
    return inSampleSize;
}//end of calculateInSampleSize

    public void getDisplaySize(){
    Display display = getWindowManager().getDefaultDisplay();
    Point size = new Point();
    //get the screen dimensions
    try{
        display.getSize(size);
        screenWidth = size.x;
        screenHeight = size.y;
        buttonHeight = view.getHeight();
        screenLength = (int) (screenHeight / 5);
        imageWidth = (int) (screenWidth / 4);
    }catch (NoSuchMethodError e){
        //for older versions of android
        screenWidth = display.getWidth();
        screenHeight = display.getHeight();
        buttonHeight = view.getHeight();
        screenLength = (int) (screenHeight / 5);
        imageWidth = (int) (screenWidth / 4);
    }//end of try/catch block

}//end of getDisplaySize() method 
```

# c - 转移套接字的 TCP 校验和计算

> ID：13203958
> 
> 赞同：4
> 
> 时间：2012-11-02T22:36:35.743
> 
> 标签：c, tcp, ip, freebsd, checksum

我有一个转换插座。我正在尝试更改数据包上的端口，因为我看到它们。当我这样做时 - 我是否需要重新计算 TCP 校验和和 IP 校验和？

我正在尝试这样做，但我在 tcpdump 中看到了重置数据包。我不知道这是否是因为我计算的 tcp 校验和错误，或者是否发生了其他事情。

我使用了这个站点的 cksum 方法：

[http://www.enderunix.org/docs/en/rawipspoof/](http://www.enderunix.org/docs/en/rawipspoof/)

我认为使用转移插座，如果我改变一件事，它应该是相当简单的，但似乎不是。是否有一个 TCP 校验和计算器可以用来验证我得到了正确的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:02:57.673

有关NAT/PAT 必须进行的校验和调整，请参阅[RFC 1631](http://www.ietf.org/rfc/rfc1631.txt)的第 3.3 节。您不必遍历整个数据包，只需根据您修改的字节调整校验和。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T22:39:38.247

您确实需要重新计算校验和。下面是计算的说明：[TCP/IP Checksum 计算](http://www.thegeekstuff.com/2012/05/ip-header-checksum/)

# c# - 3D WPF 中的最近邻图像采样

> ID：13203959
> 
> 赞同：2
> 
> 时间：2012-11-02T22:36:36.987
> 
> 标签：c#, .net, wpf, 3d, render

我正在拼命地尝试使用最近邻采样将图像渲染到 WPF 中的 3D 表面上。下面是我目前拥有的一个例子，虽然很模糊。ImageBrush 具有 64x64 纹理。

![示例图像。](../Images/f9e1f7107913c0f636f15ff832bdc3f0.png)

我尝试过用从无到有的`RenderOptions.BitmapScalingMode="NearestNeighbor"`任何地方来`Window`装饰XAML `ImageBrush`。我尝试编写自定义像素着色器，但无法获得令人满意的结果。甚至似乎我无法从着色器代码中设置纹理采样器的过滤模式。我已经考虑过变通方法，例如自己放大源纹理，但这仍然会在它开始插入下一个像素的两个边缘留下伪影。

底线：有什么方法可以在 WPF 中对 3D 模型实现最近邻图像采样的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-11T23:04:12.610

刚刚遇到同样的问题，[这个线程](https://stackoverflow.com/questions/12367928/mipmapping-in-wpf)中的答案提供了一种解决方法。

您可以将 VisualBrush 与 Image 一起使用，然后 WPF 将尊重图像上的 BitmapScalingMode。您还可以设置 CachingHint（也在 RenderOptions 上），这可能会提高性能（虽然没有测量它）。

```
var image = new Image { Source = new BitmapImage(new Uri("pack://application:,,,/Resources/image.png")) };
RenderOptions.SetCachingHint(image, CachingHint.Cache);
RenderOptions.SetBitmapScalingMode(image, BitmapScalingMode.NearestNeighbor);
var material = new DiffuseMaterial(new VisualBrush(image)); 
```

这适用于简单的场景，正如我所说我没有测量性能，但我想 VisualBrush 会伤害更大的东西（与 ImageBrush 相比）。当我遇到这个问题时，我个人将切换到[Direct3D 互操作](http://msdn.microsoft.com/de-de/library/system.windows.interop.d3dimage%28v=vs.110%29.aspx)并通过[SharpDX渲染场景。](http://sharpdx.org/)

# javascript - 为什么 JSLint 推荐 x === "undefined" vs. typeof x == "undefined"？

> ID：13203960
> 
> 赞同：9
> 
> 时间：2012-11-02T22:36:41.057
> 
> 标签：javascript, jquery, undefined, jslint, typeof

我对 JSLint 感到困惑。

我的代码最初检查是否`div:jqmData("me")`未定义，如下所示：

```
if ( typeof el.jqmData("me") == "undefined"  
   ? el.not(':jqmData(panel="main")').length > 0 
    : el.not(':jqmData(me="first")').length > 0 ){

} 
```

JSLint 抱怨我应该用`typeof`with替换检查`===`，所以我这样做了：

```
if ( el.jqmData("me") === "undefined"  
   ? el.not(':jqmData(panel="main")').length > 0 
     : el.not(':jqmData(me="first")').length > 0 ){

} 
```

JSLint 不再抱怨，但是我的嵌套 if 语句被破坏了，因为我现在总是以第二个 if 结束，`el.not(':jqmData(me="first")').length`即使我不应该这样做。

**问题**：
为什么 JSLint 推荐`===`over `typeof == undefined`？这怎么会打破我的逻辑？

感谢您的启发...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T22:47:48.003

你打破了比较逻辑。假设您使用

```
typeof el.jqmData("me") === "undefined" 
```

或者

```
el.jqmData("me") === undefined 
```

我个人会选择后者。

而且我个人认为在这种特殊情况下这种特殊的 JSLint 检查没有多大意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-19T06:41:24.937

zerkms 写的是正确的。[不过，来自https://github.com/jamesallardice/jslint-error-explanations/issues/10#issuecomment-18273885](https://github.com/jamesallardice/jslint-error-explanations/issues/10#issuecomment-18273885)的解释可以提供帮助：

比较发生了风格的现代化`undefined`。ES5 保证`undefined`是`undefined`. 在严格模式下，与新旧样式相比，`typeof "undefined"`检查类型的时间更长，现在不再需要检查 undefined 可以直接比较。

请参阅 JSLint 讨论： https: [//plus.google.com/101248256976407044060/posts/Q5oFnnxG9oL](https://plus.google.com/101248256976407044060/posts/Q5oFnnxG9oL)

克罗克福德基本上说`typeof "undefined"`检查时间更长更慢并且没有必要。

# java - 从 Channel 事件队列中读取 PCF 消息中的参数

> ID：13203965
> 
> 赞同：1
> 
> 时间：2012-11-02T22:37:41.483
> 
> 标签：java, ibm-mq

我正在使用 mo01 java 支持包从 SYSTEM.ADMIN.CHANNEL.EVENT Queue 读取事件消息。

以下是代码链接：

[mo01java](http://www-01.ibm.com/support/docview.wss?uid=swg24000676)

我可以从通道事件队列中消耗的 PCF 消息中读取所有参数名称/值，但以下参数除外，

```
原因限定词
指定限定原因码的标识符。
标识符
MQIACF_REASON_QUALIFIER。
数据类型
MQCFIN。
价值观
以下之一：
MQRQ_CHANNEL_STOPPED_OK
通道已以零返回代码或警告返回代码关闭。

MQRQ_CHANNEL_STOPPED_ERROR
通道已关闭，但报错且通道未处于停止或重试状态。

MQRQ_CHANNEL_STOPPED_RETRY
通道已关闭，处于重试状态。

MQRQ_CHANNEL_STOPPED_DISABLED
通道已关闭，处于停止状态。

回来
总是。

```

下面是部分代码，

```
Map reasonCodes = new HashMap();
   /** MQ 命令名称和值的映射。*/
   映射命令 = new HashMap();
   /** MQ 字符串名称和值的映射。*/
   映射 stringNames = new HashMap();

私有字符串 getStringName(int stringInt)
 {
   return (String)stringNames.get(new Integer(stringInt));
 }
 /**
  * 将常量整数转换为其 MQ 命令名称。
  * @param stringInt MQ 整数。
  * @return 由常量整数表示的 MQ 命令名称。
  */
 私有字符串 getCommandName(int stringInt)
 {
   return (String)commands.get(new Integer(stringInt));
 }
// 下面的方法从类中检索 int 代码的字符串值并存储在 HashMap 中

公共无效 setupMaps()
 {
   setupReasonNameSub("com.ibm.mq.pcf.CMQC", "MQRC", reasonCodes);
   setupReasonNameSub("com.ibm.mq.pcf.CMQCFC", "MQRC", reasonCodes);
   setupReasonNameSub("com.ibm.mq.pcf.CMQCFC", "MQCMD", commands);
   setupReasonNameSub("com.ibm.mq.pcf.CMQC", "MQCA", stringNames);
   setupReasonNameSub("com.ibm.mq.pcf.CMQCFC", "MQCA", stringNames);
   setupReasonNameSub("com.ibm.mq.pcf.CMQC", "MQIA", stringNames);
   setupReasonNameSub("com.ibm.mq.pcf.CMQC", "MQRQ", reasonCodes);
 }

无效读取PCFMessage（PCFMessage pcfMessage）{

枚举 pcfEnum = pcfMessage.getParameters();

标准输出 =
     标准输出 + "" + getReasonName(pcfMessage.getReason()) + "\n";

 而 (pcfEnum.hasMoreElements())
   {

     字符串参数名称；
     PCFParameter elt = (PCFParameter)pcfEnum.nextElement();
     参数名 = getStringName(elt.getParameter());

     标准输出 = 标准输出 + "";
     if (elt.getType() == CMQCFC.MQCFT_STRING_LIST)
     {
       字符串字符串[] = (String[])elt.getValue();
       for (int i = 0; i " + strings[i] + "\n";
       }
     }
     别的
       标准输出 = 标准输出 + elt.getValue().toString();
     标准输出 = 标准输出 + "\n";
   }

System.out.println(stdout);
}

```
输出：

MQRC_CHANNEL_STOPPED
QMGR1
CHL到CHLA
SYSTEM.CLUSTER.TRANSMIT.QUEUE
172.21.33.123
9
0
0
0
CHL到CHLA

```

```

如果一个频道被停止，我想知道它是因问题或正常而停止的确切原因。这个参数告诉我们频道停止的正确原因。

知道为什么这个参数不可检索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T13:29:29.767

Infocenter 中的[Event Messages/Channel Stopped](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/mo11740_.htm)页面列出了返回的 PCF 消息中的所有字段。我已将字段映射到您发布的回复：

```
QMgrName          MQCFST QMGR1
ReasonQualifier   MQCFIN 9
ChannelName       MQCFST CHL.TO.CHLA
ErrorIdentifier   MQCFIN 0
AuxErrorDataInt1  MQCFIN 0
AuxErrorDataInt2  MQCFIN 0
AuxErrorDataStr1  MQCFST ""
AuxErrorDataStr2  MQCFST ""
AuxErrorDataStr3  MQCFST ""
XmitQName         MQCFST SYSTEM.CLUSTER.TRANSMIT.QUEUE
ConnectionName    MQCFST 172.21.33.123

????              MQCFST CHL.TO.CHLA (See below) 
```

该`cmqc.h`文件将原因代码映射到它们的宏，如下所示：

```
 #define MQRQ_CHANNEL_STOPPED_OK        7
 #define MQRQ_CHANNEL_STOPPED_ERROR     8
 #define MQRQ_CHANNEL_STOPPED_RETRY     9
 #define MQRQ_CHANNEL_STOPPED_DISABLED  10 
```

我怀疑如果你要打印散列键和值，你得到的整数 9 将代表`MQIACF_REASON_QUALIFIER`你声称没有收到，以及排序哪些字符串返回 null。似乎不合适的一个值是额外的频道名称，我相信这实际上是`AuxErrorDataStr1`但我将其映射为 ???? 因为无法从提供的信息中确定。

如果我能预料到您的下一个问题，它可能是“好的，所以如果原因限定符说频道重试，那么在哪里`ErrorIdentifier`？” 答案是这`MQRQ_CHANNEL_STOPPED_RETRY`不是错误。这是一个正常的通道状态。该`ErrorIdentifier`字段的描述表明，如果通道*由于错误*而停止，该`ReasonQualifier`字段将包含 value `MQRQ_CHANNEL_STOPPED_ERROR`。在这种情况下，`ReasonQualifier`contains `MQRQ_CHANNEL_STOPPED_RETRY`so`ErrorIdentifier`预计不会包含任何内容。

顺便提一下，这`MQRQ_CHANNEL_STOPPED_*`有点用词不当。输入的通道`RETRY`不被认为已停止。它处于中间状态，`RUNNING`一旦重试用尽，它可能会结束，或者如果重试成功`STOPPED`，它可能会恢复。`RUNNING`但是，会生成事件以记录通道从运行或空闲状态变为功能较少的状态。

直接回答您的问题“知道为什么此参数不可检索吗？” 我挑战参数不可检索的前提。修改代码以打印键和值，我相信它将显示整数 9 值作为您正在寻找的原因限定符。

# java - 匿名类覆盖与传递接口，用于在 Java 中设计回调

> ID：13203966
> 
> 赞同：0
> 
> 时间：2012-11-02T22:37:49.060
> 
> 标签：java, interface, callback, anonymous

我知道在 Java 中执行回调类型功能的 3 种不同方法，但我并不完全了解每种方法的优缺点。

Java API 有很多本质上与此类似的方法：

```
Button b = new Button();
b.setClickListener(<implements ClickListener>); 
```

我使用“按钮”作为一个通用示例，而不是指任何特定的 API。

1.) 使用它的一种方法是让您的类实现接口并将其作为参数传递。要处理多个“按钮”，您必须使用调用者提供给回调的任何信息来区分。

```
MyClass implements ClickListener
...
Button b = new Button();
b.setClickListener(this);
...
public void click(ButtonEvent e)
{
... 
```

2.) 另一种方法是在现场制作一个匿名 ClickListener，并让其“click”方法包含您要执行的代码。这有一些额外的好处，因为您可以使用本地最终变量向回调添加新参数。

```
for(int i=0 ; i<10 ; i++)
{
  final int finali = i;
  buttons[i] = new Button();
  buttons[i].setClickListener(new ClickListener()
  {
    public void click()
    {
      buttonClick(finali);
    }
  });
} 
```

3.) 如果您正在编写调用回调的类，则最后一种方法是可能的。您可以匿名覆盖您想要捕获的回调方法。最明显的缺点是无法在对象的生命周期内切换回调。

```
for(int i=0 ; i<10 ; i++)
{
  final int finali = i;
  buttons[i] = new Button()
  {
    public void click()
    {
      buttonClick(finali);
    }
  }
} 
```

选项 3 在许多方面似乎是最“简单”的。不需要制作各种接口，回调函数总是在初始化的地方。

所以我的问题是：在考虑这些设计选择时，哪些因素会起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:44:38.267

选项 1 通常很方便，但如果您想监听多个对象，就会出现问题，因为您必须明确检查哪个对象触发了回调。

选项 2 避免了这个问题，因为每个侦听器都是独立的；它是三种方法中最灵活的一种。

选项 3 是个坏主意，因为您实际上是在接管 Button 而不是监听事件（即，这根本不是真正的回调）；您可能会干扰对按钮感兴趣的其他代码，并且代码将难以扩展。不要跟随黑暗面;-)。

而且通常您*不会*编写调用回调的类...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T22:48:21.987

前两个是同一个。唯一的区别是谁实现了监听器接口。它使用可观察/观察者设计模式。

最后一个使用继承，并且不太灵活：

*   构建按钮时，您只能设置单击时必须执行的操作
*   之后您无法更改此行为
*   您只能注册要在单击时执行的单个操作
*   您无法删除点击操作
*   你需要让你的类不是最终的，并且 click 方法是可覆盖的
*   您不能将相同的侦听器添加到多个按钮，从而导致代码重复
*   ...

第一个绝对是更好的选择（并且是 Swing、Android、JavaScript 事件等使用的解决方案）。一般来说，组合应该优先于继承。这个案例就是这个规则的完美例子。

# python - 是否可以通过十六进制使用正则表达式来查找电子邮件地址

> ID：13203967
> 
> 赞同：1
> 
> 时间：2012-11-02T22:37:50.840
> 
> 标签：python, regex, computer-forensics

不确定这是否可能，但我一直在考虑使用正则表达式来获取十六进制的电子邮件地址。基本上这是为了建立我的一些自动取证工具，但我在制作合适的正则表达式算法时遇到了问题。

电子邮件的正则表达式：/^([a-z0-9_.-]+)@([\da-z.-]+).([az.]{2,6})$/

十六进制值：

```
@ = 40
. = 2E
.com = 636f6d
_ = 5f
A/a = 41/61 [1]
Z/z = 5a/7a
- = 2d 
```

这就是我目前得到的（它只考虑小写和.com）。但它不起作用！我把一些简单的事情搞砸了吗？

```
"/^([61-7a]+)40([61-7a]+)23(636f6d)$/" 
```

[1] 我知道电子邮件只能小写，但我也需要考虑大写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:46:27.670

我认为您正在处理错误的问题。假设您使用的是标准的十六进制字符等效项，您应该首先将电子邮件转换为十六进制，然后使用电子邮件正则表达式。这可以通过简单地一次处理电子邮件两个字符并`chr(int('piece, 16))`在每件上使用来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T22:49:59.843

## 定义类

```
@ = 40
. = 2E
com = 636f6d
_ = 5f
a-z = (4[1-9a-f]|5[0-9a])
A-Z = (6[1-9a-f]|7[0-9a])
- = 2d 
```

## 替换成你的正则表达式

```
/^([a-z0-9_.-]+)@([\da-z.-]+).([a-z.]{2,6})$/

/^(((4[1-9a-f]|5[0-9a])|(6[1-9a-f]|7[0-9a])|[0-9]|5f|2E|2d)+)40(([0-9]|(4[1-9a-f]|5[0-9a])|(6[1-9a-f]|7[0-9a])|2E|2d)+)2E(((4[1-9a-f]|5[0-9a])|(6[1-9a-f]|7[0-9a])){2,6})$/ 
```

## 分解为...

```
/^
(
    (
        (4[1-9a-f]|5[0-9a])     // a-z
        |(6[1-9a-f]|7[0-9a])    // A-Z
        |[0-9]                  // 0-9
        |5f                     // _
        |2E                     // .
        |2d                     // -
    )+ // 1 or more times
) 
40
(
    (
        [0-9]                   // 0-9
        |(4[1-9a-f]|5[0-9a])    // a-z
        |(6[1-9a-f]|7[0-9a])    // A-Z
        |2E                     // .
        |2d                     // -
    )+ // 1 or more times
)
2E                              // .
(
    (
        (4[1-9a-f]|5[0-9a])     // a-z
        |(6[1-9a-f]|7[0-9a])    // A-Z
    ){2,6} // between 2 and 6 times
)$/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T23:13:32.420

我想我无法在任何地方发表评论，因为这个问题已经得到解答，但我认为这需要说明。

您采用的方法实际上比将每个单独的字符转换为等效的 ASCII 字符更糟糕。您实际上是将每个字节转换为**2 个 ASCII 字符**。

只是为了引用您作为最终/工作模式发布的 REGEX 模式的一部分：`4[0-9a-fA-F]` 您正在尝试查找 chars `@ABCDEFGHIJKLMNO`。你有`a-f` **并且** `A-F`因为你试图解释以大写或小写形式存储的十六进制代码。硬盘驱动器上的十六进制代码不会以大写或小写形式存储（它甚至不会以十六进制代码存储）。您正在考虑向您呈现这些数据的任何工具 - 以 ASCII 格式。

您使用什么工具来访问这些数据？

如果您使用 python 读取 dd 图像文件，那么您需要使用正则表达式来处理原始数据。这就像`[\x40-\x4f]`复制上述内容。这都是不必要的，因为`[@-O]`会完成同样的事情。

我不确定你是如何测试这个的，但我怀疑你正在将十六进制代码粘贴到在线 REGEX 测试引擎中。然后，该测试引擎将这些十六进制代码解释为 2 个单独的字符，而不是一个字节的一对半字节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T19:32:18.877

与您想要实现的目标稍有不同，但请看一下[Bulk Extractor](http://www.forensicswiki.org/wiki/Bulk_extractor)，它解析驱动器并划分出电子邮件地址并按流行顺序列出它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T22:50:11.480

我认为您需要查看 Python 中正则表达式的文档（http://docs.python.org/2/library/re.html）。

例如，[61-7a] 将匹配 6、1-7 或 a 中的任何一个。

# python - 将 str 连接到列表的好方法？

> ID：13203974
> 
> 赞同：5
> 
> 时间：2012-11-02T22:38:25.390
> 
> 标签：python, string, list, concatenation

有没有办法有效地连接 str 和 list？

```
inside = [] #a list of Items

class Backpack:
    def add(toadd):
        inside += toadd

print "Your backpack contains: " #now what do I do here? 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T22:53:27.947

听起来您只是想将字符串添加到字符串列表中。那只是`append`：

```
>>> inside = ['thing', 'other thing']
>>> inside.append('another thing')
>>> inside
['thing', 'other thing', 'another thing'] 
```

这里没有特定于字符串的东西。同样的事情适用于`Item`实例列表、字符串列表列表或 37 种不同类型的 37 种不同事物的列表。

通常，`append`这是将单个事物连接到列表末尾的最有效方法。如果你想连接一堆东西，并且你已经将它们放在一个列表（或迭代器或其他序列）中，而不是一次做一个，使用`extend`一次完成它们，或者只是`+=`代替（这意味着与`extend`列表相同）：

```
>>> inside = ['thing', 'other thing']
>>> in_hand = ['sword', 'lamp']
>>> inside += in_hand
>>> inside
['thing', 'other thing', 'sword', 'lamp'] 
```

如果您想稍后将该字符串列表连接成一个字符串，那就是`join`方法，正如 RocketDonkey 解释的那样：

```
>>> ', '.join(inside)
'thing, other thing, another thing' 
```

我猜你想更花哨一点，在最后一个事物之间加上一个“和”，如果少于三个，则跳过逗号，等等。但如果你知道如何分割列表以及如何使用`join`，我认为可以留给读者作为练习。

如果您试图反过来将列表连接到字符串，则需要以某种方式将该列表转换为字符串。您可以只使用`str`，但通常这不会给您想要的东西，并且您会想要`join`上面的示例。

无论如何，一旦你有了这个字符串，你就可以将它添加到另一个字符串中：

```
>>> 'Inside = ' + str(inside)
"Inside = ['thing', 'other thing', 'sword', 'lamp']"
>>> 'Inside = ' + ', '.join(inside)
'Inside = thing, other thing, another thing' 
```

如果您有一个不是字符串的列表并且想要将它们添加到字符串中，您必须为这些事物确定适当的字符串表示形式（除非您对 感到满意`repr`）：

```
>>> class Item(object):
...   def __init__(self, desc):
...     self.desc = desc
...   def __repr__(self):
...     return 'Item(' + repr(self.desc) + ')'
...   def __repr__(self):
...     return self.desc
...
>>> inside = [Item('thing'), Item('other thing')]
>>> 'Inside = ' + repr(inside)
... "Inside = [Item('thing'), Item('other thing')]"
>>> 'Inside = ' + str(inside)
... "Inside = [Item('thing'), Item('other thing')]"
>>> 'Inside = ' + ', '.join(str(i) for i in inside)
... 'Inside = thing, other thing' 
```

请注意，仅调用单个项目的s`str`列表；如果你想调用它们，你必须明确地这样做；这就是这部分的用途。`Item``repr``str``str(i) for i in inside`

把它们放在一起：

```
class Backpack:
    def __init__(self):
        self.inside = []
    def add(self, toadd):
        self.inside.append(toadd)
    def addmany(self, listtoadd):
        self.inside += listtoadd
    def __str__(self):
        return ', '.join(str(i) for i in self.inside)

pack = Backpack()
pack.add('thing')
pack.add('other thing')
pack.add('another thing')
print 'Your backpack contains:', pack 
```

当你运行它时，它将打印：

```
Your backpack contains: thing, other thing, another thing 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T22:40:30.523

你可以试试这个：

```
In [4]: s = 'Your backpack contains '

In [5]: l = ['item1', 'item2', 'item3']

In [6]: print s + ', '.join(l)
Your backpack contains item1, item2, item3 
```

与设置中的其他 Python 方法相比，该`join`方法有点奇怪，但在这种情况下，它的意思是“获取此列表并将其转换为字符串，用逗号和空格将元素连接在一起”。这有点奇怪，因为您指定了首先要加入的字符串，这有点不寻常，但很快就会成为第二天性:) 请参阅[此处](https://stackoverflow.com/questions/493819/python-join-why-is-it-string-joinlist-instead-of-list-joinstring)进行讨论。

如果您希望将项目添加到`inside`（列表），将项目添加到列表的主要方法是使用该`append`方法。然后，您可以使用`join`将所有项目作为字符串组合在一起：

```
In [11]: inside = []

In [12]: inside.append('item1')

In [13]: inside.append('item2')

In [14]: inside.append('item3')

In [15]: print 'Your backpack contains ' + ', '.join(inside)
Your backpack contains item1, item2, item3 
```

# c# - 如何使用 LINQ to XML 解析深度嵌套

> ID：13203975
> 
> 赞同：0
> 
> 时间：2012-11-02T22:38:25.330
> 
> 标签：c#, xml, linq, linq-to-xml

如何使用 LINQ 解析以下 XML？我需要为每个**Order**和**OrderCancelled**
插入数据库表*OrderNumber, ShipAddress, ShipCity,* ShipState 。 然后在一个单独的表中，我需要从**Returns/Amount**部分插入*OrderId 。*

 *******```
<!-- language: lang-xml -->
<?xml version="1.0" encoding="utf-8"?>
<OrdersReport Date="2012-08-01">
<Client>
<ClientId>1</ClientId>
  <Orders>
    <Order>
      <OrderNumber>1</OrderNumber>
      <ShipAddress>123 Main St.</ShipAddress>
      <ShipCity>MyCity</ShipCity>
      <ShipState>AZ</ShipState>
    </Order>
    <Order>
      <OrderNumber>2</OrderNumber>
      <ShipAddress>111 Main St.</ShipAddress>
      <ShipCity>OtherCity</ShipCity>
      <ShipState>AL</ShipState>
    </Order>
    <OrderCancelled>
      <OrderNumber>3</OrderNumber>
      <ShipAddress>111 Main St.</ShipAddress>
      <ShipCity>OtherCity</ShipCity>
      <ShipState>AL</ShipState>
    </OrderCancelled>
  </Orders>  
  <Returns>
    <Amount>
      <OrderId>2</OrderId>
      <OrderId>3</OrderId>
    </Amount>
  </Returns> 
</Client>
<Client>
<ClientId>2</ClientId>
<!-- Same Tree structure as Client 1 -->
</Client>
</OrdersReport> 
```

根据我得到的回复，我已经更新了这个问题。

```
var doc = XDocument.Load(rootFolder + "Generic.xml");
    var query = doc.Descendants("Order")
                   .Concat(doc.Descendants("OrderCancelled"))
                   .Select(x => new
                   {
                       OrderNumber = (int)x.Element("OrderNumber"),
                       ShipAddress = (string)x.Element("ShipAddress"),
                       ShipCity = (string)x.Element("ShipCity"),
                       ShipState = (string)x.Element("ShipState")
                   });           

    var amount = doc.Descendants("Amount")                         
                  .Select(y => new
                  {
                      OrderId = (int)y.Element("OrderId")
                  });

    foreach (var o in query)
    {
        Console.WriteLine(o.OrderNumber + o.ShipAddress + o.ShipCity);
    }
    foreach (var r in amount)
    {
        Console.WriteLine(r.OrderId);
    } 
```

金额枚举只给了我第一个 OrderId，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:41:44.877

听起来您只想要所有后代 Order/OrderCancelled 元素：

```
var doc = XDocument.Load("file.xml");
var query = doc.Descendants("Order")
               .Concat(doc.Descendants("OrderCancelled"))
               .Select(x => new {
                           OrderNumber = (int) x.Element("OrderNumber"),
                           ShipAddress = (string) x.Element("ShipAddress"),
                           ShipCity = (string) x.Element("ShipCity"),
                           ShipState = (string) x.Element("ShipState")
                       }); 
```

然后您可以遍历结果，这将是一个匿名类型的序列，并执行您需要的任何操作将其插入到数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T22:52:17.667

我认为没有连接是可能的：

```
var query = from o in xdoc.Descendants("Orders").Elements()
            select new 
            {
                OrderNumber = (int)o.Element("OrderNumber"),
                ShipAddress = (string)o.Element("ShipAddress"),
                ShipCity = (string)o.Element("ShipCity"),
                ShipState = (string)o.Element("ShipState")
            }; 
```*******

# android - OutOfMemoryError 通过 DefaultHttpClient 加载位图

> ID：13203978
> 
> 赞同：1
> 
> 时间：2012-11-02T22:38:38.967
> 
> 标签：android, apache-httpclient-4.x

我有一个简单的问题：虽然我正确使用了 sampleSize，但我的代码甚至没有到达`BitmapFactory`代码，因为`DefaultHttpClient`已经抛出异常。

这是我的代码：

```
 DefaultHttpClient client = new DefaultHttpClient();
                HttpGet request = new HttpGet(mSongInfo.imageLarge);
                HttpResponse response = client.execute(request);
                int sampleSize = 1;
                while (response.getEntity().getContentLength() / sampleSize
                        / sampleSize > 100 * 1024) {
                    sampleSize *= 2;
                }
                BitmapFactory.Options options = new BitmapFactory.Options();
                options.inSampleSize = sampleSize;
                final Bitmap bitmap = BitmapFactory.decodeStream(response
                        .getEntity().getContent(), null, options); 
```

这是一个例外：

```
0   java.lang.OutOfMemoryError: (Heap Size=11463KB, Allocated=7623KB, Bitmap Size=9382KB)
1       at org.apache.http.util.ByteArrayBuffer.<init>(ByteArrayBuffer.java:53)
2       at org.apache.http.impl.io.AbstractSessionInputBuffer.init(AbstractSessionInputBuffer.java:82)
3       at org.apache.http.impl.io.SocketInputBuffer.<init>(SocketInputBuffer.java:98)
4       at org.apache.http.impl.SocketHttpClientConnection.createSessionInputBuffer(SocketHttpClientConnection.java:83)
5       at org.apache.http.impl.conn.DefaultClientConnection.createSessionInputBuffer(DefaultClientConnection.java:170)
6       at org.apache.http.impl.SocketHttpClientConnection.bind(SocketHttpClientConnection.java:106)
7       at org.apache.http.impl.conn.DefaultClientConnection.openCompleted(DefaultClientConnection.java:129)
8       at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:173)
9       at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
10      at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
11      at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:359)
12      at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
13      at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
14      at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
15      at de.goddchen.android.easysongfinder.fragments.SongFragment$1.run(SongFragment.java:79)
16      at java.lang.Thread.run(Thread.java:1027) 
```

如您所见，代码甚至没有到达我检查图像大小（内容长度）并计算适当样本大小的部分。

我不知道简单的调用`DefaultHttpClient.execute(...)`已经将完整的内容加载到内存中。

难道我做错了什么？首先检索内容长度然后开始读取内容的正确方法是`InputStream`什么？

**编辑** 为了避免显示如何从 URL 加载图像的常见答案：我已经知道如何做到这一点，我也发布了上面的代码，那么你为什么要继续参考教程呢？我明确地非常清楚这个问题：为什么`HttpClient.execute(...)`已经获取了整个内容并将其存储在内存中而不是为`InputStream`我提供一个正确的？请不要发布任何关于如何`Bitmap`从 URL 加载的初学者教程...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T23:11:19.963

只需`HttpUrlConnection`用于那个简单的请求。

此外，您确定样本大小的方式是骇人听闻的，解码前的内容大小`Bitmap`不是确定`Bitmap`字节分配的好方法，请使用其尺寸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T11:01:16.340

还要检查方法`setFixedLengthStreamingMode`和`setChunkedStreamingMode`on `HttpURLConnection`。考虑到它们，您可以在下载大图像时减少内存消耗。

仅供参考，您可以查看可能提供您尝试实现的功能的库。有些还支持缓存，这可能非常方便。

以下是我所知道的几个

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

[https://github.com/novoda/ImageLoader](https://github.com/novoda/ImageLoader)

[https://github.com/kaeppler/ignition](https://github.com/kaeppler/ignition)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T22:45:59.213

我对从互联网加载的图像有类似的问题，我解决这个问题的方法是将图像保存在手机上的临时位置（您可以使用内部或外部存储，没关系）并从那里加载图像。将图像字节保存在文件中，使用缓冲区，不要在单个操作中读取和写入所有字节。

这样它就可以正常工作。我现在没有示例代码，我没有找到我使用这种技术的项目，但是您可以使用 google 方法从 http.xml 保存二进制资源。

**稍后编辑**：这里提出了另一个类似的问题：[关于从 android 中的 url 下载图像](https://stackoverflow.com/questions/7834305/regarding-download-image-from-url-in-android)

**稍后编辑**：

这个流不能被多次读取，在第一次读取时获取图像大小，然后再获取另一个信息。这是对您的错误的简短解释。编译器优化您的代码，以便能够从流中重新读取并将其放在内存中。发生这种情况时，会抛出 OOM。

# autohotkey - (AHK) 加载程序前确认。

> ID：13203979
> 
> 赞同：-4
> 
> 时间：2012-11-02T22:38:55.107
> 
> 标签：autohotkey

好奇如何制作一个弹出窗口，询问我是否要在加载程序之前加载它。例子：

```
^g::Run C:\GW2\gw2.exe 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T08:01:59.937

虽然看起来你没有做很多功课，但我会在这里提供一个解决方案。

```
^g::
MsgBox, 4100, , Would you like to launch GW2?, 5  ; 5-second timeout.
IfMsgBox, No
    Return  ; User pressed the "No" button.
IfMsgBox, Timeout
    Return ; Timed out.
run, C:\GW2\gw2.exe
Return 
```

# image-processing - findContours 错误“仅支持 8uC1 图像”

> ID：13203981
> 
> 赞同：16
> 
> 时间：2012-11-02T22:39:00.137
> 
> 标签：image-processing, opencv

尝试在二进制图像上运行 findContours"

```
Mat conv(image.size(), CV_8U);
image.convertTo(conv, CV_8U);
vector<vector<cv::Point> > contours;

findContours(conv, contours, CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE); 
```

抛出错误：

```
OpenCV Error: Unsupported format or combination of formats ([Start]FindContours support only 8uC1 images) in cvStartFindContours, 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-02T22:46:50.507

从[文档中](http://docs.opencv.org/2.4.3rc/modules/core/doc/basic_structures.html?highlight=convertto#void%20Mat::convertTo%28OutputArray%20m,%20int%20rtype,%20double%20alpha,%20double%20beta%29%20const)：

> C++: void Mat::convertTo(OutputArray m, int rtype, double alpha=1, double beta=0) const
> 参数：
> 
> **rtype** - 所需的输出矩阵类型，或者更确切地说，由于通道数与输入相同，因此深度；如果 rtype 为负数，则输出矩阵将与输入具有相同的类型。

您会看到通道数没有被 改变`convertTo`，这意味着您很可能获得了 3 个通道（r、g 和 b）。但是`findContours`需要单色图像。

您需要将图像转换为黑白：

```
cv::Mat bwImage;
cv::cvtColor(image, bwImage, CV_RGB2GRAY);
vector< vector<cv::Point> > contours;
cv::findContours(bwImage, contours, CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE); 
```

# python - 在python中获取广告网址

> ID：13203982
> 
> 赞同：0
> 
> 时间：2012-11-02T22:39:16.720
> 
> 标签：python, url

有没有办法可以使用 python 从网页中检索广告网址？例如 (http://www.quiltingboard.com/resources/) 我想检索顶部和右侧广告的 url。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:59:26.553

您可以使用任何 pythons html 解析器。我最喜欢的是[`lxml`](http://lxml.de/)因为它很快，但它需要外部依赖...

此外，如果您在任何网站上寻找广告，您可能需要[添加域列表](http://pgl.yoyo.org/as/serverlist.php?hostformat=adblockplus&showintro=1&startdate%5Bday%5D=&startdate%5Bmonth%5D=&startdate%5Byear%5D=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T23:32:59.300

Your best bet is to use Beautiful Soup (PyPI name `beautifulsoup4`) -- it gives a nice interface for getting what you want out of the page. Docs are [here](http://www.crummy.com/software/BeautifulSoup/bs4/doc/). It can use several different HTML/XML parsers, from the built-in stuff to `html5lib` or `lxml`.

# python - 通过 subprocess.call 设置环境以在远程 linux 机器上运行 python 脚本时出错

> ID：13203984
> 
> 赞同：1
> 
> 时间：2012-11-02T22:39:47.733
> 
> 标签：python, ssh, subprocess, env

我在 Windows 机器上运行 python 脚本来调用远程 linux 机器上的另一个 python 脚本。我正在使用带有 ssh 的 subprocess.call 来执行此操作，如下所示： `subprocess.call('ssh -i <identify file> username@hostname python <script_on_linux_machine>')`这工作正常。

但是，如果我想设置一些环境变量，如下所示： `subprocess.call('ssh -i <identify file> username@hostname python <script_on_linux_machine>', env={key1:value1})`它会失败。我收到以下错误： `ssh_connect: getnameinfo failed ssh: connect to host <hostname> port 22: Operation not permitted 255`

我尝试将 ssh 命令拆分为列表并传递。没有帮助。我试图通过运行其他“本地”（windows）命令`subprocess.call()`并尝试设置环境。它工作正常。我尝试`ls`在远程 linux 机器上运行其他命令（例如 ）。再次，`subprocess.call()`只要我不尝试设置环境，它就可以正常工作。

我究竟做错了什么？我可以在远程机器上为 python 脚本设置环境吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:59:01.000

要在远程端设置环境，您需要在远程端进行调用。尝试编写并上传执行此环境设置的包装脚本，例如

```
import subprocess
import sys

args = sys.argv[1:]
env = dict(zip(args[::2], args[1::2]))

subprocess.call(['python', 'script.py'], env=env) 
```

现在您只需在原始呼叫中传递此信息，例如

```
subprocess.call('ssh -i <identify file> username@hostname '
                'python <script_on_linux_machine> %s %s' % (key, value)) 
```

或者将字典转换为所需格式的一些更可扩展的方法。

# google-app-engine - 不确定如何解决“termsOfServiceNotAccepted”错误

> ID：13203988
> 
> 赞同：0
> 
> 时间：2012-11-02T22:40:25.657
> 
> 标签：google-app-engine, google-bigquery

**背景**：所以我是整个应用引擎的新手：我在 google 应用引擎上制作了一个应用，它在主页上接受用户输入，然后将信息发送到处理程序，然后使用 Big Query API 运行与我上传到 Big Query 的一些表进行同步查询。然后，处理程序将查询结果作为 json 发回。

**问题**：在部署中它主要工作，除了有时用户在尝试进行同步查询时经常会遇到此错误：

```
Error in runSyncQuery:

{
 "error": {
  "errors": [
 {
"domain": "global",
"reason": "termsOfServiceNotAccepted",
"message": "BigQuery Terms of Service have not been accepted"
 }
  ],
 "code": 403,
 "message": "BigQuery Terms of Service have not been accepted"
 }
} 
```

在做了一些搜索后，我发现了这个： [https ://groups.google.com/forum/#!msg/bigquery-announce/l0kwVNpQX5A/ct0MglMmYMwJ](https://groups.google.com/forum/#!msg/bigquery-announce/l0kwVNpQX5A/ct0MglMmYMwJ)

> 如果您以最终用户身份进行 API 调用，那么当最终用户未接受更新后的服务条款时，API 调用将很快返回错误。理想情况下，针对 BigQuery API 构建的应用程序应查找这些错误并将用户引导至 Google API 控制台以接受新条款。

除了我真的不明白如何做到这一点。

此外，我测试过我的应用程序的所有潜在用户帐户都可以访问启用了 Big Query API 的特定项目，并且可以使用该 API，为什么会出现这种情况？

此外，有时特定帐户不会遇到此问题。例如，如果我不断刷新并重新尝试使用该应用程序，它最终不会出现这个问题并且可以正常工作。但是下次这个错误会再次出现。我不明白用户如何可以在某个时间点接受服务条款，然后在未来某个时间点不接受另一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:09:50.763

是的，任何授权访问 BigQuery API 的最终用户都必须接受 Google Developers Console 提供的服务条款 (ToS)，网址为[https://developers.google.com/console](https://developers.google.com/console)

服务条款可能会发生变化，并且您的一些项目成员尚未接受更新后的 BigQuery ToS。如果您的一位用户在授权访问 BigQuery API 时收到此消息，您可以将他们重定向到[https://developers.google.com/console](https://developers.google.com/console)以接受服务条款。

回复：“特定帐户没有遇到此问题”-您能否确认这与特定项目的特定帐户一致发生？

# python - 网页抓取返回标签

> ID：13203991
> 
> 赞同：1
> 
> 时间：2012-11-02T22:40:35.813
> 
> 标签：python, web, screen-scraping

我对 HTML 完全是个菜鸟。在我写这篇文章之前，我必须查找“标签”和“类”。我知道这`urllib2`是现在这种事情的默认设置，但我无法让我的标题正常使用它（否则你会收到 403 access denied 错误），所以我`requests`改用了。

```
import requests
from bs4 import BeautifulSoup

url = 'http://www.grandexchangecentral.com/item.php?rid=4365'
r = requests.get(url, headers={'Referer': 'www.grandexchangecentral.com'})
soup = BeautifulSoup(r.text)
soup.find_all("div", {"class":"CurrentMarket"}) 
```

这返回`[<div class="CurrentMarket">219</div>]`，当我希望它是公正的时候`219`。有人可以帮我获得正确的输出吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T22:48:06.543

这很容易，假设你的返回值`find_all`被称为`markets`：

```
markets[0].contents[0] 
```

因为`markets`是一个列表，所以用 获取第一个项目`[0]`，然后它得到`contents`（也是一个列表，因此是另一个`[0]`）

也许看看[文档](http://www.crummy.com/software/BeautifulSoup/bs4/doc/ "文档")？

# java - 创建对象而不会导致堆栈溢出错误？

> ID：13203992
> 
> 赞同：1
> 
> 时间：2012-11-02T22:40:46.873
> 
> 标签：java, object, stack-overflow

所以，我的主类`private Secondary secondary = new Secondary();`在运行时会调用。在 Secondary 类中，顶部的代码显示`private Main main = new Main();`.

我如何能够使用 Secondary 类中的所有方法和变量，反之亦然，而不会导致堆栈溢出错误？

注意：它们不在构造函数中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T22:47:55.217

您的 Main 类正在创建一个 Secondary 实例，该实例正在创建一个 Main 实例......，这会导致堆栈溢出错误。

我认为您只是希望对象相互引用，因此不要在构造函数中创建其他类的新实例。将引用声明为实例变量，并使用 setter 方法存储对其他类型对象的现有引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T23:29:04.747

您可以使用[构建器模式](http://en.wikipedia.org/wiki/Builder_pattern)来处理实例字段的安全（非递归）初始化（通过设置器）。

# java - Unable to print arraylist of different data types using java

> ID：13203993
> 
> 赞同：1
> 
> 时间：2012-11-02T22:41:06.000
> 
> 标签：java, arraylist

I have a class:

**sample.java**

```
class sample

int val;
String str; 
```

**constructor**

```
sample(String str,int val)

str=this.str;

val=this.val 
```

**test.java**

```
ArrayList<sample> lst=new ArrayList<sample>();

lst.add(new sample("somedata",33)):

lst.add(new sample("somedata",33)): 
```

send(lst) sending arraylist obj over a network.but i was wondering how i can print the values in the arraylist. I tried using iterator but it is only showing object references.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T22:43:58.387

Override the `toString` method in your `sample` class. You could use:

```
@Override
public String toString() {
  return "str=" + str + " val=" + val;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T22:44:36.903

The easiest solution to this problem: implement the `toString` method on your `sample` class:

```
@Override
public String toString() {
  return str + ", " + val;
} 
```

Then you'll the field values of each instance.

Otherwise: access the fields from the loop:

```
for (sample s:lst) {
  System.out.println(s.str + ", " + s.val);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T22:44:17.530

override *toString()* method in your *class*

```
public String toString(){
return str+"," + value;
}

Iterator<Sample> itr = lst.iterator();
while(itr.hasNext()){
system.out.println(itr.next().toString());
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T23:21:17.697

Please use class names starting with an upper-case letter. Also your constructor is wrong, it should be

```
sample(String str,int val) {

this.str=str;

this.val=val

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T22:45:05.627

Implement toString and you'll be fine if all you want is just printing objects.

# php - 使用 Ajax/jQuery 将静态 PHP/MYSQL 查询转换为动态查询

> ID：13203998
> 
> 赞同：-1
> 
> 时间：2012-11-02T22:41:23.847
> 
> 标签：php, jquery, mysql, ajax, wordpress

我有一个计数器，它从数据库列中获取总和并在每次页面加载时更新。我需要将其转换为无需页面加载即可更新的实时计数器。

它在 WordPress 网站上，我希望不必在 WP 之外创建单独的页面来发送 JSON 数组。

1）有什么方法可以使用当前页面提交/接收 POST 数据？2）将简单的“SELECT * FROM”转换为动态的最佳过程是什么。ajax/jQuery 是正确的选择吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T01:54:52.963

使用以下命令每 5 秒更新一次值

```
window.setInterval(function(){
        $.getJSON('/getLatestCount.php', function(data) {
            $('#id_of_element_where_it_needs_to_be_put').html(data.count);
        });
}, 5000); 
```

如果查询需要包含表单的内容，请使用：

```
window.setInterval(function(){
        $.getJSON('/getLatestCount.php', $("#my_form_id").serialize(), function(data) {
            $('#id_of_element_where_it_needs_to_be_put').html(data.count);
        });
}, 5000); 
```

这不使用 POST 但 GET 但我认为这不应该是一个问题。在 http 文件中用于`$_GET['my_field_name']`访问表单值。

可以通过php输出json数据`echo json_encode()`

看着你的问题，你在问一些关于 wordpress 的问题，我不确定你是否知道如何做到这一点，所以我不会开始进入有关轮询和 websocket 的部门。这是最简单的方法。

# c++ - C++ 静态成员函数和变量

> ID：13203999
> 
> 赞同：16
> 
> 时间：2012-11-02T22:41:24.987
> 
> 标签：c++

我正在通过制作一个小型机器人模拟来学习 C++，但我在使用类中的静态成员函数时遇到了问题。

我的环境类定义如下：

```
class Environment {
    private:
        int numOfRobots;
        int numOfObstacles;

        static void display(); // Displays all initialized objects on the screen

    public:
        Robot *robots;
        Obstacle *obstacles;

        // constructor
        Environment();

        static void processKeySpecialUp(int, int, int); // Processes the keyboard events
}; 
```

然后在构造函数中初始化机器人和障碍物，如下所示：

```
numOfRobots = 1; // How many robots to draw
numOfObstacles = 1;
robots = new Robot[numOfRobots];
obstacles = new Obstacle[numOfObstacles]; 
```

这是使用这些变量的静态函数的示例：

```
void Environment::display(void) {
    // Draw all robots
    for (int i=0; i<numOfRobots; i++) {
        robots[i].draw();
    }
} 
```

当我尝试编译时，我收到错误消息，例如

```
error: invalid use of member ‘Environment::robots’ in static member function 
```

我尝试制作 numOfRobots、numOfObstacles、robots 和障碍物**static**，但后来我遇到了类似的错误

```
error: undefined reference to 'Environment::numOfRobots' 
```

我将不胜感激有人可以解释我做错了什么。谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-02T22:49:11.927

静态方法不能使用其类中的非静态变量。

这是因为静态方法可以在`Environment::display()`没有类实例的情况下调用，这使得在其中使用的任何非静态变量都是不规则的，即它们没有父对象。

您应该考虑为什么要为此目的使用静态成员。基本上，如何使用静态方法的一个示例如下：

```
class Environment
{
private:
    static int maxRobots;
public:
    static void setMaxRobots(int max)
    {
        maxRobots = max;
    }
    void printMaxRobots();
};

void Environment::printMaxRobots()
{
    std::cout << maxRobots;
} 
```

而且您必须在全局范围内初始化变量，例如：

```
int Environment::maxRobots = 0; 
```

然后，`main`例如在内部，您可以使用：

```
Environment::setMaxRobots(5);

Environment *env = new Environment;
env->printMaxRobots();
delete env; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T22:53:54.280

这里有 2 个问题 - 您尝试实现的算法以及它无法编译的机制。

为什么它不编译。

您正在混合静态和实例变量/方法 - 这很好。但是您不能从静态方法中引用实例变量。那就是“无效使用”错误。如果你仔细想想，这是有道理的。只有一种“静态无效显示（）”方法。因此，如果它试图引用非静态（实例）变量“robots”，它指的是哪一个？可能有 10 个……或者没有。

您尝试实现的逻辑。

看起来您想要一个管理 N 个机器人的环境类。这是完全合乎逻辑的。一种常见的方法是使 Environment 成为“单例” - 一个仅允许单个实例的实例变量。然后它可以根据需要分配尽可能多的机器人并自由引用它们，因为没有静态变量/方法。

另一种方法是直接将整个 Environment 类设为静态。然后保留一个（静态）机器人列表。但我认为现在大多数人会说选项＃1是要走的路。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T22:53:17.073

`static`成员是那些使用它们不需要实例化的成员，所以他们没有`this`, 因为`this`需要实例化：

```
class foo {
public
    void test() {
        n = 10; // this is actually this->n = 10
    }
    static void static_test() {
        n = 10; // error, since we don't have a this in static function
    }
private:
    int n;
}; 
```

如您所见，您不能调用实例函数或在`static`函数内使用实例成员。所以一个函数应该是静态的，如果它的操作不依赖于实例，并且如果你在你的函数中需要一个操作 require `this`，你必须想为什么我`static`在它 require的时候调用这个函数`this`。

一个成员变量是`static`如果它应该在 a 的所有实例之间共享`class`并且它不属于任何特定`class`实例，例如我可能想要一个我的类的已创建实例的计数器：

```
// with_counter.h
class with_counter {
private:
    static int counter; // This is just declaration of my variable
public:
    with_counter() {++counter;}
    ~with_counter() {--counter;}

    static int alive_instances() {
        // this action require no instance, so it can be static
        return counter;
    }
};

// with_counter.cpp
int with_counter::counter = 0; // instantiate static member and initialize it here 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-02T23:03:50.017

第一个错误说您不能在静态成员函数中使用非静态成员。

第二个说除了*声明它们之外，您还需要**定义静态成员您必须在类**之外*定义静态成员变量，在源文件中（而不是在头文件中），如下所示：

 **```
int Environment::numOfRobots = 0; 
```

您不需要任何静态成员。要拥有一个绝对正确且可移植的 GLUT 接口，请拥有一个文件级类型的对象`Environment`和一个使用 C 链接声明的文件级（非成员）函数。为方便起见，还有一个名为 的成员函数`display`。

```
class Environment 
{
 public:
   void display() { ... }
   ... 
};

static Environment env;
extern "C" void display () { env.display(); } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-02T22:48:38.503

静态成员函数是可以在没有此类实际对象的情况下调用的函数。但是，您的函数`Environment::display`使用变量`numOfRobots`和`robots`，它们都存在于类的特定实例中`Environment`。要么使`display`非静态（为什么你希望它是静态的？）或使机器人也成为静态成员`Environment`。

在您的情况下，我看不出制作`display`or的理由`processKeySpecialUp` `static`，因此只需将它们设为正常的成员函数即可。如果您想知道何时应该使用成员函数`static`，请考虑如果没有创建该类的对象（即没有调用构造函数），该函数是否有意义。如果函数在这种情况下没有意义，那么它不应该是`static`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T22:50:23.337

静态方法不能访问实例变量。如果要访问实例变量，请从方法中删除 static。如果这些值在所有机器人实例中都可以相同，则将它们设为静态变量，并且该方法可以保持静态。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-22T12:47:05.483

如果要在静态成员函数中访问成员变量，只需创建成员变量的静态指针并在函数中使用它！！！！！！！**