# StackOverflow 问答 13332000-13332999

# entity-framework - 如何模拟 EntityFramework 的 IQueryable 实现的局限性

> ID：13332002
> 
> 赞同：30
> 
> 时间：2012-11-11T14:25:49.477
> 
> 标签：entity-framework, mocking, iqueryable

我目前正在为 MVC4 应用程序中的存储库实现编写单元测试。为了模拟数据上下文，我首先采用了[这篇文章](http://refactorthis.wordpress.com/2011/05/31/mock-faking-dbcontext-in-entity-framework-4-1-with-a-generic-repository/)中的一些想法，但现在我发现了一些限制，这让我怀疑是否可以正确模拟`IQueryable`。

特别是，我看到了一些测试通过但代码在生产中失败的情况，并且我无法找到任何方法来模拟导致此失败的行为。

例如，以下代码段用于选择`Post`属于预定义类别列表的实体：

```
var posts = repository.GetEntities<Post>(); // Returns IQueryable<Post>
var categories = GetCategoriesInGroup("Post"); // Returns a fixed list of type Category
var filtered = posts.Where(p => categories.Any(c => c.Name == p.Category)).ToList(); 
```

在我的测试环境中，我尝试`posts`使用上面提到的假`DbSet`实现进行模拟，还尝试创建一个`List`实例`Post`并将其转换为`IQueryable`使用`AsQueryable()`扩展方法。这两种方法都在测试条件下工作，但代码实际上在生产中失败，除了以下例外：

`System.NotSupportedException : Unable to create a constant value of type 'Category'. Only primitive types or enumeration types are supported in this context.`

尽管像这样的 LINQ 问题很容易修复，但真正的挑战是找到它们，因为它们不会在测试环境中暴露出来。

我期望我可以模拟实体框架实现的行为是不切实际的`IQueryable`吗？

谢谢你的想法，

蒂姆。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-11-12T22:40:46.570

我认为模拟实体框架行为非常非常困难，如果不可能的话。首先也是最重要的，因为它需要深入了解 linq-to-entites 与 linq-to-objects 不同的所有特性和边缘情况。正如你所说：真正的挑战是找到它们。让我指出三个主要领域，而不是声称几乎详尽无遗：

**Linq-to-Objects 成功而 Linq-to-Entities 失败的情况：**

*   `.Select(x => x.Property1.ToString()`. *LINQ to Entities 无法识别“System.String ToString()”方法...*这适用于本机 .Net 类中的几乎所有方法，当然也适用于自己的方法。只有少数 .Net 方法会被翻译成 SQL。请参阅[CLR 方法到规范函数映射](http://msdn.microsoft.com/en-us/library/bb738681.aspx)。从 EF 6.1 开始，`ToString`顺便支持一下。但只有无参数重载。
*   `Skip()`没有前面`OrderBy`。
*   `Except`and `Intersect`: 会产生可怕的查询，这些查询会抛出*SQL 语句的某些部分嵌套得太深。重写查询或将其分解为更小的查询。*
*   `Select(x => x.Date1 - x.Date2)`: *DbArithmeticExpression 参数必须具有数字通用类型。*
*   （您的情况）`.Where(p => p.Category == category)`：*在此上下文中仅支持原始类型或枚举类型。*
*   `Nodes.Where(n => n.ParentNodes.First().Id == 1)`:*方法'First' 只能用作最终查询操作。*
*   `context.Nodes.Last()`: *LINQ to Entities 无法识别方法 '...Last...'*。这适用于许多其他`IQueryable`扩展方法。请参阅[支持和不支持的 LINQ 方法](http://msdn.microsoft.com/en-us/library/bb738550.aspx)。
*   （请参阅下面的 Slauma 评论）：：`.Select(x => new A { Property1 = (x.BoolProperty ? new B { BProp1 = x.Prop1, BProp2 = x.Prop2 } : new B { BProp1 = x.Prop1 }) })`类型*“B”出现在单个 LINQ to Entities 查询中的两个结构上不兼容的初始化中......*来自[这里](https://stackoverflow.com/q/10904375/861716)。
*   `context.Entities.Cast<IEntity>()`:*无法将类型“实体”转换为类型“IEntity”。LINQ to Entities 仅支持转换 EDM 基元或枚举类型。*
*   `.Select(p => p.Category?.Name)`. 在表达式中使用空传播会引发*CS8072 表达式树 lambda 可能不包含空传播运算符。* 这[可能有一天会得到解决](https://visualstudio.uservoice.com/forums/121579-visual-studio-ide/suggestions/10962684-add-support-of-null-propagating-operator-to-the-ex)。
*   这个问题：[为什么Select，Where和GroupBy的这种组合会导致异常？](https://stackoverflow.com/q/27152545/861716)让我意识到 EF 甚至不支持整个查询结构，而 L2O 对它们没有任何问题。

**Linq-to-Objects 失败而 Linq-to-Entities 成功的情况：**

*   `.Select(p => p.Category.Name)`: when `p.Category`is null L2E 返回 null，但 L2O 抛出*Object reference not set to an object of an instance。*这不能通过使用空传播来解决（见上文）。
*   `Nodes.Max(n => n.ParentId.Value)`有一些空值`n.ParentId`。L2E 返回一个最大值，L2O 抛出*Nullable 对象必须有一个值。*
*   使用`EntityFunctions`（`DbFunctions`从 EF 6 开始）或`SqlFunctions`.

**成功/失败但行为不同的情况：**

*   `Nodes.Include("ParentNodes")`: L2O 没有包含的实现。它将运行并返回节点（如果`Nodes`是`IQueryable`），但没有父节点。
*   `Nodes.Select(n => n.ParentNodes.Max(p => p.Id))`有一些空集合`ParentNodes`：两者都失败但有不同的例外。
*   `Nodes.Where(n => n.Name.Contains("par"))`：L2O 区分大小写，L2E 取决于数据库排序规则（通常不区分大小写）。
*   `node.ParentNode = parentNode`：对于双向关系，在 L2E 中，这也会将节点添加到父节点的节点集合中（*关系修复*）。不在 L2O 中。（请参阅[单元测试双向 EF 关系](https://stackoverflow.com/questions/13918205/unit-testing-a-two-way-ef-relationship)）。
*   空传播失败的解决方法`.Select(p => p.Category == null ? string.Empty : p.Category.Name)`：：结果相同，但生成的 SQL 查询还包含空检查，可能更难优化。
*   `Nodes.AsNoTracking().Select(n => n.ParentNode`. 这个**非常棘手！**. *使用* `AsNoTracking`EF`ParentNode`为 each 创建新对象`Node`，因此可以有重复项。*没有* `AsNoTracking`EF 重用 existing `ParentNodes`，因为现在涉及到实体状态管理器和实体键。`AsNoTracking()`可以在 L2O 中调用，但它不做任何事情，因此有无它永远不会有区别。

那么模拟延迟/急切加载以及上下文生命周期对延迟加载异常的影响呢？或者某些查询构造对性能的影响（例如触发 N+1 SQL 查询的构造）。还是由于重复或缺少实体键而导致的异常？还是关系修复？

我的意见：没有人会伪造这一点。最令人担忧的领域是 L2O 成功而 L2E 失败的地方。现在绿色单元测试的价值是什么？之前有人说过，EF 只能在集成测试中可靠地进行测试（例如[这里](https://stackoverflow.com/a/5610685/861716)），我倾向于同意。

但是，这并不意味着我们应该忘记以 EF 作为数据层的项目中的单元测试。有[办法做到这一点](https://msdn.microsoft.com/en-us/library/dn314429(v=vs.113).aspx)，但是，我认为，不是没有集成测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-25T20:55:21.863

我用`Entity Framework 6.1.3`using编写了一些单元测试，`Moq`并用它来覆盖`IQueryable`. 请注意，所有`DbSet`应该测试的都需要标记为`virtual`。来自微软自己的例子：

询问：

```
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Moq;
using System.Collections.Generic;
using System.Data.Entity;
using System.Linq;

namespace TestingDemo
{
    [TestClass]
    public class QueryTests
    {
        [TestMethod]
        public void GetAllBlogs_orders_by_name()
        {
            var data = new List<Blog>
            {
                new Blog { Name = "BBB" },
                new Blog { Name = "ZZZ" },
                new Blog { Name = "AAA" },
            }.AsQueryable();

            var mockSet = new Mock<DbSet<Blog>>();
            mockSet.As<IQueryable<Blog>>().Setup(m => m.Provider).Returns(data.Provider);
            mockSet.As<IQueryable<Blog>>().Setup(m => m.Expression).Returns(data.Expression);
            mockSet.As<IQueryable<Blog>>().Setup(m => m.ElementType).Returns(data.ElementType);
            mockSet.As<IQueryable<Blog>>().Setup(m => m.GetEnumerator()).Returns(0 => data.GetEnumerator());

            var mockContext = new Mock<BloggingContext>();
            mockContext.Setup(c => c.Blogs).Returns(mockSet.Object);

            var service = new BlogService(mockContext.Object);
            var blogs = service.GetAllBlogs();

            Assert.AreEqual(3, blogs.Count);
            Assert.AreEqual("AAA", blogs[0].Name);
            Assert.AreEqual("BBB", blogs[1].Name);
            Assert.AreEqual("ZZZ", blogs[2].Name);
        }
    }
} 
```

插入：

```
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Moq;
using System.Data.Entity;

namespace TestingDemo
{
    [TestClass]
    public class NonQueryTests
    {
        [TestMethod]
        public void CreateBlog_saves_a_blog_via_context()
        {
            var mockSet = new Mock<DbSet<Blog>>();

            var mockContext = new Mock<BloggingContext>();
            mockContext.Setup(m => m.Blogs).Returns(mockSet.Object);

            var service = new BlogService(mockContext.Object);
            service.AddBlog("ADO.NET Blog", "http://blogs.msdn.com/adonet");

            mockSet.Verify(m => m.Add(It.IsAny<Blog>()), Times.Once());
            mockContext.Verify(m => m.SaveChanges(), Times.Once());
        }
    }
} 
```

示例服务：

```
using System.Collections.Generic;
using System.Data.Entity;
using System.Linq;
using System.Threading.Tasks;

namespace TestingDemo
{
    public class BlogService
    {
        private BloggingContext _context;

        public BlogService(BloggingContext context)
        {
            _context = context;
        }

        public Blog AddBlog(string name, string url)
        {
            var blog = _context.Blogs.Add(new Blog { Name = name, Url = url });
            _context.SaveChanges();

            return blog;
        }

        public List<Blog> GetAllBlogs()
        {
            var query = from b in _context.Blogs
                        orderby b.Name
                        select b;

            return query.ToList();
        }

        public async Task<List<Blog>> GetAllBlogsAsync()
        {
            var query = from b in _context.Blogs
                        orderby b.Name
                        select b;

            return await query.ToListAsync();
        }
    }
} 
```

来源：[https ://docs.microsoft.com/en-us/ef/ef6/fundamentals/testing/mocking](https://docs.microsoft.com/en-us/ef/ef6/fundamentals/testing/mocking)

# c# - IntPtr 转换为 string.Format 中的十六进制字符串

> ID：13332009
> 
> 赞同：16
> 
> 时间：2012-11-11T14:26:40.430
> 
> 标签：c#, hex, tostring, intptr

请注意，我不太确定这个问题是否属于这个网站，但我尽量保持建设性。

为什么代码

```
IntPtr ptr = new IntPtr(1234);
Console.WriteLine(string.Format("{0:X8}", ptr));
Console.WriteLine(ptr.ToString("X8"));
Console.WriteLine(string.Format("{0:X8}", ptr.ToInt32())); 
```

输出

```
1234
000004D2
000004D2 
```

`IntPtr`为什么在格式化时要求十六进制格式不直接应用于参数？是否有任何已知的反对设计功能的论据 - ？
如果没有反对这种设计的论据，那么我应该通过哪个渠道将此问题报告给 Microsoft？

另请注意，`IntPtr`如果需要，调试器会以十六进制显示值。
我发现这将是一种非常直观且相对频繁的打印`IntPtr`值的方式。我还发现其他使用第一行的人编写的代码显然期望十六进制结果，但实际上结果不同。我也花了一些时间注意到这个问题，这使得理解日志消息变得复杂。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T14:37:08.923

对于使用格式字符串作为参数的[`String.Format`方法，参数必须实现](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)[`IFormattable`接口](http://msdn.microsoft.com/en-us/library/system.iformattable.aspx)。

由于[`IntPtr`类型](http://msdn.microsoft.com/en-us/library/System.IntPtr.aspx)没有实现`IFormattable`，该`String.Format`方法只会调用无参数`ToString`方法将`IntPtr`值转换为字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T14:36:35.120

这是因为在第一种情况下，因为`IntPtr`不是与 String.Format 一起使用的内置整数类型之一，`ptr.ToString()`所以调用它以返回字符串。由于格式仅在转换为字符串后应用，因此 X8 格式说明符无效。

# java - Java中的双倍与双倍

> ID：13332012
> 
> 赞同：15
> 
> 时间：2012-11-11T14:26:44.797
> 
> 标签：java, methods, double, parameter-passing

> **可能重复：**
> [Java：比较不同的双精度和双精度](https://stackoverflow.com/questions/12226757/java-different-double-and-double-in-comparison)

在我的一个实验室的示例 java 程序中，我有两种不同的方法，分别采用 Double 和 double 参数。
向它们传递参数时如何区分它们？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-11T14:33:44.067

`Double`参数可以是`null`什么时候`double`不能。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-11T14:39:55.843

首先，您需要了解这两种类型之间的区别。 `double`是原始类型，`Double`而是对象。

下面的代码显示了一个重载的方法，我假设它类似于您的实验室代码。

```
void doStuff(Double d){ System.out.println("Object call"); }
void doStuff(double d){ System.out.println("Primitive call"); } 
```

您可以通过多种方式调用这些方法：

```
doStuff(100);
doStuff(200d);
doStuff(new Double(100)); 
```

这些调用将导致：

```
"Primitive call"
"Primitive call"
"Object call" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-11T14:50:19.767

**-** `double`是原始类型，其中 as`Double`是*包装对象*。

**-** Wrapper 对象最常见的用途之一是与`Collection`.

**例如：**

```
List<Double> d = new ArrayList<Double>(); 
```

**-**在**Java 5**`Autoboxing`中，引入了一种称为**直接在两者之间转换的机制。**

**例如：**

```
double d = 10.41;
Double wrapper = d; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T14:35:07.297

`Double`是引用类型，`double`也是值类型。

> 该类`Double`将原始类型 double 的值包装在一个对象中。Double 类型的对象包含一个类型为 double 的单个字段。”[链接](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Double.html)

正如@Fess 提到的，因为`Double`它是引用类型，所以它可以是`null`.

如果你愿意，你可以明确地将 from 转换`Double`为`double`with`.doubleValue()`方法，反之亦然`new Double(1.0)`。

正如@millimoose 所说：

> 您应该使用`X.valueOf()`而不是`new X()`. 允许这些`valueOf`方法缓存装箱类型以减少内存使用。（不确定这是为`Double`s 完成的，但这是一个养成的好习惯。）”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-11T14:35:42.003

```
// Method A
public static void foo(Double d) {...}

// Method B 
public static void foo(double d) {...} 
```

* * *

显然，如果你传递一个`Double`对象，那么*方法 A*将被调用；即，如果你有类似的东西：

```
Double d = new Double(1.0); 
```

此外，如果您传递一个双重文字，您将调用*Method B*。有趣的是，如果你有类似的东西

```
double d = new Double(1.0); 
```

在这种情况下，*方法 B*也会被调用，因为**类型**是; 对象被拆箱为. 同样，如果您有：`d``double``Double``double`

```
Double d = 1.0; 
```

然后将调用*方法 A*`d` ，因为类型 of将是`Double`（`double`-literal 自动装箱为 a `Double`）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-11T15:09:52.507

Double 是一个包装类，而 double 是像 c/c++ 这样的原始类型。如上所述，Double 主要用于泛型，但在需要数值和适当的对象封装的任何地方也很有用。在大多数情况下，Double 和 double 可以互换使用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-11T14:39:53.740

您所拥有的是[方法重载](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)的示例。好的部分是编译器和 JVM 将根据您调用方法时使用的参数类型自动选择正确的方法。

# movie - Imdb上所有电影名称、演员、导演、作家的列表

> ID：13332015
> 
> 赞同：9
> 
> 时间：2012-11-11T14:26:54.170
> 
> 标签：movie, imdb, imdbpy

我正在开发一个网络应用程序，让用户可以告诉他们最喜欢的电影、导演、电影作家和演员。为此，我想为他们每个人提供一个下拉列表或自动完成，以便他们可以选择他们的选择。

为此：我需要一份 Imdb 上所有电影片名、演员、导演、作家的列表。

我检查了 Imdbpy，它似乎没有提供获取这些数据的方法。

会使用 imdbpy2sql.py 创建数据库并使用 sql 查询数据库，提供所需的数据吗？有没有其他方法可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T11:29:03.903

使用 imdbpy2sql.py 创建数据库并使用 SQL 查询数据库，将为您提供所需的数据。

您也可以尝试使用[Java 电影数据库](http://www.jmdb.de/)或[imdbdumpimport](https://code.google.com/p/imdbdumpimport/)将文本文件读入 SQL。

最后一个选项是自己解析IMDb 提供的[纯文本文件。](http://www.imdb.com/interfaces)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T08:14:42.040

我认为您最好的选择是解析此处分发的纯文本文件：[imdb interfaces](http://www.imdb.com/interfaces)。您可能只需要“电影”、“演员”、“女演员”和“导演”文件；它们很容易解析。

# javascript - 如何缩短 jQuery 函数？

> ID：13332020
> 
> 赞同：3
> 
> 时间：2012-11-11T14:27:50.317
> 
> 标签：javascript, jquery, jquery-callback

我有这个工作的 jQuery 函数。每 2 行都是相同的，除了细微的变化。我怎样才能缩短它？

```
$(".c1").delay(5000).fadeOut("slow", function() {
    $("#phone").addClass("c2").fadeIn("slow", function() {
        $(".c2").delay(5000).fadeOut("slow", function() {
            $("#phone").addClass("c3").fadeIn("slow", function() {
                $(".c3").delay(5000).fadeOut("slow", function() {
                    $("#phone").addClass("c4").fadeIn("slow", function() {
                        $(".c4").delay(5000).fadeOut("slow", function() {
                            $("#phone").addClass("c5").fadeIn("slow", function() {
                                $(".c5").delay(5000).fadeOut("slow", function() {
                                    $("#phone").addClass("c6").fadeIn("slow", function() {
                                        $(".c6").delay(5000).fadeOut("slow", function() {
                                            $("#phone").addClass("c7").fadeIn("slow", function() {
                                                $(".c7").delay(5000).fadeOut("slow", function() {
                                                    $("#phone").addClass("c8").fadeIn("slow", function() {
                                                        $(".c8").delay(5000).fadeOut("slow", function() {
                                                            $("#phone").addClass("c9").fadeIn("slow", function() {
                                                                $(".c9").delay(5000).fadeOut("slow", function() {
                                                                    $("#phone").addClass("c1").fadeIn("slow");
                                                                });
                                                            });
                                                        });
                                                    });
                                                });
                                            });
                                        });
                                    });
                                });
                            });
                        });
                    });
                });
            });
        });
    });
});
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T14:37:17.230

您可以使用这样的递归函数：

```
function phoneCall(i){
    $(".c" + i).delay(5000).fadeOut("slow", function() {
        $("#phone").addClass("c" + (i + 1)).fadeIn("slow", function() {
            if(i <= 9) phoneCall(i + 1);
        });
    });            
} 
phoneCall(1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T14:54:34.813

似乎该`#phone`元素是唯一获得`c_`该类的元素。如果是这样，您可以缓存元素并消除一堆代码。

```
var phone = $("#phone"), i = 0;

(function cycle() {
    i = ((i % 9) + 1);
    phone.addClass("c" + i).fadeIn("slow").delay(5000).fadeOut("slow", cycle);
})(); 
```

* * *

我们甚至可以通过内联增量来去掉一行代码。

```
var phone = $("#phone"), i = 0;

(function cycle() {
    phone.addClass("c" + ((++i % 9) + 1)).fadeIn("slow").delay(5000).fadeOut("slow", cycle);
})(); 
```

* * *

正如[@charlietfl 所](https://stackoverflow.com/users/1175966/charlietfl)指出的，您可能不希望它无限循环。如果没有，请添加`return`声明。

```
var phone = $("#phone"), i = 0;

(function cycle() {
    if (i === 9) return;
    phone.addClass("c" + ((++i % 9) + 1)).fadeIn("slow").delay(5000).fadeOut("slow", cycle);
})(); 
```

* * *

`0`FWIW，如果您使用基于索引，编号通常会更简单一些。

```
var phone = $("#phone"), i = -1;

(function cycle() {
    phone.addClass("c" + (++i % 9)).fadeIn("slow").delay(5000).fadeOut("slow", cycle);
})(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T14:46:31.123

你可以使用类似的东西：

```
function inception(fromInt, tillInt){
    if (fromInt < tillInt){
        $('.c' + fromInt).delay(5000).fadeOut("slow",function(){
            newInt = fromInt +1;
            $('#phone').addClass('c'+newInt).fadeIn("slow", function() {
                inception(newInt, tillInt));
            }
        });
    }else{
        if(fromint == tillInt){
            $('.c' + fromInt).delay(5000).fadeOut("slow");
        }
    }
} 
```

然后添加到您的代码中：

```
inception(1,9); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T14:38:48.067

我不知道这样的事情？

```
var num = 2;

var HandlerForC = function () {
    if (num < 10) {
        $("#phone").addClass("c" + num).fadeIn("slow", HandlerForPhone);
    } else {
        $("#phone").addClass("c1").fadeIn("slow");
    }

}

var HandlerForPhone = function () {
    num++;
    $(".c" + (num - 1)).delay(5000).fadeOut("slow", HandlerForC);
}
HandlerForPhone(); 
```

# javascript - 如何使用 javascript 将 webapge 上的图像保存到服务器？

> ID：13332023
> 
> 赞同：1
> 
> 时间：2012-11-11T14:28:44.887
> 
> 标签：javascript, html

我的网页上有一张 id='canvasaImg' 的图片。我想知道是否可以使用 javascript 将此图像保存到服务器，或者是否必须使用 php 来完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:50:47.913

此示例还有助于[将图像从 URL 保存到服务器](https://stackoverflow.com/questions/7711004/save-image-to-server-from-url)

[使用php将图像保存到服务器](https://stackoverflow.com/questions/2431695/saving-image-to-server-with-php)

[http://www.sitepoint.com/forums/showthread.php?403537-Save-picture-from-website-to-a-server](http://www.sitepoint.com/forums/showthread.php?403537-Save-picture-from-website-to-a-server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T14:30:02.313

**简短的回答 -**你不能单独使用 JavaScript 来做到这一点 - 你也必须使用一些服务器端代码。

**长答案 -** JavaScript 是一种客户端技术。它无法控制服务器。您可以做的是对包含图像路径的服务器执行 AJAX 调用，然后使用 PHP（或任何其他服务器端语言）[`file_get_contents()`](http://php.net/manual/en/function.file-get-contents.php)将图像复制到服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T14:43:05.140

不，你不能。

是的，您必须使用 PHP 或其他服务器端语言。

但是，还有另一种解释您的问题的方法可以给出答案：是的，您可以使用带有 Node.js 的 JavaScript 将图像保存到服务器[（](http://nodejs.org/)请注意，Node.js 是使用 JavaScript 的 Web 服务器）

# c# - Mono for Android 保存数据

> ID：13332025
> 
> 赞同：2
> 
> 时间：2012-11-11T14:28:50.237
> 
> 标签：c#, android, xamarin.android

我创建了一个主屏幕小部件，它从网站获取字符串表。我不想在每次更新时从网络上获取数据，而是想将表格保存到手机中，而不是在更新时从文件中读取。我正在使用 Mono for Android (C#)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:11:31.900

这是一种使用 XML 序列化将数据保存到文件系统的方法

```
 public static bool SaveData<T>(Context context, string fileName, T data)
    {
        try
        {
            using (Stream stream = context.OpenFileOutput(fileName, FileCreationMode.Private))
            {
                XmlSerializer xmlSerializer = new XmlSerializer(typeof(T));

                xmlSerializer.Serialize(stream, data);
            }

            return true;
        }
        catch (Exception)
        {
            return false;
        }
    } 
```

这是从文件系统加载序列化数据的方法

```
 public static T LoadData<T>(Context context, string fileName)
    {
        Java.IO.File file = context.GetFileStreamPath(fileName);

        if (file.Exists())
        {
            using (Stream openStream = context.OpenFileInput(fileName))
            {
               using (StreamReader reader = new StreamReader(openStream))
               {
                   try
                   {
                       XmlSerializer serializer = new XmlSerializer(typeof(T));

                       var loadedObject = serializer.Deserialize(reader);

                       return (T)loadedObject;
                   }
                   catch (Exception ex)
                   {
                       // TODO Handle error

                       return default(T);
                   }
               }
            }
        }
        else
        {
            throw new Java.IO.FileNotFoundException("Could not find file " + fileName);
        }
    } 
```

使用这些方法，您可以轻松地保存和加载任何可序列化的对象，例如`string[]`从网站检索到的对象。

```
 string[] data = { "one", "two", "three" };

  JavaIO.SaveData(this, "SavedData.txt", data);

  string[] loadedData = JavaIO.LoadData<string[]>(this, "SavedData.txt"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T14:51:42.060

如果它只是一个简单的列表，那么您可以使用 System.IO.File 加载/保存文本 - 您可以使用 JSON.Net 之类的东西将列表转换为文本。

如果您的数据更加增量，那么您可以改用 SQLite - 尝试 GitHub 上的 SQLite-net ORM 包装器

# php - 为什么我的 php 脚本每隔 10 分钟左右突然停止一次？

> ID：13332028
> 
> 赞同：1
> 
> 时间：2012-11-11T14:29:14.760
> 
> 标签：php

我已经设定

```
set_time_limit(0);
ignore_user_abort(true); 
```

在脚本的顶部。当它突然停止时很奇怪，因为浏览器仍然显示页面加载动画，没有输出，进程消失，我知道脚本没有完成工作。当它停止时，我以任何可能的方式输出，但我在页面上没有输出，页面的行为就像它仍在加载一样。但这个过程真的已经被切断了

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:32:19.810

我认为您需要编辑 PHP.ini 以提高超时限制，因为众所周知，在某些服务器上使用 PHP 设置设置将不起作用。

# winforms - 当 Combobox 的 BindingSource 属性在其中更改时，C# Windows 窗体 ComboBox 的 SelectionChangeCommitted 事件可防止选择更改

> ID：13332029
> 
> 赞同：4
> 
> 时间：2012-11-11T14:29:22.610
> 
> 标签：winforms, entity-framework, entity-framework-4, combobox, selecteditemchanged

使用 C# Entity Framework 对象如下 2

物品：

*   项目名
*   itemtypeid
*   商品价格
*   项目大小

物品种类：

*   类型标识
*   类型名称
*   时价
*   排版

在项目编辑表单上，有一个名为 typeidComboBox 的组合框绑定到 item.itemtypeid 和从 itemtype 数据源加载的项目列表数据源。

当 Form Loads Binding Sources 会这样设置。

```
 private void Form1_Load(object sender, EventArgs e)
    {
        db = new dbtestEntities();
        itemtypeBindingSource.DataSource = db.usertypes;
        itemBindingSource.DataSource = db.users;

        typeidComboBox.DataBindings.Clear();
        typeidComboBox.DataBindings.Add(new System.Windows.Forms.Binding("SelectedValue", this.itemBindingSource, "itemtypeid", true));
        typeidComboBox.DataSource = this.itemtypeBindingSource;
        typeidComboBox.DisplayMember = "typename";
        typeidComboBox.ValueMember = "typeid";
        typeidComboBox.SelectionChangeCommitted += typeidComboBox_SelectionChangeCommitted;
    } 
```

当我在 SelectionChangeCommitted 事件中添加如下代码时会出现问题。

代码：

```
private void typeidComboBox_SelectionChangeCommitted(object sender, EventArgs e)
    {
        (itemBindingSource.Current as item).itemprice = (itemtypeBindingSource.Current as itemtype).currentprice;
    } 
```

当 SelectionChangeCommitted 事件像 Combobox 的 BindingSource 属性在其中发生更改时，为什么 Combobox 选择取消并返回到旧值？

对不起我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T08:15:49.537

我不知道为什么。但它解决了我的问题：DataBinding.WriteValue 和 ComboBox.SelectedItem。

这是我的工作代码。

```
private void typeidComboBox_SelectionChangeCommitted(object sender, EventArgs e)
{
    foreach (Binding binding in (sender as ComboBox).DataBindings)
        {
            binding.WriteValue();
        }
    (itemBindingSource.Current as item).itemprice = ((sender as ComboBox).SelectedItem as itemtype).currentprice;
} 
```

# java - Java - 所有字符都有一个数值？

> ID：13332030
> 
> 赞同：2
> 
> 时间：2012-11-11T14:29:26.810
> 
> 标签：java, numerical

我正在为我的第一堂编程课做一些功课，耶！:)

但是，我需要做的一个程序是对用户输入的任何字符集进行排序。它可以是任何字符（& 或 $ 或 5 或 F）。

到目前为止，我只用字母做到了这一点：

```
if (a.compareTo(b)<=0 && a.compareTo(c)<=0) 
```

或数字：

```
if (a<=b && a<=c) 
```

但是java是否对所有字符应用数值，或者java如何对$和@等字符进行排序？

（我发现了类似的问题，但它们都是用 C++ 编写的，我是新手，无法理解相似之处，但我尝试过）

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T14:31:08.813

所有字符都有根据它们在 UNICODE 中的相应代码点分配的数值（最初的 127 个 UNICODE 代码点与[ASCII](http://www.asciitable.com/)代码匹配）。

具体来说，“at”符号的数字代码`@`是 64，美元符号“$”的代码是 36。

另请注意，数字也是字符，因此它们也具有数值（48 到 57）。

# python - Python 子进程命令参数

> ID：13332032
> 
> 赞同：2
> 
> 时间：2012-11-11T14:29:36.650
> 
> 标签：python, linux, arguments, subprocess

为什么如果我运行`subprocess.check_output('ls')`一切正常但是当我向命令添加参数时：`subprocess.check_output('ls -la')`我收到错误：

```
Traceback (most recent call last):
  File "", line 1, in 
  File "/usr/lib/python2.7/subprocess.py", line 537, in check_output
    process = Popen(stdout=PIPE, *popenargs, **kwargs)
  File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/usr/lib/python2.7/subprocess.py", line 1259, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory
```

如何将命令参数传递给`subprocess.check_output()`?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T14:30:21.093

您需要将参数拆分为一个列表：

```
subprocess.check_output(['ls', '-la']) 
```

可`subprocess`调用对象不会像 shell 那样将命令解析为单个参数。您要么需要自己执行此操作，要么需要`subprocess`明确使用 shell：

```
subprocess.check_output('ls -la', shell=True) 
```

不推荐使用后者，因为它会使您的应用程序暴露于安全漏洞。如果需要，您可以使用它`shlex.split()`来解析类似 shell 的命令行：

```
>>> import shlex
>>> shlex.split('ls -la')
['ls', '-la'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T05:56:21.483

你可能会发现[sh.py](http://amoffat.github.com/sh/)更友好：

```
import sh

print sh.ls("-la") 
```

# php - ckeditor 值等于下拉列表的结果

> ID：13332035
> 
> 赞同：1
> 
> 时间：2012-11-11T14:29:49.270
> 
> 标签：php, javascript, jquery, ckeditor

我想在我的表单上有一个下拉菜单，选项将是我数据库中内容的标题，我希望内容在被选中时显示在 ckeditor 中。

我想用 jquery 做类似下面的事情，需要一点帮助。

如果“下拉”值不是“请选择”CKeditor 值等于数据库中的 php 变量。结束语句

我很高兴在 php 中获取变量，所以只需要一些 jquery 来更改 ckeditor 值，这取决于下拉列表没有被默认。

希望这是有道理的，并提前感谢您的任何回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:40:49.233

**html:**

```
<select name="select" id="select">
    <option value="">Select</option>
    <option value="option1">Option 1</option>
    <option value="option2">Option 2</option>
    <option value="option3">Option 3</option>
    <option value="option4">Option 4</option>
    <option value="option5">Option 5</option>
</select>
<div id="result" style="border:1px solid #000;padding:10px;color:#ff0000;display:none;"></div> 
```

**jQuery**不要忘记包含 jquery 文件

```
$(document).ready(function(){
  $('#select').change(function() {
    var option = $(this).val();
    $.get('select.php', {select:option}, function(data) {
      $('#result').html(data).hide().fadeIn(1000);
    });
  });
}); 
```

**你的 php 文件 (select.php)**

```
if(!empty($_GET['select'])) {
    //call database and bring back the content for this selection and echo it
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T14:40:56.593

首先，您需要使用 php 填充选择框的“选项”元素，我相信您说过您对此感到满意。

然后，使用 jQuery：

```
$(document).ready(function(){
    $('#myCKEditorTextArea').text($('#mySelectBox').val());
}); 
```

用于页面加载时的预填充，或者：

```
$('#mySelectBox').change(function(){
        $('#myCKEditorTextArea').text($(this).val());
 }); 
```

当用户更改选择框值时用于填充。

# javascript - 检查 child_process 是否已在 node.js 中结束？

> ID：13332040
> 
> 赞同：4
> 
> 时间：2012-11-11T14:30:25.880
> 
> 标签：javascript, node.js, child-process

我正在使用 node.js 创建一个 cakefile，并且想知道 child_process 是否已经结束，然后再继续下一个。

```
{exec} = require 'child_process'
 exec 'casperjs test.js', (err, stdout, stderr) ->
        err && throw err
        log stdout
        if //exec has finished
          log "finished executing" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T14:35:22.423

当调用 的回调时[`exec`](http://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback)，进程已经终止。无需添加额外的检查。

对于[`spawn`](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)，你可以绑定一个[`exit`事件监听](http://nodejs.org/api/child_process.html#child_process_event_exit)器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-15T14:50:00.097

或者，您可以使用“execSync”，以便逐步进行

```
var c = require('child_process');
var cliCommand = 'ls';
var result = c.execSync(cliCommand); 
```

# flash - Adobe air - 如何让 air 应用程序始终运行？

> ID：13332042
> 
> 赞同：0
> 
> 时间：2012-11-11T14:30:36.243
> 
> 标签：flash, air

我正在使用 flash cs5 进行空中应用程序，该应用程序在启动时将不可见，但仍将在后台处于活动状态。因此，当用户单击桌面上的任何位置或任何其他位置时，应用程序应添加应用程序提供的对象。所以我的问题是，当应用程序变得不可见时，桌面会显示出来，当点击桌面时，它会激活桌面并且没有按预期发生。我应该怎么做才能让应用程序按预期工作？

如果您不清楚我刚才所说的想法，请观看 youtube 上的视频。“ [http://www.youtube.com/watch?v=bKzsWH0sQHs](http://www.youtube.com/watch?v=bKzsWH0sQHs) ”这是他在视频中展示的最后一个应用程序..

这是我的代码，

```
import flash.events.MouseEvent;
import flash.display.NativeWindowInitOptions;

stage.nativeWindow.alwaysInFront;
stage.displayState = StageDisplayState.FULL_SCREEN;

var nwio:NativeWindowInitOptions = new NativeWindowInitOptions();
nwio.transparent = true;
nwio.resizable = false;
nwio.minimizable = false;
nwio.systemChrome = NativeWindowSystemChrome.NONE;

stage.addEventListener(MouseEvent.CLICK, addThings);

function addThings(event:MouseEvent):void
{
    var test:Test = new Test();
    addChild(test);
    test.x = stage.mouseX;
    test.y = stage.mouseY;
} 
```

测试类是舞台上导出到类的对象..请帮助我..谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:29:31.463

我看不到 NativeWindowInitOptions 连接到实际窗口的位置（它必须是新打开的窗口）。如果要更改默认窗口，请编辑应用程序描述符。

# facebook - 在 php 中从外部应用程序向用户墙发布消息

> ID：13332045
> 
> 赞同：0
> 
> 时间：2012-11-11T14:30:44.247
> 
> 标签：facebook, facebook-graph-api

我想从我的管理员端向用户墙发布消息。我在 db 中收集了带有 fb id 的用户详细信息，他们喜欢我的应用程序。从管理员方面，我需要将消息发布到用户墙，没有垃圾邮件，它将是每月一次。现在我可以用我的登录名发送一些东西，但是当我检查另一个用户登录名（没有应用程序创建者）时，它不起作用。

****** *** ****编辑****** ** *** ** ***** 当我从我的 ID 发送时，我创建了应用程序，它的发送。问题是发送一些其他ID。实际上它的正常网页我只是使用 Facebook 进行身份验证**

 **在某些情况下我收到此错误（#1）创建共享时发生错误

请看我的代码

```
$access_token = $this->facebook->getAccessToken();          
            $args = array(
                'message'   => $this->input->post('message'),
                'link'      => 'http://www.facebook.com/XXXXXXXXXXXX',
                'caption'   => 'XXXXXXXXXXXXXX',
                'description' => 'XXXXXXXXXXXXXXXXXXXXXXXXX',
                'access_token' => $access_token,
            );

            try {
                //will be user id,to this id  i am sending message 
                $this->facebook->api("/".$user_details[0]->fb_id."/feed/",'post', $args);
                $feedbackMessage = "Your message successfully posted to users wall";    
            }
            catch(FacebookApiException $e) {

                $feedbackMessage = "Something went wrong";
                print_r($e->getMessage());

            } 
```**

# c++ - 使用过滤输入流提升 tcp 流会导致挂起

> ID：13332049
> 
> 赞同：1
> 
> 时间：2012-11-11T14:31:09.140
> 
> 标签：c++, boost, tcp, stream, boost-asio

考虑以下：

```
std::istream& operator>>(std::istream& is, message& p)
{
    typedef boost::archive::binary_iarchive in;  
    boost::iostreams::filtering_istream fis;
    fis.push(is, 0);
    in stream(fis);
    stream >> p;

    return is;
} 
```

其中`message& p`是可序列化的结构，并且`std::istream& is`是 tcp 流。

服务器在构造函数中等待客户端发送数据`in stream(fis);`，并在收到数据后继续。对象将`stream`tcp 流中的数据序列化到`message`对象中。

现在，通过添加以下内容实际过滤接收到的数据时：

```
std::istream& operator>>(std::istream& is, message& p)
{
    typedef boost::archive::binary_iarchive in;  
    boost::iostreams::filtering_istream fis;
    fis.push(boost::iostreams::zlib_decompressor(), 0);
    fis.push(is, 0);
    in stream(fis);
    stream >> p;

    return is;
} 
```

它*应该*从 tcp 流中读取数据，将其解压缩并将其序列化为`message`对象。但相反，它会`in stream(fis);`在数据发送 10-20 次或客户端断开连接后挂起并返回。

我已经尝试将 zlib 解压器的内部缓冲区设置为 0 和 1，其中 0 使断言失败，而 1 以某种方式只工作一次（在第二次迭代时抛出）。我还将`filtering_istream`缓冲区设置为 0，因此不会导致挂起。我还注意到，如果它`std::istream& is`是一个文件流，它可以正常工作。

那么为什么函数`in stream(fis);`在使用 tcp 流时会挂起呢？它是否与 zlib 处理缓冲区的方式有关，或者它是`filtering_istream`特定的东西？我也想听听一些解决方法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:58:12.060

您已经自己回答了问题；）

> 我还注意到，如果 std::istream& 是文件流，它可以正常工作。

`filtering_istream`正在轮询直到它获得 EOF，所以因为 TCP 流仅在客户端断开连接时结束 - 它不会结束流读取。在`ifstream`它上面简单地得到他的EOF并结束处理。

# visual-studio-2012 - 共享程序集在构建时重复

> ID：13332050
> 
> 赞同：0
> 
> 时间：2012-11-11T14:31:10.903
> 
> 标签：visual-studio-2012, mef, projects-and-solutions

可能是一个愚蠢的简单问题，但我似乎无法在网上找到答案。

我有一个项目 A、B 和 C 的解决方案。

项目 B 和 C 具有对项目 A 的引用集。

项目 B 和 C 的输出路径设置为项目 A 的输出目录的子目录。

项目 B 和 C 设置了一个参考路径以查看项目 A 的输出目录。

问题是，项目 A 被放置在项目 B 和 C 的输出目录以及它自己的目录中。除非我手动删除重复的程序集，否则这会导致使用 M​​EF 出现问题。

我得到这个结构：

```
[OutputPath]
    ProjectA.exe
    [Subdirectory]
        ProjectB.dll
        ProjectC.dll
        ProjectA.exe 
```

如何防止项目 B 和 C 在他们自己的输出目录中重建项目 A，以便在每次构建后都得到这个目录结构？

```
[OutputPath]
    ProjectA.exe
    [Subdirectory]
        ProjectB.dll
        ProjectC.dll 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:37:55.160

删除 B 和 C 中对 A 的引用 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T14:46:23.160

解决方案是查看引用本身的属性并将“复制本地”设置为 false。

# c# - 在 C# WCF 中通过 REST XML 发布对象返回 400 Bad request

> ID：13332055
> 
> 赞同：0
> 
> 时间：2012-11-11T14:31:33.070
> 
> 标签：c#, .net, xml, wcf, rest

我正在尝试使用带有 XML 的 REST 将对象发布到 WCF 服务，但我一直被`"error: (400) Bad Request"`抛出。我知道这个网站上有很多关于同样问题的帖子，但我似乎找不到解决方案。

**我的 WCF 服务代码：**

**iPhoneBookService.cs：**

```
 [OperationContract]
    [WebInvoke( UriTemplate = "/addentry/", 
                Method = "POST",
                BodyStyle = WebMessageBodyStyle.Bare, 
                RequestFormat = WebMessageFormat.Xml, 
                ResponseFormat = WebMessageFormat.Xml)]
    void AddEntry(Contact contact); 
```

**PhoneBookService.cs：**

```
 DataPhonebookDataContext dc = new DataPhonebookDataContext();
    public void AddEntry(Contact contact)
    {
        if (contact == null)
        {
            throw new ArgumentNullException("contact");
        }
        dc.Contacts.InsertOnSubmit(contact);

        try
        {
            dc.SubmitChanges();
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
        }           

    } 
```

**客户端（ASP 页）代码：**

```
 private WebClient client = new WebClient();
    HttpWebRequest req;
    protected void Page_Load(object sender, EventArgs e)
    {
        req = (HttpWebRequest)WebRequest.Create("http://localhost:1853/PhoneBookService.svc/addentry/");
        req.Method = "POST";
        req.ContentType = "application/xml; charset=utf-8";
        req.Timeout = 30000;
        client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);
    }
    protected void btnAddEntry_Click(object sender, EventArgs e)
    {
        var contact = new Contact(); //Contact class from WCF service reference
        contact.LastName = txtLastName.Text;
        contact.FirstName = txtFirstName.Text;
        contact.PhoneNumber = txtPhone.Text;

        //Code using Webclient
        //client.UploadData(new Uri("http://localhost:1853/PhoneBookService.svc/addentry/"), TToByteArray<Contact>(contact));

        //Code using webrequest
        byte[] buffer = TToByteArray<Contact>(contact);
        req.ContentLength = buffer.Length;
        Stream PostData = req.GetRequestStream();
        PostData.Write(buffer, 0, buffer.Length);
        PostData.Close();

        HttpWebResponse resp = req.GetResponse() as HttpWebResponse;
        Encoding enc = System.Text.Encoding.GetEncoding(1252);
        StreamReader loResponseStream =
        new StreamReader(resp.GetResponseStream(), enc);
        string response = loResponseStream.ReadToEnd();
    }
    private byte[] TToByteArray<T>(T item)
    {
        BinaryFormatter bf = new BinaryFormatter();
        MemoryStream ms = new MemoryStream();

        if (!typeof(T).IsSerializable)
        {
            throw new ArgumentException("The type of the argument must be serializable");
        }
        bf.Serialize(ms, item);
        return ms.ToArray();
    } 
```

该类`Contact`在 中定义，`DataContext`由 LinqToSQL 类生成。我将`Contact`类编辑为可序列化的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:44:42.113

您创建了一个监听 XML 发布请求的 Web 服务。这意味着请求消息格式必须是 XML。

另一方面，您的客户端以二进制格式序列化合约。尝试使用 XMLSerializer，而不是 BinaryFormatter。

该`WebMessageBodyStyle.Bare`属性不表示二进制数据。它仅表示消息未包含在带有元信息的附加 XML 标记中。

如果你想在你的服务中接收二进制数据，你应该将输入参数声明为流，然后在服务器上不进行自动序列化，你会完全按照客户端发送消息的方式接收消息。

# design-patterns - .NET 项目类别

> ID：13332057
> 
> 赞同：0
> 
> 时间：2012-11-11T14:31:39.280
> 
> 标签：design-patterns

我继承了一个大项目，它由一个 ASP.NET 应用程序和一个 VB6 应用程序组成。

我正在尝试重构代码。我的问题是：将单个项目拆分为多个项目有哪些指导方针？我在网上进行了研究，一些开发人员说为业务逻辑层和数据逻辑层创建单独的项目，但其他人说有一个实用程序项目。

其他开发人员使用哪些类别的项目？我正在寻找类别列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:47:07.270

如果您的系统非常复杂，您可以通过子系统将其拆分为多个项目。

Steve McConnell 在 Code Complete 中写道：

“通用子系统：

1.  业务规则：业务规则是您编码到计算机系统中的法律、法规、政策和程序。如果你正在编写一个工资系统，你可以对来自 IRS 的关于允许的预扣税数量和估计税率的规则进行编码。...

2.  用户界面。创建一个子系统来隔离用户界面组件，以便用户界面可以在不损坏程序其余部分的情况下发展。...

3.  数据库访问。您可以隐藏访问数据库的实现细节，这样大多数程序就不必担心操作低级结构的混乱细节，并且可以根据数据在业务问题级别的使用方式来处理数据. ...

4.  系统依赖。将操作系统依赖项打包到子系统中的原因与打包硬件依赖项的原因相同。例如，如果您正在为 Microsoft Windows 开发程序，为什么要将自己限制在 Windows 环境中呢？隔离 Windows 接口子系统中的 Windows 调用。如果您以后想将您的程序迁移到 Mac OS 或 Linux，您只需更改接口子系统。”

您还可以分离出通常创建用于撕裂循环引用并包含解决方案的通用接口和实用程序的 sonamed Common 项目。

# java - 如何将 JTextArea 的完整数据保存到 csv 文件的单个单元格中

> ID：13332058
> 
> 赞同：0
> 
> 时间：2012-11-11T14:31:56.117
> 
> 标签：java, swing, csv, jtextarea

我将 JTextArea 数据保存到 csv 文件中，但应用程序并未将整个数据保存在单个单元格中。

例如：在 JTextArea 我添加了如下数据

```
apple
mango
banana
guava 
```

在 .csv 文件中，它保存在四行而不是单行中。

下面是我如何保存数据的代码。

```
String address ;
address = textArea.getText();
writer.append(address);
writer.append(','); 
```

谁能建议如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:38:29.783

为什么不用逗号替换 的换行符`JTextArea`来为您提供单个 CSV 行：

```
writer.append(address.replace("\n", ",")); 
```

输出：

```
apple,mango,banana,guava 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:28:34.657

```
writer.append(address.replace("\n", "-"));

Use character other than ",". If not, data will be placed in consecutive cell of the same row 
```

# android - 仅更新 sqlite 列值的特定部分

> ID：13332060
> 
> 赞同：1
> 
> 时间：2012-11-11T14:32:02.430
> 
> 标签：android, sqlite, sql-update

我有 sqlite 数据库，其中我有表“脚本”在该表中我有列，在名称为“fname”的列上具有这样的值

```
111/222/333
111/222
111/222/444/555
111/888/777 
```

现在我想更新所有包含 222 的值，所以我想运行命令并将值更新为 222 到 000

```
111/000/333
111/000
111/000/444/555
111/888/777 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T17:21:45.247

您可以替换字符串出现...

```
update whatever_table
set whatever_field = replace(whatever_field, '222', '000')
where (WHATEVER) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T15:27:07.677

```
public Cursor query (String table, String[] columns, String selection, String[] selectionArgs, String groupBy, String having, String orderBy); 
```

执行查询以**查找**222

```
Cursor c=query.("scripts","fname",null,null,"/222/",null); 
```

获得游标对象后，您可以遍历包含所有具有“/222/”的行的游标。

# php - CakePHP 不断在 404 上注销

> ID：13332061
> 
> 赞同：0
> 
> 时间：2012-11-11T14:32:08.093
> 
> 标签：php, cakephp

不太清楚这可能是什么，尝试了很多来修复它。在本地也可以正常工作。

但是当我有一个 404 页面时，CakePHP 会注销当前用户。

使用 2.2.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:58:41.440

尝试不要将您的 Security.level 设置为高。如果将 CakePHP 会话 ID 设置为高，则会在请求之间重新生成 CakePHP 会话 ID，如果您有 404，它将导致它重置会话。

# stata - 创建特定矩阵

> ID：13332068
> 
> 赞同：0
> 
> 时间：2012-11-11T14:32:54.460
> 
> 标签：stata

假设我有变量

```
local a=10
local b=1
local c=0.25 
```

其中`a`必然是一个整数。现在，如何创建一个对角元素都等于且非对角元素都等于 的`a`时间`a`矩阵？我对Stata语言中的矩阵不是很熟悉，所以我希望有人能在这里帮助我。提前致谢。`b``c`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T09:48:19.520

```
. local a = 10

. local b = 1

. local c = 0.25

. matrix A = `b' * I(`a')

. mat li A

symmetric A[10,10]
     c1   c2   c3   c4   c5   c6   c7   c8   c9  c10
r1    1
r2    0    1
r3    0    0    1
r4    0    0    0    1
r5    0    0    0    0    1
r6    0    0    0    0    0    1
r7    0    0    0    0    0    0    1
r8    0    0    0    0    0    0    0    1
r9    0    0    0    0    0    0    0    0    1
r10    0    0    0    0    0    0    0    0    0    1

. matmap A A , m(cond(@ == 0, 0.25, @))

. mat li A

symmetric A[10,10]
     c1   c2   c3   c4   c5   c6   c7   c8   c9  c10
r1    1
r2  .25    1
r3  .25  .25    1
r4  .25  .25  .25    1
r5  .25  .25  .25  .25    1
r6  .25  .25  .25  .25  .25    1
r7  .25  .25  .25  .25  .25  .25    1
r8  .25  .25  .25  .25  .25  .25  .25    1
r9  .25  .25  .25  .25  .25  .25  .25  .25    1
r10  .25  .25  .25  .25  .25  .25  .25  .25  .25    1 
```

这里`matmap`必须使用`ssc inst matmap`.

顺便说一句，这里不需要当地人。您可以直接输入常量。

# regex - scala：正则表达式替换以点结尾的单词

> ID：13332069
> 
> 赞同：0
> 
> 时间：2012-11-11T14:33:06.453
> 
> 标签：regex, scala

我正在尝试以下操作：

```
scala> " in gral.  case".replaceAll("""(?imx) \bgral\.\b """, "(*)")
res14: java.lang.String = " in gral.  case" 
```

问题似乎是第二个\b，因为如果我尝试

```
scala> " in gral.  case".replaceAll("""(?imx) \bgral\. """, "(*)")
res16: java.lang.String = " in (*)  case" 
```

有用

我认为问题在于“。” 本身是一个单词分隔符，那么我如何指示一个不是点的单词分隔符？

- 编辑

我想要完成的是删除几个可能带有或不带有点后缀的缩写，就像这样（它们是街道名称）

```
"xxx av av. avenue" -> xxx
"yyy dr dr. doctor zzz" -> yyy zzz 
```

所以我正在尝试类似的东西

```
"xxx".replaceAll("""(?imx) \b(?:av\.|av|avenue|dr\.|dr|doctor)\b""", "") 
```

但我得到以下

```
scala> "xxx av av. avenue".replaceAll("""(?imx) \b(?:av\.|av|avenue|dr\.|dr|doctor)\b""", "")
res30: java.lang.String = "xxx  . "

scala> "yyy dr dr. doctor zzz".replaceAll("""(?imx) \b(?:av\.|av|avenue|dr\.|dr|doctor)\b""", "")
res31: java.lang.String = yyy  .  zzz 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:09:04.790

这个应该适合你：

```
replaceAll("""(?im)(^\s*)?\b(?:av\.?|avenue|dr\.?|doctor)(?!\w)\s*""", "") 
```

（见[这个演示](http://ideone.com/4PHGd8)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:10:28.533

我找到了一种方法

问题是实际上我想识别一个单独的单词（不使用分隔符），其中包含一个本身就是单词分隔符的字符，例如 m.buettner 正确注释

如果我只使用 \W （不是单词字符）作为分隔符，使用它，我会丢失我试图匹配的两个相邻单词，就像这样

```
scala> "dr. de. xxx av av. avenue av.".replaceAll("""(?imx) \W(?:av\.|av|avenue|dr\.|dr|doctor)\W""", "")
res3: java.lang.String = dr. de. xxxav.av. 
```

在这种情况下，我匹配第一个“av”（是的，还有空格）和第一个“大道”，我无法匹配第一个“av”。也不是最后一个。

所以我需要匹配分隔符，而不是消耗它们。

为此，我使用了前瞻和后瞻，如下所示：

```
scala> "xxx av av. avenue".replaceAll("""(?imx) (?<=\W)(?:av\.|av|avenue|dr\.|dr|doctor)(?=\W)""", "")
res4: java.lang.String = xxx   avenue

scala> "yyy dr dr. doctor zzz".replaceAll("""(?imx) (?<=\W|^)(?:av\.|av|avenue|dr\.|dr|doctor)(?=\W|$)""", "")
res5: java.lang.String = yyy    zzz 
```

还有一个更棘手的例子（这解释了为什么我必须匹配 \W 还要匹配 ^ 和 $）

```
scala> "dr. de. xxx av av. avenue av.".replaceAll("""(?imx) (?<=\W|^)(?:av\.|av|avenue|dr\.|dr|doctor)(?=\W|$)""", "")
res6: java.lang.String = " de. xxx    " 
```

我不是正则表达式大师，所以如果有人能想到更好的方法，请告诉我......

# css - 基础 CSS 框架，如何更改手风琴上的三角形

> ID：13332071
> 
> 赞同：2
> 
> 时间：2012-11-11T11:58:50.710
> 
> 标签：css, css-frameworks

我是第一次使用[基础框架](http://foundation.zurb.com/)，大部分情况下一切都很顺利。然而，我在使用手风琴时遇到了一些问题，因为我需要更改正在使用的打开/关闭指示器三角形。您可以在[此处的文档](http://foundation.zurb.com/docs/elements.php#accEx)中看到它。我查看了 css 并在foundation.css 的第 709-719 行找到了带有手风琴的部分，但没有要更改或调整的图像。

我想将此图标更改为我的 psd 中的那个，但就是不知道在哪里。有关需要更改的内容，请参见随附的屏幕截图。![在此处输入图像描述](../Images/29bc2fdead94031854735de3a0208a72.png)

我知道如何进行更改，在这种情况下，我只是找不到在哪里进行更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T13:26:03.493

您找不到图像，因为它不是图像。它是一个小正方形上粗边框的一部分。一侧是灰色的，另一侧是透明的，以创建三角形效果。

参见“presentation.css”第 852 行：

```
ul.accordion > li.active .title::after {
    content: "";
    display: block;
    width: 0;
    height: 0;
    border: solid 6px;
    border-color: #9D9D9D transparent transparent transparent;
} 
```

我使用了 Google Chrome 的对象检查器。

# jsf - 如何在 JSF 中冻结表头

> ID：13332073
> 
> 赞同：1
> 
> 时间：2012-11-11T14:33:30.897
> 
> 标签：jsf

在我的 JSF 2.1 项目中，我使用了一个表，其中我遇到了标题问题。如果我对标题和数据都使用单个表，则标题将与数据一起滚动。

如果我对标题和数据使用单独的表格，我会遇到对齐问题。

那么是否有任何标签或任何可能的方法来使用单个表来冻结标题和数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T18:24:46.957

HTML 有一个很好的答案：[HTML table with fixed headers?](https://stackoverflow.com/q/673153/1065197) . 您只需要记住 JSF 将生成纯 HTML。从那个答案改编代码，它附带了这个解决方案（注意：您需要添加 CDATA 验证才能在 Facelets 中的 JavaScript 中使用“<”和“>”）：

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"> 
    <h:head>
        <title>Table Body Scroll Test</title>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js">
        </script>

        <script>
        /* <![CDATA[ */
            function scrolify(tblAsJQueryObject, height) {
                var oTbl = tblAsJQueryObject;
                // for very large tables you can remove the four lines below
                // and wrap the table with <div> in the mark-up and assign
                // height and overflow property
                var oTblDiv = $("<div/>");
                oTblDiv.css('height', height);
                oTblDiv.css('overflow','scroll');
                oTbl.wrap(oTblDiv);
                // save original width
                oTbl.attr("data-item-original-width", oTbl.width());
                oTbl.find('thead tr td').each(function() {
                    $(this).attr("data-item-original-width",$(this).width());
                });
                oTbl.find('tbody tr:eq(0) td').each(function() {
                    $(this).attr("data-item-original-width",$(this).width());
                });
                // clone the original table
                var newTbl = oTbl.clone();
                // remove table header from original table
                oTbl.find('thead tr').remove();
                // remove table body from new table
                newTbl.find('tbody tr').remove();
                oTbl.parent().parent().prepend(newTbl);
                newTbl.wrap("<div/>");
                // replace ORIGINAL COLUMN width
                newTbl.width(newTbl.attr('data-item-original-width'));
                newTbl.find('thead tr td').each(function() {
                    $(this).width($(this).attr("data-item-original-width"));
                });
                oTbl.width(oTbl.attr('data-item-original-width'));
                oTbl.find('tbody tr:eq(0) td').each(function() {
                    $(this).width($(this).attr("data-item-original-width"));
                });
            }

            $(document).ready(function() {
                scrolify($('#tblNeedsScrolling'), 160); // 160 is height
            });
        /* ]]> */
        </script>
    </h:head>
    <h:body>
        <h:form id="myForm" prependId="false">
            <div style="width:300px;border:6px green solid;">
                <h:dataTable id="tblNeedsScrolling" value="#{tableScroll.data}" var="data" border="1" width="100%">
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="Data" />
                        </f:facet>
                        <h:outputText value="#{data}" />
                    </h:column>
                </h:dataTable>
            </div>
        </h:form>
    </h:body>
</html> 
```

示例的托管 bean：

```
@ManagedBean
@RequestScoped
public class TableScroll {
    private List<String> data;
    public TableScroll() {
        data = new ArrayList<String>();
        for(int i = 1; i <= 20; i++) {
        data.add("Name" + i);
        }
    }

    public List<String> getData() {
        return data;
    }

    public void setData(List<String> data) {
        this.data = data;
    }
} 
```

# c# - RaisePropertyChanged 不适用于集合

> ID：13332075
> 
> 赞同：2
> 
> 时间：2012-11-11T14:33:50.120
> 
> 标签：c#, windows-phone-7, binding, mvvm-light

我正在使用 mvvm-light，我注意到 RaisePropertyChanged 的​​这种奇怪行为。

xml:

```
<ListBox ItemsSource="{Binding Collection}"/>
<TextBlock Text="{Binding Text}"/> 
```

可观察类：

```
public class A : ObservableObject
{
    private string _b;
    public string B
    {
        get { return this._b; }
        set
        {
            this._b = value;
            this.RaisePropertyChanged("B");
        }
    }
} 
```

虚拟机：

```
public MainViewModel(IDataService dataService) { this.Collection = new List<A>(...); }

public RelayCommand Command1
{
    get
    {
        return this._command1 ?? (this._command1= new RelayCommand(() =>
        {
            this.Collection.Add(new A());
            this.Collection[2].B = "updated";
            this.RaisePropertyChanged("Collection");
            this.RaisePropertyChanged("Text");
        }));
    }
}

public RelayCommand Command2
{
    get { return this._command2?? (this._command2 = new RelayCommand(() => { this.Text++; })); }
}

public List<A> Collection { get; set; }
public int Text { get; set; } 
```

因此， RaisePropertyChanged("Collection") 不会更新绑定，而 RaisePropertyChanged("Text") 会更新。我可以通过多次执行 Command2 和之后的 Command1 来看到它。如果 Collection 是 ObservableCollection，则新元素会显示在视图中，但更新的项目不是，这意味着 ObservableCollection 的内部机制有效，但 RaisePropertyChanged 无效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T17:57:13.917

首先，对问题的解释：

在 Windows Phone 上，当为依赖属性设置值时，框架会在内部检查新值是否与旧值不同（可能出于优化目的）。当您引发`PropertyChanged`事件或直接将您的集合重新分配给`ItemsSource`属性（这只是`ItemsControl.ItemsSourceProperty`依赖属性的包装）时，框架会检测到该值实际上没有更改并且不会更新属性。因此，`ListBox`永远不会通知您的更改，也不会更新。

之所以`ObservableCollection`有效，是因为它使用了完全不同的机制：`ListBox`直接订阅`CollectionChanged`您的集合事件，因此不受依赖属性限制的阻碍。

* * *

现在，如何绕过这个限制？我能想到的唯一解决方法是：

1.  使用 a`ObservableCollection`而不是 a`List`
2.  分配`null`给`ItemsSource`您的财产`ListBox`，然后重新分配您的收藏
3.  将绑定`ListBox`到每次调用时都会返回不同集合的属性：

    ```
    public List<A> CollectionCopy
    {
        get
        {
            return this.Collection.ToList();
        }
    } 
    ```

# ios6 - UICollectionViewCell 不显示任何内容

> ID：13332077
> 
> 赞同：3
> 
> 时间：2012-11-11T14:34:10.087
> 
> 标签：ios6, uicollectionview

我有一个自定义 CollectionViewCell

```
@interface FBPicCell : UICollectionViewCell
@property (strong, nonatomic) IBOutlet UILabel *picby; 
```

在我的代码中，`viewDidLoad`我有

```
[self.fbpiccollectionView registerClass:[FBPicCell class]  forCellWithReuseIdentifier:@"fbpiccell"]; 
```

并在`cellForItemAtIndexPath`功能上

```
FBPicCell *cell = [cv dequeueReusableCellWithReuseIdentifier:@"fbpiccell" forIndexPath:indexPath];
cell.backgroundColor = [UIColor whiteColor];
[cell.picby setText:@"Pavan"];
[cell.picby setTextColor:[UIColor redColor]]; 
```

但我什么也没看到，只有白色边框。不知道我在哪里搞砸了。任何指针都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:25:09.803

我在注册您的通话时遇到了同样的问题，注册笔尖以及-

```
[collectionView registerNib:[UINib nibWithNibName:@"cellname" bundle:nil] forCellWithReuseIdentifier:@"cellname"]; 
```

这对我有用 问候

# android - 聆听相机动作

> ID：13332078
> 
> 赞同：1
> 
> 时间：2012-11-11T14:34:21.537
> 
> 标签：android, android-intent

每次用户使用设备相机拍照时是否可以接收到意图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:38:59.720

不，对不起。您可以使用 a`FileObserver`来监控设备上的标准照片目录，但这假设用户正在使用的应用程序正在那里存储照片。

# php - SELECT MAX BETWEEN 00:01 and 23:59 on set day - SQL

> ID：13332082
> 
> 赞同：0
> 
> 时间：2012-11-11T14:35:12.377
> 
> 标签：php, mysql, sql

我的 codeigniter 应用程序中有以下功能

```
function set_day_peak($days, $offset, $network_id){

    $days = $days + $offset;
    $query = $this->db->query("SELECT MAX(total_online)AS total FROM network_traffic
    WHERE network_id = '$network_id' AND timestamp >= NOW() - INTERVAL $days DAY 
    AND timestamp <= NOW() - INTERVAL $offset DAY");
    $data = $query->row();

    return $data->total;

} 
```

上面的函数确实返回一个值，但它不准确，我调用时需要什么

```
$this->set_day_peak(1,7,14) 
```

是让它在第 1 天从 00:01 到 23:59 返回 max(total_online)，偏移 7 天或（8 天前）。

由于我对 sql 并不出色，但我可以管理的唯一解决方案是使用 php 来设置时间戳，即`($day_start and $day_end)`然后使用`SELECT MAX BETWEEN`，但我想看看它是否可以用纯 SQL 完成。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T14:38:04.977

我想你想放弃时间部分，所以你可以使用日期功能来减少时间。

```
$query = $this->db->query("SELECT MAX(total_online)AS total FROM network_traffic
WHERE network_id = '$network_id' AND timestamp >= date(NOW() - INTERVAL $days DAY) 
AND timestamp <= date(NOW() - INTERVAL $offset DAY)"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T16:17:30.110

```
function set_day_peak($days, $offset, $network_id){

    $days = $days + $offset;
    $next = $days - 1;
    $query = $this->db->query("
       SELECT MAX(total_online) AS total
         FROM network_traffic
        WHERE network_id = '$network_id'
          AND timestamp >= DATE(NOW() - INTERVAL $days DAY) 
          AND timestamp <  DATE(NOW() - INTERVAL $next DAY)");
    $data = $query->row();

    return $data->total;
} 
```

这种格式（无论是否合法）使 SQL 结构清晰。DATE 函数截断其参数表达式的时间值部分。与时间戳的比较为时间分量“加零”。这应该选择给定 24 小时期间记录的所有值的最大值。不对称条件（'>=' vs '<'）很重要。

另一种表述是：

```
function set_day_peak($days, $offset, $network_id){

    $days = $days + $offset;
    $query = $this->db->query("
       SELECT MAX(total_online) AS total
         FROM network_traffic
        WHERE network_id = '$network_id'
          AND DATE(timestamp) = DATE(NOW() - INTERVAL $days DAY)");
    $data = $query->row();

    return $data->total;
} 
```

这可能效率不高，因为优化器使用索引 on 更加困难，`timestamp`因为函数调用 on `timestamp`。你应该试验一下。

# database - 数据库中的键值

> ID：13332085
> 
> 赞同：1
> 
> 时间：2012-11-11T14:35:41.677
> 
> 标签：database, primary-key

数据库中的主键可以是多值的吗？例如，如果学生有多个银行帐号，我们可以使用此属性作为键吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T14:52:50.400

*这是一个有趣的问题，因为根据 Cthulhu 的回答中给出的定义，这*两个银行账户对于用户都是唯一的，并且不会被任何其他行重复。

但是，由于您有效地定义了学生和银行帐户之间的一对多关系，因此您将银行帐户建立为一个单独的实体，而不是学生实体的一个属性。因此，您确实需要为学生寻找一个单独的唯一标识符以用作主键。

充其量，在这种情况下，您可以使用学生的“主要”银行帐户作为主键，并为与该键无关的备用银行帐户设置另一个字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T14:38:02.243

**[`Primary key`](http://en.wikipedia.org/wiki/Unique_key#Defining_primary_keys)**声明的非常定义

> 主键必须包含不能被任何其他行复制的特征。

因此，如果您有非唯一值，则不应将其用作主键。但是，您可以有一个扩展的主键，**跨越多个列。**

# ruby - 如何知道 Twitter 帐户的关注者最关注的帐户？

> ID：13332087
> 
> 赞同：4
> 
> 时间：2012-11-11T14:35:51.617
> 
> 标签：ruby, twitter

我需要**计算给定帐户的关注者最关注的帐户**。

我找到了第一个答案，但我有一个很大的限制：**[friends/ids](https://dev.twitter.com/docs/api/1.1/get/friends/ids)** **API 的速率限制是每 15 分钟 15 次调用**。每次达到速率限制时，我都可以等待，但因此，我需要 10 个小时来分析一个 600 个关注者的 Twitter 帐户。

```
require "rubygems"
require "twitter"

Twitter.configure do |config|
  config.consumer_key = CONSUMER_KEY
  config.consumer_secret = CONSUMER_SECRET
  config.oauth_token = OAUTH_TOKEN
  config.oauth_token_secret = OAUTH_TOKEN_SECRET
end

results = Hash.new(0)

Twitter.follower_ids(TWITTER_ACCOUNT_TO_ANALYSE).ids.each do |account|
  Twitter.friend_ids(account).ids.each do |id|
    results[id] +=1
  end
end   

puts results.sort_by {|key, value| value}.inspect 
```

你知道一个更有趣的方法或 API 来计算吗？一个近似的答案可以满足我的使用。

**编辑：**

这是一个管理速率限制且不显示以下纸牌的版本：

```
require "rubygems"
require "twitter" 

Twitter.configure do |config|
    config.consumer_key = CONSUMER_KEY
    config.consumer_secret = CONSUMER_SECRET
    config.oauth_token = OAUTH_TOKEN
    config.oauth_token_secret = OAUTH_TOKEN_SECRET
end

results = Hash.new(0)

Twitter.follower_ids(TWITTER_ACCOUNT_TO_ANALYSE).ids.each do |account|
    begin
        Twitter.friend_ids(account).ids.each do |id|
            results[id] +=1
        end
    rescue Twitter::Error::TooManyRequests => error #rate limit
        sleep error.rate_limit.reset_in
        retry
    rescue Twitter::Error::Unauthorized => error #protected account
        next        
    end
end

puts results.sort_by {|key, value| value}.keep_if {|key, value| value > 1}.inspect 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T22:48:49.067

我使用 Twitter API（尽管使用 Python 而不是 Ruby）做得很好，据我所知，你在这里运气不好——对于 API 的这些速率限制真的没有办法。

你不是唯一一个对这种发展不满意的人。[我和许多其他开发人员在这里](https://dev.twitter.com/discussions/10644#comment-21949)就这个问题发表了评论——鉴于 Twitter 上的人没有表明这些限制会改变，假设它们会继续存在可能是安全的。

除了向可能收集所有这些数据的第三方数据提供商付费外，您基本上被每 15 分钟 15 次调用所困。

另一方面，如果如您所说，您正在寻找一个近似答案，您可能会从原始帐户的追随者中抽取一个（统计上显着的）样本。您没有说明原始帐户有多少追随者，所以我无法告诉您需要抽样的帐户数量，但显然没有理由为所有追随者提取此数据，假设您要分析的原始帐户有足够多的关注者。

我想，在紧要关头，您也许可以使用多个 IP 地址和 Twitter 帐户来加快这项工作，但是您必须做大量的基础工作才能做到这一点，如果这样做违背了精神如果 Twitter 的服务条款不是这封信。

不过，我支持你——每 15 分钟打 15 次电话来获取朋友/关注者的数据并不好。

# resources - Microsoft Project Server 2010 拒绝任务更改，如完成日期

> ID：13332089
> 
> 赞同：1
> 
> 时间：2012-11-11T14:35:54.373
> 
> 标签：resources, ms-project-server-2010

我在项目服务器 2010 中创建了一个 pwa。然后我创建新项目，定义任务并将这些任务分配给资源。
我已经设置了时间报告期，因此任何资源都必须报告她/他关于分配给她/他的任何任务的工作时间。

当资源更改他/她任务的任何字段（例如完成日期、剩余工作、%Work、...）时，他/她将状态发送给 PM 以供批准。

当 PM 拒绝此页面并再次发布项目时，此更改不会在资源的时间表中生效。但是由于此更改被拒绝，因此可以合理地预期，在被拒绝的情况下，更改会恢复原状。

有谁知道资源如何使这些领域恢复到原来的价值？
感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T05:07:26.473

我的回答是基于我对 MSP 数据库外观的了解，而不是基于我在类似案例中的经验。

MSP 不存储任何类型的“交易”数据。您不能在项目计划中进行一些更改，然后拒绝它们并将所有更改回滚到以前的某个状态。Draft 数据库存储项目的当前状态，Published 数据库存储在发布过程中创建的项目的最后一个快照。唯一可以存储同一项目的多个版本的数据库是 Archive。

因此，实际上在项目中“回滚”某些更改的唯一方法是在有人更改项目之前将项目放入存档中，并在决定应该拒绝更改时从存档中恢复它。

# codeigniter - html 宽高 100%

> ID：13332092
> 
> 赞同：0
> 
> 时间：2012-11-11T14:36:07.927
> 
> 标签：codeigniter, web, base-url

我有这样的CSS

```
.home{        
    height:100%;
    width:100%; 
    font-size:20px;     
} 
```

我有这样的html

```
<div class="home">
        <div style="text-align:center;padding-top:10%;height:45%;">first text here
        </div>
        <div style="padding-top:2%;height:33%;background:#0099FF;text-align:center;">second text here           
        </div>      
        </div> 
```

但是当我在网络浏览器中运行此代码时，高度不适合 100%，它在 css 中显示超过 100%，我设置 home 类：在 html 中高度 100%，我制作 2 div.set style = 10%+45 %+2%+33% = 90%

但是当我在网络浏览器中运行时它超过 100%（我可以向下滚动鼠标）

我想要 100% 的高度，有

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:43:54.560

一些浏览器会添加自己的填充。尝试全局重置填充，边距

```
* {margin:0;padding:0;} 
```

如果不需要对 IE7 的支持，您可能还想在其中添加这些以及填充和边距。这将使计算变得容易得多

```
 -webkit-box-sizing: border-box; /* <=iOS4, <= Android  2.3 */
 -moz-box-sizing: border-box; /* Firefox 1+ */
      box-sizing: border-box; /* Chrome, IE8+, Opera, Safari 5.1*/ 
```

# php - wordpress 从一个类别中获取帖子

> ID：13332100
> 
> 赞同：0
> 
> 时间：2012-11-11T14:37:21.363
> 
> 标签：php, html, wordpress

嗨，我正在尝试制作我的第一个 wordpress 网站。我一直在尝试从两个不同的类别中引入蝙蝠帖子并将它们显示在同一页面上。我让它把帖子带回来，但它一直把它们按随机顺序排列。我想要一个包含一个类别的帖子，下面一个包含另一个类别的帖子。

这是我到目前为止所得到的

```
<?php get_head(); ?>

<div id="container">
<?php get_header(); ?>
<?php get_banner(); ?>

    <div class=" center content" role="main">
      <div id="posts">

          <div class="news">
                <?php query_posts('catname=news&showposts=3'); while (have_posts()) : the_post(); the_title(); the_content(); 
                endwhile;?>

                <div class="clear"></div>
          </div>
             <div class="msghead">
            <?php query_posts('catname=msghead&showposts=1'); while (have_posts()) : the_post(); the_title(); the_content(); 
            endwhile;?>

           </div>
        </div>
    </div>

    <div class="sidebardiv">
       <?php get_sidebar(); ?>
    <div class="clear">
    </div>
</div>
</div>
<?php get_footer(); ?>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:35:49.813

您是否尝试过 order 和 orderby 查询参数？

[http://codex.wordpress.org/Class_Reference/WP_Query#Order_.26_Orderby_Parameters](http://codex.wordpress.org/Class_Reference/WP_Query#Order_.26_Orderby_Parameters)

您的代码可能会像这样按日期排序，降序：

```
<?php query_posts('cat=news&showposts=3&orderby=date'); while (have_posts()) : the_post(); the_title(); the_content(); 
endwhile;?> 
```

# c++ - 通过引用传递“高级”概念？

> ID：13332101
> 
> 赞同：2
> 
> 时间：2012-11-11T14:37:29.037
> 
> 标签：c++, reference

当你这样做时：

```
int square(int& x) { return x*x;};

int s = square(40); // This gives error 
```

要解决此问题，请执行以下操作：

```
int square(const int& x) { return x*x;};

int s = square(40); // This is OK 
```

我知道 40 是一个常数，但是如果我这样做怎么办：

```
const int& x = 40 
```

为什么只使用`const`关键字就可以了？这是编译器保护没有人可以更改所引用的值的方式`x`吗？

40 是一个常量，所以我们甚至不知道它在内存中的位置，但编译器不应该知道这个地址，因此例如应该允许将值从 40 更改为 30，因为编译器可以直接转到地址`&40`并更改价值30？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T14:44:37.750

仅仅因为它可以实现并不意味着你应该这样做。40 真的是 30 很有趣，但特别难以维护，不应该被允许。此外，40 不一定*有*地址。考虑高速缓存、寄存器或立即指令中的 40。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T14:47:18.173

的声明`square`：

```
 int square(int& x); 
```

接受一个左值，而调用`square(40)`接受一个右值，这是不一致的，请[在此处](https://stackoverflow.com/questions/2038414/lvalue-and-rvalue)查看更多的左值和右值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T14:49:26.193

关于引用的规则是您不能将临时引用绑定到非`const`左值引用。文字`40`可用于初始化临时对象，但它本身不是对象。因此，您不能将非`const`左值引用绑定到它。

当你这样做

```
int const& value = 40; 
```

`40`您实际上绑定了一个初始化为引用的临时对象`value`。通常，临时对象超出范围并在完整表达式结束时被销毁。但是，当您直接将临时绑定到非`const`引用时，它的生命周期会延长以匹配引用的生命周期。

禁止将临时对象绑定到非`const`引用的规则已经到位，主要是因为它可能会导致许多令人惊讶的结果。它在技术上可以完成，但很可能会产生不明显的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T14:55:46.993

你仍然可以这样做：

```
int x = 40;
int s = square(x)

x = 30;
s = square(x); 
```

使用两个版本的 square（一个或没有 const）。

当您通过引用传递某些东西时，您正在传递一个现有对象（因为这就是引用意味着**现有对象的别名**）。

在您的示例中：

```
int s = square(30); 
```

你**没有**传递一个对象。这是一个文字（它们**不是对象**）。编译器可以通过创建临时对象将文字转换为对象。但是该语言对临时对象有明确的限制，这意味着它们是 const。这意味着不能将引用传递给它们将被改变的接口（尽管您可以通过 const 引用传递它们）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-11T14:41:41.677

你混淆了常量和文字。它们相似，但不等价。`40`不是常数，而是字面量。

您不能通过引用传递文字，因为如果您通过引用传递某些内容，则意味着它可以被修改 - 文字不能。考虑以下：

```
void foo(int &i)
{
    i = 1;
}

foo(0); // What on Earth? 0 == 1? 
```

但是，如果您传递对*常量的引用，*则意味着即使它是引用，也不允许该函数修改其参数（因为它是常量），所以现在您可以安全地传入一个字面量 - 它现在**使感觉，**因为函数不可能修改其参数。

# ruby-on-rails - 从 s3 bucket on rails 应用程序中获取超过 1000 个对象

> ID：13332103
> 
> 赞同：5
> 
> 时间：2012-11-11T14:37:52.920
> 
> 标签：ruby-on-rails, ruby-on-rails-3, amazon-s3, amazon-web-services

我必须编写一个 Rails 任务来从 s3 存储桶获取文件，但我的存储桶有超过 1000 个对象。

```
.
#Connection codes and configures
.
bucket = AWS::S3::Bucket.find('my_bucket')
puts bucket.size
# => 1000 
```

这段代码只给了我 1000 个对象 :( 我
如何从 s3 存储桶中获取所有对象？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T00:49:09.833

如[S3 开发人员文档](http://docs.amazonwebservices.com/AmazonS3/latest/dev/ListingKeysPaginated.html)中所述：

> 为了管理大型结果集，Amazon S3 使用分页将它们拆分为多个响应。每个列表键响应返回一个最多包含 1,000 个键的页面，并带有指示响应是否被截断的指示符。您发送一系列列表密钥请求，直到您收到所有密钥。

对[REST *GET Bucket*](http://docs.amazonwebservices.com/AmazonS3/latest/API/RESTBucketGET.html)操作的响应包含扮演上述指标角色的*IsTruncated元素。*

要使用 AWS::S3 库检索下一组结果，请使用当前结果页面中的最后一个键作为下一个请求中的标记。

# php - Facebook 应用程序 - 获取用户名不起作用

> ID：13332104
> 
> 赞同：1
> 
> 时间：2012-11-11T14:37:53.703
> 
> 标签：php, facebook

我正在使用 PHP SDK 3.2.0 创建 Facebook 应用程序，但遇到了问题。当我进行 API 调用时，尝试获取用户名没有任何反应。我正在使用来自 github.com 的示例，但仍然无法实现我想要的。

```
require 'src/facebook.php';

$facebook = new Facebook(array(
  'appId'  => 'xxx',
  'secret' => 'xxx',
));

// Get User ID
$user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:08:06.470

好吧，您需要先验证您是否有活动的访问令牌。如果没有，您应该显示 Facebook 登录按钮。

```
<?php
$userId = $facebook -> getUser();

 if ($userId) { 
  $userInfo = $facebook->api('/' . $userId); ?>
  Welcome <?= $userInfo['name'] ?>
<?php } else { ?>
<div class="fb-login-button" data-show-faces="true" data-width="200" data-max-rows="1"></div>   
<?php } ?> 
```

根据您的代码，它应该是这样的：

```
<?php
require 'src/facebook.php';

$facebook = new Facebook(array(
  'appId'  => 'xxx',
  'secret' => 'xxx',
));
?>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'xxx', // App ID
      channelUrl : 'http://YOURDOMAIN.com/channel.php', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });
    FB.Event.subscribe('auth.login', function(response) {
      window.location.reload();
      //alert(me.name);
    });
    }
</script>

<?php
$userId = $facebook -> getUser();

if ($userId) { 
  $userInfo = $facebook->api('/' . $userId); ?>
  Welcome <?= $userInfo['name'] ?>
<?php } else { ?>
<div class="fb-login-button" data-show-faces="true" data-width="200" data-max-rows="1"></div>   
<?php } ?>

    <script>
        // Load the SDK Asynchronously
        ( function(d) {
                var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
                if (d.getElementById(id)) {
                    return;
                }
                js = d.createElement('script');
                js.id = id;
                js.async = true;
                js.src = "//connect.facebook.net/en_US/all.js";
                ref.parentNode.insertBefore(js, ref);
            }(document));
    </script> 
```

您的服务器中应该有一个 channel.php 文件，该文件将包含以下内容：

```
<?php
$cache_expire = 60*60*24*365;
header("Pragma: public");
header("Cache-Control: max-age=".$cache_expire);
header('Expires: ' . gmdate('D, d M Y H:i:s', time()+$cache_expire) . ' GMT');
?>
<script src="//connect.facebook.net/en_US/all.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T17:51:47.200

经过身份验证的推荐已被弃用，并将于 2013 年 2 月删除。

话虽如此，我建议使用 FB.login 进行用户登录：

> [https://developers.facebook.com/docs/reference/javascript/FB.login/](https://developers.facebook.com/docs/reference/javascript/FB.login/)

如果您不想使用 Javascript SDK，也可以使用 PHP SDK 更简单的方法：

> [https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/](https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)

文档中的所有内容都得到了很好的解释。只需为您添加更多代码行。

# excel - 数据透视表中配额和销售计数之间的差异

> ID：13332106
> 
> 赞同：0
> 
> 时间：2012-11-11T14:37:58.020
> 
> 标签：excel, pivot-table

这让我发疯了。

我有一个基于日期的销售信息表，如下所示。

```
Date       Price
1/1/12      5
2/1/12      5
12/1/12     5 
```

现在我首先使用数据透视表按周分组，然后计算销售值的数量并计算价格如下

```
Week               Quantity  Revenue
1/1/12 - 7/1/12       2         10
8/1/12 - 15/1/12      1         5 
```

我每周有一个“配额”或所需数量，即 3，我想要另一列从数量中减去 3，以便给我这样的差异。

```
Week               Quantity  Revenue  Difference
1/1/12 - 7/1/12       2         10        -1
8/1/12 - 15/1/12      1         5         -2 
```

我尝试添加一个公式来执行此操作，但首先我无法访问数量列，因为它不是一个字段，我无法计算出公式来创建一个替换数量列的字段。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:06:42.910

我能想到的唯一方法是更改​​源数据并向其中添加配额和数量列。必须计算配额，使其加起来达到每周所需的数量，在本例中为 3。

![按周调整配额](../Images/39b73089128308e5356317696c89fdd6.png)

配额计算公式为：

```
=($F$2/7)/COUNTIF($A$2:$A$22,A2) 
```

然后，您可以创建一个计算字段，此处显示为“字段 1 的总和”：

![在此处输入图像描述](../Images/a28bba1873ad27c79d0dad080b97843a.png)

这不是一个非常易于管理的解决方案。如果你有多种产品和/或不同的配额，它会变得更丑！但这是我能看到的使用数据透视表的最佳方式。

# javascript - 我可以使用接口为对象定义允许的字段吗？

> ID：13332107
> 
> 赞同：0
> 
> 时间：2012-11-11T14:37:58.470
> 
> 标签：javascript, jquery, typescript

现在我的理解是，我可以声明这样的接口：

```
interface IParams {
    success: bool;
    pk: string;
} 
```

和这样的功能：

```
function x () : IParam {
   var params = {
      success: true,
      pk: "xx"
   };
   return params;
} 
```

这工作正常，但有没有办法可以做到这一点，并让 params 变量只接受成功和 pk 的值？我想要的是某种方式可以阻止我执行以下操作：

```
function x () : IParam {
   var params = {
      successssssssssssss: true,
      pk: "xx"
   };
   return params;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T14:56:57.790

只需在 var 声明上添加类型注释即可满足您的要求：

```
var params : IParams = {
  success: true,
  pk: "xx"
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T14:44:40.860

```
interface IParams 
{
    success: bool;
    pk: string;
}

function x () : IParams
{
   var params = {
      success: true,
      pk: "xx"
   };

   if ( params.success && params.pk)
     return params;
   else
     // handle exception
} 
```

然后函数中的代码只有在有两个变量时`x`才会执行`param`

# wordpress - 如何在wordpress中使用ajax分页

> ID：13332114
> 
> 赞同：0
> 
> 时间：2012-11-11T14:38:29.593
> 
> 标签：wordpress, wordpress-theming

我在我的 wordpress 应用程序中创建了自定义帖子类型“投资组合”。我正在使用 wp-pagenavi 插件对自定义帖子进行分页。谁能指导我如何实现 ajax 分页，即在不重新加载整个页面的情况下加载新帖子。任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:37:40.490

```
/*******ajax pagination*******/
jQuery(document).on('click', '#pagination a', function(e){  
  e.preventDefault();  
  var link = jQuery(this).attr('href');  
  jQuery('#content').html('Loading...');  //the 'main' div is inside the 'content' div
  jQuery('#content').load(link+' #main');
}); 
```

.live() 函数已被贬值，因此请改用 .on()。显然也需要 jQuery 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T16:14:38.197

您可以尝试以下几个选项：

[AJAXify WordPress 教程](http://www.deluxeblogtips.com/2010/05/how-to-ajaxify-wordpress-theme.html)

[AJAXify WordPress 插件](http://wordpress.org/extend/plugins/ajaxify-wordpress-site/)

我使用了第一个选项，它是一个很好的教程。我知道它有效。不过，您可能需要对其进行一些修改。我不能保证第二个选项，因为我从未使用过它。只是一个快速的谷歌搜索发现了它。

# symfony - 自动传递路径参数

> ID：13332115
> 
> 赞同：3
> 
> 时间：2012-11-11T14:38:31.610
> 
> 标签：symfony

我正在建立一个网站，用户可以在其中选择他想要的国家、州和城市。

一旦他选择了这些参数，他就会进入如下页面：`en.example.com/spain/madrid/madrid/`

问题是，每次我想构建一个新的 url 时，我都必须传递这 3 个变量，我想知道我是否可以做一些事情来使它们就像`_locale`symfony 本身传递给参数的变量一样。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T22:35:27.090

搜索更多后，我发现了这篇文章：[http ://blog.viison.com/post/15619033835/symfony2-twig-extension-switch-locale-current-route](http://blog.viison.com/post/15619033835/symfony2-twig-extension-switch-locale-current-route)

我只是使用了这个想法并进行了我需要的更改，这是我的扩展的最终代码

```
<?php

namespace Comehoy\CoreBundle\Twig\Extension;

use Symfony\Bundle\FrameworkBundle\Routing\Router;
use Symfony\Component\HttpKernel\Event\GetResponseEvent;
use Symfony\Component\HttpKernel\HttpKernel;

class PathExtension extends \Twig_Extension
{

    private $request;
    private $router;

    public function __construct(Router $router) {
        $this->router = $router;
    }

    public function onKernelRequest(GetResponseEvent $event) {
        if ($event->getRequestType() === HttpKernel::MASTER_REQUEST) {
            $this->request = $event->getRequest();
        }
    }

    public function getFunctions()
    {
        return array(
            'l10n_path' => new \Twig_Function_Method($this, 'getPath')
        );
    }

    public function getPath($name, $parameters = array())
    {
        $parameters = array_merge($parameters, [
            'country' => $this->request->get('country'),
            'state' => $this->request->get('state'),
            'city' => $this->request->get('city'),
        ]);

        return $this->generator->generate($name, $parameters, false);
    }

    public function getName()
    {
        return 'twig_my_path_extension';
    }

} 
```

至于配置和帖子一样

```
services:
    twig.localized_route_extension:
        class: Acme\CoreBundle\Twig\PathExtension
        tags:
            - { name: twig.extension }
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest }
        arguments: [@router] 
```

对于我使用国家、州和城市的路线，我将它们放在前缀中，以避免在每条路线中重复它们。

```
acme_core:
    resource: "@AcmeCoreBundle/Controller/"
    type:     annotation
    prefix:   /{country}/{state}/{city} 
```

希望它可以帮助别人。

# python - Python 2D 数组 - 通过键获取值

> ID：13332116
> 
> 赞同：0
> 
> 时间：2012-11-11T14:38:31.650
> 
> 标签：python, python-2.7

假设它是给定的以下结构：

```
from django.utils.translation import ugettext_lazy as _

# Constants for all available difficulty types.
SIMPLE = 1
MEDIUM = 2
DIFFICULT = 3

# Names for all available difficulty types.
DIFFICULTIES = (
    (SIMPLE, _("simple")),
    (MEDIUM, _("medium")),
    (DIFFICULT, _("difficult")),
) 
```

如果给定一个常量，你如何获得字符串值？

循环很容易编程，但是有没有一个更短的类似 python 的方式和一个表达式？

表达方式

> 困难[简单][1]

返回字符串“中”。有什么明显的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:33:35.967

> 当然你可以使用字典，但是数组是给定的。

那就换吧。（我假设你保留了收据..）

```
>>> dict(DIFFICULTIES)
{1: 'simple', 2: 'medium', 3: 'difficult'}
>>> d = dict(DIFFICULTIES)
>>> d[MEDIUM]
'medium' 
```

在未排序的元组中搜索某些东西根本不是处理事情的正确方法。我想你可以做

```
>>> next(v for k,v in DIFFICULTIES if k == MEDIUM)
'medium' 
```

如果您想避免带有冒号的 for 循环，但这有点愚蠢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T14:43:05.583

仅仅因为你指定了一个元组，一个从 0 开始的索引，你要么需要切换到字典，要么用正确的值修改你的常量：

```
DIFFICULTIES = {SIMPLE: "simple", MEDIUM: "medium", DIFFICULT: "difficult"} 
```

或者：

```
SIMPLE, MEDIUM, DIFFICULT = range(3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T14:43:54.873

使用字典：

```
SIMPLE, MEDIUM, DIFFICULT = range(3)
DIFFICULTIES = {
    SIMPLE: _("simple"),
    MEDIUM: _("medium"),
    DIFFICULT: _("difficult")
}
DIFFICULTIES[SIMPLE] # will return "simple" 
```

# rdf - rdf:property 中的有限选择

> ID：13332120
> 
> 赞同：1
> 
> 时间：2012-11-11T14:38:57.923
> 
> 标签：rdf, semantics, ontology, owl, rdfs

我正在制作一个描述编程语言的本体，但我有以下问题：一种语言可以有强类型或弱类型，我需要将我的模式限制为这两个选项......那么，我该怎么做呢？

这是我的架构示例：

```
:Language a rdfs:Class .

:typing a rdf:Propery ;
    rdfs:domain :Language ;
    rdfs:range ? . 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T23:42:46.063

我不同意 Eduardo Silva 发布的答案。函数属性只能具有函数范围内的一个*值。*它可以多次使用，但是 OWL 推理器可以从这些三元组中做出一些蕴涵。例如，如果您有一些个人`example:x1`和功能属性`:p`，并且您在数据中看到：

```
example:x1 :p :foo .
example:x1 :p :bar . 
```

那么您有权推断`:foo`并且`:bar` *必须是同一个人*，否则`:p`将违反 的功能性质。或者，如果您通过其他方式知道`:foo`并且`:bar`是不同的个体，那么，鉴于上述两个额外的三元组，您的 OWL 模型是不一致的。

换句话说，`test:typing`在某个资源上有两个值就可以了，只要您随后要求表示的两种类型方案实际上是相同的。这可能不是你想要的。此外，没有什么可以阻止包含原始范围描述中未提及的*新*值的三重存储。`test:typing`例如：

```
:ruby a test:Language ; 
    test:typing test:duckTyping. 
```

这与作为功能属性*并不*矛盾。`test:typing`

要将属性的范围限制为某个值的枚举之一，您真正想要的是一个 OWL[枚举类](http://www.w3.org/TR/owl-ref/#EnumeratedClass)。例如：

```
test:typing
    a owl:ObjectProperty ;
    rdfs:domain test:Language ;
    rdfs:range [
        owl:oneOf ( test:strongTyping test:weakTyping )
    ]. 
```

枚举类的扩展（允许值集）正是给定的个体集合。不允许其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:34:41.113

我认为一种解决方案可以是定义一个“功能属性”，该属性将“范围”限制为该类的一个成员（例如：Person hasGender Gender，其中性别可以是女性或男性 - 只有一个）。

这在 owl 中看起来像这样（在 Protege 中快速制作）：

```
<owl:ObjectProperty rdf:about="&test;typing">
    <rdf:type rdf:resource="&owl;FunctionalProperty"/>
    <rdfs:domain rdf:resource="&test;Language"/>
    <rdfs:range rdf:resource="&test;Type"/>
</owl:ObjectProperty> 
```

（然后类型，将有子类：强和弱）。

希望这可以帮助。

# c# - 什么是在二维矩阵中通过 Y 零点找到 X 的快速算法？

> ID：13332124
> 
> 赞同：3
> 
> 时间：2012-11-11T14:39:08.577
> 
> 标签：c#, algorithm, search

我正在寻找一种算法，它可以`0`在矩阵中快速找到 's 的矩形，其中随机数字 0-9 的长度不小于 X 和 Y。

我自己的只是扫描 0 并查看是否有相邻的矩形，如果没有，则继续。它相当慢，所以也许有更快的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:48:11.900

创建一个与原始大小相同的表。垂直扫描原始并计算上面并包括当前字段的连续零的数量，将其写入新表中。

水平扫描原始表，计算当前字段左侧（包括当前字段）的连续零个数。然后对于每个字段，这两个数字会告诉您以该字段结尾的矩形的大小。

解决方案的其余部分取决于您未指定的部分问题。也许您可以在它们足够大时简单地输出它们，也许您需要添加一些测试来检查您是否位于矩形的右下角。

# php - 如何在 sql 中从 now() 中减去时间？

> ID：13332125
> 
> 赞同：1
> 
> 时间：2012-11-11T14:39:10.000
> 
> 标签：php, mysql, sql

我需要将 now() 时间发布到 mysql（从 php 执行此操作）减去一秒（或分钟）。有没有办法做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T14:39:43.927

```
select now() - interval 1 second 
```

或使用[DATESUB](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-add)

```
select DATE_SUB(now(), INTERVAL 1 second) 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!2/d41d8/3611)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T14:52:45.257

如果您需要格式化日期，您可以使用，

```
select TIME_FORMAT(now() - interval 1 second,'%H:%i:%s') 
```

也有很多网站显示此信息。[来源](http://www.eltcalendar.com/stuff/datemysqlphp.html)

# php - 如果类别为空，则返回一条消息

> ID：13332128
> 
> 赞同：0
> 
> 时间：2012-11-11T14:39:34.553
> 
> 标签：php, wordpress

我有这段代码可以从 wordpress 中获取一些元素

```
global $post;

$i=0;

$args = array( 'numberposts' => 5, 'category' =>5,'order'=>'DESC','orderby'=>'post_date','suppress_filters' => 0 );

$myposts = get_posts( $args );
$has_posts = true;

foreach( $myposts as $post ) :  setup_postdata($post); ?>

<?php $image = wp_get_attachment_image_src( get_post_thumbnail_id( $post->ID ), 'single-post-thumbnail' ); ?>

<li>

<?php if($image){ ?>

<div class="news_left"><a href="<?php the_permalink(); ?>"><img src="<?php echo $image[0]; ?>" alt="" width="191" height="132" /></a></div>

<?php } ?>

<?php
    $content = apply_filters('the_content', get_the_content());
    $content = explode("</p>", $content);
?>

<div class="news_right">

    <h2><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>

    <span class="date">Date: <?php the_time('j/m/Y') ?></span>

    <?php echo $content[1] . "</p>";//echo String::content_limit(200,'<p>'); ?>

    <a href="<?php the_permalink(); ?>">Read More</a>

</div> 

<div class="clear"></div>   

</li>

<?php $i++; endforeach; ?> 
```

如果类别为空，我需要设置返回短信的条件。就像没有帖子可显示，请注意帖子使用 WPML 作为语言切换器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T14:46:55.863

```
<?php
$myposts = get_posts( $args );
if($myposts){
    //found posts
}else{
    //no posts
}
?> 
```

**更新**：请检查代码是否可行，然后将其与您的代码进行比较，我已经评论了我所做的更改，因此您有机会学习：

```
$i=0;

$args = array( 'numberposts' => 5, 'category' =>5,'order'=>'DESC','orderby'=>'post_date','suppress_filters' => 0 );

$myposts = get_posts( $args );

//check if $myposts
if(!$myposts){
    //the $myposts has no posts, print the error message
    echo "<li>";
    echo "This category has zero posts";
    echo "</li>";
}else{
    //the category has one more or more posts
    $has_posts = true;
    foreach( $myposts as $post ) :  setup_postdata($post); ?>

    <?php $image = wp_get_attachment_image_src( get_post_thumbnail_id( $post->ID ), 'single-post-thumbnail' ); ?>

    <li>

    <?php if($image){ ?>

    <div class="news_left"><a href="<?php the_permalink(); ?>"><img src="<?php echo $image[0]; ?>" alt="" width="191" height="132" /></a></div>

    <?php } ?>

    <?php
        $content = apply_filters('the_content', get_the_content());
        $content = explode("</p>", $content);
    ?>

    <div class="news_right">

        <h2><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>

        <span class="date">Date: <?php the_time('j/m/Y') ?></span>

        <?php echo $content[1] . "</p>";//echo String::content_limit(200,'<p>'); ?>

        <a href="<?php the_permalink(); ?>">Read More</a>

    </div> 

    <div class="clear"></div>   

    </li>

<?php
    $i++; endforeach; 
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-17T14:28:36.823

太感谢了！！这解决了我的问题.. 参考：howlingwolfmedia.com/site3/classes/class-categories

见“个性化培训”

我的代码在这里：`

```
<?php 
    $args=array(
      'child_of' => 4,
      'orderby' => 'name',
      'order' => 'ASC',
      'hide_empty' => '0'
      );
    $categories=get_categories($args);
      foreach($categories as $category) {
        echo '<h3>' . $category->name . '</h3>
        <div>';
            global $post;
            $args = array( 'posts_per_page' => -1, 'category' => $category->term_id, 'orderby' => 'name', 'order' => 'ASC' );
            //alternatively this also works:  'nopaging' => true
            $myposts = get_posts( $args );

            if (!$myposts) {
                echo 'Sorry there are currently no classes in this category';
                }
            else {
            foreach( $myposts as $post ) :  setup_postdata($post);
            echo  '<p><a href="' . get_permalink($post->ID) . ' " style="color:#7c7c7c; font-size: 1em; text-decoration:none !important; line-height:80%;">' . get_the_title($post->ID) . '</a></p>';
            endforeach;
            }
        echo  '</div>
       ';
    }
?> 
```

`

# objective-c - 同时显示实时数据的两个视图

> ID：13332129
> 
> 赞同：0
> 
> 时间：2012-11-11T14:39:40.073
> 
> 标签：objective-c, ios, uiview, uiviewcontroller

我有两个视图控制器，它们应该如下所述工作：

第一个视图控制器显示一个视图，其中包含一个表。该表包含不断变化的数据。我有一个委托方法，用于在发生更改时重新加载数据。所以这是照顾。当用户在表中选择一行时，我想显示第二个视图，该视图也将包含文本格式的实时数据（一个 UITextView 会不断变化）。

我希望允许用户访问视图 1，而视图 2 仍将监视和显示实时数据，反之亦然。当用户在视图 2 上时，视图 1 仍应监视并显示表格内容的任何更改。

我想这就像同时存在两个视图控制器并在它们之间切换。

完成此任务的最简单或最标准的方法是什么？我不介意它是否全部以编程方式完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:43:55.583

你有一个问题，你需要一个自定义的 parentviewcontroller 查看拆分视图作为一个例子 :: [SplitView like Facebook app on iPhone](https://stackoverflow.com/questions/7775195/splitview-but-on-iphone)

很酷的介绍如何自定义容器视图控制器 :: [Container View Controller Examples](https://stackoverflow.com/questions/7755498/container-view-controller-examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T17:53:49.720

在这里很难说出你在问什么。首先，视图根本不应该处理数据——它们应该只显示它​​。听起来您所描述的是具有更新到您的第二个视图的后台进程。当您的表在屏幕上时，该进程当然可以运行，当您切换到第二个视图时，您可以使用这个正在运行的进程对其进行更新。您将如何执行此操作取决于您尝试执行的操作的详细信息。因此，我认为如果您提供更多关于您想要更新您的第二个视图的流程类型以及选择表中的行如何影响该流程的上下文，我们可以为您提供更好的帮助。

编辑后：

你当然可以做你想做的事。我认为主要的是你需要在你的第一个视图控制器中有一个指向你的第二个视图控制器的属性（类型为强），这样当你第二次回到第二个控制器时，它会回到相同的状态实例。根据表中的选择，您可以启动填充文本视图所需的任何进程，并且即使在您返回表视图后该进程也可以继续运行，因为当视图关闭时该控制器不会被释放屏幕（由于你有很强的参考）。你只需要在你的第二个视图控制器中有某种​​ if 子句来知道用户是否再次选择了同一行，如果是，只显示更新的文本视图，而不是开始一个新的进程。

在没有你提供更多细节的情况下，这已经是我所能做到的最具体了。

# eclipse - 避免自定义终端隐藏（抑制）派生终端

> ID：13332131
> 
> 赞同：0
> 
> 时间：2012-11-11T14:39:49.730
> 
> 标签：eclipse, dsl, xtext, xtend

几天前我开始玩 xtext 并且刚刚浏览了教程。也许解决方案已在某处的参考资料中有所提及，但我无法很快得到它。

我的问题是这个。我试着写一个简单的语法，混合在`org.eclipse.xtext.common.Terminals`. 然后我想像这样插入一个 cusotm 终端`FILE_NAME`：

```
terminal FILE_NAME:
( !('/' | '\\' | ':' | '*' | '?' | '"' | '<' | '>' | '|') )+
; 
```

这基本上就是在 Windows 下允许的文件名。但是，通过这样做，继承的规则（如 ID、INT 等）将永远不会匹配，因为它们总是在自定义终端之后生成。

可以优雅地避免这种问题吗（尽可能不重复和尽可能普遍）？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:36:59.930

终端规则（又名词法分析器规则）用于标记输入序列。恕我直言，终端规则中应该有最少的语义。

您尝试表达一个只接受有效文件名的专用解析器规则。

查看 Xtext 文档 [1] 中描述的解析器阶段。我的建议：

1.  Lexing：不要使用专门的终端规则，而是使用 STRING。

2.  验证：为具有“fileName”EAttribute 的 EClass 编写验证规则。

> 尽可能不重复和尽可能笼统

您不希望使用“fileName”EAttribute 对每个 EClass 重复验证。如果您有精炼的 Ecore 模型，请引入具有“文件名”EAttribute 的新超类型。

你可以实现一个通用的验证规则#check_fileName_is_valid(ElementWithFile)。

如果您没有精炼的 MM ，请在语法中使用*元模型提示。*如果你提供一个通用的超类型，Xtext 的 Ecore 推断器将提取子类型的共同特征。前任：

```
ElementWithFile: A | B;
A: ... 'file' fileName=STRING ...;
B: ... 'file' fileName=STRING ...;
// => Ecore: ElementWithFile.fileName<EString> 
```

[1] [http://www.eclipse.org/Xtext/documentation.html#DSL](http://www.eclipse.org/Xtext/documentation.html#DSL)

# finite-automata - 使用带有错误状态的产品构造合并两个 DFA

> ID：13332138
> 
> 赞同：0
> 
> 时间：2012-11-11T14:41:08.373
> 
> 标签：finite-automata, deterministic

我想知道当一个有错误状态时如何合并两个 DFA。具体来说，第一个 DFA 是这样的：

![在此处输入图像描述](../Images/d27e50ff332393ddacfaf6568ab7c7d6.png)

第二个并不重要，但它不需要错误状态，因为在每个状态下都需要一个“a”或“b”。所以我可以很好地使用产品构造，直到我到达状态 q3。假设机器位于 (q3,z)（其中 z 是来自第二个 DFA 的随机状态），然后读取 a。第二个可以愉快地继续，但是第一个 DFA 应该进入错误状态并且不再接受任何输入。因为这是联合，当然不是交集，所以我需要继续模拟第二个，看看它是否达到错误状态。

在构建联合 DFA 时如何显示这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T05:39:30.453

错误状态是所有符号循环回到相同状态的不接受状态。（水槽”）。我不清楚您是`q3`要成为没有传出转换的接受状态，还是`q3`要成为 { 、 和 } 都是接受状态的`q0`错误`q1`状态`q2`。但解决方案并没有那么不同。如果您还没有水槽，请创建一个；所有来自任何其他状态的非法转换都进入错误状态。

现在，您可以毫无问题地使用产品构造；DFA1 到达错误状态并停留在那里，DFA2 继续进行转换。当两个 DFA 都到达接收器时，就不可能再进行转换。

# opengl - 在OpenGL中将屏幕位置投影到平面上

> ID：13332142
> 
> 赞同：0
> 
> 时间：2012-11-11T14:41:27.000
> 
> 标签：opengl, transformation, raytracing, plane

我目前正在努力完成一个简单的任务：给定屏幕上的鼠标位置，计算新位置，该位置是通过计算穿过选定对象的相机平面与鼠标点击光线的交点来确定的。

所涉及的数学并不那么棘手，但我似乎仍然找不到错误。

```
 QVector3D cameraPosition = Rotation.rotatedVector(translation);
        QVector3D cameraDirection = Dir;
        QVector3D objectPosition = objectTranslation;
        QVector3D up = Rotation.rotatedVector(QVector3D(0,1,0));
        QVector3D Right = QVector3D::crossProduct(Dir, up); 
```

如您所见，我使用 Qt 来表示我的数据。首先，我通过Camera Rotation旋转我的平移向量以获得cameraPosition。否则我将无法在 Worldcoordinates 中获得 cameraPosition。之后我计算上下向量。为了计算射线平面交点，我将其用作参考：[http](http://softsurfer.com/Archive/algorithm_0104/algorithm_0104B.htm#Line-Plane) ://softsurfer.com/Archive/algorithm_0104/algorithm_0104B.htm#Line-Plane Intersection

后记我将屏幕坐标正常化

```
 float screen_x = 2*(float(pos.x())/width()-0.5);
        float screen_y = 2*((float(height()-1-pos.y())/height())-0.5);
        screen_x*= (1.0f/height())/(1.0f/width()); 
```

最后，实际计算：

```
 QVector3D P0 = cameraPosition;
        QVector3D n = cameraDirection;
        QVector3D V0 = objectPosition;
        QVector3D u = (screen_x*Right+screen_y*up)*0.5+cameraDirection;
        float s = QVector3D::dotProduct(n, V0-P0) / QVector3D::dotProduct(n, u);
        objectTranslation = P0+s*u; 
```

我想问题在于你的计算或超出我的东西。我通过评估 ModelView 变换矩阵并取出第三行来获得相机的方向：

```
GLdouble modelview[16];
glGetDoublev( GL_MODELVIEW_MATRIX, modelview );
QMatrix4x4 mv = QMatrix4x4(modelview);
Dir = QVector3D(mv.row(2).x(), mv.row(2).y(), mv.row(2).z()).normalized(); 
```

# php - Yii SQL Profiling of AJAX 调用

> ID：13332143
> 
> 赞同：5
> 
> 时间：2012-11-11T14:41:27.820
> 
> 标签：php, database, amazon-web-services, yii, profiling

Yii 提供了一个设置，用每个 SQL 调用的执行时间（CProfileLogRoute）来描述所有的 SQL 调用。除非它不适用于 ajax 调用。我怎样才能访问这些数据？

我试图找到打开登录弹出窗口的 ajax 调用的瓶颈......

类似地，CProfileLogRoute 中显示的执行时间是否包括到 SQL 服务器的网络行程（如果有）？我的数据库由亚马逊的 RDS 托管，我想知道这是否是瓶颈所在（在本地似乎很好）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:33:34.520

您可以尝试以下面建议的方式扩展[CFileLogRoute](http://www.yiiframework.com/doc/api/1.1/CFileLogRoute)并在应用程序的配置中启用它，如下所示：

```
'log'=>array(
    'class'=>'CLogRouter',
    'routes'=>array(
        array(
            'class'=>'ProfileLogRoute',
            'levels' => "profile"
        )
    )
) 
```

在这种情况下，所有已分析的查询都将写入位于`protected/runtime`目录中的日志文件（方法的覆盖同样实现[CProfileWebRoute](http://www.yiiframework.com/doc/api/1.1/CProfileLogRoute/)`processLogs`的摘要报告......不幸的是来自[CWebLogRoute](http://www.yiiframework.com/doc/api/1.1/CWebLogRoute)）：`CProfileWebRoute`

```
<?php  
class ProfileLogRoute extends CFileLogRoute
{
    protected function processLogs($logs)
    {
        $logFile=$this->getLogPath().DIRECTORY_SEPARATOR.$this->getLogFile();
        if(@filesize($logFile)>$this->getMaxFileSize()*1024)
            $this->rotateFiles();
        $fp=@fopen($logFile,'a');
        @flock($fp,LOCK_EX);

        $profileStack = array();
        $profileResults = array();
        foreach ($logs as $log)
        {
            if ($log[1] === CLogger::LEVEL_PROFILE)
            {
                $message = $log[0];
                if (!strncasecmp($message, 'begin:', 6))
                {
                    $log[0] = substr($message,6);
                    $profileStack[] = $log;
                }
                else if(!strncasecmp($message, 'end:', 4))
                {
                    $token = substr($message,4);
                    if(($last = array_pop($profileStack)) !== null && $last[0] === $token)
                    {
                        $info = array(
                            'delta' => $log[3] - $last[3],
                            'category' => $last[2],
                            'time' => $last[3]
                        );
                        $this->aggregateResult($token, $info, $profileResults);
                    }
                    else
                    {
                        throw new CException(Yii::t('yii','CProfileLogRoute found a mismatching code block "{token}". Make sure the calls to Yii::beginProfile() and Yii::endProfile() be properly nested.',
                            array('{token}'=>$token)));
                    }
                }
            }
            else
            {
                @fwrite($fp,$this->formatLogMessage($log[0],$log[1],$log[2],$log[3]));
            }
        }

        if (!empty($profileResults))
        {
            $now = microtime(true);
            while(($last = array_pop($profileStack)) !== null)
            {
                $info = array(
                    'delta' => $now - $last[3],
                    'category' => $last[2],
                    'time' => $last[3]
                );
                $token = $last[0];
                $this->aggregateResult($token, $info, $profileResults);
            }

            $entries = array_values($profileResults);
            $func = create_function('$a,$b','return $a["total"]<$b["total"]?1:0;');
            usort($entries, $func);
            foreach ($entries as $entry)
            {
                $message = sprintf("Min: % 11.8f    Max: % 11.8f    Total: % 11.8f    Calls: % 3d    %s", $entry['min'], $entry['max'], $entry['total'], $entry['calls'], $entry['token']);
                @fwrite($fp, $this->formatLogMessage($message, CLogger::LEVEL_PROFILE, $entry['category'], $entry['time']));
            }
        }

        @flock($fp,LOCK_UN);
        @fclose($fp);
    }

    protected function aggregateResult($token, $info, &$results)
    {
        if (isset($results[$token]))
        {
            if ($info['delta'] < $results[$token]['min'])
                $results[$token]['min'] = $info['delta'];
            else if($info['delta'] > $results[$token]['max'])
                $results[$token]['max'] = $info['delta'];
            $results[$token]['calls']++;
            $results[$token]['total'] += $info['delta'];
            return;
        }

        $results[$token] = array(
            'token' => $token,
            'calls' => 1,
            'min' => $info['delta'],
            'max' => $info['delta'],
            'total' => $info['delta'],
            'category' => $info['category'],
            'time' => $info['time']
        );
    }
} 
```

如果你想知道 Yii 是如何测量 SQL 执行时间的，你可以查看[CDbCommand](https://github.com/yiisoft/yii/blob/1.1.12/framework/db/CDbCommand.php)类的源代码 -`queryInternal`方法，更准确地说。分析介于`Yii::beginProfile('system.db.CDbCommand.query...')`和`Yii::endProfile('system.db.CDbCommand.query...')`调用之间。正如您所看到的，这两个调用都在同一个方法中，因此分析时间不包括网络传输。问题可能在于您的远程数据库服务器在巨大的负载下运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T20:16:48.713

There is a property of the CProfileLogRoute class called **ignoreAjaxInFireBug** which defaults to "true" by setting it to **false** you can get your profiling info on ajax requests.

[http://www.yiiframework.com/doc/api/1.1/CWebLogRoute#ignoreAjaxInFireBug-detail](http://www.yiiframework.com/doc/api/1.1/CWebLogRoute#ignoreAjaxInFireBug-detail)

```
'log'=>array(
    'class'=>'CLogRouter',
    'routes'=>array(
                    array(
                        'class'=>'CProfileLogRoute',
                        'ignoreAjaxInFireBug'=>false,
                        'levels'=>'error, warning, trace, info, profile',
                    ),
        ), 
```

I don't believe ou need to use firebug for that work (it's kind of a misnomer). If you do however, just download firefox and install firebug and then your problem is still solved.

# jquery - 不向每个班级的父母隐藏第一个孩子

> ID：13332149
> 
> 赞同：0
> 
> 时间：2012-11-11T14:42:00.583
> 
> 标签：jquery, html, css

这里有我的 html 和 jQuery 代码

```
<div class="tabbed">
    <h2>Title</h2>
    <div class="tabs"></div> <!-- want to show then hide rest -->
    <h2>Title</h2>
    <div class="tabs"></div>
    <h2>Title</h2>
    <div class="tabs"></div>
</div>
<div class="tabbed">
    <h2>Title</h2>
    <div class="tabs"></div> <!-- want to show then hide rest -->
    <h2>Title</h2>
    <div class="tabs"></div>
    <h2>Title</h2>
    <div class="tabs"></div>
    <h2>Title</h2>
    <div class="tabs"></div>
</div>
<div class="tabbed">
    <h2>Title</h2>
    <div class="tabs"></div> <!-- want to show then hide rest -->
    <h2>Title</h2>
    <div class="tabs"></div>
    <h2>Title</h2>
    <div class="tabs"></div>
    <h2>Title</h2> 
    <div class="tabs"></div>
</div> 
```

jQuery

```
$(".tabbed > .tabs:not(:first)").hide(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:45:54.670

更新答案以匹配您的新问题代码：

```
$(".tabbed").find('.tabs:not(:first)').hide(); 
```

[**小提琴**](http://jsfiddle.net/PVz4W/1/)

* * *

上面的内容可能看起来不“正确”，因为人们会假设它`:first`只会返回 1 个元素，但它与这种更冗长且消耗 CPU 的形式具有相同的效果：

```
$(".tabbed").each(function() {
    $(this).find('.tabs:not(:first)').hide();
}); 
```

[小提琴](http://jsfiddle.net/PVz4W/2/)

我假设该[`.find()`](http://api.jquery.com/find/)方法在为匹配元素集中的每个元素执行选择器之前在内部进行迭代，因此后面的代码片段是不必要的。但是，如果您以后在升级或降级 jQuery 时遇到问题，您可以使用更详细和防弹的形式。

# css - @font-face 不适用于网站副本

> ID：13332150
> 
> 赞同：0
> 
> 时间：2012-11-11T14:42:07.820
> 
> 标签：css, font-face, embedded-fonts

我在`@font-face`标签中使用了自定义字体，它在我的**ASP.NET 3.5**网站上成功运行，该网站在所有浏览器的本地*IIS*站点上运行。但是，当我使用不同的端口将该站点复制到同一服务器上的另一个*IIS*站点时，字体不再正确呈现。完全相同的资源仍然存在，站点仍然按设计运行，只是没有字体。我已将该站点推送到托管服务，问题也仍然存在。`(localhost)``(Windows)`*`(localhost:5000)`*

 *服务器会阻止字体渲染怎么办？

**编辑：添加代码**

字体以 eot、woff、ttf 和 svg 格式提供，位于以下文件夹中...

**网站根/_resources/fonts/FontFace/：**

```
FontFace-webfont.eot
FontFace-webfont.woff
FontFace-webfont.ttf
FontFace-webfont.svg 
```

定义 的样式表`@font-face`与字体位于同一文件夹中。

**websiteRoot/_resources/fonts/FontFace/stylesheet.css：**

```
@font-face {
    font-family: "FontFace";
    src: url("FontFace-webfont.eot") format("eot");
    src: url("FontFace-webfont.eot?#iefix") format("embedded-opentype"),
         url("FontFace-webfont.woff") format("woff"),
         url("FontFace-webfont.ttf") format("truetype"),
         url("FontFace-webfont.svg#FontFace") format("svg");
    font-weight: normal;
    font-style: normal;
} 
```

**我`admin_styles.css`位于不同文件夹中的样式表实现了新字体：**

```
h1, h2, h3 {
    font-family: "FontFace", Arial, sans-serif;
} 
```

**消费页面引用两个样式表：**

```
<link href="/_resources/fonts/FontFace/stylesheet.css" rel="stylesheet" type="text/css" />
<link href="/Admin/_resources/styles/admin_styles.css" rel="stylesheet" type="text/css" /> 
```

我相信这不是一个参考问题，因为样式表中的样式正在出现。它似乎只是没有呈现的字体。这也可以在一个本地站点上完美运行，当我将它复制到另一个本地站点时它不起作用。

值得指出的是，它不是*“副本” ，我使用***Visual Studio 2010** *“发布”*功能将代码推送到新站点，该功能设置为发布到文件系统位置，并带有“在发布前删除所有现有文件”放。*文件系统位置是在IIS 7.5*中设置为网站的目录。

谢谢，G

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T07:12:58.550

所以我发现了问题，这有点愚蠢（对我来说），当 Visual Studio 2010 发布时，默认情况下，带有 EOT、TTF、WOFF 扩展名的文件似乎不包含在推送中。因此，虽然代码已正确发布和引用，但未包含所需的资源文件，因此无法加载字体。我只是复制了丢失的资源，瞧！这一切都再次起作用。

谢谢，G*

# python - 将布尔值与浮点数相乘？

> ID：13332162
> 
> 赞同：7
> 
> 时间：2012-11-11T14:44:19.090
> 
> 标签：python, type-conversion, boolean

我不明白这一行`q.append(p[i] * (hit * pHit + (1-hit) * pMiss))`，因为变量`hit`是一个布尔值。该布尔值来自`hit = (Z == world[i])`

那里发生了什么事？我对Python只有一个基本的了解......

```
p = [0.2, 0.2, 0.2, 0.2, 0.2]

world = ['green', 'red', 'red', 'green', 'green']
Z = 'red'
pHit = 0.6
pMiss = 0.2

def sense(p, Z):
    q=[]
    for i in range(len(p)):
        hit = (Z == world[i])
        q.append(p[i] * (hit * pHit + (1-hit) * pMiss))
        s = sum(q)
        for i in range(len(p)):
            q[i]=q[i]/s      
    return q

print sense(p,Z) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-11T14:45:52.810

在算术中，布尔值被视为整数。`True`被视为`1`和`False`被视为`0`。

```
>>> True + 1
    2
>>> False * 20
    0
>>> True * 20
    20 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-11T14:45:58.627

在 python 中，布尔值是 int 的子类：

```
>>> isinstance(True, int)
True 
```

它们基本上是 1 和 0：

```
>>> True * 1
1
>>> False * 1
0 
```

请参阅[为什么 bool 是 int 的子类？](https://stackoverflow.com/questions/8169001/why-is-bool-a-subclass-of-int)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-11T14:48:11.330

正如其他人所回答的那样，True is`1`和 False is 。`0`所以基本上，它的作用（以及应该写的）是：

```
p[i] * (pHit if hit else pMiss) 
```

# asp.net-mvc - oAuth 从一开始或以后实施

> ID：13332169
> 
> 赞同：1
> 
> 时间：2012-11-11T14:44:42.963
> 
> 标签：asp.net-mvc, oauth, asp.net-web-api, oauth-2.0

我正在开始使用 .NET MVC 创建一个新系统 - 这是一个规模相对较大的业务管理平台。有迹象表明，一旦平台发布并通过市场测试，我们将向公众开放平台。

我们将使用 ExtJs 作为前端，这导致我们以 JSON 格式实现大多数数据挖掘工作返回 - 这让我想我是否应该现在学习 OAuth 并尝试从一开始就嵌入 OAuth 概念？

基本上，我们要创建的平台最初将在内部使用小部件系统完全实现；我们的老板正在考虑向 Twitter 学习，只构建一个核心数据库，并将所有不同的功能分散到可以集成到平台中的其他模块中。为了确保这一点，我在一开始就提出了更安全的 Intranet 实现，无需太多身份验证；但是他们认为，如果我们能够在开始时将 OAuth 之类的良好实现引入平台，这将是一劳永逸的努力？（我们是 6 人团队，实际上我们对 OAuth 知之甚少！）

我对 OAuth 了解不多，所以如果值得在我们的系统开始时实施，我将不得不看一看，并在下周的会议上为 OAuth 投票。这可能会影响我们将如何实现整个 Web 服务的事情，所以在给我一些想法和建议之前，我可以问任何做过大规模 Web 服务/应用程序的人吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:52:54.847

如果您想使用 HTTP 连接，OAuth 1 就很好。如果您可以简单地为所有用户强制实施 HTTPS 连接，您可能希望使用 OAuth 2，它只不过是为每个请求发送的客户端和服务器之间的共享令牌，以及从用户通过 Web 界面。

如果您也必须接受纯 HTTP，OAuth 1 非常好。它可以防止重放攻击、数据包注入或修改，使用共享密钥而不是共享令牌等。但是，它比 OAuth 2 更难实现。

OAuth 2 主要是关于如何交换用户名/密码组合以获得访问令牌，而 OAuth 1 主要是关于如何通过未加密的连接向服务器发出半安全请求。如果您不需要任何这些，请不要使用 OAuth。在许多情况下，通过 HTTPS 的基本 HTTP 身份验证就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:21:17.960

OAuth 是身份验证和授权的标准。您可以在许多地方阅读并学习；通常，该标准允许客户端在身份验证服务器中注册，然后每当该客户端尝试访问受保护的资源时，他都会被引导到身份验证服务器以获取**令牌**（首先他获取代码，然后将其与令牌交换）。但这只是一般情况，这里有很多细节和选项......

基本上，**使用 oAuth 需要一个充分的理由**。如果更简单的身份验证机制对您有好处 - 去吧。

# html - CSS表格自定义宽度

> ID：13332171
> 
> 赞同：0
> 
> 时间：2012-11-11T14:45:31.683
> 
> 标签：html, css, html-table, width

我最近一直在做一个简单的网页。我想将几乎所有样式信息放在 CSS 文件中。页面的主要布局是一个表格。我看起来像这样：

```
<body>
<table class="glowna">
<tr>
  <td colspan="2">...</td>
</tr>
<tr>
  <td id="glowna_top" colspan="2">
    <ul class="menu_gorne">
      <li>..</li>
    </ul>
  </td>
</tr>
<tr>
  <td id="glowna_menu_lewe">
    <ul class="menu_lewe">
      <li>...</li>
    </ul>
  </td>
  <td id="glowna_main">
      ...
  </td>
</tr>
</table>
</body> 
```

CSS就像：

```
ul.menu_lewe, ul.menu_gorne {
  display:block; list-style:none;margin:0;}
ul.menu_lewe { 
  width:200px; padding:2px 20px 2px 2px;
  background-color:#9ce;border:none; vertical-align:top;}
ul.menu_lewe li { 
  border-bottom:1px solid #9ce; }
ul.menu_lewe a:link, ul a:visited { 
  display:block;width:176px;text-decoration:none;padding:7px;font-  weight:bold;background-color:#27c;color:#def;border-right:10px solid #25b;border-left:5px solid #25b; }
ul.menu_lewe a:hover { 
  width:176px;background-color:#28e;color:#fff;border-right:20px solid #26d; }
ul.menu_gorne { 
  position:absolute; }
ul.menu_gorne li { 
  float:left;padding:2px 2px 2px 2px;background-color:#9ce;border:none; }
ul.menu_gorne a:link, ul a:visited { 
  text-decoration:none;display:block;width:200px;text-align:center;padding:5px 0;font-weight:bold;background-color:#27c;color:#def;border-top:10px solid #25b; }
ul.menu_gorne a:hover { 
  background-color:#28e;color:#fff;border-top:20px solid #26d; }
ul.lista_dostawcow {
  width:800px;}
table.glowna { 
  background-color:#9ce;table-layout:fixed;width:1024px;margin-left:auto;margin-right:auto; }
td#glowna_top { 
  height:55px; vertical-align:top;}
td#glowna_main { 
  width:824px; text-align:left;}
td#glowna_menu_lewe { 
  width:200px;} 
```

问题是：
**1**。即使我设置了所有宽度，我仍然得到表格单元格：“ **glowna_menu_lewe** ”和“ **glowna_main** ”划分**为 50%:50%**。我希望单元格“ **glowna_menu_lewe** ”只有200**像素**或附近，而另一个可能会填满其余的空间。

**2** . 我想将列表“ **menu_lewe** ”放在其单元格的**顶部**。现在，即使我将**verical-align**属性设置为顶部，它也是垂直居中的。

很抱歉发布了这么多代码，但我不知道可能导致问题的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:08:47.407

1 - 改变：

```
table.glowna { 
  background-color:#9ce;
  table-layout:fixed;
  width:1024px;
  margin-left:auto;
  margin-right:auto; 
}
td#glowna_main { 
  width:824px;
  text-align:left;
} 
```

对此：

```
table.glowna { 
  background-color:#9ce;
  width:1024px;
  margin-left:auto;
  margin-right:auto;
}
td#glowna_main { 
  text-align:left;
} 
```

2-使用`valign="top"`属性来`td`标记而不是`vertical-align:top;`

# android - 跨平台（C++/Android）无损/低噪声视频压缩/解压缩库

> ID：13332180
> 
> 赞同：6
> 
> 时间：2012-11-11T14:46:16.727
> 
> 标签：android, c++, cross-platform, video-streaming, lossless-compression

我需要压缩视频流以通过网络将其从 C++ 库传输到 Java 平台 (Android) 并在那里解压缩。要求如下：

*   该库必须可用于 Android 平台和 C++（或者，使用通用格式的 2 个单独的库）
*   压缩必须是无损或有损且伪影最少
*   库（-ies）必须是免费/开源的

该任务的具体细节是视频流将是飞机 MFD 类型，因此会有大量像素在多个帧中保持相同。这应该对压缩有很大帮助。

以上是否有任何“捷径”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:01:15.560

从[开源视频编解码器](http://en.wikipedia.org/wiki/List_of_open_source_codecs)中搜索。似乎有两个是无损列出的。这些在 Android 上有多有用或便携性如何很难说。我不认为有任何更简单的路径。

# erlang - pid_to_list() 改变 pid 的值？

> ID：13332181
> 
> 赞同：2
> 
> 时间：2012-11-11T14:46:17.687
> 
> 标签：erlang

我有如下代码：

```
PID = spawn_link(DistrNode, ......

io:format("~p debug1 ~n",[PID]),
io:format("~p debug2 ~n",[pid_to_list(PID)]), 
```

我得到这样的：

> <10062.97.0> 调试1
> 
> “<9453.97.0>”调试2

我想将 PID 作为字符串抓取，但不要像上面那样更改值 - 这里发生了什么？我看了将 pid 转换为 atom，但那里没有功能。

我想得到“<10062.97.0>”

**编辑它 spawn_link() 而不是 spawn() 这有什么不同吗？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-11T19:59:40.207

发生的事情是这样的：您正在节点 X 上执行对 io:format() 的两个调用，但 PID 是节点 Y 上的一个进程。对 pid_to_list(PID) 的调用创建了一个字符串，表示如何从节点 X 引用 PID：" <9453.97.0>”。然后将该字符串发送到 I/O 流，这不会进一步更改该字符串。

但是，当您在节点 X 上调用 io:format("~p debug1 ~n",[PID]) 时，格式字符串 "~p debug1 ~n" 和参数 [PID] 会按照格式 I 发送/O 向与终端对话的节点 Z 发出请求，并且在该节点上格式化 PID（也使用 pid_to_list(PID)，生成 <10062.97.0>。请注意，只有第一个数字不同；10062 是 Z 的数字用于引用节点 Y，而 X 使用 9453 引用节点 Y。0 作为第一个数字意味着它是本地节点上的 pid。

# c# - 我想将撇号存储在 john's watch 等消息框中。它在 's 附近显示错误

> ID：13332183
> 
> 赞同：0
> 
> 时间：2012-11-11T14:46:18.237
> 
> 标签：c#, asp.net, sql-server

请帮我存储撇号。我正在创建一个网站（C#、.net、SQL Server）并希望为用户提供一个消息框，但问题是当我插入任何消息时，例如`John's`它在`''s'`.

请告诉我如何将撇号存储在数据库中

我使用`nvarchar`,`varchar`和所有内容，但未能存储包含消息的撇号。

一般的解决方案是用双撇号写消息，但这不是网站的解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T14:55:56.917

您对[SQL-Injection](http://msdn.microsoft.com/en-us/library/ms161953%28v=sql.105%29.aspx)开放。不要连接字符串来构建您的查询。而是使用`SQL-Parameters`. 这也使您的代码更具可读性并防止像您这样的错误。

这是一个例子：

```
int amt;  
using (var con = new SqlConnection(ConnectionString)) {
    var sql = "INSERT INTO dbo.Message(UserID, Message) VALUES(@UserID, @Message);";
    using (var cmd = new SqlCommand(sql, con)) {
        cmd.Parameters.AddWithValue("@UserID", userID); // passed as argument
        cmd.Parameters.AddWithValue("@Message", txtMessage.Text); // f.e. "John's"
        con.Open();
        int inserted = cmd.ExecuteNonQuery();
    }
} 
```

这同样适用于其他类似 sql 的`UPDATE`命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T14:55:44.340

问题是你需要用另一个撇号来逃避撇号。

例如看看：http://sqlfiddle.com/#!3/d2f75/1

```
CREATE TABLE tblTEst( col1 NVARCHAR(50))

INSERT INTO tblTest
  (Col1)
SELECT 'John''s' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T14:55:56.047

最好的解决方案是使用准备好的语句（或 C# 中的任何等效语句），其中您的 SQL 仅包含占位符，并且您通过不同的方法传递实际值。

在字符文字中，单引号`'`可以通过简单地加倍来使用：

```
insert into foo (bar)
values
('John''s'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T14:52:03.247

**像这样在john** & **s**`CHAR(39)`之间使用 ：****`'john'+CHAR(39)+'s'`****

# php - 获取日期之间的时间（）

> ID：13332191
> 
> 赞同：0
> 
> 时间：2012-11-11T14:47:16.013
> 
> 标签：php, date, time

我需要获取日期之间的所有天数，例如从 2012 年 11 月 11 日到 2012 年 11 月 27 日的所有星期一

time() 格式，它是提醒应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:55:51.377

你可以试试

```
$dateStart = new DateTime();
$dateStart->setDate(2012, 11, 11);

$dateEnd = new DateTime();
$dateEnd->setDate(2012, 11, 27);

$dates = array();
$dateStart->modify("next Monday"); // get next monday
while ( $dateStart <= $dateEnd ) {
    $dates[] = $dateStart->format("d/m/Y");
    $dateStart->modify("next Monday"); // Loop to another monday
}
var_dump($dates); 
```

输出

```
array (size=3)
  0 => string '12/11/2012' (length=10)
  1 => string '19/11/2012' (length=10)
  2 => string '26/11/2012' (length=10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T14:50:30.957

首先使用strtotime php函数将日期转换为时间，[检查PHP手册中的strtotime](http://php.net/manual/en/function.strtotime.php)

# python - 保存网页源的固有方法

> ID：13332192
> 
> 赞同：16
> 
> 时间：2012-11-11T14:47:16.733
> 
> 标签：python, web-scraping

我已经阅读了很多关于 Web 抓取的答案，其中谈到了 BeautifulSoup、Scrapy 等来执行 Web 抓取。

有没有办法相当于从网络浏览器中保存页面的源？

也就是说，在 Python 中有没有办法将它指向一个网站并让它将页面的源代码保存到一个仅包含标准 Python 模块的文本文件中？

这是我要去的地方：

```
import urllib

f = open('webpage.txt', 'w')
html = urllib.urlopen("http://www.somewebpage.com")

#somehow save the web page source

f.close() 
```

我知道的不多——但正在寻找代码来实际提取页面的源代码，以便我可以编写它。我收集到 urlopen 只是建立了一个连接。

也许有一个 readlines() 等效于阅读网页的行？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-11T14:52:25.883

您可以尝试`urllib2`：

```
import urllib2

page = urllib2.urlopen('http://stackoverflow.com')

page_content = page.read()

with open('page_content.html', 'w') as fid:
    fid.write(page_content) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-11T18:22:07.210

更新了 Python 3 的代码（不推荐使用 urllib2）：

```
from urllib.request import urlopen
html = urlopen("http://www.google.com/")
with open('page_content.html', 'w') as fid:
    fid.write(html) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-24T07:19:04.043

SoHei 的回答将不起作用，因为它缺少 html.read() 并且文件必须使用“wb”参数而不是“w”打开。'b' 表示数据将以二进制模式写入（因为 .read() 返回字节序列）。完整的工作代码是：

```
from urllib.request import urlopen
html = urlopen("http://www.google.com/")
page_content = html.read()
with open('page_content.html', 'wb') as fid:
     fid.write(page_content) 
```

# c# - 管理异常

> ID：13332194
> 
> 赞同：0
> 
> 时间：2012-11-11T14:47:18.650
> 
> 标签：c#, asp.net-mvc, try-catch

> **可能重复：**
> [处理异常的最佳方法是什么以及如何在 asp.net 中处理它们](https://stackoverflow.com/questions/5150330/whats-the-best-way-to-handle-the-exceptions-and-how-to-deal-with-them-in-asp-ne)

我用 ASP.NET MVC 构建了一个网站。在内部函数中，我处理逻辑，针对数据库等。在内部，我使用 try catch 来处理意外异常。

因为我需要了解向客户端返回消息的异常，所以我还需要在调用内部函数的控制器中使用 try catch。这对性能很重要吗？

在我的站点中处理异常的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:10:19.507

每次您尝试捕获异常时，都会付出巨大的代价。理想情况下，您应该只对真正的异常使用 try-catch。如果您使用它来返回消息（作为正常工作流程的一部分），它将对您的性能产​​生影响（这确实是一种不好的做法）。

例子：

*   您需要尝试捕获任何外部依赖项：数据库连接、webservice、wcf ......您也可以*使用 using*子句来实现。

*   你**不需要**尝试捕捉你可以用
    逻辑控制的东西。例如，用户名和密码 string.Empty（您可以
    验证输入数据，而不依赖于 try-catch）。

如果您不打算控制异常或采取行动，请不要捕获并让上层处理异常。采取行动的一个很好的例子是在 finally 子句上释放资源，在 catch 上重新抛出异常。这会影响性能，但也会留下未释放的资源。

异常管理策略在大型项目中很重要。在一个简单的应用程序中不会有什么大不了的，但是如果您要承受巨大的负载，您应该仔细考虑谁将负责处理异常。

# cucumber - 有没有办法指定可以包含在功能中的通用 Cucumber 测试？

> ID：13332196
> 
> 赞同：2
> 
> 时间：2012-11-11T14:47:26.673
> 
> 标签：cucumber, bdd

有没有办法跨多个功能重用黄瓜场景，每个功能都共享相同的 UI 特征？

例如，如果我正在创建一个 iPhone 应用程序，那么无论实际显示什么，我都会为每个表格视图屏幕运行某些测试。这些将是添加新行、删除行、重新排序等。

将这些复制并粘贴到每个功能中会破坏 DRY。有没有办法在黄瓜中指定通用或模板化测试，我可以将其包含到需要它们的每个功能中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:51:40.397

不要将 BDD 视为测试。可以将其视为提供一组示例，说明您的应用为何有价值以及如何使用它。

如果应用程序对每个表使用相同的代码，那么您只需要一个示例。我希望它的措辞类似于：

```
Given Quentin has three films listed
When he adds "Kill Bill" to the film list
Then he should be reminded that he already owns it.

Given Quentin has mistakenly added "Twilight" to his favourite films
When he deletes it from the film list
Then it should no longer be in the table. 
```

您可以制作的场景越有趣和人性化，您就越能够弄清楚为什么您的应用程序很有价值。那是 BDD 的真正核心——不是测试，而是首先知道为什么要编写代码。

与真正想要该应用程序的人交谈将帮助您了解它应该做什么 - 如果您自己编写它，请购买橡皮鸭！

# flash-cs5 - flash cs5.5中的文件夹层次结构

> ID：13332197
> 
> 赞同：1
> 
> 时间：2012-11-11T14:47:28.890
> 
> 标签：flash-cs5

我正在尝试在 Flash 中创建文件夹层次结构，我拥有的文件夹是

C:\uk\ac\uwe\webgames\math

在数学文件夹中，我有以下名为 GameMath.as 的文件

```
package uk.ac.uwe.webgames.math{

    public class GameMath {

// ------- Constructor -------
        public function GameMath() {

        }

// ------- Properties -------

        const PI:Number = Math.PI;

        // ------- Methods -------

public function areaOfCircle(radius:Number):Number {

        var area:Number;
        area = PI * radius * radius;
        return area;

}

    }
} 
```

在 webgames 文件夹中，我有一个名为 webgames_driver.fla 的文件

```
import uk.ac.uwe.webgames.math.GameMath;
import flash.text.TextField;

// Create a GameMath instance 

var output:TextField = new TextField();

var aGameMathInstance:GameMath = new GameMath();

// you will need to create a dynamic textfield called
// output on the stage to display method return value

output.text=aGameMathInstance.areaOfCircle(5).toString();
addChild(output);

//trace(aGameMathInstance.areaOfCircle(1)) 
```

但是我收到以下错误

> 场景 1，图层“图层 1”，第 1 帧，第 1 行 1172：定义 uk.ac.uwe.webgames.math：找不到 GameMath。
> 
> 场景 1，图层“图层 1”，第 1 帧，第 1 行 1172：定义 uk.ac.uwe.webgames.math：找不到 GameMath。
> 
> 场景 1，图层“图层 1”，第 1 帧，第 5 行 1046：找不到类型或不是编译时间常数：GameMath。
> 
> 场景 1，图层“图层 1”，第 1 帧，第 5 行 1180：调用可能未定义的方法 GameMath。

任何人都可以帮助因为我只是卡住了，而且我真的是新来的闪存

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:32:34.003

我会尽可能地用基本和详细的术语来说明这一点，这不仅是为了您的利益，也是为了其他阅读本文但对自定义类没有丰富经验的人。最好现在就把它全部拿出来，避免混淆。（我知道我希望有人在我早期的一些问题上给我这个级别的详细信息......）

导入代码用于导入 .as 类。如你所知，在一个类的顶部，你会有这样的代码（除了我自己的自定义类，Trailcrest）。

```
package trailcrest
{
   public class sonus
   { 
```

然后，在我的 .fla 或 .as 文件中，我可以使用

```
import trailcrest.sonus; 
```

我会提到您的 .fla 必须位于包含您要导入的所有自定义类的主目录中。我的文件布局是这样的（括号中的文件夹）：

```
MyProject.fla
MyDocumentClass.as
(trailcrest)
   sonus.as 
```

请注意，我的包名称与文件夹结构相对应，其中包含 .fla 的文件夹被代码假定为起始位置。如果我想使用像 trailcrest.v1 这样的包名，文件夹必须是这样的：

```
MyProject.fla
MyDocumentClass.as
(trailcrest)
   (v1)
      sonus.as 
```

然后，我会参考我的自定义类使用

```
import trailcrest.v1.sonus; 
```

请注意，MyProject.fla 必须位于该文件夹结构的主目录中。这是因为 Flash 不能向后搜索文件夹，只能向前搜索。所以如果我有这样的结构......

```
(project)
   MyProject.fla
   MyDocumentClass.as
(trailcrest)
    sonus.as 
```

...然后，代码行...

```
import trailcrest.sonus; 
```

...将搜索路径“\project\trailcrest\sonus.as”，如您所见，该路径不存在。Flash 无法转到“\project\”的父文件夹。

**你的代码行...**

```
import uk.ac.uwe.webgames.math.GameMath; 
```

...正在寻找路径“ *webgames\uk\ac\use\webgames\math\GameMath.as* ”。（请记住，代码假定包含 .fla 的文件夹作为起始位置，因此代码实际上是在尝试转到“ *C:\uk\ac\uwe\webgames\uk\ac\use\webgames\math\GameMath.作为*“）

**要解决此问题，您需要更改 GameMath.as: 的包**。

```
package math{ 
```

**...以及代码中的 import 语句：**

```
import math.GameMath; 
```

这会将所有内容指向文字路径“ *C:\uk\ac\uwe\webgames\math\GameMath.as* ”

我希望这回答了你的问题！

# java - 打开跟踪文件时出错：目录 (2) 中没有此类文件，找不到文件

> ID：13332198
> 
> 赞同：3
> 
> 时间：2012-11-11T14:47:34.103
> 
> 标签：java, android, file-io, inputstream, trace

我刚来这地方。我认为自己已经打破了新手主义，我正在进入中级编程。我正在尝试从我的资产文件夹中读取，我遇到的问题是我的程序不断捕获异常。你能帮我弄清楚我做错了什么吗？这是我的代码：

```
 package com.example.testone;

    import java.io.ByteArrayOutputStream;
    import java.io.IOException;
    import java.io.InputStream;
    import android.app.Activity;
    import android.content.res.AssetManager;
    import android.os.Bundle;
    import android.widget.TextView;

    public class AssetsTest extends Activity {

    @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    TextView textView = new TextView(this);
    setContentView(textView);

    AssetManager assetManager = getAssets();
    InputStream inputStream = null;

    try {
        inputStream = getAssets().open("myawesometext.txt");
        String text = loadTextFile(inputStream);
        textView.setText(text);
    } catch (IOException e) {
        textView.setText("Couldn't load file");
    } finally {
        if (inputStream != null)
            try {
                inputStream.close();
            } catch (IOException e) {
                textView.setText("Couldn't close file");
            }
    }
}

public String loadTextFile(InputStream inputStream) throws IOException {
    ByteArrayOutputStream byteStream = new ByteArrayOutputStream();
    byte[] bytes = new byte[4096];
    int len = 0;
    while ((len = inputStream.read(bytes)) > 0)
        byteStream.write(bytes, 0, len);
    return new String(byteStream.toByteArray(), "UTF8");
} 
```

}

我搜索了包括这个网站在内的每个网站，梳理了其他类似的问题，但找不到适合我的答案。非常感谢您的帮助。

提前致谢！

# php - 发送帖子时php会话会过期吗？

> ID：13332199
> 
> 赞同：2
> 
> 时间：2012-11-11T14:48:04.223
> 
> 标签：php, session-timeout

基本上，当用户在网站上冲浪时，php 会话不会过期。但是“当用户在网站上冲浪时”意味着有 get 和 post 请求。不过，我不知道是否必须有新请求，或者一个活动请求是否足以维持会话……</p>

对于instantce，我通过邮寄上传了一个大文件。然后可能需要几个小时。会话是否会过期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:53:02.570

会话的生命周期取决于 ini 设置[`session.gc-maxlifetime`](http://www.php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime)。对会话的每次访问（读取和写入）都会重置计时器。超时后，当会话垃圾收集器运行时，会话值被销毁。

默认值为 1440，即 24 分钟。因此，如果您有至少每 24 分钟以任何方式访问会话的点击，则会话值将保持不变。

如果您需要会话保持更长的时间，您可以使用`ini_set`(use before `session_start()`) 延长超时时间，例如：

```
ini_set('session.gc_maxlifetime', 24*60*60); // 24 hours 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T14:54:17.620

它不应该。通常当我使用 $_SESSION 时，它们会持续一天左右。但它可能在某些服务器上。在这种情况下，您也需要添加 cookie。使用 cookie，您可以准确地操纵该人可以在线的时间。

# xcode - MacRuby gem 签名无效

> ID：13332202
> 
> 赞同：2
> 
> 时间：2012-11-11T14:48:27.000
> 
> 标签：xcode, gem, macruby

我正在使用 Xcode 4.5.2 和 MacRuby 0.12。我需要使用电子表格 gem，但是当我尝试执行我的程序时，我一直遇到“签名”问题：

```
/Library/Ruby/Gems/MacRuby/0.13/gems/ruby-ole-1.2.11.5/lib/ole/storage/base.rb:372:in `validate!': OLE2 signature is invalid (Ole::Storage::FormatError)
    from /Library/Ruby/Gems/MacRuby/0.13/gems/ruby-ole-1.2.11.5/lib/ole/storage/base.rb:364:in `initialize'
    from /Library/Ruby/Gems/MacRuby/0.13/gems/ruby-ole-1.2.11.5/lib/ole/storage/base.rb:105:in `load'
    from /Library/Ruby/Gems/MacRuby/0.13/gems/ruby-ole-1.2.11.5/lib/ole/storage/base.rb:72:in `initialize'
    from /Library/Ruby/Gems/MacRuby/0.13/gems/ruby-ole-1.2.11.5/lib/ole/storage/base.rb:78:in `open'
    from /Library/Ruby/Gems/MacRuby/0.13/gems/spreadsheet-0.7.4/lib/spreadsheet/excel/reader.rb:1179:in `setup'
    from /Library/Ruby/Gems/MacRuby/0.13/gems/spreadsheet-0.7.4/lib/spreadsheet/excel/reader.rb:121:in `read'
    from /Library/Ruby/Gems/MacRuby/0.13/gems/spreadsheet-0.7.4/lib/spreadsheet/excel/workbook.rb:32:in `open'
    from /Library/Ruby/Gems/MacRuby/0.13/gems/spreadsheet-0.7.4/lib/spreadsheet.rb:62:in `open'
    from /Library/Ruby/Gems/MacRuby/0.13/gems/spreadsheet-0.7.4/lib/spreadsheet.rb:68:in `open' 
```

OLE gem 是否与 MacRuby 兼容？我在这里有什么选择？

谢谢你的帮助。

# asp.net - 如何在 SQL Server 和 C# 中使用 LINQ？

> ID：13332204
> 
> 赞同：0
> 
> 时间：2012-11-11T14:48:37.610
> 
> 标签：asp.net, linq, sql-server-2008, c#-4.0

我想在 ASP.NET 中使用 LINQ 以通过快速访问 SQL Server 2008 来提高性能。
我想知道如何在 C# 中使用 Linq 队列。所以我可以在我的项目中执行所有的 Linq 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:11:09.550

这个页面是你的朋友，学习它:)

以简单但广泛的方式使用的 101 个 linq 示例，在此基础上扩展应该没问题

[http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

我想一个结构不好的问题的好答案

# cocos2d-iphone - Cocos2d for iPhone 中的整数对

> ID：13332205
> 
> 赞同：1
> 
> 时间：2012-11-11T14:48:49.520
> 
> 标签：cocos2d-iphone, integer

目前我正在`CGPoints`使用`ccp`宏存储整数网格坐标。Cocos2d for iPhone 中是否有类似`ccpi`存储一对整数的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T16:24:08.910

好吧，CGPoint 是一个包含 2 个浮点数的结构。因此，如果您想存储一对整数，一种方法是使用整数滚动您自己的结构。

```
struct CGIntegerPoint {
   NSInteger x;
   NSInteger y;
};

CG_INLINE CGIntegerPoint
CGIntegerPointMake(NSInteger x, NSInteger y)
{
  CGIntegerPoint p; p.x = x; p.y = y; return p;
} 
```

有了它，您可以根据需要定义自己的“ *ccpi* ”宏：

```
#define ccpi(__X__,__Y__) CGIntegerPointMake(__X__,__Y__) 
```

# php - 使用 MSQL、PHP 和 AJAX 的慢代码

> ID：13332206
> 
> 赞同：1
> 
> 时间：2012-11-11T14:48:55.337
> 
> 标签：php, html, mysql, ajax

我目前正在尝试学习 HTML、AJAX、PHP 和 MYSQL。我目前正在构建一个仅供内部使用的 webapp。它似乎可以工作，但现在我在使用 MYSQL 函数的代码中遇到了一些滞后。

这是发生的事情：

首先，我从 sql 数据库中创建了一些“个人资料图像”。像这样通过PHP：

```
 <?php
    $price = 30;
    $con = mysql_connect('localhost', 'root', 'root');
    if (!$con)
      {
      die('Could not connect: ' . mysql_error());
      }
    mysql_select_db("Og297", $con);
    $result = mysql_query("SELECT * FROM Og297.Drinkers");

    while($row = mysql_fetch_array($result))
        {
        $picture = $row['Picture'];
        $name = $row['Name'];
        $nameup= $name."up";
        $namep= $name."p";

        $Onbetaaldresult = mysql_query("SELECT COUNT(Betaald) AS ob FROM Og297.Bierlijst
        WHERE Betaald='1' AND Name='$name'");
        $Onbetaaldarray= mysql_fetch_array($Onbetaaldresult);
        $Onbetaald= $Onbetaaldarray['ob'];

        $Betaaldresult = mysql_query("SELECT COUNT(Betaald) AS b FROM Og297.Bierlijst
        WHERE Betaald='0' AND Name='$name'");
        $Betaaldarray= mysql_fetch_array($Betaaldresult);
        $Betaald= $Betaaldarray['b'];

    echo "<div onclick=\"addBeer('$name','$price');\" class= 'thumbnail'><img src= $picture height= '90' width= '90' alt= $name title= $name><div class= 'overlay'><span id=$nameup  class='unpaid'>$Onbetaald</span><span id= $namep class='paid'>/$Betaald</span></div></div>";
        }
    mysql_close($con);

    ?> 
```

因此，这为每个用户显示了一个图片 div，除此之外，它还显示跨度与 ID 的付费和未付费（该应用程序用于跟踪我们已经支付了多少啤酒以及还需要支付多少）。这一切都有效:)

接下来我有一些功能；

On 是 addBeer，它会将啤酒添加到表格中，包括该人的姓名。这是通过 Ajax 完成的。

```
function addBeer (n,p)
{
$.post("AddBeer.php",{naam: n, price: p});
updateBeer(n);
} 
```

因此，在将啤酒插入数据库后，我希望它更新付费和未付费跨度。我通过使用 updateBeer 来做到这一点。

```
function updateBeer (n) 
{
$.post("UpdateBeer.php",{naam: n},function(data) {
changeInfo(n,data.betaald,data.onbetaald);
},"json");
} 
```

这将返回 Json 对象中已支付和未支付的金额。然后将这些值（包括人名）提供给 changeInfo 函数，它将像这样更新跨度：

```
function changeInfo(n,b,ob)
{
window.alert("ja");
document.getElementById(n + "up").innerHTML=ob;
document.getElementById(n + "p").innerHTML="/" + b;
} 
```

但是，每次单击图像时信息都不会更新。它落后了，啤酒很难插入，但是跨度的更新却没有发生。怎么来的？

非常感谢您阅读这个巨大的问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:28:26.507

我的代码中的问题是 AJAX 请求异步。因此，在 AJAX 请求完成之前执行脚本的其余部分时会导致问题。诀窍是设置 AJAX 请求以将 Async 设置为 false！

谢谢！

# php - 为什么我的上传脚本没有将文件写入给定路径？

> ID：13332209
> 
> 赞同：0
> 
> 时间：2012-11-11T14:49:16.123
> 
> 标签：php, mysql, upload

我正在尝试按类别将图像上传到不同的目录..我已经设置了其他所有内容，但是当我尝试上传图像时，它涉及到 images/...而不是让我们说 images/boxes/...。为什么用$类别“盒子”的价值？我哪里做错了？这是我试图使用的脚本的一个例子..有人可以帮我吗？

```
$sql = mysql_query("UPDATE products SET product_name='$product_name', price='$price', details='$details', category='$category', subcategory='$subcategory' WHERE id='$pid'");
if ($_FILES['fileField']['tmp_name'] != "") {
    // Place image in the folder 
    $newname = "$pid.jpg";
    move_uploaded_file($_FILES['fileField']['tmp_name'], "../images/$newname");
}
header("location: inventory_list.php"); 
exit(); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:56:30.583

您是否尝试过首先使用“mkdir”创建目录？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:00:24.710

您的文件已上传到`images/...`您在`move_uploaded_file`

```
move_uploaded_file($_FILES['fileField']['tmp_name'], "../images/$newname"); 
```

如果您希望它`category`像`images/boxes/...`您需要的那样进入文件夹，请将其包含`category`在`move_uploaded_file` `string $destination`

```
move_uploaded_file($_FILES['fileField']['tmp_name'], "../images/$category/$newname"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-24T03:34:16.053

我刚刚自己解决了这个问题。我实际上使用的是您正在使用的完全相同的代码。我就是这样来找你的。

我来实施的解决方案是通过我的服务器控制面板更改读写权限。允许读取/写入/执行到主根目录中的*/store文件夹。*

希望这会有所帮助....一年后

# java - JavaFX TableView 动态列和数据值

> ID：13332212
> 
> 赞同：9
> 
> 时间：2012-11-11T14:49:30.470
> 
> 标签：java, swing, user-interface, tableview, javafx

我正在使用 JavaFX 使用简单的 CSV 查看器测试自己，但我一直在填充表数据。我确实动态地创建了列，但是数据值是不行的。我在网上搜索并找到了几种方法，但所有方法都包括一个带有自定义类（包括 get/set）的 ObservableList，它在 CSV 查看器中必须是动态的（CSV 可以有任意数量的列，这意味着任意数量的数据值）。

例子：

```
List<String> columns;
List<List<String>> data;

/* Fills 'columns' and 'data' */
parseCSV("C:/list.csv");

int columnIndex = 0;
TableColumn [] tableColumns = new TableColumn[columns.size()];        
for(String columName : columns) {
    tableColumns[columnIndex++] = new TableColumn(columName);
}
table1.getColumns().addAll(tableColumns);

for(List<String> dataList : data) {
    table1.setItems(dataList); // Requires an ObservableList!
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T20:33:00.183

使用[DataFX](http://www.javafxdata.org/)，这将使您的工作更轻松 :)

示例代码：

```
DataSourceReader dsr1 = new FileSource("your csv file path");
String[] columnsArray // create array of column names you want to display 
CSVDataSource ds1 = new CSVDataSource(dsr1,columnsArray);
TableView tableView = new TableView();
tableView.setItems(ds1.getData());
tableView.getColumns().addAll(ds1.getColumns()); 
```

参考： [DataFX简介](http://fxexperience.com/2011/10/introduction-to-datafx/)

**编辑：** **标准JavaFX方式**

替换您的代码：

```
for(List<String> dataList : data) {
    table1.setItems(dataList); // Requires an ObservableList!
} 
```

和

```
 //  which will make your table view dynamic 
 ObservableList<ObservableList> csvData = FXCollections.observableArrayList(); 

 for(List<String> dataList : data) {
     ObservableList<String> row = FXCollections.observableArrayList();
    for( String rowData : dataList) {
      row.add(rowData); 
  }
   cvsData.add(row); // add each row to cvsData
}

table1.setItems(cvsData); // finally add data to tableview 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-25T19:00:02.850

我没有遵循@invariant 的答案所描述的方式。

我有一个包含几列和很多行的excel文件。我用 a`HashMap`来跟踪哪个值属于哪个列。这边走：

```
int i = 0;
HashMap<String, Integer> columnNameIndexMap = new HashMap<>();

for (String header : excelFileData.getHeaders())
{
    TableColumn<List<String>, String> column = new TableColumn<>(header);
    columnNameIndexMap.put(header, i++); // Adding the connecting index to our map with key, name of column

    column.setCellValueFactory(data ->
            {
                String columnName = data.getTableColumn().getText();
                int currentIndex = columnNameIndexMap.get(columnName);
                String currentValue = data.getValue().get(currentIndex);

                return new SimpleStringProperty(currentValue);
            });
    tableView.getColumns().add(column);
}

for (List<String> row : excelFileData.getRows())
{
    tableView.getItems().add(row);
} 
```

PS：您也可以使用`excelFileData.getHeaders().indexOf(columnName)`来获取不带`HashMap`.

不要注意`excelFileData.getHeaders()`返回带有字符串的列表和`excelFileData.getRows()`返回带有字符串列表的列表（`List<List<String>>`）。

# ms-access-2007 - 在浏览保存的记录时控制表单对象的数据编辑

> ID：13332213
> 
> 赞同：0
> 
> 时间：2012-11-11T14:49:39.020
> 
> 标签：ms-access-2007

我在表格上建立了一个表格，它将导航显示存储在表格中每条记录中的数据。

在从表单中导航记录时，我需要限制数据的版本。可以通过单击命令按钮来允许编辑，例如（编辑）以更改已读取的数据。

这会发生吗？

如果有，请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T17:38:40.850

您可以使用表单的[Allow Edits](http://msdn.microsoft.com/en-us/library/office/bb237260%28v=office.12%29.aspx)属性来控制用户是否可以更改数据。请注意，允许编辑设置为 false，即使未绑定的控件也无法更改。在单击按钮将其设置为 true 后，确保在表单的 Current Event 中将 Allow Edits 切换为 false。

```
 Me.AllowEdits = True ''False 
```

# redirect - 具有函数属性的 Laravel 路由

> ID：13332219
> 
> 赞同：0
> 
> 时间：2012-11-11T14:50:51.627
> 
> 标签：redirect, routing, laravel

这可能是一个非常简单的问题。

我有一个索引函数，它可以根据传递给它的可选参数列出所有内容或特定项目。

我有控制器的这条路线：

```
Route::controller('movies/(:any)'); 
```

我想将它重定向到带有参数的电影索引函数。我不希望人们必须输入： www.site.com/movies/index/2 而是 www.site.com/movies/2

我在任何数组中尝试了一个问号和一个“闭包”函数（我认为这是正确的术语）来允许我重定向。

关闭尝试如下所示：

```
Route::controller('movies/(:any?)',function($id){
    return Redirect::to("movie/index/$id");
}); 
```

这给了我一个 404 错误。我做对了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:35:28.693

你不想在你的路线上区分它，让控制器决定做什么。

您的路线：

```
Route::get('movies/(:any)', 'movies@index'); 
```

你的控制器：

```
class Movies_Controller extends Base_Controller {

    public $restful = true; // i have this line on my Base_Controller

    function get_index($id = null)
    {
        if( ! is_null($id))
        {
            // return the movie
        }

        // return all movies
    }
} 
```

# asp.net-mvc-3 - 使用 mvc3 和 mysql.data 的单声道异常

> ID：13332220
> 
> 赞同：3
> 
> 时间：2012-11-11T14:50:55.600
> 
> 标签：asp.net-mvc-3, exception, mono, monodevelop, il

尝试`MySqlConnection`在基于 Mono 构建的 MVC3 应用程序中实例化新应用程序时出现以下异常（mono v 2.10.8.1，应用程序是为 .NET 4 编译的）

> System.Data.Common.DbConnection:.ctor () 中的 IL 代码无效：方法体为空。

我创建了另一个命令行应用程序并尝试连接并且效果很好。

我已经用 MySql.Data 6.5.4 和 6.4.5 对此进行了测试。我从 mvc3 项目中引用以下 dll：

*   System.Web.Helpers
*   系统.Web.Mvc
*   System.Web.Razor
*   System.Web.WebPages.Deployment
*   System.Web.WebPages
*   System.Web.WebPages.Razor
*   MySql.Data
*   微软.CSharp
*   系统
*   System.ComponentModel.DataAnnotations
*   系统核心
*   系统数据
*   系统.Web
*   System.Web.抽象
*   System.Web.DynamicData
*   System.Web.Extensions
*   系统.Web.路由
*   系统.Web.服务
*   系统文件
*   System.Xml.Linq

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-01T16:48:52.317

我在尝试在 linux 上运行 Mono 应用程序时遇到了这个问题，因为我将不兼容的 System.Data.dll 部署到目标系统。

安装 Mono System.Data 包（apt-get install libmono-system-data4.0-cil）为我解决了这个问题。

# asp.net - 如何在转发器中创建日期文本框？

> ID：13332221
> 
> 赞同：0
> 
> 时间：2012-11-11T14:50:56.760
> 
> 标签：asp.net, date, textbox, repeater

我正在按如下方式填充转发器：每行都有一个复选框，一些文本并且应该有一个日期 - 文本框。当检查特定的复选框时（如果（CB.Checked）。）我希望能够编辑该特定行的日期 - 文本框。然后将选定的行保存在新的数据表中以供进一步使用。

我的主要问题是找到一个优雅的方法，将 DATE - TEXTBOX 定义为一个对象，以便以某种方式将它插入到转发器的每一行中。我知道我可以将一个`<asp: textbox .. >`作为列插入只是如何使其成为日期 - 文本框

您的帮助将不胜感激。

ps由于我是菜鸟，也许举个例子可能更有用:)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:19:06.713

如果您不需要花哨的 UI（例如下拉日历或 TextBox 中的日期部分分隔符），您也许可以使用常规文本框和 CompareValidator。

```
<asp:TextBox id="date1" runat="server" />
<asp:CompareValidator ControlToValidate="date1" Type="Date" Text="*" ErrorMessage="Must be a date" runat="server" /> 
```

这不会为您的用户提供指导或提示，但会强制他们输入日期以提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T17:55:12.417

使用 jQueryUI 日期选择器 [http://jqueryui.com/datepicker/](http://jqueryui.com/datepicker/)

在您的 aspx 页面上：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
<script>
$(function() {
    $( "#<%= YorDateTextBoxID.ClientID %>" ).datepicker();
});
</script> 
```

# android - Android - 如何访问另一个列表中的列表的元素数据？

> ID：13332224
> 
> 赞同：1
> 
> 时间：2012-11-11T14:51:16.493
> 
> 标签：android, json, list

嗨，伙计们，我遇到了列表问题。

我想要做的是有一个 BasicNameValuePair 元素的列表，其中包含以下参数：

*   预览网址
*   艺术家姓名
*   曲目名称
*   艺术家查看网址
*   艺术品Url100

我从 JSON 文件中检索这些信息。

我必须将此列表存储在另一个列表中，该列表存储 10 个此类元素。

我宣布了这两个列表：

1.  `public static List<NameValuePair> songsInfo = new ArrayList<NameValuePair>(5);`
2.  `static List dieciCanzoni = new ArrayList(10);`

所以#2 必须包含#1 的10 个元素。

如何访问另一个列表内的列表中包含的数据？

请给我一些建议，谢谢大家！

**编辑：也许我找到了解决方案！**

就像上面建议的那样，我创建了通用字符串列表，控制内部数据的代码是这样的：

dieciCanzoni.get(i).get(5).compareTo("previewUrl")==0

我可以使用 get(5) 因为我知道它将是列表中的最后一个值，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:02:15.743

```
List.get(ELEMENT_AT); 
```

这将检索该列表中任何一种元素的列表（在这种情况下）。获得列表后，通过再次执行来检索列表中的内容。

```
List.get(ELEMENT_AT).get(ELEMENT_AT); 
```

这将检索第一个列表的元素（LIst），并获得一个元素。

但是要在列表中创建列表，您需要这样做：

```
List<CLASS> listParent=new ArrayList<CLASS>();
List<CLASS_IN> listChild=new ArrayList<CLASS_IN>();
addStuff();
for(...){
listParent.add(listChild);
} 
```

# html - Html 模式密码字符和数字

> ID：13332227
> 
> 赞同：1
> 
> 时间：2012-11-11T14:51:27.867
> 
> 标签：html, design-patterns

密码长度必须至少为 8 且不超过 16 个字符，并且由字母数字字符组成。每种类型必须至少有两个非连续字符：字母和数字。这意味着：一些字母被一些数字分隔，一些数字被一些字母分隔。

我需要使用正则表达式编写一个 html 模式。如何使用正则表达式编写此模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:11:00.237

标题中的“Html 模式”一词（尽管消息正文中没有）表明问题是如何在 HTML`pattern`中的属性中表达属性中的条件。`input type=password`

第一句中的条件很简单：假设我们将自己限制为 Ascii 字符，则属性为`pattern="[A-Za-z0-9]{8,16}"`.

第二句中添加的复杂性似乎无法用正则表达式表示。根据定义，该`pattern`属性仅限于正则表达式。

# c# - Python这是一个字符串还是一个字符串数组？

> ID：13332231
> 
> 赞同：1
> 
> 时间：2012-11-11T14:52:10.480
> 
> 标签：c#, python, porting

我正在尝试将 Python 程序转换为 C#。我不明白这里正在做什么。

```
def mrF(alg, times = 1):
    if ((times % 2) == 0):
        return alg
    else:
        if (alg == 'R'):
            return "L'"
        if (alg[0] == 'G'):
            return alg
        if (alg[-1] == "'"):
            return alg[:-1]
        elif (alg[-1] == '2'):
            return alg
        else:
            return (alg + "'") 
```

是`alg`字符串还是字符串数组还是列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T14:55:02.520

它是一个字符串。您可以在 Python 中的字符串上使用下标运算符，我认为这是您的代码中唯一的部分，这使您将其作为问题发布。

```
>>> "rohit"[0]
'r'
>>> "rohit"[-1]
't'
>>> "rohit"[0:2]
'ro' 
```

它类似于您在 中访问索引的方式`lists`。

# c# - 如何创建列表 来自资源的音乐

> ID：13332232
> 
> 赞同：0
> 
> 时间：2012-11-11T14:52:13.853
> 
> 标签：c#

你好如何`List<SystemSound>`从资源中创建一个音乐？

我试试这个，但我得到以下异常：

```
 List<System.Media.SystemSound> music = new List<System.Media.SystemSound>
    {
        global::Launcher.Properties.Resources.music_quit_1,
        global::Launcher.Properties.Resources.music_quit_2,
        global::Launcher.Properties.Resources.music_quit_3,
        global::Launcher.Properties.Resources.music_quit_4,
    }; 
```

> “参数 1：无法从 System.IO.UnmanagedMemoryStream 转换为 System.Media.SystemSound。”

从那我会随机播放音乐并播放它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:45:03.953

该类`System.Media.SystemSound`不以这种方式使用，该类仅用于表示**系统声音类型**，例如`Asterisk`、`Beep`、或。可以通过播放系统**声音**。`Hand``Question``Exclamation`**`SystemSounds`**

 ****例子**

```
SystemSounds.Asterisk.Play(); 
```

这个例子将播放**系统声音** `Asterisk`。这类似于`System.Drawing.Brush`你不能说`System.Drawing.Brush.Black`但你可以说`System.Drawing.Brushes.Black`。`System.Drawing.Brush`仅用于`Black`在新的名称类中将名称对象定义`System.Drawing.Brushes`为颜色`Black`。我们可以在定义中看到这一点`System.Drawing.Brushes`

```
//
// Summary:
//     Gets a system-defined System.Drawing.Brush object.
//
// Returns:
//     A System.Drawing.Brush object set to a system-defined color.
public static Brush Black { get; } 
```

此外，如果您想播放新的**Wave Sound**，您可以创建一个新类，该类控制**Sound Wave** (.wav) 文件`SoundPlayer`中声音的播放

 ****例子**

```
SoundPlayer _SoundPlayer = new SoundPlayer(); //Initializes a new SoundPlayer of name _SoundPlayer
_SoundPlayer.SoundLocation = @"D:\Resources\International\Greetings.wav"; //Sets the target Wave Sound file to D:\...\Greetings.wav
_SoundPlayer.Play(); //Plays the target Wave Sound file 
```

如果您仍想使用 Generic `List`。那么，也许下面的例子可以帮助你

**例子**

```
List<string> WaveSoundCollections = new List<string> { @"D:\Resources\International\Greetings.wav", @"D:\Resources\International\Good-Bye.wav" }; //Initializes a new Generic Collection of class List of type string and injecting TWO strings into the Generic Collection
SoundPlayer NewPlayer = new SoundPlayer(); //Initializes a new SoundPlayer
if (Client.Start) //Client refers to a particular Class that has Start and End as bool
{
    NewPlayer.SoundLocation = WaveSoundCollections[0]; //Set the SoundLocation of NewPlayer to D:\Resources\International\Greetings.wav
    NewPlayer.Play(); //Plays the target Wave Sound file
}
else if (Client.End)
{
    NewPlayer.SoundLocation = WaveSoundCollections[1]; //Set the SoundLocation of NewPlayer to D:\Resources\International\Good-Bye.wav
    NewPlayer.Play(); //Plays the target Wave Sound file
} 
```

**注意**：`SoundPlayer`仅用于播放**Wave** **Sound**文件。如果您想播放其他媒体文件，例如**.mp3**、**.mpeg**等...然后，您可以使用`System.Windows.Media.MediaPlayer`可以从其中导入的文件`Object Browser`来创建新类`MediaPlayer`并播放特定文件。

**例子**

```
string TargetFile = @"D:\File.mp3";
MediaPlayer _MediaPlayer = new MediaPlayer();
_MediaPlayer.Open(new Uri(TargetFile));
_MediaPlayer.Play(); 
```

**重要提示**：要使用`MediaPlayer`，您必须添加`WindowsBase`.

要添加 的新引用`WindowsBase`，请尝试以下操作：

*   右键单击**解决方案资源管理器**中的**引用**并选择**添加引用...**
*****   选择**WindowsBase**并单击**OK***   确保您刚刚添加的新引用将其名称**Copy Local**的 bool 属性设置为**True**，以便客户端在初始化期间不会遇到错误

     ![在这种情况下，将 CopyLocal 设置为 True 很重要](../Images/7108cc876de820bf9d60e479937af94f.png)**** 

 ****谢谢，
我希望你觉得这有帮助:)********

# php - 如何获取excel文件中每个单元格的值，然后将其保存到mysql数据库？

> ID：13332234
> 
> 赞同：1
> 
> 时间：2012-11-11T14:52:20.340
> 
> 标签：php, mysql, database, excel, xlsx

我正在使用 php，我使用 simplexlsx.class 来读取一个 excel 文件。我可以获得每行的所有值。但是，我不知道如何获取每个单元格的值，以便可以将这些值保存在数据库中。

我尝试了以下代码来打印每个单元格的值。但这只是为了打印。

```
for($j=1; $j <= $xlsx->sheetsCount();$j++){

    echo '<pre>';
    print_r( $xlsx->rowsEx($j) );
    echo '</pre>';
} 
```

$xlsx->rowsEx($j) 是数组形式 [name, value, href]。我只对价值感兴趣。下面是用于 rowsEx 的 simplexlsx.class 中的代码。

```
function rowsEx( $worksheet_id = 1 ) {
    $rows = array();
    $curR = 0;
    if (($ws = $this->worksheet( $worksheet_id)) === false)
        return false;
    foreach ($ws->sheetData->row as $row) {

        foreach ($row->c as $c) {
            list($curC,) = $this->_columnIndex((string) $c['r']);
            $rows[ $curR ][ $curC ] = array(
                'name' => (string) $c['r'],
                'value' => $this->value($c),
                'href' => $this->href( $c ),
            );
        }
        $curR++;
    }
    return $rows;

} 
```

我应该如何获得价值？您的帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:04:41.423

代码应读取单元格并将其插入数据库。`var_dump`如果您想查看里面的内容，您可以取消注释该行`$r`。请注意，代码不会检查数据是否可以安全地插入数据库。

```
$mysql   = mysql_connect('localhost', 'mysql_user', 'mysql_password');

list($num_cols, $num_rows) = $xlsx->dimension();

foreach( $xlsx->rows() as $r ) {
    //var_dump($r);
    $sql = "INSERT INTO `aTable` (`col1`, `col2`, `col3`)
        VALUES ('" . $r[0] . "', '" . $r[1] . "', '" . $r[2] . "')";        
    mysql_query($sql);
}
mysql_close($mysql); 
```

# c# - 为什么字符串被定义为类而不是结构？

> ID：13332235
> 
> 赞同：1
> 
> 时间：2012-11-11T14:52:24.213
> 
> 标签：c#, .net, string, class, struct

> **可能重复：**
> [在 C# 中，为什么 String 是一种行为类似于值类型的引用类型？](https://stackoverflow.com/questions/636932/in-c-why-is-string-a-reference-type-that-behaves-like-a-value-type)

是与性能有关还是有一些技术原因？

# php - MySQL/PHP 更新可变行数中的值

> ID：13332238
> 
> 赞同：3
> 
> 时间：2012-11-11T14:52:46.100
> 
> 标签：php, mysql, sql, arrays, sql-update

我有一张`users`表，用于存储用户信息以及 Stackoverflow 所具有的声誉评分。

我的问题是如何使用单个 MySQL 查询更新多个用户的声誉。

这是我的`users`桌子

```
user_id  reputation
  1          11
  2         202
  3        3003
  4         444
  5         555 
```

假设 user_id=1 否决了 user_id=4 和 user_id=5。在这种情况下，user_id=1 的声誉损失 2 分，而 user_id=4,5 的声誉都损失 10 分。

该`users`表将如下所示：

```
user_id  reputation
  1           9 //lost 2 points
  2         202
  3        3003
  4         434 //lost 10 points
  5         545 //lost 10 points 
```

我知道下面显示的 MySQL 查询有效，但我想知道在用户数量`UPDATE`可变且取决于投票的情况下，一个通用的解决方案。

```
UPDATE `users`
 SET `reputation` = CASE
 WHEN `user_id` = '1' THEN reputation - 2
 WHEN `user_id` = '4' THEN reputation - 10
 WHEN `user_id` = '5' THEN reputation - 10
 ELSE `reputation` END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T14:55:03.907

`WHEN`您可以用`IN()`子句替换第二个。它仍然需要在您的应用程序代码中构建一些动态查询，但是如果您的 API 允许将数组直接绑定到`IN()`子句中，这会容易得多。

```
UPDATE `users`
 SET `reputation` = CASE
 WHEN `user_id` = '1' THEN reputation - 2
 WHEN `user_id` IN ('2','3','4') THEN reputation - 10
 ELSE `reputation` END 
```

我承认我觉得将所有这些都强制到一个查询中有点尴尬。除非性能是一个真正的问题，否则我宁愿将其视为包含在事务中的两个查询 - 一个用于减去用户`-2`，`user_id=1`一个用于减去`-10`用户。

```
/* Only on InnoDB tables... */
START TRANSACTION;
Update `users` SET `reputation` = `reputation` - 2 WHERE `user_id` = 1;
Update `users` SET `reputation` = `reputation` - 10 WHERE `user_id` IN (2,3,4);
COMMIT; 
```

[关于 MySQL 事务处理的文档...](http://dev.mysql.com/doc/refman/5.0/en/commit.html)

# php - 在 Mysql 中存储一个 Facebook 访问令牌，以便稍后发布到墙上

> ID：13332243
> 
> 赞同：0
> 
> 时间：2012-11-11T14:53:26.810
> 
> 标签：php, facebook, access-token

我正在使用以下代码将我的 facebook 应用程序用户详细信息存储在 mysql 中，以允许他们在我的网站上查看独家内容。

我的问题很简单，如何将用户的访问令牌存储在我的 Mysql 表中，以便以后使用它来发布到墙上

```
<?php 
session_start(); 
if(isset($_POST["connect"]) && $_POST["connect"]==1)
 {      
include_once("config.php"); //Include configuration file.

//Call Facebook API
if (!class_exists('FacebookApiException')) {
require_once('inc/facebook.php' );
}
    $facebook = new Facebook(array(
    'appId' => $appId,
    'secret' => $appSecret,
));

$fbuser = $facebook->getUser();
if ($fbuser) {
    try {
        // Proceed knowing you have a logged in user who's authenticated.
        $me = $facebook->api('/me'); //user
        $uid = $facebook->getUser();
    }
    catch (FacebookApiException $e) 
    {
        //echo error_log($e);
        $fbuser = null;
    }
}

// redirect user to facebook login page if empty data or fresh login requires
if (!$fbuser){
    $loginUrl = $facebook->getLoginUrl(array('redirect_uri'=>$return_url, false));
    header('Location: '.$loginUrl);
}

//user details
$fullname = $me['first_name'].' '.$me['last_name'];
$email = $me['email'];
$username = $me['username'];
$gender = $me['gender'];
$locale = $me['locale'];
$token = $me['token'];

/* connect to mysql */
$connecDB = mysql_connect($hostname, $db_username, $db_password)or die("Unable to connect to MySQL");   
mysql_select_db($db_name,$connecDB);

//Check user id in our database
$result = mysql_query("SELECT COUNT(id) FROM usertable WHERE fbid=$uid");   
$UserCount = mysql_fetch_array($result); 

if($UserCount[0])
{   
    //User exist, Show welcome back message
echo 'Ajax Response :<br /><strong>Welcome back '. $me['first_name'] . ' '. $me['last_name'].'!</strong> AT : '.$token.' ( Facebook ID : '.$uid.') [<a href="'.$return_url.'?logout=1">Log Ouuuuuuuuuuuuuut</a>]';
echo '<iframe style="width:1309px; height:526px" src="post2.php"></iframe>';

    //User is now connected, log him in
    login_user(true,$me['first_name'].' '.$me['last_name']);
}
else
{
    //User is new, Show connected message and store info in our Database
    // Insert user into Database.
    @mysql_query("INSERT INTO usertable (fbid, fullname, email, username, gender, token, locale) VALUES ($uid, '$fullname','$email','$username','$gender','$token','$locale')");

    //User is now connected, log him in
    login_user(true,$me['first_name'].' '.$me['last_name']);
}

mysql_close($connecDB);
   }

  function login_user($loggedin,$user_name)
  {
/*
function stores some session variables to imitate user login. 
We will use these session variables to keep user logged in, until s/he clicks log-out link.
If you are using some authentication library, login user with it instead.
*/
$_SESSION['logged_in']=$loggedin;
$_SESSION['user_name']=$user_name;
 }

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:08:13.990

我不明白。您已经在保存令牌。

您需要做的是在仅经过身份验证的页面中验证用户是否已登录，如果是，您将返回他的 $_SESSION['user_id'] 的令牌（例如），并在 Facebook 中创建交互具有该令牌的 API，例如：

```
$token = $_SESSION['token'];
$facebook->setAccessToken($token); 
```

我希望它对你有所帮助。

# objective-c - Xcode - 将东西上传到服务器/网络服务（只是如何？！）

> ID：13332244
> 
> 赞同：0
> 
> 时间：2012-11-11T14:53:39.573
> 
> 标签：objective-c, ios, database, xcode

做好准备，因为这可能是一个非常愚蠢的问题。

让我们看一个像推特这样的应用程序。您可以发布推文，其他人可以通过他们的手机查看。如何 ？它从数据库上传和检索。

假设我想创建一个像 twitter 这样的应用程序，您可以在其中分享图片并显示在某人的提要中......这将如何工作？

在 xcode 中，如何创建一个将应用程序上传到数据库的应用程序，并且另一个用户可以按下按钮来检索它。是否有数据库 API 或服务？

我只是有点坚持这一点，我不确定正确的方法是什么。如何将数据上传到数据库，以便其他用户可以在他们的应用程序中看到它？

我不是要代码，只是链接、简单的步骤、API？我只是不知道它是如何工作的，也无法真正找到资源，因为我不知道正确的术语......

上传到核心数据然后将核心数据与数据库同步（我可以再次使用什么数据库？）是简单且最好的方法吗？

更新：

好的，所以你给了我一些很好的答案。web 服务/服务器上的 php 文件，你能给我指点一本书（在亚马逊上）或者可以指导我完成整个过程的东西吗？我想开始并努力解决这个问题，我不确定哪个是最好的方法，所有这些可能性都让我不知所措！

那么有什么大资源可以真正帮助我理解吗？我什至不介意从将字符串上传到 Web 服务后端并检索它开始！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:18:22.953

嗨试试这个教程，它很简单，正是你需要了解事情是如何工作的。

如何使用 Web 服务后端创建像 Instagram 这样的应用程序 - 第 1/2 部分

[http://www.raywenderlich.com/13511/how-to-create-an-app-like-instagram-with-a-web-service-backend-part-12](http://www.raywenderlich.com/13511/how-to-create-an-app-like-instagram-with-a-web-service-backend-part-12)

该网站上有更多教程。玩得开心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T15:27:20.680

如果您不想制作自己的服务器，请查看[Parse](http://parse.com)，他们为您提供 API 以使用他们的云数据库，这应该是一个很好的起点并且有很好的文档记录。

如果您确实想自己制作服务器端，那么这是一个更广泛的问题。一种流行的方法是创建一个 Web 应用程序，比如用 Rails 编写，并带有 REST API，您可以通过该应用程序与之交谈。请参阅有关在 heroku 上创建照片共享应用程序的[教程](https://devcenter.heroku.com/articles/ios-photo-sharing-geo-location-service)，它将帮助您入门，总体而言，它很好地概述了这些工作的工作原理。

# php - 将 php 脚本提供的功能转换为 API 的最简单/最快的方法

> ID：13332247
> 
> 赞同：1
> 
> 时间：2012-11-11T14:53:51.540
> 
> 标签：php, oauth, oauth-2.0

我有一组直接执行的 PHP 脚本——现在我想将核心代码（即 PHP 脚本提供的功能转换为 API）——我还希望 API 使用 OAuth2 对用户进行身份验证（之前API实际上可以由经过身份验证的用户使用...）

完成此任务的最短/最简单方法是什么？如果有某种方法可以自动执行此操作，那么快速完成会很棒，因为我有很多 PHP 代码想要转换为 API。

也欢迎任何指向此主题的指南/操作方法的链接....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T14:59:37.123

你可以试试restler框架，如果你已经以面向对象的方式构建了你的代码，那么你使用restler会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T18:54:38.487

我通常为此使用 Slim 框架：[http ://slimframework.com/](http://slimframework.com/)

`$app->get(/my/path/id/:id/`它有一组很好的 RESTful Helpers，一个模板系统（虽然我从未使用过），使用函数名映射到一个路由（如风格，但我喜欢它）

# vb6 - 打开映射文件夹可以加速网络连接吗？

> ID：13332254
> 
> 赞同：1
> 
> 时间：2012-11-11T14:54:19.387
> 
> 标签：vb6, network-programming

这是场景：

*   我的客户端机器通过路由器连接到数百英里外的服务器（我认为它是某种 VPN）
*   我的 VB6 程序正在等待在服务器上创建文件（映射驱动器）
*   我的 vb6 程序在看到该文件时，通过其 unc 路径在本地获取该文件并在底部添加一些文本，然后在本地打印到斑马打印机（这是我在下一个循环之后立即处理的一批文件）
*   这大约需要 30 秒（应该不到 1 秒）
*   当我以某种方式远程连接以进行故障排除时，我让它以正常速度打印，没有 30 秒的延迟
*   在对从 AV 扫描到文件夹权限的所有问题进行故障排除时，我开始怀疑，当我打开映射文件夹以查看放置到映射文件夹中的文件时，我每次文件操作的速度/延迟都会消失。
*   客户运行它的第二天 - 延迟又回来了
*   我正在考虑在批处理开始测试之前添加一些代码来“打开”该窗口，但甚至不确定如何编写代码。

所以我的问题是：可以在 Windows 资源管理器中打开映射文件夹以某种方式加快我的程序传输文件的速度吗？这似乎是正在发生的事情，但在我看来，这应该没有什么区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T20:42:23.250

有同样的问题，“内部”技术人员可以将其指向网络中文件系统的缓存（操作系统级别）。该缓存每隔这么多秒（在我的情况下为 15 秒）仅刷新一次。“关闭”和“重置”都不能强制服务器/PC 更快地刷新文件（甚至文件列表框中的 .refresh 也不行）。

所以，当我通过网络用“Dir”询问文件是否存在时，15 秒后我得到了答案。

但是，当我假设文件存在时，我会进行文件复制，然后等待错误，惊喜……我立即得到文件，或者立即得到错误。

顺便说一句，没有必要进行文件复制（例如，如果它是一个大文件）。重命名（并再次将其重命名为原始文件名）对我来说也是如此。

我们花了很多时间试图解决这个问题，但我们发现我们需要深入到操作系统中（并且每个版本都不同），所以我们选择使用“硬编码”文件，也就是说，我们让服务器制作本地（即在服务器上）包含他看到的文件的文本文件。该文本文件具有工作站知道的硬编码名称……然后工作站可以立即访问文件，而无需等待通过网络刷新文件系统。

这有点奇怪，我知道，但它确实对我们有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:54:11.947

别客气。也许对我们的解决方法的下一个澄清可能会有所帮助。

当文件存在时，它在网络上立即可见。当在服务器上创建一个新的（不是由读取客户端完成的创建）时，缓存的目录列表需要 15 - 30 秒才能刷新并对客户端可见（在 VB 中）。

远程连接程序通常会绕过此目录列表缓存。我们没有在 VB 中找到一种好的、经济实惠的方法来做到这一点，但这种变通方法对我们有用。

现在我们使用一堆已知的文件名，服务器上已经存在的文件（对客户端可见）。在带有硬编码名称的文本文件中，客户端可以找到哪些文件是供他阅读的。

奇怪的是......读取意思文件（在文本文件中找到）正在读取内容几乎没有任何延迟（在我们的测试中不到 1 秒）。延迟似乎只是文件名的外观，而不是它们的内容。

# c++ - C++继承与方法重载混淆

> ID：13332258
> 
> 赞同：3
> 
> 时间：2012-11-11T14:54:38.980
> 
> 标签：c++, inheritance, overloading

很抱歉，这太做作了，但这与家庭作业问题有关。我理解为什么一切都会发生，除了我评论的那一行。有人可以向我解释为什么 C++ 正在做它正在做的事情吗？

谢谢

```
#include <iostream>

using namespace std;

class X0 {};
class X1: public X0 {};
class X2: public X1 {};

class Y1
{
public:
    virtual void f(int v)       { cout << "Y1(int)" << endl; }
    virtual void f(const X0 *x) { cout << "Y1(X0)" << endl; }
    virtual void f(const X1 *x) { cout << "Y1(X1)" << endl; }
};

class Y2: public Y1
{
public:
    virtual void f(const X0 *x) { cout << "Y2(X0)" << endl; }
    virtual void f(const X1 *x) { cout << "Y2(X1)" << endl; }
    virtual void f(const X2 *x) { cout << "Y2(X2)" << endl; }
};

int main(int argc, char * argv[])
{
    X2 x2; X2 *X2Pointer = &x2;
    Y2 y2; Y1 *Y1Pointer = &y2;

    cout << "What is about to happen?" << endl;
    //Y1 pointer points to a Y2 object.
    //The Y2 class, upon being given an X2 pointer, should print Y2(X2)
    Y1Pointer->f(X2Pointer);
    cout << "Why did I just print Y2(X1)" << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T15:00:43.173

该类`Y1`公开了这些重载`f()`：

```
class Y1: public Y0 {
public:
    virtual void f(int v)       { cout << "Y1(int)" << endl; }
    virtual void f(const X0 *x) { cout << "Y1(X0)" << endl; }
    virtual void f(const X1 *x) { cout << "Y1(X1)" << endl; }
    // ...
}; 
```

所有其他调用`f()`继承自的方法`Y0`都是隐藏的。也就是说，当你打电话

```
Y1Pointer->f(X2Pointer); 
```

编译器对 的三个重载进行重载解析`f()`并得出`f(const X1*)`最佳匹配的结论并调用此函数。事实证明，这是一个`virtual`函数，被`Y2`and 覆盖，因此调用`Y2::f(const X1*)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T15:04:12.703

重载解决方案是根据所涉及的静态类型确定的。

`Y1Pointer->f(X2Pointer)`匹配到`Y1::f(const X1 *x)`，因为静态类型`Y1Pointer`是`Y1*`，所以是带参数`Y1::f(const X1 *x)`调用的最佳匹配。`f``X2*`

`Y1::f(const X1 *x)`是虚拟的，所以实际调用的函数是由动态类型决定的。`Y1Pointer`指向 a `Y2`，因此调用的`Y2`版本。`f(const X1 *x)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T15:05:09.107

该类`Y1`没有消耗`X2 *`. 函数调用的最佳匹配`Y1Pointer->f(X2Pointer)`是`Y1::f(X1 const *)`. 您所指向的实际对象的`Y1Pointer`派生程度高于这一`Y1`事实并不重要，因为它与选择的重载无关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T15:13:13.657

正如其他提到的，问题是功能隐藏。但是您可以做的是在 Y1 行内写入`using Y0::f;`以获得您想要的结果。

# android - 在 Android 中使用 file:// 访问本地文件

> ID：13332261
> 
> 赞同：2
> 
> 时间：2012-11-11T14:54:57.903
> 
> 标签：android

我想从我的应用程序链接到我的 Android 设备中的本地文件。只需从浏览器中使用 file:// 打开它即可。这在 Android 中是否可行，如果可以，我需要放置什么路径，只是尝试 file:// 不会在 chrome 浏览器中显示任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T14:59:03.807

> 这在Android中可能吗

这将取决于浏览器。

> 如果是这样，我需要放置的路径是什么

您可以使用`file://`指向世界可读文件的 URL。

> 只是尝试 file:// 不会在 chrome 浏览器中显示任何内容

您需要遵循`file://`世界可读文件的路径。由于您的网站可能不知道这条路径是什么，因此我不知道您希望如何设置此链接。

但是，例如，假设您的设备的外部存储位于`/mnt/sdcard/`，并且您在其中有一个名为 的文件`foo.txt`，您可以输入`file:///mnt/sdcard/foo.txt`以在 Chrome 中显示它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-07T19:00:22.723

我从 Yahoo 邮箱下载的文件存储在 /storage/emulated/0/Download 中。我用termux证实了这一点。此目录中的文件可以被称为 file:///storage/emulated/0/Download/file.ext 或被 chrome 浏览器称为 file:///sdcard/Download/file.ext。这些 URL 均不适用于 Firefox 浏览器（版本 61.0）。Firefox 似乎是为通过工具访问下载而设计的 | 下载但可能只有浏览器下载的文件。回到 chrome，更一般的情况下，我可以转到 file:///sdcard 并查看许多文件和目录。作为替代方案，您可以通过设置网络服务器来解决文件权限问题。如果您是程序员，一种方法是安装 node.js（和 termux）并使用 express 编写 HTTP 服务器。这当然会被解决为[http://localhost:8080/file.ext](http://localhost:8080/file.ext)，假设配置为监听 8080 端口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-23T09:54:54.810

另一个流行的路径是

```
/storage/emulated/0/ 
```

所以下载目录中索引文件的路径是

```
file:///storage/emulated/0/Downloads/index.html 
```

如何轻松确定本地路径？使用默认图像查看器打开本地存储的图像，在上下文菜单中选择图像详细信息。这将包括给定系统上的绝对路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-30T08:20:47.427

`file:///path/to/foo.txt`会给你文件的url路径。确保文件是世界可读的。

如果您尝试在您的应用程序中访问文件，请确保您有权限`READ_EXTERNAL_STORAGE`。在 API 版本 23 以上，您必须明确向用户请求存储权限。此[链接](https://stackoverflow.com/a/33162451/4269615)详细说明了如何执行此操作。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-02-27T15:33:34.390

file:///sdcard/ 有效，但它只显示内部存储器

# gridview - WinRT XAML GridView 控件中的“粘滞滚动”问题

> ID：13332266
> 
> 赞同：4
> 
> 时间：2012-11-11T14:55:14.300
> 
> 标签：gridview, padding, winrt-xaml, horizontal-scrolling, sticky

我在 Windows 应用商店应用页面中定义了一个非常基本的 GridView 控件，如下所示：

```
 <GridView
        x:Name="myGridView"
        Grid.RowSpan="2"
        Padding="30,137,40,46"
        ItemsSource="{Binding Source={StaticResource myItemsViewSource}}"
        ItemTemplate="{StaticResource My500x500ItemTemplate}"
        SelectionMode="Multiple"
        IsSwipeEnabled="True"
        IsItemClickEnabled="True">

        <GridView.ItemsPanel>
            <ItemsPanelTemplate>
                <VirtualizingStackPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </GridView.ItemsPanel>
        <GridView.GroupStyle>
            <GroupStyle>
                <GroupStyle.HeaderTemplate>
                    <DataTemplate>
                        <Grid Margin="1,0,0,6">
                            <Button
                            Style="{StaticResource TextPrimaryButtonStyle}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding Title}" Margin="3,-7,10,10" Style="{StaticResource GroupHeaderTextStyle}" />
                                    <TextBlock Text="{StaticResource ChevronGlyph}" FontFamily="Segoe UI Symbol" Margin="0,-7,0,10" Style="{StaticResource GroupHeaderTextStyle}"/>
                                </StackPanel>
                            </Button>
                        </Grid>
                    </DataTemplate>
                </GroupStyle.HeaderTemplate>
                <GroupStyle.Panel>
                    <ItemsPanelTemplate>
                        <VariableSizedWrapGrid/>
                    </ItemsPanelTemplate>
                </GroupStyle.Panel>
            </GroupStyle>
        </GridView.GroupStyle>
    </GridView> 
```

在运行时，绑定到的数据会`myItemsViewSource`出现在`GridView`控件中，正如我所期望的那样。

但是，当数据源中的项目多于屏幕上显示的项目时，我遇到了一个奇怪的滚动问题。滚动条似乎“抵制”了我滚动集合的努力，并且只稍微移动了视口，直到它“脱离”并且我可以滚动浏览其余项目：

![向右滚动问题的演示](../Images/de203192d9c482bb6784e94b3e0e36a6.png)

![超越粘滞点的平滑滚动演示](../Images/64b311efdc8e21231cce0241798cebb1.png)

同样的事情发生在从右到左的路上：滚动顺利进行，直到我足够接近滚动区域的开始，它似乎再次“粘住”：

![向左滚动问题演示](../Images/8e341690b8c7165dd35e736fc68840de.png)

考虑到问题与虚拟化有关，我尝试将`ItemsPanel`for the更改为`GridView`a`StackPanel`而不是 a `VirtualizingStackPanel`，但这会产生更糟糕的效果，即阻止显示任何项目。注意：`GridView`不托管在任何其他滚动区域或画布中。

我将在下面发布我的解决方法，但我希望有人有更令人满意的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:27:07.010

您应该删除实际 GridView 上的左边距和填充并将其添加到 ItemsPanel 声明中。有点令人困惑，因为默认模板确实在 gridview 上设置了填充。

这是默认模板附带的 GridView 的开始，我对 GridView 控件上的填充和 VirtualizingStackPanel ItemsPanel 声明上设置的边距进行了编辑。

```
<GridView
        x:Name="itemGridView"
        AutomationProperties.AutomationId="ItemGridView"
        AutomationProperties.Name="Grouped Items"
        Grid.RowSpan="2"
        Padding="0,137,40,46"
        ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}"
        ItemTemplate="{StaticResource Standard250x250ItemTemplate}"
        SelectionMode="None"
        IsSwipeEnabled="false"
        IsItemClickEnabled="True"
        ItemClick="ItemView_ItemClick">

        <GridView.ItemsPanel>
            <ItemsPanelTemplate>                        
                <VirtualizingStackPanel Margin="116,0,0,0" Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </GridView.ItemsPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T14:55:14.300

删除`GridView.Padding`属性并将其替换为`GridView.Margin`解决“粘性滚动”问题：

```
 <GridView
        x:Name="myGridView"
        Grid.RowSpan="2"
        Margin="30,137,40,46" <!-- replaced 'Padding' with 'Margin' -->
        ItemsSource="{Binding Source={StaticResource myItemsViewSource}}"
        ItemTemplate="{StaticResource My500x500ItemTemplate}"

        ... 
```

然而，这让我很困惑，因为 Visual Studio GridView 项目模板使用的是 Padding，而不是 Margin。

有人知道更令人满意的解决方案吗？

编辑：删除了误导性陈述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-07T20:51:03.960

问题是

```
<VirtualizingStackPanel Margin="116,0,0,0" Orientation="Horizontal"/> 
```

将其更改为： `<StackPanel Margin="116,0,0,0" Orientation="Horizontal"/>`

# python - 如何使用带有管道的`subprocess`命令

> ID：13332268
> 
> 赞同：311
> 
> 时间：2012-11-11T14:55:16.703
> 
> 标签：python, linux, subprocess, pipe

我想`subprocess.check_output()`与`ps -A | grep 'process_name'`. 我尝试了各种解决方案，但到目前为止没有任何效果。有人可以指导我怎么做吗？

* * *

## 回答 #1

> 赞同：542
> 
> 时间：2012-11-11T14:58:02.073

要在模块中使用管道`subprocess`，您必须通过`shell=True`.

但是，由于各种原因，这并不是真正可取的，尤其是安全性。相反，分别创建`ps`and`grep`进程，并将输出从一个管道传输到另一个进程，如下所示：

```
ps = subprocess.Popen(('ps', '-A'), stdout=subprocess.PIPE)
output = subprocess.check_output(('grep', 'process_name'), stdin=ps.stdout)
ps.wait() 
```

但是，在您的特定情况下，简单的解决方案是调用`subprocess.check_output(('ps', '-A'))`然后`str.find`输出。

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2012-11-11T16:35:06.177

或者，您始终可以在子流程对象上使用通信方法。

```
cmd = "ps -A|grep 'process_name'"
ps = subprocess.Popen(cmd,shell=True,stdout=subprocess.PIPE,stderr=subprocess.STDOUT)
output = ps.communicate()[0]
print(output) 
```

通信方法返回标准输出和标准错误的元组。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-06-16T00:48:09.240

请参阅有关使用子流程设置管道的文档：http: **[//docs.python.org/2/library/subprocess.html#replacing-shell-pipeline](http://docs.python.org/2/library/subprocess.html#replacing-shell-pipeline)**

我没有测试以下代码示例，但它应该大致是您想要的：

```
query = "process_name"
ps_process = Popen(["ps", "-A"], stdout=PIPE)
grep_process = Popen(["grep", query], stdin=ps_process.stdout, stdout=PIPE)
ps_process.stdout.close()  # Allow ps_process to receive a SIGPIPE if grep_process exits.
output = grep_process.communicate()[0] 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2020-11-12T00:50:29.713

使用[subprocess.run](https://docs.python.org/3/library/subprocess.html#subprocess.run)

```
import subprocess

ps = subprocess.run(['ps', '-A'], check=True, capture_output=True)
processNames = subprocess.run(['grep', 'process_name'],
                              input=ps.stdout, capture_output=True)
print(processNames.stdout) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-12T05:54:58.913

[您可以在sh.py](http://amoffat.github.com/sh/)中尝试管道功能：

```
import sh
print sh.grep(sh.ps("-ax"), "process_name") 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-11-13T10:34:47.927

另外，尝试使用`'pgrep'`命令而不是`'ps -A | grep 'process_name'`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-28T01:09:36.687

JKALAVIS 解决方案很好，但是我会添加一个改进来使用 shlex 而不是 SHELL=TRUE。下面我正在找出查询时间

```
#!/bin/python
import subprocess
import shlex

cmd = "dig @8.8.4.4 +notcp www.google.com|grep 'Query'"
ps = subprocess.Popen(cmd,shell=True,stdout=subprocess.PIPE,stderr=subprocess.STDOUT)
output = ps.communicate()[0]
print(output) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-14T15:14:57.727

```
command = "ps -A | grep 'process_name'"
output = subprocess.check_output(["bash", "-c", command]) 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-12-02T15:06:49.600

在**Python 3.5**之后，您还可以使用：

```
 import subprocess

    f = open('test.txt', 'w')
    process = subprocess.run(['ls', '-la'], stdout=subprocess.PIPE, universal_newlines=True)
    f.write(process.stdout)
    f.close() 
```

该命令的执行是阻塞的，输出将在**process.stdout**中。

# c++ - 坚持用 C++ 编写我的 diff 实用程序

> ID：13332269
> 
> 赞同：2
> 
> 时间：2012-11-11T14:55:42.863
> 
> 标签：c++, boost, diff, file-comparison

我试图使用我在 C++ 中学到的关于文件和资源处理的知识：我想编写一个类似`diff`的实用程序。

这是我的最新版本

```
#include <iostream>
#include <cstdlib>
#include <fstream>

int main(int argc, char* argv[])
{
  if(argc!=3)
  {
    std::cout << "error: 2 arguments required, now exiting ..." << std::endl;
    exit (EXIT_FAILURE);
  }

  std::ifstream file_1(argv[1]);
  std::ifstream file_2(argv[2]);

  if( file_1.fail() || file_2.fail() )
  {
    std::cout << "error: can't open files, now exiting ..." << std::endl;
    exit (EXIT_FAILURE);
  }

  std::string dummy_1;
  std::string dummy_2;

  while(!file_1.eof()) // dummy condition
  {
    std::getline(file_1,dummy_1);
    std::getline(file_2,dummy_2);
    std::cout << ((dummy_1==dummy_2) ? "= " : "# ") << dummy_1 << std::endl << "  " << dummy_2 << std::endl;
  }

  return(0);
} 
```

这是我的指导方针：

*   比较2个文件
*   用户必须将这 2 个文件的名称直接传递给可执行文件，只有这 2 个参数
*   尽可能多地涵盖C++ 中的*错误处理*
*   尽量避免平台特定的步骤或不可移植的代码

我的实际问题是我不知道如何有效地改善我的*假人状况*。现在，while 迭代只遵循第一个传递文件的长度，我想显然在两个文件中一直向下走并解决这个问题，而不会引入额外的 cicle 之类的过度杀伤力来获取和比较这两个文件的长度做真正的比较。

我也想知道我的方法是否可以被认为是安全的。

最终，我也可以接受提出使用 boost 库的解决方案的答案，因为它们非常便携，而且我已经知道我会出于其他原因使用它们。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T15:00:29.857

像往常一样`eof()`是错误的做法。这有效

```
while (std::getline(file_1, dummy_1) && std::getline(file_2, dummy_2))
{
    ...
} 
```

建议您阅读`eof()`真正的作用。它不是你想的那样，但实际上它在这个程序中很有用，因为你可以以正确的方式使用它，告诉你两个文件中的哪个文件已经到达文件末尾。看[这里](https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong)

您实际上可以`eof()`在该程序中正确使用来找出两个文件中的哪个文件到达文件末尾。我可能会像这样写你的循环

```
for (;;)
{
    getline(file_1, dummy_1);
    getline(file_2, dummy_2);
    if (file_1.eof() || file_2.eof())
        break;
    ...
}
if (file_1.eof() && file_2.eof())
{
    // both at end of file
}
else if (file_1.eof())
{
    // file 1 at end of file
}
else
{
    // file 2 at end of file
} 
```

请注意，虽然`eof()`测试是在 之后`getline()`，而不是之前。这`eof()`就是应该如何使用的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T16:02:50.060

我首先对@Loki Astari 的答案写了相当长的评论，但它足够长（而且，IMO，足够干净的方式来完成这项工作），它可能作为一个独立的答案最有意义。在这种情况下，您想要一些接近标准循环的东西，除非您继续阅读，只要从其中一个文件中读取成功。既然如此，@john 是对的，最好避免将`eof()`其用作循环条件的一部分。

```
std::string line1, line2;
static const char *prefixes[] = {"#  ", "=  "}; 
```

 ~~while (std::getline(file_1, line1) || std::getline(file_2, line2)) std::cout << prefixes[line1==line2] << line1 << "\n " << line2 << "\n";~~

编辑：@user1802174 提出了一个很好的观点——事实上，循环实际上并没有并行读取数据。由于它使用`||`which 进行短路评估，因此当/如果从第一个文件读取成功时，它不会从第二个文件中读取任何内容。幸运的是，他在一件事上错了：修复起来相当容易。至少在这种情况下，`+`工作正常，尽管我们必须明确地将结果转换为`bool`. 我还添加了一个修复程序，即在失败时，`getline`字符串的先前内容保持不变，因此我们需要在循环的每次迭代中明确清除字符串以获得所需的行为。

```
while (line1.clear(), line2.clear(), 
      (bool)std::getline(file_1, line1) + (bool)std::getline(file_2, line2))
{
    std::cout << prefixes[line1==line2] << line1 << "\n   " << line2 << "\n";
} 
```

这次我做了一个快速测试。文件 1：

```
line1
line 2 
```

文件 2：

```
line 1
line 2
line 3 
```

结果：

```
#  line1
   line 1
=  line 2
   line 2
#
   line 3 
```

虽然显然仍然不是一个成熟的 diff 实用程序，但我认为这正在做预期的事情。

正如@Loki Astari 的回答一样，这基本上就像行数较少的文件在末尾填充了尽可能多的空行以匹配较长的文件。

顺便说一句，还要注意使用 of`"\n"`而不是`std::endl`。除了插入换行符外，`std::endl`还会刷新输出缓冲区，在这种情况下您几乎肯定不希望这样做。刷新缓冲区仍然会产生正确的结果，但在许多情况下可能会慢得多。

编辑：就编码风格而言，*将*循环编写为`for`循环而不是`while`：

```
for ( ; (bool)std::getline(file_1, line1) + (bool)std::getline(file_2, line2))
      ; line1.clear(), line2.clear())
{
    std::cout << prefixes[line1==line2] << line1 << "\n   " << line2 << "\n";
} 
```

我个人认为在这里使用 C++ 风格转换几乎没有真正的收获。如果我想摆脱 using `(bool)`，我可能会使用另一个著名的成语（诚然，许多人也不喜欢）：

```
for ( ; !!std::getline(file_1, line1) + !!std::getline(file_2, line2))
      ; line1.clear(), line2.clear())
{
    std::cout << prefixes[line1==line2] << line1 << "\n   " << line2 << "\n";
} 
```

如果有人*真的*反对使用逗号运算符，这很容易重写为：

```
while (!!std::getline(file_1, line1) + !!std::getline(file_2, line2))       
{
    std::cout << prefixes[line1==line2] << line1 << "\n   " << line2 << "\n";
    line1.clear();
    line2.clear();
} 
```

就个人而言，我不认为这是一种改进，但其他人可能不同意。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-11T15:15:42.453

正如约翰指出的那样。在条件中使用 eof() 通常是错误的。

但在这种情况下，我认为这是合适的。但因此，您需要添加一些额外的检查。

```
while(true)  // exit provided by break.
{
    std::string dummy_1;   // By declaring them here you force them to be 
    std::string dummy_2;   // reset each iteration.

    // Because you are doing the read inside the loop
    // You need to check if the reads work.
    if (!std::getline(file_1,dummy_1) && !std::getline(file_2,dummy_2))
    {
        // Only exit if both reads fail.
        break;
    }

    // Got here if at least one read worked.
    // A failed read will result in an empty line for comparison.    
    std::cout << ((dummy_1==dummy_2) ? "= " : "# ") << dummy_1 << std::endl << "  " << dummy_2 << std::endl;
} 
```

# javascript - 如何分别控制两个嵌入的 iframe youtube 视频？

> ID：13332272
> 
> 赞同：2
> 
> 时间：2012-11-11T14:55:46.463
> 
> 标签：javascript, youtube, youtube-api

所以我的最终目标是让两个视频播放器相互叠加，当一个视频播放器接近尾声时，它会降低音量，并将底层视频的 div 设置在顶部，然后用新视频淡化音量。

我可以使用 api 成功控制 youtube 播放器，但我不知道从哪里开始说我想专门等待第一个玩家开始事件，而不仅仅是任何玩家开始事件。

有任何想法吗？

例如，我如何获得此功能来区分两个玩家？

```
function onPlayerReady(event) {
    event.target.playVideo();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:10:26.710

YouTube Iframe API 的流程如下：

1.  加载 YouTube API。
2.  加载时，将`onYouTubeIframeAPIReady`调用全局方法。
3.  在此方法中，将创建一个包装器以与带框的 YouTube 播放器进行交互。

您问题中的`onPlayerReady`方法是第 3 步的一部分。在继续之前，我展示了官方文档[中示例的一部分。](https://developers.google.com/youtube/iframe_api_reference#Getting_Started)

```
// 3\. This function creates an <iframe> (and YouTube player)
//    after the API code downloads.
var player;
function onYouTubeIframeAPIReady() {
   player = new YT.Player('player', {
      // ...
      events: {
         'onReady': onPlayerReady // <-------
      // ... 
```

在此示例中，您清楚地看到**您**正在将函数绑定`onPlayerReady`到特定事件。要为两个玩家采取不同的行动，您可以简单地使用不同的功能。

```
player1 = new YT.Player('id_of_player1', {
    events: {
       'onReady': onPlayerReady1
    } // ...
};
player2 = new YT.Player('id_of_player2', {
    events: {
       'onReady': onPlayerReady2
    } // ...
}; 
```

# java - 初始化对象类型数组

> ID：13332273
> 
> 赞同：3
> 
> 时间：2012-11-11T14:55:50.240
> 
> 标签：java, arrays, object

这是Java中的代码片段：

```
Object ob = new int[2]; 
```

现在假设我要初始化数组。这个 `ob[0] = 5`；将不起作用，因为 ob 属于 Object 类型。铸造也不起作用：

```
(int[])ob[0] = 5; 
```

顺便说一句，`(int[]ob)[0]= 5;` 会导致语法错误。那么，如何在没有硬编码的情况下在运行时分配值（例如`Object ob = new int[]{1,2}`？这不是家庭作业，我正在尝试理解 Java。这是准备 Java 认证所必需的。干杯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-11T14:57:28.643

您正在尝试投射的价值`ob[0]`而不是`ob`自身。您需要`ob`先将其转换为`int[]`然后在 index 上使用它`[0]`。

```
((int[])ob)[0] = 5; 
```

**注意： -**括号很重要。但是你为什么想做这样的事情呢？

* * *

如果您不想硬编码值，并且想在运行时使用它，那么您应该遵循@HotLicks 在评论中提到的内容。

```
Object ob = new int[5];

int[] tempArr = (int [])ob;

for (int i = 0; i < tempArr.length; i++) {
    tempArr[i] = i;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T15:00:11.900

您可以将对象转换为@Rohit Jain (+1) 提到的数组类型，也可以使用`java.util.Array`具有诸如 等方法的类`getLength(obj)`，`set(obj, elem, index)`这样您就可以在运行时定义数组类型时使用动态创建的数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T14:59:05.930

要创建一个数组：

```
int[] arrayName = new int[%size in int%]; 
```

直接初始化：

```
int[] arrayName = {1,2,3,4,5}; 
```

我真的不明白你想要做什么，但你可以在需要时施放吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T15:05:52.897

```
(int[])ob[0] = 5; 
```

实际上没有必要。

`ob[0] = 5`将编译为：

`ob[0] = new java.lang.Integer(5);`

问题在于，因为`ob`它是一个 Object 数组，而不是 Integer 或 int 数组，所以如果不进行强制转换，您将无法进行数学运算。

此功能称为[自动装箱](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)。创建它是为了解决 Java 具有不能直接用作对象的原始数据类型这一事实。在 .NET、Ruby 和大多数其他“更纯粹”的面向对象平台中，您可以执行以下操作：

诠释 x = 5; 字符串 valAsString = x.toString();

在Java中，您必须将 x 包装在 an`Integer`中才能做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T15:22:22.983

@rohit-jain 已经为您提供了解决方案...请注意，您没有像他告诉您的那样使用括号。

```
int[] intArray = new int[2];
Object ob = intArray;

((int[])ob)[0]= 5;
System.out.println(intArray[0]); 
```

输出将是“5”。

# php - 无法显示谷歌地图标记

> ID：13332284
> 
> 赞同：0
> 
> 时间：2012-11-11T14:56:51.083
> 
> 标签：php, javascript, google-maps-api-3

这是php代码

```
<?php
require("dbinfo.php");

// Start XML file, create parent node
$doc = domxml_new_doc("1.0");
$node = $doc->create_element("markers");
$parnode = $doc->append_child($node);

// Opens a connection to a MySQL server
$connection=mysql_connect ('localhost', $username, $password);
if (!$connection) {
  die('Not connected : ' . mysql_error());
}

// Set the active MySQL database
$db_selected = mysql_select_db($database, $connection);
if (!$db_selected) {
  die ('Can\'t use db : ' . mysql_error());
}

// Select all the rows in the markers table
$query = "SELECT * FROM markers WHERE 1";
$result = mysql_query($query);
if (!$result) {
  die('Invalid query: ' . mysql_error());
}

header("Content-type: text/xml");

// Iterate through the rows, adding XML nodes for each
while ($row = @mysql_fetch_assoc($result)){
  // ADD TO XML DOCUMENT NODE
  $node = $doc->create_element("marker");
  $newnode = $parnode->append_child($node);

  $newnode->set_attribute("name", $row['name']);
  $newnode->set_attribute("address", $row['address']);
  $newnode->set_attribute("lat", $row['lat']);
  $newnode->set_attribute("lng", $row['lng']);
  $newnode->set_attribute("type", $row['type']);
}

$xmlfile = $doc->dump_mem();
echo $xmlfile;

?> 
```

这是带有javascript代码的html

```
<!DOCTYPE html >
  <head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>PHP/MySQL & Google Maps Example</title>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
//<![CDATA[

var customIcons = {
  restaurant: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  },
  bar: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  }
    };

function load() {
  var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(47.6145, -122.3418),
    zoom: 13,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });
  var infoWindow = new google.maps.InfoWindow();

  // Change this depending on the name of your PHP file
  downloadUrl("phpsqlajax_genxml.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("name");
      var address = markers[i].getAttribute("address");
      var type = markers[i].getAttribute("type");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
      var html = "<b>" + name + "</b> <br/>" + address;
      var icon = eval('customIcons'+'.'+type) || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: new google.maps.MarkerImage(icon.icon),
    shadow: new google.maps.MarkerImage(icon.shadow)
      });
      bindInfoWindow(marker, map, infoWindow, html);
    }
  });
}

function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {}

//]]>

</script>

</head>

<body onload="load()">
<div id="map" style="width: 500px; height: 300px"></div>
</body>

</html> 
```

我只是关注[https://developers.google.com/maps/articles/phpsqlajax_v3](https://developers.google.com/maps/articles/phpsqlajax_v3)，我不知道我的代码有什么问题我检查了数据库，xml。它的所有工作..任何帮助将不胜感激。非常感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T11:34:41.287

试试看：

```
 var icon = customIcons['simple'] || {};
          var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: icon.icon,
            shadow: icon.shadow
          }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:45:23.920

您在此行中有非法空格：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api    /js?sensor=false"></script> 
```

将其更改为

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script> 
```

[工作示例](http://www.geocodezip.com/v3_GoogleEx_phpsqlajax_map_v3_notWrkgA.html)（使用[此](http://gmaps-samples-v3.googlecode.com/svn/trunk/articles/phpsqlajax/phpsqlajax_expectedoutput.xml)数据的本地副本）

# android - Android BroadcastReceiver不拦截短信

> ID：13332285
> 
> 赞同：2
> 
> 时间：2012-11-11T14:56:56.260
> 
> 标签：android, broadcastreceiver

我是 Android 开发的新手，只是想创建一个程序，如果我收到一条短信，它将显示一个 Toast ......这是到目前为止的代码

**SMSReceiveActivity.java**

```
package sms.receive.sample;
import android.content.*;
import android.os.Bundle;
import android.telephony.*;
import android.util.Log;
import android.widget.Toast;

public class SMSReceiveActivity extends BroadcastReceiver {

private static final String TAG = "Message recieved";

@Override
public void onReceive(Context context, Intent intent) {   

 Bundle pudsBundle = intent.getExtras();
 Object[] pdus = (Object[]) pudsBundle.get("pdus");
 SmsMessage messages =SmsMessage.createFromPdu((byte[]) pdus[0]);    
 Log.i(TAG,  messages.getMessageBody());
 Toast.makeText(context, "SMS Received : "+messages.getMessageBody(),
 Toast.LENGTH_LONG).show();
}
  } 
```

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="sms.receive.sample"
android:versionCode="1"
android:versionName="1.0" >    
<uses-sdk android:minSdkVersion="15" />
<uses-permission android:name="android.permission.RECEIVE_SMS" /> 
<application icon="@drawable/ic_launcher" label="@string/app_name">
<receiver 
     android:name=".SMSReceiveActivity" 
     android:exported="true" 
     android:enabled="true">
     <intent-filter android:priority="999">
         <action android:name="android.provider.Telephony.SMS_RECEIVED" /> 
     </intent-filter>
</receiver>
</application> 
```

当我向 AVD 发送（telnet）短信时，我会在抽屉中收到通知，但不会收到 Toast。我也试过我的手机，我也得到了同样的结果......非常感谢任何帮助。

# java - 在带有 JVM 的 mac 上找不到网络摄像头

> ID：13332287
> 
> 赞同：1
> 
> 时间：2012-11-11T14:57:12.277
> 
> 标签：java, jvm

由于某种原因，此代码似乎无法找到内置的网络摄像头：

```
package com.lorenjz.smooth;

import java.awt.BorderLayout;
import javax.media.*;
import javax.media.protocol.*;
import javax.swing.*;
import java.awt.*;
import java.util.*;
import javax.media.control.FormatControl;
import javax.media.format.VideoFormat;

public class test {
    public static void main(String[] args){
        test t = new test();
        t.getCam();
    }
    public void getCam(){
    try{ 
        /* Grab the default web cam*/
        MediaLocator ml = new MediaLocator("vfw://2");
        /* Create my data source */
        DataSource ds = Manager.createDataSource(ml);
        requestFormatResolution(ds);
        /* Create & start my player */
        Player p = Manager.createRealizedPlayer(ds);
        p.start();
        Thread.currentThread().sleep(1000);

        /* code for creating a JFrame and adding the visual component to it */
        JFrame jfrm=new JFrame("Testing Webcam");
                jfrm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                if(p.getVisualComponent()!=null)jfrm.getContentPane().add(p.getVisualComponent());
                if(p.getControlPanelComponent()!=null)jfrm.getContentPane().add
                        (p.getControlPanelComponent(),BorderLayout.SOUTH);
                jfrm.pack();
                jfrm.setLocationRelativeTo(null);
                jfrm.setVisible(true);
                jfrm.setSize(320,240);
       }catch(Exception e){
        e.printStackTrace();        
      }
    }  
    public boolean requestFormatResolution(DataSource ds) {
        if (ds instanceof CaptureDevice) {
           FormatControl[] fcs = ((CaptureDevice) ds).getFormatControls();
            for (FormatControl fc : fcs) {
                Format[] formats = ((FormatControl) fc).getSupportedFormats();
               for (Format format : formats) {
                    if ((format instanceof VideoFormat) &&
                        (((VideoFormat)format).getSize().getHeight() <= 240) &&
                        (((VideoFormat)format).getSize().getWidth()  <= 320)) {
                            ((FormatControl) fc).setFormat(format);
                            return true;
                    }
                }
            }
        }
        return false;
    }
} 
```

控制台返回以下错误：

```
javax.media.NoDataSourceException: Cannot find a DataSource for: vfw://0
at javax.media.Manager.createDataSource(Manager.java:1037)
at com.lorenjz.smooth.test.getCam(test.java:21)
at com.lorenjz.smooth.test.main(test.java:14) 
```

我试图为这条线找到一个不同的论点： `MediaLocator ml = new MediaLocator("vfw://2");` 但我一直没能。

任何人都可以提供任何建议吗？

谢谢，

罗兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:03:06.130

AFAIK，“vfw://”是“Video For Windows”对象的方案......显然这是特定于平台的。

您应该使用`CaptureDeviceManager.getDeviceList(null)`来查看系统上可用的设备，并从这些选项中进行选择。

# ruby-on-rails - LazyHighchart 和过时的数据

> ID：13332291
> 
> 赞同：1
> 
> 时间：2012-11-11T14:57:27.890
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, highcharts, lazy-high-charts

高图有问题。我有带有日期数据（借方，月份）的系列，并想要绘制它。我可以绘制数据（仅限借方），但是当我想添加日期时间时，有两个问题：

*   x_axis 数据显示错误 (00:00:00.00)(00:00:00.00)，预计月-年 (08/2012)
*   工具提示告诉我“日期无效”

```
def index
    @ops = getConstantOps()
    @js_data = []
    @ops.each { |f|
      tmp = [f.date_operation,f.debit]
      @js_data.push(tmp)
    }
    @h = LazyHighCharts::HighChart.new('graph') do |f|
        f.options[:chart][:defaultSeriesType] = "area"
        f.x_axis({:type =>'datetime'} )
        f.series( :name=>'Ops', :data=>@js_data)
end 
```

Ruby 调试（@js_data） 说

```
{--- !ruby/object:LazyHighCharts::HighChart
collection_filter: 
data:
- :name: Ops
  :data:
  - - 2010-07-08
    - 387.0
  - - 2010-08-09
    - 476.0
  - - 2010-09-08
    - 443.0} 
```

所以我不需要使用“pointInterval”和“pointStart”，因为有几个月我没有任何 Ops。这就是为什么我需要一个二维数组作为数据参数。我正在测试 ruby​​/highcharts 组合来构建公司应用程序，但在这两个工具上却是全新的。

关于如何使这项工作的任何想法？

编辑 2012 年 11 月 11 日：经过几个小时的工作，它起作用了！我做了一个帮手来做废话。

解决方案 ：

```
def getTimestamp(dateTime)
    return (DateTime.parse(dateTime.year.to_s + '-' + dateTime.month.to_s + '-01')).to_i * 1000
end 
```

对我来说它看起来很脏（2 次施法，dans hard day param）。但没有找到更清洁的方法。如果你有一个，请建议；）。

# c# - glBindTexture 无效值可能是由于 glLineWidth

> ID：13332295
> 
> 赞同：1
> 
> 时间：2012-11-11T14:57:38.813
> 
> 标签：c#, opengl, esri

在 C# 中，在 Esri ArcMap 动态显示（即时模式）的 OpenGL 上下文中，我尝试创建纹理：

```
GL.glEnable(GL.GL_TEXTURE_2D);
uint[] textures = new uint[1];
GL.glBindTexture(1, textures[0]);
uint error = GL.glGetError(); 
```

的值为`error`1281（无效值）。

我已经检查过 - 它不在 glBegin/glEnd 调用之间，并且上下文是有效的。我也曾经`GLIntercept`检查调用和错误，但它似乎给了我错误的否定（我将完整的调用列表与错误进行比较，并且错误只是不匹配 - 只有*在 glBegin 之前调用 glEnd*之类的东西，而完整的函数列表显示从来没有发生过这样的事情）。

我怀疑是驱动问题。我在 Win7 64（应用程序是 32 位）上运行 ATI Radeon 2400 Pro。我使用的 ESRI 版本是 9.3.1 sp1。

我用谷歌搜索了很多，甚至查看了[http://www.opengl.org/wiki/Common_Mistakes](http://www.opengl.org/wiki/Common_Mistakes)但我找不到任何与我的问题相似的东西。

它似乎并没有发生在所有基于该代码的程序中，但它经常发生在一些程序中，所以我真的很困惑。

接下来我应该检查什么？

**编辑：**

我开始消除在该错误之前运行的代码（实际上是很久以前），并发现如果在绘制多边形时（与该纹理无关的多边形，并且使用`glVertexPointer`and绘制`glDrawArrays`，根本没有纹理相关），我`glLineWidth`在绘制该多边形之前删除了找到的那个，绑定纹理时我没有收到错误。

现在我知道这很愚蠢，而且没有任何意义，而且这要么是驱动程序中的一个大问题，要么是我对 OpenGL 的理解中的一个大问题，但我不知道是哪一个 :-)

我对消除非常小心，它实际上只是该特定功能中的那一行：

```
GL.glDisable(GL.GL_TEXTURE_2D);
GL.glPushMatrix();
GL.glLoadIdentity();

GL.glLineWidth(someWidthParameter); // <-- The only line I comment.

GL.glEnableClientState(GL.GL_VERTEX_ARRAY);

GL.glTranslate(...);
GL.glScale(...);

GL.glVertexPointer(...);
GL.glDrawArrays(...)

GL.glDisableClientState(GL.GL_VERTEX_ARRAY);

GL.glPopMatrix();
GL.glEnable(GL.GL_TEXTURE_2D); 
```

所以现在我比以前更困惑......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:20:10.713

发现问题：

显然，传递给 glLineWidth 的值之一为零，这是不允许的。我使用的第一个 glGetError 是在将该值设置为零之后在绑定纹理处，所以我认为它与此有关。

我很惭愧我花了这么长时间才弄清楚:-)

而且我当然需要更好的 OpenGL 调试工具——显然 GLIntercept 可以检测到它但没有检测到，但因为它是我唯一可用的工具，所以它必须做。

对不起，我不得不打扰大家，感谢您的帮助。

# javascript - 元素插入事件

> ID：13332296
> 
> 赞同：1
> 
> 时间：2012-11-11T14:57:44.133
> 
> 标签：javascript, jquery

`<tr>`插入 a时是否会触发 JavaScript 事件`<table>`？

或者，是否可以创建一个在添加或更改元素时处理元素的函数？类似于 jQuery`live`函数如何为某个父元素内的现有和未来元素传播点击处理程序。

背景：我有一个表（[jQuery DataTables](http://datatables.net)），它在启动时加载，然后在本地编辑（可以添加或删除某些类）。问题是，我想根据其内容为每一行添加一个特定的类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T15:02:00.530

你一定在寻找这样的东西：

> [DOMNodeInserted](http://www.w3.org/TR/DOM-Level-2-Events/events.html)：当一个节点被添加为另一个节点的子节点时触发。此事件在插入发生后调度。此事件的目标是正在插入的节点。

使用它会是这样的：

```
$("table").addEventListener("DOMNodeInserted", function(event) {
    alert("something has been inserted");
    console.log(event.target)
}); 
```

*（我没有测试过，但它应该是要走的路）*

我想补充一点，如果您尝试这样做，您的代码中可能存在某种奇怪之处。必须有一个更简单的方法，也许通过一个`addRow(row)`触发事件的简单方法？

# html - 导航栏 .pull-right 不起作用

> ID：13332299
> 
> 赞同：0
> 
> 时间：2012-11-11T14:57:54.217
> 
> 标签：html, twitter-bootstrap, navbar

我试图将我的导航栏的内容放在最右边，但我没有任何成功。

这是它的样子：

```
<div class="navbar navbar-inverse ">
            <div class="navbar-inner navbar-fixed-top" id="navbar-teste">
                    <a class="brand" href="/">Fiscalização</a>
                        <ul class="nav">
                            <li class="divider-vertical"></li>

                                <li><a href="/">Início</a></li>
                                <li class="divider-vertical"></li>
                                    <form class="navbar-search pull-left">
                                        <input type="text" class="search-query" placeholder="Pesquisar">
                                    </form>
                                    <ul class="nav pull-right">
                                        <li class="divider-vertical"></li>
                                        <li class="dropdown"  id="menu1">
                                            <a class="dropdown-toggle " data-toggle="dropdown" href="#menu1">
                                                <i class="icon-user "></i>  {{user.username}}
                                                <b class="caret"></b>
                                            </a>
                                            <ul class="dropdown-menu">
                                                <li><a href="/alterar/dados/usuario/">Alterar Dados de Cadastro</a></li>
                                                <li><a href="{%url mudar_senha %}">Alterar Senha</a></li>
                                                <li><a href="/sair/">Sair</a></li>
                                            </ul>
                                        </li>
                                    </ul>   
                        </ul>

              </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:13:05.680

您正在将您的`ul`内部嵌套在没有页面全宽的 ul 中。

```
<div class="navbar navbar-inverse ">
            <div class="navbar-inner navbar-fixed-top" id="navbar-teste">
                    <a class="brand" href="/">Fiscalização</a>
                        <ul class="nav pull-left">
                            <li class="divider-vertical"></li>

                                <li><a href="/">Início</a></li>
                                <li class="divider-vertical"></li>
                        </ul>
                                    <form class="navbar-search pull-left">
                                        <input type="text" class="search-query" placeholder="Pesquisar">
                                    </form>
                                    <ul class="nav pull-right">
                                        <li class="divider-vertical"></li>
                                        <li class="dropdown"  id="menu1">
                                            <a class="dropdown-toggle " data-toggle="dropdown" href="#menu1">
                                                <i class="icon-user "></i>  {{user.username}}
                                                <b class="caret"></b>
                                            </a>
                                            <ul class="dropdown-menu">
                                                <li><a href="/alterar/dados/usuario/">Alterar Dados de Cadastro</a></li>
                                                <li><a href="{%url mudar_senha %}">Alterar Senha</a></li>
                                                <li><a href="/sair/">Sair</a></li>
                                            </ul>
                                        </li>
                                    </ul>   
                        </ul>

              </div>
</div> 
```

我已经结束了`ul`, 以分离出`form`第二个`ul`标签。这些不应嵌套在 a`ul`中，因为这是无效的 html。

# ruby-on-rails - 在这种情况下我应该使用简单关联还是多态关联？[导轨]

> ID：13332301
> 
> 赞同：1
> 
> 时间：2012-11-11T14:58:02.000
> 
> 标签：ruby-on-rails, associations, polymorphic-associations

假设我想构建类似 tumblr 的东西，这是一种博客，其中的帖子可以是多种内容之一（文本、引用、图像、链接等）。

我可以使用简单的关联，例如...

```
Class Blog < ActiveRecord::Base
  has_many :quotes
  has_many :images
  has_many :links
etc

Class Quote < ActiveRecord::Base
  belongs_to :blog
end

Class Image < ActiveRecord::Base
  belongs_to :blog
etc 
```

还是我必须使用多态关联？如果是这样，它会是什么样子？如果无所谓，每种方法的优缺点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:40:10.287

在您的示例中，我建议您使用单表继承

[单表继承以及在 Rails 中的使用位置](https://stackoverflow.com/questions/555668/single-table-inheritance-and-where-to-use-it-in-rails)

您拥有一个具有不同类型且具有共同行为的实体——这正是 STI 的创建目的。

# xml - 使用 XSLT 移动 XML 中的节点

> ID：13332305
> 
> 赞同：-3
> 
> 时间：2012-11-11T14:58:37.310
> 
> 标签：xml, xslt, xpath, xslt-1.0

我想问一下如何使用 XSLT 转换以下 XML：

```
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" encoding="UTF-8"
                omit-xml-declaration="no" indent="no" />

    <xsl:template match="/" />
</xsl:stylesheet> 
```

* * *

源 XML：

```
<root>
    <header>
        <version>1</version>
    </header>
    <line>
        <id> 1 </id>
    </line>
    <line>
        <id> 2 </id>
    </line>
    <subline>
        <id> 1 </id>
    </subline>
    <subline>
        <id> 2 </id>
    </subline>
</root> 
```

目标：

```
<root>
    <header>
        <version>1</version>
    </header>
    <line>
        <id> 1 </id>
    </line>
    <subline>
        <id> 1 </id>
    </subline>
    <line>
        <id> 2 </id>
    </line>
    <subline>
        <id> 2 </id>
    </subline>
</root> 
```

ETC...

谢谢你的支持

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T00:22:48.330

利用：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>

  <xsl:template match="/root">
    <xsl:copy>
      <xsl:apply-templates select="*[not(self::line or self::subline)]"/>
      <xsl:apply-templates select="line | subline">
        <xsl:sort select="id"/>
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

# iphone - iPhone 5.0 模拟器或设备中不出现应用程序/启动图标

> ID：13332312
> 
> 赞同：0
> 
> 时间：2012-11-11T14:59:58.953
> 
> 标签：iphone, ios, xcode, ios5

我想我已经做了一切来正确设置我的应用程序启动图标，但它似乎在 iPhone 5 模拟器或设备中不起作用。我已经验证它可以在 4.3 模拟器和设备中工作。这是我设置的所有内容：

在项目的根目录中，我添加了 57x57 和 114x114 图像：

![添加到项目](../Images/0c81686ab47841ce041d9b8ae6eed1b7.png)

这些也显示在 info.plist 中：

![信息列表](../Images/e3487d3de20c3d7e3fbfc861666485f6.png)

它们显示在摘要视图中：

![摘要视图](../Images/772d0dad3540a62417c88874d7e08fc0.png)

当我使用 4.3 模拟器运行它时，它适用于正常和视网膜分辨率：

![4.3正常](../Images/82c29e9375093f553ab7d1047f8fea62.png)

![4.3视网膜](../Images/1b51315eaaff2443273551dd4f4aea79.png)

但是，当我使用 5.0 模拟器运行它们时，无论是正常分辨率还是视网膜分辨率，图标都不会显示：

![5.0正常](../Images/42a326db1da322f379ad81a4d096936b.png)

![5.0视网膜](../Images/439ddda27a81caf5ecf01003a2721378.png)

我尝试重新保存和重命名图像以及取消设置和重置项目中的所有属性，但没有成功。我还确认这不仅仅是模拟器问题。当我将应用程序加载到 iPhone 5 上时，它在 iPhone 4 上运行时会出现同样的问题。我无法在 4S 上尝试它，但我想它会遇到同样的问题。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T16:24:10.600

[传统上](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW1)，iPhone 应用程序的图标被命名为`Icon.png`和`Icon@2x.png`。

> *   图标.png。iPhone 或 iPod touch 上应用程序图标的名称。
> *   图标 72.png。iPad 上应用程序图标的名称。
> *   图标-Small.png。iPhone 和 iPod touch 上的搜索结果图标的名称。此文件还用于所有
>     设备上的设置图标。
> *   图标-Small-50.png。iPad 上搜索结果图标的名称。

此外，类似的问题通常可以通过使用“command-shift-k”或“command-option-shift-k”清理项目中的所有目标来解决。

# joomla - Joomla 2.5 从组件中的表中获取数据

> ID：13332314
> 
> 赞同：0
> 
> 时间：2012-11-11T15:00:01.260
> 
> 标签：joomla

我在 Joomla 2.5 中处理一些组件（这意味着我正在尝试在 joomla 中编写一个组件:)）。

我的情况是：

我已经创建了后端 UI，它有一个表格来显示来自数据库的一些数据。

我的问题是：

如何通过选择行在表格上执行某些操作来获取发布的数据。

细节 ：

我的 MVC 工作 查找并在单击按钮后将程序路由到我的模型，但我不知道如何从该表单中获取数据。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:31:23.900

工具栏为此设置得很好。
[https://github.com/joomla/joomla-cms/blob/master/libraries/cms/toolbar/button/standard.php#L41](https://github.com/joomla/joomla-cms/blob/master/libraries/cms/toolbar/button/standard.php#L41)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T06:28:13.157

谢谢艾琳，但我花了一些时间分析其他组件后发现的答案是：

1.  您应该通过此命令获取上一页发布的数据：

    ```
    $jApp = JFactory::getApplication(); 
    ```

2.  它是一个数组，您应该通过以下代码在其中查找特定的键“cid”：

    ```
    $ids  = JRequest::getVar('cid', array(), '', 'array'); 
    ```

3.  您在数组中拥有该行的 id，现在您可以执行以下操作：

    ```
    foreach ($ids as $i => $id)
    {
      $query = $db->getQuery(true);
      $db->setQuery($query);
      //some code
      $db->query(); // to do change in DB
      $results += $db->getAffectedRows();
    } 
    ```

# php - PHP 只从表中读取前 8 个字符

> ID：13332318
> 
> 赞同：1
> 
> 时间：2012-11-11T15:00:23.647
> 
> 标签：php, mysql

我正在使用一个包含 Unicode 马拉雅拉姆语字符串的 MySQL 表。使用 PHP 读取表格时，只有前 8 个字符被存储/读取到获取的数组中。

尽管字段中存在完整的字符串，但余额部分并未存储在数组中。该字段是字符串 Varchar(50)。
默认情况下，数据库字符集设置为 utf8mb4。PHP代码如下：

```
 $con = mysql_connect("localhost","root") or die ();

    $db=mysql_select_db("drivingtest",$con);    //connects database
    mysql_set_charset('utf8mb4',$con);
    $query1="select * from dt_mst where quest_no != ".$row." ORDER BY RAND() limit 1";
    $result=mysql_query($query1) or die(mysql_error());
    $row = mysql_fetch_array($result);
    echo trim($row[2]); 
```

仅显示字符串的前 8 个字符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:19:32.973

我认为您的字符串在具有 6 个字符的实体中被转义。例如，有 8 个字符的代码：

```
ഇതു ഒരു നല്ല 
```

转义为 50 多个字符的代码：

```
&#3335;&#3364;&#3393; &#3346;&#3376;&#3393; &#3368; 
```

查看您的数据库。检查您的数据库是否使用 utf8 字符集创建。如果不是，请运行以下命令：

```
ALTER DATABASE databasename DEFAULT CHARACTER SET utf8; 
```

同样在 PHP 中，在任何选择查询之前设置 utf8 mysql 连接：

```
mysql_query("SET NAMES 'UTF8'");
mysql_query("SET CHARACTER SET 'UTF8'"); 
```

另请参阅有用的链接：[http ://dev.mysql.com/doc/refman/5.0/en/charset-conversion.html](http://dev.mysql.com/doc/refman/5.0/en/charset-conversion.html)

# php - php exec() 在 unicode 模式下？

> ID：13332321
> 
> 赞同：9
> 
> 时间：2012-11-11T15:00:27.870
> 
> 标签：php, utf-8, cmd, exec

我需要执行接受 ut8 作为输入或生成 ut8 输出的命令行命令和工具。所以我使用 cmd 它可以工作，但是当我使用 exec 从 php 尝试这个时它不起作用。为了简单起见，我尝试了简单的输出重定向。

当我直接在命令提示符下写：

> chcp 65001 > nul && echo цчшщюя-öüäß>utf8.txt

uft8.txt 已创建且内容正确。

> цчшщюя-öüäß

当我使用 php 中的 exec 函数时：

```
$cmd = "chcp 65001 > nul && echo цчшщюя-öüäß>utf8.txt";
exec($cmd,$output,$return);
var_dump($cmd,$output,$return); 
```

utf8.txt 中的内容搞砸了：

> ¥Å¥Î¥^¥%¥Z¥?-ÇôÇ¬ÇÏÇY

我正在使用带有（控制台）代码页 850 的 Win7,64 位。

我应该怎么做才能解决这个问题？

附加信息：我正在尝试克服在 Windows 上读取和写入 utf8 文件名的一些问题。PHP 文件函数失败：glob、scandir、file_exists 无法正确处理 utf8 文件名。文件不可见，已跳过，名称已更改...因此我想避免使用 php 文件功能，并且正在寻找一些 php extern 文件处理。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T08:29:10.250

由于我找不到一个简单、快速和可靠的内部 php 解决方案，我最终使用我知道它的工作。Cmd-批处理文件。我做了一个小函数，在运行时生成一个 cmd 批处理文件。它只是在 chcp（更改代码页）命令之前添加以切换到 unicode。并解析输出。

```
function uft8_exec($cmd,&$output=null,&$return=null)
{
    //get current work directory
    $cd = getcwd();

    // on multilines commands the line should be ended with "\r\n"
    // otherwise if unicode text is there, parsing errors may occur
    $cmd = "@echo off
    @chcp 65001 > nul
    @cd \"$cd\"
    ".$cmd;

    //create a temporary cmd-batch-file
    //need to be extended with unique generic tempnames
    $tempfile = 'php_exec.bat';
    file_put_contents($tempfile,$cmd);

    //execute the batch
    exec("start /b ".$tempfile,$output,$return);

    // get rid of the last two lin of the output: an empty and a prompt
    array_pop($output);
    array_pop($output);

    //if only one line output, return only the extracted value
    if(count($output) == 1)
    {
        $output = $output[0];
    }

    //delete the batch-tempfile
    unlink($tempfile);

    return $output;

} 
```

用法：就像 php exec()：

> utf8_exec('echo цчшщюя-öüäß>utf8.txt');

或者

> uft8_exec('echo цчшщюя-öüäß',$output,$return);

# sql - 以下postgresql存储过程的目的是什么

> ID：13332326
> 
> 赞同：-2
> 
> 时间：2012-11-11T15:01:27.483
> 
> 标签：sql, postgresql, stored-procedures

下面这个postgresql存储过程是干什么用的，执行查询的时候用的，谢谢！

```
CREATE OR REPLACE FUNCTION extract_fp_query(int[]) RETURNS int[]
AS $$
    SELECT uniq(sort(subarray($1 - 627964279,
        greatest(0, least(icount($1 - 627964279) - 120, 80)), 120)));
$$ LANGUAGE 'SQL' IMMUTABLE STRICT; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T02:03:19.200

此代码严重依赖[扩展中](http://www.postgresql.org/docs/current/static/intarray.html)[的`intarray`](http://www.postgresql.org/docs/current/static/intarray.html)功能。一旦你知道你可以通过把它分解成几个步骤来解决它。

在我看来，它就像某种穷人的加密或混淆程序，但您未能提供有关其输入的任何信息，因此很难说更多。本质上，它返回传递数组的已排序、去重的子集，根据数组中元素的数量决定返回哪个子集。如果我正确读取它，它会从数组中删除值 627964279（如果它出现在那里），然后根据数组中元素的数量从 0 和 80 个元素的偏移量返回 120 个元素（在去重之前）到数组中。

创建一个测试数据库。我会打电话给我`regress`的。创建它并`intarray`以超级用户身份将 contrib 模块安装到其中：

```
sudo -u postgres createdb -O myusername regress
sudo -u postgres psql regress -c 'CREATE EXTENSION intarray;' 
```

现在以 身份运行`myusername`，无论您的未授权用户帐户是什么，将代码分解为多个步骤并尝试每个步骤。就像在 C 中一样。将其格式化为表达式可能会有所帮助：

```
SELECT uniq(sort(
    subarray(
        $1 - 627964279,
        greatest(
            0, 
            least(
                icount($1 - 627964279) - 120,
                80
            )
        )
        , 120
    )
)); 
```

然后用已知的输入手动评估每个子表达式，随时替换结果并简化表达式，同时记下它的作用。我不能为你做这件事，因为你没有提供样本输入，但是，用`ARRAY[42,5,9,24,1,627964279]`你的输入数组替换你会做类似的事情：

```
$ psql regress
psql (9.2.1)
Type "help" for help.

regress=> SELECT ARRAY[42,5,9,24,1,627964279];
          array          
-------------------------
 {42,5,9,24,1,627964279}
(1 row)

regress=> SELECT ARRAY[42,5,9,24,1,627964279] - 627964279;
   ?column?    
---------------
 {42,5,9,24,1}
(1 row)

regress=> SELECT icount(ARRAY[42,5,9,24,1,627964279] - 627964279);
 icount 
--------
      5
(1 row)

regress=> SELECT least(icount(ARRAY[42,5,9,24,1,627964279] - 627964279),80);
 least 
-------
     5
(1 row)

regress=> 
regress=> SELECT greatest(least(icount(ARRAY[42,5,9,24,1,627964279] - 627964279),80),0);
 greatest 
----------
        5
(1 row) 
```

现在，通过将表达式代`5`入`greatest(...)`表达式`subarray`，我们得到：

```
SELECT subarray($1 - 627964279, 5, 120 ) 
```

这是在评估数组项删除之后：

```
regress=> SELECT subarray(ARRAY[42,5,9,24,1], 5, 120);
 subarray 
----------
 {1}
(1 row) 
```

在这种情况下`sort`和`uniq`没有进一步的效果。

这是为了什么？谁知道，因为您没有提供可能提供线索的输入数组。

请参阅[intarray 文档](http://www.postgresql.org/docs/current/static/intarray.html)。

# jquery - 所有 jquery 函数有什么问题

> ID：13332327
> 
> 赞同：-1
> 
> 时间：2012-11-11T15:01:32.030
> 
> 标签：jquery

谁能告诉我为什么这段代码没有按预期运行

```
 $(document).ready(function () {

   $('#search_box').on('paste keyup change', 'input', function () {

    alert("hi");
    }
    });
 }); 
```

代码在另一个页面中工作，当我复制它时它不起作用。我知道它必须很简单，但我不明白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:04:59.717

这将让您通过 search_box 控件控制“粘贴”事件...

```
$(document).ready(function () {
    $('#search_box').bind('paste', function() {
        alert($(this).val());
    })
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:07:16.080

您的代码在评论中有问题：

```
 $(document).ready(function () {

   $('#search_box').on('paste keyup change', 'input', function () {

    alert("hi");
    }
    }); // the problem may be here, an extra } not needed
 }); 
```

只需删除多余的`}`

```
$(document).ready(function () {

  $('#search_box').on('paste keyup change', 'input', function () {

          alert("hi");
      }
  );
}); 
```

# r - 为分组数据绘制置信区间和连接均值

> ID：13332332
> 
> 赞同：0
> 
> 时间：2012-11-11T15:02:01.300
> 
> 标签：r, plot, ggplot2

很长一段时间以来，我一直在尝试在 ggplot2 中绘制此图（几天）。我很快就放弃了。请帮忙。我只想为我的 3 个组 A、B 和 C 绘制一个简单的图。这是我简化的数据：

```
> mydata 
   A01 A02 A03 B01 B02 B03 C01 C02 C03
id0001    1    2    3    6    7    8    11    12    13 
```

我想创建一个看起来[像这样](http://compbio.mit.edu/cummeRbund/images/plots/cummeRbund-manual-gene_plots_line-4.png)的情节。A01、A02 和 A03 应该构成 A 的置信区间等。我怎样才能在 x 轴上绘制 3 个组的非常简单的图。最终，我想制作一个包含多个 ID 的图表，所以它看起来[像这个](http://compbio.mit.edu/cummeRbund/images/plots/cummeRbund-manual-similar_plots_2.png)，但像第一个一样带有错误栏或 CI。

如果有人可以帮助我或给我有关如何进行的提示，我将非常感激！

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T16:15:38.923

```
set.seed(42)
df <- data.frame(group=rep(c("a","b","c"),each=10),value=c(rnorm(10,mean=1,sd=0.1),rnorm(10,mean=1.5,sd=0.3),rnorm(10,mean=3,sd=0.2)))

library(ggplot2)
library(Hmisc)
p1 <- ggplot(df,aes(x=group,y=value)) 
p1 + 
  stat_summary(fun.data = "mean_cl_boot", colour = "red", geom = "errorbar") +  #errorbar with bootstrapped 95 % confidence interval
  stat_summary(fun.data = "mean_cl_normal", colour = "blue", geom = "errorbar") + #errorbar with normal 95 % confidence interval
  stat_summary(fun.y = "mean", colour = "black", geom = "point") + #means
  stat_summary(fun.y= "mean", colour="black", geom="line", aes(group = 1)) #lines connecting means 
```

![在此处输入图像描述](../Images/f1cc358111f9fd10df949d65a96238c4.png)

如果您真的想连接该组，请仔细考虑，因为这没有多大意义。

# php - Zend Framework 2 中的多选

> ID：13332334
> 
> 赞同：10
> 
> 时间：2012-11-11T15:02:30.983
> 
> 标签：php, zend-form, zend-framework2, multi-select

Zend Framework 1.12 中有一个 Zend_Form_Element_Multiselect。如何在 Zend Framework 2.0 中实现相同的结果？我只看到 Zend\Form\Element\MultiCheckbox 和 Zend\Form\Element\Select

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-11T15:12:24.283

好的，我自己找到了答案，从官方文档中读取并不容易，而是一个实验解决方案：

```
 $this->add(array(
            'type' => 'Zend\Form\Element\Select',
            'attributes' => array(
                'multiple' => 'multiple',
            ),
            'name' => 'langs',
            'options' => array(
                'label' => 'langs',
                'value_options' => array(
                    '0' => 'French',
                    '1' => 'English',
                    '2' => 'Japanese',
                    '3' => 'Chinese',
                ),
            ),
        )); 
```

只需添加

```
 'attributes' => array(
            'multiple' => 'multiple',
        ), 
```

到您的设置。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-02T21:12:11.407

Jevgeni 的答案的一个补充：确保将“[]”添加到元素名称，否则最终只会选择最后一个值。这是一个PHP问题，与ZF2无关。所以最终的配置是这样的：

```
$this->add(array(
        'type' => 'Zend\Form\Element\Select',
        'attributes' => array(
            'multiple' => 'multiple',
        ),
        // NOTE the addition of "[]" to the name:
        'name' => 'langs[]',
        'options' => array(
            'label' => 'langs',
            'value_options' => array(
                '0' => 'French',
                '1' => 'English',
                '2' => 'Japanese',
                '3' => 'Chinese',
            ),
        ),
    )); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-06T11:16:11.370

```
@user2003356 
```

对于已选择的选项，请添加选项：

```
'value' => array( '0' => '1',
                  '1' => '3'  ) 
```

或在 cronroller 中：

```
$form->bind($elements);
$form->get('langs')->setValue(['1','3']); form->bind($elements); 
```

# sql - 关于显示包含列表中所有值的分组行的 SQL 查询

> ID：13332338
> 
> 赞同：2
> 
> 时间：2012-11-11T15:03:08.430
> 
> 标签：sql, list, match, relational-division

SQL 查询

```
TABLE - CUSTOMER
1001,1
1001,2
1001,3
1002,1
1002,3
1003,3

TABLE - PRODUCT
1
2
3 
```

结果应该是 1001 因为它得到的所有值都与订单表匹配。
PRODUCT 表可能会随着时间而改变。
我想知道谁从我这里购买了所有产品。
谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T15:05:11.573

假设这`CustomerTB`是一个有两列的表：`CustomerID`和`ProductID`。您需要对其进行分组`CustomerID`并计算他购买的独特产品。（*如果客户每个产品只能购买一个，则不需要 DISTINCT*`product` ）并且应该等于表中列表中的产品总数。

```
SELECT customerID
FROM   CustomerTB
GROUP BY CustomerID
HAVING COUNT(DISTINCT productID) = (SELECT COUNT(*) FROM ProductTB) 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/f274c/1)

# objective-c - ObjC 使用带有进度委托的块

> ID：13332339
> 
> 赞同：0
> 
> 时间：2012-11-11T15:03:12.780
> 
> 标签：objective-c, ios, delegates, objective-c-blocks

从下一篇博客[http://thejoeconwayblog.wordpress.com/2012/05/29/blocks-or-delegation/](http://thejoeconwayblog.wordpress.com/2012/05/29/blocks-or-delegation/)
委托回调和块之间的主要区别之一是“过程与结果”

我的问题是：
我想使用阻塞来启动一个完成的过程，但是在这个过程中我想用过程步骤通知调用者。仅将**委托回调**或**带有委托回调的块用于我的进度通知**会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:13:42.030

没有更好或更坏。两种选择都可以完成这项工作。

通常块更优雅，需要更少的样板代码。另一方面，在我看来，委托在阅读别人的代码时通常更容易理解。

我不认为将委托和块结合起来有什么意义——我个人不会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-20T08:53:44.943

**以下是对 Delegates 和 Blocks 的一些观察**

1.  如果一个对象有多个不同的事件，请使用委托。
2.  如果对象是单例，我们不能使用委托。
3.  如果对象正在回调以获取更多信息，我们可能会使用委托。
4.  委托回调更面向过程，块更面向结果。
5.  如果您需要在多步骤过程中获得通知，您可能需要使用委托。
6.  如果您只想要您请求的信息（或有关未能获取信息的详细信息），您应该使用块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-07T13:10:35.627

委托是一种简单而强大的模式，其中一个对象代表另一个对象。

块是可以访问调用方法的本地和参数的自包含代码。块增强了代码的可读性和可维护性。

# php - 在 PHP 中正确格式化 URL 链接

> ID：13332345
> 
> 赞同：2
> 
> 时间：2012-11-11T15:04:50.927
> 
> 标签：php, wordpress, url

我有一个自定义字段（称为“网站”），用户可以在其中将网站输入到他们的 URL。我的php代码如下

```
<div class="profileInfo">
   <h4  class="website">Website:</h4>
      <?php if ( get_post_meta($post->ID, 'website', true)) { ?>
        <p><a href="http://<?php echo get_post_meta($post->ID, 'website', true) ?>"><?php echo get_post_meta($post->ID, 'website', true) ?></a></p>
      <?php } else { ?>
    <p class="na">no email provided</p>
    <?php } ?>
</div> 
```

在上面的示例中，我在 URL 前面加上 http://

所以我的问题是，当用户在自定义字段中输入像[http://www.example.com](http://www.example.com)这样的 URL 时，它不会正确链接到该站点。URL 在前端 http//www.example.com 上看起来像这样

奇怪的是冒号 : 被剥离或取出，因此 URL 不起作用！我认为这与有两个 http:// 有关

现在，我尝试从 PHP 代码中删除 http:// 就像这样

`<p><a href="<?php echo get_post_meta($post->ID, 'website', true) ?>"><?php echo get_post_meta($post->ID, 'website', true) ?></a></p>`

因此，假设用户现在将 www.example.com 输入到自定义字段并发布条目。网址现在转到

[http://mysite.com/www.example.com](http://mysite.com/www.example.com)

它尝试将 URL 构建到我当前的站点页面中。不知道为什么它不将其视为 URL。

寻求一些帮助如何在 PHP 中正确编写此代码。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T15:08:59.480

```
<?php 
if ( get_post_meta($post->ID, 'website', true)) 
{
    $link = get_post_meta($post->ID, 'website', true);
    $link = str_replace(array('http://','https://'), array('',''), $link);
    ?><p><a href="http://<?=$link?>"><?=$link?></a></p><?php 
}  
else
{ 
    ?><p class="na">no email provided</p><? 
} 
?> 
```

这将替换 url 中的所有 http://。

# c# - 重新开始 Storyboard-Animation

> ID：13332349
> 
> 赞同：1
> 
> 时间：2012-11-11T15:05:10.963
> 
> 标签：c#, xaml

我在我的代码中调用 Storyboard-Animation`MyAnim.Begin();`

但是当我再次调用该方法时（例如，当我再次单击时），它会中断当前正在运行的动画并从头开始重新开始。

有没有办法多次启动相同的动画而不会互相打断？

我做了一个爆炸效果，我想让它一次又一次地爆炸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:35:49.457

Storyboard 对象包含一个已完成的事件。当情节提要完成运行时，它会被触发。

我建议这样的事情：

私有对象 _locker=新对象（）；私人布尔_isProcessing；私人 int _waitingAnimations;

```
public void Setup()
{
    MyAnim.Completed+=CompletedExecution;
}
private void CompletedExecution(object sender, EventArgs args)
{
    bool runAnotherAnim;
    lock(_locker)
    {
        runAnotherAnim=_waitingAnimations>0;
        if(_waitingAnimations>0)
             _waitingAnimations--;

    }
    if(runAnotherAnim)
        MyAnim.Begin();
    else
        _isProcessing=false;
}
public void AddAnimation()
{
   lock(_locker)
   {
       if(_isProcessing)
       {
           _waitingAnimations++;
       }
       else
       {
           _isProcessing=true;
           MyAnim.Begin();

       }
   }

} 
```

您需要查看 Completed 事件提供的参数，因为我是从内存中执行此操作的，但我之前使用过它，它完全符合您的要求。

# c++ - 为什么我在这里得到 0 而不是 0.5？

> ID：13332351
> 
> 赞同：0
> 
> 时间：2012-11-11T15:05:25.417
> 
> 标签：c++, math

> **可能重复：**
> [C++ 中的除法未按预期工作](https://stackoverflow.com/questions/6101084/division-in-c-not-working-as-expected)

原来我的程序一直返回错误的结果，所以我决定将代码分成小块。设置断点后，结果...

```
double test3 = ((2 - 1) / 2); 
```

...根据 C++ 编译器等于 0。我不知道为什么。有人可以向我解释吗？

我正在使用 MS Visual Studio Premium 2012

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T15:07:03.850

因为你正在做整数除法。`1/2`是`0`，然后转换为`double`，产生`0.`。如果您想要浮点除法，请尝试将除法的参数之一设为浮点数：

```
double test3 = (2.0-1)/2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T15:07:09.040

因为您在右侧使用的数字都是整数：（即：表达式的`(2-1)/2`计算结果为`0`as`(int)1/(int)2`计算结果为，`0`因为整个事物都是整数。

将其更改为：

```
double test3 = ((2 - 1) / 2.0); 
```

并且表达式是 then `(int)1/(double)2`，它将计算为双精度值，因此`0.5`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T15:07:19.350

当表达式中只涉及整数时，您只会得到整数算术。如果你想有浮点运算，你需要在某个点涉及一个浮点表达式，例如

```
double test3 = ((2 - 1) / 2.0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T15:09:35.077

试着让你的数字翻倍，(2.-1.)/2.;

# c - 如何在我的计算机上启用对 POPCNT 指令/内在函数的支持？

> ID：13332352
> 
> 赞同：7
> 
> 时间：2012-11-11T15:05:27.080
> 
> 标签：c, gcc, x86, sse4, population-count

我试图在我的电脑（Fedora 17 32bit）上运行以下程序。如何使我的系统支持`popcnt`快速人口计数指令？

```
#include <stdio.h>
#include <nmmintrin.h>

int main(void)
{
    int pop = _mm_popcnt_u32(0xf0f0f0f0ULL);
    printf("pop = %d\n", pop);
    return 0;
} 
```

我编译了程序并运行它，但得到以下异常：

```
[xiliu@xiliu tmp]$ gcc -Wall -march=corei7 -m32 -msse4.2 popcnt.c -o popcnt
[xiliu@xiliu tmp]$ ./popcnt 
Illegal instruction (core dumped) 
```

以下是我的处理器的信息：

```
[xiliu@xiliu tmp]$ cat /proc/cpuinfo 
processor   : 0
vendor_id   : GenuineIntel
cpu family  : 6
model       : 15
model name  : Intel(R) Pentium(R) Dual  CPU  T2370  @ 1.73GHz
stepping    : 13
microcode   : 0xa4
cpu MHz     : 800.000
cache size  : 1024 KB
physical id : 0
siblings    : 2
core id     : 0
cpu cores   : 2
apicid      : 0
initial apicid  : 0
fdiv_bug    : no
hlt_bug     : no
f00f_bug    : no
coma_bug    : no
fpu     : yes
fpu_exception   : yes
cpuid level : 10
wp      : yes
flags       : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe nx lm constant_tsc arch_perfmon pebs bts aperfmperf pni dtes64 monitor ds_cpl est tm2 ssse3 cx16 xtpr pdcm lahf_lm dtherm
bogomips    : 3458.20
clflush size    : 64
cache_alignment : 64
address sizes   : 36 bits physical, 48 bits virtual
power management:

[... repeated for 2nd core ...] 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-11T15:11:45.130

改为使用[`__builtin_popcount()`](http://gcc.gnu.org/onlinedocs/gcc-4.1.1/gcc/Other-Builtins.html#Other-Builtins)，它不是特定于平台的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-11T15:18:36.513

第一个支持该`POPCNT`指令的 CPU 是 Intel 的 Nehalem。看起来您的属于较旧的 Core 系列。Hasturkun 的建议将适用于您的系统，但将通过多个指令而不是单个指令来实施。

如果您想要一个可移植的解决方案而不是特定于 GCC 的解决方案，请查看 Sean Eron Anderson 出色的[Bit Twiddling Hacks](http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetParallel)页面，该页面为此提供了高度优化的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-06T02:27:39.083

你的 CPU 不支持`POPCNT`。（请参阅[https://en.wikipedia.org/wiki/SSE4](https://en.wikipedia.org/wiki/SSE4)）但是您可以使用这个免费的开源工具来检测它是否受支持： [https ://github.com/mgorny/cpuid2cpuflags](https://github.com/mgorny/cpuid2cpuflags)

例如，它返回 Intel Core i7-3770

```
CPU_FLAGS_X86: aes avx f16c mmx mmxext pclmul popcnt sse sse2 sse3 sse4_1 sse4_2 ssse3 
```

# python - 在文件中查找一行，然后在 Python 中读取接下来的几行

> ID：13332354
> 
> 赞同：2
> 
> 时间：2012-11-11T15:05:47.110
> 
> 标签：python

我有一个包含以下数据的纯文本文件：

```
id=1
name=Scott
occupation=Truck driver
age=23

id=2
name=Dave
occupation=Waiter
age=16

id=3
name=Susan
occupation=Computer programmer
age=29 
```

我正在尝试找出在给定`id`字符串的情况下到达文件中任何点的最佳方法，然后抓取下面的行以提取数据以在我的程序中使用。我可以做类似的事情：

```
def get_person_by_id(id):
    file = open('rooms', 'r')
    for line in file:
        if ("id=" + id) in line:
            print(id + " found") 
```

但我不确定我现在如何才能通过下一行并执行`line.split("=")`或类似操作来提取我可以使用我的程序的信息（放入列表或字典或其他任何内容）。任何指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:11:24.737

一种选择是将整个内容加载到内存中，这样您就不必每次都读取文件：

```
with open('rooms') as f:
    chunks = f.read().split('\n\n')

people_by_id = {}

for chunk in chunks:
    data = dict(row.split('=', 1) for row in chunk.split('\n'))
    people_by_id[data['id']] = data
    del data['id']

def get_person_by_id(id):
    return people_by_id.get(id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T15:12:15.583

找到正确的行后如何退出 for 循环：

```
def get_person_by_id(id):
    file = open('rooms', 'r')
    for line in file:
        if ("id=" + id) in line:
            print(id + " found")
            break
    #now you can continue processing your file:
    next_line = file.readline() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T16:37:46.533

此解决方案对记录中的空行更加宽容。

```
def read_persons(it):
    person = dict()
    for l in it:
        try:
            k, v = l.strip('\n').split('=', 1)
        except ValueError:
            pass
        else:
            if k == 'id': # New record
                if person:
                    yield person
                    person = dict()
            person[k] = v
    if person:
        yield person 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T15:20:59.933

这是一个迭代解决方案。

```
objects = []
current_object = None
with open("info.txt", "rb") as f:
    for line in f:
        line = line.strip("\r\n")
        if not line:
            current_object = None
            continue
        if current_object is None:
            current_object = {}
            objects.append(current_object)
        key,_,value = line.partition('=')
        current_object[key] = value

print objects 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T15:18:56.000

获取该人的所有属性和值（*即*id、姓名、职业、年龄等），直到找到一条 empy 行。

```
def get_person_by_id(id):
    person = {}
    file = open('rooms', 'r')
    for line in file:
        if found == True:
            if line.strip():
                attr, value = line.split("="):
            else:
                return person              
        elif ("id=" + id) in line:
            print(id + " found")
            found = True
            attr, value = line.split("=")
            person[attr] = value
    return person 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-11T15:29:04.407

Another example of an iterative parser:

```
from itertools import takewhile
def entries(f):
    e = {}
    def read_one():
        one = {}
        for line in takewhile(lambda x: '=' in x, f):
            key, val = line.strip().split('=')
            one[key] = val
        return one
    while True:
        one = read_one() 
        if not one:
            break
        else:
            e[one.pop('id')] = one
    return e 
```

Example:

```
>>> with open('data.txt') as f:
..:    print entries(f)['2']
{'age': '16', 'occupation': 'Waiter', 'name': 'Dave'} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-11T15:15:02.393

也许：

```
d = dict()

with open(filename) as f:
    for line in f:
        k,v = line.split('=')
        if 'id=' in line:
            d[v] = {}
        d[d.keys()[-1]][k] = v 
```

# android - 从流中播放 android 设备上的 h264 编码视频

> ID：13332357
> 
> 赞同：1
> 
> 时间：2012-11-11T15:06:08.603
> 
> 标签：android, ios, video, vlc, gpuimage

我正在开发允许进行一些视频编辑、将编辑后的视频上传到服务器（Amazon S3）并在设备上播放此视频的某个项目。

iOS版本已经完成。我在那里使用 GPUImage 来编辑和编码视频。我正在使用 quicktime 容器和 h264 编解码器。

现在我正在研究这个项目的android版本，遇到了几个问题。

虽然我可以在安卓设备上下载和播放这些视频（在 iPhone 上编码），但我无法在大多数安卓设备上播放这些视频流。

我做了一些研究，其中一个建议是向 iOS 后编码添加一些代码，以转换为 mp4 并修复 MooV [http://fabiensanglard.net/mobile_progressive_playback/index.php](http://fabiensanglard.net/mobile_progressive_playback/index.php)，但这没有帮助。在“修复”之后，我唯一实现的就是听到音轨并且在 Galaxy SII 设备上没有收到错误消息，但在其他设备上也有同样的故事。

之后，我从 Play 商店下载了 VLC 播放器并播放这些视频。

所以我的问题是，我需要做什么才能播放 h264 流？

如何实现自己的视频播放器或如何使用 VLC 源代码播放这些视频。

# javascript - 从 JSON 文件填充表单

> ID：13332358
> 
> 赞同：0
> 
> 时间：2012-11-11T15:06:09.153
> 
> 标签：javascript, jquery, json, parsing

我正在尝试使用 JSON 文件中的数据填充表单（onClick）。我可以从数组中成功完成，但是当我尝试解析本地（与 .html 相同的文件夹）JSON 文件时，它不起作用。

```
<script>
var marks = [];
$(document).ready(function() {
    $("#RQdata").click(function(event) {
        $.getJSON('test.json', function(data) {
            $.each(data.markers, function(key, val) {
                marks.push(val[key]);

            });
        });
    });
});

function populateList() {
    for (var i = 0; i < marks.length; i++) {
        var mark = new Option(marks[i].name, markers[i].latlng);
        document.getElementById('locationList').options.add(mark);
    }
}
</script>

<h2>List</h2>
<form name="aForm">
  <select name="locationList" id="locationList" size="6" onChange="alert(value);" style=" width:800px;owerflow: auto;">
  </select>
  <input type="button" id="RQdata" name="Request Data" value="Request Data" >
</form> 
```

我的 test.json

```
{"markers":
            [{"latlng":[55.587,17.044],"name":"Some name 1"},
            {"latlng":[55.577,17.044],"name":"Some name 2"},
            {"latlng":[55.507456,17.617585],"name":"Some name 3"},
            {"latlng":[55.25642,17.154904],"name":"Some name 4"},
            {"latlng":[55.103217,17.07776],"name":"Some name 5"}]} 
```

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:36:46.083

您的代码中有几个错误，下面的版本有效。

```
var marks = [];
$(document).ready(function() {
$("#RQdata").click(function(event) {
    $.getJSON('test.json', function(data) {
    $.each(data.markers, function(key, val) {
        marks.push(val);  //It should be val instead of val[key]
    });

    populateList();  // You didn't call this function here
    });
});
});

function populateList() {
for (var i = 0; i < marks.length; i++) {
    var mark = new Option(marks[i].name, marks[i].latlng);  //marks instead of markers here
    document.getElementById('locationList').options.add(mark);
}
} 
```

请使用检查器或其他东西进行调试。

此外，正如评论中提到的@matt，某些浏览器（如 Chrome）将禁止 XHR 访问本地文件。

# android - 活动未开始

> ID：13332361
> 
> 赞同：0
> 
> 时间：2012-11-11T15:06:52.383
> 
> 标签：android, android-layout, android-intent

在附加到图像视图的 OnClick 事件中，我想打开一个带有屏幕大小图像视图的新活动以显示图片。

这是事件：

```
public void onClick(View arg0) {

    PhotoList pli = (PhotoList) arg0.getTag();
    Intent i = new Intent(getBaseContext(), PhotoActivity.class);
    i.putExtra("photo", pli.Photo);
    i.putExtra("PhotoId", pli.id);
    getBaseContext().startActivity(i);
} 
```

当我单击图像时正在执行此代码，但没有任何反应。

PhotoActivity 的 onCreate （从不执行）：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_photo);
    getActionBar().setDisplayHomeAsUpEnabled(true);

    Bundle extras = getIntent().getExtras();

    photo = extras.getByteArray("photo");
    ViewId = extras.getInt("View");
    PhotoId = extras.getInt("PhotoId");

    if (photo.length > 0) {
        ImageView iv = (ImageView) findViewById(R.id.pvPhoto);

        Bitmap mBitmap = BitmapFactory.decodeByteArray(photo, 0, photo.length);
        iv.setImageBitmap(mBitmap);
    } 
```

清单：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="enn.com.sitefinder.MainActivity" />

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".PhotoActivity"
        android:label="@string/title_activity_photo" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="enn.com.sitefinder.MainActivity" />
    </activity>
</application> 
```

当我不小心将 OnClick 事件监听器连接到线性布局时，活动确实开始了。

为什么没有显示活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T11:46:03.680

你不需要使用 getBaseContext.startActivity

只需使用 startActivity(intent);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T16:18:57.093

通过在 extras 中传递一个额外的整数来解决它，允许 PhotoActivity 类在 arraylist 中找到图像。这不是传递对捆绑包来说太多的位图字节数组。

# jquery - 在页面加载时默认选择最后一个选项卡，jQuery Ui Tabs

> ID：13332363
> 
> 赞同：1
> 
> 时间：2012-11-11T15:07:03.157
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我正在尝试打开 DOM 上的 jQuery Tabs 中的最后一个选项卡，但我在网上找到的解决方案似乎不起作用。根据 jQuery UI 演示站点中的示例，我正在使用垂直选项卡。

JS-

```
$( "#personnelStats_tabs" ).tabs().addClass( "ui-tabs-vertical ui-helper-clearfix" );
    $( "#personnelStats_tabs li" ).removeClass( "ui-corner-top" ).addClass( "ui-corner-left" ); 
```

CSS -

```
.ui-tabs-vertical { width: 55em; }
.ui-tabs-vertical .ui-tabs-nav { padding: .2em .1em .2em .2em; float: left; width: 12em; }
.ui-tabs-vertical .ui-tabs-nav li { clear: left; width: 100%; border-bottom-width: 1px !important; border-right-width: 0 !important; margin: 0 -1px .2em 0; }
.ui-tabs-vertical .ui-tabs-nav li a { display:block; }
.ui-tabs-vertical .ui-tabs-nav li.ui-tabs-active { padding-bottom: 0; padding-right: .1em; border-right-width: 1px; border-right-width: 1px; }
.ui-tabs-vertical .ui-tabs-panel { padding: 1em; float: right; width: 40em; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T15:41:57.917

获取最后一个元素[`.last()`](http://api.jquery.com/last/)：

```
$(".ui-tabs-nav li").last() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T23:50:42.400

谢谢大家的帮助。不幸的是，我的问题不够具体（写得太匆忙），这里没有给出解决方案。但是，我不知何故错过了 2009 年类似帖子的链接，并且使用它`.last()`帮助我找到了解决方案：

```
$(document).ready(function() {
    //Initiate jQuery Tabs
    var $tabs = $( "#personnelStats_tabs" ).tabs();
    //Get the index of the last tab
    var last = $(".ui-tabs-nav li").last().index();
    //Add hack for vertical tabs
    $tabs.addClass( "ui-tabs-vertical ui-helper-clearfix" );
    $( "#personnelStats_tabs li" ).removeClass( "ui-corner-top" ).addClass( "ui-corner-left" );
    //Select the last tab
    $tabs.tabs("select", last);
}); 
```

谢谢各位！+1 给你们所有人

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T15:10:20.533

我有一个关于 jQueryUI 选项卡的博客/教程可能会有所帮助。

[http://spyk3lc.blogspot.com/2012/08/jqueryjqueryui-help-tabs-get-currently.html](http://spyk3lc.blogspot.com/2012/08/jqueryjqueryui-help-tabs-get-currently.html)

另外，尝试：

```
// for last tab
$(".ui-tabs-nav li:last")
// with your code as shown
$("#personnelStats_tabs .ui-tabs-nav li:last")

// for last panel
$(".ui-tabs-panel:last")
// with your code as shown
$("#personnelStats_tabs .ui-tabs-panel:last") 
```

哎呀，刚刚意识到新的jquery有变化，我必须更新我的博客！为什么他们更改班级名称！

有关更多信息，请参阅[jQuery :last 选择器](http://api.jquery.com/last-selector/)

如果需要，您还可以使用 jQuery 的[.last()](http://api.jquery.com/last/)函数而不是 :last 选择器。

# graph - 显示 wav 文件的图形 c#

> ID：13332368
> 
> 赞同：-1
> 
> 时间：2012-11-11T15:07:18.183
> 
> 标签：graph, wav, frequency, voice

我需要在 C# 中显示一个 wav 文件的图表，您可以在其中看到文件正在播放时文件中语音的实际频率。

在 C# 中。

有任何想法吗？谢谢， 奥菲克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:10:07.540

[如何渲染音频波形？](https://stackoverflow.com/questions/11451707/how-to-render-audio-waveform)

[如何在 C# 中创建音频频谱](https://stackoverflow.com/questions/6245450/how-to-create-audio-spectrum-in-c-sharp)

[http://www.codeproject.com/Articles/20025/Sound-visualizer-in-C](http://www.codeproject.com/Articles/20025/Sound-visualizer-in-C)

... 其他人也在那里

# c# - 复制/编辑文本文件并以原始编码保存

> ID：13332371
> 
> 赞同：0
> 
> 时间：2012-11-11T15:07:40.427
> 
> 标签：c#, text, encoding, io, save

我正在尝试打开大量基于文本的文件（php、css、js、html、tmpl 等）并对它们的内容执行操作，然后再将它们重新保存到不同的位置（镜像）。

背景：整个东西是一个工具，Web 开发人员可以使用它在发布项目之前自动对其项目执行某些清理程序。

但是，目前，这只支持 UTF8 并将所有内容重新保存为 UTF8。我创建了大量不同编码的文本文件：ANSI、韩语、UTF8 等。

但是，所有内容都会重新保存为 UTF8，并且在某些情况下会丢失字符（例如韩文、西里尔文、中文等）。

我的目标是以原始编码打开文件，然后执行我的操作并将其保存为与以前完全相同的编码。

下面，您可以看到我当前的尝试产生了不希望的结果。

```
var cfi = new FileInfo("myfile.ext");
System.IO.TextReader tr = cfi.OpenText();
string fileContent = tr.ReadToEnd();
tr.Close();

// Do stuff to fileContent

File.WriteAllText(cfi.FullName, fileContent); 
```

任何指向正确方向的指针都将受到高度赞赏。

# algorithm - 如何在粒子滤波算法中确定性地选择基础样本？

> ID：13332373
> 
> 赞同：1
> 
> 时间：2012-11-11T15:08:04.147
> 
> 标签：algorithm, language-agnostic, probability, particle-filter

粒子滤波算法因其用于跟踪视频序列中的对象而闻名：在每次迭代中，该算法都会生成关于对象运动的假设（或样本）。为了生成新假设，缩合算法的第一步涉及样本的选择：[此网页](http://www.robots.ox.ac.uk/~misard/download.html)中提供的示例显示了选择步骤的实现，该步骤使用二分搜索来选择一个碱基样本; 支持该`pick_base_sample()`功能的评论解释说

> *使用此例程使冷凝 O(NlogN)，其中 N 是样本数。确定性地选择基础样本可能会更好，因为那时算法是 O(N) 并且可能稍微更有效，但是为了概念上的简单性并且因为它更好地映射到已发表的文献，这个例程被保留在这里。*

确定性地选择基础样本意味着什么？如何确定性地选择基础样本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:01:19.193

凝聚算法利用多个样本来表示当前估计的状态，每个样本都有一个相关的权重（估计样本正确的概率）。

选择步骤从这个集合中选择 N 个样本（有放回，所以同一个样本可以出现多次）。

为了解释选择步骤，想象将样本绘制为一系列线段。让每个线段的宽度等于该样本的权重。

例如，假设我们有样本 A（权重 0.1）B（权重 0.3）和 C（权重 0.6）。

我们会画：

ABBBCCCCCC

正常的随机选择过程包括通过沿这条线选取一个随机点并查看哪个样本出现在该位置来抽取样本。这种方法的感知问题是，当使用树数据结构来保存权重时，它需要 O(logN) 操作来计算出哪个样本出现在特定位置。（虽然在实践中我不希望这成为实现中的主要处理瓶颈）

另一种确定性（基本上认为“可重复”和“不涉及随机数”）方法是通过沿同一条线选取 N 个规则间隔的点来简单地选择样本。这样做的好处是执行此操作的算法需要时间 O(N) 而不是 O(NlogN)。

（确定性算法是循环遍历所有样本，跟踪到目前为止看到的总重量。每当总重量达到下一个规则间隔的点时，您就收集一个新样本。这只需要一次通过样本，所以 O( ñ）。）

# java - 可以在 Event Dispatch Thread 中使用 JPrintJob.print() 吗？

> ID：13332374
> 
> 赞同：1
> 
> 时间：2012-11-11T15:08:13.080
> 
> 标签：java, multithreading, printing

那是我的问题。

Printable 对象的 print() 方法应该在另一个线程中运行还是在线程池中运行，或者在 EDT 中执行它没有问题？

# c# - 如何在 C# 中将 HTML 设置为剪贴板？

> ID：13332377
> 
> 赞同：19
> 
> 时间：2012-11-11T15:08:20.557
> 
> 标签：c#, .net, html, clipboard

我想将 HTML 格式的富文本放在剪贴板上，这样当用户粘贴到 Word 时，它将包含源 HTML 格式。

使用[该`Clipboard.SetText`方法](http://msdn.microsoft.com/en-us/library/tbfb3z56.aspx)不起作用。

另外，我希望如果用户粘贴到像 Word 这样的富编辑器中，它将粘贴格式化的文本，如果他们粘贴到像记事本这样的普通编辑器中，它将粘贴纯文本。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-11T15:08:20.557

设置 HTML 文本时，您需要提供一个标题，其中包含您实际要粘贴的 html 片段的附加信息，同时能够围绕它提供附加样式：

```
Version:0.9
StartHTML:000125
EndHTML:000260
StartFragment:000209
EndFragment:000222
<HTML>
<head>
<title>HTML clipboard</title>
</head>
<body>
<!–StartFragment–&gt;<b>Hello!</b><!–EndFragment–&gt;
</body>
</html> 
```

使用标题（和正确的索引），调用`Clipboard.SetText`with`TextDataFormat.Html`就可以了。

要处理 HTML 和纯文本粘贴，您不能使用该`Clipboard.SetText`方法，因为每次调用它都会清除剪贴板；您需要创建一个`DataObject`实例，`SetData`使用 HTML 调用其方法一次，使用纯文本调用一次，然后使用`Clipboard.SetDataObject`.

**更新**

有关更多详细信息和*ClipboardHelper*实现，请参阅“[重新访问将 HTML/文本设置为剪贴板”。](http://theartofdev.com/2014/06/12/setting-htmltext-to-clipboard-revisited/)

 ** * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-02-19T14:31:05.150

我找到了一些代码：[https ://www.experts-exchange.com/questions/21966855/Create-a-hyperlink-in-VB-net-copy-to-clipboard-Should-be-able-to-paste-hyperlink -in-Microsoft-Word-Excel.html](https://www.experts-exchange.com/questions/21966855/Create-a-hyperlink-in-VB-net-copy-to-clipboard-Should-be-able-to-paste-hyperlink-in-Microsoft-Word-Excel.html)

此代码处理更新开始和结束索引的问题。

转换为 C#：

```
public void AddHyperlinkToClipboard(string link, string description)
{
    const string sContextStart = "<HTML><BODY><!--StartFragment -->";
    const string sContextEnd = "<!--EndFragment --></BODY></HTML>";
    const string m_sDescription = "Version:1.0" + Constants.vbCrLf + "StartHTML:aaaaaaaaaa" + Constants.vbCrLf + "EndHTML:bbbbbbbbbb" + Constants.vbCrLf + "StartFragment:cccccccccc" + Constants.vbCrLf + "EndFragment:dddddddddd" + Constants.vbCrLf;

    string sHtmlFragment = "<A HREF=" + Strings.Chr(34) + link + Strings.Chr(34) + ">" + description + "</A>";

    string sData = m_sDescription + sContextStart + sHtmlFragment + sContextEnd;
    sData = sData.Replace("aaaaaaaaaa", m_sDescription.Length.ToString().PadLeft(10, '0'));
    sData = sData.Replace("bbbbbbbbbb", sData.Length.ToString().PadLeft(10, '0'));
    sData = sData.Replace("cccccccccc", (m_sDescription + sContextStart).Length.ToString().PadLeft(10, '0'));
    sData = sData.Replace("dddddddddd", (m_sDescription + sContextStart + sHtmlFragment).Length.ToString().PadLeft(10, '0'));
    sData.Dump();
    Clipboard.SetDataObject(new DataObject(DataFormats.Html, sData), true );
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-07-19T11:03:55.430

让我分享一个将剪贴板数据设置为 HTML 的助手，这是我刚刚为我的小项目[#DevComrade 提出的](https://github.com/postprintum/devcomrade#what-is-it)：

```
 var dataObject = new DataObject();
dataObject.SetData(DataFormats.Html, ClipboardFormats.ConvertHtmlToClipboardData(html);
Host.SetClipboardDataObject(dataObject);

internal static class ClipboardFormats
{
    static readonly string HEADER = 
        "Version:0.9\r\n" +
        "StartHTML:{0:0000000000}\r\n" +
        "EndHTML:{1:0000000000}\r\n" +
        "StartFragment:{2:0000000000}\r\n" +
        "EndFragment:{3:0000000000}\r\n";

    static readonly string HTML_START =
        "<html>\r\n" +
        "<body>\r\n" +
        "<!--StartFragment-->";

    static readonly string HTML_END =
        "<!--EndFragment-->\r\n" +
        "</body>\r\n" +
        "</html>";

    public static string ConvertHtmlToClipboardData(string html)
    {
        var encoding = new System.Text.UTF8Encoding(encoderShouldEmitUTF8Identifier: false);
        var data = Array.Empty<byte>();

        var header = encoding.GetBytes(String.Format(HEADER, 0, 1, 2, 3));
        data = data.Concat(header).ToArray();

        var startHtml = data.Length;
        data = data.Concat(encoding.GetBytes(HTML_START)).ToArray();

        var startFragment = data.Length;
        data = data.Concat(encoding.GetBytes(html)).ToArray();

        var endFragment = data.Length;
        data = data.Concat(encoding.GetBytes(HTML_END)).ToArray();

        var endHtml = data.Length;

        var newHeader = encoding.GetBytes(
            String.Format(HEADER, startHtml, endHtml, startFragment, endFragment));
        if (newHeader.Length != startHtml)
        {
            throw new InvalidOperationException(nameof(ConvertHtmlToClipboardData));
        }

        Array.Copy(newHeader, data, length: startHtml);
        return encoding.GetString(data);
    } 
} 
```

我使用[了这个](https://docs.microsoft.com/en-us/troubleshoot/cpp/add-html-code-clipboard)和[这个](https://docs.microsoft.com/en-us/previous-versions/windows/internet-explorer/ie-developer/platform-apis/aa767917(v=vs.85))参考。另外，感谢@DaveyBoy 发现了一个错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T15:00:11.503

Arthur 对标题的看法是正确的，但这里要注意的重要一点是，数据不会以纯文本形式出现在剪贴板上。您必须使用 CF_HTML。您可以在 MSDN 上阅读相关内容：http: [//msdn.microsoft.com/en-us/library/aa767917](http://msdn.microsoft.com/en-us/library/aa767917(v=vs.85).aspx) (v=vs.85).aspx 正确地说，您将有一个 CF_TEXT 简单地显示：“你好！ "，然后是带有 HTML 标头和数据的 CF_HTML，如 Arthur 的示例所示。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-02-08T20:06:53.740

正如 Arthur 所提到的，我使用了[重新访问将 HTML/文本设置为剪贴板的代码](https://theartofdev.com/2014/06/12/setting-htmltext-to-clipboard-revisited/)

我必须在标题中添加换行符才能使其工作（在本例中为 VB）

```
Private Const Header As String = "Version:0.9" & vbCrLf & "StartHTML:<<<<<<<<1" & vbCrLf & "EndHTML:<<<<<<<<2" & vbCrLf & "StartFragment:<<<<<<<<3" & vbCrLf & "EndFragment:<<<<<<<<4" & vbCrLf & "StartSelection:<<<<<<<<3" & vbCrLf & "EndSelection:<<<<<<<<4" 
```

希望这可以帮助*

# c++ - const int& 性能问题

> ID：13332379
> 
> 赞同：2
> 
> 时间：2012-11-11T15:08:32.087
> 
> 标签：c++, reference

我之前问过一个关于 stackoverflow 的问题（如果您有兴趣，请点击以下链接：[通过引用传递“高级”概念？](https://stackoverflow.com/questions/13332101/passing-by-reference-advanced-concept)）

有趣的是，其中一个答案引起了我的兴趣，我觉得它值得一个单独的问题。

```
const int& x = 40; 
```

如果 40 恰好是 CPU 缓存中的一个值（右值）。那么您是否会通过编写该行仅保留高速缓存以在进程的整个生命周期内保存数字 40？这不是一件坏事吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T15:12:50.023

文字`40`几乎肯定存在于一些只读存储器中，可能在汇编器中（对于较小的值，通常有可以设置寄存器或地址的指令；对于较大的值，它将作为常量存在于某个地方）。它不在“缓存中”。当您创建对它的`const`引用时，会在编译器认为适合保留临时文件的任何地方（可能在堆栈上）构造一个临时文件。这是否存在于任何缓存中取决于系统。

如果这个临时地址从未被占用，它实际上甚至可能不会被创建：C++ 标准中的所有规则都受“好像”规则的约束。结果，引用和文字将是相同的。如果`const`引用的地址曾经被占用，编译器需要决定将对象放在哪里，并且您确实可能会看到很小的性能影响。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-11T15:12:23.720

**您无法从程序中保留缓存空间**

它真的不在你的控制范围内。缓存控制决策由其自己的控制器做出，该控制器研究**时间和空间局部性**，其中包括决定替换哪些缓存行以及保留哪些缓存行。

通常有**多个数据副本**，位于不同的缓存和虚拟内存地址空间（映射到物理内存 + 交换）。

* * *

管理内存的方式远比这复杂得多。在处理内存时，系统每次都会生成一个虚拟地址。

这个虚拟地址被**翻译**成物理地址。这种转换可以在高速缓存、物理内存等上产生一个地址。它不一定映射到一块内存。如果它已被换出，则会导致页面错误并且该页面被加载到内存中（多级）。

缓存管理等低级别操作**不受**您在此级别的决策的影响。

# database-design - 在数据库中存储位置点阵

> ID：13332386
> 
> 赞同：0
> 
> 时间：2012-11-11T15:09:15.870
> 
> 标签：database-design

这个问题是在以下考虑之后出现的：考虑像 Travian 或 Tiberium 战争这样的 MMOG 的巨大世界地图。即使它们是 2D 地图，它们通常也有很多不同的身份，例如玩家所在的城镇、地形特征等。

这些地图是如何保存在数据库中的？每个图块是否都有一个条目，并且该位置的身份具有外键？还是反过来：每个身份都是定义其位置的两个位置属性（x，y）？

从更广泛的意义上讲，我的问题如下：在类似 mysql 的数据库上存储位置格子（方形瓷砖、六边形瓷砖等）的最有效方法是什么？在查询数据库以获取位置或位置列表时，进行此类存储的瓶颈（如果有）是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:14:58.500

这完全取决于场景。例如，如果地图是稀疏的，将具有坐标的实体的位置存储在单行中可能是有意义的。如果拓扑是不规则的（即，任何给定的瓦片有任意多条路径），那么您可以将其存储为图形（即，单独的“节点”和“边”表，在一对多配置中） . 您可能决定对数据库中的项目使用连续（例如，真实）坐标，然后在应用程序中简单地将它们划分为逻辑“图块”。

同样，瓶颈将取决于应用程序。你是否经常需要问“我周围现在有什么？”，或者你只是问“我能从这里到那里吗？”。如果您有特定的用例，也许您可​​以添加更多细节，我们可以尝试提供更详细的答案。

与任何谈论性能的事情一样，假设情况下的随机猜测永远不能替代原型设计和测量。

# google-drive-api - 锚文件不存在？

> ID：13332388
> 
> 赞同：4
> 
> 时间：2012-11-11T15:09:31.333
> 
> 标签：google-drive-api

在它提到[的开发网站上](https://developers.google.com/drive/v2/reference/comments?hl=en)查看 Google Drive 文档以获取评论时

> 锚; 细绳; 表示为 JSON 字符串的文档区域。有关如何定义和解释锚属性的详细信息，请参阅锚文档。

然而，在哪里`anchor documentation`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T20:26:05.287

有关详细信息，请参阅[https://developers.google.com/drive/manage-comments](https://developers.google.com/drive/manage-comments)。

FWIW，锚点目前有点受限。最大的问题是评论的锚点是不可变的。如果您最终使用自定义方案并且可以引用内容中唯一可识别的内容（例如 XML 元素 ID 或其他标记），那么您应该没有任何问题。但是文档中详述的其他一些锚定方案是有问题的。例如，如果修改文件并在锚点位置之前插入一行，则锚定到文本文件中的一行将中断。在锚点可变之前，最好将自己限制在自定义方案和/或未锚定的评论中。

# perl - Perl 从多个文件中删除停用词

> ID：13332390
> 
> 赞同：0
> 
> 时间：2012-11-11T15:09:37.850
> 
> 标签：perl, file, stop-words

我已经阅读了很多关于如何从文件中删除停用词的表格，我的代码删除了许多其他内容，但我还想包括停用词。这就是我达到的程度，但我不知道我错过了什么。请指教

```
use Lingua::StopWords qw(getStopWords);
my $stopwords = getStopWords('en');

chdir("c:/perl/input");
@files = <*>;

foreach $file (@files) 
  {
    open (input, $file);

    while (<input>) 
      {
        open (output,">>c:/perl/normalized/".$file);
    chomp;
    #####What should I write here to remove the stop words#####
    $_ =~s/<[^>]*>//g;
    $_ =~ s/\s\.//g;
    $_ =~ s/[[:punct:]]\.//g;
    if($_ =~ m/(\w{4,})\./)
    {
    $_ =~ s/\.//g;
    }
    $_ =~ s/^\.//g;
    $_ =~ s/,/' '/g;
    $_ =~ s/\(||\)||\\||\/||-||\'//g;

    print output "$_\n";

      }
   }

close (input);
close (output); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:32:58.407

停用词是`%$stopwords`其值为 1 的键，即：

```
@stopwords = grep { $stopwords->{$_} } (keys %$stopwords); 
```

停用词可能只是 的键`%$stopwords`，但根据`Lingua::StopWords`文档，您还需要检查与键关联的值。

一旦你有了停用词，你可以使用如下代码删除它们：

```
# remove all occurrences of @stopwords from $_

for my $w (@stopwords) {
  s/\b\Q$w\E\b//ig;
} 
```

请注意使用`\Q...\E`引用可能出现在停用词中的任何正则表达式元字符。尽管停用词不太可能包含元字符，但在您想在正则表达式中表示文字字符串时，这是一个很好的做法。

我们还使用`\b`来匹配单词边界。这有助于确保我们不会在另一个单词中间出现停用词。希望这对您有用-这在很大程度上取决于您输入的文本是什么样的-即您是否有标点符号等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:58:52.940

```
# Always use these in your Perl programs.
use strict;
use warnings;

use File::Basename qw(basename);
use Lingua::StopWords qw(getStopWords);

# It's often better to build scripts that take their input
# and output locations as command-line arguments rather than
# being hard-coded in the program.
my $input_dir   = shift @ARGV;
my $output_dir  = shift @ARGV;
my @input_files = glob "$input_dir/*";

# Convert the hash ref of stop words to a regular array.
# Also quote any regex characters in the stop words.
my @stop_words  = map quotemeta, keys %{getStopWords('en')};

for my $infile (@input_files){
    # Open both input and output files at the outset.
    # Your posted code reopened the output file for each line of input.
    my $fname   = basename $infile;
    my $outfile = "$output_dir/$fname";
    open(my $fh_in,  '<', $infile)  or die "$!: $infile";
    open(my $fh_out, '>', $outfile) or die "$!: $outfile";

    # Process the data: you need to iterate over all stop words
    # for each line of input.
    while (my $line = <$fh_in>){
        $line =~ s/\b$_\b//ig for @stop_words;
        print $fh_out $line;
    }

    # Close the files within the processing loop, not outside of it.
    close $fh_in;
    close $fh_out;
} 
```

# php - 无法比较 BCRYPT 密码

> ID：13332391
> 
> 赞同：2
> 
> 时间：2012-11-11T15:09:43.277
> 
> 标签：php, encryption, passwords, bcrypt, blowfish

我正在遵循本网站[http://www.gregboggs.com/php-blowfish-random-salted-passwords/](http://www.gregboggs.com/php-blowfish-random-salted-passwords/)中的指南，但由于某种原因，在检查密码是否相同时它会失败。

html 很简单，2 种形式，一种用于创建帐户，一种用于检查。代码可以在这里看到[http://jsfiddle.net/Xf2Tc/](http://jsfiddle.net/Xf2Tc/)

作为输出我得到： salt = salt in database password in database: $2a$05$BcTDz3GVPJrLH3YRPF9FZ.uRBssr0ncQ4exG4/EtmnJ7Fz2CkoVha 但重新加密的密码总是非常小。BcPgSBqZz80dw

我一定是用错了盐什么的。

如果有人可以编辑得更有条理，我将不胜感激。

```
<?php 
defined( '_JEXEC' ) or die( 'Restricted access' );
    $hostname="exampleHost";
    $database="exampleDB";
    $username="exampleUsername";
    $password="examplePassword";
    if(isset($_POST['Upassword'])&&isset($_POST['account'])&&!empty($_POST['Upassword'])&&!empty($_POST['account']))    {
        try {
            $pdo = new PDO("mysql:host=$hostname;dbname=$database", $username, $password);
            $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

            $Upassword = mysql_real_escape_string($_POST['Upassword']);
            $account = mysql_real_escape_string($_POST['account']);

            //This string tells crypt to use blowfish for 5 rounds.
            $Blowfish_Pre = '$2a$05$';
            $Blowfish_End = '$';

            $Allowed_Chars ='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789./';
        $Chars_Len = 63;

            // 18 would be secure as well.
            $Salt_Length = 21;

            $mysql_date = date( 'Y-m-d' );
            $salt = "";

            for($i=0; $i<$Salt_Length; $i++)
            {
                $salt .= $Allowed_Chars[mt_rand(0,$Chars_Len)];
            }
            $bcrypt_salt = $Blowfish_Pre . $salt . $Blowfish_End;

            $hashed_password = crypt($Upassword, $bcrypt_salt);
            $stmt = $pdo->prepare("INSERT INTO users (reg_date, account, salt, password) VALUES (:mysql_date, :account, :salt, :hashed_password)");
            $stmt->bindParam(':mysql_date', $mysql_date, PDO::PARAM_STR);
            $stmt->bindParam(':salt', $salt, PDO::PARAM_STR);
            $stmt->bindParam(':account', $_POST['account'], PDO::PARAM_STR);
            $stmt->bindParam(':hashed_password', $hashed_password, PDO::PARAM_STR);
            $stmt->execute();
        } catch(PDOException $e) {
            //file_put_contents('PDOErrors.txt', $e->getMessage(), FILE_APPEND);
            echo 'ERROR: ' . $e->getMessage();
        }
    }
            /*
                * to test for correct encryption
                *
            */
                  if(isset($_POST['Upassword2'])&&isset($_POST['account2'])&&!empty($_POST['Upassword2'])&&!empty($_POST['account2']))  {
    try {
        $pdo = new PDO("mysql:host=$hostname;dbname=$database", $username, $password);
        $stmt = $pdo->prepare("SELECT salt, password FROM users WHERE account=:account");
        $stmt->bindParam(':account', $_POST['account2'], PDO::PARAM_STR);
        $stmt->execute();
        $row = $stmt->fetch(PDO::FETCH_ASSOC);

        $Upassword2 = mysql_real_escape_string($_POST['Upassword2']);
        echo $row['salt'];
        $bcrypt_salt = $Blowfish_Pre . $row['salt'] . $Blowfish_End;
        $hashed_password = crypt($Upassword2, $bcrypt_salt);

        echo "PassDB: " .  $row['password'];
        echo '-------------------------------------------';
        echo "result: " .  $hashed_password;
            echo '-------------------------------------------';
        if ($hashed_password == $row['password']) {
          echo 'Password verified!';
          }
          echo 'i am here';

    } catch(PDOException $e) {
    //file_put_contents('PDOErrors.txt', $e->getMessage(), FILE_APPEND);
    echo 'ERROR: ' . $e->getMessage();
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:15:47.427

如您所见，我将代码分成 2 个 if 语句，这意味着在检查密码是否正确时未设置我的 Blowfish_Pre 和 $Blowfish_End。

解决方案要么在 if 语句之前设置此变量，要么使用两次设置它们。

希望它可以帮助某人。

# android - Android - 直接写入外部 sd 卡而不通过文件系统

> ID：13332411
> 
> 赞同：0
> 
> 时间：2012-11-11T15:12:08.997
> 
> 标签：android, java-native-interface, sd-card, android-sdcard

我正在尝试使用 android OS 直接从外部 sd 卡读取。当我打开一个文件时：

```
int fd = open("/sys/block/mmcblk1", O_RDONLY); 
```

它成功了。

但是当我尝试从中读取时：

```
char buffer[4096];
//jbuffer_size = 4096
bytes_read = read(fd,buffer, jbuffer_size); 
```

它返回“权限被拒绝”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:48:46.890

您需要正确的权限才能读取外部文件。尝试将“READ_EXTERNAL_STORAGE”权限添加到您的 Android 清单中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T20:59:23.023

我应该写“/dev/block/mmcblk1”而不是“sys”

# python - Python 2.2 是否有带有 HTTPCookieProcessor 功能的 urllib2 模块？

> ID：13332417
> 
> 赞同：1
> 
> 时间：2012-11-11T15:12:28.323
> 
> 标签：python, urllib2, urllib, pys60

我正在使用带有 Python 2.2 引擎的 Python S60 (PyS60)。我已经有 urllib2 模块但 HTTPCookieProcessor 不存在

```
>>> import urllib2
>>> dir(urllib2)
['AbstractBasicAuthHandler', 'AbstractDigestAuthHandler', 'AbstractHTTPHandler', 'BaseHandler', 'CacheFTPHandler', 'CustomProxy', 'CustomProxyHandler', 'FTPHandler', 'FileHandler', 'GopherError', 'GopherHandler', 'HTTPBasicAuthHandler', 'HTTPDefaultErrorHandler', 'HTTPDigestAuthHandler', 'HTTPError', 'HTTPHandler', 'HTTPPasswordMgr', 'HTTPPasswordMgrWithDefaultRealm', 'HTTPRedirectHandler', 'HTTPSHandler', 'OpenerDirector', 'OpenerFactory', 'ProxyBasicAuthHandler', 'ProxyDigestAuthHandler', 'ProxyHandler', 'Request', 'StringIO', 'URLError', 'UnknownHandler', '__builtins__', '__doc__', '__file__', '__name__', '__path__', '__version__', '_opener', 'addinfourl', 'base64', 'build_opener', 'dis', 'encode_digest', 'ftplib', 'ftpwrapper', 'getproxies', 'gopherlib', 'httplib', 'inspect', 'install_opener', 'localhost', 'md5', 'mimetools', 'mimetypes', 'noheaders', 'os', 'parse_http_list', 'parse_keqv_list', 'posixpath', 're', 'rfc822', 'sha', 'socket', 'splitattr', 'splitgophertype', 'splithost', 'splitport', 'splitquery', 'splittype', 'stat', 'sys', 'time', 'token', 'tokenize', 'types', 'unquote', 'unwrap', 'url2pathname', 'urlopen', 'urlparse'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:15:47.510

[urllib2.HTTPCookieProcessor](http://docs.python.org/2/library/urllib2.html#httpcookieprocessor-objects)是在 Python 2.4 中添加的，因此在您的 Python 版本中不可用。我建议您升级到更新版本的 Python 2，因为 Python 2.2 已经有九年的历史了。

我刚刚查了一下 PyS60 的东西，似乎没有更新的版本（虽然我不确定，他们的版本编号方案有点奇怪），所以你可能无法升级它。您可以尝试`HTTPCookieProcessor`从 Python 2.4+ 向后移植类型。但是，如果其他内部结构发生了必要的变化，那可能就行不通了。

查看[它的源代码](http://hg.python.org/cpython/file/ceec209b26d4/Lib/urllib2.py#l1033)（在 Python 2.4 中，不要从更高版本中引入太多更改），它看起来确实非常简单，因此它可能会运行良好。至少值得一试。

# java - 为什么 assertThat().isEqualTo 产生的结果与 Hibernate 中的 equals 不同？

> ID：13332418
> 
> 赞同：0
> 
> 时间：2012-11-11T15:12:45.213
> 
> 标签：java, hibernate, testing

我在测试中使用了 festAssertions，我注意到使用`assertThat(object).isEqualTo(otherObject)`产生的结果与`assertThat(object.equals(otherObject)).isTrue();`测试休眠对象的测试不同。

我不得不做解决方法，现在测试看起来真的很难看，但我不能使用 `assertThat(collection).contains(object1, object2)`，因为那不起作用！

这里是部分代码（看最后一行）： seasonRate, seasonRate1 被创建和持久化。然后从数据库中检索并检查原件。没什么花哨的，但不适用于 festAssertions。

您是否知道如何解决该问题以及是否是我这边的一些错误？

```
 (...)
    session.save(seasonRate);
    session.save(seasonRate2);

    session.getTransaction().commit();
    session.close();

    session = sessionFactory.getCurrentSession();
    session.beginTransaction();
    RateRepositoryHibernate rateRepositoryHibernate= new RateRepositoryHibernate(new StubHibernateSessionFactory(sessionFactory));
    // when
    final Collection<Rate> allRatesForRoom = rateRepositoryHibernate.getAllRatesForRoom(room);

    // then
    assertThat(allRatesForRoom.size()).isEqualTo(EXPECTED_RATES);
    for(Rate rate : allRatesForRoom)
    {
        if(rate.getRateName().equals("season name 2"))
        {
            assertThat(rate.equals(seasonRate2)).isTrue();
        }
        if(rate.getRateName().equals("season name"))
        {
            assertThat(rate.equals(seasonRate)).isTrue();
        }
    }
    //assertThat(allRatesForRoom).contains(seasonRate, seasonRate2); // this does not work somehow 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:31:49.577

事实证明，这不是 festAssertions 问题，因为在更改代码后，我无法重现该错误并且`.contains`方法运行良好。

我的更改与当前会话概念有关，并且我可能有一些错误的代码。

如果你碰巧遇到类似的问题，那么你应该在你的休眠相关代码和配置中寻找问题，而不是在 festAssertions 中。

# java - 如何将数组对象存储在 Object 类的单个引用中？

> ID：13332419
> 
> 赞同：2
> 
> 时间：2012-11-11T15:12:46.820
> 
> 标签：java

据我了解，Object 也是 java 中的一个类。那么，我们怎么写

```
Object ob = new Integer[2]; 
```

并不是

```
Integer i = new Integer[2]; 
```

为什么单个引用`ob`可以指向整数数组但类型的引用`Integer`不能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T15:15:14.040

因为每个数组都是一个对象。所以多态性规则告诉我们`Integer[]`(array of `Integer`) 可以存储在 an 中`Object`，但显然`Integer[]`(array of `Integer`) 不能存储在 an 中`Integer`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T15:20:29.067

从[`JLS#Chapter 10\. Arrays`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html)

> 在 Java 编程语言中，数组是对象（第 4.3.1 节），是动态创建的，并且**可以分配给 Object 类型的变量**（第 4.3.2 节）。Object 类的所有方法都可以在数组上调用。
> 
> 数组的所有组件都具有相同的类型，称为数组的组件类型。**如果数组的组件类型是 T，那么数组本身的类型写成 T[]。**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-11T15:16:38.460

因为每个数组都是`Object`. 但是没有数组是`Integer`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T15:14:18.747

由于下面的表达式`RHS`创建了一个`array object`： -

```
new Integer[2]; 
```

因此，您在 LHS 上的引用类型应该兼容，以便能够保存对数组的引用。

现在，由于`array`在 Java 中是 的子类型`Object`，所以`Object`类型可以包含对数组的引用。但是，`Integer`引用当然不能指向`array`.

所以，

```
Object ob = new Integer[2]; // is valid. as `Object` type reference can point to an array object
Integer i = new Integer[2]; // is not valid. as `Integer` type reference cannot point to an array object. 
```

# android - 如何创建其他类可以查看和编辑的 int？安卓

> ID：13332426
> 
> 赞同：1
> 
> 时间：2012-11-11T15:13:29.170
> 
> 标签：android, class

我有一个名为 Scouting 的类，它在不同的类 ScoutingFormData 中运行一个函数（同一个包中的不同 java 文件）。我想要它以便可以从 ScoutingFormData 编辑 Scouting 中定义的整数。我在 Scouting 的主类中定义了 int `public int SFID=-1;`:，但我不知道如何从 ScoutingFormData 编辑该 int。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:15:22.543

向它添加`static`修饰符，使其属于该类。

如果你的意思是客观的。使用 getter 和 setter。

或者你可以直接改变它`ScoutingObject.SFID=?; //in your ScoutingFormData class.`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T15:15:31.580

不要公开您的实例字段，使用 getter 和 setter。

```
public int getField() {
    return field;
}
public void setField(int field) {
    this.field = field;
} 
```

这是如果您的字段需要是实例字段。

如果您需要一个属于该类的字段，则`ScoutingObject`需要将其设为静态

```
public static int SFID=-1; 
```

然后你可以像这样访问它：

```
ScoutingObject.SFID 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-11T15:27:00.157

使用 getter 和 setter，避免使用公共属性。

*在您的Scouting 课程*中使用这些方法：

```
public int getMyInteger() 
{
  return myInteger;
}

public void setMyInteger(int newIntegerValue) 
{
  this.myInteger = newIntegerValue;
} 
```

你在哪里有你的私人 int myInteger。

在*ScoutingFormData 类*中，您可以获取和设置值：

```
setMyInteger(23); // The integer myInteger in the Scouting class is now set to 23

int newInteger = getMyInteger(); // The integer newInteger has been initialized to myIntegers value 
```

# wcf - WCF & Silverlight >> pollingDuplexHttpBinding >> 在浏览器关闭时从 silverlight 调用 Web 服务

> ID：13332427
> 
> 赞同：1
> 
> 时间：2012-11-11T15:13:40.210
> 
> 标签：wcf, silverlight, pollingduplexhttpbinding

我有使用 pollingDuplexHttpBinding 绑定的 WCF 服务器和 Silverlight 客户端。

我想关闭连接并调用 EndSession 操作方法，它将用户从

活跃用户列表，并关闭会话 ( `IsTerminating = true` )

```
 [OperationContract(IsOneWay = true, IsInitiating = false, IsTerminating = true)]
    void EndSession(); 
```

据此**[，](http://danielvaughan.org/post/Calling-Web-Services-from-Silverlight-after-the-Browser-has-closed.aspx)**您不能在 Application_Exit 事件上调用 wcf 操作，它也给出了一个

对我来说似乎“2很吵”的解决方案，

我在这里有什么选择？这是唯一的方法吗？

1）使用链接解决方案？

2) 服务器每 X 秒运行一个方法来检查双工对象状态是否处于活动状态？

```
(((ICommunicationObject)clientContract.Value).State != CommunicationState.Opened 
```

3）其他？！简单的内置解决方案 ? 为什么 Silverlight 是地狱？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:33:08.090

这是我刚刚尝试过并且有效的解决方案。它的核心发布在您问题链接的评论中！:)

银光`App.Exit`事件：

```
 private void Application_Exit(object sender, EventArgs e)
    {
        if (String.IsNullOrEmpty(App.SessionId))
            return;

        var page = HtmlPage.Document.DocumentUri;
        UriBuilder builder = new UriBuilder();
        builder.Scheme = page.Scheme;
        builder.Host = page.Host;
        builder.Port = page.Port;
        builder.Path = page.LocalPath;

        string request = builder.Uri.ToString();

        request += "?closing=" + App.SessionId;
        System.Windows.Browser.ScriptObject obj = System.Windows.Browser.HtmlPage.Window.CreateInstance("XMLHttpRequest"); 
        obj.Invoke("open", "POST", request, false);

        obj.Invoke("setRequestHeader", "Content-Type", "application/x-www-form-urlencoded");

        obj.Invoke("send", "");
    } 
```

上面的代码向承载 Silverlight 对象的页面发送一个请求，该页面是一个 ASPX 页面，并具有以下代码隐藏：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!String.IsNullOrEmpty(this.Request.QueryString["closing"]))
            chatSvc.Quit(this.Request.QueryString["closing"]);
    } 
```

`chatSvc`显然，应该是对您的服务的引用以及`Quit`您在客户端关闭时要调用的任何方法。您可以通过查询字符串传递所需的参数。

我承认，这并不漂亮，但它确实有效。

编辑：我不`DocumentUri`直接使用的原因是因为我正在为我的 Silverlight 应用程序使用导航框架。

# c# - NHibernate、Fluent NHibernate 和 Iesi.Collection 的问题。接下来你会尝试什么？

> ID：13332429
> 
> 赞同：18
> 
> 时间：2012-11-11T15:13:42.407
> 
> 标签：c#, nhibernate, fluent-nhibernate

我对 NHibernate 非常陌生，所以如果我在这里遗漏了一些琐碎的事情，我深表歉意。我目前正在阅读 packtpub 的一本名为“NHibernate 3 Beginners Guide”的书。我主要是按照书中的指示进行的。当我说的主要是我使用 MySQL 而不是 MSSQL 并一直使用 NuGet 而不是手动下载二进制文件时，我已经分歧了。

我现在在第 2 章，这是第一个真正的编码章节。在本章中，我将构建一个简单的 WPF 应用程序，通过单击按钮来构建我的数据库架构。我已经为本章中指定的`Product`和类构建了一些 POCO。`Category`通过 NuGet，我添加了以下参考：

1.  MySQL.数据
2.  NHibernate（作为自动解析的依赖项，Iesi.Collections）
3.  流畅的 NHibernate

当我单击按钮来构建我的数据库时，将执行以下代码块：

```
private const string connString = "string omitted for brevity";

private void btnCreateDatabase_Click(object sender, RoutedEventArgs e)
    {
        Fluently.Configure().Database(MySQLConfiguration.Standard.ConnectionString(connString))
            .Mappings(m => m.FluentMappings.AddFromAssemblyOf<ProductMap>())
            .ExposeConfiguration(CreateSchema)
            .BuildConfiguration();
    } 
```

单击按钮后，我收到以下异常（`FileLoadException`）：

外部异常消息：`Could not load file or assembly 'Iesi.Collections, Version=4.0.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)`

内部异常消息：`Could not load file or assembly 'Iesi.Collections, Version=1.0.1.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)`

如果有帮助，这里是“Fusion Log”：

```
=== Pre-bind state information ===
LOG: User = Borealis\Frito
LOG: DisplayName = Iesi.Collections, Version=1.0.1.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
 (Fully-specified)
LOG: Appbase = file:///C:/Users/Frito/documents/visual studio 2010/Projects/NH3BeginnersGuide/Chapter2/App/Sample.UI/bin/Debug/
LOG: Initial PrivatePath = NULL
Calling assembly : NHibernate, Version=3.3.1.4000, Culture=neutral, PublicKeyToken=aa95f207798dfdb4.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\Users\Frito\documents\visual studio 2010\Projects\NH3BeginnersGuide\Chapter2\App\Sample.UI\bin\Debug\Sample.UI.vshost.exe.config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Redirect found in application configuration file: 1.0.1.0 redirected to 4.0.0.0.
LOG: Post-policy reference: Iesi.Collections, Version=4.0.0.0, Culture=neutral, PublicKeyToken=aa95f207798dfdb4
LOG: Attempting download of new URL file:///C:/Users/Frito/documents/visual studio 2010/Projects/NH3BeginnersGuide/Chapter2/App/Sample.UI/bin/Debug/Iesi.Collections.DLL.
WRN: Comparing the assembly name resulted in the mismatch: Major Version
ERR: Failed to complete setup of assembly (hr = 0x80131040). Probing terminated. 
```

我尝试了以下方法，现在有点不知所措：

1.  尝试通过 NuGet 升级 Iesi.Collections 但未能说明没有兼容的 NHibernate 版本。
2.  下载 NHibernate 和 FluentNhibernate 的二进制文件并手动引用它们。
3.  从书中提取源示例并复制示例中的 DLL。这给了我一个不同的错误，我还没有深入研究以提出问题。

我有两个问题：

1.  首先，为什么 NuGet 包会在发布的版本指向 1.* 时尝试查找版本 4.* dll？
2.  除了获取所有源代码并在本地构建之外，我还应该尝试哪些其他事情？我有点茫然，会喜欢其他一些输入。

提前致谢！

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-11T15:52:36.247

天哪，这让我发疯了。我发现 an`app.config`是在某个时候创建​​的，大概是因为我在弄乱某些东西。在`app.config`我发现以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Iesi.Collections" publicKeyToken="aa95f207798dfdb4" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

注释掉`Runtime`元素，重建和运行允许上面的按钮正常工作。我不确定我做了什么导致它生成，但我很高兴我找到了它。感谢大家的努力，感谢您对这个问题的支持！

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-11T17:49:56.367

Iesi.Collections 4.0 是一个针对 .Net 4.0 的经过大量修改的版本，用于未来的 NHibernate 4.0。

不幸的是，用于 NHibernate 版本（包括 3.3.1）的 Nuget 包没有指定 Iesi 依赖项的上限。NHibernate 3.3.2 对此进行了更改，明确禁止 Iesi 版本 4 或更高版本。因此，如果您通过 NuGet 更新到 NH 3.3.2，我希望它能够将 Iesi 依赖关系解析为 3.x 版本。

# c++ - 命名冲突。C++ 和操作系统库（纯 C）

> ID：13332435
> 
> 赞同：1
> 
> 时间：2012-11-11T15:14:22.580
> 
> 标签：c++, c, eclipse, g++

我想为 Linux Socket API 编写一个 C++ 包装器。我的包装器的方法应该与 API 的底层函数名称相同。

但例如在 bind() 方法中，我使用 Linux 套接字 API 中的普通 C 函数 bind() 。我调用`bind(mSocketDescriptor, (struct sockaddr *) &serv_addr, sizeof(serv_addr))`它与 API 函数的签名兼容。我的编译器抱怨 `Invalid arguments 'Candidates are: bool bind(int)'`这指的是我的方法`inline bool Socket::bind(int portno)`。

为什么 Eclipse 指的是包装函数，我如何禁止 Eclipse 这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:17:11.563

您必须添加一个全局范围限定符：

```
::bind(mSocketDescriptor, (struct sockaddr *) &serv_addr, sizeof(serv_addr)); 
```

范围解析决定了编译器在哪里查找名称。您可以在名称前加上命名空间和/或类范围（例如`socket_wrapper::socket::bind()`）。还有全局范围，系统功能通常存在的地方。这些函数可能以全局范围限定符为前缀`::bind()`，因此编译器知道不使用同名的本地方法。

还有`std`命名空间，标准库的类和函数所在的位置。如果您想使用标准库，请在这些名称前加上`std::`（例如`std::iostream, std::cout, std::string, std::vector<>, ...`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:17:46.317

请使用命名空间。明确！

此外，在您的情况下，应使用 :: 前缀 ::bind 引用 C 调用

# matlab - 在matlab图形中使 网格线更大

> ID：13332449
> 
> 赞同：1
> 
> 时间：2012-11-11T15:15:57.397
> 
> 标签：matlab, latex, matlab-figure

如何在我的 matlab 图形中使网格线更大（为了打印目的更胖）？

`.tex`使用以下内容后，我将 matlab 数字包含在我的文档中

```
print -depsc testFig.eps 
```

将数字转换`.eps`为包含在我的`.tex`文档中。

但是我的网格线看起来一点也不好看。即，当我打印文档时，它们显得微弱。无论如何我可以增加网格线的大小/宽度吗？

![测试图](../Images/046ab5af6187a7360afedec0ad61b9fa.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T15:24:40.533

如果你使用

```
set(gca,'LineWidth',10) 
```

在“grid on”之后，这应该增加所有轴的边界，包括网格线。

# json - 自定义 jena-json 编写器

> ID：13332450
> 
> 赞同：0
> 
> 时间：2012-11-11T15:15:59.610
> 
> 标签：json, jena, writer

我正在创建一个网络应用程序，我想将一个 json 文件加载到一个可视化库中。问题是 json 文件需要采用某种格式。我正在使用 jena 获取 TALIS 格式的 json 文件中的数据。我如何才能以自定义格式写入数据？首先将它们放入 talis 然后转换它们或从一开始就以所需的形式获取它们是否更容易？我将不胜感激一切可能的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T23:14:07.897

您没有说明如何将数据提供给客户端 JavaScript 应用程序。我将猜测一下，并假设您正在使用[Jena Fuseki](http://jena.apache.org/documentation/serving_data/#running-a-fuseki-server)来提供数据。如果这不是正确的猜测，您需要更新问题以更准确地了解您的设置。

我认为 Fuseki 目前不支持可插入的编写器。因此，您最好的解决方案是在客户端 JavaScript 中应用转换，将您从服务器获取的 JSON 转换为可视化库所需的格式。我自己在许多使用 RDF 数据的富客户端应用程序中完成了这项工作。我通常发现在任何情况下我都需要应用客户端转换代码 - 通常这不仅仅是 JSON 格式的不同，而且您需要投影一些更容易表达的数据切片或聚合在 JavaScript 中而不是在 SPARQL 或等价物中。

# wpf - 是否可以绑定到 Windows.Storage.ApplicationData.Current.LocalSettings.Values？

> ID：13332458
> 
> 赞同：1
> 
> 时间：2012-11-11T15:17:17.453
> 
> 标签：wpf, windows-phone-8

我有一个我想映射到的值的控件`Windows.Storage.ApplicationData.Current.LocalSettings.Values["MyValue"]`。

我可以直接绑定到这个变量还是需要添加一个视图模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:54:10.230

为此，您需要`x:Static`标记扩展，不幸[的是，它在 Windows Phone 上不可用](https://stackoverflow.com/questions/936304/binding-to-static-property)。

因此，只需将视图模型分配给您的页面，并在属性中公开值：

```
public string MyValue
{
    get
    {
        return Windows.Storage.ApplicationData.Current.LocalSettings.Values["MyValue"];
    }
} 
```

或者您可以公开整个字典：

```
public Windows.Storage.ApplicationDataContainer Settings
{
    get
    {
        return Windows.Storage.ApplicationData.Current.LocalSettings;
    }
} 
```

然后从 XAML 绑定它：

```
<TextBlock Text="{Binding Path=Settings[MyValue]}" /> 
```

# ios - pageviewcontroller 不能包含 tableviewcontrollers 的任何原因？

> ID：13332459
> 
> 赞同：0
> 
> 时间：2012-11-11T15:17:18.657
> 
> 标签：ios, ios6, uitableview, uipageviewcontroller

[在页面视图控制器](http://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/PageViewControllers.html#//apple_ref/doc/uid/TP40011313-CH4-SW5)中拥有表视图控制器的概念让我感到困扰。

然而，客户希望单独的页面在每个页面中都有一个表格视图。在这种情况下，它甚至是有意义的。但是，我以前没有遇到过这种情况，这让我感到困扰。

顺便说一句，表格的每一行都会将一个人带到一个可以编辑数据的详细视图控制器。

我认为如果使用手势识别器允许通过点击或轻拂来进行页面转换，那可能会妨碍表格行。

我要去看看。但是，我的时间有限，如果这不起作用，我将不得不迅速保释。

任何人都看到了这个问题，我现在应该想出另一种方法吗？:)

**更新：**另一种方法可能是包含 tableview 控制器的导航控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:19:41.510

对于基本情况，PageViewController 没有理由不能包含 TableViewController

# java - Java 计算器，BigDecimal 显示

> ID：13332464
> 
> 赞同：1
> 
> 时间：2012-11-11T15:18:11.163
> 
> 标签：java, android, calculator, bigdecimal

> **可能重复：**
> [以科学计数法格式化双精度值](https://stackoverflow.com/questions/2944822/format-double-value-in-scientific-notation)

如何让数字显示在计算器的屏幕上？我正在编写我的第一个 Android 应用程序，屏幕显示我的结果有 10 个位置。现在，我希望我的结果以某种方式转换为适合屏幕的格式。

例如 9999999999+1 不再适合所以它应该显示 1E+10 或类似的东西，我真的不明白这个符号。像 123456789.34567 这样的数字应该转换为 123456789 像 0.00000000123456789 这样的数字到 1.23456E+9 （789 不再适合屏幕，因此它们应该是简单的左边）

有这样的吗？还是我必须编写自己的函数，但这需要很多时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:32:41.410

您应该能够`DecimalFormat`根据您的要求使用该类来格式化数字。看看[这里](http://docs.oracle.com/javase/1.5.0/docs/api/java/text/DecimalFormat.html)的文档。

# javascript - 是否有用于设计可编译为 JavaScript 的语言的框架 - 或一般的语言设计？

> ID：13332466
> 
> 赞同：0
> 
> 时间：2012-11-11T15:18:21.493
> 
> 标签：javascript, parsing, coffeescript, language-design

我喜欢 CoffeeScript 的一些概念，但不同意其他概念。特别是我想要一个 lispier 语法。你建议我应该自己做。在不重新发明轮子的情况下设计一种可以编译为 JavaScript 的语言的最佳方法是什么？是否有为此设计的库/框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:21:19.160

我推荐微软的 TypeScript。它是 JavaScript 的超集。看看[http://www.typescriptlang.org/Playground](http://www.typescriptlang.org/Playground)

TypeScript 是开源的，所以基本上你可以了解大部分内容是如何完成的并更改源代码。

# vb.net - 按名称调用外部用户控件

> ID：13332470
> 
> 赞同：0
> 
> 时间：2012-11-11T15:18:32.350
> 
> 标签：vb.net, winforms, user-controls, panel

我有一个面板 ( `Panel1`)、两个组合框 ( `ComboBox1`, `ComboBox2`) 和一个按钮 ( `Button1`)，所有这些都采用相同的形式 ( `Form1`)。

单击按钮时：

```
Private Sub Button1_Click(sender As Object, e As EventArgs)
   Dim a as String = ComboBox1.SelectedValue() & Combobox2.SelectedValue()
   AddUserControl(a)
End Sub 
```

的值`a`是外部用户控件的名称，例如`p1k1`。我可以使用以下方法添加一个名为`p1k1`to`Panel1`的外部用户控件吗？`Form1`

```
Private Sub AddUserControl(ByVal a As String)
    Panel1.Controls.Add(a)
End Sub 
```

我应该怎么做才能完成这项工作？

通常我会使用：

```
Panel1.Controls.Add(new p1k1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:51:50.603

您需要使用[反射](http://msdn.microsoft.com/en-us/library/f7ykdhsy.aspx)来执行此操作。像这样的东西：

```
 Private Sub AddUserControl(ByVal a As String)
        Dim controlType As Type = Type.GetType(a)
        If controlType Is Nothing Then
            Throw New ArgumentException(String.Format("""{0}"" is not a valid type.  Type names are case sensitive.", a))
        ElseIf Not controlType.IsSubclassOf(GetType(Control)) Then
            Throw New ArgumentException(String.Format("""{0}"" does not inherit from Control.  Only Controls can be added to the control collection.", a))
        End If

        Dim newControl As Control = Activator.CreateInstance(controlType)
        If newControl Is Nothing Then
            Throw New ArgumentException(String.Format("Unspecified error when creating control of type ""{0}"".", a))
        End If
        Panel1.Controls.Add(newControl)
    End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:46:53.610

我终于找到了答案……

> Private Sub AddUserControl(ByVal a As String)
> Dim nmspace As String = "mynamespace"
> Dim t As Type = Assembly.GetExecutingAssembly().GetType(nmspace & "." & a)
> Dim o As Control = Activator.CreateInstance(t)
> Panel1 .Controls.Add(o)
> End Sub

# datatable - 如何从 PagedDataSource 获取分页数据表？

> ID：13332471
> 
> 赞同：0
> 
> 时间：2012-11-11T15:18:34.317
> 
> 标签：datatable, pagination, dataset, datasource, datarow

我这里有一个情况，我正在使用**PagedDataSource**将分页绑定到我的**日历（一些第 3 方控件）**

在这里它工作正常。但问题是我需要分页数据；将其分配给控制后。比如说：

```
DataSet ds = DbGetEvents(DayPilotCalendar1.StartDate, DayPilotCalendar1.Days);
var pds = new PagedDataSource
{DataSource = ds.Tables[0].DefaultView, AllowPaging = true, CurrentPageIndex = _position, PageSize = 2};
Calender.DataSource=pds; 
```

在此之后，我需要一个 Paged DataTable 。

```
DataTable dt= /* here I need to access Paged DataTable from **paged** */ 
```

这个怎么做？可能吗？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:08:22.467

```
DataView dView = (DataView)pagedDataSource.DataSource;
DataTable dTable;
dView.Sort = ordenarPor;
dTable = (DataTable)dView.Table;
pds.DataSource = dTable.DefaultView; 
```

# google-maps - 过滤器下拉菜单

> ID：13332474
> 
> 赞同：1
> 
> 时间：2012-11-11T15:18:44.377
> 
> 标签：google-maps, google-maps-markers

当谈到谷歌地图和它周围的所有技术时，我是一个新手，我试图一次学习一件事。

我已经设法从[这个例子](https://developers.google.com/maps/articles/phpsqlajax_v3)中创建了我的谷歌地图，我在数据库中填充了我大学系校友的信息，我想要有过滤器，当一个人选择一年时，它只会显示在给定年份毕业的校友，或者只说女性或男性，也按课程过​​滤。

我正在尝试创建类似于可视化工具的东西，用于根据标准显示美国校友的分布情况。

在我的数据库中，我存储姓名、地址、自动地理编码地址并存储纬度和经度、专业、毕业年份等等。我想不出一种方法来下拉或说出用于过滤标记的复选框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:54:58.680

好吧，要使用 gmap，您必须执行繁重的 javascript。我是这样做的：当我渲染页面（php）时，我用值填充了 javascript 数组。然后，我将侦听器添加到下拉列表中。当值改变时，我评估选定的值与我的 JS 数组，然后我将坐标从我的数组发送到谷歌地图显示标记函数；此外，我有一个哈希图，我在其中存储我的标记（地图上显示的那个），所以当我更改下拉列表时，我会检查我的哈希图并从地图中删除我的标记。我希望这是有道理的。此外，我建议您在每次需要从数据库获取数据时开始使用 json 动态填充数组。我建议你问一些简短的问题，并提供一些我们可以解决的代码。

# c# - 保存所有浏览器 url 历史记录

> ID：13332476
> 
> 赞同：0
> 
> 时间：2012-11-11T15:19:00.520
> 
> 标签：c#, .net, winforms, logging, browser

我需要编写一个日志系统来保存使用安装在 Windows 上的所有浏览器制作的所有域名和访问时间（如果也可能是关闭时间）。

例如： [http](http://stackoverflow.com) : //stackoverflow.com 14:45 - 16:55

我在谷歌上找不到任何实施信息，请转发我或解释要走的路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:26:45.000

你所要求的高度依赖于所使用的浏览器/浏览器版本（也可能是 Windows 版本）......

由于您没有描述目标是什么，因此很难提出具体的解决方案/选项......

一个与浏览器无关的选项是实现代理并配置系统/浏览器以使用该代理......然后代理将进行日志记录。但这很容易通过更改浏览器中的代理配置来规避......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T15:30:39.823

看看您是否可以读取每个浏览器的历史文件并从那里解析详细信息。

铬合金：

在 xp = C:\Documents and Settings\USER\Local Settings\Application Data\Google\Chrome\User Data\Default\ in vista = C:\users\USER\Local Settings\Application Data\Google\Chrome\User Data\默认\

火狐：C:\Documents and Settings\owner\Local Settings\History

IE: C:\Documents and Settings\YOURUSERNAME\Local Settings\History

我从来没有尝试过，不知道历史记录是否被加密存储，以及存储的详细信息级别（打开时间、关闭时间等）。

# ruby-on-rails - 在 OpenShift 中运行的 Redmine 中安装插件

> ID：13332480
> 
> 赞同：2
> 
> 时间：2012-11-11T15:19:28.290
> 
> 标签：ruby-on-rails, ruby, redmine, redmine-plugins, openshift

我在 OpenShift 中运行 Redmine 2.0.3。这是一个 Ruby 1.9 墨盒，安装了`https://github.com/ramr/redmine-2.0-openshift-quickstart`. 我正在尝试安装 redmine_charts2 ( `https://github.com/pharmazone/redmine_charts2`)。我已按照说明进行操作，请记住它是 Rails 3 和 Redmine 2。例如，插件必须位于`plugins`文件夹中，而不是`vendor/plugins`.

当我去`administration --> information`一切似乎都很好，但它说 `Redmine plugins: no plugin installed` </p>

错误日志不显示错误消息。

我尝试将插件移动到`vendor/plugins`它显然失败了。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:44:48.970

您必须在 plugins/ 中创建一个 git 子模块并添加 post_deploy 钩子： bundle exec rake redmine:plugins:migrate RAILS_ENV=production

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T12:01:38.290

@rclsilver 实际上解决了我的问题。详情如下：

```
$ git submodule add https://github.com/pharmazone/redmine_charts2 plugins/redmine_charts2
vim .openshift/action_hooks/post_deploy
git rm --cached plugins/redmine_charts2
git submodule update --init 
```

# javascript - jquery选择选项

> ID：13332484
> 
> 赞同：0
> 
> 时间：2012-11-11T15:19:54.500
> 
> 标签：javascript, jquery

我有以下选项框：

```
<label for="inputselection1">Input #1:</label>
<select id="inputselection1" name="unittype">
<option value="1">Miner</option>
<option value="2">Puffer</option>
<option value="3">Snipey</option>
<option value="4">Max</option>
<option value="5">Firebot</option>
</select><br> 
```

但是，当我执行以下 jquery 选项 onload 时，文本（选定选项）不会更改为 Max：

```
$("#inputselection1 option[text=Max]").attr("selected","selected"); 
```

是什么赋予了？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:22:51.777

用于`.val()`按选项值设置选择值：

```
$("#inputselection1").val(4);​ 
```

如果您坚持按文本选择，请使用以下命令：

```
$("#inputselection1 option").filter(function() {
    return $(this).text() === 'Max';
}).attr("selected", "selected"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T15:24:17.450

如果要按选项文本选择，可以使用[`filter`](http://api.jquery.com/filter/)函数

```
$("#inputselection1 option").filter(function() {
    return $(this).text() === 'Max';
}).prop("selected", true); 
```

[**小提琴**](http://jsfiddle.net/8CBvZ/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T15:25:57.320

$("#inputselection1 option[value=4]").attr("selected","selected");

取自

[jQuery 设置选择索引](https://stackoverflow.com/questions/1280499/jquery-set-select-index)

# javascript - Facebook“喜欢”对话框出现并立即消失

> ID：13332485
> 
> 赞同：6
> 
> 时间：2012-11-11T15:19:56.143
> 
> 标签：javascript, html, facebook, facebook-like, facebook-likebox

很长一段时间以来，我一直对 Facebook Like 按钮有疑问。我已经到处寻找解决方案，但我很困惑。该错误发生在我的网站 www.MapYourVote.com 上。当您转到投票页面并单击“喜欢”时，对话框会出现并迅速消失。同时，计数器也变为 1 并迅速返回 0。

使用 Facebook 调试工具 (http://developers.facebook.com/tools/debug) 始终可以解决个别投票页面的问题。在 url 上使用它后，like 按钮将按预期工作。问题是我的网站是动态的，每次有人创建新投票时我都无法使用 Facebook 调试工具。Facebook 调试工具没有发现任何问题（除了 og 图像大小，但我怀疑这是问题所在）。

这是一个“赞”按钮不起作用的页面示例。如果您将此 URL 输入 Facebook 调试工具，Like 按钮将起作用。 [http://www.mapyourvote.com/Poll/Election-Result-Feelings/](http://www.mapyourvote.com/Poll/Election-Result-Feelings/)

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-18T13:48:21.480

我有同样的问题。它是由 data-href 属性中的 url 值引起的。我有指向我的本地主机的网址。当我将网址更改为现有网址时，问题就解决了。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:00:41.020

我也有这个问题。我正在构建一个引荐来源网址来给链接共享者一个信用，因此每个想要分享内容的用户都有一个不同的网址。推荐人链接会给用户信用并重定向到我网站的登录页面。使用此配置，点赞对话框会出现片刻然后又消失，除非我使用 facebook 的调试工具。

对我来说解决问题的是从重定向更改为直接从我的推荐链接呈现页面。事实上，我将推荐链接更改为`?r=refid`我的根页面 URL 上的参数。如果 facebook 不必遵循重定向来获取`og:`数据，它似乎可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-27T16:12:20.467

我遇到了类似的问题，结果发现我在浏览器中设置了过于严格的 cookie 政策——我只允许 Facebook 使用第一方 cookie。当我允许 Facebook 使用其他 cookie 时，问题就解决了。当除了立即弹出特写之外没有出现错误时，很难调试。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-16T20:45:58.540

对我来说，当“赞”按钮 URL 重定向到另一个 URL 时，问题（例如弹出窗口在一秒钟后消失）就发生了。

修复方法是添加 og:type、og:url 和 og:title（根据[https://developers.facebook.com/docs/reference/opengraph/object-type/website](https://developers.facebook.com/docs/reference/opengraph/object-type/website)需要），然后通过 Facebook 运行 URL调试器清除缓存（[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)）。

更多信息请访问[https://stackoverflow.com/a/16597060/2391566](https://stackoverflow.com/a/16597060/2391566)

# c# - 在 C# 中，将泛型类型转换为其基类的最佳方法是什么？

> ID：13332489
> 
> 赞同：0
> 
> 时间：2012-11-11T15:20:12.567
> 
> 标签：c#, generics, casting

我有以下对象：

```
public class ItemChange<T> where T : MyBase
{
public DateTime When { get; set; }
public string Who { get; set; }
public T NewState;
public T OldState;
} 
```

我正在尝试强制转换和实例，`ItemChange<T>`但`ItemChange<MyBase>`我得到了一个强制转换异常。

**无法转换类型的对象。. .**

WHat 是将泛型类型转换为其基类的正确方法（假设上面的 where 约束）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T15:35:28.770

您不能直接这样做，因为 C# 中的类不支持协变。但是，您可以使用接口来做到这一点：

```
public interface IItemChange<out T> where T : MyBase
{
    DateTime When { get; set; }
    string Who { get; set; }
    T NewState { get; }
    T OldState { get; }
}

public class ItemChange<T> : IItemChange<T> where T : MyBase
{
    public DateTime When { get; set; }
    public string Who { get; set; }
    public T NewState { get; set; }
    public T OldState { get; set; }
} 
```

然后你可以这样做：

```
IItemChange<MyBase> base = new ItemChange<MySubclass>(); 
```

对于. `MySubclass`_`MyBase`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:41:45.547

您需要定义一个显式转换运算符。

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace brosell
{

public class MyBase
{

}

public class ItemChange<T> where T : MyBase
{
    public DateTime When { get; set; }
    public string Who { get; set; }
    public T NewState;
    public T OldState;

    public static explicit operator ItemChange<MyBase>(ItemChange<T> i)
   {
      return new ItemChange<MyBase> { When = i.When, Who = i.Who, NewState = i.NewState, OldState = i.OldState};
   }

}

public class Sub1: MyBase
{

}

public class Sub2: MyBase
{

}

   public class HelloWorld
   {
    public static void Main(string[] args)
    {
        ItemChange<Sub1> item = new ItemChange<Sub1>();

        ItemChange<MyBase> itemCasted = (ItemChange<MyBase>)item;
        }
   } 
} 
```

# graphviz - Graphviz egde 加法难题

> ID：13332493
> 
> 赞同：2
> 
> 时间：2012-11-11T15:21:17.447
> 
> 标签：graphviz, dot, neato

我正在尝试使用 Graphviz 制作图像，以说明一些涉及向现有图形添加一些边的过程。基础图的顶点和边保持在原位是至关重要的。

我尝试使用 [constraint=false] 添加我的新边，但无论我添加多条边，都会不断获得基础和新图形的不同布局。我尝试过的另一种方法几乎没有显示它是为带有所有额外边缘的图形运行点，然后手动删除额外的线 - 仍然没有骰子。

我要绘制的图表是这样的：

```
graph G{
overlap=scale;
node [weight=.2,height=.1];
edge [len=2.1];
3--2 [constraint=false];
4--1 [constraint=false];
5--3 [constraint=false];
6--1 ;
6--2 ;
6--3 ;
6--4 ;
6--5 ;
7--1 ;
7--2 ;
7--3 ;
7--4 ;
7--5 ;
8--1 ;
8--2 ;
8--3 ;
8--4 ;
8--5 ;
} 

Any help will be greatly appreciated. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:29:28.790

除了 Graphviz，还有许多 GUI 图形分析工具可让您运行布局算法并手动定位事物。您可以固定节点位置，甚至颜色或更改添加边缘的宽度以使其突出。这些任务在[NodeXL](https://nodexl.codeplex.com/) (C#) 中是微不足道的，这是一个伟大的开源工具，将网络分析集成到 Excel 2007/2010 中（*免责声明：我是它的顾问*）。

这是您在[NodeXL](https://nodexl.codeplex.com/)中可视化的图表，以及另一张新边缘为红色的图像。 ![初始图表。](../Images/63b03e99e3a8b1f2bf40fca86e7ad1a6.png) ![添加了红色边的图形。](../Images/7354a0735e433cb6e10e0494bb8ca819.png)

要创建第二个图像，只需在 NodeXL 中打开“Edges”工作表，然后将数据粘贴到前三列中，如下所示：

```
3   2   red
4   1   red
5   3   red
6   1
6   2
6   3
6   4
6   5
7   1
7   2
7   3
7   4
7   5
8   1
8   2
8   3
8   4
8   5 
```

您可以在[此处下载](https://dl.dropbox.com/u/999969/perm/so_felix_goldberg.graphml)[graphml](http://graphml.graphdrawing.org/)文件，其中包括您的数据和可以导入 NodeXL 的节点坐标。

还有大量其他开源 GUI 工具可以可视化图形，例如[Gephi](https://gephi.org/) (Java) 和[Cytoscape](http://www.cytoscape.org/) (Java)，而[Pajek](http://vlado.fmf.uni-lj.si/pub/networks/pajek/)、[UCINet](https://sites.google.com/site/ucinetsoftware/home)、[yEd](http://www.yworks.com/en/products_yed_about.html)和[Tom Sawyer](http://www.tomsawyer.com/products/layout/index.php)是一些专有的替代品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T12:06:39.400

我认为您可以尝试：

```
3--2 [style="invis"];
4--1 [style="invis"];
5--3 [style="invis"]; 
```

进而 ：

```
3--2 [style="bold"];
4--1 [style="bold"];
5--3 [style="bold"]; 
```

展示 - 并强调 - 新的优势。

`invis`未显示但仍用于计算布局的节点和边。

# html - IE中的图像大小不正确

> ID：13332497
> 
> 赞同：0
> 
> 时间：2012-11-11T15:21:46.137
> 
> 标签：html, css, internet-explorer

我正在使用未排序列表来显示带有 a 标签的图像，以在每个图像上实现灯箱以查看更大版本的图像。在 Mozilla Firefox、Google chrome 和 Opera 上，图像以正确的大小显示，但在 Internet Explorer 中它们更小。

W3C Validator 报告 0 个错误，我声明了 Doctype。

这是网页的源代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Makeup Artist - Hair Stylist | Natalie Bennet</title>
<link rel="stylesheet" href="css/styles.css" type="text/css" media="screen" />
<link rel="stylesheet" type="text/css" href="css/jquery.lightbox-0.5.css" media="screen" />
</head>

<body>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="js/mouseoverscroll.js"></script>
<script type="text/javascript" src="js/jquery.lightbox-0.5.js" ></script>
<div id="border"></div>
<div id="hide"></div>
<div id="header" align="center">
<div id="logo" align="center">
<img src="images/makeup-artist-hair-stylist.jpg" alt="Natalie Bennett" />
</div>
</div>
<div class="footer-arrow previous" style="left:1%; position:fixed;">
<img src="images/left-arrow-out.png"
onmouseover="this.src='images/arrow-left-on.png'"
onmouseout="this.src='images/left-arrow-out.png'" alt="previous" /></div>
<div class="galleryWrapper">
<ul class="galleryItems" style="list-style-type:none;">
<li><a href="images/portfolio/big/Sofia_1.jpg"><img class="portfolio" src="images/portfolio/Sofia_1.jpg" alt="" /></a></li>
<li><a href="images/portfolio/big/Sofia_2.jpg"><img class="portfolio" src="images/portfolio/Sofia_2.jpg" alt="" /></a></li>
<li><a href="images/portfolio/big/Sofia_3.jpg"><img class="portfolio" src="images/portfolio/Sofia_3.jpg" alt="" /></a></li>
<li><a href="images/portfolio/big/Sofia_4a.jpg"><img class="portfolio" src="images/portfolio/Sofia_4a.jpg" alt="" /></a></li>
<li><a href="images/portfolio/big/Sofia_4b.jpg"><img class="portfolio" src="images/portfolio/Sofia_4b.jpg" alt="" /></a></li>
<li><a href="images/portfolio/big/Sofia_4.jpg"><img class="portfolio" src="images/portfolio/Sofia_4.jpg" alt="" /></a></li>
<li><a href="images/portfolio/big/Sofia_5.jpg"><img class="portfolio" src="images/portfolio/Sofia_5.jpg" alt="" /></a></li>
<li><a href="images/portfolio/big/Andro_1.jpg"><img class="portfolio" src="images/portfolio/Andro_1.jpg" alt="" /></a></li>
<li><a href="images/portfolio/big/Andro_2.jpg"><img class="portfolio" src="images/portfolio/Andro_2.jpg" alt="" /></a></li>
<li><a href="images/portfolio/big/Andro_3.jpg"><img class="portfolio" src="images/portfolio/Andro_3.jpg" alt="" /></a></li>
<li><a href="images/portfolio/big/Andro_4.jpg"><img class="portfolio" src="images/portfolio/Andro_4.jpg" alt="" /></a></li>
[...]
<li><a href="images/portfolio/big/T1.jpg"><img class="portfolio" src="images/portfolio/T1.jpg" alt="" /></a></li>
<li><a href="images/portfolio/big/T2.jpg"><img class="portfolio" src="images/portfolio/T2.jpg" alt="" /></a></li>
</ul>
</div>
<div class="footer-arrow next" style="left:96.5%; position:fixed;">
<img src="images/right-arrow-out.png"
onmouseover="this.src='images/arrow-right-on.png'"
onmouseout="this.src='images/right-arrow-out.png'" alt="next" /></div>
<div id="footer">
<div id="site-navigation" align="center">
<ul>
<li><a href="javascript:void(0)" class="active">Portfolio</a></li>
<li><a href="javascript:closeThenNavigate('about.php')">About</a></li>
<li><a href="javascript:closeThenNavigate('backstage.php')">Backstage</a></li>
<li><a href="javascript:closeThenNavigate('contact.php')">Contact</a></li>
</ul>
</div>
<div id="footer-menu">
</div>
<div id="copyright">
&copy; Natalie Bennett 2012
</div>
</div> 
<script type="text/javascript">
    $('.galleryItems a').lightBox({fixedNavigation:true});
openFooter();
var menuopen = false;
function openFooter(){
$('#footer').animate({
height: 40,
bottom:0
}, 750, 'linear');

}

function closeFooter(){
$('#footer').animate({
height: 20,
bottom:0
}, 750, 'linear');

$('#footer-button').css("backgroundPosition","center 0px");
}

var currentImage = 0;

function closeThenNavigate(url)
{
 $('#footer').animate({
 height: 20,
bottom:0
}, 750, 'linear', function() {
  window.location.href=url+"?i="+currentImage;
});
}
</script>
</body> 
</html> 
```

这是图像的CSS：

```
img {
    border:none;
}
ul{
    padding:0px;
}
.galleryWrapper{
    top:6%; 
    left:0px; 
    width:100%;
    height:100%; 
    display:inline-block;
    position: fixed;
    width:100%;
    overflow:hidden;

}
.galleryItems li {
    list-style-type: none;
    float:left;
}

.portfolio{   
    widht:80%;
    height:88%;
    margin: 6px;
    cursor:pointer;
    margin-bottom:250px;;
} 
```

你知道为什么它们在 IE 中更小吗？

编辑，忘记链接：[http ://www.zackdibe.com/final/](http://www.zackdibe.com/final/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:32:37.907

使用像素而不是宽度和高度大小的 % ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:37:52.683

确实使用像素而不是 % 或使用它。IE7/8 为地址栏使用了相当大的区域（例如 Chrome 或 FF 更大），因此可视区域更小，从中计算百分比。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T16:09:01.113

给元素一个`position:relative;`值`.portfolio`，然后尝试。

# javascript - OnMouseOver 和 OnMouseOut 在同一元素上仅使用 javascript 创建悬停效果？

> ID：13332499
> 
> 赞同：0
> 
> 时间：2012-11-11T15:21:59.523
> 
> 标签：javascript

我是 javascript 新手，为了练习，我正在使用 javascript 为具有特定类的表划分行。除此之外，我正在尝试仅使用 javascript 在表行上创建“悬停”效果。

我能够创建 onmouseover 效果，但是，我很难回到表格行的默认样式 onmouseout。

请记住，我知道这可以通过 css 或 JQuery 轻松实现；但是，为此，我只想坚持使用 javscript。

我尝试了什么：

```
 function alternate(){
        var tables = document.getElementsByTagName("table");     

        //apply the code to ALL tables on the page with a particular class
        for (var ti = 0; ti < tables.length; ++ti) {
            if (tables[ti].className == "striped"){ //stripe tables
                var rows = tables[ti].getElementsByTagName("tr");   
                for(i = 0; i < rows.length; i++){           
                    //change style of even rows to create striped effect
                    if(i % 2 == 0){ 
                        rows[i].className += "even"; //stripe even rows while maintaining default style to odd rows
                    }
                    rows[i].onmouseover = function() {
                        this.className="";
                        this.className="hovered";
                    }
                    rows[i].onmouseout = function() { 
                        if(i % 2 == 0){
                            this.className="even";
                        }else{
                            this.className="odd";
                        }                       
                    }
                }       
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:38:04.490

我不确定我是否完全理解你的问题，但我创建了一个 jsfiddle，它符合我的意思。

据我所知，问题是当 row[i].mouseout 被触发时， i 的值是表中的表行数。修复方法是，在鼠标悬停时保存原始类名，然后在鼠标输出时重新分配该类名。这是小提琴。[http://jsfiddle.net/LBaZu/4/](http://jsfiddle.net/LBaZu/4/)

```
function alternate() {
    var tables = document.getElementsByTagName("table");
    for (var ti = 0; ti < tables.length; ++ti) {
        if (tables[ti].className == "striped") {
            var rows = tables[ti].getElementsByTagName("tr");
            var cls; // Variable to save the className
            for (var i = 0; i < rows.length; i++) {
                if (i % 2 == 0) rows[i].className = "even";
                rows[i].onmouseover = function() {
                    cls = this.className;  // Assign the className here
                    this.className = "hovered";
                }
                rows[i].onmouseout = function() {
                    this.className = (cls == 'even') ? cls : 'odd';
                }
            }
        }
    }
} 
```

编辑：我重新阅读了您的问题，我想到您只想在鼠标悬停时将奇数表行类名设置为奇数，而不是之前。

# node.js - 使用 nginx 收到 500 内部服务器错误？

> ID：13332501
> 
> 赞同：0
> 
> 时间：2012-11-11T15:22:11.610
> 
> 标签：node.js, nginx, amazon-ec2, amazon-web-services

我已经在我的 ubuntu ec2 实例上安装了 nginx，并且我正在使用 node.js 构建一个应用程序，当我去我的亚马逊网址时，即

```
http://elastic.ip.address 
```

它工作正常，所以它运行 / 文件：

```
app.get('/', function(req, res) {
    return res.render('home');
  }); 
```

但是，当我尝试去 `http://elastic.ip.address/page2:`

```
 app.get('/page2', function(req, res) {
    return res.render('page2');

  }); 
```

我收到 500 内部服务器错误，所以我真的不知道发生了什么，这适用于我的 localhost 而不运行 nginx，但不适用于我的 ec2。

这是我的 nginx 配置文件布局：

```
server {
        listen   80;

        root /home/ubuntu/project/;

        server_name  static_ip.compute-1.amazonaws.com;

        location / {
                # First attempt to serve request as file, then
                # as directory, then fall back to index.html
                try_files $uri $uri/ /index.html;
                # Uncomment to enable naxsi on this location
                # include /etc/nginx/naxsi.rules
                proxy_pass      http://127.0.0.1:8124/;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:39:47.450

有几件事可以尝试：

*   看看`/var/log/nginx/error.log`你是否能得到一些关于出了什么问题的更好的信息。

*   确保运行 nginx 的用户具有对`/home/ubuntu/project/`.

# css - 如何将新的可见高度强制为 div 并使用滚动条功能显示其余部分？

> ID：13332505
> 
> 赞同：0
> 
> 时间：2012-11-11T15:22:26.823
> 
> 标签：css, html, overflow

我有一个`<div id='x' />`高度为 300 像素的

在里面我想放一个`<div id='y' />`600px 的高度

现在，当我这样做时，Y div 出现在它的全高度，我希望它出现在 300 像素（高度）并添加 Y 轴滚动条功能以便其余部分出现

我正在添加`overflow-y:visible`到我的 Y div 但我没有得到我想要的结果，没有任何变化

我对 Web 开发相当陌生，当涉及到嵌套 div 和强制高度、添加滚动条等时，我感到很困惑

在这种特定情况下，我究竟如何才能实现我想要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:25:12.850

尝试溢出：自动；在 id 为 x 的 div 上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T15:26:57.073

如果要隐藏溢出，请执行此操作

```
#x {overflow: auto}; 
```

如果你想在里面做一个滚动条，请这样做

```
#x {overflow: scroll}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T15:30:54.430

它不会像你想象的那样工作。如果您在此处使用其他答案，您将获得两个滚动条，一个用于 x，一个用于 y。如果将 x 设置为溢出：隐藏，x 保持正确大小，但 y 的滚动条超出 x 的底部。

您想要做的是将两个 div 设置为相同的大小（或 y 小于 x）并让溢出来完成工作。如果它无论如何都要滚动，那么将 y 变大是没有意义的。

```
#x{max-height:100px;height:100px;overflow:hidden;}
#y{height:100px;overflow-y:scroll;}​ 
```

演示：http: [//jsfiddle.net/calder12/V9THr/1/](http://jsfiddle.net/calder12/V9THr/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T16:03:26.710

这很简单。您只需`overflow:scroll;`将 Y 轴滚动条应用于容器即可。检查这个小提琴 [http://jsfiddle.net/DeepakKamat/vBFJG/3/](http://jsfiddle.net/DeepakKamat/vBFJG/3/)

如果你想让一个元素溢出 #y 元素，那么添加`overflow:visible;`到 #y将无济于事。`<div>`

# youtube-api - Youtube Data API-调试认证错误

> ID：13332507
> 
> 赞同：0
> 
> 时间：2012-11-11T15:22:34.327
> 
> 标签：youtube-api

尝试获取上传授权令牌时出现身份验证错误 [https://developers.google.com/youtube/2.0/developers_guide_protocol_error_responses](https://developers.google.com/youtube/2.0/developers_guide_protocol_error_responses)

使用数据包嗅探器，我的第一条错误消息是>

```
401 Token invalid - Invalid token: Cannot parse AuthSub token: 
```

除了可能格式不正确的 Auth 键值之外，我想知道我应该为我的上传身份验证请求包含哪些标头。

我正在使用以下内容，尽管认为 clientId 已被弃用

```
 "Authorization", "GoogleLogin auth=\"" + authToken + "\""
"X-GData-Client", clientId
"X-GData-Key", "key=" + devKey 
```

* * *

改变后

```
"Authorization", "AuthSub token="+authToken 
```

到

```
Authorization", "GoogleLogin auth="+authToken 
```

在我的请求中，我不再收到“无法解析 AuthSub 令牌”错误消息，但是

我仍然得到

```
Error #2032: Stream Error. URL: http://gdata.youtube.com/action/GetUploadToken

<errors>
<error>
    <domain>yt:authentication</domain>
    <code>Unknown</code>
</error>
</errors> 
```

难住了。非常感谢任何反馈，因为我现在什至不确定我的错误存在于哪里！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T17:07:19.923

可以工作，但不确定如何:)

我在对
“http://gdata.youtube.com/action/GetUploadToken”的POST 请求中使用这两个标头

```
"Authorization",  "GoogleLogin auth="+authToken
"X-GData-Key", "key=" + devKey 
```

并且还需要将我的 youtube 用户开发人员凭据与频道相关联

[https://groups.google.com/forum/#!msg/youtube-api-gdata/76x8vaADJWM/36O05FD7mC0J](https://groups.google.com/forum/#!msg/youtube-api-gdata/76x8vaADJWM/36O05FD7mC0J)

数据包嗅探器或至少添加对读取 XMl 错误响应的支持是必不可少的！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-08T17:42:08.903

我通过提供正确的开发者密钥解决了这个问题

# php - 修改模式以允许“+”或“-”出现在短语的前面

> ID：13332508
> 
> 赞同：1
> 
> 时间：2012-11-11T15:22:39.413
> 
> 标签：php, preg-match, preg-match-all

我有一个工作模式

```
/[^\s"']+|"([^"]*)"|'([^']*)'|/ 
```

将由空格分隔的单个单词或短语（双引号或单引号）拆分为匹配数组。我想修改模式以允许“+”符号或“-”符号出现在单词/短语的开头，因此 preg_match_all 不会将 + 或 - 拆分为单独的匹配项，即：

```
guide -"test * of" +'guide' 
```

我希望它分成以下比赛

```
[0] => Array
    (
        [0] => guide
        [1] => -"test * of"
        [2] => +'guide'
    ) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:35:19.980

尝试以下模式： `/[+-]?([^\s"']+|"([^"]*)"|'([^']*)')/`

# java - Java NIO 线程 selector.select() Nullpointer

> ID：13332511
> 
> 赞同：0
> 
> 时间：2012-11-11T15:23:03.323
> 
> 标签：java, multithreading, sockets, nio

我正在尝试在自己的线程中实现 Java NIO 服务器。

```
public class MyServer extends MyThread
{
   ServerSocketChannel server;
   Selector selector;

   public MyServer
   {
      super();
      this.server = ServerSocketChannel.open();
      this.server.configureBlocking(false);
      this.server.socket().bind(new java.net.InetSocketAddress(InetAddress.getLocalHost(), 6666));
      this.selector = Selector.open();
      this.server.register(selector,SelectionKey.OP_ACCEPT);
   }
   public void run()
   {
      while(true)
      {
          this.selector.select();
          Set<SelectionKey> keys = selector.selectedKeys();
          Iterator<SelectionKey> i = keys.iterator();
          // Do channel work there
      }
   }
} 
```

问题是我在 this.selector.select(); 上得到了 NullpointerException 在我的运行方法中。你能帮我吗？我没有看到这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:56:47.980

问题是我的线程的构造函数在服务器构造函数完成之前运行线程。

因此，选择器上有一个 Nullpointer。

# sql-server - 无法使用 Entity Framework 5.0 在远程服务器上创建数据库

> ID：13332520
> 
> 赞同：2
> 
> 时间：2012-11-11T15:24:01.050
> 
> 标签：sql-server, entity-framework

我首先使用 Entity Framework 5.0 代码来创建我的数据库。这个框架工作正常，并在我的本地 mysql 实例上创建了一个数据库。但是，如果我尝试指向远程服务器上的 sql 服务器，那么我会发现很多困难。我已经更改了连接字符串，并且还在 DBContext 构造函数 (DBRisk) 中使用了下面的代码，以便我指向我的远程数据库。

```
 public RiskDB()
 {
     this.Database.Connection.ConnectionString = 
         "Data Source=Data Source=217.111.222.194;Initial Catalogue=RiskDB;User ID=xxx;Password=yyy";
 } 
```

我已遵循有关 stackoverflow 的建议，但没有解决方案

这是错误 - 它似乎表明它针对的是 sql ce 数据库。我不知道如何解决这个问题并迁移到正确的远程数据库，因为连接字符串配置正确。数据库的权限可以创建数据库

**错误**

**检查上下文是否针对现有数据库...**

> System.Reflection.TargetInvocationException：调用的目标已引发异常。---> System.ArgumentException：不支持关键字：“初始目录”。在 System.Data.Common.DbConnectionOptions.ParseInternal(Hashtable parsetable, String connectionString, Boolean buildChain, Hashtable synonyms, Boolean firstKey) 调用的目标已引发异常。

当为 SQL Server 配置连接字符串并且为 SQLCE 配置迁移器提供程序时，会发生此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:49:15.727

尝试替换`"Data Source=Data Source=217.111.222.194;`为`"Data Source=217.111.222.194;`

根据[http://www.connectionstrings.com/sql-server-2012](http://www.connectionstrings.com/sql-server-2012)，连接字符串可能是：

对于标准安全：
`Server=myServerAddress;Database=myDataBase;User Id=myUsername;Password=myPassword;`

对于来自 CE 设备的可信连接：
`Data Source=myServerAddress;Initial Catalog=myDataBase;Integrated Security=SSPI; User ID=myDomain\myUsername;Password=myPassword;`

# python - python中使用日期时间的时区转换不正确

> ID：13332523
> 
> 赞同：3
> 
> 时间：2012-11-11T15:24:33.523
> 
> 标签：python, datetime, pytz

> **可能重复：**
> [Python 日期时间对象显示错误的时区偏移](https://stackoverflow.com/questions/6410971/python-datetime-object-show-wrong-timezone-offset)

`pytz`使用库（最新版本 2012h）在 Python 中的时区之间转换时遇到问题。在布鲁塞尔，我们通常在冬天有 UTC+1 小时，在夏天有 UTC+2 小时。

我有以下代码：

```
from datetime import datetime

import pytz

brussels_tz = pytz.timezone('Europe/Brussels')
utc_tz = pytz.utc

def main():
    intermdate = datetime(2012, 07, 15, 8, 0, 0, 0, brussels_tz)
    utcdate = intermdate.astimezone(utc_tz)
    print "Brussels time is %s" % intermdate
    print "UTC time is %s" % utcdate

if __name__ == '__main__':
    main() 
```

问题是我得到以下结果：

```
Brussels time is 2012-07-15 08:00:00+00:00
UTC time is 2012-07-15 08:00:00+00:00 
```

所以没有区别。在我看来，结果应该是（在夏天）：

```
Brussels time is 2012-07-15 08:00:00+02:00
UTC time is 2012-07-15 06:00:00+00:00 
```

如果我使用欧洲/巴黎时区（通常与布鲁塞尔的时间相同），我会得到更奇怪的结果：

```
Paris time is 2012-07-15 08:00:00+00:09
UTC time is 2012-07-15 07:51:00+00:00 
```

相差9分钟！？！

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T15:30:41.060

您需要使用该[`.localize()`方法](http://pytz.sourceforge.net/#localized-times-and-date-arithmetic)将日期时间移动到时区：

```
intermdate = brussels_tz.localize(datetime(2012, 07, 15, 8, 0, 0, 0))
utcdate = intermdate.astimezone(utc_tz) 
```

那么输出是：

```
Brussels time is 2012-07-15 08:00:00+02:00
UTC time is 2012-07-15 06:00:00+00:00 
```

请参阅[`pytz`文档](http://pytz.sourceforge.net/#localized-times-and-date-arithmetic)：

> 不幸的是，对于许多时区，使用标准日期时间构造函数的 tzinfo 参数对 pytz “不起作用”。
> 
> ```
> >>> datetime(2002, 10, 27, 12, 0, 0, tzinfo=amsterdam).strftime(fmt)
> '2002-10-27 12:00:00 AMT+0020' 
> ```

# c# - 如何在 DataGrid 单元格中显示 List<> 项目？

> ID：13332527
> 
> 赞同：0
> 
> 时间：2012-11-11T15:24:55.773
> 
> 标签：c#, wpf, entity-framework, datagrid

我有一个`DataGrid`自动生成的列。这`ItemsSource`是 LINQ to Entity 查询 EF 上下文的结果。其中一列包含实体列表。如何让它显示实体实例的名称？

加载的函数`DataGrid`：

```
 private void DataGridRecipientsLoad()
    {
        List<Recipient> recipients = _recipientService.GetAllRecipients();
        dataGridRecipients.ItemsSource = from rec in recipients select rec;
        if (recipients.Count() == 0) return;
        dataGridRecipients.Columns[7].Visibility = System.Windows.Visibility.Collapsed;
        dataGridRecipients.Columns[8].Visibility = System.Windows.Visibility.Collapsed;
    } 
```

`Recipient`定义：

```
[EdmEntityTypeAttribute(NamespaceName="NewsletterModel", Name="Recipient")]
    [Serializable()]
    [DataContractAttribute(IsReference=true)]
    public partial class Recipient : EntityObject
    {
    #region Factory Method

    /// <summary>
    /// Create a new Recipient object.
    /// </summary>
    /// <param name="recipientID">Initial value of the RecipientID property.</param>
    /// <param name="firstName">Initial value of the FirstName property.</param>
    /// <param name="email">Initial value of the Email property.</param>
    public static Recipient CreateRecipient(global::System.Int32 recipientID, global::System.String firstName, global::System.String email)
    {
        Recipient recipient = new Recipient();
        recipient.RecipientID = recipientID;
        recipient.FirstName = firstName;
        recipient.Email = email;
        return recipient;
    }

    #endregion

    #region Primitive Properties

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=true, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.Int32 RecipientID
    {
        get
        {
            return _RecipientID;
        }
        set
        {
            if (_RecipientID != value)
            {
                OnRecipientIDChanging(value);
                ReportPropertyChanging("RecipientID");
                _RecipientID = StructuralObject.SetValidValue(value);
                ReportPropertyChanged("RecipientID");
                OnRecipientIDChanged();
            }
        }
    }
    private global::System.Int32 _RecipientID;
    partial void OnRecipientIDChanging(global::System.Int32 value);
    partial void OnRecipientIDChanged();

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.String FirstName
    {
        get
        {
            return _FirstName;
        }
        set
        {
            OnFirstNameChanging(value);
            ReportPropertyChanging("FirstName");
            _FirstName = StructuralObject.SetValidValue(value, false);
            ReportPropertyChanged("FirstName");
            OnFirstNameChanged();
        }
    }
    private global::System.String _FirstName;
    partial void OnFirstNameChanging(global::System.String value);
    partial void OnFirstNameChanged();

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
    [DataMemberAttribute()]
    public global::System.String LastName
    {
        get
        {
            return _LastName;
        }
        set
        {
            OnLastNameChanging(value);
            ReportPropertyChanging("LastName");
            _LastName = StructuralObject.SetValidValue(value, true);
            ReportPropertyChanged("LastName");
            OnLastNameChanged();
        }
    }
    private global::System.String _LastName;
    partial void OnLastNameChanging(global::System.String value);
    partial void OnLastNameChanged();

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
    [DataMemberAttribute()]
    public global::System.String City
    {
        get
        {
            return _City;
        }
        set
        {
            OnCityChanging(value);
            ReportPropertyChanging("City");
            _City = StructuralObject.SetValidValue(value, true);
            ReportPropertyChanged("City");
            OnCityChanged();
        }
    }
    private global::System.String _City;
    partial void OnCityChanging(global::System.String value);
    partial void OnCityChanged();

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.String Email
    {
        get
        {
            return _Email;
        }
        set
        {
            OnEmailChanging(value);
            ReportPropertyChanging("Email");
            _Email = StructuralObject.SetValidValue(value, false);
            ReportPropertyChanged("Email");
            OnEmailChanged();
        }
    }
    private global::System.String _Email;
    partial void OnEmailChanging(global::System.String value);
    partial void OnEmailChanged();

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=true)]
    [DataMemberAttribute()]
    public global::System.String Phone
    {
        get
        {
            return _Phone;
        }
        set
        {
            OnPhoneChanging(value);
            ReportPropertyChanging("Phone");
            _Phone = StructuralObject.SetValidValue(value, true);
            ReportPropertyChanged("Phone");
            OnPhoneChanged();
        }
    }
    private global::System.String _Phone;
    partial void OnPhoneChanging(global::System.String value);
    partial void OnPhoneChanged();

    #endregion

    #region Navigation Properties

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [XmlIgnoreAttribute()]
    [SoapIgnoreAttribute()]
    [DataMemberAttribute()]
    [EdmRelationshipNavigationPropertyAttribute("NewsletterModel", "RecipientMailingList", "MailingList")]
    public EntityCollection<MailingList> MailingList
    {
        get
        {
            return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedCollection<MailingList>("NewsletterModel.RecipientMailingList", "MailingList");
        }
        set
        {
            if ((value != null))
            {
                ((IEntityWithRelationships)this).RelationshipManager.InitializeRelatedCollection<MailingList>("NewsletterModel.RecipientMailingList", "MailingList", value);
            }
        }
    }

    #endregion

} 
```

我想显示`MailingLists`每个`Recipient`人所属的所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:18:01.287

创建一个包含您的 Recipient 对象的 ViewModel。

为实现 INotifyPropertyChanged 的​​收件人对象创建一个属性。

为您的 MailingList 添加另一个属性。让收件人属性也通知您的 MailingList 的属性已更改。

```
public Recipient Recipient
{
    get { return _Recipient; }
    set
    {
        _Recipient = value;
        NotifyPropertyChanged("Recipient");
        NotifyPropertyChanged("MailingList");
    }
} private Recipient _Recipient

public EntityCollection<MailingList> MailingList
{
    get { return _MailingList; }
    set
    {
        _MailingList= value;
        NotifyPropertyChanged("MailingList");
    }
} private EntityCollection<MailingList> _MailingList 
```

然后在您的视图中，我假设您有某种方式来选择人或收件人，当您选择他们时，收件人会改变。然后应该存在另一个视图来显示邮件列表。然后将 DataGrid 的 ItemsSource 绑定到 MailingList 属性。

我假设 EntityCollection 是 IList 或 IEnumerable，否则，您可能必须将其转换为 List 或 ObservableCollection 之类的东西。如果需要，请创建 MailingListViewModel 并在必要时创建您的 List 或 ObservableCollection。

另外，我假设 MailingList 具有自动生成列可以使用的名称的属性，否则您需要构建列而不是自动生成它们。

# javascript - 如何让我的脚本以两位小数显示计算

> ID：13332530
> 
> 赞同：2
> 
> 时间：2012-11-11T15:25:21.943
> 
> 标签：javascript

我很难弄清楚如何将我的计算显示到小数点后 0.00 位。它总是向下/向上舍入。

这是代码：

```
$(function() {
    var $priceHolder = $('#creditsPrice');
    if ($priceHolder.size() === 1) {
        $('#creditsNeeded').keyup(function(e) {
            var $this = $(this),
                url = $this.attr('rel'),
                credits = parseInt($this.val(), 10);

            if (credits <= 0) {
                if ($priceHolder.is(':visible')) {
                    $priceHolder.hide();
                }
                $priceHolder.hide();
                return;
            }

            if (!$priceHolder.is(':visible')) {
                $priceHolder.show();
            }

            url += '/' + credits;

            $.ajax({
                method: 'get',
                url: url,
                dataType: 'json',
                success: function(data) {
                    $('#js-price', $priceHolder).text(data);
                }
            });
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:29:18.167

If you are referring to the `credits` variable, it is because you are using `parseInt` which does exactly what it sounds like... parses your number into an int. Instead you can use `credits.toFixed(2)` which will return a value rounded to the closest hundredth.

# css - 为什么我看不到 twitter bootstrap navbar 的框阴影？

> ID：13332536
> 
> 赞同：2
> 
> 时间：2012-11-11T15:26:04.690
> 
> 标签：css, twitter-bootstrap

在[Twitter Bootstrap](http://twitter.github.com/bootstrap/components.html#navbar)的 2.0.4 版本中，我在导航栏上添加了一个盒子阴影，效果很好。（见下图）

![在此处输入图像描述](../Images/dace50e463c3a16d3b6b690b4e1342d4.png)

我最近升级到版本 2.2.1 并尝试做同样的事情，但我看不到导航栏下方的框阴影。这是我现在的风格：

```
.navbar {
overflow: visible;
margin-bottom: 18px;
color: #fff;
*position: relative;
*z-index: 2;
}

.navbar-inner {

min-height: 40px;
padding-left: 20px;
padding-right: 20px;
background-color: #fafafa;

background-color: #fafafa;
background-image: -moz-linear-gradient(top, #4e8ece, #356aa0);
background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#4e8ece), to(#356aa0));
background-image: -webkit-linear-gradient(top, #4e8ece, #356aa0);
background-image: -o-linear-gradient(top, #4e8ece, #356aa0);
background-image: linear-gradient(to bottom, #4e8ece, #356aa0);
background-repeat: repeat-x;
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#333333', endColorstr='#222222',GradientType=0 );

-webkit-border-radius: 4px;
-moz-border-radius: 4px;
border-radius: 4px;

-webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.065);
-moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.065);
box-shadow: 0 1px 3px rgba(0, 0, 0, 0.065);
*zoom: 1;

} 
```

有什么想法为什么在 2.2.1 中没有出现阴影？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:36:35.057

在报告的[错误](https://github.com/twitter/bootstrap/issues/4976)中，可能的解决方案是：

```
.box-shadow(@shadow1, @shadow2) {
  -webkit-box-shadow: @shadow1, @shadow2;
     -moz-box-shadow: @shadow1, @shadow2;
          box-shadow: @shadow1, @shadow2;
}
.box-shadow(@shadow1, @shadow2, @shadow3) {
  -webkit-box-shadow: @shadow1, @shadow2, @shadow3;
     -moz-box-shadow: @shadow1, @shadow2, @shadow3;
          box-shadow: @shadow1, @shadow2, @shadow3;
} 
```

[最新版本](https://github.com/twitter/bootstrap/blob/master/less/mixins.less)2.1.2-WIP 有这个代码：

```
// Drop shadows
.box-shadow(@shadow) {
  -webkit-box-shadow: @shadow;
     -moz-box-shadow: @shadow;
          box-shadow: @shadow;
} 
```

# sql - 插入查询的问题

> ID：13332539
> 
> 赞同：0
> 
> 时间：2012-11-11T15:26:13.363
> 
> 标签：sql

我有带有字段的表 TClientsPayment

```
idcontract,idclient,last_paid_time,paid,left_to_pay 
```

我需要将此表中的数据插入到另一个带有字段的表 TClientsPaymentsHistory

```
idcontract,idclient,last_paid_time,paid,late 
```

`late`字段在哪里`bit`。`late`可以是 0 或 1。这取决于客户是否在 25.xx.xxxx 之前付款。如果不是`late`= 1。

如果我查询

```
insert into TClientPaymentHistory
select idcontract,
       idclient,
       last_paid_time,
       paid
from TClientsPayments 
```

那么如何`late`在这个插入查询中设置字段呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:31:27.077

Use the `CASE` expression in the `SELECT` clause, here is a pseudo code of how you can do this:

```
insert into TClientPaymentHistory
select idcontract,
       idclient,
       last_paid_time,
       paid,
       CASE 
         WHEN DATEDIFF(day, last_paid_time, 'tell date here') <= something THEN 0
         ELSE 1
       END AS late     
from TClientsPayments 
```

Since you didn't specify what RDBMS you are using, you will need to determine the correct way to get the date difference depending on the SQL dialect you are using.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T15:31:44.710

Something like this, although you'll need to be clearer about the condition:

```
Insert into TClientPaymentHistory (
  idcontract, idclient, last_paid_time, paid, late
)
Select
   idcontract,
   idclient,
   last_paid_time,
   paid,
   Case When last_paid_time < 25.xx.xxxx then 0 else 1 end
From
  TclientPayments 
```

# xcode - 如何在没有 xcodeproj 的 xcode 中复制 openframeworks 示例

> ID：13332545
> 
> 赞同：1
> 
> 时间：2012-11-11T15:26:57.220
> 
> 标签：xcode, openframeworks

我正在尝试从示例>插件目录中复制openframeworks中的xmlSettings示例以进行一些测试，但其中没有.xcodeproj文件，因此我不确定如何在xcode中制作一个工作示例。我已经使用项目生成器生成空项目，并且我已经复制了包含 xcodeproj 文件的项目，但是我从来没有处理过这种情况，而且我没有任何运气在网上找到教程。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:22:31.283

即使没有 xcode 项目，您也应该能够像这样使用 ofxmlSettings 插件：

1.  右键单击 oF 项目的 addons 文件夹，选择**Add > Existing Files...**并选择 oF/addons 文件夹中包含的 ofxmlSettings 文件夹
2.  在 testApp.h 文件中包含头文件`#include "ofxXmlSettings.h"`
3.  使用插件：

在 testApp.h 中声明一个实例：`ofxXmlSettings xml;` 并使用 in`setup()`加载/保存一个 xml 文件：

```
xml.clear();
xml.addTag("root");
xml.pushTag("root", 0);
for(int i = 0 ; i < 10 ; i++){
    xml.addTag("child");
    xml.addAttribute("child", "id", (i+1), i);
}
xml.popTag();
xml.saveFile("test.xml"); 
```

另外，如果有帮助，我已经在[此处](http://lifesine.eu/so/xmlSettingsExample.zip)发布了示例 xcode 项目的压缩版本。请注意，我在较旧的 os(10.6.8) 上使用的是较旧版本的 Xcode(3.2.6)，因此不是 100% 它适用于您的配置。

# c# - 使用 LINQ 解析 C# 的 XML

> ID：13332548
> 
> 赞同：0
> 
> 时间：2012-11-11T15:27:08.863
> 
> 标签：c#, xml, linq

您如何使用 LINQ 解析这种 XML 文件？

```
<houses>
  <house nbr="146" city="Linköping" owner="john"/>
  <house nbr="134" city="Norrköping" owner="wayne"/>
  <house nbr="146" city="Köping" owner="steffe"/>
</houses> 
```

我能找到的所有例子都只描述了当每个元素都有一个值时如何解析。

如果是这种情况，我会这样做：

```
var houses = from house in xmlDoc.Descendants("house")
            select new RowData
            {
                number = spec.Element("nbr").Value,
                city = spec.Element("city").Value,
                owner = spec.Element("owner").Value,
            };
return houses ; 
```

但是这个 xml 文件不是这样格式化的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:41:31.407

尝试这个：

```
var houses = from house in document.Descendants("house")
                select new RowData
                {
                    number = (int)house.Attribute("nbr"),
                    city = (string)house.Attribute("city"),
                    owner = (string)house.Attribute("owner")
                }; 
```

# c# - C#按另一个列表排序列表

> ID：13332549
> 
> 赞同：1
> 
> 时间：2012-11-11T15:27:14.243
> 
> 标签：c#, sorting

我现在有 2 个列表：

```
list<string> names;
list<int> numbers; 
```

我需要根据数字值对我的名字进行排序。我一直在搜索，大多数都使用 x.ID 之类的东西，但我真的不知道那个值是什么。所以那没有用。

有谁知道，该怎么做，或者可以在 ID 部分帮助我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T15:30:52.750

So i assume that the elements in both lists are related through the index.

```
names.Select((n, index) => new { Name = n, Index = index })
     .OrderBy(x => numbers.ElementAtOrDefault(x.Index))
     .Select(x => x.Name)
     .ToList(); 
```

But i would use another collection type like `Dictionary<int,string>` instead if both lists are related insomuch.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T16:57:45.127

也许这是该`Zip`方法的任务。就像是

```
names.Zip(numbers, (name, number) => new { name, number, }) 
```

将两个序列“压缩”为一个。从那里您可以立即订购序列，例如

```
.OrderBy(a => a.number) 
```

或者您可以改为创建一个`Dictionary<,>`，例如

```
.ToDictionary(a => a.number, a => a.name) 
```

但听起来你真正想要的是 a **`SortedDictionary<,>`**，而不是`Dictionary<,>`由哈希码组织的 a 。没有用于创建排序字典的 LINQ 方法，但只是说

```
var sorted = new SortedDictionary<int, string>();
foreach (var a in zipResultSequence)
    sorted.Add(a.number, a.name); 
```

或者，使用 a `SortedDictionary<,>`，完全跳过 Linq，像这样：

```
var sorted = new SortedDictionary<int, string>();
for (int idx = 0; idx < numbers.Count; ++idx)  // supposing the two list have same Count
    sorted.Add(numbers[idx], names[idx]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T15:47:37.173

我通过使用字典来修复它，结果如下：

```
dictionary.OrderBy(kv => kv.Value).Reverse().Select(kv => kv.Key).ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T15:42:18.027

为了补充 Tims 的答案，您还可以使用自定义数据结构将一个名称与一个数字相关联。

```
public class Person
{
    public int Number { get; set; }   // in this case you could also name it ID
    public string Name { get; set; }
} 
```

然后你会有一个`List<Person> persons;`，你可以按你喜欢的任何属性对这个列表进行排序：

```
List<Person> persons = new List<Person>();
persons.Add(new Person(){Number = 10, Name = "John Doe"});
persons.Add(new Person(){Number = 3, Name = "Max Muster"});

// sort by number
persons = persons.OrderBy(p=>p.Number).ToList();

// alternative sorting method
persons.Sort((a,b) => a.Number-b.Number); 
```

# php - 如何在 MySQL 中安全存储不同语言的网站 URL？

> ID：13332551
> 
> 赞同：2
> 
> 时间：2012-11-11T15:27:26.933
> 
> 标签：php, mysql

我们当前的项目要求用户可以使用 MySQL db 存储不同语言的网站 url。如果没有 SQL 注入攻击或间接方式（例如对 url 进行 MD5 处理，给定 url 的 BASE64ENCODEing），我如何才能实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:36:37.863

如果您想稍后检索和解码存储的 URL，MD5 不是一种选择，因为它是一种单向散列函数

**Base64**编码在这种情况下更合适。

# javascript - 如果我在 Typescript 中以大写字符开始类字段，是否会导致更可维护的代码？

> ID：13332553
> 
> 赞同：1
> 
> 时间：2012-11-11T15:27:35.997
> 
> 标签：javascript, typescript

鉴于以下情况：

```
class TransferLink {
    table: string;
    constructor ($link: JQuery) {
        this.table = $link.attr('data-table');
    }
}

class TransferLink {
    Table: string;
    constructor ($link: JQuery) {
        this.Table = $link.attr('data-table');
    }
} 
```

我意识到 Javascript 不是 C#，但我习惯于做所有以大写开头的字段。为了提高可维护性，以大写字符开头的字段命名会更好吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T21:44:11.737

我知道 TypeScript 团队在对这个话题发表评论之前，正在等待看看该语言在现实生活中是如何使用的，但是有两种方法可以看待这个问题。

尽管您熟悉 C#，但您可能希望编写与纯 JavaScript 代码良好互操作的 TypeScript 代码，并且在纯 JavaScript 中，人们习惯于降低属性和函数的大小写。鉴于 JavaScript 区分大小写，如果您打算让其他人使用您的代码，您可能希望坚持现有的 JavaScript 约定。

例如...

```
class MyClass {
    myProperty: string;
    myFunction(myParameter: string): void {

    }
} 
```

只有类（和模块）以大写字符开头。

如果您使用来自各种来源的 JSON，则必须在代码中在 C# 样式和 JavaScript 样式之间切换，因为当有人提供 JSON 时，它几乎肯定会遵循这种样式 - 因此为了避免认知转换，也许 JavaScript 样式是最简单的。

来自[Google 的 JavaScript 样式指南](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml)：

> 通常，使用 functionNamesLikeThis、variableNamesLikeThis、ClassNamesLikeThis、EnumNamesLikeThis、methodNamesLikeThis 和 SYMBOLIC_CONSTANTS_LIKE_THIS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:31:59.090

作为 C# 和 Javascript 开发人员，我会说最好用大写来命名公共类字段，就像在 C# 中所做的那样。此外，众所周知 C# 影响了 TypeScript

# android - 在 AVD 与实际支持 Android 的设备上进行开发

> ID：13332558
> 
> 赞同：3
> 
> 时间：2012-11-11T15:28:16.240
> 
> 标签：android

我刚开始学习如何编写 Android 应用程序。来自 C# 世界，让我非常困扰 Android 编程的一件事是，实际上测试您的应用程序需要很长时间，因为您必须启动 AVD 或等到应用程序安装在您的实际设备上，而对于 Winforms/WPF应用程序，您只需点击该调试按钮，所有内容都会在几秒钟内加载。

我的第一个问题是，哪一种是更可取的开发方式以最大限度地提高效率？在 AVD 或实际设备上开发？关于如何提高开发速度有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T15:32:39.290

有几件事，大多数人在开发时将 AVD 保持打开状态，这样他们每次打开时都不必等待十分钟，但是如果您的计算机速度非常慢并且这不是一个选项，那么是的，它会说话一会儿

如果您的计算机速度更快，那么 AVD 的延迟可能会更小，但对于完全无延迟的测试场所，请使用您的实际设备。

如果您正在制作游戏，您应该查看 libgdx，因为它允许您在桌面上测试您的应用程序，然后通过更改一行，将它们导出为 .apk 文件并在您的 android 设备上进行测试

对于应用程序中的许多应用程序和功能，您将别无选择，只能在您的真实设备上进行测试。因为将 .apk 文件移动到实际设备可能需要一段时间，所以我建议在测试某些硬件功能（例如音量按钮或加速度计）时使用设备上的 IDE 对代码进行小幅编辑。至于设备 IDE，我会推荐 AIDE - [https://play.google.com/store/apps/details?id=com.aide.ui&hl=en](https://play.google.com/store/apps/details?id=com.aide.ui&hl=en)

总的来说，我建议您使用 Eclipse 和 AVD，在您的大多数应用程序上进行大部分开发，但对于您需要硬件功能的任何应用程序，我建议您使用设备上的 IDE（在 Play 商店中搜索如果您不喜欢我的建议，Android 开发可提供更多选择）。最重要的是，在您在 AVD 上对多种屏幕尺寸进行测试并在物理设备上对其进行测试之前，不要列出您的应用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:31:34.947

Keep the AVD open, you can keep doing debugs and test on it, it will automatically close and reopen with new code, that’s how I do at least, and I am the same, came from C# no experience with Android.

# php - 如何从php中的字符串中删除♥（或â™¥）？

> ID：13332559
> 
> 赞同：2
> 
> 时间：2012-11-11T15:28:15.947
> 
> 标签：php, string, replace

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:36:10.250

如果我理解正确，你需要`text here`之前的所有东西♥你可以使用`strpos`

```
$stopper = '♥';
$string = 'text here

♥ text1
♥ text2
♥ text3

some more text here' ;
$final = trim(substr($string,0,strpos($string, $stopper)));
var_dump($final); 
```

输出

```
string 'text here' (length=9) 
```

请注意，您`$stopper`也可以是`\n`新行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:11:58.683

解决方案是：

1.  对数组 执行[str_replace以定位和删除文本的特定部分。](http://php.net/manual/en/function.str-replace.php)
2.  创建一个正则表达式并定义可接受的值。
3.  对不可接受的值 执行[preg_replace 。](http://www.php.net/manual/en/function.preg-replace.php)

这导致显示所有所需值而没有不可接受的字符实例。

最后两步的代码如下：

```
// this is the original external source

$part_one = $external_source; 

// create a regex

$regex
= '~'
. '['
. '^'
. 'A-Z'
. '0-9'
. ' '
. '!_:/,.#$-'
. ']'
. '~'
. 'i'
;

// clean the string

$part_one_cleaned = preg_replace($regex, NULL, $part_one); 
```

# c# - 如何使用 makecert 创建证书颁发机构证书？

> ID：13332569
> 
> 赞同：13
> 
> 时间：2012-11-11T15:29:09.970
> 
> 标签：c#, https, certificate, makecert

我正在尝试创建一个使用带有自签名证书的 SSL 的网站。

这就是我所做的：

创建权威证书：

```
makecert -n "CN=root signing authority" -r -sv root.pvk root.cer 
```

创建目标证书

```
makecert -r -pe -n "CN=localhost" -b 01/01/2012 -e 01/01/2020 -sky exchange localhost.cer -sv localhost.pvk 
```

签署创建的证书

```
makecert -ic root.cer -iv root.pvk -n "CN=localhost" -sv localhost.pvk -pe -sky exchange localhost.cer 
```

在里面创建一个带有私钥的证书

```
pvk2pfx.exe -pvk localhost.pvk -spc localhost.cer -pfx localhost.pfx 
```

现在，我想用firefox来调试网站。为此，我需要将授权根证书 (root.cer) 导入到受信任的证书列表中。

但是，当我尝试执行此操作时，我收到以下错误消息：

> 这不是证书颁发机构证书，因此无法将其导入证书颁发机构列表。

我对提琴手的授权证书做了类似的事情，一切顺利，这意味着我创建授权证书的过程存在问题。

如何正确创建证书颁发机构证书？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T03:40:37.090

也许您可以尝试在创建根证书时添加*-cy authority*参数，如下所示：

```
makecert -n "CN=root signing authority" -cy authority -r -sv root.pvk root.cer 
```

因此，您声明您正在创建一个授权证书，并且应该可以完成这项工作..或者至少让您走上正轨=）

我尝试自己使用此命令行创建根证书并将其导入 Firefox：我可以确认，如果您不添加“-cy”参数，Firefox 将不会认为这是一个有效的根证书。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-08T12:32:20.690

两个最好和最简单的帮助页面：

[https://blogs.msdn.microsoft.com/benjaminperkins/2014/05/05/make-your-own-ssl-certificate-for-testing-and-learning/](https://blogs.msdn.microsoft.com/benjaminperkins/2014/05/05/make-your-own-ssl-certificate-for-testing-and-learning/)

[https://blog.jayway.com/2014/09/03/creating-self-signed-certificates-with-makecert-exe-for-development/](https://blog.jayway.com/2014/09/03/creating-self-signed-certificates-with-makecert-exe-for-development/)

Some examples:

```
certmgr.exe -add -all -c "benperkmeCA.cer" -s -r localMachine Root

makecert -pe -iv benperkmeCA.pvk -n "CN=benjamin-perkins.me" -eku 1.3.6.1.5.5.7.3.1 -ss my -sr localmachine -sky exchange -ic BenperkmeCA.cer IIS-ServerCert-Benperk.cer

makecert -pe -iv benperkmeCA.pvk -n "CN=benjamin-perkins.me" -eku 1.3.6.1.5.5.7.3.1 -ss my -sr localmachine -sky exchange -ic BenperkmeCA.cer IIS-ServerCert-Benperk.cer

makecert -pe -iv benperkmeCA.pvk -n "CN=benjamin-perkins.me" -eku 1.3.6.1.5.5.7.3.1 -ss my -sr localmachine -sky exchange -ic BenperkmeCA.cer IIS-ServerCert-Benperk.cer

makecert -pe -iv benperkmeCA.pvk -n "CN=benjamin-perkins.me" -eku 1.3.6.1.5.5.7.3.1 -ss my -sr localmachine -sky exchange -ic BenperkmeCA.cer IIS-ServerCert-Benperk.cer 
```

# c# - What kind of asp.net Routing is this, and how can i get it to work?

> ID：13332572
> 
> 赞同：0
> 
> 时间：2012-11-11T15:29:25.107
> 
> 标签：c#, asp.net, routing, webforms

I'm trying to use the following routing which is used in the procject for other routings, but i cant get a hang of it.

```
<route name="GarageDetails" url="garage/car/details/{CarId}" physicalFile="~/Garage/GarageCarDetails.aspx">
        <constraints>
          <add placeholder="CarId" pattern="\d+"></add>
        </constraints>
      </route> 
```

In my GarageCarDetails i'm trying to fetch the querystring with

```
CarId = Convert.ToInt32(Request.QueryString["CarId"]); 
```

but the request wont get it at all.

If i use anchors with GarageCarDetails.aspx?CarId=xxx it works fine.

My links now should look like /garage/car/details/xxx

Anyone know how to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:36:33.837

使用`RouteData.Values["CarId"]`而不是`Request.QueryString["CarId"]`.

**[RouteData.Values 属性](http://msdn.microsoft.com/en-us/library/system.web.routing.routedata.values%28v=vs.100%29.aspx)**：获取路由的 URL 参数值和默认值的集合。

# css - 我需要这个:nth:child equations

> ID：13332573
> 
> 赞同：0
> 
> 时间：2012-11-11T15:29:32.730
> 
> 标签：css

我搜索了谷歌并且知道如何为 nth:child 编写方程式，但我无法选择以下孩子。我需要选择 5th, 9th, 13th, 17th, ...

你知道一个方程式吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T15:32:14.503

```
:nth-child(4n+5) 
```

那应该工作

# android - I find two gradle android plugin - Is there any relation between the two?

> ID：13332574
> 
> 赞同：6
> 
> 时间：2012-11-11T15:29:34.427
> 
> 标签：android, gradle, build-system

I was trying to find out how to build Android application with Gradle. To my surprise I found two references, one from [jvoegele](https://github.com/jvoegele/gradle-android-plugin) and another from [Android Tools Project](http://tools.android.com/tech-docs/new-build-system/using-the-new-build-system) site. They appear to be different prima facie. So my question is why there are two variants? Is there any relation between the two? What are their current status? Which one I should use - their pros and cons? It seems the Android one is just started.

I am looking forward to some valuable inputs from guys who have first hand experience in building Android application with Gradle.

Thanks and regards

Santanu

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:17:33.910

[不再支持](https://github.com/jvoegele/gradle-android-plugin/issues/91)jvoegele 原来的 Android gradle 插件，但插件之间的功能差距`com.android.tools.build`正在缩小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:23:03.320

我只是在玩 android tools 项目站点的 gradle 插件，感觉很难弄清楚事情应该如何工作。它不是很好地集成到 eclipse 开发工作流程中，甚至 eclipse 的默认项目配置对我来说也不起作用。可以通过扩展项目和类路径文件创建并修改 gradle 构建文件中的项目布局来解决此问题。

为了修复 eclipse 项目的创建，我受到了 jvoegele 插件的启发（学分去那里）：

```
eclipse{
    project {
        natures "com.android.ide.eclipse.adt.AndroidNature"

        def builders = new LinkedList(buildCommands)
        builders.addFirst(new BuildCommand("com.android.ide.eclipse.adt.PreCompilerBuilder"))
        builders.addFirst(new BuildCommand("com.android.ide.eclipse.adt.ResourceManagerBuilder"))
        builders.addLast(new BuildCommand("com.android.ide.eclipse.adt.ApkBuilder"))
        buildCommands = new ArrayList(builders)
    }
    classpath {
        containers.removeAll { it == "org.eclipse.jdt.launching.JRE_CONTAINER" }
        containers "com.android.ide.eclipse.adt.ANDROID_FRAMEWORK"

        plusConfigurations += configurations.compile

        file {
            whenMerged { classpath ->
                classpath.entries.removeAll { it instanceof SourceFolder && (it.dir?.path == "gen" || it.dir?.path == "src") }
                classpath.entries.add(new SourceFolder("gen", null))
                classpath.entries.add(new SourceFolder("src", null))
            }
        }
    }
} 
```

如果你想让你的项目快速高效，这个插件不适合你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T11:25:34.593

从长远来看，我肯定会选择 Android 工具项目；它确实在进行中，但 android 工具组正在非常积极地致力于它。他们打算将此作为当前 ant 构建系统的替代方案

# javascript - 如何在 Opal-rails 中打印 Javascript 中定义的变量

> ID：13332579
> 
> 赞同：4
> 
> 时间：2012-11-11T15:30:09.983
> 
> 标签：javascript, ruby-on-rails, ruby

如何访问之前在 javascript 中定义的 opal-ruby 代码中的变量？例如在下面的代码中如何修复蛋白石文件。

# index.html.erb

```
...
<script>
  var test = "hi"
</script>
... 
```

# index.js.opal

```
Document.ready? do
  puts test
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:07:41.420

Opal 允许您使用反引号输出您不希望 Opal 解释的任何原始 JavaScript，因此这将输出`test`包含“hi”的字符串：

```
Document.ready? do
  puts `test`
end 
```

# apache - 通过 .htaccess 设置过期标头和压缩数据

> ID：13332581
> 
> 赞同：4
> 
> 时间：2012-11-11T15:30:30.950
> 
> 标签：apache, .htaccess, httpd.conf, webfonts, expires-header

我正在尝试对其进行设置，以便浏览器长期缓存 webfonts，并尝试对它们进行 gzip 压缩以加快下载速度。

据我所知，您可以通过`httpd.conf`Apache 中的文件或通过`.htaccess`.

我不确定如何判断 gzip 是否启用，我读了一些关于搜索`httpd.conf`文件的内容`DEFLATE`；我这样做了，但什么也没找到 - 所以不确定它是否已启用！？

不管怎样，我已经把下面的代码放到了`.htaccess`文件中，部分原因是我不知道把它放在 httpd.conf 文件的什么地方，部分原因是在 .htaccess 文件中进行更改更容易，而不会不断地打扰我的主机。

这是代码..

```
# Add correct content-type for fonts
AddType application/vnd.ms-fontobject .eot
AddType font/ttf .ttf
AddType font/otf .otf
AddType font/x-woff .woff
AddType image/svg+xml .svg

# Compress compressible fonts
AddOutputFilterByType DEFLATE font/ttf font/otf image/svg+xml

# Add a far future Expires header for fonts
ExpiresByType application/vnd.ms-fontobject "access plus 1 year"
ExpiresByType font/ttf "access plus 1 year"
ExpiresByType font/otf "access plus 1 year"
ExpiresByType font/x-woff "access plus 1 year"
ExpiresByType image/svg+xml "access plus 1 year" 
```

现在，我想知道这是否正确，因为我也看到了类似但不同的到期代码..

```
ExpiresByType application/x-font-ttf "access plus 1 month"
ExpiresByType font/opentype "access plus 1 month"
ExpiresByType application/x-font-woff "access plus 1 month"
ExpiresByType image/svg+xml "access plus 1 month"
ExpiresByType application/vnd.ms-fontobject "access plus 1 month" 
```

将它放在文件中的哪个位置是否重要，`.htaccess`或者它可以放在任何地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T06:10:33.257

ExpiresByType 可以进入您的 httpd.conf、virtualhost 配置或 htaccess，如每个指令条目顶部的 apache 文档概述框所示：

![Apache 文档截图](../Images/399f9d67ae30f9080d025b128a9179aa.png)

[http://httpd.apache.org/docs/2.2/mod/mod_expires.html#expiresbytype](http://httpd.apache.org/docs/2.2/mod/mod_expires.html#expiresbytype)

上下文列表是您如何知道可以将各种 Apache 指令类型放入哪些配置文件的方法。

假设您使用的是 PHP，您的 phpinfo 详细信息应该会告诉您是否启用了 gzip。

![PHPInfo 截图](../Images/28f1d148c69fdfa290dfdfe5b05b487c.png)

**编辑**

针对您关于字体的正确 MIME 类型的问题，就它们与 Apache 服务器的文件关联而言，我的 mime.types 文件（位于 httpd.conf 所在的 apache conf 文件夹中）告诉我

```
application/x-font-(extension) 
```

将是与 ExpiresByType 一起使用的关联。我建议先让字体工作，然后检查字体 url 的标题，看看它是否给出了正确的到期日期。

![在此处输入图像描述](../Images/fa305b53b849f8d91199d6d595331976.png)

至于接收网络字体的浏览器，[这篇文章](http://www.jbarker.com/blog/2011/web-fonts-mime-types)似乎表明不考虑 MIME 类型，因此无关紧要。但这似乎与此相矛盾[。](http://www.jbarker.com/blog/2011/resource-interpreted-font-transferred-mime-type)据我了解，没有官方字体/ MIME 类型，因此任何浏览器实现都超出了 MIME 规范。

相关问题：

[字体的正确 MIME 类型](https://stackoverflow.com/questions/2871655/proper-mime-type-for-fonts)

[更正字体 MIME 类型的 Apache AddType 指令](https://stackoverflow.com/questions/7415640/correct-apache-addtype-directives-for-font-mime-types)

我没有在 .htaccess 中看到任何指定放置要求的内容，因此您应该安全地将这些规则放在您认为合适的任何地方，尽管如果您执行 AddTypes，您需要在引用该声明类型的任何进一步指令之上执行此操作。最好将它们放在重写规则上方的顶部附近。

# python - 在 Mac OSX 上安装 BeautifulSoup

> ID：13332589
> 
> 赞同：8
> 
> 时间：2012-11-11T15:31:04.647
> 
> 标签：python, beautifulsoup

我在这里尝试了一切：[如何在 Mac 上安装 Beautiful Soup 模块？](https://stackoverflow.com/questions/452283/how-can-i-install-the-beautiful-soup-module-on-the-mac)

从传统的安装方式和使用 easy_install 的安装似乎都可以工作（在安装过程中获得正确的输出），但是当我使用时：

```
from bs4 import BeautifulSoup 
```

解释器说不存在这样的模块。

我应该首先查看什么来解决此问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T18:35:57.163

要查看您已安装的所有软件包，您可以在解释器中运行以下命令：

```
>>> help('modules') 
```

这将为您列出您已安装的所有模块。在列表中查找`bs4`（似乎是按字母顺序排列的）。另一种选择是在您的提示下发出：

```
$ python -c "help('modules')" | grep bs4 
```

如果没有出现，或者您在列表中找不到它，则该模块未安装。

为了安装它，我使用了`sudo pip install bs4`. 您可能需要先运行`sudo easy_install pip`才能获得`pip`. 还要注意使用`sudo`，因为这可能会有所不同。

我正在运行 10.8 版本 12C60。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T22:28:04.663

我有一个适合我的丑陋解决方案：

```
try:
    from bs4 import BeautifulSoup as bs
except ImportError:
    from BeautifulSoup import BeautifulSoup as bs 
```

之后，我用`bs`前缀调用所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-30T20:53:55.547

我有同样的问题。bs4 已安装，但未显示在帮助（模块）中。

我不知道这是否适用于其他人，但我在使用 openCV 时遇到了同样的问题，并通过在尝试加载包之前添加以下内容来解决它。它适用于openCV，它只适用于bs4：

```
import sys
sys.path.append('/usr/local/lib/python3.6/site-packages') 
```

# ruby-on-rails - Sending ONLY plain text e-mail, Rails mime part included in body

> ID：13332591
> 
> 赞同：8
> 
> 时间：2012-11-11T15:31:17.567
> 
> 标签：ruby-on-rails, actionmailer, plaintext, mailer

I have a rails app that sends out many notification e-mails. We have a desire to let the user choose plain text vs html.

Initially our desire was always multipart so we didn't set a content type and simplyhad both the email.html.erb & email.text.erb views, which would both get sent through and create a multipart.

However now when we specify the content_type based on the users preference a it does set itself properly to multipart or plain/text but the html template is included as plain text at the bottom of the plain text e-mail.

Here is the code:

Mailer Action:

```
def client_creation(client) # When client checks in for the first time
   @client = client
   content_type = client.company.html_emails ? nil : 'text/plain'
   email_prefix = client.company.brand ? client.company.brand.email_subject_prefix : 'MonitoringClient'
   mail(to: @client.company.administrative_reporting_address, subject: "[#{email_prefix}][Initial Check-in] #{@client.machine_name.html_safe} of #{@client.clientgroup.name}", content_type: content_type)
end 
```

The above code checks if the Clients company has html_emails is on, if so it set the content_type to plain/text. Which results in the following:

IRB output:

```
#<Mail::Message:70269523266340, Multipart: false, Headers: <Date: Sun, 11 Nov 2012 09:09:43 -0600>, <From: notifications@monitoringclient.com>, <To: ommitted>, <Message-ID: <509fbfb7e0c4e_11e113fe8e4435b4084183@Jonathan.local.mail>>, <Subject: [Initial Check-in] Jonathan of hivemind labs>, <Mime-Version: 1.0>, <Content-Type: text/plain>, <Content-Transfer-Encoding: 7bit>> 
```

So far so good Multipart is false content_type is text/plain but then here is the resulting email body:

```
----==_mimepart_509fbfb7ddb8b_11e113fe8e4435b4083853
Date: Sun, 11 Nov 2012 09:09:43 -0600
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-ID: <509fbfb7de92a_11e113fe8e4435b408399f@Jonathan.local.mail>

First check-in notification for Jonathan.

=========================== CLIENT DETAILS ===========================
MACHINE INFORMATION:
  MacBookAir4,1

REPORT TIME:
  Nov 11, 2012  8:17am
CLIENT GROUP:
  Hivemind Labs
MACHINE NAME:
  Jonathan
LAST USER:
  Jonathan
SERIAL NUMBER:
  ommited

MACHINE SPECIFICATIONS:
  RAM:
    4 GB
  PROCESSOR INFO:
    1x
    1.8 GHz,
    2 core
    Intel Core i7
CLIENT VERSION:
  5.0.5
UPTIME AT LAST CHECKIN:
  4 days, 21 hours, 11 mins

----==_mimepart_509fbfb7ddb8b_11e113fe8e4435b4083853
Date: Sun, 11 Nov 2012 09:09:43 -0600
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-ID: <509fbfb7e0496_11e113fe8e4435b40840ce@Jonathan.local.mail>

<!DOCTYPE html>
<html>
<head>
<title> </title>
</head>
<body leftmargin="0" marginwidth="0" topmargin="0" marginheight="0" offset="0">
    <table style="box-shadow: 0px 0px 28px -10px #222; margin: 10px auto 20px" border="0" cellpadding="0" cellspacing="0" width="600" id="templateContainer" >
    <tr>
                <td align="center" valign="top">
                    <table border="0" cellpadding="0" cellspacing="0" width="600" id="templateHeader">
                        <tr>
                            <td class="headerContent">

                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
    <tr>
                <td align="left" valign="top" style="width:600px">
                    <table border="0" cellpadding="10" cellspacing="0" width="600px" id="templateBody">
                        <tr>
                            <td valign="top" class="bodyContent">
                                <table border="0" cellpadding="0" cellspacing="0" width="600px">
                                    <tr>
                                        <td valign="top">
                                            <div class="mainContent">

<style type="text/css" media="screen">
  table.info tr  td:first-child{
        width:40%;
        color: #ffffff;
        text-shadow:1px 1px 1px #555;
        background-color: #2C2C2C;
        background-image: -moz-linear-gradient(top, #888, #777);
        background-image: -ms-linear-gradient(top, #888, #777);
        background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#888), to(#777));
        background-image: -webkit-linear-gradient(top, #888, #777);
        background-image: -o-linear-gradient(top, #888, #777);
        background-image: linear-gradient(top, #888, #777);
        background-repeat: repeat-x;
        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#888', endColorstr='#777', GradientType=0);
        -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.25),inset 0 -1px 0 rgba(0, 0, 0, 0.1);
        -moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.25),inset 0 -1px 0 rgba(0, 0, 0, 0.1);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.25)
      }
      legend + .page-actions.page-actions-small {
      margin-top: -49px;
      }
</style>
  <legend>Client Details</legend>
<div id="" class="page-actions page-actions-small pull-right">
  <a href="#" class="btn btn-mini">Complete Overview</a>
</div> <!-- close:  page-actions -->
<table style="" class="table table-bordered table-striped table-condensed info">
  <tbody>
    <tr><td>Client Group</td><td>Hivemind Labs</td></tr>
    <tr><td>Serial Number</td><td></td></tr>
    <tr><td>Machine Name</td><td> Jonathan</td></tr>
    <tr><td>Last User</td><td>Jonathan</td></tr>
    <tr><td>Operating system</td><td>OS X 10.8.2 (12C60)</td></tr>
    <tr><td>Installed RAM</td><td>4 GB</td></tr>
    <tr><td>Model Details</td><td>MacBookAir4,1</td></tr>
    <tr><td>Uptime</td><td>4 days, 21 hours, 11 mins</td></tr>
  </tbody>
</table>

                                                </div>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="center" valign="top">
                    <table border="0" cellpadding="5" cellspacing="0" width="100%">
                        <tr>
                            <td style="padding: 0 0 20px 20px">
                                <small class="copyright"> All Rights Reserved.</small>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
</body>

</html>

----==_mimepart_509fbfb7ddb8b_11e113fe8e4435b4083853-- 
```

Why all the mime part data, why is the html content visible as text? I want a plain text only e-mail. Is this not how that is achieved?

One thing i noticed is that the html section of the e-mail says content_type: 'text/html'. Maybe that is why it's being included? Can this be prevented?

This question seemed to be close but seems this person was just trying to work out how to send multipart, which is not our issue: [Rails mailer mimepart visible as text in message body](https://stackoverflow.com/questions/13140215/rails-mailer-mimepart-visible-as-text-in-message-body)

i also tried changing our text template to email.text.plain.erb after seeing that in a few places but that did not work either.

Here are the email headers if anyone is curious:

```
 Delivered-To: jon@hivemindlabs.com
Received: by 10.60.124.225 with SMTP id ml1csp294562oeb;
    Sun, 11 Nov 2012 07:09:46 -0800 (PST)
Received: by 10.236.122.143 with SMTP id t15mr16902572yhh.26.1352646586007;
    Sun, 11 Nov 2012 07:09:46 -0800 (PST)
Return-Path: <info@hivemindlabs.com>
Received: from mail-gh0-f181.google.com (mail-gh0-f181.google.com [209.85.160.181])
    by mx.google.com with ESMTPS id p20si1615988ano.75.2012.11.11.07.09.45
    (version=TLSv1/SSLv3 cipher=OTHER);
    Sun, 11 Nov 2012 07:09:45 -0800 (PST)
Received-SPF: pass (google.com: domain of info@hivemindlabs.com designates 209.85.160.181 as permitted sender) client-ip=209.85.160.181;
Authentication-Results: mx.google.com; spf=pass (google.com: domain of info@hivemindlabs.com designates 209.85.160.181 as permitted sender) smtp.mail=info@hivemindlabs.com
Received: by mail-gh0-f181.google.com with SMTP id z22so1332210ghb.26
    for <jon@hivemindlabs.com>; Sun, 11 Nov 2012 07:09:45 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
    d=google.com; s=20120113;
    h=date:from:to:message-id:subject:mime-version:content-type
     :content-transfer-encoding:x-gm-message-state;
    bh=OFH7ScRSXxkeW0Ig+UdGXMRcNoKwEcIPDFaTVrwnnRs=;
    b=i+Oq1YtnJVh3hM6bB5JgXbZGUS1KnvIsyX2zU2UCoCGtGd1DrvifYQGTPSkqbjlqg0
     vArkYg9ZOApVkueLh8fU3lXocCgXy1cSQ7pnTDo5aj2YKyNj8XcshGU5PN24nKmNkJNn
     AOHD75ounew3lrfL/dPGx5rfD6ROIgOORIHioPUSs9sFPUbbfu1OsPDBlAAv4zPWbBuG
     tbjR1JL7DntD3sPzcHiZJ9XyajhhuYQPZ/j5f/++Bdyfqq1s8uxlZvapQlndai58KtqU
     EjmDb91+C/uIc9FwcT2YE0vv3pdrIHnlGYmfyX/sB0ZDDET+dTFcCOmbqpbaAwxavRb+
     GAUg==
Received: by 10.236.83.103 with SMTP id p67mr16870674yhe.78.1352646585386;
    Sun, 11 Nov 2012 07:09:45 -0800 (PST)
Return-Path: <info@hivemindlabs.com>
Received: from gmail.com (ip-216-115-131-150.static.eatel.net. [216.115.131.150])
    by mx.google.com with ESMTPS id u11sm3665339ane.11.2012.11.11.07.09.44
    (version=TLSv1/SSLv3 cipher=OTHER);
    Sun, 11 Nov 2012 07:09:45 -0800 (PST)
Date: Sun, 11 Nov 2012 09:09:43 -0600
From: info@hivemindlabs.com
To: jon@hivemindlabs.com
Message-ID: <509fbfb7e0c4e_11e113fe8e4435b4084183@Jonathan.local.mail>
Subject: [Initial Check-in] Jonathan of hivemind labs
Mime-Version: 1.0
Content-Type: text/plain;
  charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Gm-Message-State:  ALoCoQlSNX58YFYU6Idzq84zch66CnL12QD/WrT3R8kcu0wT2jV9oppA1clUl9pHY2hta0vIMqJx 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T05:36:36.293

```
mail(to: @client.company.administrative_reporting_address, 
     subject: "[#{email_prefix}][Initial Check-in] \
              #{@client.machine_name.html_safe} of #{@client.clientgroup.name}",
     content_type: content_type) do |format|
  format.html if client.company.html_emails
  format.text 
end 
```

由于调用了 mailer 操作`client_creation`，这将为 HTML 部分呈现模板“client_creation.html.erb”（如果条件为真）并为文本部分呈现模板“client_creation.text.erb”。`html_emails`是公司设置的用于启用/禁用 html 电子邮件的标志。更多信息参考[http://guides.rubyonrails.org/action_mailer_basics.html](http://guides.rubyonrails.org/action_mailer_basics.html)

# jquery - 在“当前”之前的元素中交换元素中的类

> ID：13332601
> 
> 赞同：0
> 
> 时间：2012-11-11T15:32:08.107
> 
> 标签：jquery

我有一个 div 列表。一个被标记为当前。我需要在一个元素中交换一个类，其中包含当前之前的所有 div。

```
<div id="1">
    <span class="green"></span>
</div>

<div id="2">
    <span class="green"></span>
</div>

<div id="3" class="current">
    <span class="green"></span>
</div>

<div id="4">
    <span class="green"></span>
</div> 
```

因此，ID 为 1 和 2 的 div 中的“绿色”类应更改为“红色”。当 AJAX 函数成功返回不同的 ID 时，“current”类会发生变化：

```
var ct = $('.current').attr('id');

$.ajax({
    ...
dataType: "json",

success: function(data){
    var cid = data.cid;

    if (ct != cid) {
        $('div').removeClass('current');
        $('div#'+cid).addClass('current');
    }
} 
```

不确定如何添加 SPAN 类交换。我是否为所有跨度添加 .each() ？那么我如何停止一次并且不改变过去的“当前”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:36:43.840

这是使用 jQuery`lt()`选择器的理想场所。您必须提取`selected`div 的索引，然后对索引小于所选索引的所有元素执行操作。

```
var selectedIndex = $("div.current").index();
var previousDivs = $("div:lt("+selectedIndex+")"); 
```

您现在有一个变量`previousDivs`，其中包含您选择的元素之前的所有元素。

参考 -

*   [`index()`](http://api.jquery.com/index/)
*   [`:lt()`](http://api.jquery.com/lt-selector/)

# java - Java Android 应用 MediaPlayer 中的 NullPointerException

> ID：13332603
> 
> 赞同：0
> 
> 时间：2012-11-11T15:32:10.030
> 
> 标签：java, android, eclipse, nullpointerexception, android-mediaplayer

请帮助，这只是我正在开发的一个简单的 android 应用程序，它意味着每次单击按钮时都会播放声音....由于运行时错误而导致的快节奏 - NullPointerException！......我不知道我做错了什么。

这是我的代码

公共类 Main 扩展 Activity 实现 OnClickListener{

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button e = (Button) findViewById(R.id.Button1);
    e.setOnClickListener(this);    

}

public void onClick(View v){

    if(v.getId()==R.id.imageButton1){
    final MediaPlayer i = MediaPlayer.create(Main.this, R.raw.sound);
    i.setOnCompletionListener(new OnCompletionListener() {

        public void onCompletion(MediaPlayer mp) {
            i.release();                    
        }
    });

    i.start();  
    }       

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:43:24.057

这只是一个猜测，但在[此处](http://developer.android.com/reference/android/media/MediaPlayer.html)的文档中，您会发现以下内容

> `public static MediaPlayer create (Context context, int resid)` ... 返回一个 MediaPlayer 对象，如果创建失败则返回 null

这意味着您应该确保该行

```
final MediaPlayer i = MediaPlayer.create(Main.this, R.raw.sound); 
```

不返回`null`.

**编辑：**

`create(Context context, int resid)`如果失败，我真的不确定如何处理这种情况。但是您必须这样做，因为即使从文档中也很清楚它可能会发生。

为了确保这确实是问题所在，只需忽略这种情况并从您的处理程序返回。例如...

```
public void onClick(View v)
{
    if(v.getId() == R.id.imageButton1)
    {
        final MediaPlayer i = MediaPlayer.create(Main.this, R.raw.sound);

        if (i != null)
        {
            ...

            i.start();
        }
    }       
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:46:21.507

试试这个方法......

```
public class Blah extends Activity implements OnClickListener {
   MediaPlayer mp;

   @Override 
   public void onCreate(Bundle b)
   {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);

      Button e = (Button) findViewById(R.id.Button1);

      mp = MediaPlayer.create(R.raw.match);
      mp.setOnCompletionListener(new OnCompletionListener() {

        public void onCompletion(MediaPlayer mp) {
            i.release();                    
        }
    });

      e.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                   mp.seekTo(0);
                       mp.start();

            }
        });
   }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T13:20:14.443

我有同样的问题

我的解决方案是使用 LAME mp3 编码器重新编码 mp3 文件

你可以使用这个程序：[http ://www.freac.org/index.php/en/downloads-mainmenu-33](http://www.freac.org/index.php/en/downloads-mainmenu-33)

显然android对mp3编解码器很挑剔

# javascript - 将元素添加到 JSON 文件

> ID：13332605
> 
> 赞同：-1
> 
> 时间：2012-11-11T15:32:21.310
> 
> 标签：javascript, jquery, json

是否可以将元素添加到 JSON 文件而不使用 Javascript 或 Jquery 将其加载到内存中？Json 文件将在服务器端，我想在客户端进行编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:33:30.430

是的。手动编辑它或用 JavaScript 以外的语言编写一些东西来添加字段......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:35:01.770

不，没有，手工编辑会搞砸，特别是如果你的对象结构很复杂，

但是Javascript不能编辑文件

# ruby - 在 Redmine 上创建数据库结构时显示错误

> ID：13332606
> 
> 赞同：0
> 
> 时间：2012-11-11T15:32:24.190
> 
> 标签：ruby

我现在正在 Debian 中设置我的 Redmine 2.1.0。当我`RAILS_ENV=production rake db:migrate`在 Redmine 目录中运行它时。它显示这样的错误

```
rake aborted!
Invalid preference factor: 3.0

Tasks: TOP => db:migrate => environment
(See full trace by running task with --trace) 
```

我的 Ruby 版本是 1.8.7

当我给出这个命令“ruby -e 'p 0.3”。它打印 3.0。我不知道是什么问题。如何在我的组织中设置 Redmine 2.1.0？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:02:43.643

似乎您的特定红宝石有问题。

[rvm](http://rvm.io)是你的朋友。尝试安装 1.9.3-head，为 redmine 创建 gemset 并继续安装。

RVM 方法的一大优势是新的 rubies 安装不会影响系统 ruby​​ 没有应用程序使用它。

# c# - 尚未为 Microsoft 报告服务中的数据源“Product_Detail”提供数据源实例

> ID：13332611
> 
> 赞同：21
> 
> 时间：2012-11-11T15:32:56.063
> 
> 标签：c#, reportviewer, rdlc

我正在尝试在报告中显示记录。数据在数据集中。但它与他们无关。当表单加载时，它会显示报告布局。但是当我单击按钮时，它会显示错误。下面是我的代码。

```
using Microsoft.Reporting.WinForms;
//------------------------------------------------------------------
// <copyright company="Microsoft">
//     Copyright (c) Microsoft.  All rights reserved.
// </copyright>
//------------------------------------------------------------------
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace ReportsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

            this.reportViewer1.RefreshReport();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            System.Data.DataSet ds = GetDataSet();
            //reportViewer1.LocalReport.ReportPath = "Report1.rdlc";
            ReportDataSource rds = new ReportDataSource("ProductsDataSet", ds.Tables[0]);
            this.reportViewer1.LocalReport.DataSources.Clear();
            this.reportViewer1.LocalReport.DataSources.Add(rds);
            this.bindingSource1.DataSource = rds;
            this.reportViewer1.RefreshReport();
        }

        private System.Data.DataSet GetDataSet()
        {
            System.Data.SqlClient.SqlConnection sqlConn = new System.Data.SqlClient.SqlConnection("Data Source=DELL;Initial Catalog=Products;Integrated Security=True");
            sqlConn.Open();
            string sql= string.Format ( @"select o.[User], o.OrderDate, o.Quantity, o.OrderDetail, c.ShopName, c.[Address], c.City, c.Ph, p.* from dbo.Clients c,dbo.Product_Service o,Product_D p,Junction j where o.ClientId = c.ClientId
                            and o.ProductId  = j.ProductId 
                                and j.PCode = p.PCode
                                  and o.ClientId = 41
                                        and o.OrderDate='11/9/2012';");

            System.Data.SqlClient.SqlDataAdapter ad = new System.Data.SqlClient.SqlDataAdapter(sql, sqlConn);
            System.Data.DataSet ds = new System.Data.DataSet();
            ad.Fill(ds);
            sqlConn.Close();
            return ds;
        }
    }
} 
```

在我的数据集中，我有 3 个表。我选择了报告查看器顶部的绑定源，其中显示了一个小箭头。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-08-29T22:43:57.933

在使用 Visual Studio.Net 2012 编辑代码时，我在使用 ReportViewer 版本 10 时遇到了这个问题。

我通过在错误消息中获取数据源的名称找到了解决方案（在上述情况下，它是“Product_Detail”）。然后我进入源代码视图，找到了 ReportViewer，它的 DataSources，然后是它的 ReportDataSource。

我将 ReportDataSource 的 Name 属性设置为与错误消息中提到的 Data Source 相同（即“Product_Detail”）。

我希望这对你有用，就像对我一样。

此外，如果您可以使用更高版本的 ReportViewer 控件，您可能会发现此问题要么不会出现，要么更容易解决。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-12T16:18:37.063

“ProductsDataSet”是您提供给它的数据源的名称。您的错误是“尚未为 Microsoft 报告服务中的数据源“Product_Detail”提供数据源实例”

我假设你给它分配了错误的名字。

尝试，

```
ReportDataSource rds = new ReportDataSource("Product_Detail", ds.Tables[0]); 
```

如果您在报告中确实有一个名为“ProductsDataSet”的数据源，那么您可能有 2 个，您想在其中删除您不使用的那个，或者也为其分配一个数据源。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-03-03T04:51:26.790

我在我的 c# 应用程序中的 VS2013 中遇到了这个问题。所以万一其他人来到这里。如果您在报表设计器中添加了数据集。转到您的表单，在设计器中，单击报表查看器控件上的操作箭头。选择重新绑定数据源。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-11T16:41:20.917

关于现有的答案，我今天在 VS2015 Professional 中遇到了这个问题，并通过导航到 Form1.cs（设计）来修复它，使用动作箭头选择正确的数据源并最终重新绑定。请查看下图并相应地按照红色、绿色和紫色指示查看我的解决方案步骤。

[![在此处输入图像描述](../Images/8b5d2f800c937d4a8b1a655675c80a99.png)](https://i.stack.imgur.com/ox5uc.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-03T13:41:33.963

```
 Dim rptDataSource As ReportDataSource
    Try
        With Me.ReportViewer1.LocalReport
            ReportViewer1.LocalReport.ReportPath = Application.StartupPath & "\RTFLS\Report1.rdlc"
            '.DataSources.Clear()
        End With
        Dim ds As New POAS.CustomersTotalPayment 
        Dim da As New POAS.CustomersTotalPaymentTableAdapters.PAYMENTSTATUSTableAdapter

        da.Fill(ds.PAYMENTSTATUS)

        rptDataSource = New ReportDataSource("CustomersTotalPayment", ds.Tables("PAYMENTSTATUS"))
        Me.ReportViewer1.LocalReport.DataSources.Add(rptDataSource)

        Me.ReportViewer1.SetDisplayMode(Microsoft.Reporting.WinForms.DisplayMode.PrintLayout)
    Catch ex As Exception
        MessageBox.Show(ex.Message, My.Application.Info.Title, MessageBoxButtons.OK, MessageBoxIcon.Error)
    End Try

    Me.ReportViewer1.RefreshReport() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-28T05:32:34.340

如果在将报表添加到报表查看器后将另一个表添加到 xsd 表单，您可能会收到此错误。

1.  删除到报表查看器并再次添加
2.  将报表设置为报表查看器
3.  现在转到表单的加载事件（包括报表查看器并添加新数据集的填充。

    ```
    private void rptForm_Load(object sender, EventArgs e) {
      this.vwrpt_TableAdapter1.Fill(this.DataSet1.vwDataset);
    } 
    ```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-07T08:32:09.413

默认情况下，我的 rdlc 文件中创建了两个数据集（不知道原因）。通过记事本打开 RDLC 文件并删除不需要的数据源。这些值被两次分配给两个不同的数据集。希望这可以帮助你。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-22T05:48:32.733

```
Imports Microsoft.Reporting.WebForms

Partial Class Rpt_reports
Inherits System.Web.UI.Page

  Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load
    If Not IsPostBack Then
        Dim ds As New Custamer
        'da.Fill(ds.Tables("custamer")
        Dim path As String = Server.MapPath("customerinfo.rdlc")

        ReportViewer1.LocalReport.DataSources.Clear()
        ReportViewer1.LocalReport.ReportPath = path
        ReportViewer1.LocalReport.DataSources.Add(New Microsoft.Reporting.WebForms.ReportDataSource("Rpt_reports", ds.Tables("Custamer")))
        ReportViewer1.LocalReport.Refresh()
    End If
  End Sub

  'Protected Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click

  'End Sub

End Class 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-20T05:38:35.563

我知道这篇文章有点老了，但我想与你们分享我的解决方案，这样它可能会有所帮助。

在我的项目中，我遇到了同样的错误，即“**没有为数据源'dataset1'提供数据源实例**”。我在我的项目中使用了带有代码优先方法的实体框架。

为了解决上述错误，我遵循以下步骤。

1.  选择报表设计器（报表查看器）上的操作箭头。
2.  并从选择报告下拉列表中选择 RDLC 报告。
3.  选择“**选择数据源**”[选择数据源](https://i.stack.imgur.com/HpIyT.png)
4.  然后选择你想要的[数据源 从突出显示区域的下拉列表中选择数据源/绑定源](https://i.stack.imgur.com/WIZSz.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-03-11T11:34:40.487

我刚刚在 VS 16.4.6 和最新的报表设计器扩展 15.3.1 中遇到了这个问题。

对我来说，这是因为数据集的名称与我从下拉列表中选择的名称略有不同。我花了很长时间才弄清楚出了什么问题。一种预感表明这可能是一个问题。所以我重命名了数据集以匹配源数据实体并且错误消失了。

但是，为什么要让用户有机会调用其他数据集，然后不测试它是否真的有效呢？

报告查看器扩展的质量仍然很差。

# lua - Lua：Tir 与 Luvit 相比如何？

> ID：13332614
> 
> 赞同：2
> 
> 时间：2012-11-11T15:33:14.677
> 
> 标签：lua, web-deployment

对于**Lua**中的 Web 开发，**[Tir](http://tir.mongrel2.org/)**与**[Luvit](http://luvit.io/)**有何不同？

它们似乎都支持异步 I/O。

一个框架是否有其他框架没有的限制或要求（例如，Tir 是否需要使用 Mongrel2？）

# jquery - 数据表上的行选择不起作用

> ID：13332622
> 
> 赞同：1
> 
> 时间：2012-11-11T15:34:30.863
> 
> 标签：jquery, datatables

我试图允许对我的数据表工作进行行选择（如此处所示：http: [//datatables.net/release-datatables/examples/api/select_single_row.html](http://datatables.net/release-datatables/examples/api/select_single_row.html)），但它似乎不起作用。关于我可能出错的地方有什么想法吗？

我在这里包含了完整的代码：http: [//jsfiddle.net/v6VTB/2/](http://jsfiddle.net/v6VTB/2/)

**JS**

```
$(document).ready(function () {
    $('#example5').dataTable({
        "bPaginate": true,
        "bLengthChange": false,
        "bFilter": true,
        "bSort": true,
        "bScrollCollapse": true,
        "bInfo": true,
        "bAutoWidth": false
    });
});

var oTable;
var giRedraw = false;

/* Add a click handler to the rows - this could be used as a callback */
$("#example5 tbody").click(function (event) {
    $(oTable.fnSettings().aoData).each(function () {
        $(this.nTr).removeClass('row_selected');
    });
    $(event.target.parentNode).addClass('row_selected');
});

/* Add a click handler for the row */

/* Init the table */
oTable = $('#example5').dataTable();

/* Get the rows which are currently selected */
function fnGetSelected(oTableLocal) {
    var aReturn = new Array();
    var aTrs = oTableLocal.fnGetNodes();

    for (var i = 0; i < aTrs.length; i++) {
        if ($(aTrs[i]).hasClass('row_selected')) {
            aReturn.push(aTrs[i]);
        }
    }
    return aReturn;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:41:58.580

未定义 row_selected 类

看到这个小提琴 [http://jsfiddle.net/v6VTB/3/](http://jsfiddle.net/v6VTB/3/)，在下面添加了一个示例css

```
.row_selected​{
    color:red;
}​ 
```

# ios - CALayer 属性（例如：阴影）未出现在所有 UITableViewCells 上

> ID：13332625
> 
> 赞同：4
> 
> 时间：2012-11-11T15:34:51.320
> 
> 标签：ios, objective-c, uitableview, core-animation, calayer

所以我有`UIView`一个原型`UITableViewCell`。在该视图的`awakeFromNib`方法中，我有以下代码来制作阴影

```
CALayer *layer = self.layer;

layer.cornerRadius = 5.0f;

// Makes shadow for each cell in all and nearby table views.

CGSize size = self.bounds.size;
CGFloat curlFactor = 15.0f;
CGFloat shadowDepth = 5.0f;

UIBezierPath *path = [UIBezierPath bezierPath];
[path moveToPoint:CGPointMake(0.0f, 0.0f)];
[path addLineToPoint:CGPointMake(size.width, 0.0f)];
[path addLineToPoint:CGPointMake(size.width, size.height + shadowDepth)];
[path addCurveToPoint:CGPointMake(0.0f, size.height + shadowDepth)
        controlPoint1:CGPointMake(size.width - curlFactor, size.height + shadowDepth - curlFactor)
        controlPoint2:CGPointMake(curlFactor, size.height + shadowDepth - curlFactor)];

self.layer.shadowColor = [UIColor blackColor].CGColor;
self.layer.shadowOpacity = 0.3f;
self.layer.shadowOffset = CGSizeMake(2.0f, 7.0f);
self.layer.shadowRadius = 2.0f;
self.layer.masksToBounds = NO;
self.layer.shadowPath =  path.CGPath; //Sets a path for the shadow. Greatly enhances performance. 
```

问题是阴影只出现在某些单元格上，而不是全部，而且有时似乎是随机的。我试着把代码放进去`viewWillAppear`，`viewDidAppear`但它也没有在那里一起工作。有没有人知道可能导致这种情况的原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T03:41:16.830

我终于意识到问题在于阴影并没有丢失，它们只是被其他单元格重叠了。

所以[这个答案](https://stackoverflow.com/a/10166301/90172)`sendSubviewToBack:`可以解决问题（在这种情况下你需要）。

仅供参考，iOS 6 中的新[UICollectionView](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html)将让您更好地控制单元格 z 索引，对于 iOS 6 之前的支持，[PSTCollectionView](https://github.com/steipete/PSTCollectionView)是一个不错的选择。

# javascript - 请调试我的简单 javascript for 循环

> ID：13332626
> 
> 赞同：0
> 
> 时间：2012-11-11T15:34:52.390
> 
> 标签：javascript, for-loop

```
function skl() {
    var trct = 100;
    var amt = 100;
    while (amt == trct)
    {
        funk();
        amt += 50;
        trct = counttr();
    }
    console.log(amt, friendct);
}; 
```

最初有 100`<tr>s`

`funk()`向下滚动以显示 50`<tr>`多个

`counttr()`计算TR的数量并返回数量。

该功能的重点是向下滚动，直到它们不再是 TR。当不再有`<tr>`s 时，该函数仍会加 50`amt`但`counttr()`不会加 50，因此当 for 循环计算时，数字将不再相等并且循环结束。

编辑 - 循环只运行一次并显示“100 150”，表示 的值`trct`没有改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:45:21.193

for 循环条件中的第二个子句在每次迭代时都进行测试，当它不再为真时，循环结束。

您的 for 循环如下所示：

```
for (amt; amt == trct;) 
```

如果`amt != trct`在第一次迭代之后，for 循环永远不会运行第二次。你需要弄清楚为什么不是这样。我会在 for 循环结束时记录三件事，以获取一些可见性：`amt`、`trct`和`amt == trct`.

counttr() 函数可能会返回您不期望的内容

# c# - 使用 web.config 共享会话状态而不是反射

> ID：13332627
> 
> 赞同：1
> 
> 时间：2012-11-11T15:34:59.557
> 
> 标签：c#, asp.net, session, reflection, web-config

我在两个不同的 asp.net Web 应用程序中共享会话变量。

我正在使用“StateServer”模式。

对于共享，我将HttpRuntime 的**_appDomainAppId****设置**为与使用反射的应用程序相同。在**Application_Start**函数中，这是我的代码：

 ****```
 string applicationName = "mysite"

            FieldInfo runtimeInfo = typeof(HttpRuntime).GetField("_theRuntime",
                BindingFlags.Static | BindingFlags.NonPublic);
            HttpRuntime theRuntime = (HttpRuntime)runtimeInfo.GetValue(null);
            FieldInfo appNameInfo = typeof(HttpRuntime).GetField("_appDomainAppId",
                BindingFlags.Instance | BindingFlags.NonPublic);
            appNameInfo.SetValue(theRuntime, applicationName); 
```

这是我的问题：我不想为此使用反射。我想在 web.config 中处理这个问题。

有没有办法在 web.config 中设置**_appDomainAppId**？我在 httpRuntime 部分或其他任何地方都找不到任何东西。

谢谢你。****

# c - linux中的fork()函数

> ID：13332629
> 
> 赞同：0
> 
> 时间：2012-11-11T15:35:16.697
> 
> 标签：c, linux, process, fork

```
#include<stdio.h>
#include<sys/types.h>
#include<unistd.h>
void main()
{
  int i = 1;
  pid_t child_pid;
  printf("The main program process ID is %d", (int) getpid());
  printf("%d", i);
  child_pid = fork();
  if (child_pid != 0) {
    i++;
    printf("%d", i);
    printf("This is the parent process, with ID %d \n", (int) getpid());
    printf("The child process is %d ", (int) child_pid);
  } else {
    printf("%d", i);
    printf("This is the child process, with ID %d \n", (int) getpid());
  }
} 
```

我正在使用 C 语言运行该程序，使用该`fork()`函数。据我了解，当一个进程调用时`fork()`，会创建一个称为子进程的重复进程。父进程从调用点继续执行，`fork()`子进程也从同一个地方执行同一个程序。

因此，当我运行我的程序时，我希望输出类似于以下文本：

```
The main program process ID is 181411This is the child process, with ID 1815
The main program process ID is 18142This is the parent process,with ID 1814
The child process is 1815 
```

但我实际上看到了这个输出：

```
The main program process ID is 181411This is the child process, with ID 1815
The main program process ID is 181412This is the parent process,with ID 1814
The child process is 1815 
```

意思是孩子先执行程序！！！当我`\n`在每个语句的末尾放置时，`printf`输出是正确的！！！

我已经在 Fedora v12 和 rhel 5 发行版上试过了。`\n`和`fork()`操作之间有什么逻辑关系吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T15:38:04.490

问题是输出是行缓冲的，在您输出`\n`或显式调用标准输出之前，它不会真正刷新到您的屏幕`fflush`上。（也就是说，不能保证哪个进程在输出内容时会更快）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T15:38:11.230

`stdout`通常是行缓冲。所以要打印的文本在接收到`'\n'`.

哪个进程首先写入由操作系统不确定地处理。

打印输出而不需要通过`'\n'`using触发它`strerr`是一种选择，因为它通常是无缓冲的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T07:15:37.427

我的经验是，使用 stderr 作为 fprintf(stderr,......) 似乎总是写出无缓冲的输出。在段错误停止执行之前，我能够打印一行的内容。用 stderr 再试一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-25T14:00:05.850

您可以使用：

```
setbuf(stdout, NULL) 
```

在标准输出流中设置无缓冲输出。

# c++ - 如何解决错误 LNK2019：无法解析的外部符号

> ID：13332632
> 
> 赞同：1
> 
> 时间：2012-11-11T15:35:44.340
> 
> 标签：c++, opencv, externals

这么小的程序让我抓狂。我总是收到以下错误消息：

```
Error   1   error LNK2019: unresolved external symbol "public: class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __thiscall ErstesPraktikum::createNameString(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,int)" (?createNameString@ErstesPraktikum@@QAE?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@V23@00H@Z) referenced in function _main    Praktikum_gra.obj   GRA
Error   2   fatal error LNK1120: 1 unresolved externals C:\Users\xxx\Documents\Visual Studio 2008\Projects\GRA\Debug\GRA.exe    GRA 
```

这是我的程序，其中包含*ErstesPraktikum*和*Praktikum_gra*类以及相应的头文件。

我只想使用*Praktikum_gra 类*来调用*ErstesPraktikum*类的方法。我花了几个小时解决这个错误，但没有成功。这是编程错误还是配置问题？我最后的希望是你们中的某个人可以给我一个提示......

注意：*String*只是openCV的*std::string的包装器。*

**ErstesPraktikum.h**

```
#include <opencv2\core\core.hpp>

using namespace std;
using namespace cv;

class ErstesPraktikum
{
    private:
        String convertInteger(int);

    public:
        String createNameString(String, String, String, int);
        void readImage(String, Mat *);
        void extractObjects(int, Mat *, Mat *);
}; 
```

**ErstesPraktikum.cpp**

```
#include <opencv2\core\core.hpp>
#include <opencv2\highgui\highgui.hpp>
#include <opencv2\imgproc\imgproc.hpp>
#include <fstream>

using namespace std;
using namespace cv;

String convertInteger(int value) 
{
    stringstream ss;
    ss << value;
    return ss.str();
}

String createNameString(String path, String fileName, String fileExtension, int buildNumber)
{
    String pathString = path.append(fileName);
    pathString = pathString.append(".");
    pathString = pathString.append(convertInteger(buildNumber));
    pathString = pathString.append(".");
    pathString = pathString.append(fileExtension);

    return pathString;
}

void readImage(String nameString, Mat * image) 
{
   double mn = 0, mx = 0;
   image = &cv::Mat(cv::Size(512, 512), IPL_DEPTH_8U, 1);
   unsigned short *data;
   data = (unsigned short *)image->data;
   FILE *file;
   file = fopen(nameString.c_str(), "rb");

   fseek(file, 1340, SEEK_SET);
   fread(data, sizeof(unsigned short)*512*512, 1, file);
   fclose(file);

   //cv::cvSmooth(Image,Image);

   //cv::minMaxLoc(image, &mn, &mx, NULL, NULL, 0);
   //cv::convertScaleAbs(image, *target, 255/mx, -mn*255/mx);
}

void extractObjects(int threshold, Mat * img, Mat * binImg) 
{

} 
```

**Praktikum_gra.h**

```
class Praktikum_gra
{
    public:
        int main(void);
} 
```

**Praktikum_gra.cpp**

```
#include "ErstesPraktikum.h"

using namespace std;
using namespace cv;

    int main(void)
    { 
        String path("C:\\Users\\xxx\\xxx\\xxx\\GRA P1\\Head_M\\");
        String fileName("vhm");
        String fileExtension("dcm");
        ErstesPraktikum prak;

        for(int i = 1001; i <= 1245; i++) 
        {
            String nameString = prak.createNameString(path, fileName, fileExtension, i); // this line is the cause of the error message, but why ?
        }

        return 0;
    } 
```

我已经尝试为所有方法添加类前缀，例如：

```
String ErstesPraktikum::createNameString(String path, String fileName, String fileExtension, int buildNumber)
{
    // [...]
} 
```

但这会引发另一条错误消息：

```
Error   1   error C2653: 'ErstesPraktikum' : is not a class or namespace name   c:\users\xxx\documents\visual studio 2008\projects\gra\gra_u1\erstespraktikum.cpp   17  GRA 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:42:30.253

你必须

```
#include "ErstesPraktikum.h" 
```

在`ErstesPrakticum.cpp`. *然后*，您需要`ErstesPrakticum::`在实现中使用。

```
String ErstesPraktikum::createNameString( .... ) { .... } 
```

等等。

# ibm-mq - 使用 Java 一次浏览来自 WebSphere MQ 的所有消息

> ID：13332636
> 
> 赞同：4
> 
> 时间：2012-11-11T15:35:55.057
> 
> 标签：ibm-mq

我们如何使用 java 在一个 API 调用中浏览 WebSphere MQ 队列中的所有消息？

这是我正在使用的代码。在这里，我使用此代码`for`循环，直到达到 q 深度。

```
 MQGetMessageOptions gmo=new MQGetMessageOptions();
    gmo.options = MQC.MQGMO_WAIT | MQC.MQGMO_BROWSE_NEXT ;
    //System.out.println("Status: "+i);
    MQMessage out=new MQMessage(); 
    out.format =MQC.MQFMT_XMIT_Q_HEADER;//MQC.MQFMT_REF_MSG_HEADER; 
    mqCon.getQue().get(out,gmo);
    System.out.print(i); 
```

如何在不使用`for`循环的情况下获取所有消息？浏览 10,000 条消息需要很长时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:56:15.293

*如何在不使用 for 循环的情况下获取所有消息？*

使用`while`循环。抱歉，无法抗拒对此的略带尖刻的回答。WMQ 没有类似于 SQL`select`语句的 API 调用。消息传递和数据库具有一些共同特征，但满足根本不同的需求。

*浏览 10,000 条消息需要很长时间。*

看看性能支持包。它们发布在[SupportPacs 主页上](http://ibm.co/SupptPacs)，名称以 MP 开头。找到适合您的平台和 MQ 版本的那个，它将列出放置和获取消息的不同场景以及性能调整建议。

我还会问为什么一个普通的应用程序需要浏览 10,000 条消息。QMgr 将根据 MsgID、Correlation ID 或属性为您选择消息，这比浏览所有消息以让应用程序找到感兴趣的消息*要快得多。*有时人们需要浏览队列中的所有消息以归档队列或调试问题，但这是例外而不是规则。如果生产应用程序定期浏览队列中的所有消息，则队列可能被不恰当地用作数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:42:27.003

如果您只想浏览消息（而不是检索它们），您可以使用 javax.jms.QueueBrowser。挺快的...

```
import javax.jms.*   
...        
public ArrayList<Message> browse() {
...
QueueBrowser queueBrowser = queueSession.createBrowser((javax.jms.Queue) lookupQueue());

Enumeration enums = queueBrowser.getEnumeration();

while (enums.hasMoreElements()) {

            Object objMsg = enums.nextElement();
            if (objMsg instanceof TextMessage) {
                TextMessage message = (TextMessage) objMsg;

                Log4j.trace("Text message: " + i + ". MSG:" + message.getText() + " MSG id:"
                        + message.getJMSMessageID() + " MSG dest:" + message.getJMSDestination());

            } else if (objMsg instanceof ObjectMessage) {

                ObjectMessage message = (ObjectMessage) objMsg;

                Log4j.trace("Object Message: " + i + ". MSG" + " MSG id:" + message.getJMSMessageID()
                        + " MSG dest:" + message.getJMSDestination());

            }
        }
}
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T19:08:45.140

*如何在不使用 for 循环的情况下获取所有消息？*

```
MQGetMessageOptions getOptions = new MQGetMessageOptions();
getOptions.options = MQC.MQGMO_BROWSE_NEXT + MQC.MQGMO_NO_WAIT + MQC.MQGMO_FAIL_IF_QUIESCING;
MQMessage message = new MQMessage();
byte[] b = null;
while(true)
{
   try
   {
      queue.get(message, getOptions);
      b = new byte[message.getMessageLength()];
      message.readFully(b);
      System.out.println(new String(b));
      message.clearMessage();
   }
   catch (IOException e)
   {
      System.out.println("IOException: " + e.getMessage());
      break;
   }
   catch (MQException e)
   {
      if (e.completionCode == 2 && e.reasonCode == MQException.MQRC_NO_MSG_AVAILABLE)
        System.out.println("All messages read.");

      else
        System.out.println("MQException: Completion Code = " + e.completionCode + " : Reason Code = " + e.reasonCode);
      break;
   }
} 
```

我在这里发布了许多 Java/MQ 示例：http: [//www.capitalware.biz/mq_code_java.html](http://www.capitalware.biz/mq_code_java.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T06:22:43.153

刚刚注意到您正在使用的消息格式（out.Format）。MQFMT_XMIT_Q_HEADER 用于发送到传输队列的消息。传输队列中的消息通常不会被应用程序读取。MQ 使用传输队列将消息从一个队列管理器发送到 MQ 网络中的另一个队列管理器。我希望您没有浏览传输队列中的消息。

对于应用程序，消息格式通常取决于接收应用程序。例如，如果接收应用程序基于 CICS，则格式为 MQFMT_CICS，对于 IMS，格式为 MQFMT_IMS。如果需要文本/字符串类型的数据，那么您可以使用 MQFMT_STRING。对于使用 PCF 消息管理 MQ，格式可以是 MQFMT_PCF。

# android - 完成一个活动，从一个类中获取字符串类型的结果并将该结果用于另一个活动

> ID：13332640
> 
> 赞同：2
> 
> 时间：2012-11-11T15:36:25.303
> 
> 标签：android

我是android环境的新手，开始了一个软件开发项目，所以我的知识太少了。我需要详细的帮助。

问题详情：

项目在来自 github Robert m.theis 的 ANDROID OCR 代码源上

目前它的结果是 - 当我拍摄任何书面文本的图像时，它使用 tesseract 引擎作为文本检索非常精确的输出并在互联网上搜索。

我的工作是 - 使用文本字符串（数字）并致电电话接线员。我的项目名称是自动移动卡充值系统。

所以我从名为 OcrResult.java 的方法 getText() 类中获取结果文本并放入我自己的活动中。但我不知道为什么这在真实设备中不起作用。

它构建，在模拟器中运行，但在真实设备中至少它应该显示消息！但事实并非如此。

我还在 manifest.xml 文件中添加了活动活动 android:name="edu.sfsu.cs.orange.ocr.call.CallManager"

在应用程序使用权限 android:name="android.permission.CALL_PHONE"

这里我的代码是

```
package edu.sfsu.cs.orange.ocr.call;
import edu.sfsu.cs.orange.ocr.OcrResult;
import edu.sfsu.cs.orange.ocr.CaptureActivity;
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.SurfaceHolder;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.Toast;

public class CallManager extends Activity
 {

  public static final String preString = "*111*";
  public static final String postString = "#";

  //to store retrieved digits
  String finalString;

  //to get text result from ocr result
  OcrResult getStringResult = new OcrResult();
  String middleString  = getStringResult.getText();

  //if it fails to scan desired digit,call the process again
  CaptureActivity tryProcessAgain = new CaptureActivity();

  public void onCreate(Bundle savedInstanceState) 
  {
      super.onCreate(savedInstanceState);
  }

  public void setString(String  x)
    {
      middleString = x;
    }

  public String getString( String toBeInserted)
    {

      if(toBeInserted.length() == 16)
       {

         int counter = 0;
         char [] insertHere  = new char[16];

         for(int verifier = 0; verifier < 16; verifier ++)
          {
            insertHere[verifier] = toBeInserted.charAt(verifier);
            if(!Character.isDigit(insertHere[verifier]))
                 {
                   break;
                 }
            counter ++;
          }

         if(counter == 16)
          {

            finalString = preString + toBeInserted + postString;
            return finalString;
          }

         else
          {
           // @SuppressWarnings("unused")
            //Toast toast = Toast.makeText(this, " number scan invalid.....OCR failed. Please try again.", Toast.LENGTH_SHORT);
            //toast.show();
            return middleString;
          }
       }

         else
         {
            //@SuppressWarnings("unused")
            //Toast toast = Toast.makeText(this, " number scannin invalid...OCR failed. Please try again.", Toast.LENGTH_SHORT);
            //toast.show();
           return middleString;
         }
    }

  public void CallToOperator(String callMe)
  {
      Toast toast = Toast.makeText(this,finalString,Toast.LENGTH_SHORT);
      toast.show();
      //Toast toast1 = Toast.makeText(this,middleString,Toast.LENGTH_SHORT);
      //toast1.show();

      if(callMe == finalString)
        {
          try 
          {
            startActivity(new Intent(Intent.ACTION_CALL, Uri.parse("tel:" + finalString)));
          }
          catch (Exception e) 
          {
            e.printStackTrace();
          }
        }

        else
        {
            tryProcessAgain.onShutterButtonPressContinuous();
        }

  }

 } 
```

# vector - GML 和 GeoJSON 矢量图层无法在 Firefox 和 Chrome 中显示

> ID：13332654
> 
> 赞同：1
> 
> 时间：2012-11-11T15:37:56.597
> 
> 标签：vector, openlayers, geojson, gml

我有以下代码。它在 IE 中完美运行（已加载 GML 和 GeoJSON 矢量图层），但在 Firefox 和 Chrome 中无法正常运行，没有发现任何错误。请帮我解决这个问题。

这是带有GML矢量图层的代码（我只是在Geoserver中使用了内置层，因此您无需任何修改即可下载并测试它）：

```
<!DOCTYPE html>
<html>
<head>
<title>Creating a simple map</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- Include OpenLayers library -->
<script type="text/javascript" src="http://openlayers.org/api/2.11/OpenLayers.js"></script>
<style>
    html, body {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
    }
</style>
<!-- The magic comes here -->
<script type="text/javascript">
    var map;
    function init() {
        var bounds = new OpenLayers.Bounds(
            -124.73142200000001, 24.955967,
            -66.969849, 49.371735
        );
        var options = {
            controls: [],
            maxExtent: bounds,
            maxResolution: 0.22563114453125,
            projection: "EPSG:4326",
            units: 'degrees'
        };

        map = new OpenLayers.Map("ch3_wfs",options);

        var baseLayer = new OpenLayers.Layer.WMS("Basic","http://localhost:8080/geoserver/wms",
        {
            layers: "topp:states",
        });    
        map.addLayer(baseLayer);

        var statesLayer = new OpenLayers.Layer.Vector("States", {
            protocol: new OpenLayers.Protocol.HTTP({
                url: "http://localhost:8080/geoserver/topp/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=topp:states&maxFeatures=50",
                format: new OpenLayers.Format.GML()
            }),
            strategies: [new OpenLayers.Strategy.Fixed()],
        });

        map.addLayer(statesLayer);

        map.addControl(new OpenLayers.Control.LayerSwitcher());
        map.setCenter(new OpenLayers.LonLat(0,0), 2);
        map.zoomToMaxExtent();

    }

</script>
</head>
<body onload="init()">
    <div id="ch3_wfs" style="width: 100%; height: 100%;"></div><br>
</body>
</html> 
```

这是带有 GeoJSON 矢量图层的代码（我只是在 Geoserver 中使用了内置层，因此您无需任何修改即可下载并测试它）：

```
<!DOCTYPE html>
<html>
<head>
<title>Creating a simple map</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- Include OpenLayers library -->
<script type="text/javascript" src="http://openlayers.org/api/2.11/OpenLayers.js"></script>
<style>
    html, body {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
    }
</style>
<!-- The magic comes here -->
<script type="text/javascript">
    var map;
    function init() {
        var bounds = new OpenLayers.Bounds(
            -124.73142200000001, 24.955967,
            -66.969849, 49.371735
        );
        var options = {
            controls: [],
            maxExtent: bounds,
            maxResolution: 0.22563114453125,
            projection: "EPSG:4326",
            units: 'degrees'
        };

        map = new OpenLayers.Map("ch3_wfs",options);

        var baseLayer = new OpenLayers.Layer.WMS("Basic","http://localhost:8080/geoserver/wms",
        {
            layers: "topp:states",

        });    
        map.addLayer(baseLayer);

        var statesLayer = new OpenLayers.Layer.Vector("States", {
            protocol: new OpenLayers.Protocol.HTTP({
                url: "http://localhost:8080/geoserver/topp/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=topp:states&maxFeatures=50&outputFormat=json",
                format: new OpenLayers.Format.GeoJSON()
            }),
            strategies: [new OpenLayers.Strategy.Fixed()],
        });
        map.addLayer(statesLayer);

        map.addControl(new OpenLayers.Control.LayerSwitcher());
        map.setCenter(new OpenLayers.LonLat(0,0), 2);
        map.zoomToMaxExtent();
    }

</script>
</head>
<body onload="init()">
    <div id="ch3_wfs" style="width: 100%; height: 100%;"></div><br>
</body>
</html> 
```

# javascript - Javascript 只能内联工作

> ID：13332659
> 
> 赞同：0
> 
> 时间：2012-11-11T15:38:32.443
> 
> 标签：javascript, asp.net

我有一个问题，我的 javascript 不能在单独的文件中工作，但它可以内联工作。

这是我的 javascript 的工作代码。这是在 asp.net 4.0 中。

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="FrontEnd.master.cs"   Inherits="pigninja.FrontEnd" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<script type="text/javascript">
    function ShowItem(itemID) {
        document.getElementById(itemID).style.visiblity = "visible";
    }

    function HideItem(itemID) {
        document.getElementById(itemID).style.visiblity = "hidden";
    }
</script>
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title>Pigninja Paradox</title>
    <link href="../Styles/Styles.css" rel="Stylesheet" type="text/css" />
</head>
<body>
    <form id="form1" runat="server">
    <div id="pageWrapper">
        <div id="header">
        </div>
        <div id="navigation">
            <div id="menu">
                <ul>
                    <li><a href="../Default.aspx">Home</a></li>
                    <li><a href="../About.aspx">About Me</a>
                        <div id="submenu">
                            <ul>
                                <li onmouseout="HideItem('submenu');" onmouseover="ShowItem('submenu');"><a href="1983.aspx">
                                    1983</a></li>
                                <li><a href="1988.aspx">1988</a></li>
                                <li><a href="1990s.aspx">1990's</a></li>
                                <li><a href="2000.aspx">2000</a></li>
                                <li><a href="present.aspx">Present</a></li>
                            </ul>
                        </div>
                    </li>
                    <li><a href="../Programming.aspx">Programming</a></li>
                    <li><a href="../Rants.aspx">Rants</a></li>
                </ul>
            </div>
        </div>
        <div id="content">
            <asp:ContentPlaceHolder ID="Content" runat="server">
            </asp:ContentPlaceHolder>
        </div>
        <div id="footer">
            <p>
                I'd rather be an outlaw then to fall to Babylon law</p>
        </div>
    </div>
    </form>
</body>
</html> 
```

问题是一旦我将其更改为

```
<script language="javascript" type="text/javascript" src="../scripts/navBarScript.js">  </script> 
```

我的代码不再有效，我终其一生都无法弄清楚原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T15:42:09.913

确保你的脚本的 src 路径是正确的，你总是可以这样设置它

```
src="/scripts/navBarScript.js" 
```

从 / 开始从基础引用，没有理由不工作

此外，将外部脚本标签放在头部内或就在结束正文标签之前

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T04:39:25.067

我不确定为什么会修复它，但我最终将脚本更改为

```
function ShowItem(itemID){
document.getElementById(itemID).style.display = "block";
}

function HideItem(itemID){
document.getElementById(itemID).style.display = "none";
} 
```

在这些更改之后，我的代码按预期执行。我不知道如何或为什么。但这解决了我的问题。

# linux - 如何在 Linux 中使用 grep 获取子字符串？

> ID：13332660
> 
> 赞同：0
> 
> 时间：2012-11-11T15:39:13.707
> 
> 标签：linux, grep

我有一个字符串，如下所示：

> {"projects":{"1633045839405":
> {"name":"goal2","created":"2012-11-10T19:10:06Z","modified":"2012-11-10T19:10:06Z" ,"customMetadata":{}},"1976708868731":{"name":"goal1","created":"2012-11-11T11:35:12Z","modified":"2012-11-11T11:35 :12Z","customMetadata":{}}}}

我想使用 grep 来获取子字符串 1633045839405。

我怎么能用 grep 做到这一点？
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:46:07.730

您可能希望使用 AWK 或 Perl 而不是 grep 进行此类操作。

例如，在 AWK 中，您可以执行以下操作：

```
awk -F\" '/ *regular expression here* / {print $4}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T16:51:59.647

如果数据是结构化的（就像在您的情况下，它是 json），那么使用正则表达式只会让您的生活更加艰难。使用具有解析器的脚本语言，例如 python 或 ruby​​。

# java - 更新时出现休眠错误

> ID：13332661
> 
> 赞同：2
> 
> 时间：2012-11-11T15:39:24.927
> 
> 标签：java, sql, oracle, hibernate

> **可能重复：**
> [使用休眠查询：冒号被视为参数/转义冒号](https://stackoverflow.com/questions/7475876/using-hibernate-query-colon-gets-treated-as-parameter-escaping-colon)

我们正在尝试编写本机查询。当我们尝试更新包含 的特定列值时，`": "`会出现异常。

这是生成的查询

```
 UPDATE MY_TABLE SET DESCRIPTION = "Test 01 : ABC",LAST_UPDATE_TS =
  CURRENT_TIMESTAMP ,LAST_UPDATE_USER_ID = 111 WHERE MY_ID =123 
```

我认为问题在于DESCRIPTION数据，其中包含`': '`

我们得到这个错误

```
 nested exception is org.hibernate.QueryException:Space is not allowed after 
 parameter prefix ':' ' UPDATE 
 MY_TABLE SET DESCRIPTION = "MY Test 01 : ABC",LAST_UPDATE_TS =
 CURRENT_TIMESTAMP, LAST_UPDATE_USER_ID = 111 WHERE MY_ID =123' 
```

这是负责查询的 Java 代码：

```
 StringBuffer strQry = new StringBuffer(" UPDATE MY_TABLE SET ");

          if(myForm.getDescription() != null){
                 if(flag == 1){
                       strQry.append(",");
                 }
                 strQry.append(" DESCRIPTION = \"" + myForm.getDescription().trim()+ "\" ");
                 flag = 1; 
```

知道为什么会发生此错误以及我们如何解决它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:41:45.150

```
UPDATE MY_TABLE SET DESCRIPTION = "Test 01 \\: ABC",LAST_UPDATE_TS =
  CURRENT_TIMESTAMP ,LAST_UPDATE_USER_ID = 111 WHERE MY_ID =123 
```

添加正斜杠。

冒号用于指定命名参数，因此您必须转义它（然后转义转义）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T17:39:30.673

我认为您的情况出现问题是因为 Hibernate 认为您正在使用命名参数（符号“：”是用于此的特殊关键字）。尝试将描述、last_update_user_id 和 my_id 定义为查询的命名参数。所以你的代码看起来像：

```
String queryText = "UPDATE MY_TABLE SET DESCRIPTION = :description,LAST_UPDATE_TS =
  CURRENT_TIMESTAMP, LAST_UPDATE_USER_ID = :lastUpdateUserID WHERE MY_ID = :myId";
Query query = session.createSQLQuery(queryText);
query.setParameter("description", yourDescription);
query.setParameter("lastUpdateUserID", yourLastUpdateUserID);
query.setParameter("myId", yourMyId);
... 
```

在我的示例中，我在一个地方定义了整个查询，但您可以通过代码片段中的部分来构建它：

```
 StringBuffer strQry = new StringBuffer(" UPDATE MY_TABLE SET ");

 if(myForm.getDescription() != null){
     if(flag == 1){
           strQry.append(",");
     }
     strQry.append(" DESCRIPTION = :description ");
     flag = 1;
 } 
... 
```

编辑

在您的条件下，在查询中使用数字参数 (?1) 可能会更好。例子：

```
 List<Object> parametersList = new LinkedList<Object>();
 int parameterPosition = 1;

 StringBuffer strQry = new StringBuffer(" UPDATE MY_TABLE SET ");

 if(myForm.getDescription() != null){
     if(parameterPosition > 1){
           strQry.append(",");
     }
     strQry.append(" DESCRIPTION = ?");
     strQry.append(parameterPosition);
     strQry.append(" ");

     parametersList.add(myForm.getDescription().trim());
     parameterPosition ++;
 } 
...

int position = 1;
for (Object parameter: parametersList) {
     query.setParameter(position, parameter);
     position++;
} 
```

至少有点像这样）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T17:27:52.430

你需要参数化你的sql。":" 是 hibernate 用来检测命名参数的特殊字符。因此，hibernate 在尝试解析查询时会引发异常。
您可以参数化如下所示的 sql。

```
 StringBuffer strQry = new StringBuffer(" UPDATE MY_TABLE SET ");

          if(myForm.getDescription() != null){
                 if(flag == 1){
                       strQry.append(",");
                 }
                 strQry.append(" DESCRIPTION = :description");
                 flag = 1;
....

   if(myForm.getDescription() != null){
        session.setString("description", description)
   } 
```

参数化查询很重要，还有两个原因 -

1.  避免sql注入。
2.  由于您的 sql 的预编译，性能提升。

# php - Phalcon 中频繁出现致命错误（ORM 需要依赖注入器）

> ID：13332663
> 
> 赞同：-1
> 
> 时间：2012-11-11T15:40:03.267
> 
> 标签：php, phalcon

以下致命错误的来源是什么？，我对此一无所知，并且经常发生：

```
<b>Fatal error</b>:  Uncaught exception 'Phalcon\Mvc\Model\Exception' with message 'A dependency injector container is required to obtain the services related to the ORM' in [no active file]:0
Stack trace:
#0 [internal function]: Phalcon\Mvc\Model-&gt;serialize()
#1 {main}
  thrown in <b>[no active file]</b> on line <b>0</b><br /> 
```

法尔康 0.6

更新：我的项目是 invo 示例项目的一些修改版本。目前我有它的用户模型。我只修改了 INVO 项目的 ACL。如何更详细地记录 Phalcon 堆栈跟踪。

```
 $di->set('db', function() use ($config) {
        return new \Phalcon\Db\Adapter\Pdo\Mysql(array(
            "host" => $config->database->host,
            "username" => $config->database->username,
            "password" => $config->database->password,
            "dbname" => $config->database->name
        ));
    }); 
```

由于我网站的 MVC 结构，我无法轻松提供生成此错误的示例代码。当此错误发生在第一页时，它将显示在所有后续页面中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:07:23.693

您是否像这样设置了模型管理器和元数据管理器：

```
 // Set Models manager
    $this->_di->set(
        'modelsManager',
        function()
        {
            return new \Phalcon\Mvc\Model\Manager();
        }
    );

    // Set Models metadata
    $this->_di->set(
        'modelsMetadata',
        function()
        {
            return new \Phalcon\Mvc\Model\Metadata\Memory();
        }
    ); 
```

# android - Kindly help me with error com.maju.yourApp has stopped unexpectidly

> ID：13332665
> 
> 赞同：1
> 
> 时间：2012-11-11T15:40:35.480
> 
> 标签：android, telephony, mobile-application, phone-call

I am making an application that provides the facility of a dialer. I have created a keypad and provided functionality of a keypad behind it. It should detect incoming call, dial a call using telephonyManager etc. But when I run the code it gives the following error:

Sorry, com.maju.yourApp has stopped unexpectidly

I don't have any errors in the code and I don't have any idea about the reason. Can someone please identify the cause of the problem? The code I am trying is as follows:

public class MainActivity extends Activity {

```
EditText ed =(EditText) findViewById(R.id.editText1);
String number;
Intent intent;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    PhoneCallListener listenerObj = new PhoneCallListener();
    TelephonyManager tm = (TelephonyManager) this.getSystemService(Context.TELEPHONY_SERVICE);
    tm.listen(listenerObj,PhoneStateListener.LISTEN_CALL_STATE);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
}

public void one_btn(View v)
{
    number = number+"1";
    ed.setText(number);
}

public void two_btn(View v)
{
    number = number+"2";
    ed.setText(number);
}

public void three_btn(View v)
{
    number = number+"3";
    ed.setText(number);
}

public void four_btn(View v)
{
    number = number+"4";
    ed.setText(number);
}

public void five_btn(View v)
{
    number = number+"5";
    ed.setText(number);
}

public void six_btn(View v)
{
    number = number+"6";
    ed.setText(number);
}

public void seven_btn(View v)
{
    number = number+"7";
    ed.setText(number);
}

public void eight_btn(View v)
{
    number = number+"8";
    ed.setText(number);
}

public void nine_btn(View v)
{
    number = number+"9";
    ed.setText(number);
}

public void esterisk_btn(View v)
{
    number = number+"*";
    ed.setText(number);
}

public void zero_btn(View v)
{
    number = number+"0";
    ed.setText(number);
}

public void hash_btn(View v)
{
    number = number+"#";
    ed.setText(number);
}

public void call_btn(View v)
{
    intent = new Intent(Intent.ACTION_CALL);
    intent.setData(Uri.parse("tel:" + number));
    startActivity(intent);
}

public void back_btn(View v)
{
    if(number.length() > 0)
    {
        String temp = "";

        for(int i=0; i<number.length() - 1; i++)
        {
            temp += number.charAt(i);
        }

        number = temp;
    }
}

private class PhoneCallListener extends PhoneStateListener
{
    long start;
    long end;
    Context context = getApplicationContext();
    Toast toast;
    boolean flag = false;

    public void onCallStateChanged(int state, String incomingNumber)
    {
        if(TelephonyManager.CALL_STATE_OFFHOOK == state)
        {
            start = System.currentTimeMillis();
            Log.i("Log" , "Phone State Calling");
            toast = Toast.makeText(context, "Phone State Calling" , Toast.LENGTH_LONG);
            toast.show();
            flag = true;
        }

        else if(TelephonyManager.CALL_STATE_IDLE == state)
        {
            Log.i("Log" , "Phone State Idle");
            toast = Toast.makeText(context, "Phon State Idle", Toast.LENGTH_LONG);
            toast.show();

            if(flag)
            {
                end = System.currentTimeMillis();
                long duration = (end - start)/1000;
                Log.i("Log" , "Call Ended, Duration: "+ duration);

                toast = Toast.makeText(context, "Call Ended\n Duration: "+ duration, Toast.LENGTH_LONG);
                toast.show();

                flag = false;
            }
        }

        else if(TelephonyManager.CALL_STATE_RINGING == state)
        {
            Log.i("Log", "Incoming Call From " + incomingNumber);
            toast = Toast.makeText(context, "Incoming Call: "+ incomingNumber, Toast.LENGTH_LONG);
            toast.show();
        }

    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:47:41.167

Your problem is here:

```
EditText ed =(EditText) findViewById(R.id.editText1); 
```

You cannot use findViewById until after you use setContentView.

Move this line into onCreate, after setContentView().

In he future, don't think "I don't have any errors in the code". What you actually mean is that the compiler doesn't show you any errors but you do have (at least) one error. It's an important point because no compiler errors is just the first step in working out if you have any errors. Please also post the logcat stack trace as a matter of habit when asking about crashes. I bet yours shows a "null pointer exception".

# c# - 正确使用 .NET 并发集合

> ID：13332666
> 
> 赞同：3
> 
> 时间：2012-11-11T15:40:55.840
> 
> 标签：c#, .net, multithreading, .net-4.0, concurrency

在我尝试创建并发`Socket`操作时，我创建了以下代码：

```
ConcurrentQueue<byte[]> messageQueue;
ManualResetEvent resetEvent;
Thread outThread;   // -> new Thread(BeginSending);

public void BeginSending() // invoked by outThread
{
    while (true)
    {
        resetEvent.WaitOne();
        while (messageQueue.Count > 0)
        {
            byte[] msg;
            messageQueue.TryDequeue(out msg);
            // send msg via socket
        }
        resetEvent.Reset();
    }
}

public void QueueMessage(byte[] msg) // invoked by the main thread
{
    messageQueue.Enqueue(msg);
    resetEvent.Set();
} 
```

在不同的线程迭代/出队时添加项目`ConcurrentQueue`是一件危险的事情吗？

据我了解，许多同步集合只是具有单独的同步方法，但对于`concurrentQueue`类似的集合来说也是如此吗？
( `ConcurrentBag`, `ConcurrentDictionary`, `ConcurrentStack`)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T15:46:18.167

`ConcurrentQueue`只要您不改变存储为其元素的数组，它本身就可以。

但是，您的使用模式`ManualResetEvent`表明有一个更好的解决方案：如果您使用[`BlockingCollection<T>`](http://msdn.microsoft.com/en-us/library/dd267312.aspx)，您将能够避免进行手动同步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T15:43:00.020

> 在另一个线程迭代/出列时将项目添加到 ConcurrentQueue 是一件危险的事情吗？

不，这是安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T19:14:31.933

ConcurrentQueue 很好，ManualResetEvent 不是：

```
public void BeginSending() // invoked by outThread
{
    while (true)
    {
        resetEvent.WaitOne();
        while (messageQueue.Count > 0)
        {
            byte[] msg;
            messageQueue.TryDequeue(out msg);
            // send msg via socket
        }

    // context change
    messageQueue.Enqueue(msg);
    resetEvent.Set();
    // context change

        resetEvent.Reset();
    }
} 
```

这样的一系列事件将导致排队的消息被忽略。正如其他海报所建议的那样，使用 BlockingCollection，或者使用信号量进行信号/等待。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T15:46:34.750

并发集合被设计为线程安全的。通过自己实现它们，使用它们可以为您节省很多麻烦。

请注意，集合本身是同步的，而不是其中的数据。在不关注其他线程的情况下更新集合内的对象可能会带来竞争条件。

与类的任何用法一样，如果您了解集合的使用和用例，它会有所帮助

# asp.net-mvc - MVC下ServiceStack新增api路由

> ID：13332670
> 
> 赞同：1
> 
> 时间：2012-11-11T15:41:38.833
> 
> 标签：asp.net-mvc, servicestack

我有一个 MVC 项目，ServiceStack 安装在 /api 上。请求 DTO 用 Route 属性修饰。在 AppHost 配置中，我设置了 ServiceStackHandlerFactoryPath = "api"。

我的假设是 DTO 上的路由不需要路径前缀，即我可以使用 [Route("thing/{id}/blah")] 而不是 [Route("api/thing/{id}/blah ")]，虽然我只能让后者工作。

这是预期的结果还是疏忽？

# javascript - 单击 2 次后停止 jQuery 函数

> ID：13332683
> 
> 赞同：-2
> 
> 时间：2012-11-11T15:42:24.687
> 
> 标签：javascript, jquery, jquery-ui

我正在开发一个函数来获取图像的选定点坐标并将其保存到变量中。我需要的是选择两个点，然后执行其他功能。下面的这段代码可以很好地获取点坐标，但是只对两个点执行这个函数？谢谢你的建议。

```
$(".bg_image").click(function(e) {
                    var offset = $(this).offset();
                    var relativeX = (e.pageX - offset.left);
                    var relativeY = (e.pageY - offset.top);

                    $('<div>', {
                        'class':'point',
                        'css': {
                            'position': 'absolute',
                            'left':     relativeX +'px',
                            'top':      relativeY +'px',
                            'width':    '3px',
                            'height':   '3px',
                            'background-color': '#fff'
                        }
                    })
                    .appendTo('#output');
                    console.log("X: " + relativeX + "  Y: " + relativeY);

                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:44:32.747

您需要创建一个变量来计算用户在图像上执行的点击次数。

```
var count = 0;

$(".bg_image").click(function(e) {
  count++;
  if ( count <= 2 )
  {
    //execute your code
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T15:44:58.097

像这样添加一个全局变量：

```
var clickCount = 0; 
```

每次`.click()`调用时，递增计数器。并检查值：

```
$(".bg_image").click(function(e) {
    clickCount++;
    if (clickCount > 2)
        return false;
    ...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T15:59:39.617

获取点击次数是一种选择。另一个考虑是使用数组并获取数组的长度。

```
var coordinates = [];

$(".bg_image").click(function(e) {

  coordinates.push([relativeX,relativeY]);

  // do some operation to make sure you didn't add the same coordinate twice

  if ( coordinates.length <= 2 )
  {
     // execute your code
  }

}); 
```

缺点是它的执行速度可能会慢一些（可能没有被察觉）。

The benefit is that you are storing where you clicked, so you can use that for other parts of your code. For instance, to do analytics, or to perform distance calculations.

# javascript - 需要映射：映射扩展时获取模块超时

> ID：13332685
> 
> 赞同：0
> 
> 时间：2012-11-11T15:42:41.673
> 
> 标签：javascript, map, requirejs, amd, shim

我有一个 Mediator-Sandbox 库和一个构建在这个库之上的路由器扩展。

该库是这样构建的：

```
(function(window) {

  var MedSan = {};

  window.MedSan = MedSan;

})(this); 
```

扩展看起来像这样：

```
(function(_, Backbone, MedSan) {

  MedSan.Router = {};

})(_, Backbone, MedSan); 
```

加载扩展所需的配置如下所示：

```
require.config({

    baseUrl: "javascripts",

    shim: {
        "jquery": {
            exports: "$"
        },
        "underscore": {
            exports: "_"
        },
        "backbone": {
            deps: ['jquery', 'underscore'],
            exports: "Backbone"
        },
        "Distribution": {
            exports: "Distribution"
        },
        "Distribution.Router": {
            deps: ['underscore', 'backbone', 'Distribution'],
            exports: "Distribution"
        }
    },

    /*
    map: {
        "*": {
            "Distribution": "Distribution.Router"
        }         
    },
    */

    paths: {
        "jquery": "Vendors/jquery",
        "underscore": "Vendors/underscore",
        "backbone": "Vendors/backbone",

        "Distribution": "Distribution/Distribution",
        "Distribution.Router": "Distribution/Plugins/Router"
    }

}); 
```

我现在可以使用我的完整库：

```
require(['Distribution.Router'], function(Distribution) {}); 
```

当我取消注释地图配置时，我可以通过这种方式使用带有路由器扩展的完整加载模块：

```
require(['Distribution'], function(Distribution) {}); 
```

比我得到一个模块超时。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:24:31.680

当您映射`Distribution`到 时`Distribution.Router`，您正在创建一个循环依赖项，因为`Distribution.Router`还依赖于`Distribution`.

要解决此问题，只需添加另一行覆盖地图仅`Distribution`用于`Distribution.Router`：

```
map: {
    "*": {
        "Distribution": "Distribution.Router"
    },
    "Distribution.Router": {
        "Distribution": "Distribution"
    }
} 
```

# java - Java——如何高效存储大量String数组

> ID：13332687
> 
> 赞同：5
> 
> 时间：2012-11-11T15:42:55.850
> 
> 标签：java, csv, lua

我正在尝试使用 Java（更少的内存和尽可能快的访问）有效地加载大型 CSV 格式的文件（通常为 200-600mb）。目前，该程序正在使用字符串数组列表。此操作之前是使用 Lua 程序处理的，该程序使用每个 CSV 行的表和保存每个“行”表的表。

以下是内存差异和加载时间的示例：

*   CSV 文件 - 232mb
*   Lua - 549mb 内存 - 157 秒加载
*   Java - 1,378mb 内存 - 12 秒加载

如果我没记错的话，Lua 表中的重复项作为对实际值的引用存在。我怀疑在 Java 示例中，列表保存了每个重复值的单独副本，这可能与较大的内存使用量有关。

以下是 CSV 文件中数据的一些背景信息：

*   每个字段由一个字符串组成
*   每行中的特定字段可以包括一组字符串中的一个（例如，字段 3 可以是“红色”、“绿色”或“蓝色”）。
*   内容中有*许多*重复的字符串。

以下是加载数据可能需要的一些示例：

*   搜索所有试图与给定字符串匹配的字符串并返回匹配的字符串
*   在 GUI 表中显示匹配项（可通过字段排序）。
*   更改或替换字符串。

我的问题 - 是否有一个集合需要更少的内存来保存数据，但仍然提供轻松快速地搜索/排序数据的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:32:34.130

一种简单的解决方案。你可以有一些`HashMap`你会引用所有唯一的字符串。而在`ArrayList`您将只引用`HashMap`.

就像是 ：

```
private HashMap<String, String> hashMap = new HashMap<String, String>();

public String getUniqueString(String ns) {
   String oldValue = hashMap.get(ns);
   if (oldValue != null) { //I suppose there will be no null strings inside csv
    return oldValue;
   }        
   hashMap.put(ns, ns);
   return ns;
} 
```

简单用法：

```
List<String> s = Arrays.asList("Pera", "Zdera", "Pera", "Kobac", "Pera", "Zdera", "rus");
List<String> finS = new ArrayList<String>();
for (String er : s) {
   String ns = a.getUniqueString(er);
   finS.add(ns);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:50:01.457

为了优化你的记忆问题，我建议使用[享](http://en.wikipedia.org/wiki/Flyweight_pattern)元模式，特别是对于有很多重复的字段。

作为集合，您可以使用[TreeSet](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)或[TreeMap](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)。

如果你给你的`LineItem`类（implement和[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)`equals` ）一个好的实现，你可以优化内存使用。`hashcode`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T15:51:33.957

[工作组](http://en.wikipedia.org/wiki/Directed_acyclic_word_graph)

有向无环词图是存储词的最有效方式（无论如何最适合内存消耗）。

但这里可能有点矫枉过正，正如其他人所说，不要创建重复项，只需对同一个实例进行多次引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T15:52:31.833

也许这篇文章可以提供一些帮助：

[http://www.javamex.com/tutorials/memory/string_saving_memory.shtml](http://www.javamex.com/tutorials/memory/string_saving_memory.shtml)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T16:12:22.790

只是作为旁注。

对于您怀疑的重复字符串数据，您无需担心，因为 java 本身关心这一点，因为所有字符串都是最终的，并且所有引用都针对内存中的同一个对象。

所以不确定lua是如何完成这项工作的，但在java中它应该也很有效

# objective-c - 首先在 Xcode 中创建 plist？

> ID：13332690
> 
> 赞同：0
> 
> 时间：2012-11-11T15:43:16.680
> 
> 标签：objective-c, ios, plist

我读过关于这个的相互矛盾的观点

[http://ipgames.wordpress.com/tutorials/writeread-data-to-plist-file/](http://ipgames.wordpress.com/tutorials/writeread-data-to-plist-file/)

如果我想使用 plist 来保存我的瓦片地图对象游戏数据，我是否必须先使用 xcode 创建一个 plist？然后更新？还是我不需要这样做，我可以在游戏运行时使用代码从头开始创建它？

如果我不必先使用 xcode 创建一个，那么这样做有什么好处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:03:19.250

如果您希望在首次启动应用程序时在属性列表中包含一些默认数据，则链接中的代码很有用。

如果您不需要默认数据，则不必在 Xcode 中创建属性列表并将其包含在您的应用程序中。

```
NSString *path = ... // path to plist file in Documents directory
NSMutableDictionary *plistDict = [[NSMutableDictionary alloc] initWithContentsOfFile:path];
if (plistDict == nil) {
    // No plist present (or invalid contents), start with empty dictionary:
    plistDict = [[NSMutableDictionary alloc] init];
} 
```

现在您可以添加/修改/删除项目`plistDict`并稍后保存。

# c# - 如何使用 fromHdc 方法制作位图图像？

> ID：13332692
> 
> 赞同：0
> 
> 时间：2012-11-11T15:43:50.690
> 
> 标签：c#, image, graphics, bitmap, gdi

我想通过使用获取 DesktopWindow 句柄的方式来获取特定区域，如下面的代码。

```
 [DllImport("user32.dll")]
    static extern IntPtr GetDesktopWindow();

    [DllImport("user32.dll")]
    static extern IntPtr GetDCEx(IntPtr hwnd, IntPtr hrgn, uint flags);

    [DllImport("user32.dll")]
    static extern IntPtr ReleaseDC(IntPtr hwnd, IntPtr hdc);

    public void ScreenShot()
    {
        try
        {
            IntPtr hwnd = GetDesktopWindow();
            IntPtr hdc = GetDCEx(hwnd, IntPtr.Zero, 1027);

            Point temp = new Point(40, 40);
            Graphics g = Graphics.FromHdc(hdc);
            Bitmap bitmap = new Bitmap(mPanel.Width, mPanel.Height, g);

            g.CopyFromScreen(PointToScreen(temp) , PointToScreen(PictureBox.Location) ,  PictureBox.Size); 
```

}

这段代码确实有效，但我想获得一个由 CopyFromScreen 过程制作的复制图像。我尝试过使用 Graphics.FromImage(bitmap) 之类的代码，但是我无法获得我想要的图像......我的意思是，复制了 Image。当我使用来自 Hdc 的 Graphics 对象时，我找不到获取位图图像的方法。我必须使用 DC.... 有什么合适的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T16:07:51.007

您在这里走错了路，您不需要获取桌面句柄， CopyFromScreen 会将现在屏幕上的任何内容复制到目标图形，因此您需要从图像创建图形对象。以下代码创建屏幕左上角的 500x500 图像。

```
public static void ScreenShot()
{
    var destBitmap = new Bitmap(500, 500);
    using (var destGraph = Graphics.FromImage(destBitmap))
    {
        destGraph.CopyFromScreen(new Point(), new Point(), destBitmap.Size);
    }
    destBitmap.Save(@"c:\bla.png");
} 
```

如果你真的有 HDC，你需要使用 gdi32 中的 BitBlt：

```
[DllImport("gdi32.dll")]
public static extern bool BitBlt(IntPtr hdc, int nXDest, int nYDest, int nWidth, int nHeight, IntPtr hdcSrc, int nXSrc, int nYSrc, int dwRop); 
```

# android - Android自定义ProgressBar不旋转

> ID：13332693
> 
> 赞同：8
> 
> 时间：2012-11-11T15:43:52.880
> 
> 标签：android, animation, rotation, progress-bar

我想更改 a 的默认动画`ProgressBar`，所以我在主题中添加了自定义样式：

# 样式.xml

```
<style name="ProgressTheme" parent="@android:style/Widget.ProgressBar.Large">
    <item name="android:indeterminateDrawable">@drawable/spinner_holo_light</item>
</style> 
```

我`ProgressBar`用以下方式在我的内部调用这种风格：

# 进度条.xml

```
<ProgressBar
    android:id="@+id/loadingProgressBar"
    style="@style/ProgressTheme"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

问题在于`spinner_holo_light.xml`：

如果我使用以下内容，则在 os 3.0+ 的设备上一切正常，但在较旧的 os 版本上进度不会旋转：

# spinner_holo_light.xml

```
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:drawable="@drawable/spinner_76_inner_holo"
    android:fromDegrees="720"
    android:pivotX="50%"
    android:pivotY="50%"
    android:toDegrees="0" /> 
```

但如果我`animate-rotate`改用，动画适用于每个操作系统版本，但结果是一个非常滞后的动画。

```
<animated-rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:drawable="@drawable/spinner_76_inner_holo"
    android:fromDegrees="720"
    android:pivotX="50%"
    android:pivotY="50%"
    android:toDegrees="0" /> 
```

你怎么看待这件事？我在这里做错了吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-11T16:29:16.570

在较旧的设备上，当`android:fromDegrees`大于`android:toDegress`. `<rotate>`尝试交换值：

```
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:drawable="@drawable/spinner_76_inner_holo"
    android:fromDegrees="0"
    android:pivotX="50%"
    android:pivotY="50%"
    android:toDegrees="720" /> 
```

或者，您可以尝试将其设置为无限：

```
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:drawable="@drawable/spinner_76_inner_holo"
    android:pivotX="50%"
    android:pivotY="50%"
    android:repeatCount="infinite" /> 
```

动画在旧设备上可能会滞后。要解决此问题，请添加`android:animationResolution`到样式中：

```
<style name="ProgressTheme" parent="@android:style/Widget.ProgressBar.Large">
    <item name="android:indeterminateDrawable">@drawable/spinner_holo_light</item>
    <item name="android:animationResolution">33</item>
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T16:27:50.257

制作进度对话框的透明背景。

减少边框进度对话框。

以及自定义循环进度对话框的微调器颜色。

[http://pankajchunchun.wordpress.com/2011/09/10/customization-of-spinner-progress/](http://pankajchunchun.wordpress.com/2011/09/10/customization-of-spinner-progress/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-19T10:41:05.757

我什至无法在三星 Galaxy S Plus 上使用它

```
<item name="android:animationResolution">33</item> 
```

我在问类似于你的回答@Tomik

[预 HoneyComb 设备上的 Android 进度条旋转缓慢](https://stackoverflow.com/questions/16633319/android-progress-bar-slow-rotation-on-pre-honeycomb-devices/16633402?noredirect=1#16633402)

确定在所有预蜂窝设备上都顺利吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-20T19:57:49.780

我通过将背景 xml 自定义格式更改为 indeterminateDrawable 解决了这个问题

> 使用**android:indeterminateDrawable**除了**android:BackGround**

```
 <ProgressBar
    android:layout_centerHorizontal = "true"
    android:layout_centerVertical = "true"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:indeterminateDrawable = "@drawable/progressbar"
    android:id="@+id/progressBar"        
    android:indeterminate = "true"/> 
```

和自定义进度条 XML 代码

```
<?xml version="1.0" encoding="utf-8" ?>

 <rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromDegrees="0"
    android:pivotX="50%"
    android:pivotY="50%"
    android:toDegrees="360">

     <shape android:shape="ring" android:innerRadiusRatio="3"
        android:thicknessRatio="7" android:useLevel="false">

        <size android:width="76dip" android:height="76dip" />
           <gradient android:type="sweep" android:useLevel="false"
            android:startColor="@android:color/transparent"
            android:endColor="#00FF00"
            android:angle="0" />
    </shape>
</rotate> 
```

# openssl - 使用 openssl 创建 tsa（时间戳）证书 - 在证书中添加 extendedKeyUsage

> ID：13332694
> 
> 赞同：6
> 
> 时间：2012-11-11T15:44:12.197
> 
> 标签：openssl, certificate, timestamping

我想为我的时间戳服务创建一个 tsa 证书。

首先我创建一个根证书

```
openssl genrsa -out tsaroot.key 4096 -config openssl.cnf
openssl req -new -x509 -days 1826 -key tsaroot.key -out tsaroot.crt -config openssl.cnf 
```

然后我创建 tsa 证书

```
openssl genrsa -des3 -out tsa.key 4096 -config openssl.cnf
openssl req -new -key tsa.key -out tsa.csr -config openssl.cnf
openssl x509 -req -days 730 -in tsa.csr -CA tsaroot.crt -CAkey tsaroot.key -set_serial 01 -out tsa.crt
openssl pkcs12 -export -out tsa.p12 -inkey tsa.key -in tsa.crt -chain -CAfile tsaroot.crt 
```

在我的 openssl.cnf 文件中，我添加了以下行：

```
extendedKeyUsage = critical,timeStamping 
```

然而，创建的证书似乎不包括extendeKeyUsage（当我尝试用充气城堡阅读它时，我得到一个“证书必须有一个ExtendedKeyUsage扩展。”例外

如何生成有效的 tsa 证书（包括正确的 extendedKeyUsage 值）？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T19:17:33.280

以下工作：

创建一个文件 extKey.cnf，里面有extendedKeyUsage

```
extendedKeyUsage = critical,timeStamping 
```

创建请求时添加它：

```
openssl x509 -req -days 730 -in tsa.csr -CA tsaroot.crt -CAkey tsaroot.key -set_serial 01 -out tsa.crt -extfile extKey.cnf 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T08:20:16.313

尝试以下方法：

1.  在文件中添加一个命名部分`openssl.cnf`：

    ```
    [v3_tsa]
    extendedKeyUsage = critical,timeStamping 
    ```

2.  从 生成 TSA 证书时`tsr`，添加开关`-extensions`：

    ```
    openssl x509 -req ... -extensions v3_tsa 
    ```

# java - JSON optString 获取不到图片url

> ID：13332697
> 
> 赞同：1
> 
> 时间：2012-11-11T15:44:33.757
> 
> 标签：java, facebook, json

obj.optString("picture") 似乎没有将图片 url .jpeg 作为字符串。

```
public static List<Photo> getPictures(AuthProvider provider, String source, String type) {
List<Photo> photos = new LinkedList<Photo>();
if (provider.getProviderId() == Constants.FACEBOOK) {
    final String BASE_URL_FACEBOOK = "https://graph.facebook.com/";
    String url = BASE_URL_FACEBOOK + source + "/feed";

    try {
        Response response = provider.api(url, MethodType.GET.toString(), null, null, null);

        Log.d("AndroidAppPhotoUtil", "Status " + response.getStatus() + " returned by facebook get query " + url);
        if (response.getStatus() == 200) {
            String respStr = response.getResponseBodyAsString(Constants.ENCODING);
            JSONObject resp = new JSONObject(respStr);
            JSONArray data = resp.optJSONArray("data");
            if (data != null)
                for (int i = 0; i < data.length(); i++) {
                    JSONObject obj = data.getJSONObject(i);
                    Photo p = new Photo();

                    p.setId(obj.optString("id"));
                    p.setPicture(obj.optString("picture"));

                    if (isEmpty(type) || type.equals(obj.optString("type"))) {
                        photos.add(p);
                    }

                }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
}
return photos;  
} 
```

.

```
"id": "466138393436802_466165356767439", 
      "from": {
    "name": "Dimitri Nicolopoulos", 
    "id": "100004358376630"
      }, 
      "to": {
    "data": [
      {
        "name": "My Test Event", 
        "start_time": "2012-11-13", 
        "location": "Saewrreritvh", 
        "id": "466138393436802"
      }
    ]
      }, 
      "picture": "http://photos-a.ak.fbcdn.net/hphotos-ak-ash3/533694_123231957832083_231056016_s.jpg", 
      "link": "http://www.facebook.com/photo.php?fbid=123231957832083&set=oa.160219667456793&type=1&relevant_count=1", 
      "icon": "http://static.ak.fbcdn.net/rsrc.php/v2/yz/r/StEh3RhPvjk.gif", 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T16:28:45.313

我添加了将您的 JSON 代码放在“{”和“}”中，然后我这样做了：

```
 String respStr = "{\"id\":\"466138393436802_466165356767439\",\"from\":{\"name\":\"Dimitri Nicolopoulos\",\"id\":\"100004358376630\"},\"to\":{\"data\":[{\"name\":\"My Test Event\",\"start_time\":\"2012-11-13\",\"location\":\"Saewrreritvh\",\"id\":\"466138393436802\"}]},\"picture\":\"http://photos-a.ak.fbcdn.net/hphotos-ak-ash3/533694_123231957832083_231056016_s.jpg\",\"link\":\"http://www.facebook.com/photo.php?fbid=123231957832083&set=oa.160219667456793&type=1&relevant_count=1\",\"icon\":\"http://static.ak.fbcdn.net/rsrc.php/v2/yz/r/StEh3RhPvjk.gif\"}";
    JSONObject resp = new JSONObject(respStr);
    System.out.println(resp.get("picture")); 
```

这行得通。此外，您的数据始终为空。“数据”实际上是在“到”键下。所以你可以做

```
 String respStr = "{\"id\":\"466138393436802_466165356767439\",\"from\":{\"name\":\"Dimitri Nicolopoulos\",\"id\":\"100004358376630\"},\"to\":{\"data\":[{\"name\":\"My Test Event\",\"start_time\":\"2012-11-13\",\"location\":\"Saewrreritvh\",\"id\":\"466138393436802\"}]},\"picture\":\"http://photos-a.ak.fbcdn.net/hphotos-ak-ash3/533694_123231957832083_231056016_s.jpg\",\"link\":\"http://www.facebook.com/photo.php?fbid=123231957832083&set=oa.160219667456793&type=1&relevant_count=1\",\"icon\":\"http://static.ak.fbcdn.net/rsrc.php/v2/yz/r/StEh3RhPvjk.gif\"}";
    JSONObject resp = new JSONObject(respStr);
    JSONObject data = (JSONObject) resp.getJSONObject("to").getJSONArray("data").get(0);
    System.out.println(data); 
```

# makefile - 为 OS X 定制通用 makefile（使用 homebrew/gfortran/open-mpi）

> ID：13332700
> 
> 赞同：0
> 
> 时间：2012-11-11T15:44:59.147
> 
> 标签：makefile, homebrew, gfortran, openmpi

我正在尝试编译一段名为 DLPOLY 的科学代码（支持多核处理）。有关如何执行此操作的在线说明似乎已过时，并且生成文件仅包含大型计算集群的示例，而不是家用计算机。

说明如下：

> 通用目标模板
> 
> 未知平台：
> 
> ```
>  $(MAKE) LD="path to FORTRAN90 Linker-loaDer" \
>     LDFLAGS="appropriate flags for LD (MPI libraries)" \
>     FC="path to FORTRAN90 compiler" \
>     FCFLAGS="appropriate flags for FC (MPI include)" \
>     EX=$(EX) BINROOT=$(BINROOT) $(TYPE) 
> ```

我通过自制软件安装了 gfortran 和 open-mpi，以及 Xcode CLT。如果它更容易，我不介意使用，例如，macports。

编辑：例如我试过这个：

> ```
>  LD="ld"
>     LDFLAGS="-L/usr/local/lib"
>     FC="gfortran"
>     FCFLAGS="-I/usr/local/include/" 
> ```

但随后出现此错误：

> ```
>  'Use mpi_module' must change to 'Use mpi' in 'comms_module.f90'
> 
>    gfortran -I/usr/local/include/ kinds_f90.f90
>    Undefined symbols for architecture x86_64:
>      "_MAIN__", referenced from:
>          _main in libgfortranbegin.a(fmain.o)
>    ld: symbol(s) not found for architecture x86_64
>    collect2: ld returned 1 exit status
>    make[1]: *** [kinds_f90.o] Error 1 
> ```

所以我不知道我需要做什么。在进一步谷歌搜索后，我尝试了：

> ```
>  LD="mpif90"
>   LDFLAGS="-m64"
>   FC="mpif90"
>   FCFLAGS="-m64" 
> ```

但我收到了类似的错误消息...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:20:43.043

已经取得了进展。它开始使用这些设置进行编译，尽管我没有正确理解它们：

> ```
> $(MAKE) FC="mpif90" LD="mpif90 -o" \
> LDFLAGS="-O2 -ffast-math" \
> FFLAGS="-c -O2 -ffast-math"\
> EX=$(EX) BINROOT=$(BINROOT) $(TYPE) 
> ```

但最终出现错误：

mpif90 -c -O2 -ffast-math set_bounds.f90 set_bounds.f90:36.23:

zero_plus = Nearest( 0.0_wp , 1.0_wp) 1 错误：NEAREST 的结果在 (1) 处下溢

# php - 在 mysql (+php) 中检索分组元素的数组

> ID：13332701
> 
> 赞同：2
> 
> 时间：2012-11-11T15:45:02.090
> 
> 标签：php, mysql

我需要这个查询的帮助，到目前为止我有这个：

```
SELECT * FROM coupons WHERE discount_id = '1' AND client_username = 'Zara' GROUP BY winner_id 
```

桌子是这样的

```
id  client_username winner_id   bdate                   discount_id destroyed
72  zara            1125405534  2012-11-11 03:34:49     4            0
71  zara            1125405534  2012-11-11 03:34:43     1            0
70  zara            1125405534  2012-11-11 03:34:27     1           0 
```

我想将结果按`winner_id`（其唯一的用户 id）分组，其中`discount_id`等于某个值和 order by `bdate`，我认为我需要用户每次出现的值`id` `bdate`和`destroyed`值，并计算 winner_id 出现的次数，所以结果需要是一个值（winner_id 出现次数的计数）和 3 个数组（discount_id、destroyed、id）。但我不知道如何以我需要的方式检索它。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:32:29.230

两种基本方法：

1.  在 mysql 中聚合并在 php 中“爆炸”
2.  PHP中的聚合

第 1 项涉及在查询中使用一些聚合函数，例如 COUNT() 和 GROUP_CONCAT()：

```
SELECT count(*) as num_wins, GROUP_CONCAT(discount_id, ',') as discount_ids ... 
```

然后在 PHP 中，这些 GROUP_CONCAT 列可以在循环结果时“分解”成数组：

```
foreach($rows as $row) {
  $discount_ids = explode(',', $row['discount_ids']);
  // ...
} 
```

数字 2 是更简单的 SQL，但更丑陋的 PHP。基本上只需选择所有行，然后自己预处理结果。（我推荐以前的解决方案）

```
foreach($rows as $row) {
  $results_tree[$row['winner_id']]['num_wins']++;
  $results_tree[$row['winner_id']]['discount_ids'][] = $row['discount_id'];
  // ...
} 
```

# c# - ServiceStack ORMLite 对视图的支持

> ID：13332708
> 
> 赞同：4
> 
> 时间：2012-11-11T15:46:05.967
> 
> 标签：c#, servicestack, ormlite-servicestack

我在[这里](https://groups.google.com/forum/#!topic/servicestack/Kf3-oVUEO6A)阅读了mythz 的帖子，内容是关于 ORMLite 如何从 SQL 中读取任何内容并将其放入相同形状的 POCO 中。这太棒了。

另一方面，ORMLite 在将它们保存回数据库时如何处理这些“视图 POCO”？由于它们不是表，它们可能是视图，也可能只是任何类似的 sql 选择查询：

```
var rows = dbCmd.Select<ShipperTypeCount>(
     "SELECT ShipperTypeId, COUNT(*) AS Total FROM Shippers GROUP BY ShipperTypeId ORDER BY COUNT(*)"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T17:34:43.530

与 OrmLite 一起使用的 POCO 没有什么特别之处，它们没有绑定或关联回任何基础表，并且 OrmLite 在调用之间没有缓存的隐藏魔法状态，因此它知道映射到哪些字段。

对于每个 DB 调用，OrmLite 只使用 POCO 根据类型的模式定义创建适当的 SELECT、INSERT、UPDATE 或 DELETE 语句。[INSERT](https://github.com/ServiceStack/ServiceStack.OrmLite#insert) APIs 显示了这方面的一些示例。

最好将 OrmLite 视为只是将您的 POCO 转换为 SQL 语句，这就是它的作用。因此，尝试插入 a`ShipperTypeCount`将尝试将记录插入到名为**ShipperTypeCount**的表中，除非它具有`[Alias("UseTableNameInstead")]`它将使用的属性。

# c - 理解这个谜题的解决方案

> ID：13332711
> 
> 赞同：1
> 
> 时间：2012-11-11T15:46:15.697
> 
> 标签：c, algorithm, puzzle, primes

我在编码比赛中做一个谜题，我被困在一个问题上。基本上我不明白有人怎么能达到这个解决方案。谜题是

爱丽丝和鲍勃玩以下游戏。他们选择一个数字 N 来玩。规则如下：

1.  鲍勃先上场，两名球员轮流上场。
2.  轮到他/她，玩家可以从 N 中减去任何小于 N 的素数（包括 1）。这样得到的数字就是新的 N。
3.  轮到他/她不能移动的人输掉比赛。

假设双方都发挥最佳，谁会赢得比赛？

给定的解决方案是

```
int main() {
  long int T, N;
  for(scanf("%ld", &T); T > 0; T--) {
    scanf("%ld", &N);
    if (N % 4 == 1) {
      printf("ALICE wins\n");
    } else {
      printf("BOB wins\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T16:07:19.513

这有点像[尼姆](http://en.wikipedia.org/wiki/Nim)游戏。最后面对的玩家`N = 1`输了。如果`N % 4 != 1`，Bob 可以拿 1、2 或 3 来做下一个`N ≡ 1 (mod 4)`，让 Alice 处于失败的位置。否则，如果`N ≡ 1 (mod 4)`一开始，爱丽丝可以反击鲍勃的举动，`≡ 1 (mod 4)`再次为鲍勃留下一个号码。

# user-interface - 添加多个节点作为 TabPane 内容

> ID：13332713
> 
> 赞同：0
> 
> 时间：2012-11-11T15:46:19.657
> 
> 标签：user-interface, tabs, javafx-2, javafx

我目前正在尝试使用以下方法向 tabPane 添加一些内容：

```
tab.setContent(label, combobox); 
```

可悲的是，这种方法只允许我向我的选项卡添加 1 个组件，那么我该如何解决这个限制呢？我需要创建一个新类并将该阶段添加为组件还是有其他方法？

更新：

对不起，我最初的问题不够清楚，这里有一个简短的解释：

因此，我在 JavaFx Scene 构建器中创建了我的 GUI，并创建了一个 tabPane，其中有三个不同的选项卡。所有这些现在都需要包含不同的内容，具体取决于您在我的 GUI 中单击的按钮我想更改选项卡的内容，因此我需要自己编写代码。

我的问题是我想手动将组件添加到我的选项卡，但我无法这样做，因为 tab.setContent 方法只允许我添加 1 个组件！我也无法将组件设置在我想要的位置，它有点停留在左上角！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T19:25:39.167

使用任何布局管理器作为内容：

```
FlowPane pane = new FlowPane();
pane.getChildren().addAll(new Label("Hello"), new Label(", world"));
tab.setContent(pane); 
```

# java - 带有变量的Android TextView id？

> ID：13332715
> 
> 赞同：4
> 
> 时间：2012-11-11T15:46:29.810
> 
> 标签：java, android, android-widget, textview

在我的 Android 应用程序中，有没有办法通过使用变量作为 id 的一部分将文本设置为 textview？

我正在尝试做这样的事情：

```
for (int i = 1; i < 6; i++){
                views.setTextViewText(R.id.textView+i, "" + realtimeData.get(i).id);
            } 
```

我确实在布局 xml 中将 TextViews 声明为 textView1、textView2 等......并且可以使用静态名称访问它们。我的问题是我不知道我的列表中有多少对象。我不想显示超过 5 个，但如果少于 5 个，则可以将 TextView 值留空。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T15:52:19.297

您正在寻找[`getIdentifier()`](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)方法：

```
for (int i = 1; i < 6; i++){
     views.setTextViewText(getResources().getIdentifier("textView" + i, "id", getPackageName()), "" + realtimeData.get(i).id);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T15:55:36.990

+1 给 Luksprog ，但是我觉得“i<6”不是正确的方法，而是使用`ViewGroup.getChildCount() and ViewGroup.getChildAt(int)`这样你就可以更好地控制你的文本视图数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-12T02:34:09.517

## 更少的问题

使用`getIdentifier()`让我很伤心，所以我得到了以下结果：

```
String idName = "companyName";   // The id name of your resource.

int resourceId = R.id.class.getField(idName).getInt(null); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-11T15:52:52.050

如果您对 R 文件保持大腿控制以确保您的 ID 是连续的，您可以尝试以下操作：

```
for (int i = R.id.firstTextView; i <= R.id.lastTextView; i++){
    views.setTextViewText(i, "" + realtimeData.get(i).id);
} 
```

这将允许只将 ID 添加到 R 文件中，而无需修改代码来更改硬编码的`6`数字。

只是为了证明我的观点：

```
<TextView android:id="@+id/testStart" />
<TextView android:id="@+id/test2" />
<TextView android:id="@+id/test3" />
<TextView android:id="@+id/testEnd" />
<Button android:id="@+id/button1" /> 
```

生成：

```
 public static final int button1=0x7f070004;
    public static final int menu_settings=0x7f070005;
    public static final int test2=0x7f070001;
    public static final int test3=0x7f070002;
    public static final int testEnd=0x7f070003;
    public static final int testStart=0x7f070000; 
```

后期添加：

```
 <TextView android:id="@+id/test4" /> 
```

就在之前

```
 <TextView android:id="@+id/testEnd" /> 
```

立即将 R.java 更改为：

```
 public static final int button1=0x7f070005;
    public static final int menu_settings=0x7f070006;
    public static final int test2=0x7f070001;
    public static final int test3=0x7f070002;
    public static final int test4=0x7f070003;
    public static final int testEnd=0x7f070004;
    public static final int testStart=0x7f070000; 
```

# objective-c - 如何将对象附加到 NSCursor？操作系统

> ID：13332717
> 
> 赞同：0
> 
> 时间：2012-11-11T15:46:40.857
> 
> 标签：objective-c, macos, cocoa, nscursor

当用户悬停按钮时，我想将 WebView 附加到光标上。并在鼠标退出时将其删除。
即使光标在按钮内移动，我也希望 WebView 继续跟随光标。
关于如何执行此操作的任何想法？

这是一个关于它应该如何的例子：
![在此处输入图像描述](../Images/abe5a4ac4384762e294758b1b839a2a7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:48:32.200

所以你有一个 NSButton ...子类，所以你附加一个视图：

```
@interface ButtonWithWebViewOnHover : NSButton
@property(strong) WebView *webView;
@end 
```

覆盖 mouseEntered 和 mouseExited 并切换隐藏

......等等......我们似乎在重新发明轮子

* * *

使用 NSPopover （直接来自苹果，但不像下一个那样图形灵活：）

或 MAAttachedWindow (http://mattgemmell.com/2007/10/03/maattachedwindow-nswindow-subclass/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-11T16:00:49.953

您可以将 WebView 子类化，并考虑将其绘制为调用此方法：

```
- (void)drawRect:(NSRect)dirtyRect; 
```

ao 如果你在这个方法中调用[super drawInRect: dirctyRect]，视图会正常绘制，否则什么都不会绘制。所以你可以查看鼠标是否在视图上，决定是否绘制。

要调整它的大小，您可以使用以下方法：

```
- (void)setBounds:(NSRect)boundsRect; 
```

要检测鼠标事件，您应该在主视图中实现诸如**mouseDown**（请参阅[**NSResponder ）之类的方法。**](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html)

# c# - 调用 C# ASMX Web 服务

> ID：13332724
> 
> 赞同：1
> 
> 时间：2012-11-11T15:47:32.237
> 
> 标签：c#, asmx, iasyncresult, waithandle

我有一个 ASMX Web 服务，我需要在工作中使用它。我通过 ASPX 页面调用此服务以在第 3 方系统上创建新实体。我无法访问该服务的底层代码，它只是为了让我与另一个系统进行通信。

我无法确定我是否正确调用了该服务，我想知道是否有人可以提供一些建议。

我已经安装了 ASMX 页面，这给了我一个名为“ConfirmConnector”的类，我称之为 BeginProcessOperations 方法。我想等待它返回然后解析结果。结果应该是 XML 格式，然后我会逐步获取我想要的数据。

问题是有时这个过程会在我身上消失，即当我调用我的“EndProcessOperations”方法时，什么也没有发生。我没有收到错误，什么都没有——我的代码死了，方法返回了

我的调用代码是：

```
private void sendConfirmRequest(XmlManipulator requestXML)
{
    file.WriteLine("Sending CONFIRM Request!");
    AsyncCallback callBack = new AsyncCallback(processConfirmXML); // assign the callback method for this call

    IAsyncResult r = conn.BeginProcessOperations(requestXML, callBack, AsyncState);
    System.Threading.WaitHandle[] waitHandle = { r.AsyncWaitHandle }; // set up a wait handle so that the process doesnt automatically return to the ASPX page
    System.Threading.WaitHandle.WaitAll(waitHandle, -1);
} 
```

我的处理程序代码是：

```
 /*
 * Process the response XML from the CONFIRM Connector
 */
private static void processConfirmXML(IAsyncResult result)
{
    try
    {
        file.WriteLine("Received Response from CONFIRM!");
        if(result == null)
        {
            file.WriteLine("RESPONSE is null!!");
        }
        if(conn == null)
        {
            file.WriteLine("conn is null!!");
        }
        file.WriteLine("Is Completed : " + result.IsCompleted);

        XmlNode root =  conn.EndProcessOperations(result);
        file.WriteLine("got return XML");
        //writeXMLToFile("C:/response.xml",root.InnerXml);
        file.WriteLine(root.InnerXml); 
```

谁能建议我是否以正确的方式处理此代码，并且有人知道为什么我的代码在处理程序中的此行之后随机炸弹：

```
XmlNode root =  conn.EndProcessOperations(result); 
```

谢谢你的帮助，保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:59:02.067

感谢您的关注，但我解决了我的问题。该问题似乎与我的回调操作有关。

我更改了代码以在同一代码块中调用我的开始和结束方法，从那时起我就没有遇到过问题。

```
private void sendConfirmRequest(XmlManipulator requestXML)
{
    //ConfirmConnector conn = new ConfirmConnector();
    file.WriteLine("Sending CONFIRM Request!");
    //AsyncCallback callBack = new AsyncCallback(processConfirmXML); // assign the callback method for this call

    //IAsyncResult r = conn.BeginProcessOperations(requestXML, callBack, AsyncState);
    //System.Threading.WaitHandle[] waitHandle = { r.AsyncWaitHandle }; // set up a wait handle so that the process doesnt automatically return to the ASPX page
    //System.Threading.WaitHandle.WaitAll(waitHandle, -1);

    file.WriteLine("Calling BeginProcessOperations");
    IAsyncResult result = conn.BeginProcessOperations(requestXML, null, null);
    // Wait for the WaitHandle to become signaled.
    result.AsyncWaitHandle.WaitOne();
    file.WriteLine("Calling EndProcessOperations");
    XmlNode root = conn.EndProcessOperations(result);
    processConfirmXML(root);

    file.WriteLine("got return XML");
    //writeXMLToFile("C:/response.xml",root.InnerXml);
    file.WriteLine(root.InnerXml);

    // Close the wait handle.
    result.AsyncWaitHandle.Close();
} 
```

谢谢

保罗

# php - 如何将数组作为参数传递给函数

> ID：13332729
> 
> 赞同：-3
> 
> 时间：2012-11-11T15:47:44.980
> 
> 标签：php, arrays

我编写了这段代码，在其中定义了一个数组 flypath，我在其中存储了一些文件的位置。

```
 include 'last_file.php'; // Include the function last_file
     $last_file = last_file();  // assign to the function a variable and call the  function last_file
    // Connect to the database
     include('connect_thesis.php');

    // Defining an array, which has the three paths to the three different gps receivers
    $file_path[0] = "/Applications/MAMP/htdocs/php_test/check/".$last_file[0];
    //echo $file_path[0]; echo "<br>";
    $file_path[1] = "/Applications/MAMP/htdocs/php_test/check2/".$last_file[1];
    //echo $file_path[1]; echo "<br>";
    $file_path[2] = "/Applications/MAMP/htdocs/php_test/check3/".$last_file[2];
    //echo $file_path[2]; echo "<br>"; 
```

然后我创建了一个名为 insert() 的函数，我想将它作为 $file_path[0] 的输入：

```
 function insert($file_path){

     $fh = fopen($file_path,'r') or die ("Could not open:".mysql_error()).......; 
```

我将主脚本中的函数称为：

```
 insert($file_path[0]); 
```

我是编程新手，我确信在某个地方我缺少一些基本的东西！问题是函数没有运行！！！你能帮助我吗？谢谢 D。

我认为我没有正确地将价值传递给函数。因为我没有得到任何错误！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:13:20.133

需要注意的几点：

您仅使用索引 0 调用插入，考虑使用 foreach 并在数组中的每个项目上调用该函数。

insert() -> 我们缺少部分实现，但如果文件存在，则不应出现错误。请记住，您需要关闭打开的文件。

或者死 -> 看起来你从其他地方复制粘贴的代码...... mysql_error() 对你没有多大帮助，因为你现在正在处理文件。考虑将其更改为

```
$fh = fopen($file_path,'r') or die ("Could not open:".$file_path) 
```

您可能应该优雅地处理错误而不是使用“死”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:51:28.690

我认为你需要这个：

```
function insert($file_path) {
    foreach ($file_path as $file) {
        //Your code here
    }
} 
```

# node.js - jsRender 和 node.js

> ID：13332730
> 
> 赞同：1
> 
> 时间：2012-11-11T15:47:51.640
> 
> 标签：node.js, jsrender

我是 node.js 的完整初学者。

我尝试做的是在服务器端解析一个 jsrender 模板

[我从git](https://github.com/BorisMoore/jsrender/blob/master/jsrender.js)下载了 jsrender.js

这是我的尝试……保存为 render.js：

```
var data = [
    {id:1, name:"tom"},
    {id:2, name:"jack"},
]

require('./jsrender.js', function(jsrender){
    console.log('test');
    var result = jsrender.render['<p>{{:id}} <b>{{:name}}</p>']( data );
    console.log(result);
} ); 
```

然后运行它（节点 render.js）

我什么也没得到

我究竟做错了什么？

==================================================== ====

也尝试过这种方式：

```
 var data = [
    {id:1, name:"tom"},
    {id:2, name:"jack"},
]
var jsrender = require('./jsrender.js');

var result = jsrender.render('<p>{{:id}} <b>{{:name}}</p>',data );
console.log(result); 
```

我得到

```
var result = jsrender.render('<p>{{:id}} <b>{{:name}}</p>',data );
                      ^
TypeError: Object #<Object> has no method 'render' 
```

==================================================== =======================

也尝试安装这个[node_jsrender 模块](http://geekple.com/nodejs/node_jsrender)

这个语法：

```
var jsrender = require('./jsrender');

process.on('start', function () {
  jsrender.template("yourtemplate", "{{:myvar}}");
  var result = jsrender.render("yourtemplate", {myvar:"Hello World!"});

  console.log(result);
}); 
```

也是空结果:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T16:01:48.550

所以首先你需要安装 Node.js 模块。

```
npm install node_jsrender 
```

这将创建一个 node_modules 目录，其中包含 node_jsrender 目录。接下来你需要要求。

```
var jsrender = require('node_jsrender'); 
```

如果 require 方法的第一个参数以它开头，`./`则表示您要导入本地文件。没有它，Node.js 将查看 node_modules 目录。

```
jsrender.template("yourtemplate", "{{=myvar}}");
var result = jsrender.render("yourtemplate", {myvar:"Hello World!"}); 
```

我检查了该模板引擎的语法，它是`{{=`不是`{{:`？

# wpf - 应用程序关闭问题

> ID：13332732
> 
> 赞同：0
> 
> 时间：2012-11-11T15:48:12.613
> 
> 标签：wpf, mvvm, prism

在 prism 应用程序中，我创建了一个以模块开头的登录表单。用户通过身份验证后，登录表单等待所有应用程序模块已初始化（如 splah 屏幕显示有关已加载模块的一些信息），然后启动 shell。一切似乎都工作正常，除非用户单击登录表单的取消按钮。我希望应用程序关闭，但由于登录表单在另一个线程中启动，我无法使用 Application.Current.Shutdown() （仅适用于 Enviroment.Exit(0) 但我不确定这是一个正确的方法）。我尝试从 Application.Current.Dispatcher 调用，但应用程序仍在运行。这是登录模块初始化，我在其中捕获应该关闭应用程序的事件：

```
public void Initialize()
{        
  Dispatcher.CurrentDispatcher.BeginInvoke(
    (Action) (() =>
        {
            Shell.Show();

            EventAggregator.GetEvent<LoginStatusEvent>().Publish(new LoginStatusEvent { LoginStatus = LoginViewStatus.Close });
        }));      

  ThreadStart showSplash =
    () =>
      {
        Dispatcher.CurrentDispatcher.BeginInvoke(
          (Action) (() =>
                {
                    Container.RegisterType<LoginViewModel, LoginViewModel>();
                    Container.RegisterType<LoginView, LoginView>();

                    var login = Container.Resolve<LoginView>();

                    EventAggregator.GetEvent<LoginStatusEvent>().Subscribe(e => login.Dispatcher.BeginInvoke(
                        (Action)(() =>
                            {
                                if (e.LoginStatus == LoginViewStatus.Aborted)
                                {
                                    login.Close();

                                    Application.Current.Dispatcher.BeginInvoke((Action)(() => Application.Current.Shutdown()));

                                    //Environment.Exit(0);
                                }
                                else if (e.LoginStatus == LoginViewStatus.Close)
                                {
                                    login.Close();                                          
                                }
                                else
                                {
                                    WaitForCreation.Set();
                                }
                            })));

                    login.Show();                            
                }));

        Dispatcher.Run();
      };

  WaitForCreation = new AutoResetEvent(false);

  var thread = new Thread(showSplash) {Name = "LoginView Thread", IsBackground = true};
  thread.SetApartmentState(ApartmentState.STA);
  thread.Start();

  WaitForCreation.WaitOne();
} 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:35:24.290

为什么您的登录 UI 在后台线程上运行？似乎登录 UI 应该在 GUI 线程上运行。然后你有一个 BackgroundWorker 对象（比上面的代码更容易使用并且更易于维护），当 ProgressChanged 方法回调到 GUI 线程时，它可以在需要更新 UI 时随时运行 ProgressChanged？

我经常将 BackgroundWorker 重载为类似于 MyDataObjectBackgroundWorker 的东西，并且我创建了一个属性来保存我的对象。通过这种方式，我可以使用 ProgressChanged 轻松地来回传递数据（比如正在加载的模块的信息）。

# jquery - 数据表标题移动

> ID：13332735
> 
> 赞同：2
> 
> 时间：2012-11-11T15:48:50.363
> 
> 标签：jquery, header, datatables

嗨，我遇到了数据表（jquery）的问题，我自己无法解决。任何人都可以帮助我或给我一个提示吗？

问题是我的数据表的标题被移动并且格式不正确，如下图所示。

![在此处输入图像描述][1]

但是当我单击一个条目以对其进行排序时，它会更改格式并且一切正常。

![在此处输入图像描述][2]

我已经使用 jquery ui 选项卡将数据表包含在 jquery ui 对话框中。我的代码看起来像这样。

```
 <script>
$(function() {
    $("#rt").treeview();
    $("button").button({ 
        icons: {primary: "ui-icon-person"}}).click(function() {
            var id = this.id;window.location="rightsmanagement?nutzerrechte_vergeben&show=3&refine=";
            });
    }); 
    $.fn.tabbedDialog = function () {
        this.tabs();
        var wWidth = $(window).width();
        var dWidth = wWidth * 0.8;
        var dialogOptions = {
        modal: true,width: dWidth,minHeight: 520};
        this.dialog(dialogOptions);
        this.find('.ui-tab-dialog-close').append($('a.ui-dialog-titlebar-close'));
        this.find('.ui-tab-dialog-close').css({'position':'absolute','right':'0', 'top':'13px'});
        this.find('.ui-tab-dialog-close > a').css({'float':'none','padding':'0'});
        var tabul = this.find('ul:first');
        this.parent().addClass('ui-tabs').prepend(tabul).draggable('option','handle',tabul);
        this.siblings('.ui-dialog-titlebar').remove();
        tabul.addClass('ui-dialog-titlebar');
    }

$(document).ready(function() {
    $('#controllerTab').tabbedDialog();
    });

$(document).ready(function() {
    $('#singleusertable').dataTable({
        "sScrollY": "280px",
        "bPaginate": false,
        "bAutoWidth": false,
        "oLanguage": {"sUrl": "style/table/sprache.txt"},
        "aoColumnDefs": [
            { "bVisible": false, "aTargets": [ 0 ] },
            { "sTitle": "Benutzername", "aTargets": [ 1 ] },
            { "sTitle": "Vorname", "aTargets": [ 2 ] },
            { "sTitle": "Nachname", "aTargets": [ 3 ] },
            { "sTitle": "Personalnummer", "aTargets": [ 4 ] },
            { "sTitle": "Abteilung", "aTargets": [ 5 ] },
            { "bVisible": false, "aTargets": [ 6 ] },
            { "sWidth": "25%", "aTargets": [ 1] },
            ],"aaSorting": [[0, 'desc']]
    });
});

</script> 
```

提前谢谢提示..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T15:59:23.710

单击选项卡单击时，您必须添加触发器。在你的情况下，它会是这样的：

首先将数据表添加到变量中：

```
var oTable = $('#singleusertable').dataTable({
    ..

}); 
```

然后在您单击第二个选项卡后重新加载。像这样：

```
$("a[href=#tabs-2]").click(function()
{
    oTable.fnReloadAjax();
}); 
```

您的最终脚本将如下所示：

```
<script>
var oTable  = null;
$(function() {
    $("#rt").treeview();
    $("button").button({ 
        icons: {primary: "ui-icon-person"}}).click(function() {
            var id = this.id;window.location="rightsmanagement?nutzerrechte_vergeben&show=3&refine=";
            });
    }); 
    $.fn.tabbedDialog = function () {
        this.tabs();
        var wWidth = $(window).width();
        var dWidth = wWidth * 0.8;
        var dialogOptions = {
        modal: true,width: dWidth,minHeight: 520};
        this.dialog(dialogOptions);
        this.find('.ui-tab-dialog-close').append($('a.ui-dialog-titlebar-close'));
        this.find('.ui-tab-dialog-close').css({'position':'absolute','right':'0', 'top':'13px'});
        this.find('.ui-tab-dialog-close > a').css({'float':'none','padding':'0'});
        var tabul = this.find('ul:first');
        this.parent().addClass('ui-tabs').prepend(tabul).draggable('option','handle',tabul);
        this.siblings('.ui-dialog-titlebar').remove();
        tabul.addClass('ui-dialog-titlebar');
    }

$(document).ready(function() {
    $('#controllerTab').tabbedDialog();

    $("#controllerTab a[href=#tabs-2]").click(function()
    {
        oTable.fnDraw();
    });     
});

$(document).ready(function() {
    oTable = $('#singleusertable').dataTable({
        "sScrollY": "280px",
        "bPaginate": false,
        "bAutoWidth": false,
        "oLanguage": {"sUrl": "style/table/sprache.txt"},
        "aoColumnDefs": [
            { "bVisible": false, "aTargets": [ 0 ] },
            { "sTitle": "Benutzername", "aTargets": [ 1 ] },
            { "sTitle": "Vorname", "aTargets": [ 2 ] },
            { "sTitle": "Nachname", "aTargets": [ 3 ] },
            { "sTitle": "Personalnummer", "aTargets": [ 4 ] },
            { "sTitle": "Abteilung", "aTargets": [ 5 ] },
            { "bVisible": false, "aTargets": [ 6 ] },
            { "sWidth": "25%", "aTargets": [ 1] },
            ],"aaSorting": [[0, 'desc']]
    });
}); 
```

# php - 如何将图片从网页保存到服务器？

> ID：13332737
> 
> 赞同：-2
> 
> 时间：2012-11-11T15:49:15.687
> 
> 标签：php, html

我有一个图像 id='canvasImg'，但我不知道如何拍摄这张图像并将其保存到服务器。

我尝试将内容保存到表单中，然后在解码后将内容放入 png 文件中，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:54:10.870

您将需要使用简单的文件表单上传

**HTML**

```
<form action="upload_file.php" method="post" enctype="multipart/form-data">
 <input type="file" name="file" id="file" /> 
 <input type="submit" name="submit" value="Submit" />
</form> 
```

**PHP (upload_file.php)**

```
if (file_exists("upload/" . $_FILES["file"]["name"])) {
 echo $_FILES["file"]["name"] . " already exists. ";
} else {
 move_uploaded_file($_FILES["file"]["tmp_name"],
 "upload/" . $_FILES["file"]["name"]);
 echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
} 
```

# php - 更改 wordpress 主题的帖子循环设计

> ID：13332738
> 
> 赞同：0
> 
> 时间：2012-11-11T15:49:22.030
> 
> 标签：php, html, css, wordpress, loops

我想在我的跨苹果 wordress 主题中更改帖子循环的设计。而不是标题底部的大缩略图和小描述，我希望小缩略图（200x200）直接显示在右侧，标题和小描述将显示在左侧（如[新闻广播 wordpress 主题](http://www.kriesi.at/themes/newscast/category/community/)中）

这是我的循环的外观： [http ://cor.co.il/info](http://cor.co.il/info)

我希望帖子循环看起来像这样：[http ://www.kriesi.at/themes/newscast/category/community/](http://www.kriesi.at/themes/newscast/category/community/)

我该如何管理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:31:07.753

您必须更改主题中的“archive.php”。

在其中尝试使用此循环：

```
<?php while(have_posts()): the_post(); ?>
  *your html code for one post*
<?php endwhile; ?> 
```

循环显示缩略图：

```
the_post_thumbnail(); 
```

要在循环中显示标题：

```
the_title(); 
```

并显示描述：

```
the_content(); 
```

有关更多信息，请查看 -> [Wordpress Codex](http://codex.wordpress.org/The_Loop)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T20:39:03.603

自己解决！

我不得不改变这些行：

```
<?php the_post_thumbnail('650-200'); ?> 
```

至：

```
<?php the_post_thumbnail(array(200,200), array('class' => 'alignright')); ?> 
```

在行动中看到它：http: [//cor.co.il/info](http://cor.co.il/info)

# javascript - 我如何使用 JQuery 来更新事件发生后的时间？

> ID：13332739
> 
> 赞同：0
> 
> 时间：2012-11-11T15:49:23.010
> 
> 标签：javascript, jquery, datetime

我想通过重置请求的时间来更新请求的状态。

例如，将此时间元素更新为当前的时间和日期，并以自更新以来的时间长度表示。

```
<time class="timesince" datetime="2012-06-28T02:47:40Z">June 28, 2012</time> 
```

到目前为止，这就是我想出的：

```
var date= new Date();
date.toISOString();
$("time.timesince").replaceWith(date);
$("time.timesince").timesince(); 
```

其中 timesince 是一个 jQuery 插件，它采用 ISO 8601 格式的时间戳并返回自时间戳传入以来的时间。

我的问题是我不知道如何访问时间标签的日期时间值。我怎样才能做到这一点？

# c++ - 我无法使用“LoadImage”加载图片并在对话框中绘制它

> ID：13332741
> 
> 赞同：0
> 
> 时间：2012-11-11T15:49:40.670
> 
> 标签：c++, mfc

```
void CCreateList::paintRowList(CDialogEx* CCurent, int wBeginX, int wBeginY)
{
    CPaintDC dc(CCurent);
    CDC *cdc,cc;
    cdc=CCurent->GetDC();
    HANDLE hbitmap;
    hbitmap = LoadImage(0,L"C:\\PIC.png",IMAGE_BITMAP,100,100,0x00000010);
    cc.CreateCompatibleDC(cdc);
    cc.SelectObject(hbitmap);
    dc.BitBlt(100,100,100,100,&cc,0,0,SRCCOPY);
} 
```

我想在对话框中绘制带有图像的标题。不要使用优化校准请帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T19:29:29.097

这是我用于加载其他图像格式的代码。它依赖于 GDI+，因此您需要在使用之前和之后进行初始化和关闭（每个程序一次就足够了）

**加载程序：**

```
// BMP, GIF, JPEG, PNG, TIFF, Exif, WMF, and EMF
HBITMAP mLoadImg(WCHAR *szFilename)
{
   HBITMAP result=NULL;

   Gdiplus::Bitmap* bitmap = new Gdiplus::Bitmap(szFilename,false);
   bitmap->GetHBITMAP(NULL, &result);
   delete bitmap;
   return result;
} 
```

**初始化/关闭**

```
int APIENTRY WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd)
{
   static Gdiplus::GdiplusStartupInput gdiplusStartupInput;
   static ULONG_PTR gdiplusToken;

    // so we can load all the image formats that windows supports natively - (I'm using a transparent PNG on the main dialog)
    GdiplusStartup(&gdiplusToken, &gdiplusStartupInput, NULL);

    // make things look pretty
    InitCommonControls();

    // run the app
    //DialogBox(hInstance, MAKEINTRESOURCE(DLG_MAIN), NULL, (DLGPROC)DialogProc);
    //
    // 
    //

    // clean-up stuff
    Gdiplus::GdiplusShutdown(gdiplusToken);

    return 0;
} 
```

自然，这是针对基于对话框的应用程序（对话框在 resource.rc 中定义）——而不是基于框架的应用程序或 MFC 应用程序。关键是，您只需要在使用前进行初始化，然后关闭即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T19:10:20.490

我是这样做的：

```
CString strFileName;
        strFileName="C:\\PIC.bmp";
        BITMAP bmpPro;
        HBITMAP bmpHandle=(HBITMAP)LoadImage(NULL,strFileName,IMAGE_BITMAP,0,0, LR_LOADFROMFILE| LR_CREATEDIBSECTION);

        CBitmap bmpPicture;
        CDC mdcPicture;
        bmpPicture.Attach(bmpHandle);
        bmpPicture.GetBitmap(&bmpPro);
        mdcPicture.CreateCompatibleDC( &dc);
        CBitmap * bmpPrevious = 
                mdcPicture.SelectObject(&bmpPicture);
                dc.BitBlt(wCurrent, wBeginY,
        header[i].getWidthOfHeader(), wHeight,
                    &mdcPicture, 0, 0, SRCCOPY); 
```

我成功了:X 谢谢:X

# ruby-on-rails - 未定义的方法“地图”

> ID：13332745
> 
> 赞同：0
> 
> 时间：2012-11-11T15:50:38.657
> 
> 标签：ruby-on-rails, ruby-on-rails-3, haml

我正在尝试将 db-record 数据解析到我的 haml 模板文件中以进行过滤。（同位素 jquery）

房屋模型

```
def features_to_html_class
  "#{(guests + bedrooms + type + amenities).map(&:name).join(' ')}"
end 
```

房屋索引haml视图

```
- @houses.each do |house|
  .item{:class => house.features_to_html_class } 
```

我收到错误消息未定义的方法“地图”。数据库中的值是整数（客人/卧室）和字符串（类型/设施）

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:58:01.883

你得到那个`features_to_html_class`吗？您可能想要检查`nil`数组。您可以`compact`轻松做到这一点。

```
def features_to_html_class
  (guests + bedrooms + type + amenities).compact.map(&:name).join(' ')
end 
```

# types - go中的类型转换问题

> ID：13332746
> 
> 赞同：0
> 
> 时间：2012-11-11T15:50:44.723
> 
> 标签：types, go

我如何重写以下代码？

```
switch md.(type) {
    case *amf0.EcmaArrayType:
        ea := md.(*amf0.EcmaArrayType)
        for k, v := range (*ea) {
            log.Printf("%v = %v\n", k, v)
        }
        if width == 0 {width = uint16((*ea)["width"].(amf0.NumberType))}
        if height == 0 {height = uint16((*ea)["height"].(amf0.NumberType))}
    case *amf0.ObjectType:
        ea := md.(*amf0.ObjectType)
        for k, v := range (*ea) {
            log.Printf("%v = %v\n", k, v)
        }
        if width == 0 {width = uint16((*ea)["width"].(amf0.NumberType))}
        if height == 0 {height = uint16((*ea)["height"].(amf0.NumberType))}
} 
```

它有两个完全重复的不同类型的块。如果我在上面声明了开关状态，由于编译错误`var ea interface{}`，我无法调用。`range (*ea)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T18:55:10.353

看起来这两种类型都具有底层类型`map[string]something`，其中“某物”的具体类型为`amf0.NumberType`. 您所做的每个操作都可以使用反射来模拟。

```
switch md.(type) {
case *amf0.EcmaArrayType, *amf0.ObjectType:
    m := reflect.Indirect(reflect.ValueOf(md))
    for _, key := range m.MapKeys() {
        k, v := key.Interface(), m.MapIndex(key).Interface()
        log.Printf("%v = %v\n", k, v)
    }

    if width == 0 {
        w := m.MapIndex(reflect.ValueOf("width"))
        width = uint16(w.Interface().(amf0.NumberType))
    }

    if height == 0 {
        h := m.MapIndex(reflect.ValueOf("height"))
        height = uint16(h.Interface().(amf0.NumberType))
    }
} 
```

但是，执行您在第一个示例中所做的事情并不少见。有时反射不会削减它。在这些情况下，我对你的类型转换有一些建议。而不是`switch md.(type)`做`switch ea := md.(type)`。这将允许您删除像`ea := md.(*amf0.EcmaArrayType)`.

DRY 代码更易于使用。它使更改更快，更不容易出现错误。但是，当所有重复的代码都在一个地方（如类型切换）时，出现错误的可能性很小。进行更改仍然需要更长的时间，但它并不像整个项目中的重复代码那么糟糕。不要像其他重复代码一样害怕大量重复的类型开关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T19:14:51.667

在这种特定情况下，我可能只是向未来的维护者添加注释，指出重复的代码，或者我可能会删除它，如下所示。（游乐场：[http](http://play.golang.org/p/Vc9pOZSNoW) ://play.golang.org/p/Vc9pOZSNoW ）

```
package main

import "log"

// copied from package amf0
type NumberType float64
type StringType string
type _Object map[StringType]interface{}
type ObjectType _Object
type EcmaArrayType _Object

// test parameter.  comment out one or the other
// var md interface{} = &ObjectType{"height": NumberType(3), "width": NumberType(5)}
var md interface{} = &EcmaArrayType{"height": NumberType(5), "width": NumberType(7)}

func main() {
    var width, height uint16
    ea, ok := md.(*ObjectType)
    if !ok {
        if et, ok := md.(*EcmaArrayType); ok {
            ea = (*ObjectType)(et)
        }
    }
    if ea != nil {
        for k, v := range *ea {
            log.Printf("%v = %v\n", k, v)
        }
        if width == 0 {
            width = uint16((*ea)["width"].(NumberType))
        }
        if height == 0 {
            height = uint16((*ea)["height"].(NumberType))
        }
    }
} 
```

您原来的重复代码只是重复的源代码；因为它处理不同的类型，所以编译的代码是不同的。不过幸运的是，ObjectType 案例的编译代码可以通过 ea = (*ObjectType)(et) 的简单类型转换轻松处理 EcmaArrayType 案例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T15:57:12.680

在调用范围之前使用类型转换，例如

```
 range ((* your_desired_type)(*ea)) 
```

将 替换为`your_desired_type`您的实际类型以进行类型转换。

# javascript - 具有流体高度的JS滚动条

> ID：13332749
> 
> 赞同：0
> 
> 时间：2012-11-11T15:51:23.057
> 
> 标签：javascript, jquery, jquery-plugins, css

我想个性化具有流体高度的 div 的滚动条：

```
section {
max-height:70%;
overflow-y:auto;
} 
```

我发现了两个智能灯片段：一个 Jquery 插件（[http://baijs.nl/tinyscrollbar/](http://baijs.nl/tinyscrollbar/)）和一个纯 JS 插件（[http://gondo.webdesigners.sk/javascript-scrollbar/](http://gondo.webdesigners.sk/javascript-scrollbar/)）。问题是这些片段不接受高度的 % 值。例如，使用 tinyscrollbar，我必须输入：

```
section .viewport {
width: auto;
height:440px;
overflow: hidden;
position: relative;
} 
```

如果我输入“身高：100%;” 或“height:auto;”，内容消失！为什么它接受 px 而不是 % ？我想明白它...

为了插入该部分的流体高度，我应该更改/添加 JS/JQuery 代码的哪一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T04:50:34.567

没有更多示例代码很难理解（请养成发布更多代码的习惯），但我认为这就是你所追求的。

--- 你为什么不跟踪上下文的高度（外部 div？）和内部 div（部分）的高度并在它们变化时计算它们？

```
var context_height = $("#context_div").height();
var section_height = $("section#id").height();

var percentage = section_height / context_height;
var measurement = percentage + "%";

$(section_height).css("height", measurement); // trigger this with a callback if heights need updating - possibly even re-initializing any scroll plugins, if necessary. 
```

# java - 保存 Excel 表的数据透视缓存

> ID：13332750
> 
> 赞同：1
> 
> 时间：2012-11-11T15:51:23.667
> 
> 标签：java, excel, pivot-table

我有一个带有数据透视表的 Excel 文件。我想处理数据透视背后的原始数据，但它来自外部来源，我无权访问。

我想用 Java 保存/读取该表的数据透视缓存。你知道任何允许我这样做的框架吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:20:33.770

您可以在数据透视表的总计上调用 VBA 中的 showdetail 以将原始数据表提取到新工作表中。从那里您可以将其导出到 csv 以随意使用。

```
Sub ShowGrandTotalDetail()
   Range(Split(Range("A3").CurrentRegion.Address, ":")(1)).showdetail = True
   Application.DisplayAlerts = False
   ActiveWorkbook.SaveAs _
      Filename:=Environ("USERPROFILE") & "\Desktop\Test.csv", _
      FileFormat:=xlCSV
   Application.DisplayAlerts = True
End Sub 
```

其中“A3”是指数据透视表中的任何单元格。

# python - 用python替换字符串中多次出现的字符

> ID：13332754
> 
> 赞同：0
> 
> 时间：2012-11-11T15:51:41.127
> 
> 标签：python, regex, string

我需要用好来替换像 gooooooooooood 这样的词。为此我尝试了

```
t.replace(r'(.)\2+',r'\2') 
```

其中 t 是一些像 gooooooooooood 这样的词

但这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T16:18:05.220

您正在寻找的是拼写检查器。有多种方法可以做到，但我觉得有用的方法很少

*   [模糊的](https://github.com/seatgeek/fuzzywuzzy)
*   [Difflib.SequenceMatcher.find_longest_match](http://docs.python.org/2/library/difflib.html)
*   [使用概率的拼写检查器](http://norvig.com/spell-correct.html)
*   [附魔](http://pypi.python.org/pypi/pyenchant)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T15:54:51.833

您可以使用[`itertools.groupby()`](http://docs.python.org/2/library/itertools.html#itertools.groupby)：

```
In [53]: strs="goooooooooooood"

In [54]: from itertools import groupby

In [55]: "".join(k*2 if len(list(g))>=2 else k for k,g in groupby(strs))
Out[55]: 'good' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T15:59:12.523

正则表达式解决方案

```
import re

s = "goooooooooooooood"
print re.sub(r'(.)\1{2,}', r'\1', s) 
```

或者

```
print re.sub(r'(.)\1{3,}', r'\1\1', s) 
```

将 gooooooooooood 替换为 good

# perl - 使用 Digest::MD5 在 Perl 中返回错误的 MD5 字符串

> ID：13332758
> 
> 赞同：0
> 
> 时间：2012-11-11T15:52:09.310
> 
> 标签：perl, md5

我试图用 MD5 加密这个字符串：

```
lolno 
```

我使用模块 use Digest::MD5 ，我的输出是：

```
τ;å▌3Gùφ▄♥ H≤Gj╠ 
```

我知道这不是 MD5，所以我想问一下我怎样才能使它工作？这是我使用的代码：

```
use Digest::MD5;
$ctx = Digest::MD5->new;
$ctx->add($pass);
$digest = $ctx->digest;
print $digest; 
```

我也试过：

```
use Digest::MD5 qw(md5);
$test = md5($pass);
print $test; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T15:55:49.330

尝试`md5_hex`（`hexdigest`对于第一个片段）看看你似乎期望什么。这是一种以字符形式呈现的二进制表示。

# javascript - WinJS.xhr 以文本形式返回 XML 字符串（包括 \n\r 标签），而不是 responseXML

> ID：13332763
> 
> 赞同：1
> 
> 时间：2012-11-11T15:52:33.177
> 
> 标签：javascript, windows-8, winjs

我开始玩Win8开发，从昨天开始我就遇到了一个问题。

我已经按照 MSDN 示例[HERE](http://msdn.microsoft.com/en-us/library/windows/apps/hh868282.aspx)获取数据，我可以检索数据（因此，不是连接限制问题）但问题是无论我使用什么设置，它总是以纯文本形式检索数据，包括 \ r\n 个字符。

我假设如果我可以检索结构化的 XML 将使我的工作更轻松，所以我希望你们能对我做错的地方有所了解。

这是我的代码片段：

```
<div id="xhrReport"></div>
<script>
    var xhrDiv = document.getElementById("xhrReport");
    xhrDiv.style.color = "#000000";

    WinJS.xhr({ url: "http://www.w3schools.com/xml/note.xml", responseType: "responseXML"})
        .done(
            function complete(result) {
                var xmlResponse = result.response; 

                xhrDiv.innerText = "Downloaded the page";
                xhrDiv.style.backgroundColor = "#00FF00"; //here goes my breakpoint to check response value

            },
            function error(result) {
                xhrDiv.innerHTML = "Got error: " + result.statusText;
                xhrDiv.style.backgroundColor = "#FF0000";
            },
            function progress(result) {
                xhrDiv.innerText = "Ready state is " + result.readyState;
                xhrDiv.style.backgroundColor = "#0000FF";
            }
        );

</script> 
```

这是 xmlResponse 的值

```
"<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\r\n<!-- Edited by XMLSpy® -->\r\n<note>\r\n\t<to>Tove</to>\r\n\t<from>Jani</from>\r\n\t<heading>Reminder</heading>\r\n\t<body>Don't forget me this weekend!</body>\r\n</note>\r\n" 
```

[HERE](https://stackoverflow.com/questions/11888049/passing-some-argument-to-the-callback-function-of-winjs-xhr)是一个类似的问题，它似乎正在使用 responseXML responseType （尽管它没有记录在@MSDN 指南中）。

我已经尝试过的一些事情：

*   使用 responseType 作为“文档”（根据 MSDN 指南），然后检索 result.responseXML；
*   省略 responseType 参数；
*   使用上面的方法。

现在，我没有主意了。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T22:15:05.950

尝试使用以下代码获取您想要播放的标签...（我相信它会完全按照您的需要/连接到网页，而不是根据网页/xml 标签处理结果

```
function connectToURL(){
    var url = "";

    xmlHttp = GetXmlHttpObject();
    if (xmlHttp == null) {
         return;
    }            
    xmlHttp.onreadystatechange = stateChanged;
    xmlHttp.open("GET", url,true);
    xmlHttp.send(null);
}

// your job will actually start on this one...
function stateChanged() {
        if(xmlHttp != null )
            if (xmlHttp[item.key].readyState == 4 ) {
                try {
                    var xmlDoc = xmlHttp.responseXML.documentElement.getElementsByTagName("TAGYOUWANTTOGET");
                    for (var i = 0; i < xmlDoc.length; i++) {
                       xmlDoc[i].getElementsByTagName("TAG")[0].childNodes[0].nodeValue
                    }
                } catch (e) {
                   //work on the exception
                }
            }
        }     
}

function GetXmlHttpObject(){
    var xmlHttp=null;
    try{
        xmlHttp = new XMLHttpRequest();
    }
    catch(e){
        try{
            xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
        }
        catch(e){
            xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
    }
    return xmlHttp;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T18:50:55.117

我认为您应该为 responseType 设置一个选项：“document”，就像：

```
 WinJS.xhr({
        url: "http://www.capital.bg/rss/?rubrid=" + groupId,
        responseType:"document"

    }).then(function (result) {
        console.dir(result.response);
    }); 
```

# django - 我应该在 mysite 或 mysite/mysite 中工作和创建文件吗？

> ID：13332772
> 
> 赞同：1
> 
> 时间：2012-11-11T15:53:32.713
> 
> 标签：django

![在此处输入图像描述](../Images/01b2e21bc20a2712a08061f0029bd213.png)

我刚开始使用**django 1.4**，我意识到里面有`mysite`另一个名为.`mysite``mysite`

我应该在`mysite`或`mysite/mysite?`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:59:17.433

从 django 1.4 开始，默认项目结构发生了变化，将主项目文件下移到包中。应用程序将与主项目并行存在于包中。

[更新了默认项目布局和 manage.py](https://docs.djangoproject.com/en/dev/releases/1.4/#updated-default-project-layout-and-manage-py)

尽管您的布局示例看起来不像默认的 1.4。模型应该存在于您创建的应用程序中。在您的项目中运行以下命令：

```
python manage.py startapp myapp 
```

要获得这样的布局：

```
manage.py
myapp/
    __init__.py
    models.py
mysite/
    __init__.py
    settings.py
    urls.py 
```

# android - 如何在 GridView 中为分隔线设置不同的背景和颜色？

> ID：13332773
> 
> 赞同：7
> 
> 时间：2012-11-11T15:53:33.770
> 
> 标签：android, background, android-gridview, divider

我希望在我的 GridView 中为分隔线和背景保留不同的颜色。或者我想隐藏 Gridview 周围可见的背景颜色。我尝试更改 layout_margin & padding 参数，但这并没有改变任何东西。以下是我的 GridView 的 xml 布局。

```
<GridView android:id="@+id/gvFree" 
           android:layout_width="fill_parent"
           android:layout_height="0dp" android:layout_weight="1"
           android:columnWidth="@dimen/grid_col_wd"
           android:background="@android:color/darker_gray"
           android:layout_margin="-5dp"
           android:padding="-5dp"
           android:numColumns="auto_fit"
           android:stretchMode="columnWidth"
           android:gravity="fill"
           android:horizontalSpacing="2dp"
           android:verticalSpacing="2dp"
           ></GridView> 
```

请帮忙。

![图片](../Images/d9f0b7e6bc17cd89e1b254b4bda13f94.png)

# jquery - 谷歌电子商务跟踪 addItems

> ID：13332774
> 
> 赞同：1
> 
> 时间：2012-11-11T15:53:48.557
> 
> 标签：jquery, google-analytics, e-commerce, tracking

我正在尝试使用纯 JavaScript 完成电子商务跟踪。

这是我的代码：

```
jQuery(document).ready( function (){

belegnummer = jQuery("#belegnr").text();
kundennummer = jQuery("#kundennummer").text();
menge = 0;
jQuery(".menge").each(function () {
    menge = menge + parseInt(jQuery(this).text());
})

_gaq.push(['_addTrans',
belegnummer,  // order ID - required
kundennummer,   // affiliation or store name
menge,          // total - required
'',           // tax
'',              // shipping
'',       // city
'',     // state or province
''             // country
]);

jQuery(".singleproduct").each(function () {

total = jQuery(this).find(".menge").text();
muenzid = jQuery(this).find(".muenzid").text();

_gaq.push(['_addItem',
belegnummer,           // order ID - required
muenzid,           // SKU/code - required
'',             // product name
'',             // category or variation
'1',          // unit price - required
total               // quantity - required

]); 
})
_gaq.push(['_trackTrans']); //submits transaction to the Analytics servers  

})      </script> 
```

除了 addItem 之外，跟踪工作正常。没有数据发送到谷歌分析。我尝试了各种变体，还检查了 jquery 是否正确返回了变量。没有 Javascript 错误。

有没有人已经做到了这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T01:29:07.343

我想你忘记了脚本的底部：

```
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); 
```

# android - 如果没有剩余空间，如何自动缩小多个布局？

> ID：13332777
> 
> 赞同：1
> 
> 时间：2012-11-11T15:53:59.130
> 
> 标签：android, android-layout, android-view

我想创建一个显示用户可以持有的 8 个项目的视图。当可用的项目少于 8 个时，项目的 imageView 将被替换为默认图像。

用户可以单击该项目，他将在布局顶部的 texbox 中看到每个项目的描述。此 EditText 放置在图像顶部，即“文本框”。到目前为止，我注意到有一个选项可以将图像注意到 editText，所以这个问题可能会得到解决。

在布局的底部，我想在左侧有一个取消按钮，在右侧有一个接受按钮。这样，用户可以在不选择项目或选择要使用的项目的情况下返回游戏。

问题是，当没有空间以全分辨率绘制图像时，布局会尝试以全分辨率绘制其内容。这就是为什么我的上排项目是全尺寸绘制的，而第二排是按比例缩小的。

它应该是这样的：

![在此处输入图像描述](../Images/df8bcb665c0ebd7487da631679b86e74.png)

然后我尝试了以下方法：

*   根布局是线性布局
*   第一个布局是相对布局，包含 imageview 和 EditText。
*   这些之后是一个线性布局（垂直），是另外两个线性布局（水平）的父级。
*   我在其中每个中放置了 4 个图像视图，代表项目。

![在此处输入图像描述](../Images/ab6482bb91cebd352d42996996fd5bd1.png) 到目前为止，我还没有考虑接受和取消按钮，因为我的结果还是一团糟。 ![在此处输入图像描述](../Images/b8be43c8d5cc3b7fa927507549c9cfaa.png)

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="bottom"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/textboxview"
            android:layout_width="fill_parent"
            android:layout_height="70dp"
            android:scaleType="fitXY"
            android:src="@drawable/textbox" />

        <com.gootsProject.AutoResizeTextView
            android:id="@+id/dialogText"
            style="@style/monologText"
            android:layout_width="fill_parent"
            android:layout_height="50dp" />
    </RelativeLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <ImageView
                android:id="@+id/ImageView07"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="2dp"
                android:src="@drawable/item_noitem" />

            <ImageView
                android:id="@+id/ImageView05"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="2dp"
                android:src="@drawable/item_noitem" />

            <ImageView
                android:id="@+id/ImageView04"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="2dp"
                android:src="@drawable/item_noitem" />

            <ImageView
                android:id="@+id/ImageView06"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="2dp"
                android:src="@drawable/item_noitem" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <ImageView
                android:id="@+id/ImageView03"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="2dp"
                android:src="@drawable/item_noitem" />

            <ImageView
                android:id="@+id/ImageView02"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="2dp"
                android:src="@drawable/item_noitem" />

            <ImageView
                android:id="@+id/ImageView01"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="2dp"
                android:src="@drawable/item_noitem" />

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="2dp"
                android:src="@drawable/item_noitem" />
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

你能帮我按我的意图设置这个视图吗？我迷路了。

# c# - 我正在寻找生成具体名词的列表....带有图片和相关句子

> ID：13332778
> 
> 赞同：0
> 
> 时间：2012-11-11T15:54:02.790
> 
> 标签：c#, java, android, python, dictionary

我希望以编程方式生成具体名词列表、相关图片以及描述专有名词的句子（如果可能）。

我尝试了各种字典 API - 但问题的第一部分 - 获取具体名词列表给我带来了困难。任何人都可以想到实现这一目标的好方法吗？我很想听听它！

请注意我知道哈希图是什么——存储这些数据不是我的问题——更多地获取数据是我需要帮助的——我在哪里可以获得可以编程迭代的具体名词列表。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T16:05:34.313

[NLTK](http://answers.oreilly.com/topic/1091-how-to-use-an-nltk-part-of-speech-tagger/)有一个词性标注器。您可以在一段文本上运行它并将它标识的所有名词存储为您的列表。

如果您想要一份所有名词的列表，您可能需要进行长时间的搜索——您必须浏览每本英语词典、百科全书、地图集和婴儿姓名书。一个更合理的起点是这个包含[2336](http://www.desiquintans.com/articles.php?page=nounlist)个各种名词的列表。他们认为它缺少一个完整的列表，大约有 50,000 个 - 我敢打赌，这是一个低估。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-11T16:00:42.263

**如果你想在 Java 中做** 你可以使用 HashMap 来存储数据；其中 key 可以是专有名词，并且可以为具有其他详细信息的对象赋值

```
 HashMap<String, ProperNounObj> obj = new HashMap<String, ProperNounObj>();
    where ProperNounObj class has attributes like picutureUrl and description 
```

可以通过 hashmap 方法 obj.keySet() 生成专有名词列表；这将返回一组所有专有名词。

# simulation - Verilog 'for' 循环返回值

> ID：13332782
> 
> 赞同：0
> 
> 时间：2012-11-11T15:54:27.060
> 
> 标签：simulation, verilog, xilinx

我已经写了下面的代码。

我的问题：

**在索引 1**

它以一些值进入 for 循环。它出现在“if”语句中，您可以在其中看到每个“if”的最后一条指令，类似于 'P=....' 。

**在索引 2**（下一步）

它进入“if”语句，但 P 的值不是来自步骤 1，它是初始值。

如何在下一步使用“P”的最后一个值？（索引+1）

```
module multiplier(prod, a, b, wireP, wireA, wireS);
  output [15:0] prod;
  output [16:0] wireA;
  output [16:0] wireS;
  output [16:0] wireP;
  reg    [15:0] prod;

  input  [7:0] a;
  input  [7:0] b;
  reg   [16:0] P;
  reg   [16:0] S;
  reg   [16:0] A;

  wire [16:0] tempshift;
  reg  [16:0] tempoutshift;

  arithmeticShift shiftP(tempshift,P);

  wire [16:0] tempPS;
  reg  [16:0] tempoutPS;

  carryForPbooth  sumPS(coutPS,tempPS,P,S,0);

  wire [16:0]tempPA;
  reg [16:0]tempoutPA;
  carryForPbooth  sumPA(coutPA,tempPA,P,A,0);

  reg [16:0] regP;
  reg [16:0] regA;
  reg [16:0] regS;
  integer    index;

  always @(*) begin

    A[16:9] = a[7:0];
    A[8:0]  = 9'b000000000;
    S[16:9] = ~a[7:0]+1'b1;
    S[8:0]  = 9'b000000000;
    P[16:9] = 8'b00000000;
    P[8:1]  = b[7:0];
    P[0]    = 1'b0;

    #1 tempoutPS    = tempPS;
    #1 tempoutPA    = tempPA;
    #1 tempoutshift = tempshift;

    for(index = 1; index < 9; index = index + 1) begin
      if((P[1:0] == 2'b00) | (P[1:0] == 2'b11)) begin
        #1 tempoutshift = tempshift;
        #1 P            = tempoutshift;
      end
      if(P[1:0] == 2'b01) begin
        #1 tempoutPA    = tempPA;
        #1 P            = tempoutPA;
        #1 tempoutshift = tempshift;
        #1 P            = tempoutshift;
      end
      if(P[1:0] == 2'b10) begin
        #1 tempoutPS    = tempPS;
        #1 P            = tempoutPS;
        #1 tempoutshift = tempshift;
        #1 P            = tempoutshift;
      end
    end

    #1 prod=P[16:1];
  end

  assign wireP = P;
  assign wireS = S;
  assign wireA = A;
endmodule 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:17:34.950

看起来您正在尝试创建一个可综合的移位和相加乘法器架构，其中乘法值是在 9 个时钟周期内计算的。

查看代码并删除一些临时变量，我将其缩减为：

```
module multiplier(
  input      [7:0]  a,
  input      [7:0]  b,

  output     [15:0] prod,
  output reg [16:0] A,
  output reg [16:0] S,
  output reg [16:0] P
);

  wire [16:0] tempshift;
  arithmeticShift shiftP(tempshift,P);

  wire [16:0] tempPS;
  carryForPbooth  sumPS(coutPS,tempPS,P,S,0);

  wire [16:0] tempPA;
  carryForPbooth sumPA(coutPA,tempPA,P,A,0);

  reg [3:0] index;

  always @(*) begin
    A = {  a, 9'b000000000};
    S = { -a, 9'b000000000} ;// -x => ~x+1
    P = {8'b00000000, b, 1'b0}; 

    for(index = 1; index < 9; index = index + 1) begin
      if((P[1:0] == 2'b00) | (P[1:0] == 2'b11)) begin
        #1 P            = tempshift;
      end
      if(P[1:0] == 2'b01) begin
        #1 P            = tempPA;
        #1 P            = tempshift;
      end
      if(P[1:0] == 2'b10) begin
        #1 P            = tempPS;
        #1 P            = tempshift;
      end
    end
  end

  assign prod = P[16:1];
endmodule 
```

我认为您正在使用 伪造时钟周期`#1`，这只会在模拟器中起作用，要么不会合成，要么只有最后的分配才会生效。

如果这意味着要分成 9 个时钟周期，则它需要一个与移位值相关的计数器，而不是一个 for 循环。在 Verilog 中，for 循环在编译时展开，并且应该在零时间内执行，除非用作测试台的一部分。

类似于以下的代码部分出现了多次。

```
#1 P            = tempPA;
#1 P            = tempshift; 
```

我认为您正在尝试将值应用于模块，然后使用相同的变量捕获其输出，这很难知道，因为我没有您已实例化的块的接口。如果你想合成你的代码，你不能在 Verilog 中这样做。您应该使用另一个中间变量来连接事物。

请记住，这`always @* begin ... end`是组合逻辑，除了计算答案所涉及的涟漪外，没有时间安排。为了暗示 D 型触发器，我们使用：

```
always @(posedge clk or negedge rst_n) begin
  if (~rst_n) begin
    // Reset conditions
  end
  else begin
    // Next clock conditions
  end
end 
```

# .net - 在lucene中查询字符串

> ID：13332783
> 
> 赞同：0
> 
> 时间：2012-11-11T15:54:30.940
> 
> 标签：.net, lucene

我正在将 Lucene 用于 .net。我有以下带有字段的文档，其值类似于“5 1 You love banana 5 2 Hello”我如何查询以便在查询“5 1”和“banana”时得到结果？

我正在使用 StandardAnalyzer 并分析了该字段。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:19:29.007

假设测试值是默认搜索字段，您可以编写类似`+"5 1" +banana`或交替的查询`"5 1" AND banana`（尽管我个人不喜欢 Lucene AND/OR/NOT 语法）

如果它不是默认字段，只需在搜索字段前面加上您的术语，例如：`+textfield:"5 1" +textfield:banana`

Lucene 标准查询语法在这里记录得很好： [3.6](http://lucene.apache.org/core/3_6_1/queryparsersyntax.html)版或 [4.0 版](http://lucene.apache.org/core/4_0_0/queryparser/org/apache/lucene/queryparser/classic/package-summary.html#package_description)

# oracle-sqldeveloper - SQLDev 限制结果

> ID：13332786
> 
> 赞同：1
> 
> 时间：2012-11-11T15:54:55.207
> 
> 标签：oracle-sqldeveloper

TIA 提供任何帮助/建议/进一步阅读。

我试图让 SQLDev 计算客户拥有多少包，然后只显示这些结果中的前 10 个。

所以我有这个....

```
 select  pickup_customer , count (pickup_customer)
from 
( select pickup_customer, count (pickup_customer)
    from manifest
   order by count (pickup_customer) desc ) 
 where ROWNUM <= 10
 group by pickup_customer
 order by count (pickup_customer) desc 
```

有了这个，我得到“不是一个单一的组功能”，我不知道哪里出了问题。可能非常简单的修复，我现在看不到它！

编辑：我已经尝试过这段代码，但现在出现“缺少右括号”错误！

```
select  pickup_customer , count (pickup_customer)
from 
(select pickup_customer, count (pickup_customer) --sub-query which pre-orders the results for rownum to then limit.
    from manifest
   order by count (pickup_customer) desc 
   group by pickup_customer)
 where ROWNUM <= 10    -- limits the results to be only the top 10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T23:22:43.623

以下查询应该有效。

```
SELECT pickup_customer, COUNT (pickup_customer)
FROM enrollment
WHERE ROWNUM <= 10
GROUP BY pickup_customer
ORDER BY COUNT (pickup_customer) DESC 
```

# symfony - 如何访问应用程序中的自定义配置值？

> ID：13332789
> 
> 赞同：3
> 
> 时间：2012-11-11T15:55:06.323
> 
> 标签：symfony

我在 config_prod.yml 文件中放置了一些自定义配置，如下所示：

```
store:
  plugins:
    installed: [abc] 
```

由于 SF2 将加载、编译和缓存，因此 config_prod.yml 实际上只加载一次。我想知道（不需要做一些自定义编码来使用 setParameter 将我的自定义配置值设置到容器，或者使用我自己的缓存自定义配置的方法），我如何访问这些自定义配置值？它们是否会自动缓存并以某种方式可用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T17:24:36.237

您在参数部分中定义的所有内容都可以作为参数访问：

```
parameters:
    store:
        plugins:
            installed: [abc] 
```

您可以通过调用`getParameter()`容器来访问您的配置：

```
$store = $container->getParameter('store'); 
```

如果您想在配置文件中有自己的部分：

```
store:
    plugins:
        installed: [abc] 
```

您必须创建一个扩展并公开您的捆绑包的语义配置。

在这两种情况下，容器及其所有配置都会被编译并存储在缓存中。

阅读更多：

*   [服务容器参数](http://symfony.com/doc/master/book/service_container.html#service-parameters)
*   [如何公开捆绑包的语义配置](http://symfony.com/doc/master/cookbook/bundles/extension.html)

# authentication - DotNetOpenAuth 的工作原理

> ID：13332798
> 
> 赞同：5
> 
> 时间：2012-11-11T15:56:04.963
> 
> 标签：authentication, asp.net-mvc-4, dotnetopenauth

我刚刚开始将 DotNetOpenAuth 与 MVC 应用程序一起使用，我很难理解它的实际工作原理。

据我了解，DotNetOpenAuth 将负责使用 Google/Twitter/Facebook 对用户进行身份验证（可能经过一些修改）。

之后会发生什么？用户是否根据请求进行了身份验证？用户信息是否保存在使用 IPrincipal、IIdentity 的会话中？它如何与将所有用户信息存储在应用程序数据库中的 MVC 应用程序（自定义表而不是默认的 .NET 成员资格提供程序）结合在一起？

另外，如果您知道有关该主题的任何好的教程和文档，也请分享。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T05:04:33.077

DotNetOpenAuth 仅处理身份验证步骤——您决定如何存储和调用身份验证票由您决定。使用 FormsAuthentication 来登录用户是很常见的：

```
FormsAuthentication.RedirectFromLoginPage(authResponse.ClaimedIdentifier); 
```

使用这种方法，cookie 被发送到浏览器并随每个请求一起出现——就像您使用旧的用户名/密码方法一样。

您可以[从 SourceForge 下载大量示例](http://sf.net/projects/dnoa)。

# c - 为什么会出现编译错误？

> ID：13332801
> 
> 赞同：0
> 
> 时间：2012-11-11T15:56:20.073
> 
> 标签：c, nios

这是我的程序：

```
#include <stdio.h>

#define uart0 0x860
#define uart1 0x880

void send_char( int output )
{
    int nothing;
    //while write on uart1 is not ready, wait
    while(!((*(uart1+8) & 0x0040) && 0x0040)) //+8 eller +2? 2 byte (8 bitar)
    {
        nothing = 0;

    }
    *(uart1+4) = output; // +4 eller +1? en byte (4 bitar)
}

int rec_charx(void)
{
    if(!((*(uart1+8) & 0x0040) && 0x0040)) //+8 eller +2? 2 byte (8 bitar)
    {
        return *(uart1) & 0x000f;
    }
    else
    {
        return -1;
    }
} 
```

编译器抱怨：

> '输出'之前的预期'）'

为什么？我该如何解决？我不明白投诉。

## 更新

我们已经重写了程序，但仍然出现编译错误：

```
#include <stdio.h>

static int* const uart1 = (int*) 0x880;

void send_char( int output )
{
    int nothing;
    //while write on uart1 is not ready, wait
    while(!((uart1[2] & 0x0040) && 0x0040)) //+8 eller +2? 2 byte (8 bitar)
    {
        //do nothing
        nothing = 0;

    }
    uart1[1] = output; // skriv till uart1
}

int rec_charx(void)
{
    if(!((*(uart1+8) & 0x0040) && 0x0040)) //+8 eller +2? 2 byte (8 bitar)
    {
        return *(uart1) & 0x000f;
    }
    else
    {
        return -1;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T15:59:56.310

您需要使用常量而不是那些定义：

```
#define uart0 0x860
#define uart1 0x880 
```

像这样：

```
const int * uart0 = 0x860;    
const int * uart1 = 0x868; 
```

* * *

另请注意，将类型指针递增`int *`by `1`，会将其指向 和 address `+sizeof(int*)`。因此，假设一个`int`4 字节长，`uart1 + 1`将指向 address `0x884`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T16:56:08.050

解决问题的最佳方法：阅读编译器的文档。您的编译器可能带有一个头文件，该文件已经定义了一组宏来访问 UART 硬件。

否则，这里是如何声明你的宏：

```
#include <stdint.h>

#define UART0 (*(volatile uint8_t *) 0x860)
#define UART1 (*(volatile uint8_t *) 0x880) 
```

这假设您的 UART 寄存器是 8 位的。如果它们是 16 位或 32 位，`uint8_t`请将宏定义中的类型更改为适当的类型。

您将需要调整您的代码以使用这些宏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T16:17:01.827

`#define uart0 (int*)0x860`
`#define uart1 (int*)0x880`

也得换

```
while(!((*(uart1+2) & 0x0040) == 0x0040)) 
                 ^            ^^ 
```

但这绝对不是访问内存的最佳方式。宏的东西现在可以工作了，但是将它嵌入到另一个表达式中可能会产生意外的结果或无法编译。

`(int*) xxx + y`计算 (int) 大小的表达式，即 4。

# java - 加载java本机文件库

> ID：13332804
> 
> 赞同：2
> 
> 时间：2012-11-11T15:56:39.783
> 
> 标签：java, native, loadlibrary, unsatisfiedlinkerror

我想使用一些本机文件并使用 android 项目中的一些文件。我需要这些文件用于我自己的 java 项目，并且需要导入 lib。

我正在尝试使用以下内容加载库：

```
static
{
    System.loadLibrary("mrclient_java");
} 
```

lib 文件“libmrclient_java.so”位于此文件夹中：“/libs/armeabi/”。

当我运行项目时出现以下错误：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: no mrclient_java in java.library.path
at java.lang.ClassLoader.loadLibrary(Unknown Source)
at java.lang.Runtime.loadLibrary0(Unknown Source)
at java.lang.System.loadLibrary(Unknown Source) 
```

我不知道如何配置 CLASSPATH 或任何解决此问题的方法。我没有在这个项目中使用 android。android 项目本身运行完美。

编辑：

我发现了这个问题：[How to set the java.library.path from Eclipse](https://stackoverflow.com/questions/957700/how-to-set-the-java-library-path-from-eclipse)，但仍然出现相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:01:02.193

您必须添加`java.library.path`到运行 java 的命令行中。类似于以下内容：

`java -cp YOURCLASSPATH -Djava.library.path=/libs/armeabi/ com.compnay.Main`

类路径仅用于加载 java 类。库路径用于加载本机库。

# html - CSS重复图像

> ID：13332806
> 
> 赞同：1
> 
> 时间：2012-11-11T15:57:18.340
> 
> 标签：html, css

如何`background-image` `repeat`使用 cap insets 定义？我希望图像无边框重复。是否可以在 CSS 中重复（平铺）或拉伸中间？

![带有帽子插图的可调整大小的图像。](../Images/15bbad7c384ae75237951e5f74489d89.png)

第一个（较小的）圆角矩形是我的 PNG 图像。红线显示我要定义的帽子插图。后者（更大）应显示为结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T17:38:13.240

查看 CSS3[边框图像属性](http://www.w3.org/TR/css3-background/#the-border-image)。它是为这种事情而设计的。

```
.box {
  border-image: url(my-image.gif) 20 20 20 20 repeat;
} 
```

交互式[演示在这里](http://www.norabrowndesign.com/css-experiments/border-image-anim.html)。

[大多数非 IE 浏览器都支持](http://caniuse.com/#feat=border-image)它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T15:59:43.110

这看起来你可以通过使用纯 css3 来解决这个问题

```
.box {
 background: white;
 -moz-border-radius: 15px;
 border-radius: 15px;
 -moz-box-shadow:    inset 0 0 10px #000000;
 -webkit-box-shadow: inset 0 0 10px #000000;
 box-shadow:         inset 0 0 10px #000000;
} 
```

# git - Drupal Sandbox git 存储库这么大？（包文件大小：21MB）

> ID：13332812
> 
> 赞同：3
> 
> 时间：2012-11-11T15:57:46.517
> 
> 标签：git, drupal, drupal-7, drupal-theming

我已经在沙盒中上传了 Drupal 主题。我的主题文件总大小小于 1MB，但`.git`文件夹内有包文件（文件大小为 21MB）。

如何减少打包文件的大小？

```
git gc
git repack
git verify-pack -v .git/objects/pack/pack-*.idx 
```

但仍然具有相同的文件大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:07:53.070

不幸的是，您将从这个清理操作中获得很多空间。存储库大小由对源代码所做的更改数量决定。还要考虑以下，如果您的主题涉及二进制文件（例如图像）的使用，并且这些文件更改了多次，`git`将“从头开始”存储该二进制文件，即不像以前版本的差异，而是作为全新的文件.

因此，对一个大小为 100 Kb 的文件进行十次修订，即使您只更改了其中一位，也会花费您大约兆字节。

我相信您需要选择：要么随身携带整个主题历史记录，要么节省磁盘空间。不是都。

# c# - 从 WPF 中的后台工作人员更新进度条

> ID：13332814
> 
> 赞同：3
> 
> 时间：2012-11-11T15:58:21.837
> 
> 标签：c#, multithreading, backgroundworker

我正在尝试使用`BackgroundWorker`. 最终目标是显示后台搜索的进度，但我首先想通过做一个简单的模拟来了解进度条。这是代码：

```
 public MainWindow()
    {
        InitializeComponent();

        worker = new BackgroundWorker(); // variable declared in the class
        worker.WorkerReportsProgress = true;
        worker.DoWork += new DoWorkEventHandler(worker_DoWork);
        worker.ProgressChanged += new ProgressChangedEventHandler(backgroundWorker1_ProgressChanged);
        worker.RunWorkerCompleted += worker_RunWorkerCompleted;
    }

    private void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        this.Title += " DONE";
    }

    private void worker_DoWork(object sender, DoWorkEventArgs e)
    {
        for(int j = 0; j <= 100; j++)
        {
            worker.ReportProgress(j);
            Title += j.ToString();
            Thread.Sleep(50);
        }
    }

    void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        searchProgressBar.Value = e.ProgressPercentage;
    } 
```

但是当我运行它时，它会直接跳到最后，而不会以任何方式改变进度条。当我逐步调试它时，我到达的最后一步是`worker.ReportProgress(j);`，然后控制返回到程序并被`worker_RunWorkerCompleted`调用。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:08:34.220

你忘了运行工人：

```
 worker.RunWorkerAsync(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T16:14:38.853

如果您试图更改`UI content`，您应该拨打电话`UI Dispatcher`。你`can't modify UI objects from background thread`。用这些替换你的行 -

```
App.Current.Dispatcher.Invoke((Action)delegate()
        {
            Title += j.ToString();
        }); 
```

和

```
App.Current.Dispatcher.Invoke((Action)delegate()
        {
            Title = "Done";
        }); 
```

# android - Android - 带有TextView的RelativeLayout .. tTextView中的文本不居中

> ID：13332815
> 
> 赞同：0
> 
> 时间：2012-11-11T15:58:28.627
> 
> 标签：android, android-layout, android-relativelayout, textview

我一直在这方面，我似乎无法让 ListView 中的文本居中。ListView 本身的中心很好，但里面的文字不是.. 我不想问似乎很基本..

这是我的代码：

```
<ListView
        android:id="@+id/lvVoiceReturn"
        android:layout_width="200dp"
        android:layout_height="48dp"
        android:layout_above="@+id/mute"
        android:layout_toLeftOf="@+id/mute"
        android:gravity="center" >

    </ListView> 
```

我确定它是一个简单的代码行，但我没有找到它，呃.. =/

谢谢你。机器人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:06:14.187

那是因为你用过`android:gravity="center"`

这不会使文本视图居中，而是使文本视图内的文本居中。

你想用的是

`android:layout_centerInParent="true"`

如果您使用的是线性布局，那么您可以使用

`android:layout_gravity="center"`

这是你感到困惑的地方，在相对布局中你不能使用它，因为它会给你一个语法错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T16:20:41.363

如果您正在使用带有自定义元素布局文件的自定义适配器，请在此处发布 xml。**将重力属性设置为列表视图的中心并不能确保您的列表项将居中对齐。**

# nosql - 如何从 Couchbase 查询项目的元数据？

> ID：13332816
> 
> 赞同：2
> 
> 时间：2012-11-11T15:58:31.480
> 
> 标签：nosql, metadata, couchbase

我将一些数据放入 CouchBase 1.8.1，并使其成功。但我想查询它的元数据，如过期和 att_reason（非 json 或 json）。在某些文档中，它列出了 json 格式的元数据，例如：

```
{
 "_id" : "contact_475",
 "_rev" : "1-AB9087AD0977F089",
 "_bin" : "...",
 "$flags" : 0,
 "$expiration" : 0,
 "name" : "Fred Bloggs",
} 
```

如何查询项目的元数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-29T07:45:37.763

最简单的方法是发出 HTTP 请求： `http://serveraddress:8091/couchBase/default/contact_475`

响应应包含`X-Couchbase-Meta`带有元数据的标头。更多信息在这里：http: [//xmeblog.blogspot.co.il/2013/08/couchbase-how-to-retrieve-key.html](http://xmeblog.blogspot.co.il/2013/08/couchbase-how-to-retrieve-key.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:43:19.633

正如 Pavel 一样，在 Couchbase (2.0) 中访问元数据的最常用方法是使用视图。

您还可以使用内部 TAP 协议： http: [//www.couchbase.com/wiki/display/couchbase/TAP+Protocol](http://www.couchbase.com/wiki/display/couchbase/TAP+Protocol)

您能否向我们提供有关您的用例以及为什么需要访问 meta/expiration 的更多信息？以及为什么不能使用视图（这是推荐的方法）

问候拖船

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-22T23:14:50.173

如果您想在 Couchbase 查询中查看元数据，您可以执行以下操作：

```
SELECT meta(b).* FROM bucket b 
```

您还可以通过执行以下操作来查看查询中的元数据和所有其他数据：

```
SELECT meta(b).*, * FROM bucket b 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-29T07:26:30.977

如果您只想使用[N1QL](https://www.couchbase.com/products/n1ql)查询元数据，您可以在查询下方运行，它将返回有关文档的所有元数据：

```
select meta(bucket_name) from bucket_name 
```

但是，如果您想从[Sync Gateway](https://developer.couchbase.com/documentation/mobile/current/guides/sync-gateway/index.html)获取这些信息，它将通过使用[REST API](https://developer.couchbase.com/documentation/mobile/current/references/sync-gateway/rest-api/index.html)的每个 GET 请求返回给您，REST API 还包括对这些元数据的一些过滤。

# google-apps-script - 如何替换pdf文件中的文本？

> ID：13332817
> 
> 赞同：1
> 
> 时间：2012-11-11T15:58:33.003
> 
> 标签：google-apps-script

是否可以使用 Google Apps 脚本替换 pdf 文件中的文本？

我正在尝试以下代码但没有成功替换，似乎字符串以我无法理解的方式编码。

```
 var pdfFile = DocsList.getFileById("pdf-doc-id");
  var asBlob = pdfFile.getBlob();
  var asString = asBlob.getDataAsString();
  var s2s = "old string";
  var s2r = "new string";
  var repString = asString.replace(s2s, s2r);
  var repBlob = Utilities.newBlob(repString).setContentType("application/pdf").setName("Testing");
  DocsList.createFile(repBlob); 
```

EDIT1：我得到了一个空的pdf

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:40:05.970

该函数`getDataAsString()`不返回 PDF 文件的文本内容，而是返回文件二进制内容的文本表示。该功能适用​​于任何文件，即使是那些没有文本（如图像）的文件。

不幸的是，我认为您无法使用 Apps Script 完全实现您的目标。如果您能够使用 Drive UI 将 PDF 作为 Google 文档导入，则可以使用 Apps Script 的 DocumentApp 修改文档并将其导出为 PDF。

# html - 如何创建不跟随链接的 HTML 链接？

> ID：13332823
> 
> 赞同：0
> 
> 时间：2012-11-11T15:58:59.010
> 
> 标签：html, href

你知道那些你可以通过互联网控制的网络摄像头吗？当您按下按钮向左移动时，它会向左移动......但页面上没有其他任何事情发生......这就是我需要创建的。

我有一个页面可以让我控制家里的灯。当我点击按钮时，我现在让它在一个单独的框架中加载 php 脚本（控制灯光）。但我想摆脱这个。所以基本上我想创建一个链接，它将在后台调用 php，但该链接不会对其所在的页面做任何事情。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:07:35.137

### `return false;`在`click`事件中使用 a ：

```
<a href="#" onclick="return false;">Not Follow the Link</a> 
```

### 解释

事件处理程序的返回值决定了默认浏览器行为是否也应该发生。在点击链接的情况下，这将是跟随链接，但差异在表单提交处理程序中最为明显，如果用户输入信息错误，您可以取消表单提交。

实现这种效果的现代方式是调用`event.preventDefault()`，这在[DOM 2 事件规范](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-flow-cancelation)中指定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T16:06:58.303

我喜欢jquery...

您会注意到 onclick 函数返回 false。这是为了阻止链接工作......

```
<a onclick="do_it(this)" ... 
```

然后在你的js中

```
function do_it(anchor)
{
jQuery.ajax(
    {
            url     : anchor.get_attribute('href'),
            data    : {whatever},
            type    : 'POST',
            success : function(data)
            {
                alert('woo');
            }
    }
)
return false;
} 
```

我在这里所做的几乎是：

因此，当单击锚点时，jquery 会发布到锚点的 url。如果需要，您可以包含数据。这是异步发生的，因此在 jQuery 获得响应 html（或其他）之前，您的页面上不会发生任何事情。如果你想对响应做任何事情，你可以在成功函数中得到它。

当函数返回时，它返回 false，从而阻止锚点做它通常的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T16:09:07.050

您可以使用以下 jquery 解决方案：

HTML：

```
<a href="your_page.php" id="link1">Move lights to left</a> 
```

查询：

```
<script type="text/javascript">
   $(document).ready(function() {
      $('#link1').click(function(e) {
         e.preventDefault();
         $.ajax( $(this).attr('href') );
      });
   });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T16:00:05.730

你在谈论javascript，创建一个onlick事件/函数并在特定的DIV区域实现AJAX

请查看： [http ://www.w3schools.com/ajax/ajax_examples.asp](http://www.w3schools.com/ajax/ajax_examples.asp)

```
<!DOCTYPE html>
<html>
<head>
<script>
function loadXMLDoc()
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
  }
//You need `ajax_info.txt` file with some content
xmlhttp.open("GET","ajax_info.txt",true);
xmlhttp.send();
}
</script>
</head>
<body>

<div id="myDiv"><h2>Let AJAX change this text</h2></div>
<button type="button" onclick="loadXMLDoc()">Change Content</button>

</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T16:01:43.260

您将需要使用 ajax 来实现这样的行为。

不做任何事情的链接基本上是 HTML 链接，您可以在其中将 onclick 事件绑定到返回 false 的 JavaScript 函数。这使得链接“什么都不做”，但仍然执行告诉相机向左/向右移动的 JavaScript。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-11T16:02:17.250

HTML 5 让你正式使用没有 href 属性的锚元素。但我只会将 Javascript 事件侦听器绑定到您已有的任何元素。我什至会使用 Javascript 将这些交互元素自己添加到 DOM 中，因为如果用户禁用了 JS，它们就没有任何用途。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-11T16:04:19.120

您需要 Ajax 从 PHP 中检索数据，而无需加载另一个页面。

要“禁用”链接：

```
<a href="javascript: myFunction(); return false;">Link</a> 
```

或者：

```
<a href="#" onclick="myFunction(); return false;">Link</a> 
```

或者只是编写一个普通链接并使用 jQuery（或其他库）来添加事件：

```
$('a').click(function(event) {
    // the code with ajax
    event.preventDefault();
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-11T16:04:59.150

```
<a href="#" onclick="function()">...</a> 
```

会给你看起来像一个链接的文本。

如果它不是真正的链接，您可能希望考虑使用不同类型的样式来强调这一点，以便其他带下划线的链接显示为链接，而这显示为其他内容。一切都取决于您的需求和情况。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-11T16:09:55.570

不敢相信还没有人发过这个。只需使用 javascript 无效：

```
<a href="javascript:void(0)" onclick="doWhateverFunction(this)">some click function</a> 
```

它是书中最古老的技巧之一！

# c# - 模态窗口主视图的部分页面刷新

> ID：13332824
> 
> 赞同：0
> 
> 时间：2012-11-11T15:58:59.400
> 
> 标签：c#, ajax, asp.net-mvc, asp.net-mvc-4

我的 MVC4 项目中有一个名为 Products 的主视图，它显示产品列表。

我有一个“添加产品”按钮，它会弹出一个模式窗口，呈现一个带有几个字段的视图，以及一个用于添加产品的提交按钮。

如何在不刷新整个页面的情况下使用新添加的产品更新主视图上的产品列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:04:24.020

我从未尝试过这样做，但您可以尝试以下方法：

*   让您的产品列表成为部分视图
*   让模态对话框上的提交按钮执行 Ajax 表单提交（如果您不熟悉，有很多示例和帖子解释如何执行此操作）
*   关闭模态对话框
*   重新加载局部视图

因为这是很多代码和视图，我无法提供所有示例，但如果您有具体问题，我可以尝试提供一些。

# c++ - 照明平面（openGL）

> ID：13332826
> 
> 赞同：0
> 
> 时间：2012-11-11T15:59:12.633
> 
> 标签：c++, opengl, glut

我想在我的 openGL 程序中启用照明，我已经为使用 GLUT 绘制的对象工作了。但是当我画我的长方体时

```
glBegin(5);
glVertex3f((x_+(b/2)),y_,(z_-(l/2)));
glVertex3f((x_+(b/2)),y_,(z_+(l/2)));
glVertex3f((x_-(b/2)),y_,(z_-(l/2)));
glVertex3f((x_-(b/2)),y_,(z_+(l/2)));
glVertex3f((x_+(b/2)),y_t,(z_-(l/2)));
glVertex3f((x_+(b/2)),y_t,(z_+(l/2)));
glVertex3f((x_-(b/2)),y_t,(z_-(l/2)));
glVertex3f((x_-(b/2)),y_t,(z_+(l/2)));
glVertex3f((x_+(b/2)),y_,(z_-(l/2)));
glVertex3f((x_+(b/2)),y_t,(z_-(l/2)));
glVertex3f((x_+(b/2)),y_,(z_+(l/2)));
glVertex3f((x_+(b/2)),y_t,(z_+(l/2)));
glVertex3f((x_-(b/2)),y_,(z_-(l/2)));
glVertex3f((x_-(b/2)),y_t,(z_-(l/2)));
glVertex3f((x_-(b/2)),y_,(z_+(l/2)));
glVertex3f((x_-(b/2)),y_t,(z_+(l/2)));
glVertex3f((x_-(b/2)),y_,(z_-(l/2)));
glVertex3f((x_-(b/2)),y_t,(z_-(l/2)));
glVertex3f((x_+(b/2)),y_,(z_-(l/2)));
glVertex3f((x_+(b/2)),y_t,(z_-(l/2)));
glVertex3f((x_-(b/2)),y_,(z_+(l/2)));
glVertex3f((x_-(b/2)),y_t,(z_+(l/2)));
glVertex3f((x_+(b/2)),y_,(z_+(l/2)));
glVertex3f((x_+(b/2)),y_t,(z_+(l/2)));
glEnd(); 
```

和

```
glColor3f(6,0,0); 
```

闪电不会应用在其表面上。（长方体绘制正确）

我的闪电设置是这样的：

```
glEnable(GL_DEPTH_TEST);
glEnable(GL_LIGHT0);
glEnable(GL_NORMALIZE);
glEnable(GL_COLOR_MATERIAL);
glEnable(GL_LIGHTING);

const GLfloat light_ambient[]  = { 0.0f, 0.0f, 0.0f, 1.0f };
const GLfloat light_diffuse[]  = { 1.0f, 1.0f, 1.0f, 1.0f };
const GLfloat light_specular[] = { 1.0f, 1.0f, 1.0f, 1.0f };
const GLfloat light_position[] = { 2.0f, 5.0f, 1.0, 1.0f };

const GLfloat mat_ambient[]    = { 0.7f, 0.7f, 0.7f, 1.0f };
const GLfloat mat_diffuse[]    = { 0.8f, 0.8f, 0.8f, 1.0f };
const GLfloat mat_specular[]   = { 1.0f, 1.0f, 1.0f, 1.0f };
const GLfloat high_shininess[] = { 100.0f };

glLightfv(GL_LIGHT0, GL_AMBIENT,  light_ambient);
glLightfv(GL_LIGHT0, GL_DIFFUSE,  light_diffuse);
glLightfv(GL_LIGHT0, GL_SPECULAR, light_specular);
glLightfv(GL_LIGHT0, GL_POSITION, light_position);

glMaterialfv(GL_FRONT, GL_AMBIENT,   mat_ambient);
glMaterialfv(GL_FRONT, GL_DIFFUSE,   mat_diffuse);
glMaterialfv(GL_FRONT, GL_SPECULAR,  mat_specular);
glMaterialfv(GL_FRONT, GL_SHININESS, high_shininess); 
```

有人知道我的缺陷吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:06:25.490

你没有给它任何法线。您需要使用 glNormal3f 来指定法线。

```
glBegin(GL_TRIANGLE_STRIP);
glNormal3f(0,1,0);
glVertex3f((x_+(b/2)),y_,(z_-(l/2)));
glVertex3f((x_+(b/2)),y_,(z_+(l/2)));
glVertex3f((x_-(b/2)),y_,(z_-(l/2)));
glVertex3f((x_-(b/2)),y_,(z_+(l/2)));
glNormal3f(-1,0,0);
// etc. 
```

# c++ - 自定义 QDockWidget 显示

> ID：13332832
> 
> 赞同：7
> 
> 时间：2012-11-11T15:59:25.700
> 
> 标签：c++, python, qt, pyqt, qt-designer

您将如何显示其中的dockwidgets/centralwidget，其中dockwidget或`Qt::BottomDockWidgetArea`不`Qt::TopDockWidgetArea`占用空间？`Qt::LeftDockWidgetArea``Qt::RighDockWidgetArea`

这是实际显示，有 2 个停靠小部件和右上角的中央小部件：

![码头小部件显示实际](../Images/47a0d8597d05ae893620b825c4072db9.png)

这将是首选显示：

![首选dockwidget显示](../Images/e51512a0ee5874119d3b13bc72607879.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T09:14:54.453

您可能应该使用[QMainWindow](http://qt-project.org/doc/qt-4.8/qmainwindow.html)的角功能来获得您想要的行为。

像这样的东西可能会起作用（无法测试它是否编译，抱歉）：

```
mainWindow->setCorner(Qt::TopLeftCorner, Qt::LeftDockWidgetArea);
mainWindow->setCorner(Qt::TopRightCorner, Qt::RightDockWidgetArea);
mainWindow->setCorner(Qt::BottomLeftCorner, Qt::LeftDockWidgetArea);
mainWindow->setCorner(Qt::BottomRightCorner, Qt::RightDockWidgetArea); 
```

请参阅：* [QMainWindow::setCorner(...)](http://qt-project.org/doc/qt-4.8/qmainwindow.html#setCorner)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T03:45:20.550

似乎让这个工作的（有点奇怪的）技巧是将 QMainWindow 设置为主窗口的中央小部件。

这是此[Qt FAQ 示例](https://wiki.qt.io/Technical_FAQ#Is_it_possible_for_either_the_left_or_right_dock_areas_to_have_full_height_of_their_side_rather_than_having_the_bottom_take_the_full_width.3F)的 PyQt 端口：

```
from PyQt4 import QtGui, QtCore

class MainWindow(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QMainWindow.__init__(self)
        self.setWindowTitle('Extended Side Dock Areas')
        self.window = QtGui.QMainWindow(self)
        self.window.setCentralWidget(QtGui.QTextEdit(self.window))
        self.window.setWindowFlags(QtCore.Qt.Widget)
        self.setCentralWidget(self.window)
        self.dock1 = QtGui.QDockWidget(self.window)
        self.dock1.setWidget(QtGui.QTextEdit(self.dock1))
        self.window.addDockWidget(
            QtCore.Qt.BottomDockWidgetArea, self.dock1)
        self.dock2 = QtGui.QDockWidget(self)
        self.dock2.setAllowedAreas(
            QtCore.Qt.LeftDockWidgetArea | QtCore.Qt.RightDockWidgetArea)
        self.dock2.setWidget(QtGui.QLabel('Left Dock Area', self.dock2))
        self.addDockWidget(QtCore.Qt.LeftDockWidgetArea, self.dock2)
        self.dock3 = QtGui.QDockWidget(self)
        self.dock3.setWidget(QtGui.QLabel('Right Dock Area', self.dock3))
        self.addDockWidget(QtCore.Qt.RightDockWidgetArea, self.dock3)

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = MainWindow()
    window.show()
    sys.exit(app.exec_()) 
```

# javascript - JQuery获取孩子的最高高度并放入父元素

> ID：13332833
> 
> 赞同：5
> 
> 时间：2012-11-11T15:59:37.837
> 
> 标签：javascript, jquery, math, jquery-plugins

在[上一个问题](https://stackoverflow.com/q/13323621/819276)`<li>`中，我在页面上的 UL 组的各个标签上设置了 Equal heights 。但现在我意识到，为了更好的主题化，我想`<li>`在 UL 组内的一组标签上设置最高高度，并将其设置为其各自的父级`<ul>`本身，以便更好地对我的页面进行主题化。我在这里有[一个新的小提琴](http://jsfiddle.net/highrockmedia/nDLg5/33/)，我尝试`<li>`在 UL 组中找到最高高度并将其设置为 UL。

问题仍然是特异性。第一个 UL 组的最高高度`<li>`被设置为`<ul>`页面上的所有标签。UL 组（第 1 行）中最高`<li>`的高度为 260px，第 2 行的高度为 156px。但是，页面上的两个 UL 标记仍设置为 260 像素。UL 将在页面上增长，因此我希望代码是可扩展的，而不必在 JQuery 中指定每一行。到目前为止，我已经尝试过：

```
// get the height of the tallest LI within each UL group
    var max = Math.max.apply(Math, $(".item-list ul li").map(
        function(){
          return $(this).height();
        }
      ));

// now render the height in each parent UL

    $(".item-list ul").each(function() {
      $(this).find(".item-list ul").height(max);
    }); 
```

...但第二部分不起作用。这有效，但...

```
$(".item-list ul").height(max); 
```

...它将最高的高度`<li>`放在所有 UL 标签的页面上。理想情况下，最终的 HTML 应该是：

```
<div class="item-list row-1">
<ul style="height: 260px;">
etc...

<div class="item-list row-2">
<ul style="height: 156px;">
etc... 
```

**基于下面[这个的](https://stackoverflow.com/a/13332924/819276)[工作版本](http://jsfiddle.net/highrockmedia/nDLg5/)**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-11T16:09:44.913

如果我理解正确，您应该在循环中执行`max`操作。`.each()`

```
function thisHeight(){
    return $(this).height();
}

$(".item-list ul").each(function() {
    var thisULMax = Math.max.apply(Math, $(this).find("li").map(thisHeight));
    $(this).height(thisULMax);
}); 
```

我还将 map 函数设为命名函数，以便您可以重用它。

* * *

这里有几个更清洁的解决方案。

这个传递一个函数以`height()`将其用作迭代器。缩短了一点。

```
function thisHeight(){
    return $(this).height();
}

$(".item-list ul").height(function() {
    return Math.max.apply(Math, $(this).find("li").map(thisHeight));
}); 
```

* * *

这是另一种使用方式`.reduce()`，尽管它需要 IE8 及更低版本的填充程序。

```
function maxHeight(max, elem) {
    var h = $(this).height();
    return max > h ? max : h;
}

$(".item-list ul").height(function() {
    return $(this).find("li").toArray().reduce(maxHeight, 0);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T16:24:13.590

似乎很复杂？

```
$(".item-list ul").each(function(idx, elm) {
     var LIheight = 0;
     $('li', elm).each(function() {
         if ($(this).height() > LIheight) LIheight = $(this).height();
     }).height(LIheight);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T16:13:29.150

既然你有两个`<ul>`“.item-list”类标签，为什么不试试这个：

```
$(".item-list ul").eq(0).height(max); 
```

这只会设置 HTML 中第一个标签的高度。

# iphone - 用动画部分替换 window.rootViewController

> ID：13332836
> 
> 赞同：7
> 
> 时间：2012-11-11T15:59:49.480
> 
> 标签：iphone, objective-c, ios, xcode, uiviewcontroller

我正在尝试用动画替换窗口 rootViewController ，它只能部分工作。

我以编程方式创建了一个 UINavigationController -

```
UIStoryboard *storyBoard = [UIStoryboard storyboardWithName:@"InboxStoryboard" bundle:nil];

UIViewController *innerViewController = [storyBoard instantiateViewControllerWithIdentifier:@"centerView"];
UINavigationController *centerView = [[UINavigationController alloc] initWithRootViewController:innerViewController]; 
```

之后，我替换了包装在动画块中的窗口根视图控制器 -

```
[UIView transitionWithView:self.viewController.view.window
                  duration:0.5
                   options: UIViewAnimationOptionTransitionFlipFromLeft
                animations:^{
                    self.viewController.view.window.rootViewController = centerView;
                }
                completion:nil]; 
```

发生的情况是动画发生了，但我创建的控制器仅部分可见，请看下图 -

[![](../Images/64eee35fd9f39bcdd787647a57adcd96.png)](https://i.stack.imgur.com/rfbwh.png) [![](../Images/aff10df986281f8d28823dea1d60fa6b.png)](https://i.stack.imgur.com/zyjhn.png)

因此，正如您在旋转过程中看到的那样，视图仅被部分渲染。

以前有人遇到过这种行为吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-20T09:37:04.847

因此，经过*长时间*的搜索，我发现问题出在`[UIView transitionWithView:...]` Searching a bit more in stackoverflow 我发现[Swapping rootViewController with animation](https://stackoverflow.com/questions/8827891/swapping-rootviewcontroller-with-animation)

使用`[UIView transitionFromView:..]`完美。

新代码——

```
[UIView transitionFromView:self.window.rootViewController.view
                    toView:self.centerViewController.view
                  duration:0.5
                   options:UIViewAnimationOptionTransitionCurlUp
                completion:^(BOOL finished)
                {
                    self.window.rootViewController = self.centerViewController;
                }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:38:23.513

您是否使用自动布局？如果是这样，请尝试禁用它。我在自动布局和动画方面遇到了多个问题。

# wmi - 如何在客户机中获取 hyper-v 主机处理器信息

> ID：13332843
> 
> 赞同：0
> 
> 时间：2012-11-11T16:00:05.730
> 
> 标签：wmi, processor, hyper-v

我的问题是在客户机中如何获取 hyper-v 主机处理器信息。我不想使用 wmi 因为它需要关闭主机防火墙。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T19:34:42.410

Hyper-V API**是**WMI，因此您所做的任何事情最终都会调用 WMI。

您的问题是主机没有网络路径，或者您关闭了 WMI 远程调用所通过的端口。

XenServer 解决此问题的方法是创建一个主机隔离网络。在具有稍微不那么严格的防火墙规则的主机上创建一个适配器。将 NIC 添加到来宾上的网络，以便它可以进行远程调用。

# google-chrome-extension - 当我们在扩展弹出窗口之外单击时自动关闭如何保持打开状态

> ID：13332847
> 
> 赞同：3
> 
> 时间：2012-11-11T16:00:32.863
> 
> 标签：google-chrome-extension, refresh

是否有允许我在扩展程序保持打开状态时选择文本的功能。通常，当我使用扩展弹出窗口并在扩展外部单击时，扩展关闭。有什么办法可以避免这种情况。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-11-19T11:25:53.570

首先选择部分，然后打开您的扩展程序。在 popup.js 中使用它从页面 dom 中获取选定的内容

```
document.getSelection().toString() 
```

使用

```
 $('#addSelected').click(function() {
    chrome.tabs.executeScript(null,{
        //code: 'document.getSelection().toString()'
        file: "getSelectedContent.js"
      },function(r){
      });
}); 
```

我也在寻找可以阻止我的 popup.html 关闭的东西（在弹出窗口之外单击）

# c# - A 完成后启动事件 B

> ID：13332849
> 
> 赞同：1
> 
> 时间：2012-11-11T16:00:47.897
> 
> 标签：c#

我有一个非常简单的函数*close(); 的退出按钮；*.

我怎样才能做到这一点？声音结束（2-3 秒）应用程序关闭后。

```
private void button1_Click(object sender, EventArgs e)
{
// Play sound
this.playSound();

// WAIT FOR END OF SOUND

Close();
}

private void playSound()
{
            Random random = new Random();

            // Create list of quit music
            List<System.IO.UnmanagedMemoryStream> sound = new List<System.IO.UnmanagedMemoryStream>
            {
                global::Launcher.Properties.Resources.sound_quit_1,
                global::Launcher.Properties.Resources.sound_quit_2,
                global::Launcher.Properties.Resources.sound_quit_3,
                global::Launcher.Properties.Resources.sound_quit_4,
            };

            // Random, set and play sound
            (new SoundPlayer(sound[random.Next(sound.Count)])).Play();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:08:46.070

如果`playSound()`是同步的，你可以试试

```
private void button1_Click(object sender, EventArgs e)
{
  // Play sound
  this.playSound();
  BackgroundWorker wk = new BackGroundWorker();
  wk.RunWorkerCompleted += (s,e) => {Thread.Sleep(2000); Close(); };
  wk.RunWorkerAsync();
} 
```

这可以防止 GUI 看起来被锁定，因为它可以使用更简单的方式

```
private void button1_Click(object sender, EventArgs e)
{
  // Play sound
  this.playSound();
  Thread.Sleep(2000);
  Close()
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T16:15:39.333

```
(new SoundPlayer(sound[random.Next(sound.Count)])).Play(); 
```

这将异步播放声音，因此它发生在单独的线程上。缺点是没有关于声音何时结束的信息。

您可以做的是[`PlaySync`](http://msdn.microsoft.com/en-us/library/system.media.soundplayer.playsync.aspx)在单独的线程上手动使用并回调主线程，然后关闭应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T16:16:09.657

应用程序将关闭，因为您正在播放的声音是在与主用户界面线程不同的线程中播放的。`(new SoundPlayer(sound[random.Next(sound.Count)])).Play();`如果您想`(new SoundPlayer(sound[random.Next(sound.Count)])).PlaySync();`使用用户界面 (UI) 线程播放声音，您可以随时更改。这样应用程序将等待`SoundPlayer`停止播放 Wave Sound 文件，然后关闭`Form`

**例子**

```
private void button1_Click(object sender, EventArgs e)
{
    // Play sound
    this.playSound();

    // WAIT FOR END OF SOUND

    Close();
}
private void playSound()
{
    Random random = new Random();

    // Create list of quit music
    List<System.IO.UnmanagedMemoryStream> sound = new List<System.IO.UnmanagedMemoryStream>
    {
        global::StrongholdCrusaderLauncher.Properties.Resources.sound_quit_1,
        global::StrongholdCrusaderLauncher.Properties.Resources.sound_quit_2,
        global::StrongholdCrusaderLauncher.Properties.Resources.sound_quit_3,
        global::StrongholdCrusaderLauncher.Properties.Resources.sound_quit_4,
    };

    // Random, set and play sound
    (new SoundPlayer(sound[random.Next(sound.Count)])).PlaySync(); //We've changed Play(); to PlaySync(); so that the Wave Sound file would be played in the main user interface thread
} 
```

谢谢，
我希望你觉得这有帮助:)

# php - 我将如何制作一个实时地图程序来显示我网站上的所有人？

> ID：13332854
> 
> 赞同：0
> 
> 时间：2012-11-11T16:01:28.300
> 
> 标签：php, jquery, html, mysql, maps

我想使用 MySQL、jQuery 和 PHP——可能是谷歌地图或我自己的带有叠加层的矢量。

我正在尝试做的演示：[http ://www2.clustrmaps.com/counter/maps.php?url=http://clustrmaps.com](http://www2.clustrmaps.com/counter/maps.php?url=http://clustrmaps.com)

我有一个数据库，它每秒更新大约 200 条记录，显示访问者的 IP。我想知道是否有一种方法可以在地图上显示它 - 我在想：刷新页面并每 1 秒获取最新的数据库结果。那么对于这 50 条左右的记录，使用某种 API IP 匹配器，然后将它们放在地图上的坐标中？有没有更简单的方法？

感谢一些帮助。完成后，我将在这里自由发布我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:21:14.517

与其说是答案本身，不如说是一些想法。

无论您将访问者 IP 放入数据库中的任何代码都应该执行 GeoIP 查找并将`result`+`ip address`放入某种缓存中（memcache、redis、apc，如果它在单个服务器上），并为缓存的项目提供一个 TTL一会儿。

如果您只使用 PHP，那么在服务器上有一个端点，它通过读取缓存中的项目返回一个纬度/经度数组。

在浏览器中，每隔 x 秒向端点发送一个请求，并在地图上绘制项目。

提高上述效率还有很大的空间，但它应该是一个很好的起点，并且可以避免不必要地敲击你的数据库。

对于 GeoIP 看看[MaxMind](http://www.maxmind.com/en/home)，他们有一个免费的 IP 地址到使用 PHP api 的国家/城市产品。

# android - Android：如果图像不存在，会返回什么 createFromPath 方法？

> ID：13332855
> 
> 赞同：1
> 
> 时间：2012-11-11T16:01:38.800
> 
> 标签：android, view, imageview

如果我必须在 ImageView 中设置图像，从我的 sdcard 中获取，我使用以下代码：

```
 Drawable c = Drawable.createFromPath(imgPath);     
 if(c!=null)
    imageView.setImageResource(c); 
```

我会知道是否需要对文件进行存在控制。如果图像不存在，会返回什么方法 createFromPath？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:04:14.467

从源[代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.6_r2/android/graphics/drawable/Drawable.java#Drawable.createFromPath%28java.lang.String%29)：`Drawable`

```
 return null; 
```

如果您将 null 作为输入参数，它也会返回 null。

# c++ - Qt4 与 UI 线程的接口

> ID：13332859
> 
> 赞同：0
> 
> 时间：2012-11-11T16:01:52.900
> 
> 标签：c++, qt4

我有一个 CLI 应用程序，我正在扩展它以提供一个用户界面来帮助提高可用性，并且正在使用 Qt-4.8.3。

应用程序连接到 IRC 服务器，每个连接都驻留在自己的线程中接收数据。解析器在不同的线程中运行，然后处理数据并做出相应的反应——创建通道、添加用户等。

我一直在查看文档，只是无法决定（或真正看到）在我的实例中更新 UI 最有用的方法是什么——我是否应该创建一个从 QThread 继承的类并运行它，做一些诡计QFuture 和 QtConcurrent，创建一个自定义结构并将其填充到 UI 线程，使用 customEvent()，还是有更好的方法？代码的易读性和性能是最高要求。

我目前拥有的代码运行完美，但在解析器线程中自然地创建一个新的 QWidget 会立即中断，并通知它不是 UI 线程。

只有一个类（目前，它继承 QObject 并提供信号 + 插槽功能）用于在 QApplication 上运行 exec，并且还包含服务器、通道、用户等的创建函数。

如果需要，我可以发布一些代码，但是代码很多，我不确定它是否真的相关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T16:13:13.800

执行此操作的规范方法是创建 QObject/QThread 对（或多个 QObject 和单个 QThread，如果您希望多个函数在同一个线程中运行。）您不是继承 QThread，而是继承 QObject，创建一个 QThread 并移动您的该线程的 QObject 子类实例，带有`moveToThread()`. QThread 的预期用途是作为操作系统线程功能的接口，而不是作为运行代码的容器。（见[http://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation](http://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation)）。

当然，所有与 GUI 的通信都必须使用信号和插槽进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T16:13:43.347

这种情况听起来很常见。它只是将处理后的数据从线程转发到主线程以进行 UI 更新的基本解决方案。

The easiest way to do it is to just make use of the SIGNAL/SLOT mechanism. Your main thread should be connected to signals from your parser. When data is ready in your parser, just emit a signal with the data structure that you choose to use. The data structure is simply whatever suits your needs for communicating the data. Just a struct or whatever you want.

# matlab - 使用 Intel Parallel Studio XE 2013 Fortran 编译器和 Matlab R2011a 创建 MEX 文件

> ID：13332864
> 
> 赞同：0
> 
> 时间：2012-11-11T16:02:09.163
> 
> 标签：matlab, fortran, intel, mex

我想使用 Intel Parallel Studio XE 2013 附带的 Fortran 编译器为 Matlab 编译 MEX 文件。我目前在 Windows 7（64 位）上运行 Matlab 2011a（32 位），我想知道英特尔编译器的 XE 2013 版本是否可以与这个版本的 Matlab 一起使用。

[显然版本 13 是 Intel Fortran 编译器（维基百科](http://en.wikipedia.org/wiki/Intel_Fortran_Compiler)）的最新稳定版本，但 Matlab 的 R2011a 仅正式支持 Intel Fortran 版本 11.1（[Mathworks 编译器](http://www.mathworks.com/support/compilers/R2011a/win32.html)）。

英特尔 Fortran 编译器的最新版本（例如 13.0）能否与 Matlab 的 R2011a（Matlab 的旧版本）一起使用，还是我需要编译器的*确切*版本才能成功构建？

哪种编译器组合可以很好地工作？是否可以仅使用英特尔 Parallel Studio XE 2013 的安装程序安装英特尔 Fortran 11.1 版？

* * *

有一篇博客文章讨论了如何需要 .stp 和 .bat 文件来更新 Matlab 用于编译器的默认位置。显然，Matlab 会扫描与每个编译器版本对应的`\bin\win32\mexopts`目录`.stp`和文件。`.bat`

[http://www.walkingrandomly.com/?p=4064](http://www.walkingrandomly.com/?p=4064)

对于我安装的 Matlab 版本，英特尔编译器的默认位置似乎是硬编码的：

```
my $default_location = "C:\\Program Files\\Intel\\Compiler\\11.1\\054\\"; 
```

因此，也许每个新版本的编译器都需要稍微更新其中一些文件？我认为只需要进行微小的更改。

# javascript - 通过 jquery get 函数获取 html 文件。姜戈

> ID：13332867
> 
> 赞同：0
> 
> 时间：2012-11-11T16:02:22.467
> 
> 标签：javascript, jquery, django

在我的 django 应用程序中，我显示用户 facebook 好友列表。为了每 10 分钟刷新一次，我把这个列表放在另一个视图和 html 中，我使用了一个 get 请求来获取它并将它显示在我不想要的页面上。

这是我有朋友列表的 get_fb_friends.html 文件：（这是我与我创建的视图相关联的 html 文件。这是我在向用户显示的页面上获取我不想显示的列表的地方）：

```
 {% for friend in group %}
    <li>{{ friend.name }} </li>
   {% endfor %} 
```

以及我如何在模板中导入它：（这是我不想为用户显示列表的页面）。

```
JS:
     setInterval(function(){
        $.get('/mysite/get_fb_friends/', function(data) {
        $('.get_fb_friends').html(data);
    });
    }, 600000);

    return jQuery(a).text().toUpperCase().indexOf(m[3].toUpperCase()) >= 0;
};

   $(function() {
   $('#searchbox').on('keyup', function() {
    var w = $(this).val();
   if (w) {
    $('#friendlist li').hide();
    $('#friendlist li:Contains('+w+')').show();
  } else {
    $('#friendlist li').show();                  
 }
 });
 });

 HTML:

     <div class='get_fb_friends'> </div> 
```

然后，我不想在此列表顶部包含搜索栏，以便用户能够搜索他想要的朋友。所以在我的 get_fb_friends.html 中，我添加了：

```
 HTML:
    <input id="searchbox" type="text" placeholder="Search" />    
    <ul id="friendlist">
    {% for friend in group %}
    <li>{{ friend.name }} </li>
    {% endfor %} 
```

如果我在页面 www.mysite/get_fb_friends 上使用此搜索栏，它会完美运行，但一旦通过 jquery get 请求（即在我不想为用户显示它的页面上）获得它就不再适用；我输入一个字母，所有的名字都消失了。

看起来当我通过 jquery get 函数获取 html 文件时，它没有在我的 jquery 函数中保留我需要的“li”。

对正在发生的事情有任何想法吗？

我希望我的问题很清楚，谢谢你的帮助。

编辑：

我的主页：

```
 HTML:
 <div class="friendlist" id="friendlist"> 

 JS:

 $.get('/mysite/get_fb_friends/', function(data) {
    $('.friendlist').html($(data).find($('#friendlist').html()));
    });

 return jQuery(a).text().toUpperCase().indexOf(m[3].toUpperCase()) >= 0;
    };

   $(function() {
    $('#searchbox').on('keyup', function() {
      var w = $(this).val();
       if (w) {
        $('#friendlist li').hide();
        $('#friendlist li:Contains('+w+')').show();
      } else {
        $('#friendlist li').show();                  
     }
     });
     }); 
```

我的远程页面：

```
 HTML:
 <input id="searchbox" type="text" placeholder="Search" />    
 <ul id="friendlist" class="friendlist">

  {% for friend in group %}
    <li>{{ friend.name }}</li>
  {% endfor %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:22:11.077

我相信您真的只想更新列表内容，而不是`input`每次刷新都替换完整列表本身。

在这种情况下，你会想要主页中的所有 JS，将远程文件的输出更改为简单地发送回`LI`标签并将它们插入新目标`friendlist`。此插入可以是完全替换，或仅附加新找到的名称。不确定您的应用打算如何处理这方面的问题

如果用户正在对输入进行任何过滤，您还可以添加一个标志以不进行 ajax 调用。

标志可能类似于

```
$('#searchbox').on('focus blur', function(){
   $(this).toggleClass('active')
}) 
```

然后在`setInterval`

```
setInterval(function(){
        if( ! $('#searchbox').hasClass('filter') ){
            $('#friendlist').load('/mysite/get_fb_friends/')
       }
    }, 600000); 
```

# c# - Python sorted() 函数并返回多个值

> ID：13332872
> 
> 赞同：0
> 
> 时间：2012-11-11T16:03:23.493
> 
> 标签：c#, python, porting

我正在尝试将 Python 程序转换为 C#。我不明白这里正在做什么。

```
def mincost(alg):
    parts = alg.split(' ')
    return sorted([cost(0, parts, 'G0 '),cost(1, parts, 'G1 ')], key=operator.itemgetter(1))[0]

def cost(grip, alg, p = '', c = 0.0, rh = True):
    if (len(alg) == 0):
        return (postProcess(p),c) 
```

`postprocess`返回一个字符串

`cost`返回 sorted() 函数上使用的多个参数？sorted() 函数如何使用这些多个值？

做`key=operator.itemgetter(1)`什么？这是排序的基础，所以在这种情况下，多值返回`cost`，它会使用 的值`c`吗？

有没有办法在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T17:25:02.040

那里的使用`sorted`有点奇怪。您可以通过简单的 if 语句轻松替换它。更奇怪的是，它`cost`返回的只是`c`返回元组的第二个值。In `mincost`,`cost`永远不会使用`c`非默认值调用，因此`c`总是`0.0`使排序变得非常多余。但我想关于成本函数有一些缺失的部分。

不过，您可以像这样实现它的功能：

```
string MinCost (string alg) {
    List<string> parts = alg.split(" ");
    Tuple<string, double> cost1 = Cost(0, parts, "G0 ");
    Tuple<string, double> cost2 = Cost(1, parts, "G1 ");

    if (cost1[1] < cost2[1])
        return cost1[0];
    else
        return cost2[0];
}

Tuple<string, double> Cost (int grip, List<string> alg, string p="", double c=0.0, bool rh=True) {
    if (alg.Count == 0)
        return new Tuple<string, double>(PostProcess(p), c);

    // ... there should be more here
} 
```

*（未经测试）*

# python - 如何从 pygtk 应用程序设置全局 X/gnome 键绑定？

> ID：13332876
> 
> 赞同：1
> 
> 时间：2012-11-11T16:04:14.690
> 
> 标签：python, gtk, pygtk

我想要一个全局键绑定来设置我的应用程序的焦点，关于如何从 python/GTK 实现这一点的任何想法？

# qt - 在不使用 QPixmap 的情况下让 favicon.ico 进入 QIcon

> ID：13332880
> 
> 赞同：1
> 
> 时间：2012-11-11T16:04:28.650
> 
> 标签：qt, qt4, qicon

我正在尝试从网站的 favicon.ico 文件中创建一个 QIcon 对象。由于此下载不一定发生在 GUI 线程上，因此我无法使用 QPixmap，到目前为止，我还没有弄清楚如何在不使用 QPixmap 的情况下从 QImage 转换为 QIcon，所以我不能使用 QImageReader 之类的东西。

我已经得到以下代码工作：

```
QUrl url("http://www.google.com/favicon.ico");
QNetworkRequest request(url);

QNetworkReply* pReply = manager.get(request);

// ... code to wait for the reply ...

QByteArray bytes(pReply->readAll());

QFile file("C:/favicon.ico");
file.open(QIODevice::WriteOnly);
file.write(bytes);
file.close();

QIcon icon("C:/favicon.ico");
return icon; 
```

但是，我想避免编写临时文件。所以我尝试了类似...

```
QBuffer buffer(&bytes);
buffer.open(QIODevice::ReadOnly);
QDataStream ds(&buffer);

QIcon icon;
ds >> icon; 
```

但这不起作用。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:08:08.307

`QDataStream`不起作用，因为它期望来自流的 PNG 图像。

我也不会使用临时文件方法，因为它仍然可能`QPixmap`在引擎盖下构建一个。事实上，`QIcon`不保证是线程安全的，应该避免在非 GUI 线程中使用。

I would just keep the byte array as is and pass it back to the GUI thread. Convert it into a QPixmap then a QIcon when you need to show it. It's not really so heavy a computation anyway.

# web-services - REST Web 服务和 Keep-Alive

> ID：13332883
> 
> 赞同：7
> 
> 时间：2012-11-11T16:04:59.120
> 
> 标签：web-services, rest, keep-alive

我正在建立一个面向服务的 Web 应用程序。UI 部分（一个 Web 应用程序）正在使用我正在编码的 REST Web 服务。所以我在服务器端和客户端都有手。

我只是想知道在这种情况下设置 HTTP keep-alive 是否有意义。如果是的话，我很好奇为什么。

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-11T16:12:47.557

是的，它确实！从我在服务器上的测试来看，我可以在没有保持连接的情况下每秒对我的 REST Web 服务进行 300 次调用，在保持连接状态下超过 2000 次。

您将不得不对使用模式进行一些分析 - 通常用户驱动的使用会突然出现，因此保持 keepalive 超时非常短是有意义的，只是为了处理单个突发。

# ruby-on-rails-3 - 在项目文件夹中安装 gems

> ID：13332885
> 
> 赞同：1
> 
> 时间：2012-11-11T16:05:22.913
> 
> 标签：ruby-on-rails-3, gem, bundler

有没有办法通过安装gem，`bundle install`所以它们不会安装在 ruby​​ 文件夹中，而是安装在项目的文件夹中？（我将使用 .gitignore ）

有没有办法只对一些宝石这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T16:32:11.977

您可以使用以下命令指定安装路径`--path`：

```
bundle install --path='./gems/' 
```

这是一个记住的选项，因此您只需要在第一次指定它。

# python - numpy中二维数组的选定元素的矢量化赋值语句

> ID：13332887
> 
> 赞同：1
> 
> 时间：2012-11-11T16:05:33.460
> 
> 标签：python, arrays, numpy, indexing, vectorization

我是python的初学者。我想知道是否有一种“好”的方法可以在不使用 for 循环的情况下执行此操作。考虑问题

```
u = zeros((4,2))
u_pres = array([100,200,300])
row_col_index = array([[0,0,2], [0,1,1]]) 
```

我想将 u[0,0]、u[0,1] 和 u[2,1] 分别分配为 100,200 和 300。我想做一些形式

```
u[row_col_index] = u_pres 
```

如果你是一个一维数组，那么这样的分配是有效的，但我无法弄清楚如何使它对二维数组起作用。您的建议将是最有帮助的。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:22:35.493

您快到了。

您需要的是以下内容：

```
u[row_col_index[0], row_col_index[1]] = u_pres 
```

解释：

既然你说你是 Python 的初学者（我也是！），我想我可以告诉你这个；以您的方式加载模块被认为是*[不合时宜的：](http://faassen.n--tree.net/blog/view/weblog/2005/08/06/0)*

```
#BAD
from numpy import *
#GOOD
from numpy import array #or whatever it is you need
#GOOD
import numpy as np #if you need lots of things, this is better 
```

解释：

```
In [18]: u = np.zeros(10)

In [19]: u
Out[19]: array([ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.])

#1D assignment
In [20]: u[0] = 1

In [21]: u[1] = 10

In [22]: u[-1] = 9 #last element

In [23]: u[-2] = np.pi #second last element

In [24]: u
Out[24]: 
array([  1\.        ,  10\.        ,   0\.        ,   0\.        ,
         0\.        ,   0\.        ,   0\.        ,   0\.        ,
         3.14159265,   9\.        ])

In [25]: u.shape
Out[25]: (10,)

In [27]: u[9] #calling
Out[27]: 9.0

#2D case
In [28]: y = np.zeros((4,2))

In [29]: y
Out[29]: 
array([[ 0.,  0.],
       [ 0.,  0.],
       [ 0.,  0.],
       [ 0.,  0.]])

In [30]: y[1] = 10 #this will assign all the second row to be 10

In [31]: y
Out[31]: 
array([[  0.,   0.],
       [ 10.,  10.],
       [  0.,   0.],
       [  0.,   0.]])

In [32]: y[0,1] = 9 #now this is 2D assignment, we use 2 indices!

In [33]: y[3] = np.pi #all 4th row, similar to y[3,:], ':' means all

In [34]: y[2,1] #3rd row, 2nd column
Out[34]: 0.0

In [36]: y[2,1] = 7

In [37]: 

In [37]: y
Out[37]: 
array([[  0\.        ,   9\.        ],
       [ 10\.        ,  10\.        ],
       [  0\.        ,   7\.        ],
       [  3.14159265,   3.14159265]]) 
```

在您的情况下，我们将 ( ) 的第一个数组`row_col_index`用于`row_col_index[0]`行*，*将第二个数组 ( `row_col_index[1]`) 用于列。

最后，如果您不使用[ipython](http://ipython.org/)，我建议您这样做，它将在学习过程和许多其他方面为您提供帮助。

我希望这有帮助。

# c# - 无法使用具有正确凭据的登录用户功能登录 C#

> ID：13332889
> 
> 赞同：3
> 
> 时间：2012-11-11T16:05:35.267
> 
> 标签：c#, advapi32, logonserver

我使用模拟机制来管理远程机器上的服务，我可以在 RDP 会话中使用我的用户名和密码连接到该机器并手动启动/停止服务。我还设法通过在模拟语句中使用 IntPtr.Zero 令牌的代码来启动/停止服务，但是在调用 logonuser 函数时，我遇到了失败（返回令牌 = 0 和错误 = 87）

这是一些代码：

```
if (LogonUser(_userName, domain, _Password, logonType (= 5), logonProvider (= 0), out token))
{
    MessageBox.Show("success!");
    return token;
}
else
{
    MessageBox.Show("Logon user throwing " + token + " " +    Marshal.GetLastWin32Error());
} 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T08:36:42.313

这与 Windows 本地安全策略有关，

应为用户分配“作为服务登录”用户权限。

# php - 在 Yii 分组下拉列表中，如何设置默认选中项？

> ID：13332892
> 
> 赞同：0
> 
> 时间：2012-11-11T16:05:49.167
> 
> 标签：php, html, drop-down-menu, yii

**情况：**
我在[dropDownList 对象](http://www.yiiframework.com/doc/api/1.1/CHtml#activeDropDownList-detail)中指定“选定项目”时遇到了一些问题。我正在使用一个分组的 dropDownList，它有许多 optgroup 项目，每个项目都包含许多选择项目。挑战是试图找到一种方法来指定默认选定的项目，因为如前所述，每个项目都在一个 optgroup 中。

**问题：**
使用分组表单时如何设置默认选中项？或为什么下面的代码不起作用？

**一些代码：**

```
<?php
// retrieve the parent categories first
$parents = Categories::model()->findAllByAttributes(array('idCategoryParent'=>0));
// prepare an array to hold parent categories as optgroups, and their child categories as selectable items
$categories = array("Select a Category Below");
// prepare an array to hold the location of the selected item (if any)
$selectedItemInfo = array();

foreach($parents as $parent) {

    // retrieve the sub categories for this parent category
    $children = Categories::model()->cache(Yii::app()->findAllByAttributes(array('idCategoryParent'=>$parent->idCategory));

    // prepare an array to temporarily hold all sub categories for this parent category
    $categoriesChildren = array();

    // iterate over sub categories
    foreach($children as $child) {

        // Assign the category name (label) to its numeric id
        // Example. '10' => 'Coffee Mugs'
        $categoriesChildren[$child->idCategory] = $child->label;

        /**** Important part
        * we may on occasion have an 'id' as a url parameter
        * if 'id' isset, and 
        * if the current sub category idCategory matches 'id'
        * mark this sub category as the item we want selected in our dropDownList
        */
        if(isset($_GET['id']) && $child->idCategory == $_GET['id']){
            // store the location of the current sub category
            $selectedItemInfo[0] = $parent->label;
            $selectedItemInfo[1] = $child->idCategory;
        }
    }

    /*** Another Important part 
    * here we assign the whole child categories array 
    * as a single element in our categories array
    * that can be accessed by the category name (label)
    * of the parent category. 
    * Passing this entire $categories array to our
    * dropDownList will make it render as a grouped
    * dropDownList with the groups as optgroup items.
    */
    // Example. 'Kitchenware' => {array}
    $categories[$parentLabel] = $categoriesChildren;
}

?>

<?php

// get our selected item
/**** Remember
* The element $selectedItemInfo[0] holds our parent category's string name (label)
* The element $selectedItemInfo[1] holds our child category's id
*/
$selectedItem = $categories[$selectedItemInfo[0]][$selectedItemInfo[1]];

// create an options array to inform dropDownList of our selected item
$options = array('options'=>array($selectedItem=>array('selected'=>true)));

?>

//...
<div class="row">
<?php echo $form->labelEx($model,'idCategory'); ?>
<?php echo $form->dropDownList($model,'idCategory', $categories, $options); ?>
<?php echo $form->error($model,'idCategory'); ?>
</div>
//... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:42:39.103

**解决了。**

只需在调用 dropDownList 代码之前设置 $model->idCategory 即可。像这样：

```
//...
<div class="row">
<?php echo $form->labelEx($model,'idCategory'); ?>
<?php $model->idCategory = $_GET['id']; ?>
<?php echo $form->dropDownList($model,'idCategory', $categories); ?>
<?php echo $form->error($model,'idCategory'); ?>
</div>
//... 
```

# c# - Dapper 反序列化 XML

> ID：13332893
> 
> 赞同：3
> 
> 时间：2012-11-11T16:05:52.460
> 
> 标签：c#, .net, serialization, orm, dapper

如果我将 XML 存储在 nvarchar 中，Dapper（或 Dapper 扩展）是否可以将 XML 反序列化为 DataContract 类型或具有 XmlRoot / XmlElement 注释的类型？

如果它不直接处理它，是否有这样的成语？例如，也许我的目标 DataContract 类具有 Dapper 尝试设置的属性，并且该属性执行字符串的反序列化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:27:10.780

不，目前它不会尝试对此进行任何特殊处理，除非将其分配给与列名匹配的字符串属性。现在，我建议简单地：将“获取数据”和“将数据反序列化为对象”步骤分开。这也许是可以被视为附加功能的东西，但它不是目前存在的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-12T03:47:10.430

我认为 Dapper 已经[支持](https://github.com/StackExchange/Dapper/blob/master/Dapper/SqlMapper.cs#L232) `XML`v1.50.5（或更早版本）的数据类型，它可以将`XML`数据类型转换为`XmlDocument`,`XDocument`或`XElement`.

它确实将`XML`数据类型转换为`XElement`我的代码。

**2021 年 3 月 5 日的示例代码**

返回 XML 类型数据的存储过程：

```
CREATE PROCEDURE spGetCarInformation
AS
DECLARE @Cfg XML
SET @Cfg = '<Configuration>
    <A>111</A>
    <B>222</B>
</Configuration>'

SELECT 1 AS Id, 'Test' AS Name, @Cfg AS [Configuration] 
```

代码示例：

```
/* Program.cs */

using System;
using System.Linq;
using System.Xml.Linq;
using Microsoft.Data.SqlClient;
using Dapper;

namespace ConsoleApp
{
    class Program
    {
        static void Main(string[] args)
        {
            /* query XML data from database */
            using var connection = new SqlConnection("Data Source=; Initial Catalog=; User ID=; Password=");
            Car car = connection.Query<Car>("EXEC spGetCarInformation").First();
            Console.WriteLine(car.Name);
            Console.WriteLine(car.Configuration.Element("A").Value);
            Console.WriteLine(car.Configuration.Element("B").Value);

            /* Insert XML data into database */
            car = new Car
            {
                Id = 2,
                Name = "New Car",
                Configuration = new XElement
                (
                    "Configuration",
                    new XElement("A", "333"),
                    new XElement("B", "444")
                )
            };

            string cmdText = @"CREATE TABLE #Car
(
    Id INT,
    Name NVARCHAR(128),
    Configuration XML
)

INSERT INTO #Car
VALUES
    (@Id, @Name, @Configuration)

SELECT * FROM #Car

DROP TABLE #Car";

            Car result = connection.Query<Car>(cmdText, car).First();
            Console.WriteLine(result.Name);
            Console.WriteLine(result.Configuration.Element("A").Value);
            Console.WriteLine(result.Configuration.Element("B").Value);
        }
    }

    class Car
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public XElement Configuration { get; set; }
    }
} 
```

输出： [![在此处输入图像描述](../Images/6dca664eaaf5070f81a7acfe061338a6.png)](https://i.stack.imgur.com/VqWKF.png)

项目中添加的 Nuget 包：

```
<PackageReference Include="Dapper" Version="2.0.78" />
<PackageReference Include="Microsoft.Data.SqlClient" Version="2.1.2" /> 
```

我在 .NET 5 上测试了代码，但也应该在 .Net Framework 4.7.2+ 和 System.Data.SqlClient 上工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-01-14T19:09:10.117

要添加@Ricky 的答案，如果您需要将包含 XML 列的行写入数据库，该`Insert`方法似乎不起作用并将 XML 列保留为`NULL`.

以下代码段显示了如何将 an`XElement`写入包含 XML 列的表中：

```
var xElement = new XElement(...);

var newRowId = sqlConnection.QuerySingle<int>(@"
    INSERT INTO MyTable (MyXmlField)
    VALUES (@myXml);                    
    SELECT SCOPE_IDENTITY();
    ", new { myXml = xElement }); 
```

# javascript - Javascript数组长度不起作用

> ID：13332894
> 
> 赞同：0
> 
> 时间：2012-11-11T16:06:01.207
> 
> 标签：javascript, jquery

所以我有这个数组：

```
[first_name: false, last_name: false, email: false, month: false, day: false, year: false, password: false, password2: false] 
```

现在，如果我这样做`console.log(arrayName.length)`，它将返回 0；为什么？我做错了什么？

//LE

我就是这样做的：

```
var errors = {};
 $('.register-front').delegate('button','click',function(){
  var $this = $(this).parent().parent().parent();
  $this.find('input,select').each(function(){
    if(!$(this).val() || ($(this).val() == '-1'))
    {
      errors[$(this).attr('name')] = false;
    }
  });
  console.log(errors.length);
  return false;
 }); 
```

我做了一些改变，但我仍然不明白......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T16:09:31.223

你的符号似乎很奇怪。方括号用于数组，但内容是对象属性/值表示法。我认为这行不通。您可以通过将 替换为 将表达式转换为对象`[]`，`{}`但是，对象没有长度。您可以通过以下方式获取对象中的键数：

```
Object.keys(obj).length 
```

或者，您可以使用以下方法遍历对象键：

```
for (var key in obj) {
    . . .
} 
```

**编辑**对于您添加的特定代码，您可以替换此行：

```
console.log(errors.length); 
```

和：

```
console.log(Object.keys(errors).length); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T16:09:00.443

在 JavaScript 中，类关联数组结构是 Object：

```
{
    lorem: 'ipsum',
    dolor: 'amet'
} 
```

在您的示例中，将方括号替换为大括号，您将得到这样的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T16:12:20.870

这不是一个`Array`，一个`Array`是一个简单的值列表，因为这是一个键到值的映射，即一个`Object`。你的意思是做这样的事情：

```
var myObject = { first_name: false, last_name: false, email: false, month: false, day: false, year: false, password: false, password2: false } 
```

# ruby-on-rails-3 - 搜索相关型号 rails 3

> ID：13332897
> 
> 赞同：0
> 
> 时间：2012-11-11T16:06:26.583
> 
> 标签：ruby-on-rails-3, search, activerecord

我目前有一个搜索表单，可以搜索我的食谱模型中的列，我现在想搜索一个关联模型也称为国家，并搜索名称列

所以到目前为止我的代码是

```
 q = "%#{params[:search]}%"

 @countrysearch = Recipe.where("dish_name LIKE ? OR country_of_origin LIKE ? OR difficulty LIKE ? OR preperation_time LIKE?", q, q, q, q ) 
```

我是否正确地说我需要加入国家模式？如果是这样，我不确定它的语法，有没有人知道要查看哪些资源或以前执行过此查询？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T16:24:08.090

有一个名为ransack [https://github.com/ernie/ransack](https://github.com/ernie/ransack)的宝石允许这样做（[https://github.com/ernie/ransack#has_many-and-belongs_to-associations](https://github.com/ernie/ransack#has_many-and-belongs_to-associations)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T16:10:42.913

您可以使用连接，也可以预先加载关联并在其上指定条件：

```
Recipe.includes(:country).where("dish_name like ? OR countries.name like ?", ...) 
```

[请参阅本指南](http://guides.rubyonrails.org/active_record_querying.html#specifying-conditions-on-eager-loaded-associations)中的“指定预先加载的关联的条件”部分。

# c++ - 阅读 .txt 以限制数量的项目

> ID：13332899
> 
> 赞同：0
> 
> 时间：2012-11-11T16:06:47.870
> 
> 标签：c++, arrays, struct

尽管我曾短暂地使用过 C# 和一些 Web 开发语言，但我对 C++ 还是很陌生。我有一个以 .txt 文件形式存储在已知位置的数据库。.txt 文件的第一行是数据库中有多少项目。我有一个结构来读取所有值，因为它们的格式相同。

我已经设法编写了一段代码，它将读入文件并给我一个整数值，表示有多少项目，我只需要帮助将数据读入结构数组。

一个示例数据库是

```
3

NIKEAIRS
9
36.99

CONVERSE
12
35.20

GIFT
100
0.1 
```

我的结构是

```
struct Shoes{
   char Name[25];
   unsigned int Stock;
   double Price;
}; 
```

我读取项目数量的代码是

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main ()
{
    char UserInput;

    string NumOfItems; //this will contain the data read from the file
    ifstream Database("database.txt"); //opening the file.
    if (Database.is_open()) //if the file is open
    {
        int numlines;
        getline (Database,NumOfItems);
        numlines=atoi(NumOfItems.c_str());
        cout<<numlines;
    }
    else cout << "Unable to open file"; //if the file is not open output
    cin>>UserInput;
    return 0;
} 
```

我可以就如何进行一些指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T16:36:48.357

这样的事情怎么样？我知道有更有效的方法可以做到这一点，但至少这应该让你朝着正确的方向开始。干杯!

```
#include <iostream>
#include <fstream>
#include <string>

#include <vector>
#include <stdlib.h>

using namespace std;

struct Shoes {
    char Name[25];
    unsigned int Stock;
    double Price;
};

vector<Shoes> ShoeList;

static Shoes readShoe(std::ifstream& fs)
{
    char buffer[200];               //  temporary buffer
    Shoes s;

    fs.getline(buffer, sizeof(buffer));     // newline
    fs.getline(s.Name, sizeof(buffer));     // name
    fs.getline(buffer, sizeof(buffer));     // amt in stock
    s.Stock=atoi(buffer);
    fs.getline(buffer, sizeof(buffer));     // price
    s.Price=strtod(buffer, 0);

    return s;
}

int main ()
{
    char UserInput;

    string NumOfItems; //this will contain the data read from the file
    ifstream Database("database.txt"); //opening the file.
    if (Database.is_open()) //if the file is open
    {
        int numlines;
        getline (Database,NumOfItems);
        numlines=atoi(NumOfItems.c_str());
        cout<<numlines;

    cout << endl;
    for(int i=0; i < numlines; ++i)
    {
        Shoes s = readShoe(Database);
        ShoeList.push_back(s);
        cout << "Added (Name=" << s.Name << "," << s.Stock << "," << s.Price << ") to list." << endl;
    }

    }
    else cout << "Unable to open file"; //if the file is not open output

    cin>>UserInput;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T16:12:41.617

```
for (int i = 0; i < numlines; ++i)
{
 Shoes sh();
 Database >> sh.Name >> sh.Stock >> sh.price;
 //do something with sh (add it to a list or a array for example
} 
```

# perl - Term::ReadLine - 我需要按两次向上箭头来检索历史记录

> ID：13332908
> 
> 赞同：2
> 
> 时间：2012-11-11T16:08:17.107
> 
> 标签：perl, readline

我正在使用 Term::ReadLine 并且有一个奇怪的问题，我需要按两次向上箭头才能从 addhistory 中检索项目。这是我正在使用的脚本。

```
use Term::ReadLine;

my $term = Term::ReadLine->new('Term1');
print $term->ReadLine."\n";

while (defined(my $cmd = $term->readline())) {
    $term->addhistory($cmd) if $cmd =~ /\S/;
} 
```

为了测试，我将输入一些“命令”，然后尝试使用向上箭头检索这些命令。我按了一次向上箭头，最后一个项目立即出现，但在检索每个后续项目之前，我需要按两次向上箭头。

我早些时候在我正在从事的一个小项目中遇到了这个问题，并且遇到了同样问题的人。此问题的解决方法是修改 addhistory 行，如下所示：

```
$term->addhistory($cmd) if $cmd !~ /\S||\n/; 
```

它起作用了，所以我继续前进，直到 Tanktalus 在我发布的另一个问题中提出这个问题。[Perl Term::ReadLine::Gnu 信号处理困难](https://stackoverflow.com/questions/13316232/perl-termreadlinegnu-signal-handling-difficulties)

他问“/\S||\n/ 应该做什么？”。好吧，让我去找那个建议修复的页面......是的......找不到它。因此，虽然我可以使它与我发布的修改一起工作，但我有点卡住了，因为 A. 我不知道为什么它会修复它，B.为什么我似乎是唯一一个遇到这个问题的人？

任何帮助或建议将不胜感激！:)

使用以下版本测试了上述脚本：

```
Perl - 5.12.4 and 5.16.1
Term::ReadLine::Gnu - 1.20
Term::ReadLine::Perl - 1.0303 (Just tried it to make sure it wasn't Gnu)
Term::ReadLine - 1.10 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T18:20:25.563

`/\S||\n/`将始终匹配，因此您将永远不会调用 addhistory。如果`$term->Features->{autohistory}`是真的，你无论如何都不需要。

“按两次向上箭头”是指每两个向上箭头向上移动一次？如果是这样，那么您对 ​​addhistory 的不必要调用就是罪魁祸首。完全删除呼叫是适当的解决方法。

# git - git意外删除文件

> ID：13332909
> 
> 赞同：2
> 
> 时间：2012-11-11T16:08:19.160
> 
> 标签：git, github

我不小心从存储库中删除了几个文件，进行了提交并将其推送到 github 存储库。我想取回文件并提交，然后将文件推送回在线存储库。我该怎么做呢？

我尝试检查并将第二个最后提交克隆到本地的单独文件夹中 - 但是，我不确定如何从那里继续。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T16:13:12.910

您可以执行一个`git revert {commit #}`将还原该提交的操作，然后您可以推送到 github。

如果您不想恢复，您也可以将`git checkout {commit #} -- file1 file2 file3 ...`要恢复的文件直接签出为当前分支中的新更改，提交它们并推送。

# json - 如何在android中将searalized字符串转换为json对象

> ID：13332913
> 
> 赞同：1
> 
> 时间：2012-11-11T16:08:35.290
> 
> 标签：json

下面的代码是我的 JSON 文件，我想从服务器读取这些数据，那么如何在 andorid 中使用 JSONObject 读取这些数据

此代码包含以自身开头的数组标识符，没有数组的名称标识符

* * *

```
[
    {
        "created_at": "Sat Nov 10 12:00:26 +0000 2012",
        "id": 267235264374640640,
        "id_str": "267235264374640640",
        "text": "My text",
        "user": {
            "id": 166551306,
            "id_str": "166551306",
            "name": "John ",
            "location": "Chennai, India",
            "url": null,
            "notifications": null
          },
        "geo": null,
        "coordinates": null,
        "place": null,
        "contributors": null,
        "retweet_count": 0,
        "entities": {
            "hashtags": [],
            "urls": [],
            "user_mentions": []
        },
        "favorited": false,
        "retweeted": false
    },
   {
        "created_at": "Sat Nov 10 12:00:26 +0000 2012",
        "id": 267235264374640640,
        "id_str": "267235264374640640",
        "text": "My text",
        "user": {
            "id": 166551306,
            "id_str": "166551306",
            "name": "John ",
            "location": "Chennai, India",
            "url": null,
            "notifications": null
          },
        "geo": null,
        "coordinates": null,
        "place": null,
        "contributors": null,
        "retweet_count": 0,
        "entities": {
            "hashtags": [],
            "urls": [],
            "user_mentions": []
        },
        "favorited": false,
        "retweeted": false
    },
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T17:12:24.867

您可以将其直接读入**JSONArray** *而不是*JSONObject

```
JSONArray jsonArray = new JSONArray(dataString); 
```

我已经使用您提供的 JSON 数据进行了尝试，并且效果很好。

# drupal - 仅当用户在其个人资料中填写了特定字段时才触发规则？

> ID：13332915
> 
> 赞同：3
> 
> 时间：2012-11-11T16:08:46.327
> 
> 标签：drupal, drupal-7

**大家好，希望我能正确描述我的问题...**

我使用drupal 7创建了一个约会通知网站。我使用了一个名为“约会”的自定义内容类型，它只显示给与约会相关的用户（我用实体引用模块“标记”节点中的用户并限制节点视图仅限具有节点访问用户参考模块的用户）。

该系统还应该通过短信通知用户即将到来的约会。我设法让短信框架和规则模块在预约日期之前触发短信提交到预定义的号码。

**到目前为止，一切都很好。我的问题是——**

用户有一个名为“field_cellnumber”的可选配置文件字段来填写他是否有兴趣向他的手机发送通知...我希望规则检查用户是否填写了该字段，并且只有在填写该字段时才会触发短信提交. 我怎么能做到这一点？我尝试查看规则的“条件”中的所有选项，但没有找到任何可以引用用户配置文件中存在特定信息的内容......

**此外，另一个问题是 -** 字段“field_cellnumber”在“约会”节点类型和用户配置文件之间共享（我在节点类型中创建了该字段，然后通过添加现有字段添加到用户帐户）。在创建新的“约会”节点时，我希望 drupal 从节点中通过实体引用引用的用户配置文件中获取“field_cellnumber”的值，并将其自动填充到节点的“field_cellnumber”值中。现在规则发送的是短信，但每次创建节点时您都需要手动输入用户的手机号码，这很麻烦。我渴望达到“标记”用户会自动将他的联系信息分配给节点的地步。

**我对drupal很陌生，所以我非常感谢任何关于如何实现这两个目标的指针\谷歌阅读参考资料。非常感谢，我期待您的回答，因为到目前为止我相处得很好，但现在我被卡住了。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T17:21:30.340

这是实体引用的完美用例，规则可以做到这一点。

`load entity by ID`在访问实体的任何字段之前，您需要执行一个操作（或类似名称）。因此，如果您在节点或 profile2 字段中有电话号码，则需要先加载它。

要通过实体引用访问更多节点，您需要加载每个节点。有条件检查该字段是否为空。

到目前为止，据我了解这个问题，您将需要这样做。

1.  在预定的规则或某些事件上触发此事件。
2.  按作者 ID 加载用户帐户。（加载实体）
3.  加载配置文件（加载实体）。
4.  现在，正确使用数据选择器来获取 #3 中加载的实体的值。
5.  设置可从 #1 事件（约会节点）获得的实体的值。
6.  保存 #5 中的节点。

祝你好运！

# php - 在 JIT SpaceTree 中加载节点

> ID：13332925
> 
> 赞同：1
> 
> 时间：2012-11-11T16:09:53.417
> 
> 标签：php, javascript, json, space-tree

我尝试使用 JIT 的 SpaceTree，我真的需要一些帮助。问题是当尝试从另一个数组加载树时。

json.php

```
<?php
$temp = array(
    'id' => "node02",
    'name' => "roey",
    'data' => '',
    'children' => json_encode(array(
        'id' => "node13",
        'name' => "Some Node",
        'data' => '',
        'children' => '',

    )),
);
echo json_encode($temp); 
```

我的 spacetree.js：

```
....
function init(){
$.getJSON('json.php', function(json){
    var json = json;
....
st.loadJSON(json); 
```

我收到的 JSON 符合预期，但脚本没有加载它。

有没有人看到问题并可以帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T17:26:39.453

1.  从您的代码中删除“var json = json”。变量 json 已经在该函数中声明。
2.  如果“st.loadJSON(json);” 不在函数（json）{你的代码}中。变量 json 是函数的局部变量，只能在它声明的函数中被引用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T01:27:09.717

我遇到了同样的问题，JIT SpaceTree 使用数组数组作为子键，php 数组应该是这样的

```
`<?php
$temp = array(
'id' => "node02",
'name' => "roey",
'data' => '',
'children' => array(array(
    'id' => "node13",
    'name' => "SomeNode",
    'data' => '',
    'children' =>array(),
),array(
    'id' => "node14",
    'name' => "SomeNode",
    'data' => '',
    'children' =>array(),
),
)
);
echo json_encode($temp);
?>` 
```

希望这有助于并节省其他 4 人的时间 :)

# objective-c - obj-c：从不包括变量二的范围内生成随机数

> ID：13332929
> 
> 赞同：1
> 
> 时间：2012-11-11T16:10:20.713
> 
> 标签：objective-c, cocos2d-iphone

我正在生成一个介于 0 和 topOfRange 之间的随机数。我可以使用以下代码排除 firstNumberToExclude ：

```
NSInteger aRandom;
while ((aRandom = arc4random()%topOfRange) == firstNumberToExclude); 
```

如果我有两个要排除的数字如何：firstNumberToExclude 和 secondNumberToExclude？这是我的计划，但似乎不合适：

```
NSInteger aRandom = arc4random()%topOfRange;
while (aRandom == firstNumberToExclude || aRandom == secondNumberToExclude)
    {
    aRandom = arc4random()%topOfRange;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T16:39:24.647

如果您将其重构为实用方法，我认为您的代码会更干净，更易于维护：

```
+ (NSInteger)generateRandomExcluding:(NSArray *)exclude topOfRange:(NSInteger)topOfRange {
    NSInteger aRandom = arc4random_uniform(topOfRange);
    while ([exclude containsObject:[NSNumber numberWithInteger:aRandom]]) {
        aRandom = arc4random_uniform(topOfRange);
    }
    return aRandom;
} 
```

然后你可以这样称呼它：

```
NSNumber *excludeOne = [NSNumber numberWithInt:5];
NSNumber *excludeTwo = [NSNumber numberWithInt:13];

NSInteger random = [MyClass generateRandomExcluding:[NSArray arrayWithObjects:excludeOne, excludeTwo, nil] topOfRange:100]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T16:31:42.997

试试这个：

```
NSInteger aRandom = arc4random()%topOfRange;
NSMutableArray *exludedNumbers = [NSMutableArray arrayWithObjects:
    [NSNumber numberWithInt: firstNumberToExclude],
    [NSNumber numberWithInt: secondNumberToExclude],
    nil];
BOOL flag = YES;
while (flag)
{
    flag = NO;
    for (NSNumber *numberToExclude in excludedNumbers)
    {
        if (numberToExclude.intValue == aRandom)
        {
            flag = YES;
            aRandom = arc4random()%topOfRange;
            break;
        }
    }
} 
```

因此您可以动态添加和删除要从数组中排除的数字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-10T13:32:51.777

最近在寻找相同的解决方案时遇到了这个问题。我认为 while 循环是一个非常糟糕的主意，使用随机数，您无法真正知道需要多长时间。所以我又试了一下，并调整了其他解决方案。

考虑排除数字池生成随机数，然后检查该数字是否大于任何排除数字，并为每个数字增加 1。

```
- (NSInteger) randomNumberExcluding:(NSArray <NSNumber *> *) excludedNumbers range:(NSRange) range
{
    NSPredicate *pred = [NSPredicate predicateWithFormat:@"integerValue >= %d AND integerValue =< %d", range.location, NSMaxRange(range)];
    NSSortDescriptor *sorter = [NSSortDescriptor sortDescriptorWithKey:@"integerValue" ascending:YES];
    excludedNumbers = [[excludedNumbers filteredArrayUsingPredicate:pred] sortedArrayUsingDescriptors:@[sorter]];
    NSInteger base = arc4random_uniform((uint32_t)(range.length - excludedNumbers.count + 1)) + (NSInteger)range.location;
    for (NSNumber *excludedNumber in excludedNumbers) {
        if (base >= excludedNumber.integerValue) {
            base++;
        }
    }
    return base;
} 
```

# python - 如何使 pyparsing 语法依赖于实例属性？

> ID：13332930
> 
> 赞同：4
> 
> 时间：2012-11-11T16:10:24.133
> 
> 标签：python, parsing, grammar, string-parsing, pyparsing

我有一个 pyparsing 问题，我花了几天时间试图解决，但没有运气。

这是相关的伪代码：

```
class Parser(object):
    def __init__(self):
        self.multilineCommands = []
        self.grammar = <pyparsing grammar> # depends on self.multilineCommands 
```

所以，我试图让一组特定的文档测试通过。但是有问题的测试在`self.multilineCommands`实例化后会更新。尽管正确设置属性没有问题，但`self.grammar`似乎对更改视而不见，并且测试失败。

但是，如果我设置`self.multilineCommands`inside `__init__()`，那么测试都通过了。

我怎样才能了解`self.grammar`最新消息`self.multilineCommands`？

# 跟进

所以，这里的部分问题是我正在重构我没有编写的代码。我在 pyparsing 方面的经验也仅限于我在这个项目上的工作。

Pyparsing 作者 Paul McGuire 发布了一个有用的回复，但我无法让它发挥作用。这可能是我的错误，但更大的问题可能是我过度简化了上面编写的伪代码。

所以，我将发布实际代码。

### 警告！

您将要看到的内容是未经审查的。看到它可能会让你畏缩……甚至哭泣。在最初的模块中，这段代码只是整个“神级”的*一部分*。将下面的内容拆分到`Parser`班级只是第 1 步（显然，第 1 步足以打破测试）。

* * *

```
class Parser(object):
    '''Container object pyparsing-related parsing.
    '''

    def __init__(self, *args, **kwargs):
        r'''
        >>> c = Cmd()
        >>> c.multilineCommands = ['multiline']
        >>> c.multilineCommands
        ['multiline']
        >>> c.parser.multilineCommands
        ['multiline']
        >>> c.case_insensitive = True
        >>> c.case_insensitive
        True
        >>> c.parser.case_insensitive
        True
        >>> print (c.parser('').dump())
        []
        >>> print (c.parser('/* empty command */').dump())
        []
        >>> print (c.parser('plainword').dump())
        ['plainword', '']
        - command: plainword
        - statement: ['plainword', '']
          - command: plainword
        >>> print (c.parser('termbare;').dump())
        ['termbare', '', ';', '']
        - command: termbare
        - statement: ['termbare', '', ';']
          - command: termbare
          - terminator: ;
        - terminator: ;
        >>> print (c.parser('termbare; suffx').dump())
        ['termbare', '', ';', 'suffx']
        - command: termbare
        - statement: ['termbare', '', ';']
          - command: termbare
          - terminator: ;
        - suffix: suffx
        - terminator: ;
        >>> print (c.parser('barecommand').dump())
        ['barecommand', '']
        - command: barecommand
        - statement: ['barecommand', '']
          - command: barecommand
        >>> print (c.parser('COMmand with args').dump())
        ['command', 'with args']
        - args: with args
        - command: command
        - statement: ['command', 'with args']
          - args: with args
          - command: command
        >>> print (c.parser('command with args and terminator; and suffix').dump())
        ['command', 'with args and terminator', ';', 'and suffix']
        - args: with args and terminator
        - command: command
        - statement: ['command', 'with args and terminator', ';']
          - args: with args and terminator
          - command: command
          - terminator: ;
        - suffix: and suffix
        - terminator: ;
        >>> print (c.parser('simple | piped').dump())
        ['simple', '', '|', ' piped']
        - command: simple
        - pipeTo:  piped
        - statement: ['simple', '']
          - command: simple
        >>> print (c.parser('double-pipe || is not a pipe').dump())
        ['double', '-pipe || is not a pipe']
        - args: -pipe || is not a pipe
        - command: double
        - statement: ['double', '-pipe || is not a pipe']
          - args: -pipe || is not a pipe
          - command: double
        >>> print (c.parser('command with args, terminator;sufx | piped').dump())
        ['command', 'with args, terminator', ';', 'sufx', '|', ' piped']
        - args: with args, terminator
        - command: command
        - pipeTo:  piped
        - statement: ['command', 'with args, terminator', ';']
          - args: with args, terminator
          - command: command
          - terminator: ;
        - suffix: sufx
        - terminator: ;
        >>> print (c.parser('output into > afile.txt').dump())
        ['output', 'into', '>', 'afile.txt']
        - args: into
        - command: output
        - output: >
        - outputTo: afile.txt
        - statement: ['output', 'into']
          - args: into
          - command: output
        >>> print (c.parser('output into;sufx | pipethrume plz > afile.txt').dump())
        ['output', 'into', ';', 'sufx', '|', ' pipethrume plz', '>', 'afile.txt']
        - args: into
        - command: output
        - output: >
        - outputTo: afile.txt
        - pipeTo:  pipethrume plz
        - statement: ['output', 'into', ';']
          - args: into
          - command: output
          - terminator: ;
        - suffix: sufx
        - terminator: ;
        >>> print (c.parser('output to paste buffer >> ').dump())
        ['output', 'to paste buffer', '>>', '']
        - args: to paste buffer
        - command: output
        - output: >>
        - statement: ['output', 'to paste buffer']
          - args: to paste buffer
          - command: output
        >>> print (c.parser('ignore the /* commented | > */ stuff;').dump())
        ['ignore', 'the /* commented | > */ stuff', ';', '']
        - args: the /* commented | > */ stuff
        - command: ignore
        - statement: ['ignore', 'the /* commented | > */ stuff', ';']
          - args: the /* commented | > */ stuff
          - command: ignore
          - terminator: ;
        - terminator: ;
        >>> print (c.parser('has > inside;').dump())
        ['has', '> inside', ';', '']
        - args: > inside
        - command: has
        - statement: ['has', '> inside', ';']
          - args: > inside
          - command: has
          - terminator: ;
        - terminator: ;
        >>> print (c.parser('multiline has > inside an unfinished command').dump())
        ['multiline', ' has > inside an unfinished command']
        - multilineCommand: multiline
        >>> print (c.parser('multiline has > inside;').dump())
        ['multiline', 'has > inside', ';', '']
        - args: has > inside
        - multilineCommand: multiline
        - statement: ['multiline', 'has > inside', ';']
          - args: has > inside
          - multilineCommand: multiline
          - terminator: ;
        - terminator: ;
        >>> print (c.parser('multiline command /* with comment in progress;').dump())
        ['multiline', ' command /* with comment in progress;']
        - multilineCommand: multiline
        >>> print (c.parser('multiline command /* with comment complete */ is done;').dump())
        ['multiline', 'command /* with comment complete */ is done', ';', '']
        - args: command /* with comment complete */ is done
        - multilineCommand: multiline
        - statement: ['multiline', 'command /* with comment complete */ is done', ';']
          - args: command /* with comment complete */ is done
          - multilineCommand: multiline
          - terminator: ;
        - terminator: ;
        >>> print (c.parser('multiline command ends\n\n').dump())
        ['multiline', 'command ends', '\n', '\n']
        - args: command ends
        - multilineCommand: multiline
        - statement: ['multiline', 'command ends', '\n', '\n']
          - args: command ends
          - multilineCommand: multiline
          - terminator: ['\n', '\n']
        - terminator: ['\n', '\n']
        >>> print (c.parser('multiline command "with term; ends" now\n\n').dump())
        ['multiline', 'command "with term; ends" now', '\n', '\n']
        - args: command "with term; ends" now
        - multilineCommand: multiline
        - statement: ['multiline', 'command "with term; ends" now', '\n', '\n']
          - args: command "with term; ends" now
          - multilineCommand: multiline
          - terminator: ['\n', '\n']
        - terminator: ['\n', '\n']
        >>> print (c.parser('what if "quoted strings /* seem to " start comments?').dump())
        ['what', 'if "quoted strings /* seem to " start comments?']
        - args: if "quoted strings /* seem to " start comments?
        - command: what
        - statement: ['what', 'if "quoted strings /* seem to " start comments?']
          - args: if "quoted strings /* seem to " start comments?
          - command: what
        '''

        #   SETTINGS
        self._init_settings()

        #   GRAMMAR
        self._init_grammars()

        #   PARSERS

        #   For easy reference to all contained parsers.
        #   Hacky, I know.  But I'm trying to fix code
        #   elsewhere at the moment... :P)
        self._parsers = set()

        self._init_prefixParser()
        self._init_terminatorParser()
        self._init_saveParser()
        self._init_inputParser()
        self._init_outputParser()

        #   intermission!  :D
        #   (update grammar(s) containing parsers)
        self.afterElements = \
            pyparsing.Optional(self.pipe         + pyparsing.SkipTo(self.outputParser ^ self.stringEnd, ignore=self.doNotParse)('pipeTo')) + \
            pyparsing.Optional(self.outputParser('output') + pyparsing.SkipTo(self.stringEnd,                     ignore=self.doNotParse).setParseAction(lambda x: x[0].strip())('outputTo'))
        self._grammars.add('afterElements')
        #   end intermission

        self._init_blankLineTerminationParser()
        self._init_multilineParser()
        self._init_singleLineParser()
        self._init_optionParser()

        #   Put it all together:
        self.mainParser = \
                        ( self.prefixParser       +
                            (   self.stringEnd                  |
                                self.multilineParser            |
                                self.singleLineParser           |
                                self.blankLineTerminationParser |
                                self.multilineCommand   + pyparsing.SkipTo(
                                    self.stringEnd,
                                    ignore=self.doNotParse)
                            )
                        )
        self.mainParser.ignore(self.commentGrammars)
        #self.mainParser.setDebug(True)
        #   And we've got mainParser.

    #
    #   SPECIAL METHODS
    #
    def __call__(self, *args, **kwargs):
        '''Call an instance for convenient parsing.  Example:

                p = Parser()
                result = p('some stuff for p to parse')

            This just calls `self.parseString()`, so it's safe to
            override should you choose.
        '''
        return self.parseString(*args, **kwargs)

    def __getattr__(self, attr):
        #   REMEMBER: This is only called when normal attribute lookup fails
        raise AttributeError('Could not find {0!r} in class Parser'.format(attr))

    @property
    def multilineCommands(self):
        return self._multilineCommands

    @multilineCommands.setter
    def multilineCommands(self, value):
        value = list(value) if not isinstance(value, list) else value
        self._multilineCommands = value

    @multilineCommands.deleter
    def multilineCommands(self):
        del self._multilineCommands
        self._multilineCommands = []

    #
    #   PSEUDO_PRIVATE METHODS
    #
    def _init_settings(self, *args, **kwargs):
        self._multilineCommands  = []

        self.abbrev             = True     # recognize abbreviated commands
        self.blankLinesAllowed  = False
        self.case_insensitive   = True
        self.identchars         = cmd.IDENTCHARS
        self.legalChars         = u'!#$%.:?@_' + pyparsing.alphanums + pyparsing.alphas8bit
        self.noSpecialParse     = {'ed','edit','exit','set'}
        self.redirector         = '>'      # for sending output to file
        self.reserved_words     = []
        self.shortcuts          = {'?' : 'help' ,
                                   '!' : 'shell',
                                   '@' : 'load' ,
                                   '@@': '_relative_load'}
        self.terminators        = [';']
        self.keywords           = [] + self.reserved_words

    def _init_grammars(self, *args, **kwargs):
        #   Basic grammars
        self.commentGrammars    =   (pyparsing.pythonStyleComment|pyparsing.cStyleComment).ignore(pyparsing.quotedString).suppress()
        self.commentInProgress  =   '/*' + pyparsing.SkipTo( pyparsing.stringEnd ^ '*/' )
        self.doNotParse         =   self.commentGrammars | self.commentInProgress | pyparsing.quotedString
        self.fileName           =   pyparsing.Word(self.legalChars + '/\\')
        self.inputFrom          =   self.fileName('inputFrom')
        self.inputMark          =   pyparsing.Literal('<')
        self.pipe               =   pyparsing.Keyword('|', identChars='|')
        self.stringEnd          =   pyparsing.stringEnd ^ '\nEOF'
        #   Complex grammars
        self.multilineCommand   =   pyparsing.Or([pyparsing.Keyword(c, caseless=self.case_insensitive) for c in self.multilineCommands ])('multilineCommand')
        self.multilineCommand.setName('multilineCommand')
        self.oneLineCommand     =   ( ~self.multilineCommand + pyparsing.Word(self.legalChars))('command')

        #   Hack-y convenience access to grammars
        self._grammars = {
             #   Basic grammars
             'commentGrammars',
             'commentInProgress',
             'doNotParse',
             'fileName',
             'inputFrom',
             'inputMark',
             'noSpecialParse',
             'pipe',
             'reserved_words',
             'stringEnd',
             #   Complex grammars
             'multilineCommand',
             'oneLineCommand'
         }

        self.inputFrom.setParseAction(replace_with_file_contents)
        self.inputMark.setParseAction(lambda x: '')
        self.commentGrammars.addParseAction(lambda x: '')

        if not self.blankLinesAllowed:
            self.blankLineTerminator = (pyparsing.lineEnd * 2)('terminator')

        if self.case_insensitive:
            self.multilineCommand.setParseAction(lambda x: x[0].lower())
            self.oneLineCommand.setParseAction(lambda x: x[0].lower())

    def _init_all_parsers(self):
        self._init_prefixParser()
        self._init_terminatorParser()
        self._init_saveParser()
        self._init_inputParser()
        self._init_outputParser()

        #   intermission!  :D
        #   (update grammar(s) containing parsers)
        self.afterElements = \
            pyparsing.Optional(self.pipe         + pyparsing.SkipTo(self.outputParser ^ self.stringEnd, ignore=self.doNotParse)('pipeTo')) + \
            pyparsing.Optional(self.outputParser('output') + pyparsing.SkipTo(self.stringEnd,                     ignore=self.doNotParse).setParseAction(lambda x: x[0].strip())('outputTo'))
        self._grammars.setName('afterElements')
        self._grammars.add('afterElements')
        #   end intermission

        # FIXME:
        #   For some reason it's necessary to set this again.
        #   (Otherwise pyparsing results include `outputTo`, but not `output`.)
        self.outputParser('output')

        self._init_blankLineTerminationParser()
        self._init_multilineParser()
        self._init_singleLineParser()
        self._init_optionParser()

    def _init_prefixParser(self):
        self.prefixParser     = pyparsing.Empty()
        self.prefixParser.setName('prefixParser')
        self._parsers.add('prefixParser')

    def _init_terminatorParser(self):
        self.terminatorParser = pyparsing.Or([ (hasattr(t, 'parseString') and t) or pyparsing.Literal(t) for t in self.terminators])('terminator')
        self.terminatorParser.setName('terminatorParser')
        self._parsers.add('terminatorParser')

    def _init_saveParser(self):
        self.saveparser = (pyparsing.Optional(pyparsing.Word(pyparsing.nums)|'*')('idx')        +
                           pyparsing.Optional(pyparsing.Word(self.legalChars + '/\\'))('fname') +
                           pyparsing.stringEnd)
        self.saveparser.setName('saveParser')
        self._parsers.add('saveParser')

    def _init_outputParser(self):
        # outputParser = (pyparsing.Literal('>>') | (pyparsing.WordStart() + '>') | pyparsing.Regex('[^=]>'))('output')
        self.outputParser   =  self.redirector * 2 | (pyparsing.WordStart()  + self.redirector) | pyparsing.Regex('[^=]' + self.redirector)('output')
        self.outputParser.setName('outputParser')
        self._parsers.add('outputParser')

    def _init_inputParser(self):
        # a not-entirely-satisfactory way of distinguishing < as in "import from" from <
        # as in "lesser than"
        self.inputParser = self.inputMark         + \
               pyparsing.Optional(self.inputFrom) + \
               pyparsing.Optional('>')            + \
               pyparsing.Optional(self.fileName)  + \
               (pyparsing.stringEnd | '|')
        self.inputParser.ignore(self.commentInProgress)
        self.inputParser.setName('inputParser')
        self._parsers.add('inputParser')

    def _init_blankLineTerminationParser(self):
        self.blankLineTerminationParser = pyparsing.NoMatch

        if not self.blankLinesAllowed:
            self.blankLineTerminationParser = ((self.multilineCommand ^ self.oneLineCommand) + pyparsing.SkipTo(self.blankLineTerminator, ignore=self.doNotParse).setParseAction(lambda x: x[0].strip())('args') + self.blankLineTerminator )

        #   FIXME:  Does this call *really* have to be reassigned into the variable???
        self.blankLineTerminationParser = self.blankLineTerminationParser.setResultsName('statement')
        self.blankLineTerminationParser.setName('blankLineTerminationParser')
        self._parsers.add('blankLineTerminationParser')

    def _init_multilineParser(self):
        #self.multilineParser  = self.multilineParser.setResultsName('multilineParser')
        self.multilineParser = (
            (
                (self.multilineCommand('multilineCommand') ^ self.oneLineCommand)
                +   pyparsing.SkipTo(self.terminatorParser, ignore=self.doNotParse).setParseAction(lambda x: x[0].strip())('args')
                +   self.terminatorParser
            )('statement')
            + pyparsing.SkipTo(
                self.outputParser ^ self.pipe ^ self.stringEnd, ignore=self.doNotParse
                ).setParseAction(lambda x: x[0].strip())('suffix')
            + self.afterElements)
        self.multilineParser.ignore(self.commentInProgress)
        self.multilineParser.setName('multilineParser')
        self._parsers.add('multilineParser')

    def _init_singleLineParser(self):
        #self.singleLineParser = self.singleLineParser.setResultsName('singleLineParser')
        self.singleLineParser = ((self.oneLineCommand + pyparsing.SkipTo(self.terminatorParser ^ self.stringEnd ^ self.pipe ^ self.outputParser, ignore=self.doNotParse).setParseAction(lambda x:x[0].strip())('args'))('statement') +
                                 pyparsing.Optional(self.terminatorParser) + self.afterElements)
        self.singleLineParser.setName('singleLineParser')
        self._parsers.add('singleLineParser')

    def _init_optionParser(self):
        #   Different from the other parsers.
        #   This one is based on optparse.OptionParser,
        #   not pyparsing.
        #
        #   It's included here to keep all parsing-related
        #   code under one roof.

        # TODO: Why isn't this using cmd2's OptionParser?
        self.optionParser = optparse.OptionParser()
        self._parsers.add('optionParser')

    def parseString(self, *args, **kwargs):
        '''Parses a string using `self.mainParser`.'''
        return self.mainParser.parseString(*args, **kwargs) 
```

* * *

你有它。残酷的事实。☺

**2012-11-12 编辑：**我在这个问题的原始标题中错误地使用了术语“类属性”。这是一个愚蠢的错误，对于任何混淆，我深表歉意。现在已更正为“实例属性”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T17:53:06.407

定义`self.multilineCommands`为前锋，如下所示：

```
self.multlineCommands = Forward() 
```

然后`self.multilineCommands`像往常一样使用定义其余的语法。在您的测试中，“注入”不同的表达式以`self.multilineCommands`使用`<<`运算符：

```
self.multilineCommands << (test expression 1) 
```

然后，当您使用整体语法进行解析时，您的 pyparsing 测试表达式将在任何地方使用`self.multilineCommands`。

(**注意：**
请务必将右侧包含在`()`'s 中，以防止由于我不幸选择了此运算符而导致操作问题的优先级。在 pyparsing 的下一个版本中，我将添加对此操作的`<<`支持`<<=`和弃用`<<`，这将解决这个问题的大部分。）

**编辑**
这是一个灵活的解析器，它有一个只写属性，将接受一个字符串列表作为允许的关键字。解析器本身是一个简单的函数调用解析器，它解析接受单个数字参数或常量`pi`或`π`或的函数`e`。

```
# coding=UTF-8
from pyparsing import *

class FlexParser(object):
    def __init__(self, fixedPart):
        self._dynamicExpr = Forward()
        self.parser = self._dynamicExpr + fixedPart

    def _set_keywords(self, kw_list):
        # accept a list of words, convert it to a MatchFirst of
        # Keywords defined using those words
        self._dynamicExpr << (MatchFirst(map(Keyword, kw_list)))
    keywords = property(fset=_set_keywords)

    def parseString(self,s):
        return self.parser.parseString(s)

E  = CaselessKeyword("e").setParseAction(replaceWith(2.71828))
PI = (CaselessKeyword("pi") | "π").setParseAction(replaceWith(3.14159))
numericLiteral = PI | E | Regex(r'[+-]?\d+(\.\d*)?').setParseAction(lambda t:float(t[0]))
fp = FlexParser('(' + numericLiteral + ')')
fp.keywords = "sin cos tan asin acos atan sqrt".split()

print fp.parseString("sin(30)")
print fp.parseString("cos(π)")
print fp.parseString("sqrt(-1)") 
```

现在只需为属性分配一个单词列表即可更改关键字`keywords`。setter 方法将列表转换为关键字的 MatchFirst。请注意，现在解析“sin(30)”将引发异常：

```
fp.keywords = "foo bar baz boo".split()
print fp.parseString("foo(1000)")
print fp.parseString("baz(e)")
print fp.parseString("bar(1729)")
print fp.parseString("sin(30)")   # raises a ParseException 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-11T16:18:51.537

如果你想`self.grammar`永远等于`self.multilineCommands`它很简单：

```
self.multilineCommands=['hello','world','multiline']
self.grammar=self.multilineCommands 
```

然后你可以改变任何一个值，它们都是一样的。

# java - 是否有完整的 Java 规范

> ID：13332933
> 
> 赞同：3
> 
> 时间：2012-11-11T16:10:46.767
> 
> 标签：java, specifications

Python 有一个[完整的语法规范](http://docs.python.org/3.3/reference/grammar.html)，在一页中列出了 Python 的所有语法规则。Java有这样的东西吗？其他语言有类似的东西吗？如果不是，那么 Java 与此最接近的东西是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-11T16:12:33.690

[http://docs.oracle.com/javase/specs/jls/se7/html/jls-2.html](http://docs.oracle.com/javase/specs/jls/se7/html/jls-2.html)

干得好。

[这里](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)有所有其他规格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T17:44:26.283

这个也可能有用。易于阅读的表格，特别是如果您正在寻找一些具体的主题。

[http://docs.oracle.com/javase/7/docs/](http://docs.oracle.com/javase/7/docs/)

# python - 将复杂函数从一组绘制到另一组

> ID：13332934
> 
> 赞同：1
> 
> 时间：2012-11-11T16:10:53.490
> 
> 标签：python, numpy, matplotlib, scipy

例如，我有这样一组复杂的点：

![原像](../Images/aa67a2f05b33e3732c39b79e3d4e5175.png)

我想从原像绘制函数图像（例如，f(z) = -cos(z)）：

![图片](../Images/5e1e14bcd6fe1ddcce42c5d7e54929ae.png)

这是我的代码：

```
from numpy import *
import matplotlib.pyplot as plt

z_0 = []
N = 500
u = linspace(0.0, pi, N)
v = linspace(0.0, 15.0, N)
for i in xrange(N):
    for j in xrange(N):
        z_0.append(u[i] + 1j * v[j])
z = -cos(z_0)
plt.plot(real(z), imag(z), linestyle='', marker='x')
plt.grid(True)
plt.show() 
```

我可以摆脱两个嵌套循环吗？有没有更好的方法来使用 numpy/matplotlib 标准函数来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T16:22:05.240

你可以用单线做到这一点：

```
import numpy as np
z_0 = u[:,np.newaxis] + 1j*v[np.newaxis,:] 
```

关键是 np.newaxis 有点[索引魔法](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html)，它从原始的一维数组创建 (N,1) 和 (1,N) 二维数组，然后由 numpy 的索引规则复制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T16:27:16.737

你可以使用[numpy.meshgrid](http://docs.scipy.org/doc/numpy/reference/generated/numpy.meshgrid.html)：

```
>>> from numpy import linspace, meshgrid, pi
>>> u = linspace(0, pi, 3)
>>> v = linspace(0, 10, 3)
>>> uu, vv = meshgrid(u, v)
>>> uu
array([[ 0\.        ,  1.57079633,  3.14159265],
       [ 0\.        ,  1.57079633,  3.14159265],
       [ 0\.        ,  1.57079633,  3.14159265]])
>>> vv
array([[  0.,   0.,   0.],
       [  5.,   5.,   5.],
       [ 10.,  10.,  10.]])
>>> z = uu + 1j * vv
>>> z
array([[ 0.00000000 +0.j,  1.57079633 +0.j,  3.14159265 +0.j],
       [ 0.00000000 +5.j,  1.57079633 +5.j,  3.14159265 +5.j],
       [ 0.00000000+10.j,  1.57079633+10.j,  3.14159265+10.j]]) 
```

# ruby-on-rails - 分类中的Rails NoMethodError#show

> ID：13332936
> 
> 赞同：0
> 
> 时间：2012-11-11T16:11:12.723
> 
> 标签：ruby-on-rails, ruby, routes

我正在关注一本名为 Rails Solutions: Rails Made Easy 的书，它是为 rails 2 编写的，但我使用的是 rails 3，这让事情变得非常有趣，让我学到了很多东西，这很好，但我坚持上述问题。我在 Stack 和其他网站上阅读过，我认为这可能是路线问题，但到目前为止，这本书还没有提到任何关于路线的内容。

路线.rb

```
List::Application.routes.draw do
  match ':controller(/:action(/:id))(.:format)'
end 
```

应用程序/视图/分类/show.html.erb

```
 <p>
    <strong>Title: </strong> <%= @classified.title %><br />
  </p> 
```

应用程序/控制器/classified_controller.rb

```
class ClassifiedController < ApplicationController
  def list
    @classifieds = Classified.find(:all)
  end
  def show
     @classifieds = Classified.find(params[:id])
  end
   def new
@classified = Classified.new
  end
  def create
    @classified = Classified.new(params[:classified])
    if @classified.save
      redirect_to :action => 'list'
    else
      render :action => 'new'
    end
  end
  def edit

  end
  def update

  end
  def delete

  end
end 
```

分类中的 NoMethodError#show

显示 /home/mark/Documents/RoR/list/app/views/classified/show.html.erb 其中第 3 行提出：

nil:NilClass 的未定义方法 `title' 提取的源代码（在第 3 行附近）：

1：2：

3： **标题：** <%= @classified.title %>
4：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T16:13:46.370

在您使用的控制器中，`@classifieds`但在您的视图中使用`@classified`. 更改一个以匹配另一个。

# bash - 避免使用“源”来设置环境？

> ID：13332943
> 
> 赞同：1
> 
> 时间：2012-11-11T16:12:19.790
> 
> 标签：bash, shell

我正在尝试编写一个脚本，允许我在我的环境中设置一堆环境变量。我习惯做的是：

```
source ./script 
```

但是现在我希望我的脚本位于 PATH 变量中，这样我就可以从我想要的任何地方调用它。

但是这样称呼它：

```
script 
```

将打开一个新的 shell 并在新的 shell 中设置变量，一旦脚本执行完毕，我就会失去一切。

所以我想知道我怎么能做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T16:49:17.550

也许你应该使用`alias`.

假设您的环境变量在文件`/path/to/stuff/my_env`中，只需添加一个别名

```
alias my_env="source /path/to/stuff/my_env" 
```

然后你只需要发出`my_env`，你就完成了！

What you're trying to achieve can't be done from within a script, unless your script launches a new `bash` command, but that's a bit awkward!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T16:15:16.927

您可以创建一个获取脚本的函数：

```
do_it () {
  source /your/script
} 
```

把它放在你的里面`.bashrc`，你就可以发出

```
do_it 
```

# cpu - 什么是时钟脉冲测量？

> ID：13332946
> 
> 赞同：0
> 
> 时间：2012-11-11T16:12:22.600
> 
> 标签：cpu, computer-architecture

我是计算机体系结构的新手，我不明白 CPU 中的`clock`或`clock pulse`度量是什么，指的是计算机中的哪个操作？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-07T05:48:49.200

1.  什么是时钟脉冲
2.  SR和时钟SR之间是什么关系
3.  时钟脉冲的脊你了解什么
4.  您在实验中遇到任何问题讨论详细信息
5.  改变输入 A 和 B 以获得和输出 S 和进位输出 C 的所有可能组合和结块真值表
6.  方式是半加法器无法进行所有加法运算。我们需要一个全加器吗
7.  C 是什么意思。全加器输入的实际输出电压是多少，其中值 A、B 和 C 为 1
8.  半加器和全加器有什么区别。

# c# - 将表列中的二进制文件读入 byte[] 数组

> ID：13332960
> 
> 赞同：8
> 
> 时间：2012-11-11T16:14:39.287
> 
> 标签：c#, asp.net, arrays, sql-server

我在我的应用程序中使用 PBKDF2 来存储用户密码。在我的用户表中，我有一个`Salt`和`Password`列，它是这样确定的：

```
// Hash the users password using PBKDF2
var DeriveBytes = new Rfc2898DeriveBytes(_Password, 20);
byte[] _Salt = DeriveBytes.Salt;
byte[] _Key = DeriveBytes.GetBytes(20);  // _Key is put into the Password column 
```

在我的登录页面上，我需要检索这个盐和密码。因为它们是 byte[] 数组，所以我将它们作为`varbinary(MAX)`. 现在我需要检索它们以与用户输入的密码进行比较。我将如何使用`SqlDataReader`？目前我有这个：

```
cn.Open();
SqlCommand Command = new SqlCommand("SELECT Salt, Password FROM Users WHERE Email = @Email", cn);
Command.Parameters.Add("@Email", SqlDbType.NVarChar).Value = _Email;
SqlDataReader Reader = Command.ExecuteReader(CommandBehavior.CloseConnection);
Reader.Read();
if (Reader.HasRows)
{
    // This user exists, check their password with the one entered
    byte[] _Salt = Reader.GetBytes(0, 0, _Salt, 0, _Salt.Length);
}
else
{
    // No user with this email exists
    Feedback.Text = "No user with this email exists, check for typos or register";
} 
```

但我知道这是错误的事实。其他方法`Reader`只有一个参数是要检索的列的索引。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-11T20:43:28.493

`byte[]`到目前为止，将其直接转换为 a对我有用。

```
using (SqlConnection c = new SqlConnection("FOO"))
{
    c.Open();
    String sql = @"
        SELECT Salt, Password 
        FROM Users 
        WHERE (Email = @Email)";
    using (SqlCommand cmd = new SqlCommand(sql, c))
    {
        cmd.Parameters.Add("@Email", SqlDbType.NVarChar).Value = _Email;
        using (SqlDataReader d = cmd.ExecuteReader())
        {
            if (d.Read())
            {
                byte[] salt = (byte[])d["Salt"];
                byte[] pass = (byte[])d["Password"];

                //Do stuff with salt and pass
            }
            else
            {
                // NO User with email exists
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T16:34:31.467

我不确定您为什么认为您编写的代码是错误的（请解释）。但特别针对错误：
请注意[GetBytes](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getbytes.aspx)返回一个`long`非字节数组。

所以，你应该使用： `Reader.GetBytes(0, 0, _Salt, 0, _Salt.Length);`

**或者**
`long bytesRead = Reader.GetBytes(0, 0, _Salt, 0, _Salt.Length);`

# php - 来自前端格式问题的 Wordpress 帖子

> ID：13332961
> 
> 赞同：0
> 
> 时间：2012-11-11T16:14:49.973
> 
> 标签：php, wordpress, post, permissions, admin

*** *编辑

现在好了，我修好了！添加

```
 add_action('init', 'kses_init'); 
```

我知道这是不安全的，但表格确实有很多验证，所以我认为应该没问题。如果有人能想到更好的方法，我很想知道它，因为我是对编码和 PHP 不太了解，我所知道的一切都是通过 Google loool 自学的。

谢谢

* * *

基本上，使用这个网站和它的大量教程，我设法为我的网站制作了一个“从 Front Ent 发布”表格。如果您以管理员身份登录，它可以完美运行，但如果您以任何其他帐户登录，它会分解代码并从帖子中删除所有 HTML。

我完全不知道出了什么问题，我尝试将帖子设置为自动归因于管理员，但这并没有改善任何事情。

当我在普通帐户中发帖时，帖子看起来像这样：http: [//i.stack.imgur.com/xwbIK.png](http://i.stack.imgur.com/xwbIK.png)

如果你们中的任何人都可以纠正这个问题，我将非常感激！

如果您需要查看代码，请告诉我并将其粘贴进去！！

好的，在某个 mod 的一些建议之后，我认为磨损的代码部分是帖子内容，它从我输入的代码中删除了所有 HTML。我为帖子提供的代码如下，第一个bit 是字符串的定义，第二个是 post 脚本：

```
 function simple_fep_add_post(){
if ( 'POST' == $_SERVER['REQUEST_METHOD'] && !empty( $_POST['action'] ) &&         $_POST['action'] == 'post' ){
    if ( !is_user_logged_in() )
        return;
    global $current_user;

    $user_id        = $current_user->ID;
    $post_title     = $_POST['post-title'];
    $post_artist    = $_POST['video-artist'];
    $anti_spam   = $_POST['anti-spam'];
    $artist_twitter     = $_POST['artist-twitter'];
    $post_cat   = array(intval($_POST['post-category']));
    $twitter_trimmed = ltrim($artist_twitter, "@.");
    $video_type     = $_POST['video-type'];
    $fv_video     = $_POST['fv_video'];
    $post_content   = $_POST['posttext'];
    $tags           = $_POST['tags'];
    $headers = get_headers('http://gdata.youtube.com/feeds/api/videos/' . $fv_video);
    $user_infos = 'http://api.twitter.com/1/users/show.xml?screen_name='.$twitter_trimmed;
    $content = '<style>.video-box{ border:1px solid #efefef;height:100%;padding:15px;background:#fff;}</style><div class="video-box"><iframe width="595" height="350" src="http://www.youtube.com/embed/'.$fv_video.'?rel=0" frameborder="0" allowfullscreen></iframe></div><style>.desc-box{ border:1px solid #efefef;height:100%;margin-top:10px;margin-bottom:10px;padding:15px;background:#fff;}</style><div class="desc-box"><h4>description</h4>'.$post_content.'</div>'; 
```

这一点是我定义错误消息等的地方 - 我很确定这里没有错

```
 if (count($error_array) == 0){

    remove_filter('pre_user_description', 'wp_filter_kses');

    function my_change_author( $data , $postarr )

    {

     $data['post_author'] = 2;

      return $data;

    }

    add_filter('wp_insert_post_data' , 'my_change_author' , '99', 2);

        $new_post = array(
            'post_author' => '2',
            'post_title'    => $post_artist. ' &ndash; ' .$post_title. ' [Guest Post] ['.$video_type.' Video] [@'.$twitter_trimmed.']',
            'post_type'     => 'post',
            'post_content'  => $content,
            'tags_input'    => $tags,
            'post_category' => $post_cat,
            'post_status'   => 'publish'
            );  

    //SAVE THE POST

    $pid = wp_insert_post($new_post);

    //SET OUR TAGS UP PROPERLY

       wp_set_post_tags($pid, $_POST['tags']);

    global $notice_array;
        $notice_array = array();
        $notice_array[] = "Thank you for posting. Your post is now live. Go 
    to the homepage to view it!";
        add_action('simple-fep-notice', 'simple_fep_notices');
    } else {
        add_action('simple-fep-notice', 'simple_fep_errors');
    }
}

    }

    add_action('init','simple_fep_add_post');

    //POST THE POST YO
do_action('wp_insert_post', 'wp_insert_post'); " 
```

代码到此结束

***编辑********

在进行了更多修改之后，我转向了 WP 从帖子 IE 中剥离所有代码的问题，“样式”和“div”标签与视频嵌入代码一起被剥离......有没有办法阻止 WP 格式化输入了什么？

*****再次编辑*******

 **这是经过更多修改后的字符串定义，我已经设法让网站现在发布样式，它只是不断从帖子中剥离 Iframe……有什么想法吗？

```
 global $user_ID;

    $post_title     = $_POST['post-title'];
    $post_artist    = $_POST['video-artist'];
    $anti_spam   = $_POST['anti-spam'];
    $artist_twitter     = $_POST['artist-twitter'];
    $post_cat   = array(intval($_POST['post-category']));
    $twitter_trimmed = ltrim($artist_twitter, "@.");
    $video_type     = $_POST['video-type'];
    $fv_video     = $_POST['fv_video'];
    $post_content   = $_POST['posttext'];
    $tags           = $_POST['tags'];
    $headers = get_headers('http://gdata.youtube.com/feeds/api/videos/' . $fv_video);
    $user_infos = 'http://api.twitter.com/1/users/show.xml?screen_name='.$twitter_trimmed;
    $content = '<div style="border:1px solid #efefef;height:100%;padding:15px;background:#fff;"><iframe width="595" height="350" src="http://www.youtube.com/embed/'.$fv_video.'?rel=0" frameborder="0" allowfullscreen></iframe></div><div style="border:1px solid #efefef;height:100%;margin-top:10px;margin-bottom:10px;padding:15px;background:#fff;"><h4>description</h4>'.$post_content.'</div>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T01:17:17.420

## 编辑

现在好了，我修好了！添加

```
add_action('init', 'kses_init'); 
```

我知道这是不安全的，但表单确实有很多验证，所以我认为应该没问题。如果有人能想到更好的方法，我很想知道。**

# objective-c - NSNetServiceBrowser 找不到存在的服务

> ID：13332965
> 
> 赞同：1
> 
> 时间：2012-11-11T16:15:16.260
> 
> 标签：objective-c, macos, bonjour, nsnetservicebrowser

我有一个自定义的 Cocoa (OSX) 服务器和客户端，服务器发布了一个 bonjour 服务。我让客户端使用 搜索服务器`NSNetServiceBrowser`，但我从未得到任何结果。我知道该服务已发布，因为它位于`mdns -B _myservicetype._tcp`. 我的搜索和发布代码都使用相同的域、名称和类型进行搜索和发布，并且几乎与 Apple 示例代码相同。这是发布代码：

```
service = [[NSNetService alloc] initWithDomain:@"" type:@"_scijs._tcp" name:@"ScienceJeopardyServer" port:4567];
[service publish]; 
```

这是搜索和委托方法：

```
[sbrows setDelegate:self];
[sbrows searchForServicesOfType:@"_scijs._tcp" inDomain:@""]; 
```

以下是委托方法：

```
-(void)netServiceBrowserWillSearch:(NSNetServiceBrowser *)aNetServiceBrowser {
    [self.statusLabel setStringValue:@"Searching for server..."];
    [self.serverIndicator setHidden:NO];
    [self.serverIndicator startAnimation:self];
}

-(void)netServiceBrowser:aNetServiceBrowser didNotSearch:(NSDictionary *)errorDict {
    [self.statusLabel setStringValue:@"Error finding server."];
    [self.serverIndicator stopAnimation:self];
    [self.serverIndicator setHidden:YES];
}

-(void)netServiceBrowserDidStopSearch:(NSNetServiceBrowser *)aNetServiceBrowser {
    [self.serverIndicator stopAnimation:self];
    [self.serverIndicator setHidden:YES];
}

-(void)netServiceBrowser:(NSNetServiceBrowser *)aNetServiceBrowser didFindService:(NSNetService *)aNetService moreComing:(BOOL)moreComing {
    [aNetServiceBrowser stop];
    NSLog(@"Found server.");
    [self.statusLabel setStringValue:@"Resolving service..."];
    [aNetService setDelegate:self];
    [aNetService resolveWithTimeout:10.0];
} 
```

其中大部分只是 GUI 代码和 NSLogs，但我从来没有得到 gui 更改或 NSLogs。有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T19:24:33.177

很有可能它在您的客户中。

1.  在委托方法中设置断点。
2.  确保`sbrows`没有超出范围。如果它超出范围 willSearch 被调用，则没有其他响应。

# apache - Apache .htaccess 重写规则

> ID：13332967
> 
> 赞同：0
> 
> 时间：2012-11-11T16:15:25.197
> 
> 标签：apache, .htaccess

我需要重写这个网址

```
http://www.website.com/game/newscore.php
http://www.website.com/game/index.php?act=Arcade&do=newscore
http://www.website.com/game/index.php?act=Arcade&do=savescore 
```

合而为一

```
http://www.website.com/savescore 
```

和

```
http://www.website.com/game/index.php?act=Arcade&do=verifyscore 
```

在

```
http://www.website.com/game/verifyscore 
```

这是我当前的 .htaccess 文件

```
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

任何人都可以帮助我吗？谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T16:24:34.480

```
RewriteRule ^http://www.website.com/game/newscore.php$ http://www.website.com/savescore [R,L]
RewriteRule ^http://www.website.com/game/index.php?act=Arcade&do=(new|save)score$ http://www.website.com/savescore [R,L]
RewriteRule ^http://www.website.com/game/index.php?act=Arcade&do=verifyscore$ http://www.website.com/game/verifyscore [R,L]

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

# hibernate - 在这种情况下如何定义 JPA 关系的类型？

> ID：13332972
> 
> 赞同：2
> 
> 时间：2012-11-11T16:15:47.457
> 
> 标签：hibernate, jpa, orm, jpa-2.0, relationship

我有班级用户和班级地址。**地址**仅包含 4 个属性：

```
publiс class Address {

    private Long id;
    private String country;
    private String city;
    private String street;

    // getters and setters
} 
```

和**用户**结构：

```
public class User {
    private Long id;
    private String name;
    private Address homeAddress;
    private Address businessAddress;

    // other fields and methods
} 
```

**当一个实体（*User*）**有两个**（或多个）**字段具有自己的某个自定义类**（*Address*）的类型**时，选择哪种类型的 JPA 关系以及如何通过注释来实现它****？****

 **如果用户只有一个地址，这将是一对多的关系。但是这个案子呢？如何在我的系统中正确定义这些对象？

我试图`users`在 Address 类中创建另一个字段：

```
@OneToMany(mappedBy = "?")
private List<User> users; 
```

但这不是我的问题的解决方案，因为在 User 类中有两个地址类型的字段。并且不清楚是否有必要在`mappedBy`注释中定义......

我将不胜感激任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:54:27.613

```
 public class User {
    private Long id;
    private String name;
    private Address homeAddress;
    private Address businessAddress;

    // other fields and methods

    @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
    @JoinColumn(name = "HOME_ADDRESS_ID")
    public Address getHomeAddress() {
        return homeAddress;
    }

    public void sethOMEAddress(Address homeAddress) {
        this.homeAddress= homeAddress;
    }

    @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
    @JoinColumn(name = "BUSINESS_ADDRESS_ID")
    public Address getBusinessAddress() {
        return businessAddress;
    }

    public void setBusinessAddress(Address businessAddress) {
        this.businessAddress= businessAddress;
    }
} 
```

并且班级地址保持不变。**

# python - Python：函数调用类属性消失后

> ID：13332975
> 
> 赞同：-1
> 
> 时间：2012-11-11T16:16:08.110
> 
> 标签：python, user-interface

这么大的问题，我想不通。也许我的 Python 知识太少了。

问题是，在此函数顺利运行一次后，另一次我在另一个函数中出错。

函数，之后事情会中断：

```
 def setFixedPriority( self, priority, lister ):
    step = priority / lister . __len__ ( )
    for j in range( 0, lister . __len__( ) ):
        for i in range( 0, self . listOfJobs . __len__ ( ) ) :
            if self . listOfJobs[ i ] . category == lister[ j ]:
                self . listOfJobs[ i ] . priority += priority
            elif self . listOfJobs[ i ] . jobType == lister[ j ]:
                self . listOfJobs[ i ] . priority += priority
            elif self . listOfJobs[ i ] . timeToDo == lister[ j ]:
                self . listOfJobs[ i ] . priority += priority
        priority -= step
            self . sortByPriority( ) 
```

出现问题的函数：

```
 def sortByPriority( self ) :
    tmp = range ( 1, self . listOfJobs . __len__ ( ) + 1 )
    for i in reversed ( tmp ) :
        for j in range ( 1, i ) :
            if self . listOfJobs [ j - 1 ] . priority < self . listOfJobs [ j ] . priority :
                self . listOfJobs [ j - 1 ], 
                self . listOfJobs [ j ] = self . listOfJobst [ j ], 
                self . listOfJobs [ j - 1 ] 
```

调用函数（来自不同的 python 脚本/文件/类）：

```
 self . jobs . setFixedPriority( int( self . settings[ 'Spinbox1' ] ), self . settings[ 'type' ] . split( ":" ) ) 
```

我得到的错误是：

```
 File "data/ToDoListClass.py", line 82, in sortByPriority
    self . listOfJobs [ j ] = self . listOfJobst [ j ], 
    AttributeError: jobList instance has no attribute 'listOfJobst' 
```

我知道 sortByPriority 工作正常，因为我在 setFixedPriority 之前调用过一次，它不会给我错误。

什么可能导致这种情况发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T16:27:29.710

```
AttributeError: jobList instance has no attribute 'listOfJobst' 
```

如果你仔细看，你有一个错字。调用该属性`listOfJobs`时不带尾随`t`。

请注意，虽然这会消除错误，但这可能不会修复该功能：

```
self . listOfJobs [ j - 1 ], 
self . listOfJobs [ j ] = self . listOfJobs [ j ], 
self . listOfJobs [ j - 1 ] 
```

该构造可能应该交换 `listOfJobs[j]`和`listOfJobs[j - 1]`. 由于换行符，这将执行以下操作：

1.  制作一个单元组`listOfJobs[j - 1]`（没有其他事情发生）
2.  `listOfJobs[j]`用to分配一个单元组`listOfJobs[j]`。
3.  访问`listOfJobs[j - 1]`（同样，没有其他事情发生）。

你想要做的是将它写在一行中：

```
self.listOfJobs[j - 1], self.listOfJobs[j] = self.listOfJobs[j], self.listOfJobs[j - 1] 
```

或者，如果您想保留换行符，请使用 Python 的`\`语法使行继续：

```
self.listOfJobs[j - 1], \
self.listOfJobs[j] = self.listOfJobs[j], \
self.listOfJobs[j - 1] 
```

尽管我会争辩说这是否真的很清楚会发生什么。

最后，您可以大量清理代码。您可以直接遍历列表，也可以在一个 if 中检查多个条件。最后，Python 的 sort 函数允许你指定一个自定义的比较函数，这样你就不需要实现自己的排序算法，而是可以使用 Python 的实现。总而言之，你可能会得到这样的结果：

```
def setFixedPriority (self, priority, listers):
    step = priority / len(listers)
    for lister in listers:
        for job in self.listOfJobs:
            if job.category == lister or job.jobType == lister or job.timeToDo == lister:
                job.priority += priority

        priority -= step

    self.listOfJobs.sort(key=lambda x: x.priority) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T16:27:16.303

一些注释将帮助您编写更多“Pythonic”代码：

*   你的代码不是很 Pythonic。你不需要在`range()`这里使用；您可以使用`for ... in`行数更少且更清晰的结构。但这不是你的主要问题。
*   `sortByPriority()`应该重写以使用内置的 Python 排序函数；你可以给它一个任意函数来对两个比较器进行排序。这真的是你想要在这里做的，而不是 rewrite `sort()`。

你正在做的一件事让我很生气，那就是你在迭代列表的过程中对列表进行排序。这在过去对我造成了奇怪的行为，包括破损。这可能适合您的使用，但您应该考虑在完成调整列表中所需的所有内容之前不要对其进行排序。

最后，我看不到您在哪里创建`listofjobst`. 那是错字吗？

# expressionengine - 使用 Stash 的空白输出

> ID：13332985
> 
> 赞同：3
> 
> 时间：2012-11-11T16:17:31.793
> 
> 标签：expressionengine

我终于给 Stash（EE 2.5.3 上的 2.3.5 版本）一个项目，看看它是否像大家说的一样好。

我尽可能多地关注文档，并在页面标题处设置存储，如下所示：

```
{exp:channel:entries channel="homepage" limit="1" dynamic="no"}
{exp:stash:set_list name="homepage"}
    {stash:cf_homepage_main_intro}{cf_homepage_main_intro}{/stash:cf_homepage_main_intro}
    {stash:cf_homepage_strapline}{cf_homepage_strapline}{/stash:cf_homepage_strapline}

    {cf_homepage_contact_info}
        {stash:mx_pinterest}{mx_pinterest}{/stash:mx_pinterest}
        {stash:mx_facebook}{mx_facebook}{/stash:mx_facebook}
        {stash:mx_twitter}{mx_twitter}{/stash:mx_twitter}
        {stash:mx_tel}{mx_tel}{/stash:mx_tel}
        {stash:mx_email}{mx_email}{/stash:mx_email}
        {stash:mx_address}{mx_address}{/stash:mx_address}
    {/cf_homepage_contact_info}
{/exp:stash:set_list}
{/exp:channel:entries} 
```

然后在模板的其余部分中，我尝试按如下方式调用这些值：

```
{exp:stash:homepage:mx_tel} 
```

然而，我什么也得不到。

如果我直接输出字段名称，它们工作正常，我还打开了调试，我可以看到 stash 设置值的点，一切看起来都很好，但是调试器报告以下内容：

*存储：检索到的主页：具有价值的 mx_email*

我对从这里去哪里有点不知所措......有人有任何指示吗？

谢谢，

卡尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T20:01:08.007

啊! 我在您的问题中看到您正在尝试从同一模板中调用变量。因此，您遇到了解析顺序问题。您需要将`process="end"`参数添加到您的`exp:stash:get_list`or`exp:stash:get`标记中。并阅读我[关于模板部分的文章](http://eeinsider.com/articles/template-partials-using-stash/)！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T16:59:57.400

嗯，我想也许你的语法有误。尝试：

```
{exp:stash:get_list name="homepage"}
  Telephone: {mx_tel}
{/exp:stash:get_list} 
```

此外，如果您只检索一项，我会跳过使用 set_list 并仅使用 set 作为单独的变量。这两件事都有效，但我认为它更直观..？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-11T19:21:17.057

使用 set_list、append_list 和 prepend_list 时需要使用 Stash 的 get_list 标记对。

根据文档，您使用的是一个 Stash 快捷方式，它与 stash:get 相同，但与 stash:get_list 不同。

使用 get_list：

[https://github.com/croxton/Stash/tree/dev#expstashget_list-tag-pair](https://github.com/croxton/Stash/tree/dev#expstashget_list-tag-pair)

没有捷径：

[https://github.com/croxton/Stash/tree/dev#shortcut-tags](https://github.com/croxton/Stash/tree/dev#shortcut-tags)（用于设置/获取）

此外，您正在使用的快捷方式实际上是在使用[context](https://github.com/croxton/Stash/tree/dev#context--string)：

```
{exp:stash:your_context:your_var_name} 
```

注意上面标签中的“your_context”

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-11T20:03:58.823

问题是我试图在同一个模板中调用 {get} ，因此需要在标签之后添加 process='end' 。

另外，仅供参考 - 这就是我正在使用的：

```
{exp:stash:set name="cf_homepage_main_intro"}{cf_homepage_main_intro}{/exp:stash:set} 
```

然后将其恢复（使用快捷方式标签）：

```
{exp:stash:cf_homepage_main_intro process='end'} 
```

任务完成！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-11T18:42:11.113

{exp:stash:set_list name="homepage"} {exp:channel:entries channel="homepage" limit="1" dynamic="no"}

存储在循环内是否重要，就像在解析顺序的东西中一样，存储不是先出现的吗？

# c# - 在 LINQ 查询的选择部分中调用方法

> ID：13332986
> 
> 赞同：9
> 
> 时间：2012-11-11T16:17:34.707
> 
> 标签：c#, entity-framework, linq-to-entities

我有以下 linq 查询：

```
var file = (from p in database.tblFile
            join o in database.tblFileVersion on p.fldFileID equals o.fldFileID
            join t in database.tblFileAttachments on p.fldFileID equals t.fldFileID
            where p.fldFileID == team.Key
            where o.fldVersionNo == highestVersion
            select new UserDashboardFile
            {
                Filename = p.fldFilename,
                VersionNumber = o.fldVersionNo,
                FileID = team.Key,
                Type = GetFileType(t.fldTableName),
            }).Single(); 
```

GetFileType 是一种返回枚举类型的方法。没有语法错误，但是当我运行项目（它是一个 mvc 4 web 项目）时，我收到以下错误：

> LINQ to Entities 无法识别方法 'DCIS.Code.UserDashboardFileType GetFileType(System.String)' 方法，并且此方法无法转换为存储表达式。

我想这个查询不能翻译成 t-sql 查询，但我不知道如何更改我的查询以避免上述错误。提前致谢...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T16:31:19.863

您可以先选择匿名对象，然后再构造`UserDashboardFile`。

```
var file = (from p in database.tblFile
            join o in database.tblFileVersion on p.fldFileID equals o.fldFileID
            join t in database.tblFileAttachments on p.fldFileID equals t.fldFileID
            where p.fldFileID == team.Key
            where o.fldVersionNo == highestVersion
            select new 
            {
                Filename = p.fldFilename,
                VersionNumber = o.fldVersionNo,
                FileID = team.Key,
                FldTableName = t.fldTableName
            }).Single();
var udFile = new UserDashboardFile { ..., Type = GetFileType(file.FldTableName) }; 
```

您也可以`.AsEnumerable()`在 select 之前调用以防止`GetFileType`在 sql 中被翻译。

# python - 列表 += 元组与列表 = 列表 + 元组

> ID：13332987
> 
> 赞同：22
> 
> 时间：2012-11-11T16:17:47.440
> 
> 标签：python, list, concatenation, tuples

假设我有这些任务：

```
points = []
point = (1, 2) 
```

我怎么会这样做：

```
points += point 
```

它工作得很好，并给了我点 = [1, 2]。但是，如果我这样做：

```
points = points + point 
```

它给了我一个 TypeError: can only concatenate list (not "tuple") to list。但是，这些陈述不是一回事吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-11T16:19:06.253

不同之处在于，`list +=`它等效于`list.extend()`，它接受任何可迭代并扩展列表，它作为元组工作是可迭代的。（并就地扩展列表）。

另一方面，第二个将一个新列表分配给`points`，并尝试将一个列表连接到一个元组，但由于不清楚预期结果是什么（列表或元组？），因此没有完成。

# iphone - Objective-C - 在 For 循环中添加子视图？

> ID：13332988
> 
> 赞同：0
> 
> 时间：2012-11-11T16:17:55.490
> 
> 标签：iphone, objective-c, for-loop, addsubview

我有一个 for 循环（见下文），我在其中将视图添加到视图控制器，但是在运行我的应用程序时，我只看到在运行循环后将第一个和最后一个对象添加到我的视图控制器中。它非常简单，我只是创建对象并继续在它之前的对象下方添加下一个对象。

怎么会？为什么我还能尝试？谢谢。

```
for (int i = 0; i < totalAddressCells; i++)
        {
            PersonDetailCell *cell = [[PersonDetailCell alloc] initWithFrame:CGRectMake(addressCell.frame.origin.x, (addressCell.frame.origin.y + addressCell.frame.size.height + cellSpacer) * (i +1), addressCell.frame.size.width, addressCell.frame.size.height)];

            [cell setBackgroundColor:[UIColor redColor]];

            [self.view addSubview:cell];
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T16:24:40.943

的第二个论点`CGRectMake`看起来很可疑。那不应该是

```
addressCell.frame.origin.y + (addressCell.frame.size.height + cellSpacer) * (i+1) 
```

（不同的括号）？

# android - Android以编程方式设置铃声不起作用

> ID：13332991
> 
> 赞同：1
> 
> 时间：2012-11-11T16:18:24.937
> 
> 标签：android

这是我用来在我的 android 应用程序中以编程方式设置铃声的代码

```
Uri uri=Uri.parse("android.resource://"+getPackageName()+"/raw/do_you_wanna_know_why_i_use_a_knife");
RingtoneManager manager=new RingtoneManager(NatureSounds_FinalBuildActivity.this);
manager.setActualDefaultRingtoneUri(getApplicationContext(), RingtoneManager.TYPE_RINGTONE,uri);
RingtoneManager.getRingtone(getApplicationContext(), uri).play(); 
```

当我使用 getRingtone 方法播放时，铃声在应用程序中完美播放。但是当接到电话时它不会播放，并且在设置->声音->电话铃声中显示为未知铃声。

我使用 Galaxy s2 作为测试设备，声音文件位于 res 的 raw 文件夹中。它们是 mp3 格式。操作系统版本是 ICS