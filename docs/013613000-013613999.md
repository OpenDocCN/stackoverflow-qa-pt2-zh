# StackOverflow 问答 13613000-13613999

# python - Python 大于或小于

> ID：13613017
> 
> 赞同：1
> 
> 时间：2012-11-28T19:36:20.550
> 
> 标签：python, if-statement, python-2.7

我有一个“if-elif-else”块，如果一个值在该范围内，它就会被分配一个特定的值。但是，当我运行它时，它只是为它分配了 else 块中的值。这是我的代码：

```
if mile < 300:
    mileInfo['miles'] = 1
elif mile>=300 and mile <2000:
    mileInfo['miles'] = 2
elif mile>=2000 and mile <5000:
    mileInfo['miles'] = 3
else:
    mileInfo['miles'] = 4 
```

Mile 返回一个浮点数，但我认为这并不像在 Java 中那么重要。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T19:39:28.067

也许`mile`是一个包含数字的**字符串？**它不会自动转换。

```
>>> "1" < 100
False
>>> "1" == 1
False 
```

您无需`elif`重新检查前一个`if`是否为假。如果值不是`< 300`，则保证是`>=300`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T20:25:41.487

问题是'mile'是一个字符串，正如其他成员指出的那样，字符串不会自动转换。所以我将代码更改为：

```
mileInt = int(float(mile))

if mileInt < 300:
    mileInfo['miles'] = 1
elif mileInt < 2000:
    mileInfo['miles'] = 2
elif mileInt < 5000:
    mileInfo['miles'] = 3
else:
    mileInfo['miles'] = 4 
```

使用 print type(mile) 有助于检查类型是什么。

# android - Android字符串解密Base64

> ID：13613018
> 
> 赞同：0
> 
> 时间：2012-11-28T19:36:24.043
> 
> 标签：android, base64, encryption

尝试解密登录页面的 base64 字符串并收到错误“输入字符串为空”。Logcat 指向第 55 和 139 行，但我不知道如何重新编码。我是 java 和加密的新手，但知道解决方案很简单。请参阅下面的 logcat 和解密类。

日志猫：

```
11-12 04:51:49.273: W/System.err(22312): java.lang.NullPointerException: Input string was null.
11-12 04:51:49.273: W/System.err(22312):    at com.SharedPreferences.Login.Base64.decode(Base64.java:1243)
11-12 04:51:49.283: W/System.err(22312):    at com.SharedPreferences.Login.Base64.decode(Base64.java:1224)
11-12 04:51:49.283: W/System.err(22312):    at com.SharedPreferences.Login.AccessApp.decrypt(AccessApp.java:139)
11-12 04:51:49.293: W/System.err(22312):    at com.SharedPreferences.Login.AccessApp.onClick(AccessApp.java:55)
11-12 04:51:49.293: W/System.err(22312):    at android.view.View.performClick(View.java:3511)
11-12 04:51:49.293: W/System.err(22312):    at android.view.View$PerformClick.run(View.java:14105)
11-12 04:51:49.303: W/System.err(22312):    at android.os.Handler.handleCallback(Handler.java:605)
11-12 04:51:49.303: W/System.err(22312):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-12 04:51:49.303: W/System.err(22312):    at android.os.Looper.loop(Looper.java:137)
11-12 04:51:49.303: W/System.err(22312):    at android.app.ActivityThread.main(ActivityThread.java:4424)
11-12 04:51:49.303: W/System.err(22312):    at java.lang.reflect.Method.invokeNative(Native Method)
11-12 04:51:49.313: W/System.err(22312):    at java.lang.reflect.Method.invoke(Method.java:511)
11-12 04:51:49.313: W/System.err(22312):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-12 04:51:49.313: W/System.err(22312):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-12 04:51:49.313: W/System.err(22312):    at dalvik.system.NativeStart.main(Native Method) 
```

解密类（AccessApp）：

```
44\. public void onClick(View arg0) {
45\. 
46\.   sp=this.getSharedPreferences("AccessApp", MODE_WORLD_READABLE);
47\.   
48\.    
49\.    
50\.    
51\.   byte[] key = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5 };
52\.    
53\.    
54\.   try {
55\.        String decryptedUser = decrypt(user, key);  
56\.         user = sp.getString("USERNAME_KEY", decryptedUser);
57\.          
58\.   }
59\. catch (Exception e) {
60\.    // TODO Auto-generated catch block
61\.   e.printStackTrace();
62\.   }   
63\.   try {
64\.        String decryptedPass = decrypt(pass, key);  
65\.        pass = sp.getString("PASSWORD_KEY", decryptedPass);
66\.         
67.
68\.   } catch (Exception e) {
69\.     // TODO Auto-generated catch block
70\.    e.printStackTrace();
71\.   }
72\.   
73\.   if(lBttn.equals(arg0)){
74\.     
75\.      if((uname.getText().toString().equals(user))&& 
76\.        (pword.getText().toString().equals(pass)))
77\.       
78\.            {
79\.          Toast.makeText(this, "You are Logged In", 20000).show();
80\.                 
81\.               Intent intent;
82\.                intent=new Intent(this,details.class);
83\.                startActivity(intent);
84\.              flag=1;
85\.            }

135\.         public static String decrypt(String encryptedText, byte[ ] key) throws Exception   {
136\.    SecretKeySpec skeySpec = new SecretKeySpec(key, "AES");
137\.    Cipher cipher = Cipher.getInstance("AES");
138\.    cipher.init(Cipher.DECRYPT_MODE, skeySpec);
139\.    byte[] toDecrypt = Base64.decode(encryptedText);
140\.    byte[] encrypted = cipher.doFinal(toDecrypt);
141\.    return new String(encrypted);
142\.   }
143\.  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:46:18.260

如果您存储了加密的用户名和密码，`SharedPreferences`则需要在尝试解码*之前获取编码版本。*

```
56\.        user = sp.getString("USERNAME_KEY", null);
55\.        String decryptedUser = decrypt(user, key);
....
65\.        pass = sp.getString("PASSWORD_KEY", null);
64\.        String decryptedPass = decrypt(pass, key); 
```

# math - 方程等价

> ID：13613019
> 
> 赞同：-3
> 
> 时间：2012-11-28T19:36:25.107
> 
> 标签：math, wolfram-mathematica

我提交给科学期刊的一篇论文的审稿人坚持认为我的职能

```
f1[b_, c_, t_] := 1 - E^((c - t)/b)/2 
```

是函数的“数学等价物”

```
f2[b0_, b1_, t_] := 1 - b0 E^(-b1 t) 
```

他坚持

> 虽然模型可能看起来（表面上）不同，但 f1 模型只是 f2 模型的重新参数化，这可以使用高中数学轻松看出。

我在高中幸存下来，但我没有看到等效性，并且 FullSimplify 不会产生相同的结果。也许我误解了 FullSimplify。有没有办法权威驳斥或确认审稿人的说法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T19:43:52.890

如果 c 和 b 是常数，则考虑到幂运算符的属性，您可以相对容易地将它们分解出来：

```
e^(A + B) = e^A x e^B... 
```

所以

```
e^((c - t)/b) = e^(c/b - t/b) = e^(c/b) x  e^(-t/b) = b0 x e^(-t/b) 
```

后一种表达式通常用于简化线性微分方程。

# python - 跟进：numpy 多个切片布尔值

> ID：13613024
> 
> 赞同：1
> 
> 时间：2012-11-28T19:36:48.050
> 
> 标签：python, numpy

[这是我的另一个问题](https://stackoverflow.com/questions/13598646/numpy-multiple-slicing-booleans)的后续行动

```
import numpy as np
foo = np.ones(10,10,2)

foo[np.ix_(row_boolean,col_boolean,[1])] += bar[np.ix_(col_boolean)] 
```

bar 是一维数组， row_boolean 和 col_boolean 是一维布尔数组。我想将一维条形数组中的某些数字应用于 foo 中的相应列，对于 row_boolean 中的所有行 == True。

当我尝试执行上述操作时（例如 boolean_arr 全部为 False），我收到以下错误：

> *** ValueError：形状为 (0,0,1) 的不可广播输出操作数与广播形状 (0,0,0) 不匹配

我该如何解决上述问题？看起来像

```
foo[np.ix_(row_boolean,col_boolean,[1])].shape == (0,0,1)
bar[np.ix_(boolean_arr)].shape == (0,) 
```

谢谢！

编辑：有这种效果，只是我有一个额外的三维

```
In [46]: foo = np.random.random([5,5])

In [47]: foo
Out[47]: 
array([[ 0.02736112,  0.71269725,  0.73994453,  0.21814789,  0.19557647],
       [ 0.82418806,  0.94340516,  0.51143188,  0.51030109,  0.30127457],
       [ 0.6996424 ,  0.44577645,  0.24166962,  0.49316502,  0.3283645 ],
       [ 0.94403   ,  0.64943989,  0.51634012,  0.78914121,  0.73034792],
       [ 0.16748087,  0.64182321,  0.50958472,  0.67246253,  0.17233392]])

In [48]: bar = np.array([1,2,3,4,5])

In [49]: col_filter = bar > 2

In [50]: col_filter
Out[50]: array([False, False,  True,  True,  True], dtype=bool)

In [51]: row_filter = foo[:,1] > .5

In [52]: row_filter
Out[52]: array([ True,  True, False,  True,  True], dtype=bool)

In [53]: foo[np.ix_(row_filter,col_filter)]
Out[53]: 
array([[ 0.73994453,  0.21814789,  0.19557647],
       [ 0.51143188,  0.51030109,  0.30127457],
       [ 0.51634012,  0.78914121,  0.73034792],
       [ 0.50958472,  0.67246253,  0.17233392]])

In [54]: foo[np.ix_(row_filter,col_filter)] += bar[np.ix_(col_filter)]

In [55]: foo
Out[55]: 
array([[ 0.02736112,  0.71269725,  3.73994453,  4.21814789,  5.19557647],
       [ 0.82418806,  0.94340516,  3.51143188,  4.51030109,  5.30127457],
       [ 0.6996424 ,  0.44577645,  0.24166962,  0.49316502,  0.3283645 ],
       [ 0.94403   ,  0.64943989,  3.51634012,  4.78914121,  5.73034792],
       [ 0.16748087,  0.64182321,  3.50958472,  4.67246253,  5.17233392]]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T23:58:19.453

我没有时间解释为什么，但你想要

```
foo[np.ix_(row_boolean, col_boolean) + (1,)] += bar[col_boolean] 
```

您可以在此处阅读比您可能想了解的更多有关[高级索引的信息。](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#advanced-indexing)

# jquery - Ajax 不能与 jquery Flip 一起使用！插入

> ID：13613027
> 
> 赞同：0
> 
> 时间：2012-11-28T19:36:58.070
> 
> 标签：jquery, html, ajax, plugins, flip

我正在尝试使用 FLIP！插件并让它的内容由 ajax 加载。我遇到了一个问题。它只是不工作。

我可以看到在萤火虫中发生的发布事件，但是当我在 FLIP 中填充“内容”参数时似乎没有任何变化！插入。

下面是我的代码，它可以更好地解释事情。

```
<script type="text/javascript">

        function getFlipContent(url,command, target){   
            $.post(url, {"data": command}, function(response) {
                console.log(response);
                //return response;   // this is not working
                replaceHtml(target,response);  // workaround but kinda not really
            });
        }

        function replaceHtml(object,html){
            $(object).html();
            $(object).html(html);
        }

        $(function(){

            $(".flipable2").bind("click", function() {
                var url= $(this).data("url");
                var command= $(this).data("command");
                var target = $(this).data("target");
                //alert(flip);
                if (target === undefined) {
                    flip = "self";
                }
                if (target == "self") {
                    $($(this)).flip({
                        direction: 'lr',
                        color: '#ffffff',
                        content: function() {
                            getFlipContent(url, command, target);
                        }
                    });
                    return false;
                }
                else {
                    $(target).flip({
                        direction: 'lr',
                        color: '#ffffff',
                        content: function() {
                            getFlipContent(url, command, target);
                        }
                    });
                    return false;
                }
            });

        });
</script>

    <body>
    <div id="header">
        <table width="100%" cellpadding="0px" border="0px" cellspacing="0px">
            <tr>
                <td><a href="#" class="flipable2 box" data-target="#page" data-url="test.php" data-command="test">FLIP</a></td>
            </tr>
        </table>
    </div>

    <div id="page" class="box">
        BLAH BLAH BLAH BLAH BLAH BLAH BLAH BLAH BLAH BLAH BLAH BLAH BLAH BLAH</td>
    </div> 
```

所以现在我正在使用一个 replachtml 函数来手动重写我刚刚“翻转”的目标的内容。这种排序工作但会破坏动画，所以我真的更愿意使用插件的内容参数......当我这样做时，虽然它什么也没做。动画完成，但没有内容更改。我想也许我错过了一些东西。欢迎任何帮助。

这里也是一个 jsfiddle：http: [//jsfiddle.net/mUhuN/9/](http://jsfiddle.net/mUhuN/9/)​​虽然我不知道如何伪造一个 ajax 请求。

无论如何请帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:23:03.850

尝试在动画之前使用回调来加载 Ajax：

```
$("#flipbox").flip({
    direction:'tb',
    onBefore: function(){
            console.log('before starting the animation');
    },
    onAnimation: function(){
            console.log('in the middle of the animation');
    },
    onEnd: function(){
            console.log('when the animation has already ended');
    }
}) 
```

# c++ - 调试意外使用“属于”父函数的内存

> ID：13613030
> 
> 赞同：1
> 
> 时间：2012-11-28T19:37:06.350
> 
> 标签：c++, debugging, memory, valgrind

假设我有一个`foo`从给定软件工具调用的函数（在 C/C++ 中）。

函数`foo`只允许写入被`foo`调用的函数或被调用的函数之一分配的`foo`内存，而不能写入调用前已经执行的函数分配的内存`foo`。

我强烈怀疑在某些地方`foo`不允许写入内存。

有没有办法系统地调试这种行为？也许一些花哨的旗帜给 valgrind？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:11:42.880

[Valgrind 手册](http://valgrind.org/docs/manual/mc-manual.html#mc-manual.clientreqs)有一些你的程序可以调用的 Valgrind 函数。

看起来`VALGRIND_MAKE_MEM_NOACCESS`可能是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:39:40.253

您可以使用自定义分配器（想到[Boost Pool](http://www.boost.org/doc/libs/1_52_0/libs/pool/doc/html/index.html)）来确保您要“保护”的所有内存都是连续分配的。

接下来，在该内存区域中的任何数据发生更改时设置硬件断点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T22:34:47.367

foo() 可以写入其范围之外的内存的唯一方法是，如果该内存是全局的，即外部变量，或者 foo() 具有一个或多个本应只读但不知何故被修改的参数。

要验证调用参数是否被修改，您可以创建一个结构来保存参数，并在返回之前将原始参数与保存的参数进行比较。

```
struct foo_args {
    int a;
    char *b;
};         

void
foo(int a, char *b) 
{                 
    struct foo_args args;

    args.a = a
    args.b = strdup(b);

    /* The rest of the foo() code. */

    if (args.a != a || strcmp(args.b, b) != 0) {
        printf("error - args got modified\n");
    }    

    free(args.b);
} 
```

如果上面没有发现它，那么可能的情况是全局、堆栈或堆内存正在损坏。

要让 valgrind 运行该工具可能不实用，在这种情况下，您需要为 foo() 创建一个“包装器”并确保使用 valgrind 或类似的东西，它不会做不应该做的事情。另一种选择是使用调试库来跟踪/监控内存使用情况并在内存错误发生时标记它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T19:56:41.237

我会编写一个 GDB 脚本，在您的函数上设置断点，然后在您怀疑正在更改的内存上设置硬件监视，然后继续。

如果函数`foo`正在修改该内存，则硬件手表将在执行该操作的指令上触发。

GDB 脚本可能如下所示：

```
break foo
commands
up
watch array
down
continue
end 
```

我没有对此进行测试，它可能需要调整，尤其是手表表达式。您可能仅限于查看一个数组元素。我相信硬件观察点实际上只能观察一个整数大小的块：32 位上的 4 个字节或 64 位上的 8 个字节。

# html - twitter bootstrap 和 container-fluid 的 100% 高度

> ID：13613034
> 
> 赞同：5
> 
> 时间：2012-11-28T19:37:17.943
> 
> 标签：html, css, twitter-bootstrap

我已经看到了一些关于占据 100% 屏幕的 div 的问题，但没有一个完全符合我的要求。我想最接近的是：

[如何使用 twitter bootstrap 让多个列消耗 100% 的高度？](https://stackoverflow.com/questions/10239534/how-to-have-multiple-columns-that-consume-100-)

这个问题是它不使用 twitter 引导约定，而且我还有一些额外的 div 嵌套。

相关的代码片段在这里：

```
<!-- Standard bootstrap fixed header -->
<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="#">Project name</a>
      <div class="nav-collapse collapse">
        <ul class="nav">
          <li class="active"><a href="#">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
  </div>
</div>

<!-- here is the interesting section -->
<div id="app-container" class="container-fluid" style="background-color: red;">
  <div id="app" class="row-fluid" style="background-color: blue;">
    <div id="menu" class="span2" style="background-color: green;">
      Menu
    </div>
    <div id="content" class="span10" style="background-color: purple;">
      Content                    
    </div>
  </div>
</div> 
```

以及 jsFiddle 的链接：http: [//jsfiddle.net/djMJX/18/](http://jsfiddle.net/djMJX/18/)

我需要的：

*   container-fluid div (#app-container) 应该到达页面底部
*   顶部导航栏不应该有额外的滚动
*   # 内容也应该到达页面底部。如果内容比页面长，#app-container 和 #content 应该拉伸，以便内容包含在其中

我尝试了将高度和最小高度设置为 100% 的各种变化。问题似乎是由额外的行流体引起的。我已经接近所有 div 到达页面底部的位置，当内容足够短时它看起来很好，但当内容超过页面高度时它就崩溃了。

我很感激我能得到的任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:51:27.103

我们最近开始使用 Bootstrap，但是作为一个 Web 应用程序，我们在使用 100% 高度的网格系统时遇到了困难。我们的解决方案是用一些利用灵活框布局模块的帮助 css 类来补充 Bootstrap 网格。

这是规范的摘要：

> 该规范描述了针对用户界面设计优化的 CSS 框模型。在 flex 布局模型中，flex 容器的子级可以在任何方向上布局，并且可以“伸缩”它们的大小，要么增长以填充未使用的空间，要么缩小以避免溢出父级。孩子的水平和垂直对齐都可以很容易地操作。这些框的嵌套（水平内垂直，或垂直内水平）可用于构建二维布局。

这里有一些进一步的细节......

[CSS 灵活框布局模块规范](http://www.w3.org/TR/css3-flexbox/)

[简介和教程](http://weblog.bocoup.com/dive-into-flexbox/)

然而，该规范仅处于候选推荐阶段，因此它仍然很新。您还需要考虑浏览器支持...

[我可以使用弹性盒吗](http://caniuse.com/#feat=flexbox)

如果您确实需要支持旧版本的 IE，可以使用 polyfill：

[FlexieJS](http://flexiejs.com/)

# javascript - 在编写事件处理程序时对几件事感到困惑

> ID：13613035
> 
> 赞同：2
> 
> 时间：2012-11-28T19:37:23.400
> 
> 标签：javascript, event-handling

所以我正在努力获得先进的 Javascript 技能。所以我在 Lynda.com 上做一个实用的 JS 教程。第 3 章是关于事件处理程序的，我有点困惑（注意：我已经删除了使脚本在所有浏览器中工作的代码）。我已经重新观看了视频，但这根本没有帮助。

1.  `e`指的是什么？我根本没有一个名为 e 的变量或我能看到的任何其他变量。
2.  `false`指的是什么？和`return false`我处理链接一样吗？

    ```
     function clickLink(e) {
        alert("You Clicked the Link");
     }

     function linkClicked(e) {
        addEventHandler(document.getElementById("clickLink"), "click", clickLink, false);
     }

     addEventHandler(window, "load", linkClicked, false); 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:51:30.253

1.  `e`只是指已经发生的事件，您可以将其更改为您想要的任何内容。它只是将事件传递给需要使用它的各种功能等。

2.  简单的`false`意思是该事件没有被“消耗”，即如果您有多个处理同一事件的处理程序，它可以被其他处理程序使用。所以，是的，它实际上与`return false`. （请参阅下面关于冒泡的链接）

有关使用事件和[冒泡](http://www.quirksmode.org/js/events_order.html)的更多信息，请参见[此处](http://www.javascripter.net/faq/addeventlistenerattachevent.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:29:38.407

首先， e 只是您将在函数中收到的参数。你也可以这样写：

```
function evtHandler(){
    console.log(arguments[0]);
} 
```

其中 arguments[0] 是你给定的`e`. 触发事件时调用处理函数。通常在 e 参数中，您有一个对象，其中包含有关如何触发事件的一些信息。

添加事件处理程序时，该函数的最后一个参数是布尔值，它指示句柄是否应该或不应该在事件处理程序的链中冒泡。它不是你会返回 false，而是如果事件也将由其他处理程序处理。如果您想返回 false 或忽略之前的默认处理，您可以 `preventDefault`在`evtHandler`.

PS 注意事件处理程序，因为跨浏览器兼容性存在一些问题；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:52:38.903

如果您在谈论 e in `clickLink(e)`，那么我可以说您可以在 javascript 函数原型中声明您想要的任何参数，但是在调用它时您可以提供可选参数。在这里`clickLink(e)`您可以为 e 传递一个参数，或者您可以简单地忽略it.and about the `false`in `addEventHandler`check this [documentation](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)也检查这个SO[问题](https://stackoverflow.com/questions/7398290/unable-to-understand-usecapture-attribute-in-addeventlistener)。

例如，如果函数`FO`定义为：

```
function FO(e){
    //function body here
} 
```

那么你可以这样称呼它：

```
 FO(); 
```

或者

```
 FO("BAR"); 
```

# python - 这个 Python 代码是否容易受到 SQL 注入的影响？(SQLite3)

> ID：13613037
> 
> 赞同：19
> 
> 时间：2012-11-28T19:37:33.560
> 
> 标签：python, sql, security, sqlite

正如标题所示，我想知道这段代码是否容易受到 SQL 注入的影响？如果是这样，是否有更好、更安全的方法来实现同样的目标？

```
def add(table,*args):
    statement="INSERT INTO %s VALUES %s" % (table,args)
    cursor.execute(statement) 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-28T19:41:28.537

是的。使用这样的东西来防止它：

```
cursor.execute("INSERT INTO table VALUES ?", args) 
```

请注意，您不能像这样输入表格。理想情况下，表格应该是硬编码的，在任何情况下都不应该来自任何类型的用户输入。您可以使用类似于您为表所做的字符串，但您最好 100% 确定用户无法以某种方式更改它...请参阅[我可以在 sqlite3 中为表名使用参数吗？](https://stackoverflow.com/questions/5870284/can-i-use-parameters-for-the-table-name-in-sqlite3)更多细节。

本质上，您希望将参数放在游标命令中，因为它将确保数据数据库安全。`table`使用您的第一个命令，制作一个特殊的或`args`将一些不安全的东西放入您的 SQL 代码中会相对容易。请参阅[python pages](http://docs.python.org/2/library/sqlite3.html)和引用的[http://xkcd.com/327/](http://xkcd.com/327/)。具体来说，python页面引用：

> 通常，您的 SQL 操作将需要使用 Python 变量中的值。你不应该使用 Python 的字符串操作来组装你的查询，因为这样做是不安全的；它使您的程序容易受到 SQL 注入攻击（有关可能出错的幽默示例，请参见[http://xkcd.com/327/ ）。](http://xkcd.com/327/)
> 
> 相反，使用 DB-API 的参数替换。放 ？作为一个占位符，无论你想在哪里使用一个值，然后提供一个值的元组作为游标的 execute() 方法的第二个参数。（其他数据库模块可能使用不同的占位符，例如 %s 或 :1。）

基本上，有人可以设置一个执行另一个命令的 args，如下所示：

```
args="name; DELETE table" 
```

使用 cursor.execute 将填充给定的值，以便参数可以列出，并且当您对其进行查询时，这正是您将得到的。[XKCD](http://xkcd.com/327/)也幽默地解释了这一点。

![在此处输入图像描述](../Images/bb7c261219a0bef3cd9d8ee4d2449bc1.png)

# ruby-on-rails - 通过 Libspotify/Hallon 使用 FB 登录

> ID：13613038
> 
> 赞同：1
> 
> 时间：2012-11-28T19:37:33.373
> 
> 标签：ruby-on-rails, facebook, spotify

我正在开发我的第一个 Rails 应用程序，并正在尝试制作它，以便用户可以创建一个联合播放列表，然后播放该播放列表。我计划使用 Hallon/Libspotify 创建播放列表，但遇到了问题，因为 Spotify 要求用户使用 FB 登录。

我目前已将其设置为用户使用 Facebook 登录网站，但我认为 FB 给我的信息不足以自动将用户登录到 Spotify。任何有关如何实现此功能的建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T21:35:00.613

您不能将 Facebook 身份验证令牌与 libspotify 一起使用。

libspotify 需要用户名和密码对，无论是 Spotify 名称/密码还是 Facebook 名称/密码。使用 libspotify 登录后，您将获得一个单独的登录身份验证令牌，用于存储和将来的登录。

在编写应用程序时遵守 libspotify ToS 很重要，因为在编写 Web 应用程序时很容易破坏它们。最重要的两个是：

*   切勿自己存储用户名/密码。只存储您获得的令牌（存储未加密的令牌是安全的）。

*   当用户不使用您的应用程序时，切勿代表用户登录。

# php - 我的 fetch 数组不工作

> ID：13613043
> 
> 赞同：0
> 
> 时间：2012-11-28T19:37:40.863
> 
> 标签：php, mysql, arrays

我正在尝试拉出一个数组以用于另一个查询，但它不起作用，因为最后一个逗号。

```
 <?php
    include"connection.php";
    $pos = mysqli_query($not,"SELECT * FROM equipos");
    $logos = array();
    while($row= mysqli_fetch_assoc($pos)){
    $logos[] = "<br>'".$row['abrv']."'=>"."'".$row['logo']."'";
    }
    $logos = implode(",", $logos);

    $enjuego = mysqli_query($not,"SELECT * FROM partidos WHERE dprt='ftbls'");
    while($part=mysqli_fetch_array($enjuego)){
    $liga=$part['serie'];
    $eq1= $part['eq1'];
    $eq1s= strtoupper($eq1);
    $eq2= $part['eq2'];
    $eq2s= strtoupper($eq2);

    echo $logos[$eq1].'<br>';
    }
    ?> 
```

它一遍又一遍地给我同样的错误。这是我来的最近的一次，但就是行不通。有人可以告诉我我做错了什么吗？

我得到的错误是：Warning: Illegal string offset 'gua' in line 22

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:46:12.597

您的代码有几个问题：

*   您从未创建过数组
*   你不断地覆盖`$logos`
*   您的使用`substr_replace()`表明存在更深层次的问题。

这是一个更好的方法：

1.  构建阵列。

    ```
    $logos = array();
    while($row= mysqli_fetch_assoc($pos)){
      $logos[] = "<br>'".$row['abrv']."'=>"."'".$row['logo']."'";
    } 
    ```

2.  有很多方法可以将数组压缩成字符串。我鼓励您浏览有关[PHP 数组函数](http://php.net/manual/en/ref.array.php)的手册。就您而言，您对`implode()`

    ```
    $logos = implode(",", $logos); 
    ```

**注：**`$logos`气味的值。您应该构建数组来保存数据，而不是格式化。

例如：

```
$logos[$row['abrv']] = $row['logo']; 
```

输出：

```
print_r($logos); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:02:48.387

您想要的可以通过多种方式实现，但是让我们看看您的代码，那里有很多错误。

*   语义上无意义的变量名称，如`pos`, `not`, `equipos`, `abrv`. 只有`logo`和`result`是好的变量名。

*   `*`在数据库查询中使用选择器。不要那样做，而是选择您需要的确切字段，这对性能、可维护性、代码可读性、可测试性会更好……还需要我多说吗？

*   当您真正想要的是包含所有行的数组时，获取每行并在每行上运行代码。解决方案：

    ```
    $result = mysqli_query($not, "SELECT * FROM equipos");
    $logos = mysqli_fetch_all($result, MYSQLI_ASSOC); 
    ```

*   通过使用字符串连接子数组，这不是它的工作方式，你可以做什么：

    ```
    while($row = mysqli_fetch_assoc($result))
    {
        $logos[][$row['abrv']] = $row['logo'];
    } 
    ```

    但正如我所说，这没有必要。

*   `$logos`用循环的每次迭代覆盖你的变量。你需要做`$logos[] = ...`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:44:24.743

通常，`implode`对于此类情况很有用。

在不知道您到底想做什么的情况下，将此作为第一个提示：

```
$logos = array();

while($row= mysqli_fetch_assoc($pos)){
    $logos[] = "<br>'".$row['abrv']."'=>"."'".$row['logo']."'";
}

$logos = implode(",", $logos); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T20:10:20.800

我想到的最简单的方法就是更改查询并将数组获取到其中 -

```
<?php
  include_once("connection.php");
  $result = mysqli_query($not,"SELECT abrv, logo FROM equipos");
  $rows = mysqli_fetch_array($result, MYSQLI_ASSOC);

  // display the result
  echo "<pre>"
  print_r($rows);
  echo "</pre>"
?> 
```

# python - 我如何知道我的列表是否全为 1？

> ID：13613044
> 
> 赞同：40
> 
> 时间：2012-11-28T19:37:41.810
> 
> 标签：python

我正在寻找更好的方法，可能是使用列表推导？

```
>>> x = [1, 1, 1, 1, 1, 1]
>>> x
[1, 1, 1, 1, 1, 1]
>>> for i in x:
...   if i!=1:
...     print "fail"
... 
>>> 
>>> x = [1, 1, 1, 1, 1, 0]
>>> for i in x:
...   if i!=1:
...     print "fail"
... 
fail
>>> 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-11-28T19:39:18.520

```
>>> x = [1, 1, 1, 1, 1, 1]
>>> all(el==1 for el in x)
True 
```

这将函数[**`all`**](http://docs.python.org/dev/library/functions.html#all)与[生成器表达式](http://docs.python.org/dev/tutorial/classes.html#generator-expressions)一起使用。

* * *

如果列表中总是只有零和一个（或者如果您只想检查列表是否没有任何零），那么只需使用**`all`**没有任何额外的技巧：

```
>>> x = [1, 0, 1, 1, 1, 0]
>>> all(x)
False 
```

* * *

**一些解决方案的**基准：**
[数字表示运行一次解决方案所需的时间**（以毫秒为单位**） （平均 1000`timeit`次运行）]**

 **Python 3.2.3

```
 all(el==1 for el in x): 0.0003 0.0008 0.7903 0.0804 0.0005 0.0006
                       x==[1]*len(x): 0.0002 0.0003 0.0714 0.0086 0.0045 0.0554
         not([1 for y in x if y!=1]): 0.0003 0.0005 0.4142 0.1117 0.1100 1.1630
                set(x).issubset({1}): 0.0003 0.0005 0.2039 0.0409 0.0476 0.5310
y = set(x); len(y)==1 and y.pop()==1:   WA   0.0006 0.2043 0.0517 0.0409 0.4170
                   max(x)==1==min(x):   RE   0.0006 0.4574 0.0460 0.0917 0.5466
                 tuple(set(x))==(1,):   WA   0.0006 0.2046 0.0410 0.0408 0.4238
not(bool(filter(lambda y: y!=1, x))):   WA     WA     WA   0.0004 0.0004 0.0004
                              all(x): 0.0001 0.0001 0.0839   WA   0.0001   WA 
```

Python 2.7.3

```
 all(el==1 for el in x): 0.0003 0.0008 0.7175 0.0751 0.0006 0.0006
                       x==[1]*len(x): 0.0002 0.0003 0.0741 0.0110 0.0094 0.1015
         not([1 for y in x if y!=1]): 0.0001 0.0003 0.3908 0.0948 0.0954 0.9840
                set(x).issubset({1}): 0.0003 0.0005 0.2084 0.0422 0.0420 0.4198
y = set(x); len(y)==1 and y.pop()==1:   WA   0.0006 0.2083 0.0421 0.0418 0.4178
                   max(x)==1==min(x):   RE   0.0006 0.4568 0.0442 0.0866 0.4937
                 tuple(set(x))==(1,):   WA   0.0006 0.2086 0.0424 0.0421 0.4202
not(bool(filter(lambda y: y!=1, x))): 0.0004 0.0011 0.9809 0.1936 0.1925 2.0007
                              all(x): 0.0001 0.0001 0.0811   WA   0.0001   WA 
```

[PyPy 1.9.0] Python 2.7.2

```
 all(el==1 for el in x): 0.0013 0.0093 0.4148 0.0508 0.0036 0.0038
                       x==[1]*len(x): 0.0006 0.0009 0.4557 0.0575 0.0177 0.1368
         not([1 for y in x if y!=1]): 0.0009 0.0015 175.10 7.0742 6.4390 714.15 # No, this wasn't run 1000 times. Had to time it separately.
                set(x).issubset({1}): 0.0010 0.0020 0.0657 0.0138 0.0139 0.1303
y = set(x); len(y)==1 and y.pop()==1:   WA   0.0011 0.0651 0.0137 0.0137 0.1296
                   max(x)==1==min(x):   RE   0.0011 0.5892 0.0615 0.1171 0.5994
                 tuple(set(x))==(1,):   WA   0.0014 0.0656 0.0163 0.0142 0.1302
not(bool(filter(lambda y: y!=1, x))): 0.0030 0.0081 0.2171 0.0689 0.0680 0.7599
                              all(x): 0.0011 0.0044 0.0230   WA   0.0013   WA 
```

使用了以下测试用例：

```
[] # True
[1]*6 # True
[1]*10000 # True
[1]*1000+[2]*1000 # False
[0]*1000+[1]*1000 # False
[random.randint(1, 2) for _ in range(20000)] # False 
```

`WA`表示解决方案给出了*错误的答案*；`RE`代表*运行时错误*。

* * *

所以我的判断是，*Winston Ewert*的`x==[1]*len(x)` [解决方案](https://stackoverflow.com/a/13615438)在大多数情况下是最快的。如果您很少有所有列表（数据是随机的等），或者您不想使用额外的 RAM，我的解决方案效果更好。如果列表很小，则差异可以忽略不计。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-11-28T22:20:22.423

还有更多可能的方法：

```
x == [1] * len(x)

list(set(x)) == [1]

tuple(set(x)) == (1,) 
```

一些计时结果：

```
all(el==1 for el in x)                   [1.184262990951538, 1.1856739521026611, 1.1883699893951416]
y = set(x);len(y) == 1 and y.pop() == 1  [0.6140780448913574, 0.6152529716491699, 0.6156158447265625]
set(x) == set([1])                       [0.8093318939208984, 0.8106880187988281, 0.809283971786499]
not(bool(filter(lambda y: y!=1, x)))     [1.615243911743164, 1.621769905090332, 1.6134231090545654]
not any(i!=1 for i in x)                 [1.1321749687194824, 1.1325697898864746, 1.132157802581787]
x == [1]*len(x)                          [0.3790302276611328, 0.3765430450439453, 0.3812289237976074]
list(set(x)) == [1]                      [0.9047720432281494, 0.9006211757659912, 0.9024860858917236]
tuple(set(x)) == (1,)                    [0.6586658954620361, 0.6594271659851074, 0.6585478782653809] 
```

在 PyPy 上，因为：为什么不呢？

```
all(el==1 for el in x)                   [0.40866899490356445, 0.5661730766296387, 0.45672082901000977]
y = set(x);len(y) == 1 and y.pop() == 1  [0.6929471492767334, 0.6925959587097168, 0.6805419921875]
set(x) == set([1])                       [0.956063985824585, 0.9526000022888184, 0.955935001373291]
not(bool(filter(lambda y: y!=1, x)))     [0.21160888671875, 0.1965351104736328, 0.19921493530273438]
not any(i!=1 for i in x)                 [0.44970107078552246, 0.509315013885498, 0.4380669593811035]
x == [1]*len(x)                          [0.5422029495239258, 0.5407819747924805, 0.5440030097961426]
list(set(x)) == [1]                      [1.0170629024505615, 0.9520189762115479, 0.940842866897583]
tuple(set(x)) == (1,)                    [0.9174900054931641, 0.9112720489501953, 0.9102160930633545] 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-11-28T19:45:50.430

除了`all()`已经提供的答案之外，您还可以使用`set()`：

```
>>> x = [1, 1, 1, 1, 1, 1]
>>> y = set(x)
>>> len(y) == 1 and y.pop() == 1
True

>>> a = [1, 1, 1, 1, 0]
>>> b = set(a)
>>> len(b) == 1 and b.pop() == 1
False 
```

**警告; （和兑换因素）**：

*   正如一些人指出的那样，这不太可读。然而...
*   我会留下这个，因为：
    *   正如@WinstonEwert 答案中的结果所表明的那样，该解决方案的性能优于`all()`@BlaXpirit 提出的解决方案
    *   我认为 StackOverflow 的大多数成员都喜欢学习新事物；替代解决方案通过促进讨论、调查和分析来实现这一目标。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-11-28T20:46:19.627

@sampson-chen 有一个好主意，可以使用一些帮助。考虑投票他的答案并将其视为扩展评论。（我不知道如何使代码在评论中看起来不错）。这是我的重写：

```
>>> setone = set([1])
>>> x = [1, 1, 1, 1, 1, 1]
>>> set(x) == setone
True 
```

此代码与原始问题不*完全*`False`匹配，因为它返回一个空列表，该列表可能好坏，但可能无关紧要。

## 编辑

根据社区反馈（感谢@Nabb），这是第二次重写：

```
>>> x = [1, 1, 1, 1, 1, 1]
>>> set(x).issubset({1}) 
```

这可以正确处理 x 为空列表的情况。

我认为这是可读的。*并且*变体部分比写的要快（几乎快两倍）。事实上，在我的 Python 2.7 系统上，最多 20 个元素的列表和全为 1 的列表总是更快。（最多快 3 倍。）

## 更新：空列表的空洞真相和减少

@Peter Olson 在评论中写道：

> 如果列表为空，则命题“列表的每个元素都等于一个”是[空虚的](http://en.wikipedia.org/wiki/Vacuous_truth)。

评论中的进一步讨论导致@sampson-chen 写作：

> 我觉得它应该是空洞的错误；也许这篇文章中的某个人最终会在语义上启发我们。– 桑普森陈

让我们看看 Python 是怎么想的：

```
>>> all([])
True 
```

那么怎么样：

```
>>> any([])
False 
```

那为什么是对的呢？如果您之前没有遇到过这种情况，可能会感到困惑。有一种思考方式可以帮助你理解和记忆。

让我们稍微备份一下，然后开始：

```
>>> sum(mylist) 
```

Python 的内置函数`sum`从左到右对可迭代的项求和并返回总数。更抽象地思考，`sum`通过应用加法运算符来减少迭代。

```
>>> sum([])
0 
```

什么都没有的总和是 0。这很直观。但是这个呢：

```
>>> product([]) 
```

好的，它*实际上*返回了一个名称错误，因为`product`它不作为内置函数存在。但它*应该*返回什么？0? 不，[空乘积](http://en.wikipedia.org/wiki/Empty_product)的值是 1。这在数学上是最一致的（单击链接查看完整说明），因为 1 是乘法的[单位元](http://en.wikipedia.org/wiki/Identity_element)。（记住`sum([])`返回 0，加法的标识元素。）

以此理解恒等元素所起的特殊作用，回到原来的问题：

```
all([]) 
```

相当于使用[布尔`and`运算符](http://en.wikipedia.org/wiki/Logical_and)减少列表。的标识元素为`and`True，因此空列表的结果为`True`。

```
any([]) 
```

的标识元素`or`是`False`，与此表达式的值相同。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-28T20:10:10.163

这将遍历列表并收集任何不是 1 的术语。如果这些术语存在，则 bool 返回 True，答案为 False。

```
not(bool(filter(lambda y: y!=1, x))) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-28T19:39:24.147

一些使用`all()`'s cousin 的控制台示例`any()`：

```
In [4]: x = [1, 1, 1, 1, 1, 1]

In [5]: not any(i!=1 for i in x)
Out[5]: True

In [6]: x = [1, 1, 1, 1, 1, 0]
In [7]: not any(i!=1 for i in x)
Out[7]: False 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-29T09:31:06.610

这个怎么样 ：

```
lo = min(L)
hi = max(L)
if (lo != 1) and (hi != 1) and (lo != hi):
   print "fail" 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-07T02:47:37.200

还有一种方法是：

```
arr = [1,1,1,1]
len(arr) == sum(arr) #True if arr is all 1's 
```**

# xcode - 有没有一种方法可以自动刷新 XCode / XCodeBuild 的配置文件？

> ID：13613045
> 
> 赞同：1
> 
> 时间：2012-11-28T19:37:44.263
> 
> 标签：xcode, xcodebuild

我正在设置一个 CI 构建机器，想知道是否有办法确保机器总是有一组最新的配置文件。

例如，如果将新设备添加到配置门户，则 CI 构建将失败，直到 Xcode /Organizer 刷新其配置文件。

是否有用于执行此操作的 XCodeBuild 命令以便我可以自动化它（在 Jenkins 中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:06:51.297

这个答案可能会有所帮助，但我还没有实现它：

[配置文件的命令行更新](https://stackoverflow.com/questions/4744959/command-line-update-of-provisioning-profiles)

对于我们的系统，我只是计划将配置文件放入版本控制中，然后在预构建的 shell 脚本中运行这些命令。

# excel - 将多个 Excel 文件的标题合并到单个 Excel 文件的正文中

> ID：13613049
> 
> 赞同：1
> 
> 时间：2012-11-28T19:37:59.240
> 
> 标签：excel, vba

我在一个文件夹中有 1000 多个 Excel 文件。我想将每个文件中的**第一行**复制到另一个 Excel 文件中。我该怎么做？

为了说明，我想这样做：

```
File_1.xls: row 1 -> File_Master.xls: row 1
File_2.xls: row 1 -> File_Master.xls: row 2
File_3.xls: row 1 -> File_Master.xls: row 3
File_4.xls: row 1 -> File_Master.xls: row 4
.
.
.
File_1000.xls: row 1 -> File_Master.xls: row 1000 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:31:33.717

这应该有助于：

```
Sub FirstRow()
    Application.DisplayAlerts = False
    Dim strFilename As String
    Dim strPath As String
    Dim wbMaster As Workbook
    Dim wsMaster As Worksheet
    Dim wbFiles As Workbook
    Dim i As Integer

    i = 1
    Set wbMaster = ThisWorkbook
    Set wsMaster = wbMaster.Sheets(2)
    strPath = "C:\path\to\your\files\"
    strFilename = Dir(strPath & "*.xls")

    Do While strFilename <> ""
        Set wbFiles = Workbooks.Open(strPath & strFilename, False)
        wbFiles.Sheets(1).Rows(RowIndex:=1).Copy
        wsMaster.Cells(RowIndex:=i, ColumnIndex:=1).PasteSpecial Paste:=xlPasteAll
        wbFiles.Close (False)
        strFilename = Dir
        i = i + 1
    Loop
    Application.DisplayAlerts = True
End Sub 
```

有几点需要注意：
- 您需要根据需要更改对`Sheet(x)`适当值的引用
- 当您输入自己的路径时，确保 strPath 末尾有一个“\”
- 我已经转向`DisplayAlerts`false在执行期间避免在每个文件上弹出询问您是否要清除剪贴板。

# web-applications - 401.2 访问被拒绝问题

> ID：13613051
> 
> 赞同：3
> 
> 时间：2012-11-28T19:38:09.080
> 
> 标签：web-applications, iis-7

我一直遇到 401 2 未经授权的访问问题。

尽管我管理的系统通常运行平稳，但有时会在 IIS 中配置的网站或 Web 应用程序上弹出 401.2 错误。

我们所有的系统都配置为在启用 Windows 身份验证的情况下运行，而其他一切都被禁用。

通常，为了解决 Web 应用程序的此问题，我可以删除该应用程序，然后重新添加它，而无需进行任何其他更改。

当问题影响网站删除和重新添加时，它不起作用。除此之外，我想了解导致该弹出窗口随机问题的根源。

我已经将网站和 application.config 的 web.config 副本与我们拥有的各种环境进行了比较，发现似乎没有导致问题的设置。我什至卸载并重新安装了 Windows 身份验证功能，但没有成功。

如果你能给我一些项目来审查和确定问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:26:43.273

我通过将站点的物理路径更改为其他内容，然后返回正确的目录来解决此问题。

我仍然想在这里找出问题，所以如果有人能提供见解，那就太好了。

# c# - 我如何知道 ListBoxItem 是否是 Wpf 的 ListBox 中的最后一项？

> ID：13613053
> 
> 赞同：1
> 
> 时间：2012-11-28T19:38:13.530
> 
> 标签：c#, wpf, listbox, listboxitem

我如何知道 a是否是Wpf`ListBoxItem`中集合的最后一项（在模板中`ItemContainerStyle`或模板中） ？`ItemContainer``ListBox`

这个问题是因为我需要知道一个项目是否是最后一个以其他方式显示的项目。例如：假设我想显示用分号分隔的项目，但最后一个：**a;b;c**

使用 ccs 选择器在 html 和 ccs 中很容易做到这一点。但是，我怎么能在 Wpf 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T01:23:17.157

由于似乎[很难为](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/fbe80312-67aa-42ca-bd99-89b6d79e06ae/)ListBoxItem 实现一个“索引”附加属性来完成这项工作，我相信更简单的方法是在 MVVM 中实现。您可以将必要的逻辑（“IsLast”属性等）添加到列表的实体类型，并让 ViewModel 处理它，并在修改或替换集合时更新它。

**编辑**

经过一些尝试，我设法使用附加属性和继承 ListBox 的组合来实现 ListBoxItems 的索引（并因此检查最后一个）。看看这个：

```
public class IndexedListBox : System.Windows.Controls.ListBox
{
    public static int GetIndex(DependencyObject obj)
    {
        return (int)obj.GetValue(IndexProperty);
    }
    public static void SetIndex(DependencyObject obj, int value)
    {
        obj.SetValue(IndexProperty, value);
    }
    /// <summary>
    /// Keeps track of the index of a ListBoxItem
    /// </summary>
    public static readonly DependencyProperty IndexProperty =
        DependencyProperty.RegisterAttached("Index", typeof(int), typeof(IndexedListBox), new UIPropertyMetadata(0));

    public static bool GetIsLast(DependencyObject obj)
    {
        return (bool)obj.GetValue(IsLastProperty);
    }
    public static void SetIsLast(DependencyObject obj, bool value)
    {
        obj.SetValue(IsLastProperty, value);
    }
    /// <summary>
    /// Informs if a ListBoxItem is the last in the collection.
    /// </summary>
    public static readonly DependencyProperty IsLastProperty =
        DependencyProperty.RegisterAttached("IsLast", typeof(bool), typeof(IndexedListBox), new UIPropertyMetadata(false));

    protected override void OnItemsSourceChanged(System.Collections.IEnumerable oldValue, System.Collections.IEnumerable newValue)
    {
        // We capture the ItemsSourceChanged to check if the new one is modifiable, so we can react to its changes.

        var oldSource = oldValue as INotifyCollectionChanged;
        if(oldSource != null)
            oldSource.CollectionChanged -= ItemsSource_CollectionChanged;

        var newSource = newValue as INotifyCollectionChanged;
        if (newSource != null)
            newSource.CollectionChanged += ItemsSource_CollectionChanged;

        base.OnItemsSourceChanged(oldValue, newValue);
    }

    void ItemsSource_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        this.ReindexItems();
    }

    protected override void PrepareContainerForItemOverride(System.Windows.DependencyObject element, object item)
    {
        // We set the index and other related properties when generating a ItemContainer
        var index = this.Items.IndexOf(item); 
        SetIsLast(element, index == this.Items.Count - 1);
        SetIndex(element, index);

        base.PrepareContainerForItemOverride(element, item);
    }

    private void ReindexItems()
    {
        // If the collection is modified, it may be necessary to reindex all ListBoxItems.
        foreach (var item in this.Items)
        {
            var itemContainer = this.ItemContainerGenerator.ContainerFromItem(item);
            if (itemContainer == null) continue;

            int index = this.Items.IndexOf(item);
            SetIsLast(itemContainer, index == this.Items.Count - 1);
            SetIndex(itemContainer, index);
        }
    }
} 
```

为了测试它，我们设置了一个简单的 ViewModel 和一个 Item 类：

```
public class ViewModel : INotifyPropertyChanged
{
    #region INotifyPropertyChanged

    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    #endregion

    private ObservableCollection<Item> items;
    public ObservableCollection<Item> Items
    {
        get { return this.items; }
        set
        {
            if (this.items != value)
            {
                this.items = value;
                this.OnPropertyChanged("Items");
            }
        }
    }

    public ViewModel()
    {
        this.InitItems(20);
    }

    public void InitItems(int count)
    {

        this.Items = new ObservableCollection<Item>();
        for (int i = 0; i < count; i++)
            this.Items.Add(new Item() { MyProperty = "Element" + i });
    }

}

public class Item
{
    public string MyProperty { get; set; }

    public override string ToString()
    {
        return this.MyProperty;
    }
} 
```

风景：

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfApplication3"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d" x:Class="WpfApplication3.MainWindow"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <DataTemplate x:Key="DataTemplate">
        <Border x:Name="border">
            <StackPanel Orientation="Horizontal">
                <TextBlock TextWrapping="Wrap" Text="{Binding (local:IndexedListBox.Index), RelativeSource={RelativeSource AncestorType={x:Type ListBoxItem}}}" Margin="0,0,8,0"/>
                <TextBlock TextWrapping="Wrap" Text="{Binding (local:IndexedListBox.IsLast), RelativeSource={RelativeSource AncestorType={x:Type ListBoxItem}}}" Margin="0,0,8,0"/>
                <ContentPresenter Content="{Binding}"/>
            </StackPanel>
        </Border>
        <DataTemplate.Triggers>
            <DataTrigger Binding="{Binding (local:IndexedListBox.IsLast), RelativeSource={RelativeSource AncestorType={x:Type ListBoxItem}}}" Value="True">
                <Setter Property="Background" TargetName="border" Value="Red"/>
            </DataTrigger>
        </DataTemplate.Triggers>
    </DataTemplate>
</Window.Resources>
<Window.DataContext>
    <local:ViewModel/>
</Window.DataContext>
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="0.949*"/>
    </Grid.RowDefinitions>

    <local:IndexedListBox ItemsSource="{Binding Items}" Grid.Row="1" ItemTemplate="{DynamicResource DataTemplate}"/>

    <Button Content="Button" HorizontalAlignment="Left" Width="75" d:LayoutOverrides="Height" Margin="8" Click="Button_Click"/>
    <Button Content="Button" HorizontalAlignment="Left" Width="75" Margin="110,8,0,8" Click="Button_Click_1"  d:LayoutOverrides="Height"/>
    <Button Content="Button" Margin="242,8,192,8" Click="Button_Click_2"  d:LayoutOverrides="Height"/>
</Grid>
</Window> 
```

在后面的视图代码中，我放置了一些逻辑来测试更新集合时解决方案的行为：

```
public partial class MainWindow : Window
{
    public ViewModel ViewModel { get { return this.DataContext as ViewModel; } }

    public MainWindow()
    {
        InitializeComponent();
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        this.ViewModel.Items.Insert( 5, new Item() { MyProperty= "NewElement" });
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        this.ViewModel.Items.RemoveAt(5);
    }

    private void Button_Click_2(object sender, RoutedEventArgs e)
    {
        this.ViewModel.InitItems(new Random().Next(10,30));
    }
} 
```

该解决方案可以处理静态列表以及 ObservableCollections 以及添加、删除、插入项目。希望你觉得它有用。

**编辑**

用 CollectionViews 对其进行了测试，它工作得很好。

在第一个测试中，我更改了 ListBox.Items 中的 Sort/GroupDescriptions。当其中一个发生更改时，ListBox 会重新创建容器，然后 PrepareContainerForItemOverride 命中。当它在 ListBox.Items 本身中寻找正确的索引时，顺序会正确更新。

在第二个中，我将 ViewModel 中的 Items 属性设置为 ListCollectionView。在这种情况下，当描述更改时，会引发 CollectionChanged 并且 ListBox 会按预期做出反应。

# java - Netbeans 无法识别导入 java.awt.event.ActionEvent 和导入 java.awt.event.ActionListener

> ID：13613062
> 
> 赞同：0
> 
> 时间：2012-11-28T19:38:53.797
> 
> 标签：java, netbeans

我创建了一个 JButton，我想在每次单击它时执行一个操作。我从 Properties actionPerfomed 中选择，然后尝试在函数内编写代码。

```
 private void OnMusicActionPerformed(java.awt.event.ActionEvent evt) {                                        
        MusicType = "on";
    } 
```

NetBeans 虽然不识别 ActionEvent 的导入并建议我应该创建一个新类。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:15:16.017

如果您在问题中提供更多详细信息，将会很有帮助。

我猜你需要另一个实现 ActionListner 的类，例如：

```
private class ACListener implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent e) {
        throw new UnsupportedOperationException("Not supported yet.");
    }
} 
```

此链接也应该对您有所帮助：[示例](http://www.javabeginner.com/java-swing/java-jbutton-class-example)

# java - 将填充有对象的 ArrayList 添加到组合框，然后检索对象

> ID：13613067
> 
> 赞同：0
> 
> 时间：2012-11-28T19:39:20.487
> 
> 标签：java, combobox

我想首先将存储在 arraylist 中的对象显示到组合框上。对象的类型为“项目”

然后我的另一种方法将需要调用 combobox.getSelectedItem() 方法来检索对象，该对象再次属于“Items”类型；

我怎样才能做到这一点？这是我尝试过的。尝试铸造不起作用。

方法 - getItems() 只返回一个数组列表。

```
for(int i = 0; i < ah.getItems().size(); i++)
{
 itemCombobox.addItem(ah.getItems().get(i).toString());
}

public someMethod()
{
 ah.joinItem((ItemInt) itemComboBox.getSelectedItem());
} 
```

进入组合框的项目数组列表是“项目”类型。但是 .joinItem() 方法要求它是 ItemInt （接口）类型，但它没有强制转换它。

# asp.net - 更新面板在回发时冻结

> ID：13613069
> 
> 赞同：0
> 
> 时间：2012-11-28T19:39:23.090
> 
> 标签：asp.net, .net-4.0, asp.net-ajax

在 MasterPage 文件中有一个 AJAX UpdatePanel：

```
<asp:UpdatePanel ID="upnlTimer" runat="server" UpdateMode="Conditional">
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="tmrCountdown"   EventName="Tick" />
    </Triggers>
    <ContentTemplate>
        <asp:Timer ID="tmrCountdown" Enabled="false" runat="server" Interval="1000" />
        <asp:Label ID="lblTimer" runat="server" Text="TEXT"></asp:Label>
    </ContentTemplate>
</asp:UpdatePanel> 
```

当我去调试一切正常时，不要在计时器倒计时时得到回发闪存。

但是当用户从 RadioButtonList 中进行选择时，SelectedIndexChange 事件当然会触发，并且 PostBack 会按预期关闭。

我遇到的一个问题是带有 Timer/Label 的 UpdatePanel 冻结，尽管只有几分之一秒，但随着时间的推移，它可以将分配给测试的时间增加多达一整分钟（60 秒），等待被问到的问题数量。

### 问题：

1.  ~~有没有办法将 PostBack 与问题列表中的 Timer UpdatePanel 隔离开来？~~在内容页面上放置了一个更新面板
2.  ~~将 MasterPage 中的 ContentPlaceHolder 放置在 UpdatePanel 中以便其回发与 Timer UpdatePanel 隔离会更好吗？~~
3.  ~~如果我将 CPH 隔离为 #2，我仍然可以像现在一样访问 MasterPage 文件名`CType(me.Master, Main).Event`吗？~~
4.  MasterPage Timer UpdatePanel 的内容页面 UpdatePanel 存在冲突或停止问题。我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T16:12:27.497

我认为您正在经历令人讨厌的 UpdatePanel 超时。我建议您尝试改进 Radiobutton 的 SelectedIndexChanged 中的任何代码，或者尝试不使用 UpdatePanel 的其他方法。

# javascript - 如何正确地将函数传递给javascript中的其他函数

> ID：13613074
> 
> 赞同：0
> 
> 时间：2012-11-28T19:39:31.470
> 
> 标签：javascript, node.js

我试图了解 javascript 传递函数的方式，并且在思考为什么原型函数不能访问函数构造函数中定义的 var 而构造函数中定义的函数可以访问 var 时遇到了一些问题。这是有效的代码：

```
 var model = function model() {
       this.state = 1;
       this.GetState =   (function(scope){
           return function(){ return scope.state;};
       })(this);
   }

    var othermodel = function othermodel(mdl) {
        this.GetStateFn = mdl.GetState;
    }

    othermodel.prototype.WriteState = function() {
        console.log(this.GetStateFn.call());
    };

    var m = new model();
    var o = new othermodel(m)

    o.WriteState(); 
```

这有效且有意义 - GetState() 函数可以访问 this.state。

但是，如果我按如下方式创建 GetState：

```
 model.prototype.GetState =   (function(scope){
        return function(){ return scope.state;};
    })(this); 
```

结果将是未定义范围的错误。

我更喜欢使用原型方法进行这项工作，因为我不希望在任何模型中复制该函数，但原型似乎无法工作，因为它无法访问模型的特定实例。

那么，有人可以为我提供一个很好的解释：a）我需要做什么才能让它与原型一起使用（假设我可以）和b）如果我不能让它与原型一起使用，那么原因是什么我可以更好地理解问题的基础。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:42:35.167

为什么不简单地这样写函数

```
model.prototype.GetState = function() { return this.state; }

var othermodel = function othermodel(mdl) {
    this.GetStateFn = mdl.GetState.bind(mdl);
}

othermodel.prototype.WriteState = function() {
    console.log(this.GetStateFn.call());
}; 
```

上面的代码将起作用，因为在大多数情况下，您将执行类似`m.GetState()`. 这是将函数作为对象方法调用的示例。在这种情况下，`this`保证指向对象`m`。你似乎知道原型链是如何工作的，所以我不会去那里。

在将函数引用分配给另一个模型时，我们使用`.bind`来确保在 内`GetState`，`this`指向`mdl`。参考`bind`：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

您原来的 IIFE 实际上是您的绑定实现。问题是 的值`this`是错误的。目前，每次您需要将模型功能分配给其他功能时，您都需要一直使用`bind`。您已将您的问题标记为 node.js，`bind`可`Function`在 node.js 的原型和任何 ES5 兼容浏览器中使用。如果您需要在不支持的旧浏览器或环境上运行上述代码，请`bind`替换`bind`为您的 IIFE。

至于为什么你的代码不起作用，

```
model.prototype.GetState =   (function(scope){
    return function(){ return scope.state;};
})(this); 
```

在这里，`this`不是指最终的模型对象 ( `m`)。`this`可以引用 javascript 中的 5 个选项中的任何一个。参考：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)

让我们假设上面的代码在某个脚本标签内的 html 文件中。然后`this`将引用窗口对象。`window`没有任何属性称为`state`，因此`undefined`. 如果你要`console.log(this.m, this.o)`在你的脚本结束时，你会看到各自的`m`和`o`对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T19:47:08.877

当这样定义时：

```
var model = function model() {
    this.state = 1;
    this.GetState =   (function(scope){
        return function(){ return scope.state;};
    })(this);
} 
```

匿名函数被声明并立即执行。`this`作为参数传递给该自执行函数。结果 - 返回了一个新函数，但该函数`scope`在其闭包中具有参数 - 以便在范围退出后可以访问它。结果 - 该函数在调用时仍然可以访问`state`该“封闭”的属性`this`（成为`scope`并被关闭的那个）。

如果你这样定义它：

```
model.prototype.GetState =   (function(scope){
    return function(){ return scope.state;};
})(this); 
```

机制是一样的，只是`this`不是。现在它是您执行上述代码的范围的上下文。假设它是在全局范围内完成的——它将是`window`对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T20:45:03.467

如果你不想使用`bind`它，因为它支持旧版浏览器，你可以试试这个：

[http://jsfiddle.net/j7h97/1/](http://jsfiddle.net/j7h97/1/)

```
var model = function (state) {
    this.state = state || new Date().getTime();
};

model.prototype.GetState = function () {
    return this.state;
};

model.prototype.WriteState = function () {
    console.log("model WriteState: " + this.GetState());
};

var othermodel = function othermodel (mdl) {
    this.GetStateFn = function () {
        return mdl.GetState.call(mdl);
    };
};

othermodel.prototype.WriteState = function () {
    console.log("othermodel WriteState: " + this.GetStateFn());
};

var model1 = new model();
model1.WriteState();
var othermodel1 = new othermodel(model1);
othermodel1.WriteState();

var model2 = new model();
model2.WriteState();
var othermodel2 = new othermodel(model2);
othermodel2.WriteState(); 
```

似乎没有`bind`. 我创建了`model.prototype.WriteState`用于测试目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T19:47:09.180

这取决于它被调用的位置。如果它在全局范围内，`this`则不会引用模型。如果它在浏览器中运行，它将引用全局`window`对象。

# java - 如何在java中创建屏幕键盘？

> ID：13613075
> 
> 赞同：5
> 
> 时间：2012-11-28T19:39:32.153
> 
> 标签：java, eclipse, swing, jframe, jpanel

我正在做一个学校项目，我们必须创建一个虚拟智能手机，在电脑上运行。

我的问题是我需要在屏幕上创建一个键盘（例如在智能手机上），然后您可以通过单击鼠标来使用它。我可以创建每一个`JButton`，但这需要很长时间。所以我希望有人知道某种算法，可以创建所有按钮并将它们正确地放置在屏幕上。

先感谢您 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T19:49:07.670

您可以通过使用 for 循环来构造按钮。每个键盘行一个循环是一种合理的方法。

```
String row1 = "1234567890";
String row2 = "qwertyuiop";
// and so forth
String[] rows = { row1, row2, .. };
for (int i = 0; i < rows.length; i++) {
    char[] keys = rows[i].toCharArray();
    for (int j = 0; i < keys.length; j++) {
        JButton button = new JButton(Character.toString(keys[j]));
        // add button
    }
}
// add special buttons like space bar 
```

这可以通过更面向对象的方法更优雅地完成，但这个基本的循环系统将起作用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-28T19:49:07.130

这个简单的例子可能会帮助你：

![在此处输入图像描述](../Images/73cbf3e336cda023cb203c4f5ccf8fc8.png)

```
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.GridLayout;
import java.awt.Point;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

@SuppressWarnings("serial")
public class MainFrame extends JFrame
{
    private JTextField txt;
    private PopUpKeyboard keyboard;

    public MainFrame()
    {
        super("pop-up keyboard");
        setDefaultCloseOperation(EXIT_ON_CLOSE);

        txt = new JTextField(20);
        keyboard = new PopUpKeyboard(txt);

        txt.addMouseListener(new MouseAdapter()
        {
            @Override
            public void mouseClicked(MouseEvent e)
            {
                Point p = txt.getLocationOnScreen();
                p.y += 30;
                keyboard.setLocation(p);
                keyboard.setVisible(true);
            }
        });
        setLayout(new FlowLayout());
        add(txt);

        pack();
        setLocationByPlatform(true);
    }

    public static void main(String[] args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new MainFrame().setVisible(true);
            }
        });
    }

    private class PopUpKeyboard extends JDialog implements ActionListener
    {
        private JTextField txt;

        public PopUpKeyboard(JTextField txt)
        {
            this.txt = txt;
            setLayout(new GridLayout(3, 3));
            for(int i = 1; i <= 9; i++) createButton(Integer.toString(i));
            pack();
        }

        private void createButton(String label)
        {
            JButton btn = new JButton(label);
            btn.addActionListener(this);
            btn.setFocusPainted(false);
            btn.setPreferredSize(new Dimension(100, 100));
            Font font = btn.getFont();
            float size = font.getSize() + 15.0f;
            btn.setFont(font.deriveFont(size));
            add(btn);
        }

        @Override
        public void actionPerformed(ActionEvent e)
        {
            String actionCommand = e.getActionCommand();
            txt.setText(txt.getText() + actionCommand);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T20:10:26.507

```
/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub

    String alphabet = "abcdefghijklmnopqrstuvwxyz";

    JFrame myFrame = new JFrame();
    JPanel myPanel = new JPanel();

    for (int i = 0; i < alphabet.length(); i++) {

        myPanel.add(new JButton(alphabet.substring(i, i + 1)));
    }

    myFrame.add(myPanel);
    myFrame.pack();
    myFrame.setVisible(true);

} 
```

这是如何做到这一点的一个快速示例:)。

# android-layout - 将 WebView 放在 Android 布局中的 GridView 下方？

> ID：13613080
> 
> 赞同：0
> 
> 时间：2012-11-28T19:39:49.707
> 
> 标签：android-layout, android-widget, xamarin.android

下面是我的 Android 应用程序的 xml 布局。我正在尝试在屏幕上的 gridview 下方放置一个 webview。

任何人都可以帮助解释我需要做什么才能让它发挥作用吗？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/db1_root"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
        android:id="@+id/HomePage"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <GridView
            android:id="@+id/Grid"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:columnWidth="90dp"
            android:numColumns="auto_fit"
            android:verticalSpacing="10dp"
            android:horizontalSpacing="10dp"
            android:stretchMode="columnWidth"
            android:gravity="center"
            android:scrollbars="vertical" />
        <WebView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/webView1" />
    </LinearLayout>
</LinearLayout> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T23:18:24.677

我认为两个小的更改将有助于使这项工作为您服务。首先，在创建 LinearLayout 时，`android:orientation`需要该属性指示子项应该是水平添加还是垂直添加。由于您希望一个视图叠加在另一个视图之上，因此请添加`android:orientation=vertical`到 HomePage LinearLayout。其次，您的GridView 当前有一个`android:layout_height`. `fill_parent`这将导致它垂直扩展并填满整个 LinearLayout，这将阻止您的 WebView 显示。尝试将此属性更改为`wrap_content`.

制作两个孩子的高度`wrap_content`可能会导致您的应用程序中有一些空白空间。如果您需要 GridView 或 WebView 来占用视图中的所有空白空间，则可以使用该`android:layout_weight`属性。分配要扩展的视图以在绘制其余部分后填充所有剩余空间，如下所示`android:layout_weight=1`：（这里，1 代表 100% 的剩余空间）如果您想要更精细地控制您的孩子占据的父母的百分比，请考虑使用带有`android:layout_weight`属性的十进制值或`android:weightSum`在父母上与`android:layout_weight`每个孩子的a 结合使用. 希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T05:56:13.257

`android:layout_height="wrap_content"`在网格视图中使用

在内部线性布局中设置方向属性。

```
android:orientation="vertical" 
```

给 WebView 的固定高度并 `android:layout_weight=""`在两个孩子中设置。

尝试下面的代码并根据您的 webview 高度和网格视图高度进行更改。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/db1_root"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
        android:id="@+id/HomePage"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:weightSum="2"
        android:orientation="vertical">
        <GridView
            android:id="@+id/Grid"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:columnWidth="90dp"
            android:numColumns="auto_fit"
            android:verticalSpacing="10dp"
            android:horizontalSpacing="10dp"
            android:stretchMode="columnWidth"
            android:gravity="center"
           android:layout_weight="1"
            android:scrollbars="vertical" />
        <WebView
            android:layout_width="fill_parent"
            android:layout_height="200dp"
            android:layout_weight="1"
            android:id="@+id/webView1"
            />
    </LinearLayout>
</LinearLayout> 
```

`WebView 200dp`在上面的代码中，我根据您的要求给出了变化的高度。

# javascript - 更改开放图层中矢量特征的绘制属性

> ID：13613081
> 
> 赞同：1
> 
> 时间：2012-11-28T19:39:56.820
> 
> 标签：javascript, openlayers

我正在从服务器加载 shapefile，然后在 OpenLayers 中绘制它。shapefile 包含超过 400,000 个具有不同不透明度的多面体。我需要设置不透明度和填充颜色，但 openlayers 似乎忽略了它，而只是绘制橙色方块。我在更改属性之前和之后使用 console.log()，它显示了我分配的内容。谁能告诉我为什么这样做？

```
var green = {
    fill: true,
    fillColor: "#006633",
    fillOpacity: 1
};

var features = wkt.read(element);
if (featureNumber == 0){
 document.getElementById('result').innerHTML=element;
}
features = element.toString();
var bounds;
var b = features.indexOf('MULTIPOLYGON', 0);

var c = features.indexOf('MULTIPOLYGON', 40);
if (c == -1) {
    c = element.indexOf(':',b+1);
}

leftovers = features.substring(c,100000000000000000);

features = features.substring(b,c);

features = wkt.read(features);

if(features) {
    if(features.constructor != Array) {
        features = [features];
    }
    for(var i=0; i<features.length; ++i) {
        if (!bounds) {
            bounds = features[i].geometry.getBounds();
        } else {
            bounds.extend(features[i].geometry.getBounds());
        }

    }

    pointLayer.addFeatures(features);
    console.log(pointLayer.features[featureNumber].attributes );

    pointLayer.features[featureNumber].attributes = green;
    console.log(pointLayer.features[featureNumber].attributes );

    featureNumber++

     map.zoomToExtent(bounds);
    var plural = (features.length > 1) ? 's' : '';
    console.log('Feature' + plural + ' added');
    console.log('feature number: '+featureNumber)

    if (leftovers.indexOf('MULTIPOLYGON',0) != -1) {
        parseWKT(leftovers,shapefile);
    }

} else {
   final(leftovers, shapefile);
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T21:18:09.953

好吧，样式属于`.style`属性而不是`.attributes`功能。`redraw()`如果它已经在地图上，您还需要打电话。

```
pointLayer.features[featureNumber].style = green;
pointLayer.redraw(); 
```

如果您想从默认样式开始并仅更改一些内容，则可以执行以下操作：

```
var green = OpenLayers.Util.applyDefaults(green, OpenLayers.Feature.Vector.style['default']);
green.fill = true;
green.fillColor = "#006633";
green.fillOpacity = 1;
pointLayer.features[featureNumber].style = green;
pointLayer.redraw(); 
```

# c# - 在GridView的编辑行中获取组合框选定的值？

> ID：13613083
> 
> 赞同：0
> 
> 时间：2012-11-28T19:40:09.753
> 
> 标签：c#, asp.net, gridview, combobox, ajaxcontroltoolkit

我为 GrideViewServer.FooterRow 创建了一个代码，以获取页脚行（插入）中下拉列表的选定值。现在我想对编辑行做同样的事情以从组合框中获取选定的值，但是它们不在页脚行中。

这是我为页脚行写的，

```
string architecture = ((DropDownList)GridViewServer
         .FooterRow.FindControl("DropDownArchitecture")).Text; 
```

现在我想为编辑行写，我该怎么写？像这样的东西？

```
string architecture = ((AjaxControlToolkit.ComboBox)GridViewServer
         .EditRow.FindControl("ComboBox1")).Text; 
```

找不到编辑部分的选项功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:58:21.293

我找到了答案。这里我写的，

```
((AjaxControlToolkit.ComboBox)GridViewServer.Rows[GridViewServer.EditIndex].FindControl("Combobox2")).Text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:47:58.483

你不只有一个 EditRow，你有一组这种类型的行，要在里面找到一个控件，你需要使用`for`or进行迭代`foreach`：

```
 foreach (GridViewRow r in GridViewServer.Rows)
    {
        if (r.RowType == DataControlRowType.DataRow)
        {
            string architecture = ((AjaxControlToolkit.ComboBox)r.FindControl("ComboBox1")).Text;
        }
    } 
```

# ajax - 如何将 if 语句添加到 Ajax

> ID：13613084
> 
> 赞同：0
> 
> 时间：2012-11-28T19:40:11.763
> 
> 标签：ajax, forms, dom, select

我主要从事 PHP 编程，但由于我完全不了解 Javascript 或 Ajax，因此陷入了 Ajax 问题。我现在有一个组合选择菜单，如果第一个选择是='train'，我想隐藏第三个选择菜单（方向）。我读到有些浏览器不支持隐藏功能，因此下一个最佳选择是在选择第二个选项时禁用第三个选择菜单，假设第一个是火车。如果是总线，则仍应显示第三个选择菜单。这是我现在的javascript，我相信你可以想象它不起作用。

```
 $(document).ready(function(){
            if ($("select#agency").attr('value') == 'cta-train') {
        $("select#direction").attr("disabled","disabled");
    }

        $("select#route").attr("disabled","disabled");
        $("select#agency").change(function(){
        $("select#route").attr("disabled","disabled");
        $("select#route").html("<option>wait...</option>");
        var id = $("select#agency option:selected").attr('value');
        $.post("select_route.php", {id:id}, function(data){
            $("select#route").removeAttr("disabled");
            $("select#route").html(data);
        });
    });
});

    $(document).ready(function(){
            if ($("select#agency").attr('value') == 'cta-train') {
        $("select#direction").attr("disabled","disabled");
    }
    else {
        $("select#direction").attr("disabled","disabled");
        $("select#route").change(function(){
        $("select#direction").attr("disabled","disabled");
        $("select#direction").html("<option>wait...</option>");
        var id = $("select#route option:selected").attr('value');
        $.post("select_direction.php", {id:id}, function(data){
            $("select#direction").removeAttr("disabled");
            $("select#direction").html(data);
        });
    });
    }
}); 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:05:30.370

好像你不想要ajax，如果另一个选择中有某个元素，你想使用javascript隐藏一个选择。然后根据需要使用您的 ajax 归档选择。这是[http://jsfiddle.net/2FQwQ/的一个例子](http://jsfiddle.net/2FQwQ/)

```
<select id='direction'>
    <option value='train'>train</option>
    <option value='car'>car</option>
    <option value='pogo stick'>pogo stick</option>
<select>

<select id='agency'>
    <option value='1'>1</option>
    <option value='2'>2</option>
    <option value='3'>3</option>
<select>

<select id='route'>
    <option value='1'>1</option>
    <option value='2'>2</option>
    <option value='3'>3</option>
<select> 
```

脚本

```
//SEts your html up to hide the secelt if train
function amITrain() { 
    if ($('#direction').val() === "train"){
        $('#route').hide();
        $('#route').attr('disabled');
     }else{
         $('#route').show();
         $('#route').removeAttr('disabled');
     }        
 }
 $('#direction').change(amITrain);

 //When you get the ajax back, you would fill the select like this, then call the function
 $('#direction').html("<option value='train'>train</option><option value='car'>car</option>     <option value='pogo stick'>pogo stick</option>");
 amITrain(); 
```

# c# - 删除特定的 EntityFramework 迁移

> ID：13613087
> 
> 赞同：2
> 
> 时间：2012-11-28T19:40:22.497
> 
> 标签：c#, entity-framework, entity-framework-migrations

有没有办法使用实体框架迁移删除项目迁移历史中的自动迁移？这是一个基于代码的 EF 项目，它混合了显式和自动更新。有一个自动更新会删除目录，但不是必需的。我希望能够将其删除。

由于某种原因，它运行的数据库没有 __MigrationHistory 表。（至少我没有在数据库的表列表或数据库中的系统表列表中看到它。不确定是否必须在 SSMS 中启用以某种方式查看它们）。

请提供您的任何建议。只要我可以维护所有应用程序的数据，我愿意接受任何解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T18:09:22.113

我希望现在还不算晚。

__MigrationHistory 表是在目标数据库的系统表部分中制作的（与基本模式数据库相同）

# sql - SQL 获取每个项目的总数

> ID：13613088
> 
> 赞同：1
> 
> 时间：2012-11-28T19:40:25.210
> 
> 标签：sql, database

请多多包涵，因为我的 SQL 知识很少。

基本上，我希望能够从一个包含不同位置数据的表中生成一个总计列表。在表中，每一行都引用了位置的 ID 并具有一个值：

```
ID      LocationID          Value
___    ____________        _______
 1          11               500
 2          11               400
 3          12               500
 4          12               600
 5          12               300
 6          13               400
 7          13               500 
```

我想生成一个列表，其中包含每个 locationID 和“数据”表中所有值的总和。

期望的输出：

```
LocationID         Total
__________         _____
    11              900
    12              1400
    13              900 
```

如果我解释得不好，我很抱歉......就像我说的，我对 SQL 的了解非常有限，所以我根本不知道从哪里开始。如果有人能简单地指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T19:41:40.173

试试下面：

```
 SELECT LocationID, sum(value) AS Total
 FROM data
 GROUP BY LocationID; 
```

我假设`data`是您的表名，`LocationID`并且`value`是列名。

# extjs - 未捕获的类型错误：无法读取未定义的属性“responseText”

> ID：13613090
> 
> 赞同：0
> 
> 时间：2012-11-28T19:40:32.110
> 
> 标签：extjs, extjs4

```
buttons: [
    {
        text: "Add User",
        id: "new-record-add-button",
        handler: function() {
            var form = this.up('form').getForm();
            form.submit({
                url: BasePath+'/main/admin/adduser',
                method: 'POST',
                waitTitle: 'Authenticating',
                waitMsg: 'Please Wait',
                success: function(form, action) {
                win.close()
                     Ext.Msg.show({
                         title:'Success'
                        ,msg:'User added successfully'
                        ,modal:true
                        ,icon:Ext.Msg.INFO
                        ,buttons:Ext.Msg.OK
                });
                },

            failure: function(form, action) {

                console.log(action.response.responseText);
                obj = Ext.JSON.decode(action.response.responseText);
                console.log(obj);
                Ext.Msg.alert('Error',obj.errors)
                form.reset();
            }
        })

                //this.up("window").close();
        }

    },
    {
        text: "Cancel",
        handler: function() {
            this.up("window").close();
        }
    }
] 
```

当我到达表单中的故障功能时，我收到以下错误：

```
Uncaught TypeError: Cannot read property 'responseText' of undefined 
```

这是我的 php 代码：

```
public function adduserAction()
{
            $response = new JsonModel();
            //$error = array();
            $errors="";
            if(!ctype_alpha($_POST["first_name"])) {
                $errors.="First Name cannot contain characters and numbers";
            }
            if(!ctype_alpha($_POST["last_name"])) {
                $errors.="Last Name cannot contain characters and numbers";
            }

            if(!filter_var($_POST['email_address'], FILTER_VALIDATE_EMAIL)) {
                $errors.="Email should be of the format john.doe@example.com";
            }
            if(empty($_POST["role"])) {
                $errors.="Role cannot be empty";
            }
            if($errors!="") {
                $response->setVariables(array("success"=>false, "errors"=>$errors));

            }
            else {
                $response->setVariables(array("success"=>true, "errors"=>$errors));

            }
            return $response;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:31:26.800

`responseText``echo`是一个 ExtJs 的东西 - 它表示在被解码之前从服务器返回的实际文本（例如，使用）。

您应该在`operation`or`request`对象中的异步回调中获取它，除非存在某种服务器异常或者如果您设置`success`为`false`，这就是您没有在失败处理程序中获取它的原因。

要真正了解它发生了什么，我建议您查看[Connection.js](http://docs.sencha.com/ext-js/4-1/source/Connection.html#Ext-data-Connection)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T09:41:29.417

如果您通过 ExtJs 提交表单，那么在表单提交成功时，需要将 response.responseText 设置为 {"sucess":"true"}。如果您将表单提交到某个页面，则必须确保您将从后端返回此对象。否则，您必须覆盖现有的 onSuccess 方法。

第二种方式是这样的，

```
Ext.override(Ext.form.action.Submit,{

    onSuccess：函数（响应）{
        var form = this.form,
            成功=真，
            结果=响应；
            response.responseText = '{"成功": true}';
            form.afterAction(this, success);
        }
    });

```

将此代码段放在您的应用程序中，看看它的神奇之处。干杯。:)

# kendo-ui - 刷新单个剑道网格行

> ID：13613098
> 
> 赞同：41
> 
> 时间：2012-11-28T19:40:55.120
> 
> 标签：kendo-ui, kendo-grid

有没有办法在不刷新整个数据源或使用 jQuery 为每个单元格设置值的情况下刷新单个 Kendo 网格行？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-11-29T00:42:28.987

您如何定义要更新的行？我将假设这是您选择的行，并且正在更新的列的名称是`symbol`.

```
// Get a reference to the grid
var grid = $("#my_grid").data("kendoGrid");

// Access the row that is selected
var select = grid.select();
// and now the data
var data = grid.dataItem(select);
// update the column `symbol` and set its value to `HPQ`
data.set("symbol", "HPQ"); 
```

请记住， 的内容`DataSource`是一个`observable`对象，这意味着您可以使用它来更新它`set`，并且更改应该*神奇地*反映在`grid`.

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-05-30T16:14:57.370

`data.set`在某些情况下，实际上会刷新整个网格并发送`databound`事件。这是非常缓慢且不必要的。它还将折叠任何不理想的扩展详细信息模板。

我建议您使用我编写的这个函数来更新剑道网格中的单行。

```
// Updates a single row in a kendo grid without firing a databound event.
// This is needed since otherwise the entire grid will be redrawn.
function kendoFastRedrawRow(grid, row) {
    var dataItem = grid.dataItem(row);

    var rowChildren = $(row).children('td[role="gridcell"]');

    for (var i = 0; i < grid.columns.length; i++) {

        var column = grid.columns[i];
        var template = column.template;
        var cell = rowChildren.eq(i);

        if (template !== undefined) {
            var kendoTemplate = kendo.template(template);

            // Render using template
            cell.html(kendoTemplate(dataItem));
        } else {
            var fieldValue = dataItem[column.field];

            var format = column.format;
            var values = column.values;

            if (values !== undefined && values != null) {
                // use the text value mappings (for enums)
                for (var j = 0; j < values.length; j++) {
                    var value = values[j];
                    if (value.value == fieldValue) {
                        cell.html(value.text);
                        break;
                    }
                }
            } else if (format !== undefined) {
                // use the format
                cell.html(kendo.format(format, fieldValue));
            } else {
                // Just dump the plain old value
                cell.html(fieldValue);
            }
        }
    }
} 
```

例子：

```
// Get a reference to the grid
var grid = $("#my_grid").data("kendoGrid");

// Access the row that is selected
var select = grid.select();
// and now the data
var data = grid.dataItem(select);

// Update any values that you want to
data.symbol = newValue;
data.symbol2 = newValue2;
...

// Redraw only the single row in question which needs updating
kendoFastRedrawRow(grid, select);

// Then if you want to call your own databound event to do any funky post processing:
myDataBoundEvent.apply(grid); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-01-29T11:50:28.043

我找到了一种更新网格数据源并在网格中显示而不刷新所有网格的方法。例如，您有一个选定的行，并且您想更改列“名称”的值。

```
//the grid
var grid = $('#myGrid').data('kendoGrid');    
// Access the row that is selected
var row = grid.select();
//gets the dataItem
var dataItem = grid.dataItem(row);
//sets the dataItem   
dataItem.name = 'Joe';
//generate a new row html
var rowHtml = grid.rowTemplate(dataItem);
//replace your old row html with the updated one
row.replaceWith(rowHtml); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-02-05T19:42:38.283

```
updateRecord(record) {
    const grid = $(this.el.nativeElement).data('kendoGrid');
    const row = grid.select();
    const dataItem = grid.dataItem(row);
    for (const property in record) {
      if (record.hasOwnProperty(property)) {
        dataItem.set(property, record[property]);
      }
    }
  } 
```

# java - 有没有办法从java中的属性文件加载嵌套属性？

> ID：13613100
> 
> 赞同：0
> 
> 时间：2012-11-28T19:41:06.867
> 
> 标签：java, configuration-files

我正在寻找的场景是这样的。

```
//contents of props file

prop1
[prop1.1=val1
prop1.2=val2] 
prop2
[ prop2.1
         [prop2.1.1=val3
          prop2.1.2=val4
         ]
  prop2.2=val5
]
prop3=val6 
```

//结尾

加载此文件后，我应该能够像 obj.get(prop1.prop1.1)、obj.get(prop2.prop2.1.prop2.1.1)、obj.get(prop3) 一样访问它。这些应该分别返回 val1、val3 和 val5。

我想这对于 Properties 类是不可能的。

# c# - 如何在使用waithandle处理之前等待用户完成数据输入

> ID：13613103
> 
> 赞同：0
> 
> 时间：2012-11-28T19:41:25.243
> 
> 标签：c#, waithandle

我有允许用户输入数据的 UI，每次当用户输入数据时，我都会引发一个事件，说数据在这个位置发生了变化并将其放入队列中。我有一个后台线程，它使用***waitany***和***waithandle监听事件***. 每次数据更改时，我都会对队列中的所有项目强制执行操作。它工作正常。问题是当用户输入两个值时，会有两个更改事件。队列中有两个元素，但第一个事件首先获得并立即强制执行操作，当时队列中只有一个项目。下一个事件来了，它将处理队列中的下一个项目。99% 的时间进程处理队列中的一个事件，因为人工数据输入的速度很慢，事件处理的速度很快。只是想知道是否有办法，我可以在处理事件周围放置一些逻辑来等待然后处理？

等待句柄部分

```
switch(WaitHandle.WaitAny(myhandles))
{
   case event.ProcessEvent:
        ProcessEvents();
        break;
   ...
} 
```

在进程事件中

```
private void ProcessEvents()
{
  while(eventQueue.Count > 0)
  {
     //dequeue event
     //process the given event
  }
} 
```

# unix - 如何将 Windows 注册表值 InstallDate 批量转换为更标准和更有用的格式 MM/DD/YYYY

> ID：13613111
> 
> 赞同：1
> 
> 时间：2012-11-28T19:41:53.997
> 
> 标签：unix, time, batch-file, registry

直到最近，我们一直在使用`pstools`（特别是`psinfo.exe`）返回远程机器的操作系统安装日期。显然不再支持此功能。最新版本`psinfo.exe`不包括安装日期，并且`psinfo.exe`在我们的 Windows 7 机器上使用较旧的返回垃圾。因此，我批量使用远程注册表查询来返回`InstallDate`值。这可行，但此日期的值是 Unix 时间（自 1970 年 1 月 1 日以来的秒数）。我希望将其转换为`MM/DD/YYYY`. 这批量可行吗？

更多信息：可以在以下位置找到注册表项：`\\%RemoteComputerName%\HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T20:44:55.870

```
@Echo OFF

:: By Elektro H@cker

FOR /F "Tokens=2 delims==" %%# in ('WMIC OS GET InstallDate /format:list') DO (
    Call Set "Full_date=%%#"
    Call Set "Date=%%Full_date:~0,4%%/%%Full_date:~4,2%%/%%Full_date:~6,2%%"
    Call Set "Custom_Date=%%Full_date:~4,2%%/%%Full_date:~6,2%%/%%Full_date:~0,4%%"
)

Echo %Full_date%
Echo %Date%
echo %Custom_Date%

Pause&Exit 
```

**输出**：

```
20120731144607.000000+120
2012/07/31
07/31/2012
Presione una tecla para continuar . . . 
```

# jquery - jQuery Validator Plugin：验证 div 的内容

> ID：13613115
> 
> 赞同：0
> 
> 时间：2012-11-28T19:42:05.680
> 
> 标签：jquery, jquery-plugins, sharepoint-2010, jquery-validate, validation

在 SharePoint 2010 表单中，富文本字段不呈现为表单元素，而是呈现为 div。我需要使用 jQuery Validator Plugin 来检查这个 div 的内容。

```
<form>

  <!-- this will validate -->
  <select class="check_this">
    <option>Testing form element</option>
  </select>

  <!-- this will not validate -->
  <div class="check_this">
    Testing div
  </div>

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:31:55.533

问题是没有针对非表单元素进行测试，对吧？

我还没有测试过这种方法，但是为什么不渲染一个与 div 的 id 同名的空选择元素并添加一个抓取正确元素的方法：

HTML：

```
<form>
    <!-- this is a dummy element -->
    <select name="myElem">
        <option>Testing form element</option>
    </select>

    <!-- this is my actual element -->
    <div id="myElem">
        Testing div
    </div>
</form> 
```

JS：

```
jQuery.validator.addMethod("myForm", function(value, element) { 
    var strId = $(element).attr('name');
    var myActualElement = $('form').find('#' + strId);
    var myActualContent = myActualElement.text();

    return this.optional(element) || /regexwhateveryouwant/.test(myActualContent); 
}, "Custom error message"); 
```

如果您无法呈现虚拟选择元素，则需要使用 jQuery 创建它。

# twitter-bootstrap - 用于手机浏览器的 Twitter Bootstrap 菜单和手风琴

> ID：13613116
> 
> 赞同：1
> 
> 时间：2012-11-28T19:42:14.747
> 
> 标签：twitter-bootstrap

这可能是一个愚蠢的问题。是否可以在 twitter bootstrap 中规定水平下拉菜单显示为垂直手风琴。我可以看到我可以隐藏和显示元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:57:30.610

当然，如果它是一个菜单/列表/任何东西都没有关系：查看“手风琴组”或在 Docs [Collapse](http://twitter.github.com/bootstrap/javascript.html#collapse)中调用它。

# c# - 将二进制图像从数据库保存到文件夹时出错

> ID：13613120
> 
> 赞同：0
> 
> 时间：2012-11-28T19:42:32.140
> 
> 标签：c#, sql-server, image, save, netezza

我需要从数据库中检索图像并将其保存到磁盘。在数据库中，图像以二进制格式存储，但列的数据类型为`varchar(5000)`.

这是我用于检索图像并将其保存到磁盘的代码

```
public void CreateImageDataUsingDataReader_ForNetezzaDB()
{
        string strDbConn = string.Empty;
        string strImageFileName = string.Empty;
        string strImageData = string.Empty;
        string strImgSavePath = string.Empty;
        string strQuery = string.Empty;

        Byte[] byteImageData;
        MemoryStream stmImageData = new MemoryStream();
        Image saveImage;

        try
        {
            //---open the database connection
            strDbConn = ConfigurationSettings.AppSettings["NetezzaDBConnection"].ToString().Trim();
            OleDbConnection dbcon = new OleDbConnection(strDbConn);
            dbcon.Open();
            strQuery = "select name,signature_vod__c from sfb_call2_vod where signature_vod__c is not null  limit 10";
            OleDbCommand cmdSelect = new OleDbCommand(strQuery, dbcon);
            OleDbDataReader imageReader = cmdSelect.ExecuteReader();

            if (imageReader.HasRows)
            {
                while (imageReader.Read())
                {
                    strImageFileName = imageReader["name"].ToString().Trim();
                    strImageData = imageReader["signature_vod__c"].ToString().Trim();

                    stmImageData.Seek(0, SeekOrigin.Begin);
                    //converting string to byte array
                    byteImageData = Convert.FromBase64String(strImageData);
                    //---create Memory stremm from the Image Byte data                        
                    stmImageData.Write(byteImageData, 0, byteImageData.Length);
                    //--saving the image
                    //saveImage = Image.FromStream(stmImageData);
                    using (saveImage = Image.FromStream(stmImageData))
                    {
                        strImgSavePath = ConfigurationSettings.AppSettings["ImageSavePath"].ToString().Trim();
                        saveImage.Save(strImgSavePath + strImageFileName + ".png", System.Drawing.Imaging.ImageFormat.Png);   ///---error comes in this line                           
                    }
                }
            }
            imageReader.Close();
            dbcon.Close();
            stmImageData.Close();
            stmImageData = null;
        }
        catch (Exception ex)
        {
            throw new Exception("Error Occured in method CreateImageDataUsingDataReader " + ex.Message);
        }
} 
```

但我不断收到错误消息：

> *GDI+ 中出现一般错误。*

如果我为 SQL Server 数据库执行相同的代码，它可以正常工作，但问题只出现在 Netezza 数据库中

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:54:00.247

您提到您将二进制图像存储在 varchar 列中。这一点以及它在其他数据库技术上工作的事实使得您在 Netazza 案例中读取不同的数据是很讨厌的。

我建议设置一个测试项目，在其中将相同的图像保存到 2 个不同的数据库（netazza 和 mssql），从两者中读取它，然后对 db 结果之间或原始结果与从 db 读取的结果进行按位比较。

如果您得到相同的结果，我会感到惊讶，如果我是对的，您应该考虑使用二进制数据类型将图像数据持久保存在您的数据库后端。

# xpath - 我不能用 xpath 返回参数值

> ID：13613122
> 
> 赞同：0
> 
> 时间：2012-11-28T19:42:33.227
> 
> 标签：xpath

我想用 xpath 返回一个对象内的参数值。

示例代码：

```
 <object id="player" width="100%" height="100%" type="application/x-shockwave-flash" data="http://merhad.333low.com/player.swf" bgcolor="#000000" name="player" tabindex="0">
    <param name="allowfullscreen" value="true">
    <param name="allowscriptaccess" value="always">
    <param name="seamlesstabbing" value="true">
    <param name="wmode" value="opaque">
    <param name="flashvars" value="http://merhad.333low.com/fqoyJxxS-2c2MSx-wGYmS3T1pkggIeiK7wpA7BbXXcK2sC4XYWehpBDV6CAK7CFH/s=awcmxqt5gYntLqHJ9ceP.flv">
  </object> 
```

我试过这个，但没有结果！示例代码：

```
 echo $xpath2->query("//object[id='player']/param/@value")->item(0)->nodeValue; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:45:44.437

您应该将 ID 作为属性进行匹配：

```
echo $xpath2->query("//object[@id='player']/param/@value")->item(0)->nodeValue; 
```

顺便说一句，这将只返回第一个“参数”节点值

# c# - 只读字段初始化顺序

> ID：13613124
> 
> 赞同：0
> 
> 时间：2012-11-28T19:42:38.817
> 
> 标签：c#

我发现了一个类似于以下的类：

```
class Controller
{
    private readonly IDataContext _myContext = new DataContext("connectionstring");

    public Controller(IDataContext context){
        _myContext = context;
    }
} 
```

给定的实例创建如下：

```
var controller = new Controller(new DataContext("anotherconnectionstring")); 
```

我想知道的是分配给 _myContext 字段的最终实例是哪个？作为参数传递的那个还是在声明中用作 RHS 的那个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:45:55.907

在类定义中显式初始化的所有字段都被移动到默认的类/类型构造函数中，该构造函数将在任何其他显式定义的参数化构造函数之前调用。所以最终值将是您在自定义构造函数中传递的值。

[MSDN，字段（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173118.aspx)

> 在调用对象实例的构造函数之前立即初始化字段。如果构造函数分配一个字段的值，它将覆盖在字段声明期间给出的任何值。

# asp.net - Asp.Net 代码无法在服务器上运行，错误：ORA-01405: fetched column value is NULL

> ID：13613127
> 
> 赞同：0
> 
> 时间：2012-11-28T19:42:56.337
> 
> 标签：asp.net, datagrid, system.data.oracleclient

我们有一个选择查询来构建数据集并绑定到数据网格。该代码在我的本地计算机上运行良好，在开发测试服务器上也运行良好。但是在我们部署到用户验收测试服务器后，我们得到了标题错误。

我提取了查询并在 sql developer 中运行它，指向用户验收测试数据库，也没有错误。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:32:09.490

Its possible that one or more of the columns in your resultset is null. Try using NVL on your columns to substitute a null-valued column with a 'default' value.

```
select NVL(supplier_city, 'n/a') 
from suppliers; 
```

This will return 'n/a' if supplier_city is null

[http://www.techonthenet.com/oracle/functions/nvl.php](http://www.techonthenet.com/oracle/functions/nvl.php)

# php - 使用 preg_match 检查带有“通配符”的 URL

> ID：13613130
> 
> 赞同：1
> 
> 时间：2012-11-28T19:43:06.303
> 
> 标签：php, preg-match

所以我想检查一个字符串是否采用以下格式：

*结帐/00/付款*

其中 00 可以是任意数字。

我尝试使用 preg_match 来执行此操作，但没有成功：

```
if(preg_match('/checkout/ [0-9] /payment/', $url, $matches)){
         echo 'hello';  
} 
```

此外，如果字符串在“付款”一词之后有任何字符，我希望它失败，例如 checkout/00/payment/more

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T19:45:30.437

下面的正则表达式现在符合您的预期。请注意，我用括号括住了数字。这将捕获 $matches 中的数字，以便您以后使用它。

```
<?php
header('Content-Type: text/plain');

foreach(array(0,5,10,99) as $i)
{
    $num = str_pad($i, 2, '0', STR_PAD_LEFT);
    $url = 'checkout/'.$num.'/payment';

    if(preg_match('/checkout\/([0-9]+)\/payment/i', $url, $matches))
    {
        echo 'url: "'.$url."\"\n";
        echo 'hello: '.$matches[1]."\n";
        print_r($matches);
    }

    echo "\n\n";
}
?> 
```

此代码产生以下输出：

```
url: "checkout/00/payment"
hello: 00
Array
(
    [0] => checkout/00/payment
    [1] => 00
)

url: "checkout/05/payment"
hello: 05
Array
(
    [0] => checkout/05/payment
    [1] => 05
)

url: "checkout/10/payment"
hello: 10
Array
(
    [0] => checkout/10/payment
    [1] => 10
)

url: "checkout/99/payment"
hello: 99
Array
(
    [0] => checkout/99/payment
    [1] => 99
) 
```

[preg_match 手册页](http://php.net/manual/en/function.preg-match.php)

[preg_match_all 手册页](http://www.php.net/manual/en/function.preg-match-all.php)

[PCRE 正则表达式语法手册页](http://www.php.net/manual/en/reference.pcre.pattern.syntax.php)

[正则表达式模式中可能的修饰符](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T19:45:53.830

`[0-9]`只匹配一个数字。如果要精确匹配两位数字，请附加`{2}`: `[0-9]{2}`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T19:45:52.800

您的正则表达式中有额外的空格，并且`[0-9]`只会匹配一位数字。

此外，如果您以 开始和结束您的正则表达式`/`，则不能`/`在其中使用，除非您使用反斜杠 ( `\/`) 对其进行转义。

我已经使用`~`了这个。

```
if(preg_match('~checkout/([0-9]+)/payment$~', $url, $matches)) {
    echo 'Matched! (' . $matches[1] . ')';
} 
```

这将匹配一个或多个数字。

演示：[codepad.viper-7.com/qoKI5G](http://codepad.viper-7.com/qoKI5G)

# asp.net - 在 Vb 2010 中创建控件数组，其中表列名不读取行

> ID：13613132
> 
> 赞同：1
> 
> 时间：2012-11-28T19:43:26.853
> 
> 标签：asp.net, sql, vb.net, sqldatareader, visual-web-developer-2010

我在**创建控制数组**和**获取表的列名**时遇到问题，我知道**我的字符串可以正常工作**，因为我直接将输出的字符串用作 SQL 查询，**问题**在于它似乎找不到**任何****行**表（我知道是他们的，使用**If lrd.HasRows** Then 我已经看到它没有找到任何行**（lrd.HasRows = False）**。它们是INFORMATION_SCHEMA.COLUMNS**的不同****连接字符串**吗？

 **'查找列名

```
Public Sub findSQLColumnName(ByRef i As Integer, ByRef OutputValue As String, ByVal tableName As String)
    Dim con As New SqlConnection
    Dim cmd As New SqlCommand
    Dim lrd As SqlDataReader

    Dim TableNameParm As New SqlParameter("Tablename", tableName) 'adds in the new paramenter UserName
    TableNameParm.Direction = ParameterDirection.Output
    Dim LocationParm As New SqlParameter("Location", i) 'adds in the new paramenter UserName
    LocationParm.Direction = ParameterDirection.Input

    Call FindConnectionString(con) ' finds connection string

    cmd.Parameters.Add(TableNameParm)
    cmd.Parameters.Add(LocationParm)

    Call SQLSELECT_WHERE("INFORMATION_SCHEMA.COLUMNS", "COLUMN_NAME AS Output, ORDINAL_POSITION", True, " (TABLE_NAME = @Tablename) AND (ORDINAL_POSITION = @Location)", con, cmd, lrd)

    Try
        ' While lrd.Read()    ' code writen within here for what is to be done with selected data.
        'Call findSQLColumnValue("Output", lrd, OutputValue)
        'End While

        If lrd.HasRows Then
            lrd.Read()
            Call findSQLColumnValue("Output", lrd, OutputValue)
            lrd.Close()
            'Close connection before Redirecting.
        Else
            lrd.Close()

        End If

        '    Catch ex As Exception
    Finally
        con.Close()
    End Try

End Sub 
```

'查找列的值

```
Public Sub findSQLColumnValue(ByRef ColumnName As String, loader As SqlDataReader, ByRef OutputValue As String)
    OutputValue = (Convert.ToString(loader(ColumnName))).Trim
End Sub 
```

'按钮单击（创建控件数组）

```
Protected Sub Button2_Click(sender As Object, e As EventArgs) Handles Button2.Click
    Dim SQLCode As New SQLCode
    Dim TableLength As Integer
    Dim lblText(100) As String
    Call SQLCode.SQLFindNoColumns("PatientClinicalinformation", TableLength, lblTitlePatient, lblText)
    For i As Int16 = 1 To TableLength
        ' Create the label control and set its text attribute
        Dim Label2 As New Label
        Call SQLCode.findSQLColumnName(i.ToString, lblText(i), "PatientClinicalinformation")
        Label2.Text = lblText(i)

        Dim Literal2 As New Literal
        Literal2.Text = "<br />"

        ' Add the control to the placeholder
        PlaceHolder1.Controls.Add(Label2)
        Label2.ID = "lbl" & i
        PlaceHolder1.Controls.Add(Literal2)
    Next

End Sub 
```

'选择地点

```
 Public Sub SQLSELECT_WHERE(ByVal Tables As String, ByVal Columns As String, ByVal WHERE As Boolean, ByVal WHEREStatement As String, ByRef connection As SqlConnection, ByRef command As SqlCommand, ByRef loader As SqlDataReader)
    connection.Open()
    command.Connection = connection
    If WHERE = False Then
        command.CommandText = " SELECT " & Columns & " FROM " & Tables
    End If
    If WHERE = True Then
        command.CommandText = " SELECT " & Columns & " FROM " & Tables & " WHERE " & WHEREStatement
    End If
    command.CommandText = command.CommandText
    loader = command.ExecuteReader()
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:59:22.660

我找到了解决方案！代码一切正常，数组 TableNameParm 有问题

```
 Dim TableNameParm As New SqlParameter("Tablename", tableName) 'adds in the new paramenter UserName
    TableNameParm.Direction = ParameterDirection.Output
    Dim LocationParm As New SqlParameter("Location", i) 'adds in the new paramenter UserName
    LocationParm.Direction = ParameterDirection.Input 
```

TableNameParm.Direction 应该是输入，但设置为输出

```
 Dim TableNameParm As New SqlParameter("Tablename", tableName) 'adds in the new paramenter UserName
    TableNameParm.Direction = ParameterDirection.Input
    Dim LocationParm As New SqlParameter("Location", i) 'adds in the new paramenter UserName
    LocationParm.Direction = ParameterDirection.Input 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T21:39:31.740

不知道函数 SQLSELECT_WHERE 很难说，但有可能一个或多个参数不正确。尝试跳过该功能并使用

`cmd = New SqlCommand("SELECT ... WHERE", conn)`

您还可以通过在查询中使用 count(*) 来测试行数。**

# javascript - Javascript继承-“this”关键字失去绑定？

> ID：13613135
> 
> 赞同：2
> 
> 时间：2012-11-28T19:43:35.137
> 
> 标签：javascript, inheritance, prototype, this

我正在尝试在 Javascript 中学习更高级的继承方法，但无法弄清楚为什么我的继承对象在下面的 Eloquent Javascript 示例代码中失去了它的“this”关键字绑定。

例如，我尝试使用以下方法调用 take() 函数：

```
lantern.take(); // alerts you can not lift
Item.take.call(lantern, "the brass lantern"); // alerts you can not lift
lantern.take.call(this, "the brass lantern"); // alerts you can not lift 
```

但是，这些都没有将 this.name 绑定到 lantern 吗？我在调用对象原型中定义的方法的方法中遗漏/不理解什么？谢谢你。

```
function forEachIn(object, action) {
  for (var property in object) {
    if (object.hasOwnProperty(property))
      action(property, object[property]);
  }
}

function clone(object) {
  function OneShotConstructor(){}
  OneShotConstructor.prototype = object;
  return new OneShotConstructor();
}

Object.prototype.create = function() {
  var object = clone(this);
  if (typeof object.construct == "function")
    object.construct.apply(object, arguments);
  return object;
};

Object.prototype.extend = function(properties) {
  var result = clone(this);
  forEachIn(properties, function(name, value) {
    result[name] = value;
  });
  return result;
};

var Item = {
  construct: function(name) {
    this.name = name;
  },
  inspect: function() {
    alert("it is ", this.name, ".");
  },
  kick: function() {
    alert("klunk!");
  },
  take: function() {
    alert("you can not lift ", this.name, ".");
  }
};

var lantern = Item.create("the brass lantern");
lantern.kick(); // alerts klunk 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T19:47:41.293

与`console.log`,不同，[`alert`](https://developer.mozilla.org/en-US/docs/DOM/window.alert)只接受一个参数。您需要连接字符串：

```
alert("you can not lift " + this.name + "."); 
```

这样，`lantern.take();`和`Item.take.call(lantern);`- 两者都是等效的 - 将警告“你不能举起黄铜灯笼。”，而你的第三个例子取决于当前执行中[`this`关键字的值。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)顺便说一句，您的`take`函数不带参数。

# java - 查找 Jtree 图标的位置

> ID：13613136
> 
> 赞同：2
> 
> 时间：2012-11-28T19:43:35.917
> 
> 标签：java, swing, jtree

这是我的问题。我希望在用户单击图标和仅 jtree 树节点的图标时触发弹出对话框。我做了一些研究，没有找到在图标上添加鼠标侦听器的任何现有方法（如果有，请告诉我！）。因此，我决定破解它并使用我可以从 mouseevent.getPoint() 中获取的 Point 对象来确定鼠标是否在图标上。但是，当我调用 Jtree.getCellRenct(row, col, includespacing) 时，我得到的位置似乎与子节点的缩进有关。例如，

家长

-儿童1

-儿童2

我通过在所有三个节点上调用 getCellRect() 来获得相同的 x 坐标，尽管我真正想要的是 x 加上由“-”引起的缩进，因为 mouseevent.getpoint() 与缩进无关。

知道我该怎么做吗？

**编辑：**

我想出了一个办法。我调用 tree.getUI 来获取 BasicTreeUI 对象并调用 BasicTreeUI.getLeftChildIndent() 和 BasicTreeUI.getRightChildIndent()。将这两个整数相加将是树的每个级别的总缩进（或者似乎到目前为止）。所以我计算缩进

```
(path.getPathCount() - 1) * (leftindent + rightindent). 
```

到目前为止它对我有用，尽管我不完全确定这是否好。例如，我真的不知道左右缩进是什么意思。同样在 BasicTreeUI 的源代码中，它实际上有一个受保护的方法

```
protected int getRowX(int row, int depth) 
{
    return totalChildIndent * (depth + depthOffset);
} 
```

这个方法似乎被另一个受保护的方法调用，用于检查一个位置是否在树扩展或折叠图标的区域内。我无法弄清楚 depthOffset 的用途。我想这与是否显示根目录或类似性质的东西有关。

但我仍然觉得这样做不太舒服..有人可以告诉我我很好还是有更好的方法来做到这一点？:-)

# forms - 使用 acDialog 打开时的增长形式

> ID：13613137
> 
> 赞同：4
> 
> 时间：2012-11-28T19:43:37.027
> 
> 标签：forms, ms-access, dialog

我使用该命令打开一个表单：

DoCmd.OpenForm "frmGraphData", acFormDS, , , , acDialog, "A" & Me.OpenArgs

当我创建表单时，我将它保存为我想要的大小。但是每次我打开它时表格都会变大。过了一会儿，表格的底部就在屏幕下方！！

它不是模态的，也不是独立的窗口

我想强制表单保持其原始大小。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:10:10.160

处理这个问题的最简单（*可能是*最简单）的方法是在打开事件上设置表单宽度。 [这](http://www.dbforums.com/microsoft-access/1624335-i-need-open-form-specific-size.html)可以解决问题，但可能会给你背后的开发者带来愤怒管理问题。

```
 Private Sub Form_Open(Cancel As Integer)
        DoCmd.MoveSize , , 6000, 6000
    End Sub 
```

# c++ - 无法确定打印后代码停止的原因 113383

> ID：13613142
> 
> 赞同：0
> 
> 时间：2012-11-28T19:44:00.723
> 
> 标签：c++

我正在尝试编写编程挑战书籍中的第一个问题。该代码计算从 a 到 b 生成的数字的数量。
如果 n 为偶数，则新的 n 为 n/2，如果为奇数，则为 3*n+1
例如，对于 22，它将计算数字 22 11 34 17 52 26 13 40 20 10 5 16 8 4 2 1 等等数字是 16。打印 113383 后代码停止，我输入为
1 1000000

```
#include <iostream>
#include <map>
#include <vector>

using std::cout;
using std::cin;
using std::string;
using std::endl;

using std::vector;
using std::map;
map<long,long> solution;

long sequences(long n) {
// returns the number of numbers(including 1) `n`produces till it becomes 1
    if(n==1)
        return 1;
    else{
        // assuming n>1

        if(solution.find(n)!=solution.end())
            return solution.find(n)->second;
        long size = 0;
        while(n!=1){
            if(n%2==0){
                n = n/2;
                if(solution.find(n)!=solution.end())
                    return solution.find(n)->second + size;

            }
            else{
                n = 3*n+1;
            }
            size++;
        }
        return size+1;
    }
}
long sequences(long a,long b){
    // returns the maximum numbers produced by numbers from a to b inclusive
    long result,max = -1;
    if(a<b){
        for(long i=a;i<=b;i=i+1){
            if(solution.find(i) == solution.end()){
                cout<< i << endl;
                result = sequences(i);
                solution.insert(map<long,long>::value_type(i,result));

            }
            else{
                //i present in solution
                result = solution.find(i)->second;
            }
            if(result>max)
                max = result;
        }
        return max;
    }
    return -1;
}

int main(int argc, char* argv[]) {

    long a,b,max;

    cin >> a >> b;
//  while(cin>>a>>b){
        cout<<a<<" "<<b<<" "<<sequences(a,b)<<endl;
    /*}*/

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T20:49:22.543

你可能有一个溢出错误。对于 113383 以下的所有数字，有符号的 long 足以计算冰雹序列而不会溢出。但是对于 113383 的起始值，在冰雹序列期间达到的最大值是 2482111348。这有点太大而不能保存在有符号长整数中，其最小上限为 (2^31)-1。

# jquery - 用jquery检测访问过的链接

> ID：13613148
> 
> 赞同：0
> 
> 时间：2012-11-28T19:44:25.670
> 
> 标签：jquery

我的css文件有这个

```
a:visited
{
color:red;
} 
```

我的html页面有这个

```
<body>
<a href="http://www.w3schools.com">W3Sschools</a>
<div></div>
<a href="http://www.google.com">Google</a>
<div></div>
<a href="http://www.wikipedia.org">Wikipedia</a>
<div></div>
<script>
if($("a:visited").length){
$("a").next().html("this link is visited");
}
</script>
</body> 
```

但它不起作用..所以我在脚本区域尝试了另一种选择

```
<script>
if($("a").css("color","red")){
$("a").next().html("this link is visited");
}
</script> 
```

即使没有访问它们，它也会将我的所有链接都变成红色，这有什么问题！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T19:48:30.047

这是现代浏览器已修复的安全漏洞。可以在隐藏的 div 中吐出大量链接列表并确定用户是否访问了它们。

因此，如果您只检查足够多的链接，您实际上可以嗅探用户历史记录。既不检查`:visited`也不使用颜色检查。在不依赖`:visited`.

# iphone - 旋转 CCSprite 的 CGRect 属性？

> ID：13613150
> 
> 赞同：0
> 
> 时间：2012-11-28T19:44:28.883
> 
> 标签：iphone, objective-c, cocos2d-iphone, cgrect

我有一个 CCSprite 的子类，它在整个游戏中旋转，并且有一个盾牌必须根据精灵的旋转围绕精灵旋转。因此，如果精灵的旋转为 75 度，则应该有一个 CGRect 位于 75 度。CGRect 的尺寸是从属的，因为它几乎类似于正方形。

我所做的是：

*   我将 CCSprite 子类化并添加了一个名为 shieldArea 的属性。
*   初始化后，我将此矩形设置为

    ```
    self.shieldArea = CGRectMake(self.position.x-30, self.position.y, 8, 10); 
    ```

*   然后我旋转精灵本身，但是，矩形保持在其初始位置。

我希望 CGrect 会受到旋转的影响，但我有点期望它不会影响它，当然，为什么会呢？所以，我的问题是，我该如何旋转 CGRect 呢？还是我必须一直添加一个新的 CGRect ？

旁注：我不想使用 Box2d 或类似的东西。我自己处理碰撞检测。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:25:15.767

你试过[`CGAffineTransform`](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGAffineTransform/Reference/reference.html#//apple_ref/doc/uid/TP30000946)吗？

像这样的东西：

```
float centerX = myOldRect.origin.x + (myOldRect.size.width / 2.0);
float centerY = myOldRect.origin.y + (myOldRect.size.height / 2.0);

CGAffineTransform rotation = CGAffineTransformMakeRotation(someAngleInRadians);
CGAffineTransform moveAnchor = CGAffineTransformMakeTranslation(centerX, centerY);

CGAffineTransform centeredRotation = CGAffineTransformConcat(moveAnchor, rotation);

CGRect rotatedRect = CGRectApplyAffineTransform(myOldRect, centeredRotation); 
```

请注意，这未经测试。使用风险自负：p

# c - 查找和计算大写和小写字符

> ID：13613155
> 
> 赞同：3
> 
> 时间：2012-11-28T19:44:42.590
> 
> 标签：c, arrays, unix, character-encoding

我用 C 语言编写了一个在 UNIX 上运行的程序，它计算输入文本文件中每个字母的数量。对于这样的文件：

“猫坐在绿色垫子上”

输出将是这样的：

```
 The letter ’a’ occurs 3 times.
   The letter ’c’ occurs 1 times.
   The letter ’e’ occurs 4 times.
   The letter ’g’ occurs 1 times.
   The letter ’h’ occurs 2 times.
   The letter ’m’ occurs 1 times.
   The letter ’n’ occurs 2 times.
   The letter ’o’ occurs 1 times.
   The letter ’r’ occurs 1 times.
   The letter ’s’ occurs 1 times.
   The letter ’t’ occurs 5 times.

  5                    *
  4     *              *
  4     *              *
  3 *   *              *
  3 *   *              *
  2 *   *  *     *     *
  2 *   *  *     *     *
  1 * * * **    ***  ***
  1 * * * **    ***  ***
  0 **************************
  0 **************************
... abcdefghijklmnopqrstuvwxyz 
```

其中图表表示字母出现的次数。（如果超过 10，我只需在第 10 行后加一个“+”）。我目前为实现此目的而编写的代码如下：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>

void drawGraph(int letters[26], char alpha[26]);
void printLetters(int letters[26], char alpha[26]);
void getLetters(FILE *fp, int letters[26], char alpha[26]);

int main(int argc, char *argv[]) {
  FILE *fp;
  int letters[26] = { 0 };
  char alpha[26] = { 'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z' };
  int indexedAlpha[256] = { 0 };
  int j = 1;

  for (i = 97; i <= 127; i++)
    {
      indexedAlpha[i] = j;
      j++;
    }

  //open file
  if ((fp = fopen(argv[1], "r")) == NULL)
    {
      perror("Cannot open file");
      exit(EXIT_FAILURE);
    }

  getLetters(fp, letters, alpha);
  printLetters(letters, alpha);
  printf("\n");
  drawGraph(letters, alpha);
  printf("\n");

  return EXIT_SUCCESS;
}

void getLetters(FILE *fp, int letters[26], char alpha[26]) {
  int c;
  for (int i = 0; (c = fgetc(fp)) != EOF; i++)
    {
      c = fgetc(fp);
      if ( isalpha(c) )
    {
      for ( int j = 0; j < 26; j++ ) //find which letter it is
        {
          if( c == alpha[j] ) 
        {
          letters[j]++;
          break;
        }
        }
    }
    }
}

void printLetters(int letters[26], char alpha[26]) {
  for( int i = 0; i < 26; i++ )
    {
      if(letters[i] != 0){
    printf("The letter '%c' occurs %d times.\n", alpha[i], letters[i]);
      }
    }
}

void drawGraph(int letters[26], char alpha[26]) {
  int x = 11;
  int y;
  while(x >= 0)
    { 
      y = 0;
      while (y < 2)
    {
      if (x == 10)
        {
          printf(" %d ", x);
        }
      else if (x == 11)
        {
          printf("    ");
        }
      else
        {
          printf("  %d ", x);
        }

      for( int i = 0; i < 26; i++ )
        {
          if(letters[i] > 10)
        {
          printf("+");
          letters[i] = 10;
          y++; // Break out of while loop
        }
          else if(letters[i] == x)
        {
          printf("*");
        }
          else
        {
          printf(" ");
        }
          if (letters[i] == x && y == 1)
        {
          letters[i] = letters[i] - 1;
        }
        }
      printf("\n");
      y++;
    }
      x--;
    }
  printf("... ");

  for( int i = 0; i < 26; i++ )
    {
      printf("%c", alpha[i]);
    }
} 
```

但是我当前的代码有两个问题。1\. 我总是打印出 10 个 Y 轴点，我只想根据需要打印出尽可能多的 Y 轴点，实现这一点的最佳方法是什么？2\. 目前只计算小写字符，我该如何解决这个问题？

任何符号或更好的方法将不胜感激，我仍在努力学习！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:58:50.623

第二个问题对我来说似乎有点容易：

```
2\. Currently only lower case characters are counted, how can i address this? 
```

制作这样的结构：

```
 typedef struct 
    {
     char c; 
     int count;
    }alpha;

    alpha abc[26];

for(i=0 ; i<26 ; i++)
  abc[i].count = 0; // Initialization of count for each alphabet
for(i=0;i<26; i++)
  abc[i].c = 'a' + i; 
```

通过这种方式，您可以跟踪每个字母的计数。

要打印文件中每个字母的“直方图”，您需要`(11 + 1 + 1)`行

（表示至少 13 行，可以是用于分隔字符及其条的额外行）

`11``11`字母出现次数的行和`1`所`+`提到的以及`1`字母本身的行。

但是要打印这些行，您需要注意每个`*`（您使用的直方图符号）之前的空间。

因此，遍历数组并打印它，为您`1st question`尝试这样的事情：

```
int cnt;
for(cnt = 11 ; c >=0 ; c--)
{
 for(i=0; i<26; i++)
 {
  if(abc[i].count >= cnt && cnt == 11)  
  {
   space = abc[i].c - 'a';
   printf("%*c",space,'+'); // setting indentation and printing
  }
  if(abc[i].count == cnt && cnt != 11)  
  {
   space = abc[i].c - 'a';
   printf("%*c",space,'*');  //// setting indentation and printing
  }
  printf("\n");
 } //end of inner for loop
} // end of outer for loop 

printf("abcdefghijklmnopqrstuvwxyz\n"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T21:57:45.167

不同的数据表示将简化您的程序。

使用一张表来保存所有可能的一字节字符；char 的字节 val 用作键；# 出现次数为 val。

注意使用`while ((c = getchar()) != EOF)`; 一次读取一个字节的习惯用法 - 您的 getLetters() 例程每隔一个字符就跳过一次。

下面的程序处理大写和小写字母；但仅限于单字节编码 - 它不能正确处理 utf8、utf16 等。有关文本编码的更多信息，请阅读这篇[文章](http://www.joelonsoftware.com/articles/Unicode.html)。isalpha() 将什么视为字母取决于当前语言环境，可以通过[setlocale进行更改](http://linux.die.net/man/3/setlocale)

```
#include <stdio.h>
#include <ctype.h>
#include <limits.h>

enum { NROWS = 10 };

void draw_line(int count[], double scale, int level);
void draw(int count[]);

int main() {
    int count[UCHAR_MAX+1] = {0};
    int c;

    while ((c = getchar()) != EOF)
        count[c]++;

    for (c = 0; c <= UCHAR_MAX; c++)
        if (isalpha(c) && count[c] != 0)
            printf("%c %d\n", c, count[c]);

    draw(count);

    return 0;
} 
```

我的绘图版本，缩放 y 值，而不是为大值打印“+”。通过将计数与 y 轴的水平进行比较，它只打印出所需数量的“y 轴星”。

```
void draw(int count[]) {
    int c, i;
    int max = 0;
    double scale;

    for (c = 0; c <= UCHAR_MAX; c++)
        if (isalpha(c) && count[c] > max)
            max = count[c];
    scale = (max == 0) : 1.0 : (double)max / NROWS;

    for (i = NROWS; i > 0; i--)
        draw_line(count, scale, i);

    for (c = 0; c <= UCHAR_MAX; c++)
        if (isalpha(c))
            putchar(c);
    putchar('\n');
}

void draw_line(int count[], double scale, int level) {
    int c;

    for (c = 0; c <= UCHAR_MAX; c++) {
        if (isalpha(c) && count[c] / scale >= level)
            putchar('*');
        else if (isalpha(c))
            putchar(' ');
    }
    putchar('\n');
} 
```

图的示例输出：

```
$ ./countchars < countchars.c
[..snip..]

                            *                       
                            *     *                 
                            *     *                 
                            *     *    *     *      
                          * *     *    *     *      
                          * * *   *  * *     *      
                          * * *   *  * **  * **     
                          * ***  **  * **  * **     
*                         * **** **  * *** ****     
* *    *    *    *  *  *  * **** **  ***** ******   
ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz 
```

# r - 绘制 3d 密度

> ID：13613157
> 
> 赞同：7
> 
> 时间：2012-11-28T15:47:51.140
> 
> 标签：r, data-visualization

我想创建一个具有密度的 3d 图。

我使用函数密度首先为特定的 x 值创建一个二维图，然后该函数创建密度并将它们放入 y 变量中。现在我有第二组 x 值并将其再次放入密度函数中，我得到第二组 y 变量，依此类推....我想将这些集合放入 3d 图中，我希望你知道我意思是。所以我有一个密度表面......

例如我有：

```
x1<-c(1:10)
x2<-c(2:11)
y1<-c(1,1,2,1,3,4,2,3,2,2)
y2<-c(1,2,3,1,3,6,2,8,2,2)
.
.
.
. 
```

现在我想在 x 轴上放置第一个值 1 第一组，在 y 轴上放置相应的 x 值，在 z 轴上放置密度。所以我有一个 x=1 的“磁盘”，对于 x=2 我有第二个“磁盘”等等，所以我得到了一个密度“山”。

我希望我可以理解，如果您有更好的想法来实现它，那么欢迎您！我想用 persp 函数来做，如果你用那个函数做一个例子会很好，

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T18:32:05.563

恐怕我无法回答你的问题。但这里是你如何从你首先估计双变量密度的二维数据集中绘制我认为你正在寻找的那种图：

```
x <- rnorm(1000)
y <- 2 + x*rnorm(1000,1,.1) + rnorm(1000)
library(MASS)
den3d <- kde2d(x, y)
persp(den3d, box=FALSE) 
```

![在此处输入图像描述](../Images/613c98bdd771869c51c4e7a57db8996e.png)

那么 persp 有很多选择，看看

```
?persp 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-01-23T20:39:01.980

建立在彼得的回答之上。情节现在可以更有趣、更漂亮并且与`plotly`图书馆互动。

```
x <- rnorm(1000)
y <- 2 + x*rnorm(1000,1,.1) + rnorm(1000)
library(MASS)
den3d <- kde2d(x, y)

# the new part:
library(plotly)
plot_ly(x=den3d$x, y=den3d$y, z=den3d$z) %>% add_surface() 
```

这使：

[![在此处输入图像描述](../Images/e2d540cc6f956258deebaceb39039138.png)](https://i.stack.imgur.com/redrq.png)

# mobile - 引导轮播在移动设备上不起作用

> ID：13613163
> 
> 赞同：0
> 
> 时间：2012-11-28T19:45:20.490
> 
> 标签：mobile, twitter-bootstrap, carousel

我正在尝试使用 twitter 引导库构建轮播功能。我的代码基于[http://twitter.github.com/bootstrap/javascript.html#carousel](http://twitter.github.com/bootstrap/javascript.html#carousel)提供的简单示例。

轮播在桌面浏览器 chrome 和 firefox 上运行良好，但是当我在移动版 chrome 或 iOS 版 safari 上尝试相同页面时，轮播不呈现。

我包括 bootstrap.css 和 bootstrap-carousel.js。

这里可能是什么问题。此外，您甚至如何调试移动浏览器的问题，因为您没有桌面浏览器中包含的开发工具。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:28:12.533

请忽略这个问题。我错过了一个与图书馆无关的小问题。

# javascript - 变量是枚举的实例

> ID：13613164
> 
> 赞同：1
> 
> 时间：2012-11-28T19:45:23.333
> 
> 标签：javascript, instanceof

我有以下 javascript 代码：

```
function testClass() {
    this.SaveValue = function (value) {
        var isInstance = value instanceof TestEnum;

        if (!isInstance) {
            return;
        }
     }
}

TestEnum = {
    VALUE_0: 0,
    VALUE_1: 1,
    VALUE_2: 2   
} 
```

我通过以下方式创建此对象的实例：

```
$(function () {
    var a = new testClass();
    a.SaveValue(TestEnum.VALUE_1);    
}); 
```

我想做的就是测试传递给`SaveValue`函数的值实际上是`TestEnum`. 但是，当我运行此代码时，出现以下错误：`Uncaught TypeError: Expecting a function in instanceof check, but got 1`

我会以正确的方式解决这个问题吗？我尝试了 typeof 但它只返回`number`对我来说不是特别有用的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T19:50:47.497

您可以将值创建为“类”的实例：

```
function TestEnum(value) {
    this._value = value;
}

TestEnum.prototype.valueOf = function() {
    return this._value;
}

TestEnum.prototype.toString = function() {
    return 'TestEnum_' + this._value;
}

TestEnum.VALUE_0 = new TestEnum(0);
TestEnum.VALUE_1 = new TestEnum(1); 
```

那么以下将起作用：

```
TestEnum.VALUE_0 instanceof TestEnum 
```

但这也意味着您必须使用 . 显式访问一个值的数值`.valueOf`。在某些情况下，JS 会自动为您执行此操作（例如在 中`5 + TestEnum.VALUE_1`）。覆盖`toString`以便您可以将值用作属性也可能是必要的。

这是否是一个可行的解决方案真的取决于您的用例。

* * *

或者，如果只是想测试一个值是否是枚举的一部分，您可以拥有一个包含所有可能值的附加属性：

```
TestEnum.values = {0: true, 1: true, ...}; 
```

然后用

```
value in TestEnum.values
// or more reliable (fails for inherited `Object` properties)
TestEnum.values.hasOwnProperty(value); 
```

你甚至可以自动化这个：

```
function collectValues(obj) {
    var values = {}; // or Object.create(null) if available
    for (var prop in obj) {
        if (obj.hasOwnProperty(prop)) {
            values[obj[prop]] = true;
        }
    }
    return values;
}

TestEnum.values = collectValues(TestEnum); 
```

不过，这只会对原始值可靠地起作用，并且不会区分 string`"1"`和 number `1`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T20:13:47.400

您正在将一个数字传递给函数

```
a.SaveValue(TestEnum.VALUE_1); 
```

由于 TestEnum 只是一个对象，并且您正在引用该对象上的数字属性，因此您正在使用数字调用您的函数。相反，您应该创建一个 TestEnumValue 对象并将其用于对象的属性：

[下面的 JSFiddle 链接](http://jsfiddle.net/Andypro/7mfQd/)

```
function testClass() {
    this.SaveValue = function (value) {
        var isInstance = value instanceof TestEnumValue;

        if (!isInstance) {
            return;
        }
     }
}

TestEnumValue = function(arg) {
   arg = arg ? arg : 0;  //  sensible default

   this.key = 'VALUE_' + arg;
   this.val = arg;
}

Level = {
    NumSpiders : new TestEnumValue(0),
    NumCreepers: new TestEnumValue(1),
    NumZombies : new TestEnumValue(2),
    NumChickens: new TestEnumValue  //  uses default enum value    
};

$(function() {
    var a = new testClass();
    a.SaveValue(Level.NumSpiders);

    $('#hi').text(Level.NumSpiders.key);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-28T14:26:06.667

玩弄这个，我注意到您可以利用枚举编译成一个对象的事实，该对象以两种方式绑定值并结合`hasOwnProperty`检查。

```
export enum TEST_ENUM{
    ZERO, // 0
    ONE, // 1
    TWO, // 2
}

let a = 1;
let b = TEST_ENUM.TWO // 2
let c = 5 // incorrect value

TEST_ENUM.hasOwnProperty(a); // TRUE
TEST_ENUM.hasOwnProperty(b); // TRUE
TEST_ENUM.hasOwnProperty(c); // FALSE 
```

不过，这有一些注意事项；

```
// An object's keys are always strings...
// Although this shouldn't not matter usually (e.g. parsed user input)
TEST_ENUM.hasOwnProperty("2"); // TRUE

// And the enum is bound two-way so:
let input = "TWO";
if (TEST_ENUM.hasOwnProperty(input) { // TRUE
  let result = input // "TWO"
  // result is now the enum's value, instead of the key.
  result = TEST_ENUM[input]; // this would be the correct assignment
}; 
```

当然`typeof`，如果是字符串 assign it ，您可以通过检查来修复这两个问题`TEST_ENUM[mystring]`。

请注意，我的智能感知没有自动完成`hasOwnProperty`枚举上的功能，但它也没有抱怨它，它适用于所有浏览器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T19:50:34.293

**编辑**

[这是一个如何做到这一点的例子。](http://jsfiddle.net/hL5L6/3/)

```
function TestEnum(val) {
    this.vals = this.vals || [];
    if (this.vals.indexOf(val) == -1) console.log('nope: ' + val);
    else console.log('ok: ' + val);
}
(function() {
    var vals = {
        VALUE_0: 0,
        VALUE_1: 1,
        VALUE_2: 2
    };
    TestEnum.prototype.vals = [];
    for (var key in vals) {
        TestEnum[key] = vals[key];
        TestEnum.prototype.vals.push(vals[key]);
    }
})(); 
```

现在`new TestEnum(TestEnum.VALUE_0);`可以了，但是如果你尝试，比如说，`new TestEnum(3)`它会抛出一个异常。

* * *

这有点倒退——`x instanceof y`意味着 x 已被创建为`x = new y()`. 由于`TestEnum`甚至不是函数，因此您无法创建它的实例，因此这不起作用。

你可以做的可能是这样的：

```
function MyEnum(enumVal) { this.val = enumVal; }
a.SaveValue( new MyEnum(TestEnum.VALUE_1) ); 
```

然后检查使用`isInstance = value instanceof MyEnum`.

# python - 在 python 中复制文件：权限被拒绝

> ID：13613169
> 
> 赞同：0
> 
> 时间：2012-11-28T19:45:33.973
> 
> 标签：python, file, transfer

> **可能重复：**
> [从 Python 脚本中请求 UAC 提升？](https://stackoverflow.com/questions/130763/request-uac-elevation-from-within-a-python-script)

我必须将文件（例如 txt）复制到系统文件夹，有没有办法做到这一点？

这是我用于正常文件传输的代码，它有效：

```
import os

import shutil

fileList = os.listdir('J:\hawa')

fileList = ['J:\hawa'+ '\lol.txt']

for f in fileList:
    shutil.copy2(f, 'C:\Windows\System32\Drivers\etc') 
```

但是当目标目录是系统文件夹时，会出现错误：

```
Traceback (most recent call last):
 File "C:/Python27/copy2.py", line 8, in <module>
 shutil.copy2(f, 'C:\Windows\System32\Drivers\etc')
 File "C:\Python27\lib\shutil.py", line 128, in copy2
 copyfile(src, dst)
 File "C:\Python27\lib\shutil.py", line 83, in copyfile
 with open(dst, 'wb') as fdst:
IOError: [Errno 13] Permission denied: 'C:\\Windows\\System32\\Drivers\\etc\\lol.txt' 
```

我可以以某种方式修改代码以使其以管理员权限运行吗？

# ruby-on-rails - 如何从 Rails 3.1 中的 URL 检索资源类？

> ID：13613170
> 
> 赞同：1
> 
> 时间：2012-11-28T19:45:34.783
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我正在尝试从 URL 中挖掘资源类。所以我有这个：

`/users/1/friends`

我想以`Friend`某种方式从中提取资源。字符串匹配适用于本示例，但我想对我的应用程序中的每个路由使用相同的算法，它们可能会变得复杂。

是否有一个 Rails 助手可以获取 URL，以某种方式比较与 routes.rb，然后返回 URL 将命中的资源？

我以前见过`params[:controller]`，我`Rack::Request`为每个请求设置了对象，但它似乎没有获取该参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:27:23.190

最终使用`recognize_path`. 既然其他人问过，之所以需要这样做，是因为我正在编写代码来自动记录基于 Cucumber 测试的 JSON API。因此，当运行测试时，我会检查`last_request`Cucumber`After`块中的对象，并从中推断出正在访问哪个资源，这样我就可以按资源对每个测试进行分组。

# bash - 如何将已经运行的 CHILD 进程置于 nohup 下

> ID：13613171
> 
> 赞同：1
> 
> 时间：2012-11-28T19:45:39.830
> 
> 标签：bash, shell, process, zsh, nohup

我的问题与发布的问题非常相似：[如何将已经运行的进程置于 nohup 下？](https://stackoverflow.com/questions/625409/how-do-i-put-an-already-running-process-under-nohup)

假设我从命令行执行 foo.sh，然后它又执行另一个 shell 脚本，依此类推。例如：

```
foo.sh
 \_ bar.sh
    \_ baz.sh 
```

现在我按 Ctrl+Z 暂停“foo.sh”。它列在我的“工作 -l”中。

我如何拒绝 baz.sh 以使其不再是 foo.sh 的孙子？如果我输入“disown”，那么只有 foo.sh 与其父级被拒绝，这不是我想要的。我想终止 foo.sh 和 bar.sh 进程，只留下 baz.sh。

我目前的解决方法是“杀死 -18”（恢复）baz.sh 并继续我的工作，但我更愿意杀死上述进程。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:04:46.160

用于`ps`获取 PID`bar.sh`并杀死它。

```
imac:barmar $ ps -l -t p0 -ww
  UID   PID  PPID        F CPU PRI NI       SZ    RSS WCHAN     S     ADDR TTY           TIME CMD
  501  3041  3037     4006   0  31  0  2435548    760 -      Ss    8c6da80 ttyp0      0:00.74 /bin/bash --noediting -i
  501 68228  3041     4006   0  31  0  2435544    664 -      S     7cbc2a0 ttyp0      0:00.00 /bin/bash ./foo.sh
  501 68231 68228     4006   0  31  0  2435544    660 -      S     c135a80 ttyp0      0:00.00 /bin/bash ./bar.sh
  501 68232 68231     4006   0  31  0  2435544    660 -      S     a64b7e0 ttyp0      0:00.00 /bin/bash ./baz.sh
  501 68233 68232     4006   0  31  0  2426644    312 -      S     f9a1540 ttyp0      0:00.00 sleep 100
    0 68243  3041     4106   0  31  0  2434868    480 -      R+    a20ad20 ttyp0      0:00.00 ps -l -t p0 -ww
imac:barmar $ kill 68231
./foo.sh: line 3: 68231 Terminated              ./bar.sh
[1]+  Exit 143                ./foo.sh
imac:barmar $ ps -l -t p0 -ww
  UID   PID  PPID        F CPU PRI NI       SZ    RSS WCHAN     S     ADDR TTY           TIME CMD
  501  3041  3037     4006   0  31  0  2435548    760 -      Ss    8c6da80 ttyp0      0:00.74 /bin/bash --noediting -i
  501 68232     1     4006   0  31  0  2435544    660 -      S     a64b7e0 ttyp0      0:00.00 /bin/bash ./baz.sh
  501 68233 68232     4006   0  31  0  2426644    312 -      S     f9a1540 ttyp0      0:00.00 sleep 100
    0 68248  3041     4106   0  31  0  2434868    480 -      R+    82782a0 ttyp0      0:00.00 ps -l -t p0 -ww 
```

# java - 从混合文件中读取双数

> ID：13613173
> 
> 赞同：0
> 
> 时间：2012-11-28T19:45:48.430
> 
> 标签：java, file-io

尝试仅在文件包含数字和单词的情况下读取双数字。到目前为止我所做的代码可以正确地从文件中读取并打印带有数字和单词的完整列表。不确定如何排除单词并打印只读双精度数。

```
 public void doubleFromFile()
 {
              Scanner scan = new Scanner(System.in);

     Scanner fileScan;
     boolean validName = false;
    double num = 0.0;

     do
     {

         System.out.print("Enter file name: ");
         String str = scan.nextLine();

        try 
        {

            fileScan = new Scanner(new File(str));
            validName = true;

        while(fileScan.hasNextLine())
        {

            try
            {

            str = fileScan.nextLine();
            num = Double.parseDouble(str);

      System.out.println(str);
            }
             catch (NumberFormatException nfe) 
             {
                System.out.println("is not a Double number");
             }   

        }//end while

        }// end try

         catch (FileNotFoundException fnfe)
           {
              System.out.println("Invalid File name: enter again");
           }

     }while(!validName);

  }//end doubleFromFile method 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:44:51.257

这是一个工作测试

```
 Scanner sc = new Scanner("aaaa 1.1 bbb\n3");
    sc.useLocale(Locale.US);
    while (sc.hasNext()) {
        if (sc.hasNextDouble()) {
            System.out.println(sc.nextDouble());
        } else {
            sc.next();
        }
    } 
```

请注意，我使用了美国语言环境，以便 Scanner 解释“。” 作为小数点分隔符，在我的语言环境（默认）中是“，”。另请注意，1.1 和 3（整数）都被 nextDouble 识别

# java - 修复代码：查找对枚举的序数方法的所有调用

> ID：13613179
> 
> 赞同：3
> 
> 时间：2012-11-28T19:45:57.137
> 
> 标签：java, eclipse, enums

我有一些写得很糟糕的代码，显然违反了[Effective Java 31](http://books.google.com/books?id=ka2VUBqHiWkC&lpg=PR10&ots=yYHjJgu1Q3&dq=effective%20java%20item%2031&pg=PA158#v=onepage&q&f=false)。

我试图通过添加一个带有 getter 的实例字段来修复它，但我很难`.ordinal()`在枚举上找到对该方法的所有引用。做一个 Eclipse 调用层次结构`.ordinal()`让我在任何枚举上对该方法的所有引用。在这个代码库中有数百个这种不良做法的例子，我无法修复所有这些；我只想为这个枚举修复它。

在 Eclipse 中或使用其他工具有什么方法可以找到所有对`MyEnum.ordinal()`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T19:49:36.997

我会首先找到所有`MyEnum`使用`Ctrl`++的`Shift`引用`G`，然后从这些引用中手动查看哪些调用`MyEnum#ordinal()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T19:54:07.093

删除 Enum 并记下 IDE 错误视图中引用 ordinal() 的所有错误。

# objective-c - Objective C 命令行工具参数输入

> ID：13613180
> 
> 赞同：0
> 
> 时间：2012-11-28T19:45:58.227
> 
> 标签：objective-c, bash

我有一个不好的问题，希望你能给我一些想法！:)

我想做的事：

只需阅读脚本的用户参数。

问题是什么：

特殊字符

让我解释：

脚本名称：testscript

如果用户键入 testscript -f filename.txt 它会打印出名称。相当容易。

但是如果用户键入以下内容，它对 shell 不起作用： testscript -f file(somethings)name.txt 所以如果有特殊字符，它总是会抛出一个 sh: error....

工作：如果用户这样写，它就可以工作： testscript -f 'filename(something).txt'

和 ' '

但这很不方便，而且人们经常忘记他们必须编写它。

有谁知道我能做什么？

我想过获取参数然后在开头和结尾添加'和'，我不确定shell错误是否是第一个..

否则，有人有想法吗！？

在允许用户输入和删除（）之前，是否可以检查文件名中是否有（）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:53:46.420

不幸的是，您的程序在这里实际上无能为力 - 您的用户看到的错误来自 shell，甚至在您的程序有机会执行之前。

# apache-flex - 在 Flex 中设置 RichText 项目符号的样式

> ID：13613182
> 
> 赞同：1
> 
> 时间：2012-11-28T19:46:02.563
> 
> 标签：apache-flex, css, actionscript, textflow

我正在开发一个带有 RichText 组件的 iPad 应用程序。他们在目标设备上运行良好。但是，子弹看起来并不那么出色。具体来说，我需要增加项目符号和列表项之间的空间。它太近了，看起来不太好，设计人员对此一点也不满意。

代码的工作方式是我们有一个读入的 XML 文件，屏幕的内容是从该文件中填充的。例如，这是我的测试列表：

```
<section id="outro">
    <element id="outro">
        <copy id="OutroTestCopy" x="50" y="75" width="1200"><![CDATA[
            <p fontSize="55" color="#cf7028">List to display</p>
            <list fontSize="50" fontWeight="bold" paddingLeft="20">
                <listMarkerFormat><ListMarkerFormat paddingRight="300" fontSize="50" fontWeight="bold" afterContent="&nbsp; " /></listMarkerFormat>
                <li>List Reference*<span baselineShift="superscript" alignmentBaseline="ideographicBottom">12</span></li>
                <li>List Corp<span baselineShift="superscript" alignmentBaseline="ideographicBottom">®</span></li>
                <li>List item</li>
                <li>Second list reference<span baselineShift="superscript" alignmentBaseline="ideographicBottom">2</span></li>
            </list> 
        ]]></copy>          
        <footnote><![CDATA[Test footnote]]></footnote>
    </element>
</section> 
```

我的 ActionScript 代码采用上面的复制元素并通过 TextFlow 导入运行它。我这样做而不是在 XML 文件中使用实际的 TextFlow，因为具有 XML/HTML 经验的非程序员将编辑此文件，我希望使标记尽可能接近 HTML，而不是训练他们执行正确的 TextFlow：

```
copyRichText.textFlow = spark.utils.TextFlowUtil.importFromString(copy); 
```

这运行良好，我得到了我的项目符号列表，带有上标和花哨的字符（见下文）。但是，我无法更改项目符号和列表项文本之间的间距。我只想在 ListMarker 和列表项之间留出更多空间。现在他们离得太近了，看起来卡住了，设计人员为此感到悲伤。我已经尝试（如您所见）一些 padding 和 afterContent 类型属性来让它工作，但它们什么也没做。这是上面的结果，供参考：

![此代码的输出](../Images/8041bdba721f16cdbff8d0df61688a10.png)

编辑添加：我之前曾将这些资源用于 TextFlow 中的列表：

*   [Adobe 的预列表标签](http://help.adobe.com/en_US/flex/using/WS02f7d8d4857b1677-165a04e1126951a2d98-7ff6.html)
*   [Adobe 的列表标签信息 (TextFlow)](http://help.adobe.com/en_US/flex/using/WS19f279b149e7481c7fdc883d12de39353f1-8000.html)
*   [TLF 2.0 列出带有酷炫 PDF 打印输出的标记](http://blogs.adobe.com/tlf/2010/07/tlf-20-lists-markup.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-01T15:35:21.810

使用`beforeContent`属性添加空格：

```
 <s:list id="myList" paddingLeft="10" listStylePosition="inside">
        <s:listMarkerFormat>
            <!-- Note that this example inserts an empty string with &quote; HTML entities. -->
            <s:ListMarkerFormat 
                beforeContent="   " 
                content="counters(ordered,&quot;&quot;,upperRoman)" 
                afterContent=": "/>
        </s:listMarkerFormat>
        <s:li>Beginning</s:li>
        <s:li>Middle</s:li>
        <s:li>End</s:li>
    </s:list> 
```

**参考**

*   [Apache Flex API 参考：ListMarkerFormat](http://flex.apache.org/asdoc/flashx/textLayout/formats/ListMarkerFormat.html)

*   [使用文本布局框架：将编号和项目符号列表与基于 TLF 的文本控件一起使用](http://help.adobe.com/en_US/flex/using/WS19f279b149e7481c7fdc883d12de39353f1-8000.html)

*   [TLF 2.0 的 Flex 4 更新](http://blogs.adobe.com/tlf/2010/07/flex-4-updates-for-tlf-20.html)

*   [发现 Flex 和 CSS 的力量](http://www.ibm.com/developerworks/library/wa-cssflex/)

# facebook - 是否可以将 Facebook 评论社交插件的评论发布到粉丝页面？

> ID：13613186
> 
> 赞同：1
> 
> 时间：2012-11-28T19:46:12.927
> 
> 标签：facebook, facebook-social-plugins, facebook-comments

我将 Facebook 评论社交插件集成到我的网站中。我想知道在我的网站上发布的用户评论是否也会出现在粉丝页面上？像`User XYZ has commented on article ABC`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:27:49.923

对我来说听起来像是自定义功能。

[https://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)

```
How do I know when someone comments on my site?

You can subscribe to the 'comment.create' and 'comment.remove' events through FB.Event.subscribe. 
```

这个过程就在这里：

[https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

创建应用程序代表页面（而不是用户）发布操作。但关键是：如果他们无法控制隐私，您可能不应该在页面墙上使用他们的名字，至少不要使用他们的全名。

# c++ - 不生成模板中的虚拟方法

> ID：13613187
> 
> 赞同：2
> 
> 时间：2012-11-28T19:46:15.590
> 
> 标签：c++, templates, inheritance, virtual-functions

> **可能重复：**
> [为什么在使用模板时会出现“未解析的外部符号”错误？](https://stackoverflow.com/questions/456713/why-do-i-get-unresolved-external-symbol-errors-when-using-templates)

我有一些复杂的类。
类 _A 具有子参数化类 A，它有两个子 A1 和 A2。
B类。包含作为成员的类_A对象的指针。有两个子类 B1 和 B2，分别对应于类 A1 和 A2。B1 将 _A 构造为 A1。B2 分别为 A2。
最后是在 B 类内部定义了子 BY 的 Y 类。
现在它是如何出现在文件中的。

**tf1.h**

```
#include <iostream>

struct Y{ // goes to the file tf2.h as ancestor of the class B::BY
};

struct _A{ // goes to the file tf2.h as a member of the class B
};

template<class X>
struct A: public _A {  // goes to two classes below only as an ancestor
    virtual void method();
    protected:
    virtual void m() = 0;
};

template<class X>
struct A1: public A<X>{  // goes to the file tf2.h to the class B1
    protected:
    void m();
};

template<class X>
struct A2: public A<X>{  // goes to the file tf2.h to the class B2
    protected:
    void m();
}; 
```

**tf1.cpp**

```
#include "tf1.h"

template<class X>
void A<X>::method(){
    /* here the class X used */
    std::cout << "A::method called" << std::endl;
    m();
}

template<class X>
void A1<X>::m(){
    std::cout << "A1::m called" << std::endl;
}

template<class X>
void A2<X>::m(){
    std::cout << "A1::m called" << std::endl;
} 
```

**tf2.h**

```
#include "tf1.h"

class B{   // is the counterpain of the class _A
    protected:
    class BY: public Y{
    };

    _A * mp_x;
};

class B1: public B{  // is the counterpain of the class A1
    public:
    B1(){mp_x = new A1<BY>; std::cout << "B::B is called" << std::endl;}
};

class B2: public B{  // is the counterpain of the class A2
    public:
    B2(){mp_x = new A2<BY>; std::cout << "C::C is called" << std::endl;}
}; 
```

**tfmain.cpp**

```
#include <stdlib.h>

#include "tf2.h"

int main (int,char**){
    B2 b2;
    system ("PAUSE");
} 
```

最后，问题。

```
d:>g++ -std=c++0x tfmain.cpp -o tfmain.exe
ccB2BnSP.o:tfmain.cpp:(.rdata$_ZTV2A2IN1B2BYEE[__ZTV2A2IN1B2BYEE]+0x8): undefined reference to `A<B::BY>::method()'
ccB2BnSP.o:tfmain.cpp:(.rdata$_ZTV2A2IN1B2BYEE[__ZTV2A2IN1B2BYEE]+0xc): undefined reference to `A2<B::BY>::m()'
ccB2BnSP.o:tfmain.cpp:(.rdata$_ZTV1AIN1B2BYEE[__ZTV1AIN1B2BYEE]+0x8): undefined reference to `A<B::BY>::method() 
```

我正在使用 MinGW v4.7.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T20:00:18.600

简而言之，您不能将模板定义放入 cpp 文件中（有变通方法......但不是令人愉快的）

原因是编译器只在您调用该模板的第一点实例化模板，因为编译器需要知道用什么类型来实例化模板。

现在，如果您将模板定义放入单独的 cpp 文件中，该文件将单独编译到其自己的翻译单元中。编译器在哪里寻找您实例化模板的情况？

例如

```
// Template.h
template <typename T>
class templateObj { ~templateObj(); };

// Template.cpp
#include "Template.h"
template <typename T>
templateObj::~templateObj() { /* delete stuff! */ }

// YourFile.cpp
#include "Template.h"
templateObj<int> myObj; 
```

现在，当编译器编译这段代码时。它将生成两个翻译单元，一个用于`Template.cpp`，另一个用于`YourFile.cpp`。

请注意，`Template.cpp`它没有一个关于它是什么`YourFile.cpp`以及里面是什么的单一线索。所以它无法知道`YourFile.cpp`你使用`templateObj`了一个模板参数类型`int`。因此，在生成的 的翻译单元中`Template.cpp`，编译器**不会**生成 的析构函数的实例化版本`templateObj`

现在，让我们看一下`YourFile.cpp`，当编译器看到您正在`templateObj`使用 type进行实例化时`int`，它会去寻找 的定义`templateObj`。既然你已经包含`Template.h`了，编译器就会看到你已经声明了一个析构函数`templateObj`。但是定义在哪里？

编译器看不到 的定义`~templateObj()`，此时也不知道在哪里寻找。所以它只是推迟并传递给链接器以搜索要链接到的正确模块。

现在问题来了：

在编译器刚刚生成的两个翻译单元中，既没有`YourFile.o`也`Template.o`没有`template<int>::~template()`. 链接器读入`YourFile.o`并期望有那个版本的析构函数`templateObj`来链接，但唯一的其他翻译单元`Template.o`没有它；事实上，它什么都**没有**。

所以现在怎么办？链接器必须抱怨......这就是您收到的错误消息。

* * *

有关您的代码发生的事情的更多详细信息：

*   产生了两个翻译单元：`tf1.o`和`tfmain.o`
*   `tf1.o``tf1.cpp`由它包含的任何内容生成。
*   `tfmain.o`是从它包含的`tfmain.cpp`任何东西生成的。

那么它们包括什么？对其余代码有什么了解`tf1.cpp`和`tfmain.cpp`了解？

`tf1.cpp`

*   `#include "tf1.h"`==> 哪个`#include <iostream>`...

`tfmain.cpp`

*   `#include "tf2.h"`==> 哪个`#include "tf1.h"`==> 哪个`#include <iostream>`...

有什么`tf1.cpp`？它知道什么？

*   *知道* 和的**声明**`Y``_A`
*   *知道*,和的模板**声明**`A``A1``A2`
*   *在、和中*具有*各种方法的模板**定义**`A``A1``A2`*

 *有什么`tfmain.cpp`？它知道什么？

*   *知道* , ,和的**声明**_`B``B1``B2``Y``_A`
*   *知道*,和的模板**声明**`A``A1``A2`
*   *在, ,中*有*各种方法的**定义**`B``B1``B2`*
**   *有* `main`一个实例`B2`*

 *所以，现在的问题是：

### 对or有什么`tf1.cpp`了解吗？它是否知道您正在创建一个使用 type实例化的实例？`tf2.h``tfmain.cpp``B2``A2``BY`

### 有`tfmain.cpp`知道的`tf1.cpp`吗？它是否知道,或?中方法的**定义**？`A``A1``A2`

他们彼此**不**`tf1.o`认识，因此编译器无法在翻译单元中为您的模板类生成定义代码（此时，它甚至不知道您正在为 B2 创建一个实例，该实例实例化`A2`与类型`BY`）。

最后，链接器无法找到所需的代码`tfmain.o`，因为它**不**存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T19:47:52.183

您不能将模板函数定义放在`.cpp`文件中，您必须将它们放在头文件中。这是模板的一个奇怪限制。

这与函数的模板版本仅在使用时生成这一事实有关。因此，您不能预编译模板化函数，因为它还没有被使用过，所以它不会生成所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:51:36.217

Xymotech 回答了您的问题，但我不同意这种限制很奇怪。;) [这应该为你澄清这个问题。](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)**

# c++ - std::tr1::function 和它接受的模板值

> ID：13613189
> 
> 赞同：3
> 
> 时间：2012-11-28T19:46:20.490
> 
> 标签：c++, tr1

我正在查看一些代码并遇到类似于以下内容的行：

```
std::tr1::function<bool (int, int)>(//etc... 
```

模板类型的语法对`bool (int, int)`我来说并不熟悉。基于谷歌搜索，在这种情况下，`std::tr1::function`这种语法似乎用于定义函数的返回类型和参数。这是有道理的，但为什么这种语法有效？据我所知，C++模板只能指定类型？

我试图在代码中实例化该类型的实例：

```
bool (int, int) test; 
```

正如我所料，该语句未能编译。至少，语法需要类似于： bool (test)(int, int);

被`bool (int, int)`视为 C++ 类型？在我的脑海中调和这个有什么建议吗？

谢谢，亚当

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:55:02.263

它被称为函数类型。

您不能创建它的实例，但可以创建指向它们的指针和 typedef。

这个问题有一些见解：[函数类型是用来做什么的？](https://stackoverflow.com/questions/13590084/what-is-a-function-type-used-for)

# vba - VBA 循环在第一次迭代后冻结/崩溃单词

> ID：13613190
> 
> 赞同：1
> 
> 时间：2012-11-28T19:46:20.520
> 
> 标签：vba, ms-word

试图确定 word 文档中每个表格的总宽度。第一次迭代后，脚本挂起，Microsoft Word 停止响应。

```
Sub fixTableAlignment()
    For Each tTable In ActiveDocument.Tables
      Dim tRng As Range
      Dim sngWdth As Single
      Set tRng = tTable.Cell(1, 1).Range
      sngWdth = -tRng.Information(wdHorizontalPositionRelativeToPage)
      Do While tRng.Cells(1).RowIndex = 1
        tRng.Move unit:=wdCell, Count:=1
      Loop
      tRng.MoveEnd wdCharacter, -1
      sngWdth = sngWdth + tRng.Information(wdHorizontalPositionRelativeToPage)
      MsgBox PointsToInches(sngWdth)
    Next tTable
  End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T07:36:19.300

呈现的代码不适用于由单行组成的表。这个`Do While`循环：

```
Do While tRng.Cells(1).RowIndex = 1
    tRng.Move unit:=wdCell, Count:=1
Loop 
```

一旦我们找到一个不在第 1 行的单元格，就会爆发。如果只有一行，那么每个单元格都在第 1 行。

`Move`如果移动不成功，该方法返回 0，所以这应该有效：

```
Dim lngSuccess As Long

For Each ttable In ThisDocument.Tables
  Set tRng = ttable.Cell(1, 1).Range
  sngWdth = -tRng.Information(wdHorizontalPositionRelativeToPage)

  ' Any non-zero value will do here
  lngSuccess = 1
  Do While tRng.Cells(1).RowIndex = 1 And lngSuccess <> 0
    lngSuccess = tRng.Move(unit:=wdCell, Count:=1)
  Loop

  tRng.MoveEnd wdCharacter, -1
  sngWdth = sngWdth + tRng.Information(wdHorizontalPositionRelativeToPage)
  MsgBox PointsToInches(sngWdth)
Next tTable 
```

另请注意：`tTable`未在您的原始代码中声明，因此请在方法中声明它（`Option Explicit`如果尚未这样做，请使用）。当 Word 停止响应时，可以通过按下来跟踪导致错误的代码部分`<Ctrl>-<Break>`- 这将直接引导您进入`While`循环

* * *

*编辑以处理单行表上的不正确宽度：*

这个新版本使用该`Cell.Width`属性来测量表格的宽度。我找不到一种可靠的方法`Range.Information`来测量单行表的宽度

```
Option Explicit

Sub fixTableAlignment()
    Dim tTable As Table
    Dim cCell As Cell
    Dim sngWdth As Single
    Dim bFinished As Boolean

    For Each tTable In ThisDocument.Tables
        Set cCell = tTable.Cell(1, 1)
        sngWdth = 0

        ' Can't just check the row index as cCell
        ' will be Nothing when we run out of cells
        ' in a single-row table. Can't check for
        ' Nothing and also check the row index in
        ' the Do statement as VBA doesn't short-circuit
        bFinished = False
        Do Until bFinished
            sngWdth = sngWdth + cCell.Width
            Set cCell = cCell.Next

            If (cCell Is Nothing) Then
                bFinished = True
            ElseIf (cCell.RowIndex <> 1) Then
                bFinished = True
            End If
        Loop

        MsgBox PointsToInches(sngWdth)
    Next tTable
End Sub 
```

# jquery - 如何将下拉列表文本与静态字符串进行比较

> ID：13613193
> 
> 赞同：1
> 
> 时间：2012-11-28T19:46:25.577
> 
> 标签：jquery, text, drop-down-menu, compare

好的，更清晰的图片（我希望）...

在 HTML 中，我有一个组合框（下拉列表）（`id= "program"`），即：您单击并选择一个值。组合框（下拉列表）上的提示文本是“选择一个程序...”

在此下方，在页面上，我显示了一个按钮 ( `id="addChosen"`)。用户做出选择后，他们单击 addChosen 按钮将组合框中的文本添加到`<textarea>`，而我将值添加`$('#program :selected').val()`到数组中：`programArray.push($('program :selected').val());`

因此，为了帮助用户从组合框中仅选择有效选项，我想停止添加“选择程序...”

我想将下拉列表中的文本与静态字符串进行比较：

```
if ($('#program :selected').text() == "Select a program..."); {
    //do something here, like show an alert for now...
    alert("Come on, you cant select the instructions...");
} 
else {
    //add the selected text to a <textarea>
    $('#chosenPrograms').append($('#program :selected').text() + "\n";
    } 
```

这似乎并没有比较选定的文本，只需将“选择程序...”插入到`<textarea>`.

它需要防止用户能够将“选择程序...”添加到`<textarea>`

这是完整的页面：

```
@{
ViewBag.Title = "Subject Selector";
ViewBag.Header1 = "Subject Selector";
ViewBag.Header2 = "Choose the right subject - Grade 10-12.";
ViewBag.Description = "Have an idea of what and where you want to study? Subject Chooser will identify the subjects and requirements you will need to achieve your goal.";
}

<hgroup class="title">
    <h2>Select an institution, faculty and programme</h2>
</hgroup>

@using (Html.BeginForm("IndexDDL", "Home", FormMethod.Post, new { id="QueryProgrammesFormId", data_institutionListAction=@Url.Action("InstitutionList") } ))     {
<fieldset>
    <legend>Institution/Faculty/Programme/Chosen Programmes</legend>
    <label for="institution">Institution</label>
    @Html.DropDownList("institution", ViewBag.Institutions as SelectList, "Select an institution...", new { id = "institution", name = "institutionID" })
    <label for="faculty">Faculty</label>
    <select id="faculty" name="faculty"></select>  
    <label for="programme">Programme</label>
    <select id="programme" name="programme"></select>   
    <p>You can add up to <strong>5</strong> programmes to the list below:</p>
    <p>
        <input type="button" id="addChosen" name="addChosen" value="Add Programme" />&nbsp;
        <input type="button" id="removeChosen" name="removeChosen" value="Remove Programme" class="hidden" />
    </p>
    <label for="chosenProgrammes">Chosen Programmes</label> 
    <textarea id="chosenProgrammes" name="chosenProgrammes" rows="5" cols="" placeholder="Programmes selected for analysis"></textarea>
    <p>
        <input type="button" name="goButton" id="goButton" value="Analyse my Programmes" style="display:none" />
    </p>

</fieldset>

/*Tommy: Local Disclaimer to show only when the button becomes available*/
<div id="localDisclaimer" class="hidden">
    @Html.Partial("_LocalDisclaimer")
    <p>
        <input type="checkbox" name="AcceptDisclaimer" id="AcceptDisclaimer" /> I have read the Disclaimer and wish to continue.
    </p>
</div>
}

@section Scripts {
@Scripts.Render("~/bundles/cascadingdropdown")
<script type="text/javascript">
    var cnt = 1;
    var selectedProgrammes = [];
    $(function () {
        $("#faculty").CascadingDropDown("#institution", 'Query/GetFaculties',
        {
            promptText: 'Select a faculty...',
            onLoading: function () {
                $(this).css("background-color", "#ff3");
        },

        onLoaded: function () {
            $(this).animate({ backgroundColor: '#ffffff' }, 800, 'linear');
        }
    });
    $("#programme").CascadingDropDown("#faculty", 'Query/GetProgrammes',
    {
        promptText: 'Select a programme...',
        onLoading: function () {
            $(this).css("background-color", "#ff3");
        },

        onLoaded: function () {
            $(this).animate({ backgroundColor: '#ffffff' }, 800, 'linear');
        }
    });
    $('#programme').on('change', function () {
        if ($(this).val() == '') {
            $('#goButton').hide();
        }
        else {
        }
    });
    $('#AcceptDisclaimer').click(function () {
        if ($(this).attr('checked', 'checked')) {
            $('#goButton').show();
        }
    });
    $('#goButton').on('click', function () {
        /* 
        replace the call to Query/Results + programmeID 
        with
        SubjectSelector/Results + SelectedProgrammes[]
        */

        //window.location.href = 'Query/Results/' + $('#programme').val();
    });

    /*
    Before allowing the user to click on 'addChosen'
    check to see that the counter is less or equal to 5
    */

    $('#addChosen').click(function () {

        if ($('#programme:selected').val() == "Select a programme...") {
            alert("please make a proper selection");
        }
        else {
            $('#chosenProgrammes').append(cnt + " " + $('#programme :selected').text() + "\n");
            selectedProgrammes.push($('#programme :selected').val());
        };

        if (cnt <= 4) {
            //                $('#removeChosen').show();
            $('#localDisclaimer').show();
        }
        else {
            $('#addChosen').hide();
        };

        cnt += 1;
    });
}); 
```

}

这是填充“程序”下拉菜单的函数：

```
public ActionResult GetProgrammes(string faculty)
{
    int facultyInt = int.Parse(faculty);
        var programmes = db.Programmes.Where(p => p.Faculty.FacultyId == facultyInt)
                                      .OrderBy(p => p.Name)
                                      .Select(p => new SelectListItem()
                                      {
                                          Text = p.Name,
                                          Value = SqlFunctions.StringConvert((double)p.ProgrammeId)
                                      });
        return Json(programmes);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:54:31.820

尝试这个：

```
if ($('#program').val() == 'Select a program...') {
    alert("Come on, you can't select the instructions...");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:37:15.140

感谢所有添加回复并试图帮助我的人。

我刚刚解决了这个问题：

我在哪里调用以下内容：
`if ('#programme:selected').val() =="")`
我将其替换为：（
`if ('#programme').val() = '')`
没有`:selected`伪类），现在它可以工作了！

再次感谢[Stackoverflow](http://stackoverflow.com)上的每一位贡献者！你们（和女孩）太棒了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:55:08.420

在诊断这些问题时，最好先检查您的假设：

*   返回什么`$('#program' :checked).text()`？
*   那是你要的吗？
*   是`:checked`您想要的正确选择器吗？（`:selected`也存在）
*   如果不是，你如何得到你想要的？

如果`#program`是你的`select`而不是一个`option`（这`#`应该是唯一的 ID），那么你甚至不需要一个伪选择器（：selected 等）（感谢 Barmar 的那个地方）

您的 jQuery 选择器中放错`'`了位置，我已对其进行了更改（我认为伪选择器之前的空格也无效），以及下面的替代方法

```
if ($('#program:checked').text() == "Select a program..."; {
    alert("Come on, you cant select the instructions...");
} else {

    $('#chosenPrograms').append($('#program:checked').text() + "\n";
} 
```

如果您的选项使用该`value`属性（它们应该使用该属性，因为它允许您将可见值与值分开）然后尝试：

```
if ($('#program:selected').val() == ""; {
    alert("Come on, you cant select the instructions...");
} else {
    $('#chosenPrograms').append($('#program:selected').val() + "\n";
} 
```

# c# - ASP.NET：如何在视图状态中存储占位符？

> ID：13613194
> 
> 赞同：2
> 
> 时间：2012-11-28T19:46:35.870
> 
> 标签：c#, asp.net, viewstate

我正在尝试开发一个页面。有一个按钮和一个占位符。单击按钮时，将向占位符添加用户控件。

**在每次单击按钮时，应将许多用户控件添加到占位符中。**

我试图在预初始化事件的视图状态中存储占位符，但是在加载事件视图状态中从视图状态中检索占位符时仍然为空。

下面是我的代码：

```
 protected void PreInit(object sender, EventArgs e)
        {
            this.OnPreInit(e);
            if (!Page.IsPostBack)
            {
                ViewState["c"] = PlaceHolder1;

            }
            else { PlaceHolder1 = (PlaceHolder)ViewState["c"]; }
        }

 protected void Page_Load(object sender, EventArgs e)
        {

            if(IsPostBack)
        { PlaceHolder1=  (PlaceHolder)ViewState["c"]; }

        }

 public void addDepartmentBtn_Click(object sender, EventArgs e)
        {
            // User Control Code

            c1 = LoadControl("~/AddDepartment.ascx");
            PlaceHolder1.Controls.Add(c1);
} 
```

**如果视图状态不适合这种情况，那么实现此目的的替代方法是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:56:45.757

您必须在每个回帖上重新添加控件到您的占位符。

您对 ViewState 的尝试是错误的树 - ViewState 是完全不同的东西，即使您愿意，您也只能将可序列化的东西存储到 ViewState 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T19:56:20.963

如果您尝试动态地将控件添加到页面，则必须*在每次回发时在 Init 中完成。* 这意味着您必须使用数据结构（持久化在 ViewState 中的东西）作为动态创建的控件列表 - 而不是控件本身，但用作 ID 的字符串哈希是一种常用方法。

每次用户执行某些操作以将控件添加到页面时，将键添加到列表中。在 Page Init 中，您必须阅读列表并使用它来重新创建动态控件并将其添加回页面集合，否则它们将不会出现在页面上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T19:55:45.050

这是行不通的。ASP.NET 服务器控件过于复杂，无法存储在 ViewState 中。根据 ASP.NET 设计，服务器控件所做的是将其数据（状态、属性值等）存储在 Page 的 ViewState 中。

您可以在 ViewState 中存储已创建并添加到占位符的 AddDepartment 用户控件的数量。这可以在 PreRender 中完成。然后在回发时，您从 ViewState 中读取此数字，并创建许多 AddDepartment 控件并将其添加到占位符。

# javascript - 有没有办法获得清晰（而不是模糊）放大的 RGraph 条形图？

> ID：13613195
> 
> 赞同：0
> 
> 时间：2012-11-28T19:46:38.097
> 
> 标签：javascript, html, canvas, rgraph

我正在使用[http://www.rgraph.net/demos/bar04.html](http://www.rgraph.net/demos/bar04.html)的副本，其中画布的属性中没有指定高度和宽度，但在 CSS 中设置为高度和宽度为 100%。

目前渲染的图像看起来像是在低分辨率下清晰地绘制了图形，然后被放大了；屏幕具有与在浏览器中放大图像时相同的模糊感。

有什么方法可以调整和配置 RGraph，以便在图形填满屏幕时图像清晰？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:55:40.940

用 CSS改变大小`canvas`只会缩放它而不是改变固有分辨率。要更改分辨率`width`，`height`请设置`canvas`. 您可以[在标记](http://jsfiddle.net/robertc/MGrJy/)中执行此操作，也可以在脚本中进行设置：

```
var cvs = document.getElementById('cvs');
cvs.width = 1200;
cvs.height = 500; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T14:13:06.137

除了硬编码这些值之外，您还可以在页面加载时确定窗口大小（例如使用 jQuery），然后将宽度/高度属性设置为该值。

# android - Android在状态栏中添加视图

> ID：13613199
> 
> 赞同：0
> 
> 时间：2012-11-28T19:46:58.383
> 
> 标签：android, notifications, statusbar

这是我添加视图的代码：

```
 LayoutInflater layoutInflater = (LayoutInflater) this
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    TextView tv = (TextView) layoutInflater.inflate(R.layout.textview, null);
    final View view = tv;
    WindowManager.LayoutParams lp = new WindowManager.LayoutParams(
            ViewGroup.LayoutParams.MATCH_PARENT, 25,
            WindowManager.LayoutParams.TYPE_STATUS_BAR,
            WindowManager.LayoutParams.FLAG_SCALED
            , PixelFormat.TRANSLUCENT);

    WindowManager wm = (WindowManager) getApplicationContext().getSystemService(WINDOW_SERVICE);
    wm.addView(view, lp); 
```

但这会给我一个错误：

> android.view.WindowManager$BadTokenException: 无法添加窗口 android.view.ViewRootImpl$W@41668948 -- 此窗口类型的权限被拒绝

所以我在android manifast中添加了权限

```
 <uses-permission android:name="android.permission.STATUS_BAR" /> 
```

但仍然有错误，我需要帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-05T21:46:53.110

为了在状态栏顶部绘制视图，这是在阅读了这么多堆栈溢出帖子后对我有用的组合：

1-您需要在您的服务或活动上拥有此 LayoutParameters 的 WindowManager：

```
WindowManager.LayoutParams params = new WindowManager.LayoutParams(
    WindowManager.LayoutParams.MATCH_PARENT, 
    statusBarHeight, 
    WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY, 
    WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE |       
    WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN | 
    WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE | 
    WindowManager.LayoutParams.FLAG_FULLSCREEN, 
    PixelFormat.TRANSLUCENT); 
```

2-您只需要在您的 android 清单上获得此权限：

```
uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" 
```

希望有帮助。在我的情况下，我只需要用半透明的黄色或绿色为状态栏着色，以表明用户当前正在通话中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:45:09.580

好的，这应该工作：

```
<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T04:44:57.940

从代码片段来看，就像您试图创建一个新的*状态栏窗口一样，*这是不可能的。（有一个状态栏，由系统 UI 管理。）

你能描述一下你想要做什么吗？[通常，您使用Notification](https://developer.android.com/reference/android/app/Notification.html)和[NotificationManager](https://developer.android.com/reference/android/app/NotificationManager.html) API与状态栏进行交互。

# android - Android编码概念：AlertDialog as Activity？

> ID：13613201
> 
> 赞同：0
> 
> 时间：2012-11-28T19:47:02.460
> 
> 标签：android, coding-style, android-activity, android-alertdialog

如果我想从我的 MainActivity 启动一个应该是 Activity 本身的 AlertDialog（因为我需要将信息从 AlertDialog 传递回 MainActivity），那么通常的编码概念是什么？我必须在我的 DialogActivity 或 Activity 中扩展 Dialog 吗？我不确定对话框本身是否应该是 Activity 或者 Activity 是否应该以某种方式调用 AlertDialog？你能给我一个提示吗。

我的主要问题是我总共有 3 个 AlertDialogs，最后 2 个取决于第一个 AlertDialog 的选择（因此调用 nr2 或 nr3）。而且我必须将最后一个对话框中的信息传递回 MainActivity，所以我认为唯一干净的方法是使用不同的活动来解决这个问题。

**[更新]**
解决方案是创建不同的活动，看起来像对话框（请参阅接受的答案）。下一个问题是将一些数据从 Activity A 传递到 B 到 C，然后将结果传回 A。这对于 Intents 来说非常容易。
**A:** startActivityForResult(...)
**B:** startActivity(...); addFlags(Intent.FLAG_ACTIVITY_FORWARD_RESULT);
**C:** setResult(...)
**A:**从 onActivityResult(...) 获取数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:16:32.490

我相信首选模式是使用[对话片段](http://developer.android.com/reference/android/app/DialogFragment.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:51:28.713

有一个对话框主题可用于显示类似对话框的活动。

```
<activity android:theme="@android:style/Theme.Dialog"> 
```

结合 startActivityForResult() 和 setResult() 你应该能够创建你想要的。

# java - 启动和停止 boolean() 函数

> ID：13613202
> 
> 赞同：0
> 
> 时间：2012-11-28T19:47:03.440
> 
> 标签：java, boolean, processing

我正在尝试使用来自[http://www.openprocessing.org/sketch/7050](http://www.openprocessing.org/sketch/7050)的代码来使用国家名称中的字母组成国家。但我想这样做，一旦用户按下右箭头键，该过程将重新开始，而是创建一个新国家并使用该国家的字母。我有点卡住了——我所拥有的，所以当你按下右箭头键时，它会从上一个功能停止的地方开始创建下一个国家。有没有办法让它重新开始？

```
 PFont font;
String fontpath = "ArialMT-200.vlw";
int fontstart = 300;
int fontend = 8;
float fontsize = fontstart;
float fontsizedecrease = 0.97;
PImage bg;
PImage australia;
String country1 = "australia.jpg";
String country2 = "austria.jpg";
String letters = "Australia";
char[] chars = new char[52];
int nchars = 0;
int iterations = 500;
int c = 0;
PGraphics letter,lettersquare,drawing;

void setup(){
  //initialize the sketch
  size(900,600);
  //background(255);
  //initialize the font
  //font = loadFont(fontpath);
  ///*
  for(int i=0;i<letters.length();i++){
    boolean found = false;
    char lc = letters.charAt(i);
    for(int j=0;j<nchars;j++){
      if(chars[j]==lc){
        found = true;
        break;
      }
    }
    if(!found) chars[nchars++] = lc;
  }
  chars = (char[]) subset(chars,0,nchars);
  font = createFont("Arial",200,true,chars);
  //*/
  textAlign(CENTER,CENTER);
  //load the image that will be filled with letters
  australia = loadImage(country1);
    austria = loadImage(country2);
    //france = loadImage(country3);
     //guatemala = loadImage(country4);
     // italy = loadImage(country5);
      // japan = loadImage(country6);
  bg = loadImage("background.jpg");
  //posterize the image
  australia.filter(THRESHOLD,0.4);
  australia.filter(BLUR,3);
  australia.filter(THRESHOLD,0.6);

 austria.filter(THRESHOLD,0.4);
  austria.filter(BLUR,3);
  austria.filter(THRESHOLD,0.6);
  //initialize the drawing buffers
  letter = createGraphics((int)fontsize,(int)fontsize,JAVA2D);
  lettersquare = createGraphics((int)fontsize,(int)fontsize,P2D);
  drawing = createGraphics(width,height,JAVA2D);
  drawing.beginDraw();
  drawing.background(255);
  // THIS STUPID THING NEEDS TO GO HERE!!!!
  drawing.image(bg,0,0);
  drawing.endDraw();

}

void draw(){
  background(255);
  if(floor(fontsize)>fontend&&c<letters.length()-1){
    if(!letterfit()){
      fontsize *= fontsizedecrease;
    }else{
      c++;
      if(c==11){
        fontsize *= 0.75;
      }
    }
    tint(255);
    image(drawing,0,0);
    if(mousePressed){
      tint(255,100);
      image(australia,0,0);
    }
  }else{
    tint(255);
    image(drawing,0,0);
    println(c+" "+letters.length());
    /*
    save("mlk-"+hour()+""+minute()+""+second()+".tif");
    exit();
    */
    noLoop();
  }
}     
boolean letterfit(){
  letter.beginDraw();
  letter.background(255,0);
  letter.fill(0);
  letter.textAlign(CENTER,CENTER);
  letter.translate(fontsize/2,fontsize/2);
  letter.rotate(random(TWO_PI));
  letter.scale(fontsize/fontstart);
  letter.textFont(font);
  letter.smooth();
  letter.text(letters.charAt(c),0,0);
  letter.endDraw();
  lettersquare.beginDraw();
  lettersquare.background(255);
  lettersquare.image(letter,0,0);
  lettersquare.filter(ERODE);
  lettersquare.filter(ERODE);
  lettersquare.endDraw();
  for(int i=0;i<iterations;i++){
    int x = floor(random(width-fontsize));
    int y = floor(random(height-fontsize));
    boolean fits = true;
    for(int dx=0;dx<fontsize&&fits;dx++){
      for(int dy=0;dy<fontsize&&fits;dy++){
        if(brightness(australia.get(x+dx,y+dy))>127){
          fits = false;
          break;
        }
        if(brightness(lettersquare.get(dx,dy))<127){
          if(brightness(drawing.get(x+dx,y+dy))<127){
            fits = false;
          }
        }
      }
    }

   if (keyCode == RIGHT) {

    for(int dx=0;dx<fontsize&&fits;dx++){
      for(int dy=0;dy<fontsize&&fits;dy++){
        if(brightness(austria.get(x+dx,y+dy))>127){
          fits = false;
          break;
        }
        if(brightness(lettersquare.get(dx,dy))<127){
          if(brightness(drawing.get(x+dx,y+dy))<127){
            fits = false;
          }
        }
      }
    }
    if(fits){
      drawing.beginDraw();
      drawing.image(letter,x,y);
      drawing.endDraw();
      return true;
    }
  }

    if(fits){
      drawing.beginDraw();
      drawing.image(letter,x,y);
      drawing.endDraw();
      return true;
    }
  }
  return false;
} 
```

# iphone - UIKit 状态保存不恢复滚动偏移

> ID：13613203
> 
> 赞同：8
> 
> 时间：2012-11-28T19:47:04.840
> 
> 标签：iphone, ios, ios6, uikit, uikit-state-preservation

我有一个在 iOS 6 中使用 UIKit 状态保存的应用程序。我能够保存/恢复视图控制器的状态，即选择了哪个选项卡和导航控制器层次结构，但是我无法让我的表视图恢复它的偏移量。我的故事板中有一个用于视图以及视图控制器的恢复标识符，并且视图控制器（表的数据源）实现`UIDataSourceModelAssociation`如下：

```
- (NSString *)modelIdentifierForElementAtIndexPath:(NSIndexPath *)indexPath inView:(UIView *)view
{
    TSStatus *status = [self._fetchedResultsController objectAtIndexPath:indexPath];

    return status.objectID.URIRepresentation.absoluteString;
}

- (NSIndexPath *)indexPathForElementWithModelIdentifier:(NSString *)identifier inView:(UIView *)view
{
    NSURL *statusURL = [NSURL URLWithString:identifier];
    NSManagedObjectID *statusID = [[TSDataController sharedController].persistentStoreCoordinator managedObjectIDForURIRepresentation:statusURL];
    TSStatus *status = (TSStatus *)[[TSDataController sharedController].mainContext objectWithID:statusID];

    return [__fetchedResultsController indexPathForObject:status];
} 
```

`modelIdentifierForElementAtIndexPath:inView:`当应用程序进入后台时`modelIdentifierForElementAtIndexPath:inView:`被调用，但从未被调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T17:19:39.070

这不是您问题的真正答案，但我也无法让表格视图恢复其 contentOffset。

我猜这是 iOS 6 中的一个错误，因为文档明确指出 a`UITableView`恢复其 contentOffset，当 1）它有一个`restorationIdentifier`2）视图所属的视图控制器有一个`restorationIdentifier`和 3）数据源符合`UIDataSourceModelAssociation`协议。

但是，您可以在视图控制器中手动恢复 contentOffset 和所选项目：

```
- (void)encodeRestorableStateWithCoder:(NSCoder *)coder
{
    [super encodeRestorableStateWithCoder:coder];

    [coder encodeObject:[NSValue valueWithCGPoint:self.tableView.contentOffset] forKey:@"tableView.contentOffset"];

    NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
    if (indexPath != nil) {
        NSString *modelIdentifier = [self modelIdentifierForElementAtIndexPath:indexPath inView:self.tableView];
        [coder encodeObject:modelIdentifier forKey:@"tableView.selectedModelIdentifier"];
    }
}

- (void)decodeRestorableStateWithCoder:(NSCoder *)coder
{
    [super decodeRestorableStateWithCoder:coder];

    CGPoint contentOffset = [[coder decodeObjectForKey:@"tableView.contentOffset"] CGPointValue];
    self.tableView.contentOffset = contentOffset;

    NSString *modelIdentifier = [coder decodeObjectForKey:@"tableView.selectedModelIdentifier"];
    if (modelIdentifier != nil) {
        NSIndexPath *indexPath = [self indexPathForElementWithModelIdentifier:modelIdentifier inView:self.tableView];
        if (indexPath != nil) {
            [self.tableView selectRowAtIndexPath:indexPath animated:NO scrollPosition:UITableViewScrollPositionNone];
        }
    }
} 
```

我不知道为什么`UITableView`不自动执行此操作，即使文档说它确实如此。如果有人知道答案，请发表评论。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T18:23:32.173

*如果 UITableView还*设置了 restoreIdentifier，我发现这可以工作。

但是，如果 UITableViewController 在 UINavigationController 内，它就不起作用。已向 Apple 报告此问题，问题 ID：13536778。此问题似乎同时出现在 iOS 6.0 和 6.1.3 上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-05T20:01:22.837

这是 iOS 6 中的一个错误。

要使用`UIDataSourceModelAssociation`协议恢复表视图的状态，您应该`-reloadData`在返回有效索引路径之前调用表视图，`-indexPathForElementWithModelIdentifier:inView:`如下所示：

```
- (NSIndexPath *)indexPathForElementWithModelIdentifier:(NSString *)identifier inView:(UIView *)view
{
    NSURL *statusURL = [NSURL URLWithString:identifier];
    NSManagedObjectID *statusID = [[TSDataController sharedController].persistentStoreCoordinator managedObjectIDForURIRepresentation:statusURL];
    TSStatus *status = (TSStatus *)[[TSDataController sharedController].mainContext objectWithID:statusID];

    [self.tableView reloadData];

    return [__fetchedResultsController indexPathForObject:status];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-28T08:21:51.307

有关如何实现此目的，请参阅 Apple 的状态恢复示例。神奇的修复发生在`decodeRestorableStateWithCoder`方法中，调用`reloadData`：

[MyTableViewController.m](https://github.com/robovm/apple-ios-samples/blob/master/StateRestore/Classes/MyTableViewController.m)

```
// this is called when the app is re-launched
- (void)decodeRestorableStateWithCoder:(NSCoder *)coder
{
    // important: don't affect our views just yet, we might not visible or we aren't the current
    // view controller, save off our ivars and restore our text view in viewWillAppear
    //
    NSLog(@"MyTableViewController: decodeRestorableStateWithCoder");

    [super decodeRestorableStateWithCoder:coder];

    self.tableView.editing = [coder decodeBoolForKey:kUnsavedEditStateKey];

    [self.tableView reloadData];
} 
```

请注意，他们对编辑状态进行编码是很奇怪的，因为编辑在保存开始之前由他们的进入后台通知处理程序结束，因此它总是会恢复而不是编辑。他们也尝试设置`self.tableView.editing`而不是`self.editing`这样编辑按钮不会更新。还要注意关于不影响视图的评论，这首先是奇怪的，因为它们确实会影响视图，并且在解码状态之前调用第二个 viewWillAppear。鉴于这些错误，我不会使用此示例来调整您的编程技能。

另一个答案指出重新加载`indexPathForElementWithModelIdentifier`不是一个好主意，因为它被多次（至少两次）调用以查找可见和选定对象的各种索引路径。

# python - 基于布尔值的 Django 管理员下拉菜单

> ID：13613204
> 
> 赞同：1
> 
> 时间：2012-11-28T19:47:06.933
> 
> 标签：python, mysql, django, django-models, django-admin

我想知道如何根据布尔值过滤下拉列表。假设其中一个对象是`True`，那么它将显示，但如果是，`False`则不会显示。

任何帮助都会很棒。这是我的模型和管理文件的副本

**模型.py**

```
class Airports(models.Model):
    id = models.AutoField("ID", primary_key=True, editable=False,)
    airporticao = models.CharField("Airport ICAO", max_length=6, help_text="Example: CYYZ or KLGA")
    airportname = models.CharField("Airport name", max_length=50, help_text="Example:")
    country = models.CharField("Country", max_length=50, help_text="Example: Canada")
    hub = models.BooleanField("Hub?", default=False) 
```

**配置文件模块的admin.py**：

```
class UserProfileadmin(admin.ModelAdmin):
    list_display = ['user', 'country', 'vatsimid', 'totalflights', 'totalhours', 'hub']
    search_fields = ['user'] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:49:02.680

哦。尝试这个：

```
class UserProfileadmin(admin.ModelAdmin):
    def formfield_for_foreignkey(self, db_field, request, **kwargs):
        if db_field.name == 'hub':
            kwargs['queryset'] = Airports.objects.filter(hub=True)
        return super(UserProfileadmin, self).formfield_for_foreignkey(db_field, request, **kwargs) 
```

[formfield_for_foreignkey](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_foreignkey)上的文档。

# gcc - Microblaze 交叉编译

> ID：13613207
> 
> 赞同：2
> 
> 时间：2012-11-28T19:47:10.117
> 
> 标签：gcc, cross-compiling, xilinx, bare-metal, microblaze

有谁知道如何使用 gcc 为 xilinx 的 microblaze 处理器编译裸机程序？

使用 xilinx sdk 很容易做到这一点，但现在我正在尝试将 microblaze 构建集成到更大的构建工作流程中。换句话说，我需要能够在命令行中做所有事情——而不是使用 sdk gui。

大多数 xilinx 支持和示例都以他们的 sdk 为中心。他们网站上似乎对 gnu 工具的支持有限，但他们似乎专注于想要为 microblaze 编译 linux 内核的用户。我只想编译一个简单的裸机应用程序。

理想情况下，我可以做类似的事情

```
$ gcc microblaze_program.c 
```

最后得到一个 microblaze 可执行文件。

有没有人这样做过？有谁知道任何例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:56:38.090

SDK 创建一个 makefile - 您可以从命令行使用它。

如果您没有从 Xilinx 提供的图标打开命令行，则需要先调用 $XILINX/settings[32|64].[bat|sh] 来正确设置环境。

# java - 线程异常

> ID：13613209
> 
> 赞同：0
> 
> 时间：2012-11-28T19:47:19.847
> 
> 标签：java

```
 public class Intro extends JFrame implements ActionListener {
        ImageIcon pic = new ImageIcon(this.getClass().getResource("cars-games.jpg"));
        JLabel l1 = new JLabel();
        Image car = pic.getImage();

        public static void main (String[]args){
            Intro i = new Intro();
            i.show();
        }    
    } 
```

它给了我这个错误：

```
Exception in thread "main" java.lang.NullPointerException
    at javax.swing.ImageIcon.<init>(Unknown Source)
    at Intro.<init>(Intro.java:15)
    at Intro.main(Intro.java:58) 
```

任何人都可以帮助PLZ。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T19:50:13.520

您的资源为空，无法使用空参数构造 ImageIcons。

确保您输入了正确的“cars-games.jpg”路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:51:52.300

**我认为它无法读取您的图像文件**，因此无法读取问题。

尝试使用`classLoader`as ：

```
 ImageIcon pic = new ImageIcon(getClass().getClassLoader()
                                    .getResource("cars-games.jpg")); 
```

如果您仍然遇到相同的问题，请确保它`cars-games.jpg`在您的类加载器位置的根目录中可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T20:59:34.547

在本学期我的 java 游戏项目开发之初，我经常遇到这个问题。这通常意味着无法找到您尝试访问的资源（即 Nullpointerexception）。为了让一切变得更容易，我所做的只是在你的 java 项目中创建一个名为 images 的单独文件夹（特别是如果你在这个项目中使用多个图像）。然后你可以用你的目录调用 new ImageIcon 。最终使事情变得容易得多。

如前所述，getClassLoader() 也可以！

# php - 双重排序数组

> ID：13613215
> 
> 赞同：3
> 
> 时间：2012-11-28T19:47:50.070
> 
> 标签：php, arrays, multidimensional-array, sorting

我的数组有 1-6 的排序值。

```
Array: 2 5 6 2 5 1 1 
```

然后我可以在其他任何事情之前先获得两个。

所以它会像`2 2 5 6 5 1 1`。但是，然后我需要按其他排序值和日期进行排序。

示例：`2 2 1 1 5 5 6`那些也附有日期，需要按降序排序。

**最后一个例子：**

```
2 - 2012-06-02
2 - 2012-06-01
1 - 2012-03-05
1 - 2012-03-01
5 - 2012-08-09
5 - 2012-01-01
6 - 2012-11-29 
```

我的函数目前看起来像这样，并由 usort 函数使用。ObjektTyp 是排序值，不同的数字取决于它是什么类型的房子。所有这些值都来自 XML 源。

```
function sort_by_type(&$array, $sort = NULL)
{
    usort($array, function($a, $b) use ($sort)
    {
        if ($a["ObjektTyp"] == $sort) {
            return -1;
        } else {
            return 1;
        }
    });
} 
```

我很想得到一些帮助，整天都在拉我的头发。

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:29:41.667

首先按数字排序，然后按日期排序。这可以通过检查数字是否相同，然后按日期排序来完成。

像这样的东西：

```
function sort_by_type(&$array, $sort = NULL){
    usort($array, function($a, $b) use ($sort){
        if($a["ObjektTyp"] == $b["ObjektTyp"]){
            // already sorted by number, sort by date
            return strtotime($b['date']) - strtotime($a['date']); // sort descending
        }
        else{
            // sort by number
            if ($a["ObjektTyp"] == $sort) {
                return -1;  // 2s to the top
            }
            elseif($b["ObjektTyp"] == $sort){
               return 1;  // 2s to the top 
            }
            else {
                return $a["ObjektTyp"] - $b["ObjektTyp"];
            }
        }
    });
} 
```

DEMO: [http://codepad.viper-7.com/3PMtmA](http://codepad.viper-7.com/3PMtmA)

# batch-file - dos批量从字符串中提取字符

> ID：13613216
> 
> 赞同：1
> 
> 时间：2012-11-28T19:47:50.727
> 
> 标签：batch-file, dos

我正在读取文件中的第一列，其中包含 `0002C1`, `0002C2`, `0003C1`,`0004C1`

仅提取前 4 位数字并将它们放入变量中。

```
FOR /F "tokens=1" %i IN (export.txt) DO (

  echo %i

  set s=%i:~0,4%

  echo %s%

) 
```

在输出中，`echo %`i 的结果是正确的，提取数字似乎也可以正常工作（当我尝试一个条目时，结果是正确的），但值`s`似乎没有改变！有人能看出问题所在吗？

这是我收到的输出：

```
0002C1
%s%
0002C2
%s%
0003C1
%s%
0004C1
%s% 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:54:38.220

您的脚本存在一些问题，只需要进行一些调整并且效果很好。

您需要使用延迟扩展来访问您在`for`循环中创建的变量。

```
setlocal enabledelayedexpansion
FOR /F "tokens=1" %%i IN (export.txt) DO (
  echo %%i
  set x=%%i
  set s=!x:~0,4!
  echo !s!
) 
```

唯一的区别是您将`%`'s替换为 ' `!`s 以告诉 cmd 使用延迟扩展而不是读取变量。

当您使用批处理文件时，您需要对变量使用`%`double `for`。

您还需要分配`%%i`一些东西，以便您可以在它的任一侧使用变量符号，在这种情况下，我使用了`x`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:30:47.017

首先：您需要使用**SETLOCAL ENABLEDELAYEDEXPANSION**命令扩展变量...

第二：你试图“剪切”一个特殊的变量（%i:~0,1%），你不能。

我的解决方案：

```
@Echo OFF

:: By Elektro H@cker

FOR /F %%# IN (export.txt) DO (
  Call Set "Token=%%#"
  Call Set "Token=%%Token:~0,4%%"
  Call Echo %%Token%%
)

Pause&Exit 
```

# jquery - 来自api站点的Ajax，jquery请求

> ID：13613221
> 
> 赞同：0
> 
> 时间：2012-11-28T19:48:02.863
> 
> 标签：jquery, html, ajax, json, jsfiddle

我只想用 jquery 发出一个简单的请求，但它根本行不通。我不知道为什么。你能说我做错了什么吗？

[http://jsfiddle.net/k6uJn/](http://jsfiddle.net/k6uJn/)

有代码。

```
$(document).ready(function() {
$.ajax({
    type: "GET",
    url: "http://api.asdasdasdsdsad.com",
    timeout: 5000,
    dataType: "json",
    success: function(data) {
        $.each(json, function(i, item) {
            $('.galleryThreeColumnList photoSwipe').append('<li><a href="' + item.photo + '"><img src="' + item.thumbnail + '" alt="' + item.id + '" /></a></li>')
        });
    },
    error: function(data) {
        console.log(data);
    }
}); 
```

});

Greez Edocsyl

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:50:09.930

那是因为您尝试访问的站点与您的站点位于不同的域中。

Javascript 具有[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，您不能从不同域的网站发出 ajax 请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:51:29.450

使用 AJAX 请求远程页面通常是不可能的。正如 chrome 开发者控制台所建议的那样，

```
XMLHttpRequest cannot load http://api.elublu.com/. Origin http://fiddle.jshell.net is not allowed by Access-Control-Allow-Origin. 
```

理论上，使用[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)可以请求远程页面，但是如果在此 api 中启用了 CORS，您会看到

```
Access-Control-Allow-Origin:* 
```

在响应标头中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:52:07.163

```
success: function(data) { 
```

这实际上应该如下吗？您正在使用名为 json 的变量，该变量未声明...

```
success: function(json) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T20:53:29.667

就像他们中的很多人已经提到的那样，这是一个可能导致该问题的跨域调用。

您可以使用没有同源策略限制的[JSONP （但不确定这是否符合您的要求）](http://api.jquery.com/jQuery.getJSON/#jsonp)

尝试这个：

```
 $(document).ready(function() {
    $.ajax({
        type: "GET",
        url: "http://api.asdasdasdsdsad.com",
        timeout: 5000,
        dataType: "jsonp",
        success: function(data){
            $.each(data, function(i, item){
                $('.galleryThreeColumnList photoSwipe').append('<li><a href="' + item.photo + '"><img src="' + item.thumbnail + '" alt="' + item.id + '" /></a></li>')
            });
        },
        error: function(data){
            console.log(data);
        }
    });
}); 
```

# java - java中的客户端应用程序异常

> ID：13613222
> 
> 赞同：1
> 
> 时间：2012-11-28T19:48:05.037
> 
> 标签：java, distributed, corba

我想在两台机器上使用 java 运行一个 CORBA 应用程序。当我在一台机器上运行这个应用程序时没有问题，我可以看到“Hello World！” cmd屏幕上的字符串。但是当我尝试在两台机器上运行它时，我遇到了一个异常。

![在此处输入图像描述](../Images/d2d02f389737b650f968127aaecf5d6e.png) 而我的相关目录中有一个 HelloClient.class ！我用来编译和运行这个应用程序的命令是： 在客户端机器上：

```
idlj -fall Hello.idl  //to mapping the Hello.idl to java
javac *.java HelloApp\*.java  //to compile the all .java files such as                HelloClient,Hello,Hellostub,HelloHelper,HelloHolder,HelloOperation and HelloPOA. 
```

在服务器机器上：

```
javac *.java  //to compile HelloServer and HelloImpl classes.
srart orbd -ORBInitialPort 1050 -ORBInitialHost 192.168.138.134  //to start Object Request Broker Daemon
start java HelloServer -ORBInitialPort 1050  //to start HelloServer 
```

在客户端机器上：

```
java HelloClient -ORBInitialHost 192.168.138.134  //to run the Hello application client. 
```

但是当我在一台机器上运行这个应用程序时，我可以正确地得到输出。 ![在此处输入图像描述](../Images/bb8ef89546fd2fb98826b30f12ce7e0f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:50:28.437

您必须在所在`HelloClient`的目录中运行，`HelloClient.class`或者您必须通过将类路径设置为目录`java -cp <dirname> HelloClient`

# ruby-on-rails - 在哪里放置 Rails 控制器的 Ruby 辅助方法？

> ID：13613223
> 
> 赞同：78
> 
> 时间：2012-11-28T19:48:04.890
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, view-helpers

我有某些（或所有）控制器需要的 Ruby 方法。我试着把它们放进去`/app/helpers/application_helper.rb`。我已经将它用于视图中使用的方法。但是控制器看不到这些方法。我应该把它们放在另一个地方还是我需要以不同的方式访问这些辅助方法？

使用最新的稳定 Rails。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-11-28T19:54:38.653

你应该在里面定义方法`ApplicationController`。

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2014-10-09T13:03:28.867

从 Rails 4 开始，关注点是要走的路。有一篇不错的文章仍然可以通过 Wayback Machine[查看。](https://web.archive.org/web/20160324181905/http://richonrails.com/articles/rails-4-code-concerns-in-active-record-models)

本质上，如果您查看控制器文件夹，您应该会看到关注子文件夹。沿着这些线在那里创建一个模块

```
module EventsHelper
  def do_something
  end
end 
```

然后，在控制器中只包含它

```
class BadgeController < ApplicationController
  include EventsHelper

  ...
end 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-11-28T20:02:15.673

您应该在应用程序控制器中定义方法，如果您的方法很少，那么您可以执行以下操作

```
class ApplicationController < ActionController::Base    
  helper_method :first_method
  helper_method :second_method

  def first_method
    ... #your code
  end

  def second_method
    ... #your code
  end
end 
```

您还可以包括以下帮助文件

```
class YourController < ApplicationController
  include OneHelper
  include TwoHelper
end 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2012-11-28T20:00:06.037

您可以使用从控制器调用任何辅助方法`view_context`，例如

```
view_context.my_helper_method 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-11-28T19:59:11.870

Ryan Bigg 的反应很好。

其他可能的解决方案是向您的控制器添加助手：

```
class YourController < ApplicationController
  include OneHelper
  include TwoHelper
 end 
```

最好的祝福！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-08T05:08:05.097

在控制器中包含助手最终会将助手方法公开为操作！

```
# With new rails (>= 5) 

helpers.my_helper_method

# For console

helper.my_helper_method 
```

# c# - 回发时 ASP.NET 复选框的值不正确

> ID：13613226
> 
> 赞同：0
> 
> 时间：2012-11-28T19:48:10.497
> 
> 标签：c#, asp.net

在我正在处理的项目中，我的一些动态复选框有问题。

我有一个表格，在每行一个单元格中，我有一个复选框。选中此复选框以“标记”该记录。在用户设置了一系列过滤器后，单击按钮即可填充表中的记录。因此，表内容在每次回发时都会完全改变。

我使用一个列表来保存哪些记录已被标记，这样如果出现以前检查过的记录，也会在该检索时检查它。

我正在对我的`page_load`函数中的列表执行此检查，我可以通过调试看到它设置正确。但是，当页面加载完成时，检查的状态通常是错误的。

**我是否需要将复选框状态验证步骤移至页面生命周期的另一部分？**

任何提示都会很棒。我发现了一些关于带有复选框的 asp.net 问题的问题，但它们似乎与我的问题无关。

这是代码，请随时批评任何/全部:)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.SqlClient;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace ScienceAssessmentToolASP
{
    public partial class createnewtest : System.Web.UI.Page
    {
    private int n;
    private SqlConnection conn = null;
    private List<int> flaggedQuestions = new List<int>();

    protected void Page_Load(object sender, EventArgs e)
    {

        if (IsPostBack)
        {
            var temp = (List<int>)Session["flaggedQuestions"];
            if (temp != null)
                flaggedQuestions = temp; ;//retrieve flags from session
            try
            {
                GetConn();
                ExecuteRetrieval();

                n = 1;
            }
            catch (Exception ex) { n = 0; Response.Write("for debugging: " + ex); }
            finally { if (conn != null) conn.Close(); }
            if (n < 0)
                //Label1.Text = "Connection Successful";
                Label3.Text = "Failed to Connect to Database, please contact the administrator.";
        }
    }

    protected void Button1_Click(object sender, EventArgs e)
    {  
    }

    private void GetConn()
    {
        string connString = @"laalalala";

        conn = new SqlConnection(connString);
        conn.Open();
    }

    private void ExecuteRetrieval()
    {
        SqlDataReader reader = null;
        string query;

        if (!IsPostBack)
        {
            query = "select * from [ScienceQA]";
            flaggedQuestions = (List<int>)Session["flaggedQuestions"];//retrieve flags from session
        }
        else query = "select * from [ScienceQA] where [GradeLevel] = " + DropDownList1.Text +
            " and [Topic] = '" + DropDownList2.Text + "';";

        SqlCommand cmd = new SqlCommand(query, conn);

        reader = cmd.ExecuteReader();

        TableHeaderRow headerRow = new TableHeaderRow();
        TableHeaderCell idH = new TableHeaderCell();
        TableHeaderCell questionH = new TableHeaderCell();
        TableHeaderCell answerH = new TableHeaderCell();
        TableHeaderCell flagH = new TableHeaderCell();

        idH.Text = "ID";
        questionH.Text = "Question";
        answerH.Text = "Answer";
        flagH.Text = "Flag";

        headerRow.Cells.Add(idH);
        headerRow.Cells.Add(questionH);
        headerRow.Cells.Add(answerH);
        headerRow.Cells.Add(flagH);
        resultTable.Controls.Add(headerRow);

        while (reader.Read())
        {
            TableRow row = new TableRow();
            TableCell idCell = new TableCell();
            TableCell qCell = new TableCell();
            TableCell aCell = new TableCell();
            TableCell flag = new TableCell();

            idCell.Text = reader[0].ToString();
            qCell.Text = reader[1].ToString();
            aCell.Text = reader[2].ToString();

            CheckBox flagBox = new CheckBox();
            int id = Convert.ToInt32(idCell.Text);
            flagBox.AutoPostBack = true;
            flagBox.CheckedChanged += new System.EventHandler(flagButton_Click);
            flagBox.EnableViewState = true;
            flagBox.ViewStateMode = ViewStateMode.Enabled;

            if (flaggedQuestions.Contains(id) && flagBox.ID == "flag" + id)
                flagBox.Checked = true;
            else flagBox.Checked = false;

            flagBox.Text = id.ToString();
            flag.Controls.Add(flagBox);

            row.Cells.Add(idCell);
            row.Cells.Add(qCell);
            row.Cells.Add(aCell);
            row.Cells.Add(flag);
            resultTable.Controls.Add(row);          
        }

        Label4.Visible = true;
        flagCounter.Visible = true;
        resultTable.Visible = true;
    }

    protected void flagButton_Click(object sender, EventArgs e) 
    {
        CheckBox lb = (CheckBox)sender;
        int questionID = Convert.ToInt32(lb.ID.Substring(4));

        if (lb.Checked && !flaggedQuestions.Contains(questionID))  
        {
            //lb.Checked = false;
            flaggedQuestions.Add(questionID);
            flagCounter.Text = Convert.ToString(flaggedQuestions.Count);
        }
        else
        {
            //lb.Checked = true;
            flaggedQuestions.Remove(questionID);
            flagCounter.Text = Convert.ToString(flaggedQuestions.Count);
        }
        Session["flaggedQuestions"] = flaggedQuestions;//store questions to session
    }

    protected void createTestButton_Click(object sender, EventArgs e)
    {
        //create a test
        bool sendQuery = true;
        string author = Session["user"].ToString();
        string accessLevel = accessDropdown.Text;
        int gradeLevel = Convert.ToInt32(DropDownList1.Text);
        int questionCount = flaggedQuestions.Count();
        string testType = testTypeDropDown.Text;
        string description = descriptionBox.Text;

        string questionString = "";

        for (int i = 0; i < flaggedQuestions.Count(); i++)
            questionString += flaggedQuestions[i] + ",";

        string query = @"Insert into Tests Values ('" + author + "','" + questionString
             + "','" + accessLevel + "','" + gradeLevel + "','" + questionCount + "','"
              + testType + "','" + description +"');";

        //check parameters
        if (accessLevel == "")
        {
            errorLabel.Text = "Please choose an access level.";
            sendQuery = false;
        }
        if (questionCount == 0)
        {
            errorLabel.Text = "Please flag a set of questions before creating a test.";
            sendQuery = false;
        }
        if (testType == "")
        {
            errorLabel.Text = "Please choose a test type";
            sendQuery = false;
        }
        if (description == "")
        {
            errorLabel.Text = "Please describe your test";
            sendQuery = false;
        }
        if (sendQuery)
        {

            try
            {
                GetConn();
                SqlCommand cmd = new SqlCommand(query, conn);
                cmd.Prepare();
                int n; 
                n = cmd.ExecuteNonQuery();
            }
            catch (Exception e2) { n = 0; }

            if (n == 1)
                errorLabel.Text = "Test Created Successfully";
            else errorLabel.Text = "Test Creation Failed, please check your parameters.";
        }
    }

}
} 
```

这是对我有用的解决方案，将复选框状态检查移至 onprerender 函数。

```
 protected override void OnPreRender(EventArgs e)
    {
        foreach (TableRow row in resultTable.Rows)
        {
            var cell = row.Cells[3];
            foreach (Control control in cell.Controls)
            {
                var flagBox = control as CheckBox;
                if (flagBox != null)
                {
                    int id = Convert.ToInt32(flagBox.ID.Substring(4));
                    if (flaggedQuestions.Contains(id) && flagBox.ID == "flag" + id)
                        flagBox.Checked = true;
                    else flagBox.Checked = false;
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:49:27.137

您可能需要更新 PreRender 中复选框的选中状态，因为这发生在按钮单击事件触发之后。

# forms - Symfony2：如何根据数据为绑定 PRE_SET_DATA 中的字段添加表单约束

> ID：13613227
> 
> 赞同：5
> 
> 时间：2012-11-28T19:48:10.577
> 
> 标签：forms, validation, symfony

我在 Symfony 2 中有一个表单，基本上有两个字段：

```
public function buildForm(FormBuilderInterface $builder, array $options) {

    $builder->add('contactType', 'select', array(  'choices' => $contactTypes ))
            ->add('value', 'text');
} 
```

然后我添加了一个监听 FormEvents::PRE_SET_DATA 事件的 EventSubscriber。我真正想做的是根据contactType的值（从1到4的数值，代表电子邮件、移动电话、固定电话和传真）更改验证方式。

我按照本教程[http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)

但我不知道如何向值字段添加约束。

谁能帮我？提前非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T18:23:19.720

[您可以将组设置为字段的验证约束并根据提交的数据确定验证组](http://symfony.com/doc/current/form/data_based_validation.html)，而不是在事件订阅者中动态添加验证约束（不确定这是否可能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T12:43:41.017

从控制器创建表单的功能：

```
<?php 

// ...

class DefaultController extends Controller
{
    /**
     * 
     * @param \Clicproxy\DeltadocCabBundle\Entity\Mark $mark
     * @param \Clicproxy\DeltadocCabBundle\Entity\Tag $tag
     * @return Form
     */
    private function createTagForm(Mark $mark, Tag $tag)
    {
        $form = $this->createForm(new TagType(), $tag, array(
            'action' => $this->generateUrl('tag_new', array('slug' => $this->slugify($mark->getName()))),
            'method' => 'POST',
        ));

        foreach ($mark->getFields() as $field)
        {
            $form->add($this->slugify($field->getName()), $field->getFormType(), $field->getOptions());
        }

        $form->add('submit', 'submit', array('label' => 'crud.default.save'));

        return $form;
    }

// ... 
```

实体中的代码（类型，约束，...）：

```
<?php

// ...

/**
 * Field
 *
 * @ORM\Table()
 * @ORM\Entity
 * @UniqueEntity({"name", "mark"})
 */
class Field
{

   // ...

    /**
     * 
     * @return array
     */
    public function getOptions()
    {
        $options = array('label' => $this->getName(), 'mapped' => FALSE);

        $options['required'] = $this->getType() != 'checkbox';

        if ('date' == $this->getType())
        {
            $options['attr']['class'] = 'datepicker'; // 'input-group date datepicker';
            $options['attr']['data-date-format'] = 'dd/mm/yyyy';
            $options['attr']['data-date-autoclose'] = true;
        }

        if ('choice' == $this->getType())
        {
            $choices = array();
            foreach ($this->getChoices() as $choice)
            {
                $choices[$choice->getValue()] = $choice->getName();
            }
            asort($choices);
            $options['choices'] = $choices;
        }

        $options['constraints'] = $this->getValidationConstraint();

        return $options;
    }

    public function getValidationConstraint ()
    {
        $validation_constraint = array();
        if ('number' == $this->getType()) {
            if (0 < $this->getMaximum()) {
                $validation_constraint[] = new LessThanOrEqual (array(
                    'message' => 'entity.field.number.lessthanorequal', // {{ compared_value }}
                    'value' => $this->getMaximum()
                ));
            }
            if (0 < $this->getMinimum()) {
                $validation_constraint[] = new GreaterThanOrEqual(array(
                    'message' => 'entity.field.number.greaterthanorequal', // {{ compared_value }}
                    'value' => $this->getMinimum()
                ));
            }
        } elseif ('text' == $this->getType ()) {
            if (0 < $this->getMaximum()) {
                $validation_constraint[] = new Length(array(
                    'min' => $this->getMinimum() > 0 ? $this->getMinimum() : 0,
                    'max' => $this->getMaximum() > 0 ? $this->getMaximum() : 0,
                    'minMessage' => 'entity.field.text.minMessage', // {{ limit }}
                    'maxMessage' => 'entity.field.text.maxMessage',
                    'exactMessage' => 'entity.field.text.exactMessage',
                ));
            }
        } elseif ('date' == $this->getType()) {

        }

        return $validation_constraint;
    }

// ... 
```

所有这些代码实际上都有效。

有了这个，你就有了一个解决方案来动态生成一个带有约束的表单。

# c# - C#如何在从控制台读取后对数组的所有int元素进行异或？

> ID：13613229
> 
> 赞同：5
> 
> 时间：2012-11-28T19:48:26.623
> 
> 标签：c#, arrays, console, xor

我的真正目的是获取唯一出现奇数次的数组元素。所以我发现它可以通过对数组的所有元素进行异或来完成。像这样：

```
int[] arr = { 3, 4, 7, 7, 0, 4, 0, 7, 3 };
Console.WriteLine(arr[0] ^ arr[1] ^ arr[2] ^ arr[3] ^ arr[4] ^ arr[5] ^ arr[6] ^ arr[7] ^ arr[8]); 
```

然而问题是数组没有给出，而是从控制台读取，因此我不知道如何在输入元素后对元素进行异或。到目前为止我可以制定的代码是：

编辑：感谢您的帮助，我设法正确完成了代码。

```
static void Main()
        {                
        int N = int.Parse(Console.ReadLine());
        long[] rectArray = new long[N];           

        for (int i = 0; i < N; i++)
        {
            rectArray[i] = long.Parse(Console.ReadLine());
        }
        long initial = rectArray[0]; 
        for (int i = 1; i < rectArray.Length; ++i)
        {
            initial ^= rectArray[i];
        }            
        Console.WriteLine(initial);
        }
} 
```

PS我是真正的菜鸟，所以请耐心等待！:)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-28T19:52:56.700

与 Esailija 的答案相同，但使用`foreach`- 利用以下事实：`0 ^ x == x`对于 的所有值`x`：

```
int current = 0;
foreach (int value in array)
{
    current ^= value;
}
Console.WriteLine(current); 
```

编辑：正如评论中所指出的，LINQ 的`Aggregate`方法也会这样做 - 因为我们很高兴在第一步中使用前两个值，所以我们甚至不需要提供种子：

```
int xor = array.Aggregate((x, y) => x ^ y); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-28T19:51:10.510

你可以写一个循环：

```
int initial = 0;
for( int i = 0; i < arr.Length; ++i ) {
    initial ^= arr[i];
}
Console.WriteLine( initial ); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-28T19:53:56.000

```
for (int i = 0; i < rectArray.Length; i++)
{                      
    sum ^= rectArray[i];
} 
```

# winapi - DLL 不能在可执行文件中使用地址

> ID：13613232
> 
> 赞同：0
> 
> 时间：2012-11-28T19:48:47.387
> 
> 标签：winapi, pointers, dll, assembly, win64

我正在用 64 位 NASM 编写控制台应用程序，一切都很好，直到我将部分可执行文件移动到我创建的 DLL 中。这是我在程序集级别对 DLL 的第一次实验。我无法在我的 .exe 的数据部分中传递字符串的地址...当我这样做时，该函数失败。但是，如果我在我的 dll 中创建一个 .data 部分，定义字符串，并将其在 RCX 中传递给 SetConsoleTitleA，它就会像魅力一样运行。

我没有传递正确的地址，还是 DLL 无法进入我的 EXE 的数据部分？什么是“优雅”的解决方案？

如果您希望我粘贴代码，请告诉我。

编辑：DLL [http://pastebin.com/jpdsihsC](http://pastebin.com/jpdsihsC) EXE [http://pastebin.com/KbMTh9Xa](http://pastebin.com/KbMTh9Xa)

--ignore inc.mac，用于正向开发

# amazon-web-services - CloudWatch 中的自定义指标

> ID：13613233
> 
> 赞同：4
> 
> 时间：2012-11-28T19:49:04.103
> 
> 标签：amazon-web-services, amazon-cloudwatch

对于 CloudWatch 中的每个自定义指标，我每分钟可以发送多少个请求？

ps 我知道标准指标是每分钟 1 个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T02:49:42.030

以下是Amazon [CloudWatch 开发人员指南中](http://docs.amazonwebservices.com/AmazonCloudWatch/latest/DeveloperGuide/publishingMetrics.html)*发布单个数据点*部分的引述：

> 尽管您可以发布具有千分之一秒粒度的数据点，但 Amazon CloudWatch 将数据聚合到最小粒度为一分钟

# php - 我可以使用 PHP define() 函数来更改多个 die(mysql_error()) 输出吗？

> ID：13613237
> 
> 赞同：0
> 
> 时间：2012-11-28T19:49:08.190
> 
> 标签：php, mysql

我有一个用 PHP 编写的 Web 应用程序。我使用一个类来处理这个应用程序所做的几乎所有事情。我在类之前预定义了一些东西，例如数据库名称。我希望的是我可以为 mysql_error() 设置一个定义。

因此，当我运行 SQL 查询并添加 die() 错误时，我希望它输出“发生错误！” 如果应用程序在生产环境中运行，但是我可以将 1 定义从 define("DIEOUTPUT", "An Error Has Occurred!") 更改为 define("DIEOUTPUT", mysql_error());

我的 die() 函数看起来像： die(DIEOUTPUT);

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:52:36.173

不，那是不可能的。

相反，您可以创建自己的版本`die()`：

```
function my_die(){
    if($is_production_environement) {
        die("An error has occured");
    }
    else{
        var_dump(mysql_error());
    }
} 
```

**注意**：

*   您应该考虑从`mysql_*`函数转移到 PDO 或 mysqli。
*   在真实网页上使用`die()`（或`my_die()`就此而言）不是太用户友好，请考虑替代方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T19:54:46.143

两件事情 ：

*   你不应该使用 mysql_ 函数，更喜欢 mysqli_ 函数，它们更安全、更高效并且可以访问新功能
*   php 中的常量必须是静态定义的。您不能将 define 与函数调用一起使用。

使用 mysqli 的代码应如下所示：

```
mysqli_query('your query') or exit($isProduction?"An error occured":mysqli_error()); 
```

根据您使用常量的愿望，您可以使用

```
define(PRODUCTION,true);//false if dev
mysqli_query('your query') or exit(PRODUCTION?"An error occured":mysqli_error()); 
```

# jquery - 隐藏列表中未选择的项目

> ID：13613238
> 
> 赞同：0
> 
> 时间：2012-11-28T19:49:11.227
> 
> 标签：jquery

我有一个由 SharePoint 控件生成的项目列表，因此我无法控制标记。

我唯一需要做的就是一个`<li>`“选择”类。默认情况下会显示所有其他嵌套项，但我只想显示来自父项的踪迹。对于属于该行的任何节点，我想显示兄弟姐妹而不是后代。

请参阅此 JSFiddle 了解我需要做什么... [http://jsfiddle.net/QLbAS/4/](http://jsfiddle.net/QLbAS/4/)

谢谢

```
//logic i think should be 
// get all items in the hierarchy to this particular item
// for each item in step above check to see if there are sibling nested lists
// if yes then hide the items 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:08:55.560

这对你有用吗：

```
$(function() {
    $("li").hide();
    $("li.selected").parents("li").andSelf().each(function(index,elem) {
        $(this).siblings().andSelf().show();
    });
}); 
```

[小提琴](http://jsfiddle.net/QLbAS/9/)

# iphone - 快速移动后偏航角漂移

> ID：13613239
> 
> 赞同：5
> 
> 时间：2012-11-28T19:49:13.253
> 
> 标签：iphone, ios6, gyroscope, core-motion

在我目前的项目中，我遇到了关于 Core Motion 的 CMAttitude 提供的四元数的麻烦。我将 iPhone 5 (iOS 6.0.1) 放在了一个明确的起始位置。然后我开始像在快节奏游戏中一样快速移动设备。当我在 10-30 秒后返回起始位置时，报告的偏航角与起始位置相差 10-20 度（大部分时间≈11°）。

我使用旧的（遗憾的是不再可用）Core Motion Teapot 样本来验证效果。用于测井的欧拉角直接从 CMAttitude 读取：

![起始位置](../Images/e0bf4d454febdb5455604590f0bee39c.png) ![15秒后同一个地方](../Images/4fe2cfff79b4f21fbf4249e98c7cecb4.png)

```
 NSLog(@"pitch: %f, roll: %f, yaw: %f",  attitude.pitch * 180 / M_PI, attitude.roll * 180 / M_PI, attitude.yaw * 180 / M_PI); 
```

我在不同工厂在不同时间生产的两种不同的 iPhone 5 设备上发现了这一点。但真正奇怪的是，我**运行 iOS 5.1.1 的 iPhone 4 运行正常**。在我看来，这是一个 iOS 错误，我已经提交了错误报告，但另一方面，我很难想象没有人偶然发现它。我怀疑这可能与重新设计的 Core Motion API 有关。从版本 5 开始，磁力计（罗盘）也被考虑用于传感器融合。控制台显示来自 location 的偏差估计被提供给 CoreMotion：

```
locationd[41] <Notice>: GYTT inserted: bias,-0.196419,1.749323,-1.828088,variance,0.002644,0.004651,0.002527,temperature,31.554688 
```

我的问题：使用 Device Motion 时是否有机会阻止磁力计读数？我尝试停用定位服务，但它不影响 Core Motion。如果不可能，替代/解决方法是什么，基于加速度计的重力估计？

PS：由于我们正在处理基于四元数的模型，这与 Gimbal Lock**无关**

**编辑：** 在做了更多的测量之后，似乎很明显只有偏航受到影响。无论起始位置如何，偏航都在漂移时，俯仰和横滚显示偏差在公差范围内 (<= 1°)。`CMDeviceMotion.gravity`看起来也很干净。

**编辑 (2)：** 我可以使用附加到最新 XCode 版本的 MotionGraphs 示例重现问题。偏航图可重复地偏离原点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T20:57:23.207

不是最终的解决方案，但至少是我自己的问题的解决方法（我将其保留为未回答以邀请您）。事实证明，至少`DeviceMotion.gravity`不受该错误的影响。所以我决定重新设计这个非常简单的运动检测部分，并`arcsin (gravity.x/||gravity||)`用于在倾斜设备时将主要玩家角色移动到一边。

这绝对是第二好的解决方案，因为它破坏了四元数中包含的完整旋转状态的信息。出于战略考虑，我决定这样做：

1.  我认为大多数开发人员使用重力矢量进行倾斜运动检测，而不是`CMAttitude.quaternion`因为大多数人对四元数数学不感兴趣 ;-) 因此，任何与重力矢量相关的未来错误都可能在 beta 阶段得到修复，因为大量的用户。
2.  如果它是软件错误并且与硬件问题无关，我假设，如果错误将尽快修复，那么仍然有许多设备可能由于某种原因而无法更新。因此，潜在的未来客户遇到麻烦的风险很小，但 > 0。因此，次优的解决方案有时可能是最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:37:13.987

我在自己的代码中做了类似的事情，发现了相同的 z 轴旋转漂移（偏航）。我应用了平衡过滤器。在每个运动管理器时间间隔，我抓取当前四元数（z 分量），然后在计算后将其保存为 oldZ，以用于下一组计算。我的过滤器只是平衡了新的 z 值和它之前的 z 值，防止它移动得太快。根据您的硬件和程序中的精确容差，您可以通过这种方式很好地管理漂移。您会看到陀螺仪略有漂移，但随后随着过滤器的继续作用开始被纠正。我的过滤器看起来像这样，可以防止超过 0.5 度的“杂散”：

filtZ = 0.65 * oldZ + 0.35 * z；

0.65 和 0.35 值是通过实验确定的，我建议您在有时间的时候使用它们。输出仍将按 0-1 缩放，然后可以以您一直在做的相同方式使用（或者如果您必须始终保留所有 4 个维度，则重新引入四元数）。

# javascript - 创建 dblclick-to-select 以及放大 d3.js 气泡？

> ID：13613243
> 
> 赞同：0
> 
> 时间：2012-11-28T19:49:23.753
> 
> 标签：javascript, events, svg, zooming, d3.js

从 d3.js 气泡示例中，我添加了缩放 + 平移功能。现在我想让用户在桌面和触摸屏上选择气泡。dblclick 和 touchstart 似乎对此是一致的。

我知道 d3 提供了一种从 .zoom 取消事件的方法，但随后它被禁用并且不执行任何操作。

```
.call(d3.behavior.zoom().on("zoom", zoom)).on("dblclick", null); 
```

链接：[http ://bl.ocks.org/4163494](http://bl.ocks.org/4163494)

我有上面的作品，但你会注意到 dblclick 一开始不会缩放，但如果你引起另一个缩放事件，它就会显示出来。我正在寻找正确的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T06:12:10.150

为了修复，我离开了

```
.on("zoom", redraw) 
```

函数，但将 dblclick 向下移动到圆形、文本和 tspan 元素。从那里他们调用一个函数，该函数首先停止传播，然后选择圆。

[http://jsfiddle.net/nnzS9/](http://jsfiddle.net/nnzS9/)

# iphone - 用于推送通知的 Apple SSL 证书 x 常规 SSL 证书

> ID：13613244
> 
> 赞同：1
> 
> 时间：2012-11-28T19:49:29.640
> 
> 标签：iphone, ios, ipad, ssl

我正在为我的一个应用程序实现一个推送通知系统，因此我正在遵循[本](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)教程并为此生成一个 SSL 证书。

我的这个应用程序还涉及应用程序和服务器之间的一些数据交换，我希望它受到 SSL 保护，我想知道从威瑞信或其他类似公司获得 SSL 证书。

我的问题是：这个 SSL 证书是为推送常规 SSL 证书而创建的，因此可以使用它来建立到服务器的 https 连接（并节省几百美元来订购第三方证书）？我对SSL证书了解不多，但我希望它可以用于...

这将是惊人的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T21:51:36.260

由于每个证书都与特定域相关联，因此我不确定这将如何工作。有通配符证书的概念，但我仍然认为它们必须用于同一个域。

就您而言，听起来您将拥有 Apple 推送证书，该证书可验证您的服务器与 Apple 推送通知服务器之间的连接。另一个证书是验证/保护您的 iOS 应用程序和服务器之间的连接。这两个都分配了不同的域（gateway.sandbox.push.apple.com 与 yourserver.com）。

根据您的 iOS 应用程序的结构，您确实有一种选择是在您的 iOS 应用程序和服务器之间使用自签名证书。我猜最终用户无论如何都不会看到证书。这可能是在决定第三方证书之前为您省钱的一种方法。

# jquery - jquery中两个函数同步运行

> ID：13613247
> 
> 赞同：0
> 
> 时间：2012-11-28T19:49:41.227
> 
> 标签：jquery, image, function, setinterval, synchronize

我写了一个脚本来模拟图像的淡入淡出并导致文本的变化。这是现在的代码：

```
var teller = 0;
var html = new Array();
var link = new Array();
html[0] = "Some text";
link[0] = "link1.html";
html[1] = "Some other text";
link[1] = "link2.html";
function beeldwissel() {
    tekstwissel();
    var $actief = $('#overvloeier IMG.actief');
    if ( $actief.length == 0 ) $actief = $('#overvloeier IMG:last');
    var $next =  $actief.next().length ? $actief.next() : $('#overvloeier IMG:first');
    $actief.addClass('laatst-actief');
    $next.css({opacity: 0.0})
        .addClass('actief')
        .animate({opacity: 1.0}, 1000, function() {
            $actief.removeClass('actief laatst-actief');});
        }

$(function() {setInterval( "beeldwissel()", 5000 );}); // 5000 = pauze van 5 seconden

function tekstwissel() {
    teller++;
    if (teller >= html.length) {
        teller = 0;
    }   
    document.getElementById('tel').value = teller;
    document.getElementById('tekst').innerHTML = html[teller];
}

function doLink() {
    var tel = document.getElementById('tel').value;
    window.open(link[tel],'_blank');
} 
```

如果我改变焦点而不是文本的变化和图像的变化不再同步......

我必须改变什么来避免这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T00:16:44.303

如果没有异步，这两个函数不能同时运行。您可以做的最好的事情是使用两个超时时间设置非常短：

```
setTimeout(function() { /* code... */ },1);
setTimeout(function() { /* code... */ },1); 
```

这样两个函数同时执行。

但是，在您的情况下，如果您只使用一个函数或让第一个函数调用另一个函数，会不会更简单：

```
function trigger() {
     // Do image fading here...
     // Text manipulation here...
} 
```

# silverlight - 当文本框在不透明度为 0.5 的边框内时，如何将其不透明度设置为 1？

> ID：13613249
> 
> 赞同：0
> 
> 时间：2012-11-28T19:49:46.950
> 
> 标签：silverlight, xaml

我有以下 xaml：

```
<Border x:Name="baseBorder" Grid.Row="0" Grid.RowSpan="200" Canvas.ZIndex="1" Opacity="0.5" Background="Gray">
    <Border x:Name="interiorBorder" Background="White" Height="200" Width="450" Opacity="1">
        <TextBlock x:Name="txtMessage" HorizontalAlignment="Center" Width="400" TextAlignment="Center" TextWrapping="Wrap" VerticalAlignment="Center" FontSize="20" FontWeight="Bold" Foreground="Black" >
    </Border>
</Border> 
```

我希望内部边框的不透明度为 1，同时保持基本边框的不透明度为 0.5。

上面的 xaml 不起作用，我在两个对象中都得到 0.5 的不透明度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:37:51.180

尝试让interiorBorder 成为baseBorder 的兄弟而不是孩子，也许是这样的。

```
<Border x:Name="baseBorder" Grid.Row="0" Grid.RowSpan="200" Canvas.ZIndex="1" Opacity="0.5" />
<Border x:Name="interiorBorder" Grid.Row="0" Grid.RowSpan="200" Canvas.ZIndex="1" Opacity="1">
    <TextBlock x:Name="txtMessage" />
</Border> 
```

我想您还想在interiorBorder 上设置Margin，这样您仍然可以看到baseBorder。

# c# - 远程桌面服务器应用程序

> ID：13613250
> 
> 赞同：0
> 
> 时间：2012-11-28T19:49:56.157
> 
> 标签：c#, remote-desktop

嗨，我想创建基于 ac# 的远程桌面应用程序，我找到了这个用 java 编写的解决方案（[链接](http://www.codeproject.com/Articles/36065/Java-Remote-Desktop-Administration)）

到目前为止，我创建了一个支持字节传输的基本 TCP 服务器。

Windows 操作系统上的应用程序

1.  服务器监听端口：3380
2.  接收连接 -> 传输 RDP

在linux操作系统中的应用

1.  使用 rdesktop 等基本应用程序进行连接
2.  用于传输文件的 Python 脚本

它是否存在任何可以帮助我完成此类项目的库或任何东西，或者任何人都可以帮助我将 java“RemoteServer.zip”代码转换为 c#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:06:25.630

# build - 使用带有 Waf 的非标准 c 编译器

> ID：13613253
> 
> 赞同：1
> 
> 时间：2012-11-28T19:50:04.790
> 
> 标签：build, waf

我有一个非标准的 c 编译器，例如我们称之为 comp。

如何将它与 Waf 一起使用？

我在所有示例中都看到了这一点：

```
def options(ctx):
    ctx.load('compiler_c')

def configure(ctx):
    ctx.load('compiler_c') 
```

我想加载我自己的编译器 - comp，以便任何构建或任务都将与它相关联？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:17:16.753

最好的选择是定义自己的 c_compiler 工具，例如[waflib/Tools 中的 icc](https://code.google.com/p/waf/source/browse/waflib/Tools/icc.py)或[waflib/extras 中的 c_bgxlc](https://code.google.com/p/waf/source/browse/waflib/extras/c_bgxlc.py)，在 extras 中称为 c_* 的模块将由 load('compiler_c') 自动加载。

# c - 解释这个 gcc 函数的类型化行为

> ID：13613256
> 
> 赞同：2
> 
> 时间：2012-11-28T19:50:18.183
> 
> 标签：c, types, syntax, function-pointers

在我的代码中，我必须使用几个函数作为*lambdas*，例如您应该提供的 to `qsort`。
因此，当我传递 type 的函数时`int`，程序运行良好。但是当我还添加了另一个 type 函数时`double`，出现了错误消息：

> 1.c:44:29：错误：二进制 < 的操作数无效（具有“双 *”和“双”）

从线：

```
return (*getter)(a) < target 
```

`getter`指针在哪里：

```
double get_sex(struct human* a) { // it's the second function I've passed
    return a->sex;
} 
```

我传递的两个函数之间的唯一区别是第一个是`int`，第二个是`double`。

```
sometype somefunction (some parameters,
        int *comparator(struct human*, double, double *(struct human*)),
        double *getter(struct human*) ) {
    ....
} 
```

我开始检查它，`sizeof`发现代码以某种方式`(*getter)(*a)`返回 4 个字节而不是 8 个字节，所以它必须是指针而不是双精度。这就是我收到该错误消息的原因。
我去[维基百科](http://en.wikipedia.org/wiki/Function_pointer)找了个例子，发现了额外的`()`. 我已经添加了它们，现在它返回 8 个字节并且工作正常。

```
 double (*getter)(struct human*) ) { 
```

所以问题是：**为什么我要在周围加括号`getter`而不是在周围加括号`comparator`？是函数返回`double`而不是返回的原因`int`吗？！**
这是我从未听说过的语法细节。

（我使用在我的 Windows 上已经安装的编译器——来自 Perl 解释器 Strawberry）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:59:40.023

在这个表达式中：

```
int myfunc( double *getter(struct human*) ); 
```

...`getter`具有*函数类型*（函数类型返回指向双精度的指针）。在此期间：

```
int myfunc( double (*getter)(struct human*) ); 
```

...它具有*函数指针类型*（指向返回双精度的函数类型的指针）。

函数类型和函数指针类型的工作方式*基本*相同，因为在大多数情况下，函数类型几乎立即衰减为函数指针类型。我相信这就是标准在这里所说的：（C99，6.3.2.1/4）：

> 函数指示符是具有函数类型的表达式。除非它是 sizeof 运算符或一元 & 运算符的操作数，否则类型为“函数返回类型”的函数指示符将转换为类型为“指向函数返回类型的指针”的表达式。

所以，你的表达：

```
return (*getter)(a) < target; 
```

...根据标准，从函数类型衰减`getter`为函数指针类型（类型`double * (*)(struct human*)`），尽管您想要`double (*)(struct human*)`.

将函数传递给 后，您应该会收到警告，`somefunction`说明它们的类型不兼容，例如：

> 警告：从不兼容的指针类型传递“somefunction”的参数 2

另外，请参阅此[答案以获取详细信息](https://stackoverflow.com/a/13258806/492901)，[以及此有趣的](https://stackoverflow.com/a/13242329/492901)答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T20:32:58.960

你的问题来自于：

```
double *getter(struct human*) 
```

隐式转换为：

```
double *(*getter)(struct human*) 
```

这就是为什么你会出错，因为你无法比较`(double *)`和`double`

您没有一些问题，`int`因为您的指针`(int *)`被强制转换`int`并且可以进行比较。但是，您的编译器应该警告您从指针到整数的隐式转换。

这里的问题是，我从未见过可以以这种方式声明*函数指针*参数。我试图写一段代码，显然它有效。但是，这可能是 GCC 的一些非标准行为。定义函数指针的正确方法是使用括号。IE

```
double (*getter)(struct human*)  /* 'getter' is a pointer to function taking
                                    struct human and returning double */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T20:30:44.697

您没有提供所有代码，所以我只是猜测您正在做类似的事情：

```
if (comparator(h, val, getter)) { ... } 
```

其中比较器包括：

```
return getter(h) < val; 
```

或类似的东西。

这里的关键是 getter 的结果被 operator 使用`<`。另一方面，比较器的结果被*转换为布尔值*（嗯，不是真的：这是 C。但这是相同的想法。）您可以将任何指针隐式转换为布尔值（即整数），没有提出任何警告。

所以会发生什么：

1.  比较器返回一个`int`，但是

2.  调用者期待一个`int*`. 不过没关系；指针和整数的返回方式相同。

3.  调用者现在想像使用`int*`一样使用`int`，这也可以。

所以没有错误。

此外，意外转换和隐式转换保留了返回值的零性，因此作为奖励，您会得到正确的答案。

# osgi - 在 OSGI 环境中注册 Restlet 转换器

> ID：13613257
> 
> 赞同：1
> 
> 时间：2012-11-28T19:50:24.080
> 
> 标签：osgi, restlet, restlet-2.0

我们在 OSGi 环境 (Equinox) 中将 Restlet 2.1 作为包运行（即，不作为包中的库）。问题是 Restlet 引擎没有检测到由 Restlet 扩展提供的帮助程序（如转换器）。具体来说，`EngineClassLoader#getResources()`调用不会返回任何结果。这些扩展也部署为目标平台中的 OSGi 包。

自动转换器注册实际上应该在 OSGi 环境中工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:44:36.790

事实上，Restlet 支持这样的功能要归功于专用的激活器（请参阅包 org.restlet.engine.internal 中的 Activator 类）。

这个激活器自省包以找出以下内容：

*   与注册服务器对应的服务器
*   与注册客户端对应的服务器
*   与注册客户端对应的身份验证器
*   转换器

请注意，要使用此功能，我们必须使用 Restlet 的 OSGi 版本，因为它是唯一具有 org.restlet 包的 MANIFEST 文件并指定了激活器类的文件。否则你不必关心捆绑加载顺序......

希望它可以帮助你。蒂埃里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T09:34:15.873

除非 Restlet-bundle 显式地导入包含扩展的包（我怀疑它确实如此，而且它不应该），否则它将无法加载它们，因为包具有隔离的类空间。

一种可能的解决方案是将扩展作为附加到 Restlet 捆绑包的[片段提供。](http://wiki.osgi.org/wiki/Fragment)因此，如果你让它使用 bundle-classloader （[文档](http://www.restlet.org/documentation/2.1/android/engine/org/restlet/engine/util/EngineClassLoader.html)说这可以通过[设置`Engine`s 类加载器](http://www.restlet.org/documentation/2.1/android/engine/org/restlet/engine/Engine.html#setClassLoader%28java.lang.ClassLoader%29)来完成），它将能够从片段中加载类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:06:57.487

事实上，它对 OSGi 不太适用，因为它取决于查看整个类空间的能力。

在 OSGi 中执行此操作的方法是将服务注册表用于扩展，但这仅适用于 OSGi 感知库。

有*一些*帮助：在最近发布的[OSGi 5（服务加载器中介）](http://blog.osgi.org/2012/06/core-release-5-and-enterprise-release-5.html)中，将支持将 META-INF/服务（我不知道 Restlet 是否使用这些）“桥接”到 OSGi 服务上，所以'legacy' 库应该在 OSGi 中运行良好。

Apache Aries 中有一个名为[Spi-Fly](http://aries.apache.org/modules/spi-fly.html)的实现。不久前我简单地看了看它。它可能对你有用，它可能不会。

# silverlight - WP7 Silverlight/XNA 拆分

> ID：13613263
> 
> 赞同：2
> 
> 时间：2012-11-28T19:50:39.413
> 
> 标签：silverlight, windows-phone-7, xna

我想制作一个具有 Silverlight 菜单的应用程序，但该应用程序的游戏部分是 XNA。我正在尝试使用[此示例游戏](http://mobile.tutsplus.com/tutorials/windows/introduction-to-xna-on-windows-phone-7/)中的代码和在 Silverlight 中进行 XNA 渲染的方法[来](http://msdn.microsoft.com/en-us/library/hh221583.aspx)使 Silverlight/XNA 拆分工作。结合这两个教程，我的源代码如下所示：

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Input.Touch;
using Microsoft.Xna.Framework.Media;
using Microsoft.Phone.Controls;
using System.Windows.Navigation;

namespace FYP
{
    public partial class GamePage : PhoneApplicationPage
    {
        GameTimer timer;
        SpriteBatch spriteBatch;
        Texture2D ballTexture;
        IList<Ball> balls = new List<Ball>();
        bool touching = false;

        public GamePage(ContentManager contentManager)
        {
            InitializeComponent();

            //base.Initialize();

            // Create a timer for this page
            timer = new GameTimer();
            timer.UpdateInterval = TimeSpan.FromTicks(333333);
            //timer.Update += OnUpdate;
            //timer.Draw += OnDraw;

            // TODO: use this.Content to load your game content here
            ballTexture = contentManager.Load<Texture2D>("Ball");
        }

        protected override void OnNavigatedTo(NavigationEventArgs e)
        {
            base.OnNavigatedTo(e);

            // Set the sharing mode of the graphics device to turn on XNA rendering
            SharedGraphicsDeviceManager.Current.GraphicsDevice.SetSharingMode(true);

            timer.Start();

            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(SharedGraphicsDeviceManager.Current.GraphicsDevice);
        }

        protected override void OnNavigatedFrom(NavigationEventArgs e)
        {
            base.OnNavigatedFrom(e);

            // Set the sharing mode of the graphics device to turn off XNA rendering
            SharedGraphicsDeviceManager.Current.GraphicsDevice.SetSharingMode(false);

            // Stop the timer
            timer.Stop();
        }

        private void OnUpdate(GameTime gameTime)
        {
            // Allows the game to exit
            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
                //this.Exit();

            // TODO: Add your update logic here

            //base.Update(gameTime);

            HandleTouches();
            UpdateBalls();
        }

        private void OnDraw(GameTime gameTime)
        {
            SharedGraphicsDeviceManager.Current.GraphicsDevice.Clear(Microsoft.Xna.Framework.Color.White);

            // TODO: Add your drawing code here
            foreach (Ball ball in balls)
            {
                ball.Draw(spriteBatch);
            }

            //base.Draw(gameTime);
        }

        private void HandleTouches()
        {
            TouchCollection touches = TouchPanel.GetState();
            if (!touching && touches.Count > 0)
            {
                touching = true;
                Random random = new Random(DateTime.Now.Millisecond);
                Color ballColor = new Color(random.Next(255), random.Next(255), random.Next(255));
                Vector2 velocity = new Vector2((random.NextDouble() > .5 ? -1 : 1) * random.Next(9), (random.NextDouble() > .5 ? -1 : 1) * random.Next(9)) + Vector2.UnitX + Vector2.UnitY;
                //Vector2 center = new Vector2((float)SharedGraphicsDeviceManager.Current.GraphicsDevice.Viewport.Width / 2, (float)SharedGraphicsDeviceManager.Current.GraphicsDevice.Height / 2);
                Vector2 center = new Vector2((float)SharedGraphicsDeviceManager.Current.GraphicsDevice.Viewport.Width / 2, 200);
                float radius = 25f * (float)random.NextDouble() + 5f;
                balls.Add(new Ball(this, ballColor, ballTexture, center, velocity, radius));
            }
            else if (touches.Count == 0)
            {
                touching = false;
            }
        }

        private void UpdateBalls()
        {
            foreach (Ball ball in balls)
            {
                ball.Update();
            }
        }
    }
} 
```

我不明白 base 是如何工作的，我不得不注释掉 base.initialize、更新和绘制但是 base.OnNavigatedFrom 有效。

另外，我应该能够让我的代码在理论上工作吗？我发现它非常复杂，尽管阅读有关 XNA/Silverlight 的信息是可能的，但我找不到任何人们成功地将 XNA 和 Silverlight 组合到同一个应用程序中的源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T06:06:07.630

这些视频将帮助您了解 XNA 和 SilverLight/XNA 组合平台

[http://channel9.msdn.com/Series/Mango-Jump-Start/Mango-Jump-Start-11a-XNA-for-Windows-Phone--Part-1](http://channel9.msdn.com/Series/Mango-Jump-Start/Mango-Jump-Start-11a-XNA-for-Windows-Phone--Part-1)

[http://channel9.msdn.com/Series/Mango-Jump-Start/Mango-Jump-Start-11b-XNA-for-Windows-Phone--Part-2](http://channel9.msdn.com/Series/Mango-Jump-Start/Mango-Jump-Start-11b-XNA-for-Windows-Phone--Part-2)

理论上 XNA 和 SilverLight XNA Combined 平台几乎是一样的，只是点点滴滴不同，你甚至可以要求 XNA 渲染一些 SilverLight 控件，这样可以更容易地处理你游戏中的一些按钮事件。

希望这可以帮助

# c++ - VC11 中的 wchar 和 stdout

> ID：13613265
> 
> 赞同：3
> 
> 时间：2012-11-28T19:50:58.730
> 
> 标签：c++, visual-studio-2012

我发现了在 Visual Studio 2012 中输出宽字符的一个奇怪问题，我已将其缩小到以下代码。

```
#include <cstdio>
int main()
{
  fputws(L"Hello World\n", stdout); // Throws Access Violation exception
} 
```

当使用 Visual C++ 2012 编译它时，它会在`fputws`.

我用来编译的是 CLI 版本，只是为了排除 IDE 中的任何设置。我正在打开 Visual Studio 命令提示符并使用以下内容：

```
cl test.cpp 
```

当使用 Visual Studio 2008 或 Visual Studio 2010 时，它运行良好，写出“Hello World”。

但是在使用 Visual Studio 2012 时，它会因上述错误而崩溃。

我很难相信这是一个编译器问题，而是在不同版本的 C++ 之间发生了变化。

另一个（有趣）的事情是，如果我`char`先输出一个正常的，就像下面的代码片段一样，它工作得很好。所以我认为这是未初始化流的问题？

```
#include <cstdio>
int main()
{
  fputs("", stdout);
  fputws(L"Hello World\n", stdout); // Now this works.
} 
```

有人有什么想法吗？

编辑：

以下类似的函数在 VS2012 中运行良好：

```
std::wcout << L"Hello world" << std::endl;
wprintf(L"Hello world\n");
_putws(L"Hello\n", stdout);
putwchar(L'H'); 
```

编辑 2：刚刚向微软提交了[错误报告。](https://connect.microsoft.com/VisualStudio/feedback/details/772585/fputws-yields-access-violation)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:01:57.940

我在 RTM VS2012 上遇到了这个问题，但在 VS2012 Update 1 上没有。在问题系统上安装 Update 1 后，错误消失了。感谢 Mats 报告此事。

# objective-c - UIApplication sendEvent 无法与 popViewControllerAnimated 一起使用

> ID：13613266
> 
> 赞同：0
> 
> 时间：2012-11-28T19:51:00.087
> 
> 标签：objective-c, ios, events, action, uiapplication

我正在尝试从导航控制器中弹出当前视图控制器。我想从一个隐藏在视图层次结构中很远的子视图中执行此操作。在我的 UIView 子类中，我有一个方法：

```
- (void)back
{
    NSLog(@"View should pop now...");
    [[UIApplication sharedApplication] sendAction:@selector(popViewControllerAnimated) 
                                               to:nil 
                                             from:self 
                                         forEvent:nil];
} 
```

但这不起作用，也不会引发任何错误。这里发生了什么？为什么该操作没有像[文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)中所说的那样在响应者链上进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:46:02.783

我建议您为此使用通知中心。然后视图层次结构无关紧要。

或者您可以将视图控制器作为目标添加到按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T21:56:16.840

忘记添加冒号：

```
@selector(popViewControllerAnimated:) 
```

尽管如此，这种行为还是非常有问题的。有时过渡是动画的，有时不是，我无法发送 popViewControllerAnimated 的 BOOL 参数。

# r - 如何修复 R 中“输入中没有可用行”的错误？

> ID：13613270
> 
> 赞同：14
> 
> 时间：2012-11-28T19:51:15.840
> 
> 标签：r, url

我需要做的是从数百个链接中读取数据，其中一些链接不包含数据，因此，如这里的代码：

```
urls <-paste0("http://somelink.php?station=",station, "&start=", Year, "01-01&etc")
myData <- lapply(urls, read.table, header = TRUE, sep = '|') 
```

弹出一个错误说“输入中没有可用的行”，我尝试使用“try”，但同样的错误，请帮助，谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-28T19:57:31.837

以下是 2 种可能的解决方案（未经测试，因为您的示例不可重现）：

使用`try`：

```
myData <- lapply(urls, function(x) {
  tmp <- try(read.table(x, header = TRUE, sep = '|'))
  if (!inherits(tmp, 'try-error')) tmp
}) 
```

使用`tryCatch`：

```
myData <- lapply(urls, function(x) {
  tryCatch(read.table(x, header = TRUE, sep = '|'), error=function(e) NULL)
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:32:56.010

这有帮助吗？

```
 dims <- sapply(myData, dim)[2,]
  bad_Ones <- myData[dims==1]
  good_Ones <- myData[dims>1] 
```

如果`myData`仍然从站页面抓取一些东西，上面的代码应该将`myData`列表分成两个单独的组。 `good_Ones`将是您想要使用的列表。（当然，假设以上是准确的）

# php - 使用 Apache mod_rewrite 时，标签中 href 属性的正确形式是什么？

> ID：13613279
> 
> 赞同：0
> 
> 时间：2012-11-28T19:51:36.297
> 
> 标签：php, apache, .htaccess, mod-rewrite, href

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:04:50.013

您的 href 属性没有正确的形式，每种形式的行为方式不同：

```
<a href="products">Products</a> 
```

以上内容将相对于您当前所在的页面进行，因此可能是`domain.com/products`但可能是`domain.com/shop/products`

您最好在开头使用 a 直接从根目录使用链接`/`，例如：

```
<a href="/products">Products</a> 
```

会转到（请注意url 末尾`domain.com/products`缺少 a ，这将使其不适用于您当前的 htaccess 规则）`/`

要同时进行`/products`并`/products/`转到正确的位置，请将您的 htaccess 规则更改为：

```
RewriteRule ^([^/]*)/?$ /index.php?page=$1 
```

`?`将使前面的字符可选，所以在`/`这种情况下。

# asp.net-mvc - 淘汰js引导组合框自定义绑定

> ID：13613280
> 
> 赞同：0
> 
> 时间：2012-11-28T19:51:39.287
> 
> 标签：asp.net-mvc, twitter-bootstrap, knockout.js, custom-binding

我有一个关于将引导组合框插件与淘汰赛（和 mvc）结合使用的问题。

我有一种情况，我在模板中使用了开箱即用的 MVC html 帮助程序，例如 Dropdownlisfor、textboxfor 等。我正在使用 Knockout 将数据集合绑定到模板。mvc html 助手为 DropDownlistfor 助手创建一个“选择”控件。在我想在控件上调用我的引导插件之前，我需要渲染它，以便设置所有必要的验证属性等。我最初使用 afterrender 并在该方法中，我找到了“选择”控件并在其上调用插件。

我们的问题是，我们不想每次在其他地方以类似的方式使用引导组合框控件时都这样做。所以，我一直在研究自定义绑定（我应该首先完成）并且有一个关于如何在我的状态中使用自定义绑定的问题。

我找到了这篇文章，他在其中为引导预输入控件创建了一个自定义绑定。我可以为组合框制作一个类似的。但我只能在控件呈现后调用它。那么，有没有办法让我们指定 KO 只执行自定义绑定“afterrender”而不是立即执行。这样，选择控件被呈现，然后我可以在选择控件上调用自定义绑定中的插件。

这是更多信息。

我有一个使用模板的表

```
<table>
        <tbody data-bind='template: {name: "editorRowTemplate", foreach: rules, afterRender: function(data) {{$root.view.templateRendered(data) } }'>   </tbody>
</table> 
```

我有与此类似的模板

```
<script id="editorRowTemplate" type="text/html">

    <tr class="dataRow" data-bind="attr: { id: 'EditorRow' + $index() }">
        <td>
            <div class="editor-field">
                @Html.KnockOutDropDownListFor(rule => ruleTemplate.ReserveWordId, new List<SelectListItem>(), null,
                                                   new { @class = "combobox", data_bind = "options: $root.ReserveWords, optionsText:'Name', optionsValue:'ReserveWordId', attr : {id: $index(), name: $index()}" }, ((int)this.Model.Prefix).ToString())

                @Html.KnockOutValidationMessageFor(rule => ruleTemplate.ReserveWordId, "*", new { data_bind = "attr : { 'data-valmsg-for': $index()}" }, ((int)this.Model.Prefix).ToString())
            </div>
        </td>
    </tr>
</script> 
```

我有自己的 html 助手（KnockoutDropDownListFor 等），它们生成一个带有指定 KO 绑定的选择控件。

请建议什么是解决它的好方法。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:57:51.673

我不确定我是否完全理解这个问题。但是，您无需担心等待 MVC 助手渲染，因为这将发生在服务器端，而淘汰赛将发生在客户端。

您也可以使用 $(document).ready(function() {...}); 如果你想在做任何事情之前确保 DOM 已经加载。

# java - CORBA 客户端停止或挂起且没有错误

> ID：13613282
> 
> 赞同：0
> 
> 时间：2012-11-28T19:51:44.227
> 
> 标签：java, corba

尽管我成功使用了侦听器对象，但当我使用下面具有类对象“bd”作为参数的方法时，我的客户端停止工作。“标记为粗体”请注意，当我尝试使用另一种方法时，例如任何 pramater “STring”都能成功运行。

```
import java.util.Properties;
        import org.omg.CORBA.ORB;
        import org.omg.PortableServer.POA;
        import org.omg.PortableServer.POAHelper;
        import org.omg.CosNaming.NameComponent;
        import org.omg.CosNaming.NamingContext;
        import org.omg.CosNaming.NamingContextHelper;

        public class BackupDaemonMain {

            public static void main(String[] args) {
            try {

                    //initialize orb
                    Properties props = System.getProperties();
                    props.put("org.omg.CORBA.ORBInitialPort", "1050");
                    //Replace MyHost with the name of the host on which you are running the server
                    props.put("org.omg.CORBA.ORBInitialHost", "localhost");
                    ORB orb = ORB.init(args, props);
                System.out.println("Initialized ORB");

                    //Instantiate Servant and create reference
                POA rootPOA = POAHelper.narrow(
                orb.resolve_initial_references("RootPOA"));

                    MessageListenerImpl listener  = new MessageListenerImpl();
                    BackupDaemonImpl  bdImpl=new BackupDaemonImpl();
                    // bdImpl.backupDaemonUser("Yarab");
                  rootPOA.activate_object(listener);
                  rootPOA.activate_object(bdImpl);
                   MessageListener ref = MessageListenerHelper.narrow(
                        rootPOA.servant_to_reference(listener));
                        **BackupDaemon bd = BackupDaemonHelper.narrow(
                       rootPOA.servant_to_reference(bdImpl));**
                      System.out.println("After rootPOA.servant_to_reference(bdImpl)); ");

                    //Resolve MessageServer
                 MessageServer msgServer = MessageServerHelper.narrow(
                orb.string_to_object("corbaname:iiop:1.2@localhost:1050#MessageServer"));
            BackupServer bdServer=BackupServerHelper.narrow(
                 orb.string_to_object("corbaname:iiop:1.2@localhost:1050#BackupServer"));
                    //Register listener reference (callback object) with MessageServer
                /* if(bd==null)
                      {
                       System.out.println("Null");
                      }
                      else
                      {
                      System.out.println("Not Null With " + bd.backupDaemonUser());
                      }*/
                    // bd.backupDaemonMacAddress("YYYYYYYYYY");
         System.out.println("Initialized ORB +++++++++++++++++++++++ ");
             msgServer.register(ref); 
         **bdServer.registerBackupDaemon(bd);**
               System.out.println("Initialized ORB +++++++++++++++++++++++ )))))))))");
                    //System.out.println("I am  Here" + 
                    //bd.deleteBackup("00000000000","asdas");//);
                    System.out.println("Initialized ORB +++++++++++++++++++++++ _____________________________");
                    System.out.println("Listener registered with MessageServer With User :- ");
                    System.out.println("Backup Daemon registered with BackupServer With User :- " );

                //Activate rootpoa
                    rootPOA.the_POAManager().activate();

                    //Wait for messages
                    System.out.println("Wait for incoming messages");
                    orb.run();

            } catch (Exception e) {
                e.printStackTrace();
            }
            }
        } 
```

服务器实现是

```
// BackupServerImpl.java

import java.util.Enumeration;
import java.util.Vector;
import org.omg.CosNaming.*;
import org.omg.CosNaming.NamingContextPackage.*;
import org.omg.CORBA.*;
import org.omg.PortableServer.*;
import org.omg.PortableServer.POA;

import java.util.Properties;
 // import util.CORBAAlgorithms;

  public class BackupServerImpl extends BackupServerPOA {
   private ORB orb;

  public void setORB(ORB orb_val){
    orb = orb_val;
  }

  public String sayHello(){
    return "\nHello world !!\n";
  }

  public void shutdown(){
    orb.shutdown(false);
  }
      // This BankServer's list of Banks.
      private Vector myBackups;
   public BackupServerImpl() 
   {
  //super("In Impl");
        System.out.println("\n \t @ Constructor of Server");  

      }

      public BackupServerImpl(String name) {

         // super(name);

          myBackups = new Vector();

      }

      public boolean registerBackupDaemon(BackupDaemon bd) throws InvalidBackupDaemonException
              {

              System.out.println("\n \t Backup Agent Registration With User" + bd.backupDaemonUser());
      return true;
      }

      public boolean unRegisterBackupDaemon(String backupDaemonMacAddress) throws
              InvalidBackupDaemonException {
          System.out.println("Backup Daemon Un-Registration With Mac " + backupDaemonMacAddress);
            return true;   
      }

      public BackupDaemon[] getBackupDeamons() {

          BackupDaemon[] list = new BackupDaemon[myBackups.size()];
          myBackups.copyInto(list);

          Enumeration e = myBackups.elements();
          while (e.hasMoreElements()) {
              ((BackupDaemon)e.nextElement())._duplicate();
          }

          return list;
      }

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:41:46.807

您可能错过了我们网址中的 NameService

```
corbaname:iiop:1.2@localhost:1050/NameService#BackupServer 
```

调用也`bdServer`可能挂在远程站点上......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:42:27.363

您在当前线程上`run`的阻塞方法。`org.omg.CORBA.ORB`您应该在单独的线程中启动它。请参阅[javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/org/omg/CORBA/ORB.html#run%28%29)。像运行你的 ORB

```
Thread orbThread = new Thread("Orb Thread") {

   public void run() {
    orb.run();     
  }
};

orbThread.start(); 
```

# editor - 如何删除 Eclipse 编辑器的默认上下文菜单操作？

> ID：13613284
> 
> 赞同：0
> 
> 时间：2012-11-28T19:51:47.700
> 
> 标签：editor, contextmenu, eclipse-gef

我想从我的自定义 GEF 编辑器中删除（或使其不可见）默认上下文菜单操作。
我有一些我可以查看和运行的自定义操作 (IAction)（使用 createActions()）注册，但是我只想在我的上下文菜单中看到它们。

换句话说 - 有没有办法删除“运行方式”、“调试方式”、“配置文件方式”等......？

![在此处输入图像描述](../Images/8fb89e074e8453069499ceb92c25007c.png)

例如，在上图中，我只想显示“删除”操作。

提前谢谢了... ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:10:55.717

这是因为您在产品中包含了 ide 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T15:24:56.717

我猜你使用这样的代码来添加你的上下文菜单：

```
MenuManager menuManager = new MenuManager();
Menu contextMenu = menuManager.createContextMenu(table);
table.setMenu(contextMenu);
getSite().registerContextMenu(menuManager, selectionProvider); 
```

最后一行很重要。将其替换为

```
getEditorSite().registerContextMenu(menuManager, selectionProvider, false); 
```

并且默认条目将消失。

# php - 对大型多维数组进行排序

> ID：13613286
> 
> 赞同：2
> 
> 时间：2012-11-28T19:51:53.343
> 
> 标签：php, arrays, sorting

我有一个非常大的数组，其中包含以下数据：

```
Array
(
    [2] => Array
        (
            [Berlin] => Array
                (
                    [1] => Array
                        (
                            [0] => stdClass Object
                                (
                                    [name] => Joe
                                    [car_name] => Audi
                                    [car_color] => Black
                                    [sid] => 130 
                                )
                            [1] => stdClass Object
                                (
                                    [name] => Mark
                                    [car_name] => BMW
                                    [car_color] => Red
                                    [sid] => 135
                                )
                        )
                    [0] => Array
                        (
                            [0] => stdClass Object
                                (
                                    [name] => Lucas
                                    [car_name] => Audi
                                    [car_color] => Yellow
                                    [sid] => 168
                                )
                            [1] => stdClass Object
                                (
                                    [name] => Joe
                                    [car_name] => Volkswagen
                                    [car_color] => Black
                                    [sid] => 170 
                                )
                            [2] => stdClass Object
                                (
                                    [name] => Thomas
                                    [car_name] => Ford
                                    [car_color] => Gray
                                    [sid] => 119
                                )
                        )
                )
            [Moscow] => Array
                (
                    [1] => Array
                        (
                            [0] => stdClass Object
                                (
                                    [name] => Matt
                                    [car_name] => Mustang
                                    [car_color] => Black
                                    [sid] => 230 
                                )
                            [1] => stdClass Object
                                (
                                    [name] => Suze
                                    [car_name] => Lada
                                    [car_color] => Red
                                    [sid] => 245
                                )
                        )
                    [0] => Array
                        (
                            [0] => stdClass Object
                                (
                                    [name] => Lucas
                                    [car_name] => Unknown
                                    [car_color] => Brown
                                    [sid] => 374
                                )
                            [1] => stdClass Object
                                (
                                    [name] => Mathew
                                    [car_name] => Volkswagen
                                    [car_color] => Blue
                                    [sid] => 589 
                                )
                            [2] => stdClass Object
                                (
                                    [name] => Thomas
                                    [car_name] => Ford
                                    [car_color] => Light Blue
                                    [sid] => 741
                                )
                        )
                )
        )
) 
```

现在我想这样排序（请阅读这些`//`行）：

```
Array
(
    [2] => Array //from min to max - eg. from 0 to 50
        (
            [Berlin] => Array //alphabetically from A to Z
                (
                    [1] => Array //from min to max eg. from 0 to 1
                        (
                        )
                 )
         )
) 
```

我怎样才能在 PHP 中实现这一点？我希望我足够清楚，请随时在评论中询问更多信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T19:57:03.397

会是这样的：

```
// ksort sorts the keys low to high

ksort($array[2]);

// uksort w/ natsort is a full alphanumeric sorting A-Z0-9
uksort($array[2]['Berlin'], 'natsort');

ksort($array[2]['Berlin'][1]); 
```

关于数组和数组函数的文档：

[http://us3.php.net/manual/en/book.array.php](http://us3.php.net/manual/en/book.array.php)

**功能示例**

这个例子是真正特定于你的例子；但是，如果您的数组结构确实是动态的，则可以创建递归样式函数。

```
$BigArray = array();

//Sorting the initial array index
ksort($BigArray);

foreach($BigArray as $a)
{
    // Sorting Berlin / Moscow here..
    uksort($a, 'natsort');
    foreach($a as $b)
    {
        // Sorting the index inside the cities
        ksort($b);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:14:44.293

最紧凑的方法是使用递归函数。这也将允许您在代码中其他位置的不同维度的数组上重用它。

```
function SortArray($arr) {
    if(!is_array($InnerArray))
        return;
    foreach($arr as $InnerArray) {
        SortArray($InnerArray);
    }
    ksort($arr);
}
SortArray($array); 
```

# javascript - 使用相同 AJAX 函数的多个 AJAX 调用

> ID：13613287
> 
> 赞同：3
> 
> 时间：2012-11-28T19:51:52.230
> 
> 标签：javascript, jquery, ajax

我希望快速连续触发几个 jQuery AJAX 请求，因此响应不会在下一个请求之前出现。但是，我确实想使用成功函数处理这些响应中的每一个。

使用以下代码，前两个响应将被忽略，只有最后一个响应。

```
$('#button').click(function() {
    var num = 3;
    for(var i=0;i<num;i++)
        ajaxCall(i);
}

function ajaxCall(data){
    $.ajax({
        url: '/echo/html/',
        success: function(msg) {
            alert(msg);
        }
    });
} 
```

但是，我正在努力使所有三个警报都显示出来。似乎每次`ajaxCall`调用该函数时，它都使用与上次相同的“对象”，而不是实例化一个新对象，这正是我想要做的。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-28T20:09:12.743

试试这个（使用[延迟对象](http://api.jquery.com/category/deferred-object/)）

```
$('#button').click(function() {
    var num = 3;
    for(var i=0;i<num;i++) {
        ajaxCall(i).done(function(data) 
           { 
             alert(data) 
           }
        );
     }
});

function ajaxCall(data){
    return $.ajax({
        url: '/echo/html/'
    });
} 
```

# angularjs - AngularJS：我需要从 Angular 外部更新服务

> ID：13613288
> 
> 赞同：27
> 
> 时间：2012-11-28T19:51:54.473
> 
> 标签：angularjs

我有一个名为“播放器”的服务，当 Flash 对象完成加载时，我需要更新该服务。

```
mySongPlayer.factory('player', function() {

var isPlayerLoaded = false;
var playerHolder = '';

window.playerReady = function(thePlayer) {
    playerHolder = window.document[thePlayer.id];
    addListeners();
    isPlayerLoaded = true;
}

var flashvars = {
    file:"", 
    autostart:"true",
    skin: "/skins/glow/glow.zip",
}

var params = {
    allowfullscreen:"false", 
    allowscriptaccess:"always"
}

var attributes = {
    id:"player1",  
    name:"player1"                    
}

swfobject.embedSWF("/player.swf", "player_placeholder", "100%", "40", "9.0.115", false, flashvars, params, attributes);

var playObj;
return playObj || (playObj = {
    currentId: 'test', currentUrl: 'url', playerHolder: ''
});
});​ 
```

我知道如何使用

```
angular.element(DOMElement).injector().get('player') 
```

但它返回一个新的“播放器”实例，而我需要更新模块中已经创建的实例。有没有办法做到这一点？我只想要一个播放器实例，但我需要从外部 javascript 初始化它。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-11-28T20:45:09.397

好吧，我真的看不到你在做什么，但你可能大约有 1/2 的距离。

[这是我将要描述的内容](http://plnkr.co/edit/tBiyrZ)

`injector.get()`应该返回与您的应用程序中相同的 Service 实例。您可能只是看到一个让您*认为*您有不同实例的问题。

所以你需要做的是：

*   确保您从服务中放入范围的是**对象**引用。如果它是原始类型，则它不会是相同的引用，因此不会更新。
*   一定要从你的角度元素中获取范围`angular.element(DOMElement).scope()`，然后调用`$apply()`它。

这是代码：

```
app.controller('MainCtrl', function($scope, myService) {
  // Set a var on the scope to an object reference of the
  // (or from the) service.
  $scope.myService = myService;
});

app.factory('myService', function(){
  return {
    foo: 'bar'
  };
});

//do a little something to change the service externally.
setTimeout(function(){
  //get your angular element
  var elem = angular.element(document.querySelector('[ng-controller]'));

  //get the injector.
  var injector = elem.injector();

  //get the service.
  var myService = injector.get('myService');

  //update the service.
  myService.foo = 'test';

  //apply the changes to the scope.
  elem.scope().$apply();
}, 2000) 
```

其他想法：

*   您可能希望注入`$window`到您的服务中，而不是使用 window 对象来维护您的服务的可测试性。
*   对于 DOM 操作，例如创建 Flash 电影播放器​​，指令可能是更好的选择。

# java - 如何在 eclipse-rcp 应用程序的通用导航器视图中对文件夹结构进行分组？

> ID：13613291
> 
> 赞同：2
> 
> 时间：2012-11-28T19:52:09.483
> 
> 标签：java, eclipse-rcp, grouping, directory-structure, cnf

我有一个关于 eclipse-rcp 应用程序中通用导航器视图（包资源管理器）的文件夹结构的问题。

我的目标是对项目的源文件夹进行分组。

![示例项目的源文件夹](../Images/5589789cd76ec15fd150a72780c460ee.png)

如上图所示，项目“Sample”的源文件夹为 src + main + resources。我想对该源文件夹进行**分组**，以便只有一行显示文本“src.main.resources”。这不应通过更改文件系统中的文件夹结构来实现。

所以我的问题是：是否可以在不触及物理文件夹结构的情况下以编程方式对源文件夹进行分组？

任何帮助，将不胜感激！

干杯!

* * *

在做了很多研究之后，我正在尝试一种不同的方法。我正在使用装饰器类来修改源文件夹的标签。

![修改src文件夹名称后的结果](../Images/cc46ded125a10ab8526c1be3b8f1c92c.png)

为了达到原始问题的目标，我想隐藏源文件夹的前两级，以便只有一行显示“src/main/resources”。遗憾的是， IFolder.setHidden(true) 不起作用，因为它也会隐藏节点的子节点。是否有可能通过使用过滤器来隐藏这两个文件夹？还是我必须修改导航器树？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:48:23.280

您可以查看许多资源和文章：

*   [http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2Fcnf_config.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2Fcnf_config.htm)
*   [http://scribbledideas.blogspot.dk/2006/05/building-common-navigator-based-viewer.html](http://scribbledideas.blogspot.dk/2006/05/building-common-navigator-based-viewer.html)
*   [http://scribbledideas.blogspot.dk/2006/05/building-common-navigator-based-viewer_22.html](http://scribbledideas.blogspot.dk/2006/05/building-common-navigator-based-viewer_22.html)
*   [http://scribbledideas.blogspot.dk/2006/06/building-common-navigator-based-viewer.html](http://scribbledideas.blogspot.dk/2006/06/building-common-navigator-based-viewer.html)
*   [http://scribledideas.blogspot.dk/2006/06/building-common-navigator-based-viewer_18.html](http://scribbledideas.blogspot.dk/2006/06/building-common-navigator-based-viewer_18.html)
*   [http://scribbledideas.blogspot.dk/2006/06/building-common-navigator-_115067357450703178.html](http://scribbledideas.blogspot.dk/2006/06/building-common-navigator-_115067357450703178.html)

有了这些信息，你应该可以用 CNF 做所有事情了 :-)

# c++ - 在一个 for 循环中创建多个结构

> ID：13613292
> 
> 赞同：2
> 
> 时间：2012-11-28T19:52:11.090
> 
> 标签：c++

所以我有一个循环类似于

```
for (r = 0; r < k; r++) {
    pair p = {r, D[r]};
    queue.push(p);
} 
```

其中对定义为

```
struct pair {
    int u;
    float d;
} 
```

这是创建 k 对并将它们推入优先级队列的合法方式吗？即使 p 每次都被覆盖，这些对是否仍以其原始形式存在于队列中？还是已经在队列中的每一对都自动更新为 p 的新值，从而导致队列中充满了同一对的相同副本？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T19:53:00.477

代码很好。

`p`被*复制*到队列中；复制完成后原件会发生什么并不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:05:18.077

是的，您的代码按原样工作。的默认复制构造函数`p`被调用，一个副本被推入`queue`. 但是，您可以通过添加构造函数来稍微简化代码。如果你定义`pair`为：

```
struct pair {
    pair(int u_, float d_) : u(u_), d(d_){}
    int u;
    float d;
}; 
```

然后在您的循环中，您可以简单地执行以下操作：

```
for (r = 0; r < k; r++) {
    queue.push_back(pair(r, D[r]));
} 
```

这样一来，您就更清楚地知道您是在故意推送副本。另外，请确保您`;`的结构声明结束后有一个！如果您忘记了，最终可能会出现一些神秘的编译器错误。

# c++ - 如何使用 Orwell Dev-C++ 编译 C++11 代码？

> ID：13613295
> 
> 赞同：3
> 
> 时间：2012-11-28T19:52:31.183
> 
> 标签：c++, c++11, unique-ptr, dev-c++

尝试编译以下代码：

```
#include <iostream>
#include <memory>

struct Foo {
    Foo() { std::cout << "Foo::Foo\n"; }
    ~Foo() { std::cout << "Foo::~Foo\n"; }
    void bar() { std::cout << "Foo::bar\n"; }
};

void f(const Foo &foo)
{
    std::cout << "f(const Foo&)\n";
}

int main()
{
    std::unique_ptr<Foo> p1(new Foo);  // p1 owns Foo
    if (p1) p1->bar();

    {
        std::unique_ptr<Foo> p2(std::move(p1));  // now p2 owns Foo
        f(*p2);

        p1 = std::move(p2);  // ownership returns to p1
        std::cout << "destroying p2...\n";
    }

    if (p1) p1->bar();

    // Foo instance is destroyed when p1 goes out of scope
} 
```

使用 Orwell Dev-c++ 5.3.0.3 会产生以下错误：

> “unique_ptr”不是“std”的成员。

我该如何处理？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T20:44:49.343

请确保在编译时提供正确的 -std 标志。Orwell Dev-C++ 使用的默认设置（不传递任何 -std 选项）不会启用一些闪亮的新 C++11 函数，例如 unique_ptr。修复非常简单：

*   对于非项目编译，请转到：工具>>编译器选项>>（选择您的编译器）>>设置>>代码生成>>（将“语言标准”设置为C ++ 11选项）
*   对于项目编译，请转到：项目 >> 编译器 >> 代码生成 >>（将“语言标准”设置为 C++11 选项）

以下是有关 -std 标志的更多信息：http: [//gcc.gnu.org/onlinedocs/gcc/C-Dialect-Options.html#C-Dialect-Options](http://gcc.gnu.org/onlinedocs/gcc/C-Dialect-Options.html#C-Dialect-Options)

如您所见，GCC 默认使用 C++03 的 GNU 方言（它似乎不支持 unique_ptr）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-28T16:37:14.123

最新版本的[Dev-C++](https://github.com/Embarcadero/Dev-Cpp)附带 TDM-GCC 9.2.0，默认为 C++17。

# macos - OSX Apache 使用错误版本的 PHP

> ID：13613313
> 
> 赞同：29
> 
> 时间：2012-11-28T19:53:28.260
> 
> 标签：macos, apache, symfony, php

我按照指南使用 home-brew 在 OSX Mountain Lion 上安装了最新版本的 php (5.4.8)。

然后我按照指南向我展示了如何在 OSX 上设置和使用预安装的 apache。

然而，当我尝试运行一个基本的 Symfony 2 项目时，我得到了一堆与 php.ini 中缺少 date.timezone 相关的错误。

但是我已经正确设置了 php.ini，但是在 Symfony 项目中快速执行 phpinfo() 表明它使用的是旧的预装版本的 php (5.3) 而不是新的。

如果我在终端中输入`which php`& `php -v`，它显示正在使用正确的新版本。

![在此处输入图像描述](../Images/f861f499d44d91b890be4fadb2b0d90e.png)

但是`phpinfo()`节目

![在此处输入图像描述](../Images/91f0894d78cdd8ec60c1fe845ef81be0.png)

![在此处输入图像描述](../Images/2cb5fb040b8294fc7a1351dc5d275f5c.png)

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-11-28T20:05:10.280

您是否遵循警告中提供的所有说明？

跑去`brew info php54`再次见到他们。

特别是这行：

> 要在 Apache 中启用 PHP，请将以下内容添加到 httpd.conf 并**重新启动 Apache**：
> LoadModule php5_module /usr/local/Cellar/php54/5.4.8/libexec/apache2/libphp5.so

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T19:59:43.497

Apache 不知道 PHP 的*自制*版本（即`/usr/bin/php`）。您在命令行上看到它是因为您可能已经修改了您的`PATH`(ie `/usr/local/bin/php`)。

您可以在 httpd.conf 文件中修改它。

我不喜欢*自制软件*或其他软件包库。主要是因为 Mac OS X 是在 Unix 之上构建的。此外，除 MySQL 之外的所有设备都是本地安装的。这是一篇关于[在 Mac OS X 上安装 Apache、MySQL 和 PHP](http://jason.pureconcepts.net/2012/10/install-apache-php-mysql-mac-os-x/)的文章。

**免责声明：**我写了那篇文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-20T03:37:31.480

今天我有同样的问题，将 php 7.2 更新到 7.3 作为 Laravel 6 的要求。这是我的解决方案。

1.  在“/etc/apache2/http.conf”中打开您的 httpd.conf 文件
2.  搜索（Ctrl + w）“LoadModule php”
3.  取消注释该行
4.  使用“sudo apachectl restart”重启你的 apache

然后，您在本地 Web 服务器 (apache2) 中的 php 版本将被更新

# ms-access - tabindex 不适用于日期选择器

> ID：13613314
> 
> 赞同：0
> 
> 时间：2012-11-28T19:53:34.240
> 
> 标签：ms-access, ms-access-2010

属性设置为的`tab index`on 文本框被忽略`Show Date Picker``For Dates`

例子：

```
Control      Tab
-----------------
Textbox1      1
Datepicker1   2
Datepicker2   3
textbox2      4 
```

所以它从 textbox1 到 textbox2

正常吗？

有什么办法让它发挥作用吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:21:27.370

最后，我发现有一个选项叫做`Tab Stop`

它被设置`No`为这两个文本框。

当它设置为时，它就像一个魅力`Yes`

# r - 支持 R（或只是外部程序）的基于 Web 的报告生成

> ID：13613315
> 
> 赞同：3
> 
> 时间：2012-11-28T19:53:37.840
> 
> 标签：r, report, reporting

我非常擅长使用 R / Sweave / Knitr 生成一次性报告来处理带有 R 代码的模板，该代码获取数据库数据并生成 pdf / html / text / md 或 odf 文件，我正在为它们提供更多和更多给用户。

理想情况下，我很乐意为用户提供一种简单的方法来请求具有特定设置的特定模板，然后获取该报告的结果。

任何人都可以提出这样的建议，基于网络或任何支持 R / sweave 工作流程的东西？

编辑：生成这些报告（sweave'ing 或 knit'ting）可能需要一段时间，3-5 分钟，因此必须支持请求和稍后取货。此外，多用户支持会很好（即 ​​Bob 看不到 Jane 的报告）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:33:55.797

如果你想要一个真正的、交互式的、基于 Web 的 R 框架，我强烈建议你看看 RStudio 的新应用：[Shiny](http://www.rstudio.com/shiny/)。

如果您实际上只是想要 PDF/HTML 种类的静态报告，我不知道您需要很多东西才能实现它。您基本上只是希望从网页获取基于表单的输入，将其传递给 R，运行您的报告，并提供文件作为下载。

*   要构建一个简单的 HTML 表单，PHP 将非常简单并且得到大多数托管服务提供商的支持。
*   然后使用类似 PHP 的`system()` [函数](http://php.net/manual/en/function.system.php)来调用您的 RScript 代码，并在该调用中传递参数。
*   在 R 中，使用`commandArgs()`函数提取指定给脚本的参数，生成报告。
*   将生成的报告提供给 Web 用户。

如果你想要更全面的东西，你可以考虑设置 RApache 或类似的技术，但我真的认为你会花费大量的精力来设置它，你（和你的用户）可能会更好地使用 Shiny 和获得交互的好处。

# c - 如何检查已转储到文件的交叉编译结构？

> ID：13613319
> 
> 赞同：0
> 
> 时间：2012-11-28T19:53:51.403
> 
> 标签：c, debugging, gdb, embedded, cross-compiling

我有一个在基于 ARM 的嵌入式设备上运行的程序。某个`struct`全局可访问的，每隔一段时间就会被转储到磁盘，代表大约 160Kb 的数据。

我需要检查这个结构的内容。到目前为止，我已经使用 Python 脚本和`struct`库来解析该转储的内容，但是这种方法不能很好地扩展。

我认为可以使用交叉编译的 GDB 程序来执行此操作。我想将该文件的内容复制回内存中的结构地址。所以这就是我尝试的：

```
$ arm-eabi-gdb
....
(gdb) target sim
Connected to the simulator.
(gdb) file MS.elf
Reading symbols from MS.elf...done.
(gdb) p &my_struct
$1 = (MyStruct *) 0x6801149c
(gdb) restore ~/Dumps/MS_20121128_164606 binary 0x6801149c
You can't do that without a process to debug. 
```

**这是正确的方法吗？如果是，我做错了什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T21:13:28.183

我会编写一个小程序，读取结构，然后在调试模式下打印它。

该程序需要在与 ARM 架构特征相同的系统上编译。即相同大小的char、int、short、long、float、double 和pointer。此外，字节顺序需要与 ARM 上的相同。

如果您经常查看结构，那么打印出结构的内容而不是不断使用 gdb 来查看内容是值得的。

由于结构非常大，我还需要额外的步骤，使用 API 将结构放入浏览器中的文件夹/文档类型树中，以便您可以放大或浏览结构的不同部分。如果有人对此感兴趣，请告诉我。

```
#include <stdio.h>
#include <fcntl.h>
#include <sys/types.h>
#include <unistd.h>   
#include <stdlib.h>

struct Foo {       
    /* contents of the struct go here */
};        

int
main()
{     
    struct Foo tmp;
    int fd, r, n = sizeof(tmp);

    fd = open("struct_dump", O_RDONLY);
    if (fd < 0) {
        printf("could not open struct_dump.\n");
        exit(0);
    }

    r = read(fd, &tmp, n);
    if (r != n) {
        printf("mismatched struct sizes.\n");
        exit(0);
    }

    /*
     * Stop here in gdb and do 'p tmp'
     */

    close(fd);
    exit(0);
 } 
```

# php - PHP & MySQL 的 STR_TO_DATE

> ID：13613324
> 
> 赞同：1
> 
> 时间：2012-11-28T19:54:01.883
> 
> 标签：php, mysql, sql-date-functions

我正在尝试将存储在 mysql 数据库中的日期转换为 VARCHAR（格式示例：2012 年 12 月 29 日），然后我想按它排序，以便旧日期在最前面，然后是当前日期。

```
Eg: 
11-01-2012
11-05-2012
12-25-2012
... 
```

这是我到目前为止所拥有的，（请帮助！！谢谢）

```
<?php
        $listsql = "SELECT contact.id, CONCAT(lastname,', ',firstname) AS fullname, lastname, firstname,
                    STR_TO_DATE(daDATE,'%m-%d-%Y'), line1, line2, city, state, zip, phone1, phone2, country, whoAdded
                    FROM ". TABLE_CONTACT ." AS contact
                    LEFT JOIN ". TABLE_ADDRESS. " AS address ON contact.id=address.id AND contact.primaryAddType=address.type
                    LEFT JOIN ". TABLE_EMAIL ." AS email ON contact.id=email.id AND contact.primaryAddType=email.type
                    WHERE contact.hidden != 1
                    ORDER BY email.daDATE";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:59:50.970

正如评论已向您表明的那样。您真的应该将字段类型更改为`date`或`datetime`（如果您需要 HMS 信息）。虽然您当然可以对文本类型字段中的日期值进行字符串操作，但您将无法使用索引来使您可能希望对该字段有效的过滤/排序/分组。

如果您需要帮助转换我可能会建议这种方法。添加新的日期或日期时间列。确保在此列上添加索引，因为您将使用它进行排序。

然后运行这个查询：

```
UPDATE table SET new_date_column = STR_TO_DATE(old_date_column, '%m-%d-%Y'); 
```

然后从表中删除旧列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:16:27.197

您可以使用`SUBSTR()`和`INSTR()`识别日期的每个部分即时订购，然后按年订购，然后按月订购。就像其他人所说的那样，最好将其存储为一个`date`整数或 unixtime 整数。您可以将其更改为，`yyyy-mm-dd`并且 orderby 将在本机工作。

如果您坚持使用最困难的方式，则可能是（年，月，日）：

```
ORDER BY SUBSTR(email.daDATE,INSTR(email.daDATE,'-',2)+1) DESC,
         SUBSTR(email.daDATE,INSTR(email.daDATE,'-',1)+1,INSTR(email.daDATE,'-',2)-1) DESC,
         SUBSTR(email.daDATE,0,INSTR(email.daDATE,'-')-1) DESC 
```

或类似的东西。这是我头顶上的飞行，但我认为它是准确的。如果没有按预期工作，请查找功能以了解其用法。

# ios - UIImageView 阴影不起作用

> ID：13613326
> 
> 赞同：1
> 
> 时间：2012-11-28T19:54:13.557
> 
> 标签：ios, uikit

不知道哪里错了。我在 Storyboard 中有一个 UIImageView，它通过 IBOutlet 连接到代码。我想向 UIImageView 添加一个阴影（在运行时）。并为此使用此代码片段（从 stackoverflow 帖子中获得此帮助）：

```
-(void) awakeFromNib { 
    self.imageViewTopBar.layer.shadowColor = [UIColor blueColor].CGColor;
    self.imageViewTopBar.layer.shadowOffset = CGSizeMake(0, 5);
    self.imageViewTopBar.layer.shadowOpacity = 1.0;
    self.imageViewTopBar.layer.shadowRadius = 3.0;
        //self.imageViewTopBar.layer.masksToBounds = YES;
    //self.imageViewTopBar.clipsToBounds = NO;
    self.imageViewTopBar.layer.shouldRasterize = YES;
} 
```

但它根本行不通。请问有什么帮助吗？我看不出它不应该工作的任何理由。

我的环境：XCode 4.5.2、iOS 5、iPhone 4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:59:59.617

您应该使用它`-viewDidLoad`来执行此操作，请查看这篇文章：[在 awakeFromNib 中访问视图？](https://stackoverflow.com/questions/2723042/accessing-view-in-awakefromnib)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T21:29:26.587

您是否已在 xib 中将 clipToBounds 检查为 YES？

如果是，您应该取消选中 clipToBounds 并重新组织您的视图层次结构。

通常，当我有一个带有阴影的 imageView 时，我会使用这个层次结构

```
(aImageView)   ClipToBounds=YES
     |
     |
   (aView)     Shadow setted here
     |
     |
 (Superview) 
```

aView 与 aImageView 具有相同的帧大小

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:59:31.820

尝试将其放入 viewDidLoad。我假设您已经包含了quartzcore 框架。如果不是，我认为它会引发编译器错误......

# python - 从两个连接的字符串 Python 调用变量

> ID：13613327
> 
> 赞同：2
> 
> 时间：2012-11-28T19:54:18.797
> 
> 标签：python, variables, concatenation

我有一些代码可以生成两个字符串 - digit_ 和 'x'，其中 x 是一个整数。我的直觉是，这是一个愚蠢的问题，但我在网上找不到答案。我有名为 digit_1、digit_2 ... 等的变量，直到 digit_9。如何在不使用很长的 if/elif 函数的情况下调用正确的其中一个？有没有办法从变量名的串联中调用变量？山姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T19:55:33.990

最简洁的方法是将变量放入列表或字典中，然后通过索引或名称访问它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:55:47.297

不，没有“创建”变量名和访问它们的好方法。

但是，您可以只使用一个列表，然后对其进行索引。

# ios - 创建一个按钮会导致图像数组

> ID：13613329
> 
> 赞同：-1
> 
> 时间：2012-11-28T19:54:28.497
> 
> 标签：ios, xcode, arrays, uiscrollview, paging

我已经按照本[教程](http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content)使用 UIScrollView 进行分页，它有一些带有图像的数组。我想创建一个按钮，将我带到我选择的图像数组（澄清：当我点击按钮时，它会将我带到 photo3.png）。请先查看教程以理解我的意思。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T21:36:45.630

您是否尝试过使用[UIScrollView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)的以下任务？

`- (void)scrollRectToVisible:(CGRect)rect animated:(BOOL)animated`

您只需传递要显示的页面的`CGRect`匹配项。`frame`

**编辑添加代码**

```
-(IBAction)scrollToPageNumberFive:(id)sender {
  int scrollToPage = 5; //just an example
  int scrollToX = 5-1; //because X starts from 0
  [self.scrollView scrollRectToVisible:CGRectMake(scrollToX*self.scrollView.frame.size.width,0,self.scrollView.frame.size.width,self.scrollView.frame.size.height) animated:YES];
} 
```

调用`scrollRectToVisible:animated:`将调用`scrollViewDidScroll:`教程中的方法，该方法将加载和清除适当的页面。

# socket.io - TypeScript 的 socket.io 定义文件

> ID：13613330
> 
> 赞同：0
> 
> 时间：2012-11-28T19:54:30.090
> 
> 标签：socket.io, typescript

我想使用 socket.io 创建一个 node.js 服务器应用程序并用 TypeScript 编写它。当前是否有一个 socket.io 的定义文件浮动，还是我现在必须使用 a `declare var socketio: any`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T21:46:21.623

我一直在用这个

[https://github.com/soywiz/typescript-node-definitions/blob/master/socket.io.d.ts](https://github.com/soywiz/typescript-node-definitions/blob/master/socket.io.d.ts)

这还没有让我失望（尽管我还没有尝试一切）。

编辑：这也只是建议作为美妙的[DefiniteTyped项目的补充](https://github.com/borisyankov/DefinitelyTyped)

[https://github.com/worr/DefinitelyTyped/commit/0be80b5a26e1a4fb9734e935bf6dff872de7182c](https://github.com/worr/DefinitelyTyped/commit/0be80b5a26e1a4fb9734e935bf6dff872de7182c)

# php - 如何在文本字符串中匹配 12 小时时间

> ID：13613334
> 
> 赞同：1
> 
> 时间：2012-11-28T19:54:39.247
> 
> 标签：php, regex

我在提要中有以下字符串。我需要匹配粗体部分并将其存储在一个变量中：

1.  随机事件名称**12:30PM 至 1:30PM**
2.  随机事件名称再次**下午 2:30**

**更新：**

我使用了@cryptic 提供的解决方案。

结果如下：

```
 $titles = array( 
                "*~Svet~* 12:30PM to 1:30PM",
                "Basketball (M and W) vs Cleveland State 6:00PM",
                "Christmas for the Kids Celebration! 2:00PM to 4:00PM"
            );

foreach ($titles as $title) {
    //get date
    preg_match('/(\d{1,2}:\d{2}[ap]m)( to \d{1,2}:\d{2}[ap]m)?/i', $title, $match);
    //get title
    $cleanTitle = preg_split('/([0-1][0-9]|[0-9]):?([0-5][0-9])/', $title);

echo "<p>Title: ".$cleanTitle[0]."<br />Time: ".$match[0]."</p>"; 

} 
```

**//输出**

标题：*~Svet~*
时间：12:30PM to 1:30PM

标题：篮球（M 和 W）vs 克利夫兰州立大学
时间：下午 6:00

标题：为孩子们庆祝圣诞节！
时间：下午 2:00 至下午 4:00

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:03:50.367

```
// String example 1
$string = 'Ramdom Event Name 12:30PM to 1:30PM';
preg_match('/(\d{1,2}:\d{2}[ap]m)( to \d{1,2}:\d{2}[ap]m)?/i', $string, $match);
echo $match[0]; // outputs 12:30PM to 1:30PM

// String example 2
$string = 'Ramdom Event Name again 2:30PM';
preg_match('/(\d{1,2}:\d{2}[ap]m)( to \d{1,2}:\d{2}[ap]m)?/i', $string, $match);
echo $match[0]; // outputs 2:30PM 
```

相同的正则表达式将匹配两个字符串示例，并且还将获取“到”部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:31:58.133

您可以使用以下方法解决它`regex`。
`/\d{1,2}:\d{2}(?:a|p)m(?: to \d{1,2}:\d{2}(?:a|p)m)*/i`

# python - 如何在 Python 中连接文本文件？

> ID：13613336
> 
> 赞同：203
> 
> 时间：2012-11-28T19:54:46.143
> 
> 标签：python, file-io, concatenation

我有 20 个文件名的列表，例如`['file1.txt', 'file2.txt', ...]`. 我想编写一个 Python 脚本来将这些文件连接成一个新文件。我可以通过调用打开每个文件`f = open(...)`，通过调用逐行读取`f.readline()`，然后将每一行写入该新文件。对我来说，这似乎不是很“优雅”，尤其是我必须逐行读/写的部分。

在 Python 中是否有更“优雅”的方式来做到这一点？

* * *

## 回答 #1

> 赞同：301
> 
> 时间：2012-11-28T19:57:47.770

这应该这样做

**对于大文件：**

```
filenames = ['file1.txt', 'file2.txt', ...]
with open('path/to/output/file', 'w') as outfile:
    for fname in filenames:
        with open(fname) as infile:
            for line in infile:
                outfile.write(line) 
```

**对于小文件：**

```
filenames = ['file1.txt', 'file2.txt', ...]
with open('path/to/output/file', 'w') as outfile:
    for fname in filenames:
        with open(fname) as infile:
            outfile.write(infile.read()) 
```

**……还有一个我想到的有趣的**：

```
filenames = ['file1.txt', 'file2.txt', ...]
with open('path/to/output/file', 'w') as outfile:
    for line in itertools.chain.from_iterable(itertools.imap(open, filnames)):
        outfile.write(line) 
```

遗憾的是，最后一种方法留下了一些打开的文件描述符，GC 无论如何都应该处理这些描述符。我只是觉得这很有趣

* * *

## 回答 #2

> 赞同：236
> 
> 时间：2014-11-22T12:35:15.330

使用[`shutil.copyfileobj`](https://docs.python.org/3/library/shutil.html#shutil.copyfileobj).

它会自动为您逐块读取输入文件，这样效率更高，并且即使某些输入文件太大而无法放入内存，它也可以读取输入文件并且可以正常工作：

```
import shutil

with open('output_file.txt','wb') as wfd:
    for f in ['seg1.txt','seg2.txt','seg3.txt']:
        with open(f,'rb') as fd:
            shutil.copyfileobj(fd, wfd) 
```

* * *

## 回答 #3

> 赞同：65
> 
> 时间：2012-11-28T20:07:45.273

这正是[fileinput](http://docs.python.org/3/library/fileinput.html)的用途：

```
import fileinput
with open(outfilename, 'w') as fout, fileinput.input(filenames) as fin:
    for line in fin:
        fout.write(line) 
```

对于这个用例，它实际上并不比手动迭代文件简单得多，但在其他情况下，使用一个迭代器来迭代所有文件，就好像它们是一个文件一样非常方便。（此外，`fileinput`一旦完成就关闭每个文件的事实意味着不需要`with`或`close`每个文件，但这只是节省了一行，没什么大不了的。）

中还有一些其他漂亮的功能`fileinput`，例如仅通过过滤每一行来对文件进行就地修改的能力。

* * *

如评论中所述，并在另一篇文章中讨论过[，](https://stackoverflow.com/questions/30835090/attributeerror-fileinput-instance-has-no-attribute-exit) Python `fileinput`2.7 将无法正常工作。此处稍作修改以使代码符合 Python 2.7

```
with open('outfilename', 'w') as fout:
    fin = fileinput.input(filenames)
    for line in fin:
        fout.write(line)
    fin.close() 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-06-03T01:39:23.897

我不知道优雅，但这有效：

```
 import glob
    import os
    for f in glob.glob("file*.txt"):
         os.system("cat "+f+" >> OutFile.txt") 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-11-28T20:00:34.163

UNIX 命令有什么问题？（假设您不在 Windows 上工作）：

`ls | xargs cat | tee output.txt`完成这项工作（如果需要，您可以使用子进程从 python 调用它）

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-04-26T08:10:36.850

```
outfile.write(infile.read()) # time: 2.1085190773010254s
shutil.copyfileobj(fd, wfd, 1024*1024*10) # time: 0.60599684715271s 
```

一个简单的基准测试表明shutil 表现更好。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-03-29T03:53:56.710

@inspectorG4dget 答案的替代方法（截至 2016 年 3 月 29 日的最佳答案）。我测试了 3 个 436MB 的文件。

@inspectorG4dget 解决方案：162 秒

以下解决方案：125 秒

```
from subprocess import Popen
filenames = ['file1.txt', 'file2.txt', 'file3.txt']
fbatch = open('batch.bat','w')
str ="type "
for f in filenames:
    str+= f + " "
fbatch.write(str + " > file4results.txt")
fbatch.close()
p = Popen("batch.bat", cwd=r"Drive:\Path\to\folder")
stdout, stderr = p.communicate() 
```

这个想法是利用“旧的好技术”创建一个批处理文件并执行它。它的半蟒蛇，但工作得更快。适用于窗户。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-05-06T09:45:00.683

如果目录中有很多文件，那么`glob2`生成文件名列表而不是手动编写它们可能是一个更好的选择。

```
import glob2

filenames = glob2.glob('*.txt')  # list of all .txt files in the directory

with open('outfile.txt', 'w') as f:
    for file in filenames:
        with open(file) as infile:
            f.write(infile.read()+'\n') 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-11-28T20:04:20.100

查看 File 对象的 .read() 方法：

[http://docs.python.org/2/tutorial/inputoutput.html#methods-of-file-objects](http://docs.python.org/2/tutorial/inputoutput.html#methods-of-file-objects)

您可以执行以下操作：

```
concat = ""
for file in files:
    concat += open(file).read() 
```

或更“优雅”的python方式：

```
concat = ''.join([open(f).read() for f in files]) 
```

根据这篇文章：[http](http://www.skymind.com/~ocrow/python_string/) ://www.skymind.com/~ocrow/python_string/也是最快的。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-11-28T20:04:38.173

如果文件不是很大：

```
with open('newfile.txt','wb') as newf:
    for filename in list_of_files:
        with open(filename,'rb') as hf:
            newf.write(hf.read())
            # newf.write('\n\n\n')   if you want to introduce
            # some blank lines between the contents of the copied files 
```

如果文件太大而无法完全读取并保存在 RAM 中，则算法必须稍有不同，以通过固定长度的块读取要在循环中复制的每个文件，`read(10000)`例如使用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-09-28T00:03:01.730

```
def concatFiles():
    path = 'input/'
    files = os.listdir(path)
    for idx, infile in enumerate(files):
        print ("File #" + str(idx) + "  " + infile)
    concat = ''.join([open(path + f).read() for f in files])
    with open("output_concatFile.txt", "w") as fo:
        fo.write(path + concat)

if __name__ == "__main__":
    concatFiles() 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2019-12-03T16:18:54.043

```
 import os
  files=os.listdir()
  print(files)
  print('#',tuple(files))
  name=input('Enter the inclusive file name: ')
  exten=input('Enter the type(extension): ')
  filename=name+'.'+exten
  output_file=open(filename,'w+')
  for i in files:
    print(i)
    j=files.index(i)
    f_j=open(i,'r')
    print(f_j.read())
    for x in f_j:
      outfile.write(x) 
```

# ruby - 如何为类或模块级常量编写 Ruby UnitTest？

> ID：13613338
> 
> 赞同：0
> 
> 时间：2012-11-28T19:55:00.480
> 
> 标签：ruby

如何编写测试来验证类或模块中是否存在常量？

例子：

```
module MyModule
  VERSION = "0.3.1"
end 
```

我试过了

```
require 'test/unit'
require 'shoulda'
require "my_class"

class MyModuleTest < Test::Unit::TestCase
  should "have a Version constant" do
    # next two lines crash
    assert_respond_to MyModule, :VERSION
    assert_respond_to 'VERSION', MyModule
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:16:58.277

你会考虑使用[**Specular**](https://github.com/slivu/specular)来实现更自然的工作流程吗，这意味着你可以使用任何在普通 Ruby 中工作的方法，因此你不需要记住很多额外的不需要的东西。

```
require 'specular'

module MyModule
  VERSION = "0.3.1"  
end  

Spec.new do
  check(MyModule).const_defined? :VERSION
end  

puts Specular.run

# =>   check(MyModule).const_defined? :VERSION
# =>   - passed

# => Specs:       1
# => Tests:       0
# => Assertions:  1 
```

因此，使用普通的 Ruby，您可以：`MyModule.const_defined? :VERSION`
使用 Specular：`check(MyModule).const_defined? :VERSION`

没有太大的区别，因此没有什么可学习/记住/一次又一次地回忆的。

# c# - 地图列表 > 进入列表 >

> ID：13613346
> 
> 赞同：1
> 
> 时间：2012-11-28T19:55:51.057
> 
> 标签：c#, c#-4.0

我正在尝试使用以下代码将列表列表映射到字典列表中，但出现错误

> 索引超出范围

更新了问题

```
List<List<string>> _terms = new List<List<string>>();
for (int i = 0; i < _numcats; ++i)
{
    _terms.Add( GenerateTerms(_docs[i]));
}
// where _docs[i] is an array element 
// and the procedure GenerateTerms returns list  

int j = 0;
foreach (List <string> catterms in _terms)
{
    for (int i = 0; i < catterms.Count; i++)
    {
        _wordsIndex[j].Add(catterms[i], i);
    }
    j ++;            
} 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:14:31.813

假设：

*   `_terms`是类型`List<List<string>>`
*   `_wordsIndex`是类型`List<Dictionary<string,int>>`

试试这个：

```
var _wordsIndex = 
    _terms.Select(listOfWords => 
        // for each list of words
        listOfWords
            // each word => pair of (word, index)
            .Select((word, wordIndex) => 
                   new KeyValuePair<string,int>(word, wordIndex))
            // to dictionary these
            .ToDictionary(kvp => kvp.Key, kvp => kvp.Value))
        // Finally, ToList the resulting dictionaries
        .ToList(); 
```

但是，请注意 - 您的示例代码中也存在此错误：调用`Add`已存在该键的字典是禁忌。为了确保这里的安全，您可能希望获得一个`Distinct()`键值对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:00:25.590

我假设 _wordsIndex 是`List<Dictionary<string, int>>`. 如果是这样，您可能正在尝试访问尚未添加的项目。所以你需要把它改成这样：

```
foreach (List <string> catterms in _terms)
{
    var newDict = new Dictionary<string, int>();
    for (int i = 0; i < catterms.Count; i++)
    {
        newDict.Add(catterms[i], i);
    }
    _wordsIndex.Add(newDict)
} 
```

请注意，字典是在内循环之前创建的，在内循环中填充，然后在内循环结束后添加到主列表中。

# c# - TextBox 删除 GridView 数据为空

> ID：13613347
> 
> 赞同：0
> 
> 时间：2012-11-28T19:55:55.307
> 
> 标签：c#, asp.net, textbox

我有一个 GridView`TextBox`和一个`Label`内部。我的问题是，当我更新 GridView 并且它`TextBox`为空时，它会删除标签中的数据（这是有道理的）。我的问题是，是否可以在`TextBox`不丢失任何数据的情况下保持空白和更新？

C＃：

```
Private void Update()
    {
        StringBuilder sb = new StringBuilder();

        for (int i = 0; i < GridView1.Rows.Count; i++)
        {
            TextBox timeR = GridView1.Rows[i].FindControl("SitUps") as TextBox;
            if (timeR.Text.Length < 10)
            {
                foreach (GridViewRow row in GridView1.Rows)
                {
                    sb.Append("UPDATE bleaTest SET SitUps = '");
                    sb.Append((row.FindControl("SitUps") as TextBox).Text);
                    sb.Append("'");
                    sb.Append(" WHERE id = ");
                    sb.Append(Convert.ToInt32((row.FindControl("ID") as Label).Text));
                    sb.Append(" ");

                }
            }
            else
            {
                timeR.Text = "Number is too high!";
                foreach (GridViewRow row in GridView1.Rows)
                {
                    sb.Append("UPDATE bleaTest SET SitUps = '");
                    sb.Append((row.FindControl("SitUps") as TextBox).Text);
                    sb.Append("'");
                    sb.Append(" WHERE id = ");
                    sb.Append(Convert.ToInt32((row.FindControl("ID") as Label).Text));
                    sb.Append(" ");

                }

            }
        }

        string connectiongString = "Data Source=WSCJTCSQ1;Initial Catalog=TestDB;Persist Security Info=True;User ID=v2soft;Password=passwordv2soft";
        SqlConnection myConnection = new SqlConnection(connectiongString);
        SqlCommand myCommand = new SqlCommand(sb.ToString(), myConnection);
        myConnection.Open();
        myCommand.ExecuteNonQuery();
        myConnection.Close();
        BindData();
        } 
```

aspx：

```
 <asp:TemplateField HeaderText="Sit Ups">
        <ItemTemplate>
            <asp:TextBox ID="SitUps" runat="server" type="number" Text='<%# Eval("SitUps") %>' EnableViewState="True"></asp:TextBox></div>

        </ItemTemplate>
    </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:07:44.317

你可以`if (timeR.Text.Length < 10)`改成`if (timeR.Text.Length < 10 and timeR.Text.Length > 0)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T21:39:15.423

I figured out the issue here's the code:

```
StringBuilder sb = new StringBuilder();

                foreach (GridViewRow row in GridView1.Rows)
                {
                    TextBox tR = row.FindControl("SitUps") as TextBox;
                    if(tR.Text != "")
                    {
                    sb.Append("UPDATE bleaTest SET SitUps = '");
                    sb.Append((row.FindControl("SitUps") as TextBox).Text);
                    sb.Append("'");
                    sb.Append(" WHERE id = ");
                    sb.Append(Convert.ToInt32((row.FindControl("ID") as Label).Text));
                    sb.Append(" ");
                    string connectiongString = "Data Source=WSCJTCSQ1;Initial Catalog=TestDB;Persist Security Info=True;User ID=v2soft;Password=passwordv2soft";
                    SqlConnection myConnection = new SqlConnection(connectiongString);
                    SqlCommand myCommand = new SqlCommand(sb.ToString(), myConnection);
                    myConnection.Open();
                    myCommand.ExecuteNonQuery();
                    myConnection.Close();

                    }

                }
        BindData();
        } 
```

I cleaned up the code and now it checks if the text is not null and proceeds with the update.

Thank you!

# visual-studio-2010 - 在构建后事件中创建和复制文件

> ID：13613353
> 
> 赞同：0
> 
> 时间：2012-11-28T19:56:25.733
> 
> 标签：visual-studio-2010, post-build-event, post-build

我有几个构建配置，根据选择的配置，我需要`dll`将`created folder`. 基本上，我的可执行文件位于`c:\project`并且我`dll`的位于`c:\library`. 我需要在 上设置一个`post-build`事件，`dll`以便它`custom`在`c:\project`可执行目录中创建一个名为的文件夹，然后`dll`将`custom folder`. 我如何完成上述任务？我注意到的一件事是，构建后事件`dll`不会让我访问可执行文件目录，我不想硬编码类似`c:\project\bin\debug`的东西。

# memory - 防止 Valgrind 检查共享库

> ID：13613354
> 
> 赞同：4
> 
> 时间：2012-11-28T19:56:27.033
> 
> 标签：memory, shared-libraries, valgrind

首先，我知道存在另一个[标题几乎相同](https://stackoverflow.com/questions/4689046/prevent-valgrind-for-checking-memory-leaking-in-shared-libraries-linked-with-our)的问题，但该问题的答案在这里没有用。[另一个问题](https://stackoverflow.com/questions/2896162/can-i-make-valgrind-ignore-glibc-libraries)接近了，但同样的解决方案不是我可以在这里使用的。

我的应用程序使用了 Valgrind**真正**不喜欢的共享库。它生成：

```
Program Exception - illegal instruction
Image              PC                Routine            Line        Source             
libirc.so          000000000405ED3C  Unknown               Unknown  Unknown
libhdf5.so.7       00000000061338E2  Unknown               Unknown  Unknown
libhdf5.so.7       00000000061A73CE  Unknown               Unknown  Unknown
libhdf5.so.7       00000000061A9D6F  Unknown               Unknown  Unknown
libhdf5_fortran.s  0000000006B23233  Unknown               Unknown  Unknown
libhdf5_fortran.s  0000000006B19FF9  Unknown               Unknown  Unknown
les3d.x            00000000006D815C  Unknown               Unknown  Unknown 
```

甚至在它进入我的应用程序之前就死掉了（好吧，它进入了我的应用程序，但我们要做的第一件事是调用一个例程来初始化共享库，这就是它死的地方）。在没有 Valgrind 的情况下运行不会导致非法指令，但我确实会遇到奇怪的段错误，因此需要内存检查器。所以它完全无法使用，这就是错误抑制不起作用的原因。

是否可以真正阻止 Valgrind 对应用程序调用的共享库进行操作？不压制输出，但实际上不下降。如果没有，是否有可以防止的内存检查器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T21:08:12.803

首先你应该报告这个问题——在[valgrind 网站](http://www.valgrind.org/support/bug_reports.html)上有关于如何做到这一点的信息。

您所看到的表明 valgrind 的 JIT 正在生成一条在您的机器上无效的指令，这确实不应该发生。

要回答您的直接问题，没有没有办法做您想做的事，因为它没有任何意义 - 除非 valgrind 能够看到您的程序所做的所有读写操作，否则它无法跟踪内存正确，并且无法检测到它正在监视的程序部分中的错误。你会得到假阳性和假阴性。

# javascript - 两种不同颜色的款式

> ID：13613355
> 
> 赞同：1
> 
> 时间：2012-11-28T19:56:33.020
> 
> 标签：javascript, html, css

是否可以为具有不同颜色的一个元素提供两种样式？

换句话说，假设我有以下 HTML 代码：

```
<table class='my_table'>
<th class="style1 style2">LastName</th>
...
</table> 
```

并遵循CSS：

```
.my_table th.style1 { 
    background: #aaaaaa; 
}

.my_table th.style2 { 
    background: #bbbbbb; 
} 
```

我知道我可以在某些条件下使用 JavaScript 删除一种样式。但我想有两种风格，其中一种应该覆盖另一种。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:59:56.243

最后定义的样式（不是类属性中的类）应应用于您的元素，以回答您的问题。但是，如果在某个地方使用了 !important 关键字，结果可能会让您感到很奇怪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:02:55.157

是的，您可以在一个元素上使用任意数量的类。CSS 使用声明顺序和[选择器的特殊性](http://www.w3.org/TR/CSS2/cascade.html#specificity)来决定哪些将被覆盖。

例如，如果特异性相同，则使用最后一个：

```
.style1 { 
    background: #aaaaaa; 
}

.style2 { 
    background: #bbbbbb; 
} 
```

否则，将使用最具体的（以下示例中的第一个）：

```
.my_table th.style1 { 
    background: #aaaaaa; 
}

.style2 { 
    background: #bbbbbb; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T20:04:18.730

是的，您可以为一个元素使用多个类，并且应用这些类的所有样式规则。

如果规则冲突，则最具体的规则会覆盖另一个规则。如果规则同样具体，则适用最后一条规则。

例子：

```
<table class="my_table">
    <tr>
        <th class="style1">Style 1</th>
        <th class="style2">Style 2</th>
        <th class="style1 style2">Style 1 and 2</th>
    </tr>
</table> 
```

第三个单元格将从 中获取背景`style2`，因为它是在样式表中最后定义的。

演示：http: [//jsfiddle.net/jsLP5/](http://jsfiddle.net/jsLP5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T19:58:18.070

是的，您可以将多个类应用于一个元素，如果相同 CSS 元素存在相互竞争的定义，那么其中一个将覆盖另一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T19:59:27.993

一般来说，您可以拥有任意数量的样式定义或特定元素。使用哪一个取决于 css 特异性（范围）。你可以在这里阅读更多：http: [//coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T19:59:35.863

是的你可以

```
 <th class="style1 style2">LastName</th> 
```

和这里描述的css是你的

[http://webdesign.about.com/od/css/qt/tipcssmulticlas.htm](http://webdesign.about.com/od/css/qt/tipcssmulticlas.htm)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-28T20:03:34.750

对于给定的代码，使用的背景颜色是#bbbbbb，因为其他条件相同，就像这里一样，后一个声明通过[级联规则](http://www.w3.org/TR/CSS21/cascade.html#cascade)获胜。这意味着 CSS 声明的顺序。属性中类名的顺序`class`无关紧要。

# facebook - Facebook 的“Like”按钮计数与两个不同的 URL 相同

> ID：13613356
> 
> 赞同：1
> 
> 时间：2012-11-28T19:56:37.267
> 
> 标签：facebook, facebook-like, facebook-social-plugins

我使用 Facebook 的开放图形界面生成必要的元标记来注释我的页面。

我给出的价值`fb:admins`是我自己的个人帐户用户 ID。

所有其他值（包括 URL）都不同，但由于某种原因，两个 Like 按钮都显示相同的计数 - 可能是什么原因造成的？

{编辑：域名是 culebrais4lovers.com 和 acueductospr.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:31:32.820

您将两个域上的“赞”按钮指向同一个位置 (acueductospr.com)

在您的示例页面上，`http://culebrais4lovers.com` 您有以下 HTML：

```
<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.acueductospr.com&amp;send=false&amp;layout=button_count&amp;width=100&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font=segoe+ui&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100px; height:21px;" allowtransparency="true"></iframe> 
```

将 culebrais4lovers.com 上的“赞”按钮更改为指向 culebrais4lovers.com

# objective-c - 核心数据 NSManagedObject：最大属性数？

> ID：13613358
> 
> 赞同：2
> 
> 时间：2012-11-28T19:56:40.823
> 
> 标签：objective-c, macos, cocoa, core-data

我想知道是否有任何一个 NSManagedObject 子类应具有的最大属性数的指南。我仔细阅读了 Apple 的文档，但没有提到性能开始下降的限制。

我确实在 Xcode 中看到了一个编译器标志选项，当 NSManagedObject 具有超过 100 个属性时会提供警告，但我找不到任何文档。这里有没有人有使用具有大量属性的核心数据 MO 的经验？

我专注于***性能***，而不是内存使用。在我的应用程序中，只有大约 10-20 个具有大量属性的 MO 实例，而且我在 OS X 而不是 iOS 上进行开发，因此内存使用不是一个因素。但是，如果有一点性能（尤其是在故障时）开始下降，我现在想知道，这样我就可以相应地更改我的数据模型的结构。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T06:18:33.313

如果您使用 SQLite 后备存储，则[每个属性都会映射到表列。](http://blog.chrismiles.info/2011/07/core-data-debugging-with-sqlite.html)SQLite 对您可以使用的列数有硬性限制（默认为 2000，尽管它是编译时可配置的，因此 Apple 的实现可能会有所不同），并且[他们建议不要使用超过 100 个](http://sqlite.org/limits.html). 这很可能是 Xcode 警告将其阈值设置为 100 的原因。

关于限制的同一个链接页面还指出，有一些 O(N^2) 算法，其中 N 是列数，因此，听起来您通常应该避免使用高数字。

对于其他文件格式，我不知道有任何限制或建议。但我期待类似的事情 - 即那里可能有一些算法是 O(N^2) 或更糟，所以你想避免成为一个不常见的边缘情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T20:20:11.837

并不是说我什至在 iOS 上也遇到过。性能的最大限制因素是`NSPersistentStoreCoordinator`Mac OSX 上的缓存大小相当大。

如果您的属性是字符串、数字、日期等（即不是二进制数据），那么在您开始看到性能下降之前，您可能拥有大量属性。如果您正在使用二进制数据，那么我会提醒您不要破坏缓存并考虑将二进制数据存储在 SQLite 之外。最新版本的操作系统甚至可以为您自动执行此操作。

但是，我会质疑您为什么要这样做。当然，有些属性会比其他属性不那么重要，并且可以抽象为一对一关系另一侧的子实体？

# android - 获取 Jsonobject 中未知数量的值并将它们设置为 Android 的微调器

> ID：13613359
> 
> 赞同：0
> 
> 时间：2012-11-28T19:56:44.020
> 
> 标签：android, json, string, parsing, spinner

我正在做一个应用程序，它需要接收未知数量的名称以及它们和一个 ID。

我已经解决了 php 和 mysql 部分，这就是我在我的应用程序中收到的内容：

```
[{"id":"3","nombre":"Kaotik Sabadel"},{"id":"4","nombre":"Promotor Kaotik"}] 
```

在 android 部分，我从这个开始：

```
myJsonObj = new JSONObject(jodata); 
```

这就是我所拥有的。

我想将名称（名词）设置为微调器，当用户选择此名称时，获取他的 id 的值...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:01:46.470

您需要实现一个自定义[`SpinnerAdapter`](http://developer.android.com/reference/android/widget/SpinnerAdapter.html)来解析[`JSONArray`](http://developer.android.com/reference/org/json/JSONArray.html)（和否[`JSONObject`](http://developer.android.com/reference/org/json/JSONObject.html)）并将数据填充到您的`Spinner`.

作为如何解析数据的一点提示，请使用以下代码：

```
JSONArray data=new JSONArray(json);
for(int i=0; i<data.length(); i++) {
    JSONObject element=data.getJSONObject(i);
    int id=element.getInt("id");
    // ...
} 
```

id的部分可能会失败，因为它是一个字符串，没有整数刚才我不知道JSONObject是否可以检测到该值可以转换为int。如果不使用 getString 并将其解析为 int。

# lucene - 集群环境中的 Compass/Lucene

> ID：13613361
> 
> 赞同：1
> 
> 时间：2012-11-28T19:56:46.593
> 
> 标签：lucene, compass-lucene

我在集群环境中收到以下错误，其中一个节点正在索引对象，而另一个节点对缓存中的段感到困惑。即使在服务器重新启动后，节点也不会自行恢复。正在编制索引的节点可能正在合并段并删除其他节点不知道的。我没有触及 invalidateCacheInterval 设置并添加了 compass.engine.globalCacheIntervalInvalidation 属性，时间为 500 毫秒。它没有帮助。

在另一个节点上搜索和索引时会发生这种情况。

有人可以帮我解决这个问题吗？也许要求指南针重新加载缓存或从头开始，而不必重新索引所有对象？

org.compass.core.engine.SearchEngineException：无法使用查询 [+type:...)] 进行搜索；嵌套异常是 org.apache.lucene.store.jdbc.JdbcStoreException: No entry for [_6ge.tis] table index_objects org.apache.lucene.store.jdbc.JdbcStoreException: No entry for [_6ge.tis] table index_objects at org. apache.lucene.store.jdbc.index.FetchOnBufferReadJdbcIndexInput$1.execute(FetchOnBufferReadJdbcIndexInput.java:68) at org.apache.lucene.store.jdbc.support.JdbcTemplate.executeSelect(JdbcTemplate.java:112) at org.apache.lucene .store.jdbc.index.FetchOnBufferReadJdbcIndexInput.refill(FetchOnBufferReadJdbcIndexInput.java:58) at org.apache.lucene.store.ConfigurableBufferedIndexInput.readByte(ConfigurableBufferedIndexInput.java:27) at org.apache.lucene.store.IndexInput.readVInt(IndexInput .java:78) 在 org.apache。

# c# - Fluent NHibernate - 如何映射到引用查找表的表

> ID：13613364
> 
> 赞同：0
> 
> 时间：2012-11-28T19:56:57.743
> 
> 标签：c#, fluent-nhibernate, asp.net-mvc-4, fluent-nhibernate-mapping

我在下面定义了 4 个表：

```
Projects:
    Project_Id
    Project_Name

Vendors:
    Vendor_Id
    Vendor_Name

Project_Vendors:
    Project_Vendor_Id
    Project_Id
    Vendor_Id

Project_Vendor_Payments:
    Payment_Id
    Project_Vendor_Id
    Payment_Amount 
```

我什至不确定从哪里开始定义我的类以使用 Fluent NHibernate，更不用说定义我的映射了。

一个项目可以有许多与之关联的供应商，并且一个供应商可以在每个项目中收到许多付款。

关于如何实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T21:51:49.677

我通过不引用我的查找表而只使用直接引用实体的外键列解决了这个问题。

这是我的表结构：

```
Projects:
    Project_Id
    Project_Name

Vendors:
    Vendor_Id
    Vendor_Name

Project_Vendors:
    Project_Vendor_Id
    Project_Id
    Vendor_Id

Project_Vendor_Payments:
    Payment_Id
    Project_Id
    Vendor_Id
    Payment_Amount 
```

我的课程定义为：

```
public class Project
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual IList<Vendor> Vendors { get; set; }
    public virtual IList<VendorPayment> VendorPayments { get; set; }
}

public class Vendor
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
}

public class VendorPayment
{
    public virtual int Id { get; set; }
    public virtual Vendor Vendor { get; set; }
    public virtual float Amount { get; set; }
} 
```

还有我的映射：

```
public ProjectMappings : ClassMap<Project>
{
    public ProjectMappings()
    {
        Table("Projects");
        Id(x => x.Id).Column("Project_Id");
        HasManyToMany(x => x.Vendors).Table("Project_Vendors")
            .ParentKeyColumn("Project_Id")
            .ChildKeyColumn("Vendor_Id")
            .Cascade.AllDeleteOrphan();
        HasMany(x => x.VendorPayments).Table("Project_Vendor_Payments")
            .KeyColumn("Project_Id")
            .Cascade.AllDeleteOrphan();
        Map(x => x.Name).Column("Project_Name")
    }
}

public class VendorMappings : ClassMap<Vendor>
{
    public VendorMappings()
    {
        Table("Vendors");
        Id(x => x.Id).Column("Vendor_Id");
        Map(x => x.Name).Column("Vendor_Name");
    }
}

public class VendorPaymentMappings : ClassMap<VendorPayment>
{
    public VendorPaymentMappings()
    {
        Table("Project_Vendor_Payments");
        Id(x => x.Id).Column("Payment_Id");
        References(x => x.Vendor).Column("Vendor_Id");
        Map(x => x.Amount).Column("Payment_Amount");
    }
} 
```

这不是对我的问题的确切答案，而只是解决问题的方法。仍在寻找如何准确地解决问题。

# coronasdk - Corona SDK - 在“信箱”缩放模式下剪辑对象

> ID：13613365
> 
> 赞同：0
> 
> 时间：2012-11-28T19:57:01.097
> 
> 标签：coronasdk, clipping

有没有办法在“信箱”缩放模式下剪辑对象？我可以在想要显示为已剪裁的区域上添加黑色矩形，但实际剪裁应该具有性能优势。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:52:14.380

不，没有办法进行实际的手动剔除。

在我的公司，我们也使用黑色矩形。

电晕剔除，我们无法从我们这边控制它，它会自动剔除屏幕外的所有内容。在信箱模式下，信箱“黑色”区域中的东西仍在屏幕内，因此不会被剔除。

# jira - JiraRestClient 设置受让人

> ID：13613370
> 
> 赞同：0
> 
> 时间：2012-11-28T19:57:24.247
> 
> 标签：jira, jira-rest-java-api

我的商店目前正在运行 Jira 5X，我正在尝试使用 Jira Rest Client 来检索/处理问题。

我需要设置值，例如受让人。谁能提供一个很好的例子来说明如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-05-16T04:46:39.313

```
IssueInput issueInput = IssueInput.createWithFields(new FieldInput(IssueFieldId.ASSIGNEE_FIELD, ComplexIssueInputFieldValue.with("name",
                    <username>)));
jiraRestClient.getIssueClient().updateIssue(<jiraKey>, issueInput).claim(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:03:38.123

查看 Java Jira Rest Client 的 JavaDoc，看起来它只支持更新非常有限的一组问题属性，并且不支持更新受让人 - 请参阅[IssueRestClient 接口的方法。](http://docs.atlassian.com/jira-rest-java-client/0.4/apidocs/com/atlassian/jira/rest/client/IssueRestClient.html)

您最好联系项目维护人员 - Java 客户端仅处于 Alpha 阶段，因此他们可能会定期向其添加新功能。

# kineticjs - 重绘后动力学js重新绑定对象

> ID：13613371
> 
> 赞同：0
> 
> 时间：2012-11-28T19:57:25.193
> 
> 标签：kineticjs, redraw, event-listener

我正在使用 KineticJS 允许用户拖动框的角并使其倾斜。通过大量的 SO 和谷歌搜索，当您拖动其中一个角时，我已经达到了重新绘制新框的程度。

但是，它只能执行一次。在第一次拖动/停止后，角（即圆圈）不再是可拖动或可点击的。在第一次移动之前，圆圈的鼠标悬停文本工作得很好。

为了测试，我使两个框都可以拖动，并且在重绘后它们都是“可达的”。但我已经失去了与圈子的任何联系 - 无法拖动它们或任何东西。我必须将它们重新绑定到听众吗？

有人能指出我正确的方向吗？

这是一个 jsfiddle 的链接：http: [//jsfiddle.net/robschaefer/5qE64/2/](http://jsfiddle.net/robschaefer/5qE64/2/)

所有代码都发布在 jsfiddle 中，但这里是我的 dragmove 和 dragend 函数：

```
 //on drag of corners, redraw line
        layer2.get('Circle').on("dragmove", function(){

            var c1x = c1.getPosition().x;
            var c1y = c1.getPosition().y;
            var c2x = c2.getPosition().x;
            var c2y = c2.getPosition().y;
            var c3x = c3.getPosition().x;
            var c3y = c3.getPosition().y;
            var c4x = c4.getPosition().x;
            var c4y = c4.getPosition().y;

            //draw dotted line
            var dotted = new Kinetic.Line({
                points: [c1x,c1y,c2x,c2y,c3x,c3y,c4x,c4y,c1x,c1y],
                stroke: 'red',
                draggable: true,
                strokeWidth: 3,
            });

            document.getElementById('output').innerHTML = 'WE ARE MOVING!!!';

            layer2.removeChildren();
            layer2.add(dotted);
            layer2.add(c1);
            layer2.add(c2);
            layer2.add(c3);
            layer2.add(c4);
            layer2.draw();

        });

        layer2.get('Circle').on("dragend", function(){

            var c1x = c1.getPosition().x;
            var c1y = c1.getPosition().y;
            var c2x = c2.getPosition().x;
            var c2y = c2.getPosition().y;
            var c3x = c3.getPosition().x;
            var c3y = c3.getPosition().y;
            var c4x = c4.getPosition().x;
            var c4y = c4.getPosition().y;

            document.getElementById('output').innerHTML  = 'drag stopped ' + c1x + ' ' + c1y + ' ' + c2x + ' ' + c2y + ' ' + c3y  + ' ' + c4x + ' ' + c4y;

            layer2.draw();

        }); 
```

谢谢你的帮助！

R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:57:45.447

对于遇到此问题的任何人，这是我修复它的方法：

我把盒子的顶点和连接它们的线放在不同的层上。一旦我这样做了，可用于鼠标操作（鼠标悬停、拖动等）的顶点（圆圈）。

仍然不太清楚为什么我可以访问图层中的其他形状（重绘线）.....

# java - Java：批处理整数

> ID：13613373
> 
> 赞同：8
> 
> 时间：2012-11-28T19:57:32.430
> 
> 标签：java, integer, batching

我想知道最好的方法是在处理时间方面对一组给定的数字进行批处理。Take items：`9, 18, 7, 8, 4, 9, 11, 15, 3, 8,` （item 1的处理时间为9，item 2的处理时间为18，以此类推）

如果批处理时间限制设置为 20，则可能将项目分组为：（`{1, 3, 5} {2} {4, 6} {8, 9} {7, 10}`组 1 为 9+7+4=20）等，因此已制作了 5 批项目，其中内容为 < = 20。

理想情况下，我希望它将它们分类为尽可能少的组。上面的案例是最少 5 个组，内容限制为 20...

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T20:08:25.320

> 如果批处理时间限制设置为 20，...

所以我假设没有元素大于*批处理时间限制*。这是我的方法：

*   首先对项目进行排序。然后获取列表的 2 个指针，一个位于索引 0（*左指针*），另一个位于最后一个索引（*右指针*）。
*   获取右指针的元素并将其添加到子列表中。获取left-pointer的元素并将其添加到同一个子列表中。如果子列表中元素的总和小于限制，则更新左指针（将其设置为下一个元素）并尝试添加它。继续这个过程，直到一个子列表被填满。
*   然后开始填充下一个子列表。使用所有元素来构造子列表。

**Java中的实现：**

```
int[] input = { 9, 18, 7, 8, 4, 9, 11, 15, 3, 8 }; // Input items.
Arrays.sort(input); // Sort the items.
int left = 0, right = input.length - 1; // Left and right pointers.
int remainder = 0, limit = 20;

// list of groups.
ArrayList<ArrayList<Integer>> list = new ArrayList<ArrayList<Integer>>();

while (right >= left) 
{
    ArrayList<Integer> subList = new ArrayList<Integer>();
    list.add(subList);
    // Add the current maximum element.
    subList.add(input[right]);
    if (right == left)
        break;
    remainder = limit - input[right];
    right--;

    // Add small elements until limit is reached.
    while (remainder > input[left]) {
        subList.add(input[left]);
        remainder = remainder - input[left];
        left++;
    }

    remainder = 0; // Reset the remainder.
} 
```

**打印组：**

```
for (ArrayList<Integer> subList : list) 
{
    for (int i : subList)
        System.out.print(i + " ");
    System.out.println();
} 
```

**输出：（**每行表示一组数字）

```
18 
15 3 
11 4 
9 7 
9 8
8 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T20:14:47.070

1.  从 IN 集合中取出最大的并放入新的集合 S。（项目 2，值 18）
2.  尝试找到值 <= (20 - 18) 的最大项目：无，将 S 添加到集合列表中。
3.  如果 IN 不为空 GOTO 1

迭代：

```
 IN: 9, 18, 7, 8, 4, 9, 11, 15, 3, 8
 S1 (18) :  2:18            IN: 9,  _, 7, 8, 4, 9, 11, 15, 3, 8
 S2 (19) :  8:15, 5:4       IN: 9,  _, 7, 8, _, 9, 11,  _, 3, 8
 S3 (20) :  7:11, 1:9       IN: _,  _, 7, 8, _, 9,  _,  _, 3, 8
 S4 (20) :  6: 9, 4:8, 0:3  IN: _,  _, 7, _, _, _,  _,  _, _, 8
 S5 (15) : 10: 8, 3:7       IN: _,  _, _, _, _, _,  _,  _, _, _ 
```

编码 ：

```
public class Knapsack {
   public static void knapsack( int capacity, int[] values, List< int[] > indices ) {
      int[]           in         = Arrays.copyOf( values, values.length );
      List< Integer > workspace  = new LinkedList<>();
      int             wCapacity  = capacity;
      boolean         inProgress = true;
      while( inProgress ) {
         int greatestValue = -1;
         int greatestIndex = -1;
         for( int i = 0; i < in.length; ++i ) {
            int value = in[i];
            if(   value > Integer.MIN_VALUE
               && greatestValue < value && value <= wCapacity )
            {
               greatestValue = value;
               greatestIndex = i;
            }
         }
         if( greatestIndex >= 0 ) {
            workspace.add( greatestIndex );
            in[greatestIndex] = Integer.MIN_VALUE;
            wCapacity -= greatestValue;
         } else if( workspace.isEmpty()) {
            inProgress = false;
         } else {
            int[] ws = new int[workspace.size()];
            for( int i = 0; i < workspace.size(); ++i ) {
               ws[i] = workspace.get(i).intValue();
            }
            indices.add( ws );
            workspace = new LinkedList<>();
            wCapacity = capacity;
         }
      }
   }
   static void print( int[] values, List< int[] > indices )
   {
      int r = 0;
      for( int[] t : indices ) {
         String items = "";
         int    sum   = 0;
         for( int index : t ) {
            int value = values[index];
            if( ! items.isEmpty()) {
               items += ", ";
            }
            items += index + ":" + value;
            sum += value;
         }
         System.out.println( "S" + ++r + " (" + sum + ") : " + items );
      }
   }
   public static void main( String[] args ) {
      int[]         values  = { 9, 18, 7, 8, 4, 9, 11, 15, 3, 8 };
      List< int[] > indices = new LinkedList<>();
      knapsack( 20, values, indices );
      print( values, indices );
   }
} 
```

结果：

```
S1 (18) : 1:18
S2 (19) : 7:15, 4:4
S3 (20) : 6:11, 0:9
S4 (20) : 5:9, 3:8, 8:3
S5 (15) : 9:8, 2:7 
```

# mediawiki - Monobook.js 存储在 MediaWiki 中的什么位置？

> ID：13613379
> 
> 赞同：1
> 
> 时间：2012-11-28T19:58:03.350
> 
> 标签：mediawiki

我正在尝试为我的 wiki 编辑器页面添加额外的按钮，我遇到了这个页面：

[http://en.wikipedia.org/wiki/User:MarkS/Extra_edit_buttons#Simple_Install](http://en.wikipedia.org/wiki/User:MarkS/Extra_edit_buttons#Simple_Install)

在简单安装部分，我需要在 monobook.js 中添加额外的代码。

但是，我在我的 wiki 文件夹中找不到 monobook.js。谁能给我一些指导？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T20:46:48.690

您链接到的“简单安装”适用于希望[*从其个人脚本文件*](http://en.wikipedia.org/wiki/Wikipedia:Skin#Customisation_.28advanced_users.29)启用小工具的 Wikipedia 用户。

正确的主题是[#Installing XEB on your own Wiki](http://en.wikipedia.org/wiki/User:MarkS/Extra_edit_buttons#Installing_XEB_on_your_own_Wiki)，但我并不完全同意（`importScript`例如，已弃用）。您的替代方案是：

*   让您的用户只需从`//en.wikipedia.org/w/index.php?title=User:MarkS/extraeditbuttons.js&action=raw&ctype=text/javascript`. 这是一个可能的 XSS 风险，但导入的用户脚本总是如此。奖励：将始终获得最新版本。
*   将脚本、css 和图像复制到您的域 - 这意味着您负责维护它们。您可以将它们定位在服务器文件系统中的任何位置、`MediaWiki:`命名空间中的 wiki 页面（只有管理员可以编辑）或以结尾的用户子页面`.js`（只有该用户和管理员可以编辑）。帮助文件中推荐了最后一个，但我建议不要使用`User:MarkS`它。确保您不信任的任何人都无法登录该帐户。

    然后将该位置推广给您的用户，以便他们可以从那里导入脚本。

*   更好的是：安装小工具扩展并将脚本迁移到小工具，用户可以在设置中轻松启用。

请注意，该脚本已被弃用，并且可能不适用于当前的 MediaWiki 版本。它在很大程度上取决于脚本加载顺序，这需要一些技巧才能与 ResourceLoader 很好地集成。

另见[手册：接口/JavaScript](https://www.mediawiki.org/wiki/Manual:Interface/JavaScript)；[Manual:User group CSS and Javascript](https://www.mediawiki.org/wiki/Special:MyLanguage/Manual:User_group_CSS_and_Javascript)和[Manual:Page customizes](https://www.mediawiki.org/wiki/Manual:Page_customizations)也有类似的定制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:45:06.800

您链接到的页面涉及用户的 monobook.js，这是一个名为.`User:*UserName*/monobook.js`

如果您想对 wiki 上的所有用户执行相同操作，可以使用站点范围的 monbook.js，它不是一个文件，而是一个名为`MediaWiki:monobook.js`.

请记住，这些脚本仅在您使用 Monobook 皮肤时适用。如果您想为所有皮肤创建一些脚本，请使用或.`User:*UserName*/common.js``MediaWiki:common.js`

# javascript - 在 javascript 中将多个 Google 日历提要合并到一个 JSON 对象中

> ID：13613382
> 
> 赞同：2
> 
> 时间：2012-11-28T19:58:16.573
> 
> 标签：javascript, json, google-calendar-api

我正在尝试从多个 Google 日历中引入 JSON 提要，以便我可以对即将发生的事件进行排序并在“即将发生的事件”列表中显示下一个 X 数字。

我有这个与雅虎合作！管道，但我想避免使用第 3 方进行聚合。我想我很接近，但我无法正确创建 JSON 对象。我将数据放入数组但不是 JSON 格式，所以我无法操作它。

我曾尝试`var myJsonString = JSON.stringify(JSONData);`使用[https://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)但这只是抛出错误。我怀疑是因为我的变量的起始格式错误。我曾尝试将提要称为：`$.getJSON(url);`并创建一个`function concant1()`to do the `JSONData=JSONData.concat(data);`，但它不会触发，我认为它无论如何都会产生相同的最终结果。我还尝试了其他几种方法来获得我想要的不同程度的厄运的最终结果。这是我到目前为止最接近的：

```
var JSONData = new Array();
var urllist = ["https://www.google.com/calendar/feeds/dg61asqgqg4pust2l20obgdl64%40group.calendar.google.com/public/full?orderby=starttime&max-results=3&sortorder=ascending&futureevents=true&ctz=America/New_York&singleevents=true&alt=json&callback=concant1","https://www.google.com/calendar/feeds/5oc3kvp7lnu5rd4krg2skcu2ng%40group.calendar.google.com/public/full?orderby=starttime&max-results=3&sortorder=ascending&futureevents=true&ctz=America/New_York&singleevents=true&alt=json&callback=concant1","http://www.google.com/calendar/feeds/rine4umu96kl6t46v4fartnho8%40group.calendar.google.com/public/full?orderby=starttime&max-results=3&sortorder=ascending&futureevents=true&ctz=America/New_York&singleevents=true&alt=json&callback=concant1"];

urllist.forEach(function addFeed(url){
    alert("The URL being used: "+ url);
    if (void 0 != JSONData){JSONData=JSONData.concat($.getJSON(url));}
    else{JSONData = $.getJSON(url);}
    alert("The count from concantonated JSONData: "+JSONData.length); 
});

document.write("The final count from JSONData: "+JSONData.length+"<p>");
console.log(JSONData) 
```

**更新：** 现在有完整的工作源！！:) 如果有人想就如何提高代码效率提出建议，我们将不胜感激。我希望其他人觉得这很有用。：

```
// GCal MFA - Google Calendar Multiple Feed Aggregator
// Useage: GCalMFA(CIDs,n); 
// Where 'CIDs' is a list of comma seperated Google calendar IDs in the format: id@group.calendar.google.com, and 'n' is the number of results to display.
// While the contained console.log(); outputs are really handy for testing, you will probably want to remove them for regular usage
// Author: Jeramy Kruser - http://jeramy.kruser.me

// This is error-checking code for IE and can be removed
// onerror=function (d, f, g){alert (d+ "\n"+ f+ "\n");}
// This keeps IE from complaining about console.log and can be removed if all the console.log testing statements are removed
// if (!window.console) {console = {log: function() {}};}

// Add a tag to your page to identify it as js-enabled for CSS purposes
document.body.className += ' js-enabled';

// Global variables
var urllist = [];
var maxResults = 3; // The default is 3 results unless a value is sent
var JSONData = {};
var eventCount = 0;
var errorLog = "";

JSONData = { count: 0,
    value : {
    description: "Aggregates multiple Google calendar feeds into a single sorted list",
    generator: "StackOverflow communal coding - Thanks for the assist Patrick M",
    website: "http://jeramy.kruser.me",
    author: "Jeramy & Kasey Kruser",
    items: []
}};

// Prototype forEach required for IE
if ( !Array.prototype.forEach ) {
  Array.prototype.forEach = function(fn, scope) {
    for(var i = 0, len = this.length; i < len; ++i) {
      fn.call(scope, this[i], i, this);
    }
  }
}

// For putting dates from feed into a format that can be read by the Date function for calculating event length.
function parse (str) {
        // validate year as 4 digits, month as 01-12, and day as 01-31 
        str = str.match (/^(\d{4})(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])$/);
        if (str) {
           // make a date
           str[0] = new Date ( + str[1], + str[2] - 1, + str[3]);
           // check if month stayed the same (ie that day number is valid)
           if (str[0].getMonth () === + str[2] - 1) {
              return str[0];
              }
        }
        return undefined;
 }

//For outputting to HTML
function output() {
    var months, day_in_ms, summary, i, item, eventlink, title, calendar, where,dtstart, dtend, endyear, endmonth, endday, startyear, startmonth, startday, endmonthdayyear, eventlinktitle, startmonthday, length, curtextval, k;
    // Array of month names from numbers for page display.
    months = {'0':'January', '1':'February', '2':'March', '3':'April', '4':'May', '5':'June', '6':'July', '7':'August', '8':'September', '9':'October', '10':'November', '11':'December'};
    // For use in calculating event length.
    day_in_ms = 24 * 60 * 60 * 1000;
    // Instantiate HTML Arrays.
    summary = [];
    for (i = 0; i < maxResults; i+=1 ) {
        // console.log("i: "+i+" < "+"maxResults: "+ maxResults);
        if (!(JSONData.value.items[i] === undefined)) {     
            item = JSONData.value.items[i];
            // Grabbing data for each event in the feed.
            eventlink = (item.link[0].href);
            title = item.title.$t; 
            // Only display the calendar title if there is more than one 
            calendar = "";
            if (urllist.length > 1) {
                calendar = '<br />Calendar: <a href="https://www.google.com/calendar/embed?src=' + item.gd$who[0].email + '&ctz=America/New_York">' + item.gd$who[0].valueString + '<\/a> (<a href="https://www.google.com/calendar/ical/' + item.gd$who[0].email + '/public/basic.ics">iCal<\/a>)'; 
            }
            // Grabbing event location, if entered.
            if ( item.gd$where[0].valueString !== "" ) {
                where = '<br />' + (item.gd$where[0].valueString); 
                }
            else {
                where = (""); 
                }
            // Grabbing start date and putting in form YYYYmmdd. Subtracting one day from dtend without a specified end time (which contains colons) to fix Google's habit of ending an all-day event at midnight on the following day.
            dtstart = new Date(parse(((item.gd$when[0].startTime).substring(0,10)).replace(/-/g,"")));
            if((item.gd$when[0].endTime).indexOf(':') === -1) {
                  dtend = new Date(parse(((item.gd$when[0].endTime).substring(0,10)).replace(/-/g,"")) - day_in_ms);
                }
            else {
                  dtend = new Date(parse(((item.gd$when[0].endTime).substring(0,10)).replace(/-/g,"")));
                }
            // Put dates in pretty form for display.
            endyear = dtend.getFullYear();  
            endmonth = months[dtend.getMonth()];
            endday = dtend.getDate();
            startyear = dtstart.getFullYear();  
            startmonth = months[dtstart.getMonth()];
            startday = dtstart.getDate();
            //consolidate some much-used variables for HTML output.
            endmonthdayyear = endmonth + ' ' + endday + ', ' + endyear;
            eventlinktitle = '<a href="' + eventlink + '">' + title + '<\/a>';
            startmonthday = startmonth + ' ' + startday;
            // Calculates the number of days between each event's start and end dates. 
            length = ((dtend - dtstart) / day_in_ms);
            // HTML for each event, depending on which div is available on the page (different HTML applies). Only one div can exist on any one page. 
            if (document.getElementById("homeCalendar") !== null ) {
                // If the length of the event is greater than 0 days, show start and end dates. 
                if ( length > 0 && startmonth !== endmonth && startday === endday ) {       
                        summary[i] = ('<h3>' + eventlink + '">' + startmonthday + ', ' + startyear + ' - ' + endmonthdayyear + '<\/a><\/h3><p>' + title + '<\/p>'); }
                    // If the length of the event is greater than 0 and begins and ends within the same month, shorten the date display.
                    else if ( length > 0 && startmonth === endmonth && startyear === endyear ) {        
                        summary[i] = ('<h3><a href="' + eventlink + '">' + startmonthday + '-' + endday + ', ' + endyear + '<\/a><\/h3><p>' + title + '<\/p>'); }
                    // If the length of the event is greater than 0 and begins and ends within different months of the same year, shorten the date display.
                    else if ( length > 0 && startmonth !== endmonth && startyear === endyear ) {        
                        summary[i] = ('<h3><a href="' + eventlink + '">' + startmonthday + ' - ' + endmonthdayyear + '<\/a><\/h3><p>' + title + '<\/p>'); }
                    // If the length of the event is less than one day (length < = 0), show only the start date.
                    else { 
                        summary[i] = ('<h3><a href="' + eventlink + '">' + startmonthday + ', ' + startyear + '<\/a><\/h3><p>' + title + '<\/p>'); }
            }        
            else if (document.getElementById("allCalendar") !== null ) {
                // If the length of the event is greater than 0 days, show start and end dates. 
                 if ( length > 0 && startmonth !== endmonth && startday === endday ) {           
                           summary[i] = ('<li>' + eventlinktitle + '<br />' + startmonthday + ', ' + startyear + ' - ' + endmonthdayyear + where + calendar + '<\/li>'); } 
                      // If the length of the event is greater than 0 and begins and ends within the same month, shorten the date display. 
                      else if ( length > 0 && startmonth === endmonth && startyear === endyear ) {           
                           summary[i] = ('<li>' + eventlinktitle + '<br />' + startmonthday + '-' + endday + ', ' + endyear + where + calendar + '<\/li>'); } 
                      // If the length of the event is greater than 0 and begins and ends within different months of the same year, shorten the date display. 
                      else if ( length > 0 && startmonth !== endmonth && startyear === endyear ) {           
                           summary[i] = ('<li>' + eventlinktitle + '<br />' + startmonthday + ' - ' + endmonthdayyear + where + calendar + '<\/li>'); } 
                      // If the length of the event is less than one day (length < = 0), show only the start date. 
                      else {  
                           summary[i] = ('<li>' + eventlinktitle + '<br />' + startmonthday + ', ' + startyear + where + calendar + '<\/li>'); }
            } 
        }
        if (summary[i] === undefined) { summary[i] = "";}
        // console.log(summary[i]);
    }
    // console.log(JSONData);
    // Puts the HTML into the div with the appropriate id. Each page can have only one.
    if (document.getElementById("homeCalendar") !== null ) {
        curtextval = document.getElementById("homeCalendar");
        // console.log("homeCalendar: "+curtextval);
        }
    else if (document.getElementById("oneCalendar") !== null ) {
        curtextval = document.getElementById("oneCalendar");
        // console.log("oneCalendar: "+curtextval);
         }
    else if (document.getElementById("allCalendar") !== null ) {
        curtextval = document.getElementById("allCalendar");
        // console.log("allCalendar: "+curtextval.innerHTML);
         }
    for (k = 0; k<maxResults; k+=1 ) { curtextval.innerHTML = curtextval.innerHTML + summary[k]; }
    if (JSONData.count === 0) {
        errorLog += '<div id="noEvents">No events found.</div>';
    }
    if (document.getElementById("homeCalendar") === null ) {
        curtextval.innerHTML = '<ul>' + curtextval.innerHTML + '<\/ul>'; 
        }
    if (errorLog !== "") {
        curtextval.innerHTML += errorLog;
        }
}

// For taking in each feed, breaking out the events and sorting them into the object by date
function sortFeed(event) {  
    var tempEntry, i;
    tempEntry = event;
    i = 0;
    // console.log("*** New incoming event object #"+eventCount+" ***");
    // console.log(event.title.$t);
    // console.log(event);
    // console.log("i = " + i + " and maxResults " + maxResults);
    while(i<maxResults) {
        // console.log("i = " + i + " < maxResults " + maxResults);
        // console.log("Sorting event = " + event.title.$t + " by date of " + event.gd$when[0].startTime.substring(0,10).replace(/-/g,""));
        if (JSONData.value.items[i]) {
            // console.log("JSONData.value.items[" + i + "] exists and has a startTime of " + JSONData.value.items[i].gd$when[0].startTime.substring(0,10).replace(/-/g,""));
            if (event.gd$when[0].startTime.substring(0,10).replace(/-/g,"")<JSONData.value.items[i].gd$when[0].startTime.substring(0,10).replace(/-/g,"")) {
                // console.log("The incoming event value of " + event.gd$when[0].startTime.substring(0,10).replace(/-/g,"") + " is < " + JSONData.value.items[i].gd$when[0].startTime.substring(0,10).replace(/-/g,""));
                tempEntry = JSONData.value.items[i];
                // console.log("Existing JSONData.value.items[" + i + "] value " + JSONData.value.items[i].gd$when[0].startTime.substring(0,10).replace(/-/g,"") + " stored in tempEntry");
                JSONData.value.items[i] = event;
                // console.log("Position JSONData.value.items[" + i + "] set to new value: " + event.gd$when[0].startTime.substring(0,10).replace(/-/g,""));
                event = tempEntry;
                // console.log("Now sorting event = " + event.title.$t + " by date of " + event.gd$when[0].startTime.substring(0,10).replace(/-/g,""));
            }
            else {
                // console.log("The incoming event value of " + event.gd$when[0].startTime.substring(0,10).replace(/-/g,"") + " is > " + JSONData.value.items[i].gd$when[0].startTime.substring(0,10).replace(/-/g,"") + " moving on...");
            }
        }
        else {
            JSONData.value.items[i] = event;
            // console.log("JSONData.value.items[" + i + "] does not exist so it was set to the Incoming value of " + event.gd$when[0].startTime.substring(0,10).replace(/-/g,""));
            i = maxResults;
        }
        i += 1;
    }
}

// For completing the aggregation
function complete(result) {
    // Track the number of calls completed back, we're not done until all URLs have processed
    if( complete.count === undefined ){
        complete.count = urllist.length;        
    }
    // console.log("complete.count = "+complete.count);
    // console.log(result.feed);
    if(result.feed.entry){
        JSONData.count = maxResults;
        // Check each incoming item against JSONData.value.items
        // console.log("*** Begin Sorting " + result.feed.entry.length + " Events ***");
        // console.log(result.feed.entry);
        result.feed.entry.forEach(
            function(event){
                eventCount += 1;
                sortFeed(event);                
            }
        );
    }
    if( (complete.count-=1)<1 ) {
        // console.log("*** Done Sorting ***");
        output();
    }
}

// This is the main function. It takes in the list of Calendar IDs and the number of results to display
function GCalMFA(list,results){
        var i, calPreProperties, calPostProperties1, calPostProperties2;
        calPreProperties = "https://www.google.com/calendar/feeds/";
        calPostProperties1 = "/public/full?max-results=";
        calPostProperties2 = "&orderby=starttime&sortorder=ascending&futureevents=true&ctz=America/New_York&singleevents=true&alt=json&callback=?";

        if (list) {
            if (results) {
                maxResults = results;
            }
            urllist = list.split(',');
            for (i = 0; i < urllist.length; i+=1 ){
                // console.log(urllist[i]);
                if (urllist[i] === ""){ urllist.splice(i,1);}
                else{
                urllist[i] = calPreProperties + urllist[i] + calPostProperties1+maxResults+calPostProperties2;}
            }
            // console.log("There are " + urllist.length + " URLs");
            urllist.forEach(function addFeed(url){
                $.getJSON(url, complete);   
            });
        }
        else {
            errorLog += '<div id="noURLs">No calendars have been selected.</div>';
            output();
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T21:56:10.890

好的，这是需要更改的要点。

更新小提琴：http: [//jsfiddle.net/ynuQ5/2/](http://jsfiddle.net/ynuQ5/2/)

不要`concat`对`$.getJSON`. 正如我上面提到的，这将为您提供 XMLHttpRequest 对象，它比您感兴趣的数据要多得多。然而，关键的是，此时尚未发出请求并且数据尚不可用。

相反，在 AJAX 请求的回调中处理它。我更新了要使用的 URL 列表`&callback=?`，初始化 JSONData var 使其看起来更像第二个屏幕截图中的结构，然后将 AJAX 请求的 javascript 更改为：

```
var JSONData = { count: 0,
    value : {
        description: "Calendars from the Unitarian Universalist Association (UUA.org)",
        generator: "StackOverflow communal coding",
        items: []
}};

// url list declaration goes here    

urllist.forEach(function addFeed(url){
    $.getJSON(url, function(result) {
        if(!result.feed.entry) {
            console.log("No entries from " + url);
            return;
        }
        JSONData.count += result.feed.entry.length;
        JSONData.value.items = JSONData.value.items.concat(result.feed.entry);
        console.log(JSONData);
    });
}); 
```

你马上就会注意到你从谷歌得到的原始数据和雅虎管道转换提供的数据之间仍然存在一些差异。值得注意的是，他们提供的许多值已经从对象转换为文本。例如，谷歌给我们这个：

```
id: Object
    $t: "http://www.google.com/calendar/feeds/5oc3kvp7lnu5rd4krg2skcu2ng%40group.calendar.google.com/public/full/bbidp5qb4vh5vk9apok1cpnino_20130119"
link: Array[2]
    0: Object
        href: "https://www.google.com/calendar/event?eid=YmJpZHA1cWI0dmg1dms5YXBvazFjcG5pbm9fMjAxMzAxMTkgNW9jM2t2cDdsbnU1cmQ0a3JnMnNrY3UybmdAZw"
        rel: "alternate"
        title: "alternate"
        type: "text/html"
    1: Object
    length: 2
published: Object
    $t: "2012-11-13T15:59:31.000-05:00"
title: Object
    $t: "30 Days of Love"
    type: "text"
updated: Object
    $t: "2012-11-13T15:59:31.000-05:00" 
```

当您的雅虎转换返回的数据更像这样：

```
id: "http://www.google.com/calendar/feeds/5oc3kvp7lnu5rd4krg2skcu2ng%40group.calendar.google.com/public/full/bbidp5qb4vh5vk9apok1cpnino_20130119"
link: "href: "https://www.google.com/calendar/event?eid=YmJpZHA1cWI0dmg1dms5YXBvazFjcG5pbm9fMjAxMzAxMTkgNW9jM2t2cDdsbnU1cmQ0a3JnMnNrY3UybmdAZw"
published: "2012-11-13T15:59:31.000-05:00"
title: "30 Days of Love"
updated: "2012-11-13T15:59:31.000-05:00" 
```

当您收到数据时，您可以对其进行更多转换。或者您可以修改显示代码以使用更复杂的原始值。

让我知道我是否可以清除我的代码或响应中的任何内容。

编辑：更新的小提琴显示了如何访问作者（显然是提要名称）、开始时间和标题：http: [//jsfiddle.net/ynuQ5/8/](http://jsfiddle.net/ynuQ5/8/) 如果你想要更具体的东西，请告诉我:-)

# ruby - 对数组进行排序并选择最小的数字？

> ID：13613384
> 
> 赞同：1
> 
> 时间：2012-11-28T19:58:19.817
> 
> 标签：ruby, arrays, sorting

我创建了几个数组，包含多个整数。现在我希望对整数进行排序，首先是最低的。例如，我在一个数组中有这个：6,6,1,2,4,4，我希望它被排序：1,2,4,4,6,6。另外，无论如何我可以让 ruby​​ 识别 4 个最低值，并以某种方式显示它们吗？我试图弄乱.show，但由于我对编程很陌生，所以我对收到的结果感到很困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T20:01:33.333

你试过这个吗？

```
a = [6,6,1,2,4,4]

p a.sort
#=> [1, 2, 4, 4, 6, 6] 
```

`sort`将按升序排序。

如果您需要它们按降序排序，请使用`sort`块：

```
p a.sort {|a,b| b <=> a}
#=> [6, 6, 4, 4, 2, 1] 
```

**更新：**不知道我是如何错过关于最低值的部分......

谢谢@Mladen

```
a.sort.take(4)
#=> [1, 2, 4, 4] 
```

# html - 我将为 2 行 .col 创建什么规则？

> ID：13613389
> 
> 赞同：1
> 
> 时间：2012-11-28T19:58:49.483
> 
> 标签：html, css, rows, multiple-columns

我正在尝试`.column`在我的 html 文档中创建 2 行元素。现在我有 1 行列，然后在页脚下方有另一行。

第一行列似乎符合我的要求，但是当我尝试创建具有相同规则的另一行列时，它垂直对齐而不是水平对齐。我将如何更改 CSS 以使第二行列的功能与第一行一样？

这是HTML：

```
<div id="columns">
  <div class="left column">
    <p>left column</p>
  </div>

  <div class="middle column">
    <p>middle column.</p>
  </div>    

  <div class="right column">
    <p>right column.</p>
  </div>
</div>

<div class="footer">
  <div class="left column">
    <p>left column</p>
  </div>

  <div class="middle column">
    <p>middle column.</p>
  </div>    

  <div class="right column">
    <p>right column.</p>
  </div>
</div> 
```

这是CSS：

```
#columns {
width: 960px;
padding-top: 50px;
margin-bottom: 0px;
}

#columns .column {
    position: relative;
    width: 300px;
    padding: 1%;
    border: solid 1px #000;
}

#columns .left {
    float: left;
}

#columns .middle {
    float: left;
}
#columns .right {
    float: right;
}
#container #col1 {
    width: 320px;
    float: left;
} 
```

这是我的[jsFiddle](http://jsfiddle.net/Cj6dj/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:53:26.607

鉴于您的要求，我相信您想要创建以下内容：

```
----------------------------------------------------------------
|     left column    |   middle column    |    right column    |
----------------------------------------------------------------
|     left column    |   middle column    |    right column    |
---------------------------------------------------------------- 
```

为了做到这一点，您实际上不需要像您创建的那样复杂的系统。您可以简单地执行以下操作：

```
<div id="container">

    <div class="column">left column</div>
    <div class="column">middle column</div>    
    <div class="column">right column</div>

    <div class="footer">
        <div class="column">left column</div>
        <div class="column">middle column</div>    
        <div class="column">right column</div>
    </div>

</div>​ 
```

然后对于 CSS：

```
#container {
    width: 960px;  /* Provides a container with width = 3 columns + 2 paddings */
    padding: 30px; /* Provides left, right, top and bottom padding of 30px */
    margin: 0;     /* No margin around the bounding box */
}

#container .column {
    border: solid 1px #000; /* The border you were using */
    box-sizing: border-box; /* This forces width/height specs to set the size of 
                               the column's edge, INCLUDING border/padding */
    float: left;            /* Allows each column element to stack left */
    padding: 1%;            /* Provides the padding you wanted */
    width: 300px;           /* Sets a width */
} 
```

我已经在 CSS 中指出了为什么每一部分都很重要。

不过，关键是属性`box-sizing: border-box;`。如果没有这个，添加到`.column`元素的边框和填充实际上会使它们成为`300px`+ `1%`+ `2px`（`1px`左，`1px`右） - 这使得 3 列比你想要的宽得多。通过应用`box-sizing: border-box;`它强制`.column`元素适应指定宽度*内*`1%`的填充和`solid 1px #000`边框。*`300px`*

 *换句话说 -`300px`实际上 =的 3 列`900px`。然后，当您在`30px`左右添加时，`#container`它仍然适合`#container`' 的`960px`宽度。

[您可以在我对您的小提琴的更新](http://jsfiddle.net/TroyAlford/Cj6dj/1/)中看到所有这些工作*

# javascript - 通过使用 Javascript 查找内容来删除表格行

> ID：13613392
> 
> 赞同：1
> 
> 时间：2012-11-28T19:58:52.183
> 
> 标签：javascript

我有这个代码：

```
<table>
    <tbody>
        <tr>
            <td align="left">X</td>
            <td>X1</td>     
        </tr>
        <tr>        
            <td width="150" align="left">Y</td>
            <td>Y1</td>
        </tr>
        <tr>    
            <td align="left">Status: </td>
            <td colspan="4">
                <select name="status" size="1">
                    <option selected="selected" value="2">one</option>
                    <option value="1">two</option>
                </select>                   
            </td>
        </tr>
        <tr>        
            <td width="150" align="left">Z</td>
            <td>Z1</td>
        </tr>   
    </tbody>
</table> 
```

并想用 Javascript 删除这一行：

```
<tr>    
    <td align="left">Status: </td>
    <td colspan="4">
        <select name="status" size="1">
            <option selected="selected" value="2">one</option>
            <option value="1">two</option>
        </select>                   
    </td>
</tr> 
```

问题是我没有任何 id 或类用于识别。有没有办法通过仅用于 Firefox 的 javascript 搜索“状态：”或 name="status"（将其用于 Greasemonkey）来删除该行？

我不能使用 jQuery，也不能编辑代码来设置任何 id

最好的问候伯恩特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T20:03:54.407

如果你负担得起不兼容 IE7，你可以这样做：

```
​var elements = document.querySelectorAll('td[align="left"]');
for (var i=0; i<elements.length; i++) {
    var text = elements[i].textContent || elements[i].innerText;
    if (text.trim()=='Status:') {
       elements[i].parentNode.parentNode.removeChild(elements[i].parentNode);   
    }
} 
```

[示范](http://jsfiddle.net/kk2NB/)

为了与 IE7 兼容，您可能必须对所有行和单元格进行迭代，这并不会真正变慢，但会不太清楚。

请注意，我使用`trim`了 IE8 上不存在的。如果需要，要让它在这个浏览器上工作，你可以添加这个通常的修复（来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim)）：

```
if(!String.prototype.trim) {
  String.prototype.trim = function () {
    return this.replace(/^\s+|\s+$/g,'');
  };
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T20:05:19.090

```
function removeRowByCellValue(table,cellValue) {
    var cells = table.getElementsByTagName("TD");
    for(var x = 0; x < cells.length; x++) {

        // check if cell has a childNode, prevent errors
        if(!cells[x].firstChild) {
            continue;
        }

        if(cells[x].firstChild.nodeValue == cellValue) {
            var row = cells[x].parentNode;
            row.parentNode.removeChild(row);
            break;
        }
    }
} 
```

首先获取对您的表格的引用，因为您没有可以使用的 ID `getElementsByTagName`..（这里我假设它是您文档中的第一个表格）

```
var myTable = document.getElementsByTagName("table")[0]; 
```

然后您可以使用以下参数调用该函数

```
removeRowByCellValue(myTable,"Status: "); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T20:07:11.173

```
var xpathResult = document.evaluate("//td[starts-with(.,'Status:')]", document.body, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null);
var element = xpathResult.singleNodeValue.parentNode;
while (element.firstChild)
  element.removeChild(element.firstChild); 
```

jsbin [http://jsbin.com/urehuw/1/edit](http://jsbin.com/urehuw/1/edit)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T20:07:15.897

如果您想与旧版 IE 兼容：

```
function closest(el, tag) {
    if (!el || !tag) {
        return false;
    }
    else {
        return el.parentNode.tagName.toLowerCase() == tag ? el.parentNode : closest(el.parentNode, tag);
    }
}

// gets all 'select' elements
var sel = document.getElementsByTagName('select');

// iterates through the found 'select' elements
for (var i=0, len = sel.length; i<len; i++) {
    // if the 'select' has the name of 'status'
    if (sel[i].name == 'status') {
        // uses the closest() function to find the ancestor 'tr' element
        var row = closest(sel[i], 'tr');
        // access the 'tr' element's parent to remove the 'tr' child
        row.parentNode.removeChild(row);
    }
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/2jvYD/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T20:15:11.640

只需使用这个

```
 var gettag =document.getElementsByTagName("tr")[3] ; // the third tag of tr
         document.removeChild(gettag); 
```

# javascript - javascript 的 Date() 对象

> ID：13613393
> 
> 赞同：1
> 
> 时间：2012-11-28T19:58:55.260
> 
> 标签：javascript, date, object, time

```
var date = new Date() 
```

输出：`"Wed Nov 28 2012 14:55:24 GMT-0500 (Eastern Standard Time)"`

想摆脱UT和时间输出：

```
"Wed Nov 28 2012" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T20:01:25.867

您可以使用[`toDateString()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toDateString)：

```
new Date().toDateString();  // "Wed Nov 28 2012" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T20:02:27.467

使用[`toDateString`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toDateString)方法代替 (implicit) [`toString`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toString)：

```
> new Date().toDateString()
"Wed, 28 Nov 2012" 
```

但是，[它是依赖于实现的](http://es5.github.com/#x15.9.5.3)，所以如果你真的需要你的格式，你就不会绕过

```
var date = new Date();
var day = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"][date.getDay()];
var mon = ["Jan", "Feb", "Apr", "Mar", "Mai", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"][date.getMonth()];
return day+" "+mon+" "+date.getDate()+" "+date.getFullYear(); 
```

或查看[众多 Date 库](https://stackoverflow.com/a/12632212/1048572)之一及其`format`方法。

# c# - 接口和抽象类在解耦方面的区别？

> ID：13613402
> 
> 赞同：18
> 
> 时间：2012-11-28T19:59:17.520
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

众所周知，接口和抽象类之间基本上有两个重要区别。

1.  我们可以在抽象类中定义函数。当我们想在一个类中添加一个函数而不需要跟踪它的所有实现时，这是有利的。

2.  我们可以有多个接口实现。

我才知道我们可以在解耦方面区分它们？

你的评论...

**另外，如果你能提供一个非常基本的链接来解释接口和抽象类的解耦？**

我们通常使用**业务逻辑层**、**数据访问层**（包含抽象函数）和**DataAccess.SqlServer 层**。正确的？尽管我们知道业务需求，但为什么要创建**数据访问层**（包含抽象功能），为什么**业务逻辑层**不能直接访问**DataAccess.SqlServer 层**？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-28T20:08:52.837

**解耦**

在编程和设计中，这通常是使代码在尽可能少的依赖下可重用的行为。

**在这种情况下的工厂模式**

使用工厂模式时，您有一个集中式工厂，它可以创建对象而不必自己定义它们。这取决于对象的定义。

**抽象和接口**

*界面*

定义接口是最佳实践，因为它允许使用轻量级类型进行推理，并且还提供了所有继承类都必须遵守的蓝图。例如，`IDisposable`必须实现`Dispose`方法。请注意，这与接口是分离的，因为每个继承的类`IDisposable`都将定义自己的`Dispose`方法功能。

*抽象的*

Abstract 类似于接口，因为它用于继承和推理，但它包含所有类都将继承的定义。每辆汽车都会有一个引擎，所以一个好的汽车抽象类可以包含一组预定义的引擎方法。

## **编辑**

**解释**

在这里，您将看到一个使用接口和抽象类的简单继承示例。当接口被抽象类继承，然后它的方法被定制时，就会发生解耦。这允许类继承抽象类并且仍然具有与接口相同的类型。优点是当期望的类型是原始接口时，可以使用继承抽象类的类。

**解耦**

该优势允许使用符合预期接口的任何实现。因此，可以编写和传入许多不同的重载。这是一个示例。

**例子**

*接口定义*

```
public interface IReady
{
    bool ComputeReadiness();
} 
```

*遗产*

```
public abstract class WidgetExample : IReady
{
    public int WidgetCount { get; set; }
    public int WidgetTarget { get; set; }
    public bool WidgetsReady { get; set; }

    public WidgetExample()
    {
        WidgetCount = 3;
        WidgetTarget = 45;
    }

    public bool ComputeReadiness()
    {
        if (WidgetCount < WidgetTarget)
        {
            WidgetsReady = false;
        }
        return WidgetsReady;
    }
}

public class Foo : WidgetExample
{
    public Foo()
    {
        this.WidgetTarget = 2;
    }
}

public class Bar : IReady
{
    public bool ComputeReadiness()
    {
        return true;
    }
} 
```

*解耦*

```
public class UsesIReady
{
    public bool Start { get; set; }
    public List<string> WidgetNames { get; set; }

    //Here is the decoupling. Note that any object passed
    //in with type IReady will be accepted in this method
    public void BeginWork(IReady readiness)
    {
        if (readiness.ComputeReadiness())
        {
            Start = true;
            Work();
        }
    }

    private void Work()
    {
        foreach( var name in WidgetNames )
        {
            //todo: build name
        }
    }
} 
```

*多态性*

```
public class Main
{
    public Main()
    {
        //Notice that either one of these implementations 
        //is accepted by BeginWork

        //Foo uses the abstract class
        IReady example = new Foo();
        UsesIReady workExample = new UsesIReady();
        workExample.BeginWork(example);

        //Bar uses the interface
        IReady sample = new Bar();
        UsesIReady workSample = new UsesIReady();
        workSample.BeginWork(sample);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-17T15:16:57.267

我一直在寻找答案，对于这个问题来说，它们似乎都有点复杂。所以这是我（希望）更简单的答案。

*   ****当代码的当前范围没有任何**实现**细节**可用时，应使用**接口。****
***   **当您可以获得**一些**实现**细节**时，应该使用**摘要*******   而且，为了完整起见，当**所有**实现**细节**都可用时，您应该使用**classes**。****

 ****在解耦方面，虽然我有点同意 Shelakel 的观点，但出于这个问题的目的，并说明完全解耦的设计实践，我建议如下：

*   **始终**使用**接口**来定义外部行为。
*   当您有**一些**可用的实现**细节**时，使用 **抽象**类来定义它们，但**在抽象类上实现接口**，并依次从这些类继承。

这确保了以后如果您需要在新实现中更改一些模糊的实现细节，您可以在不修改现有抽象类的情况下这样做，并且还能够将不同的实现类型分组到不同的抽象类中。

编辑：我忘了包括链接:) [http://www.codeproject.com/Articles/11155/Abstract-Class-versus-Interface](http://www.codeproject.com/Articles/11155/Abstract-Class-versus-Interface)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-16T11:44:11.373

抽象类和接口不是互斥的选择。我经常定义一个接口和一个实现该接口的抽象类。

该接口确保最大程度的解耦，因为它不会强制您的类属于特定的继承层次结构，因此您的类可以从任何其他类继承。换句话说，任何类都可以从接口继承，而已经从其他类继承的类不能从抽象类继承。

另一方面，在抽象类中，您可以分解出所有实现通用的代码，而使用接口，您必须从头开始实现所有内容。总而言之，最好的解决方案通常是同时使用抽象类和接口，因此可以从重用抽象类中包含的公共代码（如果可能）转变为从头开始重新实现接口（如果需要） .

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-16T19:24:50.870

为了脱钩而脱钩是徒劳的。

接口旨在用于不需要知道使用细节的集成（例如，SendEmail()）。常见用途包括组件、服务、存储库以及作为 IOC 和通用实现的标记。

具有包含接口的泛型类型约束的扩展方法允许与 Scala 中具有相似可组合性的特征相似的功能。

```
public interface IHasQuantity { double Quantity { get; } }
public interface IHasPrice { decimal PricePerUnit { get; } }

public static class TraitExtensions
{
    public static decimal CalculateTotalPrice<T>(this T instance)
        where T : class, IHasPrice, IHasQuantity
    {
        return (decimal)instance.Quantity * instance.PricePerQuantity;
    }
} 
```

在我看来，抽象类和类继承被过度使用了。

SOLID 设计原则告诉我们 Liskov 的替换原则意味着只有在继承的类可以替换祖先时才应该使用类继承。这意味着应该实现所有方法（不抛出新的 NotImplementedExeption()）并且应该按预期运行。

我个人发现类继承在模板方法模式以及状态机的情况下很有用。在大多数情况下，诸如构建器模式之类的设计模式比深度继承链更有用。

现在回到你的问题；如果不是所有时间，接口应该被使用最多。类继承应该在内部使用，并且仅在外部用于定义目的，然后接口应该用于交互和通过工厂提供的具体实现或通过 IOC 容器注入。

理想情况下，当使用外部库时，应该创建一个接口并实现一个适配器以仅公开所需的功能。这些组件中的大多数允许预先配置或在运行时通过 IOC 容器解析。

在解耦方面，将应用程序与其实现（尤其是外部依赖项）解耦以尽量减少更改的原因非常重要。

我希望我的解释能为您指明正确的方向。请记住，最好重构**工作**实现，然后定义接口以公开功能。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-12T04:36:03.600

我不打算讨论这两种结构的优缺点，因为这方面有足够的资源。

但是，就一个组件与另一个组件的“解耦”而言，接口继承比抽象类或一般的类继承要好得多（事实上，我认为抽象与否在解耦方面并没有太大区别`abstract`确实是防止在没有具体实现的情况下实例化类）。

上述论点的原因是，接口允许您将暴露范围缩小到“依赖组件”所需的绝对最小值，如果它需要单个方法接口可以轻松做到这一点，甚至是没有任何方法的标记接口。这对于基类（抽象或具体）可能很困难，因为它应该实现该基类的所有“通用”功能。因此，依赖于“基本类型”的组件将自动“看到”所有常见功能，即使它不需要它们来实现其目的。

接口还为您提供了最佳的灵活性，因为即使是从没有共同点的基类继承的类，仍然可以实现接口，并由期望该接口的组件使用。`IDisposable`接口就是一个很好的例子。

因此，我的结论是，对于解耦问题，您的所有组件都依赖于接口而不是基类型，并且如果您发现实现该接口的大多数类都有一个通用实现，那么就有一个实现该接口的基类并从该基类继承其他类。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-12T08:35:16.673

*核心*区别在于：

*   接口公开零个或多个方法*签名*，所有后代*必须*依次实现（否则代码甚至无法编译）。接口公开的方法可以隐式实现（从接口派生的每个类型都可以访问它们）或显式实现（只有将对象类型转换为接口类型本身才能访问方法）。[更多细节和例子可以在这个问题中找到](http://msdn.microsoft.com/en-us/library/vstudio/ms229013%28v=vs.100%29.aspx)。

*   抽象类公开零个或多个成熟的方法，后代*可以*使用或覆盖这些方法，提供自己的实现。这种方法允许您定义可自定义的“默认”行为。抽象类允许您轻松添加新方法而不会出现任何问题（`NotImplementedException`向抽象类添加方法时真的很出色），而向接口添加方法需要您修改*所有*实现它的类。

最后一点是，一个类可以同时实现*多个*接口。一些现实世界的例子可能是：

*   同时提供 USB 和 LAN 端口的硬盘是多接口继承的一个很好的证明
*   带有标记为“蓝牙”的 LED 但板载没有蓝牙硬件的笔记本电脑很好地类比了不实现抽象方法的概念（你有 LED，你有小 B 符号，但屋顶下什么都没有）。

**编辑 1**

这是一个[MSDN 链接](http://msdn.microsoft.com/en-us/library/vstudio/ms229013%28v=vs.100%29.aspx)，解释了如何在接口和类之间进行选择。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-16T02:10:56.043

使用抽象类定义契约意味着你的实现者必须继承这个抽象类。由于 C# 不支持多重继承，因此这些实现者将无法拥有替代的类层次结构，这对某些人来说可能是相当有限的。换句话说，抽象类基本上会抢夺类层次结构特性的实现者，而这通常是获取或使用（框架或类库的）某些其他功能所必需的。

使用接口定义契约使实现者可以自由地使用类层次结构，以使用他们认为合适的任何方式，换句话说，提供更多的实现自由。

从评估标准的角度来看，当我们在这里谈论耦合时，我们可以谈到三个可分离的作者的关注点，即使用（调用）API/合约的客户端、API/合约的定义者和 API/合约的实现者; 我们可以谈论自由（限制越少越好）、封装（需要的意识越少越好）和面对变化时的韧性。

我认为接口导致比抽象类更松散的耦合，特别是在定义者和实现者之间，因为为实现者提供了更高的自由度。

另一方面，在版本控制方面，您至少可以向抽象类添加另一个方法，而不必更新子类实现，只要添加的方法在抽象类中具有实现。跨 DLL 边界对接口进行版本控制通常意味着添加另一个接口，推出起来要复杂得多。（当然，如果您可以一起重构所有实现（例如，因为它们都在同一个 DLL 中），这不是问题）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-06T08:45:50.397

***理解和记住接口***和***抽象类***之间区别的最好方法是记住***抽象类***是一个***普通类***，你可以用***抽象类***做任何你可以用***普通类做的事情，但有两个例外****。*

1.  *你**不能实例化**一个抽象类*
2.  *您**只能在抽象类中使用抽象方法***

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-19T03:24:58.647

对接口进行编码提供了可重用性和多态性。就类实现接口而言，接口或抽象类可以传递给参数，而不是实现接口的类。Us 常见的技术问题是通过设计接口和抽象类并实现它并给出子类化具体的功能实现。想象它类似的框架。框架定义了接口和抽象类，并实现了大家通用的。抽象的由客户端根据自己的要求实现。

```
public interface Polymorphism{
void run();
Void Bark();
Energy getEnergy(Polymorphism test);
Public abstract class EnergySynthesis implements Polymorphism{
abstract void Energy();
Void Bark(){
 getEnergy(){

}
void run(){
getEnergy();

}public EnegyGeneartion extends EnergySynthesis  {
Energy getEnergy(Polymorphism test){
return new Energy( test); 
}
MainClass{

EnegyGeneartion test=new EnegyGeneartion ();
test.getEnergy(test);
test.Bark()
.
.
.
.
.
//here in Energy getEnergy(Polymorphism test) any class can be passed as parameter that implemets interface 
```****

# android - PhoneGap，第一页上的 jQueryMobile pageinit 不会触发

> ID：13613411
> 
> 赞同：2
> 
> 时间：2012-11-28T19:59:45.677
> 
> 标签：android, jquery, cordova, jquery-mobile, page-init

我正在使用 jQueryMobile 和 PhoneGap 开发一个跨平台的移动应用程序。我正在绑定到应用程序中加载的第一页（“主页”页面），但 pageinit 事件不会触发。这是我的自定义 javascript：

```
$('#home').live('pageinit', function()
{
    alert('firing pageinit');
} 
```

这是我的带有页面定义的 index.html 文件：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height" />
    <link rel="stylesheet" href="css/jquery.mobile-1.2.0.min.css" />
    <link rel="stylesheet" href="css/custom.css" />
</head>
<body>
    <div data-role="page" id="home">
        <div data-role="header" data-position="fixed">
            <a href="#refresh" data-icon="refresh" data-transition="slide" id="refresh">Refresh</a>
            <h1>MyListingsApp</h1>
            <a href="#add_listing" data-icon="plus" data-transition="slide" id="add_listing_button">Add</a>
        </div>

        <div data-role="content">
            <ul data-role="listview" id="listings" data-filter="true" data-filter-placeholder="Filter listings...">
                <li id="hit_to_begin"></li>
            </ul>
        </div>

    </div>

<script type="text/javascript" src="cordova-2.2.0.js"></script>
    <script src="js/jquery-1.8.2.min.js"></script>
    <script src="js/jquery.mobile-1.2.0.min.js"></script>

    <script src="js/jquery.ui.map.full.min.js"></script>
    <script src="js/jquery.ui.map.services.min.js"></script>
    <script src="js/jquery.i18n.min.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
        app.initialize();
    </script>
    <script type="text/javascript" src="js/custom.js"></script>

</body> 
```

该事件没有触发，我得到的只是加载的主页。根据 jQueryMobile 文档，这是处理页面初始化自定义的正确绑定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T09:16:12.390

看这个例子： http: [//jsfiddle.net/Gajotres/BGkaq/](http://jsfiddle.net/Gajotres/BGkaq/)，我给你做了2个例子，你可以在页面底部找到它们。

事件绑定示例一：

```
// in (url^=home) home is a page id
$(':jqmData(url^=home)').live('pagebeforecreate',function (event) {
    alert('Event has been triggered!');            
}); 
```

事件绑定示例二：

```
$('#home').live('pagebeforecreate',function (event) {
    alert('Event has been triggered!');            
}); 
```

# php - 如何上传 csv 文件并更新 mysql 数据库？

> ID：13613413
> 
> 赞同：0
> 
> 时间：2012-11-28T19:59:52.663
> 
> 标签：php, mysql, file-upload, csv

我想使用 csv 文件来更新 mysql scv 表。如何编码？我没有做这项工作的经验。

```
<p>please select a scv file to upload</p>
<form action="index.php" method="post">
    <input type="file" name="scv"  />
    <input type="submit" value="submit" />
</form>
<?php 
    mysql_connect('localhost','root','admin');
    mysql_select_db('linjuming');
    // how to upload a scv file and insert or update the "csv" table?

?> 
```

![在此处输入图像描述](../Images/e398323d47aabe9a0fc697484e41fc6c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:09:51.970

Your upload file:

```
<form action="upload_target.php" method="post" enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file"><br>
<input type="submit" name="submit" value="Submit">
</form> 
```

Your `upload_target.php`

$ext = pathinfo($_FILES['file']['name'], PATHINFO_EXTENSION);

```
if ($ext == "csv" && $_FILES["file"]["error"] == 0)
{
    $target = "upload/" . $_FILES["file"]["name"];
    move_uploaded_file($_FILES["file"]["tmp_name"], $target);

    if (($handle = fopen($target, "r")) !== FALSE) 
    {
        while (($data = fgetcsv($handle, 1000, ";")) !== FALSE) 
        {
            print_r($data);
        }

        fclose($handle);
    }
} 
```

Very basic and with very few checks / validations. The `print_r($data)` contains one line of your csv that you can now insert in your database.

However, I would recommend using PDO or MySQLi for that task, since the mysql functions of PHP will be deprecated in the future.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:07:03.347

这有几个部分：

首先，您的表单必须设置 enctype，如下所示：

```
<form enctype="multipart/form-data"  action="index.php" method="post"> 
```

否则，它将不接受文件上传。

完成此操作后，您可以使用[$_FILES](http://php.net/manual/en/reserved.variables.files.php)变量访问该文件。文件上传后，您可以像这样访问它：

```
if (isset($_FILES["scv"])) {
    $file = $_FILES["scv"];
    $file_name = $file["name"];
    $ext = pathinfo($file_name, PATHINFO_EXTENSION);
    if ($ext!="CSV" && $ext!="TXT") {
        die('The file must be csv or txt format.');
    }
    $saveto_path_and_name = '/path/to/file.csv'; // Where you want to save the file
    move_uploaded_file($file["tmp_name"], $saveto_path_and_name);
} 
```

保存文件后，您可以打开它并导入它。这并非易事，但这里有一些入门代码：

```
// Open the file for reading
$handle = @fopen($saveto_path_and_name, "r") or die(__("Unable to open uploaded file!", "inventory"));
// Grab the first row to do some checks
$row = fgets($inv_file, 4096);
// See if it's comma or tab delimited
if (stripos($inv_row, "\t")) {
    $sep = "\t";
} else {
    $sep = ",";
}

while ( ! feof($handle)) {
    $rowcount = 0;
    // Get the individual fields
    $inv_fields = explode($sep, $inv_row);
    $fields = array();
    // Iterate through the fields to do any sanitization, etc.
    foreach ($inv_fields as $field) {
        // Highly recommended to sanitize the variable $field here....
        $fields[] = $field;
        $rowcount++;
}
    // This is where you would write your query statement to insert the data
    // This is just EXAMPLE code.  Use the DB access of your choice (PDO, MySQLi)
    $sql = vsprintf('INSERT INTO `table` (`column`, `column2`, ...) VALUES (%s, %d, ...)', $fields);
    // Get the next row of data from the file
    $row = fgets($inv_file, 4096);
} 
```

# android - 保持应用方向设置为纵向

> ID：13613416
> 
> 赞同：2
> 
> 时间：2012-11-28T19:59:57.140
> 
> 标签：android, orientation, cordova, phonegap-plugins, childbrowser

我正在使用 Sencha Touch、PhoneGap 和 PhoneGap 的`ChildBrowser`插件创建一个 Android 应用程序。

我想将应用程序本身的方向固定为纵向，但允许`ChildBrowser`旋转到设备的方向。

我尝试检测`ChildBrowser`活动何时在`onResume`，但这没有用。（也许是因为它扩展了一个插件？）

在这里找到了一个类似的线程，但还没有解决方案： [PhoneGap Fixed Orientation + ChildBrowser Non-Fixed Orientation (Android)](https://stackoverflow.com/questions/9458670/phonegap-fixed-orientation-childbrowser-non-fixed-orientation-android)

还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:36:58.803

好吧，如果您已将活动设置为具有属性 android:screenOrientation="portrait" 并且您正在使用 ChildBrowser.showWebPage 命令，那么您会被卡住，因为它会在应用程序内打开一个对话框，也就是说，它仍然是应用程序的一部分.

但是，如果您使用 ChildBrowser.openExternal 则它会打开浏览器并再次启用横向。

# wif - 调试 ADFS 2.0 错误

> ID：13613418
> 
> 赞同：0
> 
> 时间：2012-11-28T19:59:58.743
> 
> 标签：wif, .net-4.5, adfs, ws-trust

我正在尝试使用 C# 从 ADFS 2.0 ws-trust 服务获取 SAML 2.0 令牌。流行的示例是这个 [http://leastprivilege.com/2012/11/16/wcf-and-identity-in-net-4-5-external-authentication-with-ws-trust/](http://leastprivilege.com/2012/11/16/wcf-and-identity-in-net-4-5-external-authentication-with-ws-trust/)。但是，此示例使用 UserNameWSTrustBinding，根据这篇文章[http://msdn.microsoft.com/en-us/library/jj157091.aspx](http://msdn.microsoft.com/en-us/library/jj157091.aspx)，它没有跳转到 4.5 的 System.IdentityModel 命名空间。

我一直在试验这个样本和我发现的一些变体，但到目前为止，我能得到的唯一结果是各种错误消息。我想知道是否有任何好的方法来调试最新的“安全令牌请求具有无效或格式错误的元素。”。我打开了 WCF 登录，并确定此消息是由 ADFS 服务作为故障返回的。

查看 ADFS 服务器上的 AD FS 2.0/Admin 事件，没有任何错误迹象。一些帖子表明这在 ADFS 场环境中很常见，但我的是一个简单的单服务器配置。

有没有人有好的方法来诊断这个？或者，是否有一个很好的示例，其中包含 ADFS 服务器端的任何配置要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:32:50.250

此链接[http://social.msdn.microsoft.com/Forums/en/Geneva/thread/33fc091b-505c-481c-a61c-a8541a5ccf23](http://social.msdn.microsoft.com/Forums/en/Geneva/thread/33fc091b-505c-481c-a61c-a8541a5ccf23)显示了如何为 ADFS 2.0 的服务器端启用 WCF 和 WIF 跟踪。修改 C:\Program Files\Active Directory Federation Services 2.0\Microsoft.IdentityServer.Servicehost.exe.config 中的配置文件。（将三个 switchValue 设置更改为 Verbose 并修改跟踪侦听器。）按照说明进行操作时，请确保更改侦听器的类型。就像是

```
<add name="ADFSWifListener" type="System.Diagnostics.XmlWriterTraceListener" initializeData="c:\logs\adfs1.svclog" /> 
```

我还必须授予“每个人”对 C:\Logs 文件夹的完全访问权限，如果您愿意，可以通过审核来优化这些权限。创建 .svclog 文件后，可以使用 %ProgramFiles%/Microsoft SDKs/Windows/v8.0A/bin/NETFX 4.0 工具（或任何其他 SDK 版本）中的 SvcTraceViewer.exe 查看它们。

注意：Microsoft 不支持将跟踪数据直接记录到文件的概念，因此您需要关闭此功能或根据本文[http://technet.microsoft.com/en-us/library/adfs2-troubleshooting进行配置-configuring-computers(WS.10).aspx](http://technet.microsoft.com/en-us/library/adfs2-troubleshooting-configuring-computers(WS.10).aspx)用于生产部署。

# ios - 如何将 SDK 与从 Apple 开发人员门户下载的 Xcode 和 SDK 捆绑包分开

> ID：13613420
> 
> 赞同：1
> 
> 时间：2012-11-28T20:00:03.707
> 
> 标签：ios, xcode, sdk

[我从https://developer.apple.com/downloads/index.action#](https://developer.apple.com/downloads/index.action#)下载了 Xcode 4 和 iOS SDK 4.3 包。这是一个 dmg 文件，我想知道是否有办法找出 iOS SDK 在 dmg 文件中的位置并将其复制到本地磁盘？以前有人试过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:18:43.693

是的，当我尝试在 Linux 上构建非官方的 iOS 工具链时，我已经尝试过（顺便说一句，成功了）。

您必须安装 DMG - 最好的选择是在 Finder 中双击 DMG 或键入

```
hdiutil attach filename.dmg 
```

到命令行。

挂载文件后，您会看到一堆目录 - 我不记得确切的路径，但应该有一个名为 Packages 的目录。在那里，您会找到十几个扩展名为`.pkg`. 实际上，这些是包含 GZip 档案的[XAR 档案](http://code.google.com/p/xar/)，而 GZip 档案又包含[`cpio`](http://www.gnu.org/software/cpio/)档案。

在提取了您认为合乎逻辑的那些之后（查找 iPhoneOS4.3.sdk.pkg 和编译器 [clang, GCC]），您将拥有 iOS SDK 的基本组件，即：工具链（包含 clang 和GCC 编译器和必要的工具，包括汇编器、链接器和 GNU 调试器、GDB）以及头文件、框架和库（例如，UIKit、Foundation、libSystem、libsqlite3）。

从现在开始，您将能够编写简单的 makefile 并编译 iOS 应用程序，而无需使用 Xcode。

# java - 从 JAVA 启动 MATLAB 代码的问题

> ID：13613424
> 
> 赞同：1
> 
> 时间：2012-11-28T20:00:19.590
> 
> 标签：java, jpeg, matlab, libjpeg

SI 有一些 MATLAB 脚本，我使用 MATLAB builder JA 成功地将它们编译成 .jar。我已将此 jar 导入到一个测试项目中，它工作正常，但是当我尝试将该 .jar 文件导入另一个项目时，我收到此错误：

```
{Warning: Wrong JPEG library version: library is 80, caller expects 62} 
{??? Error using ==> jpeg_depth
Wrong JPEG library version: library is 80, caller expects 62

Error in ==> readjpg at 13

Error in ==> imread at 443 
```

启动错误的项目使用swing和awt，.jar工作的测试项目没有。那么，这可能是相关的吗？？？我的意思是，这就像使用 awt 启动 libjpeg 80 的事实，并且似乎 .jar 已使用 libjpeg60 版本编译。所以，我的问题是： - 有什么方法可以强制 MATLAB 在编译时使用 libjpeg80？- 如果没有，我该怎么办？

提前致谢。

PS：似乎该错误与使用 libjpeg 的所有功能有关，因为当代码具有 Swing Imagicon 或 BufferedImage 时会给出此错误，而不是当这种代码（图像操作）不存在时。所以，.jar 是针对 libjpeg.so.62 头文件编译的，我需要它来重新编译 libjpeg.so.8。我试过删除 libjpeg.so.62 并重新编译，但这没有用。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:03:15.460

已解决：我使用了不正确的 JRE。作为默认项目，我在我的项目中使用了系统JRE，在将其更改为MATLAB自带的之后，问题就消失了。希望这可以帮助某人。

# asp.net-mvc-3 - 在没有不显眼的 ajax 的情况下验证 MVC 4 表单

> ID：13613427
> 
> 赞同：0
> 
> 时间：2012-11-28T20:00:26.743
> 
> 标签：asp.net-mvc-3, jquery-validate

我试图在不使用 Unobtrusive Validation 的情况下验证我的表单，因为我的验证比一般的要复杂一些。需要什么来实现这一点？只需将 Validation.js 脚本包含到我的文件中并写出 jquery 代码？这就是我到目前为止所取得的成就......

```
$(document).ready(function () {
    $("#formSearchByMRN").validate({
        rules: {
            MRN: { required: true, minLength: 6 }
        },
        messages: {
            MRN: 'Please Enter a Valid MRN'
        }
    });
}); 
```

但是，每当我提交表单时，都没有经过验证？这是我的表格...

```
@using (Html.BeginForm("SearchByMRN", "SearchPatients", FormMethod.Post, new { id = "formSearchByMRN" }))
 {
    <p>
    <ul>
        <li>@Html.Label("MRN#", new { @for = "MRN" })<br />@Html.TextBox("MRN","", new { id = "MRN" })</li>            

        <li>@Html.Label("MRNDrop", new { @for = "MRNDrop" })<br /> @Html.DropDownList("MRNDrop", (List<SelectListItem>)TempData["MRNLIST"], new { id = "MRNDrop" })</li>
    </ul>
    </p>
        <input type="submit" value="Search by MRN" id="submitMRN"/>                                                                                                              
 } 
```

我错过了什么。我的 _layout.cshtml 文件中有我的 jquery Valition 脚本。

# python - 无法让条目出现在烧瓶 Web 应用程序中

> ID：13613430
> 
> 赞同：0
> 
> 时间：2012-11-28T20:00:42.527
> 
> 标签：python, forms, input, sqlite, flask

我正在尝试创建一个基本的 Web 应用程序，它接受“添加查询”页面上的文本输入，然后将它们显示在“搜索查询”页面中。至此，我已经成功连接了数据库，网站在使用的时候也没有报错。

但是，当我输入输入并单击“添加查询”页面上的提交时，“搜索查询”页面不会更新或显示任何新输入。

我认为我的代码有问题，没有将输入链接到数据库。

**更新：**有人提到我没有在我的视图子类中调用方法“add_entry”和“show_entries”。但是，我的主 py 文件不应该处理函数吗？

以下是我正在开发的 webapp 的一些基本屏幕截图：

![在此处输入图像描述](../Images/58f96280b254fd04a0ff72fc3e30c718.png)

![在此处输入图像描述](../Images/c573a4e69cae56cb606c174808ea3c1f.png)

以下代表我的 py 文件：

这是我的主要 py 文件（queries-Final2.py）

```
#functions
def show_entries():
    db = get_db()
    cur = db.execute('select title, columns, query, notes, tags from entries order by id desc')
    entries = [dict(title=row[0], columns=row[1],query=row[2],notes=row[3],tags=row[4]) for row in cur.fetchall()]
    return render_template('search-queries.html', entries=entries)

def add_entry():
    if not session.get('logged_in'):
    abort(401)
    db = get_db()
     db.execute('insert into entries (title, columns, query, notes, tags) values (?, ?)',
      [request.form['title'],
       request.form['columns'],
       request.form['query'],
       request.form['notes'],
       request.form['tags']
       ])
    db.commit()
     flash('New entry was successfully posted')
    return redirect(url_for('add-queries'))

# Routes
   app.add_url_rule('/',
   view_func=Main.as_view('main'),
   methods=["GET"])

   app.add_url_rule('/login/',
   view_func=Login.as_view('login'),
   methods=["GET", "POST"])

   app.add_url_rule('/search-queries/',
   view_func=SearchQueries.as_view('search-queries'),
   methods=["GET", "POST"])

   app.add_url_rule('/add-queries/',
   view_func=AddQueries.as_view('add-queries'),
   methods=["GET", "POST"])

   app.add_url_rule('/edit-queries/',
   view_func=EditQueries.as_view('edit-queries'),
   methods=["GET", "POST"]) 
```

以及类文件：

这是我的“搜索查询”页面视图

```
class SearchQueries(flask.views.MethodView):
  @utils.login_required
  def get(self):
    return flask.render_template('search-queries.html') 
```

这是我的“添加查询”页面视图

```
class AddQueries(flask.views.MethodView):
  @utils.login_required
  def get(self):
    return flask.render_template('add-queries.html')

  def post(self):
    return flask.render_template('search-queries.html') 
```

这些是我的 html 文件：

这是我的“添加查询”html 页面

```
{% extends "layout.html" %}
{% block content %}
<h1 class="pageHeader" xmlns="http://www.w3.org/1999/html">Add a query</h1>
<h3 class="pageSubHeader">Sooo many queries to add</h3>
<form action="{{ url_for('add-queries') }}" method=post class=add-entry>
    <dl>
        <dt>Title:
        <dd><input type=text size=54 name=title>
        <dt>Columns: (Store ID, Date, transaction-total, etc... )
        <dd><textarea name=columns rows=5 cols=40></textarea>
        <br>
        <dt>Query: (The text of the query)
        <dd><textarea name=query rows=5 cols=40></textarea>
        <br>
        <dt>Notes: (Anything that the analyst should note)
        <dd><textarea name=notes rows=5 cols=40></textarea>
        <br>
        <dt>Tags: (traffic, conversion, etc... )
        <dd><input name=tags type=text size=54>
        <br>
        <dd><input type=submit value="Submit query">
    </dl>
</form>
{% endblock %} 
```

这是我的“搜索查询”html 页面

```
{% extends "layout.html" %}
{% block content %}
    <h1 class="pageHeader">Have fun searching for queries</h1>
    <h3 class="pageSubHeader">Search for a large query</h3>
    <ul class=entries>
      {% for entry in entries %}
         <li><h2>{{ entry.title }}</h2>{{ entry.columns|safe }}
      {% else %}
          <li><em>Unbelievable.  No entries here so far</em>
      {% endfor %}
    </ul>
{% endblock %} 
```

可能有一些非常明显的东西我错过了，所以这里的任何帮助将不胜感激。提前致谢！

*   低级实习生

**更新：**我的数据库使用 SQLite3

schema.sql 文件如下：

```
drop table if exists entries;
create table entries (
  id integer primary key autoincrement,
  title string not null,
  columns string not null,
  query string not null,
  notes string not null,
  tags string not null
 ); 
```

**问题：**在我正在查看的示例中，开发人员使用

```
 @app.route('/add/') 
```

在声明函数之前。这是做什么的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:38:09.770

你是对的，你的代码中没有任何地方真正*调用*你的`add_entries`和`show_entries`函数。

我不是视图类的粉丝，所以我从来没有使用过它们，但是，你会不会做这样的事情：

```
class AddQueries(flask.views.MethodView):
  @utils.login_required
  def get(self):
    return flask.render_template('add-queries.html')

  def post(self):
    db = get_db()
    db.execute('insert into entries (title, columns, query, notes, tags) values (?, ?, ?, ?, ?)',
    [request.form['title'],
     request.form['columns'],
     request.form['query'],
     request.form['notes'],
     request.form['tags']
    ])
    db.commit()
    flash('New entry was successfully posted')
    return flask.render_template('search-queries.html') 
```

所以基本上，当您`POST`向`AddQueries`视图添加内容时，它*实际上*会将其插入到数据库中。同样，您的`ShowQueries`类将需要*实际*运行当前在您的`show_entries()`函数中的代码。

# c++ - 如何在不等待的情况下延迟使用 kbhit()

> ID：13613431
> 
> 赞同：1
> 
> 时间：2012-11-28T20:01:03.347
> 
> 标签：c++, c, while-loop, delay, kbhit

**我正在制作一个程序，其中我有一个无限循环。我使用 kbhit() 来检测是否按下了某个键。我也在循环中使用延迟。所以问题是如果我按下键我必须等待延迟函数中给出的时间来执行 kbhit() 函数动作.....**

```
while(1)
{
delay(1000);
if(kbhit()) 
{
//
//
//
//
}
} 
```

//现在我必须等待 1000 毫秒才能执行 kbhit() 的代码如何解决这个问题..

提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:08:49.070

请改进你的提问方式！无论如何，我会尽力帮助您：您似乎想使用[中断。](http://en.wikipedia.org/wiki/Interrupt)

但在大多数情况下，以一定的速度检查键盘输入实际上就足够了。例如，以 60FPS 运行的游戏每秒不需要超过 60 次检查。您可以解释您需要这种按键处理方式。

# android - Android - MediaStore.Video.query() 返回 null

> ID：13613443
> 
> 赞同：6
> 
> 时间：2012-11-28T20:01:55.640
> 
> 标签：android, video, media, android-mediaplayer, mediastore

我正在尝试使用 MediaStore.Video.query() 方法从视频文件（标题、语言、艺术家）中检索元数据。但是，该方法始终返回 null。代码如下：

```
String[] columns = {
    MediaStore.Video.VideoColumns._ID,
    MediaStore.Video.VideoColumns.TITLE,
    MediaStore.Video.VideoColumns.ARTIST
};

Cursor cursor = MediaStore.Video.query(getApplicationContext().getContentResolver(), videoUri,columns);

if (cursor != null) {
  cursor.moveToNext();
}

String title = cursor.getString(cursor.getColumnIndex(MediaStore.Video.VideoColumns.TITLE)); 
```

关于如何使用android返回视频元数据的任何建议？

==更新

当我在很多地方搜索时，我尝试了一种使用 CursorLoader 的解决方案。但是，CursorLoader 的 loadInBackground() 方法也返回 null。代码如下所示：

```
String[] columns = {
                MediaStore.Video.VideoColumns.TITLE
        };

        Uri videoUri = Uri.parse("content://mnt/sdcard/Movies/landscapes.mp4");

        CursorLoader loader = new CursorLoader(getBaseContext(), videoUri, columns, null, null, null);

        Cursor cursor = loader.loadInBackground();

        cursor.moveToFirst();

        String title = cursor.getString(cursor.getColumnIndex(MediaStore.Video.VideoColumns.TITLE)); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-29T13:05:58.183

`Uri.parse("content://mnt/sdcard/Movies/landscapes.mp4")`不是 的 Uri `MediaStore`。它会尝试寻找一个不存在`ContentProvider`的权限。`mnt`

`MediaStore`只能处理`content://media/...`你应该通过独占获得的 Uris `MediaStore`，而不是使用`Uri.parse()`.

在您的情况下，例如使用以下内容

```
Uri uri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;
String[] columns = {
        MediaStore.Video.VideoColumns._ID,
        MediaStore.Video.VideoColumns.TITLE,
        MediaStore.Video.VideoColumns.ARTIST
    };

String selection = MediaStore.Video.VideoColumns.DATA + "=?";
String selectionArgs[] = { "/mnt/sdcard/Movies/landscapes.mp4" };

Cursor cursor = context.getContentResolver().query(uri, columns, selection, selectionArgs, null); 
```

该`MediaStore.Video.VideoColumns.DATA`字段包含视频的路径，您可以通过这种方式搜索某个视频。至少目前，未来版本的 Android 可能会改变这一点。

* * *

你的第二个例子是使用`CursorLoader`错误的方式。如果您调用`loader.loadInBackground()`自己，则将数据加载到前台。参见例如[http://mobile.tutsplus.com/tutorials/android/android-sdk_loading-data_cursorloader/](http://mobile.tutsplus.com/tutorials/android/android-sdk_loading-data_cursorloader/)

你接下来要做的是

```
 Cursor cursor = getCursor();
    cursor.moveToFirst();
    String title = cursor.getString(/* some index */); 
```

这将导致`CursorIndexOutOfBoundsException`如果您`cursor`有 0 行并且`cursor.moveToFirst()`因为没有第一行而失败。游标停留在第一行之前（在 -1 处）并且该索引不存在。在您的情况下，这意味着在数据库中找不到该文件。

为了防止这种情况，请使用 - 的返回值，只有在有第一行的`moveToFirst`情况下才会如此。`true`

```
 Cursor cursor = getCursor(); // from somewhere
    if (cursor.moveToFirst()) {
        String title = cursor.getString(/* some index */);
    } 
```

一个更完整的示例，包括在所有情况下检查`null`和关闭`cursor`

```
 Cursor cursor = getCursor(); // from somewhere
    String title = "not found";
    if (cursor != null) {
        if (cursor.moveToFirst()) {
            title = cursor.getString(/* some index */);
        }
        cursor.close();
    } 
```

我猜您尝试查找的文件未在数据库中建立索引（重新启动会强制索引器再次运行）或路径错误。

或者您使用的路径实际上是一个符号链接，在这种情况下 MediaStore 可能使用不同的路径。

使用它来摆脱符号链接

```
 String path  = "/mnt/sdcard/Movies/landscapes.mp4";
    try {
        path = new File(path).getCanonicalPath();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

* * *

> 是的，我现在进行了测试，它正在抛出 IndexOutOfBoundsException。当我使用 cursor.getColumnCount() 它返回 1

`cursor.getColumnCount()`是列数，而不是行数。它应该始终与您在 中请求的列数相同`columns`。您需要检查`cursor.getCount()`是否要检查行数。

* * *

尝试将 MediaStore 已知的所有视频转储到 logcat 中，以防它没有按预期显示。

```
public static void dumpVideos(Context context) {
    Uri uri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;
    String[] projection = { MediaStore.Video.VideoColumns.DATA };
    Cursor c = context.getContentResolver().query(uri, projection, null, null, null);
    int vidsCount = 0;
    if (c != null) {
        vidsCount = c.getCount();
        while (c.moveToNext()) {
            Log.d("VIDEO", c.getString(0));
        }
        c.close();
    }
    Log.d("VIDEO", "Total count of videos: " + vidsCount);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-28T05:02:03.287

我更新了您的代码，它可以工作，只需检查一下

```
public static void dumpVideos(Context context) {
Uri uri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;
String[] projection = { MediaStore.Video.VideoColumns.DATA };
Cursor c = context.getContentResolver().query(uri, projection, null, null, null);
int vidsCount = 0;
if (c != null) {
    c.moveToFirst();
    vidsCount = c.getCount();
    do {
        Log.d("VIDEO", c.getString(0));
    }while (c.moveToNext());
    c.close();
}
Log.d("VIDEO", "Total count of videos: " + vidsCount);
} 
```

# sql-server-2008 - 用于定位值的下一条和上一条记录的 T-SQL 查询

> ID：13613444
> 
> 赞同：0
> 
> 时间：2012-11-28T20:01:58.827
> 
> 标签：sql-server-2008, tsql

我正在寻找基于两个坐标的最接近的坐标集，对照表中的任何坐标集。

我有一个包含 5 列数据的表。`colB`并且`colC`具有非连续值。

```
colB             colC

12.54         -87.36
41.25          68.56
55.98         -82.45
40.12          78.52 
```

`colA`是主键

我需要将两个值传递给查询，例如`colB`值 40.81 和值 75.56 `colC`。

然后确定四个值的差值之间最接近的记录。`colB`在此示例中，将根据传入的值 40.81 检查rec 2 和 4 for 之间的差异。因此，41.25 - 40.81 = .44 和 40.81 - 40.12 = .69 所以在这种情况下，记录 2 更接近，我需要返回记录 2 的所有字段。

如果有人可以帮助我接近解决这个 T-SQL 查询，我想我可以完成要求的下一部分，该部分重复`colC`值的过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:16:08.507

我会这样做 - 但我得到的结果 4 是最接近的：

```
declare @example table 
(
    colA bigint not null identity(1,1) primary key clustered
    , colB numeric(18,9)
    , colC numeric(18,9)
)

insert @example select 12.54, -87.36
insert @example select 41.25,  68.56
insert @example select 55.98, -82.45
insert @example select 40.12,  78.52

declare @B numeric(18,9) =  40.81 
, @C numeric(18,9) = 75.56

select top 1 *
from @example
order by power(@B - colB, 2) + power(@C - colC, 2) 
```

**备选方案** 以上为您提供了 B 和 C 差异最小的记录。如果您想要 B 或 C 的最小差异，请使用以下命令：

```
select top 1 *
from @example
order by 
    case 
        when abs(@B - colB) < abs(@C - colC) 
            then abs(@B - colB) 
        else 
            abs(@C - colC) 
    end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:14:45.963

我假设您的列的数据类型为 float 。您正在寻找的是您传入的值与 colB 值之间差异的最低绝对值。这是我的简单解决方案，可能不是最高效的：

```
DECLARE @value float = 40.81;

SELECT TOP 1 *
FROM MyTable m
ORDER BY ABS(colB-@value); 
```

# php - 解析错误 - 意外的 T_CONSTANT_ENCAPSED_STRING

> ID：13613445
> 
> 赞同：1
> 
> 时间：2012-11-28T20:02:00.400
> 
> 标签：php, parsing, laravel

PHP抱怨说

```
PHP Parse error:  syntax error, unexpected T_CONSTANT_ENCAPSED_STRING, 
expecting ')' in /home/edler2/www/blog/application/config/database.php on line 74 
```

这似乎完全错误，现在我被卡住了。

../config/database.php 看起来像这样。

```
70  'mysql' => array(
71      'driver'   => 'mysql',
72      'host'     => 'localhost',
73      'database' => 'blogtest' 
74      'username' => 'root',
75      'password' => 'xxxxx',
76      'charset'  => 'utf8',
77      'prefix'   => '',
78  ), 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T20:04:30.943

```
73      'database' => 'blogtest' ,
                                 ^ this comma is missing. 
```

# php - 同一服务器上的两个应用程序中的 Autiloader 和 PHP 会话粉碎

> ID：13613446
> 
> 赞同：0
> 
> 时间：2012-11-28T20:02:07.183
> 
> 标签：php, class, session, autoloader

当我在两个具有相同框架并共享相同会话的应用程序之间切换时（因为它们位于同一台服务器上，等等 localhost），我遇到了 PHP中的[Autoloader 功能](http://php.net/manual/en/language.oop5.autoload.php)的一个问题。

Autoloader 实际上一直在从另一个应用程序（从我在当前应用程序之前在同一浏览器中打开的应用程序）中搜索类（模型和库），并抛出一个错误，即在此应用程序中找不到mentoned 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:02:07.183

我通过简单地从浏览器中删除所有缓存解决了这个问题（实际上只需要删除带有 PHP_SESSION 信息的 cookie）。

有谁知道为什么会发生这种情况以及如何防止它？

谢谢

# mysql - 限制mysql日志文件大小

> ID：13613449
> 
> 赞同：8
> 
> 时间：2012-11-28T20:02:10.960
> 
> 标签：mysql, database, logging, logfile

我有一个经常超过 30gb 的 mysql 日志文件，当你意识到你的服务器因为这个文件已满时，这很糟糕。我需要一个简单的解决方案来将此文件限制在 1gb 左右，我不需要运行那么长时间的日志，而且我希望以后避免这个问题。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T20:29:23.670

要在 my.cnf 文件中指定它，请备份当前的 my.cnf 文件（始终推荐），停止从站，停止 MySQL 服务器并放置以下选项：

```
 # relay log restrictions
   relay-log-space-limit=15G 
```

然后保存并退出文件并启动 MySQL。除非你配置不同，否则 MySQL 会自动启动从属线程。

# regex - 使用 ColdFusion 在正则表达式中为电子邮件转义 + 和 %

> ID：13613453
> 
> 赞同：0
> 
> 时间：2012-11-28T20:02:28.963
> 
> 标签：regex, coldfusion, coldfusion-9, email-validation

我正在为可能需要一组特殊字符的电子邮件验证进行编码。我可以成功地将其他人添加到 RegEx。但是，当我尝试使用 '+' 和 '%' 时，它给了我一个错误。我使用'\'来允许特殊字符。

```
\+ --> adds a space removing + sign
\% --> removes 3rd char after % sign 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T20:12:27.070

ColdFusion 有几个内置的验证功能，例如电子邮件地址。你可以简单地使用类似的东西：

```
<cfif IsValid("email", YourEmailVar)>
    <!--- do what you want for success here --->
<cfelse>
    <!--- do what you want for validation failure here --->
</cfif> 
```

[IsValid 函数的文档](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7fb9.html)

如果您愿意，该`IsValid`功能还允许您使用 RegEx。

*编辑*

为了验证来自 URL 范围的变量，只需将其添加到变量名称之前。像这样：

```
<cfif IsValid("email", URL.YourURLEmailVar)> 
```

# eclipse - Eclipse CDT 省略了 -D 的前导破折号

> ID：13613456
> 
> 赞同：0
> 
> 时间：2012-11-28T20:02:38.637
> 
> 标签：eclipse, eclipse-cdt

我正在使用指定的 _D 选项 MY_OPT 编译 .c 文件。在**属性 -> c++ 构建 -> 设置 -> gcc c 编译器 -> 符号中**，我创建了一个条目并将 MY_OPT 作为值。

当我编译时，我收到错误 127，说找不到 DMY_OPT。我了解到错误 127 意味着它确实来自 bash，经过一番思考，我意识到由于不存在破折号（如在 -DMY_OPT 中），bash 确实会报告没有名为 DMY_OPT 的输入文件可以找到。

我搜索了 google 和 stackoverflow，发现了很多类似的问题，但无法用足够窄的搜索词来制定任何远程相关的答案，所以我希望这里有人能提供帮助。

注意：我删除了 SYMBOL，而是在杂项字段中添加了 -DMY_OPT。没有变化（或者我得到了关于不删除以前的错误的 Eclipse Juno 错误。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:57:56.570

我发现这个问题的答案是对 Eclipse 构建的整个命令行的测试。我的读

```
${COMMAND ${OUTPUT_FLAG} ${OUTPUT_PREFIX}${OUTPUT} ${INPUTS} } ${FLAGS}
         ^                                                   ^ 
         } accidentally moved to here ---------------------->| 
```

我本来打算将 ${FLAGS} 移动到命令行的末尾，但也设法将右侧 } 从 ${COMMAND}..

**注意：**这样做是为了让编译命令行看起来像链接器命令行，其中应该将 ${FLAGS} 移动到行尾，从而将“.o”列表和“-o xxx”放在"_l's: 和 "-L's" 是 gcc/g++ 的某些版本所要求的。

# android - Xamarin Monodroid 在 Android 应用上自动更新数据

> ID：13613462
> 
> 赞同：0
> 
> 时间：2012-11-28T20:02:54.913
> 
> 标签：android, xamarin.android

有没有办法或示例使用服务或其他东西来自动更新应用程序所做的任何更改以显示在使用同一应用程序的其他设备上？我们有一个本地/本地应用程序，我们在内部使用 Android 平板电脑来获取和编辑数据。或多或少是一个签到应用程序。我们需要：

1.  如果一个平板电脑上的用户在其应用程序中进行数据更改，则自动更改运行同一应用程序的其他平板电脑上的状态/数据，而无需手动刷新或重新启动应用程序。

2.  如果用户对数据进行了更改并将其保存，我们是否可以向其他平板电脑发送推送通知以指示已对数据进行了更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T19:17:09.660

如果您“在线”工作或至少在网络上工作，您可以使用 REST 请求将您的更改或通知发送到服务器（取决于您需要什么）。然后可以通过[Signal-R](https://github.com/SignalR/SignalR)或[PushSharp等库处理对其他设备的通知](https://github.com/Redth/PushSharp)

# wordpress - 根据用户语言 cookie 翻译 Wordpress

> ID：13613466
> 
> 赞同：0
> 
> 时间：2012-11-28T20:03:25.047
> 
> 标签：wordpress, localization, internationalization

目前有一个wordpress安装。我已经创建了带有翻译的 .mo 文件，但不想使用 wp-config.php 来更改语言。我希望根据我们在用户切换语言时创建的 cookie 更改前端的语言（例如“发布者：”等）。我似乎找不到任何方法来做到这一点。wordpress 中是否有一个钩子，我们可以在其中显示基于用户 cookie 的翻译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-22T04:19:42.427

Wordpress 已经使用该`gettext`实用程序内置了此功能，并带有许多插件来为您提供便利。

毫无疑问，最好的插件之一是[qTranslate](http://wordpress.org/plugins/qtranslate/)插件，它提供了许多挂钩和自定义功能，并且以与您描述的方式大致相同的方式运行。它是免费的。

# iphone - cellForRowAtIndexPath 加载可见单元格上方和下方的 3 个单元格

> ID：13613468
> 
> 赞同：0
> 
> 时间：2012-11-28T20:03:33.690
> 
> 标签：iphone, objective-c, ios, ipad, uitableview

我知道 cellForRowAtIndexPath 只加载可见单元格。有没有办法强制它加载它下方和上方的 3 个单元格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T20:07:59.803

不，`cellForRowAtIndexPath`只加载当前单元格。

您的问题表明您正在做的事情在您的`cellForRowAtIndexPath`. 例如，您可能正在对图像进行延迟加载，但还想“预取”候选“下一个”单元格所需的一些图像，以减少用户对延迟加载的体验。但是，一般来说，您实际上不会预取`UITableViewCell`对象本身，而只是预取这些单元格需要的数据片段。

您可能需要向我们提供更多关于您认为需要预取哪些内容的信息，我们可以提供更好的建议。这是一个重要的问题，在某种程度上取决于您的控制器在呈现视图时使用的精心设计的模型。您可能想要分享一些关于您的模型以及您想要确保前三个和后三个单元格可用的东西的性质。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T21:06:33.720

UITableViews 通常会自己处理决定何时加载特定单元格的整个过程。它们会自动从中删除不可见的单元格，有时将这些单元格存储在内部可重用队列中。

UITableView 提供了一种机制，可用于通过在可用时检索预先分配的单元格来加快单元格创建过程。如果您正确使用此方法，您的表格视图中的滚动速度应该不会有问题。为此，您需要在创建时为单元格配置 reusabilityIdentifier，并`-[UITableView dequeueReusableCellWithIdentifier:]`在实现中需要新单元格时调用该方法`cellForRowAtIndexPath:`。

如果您仍然需要更快的速度，拥有自己的可重用和预配置单元队列应该是可行的 - 尽管您可以从实现这样的东西中获得的优势还有待观察（您将有更多的行可供使用，但是`cellForRowAtIndexPath:`对于被请求的单元格也会减慢）。您还需要非常小心，不要与 UITableView 的标准队列发生冲突。

查看[Apple 的 UITableView 参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)以获取有关可重用性机制的更多信息。

# arrays - 按对象的 Int 对对象数组进行排序

> ID：13613473
> 
> 赞同：1
> 
> 时间：2012-11-28T20:03:42.630
> 
> 标签：arrays, sorting, object, integer, int

因此，我尝试实现我的 Quicksort 以按权重对一组边进行排序，这在我的 Kruskal 算法实现中是 int 。javascript中是否有一个内置函数用于按属性对对象数组进行排序？在这种情况下，他们的体重。从最小的重量到最大的重量。

这是我的边缘课程。

```
 class Edge
    {            
        private int u;
        private int v;
        private int weight;

        public Edge(int i, int i2, int w)
        {
            u = i;
            v = i2;
            weight = w;
        }

        public int getU() {
            return u;
        }

        public int getV() {
            return v;
        }

        public int getWeight() {
            return weight;
        }
    } 
```

克鲁斯卡尔的密码

```
class MSTKruskal
    {           
        Edge[] mst(int[][] G)
        {
            Edge A[] =  new Edge[G.length - 1];               
            Forest aForest = new Forest(G.length);                
            Edge E[] = new Edge[(G.length * G.length - G.length)/2];
            int i3 = 0;
            for (int i = 0; i < G.length; i++)
            {
               for(int i2 = i+1; i2 < G.length; i2++)
               {                       
                   Edge anEdge = new Edge(i, i2, G[i][i2]);
                   E[i3] = anEdge;
                   i3++;
               }
            }
            print(E);          
            //QuickSort(E, 0, E.length);
            print(E);
            int index = 0;
            for (int i = 0; i < E.length; i++)
            {
                if (aForest.findSet(E[i].getU()) != aForest.findSet(E[i].getV()))
                {

                        A[index] = E[i];
                        index++;
                        aForest.union(E[i].getU(), E[i].getV());

                }
            }
            aForest.printA();
            return A;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:11:20.557

在 javascript 中，您可以将函数作为参数传递给排序方法，该函数应采用 2 个参数（a 和 b），并返回：

*   0，如果 a == b
*   <0，如果 a < b
*   >0，如果 a > b

在你的情况下，它应该是这样的：

```
var a=[15,7,100,50];
a.sort(function(a,b){return a.weight-b.weight;}); 
```

因此，您可以轻松地按任何数组内容的属性或更复杂的标准进行排序。

# ios - 在 ZBar 扫描仪顶部添加叠加层

> ID：13613476
> 
> 赞同：4
> 
> 时间：2012-11-28T20:03:58.017
> 
> 标签：ios, titanium, zbar-sdk, titanium-modules, zbar

我正在使用[ZBar SDK](http://zbar.sourceforge.net/iphone/sdkdoc/index.html)在 iPhone 上读取 QR 码，但是我想在相机/扫描仪视图的底部添加一些文本，作为用户的说明性文本。这是我到目前为止所拥有的：

```
UIView *cameraOverlayView = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
    cameraOverlayView.backgroundColor = [UIColor redColor];

    UILabel *instructionLabel = [[UILabel alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
    [instructionLabel setTextColor:[UIColor grayColor]];
    [instructionLabel setBackgroundColor:[UIColor clearColor]];
    [instructionLabel setFont:[UIFont fontWithName: @"Trebuchet MS" size: 24.0f]];
    [instructionLabel setCenter:cameraOverlayView.center];
    [cameraOverlayView addSubview:instructionLabel];

    reader.cameraOverlayView = cameraOverlayView;
    reader.wantsFullScreenLayout = YES;

    [instructionLabel release];
    [cameraOverlayView release]; 
```

这是完整的课程：

[https://gist.github.com/4163761](https://gist.github.com/4163761)

不幸的是，标签没有显示。ZBar 的文档说为此目的使用 cameraOverlayView，但它似乎不起作用。

另一个注意事项，我使用的是 Titanium 框架，所以这就是额外的 Titanium 类的来源，但是我的问题应该是针对 ZBar 的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T00:24:00.063

你看到 cameraOverlayView 了吗？将背景颜色设置为红色或其他东西： cameraOverlayView.backgroundColor = [UIColor redColor];

如果您根本看不到 cameraOverlayView，那么您可能需要设置 reader。showsZBarControls = NO 这将禁用默认控件并使用您的自定义覆盖。

如果您确实看到了 cameraOverlayView，那么标签可能超出了界限。玩弄原点并将其放置到位。

顺便说一句，我看到您没有使用 ARC，请确保发布指令标签！

# java - 休眠@ElementCollection 和嵌入

> ID：13613478
> 
> 赞同：1
> 
> 时间：2012-11-28T20:04:15.937
> 
> 标签：java, hibernate

我有三门课：

```
@Embeddable
public class A  {
    private List<String> refs;
    @ElementCollection
    public List<String> getRefs() {
        return refs;
    }

    public void setRefs(List<String> refs) {
        this.refs = refs;
    }
} 
```

和

```
@Embeddable
public class B  {
    private A reference;

    @Embedded
    public A getReference() {
        return reference;
    }

    public void setReference(A reference) {
        this.reference = reference;
    }
} 
```

最后：

```
@Entity
public class C {
    private Long id;

    private List<B> glossaryReferenceList;
    private B mainNarrator;

    @Embedded
    public B getMainNarrator() {
        return mainNarrator;
    }

    public void setMainNarrator(B mainNarrator) {
        this.mainNarrator = mainNarrator;
    }

    @ElementCollection
    public List<B> getGlossaryReferenceList() {
        return glossaryReferenceList;
    }

    public void setGlossaryReferenceList(List<B> glossaryReferenceList) {
        this.glossaryReferenceList = glossaryReferenceList;
    }

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

} 
```

但是休眠无法处理它并且在启动时它会抛出`java.util.ConcurrentModificationException`

但要么我删除

1.  C 或 GlossaryReferenceList 属性
2.  参考财产形式A

它得到了解决，并且在休眠启动期间没有引发异常。（我的意思是上述更改之一解决了异常）

看起来hibernate无法处理3级嵌入式对象

顺便说一句，我`ArrayIndexOutOfBoundException:3`从同一个来源得到了好处，但我不记得它是如何变成的`java.util.ConcurrentModificationException`

任何身体都可以帮忙吗？我对 Hibernate 3 级嵌入式对象是否正确？请帮忙！

这是详细的例外：

```
Error creating bean with name 'sessionFactory' defined in class path resource [applicationContext-persistence.xml]: Invocation of init method failed; nested exception is java.util.ConcurrentModificationException
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:728)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:449)
at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:650)
at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1582)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
at java.lang.Thread.run(Thread.java:619)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [applicationContext-persistence.xml]: Invocation of init method failed; nested exception is java.util.ConcurrentModificationException
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:400)
at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:275)
at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.detectPersistenceExceptionTranslators(PersistenceExceptionTranslationInterceptor.java:139)
at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.<init>(PersistenceExceptionTranslationInterceptor.java:79)
at org.springframework.dao.annotation.PersistenceExceptionTranslationAdvisor.<init>(PersistenceExceptionTranslationAdvisor.java:70)
at org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor.setBeanFactory(PersistenceExceptionTranslationPostProcessor.java:103)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1475)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1443)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
... 24 more
Caused by: java.util.ConcurrentModificationException
at java.util.AbstractList$Itr.checkForComodification(AbstractList.java:372)
at java.util.AbstractList$Itr.remove(AbstractList.java:357)
at org.hibernate.cfg.Configuration.originalSecondPassCompile(Configuration.java:1717)
at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1423)
at org.hibernate.cfg.Configuration.buildMappings(Configuration.java:1375)
at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:717)
at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:188)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
... 39 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-02T13:15:16.730

我终于明白了答案！两级 ElementCollection 无法实现，因为应该有对它的引用。

# macos - Sparkle 错误：更新未正确签名

> ID：13613482
> 
> 赞同：0
> 
> 时间：2012-11-28T20:04:26.673
> 
> 标签：macos, cocoa, sparkle

我正在使用 sparkle 进行软件更新。我使用 Apple 开发人员证书签署了我的应用程序并上传了构建。然后我尝试通过调用“checkForUpdates:”方法进行更新。但是我收到一条错误消息，提示“更新未正确签名”。可能是什么原因？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:01:36.593

您可能需要在此处查看有关如何正确为 Sparkle 进行代码设计的提示： [https ://github.com/sparkle-project/Sparkle/issues/216](https://github.com/sparkle-project/Sparkle/issues/216)

具体来说，对所有二进制文件和框架进行签名，并使用正确的代码设计参数进行签名。

# asp.net - 是否可以在没有 SmtpServer.Credentials = New _ 和 Net.NetworkCredential 的情况下在 vb.net 中发送电子邮件

> ID：13613483
> 
> 赞同：1
> 
> 时间：2012-11-28T20:04:28.353
> 
> 标签：asp.net, vb.net, email, smtp

我想知道是否可以在没有以下代码的情况下在 vb.net 中发送电子邮件

```
SmtpServer.Credentials = New  _
Net.NetworkCredential("admin@example.com", "password") 
```

我正在切换服务器，并且我有很多网站发送电子邮件，其中所有相同的凭据都是从正在更改的服务器发送的。我的问题是当更改发生时它会影响站点。我的问题是 smptServer.Credentials = New _ 的真正含义是什么？和 Net.NetworkCredentials("admin@example.com, "password") 你可以在没有这个的情况下发送。我对此很陌生，我正在查看我们拥有的经典 asp 站点，它不需要这些凭据和工作中的任何一个。因此我想知道是否可以在 vb.net 中发送没有这些的电子邮件？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:41:30.280

某些 SMTP 服务器要求客户端对其自身进行身份验证，以防止中继垃圾邮件。其他服务器没有。如果您使用的服务器需要身份验证，则必须提供它。否则，你不会。

# android - 可以在 cdata 字符串中使用 iframe 吗？

> ID：13613485
> 
> 赞同：1
> 
> 时间：2012-11-28T20:04:31.427
> 
> 标签：android

可以在 android 应用程序中使用 iframe 吗？

例子：

```
<string name="stringName1">
    <![CDATA[<html><iframe width="100px" height="100px" name="about" src="http://www.google.com" frameborder=0></iframe></html>]]>
</string>` 
```

有什么办法让它工作吗？

# c++ - 链接/集成问题。我需要一个去哪里的方向？

> ID：13613486
> 
> 赞同：1
> 
> 时间：2012-11-28T20:04:36.687
> 
> 标签：c++, linker, integration

所以我有2场比赛并排运行。

```
proj2/main.cpp (main that gets run that then can call either game)
proj2/spades/display.cpp
proj2/spades/gameplay.cpp
proj2/spades/otherFiles.cpp
proj2/hearts/display.cpp (this is the same display class as in the spades game with the same functions just sightly altered.)
proj2/hearts/hearts.cpp
proj2/hearts/otherFiles.cpp 
```

基本上发生的事情是我正在尝试集成 2 个游戏，1 个是我创建的，另一个使用相同的 display.cpp 和 display.h 文件略有改变。为了做到这一点，我创建了 2 个单独的命名空间，红桃和黑桃。我编译的所有东西都很好，但是一些 .cpp 文件没有正确链接，我收到如下错误。

```
./gamePlay.o: In function `__static_initialization_and_destruction_0(int, int)':
gamePlay.cpp:(.text+0x396): undefined reference to `spades::display::display()'
./gamePlay.o: In function `__tcf_3':
gamePlay.cpp:(.text+0x480): undefined reference to `spades::display::~display()'
./gamePlay.o: In function `spades::gamePlay::storeBid(std::basic_stringstream<char, std::char_traits<char>, std::allocator<char> >&)':
gamePlay.cpp:(.text+0x1507): undefined reference to `spades::display::captureInput()' 
```

我在这里做错了什么？

以下是我正在使用的一些文件。让我知道是否还有我应该添加的。（我不想再膨胀这篇文章了）

游戏玩法.cpp

```
#include <iostream>
#include <sys/ioctl.h>
#include <cstdio>
#include <unistd.h>
#include <locale.h>
#include <ncursesw/ncurses.h>
#include <fstream>

#include "gamePlay.h"
#include <cstdlib>
#include <sstream>
#include <ctime>
namespace spades {
vector <spades::player> players(4);
vector <spades::card> deck(52);
spades::display monitor;
spades::card center[4];

vector <spades::card> gamePlay::getDeck(){return deck;}
vector <spades::player> gamePlay::getplayers(){return players;}

//sorts the cards in the players hand into diamonds, clubs, hearts, spades
void gamePlay::handSort(){
    int spades[13];
    int hearts[13];
    int clubs[13];
    int diamonds[13];
    int index;
    int i;
    for(i=0; i<13; i++){ //determines the card number and places them into corresponding indexes
        index = (players.at(0).hand.at(i).getCardNum()+11)%13; //cause the cards to be placed based on their number with 2 being index 0 and 1(ace) being index 12
        switch(players.at(0).hand.at(i).getSuit())
        {
        case 1: spades[index] = 1;
        break;
        case 2: hearts[index] = 1;
        break;
        case 3: clubs[index] = 1;
        break;
        case 4: diamonds[index] = 1;
        break;
        default: mvprintw(3,2,"!!!!!!!we have a problem!!!!!!!!!!");
        break;
        }
    }
    i = 0;
    while(i<13){ //being placing the ordered cards back into the players hand
        int j = 0;
        while(j < 13){
            if(diamonds[j] == 1){ //if a card has been placed in this index for the diamonds only array
                if(j+2 == 14) //if the card is an ace
                    players.at(0).hand.at(i).setCardNum(1);
                else
                    players.at(0).hand.at(i).setCardNum(j+2); //add 2 to each index to get the card number
                players.at(0).hand.at(i).setSuit(4);
                i++;
            }
            j++;
        }
        j = 0;
        while(j < 13){
            if(clubs[j] == 1){
                if(j+2 == 14)
                    players.at(0).hand.at(i).setCardNum(1);
                else
                    players.at(0).hand.at(i).setCardNum(j+2);
                players.at(0).hand.at(i).setSuit(3);
                i++;
            }
            j++;
        }
        j = 0;
        while(j < 13){
            if(hearts[j] == 1){
                if(j+2 == 14)
                    players.at(0).hand.at(i).setCardNum(1);
                else
                    players.at(0).hand.at(i).setCardNum(j+2);
                players.at(0).hand.at(i).setSuit(2);
                i++;
            }
            j++;
        }
        j = 0;
        while(j < 13){
            if(spades[j] == 1){
                if(j+2 == 14)
                    players.at(0).hand.at(i).setCardNum(1);
                else
                    players.at(0).hand.at(i).setCardNum(j+2);
                players.at(0).hand.at(i).setSuit(1);
                i++;
            }
            j++;
        }
    }
}

//compares the center pile of 4 played cards to determine who wins the trick
int gamePlay::compareCenter(int leadplayer){
    int highest = center[leadplayer].getCardNum();
    if(center[leadplayer].getCardNum() == 1)
        highest = 14;
    int suit = center[leadplayer].getSuit();
    int player = leadplayer;

    for(int i = leadplayer+1; i < leadplayer+4; i++)
    {
        if(center[i%4].getSuit() == 1)
            setSpadesBroken(true);
        if((suit != 1) && (center[i%4].getSuit() == 1))
        {
            player = i%4;
            suit = 1;
            highest = center[i%4].getCardNum();
        }
        if(suit == center[i%4].getSuit()){
            if(center[i%4].getCardNum() == 1){
                player = i % 4;
                highest = 14;
            }
            if(highest < center[i%4].getCardNum())
            {
                player = i%4;
                highest = center[i%4].getCardNum();
            }
        }
    }
    players.at(player).setTricksTaken(players.at(player).getTricksTaken()+1); //increments the trick count of the winning player
    return player; //return the player who won to determine who goes first next turn
}

//Create the deck of 52 cards by setting the suit and number of each card to a nonzero integer
void gamePlay::createDeck() {
    for(int j = 0; j < 52; j++)
    {
        deck.at(j).setCardNum((j%13)+1);
        deck.at(j).setSuit((j/13)+1);
    }
    random_shuffle(deck.begin(), deck.end());
}

//deal out 13 cards to each player by setting the
void gamePlay::deal(vector <spades::card> &newdeck, vector <spades::player> &newplayers){
    for(int i = 0; i<52; i++){
        newplayers.at(i/13).addCard(newdeck.at(i));
        newdeck.at(i).setSuit(0);
        newdeck.at(i).setCardNum(0);
    }
}

//determines if the player still has a card of the same suit in their hand as the leading card played
bool gamePlay::containSuit(spades::card lead, spades::player players){
    bool suit = false;
    for(int i = 0; i < players.getHand().size(); i++){
        if(lead.getSuit() == players.getHand().at(i).getSuit())
            suit = true;
    }
    return suit;
}

//determines if the player has only spades cards left in their hand
bool gamePlay::onlySpade(spades::player play){
    for(int i = 0; i<play.getHand().size(); i++){
        if(play.getHand().at(i).getSuit()!=1)
            return false;
    }
    return true;
}

//determines if the position the player is clicking on the screen actually points to a playable card
//and then returns the position of that card based on the player's hand vector of type <card>
int gamePlay::handCheck(int xevent, int yevent, vector <spades::player> players, int trickStart){
    int i = xevent/6;
    //first check to find the card on the display
    if(i>=0 && i<players.at(0).getHand().size() && yevent>17 && yevent<23 &&
            players.at(0).getHand().at(i).getSuit() != 0 &&
            players.at(0).getHand().at(i).getCardNum() != 0)
    {
        spades::card playedCard = players.at(0).getHand().at(i);
        //check to see if leading the current round or not and if spades are "broken"
        if(trickStart==0 && !getSpadesBroken()){
            if(onlySpade(players.at(0)))
                return i;
            else if(playedCard.getSuit() != 1)
                return i;
            else
                return (-1);
        }
        if(trickStart == 0 && getSpadesBroken())
            return i;
        //if not leading, then call the containsuit method to see if your hand contains one of similar suit
        if(trickStart > 0 && containSuit(center[trickStart],players.at(0))){
            if(playedCard.getSuit()==center[trickStart].getSuit())
                return i;
        }
        if(trickStart > 0 && !containSuit(center[trickStart],players.at(0)))
            return i;
        else
            return (-1);
    }
    mvprintw(4,3,"invalid card");
    return (-1);
}

//draws the cards in the player's hand if it contains a valid card, erase the card otherwise if invalid
void gamePlay::displayHand(){
    int offset = 0;
    for(int i =0; i<players.at(0).getHand().size(); i++){
        if(players.at(0).getHand().at(i).getSuit() != 0)
            monitor.displayCard(offset, 17, players.at(0).getHand().at(i).getSuit(), players.at(0).getHand().at(i).getCardNum(), 0);
        else
            monitor.eraseBox(offset, 17, 6, 5);
        offset+=6;
    }
}
void gamePlay::displayAdd(){
    vector <string> lines;
    int count12 = 0;
    string line;
    ifstream myfile ("advertisement.txt");
    if ( myfile.is_open() )
    {
         while ( ! myfile.eof() )
         {
               getline (myfile, line);
               lines.push_back(line);
               count12++;
         }
         myfile.close();
        int random1 = rand() % 6;
        monitor.bannerBottom(lines.at(random1));
    }
    else{
          monitor.bannerBottom("Unable to open Advertisement file.");
    }

}
//determins the position of a mouse click and sends that to handcheck(), and then sends the card to the center pile array to be scored
void gamePlay::humanPlay(int trickStart){
    int xevent, yevent;
    for(;;){
        mvprintw(3,2,"Please choose a card to play.");
        int key = monitor.captureInput();
        // if a mouse click occurred
        if (key == -1) {
            xevent = monitor.getMouseEventX();
            yevent = monitor.getMouseEventY();
            int handCh = handCheck(xevent, yevent, players, trickStart);
            if(handCh != (-1)){ //if the card is valid
                spades::card played = players.at(0).getHand().at(handCh);
                players.at(0).hand.at(handCh).setCardNum(0);
                players.at(0).hand.at(handCh).setSuit(0);
                center[0]= played;
                monitor.displayCard(39, 12, center[0].getSuit(), center[0].getCardNum(), 0);
                displayHand();
                //playedCards++; //Update Global Variable---- NEED TO HAVE THIS INITIATED GLOBALLY.
                break;
            }
            else
                mvprintw(4,3,"invalid card");
        }
    }
}

//loops through a computer players hand and checks to see if the random card is playable within the rules of the game
void gamePlay::CPUplay(int trickStart, int CPU){
    bool goodCard = false;
    spades::card playedCard =players.at(CPU).getHand().at(0);
    int i;
    for(i = 0; i < players.at(CPU).getHand().size(); i++){
        if(players.at(CPU).getHand().at(i).getSuit() != 0 &&
                players.at(CPU).getHand().at(i).getCardNum() != 0){
            playedCard = players.at(CPU).getHand().at(i);
            //check to see if leading or not
            if(trickStart==CPU && !getSpadesBroken()){
                if(onlySpade(players.at(CPU)))
                    break;
                if(playedCard.getSuit()!=1)
                    break;
            }
            if(trickStart == CPU && getSpadesBroken())
                break;
            //if not leading use contains suit function
            if(trickStart != CPU && containSuit(center[trickStart], players.at(CPU)))
                if(playedCard.getSuit()==center[trickStart].getSuit())
                    break;
            if(trickStart != CPU && !containSuit(center[trickStart], players.at(CPU)))
                break;
        }
    }
    players.at(CPU).hand.at(i).setCardNum(0);
    players.at(CPU).hand.at(i).setSuit(0);
    center[CPU]= playedCard;
    if(CPU==1)
        monitor.displayCard(29, 7, center[CPU].getSuit(), center[CPU].getCardNum(), 0);
    if(CPU==2)
        monitor.displayCard(39, 2, center[CPU].getSuit(), center[CPU].getCardNum(), 0);
    if(CPU==3)
        monitor.displayCard(49, 7, center[CPU].getSuit(), center[CPU].getCardNum(), 0);
}

//scores each team with the player being teamed with CPU 2 and the other team being CPU 1 and CPU 3
void gamePlay::score(spades::player &play, spades::player &play2){
    int trickOver = play.getTricksTaken()-play.getBid(); // Calculate the difference between bid and actually taken.
    if(play.getBid() == NULL)
        trickOver = 0;
    int trickOver2 = play2.getTricksTaken()-play2.getBid(); // Calculate the difference between bid and actually taken.
    int totalBid = play.getBid()+play2.getBid();
    int totalTrick = trickOver+trickOver2;
    //Bidding Double Nil (if gets it 200 points other wise -200 points)
    if(play.getDoubleNil()){
        if(play.getTricksTaken()==0) //player did get Double Nil successfully
            play.setScore(play.getScore()+200); // add 200 points
        else
            play.setScore(play.getScore()-200);
    }
    else if(play.getBid()==0){ //Bidding Nil (if gets it 100 points other wise -100 points)
        if(play.getTricksTaken()==0) //player did get Nil successfully
            play.setScore(play.getScore()+100); //add 100 points
        else //player didnt get Nil
            play.setScore(play.getScore()-100); //take away 100 points
    }
    if(totalTrick < 0){ //player bids more than number of tricks won
        play.setScore(play.getScore()+(totalBid*(-10)));  //decrease score by 10 poitns for every overtrick
    }
    else if(totalTrick >= 0){ //player bids less then number of tricks won
        play.setSandBag(play.getSandBag() + totalTrick); //increase sandbag by 1
        play.setScore(play.getScore()+totalTrick+(10*totalBid)); //increase 10 points per trick bid on and 1 point per trick over
    }
    if(play.getSandBag()>10){ //check for sandbagging
        play.setScore(play.getScore()-100);
        play.setSandBag(play.getSandBag()-10);
    }
    play.setBid(NULL); //reset players bid to NULL
    play2.setBid(NULL); //reset players bid to NULL
    play.setTricksTaken(0);
    play2.setTricksTaken(0);
    play.setDoubleNil(false); //Player has not yet bid double NILL.
}

//loops infinitely until a mouse click or key input is detected, then sets bid accordingly
void gamePlay::storeBid(stringstream &msg){
    int xevent;
    int yevent;
    for(;;){
        mvprintw(3,2,"Click the box bid Double Nil or type out your bid now. \n  Use the keys 1-9, a for 10, b for 11, c for 12, and d for 13.");
        int key = monitor.captureInput();
        monitor.drawBox(2, 5, 3, 2, 0);
        xevent = monitor.getMouseEventX();
        yevent = monitor.getMouseEventY();
        if (key == -1)
            if((xevent>=2 && xevent<4)&&(yevent>=5 && yevent <7)){
                msg.str("");
                msg << "Your bid: double nil";
                monitor.bannerTop(msg.str());
                players.at(0).setDoubleNil(true);
                break;
            }
            else{
                msg.str("");
                msg << "Your bid is horrible. Bid again!!!!";
                monitor.bannerTop(msg.str());
            }
        if ((key-48) >= 0 && (key-48) <= 9){
            msg.str("");
            msg << "Your bid: " << (key-48);
            monitor.bannerTop(msg.str());
            players.at(0).setBid(key-48);
            break;
        }
        else if(key>=97 && key<=100){
            msg.str("");
            msg << "Your bid: " << (key-87);
            monitor.bannerTop(msg.str());
            players.at(0).setBid(key-87);
            break;
        }
        else if(key!=0 && key!=-1){
            msg.str("");
            msg << "Your bid is horrible. Bid again!!!!";
            monitor.bannerTop(msg.str());
        }
    }
    monitor.eraseBox(1, 1, 62, 16);
}

//main function that runs the entire game
void gamePlay::runGame(){
    double startTime = clock();
    stringstream messageString;
    srand(time(NULL));

    int count;
    int handStart = 0;
    int trickStart;
    while(players.at(0).getScore()<500 && players.at(1).getScore()<500)
    {
        createDeck();
        deal(deck, players); //deal out 13 cards to each player
        handSort(); // sort the human players hand
        displayHand();

        storeBid(messageString); //asks for bid

        //sets the bid randomly between 2-4 for each computer player
        players.at(1).setBid(rand()%3+2);
        players.at(2).setBid(rand()%3+2);
        players.at(3).setBid(rand()%3+2);
        //displays the current bid and scores of each team
        messageString << "  Partner: " << (players.at(2).getBid())
        << "  CPU 1: " << players.at(1).getBid()
        << "  CPU 3: " << players.at(3).getBid()
        << "    Team Score = " << players.at(0).getScore()
        << "  Enemy Score = " << players.at(1).getScore();
        monitor.bannerTop(messageString.str());
        displayAdd();
        trickStart = handStart;
        count = 0;
        setSpadesBroken(false);
        while(count<13){ // simulates the different cases where the human player plays 1st, 2nd, 3rd, last
            bool success = true;
            switch (trickStart)
            {
            case 0: humanPlay(trickStart);
            CPUplay(trickStart,1);
            CPUplay(trickStart,2);
            CPUplay(trickStart,3);
            break;
            case 3: CPUplay(trickStart,3);
            humanPlay(trickStart);
            CPUplay(trickStart,1);
            CPUplay(trickStart,2);
            break;
            case 2: CPUplay(trickStart,2);
            CPUplay(trickStart,3);
            humanPlay(trickStart);
            CPUplay(trickStart,1);
            break;
            case 1: CPUplay(trickStart,1);
            CPUplay(trickStart,2);
            CPUplay(trickStart,3);
            humanPlay(trickStart);
            break;
            default: mvprintw(3,2,"!!!!we have a problem!!!!");
            success = false;
            break;
            }
            monitor.eraseBox(3, 2, 20, 2);

            for(;;){//pause to wait for an acknowledgment mouse click
                int key = monitor.captureInput();
                monitor.eraseBox(3, 2, 30, 4);
                mvprintw(3,2,"click anywhere to continue");
                if(key == -1){
                    break;
                }
            }
            //if no errors appear, display the tricks taken
            if(success){
                monitor.eraseBox(1, 1, 62, 16);
                trickStart = compareCenter(trickStart);
                messageString.str("");
                messageString << "Your Tricks= " << players.at(0).getTricksTaken()
                << "   Partner= " << players.at(2).getTricksTaken()
                << "   CPU 1= " << players.at(1).getTricksTaken()
                << "   CPU 3= " << players.at(3).getTricksTaken();
                displayAdd();
                monitor.bannerAboveBottom(messageString.str());
                count++;
            }
        }

        //score the round and tally up for each team
        for(int n =0; n<2;n++)
            score(players.at(n),players.at(n+2));
        messageString.str("");
        monitor.bannerTop(messageString.str());
        messageString << "Your Tricks = " << players.at(0).getTricksTaken()
        << "   Partner = " << players.at(2).getTricksTaken()
        << "   CPU 1 = " << players.at(1).getTricksTaken()
        << "   CPU 3 = " << players.at(3).getTricksTaken();
        handStart = (handStart +1) % 4;
    }
    double endTime = clock();

}

} 
```

游戏玩法.h

```
#include "player.h"
#include "display.h"

#ifndef gamePlay_H
#define gamePlay_H
namespace spades {
using namespace std;

class gamePlay{

    bool spadesBroken;

public:
    vector <spades::card> getDeck();
    vector <spades::player>getplayers();
    bool getSpadesBroken() {return spadesBroken;}
    void setSpadesBroken(bool b){spadesBroken = b;}

    int compareCenter(int leadplayer);
    void createDeck();
    void deal(vector <spades::card> &deck, vector <spades::player> &players);
    void handSort();
    bool containSuit(spades::card lead, spades::player players);
    bool onlySpade(spades::player play);

    int handCheck(int xevent, int yevent, vector <spades::player> players, int trickStart);

    void displayHand();
    void displayAdd();
    void humanPlay(int trickStart);
    void CPUplay(int trickStart, int CPU);
    void score(spades::player &play, spades::player &play2);
    void storeBid(stringstream &msg);
    void runGame();

};
}
#endif 
```

播放器.h

```
#include <iostream> // Stream declarations
#include <vector> //Vectors used to store deck and players hands
#include <string> //String declarations
#include <algorithm> //Shuffle Method
#include "card.h"

#ifndef PLAYER_H
#define PLAYER_H
namespace spades {
using namespace std;

class player {

    int score; //total score
    int bid; //bid for that round
    int tricksTaken; //score for thast round
    int sandBag; //the number of points you win, more than what you bid, every 10th bag = -100
    bool doubleNil;
    //vector <card> hand;

public:
    player();
    vector <card> hand;

    int getSandBag(){return sandBag;}
    bool getDoubleNil() {return doubleNil;}
    int getScore() {return score;}
    int getBid() {return bid;}
    int getTricksTaken() {return tricksTaken;}
    vector<card> getHand() {return hand;}

    void setSandBag(int i) {sandBag = i;}
    void setBid(int i) {bid = i;}
    void setTricksTaken(int i) {tricksTaken=i;}
    void setScore(int i) {score = i;}
    void setDoubleNil(bool i) {doubleNil = i;}

    //add card to end of vector
    void addCard(card b);
    void removeCard(card a);

};
}
#endif 
```

播放器.cpp

```
#include <iostream> // Stream declarations
#include <vector> //Vectors used to store deck and players hands
#include <string> //String declarations
#include <algorithm> //Shuffle Method
#include <sys/ioctl.h>
#include <cstdio>
#include <unistd.h>
#include <locale.h>
#include <ncursesw/ncurses.h>
#include "player.h"
namespace spades {
using namespace std;

player::player() {
    score =0; //total score
    bid = NULL; //bid for that round
    tricksTaken = 0; //score for thast round
    sandBag = 0; //the number of points you win, more than what you bid, every 10th bag = -100
    doubleNil = false;
    for(int i=0; i<13; i++)
        hand.push_back(card());
}

void player::addCard(spades::card b){
    for (int i=0; i<hand.size(); i++){
        //compare card being played to the ones in your hand to search and determine which one to erase
        if((hand.at(i).getCardNum() == 0) &&
            (hand.at(i).getSuit() == 0))
        {
            hand.at(i).setCardNum(b.getCardNum());
            hand.at(i).setSuit(b.getSuit());
            return;
        }
    }
}

void player::removeCard(spades::card a) {
    for (int i=0; i<hand.size(); i++){
        //compare card being played to the ones in your hand to search and determine which one to erase
        if((hand.at(i).getCardNum() == a.getCardNum()) &&
            (hand.at(i).getSuit() == a.getSuit()))
        {
            hand.at(i).setCardNum(0);
            hand.at(i).setSuit(0);
            return;
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:12:58.693

你的链接线是什么样子的？看起来当您链接时，您缺少 spades.o？

如果不是这样，请使用 nm 命令查看 spades.o 提供的符号 - 总是有可能您打错了命名空间名称或其他内容：

```
nm -C spades.o | grep 'display::.*display' 
```

（-C 选项应该将 nm 置于 C++/解组模式 - 如果它不适合您的 nm，请在 grep 之前向管道链添加“c++filt”或“dem”步骤）。

# django - Apache2 使用 Django 项目设置带有子域的虚拟主机

> ID：13613492
> 
> 赞同：1
> 
> 时间：2012-11-28T20:05:00.193
> 
> 标签：django, apache2, virtualhost

我在 Ubuntu Server 12.04 上使用 Django 1.4 和 Python 2.7。我正在尝试在单个服务器上托管多个网站。我是 Apache 新手，在设置虚拟主机时似乎写错了一些东西。

我拥有 2 个要在单个服务器上托管的域。打电话给他们`www.my_first_domain.com`和`www.my_second_domain.com`。

现在，我要托管超过 3 个 Django 项目。将指向一个项目`www.my_first_domain.com`。将指向一个项目`www.my_second_domain.com`。所有其他项目将指向`www.my_second_domain.com`.

即`project3.my_second_domain.com`,`project4.my_second_domain.com`等

我已经管理 DNS 让所有这些都指向正确的 IP。我已经用``host www.my_first_domain.com`, `host www.my_second_domain.com`,`host project3.my_second_domain.com`等验证了这一点。它们都指向正确的 IP。

下面是我设置的 3 个文件示例，以尝试使其正常工作。

`/etc/apache2/sites-enabled/project1`

```
<VirtualHost *:80>
        ServerName www.my_first_domain.com
        ServerAlias *.my_first_domain.com my_first_domain.com
        DocumentRoot /var/www/project1

        CustomLog /var/log/apache2/www.my_first_domain.com-access.log combined
        ErrorLog /var/log/apache2/www.my_first_domain.com-error.log

        WSGIScriptAlias / /home/user1/website/project1/project1/wsgi.py

        <Directory /home/user1/website/project1/project1>
                <Files wsgi.py>
                        Order deny,allow
                        Allow from all
                </Files>
        </Directory>
</VirtualHost> 
```

`/etc/apache2/sites-enabled/project2`

```
<VirtualHost *:80>
        ServerName www.my_second_domain.com
        ServerAlias my_second_domain.com
        DocumentRoot /var/www/project2

        CustomLog /var/log/apache2/www.my_second_domain.com-access.log combined
        ErrorLog /var/log/apache2/www.my_second_domain.com-error.log

        WSGIScriptAlias / /home/user2/website/project2/project2/wsgi.py

        <Directory /home/user2/website/project2/project2>
                <Files wsgi.py>
                        Order deny,allow
                        Allow from all
                </Files>
        </Directory>
</VirtualHost> 
```

`/etc/apache2/sites-enabled/project3`

```
<VirtualHost *:80>
        ServerName project3.my_second_domain.com
        DocumentRoot /var/www/project3

        CustomLog /var/log/apache2/project3.my_second_domain.com-access.log combined
        ErrorLog /var/log/apache2/project3.my_second_domain.com-error.log

        WSGIScriptAlias / /home/user3/website/project3/project3/wsgi.py

        <Directory /home/user3/website/project3/project3>
                <Files wsgi.py>
                        Order deny,allow
                        Allow from all
                </Files>
        </Directory>
</VirtualHost> 
```

如果我去 www.my_first_domain.com 一切看起来都是正确的。当我访问 www.my_second_domain.com 时，我会看到 www.my_first_domain.com 上的内容（我的第一个项目，而不是我的第二个项目）。如果我去 project3.my_second_domain.com 我会得到一个`Internal Server Error`.

如果我查看 project3 的错误日志，它看起来像是在尝试加载 project1 的 Django 设置。

我故意清空`/etc/apache2/httpd.conf`，因为我的印象是`sites-enabled`文件将被用来代替`httpd.conf`像我这样使用虚拟主机时。

我不相信我修改了任何其他配置文件。关于我做错了什么有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T01:10:21.290

这是我的 conf 文件的样子：

```
VirtualHost *:80>
    ServerName www.domain.com
    ServerAlias domain.com *.domain.com
    DocumentRoot /var/www/domain

    Alias /static/ /var/www/domain/static/

    WSGIScriptAlias / /var/www/domain/django.wsgi

    RewriteEngine On
    RewriteCond %{HTTP_HOST} ^((?!www\.)[^.]+)\.domain.com$
    RewriteRule ^/(.*)$ http://www.domain/invite/%1/$1 [QSA,P]

    ErrorLog ${APACHE_LOG_DIR}/domain/error.log
    LogLevel warn
    CustomLog ${APACHE_LOG_DIR}/domain/access.log combined

    <Directory /var/www/domain/static>
        Order deny,allow
        Allow from all 
    </Directory>
    <Directory /var/www/domain/>
        Order allow,deny
        Allow from all 
    </Directory>
</VirtualHost> 
```

这是我的 .wsgi 文件：

```
import os
import sys 
sys.path.append('/home/ubuntu/django')
sys.path.append('/home/ubuntu/django/domain')

os.environ['DJANGO_SETTINGS_MODULE'] = 'domain.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

我有许多这样的文件，它们都以我用于该站点的域名命名。确保你有 confs`sites-available`并且你在每一个上运行 a2ensite 并且你应该很高兴。

需要帮助请叫我。

# java - RSA Hello World 程序...为什么它不起作用

> ID：13613495
> 
> 赞同：3
> 
> 时间：2012-11-28T20:05:16.537
> 
> 标签：java, encryption, rsa

我试图理解 java 中的 RSA - 但我无法弄清楚为什么这段代码不打印“Hello, World”我试图通过生成密钥对来确保我理解正确，加密“Hello World”和解密它。我正忙着弄清楚我做错了什么

```
import java.security.*;
import java.math.BigInteger;
import java.io.ObjectOutputStream;
import java.io.ObjectInputStream;
import javax.crypto.spec.*;
import java.security.spec.*;
import java.io.BufferedOutputStream;
import java.io.BufferedInputStream;
import java.io.FileOutputStream;
import java.io.FileInputStream;
import java.io.IOException;
import javax.crypto.Cipher;

public class testrsa
{
 public static void main(String [] args)
 {
   try
   {
     byte[] cipherData, plainData;
     KeyPairGenerator kpg = KeyPairGenerator.getInstance("RSA");
     kpg.initialize(4096);
     KeyPair kp = kpg.genKeyPair();
     Key publicKey = kp.getPublic();
     Key privateKey = kp.getPrivate();

      Cipher cipher1 = Cipher.getInstance("RSA");
      cipher1.init(Cipher.ENCRYPT_MODE, publicKey);
      cipherData = cipher1.doFinal("Hello, Word".getBytes());

      Cipher cipher2 = Cipher.getInstance("RSA");
      cipher2.init(Cipher.DECRYPT_MODE, privateKey);
      plainData = cipher2.doFinal(cipherData);

     System.out.print(plainData.toString());

     }
     catch(Exception ex)
     {
        System.out.print(ex.toString());
     }

 }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T20:11:01.533

改变

```
System.out.print(plainData.toString()); 
```

到

```
System.out.print(new String(plainData)); 
```

你赢了！

**解释**

`plainData`, 的返回[`doFinal`](http://docs.oracle.com/javase/1.4.2/docs/api/javax/crypto/Cipher.html)是`byte[]`. 您在使用该`toString()`方法（类似于`[B@75589559`）时看到的不是解密损坏，而是 Java 如何实现`byte[]`的`toString()`方法。

在我建议的代码中，您正在使用您提供的字节创建一个新字符串——这就是您想要的。

# jquery - 仅当没有 span 元素时才在 span 元素中添加项目符号

> ID：13613502
> 
> 赞同：0
> 
> 时间：2012-11-28T20:05:38.360
> 
> 标签：jquery, html

如果没有跨度，我正在尝试将项目符号添加到所选类的 li 中。到目前为止，每次单击链接时都会添加一个项目符号。添加和删​​除项目符号而不是每次单击时都继续添加项目符号的最佳方法是什么？

**HTML**

```
<ul class="files-list">
    <li class="selected">
        <span>•&lt;/span>
        "12-0001.hello-world.html"
    </li>
    <li>12-0002.hello-world.html</li>
</ul> 
```

**JS**

```
$(this).prepend($('<span />').html('&bull;')).addClass('selected').siblings().removeClass('selected').find('span').remove(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:14:21.250

为什么不尝试纯 CSS 解决方案？

```
.files-list {
  list-style: none;
}

.selected {
  list-style: disc;
} 
```

然后你只需要切换`.selected`类。

```
$('.files-list > li').click(function () {
  $(this).toggleClass('selected');
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:10:08.503

添加检查条件

```
var $this = $(this);
if( !$this.find('span').length){
   // Your code here
} 
```

**完整代码**

```
$('li').on('click', function() {
    var $this = $(this);
    if (!$this.find('span').length) {
        $this.prepend($('<span/>').html('&bull;'))
            .addClass('selected')
            .siblings()
            .removeClass('selected')
            .find('span').remove();
    }
});​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/c4tdm/)**

# android - 如何在 Android 中将整个对象保存到 SD 卡

> ID：13613508
> 
> 赞同：3
> 
> 时间：2012-11-28T20:06:12.183
> 
> 标签：android, object, sd-card

嘿，我所有的极客同胞！

我需要将我的 Android 应用程序中的对象保存到 SD 卡。我在谷歌上搜索了很多关于这个的东西，但我似乎没有找到任何东西。我只找到了如何保存原始类型，但没有找到具有所有相关属性的整个对象。

我所拥有的是：

```
Dog dog = new Dog();
dog.setBirthYear(2009);
dog.setName("Pluto"); 
```

我需要将此 Dog-object 保存到 SD 卡中，并在需要时检索它，以及所有相关属性。

如果可以提供用于保存和检索对象的代码示例，我将非常高兴。

非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:09:26.880

使用[ObjectOutputStream](https://developer.android.com/reference/java/io/ObjectOutputStream.html)，您可以序列化文件中的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:12:47.037

请参阅下面的链接，这些与您的问题有关

[某些对象不保存到 Android 内部存储器](https://stackoverflow.com/questions/11416650/some-object-dont-save-to-android-internal-memory)

[如何使用可序列化将类对象存储到内部存储器中？](https://stackoverflow.com/questions/9836663/how-to-store-a-class-object-into-internal-memory-storage-using-serializable)

[存储选项](http://developer.android.com/guide/topics/data/data-storage.html)

# jquery - 不显眼的验证 ASP.NET MVC3

> ID：13613511
> 
> 赞同：1
> 
> 时间：2012-11-28T20:06:38.267
> 
> 标签：jquery, asp.net, validation, asp.net-mvc-3, unobtrusive-validation

在我的应用程序中，我修改了我的脚本文件，以允许逗号作为小数分隔符而不是使用点（与本地化相关的问题）。

问题是，当我使用未修改的脚本（最小版本）时，验证工作正常......错误消息会立即显示，并且在正确时也会立即消失。但是当我使用修改后的版本（非最小版本）时，错误消息直到我点击提交按钮才会显示，然后 MVC 流程发生（控制器->操作->视图）并且 ModelState.isValid 变为 false ，显示与模型相同的视图，显然添加了模型错误，不显眼的消息偏向不正确的字段。然后我更正了这个值，我知道这个值很好，但是消息并不清楚。在屏幕上仍然显示错误消息的情况下，我点击提交，然后 MVC 循环发生而没有错误，并成功结束。

你们中有人知道如何解决这个问题吗？我不知道我是否应该生成一个最小版本或扩展该最小版本来覆盖该函数。我什至不知道如何做与我做过的不同的另一件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-10T13:17:26.423

我无法按预期完成这项工作......我只是使用了非.min版本......互联网上的几个博客使用相同的方法进行修改，或者使用带有大量jquery脚本的插件（这种插件方法是我试图避免的事情，因为很难进行维护！）

# javascript - 输入 7 / 10 / 11 位数字时的电话号码格式

> ID：13613513
> 
> 赞同：1
> 
> 时间：2012-11-28T20:06:54.943
> 
> 标签：javascript, javascript-events

我在这里有一个脚本，它将一个 10 位数字字符串格式化为 (555)-555-5555，并将一个 11 位数字字符串（如果前导数字是 (1)）格式化为 1(555)-555-5555。我试图让这个脚本也将一个 7 位数字格式化为 555-5555，但我的多次尝试都没有成功。此处示例：http: [//jsfiddle.net/9cv2r/](http://jsfiddle.net/9cv2r/)任何人有任何见解？这是我到目前为止所拥有的

```
/* FORMAT PHONE BEHAVIOR MASK */ 
function FormatPhone (e,input) { 
    /* to prevent backspace, enter and other keys from  
     interfering w mask code apply by attribute  
     onkeydown=FormatPhone(control) 
    */ 
    evt = e || window.event; /* firefox uses reserved object e for event */ 
    var pressedkey = evt.which || evt.keyCode; 
    var BlockedKeyCodes = new Array(8,27,13,9); //8 is backspace key 
    var len = BlockedKeyCodes.length; 
    var block = false; 
    var str = ''; 
    for (i=0; i<len; i++){ 
       str=BlockedKeyCodes[i].toString(); 
       if (str.indexOf(pressedkey) >=0 ) block=true;  
    } 
    if (block) return true; 

   s = input.value; 
   if (s.charAt(0) =='+') return false; 
   filteredValues = '"`!@#$%^&*()_+|~-=\QWERT YUIOP{}ASDFGHJKL:ZXCVBNM<>?qwertyuiop[]asdfghjkl;zxcvbnm,./\\\'';  
   var i; 
   var returnString = ''; 

   /* Search through string and append to unfiltered values  
      to returnString. */ 

   for (i = 0; i < s.length; i++) {  
         var c = s.charAt(i); 

         //11-Digit number format if leading number is 1

         if (s.charAt(0) == 1){
            if ((filteredValues.indexOf(c) == -1) & (returnString.length <  14 )) { 
                if (returnString.length==1) returnString +='('; 
                if (returnString.length==5) returnString +=')'; 
                if (returnString.length==6) returnString +='-'; 
                if (returnString.length==10) returnString +='-'; 
                returnString += c; 
            } 
         }

        //10-digit number format 
         else{
             if ((filteredValues.indexOf(c) == -1) & (returnString.length <  13 )) { 
                    if (returnString.length==0) returnString +='('; 
                    if (returnString.length==4) returnString +=')'; 
                    if (returnString.length==5) returnString +='-'; 
                    if (returnString.length==9) returnString +='-'; 
                    returnString += c; 
                }
         } 

    } 
   input.value = returnString; 

   return false} 
```

# php - 创建一个函数，将在用户数据库中重置我的密码，但失败

> ID：13613517
> 
> 赞同：-2
> 
> 时间：2012-11-28T20:07:04.633
> 
> 标签：php, html, mysql, database

所以，我正在创建一个非常简单的重置功能。索引页面上的一个文件只是一个 html 表单，如下所示：

```
<html>
<body>
<div>
<form id="reset" action="login/reset.php" method="post">
            <fieldset>
            <label for="reset-email"> Enter your e-mail address here :</label>
            <input type="text" name="SignupEmailAdd" id="login-email" /><br />
            <label for="reset-password"> Enter your new password here :</label> 
            <input type="password" name="SignupPassword" id="reset-password" /><br />

            <input type="submit" id="reset-button" value="Reset my password!" />
            </fieldset>
</form>
</div>
</body>
</html> 
```

将数据库连接到表单的另一个文件称为 reset.php，它具有以下功能：

```
<? php
session_start(); 

mysql_connect('localhost','root','password');
mysql_select_db('testproject');

$SignupEmailAdd = $_POST['SignupEmailAdd']; 
$SignupPassword = $_POST['SignupPassword'];

if($SignupPassword)
    $sql=mysql_query("UPDATE users SET SignupPassword='$SignupPassword' where SignupEmailAdd='$SignupEmailAdd'");

if($sql)
{
    echo 'Congratulations You have successfully changed your password. 
    <br /><a href= "http://www.bla.com/">Click here to go back to the login page.</a>';
}

else
{
        echo 'The email address you've entered does not exist';.
}

?> 
```

您会看到除了我的 else 功能外一切正常。它不会显示消息“电子邮件地址..不存在”，而是显示“恭喜..”。我可以用我的 else 语句做什么？我也试过这个而不是别的：

```
<?php
if(!$sql){echo 'The username you entered does not exist';}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T20:16:20.567

如果查询错误，该函数`mysql_query()`返回 FALSE，当查询影响 0 行时返回 NOT。您需要执行以下操作来验证您的声明：

```
if(mysql_affected_rows($sql) < 1)
{
    printf("There is no email address error!");
} 
```

另外，请考虑切换到 PDO 或 MySQLi，这有助于解决这些情况.. PLUS！您将不太容易受到注入攻击。

文档在`mysql_query()`这里：[http](http://us3.php.net/mysql_query) ://us3.php.net/mysql_query ，它提供了所有这些功能的导航。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T20:16:00.690

虽然你真的应该切换到 PDO/mysqli 并使用准备好的语句来解决你遇到的 sql 注入问题，但这里的问题是你不应该检查`mysql_query`. `true`只要没有错误，这将返回一个评估为的值。如果没有更新任何行，这并不意味着存在错误。

在您的情况下，您需要[`mysql_affected_rows`](http://www.php.net/manual/en/function.mysql-affected-rows.php)查看一行是否已更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T20:16:53.597

看起来你的撇号弄乱了你的代码。在它周围使用双引号，你应该没问题。你的分号后面还有一个句号，我不知道为什么。

但正如其他人所提到的，安全问题应该是您最关心的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T20:31:39.490

正如马库斯所说，这是危险的代码。

第一个 $SQL 变量和最后一个不一样。

尝试：

```
if($SignupPassword)
{
$sql=mysql_query("UPDATE users SET SignupPassword='$SignupPassword' where SignupEmailAdd='$SignupEmailAdd'");

if($sql)
...
else
...
} 
```

# c# - 每个连接字符串运行 C# 集成测试

> ID：13613523
> 
> 赞同：4
> 
> 时间：2012-11-28T20:07:19.597
> 
> 标签：c#, sql-server, oracle, integration-testing, devart

我们有一个使用实体代码优先的应用程序，并且我们添加了 Devart for Oracle 支持。我们有一系列通过 Visual Studio 测试运行程序运行的集成测试，涵盖种子数据测试。我们希望能够在测试执行时为 SQL Server 和 Oracle 运行这些测试。有没有人有一个很好的角度来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:41:12.167

您可以从配置文件中读取连接字符串和其他设置信息。

为每个数据库/设置创建一个配置文件。

制作一个命令文件，每次配置执行两次测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:47:38.937

好吧，如果你想要不同的环境设置但仍然只编写一次测试但运行多次，那么[数据驱动测试](http://msdn.microsoft.com/en-us/library/ms182527%28v=vs.100%29.aspx)怎么样？

`[DataSource]`您可以使用该属性装饰您的测试。数据源本身可以是 excel 文件、CSV 等，并且该文件可以包含连接字符串以及其他相关信息，以便配置环境。

在每次测试运行中，您将拥有一个代表您的环境数据的 DataRow。

[`[ValueSource]`](http://nunit.org/index.php?p=valueSource&r=2.5)如果您也使用 NUnit，使用属性，并提供来自某个存储位置、文件、类返回值的静态方法等的数据，则同样可以完成。

使用这些设置中的任何一个，测试实际上将运行多次，因此每个环境都可以单独失败或通过。

这也是一种非常好的方法来测试一个逻辑，但具有不同的场景和预期的输出。您可以在外部数据源中拥有输入和预期输出，并让测试框架在所有场景中运行，并确保它们仍然按预期工作。这对于对您想要检查可能已知结果的金融算法或 excel 中的相同算法（例如，在您有数百个场景要比较的情况下）进行黑盒测试可能很有用。

这显然不是说您不应该为隔离类编写实际的单元测试，它只是添加到工具箱中的另一个工具。

# typescript - 在运行时获取对象的类名

> ID：13613524
> 
> 赞同：380
> 
> 时间：2012-11-28T20:07:26.697
> 
> 标签：typescript

是否可以在运行时使用 TypeScript 获取对象的类/类型名称？

```
class MyClass{}

var instance = new MyClass();
console.log(instance.????); // Should output "MyClass" 
```

* * *

## 回答 #1

> 赞同：620
> 
> 时间：2016-04-15T09:21:18.610

## 简单的回答：

```
class MyClass {}

const instance = new MyClass();

console.log(instance.constructor.name); // MyClass
console.log(MyClass.name);              // MyClass 
```

但是：请注意，使用缩小代码时名称可能会有所不同。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2017-04-24T21:12:36.843

我的解决方案是不依赖类名。object.constructor.name 理论上有效。但是如果你在 Ionic 之类的东西中使用 TypeScript，一旦你投入生产，它就会火上浇油，因为 Ionic 的生产模式会缩小 Javascript 代码。所以类被命名为“a”和“e”。

我最终做的是在构造函数分配类名的所有对象中都有一个 typeName 类。所以：

```
export class Person {
id: number;
name: string;
typeName: string;

constructor() {
typeName = "Person";
} 
```

是的，这不是被问到的，真的。但是在可能会被缩小的东西上使用constructor.name只是在乞求头痛。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2015-06-09T06:49:40.973

我知道我参加聚会迟到了，但我发现这也行得通。

```
var constructorString: string = this.constructor.toString();
var className: string = constructorString.match(/\w+/g)[1]; 
```

或者...

```
var className: string = this.constructor.toString().match(/\w+/g)[1]; 
```

上面的代码将整个构造函数代码作为字符串获取，并应用正则表达式来获取所有“单词”。第一个词应该是“功能”，第二个词应该是类的名称。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2012-11-28T21:47:47.597

看到这个[问题](https://stackoverflow.com/questions/332422/how-do-i-get-the-name-of-an-objects-type-in-javascript)。

由于 TypeScript 被编译为 JavaScript，因此在运行时您正在运行 JavaScript，因此将适用相同的规则。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2016-07-30T00:20:32.047

您需要先将实例转换为，`any`因为`Function`的类型定义没有`name`属性。

```
class MyClass {
  getName() {
    return (<any>this).constructor.name;
    // OR return (this as any).constructor.name;
  }
}

// From outside the class:
var className = (<any>new MyClass()).constructor.name;
// OR var className = (new MyClass() as any).constructor.name;
console.log(className); // Should output "MyClass"

// From inside the class:
var instance = new MyClass();
console.log(instance.getName()); // Should output "MyClass" 
```

# 更新：

使用 TypeScript 2.4（可能更早），代码可以更加简洁：

```
class MyClass {
  getName() {
    return this.constructor.name;
  }
}

// From outside the class:
var className = (new MyClass).constructor.name;
console.log(className); // Should output "MyClass"

// From inside the class:
var instance = new MyClass();
console.log(instance.getName()); // Should output "MyClass" 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2020-06-19T13:43:57.737

**使用在缩小/丑化中幸存的[装饰器](https://www.typescriptlang.org/docs/handbook/decorators.html#metadata)的解决方案**

我们使用代码生成来用元数据装饰我们的实体类，如下所示：

```
@name('Customer')
export class Customer {
  public custId: string;
  public name: string;
} 
```

然后使用以下助手使用：

```
export const nameKey = Symbol('name');

/**
 * To perserve class name though mangling.
 * @example
 * @name('Customer')
 * class Customer {}
 * @param className
 */
export function name(className: string): ClassDecorator {
  return (Reflect as any).metadata(nameKey, className);
}

/**
 * @example
 * const type = Customer;
 * getName(type); // 'Customer'
 * @param type
 */
export function getName(type: Function): string {
  return (Reflect as any).getMetadata(nameKey, type);
}

/**
 * @example
 * const instance = new Customer();
 * getInstanceName(instance); // 'Customer'
 * @param instance
 */
export function getInstanceName(instance: Object): string {
  return (Reflect as any).getMetadata(nameKey, instance.constructor);
} 
```

额外信息：

*   您可能需要安装[`reflect-metadata`](https://www.npmjs.com/package/reflect-metadata)
*   `reflect-metadata`是由 TypeScript 成员为提议的 ES7 反射 API 编写的 pollyfill
*   可以在[此处跟踪JS 中的装饰器提案](https://github.com/tc39/proposal-decorators)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-06-17T22:07:05.257

在 Angular2 中，这有助于获取组件名称：

```
 getName() {
        let comp:any = this.constructor;
        return comp.name;
    } 
```

**comp:any**是必需的，因为 TypeScript 编译器会发出错误，因为 Function 最初没有属性名称。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-05-29T10:01:48.500

*   必须添加“ ***.prototype.*** ”才能使用：`myClass.prototype.constructor.name`.
*   否则使用以下代码： `myClass.constructor.name`，我遇到了 TypeScript 错误：

`error TS2339: Property 'name' does not exist on type 'Function'`.

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-06-11T13:24:31.503

完整的 TypeScript 代码

```
public getClassName() {
    var funcNameRegex = /function (.{1,})\(/;
    var results  = (funcNameRegex).exec(this["constructor"].toString());
    return (results && results.length > 1) ? results[1] : "";
} 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2017-08-14T18:49:58.653

如果您已经知道预期的类型（例如，当方法返回[联合类型](https://www.typescriptlang.org/docs/handbook/advanced-types.html#union-types)时），那么您可以使用类型保护。

例如，对于原始类型，您可以使用[typeof guard](https://www.typescriptlang.org/docs/handbook/advanced-types.html#typeof-type-guards)：

```
if (typeof thing === "number") {
  // Do stuff
} 
```

对于复杂类型，您可以使用[instanceof guard](https://www.typescriptlang.org/docs/handbook/advanced-types.html#instanceof-type-guards)：

```
if (thing instanceof Array) {
  // Do stuff
} 
```

# c - 正则表达式以获取英文引号之间的字符串/单词

> ID：13613525
> 
> 赞同：2
> 
> 时间：2012-11-28T20:07:35.430
> 
> 标签：c, regex

我想在引号之间得到一个字符串，
我知道一个解决方案是：

```
/'.*?'/ 
```

但问题是它不适用于英语
中的所有格或收缩格，例如：

```
What is the name of Mario's brother in the 'Super Mario' video games? 
```

或者

```
He's my brother 
```

它不能与那些句子一起工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:09:48.617

一种选择是确保在开始之前和结束之后没有单词边界`'`：

```
/\B'.*?'\B/ 
```

单词字符（通常是正则表达式中的字母、数字、下划线）和非单词字符（其他任何字符或字符串的结尾）之间的位置构成单词边界（`\b`）。所有其他位置由 匹配`\B`。

[工作演示。](http://regexr.com?32vhr)

[进一步阅读单词边界。](http://www.regular-expressions.info/wordboundaries.html)

顺便说一句，如果您也想允许双引号，您可以使用反向引用确保一致的定界：

```
/\B(['"]).*?\1\B/ 
```

如果你只使用`['"]`两次，那么类似的东西`here "my' string`会给你一个匹配，你可能不想要。请注意，根据您定义正则表达式的方式，您可能需要转义其中一个引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T21:05:01.363

在 .NET Regex 风格中，您有平衡组，并且可能有 C 的 Regex 库也支持它。这是至少使用平衡组的解决方案：

```
(?<NestingCount>\B'\b)(?:(?<NestingCount>\B'\b)|(?<-NestingCount>\b(?:[?])?'\B)|.)+?(?(NestingCount)(?!)) 
```

这适用于您的两个示例（假设它们被'包围）。

关于我的解决方案的一些评论：

*   我使用平衡组来识别嵌套的引用文本（如“超级马里奥”）。
*   我用 . 标识任何引用的开头`\B'\b`。
*   我用 . 标识任何引用的结尾`\b(?:[?])?'\B`。这`(?:[?])?`部分是允许一个单词以可选的 ? 标记结尾，`[?]`如果我忘记了应该存在的其他单词结尾，您可以在组 ( ) 中添加更多内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T20:20:51.683

使用否定的前瞻和后瞻断言：

```
/(?<!\w)[\'\"][\w\s\?\'\.\!\,\;\:]+[\'\"](?!\w)/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T00:26:32.733

搭配简单的图案`/\B'.*?'\B/`

# ajax - 如何将持久登录 cookie 与并行 AJAX 请求结合起来？

> ID：13613526
> 
> 赞同：5
> 
> 时间：2012-11-28T20:07:43.680
> 
> 标签：ajax, security

我已经为“记住我”选项实施了[改进的持久登录 Cookie 最佳实践](http://jaspan.com/improved_persistent_login_cookie_best_practice)。

当请求按顺序排列时（传统的页面加载），这可以正常工作。在这种情况下，您可以确定下一个请求将具有相同的系列标识符和服务器上次发送的令牌。

但是在 AJAX 请求的情况下，多个请求同时来自同一个浏览器，第一个请求将导致生成一个新的令牌编号。但是其他请求不会有这个新生成的令牌号，我们会拒绝访问，将其视为盗窃。

我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-23T21:01:05.433

基于上述 Drupal 线程（[https://www.drupal.org/node/327263#comment-3428038](https://www.drupal.org/node/327263#comment-3428038)）上提出的解决方案，我想知道我们是否不能有一个更简单的算法。

为什么不使用当前用户会话，而不是将“旧”替换令牌存储在短暂的缓存表中？

```
1\. User logs in with PL cookie
If series & token are in PL table:
  2\. User session is populated with the last valid token
  3\. new token is given to client
  4\. user is logged in
If series key is in PL table, but token is not:
  2\. check if current user session still holds the latest replaced token
  If found:
    3\. user is logged in.  No new token is provided since one was generated in the first request.
  If not found:
    3\. Assume keys are stolen - series is destroyed 
```

但是，当会话状态未正确复制到所有节点时，此算法在负载平衡场景中不起作用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:21:01.897

我认为您将记住我与 CSRF（跨站点请求伪造）保护令牌混淆了。CSRF 令牌通过禁用未经身份验证的“功能执行”的可能性来保护应用程序。他们通过向每个响应发出不可推断的令牌，并在收到请求时对其进行验证来做到这一点。

记住我功能是一项允许用户登录的功能，即使原始会话早已不复存在。无需再次提供他的用户名/密码。您应该在每次成功登录时设置一次或一次记住我的令牌。不是在每个回应中。您没有在每个响应中设置会话 cookie 为什么要设置记住我的令牌？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T10:43:18.870

因为我有同样的问题，所以我一直在读一些关于这个的东西。

Barry Jaspan 和 Charles Miller 的技术似乎无法使用（尤其是在 AJAX 设置中），因为正如您所指出的那样，在服务器上生成新令牌和将其应用到 cookie 之间，可能会发生很多事情。

在我们的例子中，它是异步的，但在其他情况下，值可能不会在 cookie 中结束，因为它存储在服务器上（例如，在加载之前离开页面）。

巴里似乎[承认这一点](http://drupal.org/node/327263#comment-3425002)。

其次，使令牌失效（例如在密码更改时）会使您最终得到很多“幽灵”cookie。其中一个的每次访问都会使所有其他会话无效（此时可能在其中有有效的会话）。

由于这些限制，我认为最好的解决方案是以下组合：

*   HTTPS (SSL) 使用
*   这种技术，但*没有*在每个请求上重新生成
*   跟踪用户失效（处理上面的第二条评论）
*   仅 HTTP cookie（以避免脚本访问它们）

我已向 Barry 发送了一条消息，以考虑在他的页面上发布有关此问题的通知。

# prolog - Prolog 规则/查询

> ID：13613530
> 
> 赞同：0
> 
> 时间：2012-11-28T20:07:56.143
> 
> 标签：prolog, rules

鉴于以下事实：

```
people(ana, az, 13).

people(sam, ca, 24).

people(tom, il, 5).

people(ginger, ca, 52). 
```

我将如何编写一个序言规则来回答以下问题？

> 如果他大于 17 岁，他是成年人吗？

这就是我到目前为止所拥有的......（在此先感谢我是新手）

```
is_adult(Person):-
    people(Person, State, Age).
    Age>17. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:52:56.437

您可能已经从其他示例中获取了高度，对吗？

这应该是什么样子

```
is_adult(Person):-
    people(Person, State, Age),
    Age>17. 
```

# xml - 使用 nokogiri 在 XML 中查找文本

> ID：13613534
> 
> 赞同：0
> 
> 时间：2012-11-28T20:08:13.917
> 
> 标签：xml, xpath

我正在尝试从 XML 文件中获取值。

因此，我使用以下方法解析了 XML 以获取正确的容器：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:15:58.870

`:`用于分隔 XPath 表达式中的命名空间前缀。你宁愿需要类似的东西

```
//maskedcardaccount[contains(., '2345')] 
```

# java - 使线程睡眠随机数量的 MS

> ID：13613538
> 
> 赞同：21
> 
> 时间：2012-11-28T20:08:33.640
> 
> 标签：java, multithreading, concurrency

嘿，所以我有 3 个线程，它们在打印出某些东西时具有一定的条件。这很好用。我现在想要做的是在线程输出一些东西之前让它进入睡眠状态随机数量的毫秒。我正在考虑使用数学课，但不知道如何。

random() 应该生成大于或等于 0.0 且小于 1.0 的随机双精度数，对吗？

我会写一些类似的东西吗

```
Thread.sleep(random()); 
```

^ 试过了还是不行

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-28T20:10:06.707

[`Thread.sleep()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#sleep%28long%29)取值`long`not `double`。您需要在这里进行类型转换：-

```
Thread.sleep((long)(Math.random() * 1000)); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-28T20:10:10.763

[`Thread.sleep()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#sleep%28long%29)接受一个`long`值，即休眠的毫秒数。在 0 和 1 之间传递一个浮点值是行不通的，因为该值总是会被​​截断为零。

要解决此问题，请从适当的范围内生成一个随机整数，并将其传递给`Thread.sleep()`.

例如，要休眠一秒钟，请使用`Thread.sleep(random.nextInt(1000));`. 这里，`random`是一个类型的对象[`Random`](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-28T20:10:30.420

您的代码有两个问题：

1.  最短的时间`sleep()`是 1 毫秒

2.  类型不正确：`double`与`long`.

这将起作用：

```
Thread.sleep((long)(Math.random() * 1000)); 
```

它将休眠 0 到 1000 毫秒之间的时间。

# ios - iOS：主视图 -> 详细视图（如何使详细视图可编辑）

> ID：13613540
> 
> 赞同：0
> 
> 时间：2012-11-28T20:08:38.943
> 
> 标签：ios, uinavigationcontroller

我正在寻找实现可编辑详细信息视图的可能性。我的应用程序有一个经典的 Master -> Detail View 设置。苹果文档（http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/EnablingEditModeinaViewController/EnablingEditModeinaViewController.html）提到：

> 如果您希望显示一组新的视图进行编辑，您应该呈现一个新的视图控制器或使用导航控制器来呈现新的视图。

但我该如何实现呢？我的想法是额外创建的“可编辑视图”也可用于创建新对象。如何将这样一个新的“可编辑视图”连接到我当前的两个视图“主视图”和“详细视图”？这更像是一个概念问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:39:41.867

可能性1：将详细视图控制器放入导航视图控制器。在按钮选项卡上，将具有编辑功能的视图控制器推送到导航堆栈上。如果您完成了编辑，保存并弹出到详细视图控制器。

可能性2：将编辑视图控制器呈现为详细视图控制器中的模态视图控制器。完成编辑后，保存并关闭模态视图控制器。

如果你不明白我在写什么，你应该买一本书来学习。

# php - 使用带有 CodeIgniter 的自制导航类

> ID：13613541
> 
> 赞同：0
> 
> 时间：2012-11-28T20:08:42.853
> 
> 标签：php, codeigniter, navigation

我刚开始使用 CodeIgniter，现在我已经在 CI 的库文件中包含了我自己的类，我想用它们来导航。

问题是我不知道在哪里调用这个类以及如何将它与 CI 标准一起使用.. 我一直在寻找这个没有运气......有人能给我正确的答案吗？

以一种正常的方式，我会做这样的事情来调用导航类并使用它。

```
 $menu = new Navigation("navigation");
    $menu_items = array("home", "about");

    foreach($menu_items as $items) { 
       $items = new NavigationItem();
       $items->setMenuItem($item);
       $menu->addChild($items);
    }
echo $menu->display(); 
```

我目前使用的代码是：

```
 $construct = array(
        'name' => 'nav'
    );

    $menu_items = array("home", "about");

    $men = $this->load->library('Navigation', $construct);
    foreach($menu_items as $item) {
        $item = $this->load->library('NavigationItem');
        $this->navigationitem->setMenuItem($item);
        $this->navigation->addChild($item);
    }

    $this->navigation->display(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:21:42.980

答案可以在用户指南的“使用你的课程”部分找到：http: [//ellislab.com/codeigniter/user-guide/general/creating_libraries.html](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)

```
 $construct = array(
    'name' => 'nav'
);

$menu_items = array("home", "about");

$men = $this->load->library('Navigation', $construct);
foreach($menu_items as $menu) {
    $this->load->library('NavigationItem');
    $this->navigationitem->setMenuItem($menu);
    $this->navigation->addChild($this->navigationitem);
}

$this->navigation->display(); 
```

# javascript - 通过 Rails 中的复选框和下拉菜单更新多条记录。

> ID：13613542
> 
> 赞同：1
> 
> 时间：2012-11-28T20:08:47.400
> 
> 标签：javascript, ruby-on-rails, forms, drop-down-menu

假设我在索引中有几个帖子。

我需要能够通过复选框选择其中的多个，然后选择要对所有选定记录执行的操作（删除、切换数据库中的布尔字段以使它们全部公开或私有，所有其他任意方法他们等）使用带有选项的下拉菜单和“提交”按钮？

实现这一目标的最佳和最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:15:07.673

您可以做的是在您的控制器中针对您的提交操作定义一个方法，然后在每个项目上单独循环以更新每条记录

```
def update_multiple
  @products = Product.find(params[:product_ids])
  @products.each do |product|
    product.update_attributes!(params[:product].reject { |k,v| v.blank? })
  end
  flash[:notice] = "Updated products!"
  redirect_to products_path
end 
```

# solr - Solr 对“热狗”和“热狗”的模糊搜索

> ID：13613546
> 
> 赞同：4
> 
> 时间：2012-11-28T20:09:03.417
> 
> 标签：solr, full-text-search, fuzzy-search

Solr 搜索的新手，我不能让它发生，所以当我搜索时`Hot dog`，它可以找到`hotdog`，当我搜索时`hotdog`，它可以找到`hot dog`。确实尝试将其放入 synonyms.txt，但不起作用。尝试过`text_general`,`text_en`和`text_en_splitting`.

试过hotdog~，“hot dog”~14，“hot~dog~”~14

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:13:48.220

您是否尝试`hot~ AND dog~`假设默认字段设置为您正在搜索的字段。

如果您想使用字段名称进行显式搜索，查询将如下所示。

```
fieldName:hot~ AND fieldName:dog~ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:38:59.117

您可以通过将以下行添加到 synonyms.txt 文件中来解决它。

> 热狗，热狗

确保在 SynonymFilterFactory 定义中设置**expand=true 。**

在索引期间使用 SynonymFilterFactory 会更好。然后重新索引您的数据，它应该可以工作。

顺便说一句，我使用的是 Solr 3.6.1 版本并使用 text_general 进行索引。

# wordpress - 我怎样才能进入 WordPress 的这个后端屏幕？

> ID：13613547
> 
> 赞同：1
> 
> 时间：2012-11-28T20:09:03.323
> 
> 标签：wordpress, website-admin

这可能听起来很愚蠢，但我正在[看这个教程](http://www.youtube.com/watch?v=EpBGhFkT3_s)，我如何到达 1:00 出现的那个屏幕？^(快照波纹管)

[![优酷截图](../Images/caf854fb6e8055dc2dbbe8242058c9ea.png)](https://i.stack.imgur.com/u0OSV.png)

我觉得这可能比我想象的要简单......我需要购买主机或其他东西吗？我注册了一个 wordpress.org 帐户，但在网站上的任何地方都没有看到此部分

我非常接近将我的页面变成一个 wordpress 只是无法弄清楚这个小东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:34:44.220

您需要安装插件：[http ://wordpress.org/extend/plugins/static-html-output-plugin/](http://wordpress.org/extend/plugins/static-html-output-plugin/)

然后，您将在“设置”菜单中有一个 WP Static HTML 条目。

# linux - 如何在 Linux 上显示当前磁盘 IO 队列长度？

> ID：13613550
> 
> 赞同：14
> 
> 时间：2012-11-28T20:09:13.423
> 
> 标签：linux, io, kernel, block, scheduler

我正在为 Linux 内核开发一个新的 IO 调度程序。我想看看是否有人知道在 Linux 中打印出未完成 IO 请求（磁盘 IO 队列）总数的工具？

我会在终端上工作。

谢谢！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2015-05-18T01:03:17.947

原谅这里的大死灵。您实际上想要`iostat -x`显示自上次运行 iostat 以来相关设备的扩展统计信息。如果您希望实时监控队列`iostat -xt 1`（或`iostat -xmt 1`以兆字节为单位显示详细信息）。

您可以在列中看到平均队列大小`aqu-sz`（在以前的版本中`avgqu-sz`）。

考虑以下示例输出，`iostat -xmt 1`其中显示了一个完整的 IO 队列（此设备的最大队列长度为 128）和一个在基准测试期间饱和的磁盘。

```
18/05/15 00:41:05
avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           0.00    0.00    0.00    6.02    0.00   93.98

Device:         rrqm/s   wrqm/s     r/s     w/s    rMB/s    wMB/s avgrq-sz avgqu-sz   await  svctm  %util
xvda              0.00     0.00    1.00 1308.00     0.00   163.50   255.81   133.30  101.15   0.76 100.00 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T20:10:43.243

```
dmitry@pro:~$ iostat 
          disk0       cpu     load average
    KB/t tps  MB/s  us sy id   1m   5m   15m
   50.70  34  1.70   4  3 93  1.83 1.65 1.70
dmitry@pro:~$ 
```

> 描述 Iostat 显示有关终端、设备和 cpu 操作的内核 I/O 统计信息。打印的第一个统计数据是系统正常运行时间的平均值。要获取有关当前活动的信息，应指定合适的等待时间，以便随后打印的统计数据集将在该时间段内进行平均。

# java - How do I use SpringFramework with Android and JSON/POST?

> ID：13613554
> 
> 赞同：1
> 
> 时间：2012-11-28T20:09:39.983
> 
> 标签：java, android, json

I've read and tried just about every solution on the internet for doing this, and they all seem to produce an exception for me. I am successfully doing a GET but can't seem to get a POST to work.

Here's my current code:

```
 String url = new String("http://www.myurl.com/scripts/json/v1/slipmanager.php");

    MultiValueMap<String, Object> formData = new LinkedMultiValueMap<String, Object>();
    formData.add("username", userName);
    formData.add("password", userPassword);
    formData.add("method", "getslips");

    HttpHeaders requestHeaders = new HttpHeaders();
    requestHeaders.setContentType(MediaType.MULTIPART_FORM_DATA);
    HttpEntity<MultiValueMap<String, Object>> requestEntity = new HttpEntity<MultiValueMap<String, Object>>(formData, requestHeaders);
    RestTemplate restTemplate = new RestTemplate();

    //I TRIED THIS ONE TOO AND IT GIVES AN EXCEPTION AS WELL
    //restTemplate.getMessageConverters().add(new MappingJacksonHttpMessageConverter());

    restTemplate.getMessageConverters().add(new StringHttpMessageConverter());
    ResponseEntity<String> response = null;
    try {
    response = restTemplate.exchange(url, HttpMethod.POST, requestEntity,
            String.class);
    } catch (Exception e) {
        Log.e("get post", e.getMessage(), e);
    }

    JSONObject motdsJSONObject = new JSONObject( response.getBody()); 
```

There error that I'm getting:

```
11-28 15:03:41.419: E/get post(7954): null
11-28 15:03:41.419: E/get post(7954): java.lang.NullPointerException
11-28 15:03:41.419: E/get post(7954):   at org.springframework.http.client.SimpleClientHttpResponse.getStatusCode(SimpleClientHttpResponse.java:62)
11-28 15:03:41.419: E/get post(7954):   at org.springframework.web.client.DefaultResponseErrorHandler.hasError(DefaultResponseErrorHandler.java:46)
11-28 15:03:41.419: E/get post(7954):   at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:476)
11-28 15:03:41.419: E/get post(7954):   at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:438)
11-28 15:03:41.419: E/get post(7954):   at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:414)
11-28 15:03:41.419: E/get post(7954):   at com.mytemp.myapp.TimeSlipAPI.readTimeSlipFromAPI(TimeSlipAPI.java:75)
11-28 15:03:41.419: E/get post(7954):   at com.mytemp.myapp.TimeSlipPicker.populateList(TimeSlipPicker.java:382)
11-28 15:03:41.419: E/get post(7954):   at com.mytemp.myapp.TimeSlipPicker.onCreate(TimeSlipPicker.java:79)
11-28 15:03:41.419: E/get post(7954):   at android.app.Activity.performCreate(Activity.java:5104)
11-28 15:03:41.419: E/get post(7954):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
11-28 15:03:41.419: E/get post(7954):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
11-28 15:03:41.419: E/get post(7954):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
11-28 15:03:41.419: E/get post(7954):   at android.app.ActivityThread.access$600(ActivityThread.java:141)
11-28 15:03:41.419: E/get post(7954):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
11-28 15:03:41.419: E/get post(7954):   at android.os.Handler.dispatchMessage(Handler.java:99)
11-28 15:03:41.419: E/get post(7954):   at android.os.Looper.loop(Looper.java:137)
11-28 15:03:41.419: E/get post(7954):   at android.app.ActivityThread.main(ActivityThread.java:5039)
11-28 15:03:41.419: E/get post(7954):   at java.lang.reflect.Method.invokeNative(Native Method)
11-28 15:03:41.419: E/get post(7954):   at java.lang.reflect.Method.invoke(Method.java:511)
11-28 15:03:41.419: E/get post(7954):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
11-28 15:03:41.419: E/get post(7954):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
11-28 15:03:41.419: E/get post(7954):   at dalvik.system.NativeStart.main(Native Method) 
```

# asp.net-mvc-3 - 检测 Active Directory 域

> ID：13613555
> 
> 赞同：0
> 
> 时间：2012-11-28T20:09:42.893
> 
> 标签：asp.net-mvc-3, active-directory

我试图找出是否可以检测用户是否从给定域（网络域而不是网站域）访问该站点，例如该`businessname.local`域上的机器。

我目前`Forms`为非常合适的网站实施身份验证。我正在考虑`Intranet`为公司实施一个网站。

这将是一个完全独立于主站点的项目。我的目标是检测用户计算机是否在域中，并为他们提供访问的选项`Intranet`，如果他们愿意，我会重定向用户。

这可能吗？

编辑：

只是为了澄清。我不是在询问是否为`Intranet`站点实施 Active-Directory 身份验证（我知道如何执行此操作）。我只是想知道是否存在一种方法来检测域并提供重定向是否适用于给定用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:54:08.310

检测用户是否在域内还不错。使用这行代码：

```
HttpContext.User.Identity.Name 
```

从那里，你会得到这样的东西：域\用户名。只需操纵字符串以查看域并从那里提供重定向。放置在控制器中很容易，例如放在索引页面等中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T21:05:32.457

我想出的解决该问题的解决方案是`Controller`在 Intranet 站点上创建一个，该站点仅用于返回一个`true`或`false`依赖于访问它的机器的 Active Directory 身份验证。

预期的结果只是显示重定向选项......不显示实际内容，所以我不认为这会引发任何安全问题（如果我错了，请纠正我）。

```
$(document).ready(function () {
    $.get('URL-to-test-controller', function (data) {
        if ($.trim(data) === "true") {
            if (askAboutRedirect()) {
                window.location = "intranetaddress";
            }
        }
    });
}); 
```

由于跨域问题，`Controller`提供的结果具有`Access-Control-Allow-Origin`标头集...

```
Response.AddHeader("Access-Control-Allow-Origin", "requesting server"); 
```

根据[W3.org](http://www.w3.org/TR/cors/#access-control-allow-origin-response-header)

# arrays - Looping through a 3D array to find the mean and standard deviation

> ID：13613557
> 
> 赞同：1
> 
> 时间：2012-11-28T20:09:48.477
> 
> 标签：arrays, matlab, octave, mean

Ok so I have an array <134x106x108>. What I'm trying to do is loop through this array and store the average/standard deviation into another array. So basically there will be 134 <106x108 doubles> that will be in this meanArray and sdArray.

```
 %dayv=<134x106x108>
 sdArray=zeros(1,106,108);
 meanArray=zeros(1,106,108);
for i=1:size(dayv,1)
    %store means/standard deviation into an array
    meanArray(i,:,:) = squeeze(mean(dayv(i,:,:)));
    sdArray(i,:,:) = squeeze(std(dayv(i,:,:)));
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T20:38:17.030

如果您希望您的每一种方法都是整个 106x108 矩阵的平均值，那么一个简单的解决方案是使用以下方法将您的 3d 矩阵重塑为 2d 矩阵，

```
dayv2 = reshape(dayv,[134 106*108]); 
```

现在，这些 106x108 矩阵中的每一个都是新矩阵中的行向量。

然后

```
meanArray = mean(dayv2,2); % Get mean of each row
stdArray  = std(dayv2,0,2);% Std of each row 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T20:16:31.143

您不需要使用循环来解决此问题。matlab 内置函数`mean`，`std`能够沿矩阵的各个维度进行计算：

```
meanArray = squeeze(mean(dayv, 1));
sdArray = squeeze(std(dayv, [], 1)); 
```

当您在代码中初始化时，上面的代码将沿第一个维度进行平均，并产生一个106x108 的`meanArray`和。`sdArray`另一方面，如果您想要`meanArray`并且`sdArray`是长度为 134 的一维向量（正如您的循环所暗示的那样），您会这样做

```
meanArray = mean( mean(dayv, 3), 2 );
sdArray = squeeze(std( reshape( dayv,  134, [] ), [], 2 )); 
```

where`reshape`重新组织您的矩阵，使其为 134x(106*108)，以便`std`可以正确处理它。

您可以将上述方法与基于 for 循环的代码进行比较：

```
for i=1:size(dayv,1)
  slice = squeeze(dayv(i,:,:));
  meanArray(i) = mean(slice(:));
  sdArray(i) = std(slice(:));
end 
```

# asp.net - Why can't I SaveChanges() to my DbContext like this?

> ID：13613559
> 
> 赞同：1
> 
> 时间：2012-11-28T20:09:59.203
> 
> 标签：asp.net, sql-server, asp.net-mvc, database, entity-framework

I had some code for inserting some rows that wasn't working:

```
using (MyDbContext context = new MyDbContext()) {
    foreach (Order o in FormOrders) { //That's a List<T> that got generated based on a web form
        context.Orders.Add(o);
    }
    context.SaveChanges();
} 
```

I finally figured out how to make it work:

```
foreach (Order o in FormOrders) {
    context.Orders.Add(o);
    context.SaveChanges();
} 
```

However, I realize that's not very efficient. Granted, the most Orders that will ever get inserted at one time is about 40, but I'm still interested in using best practices as much as I can.

I'm guessing code snippit #1 didn't work because `o` is out of scope of the point that `SaveChanges()` is called, but I don't understand how this works well enough to be sure, and I definitely don't understand it enough to figure out what a better way is.

Also, I have heard that you're supposed to use a new instance of your DbContext for every row, which would be even less efficient to implement in the above case. Is that true?

**EDIT**

忽略这个问题。两个版本似乎都有效。我不知道是什么问题。我不会删除它，因为其他人可能会发现某些评论/答案很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:18:39.687

我想你在这里处理闭包。

试试这个代码是否适合你：

```
using (MyDbContext context = new MyDbContext())
{
    foreach (Order o in FormOrders)
    {
        Order localCopy = o;
        context.Orders.Add(localCopy);
    }
    context.SaveChanges();
} 
```

简而言之，您的 Add() 方法将只执行一次。由于延迟执行，只会添加循环的最后一项。

*（引自 Jon 的文章链接如下）*

> **什么是闭包？**
> 
> 简单地说，闭包允许你封装一些行为，像任何其他对象一样传递它，并且仍然可以访问它们首次声明的上下文。这允许您将控制结构、逻辑运算符等与它们将如何使用的细节分开。访问原始上下文的能力是将闭包与普通对象区分开来，尽管闭包实现通常使用普通对象和编译器技巧来实现这一点。

专家们会比我更好地解释这一点：

*   Microsoft 的**Eric Lippert**：[关闭循环变量被认为是有害的](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)
*   Google 的**Jon Skeet**：[闭包之美](http://csharpindepth.com/Articles/Chapter5/Closures.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:52:29.000

我不知道您使用的是哪个上下文，但鉴于乐观并发冲突，LINQ to SQL SubmitChanges 的行为与 LINQ to Entitie 的 SaveChanges 不同。

**SubmitChanges** = DataContext
**SaveChanges** = ObjectContext

```
using (MyDbContext context = new MyDbContext()) {
    foreach (Order o in FormOrders) { //That's a List<T> that got generated based on a web form
        context.Orders.Add(o);
    }
    context.SubmitChanges();
} 
```

# jakarta-ee - 没有 JSF 的 Java EE 6：对 Web 开发人员最友好的替代方案是什么？

> ID：13613563
> 
> 赞同：0
> 
> 时间：2012-11-28T20:10:03.517
> 
> 标签：jakarta-ee, model-view-controller, java-ee-6, template-engine

过去几年一直在使用非常“经典”的技术堆栈：Java SE + Spring Web MVC + Freemarker 模板引擎（以及使用 Play! Framework 进行一些开发）和大量内置于 JavaScript 的客户端逻辑。jQuery，我现在想知道在采用 Java EE 6 时，直接渲染层的最佳选择是什么？我的团队（由拥有大量 HTML/CSS/JavaScript 专业知识的 Web 开发人员组成）想尽一切办法避免使用 JSF。您可以推荐哪些框架？一种选择可能是[mustache.java](http://mustache.java)，如果您能分享您的经验，那就太好了...

相关问题确实涵盖了有关 JSF (2.0) 的优缺点，但不幸的是没有可用的轻量级替代方案：

*   [Java-EE：JSF 的更简洁的替代方案](https://stackoverflow.com/questions/6307205/java-ee-cleaner-and-simpler-alternatives-to-jsf)
*   [Java Server Faces 2.0 的主要缺点是什么？](https://stackoverflow.com/questions/3623911/what-are-the-main-disadvantages-of-java-server-faces-2-0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:38:40.920

查看Google的[AngularJS或](http://angularjs.org/)[骨干网](http://backbonejs.org/)。没有在其中任何一个上工作，但我知道这些。此外，一旦您退出 Java EE 6 规范，就会更多地涉及将这些框架集成到 Java EE 编程范式中。

# c - 睡觉的理发师 OSSEMPEND()

> ID：13613568
> 
> 赞同：0
> 
> 时间：2012-11-28T20:10:12.543
> 
> 标签：c, ucos

我正在尝试用 c 进行睡眠理发练习，但我不知道出了什么问题。有人请用外行术语向我解释我需要做什么来解决它。我不断收到此消息：

app_main.c，第 72 行：错误：void 值没有被忽略，因为它应该是 app_main.c，第 73 行：错误：void 值没有被忽略，因为它应该是

```
#define TASK0_PIN 0x80
INT8U err;
INT8U  err2;
void Task0(void *dptr)
{

       int value = OSSemPend(Barber,1,err); //aquire semaphore to perform barber
       int value2 = OSSemPend(FreeSeats,1,err2); 
```

那就是问题所在。下面你可以看到整个代码。

```
 /*
    **********************************************************
    * uCOSII example 0
    *
    * uCOS uses prioritized preemptive scheduling.
    *
    * This example program contains 2 tasks:
    * Task0 has lower priority (5) and can be preempted by task1.
    * Task1 has higher priority (3).
    **********************************************************
    */
    #include "ucos_ii.h"
    #include <stdio.h>
    #include <avr/io.h>
    #include <avr/interrupt.h>
     OS_EVENT *Barber;
     OS_EVENT *FreeSeats;

    int Customers;
    //int Barber;
    //int FreeSeats; //total number of seats

    int Ready;
    int  Ready2;
    int value;
    int value2;

    OS_STK Task0Stk[TASK0_STK_SIZE] __attribute__ ((section (".bss.stacks")));
    OS_STK Task1Stk[TASK1_STK_SIZE] __attribute__ ((section (".bss.stacks")));
    OS_STK Task2Stk[TASK2_STK_SIZE] __attribute__ ((section (".bss.stacks")));
    int status;

    void   Task0(void *objdata);
    void   Task1(void *objdata);
    void   Task2(void *objdata);

    int main(void)
    {
      OSInit();
      status=OSTaskCreate(Task0,(void *)NULL,(OS_STK *)&Task0Stk[TASK0_STK_SIZE - 1], TASK0_PRIO);
      status=OSTaskCreate(Task1,(void *)NULL,(OS_STK *)&Task1Stk[TASK1_STK_SIZE - 1], TASK1_PRIO);
      status=OSTaskCreate(Task2,(void *)NULL,(OS_STK *)&Task2Stk[TASK2_STK_SIZE - 1], TASK2_PRIO);

     Customers = 0;
      Barber = OSSemCreate(1); //total nro of barbers
    FreeSeats = OSSemCreate(2); //total number of seats

    Ready= OSSemPost(Barber); // release semaphore
   Ready2= OSSemPost(FreeSeats);

      OSStart();  //OSStart never returns
      return 0;
    }

    //------------------------------------------------------------------
    // Task0 toggles pin PD7 every 3\. OS tick (=3 msec with default tick 1 msec)
    //------------------------------------------------------------------
    #define TASK0_PIN 0x80
    INT8U err;
    INT8U  err2;
    void Task0(void *dptr)
    {
    //||

               value = OSSemPend(Barber,1,err); //aquire semaphore to perform barber
                  value2 = OSSemPend(FreeSeats,1,err2);

     if (value<1 || value2<1 )//if barber or seat are not available then wait
      {
      OSTimeDly(3);
      }
      else
    {

      DDRD|=TASK0_PIN;
      for (;;) {
        PORTD^=TASK0_PIN;
        OSTimeDly(3); //wait 3 msec

     Ready;  //increment the semaphore and remove the task with highest priority from list and make it ready to run
     Ready2;
      }
    }
    }
    //------------------------------------------------------------------
    // Task0 toggles pin PD6 every OS tick (default 1 msec)
    //------------------------------------------------------------------
    #define TASK1_PIN 0x40
    void Task1(void *dptr)
    {

     Customers +1;
      if (FreeSeats >= 2)
      {
        FreeSeats -2;
      dptr=dptr;
      DDRD|=TASK1_PIN;
      for (;;) {
        PORTD^=TASK1_PIN;
      FreeSeats  +2;
      Customers -1;
        OSTimeDly(1); //wait 1 system tick
      }
       }
       else
    {
     OSTimeDly(3);
     Task1;
    }

    }

    //------------------------------------------------------------------
    // Task2 toggles pin PD6 every OS tick (default 1 msec)
    //------------------------------------------------------------------
    #define TASK2_PIN 0x20
    void Task2(void *dptr)
    {
       Customers +1;
      if (FreeSeats >= 2)
      {
        FreeSeats -2;

      dptr=dptr;
      DDRD|=TASK2_PIN;
      for (;;) {
        PORTD^=TASK2_PIN;
          FreeSeats  +2;
             Customers -1;
        OSTimeDly(2); //wait 1 system tick
      }
      }

     else
    {
     OSTimeDly(3);
     Task2;
    }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T21:05:00.280

OSSemPend 返回 void 并且您将返回的值分配给`value`and`value2`

看起来你可能想要

```
OSSemPend(Barber,1,&err); //aquire semaphore to perform barber
OSSemPend(FreeSeats,1,&err2);
if (err != 0 || err2 != 0 )//if barber or seat are not available then wait 
```

或者你想使用

```
value = OSSemPend(Barber,1);
value2 = OSSemPend(FreeSeats,1,); 
```

# gcc - 如何在 Ubuntu x64 上为 ARM 编译 GDB？

> ID：13613570
> 
> 赞同：1
> 
> 时间：2012-11-28T20:10:19.170
> 
> 标签：gcc, ubuntu, gdb, arm

我在虚拟机上有 Ubuntu 12.10 x64，我需要为 ARM 平台编译 GDB 7.5。任何人都可以向我提供执行此操作的说明吗？（我尝试了多种命令行选项，但没有积极的结果。）

我需要一个 ARM gdbserver 和 x86/x64 客户端。

感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T01:25:49.490

这是关于 SO 的另一个[线程](https://stackoverflow.com/q/5665800/981380)，讨论了类似的问题。

*   [从这里](http://www.gnu.org/software/gdb/)下载 gdbserver 的源代码
*   然后按照上面链接的线程中的说明进行操作。一般说明将类似，但可能会根据您的平台和构建环境存在一些变化。
*   如果在这里有用，请提供指向gdb 手册的[链接。](http://www.gnuarm.com/pdf/gdb.pdf)

上述步骤只是一个基本指南。如果您遇到任何特定问题，请编辑您的帖子，并提供有关构建失败位置的更多详细信息。

祝你好运！

# opencv - 如何加快openCV中的颜色聚类？

> ID：13613573
> 
> 赞同：6
> 
> 时间：2012-11-28T20:10:21.283
> 
> 标签：opencv, cluster-analysis, data-mining, k-means, image-segmentation

对于一个项目，我想实现一个颜色聚类算法，用聚类的平均颜色替换相似的颜色。

目前，我使用 kmeans-algorithm 对整个图像进行聚类。但这需要很长时间。有人知道如何使用 kmeans 对颜色直方图进行聚类，所以我可以执行这个算法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T23:28:47.833

**首先对图像进行下采样**，然后运行 ​​k-means。

如果在 x 和 y 中将图像的大小调整为 1/2，它应该不会对颜色产生太大影响，但 k-means 最多应该占用 1/4 的时间。如果重新采样到宽度和高度的 1/10，k-means 的运行速度应该快 100 倍。

[https://en.wikipedia.org/wiki/Color_quantization](https://en.wikipedia.org/wiki/Color_quantization)

通过对图像进行下采样，您可以在聚类期间处理更少的“像素”。但最终，它应该会产生大致相同的配色方案。

## *k* -means的小总结：

1.  它将每个对象（=像素）映射到最近的集群中心（=调色板条目）
2.  它重新计算每个调色板条目以最好地表示分配的点（= 像素）
3.  重复直到没有任何变化。

所以*真正的*输出不是图像或图像区域。这是**调色板**。

然后，您只需将每个像素替换为最接近的颜色，即可将**任意图像**（包括全分辨率版本）映射到此调色板！

## 复杂性和性能：

k-means 的复杂性是`O(n*k*i)`，其中`n`是您拥有的*像素数，* *k*是所需的输出颜色数，*i*是收敛所需的迭代次数。

`n`：通过下采样，您可以轻松减少`n`最大的因素。在许多情况下，您可以在看到性能下降之前显着减少这种情况。

`k`：这是您想要的输出颜色数。是否可以减少这种情况取决于您的实际用例。

`i`：各种因素都会对收敛产生影响（包括其他两个因素！），但最强的可能是具有良好的起始值。因此，如果您有一个*非常快速*但质量低的方法来选择调色板，请先运行它，然后使用 k-means 来优化此调色板。不过，也许 OpenCV 已经为此包含了适当的启发式方法！

您可以看到，最简单的方法是减少`n`. 您*可以*显着减少`n`，为缩略图生成优化的调色板，然后在完整图像上*重新运行*k-means 以*优化*此调色板。因为 - 希望 - 这将显着减少迭代次数，这有时可以很好地执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:53:59.987

我的答案与直方图聚类无关，但最近我需要加快算法的聚类过程。为此，我做了以下事情：

1.  将图像调整为较小的图像（实际上已经建议）
2.  减少颜色数量（[图像量化](http://en.wikipedia.org/wiki/Quantization_%28image_processing%29)）。我按照这里的建议做了：[如何使用 OpenCV 减少图像中的颜色数量？](https://stackoverflow.com/questions/5906693/reduce-the-number-of-colors-in-an-image-with-opencv-python).

这确实帮助我在某些时候加速了集群化。您也可以尝试使用 OpenCV 的[mean-shift filtering](http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=pyrmean#pyrmeanshiftfiltering)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T09:11:30.750

您需要为每个数据分配一个权重，即直方图箱中的值的数量。然后，当您计算集群质心的新值时，您使用加权平均值而不是普通平均值。但是 OpenCV KMeans 聚类的接口不支持加权值。您可以使用确实支持它的[C 集群库](http://bonsai.hgc.jp/~mdehoon/software/cluster/software.htm)，它有很好的文档记录（尽管从生物信息学中获取示例），并且易于集成（单个 .h/.c 文件）。

# python - 打印没有字典名称的字典键？如何/为什么？

> ID：13613577
> 
> 赞同：5
> 
> 时间：2012-11-28T20:10:53.230
> 
> 标签：python, printing, dictionary, python-3.x, key

所以我创建了一个字典来设置一个小游戏的难度级别。

```
diff_dict = {'easy':0.2, 'medium':0.1, 'hard':0.05} # difficulty level dict 
```

键将是难度名称和值，我将使用一些比率来计算难度。

所以我试图弄清楚如何只向用户打印密钥：

```
print('\nHere are the 3 possible choices: ',diff_dict.keys()) 
```

这将打印为：

```
Here are the 3 possible choices:  dict_keys(['hard', 'easy', 'medium']) 
```

显然我不想显示字典名称，所以我继续搜索，我确实找到了一个可行的解决方案：

```
diff_keys = diff_dict.keys()
print ('\nHere are the 3 possible choices: ',list(diff_keys)) 
```

但是我还是想知道有没有其他的方法可以实现这个，那为什么等等。所以我在这里用Qs：

1.  我可以在不创建新元素（例如 diff_keys）的情况下获得相同的结果吗？

2.  为什么`diff_dict.keys`显示字典。姓名？难道我做错了什么？

3.  附带说明一下，如何在没有字符串引号 (') 的情况下打印键或其他元素，如列表、元组等？

4.  与上面的 #3 相同，但括号 ([ ])

谢谢和cheerio :-)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-28T20:18:14.600

问题是，在 Python 3 中，dict 的方法`keys()`不返回一个列表，而是一个特殊的[视图对象](http://docs.python.org/3/library/stdtypes.html#dictionary-view-objects)。该对象有一个[魔术`__str__`方法](http://docs.python.org/3/reference/datamodel.html#object.__str__)，每次您使用该对象时都会在后台调用`print`该对象；因此对于通过调用创建的视图对象进行`keys()` `__str__`定义，以便生成的字符串包含`"dict_keys"`.

寻找自己：

```
In [1]: diff_dict = {'easy': 0.2, 'medium': 0.1, 'hard': 0.05}

In [2]: print('Here are the 3 possible choices:', diff_dict.keys())
Here are the 3 possible choices: dict_keys(['medium', 'hard', 'easy'])

In [3]: diff_dict.keys().__str__()
Out[3]: "dict_keys(['medium', 'hard', 'easy'])" 
```

请注意，99.9% 的时间您不需要直接调用此方法，我这样做只是为了说明事情是如何工作的。

一般来说，当你想打印一些数据时，你几乎总是想做一些[字符串格式化](http://docs.python.org/3/library/string.html#formatstrings)。但是，在这种情况下，一个简单的[`str.join`](http://docs.python.org/3/library/stdtypes.html#str.join)就足够了：

```
In [4]: print('Here are the 3 possible choices:', ', '.join(diff_dict))
Here are the 3 possible choices: medium, hard, easy 
```

* * *

所以，回答你的问题：

> 我可以在不创建新元素（例如 diff_keys）的情况下获得相同的结果吗？

上面显示了一个示例。

> 为什么 diff_dict.keys 显示字典。姓名？难道我做错了什么？

因为它的`__str__`方法就是这样工作的。这是“直接”打印对象时必须处理的问题。

> 如何在没有字符串引号 (') 的情况下打印键或其他元素，如列表、元组等？
> 
> 与上面的 #3 相同，但括号 ([ ])

打印它们，这样它们`__str__`就不会被调用。（基本上，不要打印**它们**。）以您喜欢的任何方式构造一个字符串，将您的数据制作到其中，然后打印它。您可以使用字符串格式化，以及许多有用的[字符串方法](http://docs.python.org/3/library/stdtypes.html#string-methods)。

# javascript - 在父窗口的新选项卡中打开 iframe 链接

> ID：13613579
> 
> 赞同：1
> 
> 时间：2012-11-28T20:11:01.383
> 
> 标签：javascript, jquery, iframe, javascript-events

我有一个 iframe 和嵌入 iframe 的主窗口。iframe 有一个表单，用户可以在其中输入数据并最终提交。

现在我用

```
var openURL = '/results/finalpage';
window.open(openURL, '_parent'); 
```

这将在父窗口中打开 iframe 表单的页面结果，因此包含 iframe 的窗口现在加载新的结果页面。

所以我想在父窗口的新选项卡中打开表单的结果。我猜我们可以在这里使用 href 加载新标签。但是表单提交有一个 onclick 事件，它处理输入并相应地改变结果页面 url。有没有简单的解决方案来做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-28T22:30:48.843

_parent 目标工作正常，您需要选择顶部窗口并使用 _blank

```
var openURL = '/results/finalpage';
top.open(openURL, '_blank'); 
```

# ios - ImageView 保持侧卧

> ID：13613580
> 
> 赞同：0
> 
> 时间：2012-11-28T20:11:02.863
> 
> 标签：ios, xcode, uiimageview, rotation

这是我的问题。我的应用程序以横向模式启动，看起来像这样

![在此处输入图像描述](../Images/6d89d82647346297d2d7c2d2abd34520.png)

我有几张门的图像，如下所示：

![在此处输入图像描述](../Images/c70c3863a93a16102f9f1644baba6f55.png)

![在此处输入图像描述](../Images/702b0eed14368bfb26ec6d959e66d16b.png)

在 AppDelegate didFinishLaunchingWithOptions 中，我添加了以下代码，目的是将两个门图像放置在与启动图像相同的位置，然后制作动画以显示门打开。

```
{
 myImageWalk = [[UIImageView alloc] initWithFrame:CGRectMake(272,0, 286, 748)];
        myImageWalk.image = [UIImage imageNamed:@"leftdoorlandscape.png"];
        [window addSubview:myImageWalk];
        [window bringSubviewToFront:myImageWalk];
        myImageWalk2 = [[UIImageView alloc] initWithFrame:CGRectMake(512,0, 286, 748)];
        myImageWalk2.image = [UIImage imageNamed:@"rightdoorlandscape.png"];
        [window addSubview:myImageWalk2];
        [window bringSubviewToFront:myImageWalk2];
        [self doAnimate:CGRectMake(-286, 20, self.myImageWalk.frame.size.width, self.myImageWalk.frame.size.height)];
        [self doAnimate1:CGRectMake(748, 20, self.myImageWalk2.frame.size.width, self.myImageWalk2.frame.size.height)];
} 
```

唯一的问题是结果是：

![在此处输入图像描述](../Images/13670e6fea54e88fd61825c802997cc0.png)

为什么图像是直上直下的，它会在侧面显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:25:22.660

您需要将其添加到应用程序的 rootViewController 上，而不是添加到不会处理自动旋转的窗口上。那也应该自动处理方向。

# apache - Apache 在 Ubuntu 12.04 VM 中闲置

> ID：13613583
> 
> 赞同：3
> 
> 时间：2012-11-28T20:11:18.830
> 
> 标签：apache, ubuntu, virtual-machine, virtualbox

我有一台在 VirtualBox 上的虚拟机中运行 Ubuntu Server 12.04 的 Mac Mini，我正在进行基本的 LAMP 设置。虚拟机设置为桥接，因此拥有自己的 IP，如果虚拟机处于活动状态，我可以使用我的域名从外部解析我的站点。我将 DNS 记录设置为指向我的外部 IP，并且我的路由器配置为 VM IP 上的端口 80。当虚拟机“空闲”，屏幕变黑并且按键将其唤醒时，就会出现问题。当它空闲时，我的域不再解析到我的虚拟机（我被重定向到我的 DNS 主机），但通过它的内部 IP 访问虚拟机工作正常，并且似乎“唤醒”了虚拟机。

我不确定发生了什么，要么虚拟机网卡关闭并根据内部请求唤醒，Ubuntu 正在“空闲”，我的域等待响应的时间不够长，或者 Apache2 配置不正确。KeepAlive 变量在 apache2.conf 中设置为 ON。

任何有关这方面的帮助都会很棒。

# java - 如何将 ' 和 %27 转换为单引号

> ID：13613591
> 
> 赞同：2
> 
> 时间：2012-11-28T20:11:57.810
> 
> 标签：java

例如，我被刺痛了`&apos; Hello Sir &#39; Hi sir %27 r u der sir`

我需要更改`&apos;`和`&#39;`单`%27`引号。

并能够`&#39;`使用转换`StringEscapeUtils.unescapeHtml(Str)`

是否有任何功能可以`&#39;`代替`%27`直接字符串替换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T20:24:49.713

`&#39;`并且`&apos;`是 XML 字符实体。您可以使用[StringEscapeUtils.escapeXml](http://commons.apache.org/lang/api/org/apache/commons/lang3/StringEscapeUtils.html#unescapeXml%28java.lang.String%29)转义它们。

`%27`是一个 URL 编码的字符。您可以使用[URLDecoder.decode](http://commons.apache.org/lang/api/org/apache/commons/lang3/StringEscapeUtils.html#unescapeXml%28java.lang.String%29)对其进行转义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T20:37:31.590

*   因为`%27`你可以使用`URLDecoder.decode(str)`
*   `&#39;`你`&apos;`可以使用`StringEscapeUtils.unescapeXml(str)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T20:25:09.833

使用正则表达式应该没问题。

未经测试：（Edit2：测试过，有效！）

```
String str = "&apos; Hello Sir &#39; Hi sir %27 r u der sir";

Pattern p = Pattern.compile("(&apos;)|(&#39;)|(%27)");
Matcher m = p.matcher(str);
str = m.replaceAll("'"); 
```

编辑：

需求

```
import java.util.regex.Matcher;
import java.util.regex.Pattern; 
```

# python - 如何在python中的xml.minidom中没有任何子节点的xml节点上设置文本？

> ID：13613592
> 
> 赞同：4
> 
> 时间：2012-11-28T20:12:06.417
> 
> 标签：python, xml

昨天我问如何使用 minidom [将节点上的文本替换为子节点。](https://stackoverflow.com/questions/13588072/python-minidom-xml-how-to-set-node-text-with-minidom-api)

今天我也试图`<node/>`用 `<node>text</node>`

不幸的是，我觉得我的结果是一个可怕的黑客：

```
import xml.dom.minidom
from   xml.dom.minidom import Node

def makenode(text):
    n = xml.dom.minidom.parseString(text)
    return n.childNodes[0]

def setText(node, newText):
    if node.firstChild==None:
        str =  node.toxml();
        n = len(str)
        str = str[0:n-2]+'>'+newText+'</'+node.nodeName+'>'   #DISGUSTINGHACK!
        node.parentNode.replaceChild(  makenode(str),node )
        return
    if node.firstChild.nodeType != node.TEXT_NODE:
        raise Exception("setText: node "+node.toxml()+" does not contain text")
    node.firstChild.replaceWholeText(newText)

def test():
    olddoc = '<test><test2/></test>'
    doc=xml.dom.minidom.parseString(olddoc)
    node = doc.firstChild.firstChild  # <test2/>
    print "before:",olddoc
    setText(node,"textinsidetest2")
    newdoc =  doc.firstChild.toxml()
    print "after: ", newdoc

 #  desired result:
 # newdoc='<test><test2>textinsidetest2</test2></test>'

test() 
```

虽然上面的代码有效，但我觉得这是一个巨大的 hack。我一直在研究 xml.minidom 文档，但我不确定如何处理上述情况，尤其是没有`#DISGUSTINGHACK!`上面标记的 hack。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T21:19:08.640

您需要使用 创建一个 Text 节点，然后使用或类似方法[`Document.createTextNode()`](http://docs.python.org/library/xml.dom.html#xml.dom.Document.createTextNode)将其添加到所需的父节点：[`Node.appendChild()`](http://docs.python.org/library/xml.dom.html#xml.dom.Node.appendChild)

```
def setText(doc, node, newText):
    textnode = doc.createTextNode(newText)
    node.appendChild(textnode) 
```

`doc`为了便于使用，我在这里添加了一个参数，调用它：

```
setText(doc, node, "textinsidetest2") 
```

您的`makenode`功能可以完全删除。通过这些修改，您的`test()`函数将打印：

```
before: <test><test2/></test>
after:  <test><test2>textinsidetest2</test2></test> 
```

# php - 覆盖类常量与属性

> ID：13613594
> 
> 赞同：111
> 
> 时间：2012-11-28T20:12:16.663
> 
> 标签：php, oop, inheritance, overriding, constants

我想更好地理解为什么在下面的场景中，类常量的继承方式与实例变量的方式有所不同。

```
<?php
class ParentClass {
    const TEST = "ONE";
    protected $test = "ONE";

    public function showTest(){
        echo self::TEST;
        echo $this->test;
    }
}

class ChildClass extends ParentClass {
    const TEST = "TWO";
    protected $test = "TWO";

    public function myTest(){
        echo self::TEST;
        echo $this->test;
    }
}

$child = new ChildClass();
$child->myTest();
$child->showTest(); 
```

输出：

```
TWO
TWO
ONE
TWO 
```

在上面的代码中，ChildClass 没有 showTest() 方法，所以继承使用了 ParentClass 的 showTest() 方法。结果表明，由于该方法是在 ParentClass 上执行的，因此正在评估 TEST 常量的 ParentClass 版本，而因为它是通过继承在 ChildClass 上下文中评估的，所以正在评估 ChildClass 成员变量 $test。

我已经阅读了文档，但似乎没有看到任何关于这种细微差别的提及。任何人都可以为我解释一下吗？

* * *

## 回答 #1

> 赞同：221
> 
> 时间：2012-11-28T20:22:32.483

`self::`不是继承感知的，并且总是引用它正在执行的类。如果您使用的是 php5.3+，您可以尝试`static::TEST`继承`static::`感知。

不同之处在于`static::`使用“后期静态绑定”。在此处查找更多信息：

[http://php.net/manual/en/language.oop5.late-static-bindings.php](http://php.net/manual/en/language.oop5.late-static-bindings.php)

这是我写的一个简单的测试脚本：

```
<?php

class One
{
    const TEST = "test1";

    function test() { echo static::TEST; }
}
class Two extends One
{
    const TEST = "test2";
}

$c = new Two();

$c->test(); 
```

**输出**

```
test2 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-28T20:19:54.073

在 PHP 中，self 指的是定义了被调用方法或属性的类。因此，在您的情况下，您正在调用`self`in `ChildClass`，因此它使用该类中的变量。然后您使用`self`in `ParentClass`，因此它将引用该类中的变量。

如果您仍然希望子类覆盖`const`父类的，则将父类中的以下代码调整为：

```
public function showTest(){
    echo static::TEST;
    echo $this->test;
} 
```

注意`static`关键字。这是使用“后期静态绑定”。现在你的父类将调用你的子类的 const 。

# android - Android——确定充电电压

> ID：13613595
> 
> 赞同：1
> 
> 时间：2012-11-28T20:12:17.693
> 
> 标签：android, usb

我想找出我的 Android 设备的充电电压值。Android中有没有办法以某种方式以编程方式获得这个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-02T16:20:46.067

USB 电压规格标称为 5 伏。如果您手动监控电压，则设备可用的电流可能会从 5.5 伏到 4.5 伏不等，具体取决于充电器和电缆线的直径和长度。

我假设内部充电控制芯片组会监视可用电压和线路上的电阻，以限制它可以从线路中拉出的可能电流。

据我所知，这个信息在android源码中是不存在的。

# ruby-on-rails - 无论如何在omniauth builder中使用可变密钥和秘密？

> ID：13613602
> 
> 赞同：3
> 
> 时间：2012-11-28T20:13:05.940
> 
> 标签：ruby-on-rails, omniauth

我有一个多租户应用程序，每个租户（即帐户持有人）都希望通过 oauth 配置他/她自己的 api 集成。我想使用omniauth，但似乎消费者密钥和秘密需要在初始化期间传递到构建器模块中。

有没有办法设置omniauth，以便我的租户可以提交他们的密钥、秘密和uri——而无需重新启动和初始化rails？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T22:07:32.740

在这里您可以直接访问omniauth gem wiki：

[https://github.com/intridea/omniauth/wiki/Dynamic-Providers](https://github.com/intridea/omniauth/wiki/Dynamic-Providers)

[https://github.com/intridea/omniauth/wiki/Setup-Phase](https://github.com/intridea/omniauth/wiki/Setup-Phase)

但是，如果您正在寻找一个很好的例子，只需看看这个：

[当每个请求的应用程序 ID 和应用程序密码不同时使用omniauth-facebook？](https://stackoverflow.com/questions/13524919/use-omniauth-facebook-when-app-id-and-app-secret-are-different-for-each-request/13528277#13528277)

问候

伊万

# javascript - 如何使用通过 Flex URLRequest 发送的 POST 数据中的 javascript 在 HTML 页面上显示文件？

> ID：13613603
> 
> 赞同：3
> 
> 时间：2012-11-28T20:13:36.577
> 
> 标签：javascript, actionscript-3, apache-flex, post

我正在尝试向我的 Flex 应用程序添加“文件预览”功能。我在 Flex 中有一个 LinkBut​​ton，当单击它时，应该在新的浏览器窗口中打开文件。我找到了一个有用的 actionscript 类，它可以正确格式化 POST 数据以将文件传递到 HTML 页面。文件 POST 数据放入一个 URLRequest 中，通过 URLLoader 发送到 HTML 页面。

我的问题是我对 Javascript 不是很有经验，而且我不知道如何告诉 HTML 页面显示 Flex 应用程序正在发送的文件。经过无数次的网络搜索，我决定在这里问。我不是要求任何人为我编写代码，我只需要一个好的起点（关键字、要阅读的 javascript 函数等）。

我想结合使用 HTML 和 Javascript 来获取 POST 数据并在浏览器中打开包含的文件。

其他重要信息：该文件需要在 IE8 中显示，并且显示的文件主要是图像文件、PDF 或 Word 文档。

编辑：这是我忘记提及的一些信息。我要显示的文件存储在数据库中。我从那里获取文件并将其作为 ByteArray 存储在自定义类中。然后我将 ByteArray 传递给我的助手类，该类格式化 POST 数据请求并将结果存储在 URLRequest.data 中。

这是我的请求的样子：

```
--lljcuqjclcnyicgrmwexayhafmkhiwfx

Content-Disposition: form-data; name="Filename"

arrows.png

--lljcuqjclcnyicgrmwexayhafmkhiwfx

Content-Disposition: form-data; name="Filedata"; filename="arrows.png"

Content-Type: image/png

?PNG

"image information as ByteArray"

--lljcuqjclcnyicgrmwexayhafmkhiwfx

Content-Disposition: form-data; name="Upload"

Submit Query

--lljcuqjclcnyicgrmwexayhafmkhiwfx-- 
```

所以我正在寻找一种方法（理想情况下使用 Javascript 和 HTML）来处理该请求并让浏览器显示文件（或者如果用户没有合适的插件来显示，则显示打开/保存对话框）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T07:09:39.400

第一个简单案例要显示图像或 pdf（需要插件）

```
navigateToUrl(new URLRequest("http://localhost/images/hello.png")); 
```

如果您想要将数据传递给 html 页面，您需要考虑以下代码

```
var req:URLRequest = new URLRequest("http://www.localhost/openfile.html");
req.data = "path='http://localhost/images/hello.png'";
req.method = URLRequestMethod.GET;
navigateToURL(req); 
```

之后，您需要[通过 Javascript 从 javascript GET 参数值](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)中获取路径值，然后您可以解析 GET 参数，然后您可以使用 DOM 元素。

我认为我们无法仅从 JavaScript 获取 POST 值，我们需要使用服务器脚本。[带有 jquery 的后变量](https://stackoverflow.com/questions/439463/how-to-get-get-and-post-variables-with-jquery)。

在浏览器中打开 MS Words 将有助于[查看/打开 Word 文档](https://stackoverflow.com/questions/4346117/how-can-i-view-open-a-word-document-in-my-browser-using-with-php-or-html)。我不确定 Word Docs。

# android - 带有 DexClassLoader() 和用户界面的插件系统

> ID：13613605
> 
> 赞同：8
> 
> 时间：2012-11-28T20:13:42.270
> 
> 标签：android, dexclassloader

对于一个长期的学生项目，我正在尝试使用插件开发一个模块化应用程序。具体来说，我们将有：

*   一个主应用程序，我们可以在其中搜索、更新、删除和运行插件。该主应用程序还将存储来自插件的一些数据。

*   从 HTTP 服务器下载的几个带有代码和 GUI 组件的插件。

现在，我有一个主应用程序，它能够从 HTTP 下载一个 .apk 文件，并从这个 .apk 文件中定义的类创建一个新实例。我使用这里描述的方式：[http](http://android-developers.blogspot.fr/2011/07/custom-class-loading-in-dalvik.html) ://android-developers.blogspot.fr/2011/07/custom-class-loading-in-dalvik.html和 DexClassLoader() 方法。

但我无法看到如何显示作为资源存储在插件 .apk 文件中的布局（或任何其他 GUI 组件）。例如，我尝试使用插件类名从主应用程序创建一个 Intent，但没有成功：

```
DexClassLoader cl = new DexClassLoader(...);
Class<?> libClass = cl.loadClass("plugin_classname");
Intent intent = new Intent(this.getApplicationContext(), libClass);
startActivity(intent); 
```

这不起作用，因为 Intent 没有在主应用程序的 AndroidManifest.xml 中声明。这也在另一个线程中进行了描述：[Android- Using DexClassLoader to load apk file](https://stackoverflow.com/questions/2903260/android-using-dexclassloader-to-load-apk-file)

这是否意味着绝对没有办法构建这样一个“动态”的用户界面？更一般地说，这种类型的插件系统可以在Android上完成吗？我应该尝试其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T10:25:08.940

**我曾经尝试过同样的事情，但发现这是不可能的。**如果从那以后（2011年1月）基本机制没有改变，那仍然是不可能的。技术细节在我的博客中用日语和英语进行了描述。

博客：**动态添加AndroidManifest.xml中未声明的Activity（不可能）**
[http://darutk-oboegaki.blogspot.jp/2011/01/androidmanifestxml-activity.html](http://darutk-oboegaki.blogspot.jp/2011/01/androidmanifestxml-activity.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-07T14:56:11.930

看到这个答案。它是关于如何在运行时动态运行Android的'Activity'，'Service'，它们没有在AndroidManifest.xml中声明：[https ://stackoverflow.com/a/41112682/2801776](https://stackoverflow.com/a/41112682/2801776)

# android - Android pre onPause 通知

> ID：13613617
> 
> 赞同：0
> 
> 时间：2012-11-28T20:14:28.577
> 
> 标签：android, cocos2d-x, 2d-games

我正在使用 cocos2dx 将现有游戏从 ios 移植到 android。当应用程序暂停时，例如通过单击设备上的“锁定”按钮，应用程序正在暂停/休眠。但是当设备被重新激活并且我的应用程序再次出现时，它会冻结几秒钟。我想做的是显示一条游戏模式消息，告诉用户他/她应该等待一秒钟，直到游戏从冻结模式返回。但我可以简单地完成这项工作。

我试图在“onPause”和“onResume”上显示消息，但在冻结模式结束之前不会显示消息，我希望在应用程序重新出现时显示它。

我怎样才能使这项工作？

在 Ios 上，可以在应用程序进入后台之前收到通知。“applicationWillResignActive”我在 android 上找不到类似的东西。Android上是否存在诸如“pre-onPause”之类的通知/委托功能？

任何想法表示赞赏。

最好的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:19:39.603

您可以创建一个 BroadcastReceiver 来侦听 SSCREEN_OFF 意图并在发生这种情况时显示您的对话框，这样当屏幕重新打开时它仍然存在。

```
public class ScreenReceiver extends BroadcastReceiver {
    /**
     * @see android.content.BroadcastReceiver#onReceive(Context,Intent)
     */
    @Override
    public void onReceive(final Context context, Intent intent) {

        if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
            //Put your Dialog showing code here
        }
    }
} 
```

然后在您的活动中，您可以像这样实例化和注册您的接收器：

```
IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_OFF);
BroadcastReceiver mReceiver = new ScreenReceiver();
registerReceiver(mReceiver, filter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T06:53:58.327

在 cocos2d-x 项目中 AppDelegate 类内部有函数 applicationDidEnterBackground() ，它的停止动画就是冻结的全部内容，然后 AppDelegate::applicationWillEnterForeground() 是动画再次开始的函数，当您的应用重新出现时需要时间

所以在 applicationDidEnterBackground() 中放置对话框或说暂停屏幕，然后按照你想要的方式做

我可以使用另一种方式，但它需要 JNI 调用我所做的是我已经从 android 到 cocos2d-x 进行了 JNI 调用 .. 因为我需要所有东西 BroadcastReceiver ， Battery Indicator 等......

所以每当这些事情发生时，我都会从我的 onPause 方法中调用 JNI，然后在 cocos2d-x 中调用 pauseScene

# php - 如何避免作曲家丢弃更改消息

> ID：13613619
> 
> 赞同：31
> 
> 时间：2012-11-28T20:14:34.277
> 
> 标签：php, symfony-2.1, composer-php

我正在通过作曲家更新 symfony verdors。我总是使用：

```
php composer.phar update 
```

但是最近版本的作曲家，在更新每个包之前显示如下消息：

```
 - Updating doctrine/data-fixtures dev-master (a95d783 => a28b6bd)
The package has modified files:
M .gitignore
M .gitmodules
M LICENSE
M README.md
M UPGRADE
M composer.json
M lib/Doctrine/Common/DataFixtures/AbstractFixture.php
M lib/Doctrine/Common/DataFixtures/DependentFixtureInterface.php
M lib/Doctrine/Common/DataFixtures/Event/Listener/MongoDBReferenceListener.php
M lib/Doctrine/Common/DataFixtures/Event/Listener/ORMReferenceListener.php 
```

-10 多个文件修改，选择“v”查看完整列表放弃更改 [y,n,v,s,?]？

如何避免这种情况？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-09-15T12:04:56.590

设置 composer config 以丢弃更改（请参阅：[https://github.com/composer/composer/pull/1188](https://github.com/composer/composer/pull/1188)）：

```
php composer.phar config --global discard-changes true 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-07-07T08:57:23.730

@lemats 和 @reza-sanaie 的答案都不完整，因为 --no-interaction (-n) 作曲家的选项需要在没有任何问题的情况下进行真正的更新（参见[https://github.com/composer/composer/pull/1188 #issuecomment-16011533](https://github.com/composer/composer/pull/1188#issuecomment-16011533)）。

所以之后

```
php composer.phar config --global discard-changes true 
```

或修改 composer.json 后

```
"config": {
    "discard-changes": true
}, 
```

采用

```
php composer.phar update -n 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-11-26T22:46:50.397

除了@lemats 解决方案，您可以修改 composer.json 文件：

```
 "config": {
      "discard-changes": true
  }, 
```

启动此选项毫无价值，您必须在`--no-interaction`模式下运行

`php composer.json install --no-interaction`

尽管我同意@Seldaek 关于您不应该修改这些供应商文件的观点，但有时您不得不对其进行修补:(

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-11-29T10:09:21.633

不修改供应商文件怎么样？如果它们被修改很可能是因为行尾的一些混乱的 git 设置。见[https://help.github.com/articles/dealing-with-line-endings](https://help.github.com/articles/dealing-with-line-endings)

# c# - 基于鉴别器列和 id 的实体框架 DbContext 映射属性

> ID：13613623
> 
> 赞同：2
> 
> 时间：2012-11-28T20:14:46.890
> 
> 标签：c#, entity-framework, entity-framework-5, dbcontext

*背景*
我正在开发一个系统，该系统采用插件架构设计以允许多个数据存储（SQL Server、Firebird、MySQL）。

这个插件架构相当复杂，似乎是从头开始编写 ADO.NET 的尝试。随着时间的推移，使用 SQL Server 以外的数据库的“插件”功能已被删除。我正在考虑将这个项目的数据访问部分从遗留框架转换为 Entity Framework 5.0 DbContext。***我试图不修改数据库以避免现有客户的数据转换。***

我有使用 Fluent NHibernate 的经验，我正在尝试找出使用 EF DbContext 的 Fluent API 来解决我当前项目目标的最佳方法。我知道 Fluent API 通常用于 Code-First 开发，但出于维护原因，我想在这种情况下使用它。

*问题*
我有很多表，其中包含一个`ParentTable`和`ParentId`列。ParentTable 是一个`short`并且 ParentId 是一个`int`（不确定是否重要）。

我有一个抽象的基础对象，它当前只有一个 Int32 属性`Id`。

我想做的是定义一个要映射到`ParentTable`属性的枚举，并让这些具有父对象的对象基于`ParentTable`枚举鉴别器返回一个基本对象的实例。在 EF DbContext 中执行此操作的最佳方法是什么？如果我需要调用某种扩展方法或存储库方法`GetParent`，我可以接受，但如果可能的话，我宁愿让 EF 的映射自动完成。

这是一个示例（不，我还没有为表关联创建枚举）：

```
public class Person : BaseObject, IHasParentProperties
{
    // ... removed other properties
    public short ParentTable { get; internal set; }
    public int ParentId { get; internal set; }

    [NotMapped]
    public BaseObject Parent { get; set; }
} 
```

假设`ParentTable`在`Person`对象中是一个映射到 和 的未来枚举值的short `TableMapping.Client`，`ParentId`是否`333`可以将映射配置为基于表鉴别器*和*id`Parent`作为对象加载？总是只有一个父对象，但父对象可以是十个不同对象中的任何一个。`Client`

 *在 Fluent NHibernate 中，如果我没记错的话，我已经通过引用鉴别器的一些变体完成了同样的任务（取自[这里](https://github.com/jagregory/fluent-nhibernate/wiki/Fluent-mapping)）：

```
ReferencesAny(x => x.Author)
  .EntityTypeColumn("Type")
  .EntityIdentifierColumn("Id")
  .IdentityType<int>(); 
```

已经有一段时间了，但我记得这种体验与我目前使用 EF 的体验相当。

我很想规范化数据库并从头开始重写大部分内容，但我正在努力使一切尽可能简单。

谢谢。*

# asp.net-mvc - Razor v2 中的条件属性

> ID：13613624
> 
> 赞同：3
> 
> 时间：2012-11-28T20:14:48.937
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, razor-2

我正在尝试让 Razor 2 中的条件属性支持工作，但对于我的生活来说，它的行为并不像预期的那样。

我的 HTML 输出看起来像这样......

```
<label class="radio inline"><input checked="true" id="ActivationType" name="ActivationType" type="radio" value="0">Option 0</label>
<label class="radio inline"><input checked="false" id="ActivationType" name="ActivationType" type="radio" value="1">Option 1</label> 
```

现在这个 HTML 的问题是，即使我想要检查选项 0，选项 1 也是实际检查的内容。现在这个 HTML 是由 MVC 中的以下代码输出的，ans 位于 DisplayTemplate 中。

```
<label class="radio inline">@Html.RadioButtonFor(x => x, "0", new{@checked = Model.HasValue && (int)Model.Value == 0})Option 0</label>
<label class="radio inline">@Html.RadioButtonFor(x => x, "1", new{@checked = Model.HasValue && (int)Model.Value == 1})Option 1</label> 
```

问题在于，仅存在 checked 属性就足以让浏览器将其视为已检查，而不管它的实际值如何。因此，Razor 2 中的一个特性（据称）是，如果属性的值为 null、空字符串或 false，则该属性本身不会被渲染。我期待看到的是这个……

```
<label class="radio inline"><input checked="true" id="ActivationType" name="ActivationType" type="radio" value="0">Option 0</label>
<label class="radio inline"><input id="ActivationType" name="ActivationType" type="radio" value="1">Option 1</label> 
```

现在我在 StackOverflow 上注意到了很多与此相关的问题，所以我显然不是唯一一个在这个问题上苦苦挣扎的人。问题是没有一个问题似乎有一个可靠的答案。我什至在我的 webconfig 中添加了一个程序集重定向，以确保它使用正确版本的 Razor，因为我确实将此应用程序从 MVC3 迁移到 MVC4

```
<dependentAssembly>
  <assemblyIdentity name="System.Web.Razor" publicKeyToken="31bf3856ad364e35" culture="neutral" />
  <bindingRedirect oldVersion="0.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
</dependentAssembly> 
```

有没有人有过这样的运气？

**更新：**我实际上是在尝试获取一组单选按钮，这些单选按钮可以让我以编程方式确定是否检查它们，而无需定义一个代码块，在其中我为每个复选框创建一个新字典以避免呈现没有价值的属性。

这是 MVC 中的一个问题，如此处所述（[MVC3 EditorTemplate for a nullable boolean using RadioButtons](https://stackoverflow.com/questions/6752013/mvc3-editortemplate-for-a-nullable-boolean-using-radiobuttons)）但我希望摆脱这种解决方法，因为它据称已在 Razor2/MVC4 中修复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T02:44:57.407

从 MVC 4 开始，我还发现条件属性在 html 辅助方法中不起作用。如果您将条件属性直接放在 html 标记中，例如

```
<input checked="@(Model.HasValue && (int)Model.Value == 0)" id="ActivationType" name="ActivationType" type="radio" ... 
```

你应该会发现它会起作用。我在传递 disabled 属性时遇到了类似的问题。希望有帮助。

# python - VersionOne 中的资产历史记录

> ID：13613626
> 
> 赞同：0
> 
> 时间：2012-11-28T20:15:02.467
> 
> 标签：python, versionone

我正在使用 VersionOne Python SDK，并且想知道故事何时移入某个项目（范围）。我可以检索故事，但如何获取历史？

```
v1 = V1Meta()
for story in v1.Story.where(Number="S-01211"):
    print story.Scope.Name   # prints current value

# but how to retrieve historical values? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:15:02.467

如果您想查看过去的特定点，请使用“asof”修饰符。您必须在查询“选择”中包含范围名称才能获取历史值。

```
v1 = V1Meta()

past_date = '2012-11-01'

query = (v1.Story
           .where(Number="S-01211")
           .asof('2012-11-01')
           .select('Number', 'Name', 'Owners.Name', 'Scope.Name')
        )

for story in query:
    print story.data['Scope.Name']   # prints current value 
```

# sql - SQL Select语句面试查询

> ID：13613628
> 
> 赞同：2
> 
> 时间：2012-11-28T20:15:04.620
> 
> 标签：sql

今天在接受采访时，我被以下问题击中：

> 给定两个表 A 和 B，其中 A 和 B 各有 10 行，以下 SQL 语句将返回多少行？： `Select * from A, B;`

我的回答很明显：20。然而，我的面试官告诉我据说是100，尽管他说他自己没有买。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T20:17:07.933

`A`该查询返回表和的笛卡尔积`B`。表 A 中的每一行都将与表 B 中的每一行匹配。10 行 * 10 行 = 100 行。

您可能将其解释为 a `UNION`，其中表 B 中的所有行都**附加到表 A 中的行的底部**。该查询如下所示：

```
SELECT * FROM A
UNION
SELECT * FROM B 
```

请注意，这仅在`A`和的结构`B`相同时才有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T20:17:14.670

那是笛卡尔JOIN。A 中的所有行都将连接到 B 中的每一行，从而在输出中产生 100 行：

```
A1, B1
A1, B2
A1, B3
. . .
A2, B1
A2, B2
A2, B3,
. . .
A10, B8
A10, B9
A10, B10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T20:17:29.877

如果您选择两个表而不应用任何联接，则数据库将自动将笛卡尔积视为默认联接。因此您将有 100 行作为结果集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T20:17:57.223

这相当于在 T-SQL 中使用 CROSS JOIN，因此您将获得笛卡尔积，因为您没有用于关联表的 ON 子句，也没有用于过滤结果的 WHERE 子句。请参阅[http://msdn.microsoft.com/en-us/library/ms190690(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms190690%28v=sql.105%29.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T20:18:11.330

当您不使用任何连接条件时，SQL 将执行**笛卡尔积**，并且您的第一个表的每一行都映射到您的第二个表的每一行。

您将获得以下记录：

```
 table1row1   table2row1 
  table1row1   table2row2 
  table1row1   table2row3 
  ........
  ........
  table1row2   table2row1
  .....
  and so on 
  ..... 
```

      表 1 行 10 表 2 行 10

**因此，您将获得 100 条记录。**

# java - Cassandra 增量计数器有 1 次更新？

> ID：13613632
> 
> 赞同：0
> 
> 时间：2012-11-28T20:15:25.550
> 
> 标签：java, batch-processing, increment

当我用该行中的几个计数器列更新一行时，我需要这样做：

```
mutator.incrementCounter(rowid1, "cf1", "counter1", value);
mutator.incrementCounter(rowid1, "cf1", "counter2", value);
mutator.incrementCounter(rowid1, "cf1", "counter3", value); 
```

我如何在 1 次更新中完成以上所有 3 项？因为我不想击中数据库 3 次。我只想访问数据库 1 次。另外，我使用incrementCounter的原因是为了具有强一致性（incrementCounter比addCounter更一致）。你能提供一些代码吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:14:26.640

我问你到目前为止做了什么研究，因为在我看来你没有做任何研究。我通常会在这一点上走开，但出于某种原因，我还是选择回答。

* * *

让我们查一下[`Mutator`文档](http://www.jarvana.com/jarvana/view/me/prettyprint/hector-core/0.8.0-2/hector-core-0.8.0-2-javadoc.jar!/me/prettyprint/hector/api/mutation/Mutator.html)。它开始于：

> Mutator 从集群中插入或删除值。使用 mutator 主要有两种方法： 1\. 使用 insert/delete 方法立即插入删除值。或 2\. 使用 addInsertion/addDeletion 方法安排批处理操作，然后批量执行（）所有这些操作。该类不是线程安全的。

类摘要说`Mutator`支持在单个批处理中执行多个操作，并为您指出了执行此操作的`add*`方法。（你用“batch”标记你的问题，所以你知道这是你需要的功能。）类摘要下的第一件事是`addCounter()`函数，描述为：

> 计划通过 Mutator.execute() 以批处理模式插入 CounterColumn 的增量

问题解决了。

或者，您可以使用您的 IDE 来探索您当前的代码，该代码有效但效率低下。调用中可用的单行摘要`incrementCounter()`说这是一种方便的方法，强烈建议还有其他方法可以增加计数器。`Mutator`即使只使用自动完成功能也可以快速浏览界面`addCounter()`，因为只有少数与计数器相关的功能，并且`addCounter()`按字母顺序排在第一位。

如果您更愿意完全忽略文档，第三种选择是直接[进入`incrementCounter()`实现](https://github.com/hector-client/hector/blob/master/core/src/main/java/me/prettyprint/cassandra/model/MutatorImpl.java#L289)。`incrementCounter()`很快就显露出来，`addCounter()`紧随其后`execute()`。

这些方法中的任何一种都可以让您得出结论，您可以通过多次调用`addCounter()`后跟单个`execute()`.

* * *

当然，第四个选项是直接来到 Stack Overflow 并索要代码。这通常会将您发送到[whathaveyoutried.com](http://whathaveyoutried.com/)，并且只是偶尔会为您提供答案，例如这个详细解释您可以回答自己问题的所有方式的答案。我现在将用那篇文章的一个片段来结束我的回复：

> 问题在于这个人解决问题的技巧是寻求解决方案。不是寻求关于如何处理任务的建议，或者询问可能要研究的类的名称，或者一个示例的链接——而只是询问代码，完全形成并准备好使用。这不是解决问题，软件工程完全是解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T05:50:56.220

如果您只想访问一次数据库，请尝试此操作

```
mutator.addCounter(rowid1, "cf1", HFactory.createCounterColumn("counter1", value))
mutator.addCounter(rowid1, "cf1", HFactory.createCounterColumn("counter2", value))
mutator.addCounter(rowid1, "cf1", HFactory.createCounterColumn("counter3", value))
query.execute() 
```

# android - 将视频从 android 流式传输到桌面

> ID：13613635
> 
> 赞同：4
> 
> 时间：2012-11-28T20:15:52.173
> 
> 标签：android, iphone, python, ios, streaming

我正在做一些声音和图像处理，为了更快的原型设计，我正在使用 python 和 opencv。到目前为止，我一直在手机上录制一些视频（不能使用网络摄像头 - 需要检查手机中的特定摄像头），上传到桌面，然后离线处理文件。

虽然它变得有点乏味，但我想知道是否有任何方法可以在 python 中进行实时流视频和处理这些视频帧？我注意到有这样的应用程序：[DroidCam](https://play.google.com/store/apps/details?id=com.dev47apps.droidcam&hl=pl)，但没有适用于 MacOS 的应用程序，而且似乎只能通过 WiFI 工作。我还检查了[android 脚本](http://code.google.com/p/android-scripting/)，但只有一种方法可以记录到文件中。

因为在我的情况下，低延迟很重要，通过 USB 流式传输将是一个优势。我注意到 adb 允许端口转发，所以看起来有一种方法可以不用特定的 android /python USB api 而只使用套接字。

是否已经存在任何工具，或者最简单的方法是使用套接字和 adb 转发自己编写一些东西？

对于 iOS，类似的东西也会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T02:15:52.033

尝试设置一个UDP服务器，这里是发送图像的代码，

```
UDPSock = socket(AF_INET,SOCK_DGRAM)

  while 1:
    image = camProxy.getImageLocal(nameId)
    size = (image[0], image[1])
    data = image[6]
    im = Image.fromstring("YCbCr", size, data)
    s = StringIO.StringIO()
    im.save(s, "JPEG")

    UDPSock.sendto(s.getvalue(), addr)

    camProxy.releaseImage(nameId)

  UDPSock.close() 
```

接收流的代码：

```
 UDPSock = socket(AF_INET,SOCK_DGRAM)
  UDPSock.bind(addr)

  while 1:
    data, addr = UDPSock.recvfrom(buf)
    # here add code to process image and receive image

  UDPSock.close() 
```

查看：

*   [http://pymedia.org/tut/src/make_video.py.html](http://pymedia.org/tut/src/make_video.py.html) -视频流
*   [http://code.google.com/p/mjpeg-stream-client/](http://code.google.com/p/mjpeg-stream-client/)
*   [http://bitbucket.org/haypo/hachoir/wiki/hachoir-parser](http://bitbucket.org/haypo/hachoir/wiki/hachoir-parser) - 编辑二进制流
*   也试试，[http://code.google.com/p/pyffmpeg/](http://code.google.com/p/pyffmpeg/)

# c# - MVC 4 多模型绑定

> ID：13613638
> 
> 赞同：1
> 
> 时间：2012-11-28T20:16:04.730
> 
> 标签：c#, asp.net-mvc

我正在开发一个 MVC 4 网站。

在我的站点中，我在部分视图中有一个登录表单，我在 _layout.cshtml 中呈现它，它使用`LoginModel`.

我也有一个联系表，它使用`ContactModel`

当我收到联系表格并提交时，一切都很好。它去了服务器端。执行后我返回一个视图并将其绑定到`ContactModel`

这很简单：

```
[HttpPost]
public ActionResult Contact(Contact model)
{
    if (ModelState.IsValid)
    {
        //somecode here
    }

    return View(model);
} 
```

它变得越来越复杂，MVC 尝试绑定`ContactModel`到登录页面并给出以下错误

> 传入字典的模型项的类型为“My_Project.Model.ContactModel”，但此字典需要“My_Project.Models.LoginModel”类型的模型项。

我的联系表格视图：

```
 @model My_Project.Model.ContactModel
@{
    ViewBag.Title = "Contact";
}

        @using (Html.BeginForm("Contact", "Home", FormMethod.Post, new { id = "formContact" }))
        {
            @Html.ValidationSummary(true)
            @Html.TextBoxFor(model => model.Name, new {@class = "c2inp1", @placeholder = "Name"})
            @Html.ValidationMessageFor(model => model.Name)
            <br/>
            @Html.TextBoxFor(model => model.Surname, new {@class = "c2inp2", @placeholder = "Surname"})
            @Html.ValidationMessageFor(model => model.Surname)
            <br/>
            @Html.TextBoxFor(model => model.Email, new {@class = "c2inp2", @placeholder = "Email"})
            @Html.ValidationMessageFor(model => model.Email)
            <br/>
            @Html.TextAreaFor(model => model.Message, new { @class = "c2inp3", @placeholder = "Message" })
            @Html.ValidationMessageFor(model => model.Message)
            <br/>            
            <input type="image" src="@Url.Content("~/Images/c2img4.png")" alt="" class="c2submit"/>
        }
    </div>
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

我在部分视图中的登录表单

```
 @model My_Project.Model.LoginModel

@{
    ViewBag.Title = "Log in";
}
@if (WebSecurity.IsAuthenticated)
{
    <hgroup class="title">
    <h1>@ViewBag.Title.</h1>
</hgroup>

    <section id="loginForm">
<h2>Use a local account to log in.</h2>
@using (Html.BeginForm(new { ReturnUrl = ViewBag.ReturnUrl }))
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Log in Form</legend>
        <ol>
            <li>
                @Html.LabelFor(m => m.UserName)
                @Html.TextBoxFor(m => m.UserName)
                @Html.ValidationMessageFor(m => m.UserName)
            </li>
            <li>
                @Html.LabelFor(m => m.Password)
                @Html.PasswordFor(m => m.Password)
                @Html.ValidationMessageFor(m => m.Password)
            </li>
            <li>
                @Html.CheckBoxFor(m => m.RememberMe)
                @Html.LabelFor(m => m.RememberMe, new { @class = "checkbox" })
            </li>
        </ol>
        <input type="submit" value="Log in" />
    </fieldset>

}
</section>

</section>
} 
```

在我的 _layout.cshtml 中即时呈现登录表单

```
@Html.Partial("_LoginPartial") 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:36:03.313

您需要在 _layout.cshtml 视图中指定要传递给登录视图的模型...

例子：

```
@Html.Partial("_yourloginview", new LoginModel()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:25:11.207

您传递给视图的数据类型应与您在视图中声明的模型相对应。例如像这样：

```
public ActionResult SomeDerp()
{
    Derp derp = new Derp();
    return View(derp);
} 
```

然后视图应该有一个在 SomeDerp 页面顶部声明的模型，可能是这样的：

```
@model Derp 
```

对不起，如果我误解了你的问题:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-20T03:29:37.220

这样做的原因是因为在您的 _layout.cshtml 中您指定了登录模型，所以现在每个页面也需要这个模型。

# node.js - 了解 Node.js 驻留集大小与堆大小（OOM 错误）

> ID：13613641
> 
> 赞同：3
> 
> 时间：2012-11-28T20:16:12.063
> 
> 标签：node.js

我正在解决我的节点服务器中的一个问题，我收到一个导致节点应用程序崩溃的错误：

```
FATAL ERROR: JS Allocation failed - process out of memory 
```

我正在使用 nodetime 来查看内存使用情况。我想也许我正在缩小问题的范围，但我仍然很困惑。查看这个函数，它使用 Mongoose 从 MongoDB 加载缓存对象：

```
StreamCache.prototype.loadCachedStream = function(_id, callback)
{
    this.model.findOne({'_id': _id}, {'objects':1,'last_updated':1}, function(err, d){
        callback(err, d ? d.toObject() : null);
        //The toObject() seems to cause the RSS to move into heap...?
    });
}; 
```

注意注释行。昨晚11点之前，线路刚刚

```
callback(err,d); 
```

我昨晚 11 点添加了 toObject() 调用。

现在看看我的记忆图：

![在此处输入图像描述](../Images/c1a27cda904d97b87401f8d78e336703.png)

请注意，在此更改之前，RSS 增长但堆没有增长。更改后，堆和 RSS 的增长完全相同（直到应用程序崩溃）。请注意，内存不足错误（上图）在更改前后都发生了。然而，这种变化似乎使堆大小与 RSS 大小的泄漏相关，在此之前堆是平坦的（ish）。

我的假设是，由于某种原因，这意味着 toObject() 函数将泄漏的数据从 RSS 移动到堆中，因此不仅 RSS 泄漏了，堆也泄漏了。

听起来对吗？

如果是这样...任何想法可能导致问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:49:46.267

我认为堆/RSS 相关性与您遇到的内存不足问题无关。

（无论如何，两者有什么区别？一个是使用的虚拟内存总量，另一个是物理RAM中的内容，在这种情况下，这仅意味着更改引入了OS（OS）具有的数据结构决定保留在物理 RAM 中很重要，例如因为它们经常被访问）

您所说的问题原因在于 d.toJSON() 调用，为什么您认为单独的 toJSON() 不会导致内存不足错误？

如果“d”对象非常大，比如说它是大对象树的根，当它被反序列化为 JSON 字符串时会消耗所有内存怎么办？

# java - Java 相对路径文件创建中的奇怪行为

> ID：13613646
> 
> 赞同：0
> 
> 时间：2012-11-28T20:16:37.523
> 
> 标签：java, file, relative-path

我在 cwd 的文件夹中创建文件时遇到了一些问题 - 我最近从 windows 切换到 mac，看起来文件的创建方式存在一些细微的差异。

```
 String servername = "123";
    URL url = null;
    URLConnection con = null;
    int i;
    try {
            File parentFolder = new File("test2");
            System.out.println("folder.exists():"+folder.exists()); // true
            System.out.println("folder.isDirectory():"+folder.isDirectory()); // true

            url = new URL("http://"+servername+".foo.com:8080/foo.bar");
            con = url.openConnection();
            File file = new File(parentFolder, servername+"the_file.out");

            file.getParentFile().mkdirs();

            BufferedInputStream bis = new BufferedInputStream(
                            con.getInputStream());
            BufferedOutputStream bos = new BufferedOutputStream(
                            new FileOutputStream(file.getName()));
            while ((i = bis.read()) != -1) {
                    bos.write(i);
            }
            bos.flush();
            bis.close();
    } catch (MalformedInputException malformedInputException) {
            malformedInputException.printStackTrace();
    } catch (IOException ioException) {
            ioException.printStackTrace();
    } 
```

在此代码段中，我正在从某个网页下载文件并尝试将其保存在我的项目根目录中名为“test2”的文件夹中。

结果：

```
MyProject
  test2
  src
  build
  nbproject
  123the_file.out // why doesn't it go into test2? 
```

请注意，该文件可以正确下载和写入，但同样不在正确的目录中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T20:22:51.320

代替

```
new FileOutputStream(file.getName())); 
```

和

```
new FileOutputStream(file); 
```

您的`file`对象包含文件的文件夹和名称。您需要将整个文件对象传递给 FileOutputStream。您对其进行编码的方式仅传递名称字符串`123the_file.out`，因此 FileOutputStream 将其解释为相对于您的 cwd

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:28:02.433

请参阅 Javadoc[`File.getName()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#getName%28%29)

> 返回此抽象路径名表示的文件或目录的名称。这只是路径名的名称序列中的最后一个名称。如果路径名的名称序列为空，则返回空字符串。

如果将 a 传递`String`给[`FileOutputStream`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.lang.String%29)构造函数，它会尝试找出名称代表的内容，并选择`foo`在当前目录中命名的文件。如果要携带`File`对象中包含的所有信息（包括父目录`test2`），只需传递对象本身。

# .net - 表达式树中的嵌套属性

> ID：13613648
> 
> 赞同：1
> 
> 时间：2012-11-28T20:16:51.050
> 
> 标签：.net, c#-4.0, lambda, expression-trees

我想编写一个表达式来检索属性中的属性。我的 2 节课：

```
public class BusinessType
{
    public string Proprietor
    {
        get { return "Proprietor"; }
    }
}

public class VendorApplicationViewModel
{
    public List<BusinessType> BusinessClassification { get; set; }
} 
```

```
public static IHtmlString RadioListForIEnum<TModel, TProperty>(this HtmlHelper<TModel> htmlhelper, 
                                                               Expression<Func<TModel, TProperty>> expression)
{
    var prop = ModelMetadata.FromLambdaExpression(expression, htmlhelper.ViewData);
    //Func<TModel2, TProperty2> nestedProperty = 
    return null;
} 
```

我对如何实现这一目标感到迷茫。此外，我对表达式树还很陌生，任何关于教程之类的好的建议都将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T16:42:12.853

我认为您只是想在财产中获得财产。

你可以有以下。

```
 Expression<Func<VendorApplicationViewModel, string>> lambda1 = model => model.BusinessClassification[0].Proprietor; 
```

可以在代码中重新创建为

```
 ParameterExpression param = Expression.Parameter(typeof(VendorApplicationViewModel));
 Expression<Func<VendorApplicationViewModel, string>> lambda2 = Expression.Lambda<>(
      Expression.Property(
           Expression.Property(
                param,
                "BusinessClassification",
                Expression.Constant(0)
           ),
           "Proprietor"
      ),
      param
 ); 
```

# c++ - 在同一个输出文件夹中构建两个 VS2010 C++ 项目

> ID：13613654
> 
> 赞同：2
> 
> 时间：2012-11-28T20:17:14.610
> 
> 标签：c++, visual-studio-2010, build, build-process, exe

我在同一个 VS 2010 解决方案中有两个项目。他们正在重用相同的代码，我希望 VS2010 将两个项目的可执行文件构建到同一个输出文件夹中。

显然这不是微不足道的，即使[http://msdn.microsoft.com/en-us/library/ms165411.aspx](http://msdn.microsoft.com/en-us/library/ms165411.aspx)说它是。

一个构建过程会删除以前构建的一个（或者甚至不将第一个构建可执行文件复制到文件夹中），所以我只有一个来自最后构建的项目的可执行文件。

如果单独构建，则分别编译和输出各自的可执行文件。一个项目依赖于另一个项目（解决对重用 OBJ 文件的访问冲突，因为一个项目可能在另一个项目尝试构建时持有句柄太久）。

一个谜，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:04:13.750

您可以通过转到项目属性页面，然后将两个文件夹的输出目录字段更改为相同位置（绝对或相对位置）将 Visual Studio 重定向到所需的任何文件夹。这两个项目不能具有相同的名称（实际上可执行文件的名称必须与生成的其他一些辅助文件不同），否则生成一个项目将擦除另一个项目。

上面我回答了你的问题，但我相信你是从错误的角度来处理事情的。如果您有通用代码，请创建一个库项目/文件夹。将它放在某个地方并将源代码本身添加到每个项目中，以便每个项目都可以使用它，或者您可以实际生成 lib 文件本身，并带有包含 lib 文件中函数原型的头文件，然后使用头文件和每个项目中的lib文件。使用 Visual Studio 的 VC++ 目录选项卡指向 lib 文件夹和头文件。

这通常是可以避免头疼的正确方法（如果您不小心更改了一个项目中的源代码并影响了另一个项目。使用 lib 文件，您将被迫做出更深思熟虑的更改）。

另一个好处是你不必每次都重新编译它，即使你清理它（如果你清理并使用源代码，你总是会重新编译）。

# r - 日期格式的冒号，介于秒和毫秒之间。如何在 R 中解析？

> ID：13613655
> 
> 赞同：9
> 
> 时间：2012-11-28T20:17:17.723
> 
> 标签：r, datetime, time-series, milliseconds, strptime

如何解析这种日期格式？我应该将此冒号更改为点还是有人知道更好的解决方案？

```
> x <- "2012.01.15 09:00:02:002"
> strptime(x, "%Y.%m.%d %H:%M:%S:%OS") 
[1] "2012-01-15 09:00:02"
> strptime(x, "%Y.%m.%d %H:%M:%OS")
[1] "2012-01-15 09:00:02"
> x <- "2012.01.15 09:00:02.002"
> strptime(x, "%Y.%m.%d %H:%M:%OS")
[1] "2012-01-15 09:00:02.001" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T20:58:55.597

这里有一个微妙的区别可能会让你失望。如`?strptime`注释：

> 对于 'strptime' '%OS' 将输入秒，包括小数秒。

强调一点，`%OS`表示秒，**包括**小数秒 --- 不仅仅是秒的小数**部分**：如果秒值是 44.234，`%OS`或者`%OS3`表示*44.234*，而不是*.234*

所以解决方案确实是用 a`.`代替 final `:`。

这是您可以这样做的一种方法：

```
x <- "2012.01.15 09:00:02:002"
strptime(gsub(":", ".", x), "%Y.%m.%d %H.%M.%OS") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T20:58:27.257

将

```
strptime(gsub(":", ".", x), "%Y.%m.%d %H.%M.%OS3") 
```

作弊？

# java - 如果它们采用不同的最终参数，如何重用javas匿名内部类？

> ID：13613659
> 
> 赞同：0
> 
> 时间：2012-11-28T20:17:30.313
> 
> 标签：java, final, code-reuse, anonymous-inner-class

我需要创建构建成本高且需要访问其中的最终变量的匿名内部类型。问题是我需要创建其中的许多，唯一的区别是使用的最终变量不同（对象本身和类型）。

是否有可能以更可重用的方式做到这一点？

**一个简单的例子：**

```
final Object aNeededParameter = "test";
Object expensiveToBuild = new ExpensiveInnerType() {
    public void doSomething() {
         aNeededParameter.toString();
    }
}); 
```

我需要同时为不同对象创建昂贵的构建实例，例如 1L、新日期（）、“另一个类似的用例”

基本思想是在运行时为具体类的不同序列化实例创建代理，在第一次使用时反序列化这些对象。我做了一个工作示例（底部的链接），但代理创建非常昂贵。

有一个 ProxyFactory 需要一个 MethodHandler 来通过字节码增强创建一个 Proxy 对象。MethodHandler 定义了一个方法

```
invoke(Object self, Method realMethod, Method proxyMethod, Object[] args) throws Throwable 
```

在我的情况下，此方法需要访问包含构建代理的序列化对象的 byte[]。所以我必须创建一个新的 MethodHandler 并为我想要代理的每个对象构建/编译一个新的代理对象。

调用方法在原始对象的每个方法调用之前自动调用，并简单地检查该对象是否已初始化，如果没有则反序列化它。之后，它调用原始对象上的被调用方法。

**如果您想查看具体的用例，请看这里：**

[java的延迟反序列化代理](https://gist.github.com/4515273865853b46fac1 "java的延迟反序列化代理")

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T20:19:03.837

只是不要让它匿名。匿名类的意义在于您不希望重用它们。通过构造函数将必要的最终变量传递给类。

`doSomething`如果您希望匿名类被实例化一次，其他选项是允许使用参数而不是构造函数。您仍然需要使其不是匿名的，并且它需要由父类拥有，但这允许您只使用一个对象。这是否是好的设计取决于具体情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:22:44.110

使对象成为匿名内部类引用更改的对象的某个包装类的实例（例如，包装类的实例变量之一是对象类型，只需根据需要更改该变量）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T20:23:25.980

你的意思是

```
final Object[] param = { null };

Foo foo = new Foo() 
    void invoke() 
        use param[0]

param[0] = objA;
foo.invoke();

param[0] = objB;
foo.invoke(); 
```

# android - 在一台机器上测试多个 Android 设备

> ID：13613660
> 
> 赞同：8
> 
> 时间：2012-11-28T20:17:35.670
> 
> 标签：android, testing, device, calabash-android

我有两个不同的 Android 设备插入同一台机器。我想做的是针对每个设备并分别对其执行测试。

不幸的是，似乎我每次都需要拔下其中一个设备来运行测试，因为如果我不这样做，我会收到以下错误：

```
error: more than one device and emulator 
```

有谁知道这个问题的解决方法，以便我可以简单地将两个设备都插入并运行我的测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-04T02:18:58.197

您需要将`ADB_DEVICE_ARG`环境变量设置为由`adb devices`.

所以要补充[罗伯特](https://stackoverflow.com/users/961759/robert-estivill)的答案：

```
$ adb devices
List of devices attached 
emulator-5554  device
emulator-5556  device
emulator-5558  device

$ ADB_DEVICE_ARG=emulator-5554;calabash-android run yourapk.apk 
```

如果您需要在多个设备上同时运行相同的 Calabash 测试，最好从单独的根文件夹中运行它们，或者在不同的文件夹中指定结果，以免结果混淆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T01:50:49.237

您可以在 adb 命令中使用 -s 指定目标设备

1）通过执行获取设备序列号

```
$ adb devices 
List of devices attached 
emulator-5554  device
emulator-5556  device
emulator-5558  device 
```

2) 使用 -s 参数将序列号传入 adb 命令

```
$ adb -s <serialNumber> <command> 
```

例如

```
$ adb -s emulator-5556 install helloWorld.apk 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-13T12:04:01.107

在新的 Android Studio Artic Fox 中（在之前的编号系统中应该是 Android Studio 4.3，目前仍处于测试阶段），您可以同时在多台机器上运行测试。

[https://developer.android.com/studio/preview/features?utm_source=android-studio-2020-3-1&utm_medium=studio-assistant-preview#instrumentation-testing](https://developer.android.com/studio/preview/features?utm_source=android-studio-2020-3-1&utm_medium=studio-assistant-preview#instrumentation-testing)

> 要利用此功能：
> 
> 1.  在目标设备下拉菜单中选择选择多个设备（在 IDE 的顶部中心）。
> 
> [![在此处输入图像描述](../Images/8438ec0179afe84c0f2e0aa74e37588d.png)](https://i.stack.imgur.com/DAowIm.png)
> 
> 2.  选择目标设备并单击确定。
> 
> [![在此处输入图像描述](../Images/8dbf231ef27fa70c4176bb8754b1493b.png)](https://i.stack.imgur.com/tqrWLm.png)
> 
> 3.  运行你的测试。
> 
> 要在“运行”面板中查看您的测试结果，请转到`View > Tool Windows > Run`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-26T09:14:31.883

以下命令对我有用：

`calabash-android run your_app.apk ADB_DEVICE_ARG=<your_device_id>`

希望有所帮助

# orbeon - Orbeon：如何使用结语在页面横幅上显示用户名？

> ID：13613661
> 
> 赞同：1
> 
> 时间：2012-11-28T20:17:35.690
> 
> 标签：orbeon

我在带有 orbeon 的 tomcat 上使用表单身份验证。我可以在特定页面上显示用户凭据（我调整了 java-authentication 示例）。我还使用自定义主题在所有页面上实现了注销链接（它是 /authentication/logout 的简单 href）。

我想知道是否有一种简单的方法可以使用我的自定义主题在页面横幅上显示“您以用户名（角色）身份登录”之类的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T00:31:37.223

您可以在 XSLT中的[主题中执行此操作：](http://wiki.orbeon.com/forms/doc/developer-guide/page-flow-epilogue#TOC-Theming)

1.  添加到注销页面的链接应该很简单。
2.  要显示当前用户的用户名，您可以从 XForms 调用[`xxf:get-remote-user()`](http://wiki.orbeon.com/forms/doc/developer-guide/xforms-xpath-functions#TOC-xxforms%3aget-remote-user-). 但是主题 XSLT 在 XForms 处理之后运行，因此您不能在那里使用 XForms。相反，您需要[调用从 XSLT](http://www.saxonica.com/documentation9.1/extensibility/functions.html) :调用的 Java 代码`org.orbeon.oxf.util.NetUtils.getExternalContext().getRequest().getRemoteUser()`。
3.  对于角色，servlet API 不允许您获取用户的角色；您只能检查用户是否具有特定角色`isUserInRole()`，您可以调用类似于第`getRemoteUser()`2 点的角色。

# c - C：访问动态分配的元素时出错

> ID：13613664
> 
> 赞同：-7
> 
> 时间：2012-11-28T20:18:04.017
> 
> 标签：c

我正在尝试编写一个搜索某个元素的函数。但是，当我尝试访问元素时，它存在错误。`search`我评论了在函数中产生错误的行。

```
#include <stdlib.h>
#include <stdio.h>
#define m 2

typedef struct pag {
    int nr;
    int key[m];
    struct pag * child[m + 1];
}* page;

page init(page B) {
    int i;
    B = malloc(sizeof(struct pag));

    for (i = 0; i < m; i++) {
        B->key[i] = 0;
        B->child[i] = malloc(sizeof(struct pag));
    }
    B->child[i] = malloc(sizeof(struct pag));
    return B;
}

page search(page B, int k) {
    int i;
    if (B == NULL )
        return B;
    // 1\. cautare liniara
    for (i = 0; i < m; i++) {
            // 2\. find the desired value
        if (B->key[i] == k) {
            return B;
            // 3\. find the value greater or equal, take the left road to the child
        } else if (B->key[i] >= k) {
            return search(B->child[i], k); //exists with error here
        }
    }

    return search(B->child[i], k); //also exists with error here
}

int main() {
    page B = init(B);

    if (search(B, 2) == NULL )
        printf("Negasit");
    else
        printf("Gasit");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:25:52.750

您的`init`函数构建了一个由一个已初始化的根节点和一堆（实际上是 3 个）完全未初始化的子节点组成的两级树。您的所有子节点都包含垃圾。

当您这样做`search(B, 2)`时，它将查看根节点，然后递归调用`search`其中一个未初始化的子节点（实际上是最后一个）。由于子节点未初始化，代码将崩溃或执行其他完全不可预测的事情。

在尝试搜索其中的任何内容之前正确初始化您的树。

# pointers - C++/CLI 参考属性

> ID：13613665
> 
> 赞同：0
> 
> 时间：2012-11-28T20:18:07.167
> 
> 标签：pointers, properties, reference, c++-cli

我将此 C++/CLI 属性公开给 COM，而 COM 只能接受复杂类型的引用类型属性（它不接受指针属性）。公开类的私有成员以与引用属性一起使用的最佳方法是什么？我尝试了以下方法（两者都不起作用，因为我缺少指向引用的指针，反之亦然转换）：

```
private:
    Object _myProp;
public:
property Object %MyProp { 
    virtual Object %get() 
    {
        return _myProp;
    }
    virtual void set(Object %value) 
    {
        _myProp = value;  // this line doesn't work
    }
}; 
```

我试过这个：

```
private:
    Object ^_myProp;
public:
property Object %MyProp { 
    virtual Object %get() 
    {
        return _myProp;   // this line doesn't work
    }
    virtual void set(Object %value) 
    {
        _myProp = %value;
    }
}; 
```

我在这里做错了什么（鉴于我必须使用参考属性）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:33:24.430

我试图使用“^”返回_myProp，我发现我应该使用“*”

```
private:
    Object ^_myProp;
public:
property Object %MyProp { 
    virtual Object %get() 
    {
        return *_myProp;   // this line NOW works
    }
    virtual void set(Object %value) 
    {
        _myProp = %value;
    }
}; 
```

# c# - 如何从 SubClass 创建 SuperClass 的实例？

> ID：13613669
> 
> 赞同：2
> 
> 时间：2012-11-28T20:18:25.263
> 
> 标签：c#, oop

假设我的系统中有两种类型的用户，教师和学生。现在教师和学生数据都存储在表用户中。因此我有一个类 User，它对应于表 User。

但后来我创建了两个类，教师和学生，它们从用户继承。除了有一些额外的属性和方法之外，这些类使代码更清晰。（我比 User 对象更了解 Teacher 对象。在教师的默认 Ctor 中，我将 UserType 等字段设置为教师的默认值）

现在我主要在 api/表示层/服务层使用教师/学生对象。但是对于数据访问层，我必须传递一个用户对象，因为它是存储在用户表中的。所以我需要从教师/学生对象中获取用户对象。

我想避免编写代码将每个属性从教师复制到用户，并且想知道其他人如何做到这一点？

另外，有没有更好的方法来设计这个而不是单独的教师/学生班级？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T20:22:32.213

如果它们是从用户派生的，那么它应该没关系。您可以设计您的数据访问权限以接收用户，并且由于学生或教师*是*用户，因此它可以正常工作。

所以给定这个函数声明：

```
public void SaveUser(User user){
   //Save a user baby!!!
} 
```

那么这段代码是完全有效的：

```
var myStudent = new Student();
var myTeacher = new Teacher();

SaveUser(myStudent);
SaveUser(myTeacher); 
```

还是我错过了什么？

# perl - 是否有 CPAN 方法来解析随机命令行选项？

> ID：13613670
> 
> 赞同：2
> 
> 时间：2012-11-28T20:18:26.657
> 
> 标签：perl, command-line-arguments

有没有一种好的（理想情况下是 CPAN）方法来使用 Perl处理**任意命令行选项？**

例如，获取一个字符串`"-a 1 -b 'z -x' -c -d 3 4"`并生成一个`GetOpt::Long`类似的数据结构：

```
 { a=>1, b=>"z -x", c=>1, d=>[3,4] }  # d=>"3 4" is acceptable 
```

需要注意的是

1.  选项集是事先不知道的；所以我们似乎不能`GetOpt::Long`按原样使用。

2.  值本身可以包含其他选项，因此简单地解析字符串`#\b+-(\S+)\b#`以查找该字符串中的所有选项似乎也是不可能的，并且更复杂的是一些参数是 =s 类型，一些 =s@，一些 " -xab c" 类型。

3.  此外，即使我们可以做#2，是否`GetOptionsFromString`支持尊重引用值的正确标记？

* * *

注意：为了练习的目的，假设所有参数都是“选项”，换句话说，如果您将字符串拆分为（可能带引号的）标记，您的结构总是

```
 "-opt1 arg1a [arg1b] -opt2 ....". 
```

换句话说，任何以破折号开头的单词/标记都是一个新选项，所有后续不以破折号开头的单词/标记都是该选项的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T20:47:07.677

使用 Text::Parsewords 和简单状态机的快速示例。

```
#!/usr/bin/env perl

use strict;
use warnings;

use Text::ParseWords qw/shellwords/;

my $str = q{-a 1 -b 'z -x' -c -d 3 4};
my $data = parse($str);

use Data::Printer;
p $data;

sub parse {
  my $str = shift;

  my @tokens = shellwords $str;

  my %data;
  my @keys;
  my $key = '_unknown';
  foreach my $token (@tokens) {
    if ($token =~ s/^\-//) {
      $key = $token;
      push @keys, $key;
      next;
    }

    if ( ref $data{$key} ) {
      push @{ $data{$key} }, $token;
    } elsif (defined $data{$key}) {
      $data{$key} = [ $data{$key}, $token ];
    } else {
      $data{$key} = $token;
    }
  }

  foreach my $key (@keys) {
    next if defined $data{$key};
    $data{$key} = 1;
  }

  return \%data;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:46:34.150

在我知道`Getopt::Long`并使用它的智慧之前，我推出了我自己的命令行选项处理器，它可以接受任意参数并填充一个全局哈希表。规则是

使用单个字母切换（-A .. -Z、-a .. -z）

```
-n               sets  $args{"n"} = 1
-nfoo            sets  $args{"n"} = "foo" 
```

多于一个字母的开关

```
--foo            sets  $args{"foo"} = 1
--foo=bar        sets  $args{"foo"} = "bar" 
```

这种方法的好处和坏处在于，您可以快速尝试新的命令行选项，在使用该选项时更改代码，而无需编辑调用`GetOptions`或分配另一个变量：

```
 ... line 980 ...
 if ($args{"do-experimental-thing"}) {
     # new code
     do_experimental_thing();
 } else {
     do_normal_thing();
 } 
```

这是我上传到 CPAN 的第一个模块，后来我删除了它，但[BackPAN](http://backpan.perl.org/authors/id/M/MO/MOB/Args-Simple-1.0.tar.gz)的记忆力很长。

# refresh - XOrg内部渲染设计

> ID：13613674
> 
> 赞同：0
> 
> 时间：2012-11-28T20:18:48.343
> 
> 标签：refresh, x11, framebuffer, xorg

我编写了一个在慢速测试机器上运行的极简 xserver。它只是使用视频帧缓冲区。当我在 twm 中移动一个窗口（任何大小）时，它会快速而干净地移动，但它会“颤抖”，就像屏幕更新频率不高一样。此外，当我松开鼠标按钮时，我看到（很快）窗口下降，就像 CPU 太慢一样，但它的电量不超过 40%。

那么，原 XOrg 服务器是如何设计的呢？我指的是 kdrive 或 xquartz 使用的 XOrg 基础。

1.  图形帧缓冲区是否“免费访问”，每个客户端同时绘制？
2.  是否存在定期绘制屏幕 (FPS) 的渲染循环，即使客户端可以直接访问 FB？

如何在 xorg 的 xfree86 服务器中设置刷新率：

*   是不是用来调整xorg基础程序中屏幕渲染的频率
*   还是仅在 xfree86 的视频驱动程序中使用？

感谢您的任何启发...

# asp.net - 如何让 System.Runtime.Caching 在 asp.net 中执行“每个请求”缓存？

> ID：13613675
> 
> 赞同：0
> 
> 时间：2012-11-28T20:18:48.800
> 
> 标签：asp.net, caching

就像题目说的那样。我有一个提供 DAL 的 DLL，我想让它在特定实例中开始缓存。

提到的 DLL 用于 asp.net 应用程序和控制台应用程序。

我想做的是使用 System.Runtime.Caching 命名空间，但我希望在对 asp.net 环境的每个请求结束时清除缓存。关键是要确保我不会在单个请求中多次返回数据库获取相同的数据，我不是在为需要在多个请求中存活的数据寻找通用缓存机制。

在 System.Runtime.Caching 的这个特定方面，我似乎真的找不到任何东西。它在 asp.net 上下文中使用什么，有没有办法让它做到这一点？

我意识到我可以在某处使用静态成员，但我不希望那样做，因为它不是未来的证明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:22:45.447

它全部在您制作的缓存键和有效期中。在您的示例中，您将希望提供一个滑动到期时间（如果该项目未被触及，则在经过一段时间后将其从缓存中删除）。

缓存键应该有一些会话/请求特定的 ID 作为它的一部分。

您只会基于每个请求而不是基于每个用户或每个系统进行缓存，这似乎很奇怪。您可能想探索其他形式的数据共享，例如线程本地存储。

# html - 条件 HTML（取决于 yaml 前端）

> ID：13613676
> 
> 赞同：0
> 
> 时间：2012-11-28T20:18:53.087
> 
> 标签：html, yaml, jekyll, liquid

我是一个自认的网络笨蛋，所以放轻松。使用 Jekyll，我有一个网站，内容通过液体过滤器泵送以生成目录。default.html 文件包含一些类似这样的内容。. .

```
<div id='content'>
    {{ content | toc }}
    {{ content }}
</div> 
```

如何使用 yaml 前端问题（类似`do_toc: true`）使目录仅出现在指定页面上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:57:48.743

您可能希望为需要目录和不需要目录的页面定义不同的布局。听起来您正在`default.html`用作所有内容的模板。取而代之的是，制作一个名为的其他文件的副本`default.html`，例如`toc.html`，然后编辑该文件（呃，这确实意味着您必须在 HTML 中进行编辑）以将`div`您提供的块放在您想要的位置。

然后在需要 toc 的页面中，在 yaml 标头中，只需使用

```
--- 
layout: toc.html
--- 
```

代替

```
--- 
layout: default.html
--- 
```

注意：无需复制`default.html`. 只需添加一个名为`toc.html`您的`_layouts`目录的文件，其中包含以下内容：

```
---
layout: default.html
---
<div id='content'>
 {{ content | toc }}
 {{ content }}
</div> 
```

然后如图所示为您的页面编写您的 yaml 标头。完全没有 HTML 的重复。

# svn - 如何避免 Visual Studio 2012 项目文件中出现多个发布配置文件？

> ID：13613677
> 
> 赞同：12
> 
> 时间：2012-11-28T20:19:00.650
> 
> 标签：svn, visual-studio-2012, publish-profiles

避免我们团队中的不同用户对包含对其本地发布配置文件的引用的 .csproj 文件进行更改的最佳方法是什么？

我们最近迁移到 2012 年，我们的 .csproj 文件在 .csproj XML 的 Properties/PublishProfiles 中有一些对不同 .pubxml 文件的引用。

如果它是相关的，我们 svn:ignore 任何 .user 文件和 Properties/PublishProfiles 文件夹。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-18T13:51:26.590

在您的 .csproj 文件中，将所有对 .pubxml 文件的引用替换为单个通配符引用：

```
<None Include="Properties\PublishProfiles\*.pubxml" /> 
```

然后，每个开发人员都可以添加和删除自己的发布配置文件，而无需 Visual Studio 更新 .csproj XML。

另外，正如您所说，将源代码管理设置为忽略 *.user 和 *.pubxml。

# java - 具有相对路径的 Java 复合背景图像

> ID：13613679
> 
> 赞同：3
> 
> 时间：2012-11-28T20:19:05.083
> 
> 标签：java, image, background, swt, relative-path

我是 Java 新手，我想向 Composite 添加背景图像。我只能使用 SWT，不能使用 JFace。我正在使用 eclipse indigo IDE (3.8)，当我想设置背景图像时，首先我将 Image 类初始化为图像对象，但是当我按 CTRL + SPACE 帮助选择构造函数时，我有 5 个不同的构造函数。我不知道该选择什么。

我必须使用相对路径。该包具有以下结构：

```
org.mypackage.program //the package name
org.mypackage.program/src/org.mypackage.program //the plugin-project automated created classes
org.mypackage.program/src/views // all views

org.mypackage.program/car_image.jpg // the image what I would set in background
org.mypackage.program/views/View.java // the class where I want to set the background 
```

这是我做的，但它不起作用：

```
Image image = new Image(Display.getCurrent(),  this.getClass().getClassLoader().getResource("car_image.jpg"));
compImage.setBackgroundImage(image); 
```

我也是 OOP 的新手，我只编写了结构化/模块程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T05:58:49.177

请尝试以下代码：-

请注意，如何提及相对路径

`.\\src\\org\\mypackage\\program\\car_image.gif`

这里 src 是应用程序的根文件夹。

* * *

```
package org.mypackage.program;
import org.eclipse.swt.SWT;
import org.eclipse.swt.graphics.Image;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
public class Demo {
    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
            Display display = new Display();
            Shell shell = new Shell(display);
            Image img;
            shell.setMaximized(true);
            img= new Image(display,".\\src\\org\\mypackage\\program\\car_image.gif");
            Composite comp= new Composite(shell, SWT.NONE);
            comp.setBackgroundImage(img);
            shell.setLayout(new FillLayout());
            shell.open();
            while (!shell.isDisposed())
            {       
                if (!display.readAndDispatch())
                {         
                    display.sleep();       
                }     
            }     
            display.dispose();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T17:46:57.530

或者您可以尝试使用图形方式，使您能够从组件的起点 (x,y) 绘制图像。当然，您可以缩放图像，使其适合您想要用特定图像覆盖的空间Image 对象的 scale 方法。示例：

```
package org.mypackage.program;

//your imports here

public class MyClassName extends JFrame{

public Image myImg;
public int startingX = 0,startingY = 0,newWidth = 300,newHeight = 300;

public static void main(String[] args){
    MyClassName frame = new MyClassName();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(400,400);
    frame.setVisible(true);
}

public MyClassName(){
    super("JFrame title")

    myImg = Toolkit().getDefaultToolkit().getImage(MyClassName.class.getResource("org/mypackage/program/car_image.jpg"));
    Display display = new Display();
    Shell shell = new Shell(display);

    shell.setMaximized(true);

    myImg = myImg.getScaledInstance(newWidth,newHeight,0);

    Composite comp= new Composite(shell, SWT.NONE){

        protected void paintComponent(Graphics g){
            g.drawImage(myImg, startingX, startingY, this);
        }

    };

}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-19T11:04:35.887

> 使用 swt/jface 应用程序设置动态或相对图像路径

* * *

```
Button btnNewButton = new Button(parent, SWT.NONE);
//Absolute path never use
//btnNewButton.setImage(SWTResourceManager.getImage("D:\\Bharat\\Icon\\uncheck.png"));
btnNewButton.setImage(ResourceManager.getPluginImage("RCP_Demo", "icons/delete.png"));
btnNewButton.setBounds(18, 370, 68, 23); 
```

* * *

```
/////Launching time your application can not generate some image related problem 

1)Control: Drag and drop Button control
2)Add image to Button control 
3)select image chooser property and click plugin resource radiobutton
4)select your project,select your image folder after set image to button 
```

以编程方式有用这个答案....祝您有美好的一天....谢谢

# javascript - 删除 Javascript 变量中的空格

> ID：13613680
> 
> 赞同：2
> 
> 时间：2012-11-28T20:19:08.060
> 
> 标签：javascript

我正在使用 AJAX 通过 PHP 从 MYSQL 数据库中检索数据。

但是，如果没有找到结果，变量仍然有两个空格。我使用`alert(data.length);`. 结果是**2**，这意味着有两个空格。

如何删除这些空格，以便如果没有结果，我可以使用显示消息`if(data == ''){}`？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T20:20:00.743

这称为字符串修剪。这是纯 JavaScript 中的一种选择：

```
var len = data.replace(/\s/g, "").length; 
```

但是，在现代浏览器中，有一个字符串[`trim()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim)函数：

```
var len = data.trim().length; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T20:20:34.710

我不明白为什么你首先有这两个空白。如果它对您来说是一个合适的选择，我会尝试从服务器响应中删除原点的那些空格。

如果这不可能，您可以使用`String.prototype.trim`删除前导/尾随空格。这将允许您按如下方式编写支票

```
if (data.trim().length === 0) {
  ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T20:20:44.167

```
var str = "lots of whitespace";
str.replace(/\s+/g, ''); // 'lotsofwhitespace' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T20:21:20.780

请参阅这篇文章，其中[深入介绍了该主题](https://stackoverflow.com/questions/498970/how-do-i-trim-a-string-in-javascript)，如果您使用 jQuery，则可以使用`$.trim()`内置的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T20:22:42.523

如果你的变量是`data`那么试试这个

```
 data.replace(/\s+/g, ''); 
```

并根据需要将其分配给其他变量

```
data2 = data.replace(/\s+/g, ''); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-28T20:22:42.820

3个选项：

```
var strg = "there is space";
strg.replace(/\s+/g, ' '); 
```

或者：

```
$.trim() 
```

或者：

```
String.prototype.trim = function() { 
    return this.replace(/^\s+|\s+$/g, ""); 
}

var strg = "there is space";
strg.trim(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-26T05:36:11.777

`data = data.split(' ').join('')`这将从字符串中删除所有空格。

# c# - 使用linq从不同类型的目标集合中的源集合中查找某个值

> ID：13613681
> 
> 赞同：0
> 
> 时间：2012-11-28T20:19:18.190
> 
> 标签：c#, linq

我想知道分号后的一个 sourceList 值是否包含在由 Name 属性标识的 targetList 中。如果那是真的，则必须返回布尔值。

它不工作，但我尝试了一些东西......

我想我的 linq 不正确。所有的东西......

“FoundSomething”包含在 targetList 中，因此它应该返回 TRUE。

```
var sourceList = new String[]
{ 
    "1;HideButton",
    "2;ShowButton",
    "3;HideButton",
    "4;ShowButton",
    "5;HideButton",
    "6;ShowButton",
    "7;HideButton",
    "8;ShowButton",
    "9;HideButton",
    "10;FoundSomething",
};

var targetList = new List<GlobalConfiguration>()
{
    new GlobalConfiguration{ Name = "444" },
    new GlobalConfiguration{ Name = "fdsdffd" },
    new GlobalConfiguration{ Name = "44" },
    new GlobalConfiguration{ Name = "fsdd" },
    new GlobalConfiguration{ Name = "fs4rtref" },
    new GlobalConfiguration{ Name = "ftrtras" },
    new GlobalConfiguration{ Name = "FoundSomething" },
};

Boolean exists = sourceList.Any(a => targetList.All(c => c.Name == a.Split(new[] { ';' }, StringSplitOptions.RemoveEmptyEntries).Last())); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:23:29.353

我不是 100% 确定我理解你的目标，但这是我最好的猜测：

```
sourceList
    .Select(x => x.Split(new[] { ';' }, StringSplitOptions.RemoveEmptyEntries).Last())
    .Intersect(targetList.Select(x => x.Name))
    .Any(); 
```

它的作用是创建两个序列

1.  后半部分`sourceList`（分号后）
2.  名称属性`targetList`

与`Select`.

然后它用于`Intersect`返回两个序列共有的任何项目。

最后，它用于`Any`确定是否返回了任何东西`Intersect`（我认为这很容易理解）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:29:04.013

看起来你想要另一个`Any`而不是`All`：

```
bool exists = sourceList
    .Select(s => s.Split(new[] { ';' }, StringSplitOption.RemoveEmptyEntries).Last())
    .Any(v => targetList.Any(t => s == t.Name)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T20:34:12.970

你基本上有两个集合，你想看看他们的交集是不是空的。您应该这样做，这要归功于方便的[`Intersect`](http://msdn.microsoft.com/en-us/library/vstudio/bb460136%28v=vs.90%29.aspx)扩展方法。

```
var source = sourceList.Select(s=>s.Split(';')[1]);
var target = targetList.Select(t=>t.Name);

return source.Intersect(target).Count() > 0; 
```

# java - Java import 语句：什么是 import net.？

> ID：13613682
> 
> 赞同：3
> 
> 时间：2012-11-28T20:19:18.447
> 
> 标签：java, import

我正在查看 Vivin Paliath 的这个答案，发现了一些我以前从未见过的东西。这个导入语句在他的代码中：

```
import net.vivin.digit.DigitImage; 
```

我从未见过任何进口网。之前和当我将他的代码写入 Eclipse 之前和当我将他的代码写入 Eclipse 时，我收到了无法解析导入网络的错误消息，因此代码工作所需的类（DigitImage 类）无法解析为类型.

我见过这个进口网。是 Vivin Paliath 的一些答案，但我以前从未见过。因此，我不知道错误与什么有关。我做了一些研究，但找不到任何答案。这只是一个 Eclipse 问题吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T20:20:53.863

命名约定是由拥有Internet 域`net.vivin.*`的任何人编写/拥有的。`vivin.net`如果您访问[http://vivin.net/](http://vivin.net/)，您会看到它是 Vivin Paliath 的网站。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T20:21:55.813

这不是 java JDK 的一部分。相反，它是用户添加的库或其他类。

# php - 使用表单值作为 PHP 函数的输入来动态填充第三个表单域

> ID：13613691
> 
> 赞同：0
> 
> 时间：2012-11-28T20:20:00.793
> 
> 标签：php, javascript, dynamic

假设下面是简单的三输入表单。使用 lat 和 lon 的值，我需要运行一个 PHP 函数（已编写），该函数在站点名称中创建我想要的值。当前的表单操作已经可以正常工作，并且与我的问题完全不同。

```
<form name="w3Balltrak" class="feedbackform" action="readyget.pl" method="post"
<input type="text" id='lat' name='lat' value='' />
<input type="text" id='lon' name='lon' value='' />
<input type="text" id='sitename' name='sitename' value='' />
<input type="submit" value="Submit" /> 
</form> 
```

我的问题是我不知道如何将站点名称的值设置为我的 PHP 函数的输出。该函数运行良好，在 PHP 中调用它看起来像这样 'getWX($lat, $lon)' 并且返回看起来像这样 'MCI'。

如何在用户输入 lon 值之后但在他点击表单末尾的提交按钮之前立即设置站点名称 M​​CI 的默认值？

我希望我问得足够好，以便有人理解和回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:25:01.360

如果想在不提交表单的情况下与PHP进行通信，则需要使用ajax。你听说过[jQuery](http://jquery.com/)，它为 ajax 查询提供了一种便捷的方式吗？

我基本上会附加一个事件处理程序来注意更改，`lat`如果`lon`两者都设置了，则通过 ajax 请求服务器端 php 脚本。

这对你有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:33:02.300

据我了解您的问题..您的答案将是ajax

```
<script type="text/javascript">
// wait until the document ist ready.. otherwise the 2 ids dont exist in this moment
jQuery(document).ready(function($){
    // on every change in the input fields send a request to the php
    $('#lat, #lon').live('change', function(){
        $.get("test.php", { lat: $('#lat').val(), lon: $('#lon').val() },
           function(data){
             $('#sitename').val(data);
        });            
    });
});
</script> 
```

并在 test.php 文件中

```
<?php
// if the 2 fields are not empty ... join them and return the result
if(!empty($_GET['lat']) && !empty($_GET['lon'])){
    $result = $_GET['lat'] . $_GET['lon'];
}
echo $result; 
?> 
```

$result 然后将是 jQuery 函数作为“数据”接收的内容

# jquery - 如何将 JQuery 布局保存到数据库

> ID：13613693
> 
> 赞同：0
> 
> 时间：2012-11-28T20:20:11.147
> 
> 标签：jquery, ruby-on-rails, jquery-ui

我正在处理“电子表格”/表格，该表格具有可折叠的行，因此您可以通过单击小图像来隐藏/显示数据。我使用 JQuery 和 Ruby on Rails 可以很好地完成所有这些工作。

我现在需要做的是保存表格的布局，以便它在页面加载时保持不变。我知道我可以通过 Ajax 做到这一点，每次用户单击按钮以显示/隐藏行时写入数据库，但不确定这是最好的方法。我也不认为使用 cookie 对我来说是一个好方法，因为布局应该在浏览器/会话中持续存在。

我想做的是这个——在页面中添加隐藏的表单域。每个隐藏字段对应一个显示/隐藏按钮。因此，每次单击按钮时，它都可以（通过 jquery）将隐藏字段的值更新为 true/false，具体取决于该行是否展开。然后当用户保存表单时，我可以使用 Rails 将隐藏字段值保存到数据库中的哈希中：

```
@spreadsheet.layout = {"row1_expand" => "true", "row8_expand" => "false"} 
```

我正在寻找有关保存布局的最佳方法的建议，因此当再次查看电子表格时，它看起来与上次保存时相同。创建一个名为“布局”的额外字段来保存值的散列是一种好方法吗？并使用通过 Jquery 设置的隐藏字段？我愿意接受任何建议，谢谢。

# mustache - 如何基于嵌套数组重复一个部分

> ID：13613694
> 
> 赞同：2
> 
> 时间：2012-11-28T20:20:12.077
> 
> 标签：mustache

我正在使用 mustache.js 并希望我的模板显示文本六次，对于 data.result.options[0] 中的每个值显示一次

**JS**

```
data = {result : {"id": "AAA", "options" : [[1, 2, 3, 4, 5, 6], 2, 3]}} 
```

**模板**

```
{{#result.options[0]}}
<span>Show me six times.</span>
{{/result.options[0]}} 
```

但是，当我尝试此操作时，没有渲染任何内容。是否可以在不更改数据结构的情况下做到这一点？

jsFiddle在这里：http: [//jsfiddle.net/TbuP5/1/](http://jsfiddle.net/TbuP5/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T03:22:50.747

我在玩，这很有效：

**模板**

```
{{#result.options.0}}
<span>Show me six times.</span>
{{/result.options.0}} 
```

# javascript - setInterval 动画

> ID：13613695
> 
> 赞同：1
> 
> 时间：2012-11-28T20:20:22.510
> 
> 标签：javascript

我想使用 setInterval 制作动画。图像必须从左到右改变其位置。

HTML：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <title>animacja</title>
    <style type="text/css">
    #obrazek
    {
        position: relative;
        left: 1px;
    }
    </style>
    <script type="text/javascript"  src="animacja.js"></script>

</head>
<body>
    <img src="smile.jpg" id="obrazek" alt="Usmiech" width="100" height="100" />
</body>
</html> 
```

JavaScript：

```
window.onload = inicjuj;

function inicjuj()
{
    setInterval(function(){animacja();},1000);
}

function animacja()
{
    var obj = document.getElementById("obrazek");
    var wartosc = parseInt(obj.style.left, 10);
    obj.style.left = (wartosc + 10) + "px";
} 
```

不幸的是 js 不起作用，我不知道为什么。我已经检查过并且 animacja 函数运行但是图像没有改变它的位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T20:31:27.510

您的代码中有一个小错误..

最初由于**未定义**`left property`元素的，它是空的。所以返回**NaN..****`parseInt`**

 ****只需添加一个额外的检查条件。

```
window.onload = inicjuj;

function inicjuj()
{
    setInterval(animacja,1000);
}

function animacja()
{
    var obj = document.getElementById("obrazek");
    var left = obj.style.left;
    if(left === ''){
        left = 0;
    }
    var wartosc = parseInt(left, 10);
    obj.style.left = (wartosc + 10) + "px";
}​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/eCSb4/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:34:16.587

您的问题是`obj.style`仅包含有关`style`标签中指定的样式的信息，*而不*包含其他样式表中指定的样式，例如您的`<style>`标签。因此，`obj.style.left`是空字符串，并`parseInt('')`产生`NaN`。

**相反**，在标签的属性中定义您的`left`样式属性：`style``<img>`

```
<img ... style="left:1px;" /> 
```

**或者**，如果将样式分开非常重要（例如，为了遵守某些设计标准），您可以使用该[`window.getComputedStyle`](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)函数来计算对象的实际`left`样式值：

```
function animacja()
{
    var obj = document.getElementById("obrazek");
    var wartosc = parseInt(getComputedStyle(obj).left, 10);
    console.log(parseInt(getComputedStyle(obj).left, 10))
    obj.style.left = (wartosc + 10) + "px";
}​ 
```****

# shell - ZSH 历史完成菜单

> ID：13613698
> 
> 赞同：17
> 
> 时间：2012-11-28T20:20:36.000
> 
> 标签：shell, autocomplete, zsh

Zsh 自动完成功能很棒，但我无法正确配置一件事：我希望 zsh 为我提供历史命令列表。

我知道我可以用`Ctrl`+搜索历史`R`，但我想要一些不同的东西。当我输入：

> shelajev@elephant ~ » kill 1 `TAB`
> 1642 shelajev gnome-keyring-d
> 1718 shelajev gnome-session
> 1807 shelajev ssh-agent
> 1810 shelajev dbus-launch
> 1811 shelajev dbus-daemon
> 1822 shelajev gnome-settings-
> 1884 shelajev gvfsd
> 18daemofs-fuse-

Zsh 为我提供了要杀死的进程列表。我想要这样的东西：

> shelajev@elephant ~ » 杀`Ctrl`+ `X` `Ctrl`+`X`
> 杀 -9 12093
> 杀 -15 4123

列表中的这些项目取自我的历史记录。

存在一个 ZLE hist-complete 的东西，但我不知道如何正确配置它。

我有以下内容`.zshrc`：

```
zle -C hist-complete complete-word _generic
zstyle ':completion:hist-complete:*' completer _history
bindkey "^X^X" hist-complete 
```

但这只是完成个别单词，这并没有给我太多。有没有办法结合历史搜索历史中的**行**并显示其列表？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-28T21:33:39.387

zsh 中有一个东西叫做`history-beginning-search-menu`. 如果你把：

```
autoload -Uz history-beginning-search-menu
zle -N history-beginning-search-menu
bindkey '^X^X' history-beginning-search-menu 
```

在您的 .zshrc 文件中。然后例如：

```
kent$  sudo systemctl[here I type C-X twice]
Enter digits:
01 sudo systemctl acpid.service                      11 sudo systemctl enable netfs
02 sudo systemctl enable acpid                       12 sudo systemctl enable networkmanager
03 sudo systemctl enable alsa                        13 sudo systemctl enable NetworkManager
04 sudo systemctl enable alsa-restore                14 sudo systemctl enable NetworkManager-wait-online
05 sudo systemctl enable alsa-store                  15 sudo systemctl enable ntpd
06 sudo systemctl enable cronie                      16 sudo systemctl enable sshd
07 sudo systemctl enable cups                        17 sudo systemctl enable syslog-ng
08 sudo systemctl enable dbus                        18 sudo systemctl enable tpfand
09 sudo systemctl enable gdm                         19 sudo systemctl reload gdm.service
10 sudo systemctl enable hal                         20 sudo systemctl restart gdm.service 
```

那么你需要给出索引号来触发历史中的命令。

当然可以对此进行一些优化。但我认为这会让你开始。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-12-26T22:20:17.257

[我的插件`zsh-autocomplete`](https://github.com/marlonrichert/zsh-autocomplete)现在包括一个适当的历史菜单，以及[实时多行历史搜索](https://github.com/marlonrichert/zsh-autocomplete#live-history-search)。试试看，让我知道你的想法！

[![实时历史搜索](../Images/7afcbb51845687f10aad016b9370c857.png)](https://i.stack.imgur.com/AMw1l.gif)

[![具有多选功能的历史菜单](../Images/b47e759a946bbcfacb1724fae3e2a767.png)](https://i.stack.imgur.com/9hK4a.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-01T14:34:00.367

几年过去了，现在有一个名为[zsh-navigation-tools](https://github.com/psprint/zsh-navigation-tools)的插件。它并不完全符合您的要求，但也许您或其他人可能会发现它有帮助。但是，应该注意的是，它用全屏应用程序替换了默认的 bck-i-search ( `CTRL`+ `R`)。

感谢[Mike](https://superuser.com/a/1051789/275251)将我指向这个插件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-16T22:19:28.183

如果您只想在当前行中自动完成顶部匹配（如鱼壳），请尝试[zsh-autosuggestions](https://github.com/zsh-users/zsh-autosuggestions)。当您键入类似于历史命令的命令时，它会建议以浅灰色文本完成。您可以按 → 接受完成。

![zsh-自动建议](../Images/b73bfcd3c2bf67a6bf340540da2bdf03.png)

# sql - SQL 语法问题

> ID：13613700
> 
> 赞同：0
> 
> 时间：2012-11-28T20:20:43.850
> 
> 标签：sql, oracle, syntax

```
 CREATE VIEW hd3_b 
AS 
  SELECT CASE 
           WHEN hd.country_visited = 'USA' THEN 'AMERICA' 
           WHEN hd.country_visited = 'India' THEN 'ASIA' 
           WHEN hd.country_visited = 'CHINA' THEN 'ASIA' 
           WHEN hd.country_visited = 'SPAIN' THEN 'EUROPE' 
           ELSE hd.country_visited 
         END AS hd.COUNTRY_VISITED 
  FROM   holiday_details hd 
  UNION 
  SELECT hd.holiday_desc, 
         holiday_code 
  FROM   holiday_details hd 
```

这是我目前拥有的代码，我不断收到 FROM 缺失错误或 MISSING KEYWORD 错误。

任何人都可以在我的语法中看到任何令人眼花缭乱的错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T20:25:09.150

你有几个错误。您似乎正在使用这两个`SELECT`语句选择不同数量的列。当您使用 a 时`UNION`，列号必须相等：

```
CREATE VIEW hd3_b 
AS 
  SELECT CASE 
           WHEN hd.country_visited = 'USA' THEN 'AMERICA' 
           WHEN hd.country_visited = 'India' THEN 'ASIA' 
           WHEN hd.country_visited = 'CHINA' THEN 'ASIA' 
           WHEN hd.country_visited = 'SPAIN' THEN 'EUROPE' 
           ELSE hd.country_visited 
         END AS COUNTRY_VISITED,  -- remove the hd alias
         Null as PlaceholderColumn  
  FROM   holiday_details hd 
  UNION 
  SELECT hd.holiday_desc, 
         holiday_code 
  FROM   holiday_details hd 
```

您在第一个选择中的列名上也有一个表别名。

如果您只想返回一列，那么您将需要使用：

```
CREATE VIEW hd3_b 
AS 
  SELECT CASE 
           WHEN hd.country_visited = 'USA' THEN 'AMERICA' 
           WHEN hd.country_visited = 'India' THEN 'ASIA' 
           WHEN hd.country_visited = 'CHINA' THEN 'ASIA' 
           WHEN hd.country_visited = 'SPAIN' THEN 'EUROPE' 
           ELSE hd.country_visited 
         END AS COUNTRY_VISITED  -- remove the hd alias
  FROM   holiday_details hd 
  UNION 
  SELECT hd.holiday_desc
  FROM   holiday_details hd 
```

除了在每个查询中具有相同数量的列之外，`SELECT`您还需要为每列具有相同的数据类型。如果它们不相同，那么您将需要执行`CAST`任何列以使数据类型相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T20:25:35.217

好吧，我确实看到了一个错误，但没有缺少关键字。您正在尝试使用不同的列数进行`UNION`between ：`SELECT`

```
CREATE VIEW hd3_b 
AS 
  SELECT CASE 
           WHEN hd.country_visited = 'USA' THEN 'AMERICA' 
           WHEN hd.country_visited = 'India' THEN 'ASIA' 
           WHEN hd.country_visited = 'CHINA' THEN 'ASIA' 
           WHEN hd.country_visited = 'SPAIN' THEN 'EUROPE' 
           ELSE hd.country_visited 
         END AS hd.COUNTRY_VISITED 
  FROM   holiday_details hd 
  UNION 
  SELECT holiday_desc --holiday_code This column shouldn't be here
  FROM   holiday_details 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T20:24:36.503

尝试

```
CREATE VIEW hd3_b 
AS 
  SELECT CASE 
           WHEN hd.country_visited = 'USA' THEN 'AMERICA' 
           WHEN hd.country_visited = 'India' THEN 'ASIA' 
           WHEN hd.country_visited = 'CHINA' THEN 'ASIA' 
           WHEN hd.country_visited = 'SPAIN' THEN 'EUROPE' 
           ELSE hd.country_visited 
         END AS COUNTRY_VISITED 
  FROM   holiday_details hd 
  UNION 
  SELECT hd.holiday_desc, 
         hd.holiday_code 
  FROM   holiday_details hd 
```

你不需要高清。在这条线上

以 COUNTRY_VISITED 结束

由于 COUNTRY_VISITED 是别名，因此您不需要在其前面加上表别名

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T21:14:08.963

我不认为你真的想要 UNION - 在这两种情况下你似乎都是从 holiday_details 表中选择的。如果您希望 country_visited 与相关的 holiday_desc 和 holiday_code 一起成为一列，请尝试以下操作：

```
CREATE VIEW hd3_b 
AS 
  SELECT CASE 
           WHEN country_visited = 'USA' THEN 'AMERICA' 
           WHEN country_visited = 'India' THEN 'ASIA' 
           WHEN country_visited = 'CHINA' THEN 'ASIA' 
           WHEN country_visited = 'SPAIN' THEN 'EUROPE' 
           ELSE country_visited 
         END AS COUNTRY_VISITED, 
  holiday_desc, 
  holiday_code 
  FROM   holiday_details 
```

此语法应适用于 T-SQL。自从我使用 Oracle 来确定那里的语法是否正确以来已经太久了。

# mysql - 列出未使用的数字 ID 的 SQL 查询

> ID：13613702
> 
> 赞同：0
> 
> 时间：2012-11-28T20:20:49.417
> 
> 标签：mysql, indexing

我有一个以 column=ID 为索引的表，它是一个 5 位整数。

这是一个非常古老的表，从未自动递增。

我想列出所有未使用的 ID。

我可以用一个`SELECT * ORDER BY`语句来做，然后对一个递增的`for()`循环运行结果，但我想知道是否有人知道是否有一个 SQL 查询语句在 MySQL 中执行此操作，或者你是否有比我计划采用的方法更聪明的方法.

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:26:38.363

这是我会采取的方法。

1.  创建一个`number`从 1 到 n 的表（n 是您的最大 ID）。可以使用这样的查询生成[数字](https://stackoverflow.com/a/2652051/679449)。
2.  `LEFT JOIN`对`number`表执行 a并仅获取`NULL`结果。

## [看这个演示](http://sqlfiddle.com/#!2/3d22e/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:32:31.457

你可以做这样的查询

```
 SELECT id+1 as startId, (SELECT MIN(t3.id) -1 FROM table t3 
       WHERE t3.id > t1.id) as endId
    FROM Table AS t1
    WHERE 
    NOT Exists 
        (
           SELECT t2.id
           FROM Table as t2
           WHERE t2.id+1 = t2.id
        )
    HAVING (SELECT MIN(t3.id) -1 FROM table t3 
       WHERE t3.id > t1.id) IS NOT NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T21:15:24.673

我知道这适用于插入......也许也适用于更新......会测试它，但我现在在 Windows pc 上并且没有安装 mysql :)

```
select @i := 1;
update tbl set id = @id:=@id+1; 
```

[http://www.electrictoolbox.com/autoincrement-value-mysql/](http://www.electrictoolbox.com/autoincrement-value-mysql/)

更新：

它现在经过测试并且效果很好......从

```
select @i := 0; 
```

以便您在数据库中的第一个条目以 1 开头；

# php - PHP 的 uniqid() 可能会返回哪些可能的字符？

> ID：13613703
> 
> 赞同：8
> 
> 时间：2012-11-28T20:20:49.340
> 
> 标签：php

函数 uniqid() 可能包含哪些可能的字符？据我了解，这只是字母数字字符，但需要您确认。那么，是这样的吗？

PS 在文档[http://php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)我没有看到关于这个的信息

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T20:26:39.367

在同一文档页面的评论中：“正如下面的其他人所指出的那样，没有前缀且没有“添加的熵”，此函数仅返回带有添加微秒计数器的 UNIX 时间戳作为十六进制数；它或多或少只是 microtime()，在十六进制形式。”

所以它只返回十六进制字符，例如 0-9 af。

编辑：正如 Vulcan 在下面的评论中指出的那样：`$more_entropy`如果为真，则附加一个句点和一些 0-9 字符。

# svg - 如何使用尺寸处理 SVG

> ID：13613708
> 
> 赞同：0
> 
> 时间：2012-11-28T20:21:02.840
> 
> 标签：svg, vector-graphics

我想绘制一个篮球场以缩放 SVG 图像。

我有[球场的尺寸](http://en.wikipedia.org/wiki/Basketball_court#Dimensions)。

**如何使用现实生活中的尺寸创建 SVG 图像，并按比例缩小输出以适应任意图像尺寸，例如 300 像素 x 300 像素？**

**编辑**：澄清更多 - 我想画出现实生活中 5 英寸的油漆线。我是否将 5 英寸作为我的“单位”，然后将其他所有内容乘以这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:34:51.987

如果一个篮球场长 94 英尺，并且您想将其绘制为适合 300 像素的比例，那么请根据您的目标尺寸计算出比例。300 / 94 = 3.19。使用该数字来决定您的比例（包括油漆线的宽度）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T06:45:46.517

抛开像 Raphael 这样的框架，你不能把整个球场画在一个`<svg height="50" width="94">`（或以英寸为单位）内，然后将整个东西放在一个`<g transform="scale(3.14159)">`放大或缩小以适应 300 像素的范围内吗？该元素有多种可用的变换`<g>`。SVG 真的很擅长这种事情，你可以在你的根图中使用熟悉的措施。

# sql - Oracle 查询 - 无法找出问题所在

> ID：13613711
> 
> 赞同：-1
> 
> 时间：2012-11-28T20:21:22.133
> 
> 标签：sql, oracle

有人能告诉我为什么下面的查询在 Oracle 中被认为是无效的吗？

```
SELECT TO_CHAR(start_date,'dd/month')
FROM Table1
WHERE start_date IN (TO_DATE('JUN 15 12'), TO_DATE('AUG 19 12')); 
```

是因为“dd/month”在组合时被认为是无效格式吗？

还是因为无法使用 IN 比较日期？

PS> 此时我无法访问 Oracle 数据库，这就是为什么我无法运行 sql 并得到确切的错误。我只知道声明无效，我想知道问题出在哪里。我是甲骨文的新手

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T20:25:43.837

除非您更改了会话/数据库参数，否则 TO_DATE 格式应为 dd-mon-yy 格式。TO_DATE 的第二个参数是传入的日期格式。

```
SELECT TO_CHAR(start_date,'DD/MONTH')
FROM Table1
WHERE start_date IN (TO_DATE('JUN 15 2012', 'MON DD YYYY'), TO_DATE('AUG 19 2012', 'MON DD YYYY')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:34:13.970

`TO_DATE`尝试以如下方法提供格式：

```
 SELECT TO_CHAR(start_date,'DD/Month')
 FROM Table1
 WHERE start_date IN (
         to_date('JUN 15 2012', 'MON DD YYYY'), 
         to_date('AUG 19 2012', 'MON DD YYYY')
 ); 
```

此外，如果您想用于`BETWEEN`查找日期范围内的所有记录，则：

```
 SELECT TO_CHAR(start_date,'DD/Month')
 FROM Table1
 WHERE start_date BETWEEN to_date('JUN 15 2012', 'MON DD YYYY')
                      AND to_date('AUG 19 2012', 'MON DD YYYY'); 
```

# c# - 从文件c#读取哈希表

> ID：13613714
> 
> 赞同：2
> 
> 时间：2012-11-28T20:21:50.720
> 
> 标签：c#

（在此 Windows 窗体应用程序中）我正在尝试将文件中的数据读取到哈希表中，并使用哈希表中的数据填充文本框，但是当我运行代码时，我总是抛出异常“项目已经已添加。在字典中键入：''正在添加的键：''“

初始代码：

```
string[] fileLines = File.ReadAllLines(@"C:path/ajand.txt");

foreach (string line in fileLines)
{
    // to split the first 9 chars in the string and use them as key values                
    string[] match = Regex.Split(line, line.Substring(0,9));
    hT.Add(match[0], line);
} 
```

所以我尝试使用以下代码检查关键重复项

```
 string[] fileLines = File.ReadAllLines(@"C:path/ajand.txt");

 foreach (string line in fileLines)
 {
     string[] match = Regex.Split(line, line.Substring(0,9));

     if(!hT.ContainsKey(match[0])) // to check duplicates
     hT.Add(match[0], line);            
 } 
```

但是当我运行程序时，相应的文本框没有填充“似乎”已添加到哈希表中的数据。请任何想法是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:59:48.403

如果我理解正确，您可以使用这样的功能：

```
public static Dictionary<string, string> LoadActivityLookup(string filePath) {
    const int KEY_LENGTH = 10;
    var newLookup = new Dictionary<string, string>();
    foreach (string line in File.ReadAllLines(filePath)) {
        if (line.Length < KEY_LENGTH) continue;
        string key = line.Substring(0, KEY_LENGTH);
        if (!newLookup.ContainsKey(key)) {
            string value = line.Substring(KEY_LENGTH);
            newLookup.Add(key, value);
        }
    }
    return newLookup;
} 
```

字典非常适​​合在大量键中重复查找键。但是，如果您只需要在集合中保存一堆键/值对以便以后可以遍历它们，那么我会使用 List<> 代替。

这是上述函数的一个版本，它使用 StreamReader 而不是将完整的文件加载到字符串数组中。

```
public static Dictionary<string, string> LoadActivityLookup(string filePath) {
    const int KEY_LENGTH = 10;
    var newLookup = new Dictionary<string, string>();
    using (StreamReader rdr = new StreamReader(filePath)) {
        string line = rdr.ReadLine();
        while (line != null) {
            if (line.Length < KEY_LENGTH) {
                line = rdr.ReadLine();
                continue;
            } 
            string key = line.Substring(0, KEY_LENGTH);
            if (!newLookup.ContainsKey(key)) {
                string value = line.Substring(KEY_LENGTH);
                newLookup.Add(key, value);
            }
            line = rdr.ReadLine();
        }
    }
    return newLookup;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-27T19:43:09.510

```
 public static Hashtable HashtableFromFile(string path)
    {
        try
        {
            using (FileStream stream = new FileStream(path, FileMode.Open))
            {
                BinaryFormatter formatter = new BinaryFormatter();
                return (Hashtable)formatter.Deserialize(stream);
            }
        }
        catch
        {
            return new Hashtable(); 
        }            
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T20:29:17.517

为了删除重复项，您可以简单地使用索引来添加/更新哈希表：

```
string[] fileLines = File.ReadAllLines(@"C:path/ajand.txt");

foreach (string line in fileLines)
{
    // to split the first 10 chars in the string and use them as key values                
    string key = line.Length > 10 ? line.Substring(0,10) : line;
    hT[key] = line;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T00:20:26.740

看看这是否有帮助。它假定日期和行的其余部分之间的分隔符是一个空格。它将尝试将日期解析为 DateTime 对象并将其用作键。它将使用该行的其余部分作为值。索引器用于将值放入字典这一事实消除了重复键的问题，但同时如果您有具有相同日期的条目，它将覆盖值。在这种情况下，只有具有该日期的最后一个条目将保存到字典中。

```
var lines = File.ReadAllLines(@"C:\path\ajand.txt");

foreach (var line in lines) {
    var index = line.Trim().IndexOf(" ");
    if (index == -1) {
        continue;
    }

    DateTime key;
    if (DateTime.TryParseExact(line.Substring(0, index), out key)) {
        hT[key] = line.Substring(index);
    }
} 
```

# xslt - 如何将xslt函数返回值设置为变量？

> ID：13613716
> 
> 赞同：2
> 
> 时间：2012-11-28T20:22:09.847
> 
> 标签：xslt

我需要进一步处理我生成的 xsl 值，如下所示：

```
<xsl:value-of select="adjust-dateTime-to-timezone(xs:dateTime('2006-02-15T17:00:00-03:00'), xs:dayTimeDuration('-PT7H'))" /> 
```

我想得到结果并只保留几个子字符串（3个子字符串操作）。

我怎样才能做到这一点？现在，上面的代码将结果转换为“2006-02-15T13:00:00-07:00”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T20:43:48.420

您可以将变量设置为函数返回的值，然后将该变量用于任何其他转换。

```
<xsl:variable name="result" select="adjust-dateTime-to-timezone(xs:dateTime('2006-02-15T17:00:00-03:00'), xs:dayTimeDuration('-PT7H'))" /> 
```

或者

```
<xsl:variable name="result">
    <xsl:value-of select="adjust-dateTime-to-timezone(xs:dateTime('2006-02-15T17:00:00-03:00'), xs:dayTimeDuration('-PT7H'))" />
</xsl:variable> 
```

接着

```
<xsl:value-of select="$result"/> 
```

# c++ - c++，reinterpret_cast 结构* 到 unsigned char*

> ID：13613721
> 
> 赞同：0
> 
> 时间：2012-11-28T20:22:38.763
> 
> 标签：c++, structure, reinterpret-cast

起初我很抱歉我的英语:) 所以，我有一个结构和变量

```
typedef struct
{
  GHEADER  m_Header;
  BYTE    *m_Buf;
  Addr    *m_Abonent;
}__attribute__((packed)) PACKET;

unsigned char* uc_ptr; 
```

我需要向某个函数发送无符号字符指针参数。我尝试使用`reinterpret_cast`将指针`PACKET`类型转换为`unsigned char*`.

```
PACKET* t_PACKET;
uc_ptr = reinterpret_cast<unsigned char*>(t_PACKET); 
```

但后来我尝试了

```
std::cout << *uc_ptr << std::endl; 
```

我什么都没看到。为什么？以及如何正确投射？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T20:28:33.447

当您使用`<<`输出 a时`char`，您会得到一个写入输出的字符。许多字符，如`\0`不会出现在控制台上。

试试这个，看看我的意思：

```
std::cout << static_cast<unsigned int>(*uc_ptr) << std::endl; 
```

您需要一个循环来获取结构中的所有字节。

# html - XML 我可以在标签名称中用 ( 和 ) 替换什么

> ID：13613731
> 
> 赞同：0
> 
> 时间：2012-11-28T20:23:01.757
> 
> 标签：html, xml, web-scraping

我正在抓取一些 HTML 并将数据放入 xml 文档中（本质上是一堆 <li><a>something</a></li> 标签。其中一些具有像这样的文本 <li><a>This是（东西）</a></li>

所以我的刮刀正在制作它 <This_is_(stuff)>，当我在浏览器中拉出 xml 时，它被拒绝了。我可以用什么代替 ( ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:47:24.743

呃。我只是把括号的内容放在一个属性中。自从我玩弄 XML 以来已经有一段时间了。

# perl - 在 perl 中创建和读取 tar.bz2 文件

> ID：13613737
> 
> 赞同：0
> 
> 时间：2012-11-28T20:23:31.673
> 
> 标签：perl, compression, tar

我一直在尝试使用

```
system("tar -jcvf archive_name.tar.bz2 $my_file") 
```

但我得到一个错误

> archive_name.tar.bz2：无法打开：没有这样的文件或目录 tar：错误不可恢复：现在退出 tar：子返回状态 2

在 perl 中使用此方法无法创建 .tar.bz2 吗？我宁愿不使用模块，但如果绝对必要，我会

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:35:49.687

首先，你不是*在 Perl 中*做的。您正在生成一个运行该命令的单独进程。

如果您想*在 Perl*中执行此操作，则需要使用[Archive::Tar](http://perldoc.perl.org/Archive/Tar.html)模块，可能还需要使用[IO::Compress::Bzip2](http://perldoc.perl.org/IO/Compress/Bzip2.html)模块。

首先是看看你是否可以直接从命令行运行这个命令：

```
$ tar -jcvf archive_name.tar.bz2 $my_file 
```

如果您不能从命令行运行 tar 命令，那么在 Perl 中使用该`system`命令就不太可能运行它。

您运行命令的方式，将命令和所有参数放在一个字符串中，导致 Perl 从 shell（通常`/bin/sh`）运行命令。如果您使用列表中的参数运行命令，Perl 将直接运行该命令而无需 shell：

```
my $error = system qw( tar -jcvf archive_name.tar.bz2 $my_file ); 
```

始终检查系统命令的输出以及`$?`. [系统](http://perldoc.perl.org/functions/system.html)命令文档有更多关于处理错误的信息。

# python - Python：如何创建一个新文件并将变量的内容写入其中？

> ID：13613738
> 
> 赞同：8
> 
> 时间：2012-11-28T20:23:31.503
> 
> 标签：python

我正在编写一个程序，通过查看它们的标题来输出目录中的文件类型。

一些文件是压缩的，所以我需要能够解压缩它们作为起点

到目前为止，我已经能够搜索目录并使用标题更改扩展名，打开压缩文件并将其内容存储在变量中，现在我无法将变量保存为新文件。

```
def unzip():
    os.chdir("C:/Users/David/Myfiles")
    files = os.listdir(".")
    for x in (files):
        f = open((x), "rb")
        byte1 = f.read(1)
        byte2 = f.read(1)
        if byte1 == b'\x1f' and byte2 == b'\x8b':
            os.rename((x), (x) + ".gz")
            file = gzip.open((x), "rb")
            content = file.read()   
            print (content) 
```

我猜我将不得不按照`f.write("newfile", content)`但不确定的方式使用 a 命令。

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T20:27:48.137

通常，如果变量中有一个字符串，`foo`则可以将其写入文件：

```
with open('output.file','w') as f:
    f.write(foo) 
```

在你的情况下，你不会使用`f`你已经在使用`f`你的*输入*文件句柄。

我想你会想要这样的东西：

```
def unzip():
    os.chdir("C:/Users/Luke/Desktop/Cache")
    files = os.listdir(".")
    for x in (files):
        ifh = open((x), "rb")
        byte1 = ifh.read(1)
        byte2 = ifh.read(1)
        if byte1 == b'\x1f' and byte2 == b'\x8b':
            os.rename((x), (x) + ".gz")
            file = gzip.open((x), "rb")
            contents = file.read()   
            with open('output.file','w') as ofh:
                ofh.write(contents) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:29:24.680

您应该执行以下操作：

```
with open('filename.whatever', 'wb') as output:
    output.write(your_data) 
```

[在http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files](http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files)查看文档

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T20:36:08.183

您不必查看前两个字节来识别 gz 文件。相反，我认为更“Pythonic”的方法是先尝试，然后道歉（通常称为[“更容易请求宽恕而不是许可”](http://docs.python.org/2/glossary.html#term-eafp)）：

```
import os
import bz2
import gzip

def write(filename, content):
    with open(filename, 'w') as g:
        g.write(content)

def uncompress(dirpath):
    for filename in os.listdir(dirpath):
        filename = os.path.join(dirpath, filename)
        for opener in (gzip.open, bz2.BZ2File):
            try:
                with opener(filename) as f:
                    newfile, ext = os.path.splitext(filename)
                    content = f.read()
                os.unlink(filename)
                write(newfile, content)
            except IOError:
                continue
            else: # break if try worked without IOError        
                break

dirpath = "C:/Users/Luke/Desktop/Cache"
uncompress(dirpath) 
```

此外，如果可能，最好避免使用`os.chdir`，因为即使您离开该`uncompress`功能，它也会改变当前目录。如果您的脚本处理其他目录，那么您必须在程序的每个阶段仔细控制当前目录是什么。如果您`os.path.join`改用，您永远不必担心当前目录是什么。

# c# - 从 PagedCollectionView 获取泛型类型的集合

> ID：13613740
> 
> 赞同：0
> 
> 时间：2012-11-28T20:23:40.910
> 
> 标签：c#

假设我有一个 ItemType 的 PageCollectionView，其中 T 是项目中定义的某个用户类。我的 ItemType 类有一个名为 IsSelected 的属性，我想对其执行查询。实际上，这就是我想要做的：

```
var objects = Source.SourceCollection.OfType<ItemType<>>().Where(t => t.IsSelected); 
```

当然这不起作用，因为 ItemType 泛型需要一个类型。我无法指定集合的​​真实类型，因为我在这个级别不知道它（另外我不想硬编码真实类型，违背了拥有泛型的目的）。最有可能的是，我可以找到一种使用反射的方法，但我宁愿不考虑可读性。有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:10:12.423

为什么不定义接口？

```
public interface ISelectable
{
   pubilc bool IsSelected { get; }
}

public class ItemType<T> : ISelectable
{
   ...
}

var objects = Source.SourceCollection
   .OfType<ISelectable>()
   .Where(t => t.IsSelected); 
```

# php - sql/php syntax error, unexpected T_ENCAPSED_AND_WHITESPACE, expecting

> ID：13613741
> 
> 赞同：-5
> 
> 时间：2012-11-28T20:23:40.420
> 
> 标签：php, syntax

I got error on line 16 in myphp page which is;

```
$result = mysql_query("update Users set lat='$lat',lon='$lng' where username=$_SESSION['username']"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:26:05.373

You need curly braces `{}` inside of the string to return array parts:

```
$result = mysql_query("update Users set lat='$lat',lon='$lng' where username={$_SESSION['username']}"); 
```

**Note:** As has already been mentioned, you shouldn't be using `mysql_query`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:27:44.877

Although mysql_* functions are being deprecated here is the error on your query:

```
$result = mysql_query("update Users set lat='$lat',lon='$lng' where username=".$_SESSION['username']); 
```

Also make sure your inputs are sanitized before being used in your query:

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T20:28:27.077

You lost track of all needed `'` and additionally forgot to quote username value. So instead of

```
$result = mysql_query("update Users set lat='$lat',lon='$lng' where username=$_SESSION['username']"); 
```

do this in more clean manner:

```
$result = mysql_query( "update Users set lat='$lat',lon='$lng' where username='" . $_SESSION['username'] . "'"); 
```

or even better:

```
$query = sprintf("update Users set lat='%s',lon='%s' where username=%s"), 
         $lat, $lng, $_SESSION['username']);
$result = mysql_query($query); 
```

BTW: switch to MYSQLi or PDO as MYSQL extension is **deprecated**, no new code should touch it.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T20:29:09.920

You have multiple problems, but the error relates to variable expansion with your [double quoted string](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.double).

**Error:**

```
echo "$_SESSION['username']"; 
```

**No Error:**

```
echo "{$_SESSION['username']}"; 
```

**Alternatives:**

```
echo "..." . $_SESSION['username'] . "...";
echo '...' . $_SESSION['username'] . '...'; 
```

Read the documentation on [Strings](http://www.php.net/manual/en/language.types.string.php) to determine how you want do handle variable expansion in strings.

I'd also recommend reading about [SQL Injection](http://php.net/manual/en/security.database.sql-injection.php) and [PDO](http://php.net/manual/en/book.pdo.php).

# web - 我的网站在未经我允许的情况下展示了一些奇怪的广告

> ID：13613742
> 
> 赞同：0
> 
> 时间：2012-11-28T20:23:42.210
> 
> 标签：web

首先很抱歉问了这么愚蠢的问题。我有一个网站，即 www.assameseonline.com。它正在显示某种广告。因为我已经清除了我网站上的所有数据并删除了所有内容。仍然显示此添加。index.php 页面是完全空白的。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:25:43.207

检查您的`.htaccess`文件...通常在底部。如果它不存在，请与您的网络主机检查，看看是否有`.htaccess`文件上传到根级别以上......我会花钱的，这是罪魁祸首

# jquery - 如何根据 jquery 中的唯一 ID 将我的 div 映射到链接？

> ID：13613743
> 
> 赞同：0
> 
> 时间：2012-11-28T20:23:42.927
> 
> 标签：jquery

对于这个 html：

```
<a href="#" id="link-23">User 23</a>
<a href="#" id="link-24">User 24</a>

<div id="user-23">Bob</div>
<div id="user-24">Tim</div> 
```

我试图弄清楚如何编写脚本（使用jquery）来切换点击`div#user-23`时间的可见性`a#link-23`？

**注意：**我在 Rails 中编码，上面的代码是我的脚本的 html 输出。我在脚本中使用迭代器来创建这些 div 和链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:28:50.513

```
$('a').click(function(e){
   e.preventDefault();
   var n = this.id.match(/\d+/g).join('');
   $('#user-' + n).toggle(); 
}) 
```

[http://jsfiddle.net/kEP4d/](http://jsfiddle.net/kEP4d/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:26:20.407

使用该 HTML，我建议：

```
$('a').click(
    function(){
        $('#' + this.id.replace('link', 'user')).toggle();
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/VFq9J/)。

但是，如果您使用该`href`属性来定位相关元素，您可以只使用 CSS（至少在兼容的浏览器中）：

```
<a href="#user-23" id="link-23">User 23</a>
<a href="#user-24" id="link-24">User 24</a>

<div id="user-23">Bob</div>
<div id="user-24">Tim</div>​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/VFq9J/1/)。

参考：

*   [`:target`伪选择器的兼容性信息](http://www.quirksmode.org/css/contents.html#t316)。
*   [`toggle()`](http://api.jquery.com/toggle/).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T20:45:51.383

这应该这样做：

```
$("a[id^='link']").each(function() {
      $(this).click(function() {
          var idnum=$(this).attr("id").replace("link-", "");
          $("div#user-"+idnum).toggle();
      });
  }); 
```

[JS小提琴](http://jsfiddle.net/SHdhr/23/)

# java - 如何在 java 中使用 org.json.JSONObject 将值设置为 null？

> ID：13613754
> 
> 赞同：75
> 
> 时间：2012-11-28T20:24:37.663
> 
> 标签：java, json

如何在 java 中使用 org.json.JSONObject 将值设置为 null？我当然可以通过使用 isNull 读取一个值是否为 null - 但似乎当我输入 null 时，它只是忽略了我：

```
JSONObject o = new JSONObject();
o.put("key",null);
o.isNull("key"); // returns true, buuuut...
o.has("key");    // returns false
o.isNull("somethingIHaventSetAtAll");    // also returns true, unfortunately 
```

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2012-11-28T20:27:16.960

尝试设置[`JSONObject.NULL`](http://developer.android.com/reference/org/json/JSONObject.html#NULL)而不是`null`：

> 用于显式定义没有值的名称的标记值。与 null 不同，具有此值的名称：
> 
> *   出现在 names() 数组中
> *   出现在 keys() 迭代器中
> *   对 has(String) 返回 true
> *   不要抛出 get(String)
> *   包含在编码的 JSON 字符串中。
> 
> 该值与 null 相比返回 true，从而违反了 equals(Object) 的一般约定。它的 toString() 方法返回“null”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-21T16:58:34.553

对我来说[net.sf.json.JSONObject](http://json-lib.sourceforge.net/apidocs/jdk15/net/sf/json/JSONObject.html)我需要`JSON`通过

```
new JSONObject(true) 
```

这就是我进入 groovy 的方式：

```
groovy.grape.Grape.grab(group: "org.kohsuke.stapler", module: "json-lib", version: "2.4-jenkins-2") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-22T12:04:07.853

我创建了这个项目[https://github.com/leonardofel/JSON-java-put-null-fix](https://github.com/leonardofel/JSON-java-put-null-fix)

要更改（或修复），只需将库导入您的 pom.xml

这就是您的代码的行为方式：

```
JSONObject o = new JSONObject();
o.put("key", null);
o.isNull("key"); // returns true
o.has("key"); // returns true
o.isNull("somethingIHaventSetAtAll"); // returns true
o.get("key"); // returns null

o.remove("key");
o.isNull("key"); // returns true
o.has("key"); // returns false
o.isNull("somethingIHaventSetAtAll"); // returns true
o.get("key"); // throws JSONException "key" not found 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-13T14:34:54.220

创建一个实用程序类，或者如果您已经有一个现有的，只需在其中创建此实用程序方法。

```
 class JsonObjectUtility{
           public static Object getJSONObjectValue(Object value)  {
              return value == null ? "null" : value;
           }
 } 
```

然后通过此实用程序传递所有输入，然后将其传递给 JSONObject put 方法，如下所示：（我将使用问题中的代码示例）

```
JSONObject o = new JSONObject();
o.put("key", JsonObjectUtility.getJSONObjectValue(null) ); 
```

这将打印一个 json 字符串，如下所示

> {“键”：空}

# android - Android 根据父视图大小调整 XML 中的视图大小

> ID：13613764
> 
> 赞同：0
> 
> 时间：2012-11-28T20:25:05.853
> 
> 标签：android, xml, layout

我知道下面的 XML**行不通**，但是有什么方法可以达到同样的效果吗？

```
....
<LinearLayout
    android:layout_width="match_parent * 5"
    android:layout_height="match_parent" />
.... 
```

解释一下，我想要达到的效果是使子布局的大小是其父布局的 X 倍，其中 X 是浮点数。在 XML 示例中，我使用了 5。

我试图使用它创建的效果是让 ScrollView 的大小为 Y 并且它的内容视图的大小为 Y * X。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:42:03.897

据我所知，没有办法通过 XML 布局来实现这一点。您可以在活动中添加以下代码以更改子视图的高度。请注意，一旦 android 完成了活动布局，视图的大小就知道了。因此，您可以添加一个侦听器以了解布局何时准备好并且所有尺寸都已知。我同意 Syed Zahid Ali 的观点，即您不能将较大的孩子放在较小的父母中，但就 ScrollView 而言，此代码应该可以工作：

```
final ViewGroup parentView = findViewById(R.id.parentView);
    final View childView = parentView.findViewById(R.id.childView);

    parentView.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
            float parentHeight = parentView.getHeight();

            ViewGroup.LayoutParams params = childView.getLayoutParams();
            params.height = (int)(parentHeight * 5);

            childView.setLayoutParams(params);
            //We want the listener to be called only the first time(in case it is initialized in onCreate())  
            parentView.getViewTreeObserver().removeGlobalOnLayoutListener(this);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:37:19.897

你怎么能让孩子适应较小的父母，即使通过编程也是不可能的。

如果你愿意，首先你的父视图必须具有“wrap_content”属性，如果是，那么你不能做 X*5 的事情。

所以，你说的是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T21:51:49.493

如果您知道父级大小，您可以在 layout_width 中为子级指定 px/dp/dip/sp 值。实际上，我会推荐这种方法，因为它更简单，并且发生爆炸的可能性更小。

否则，您实际上可以在父视图调用 onDraw() 后获取以像素为单位的宽度/高度。有人说 getWidth 和 getHeight 适用于 onWindowFocusChanged 调用，我之前已经成功地使用它来测量视图。

但是，您确实冒着混乱的风险，因为如果子视图正在测量父视图，则子视图可以扩展，从而使您有机会扩展父视图（尽管 match_parent 可能会阻止这种情况）。然后你将孩子的大小调整为比父母大，然后你测量父母的大小，它扩大了。所以，你会陷入一个循环，孩子试图比父母大，父母调整大小以适应孩子，孩子进一步扩大。

# scala - 定义子类函数时遇到问题

> ID：13613776
> 
> 赞同：0
> 
> 时间：2012-11-28T20:25:41.910
> 
> 标签：scala

我有以下抽象类：

```
abstract class Accessor {

  def get(rowkey:String): Option[M2mModel]
  def insertNew(model: M2mModel): Option[M2mModel]

}

abstract class Model(active:Int) {

  @BeanProperty
  var ttl = None

} 
```

我的实现类是：

```
object AccountModel {
  val COL_USERNAME = "username"
  val COL_EMAIL = "email"
  val COL_PASSWORD = "password"
  val COL_DOMAIN = "domain"
  val COL_ACTIVE = "active"
  val COL_ROLE = "role"
  val COL_ACLID = "aclid"

  val definedFields = List(COL_USERNAME, COL_EMAIL, COL_PASSWORD, COL_DOMAIN, 
    COL_ACTIVE, COL_ROLE, COL_ACLID)

  def apply(rowkey:String, email:String, password:String) = new AccountModel(rowkey, email, password) 

}

case class AccountModel(rowkey: String, email:String, password: Option[String], 
  username: Option[String], domain: Option[String],
  role: Option[String], active: Int, aclid: Option[String]) extends M2mModel(active) {

  def this(rowkey:String, email:String, password:String) = this(rowkey, email, Some(password),
      None, None, None, 1, None)

} 
```

当我创建 Accessor 类并实现 insertNew 方法时，出现以下错误：无法创建对象，因为类型为 (model: package.Model)Option[package.Model] 的 Accessor 类中的方法 insertNew 未定义（请注意 package.型号与 package.AccountModel 不匹配）

这是我的实现类

```
object AccountAccess extends Accessor {
 def insertNew(model: AccountModel): Option[AccountModel] = {

    ...do stuff
} 
```

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:33:47.733

这里的问题是该`insertNew`方法需要 M2mModel 类型的东西，并且只能通过解析为相同签名的方法来实现。

在 Scala 中，我们可以通过两种方式解决这个问题。

### 类型参数化

我们可以将 Accessor 视为一个泛型类，它与扩展 M2mModel 的 T 类型的东西一起工作：

```
abstract class Accessor[T <: M2mModel] {
    def get(rowkey:String): Option[T]
    def insertNew(model: T): Option[T]
} 
```

`AccountAccess`并像这样扩展：

```
object AccountAccess extends Accessor[AccountModel] {
    def insertNew(model: AccountModel): Option[AccountModel] = {
        ???
    }

    def get(rowkey: String) = ???
} 
```

### 抽象类型成员

我们可以认为`Accessor`是一个在其实现中处理`T`扩展的抽象类型的对象的类`M2mModel`：

```
abstract class Accessor {

    type T <: M2mModel

    def get(rowkey:String): Option[T]
    def insertNew(model: T): Option[T]

} 
```

在这种情况下，扩展类`AccountAccess`应该指定这个类型`T`应该是什么：

```
object AccountAccess extends Accessor {

    type T = AccountModel

    def get(rowkey: String) = ???

    def insertNew(model: AccountModel) = ???
} 
```

就个人而言，我确实相信第二种选择是更好的方法。

你可以在这里找到一个非常有趣的讨论：

[Scala：抽象类型与泛型](https://stackoverflow.com/questions/1154571/scala-abstract-types-vs-generics)

请务必阅读它，因为它将帮助您在将来以非常优雅和模块化的方式解决此类问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:41:13.670

我认为您正在缩小对象中 insertNew 的范围，因此它不再满足它的要求。您的 insertNew 方法只能接受大于`M2mModel`不能更低的类。

这应该有效：

```
 def insertNew(model: M2mModel): Option[M2mModel] 
```

还有这个：

```
 def insertNew(model: Any): Option[Any] 
```

想象一下，如果您将此对象传递给只知道 M2mModel 而不知道 AccountModel 的东西。函数 insertNew 只需要 AccountModel，因此另一个 M2mModel 将无法工作。

# php - 将 JavaScript 变量传递给 PHP 时遇到问题

> ID：13613786
> 
> 赞同：-4
> 
> 时间：2012-11-28T20:26:11.897
> 
> 标签：php, javascript, variables

我的问题的解决方案现在似乎非常基本。尽管我了解 php 在服务器端运行，但我不知道 php 在页面加载时运行，即使包含位于 ajax 回调中也是如此。虽然我可以通过在 javascript value 属性中返回 php 来显示查询结果，但如果我没有包含对 php 脚本的引用，我会收到未终止的字符串错误。我现在意识到的是（我认为）包含导致 php 在 ajax 被触发之前运行，这就是为什么 php 对未定义的索引大喊大叫的原因。将 ID 硬编码到 php 中会运行良好，因为它不需要 ajax 中的任何东西来运行查询。删除回调中的 include 会导致未定义的文字错误，因为没有任何可引用的 php 中断导致解析器看到 .value = " 字面上未终止。通过删除 php 包含并通过 JSON 返回查询结果，一切正常。似乎我的路障被困在我如何学会将 php 数据返回到 html 上。无论如何，有价值和有用的教训......

该应用程序将提取日志数据，进行修改并保存为新的或更新的日志文件。ajax 向 php 脚本发送一个 ID 以进行查询以获取旧信息并填充每个行单元格。第二个单元格 (act-col) 根据第一个单元格 (reg-col) 中的选择动态加载。为了让用户不仅可以查看旧信息，还可以进行更改，需要进行第二次 ajax 调用以获取正确的选项。然后清空已经存在的所有内容并加载新选项。这也确保定义了选择框，因为最初，直到将某些内容放入 reg-col 单元格中，act-col 单元格基本上是一个空框。之后，其余单元格将加载旧信息，创建一个新行并循环遍历，直到显示所有信息。将添加行函数放在循环的底部会导致添加额外的行，但是当循环完成时，我发现使用 javascript 删除它实际上会触发所有发生的数学函数，就好像用户从头开始创建日志一样。可能不是最好的解决方案，但可以避免在初始按钮单击时从另一个表中提取数据来填充这些字段。

现在我更好地理解了它，我可以清楚地看到所有指向我的建议。哦，好吧......不是第一次，当然也不是最后一次那个后网站让我感到谦卑（和羞辱）。这是最终奏效的方法：

这是javascript/jquery：

```
$(function(){
            $.ajax({
                  type:'POST',
                   url: 'phpScripts/lastSession.php',
              dataType: 'json',
                  data: {'id': pt_id},
                 cache:false,
               success:function(data){

        for(var j=0; j<data.length; j++){            

                    var reg=data[j].region;
                    $(".reg-col:eq("+j+")").val(reg);

                        if ((reg)==="knee/hip"){  $(function(){ $.ajax({
                                    url: 'phpScripts/getKneeHip.php',
                                    dataType: 'json',
                                    cache:false,
                                    async:false,
                                    success: function (json) {
                                        $(".act-col:eq("+j+")").empty().end();
                                        $.each(json, function(i, value) {
                                            $('<option>').text(value).attr('value', value).appendTo( $(".act-col:eq("+j+")"));

                                        });
                                    }
                                });
                            });
                        }//end if

                        else if ((reg)=="shoulder"){  $(function() { $.ajax({
                                    url: 'phpScripts/getShoulder.php',
                                    dataType: 'json',
                                    cache:false,
                                    async:false,
                                    success: function (json) {
                                        $(".act-col:eq("+j+")").empty().end()
                                        $.each(json, function(i, value) {
                                            $('<option>').text(value).attr('value', value).appendTo( $(".act-col:eq("+j+")"));

                                        })
                                    }
                                });
                            });

                        }//end if

                                            $(".act-col:eq("+j+")").val(data[j].activity);
                                            $(".reps-col:eq("+j+")").val(data[j].reps);
                                                   $(".weight-col:eq("+j+")").val(data[j].weights);
                                                   $(".prps-col:eq("+j+")").val(data[j].purposes);
                                                   $(".time-col:eq("+j+")").val(data[j].time);
                                                   $(".type-col:eq("+j+")").val(data[j].type);

                        addRow('dataTable');

          }
        document.getElementsByName("chk[]")[j].checked=true;
        document.getElementById('deleteBtn').click(); 
```

这是php：

```
 $ID = $_POST['id'];
  $return = array(); 
  $query = mysql_query("SELECT * FROM history WHERE patient_id = '$ID' AND date_of_service IN (SELECT MAX(date_of_service) FROM history WHERE patient_id = $ID)"); 
while ($row = mysql_fetch_array($query,MYSQL_ASSOC)) { 
array_push($return,array('region'=>$row['region'],'activity'=>$row['exercise'], 'reps'=>$row['reps'], 'weights'=>$row['weight'], 'purposes'=>$row['purpose'], 'time'=>$row['time'], 'type'=>$row['type'])); 
 } 
  header('Content-type: application/json');
  echo(json_encode($return)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:36:58.397

您正在尝试`phpScripts/lastSession.php`在客户端上执行服务器端脚本，这显然是行不通的。我并不完全清楚您希望在那里发生什么，但您似乎希望该脚本作为您的 ajax 调用的一部分执行。

# java - 这是ButtonGroup的影响吗？

> ID：13613787
> 
> 赞同：2
> 
> 时间：2012-11-28T20:26:14.720
> 
> 标签：java, swing, jtogglebutton

我已将 JToggleButton 添加到 ButtonGroup。

然后我不能再单击一次来取消选择这个 ToggleButton。

我很确定 JToggleButton 可以通过单击它来取消选择。

有什么简单的方法可以让 Button 正常工作吗？

Basic ButtonGroup 工作正常（单击 B 并取消选择 A）。

但是我想要的是选择A时，可以再次单击它来取消选择。

简而言之，我希望这两种情况都有效。

A选中-->点击B-->A未选中

A selected--> click A --> A unselected (Normal JToggleButton)

![在此处输入图像描述](../Images/f267599a853085e6577adad8fda1a6bf.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T20:37:16.380

简而言之，是的......没有`ButtonGroup`一切都按预期工作，但是：

> 您通常应该初始化一组单选按钮，以便选择一个。但是，API 不强制执行此规则 - 一组单选按钮不能有初始选择。一旦用户做出选择，从那时起，恰好一个按钮被选中。

所以基本上唯一一次不能`JToggle`选择按钮是在启动时。选择一分钟后，我们只能更改所选内容，不能取消选择所有内容。如果我们从逻辑上考虑它是有道理的，想象我们有 2 个选项*是*或*否*......当时必须选择/执行至少一个选项。或者您必须添加更多替代方案，例如*yes*、*no*并且*仍在思考*（愚蠢的示例，但我不擅长解释）。

但总有一种解决方法：

不支持取消选择所有按钮的 API。但是，如果您真的想取消选择所有按钮（不建议这样做），调用 `setSelected(null, true)`应该`ButtonGroup`可以解决问题。

**参考：**

*   [http://docs.oracle.com/javase/tutorial/uiswing/components/button.html](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)
*   [http://www.tek-tips.com/viewthread.cfm?qid=1154515](http://www.tek-tips.com/viewthread.cfm?qid=1154515)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T21:13:09.947

您可能会在两个按钮的取消选择事件上执行一个`ButtonGroup.clearSelection()`但随后，您可以省略 ButtonGroup（误用？）并简单地听选择状态。

# java - 来自 svg 的 getelementbyId 是 id ="'@data[]"

> ID：13613788
> 
> 赞同：2
> 
> 时间：2012-11-28T20:26:16.867
> 
> 标签：java, javascript, dom, svg, getelementbyid

我在绘制我的 SVG 的 while 循环中从 SQL 加载数据。在我的数据中，每条记录都有自己的 ID。

我正在尝试通过 getelementbyId 加载 ID，但一直返回空值。

这是我的代码。

```
#!/usr/bin/perl
use DBI;
use CGI::Carp qw(fatalsToBrowser);
print "content-type: text/html\n\n";
print "Content-Type: image/svg-xml\n\n" ;
$dbh = DBI->connect ('dbi:Oracle:******','*****','*****')
|| die "database connection not made: $DBI::errstr";

$sth = $dbh->prepare("SELECT Find_id, xcoord, ycoord, gisteach.finds.type, gisteach.class.type, depth, name, period, use FROM GISTEACH.finds, GISTEACH.class where gisteach.finds.type = gisteach.class.type");
$sth->execute();

$sth1 = $dbh->prepare("SELECT lowx, hix, lowy, hiy, Field_id, owner, GISTEACH.FIELDS.crop, GISTEACH.crops.crop, name from GISTEACH.FIELDS, gisteach.crops where gisteach.crops.crop = gisteach.fields.crop");
$sth1->execute(); 

print qq(<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20001102//EN"
  "http://www.w3.org/tr/2000/cr-svg-20001102/DTD/svg-20001102.dtd">);  
print qq(<svg width="20cm" height="20cm" viewBox="-1 -18 20 20" onload="getid(ID)">);

print qq (<script type="text/ecmascript">);
print qq (<![CDATA[  

  // with out this (onload) i still have teh same issue.
  function getid(ID){ 
  (document.getElementById('ID'));
   }
  function MakeTransparent(evt) {
      evt.target.setAttributeNS(null,"opacity","0.5")
    }
  function MakeOpaque(evt) {
      evt.target.setAttributeNS(null,"opacity","1")
    }   

  function buttonClick(){
      var type = document.getElementById('ID');
      var data = type.getAttribute('d')
      var data2 = type.getAttribute('d2')
      var data3 = type.getAttribute('d3')     
      alert ("This Find can be placed in the: " + data2 + " age. In which its primary use was; " + data3 );
    }

    function buttonClick2() {  
      var type = document.getElementById('ID')             
      var data1 = type.getAttribute('b')
      var data2 = type.getAttribute('c')

      alert ("Owner of this field is: " + data1 + "  Where " + data2 + " are growing" );
    }
    ]]>);   
print qq (</script>);

while (@data = $sth1->fetchrow_array()) {

print qq(    
  <g transform="scale(1,-1)" > 
      <polygon points="$data[0],$data[2] $data[1],$data[2] $data[1],$data[3] $data[0],$data[3]" 
        fill="green"  
           ID="$data[4]"  
             b="$data[5]"
              c="$data[8]"
                opacity="1"
              stroke="black" 
            stroke-width="0.05"
         onmouseover="MakeTransparent(evt)" 
       onmouseout="MakeOpaque(evt)" 
    onmouseup="buttonClick2()"/>      
   </g>                                   
  );    
}
while (@data = $sth->fetchrow_array()) {
print qq(  
    <g transform="scale(1,-1)"  >
       <circle           
         ID="$data[0]" 
          cx="$data[1]"        
            cy="$data[2]" 
              r="0.17"
            d="$data[6]"
          d2="$data[7]"
        d3="$data[8]"                
      fill="red"
     onmouseup="buttonClick()"/>

</g>    
  ); 
 }  enter code here 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:28:28.933

```
function getid(ID){ 
    (document.getElementById('ID'));
} 
```

应该成为

```
function getid(ID){ 
    return document.getElementById(ID);
} 
```

否则，您只是在寻找一个 id 值为 'ID' 的元素

# android - 选择项目后如何完全折叠 SearchView？

> ID：13613791
> 
> 赞同：30
> 
> 时间：2012-11-28T20:26:21.520
> 
> 标签：android, android-actionbar, searchview

我已经为此苦苦挣扎了好几个星期。我有一个全局搜索，它提供了一个自定义列表视图，并在用户键入时提供了建议。当用户选择一个选项时，我希望搜索视图返回到完全折叠的状态。

![在此处输入图像描述](../Images/1cf1172f4d5e16ffc51fecbcb4822091.png)

相反，它会缩小但保持在稍微扩大的视图中。

![在此处输入图像描述](../Images/a43511bb66e33e75740ba9a9a34dcf81.png)

我已经把我能找到的所有东西都扔到这个东西上来关闭它，但我一辈子都找不到正确的方法。这是功能：

```
 final SearchView.OnCloseListener closeListener = new SearchView.OnCloseListener() {

        @Override
        public boolean onClose() {
            return closeSearch();
        }
    };

    protected boolean closeSearch() {
    _searchView.clearFocus();
    _searchView.setQuery("", false);
    _searchView.setFocusable(false);
    _searchMenuItem.collapseActionView();
    isSearchFragmentVisible(false);
    return false;
} 
```

当从自定义“建议”列表视图中选择项目时，手动调用关闭搜索。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-02-06T00:11:12.573

而不是调用`_searchView.onActionViewCollapsed()`call `menuItem.collapseActionView()`where `_searchView = menuItem.getActionView()`。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-12-03T22:19:34.520

找到了。调用应该是`_searchView.onActionViewCollapsed()`。为什么你称之为“听众”风格的方法（即，以'on'开头的方法）超出了我的范围。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-08-26T13:45:52.163

@sebastian 这实际上是不对的。

我在这个问题上被困了一段时间，但最后我设法以正确的方式处理它。您应该调用***menuSearch.collapseActionView();*** 反而。此方法将调用您可以覆盖的*onActionViewCollapsed 。*所以你不要打电话给听众;）

```
MenuItem menuSearch = menu.findItem(R.id.itemSearch);
SearchView searchView = (SearchView) menuSearch.getActionView();
//Don't use next line
//searchView.onActionViewCollapsed();
menuSearch.collapseActionView(); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-02-26T07:01:36.180

如果您使用的是**Toolbar (android.support.v7.widget.Toolbar)**和相应的**SearchView (android.support.v7.widget.SearchView)**，则可以：

```
 searchView.setQuery("", false);
    searchView.clearFocus();
    searchView.setIconified(true); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-03-15T22:03:04.027

您应该清除搜索，移除焦点，然后调用：

```
searchView.setIconified(true); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-09-07T08:47:17.583

这对我有用，它还默认关闭了键盘

```
MenuItemCompat.collapseActionView(menuItem); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-01-21T11:08:27.670

```
searchView.setIconified(true); // Call this twice
searchView.setIconified(true); 
```

这个对我有用。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-06-16T10:06:33.677

这对我有用`searchMenuItem.collapseActionView();`

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-12-18T23:33:53.630

[根据最新的文档](https://github.com/android/platform_frameworks_support/blob/469286122bcbbecbdd0bef74fb50f9d8920e77b9/v7/appcompat/src/android/support/v7/widget/SearchView.java#L234)和[源代码](https://github.com/android/platform_frameworks_support/blob/469286122bcbbecbdd0bef74fb50f9d8920e77b9/v7/appcompat/src/android/support/v7/widget/SearchView.java#L1151)**iff** ，返回`false`应该已经足够了。 **`iconifiedByDefault == true`**

 **您是否有任何机会定义`iconifiedByDefault="false"`或调用`setIconifiedByDefault(false)`？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-09-23T17:50:04.283

我已将“开始”按钮更改为“下一步”，因此唯一对我有用的方法（在 API 19 上） 是`closeBtn.performClick();` `closeBtn.performClick();` 在. 你可以得到这样的：`OnEditorActionListener``AutoCompleteTextView``AutoCompleteTextView`

```
LinearLayout linearLayout1 = (LinearLayout) searchView.getChildAt(0);
LinearLayout linearLayout2 = (LinearLayout) linearLayout1.getChildAt(2);
LinearLayout linearLayout3 = (LinearLayout) linearLayout2.getChildAt(1);
AutoCompleteTextView autoComplete = (AutoCompleteTextView) linearLayout3.getChildAt(0); 
```**

# html - 使电子邮件可作为网页查看

> ID：13613794
> 
> 赞同：0
> 
> 时间：2012-11-28T20:26:53.013
> 
> 标签：html, json, email, html-email

我已经发了一封电子邮件，但它当然不会在所有电子邮件程序中正确显示。要制作其中一个“电子邮件显示不正确？在线查看”链接，我是否应该在每次用户下订单（生成电子邮件）时在我的电子邮件服务器上保存一份副本（其中包含用户特定的动态内容），所以我可以给`<a>`标签一个带有一些唯一标识符的href吗？或者我应该以某种方式包含我从电子邮件中发送电子邮件的原始 JSON 字符串（隐藏输入或其他内容），并以某种方式将其传递给可以解析它然后正确显示的通用页面？我什至不确定这是否可能。这是一个非常非常长的字符串。

感谢您的输入！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:28:03.120

你的第一个预感听起来很理想。

在某处在线托管电子邮件，将“在线查看”链接到该页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:36:30.760

正如您所知道的，这里有一个很棒的网站[，](http://inlinestyler.torchboxapps.com/styler/)它将外部样式表和内部样式表转换为内联样式，并让您知道 css 与不同的移动电子邮件客户端的兼容性。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T20:34:20.147

使用特殊设计的电子邮件是有风险的。有太多的电子邮件客户端/服务，几乎不可能制作真正兼容的电子邮件版本。

这就是为什么您应该仔细设计您的电子邮件并使其尽可能简单（当然不会破坏用户体验）。

无论如何，为确保每个人都能正确看到它，您应该为外部 html 页面添加“在线查看”链接。JSON 方法无关紧要。

# spring-security - org.springframework.security.ui.AbstractProcessing 过滤器去哪儿了？

> ID：13613800
> 
> 赞同：1
> 
> 时间：2012-11-28T20:27:13.143
> 
> 标签：spring-security, spring-webflow

我正在将遗留应用程序从 Spring Security 2.x 迁移到 3.x。部署我的 .jsp 时，出现以下错误：

14:49:01,333 错误 [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/tic].[jsp]] servlet jsp 的 Servlet.service() 抛出异常：org.apache .jasper.JasperException：无法为 JSP 编译类：

生成的java文件第6行出现错误只能导入一个类型。org.springframework.security.ui.AbstractProcessing 过滤器解析为一个包

生成的java文件第7行出现错误只能导入一个类型。org.springframework.security.ui.webapp.Authenticat ionProcessingFilter 解析为一个包

生成的java文件第8行出现错误只能导入一个类型。org.springframework.security.AuthenticationExcepti on 解析为一个包

在有问题的 .jsp 中，我有以下内容：

问题是这些类在 3.0 中不再存在。所以，我的问题是，他们去了哪里，或者在 3.0 中有更好的方法来做这些事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:16:30.737

**在 Spring 3.x 中**

对于错误行：6 和 7：

`org.springframework.security.ui.AbstractProcessingFilter`
**到**
`org.springframework.security.web.authentication.AbstractProcessingFilter`。
但是，它已被弃用。所以使用这个
`org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter` [javadoc](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/AbstractAuthenticationProcessingFilter.html)

对于错误行：8

`org.springframework.security.AuthenticationException`
**到**
`org.springframework.security.core.AuthenticationException` [javadoc](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/core/AuthenticationException.html)

我希望这有帮助！

# c++ - BB10 QNX Momentics IDE 中的 SSL 握手失败

> ID：13613801
> 
> 赞同：11
> 
> 时间：2012-11-28T20:27:14.753
> 
> 标签：c++, ssl, blackberry-10, sslhandshakeexception, blackberry-qnx

我正在尝试连接到使用 SSL 的 Web 服务。我正在使用带有 QNX IDE Momentics 的 C++ 中的 Blackberry 10。我试图做的连接如下：

网址：“https://movilapi....”

代码：

```
networkAccessManager = new QNetworkAccessManager(this);
    bool res = connect(networkAccessManager, SIGNAL(finished(QNetworkReply*)),
            this, SLOT(requestFinished(QNetworkReply*)));

    Q_ASSERT(res);
    Q_UNUSED(res);

    QNetworkRequest request = QNetworkRequest(QUrl(url));
    request.setRawHeader("User-Agent", "bb-phone/20120910");
    request.setRawHeader("Content-Type", "application/json");
    request.setRawHeader("Content-Length", postDataSize);

    QSslConfiguration sslConfig = request.sslConfiguration();
    sslConfig.setPeerVerifyMode(QSslSocket::VerifyNone);
    sslConfig.setProtocol(QSsl::TlsV1);
    request.setSslConfiguration(sslConfig);

        networkAccessManager->post(request, outData); 
```

无论我尝试使用哪种服务，我总是遇到同样的错误。响应是： **SSL 握手失败**

Wireshark 信息：

```
Protocol Length Info
SSLv2    157    Client Hello
TLSv1    1202   Server Hello, Certificate, Server Hello Done
TLSv1    449    Client Key Exchange
TLSv1    60     Change Cipher Spec
TLSv1    91     Encrypted Handshake Message
TLSv1    97     Change Cipher Spec, Encrypted Handshake Message
TLSv1    605    Application Data
TLSv1    280    Application Data
TLSv1    277    Application Data
TLSv1    121    Application Data
TLSv1    92     Application Data
TLSv1    297    Application Data, Application Data, Application Data, Application Data
TLSv1    77     Encrypted Alert 
```

加密警报内容类型为 21

服务器密码套件在客户端支持的密码套件列表中。

我正在使用以下库进行连接：QtNetwork/qnetworkreply.h

我希望这个新信息能提高问题的质量。

请帮忙，我一直在寻找几个小时没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:16:48.113

在就这个特定问题与一些 RIM 人员取得联系后，我们发现 TLS/SSL 服务器不容忍某些扩展，因此使用以下 Qt 代码禁用扩展传输，通过 https 成功建立连接：

```
QSslConfiguration cfg(request.sslConfiguration());
cfg.setSslOption(QSsl::SslOptionDisableSessionTickets, true);
request.setSslConfiguration(cfg); 
```

我想特别提一下 Research In Motion 的应用程序开发部门对这个问题的关注和投入的努力，直到我们终于找到了正确的方法。

下面是完整的连接代码，以防任何人面临这种​​需求：

```
networkAccessManager = new QNetworkAccessManager(this);
bool res = connect(networkAccessManager, SIGNAL(finished(QNetworkReply*)),
            this, SLOT(requestFinished(QNetworkReply*)));    
QNetworkRequest request = QNetworkRequest(QUrl(url));
request.setRawHeader("User-Agent", "BB_PHONE/20120926");
request.setRawHeader("Content-Type", "application/json");
request.setRawHeader("Content-Length", postDataSize);

QSslConfiguration sslConfig = request.sslConfiguration();
sslConfig.setPeerVerifyMode(QSslSocket::VerifyNone);
sslConfig.setPeerVerifyDepth(1);
sslConfig.setProtocol(QSsl::TlsV1);
sslConfig.setSslOption(QSsl::SslOptionDisableSessionTickets, true);

request.setSslConfiguration(sslConfig);
networkAccessManager->post(request, outData); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:57:02.093

您的服务器是否支持 TLS v.1？也许它只为 SSLv2-3 或 TLS v1.1-1.2 配置。另一种可能的方式是客户端和服务器密码套件不共享。运行 Wireshark，它会显示握手包交换。在那里你可以看到支持的密码套件、SSL/TLS 版本和其他一些信息。

# django - 重用先前视图的搜索结果

> ID：13613802
> 
> 赞同：1
> 
> 时间：2012-11-28T20:27:15.203
> 
> 标签：django, django-views

我正在尝试围绕如何在 Django 中执行以下操作：

假设我有一个接受带有搜索参数的 GET 请求的视图，例如：

```
def search(request, id):
    another_model = get_object_or_404(models.AnotherModel, id=id)
    if request.method == 'GET' and 'submit' in request.GET:
        result = {}

        # Expensive db operation to filter based on search query
        # Populates result

        return render(request, "result.html", {
            'result': result,
            'form': forms.ConfirmationForm(another_model=another_model)})

    form = forms.SearchForm(None, another_model=another_model)

    return render(request, "search.html", {'form': form}) 
```

当接收到搜索查询时，它会根据 GET 参数执行一些昂贵的数据库操作。结果和表单被传递给模板进行渲染。

在模板中，表单操作设置为发布到不同的视图：

```
def confirm(request, id):
    another_model = get_object_or_404(models.AnotherModel, id=id)
    form = forms. ConfirmationForm(request.POST or None)
    if form.is_valid():
        form.save()
        return redirect('done', id)    

    # How to:
    # return render(request, "result.html", {
    #    'result': result,
    #    'form': forms.ConfirmationForm(another_model=another_model)}) 
```

到目前为止，confirm() 仅在表单有效时才有效。我苦苦挣扎的地方是，如果表单失败，我如何根据 confirm() 中的先前搜索查询“重新创建”响应。我是否必须以某种方式缓存 search() 的结果，这样我就不必在 confirm() 中再次运行昂贵的操作？还是只是重构代码的问题？

（希望问题的解释不会太混乱！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T20:55:52.490

有三种方法可以做到

1.  缓存结果
2.  将结果存储在用户的会话中
3.  在表单中包含相关信息 - 使用隐藏或只读字段。

# asp.net-mvc - Razor/cshtml 的 ctags

> ID：13613804
> 
> 赞同：1
> 
> 时间：2012-11-28T20:27:27.663
> 
> 标签：asp.net-mvc, vim, razor, ctags

我想知道是否有人知道或已经为 razor/cshtml 编写了 ctags 定义。我想为我的 ASP.NET MVC 应用程序增强 vim 中的标签支持。

我正在寻找类似于[这个要点](https://gist.github.com/199338)的东西（它增加了对 javascript 文件中标签的更强支持），我可以在我的 .ctags 配置文件中通过它。

这是 razor/cshtml 语法的示例：

```
<!-- Single statement blocks  -->
@{ var total = 7; }
@{ var myMessage = "Hello World"; }

<!-- Inline expressions -->
<p>The value of your account is: @total </p>
<p>The value of myMessage is: @myMessage</p>

<!-- Multi-statement block -->
@{
    var greeting = "Welcome to our site!";
    var weekDay = DateTime.Now.DayOfWeek;
    var greetingMessage = greeting + " Today is: " + weekDay;
}
<p>The greeting is: @greetingMessage</p> 
```

# hadoop - 减速机数量

> ID：13613805
> 
> 赞同：1
> 
> 时间：2012-11-28T20:27:35.593
> 
> 标签：hadoop, mapreduce

我正在尝试在 10 个数据节点的集群中对 Map reduce 程序进行性能测试。在此过程中，我使用了 5 个减速器，然后是 10 个，依此类推。

我在想增加减速器的数量也会使工作完成得更快，但我观察到，在 30 之后，即使你将数量增加到 70，工作运行时也没有任何区别，尽管有超过 400 个唯一键并且还在增加超过 30 个减速器的数量应该会有所不同，不是吗？

谁能帮助我了解这是否有任何特殊原因？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:30:34.847

您没有观察到性能提升的原因有多种。当您进行此性能测试时，您正在运行哪些基准？还有你有多少映射器？你的工作量是多少等等...

根据您在此处简要描述的内容，我们可以怀疑您没有足够的映射器和/或它们完成得太慢。

请记住，只有在映射器有可用输出时，reducer 才能开始工作。因此，您的 30 个减速器可能足以处理映射器的输出速度和大小，因此添加更多不会有任何区别，因为它们中的大多数都处于空闲状态，等待映射器完成并为减速器处理提供新数据.

我希望这有帮助！

# c# - 向 WPF Datagrid 添加大量项目会消耗大量 CPU 时间

> ID：13613807
> 
> 赞同：2
> 
> 时间：2012-11-28T20:27:42.340
> 
> 标签：c#, data-binding, wpfdatagrid, inotifycollectionchanged

我正在创建具有一些简单嗅探器功能并显示用户转储数据包的应用程序。从转储文件中读取数据包，该文件会根据当前流量实时更新，然后将捕获的数据包添加到 Datagrid（每个数据包都是新行）。我使用数据绑定从实现 ICollectionChanged 接口的转储读取器获取数据包，因此 Datagrid 在每个新数据包上都会收到通知。Datagrid 使用虚拟化和延迟滚动。几乎一切正常 - 唯一的例外是巨大的 CPU 消耗。这种 CPU 使用率是由于我读取所有新数据包（每秒数千个）、格式化它们以供显示和每个数据包上升 CollectionChanged 事件，这会更新 Datagrid。对软件的要求是用户不必实时查看所有新数据包——它们每秒出现数十万个，所以没有人会注意到他们。用户只能查看某些数据包，当他想要时，他可以向下/向上滚动条到适当的位置以查看他想要的数据包，并且只有在这种情况下必须从文件中读取数据包。

**问题是**我希望Datagrid每秒更新一次以显示新数据包到达，最好通过将滚动条缩放到实际数据包数量，但不需要连续读取它们，格式化并调用CollectionChanged，因为它需要CPU时间，此外如果他不滚动条，用户将看不到新数据包。我被告知到达的数据包数量，因此我知道所有数据包的数量。

我试图添加假数据包（从而避免读取和格式化每个新数据包）只是为了强制 Datagrid 扩展到实际数据包计数。它几乎起作用了，因为 CPU 使用率下降并且当我滚动条时数据包只读。但是过了一会儿，当新的数据包被添加到Datagrid时，当前视图中的行开始随机重复，即在第一时刻视图中的数据包显示第1、第2、第3、第4、第5、第6等等，但是过了一会儿它们分别显示为第 1、第 2、第 3 和第 1、第 2、第 3。

我还尝试刷新绑定 - 它有效，但消耗的资源比第一种方法更多，所以我放弃了它。我还尝试刷新 Datagrid 的 listcollectionview - 与刷新绑定的效果相同。

接下来是当我想在一次调用 CollectionChanged 时添加数据包列表

```
NotifyCollectionChanged(new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Add, list)); 
```

我收到了 PresentationFramework.dll!System.Windows.Data.ListCollectionView.ValidateCollectionChangedEventArgs(System.Collections.Specialized.NotifyCollectionChangedEventArgs e) 引发的 Range 操作不受支持的错误

所以我不得不为数据包列表中的每个数据包调用 CollectionChanged，这也增加了 CPU 使用率。

**综上所述**，我想通知 Datagrid 有新的数据包/行，因此 Datagrid 滚动条将缩放到数据包的总数，但只有当用户滚动条时才会从文件中读取数据包。

对于如何解决我的问题的每一个建议，我都会非常感谢。

我刚刚意识到，有一件重要的事情要提，很抱歉我一开始就忘了说。我的 ObservableCollection 支持某种数据虚拟化，在内存中我只保存一些必要的数据包。当**新数据包到达时，我只通知我的集合新数据包的数量，我不必调用集合的 Add 方法，因为我实际上没有向它添加任何数据包 - 所以实际上没有数据包被读取**. Collection 包含关于那一刻数据包总数的信息，并且只有少量实际保存在内存中，以便网格可以显示它们。仅在必要时动态读取数据包，当它们不显示时，它们被释放。但是要通知网格有关新数据包的信息，我必须（我不知道如何做另一种更好的方法）调用 CollectionChanged 并且在此调用的参数中我需要提供每个新数据包。而这个对 CollectionChanged 的​​调用使得数据包被实际读取，这会消耗 CPU。**我想重新调整网格，以便滚动条大小通知新数据包到达，但无需读取数据包并在每个新数据包调用 CollectionChanged （每秒可能发生数千次）**. 我希望仅在滚动条位置发生变化时读取数据包，因此处理每个数据包的昂贵操作将仅针对少数当前可见的数据包完成，而不是针对每个数据包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:12:55.713

如果您的 DataGrid 绑定到 ObservableCollection。每个 T 包含有关给定数据包的信息，诀窍是使“T”类实例化非常快。

现在听起来您正在创建每个 T 并在将它们添加到集合时计算显示所需的所有信息。

它应该只在其构造函数中接收足够的信息，以便稍后当用户滚动网格以查看其行时，它可以检索有关数据包的信息。

# php - 使用php在数据库mysql中上传图像

> ID：13613809
> 
> 赞同：1
> 
> 时间：2012-11-28T20:27:44.330
> 
> 标签：php, mysql, database

我正在使用 php 构建脚本以将图像上传到数据库中，但由于以下错误而被卡住：当我在浏览器中打开页面时，以下消息显示给我：

**注意：未定义索引：第 10 行 C:\xampp\htdocs\12\index.php 中的图像请选择一个文件**

下面是我的初始形式的脚本：

```
<html>
<body>
<form action="index.php" method="post" enctype="multipart/form-data">
File:<input type="file" name="image" /><input type="submit" value="upload" />
</form>
<?php
mysql_connect("localhost","root","") or die(mysql_error());
mysql_select_db("databaseimage") or die(mysql_error());
//files properties
echo $file = $_FILES["image"]["tmp_name"];
if(!isset($file))
echo'please select a file';
else{
    $image = $_FILES['image']['tmp_name'];
    }
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:32:35.760

检查是否首先上传（因此，`$_FILES["image"]`是否存在）：

```
if (isset($_FILES["image"]))
{
    $file = $_FILES["image"]["tmp_name"];
    if (!isset($file)) {
        echo 'please select a file';
    } else {
        $image = $_FILES['image']['tmp_name'];
    }
} 
```

# r - 数组索引保留结构

> ID：13613810
> 
> 赞同：5
> 
> 时间：2012-11-28T20:27:47.453
> 
> 标签：r, multidimensional-array

我需要一个在 R 中对多维数组进行子集化的函数；问题是在调用函数之前我不知道哪个维度或沿该维度的长度。

```
# subset a 3-d array; leave dims 1 and 2, but start 3rd dim at its 11th value
mydim <- dim(myarr)
myarr[, , 11:mydim[3]]

# subset a 4-d array; leave dims 1, 3 and 4, but start 2rd dim at its 8th value
mydim <- dim(myarr)
myarr[, 8:mydim[2], , ] 
```

我总是需要精确地沿一个维度进行子集化，并且子集化总是从 1 以外的某个值开始。我还需要保留数组结构，因此矩阵索引到数组中看起来并不吸引人。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:10:00.207

开始了！也测试了...

```
 sampleArray <- function(myarr, dm, start, leng) {
  ## arguments: 
  ##  dm is the dimension selected
  ##  start is where in dm to being
  ##  leng is how far in from dm to go  
  ##   start+leng <= dim(myarr)[dm]

    leng <- leng-1

    # error check
    if (start+leng > dim(myarr)[dm])
      warning("leng too long by ", start+leng - dim(myarr)[dm], ".")

    #initialize a vector of all TRUE
    indx <- as.list(rep(TRUE, length(dim(myarr))))

    # change the required dimension to the required sequence
    indx[[dm]] <- seq(start, start+leng)
    indx <- paste(indx, collapse=",")

    expr <- paste0("myarr[", indx, "]")

    # return the appropriate sample
    eval(parse(text=expr))
  } 
```

例子：

```
# sample array
myarr <- array(1:2250, dim=c(15, 10, 15))

# example call
sampleArray(myarr, dm=2, start=4, leng=3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T21:13:35.483

这是一个利用基于矩阵对数组进行子集化的可能性的选项：

```
myarr <- array(1:(2*3*4), dim = c(2, 3, 4))

myfun <- function(arr, from, len, Dim){
    dimArr <- dim(arr)
    if(missing(len)){
        subIdx <- from:dimArr[Dim]
    } else {
        subIdx <- from:(from + len - 1)
    }
    arrD <- lapply(as.list(dimArr), seq_len)
    arrD[[Dim]] <- subIdx
    subMat <- as.matrix(do.call(expand.grid, arrD))
    array(arr[subMat], dim = lapply(arrD, length))
}

> myfun(myarr, 2, 1, 3)
, , 1

     [,1] [,2] [,3]
[1,]    7    9   11
[2,]    8   10   12

> myfun(myarr, 2, Dim = 3)
, , 1

     [,1] [,2] [,3]
[1,]    7    9   11
[2,]    8   10   12

, , 2

     [,1] [,2] [,3]
[1,]   13   15   17
[2,]   14   16   18

, , 3

     [,1] [,2] [,3]
[1,]   19   21   23
[2,]   20   22   24 
```

# python - 如果找到则插入子字符串

> ID：13613811
> 
> 赞同：2
> 
> 时间：2012-11-28T20:27:47.510
> 
> 标签：python, string

我`my_str`在 Python 中得到了一个字符串。我想要做的是：如果`my_str`包含一个子字符串`str1`，则在子字符串之后插入一个字符串`str2`（`str1`并保持其余部分`my_str`不变。）否则，什么也不做。（假设`my_str`包含不超过一个子字符串`str1`。）

我在想的方式是：做一个for循环来查找是否`str1`存在于`my_str`

```
for i in range(0, len(my_str)-len(str1)):
  if my_str[i:i+len(str1)] == str1:
    my_str = my_str[0:i] + str2 + my_str[i:] 
```

我很好奇是否有任何神奇的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T20:30:11.317

最简单的方法是`str.replace()`：

```
>>> str1 = "blah"
>>> str2 = "new"
>>> "testblah".replace(str1, str1+str2)
'testblahnew'
>>> "testblahtest".replace(str1, str1+str2)
'testblahnewtest'
>>> "test".replace(str1, str1+str2)
'test'
>>> "blahtestblah".replace(str1, str1+str2)
'blahnewtestblahnew' 
```

我们只需将原始值替换为附加到自身的新字符串，本质上是插入新值。

更多示例的关于 replace()的[快速教程。](http://www.tutorialspoint.com/python/string_replace.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:32:18.147

```
def myReplace(myStr, str1, str2):
    try:
        i = myStr.index(str1)
        answer = myStr[:i+len(str1)] + str2 + myStr[i+len(str1):]
        return answer
    except ValueError:
        return myStr 
```

希望这可以帮助

# java - 获得唯一的正则表达式匹配器结果（不使用地图或列表）

> ID：13613813
> 
> 赞同：8
> 
> 时间：2012-11-28T20:27:49.623
> 
> 标签：java, regex, pattern-matching, unique, matcher

有没有办法只获得独特的匹配？在匹配后不使用列表或地图，我希望匹配器输出立即是唯一的。

样本输入/输出：

```
String input = "This is a question from [userName] about finding unique regex matches for [inputString] without using any lists or maps. -[userName].";
Pattern pattern = Pattern.compile("\\[[^\\[\\]]*\\]");
Matcher matcher = pattern.matcher(rawText);
while (matcher.find()) {
    String tokenName = matcher.group(0);
    System.out.println(tokenName);
} 
```

这将输出以下内容：

```
[userName]
[inputString]
[userName] 
```

但我希望它输出以下内容：

```
[userName]
[inputString] 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-28T20:30:01.763

就在这里。您可以将负前瞻和反向引用结合起来：

```
"(\\[[^\\[\\]]*\\])(?!.*\\1)" 
```

仅当与您的实际模式匹配的那个在字符串中不再出现时才会匹配。实际上，这意味着你总是得到每场比赛的**最后一次出现，所以你会以不同的顺序得到它们：**

```
[inputString]
[userName] 
```

如果订单对您来说是个问题（即，如果在第一次出现时对它们进行排序很重要），您将无法仅使用正则表达式来执行此操作。为此，您需要一个可变长度的look*behind*，而Java 不支持。

进一步阅读：

*   [环顾四周](http://www.regular-expressions.info/lookaround.html)
*   [反向引用](http://www.regular-expressions.info/brackets.html)

* * *

**关于一般解决方案的一些说明**

请注意，这适用于任何匹配宽度为非零的模式。一般的解决方案很简单：

```
(yourPatternHere)(?!.*\1) 
```

（我省略了双反斜杠，因为它只适用于几种语言。）

如果您希望它使用具有零宽度匹配的模式（因为您只想知道一个位置并且仅出于某种原因使用环视），您可以这样做：

```
(zeroWidthPatternHere)(?!.+\1) 
```

另外，请注意（通常）您可能必须使用“singleline”或“dotall”选项，如果您的输入可能包含换行符（否则前瞻将只检查当前行）。如果您不能或不想激活它（因为您的模式包含不应匹配换行符的句点；或者因为您使用 JavaScript），这是一般的解决方案：

```
(yourPatternHere)(?![\s\S]*\1) 
```

为了使这个答案更广泛地适用，这里是你如何只匹配每个匹配项的*第一次*出现（在具有可变长度后视的引擎中，如 .NET）：

```
(yourPatternHere)(?<!\1.*\1)
or
(yourPatternHere)(?<!\1[\s\S]*\1) 
```

# node.js - 带有模块的 TypeScript 强制转换

> ID：13613818
> 
> 赞同：0
> 
> 时间：2012-11-28T20:28:07.380
> 
> 标签：node.js, casting, module, typescript

如何使用导出的类转换变量的类型？比如这样：

游戏管理器.ts：

```
export class GameManager {} 
```

播放器.ts：

```
private _manager: GameManager; 
```

当我使用 a 时`/// <reference path="GameManager.ts" />`，我收到一条错误消息，说 GameManager 超出范围或类似的东西。这究竟是如何工作的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T22:01:26.380

这里有几种情况，具体取决于`export class GameManager {}`行的位置：

选项 1：您正在使用“外部”模块（即您`export`在顶层有任何声明）。

在这种情况下，您应该删除`reference`标签并改为编写：

```
import Manager = module("GameManager"); // N.B. this is the filename, not the class name
...
private _manager: Manager.GameManager; 
```

选项 2：您正在使用“内部”模块（即您`export class`在一个`module`块内，但不是一个`export module`块）

在这种情况下，你应该保留你的`/// <reference...`标签并写下：

```
private _manager: MyGame.Manager; // N.B. Assuming here that 'GameManager' lives inside 'module MyGame { ... }' 
```

可能是您实际上并不想要`export`类中的关键字 - 如果您这样做，则根本不需要限定它（假设在顶层没有其他东西被导出）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:01:26.500

对于内部模块，您必须将导出的类包装在模块中，因此 GameManager.ts 文件应为：

```
module Game
{
    export class GameManager{}
} 
```

现在您可以通过以下方式访问 GameManager 类

```
Game.GameManager
```

# debugging - Objdump/GCC - BFD：矮人错误：错位的行号部分

> ID：13613820
> 
> 赞同：1
> 
> 时间：2012-11-28T20:28:16.173
> 
> 标签：debugging, gcc, assembly, objdump, dwarf

在尝试使用 objdump 生成汇编代码（与源代码混合）时，

```
gcc -g -c test.c ;
objdump -S -M intel test.o > out.asm 
```

我收到以下错误。

```
BFD: Dwarf Error: mangled line number section. 
```

生成的输出程序集不与源代码混合。有人可以澄清这意味着什么吗？有没有什么办法解决这一问题 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:40:58.607

“objdump -S -M”显然期待 .o 文件中有一个“.debug_abbrev section”部分，而“gcc -g”显然没有写它：

我认为您对此无能为力（您已经在使用“-g”来包含调试符号）。我认为忽略它是完全安全的。

有问题的包是“binutils”。这是完整的代码：

[http://opensource.apple.com/source/binutils/binutils-20/src/bfd/dwarf2.c](http://opensource.apple.com/source/binutils/binutils-20/src/bfd/dwarf2.c)

```
/* In DWARF version 2, the description of the debugging information is
   stored in a separate .debug_abbrev section.  Before we read any
   dies from a section we read in all abbreviations and install them
   in a hash table.  */

static struct abbrev_info**
read_abbrevs (abfd, offset)
     bfd * abfd;
     unsigned int offset;
{
  struct abbrev_info **abbrevs;
  char *abbrev_ptr;
  struct abbrev_info *cur_abbrev;
  unsigned int abbrev_number, bytes_read, abbrev_name;
  unsigned int abbrev_form, hash_number;
  struct dwarf2_debug *stash;

  stash = elf_tdata(abfd)->dwarf2_find_line_info;

  if (! stash->dwarf_abbrev_buffer)
    {
      asection *msec;

      msec = bfd_get_section_by_name (abfd, ".debug_abbrev");
      if (! msec)
    {
      (*_bfd_error_handler) (_("Dwarf Error: Can't find .debug_abbrev section."));
      bfd_set_error (bfd_error_bad_value);
      return 0;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-23T00:32:53.340

此问题通常显示 .debug_line 部分中由链接器 (ld) 编码问题引起的重定位表问题 - 内存副本重叠。工具链需要一个错误修复和重建。

它不会影响程序的加载和运行，但是这个问题会导致由于地址/符号不匹配而无法调试。这是一个示例，代码在 0x0038ca82 处被破坏（在错误的链接器情况下）。

```
0038ca80 00 = op_code = DW_LNS_extended_op
0038ca81 05 = op length = 5 bytes
0038ca82 02 = extended_op_code = DW_LNE_set_address
0038ca83 nn nn nn nn = 4-byte address 
```

在有问题的 ELF 链接中，扩展操作码（32 未定义）

```
0038ca82 32 = extended_op_code = Unknown -> mangled line number section 
```

问题 ld 导致 ELF（损坏的行号部分）：

```
0038ca60  62 6c 69 63 2e 68 00 01  00 00 68 65 61 70 5f 6d  |blic.h....heap_m|
0038ca70  67 72 5f 70 75 62 6c 69  63 2e 68 00 02 00 00 00  |gr_public.h.....|
0038ca80  00 05 32 00 40 18 02 94  32 00 40 00 01 01 00 05  |..2.@...2.@.....|
0038ca90  02 94 32 00 40 00 01 01  00 05 02 94 32 00 40 00  |..2.@.......2.@.|
0038caa0  01 01 00 05 32 00 40 15  02 b0 32 00 40 00 01 01  |....2.@...2.@...|
0038cab0  00 05 02 b0 32 00 40 00  01 01 00 05 02 b0 32 00  |....2.@.......2.|
0038cac0  40 00 01 01 00 05 02 c0  32 00 40 94 00 05 40 17  |@.......2.@...@.| 
```

正常 ld 导致 ELF：

```
0038ca60  62 6c 69 63 2e 68 00 01  00 00 68 65 61 70 5f 6d  |blic.h....heap_m|
0038ca70  67 72 5f 70 75 62 6c 69  63 2e 68 00 02 00 00 00  |gr_public.h.....|
0038ca80  00 05 02 80 32 00 40 38  00 05 02 80 32 00 40 18  |....2.@8....2.@.|
0038ca90  00 05 02 90 32 00 40 1a  00 05 02 94 32 00 40 00  |....2.@.....2.@.|
0038caa0  01 01 00 05 02 a0 32 00  40 49 00 05 02 a0 32 00  |......2.@I....2.|
0038cab0  40 15 00 05 02 ac 32 00  40 15 00 05 02 b0 32 00  |@.....2.@.....2.|
0038cac0  40 00 01 01 00 05 02 c0  32 00 40 94 00 05 02 c0  |@.......2.@.....| 
```

# jquery - 滚动不会一直向上jquery

> ID：13613825
> 
> 赞同：2
> 
> 时间：2012-11-28T20:28:36.190
> 
> 标签：jquery

正如您在这里看到的：http: [//jsfiddle.net/huJ95/](http://jsfiddle.net/huJ95/)滚动停止（我相信 5-10 像素）在 div 开始之前（文本在哪里-> div 开始，所以用户需要向上滚动看到开头）为什么会这样？我该如何解决？Jsfiddle 中的 HTML/CSS（我认为无关紧要）。

JS：

```
 jQuery(document).ready(function($) {
        $("nav").on("click", "a", function(e) {
            e.preventDefault();
            $('html,body').animate({scrollTop:$(this.hash).offset().top}, 500);
        });
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T20:45:00.593

其实这很简单，你没有考虑到`nav`. 所以内容位于页面顶部，而不是导航下方。您需要从计算中减去它，例如：

```
$('html,body').animate({scrollTop:$(this.hash).offset().top - $('nav').outerHeight()}, 500); 
```

jsFiddle：http: [//jsfiddle.net/huJ95/2/](http://jsfiddle.net/huJ95/2/)

# matlab - 在打开 avi 文件时找出 MATLAB 使用的编解码器

> ID：13613827
> 
> 赞同：3
> 
> 时间：2012-11-28T20:28:47.580
> 
> 标签：matlab, codec, avi

我有一个使用 Microsoft MPEG-4(MP42) 编码的 avi 文件。有没有办法在使用 VideoReader 打开这个 avi 文件时找出 MATLAB 使用的编解码器（以及它的位置）？我正在使用 MATLAB 版本 7.12.0.635 (R2011a)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T14:29:55.563

尝试：

```
info = mmfileinfo('myfile.avi');
info.Video.Format 
```

这应该返回一个代码，确认 Matlab 认为该文件使用哪个编解码器（请参阅[此处](http://www.fourcc.org/codecs.php)的列表），在您的情况下应该是“mp42”。在旧版本的 Matlab 上，您可能需要使用 aviinfo 而不是 mmfileinfo。

Matlab 不安装自己的编解码器，只是使用您系统上已经存在的编解码器。如果您的系统上没有正确的编解码器，当您尝试读取 .avi 文件时，它将返回错误。

# javascript - 名称中带有点的 jshint 函数

> ID：13613832
> 
> 赞同：0
> 
> 时间：2012-11-28T20:29:03.813
> 
> 标签：javascript, d3.js, jshint, gruntjs

我在 javascript 文件上运行 jshint，其中一些函数的名称中有点（作为命名空间的一种方式）。特别是，我正在使用 d3 库，并且我有很多看起来像的代码

```
d3.select("something") 
```

我只需要关闭 jshint 对使用未定义变量的检查吗？或者有没有办法禁止检查某些变量名称。我正在使用 grunt 来构建项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T20:30:43.680

错误的。

您正在调用变量`select`上的方法。 您收到警告是因为 JSHint 不知道该变量。`d3`
`d3`

您需要告诉它`d3`全局已在其他地方定义，如下所示：

```
/*global d3:false */ 
```

`:false`如果您覆盖全局，它将告诉它抱怨。

# php - PHP eval 解析错误

> ID：13613841
> 
> 赞同：-2
> 
> 时间：2012-11-28T20:29:53.170
> 
> 标签：php, eval, parse-error

我有以下代码：

```
<?php
function calculate_string( $mathString )    {
   $mathString = trim($mathString);     // trim white spaces
   $mathString = preg_replace("/[^0-9\(\)\+\-\*\/\.]/", "", $mathString);       
   return eval("return $mathString;");   
 }

$string1 = " (1 + 1) *3+ (2 + 2)";
echo calculate_string($string1);
$string2 = " (1 + 1) *3+* (2 + 2)";
echo calculate_string($string2);
?> 
```

函数 calculate_string() 必须计算字符串中给出的数学表达式作为参数。第一次调用 string1 效果很好。

但是，我如何检测数学。字符串有数学。语法错误，如在 seconda 调用中，并返回一些值取决于错误类型，或者简单地不返回任何内容（更好的解决方案）？因此，当数学表达式包含语法错误时，问题是第二次调用中的 parse_error。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:34:14.903

好的，所以您想在以下运动中进行运动`*3+*`：

```
$string2 = " (1 + 1) *3+* (2 + 2)"; 
```

好吧，您可以通过多种方式执行此操作，通过自己检查字符串是否存在一些常见错误或检查`eval()`的返回值（[文档](http://php.net/manual/en/function.eval.php)）：

> 从 PHP 7 开始，如果评估代码中存在解析错误，则 eval() 会抛出 ParseError 异常。在 PHP 7 之前，在这种情况下 eval() 返回 FALSE 并继续正常执行以下代码。使用 set_error_handler() 无法在 eval() 中捕获解析错误。

# php - Wordpress 帖子和 404 页？

> ID：13613842
> 
> 赞同：1
> 
> 时间：2012-11-28T20:29:54.670
> 
> 标签：php, html, wordpress

我将我的网站转移到新服务器和新域上。我在仪表板中更改了域，导出了数据库并将其导入到新服务器上。我还通过 ftp 复制了所有文件。除了帖子和页面之外，新网站运行良好。当我打开页面或发帖时，我收到 404 错误。我还看到我现在在 Wordpress 仪表板中丢失了许多页面。

当我转到 phpMyAdmin 时，我可以看到所有帖子都存在于 wp_posts 表中。

有没有人可以帮忙提供信息？

提前致谢，

约瑟普

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:33:36.540

[http://interconnectit.com/124/search-and-replace-for-wordpress-databases/](http://interconnectit.com/124/search-and-replace-for-wordpress-databases/)帖子的路径是绝对路径，并作为序列化数据存储在数据库中。请阅读此链接以了解如何安全地迁移到新域/服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:11:48.537

我没有代表发表评论，所以我必须回答。

试试这个插件来修复链接：**velvet-blues-update-urls**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T20:33:46.917

看起来您缺少 .htaccess 文件或 mod_rewrite 未启用。您是否使用永久链接结构？发生的事情是花哨的 url`http://somedomain.com/some-post-name`没有传递给引导`index.php`文件。

# node.js - http.get 回调挂起

> ID：13613851
> 
> 赞同：0
> 
> 时间：2012-11-28T20:30:23.667
> 
> 标签：node.js

我正在尝试编写一个包装器，让我使用 http.get 调用 API。但是，回调似乎永远不会完成；它返回但似乎阻止了事件循环。

我在下面有一个虚拟函数，它删除了构建我的 API url 并只接受预构建 URL 的逻辑。如果我在 repl 中运行它，我将永远不会回到提示符，页面的正文将被打印然后就坐在那里。

```
function Request(url, callback){
    var data = '';
    http.get(url, function(res){
        res.on('data', function(chunk){
            data += chunk.toString();
        });
        res.on('end', function(){
            var obj = data;
            callback(obj);
        });
    }).on('error', function(e) {
        console.log("Got error " + e.message);
    });
} 
```

任何正确方向的建议或指示将不胜感激。我正在运行 v0.8.15。

# c# - 将 List<> 绑定到 asp.net c# 中的列表视图

> ID：13613856
> 
> 赞同：8
> 
> 时间：2012-11-28T20:30:45.497
> 
> 标签：c#, asp.net, listview

我有以下代码：

```
<asp:ListView ID="lvDetail" runat="server">
                    <ItemTemplate>
                        <tr>
                            <td><%# Eval("ShpNo")%></td>
                            <td><%# Eval("QtyShp")%></td>
                            <td><%# Eval("NumPallets")%></td>
                        </tr>
                    </ItemTemplate>
                    <LayoutTemplate>
                        <table id="tbl1" runat="server">
                            <tr id="tr1" runat="server">
                                <td id="td1" runat="server">ShpNo</td>
                                <td id="td2" runat="server">QtyShp</td>
                                <td id="td3" runat="server">NumPallets</td>
                            </tr>
                            <tr id="ItemPlaceholder" runat="server">  
                            </tr>
                        </table>
                    </LayoutTemplate>
                </asp:ListView> 
```

在后面的代码中：

```
List<Visibility> ListVisibility = new List<Visibility>();
    public class Visibility
    {
        public int ShpNo;
        public int QtyShp;
        public int NumPallets;
        public string ETA;            
    }

List<Visibility> items = ListVisibility.FindAll(VisibItem => VisibItem.ETA == Calendar1.SelectedDate.ToShortDateString());
        lvDetail.DataSource = items;            
        lvDetail.DataBind(); 
```

但是绑定时出现以下错误：

`<td><%# Eval("ShpNo")%></td>`

`DataBinding: 'AIS.WebVisibility+Visibility' does not contain a property with the name 'ShpNo'.`

为了从列表中获取正确的值，我需要做什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T20:33:35.667

你有字段，而不是属性

```
public class Visibility
{
    public int ShpNo { get; set; }
    public int QtyShp { get; set; }
    public int NumPallets { get; set; }
    public string ETA { get; set; }
} 
```

试试看

# f# - 在 f# 中声明一个泛型函数

> ID：13613859
> 
> 赞同：1
> 
> 时间：2012-11-28T20:31:04.380
> 
> 标签：f#

我正在尝试在 F# 中编写我的第一个通用函数，看起来我在这里缺少一些概念：

```
module Assert =
    let ThrowsException<'e : exn>  functionUnderTest  =
    try 
        let result = functionUnderTest
        printfn "fails"
    with 
    | :? 'e  ->  printfn  "succeeds"
    | _  -> printfn "fails" 
```

*标准输入（18,28）：错误 FS0010：模式中出现意外符号“：”。应为“>”或其他标记。*

我希望能够使用我的函数来测试是否引发了异常。

```
let myFunction=HttpClient.postDocRaw "http://notexisting.com/post.php" "hello=data"
Assert.ThrowsException System.Net.WebException myFunction 
```

我想实现这个工具进行测试，所以如果有人有解决方案，那很好，但此外，我正在学习 F#，我想知道在编写这样的函数时我哪里出错了。

***最终代码：***

```
module Assert =
    let ThrowsException<'e when 'e :> exn>  functionUnderTest  =
        try 
           let actual = functionUnderTest()
           printfn "succeeds"
        with 
        | :? 'e  ->  printfn  "succeeds"
        | _  ->  Assert.Fail()

[<TestClass>]
type HttpClientTest() = 
[<TestMethod>]
    member x.PostDataWrongUrl() = 
        Assert.ThrowsException<System.Net.WebException>  (fun() ->  HttpClient.postDocRaw "http://notexisting.com/post.php" "hello=data") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T20:39:04.813

错误显示*“预期的'>'”*，因为类型约束采用`'T when 'T :> baseType`. 您的代码应该是：

```
module Assert =
  let ThrowsException<'e when 'e :> exn> functionUnderTest =
    try 
      let result = functionUnderTest
      printfn "fails"
    with 
      | :? 'e -> printfn  "succeeds"
      | _  -> printfn "fails" 
```

有关详细信息，请参阅[MSDN 上的约束。](http://msdn.microsoft.com/en-us/library/dd233203.aspx)

# android - 网络连接上的 NullPointerException

> ID：13613861
> 
> 赞同：1
> 
> 时间：2012-11-28T20:31:20.567
> 
> 标签：android, spring, android-networking

当我尝试使用 Spring for Android 进行网络交换时，我有一个空指针

堆栈跟踪：

```
11-28 21:25:54.164: E//RequestProcessor.java:226(5225): 21:25:54.169 pool-2-thread-1 An exception occured during request network execution :null
11-28 21:25:54.164: E//RequestProcessor.java:226(5225): java.lang.NullPointerException
11-28 21:25:54.164: E//RequestProcessor.java:226(5225):     at org.springframework.http.client.SimpleClientHttpResponse.getStatusCode(SimpleClientHttpResponse.java:62)
11-28 21:25:54.164: E//RequestProcessor.java:226(5225):     at org.springframework.web.client.DefaultResponseErrorHandler.hasError(DefaultResponseErrorHandler.java:46)
11-28 21:25:54.164: E//RequestProcessor.java:226(5225):     at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:476)
11-28 21:25:54.164: E//RequestProcessor.java:226(5225):     at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:438)
11-28 21:25:54.164: E//RequestProcessor.java:226(5225):     at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:414)
11-28 21:25:54.164: E//RequestProcessor.java:226(5225):     at com.xxx.xxx.rest.SongPostRequest.loadDataFromNetwork(SongPostRequest.java:43)
11-28 21:25:54.164: E//RequestProcessor.java:226(5225):     at com.xxx.xxx.rest.SongPostRequest.loadDataFromNetwork(SongPostRequest.java:1)
11-28 21:25:54.164: E//RequestProcessor.java:226(5225):     at com.octo.android.robospice.request.CachedSpiceRequest.loadDataFromNetwork(CachedSpiceRequest.java:26)
11-28 21:25:54.164: E//RequestProcessor.java:226(5225):     at com.octo.android.robospice.request.RequestProcessor.processRequest(RequestProcessor.java:214)
11-28 21:25:54.164: E//RequestProcessor.java:226(5225):     at com.octo.android.robospice.request.RequestProcessor$1.run(RequestProcessor.java:146)
11-28 21:25:54.164: E//RequestProcessor.java:226(5225):     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:390)
11-28 21:25:54.164: E//RequestProcessor.java:226(5225):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
11-28 21:25:54.164: E//RequestProcessor.java:226(5225):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
11-28 21:25:54.164: E//RequestProcessor.java:226(5225):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
11-28 21:25:54.164: E//RequestProcessor.java:226(5225):     at java.lang.Thread.run(Thread.java:856) 
```

`SongPostRequest`堆栈跟踪所在的位置：

```
@Override
public Response loadDataFromNetwork() throws Exception {
    HttpHeaders requestHeaders = new HttpHeaders();
    requestHeaders.setContentType(new MediaType("application", "json"));
    requestHeaders.set("Userid", String.valueOf(user.getId()));
    HttpEntity<ListenedSong> requestEntity = new HttpEntity<ListenedSong>(
            requestHeaders);
    RestTemplate restTemplate = getRestTemplate();

    try {
        ResponseEntity<Response> response = restTemplate.exchange("http://192.168.1.117/Project56/web/app_dev.php/mobile/music_new", HttpMethod.POST, requestEntity, Response.class);
        return response.getBody();
    } catch (HttpClientErrorException e) {
        Log.e(LOGTAG, e.toString());
    }
    return null;
} 
```

来自服务器的响应得到一个状态码（200），所以我不明白为什么它在那里为空？看起来`SimpleClientHttpResponse`我使用的库中有一个错误。有人知道更多吗？

# c++ - __declspec 之前还是之后的返回类型？

> ID：13613864
> 
> 赞同：7
> 
> 时间：2012-11-28T20:31:28.727
> 
> 标签：c++, windows, visual-studio, declaration

我应该使用

```
bool __declspec(dllexport) function()
{ 
    return true;
} 
```

或者

```
__declspec(dllexport) bool function()
{
    return true;
} 
```

这两者有什么区别？这会影响函数的执行方式或从应用程序调用时返回的内容吗？（此代码用于 DLL）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:33:13.297

如果两者都被编译器接受，那么很难看出它们除了完全等价外如何。

# c# - 检查查询是否包含列表之外的内容

> ID：13613868
> 
> 赞同：1
> 
> 时间：2012-11-28T20:31:47.573
> 
> 标签：c#, asp.net, sql, linq, linq-to-sql

作为查询的结果，我希望所有不在我发送的列表中的`List`董事与董事一起发送。但我不知道如何解决这个问题。我已经尝试过这个`Contains`和其他一些东西。

只是不知道该怎么做。

```
public List<MovieDirector> GetDirectorsPossibleForMovie(int MovieID, List<Director> director)
{
    List<MovieDirector> directors =
    (from item in db.MovieDirectors where item.MovieId != MovieID && item.Director != director orderby item.Director.Lastname select item).ToList<MovieDirector>();
    return directors;
} 
```

附加信息：数据库`MovieDirector`和`Movie`已链接，还有`MovieDirector`和`Director`。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:37:16.430

试试这个：

```
public List<MovieDirector> GetDirectorsPossibleForMovie(
    int MovieID, List<Director> director)
{
    var mds = db.MovieDirectors.Where(x => x.MovieId != MovieID).ToList();
    mds = mds.Where(x => !director.Contains(x.Director)).ToList();
    return mds;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T21:36:06.637

如果 MovieDirector 类的哈希码和 equals 方法设置正确，@Enigmativity 的答案可能会起作用，但它会从数据库中提取几乎所有的 MovieDirector 对象，只会丢弃与列表中的导演关联的对象。

假设你有一个主键`DirectorId`来区分一个导演和另一个导演，你应该能够做这样的事情来产生一个 SQL 查询，它将首先排除指定的导演：

```
var directorIds = director.Select(d => d.DirectorId);
var mds = db.MovieDirectors.Where(x => x.MovieId != MovieID && 
                                       !directorIds.Contains(x.DirectorId))
          .ToList();
return mds; 
```

# sql - 在没有额外子查询的情况下在 Access 中计算 SQL 中数据分布的偏度

> ID：13613873
> 
> 赞同：0
> 
> 时间：2012-11-28T20:32:04.783
> 
> 标签：sql, ms-access, statistics, skew

我在 Access 数据库中有一个数据集，为简单起见，如下所示：

```
      ID 组员工工单 ID
    ------ --------- -------- -----
      1 乔 123414
      2阿乔12309124
      3 鲍勃 112321321
      4 鲍勃 213123214142
      5 山姆 123214214124
      6 B 仁 412949218419
      7 B 艾米 12341234213

```

我要做的是计算每个员工处理的票数分布的[统计偏度。](http://en.wikipedia.org/wiki/Skewness)

在一个完美的世界里，我的 SQL 应该是这样的：

```
SELECT
    [Group], SKEW([myCount]) AS mySkew
FROM
    (
     SELECT [Group], [Employee], COUNT(*) AS myCount
     FROM MyTable
     GROUP BY [Group], [Employee]
    )
        AS TempTable
GROUP BY
   [Group]; 
```

但是，Access 似乎没有`SKEW`功能。有谁知道我怎么做这个计算？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:36:10.740

看起来有人已经尝试过了，并在这里为它创建了一个小型库：

[http://www.experts-exchange.com/Microsoft/Development/MS_Access/A_2529-Median-Mode-Skewness-and-Kurtosis-in-MS-Access.html](http://www.experts-exchange.com/Microsoft/Development/MS_Access/A_2529-Median-Mode-Skewness-and-Kurtosis-in-MS-Access.html)

# javascript - javascript动态按钮点击事件

> ID：13613875
> 
> 赞同：2
> 
> 时间：2012-11-28T20:32:10.890
> 
> 标签：javascript, button

我正在为要删除的表格中的每个 for 制作一个动态按钮。我使按钮 id 具有该行的键，因此我可以在单击时查询它以知道要删除哪一个。由于我为所有按钮分配了相同的功能，因此我需要将单击的按钮传递给事件处理程序，以便我可以从事件处理程序内部查询 id。

**硬编码时，我只需将“this”传递给事件处理程序。制作动态按钮时如何执行此操作？**

现在我有：

```
{
var cell0 = row.insertCell(0);
var btn = document.createElement("input");
btn.type = "button";
btn.id = "btnHistorySelect_" + roundHdr[i].id;              // append the id to the name so we can get it when select button is clicked so we know what round to select as current
btn.value = "Set Current";
btn.onclick = btnHistorySelect;
cell0.appendChild(btn);
}

function btnHistorySelect() {
} 
```

事件处理程序被调用，但我不知道点击的是哪个按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T20:34:12.550

您可以使用`this.id`or`event.target.id`属性来获取启动事件的按钮的 ID。

```
function btnHistorySelect(event) {

    var id = this.id;

         or
   // var elem = event.target;
   // var id = elem.id

} 
```

因为您正在分配函数引用，所以函数内部的**this**对应于当前元素是问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T20:34:53.810

```
function btnHistorySelect(event) {
   alert(event.target); // Will alert the actual element clicked.
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T20:34:21.973

如果你使用这个，你不需要知道或分配一个 id

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T20:34:56.063

HTML 输入按钮元素可`btnHistorySelect`通过`this`变量在函数内部使用。

# windows-8 - 在win 8应用程序中右键单击时不显示AppBar

> ID：13613877
> 
> 赞同：0
> 
> 时间：2012-11-28T20:32:16.713
> 
> 标签：windows-8, microsoft-metro

我正在用 HTML/JavaScript 开发一个 Windows 8 Metro 风格的应用程序。我想在右键单击时激活 AppBar，但它仅在按下 Win logo+Z 键时出现。

这是我正在使用的代码：

```
<div id="appBar" data-win-control="WinJS.UI.AppBar" data-win-options="">
        <button 
            data-win-control="WinJS.UI.AppBarCommand" 
            data-win-options="{id:'clr',label:'Restart',icon:'refresh',
                section:'global',tooltip:'Restart'}" name="clr" onclick="clear()">
        </button>

        <hr 
            data-win-control="WinJS.UI.AppBarCommand" 
            data-win-options="{type:'separator',section:'global'}" />       
        <button 
            data-win-control="WinJS.UI.AppBarCommand" 
            data-win-options="{id:'help',label:'Instruction',icon:'info',
                section:'global',tooltip:'Read help'}"
             name="btnIns" onclick="display()" >
        </button>
    </div> 
```

我需要改变什么？？提前致谢， Moin

# java - 如何将具有一长串通用列的表映射到 JPA 实体

> ID：13613878
> 
> 赞同：0
> 
> 时间：2012-11-28T20:32:15.620
> 
> 标签：java, mysql, hibernate, jpa

考虑这个用例：一个 mysql 表 X 和一个 java JPA enty X。

```
create table X 
(id int(11),
 name varchar(200),
 value1 bigint(16),
 value2 bigint(16),
 value3 bigint(16),
 .
 .
 value100 bigint(16)); 
```

我想映射到这样的实体：

```
@Entity("x")
@Table("x")
public class X {

@Id
@Column("id)
public int getId ...

@Column("name")
public String getName ..

@SomeMagicalExpression
public List<Long> getValues()..
} 
```

我很清楚创建一个连接表的选项，其中每个值都是一行，我试图摆脱执行连接。我真的很讨厌创建 100 个 getter 和 setter。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:45:31.687

有点摸不着头脑，但也许 OpenJPA @Columns 注释会满足您的需求。

[http://docs.oracle.com/html/E24396_01/ref_guide_mapping_custom.html#ref_guide_mapping_custom_field_conf_extex](http://docs.oracle.com/html/E24396_01/ref_guide_mapping_custom.html#ref_guide_mapping_custom_field_conf_extex)

不确定您是否可以使用它将多个列映射到一个集合。也许是 ArrayList 的子类并覆盖其构造函数以获取许多值来填充列表。（如果我假设@Columns 中使用的值必须对应于构造函数是正确的..）

# github - 有没有办法跟踪对 github 中文件夹的更改？

> ID：13613879
> 
> 赞同：0
> 
> 时间：2012-11-28T20:32:21.630
> 
> 标签：github

我与其他 5 个开发人员一起工作，平均每天有大约 100 次提交。我想监视一些其他开发人员不应该接触的代码，但他们可能会。

github中有没有一种方法可以跟踪对特定代码文件夹的更改？因此，如果进行了更改，我会以某种方式收到警报吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:31:40.783

[您可以在您的 Github 存储库上](https://help.github.com/articles/post-receive-hooks)设置一个接收后挂钩（您也可以[对其进行测试](https://help.github.com/articles/testing-webhooks)），以便调用您的服务器，您可以在其中：

*   更新本地仓库
*   `git diff HEAD..HEAD^`
*   监控该最新更新引入的差异（并在某些文件发生更改时发出警报）

# css - 如何为日期输入字段设置自定义图标

> ID：13613880
> 
> 赞同：0
> 
> 时间：2012-11-28T20:32:22.237
> 
> 标签：css, jquery-mobile, mobile

我正在尝试在此[img](http://i.stack.imgur.com/7edAG.png)中为日期输入字段设置自定义图标。虽然我在按钮上创建了自定义图标，但我无法为日期字段创建一个。

```
<div id="send-date" class="transaction-details" data-role="fieldcontain" data-theme="gr">
   <label for="date">Send on</label>
   <input type="date" name="date" id="date" value="" placeholder="" data-icon="date" data-iconpos="right" />
</div><!-- /send-date --> 
```

还有其他方法吗？

[链接到代码](http://jsfiddle.net/Wab8w/) [链接到自定义图标](http://i.stack.imgur.com/FdH1b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:38:40.213

我为您构建了一个示例：http: [//jsfiddle.net/Gajotres/WFz37/](http://jsfiddle.net/Gajotres/WFz37/)

您需要使用用于包装用于列表视图过滤的输入字段的相同 div 包装输入。之后应用这个java脚本：

```
$('input[type="text"]').removeClass('ui-input-text ui-corner-all ui-shadow-inset').addClass('ui-input-text');
$('#custom-input-wrapper').removeClass('ui-icon-searchfield').addClass('ui-custom-icon'); 
```

唯一的要求是 16x16 图像，但我认为您可以使用更大的图像，在这种情况下使用 css 来创建所需的样式。

# javascript - 根据每个标签的最大高度将标签的文本内容拆分为多个标签？

> ID：13613883
> 
> 赞同：1
> 
> 时间：2012-11-28T20:32:32.347
> 
> 标签：javascript, jquery, html, css

所以假设你有一堆 HTML，你想说任何给定元素的最大高度是一个固定的数字。您如何将元素拆分为多个元素，每个元素都不高于每个元素限制的所需高度？这显然取决于窗口宽度，因此假设您有一个足够窄的窗口，使元素的高度 > 所需的高度。

**从...开始**

```
<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p> 
```

**结束于**

```
<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type</p>
<p>specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:18:33.420

只是非常草稿说明了这个想法：

[http://jsbin.com/irewop/2/edit](http://jsbin.com/irewop/2/edit)

假设如果你要在里面使用 html，你需要正确的逻辑，以不破坏标签的方式拆分块，可能使用`domParser` [https://developer.mozilla.org/en-US/docs/DOM/DOMParser](https://developer.mozilla.org/en-US/docs/DOM/DOMParser)或一些外部库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:07:42.570

从分页的角度来看，解决这个问题的另一种方法是通过滚动偏移来实际*“分页”*元素的视图。

[http://jsfiddle.net/Dr7Rv/](http://jsfiddle.net/Dr7Rv/)

以下代码基本上根据需要创建尽可能多的原始副本，并通过滚动每次偏移其内容的视图。这为您提供了可以按照您的要求使用和定位的单独元素。由于这种工作方式，我使代码支持像素高度或行数——因为行数看起来会更好。

```
$.fn.createPagedClones = function(measure, type){
  /// setup vars
  var p = $(this), i = 0, c, t, h = p.innerHeight();
  /// handle lines conversion to px
  ( type == 'lines' ) && ( measure *= parseFloat(p.css('line-height')) || 22 );
  /// create a re-usable css object
  c = {"height": measure+"px", "overflow": "hidden"};
  /// step each division and create an offset view
  do{
    /// clone our original, and create a new view by scroll
    t = ( t ? p .clone() .insertAfter(t) : p ) .css(c) .scrollTop(i);
    /// increment i
    i += measure;
    /// stop if we've done enough
  }while( Math.round(i) < h );
}

$(function(){    
  //$('.target-p-tag').createPagedClones(50, 'px');
  $('.target-p-tag').createPagedClones(3, 'lines');
}); 
```

从理论上讲，您可以更改上述内容，以便代码始终在原始代码上运行，这意味着您的分页系统几乎可以滚动每页的内容。但是这个版本允许您将每个页面放置在您想要的位置......如果您愿意，您可以将它们并排放置，但是如果您有任何随机大小的元素（即图像），这可能看起来有点奇怪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T21:18:51.370

也许这不是最好的解决方案，但它似乎工作正常：

```
var height = 100;

$("p").each(function() {
    var words = this.innerHTML.split(" "),
        $p = $(this).empty();

    for (var i = 0; i < words.length; i++) {
        if ($p.height() > height) {
            $p = $p.text(function(i, val) {
                return val.split(" ").slice(0, -2).join(" ");
            }).clone().empty().appendTo("div");
            i--;
        }
        $p[0].innerHTML += words[i] + " ";
    }
});​ 
```

在当前代码`div`中是一个`<p>`元素容器。

**演示：http:** [//jsfiddle.net/RubCq/](http://jsfiddle.net/RubCq/)

# python - 如何解决 python 模块导入冲突？

> ID：13613889
> 
> 赞同：4
> 
> 时间：2012-11-28T20:33:11.110
> 
> 标签：python

这类似于[这个问题](https://stackoverflow.com/questions/1399896/import-failed-when-the-module-is-already-in-the-sys-path)，但没有提出解决方案。

我有 ~/google_appengine/google/appengine 和 /usr/lib64/python2-7/site-packages/google/protobuf。

我无法“导入 google.appengine”，因为另一个 google 文件夹妨碍了我。我该如何解决？

这是一个最小的示例和错误：

```
$ python
Python 2.7.3 (default, Jun 12 2012, 13:50:02) 
[GCC 4.5.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import google.appengine
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named appengine 
```

根据要求，这是我的 sys.path：

```
['', '/usr/lib64/python2.7/site-packages/nose-1.1.2-py2.7.egg', '/usr/lib64/python2.7/site-packages/mock-0.8.0-py2.7.egg', '/usr/lib64/python2.7/site-packages/coverage-3.5.1-py2.7-linux-x86_64.egg', '/usr/lib64/python2.7/site-packages/rosinstall-0.6.11-py2.7.egg', '/usr/lib64/python2.7/site-packages/vcstools-0.1.12-py2.7.egg', '/home/murph/google_appengine', '/home/murph/google_appengine/google/appengine', '/home/murph/google_appengine/google', '/home/murph/ros/ros/core/roslib/src', '/usr/lib/portage/pym', '/usr/lib64/python27.zip', '/usr/lib64/python2.7', '/usr/lib64/python2.7/plat-linux2', '/usr/lib64/python2.7/lib-tk', '/usr/lib64/python2.7/lib-old', '/usr/lib64/python2.7/lib-dynload', '/usr/lib64/python2.7/site-packages', '/usr/lib64/python2.7/site-packages/PIL', '/usr/lib64/python2.7/site-packages/gst-0.10', '/usr/lib64/python2.7/site-packages/gtk-2.0', '/usr/lib64/python2.7/site-packages/wx-2.8-gtk2-unicode', '/usr/lib64/portage/pym'] 
```

这显示了它正在导入哪个“谷歌”：

```
$ python
Python 2.7.3 (default, Jun 12 2012, 13:50:02) 
[GCC 4.5.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import google
>>> print google.__path__
['/usr/lib64/python2.7/site-packages/google'] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T20:54:33.597

自 2.5 版本以来，导入机制发生了变化（请参阅[此 PEP](http://www.python.org/dev/peps/pep-0328/#rationale-for-absolute-imports)）：

`import google`将用于标准库中的模块

对于亲戚

```
from __future__ import absolute_import
from .google import appengine # (or  from google import appengine) 
```

[此博客条目](http://pythonquirks.blogspot.fr/2010/07/absolutely-relative-import.html)解释了如何导入相关模块。

# coldfusion - ColdFusion ... 在 CFLOOP 中执行 CFHTTP 调用

> ID：13613891
> 
> 赞同：1
> 
> 时间：2012-11-28T20:33:23.813
> 
> 标签：coldfusion, cfhttp

好的，这很蹩脚，但我有一个文件/ftp 服务器为我的 web 应用程序提供资产。客户端在我启动应用程序之前设置了 ftp 服务器。

所以当我只在我的应用程序中显示图像时它工作正常。尽管它是跨域的。现在客户希望我能够获取每个测试的所有资产并将其捆绑在一个 zip 文件中。哦，他们不会升级，所以我们使用的是 CF7！

好吧，我制作了一个图像列表，然后循环遍历它并在循环内执行 cfhttp 调用。将图像写入我设置的临时目录，然后将整个该死的东西压缩起来。除了 cfhttp 调用外，它都可以工作。我得到第一张图像，然后什么也没有。

```
<cfset imageList = "image_01.png,image_02.png" />   

<cfloop index="strImage" list="#imageList#" delimiters=",">
    <cfhttp method="GET" url="#theImgPath##strImage#" path="#TempPath##OSdelim#images" result="objGet" />
</cfloop> 
```

第一个图像显示在服务器上，第二个没有。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:58:26.510

我会尝试类似的东西：

```
<!--- Lose the forward slash at the end, CF isn't XHTML --->
<cfset imageList = "image_01.png,image_02.png">   

<cfloop index="strImage" list="#imageList#" delimiters=",">
    <cfset fileName = strImage>
    <cfif not fileExists(TempPath & OSdelim & "images" & OSdelim & strImage)>
        <cfhttp method="get" getAsBinary="yes" url="#theImgPath##strImage#" path="#TempPath##OSdelim#images" file="#localfile#">
        downloading... <br />
    <cfelse>
        <cfoutput>#TempPath# #OSdelim# images #strImage# already exists</cfoutput><br />
    </cfif>
</cfloop> 
```

该代码未经测试，但我认为它应该可以工作，或者至少让您很好地了解路径出错的地方（以防万一）

# android - 某些使用电子邮件联系人选择器的用户会出现异常

> ID：13613895
> 
> 赞同：10
> 
> 时间：2012-11-28T20:33:36.850
> 
> 标签：android

我试图让我的用户从他们有电子邮件地址的联系人中选择一个联系人。这是他们单击相应按钮时执行的代码：

```
Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.CommonDataKinds.Email.CONTENT_URI);
startActivityForResult(intent, PICK_CONTACT); 
```

这在我自己的手机上运行良好，但在发布我的应用程序后，我发现我的一些用户出现以下异常：

```
0       android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.PICK dat=content://com.android.contacts/data/emails }
1   at  android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1638)
2   at  android.app.Instrumentation.execStartActivity(Instrumentation.java:1510)
3   at  android.app.Activity.startActivityForResult(Activity.java:3244)
4   at  com.fitrocket.android.InviteMethodSelectionAct.onClick(InviteMethodSelectionAct.java:59)
5   at  android.view.View.performClick(View.java:3549)
6   at  android.view.View$PerformClick.run(View.java:14400)
7   at  android.os.Handler.handleCallback(Handler.java:605)
8   at  android.os.Handler.dispatchMessage(Handler.java:92)
9   at  android.os.Looper.loop(Looper.java:154)
10  at  android.app.ActivityThread.main(ActivityThread.java:4945)
11  at  java.lang.reflect.Method.invokeNative(Native Method)
12  at  java.lang.reflect.Method.invoke(Method.java:511)
13  at  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
14  at  com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
15  at  dalvik.system.NativeStart.main(Native Method) 
```

我自己无法重现这个，所以我想知道是否有人可以告诉我问题可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-04T09:59:25.123

不完全是您正在寻找的解决方案，但在使用 ACTION_PICK 意图选择应用程序时，同样的事情也发生在我身上。通常，会发生的情况是该活动需要很长时间才能无缘无故地启动，有时会因“未找到活动”异常而崩溃。我最终做的是建立自己的活动，列出可用的应用程序。在您的情况下，您可能可以对联系人执行相同的操作，使用光标查询所有带有电子邮件的联系人并显示对话框/活动以允许用户选择。听起来像一个糟糕的解决方法，但可能是最快的实现......（请参阅[此处](http://vikasdp.wordpress.com/2011/02/06/custom-android-listview-to-read-phone-contacts/)的示例代码）

另一种方法是联系这些用户，看看他们是否有可能不支持`ContactsContract.CommonDataKinds.Email.CONTENT_URI`内容类型的自定义联系人应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-09T09:29:27.597

据我所知，问题是您假设每个用户都安装了一个可以响应您想要执行的操作数据组合的应用程序。虽然假设在您的情况下可能成立，但某些用户可能选择弄乱他们的系统，并可能安装了一个应用程序来管理他们无法响应您启动的操作的联系人。无论是什么原因，您都应该始终检查应用程序的可用性以响应您的`Intent`.

```
public static boolean isIntentAvailable(Context context, String action)
{
    final PackageManager packageManager = context.getPackageManager();
    final Intent intent = new Intent(action);
    List<ResolveInfo> list =
            packageManager.queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY);
    return list.size() > 0;
} 
```

如果您作为参数`true`声明的至少一个应用程序可用，则此代码将返回。`action`有关我上面描述的问题的官方文档，请参阅[Intents 和 Intent Filters](http://developer.android.com/guide/components/intents-filters.html)。

现在，这一切都很好，但它会解决什么问题？首先，您用户的应用程序不会崩溃。然后，您需要从无法继续进行的事实中恢复过来，因为您认为您可以。通常，向用户显示一条消息并建议他安装一个您知道可以提供该功能的应用程序效果很好。另外，我会在您的文档中注明这种依赖关系，以便您的所有用户都清楚他们需要什么。

**更新**：更多资源供您查看：

*   [意图匹配](http://developer.android.com/guide/components/intents-filters.html#imatch)
*   [将用户发送到另一个应用程序](http://developer.android.com/training/basics/intents/sending.html)

我相信后者可以准确解释您的应用程序崩溃的原因。我引用：

`"Caution: If you invoke an intent and there is no app available on the device that can handle the intent, your app will crash."`

该部分还包含有关如何处理该问题的更多信息。

# javascript - JS过早关闭标签

> ID：13613911
> 
> 赞同：1
> 
> 时间：2012-11-28T20:34:24.277
> 
> 标签：javascript, jquery, html, css

这实际上是我在这个很棒的网站上的第一个问题。我通常会在这里通过一些研究找到我需要的答案，但这次并非如此，因此我不得不问。

这是发生的事情：

我正在构建一个最初有一个下拉列表、一个字段和一个按钮的搜索表单。人们从下拉列表中选择他们想要执行搜索的字段（field1、field2 等），然后在文本框中输入条件。然后有一个“或”按钮，当点击它时，它会动态地创建另一组，如前一个（下拉菜单、文本框和“或”按钮），为搜索创建第二个条件。

这是插入按钮的代码的重要部分：

```
var divid = '#orbuttondiv'+divid;
    $(divid).after('<div id="field'+orbuttonid+'" class="blockSrc"><select name="orfield[]" id="condition'+orbuttonid+'field" class="blockSrc'+orbuttonid+'"><option value="0">Select Field</option><?php //function ?></select><input name="orstr[]" id="condition'+orbuttonid+'str" type="text" /></div><div class="orbutton" id="orbuttondiv'+orbuttonid+'"><button name="orbutton'+orbuttonid+'" id="orbutton'+orbuttonid+'" class="btn orbt" type="button" value="OR" /><i class="icon-comments-alt"></i> OR</button></div>');             
}); 
```

所以问题是当集合插入到文档中时，除了按钮标签过早关闭之外，一切都正常工作。我期望的是：

```
<div class="orbutton" id="orbuttondiv1">
<button class="btn orbt" value="OR" name="orbutton1" id="orbutton1" type="button"><i class="icon-comments-alt"></i> OR</button>
</div> 
```

我得到的是：

```
<div class="orbutton" id="orbuttondiv1">
<button class="btn orbt" value="OR" name="orbutton1" id="orbutton1" type="button"></button><i class="icon-comments-alt"></i> OR
</div> 
```

注意 <button> 标签是如何在内容之前关闭的，所以 <i> 和单词“OR”被加载到按钮之外。

任何帮助将不胜感激：

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T20:36:58.177

因为您自行关闭了`<button>`标签：

```
 <button ... value="OR" /><i>...
                        ↑ 
```

只需取出斜线，您就可以上路了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:36:49.667

您正在关闭`button`示例中的标签：

```
<button name="orbutton'+orbuttonid+'" id="orbutton'+orbuttonid+'" 
    class="btn orbt" type="button" value="OR" /> <--- see the forward slash 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T20:36:55.867

你有`/>`在你的按钮打开元素的末尾，这使它自动关闭。删除`/`.

# r - 如何将数据框的某些列转换为因子？

> ID：13613913
> 
> 赞同：43
> 
> 时间：2012-11-28T20:34:27.090
> 
> 标签：r, numeric, r-factor

> **可能重复：**
> [使用 R 识别或编码独特因素](https://stackoverflow.com/questions/5798206/identifying-or-coding-unique-factors-using-r)

我在使用 R 时遇到了一些问题。

我有一个类似于以下的数据集，但要长得多。

```
A B Pulse
1 2 23
2 2 24
2 2 12
2 3 25
1 1 65
1 3 45 
```

基本上，前 2 列已编码。`A`有 1, 2 代表 2 个不同的权重。 `B`有 1, 2, 3 代表 3 个不同的时间。

由于它们是编码的数值，R 会将它们视为数值变量。我需要使用因子函数将这些变量转换为因子。

帮助？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-28T20:38:01.700

这是一个例子：

```
#Create a data frame
> d<- data.frame(a=1:3, b=2:4)
> d
  a b
1 1 2
2 2 3
3 3 4

#currently, there are no levels in the `a` column, since it's numeric as you point out.
> levels(d$a)
NULL

#Convert that column to a factor
> d$a <- factor(d$a)
> d
  a b
1 1 2
2 2 3
3 3 4

#Now it has levels.
> levels(d$a)
[1] "1" "2" "3" 
```

您也可以在读取数据时处理此问题。参见eg中的`colClasses`and参数。`stringsAsFactors``readCSV()`

请注意，在计算上，分解此类列对您没有多大帮助，并且实际上可能会减慢您的程序（尽管可以忽略不计）。使用因子将要求所有值都映射到幕后的 ID，因此任何打印的 data.frame 都需要在这些级别上进行查找——这是一个需要时间的额外步骤。

存储不想重复存储但更愿意通过其 ID 引用的字符串时，因素非常有用。考虑在此类列中存储更友好的名称以充分受益于因素。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-11-28T20:41:19.347

给定以下示例

```
myData <- data.frame(A=rep(1:2, 3), B=rep(1:3, 2), Pulse=20:25) 
```

然后

```
myData$A <-as.factor(myData$A)
myData$B <-as.factor(myData$B) 
```

或者您可以完全选择您的列并将其包装好：

```
# select columns
cols <- c("A", "B")
myData[,cols] <- data.frame(apply(myData[cols], 2, as.factor))

levels(myData$A) <- c("long", "short")
levels(myData$B) <- c("1kg", "2kg", "3kg") 
```

获得

```
> myData
      A   B Pulse
1  long 1kg    20
2 short 2kg    21
3  long 3kg    22
4 short 1kg    23
5  long 2kg    24
6 short 3kg    25 
```

# api - 使用 VersionOne 的 RESTful API 重新排列故事

> ID：13613914
> 
> 赞同：4
> 
> 时间：2012-11-28T20:34:26.433
> 
> 标签：api, rest, versionone

如何通过 VersionOne 的 RESTful API 更改 Stories 的排名顺序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T21:23:12.060

如果您进行数据查询
`http://YourVersionOne/rest-1.v1/Data/Story?sel=Order,ID&sort=Order`，
您将按降序获得故事的自然创建顺序。

有两种操作：1）在某个故事之前插入，2）在某个故事之后插入。

**给定**

I）假设我正在检查按降序排序的故事列表。在这种情况下，使用“之前”一词意味着较小的订单号。

II) 假设一个片段的故事列表以 [...-(x+c),-x, x+c...] 的形式出现，其中不能保证此列表中的连续订单号。

III) 可能存在负订单号

IV）我将降序视为此解释的基础，“订单号越小越好”是任意的。升序参考系同样有效。

**示例 1：在前面插入**

我想在我的 Story:1234 之前插入我的 Story:9999。查询后发现

*故事：9999 的订单为 454
故事：1234 的订单为 2048*

这是我在 VersionOne 中通过 REST 执行此订单更改所需的内容

版本一网址：`https://myVersionOne/rest-1.v1/Data/Story/1234`

方法：POST

有效载荷：`<Asset> <Attribute name="Order" act="set">454+</Attribute> </Asset>`

最终结果是
*Story:1234 有一个**Order < Story:9999**。*

我没有给你每个确切的订单号的原因是因为我注意到了几件事

a) 该操作可能会强制 Story:1234 劫持原始 Order (454) 并将 Story:9999 撞到下一个可用插槽并撞上它的居民（固定数组场景中的 Ala 插入排序）

或者

b) 该操作可以为 Story1234 插入一个未使用的订单号，该订单号满足未使用订单号 < Story:9999.Order 的条件。这允许 Story:9999 保持相同的订单号。*注意：这些空槽来自删除。

**示例 2：在之后插入**

我想在我的 Story:1234 之后插入我的 Story:9999。在进行查询后，我发现

*故事：9999 的订单为 454
故事：1234 的订单为 2048*

这是我在 VersionOne 中通过 REST 执行此订单更改所需的内容

版本一网址：`https://myVersionOne/rest-1.v1/Data/Story/1234`

方法：POST

有效载荷： `<Asset> <Attribute name="Order" act="set">454-</Attribute> </Asset>`

最终结果是
*Story:9999 的订单为 454
Story:1234 的订单为 453*

总之，OrderNum+ 在一些故事之前插入，而 OrderNum- 在一些故事之后追加。

# javascript - Phonegap - 读取子目录？

> ID：13613915
> 
> 赞同：4
> 
> 时间：2012-11-28T20:34:27.153
> 
> 标签：javascript, android, eclipse, cordova

我正在使用 Phonegap / Cordova 2.2

我正在尝试读取子目录的内容，但不知道该怎么做。

这是我的代码：

```
 window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFileSystemSuccess, fail);

function onFileSystemSuccess(fileSystem) {

var tmpPath = "dir1/dir2/";

fileSystem.root.getDirectory(tmpPath, {create: false, exclusive: false}, getDirSuccess, fail);           
}

function getDirSuccess(dirEntry) {

// Get a directory reader
var directoryReader = dirEntry.createReader();

// Get a list of all the entries in the directory
directoryReader.readEntries(readerSuccess,fail);
} 
```

如果我只获取一个目录路径，那么它可以工作，如果我尝试获取一个包含两个目录的路径，它会失败。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T02:00:37.340

那么你可以这样做：

```
function onFileSystemSuccess(fileSystem) {
    var tmpPath = filesystem.root.fullPath + "/dir1/dir2";
    window.resolveLocalFileSystemURI(tmpPath, getDirSuccess, fail);           
} 
```

但我很好奇为什么您显示的代码不起作用。你在什么平台上测试？

# c# - 将 XElement 合并到 XDocument 并解析命名空间

> ID：13613917
> 
> 赞同：2
> 
> 时间：2012-11-28T20:34:34.050
> 
> 标签：c#, xml, vb.net, linq-to-xml, xelement

给定以下内容`XDocument`，初始化为变量`xDoc`：

```
<Report xmlns="http://schemas.microsoft.com/sqlserver/reporting/2010/01/reportdefinition">
  <ReportSection>
    <Width />
    <Page>
  </ReportSections>
</Report> 
```

我在 XML 文件中嵌入了一个模板（我们称之为`body.xml`）：

```
<Body xmlns="http://schemas.microsoft.com/sqlserver/reporting/2010/01/reportdefinition">
  <ReportItems />        
  <Height />
  <Style />
</Body> 
```

我想把它作为一个孩子`<ReportSection>`。问题是如果通过添加它`XElement.Parse(body.xml)`，它会保留命名空间，即使我认为应该删除命名空间（复制本身没有意义 - 已经在父级上声明）。如果我不指定命名空间，它会放置一个空的命名空间，所以它变成`<Body xmlns="">`.

有没有办法正确合并`XElement`到`XDocument`？我想在之后得到以下输出`xDoc.Root.Element("ReportSection").AddFirst(XElement)`：

```
<Report xmlns="http://schemas.microsoft.com/sqlserver/reporting/2010/01/reportdefinition">
  <ReportSection>
    <Body>
      <ReportItems />        
      <Height />
      <Style />
    </Body>
    <Width />
    <Page>
  </ReportSections>
</Report> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T21:04:45.930

我不确定为什么会这样，但从`xmlns`body 元素中删除属性似乎有效：

```
var report = XDocument.Parse(
@"<Report xmlns=""http://schemas.microsoft.com/sqlserver/reporting/2010/01/reportdefinition"">
  <ReportSection>
    <Width />
    <Page />
  </ReportSection>
</Report>");

var body = XElement.Parse(
@"<Body xmlns=""http://schemas.microsoft.com/sqlserver/reporting/2010/01/reportdefinition"">
  <ReportItems />        
  <Height />
  <Style />
</Body>");

XNamespace ns = report.Root.Name.Namespace;
if (body.GetDefaultNamespace() == ns)
{
   body.Attribute("xmlns").Remove();
}

var node = report.Root.Element(ns + "ReportSection");
node.AddFirst(body); 
```

# c++ - boost::bind 对成员函数回调的帮助

> ID：13613924
> 
> 赞同：0
> 
> 时间：2012-11-28T20:35:01.190
> 
> 标签：c++, boost, callback, boost-bind

您好，我是一名学生，正在开发一个使用成员函数回调的程序。我遇到了 bind 的使用，这正是我所需要的。我只是很难让它工作。

下面是相关代码和编译错误

```
 // this is the API function to register callback
 void register_callback_datapoint(void(*)(datapoint_t *datapoint) cb_datapoint ) 

 // this function is my callback
 void datapoint_update(datapoint_t* datapoint);

 // this code is called in the aggregateThread class
 boost::function<void(datapoint_t*)> f;
 f = bind(&aggregateThread::datapoint_update, this, std::tr1::placeholders::_1);
 register_callback_datapoint(f);

 // here is the compile error
 cannot convert ‘boost::function<void(datapoint_opaque_t*)>’ to ‘void (*)(datapoint_t*)
 {aka void (*)(datapoint_opaque_t*)}’ for argument ‘1’ to ‘void 
 register_callback_datapoint(void (*)(datapoint_t*))’ 
```

有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:40:47.977

首先，我很惊讶您没有收到错误`void register_callback_datapoint(void(*)(datapoint_t *datapoint) cb_datapoint )`。正确的语法是将`void register_callback_datapoint(void(*cb_datapoint)(datapoint_t *datapoint));`函数指针声明为参数。

但是，问题是您试图传递 a `boost::function`，它是一个*函数对象*，不能隐式转换为指向 的函数指针`register_callback_datapoint`。您需要将参数更改为`boost::function`或使其成为模板。

```
void register_callback_datapoint(boost::function<void(datapoint_opaque_t*)> f); 
```

或者

```
template <typename Func>
void register_callback_datapoint(Func f); 
```

另外，我刚刚注意到这一点，但是您的示例和编译错误不匹配。一个说`datapoint_opaque_t*`，另一个说`datapoint_t*`是不同的名字。我无法确定这是否会成为问题。

# list - 从 iOS 应用程序中链接到 iTunes 上特定开发人员的应用程序列表？

> ID：13613925
> 
> 赞同：1
> 
> 时间：2012-11-28T20:35:01.237
> 
> 标签：list, search, hyperlink, directory, itunes

我想在我的 iOS 应用程序中有一个链接，单击该链接将打开 iTunes 并指向特定开发人员的所有应用程序的列表。

我曾尝试使用 iTunes 链接生成器，但从应用程序访问链接时出现以下错误：

> *您的请求无法完成。您要求的商品目前在美国商店中不可用。*

比如说，我想链接到开发者 Yahoo! 的 App 页面。Link Maker 生成以下链接： [https ://itunes.apple.com/us/artist/yahoo!/id281970157?mt=8&uo=4](https://itunes.apple.com/us/artist/yahoo!/id281970157?mt=8&uo=4)

但是，在我的应用程序中单击时会弹出我提到的错误消息。

有什么建议吗？

# c++ - C++ 11 - 使用外部模板来减少编译时间

> ID：13613926
> 
> 赞同：1
> 
> 时间：2012-11-28T20:35:05.480
> 
> 标签：c++, templates, c++11, compiler-optimization

> **可能重复：**
> [Visual C++ 中的外部模板是否存在错误？](https://stackoverflow.com/questions/12650737/is-there-a-bug-with-extern-template-in-visual-c)

我在 VS12 的 *.cpp 文件中使用类似的东西

```
 extern template class std::vector<int>;
... at some point here I need to instantiate vector on int
    std::vector<int> v1; // would not expect this to be instantiated here as I already have a *.cpp where I instantiate this *only once* for all project uses 
```

在单独的 *.cpp 中，我想实例化所有常用的模板实例

```
#include "stdafx.h"

template class std::vector<int>;
template class std::list<int>;
template class std::list<long>;
template class std::list<short>;
template class std::list<long long>;
template class std::list<unsigned int>; 
```

我知道向量在第一个 *.cpp 文件中实例化的方式也是因为我使用 extern 声明获得与没有它相同的编译时间（我实际上声明了更多类型的 extern，所以我可以确定时间足够大，可以看到差异）

问题：为什么它*不仅*在单独的 *.cpp 文件中实例化 std::vector ？

*编辑* 如果在同一个 *.cpp 文件中我有

```
extern template class std::list<int>;

void somefunc()
{
   std::list<int> v1;
} 
```

即使我没有在不同的 cpp 文件中显式实例化 std::list ，我也不会收到类似错误。这可以解释这样一个事实，即即使我指定了 extern ，它*实际上也会被实例化。*想知道为什么会这样。我想在一个点实例化 std::list 。

# java - 问题 SubStrings 和 outofboundsexception 错误

> ID：13613927
> 
> 赞同：1
> 
> 时间：2012-11-28T20:35:07.557
> 
> 标签：java, android

我有一些代码可以在按钮上显示字符串的前十个字符。但是当字符串少于 10 个字符或为空时，我得到了 out of boiunds 异常错误。

我认为一个简单的 IF 语句可以解决它，但似乎没有。有人可以指出我的问题吗？谢谢

我检查了 android 开发人员参考，它没有说明解决这个问题的方法

```
Button item1 = (Button) findViewById(R.id.buttontext1);
String ellipsed = PrefConnector.readString(this, PrefConnector.ONE, null);

if(ellipsed.length() < 1) ellipsed = "Touch to edit";
if(ellipsed.length() > 10) ellipsed = ellipsed.substring(0, 10) + "...";

item1.setText(ellipsed); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:04:40.140

如果你得到一个空指针异常，那么一定有省略号为空的情况。

即使 ellipsed 永远不会为空，您上面的代码也有问题：如果 ellipsed.length()<10，您将其更改为“Touch to edit”，但随后您检查 length>10 和“Touch to edit”.length ()>10，所以短字符串总是以“Touch to e...”结尾

无论如何，我想你想说的是

```
if (ellipsed==null || ellipsed.length()==0)
  ellipsed="Touch to edit";
else if (ellipsed.length()>10)
  ellipsed=ellipsed.substring(0,10)+"..."; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:56:38.963

```
if(ellipsed != null && ellipsed.length() >10)
    ellipsed = ellipsed.substring(0, 10) + "...";
else 
     ellipsed = "Touch to edit"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T20:42:32.493

你为什么不试试...

```
 if(ellipsed.length() < 1)
        ellipsed = "Touch to edit";
    else 
        ellipsed = ellipsed.substring(1, ellipsed.length()) + "..."; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T20:42:49.243

基本上你取前 10 个字符的子字符串，你想知道如果你尝试获取长度小于 10 的字符串的前 10 个字符，为什么会出现异常？来自 oracle 文档：

> 抛出： IndexOutOfBoundsException - 如果 beginIndex 为负数，或者 endIndex 大于此 String 对象的长度，或者 beginIndex 大于 endIndex。

# javascript - 如何从Javascript获取位于gridview内的文本框的客户端ID

> ID：13613929
> 
> 赞同：1
> 
> 时间：2012-11-28T20:35:11.160
> 
> 标签：javascript, gridview, textbox, dom-events

我整天都遇到这个问题，我几乎看到了每个论坛/页面上的每个帖子，但我还没有找到解决问题的方法。在我的解释中，我会尽量做到简短和准确。

我想要的很简单，我想将输入的数字动态复制`txtBox1`到`txtBox2`. 这两个 txtBoxes 都在一个 Table 里面，这个 Table 在里面 a`TemplateField`里面`GridView`。使用该事件`txtBox1`调用 JavaScript`numericOnly`函数。`onkeydown`当用户输入一个数字时，该`numericOnly`函数将触发，并且在 return true 子句之前我调用另一个 JavaScript 函数，它应该从输入的数字中进行动态`txtBox1`复制`txtBox2`。

这里的问题是，每当我尝试使用

```
document.getElementById('<%= txtDeathPremiumDifference.ClientID %>'); 
```

页面抛出此错误：

> “名称 txtDeathPremiumDifference 在当前上下文中不存在”

我必须坚持，我已经尝试了我在互联网上找到的一切，即使是这样：

```
document.getElementById(''<%# ((GridViewRow)Container')
        .FindControl("txtDeathPremiumDifference").ClientID %>'')
        .value="Hi"; 
```

但没有任何效果。

底线我需要能够访问我的文本框的值，以便我可以修改它们所持有的任何内容。

这是`"txtBox1"`它实际上并不是这样称呼的，但你明白了：

```
TextBox ID="txtDeathBankPremium" runat="server" CssClass="TexboxInput"
     MaxLength="17" Width="122px" onkeydown="return isNumericKey(event);" 
```

这是JS函数：

```
function isNumericKey(e)
        {
            var charInp = window.event.keyCode; 
            if (charInp > 31 && (charInp < 48 || charInp > 57)) 
            {
                return false;
            }
            ComputePremiumDifference(charInp);
            return true;
        }

        function ComputePremiumDifference(input) {
            document.getElementById('<%= txtDeathPremiumDifference.ClientID %>')
                    .value="Hi";
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:56:55.460

在 js 函数中使用“<%= txtDeathPremiumDifference.UniqueID %>”。希望它会奏效。

# javascript - 如何将 HTML 与 Javascript/jQuery 分开？

> ID：13613931
> 
> 赞同：2
> 
> 时间：2012-11-28T20:35:26.917
> 
> 标签：javascript, html

我有一个论坛，在每个人的帖子上都有一个按钮，允许版主在查看帖子/输入时间后使用 simplemodal 在窗口中静音某人。在显示窗口的代码中，我有很长的代码

```
var output = "<div id='msginfo'>...</div>"; 
```

等等。我希望我的代码在完成后能够“缩小”，并且当涉及到 html（通常是 < 和 "> 的东西。）时，很多打包程序/收缩程序都会崩溃。

其他 Web 应用程序如何管理 javascript 文件中的无 HTML？在需要它们之前将显示的 div 是隐藏的还是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T20:44:11.430

在工作中，我为此使用[ICanHaz](http://icanhazjs.com/)。它使您可以从 HTML 模板（您可以将其包含在`<head>`HTML 文件中）动态生成 DOM 元素，而无需在 Javascript 中内联任何 HTML，因为它丑陋且难以阅读。

对于像您这样的目的 - 显示具有固定布局的模式 - 这可能比在页面加载时包含和隐藏模式更干净，尽管在这种情况下后一种解决方案可能没有什么可怕的错误。

顺便说一句，当您想在页面加载后异步向页面添加内容时，ICanHaz 也是一个不错的解决方案，这可能与论坛上下文相关（例如，在不加载新页面的情况下加载新帖子）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:47:05.180

我通常使用 divs: `display:none`property 来隐藏它，然后在需要时用 Javascript 更改它，这样它们就会显示出来。

另一方面，您可以进行 Ajax 调用并获取所需的 html 并将其显示附加到元素中。

# css - HTML 和 CSS 在一行之间对齐 div

> ID：13613932
> 
> 赞同：2
> 
> 时间：2012-11-28T20:35:30.940
> 
> 标签：css, html

我很难创建如下图所示的 html 设计：http: [//s8.postimage.org/abmqqm1l1/Untitled.png](http://s8.postimage.org/abmqqm1l1/Untitled.png)

我试过这样的事情：

```
 <div style="display:table-cell; width:100px;"></div><img src="" width="50px";/>
 <div style="display:table-cell; margin-left:151px; width:100px;"></div><img src="" width="50px";/>
 <div style="display:table-cell; margin-left:230px; width:100px;"></div> 
```

我无法弄清楚我该怎么做...请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:11:03.027

考虑使用`table`：[JS Fiddle Example](http://jsfiddle.net/NXCqV/2/)。

虽然一开始可能会让人感到困惑，但一旦你尝试过，添加新分支将非常简单。它消除了使用绝对定位的大部分复杂性。

**HTML**

```
<table>
<tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td style="border-right: 3px solid black;"></td>
</tr>
<tr>
    <td></td>
    <td style="border-top: 3px solid black; border-left: 3px solid black;"></td>
    <td style="border-top: 3px solid black; border-right: 3px solid black;"></td>
    <td style="border-bottom: 3px solid black;"></td>
    <td style="border-bottom: 3px solid black; border-right: 3px solid black;"></td>
</tr>
<tr>
    <td></td>
    <td style="border-bottom: 3px solid black; border-left: 3px solid black;"></td>
    <td style="border-bottom: 3px solid black; border-right: 3px solid black;"></td>
    <td></td>
    <td style="border-right: 3px solid black;"></td>
    <td style="border-bottom: 3px solid black;"></td>
    <td style="border-top: 3px solid black; border-left: 3px solid black;"></td>
    <td style="border-top: 3px solid black; border-left: 3px solid black;"></td>
    <td style="border-top: 3px solid black; border-right: 3px solid black;"></td>
</tr>

<tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td style="border-right: 3px solid black;"></td>
    <td></td>
    <td></td>
    <td style="border-bottom: 3px solid black; border-left: 3px solid black;"></td>
    <td style="border-bottom: 3px solid black; border-right: 3px solid black;"></td>
</tr>
</table>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:58:21.883

首先，您必须在照片设计程序（如paint）中绘制线条并将线条图像放入文档中并定位它。然后通过为每个div添加一个`position:absolute;`and`top:value; left:value;`并更改顶部和左侧的值，您可以将每个div定位在其真实位置.

例如：

```
<div style="display:table-cell; width:100px; position:absolute; top:100px; left:200px;"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T20:56:45.343

我注意到在您的参考中，框的垂直位置可能重叠。如果这不是必需的，我建议使用 1 个未排序的列表元素 () 并使用适当的 "floats" 为列表项分配 "left" 或 "right" 类。如果垂直重叠是必要的，那么我将使用 2 个未排序的列表，其样式如下

```
<ul class="left">
  <li>1</li>
  <li>2</li>
  <li>3</li>
  <li>4</li>
</ul>
<ul class="right">
  <li>1</li>
  <li>2</li>
  <li>3</li>
  <li>4</li>
</ul> 
```

风格是：

```
ul {
 list-style:none;
 margin:0;
 padding:0;  
}
.left {
  float:left;
}
.right {
 float:right;
 padding-left:50px;
 border-left:1px solid black;
}
li {
 padding:10px 20px;
 border:1px solid black;
 width:100px;
 margin:5px;
 display:block;
 position:relative;
}
li:after {
 content:"";
 position:absolute;
 width:50px;
 height:1px;
 background:black;
 top:50%;
}

.left li:after {
 left:100%;
}
.right li:after {
 right:100%;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T20:57:03.393

如果您希望定位元素更自由地创建具有位置属性的容器，然后通过其内部的顶部、左侧、底部、右侧属性定位 div。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T21:03:36.677

看看你是否满意，只需用你的图像位置替换 imgaes

```
 [http://jsfiddle.net/ZMzyZ/] 
```

你的解决方案是`position:absolute;`

# css - 样式单选按钮 - 在 IE 和 Firefox 中不起作用

> ID：13613933
> 
> 赞同：4
> 
> 时间：2012-11-28T20:35:35.853
> 
> 标签：css, radio-button

我试图制作自己风格的单选按钮。在 Chrome 中一切正常，但在 IE 和 Firefox 中仍然存在一些显示错误。

这是代码：

HTML

```
<input type="radio" id ="light" name="choice" value="none""><label for="light">Light me</label> 
```

CSS

```
input[type="radio"] {
appearance: none;
-webkit-appearance: none;
-moz-appearance: none;
background:url('http://refundfx.com.au/uploads/image/checkbox_empty.png') center center no-repeat;
background-size: 2em;
width: 2em;
height: 2em;
cursor: pointer;
vertical-align: middle;
}​ 
```

怎么了？

非常感谢您的回答。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T20:48:04.513

试试这个：[jsfiddle](http://jsfiddle.net/bozdoz/4yVka/2/)

您需要做的是隐藏单选按钮并仅使用标签进行切换。所以，我设置`input[type="radio"]`为`display:none`，并将一些 CSS 移动到`label`选择器或按钮的新选择器，我给了类“按钮”：

HTML：

```
<input type="radio" id ="light" name="choice" value="none"">
<label for="light">
<span class="button"></span>
Light me
</label>​​​ 
```

CSS：

```
input[type="radio"] {
    display:none;
}
.button {   background:url('http://refundfx.com.au/uploads/image/checkbox_empty.png') center center no-repeat;
    background-size: 2em;
    width: 2em;
    height: 2em;
    float:left;
}
label { 
    cursor: pointer;
    line-height:32px;
}
​ 
```

这是使用 CSS 对输入进行样式化的一个很好的演练：[http ://www.wufoo.com/2011/06/13/custom-radio-buttons-and-checkboxes/](http://www.wufoo.com/2011/06/13/custom-radio-buttons-and-checkboxes/)

# c# - 使用接口作为泛型方法的类型参数

> ID：13613935
> 
> 赞同：2
> 
> 时间：2012-11-28T20:35:46.493
> 
> 标签：c#, generics, unity3d

我正在使用 C# 开发 Unity3d 游戏，我们有很多情况需要`int health`访问`GameObject`. 我们使用如下代码执行此操作：

```
GameObject obj;
if(obj.GetComponent<Player>() != null) {
    obj.GetComponent<Player>().health--;
}
else if(obj.GetComponent<Robot>() != null) {
    obj.GetComponent<Robot>().health--;
}
// more painful code 
```

我想做的是让所有这样的类实现一个类似的接口`IHealth`，然后做`obj.GetComponent<IHealth>().health--;`. 不过，这可能吗？我环顾四周，似乎我不能将接口用作类型参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T00:21:06.430

事实证明，这并不容易，而且可能不是一个好主意。问题是`GetComponent<T>`期望类型参数`T`来自`Component`（当然，Unity 没有记录这一点）。我需要 make `Robot`、`Player`等都派生自一个抽象类，该类本身继承自`Component`（通过`MonoBehaviour`），并包含有关健康和其他领域的信息。我怀疑这是否值得；它可能会在其他地方导致同样多的混乱代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:08:57.207

为什么不只是有一个组件`Health`。然后将其附加到您的游戏对象，`RequiresComponent`在任何需要健康的脚本上添加注释，然后通过`GetComponent<Health>();`（将其缓存在私有变量中的同一对象脚本中）

如果您有多个始终在一起的“统计信息”，则可以使其更容易，例如

```
public class Status : MonoBehaviour
{
    public float health;
    public float armor;
} 
```

我发现团结一致，这是一个令人惊讶的普遍“问题”。不确定这是否是一个问题，因为这种想法确实可以帮助解决一些问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T20:54:06.093

正如 SLaks 所指出的，接口作为泛型类型参数是完全可以接受的。如果您的问题是通过接口访问字段，那么我建议只需将您的字段更改为属性。如果由于某种原因您绝对必须保留该字段，只需提供一个隐式实现接口的包装属性。如果问题是字段和属性具有完全相同的名称（包括大小写），您可以显式实现接口：

```
public interface IHealth { int Health { get; set; } }

// Change to a property
public class Ogre : IHealth { public int Health { get; set; } }

// Casing is different, so interface can be implemented implicitly
public class Player : IHealth {
    int health;
    public int Health { get { return health; } set { health = value; } }
}

// Name collision with Pascal casing, so implement explicitly
public class Robot : IHealth {
    int Health;
    int IHealth.Health { get { return Health; } set { Health = value; } }
}

// Later
GameObject obj;
var o = obj.GetComponent<IHealth>();
if (o != null) o.Health--; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T20:54:43.500

我认为您有一个基本的设计问题，因为您的消费代码需要了解每种类型。如果您无论类型如何都采取相同的操作，那么只需使用良好的多态性：

```
public class Player: IHealth {}

public class Robot: IHealth {} 
```

而不是一堆`if`语句，从 GetComponent 中删除通用参数并让它返回一个 IHealth 对象：

```
public IHealth GetComponent()
{
    // return IHealth object here
} 
```

在您的调用代码中：

```
obj.GetComponent().DecreaseHealth(); 
```

# javascript - 在 http 重定向中维护锚点

> ID：13613936
> 
> 赞同：2
> 
> 时间：2012-11-28T20:35:50.660
> 
> 标签：javascript, redirect, anchor

所以现在我在网站上有很多指向旧 HTML 文件的链接。这些链接中的大多数都与页面下方的部分哈希锚相关联。当前，该 HTML 页面重定向到页面的新版本，这是一个包含相同锚点的 PHP 文件。我在 . 有没有一种方法可以获得锚点（如果引用链接包含一个）并将其附加到重定向？

谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T20:58:28.797

您可以使用获取 URL 的哈希部分

```
window.location.hash 
```

请注意，返回的值包括井号。因此，当您将其附加到 URL 时，您也不必附加主题标签。

所以：

```
var newURL = 'http://newURL'+window.location.hash; 
```

希望这可以帮助。

# javascript - 如何使用 Javascript 在 HTML5 上更改输入类型编号的最大值？

> ID：13613937
> 
> 赞同：11
> 
> 时间：2012-11-28T20:35:54.480
> 
> 标签：javascript, html

我需要使用 JavaScript 更改输入元素的 max 属性。例如：

```
<input type="number" name="miname" min="0" max="MyVar" value="0"/> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-28T20:40:11.553

您可以为您的输入分配一个 id ：

```
<input id="myInput" type="number" name="miname" min="0" max="MyVar" value="0"/> 
```

然后通过javascript访问它：

```
var input = document.getElementById("myInput");
input.setAttribute("max",100); // set a new value; 
```

请注意，如果您的输入是表单，您也可以直接访问它

```
document.formName.miname.setAttribute("max",newValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-18T23:24:01.870

分享这样做的角度方式。使用 [attr.max]。

```
<input matInput type="number" min="0"  [attr.max]="totalOrders"  placeholder="Total Skybridge Orders" formControlName="totalSkybridge" (change)="onTotalSkybridgeOrders($event)" 
```

# c++ - c++: 无法实例化 std::set 模板类

> ID：13613943
> 
> 赞同：1
> 
> 时间：2012-11-28T20:36:18.183
> 
> 标签：c++, templates, std

给定以下课程

```
template <typename T>
class Plane
{
public:
    Plane<T>(T A, T B, T C, const Vector3<T>& vec):
        A(A),
        B(B),
        C(C),
        D(-1*A*vec.x-B*vec.y-C*vec.z)
    {

    }

    Plane<T>():
        A(0),
        B(0),
        C(0),
        D(0)
    {

    }

    bool CalculateTime(const Vector3<T>& r0,  const Vector3<T>& rd, T& result )
    {
        Vector3<T> vec(A,B,C);

        if ( vec.dot(rd))
        {
            result = -1;
            return false;
        }
        else
        {
            result = (vec.dot(r0) + D)/vec.dot(rd);
            return true;
        }
    }

    T A;
    T B;
    T C;
    T D;
}; 
```

出于某种奇怪的原因，当我执行以下操作时

 `````
 std::set<Plane<float> > s;
    s.insert(Plane<float>(10,20,30,Vector3f(10,30,40))); 
````  `这产生了一个巨大的错误

```
1>          with
1>          [
1>              T=float
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\xtree(2245) : see declaration of 'std::operator <'
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\xstddef(179) : while compiling class template member function 'bool std::less<_Ty>::operator ()(const _Ty &,const _Ty &) const'
1>          with
1>          [
1>              _Ty=Plane<float>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\xutility(559) : see reference to function template instantiation 'bool std::less<_Ty>::operator ()(const _Ty &,const _Ty &) const' being compiled
1>          with
1>          [
1>              _Ty=Plane<float>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\type_traits(743) : see reference to class template instantiation 'std::less<_Ty>' being compiled
1>          with
1>          [
1>              _Ty=Plane<float>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\xtree(1028) : see reference to class template instantiation 'std::is_empty<_Ty>' being compiled
1>          with
1>          [
1>              _Ty=std::less<Plane<float>>
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\set(44) : see reference to class template instantiation 'std::_Tree<_Traits>' being compiled
1>          with
1>          [
1>              _Traits=std::_Tset_traits<Plane<float>,std::less<Plane<float>>,std::allocator<Plane<float>>,false>
1>          ]
1>          c:\users\awesome2\google drive\university\eng 3gc3\assignment 3\voxelmodeler\voxelmodeler\voxelcube.h(44) : see reference to class template instantiation 'std::set<_Kty>' being compiled
1>          with
1>          [
1>              _Kty=Plane<float>
1>          ]
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\xstddef(180): error C2784: 'bool std::operator <(const std::move_iterator<_RanIt> &,const std::move_iterator<_RanIt2> &)' : could not deduce template argument for 'const std::move_iterator<_RanIt> &' from 'const Plane<T>'
1>          with
1>          [
1>              T=float
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\xutility(1983) : see declaration of 'std::operator <'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\xstddef(180): error C2784: 'bool std::operator <(const std::reverse_iterator<_RanIt> &,const std::reverse_iterator<_RanIt2> &)' : could not deduce template argument for 'const std::reverse_iterator<_RanIt> &' from 'const Plane<T>'
1>          with
1>          [
1>              T=float
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\xutility(1259) : see declaration of 'std::operator <'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\xstddef(180): error C2784: 'bool std::operator <(const std::_Revranit<_RanIt,_Base> &,const std::_Revranit<_RanIt2,_Base2> &)' : could not deduce template argument for 'const std::_Revranit<_RanIt,_Base> &' from 'const Plane<T>'
1>          with
1>          [
1>              T=float
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\xutility(1075) : see declaration of 'std::operator <'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\xstddef(180): error C2784: 'bool std::operator <(const std::pair<_Ty1,_Ty2> &,const std::pair<_Ty1,_Ty2> &)' : could not deduce template argument for 'const std::pair<_Ty1,_Ty2> &' from 'const Plane<T>'
1>          with
1>          [
1>              T=float
1>          ]
1>          c:\program files (x86)\microsoft visual studio 11.0\vc\include\utility(232) : see declaration of 'std::operator <'
1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\xstddef(180): error C2676: binary '<' : 'const Plane<T>' does not define this operator or a conversion to a type acceptable to the predefined operator
1>          with
1>          [
1>              T=float
1>          ] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T20:57:18.700

重要的部分是在您的错误消息的末尾：

```
...
error C2676: binary '<' : 'const Plane<T>' does not define this operator
or a conversion to a type acceptable to the predefined operator 
```

`std::set`需要可订购的元素，即。它需要能够说一个对象**小于**另一个对象。

最简单的方法是`operator <`为您的类实现一个方法。不幸的是，定义“小于”对于 3 维平面的含义**并不简单！**

使用 可能值得研究`std::unordered_set`，它只要求元素具有可比性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T20:56:41.913

( `set`as `multiset`, `map`and `multimap`) 需要一个比较函数或运算符。如果未指定`set`, `multiset`,`map`并`multimap`使用`std::less`functior 对象对集合中的元素进行纵坐标。所以你必须写这样的东西

```
template <typename T>
class Plane {
public:
    friend bool operator < (const Plane<T>& p1, const Plane<T>& p2)
    {
         return ???
    }
}; 
```

正如你所看到的，在一个系列中不是一个像平面这样的好类，也许更好`unordered_set`或者只是一个`std::vector```

# c++ - 使用自定义的比较函子在一组指针中搜索

> ID：13613946
> 
> 赞同：0
> 
> 时间：2012-11-28T20:36:32.353
> 
> 标签：c++, stl, find, set

我只是想知道我刚刚想出的解决方案是否在所有情况下都能正常工作。

我有一个 Server 类，处理页面之间的用户访问，这些页面存储为 Page 类，其中一个属性是页面的相对 URL。我还存储从 Page 到 Page 的请求，也存储为 Request 类，具有对引用者和目标页面的引用。

困难在于 Page 对象存储了两组指向 Request 对象的指针：一组指向目标（传出请求），一组指向引用者（传入请求）；应该使用给定的 URL 在这个集合中进行搜索，以便将请求关联到两个页面。

调用将如下所示：`Request * referrer = page.Referrer("/page2.html");`

现在对于我当前的代码：

```
// page.h

#include <set> 
#include <string> 
#include "request.h"

class Page
{
    struct compReferrers
    {
        bool operator()(Request * const &, Request * const &) const;
    }; // struct compReferrers

    struct compTargets
    {
        bool operator()(Request * const &, Request * const &) const;
    }; // struct compReferrers

    std::string url_;
    std::set<Request *, compReferrers> referrers_;
    std::set<Request *, compTargets> targets_;

    public:
        Page(const std::string & url): url_(url) {}

        // Problematic methods
        Request * Referrer(const std::string & url) const;
        Request * Target(const std::string & url) const;

        // Getter
        inline std::string Url() const { return url_; }
}; // class Page

// page.cpp

#include "page.h"

Request * Page::Referrer(const std::string & url) const
{
    Page referrer(url), target("dummy");
    Request req(referrer, target);
    std::set<Request *, compRefferers>::const_iterator it;
    it = referrers_.find(&req);
    if (it != referrers_.end())
    {
        return *it;
    }
    else
    {
        return 0;
    }
}

bool Page::compReferrers::operator()(Request * const & left,
        Request * const & right) const
{
    if (left == 0) return true;
    else if (right == 0) return false;
    else return left->Referrer().Url() < right->Referrer().Url();
}

bool Page::compTargets::operator()(Request * const & left, 
        Request * const & right) const
{
    if (left == 0) return true;
    else if (right == 0) return false;
    else return left->Target().Url() < right->Target().Url();
}

// request.h

class Page;

class Request
{
    public:
        Request(Page & referrer, Page & target):
            referrer_(referrer), target_(target), visits_(0) {}

        // Useful code
        inline void Visit() { ++visits_; }
        inline Page & Referrer() const { return referrer_; }
        inline Page & Target() const { return target_; }

    private:
        Page & referrer_;
        Page & target_;
        std::size_t visits_;
}; // class Request 
```

有没有正确/更好的方法来做到这一点？

# c# - 视图模型是否应该始终包含该视图中表单的输入？

> ID：13613948
> 
> 赞同：1
> 
> 时间：2012-11-28T20:36:51.723
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-4, strong-typing

这个问题与[这个](https://stackoverflow.com/questions/8097866/strongly-typed-form-in-mvc-which-maps-to-a-different-type?rq=1)有关，但我认为在我的示例中，我有可能会改变答案的细节。

假设我在控制器上有一个用户操作，它呈现一个视图以显示有关特定用户的数据，它可能有`UserViewModel`这样的：

```
public class UserViewModel {
    public string FirstName;
    public string LastName;
    etc...
} 
```

但是，在此视图中，除了显示此用户数据外，我还希望为用户提供一个搜索文本框，以便他们可以在此页面上查找另一个用户。此表单将发布到 FindUser 的操作中，该操作接受以下模型：

```
public class FindUserInputViewModel {
   [Required]
   public string SearchQuery;
} 
```

如果此操作发现模型无效，它会重定向回 User 操作，维护 ModelState。

现在，目前要显示验证错误，我不能使用强类型帮助器，因为该搜索查询属性不在`UserViewModel`，我必须这样做：

```
@Html.TextBox("SearchQuery")
@Html.ValidationMessageFor("SearchQuery") 
```

这可行，并且将显示错误，以及显示 POST 的旧值（因为它保留在 ModelState 中）。但是，我更愿意尽可能使用强类型的助手。

从我看到的所有示例中，这里的模式似乎是`UserViewModel`应该在其中包含 FindUserInputViewModel，也许作为一个`FindUserInput`属性。然后我可以这样做：

```
@Html.TextBoxFor(m => m.FindUserInput.SearchQuery) 
```

这也有效，只要我确保我的 FindUser 操作绑定到正确的前缀，或者我在 TextboxFor 方法调用中指定一个名称。

但是，我真的不明白为什么我的 UserViewModel 应该包含这个其他 ViewModel 只是为了使用这个帮助程序绑定验证。它是否带来了我没有看到的其他好处？如果您的视图模型需要渲染您发布的相同数据，例如在典型的编辑操作中，我理解它的使用，但这里不是这种情况。

在我看来，这里方便的是另一个可以引用不同类型的通用助手，如下所示：

```
@Html.TextBoxForType<FindUserInput>(m => m.SearchQuery) 
```

这不存在，但我认为我应该能够写出来，这是一个很好的案例。这听起来像是一个合适的解决方案，还是我在这里遗漏了什么？

另一个选择可能是用于发布的小型表单`FindUserInputViewModel`应该有自己的 GET 操作以及 POST，然后用户视图可以使用`@Html.Action`. 然后它可以渲染一个仅强类型为的局部视图`FindUserInputViewModel`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:57:17.557

为什么不为您的搜索创建一个局部视图并简单地`FindUserInputViewModel`从您的用户视图中传递一个新视图？

```
@Html.Partial("FindUser", new FindUserInputViewModel()) 
```

您可以`FindUserInputViewModel`在其中键入部分视图并使用强类型帮助器。我会说这是最简单和最整洁的方法，除非我遗漏了什么？

# javascript - 在“Invision Power Board”论坛中使用 Greasemonkey 阻止 CKEditor？

> ID：13613958
> 
> 赞同：0
> 
> 时间：2012-11-28T20:37:13.590
> 
> 标签：javascript, ckeditor, greasemonkey, invision-power-board

我已经厌倦了在[*Invision Power Board*](http://www.invisionpower.com/apps/board/) *(IPB) 中处理CKEditor*，我想使用另一个编辑器。[](http://www.invisionpower.com/apps/board/)

 *我已经在 Greasemonkey 脚本中准备好了另一个编辑器。现在的问题是我不知道如何阻止 CKEditor 加载或在加载后将其关闭，以便我的编辑器可以在其位置执行。

如何“关闭”CKEditor？

对于需要的人：

[这是一个使用 CKEditor 的 IPB 论坛。](http://community.invisionpower.com/index.php?app=forums&module=post&section=post&do=new_post&f=305)不过，它需要注册。

[这是一个演示论坛](http://www.forum-software.org/demo/ipboard)，但目前处于离线状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T05:45:54.380

在 IPB 的较新版本（不是早期的免费版本）上，如果您阻止 CKEditor javascript 的加载，IPB 将为您提供一个纯文本`<textarea>`。

[在 Firefox+Greasemonkey 中，您可以使用出色的*checkForBadJavascripts*实用程序](https://gist.github.com/2620135)来阻止 CKEditor javascript 。像这样：

```
// ==UserScript==
// @name        _Block CKEditor on the selected site(s)
// @include     http://YOUR_SERVER.COM/YOUR_PATH/*
// @require     https://gist.github.com/raw/2620135/checkForBadJavascripts.js
// @run-at      document-start
// @grant       GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

checkForBadJavascripts ( [
    [true,  /ckeditor/i,  null ]
] ); 
```

当你这样做时，IPB 会为你提供一个`<textarea>`with class `ipsEditor_textarea`。 **例如：**

```
<textarea class="ipsEditor_textarea input_text" name="Post" id="editor_50b6f145efdd7">
</textarea> 
```

然后，您可以将您的编辑器附加到它。*

# knockout.js - 淘汰js分组初始json并分列显示

> ID：13613965
> 
> 赞同：0
> 
> 时间：2012-11-28T20:37:43.557
> 
> 标签：knockout.js

在我的示例中，我需要按项目分组，然后按天显示数据。

请参阅[http://jsfiddle.net/3M7QD/2/](http://jsfiddle.net/3M7QD/2/)

我想显示如下：

项目 1 SundayHours MondayHours ...

项目 2 SundayHours MondayHours ...

```
 var json =  [
    {
      "HOURS": 0,
      "PROJECT_NAME": "Project 1",
      "DATE_WORKED": "/Date(1353225600000)/"
    },
    {
      "HOURS": 0,
      "PROJECT_NAME": "Project 2",
      "DATE_WORKED": "/Date(1353225600000)/"
    },
    {
      "HOURS": 8.5,
      "PROJECT_NAME": "Project 1",
      "DATE_WORKED": "/Date(1353312000000)/"
    },
    {
      "HOURS": 0,
      "PROJECT_NAME": "Project 2",
      "DATE_WORKED": "/Date(1353312000000)/"
    },
    {
      "HOURS": 8,
      "PROJECT_NAME": "Project 1",
      "DATE_WORKED": "/Date(1353398400000)/"
    },
    {
      "HOURS": 0,
      "PROJECT_NAME": "Project 2",
      "DATE_WORKED": "/Date(1353398400000)/"
    },
    {
      "HOURS": 8.5,
      "PROJECT_NAME": "Project 1",
      "DATE_WORKED": "/Date(1353484800000)/"
    },
    {
      "HOURS": 0,
      "PROJECT_NAME": "Project 2",
      "DATE_WORKED": "/Date(1353484800000)/"
    },
    {
      "HOURS": 4,
      "PROJECT_NAME": "Project 1",
      "DATE_WORKED": "/Date(1353571200000)/"
    },
    {
      "HOURS": 4,
      "PROJECT_NAME": "Project 2",
      "DATE_WORKED": "/Date(1353571200000)/"
    },
    {
      "HOURS": 4,
      "PROJECT_NAME": "Project 1",
      "DATE_WORKED": "/Date(1353657600000)/"
    },
    {
      "HOURS": 4,
      "PROJECT_NAME": "Project 2",
      "DATE_WORKED": "/Date(1353657600000)/"
    },
    {
      "HOURS": 0,
      "PROJECT_NAME": "Project 1",
      "DATE_WORKED": "/Date(1353744000000)/"
    },
    {
      "HOURS": 0,
      "PROJECT_NAME": "Project 2",
      "DATE_WORKED": "/Date(1353744000000)/"
    }
];

var Project = function(data){
    this.PROJECT_NAME = ko.observable(data.PROJECT_NAME);
    this.HOURS = ko.observable(data.HOURS);
};

var ProjectRowItem = function(data){
    this.PROJECT_NAME = ko.observable(data.PROJECT_NAME);    
    this.SundayProjectEntry = new Project(data);
    this.MondayProjectEntry = new Project(data);
    this.TuesdayProjectEntry = new Project(data);
    this.WednesdayProjectEntry = new Project(data);
    this.ThursdayProjectEntry = new Project(data);
    this.FridayProjectEntry = new Project(data);
    this.SaturdayProjectEntry = new Project(data);
};

var viewModel = {
    Projects : ko.observableArray(ko.utils.arrayMap(json, function(item){
         return new ProjectRowItem(item);            
    })),
    NewProjectName : ko.observable()
};

viewModel.addRow = function()
{
    var data = { 
        PROJECT_NAME : viewModel.NewProjectName(),
        HOURS : "0"
    };

    viewModel.Projects.push(new ProjectRowItem(data));          
}

viewModel.removeRow = function(project)
{    
    viewModel.Projects.remove(project);          
}   

ko.applyBindings(viewModel); 
```

​</p>

**编辑 1** - 我想做的是按项目对数据进行分组，然后在列中显示该项目的每个数组项。

# android - 如果源没有更改，Proguard 是否保证提供相同的映射？

> ID：13613968
> 
> 赞同：30
> 
> 时间：2012-11-28T20:37:58.300
> 
> 标签：android, proguard

在这种情况下，如果我愿意

*   建立一个项目
*   清理所有二进制文件
*   再次构建它（没有源/资源等已更改）。

Proguard 是否保证提供相同的 mapping.txt 文件？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-01T22:31:33.893

ProGuard 是确定性的：对于相同的输入，它将生成相同的输出。

但是有一个微妙之处：如果操作系统以不同的顺序列出目录中的输入文件（特别是不在存档中的类文件），那么它们可能会以不同的顺序进行处理，并且输出可能会不同。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-28T20:51:52.143

它实际上可能会发生，但我认为 proguard 不能保证这一点。

我在[Proguard 文档](http://proguard.sourceforge.net/#manual/usage.html)中发现了这一点，它允许您重用 mapping.txt 以避免更改映射

> -应用映射文件名
> 
> 指定重用在先前的 ProGuard 混淆运行中打印出的给定名称映射。映射文件中列出的类和类成员接收与其一起指定的名称。未提及的类和类成员将获得新名称。映射可以引用输入类以及库类。此选项可用于增量混淆，即处理现有代码的附加组件或小补丁。如果代码结构发生根本性变化，ProGuard 可能会打印出应用映射导致冲突的警告。您可以通过在两次混淆运行中指定选项 -useuniqueclassmembernames 来降低这种风险。只允许一个映射文件。仅在混淆时适用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:01:14.587

如果您想要保证，那么您必须使用映射文件作为混淆过程的输入。但是，您必须仔细检查与该映射文件相关的所有冲突警告。如果您忽略这一点，则在使用反射时可能会出现细微的错误。

# javascript - Jquery Ajax 加载另一个包含 jquery 库的页面

> ID：13613969
> 
> 赞同：1
> 
> 时间：2012-11-28T20:37:57.963
> 
> 标签：javascript, jquery, ajax

我正在使用 Jquery 加载另一个 php 文件，但是该 php 文件也有链接到它的 jquery 库（谷歌的 CDN）。我相信这会导致冲突，因为在 windows 上 jquery 停止工作，而在 mac 上，google 的 webfont 没有加载，jquery 也没有加载。我通过简单地从这些页面中删除 jquery 解决了这个问题。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:43:33.603

如果您正在加载整个其他页面（带有其自己的库和链接资源），最好将其加载到 iframe 中，而不是尝试使用 jQuery/ajax 加载它并内联呈现它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T20:46:10.207

```
<script type="text/javascript" src="<?= COMMONSITE_HTTP_PATH ?>/scripts/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
if (typeof jQuery == 'undefined') {
    var script = document.createElement('script');
    script.type = "text/javascript";
    script.src = "//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js";
    document.getElementsByTagName('head')[0].appendChild(script);
    }
/* ]]> */
</script> 
```

如果您可以在第二个 Web 文档中测试 jQuery 库，它不会被注入两次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T20:40:58.483

如果您使用 Jquery AJAX，那么您可以只在接收到的上下文中查找标签，这些标签链接到加载另一个 Jquery 并删除它们。

为了记录在我的意见中，您应该制作项目的模块，以便 js 部分在一个地方，而 php 部分在另一个地方，分开。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T20:41:05.580

听起来像是`jQuery.noConflict`你的朋友。

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

# c++ - SPOJ FASTFLOW 回答错误？

> ID：13613970
> 
> 赞同：2
> 
> 时间：2012-11-28T20:37:58.997
> 
> 标签：c++, algorithm, graph-theory

谁能帮我解决这个[问题](http://www.spoj.pl/problems/FASTFLOW/)，我正在尝试几天。我每次都得到错误的答案。我使用了 Edmonds - Karp 方法......这是我的代码：

```
 #include<cstdio>
    #include<iostream>
    #include<queue>
    #include<algorithm>
    #include<cstring>
    #define MAXX 900000000
    using namespace std;
    long int capacity[5005][5005] ;
    int  graph[5005][5005] , v[5005] , from[5005] ;
     //Calculating Max Flow using Edmond karp 
     int Max_Flow(int s , int t)
    {  queue<int>Q ;
      // Bfs to get the paths from source to sink
       Q.push(s) ;
       v[s] = 1 ;
       int r ;
       long long int min ; 
       while(!Q.empty())
       {  int p = Q.front() ;
          Q.pop();
          r = 0 ;  
          for(int j = 0 ; graph[p][j]!=0 ; j++)
          {  
            if(!v[graph[p][j]]&&capacity[p][graph[p][j]])
            { Q.push(graph[p][j]) ; from[graph[p][j]] = p ;
              v[graph[p][j]] = 1 ;
              if(graph[p][j]==t)
              { r = 1 ; break ; }
            }

          }
          if(r==1)
          break ;
       }
       r = t ;
       min = MAXX ;
      // Caculating the minimum capacity over the path found by BFS        
       while(from[r]!=0)
       { 
         if(min>capacity[from[r]][r])
         min = capacity[from[r]][r] ;
         r = from[r] ;
       }
       r = t ;
       //Subtracting the min capacity found over the path
       while(from[r]!=0)
       { 
         capacity[from[r]][r]-=min;
         capacity[r][from[r]]+=min;
         r = from[r] ;
       }
       if(min==MAXX)
       return 0;
       else
       return min;
    }
    int main()
    {
         int t , n , s , c , i , j , k  , a , b  , p = 0 ; 
         unsigned long long int flow , r  ; 
           memset(capacity,0,sizeof(capacity));
           memset(from,0,sizeof(from));
           memset(graph,0,sizeof(graph));
           memset(v,0,sizeof(v));
           scanf("%d%d",&n,&c);
           for(i = 0 ; i<c ; i++)
           {
                 scanf("%d%d%d",&a,&b,&k);
                 if(b!=a) 
                 {
                 capacity[a][b]+=k ;
                 capacity[b][a]+=k ;
                 j = 0 ;
                 r = 0 ; 
                 while(graph[a][j]!=0) 
                 { if(graph[a][j]==b) 
                   { r = 1 ; break ; }
                   j++;
                 }
                 if(!r) graph[a][j] = b ;

                 j = 0 ;
                 r = 0 ; 
                 while(graph[b][j]!=0) 
                 { if(graph[b][j]==a) 
                   { r = 1 ; break ; }
                   j++;
                 }
                 if(!r) graph[b][j] = a ;
                 }

           }
           flow = 0 ;    
           r = 1 ; 
           while(r)
           { flow+=r ;
             r = Max_Flow(1,n) ;
             memset(from,0,sizeof(from));
             memset(v,0,sizeof(v));
           }
           printf("%lld\n",flow-1);

           return 0;
    } 
```

正如问题陈述所说：“请注意，可能存在重复的边，以及从节点到自身的边”。所以我忽略了自循环，并在与这些节点相对应的“容量”数组中添加了重复边的容量。我创建了一个“图表”并从源到接收器执行 BFS 以获取路径，直到所有路径都被扩充。我总结了所有找到的最小值并打印了答案......谁能解释为什么错误的答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:17:09.560

假设你有一个简单的图，在开始和结束之间有一条边，容量为 10 亿。

由于您的 MAXX < 10 亿，当您运行 Max_Flow 时，您会发现一个 MAXX 流并错误地断定这意味着没有找到增广路径。

如果是这种情况，那么只需尝试更换

```
#define MAXX 900000000 
```

和

```
#define MAXX 1100000000 
```

并且程序可能会通过...

# database - SQL Server - 同步 2 个不同数据库上的 2 个表

> ID：13613983
> 
> 赞同：18
> 
> 时间：2012-11-28T20:39:19.340
> 
> 标签：database, tsql, synchronization, sql-server-2008-r2

我在使用 SQL Server 2008 R2 的同一服务器上的 2 个不同数据库上有 2 个具有相同架构的表。一张表会更频繁地更新数据。

现在需要使这两个表保持同步。这可以作为一个夜间过程发生。实现同步的最佳方法是什么。过程 ？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-28T23:02:53.613

使用 MERGE 是您最好的选择。您可以控制每个条件。当匹配然后，当不匹配然后等等。

[合并 - Technet](http://technet.microsoft.com/en-us/library/bb510625.aspx)

[合并-MSDN（好！）](http://msdn.microsoft.com/en-us/library/bb522522%28v=sql.105%29.aspx)

**示例 A：事务使用 - 表变量 - 否**

```
DECLARE @Source TABLE (ID INT)
DECLARE @Target TABLE (ID INT)

INSERT INTO @Source (ID) VALUES (1),(2),(3),(4),(5)

BEGIN TRANSACTION

MERGE @Target AS T
USING @Source AS S
ON (S.ID = T.ID)
WHEN NOT MATCHED THEN
    INSERT (ID) VALUES (S.ID);

ROLLBACK TRANSACTION
SELECT  'FAIL' AS Test,*
FROM    @Target 
```

**示例 B：事务使用 - 物理表**

```
CREATE TABLE SRC (ID INT);
CREATE TABLE TRG (ID INT);

INSERT INTO SRC (ID) VALUES (1),(2),(3),(4),(5)

BEGIN TRANSACTION

MERGE TRG AS T
USING SRC AS S
ON (S.ID = T.ID)
WHEN NOT MATCHED THEN
    INSERT (ID) VALUES (S.ID);

ROLLBACK TRANSACTION
SELECT  'FAIL' AS Test,*
FROM    TRG 
```

**示例 C：事务使用 - Tempdb（本地和全局）**

```
CREATE TABLE #SRC (ID INT);
CREATE TABLE #TRG (ID INT);

INSERT INTO #SRC (ID) VALUES (1),(2),(3),(4),(5)

BEGIN TRANSACTION

MERGE #TRG AS T
USING #SRC AS S
ON (S.ID = T.ID)
WHEN NOT MATCHED THEN
    INSERT (ID) VALUES (S.ID);

ROLLBACK TRANSACTION
SELECT  'FAIL' AS Test,*
FROM    #TRG 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-30T00:02:12.927

您可能可以使用 sql server 的 tablediff.exe 命令行实用程序。它可以在两个表之间进行逐表、一次性的比较，并自动生成 sql，以便您将 dest 同步到源。

还有一个围绕它的 GUI 包装器[http://code.google.com/p/sqltablediff/](http://code.google.com/p/sqltablediff/)这使工作变得更加容易。它将为您生成命令行。

然后您可以创建一个计划任务来运行命令行，然后执行生成的 sql 脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T20:46:01.607

您可以从不同的数据库中进行选择，并使用游标循环选定的数据。在该游标中，您可以执行一些逻辑并从目标表中更新或删除。

此外，SQL 2008 有一个不错的新 MERGE 语句，您可以使用它在一个 T-SQL 查询中选择/插入/更新。 [http://technet.microsoft.com/en-us/library/bb510625%28v=sql.105%29.aspx](http://technet.microsoft.com/en-us/library/bb510625%28v=sql.105%29.aspx)

对于更复杂的过程，我使用第一个选项。对于更直接的同步任务，我使用第二个选项。

作为一个额外的选项，还有服务器集成服务（SSIS）：http: [//blogs.msdn.com/b/jorgepc/archive/2010/12/07/synchronize-two-tables-using-sql-server-integration-服务-ssis-part-i-of-ii.aspx](http://blogs.msdn.com/b/jorgepc/archive/2010/12/07/synchronize-two-tables-using-sql-server-integration-services-ssis-part-i-of-ii.aspx)

# c++ - C++ SetWindowText 不起作用

> ID：13613985
> 
> 赞同：0
> 
> 时间：2012-11-28T20:39:37.340
> 
> 标签：c++, winapi

我正在尝试更改文本框中的文本，但代码似乎不起作用。我正在使用 SetWindowText(hwnd, lpcstr); 并且不知道问题可能是什么

尝试了我想到的一切

```
#include <iostream>
#include <string>
#include <fstream>
#include <windows.h>
#include <tchar.h>

using namespace std;

LRESULT CALLBACK WndProc(HWND, UINT, WPARAM, LPARAM);
enum { ID_LABEL = 1,ID_LONG_TEXT,ID_EDIT,ID_EDIT_1,ID_BUTTON };

int WINAPI WinMain(HINSTANCE hInstance,
               HINSTANCE hPrevInstance,
               LPSTR lpCmdLine,
               int nCmdShow)
{
// Creo la finestra

static TCHAR szWindowClass[] = _T("Draw");
static TCHAR szTitle[] = _T("Draw");

WNDCLASSEX wcex;

wcex.cbSize      = sizeof(WNDCLASSEX);
wcex.style       = CS_HREDRAW | CS_VREDRAW;
wcex.lpfnWndProc = WndProc;
wcex.cbClsExtra  = 0;
wcex.cbWndExtra  = 0;
wcex.hInstance   = hInstance;
wcex.hIcon       = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_APPLICATION));
wcex.hCursor     = LoadCursor(NULL, IDC_ARROW);
wcex.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
wcex.lpszMenuName   = NULL;
wcex.lpszClassName  = szWindowClass;
wcex.hIconSm        = LoadIcon(wcex.hInstance, MAKEINTRESOURCE(IDI_APPLICATION));

if(!RegisterClassEx(&wcex))
{
    MessageBox(NULL,
               _T("Call to RegisterClassEx failed!"),
               _T("Win32 Guided Tour"),
               NULL);

    return 1;
}

HWND hWnd = CreateWindow(
    szWindowClass,
    szTitle,
    WS_CAPTION | WS_SYSMENU | WS_MINIMIZEBOX,
    CW_USEDEFAULT, CW_USEDEFAULT,
    450, 600,
    NULL,
    NULL,
    hInstance,
    NULL);

if(!hWnd)
{
    MessageBox(NULL,
               _T("Call to CreateWindow failed!"),
               _T("Win32 Guided Tour"),
               NULL);

    return 1;
}

ShowWindow(hWnd, nCmdShow);
UpdateWindow(hWnd);

MSG msg;

while(GetMessage(&msg, NULL, 0, 0))
{
    TranslateMessage(&msg);
    DispatchMessage(&msg);
}

return (int) msg.wParam;
}

LRESULT CALLBACK WndProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
TCHAR primo[] = _T("Inserisci la lunghezza della parola da indovinare:");
TCHAR secondo[] = _T("Inserisci le lettere (una dopo l'altra senza ne spazi ne invii):");
HDC hdc;
//HFONT hFont;
HWND button;
HWND edit;
HWND edit_1;
HWND long_edit;
HINSTANCE g_hInst;

switch(uMsg)
{
    case WM_CREATE:
    {
        edit = CreateWindow("Edit", "1h2f3d4",
                             WS_BORDER |WS_CHILD | WS_VISIBLE,
                             5, 30, 23, 20, hWnd, (HMENU) ID_EDIT, NULL, NULL);

        edit_1 = CreateWindow("Edit", "sdgf",
                              WS_BORDER | WS_CHILD | WS_VISIBLE,
                              5, 85, 250, 20, hWnd, (HMENU) ID_EDIT_1, NULL, NULL);

        // Creo il pulsante

        button = CreateWindow("Button","Calcola",
                              BS_PUSHBUTTON | WS_CHILD | WS_VISIBLE,
                              260, 85, 150, 20,hWnd,(HMENU) ID_BUTTON,NULL,NULL);   

        long_edit = CreateWindow("Edit", "kjvh",
                                 WS_BORDER | WS_CHILD | WS_VISIBLE,
                                 5, 125, 250, 300, hWnd, (HMENU) ID_LONG_TEXT, NULL, NULL);
    }

    case WM_PAINT:
    {
        PAINTSTRUCT ps;

        hdc = BeginPaint(hWnd, &ps);

        SetTextColor(hdc, RGB(0,0,0));
        SetBkColor(hdc, RGB(255,255,255));

        TextOut(hdc, 5, 5, primo, sizeof(primo));
        TextOut(hdc, 5, 60, secondo, sizeof(secondo));

        EndPaint(hWnd, &ps);

        break;
    }
    case WM_COMMAND:
    {
        if(edit_1 == NULL)
        {
            MessageBox(hWnd, "Errore", "Errore", uMsg);
        }

        if(LOWORD(wParam) == ID_BUTTON)
        {
            MessageBox(hWnd, "sgf", "ghgfrore", uMsg);
            SetWindowText(edit_1, "lool");
        }
        break;
    }
    case WM_DESTROY:
        PostQuitMessage(0);
        break;
    default:
        return DefWindowProc(hWnd, uMsg, wParam, lParam);
        break;
}

return 0;
} 
```

我已经发布了我所有的代码，您可以自己查看，但我没有发现任何问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T22:00:08.587

看起来您已经`edit_1`在多个范围内声明。您在创建按钮时声明了一个本地按钮，但请注意它位于与引用不同的大括号块中。因此，您可能有一个名为`edit_1`未初始化的单独变量。

**更新**：您更新的代码与原始代码略有不同，但问题仍然存在。 `edit_1`在 WndProc 中声明，但仅在`WM_CREATE`回调期间初始化。当`WM_COMMAND`回调发生时（对 的单独调用`WndProc`），它是未初始化的，因此您的`SetWindowText`调用会转到一个随机窗口，或者更有可能是无处可去。

我建议您使用一个框架，该框架可以轻松地将变量与窗口相关联。显而易见的选择是 MFC 或 ATL。为了理解作用域、局部变量和全局变量等，您可能还需要一些 C++ 辅导。

如果不使用框架，您可能可以通过使变量全局化来使此代码工作，但这不会扩展到比非常简单的程序更大的任何东西。

# slickgrid - Slickgrid 2.1 - 即时应用和删除格式化程序（即，取决于运行时条件）

> ID：13613987
> 
> 赞同：1
> 
> 时间：2012-11-28T20:39:59.010
> 
> 标签：slickgrid, formatter

我正在使用 slickgrid 2.1 并成功地为我的一个列使用格式化程序，以便显示一个按钮，单击该按钮会从网格中删除相应的行。

我的要求和问题：我只需要在用户单击的行中显示此按钮。当用户单击一行，然后单击另一行时，需要隐藏第一个选定行上的按钮，而需要显示第二个选定行上的按钮。我怎样才能以编程方式做到这一点？

非常感谢。

# c# - Nullable 属性在 .HasValue 上引发 NullReferenceException

> ID：13613993
> 
> 赞同：4
> 
> 时间：2012-11-28T20:40:17.270
> 
> 标签：c#, release, nullable, nullreferenceexception

这行 (C#) 代码

```
if (!currentLap.S1.HasValue) 
```

在给我

System.NullReferenceException：对象引用未设置为对象的实例。

前提是我确定 currentLap 变量已实例化（因为它之前已经使用了几行并且它是一个局部变量）并且它具有以下属性：

```
private double? _s1;

[DefaultValue(null)]
[JsonConverter(typeof(ShortDoubleConverter))]
public double? S1
{
    get { return _s1; }
    set { _s1 = value; }
} 
```

它怎么可能抛出 NullReferenceException？这可能与发布模式的优化有关吗？

谢谢，斯蒂沃

编辑：

这是完整的方法代码。

```
public void Update(DriverData driverData)
    {
        LapInfo currentLap = this.CurrentLap;

        if (currentLap != null &&
       this.LastDriverData != null &&
       driverData.TotalLaps != this.LastDriverData.TotalLaps &&
       driverData.InPits &&
       driverData.Speed < 10 &&
       !this.LastDriverData.InPits)
        {
            currentLap.Escaped = true;
        }    

        this.LastDriverData = driverData;

        if ((currentLap == null || currentLap.Lap != driverData.LapNumber) &&
            !this.Laps.TryGetValue(driverData.LapNumber, out currentLap))
        {
            currentLap = new LapInfo() { Lap = driverData.LapNumber, Parent = this, Class = driverData.Class };
            this.Laps.Add(driverData.LapNumber, currentLap);

            int lapsCount = 0, completedDriverLaps = 0, cleanLaps = 0;
            this.TotalLaps = driverData.TotalLaps;

            //if it's not the first lap
            if (driverData.TotalLaps > 0)
            {
                //previous lap
                if (this.CurrentLap == null || !this.CurrentLap.Escaped)
                {
                    this.CompletedLaps++;

                    if (this.CurrentLap == null || !this.CurrentLap.MaxIncident.HasValue)
                        this.CleanLaps++;
                }
            }

            foreach (DriverLapsInfo laps in this.Parent.LapsByVehicle.Values)
            {
                lapsCount += laps.TotalLaps;
                completedDriverLaps += laps.CompletedLaps;
                cleanLaps += laps.CleanLaps;
            }

            this.Parent.Parent.SetLapsCount(driverData, lapsCount, driverData.Class, completedDriverLaps, cleanLaps);
        }

        this.CurrentLap = currentLap;

        //add incidents
        if (driverData.Incidents != null)
        {
            foreach (IncidentScore incident in driverData.Incidents)
            {
                this.CurrentLap.MaxIncident = Math.Max(this.CurrentLap.MaxIncident ?? 0, incident.Strength);
                this.CurrentLap.Incidents++;
                this.Incidents++;
            }                
        }

        LapInfo previousLap = null;
        if ((this.PreviousLap == null || this.PreviousLap.Lap != driverData.TotalLaps) &&
            this.Laps.TryGetValue(driverData.TotalLaps, out previousLap))
        {
            this.PreviousLap = previousLap;

            if (!this.PreviousLap.Date.HasValue)
            {
                this.PreviousLap.Date = DateTime.UtcNow;
            }
        }

        if (currentLap.Position == 0)
            currentLap.Position = driverData.Position;

        if (driverData.CurrentS1 > 0)
        {                
            **if (!currentLap.S1.HasValue)**
            {
                this.UpdateBestS1(driverData.BestS1);
                this.Parent.Parent.UpdateBestS1(driverData.BestS1, driverData.UniqueName);
                currentLap.UpdateS1(driverData.CurrentS1, driverData);

                //reset the best split set at the finish line
                if (this.PreviousLap != null && this.PreviousLap.SplitBest < 0)
                    this.PreviousLap.SplitBest = 0;
            }

            if (driverData.CurrentS2.HasValue && driverData.CurrentS1.HasValue && !currentLap.S2.HasValue)
            {
                double s2 = driverData.CurrentS2.Value - driverData.CurrentS1.Value;    
                this.UpdateBestS2(s2);
                this.Parent.Parent.UpdateBestS2(s2, driverData.UniqueName);
                currentLap.UpdateS2(s2, driverData);                           
            }
        }            

        if (this.PreviousLap != null)
        {
            if (driverData.LastLap > 0)
            {
                if (!this.PreviousLap.S3.HasValue && driverData.LastS2.HasValue)
                {
                    double s3 = driverData.LastLap.Value - driverData.LastS2.Value;
                    this.UpdateBestS3(s3);
                    this.Parent.Parent.UpdateBestS3(s3, driverData.UniqueName);                        
                    this.PreviousLap.UpdateS3(s3, driverData);
                }

                if (!this.PreviousLap.LapTime.HasValue)
                {
                    double? bestLap = this.Parent.Parent.BestLap;
                    this.PreviousLap.UpdateLapTime(driverData, 0);
                    this.Parent.Parent.UpdateBestLap(this.PreviousLap, driverData.BestLap, driverData);
                    this.UpdateBestLap(driverData.BestLap, this.PreviousLap);
                    this.PreviousLap.UpdateLapTime(driverData, bestLap);
                }
            }

            else
            {
                if (this.PreviousLap.SplitBest.HasValue)
                    this.PreviousLap.UpdateBestSplit();
                if (this.PreviousLap.SplitSelf.HasValue)
                    this.PreviousLap.UpdateSelfSplit();
            }
        }

        if (driverData.InPits)
        {
            switch (driverData.Sector)
            {
                case Sectors.Sector1:
                    if (previousLap != null)
                        previousLap.InPits = true;
                    break;
                case Sectors.Sector3:
                    currentLap.InPits = true;
                    break;
            }
        }

        //lap to speed
        if (currentLap.TopSpeed < driverData.Speed)
        {
            driverData.TopSpeedLap = driverData.Speed;
            currentLap.UpdateTopSpeed(driverData.Speed);
        }
        else
            driverData.TopSpeedLap = currentLap.TopSpeed;

        //overall top speed
        if (this.TopSpeed < driverData.Speed)
        {
            driverData.TopSpeed = driverData.Speed;
            this.TopSpeed = driverData.Speed;
            this.Parent.Parent.UpdateTopSpeed(this.TopSpeed, driverData);
        }

        else
            driverData.TopSpeed = this.TopSpeed; 

    } 
```

地球上没有办法让代码到达那条线并且currentLap beeing为空。

还是我要疯了？:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T20:42:57.627

`.HasValue`如果可空引用为空，则不会抛出，但`a.b.HasValue`如果`a`为空，则会抛出。我怀疑`currentLap == null`。我知道你说你确定那`currentLap`不是空的，但我认为这是最有可能的解释。您可以发布更多代码吗？

**更新：**

感谢您发布您的代码。

这不会抛出：

```
void Main() {
    var f = new Foo();

    Console.WriteLine (f.S1);
    Console.WriteLine (f.S1.HasValue);
}

class Foo {
    private double? _s1 = null;

    public double? S1 {
        get { return _s1; }
        set { _s1 = value; }
    }   
} 
```

你能试着创造一个最小的复制品吗？（显示问题的最小代码）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T21:11:16.023

也许看看前一行代码:) - 调试器通常会在实际抛出 NullReferenceException 的那一行之后突出显示下一行。

# node.js - Node.js 内存泄漏导致系统丢失可用内存，即使在节点重启后也是如此？

> ID：13613995
> 
> 赞同：3
> 
> 时间：2012-11-28T20:40:29.573
> 
> 标签：node.js

根据 nodetime，即使节点应用程序重新启动，我的内存泄漏仍然存在。查看下面的“OS - Free Memory”图表；注意内存是如何稳步减少的（尽管节点应用程序重新启动了几十次），直到我重新启动整个服务器：

![在此处输入图像描述](../Images/c3ec45188f6806004c7443555476dfe4.png)

这怎么可能？我从根本上误解了什么吗？我不明白一个进程中的内存泄漏如何能够存活并继续影响操作系统......

机器信息：运行 CentOS 的 Amazon EC2 (m1.large)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T03:40:27.480

一个进程中的内存泄漏（实际上已被杀死）无法做到这一点。

您是否使用 3rd 方系统来提供共享状态？例如，数据库或类似 redis 的会话？在这种情况下，重新启动节点进程只会导致重新连接到相同的共享状态并继续最初启动的任何泄漏。

# node.js - Shell 脚本在使用命令时运行：./script，而不是命令：脚本，其中 PATH=.:'usr/bin':etc

> ID：13613999
> 
> 赞同：1
> 
> 时间：2012-11-28T20:40:51.423
> 
> 标签：node.js, shell, zsh

我正在运行 Zsh，我的当前目录在我的路径中，但是在没有使用时脚本不会运行`./`

阅读在我的终端中执行的这些语句以了解上下文（这`»`是我的 shell 提示符）：

```
» ls
Makefile node_modules  package.json  README.md  src test  tst
» echo $PATH
.:[all_my_other_directories]
» cat test
echo "test";
nodeunit tst/
» ./test                                                                                                                                               
test
OK: 2 assertions (1ms)
» test
» which test
./test 
```

请注意，在`which test`指向正确位置的点上，但`test`不运行它。

我知道将我的本地目录放在我的路径前面是一个坏主意，但我已经将路径更改为`.`最后，它并没有改变任何东西。

我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T20:44:47.963

该关键字`test`是保留的，因为它实际上是一个内置的 shell。更复杂的是，还有一个 shell*命令*也称为`test`.

请改用其他名称 =)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T20:52:24.653

@sampson-chen 完全正确。一个补充：检查您将运行的确切内容

```
type test 
```

，它会给你

```
test is a shell builtin 
```

从而解决问题。不要使用`which`，它总是寻找命令。`type`相当于`whence -v`因此您可以使用前者。