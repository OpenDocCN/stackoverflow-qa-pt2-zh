# StackOverflow 问答 13241000-13241999

# c# - Page_Load() 上的 ASP.NET C# 会话 SessionID 更改

> ID：13241000
> 
> 赞同：0
> 
> 时间：2012-11-05T21:51:53.063
> 
> 标签：c#, asp.net, session, sessionid

> **可能重复：**
> [ASP.NET：请求之间的 Session.SessionID 更改](https://stackoverflow.com/questions/2874078/asp-net-session-sessionid-changes-between-requests)

我觉得这很奇怪，我还是 C# 和 ASP.NET 框架的新手，但是我不明白为什么在每次`Page_Load()`执行时我`Session`都被分配了一个不同的 SessionID。

我的理解是，当客户打开我的应用程序时，他被分配了一个 Session，SessionID 不应该保持不变，直到所述会话过期，并且如果用户刷新页面也不应该改变。

我只有：

```
Page_Load()
{
    Response.Write((String) Session.SessioID);
} 
```

每次我刷新页面时，它都会打印出一个不同的 SessionID

# c# - 向 ListViews 添加元素时如何设置动画/过渡？

> ID：13241002
> 
> 赞同：5
> 
> 时间：2012-11-05T21:51:54.780
> 
> 标签：c#, windows, xaml, microsoft-metro, windows-runtime

我有一个 ListView，我通过绑定添加了 Elements。ListView 看起来像：

```
 <ListView 
        x:Name="ListView" 
        Height="auto" 
        Width="350" 
        ItemsSource="{Binding}" 
        Padding="0,0,-20,0" 
        Grid.Row="1" 
        Grid.Column="0" 
        Background="#EFEFEF"
        ItemContainerStyle="{StaticResource ListViewStyle}">

        <ListView.ItemTemplate>
            <DataTemplate>
                <StackPanel Height="50" VerticalAlignment="Top" Margin="0,0,0,0" 
                        <TextBlock Text="{Binding name} TextWrapping="NoWrap"/>
                </StackPanel>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView> 
```

有了这个基本设置，当元素绑定到基础列表时，已经有一个动画。奇怪的是使用了不同的动画。第一个元素从右侧滑入，所有其他元素都弹出。我正在寻找一种方法来以相同的方式为所有添加的元素设置动画（例如从右侧滑入）。我已经锁定自动生成（由 Blend）ListViewStyle 几个小时了，但找不到任何东西。后来我发现可以在样式里面添加这个属性：

```
<Style x:Key="ListViewStyle" TargetType="ListViewItem">
        <Setter Property="Transitions">
            <Setter.Value>
                <TransitionCollection>
                    <EntranceThemeTransition FromHorizontalOffset="400" />
                    <PopupThemeTransition FromHorizontalOffset="400"/>
                </TransitionCollection>
            </Setter.Value>
        </Setter>
 ...
 </Style> 
```

**EntranceThemeTransition**和**PopupThemeTransition**似乎是正确的属性，因为它们改变了动画的行为。但我不知道如何使用它们或如何禁用它们。如何将一个动画（从右侧滑入）添加到 ListView？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T22:50:41.783

这应该有效：

```
<ListView
    x:Name="lv">
    <ListView.ItemsPanel>
        <ItemsPanelTemplate>
            <VirtualizingStackPanel>
                <VirtualizingStackPanel.ChildrenTransitions>
                    <TransitionCollection>
                        <EntranceThemeTransition
                            FromHorizontalOffset="400" />
                    </TransitionCollection>
                </VirtualizingStackPanel.ChildrenTransitions>
            </VirtualizingStackPanel>
        </ItemsPanelTemplate>
    </ListView.ItemsPanel>
</ListView> 
```

*更新：

您还可以使用`ListView.ItemContainerTransitions`来定义这些转换。

# javascript - 从表中添加/删除行

> ID：13241005
> 
> 赞同：30
> 
> 时间：2012-11-05T21:52:00.157
> 
> 标签：javascript, html-table

我有这张表，上面有一些家属信息，每行都有一个添加和删除按钮，可以添加/删除其他家属。当我单击“添加”按钮时，会在表格中添加一个新行，但是当我单击“删除”按钮时，它首先删除标题行，然后在随后单击时删除相应的行。

这是我所拥有的：

Javascript代码

```
 function deleteRow(row){
      var d = row.parentNode.parentNode.rowIndex;
      document.getElementById('dsTable').deleteRow(d);
   } 
```

HTML 代码

```
<table id = 'dsTable' >
      <tr>
         <td> Relationship Type </td>
         <td> Date of Birth </td>
         <td> Gender </td>
      </tr>
      <tr>
         <td> Spouse </td>
         <td> 1980-22-03 </td>
         <td> female </td>
         <td> <input type="button" id ="addDep" value="Add" onclick = "add()" </td>
         <td> <input type="button" id ="deleteDep" value="Delete" onclick = "deleteRow(this)"  </td>
      </tr>
       <tr>
         <td> Child </td>
         <td> 2008-23-06 </td>
         <td> female </td>
         <td> <input type="button" id ="addDep" value="Add" onclick = "add()"</td>
         <td>  <input type="button" id ="deleteDep" value="Delete" onclick = "deleteRow(this)" </td>
      </tr>
   </table> 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-11-13T01:04:42.050

JavaScript 有一些修改：

```
function deleteRow(btn) {
  var row = btn.parentNode.parentNode;
  row.parentNode.removeChild(row);
} 
```

和 HTML 有一点不同：

```
<table id="dsTable">
  <tbody>
    <tr>
      <td>Relationship Type</td>
      <td>Date of Birth</td>
      <td>Gender</td>
    </tr>
    <tr>
      <td>Spouse</td>
      <td>1980-22-03</td>
      <td>female</td>
      <td><input type="button" value="Add" onclick="add()"/></td>
      <td><input type="button" value="Delete" onclick="deleteRow(this)"/></td>
    </tr>
    <tr>
      <td>Child</td>
      <td>2008-23-06</td>
      <td>female</td>
      <td><input type="button" value="Add" onclick="add()"/></td>
      <td><input type="button" value="Delete" onclick="deleteRow(this)"/></td>
    </tr>
  </tbody>
</table>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-14T14:48:58.453

jQuery 有一个很好的功能，可以[从 DOM 中删除元素](http://api.jquery.com/remove/)。

最近的[() 函数](http://api.jquery.com/closest/)很酷，因为它将“通过测试元素本身并向上遍历其祖先来获取与选择器匹配的第一个元素”。

`$(this).closest("tr").remove();`

每个删除按钮都可以通过函数调用运行非常简洁的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T14:19:53.160

很多好的答案，但这里还有一个；）

您可以将点击处理程序添加到表格

```
<table id = 'dsTable' onclick="tableclick(event)"> 
```

然后找出事件的目标是什么

```
function tableclick(e) {
    if(!e)
     e = window.event;

    if(e.target.value == "Delete")
       deleteRow( e.target.parentNode.parentNode.rowIndex );
} 
```

然后你不必为每一行添加事件处理程序，你的 html 看起来更整洁。如果您不希望 html 中包含任何 javascript，您甚至可以在页面加载时添加处理程序：

```
document.getElementById('dsTable').addEventListener('click',tableclick,false); 
```

​​</p>

这是工作代码：http: [//jsfiddle.net/hX4f4/2/](http://jsfiddle.net/hX4f4/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T21:55:20.803

我会先尝试正确格式化您的表格，如下所示：

我忍不住想，格式化表格至少不会造成任何伤害。

```
<table>
   <thead>
      <th>Header1</th>
      ......
   </thead>
   <tbody>
       <tr><td>Content1</td>....</tr>
       ......
   </tbody>
</table> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T07:14:49.737

这是使用 jQuery的代码[JS Bin 。](http://jsbin.com/uluzaq/1)在所有浏览器上测试。在这里，我们必须单击行才能以美观的效果将其删除。希望能帮助到你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-19T14:36:40.880

我建议使用 jQuery。您现在所做的事情在没有 jQuery 的情况下很容易实现，但是由于您需要新特性和更多功能，jQuery 将为您节省大量时间。我还想提一下，你不应该在一个文档中有多个具有相同 ID 的 DOM 元素。在这种情况下使用类属性。

html:

```
<table id="dsTable">
  <tr>
     <td> Relationship Type </td>
     <td> Date of Birth </td>
     <td> Gender </td>
  </tr>
  <tr>
     <td> Spouse </td>
     <td> 1980-22-03 </td>
     <td> female </td>
     <td> <input type="button" class="addDep" value="Add"/></td>
     <td> <input type="button" class="deleteDep" value="Delete"/></td>
  </tr>
   <tr>
     <td> Child </td>
     <td> 2008-23-06 </td>
     <td> female </td>
     <td> <input type="button" class="addDep" value="Add"/></td>
     <td> <input type="button" class="deleteDep" value="Delete"/></td>
  </tr>
</table> 
```

javascript:

```
$('body').on('click', 'input.deleteDep', function() {
   $(this).parents('tr').remove();  
}); 
```

请记住，您需要引用 jQuery：

`<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>`

这是一个有效的 jsfiddle 示例：http: [//jsfiddle.net/p9dey/1/](http://jsfiddle.net/p9dey/1/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-04T14:58:00.143

使用以下代码删除表的特定行

```
 <td>
 <asp:ImageButton ID="imgDeleteAction" runat="server" ImageUrl="~/Images/trash.png"  OnClientClick="DeleteRow(this);return false;"/>
 </td>
function DeleteRow(element) {
        document.getElementById("tableID").deleteRow(element.parentNode.parentNode.rowIndex);

    } 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-11-19T08:09:17.770

嗨，我会做这样的事情：

```
var id = 4; // inital number of rows plus one
function addRow(){
   // add a new tr with id 
   // increment id;
}

function deleteRow(id){
   $("#" + id).remove();
} 
```

我会有一张这样的桌子：

```
<table id = 'dsTable' >
      <tr id=1>
         <td> Relationship Type </td>
         <td> Date of Birth </td>
         <td> Gender </td>
      </tr>
      <tr id=2>
         <td> Spouse </td>
         <td> 1980-22-03 </td>
         <td> female </td>
         <td> <input type="button" id ="addDep" value="Add" onclick = "add()" </td>
         <td> <input type="button" id ="deleteDep" value="Delete" onclick = "deleteRow(2)"  </td>
      </tr>
       <tr id=3>
         <td> Child </td>
         <td> 2008-23-06 </td>
         <td> female </td>
         <td> <input type="button" id ="addDep" value="Add" onclick = "add()"</td>
         <td>  <input type="button" id ="deleteDep" value="Delete" onclick = "deleteRow(3)" </td>
      </tr>
   </table> 
```

此外，如果您愿意，您可以创建一个循环来构建表格。所以建表会很容易。你可以用编辑做同样的事情:)

# objective-c - 为什么 Xcode 坚持将 (id) 作为方法参数？

> ID：13241009
> 
> 赞同：0
> 
> 时间：2012-11-05T21:52:51.333
> 
> 标签：objective-c, xcode

我在接口中的方法声明：

```
-(void)doSomethingOnGrass:(Grass*)grass; 
```

在编写实现时，Xcode 的自动完成功能倾向于这样写：

```
-(void)doSomethingOnGrass:(id)grass {

} 
```

Xcode 将参数类型更改为`id`。我意识到`id`无论如何我都可以使用它，但我不确定在这种情况下更改参数类型的意义何在。它是什么？

Xcode 4.3.2。

# jquery - 覆盖 event.preventDefault()

> ID：13241011
> 
> 赞同：0
> 
> 时间：2012-11-05T21:53:10.877
> 
> 标签：jquery

我有以下 jQuery Ajax 代码：

```
 $("#new_form").submit(function (event) {
        event.preventDefault();
        $.post("/home/new_ajax", $(this).serialize(), function (data) {
            if (data.errors == '') {
                $("#new_form").submit();
            } else {
                alert(data.errors);
            }
        }, "json");
    }); 
```

然而，由于

```
event.preventDefault(); 
```

这条线不起作用：

```
 $("#new_form").submit(); 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T21:56:31.043

您可以使用[`.trigger()`](http://api.jquery.com/trigger/)而不是`.submit()`-- 它允许您传递额外的参数，然后您的事件处理程序可以使用这些参数：

```
$("#new_form").submit(function (event, skipCustomStuff) {
    // If second parameter is truthy, let the submission happen
    if (skipCustomStuff) return;

    event.preventDefault();
    $.post("/home/new_ajax", $(this).serialize(), function (data) {
        if (data.errors == '') {
            // trigger submission passing in true as second parameter
            $("#new_form").trigger('submit', [true]);
        } else {
            alert(data.errors);
        }
    }, "json");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T22:10:10.633

最简单的方法是这样做`$("#new_form")[0].submit()`，它将绕过任何 jQuery 绑定的处理程序并提交表单。

```
$("#new_form").submit(function (event) {
    event.preventDefault();
    $.post("/home/new_ajax", $(this).serialize(), function (data) {
        if (data.errors == '') {
            $("#new_form")[0].submit();
        } else {
            alert(data.errors);
        }
    }, "json");
}); 
```

# assembly - 通过单个位或作为 8051 架构上的字节设置 SFR

> ID：13241012
> 
> 赞同：1
> 
> 时间：2012-11-05T21:53:11.550
> 
> 标签：assembly, 8051

将整个字节分配给 SFR 或对其值应用 AND 或 OR 是否有区别？

换句话说，如果我将一些位设置为与以前相同的值，或者这会触发一些硬件反应，这是否重要？

例如我从：

```
MOV UARTCON, 0x9b 
```

然后我可以用相同的最终值

```
ORL UARTCON, 0x40 
```

或者

```
MOV UARTCON, 0xdb 
```

甚至

```
SETB UARTCON.6 
```

有什么区别吗？

我在这里不是特别谈论 UARTCON，而是谈论 SFR 的一般机制。是一组位重要还是只是那个位的变化？

**UPD**我可以缩小问题的范围：即使使用`CLR`,`SETB`和?`ORL``AND`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:23:53.457

可能有一些位在读取和写入时具有不同的含义，例如端口引脚。写入时设置锁存器和输出，读取时返回输入。要配置输入引脚，请向其写入 1。假设您已设置`P1.0`为输入并且它被外部拉低，即它将被读取为 0。现在如果您也想设置`P1.1`为输入，您可以这样做`SETB P1.1`，并且可以正常工作。但是，如果您读取 的值`P1`，修改该值，然后将其写回，则它将不起作用：

```
MOV P1, #1 ; set P1.0 to input
MOV A, P1  ; reads 0
ORL A, #2
MOV P1, A  ; P1.0 no longer input 
```

请注意`ORL P1, #2`，虽然它在逻辑上执行相同的操作，但之所以*有效*，是因为处理器具有特殊支持并且知道读取端口锁存器而不是引脚输入。

您提到的另一种可能性是写入触发了某些东西。一个这样的例子是`SBUF`。即使您在那里写入相同的值，它也会触发传输。但是，这与您的问题并不真正相关，因为它不是可寻址的。在标准 8051 的上下文中，我想不出另一个表现出类似行为的 SFR。

# java - 如何附加 CharStreams？

> ID：13241015
> 
> 赞同：0
> 
> 时间：2012-11-05T21:53:24.790
> 
> 标签：java, guava

当我使用 object`OutputSupplier`时，添加第一行 ( `CharStreams.write`) 会正确执行。但随后再次调用`CharStreams.write`会引发`IOException`.

这是对象的正确行为吗？如果是这样，如何`String`在不关闭内联流的情况下将 a 附加到供应商对象？

```
...

final Process process = Runtime.getRuntime().exec("su");

OutputSupplier<OutputStreamWriter> writerSupplier = CharStreams.newWriterSupplier(new OutputSupplier<OutputStream>() {
    @Override
    public OutputStream getOutput() throws IOException {
        return process.getOutputStream();
    }
}, Charsets.UTF_8);
// ok
CharStreams.write(someCommand, writerSupplier);
...
// IOException
CharStreams.write(otherCommand, writerSupplier); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:03:51.873

这绝对是预期的行为。

`CharStreams.write`with`OutputSupplier`打开输出流，写入并关闭它。这是重点的一部分。大概`Process.getOutputStream()`不会让您多次打开和关闭。

一次完成所有写入，或者更有可能的是，不要自己使用`CharStreams.write`和处理关闭流。

# powershell-2.0 - PowerShell Array：使用 gci 从数组中选择一个值

> ID：13241016
> 
> 赞同：1
> 
> 时间：2012-11-05T21:53:26.980
> 
> 标签：powershell-2.0

我在共享上有一个目录，每个文件名的前缀都必须移动到特定目录。-filter 命令用于移动文件，但最好使用数组的值。任何帮助将不胜感激。

```
$source ="\\127.0.0.1\share\"

$File_Array_8HP70=@("108701")
$File_Array_8HP70X=@("108702")
$File_Array_9HP48=@("109401", "1094080", "1094090")
$File_Array_9HP48X=@("109402", "1094091", "1094082", "1094092")

$destination="\\127.0.0.1\TestFolder1\$DTS"
         $destination1="\\127.0.0.1\TestFolder2\$DTS"
         $destination2="\\127.0.0.1\TestFolde3\$DTS"

         $destination_array=@("$destination", "$destination1", "$destination2")

# filter works below - need to use array

         #$files = get-childitem $source -filter "108701*" -recurse
         #foreach ($file in $files)
         #{move-item $file.fullname $destination_array[0] -force}

         $files = gci $source |select-object -equals $file_array_8HP70
         foreach ($file in $files)
         {move-item $file.name is $($file_array_8hp70.name) $destination_array[0] -force} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:52:17.797

如果你写：

```
$source ="\\127.0.0.1\share\*"
$File_Array_8HP70_start = $File_Array_8HP70 | % {$_+"*"}
$files = get-childitem $source -include $File_Array_8HP70_start -recurse 
```

它应该有帮助。

# css - 图像库的裁剪图像问题

> ID：13241021
> 
> 赞同：0
> 
> 时间：2012-11-05T21:53:35.587
> 
> 标签：css, image, gallery, crop

我有一个图片库。缩略图的宽度为 240 像素，但高度各不相同。我尝试裁剪图像，使它们都是 150 像素高。

目前我有这个：

HTML

```
<div data-category="category1">
<a href="image1.jpg" rel="lightbox[on]" title="">
<img src="image1.jpg" width="" height="" />
</a></div>

<div data-category="category1">
<a href="image2.jpg" rel="lightbox[on]" title="">
<img src="image2.jpg" width="" height="" />
</a></div>

<div data-category="category1">
<a href="image3.jpg" rel="lightbox[on]" title="">
<img src="image3.jpg" width="" height="" />
</a></div>

<div data-category="category2">
<a href="image4.jpg" rel="lightbox[on]" title="">
<img src="image4.jpg" width="" height="" />
</a></div>

<div data-category="category2">
<a href="image5.jpg" rel="lightbox[on]" title="">
<img src="image5.jpg" width="" height="" />
</a></div>

<div data-category="category2">
<a href="image6.jpg" rel="lightbox[on]" title="">
<img src="image6.jpg" width="" height="" />
</a></div> 
```

CSS

```
 .gallery {
 position:relative;
 }

 .gallery > div {
 position:absolute;
 }

 .gallery > div > a > img {
 position:absolute;
 top: 0;
 left: 0;
 clip: rect(0px,240px,150px,0px);
 overflow: hidden;
 border:none;
 } 
```

这适用于将图像裁剪为 150 像素，但只有顶行的图像是对齐的。其他行上的图像未对齐，因为它们被放置在上一行图像的原始高度的正下方。（裁剪并没有去掉图像的其余部分。图像的其余部分不可见，但它仍然存在，）。我需要在我的 CSS 中添加什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:21:29.573

当然，您的代码比您在此处粘贴的内容要复杂一些，但请考虑以下基本 css：

```
.gallery {  position: relative;  }
.gallery > div {  float: left;  }
.gallery > div > a {  max-height: 150px;  width: 240px;  overflow: hidden;  display: inline-block;  }
.gallery > div > a > img {  border: none;  } 
```

这是一个工作示例：

[http://jsfiddle.net/3W7Xt/](http://jsfiddle.net/3W7Xt/)

问候

# java - 用特定分隔符分隔的一系列数字的 Java 正则表达式

> ID：13241022
> 
> 赞同：-1
> 
> 时间：2012-11-05T21:53:40.590
> 
> 标签：java, regex

我需要一个正则表达式来描述一个字符串，该字符串包含至少三 (3) 个和最多六 (6) 个 2 位数字和任意顺序的 3 位数字。数字应该用空格分隔，`#`但也可以包含空格。此字符串的示例是：

```
34 #563# 23

123#678#12#44# 45 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T21:57:30.013

这个怎么样：

```
^s*\d{2,3}\s*(?:#\s*\d{2,3}\s*){2,5}$ 
```

**解释：**

```
^         # Start of string
\s*       # optional whitespace
\d{2,3}   # match a number (2 to 3 digits)
\s*       # optional whitespace
(?:       # Match...
 \#       # - a hashmark
 \s*      # - optional whitespace
 \d{2,3}  # - a number
 \s*      # - optional whitespace
){2,5}    # 2 to 5 times
$         # End of string 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T22:00:18.440

```
/\d{2,3}(?:\s*#\s*\d{2,3}){2,5}/ 
```

解释：

```
\d 
```

捕获一个数字。

```
{2,3} 
```

两三遍，然后：

（？：……）

将以下内容分组，但不要捕获组本身捕获的内容。

```
\s* 
```

捕获零个或多个空格...

```
# 
```

...一个英镑的符号。

```
\s* 
```

...零个或多个空格...

```
\d{2,3} 
```

和另一个两位或三位数字。

```
{2,5} 
```

该组做两到五次，总共三到六个数字。

要强制它匹配一个完整的字符串，您可以添加`^\s*`到开头和`\s*$`结尾，因为`^`匹配字符串的开头和`$`结尾，但我实际上建议只使用克拉和美元符号并改用`trim`函数, 因为`\s*`（或真的，and `*`）效率极低。超过一两个字符串，没什么大不了的，但如果你说：从电话簿中提取号码，你会很糟糕。

# ios - 与未知开发者在 Hackhackons 中进行 iOS 开发？如何将 Xcode 和调试工具分享给没有 OSX 设备的人？

> ID：13241023
> 
> 赞同：0
> 
> 时间：2012-11-05T21:53:47.880
> 
> 标签：ios, xcode, social, osx-server, screensharing

*由于[这里](https://stackoverflow.com/questions/2427813/develop-iphone-application-remotely)有类似的线程，我错误地建议关闭，但现在这个线程完全不同，与称为 Hackhacktons 的快速开发活动有关，在那里你会遇到使用杂项设备的陌生人。通常，我们使用 Android 进行开发是因为不想将任何人排除在外，但 iOS 会非常酷，现在正努力使其成为可能。有了新的 Mountain Lion 和 ScreenSharing，在没有真正拥有 OSx 的情况下开发 iOS 应用程序显然变得可能。*

**未解决**

> 三、Mountain Lion 和 VNC：这个选项与购买 Apple Airs 等非虚拟 Apple 产品的麻烦有什么不同？调试与 VNC 没有区别，不是吗？
> 
> V. 我的朋友说 Mac Mini 实际上非常强大，所以通过它我可以将 Xcodes 提供给我们没有时间安装的黑客程序中的许多不知名的开发人员。正确的？
> 
> 六、不带服务器的 Mac Mini 对用户数量有限制吗？我想为没有 OSX 设备的合作者提供 Xcode 和调试工具。

**解决了**

> I. **[bames53, yes]**在工作站附近的强大的 Apple Desktop Mac Pro 计算机上运行 Apple 服务器怎么样？工作站可以运行 Windows、Debian、Ubuntus 和 OpenBSD 等任何东西吗？因此，开发人员可以保留自己的机器而无需任何过渡到 Apple 产品的成本，可能吗？
> 
> 二、**[bames53, no]**如果有 10 位开发人员使用 Apple 服务器，我需要每年支付 99 美元还是 99 美元乘以 10？
> 
> 四。**[bames53, no]**有没有像 x220 这样的 3G 的 Apple 产品可以用作 hackhactons 中的热点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:09:19.683

听起来您在询问 OS X Server 上的客户端限制。

曾经有 10 个用户限制的 OS X Server 许可证，而无限制的客户端许可证更昂贵。新版本没有任何限制；他们现在都是无限客户的。

> *在工作站附近的强大的 Apple Desktop Mac Pro 计算机上运行 Apple 服务器怎么样？工作站可以运行 Windows、Debian、Ubuntus 和 OpenBSD 等任何东西吗？因此，开发人员可以保留自己的机器而无需任何过渡到 Apple 产品的成本，可能吗？*

I. 您可以使用所有平台上可用的软件远程登录 OS X。我从未尝试过让多个用户通过 VNC 登录到不同的帐户，但这[表明](https://superuser.com/a/295459)它从 Lion 开始就受支持。

> *如果有 10 个开发者使用 Apple 服务器，我需要每年支付 99 美元还是 99 美元乘以 10 美元？*

二、大概您指的是在 iOS 或 OS X 应用商店上销售的每年 99 美元的成本。如果您不在应用商店上销售，则根本不必支付，如果您是，我相信您只需为整个组织支付 99 美元/年。

> *如果我在任何 Mac 计算机上安装 OS X Lion，任何数量的用户都可以登录并开始使用 Xcode，而无需购买任何 Apple 产品？如果这是真的，这可以大大加快 iOS 的开发速度，而不会浪费时间进行各种安装。此选项与购买 Apple Airs 等非虚拟 Apple 产品的麻烦有什么不同？调试与 VNC 没有区别，不是吗？*

是的，在我看来你说得对。您可能实际上并不希望 100 个用户尝试在同一台机器上运行 Xcode...

> *我正试图找到一种在大多数人缺乏 Apple 产品的黑客活动中开发 Apple 应用程序的方法。如果我可以购买一台运行服务器并充当 3G 热点的小型 Apple Mini，那么在有限的时间内开发 Apple 产品会容易得多。我确实喜欢运行 x220 笔记本电脑，因为它支持 3G，而不是在 Apple 笔记本电脑中，所以转向 Apple 产品对我来说并不是真正的选择。然后再次购买小型 Mac-mini 可能对 VNC 更有用，人们的笔记本电脑和 iPad 中都有显示器，但是必须支持硬件编码，这样很容易添加许多显示器或速度很慢。*

[M]同一硬件上的任何用户都将受到更多资源限制。除了适用于任何 VNC 会话的正常差异之外，我不知道有任何差异。不，不幸的是，还没有内置蜂窝访问的 OS X 系统。

# ios - 按下时使按钮填充 UITableView

> ID：13241024
> 
> 赞同：1
> 
> 时间：2012-11-05T21:53:48.503
> 
> 标签：ios, uitableview, uibutton, uikit

我创建了一个简单的 rss 阅读器，它可以毫无问题地填充 viewdidLoad 上的 tableviewcell。我的问题是，每当我单击按钮时，表格视图都不会改变。我尝试使用内部的按钮修饰重新加载，但仍然没有任何反应。Xcode 和 iOS 编程相当新，所以任何帮助都很棒。

.m 文件

```
#import "ViewController.h"
#import "KMXMLParser.h"
#import "WebViewController.h"
#import "SportsViewController.h"

@interface ViewController ()
@end

@implementation ViewController
{
    NSArray *loadData;
    NSURL *thumbnails;
}

@synthesize parseResults=_parseResults;

- (void)viewDidLoad
{
    [super viewDidLoad];
    KMXMLParser *parser = [[KMXMLParser alloc]  initWithURL:@"http://www.daytonastate.edu/rss/it.xml" delegate:nil];

    _parseResults = [parser posts];
   [self refreshFeed];
        // Do any additional setup after loading the view, typically from a nib.
}

-(void) refreshInvoked:(id)sender forState:(UIControlState)state
{
    [self refreshFeed];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(void)refreshFeed
{
    KMXMLParser *parser = [[KMXMLParser alloc]  initWithURL:@"http://www.daytonastate.edu/rss/it.xml" delegate:nil];

    _parseResults = [parser posts];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return self.parseResults.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"DataCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle  reuseIdentifier:CellIdentifier];
    }// Configure the cell...
        cell.textLabel.text = (self.parseResults)[indexPath.row][@"title"];

    cell.detailTextLabel.text = (self.parseResults)[indexPath.row][@"summary"];

    [self reloadData];

    return cell;
} 
#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    WebViewController *vc = [[WebViewController alloc] init];

    vc.url = [NSURL URLWithString:(self.parseResults)[indexPath.row][@"link"] ];

    [self.navigationController pushViewController:vc animated:YES];

    //Makes sure function clicks to reader feed.

    // Navigation logic may go here. Create and push another view controller.
}

-(IBAction)pressBtn:(id)sender
{
    UIButton *button= [UIButton buttonWithType:UIButtonTypeRoundedRect];

    if (button.tag==1)
    {
        NSLog(@"Press button 1");
        KMXMLParser *parser = [[KMXMLParser alloc]  initWithURL:@"http://www.daytonastate.edu/rss/cea.xml" delegate:nil];

        _parseResults = [parser posts];

        [self reloadData];
    }
    if (button.tag==2)
    {
        NSLog(@"Press button 2");
        [self EventsBtn:nil];
    }
}

- (IBAction)NewsBtn:(id)sender
{
      KMXMLParser *parser = [[KMXMLParser alloc]  initWithURL:@"http://rss.cnn.com/rss/cnn_topstories.rss" delegate:nil];

        _parseResults = [parser posts];
    NSLog(@"reload happened");
   // self.printMessage = [[PrintHello alloc] init]; // EDIT: THIS LINE WAS MISSING NOW IT WORKS
    //[self.printMessage Print];

    NSLog(@"NewsBtn Pressed");
}

- (IBAction)SportsBtn:(id)sender
    {
       KMXMLParser *parser = [[KMXMLParser alloc]  initWithURL:@"http://www.daytonastate.edu/rss/it.xml" delegate:nil];

        _parseResults = [parser posts];
    }

- (IBAction)EventsBtn:(id)sender
{
    KMXMLParser *parser = [[KMXMLParser alloc]  initWithURL:@"http://www.daytonastate.edu/rss/events.xml" delegate:nil];
    _parseResults = [parser posts];
    NSLog(@"eventsBtn Pressed");
}

- (IBAction)WeatherBtn:(id)sender
    {
        KMXMLParser *parser = [[KMXMLParser alloc]  initWithURL:@"http://w1.weather.gov/xml/current_obs/KDAB.rss" delegate:nil];

        _parseResults = [parser posts];
    }
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:17:38.040

在您的`pressBtn:`方法中，替换此行：

```
UIButton *button= [UIButton buttonWithType:UIButtonTypeRoundedRect]; 
```

和：

```
UIButton *button = (UIButton *)sender; 
```

这假设在 IB 中您已经将该`pressBtn:`方法连接到相应的按钮。当您的`pressBtn:`操作被调用时，您拥有的代码正在创建一个新按钮。由于这个新按钮的`tag`值为 0，因此什么也没有发生。我提出的代码实际上利用了用户点击的按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:40:14.693

使用调用者（发送者），这是您对其采取行动的项目。不要创建新按钮，您要检查按钮的标签，因此新按钮不是您工作的项目。

试试你的伴郎，:)。

# c# - 激活热键组合后如何正确模拟键盘事件

> ID：13241025
> 
> 赞同：0
> 
> 时间：2012-11-05T21:53:53.820
> 
> 标签：c#, keyboard-events, sendinput

我有一个注册某个热键组合以进行激活的程序。对于这个问题，假设这个热键是 Ctrl + Alt + D。一旦按下组合，我的程序将使用 SendInput 模拟一些其他键盘事件到活动窗口，例如，它可以模拟 Ctrl + A。我的问题是 Ctrl + A 的模拟无法正常工作，因为（我认为）仍然从热键组合中按下 Ctrl 键。我正在考虑的解决方案之一是为我的热键组合中的每个键发送 Key Up 事件，然后模拟 Ctrl + A，但是我想检查这是否是处理它的正确方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:58:50.633

首先，了解如何发送键盘消息的问题经常被问到。我假设您没有花费太多时间来寻找以前的答案。其次，了解初学者经常错误地认为发送键盘消息是最简单和最有效的解决方案。事实是，它通常不是最简单的，也不是最有效的，也不是最可靠的。

如果您要使用这样的 Windows 消息，那么请学习使用 Spy++。如果您不知道那是什么，请花一点时间熟悉 VS 工具菜单中的可用工具。

一个可能更简单、更有效和更可靠的解决方案通常是使用 WM_GETTEXT 和 WM_SETTEXT 消息。**并预测未来的问题，按下另一个应用程序中的按钮会向按钮的父**级发送 BN_CLICKED 通知。您可以使用 Spy++ 获得更多消息问题的答案。

使用 SendInput 可能是您的最佳解决方案，但您的要求还不足以确定。在我看来，SendInput 应该是最后的手段，只有在其他可能性不可行时才使用。请花一些时间阅读与该问题相关的众多文章和以前的答案。

# actionscript-3 - AS3放大和缩小鼠标点击而不是注册

> ID：13241030
> 
> 赞同：1
> 
> 时间：2012-11-05T21:54:21.217
> 
> 标签：actionscript-3, flash, apache-flex, zooming

我正在尝试通过单击和双击鼠标事件来放大和缩小蒙面鼠标平移图像。我让图像放大，但它总是放大左边缘注册点，而不是我点击的地方。我完全不知道如何编写代码，并且在互联网上花了一整天的时间试图弄清楚但没有运气。我希望有人可以帮助我解决这个问题！

```
import com.greensock.*;//Greensock Tweening Platform.

//Variables
var percX:Number;
var percY:Number;
var destX:Number;
var destY:Number;

//Image panned and masked
this.mask = mask_mc;
stage.addEventListener(MouseEvent.MOUSE_MOVE,mousemove);
function mousemove(e:MouseEvent) {
    if (mask_mc.hitTestPoint(stage.mouseX,stage.mouseY,false)) {
        if (imgLoader.width>mask_mc.width) {//Avoids Scrolling if image is under mask area width
            percX = mask_mc.mouseX/mask_mc.width;
        }
        if (imgLoader.height>mask_mc.height) {//Avoids Scrolling if image is under mask area height
            percY = mask_mc.mouseY/mask_mc.height;
        }
        destX = -(imgLoader.width-mask_mc.width)*percX;
        destY = -(imgLoader.height-mask_mc.height)*percY;
        TweenMax.to(imgLoader,.5,{x:destX,y:destY});
    }
}
//Add listeners for the imgLoader movie clip.
imgLoader.doubleClickEnabled = true;  
imgLoader.addEventListener(MouseEvent.CLICK, increaseSize);
imgLoader.addEventListener(MouseEvent.DOUBLE_CLICK, decreaseSize);

//This function increases the scale of the image
function increaseSize(event:MouseEvent):void{
TweenLite.to(imgLoader, 1, {scaleX:2, scaleY:2});
}

//This function decreases the scale of the image
function decreaseSize(event:MouseEvent):void{
TweenLite.to(imgLoader, 1, {scaleX:1, scaleY:1});
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T22:17:55.770

这个答案来自[这里](http://timwhitlock.info/blog/2008/04/scale-rotate-around-an-arbitrary-centre/)

添加此功能：

```
function scaleAroundMouse(objectToScale:DisplayObject, scaleAmount:Number, bounds:Rectangle = null, onComplete:Function = null):TweenLite {
    // scaling will be done relatively
    var relScaleX:Number = scaleAmount / objectToScale.scaleX;
    var relScaleY:Number = scaleAmount / objectToScale.scaleY;
    // map vector to centre point within parent scope

    var scalePoint:Point = objectToScale.localToGlobal( new Point(objectToScale.mouseX, objectToScale.mouseY));
    scalePoint = objectToScale.parent.globalToLocal( scalePoint );
    // current registered postion AB
    var AB:Point = new Point( objectToScale.x, objectToScale.y );
    // CB = AB - scalePoint, objectToScale vector that will scale as it runs from the centre
    var CB:Point = AB.subtract( scalePoint );
    CB.x *= relScaleX;
    CB.y *= relScaleY;
    // recaulate AB, objectToScale will be the adjusted position for the clip
    AB = scalePoint.add( CB );
    // set actual properties

    if(bounds){
     var limits:Rectangle = new Rectangle(
        bounds.x + (bounds.width - (objectToScale.width * relScaleX)),
        bounds.y + (bounds.height - (objectToScale.height * relScaleY)),
        (objectToScale.width * relScaleX) - bounds.width,
        (objectToScale.height * relScaleY) - bounds.height
     );

     if(AB.x < limits.x) AB.x = limits.x;
     if(AB.x > limits.x + limits.width) AB.x = limits.x + limits.width;
     if(AB.y < limits.y) AB.y = limits.y;
     if(AB.y > limits.y + limits.height) AB.y = limits.y + limits.height;       
    }

    return TweenLite.to(objectToScale,1,{onComplete: onComplete, scaleX: scaleAmount, scaleY: scaleAmount, x: AB.x, y: AB.y);
} 
```

然后将您的大小调整功能更新为：

```
function increaseSize(event:MouseEvent):void{
    stopMouseMove();
    scaleAroundMouse(imgLoader, 2, null, resumeMouseMove);
}

function decreaseSize(event:MouseEvent):void{
    stopMouseMove();
    scaleAroundMouse(imgLoader, 1, null, resumeMouseMove);
}

function stopMouseMove():void {
   stage.removeEventListener(MouseEvent.MOUSE_MOVE,mousemove);
}

function resumeMouseMove():void {
   stage.addEventListener(MouseEvent.MOUSE_MOVE,mousemove);
} 
```

我还在函数中添加了一个 bounds 参数。如果您不希望内容的边缘在蒙版中可见，这将非常有用。因此，如果您可以通过将掩码的边界传递给函数来使用它：

```
scaleAroundMouse(imgLoader, 1, myMask.getBounds(this)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:04:41.360

此示例使用缩放效果类，可能有助于实现您正在寻找的缩放效果[http://graphics-geek.blogspot.com/2010/06/video-image-zoom-effect-in-flex-4.html](http://graphics-geek.blogspot.com/2010/06/video-image-zoom-effect-in-flex-4.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T23:23:28.030

```
var mat:Matrix=new Matrix();
mat.translate(-p.x,-p.y);
mat.scale(desiredScale,desiredScale);
mat.translate(p.x,p.y);
yourObject.transform.matrix=mat; 
```

这取自我大约一个月前发布的一个问题。你可以[在这里](https://stackoverflow.com/a/12649936/1515620)看到它。虽然我最终没有使用那个特定的片段（实际上我使用了已发布的脚本 LondongDrugs_MediaServ 的修改版本），但它可以工作并且更容易理解和实施。

# c++ - 防止 QGraphicsItem::itemAt() 在“背景项目”上

> ID：13241034
> 
> 赞同：2
> 
> 时间：2012-11-05T21:54:39.583
> 
> 标签：c++, qt

我正在尝试使用插件设置 GUI。在我目前的阶段，我需要用户单击并指定点的位置。

我设置的插件架构要求插件返回插件希望使用的 QGraphicsItem。在主程序（未来的插件编写者将无法访问）中，我设置了一个背景图像来引导点击。插件可以使用 itemChange() 偷偷访问 scene() 并在正在设置的场景上安装 eventFilter()。这允许插件访问场景点击并处理它需要的任何信息。但是，itemAt() 调用正在返回背景图片。

我希望防止此背景像素图返回所有未来插件的 itemAt()。这可能吗？

* * *

试过：

```
 setEnabled(false); //No success 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:53:44.920

这不会直接回答您的问题，但应该可以解决您的问题：我建议`QGraphicsScene::drawBackground()`在那里重新实现和绘制您的像素图。这就是该方法的用途。

类似的方法是将像素图放在资源文件中，然后使用样式表将其设置为 QGraphicsView 或其视口小部件的背景（我认为这些效果略有不同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T02:57:52.130

要使 itemAt()（或任何其他碰撞检测方法）不可见项目，您可以使 boundingRect() 方法返回一个宽度和高度为零的 QRectF。

这虽然具有使 QGraphicsView 的任何部分视口更新模式发生故障的副作用，因为 QGV 不知道项目将在哪里绘制自身。这可以通过让 QGV 对每次重绘进行完全更新来解决（setViewportUpdateMode(QGraphicsView::FullViewportUpdate)）。根据您的场景，这可能是一个可以接受的折衷方案。如果您使用的是 OpenGL 图形后端，则视口更新将始终是完整更新。

# php - PHP XSL 条件语句（CHOOSE、WHEN、IF、OTHERWISE）导致 500 内部服务器错误

> ID：13241038
> 
> 赞同：2
> 
> 时间：2012-11-05T21:55:15.010
> 
> 标签：php, xslt, conditional-statements, xsl-choose

这就是问题所在。我正在获取从 Web 应用程序返回的返回 XML 数据，并通过 XSLT 将其处理为 HTML 以供用户查看。这在我的本地 WAMP 服务器（Apache 2.2.21、PHP 5.3.8、libxml 2.7.8、libxslt 1.1.23）上完美运行。但是，当我将它加载到我的 Arvixe 托管服务器（Apache 2.2.23、PHP 5.2.17、libxml 2.7.8、libxslt 1.1.27）时，它失败了。我能够深入研究并发现 xsl 转换正在工作，直到我合并任何条件语句（选择、何时、如果、否则等），此时它会引发“500 内部服务器错误”。我检查了错误日志，没有与问题相关的内容。如果我消除所有条件语句并仅显示每个 XML 节点的值：

```
<xsl:value-of select="MORTGAGEDATA/APPLICATION/UNDERWRITINGCASE/FHAVA/CaseTypeCD"/> 
```

一切正常

但是如果我添加一个条件语句：

```
 <xsl:choose>        
        <xsl:when test="MORTGAGEDATA/APPLICATION/UNDERWRITINGCASE/FHAVA/FHAVAFieldOfficeCode = '0670'">
            <xsl:text>Tulsa, OK</xsl:text>
        </xsl:when>
        <xsl:when test="MORTGAGEDATA/APPLICATION/UNDERWRITINGCASE/FHAVA/FHAVAFieldOfficeCode = '0339'">
            <xsl:text>Washington, DC</xsl:text>
        </xsl:when>
        <xsl:when test="MORTGAGEDATA/APPLICATION/UNDERWRITINGCASE/FHAVA/FHAVAFieldOfficeCode = '0344'">
            <xsl:text>Wilmington, DE</xsl:text>
        </xsl:when>
        <xsl:otherwise>
            <xsl:text>Not Applicable</xsl:text>
        </xsl:otherwise>
    </xsl:choose> 
```

浏览器显示 500 Internal Server Error

任何人都有任何线索可能导致这种情况？

在我的智慧尽头！无法为我的生活弄清楚为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T22:39:25.313

还不能发表评论，但我注意到你的 xsl:when you have `MORTGAGEDATA/PROJECT/@FHAVAApprovedCondominiumClassIndicator/@PartyType`. 属性不能有子属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:56:15.327

永远无法找出 php 5.3 升级导致此问题的原因，但最终解决方案是通过目录中 .htaccess 文件中的处理程序将此功能转换回 php 5。现在它完美地工作了。

# spring - 为什么 Websphere 不喜欢 BIRT？

> ID：13241045
> 
> 赞同：5
> 
> 时间：2012-11-05T21:55:55.920
> 
> 标签：spring, websphere, birt

我正在尝试开始将项目部署到 Websphere，但我得到了以下错误线索。（缩短）

```
ERROR org.springframework.web.context.ContextLoader - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'birtView' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Cannot resolve reference to bean 'birtEngine' while setting bean property 'birtEngine'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'birtEngine': FactoryBean threw exception on object creation; nested exception is java.lang.RuntimeException: Could not start the Birt engine!
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'birtEngine': FactoryBean threw exception on object creation; nested exception is java.lang.RuntimeException: Could not start the Birt engine!
Caused by: java.lang.RuntimeException: Could not start the Birt engine!
Caused by: org.eclipse.birt.core.exception.BirtException: error.CannotStartupOSGIPlatform
Caused by: org.eclipse.birt.core.framework.FrameworkException: Cant register the ExtensionRegistry classpath
Caused by: org.eclipse.core.runtime.CoreException: Extension registry provider is already set. 
```

我在网上找到的倒数第三个错误的解决方案是删除以下代码行。

```
config.setEngineHome("C:/birt-runtime-3_7_0/ReportEngine"); 
```

但是，这对我们的设置不存在且不必要。它（使用的 BIRT 特定代码）与这个在线示例非常相似：

[http://www.springsource.org/BusinessIntelligenceWithSpringAndBIRT](http://www.springsource.org/BusinessIntelligenceWithSpringAndBIRT)

BirtView 和 BirtEngineFactory 是我项目中唯一相关的部分。我去了这个错误页面和论坛条目并尝试了代码添加。那没起效。该项目启动并在 Tomcat 6x 上运行，没有任何问题。

[http://www.eclipse.org/forums/index.php/m/727929/](http://www.eclipse.org/forums/index.php/m/727929/)

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=351052](https://bugs.eclipse.org/bugs/show_bug.cgi?id=351052)

我将 Web Sphere 中的类加载器顺序设置为“首先使用应用程序类加载器加载的类”。如以下链接中的示例所示。

[http://wiki.eclipse.org/BirtPOJO_Viewer_WebSphere_Deployment](http://wiki.eclipse.org/BirtPOJO_Viewer_WebSphere_Deployment)

我仍然遇到同样的错误，我不确定我还应该做什么。我知道在不发布代码的情况下问这个有点困难，但是有人知道我应该寻找什么吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-29T08:41:44.780

我和你的错误完全相同。我正在使用 BIRT 3.7.2 和 IBM WAS 8.5

参考下面详述的错误， [重新启动 ReportEngine 时出现 org.eclipse.core.runtime.CoreException](https://bugs.eclipse.org/bugs/show_bug.cgi?id=351052)

以及下面指定的错误的实际原因， [ServiceLauncher.shutdown() 没有释放默认的 RegistryProvider](https://bugs.eclipse.org/bugs/show_bug.cgi?id=412103)

`Platform.startup(..)`我在通话 前添加了以下行`RegistryProviderFactory.releaseDefault();`

在此之后，BIRT 报告工作正常。

但是，我怀疑这是否会破坏 WAS 运行时的任何内容。这样做的原因是...

如错误中所述，此异常发生在第二次尝试启动平台时。在这里，在 Platform.shutdown() 上，RegistryProvider 没有被释放，因此出现了异常。

现在，就我而言，IBM Websphere 8.5 在内部使用 OSGi，因此启动了 OSGi 平台。因此，当我们的应用程序尝试再次启动平台（第二次启动）时，就会发生异常。我关心的是，这不应该破坏 WAS 的运行时（因为它在内部使用 OSGi）。

Registry Provider 不为空，因为它由 BIRT 运行时设置，因此，这里唯一的问题可能是 Class Version 不匹配，即 WAS 的 Registry Provider 和 BIRT 的 Registry Provider，如果不同，则版本冲突。

我不确定我使用的解决方案。请高手指导。

# android - Java：字符串替换以转换时间

> ID：13241048
> 
> 赞同：1
> 
> 时间：2012-11-05T21:56:02.763
> 
> 标签：android, string, time, str-replace

我正在尝试将存储在数据库中的时间转换为类型字符串并以适当的格式打印。我尝试使用**.replaceAll**。这导致 5:3 被替换为 05:03，但也将 17:3 变为 0107:03。有人对正确的方法有任何建议吗？

```
 String moduleStartHour = (c.getString(c.getColumnIndex(database.KEY_MODULESTARTHOUR)));
    String moduleStartMinute = (c.getString(c.getColumnIndex(database.KEY_MODULESTARTMINUTE)));

    String newModuleStartHour= moduleStartHour.replaceAll("0", "00").replaceAll("1", "01").replaceAll("2", "03")
            .replaceAll('4', "04").replaceAll("5", "05").replaceAll("6", "06").replaceAll("7", "07").replaceAll("8", "08")
            .replaceAll("9", "09");
    String newModuleStartMinute= moduleStartMinute.replaceAll("0", "00").replaceAll("1", "01").replaceAll("2", "03")
            .replaceAll("4", "04").replaceAll("5", "05").replaceAll("6", "06").replaceAll("7", "07").replaceAll("8", "08")
            .replaceAll("9", "09");

    StringBuilder sb =new StringBuilder();
    sb.append(newModuleStartHour).append(":").append(newModuleStartMinute);
    String moduleStartTime = sb.toString(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T21:58:03.943

```
if (moduleStartHour.length() == 1)
  moduleStartHour = "0" + moduleStartHour;

if (moduleStartMinute.length() == 1)
   moduleStartMinute  = "0" + moduleStartMinute;

StringBuilder sb =new StringBuilder();
sb.append(moduleStartHour).append(":").append(moduleStartMinute);
String moduleStartTime = sb.toString(); 
```

或者如果我们在整个过程中使用 StringBuilder

```
 StringBuilder sb = new StringBuilder();

    if (moduleStartHour.length() == 1)
        sb.append("0");

    sb.append(moduleStartHour).append(":");

    if (moduleStartMinute.length() == 1)
        sb.append("0");

    sb.append(moduleStartMinute);

    String moduleStartTime = sb.toString(); 
```

# c++ - 如何在 Blackberry Cascades 中显示带有特定号码的手机键盘

> ID：13241050
> 
> 赞同：2
> 
> 时间：2012-11-05T21:56:18.597
> 
> 标签：c++, qt, qml, blackberry-10, blackberry-cascades

我正在使用带有 C++ QT 和 QML 的 Blackberry Cascades 10 Beta 3 SDK 以及 Blackberry 10 Dev Alpha Simulator 和 QNX Momentics IDE，并且我正在尝试实现单击带有 QML 电话号码的按钮并拥有它的功能调出带有该号码的拨号盘，此时用户应该能够按下呼叫，它将呼叫该号码。以下是我做过的事情：

```
Button {
    text: "555-555-5555" //just a sample number - I don't actually use this number
    onClicked: Foo.phone(text) //I don't actually use the class name Foo
} 
```

我有： ...

```
class Foo : public QObject {
    Q_OBJECT
public:
    ...
    Q_INVOKABLE void phone(QString number);
}
... 
```

我有：

```
void Foo::phone(QString number) {
    bb::system::phone::Phone phone;
    phone.requestDialpad(number, bb::system::phone::LineType::Cellular);
} 
```

但是当我点击按钮时它什么也没做——我需要显示拨号盘——有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T00:26:38.880

将类 Foo 的代码更改为以下内容：

Foo.hpp

```
#ifndef FOO_HPP_
#define FOO_HPP_

#include <QObject>
#include <bb/system/InvokeManager>

class Foo : public QObject {
    Q_OBJECT

public:
    Foo();
    virtual ~Foo();

    Q_INVOKABLE void callNumber(const QString& number);

private Q_SLOTS:
    void processInvokeReply(); // This slot handles the result of an invocation

private:
    bb::system::InvokeManager* _invokeManager;

    Q_DISABLE_COPY(Foo);
};
#endif /* FOO_HPP_ */ 
```

Foo.cpp：

```
#include <bb/system/InvokeAction>
#include <bb/system/InvokeReply>
#include <bb/system/InvokeTargetReply>
#include <bb/system/InvokeRequest>
#include <bb/PpsObject>
#include "Foo.hpp"

Foo::Foo() :
        _invokeManager(new InvokeManager(this)) {
}

Foo::~Foo() {
}

void Foo::processInvokeReply() {
    InvokeReply *reply = qobject_cast<InvokeReply*>(sender());     // Get the reply from the sender object

    // Check for errors during invocation
    switch (reply->error()) {
        case InvokeReplyError::BadRequest:
                qDebug("[ErrorBadRequest] Invoke Failed!");
            break;
        case InvokeReplyError::Internal:
                qDebug("[ErrorInternal] Invoke Failed!");
            break;
        case InvokeReplyError::NoTarget:
                qDebug("[ErrorNoTarget] Invoke Failed!");
            break;
        case InvokeReplyError::TargetNotOwned:
                qDebug("[ErrorTargetNotOwned] Invoke Failed.");
            break;
        default:
                qDebug("[Odd Error %d] Invoke failed", reply->error());
            break;
    }
    reply->deleteLater();     // Delete the reply later on
}

void Foo::callNumber(const QString& number) {
    QVariantMap map;
    map.insert("number", number);    // required
    QByteArray requestData = bb::PpsObject::encode(map, NULL);
    InvokeRequest request;
    request.setAction("bb.action.DIAL");
    request.setData(requestData);
    request.setMimeType("application/vnd.blackberry.phone.startcall");
    const InvokeTargetReply *reply = _invokeManager->invoke(request);
    if (reply) {
        QObject::connect(reply, SIGNAL(finished()), this, SLOT(processInvokeReply()));
    } else {
        qWarning() << "Invoke Failed! InvokeReply is empty.";
    }
} 
```

通过启动应用程序的初始化 cpp 代码公开它：

```
Foo* _foo = new Foo();
qml->setContextProperty("_foo", _foo); 
```

然后像这样在 QML 中使用它：

```
Button {
    onClicked: {
        _foo.callNumber("555-555-5555")
    }
} 
```

**添加：**

此外，还有一种更简单的方法可以做到这一点：

在 main.cpp 中：

```
#include <bb/system/phone/Phone>
#include <bb/data/DataSource>

// skipped ...

Q_DECL_EXPORT int main(int argc, char **argv)
{
     // ...skipped 
        qmlRegisterType<bb::system::phone::Phone>("bb.system.phone", 1, 0, "Phone");
        bb::data::DataSource::registerQmlTypes();
     // ...skipped
} 
```

然后在 QML 文件中：

```
import bb.cascades 1.0
import bb.system.phone 1.0

// Creates one page with a button. When you tap the button,
// a dial pad with a specific phone number is displayed.

Page {
    Container {
        layout: DockLayout {
        }
        verticalAlignment: VerticalAlignment.Center
        horizontalAlignment: HorizontalAlignment.Center

        Button {
            id: callButton
            text: "Call me, maybe"

            onClicked: {
                phone.requestDialpad("(519) 555-0100")
            }
        }
    }
    attachedObjects: [
        Phone {
            id: phone
        }
    ]
} 
```

在此处阅读有关此示例的更多信息 - [http://developer.blackberry.com/cascades/documentation/device_comm/phone/index.html](http://developer.blackberry.com/cascades/documentation/device_comm/phone/index.html)

# php - 快速调整图片大小工具/脚本

> ID：13241051
> 
> 赞同：2
> 
> 时间：2012-11-05T21:56:19.650
> 
> 标签：php, image, image-processing, image-resizing

我在服务器上按日期组织的文件夹中有很多图像（500,000 +）。我制作了一个 PHP 脚本来复制和裁剪子文件夹（thumb）上的每个 JPG 文件，但是由于 PHP 不支持多线程，所以速度非常慢。

我想要关于如何进行的建议。Python是一个很好的选择吗？有没有好的工具，或者我怎样才能改进我的调整大小功能？

你也可以看看我的[PHP 代码](https://gist.github.com/4020431)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T22:10:12.937

您可以在 PHP 中毫无问题地完成它，模拟线程而不是直接使用它们。实际上，PHP 没有本机线程（您最终可以使用库，但在您的情况下这不是很有用）。

在您的代码中，而不是调用：

```
static::Crop($file,$destination,$tn_w = 300,$tn_h =200,$quality = 100,$wmsource = false); 
```

为什么不这样做：

```
$array = array($file, $destination, $tn_w = 300, $tn_h = 200, $quality = 100, $wmsource = 0);
$command = "/usr/bin/php crop.php";
foreach ($array as $arg)
{
  $command .= ' ' . escapeshellarg($arg);
}
exec("$command &"); // note the & which release your execution
usleep(100000); 
```

你把你的裁剪功能放在里面`crop.php`，然后像这样调用它：

```
list($exec, $file, $destination, $tn_w, $tn_h, $quality, $wmsource) = $argv;
static::Crop($file,$destination,$tn_w = 300,$tn_h =200,$quality = 100,$wmsource = false); 
```

这将完成这项工作。

如果您想避免睡眠并控制一次运行的作物数量，您还可以使用文件模拟互斥锁，这完全取决于您。你绝对可以在 PHP 中完成这样的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:09:52.063

但是 php cgi 支持多线程。为什么不使用 exec()？或者你可以使用一个shell脚本和php cgi进行转换？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T18:18:11.433

按使用此类

```
<?php
class thumbnail_images {

// get
var $PathImgOld;
var $PathImgNew;
var $NewWidth;
var $NewHeight;

// tmp
var $mime;

function imagejpeg_new ($NewImg,$path_img) {
    if ($this->mime == 'image/jpeg' or $this->mime == 'image/pjpeg') imagejpeg($NewImg,$path_img);
    elseif ($this->mime == 'image/gif') imagegif($NewImg, $path_img);
    elseif ($this->mime == 'image/png') imagepng($NewImg, $path_img);
    else return(false);
    return(true);
}

function imagecreatefromjpeg_new($path_img) {
    if ($this->mime == 'image/jpeg' or $this->mime == 'image/pjpeg') $OldImg = imagecreatefromjpeg($path_img);
    elseif ($this->mime == 'image/gif') $OldImg = imagecreatefromgif($path_img);
    elseif ($this->mime == 'image/png') $OldImg = imagecreatefrompng($path_img);
    else return(false);
    return($OldImg);
}

function create_thumbnail_images() {
    $PathImgOld = $this->PathImgOld;
    $PathImgNew = $this->PathImgNew;
    $NewWidth = $this->NewWidth;
    $NewHeight = $this->NewHeight;

    $Oldsize = @getimagesize($PathImgOld);
    $this->mime = $Oldsize['mime'];
    $OldWidth = $Oldsize[0];
    $OldHeight = $Oldsize[1];

    if ($NewHeight == '' and $NewWidth != '') {
        $NewHeight = ceil(($OldHeight * $NewWidth) / $OldWidth);
    }
    elseif ($NewWidth == '' and $NewHeight != '') {
        $NewWidth = ceil(($OldWidth * $NewHeight) / $OldHeight);
    }
    elseif ($NewHeight == '' and $NewWidth == '') {
        return(false);
    }

    $OldHeight_castr = ceil(($OldWidth * $NewHeight) / $NewWidth);
    $castr_bottom = ($OldHeight - $OldHeight_castr) / 2;

    $OldWidth_castr = ceil(($OldHeight * $NewWidth) / $NewHeight);
    $castr_right = ($OldWidth - $OldWidth_castr) / 2;

    if ($castr_bottom>0) {
        $OldWidth_castr = $OldWidth;
        $castr_right = 0;
    }
    elseif ($castr_right>0) {
        $OldHeight_castr = $OldHeight;
        $castr_bottom = 0;
    }
    else {
        $OldWidth_castr = $OldWidth;
        $OldHeight_castr = $OldHeight;
        $castr_right = 0;
        $castr_bottom = 0;
    }

    $OldImg = $this->imagecreatefromjpeg_new($PathImgOld);
    if ($OldImg) {
        $NewImg_castr = imagecreatetruecolor($OldWidth_castr, $OldHeight_castr);
        if ($NewImg_castr) {
            imagecopyresampled($NewImg_castr, $OldImg, 0, 0, $castr_right, $castr_bottom, $OldWidth_castr, $OldHeight_castr, $OldWidth_castr, $OldHeight_castr);
            $NewImg = imagecreatetruecolor($NewWidth, $NewHeight);
            if ($NewImg) {
                imagecopyresampled($NewImg, $NewImg_castr, 0, 0, 0, 0, $NewWidth, $NewHeight, $OldWidth_castr, $OldHeight_castr);
                imagedestroy($NewImg_castr);
                imagedestroy($OldImg);
                if (!$this->imagejpeg_new($NewImg, $PathImgNew)) return (false);
                imagedestroy($NewImg);
            }
        }
    }
    else {
        return(false);
    }

    return(true);
}

}
?> 
```

现在使用它

```
$width = $_REQUEST['img_width'];
$height = $_REQUEST['img_height'];
// example
$obj_img = new thumbnail_images();
$obj_img->PathImgOld = 'Old_image.jpg'; // Image for resize
$obj_img->PathImgNew = 'my_image_new_formSubURLkki.jpg'; // New Image Path
$obj_img->NewWidth = $width;
$obj_img->NewHeight = $height;
if (!$obj_img->create_thumbnail_images()) echo "error"; 
else {
    echo 'Image Maked andsave in directory';
} 
```

# maven - 如何使用Maven为src/test/java目录创建可执行jar？

> ID：13241059
> 
> 赞同：0
> 
> 时间：2012-11-05T21:56:45.087
> 
> 标签：maven, jar, dependency-management

我有一个 src/main/java 和 src/test/java 结构的项目。使用 maven-assembly-plugin、jar-with-dependencies 描述符和 mainClass 清单来创建一个 jar 文件，其中包含来自 src/main/java 目录的主类和所有类这个主类依赖于哪个，这样主类就可以使用'java -jar project-jar-with-dependencies.jar'命令来执行。如何从 src/test/java 目录为主类创建类似的 jar 文件？

# c# - (T)retObject[parameter] 无法将 'retObject[parameter]' 拆箱为 'T'

> ID：13241061
> 
> 赞同：2
> 
> 时间：2012-11-05T21:56:51.093
> 
> 标签：c#, generics, wmi

话不多说，这就是问题所在：

```
 public static T WriteIfNotNull<T>(ManagementObject retObject, string parameter)
    {
        return retObject[parameter] != null ? (T)retObject[parameter] : default(T);
    } 
```

`T`当是一个`int`并且`retObject[parameter]`是一个对象时，它会中断。奇怪的部分（至少对我来说）是 if`T`不是`T`并且实际上是一个指定的 int 它确实有效。

它说它不能被转换为`T`（即使在这种情况下`T`也是`int`）。

@Edit：@dtb 在这里：

```
Specified cast is not valid. 
(T)(object)retObject[parameter] Cannot unbox 'retObject[parameter]' as a 'T'    int 
```

和价值观：

范围：`"ProcessId"`

retObject [参数]：`4`

默认（T）：`0`

@@Edit：这也是电话

```
pr.ProcessId = Util.WriteIfNotNull<int>(retObject, "ProcessId"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T21:59:41.417

在我看来，发生的事情`retObject[parameter]`实际上不是一个数字类型，`int`而是另一种数字类型（`uint`通常用于进程 ID），在这种情况下，您希望使用它`Convert`来实际更改值：

```
return retObject[parameter] != null 
    ? (T)Convert.ChangeType(retObject[parameter], typeof(T)) 
    : default(T); 
```

一个简单的转换在这里不起作用的原因是因为转换 from `object`to`int`只有在它实际上是一个 boxed 时才起作用`int`。您不能在一次操作中进行向下转换和转换转换，因为没有从`object`to转换`int`。因此，转换 from`object`需要您转换为确切类型或确切类型的有效超类型、接口等。

因此，要将 boxed 转换`uint`为 an`int`我们必须将 unbox 作为`int`第一个（有问题的）或使用其中一种`Convert`方法来更改类型（如上所示）。

`Convert.ChangeType()`即使它们被装箱，也适用于兼容类型之间的转换。例如，如果`retObject[parameter]`返回 a`long`那么这将允许它转换为 a `T`of `int`。

[我在这里](http://blackrabbitcoder.net/archive/2011/01/27/c.net-little-pitfalls-the-dangers-of-casting-boxed-values.aspx)有一篇关于此的博客文章，其中包含更多详细信息，希望这是有道理的。要点再次是，转换 from`object`是向下转换（没有为 定义转换转换`object`），因此您必须将其转换为它的精确类型（或有效的子类型）。

# xml - Imgur API upload.json 返回 XML？

> ID：13241063
> 
> 赞同：2
> 
> 时间：2012-11-05T21:57:04.193
> 
> 标签：xml, json, api, url, imgur

所以匿名 imgur API 有点麻烦。

如果我去[http://api.imgur.com/2/upload.json](http://api.imgur.com/2/upload.json) - 这显然会返回 JSON。

如果我去[http://api.imgur.com/2/upload.json?key=ANONAPIKEY&image=http://](http://api.imgur.com/2/upload.json?key=ANONAPIKEY&image=http:/) - 这也会返回一个 JSON 格式的错误。

但是，如果我真的尝试上传有效图片，请说：

[http://api.imgur.com/2/upload.json?key=ANONAPIKEY&image=http://www.utra.ca/Pictures/Projects/reprap.jpg](http://api.imgur.com/2/upload.json?key=ANONAPIKEY&image=http://www.utra.ca/Pictures/Projects/reprap.jpg)

这现在返回 XML。

谁能解释一下？难道我做错了什么 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:36:55.480

在发送之前对您的 URL 进行编码。这应该有效，例如：

> [http://api.imgur.com/2/upload.json?key=ANONAPIKEY&image=http%3A%2F%2Fwww.utra.ca%2FPictures%2FProjects%2Freprap.jpg](http://api.imgur.com/2/upload.json?key=ANONAPIKEY&image=http%3A%2F%2Fwww.utra.ca%2FPictures%2FProjects%2Freprap.jpg)

[您可以使用encodeURIComponent()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)在 Javascript 中对您的 URL 进行编码

例子：

```
var url = "http://api.imgur.com/2/upload.json?key=ANONAPIKEY&image=" + encodeURIComponent("http://www.utra.ca/Pictures/Projects/reprap.jpg") 
```

# c# - 未找到 Web Api Content.ReadAsAsync 方法，但代码可以编译

> ID：13241064
> 
> 赞同：4
> 
> 时间：2012-11-05T21:57:04.273
> 
> 标签：c#, visual-studio-2012, asp.net-web-api, resharper

我正在使用`System.Net.Http.HttpClient`访问休息服务。这段代码编译并运行得很好：

```
var client = new HttpClient();
var result = client.GetAsync(ServiceUrl + "/whatever").Result;
var content = result.Content.ReadAsAsync<StatusReport>().Result; 
```

但是，该`ReadAsAsync`方法在我的 IDE 中显示为红色，并且智能感知无法找到它。我已确保更新我所有的 nuget 包。引用并添加了 using 语句 for `System.Net.Http.Formatting`，但错误仍然存​​在（并且 resharper 告诉我 using 语句未使用）。

我不确定这是否是 Visual Studio 2012 或 resharper 7 的问题。有时重新启动 Visual Studio 会有所帮助，有时则没有。我怀疑我可能引用了某些程序集的旧版本，或者类似的东西，但我已经更新了我知道的所有内容，问题仍然是间歇性的。

我还能尝试什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-12-13T20:32:30.763

您必须添加来自 Nuget“ASP.NET Web API 2 客户端”的引用。Microsoft.AspNet.WebApi.Client

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T21:59:22.913

尝试清除您的 resharper 缓存。*（ReSharper > 选项 > 环境 > 常规 > 清除缓存）*

HttpClient 是 4.5 AFAIK 中的新功能，也许您的程序集是从 4.​​0 或其他内容缓存的？

# postgresql - 具有 NULL 值的自定义排序

> ID：13241066
> 
> 赞同：0
> 
> 时间：2012-11-05T21:57:12.947
> 
> 标签：postgresql, datamapper, ruby-datamapper

我有一个 DataMapper 类 Song（通过 PostgreSQL），它具有以下属性：

```
property :rating, Float, :required => false 
```

用户可以评价歌曲。问题是我希望用户按评级浏览可用的歌曲。假设我有 5 首歌曲，其中 3 首已评分，然后是这样的：

```
Song.all(:order => [:rating.desc]) 
```

将按以下顺序为我提供歌曲：{null, null, 10, 7, 6} 或其他。有没有一种简单的方法可以将这些 null 值放在排序的底部，这样我的结果就会看起来像 {10, 7, 6, null, null}。

我试过了

```
Song.all(:rating.not => nil, :order => [rating.desc]) + song.all(:rating => nil) 
```

但这结合了查询，使我的结果集为零。

当然，另一种选择是将空评级默认为-1，但由于某些限制，我宁愿尽可能避免这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T06:37:09.787

您可以指定`NULl`in`ORDER BY`子句的位置。检查此[排序行](http://www.postgresql.org/docs/8.3/static/queries-order.html)。我不确定在数据映射器中，但 sql 会是这样的

`SELECT select_list FROM table_expression ORDER BY sort_expression DESC NULLS LAST`

# c# - 在 C# 的未知语言环境中解析双精度数

> ID：13241068
> 
> 赞同：2
> 
> 时间：2012-11-05T21:57:21.110
> 
> 标签：c#, parsing, internationalization, double

我正在编写一个程序，需要解析一些第三方软件生成的一堆文本文件。其中一些文件将在法国生成，其中“1,5”表示“一个半”。其他文件将在美国生成，其中“1,5”不是数字，“一个半”是“1.5”。当然，“1,234.5”在美国是一个合法的数字。

这些只是例子；实际上，我的程序需要处理各种语言环境中的各种数字；它需要处理诸如“e-5”和“2e10”之类的事情。不幸的是，没有办法提前知道哪个文件来自哪个语言环境。

在 C# 中是否有一些普遍接受的解决方案来解决这个问题？我意识到我可以编写自己的数字解析代码，但我宁愿避免它，除非没有其他办法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:07:39.997

由于您的整个输入文件是从一个语言环境生成的，因此您可以将问题视为在实际解析输入文件之前必须从输入文件中检测特定语言环境。这是一个额外的要求，是由于输入文件不足（它们都应该使用一个约定的语言环境或有一个字段来指定所使用的语言环境）。

语言检测不是一个完整的解决方案，因为数字格式不是特定于语言的，而是特定于语言环境的。这是一个示例：如果您检测到语言是西班牙语，那是 es-ES（西班牙）还是 es-MX（墨西哥）？在前一种情况下，小数点分隔符是逗号 (1,23)。在后者中，小数分隔符是句点 (1.23)。

该解决方案将基于启发式。最简单的可能是，如果您知道您的语言环境通常是什么（例如，您的大多数用户使用句点），您可以拥有一个有序的文化标识符列表，然后一个接一个地尝试，直到找到可以使用的一个解释文件中的所有数字。可以像从 en-US 开始一样简单，如果失败了，尝试使用 en-GB，因为对于数字，实际上没有更多的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:22:16.563

这可能是一个设计过度的解决方案，但它可以工作（如果您的文本文件包含除数字之外的一些文本）：

1.  [使用字母频率](http://en.wikipedia.org/wiki/Letter_frequency)检测文本文件的语言。谷歌已经开源了他们在 Chrome 中用于检测页面语言的代码 - [http://code.google.com/p/chromium-compact-language-detector/](http://code.google.com/p/chromium-compact-language-detector/)。我想我看到了 C# 包装器，但我现在找不到它。如果您不想使用任何库，那么自己实现它并不难。我对该算法进行了一些非常简单的测试，似乎可以仅从大约 15-20 个字母中检测出一种语言。
2.  根据检测到的语言的规则构建正则表达式（或者只是解析它）。考虑到小数分隔符、数字分组、负号等有很多规则，这可能是一个非常复杂的问题。但并非不可能实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T22:31:27.433

正如您从评论中看到的那样，您的问题没有故障安全解决方案。你能做的最好的就是最小化错误：

由于每个文件（希望）都包含来自同一语言环境的多个数字，因此请尝试使用所有预期的**不同**语言环境解析文件中的数字（例如，不要将 en-US 和 en-AU 解析为两个语言环境的数字格式是一样的。）

解析后，您将得到以下任一结果：

1.  一个匹配的语言环境。
2.  多个语言环境。

在第二种情况下，测试所有语言环境的结果是否匹配（大多数/所有语言环境都以相同的方式解析没有千位分隔符的整数和科学记数法。）

如果它们匹配没有问题，则尝试使用启发式方法来找出正确的语言环境：

*   值是否在预期范围内。
*   如果文件中有任何其他文本，您可以在语言词典中进行单词搜索以尝试找出语言。

如果一切都失败了，请丢弃该文件并将其标记为手动处理。您的程序应该具有允许绕过启发式将文件标记为特定文化的工具。

您最好的选择是更改输入格式，以便在某处指定文件区域设置，例如在数据、文件名或随附的元数据文件中。

# javascript - js替代jquery加载方法

> ID：13241069
> 
> 赞同：0
> 
> 时间：2012-11-05T21:57:22.353
> 
> 标签：javascript, jquery, ajax

我正在尝试将一个包含 jquery .load() 功能以及方法的单个 js 文件放在一起，以便仅链接到单个 js 文件，而不是 jquery 和加载方法。

代替

```
<script src="jquery.min.js" type="text/javascript"></script>
<script src="load.js" type="text/javascript"></script> 
```

这个

```
<script src="load_including-necessary-js-for-load-methods.js" type="text/javascript"></script> 
```

所以基本上我试图从 jquery 中只提取使 .load() 工作的必要代码，并将其与加载方法一起包含在文件中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T22:07:04.183

相反，建议您使用类似于 html5boilerplate 的 jQuery 调用的内容：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.2.min.js"><\/script>')</script> 
```

1.  通过 CDN 访问它确保了 jQuery 代码的高速交付，这些代码被成千上万的其他页面/用户持续使用，
2.  ...这也意味着该代码很可能缓存在您用户的浏览器中...
3.  ...这相当于经过高度测试的代码，就整体加载时间而言，您实际上并没有“付费”。当然，第二行允许您从自己的站点提供它的副本，以防 CDN 出现问题，或者您需要离线测试（在这种情况下，无论您怎么看，AJAX 对您来说都是无聊的）它，无论如何...）。

否则，请查看 jQuery 的 Github 上的说明：[https](https://github.com/jquery/jquery#how-to-build-your-own-jquery) ://github.com/jquery/jquery#how-to-build-your-own-jquery并阅读构建自己的...他们有说明，用于排除库中不需要的模块。

之后，如果您想将所有内容简化为一次调用，您可能需要使用某种捆绑脚本将所有 JS（您的自定义 jQuery 构建 + 您的脚本）捆绑在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:26:56.607

我不知道您为什么不能使用所有 jquery 库的原因，但您仍然可以编写自己的 js 脚本并使用[onload 或 document.load、window.load](http://www.w3schools.com/jsref/event_onload.asp)它可以减少您的代码。如果您需要 jQuery load() ...阅读并尝试首先评论您的问题或使用所有小型（自己的）jQuery 库而不是浪费您的时间。

# java - 有没有一种方法可以确定文档是否是文本句子文件？

> ID：13241073
> 
> 赞同：-1
> 
> 时间：2012-11-05T21:57:30.903
> 
> 标签：java, clojure, nlp, stanford-nlp, statistics

我正在处理数十万个文件。以后可能会有数百万。坏文件将包含 Excel 电子表格的文本版本或其他不是二进制但也不是句子的文本。这些文件会导致 CoreNLP 崩溃（从技术上讲，这些文件需要很长时间来处理，例如每千字节文本需要 15 秒。）我很想检测这些文件并在亚秒级时间内丢弃它们。

我正在考虑随机抽取几千个文件，检查前 200 个字符并寻找字符分布以确定什么是合法的，什么是异常值。例如，如果没有标点符号或标点符号太多。这看起来是个好方法吗？有没有更好的已经被证明的？我认为，当然，这会很好地工作，可能会丢弃潜在的好文件，但很少。

另一个想法是简单地使用注释器进行标记和分割并进行单词和句子计数。这似乎也做得很好，并且很快就会返回。我可以想到这也可能失败的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:09:10.570

这种处理流水线始终处于不断改进的状态。为了开始这个过程，我要构建的第一件事是围绕 CoreNLP 的时序行为的工具。如果 CoreNLP 花费的时间太长，请将有问题的文件踢出到单独的队列中。如果这还不够好，您可以为耗时过长的队列中最常见的事物编写识别器，并在它们到达 CoreNLP 之前转移它们。这种方法的主要优点是它可以处理您事先不期望的输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T22:18:13.200

此类问题有两种主要方法。

第一种是采用您正在考虑的方法，在该方法中检查文件的内容并根据对文件中数据的统计分析来决定它是否是可接受的文本。

第二种方法是使用某种元标记，例如文件扩展名，以至少消除那些肯定会成为问题的文件（.pdf、.jpg 等）。

我建议将这两种方法混合使用，以减少处理量。

您可能会考虑一种管道方法，其中您有一系列测试。第一个测试根据文件扩展名等元数据过滤掉文件，第二步然后对文件的前几个字节进行初步统计检查以过滤出明显的问题文件，第三步进行更复杂的统计分析文本，第四个处理 CoreNLP 拒绝步骤。

您没有说明文件的来源，也没有说明是否有任何语言方面的考虑（英语与法语与简体中文文本）。例如，可接受的文本文件是否使用 UTF-8、UTF-16 或其他一些文本编码？

CoreNLP 应用程序是否可以更优雅地检测和拒绝不兼容的文本文件？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T02:34:23.203

你不能只训练一个朴素贝叶斯分类器来识别坏文件吗？对于功能，使用标点符号的（合并）百分比、数字字符的百分比和平均句子长度等。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-11-03T17:11:55.770

彼得，

您显然正在处理电子发现的文件。一切皆有可能，如您所知，任何被踢出的东西都必须记录为异常。我遇到过这个问题，并且从其他分析处理器那里听到了同样的情况。

上面的一些解决方案，预处理和在线可以提供帮助。在某些 ediscovery 解决方案中，将文本转储到 SQL 中的字段中并截断或以其他方式截断可能是可行的，并且仍然可以获得您需要的内容。在其他应用程序中，与语义聚类或预测编码有关的任何事情，最好使用使用元数据（例如文件类型）、文档类型分类库和基于先前示例、当前采样或您最好的实体提取的预过滤器猜测“坏文件”内容的性质。

祝你好运。

# java - Spring MVC 将选项卡作为单独的表单处理

> ID：13241075
> 
> 赞同：1
> 
> 时间：2012-11-05T21:57:44.293
> 
> 标签：java, jquery, spring-mvc

我想对以下场景提出一些建议：我有一个分为选项卡的表单，每个选项卡代表自己的**模型属性**我想在用户请求页面时显示所有选项卡及其字段。

但是我希望他们每个人都有自己的控制器，所以当一个 POST 被单独处理时。当对页面发出请求时，我使用一个控制器来获取页面并准备列表框并填充它们并将其显示给用户。并非所有字段都显示为**“惩罚”**选项卡我只能在“惩罚”选项卡上看到“惩罚编号”标签。下面是我的代码：

**Citizens_Registration.html**

```
<%@ include file="/WEB-INF/jsp/include.jsp" %>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>

<%@ taglib prefix = "fmt" uri= "http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib prefix = "c" uri= "http://java.sun.com/jsp/jstl/core" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

    <head>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>

        <style>
            <%@ include file="../css/forms.css" %>

        </style>

    <script type="text/javascript">

    $(document).ready(function(){

        $('#skinColorId').change(function(){

            var skinId = $('select#skinColorId').val();

            $('#skinColorPreviewer').css({backgroundColor: skinId});
        });

        $('#eyeColorId').change(function(){

            var eyeId = $('select#eyeColorId').val();

            $('#eyeColorPreviewer').css({backgroundColor: eyeId});
        });

        $('#hairColorId').change(function(){

            var hairId = $('select#hairColorId').val();

            $('#hairColorPreviewer').css({backgroundColor: hairId});
        });

        //$("#divLeft").height($("#divRight").height());

    });

     $(function() {
            $( "#tabs" ).tabs();
        });

    </script>

    <title>Citizen Registration</title>

    </head>

    <body>  
        <div id="tabs"> 

        <ul>
            <li><a href="#tab1">Citizen Registration</a></li>
            <li><a href="#tab2">Punishment</a></li>

        </ul>

<!-- ---------------------------------------------------------------------CHARACTERISTICS INFO------------------------------------------------------------------------------------------------------------------------------------- -->
        <div id="tab1">
            <form:form id="citizenRegistration" name ="citizenRegistration" method="post" modelAttribute="citizens" action="citizen_registration.htm">

                    <fieldset>  
                    <legend>Characteristics Info</legend>
                            <ol>    
                                <li><form:label for="photo" path="photo">Select Photo</form:label>
                                    <form:input path="photo" type="file" id="photo" title="Upload a photo"/><form:errors path="photo" id="errors"/></li>

                                <li>
                                    <label>Select Gender</label>
                                    <form:select path="genderId" id="genderId" title="Select Your Gender">
                                    <form:options items = "${gender.genderList}" itemValue="genderId" itemLabel="genderDesc" />
                                    </form:select>
                                    <form:errors path="genderId" class="errors"/>
                                </li>               

                                <li><form:label for="weight" path="weight">Enter Weight <i>(lbs)</i></form:label>
                                    <form:input path="weight" id="weight" title="Enter Weight"/><form:errors path="weight" id="errors"/>
                                </li> 

                                <li><form:label for="height" path="height">Enter Height <i>(feet)</i></form:label>
                                    <form:input path="height" id="height" title="Enter Height"/><form:errors path="height" id="errors"/>
                                </li> 

                                <li>
                                    <form:label for="skinColorId" path="skinColorId">Select Skin Color</form:label>     
                                    <form:select path="skinColorId" id="skinColorId" title="Select Skin Color">
                                    <form:options items = "${skinColor.skinColorList}" itemValue="colorCode" itemLabel="colorDesc" style="background-color: ${color}" />
                                    </form:select>          
                                    <form:errors path="skinColorId" id="errors"/><label class="colorPreviewer" id="skinColorPreviewer">color previewer</label>
                                </li>

                                <li>
                                    <form:label for="eyeColorId" path="eyeColorId">Select Eye Color</form:label>        
                                    <form:select path="eyeColorId" id="eyeColorId">
                                    <form:options items = "${eyeColor.eyeColorList}" itemValue="colorCode" itemLabel="colorDesc"/>
                                    </form:select>          
                                    <form:errors path="eyeColorId" id="errors"/><label class="colorPreviewer" id="eyeColorPreviewer">color previewer</label>
                                </li>               

                                <li>
                                    <form:label for="hairColorId" path="hairColorId">Select Hair Color</form:label>     
                                    <form:select path="hairColorId" id="hairColorId" title="Select Hair Color">
                                    <form:options items = "${hairColor.hairColorList}" itemValue="colorCode" itemLabel="colorDesc" />
                                    </form:select>          
                                    <form:errors path="hairColorId" id="errors"/><label class="colorPreviewer" id="hairColorPreviewer">color previewer</label>
                                </li>

                                <li><form:label for="noticeableFeatures" path="noticeableFeatures">Noticeable Features</form:label>
                                    <form:textarea path="noticeableFeatures" id="noticeableFeatures" title="State Noticable Features e.g. scars, marks, moles....."/><form:errors path="noticeableFeatures" id="errors"/>
                                </li> 
                            </ol>
                            </fieldset>

                    <fieldset>
                    <legend>Professional & Other Information</legend>
                        <ol>        
                            <li>
                                <form:label for ="ethnicityId" path="ethnicityId">Select Ethnicity</form:label>     
                                <form:select path="ethnicityId" id="ethnicityId" title="Select Ethnicity">
                                <form:options items = "${ethnicity.ethnicityList}" itemValue="ethnicityId" itemLabel="ethnicityDesc" />
                                </form:select>          
                                <form:errors path="ethnicityId" id="errors"/>
                            </li>           

                            <li>
                                <form:label for="occupationId" path="occupationId">Select Occupation</form:label>       
                                <form:select path="occupationId" id="occupationId" title="Select Occupation">
                                <form:options items = "${occupation.occupationList}" itemValue="occupationId" itemLabel="occupationDesc" />
                                </form:select>  
                                <form:errors path="occupationId" id="errors"/>
                            </li>

                            <li>
                                <form:label for="maritalStatusId" path="maritalStatusId">Select Marital Status</form:label>     
                                <form:select path="maritalStatusId" id="maritalStatusId" title="Select Marital Status">
                                <form:options items = "${maritalStatus.maritalStatusList}" itemValue="maritalStatusId" itemLabel="maritalStatusDesc" />
                                </form:select>  
                                <form:errors path="maritalStatusId" id="errors"/>
                            </li>
                        </ol>
                        </fieldset>

                <fieldset>
                <legend>Identity Information</legend>
                        <ol>
                            <li>
                                <label>Social Security No</label>
                                    <form:input path="socialSecurityNumber"/><form:errors path="socialSecurityNumber" id="errors"/><label id="socialSecurityNumber"></label>
                            </li>                   

                            <li>
                                <form:label for="citizenTypeId" path="CitizenTypeId">Select Citizen Type</form:label>
                                <form:select path="citizenTypeId" id="citizenTypeId" title="Select Citizen Type">
                                <form:options items = "${citizenType.citizenTypeList}" itemValue="citizenTypeId" itemLabel="citizenTypeDesc" />
                                </form:select>
                                <form:errors path="citizenTypeId" id="errors"/>
                            </li>

                            <li><label>First Name</label>
                                <form:input path="fName" id="fName" title="Enter First Name"/><form:errors path="fName" id="errors"/><label id="fName"></label></li>

                            <li><label>Last Name</label>
                                <form:input path="lName" id="lName" title="Enter Last Name"/><form:errors path="lName" id="errors"/></li>

                            <li><label>Other Name / Nick Name</label>
                                <form:input path="oName" id="oName" title="Enter Other Name"/><form:errors path="oName" id="errors"/></li>

                            <li><label>Date Of Birth</label>
                                <form:input path="dob" id="dob" title="Date Of Birth"/><form:errors path="dob" id="errors"/></li> 
                        </ol>
                        </fieldset>

                    <fieldset>
                    <legend>Contact Information</legend>
                        <ol>                                            
                            <li>
                                <form:label for="countryId" path="countryId">Select Country</form:label>
                                <form:select path="countryId" id="countryId" title="Select Country">
                                <form:options items = "${country.countryList}" itemValue="countryId" itemLabel="countryName" />
                                </form:select>
                                <form:errors path="countryId" id="errors"/>
                            </li>   

                            <li><form:label for="addLn1" path="addLn1">Address Line 1</form:label>
                                <form:input path="addLn1" id="addLn1" title="Enter Address Line 1"/><form:errors path="addLn1" id="errors"/>
                            </li>

                            <li><form:label for ="addLn2" path="addLn2">Address Line 2</form:label>
                                <form:input path="addLn2" id="addLn2" title="Enter Address Line 2"/><form:errors path="addLn2" id="errors"/>
                            </li>

                            <li><form:label for ="addLn3" path="addLn3">Address Line 3</form:label>
                                <form:input path="addLn3" id="addLn3" title="Enter Address Line 3"/><form:errors path="addLn3" id="errors"/>
                            </li>

                            <li>
                                <form:label for="phoneNo" path="phoneNo">Phone Number</form:label>
                                <form:input path="phoneNo" id="phoneNo" title="Enter Phone Number"/><form:errors path="phoneNo" id="errors"/>
                            </li>

                            </br>
                            <li><input type="submit" name= "user_request" value="Save" />
                                <input type="submit" name= "user_request" value="Update" />
                            </li>       

                        </ol>
                            <label id="results">${results}</label>
                            <label id="Error">${error}</label>
                        </fieldset>

                </form:form>
             </div> 

<!-- ---------------------------------------------------------------------------TAB 2--------------------------------------------------------------------------------------------------------------------------------------------- -->

            <div id="tab2">
                <form:form id="citizenRegistration" name ="citizenRegistration" method="post" modelAttribute="punishment" action="punishment_registration.htm">

                <ol>
                    <li>
                        <form:label for ="punishmentId" path="punishmentId">Punishment Number</form:label>
                        <form:input path="punishmentId" id="punishmentId"/><form:errors path="punishmentId" id="errors"/>                   
                    </li>

                    <li>
                        <form:label for="crimeRecNo" path="crimeRecNo">Select Crime</form:label>
                        <form:select path="crimeRecNo" id="CrimeRecNo" title="Select Crime">
                        <form:options items = "${crime.crimeList}" itemValue="crimeRecNo" itemLabel="crimeRecNo"/>
                        </form:select>
                        <form:errors path="crimeRecNo" id="errors"/>
                    </li>

                    <li>
                        <form:label for="punishmentTypeId" path="punishmentTypeId">Select Crime</form:label>
                        <form:select path="punishmentTypeId" id="punishmentTypeId" title="Select Punishment Type">
                        <form:options items = "${punishmentType.punishmentTypeList}" itemValue="punishmentTypeId" itemLabel="punishmentTypeDesc"/>
                        </form:select>
                        <form:errors path="punishmentTypeId" id="errors"/>
                    </li>       

                    <li>
                        <form:label for ="monitoringStDate" path="monitoringStDate"> Start Date </form:label>
                        <form:input path="monitoringStDate" id="monitoringStDate"/><form:errors path="monitoringStDate" id="errors"/>                   
                    </li>

                    <li>
                        <form:label for ="monitoringEnDate" path="monitoringEnDate"> End Date </form:label>
                        <form:input path="monitoringEnDate" id="monitoringEnDate"/><form:errors path="monitoringEnDate" id="errors"/>                   
                    </li>                   
                </ol>               

                </form:form>            
            </div>                      

        </div>

    </body>
</html> 
```

**CitizenRegistrationController.java**

进口…………

```
@Controller
public class CitizenRegistrationController {

    private final Logger logger = Logger.getLogger(getClass());

    @Autowired
    private CitizenTypeManager citizenTypeManager;
    @Autowired
    private ColorManager colorManager;
    @Autowired
    private CountryManager countryManager;
    @Autowired  
    private EthnicityManager ethnicityManager;
    @Autowired
    private GenderManager genderManager;
    @Autowired
    private MaritalStatusManager maritalStatusManager;
    @Autowired
    private OccupationManager occupationManager;
    @Autowired
    private CrimeManager crimeManager;
    @Autowired
    private PunishmentTypeManager punishmentTypeManager;

    Map<String, Object> myCitizenType    = new HashMap<String, Object>();
    Map<String, Object> myGender         = new HashMap<String, Object>();
    Map<String, Object> myMaritalStatus  = new HashMap<String, Object>();
    Map<String, Object> myOccupation     = new HashMap<String, Object>();
    Map<String, Object> myHairColor      = new HashMap<String, Object>();
    Map<String, Object> mySkinColor      = new HashMap<String, Object>();
    Map<String, Object> myEyeColor       = new HashMap<String, Object>();
    Map<String, Object> myCountry        = new HashMap<String, Object>();
    Map<String, Object> myEthnicity      = new HashMap<String, Object>();
    Map<String, Object> myCrimes         = new HashMap<String, Object>();
    Map<String, Object> myPunishmentType = new HashMap<String, Object>();

    @InitBinder("citizens")

    protected void initBinder(WebDataBinder binder){

        //removes white spaces 
        binder.registerCustomEditor(String.class, new StringTrimmerEditor(true));

        //formats date 
        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");

        //By passing true this will convert empty strings to null
        binder.registerCustomEditor(Date.class, new CustomDateEditor(dateFormat, true));
        dateFormat.setLenient(false);

        //binder.setValidator(new OfficerRegistrationValidation());
        //binder.setValidator(officerRegistrationValidation);

    }

    //---------------------------------------------------------------------------------------------------------------

    @RequestMapping(value="citizen_registration.htm", method = RequestMethod.GET)
    public ModelAndView loadPage(HttpServletRequest request,
                                 HttpServletResponse response,
                                 @ModelAttribute Citizens citizen, Punishment punishment,
                                 BindingResult result,
                                 ModelMap m, Model model) throws Exception {

        try{
             logger.debug("In Http method for CitizenRegistrationController");

             myCitizenType.put("citizenTypeList",       this.citizenTypeManager.getCitizenType());
             myGender.put("genderList",                 this.genderManager.getGenderList());             
             myMaritalStatus.put("maritalStatusList",   this.maritalStatusManager.getMaritalStatus());
             myOccupation.put("occupationList",         this.occupationManager.getOccupations());
             myHairColor.put("hairColorList",           this.colorManager.getHairColors());
             mySkinColor.put("skinColorList",           this.colorManager.getSkinColors());
             myEyeColor.put("eyeColorList",             this.colorManager.getEyeColors());
             myCountry.put("countryList",               this.countryManager.getCountries());
             myEthnicity.put("ethnicityList",           this.ethnicityManager.getEthnicity());
             myCrimes.put("crimeList",                  this.crimeManager.getCrimes());
             myPunishmentType.put("punishmentTypeList", this.punishmentTypeManager.getPunishmentType());

             model.addAttribute("gender",        myGender);
             model.addAttribute("citizenType",   myCitizenType);
             model.addAttribute("maritalStatus", myMaritalStatus);
             model.addAttribute("occupation",    myOccupation);
             model.addAttribute("hairColor",     myHairColor);
             model.addAttribute("skinColor",     mySkinColor);
             model.addAttribute("eyeColor",      myEyeColor);
             model.addAttribute("country",       myCountry);
             model.addAttribute("ethnicity",     myEthnicity);
             model.addAttribute("crime",         myCrimes);
             model.addAttribute("punishmentType",myPunishmentType);

            return new ModelAndView("citizen_registration");

        }catch(Exception e){

            logger.error("Exception in CitizenRegistrationController - ModelAndView loadPage "+e);
            request.setAttribute("error",e.getMessage());
            return new ModelAndView("error_page");  

        }   

    }

    //--------------------------------------------------------------------------------------------------------------

    @RequestMapping(value="punishment_registration.htm", method = RequestMethod.POST)
    public ModelAndView loadPage(HttpServletRequest request,
                                 HttpServletResponse response,
                                 @ModelAttribute Punishment punishment,
                                 BindingResult result,
                                 ModelMap m, Model model) throws Exception {

        try{
             logger.debug("In Http method for CitizenRegistrationController - Punishment Registration");

            //TODO

            return new ModelAndView("punishment_registration");

        }catch(Exception e){

            logger.error("Exception in CitizenRegistrationController - - Punishment Registration : ModelAndView loadPage "+e);
            request.setAttribute("error",e.getMessage());
            return new ModelAndView("error_page");  

        }   

    }

    /**
     * @param citizenTypeManager the citizenTypeManager to set
     */
    public void setCitizenTypeManager(CitizenTypeManager citizenTypeManager) {
        this.citizenTypeManager = citizenTypeManager;
    }
    /**
     * @param colorManager the colorManager to set
     */
    public void setColorManager(ColorManager colorManager) {
        this.colorManager = colorManager;
    }
    /**
     * @param countryManager the countryManager to set
     */
    public void setCountryManager(CountryManager countryManager) {
        this.countryManager = countryManager;
    }
    /**
     * @param ethnicityManager the ethnicityManager to set
     */
    public void setEthnicityManager(EthnicityManager ethnicityManager) {
        this.ethnicityManager = ethnicityManager;
    }
    /**
     * @param genderManager the genderManager to set
     */
    public void setGenderManager(GenderManager genderManager) {
        this.genderManager = genderManager;
    }
    /**
     * @param maritalStatusManager the maritalStatusManager to set
     */
    public void setMaritalStatusManager(MaritalStatusManager maritalStatusManager) {
        this.maritalStatusManager = maritalStatusManager;
    }
    /**
     * @param occupationManager the occupationManager to set
     */
    public void setOccupationManager(OccupationManager occupationManager) {
        this.occupationManager = occupationManager;
    }

    /**
     * @param myCrimes the myCrimes to set
     */
    public void setMyCrimes(Map<String, Object> myCrimes) {
        this.myCrimes = myCrimes;
    }

    /**
     * @param punishmentTypeManager the punishmentTypeManager to set
     */
    public void setPunishmentTypeManager(PunishmentTypeManager punishmentTypeManager) {
        this.punishmentTypeManager = punishmentTypeManager;
    }

} 
```

# vim - 如何在 Vim 中比较两个未保存的文本？

> ID：13241076
> 
> 赞同：4
> 
> 时间：2012-11-05T21:57:55.363
> 
> 标签：vim

我要做的是：（1）复制一段代码并粘贴到Vim中的缓冲区中；(2) 复制另一段代码并粘贴到 Vim 中的另一个缓冲区中；(3) 直接比较这两个缓冲区，不保存到文件中。

我知道这可以使用 Notepad++ 轻松完成。我需要经常这样做，我想知道 Vim 是否可以这样做。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T22:04:30.340

您可以`:diffthis`在要比较的每个窗口上执行此操作。

见`:help diff`。

# linux - 仅在指定 make debug 时添加 -pg

> ID：13241089
> 
> 赞同：0
> 
> 时间：2012-11-05T21:58:44.787
> 
> 标签：linux, ubuntu, makefile

我是 makefile 的新手，我正在尝试添加一个 make 调试模式。

我有以下内容：

```
CXXFLAGS=-Wall -c

debug: $(EXECUTABLE)
     CXXFLAGS+=-pg

all:
.... 
```

出于某种原因它分配它，当我把 make debug 它给我

```
CXXFLAGS+=-pg
/bin/sh: CXXFLAGS+=-pg: not found
make: *** [debug] Error 127 
```

除了 -pg 标志外，有什么办法可以避免在调试中再次写入整个 all 命令？

我试图删除 debug: target 和 CXXFLAGS 与 -pg 标志成功连接

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T22:06:21.460

如果您使用的是 gnumake，只需添加：

```
debug: CXXFLAGS += -pg
debug: $(EXECUTABLE) 
```

请注意，通常首先定义`all`，因此它是默认值。如果Makefile 中的规则`debug`出现在之前，则成为默认值（如果是第一个）。`all``debug`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:10:13.203

目标下方的所有制表符缩进行都直接通过管道传输到 shell 子进程，但是您的 CXXFLAGS 行使用的是 Makefile 语法，而不是有效的 shell 语法。

更糟糕的是，即使您使用 shell 语法，设置变量也不会延续到在不同目标下执行的行；它们只会影响同一目标下的 shell 命令，然后，只有当所有行都用`\`转义字符连接时。

Make 将从环境变量中读取值，因此您可以在运行 make 时设置环境变量，例如（Bourne-family shells）：

```
myprompt$ CXXFLAGS=" -pg $CXXFLAGS" make 
```

# android - Android Jelly Bean web 视图拒绝在文本框中输入

> ID：13241091
> 
> 赞同：1
> 
> 时间：2012-11-05T21:58:53.070
> 
> 标签：android, android-webview, android-4.2-jelly-bean

我在 Android Jelly Bean 版本中有一个问题，其中 Web 视图拒绝在文本框中输入。

尝试使用只有一个输入标签的简单页面，如下所示。在 android 浏览器中，页面工作正常，**按键**和**模糊**事件都会触发。在 Web 视图中，仅会触发**blur**事件并且不会显示文本。

我尝试了下面给出的链接中提到的 webview 设置。

[为什么 Android WebView 拒绝用户输入？](https://stackoverflow.com/questions/2083909/android-webview-refusing-user-input?rq=1)

*对于具有“ maxlength* ”属性的文本字段，果冻豆中存在一个已知缺陷。我没有使用最大长度。

```
<input id="phoneNumber" 
        name="phoneNumber" type="text" value="test" onblur="alert('lost focus');" onkeypress="alert('key press');"/> 
```

任何人都可以阐明如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T13:17:31.577

我有同样的问题和我的研究结果：

由于有没有物理按钮的设备，因此有带有相关按钮的导航栏。

因此，如果按下物理“后退”按钮，则会调用 onKeyDown 方法，我猜他们必须将此方法附加到导航栏上的“后退”按钮。

无论如何，当使用软键盘时，它会调用 onkeyDown 和 onkeyUp 方法，如果由于某种原因你覆盖它，你必须确保调用 super 以便它能够处理键事件：

```
@Override
public boolean onKeyDown(int keyCode,  KeyEvent event) 
{
    if (keyCode == KeyEvent.KEYCODE_BACK) 
    {
        // Do Somthing...
           return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

希望能帮助到你。

# php - 存储 MySQL 过程与动态 MySQL 查询

> ID：13241092
> 
> 赞同：0
> 
> 时间：2012-11-05T21:59:00.277
> 
> 标签：php, mysql, dynamic

我正在开发一个基于 php 的基本函数，该函数执行 MySQL 查询，以便对数据库中的数据进行排序并将其呈现给用户。作为一般陈述，是否认为最佳实践是简单地构造静态查询并根据需要执行它们，或者简单地根据条件将 MySQL 语句的元素拼凑在一起？

为了缩小问题的范围，我有一个具体的例子：

假设我有几个下拉菜单定义了用户端的搜索。让一个下拉列表仅包含一个名称列表，例如 Bob Smith，而另外两个下拉列表包含一个日期范围。从那里，我可以轻松地创建一个搜索，`SELECT item FROM checkOUT WHERE...`我绝对可以编写一个带有参数的通用查询，当所有三个参数都存在时要执行。考虑只选择一个日期范围而不考虑个人的情况——这将只需要两个参数和一个不同的一般查询。如果数据分布在多个表中怎么办？必须考虑到这一点。我还应该补充一点，我的功能基于下拉菜单 - 而不是原始用户输入。

基本上，创建 MySQL 查询的最佳方法是什么 - 准备好的语句或动态创建的语句？显然，最终结果将取决于两者的混合，但它最倾向于哪一方是问题所在。我问这个问题是因为我不太熟悉处理来自一个来源的多个查询的这一特殊方面。通常，我只需要执行一个查询来获取我需要的内容并使用它——而不是排序。

任何见解都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:09:14.167

我通常会创建一个 $where 变量和一个 $order 变量，然后根据来自页面的过滤器输入来构建它们。然后我只是将它附加到基本 $sql 变量并运行它。似乎对我很有用。只是不要忘记在运行查询之前逃避用户的任何讨厌的输入。

# python - 为什么 pyparsing 会删除命名结果？

> ID：13241093
> 
> 赞同：3
> 
> 时间：2012-11-05T21:59:04.443
> 
> 标签：python, pyparsing

给定以下最小的工作示例：

```
from pyparsing import *
latex_h  = QuotedString("$")('latex')
reg_text = Word(alphas)('text')
grammar  = OneOrMore( latex_h | reg_text )('line')

sol = grammar.parseString('''dog $x^2$ cat''')
print sol.dump() 
```

我希望输出看起来像：

```
['dog', 'x^2', 'cat']
- line: ['dog', 'x^2', 'cat']
  - text: dog
  - latex: x^2
  - text: cat 
```

但我得到了：

```
['dog', 'x^2', 'cat']
- latex: x^2
- line: ['dog', 'x^2', 'cat']
  - latex: x^2
  - text: cat
- text: cat 
```

我不明白为什么在解析树中`dog`被遗忘了？另外，为什么`text, latex` *外边*有两个元素`line`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T03:03:42.540

正如 Russell Borogove 所说，在同一解析级别上，命名结果必须是唯一的。你不能有一个“行”包含两个或多个相同类型的命名元素（例如两个“文本”或两个“乳胶”），因为它们都将使用底层字典中的相同键。`listAllMatches`关于最新 PyParsing 中的解决方案，我将遵从 Paul McGuire 的意见，正如他所写的那样：）

您还可以通过将解析操作附加到“latex_h”或“reg_text”来解决此问题，但是如果“latex_h”元素需要任何兄弟“reg_text”元素的知识，这将无济于事。在这种情况下，您可能需要进一步分解语法，或使用基于树的方法进行解析（从最低元素到根，通过解析操作和/或遍历结果列表） ，而不是基于字典的方法。

重要的是要注意解析树并*没有*留下“狗”。它被正确解析，只是解析结果没有分配给字典。您可以像这样访问解析的值：`sol.line[0]`

至于为什么'latex'和'cat'出现在'line'之外，你需要把OneOrMore定义放在一个Group()中。

这是一个示例，它在解析`reg_text`元素时（而不是在解析任何父元素时）对元素应用解析操作`grammar`。它不能解决您遇到的“命名结果”问题，但是如果没有关于您尝试使用解析器实现的内容的上下文，我无法提出解决方案。

```
from pyparsing import *
latex_h  = QuotedString("$")('latex')
reg_text = Word(alphas)('text')
grammar  = Group(OneOrMore( latex_h | reg_text ))('line')

def parse_reg_text(s, loc, toks):
    if toks.text == 'dog':
        return "atomic " + toks.text
    else:
        return "ninja " + toks.text

reg_text.setParseAction(parse_reg_text)

sol = grammar.parseString('''dog $x^2$ cat $y^3$''')
print sol.dump() 
```

这给出了以下输出：

```
[['atomic dog', 'x^2', 'ninja cat', 'y^3']]
- line: ['atomic dog', 'x^2', 'ninja cat', 'y^3']
  - latex: y^3
  - text: ninja cat 
```

# java - 基于 UUID 身份的复合主键映射的级联持久化问题

> ID：13241098
> 
> 赞同：1
> 
> 时间：2012-11-05T21:59:42.010
> 
> 标签：java, jpa-2.0, eclipselink

所以这里是我的问题的简短描述。我有两个表，第一个包含人员详细信息：

```
@Entity
@Converter(name = "uuidConverter", converterClass = UUIDConverter.class)
public class Person {

    private UUID mId;
    private String mLogin;

    @Id
    @UuidGenerator(name = "uuid")
    @GeneratedValue(generator = "uuid")
    @Column(name = "id", nullable = false)
    @Convert("uuidConverter")
    public UUID getId() {
        return mId;
    }

    @Column(name = "login", nullable = false)
    public String getLogin() {
        return mLogin;
    }

    public Person setId(UUID id) {
        mId = id;
        return this;
    }

    public Person setLogin(String login) {
        mLogin = login;
        return this;
    }
} 
```

第二个表包含多人偏好：

```
@IdClass(PersonPreference.Pk.class)
@Table(name = "person_preference")
@Entity
@Converter(name = "uuidConverter", converterClass = UUIDConverter.class)
public class PersonPreference {

    private Person mPerson;
    private String mComponentUid;
    private String mComponentProperties;

    @SuppressWarnings("UnusedDeclaration")
    static class Pk implements Serializable {

        private String mComponentUid;
        private UUID mPerson;

        public String getComponentUid() {
            return mComponentUid;
        }

        public void setComponentUid(String componentUid) {
            mComponentUid = componentUid;
        }

        @Convert("uuidConverter")
        public UUID getPerson() {
            return mPerson;
        }

        public void setPerson(UUID person) {
            mPerson = person;
        }

        @Override
        public int hashCode() {
            return Objects.hashCode(mComponentUid, mPerson);
        }

        @Override
        public boolean equals(Object obj) {
            if (obj == null) {
                return false;
            }
            if (getClass() != obj.getClass()) {
                return false;
            }
            final Pk other = (Pk) obj;
            return Objects.equal(this.mComponentUid, other.mComponentUid) && Objects.equal(this.mPerson, other.mPerson);
        }
    }

    @Id
    @ManyToOne(cascade = CascadeType.ALL)
    @JoinColumn(name = "person_id", nullable = false)
    public Person getPerson() {
        return mPerson;
    }

    @Id
    @Column(name = "component_uid", nullable = false)
    public String getComponentUid() {
        return mComponentUid;
    }

    @Column(name = "component_properties", nullable = false)
    public String getComponentProperties() {
        return mComponentProperties;
    }

    public PersonPreference setPerson(Person person) {
        mPerson = person;
        return this;
    }

    public PersonPreference setComponentUid(String componentUid) {
        mComponentUid = componentUid;
        return this;
    }

    public PersonPreference setComponentProperties(String componentProperties) {
        mComponentProperties = componentProperties;
        return this;
    }

    @Override
    public int hashCode() {
        return Objects.hashCode(mPerson, mComponentUid, mComponentProperties);
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == null) {
            return false;
        }
        if (getClass() != obj.getClass()) {
            return false;
        }
        final PersonPreference other = (PersonPreference) obj;
        return Objects.equal(this.mPerson, other.mPerson)
            && Objects.equal(this.mComponentUid, other.mComponentUid)
            && Objects.equal(this.mComponentProperties, other.mComponentProperties);
    }
} 
```

我还写了一个简单的测试：

```
 Person person = new Person()
        .setLogin("PersonPreferencePersistenceTestLogin");

    PersonPreference personPreference = new PersonPreference()
        .setPerson(person)
        .setComponentUid("4028808C3AA49ABB013AA49ABB2B0000")
        .setComponentProperties("{123}");

    mPersonPreferenceService.save(personPreference);

    Optional<PersonPreference> newPersonPreference = mPersonPreferenceService.getByPersonAndComponentUid(
        person,
        "4028808C3AA49ABB013AA49ABB2B0000"
    );

    Assert.assertEquals(personPreference.getComponentProperties(), newPersonPreference.get().getComponentProperties()); 
```

我们以前使用 Hibernate 作为 JPA 提供程序，并且该代码运行良好。不幸的是，在将 JPA 提供程序切换到 Eclipselink 之后，级联持久化无法正常工作。从日志中我发现：

```
--INSERT INTO PERSON (id, login) VALUES (?, ?)
    bind => [f2ce518c-8f37-4fac-bf5b-c8225d228b28, PersonPreferencePersistenceTestLogin]
--INSERT INTO person_preference (component_uid, component_properties, person_id) VALUES (?, ?, ?)
    bind => [4028808C3AA49ABB013AA49ABB2B0000, {123}, f2ce518c-8f37-4fac-bf5b-c8225d228b28]
--SELECT component_uid, component_properties, person_id FROM person_preference WHERE ((person_id = ?) AND (component_uid = ?))
    bind => [null, 4028808C3AA49ABB013AA49ABB2B0000] 
```

但是 person.getId() 返回空值。我不知道为什么？其他映射适用于级联持久化，但在 Eclipselink 中失败。

# java - 调用 startFaceDetection 后，Android 上的人脸检测可以运行多长时间？

> ID：13241099
> 
> 赞同：1
> 
> 时间：2012-11-05T21:59:58.610
> 
> 标签：java, android, android-camera, face-detection

我正在使用 FaceDetection 的相机有一个空的 PreviewTexture。我设置了 FaceDetectionListener 并在调用 startPreview 后调用 startFaceDetection。我在 FaceDetectionListener 回调中将消息打印到 logcat。大约 2-3 秒后，我的 logcat 上不断出现“SurfaceTexture 已被放弃”错误。在此之后，我假设面部检测停止，因为我没有看到我之前看到的 logcat 中的消息。一切都处于停滞状态，因为检测到人脸后代码流仍在继续。

所以我的问题是，是否有任何内存或其他限制阻止人脸检测无限运行？

# session - 暂停和恢复 Mediawiki 编辑会话

> ID：13241100
> 
> 赞同：3
> 
> 时间：2012-11-05T22:00:08.207
> 
> 标签：session, cookies, mediawiki, edit

是否可以暂停和恢复 Mediawiki 编辑？

为了解释，我编写了一个访问外部数据库的 MW 扩展；此数据库需要 OAuth 身份验证，这是一个三步过程，需要将用户重定向到外部站点以允许扩展访问外部数据库。如果 MW 扩展已经拥有 extDb 的访问令牌，那么一切都很好。但是，如果没有令牌，就会有问题。这是一个标签扩展，通过在 wiki 页面中找到某个 XML 标签来触发，该标签通常发生在编辑的“预览”或“提交”中，例如[http://server.com/wiki/index.php ?title=Bibliography&action=submit](http://server.com/wiki/index.php?title=Bibliography&action=submit)（解析器钩子是[ParserFirstCallInit](http://www.mediawiki.org/wiki/Manual%3aHooks/ParserFirstCallInit "Mediawiki 文档：ParserFirstCallInit")）。由 OAuth 代码构造的回调 URL 会将您返回到您正在编辑的页面，但处于其预编辑状态：即您丢失了所有编辑。

如何恢复编辑而不丢失我的编辑数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:41:51.833

您可以只使用将数据存储在[`$_SESSION`](http://www.php.net/manual/en/reserved.variables.session.php). MediaWiki 本身使用它来存储用户身份验证数据，因此它应该与 MediaWiki 自己的会话处理很好地集成。

请注意，默认情况下，MediaWiki 不会为匿名用户创建会话，除非他们尝试登录或执行其他需要会话的操作。如果您的外部身份验证代码仅供登录用户使用，这应该不是问题，但为了安全起见，您可能需要确保在尝试使用之前设置了会话：

```
if ( session_id() == '' ) {
    wfSetupSession();
} 
```

# java - Arduino bat 传感器注册太多次

> ID：13241101
> 
> 赞同：1
> 
> 时间：2012-11-05T22:00:08.547
> 
> 标签：java, arduino, sensors

我需要为一个项目编写一个 Arduino，我想我会添加一些花哨的东西，一个 LED 变色的东西。LED 有一种循环，可以在其中改变颜色，这需要大约 40 秒才能完成。但是，使 LED 燃烧的蝙蝠传感器会记录整个时间并再次告诉 LED 每秒几次继续工作。LED 永远不会有时间改变颜色，只会保持第一种颜色。

我不知道如何解决这个问题。我试图让 LED 延迟什么的，但显然我做错了。到目前为止的代码是这样的；

```
//Pin which triggers ultrasonic sound.
const int pingPin = 13;

//Pin which delivers time to receive echo using pulseIn().
int inPin = 12;

//Range in cm which is considered safe to enter, anything
//coming within less than 5 cm triggers the red LED.
int safeZone = 10;

//LED pin numbers
int redLed = 3, greenLed = 5;

void setup() {
    //Initialize serial communication
    Serial.begin(9600);

    //Initializing the pin states
    pinMode(pingPin, OUTPUT);
    pinMode(redLed, OUTPUT);
    pinMode(greenLed, OUTPUT);
}

void loop()
{
    //Raw duration in milliseconds, cm is the
    //converted amount into a distance.
    long duration, cm;

    //Sending the signal, starting with LOW for a clean signal 2 staat voor reactie.
    digitalWrite(pingPin, LOW);
    delayMicroseconds(2);
    digitalWrite(pingPin, HIGH);

    //Setting up the input pin, and receiving the duration in
    //microseconds for the sound to bounce off the object in front.
    pinMode(inPin, INPUT);
    duration = pulseIn(inPin, HIGH); //Documentation for pulseIn(): 
                                     //http://www.arduino.cc/en/Reference/PulseIn

    //Convert the time into a distance
    cm = microsecondsToCentimeters(duration);

    //Printing the current readings to the serial display
    Serial.print(cm);
    Serial.print("cm");
    Serial.println();

    //If het is groter dan 10 dan gaat het lichtje uit
    //else het is binnen bepaalde cm dan gaat het aan van 0 naar 255.
    if(cm>10)
    {
        analogWrite(redLed, 0);
    }
    else{
        analogWrite(redLed, map(cm,0,10,255,0));
        dela
    }

    if(cm>5)
    {
        analogWrite(greenLed, 0);
    }
    else{
        analogWrite(greenLed, map(cm,0,5,255,0));
    }

    delay(100);
}

long microsecondsToCentimeters(long microseconds)
{
  // The speed of sound is 340 m/s or 29 microseconds per centimeter.
  // The ping travels out and back, so to find the distance of the
  // object we take half of the distance travelled.
  return microseconds / 29 / 2;
} 
```

但我认为它仍然需要某种延迟。我不确定我使用的传感器叫什么，但它有两轮传感器，一个发送一个接收，它测量接收声音需要多长时间，在我的代码中我将其转换为 cm .

我希望你能帮助理解我的问题，因为我对这门语言的了解很差。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T03:07:53.057

根据需要使用`delay(ms)`延迟 40 毫秒。这将在处理来自超声波传感器的任何数据之前将 Arduino 关闭 40 毫秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T03:50:30.060

[为pulseIn](http://www.arduino.cc/en/Reference/PulseIn)设置超时值。否则，如果前一个超声波脉冲没有产生回声，程序就会卡在这条线上`duration = pulseIn(inPin, HIGH);`，因为您没有机会发送另一个超声波脉冲。

在这种情况下，最大范围为 10 cm（声脉冲的行进距离为 20 cm），因此可以相应地设置超时值（s 是距离，v 是速度，t 是时间）：

```
s = v * t  => t = s / v = 2 * 0.1 m / 343.2 m/s = 582.8 µs 
```

假设声速在 20 °C 的干燥空气中。

考虑到 2 µs 的输出脉冲宽度，总时间将为 584.8 µs。

代替

```
duration = pulseIn(inPin, HIGH); 
```

利用

```
duration = pulseIn(inPin, HIGH, 585); 
```

* * *

其他注意事项：

1.  输出脉冲非常短，预计为 2 µs。

2.  [digitalWrite() 非常慢](http://arduino.cc/forum/index.php/topic,4324.0.html)，大约为 5 µs，因此实际脉冲可能长于 2 µs。即便如此，超声波换能器也可能无法在这么短的时间内启动。

3.  即使输出脉冲比您想象的要长，它也是一个周期的数量级（如果超声波换能器以 100 kHz 运行，则周期为 10 µs）

尝试使用更长的范围和更长的输出脉冲来确保这不是问题。

# php - 将值存储到数据库而不使用表单操作

> ID：13241102
> 
> 赞同：0
> 
> 时间：2012-11-05T22:00:10.783
> 
> 标签：php, html, sql

我创建了几个网页，这些网页从用户输入中捕获信息，并将它们存储到 html 内 PHP 标记中的会话变量中。最后，我在同一页面上回显会话中的所有值，并询问用户是否所有输入都正确。我想在页面底部包含一个提交按钮，供用户将会话值提交到数据库中。我不确定如何从会话变量中的当前页面中获取值并存储到数据库中。这是我目前拥有的代码示例。

```
 <?php
   session_start();
   $name = $_SESSION['name'];

   echo "<br>Is this name right?: ".$name;
   ?> 
```

我已经创建了数据库和相应的列。我熟悉在表单提交中存储值，但是我总是通过在表单操作中嵌入一个文件并使用 $_POST[''] 获取值来获取当前表单的输入值来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T22:03:41.997

因此，在您的查询中，只需将 $_POST 替换为 $_SESSION。还是我错过了什么？

# arrays - 如何使动态数组保持不变？

> ID：13241106
> 
> 赞同：3
> 
> 时间：2012-11-05T22:00:24.003
> 
> 标签：arrays, constants, pascal, freepascal, turbo-pascal

从用户读取数据后，有什么方法可以使 x 数组保持不变？从用户（例如y）读取变量的值后，有什么方法可以使变量不可修改？

```
program hmm;
    uses crt;
    var 
        i, y: word;
        x: array of word;
begin
    readln(y);
    y:=y-1;
    SetLength(x,y); 
    for i := 0 to y do begin
        read(x[i]);
    end;
readkey;
end. 
```

为了使 y 保持不变，我尝试了类似的方法，但它不起作用 - y 将设置为 0。

```
program hmm;
    uses crt;
    var 
        i: word;
        x: array of word;
    const
    {$J+}
        y:word = 0;
    {$J-}
begin
    {$J+}
    readln(y);
    y:=y-1;
    {$J-}
    y:=0;
    SetLength(x,y); 
    for i := 0 to y do begin
        read(x[i]);
    end;
readkey;
end. 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T00:33:55.257

是的。设置初始值后，请勿在代码中更改其中任何一个。

除此之外，没有任何办法。根据定义，*动态数组*是可变的，变量也是如此 - 这就是它们具有*动态*和*变量*作为名称的原因。

# c++ - 为什么基于范围的 for 语句通过 auto&& 获取范围？

> ID：13241108
> 
> 赞同：24
> 
> 时间：2012-11-05T22:00:28.323
> 
> 标签：c++, for-loop, c++11, auto, universal-reference

*基于范围的`for`*语句*在*§6.5.4 中定义为等效于：

```
{
  auto && __range = range-init;
  for ( auto __begin = begin-expr,
             __end = end-expr;
        __begin != __end;
        ++__begin ) {
    for-range-declaration = *__begin;
    statement
  }
} 
```

其中`range-init`为基于范围的两种形式定义为`for`：

```
for ( for-range-declaration : expression )         =>   ( expression )
for ( for-range-declaration : braced-init-list )   =>   braced-init-list 
```

（该子句进一步指定了其他子表达式的含义）

为什么`__range`给出推导的类型`auto&&`？我的理解`auto&&`是，通过将表达式传递给`std::forward`. 但是，`__range`不会在任何地方通过`std::forward`. 它仅在获取范围迭代器时使用，作为`__range`、`__range.begin()`或`begin(__range)`.

使用“通用参考”有什么好处`auto&&`？还`auto&`不够吗？

注意：据我所知，[该提案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1868.html)没有说明`auto&&`.

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-05T22:07:34.580

> auto& 不够吗？

不，它不会。它不允许使用计算范围的*r 值表达式*。`auto&&`使用它是因为它可以绑定到左值表达式*或*右值表达式。因此，您无需将范围粘贴到变量中即可使其工作。

或者，换句话说，这是不可能的：

```
for(const auto &v : std::vector<int>{1, 43, 5, 2, 4})
{
} 
```

> 还`const auto&`不够吗？

不，它不会。A`const std::vector`只会将`const_iterator`s 返回到它的内容。如果您想对`const`内容进行非遍历，那将无济于事。

# regex - 正则表达式混淆 - 一定长度的标题

> ID：13241110
> 
> 赞同：1
> 
> 时间：2012-11-05T22:00:38.573
> 
> 标签：regex

我已经阅读了几个小时的正则表达式教程，但我似乎无法很好地掌握它。我想要一个正则表达式语句，仅当标题特别长（1000 多个字符）时才提取 html 标题。我设法解决了以下问题以选择整个标题：

```
<title>(.*?)</title> 
```

我不知道从哪里开始添加长度部分。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T22:02:25.783

```
<title>(.{1000,})</title> 
```

会这样做（除非标题包含换行符 - 在这种情况下，它取决于正则表达式引擎如何处理）。

这还假定`<title>`您正在查看的字符串中只有一个标签（这可能是 HTML 文件中的情况，因此您应该没问题，因为一般警告说正则表达式在处理 HTML 时是一个脆弱的工具）。

# javascript - 悬停突出显示多个 div 标签

> ID：13241111
> 
> 赞同：2
> 
> 时间：2012-11-05T22:00:40.273
> 
> 标签：javascript, css, html, mouseover

附上一张图片，显示我正在寻找的东西。当鼠标悬停在框上时，鼠标上方的所有框都会突出显示。盒子是完全分开的

我这辈子都想不通！

感谢您的帮助。

![在此处输入图像描述](../Images/0c05a8b1e48c23805ad676dc8624e5c9.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T22:18:48.037

考虑到以下 HTML 标记，纯 CSS 方法是可能的：

```
<div class="container">
    <div class="box">
    </div>
    <!-- other elements -->
    <div class="box">
    </div>
</div>
​ 
```

使用以下 CSS：

```
div {
    width: 80%;
    margin: 1em auto;
    min-height: 2em;
    border: 1px solid #000;
}

div.box { /* default */
    background-color: #009;
    margin: 0 auto;
}

.container:hover .box {
    background-color: red;
}

.container:hover .box:hover ~ .box {
    background-color: #009;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/QFUES/)。

当然，这确实需要一个支持通用兄弟`~`组合子的浏览器，并且再次“当然”这些元素是兄弟。

不幸的是，由于元素之间的边距`.box`，这[确实会导致闪烁](http://jsfiddle.net/davidThomas/QFUES/1/)（当元素`:hover`从`.box`元素移到父`.container`元素时）

参考：

*   [CSS 通用兄弟`~`组合](http://www.w3.org/TR/selectors/#general-sibling-combinators)器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T22:09:46.820

由于您没有提及您的标记，因此我使用 jQuery 从头开始​​构建了一些东西：

**JavaScript**

```
$('.container > div').hover(
    function() {
        $(this).prevAll().addClass('active');
    },
    function() {
        $('.container > div').removeClass('active');
    }
);​ 
```

**HTML**

```
<div class="container">
    <div>1</div>
    <div>2</div>
    <div>3</div>
    <div>4</div>
</div> 
```

**CSS**

```
div.container > div {
    width: 100px;
    height: 20px;
    background: #ccc;
}

div.container > div:hover, div.container > div.active {
    background: red;
    color:white;
} 
```

**​演示**

 **[先试后买](http://jsfiddle.net/wFN9t/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T22:19:54.353

这个**[jsFiddle 示例](http://jsfiddle.net/j08691/6LKWg/)**应该这样做：

```
$('div').mouseover(function() {
    var x = $(this, 'div').index();
    $('div:lt(' + (x + 1) + ')').addClass('red');
    $('div:gt(' + x + ')').removeClass('red');
});​ 
```**

# mysql - 慢依赖子查询的问题

> ID：13241119
> 
> 赞同：1
> 
> 时间：2012-11-05T22:01:07.943
> 
> 标签：mysql, sql, optimization

我有一个在 MySQL 中运行的查询。如您所见，查询的每个部分都在索引字段上。然而，查询需要很长时间（几十分钟，比我愿意等待的时间长）。Connect 表由两个整数和两个索引组成（一个字段一，字段二，另一个字段二，字段一）。源和目标是具有单个索引 int 字段的表。鉴于所有索引，我希望此查询在几秒钟内完成。关于 1 的任何建议：为什么需要这么长时间，以及 2：如何让它更快？

谢谢！

```
mysql> explain 
SELECT DISTINCT geneConnect.geneSymbolID FROM SNPEffectGeneConnector AS geneConnect 
  JOIN IndelSNPEffectConnector AS snpEConnect ON geneConnect.snpEffectID = snpEConnect.snpEffectID 
  JOIN InDels2 AS source ON source.id = snpEConnect.indelID 
  WHERE geneConnect.geneSymbolID NOT IN (
    SELECT geneConnect.geneSymbolID FROM SNPEffectGeneConnector AS geneConnect 
    JOIN IndelSNPEffectConnector AS snpEConnect ON geneConnect.snpEffectID = snpEConnect.snpEffectID 
    JOIN InDels3 AS target ON target.id = snpEConnect.indelID);
+----+--------------------+-------------+-------+-------------------+----------+---------+-----------------------------------------------------------------------+------+--------------------------------+
| id | select_type        | table       | type  | possible_keys     | key      | key_len | ref                                                                   | rows | Extra                          |
+----+--------------------+-------------+-------+-------------------+----------+---------+-----------------------------------------------------------------------+------+--------------------------------+
|  1 | PRIMARY            | source      | index | id                | id       | 4       | NULL                                                                  | 5771 | Using index; Using temporary   |
|  1 | PRIMARY            | snpEConnect | ref   | snpEList          | snpEList | 4       | treattablebrowser.source.id                                           |    2 | Using index                    |
|  1 | PRIMARY            | geneConnect | ref   | snpEList          | snpEList | 4       | treattablebrowser.snpEConnect.snpEffectID                             |    1 | Using where; Using index       |
|  2 | DEPENDENT SUBQUERY | geneConnect | ref   | snpEList,geneList | geneList | 4       | func                                                                  |    1 | Using index                    |
|  2 | DEPENDENT SUBQUERY | target      | index | id                | id       | 4       | NULL                                                                  | 6297 | Using index; Using join buffer |
|  2 | DEPENDENT SUBQUERY | snpEConnect | ref   | snpEList          | snpEList | 8       | treattablebrowser.target.id,treattablebrowser.geneConnect.snpEffectID |    1 | Using index                    |
+----+--------------------+-------------+-------+-------------------+----------+---------+-----------------------------------------------------------------------+------+--------------------------------+ 
```

6 行（0.01 秒）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T22:09:44.210

我想这在很大程度上是学术兴趣，现在格雷格自己解决了。很高兴知道我对这些事情的直觉可以完全打破。我仍然可以用三种方式重写它。我认为第一个可以简化，但正如 Greg 指出的那样，简化不起作用。不确定这是否会比原来的更快，尽管它在我在 sql server 上的测试中确实产生了不同的查询计划。

```
Select Distinct
    g1.geneSymbolID 
From
    SNPEffectGeneConnector AS g1 
        Inner Join
    IndelSNPEffectConnector AS s1 
        ON g1.snpEffectID = s1.snpEffectID 
        Inner Join
    InDels2 AS i2 ON i2.id = s1.indelID 
Where Not Exists (
    Select 'x'
        From
            SNPEffectGeneConnector As g2
                Inner Join
            IndelSNPEffectConnector AS s2 
                On g2.snpEffectID = s2.snpEffectID 
                Inner Join
            InDels3 As i3
                On i3.id = s2.indelID
        Where
            g2.geneSymbolID = g1.geneSymbolID
    ); 
```

我不是 100% 确定第二种方式，但它适用于我非常少量的测试数据。如果它有效，它的查询计划要短得多（不一定更快，但一个很好的指示）：

```
Select
  geneSymbolID
From
  SNPEffectGeneConnector As g
    Inner Join 
  IndelSNPEffectConnector As s
    ON g.snpEffectID = s.snpEffectID 
    Left Outer Join
  InDels2 As i2 
    On i2.id = s.indelID 
    Left Outer Join
  InDels3 As i3
    On i3.id = s.indelID
Group By
    geneSymbolID
Having
    count(i2.id) > 0 And
    count(i3.id) = 0 
```

另一种方法（为非描述性别名道歉）：

```
Select
    g.geneSymbolID
From
    SNPEffectGeneConnector As g
        Inner Join
    IndelSNPEffectConnector AS s
        On g.snpEffectID = s.snpEffectID 
        Inner Join (
        Select 
            i2.id,
            0 As c
        From    
            InDels2 i2
        Union All
        Select
            i3.id,
            1
        From
            InDels3 i3
    ) as i23
    on s.indelID = i23.id
Group By
    g.geneSymbolID
Having
    max(i23.c) = 0; 
```

[http://sqlfiddle.com/#!2/944e1/10](http://sqlfiddle.com/#!2/944e1/10)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:09:57.057

```
 SELECT DISTINCT geneConnect.geneSymbolID 
    FROM SNPEffectGeneConnector AS geneConnect 
      JOIN IndelSNPEffectConnector AS snpEConnect 
          ON geneConnect.snpEffectID = snpEConnect.snpEffectID 
      JOIN InDels2 AS source ON source.id = snpEConnect.indelID
      LEFT OUTER JOIN InDels3 AS target ON target.id = snpEConnect.indelID
    WHERE target.id is null 
```

上面的查询应该与您的查询等效，并为您提供更好的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T22:38:26.487

如果我理解正确，您希望找到所有`geneSymbolID`' 中的`SNPEffectGeneConnector`条目`IndelSNPEffectConnector`，以便它们**确实**具有匹配项 (on `indelID`) in`InDels2`但**没有**与in*相同* 的匹配项。`indelID``InDels3`

然后您可以运行查询的第一部分（“do”部分），然后进一步连接最后一部分，从而收集所有匹配的*基因。*A`LEFT JOIN`与强加匹配*失败*的基因符号表将产生所有不符合反向标准的基因，因此是感兴趣的。

## 修改后的答案

这是*匹配*的查询：

```
SELECT DISTINCT genes.geneSymbolID
FROM ( SELECT DISTINCT geneSymbolID FROM SNPEffectGeneConnector ) AS genes
JOIN SNPEffectGeneConnector AS effectSource
    ON ( genes.geneSymbolID = effectSource.geneSymbolID)
JOIN SNPEffectGeneConnector AS effectTarget
    ON ( genes.geneSymbolID = effectTarget.geneSymbolID)
JOIN IndelSNPEffectConnector AS indelSource
    ON ( indelSource.snpEffectID = effectSource.snpEffectID )
JOIN IndelSNPEffectConnector AS indelTarget
    ON ( indelTarget.snpEffectID = effectTarget.snpEffectID ) 
     JOIN InDels2 ON ( indelSource.indelId = InDels2.id )
     JOIN InDels3 ON ( indelTarget.indelId = InDels3.id )
; 
```

现在，对于这个查询，我认为您需要这些索引：

```
CREATE INDEX SNPEffectGeneConnector_ndx
    ON SNPEffectGeneConnector(snpEffectID, geneSymbolID);

CREATE INDEX SNPEffectGeneConnector_ndx2
    ON SNPEffectGeneConnector(geneSymbolID);

CREATE INDEX IndelSNPEffectConnector_ndx
    ON IndelSNPEffectConnector(snpEffectID, indelID);
CREATE [UNIQUE?] INDEX InDels2_ndx ON InDels2(id); -- unless id is primary key
CREATE [UNIQUE?] INDEX InDels3_ndx ON InDels3(id); -- unless id is primary key 
```

获取感兴趣的基因：

```
SELECT glob.geneSymbolID
    FROM ( SELECT DISTINCT geneSymbolID FROM SNPEffectGeneConnector ) AS glob
    LEFT JOIN (
SELECT DISTINCT genes.geneSymbolID
FROM ( SELECT DISTINCT geneSymbolID FROM SNPEffectGeneConnector ) AS genes
JOIN SNPEffectGeneConnector AS effectSource
    ON ( genes.geneSymbolID = effectSource.geneSymbolID)
JOIN SNPEffectGeneConnector AS effectTarget
    ON ( genes.geneSymbolID = effectTarget.geneSymbolID)
JOIN IndelSNPEffectConnector AS indelSource
    ON ( indelSource.snpEffectID = effectSource.snpEffectID )
JOIN IndelSNPEffectConnector AS indelTarget
    ON ( indelTarget.snpEffectID = effectTarget.snpEffectID ) 
     JOIN InDels2 ON ( indelSource.indelId = InDels2.id )
     JOIN InDels3 ON ( indelTarget.indelId = InDels3.id )
) AS fits ON (glob.geneSymbolID = fits.geneSymbolID)
WHERE fits.geneSymbolID IS NULL; 
```

## 测试

```
CREATE TABLE InDels2 ( id integer );
INSERT INTO InDels2 VALUES ( 1 );
CREATE TABLE InDels3 ( id integer );
INSERT INTO InDels3 VALUES ( 2 );
CREATE TABLE IndelSNPEffectConnector ( indelId integer, snpEffectID integer );
INSERT INTO IndelSNPEffectConnector VALUES ( 1, 55 ), ( 2, 88 );
CREATE TABLE SNPEffectGeneConnector ( geneSymbolID integer, snpEffectID integer );
INSERT INTO SNPEffectGeneConnector VALUES ( 100, 55 ), ( 100, 88 ); 
```

因此，由于基因 100 连接到连接到 1 的 55，因此在 ID2 中注明，但它也连接到连接到 2 的 88，因此在 ID3 中，它不能出现。

*会*出现什么？如果我理解了要求，我们需要一个基因，引起一个效果，它的插入缺失*不在*. `inDels3`因此，比如说，导致效应 77 的基因 42，与 indel 3 相关联，而 indel 3 中*不*存在`inDels3`，则必须出现。

所以：

```
INSERT INTO SNPEffectGeneConnector VALUES ( 42, 55 );
INSERT INTO SNPEffectGeneConnector VALUES ( 42, 77 );
INSERT INTO IndelSNPEffectConnector VALUES ( 3, 77 ); 
```

产量

```
+--------------+
| geneSymbolID |
+--------------+
|           42 |
+--------------+ 
```

可以使用对第一个查询的修改来检查为什么 42 去，而 100 不去：

```
SELECT genes.geneSymbolID, effectSource.snpEffectID, effectTarget.snpEffectID, indelSource.indelId AS sourceInDel, indelTarget.indelId AS targetInDel, InDels3.id
FROM ( SELECT DISTINCT geneSymbolID FROM SNPEffectGeneConnector ) AS genes
 JOIN SNPEffectGeneConnector AS effectSource
     ON ( genes.geneSymbolID = effectSource.geneSymbolID)
 JOIN SNPEffectGeneConnector AS effectTarget
     ON ( genes.geneSymbolID = effectTarget.geneSymbolID)
 JOIN IndelSNPEffectConnector AS indelSource
     ON ( indelSource.snpEffectID = effectSource.snpEffectID )
 JOIN IndelSNPEffectConnector AS indelTarget
     ON ( indelTarget.snpEffectID = effectTarget.snpEffectID )

      JOIN InDels2 ON ( indelSource.indelId = InDels2.id )
 LEFT JOIN InDels3 ON ( indelTarget.indelId = InDels3.id );

+--------------+-------------+-------------+-------------+-------------+------+
| geneSymbolID | snpEffectID | snpEffectID | sourceInDel | targetInDel | id   |
+--------------+-------------+-------------+-------------+-------------+------+
|           42 |          55 |          55 |           1 |           1 | NULL |
|           42 |          55 |          77 |           1 |           3 | NULL |
|          100 |          55 |          55 |           1 |           1 | NULL |
|          100 |          55 |          88 |           1 |           2 |    2 |
+--------------+-------------+-------------+-------------+-------------+------+ 
```

...100 有一行，其 InDels3 的 ID 不为空，它报告目标 indel 2。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T03:37:23.543

事实证明，问题在于，虽然所有内容都有索引，但子查询返回的基因 ID**没有**索引。加入/对未索引的数字集合进行 IN 搜索的性能非常差，这就是我得到的。

我的解决方案是分别进行外部和内部 JOIN，将结果转储到两个不同的索引表中，然后删除 1 中的也位于 2 中的基因 ID。

故事的寓意：永远不要加入或加入任何未编入索引的集合。

# expressionengine - 在字段说明中显示 HTML，而不是渲染？

> ID：13241124
> 
> 赞同：1
> 
> 时间：2012-11-05T22:01:34.330
> 
> 标签：expressionengine

我有一个嵌入视频的字段。在描述中，我想展示一个代码应该是什么样子的示例。然而，本机 EE 将呈现 HTML。有没有办法在不渲染的情况下准确显示代码的外观？其他字段具有需要呈现的 HTML，因此如果有全局开/关，则必须打开。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T22:10:13.017

看看[NSM 发布提示](http://ee-garage.com/nsm-publish-hints)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T10:53:50.727

如果我们谈论的是频道中的特定 CF，我的处理方式如下：

*   对于外部服务（youtube/viemo）：有一个自定义字段（文本），人们只需在其中粘贴视频的 ID，还有另一个字段（P&T pill 或 dropwown），编辑选择服务（vimeo、youtube）。各种嵌入代码在 if/else 或 case 逻辑中的模板端处理
*   对于 HTML5 自托管视频：具有多个文件字段，可让人们选择各种所需格式的视频。这些视频通过 FTP 上传并使用文件管理器同步。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-06T00:24:34.703

将您的代码复制并粘贴到此编码器中，并将输出粘贴到描述字段中：

[http://www.opinionatedgeek.com/DotNet/Tools/HTMLEncode/encode.aspx](http://www.opinionatedgeek.com/DotNet/Tools/HTMLEncode/encode.aspx)

# php - 如何在wordpress中添加自定义页面

> ID：13241126
> 
> 赞同：-5
> 
> 时间：2012-11-05T22:01:42.067
> 
> 标签：php, wordpress

我有一个文字新闻网站**hello.com**。

我需要向站点添加一个自定义页面，以便它显示该页面的内容。

它可能是一个 php 或 html 页面，如*welcome.php*或*welcome.html*。

它应该能够在浏览器上使用***hello.com/welcome 。***

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:04:16.703

你有ftp访问权限吗？我假设您不想简单地创建一个页面。如果您可以通过 ftp 访问该站点，则可以上传 php 或 html 文件。这不会将页面添加到 Wordpress 数据库，但不需要安装任何插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:27:19.187

我得到了我的问题的答案。

1）首先创建一个页面说welcome.php，然后添加like

```
<?php
/*
Template Name: welcome
*/
?> 
```

将页面上传到选定的主题文件夹

2）然后转到管理端并创建一个新页面并从其模板选项中选择欢迎。

3) 获取创建页面的 url，然后它会从 'welcome.php' 页面加载内容

# css - 令人沮丧的 CSS 浮动问题

> ID：13241128
> 
> 赞同：2
> 
> 时间：2012-11-05T22:02:05.410
> 
> 标签：css, wordpress, mailchimp

我已经让两个开发人员查看了这个问题，但他们无法弄清楚是什么导致了这个问题。

在以下站点上，订阅栏（页面顶部）在 Chrome、Safari 和 Firefox 中看起来很好并且功能正常，但在 IE 中出现问题，它将订阅按钮向下移动一行并与“资源”导航项重叠。必须设置特定宽度才能使浮动正常工作，但是当您将宽度设置为自动时，它会浮动在其左侧的元素下方。虽然它仍然以这种方式正常运行，但它是有问题的，因为它看起来很糟糕。

我认为这个问题与 CSS 相关，但请注意我在 WordPress 中使用主题并集成了 MailChimp 订阅表单。

任何想法的建议将不胜感激。

提前谢谢你 - 阿什利

[网站参考](http://deniselalonde.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:17:49.817

请注意，我也不是 CSS 专业人士。

我正在使用 Firefox 16.0.2 查看您的网站，并且看到您描述的相同问题。

使用 Firebug，我相信你应该`width: 430px`从`<div id="mc_signup">`. 当前宽度对于完整的表单来说太小了，我认为这就是订阅按钮移动到表单其余部分下方的原因。（它只是包装，因为没有足够的水平空间）

看截图，蓝色区域是`<div id="mc_signup">`，限制为 430px。

[截图 http://img841.imageshack.us/img841/1540/denised.png](http://img841.imageshack.us/img841/1540/denised.png)

我希望这回答了你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:14:02.343

我在 Chrome 下遇到问题。增加`#mc_signup`' 的宽度`440px;`应该可以解决您的问题。

或者，您可以更改`#subscribe .wrapper .center`并替换`width: 100%; text-align: center;`浮动`.leftcopy``#mc_signup``display: inline-block;`

如果您想要更具体的答案，我建议您编辑您的问题。请添加截图。

我强烈建议您查看以下链接，了解如何正确浮动元素。 [www.quirksmode.org/css/clearing.html](http://www.quirksmode.org/css/clearing.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T22:17:05.050

您描述的问题也存在于 Opera 和 Chrome 中。但是我`padding: 0px 10px;`从其中删除了该部分`input#mc_signup_submit.button`，这很好。

# python - 如何区分 Scrapy 中的两种文本格式？

> ID：13241134
> 
> 赞同：0
> 
> 时间：2012-11-05T22:02:36.410
> 
> 标签：python, scrapy

我`HtmlXPathSelector(response)`在 Scrapy 中使用对象，我需要获取两种文本格式：

我的第一个文本具有以下格式：

```
<p> Text, text, text, text, text, text, text, text, text </p>
<p>
<p> Text, text, text, text, text. </p> 
```

我的第二个文本具有以下格式：

```
Text, text, text, text, text, text
<br>
<br>
Text, text, text..
<br>
<br> 
```

当我使用`x.select('//div[@id="texto"]/text()').extract()`但不是第二个时......我得到这样的东西：

```
'content': [u'\r\n          ',
                 u'\r\n',
                 ...
                 u'\r\n'] 
```

当我使用时，`x.select('//div[@id="texto"]/p/text()').extract()`我得到第二个但不是第一个：

我怎样才能使用一种*规则*来获得两种格式？

**更新：**

我得到了下一个代码的解决方案，但我觉得这是一个肮脏的解决方案：

```
content = x.select('//div[@id="nota_texto"]/p/text()').extract()
if content == []:
    data['content'] = x.select('//div[@id="nota_texto"]/text()').extract()
else:
    data['content'] = content 
```

**更新 2：**

可以使用双斜杠`//`，但是现在我正在获取表格的内容，因为 HTML 具有以下格式：

```
<div id="texto">
      <table>
        Undesired content
      </table>
       Desired content.
</div> 
```

如何避免获得“不受欢迎的内容”？

**更新 3：**

我在 Scrapy Users Google Groups 中收到了 Steven Almeroth 的回答：

使用以下兄弟姐妹：

```
x.select('id("texto")/table/following-sibling::node()').extract() 
```

有用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:03:28.540

因此，您想要 id 为“texto”的 div 中的所有文本及其子项？
如果是这种情况，这应该有效：

```
x.select('//div[@id="texto"]//text()').extract() 
```

如果这对您来说太笼统，您可以使用`|`运算符匹配多个 xpath。

```
'<xpath1>|<xpath2>' 
```

编辑：

如果'//text()' xpath 得到的比你想要的多，你应该更具体。
这就是`|`进来的地方。试试类似的东西：

```
x.select('//div[@id="texto"]/text() | //div[@id="texto"]/p/text()') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T10:31:42.293

试试这个 Xpath 查询：

```
string(//div[@id="texto"]) 
```

# html - 如何解决这个 CSS 问题？

> ID：13241137
> 
> 赞同：-3
> 
> 时间：2012-11-05T22:02:59.947
> 
> 标签：html, css

我有一些CSS问题...

[当您从此处](http://laptopsisland.com/shop/c/laptops/)将鼠标悬停在产品上时，您可以看到“立即显示”..

[但是，当您从此处](http://yourinspirationweb.com/demo/maya/home-version-v/)将鼠标悬停在产品上时，您可以看到“添加到购物车”，并且您还会看到“添加到购物车”的一些黑色背景，我不明白..

我可以知道我还需要在 CSS 中添加什么吗？

**这是我显示产品的代码：**

```
<!-- Product List -->
<div class="pl">
  [product.each]

  <div class="t1 col3">

    <ul class="products ribbon">

      <li class="product">

        <a href="[product.link]">

          <div class="thumbnail">

              <img width="150" height="150" src="[product.image direct='1' tag='0']" class="attachment-shop_catalog wp-post-image" alt="[product.name]" title="[product.name]">    

              <div class="thumb-shadow"></div>

              <strong class="below-thumb">[product.name]</strong>  

            </div>

          <span class="price">

            <span class="amount">

              <?php if ($product->saleprice > 0 &&  $product->saleprice < $product->price) { ?>

                    <div class="prc">
                <small>
                   <span style="text-decoration: line-through; color:blue;">[product.currency mode='sign'][product.price]</span>&nbsp&nbsp
                   <span style="font-weight: bold; color:red;">[product.currency mode='sign'][product.saleprice]</span>
                </small>
                    </div>
                    <?php } else { ?>
                    <div class="prc">
                <small>
                  <span style="font-weight: bold; color:blue;">[product.currency mode='sign'][product.price]</span>
                </small>
                    </div>    

                <?php } ?>                

              </span>

            </span>

          </a>

          <div class="buttons" style="opacity: 0; visibility: visible; overflow: hidden; height: 41px; ">
                <a href="[product.link]"  class="add-to-cart add_to_cart_button product_type_simple" style="position: relative; top: -41px; ">SHOP NOW</a>
           </div>      

      </li>    

    </ul>

  </div>  <!-- t1 col3 #end --> 

      [/product.each]
      <div class="clearingdiv"> </div>

 </div>
<!-- /Product List --> 
```

**所以，请告诉我我错过了什么..？您可以在源代码中找到 CSS 代码...**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:33:47.917

他们使用了[背景图片](http://yourinspirationweb.com/demo/maya/wp-content/themes/maya/images/product-ribbon.png)。

在您的情况下，您需要在`.buttons`其中设置背景或锚点。

顺便说一句：请停止使用内联样式表；请改用单独的`<style>`块或外部 CSS 文件。这样，您的 CSS 就更容易阅读和理解。

# c# - c#中保存大字节流的设计指南

> ID：13241140
> 
> 赞同：0
> 
> 时间：2012-11-05T22:03:19.593
> 
> 标签：c#

我有一个应用程序，我每 50 毫秒左右非常快地接收大字节数组。

字节数组包含一些信息，如文件名等。数据（字节数组）可能来自多个来源。

每次收到数据时，我都必须找到文件名并将数据保存到该文件名。

我需要一些指导方针来指导我应该如何设计它以使其高效工作。

以下是我的代码...

```
public class DataSaver
    {
        private static Dictionary<string, FileStream> _dictFileStream;

        public static void SaveData(byte[] byteArray)
        {
            string fileName = GetFileNameFromArray(byteArray);
            FileStream fs = GetFileStream(fileName);
            fs.Write(byteArray, 0, byteArray.Length);
        }

        private static FileStream GetFileStream(string fileName)
        {
            FileStream fs;
            bool hasStream = _dictFileStream.TryGetValue(fileName, out fs);
            if (!hasStream)
            {
                fs = new FileStream(fileName, FileMode.Append);
                _dictFileStream.Add(fileName, fs);
            }
            return fs;
        }

        public static void CloseSaver()
        {
            foreach (var key in _dictFileStream.Keys)
            {
                _dictFileStream[key].Close();
            }
        }
    } 
```

如何改进此代码？我需要创建一个线程来进行保存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:24:58.520

我可以想象一个线程池，对于每个请求，一个线程将接管并保存数据或执行必须完成的操作，并继续等待新请求。考虑使用 TPL 或更旧的 ThreadPool。

# javascript - 从异步加载的js文件异步加载js文件

> ID：13241141
> 
> 赞同：0
> 
> 时间：2012-11-05T22:03:21.467
> 
> 标签：javascript, jquery, asynchronous, loading

我在通过脚本标签插入的页面上有一个javascript文件（initial.js），如下所示：

```
<script src="initial.js"></script> 
```

该文件创建 dom 元素（假设是两个链接）并通过 jQuery ajax 方法异步加载另一个 jQuery 插件（plugin.js）。单击这两个链接会弹出一个来自 jQuery 插件（plugin.js）的模块。

然后修改 javascript 文件（initial.js）以通过 jQuery ajax 而不是通过脚本标记在页面上异步加载。这导致一些事件没有间歇性地附加到链接，这导致插件没有被调用。

我相信浏览器正在按自己的顺序加载异步脚本，因此链接无法间歇性地启动插件。使用此新设置解决此问题的任何指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:19:54.387

您过去可能尝试过这样的事情：

```
var output;
$.get('data.php',function(data){
    output=data;
});
alert(output); 
```

您将收到一个未定义的错误，因为 Javascript 在移动到下一个代码之前不会等待返回 AJAX 调用。

脚本也是如此。如果您对多个脚本进行多次调用，您可能会以最快的速度返回最小的那个，并执行该脚本。如果您加载一个 10kb 的脚本，然后加载一个 1kb 的脚本，则 1kb 脚本可能会以最快的速度返回然后执行，即使它是在 10kb 脚本之后调用的。

要纠正这个问题，您可以创建一个队列系统，然后仅在加载前一个脚本后加载每个脚本：

```
var scripts=['script1.js','script2.js','script3.js'];

$(document).ready(function(){
    loadScript();
});

function loadScript(){
    if(sendQueue.length==0)
        return;
    $.getScript(scripts[0],function(){
        scripts=scripts.slice(1);
        loadScript();
    });
} 
```

但是，如果您从脚本中加载脚本......非常类似于 Inception，那么这仍然可能无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:08:42.030

在高层次上，我认为你需要研究一下[require.js 之](http://requirejs.org/)类的东西。或者，您可以查看一些 jQuery 事件处理代码，它允许您侦听调用的加载事件，这可以帮助您确定在加载下一个脚本之前何时加载一个脚本。

# java - 为什么 Java 编译器需要返回值？

> ID：13241144
> 
> 赞同：-4
> 
> 时间：2012-11-05T22:03:31.727
> 
> 标签：java

```
public MyObject method1() {
  boolean someBoolean = true;
  MyObject obj = ...;

  if(!someBoolean) method1();
  else return obj;
  // flow should never come to this statement, but compiler requires this return. why?
  return null;
} 
```

为什么java编译器需要最后的return语句？

-Prasanna

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T22:04:41.650

如果`!someBoolean`, then`method1`被调用，但没有返回任何内容。因此，flow 完全可能以最后一个语句结束。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T22:05:02.730

因为如果您的布尔值不正确，您将不会返回任何内容。Java 要求所有方法都返回其对应的值类型（在本例中为`MyObject`）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T22:06:04.540

您需要修改您的代码：

```
public MyObject method1() {
  boolean someBoolean = true;
  MyObject obj = ...;

  if(!someBoolean) return method1();
  else return obj;
} 
```

最初，您的 if 语句没有返回任何 if `!someBoolean`，它只是调用`method1()`并忽略了结果。

# html - pushState 保持在同一页面上

> ID：13241147
> 
> 赞同：0
> 
> 时间：2012-11-05T22:03:43.660
> 
> 标签：html, routing, pushstate

我正在尝试使用 HTML5 pushState 来解决问题。它似乎工作得很好。我可以添加状态，用我的浏览器返回，一切看起来都很好。但是，当我刷新页面时，它会导致 404，因为附加了 pushState 的 URL 实际上并不存在......

我正在尝试从带有`index.html`页面的单个文件夹中加载所有内容，因此 URL 看起来像`http://www.server.com/app_name/<something>`（`app_name`是带有 index.html 文件的文件夹）。

据我所知，hashbang 被认为是不好的，那么**我可以/应该使用哪些 pushState URL 将保留在同一个实际页面上并允许我刷新？**

刷新后，我还能找回状态吗？

ps 我不关心没有启用 javascript 或保持向后兼容性的浏览器。我不想更改任何`.htaccess`规则以使其可移植且无需配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:16:09.953

您的问题是您的网络服务器试图在您的*app_name文件夹中找到一个名为**something*的文件。您必须做的是将所有到 /app_name/* 的请求路由到您的 index.html，然后使用 DOM 的位置对象设置适当的应用程序状态。

 *如果不告诉服务器它应该做什么，你就不会走得太远。这就是 History API 的全部意义所在。如果您不想弄乱 .htaccess 文件，您可能应该使用 mod_rewrite 或 sth 编辑您的 Web 服务器（Apache？）的配置。像那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T22:31:35.750

我最终放弃了 pushState，转而使用[BBQ](http://benalman.com/projects/jquery-bbq-plugin/) jQuery 插件。

代码看起来像这样：

```
$(document).ready(function() {
  // making sure a hashchange event is triggered for refresh
  $(window).trigger('hashchange');
});

// this gets called on any page change, back button etc                                                                                                                                                                                                                                             
$(window).bind( 'hashchange', function(e) {
  // the fragment contains a hash value at the
  // end of the url, e.g. #xyz
  var url = $.param.fragment();
  // simulating a click on the appropriate link on the page
  // based on the fragment
  $('.panel a[href="#' + url + '"]').click()
}); 
```

页面上的 URL 采用以下格式：

```
<a href="#xyz">link to xyz</a> 
```*

# json - 带有 JavaScriptSerializer 的嵌套列表

> ID：13241153
> 
> 赞同：5
> 
> 时间：2012-11-05T22:04:23.710
> 
> 标签：json, javascriptserializer

我正在尝试在 Net 3.5 中使用 JavaScriptSerializer 生成以下 JSON 结构：

```
{
    "chart": "pie",
    "series": [
        {
            "name": "Browsers",
            "data": [
                [
                    "Firefox",
                    6
                ],
                [
                    "MSIE",
                    4
                ]
            ],
            "size": "43%"
        }
    ]
} 
```

我面临的问题是关于*数据*部分。我似乎无法在*data*中创建一个序列化为上述结构的类。

我已经阅读了其他涉及该主题的帖子，但解决方案似乎总是使用 JSON.Net。例如[使用 JavaScriptSerializer 序列化字典](https://stackoverflow.com/questions/6416950/serializing-dictionaries-with-javascriptserializer)。虽然，我主要想通过使用 JavaScriptSerializer 或 .Net 3.5 框架中的其他内置功能来解决它​​。

如何生成数据部分？

***EDIT**使用 JavaScriptSerializer 解决它的方法是为即将被序列化的对象上的数据属性创建一个对象数组。

输入参数*数据*为“Firefox:6\nMSIE:4\nChrome:7”。

公共对象[] GetData(字符串数据) { var dataStrArr = data.Split(new[] { Environment.NewLine }, StringSplitOptions.None);

```
 var dataArr = new object[dataStrArr.Length];

        for (var index = 0; index < dataStrArr.Length; index++)
        {
            var component = dataStrArr[index];
            var componentArr = component.Split(':');
            if (componentArr.Length != 2)
                continue;

            var key = componentArr[0];
            decimal value;

            if (decimal.TryParse(componentArr[1], out value))
            {
                var keyValueArr = new object[2];
                keyValueArr[0] = key;
                keyValueArr[1] = value;

                dataArr[index] = keyValueArr;
            }
        }

        return dataArr;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-15T16:59:06.010

我认为你需要类似下面的类（RootObject）来序列化它：

```
public class Series
{
  public string name { get; set; }
  public List<List<object>> data { get; set; }
  public string size { get; set; }
}

public class RootObject
{
  public string chart { get; set; }
  public List<Series> series { get; set; }
} 
```

让我知道这是否有帮助。

# android - android：@string 的文本问题

> ID：13241156
> 
> 赞同：0
> 
> 时间：2012-11-05T22:04:37.547
> 
> 标签：android

我购买了一本入门 Android 书籍并开始阅读和执行示例。第一个说要添加这样的代码：

```
...
...
android:text="This is my first Android Application!" /> 
```

我的问题是，我们不再使用“@string/...”了吗？我收到一条警告说我应该使用它，但是当我这样做时，它会变成一个红色的 X。有了警告，它至少会尝试运行，但模拟器会崩溃。有任何想法吗？

谢谢！

史蒂夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T22:08:59.643

你可能想要使用类似的东西

```
android:text="@string/copy_here" 
```

然后在字符串文件中使用

```
<string name="copy_here">copy here</string> 
```

# unity3d - Unity 游戏引擎中的空引用异常

> ID：13241163
> 
> 赞同：-1
> 
> 时间：2012-11-05T22:05:19.720
> 
> 标签：unity3d, nullreferenceexception

我正在尝试阅读有关 Unity 的教程（Will Goldstone 的书 3.x Game Development Essentials）并不断遇到错误消息，但我无法弄清楚我的代码有什么问题。它来自第 5 章，我正在用 Javascript 编写它。对于我所看到的，我的一切都是正确的——空引用出现在我的 OpenDoor 函数第 2 行和我的 shutDoor 函数第 2 行中：

> Null Reference Exception PlayerCollisionsjs.OpenDoor(UnityEngine.GameObject door)（在 Assests/Scripts /PlayerCollisionsjs.js: 47 ** 和 37 下面引用的行）。

我错过了什么？如果我删除关闭的门请求，我的 & 声音已加载并且代码可以工作......任何`OpenDoor`想法`CloseDoor`

```
#pragma strict

private var doorIsOpen : boolean = false;
private var doorTimer : float = 0.0;
private var currentDoor : GameObject;

var doorOpenTime : float = 3.0;
var doorOpenSound : AudioClip;
var doorShutSound : AudioClip;

function Start () {

}

 function Update () {

    if(doorIsOpen) { doorTimer += Time.deltaTime;
    if(doorTimer > doorOpenTime) {
        shutDoor(currentDoor);
        doorTimer = 0.0f;
      }
    }
 }

function OnControllerColliderHit(hit : ControllerColliderHit){

        if(hit.gameObject.tag == "playerDoor" && doorIsOpen == false) {
        currentDoor == hit.gameObject;
        OpenDoor(hit.gameObject);
        OpenDoor(currentDoor);
      }

  }

function OpenDoor(door: GameObject) {

    doorIsOpen = true;
    door.audio.PlayOneShot(doorOpenSound);
    door.transform.parent.animation.Play("dooropen");   
}

function shutDoor(door : GameObject) {

    doorIsOpen = false;
    door.audio.PlayOneShot(doorShutSound);
    door.transform.parent.animation.Play("doorshut");
} 
```

我确实看到其他人卡在相同的代码上，但我们没有同样的问题，我的音频在我插入 shutDoor 函数之前就可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:53:26.253

我认为您没有将开门和关门的声音分配给以上两个音频片段，首先将这些声音分配给您的变量，然后您的错误将结束。

# json - Node.JS：不能使用 require 来解析 REPL 中的 .json 文件

> ID：13241165
> 
> 赞同：1
> 
> 时间：2012-11-05T22:05:37.597
> 
> 标签：json, node.js, parsing, require, read-eval-print-loop

所以我试图从 REPL 解析一个 config.json 文件。该文件是：app/config/config.json，我正在从 app/ 运行 REPL。

在 REPL 中，如果我尝试要求该文件，则 REPL 不会执行，而是等待更多输入：

```
$ node
> var config = require('./config/config.json');
... 
```

我确定可以做到，但我不确定我做错了什么： [https ://stackoverflow.com/a/9804910/1027966](https://stackoverflow.com/a/9804910/1027966)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:01:44.810

事实证明，如果 JSON 无效，您就不能使用 Node.js 的 require 来解析 JSON。我目睹的这种行为发生在解析的 JSON 无效时。

# java - 查找大 n 的组合数 C(n,r)（十进制表示的精度）

> ID：13241166
> 
> 赞同：2
> 
> 时间：2012-11-05T22:05:42.913
> 
> 标签：java, algorithm, bigdecimal

这是来自 CodeSprint3 [https://cs3.interviewstreet.com/challenges/dashboard/#problem/50877a587c389](https://cs3.interviewstreet.com/challenges/dashboard/#problem/50877a587c389) 的问题基本上问题是计算给定 n 和 r 的可能组合的数量 nCr。此外，1 <= n < = 1000000000 和 0 <= r <= n。以 142857 为模输出所有答案。

```
 Since 6C4=6!/4! 2!
        =6*5/2!     
        =6*5/2*1 
```

我认为可以在每一步使用除法来避免溢出。也就是说，从 n 的值开始（在这种情况下，n 为 6）。将 n 递减并乘以之前的值（因此变为 6*5） 用分母进行除法，然后将其递减（6*5 /2 并且分母 2 变为 1）重复这些步骤，直到 n 小于 2 个分母的最大值并且在相同次数的迭代中除数（分母的最小值将变为 1）

```
 int count(int n,int r)
   {int maxDen=r>(n-r)?r:n-r;      //larger number in the denominator
    int minDen=n-maxDen;           //the smaller number in denominator
    double num=1;
    for(int j=n;j>maxDen;j--)     
     {num=j*num;              //for C(6,4) example num=6*5 and so on   
    // System.out.println("num "+num +" minDen "+minDen);
       num=num/minDen;         //divide num 6*5 in this case by 2
       minDen--;
      }
   num=num%142875;           //output the result modulo 142875
  return (int) num;
} 
```

但可能是由于执行更多除法时精度损失，它给出了错误的值，但它仍然为某些值提供了正确的输出。因为它对 22 17 表示正确，但对 24 17 则不正确。

```
(22 17) = 26334 //gives Correct value

(24 17)= 60353 //wrong value correct value is 60390

(25,17)=81450 //wrong value correct value is 81576

(16 15)= 16 //gives correct value

(87 28)= 54384 //wrong value correct value is 141525 
```

我尝试将 num 用作 BigDecimal，因此我必须用 BigDecimal 替换所有内容来执行操作。然后输出与在上述代码中给出正确结果的输入相同。但对于给出错误结果的输入，程序抛出异常

```
 Exception in thread "main" **java.lang.ArithmeticException: Non-terminating   decimal  expansion; no exact representable decimal result.**
at java.math.BigDecimal.divide(Unknown Source)
at Combination.NcRcount2.count(NcRcount2.java:16)
at Combination.NcRcount2.main(NcRcount2.java:37) 
```

**第 16 行是 num=num.divide(minDen); //代替之前使用的 num/minDen，在这种情况下 num 和 minDen 都是 BigDecimal**

即使该数字没有精确的十进制表示，考虑到 BigDecimal 的任意精度，如果它没有引发异常，结果中的错误也会被最小化。****如果浮点数或双精度数的除法结果没有精确的十进制表示，那么为什么不抛出异常？****

我使用 BigDecimal 和动态编程方法验证了结果

```
 C(n,r)=C(n-1,r-1)+C(n-1,r) 
```

在我看来，这在所有情况下都可以正常工作，但必须有更好的方法

```
 BigDecimal Comb (int n, int k)
   {  if(k>n-k)
       k=n-k;
       BigDecimal B[][]=new BigDecimal[n+1] [k+1];

    for (int i = 0; i <= n; i++)
   { int min;
     if(i>=k)
      min=k;
    else
     min=i;
   for (int j = 0; j <= min; j++)
    { if (j == 0 || j == i)
           B[i][j] =new BigDecimal(1);
       else{ 
           if(j>i-j)
            B[i][j]=B[i][i-j];
            else
            B[i][j] = B[i - 1][j - 1].add(B[i - 1] [j]);
          }
    }
 }
BigDecimal div=new BigDecimal(142857);
return B[n][k].remainder(div);
} 
```

请在不使用 BigDecimal 的情况下建议我一种更好的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-25T20:58:52.497

```
public class Solution {

public static void main(String arg[]) {
    Scanner s = new Scanner(System.in);
    List<BigInteger> ar = new ArrayList<BigInteger>();
    int tot = Integer.parseInt(s.nextLine());
    BigInteger max = BigInteger.ZERO;
    for (int i = 0; i < tot; i++) {
        String str[] = s.nextLine().split(" ");
        Long n1 = Long.parseLong(str[0]);
        Long r1 = Long.parseLong(str[1]);
        Long nr1 = n1 - r1;
        BigInteger n = BigInteger.valueOf(n1);
        BigInteger r = BigInteger.valueOf(r1);
        BigInteger nr = BigInteger.valueOf(nr1);
        ar.add(n);
        ar.add(r);
        ar.add(nr);
        if (n.compareTo(max)==1) {
                max=n;
        }
        if (r.compareTo(max)==1) {
            max=r;
        }
        if (nr.compareTo(max)==1) {
            max=nr;
        }

    }
    HashMap<BigInteger,BigInteger> m=new HashMap<BigInteger,BigInteger>();
    m.put(BigInteger.ZERO, BigInteger.ONE);
    BigInteger fact=BigInteger.ONE;
for(BigInteger i=BigInteger.ONE;i.compareTo(max.add(BigInteger.ONE))==-1;i=i.add(BigInteger.ONE)){
    fact=fact.multiply(i);
    if(ar.contains(i)){
        m.put(i, fact);
    }
}

for(int i=0;i<ar.size();i=i+3){
    BigInteger n=m.get(ar.get(i));
    BigInteger r=m.get(ar.get(i+1));
    BigInteger nr=m.get(ar.get(i+2));
    BigInteger rem=r.multiply(nr);
    BigInteger act=n.divide(rem);
    BigInteger res=act.remainder(BigInteger.valueOf(142857));
    System.out.println(res);
}

}

} 
```

我认为这段代码可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-02T21:32:07.393

相当简单的实现：

```
public long combinations(int n, int k) {
    BigInteger factorialN = factorial(n);
    BigInteger factorialK = factorial(k);
    BigInteger factorialNMinusK = factorial(n - k);
    return factorialN.divide(factorialK.multiply(factorialNMinusK)).longValue();;
}

private BigInteger factorial(int n) {
    BigInteger ret = BigInteger.ONE;
    for (int i = 1; i <= n; ++i) ret = ret.multiply(BigInteger.valueOf(i));
    return ret;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T03:12:39.363

我不清楚您关于 BigDecimal 代码异常的部分问题，因此我不会对此发表评论。

关于计算 nCr 的乘法和除法序列，[维基百科](http://en.wikipedia.org/wiki/NCr#Multiplicative_formula)显示了一个易于实现的公式。您在问题中的第一部分代码可能与它等效，就像下面的python代码一样。它使用 64 位整数运算最多可计算 61C30；62C31 需要另外一两位。

```
def D(n, k):
    c, j, k = 1, n, min(k,n-k)
    for i in range(1,k+1):
        c, j = c*j/i, j-1
    return c 
```

这种计算顺序有效的原因，所有除法都是精确除法，`nC(j+1) = nCj * (n-j)/(j+1)`因为它很容易从`nCj = n!/j!(n-j)!`一些代数中验证。也就是说，您可以在不需要任何小数位的情况下完全以整数算术进行`nCr`大计算。`n``r`

假设`K=142857`。请注意，以 K 为模减少中间项会导致问题并且可能不可行。如果分子减少 mod K，则某些除法在普通算术中将不准确。如果 K 是素数，则可以使用扩展的 GCD 算法来找到所有数字的逆模 K。[但是，由于Bézout 引理](http://en.wikipedia.org/wiki/B%C3%A9zout%27s_identity#Proof%22%3EWikipedia%3C/a%3E%E2%80%8C%E2%80%8B)和一些模代数，对于 3、11、13或 37 的倍数的数字，K=3*9*11*13*37 和反模 K 将不存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-25T23:20:23.273

你不应该分裂。

在内存中绘制[帕斯卡三角形。](http://en.wikipedia.org/wiki/Pascal%27s_triangle)这将只需要加法，并且很容易允许应用模运算。

此外，这不会比除法持续更长时间，因为您无法避免计算阶乘。

```
package tests.StackOverflow;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class q13241166 {

    public static void main(String[] args) throws IOException {

        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
        String s;
        String[] ss;
        int[] n;
        int[] r;
        int T;

        /*
        System.out.println("Input T:");
        s = in.readLine();
        T = Integer.parseInt(s);

        if( T < 1 || T > 100000) {
            throw new IllegalArgumentException();
        }
        */
        T = 9;

        /*
        n = new int[T];
        r = new int[T];

        System.out.println("Input n r pairs:");
        for(int i=0; i<T; ++i) {
            s = in.readLine();
            ss = s.split("\\s+");

            n[i] = Integer.parseInt(ss[0]);
            if( n[i] < 1 || n[i] > 1000000000) {
                throw new IllegalArgumentException();
            }

            r[i] = Integer.parseInt(ss[1]);
            if( r[i] < 0 || r[i] > n[i]) {
                throw new IllegalArgumentException();
            }

        }
        */
        n = new int[] {2, 4, 5, 10, 22, 24, 25, 16, 87};
        r = new int[] {1, 0, 2, 3, 17, 17, 17, 15, 28};

        int modulobase = 142857;
        int[] answers_old, answers = null;
        System.out.println("Output");
        for(int i=0; i<T; ++i) {
            for( int nn=0; nn<=n[i]; ++nn) {
                answers_old = answers;
                answers = new int[nn+1];
                for( int rr=0; rr<=nn; ++rr) {
                    if( rr == 0 || rr == nn ) {
                        answers[rr] = 1;
                    }
                    else {
                        answers[rr] = answers_old[rr-1] + answers_old[rr];
                    }

                    answers[rr] %= modulobase;
                }
            }

            System.out.println(answers[r[i]]);

        }

    }

} 
```

输出如下：

```
Output
2
1
10
120
26334
60390
81576
16
141525 
```

# c++ - 如何在 C/C++ 中存储可变长度字符串

> ID：13241167
> 
> 赞同：0
> 
> 时间：2012-11-05T22:05:54.893
> 
> 标签：c++

> **可能重复：**
> [在 C++ 中将文件啜饮到 std::string 中的最佳方法是什么？](https://stackoverflow.com/questions/116038/what-is-the-best-way-to-slurp-a-file-into-a-stdstring-in-c)

我试图将整个文本文件存储为字符串，如何动态存储文本文件可能包含的任意数量的字符？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T22:07:35.310

C++ 标准库`std::string`为动态大小的字符串提供了类型。它是`std::basic_string<char>`. cppreference.com上有[一个有用的参考资料](http://en.cppreference.com/w/cpp/string/basic_string)。

要将文件中的行读取到 中`std::string`，请查看[`std::getline`](http://en.cppreference.com/w/cpp/string/basic_string/getline). 您可以使用它从文件中获取一行，如下所示：

```
std::string str;
std::getline(file_stream, str); 
```

一定要检查流（它是由返回的`std::getline`），看看一切是否正常。这通常在循环中完成：

```
while (std::getline(file_stream, str)) {
  // Use str
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T22:50:12.650

除了 sftrabbit 的回答：

请注意，您可以通过执行以下操作一次性将整个文件读入字符串：

```
std::ifstream input_ifstr(filename.c_str());

std::string str(
    (std::istreambuf_iterator<char>(input_ifstr)),
    std::istreambuf_iterator<char>());

input_ifstr.close(); 
```

如果您愿意，您可以从中构造一个字符串流，然后使用 getline 进行处理。

# java - java数组元素中的空指针异常

> ID：13241171
> 
> 赞同：-2
> 
> 时间：2012-11-05T22:06:05.767
> 
> 标签：java, nullpointerexception

这是一个家庭作业问题，当我运行测试仪时它给了我空指针异常。错误似乎在我的行中

```
balance[i]=InitialBalance; 
```

```
public class Bank
{

    private BankAccount[] accounts;
    private double [] balance;
    int NumbersOfBankAccount;
    double InitialBalance;
    public Bank (int x, double y )
    {
        NumbersOfBankAccount = x;
        InitialBalance = y;

    }

    /**
     *     This method will get balance of specified bank account.
     */
    public double getBalance(int index)
    {
        for(int i = 0; i <NumbersOfBankAccount; i++)
        {
            balance[i]=InitialBalance; 
        }
        System.out.println(balance);
        return balance[index]; 
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T22:07:32.367

`balance`并且`accounts`永远不会初始化。

您在构造函数中缺少类似的内容：

```
balance = new double[NumbersOfBankAccount];
accounts = new BankAccount[NumbersOfBankAccount]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T22:07:38.300

`balance`未初始化。

```
private double [] balance; 
```

这是一个修复：

```
public Bank (int x, double y )
{
    NumbersOfBankAccount = x;
    balance = new double[NumbersOfBankAccount];
    accounts = new BankAccount[NumbersOfBankAccount];
    InitialBalance = y;

} 
```

此外，`NumbersOfBankAccount`名称很长，输入起来很繁琐。您应该将其更改为`numAccounts`或类似的东西。

还有一件事：按照惯例，变量名通常以小写字母开头。（`InitialBalance`应该是`initialBalance`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T22:07:48.243

你力图初始化你的余额；数组并尝试访问其索引。

你必须像这样初始化你的数组：

```
private double [] balance = new double[sizeofyour array] ; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T22:08:19.933

您必须先初始化数组“余额”：

```
balance = new double[ NumbersOfBankAccount ]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T22:13:19.833

您需要确保 NumbersOfBankAccount 变量至少与 balance 数组一样大。你还记得初始化数组吗？看起来您也没有使用您的帐户数组。

另外，请查看 getBalance 方法的注释。我不认为它正在做你想让它做的事情。看起来您想使用传递的索引来获取由 accounts 数组指定的帐户的余额。还是您正在执行 for 循环进行测试（可以）？

回顾一下：

1.  确保您的数组已初始化
2.  确保您从正确的数组中获取数据

# java - 无法使用 Liveconnect 将 Java 加载到 Firefox 16 扩展中

> ID：13241173
> 
> 赞同：1
> 
> 时间：2012-11-05T22:06:11.353
> 
> 标签：java, firefox

在 Firefox 16 中，无法再根据[https://bugzilla.mozilla.org/show_bug.cgi?id=748343](https://bugzilla.mozilla.org/show_bug.cgi?id=748343)使用全局实例访问 java 。

我已经构建了一个自定义 selenium-ide.xpi (http://seleniumhq.org/download/)，它加载了 java 并通过我的自定义框架运行。为了访问 java，我添加了一个 addJava.js 文件，我将它包含在 selenium-ide-common.xul 文件中，使用类似于[https://developer.mozilla.org/en-US/docs/的内容调用 java Java_in_Firefox_Extensions](https://developer.mozilla.org/en-US/docs/Java_in_Firefox_Extensions)，但是这不再有效。

我尝试了以下方法来解决此问题：

将以下内容添加到各种 .xul 文件中，但每次尝试以下内容时，我都会得到 appletRef 为空：

```
<div name="appletDiv">
    <embed id ="cipherDocsApplet" type="application/x-java-applet;version=1.6" code="java.applet.Applet"  pluginspage="http://java.com/download/"  MAYSCRIPT="true" width="0" height="0" />  
</div>

var appletRef = document.getElementById("cipherDocsApplet");
window.java = appletRef.Packages.java; 
```

下面给了我 java_instance.Packages 未定义。

```
var java_instance = window.document.createElementNS("http://www.w3.org/1999/xhtml","applet");
     java_instance.setAttribute("id", "adsfund_java_instance");
     java_instance.setAttribute("code", "java.applet.Applet");
     java_instance.setAttribute("width", "0");
     java_instance.setAttribute("height", "0");
     java_instance.setAttribute("flex", "1");

var div = window.document.createElementNS("http://www.w3.org/1999/xhtml","div");
var elementToAppendTo = window.document.getElementsByTagName("vbox")[0];
elementToAppendTo.appendChild(div);
div.appendChild(java_instance); 
var date = new java_instance.Packages.java.util.Date(); 
```

最后我尝试了[https://bug748343.bugzilla.mozilla.org/attachment.cgi?id=655062](https://bug748343.bugzilla.mozilla.org/attachment.cgi?id=655062)，将 app 元素添加到我的主 xul 文件并稍后获取，但这也给了我同样的错误：'TypetError:app .Packages 未定义。

有谁知道如何解决这一问题？

在此先感谢，詹姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:47:22.340

恕我直言，您正在以艰难的方式做到这一点。使用 WebDriver（Selenium2 框架的一部分），您可以通过加载自定义 Firefox 配置文件来动态加载 Java .xpi 扩展。

例如：

```
File file = new File("firebug-1.8.1.xpi");
FirefoxProfile firefoxProfile = new FirefoxProfile();
firefoxProfile.addExtension(file);
firefoxProfile.setPreference("extensions.firebug.currentVersion", "1.8.1");
WebDriver driver = new FirefoxDriver(firefoxProfile); 
```

你想出的不是典型的，我怀疑很多人会因此回答你的问题。

此外，如果更高版本的 Firefox 禁用了“LiveConnect”功能，那么您有什么理由试图通过 javascript 注入来强制不受支持的浏览器支持该功能？

# .net - 检测和求和年、月和日

> ID：13241181
> 
> 赞同：-1
> 
> 时间：2012-11-05T22:07:00.970
> 
> 标签：.net, vb.net, ssrs-2008, reporting-services

我在下面的代码之前可以正常工作，可以显示为年、月和日。所以下面的代码我总结为仅显示为天，我进行了一些转换。我在我的代码中遇到了一些小问题。我的年份显示 330 而不是 365。如果我输入 1 年，它应该显示 365，1 个月应该是 30..但是如果 34 天它应该显示为 34，而不是显示为 60 天。任何人都可以弄清楚它是怎么来的我在下面的代码中收到此错误。这是我在 ssrs 2008 报告属性中的代码

```
Public Function ILength(length  As Integer ) As String

           dim year As Integer=0
           dim month As Integer=0
           dim day  As Integer=0
           dim sum  as integer

if(length =0)
Return String.Empty
end if

if length >= 366 then
year=cstr(Math.Floor (length/ 365.25)) 
length =(length  Mod 365.25)
length =(year * 365)
year =cstr(length)

end if

if length>31 Andalso length<366  then

month=cstr (Math.Floor(length/30.4375))
length=(length  Mod 30.4375)
length=(month * 30)
month=cstr(length)

end if

if length<31 Then
day =cstr(length) 
end if

if length = 0 then
Return String.Empty
end if

sum= ((year)+(month)+(day))

return(sum)

End Function 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:30:34.190

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:53:43.250

你的逻辑有一些问题。

1.  首先，您根本不应该将任何内容转换为字符串（CStr）。您可能需要在 SSRS 中执行此操作的唯一原因是显示工具提示或其他一些仅字符串字段。您当然不应该在对它们求和之前尝试这样做，尽管这无论如何都不会像您期望的那样起作用。
2.  其次，您的函数采用的参数是“长度”，此代码假定为天数。然后，您将返回天数。该函数似乎没有其他目的，只是将天数拆分为年（365.25）和月（30）的设定值，然后重新组合以将这个标准化的年月长度相加。除了你似乎以粗略的方式加入了闰年。谁说 366 天就是一年？它可以是闰年，也可以是 1 年零 1 天。
3.  您声明的变量都是整数，但您在数学中使用浮点数或小数。
4.  您正在获取年份和月份的值，然后在不必要的步骤中用其他值覆盖它们。

假设您有充分的理由这样做（请分享！）并且不能使用简单的东西，例如：`=datediff(d,fields!FirstDate.Value,fields!SecondDate.value)`

然后我可以告诉你这个函数哪里出错了。

在这部分：

```
if length >= 366 then
year=cstr(Math.Floor (length/ 365.25)) 
length =(length  Mod 365.25)
length =(year * 365)
year =cstr(length) 
```

取一个输入值 367。第二行会给你 year=1。第三行会给你长度=0。是的，零。您已将所有内容声明为整数，并且整数将隐式截断任何尾数（小数点后的位）。您想将这些声明为浮点或更好的精确数字。第四行用 Year(1) * 365 = 365 覆盖您的长度值。第五行然后将 365 转换为字符串并将其分配给 year，但 year 是一个整数，因此它被隐式转换回整数。如果你的变量被声明为正确的类型，你只需要这 3 行，但同样 366 天的事情是非常农业的。它处理边缘情况很差。

```
if length >= 366 then
year=cstr(Math.Floor (length/ 365.25)) 
length =(length  Mod 365.25) 
```

下一部分：

```
if length>31 Andalso length<366  then 
```

这也是不必要的。您已经在代码的第一部分确保长度现在小于 365（如果变量是正确的数据类型，那么长度将小于 365.25）

这就够了：

```
if length>31 then 
```

在下一部分中你已经做了同样的事情，前两行就足够了，再次假设你的数据类型是固定的。

```
month=cstr (Math.Floor(length/30.4375))
length=(length  Mod 30.4375)
length=(month * 30)
month=cstr(length) 
```

在下一部分中，它可以工作（除了 Cstr），但很不舒服。在测试长度是否 < 31 之前，您应该检查长度 = 0。

```
if length<31 Then
day =cstr(length) 
end if

if length = 0 then
Return String.Empty
end if 
```

你在评论中说了两个相互矛盾的陈述。首先你有像年/月天这样的输入，其次你有开始和结束日期参数。如果第二个为真并且您有开始/结束日期，则丢弃此代码并使用 datediff。内置函数已经考虑了闰年和实际月份的长度，您无需使用粗略的平均值。

似乎您为此使用了自定义代码，这是对不存在问题的复杂解决方案。

# arrays - 将二维数组传递给 Rust 中的函数

> ID：13241190
> 
> 赞同：2
> 
> 时间：2012-11-05T22:07:33.527
> 
> 标签：arrays, function, rust

有人知道如何将二维数组传递给 Rust 函数吗？该函数需要更改数组的值。

这就是我创建数组的方式：

```
let state=[mut [mut 0u8, ..4], ..4]; 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T05:50:17.663

*（nb：rust 0.5，当被问到这个问题时还没有出来）*

找出值类型的愚蠢方法是编写一个类型*错误*的函数，然后尝试传递它。:)

```
fn func(state: int) {} 
```

产生：

```
error: mismatched types: expected `int` but found `[mut [mut u8]/4]/4` (expected int but found vector) 
```

所以这就是你的类型。除了它实际上不再那样写了，所以这个输出似乎有一个错误。这么多只是询问编译器。你实际上想要：

```
fn func(state: [mut [mut u8 * 4] * 4]) { ... } 
```

但是`mut`内部向量已被弃用；您可以通过制作变量本身来获得相同的效果`mut`。这使我们：

```
let mut state = [[0u8, ..4], ..4];
func(state);

// ...

fn func(state: [[u8 * 4] * 4]) {} 
```

如果你想真正改变`state`函数内部，你需要一个指向它的可变指针，所以最后：

```
let mut state = [[0u8, ..4], ..4];
func(&mut state);

// ...

fn func(state: &mut [[u8 * 4] * 4]) {} 
```

# knockout.js - 带有 ASP.NET Webforms 的 KnockoutJS

> ID：13241193
> 
> 赞同：0
> 
> 时间：2012-11-05T22:07:37.320
> 
> 标签：knockout.js, webforms

我在这里用头撞墙，试图弄清楚为什么我不能让它工作。我已经尝试了许多示例，并将我尝试过的所有内容都简化为下面的内容。

所以，在我的 aspx 页面上，我有：

`<input type="radio" data-bind="value: individual" />Individual`

这是我的javascript：

```
var serviceBase = 'http://localhost:49906/PopulationSelection.aspx/';
var getSvcUrl = function (method) { return serviceBase + method; };

var ajaxGetJson = function (method, jsonIn, callback) {
    $.ajax({
        url: getSvcUrl(method),
        type: "GET",
        data: ko.toJSON(jsonIn),
        dataType: "json",
        contentType: "application/json",
        success: function (json) {
            callback(json.d);
        },
        error: function (xhr, ajaxOptions, thrownError) {
            alert(xhr + ' ' + thrownError);
        }
    });
}

var batchesDataService = {
    getSavedBatches: function (callback) {
        ajaxGetJson("GetBatches", null, callback);
    }
};

var Batch = function (p) {
    this.individual = ko.observable(p.Individual);
    this.household = ko.observable(p.Household);
    this.countOnly = ko.observable(p.CountOnly);
    this.femalePrimary = ko.observable(p.FemalePrimary);
    this.eventManagement = ko.observable(p.EventManagement);
    this.eventManagementText = ko.observable(p.EventManagementText);
    this.randomSampling = ko.observable(p.RandomSampling);
    this.randomSamplingText = ko.observable(p.RandomSamplingText);
    this.stateHasChanged = ko.observable(false);
};

var loadBatchesCallback = function (data) {
    var parsed = JSON.parse(data);
    myViewModel.Batch = new Batch(parsed);
    //also tried:
    //myViewModel.Batch(new Batch(parsed));
};

var myViewModel;
var viewModel = function () {
    this.Batch = ko.observable();
    this.getBatchInfo = function () {
        batchesDataService.getSavedBatches(loadBatchesCallback);
    };
};

$(document).ready(function () {
    myViewModel = new viewModel();
    myViewModel.getBatchInfo();
    ko.applyBindings(myViewModel.Batch);
}); 
```

我从我的网络方法（用于会话访问）中获取数据没有问题，当我提醒批处理成员时，我看到了正确的信息。

我的问题来自实际的`ko.applyBindings()`. 无论我尝试了什么，我都会在控制台中收到以下错误：

```
Uncaught Error: Unable to parse bindings.
Message: ReferenceError: individual is not defined;
Bindings value: value: individual 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T22:30:56.550

异步性。

您在调用 ajax 回调之前调用 ko.applyBindings，因此它还没有值。

您可能想在回调中的某处调用 applyBindings。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:24:33.243

首先，我想你想要

```
ko.applyBindings(myViewModel.Batch); 
```

您对 Batch 的使用也不一致。您在一个地方将其定义为可观察对象，但从不更新它。我建议遵循仅以大写开头的类定义和以小写开头的实例/属性变量的约定。这可能有助于澄清您在哪里使用了哪些类型的东西。

# java - Java 多级继承 - 级别 1 类中的受保护实例变量

> ID：13241196
> 
> 赞同：3
> 
> 时间：2012-11-05T22:07:51.100
> 
> 标签：java, class, inheritance

我有一个问题属于 Java 中的多级继承。所有三个类都在同一个包中

我有 A 类：

```
public class A {
   protected int x;
}

public class B extends A {
   public void doSomething {
      // x is visible.agreed, as it is a direct subclass of A
   }  
}

public class C extends B {
   public void doSomething {
      // x is still visible, how come? I mean it is at the 2nd level 
     //  I am confused why?
   }  
} 
```

它有什么意义吗？还是我们必须默认采取的行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T22:11:15.967

用修饰符标记的变量/方法`protected`对同一包中的所有类可见，并且仅对不同包中的子类可见。以下是示例案例。

```
package a;
class A{
protected int x;
}
class B extends A{
//x can be accessed from this class
} 

class C extends B {
//x can be accessed from this class
}
class D{
//x can be accesed this class but you will have to create A's instance 
}

package B 
class One {
//cannot access x from this class
}
class Two extends A {
//can access x from this class
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T22:12:01.537

Java 中的访问级别修饰符是：

*   `public`- 对所有代码可见
*   `protected`- 对同一包中的所有代码和子类可见，无论包如何
*   *无*（默认）- 对同一包中的所有代码可见
*   `private`- 仅对同一类中的代码可见（包括嵌套类）

例如，请参阅 Java 教程[Controlling Access to Members of a Class](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)或（有关许多技术细节）[Java Language Specification 的第 6.6 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-05T22:12:07.840

关键字的定义

**受保护**

> protected 修饰符指定该成员只能在其自己的包中访问（与 package-private 一样），此外，它的类在另一个包中的子类也可以访问。

我建议你阅读[这个](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-05T22:10:49.747

Java`protected`关键字一直适用于*所有*子类（和[包的成员](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)）。*如果*中有`protected`成员`Object`，则任何对象都可以访问它。相比之下，`private`仅对本地类（和内部类）可见，并且`public`可供所有人访问。

看看[这个词汇表](http://mindprod.com/jgloss/protectedscope.html)，它深入展示了`protected`成员和方法是如何被继承的，以及[关于继承的 Java 文档](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-05T22:11:57.700

您不能限制对子类中成员的访问。此规则适用于方法（您不能覆盖`public`方法并使其生成`private`），但您可以在此处看到类比。如果该字段是`protected`，它将`protected`在每个子类中，无论多深。当然你不能覆盖 Java 中的字段，只是为了给你一个概述。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-05T22:12:11.880

请参考：[http ://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

> **protected**修饰符指定该成员只能在**其自己的包**中访问（与 package-private 一样），**此外，它的类**在另一个包中的子类也可以访问。

因此，如果您的类与and`C`共享包，则**它可以访问**。`A``B`

 *** * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-29T20:16:08.087

继承是可传递的：如果 B 类继承自 A 类；C类继承自B类；那么C也是A类的子类/子类/后代。**

# visual-studio-2010 - 无法使用 TombstoneHelper 序列化错误“Newtonsoft.Json.Linq.JToken”

> ID：13241197
> 
> 赞同：3
> 
> 时间：2012-11-05T22:07:54.207
> 
> 标签：visual-studio-2010, linq, windows-phone-7, json.net, tombstone

我遇到了一个问题，我的应用程序的某个页面无法从墓碑恢复。尝试访问该应用程序只会导致返回主屏幕。

在调试过程中，控制台记录了三行：

*   类型的第一次机会异常`System.Runtime.Serialization.InvalidDataContractException`发生在`System.Runtime.Serialization.dll`
*   类型的第一次机会异常`System.Reflection.TargetInvocationException`发生在`mscorlib.dll`
*   类型的第一次机会异常`System.Runtime.Serialization.InvalidDataContractException`发生在`System.Runtime.Serialization.dll`

然后，我检查`e.ExceptionObject.Message.ToString()`并看到了这个错误：

`"Type 'Newtonsoft.Json.Linq.JToken' cannot be serialized. Consider marking it with the DataContractAttribute attribute, and marking all of its members you want serialized with the DataMemberAttribute attribute."`

我在该页面的cs代码中使用了一些`JObjects`和`JTokens`。我特别将列表框中的绑定值设置为这些值`JObjects`：

```
<ListBox x:Name="list" Height="600" HorizontalContentAlignment="Stretch">
    <!--SelectionChanged="list_SelectionChanged"-->
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Vertical">
                <TextBlock Text="{Binding hline}" FontSize="{StaticResource PhoneFontSizeMedium}" TextWrapping="Wrap" Width="474" />
                <TextBlock Text="{Binding body}" Margin="0,0,0,36"  FontSize="{StaticResource PhoneFontSizeNormal}" TextWrapping="Wrap" />
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

然后在代码中：

```
var deserialized = Newtonsoft.Json.JsonConvert.DeserializeObject<List<Mydata>>(messagearray.ToString().Replace("<br/>", "\n"));

list.ItemsSource = deserialized; 
```

对于墓碑，我只是这样做：

```
protected override void OnNavigatingFrom(NavigatingCancelEventArgs e)
{
    this.SaveState(e);  // <- first line
}

protected override void OnNavigatedTo(NavigationEventArgs e)
{
    this.RestoreState();  // <- second line
} 
```

为了能够墓碑和生存，我应该做些不同的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:55:45.110

TombstoneHelper 直接使用 Page State 对象，然后使用内置的序列化程序来序列化事物。您页面中的某些内容使用了默认序列化程序 (DataContractSerializer) 无法处理的 JToken。

由于看起来您正在使用 MVVM，我建议您直接自己管理视图模型的序列化和存储，然后在 OnNavigatedTo 方法中重新水化视图模型。

完整的复制将有助于更完整的解决方案。

# c++ - 是否可以在一个语句中执行 2 个相反的位操作？

> ID：13241199
> 
> 赞同：1
> 
> 时间：2012-11-05T22:07:59.697
> 
> 标签：c++, bit-manipulation, bitwise-operators

在位操作方面，我是 C++ 的新手和完整的新手（我只知道基础知识），并且我正在从事一个项目，我需要将文档的状态保留在位域中。

简而言之：我想在无条件删除 flag2 的同时保留 flag1 的最后状态。我现在拥有的是这样的：

```
位域 |= flag1; 位域 &= ~flag2;

```

问题是：*有没有办法在一个语句中执行它？*

就我而言，我真的不能像这样切换它们：

```
位域 ^= (flag1|flag2)

```

这是显而易见的答案，但问题是有时设置了标志1，有时未设置，我想保留它，因为我在删除标志2时从最后一个函数调用中收到它。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T22:09:24.347

你显然可以做

```
 bitfield = (bitfield | flag1) & ~flag2; 
```

你可以使用[逗号运算符](http://en.wikipedia.org/wiki/Comma_operator)，例如

```
 (bitfield |= flag1), (bitfield &= ~flag2); 
```

# python - Python：无法删除\n

> ID：13241200
> 
> 赞同：0
> 
> 时间：2012-11-05T22:08:01.347
> 
> 标签：python, strip

我想`\n`从开头删除这样的行`\n id int(10) NOT NULL`。我试过了`strip()`，，，`rstrip()`。`lstrip()` `replace('\n', '')`我不明白。我究竟做错了什么？

```
print(column)
print(column.__class__)
x = column.rstrip('\n')
print(x)
x = column.lstrip('\n')
print(x)            
x = column.strip('\n')          
print(x)
print(repr(column)) 
```

给

```
\n  id int(10) NOT NULL
<type 'str'>
\n  id int(10) NOT NULL
\n  id int(10) NOT NULL
\n  id int(10) NOT NULL
\n  id int(10) NOT NULL
'\\n  `id` int(10) NOT NULL' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T22:12:31.893

您确定这`\n`是换行符而不是文字`\`后跟文字`n`吗？在这种情况下，你会想要：

```
s = r'\nthis is a string'
s = s.strip()
print s
s = s.strip(r'\n')
print s 
```

可能更好的方法是在剥离之前检查它是否开始`\n`，然后使用切片：

```
if s.startswith(r'\n'): s = s[2:] 
```

甚至更强大的是`re.sub`：

```
re.sub(r'^(?:\\n)+','',r'\n\nfoobar') 
```

根据您上面描述的症状，我几乎肯定是这种情况。

# haskell - Haskell 二叉树

> ID：13241201
> 
> 赞同：-3
> 
> 时间：2012-11-05T22:08:18.770
> 
> 标签：haskell, tree, binary-tree

我有一个作业：

1) 为树定义一个数据结构`TTT`，其中每个顶点有 0、1 或 2 个孩子，每个树叶（有 0 个孩子的顶点和自身）包含一个自然数列表；

2）创建一个`mm`具有 2 个参数的函数 - function`f(Integer->Integer)`和`TTT`based tree `x`。结果，它应该给出基于对列表中每个元素使用函数`TTT`的树（参考 1）定义）；`x``f`

函数`f`可以有以下表示（`a`或`b`）`c`：

```
a :: Integer -> Integer
a x = x * x

b :: Integer -> Integer
b x = x `mod` 9

c :: Integer -> Integer
c x = x * x * x 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-05T22:27:26.997

## 重要建议

[通过Learn You a Haskell for Great Good](http://learnyouahaskell.com/)真的很值得。这是一个很好的教程。

实践！玩！通过更改摘要来扩展此任务。你可以为字符串而不是整数做吗？你能用三个子树做一棵树吗？你能做一个分支也有数据的地方吗？你能制作一棵采用任何数据类型的树吗？了解`Functor`s。为什么它们有什么好处？你能制作一棵代表计算的树，分支代表运算，`+`叶子代表数字吗？

你玩得越多，你就会越自信。成为班上那个在事情出现之前就发现的人。每个人都会向你寻求帮助，然后当你被要求解决团队中任何人遇到的棘手问题时，你会学到更多。

## 问题 1：树数据类型

这里有一些提示。

此二叉树有两个子树或一个布尔叶：

```
data BTree = Leaf Bool | Branch BTree BTree 
  deriving (Eq,Show) 
```

这个数据结构有三项，包括一个`Bool`s 的列表：

```
data Triple = Triple Int String [Bool]
  deriving (Eq,Show) 
```

这个有三种不同的可能，因为`Expr`出现在右手边，有点像一棵树。

```
data Expr = Var Char | Lam Char Expr | Let Char Expr Expr
  deriving (Eq,Show) 
```

现在你需要一个具有三种可能性的叶子，其中叶子有一个整数列表，而另外两个有一个子树，或者两个子树。将示例中的想法放在一起。

## 问题 2：在树上映射一个函数

我们将此称为 apply-a-function-everywhere-you-can"map"ping 函数。`map`为列表`fmap`做，为其他事情做。

让我们定义一个接受 a`Bool -> Bool`并将其映射到第一个示例的函数：

```
mapBTree :: (Bool -> Bool) -> BTree -> BTree
mapBTree f (Leaf b) = Leaf (f b)
mapBTree f (Branch b1 b2) = Branch (mapBTree f b1) (mapBTree f b2) 
```

另一个映射在三元组上。这次我们必须让它`Bool`在列表中的每个 s 上工作。

```
mapBoolTriple :: (Bool -> Bool) -> Triple -> Triple
mapBoolTriple f (Triple i xs bs) = Triple i xs (map f bs) 
```

请注意，我使用了标准函数`map`，其工作原理如下：

```
map :: (a -> b) -> [a] -> [b]
map f [] = []
map f (x:xs) = f x : map f xs 
```

所以它适用于我列表`f`中的每一个`x`，从前面开始。

## 我真的会怎么做这种事情

不过，这不是我真正的做法。我会补充

```
{-# LANGUAGE DeriveFunctor #-} 
```

在我文件的顶部，这会让我写

```
data BinTree a = ALeaf a | ABranch (BinTree a) (BinTree a)
   deriving (Eq, Show, Functor) 
```

然后我可以做

```
fmap (*100) (ABranch (ALeaf 12) (ALeaf 34)) 
```

这会给我

```
ABranch (ALeaf 1200) (ALeaf 3400) 
```

但`fmap`更灵活：我也可以

```
fmap (<20) (ABranch (ALeaf 12) (ALeaf 34))
  -- ABranch (ALeaf True) (ALeaf False) 
```

或者

```
fmap show (ABranch (ALeaf 12) (ALeaf 34))
 -- ABranch (ALeaf "12") (ALeaf "34") 
```

不用我写一行函数`fmap`。我认为这会给你 10/10 来使用额外的语言功能，但 0/10 来解决问题，所以不要这样做，但请记住并尽可能使用它。

## 更多建议

玩得开心学习 Haskell。有时它可能令人兴奋，但它会强烈地奖励你学习。您将能够用 Haskell 编写一些程序，其长度仅为传统语言程序长度的十分之一。多想！少写！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T21:20:31.603

当它按预期工作时，我已经走到了这一步，除了我在叶子中有一个整数而不是 Ingeter 列表。我现在的问题是我应该在这段代码中更改什么以便叶子只能包含整数列表？到目前为止，我尝试像这样修改树定义：

```
data TTT a = ALeaf [Integer] | ABranch (TTT a) (TTT a) 
```

并修改数据：

```
testTree1 = ABranch (ALeaf [1,2,3]) (ALeaf [4,5,6]) 
```

但在这种情况下，整数列表保持不变。

下面是叶中有一个整数的**稳定代码，它可以工作。**

```
{-# LANGUAGE DeriveFunctor #-}

data TTT a = ALeaf a | ABranch (TTT a) (TTT a)
   deriving (Eq, Show, Functor)

-- Function "mm"
mm f t = let
   in fmap (f) t

-- Function "tt_a"
tt_a = mm a testTree1

-- Function "tt_b"
tt_b = mm b testTree1

-- Function "tt_c"
tt_c = mm c testTree1

-- Function "a"
a :: Integer -> Integer
a x = x * x

-- Function "b"
b :: Integer -> Integer
b x = x `mod` 9

-- Function "c"
c :: Integer -> Integer
c x = x * x * x

-- TTT type tree`s for tests
testTree1 = ABranch (ALeaf 1) (ALeaf 2)
testTree2 = ABranch (ALeaf 11) (ALeaf 12) 
```

# r - 如何创建一个列来指示观察与 R 中另一个观察的滞后？

> ID：13241212
> 
> 赞同：7
> 
> 时间：2012-11-05T22:09:08.710
> 
> 标签：r, time-series

我有一个带有布尔变量事件的数据框 d，指示某个事件是否在给定日期发生。我想创建一个新变量，指示距离最近的事件有多少观察（天）。

```
d=structure(list(date = structure(c(-365, -364, -363, -362, -361, 
-360, -359, -358, -357, -356, -355, -354, -353, -352, -351, -350, 
-349, -348, -347, -346), class = "Date"), event = c(TRUE, 
FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, 
FALSE, FALSE, FALSE, FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, 
FALSE)), .Names = c("date", "event"), row.names = c(NA, 20L
), class = "data.frame") 
```

有没有可以做到这一点的功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T16:00:36.390

就像是

```
apply(abs( sapply( which(d$event), "-", 1:nrow(d) )),1,min) 
```

将@DWin 的答案概括为超过 2 个`TRUE`值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T22:22:16.547

```
> pmin( abs( sapply( which(d$event), "-", 1:nrow(d) )[,1] ) , 
        abs( sapply( which(d$event), "-", 1:nrow(d) )[,2] ) )
 [1] 0 1 2 3 4 5 6 7 6 5 4 3 2 1 0 1 2 3 4 5 
```

# ios - MonoTouch：设置“语言”时的当前文化

> ID：13241222
> 
> 赞同：4
> 
> 时间：2012-11-05T22:09:46.993
> 
> 标签：ios, xamarin.ios, currentculture

在 iPhone 上，当用户将**Language**设置为**French**并将**Region Format**设置为**United States**时， CurrentCulture 代表**en-US**。

只有当用户将其**区域格式**设置为 France 时，我才会得到**fr-FR**；

**如果用户设置了语言**，但没有设置**区域格式**，我如何确定语言？

![在此处输入图像描述](../Images/25cd0775469dfab6689b3ae1749ee193.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T00:17:59.183

你想看看`NSLocale`，例如`NSLocale.CurrentLocale.Identifier`得到一个字符串，如`en-US`. 这将为您提供 iOS 正在使用的*确切*值。

.NET 和 iOS 都有相似但略有不同的 API 来获取这些值。仅使用 iOS 数据很难与 .NET 完全兼容（这并不完美）。在某些情况下，例如`RegionInfo`，我们已经能够使用 iOS 提供的数据*引导.NET 类。*随着更多功能可用，我们将来可能会为其他类型做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T22:15:04.300

`NSLocale.CurrentLocale`给出区域格式，而不是语言。

要获取语言，请`NSLocale.PreferredLanguages[0]`改用。结果将是一个类似于`fr`或`en-US`所选语言的字符串。

有关详细信息，请参阅[在 iOS 中获取当前设备语言？](https://stackoverflow.com/questions/3910244/getting-current-device-language-in-ios).

# android - 刷新后保留菜单项动画？

> ID：13241230
> 
> 赞同：2
> 
> 时间：2012-11-05T22:10:08.740
> 
> 标签：android, android-actionbar, actionbarsherlock, android-animation, android-menu

我有一个菜单项，`ActionBar`它启动了`AsyncTask`，当任务运行时，我让菜单项动画显示进度。我还刷新了我的每个选择的动画，`ListView`因为菜单项会根据单击的项目而变化。我有一切工作，除了我检查是否`AsyncTask`正在运行，`onCreateOptionsMenu`是否重新启动动画（因为在重绘菜单时动画停止）。不确定是否有更好的方法来做到这一点。

这是我必须检查是否`AsyncTask`正在运行并重新启动一个菜单项的动画的代码：

注意：在代码的其他地方我使用它来重置菜单，如果重要的话：

```
if(android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.HONEYCOMB)
    activity.invalidateOptionsMenu();

public class MyFragment extends SherlockListFragment
{
    private MenuItem refreshItem;
    private AsyncTask<Void, String, Void> fi;
    private MenuItem refreshItem;

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
    }

    @Override
    public void onActivityCreated(Bundle savedState) {
        super.onActivityCreated(savedState);

        fi = new FetchItems(activity, null);
        fi.execute(); //this actually happen when the menu item is selected but I put here for this question
    }

    @Override
    public void onCreateOptionsMenu(final Menu menu, final MenuInflater inflater) {
        inflater.inflate(R.menu.main_menu, menu);

        if (fi != null && fi.getStatus() == AsyncTask.Status.RUNNING)
        {
            if (refreshItem != null && refreshItem.getActionView() != null)
            {   
                refreshItem.getActionView().clearAnimation();
                refreshItem.setActionView(null);

                this.StartAnimation();
            }
        }
        else
            refreshItem = menu.findItem(R.id.filter);

        super.onCreateOptionsMenu(menu, inflater);
    }

    private class FetchItems extends AsyncTask<Void, String, Void> 
    {
        @Override
        protected void onPreExecute() 
        {
          StartAnimation();
        }
        protected void onPostExecute(final Void unused)
        {
            if (refreshItem != null && refreshItem.getActionView() != null) 
            {
                refreshItem.getActionView().clearAnimation();
                refreshItem.setActionView(null);
            }
        }
    }

    private void StartAnimation() {
       final LayoutInflater inflater = (LayoutInflater)getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
       final ImageView ivRefresh = (ImageView)inflater.inflate(R.layout.refresh_view, null);

       final Animation rotation = AnimationUtils.loadAnimation(getActivity(), R.anim.refresh);
       ivRefresh.startAnimation(rotation);
       refreshItem.setActionView(ivRefresh);
    }
} 
```

刷新.xml

```
<rotate
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromDegrees="0"
    android:toDegrees="360"
    android:pivotX="50%"
    android:pivotY="50%"
    android:repeatCount="infinite"
    android:interpolator="@android:anim/linear_interpolator"
    android:duration="1000" 
/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T02:41:54.043

弄清楚了。我创建了一个名为 StopAnimation 的函数：

```
private void StopAnimation()
{
    if (refreshItem != null && refreshItem.getActionView() != null) 
    {
        refreshItem.getActionView().clearAnimation();
        refreshItem.setActionView(null);
    }
} 
```

然后在`onCreateOptionsMenu`我有这个代码：

```
@Override
public void onCreateOptionsMenu(final Menu menu, final MenuInflater inflater) {
    inflater.inflate(R.menu.main_menu, menu);

    StopAnimation();

    refreshItem = menu.findItem(R.id.filter);

    if (fi != null && fi.getStatus() == AsyncTask.Status.RUNNING)
            this.StartAnimation();

    super.onCreateOptionsMenu(menu, inflater);
} 
```

# salesforce - 将外部 XML 添加到 VisualForce 数据表/列表

> ID：13241235
> 
> 赞同：0
> 
> 时间：2012-11-05T22:10:12.770
> 
> 标签：salesforce, visualforce

我正在对服务器进行外部调用并返回 XML (HTTPResponse)。然后我使用 DOM 解析器来获取项目列表。如何将项目列表添加到 DataTable/DataList？

如何将 XML 结构解析为类本身内的 Salesforce 结构？

谢谢

嗨，尖叫。一切正常，除了一件事。我需要深入了解 XML

```
Dom.XMLNode rootElement = doc.getRootElement();
for (Dom.XmlNode assets : rootElement.getChildElements()) {
    if (assets.getName().trim() == 'models') {
        for (Dom.XmlNode asset : assets.getChildElements()) {
            if (asset.getName().trim() == 'model') {
                for (Dom.XmlNode serial : asset.getChildElements()) {
                    if (serial.getName().trim() == 'modelNumber') {
                        text = serial.getText().trim();
                        allOptons.add(new SelectOption(text, text));
                    }
                }
            }
        }
    }
} 
```

在 VF 页面上，它会复制结果。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:21:02.790

如果您需要存储超过 1 个参数，请通过您的 XML 将元素添加到包装器对象的字符串列表中。然后可以将这样的列表分配给 dataTable、pageBlockTable、repeat 等标签而没有任何问题。这些标签并非只适用于标准 sObjects。

对于带有复选框的简单字符串列表，您甚至不需要任何辅助类。

```
public class StackXml{
    public List<SelectOption> allOptions {get;private set;}    // this will hold serial numbers for use in VF page.
    // if you wouldn't plan to use VF with checkboxes, simple List<String> would be enough

    public List<String> selectedOptions {get;set;}

    public StackXml(){
        allOptions = new List<SelectOption>();
        selectedOptions = new List<String>();

        String xmlString = '<serials><serialNumber>ver123</serialNumber><serialNumber>ver456 </serialNumber>' +
            '<intrusion>something to prove it will be skipped</intrusion>' +
            '<serialNumber>abc007</serialNumber></serials>';

        Dom.Document doc = new Dom.Document();
        doc.load(xmlString);

        Dom.XMLNode rootElement = doc.getRootElement();
        for(Dom.XmlNode node : rootElement.getChildElements()){
            if(node.getName().trim() == 'serialNumber') {
                String text = node.getText().trim();
                allOptions.add(new SelectOption(text, text));
            }
        }
    }

    public void assign(){}
} 
```

* * *

```
<apex:page controller="StackXml">
    <apex:form>
        <apex:selectCheckboxes value="{!selectedOptions}" layout="pageDirection">
            <apex:selectOptions value="{!allOptions}"/>
        </apex:selectCheckboxes>
        <apex:commandButton value="Assign" action="{!assign}"/>
    </apex:form>
    <hr/>
    <p>You have selected:</p>
    <apex:dataList value="{!selectedOptions}" var="o">{!o}</apex:dataList>
</apex:page> 
```

# ios - 如何在 MKAnnotation 上设置标题

> ID：13241238
> 
> 赞同：2
> 
> 时间：2012-11-05T22:10:15.997
> 
> 标签：ios, mkmapview, mkannotation

全部，

尝试确定如何在搜索时在注释图钉标题中显示用户搜索位置的名称，而不是让它们预先确定，这很容易。用户输入位置的搜索栏的当前代码如下：

```
- (IBAction) showAddress
{
    [addressField resignFirstResponder];
    CLLocationCoordinate2D location = [self addressLocation];

    MKCoordinateRegion region;
    MKCoordinateSpan span;
    span.latitudeDelta=0.2;
    span.longitudeDelta=0.2;

    region.span=span;
    region.center=location;

    [mapView setRegion:region animated:TRUE];
    [mapView regionThatFits:region];

     MapViewAnnotation *addAnnotation = [[MapViewAnnotation alloc] initWithTitle:@"" andCoordinate:location];
     [self.mapView addAnnotation:addAnnotation];
} 
```

我在下面声明了我的头衔信息：

```
@implementation AddressAnnotation
@synthesize _name;

-(id)initWithName:(NSString*)name address:(NSString*)address coordinate:(CLLocationCoordinate2D)coordinate  {
if ((self = [super init]))
{
    _name = [name copy];
}
    return self;
}

-(NSString *)title
{
  if ([_name isKindOfClass:[NSNull class]])
    return @"Unknown charge";
  else
    return _name;
}

@end 
```

我的理解是我需要将我的 initWithTitle 替换为标题变量名称，但我的问题是它会是什么样子，这足以显示用户这些自定义搜索的标题吗？

谢谢！！格雷格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T22:35:36.807

如果您想坚持当前的 AddressAnnotation 定义，请将 showAddress 的最后两行更改为

```
 AddressAnnotation *addAnnotation = [[AddressAnnotation alloc] initWithName:@"" coordinate:location];
 [self.mapView addAnnotation:addAnnotation]; 
```

您需要将 @"" 替换为您想要的标题。

但是，您可能希望将 AddressAnnotation 更改为使用`title`，而不是`_name`让 @synthsize 为您完成所有工作。在初始化函数期间，您可以根据需要将标题设置为“未知”。

# objective-c - 从我的应用在 Facebook 上发帖

> ID：13241239
> 
> 赞同：4
> 
> 时间：2012-11-05T22:10:17.010
> 
> 标签：objective-c, ios, facebook, ios6

我想更新我的 iOS 应用程序以利用 iOS 6 Facebook 集成。目前我使用 Facebook 对话。我喜欢向用户呈现对话的方式，当它发布时，它有我的应用程序图标和一个小标签，上面写着“通过我的应用程序名称”链接到我的应用程序。

通过 iOS 6 Facebook 集成，它会显示“通过 iOS”和指向 Apple 网站的链接。有没有办法使用 iOS 6 的 Facebook 集成来实现相同类型的结果？

当前代码：

```
 NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"1234567890", @"app_id",
                               @"http://www.mywebsite.com/page5/page5.html", @"link",
                               picLink, @"picture",
                               countDownName, @"name",
                               @"My app name", @"caption",
                               @"For the iPhone and iPod Touch", @"description",
                               theMessage, @"message",
                               theFriendID, @"to",
                               @"Share on Facebook",  @"user_message_prompt",
                               nil];
[facebook dialog:@"feed" andParams:params andDelegate:self]; 
```

我的 iOS 6 代码（取自 Facebook 的示例代码）

```
 BOOL displayedNativeDialog = [FBNativeDialogs presentShareDialogModallyFrom:self
                                                                initialText:initialText
                                                                      image: [UIImage imageNamed: @"myImage.png"]
                                                                        url:url
                                                                    handler:nil];
if (!displayedNativeDialog) {

    [self performPublishAction:^{
        // otherwise fall back on a request for permissions and a direct post
        [FBRequestConnection startForPostStatusUpdate:message
                                    completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {

                                        [self showAlert:message result:result error:error];
                                        self.buttonPostStatus.enabled = YES;
                                    }];

        self.buttonPostStatus.enabled = NO;
    }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:47:33.107

快速谷歌搜索显示以下教程：[http://www.techotopia.com/index.php/IPhone_iOS_6_Facebook_and_Twitter_Integration_using_SLRequest#Facebook_Integration_using_SLRequest](http://www.techotopia.com/index.php/IPhone_iOS_6_Facebook_and_Twitter_Integration_using_SLRequest#Facebook_Integration_using_SLRequest)
这似乎是一个很好的教程来做你正在寻找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:40:54.190

请尝试使用[此处](https://github.com/docchang/FacebookComposeView)提供的自定义 Facebook 撰写视图。

# html - 如何在css中更改标题大小

> ID：13241242
> 
> 赞同：2
> 
> 时间：2012-11-05T22:10:28.483
> 
> 标签：html, css

我正在为此绞尽脑汁，但似乎找不到解决方案。

从语义的角度来看，我想使用 h2 标头 - 但从视觉角度来看，我希望它看起来与 h5 标头完全一样。

但是，css 与此相关的行为很奇怪，并且似乎将标题文本视为普通文本进行格式化。因此`font-size:60%;`，它的大小是*普通*文本的 60%——这绝对是很小的！我尝试过处理其他方面（如身高），但无济于事。一旦将 css 应用于字体，与标题相关的所有风格属性似乎都会消失......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T05:16:06.440

例如，使用 px 而不是百分比 `h2{font-size:14px; height:50px;}`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T23:27:01.507

如果您打算对 CSS 规则使用 % 定义 使用 html 标签修复字体呈现。

接下来包括定义文档所有基本字体信息的 body 标签。

其余的应该按需要工作。

```
/*css*/

html {font-size: 100.01%;}
body {font:italic bold 16px/30px Georgia, serif;}
h2 {font-size: 60%; line-height:60%;} 
```

​</p>

```
<!--HMTL-->
<!DOCTYPE html>
<html>
    <body>
        <div>blah</div>
        <h2>header</h2>
        <div>blah<br>blah</div>
    </body>
</html> 
```

见[例子](http://jsfiddle.net/Abyssoft/p9A4V/)

# c# - 什么时候通过十进制从浮点数转换为双精度数是有益的

> ID：13241245
> 
> 赞同：8
> 
> 时间：2012-11-05T22:10:48.320
> 
> 标签：c#, rounding

我们现有的应用程序从文件中读取一些浮点数。这些数字是由其他一些应用程序（我们称之为*Application B*）写在那里的。该文件的格式很久以前就已修复（我们无法更改）。在此文件中，所有浮点数都以二进制表示形式保存为浮点数（文件中为 4 个字节）。

在我们的程序中，一旦我们读取数据，我们就会将浮点数转换为双精度数，并在所有计算中使用双精度数，因为计算非常广泛，而且我们关心舍入误差的传播。

我们注意到，当我们通过十进制转换浮点数时（参见下面的代码），我们得到的结果比直接转换时更精确。注意：应用程序 B 在内部也使用双精度，并且仅将它们作为浮点数写入文件。假设应用程序 B 将数字 0.012 作为浮点数写入文件。如果我们在读取后将其转换为十进制，然后再将其翻倍，我们得到的正是 0.012，如果我们直接转换它，我们得到 0.0120000001043081。

这可以在不读取文件的情况下复制 - 只需一个作业：

```
 float readFromFile = 0.012f;
    Console.WriteLine("Read from file: " + readFromFile); 
    //prints 0.012

    double forUse = readFromFile;
    Console.WriteLine("Converted to double directly: " + forUse);
    //prints 0.0120000001043081

    double forUse1 = (double)Convert.ToDecimal(readFromFile);
    Console.WriteLine("Converted to double via decimal: " + forUse1); 
    //prints 0.012 
```

通过十进制将浮点数转换为双精度总是有益的，如果不是，在什么条件下它是有益的？

编辑：应用程序 B 可以通过两种方式获取它保存的值：

1.  值可以是计算的结果
2.  值可以由用户输入为小数部分（因此在上面的示例中，用户在编辑框中输入了 0.012 并将其转换为双精度，然后保存为浮点数）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-05T22:15:31.253

> 我们得到正好 0.012

不，你没有。两者都`float`不能`double`准确地表示 3/250。你得到的是一个由字符串格式化程序呈现为的`Double.ToString()`值`"0.012"`。但发生这种情况是因为格式化程序没有显示确切的值。

经历`decimal`导致四舍五入。`Math.Round`仅使用所需的舍入参数可能会更快（更不用说更容易理解） 。如果您关心的是有效位数，请参阅：

*   [将双精度数舍入到 x 有效数字](https://stackoverflow.com/questions/374316/round-a-double-to-x-significant-figures)

* * *

对于它的价值，`0.012f`（这意味着最接近 0.012 的 32 位 IEEE-754 值）正是

```
0x3C449BA6 
```

或者

```
0.012000000104308128 
```

这*完全*可以表示为`System.Decimal`. 但`Convert.ToDecimal(0.012f)`不会给你那个确切的值 - 根据[文档有一个舍入步骤](http://msdn.microsoft.com/en-us/library/he38a8ca.aspx)。

> 此方法返回的`Decimal`值最多包含七个有效数字。如果 value 参数包含超过 7 个有效数字，则使用舍入到最接近的方式对其进行舍入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T22:29:27.957

尽管看起来很奇怪，但`Convert.ToDecimal(float)`在某些情况下，通过小数（带 ）进行转换可能是有益的。

**如果知道原始数字是由用户以十进制表示形式提供的并且用户键入的有效数字不超过 7 个，它将提高精度。**

为了证明这一点，我编写了一个小程序（见下文）。这是解释：

正如您从 OP 中回忆的那样，这是一系列步骤：

1.  应用程序 B 的双精度数来自两个来源： (a) 计算结果；(b) 从用户输入的十进制数转换而来。
2.  应用程序 B 将其双精度值作为浮点数写入文件 - 有效地进行从 52 个二进制数字（[IEEE 754 single](http://en.wikipedia.org/wiki/Single-precision_floating-point_format)）到 23 个二进制数字（[IEEE 754 double](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)）的二进制舍入。
3.  我们的应用程序读取该浮点数并通过以下两种方式之一将其转换为双精度数：

    (a) 直接赋值给 double - 有效地将 23 位数字填充为具有二进制零（29 个零位）的 52 位数字；

    (b) 通过用 转换为十进制`(double)Convert.ToDecimal(float)`。

正如 Ben Voigt 正确注意到的那样`Convert.ToDecimal(float)`（[请参阅备注部分中的 MSDN](http://msdn.microsoft.com/en-us/library/he38a8ca%28v=vs.100%29.aspx)）将结果四舍五入为 7 位有效十进制数字。在维基百科关于 Single 的[IEEE 754 文章中](http://en.wikipedia.org/wiki/Single-precision_floating-point_format)，我们可以读到，`precision is 24 bits - equivalent to log10(pow(2,24)) ≈ 7.225 decimal digits.`因此，当我们转换为十进制时，我们会丢失十进制数字的 0.225。

**所以，在一般情况下，当没有关于双精度的附加信息时，转换为十进制在大多数情况下会使我们失去一些精度。**

但是（！）如果有额外的知识，最初（在作为浮点数写入文件之前）双精度数是不超过 7 位的小数，**则在十进制舍入中引入的舍入错误**（上面的步骤 3(b)）**将补偿二进制舍入引入的舍入误差**（在上面的步骤 2\. 中）。

在证明***通用情况下***的语句的程序中，我随机生成双精度数，然后将其转换为浮点数，然后将其直接转换回双精度（a），（b）通过十进制，然后我测量原始双精度与双 (a) 和双 (b)。如果 double(a) 比 double(b) 更接近原始值，我会增加 pro-direct 转换计数器，在相反的情况下，我会增加 pro-viaDecimal 计数器。我在 100 万的循环中进行。循环，然后我打印 pro-direct 与 pro-viaDecimal 计数器的比率。结果证明该比率约为 3.7，即大约在 5 分之四的情况下，通过十进制转换会破坏该数字。

为了证明***用户输入数字时的情况，***我使用了相同的程序，唯一的更改是应用于`Math.Round(originalDouble, N)`双打。因为我从 Random 类中得到 originalDoubles，它们都将在 0 和 1 之间，所以有效位数与小数点后的位数一致。我把这个方法放在一个循环中，从用户输入的 1 个有效数字到 15 个有效数字。然后我把它画在图上。与用户输入的有效位数的依赖关系（直接转换比通过十进制转换好多少次）。 ![用户输入的有效位数的依赖性（直接转换比通过十进制好多少次）](../Images/e7638cc3f32f43b0d4bfaa7159de8090.png).

如您所见，对于 1 到 7 位键入的数字，通过 Decimal 的转换总是比直接转换更好。确切地说，对于一百万个随机数，只有 1 或 2 没有通过转换为十进制来改进。

这是用于比较的代码：

```
private static void CompareWhichIsBetter(int numTypedDigits)
{
    Console.WriteLine("Number of typed digits: " + numTypedDigits);
    Random rnd = new Random(DateTime.Now.Millisecond);
    int countDecimalIsBetter = 0;
    int countDirectIsBetter = 0;
    int countEqual = 0;

    for (int i = 0; i < 1000000; i++)
    {
        double origDouble = rnd.NextDouble();
        //Use the line below for the user-typed-in-numbers case.
        //double origDouble = Math.Round(rnd.NextDouble(), numTypedDigits); 

        float x = (float)origDouble;
        double viaFloatAndDecimal = (double)Convert.ToDecimal(x);
        double viaFloat = x;

        double diff1 = Math.Abs(origDouble - viaFloatAndDecimal);
        double diff2 = Math.Abs(origDouble - viaFloat);

        if (diff1 < diff2)
            countDecimalIsBetter++;
        else if (diff1 > diff2)
            countDirectIsBetter++;
        else
            countEqual++;
    }

    Console.WriteLine("Decimal better: " + countDecimalIsBetter);
    Console.WriteLine("Direct better: " + countDirectIsBetter);
    Console.WriteLine("Equal: " + countEqual);
    Console.WriteLine("Betterness of direct conversion: " + (double)countDirectIsBetter / countDecimalIsBetter);
    Console.WriteLine("Betterness of conv. via decimal: " + (double)countDecimalIsBetter / countDirectIsBetter );
    Console.WriteLine();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T15:04:29.357

这是一个不同的答案 - 我不确定它是否比 Ben 的更好（几乎可以肯定不是），但它应该会产生正确的结果：

```
float readFromFile = 0.012f;
decimal forUse = Convert.ToDecimal(readFromFile.ToString("0.000")); 
```

只要`.ToString("0.000")`产生“正确”的数字（应该很容易抽查），那么您就会得到可以使用的东西，而不必担心舍入错误。如果您需要更高的精度，只需添加更多`0`的 's.

当然，如果您确实需要达到`0.012f`最大精度，那么这将无济于事，但如果是这种情况，那么您首先不想将其从浮点数转换。

# android - 时间戳到字符串日期

> ID：13241251
> 
> 赞同：21
> 
> 时间：2012-11-05T22:11:16.280
> 
> 标签：android, date, timestamp

我不知道如何将时间戳转换为日期。我有：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    TextView czas = (TextView)findViewById(R.id.textView1);
    String S = "1350574775";
    czas.setText(getDate(S));        
}

private String getDate(String timeStampStr){
   try{
       DateFormat sdf = new SimpleDateFormat("MM/dd/yyyy");
       Date netDate = (new Date(Long.parseLong(timeStampStr)));
       return sdf.format(netDate);
   } catch (Exception ignored) {
    return "xx";
   }
} 
```

答案是：01/16/1970，但这是错误的。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-11-06T05:22:48.020

如果您坚持以秒为单位的“1350574775”格式，请尝试以下操作：

```
private void onCreate(Bundle bundle){
    ....
    String S = "1350574775";

    //convert unix epoch timestamp (seconds) to milliseconds
    long timestamp = Long.parseLong(s) * 1000L; 
    czas.setText(getDate(timestamp ));  
}

private String getDate(long timeStamp){

    try{
        SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy");
        Date netDate = (new Date(timeStamp));
        return sdf.format(netDate);
    }
    catch(Exception ex){
        return "xx";
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-05T22:15:22.807

```
String S = "1350574775"; 
```

您以秒为单位发送时间戳，而不是毫秒。

而是这样做：

```
String S = "1350574775000"; 
```

**或者**，在您的`getDate`方法中，乘以`1000L`：

```
new Date(Long.parseLong(timeStampStr) * 1000L) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-05T08:52:06.810

```
 public static String getTime(long timeStamp){
    try{
        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(timeStamp * 1000);
        SimpleDateFormat sdf = new SimpleDateFormat("dd-MMM-yyyy hh:mm:ss a");
        Date date = (Date) calendar.getTime();
        return sdf.format(date);
    }catch (Exception e) {
    }
    return "";
} 
```

# ios - 从 Twitter API 1.0 到 1.1，gtm-oauth 无法正确认证

> ID：13241261
> 
> 赞同：1
> 
> 时间：2012-11-05T22:12:44.783
> 
> 标签：ios, twitter, oauth

因此，我天真地将端点路径切换到 1.1/ 以查看它在使用 gtm-oauth 库时是否可以正常工作，该库一直运行良好。

好像是开关坏了。我已经收到确认认证更加严格（[https://dev.twitter.com/discussions/12322](https://dev.twitter.com/discussions/12322)）和一些调试建议。显然新的 API 对当前的 gtm-oauth 来说太严格了。

**问：**我想知道是否有人针对新的 Twitter API 使用了 gtm-oauth？而且，如果是这样的话——你做了什么让它发挥作用？

我将继续调试，但与此同时，我想我会问一下，也许可以为自己节省一些时间和麻烦。

以下是我所做的，以确定我这边可能出了什么问题。

我仔细查看了我的身份验证标头，除了 oauth_nonce 和 oauth_signature（和时间戳）之外，我的应用程序和 OAuth 签名工具之间是一致的。

在我看来，要么是签名机制发生了变化，要么是随机数唯一性要求在 1.0 和 1.1 之间发生了变化。

我从服务中得到的错误是：

> "错误的身份验证数据","code":215" for: [https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=darthjulian&count=2](https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=darthjulian&count=2)

在请求标头中使用以下身份验证参数：

> OAuth oauth_consumer_key="09ARKva0K7HMz1DW1GUg", oauth_token="185383-nxvJMkTAvYX14YRdBhEOfOUKYzcA3ZQzLqNVMMt4Nc", oauth_signature_method="HMAC-SHA1", oauth_version="1.0", oauth_nonce="e4ad7f4753c4929", oauth_timestamp="1352098450", oauth_signature="hA9s%2B%2FnGRUc9OdUNqf5G4cQn5g0% 3D"

片刻之后，OAuth 签名工具告诉我我应该使用这样的东西：

> Authorization: OAuth oauth_consumer_key="09ARKva0K7HMz1DW1GUg", oauth_nonce="3a2881b92c790e41cf6e211124f1e099", oauth_signature="OlN0h3vPdPih8F%2FQbEDQth5RVZQ%3D", oauth_signature_method="HMAC-SHA1", oauth_timestamp="1352098650", oauth_token="185383-nxvJMkTAvYX14YRdBhEOfOUKYzcA3ZQzLqNVMMt4Nc", oauth_version=" 1.0"

除了 oauth_timestamp 随机数和签名是唯一关闭的东西。而且，如果我理解正确，nonce 应该没问题，只要它可能在一段时间内是独一无二的。

似乎签名机制不同，我应该更改 GTM-OAuth 的签名方式？

# fonts - Galaxy S3 上的 Droid Sans？

> ID：13241269
> 
> 赞同：4
> 
> 时间：2012-11-05T22:13:53.420
> 
> 标签：fonts, galaxy

我有一个网页，其中我选择了以下字体系列：

```
font-family: Droid Sans, sans-serif; 
```

这在正确显示字体的摩托罗拉 Droid X 上运行良好。然而，在 Galaxy S3 上，字体显示为看起来像 Helvetica 的字体。

任何人都知道如何/为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:03:40.810

三星似乎不再提供 Droid 字体了。当我将 Galaxy S2 从 Android 2.4 升级到 Android 4（三星提供的出厂更新）时，它就消失了。他们用可怕的 Roboto 字体替换了 Droid Sans :(

# java - 异常应该存在于 maven 项目目录中的什么位置？

> ID：13241272
> 
> 赞同：0
> 
> 时间：2012-11-05T22:13:56.557
> 
> 标签：java, exception, maven, project-management

在为项目定义自己的例外时，maven 项目结构或包命名约定中是否有特定位置？我认为将它们放入“异常”包中会很好，但我想我会在这里问，因为 googlebox 没有产生任何答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T22:17:01.770

这个问题与maven无关。基本上，您是在询问应将异常放置在包层次结构中的哪个位置。

由于异常与任何其他类一样，因此建议是相同的：靠近使用它们的位置（最好是相同的包）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T22:47:55.123

Tomasz 所说的，但如果有很多例外，请将它们放在自己的包中 - 通常称为`com.mycompany.<topic>.exceptions`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T22:17:21.767

不，Maven 不知道 Java 包是如何组织的。

# c - CMSIS DSP LIBRARY 中的复杂点积

> ID：13241276
> 
> 赞同：4
> 
> 时间：2012-11-05T22:14:15.187
> 
> 标签：c, arm, signal-processing

最近我一直在查看 CMSIS DSP 复杂数学函数库，我看到了一些我无法完全理解的东西，因此我在 SO 上发表了第一篇文章。

我无法理解的是 he11 的复杂点积功能如何产生正确的结果？该功能可以在这里找到：[复杂的点积](http://pastebin.com/1Tx0Sz4Z)

就我而言，这部分

```
for(n=0; n<numSamples; n++) {  
   realResult += pSrcA[(2*n)+0]*pSrcB[(2*n)+0] - pSrcA[(2*n)+1]*pSrcB[(2*n)+1];  
   imagResult += pSrcA[(2*n)+0]*pSrcB[(2*n)+1] + pSrcA[(2*n)+1]*pSrcB[(2*n)+0];  
} 
```

没关系，但是怎么样：

```
/* CReal = A[0]* B[0] + A[2]* B[2] + A[4]* B[4] + .....+ A[numSamples-2]* B[numSamples-2] */
real_sum += (*pSrcA++) * (*pSrcB++);
/* CImag = A[1]* B[1] + A[3]* B[3] + A[5]* B[5] + .....+ A[numSamples-1]* B[numSamples-1] */
imag_sum += (*pSrcA++) * (*pSrcB++); 
```

应该可以工作，因为它错过了样本的真实*图像部分的乘积？

它可能——而且很可能是——一个非常愚蠢的问题，但不知何故，我根本看不到它起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:34:19.100

这看起来完全错误，并且实现与描述不符。

假设我们有`z = x + i*y`和`w = u + i*v`与`x, y, u, v`真实的。然后

```
z*w = (x + i*y)*(u + i*v) = (x*u - y*v) + i*(x*v + y*u) 
```

和

```
z*conjugate(w) = (x + i*y)*(u - i*v) = (x*u + y*v) + i*(y*u - x*v) 
```

所以有了循环

```
while(blkCnt > 0u)
{
  /* CReal = A[0]* B[0] + A[2]* B[2] + A[4]* B[4] + .....+ A[numSamples-2]* B[numSamples-2] */
  real_sum += (*pSrcA++) * (*pSrcB++);
  /* CImag = A[1]* B[1] + A[3]* B[3] + A[5]* B[5] + .....+ A[numSamples-1]* B[numSamples-1] */
  imag_sum += (*pSrcA++) * (*pSrcB++);
  /* Decrement the loop counter */
  blkCnt--;
} 
```

你`real_sum + imag_sum = Real part of hermitian inner product`最终会得到的。

与内积的实部/虚部或双线性积都`real_sum`没有任何简单的关系。`imag_sum`

# django - 从视图中调用模板标签——CSRF 未填充

> ID：13241278
> 
> 赞同：0
> 
> 时间：2012-11-05T22:14:44.790
> 
> 标签：django, django-views, django-templates

我正在使用包含标签来生成我的页面部分，这些部分在我的网站的许多不同位置重复。

模板标签/标签.py

```
@register.inclusion_tag('chunk_template.html')
def output_chunk(object, edit):
    ... # Lots of set up work here that I don't want to duplicate in the view
    return { ... } 
```

在页面上提交表单的 AJAX 后，我需要刷新 output_chunk() 输出的相同 HTML。为避免在视图中完全重写 output_chunk() ，[我按照此答案中关于如何在视图中使用模板标签的建议执行了以下操作](https://stackoverflow.com/questions/5068272/django-template-tags-in-views)：

视图.py

```
def chunk(request, ...):
    context = Context({..., 'request': request })
    template_string = """
      {% load output_chunk from tags %}
      {% output_chunk ... %}
    """
    t = Template(template_string)
    return HttpResponse(t.render(context)) 
```

这一切都工作正常，除了 chunk_template.html 调用`{% csrf %}`，当我以标准方式调用模板标签时，它工作，但当我以这种有点hacky的方式调用时（以避免两次编写相同的代码）。

`return render (request, template_name, context)`（对于更简单的模板标签，当我从视图中调用时，这很好用。）

那么，有没有更好的方法来从视图中调用模板标签以正确调用所有中间件？或者我可以在这个 hack 中添加一些东西以使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:28:26.060

我不明白问题的核心，但你总是可以手动拉取令牌（中间件调用这个函数）。

```
from django.middleware.csrf import get_token

csrf = get_token(request) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:47:10.770

需要使上下文成为RequestContext。

```
context = RequestContext(request, {....}) 
```

# ios - 是否可以从 Websheet.app 内部打开到 Safari 的链接

> ID：13241279
> 
> 赞同：2
> 
> 时间：2012-11-05T22:14:47.223
> 
> 标签：ios, objective-c, iphone

我想知道是否有可能在 iPhone 上从 Websheet 应用程序内部打开一个到 Safari 的链接，当人们尝试访问强制网络时会显示该链接。任何客户端解决方案都可以解决问题（自定义协议、javascript 等）。

情况如下：

1.  用户加入强制网络
2.  Websheet 弹出，用户可以进行身份​​验证
3.  之后，用户被重定向到自定义 URL，但在**Safari中**

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:24:37.160

您可以从应用程序内部打开 Mobile Safari 中的任何链接。只需这样做

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString: launchUrl] 
```

launchUrl 是您要在 safari 中打开的 url（字符串格式）。

# android - Android：Theme.Holo 不是黑色的

> ID：13241283
> 
> 赞同：2
> 
> 时间：2012-11-05T22:15:00.617
> 
> 标签：android, styles, themes

我正在开发我的新 Android 应用程序，在我制作了第一个布局之后，我想知道为什么一切都是白色（背景）而不是像以前那样是黑色的。所以我发现这是因为 Theme.Holo.Light.DarkActionBar。我立即将其更改为 Theme.Holo 但模拟器中没有任何变化。

我用谷歌搜索了这个问题，他们说你的 minSDK 必须是 11+，所以我将其更改为 11、12、13、14，但没有再次改变！

我该怎么做才能看到古老而漂亮的黑色主题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-07T01:51:17.480

values-v11 和 values-v14 文件夹中有 style.xml 文件，除了主要的文件之外，还需要更新这些文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-05T22:23:15.757

使用`Theme.Holo`. 由于您选择不发布任何源代码，因此不可能指出您哪里出错了。但是，如果您使用基于主题的应用程序`Theme.Holo`（例如[此示例应用程序](https://github.com/commonsguy/cw-omnibus/tree/master/ViewPager/MultiView1)）运行应用程序，则会得到深色背景。

最简单的获取方法`Theme.Holo`是根本不指定主题，这是11 或更高版本并在 API 级别 11+ 设备上运行的`Theme.Holo`应用程序的默认设置。`android:targetSdkVersion`

我链接到的示例应用程序采用了更精细的方法，由 Eclipse 的代码生成器提供：

*   它`res/values/styles.xml`定义`AppTheme`为从旧的黑暗继承`Theme`：

*   它`res/values/styles.xml`定义`AppTheme`为继承自`Theme.Holo`：

*   它`AppTheme`在其[清单](https://github.com/commonsguy/cw-omnibus/blob/master/ViewPager/MultiView1/AndroidManifest.xml)中使用（由于某种原因未在此答案中显示，因此您必须满足于单击[链接](https://github.com/commonsguy/cw-omnibus/blob/master/ViewPager/MultiView1/AndroidManifest.xml)）

因此，它将`Theme.Holo`在 API Level 11+ 设备和`Theme`旧设备上使用。两者都提供深色背景。

# java - 生成文件并在 map 函数中写入文件

> ID：13241284
> 
> 赞同：0
> 
> 时间：2012-11-05T22:15:01.553
> 
> 标签：java, hadoop

我正在我的地图函数中生成一个 csv 文件。这样每个地图任务都会生成一个 csv 文件。现在这是一个副作用，而不是映射器的输出。我命名这些文件的方式类似于 filename_inputkey。但是，当我在单节点集群上运行应用程序时，只生成了一个文件。我的输入中有 10 行，根据我的理解，将有 10 个映射器任务并生成 10 个文件。让我知道我是否在这里以错误的方式思考。

这是我的 GWASInputFormat 类

```
import java.io.IOException;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.mapred.FileInputFormat;
import org.apache.hadoop.mapred.FileSplit;
import org.apache.hadoop.mapred.JobConf;
import org.apache.hadoop.mapred.RecordReader;
import org.apache.hadoop.mapred.Reporter;

public class GWASInputFormat extends FileInputFormat<LongWritable, GWASGenotypeBean>{

@Override
public RecordReader<LongWritable, GWASGenotypeBean> getRecordReader(org.apache.hadoop.mapred.InputSplit input, JobConf job, Reporter arg2) throws IOException {
    return (RecordReader<LongWritable, GWASGenotypeBean>) new GWASRecordReader(job, (FileSplit)input);
}

} 
```

这是GWASRecordReader

```
import java.io.IOException;

import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapred.FileSplit;
import org.apache.hadoop.mapred.JobConf;
import org.apache.hadoop.mapred.LineRecordReader;
import org.apache.hadoop.mapred.RecordReader;

public class GWASRecordReader implements RecordReader<LongWritable, GWASGenotypeBean>{

private LineRecordReader lineReader;
private LongWritable lineKey;
private Text lineValue;

@Override
public void close() throws IOException {
    if(lineReader != null) {
        lineReader.close();
    }
}

public GWASRecordReader(JobConf job, FileSplit split) throws IOException {
    lineReader = new LineRecordReader(job, split);
    lineKey = lineReader.createKey();
    lineValue = lineReader.createValue();
}

@Override
public LongWritable createKey() {
    return new LongWritable();
}

@Override
public GWASGenotypeBean createValue() {
    return new GWASGenotypeBean();
}

@Override
public long getPos() throws IOException {
    return lineReader.getPos();
}

@Override
public boolean next(LongWritable key, GWASGenotypeBean value) throws IOException {
    if(!lineReader.next(lineKey, lineValue)){
        return false;
    }

    String[] values = lineValue.toString().split(",");

    if(values.length !=32) {
        throw new IOException("Invalid Record ");
    }

    value.setPROJECT_NAME(values[0]);
    value.setRESEARCH_CODE(values[1]);
    value.setFACILITY_CODE(values[2]);
    value.setPROJECT_CODE(values[3]);
    value.setINVESTIGATOR(values[4]);
    value.setPATIENT_NUMBER(values[5]);
    value.setSAMPLE_COLLECTION_DATE(values[6]);
    value.setGENE_NAME(values[7]);
    value.setDbSNP_RefSNP_ID(values[8]);
    value.setSNP_ID(values[9]);
    value.setALT_SNP_ID(values[10]);
    value.setSTRAND(values[11]);
    value.setASSAY_PLATFORM(values[12]);
    value.setSOFTWARE_NAME(values[13]);
    value.setSOFTWARE_VERSION_NUMBER(values[14]);
    value.setTEST_DATE(values[15]);
    value.setPLATE_POSITION(values[16]);
    value.setPLATE_ID(values[17]);
    value.setOPERATOR(values[18]);
    value.setGENOTYPE(values[19]);
    value.setGENOTYPE_QS1_NAME(values[20]);
    value.setGENOTYPE_QS2_NAME(values[21]);
    value.setGENOTYPE_QS3_NAME(values[22]);
    value.setGENOTYPE_QS4_NAME(values[23]);
    value.setGENOTYPE_QS5_NAME(values[24]);
    value.setGENOTYPE_QS1_RESULT(values[25]);
    value.setGENOTYPE_QS2_RESULT(values[26]);
    value.setGENOTYPE_QS3_RESULT(values[27]);
    value.setGENOTYPE_QS4_RESULT(values[28]);
    value.setGENOTYPE_QS5_RESULT(values[29]);
    value.setSTAGE(values[30]);
    value.setLAB(values[31]);
    return true;
}

@Override
public float getProgress() throws IOException {
    return lineReader.getProgress();
}

} 
```

映射器类

```
import java.io.IOException;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import java.util.Map;
import java.util.TreeMap;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.FSDataOutputStream;
import org.apache.hadoop.fs.FileSystem;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapred.MapReduceBase;
import org.apache.hadoop.mapred.Mapper;
import org.apache.hadoop.mapred.OutputCollector;
import org.apache.hadoop.mapred.Reporter;

import com.google.common.base.Strings;

public class GWASMapper extends MapReduceBase implements Mapper<LongWritable, GWASGenotypeBean, Text, Text> {

private static Configuration conf;

@SuppressWarnings("rawtypes")
public void setup(org.apache.hadoop.mapreduce.Mapper.Context context) throws IOException {
    conf = context.getConfiguration();
    // Path[] otherFiles = DistributedCache.getLocalCacheFiles(context.getConfiguration());
}

@Override
public void map(LongWritable inputKey, GWASGenotypeBean inputValue, OutputCollector<Text, Text> output, Reporter reporter) throws IOException {

    checkForNulls(inputValue, inputKey.toString());

    output.collect(new Text(inputValue.getPROJECT_CODE()), new Text(inputValue.getFACILITY_CODE()));

}

private void checkForNulls(GWASGenotypeBean user, String inputKey) {

    String f1 = " does not have a value_fail";
    String p1 = "Must not contain NULLS for required fields";
    // have to initialize these two to some paths in hdfs

    String edtChkRptDtl = "/user/hduser/output6/detail" + inputKey + ".csv";
    String edtChkRptSmry = "/user/hduser/output6/summary" + inputKey + ".csv";
            ../

            List<String> errSmry = new ArrayList<String>();
    Map<String, String> loc = new TreeMap<String, String>();

    if(Strings.isNullOrEmpty(user.getPROJECT_NAME())) {
        loc.put("test", "PROJECT_NAME ");
        errSmry.add("_fail");
    } else if(Strings.isNullOrEmpty(user.getRESEARCH_CODE())) {
        loc.put("test", "RESEARCH_CODE ");
        errSmry.add("_fail");
    } else if(Strings.isNullOrEmpty(user.getFACILITY_CODE())) {
        loc.put("test", "FACILITY_CODE ");
        errSmry.add("_fail");
    } else if(Strings.isNullOrEmpty(user.getPROJECT_CODE())) {
        loc.put("test", "PROJECT_CODE ");
        errSmry.add("_fail");
    } else if(Strings.isNullOrEmpty(user.getINVESTIGATOR())) {
        loc.put("test", "INVESTIGATOR ");
        errSmry.add("_fail");
    } else if(Strings.isNullOrEmpty(user.getPATIENT_NUMBER())) {
        loc.put("test", "PATIENT_NUMBER ");
        errSmry.add("_fail");
    } else if(Strings.isNullOrEmpty(user.getSAMPLE_COLLECTION_DATE())) {
        loc.put("test", "SAMPLE_COLLECTION_DATE ");
        errSmry.add("_fail");
    } else if(Strings.isNullOrEmpty(user.getGENE_NAME())) {
        loc.put("test", "GENE_NAME ");
        errSmry.add("_fail");
    } else if(Strings.isNullOrEmpty(user.getSTRAND())) {
        loc.put("test", "STRAND ");
        errSmry.add("_fail");
    } else if(Strings.isNullOrEmpty(user.getASSAY_PLATFORM())) {
        loc.put("test", "ASSAY_PLATFORM ");
        errSmry.add("_fail");
    } else if(Strings.isNullOrEmpty(user.getSOFTWARE_NAME())) {
        loc.put("test", "SOFTWARE_NAME ");
        errSmry.add("_fail");
    } else if(Strings.isNullOrEmpty(user.getTEST_DATE())) {
        loc.put("test", "TEST_DATE ");
        errSmry.add("_fail");
    } else if(Strings.isNullOrEmpty(user.getPLATE_POSITION())) {
        loc.put("test", "PLATE_POSITION ");
        errSmry.add("_fail");
    } else if(Strings.isNullOrEmpty(user.getPLATE_ID())) {
        loc.put("test", "PLATE_ID ");
        errSmry.add("_fail");
    } else if(Strings.isNullOrEmpty(user.getOPERATOR())) {
        loc.put("test", "OPERATOR ");
        errSmry.add("_fail");
    } else if(Strings.isNullOrEmpty(user.getGENOTYPE())) {
        loc.put("test", "GENOTYPE ");
        errSmry.add("_fail");
    } else if(Strings.isNullOrEmpty(user.getSTAGE())) {
        loc.put("test", "STAGE ");
        errSmry.add("_fail");
    } else if(Strings.isNullOrEmpty(user.getLAB())) {
        loc.put("test", "LAB ");
        errSmry.add("_fail");
    }

    String customNullMsg = "Required Genotype column(s)";
    List<String> error = new ArrayList<String>();
    String message = null;

    if(!loc.isEmpty()) {
        for (Map.Entry<String, String> entry : loc.entrySet()) {
        message = "line:" + entry.getKey() + " column:" + entry.getValue() + " " + f1;
        error.add(message);
        }
    } else {
        message = "_pass";
        error.add(message);
    }

    int cnt = 0;
    if(!errSmry.isEmpty()) {

        // not able to understand this. Are we trying to get the occurances
        // if the last key that contains _fail
        for (String key : errSmry) {
        if(key.contains("_fail")) {
            cnt = Collections.frequency(errSmry, key);
            // ******************** Nikhil added this
            break;
        }
        }

        if(cnt > 0) {
        writeCsvFileSmry(edtChkRptSmry, customNullMsg, p1, "failed", Integer.toString(cnt));
        } else {
        writeCsvFileSmry(edtChkRptSmry, customNullMsg, p1, "passed", "0");
        }

    } else {
        writeCsvFileSmry(edtChkRptSmry, customNullMsg, p1, "passed", "0");
    }

    // loop the list and write out items to the error report file
    if(!error.isEmpty()) {
        for (String s : error) {
        //System.out.println(s);
        if(s.contains("_fail")) {
            String updatedFailmsg = s.replace("_fail", "");
            writeCsvFileDtl(edtChkRptDtl, "genotype", updatedFailmsg, "failed");
        }
        if(s.contains("_pass")) {
            writeCsvFileDtl(edtChkRptDtl, "genotype", p1, "passed");
        }
        }
    } else {
        writeCsvFileDtl(edtChkRptDtl, "genotype", p1, "passed");
    }
    // end loop
   }

 private void writeCsvFileDtl(String edtChkRptDtl, String col1, String col2, String col3) {
    try {
        if(conf == null) {
            conf = new Configuration();
        }
        FileSystem fs = FileSystem.get(conf);

        Path path = new Path(edtChkRptDtl);
        if (!fs.exists(path)) {
            FSDataOutputStream out = fs.create(path);
            out.writeChars(col1);
            out.writeChar(',');
            out.writeChars(col2);
            out.writeChar(',');
            out.writeChars(col3);
            out.writeChar('\n');
            out.flush();
            out.close();
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
}

private void writeCsvFileSmry(String edtChkRptSmry, String col1, String col2, String col3, String col4) {
    try {

        if(conf == null) {
            conf = new Configuration();
        }
        FileSystem fs = FileSystem.get(conf);

        Path path = new Path(edtChkRptSmry);
        if (!fs.exists(path)) {
            FSDataOutputStream out = fs.create(path);
            out.writeChars(col1);
            out.writeChar(',');
            out.writeChars(col2);
            out.writeChar(',');
            out.writeChars(col3);
            out.writeChar(',');
            out.writeChars(col4);
            out.writeChar('\n');
            out.flush();
            out.close();
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
}
} 
```

这是我的司机课

```
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.conf.Configured;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapred.FileInputFormat;
import org.apache.hadoop.mapred.FileOutputFormat;
import org.apache.hadoop.mapred.JobClient;
import org.apache.hadoop.mapred.JobConf;
import org.apache.hadoop.util.Tool;
import org.apache.hadoop.util.ToolRunner;

public class GWASMapReduce extends Configured implements Tool{

/**
 * @param args
 */
public static void main(String[] args) throws Exception {
    Configuration configuration = new Configuration();
    ToolRunner.run(configuration, new GWASMapReduce(), args);
}

@Override
public int run(String[] arg0) throws Exception {

    JobConf conf = new JobConf(new Configuration());
    conf.setInputFormat(GWASInputFormat.class);
    conf.setOutputKeyClass(Text.class);
    conf.setOutputValueClass(Text.class);
    conf.setJarByClass(GWASMapReduce.class);
    conf.setMapperClass(GWASMapper.class);
    conf.setNumReduceTasks(0);
    FileInputFormat.addInputPath(conf, new Path(arg0[0]));
    FileOutputFormat.setOutputPath(conf, new Path(arg0[1]));
    JobClient.runJob(conf);
    return 0;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:21:47.610

可能只有一个 Mapper 任务，十次调用它的`map`方法。如果你希望每个 Mapper 写出一个文件，你应该在它的`configure`方法中这样做。如果您希望为每个输入记录写出一个文件，您应该在其`map`方法中这样做。

编辑：以上结果与问题无关。问题是在 GWASInputFormat 中，您没有在 next 方法中设置键，因此您的地图输入键始终相同。只需添加`key.set(lineKey.get());`到`next`方法中，它应该可以工作。

# ios - STAssertEqualObjects 我可以检查两个接受的值吗？

> ID：13241285
> 
> 赞同：0
> 
> 时间：2012-11-05T22:15:03.387
> 
> 标签：ios, macos, unit-testing

我想`NSString`对它的值进行单元测试，但我需要能够接受两个“正确”的值。不只是一个。我该怎么做？

我知道我可以做类似的事情：

```
STAssertEqualObjects(node.name, @"attachment", @"invalid name"); 
```

但是，例如，如果等于任一值，我如何接受`@"attachment"`AND`@"table"`值是正确的并且不会通过单元测试。`NSString`

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:19:02.720

没有专门针对此的宏。您可以使用`STAssertTrue`和`NSArray`包含可接受值的文字：

```
STAssertTrue([@([@"attachment", @"table"]) containsObject:myString]), @"invalid name"); 
```

您需要一对额外的括号来隐藏处理`STAssertTrue`.

或者你可以把它拼出来：

```
STAssertTrue([@"attachment" isEqual:node.name] || [@"table" isEqual:node.name], @"invalid name"); 
```

# javascript - 从事件触发第三方 Javascript

> ID：13241287
> 
> 赞同：1
> 
> 时间：2012-11-05T22:15:15.030
> 
> 标签：javascript, survey

我经营一个电子商务网站。在我们的订单确认页面上，我们运行第三方 javascript，它会自动执行可选调查。

调查的问题在于执行需要 20 秒，并且会减慢关键的“订单完成”页面的呈现速度。

我想阻止加载此脚本，直到客户单击按钮。

理想情况下，页面将在不执行脚本的情况下加载。页面上会出现一些文字，“您想参加调查吗？如果是，**请单击此处**。” 然后页面会调用第三方javascript来执行调查代码。

下面是第三方javascript。第一个脚本标签只收集变量，第二个脚本标签实际运行调查代码。

```
<script language="JavaScript">
// var passin_x =; //comment out to default center or adjust horizontal position by pixel
// var passin_y =; //comment out to default center or adjust vertical position by pixel
var orderId='@@order_id@@';
// var z_index =; //default 9995
var cartTotal='@@purchase_total@@';
// var billingZipCode=;
// Pass up to 5 products from customer shopping cart
//var productsPurchased= 'URL=^SKU=^GTIN=^PRICE=|URL=^SKU=^GTIN=^PRICE=|URL=^SKU=^GTIN=^PRICE=|URL=^SKU=^GTIN=^PRICE=|URL=^SKU=^GTIN=^PRICE=';
</script>
<script type="text/javascript" src="https://eval.bizrate.com/js/pos_xxxxx.js">
</script> 
```

如何在点击事件后动态加载脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T06:16:32.160

我使用[jQuery.getScript](http://api.jquery.com/jQuery.getScript/)在单击事件后动态加载脚本。

具体来说，我使用了这里显示的技术： [http ://www.tutorialspoint.com/jquery/ajax-jquery-getscript.htm](http://www.tutorialspoint.com/jquery/ajax-jquery-getscript.htm)

看起来像这样：

```
$(document).ready(function() {
   $("#driver").click(function(event){
       $.getScript('/jquery/result.js', function(jd) {
           // Call custom function defined in script
           CheckJS();
       });
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:33:15.513

你为什么要这样做呢？这将减慢您的站点调用外部链接来触发您的 js 的速度，如果外部站点发生任何事情，那么您的 js 函数将失效并且站点可能会中断。这不是一个好的编码实践，您应该获取 js 文件的副本并将其本地存储在您的托管服务器中......

无论如何，这只是我的意见。

-Epik-

# php - Magento 将引用参数添加到 getLoginPostUrl()

> ID：13241289
> 
> 赞同：5
> 
> 时间：2012-11-05T22:15:18.550
> 
> 标签：php, magento

我正在尝试创建一个表单，将登录尽可能无缝地集成到流程中。

我`Mage::helper('customer')->getLoginPostUrl()`目前正在使用登录表单，如果有更好的使用方法，我会全力以赴，它可以工作，但最终会出现在用户仪表板中。

我查找了函数及其查找， `if($this->_getRequest()->getParam(self::REFERER_QUERY_PARAM_NAME)){` 但我不确定如何以函数将读取它的方式给它参数。

我注意到如果我使用`Mage::helper('customer')->getLoginUrl()`它会添加引用者本身，所以我跟踪它并发现它如何将编码的引用者添加到 url 并最终得到这个

```
<?php echo Mage::helper('customer')->getLoginPostUrl(); ?>referer/<?php echo Mage::helper('core')->urlEncode($this->getUrl("frontname/controller/function")); ?> 
```

这给了我一个看起来像这样的网址

```
http://www.mysite.com/customer/account/loginPost/referer/aHR0cDovL3J5YW4uZGV2L3VzL2Zyb250bmFtZS9jb250cm9sbGVyL2Z1bmN0aW9uLw,,/ 
```

哪个有效，但我认为必须有更好的方法。有人知道吗？

如果不是......这对我有用，以防其他人正在寻找同样的东西。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-10-08T10:54:03.807

我已经这样做了，希望这对某人也有帮助：

```
Mage::getUrl('customer/account/login', array('referer' => Mage::helper('core')->urlEncode($this->getUrl("frontname/controller/function")))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T14:14:07.810

我有同样的问题。由于您的配置中的设置，您的客户被重定向到仪表板。去

> 系统 > 配置 > 客户 > 客户配置 > 登录选项

并将“登录后将客户重定向到帐户仪表板”设置为“否”。Magento 将开始收听该引荐来源参数并将您的客户带回到他们单击“登录”之前所在的页面。

我知道这是一个旧线程，可能为时已晚，但是这个问题对问题进行了排名，也许它会对其他人有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-03T00:38:05.580

我会将*vladislav-mosalsky*的答案与`_current`来自*amardeep-* aryan 的片段结合起来，这样您只需要一份代码即可使用。

```
Mage::app()->getFrontController()->getResponse()->setRedirect(
    Mage::getUrl('customer/account/login', array('referer' => Mage::helper('core')->urlEncode(
        Mage::getUrl('', array('_current' => true,'_use_rewrite' => true))
    )))
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-30T12:34:57.633

我已经这样做了。

**步骤1。**

*系统 > 配置 > 客户 > 客户配置 > 登录选项*

并将“*登录后将客户重定向到帐户仪表板*”设置为“**否**”。Magento 将开始收听该引荐来源参数并将您的客户带回到他们单击“登录”之前所在的页面。

**第2步。**

在 header.phtml 中

```
if(!Mage::helper('customer')->isLoggedIn() and $this->getRequest()->getControllerName() != 'account'){
     $referer = Mage::helper('core')->urlEncode(Mage::getUrl('', array('_current' => true,'_use_rewrite' => true)));
     Mage::getSingleton('core/session')->setCustomRefererUrl($referer);
} 
```

**步骤 3。**

在登录表单中

```
 <?php $referer = $this->getRequest()->getParam(Mage_Customer_Helper_Data::REFERER_QUERY_PARAM_NAME); 
    echo Mage::helper('core')->urlDecode($referer);
    ?>
    <form action="<?php echo Mage::getUrl('customer/account/loginpost', array('referer' => $referer)); ?>" method="post" id="login-form"> 
```

它应该可以正常工作。

# c++ - C++ 命令行“WOW64 中不允许操作”

> ID：13241292
> 
> 赞同：1
> 
> 时间：2012-11-05T22:15:24.547
> 
> 标签：c++, command-line, wow64

我尝试使用管理员从我的 C++ 程序调用系统程序，但我只收到此消息“在 WOW64 中不允许操作”。我尝试了以下代码：

```
system("netsh.exe interface ipv6 add v6v4tunnel IP6Tunnel 192.168.1.2 216.66.84.42"); 
```

或者

```
CreateProcess(NULL, "netsh.exe interface ipv6 add v6v4tunnel IP6Tunnel 192.168.1.2 216.66.84.42", NULL, NULL, TRUE, 0, NULL, NULL, &info, &processInfo) 
```

和

```
ShellExecute(NULL, "runas", "netsh.exe interface ipv6 add v6v4tunnel IP6Tunnel 192.168.1.2 216.66.84.42", "", NULL, SW_SHOW); 
```

如果我在命令行中调用，它可以工作

> netsh.exe 接口 ipv6 添加 v6v4tunnel IP6Tunnel 192.168.1.2 216.66.84.42

如何从我的 C++ 程序运行系统命令。

为什么我不能在普通命令行中将 C++ System()、CreateProcess() 和 ShellExecute() 与 start 进行比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:19:18.453

“WOW64”的意思是“Windows on Windows 64”或者它是 32 位应用程序的模拟器。看起来您正在尝试从 32 位程序运行 64 位进程（反之亦然）

# android - 如何让很多视图一起滚动作为android中的单个元素？

> ID：13241294
> 
> 赞同：0
> 
> 时间：2012-11-05T22:15:30.237
> 
> 标签：android, android-listview, scroll

我有一个在 Framelayout 内的 VideoView，并且几乎没有其他元素，例如 imageviews，下面是一个列表视图。我希望​​能够使用单个滚动滚动所有视图。

视频应该与列表视图一起作为一个实体滚动！

在此处查看 TED Conferences 应用程序：https: [//play.google.com/store/apps/details?id=com.ted.android&hl=en](https://play.google.com/store/apps/details?id=com.ted.android&hl=en)

我想做类似的事情，任何想法和帮助将不胜感激。谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T22:21:33.887

我使用的 TED 应用程序可能在其 ListView 上为“第一个”项目使用了标题。他们也可能在 ListView 中使用多行布局，但如果您只希望顶部的一行不同，则使用标题视图更有意义。查看[`ListView#addHeaderView()`](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View%29)

（另外我不希望人们下载应用程序来帮助您解决问题。下次抓取一些屏幕截图。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T22:44:54.347

您可以使用 3 种布局：

1.  按钮和 VideoView - 标题
2.  ListView - 主要布局
3.  如果需要，其他内容 - 页脚

```
ListView lv = (ListView) findViewById(R.id.listView);
View header = getLayoutInflater().inflate(R.layout.header_layout, null);
View footer = getLayoutInflater().inflate(R.layout.foorer_layout, null);
lv.addHeaderView(headerComment);
lv.addFooterView(footerComment); 
```

对于选项卡功能，您可以使用[TabHost](https://developer.android.com/reference/android/widget/TabHost.html)。

# sml - 如何在没有 cons 运算符的情况下检查“集合”中的项目

> ID：13241296
> 
> 赞同：1
> 
> 时间：2012-11-05T22:15:45.210
> 
> 标签：sml, ml, abstract-data-type

这是一个代码示例，我认为它可以在作为列表实现的集合数据类型中正常工作：

```
fun newSet() = nilset;

fun isMember (k, x::xs) = if k = x then true else isMember (k, xs)
  | isMember (k, nilset) = false; 
```

问题是我不能将它作为一个列表来实现。下面是我的集合的实现代码。

```
abstype ''a set = nilset | st of ''a * ''a set 
```

`::`如果是针对列表，我如何递归地执行此操作和其他设置操作？如果不是，为什么会抛出异常？我在使用时得到这个`::`：

```
! Type clash: pattern of type
!   ''a set
! cannot have type
!   ''b list 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T22:23:58.430

这也不例外。这是一个类型错误，表示您不能使用`::`属于`'a list`with 的cons 构造函数`'a set`。

假设您有两个构造函数`Nilset`和`Set`递归数据类型：

```
datatype 'a set = Nilset | Set of 'a * 'a set 
```

您应该按照数据类型的递归结构来定义`isMember`：

```
fun isMember (k, Set(x, xs)) = k = x orelse isMember (k, xs)
  | isMember (k, Nilset) = false 
```

当然，要认真使用`Set`，您应该查看[Set 结构](http://www.cs.cornell.edu/courses/cs312/2007fa/recitations/rec09.html)。

# java - 是否有任何文档说明使用 Hessian 时会引发哪些运行时异常或潜在原因？

> ID：13241297
> 
> 赞同：2
> 
> 时间：2012-11-05T22:15:54.747
> 
> 标签：java, hessian, java1.4

我有一个使用 Hessian 进行 Web 服务调用的 Java 1.4 Web 应用程序。我试图将它写得尽可能健壮和透明。在调用代理时，我不希望任何粗麻布异常使其脱离我的委托类。我希望能够捕获任何 Hessian 运行时异常，解开它们并重新抛出一些主要异常（例如，`ConnectException`）或将它们重新包装在另一个异常中。但是找到这些例外是一个挑战。

我在委托类中使用的每个方法都有这种结构。

```
public MyResult myMethod(MyArgsType myArgs)
        throws ConnectException
{
    try
    {
        return proxy.myMethod(myArgs);
    }
    catch (HessianRuntimeException ex)
    {
        Throwable cause = ex.getCause();
        if (cause instanceof ConnectException)
            throw (ConnectException)cause;
        throw new MyRuntimeException(cause);
    }
} 
```

这在我自己的测试中运行良好，但其他一些运行时异常正在出现，我错过了它们。例如，我们最近发现它可能会抛出`HessianConnectionException`由 a 引起的`SocketException`（远程服务器已关闭）。我完全期待我目前拥有的东西会抓住它。`HessianConnectionException`不是从 派生的，所以`HessianRuntimeException`现在我必须添加要捕获的异常。

```
public MyResult myMethod(MyArgsType myArgs)
        throws SocketException, ConnectException
{
    try
    {
        return proxy.myMethod(myArgs);
    }
    catch (HessianException ex) // HessianConnectionException derives from HessianException
    {
        Throwable cause = ex.getCause();
        if (cause instanceof SocketException)
            throw (SocketException)cause;
        throw new MyRuntimeException(cause);
    }
    catch (HessianRuntimeException ex)
    {
        Throwable cause = ex.getCause();
        if (cause instanceof ConnectException)
            throw (ConnectException)cause;
        throw new MyRuntimeException(cause);
    }
} 
```

好吧，这对我来说很好，它必须完成......但它在哪里结束？我找不到任何关于我需要注意的其他运行时异常或其任何根本原因的文档。

我希望只要抓住`HessianException`就`HessianRuntimeException`足够了，因为这些是我可以在[此处](http://javadoc4.caucho.com/index.html)找到的唯一运行时异常。但是对于这些新发现的问题，我不确定我想要解开哪些异常，因为它看起来像是一个混合包（据我所知，`SocketException`并且`ConnectException`是同一问题的不同表示）。

**在通过代理调用方法时抛出哪些运行时异常及其所有潜在原因是否有任何文档？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:37:39.610

我假设您已经完成了网络搜索等，所以这里是一个备用位置，以防您找不到您正在寻找的文档。

在您现有的捕获之后，捕获 RuntimeException。测试异常的类名是否以“Hessian”开头和/或检查其包名。如果它不是源自 Hessian 的，则重新抛出。

在您知道这是一个 Hessian 异常之后，您可以执行与当前策略类似的操作，通过原因链查找在您的上下文中有意义或至少来自非 Hessian 包的内容。

# ssrs-2008 - SQL Services Reporting Services 级联参数

> ID：13241299
> 
> 赞同：3
> 
> 时间：2012-11-05T22:16:03.977
> 
> 标签：ssrs-2008, reporting-services, reportingservices-2005

我的报告中有 2 个参数来选择日期范围：

开始日期和结束日期

我想隐藏 StartDate 并允许用户只选择 EndDate，然后它将开始日期动态更改为 EndDate 之前的 1 年。

每次用户更改 EndDate 更改时，我都需要这样做。

我很确定我必须使用级联参数，但我不知道如何。

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T23:05:11.373

是的，如果您想在报告级别执行此操作，级联参数是诀窍。（您也可以在查询级别非常有效地处理这个问题。）

1.  首先按照依赖顺序排列报表中的参数：EndDate 应该列在 StartDate 之上。使用向上和向下箭头重新排列参数。
2.  将 StartDate 参数设置为“Internal”并适当地设置默认值。选择“指定值”并创建一个值`=DATEADD( DateInterval.Year, -1, Parameters!EndDate.Value )`

现在，您可以在查询中同时使用`@EndDate`和`@StartDate`，而无需初始化它们，它们将被传递 SSRS 值。

# iphone - 在 iOS 5 上禁用字幕会在屏幕上留下最后显示的字幕文本

> ID：13241310
> 
> 赞同：0
> 
> 时间：2012-11-05T22:17:08.450
> 
> 标签：iphone, ios, video-streaming, http-live-streaming, subtitle

我们一直在为基于 AVPlayer 的视频播放器添加字幕支持。我们可以从 [self.player.currentItem.asset mediaSelectionGroupForMediaCharacteristic:AVMediaCharacteristicLegible] 生成的 AVMediaSelectionGroup 中检索 mediaType "sbtl" 的 AVMediaSelectionOption 对象，并且可以选择适当的 AVMediaSelectionOption 来在我们的直播流中显示字幕。这一切都很好。

我们遇到问题的地方是在 iOS 5.01 和 iOS 5.1 上取消选择 AVMediaSelectionOption。

在运行 iOS 6 的设备上，我们可以使用 [self.player.currentItem selectMediaOption:nil inMediaSelectionGroup:self.subtitleSelectionGroup] 禁用字幕，它们会按预期消失。但在 iOS 5.01 和 iOS 5.1 上，字幕停止更新，但最后显示的文本仍保留在视频播放器上，直到播放器关闭、按下电源按钮或应用程序移至后台。

我们尝试过滤掉强制字幕，认为这可能是问题所在，但无济于事。这是操作系统中的错误吗？我们的流媒体视频有问题吗？

感谢您提供的任何帮助和指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:42:58.903

Not sure if this helps in iOS5 but in my video stream i have an option for subtitles and an option for forced subtitles for each language. I i change to the forced subtitle option it wont show any subtitle (only if you have forced ones). So if you make your videos like this and have that forced subtitle with not subtitles at all you can select the forced subtitles to make the trick in iOS5\.

Here is a print object of how my selection group option array looks like:

```
<__NSArrayM 0x2006d590>(
    <AVMediaSelectionTrackOption: 0x200297a0, mediaType = sbtl, locale = en, title = (null), option ID = 3, associated forced-only option = <AVMediaSelectionTrackOption: 0x2006d600>>,
    <AVMediaSelectionTrackOption: 0x2006d600, mediaType = sbtl, locale = en, title = (null), option ID = 3, default = YES, forced subtitles only>,
    <AVMediaSelectionTrackOption: 0x20057210, mediaType = sbtl, locale = zh, title = (null), option ID = 4, associated forced-only option = <AVMediaSelectionTrackOption: 0x20044bc0>>,
    <AVMediaSelectionTrackOption: 0x20044bc0, mediaType = sbtl, locale = zh, title = (null), option ID = 4, forced subtitles only>,
    <AVMediaSelectionTrackOption: 0x2002d450, mediaType = sbtl, locale = ce, title = (null), option ID = 5, associated forced-only option = <AVMediaSelectionTrackOption: 0x20028660>>,
    <AVMediaSelectionTrackOption: 0x20028660, mediaType = sbtl, locale = ce, title = (null), option ID = 5, forced subtitles only>
    ) 
```

Hope this can be of any use for you because there is not much info available for this subject.

# c# - C# 中的多行文本字段更改布局？

> ID：13241312
> 
> 赞同：1
> 
> 时间：2012-11-05T22:17:26.900
> 
> 标签：c#, asp.net, layout, textfield, multiline

我正在使用 ASP.net 框架。我正在使用 .aspx 文件的设计视图构建 Web 表单。我做了一个很简单的表格，下面是.aspx文件中的代码。

```
<asp:TextBox ID="TextBox3" runat="server" Height="60px" Width="550px" TextMode="MultiLine"></asp:TextBox>
        <asp:Button ID="Button1" runat="server" Height="60px" Text="Button"  Width="100px"/>
        <asp:Button ID="Button2" runat="server" Height="60px" Text="Button" Width="100px" /> 
```

问题是当我将 TextMode 设置为 MultiLine 时，按钮的位置也会发生变化。文本模式设置为单行： ![单线](../Images/0c8abccd6313b4dd42b479608f202298.png)

文本模式设置为多行： ![多线](../Images/c5e2a6e10f1e391f1e811a3c2c91d2b0.png)

对此有何解释？

# javascript - requestAnimationFrame 的最新 polyfill

> ID：13241314
> 
> 赞同：8
> 
> 时间：2012-11-05T22:17:45.467
> 
> 标签：javascript, html, requestanimationframe

[http://updates.html5rocks.com/2012/05/requestAnimationFrame-API-now-with-sub-millisecond-precision](http://updates.html5rocks.com/2012/05/requestAnimationFrame-API-now-with-sub-millisecond-precision)告诉我，最近（Chrome 20）requestAnimationFrame 获得了一个新的亚毫秒精度计时器，并且我有更新我的代码以支持它。

环顾四周的各种 polyfill，它们似乎都早于这次更新。它们是否以某种方式起作用（我不这么认为），还是根本没有可用的最新版本？我应该自己做计时吗（似乎有点浪费）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:23:59.133

我也刚读过那篇文章，很想自己尝试一下。我尝试在不支持高分辨率计时器的浏览器中为 rAF 回调添加包装器。它使用了 Paul Irish 的原始 polyfill，并添加了以下几行：

```
var hasPerformance = !!(window.performance && window.performance.now);

// Add new wrapper for browsers that don't have performance
if (!hasPerformance) {
    // Store reference to existing rAF and initial startTime
    var rAF = window.requestAnimationFrame,
        startTime = +new Date;

    // Override window rAF to include wrapped callback
    window.requestAnimationFrame = function (callback, element) {
        // Wrap the given callback to pass in performance timestamp
        var wrapped = function (timestamp) {
            // Get performance-style timestamp
            var performanceTimestamp = (timestamp < 1e12) 
                ? timestamp 
                : timestamp - startTime;

            return callback(performanceTimestamp);
        };

        // Call original rAF with wrapped callback
        rAF(wrapped, element);
    }        
} 
```

这是所有内容的要点以及使用新代码的更新示例：

[https://gist.github.com/4078614](https://gist.github.com/4078614)

[http://jsfiddle.net/timhall/XQpzU/4351/](http://jsfiddle.net/timhall/XQpzU/4351/)

这种方法旨在将传递给回调函数的参数标准化为高分辨率计时器格式。如果您的现有代码期望这样做，您可以使用类似的方法（正好相反）将高分辨率计时器转换为旧格式，但我认为这是一种回归。

我将在我现在正在进行的一个项目中进行尝试，如果我发现任何问题/改进，我会更新要点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T20:24:02.080

高分辨率计时的更改仅影响回调的参数。我不相信任何 polyfill 明确引用该参数，它仅取决于您如何使用它。所以 polyfills 不需要更新，应该已经可以正常工作了——只要注意如何使用 RAF 回调的参数，如果你不这样做，那就没什么好担心的了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T13:10:03.787

这可能有效。修改了这个要点

[https://gist.github.com/1579671](https://gist.github.com/1579671)

```
(function() {
    var lastTime = 0;
    var startTime = Date().getTime();
    var vendors = ['ms', 'moz', 'webkit', 'o'];
    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
        window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
        window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame'] 
                                   || window[vendors[x]+'CancelRequestAnimationFrame'];
    }

    if (!window.requestAnimationFrame)
        window.requestAnimationFrame = function(callback, element) {
            var currTime = new Date().getTime();
            var timeToCall = Math.max(0, 16 - (currTime - lastTime));
            var id = window.setTimeout(function() { callback(currTime - startTime); }, 
              timeToCall);
            lastTime = currTime + timeToCall;
            return id;
        };

    if (!window.cancelAnimationFrame)
        window.cancelAnimationFrame = function(id) {
            clearTimeout(id);
        };
}()); 
```

获取闭包首次执行（页面加载）时的时间戳，然后将当前时间戳与原始时间戳之间的差异传递给回调。应该给你一个与新方法等效的整数。没有那么精确，但比完全不同的值要好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-31T15:16:13.903

这是 Paul Irish 的博客条目，其中包含原始 polyfil 和他的更新。

[http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/](http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/)

对于大多数情况，这应该足够了。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-14T12:20:49.663

Paul Irish 建议为此使用 polyfill。

```
window.requestAminFrame = (function(){
    return window.requestAminFrame || window.webkitRequestAnimFrame || window.mozRequestAnimFrame || window.msRequestAnimFrame || window.oRequestAnimFrame || function(func){return setTimeout(func,1/60);};
})(); 
```

# c# - 如何使用 ASP.NET MVC4 登录？

> ID：13241319
> 
> 赞同：4
> 
> 时间：2012-11-05T22:17:57.197
> 
> 标签：c#, asp.net-mvc, login, asp.net-mvc-4

这是我尝试的一些代码。这没用; “登录”后，用户不会被重定向到主页/索引页面，但登录页面只是重新加载。

网络配置：

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login" />
</authentication>

...

<defaultDocument>
  <files>
    <add value="~/Account/Login"/>
  </files>
</defaultDocument> 
```

控制器/AccountController.cs：

```
public class AccountController : Controller
{
    //
    // GET: /Account/Login
    public ActionResult Login()
    {
        return View();
    }
} 
```

视图/帐户/Login.aspx：

```
<asp:Login ID="login" runat="server" DestinationPageUrl="~/Views/Home/Index.aspx">
    ...
</asp:Login> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T05:44:47.167

您使用的是 ASP.NET MVC 4 的互联网模板吗？如果没有，我建议您使用 Internet 模板创建一个新的 ASP.NET MVC 项目，打开 Account Controller 并查看方法。

正如@user1 所说的那样，您可以这样做的一种方法是使用

```
 FormsAuthentication.SetAuthCookie(username, true);
 return Redirect(returnurl); 
```

但正如您所说，您使用的是 ASP.NET MVC 4。您应该使用[WebSecurity](http://www.asp.net/web-pages/tutorials/security/16-adding-security-and-membership)类。

例如 ：

```
WebSecurity.Login(model.UserName, model.Password);
return RedirectToAction("Index", "Home"); 
```

大部分工作是使用 WebSecurity 帮助程序的以下方法和属性完成的：

*   [WebSecurity.UserExists](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity.userexists%28v=vs.99%29.aspx)，[WebSecurity.CreateUserAndAccount](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity.createuserandaccount%28v=vs.99%29.aspx)。这些方法让您确定某人是否已经注册并注册他们。

*   [WebSecurity.IsAuthenticated](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity.isauthenticated%28v=vs.99%29.aspx)。此属性可让您确定当前用户是否已登录。如果用户尚未登录，这对于将用户重定向到登录页面很有用。

*   [WebSecurity.Login](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity.login%28v=vs.99%29.aspx)，[WebSecurity.Logout](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity.logout%28v=vs.99%29.aspx)。这些方法使用户登录或注销。

*   [WebSecurity.CurrentUserName](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity.currentusername%28v=vs.99%29.aspx)。此属性可用于显示当前用户的登录名（如果用户已登录）。

*   [WebSecurity.ConfirmAccount](http://msdn.microsoft.com/en-us/library/gg569286%28v=vs.99%29.aspx)。如果您为注册设置电子邮件确认，此方法很有用。（详细信息在博客文章使用 ASP.NET 网页安全的确认功能中进行了描述。）

**延伸阅读：**

*   [向 ASP.NET 网页 (Razor) 站点添加安全性和成员资格](http://www.asp.net/web-pages/tutorials/security/16-adding-security-and-membership)
*   [ASP.NET MVC4 中的 WebSecurity 与 FormsAuthentication](https://stackoverflow.com/questions/12061953/websecurity-vs-formsauthentication-in-asp-net-mvc4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T22:27:48.137

我怀疑您没有设置表单身份验证 cookie，这就是重定向不起作用的原因。理想情况下，在您的登录方法中，您将使用一些逻辑验证用户名和密码，当您确信用户是合法的时，您必须设置表单身份验证 cookie，然后重定向用户

```
FormsAuthentication.SetAuthCookie(username, true);
return Redirect(returnurl); 
```

如果您不设置身份验证 cookie，则重定向将不起作用，因为该请求仍将被视为未经身份验证的请求，并且用户将被发送回登录页面。您可以在此处找到有关表单登录的更多信息

[http://msdn.microsoft.com/en-us/library/xdt4thhy%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/xdt4thhy%28v=vs.71%29.aspx)

# asp.net - 执行异步请求时如何发出 waithandle.waitany 信号？

> ID：13241325
> 
> 赞同：0
> 
> 时间：2012-11-05T22:19:01.893
> 
> 标签：asp.net, multithreading, asynchronous

我正在使用以下示例代码使用异步请求获取一些 HTML 页面。

我不想等到使用 WaitHandle.WaitAll 的每个请求都完成后，才等到找到正确的值。我目前正在这样做，但是将 ManualResetEvents 发送到线程感觉不对。是不是应该怎么做？有没有更好的办法？

```
 public static void runprogram()
    {

        System.Net.ServicePointManager.DefaultConnectionLimit = 20;
        FetchPageDelegate del = new FetchPageDelegate(FetchPage);
        List<HtmlDocument> htmllist = new List<HtmlDocument>();
        List<IAsyncResult> results = new List<IAsyncResult>();
        List<WaitHandle> waitHandles = new List<WaitHandle>();
        List<ManualResetEvent> handles = new List<ManualResetEvent>();

        for (int i = 0; i < 20; i++)
        {
            ManualResetEvent e = new ManualResetEvent(false);
            handles.Add(e);
        }

        for(int i = 0; i < 200; i += 10)
        {
            int y = 0;
            string url = @"URLTOPARSE" + i;
            IAsyncResult result = del.BeginInvoke(url, handles[y], null, null);
            results.Add(result);
            waitHandles.Add(result.AsyncWaitHandle);

            y++;
        }
        //Here i check for a signal
        WaitHandle.WaitAny(handles.ToArray());

        //WaitHandle.WaitAll(waitHandles.ToArray());

        foreach (IAsyncResult async in results)
        {

           FetchPageDelegate delle = (async as AsyncResult).AsyncDelegate as FetchPageDelegate;
           HtmlDocument htm = delle.EndInvoke(async);

            if(htm.DocumentNode.InnerHtml.Contains("ANYTHING TO CHECK FOR(ONLY A TEST"))
            { 
                return;
            }
        }
    } 
```

# python - 两个列表中的相等元素

> ID：13241326
> 
> 赞同：-3
> 
> 时间：2012-11-05T22:19:06.207
> 
> 标签：python, python-3.x

> **可能重复：**
> [确定 2 个列表是否具有相同的元素，无论顺序如何？](https://stackoverflow.com/questions/8866652/determine-if-2-lists-have-the-same-elements-regardless-of-order)
> [在 Python 中匹配两个字母列表](https://stackoverflow.com/questions/11140297/match-two-lists-of-letters-in-python)

我有 list`a`和 list `b`。所以我需要找到，如果列表具有相同的元素。我不知道，但我正在考虑使用`collections`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T22:25:06.510

假设你不关心订单。这里有几个选项，最佳解决方案取决于列表的内容。以下是一些按偏好（和限制）顺序排列的可能性：

*   如果没有重复项，并且所有项目都是可散列的：

    ```
    set(a) == set(b) 
    ```

*   如果有重复项，并且所有项目都属于同一类型：

    ```
    sorted(a) == sorted(b) 
    ```

*   如果有重复并且列表可能有混合类型，并且所有类型都是可散列的：

    ```
    collections.Counter(a) == collections.Counter(b) 
    ```

*   如果有重复，列表可能有混合类型，并且某些元素可能不是可散列的（必须有更好的方法来做到这一点，但我想出的是把每个元素变成一个元组，用字符串表示类型，后跟值）：

    ```
    keyfunc = lambda x: (str(type(x)), x)
    sorted(a, key=keyfunc) == sorted(b, key=keyfunc) 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:21:45.447

```
>>> all(x in b for x in a) 
```

# javascript - 固定标题淡出，淡入

> ID：13241331
> 
> 赞同：0
> 
> 时间：2012-11-05T22:19:22.157
> 
> 标签：javascript, jquery, css, html

说到JS，我是菜鸟，所以我提前道歉。

我正在尝试制作一个固定的标题，向下滚动时“淡入”0.5 不透明度，当滚动回顶部时淡入完全不透明（“不透明度”：1.0）？

这是我到目前为止所拥有的：

```
$(document).ready(function() {

var div = $('#header');
var start = $(div).offset().top;

$.event.add(window, "scroll", function() {
if($(window).scrollTop();
$('#header').fadeTo(600, 0.5);

$(div).css('position',((p)>start) ? 'fixed' : 'static');
$(div).css('top',((p)>start) ? '0px' : '0px');

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:22:33.070

```
$('body, html').on('scroll', function() {
     if ($(this).scrollTop() > 10) {
         $("#header").fadeTo(600, 0.5);
     }else{
         $("#header").fadeTo(600, 1);

     }
}); 
```

# django - 在 Django REST Framework 中保存模型之前更改 POST 数据

> ID：13241332
> 
> 赞同：0
> 
> 时间：2012-11-05T22:19:25.150
> 
> 标签：django, django-rest-framework

**免责声明**：我是 DRF/基于类的视图新手。

我有一种情况，我的 API 的客户端无法知道资源的 ID，但它确实知道该资源的唯一标识符（其名称）。

当客户端通过 POST 向第一个发送具有外键的单独资源时，这是一个问题。例如...客户端发送以下数据（信号为 FK）：

```
{"signal_name": "signal1", "value": 5} 
```

但模型期望：

```
{"signal": 1, "value": 5} 
```

当`self.CONTENT`进入我的自定义发布方法时，它已经过验证并且是空的。

那么，在数据被验证/拒绝之前，我可以在哪里/如何交换这些数据？
我需要自定义验证方法吗？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T22:55:49.370

我尝试弄乱资源上的字段和额外字段属性，但无法让它不验证它是错误的。所以我最终只是将“signal_name”字段中的字段添加到模型中，并将其与 post 方法中的信号 id 匹配。（谢天谢地，在这种情况下，我们对 Signal 有一个非强制的 FK，所以我可以等待给信号一个值）

我会检查几天，看看是否有人真的知道如何更好地做到这一点。另外，感谢披萨和汤姆的建议！

# c# - 委托给实例方法不能有 null 'this'。转换代表时

> ID：13241334
> 
> 赞同：0
> 
> 时间：2012-11-05T22:19:31.953
> 
> 标签：c#, .net-3.5, delegates

我正在尝试从通用委托转换为命名委托。

结果符合以下精神（无效的 C#）：

```
Action<CustomClass> act = ???;
CustomDelegate d = act; 
```

我试过了

```
CustomDelegate d = act.Invoke;
CustomDelegate d = new CustomDelegate( act );
CustomDelegate d = new CustomDelegate( x => act(x) );
CustomDelegate d = new CustomDelegate( act.Invoke ); 
```

所有这些都在运行时失败，并给出`ArgumentException`错误

> 委托给实例方法不能有 null 'this'。

不是我的代码的堆栈顶部是：

> 在 System.MulticastDelegate.ThrowNullThisInDelegateToInstance()
> 
> 在 System.MulticastDelegate.CtorClosed（对象目标，IntPtr methodPtr）

如何转换委托以使我没有异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T22:19:31.953

我最终通过尝试[@DiegoMijelshon's solution for a question on cast delegates](https://stackoverflow.com/a/1906829/1072626)找到了答案。使用该解决方案，我得到了 a`NullReferenceException`而不是`ArgumentException`. 因此我发现问题是因为我拥有的 Action<> 为空（它是一个参数）。因此，如下所示的空检查解决了我的问题。

```
CustomDelegate d = adt == null ? null : act.Invoke;
// Though, I actually went with @DiegoMijelshon solution to avoid extra indirection. 
```

然后我去看看反射器（我应该早点做），发现它确实是对导致`ThrowNullThisInDelegateToInstance`被调用的参数的空检查。

# javascript - 重置数组是打破 Array.forEach 的有效方法吗？

> ID：13241340
> 
> 赞同：-3
> 
> 时间：2012-11-05T22:19:51.920
> 
> 标签：javascript, arrays

我一直在寻找一种简单的方法来摆脱 forEach。这个答案提到了使用 some 方法，但这并没有给你当前元素的索引：[How to short circuit Array.forEach like calling break?](https://stackoverflow.com/questions/2641347/how-to-short-circuit-array-foreach-like-calling-break)

我发现将数组设置为 false 会破坏 forEach “循环”。这是有效的还是黑客行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T22:25:53.523

如果您的意思是将其设置`.length`为迭代中的当前索引，那么是的，它是“有效的”，但请注意，这样做会从那时起清除任何 Array 成员。

```
var arr = ["foo","bar","baz"];

console.log(arr.length); // 3

arr.forEach(function(v, i) {
    if (i == 1)
        arr.length = i;
    else 
        console.log(v);
});

console.log(arr.length); // 1 
```

如果将 设置`.length`为`false`，则实际上将其设置为`0`，因此您将清除整个数组。

使用`.some`or`.every`对我来说似乎更明智。

* * *

我应该注意，迭代不一定会停止，但不会调用您`.forEach()`的回调，因为本机不会为不存在的属性调用回调。根据规范，缓存的长度。

这可以通过在迭代期间扩展数组来测试。永远不会到达添加的成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:40:46.747

根据文档，当前元素的索引作为第二个参数传递给回调函数：

语法： ***array.some(callback[, thisObject])***

```
callback is invoked with three arguments: 
   1\. the value of the element
   2\. the index of the element
   3\. the Array object being traversed 
```

在此处查看[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/some)

* * *

更重要的是...

有什么理由你不能以正常方式做到这一点：

```
var matchIndex = -1;
for (i = 0; i < someArray.length; i++) {
    if (isFound(someArray[i])) {
        matchIndex = i;
        break;
    }
}
alert("Mathing index: " + matchIndex); 
```

# php - 登录后使用 cURL 从网站获取数据？

> ID：13241344
> 
> 赞同：1
> 
> 时间：2012-11-05T22:20:03.387
> 
> 标签：php, curl

我要做的是登录一个网站，然后从表中获取数据，因为它们没有导出功能。到目前为止，我已经成功登录，它向我显示了用户主页。但是，我需要导航到不同的页面或以某种方式抓取该页面，同时仍使用 curl 登录。

到目前为止我的代码：

```
$username="email"; 
$password="password"; 
$url="https://jiltapp.com/sessions"; 
$cookie="cookie.txt";
$url2 = "https://jiltapp.com/shops/shopname/orders";

$postdata = "email=".$username."&password=".$password; 

$ch = curl_init(); 
curl_setopt ($ch, CURLOPT_URL, $url); 
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"); 
curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookie); 
curl_setopt ($ch, CURLOPT_REFERER, $url); 

curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata); 
curl_setopt ($ch, CURLOPT_POST, 1); 
$result = curl_exec ($ch); 

echo $result;  
curl_close($ch); 
```

正如我提到的，我可以访问主用户页面，但我需要获取 $url2 变量的内容，而不是 $url。我怎样才能完成这样的事情？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T22:24:55.620

登录后，再次请求包含您所追求的数据的页面。

对于后续请求，您必须设置`CURLOPT_COOKIEFILE`指向同一文件的选项`CURLOPT_COOKIEJAR`。cURL 将从该文件中读取 cookie 并将它们与请求一起发送。

```
$username="email"; 
$password="password"; 
$url="https://jiltapp.com/sessions"; 
$cookie="cookie.txt";
$url2 = "https://jiltapp.com/shops/shopname/orders";

$postdata = "email=".$username."&password=".$password; 

$ch = curl_init(); 
curl_setopt ($ch, CURLOPT_URL, $url); 
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"); 
curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookie); 
curl_setopt ($ch, CURLOPT_COOKIEFILE, $cookie);  // <-- add this line
curl_setopt ($ch, CURLOPT_REFERER, $url); 

curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata); 
curl_setopt ($ch, CURLOPT_POST, 1); 
$result = curl_exec ($ch); 

echo $result;  

// make second request

$url = 'page you want to get data from';
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POST, 0);

$data = curl_exec($ch); 
```

# c# - 将循环转换为 LINQ

> ID：13241352
> 
> 赞同：2
> 
> 时间：2012-11-05T22:20:52.543
> 
> 标签：c#, linq, list

计算每日收益的 Equity Analytics（股票）对象列表。正在考虑必须有一个成对的解决方案来做到这一点：

```
for(int i = 0; i < sdata.Count; i++){
    sdata[i].DailyReturn = (i > 0) ? (sdata[i-1].AdjClose/sdata[i].AdjClose) - 1
                                   : 0.0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T22:22:31.993

*LINQ*代表：*“语言集成**查询**”*。

LINQ 不应该使用并且几乎不能用于分配，LINQ 不会更改给定的 IEnumerable 参数，而是创建一个新参数。

正如下面评论中所建议的那样，有一种方法可以使用 LINQ**创建一个新的 IEnumerable**，它会更慢，而且可读性也会差很多。

尽管 LINQ 很好，但重要的是要知道何时不使用它。

只需使用旧*的 for 循环*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:37:44.907

我是 LINQ 的新手，我开始使用它是因为 stackoverflow，所以我尝试解决您的问题，我知道这可能会吸引反对票，但我尝试过并且它可以满足您的要求，以防列表中至少有一个元素.

```
sdata[0].DailyReturn = 0.0;
sdata.GetRange(1, sdata.Count - 1).ForEach(c => c.DailyReturn = (sdata[sdata.IndexOf(c)-1].AdjClose / c.AdjClose) - 1); 
```

但必须说避免 for 循环不是最佳实践。从我的角度来看，LINQ 应该在方便的地方使用，而不是无处不在。好的旧循环有时更容易维护。

# java - google drive sdk 上传演示文稿时出错

> ID：13241356
> 
> 赞同：1
> 
> 时间：2012-11-05T22:21:02.447
> 
> 标签：java, google-app-engine, google-drive-api, google-docs-api, google-api-java-client

我正在尝试使用 google api 驱动器上传演示文稿，但演示文稿不完整，有些幻灯片是空白的，正在查看日志，这就是显示的内容

```
com.google.api.client.http.HttpRequest execute: -------------- REQUEST  --------------
PUT https://www.googleapis.com/upload/drive/v2/files?    uploadType=resumable&upload_id=AEnB2UrDPJgLIehcqH--aWgwl-   R_atDhqdvbXnJiWMXKE0V0euJGOvULbM4y5YmvUePWaHSrYyFdOgsmTASJGe-Dtvg09NCkzQ
Accept-Encoding: gzip
Authorization: Bearer ya29.AHES6ZTfSaK77NGCcZO1bK_aTbT8zVX3eslOAb8BkrvpeXARK94XsXY
Content-Range: bytes 0-1048575/6774302
User-Agent: Google-HTTP-Java-Client/1.11.0-beta (gzip)
Content-Type: application/vnd.openxmlformats-officedocument.presentationml.presentation
Content-Length: 1048576

com.google.api.client.http.HttpRequest execute: curl -v --compressed -X PUT -H 'Accept-        Encoding: gzip' -H 'Authorization: Bearer     ya29.AHES6ZTfSaK77NGCcZO1bK_aTbT8zVX3eslOAb8BkrvpeXARK94XsXY' -H 'Content-Range: bytes 0-    1048575/6774302' -H 'User-Agent: Google-HTTP-Java-Client/1.11.0-beta (gzip)' -H 'Content-Type:     application/vnd.openxmlformats-officedocument.presentationml.presentation' -d '@-' --     https://www.googleapis.com/upload/drive/v2/files?    uploadType=resumable&upload_id=AEnB2UrDPJgLIehcqH--aWgwl-    R_atDhqdvbXnJiWMXKE0V0euJGOvULbM4y5YmvUePWaHSrYyFdOgsmTASJGe-Dtvg09NCkzQ << $$$

com.google.api.client.http.HttpResponse <init>: -------------- RESPONSE --------------
308 OK
server: HTTP Upload Server Built on Oct 3 2012 16:52:30 (1349308350)
range: bytes=0-1048575
x-range-md5: 19230c1c1a0fc493f3431f46cf30c14c
date: Mon, 05 Nov 2012 22:00:33 GMT
pragma: no-cache
expires: Fri, 01 Jan 1990 00:00:00 GMT
cache-control: no-cache, no-store, must-revalidate
content-length: 0
content-type: text/html; charset=UTF-8
x-google-cache-control: remote-fetch
via: HTTP/1.1 GWA 
```

这是正在使用的代码：

```
byte[] myFile = readImageData(blobKey,size);
ByteArrayContent mediaContent = new ByteArrayContent(mimeType, myFile);

Drive.Files.Insert insert = service.files().insert(body, mediaContent);
insert.getMediaHttpUploader().setChunkSize(1024 * 1024);
File file = insert.execute(); 
```

**更新**

做一些测试，似乎只有在上传扩展名为 .pptx 的演示文稿时才会出现错误

该扩展的 mimeType 有什么问题吗？

我希望有人可以帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:09:29.360

似乎没有正确实施[可恢复上传协议。](https://developers.google.com/drive/manage-uploads#resumable)308 响应代码表示只上传了请求的一部分，您应该继续下一个块。

如果从代码中删除以下行，它是否可以正常工作？

```
insert.getMediaHttpUploader().setChunkSize(1024 * 1024); 
```

# ruby - 使用 Ruby 读取使用 Node.js 创建的 Zlib 字符串

> ID：13241360
> 
> 赞同：3
> 
> 时间：2012-11-05T22:21:45.347
> 
> 标签：ruby, node.js, zlib, inflate

我们的应用程序的某些部分是用 Ruby 编写的，而其他部分是使用 node.js 编写的。

我们使用存储 zlib 块的 redis 存储在它们之间共享数据。我们使用节点使用以下代码写入它：

```
zlib.deflate(xml.toString(), function(error, deflated) {
  ...
  deflated.toString('binary'); // That's the string we write in Redis
  ...
}); 
```

现在，我们使用 Ruby (1.8.7) 在 redis 存储中读取了这些数据，我不得不说我不知道​​该怎么做。

我们从商店获得的典型字符串如下所示：

```
=> "xuAo \020ÿ\ná.£v½\030dÿCO½±:«¤(\004Æªÿ¾¬®5MÚ\003÷½IÞ q¤°²e°c¼òÈ×\000ó<ùM¸ÐAç\025ÜÈ\r|gê\016Ý/.é\020ãÆî×\003Ôç<Ýù2´F\n¨Å\020!zl \0209\034p|üÀqò\030\036m\020\e`\031¼ÏütÓ=Ã¸¦U/ÔO±\177zB{\037½£-ðBu©ò¢X\000kb­*Ó[V\024Y^½EÎ¥üpúrò­¦\177ÁÃdÈ¢j\0353$a\027²q#¥]*Ýi3J8¤´füd\eså[³öÊµ%\fcÇY\037ð¬ÿg§í^¥8£Õ§a¶\001=\r;¡¾\001\020Pí" 
```

当然，我尝试使用， `Zlib::Inflate.new.inflate(compressed)`但使用`Zlib::DataError: incorrect header check`.

关于我们应该对该字符串进行何种转换以从 Ruby 中对其进行膨胀的任何想法？

PS：从节点膨胀它很容易并且有效，所以问题不在于我们如何压缩它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T09:46:49.927

> 关于我们应该对该字符串进行何种转换以从 Ruby 中对其进行膨胀的任何想法？

**UTF-8 到 Latin-1**

理想情况下，只要您直接在 Node 端使用 Buffers，就不需要进行任何转换。请参阅下面最底部的一对 Node 和 Ruby 代码块；然而，问题的本质是关于在 Ruby 方面可以做些什么来解决这个问题。

## 仅限 Ruby - 从 UTF-8 转换为 LATIN-1

```
require 'zlib'
require 'rubygems'
require 'redis'
require 'iconv'

redis = Redis.new

def inflate(buffer)
    zstream = Zlib::Inflate.new
    buf = zstream.inflate(buffer)
    zstream.finish
    zstream.close
    buf
end

def convert(buffer)
    utf8_to_latin1 = Iconv.new("LATIN1//TRANSLIT//IGNORE", "UTF8")
    utf8_to_latin1.iconv(buffer) 
end

value = redis.get("testkey")
value = convert(value)
puts inflate(value); 
```

### 解释

上面的代码使用 iconv 将从 Redis 检索到的值从 UTF-8 转换回预期的字节。

在 Node 中放气时，生成的缓冲区包含正确的 zlib 生成的字节；来自`toString('binary')`, 字符的结果字符串也与 deflate 结果缓冲区的内容匹配；但是，当放气结果存储在 Redis 中时，它是 UTF-8 编码的。一个例子：

对字符串“ABCABC”进行放气会导致：

```
<Buffer 78 9c 73 74 72 76 74 72 06 00 05 6c 01 8d> 
```

然而，Redis 返回：

```
<Buffer 78 c2 9c 73 74 72 76 74 72 06 00 05 6c 01 c2 8d> 
```

稍微假设一下，似乎从结果得到的字符串最终`toString('binary')`作为 new Buffer(...) 某个地方的参数，可能在 node-redis 中。如果 new Buffer() 没有指定的编码参数，则应用默认的 UTF-8 编码。（见第一个参考）。进一步假设，通过仅使用缓冲区，您避免了从字符串创建缓冲区的需要，因此，避免了 UTF8 编码，因此正确的 deflate 值使其进出 Redis。

参考

*   [http://nodejs.org/api/buffer.html#buffer_new_buffer_str_encoding](http://nodejs.org/api/buffer.html#buffer_new_buffer_str_encoding)
*   [http://blog.grayproductions.net/articles/encoding_conversion_with_iconv](http://blog.grayproductions.net/articles/encoding_conversion_with_iconv)
*   [http://ruby-doc.org/stdlib-1.8.7/libdoc/zlib/rdoc/Zlib/Inflate.html](http://ruby-doc.org/stdlib-1.8.7/libdoc/zlib/rdoc/Zlib/Inflate.html)。

## 节点

```
var zlib = require('zlib');
var redis = require("redis").createClient();

var message = new Buffer('your stuff goes here.');
//var message = new Buffer(xml.toString());

redis.on("error", function (err) {
console.log("Error " + err);
});

redis.on("connect", function() {
    console.log(message);
    zlib.deflate(message, function(error, deflated) {
        console.log(deflated);          
        redis.set("testkey",deflated,function (err, reply) {
            console.log(reply.toString());
        });
    });
}); 
```

## 红宝石

```
require 'zlib'
require 'rubygems'
require 'redis'

redis = Redis.new

def inflate(buffer)
    zstream = Zlib::Inflate.new
    buf = zstream.inflate(buffer)
    zstream.finish
    zstream.close
    buf
end

value = redis.get("testkey")    

puts inflate(value) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T00:59:29.163

如果您使用 node-redis 来保存数据，那么它将直接处理缓冲区，因此您可以简单地使用 client.set(key, buff) 或 client.append(key, buff)，因此您不需要（想要）做任何转换。

Node.js（由 Kevin 简化）

```
var zlib = require('zlib');
var redis = require("redis");
var rc = redis.createClient(null, null, {detect_buffers: true}); // allow Buffers

var message = new Buffer('My message');

zlib.deflate(message, function (err, deflated) {
  if (err) return console.error(err);
  rc.set("testkey", deflated, function (err, result) {
    if (err) return console.error(err);
    rc.quit();
  });
}); 
```

Ruby 代码（从上面的 Kevin 复制）

```
require 'zlib'
require 'rubygems'
require 'redis'

redis = Redis.new

def inflate(buffer)
    zstream = Zlib::Inflate.new
    buf = zstream.inflate(buffer)
    zstream.finish
    zstream.close
    buf
end

value = redis.get("testkey")

puts inflate(value) 
```

`.toString('binary')`这适用于正确检索值，但是像您提到的那样更改 Node.js 代码以使用最初会破坏您上面所说的 Ruby 解码。

这是一个示例，表明 toString('binary') 确实会弄乱数据

```
 console.log(deflated);
 console.log(new Buffer(deflated.toString('binary'))); 
```

所以我无法弄清楚 Buffer.toString('binary') 正在做什么，因为我相信它进入了 V8 缓冲区代码。

但是，如果您仍然能够使用 Node 读取它，那么您可能希望将其提取出来并以正确的方式保存，而无需使用`.toString('binary')`just give Buffer to the redis client set 方法，它会正确保存它。

然后它将以二进制形式存储，您可以使用上面的代码正确地用 ruby​​ 读取它。

至于您的 node.js 代码，一旦您将其正确保存为二进制文件（直接在 set 调用中使用 Buffer），然后检索它：

```
var rc = redis.createClient(null, null, {detect_buffers: true}); // allow Buffers
rc.get(new Buffer(key), function (err, buff) {  // use a Buffer for the key
   // buff is a Buffer now
}); 
```

通过为node-redis打开detect_buffers，然后当您将Buffer作为键传入时，它将作为Buffer检索并且不会转换。

您可以选择使用`return_buffers = true`选项，但我喜欢`detect_buffers`这样您可以将相同的客户端用于缓冲区和非缓冲区数据。

PS。确保您的 Ruby gem 使用的是最新版本之一，而不是像 1.x 之类的旧版本（2.x 添加了二进制修复）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T23:53:19.783

转换使用的行为`toString`已经使您处于犯罪状态。您需要保留和传输由 deflate 生成的原始二进制缓冲区，而不进行任何类型的转换，以便 Ruby 中的 inflate 能够对其进行解码。

目前尚不清楚转换`'binary'`的作用，但它可能会去除空值，这会弄乱数据。在任何情况下，文档都说`binary`不应该使用并且不推荐使用。您需要找到一种方法来直接传递 Buffer 类中的原始压缩数据，或者如果您确实需要一个字符串，请将其转换为可以在 Ruby 中反转的字符串格式，然后再尝试膨胀。例如base64。

# html - Qt QTextEdit Qt4.2 有效的 HTML 字符串

> ID：13241362
> 
> 赞同：0
> 
> 时间：2012-11-05T22:21:56.143
> 
> 标签：html, qt, qtextedit

我正在尝试生成正确的 HTML 以在 RHEL 5.3 上使用 Qt 4.2 呈现给 QTextEdit。到目前为止，我的算法生成了以下 html。我不是专业的网络开发人员，但对我来说，这个字符串似乎是有效的。

```
319:14:27:22:   <font color="rgb(255,0,0)" bgcolor="rgb(255,0,0)">Message</font><br> 
```

需要改变什么来渲染颜色。目前它只是呈现为白色背景上的黑色文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:57:12.733

QTextEdit 接受[文档中](http://qt-project.org/doc/qt-4.8/richtext-html-subset.html)详述的 HTML*子集*。

对于字体颜色属性，它必须是“Qt 颜色名称或#RRGGBB”。

# mysql - mysql date_format 无法解析 2013 年 5 月 20 日

> ID：13241364
> 
> 赞同：0
> 
> 时间：2012-11-05T22:22:04.770
> 
> 标签：mysql

[使用mysql 文档](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)中指定的 date_format

```
选择 date_format('20-May-2013', '%d-%b-%Y');

```

返回null，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:27:54.377

您正在尝试使用 DATE_TIME() 解析日期，但该函数旨在执行相反的操作 - 采用已知格式的日期并使用自定义格式显示它。您可能想要的是[STR_TO_DATE()](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date)函数：

```
select str_to_date('20-May-2013', '%d-%b-%Y'); 
```

# php - 在 MySQL 数据库中存储密码更安全的方法是什么？

> ID：13241366
> 
> 赞同：0
> 
> 时间：2012-11-05T22:22:07.270
> 
> 标签：php, mysql, passwords

> **可能重复：**
> [PHP 2 路加密：我需要存储可以检索的密码](https://stackoverflow.com/questions/5089841/php-2-way-encryption-i-need-to-store-passwords-that-can-be-retrieved)

最近我在阅读一些关于在数据库中存储密码的教程时有点困惑。大多数网站说最好是使用哈希和盐来存储密码，或者将密码分成两部分存储，或者为所有密码添加一个通用密钥。

我看到了几种使用 crypt、sha、sha256、md5 和河豚的方法。

我的问题是，将 crypt 函数与河豚一起使用是安全的，还是有更好/更安全、更有效的方法来存储密码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T22:39:20.960

好吧，除了显而易见的，不存储，散列等......我想说不要使用常规 {MD5, SHA1, SHA256, SHA512, SHA-3, etc} 如果可以的话，即使你可以加盐. 原因可以在以下位置找到：

[http://codahale.com/how-to-safely-store-a-password](http://codahale.com/how-to-safely-store-a-password)

简单地说：使用 bcrypt

您可能想阅读有关此主题的内容

[密码散列、盐和散列值的存储](https://stackoverflow.com/questions/1191112/password-hashing-salt-and-storage-of-hashed-values)
[http://dustwell.com/how-to-handle-passwords-bcrypt.html](http://dustwell.com/how-to-handle-passwords-bcrypt.html)
[https://www.owasp.org/index.php/Password_Storage_Cheat_Sheet](https://www.owasp.org/index.php/Password_Storage_Cheat_Sheet)

# c# - c#方法未找到异常

> ID：13241367
> 
> 赞同：1
> 
> 时间：2012-11-05T22:22:13.583
> 
> 标签：c#, reflection

我知道这个问题被问到了分配，但找不到我做错的地方。我正在使用反射在 Web 服务 GetProduct 和 RequestLicence 方法上执行方法。这两种方法非常相似。

Web服务中的方法：

```
[WebMethod]
public LYS.RegistryService.ProductResponse GetProduct(string productNo)
{
  LYS.RegistryService.ProductResponse r = new LYS.RegistryService.ProductResponse();
  return r;
} 
```

我用来调用网络服务的代码

```
public ServiceResponseBase GetProduct(string productCode)     
{
   object obj = _WebServiceAssembly.CreateInstance("RegisteryService");
   Type typ = obj.GetType();
   object o = typ.InvokeMember(
      "GetProduct", 
      System.Reflection.BindingFlags.InvokeMethod, 
       null, obj, new object[] { productCode });
   return InstantiateObject<ProductResponse>(o);
} 
```

上面的代码工作正常。这是我遇到错误的部分。

```
[WebMethod]
public LYS.RegistryService.ServiceResponse RequestLicence(LYS.BusinesObjects.Customer c, string productCode, bool isDemoLicence, bool isProductLicence)
{
  LYS.RegistryService.ServiceResponse r = new LYS.RegistryService.ServiceResponse();
  return r;
}

public ServiceResponseBase RequestLicence(LYS.BusinesObjects.Customer c, string productCode, bool isDemoLicence, bool isProductLicence)
      {
        object obj = _WebServiceAssembly.CreateInstance("RegisteryService");
        Type typ = obj.GetType();
        object o = typ.InvokeMember("RequestLicence", System.Reflection.BindingFlags.InvokeMethod, null, obj, new object[] { c, productCode, isDemoLicence, isProductLicence });
        return InstantiateObject<ServiceResponse>(o);
      } 
```

我在以下位置获取方法未找到异常异常：

```
object o = typ.InvokeMember("RequestLicence", System.Reflection.BindingFlags.InvokeMethod, null, obj, new object[] { c, productCode, isDemoLicence, isProductLicence }); 
```

这两个函数非常相似，并且 Web 服务中这两个方法的返回类型来自相同的接口。所以做同样的工作会返回相同的对象，但一个正在工作，另一个没有。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:41:16.683

有几件事可以尝试：

*   在调用 typ.InvokeMember 之前创建对象数组。这将有助于隔离问题的根源。

    object[] args = new object[] { c, productCode, isDemoLicence, isProductLicence };

*   将 args 参数传递给 type.InvokeMember 方法

*   如果仍然无法正常工作，请验证所有参数数据类型是否正确。

希望这可以帮助。

# mysql - 删除表 mySql

> ID：13241370
> 
> 赞同：-1
> 
> 时间：2012-11-05T22:22:16.440
> 
> 标签：mysql

我在弄清楚这些表应该为我的脚本添加的顺序时遇到了可怕的麻烦，我现在将发布脚本，如果有人可以帮助他们应该被删除的顺序，那将是一个很大的帮助

```
drop table Registered_Student;
drop table EducateYou_VideoRating;
drop table EducateYou_Video;
drop table EducateYou_Violation;
drop table EducateYou_Member;
drop table Violation_Type;
drop table EducateYou_Comment;
drop table EducateYou_FollowList;
drop table EducateYou_Group;
drop table EducateYou_Admin;

commit;

create table EducateYou_Violation
(
violationId     number (9),
violationStatus char(1) DEFAULT 'X',
videoId number(9),
groupId    number (9),
commentId  number(9),
CONSTRAINT pk_violationId PRIMARY KEY (violationId),
CONSTRAINT fk_x_videoId FOREIGN KEY (videoId) REFERENCES EducateYou_Video,
CONSTRAINT fk_y_groupId FOREIGN KEY (groupId) REFERENCES EducateYou_Group,
CONSTRAINT fk_z_commentId FOREIGN KEY (commentId) REFERENCES EducateYou_Comment
);

create table EducateYou_Video(
videoId         number(9),
videoRef        varchar2(50) NOT NULL,
videoTitle          varchar2(15) NOT NULL,
uploadDate DATE NOT NULL,
videoStatus     char(1) DEFAULT 'X',
videoCategory   varchar2(15) NOT NULL,
regNo           number(6) NOT NULL,
AdminId    number(9),
commentId number(9),
CONSTRAINT pk_videoId PRIMARY KEY (videoId),
CONSTRAINT fk_r_regNo FOREIGN KEY (regNo) REFERENCES EducateYou_Member,
CONSTRAINT fk_p_AdminId FOREIGN KEY (AdminId) REFERENCES EducateYou_Admin,
CONSTRAINT fk_n_commentId FOREIGN KEY (commentId) REFERENCES EducateYou_Comment
);

create table EducateYou_VideoRating(
rating number(2) NOT NULL,
regNo number(9),
videoId number(9),
CONSTRAINT pk_video_rating PRIMARY KEY (videoId, regNo),
CONSTRAINT fk_x_videoId FOREIGN KEY (videoId) REFERENCES EducateYou_Video,
CONSTRAINT fk_z_regNo FOREIGN KEY (regNo) REFERENCES EducateYou_Member
);

create table EducateYou_Admin
(
AdminId     number(9),
firstName           varchar2(15),
surname         varchar2(15),
adminActions    varchar2(40),
CONSTRAINT pk_AdminId PRIMARY KEY (AdminId)
);

create table EducateYou_Group(
groupID         number(5) NOT NULL,
groupname       varchar2(15) NOT NULL,
regNo           number(6) NOT NULL,
CONSTRAINT pk_groupID PRIMARY KEY (groupID),
CONSTRAINT fk_i_regNo FOREIGN KEY (regNo) REFERENCES EducateYou_Member
);

create table EducateYou_Comment(
commentId       number(9),
commentStatus       char(1) DEFAULT 'A',
commentTime             timestamp,
counter   number(5) DEFAULT 5,
educateYouComment       varchar2(50),
regNo           number(6) NOT NULL,
CONSTRAINT pk_commentId PRIMARY KEY (commentId),
CONSTRAINT fk_b_regNo FOREIGN KEY (regNo) REFERENCES EducateYou_Member
);

create table EducateYou_FollowList(
followListID number(9),
regNo        number(9),
CONSTRAINT pk_followListID PRIMARY KEY (followListID),
CONSTRAINT fk_z_regNo FOREIGN KEY (regNo) REFERENCES EducateYou_Member
);

create table Violation_Type 
(
 violation_TypeId varchar2(9),
 violationId number(9),
 CONSTRAINT pk_violation_TypeId PRIMARY KEY (violation_TypeId, violationId ),
 CONSTRAINT fk_m_violationId FOREIGN KEY (violationId) REFERENCES EducateYou_Violation
 );

 create table EducateYou_Member
(
regNo           number(6),
status          char(1) DEFAULT 'A',
collegeId       varchar2(9) NOT NULL,
CONSTRAINT pk_regNo PRIMARY KEY (regNo),
CONSTRAINT fk_l_collegeId FOREIGN KEY (collegeId) REFERENCES Registered_Student
);

create table Registered_Student
(
collegeId       varchar2(9),
password        varchar2(9) NOT NULL,
firstname       varchar2(20) NOT NULL,
surname         varchar2(20) NOT NULL,
dob             date         NOT NULL,
street          varchar2(25) NOT NULL,
town            varchar2(10) NOT NULL,
county          varchar2(15) NOT NULL,
college         varchar2(30) NOT NULL,
course          varchar2(10) NOT NULL,
CONSTRAINT pk_collegeId PRIMARY KEY (collegeId)
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:27:11.600

[**删除表语法**](http://dev.mysql.com/doc/refman/5.5/en/drop-table.html)

添加`SET FOREIGN_KEY_CHECKS = 0;`开始在删除表时忽略外键约束，并对所有表使用单个`Drop`命令，`CASCADE`选项如下：

```
SET FOREIGN_KEY_CHECKS = 0;
DROP TABLE IF EXISTS Registered_Student,
     IF EXISTS EducateYou_VideoRating,
     IF EXISTS EducateYou_Video,
     IF EXISTSEducateYou_Violation,
     IF EXISTS EducateYou_Member,
     IF EXISTS Violation_Type,
     IF EXISTS EducateYou_Comment,
     IF EXISTS EducateYou_FollowList,
     IF EXISTS EducateYou_Group,
     IF EXISTS EducateYou_Admin
CASCADE; 
```

或者，**先删除所有约束，然后删除表。**

# elasticsearch - 是否可以将自定义分析器设置为不在弹性搜索中进行标记？

> ID：13241372
> 
> 赞同：13
> 
> 时间：2012-11-05T22:22:30.527
> 
> 标签：elasticsearch

我想将索引项之一的字段视为一个大字符串，即使它可能有空格。我知道如何通过将非自定义字段设置为“未分析”来做到这一点，但是您可以通过自定义分析器使用什么标记器？

我在 elasticsearch.org 上看到的唯一标记器项目是：

*   边缘
*   NGram
*   关键词
*   信
*   小写
*   NGram
*   标准
*   空白
*   图案
*   UAX URL 电子邮件
*   小路
*   等级制度

这些都不是我想要的。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-06T00:43:04.397

[关键字](https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-keyword-tokenizer.html)标记器是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-19T12:55:26.853

关键字标记器并没有真正做到：

搜索时，它将整个查询字符串标记为单个标记，使文本查询的行为类似于术语查询。

我遇到的问题是我想添加过滤器，然后在长文本中搜索索引关键字（关键字分配）。我想说没有可以做到这一点的标记器，并且规范器不能接受必要的过滤器。我的解决方法是在将文本提供给 elasticsearch 之前准备文本。

# python - 如何从带有 HTML 的 Python (Django) 字符串中读取和打印带有换行符的文本？

> ID：13241375
> 
> 赞同：8
> 
> 时间：2012-11-05T22:22:43.743
> 
> 标签：python, html, django, newline

如果有人输入一个短语，例如：

```
I see you driving

round town with the girl I love,

and I’m like: haiku. 
```

（每行之间没有空行，但文本写在三个单独的行上）到网页上的文本框中，然后按下一个按钮，然后通过 存储在数据库中`Django`，该字符串被读回并打印在一个页面，我怎样才能让它在 HTML 页面上打印，而换行符仍在文本中？

因此，不要将其打印为： `I see you driving round town with the girl I love, and I’m like: haiku.`

它会打印为：

```
I see you driving

round town with the girl I love,

and I’m like: haiku. 
```

我知道如果我使用: `(textarea)soAndSo.body(/textarea)`，这会保留用户最初键入文件时文件中的换行符。我怎样才能得到同样的效果，但不必使用`textarea`盒子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T22:58:05.430

`\r\n`虽然用 a 替换换行符`<br/>`绝对是一种选择，但您可能需要考虑[css`white-space`属性](https://developer.mozilla.org/en-US/docs/CSS/white-space)：

```
#haiku {white-space:pre;} 
```

[Fiddled](http://jsfiddle.net/ovfiddle/DCsRj/)，值得注意的是，即使在 IE6+ 上，[该属性也得到了令人惊讶的良好支持](http://www.quirksmode.org/css/whitespace.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T22:25:20.710

包装输出`<pre>`将保留格式，`<pre>soAndSo.body</pre>`

更高级的解决方案是将换行符转换为 HTML 段落或换行符。Django 有内置的过滤器：[linebreaks](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#linebreaks)和[linebreaksbr](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#linebreaksbr)都可以解决问题。

如果你想使用这些，像这样过滤输出：`{{ soAndSo.body|linebreaks }}`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T22:25:50.213

在模板中使用[linebreaksbr](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#linebreaksbr)（或[linebreaks ）过滤器。](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#linebreaks)

> 例如：
> 
> `{{ value|linebreaksbr }}`
> 
> 如果值为`Joel\nis a slug`，则输出为`Joel<br />is a slug`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T22:26:23.317

换行符就在那里，它只是在 HTML 中没有做任何事情。

使用过滤器，例如`{{ content|linebreaksbr }}`

# cakephp - HABTM 选择似乎忽略了 joinTable

> ID：13241382
> 
> 赞同：0
> 
> 时间：2012-11-05T22:23:56.997
> 
> 标签：cakephp, has-and-belongs-to-many

**更新#2——找到的解决方案：** 原来我使用了这个查找：

```
$this->User->Group->find(....) 
```

不是我需要的。要提取我需要使用的用户组：

```
$this->User->find('all',array('conditions' => array('User.id' => $user_id))); 
```

**</更新#2><问题>**

我正在尝试在`Users`表和`Groups`表之间建立 HABTM 关系。问题是，当我发出这个电话时，我：

```
$this->User->Group->find('list'); 
```

发出的查询是：

```
SELECT [Group].[id] AS [Group__id], [Group].[name] AS [Group__name] FROM [groups] AS [Group] WHERE 1 = 1 
```

在这一点上，我只能假设我已经错误地定义了我的关系，因为我希望行为`groups_users`按照约定使用在数据库上定义的表。我的人际关系：

```
class User extends AppModel {
        var $name = 'User';
        //...snip...
    var $hasAndBelongsToMany = array(
        'Group' => array(
            'className'             => 'Group',
            'foreignKey'            => 'user_id',
            'associationForeignKey' => 'group_id',
            'joinTable'             => 'groups_users',
            'unique'                => true,
        )
    );
        //...snip...
}

class Group extends AppModel {
    var $name = 'Group';
    var $hasAndBelongsToMany = array ( 'User' => array(
        'className'             => 'User',
        'foreignKey'            => 'group_id',
        'associationForeignKey' => 'user_id',
        'joinTable'             => 'groups_users',
        'unique'                => true,
    ));
} 
```

我对 HABTM 的理解是错误的吗？我将如何实现这种多对多关系，我可以使用 CakePHP 查询`groups_users`表，以便返回当前经过身份验证的用户关联的组列表？

**更新**

*应用ndm*建议的更改后，我仍然收到一个大数组返回（太大而无法发布），它返回所有组，然后`'User'`如果用户具有该组的成员资格，则返回一个元素。我再次查看了 CakePHP 使用的查询：

```
SELECT 
    [User].[id] AS [User__id], 
    [User].[username] AS [User__username], 
    [User].[password] AS [User__password], 
    [User].[email] AS [User__email], CONVERT(VARCHAR(20), 
    [User].[created], 20) AS [User__created], CONVERT(VARCHAR(20), 
    [User].[modified], 20) AS [User__modified], 
    [User].[full_name] AS [User__full_name], 
    [User].[site] AS [User__site], 
    [GroupsUser].[user_id] AS [GroupsUser__user_id], 
    [GroupsUser].[group_id] AS  [GroupsUser__group_id], 
    [GroupsUser].[id] AS [GroupsUser__id] 
FROM 
    [users] AS [User] JOIN 
        [groups_users] AS [GroupsUser] ON (
        [GroupsUser].[group_id] IN (1, 2, 3, 4, 5) AND 
        [GroupsUser].[user_id] = [User].[id]
    ) 
```

有没有一种简单的方法来改进它，以便我只收到我拥有成员资格的条目的组 ID 和名称？我正在考虑使用：

```
array('conditions'=>array('GroupsUser.user_id'=>$user_id)) 
```

...但我收到关于组表的 sql 错误：

```
SELECT TOP 1 [Group].[name] AS [Group__name], CONVERT(VARCHAR(20), [Group].[created], 20) AS [Group__created], CONVERT(VARCHAR(20), [Group].[modified], 20) AS [Group__modified], [Group].[id] AS [Group__id] FROM [groups] AS [Group] WHERE [GroupsUser].[user_id] = 36 ORDER BY (SELECT NULL) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:56:58.830

我想你只是误解了`list`find 类型是做什么的。

查询完全没问题，`list`查找类型仅用于检索单个模型的记录列表，其中模型[主键](http://book.cakephp.org/2.0/en/models/model-attributes.html#primarykey)用作索引，[显示字段](http://book.cakephp.org/2.0/en/models/model-attributes.html#model-displayfield)用作值。

[http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find-list](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find-list)

# jquery - 可调整大小：调整元素大小超出屏幕末端

> ID：13241384
> 
> 赞同：4
> 
> 时间：2012-11-05T22:23:58.403
> 
> 标签：jquery, jquery-ui

我正在使用 jquery UI 来调整元素的大小。我有一个元素应该可以调整到宽度，例如 1200 像素或 1600 像素（根据用户的喜好）。但是当在这个元素之前有元素时（我将所有元素水平排列），如果鼠标光标到达屏幕的末尾，调整大小的动作就会停止。

你可以在这里测试它：http: [//gopeter.de/clients/dustin/](http://gopeter.de/clients/dustin/)

最右边的框是可调整大小的。

有谁知道如何防止这种情况发生？我应该检查光标位置并在到达终点时扩展元素吗？或者有没有其他的技术？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T12:03:55.440

也许您可以调整正文的大小并滚动以允许连续调整大小：

```
var body = $('body');

$('#resize').resizable({
    handles: "e,s,se",
    resize: function (event, ui) {
        var width = body.width(),
            diff = width - (width - (this.offsetLeft + this.offsetWidth));

        body.width(diff).scrollLeft(diff);
    }
}); 
```

或（少 jQuery）

```
$('#resize').resizable({
    handles: "e,s,se",
    resize: function (event, ui) {
        var width = document.body.clientWidth,
            diff = width - (width - (this.offsetLeft + this.offsetWidth));
        document.body.style.width = diff + 'px';
        document.body.scrollLeft = diff;
    }
}); 
```

这是相关的小提琴：http: [//jsfiddle.net/jeff_mccoy/UpmNq/2/](http://jsfiddle.net/jeff_mccoy/UpmNq/2/)

请注意，您可以通过仅调整每 X 个像素 (!diff % 3) 的大小来加快速度，但调整大小也会有点生涩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T22:32:39.343

最好将调整大小手柄放在左侧。

# knockout.js - KendoUI 网格分配选项

> ID：13241385
> 
> 赞同：0
> 
> 时间：2012-11-05T22:24:11.683
> 
> 标签：knockout.js, kendo-ui

我试图在我的项目中使用 KendoUI Grid。我要绑定到网格的数据源有很多我不希望作为列的额外部分以及其他几个选项。我想知道是否有一种方法可以从 javascript 设置网格的选项，但是当我尝试时，我似乎遇到了“数据”选项的问题。

```
<div data-bind="kendoGrid: $parent.kendoGrid"></div>

....
program = ko.observable(null),
kendoGrid = { data: program.BettingInterest, sortable: true, columnMenu: true,
            columns: [{ field: 'BettingInterestProgramNumber', title: 'Post' }, 
                { field: 'PostPosition', title: 'PP' }, { field: 'MLOdd', title: 'ML' },
                { field: 'FractionalOdd', title: 'Odds' }, 'Jockey', 'Trainer', 'Owner', 
                { field: 'WeightCarried', title: 'Weight' }, { field: 'Medication', title: 'Med' },
                { field: 'ClaimingPrice', title: 'Claiming' }, 'Breed'], 
            scrollable: false, resizable: true
        },
.... 
```

'program' 在一系列级联下拉列表中的最后一个之后被填充 我的网格显示了列等但没有实际数据。我想知道我是否只是缺少一些简单的东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T00:01:15.203

为了使这个属性与绑定一起工作，您需要创建一个表示当前程序的 BettingInterest 的计算对象，以便它可以正确跟踪依赖关系。您的视图模型看起来像：

```
var ViewModel = function() {
    this.program = ko.observable();
    this.programBettingInterest = ko.computed(function() {
       var program = this.program();
        return program ? program.BettingInterest : [];        
    }, this);

    this.myGrid = { data: this.programBettingInterest, sortable: true, columnMenu: true,
        columns: [{ field: 'propA', title: 'propertyA' }, 
            { field: 'propB', title: 'propertyB' }], 
        scrollable: false, resizable: true
    };
}; 
```

示例：http: [//jsfiddle.net/rniemeyer/eqVWs/](http://jsfiddle.net/rniemeyer/eqVWs/)

# actionscript-3 - Flex 3 中的倒带或重置并行效果

> ID：13241386
> 
> 赞同：0
> 
> 时间：2012-11-05T22:24:12.257
> 
> 标签：actionscript-3, apache-flex, flex3, mxml

一旦它已经开始播放，我如何“倒带”或强制从一开始播放平行效果？

代码示例：

```
<mx:Parallel id="parallelEffect" repeatCount="0">
    <mx:Fade alphaTo="1" target="{someTarget}" startDelay="2000" />
    <mx:Fade alphaTo="1" target="{someOtherTarget}" startDelay="4000" />
    <mx:Fade alphaTo="1" target="{thirdTarget}" startDelay="6000" />
    <mx:Fade alphaTo="1" target="{fourthTarget}" startDelay="8000" />
    <mx:Fade alphaTo="1" target="{fifthTarget}" startDelay="10000" />
</mx:Parallel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:27:19.530

使用 end() 方法结束效果，然后调用 play() 从头开始​​。

```
parallelEffect.end();
parallelEffect.play(); 
```

在您的情况下，如果您调用 end ，会将所有目标 alpha 设置为 1。如果您通过调用 play() 再次运行该转换，则转换似乎不起作用，因为它将从 1 的 alpha 转换为 1，因为您尚未设置alphaFrom 值。将 alphaFrom 值设置为 0，看看是否有帮助。

您也可以尝试反向播放，然后结束反向播放。

```
parallelEffect.play(null, true); // play in reverse
parallelEffect.end(); // end it immediately
parallelEffect.play(); // play again 
```

虽然我认为可能会发生其他事情。

# c# - 每个按钮单击的增量数 C# 桌面

> ID：13241387
> 
> 赞同：2
> 
> 时间：2012-11-05T22:24:16.890
> 
> 标签：c#, windows

我正在尝试使用计时器创建一个数学游戏，该计时器可以计算特定时间内正确问题的数量。`int`现在，如果答案正确，我正在尝试每次单击按钮增加一个值。

但它只增加一次，有时不增加：

```
private void button1_Click(object sender, EventArgs e)
{
    int x = Randomnumber.Next(12);
    int z = Randomnumber.Next(12);
    int s = x * z;
    int correct = 0;
    //int cv = +correct;
    textBox2.Text = x.ToString();
    textBox3.Text = z.ToString();
    if (s == Convert.ToInt32(textBox4.Text))
    {
        correct += 1;
        numbercorrect.Text = correct.ToString();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T22:27:50.400

您的主要表单（我假设您正在使用表单）是一个类。

我的建议是将变量声明为表单类的成员，并使用它来保存正确响应的数量。

我想像下面这样;

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        int correct;

        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            //insert logic here
            correct++;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T22:28:05.563

您需要将`int correct`声明移动到**[类范围](http://www.blackwasp.co.uk/CSharpVariableScopes.aspx)**。否则，每次单击时，您都会从新变量开始。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T22:28:24.330

`int correct = 0;`在函数范围内。将其作为类字段移出函数。这样，它将保留其值，而不是`0`在每次点击期间被重置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T22:30:08.370

尝试这个：

```
private int correct = 0;
private void button1_Click(object sender, EventArgs e)
{
    int x = Randomnumber.Next(12);
    int z = Randomnumber.Next(12);
    int s = x * z;
    //int cv = +correct;
    textBox2.Text = x.ToString();
    textBox3.Text = z.ToString();
    if (s == Convert.ToInt32(textBox4.Text))
    {
        correct ++;
        numbercorrect.Text = correct.ToString();
    } 
```

你总是从 0 开始计数，永远不会得到原始值。现在保存数据的变量在函数之外，并在表单加载时初始化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T22:30:41.100

每次单击按钮时，`correct`都将重置为零。尝试`correct`在方法之外声明。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T22:31:00.897

试试看下面的代码：

```
int correct = 0;
tryParse(numbercorrect.Text, out correct); 
```

所以你的代码必须是这样的：

```
private void button1_Click(object sender, EventArgs e)
{
    int x = Randomnumber.Next(12);
    int z = Randomnumber.Next(12);
    int s = x * z;
    int correct = 0;
    int.tryParse(numbercorrect.Text, out correct);
    //int cv = +correct;
    textBox2.Text = x.ToString();
    textBox3.Text = z.ToString();
    if (s == Convert.ToInt32(textBox4.Text))
    {
        correct += 1;
        numbercorrect.Text = correct.ToString();

    } 
```

# iphone - 从 iOS 网络服务调用中读取 gzip 文件

> ID：13241390
> 
> 赞同：0
> 
> 时间：2012-11-05T22:24:44.113
> 
> 标签：iphone, objective-c, ios, gzip

我有一个 iOS 应用程序，`NSURLConnection`用于获取一些数据。当我从响应中打印标题时，这就是我所看到的：

```
"Content-Disposition" = "attachment;filename=test.txt.gz";
"Content-Encoding" = agzip;
"Content-Type" = "application/a-gzip";
Date = "Mon, 05 Nov 2012 22:18:23 GMT";
Server = "Apache-Coyote/1.1";
"Set-Cookie" = "JSESSIONID=3EBBF519202E16BEB1E79D12XXXXXXXXX; Path=/";
"Transfer-Encoding" = Identity;
filename = "test.txt.gz"; 
```

但是，当我尝试读取日志时，文本文件如下所示：

```
NSString *result = [[NSString alloc] initWithData:myData encoding:NSUTF8StringEncoding];
NSLog(@"%@",result); 
```

我明白了`null`。我知道数据在那里，因为当我记录它时它会吐出十六进制，并且我知道该调用有效，因为我已经在 RESTClient 中对其进行了测试。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:54:49.373

如果它是 gzipped 数据，那么它不是 NSUTF8StringEncoded。在尝试转换之前解压缩数据。（假设解压后确实是字符串）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:22:12.247

我最终使用了 ASIHTTPRequest，它可以无缝地处理这个问题。[http://allseeing-i.com/ASIHTTPRequest/How-to-use](http://allseeing-i.com/ASIHTTPRequest/How-to-use)

# python - 读取多个 hdf5 文件并将它们附加到新字典

> ID：13241391
> 
> 赞同：3
> 
> 时间：2012-11-05T22:24:46.033
> 
> 标签：python, dictionary, hdf5, h5py

我有一个`hdf5`文件列表，我想打开这些文件并将适当的值读入新字典并最终写入文本文件。我不一定知道这些值，所以用户将它们定义在一个数组中作为代码的输入。所需文件的数量由用户想要查看的数据的天数定义。

```
new_data_dic = {}

for j in range(len(values)):
    new_data_dic[values[j]] = rbsp_ephm[values[j]]
for i in (np.arange(len(filenames_a)-1)+1):
        rbsp_ephm = h5py.File(filenames_a[i])
        for j in range(len(values)):
            new_data_dic[values[j]].append(rbsp_ephm[values[j]]) 
```

如果我只有一个文件，这很好用，但如果我有两个或更多文件，它似乎关闭了密钥？我不确定这是否正是发生的事情，但是当我问是什么时`new_data_dic`，它给出的值`{'Bfs_geo_a': <Closed HDF5 dataset>,...`不会写入文本文件。我尝试在打开下一个（`rbsp_ephm.close()`）之前关闭 hdf5 文件，但我得到了同样的错误。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:05:22.593

我真的不明白你的问题......你正在尝试创建一个 hdf5 数据集列表？还是您只是忘记了`[()]`访问数据集中的值？

这是一个简单的独立示例，效果很好：

```
import h5py

# File creation 
filenames_a = []
values = ['values/toto', 'values/tata', 'values/tutu']

nb_file = 5
tmp = 0
for i in range(nb_file):
    fname = 'file%s.h5' % i
    filenames_a.append(fname)
    file = h5py.File(fname, 'w')
    grp = file.create_group('values')
    for value in values:
        file[value] = tmp
        tmp += 1
    file.close()

# the thing you want
new_data_dict = {value: [] for value in values}

for fname in filenames_a:
    rbsp_ephm = h5py.File(fname, 'r')
    for value in values:
        new_data_dict[value].append(rbsp_ephm[value][()])

print new_data_dict 
```

它返回：

```
{'values/tutu': [2, 5, 8, 11, 14], 'values/toto': [0, 3, 6, 9, 12], 'values/tata': [1, 4, 7, 10, 13]} 
```

它回答了你的问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:11:09.123

也许不是直接的好解决方案，但您可以尝试将数据提取为 numpy 数组，这是一种更灵活的格式，而不是 h5py 数据集。请参阅下面的操作方法：

```
>>> print type(file['Average/u'])
<class 'h5py.highlevel.Dataset'>
>>> print type(file['Average/u'][:])
<type 'numpy.ndarray'> 
```

以防万一，您应该尝试为循环使用更“pythonic”的方式，即：

```
for j in values:
    new_data_dic[j] = rbsp_ephm[j] 
```

代替：

```
for j in range(len(values)):
    new_data_dic[values[j]] = rbsp_ephm[values[j]] 
```

# delphi - 是否可以将属性连接到嵌入式组件

> ID：13241392
> 
> 赞同：3
> 
> 时间：2012-11-05T22:24:47.170
> 
> 标签：delphi, ide, components, embed, design-time

我想编写一个嵌入其他组件的复杂组件。但我不确定我是否能够通过对象检查器连接到这些组件。

为了澄清，想象一个包含`TDataSources`. 这些 DataSource 组件归该组件所有，在表单上不可见。

现在我想将 a 连接`TDataset`到这些数据源之一，这可能吗，这些数据源会显示在 Dataset 的属性编辑器组合中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T13:27:14.243

可以，但您必须输入（或复制）名称；您不能在 OI 中选择它。

使用下面编写的组件，您可以在 DBGrid`MyComp1.InternalDataSource`的属性中键入例如：`DataSource`

```
uses
  Classes, DB;

type
  TMyComp = Class(TComponent)
  private
    FDataSource: TDataSource;
  public
    constructor Create(AOwner: TComponent);override;
  published
    property DataSource: TDataSource read FDataSource;
  end;

procedure Register;

implementation

procedure Register;
begin
  RegisterComponents('TEST', [TMyComp]);
end;

{ TMyComp }

constructor TMyComp.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);
  FDataSource := TDataSource.Create(Self);
  FDataSource.Name := 'InternalDataSource';
end; 
```

# python - 检查字符串缩进？

> ID：13241399
> 
> 赞同：5
> 
> 时间：2012-11-05T22:25:45.900
> 
> 标签：python, indentation, analysis, lint

我正在为一系列字符串构建分析器。我需要检查每行缩进多少（通过制表符或空格）。

每行只是文本编辑器中的一个字符串。如何检查字符串缩进多少？

或者更确切地说，也许我可以检查字符串前有多少空格或 \t，但我不确定如何。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-05T22:30:33.757

要计算字符串开头的空格数，您可以在左侧剥离（删除空格）字符串和原始字符串之间进行比较：

```
a = "    indented string"
leading_spaces = len(a) - len(a.lstrip())
print(leading_spaces) 
# >>> 4 
```

制表符缩进是特定于上下文的......它会根据显示制表符字符的任何程序的设置而变化。这种方法只会告诉您空白字符的总数（每个制表符将被视为一个字符）。

或演示：

```
a = "\t\tindented string"
leading_spaces = len(a) - len(a.lstrip())
print(leading_spaces)
# >>> 2 
```

编辑：

如果您想对整个文件执行此操作，您可能想尝试

```
with open("myfile.txt") as afile:
    line_lengths = [len(line) - len(line.lstrip()) for line in afile] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-05T23:02:46.380

`expandtabs()`我认为 Gizmo 的基本思想很好，并且通过使用字符串对象的方法来扩展它以处理前导制表符和空格的任何混合相对容易：

```
def indentation(s, tabsize=4):
    sx = s.expandtabs(tabsize)
    return 0 if sx.isspace() else len(sx) - len(sx.lstrip())

print indentation("  tindented string")
print indentation("\t\tindented string")
print indentation("  \t  \tindented string") 
```

最后两个打印语句将输出相同的值。

编辑：如果遇到一行所有制表符和空格，我对其进行了修改以检查并返回 0。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-19T07:58:52.190

len() 方法会将制表符 (\t) 计为一个。在某些情况下，它不会按预期运行。所以我的方法是使用 re.sub 然后计算空间。

```
indent_count = re.sub(r'^([\s]*)[\s]+.*$', r'\g<1>', line).count(' ') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-28T01:17:40.840

```
def count_indentation(line) : 
    count = 0 
    try : 
        while (line[count] == "\t") : 
            count += 1 
        return count
    except : 
        return count 
```

# scala - 有人可以解释以下代码片段在 Play 框架（Scala）中的含义吗？

> ID：13241401
> 
> 赞同：1
> 
> 时间：2012-11-05T22:25:48.597
> 
> 标签：scala, forms-authentication, action, playframework-2.0

请看下面的代码

应用程序.scala

```
def Online = Action { implicit request =>
loginForm.bindFromRequest.fold(
  formWithErrors => BadRequest(html.login(formWithErrors)),
  user => Contact.AddOnline("email" -> user._1)
) 
```

其次是

```
trait Secured {

  /**
  * Retrieve the connected user email.
  */
  private def username(request: RequestHeader) =
   request.session.get("email")

  /**
  * Redirect to login if the user in not authorized.
  */
  private def onUnauthorized(request: RequestHeader) = 
  Home.flashing("failure"->"You    are not logged in");

 // --

   /** 
   * Action for authenticated users.
   */
  def IsAuthenticated(f: => String => Request[AnyContent] => Result)=
  Security.Authenticated(username, onUnauthorized) { user =>
  Action(request => f(user)(request))
  } 
```

- 我的问题是我试图调用一段名为`setOnline(user.email)`. 此代码仅在通过身份验证后将某个用户的状态设置为在线。在上面给出的代码中，我想调用我的`setOnline(user.email)`函数，但我不确定我应该在哪里或如何调用。在过去的 4 个小时里，我一直在尝试，但没有任何运气。主要问题是我不明白上面的代码是如何工作的（因为它不是我的代码）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:54:39.333

这段代码......

```
def Online = Action { implicit request =>
loginForm.bindFromRequest.fold(
  formWithErrors => BadRequest(html.login(formWithErrors)),
  user => Contact.AddOnline("email" -> user._1)
) 
```

是将请求绑定到名为 loginForm 的 Form 对象的操作。它将检查表单是否有错误，如果有，那么它将显示带有这些错误的表单。如果没有，那么它将调用 Contact.AddOnline。

和这个...

```
def IsAuthenticated(f: => String => Request[AnyContent] => Result) = 
    Security.Authenticated(username, onUnauthorized) { user =>Action(request => f(user)(request)) 
```

是一个将自己包裹在另一个动作（[动作组合](https://github.com/playframework/Play20/wiki/ScalaActionsComposition)）周围的动作，以确定给定的用户名是否经过身份验证。如果它没有被授权，那么它会调用“onUnauthorized”函数，它会闪烁“你没有登录”。这实际上是行不通的。你应该像这样写你的“onUnauthorized”......

```
 private def onUnauthorized(request: RequestHeader) = 
  Redirect(routes.Home.url).flashing("You    are not logged in") 
```

# php - 从当前 HTML 页面创建 PDF

> ID：13241403
> 
> 赞同：3
> 
> 时间：2012-11-05T22:25:52.433
> 
> 标签：php, html

> **可能重复：**
> [使用 PHP 将 HTML + CSS 转换为 PDF？](https://stackoverflow.com/questions/391005/convert-html-css-to-pdf-with-php)

我在一个基本的 Apache 上，除了默认启用之外没有任何扩展，我想从当前页面创建一个 PDF 文件。

当前页面是 PHP 回显一些变量，但我想从页面上当前显示的 HTML 和文本创建一个 PDF 文档。

类似于 WHMCS 报价系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T22:34:24.613

您可以使用第三方解决方案，例如：

[http://pdfcrowd.com/](http://pdfcrowd.com/)

[http://www.web2pdfconvert.com/](http://www.web2pdfconvert.com/)

[http://html-pdf-converter.com/](http://html-pdf-converter.com/)

我推荐 pdfcrowd.com - 它有一个你可以使用的 API，而且我之前使用过该服务并且没有任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T22:30:09.287

查看[FPDF](http://fpdf.org)、[TCPDF](http://tcpdf.org)、[DomPDF](http://code.google.com/p/dompdf/)或任何其他 PHP PDF 库。

FPDF 非常轻量级，如果您只是呼应变量，它可能非常适合您。

就样式和 css 功能而言，TCPDF 更多的是 HTML->PDF，但文件大小要大一些。它可用于轻松创建发票并使它们看起来不错。

我没有亲自使用过 DomPDF，所以我不会评论它，但它可以完成工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T22:27:41.023

看看[**FPDF**](http://www.fpdf.org/)。

它是一个免费的库，用于在 php 中生成 .pdf 文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T22:30:16.683

我使用 TCPDF 从 HTML 创建 PDF。我认为 DOMPDF 也可以做到这一点

你有几个选择：

[http://php.net/manual/en/book.pdf.php](http://php.net/manual/en/book.pdf.php)

FPDF：[http ://www.fpdf.org/](http://www.fpdf.org/)

TCPDF：[http ://www.tcpdf.org/](http://www.tcpdf.org/)

DOMPDF：[http ://code.google.com/p/dompdf/](http://code.google.com/p/dompdf/)

顺便说一句：[使用 PHP 将 HTML + CSS 转换为 PDF？](https://stackoverflow.com/questions/391005/convert-html-css-to-pdf-with-php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T22:30:49.003

您还可以检查[dompdf](http://code.google.com/p/dompdf/)。它从 HTML 创建 pdf ！它可能更适合您的要求，但我个人更喜欢 FPDF（CSS 有时让我对 domdf 感到疯狂:-)）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T22:33:27.670

我测试过的唯一纯 PHP 解决方案是[mPDF](http://www.mpdf1.com/mpdf/index.php)，它非常适合我的目的。它接受 HTML/CSS 输入并从中生成 PDF。

它需要大量内存，因此您必须增加脚本的内存限制。对我有用的设置是：

```
ini_set('memory_limit', '1024M');
ini_set('pcre.backtrack_limit', 2000000); 
```

# asp.net - 将实体框架对象转换为 JSON（无对象图）

> ID：13241404
> 
> 赞同：1
> 
> 时间：2012-11-05T22:25:57.207
> 
> 标签：asp.net, json, asp.net-mvc-3, entity-framework, json.net

假设我有一个像这样的对象结构

```
Library 1 ---- 1+ Book 1 ---- 1+ Page 
```

我想用一组页面对象序列化一本书的 json 对象。

使用 JSON.net 序列化程序，我可以在不获取循环引用的情况下对其进行序列化，但 JSON 仍然在每一页中包含该书的所有属性，其中包括有关图书馆的数据……可以在其他书中包含数据这是一大堆噪音。

从这个问题的答案 - [Serialize Entity Framework objects into JSON](https://stackoverflow.com/questions/657939/serialize-entity-framework-objects-into-json)，我知道我可以做泛型，但这真的是唯一的方法吗？这似乎是大量的额外工作。特别是如果 Json 结果是 Book 和其中的页面对象数组。

我正在使用实体框架 4.3.1 和 Json.net 4.0.30319 ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T22:46:04.140

您应该查看[序列化属性](http://james.newtonking.com/projects/json/help/index.html?topic=html/SerializationAttributes.htm)。

```
[JsonObject(MemberSerialization.OptIn)]
public class Page
{
    [JsonProperty]
    public string Text { get; set; }

    // not serialized because mode is opt-in
    public Book Book { get; set; }
} 
```

**原始答案**

*在大多数情况下应该首选上述方式，但有些情况还不够。*

有两种方法可以做到这一点。

您可以实现[JsonConverter](http://james.newtonking.com/projects/json/help/index.html?topic=html/T_Newtonsoft_Json_JsonConverter.htm)，并覆盖 WriteJson 方法以仅写入您想要的属性。

```
class BookConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(Book);
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        throw new NotImplementedException();
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        if (value.GetType() == typeof(T2))
        {
            JObject obj = new JObject();
            Book b = value as Book;
            obj["titre"] = b.Name;
            obj["pages"] = b.Pages;
            // This line can also be 
            // obj.WriteTo(writer, this);
            // if you also need change the way pages are serialized.
            obj.WriteTo(writer, null);
        }
        else
        {
            throw new NotImplementedException();
        }
    }
} 
```

你可以这样称呼它：

```
string result = JsonConvert.SerializeObject(
    book,
    new JsonSerializerSettings
    {
        Converters = new JsonConverter[] { new BookConverter() }
    }); 
```

您还可以创建一个 JsonBook 类，并将其序列化。

```
class JsonBook{
    public JsonBook(Book b){/*...*/}
    public List<Pages> l;
    public string title;
    // No reference to Library.
} 
```

# c# - 在请求中可枚举时，ServiceStack 输入字符串的格式不正确

> ID：13241407
> 
> 赞同：3
> 
> 时间：2012-11-05T22:26:16.093
> 
> 标签：c#, servicestack

我有一个非常简单的 Request DTO，只要我填充除`List<int>`. 我也尝试了一个数组，我得到了同样的错误：

**错误代码：**

```
'((ServiceStack.ServiceClient.Web.WebServiceException)($exception)).ErrorCode' threw an exception of type 'System.IndexOutOfRangeException' 
```

**错误信息：**

```
'((ServiceStack.ServiceClient.Web.WebServiceException)($exception)).ErrorMessage' threw an exception of type 'System.IndexOutOfRangeException' 
```

**响应体：**

```
 "ResponseStatus":{
 "ErrorCode":"SerializationException",
 "Message":"KeyValueDataContractDeserializer: Error converting to type: Input string was not in a correct format.",
 "StackTrace":"   at ServiceStack.ServiceModel.Serialization.StringMapTypeDeserializer.PopulateFromMap(Object instance, IDictionary`2 keyValuePairs) in C:\\src\\ServiceStack\\src\\ServiceStack.Common\\ServiceModel\\Serialization\\StringMapTypeDeserializer.cs:line 108
   at ServiceStack.ServiceHost.RestPath.CreateRequest(String pathInfo, Dictionary`2 queryStringAndFormData, Object fromInstance) in C:\\src\\ServiceStack\\src\\ServiceStack\\ServiceHost\\RestPath.cs:line 331
   at ServiceStack.WebHost.Endpoints.RestHandler.GetRequest(IHttpRequest httpReq, IRestPath restPath) in C:\\src\\ServiceStack\\src\\ServiceStack\\WebHost.Endpoints\\RestHandler.cs:line 106
   at ServiceStack.WebHost.Endpoints.RestHandler.ProcessRequest(IHttpRequest httpReq, IHttpResponse httpRes, String operationName) in C:\\src\\ServiceStack\\src\\ServiceStack\\WebHost.Endpoints\\RestHandler.cs:line 62"
} 
```

我不知道该怎么办。它是导致崩溃的简单整数列表。如果我将属性留空并使用 DTO 上的任何其他字符串或整数，它就可以正常工作。我知道 ServiceStack 应该能够处理这个问题。我是 ServiceStack 的 v 3.9。

这是（非常简短的）代码：

```
//DTO
Route("/employee")]
public class EmployeeSearch: IReturn<List<Employee>>
{
    public string FirstNameEquals { get; set; }
    public string LastNameEquals { get; set; }

    ...

    public int[] InDepartment { get; set; }
}

...

//Request
//SearchCriteria is of the above type
result.Employees = _client.Get(result.SearchCriteria); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T01:55:45.577

通过从 3.9.12 升级到 3.9.25解决了[这个问题](https://github.com/ServiceStack/ServiceStack/issues/325)以及这个问题。

# ubuntu - Selenium 节点无法向集线器注册

> ID：13241412
> 
> 赞同：2
> 
> 时间：2012-11-05T22:26:27.723
> 
> 标签：ubuntu, windows-7-x64, selenium-grid

我在作为集线器的机器上运行以下命令（IP 地址：192.168.55.209，操作系统：Ubuntu）：

```
java -jar selenium-server-standalone-2.25.0.jar \ -role hub -port 4444 
```

然后我在另一台机器上作为节点运行下面的另一个命令（操作系统：Windows 7 64bit）：

```
java -jar "selenium-server-standalone-2.25.0.jar" \ -role node -port 5555 -hub http://192.168.55.209:4444/grid/register \browser browserName=firefox,platform=WINDOWS 
```

但我在下面收到错误消息：请帮助找出问题所在。（我已禁用防火墙）

```
> Nov 05, 2012 5:12:37 PM org.openqa.grid.selenium.GridLauncher main
> INFO: Launching a selenium grid node Nov 05, 2012 5:12:38 PM
> org.openqa.grid.internal.utils.SelfRegisteringRemote startRemoteServer
> WARNING: error getting the parameters from the hub. The node may end
> up with wrong timeouts.A JSONObject text must begin  with '{' at
> character 1 17:12:38.064 INFO - Java: Oracle Corporation 23.3-b01
> 17:12:38.066 INFO - OS: Windows 7 6.1 amd64 17:12:38.068 INFO -
> v2.25.0, with Core v2.25.0\. Built from revision 17482 17:12:38.172
> INFO - RemoteWebDriver instances should connect to:
> http://127.0.0.1:5555/wd/hub 17:12:38.174 INFO - Version Jetty/5.1.x
> 17:12:38.174 INFO - Started
> HttpContext[/selenium-server/driver,/selenium-server/driver]
> 17:12:38.175 INFO - Started
> HttpContext[/selenium-server,/selenium-server] 17:12:38.175 INFO -
> Started HttpContext[/,/] 17:12:38.177 INFO - Started
> org.openqa.jetty.jetty.servlet.ServletHandler@508969c3 17:12:38.177
> INFO - Started HttpContext[/wd,/wd] 17:12:38.181 INFO - Started
> SocketListener on 0.0.0.0:5555 17:12:38.181 INFO - Started
> org.openqa.jetty.jetty.Server@19dda5ce 17:12:38.183 INFO - using the
> json request :
> {"class":"org.openqa.grid.common.RegistrationRequest","capabilities":[{"pla
> tform":"VISTA","seleniumProtocol":"Selenium","browserName":"*firefox","maxInstances":5},{"platform":"VISTA","seleniumPro
> tocol":"Selenium","browserName":"*googlechrome","maxInstances":5},{"platform":"VISTA","seleniumProtocol":"Selenium","bro
> wserName":"*iexplore","maxInstances":1},{"platform":"VISTA","seleniumProtocol":"WebDriver","browserName":"firefox","maxI
> nstances":5},{"platform":"VISTA","seleniumProtocol":"WebDriver","browserName":"chrome","maxInstances":5},{"platform":"WI
> NDOWS","seleniumProtocol":"WebDriver","browserName":"internet
> explorer","maxInstances":1}],"configuration":{"port":5555,
> "register":true,"host":"192.168.55.94","proxy":"org.openqa.grid.selenium.proxy.DefaultRemoteProxy","maxSession":5,"hubHo
> st":"192.168.55.209","role":"node","registerCycle":5000,"hub":"http://192.168.55.209:4444/grid/register","hubPort":4444,
> "url":"http://192.168.55.94:5555","remoteHost":"http://192.168.55.94:5555"}}
> 17:12:38.185 INFO - starting auto register thread. Will try to
> register every 5000 ms. 17:12:38.185 INFO - Registering the node to
> hub :http://192.168.55.209:4444/grid/register 17:12:38.189 INFO -
> couldn't register this node : Error sending the registration request.
> 17:12:43.194 INFO - couldn't register this node : hub down or not
> responding. 17:12:48.197 INFO - couldn't register this node : hub down
> or not responding. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T15:55:14.527

我知道这个问题已经存在几个月了，但是我遇到了同样的问题，并且能够通过在 AWS 的防火墙设置中为集线器打开该端口来解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-28T08:41:06.200

您只需要启动集线器。输入命令行“java -jar selenium-server-standalone-2.14.0.jar -role hub”，然后打开另一个终端并输入命令“java -jar”selenium-server-standalone-2.25.0.jar“ \ -role 节点 -port 5555 -hub [http://192.168.55.209:4444/grid/register](http://192.168.55.209:4444/grid/register) \browser browserName=firefox,platform=WINDOW"

# razor - 大部分页面无高亮，编辑时报错

> ID：13241413
> 
> 赞同：1
> 
> 时间：2012-11-05T22:26:29.073
> 
> 标签：razor, asp.net-mvc-4, visual-studio-2012

我正在将解决方案从 VS2010/MVC3/.Net 4 升级到 VS2012/MVC4/.Net 4.5。该解决方案已使用 VS2012 的项目迁移工具进行了升级，我按照[本指南](http://www.dotnetexpertguide.com/2011/12/upgrade-aspnet-mvc-3-project-to-mvc-4.html)将 MVC3 升级到 4。

目前，Razor 给我带来了问题。除了布局页面外，不会出现语法突出显示，当我尝试在视图中移动时，我会得到对话框：

> 等待后台操作完成。操作完成后，此对话框将关闭。

或者我收到一条错误消息，告诉我检查 Visual Studio 活动日志 (C:\Users{User}\AppData\Roaming\Microsoft\VisualStudio\11.0\ActivityLog.xml)，这导致我出现此错误：

> System.NullReferenceException：对象引用未设置为对象的实例。在 Microsoft.VisualStudio.Web.HTML.Implementation.Projection.GrowingSpanTracker.EnsureNoOverlap() 在 Microsoft.VisualStudio.Web.HTML.Implementation.Projection.GrowingSpanTracker.EnsureTrackingPoints() 在 Microsoft.VisualStudio.Web.HTML.Implementation.Projection.GrowingSpanTracker .OnTextBufferChanged(Object sender, TextContentChangedEventArgs e) at Microsoft.VisualStudio.Text.Utilities.GuardedOperations.RaiseEvent[TArgs](Object sender, EventHandler`1 eventHandlers, TArgs args)

日志的 Source 列表示它来自“编辑器或编辑器扩展”。我在这里运行 vanilla VS2012，除了第一方的东西（Microsoft Web Developer Tools、NuGet Package Manager 和 Visual Studio Extensions for Windows Library for JavaScript）之外没有任何扩展。

**编辑：一些额外的细节。如果我创建一个新的解决方案和 MVC4 项目，请添加以下行：**

```
@RenderSection("title", false) 
```

到布局，然后尝试在视图中定义部分：

```
@section title{Stuff} 
```

当我开始在大括号中输入“Stuff”时，我得到了相同的错误/行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T00:02:41.513

事实证明，Razor 中的任何变化都使牙套变得更加……敏感。如果您在布局中定义了这样的部分：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>@RenderSection("title", false) - MyApp</title>
        <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
        <meta name="viewport" content="width=device-width" />
        @Styles.Render("~/Content/css")
        @Scripts.Render("~/bundles/modernizr")
        @RenderSection("css",false)
    </head>
    ... 
```

然后，在使用布局的视图中，尝试*完全像这样*使用该部分（确保您实际键入它，不要复制/粘贴）：

```
@model MyApp.Web.Models.HomeIndexModel
@section title {Lovely Title} 
```

Razor 会在你的 Visual Studio 活动日志中抛出一个错误并抛出一个错误。突出显示和大多数 Intellisense 支持也将无法正常工作。经过反复试验，我发现如果您基本上从不将大括号放在同一行上，它就可以正常工作。所以，这样写：

```
@model MyApp.Web.Models.HomeIndexModel
@section title {
    Lovely Title
} 
```

它会正常工作。

# java - 使用泛型对整数数组进行排序（Java）

> ID：13241414
> 
> 赞同：5
> 
> 时间：2012-11-05T22:26:35.677
> 
> 标签：java, arrays, generics

我是一名二年级计算机科学专业的学生，​​目前正在学习 Java，我们最近开始使用泛型。我有一个任务，我得到了一个使用泛型的排序算法列表，并负责使用它们对整数列表（不是原始整数）进行排序。由于排序类使用扩展 Comparable 的泛型，我认为简单地将 Integer 数组交给它们不会有问题，但构建输出不断出现不兼容的类型。

相关代码如下；

主程序的一部分

```
final int NUMITEMS = 100000;
Integer[] list = new Integer[NUMITEMS];
int dataSize = 0;

//method reads contents of a file into array and returns number of objects
System.out.println((dataSize = readDataFile(list)));

SelectionSort SS = new SelectionSort(list, dataSize);//problem is here 
```

以及按原样提供和预期使用的 SelectionSort 算法

```
class SelectionSort<T extends Comparable<? super T>> implements SortAlgorithm<T>  {

public void  sort ( T [ ] theArray,   int size ) {

  for (int last = size-1; last > 0 ; last--)
  {
     int largest = 0;
     for (int scan = 1; scan <= last; scan++)
        if (theArray[scan].compareTo(theArray[largest])>0)
           largest = scan;

     /** Swap the values */
     T temp = theArray[largest];
     theArray[largest] = theArray[last];
     theArray[last] = temp;
  }
} // method selectionSort 
```

我遇到的问题是声明 SelectionSort，它返回一个错误，即构造函数不能应用于给定类型。从我在这里和其他地方的搜索中读到的内容，在使用整数时通常会遇到这种问题，但我不明白为什么它不适用于整数。对这个问题的任何见解将不胜感激，因为我仍在接受泛型的概念。提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T22:39:28.490

这应该可以解决问题：

```
SelectionSort<Integer> ss = new SelectionSort<Integer>();
ss.sort(list, dataSize); 
```

当您想将参数传递给方法时，您试图将参数传递给不存在的构造函数`sort`。

在这里，我使用默认（无参数）构造函数来实例化一个 new `SelectionSort<Integer>`，将其分配给一个 variable `ss`，然后`sort`使用参数调用该实例。

另请注意，如果您只需要调用实例`sort`，则可以跳过分配：

```
new SelectionSort<Integer>().sort(list, dataSize); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T22:29:11.053

你的`SelectionSort`课是通用的。您应该在声明和实例化其中之一时指定类型参数：

```
SelectionSort<Integer> SS = new SelectionSort<Integer>(list, dataSize); 
```

在 Java 7 中，您可以依靠[类型推断](http://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html)来缩短这一点：

```
SelectionSort<Integer> SS = new SelectionSort<>(list, dataSize); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T22:30:05.317

```
SelectionSort SS = new SelectionSort(list, dataSize);//problem is here 
```

应该

```
SelectionSort<Integer> SS = new SelectionSort<Integer>(list, dataSize);//no problem now 
```

您的 SelectionSort 具有参数化类型（实现可比较的某种类型）。`java.lang.Integer`实现`Comparable`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-05T22:29:08.073

```
SelectionSort SS = new SelectionSort(list, dataSize); 
```

需要改为：

```
SelectionSort<Integer> SS = new SelectionSort<Integer>(list, dataSize); 
```

创建对象时必须声明参数化类型

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-05T22:43:38.293

除了已经涵盖的泛型问题之外，我认为代码混淆了构造函数和排序方法。将失败的行更改为：

```
SelectionSort<Integer> SS = new SelectionSort<Integer>();
SS.sort(list, dataSize); 
```

该代码没有显示 SelectionSort 构造函数，只显示了一个排序方法，该方法需要传递给构造函数的参数。该错误消息与仅具有编译器默认提供的无参数构造函数的 SelectionSort 一致。

# sql-server - 如何查询 Sql azure 联合表

> ID：13241417
> 
> 赞同：2
> 
> 时间：2012-11-05T22:26:46.170
> 
> 标签：sql-server, azure, azure-sql-database

我已经阅读了许多联邦教程，但所有这些教程都在处理如何将数据输入联邦，并且不知何故错过了解释如何在数据存在后查询数据的部分。

我在文档中发现您无法在联合表之间加入。我想知道，我究竟如何查询表？我当前的 SP 会继续使用新的联合数据库吗？有没有关于如何查询数据的高级教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T22:58:55.930

您需要首先调用将您连接到正确联合的命令。然后，您可以在该联盟中查询您心中的内容：http: [//msdn.microsoft.com/en-us/library/windowsazure/hh597457.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh597457.aspx)

这对于使用 ADO.NET、数据阅读器等的人来说很重要。

实体框架人员也有一些注意事项：http: [//msdn.microsoft.com/en-us/library/windowsazure/hh689720.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh689720.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T02:09:43.733

如果您正在查看来自联合成员的组合结果，请查看如何针对联合成员发出扇出查询。

请参阅： [SQL Azure 中联合的扇出查询简介（第 1 部分）：多个联合成员的可扩展查询，MapReduce 风格！](http://blogs.msdn.com/b/cbiyikoglu/archive/2011/12/29/introduction-to-fan-out-queries-querying-multiple-federation-members-with-federations-in-sql-azure.aspx)

[SQL Azure 中联合的扇出查询（第 2 部分）：具有 TOP、ORDER BY、DISTINCT 和其他强大聚合的可扩展扇出查询，MapReduce 风格！](http://blogs.msdn.com/b/cbiyikoglu/archive/2012/01/19/fan-out-querying-in-federations-part-ii-summary-queries-fanout-queries-with-top-ordering-and-aggregates.aspx)

# javascript - Zepto 的掩码输入字段

> ID：13241418
> 
> 赞同：0
> 
> 时间：2012-11-05T22:26:47.653
> 
> 标签：javascript, jquery, zepto

按照这个 jQuery 插件的作用来屏蔽输入字段：

[http://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)

我尝试通过更改将其转换为 Zepto：

```
$.fn.extend({ 
```

至

```
$.extend({ 
```

和

```
})(jQuery); 
```

至

```
})(Zepto); 
```

现在我得到：对象＃没有方法“掩码”，不知道从那里去哪里。

是否有任何其他输入屏蔽插件可以与 Zepto 一起使用，或者我在将其转换为 Zepto 时缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:34:57.417

对于 jquery，制作插件如下：

```
$.fn.extend({ 
```

Zepto 需要

```
$.extend($.fn,{ 
```

现在完美运行。

# ios - iOS：可拖动的 UIView（仅垂直）

> ID：13241421
> 
> 赞同：1
> 
> 时间：2012-11-05T22:27:06.780
> 
> 标签：ios, uiview, drag

在我的应用程序中，我有一个小子视图，我想将它拴在右下角，并允许仅垂直移动固定距离。

我有一些代码允许它被拖动，但没有进一步的限制：

```
- (void)viewDragged:(UIPanGestureRecognizer *)gesture
{
    CGPoint translation = [gesture translationInView:keyView];

    // move view
    keyView.center = CGPointMake(keyView.center.x + translation.x,
                           keyView.center.y + translation.y);
// reset translation
[gesture setTranslation:CGPointZero inView:keyView];
} 
```

我在 StackOverflow 上环顾四周并尝试了几种方法，但唯一有效的方法没有考虑对角线运动，而且我找不到任何关于将它拴在一个点上的方法。

那么有谁知道如何做到这一点？非常感谢

编辑：另外，有没有人知道这种性质的主题有一个好的、信息丰富的参考文档（Apple 除外）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:34:42.830

您可以在视图拖动代码中添加一行，说明 keyview.centre.y 是否小于某个阈值（您希望它停止的位置），然后不要将其更改为低于该阈值。例如。

```
keyView.centre = CGPointMake(keyView.center.x,
                       keyView.center.y - translation.y < threshold ? threshold : keyView.center.y); 
```

还删除对 x 参数的更改以阻止它沿对角线移动。

# c++ - Doxygen 优化

> ID：13241422
> 
> 赞同：2
> 
> 时间：2012-11-05T22:27:09.403
> 
> 标签：c++, documentation, doxygen, documentation-generation

我试图弄清楚如何优化 Doxygen 以在合理的时间内在我的项目上运行。我尝试使用标记文件并将我的项目划分为子项目，以便我可以并行化/分配 Doxygen 运行的负载。但是，此功能似乎仅用于链接到外部文档，而不是用于以我想要的方式加入项目。

我使用 ALLEXTERNALS 标签将我的子项目类包含在我的主项目中，但是它们都被标记为 [external]，并且它们只显示在类列表选项卡中，而不显示在类索引或类层次结构选项卡中。

有没有人对我如何并行化/分发 Doxygen 有任何想法，或者，如果没有，有没有人有任何优化技巧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:47:50.227

看看我的答案：[https ://stackoverflow.com/a/8247993/784672](https://stackoverflow.com/a/8247993/784672)

标记文件可用于将项目链接在一起，但它们在集成方面有其局限性（如果结果相同，则不会有性能优势）。也就是说：如果您认为索引中缺少条目，请在错误跟踪器中提交错误报告。

# wcf - MSMQ + WCF、IIS7 - 正在记录消息，但从未触及服务

> ID：13241423
> 
> 赞同：1
> 
> 时间：2012-11-05T22:27:10.883
> 
> 标签：wcf, iis-7, msmq

我认为标准设置。我关注了：http: [//blogs.msdn.com/b/tomholl/archive/2008/07/12/msmq-wcf-and-iis-getting-them-to-play-nice-part-1.aspx](http://blogs.msdn.com/b/tomholl/archive/2008/07/12/msmq-wcf-and-iis-getting-them-to-play-nice-part-1.aspx)主要是，但根据需要使用其他来源。

到目前为止，发生了什么：

1.  客户端发送消息
2.  我在日志消息中看到相应队列的消息
3.  服务似乎从未被调用。我有大量的日志记录可以输出关于服务调用和/或服务方法错误的日志。

我已经关闭了服务，消息仍然出现在日志消息中 - 不知道为什么会这样。

队列：bretrace/bretraceservice.svc（匿名访问，授予完全权限）

客户端 Web.config

```
<netMsmqBinding>
    <binding name="MsmqBreTrace" receiveErrorHandling="Move">
        <security mode="None" />
    </binding>
</netMsmqBinding>

<endpoint address="net.msmq://wcfserver/private/bretrace/bretraceservice.svc" binding="netMsmqBinding"
    bindingConfiguration="MsmqBreTrace" name="MsmqBreTraceService"
    contract="C.BusinessRuleController.Services.BoschProxy.Trace.IQueuingTraceContract"/> 
```

服务 Web.config

```
<bindings>
    <netMsmqBinding>
        <binding name="MsmqBreTraceReader" receiveErrorHandling="Move">
            <security mode="None" />
        </binding>
    </netMsmqBinding>
</bindings>
<services>
    <service name="C.BusinessRuleController.Services.QR.BreTraceService">
        <endpoint address=""
            binding="netMsmqBinding" bindingConfiguration="MsmqBreTraceReader"
            contract="C.BusinessRuleController.Services.BoschProxy.Trace.IQueuingTraceContract" />
    </service>
</services> 
```

我还激活了 system.diagnostics，它似乎正在调用该服务，在我看到的活动下：

*   “过程操作：'http://tempuri.org/IQueuingTraceContract/LogTrace'。” **我不确定 tempuri.org 是否有问题？**
*   “执行 C.BusinessRuleController...” 作为另一个活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:56:51.560

有几件事为我解决了这个问题：

首先，我必须在绑定中设置 security mode='transactional'

```
<netMsmqBinding>
    <binding name="MsmqBreTrace" receiveErrorHandling="Move">
        <security mode="Transactional" />
    </binding>
</netMsmqBinding> 
```

其次，我必须安装 MSMQ Active Directory Integration - 我不必实际启用它，但即使不使用它也必须安装它。这是最让我震惊的，我不想要广告集成，所以我认为我不需要它。原来我错了。

# asp.net - Mod mono 通过 SSH 服务于不同的 Web 应用程序实例

> ID：13241425
> 
> 赞同：1
> 
> 时间：2012-11-05T22:27:11.757
> 
> 标签：asp.net, apache, ssh, mono, application-pool

当我通过 url 访问它时，我有一个在最新的 Mod mono 上运行的 asp.net 应用程序

```
1\. http://myServer.com/App 
```

或者

```
2\. http://localhost:81/App 
```

我为每个地址得到不同的实例。我怎么知道有什么不同？通过检查实际触发两次的 Application_Start 和具有不同值的 asp.net 应用程序变量。

只有当我想通过 SSH 连接到我的服务器时，我才使用第二个地址，并且我使用本地端口转发，以便从我的计算机在端口 81 上发送的每个请求实际上都转发到我服务器上的端口 80。

两个地址都指向同一个物理位置，我不明白为什么每个地址后面实际上有两个不同的实例？

谢谢

**编辑**

具体例子：

这就是我在 Global.asax.cs 中存储应用程序启动事件时间的方式

```
 public static string AppStartTime;

    protected void Application_Start(object sender, EventArgs e)
    {
        AppStartTime = DateTime.Now.ToString();
    } 
```

这是用于远程端口转发到远程 Apache 服务器的**plink.exe的参数：**

```
 -L :7787:localhost:80 
```

如果我在 3 个不同的端口上使用 plink 3 次，当我通过不同的 url 访问同一个 Web 应用程序时，会显示 3 个不同的时间值。

```
 http://localhost:7787/ => value of AppStartTime = time1

    http://localhost:7788/ => value of AppStartTime = time2

    http://localhost:7789/ => value of AppStartTime = time3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:34:20.787

此问题涉及 Web 服务器配置问题，与 Mono 无关。似乎您在 Apache 中配置了两个虚拟服务器/网站，而不是具有两个不同绑定的单个虚拟服务器。

更改您的配置，以便您拥有一个设置了两个绑定的虚拟服务器，并且您将在内存中拥有一个实例。

# c# - 具有多个窗口的 WPF 应用程序，包括非活动：焦点问题

> ID：13241437
> 
> 赞同：0
> 
> 时间：2012-11-05T22:28:13.223
> 
> 标签：c#, .net, wpf, input, focus

我有一个 .Net 4 应用程序，在 WPF 4 中有两个窗口：

*   一种是使用 WS_EX_NOACTIVATE 样式来防止获得焦点。
*   另一个是基本窗口。

只要我不选择基本窗口（它没有获得焦点），“不激活”窗口行为就合适了。But when the basic window is selected, the "no-activate" window can be focused... and gains it when the user clicked on it.

就好像 WPF 认为同一应用程序的两个窗口有权提供焦点，即使它们不应该这样做。如果两个窗口都是 WS_EX_NOACTIVATE，则不会发生此行为。

你有没有遇到过这个问题？我已阅读：[Visual Studio 2010 中的 WPF – 第 3 部分：焦点和激活](http://blogs.msdn.com/b/visualstudio/archive/2010/03/09/wpf-in-visual-studio-2010-part-3-focus-and-activation.aspx)，但没有解决它。

**编辑：**我已经能够通过使用 Popup 作为我的非活动窗口的基类来解决问题。但是，我不想有弹出窗口。为什么 ！？弹出窗口从未获得焦点：有人知道为什么/如何？如何将此行为重现到 Window ？我尝试进入弹出/窗口代码，但不是很清楚！

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:09:01.657

尝试也给它 WS_EX_TOOLWINDOW。 [http://www.daniweb.com/software-development/csharp/threads/273724/a-form-that-doesnt-steal-focus#](http://www.daniweb.com/software-development/csharp/threads/273724/a-form-that-doesnt-steal-focus#)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:12:31.453

好的。我部分解决了这个问题。

The Window already got the focus if it is directly selected, but it is not focused when a component of the window is selected.

只需添加：

```
Focusable = false; 
```

到窗口中包含的任何 WPF 控件，即使先前的焦点是同一应用程序的窗口，它们也永远不会被聚焦。

# c# - 动态创建和访问控制值

> ID：13241438
> 
> 赞同：1
> 
> 时间：2012-11-05T22:28:13.880
> 
> 标签：c#, asp.net, vb.net, visual-studio, webforms

我有一个 DropDownList 在页面加载时从 SQL 填充。

用户将从列表中选择一个项目并单击一个按钮。

根据选择的项目，我需要从 SQL 中获取数据。然后使用结果动态创建带有文本框的表格（用于用户输入）。

填写一些文本框后，用户将单击另一个按钮。我需要遍历动态创建的表，并使用文本框中输入的值进行一些数据处理。

我很难知道何时创建动态表。如果在 Page_Init 上，如何让 DropDownList 选择的值传递给 SQL？如果在 Page_Load 上，我将如何使用用户输入的值重新创建表？

这是在 C# .NET Framework 4.0 中使用 Webforms

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:01:33.553

找到了解决方案。我正在使用 Request.Form[ddl.UniqueID] 来获取 DDL 的选定值。

# java - WELD-000044 无法从 org.jboss.weld.bean-se-module-ProducerField 获取实例

> ID：13241445
> 
> 赞同：4
> 
> 时间：2012-11-05T22:28:32.537
> 
> 标签：java, jpa-2.0, cdi, entitymanager, weld

我正在尝试在 DAO 类中注入一个实体管理器并使用焊接容器对其进行测试，但我不断收到以下异常：

org.jboss.weld.exceptions.NullInstanceException：WELD-000044 无法从 org.jboss.weld 的 org.jboss.weld.bean-se-module-ProducerField-com.playground.cdi_tutorial.beans.Resources.em 获取实例。 bean.builtin.CallableMethodHandler.invoke(CallableMethodHandler.java:60) at org.jboss.weld.util.CleanableMethodHandler.invoke(CleanableMethodHandler.java:43) at javax.persistence.EntityManager_$$_javassist_2.createQuery(EntityManager_$$_javassist_2\. java) 在 com.playground.cdi_tutorial.model.EventDAO.getAllEvents(EventDAO.java:22) 在 com.playground.cdi_tutorial.beans.ValidationService.validateEvenNumbers(ValidationService.java:23) 在 com.playground.cdi_tutorial.beans.MyFactory .sayHi(MyFactory.java:15) 在 com.playground.cdi_tutorial.beans.MyFactoryTest.should_say_bye(MyFactoryTest.java:26) 在 sun.reflect。NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 在 java.lang.reflect.Method.invoke(Method. java:601) 在 org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15) 在 org.junit.runReflectiveCall(FrameworkMethod.java:44)。 runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41) at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20) at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java: 79) 在 org.junit.runners 的 org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)。BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49) at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193) at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52) at org.junit .runners.ParentRunner.runChildren(ParentRunner.java:191) at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42) at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184) at org.junit.runners.ParentRunner.run(ParentRunner.java:236) 在 org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50) 在 org.eclipse.jdt.internal.junit。在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner 的 runner.TestExecution.run(TestExecution.java:38)。 runTests(RemoteTestRunner.java:683) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

我尝试如下注入实体管理器：

```
 @Inject
 @EmProducer
 EntityManager em; 
```

EmProducer 看起来像这样：

```
@Qualifier
@Target({ TYPE, METHOD, PARAMETER, FIELD })
@Retention(RUNTIME)
@Documented
public @interface EmProducer {

    public static final String UNIT_NAME = "cdi-tutorial"; 
```

}

生产者类如下所示：

```
public class Resources {

 @Produces
 @EmProducer
 @PersistenceContext(unitName = EmProducer.UNIT_NAME)
 private EntityManager em;
       ...
    } 
```

在我的测试中，当这行代码被命中 Query q = em.createQuery("from Employee"); 我得到了上面的例外。实体管理器 em 不为空。

PS：我使用 WeldJUnit4Runner (http://www.hostettler.net/blog/2012/04/02/how-to-test-a-jsf-named-bean/) 来运行我的测试。

我将衷心感谢您的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:15:05.780

我建议使用[Arquillian](http://www.jboss.org/arquillian.html)进行这种测试。它使容器内测试变得非常容易（而且快速）。您可以正常注入 EntityManager，而 Arquillian 会负责其余的工作......

# iphone - 一起实现 UIScrollView 和 UIPageControl 的问题

> ID：13241447
> 
> 赞同：1
> 
> 时间：2012-11-05T22:29:04.423
> 
> 标签：iphone, ios

我有一个 320 x 100（宽度和高度）的 UIScrollView 和 4 页的 UIPageControl。我的应用程序在滚动视图的顶部有 4 个图标，但只显示其中一个图标，其他图标的一部分在边缘（因此用户可以知道他们可以滚动）。用户可以点击页面控件以使其向左或向右更改，并相应地更改滚动视图中的图标。在同一点上，用户可以滚动滚动视图，我希望它以他们正在滚动的图标为中心，并且页面控件要更改。我的问题是，每当我在 IOS 模拟器中滚动时，图标都会奇怪地偏移并显示为这样，无论我更改了多少我要移动的参数。它总是跳过第二个图标。

这是 ScrollViewDidScroll 的代码

```
`- (void)scrollViewDidScroll:(UIScrollView *)scrollView{
float roundedValue = floor(_ScrollView.contentOffset.x / 160);//320
NSLog(@"%f",roundedValue);
self.pageControl.currentPage = roundedValue;
[_dataTable reloadData];
}` 
```

这是我的 pageAction 的代码

```
UIPageControl *pageCon = (UIPageControl *)sender;
int pageMoved = pageCon.currentPage;
CGRect movedTo = CGRectMake((pageMoved*190), 0, 320, 100);//160
[_ScrollView scrollRectToVisible:movedTo animated:YES]; 
```

所有的数学都解决了，我只是不确定为什么它会偏移图像并跳过第二个图标。

# c# - 从动作调用动作

> ID：13241452
> 
> 赞同：3
> 
> 时间：2012-11-05T22:29:12.987
> 
> 标签：c#, unity3d, gree

我正在`Unity3d`使用 GREE `c#`API 创建游戏。我正在尝试在排行榜中`Action`为每个（用户名，分数）运行一个。

代码如下：

```
public static void LoadBestScoreFromFriends(Action<FriendAndScore> onComplete)
{
    Gree.Leaderboard.LoadScores(LEADERBOARD_ID,
        UnityEngine.SocialPlatforms.UserScope.FriendsOnly,
        UnityEngine.SocialPlatforms.TimeScope.AllTime,
        1,
        100,
        (IScore[] scores) => {

        foreach (IScore iscore in scores)
        {
            // Since the username is needed, a second
            // call to the API must be done
            Gree.User.LoadUser(iscore.userID, 
            (Gree.User guser) => {
                FriendAndScore friend = new FriendAndScore();
                friend.Name = guser.nickname;
                friend.Score = "" + iscore.value;

                // Run the action for every (nickname, score value)
                onComplete(friend);
            }, (string error) => {
                Debug.Log("Couldn't fetch friend! error: " + error);
            });
        }
    });
} 
```

这里的问题是`iscore.value`它总是一样的。它是`foreach`. 这是有道理的，因为在结束它的循环`LoadUser()`之后完成。`foreach`

我想创建第二种方法来在那里进行调用。就像是：

```
private void GetTheUserAndCallTheAction(Action<FriendAndScore> onComplete, string userID, string score)
{
    Gree.User.LoadUser(userID, 
            (Gree.User guser) => {
                FriendAndScore friend = new FriendAndScore();
                friend.Name = guser.nickname;
                friend.Score = score;
                onComplete(friend);
            }, (string error) => {
                Debug.Log("Couldn't fetch friend! error: " + error);
            });
} 
```

由于我是`C#`新手，我想知道是否有更好的方法来处理这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T22:40:31.670

按照设计 - 这就是在 foreach 循环中构造 lambda 表达式并稍后执行此 lambda 时捕获的工作方式。

修复 - 声明的本地副本`IScore iscore`：

```
foreach (IScore eachScore in scores)
{
   IScore iscore = eachScore; 
```

And [Closing over the loop variable...](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx) by Eric Lippert details the behavior and related issues.

# java - 在Java中访问并行端口？

> ID：13241456
> 
> 赞同：-1
> 
> 时间：2012-11-05T22:30:00.537
> 
> 标签：java, port

如何访问 Java 中的并行端口？我尝试了许多库，例如 parport 和 javax.comm，但没有一个有效。

谁能推荐一个带有并行端口控制的库？

我正在尝试打开 LED，我必须使用 Java 和 Windows XP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T23:57:13.957

由于并行端口的重要性正在下降，因此您必须求助于旧库才能使用它们。

在 WinXP 上使用 Java 中的并行端口相当简单。您有两个基本选择：

1.  [comm.jar](http://www.cs.uml.edu/~fredm/courses/91.305/software/JDK118-javaxcomm.zip)和
2.  [接收发送](http://mirrors.ibiblio.org/pub/mirrors/maven2/org/rxtx/rxtx/2.1.7/rxtx-2.1.7.jar)

您必须仔细阅读安装说明，因为仅安装 jar 文件是不够的。您还需要将一些 .dll 文件 (win32com.dll) 放置到适当的目录中才能正常工作。

还要检查[Oracle Java Communications 3.0 API](http://www.oracle.com/technetwork/java/index-jsp-141752.html) ...

# coldfusionbuilder - ColdFusion Builder 2 自定义键盘快捷键

> ID：13241458
> 
> 赞同：2
> 
> 时间：2012-11-05T22:30:07.090
> 
> 标签：coldfusionbuilder

我想知道是否可以在 CF Builder 2 中创建自定义键盘快捷键，并将所选文本保留并放置在插入文本的代码中。有点像自定义包装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:14:30.527

不完全是，但您可以创建[片段](http://help.adobe.com/en_US/ColdFusionBuilder/Using/WS0ef8c004658c1089-2cf13501121af8ece2c-7ffb.html#WS0ef8c004658c1089-2cf13501121af8ece2c-7ffa)并将它们绑定到一些触发文本。 [Matt Gifford 关于片段的文章](http://www.mattgifford.co.uk/coldfusion-builder-snippets)比官方文档更有用。

# jsf - 如何使用 OmniFaces Components util 获取 XHTML 页面上组件的 HTML/CSS 属性值？

> ID：13241466
> 
> 赞同：0
> 
> 时间：2012-11-05T22:30:37.153
> 
> 标签：jsf, primefaces, components, omnifaces, primefaces-extensions

我有以下呈现的 HTML：

```
<div id="ordersBrowseForm:ordersBrowseWestPane" class="ui-layout-west ui-widget-content ui-corner-all ui-layout-pane ui-layout-pane-west" data-combinedposition="west" style="position: absolute; margin: 0px; left: 0px; right: auto; top: 116px; bottom: 0px; height: 312px; z-index: 0; width: 198px; display: none; visibility: visible; "><div class="ui-widget-header ui-corner-top pe-layout-pane-header"> 
```

由于我为这个 PrimeFaces 扩展 layoutPane (pe:layoutPane) 分配了一个 ID，我想通过 OmniFaces Components.findComponent 和 JSF UIComponent 检查来自 bean 的显示 CSS。

基于 BalusC 对以下内容的回答：

[访问传递给扩展 PrimeFaces 组件的属性](https://stackoverflow.com/questions/11204262/accessing-attributes-passed-to-extended-primefaces-component)

我的 bean 中有以下内容：

```
UIComponent westPane = (UIComponent) Components.findComponent("ordersBrowseForm:ordersBrowseWestPane");
if (westPane != null) {
    Map attrs = westPane.getAttributes();
    String paneStyle = (String) attrs.get("style");
    if (debug) {
        String log;
        log = "LayoutController.handleResize(): ordersBrowseForm:ordersBrowseWestPane style = " +
              (paneStyle != null ? paneStyle : "null");
        System.out.println(log);
    }
} 
```

服务器日志始终包含以下内容：

```
INFO: LayoutController.handleResize(): ordersBrowseForm:ordersBrowseWestPane style = null 
```

请指教。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:38:05.553

那是不可能的。`UIComponent#getAttributes()`仅返回在视图端的组件上显式声明的属性：

```
<p:someComponent style="position: absolute;"> 
```

或在渲染之前或期间以编程方式：

```
component.getAttributes().put("style", "position: absolute;"); 
```

它不返回生成的 HTML 元素的属性。尚不完全清楚您要做什么，但您可能会考虑使用 JavaScript 在客户端执行任务。

# ember.js - 您如何在考虑单元测试的情况下构建您的 Ember 应用程序？

> ID：13241467
> 
> 赞同：2
> 
> 时间：2012-11-05T22:30:37.933
> 
> 标签：ember.js

我以前没有用 JS 编写过单元测试，而且我还在学习 ember 和 javascript，所以请原谅这个问题的简单性。

Ember 应用程序的结构首先为应用程序创建一个命名空间，如下所示：

```
MyApp = Ember.Application.create({...}) 
```

然后你会像这样定义一个模型：

```
MyApp.SomeModel = DS.Model.extend({...}) 
```

但是，当我为 编写单元测试时，当您只是对模型进行单元测试时`SomeModel`，实例化一个实例似乎是不正确的，尤其是在所有注入等在幕后进行的情况下。`Ember.Application``Router`

但是，要定义模型，您需要 app 命名空间`MyApp.SomeModel`.. 并且该 app 命名空间是在`Application`实例化时创建的（如果您遵循 Ember 命名空间约定）。

那么如何在不实例化应用程序的情况下对模型进行单元测试呢？您是否为应用程序命名空间创建了一个模拟？

我正在使用茉莉花顺便说一句。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T05:41:22.583

我创建了一个 Ember.Application 的虚拟实例。这样做的成本并不是特别高。

# c# - 在转发器中更改文本框的只读属性

> ID：13241470
> 
> 赞同：0
> 
> 时间：2012-11-05T22:30:52.130
> 
> 标签：c#, asp.net, textbox

在我的 aspx 页面上，我有一个带有 5 个文本框和 1 个图像按钮的中继器来编辑这些文本框是只读的行，要编辑它们我需要它们不是只读的。

在我的背后代码中，我正在使用：

```
protected void EditRecipeInfo(object sender, CommandEventArgs e)
{
    ImageButton ib = sender as ImageButton;

    TextBox titleTXT = (TextBox)ib.FindControl("titleRepeat");
    TextBox qtyTXT = (TextBox)ib.FindControl("qtyRepeat");
    TextBox uomTXT = (TextBox)ib.FindControl("uomRepeat");
    TextBox prepTXT = (TextBox)ib.FindControl("prepRepeat");
    TextBox orTXT = (TextBox)ib.FindControl("orRepeat");

    titleTXT.ReadOnly = false;
    qtyTXT.ReadOnly = false;
    uomTXT.ReadOnly = false;
    prepTXT.ReadOnly = false;
    orTXT.ReadOnly = false;
    ////
} 
```

但是当我触发这个事件时，断点告诉我该属性被设置为 false，但是当我单击删除文本框中的任何值时，它仍然像只读一样

**更新：**

```
 <asp:Repeater ID="ingredRepeater" runat="server">
                <HeaderTemplate>
                    <table style="width: 100%">
                        <tr>
                            <th></th>
                            <th></th>
                            <th><h2>Title</h2></th>
                            <th><h2>Qty.</h2></th>
                            <th><h2>UoM</h2></th>
                            <th><h2>Prep.</h2></th>
                            <th><h2>Alternate</h2></th>
                        </tr>
                </HeaderTemplate>
                <ItemTemplate>
                    <tr>
                        <td>
                            <asp:ImageButton Style="height: 25px; width: 25px;" ImageUrl="/img/edit.png" Visible="true"
                                ID="editRecipeInfo" AutoPostBack="true" runat="server" OnCommand="EditRecipeInfo" CommandName='<%# DataBinder.Eval(Container, "DataItem.DetailID") %>' />
                        </td>
                        <td>
                            <asp:ImageButton ImageUrl="/img/RedX.png" ID="button2" runat="server" Height="20"
                                Width="20" CommandName='<%# DataBinder.Eval(Container, "DataItem.DetailID") %>'
                                OnCommand="deleteRecipeView" />
                        </td>
                        <td>
                            <asp:TextBox AutoPostBack="true" ReadOnly="true" ID="titleRepeat" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.Name") %>'
                                size="45" />
                        </td>
                        <td>
                            <asp:TextBox  AutoPostBack="true" ReadOnly='true' ID="qtyRepeat" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.Quantity") %>'
                                size="10" />
                        </td>
                        <td>
                            <asp:TextBox AutoPostBack="true"  ReadOnly='true' ID="uomRepeat" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.UnitsOfMeasure") %>'
                                size="10" />
                        </td>
                        <td>
                            <asp:TextBox AutoPostBack="true"  ReadOnly='true' ID="prepRepeat" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.Prep") %>'
                                size="10" />
                        </td>
                        <td>
                            <asp:TextBox AutoPostBack="true"  ReadOnly='true' ID="orRepeat" runat="server" Text='<%# DataBinder.Eval(Container, "DataItem.AlternativeIngredients") %>'
                                size="20" />
                        </td>
                    </tr>
                </ItemTemplate>
                <FooterTemplate>
                    </table>
                </FooterTemplate>
            </asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:25:00.020

确保在将 ReadOnly 属性设置为 true 后没有重新绑定中继器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T09:39:51.167

我同意@Tariqulazam，标记会有所帮助。

假设您的代码来自 ItemCommand 事件处理程序，我很惊讶地看到 FindControl 应用于 ImageButton。

我猜你的代码应该是这样的：

```
void rpAcces_ItemCommand(object source, RepeaterCommandEventArgs e)
  {
  //...
  ImageButton ib = sender as ImageButton;

  TextBox titleTXT = (TextBox)e.Item.FindControl("titleRepeat");
  TextBox qtyTXT = (TextBox)e.Item.FindControl("qtyRepeat");
  TextBox uomTXT = (TextBox)e.Item.FindControl("uomRepeat");
  TextBox prepTXT = (TextBox)e.Item.FindControl("prepRepeat");
  TextBox orTXT = (TextBox)e.Item.FindControl("orRepeat");

  titleTXT.ReadOnly = false;
  qtyTXT.ReadOnly = false;
  uomTXT.ReadOnly = false;
  prepTXT.ReadOnly = false;
  orTXT.ReadOnly = false;
  //...
 } 
```

此外，请注意，您无法在页面生命周期的后期重新绑定转发器而不会丢失这些更改。并注意您的 TextBoxes 上设置的任何*Enabled属性*

再一次，没有完整的代码很难回答。

# android - Home 类型的 onOptionItemSelected(MenuItem) 方法必须覆盖超类方法

> ID：13241473
> 
> 赞同：2
> 
> 时间：2012-11-05T22:31:05.920
> 
> 标签：android, overriding

我在以下代码中收到此消息：

```
public boolean onOptionItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.x:
            Log.i(Home, "klick");

        case R.id.y:
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

我总是得到这个错误：

> Home 类型的 onOptionItemSelected(MenuItem) 方法必须覆盖超类方法

我搜索了整个互联网，stackoverflow上有一些帖子，但是！我的编译器设置为 1.6，我的项目也不例外。

为什么它必须覆盖超类方法？这个方法不是超类方法吗，我用的是super.onOptions...？

我想要一个@Override，因为我在某个地方看到过它，而且我的代码似乎无法正常工作。

这是我在这里的第一个问题，所以如果我忘记了什么，请不要难过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T22:39:30.757

试试**onOptionsItemSelected(..)**

你错过了's'，你有 onOptionItemSelected(..)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T21:46:29.467

好吧，我不知道为什么编译器找不到超类方法，但是..这就是问题所在。

如果您使用 @Override 注释您的方法，编译器会尝试在超类中找到该方法但它没有找到它（也许，因为该方法的第一次出现是两个或三个类之前，而不是之前。

解决方案：删除@Override 注释。编译器不会检查超类方法，您的代码将编译正常。

没有注释，您的代码将正常工作。

PD。对不起我糟糕的英语。C

乌普斯。这是真的。该方法是带有大“s”的 onOptionsItemSelected。这就是为什么您的覆盖注释不起作用的原因，编译器找不到超类方法。

# javascript - 如何在控制器操作方法中运行/触发 javascript？

> ID：13241474
> 
> 赞同：1
> 
> 时间：2012-11-05T22:31:10.387
> 
> 标签：javascript, jquery, asp.net-mvc-3

我正在使用 .Net 4.0，目前 Internet 上的许多解决方案都不起作用，例如不存在的库。

整个故事是：我有一个主视图，其中有 1 个 iframe。通过单击主视图上的 [submit] 按钮，它将触发自己的 POST 操作以及我使用 javascript 使其触发 iframe 的 POST，如下所示：

```
function TriggerIframeAction() {
    var iframe = document.getElementById("myIframe");
    var iframeForm = iframe.contentWindow.document.getElementById("myIframeForm");
    iframeForm.submit();
} 
```

但是我需要确保主机的帖子总是在 iframe 的帖子之前运行，所以我想让主机的动作来触发那个 JS。

我知道 Ajax.BeginForm(...OnSuccess...) 可能会有所帮助。然而，这似乎只是意味着连接成功？如果我将验证代码放在主框架的操作中并设置 ModelState.IsValid = false，“OnSuccess”（因此 iframe 帖子）仍将被执行，这不是我想要的......

如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T06:42:36.597

```
<form id="form1" method="POST" action="/controller/action">

</form> 
```

JS：

```
$(function(){
    var form = $('#form1'),
        url = form.attr('action'),
        formData = form.serialize();

    form.submit(function(){
        $.post(action, formData, function(result){
            if(result)
                TriggerIframeAction();
        })
        return false;
    }
});

function TriggerIframeAction() {
    var iframe = document.getElementById("myIframe");
    var iframeForm = iframe.contentWindow.document.getElementById("myIframeForm");
    iframeForm.submit();
} 
```

控制器：

```
public ActionResult Action(FormCollection collection)
{
    // do something
    return Json(true);
} 
```

# javascript - 如何在 D3 图表的标签中包含换行符？

> ID：13241475
> 
> 赞同：66
> 
> 时间：2012-11-05T22:31:15.827
> 
> 标签：javascript, svg, d3.js

我正在使用 D3 生成条形图（我改编了[此示例](http://bl.ocks.org/3885304)中的代码）。我在*x*轴上使用的标签每个都有几个词长，因为这会使所有标签重叠，我需要跨行打破这些标签。（如果我可以用换行符替换每个标签中的所有空格就可以了。）

我最初通过用文字换行符 ( ) 替换空格`&#xA;`并设置`xml:space="preserve"`标签的`<text>`元素来尝试此操作。不幸的是，事实证明 SVG 不尊重这个属性。接下来，我尝试将每个单词包装成`<tspan>`我以后可以使用的样式。我通过这个函数传递了每个标签：

```
function (text) {
    return '<tspan>' + text.replace(/ /g, '</tspan><tspan>') + '</tspan>';
} 
```

但这只是将文字`<tspan>`s 放入输出中。如何将我的文本标签包装在`tspan`s 中（或做其他事情），以使我的标签不重叠？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-11-07T18:32:33.987

I ended up using the following code to break each *x*-axis label across lines:

```
var insertLinebreaks = function (d) {
    var el = d3.select(this);
    var words = d.split(' ');
    el.text('');

    for (var i = 0; i < words.length; i++) {
        var tspan = el.append('tspan').text(words[i]);
        if (i > 0)
            tspan.attr('x', 0).attr('dy', '15');
    }
};

svg.selectAll('g.x.axis g text').each(insertLinebreaks); 
```

Note that this assumes that the labels have already been created. (If you follow [the canonical histogram example](http://bl.ocks.org/3048450) then the labels will have been set up in just the way you need.) There also isn't any real line-breaking logic present; the function converts every space into a newline. This fits my purposes fine but you may need to edit the `split()` line to be smarter about how it partitions the parts of the string into lines.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-06T16:04:29.640

SVG 文本元素不支持文本换行，因此有两种选择：

*   将文本拆分为多个 SVG 文本元素
*   在 SVG 之上使用覆盖 HTML div

[在此处](https://github.com/mbostock/d3/issues/60#issuecomment-856549)查看 Mike Bostock 对此的评论。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-04-13T17:05:26.730

我发现有用的是使用“foreignObject”标签而不是文本或 tspan 元素。这允许 HTML 的简单嵌入，允许单词自然中断。需要注意的是满足特定需求的对象的整体尺寸：

```
var myLabel = svg.append('foreignObject')
    .attr({
        height: 50,
        width: 100, // dimensions determined based on need
        transform: 'translate(0,0)' // put it where you want it...
     })
     .html('<div class"style-me"><p>My label or other text</p></div>'); 
```

您在此对象中放置的任何元素稍后都可以使用 d3.select/selectAll 获取，以动态更新文本值。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-02-15T09:10:05.530

环顾四周后，我发现 Mike Bostock 提供了一种解决方案，使您能够将文本环绕。

[http://bl.ocks.org/mbostock/7555321](http://bl.ocks.org/mbostock/7555321)

在我的代码上实现它（我正在使用折叠树图）。我只是复制了“包装”方法。

然后附加以下内容

```
 // Standard code for a node    
    nodeEnter.append("text")
        .attr("x", function(d) { return d.children || d._children ? -10 : 10; })
        .attr("dy", ".35em")
        .text(function(d) { return d.text; })
        // New added line to call the function to wrap after a given width
        .call(wrap, 40); 
```

我看不出有任何理由这不适用于强制导向、条形或任何其他模式

修正案 ：

对于阅读此内容并使用可折叠图形的任何人，我已将 wrap 函数修改为以下内容。“x”属性中的更改正确设置了对齐方式，递增行号是在单独的行上执行的，因为原始代码中指出了问题，并且“y”已硬设置为零，否则会出现行间距增加的问题每一行。

```
function wrap(text, width) {
    text.each(function() {
        var text = d3.select(this),
        words = text.text().split(/\s+/).reverse(),
        word,
        line = [],
        lineNumber = 0,
        y = text.attr("y"),
        dy = parseFloat(text.attr("dy")),
        lineHeight = 1.1, // ems
        tspan = text.text(null).append("tspan").attr("x", function(d) { return d.children || d._children ? -10 : 10; }).attr("y", y).attr("dy", dy + "em");     
        while (word = words.pop()) {
            line.push(word);
            tspan.text(line.join(" "));
            var textWidth = tspan.node().getComputedTextLength();
            if (tspan.node().getComputedTextLength() > width) {
                line.pop();
                tspan.text(line.join(" "));
                line = [word];
                ++lineNumber;
                tspan = text.append("tspan").attr("x", function(d) { return d.children || d._children ? -10 : 10; }).attr("y", 0).attr("dy", lineNumber * lineHeight + dy + "em").text(word);
            }
        }
    });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-14T03:38:34.397

包装长标签也有[这个](http://bl.ocks.org/mbostock/7555321#index.html)答案。

```
<!DOCTYPE html>
<meta charset="utf-8">
<style>

.bar {
  fill: steelblue;
}

.bar:hover {
  fill: brown;
}

.title {
  font: bold 14px "Helvetica Neue", Helvetica, Arial, sans-serif;
}

.axis {
  font: 10px sans-serif;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.x.axis path {
  display: none;
}

</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>

var margin = {top: 80, right: 180, bottom: 80, left: 180},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var x = d3.scale.ordinal()
    .rangeRoundBands([0, width], .1, .3);

var y = d3.scale.linear()
    .range([height, 0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left")
    .ticks(8, "%");

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

d3.tsv("data.tsv", type, function(error, data) {
  x.domain(data.map(function(d) { return d.name; }));
  y.domain([0, d3.max(data, function(d) { return d.value; })]);

  svg.append("text")
      .attr("class", "title")
      .attr("x", x(data[0].name))
      .attr("y", -26)
      .text("Why Are We Leaving Facebook?");

  svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis)
    .selectAll(".tick text")
      .call(wrap, x.rangeBand());

  svg.append("g")
      .attr("class", "y axis")
      .call(yAxis);

  svg.selectAll(".bar")
      .data(data)
    .enter().append("rect")
      .attr("class", "bar")
      .attr("x", function(d) { return x(d.name); })
      .attr("width", x.rangeBand())
      .attr("y", function(d) { return y(d.value); })
      .attr("height", function(d) { return height - y(d.value); });
});

function wrap(text, width) {
  text.each(function() {
    var text = d3.select(this),
        words = text.text().split(/\s+/).reverse(),
        word,
        line = [],
        lineNumber = 0,
        lineHeight = 1.1, // ems
        y = text.attr("y"),
        dy = parseFloat(text.attr("dy")),
        tspan = text.text(null).append("tspan").attr("x", 0).attr("y", y).attr("dy", dy + "em");
    while (word = words.pop()) {
      line.push(word);
      tspan.text(line.join(" "));
      if (tspan.node().getComputedTextLength() > width) {
        line.pop();
        tspan.text(line.join(" "));
        line = [word];
        tspan = text.append("tspan").attr("x", 0).attr("y", y).attr("dy", ++lineNumber * lineHeight + dy + "em").text(word);
      }
    }
  });
}

function type(d) {
  d.value = +d.value;
  return d;
}

</script> 
```

和数据文件“data.tsv”：

```
name    value
Family in feud with Zuckerbergs .17
Committed 671 birthdays to memory   .19
Ex is doing too well    .10
High school friends all dead now    .15
Discovered how to “like” things mentally    .27
Not enough politics .12 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-03-28T19:12:13.277

利用`<tspan>`

在 nv.d3 中

nv.models.axis = function() {

...

```
 .select('text')
            .attr('dy', '0em')
            .attr('y', -axis.tickPadding())
            .attr('text-anchor', 'middle')
            .text(function(d,i) {
              var v = fmt(d);
              return ('' + v).match('NaN') ? '' : v;
            }); 
```

将所有出现的 .text( 更改为 .html(

# grails - 如何为 Grails 域类实现投票？

> ID：13241477
> 
> 赞同：0
> 
> 时间：2012-11-05T22:31:23.963
> 
> 标签：grails, frameworks, grails-orm, voting, voting-system

我有一个 Book 类，需要实现是/否投票功能。我的域类如下所示：

```
class Book {
   String title
   static hasMany = [votes: Vote]
}

class User {
  String name
  static hasMany = [votes: Vote]
}

class Vote {
  boolean yesVote
  static belongsTo = [user: User, book: Book]
} 
```

为图书课实施投票的最佳方式是什么。我需要以下信息：

*   一本书在所有投票中的平均 yesVote 是多少（是或否）？
*   如何检查特定用户是否进行了投票？

实现平均 yesVote 计算以使性能不下降的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:58:36.633

我会在 Book 中添加一个 totalVotes。为每个是票递增。然后一个简单的 count() 对一本书的投票以及 totalVotes 值就可以满足您的需求。

更新：回答您的评论问题：

1.  `def yesVotes = Vote.findAllByBookAndYesVote(bookInstance, Boolean.TRUE)`

2.  `def votes = Vote.findAllByBook(bookInstance)`

3.  `def userVote = Vote.findByUserAndBook(userInstance, bookInstance)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:03:07.890

好吧，我的意见是：

1.  第一种方式 - 一个带有方法 addVote(user, book, true/false) 的服务，以及另外两个方法 addPositiveVote(user, book) 和 addNegativeVote(user, book)；

2.  第二种方式 - 业务规则应该在域中，在书 addVote(user, true/false) 中放置一个方法 addVote。

这是一个简单的过程，性能不下降，我的考虑只考虑建模。

对不起，我的英语不好。

# ruby-on-rails - 在使用 ransack gem 进行表单排序时不起作用

> ID：13241481
> 
> 赞同：0
> 
> 时间：2012-11-05T22:31:42.003
> 
> 标签：ruby-on-rails, ruby, ransack

我一直在尝试（到目前为止没有成功）使用 ransack gem 提供的开箱即用的形式排序，不幸的是它的结果是一个空表单。

**这是我到目前为止所做的：**

```
Controller:
    class LandingController < ApplicationController
      layout "landing2"
      def index
        @zones = Zone.all
        @zone_id ||= 1
        @q = Property.search(params[:q])
        @q.build_sort if @q.sorts.empty?
      end
    end 
```

**查看（部分）：**

```
<%= search_form_for @q, :url => home_path, :html => { :method => :get } do |f| %>
  <%= f.sort_fields do |s| %>
    <%= s.sort_select %>
  <% end %>
  <%= f.submit "Sort" %>
<% end %> 
```

**结果是：**

![Ransack 排序表（空）](../Images/d0960f8e8f1c4775d9c4ee15d47810a3.png)

有谁知道可能出了什么问题？

感谢所有的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:03:08.700

在您的控制器中，您错过了这条线

```
@properties = @q.result(:distinct => true) 
```

应该在之后

```
@q = Property.search(params[:q]) 
```

# tcl - Tcl 刷新命令返回错误

> ID：13241482
> 
> 赞同：3
> 
> 时间：2012-11-05T22:31:45.003
> 
> 标签：tcl

我从 Tcl`flush`命令中得到了这个错误：

```
error flushing "stdout": I/O error 
```

任何想法为什么会发生？此外，手册页没有说明`flush`返回错误。会出现同样的错误`puts`吗？最终：该怎么办？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T23:27:43.277

默认情况下，Tcl 使用行缓冲`stdout`（稍后会详细介绍）。这意味着您`puts`那里的任何内容都会被缓冲，并且仅当在缓冲区中看到换行符或当您`flush`进入频道时才会输出。`puts`所以，是的，如果对它的调用是在无缓冲通道上完成的，或者如果它设法达到“缓冲区已满”条件以便真正访问底层介质，则可以直接得到相同的错误。

至于“I/O 错误”，我们确实需要更多细节。假设`stdout`您的程序的 已被重定向（或[重新打开](http://wiki.tcl.tk/3995)），并且由于某种原因无法访问底层媒体。

您可以尝试通过检查实际失败的系统调用的原因来推断有关原因的更多详细信息——在涉及此类系统调用信号错误条件的 Tcl 命令之后，[`POSIX` `errno`](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/errno.h.html)可以通过全局[`errorCode`变量访问它。](http://www.tcl.tk/man/tcl8.5/TclCmd/return.htm#M13)所以你可以这样：

```
set rc [catch {flush stdout} err]
if {$rc != 0} {
    global errorCode
    set fd [open error.log w]
    puts $fd $err\n\n$errorCode
    close $fd
} 
```

（从 Tcl 8.5 开始，您可以直接要求`catch`返回所有相关信息，而不是检查魔法变量，请参阅手册）。

`stdout`强烈建议提供有关如何运行程序或是否重新打开程序的更多详细信息。

* * *

关于缓冲的说明。可以使用`fconfigure`（或`chan configure`从 8.5 开始）通过操作其`-buffering`选项在通道上控制输出缓冲。通常设置为`line`on`stdout`但也可以设置为`full`或`none`。当设置为 时`full`，该`-buffersize`选项可用于显式控制缓冲区大小。

# google-chrome - css3多重3d旋转

> ID：13241488
> 
> 赞同：0
> 
> 时间：2012-11-05T22:33:01.387
> 
> 标签：google-chrome, css, webkit, webkit-transform

我想将一个立方体的一个面旋转两次，并让那个面在一侧平放。

这是关于我要实现的目标的说明：http:
[//i.imgur.com/00yAQ.png](http://i.imgur.com/00yAQ.png)

我现在把我所拥有的东西放在这里，注意我使用 45 度来显示我的进度，因为 90 度隐藏了形状。 [http://jsfiddle.net/s6jwC/1/](http://jsfiddle.net/s6jwC/1/)

```
<div id="stage">
    <div id="cube">
        <div id="cube_content">
        </div>
    </div>
</div>

#stage {
    -webkit-perspective: 400px;
    position: relative;
}

#cube {
    width: 128px; height: 128px;
    -webkit-transform: rotateY(45deg);   
    position: absolute;
   left: 200px; top: 30px;
}

#cube_content {
    width: 128px; height: 128px;
    -webkit-transform: rotateX(45deg);
    position: absolute;
    left: 0; top: 0;
    background: rgba(255, 0, 0, 0.7);
    -webkit-transform-origin: 0% 100%;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:02:09.070

好的，通过了解有关 3d 变换的更多信息找到了答案。它将 -webkit-transform-style 属性应用于父转换元素，以便子元素能够使用其父元素保留的 3d 状态。

添加这一行解决了我的问题：

```
#cube {
    ...
    -webkit-transform-style: preserve-3d;
} 
```

这是应用了更改的更新 jsfiddle：http: [//jsfiddle.net/s6jwC/3/](http://jsfiddle.net/s6jwC/3/)

# c# - 如何使用 Ruby/OpenSSL 解密/加密设置填充模式？

> ID：13241489
> 
> 赞同：4
> 
> 时间：2012-11-05T22:33:02.253
> 
> 标签：c#, ruby, openssl, padding, ruby-1.9.2

我从以下`C#`加密代码开始，并想用`Ruby`. 我的问题是我不知道如何在`Ruby/OpenSSL`. 我特别需要使用`PKCS7`.

**C# 加密**

```
System.Security.Cryptography.Aes c = new System.Security.Cryptography.AesManaged();
c.Mode = CipherMode.CBC;
c.Padding = PaddingMode.PKCS7;   # <-- how to set this in Ruby world?
c.KeySize = 256;
c.BlockSize = 128;
c.Key = key;
c.IV = iv;
... 
```

**红宝石解密**

```
d = OpenSSL::Cipher.new('AES-128-CBC') # oops, this should have been AES-256-CBC
d.decrypt
d.key = key
d.iv  = iv
... 
```

我目前正在使用`Ruby 1.9.2`，但可以使用任何必要的版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T14:56:18.850

构造函数参数实际上是`<name>-<key length>-<mode>`，所以首先，您可能想要`AES-256-CBC`使用 256 位密钥。[[资源]](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL/Cipher.html#label-Instantiating+a+Cipher)

无论如何，AES 块大小固定为 128 位，因此您无需调整此参数。[[资源]](http://en.wikipedia.org/wiki/Aes256)

此外，Ruby 似乎默认使用 PKCS7 Padding，因此也无需对此进行调整。[[资源]](https://stackoverflow.com/questions/5677550/does-ruby-aes-use-padding-by-default)

因此，你应该很好地去

```
c = OpenSSL::Cipher.new('AES-256-CBC')
c.decrypt
c.key = key
c.iv = iv 
```

# ruby - rvm ruby 版本和 rails server 不同的 ruby 版本

> ID：13241490
> 
> 赞同：0
> 
> 时间：2012-11-05T22:33:06.510
> 
> 标签：ruby, rvm

似乎 rails 服务器使用不同的 ruby​​，然后是由 rvm 设置的。

如何使 rails server 命令使用与 rvm 中设置的 ruby​​ 相同的 ruby​​？

当我启动 rails 服务器时，（在控制台中写入 rails 服务器）它输出 ruby​​ 1.8.7 的 ruby​​ 版本。但是当我写

```
 `ruby -v` 
```

要查看 ruby​​ 版本，我得到 ruby​​ 1.9.3p0 的 ruby​​ 版本。我也安装了 rvm 并且当我输入

```
rvm list 
```

它返回我正在使用 ruby​​-1.9.3-p286，因此 rvm 使用与 rails 服务器不同的 ruby​​ 版本。我需要能够使用 ruby​​-1.9.3 启动 rails 服务器。首先我安装了 ruby​​ 1.8.7，我安装了 rvm，所以我可以使用 ruby​​-1.9.3。但似乎我仍然无法将它与 Rails 服务器一起使用。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-03T01:59:16.530

当您说“rails 服务器”时，您是如何运行服务器的？是通过捆绑器吗？还是通过终端命令？

我相信每个`rvm`Ruby 版本都有自己的 Bundler（它使用从 rvm 指定的正确 Ruby 版本）。如果你这样做`rvm install ruby-2.x.x`，你很可能会遇到`ERROR: Gem bundler is not installed, run 'gem install bundler' first`。运行`bundle exec rails console`并进入控制台后，您可以运行`RUBY_VERSION`以查看正在运行的版本。

如果你只是打电话`rails server`，那么你的 PATH 可能会搞砸。您可以运行`which -a rails`以查看计算机搜索可执行文件的目录列表。如果您看到类似 的内容`/usr/bin/rails`，那么这个 Rails 服务器版本可能使用 Ruby 的系统版本。我怀疑这可能是`rvm`Ruby 版本和 Rails Ruby 版本不同的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:56:29.173

在指定要使用的 ruby​​ 版本的 app 目录中拥有 .rvmrc 文件的最简单方法

```
echo "rvm use 1.9.3" >> .rvmrc 
```

# java - 扫描线填充，区分交叉点和峰值

> ID：13241497
> 
> 赞同：0
> 
> 时间：2012-11-05T22:33:41.580
> 
> 标签：java, algorithm, polygon, fill, scanline

我正在应用扫描线算法来填充随机生成的大陆状形状。我遇到的主要问题是当这条线与一个尖端相交时。我创建了一些图像来帮助可视化这一点。

[http://i.stack.imgur.com/OlbI5.png](http://i.stack.imgur.com/OlbI5.png)

[http://i.stack.imgur.com/RACF1.png](http://i.stack.imgur.com/RACF1.png)

我基本上需要帮助弄清楚如何区分交叉点是否是“提示”。就像在第一张图片中一样，因为两者都是小费，我最终在它们之间有一条线，即使这条线在大陆形状之外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:38:24.783

尝试检查交叉路口的左侧和右侧。如果它们都低于红线，那就是小费。

这是我能做的最好的事情，而无需更多地了解线条是如何定义的。

# linux-kernel - 为现有的二进制内核构建内核模块

> ID：13241501
> 
> 赞同：2
> 
> 时间：2012-11-05T22:33:50.197
> 
> 标签：linux-kernel, kernel-module

如何构建一个加载到现有二进制内核中的内核模块？

似乎加载取决于`BuildID`模块内部的存储，但是需要什么来匹配这些呢？我希望二进制内核是一些 git 修订的结果，使用默认值`.config`（从 复制`arch/.../configs`）。如何确定`.config`构建现有内核可以接受的模块需要哪个版本和版本？

似乎只匹配 ARCH 和 KERNELRELEASE 属性，如图所示`uname -a`是不够的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T12:06:51.443

您将需要您正在运行的当前内核的源代码。这些通常是单独打包的（你没有提到你的发行版）。但是，一旦完成，您应该能够按照说明针对该内核构建外部模块：[Documentation/kbuild/modules.txt](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=Documentation/kbuild/modules.txt;h=3fb39e0116b4c8e42d40009357ed5cf13c1f2888;hb=HEAD)

# python - 哪个 GAE 数据库属性适合标签属性？

> ID：13241503
> 
> 赞同：0
> 
> 时间：2012-11-05T22:34:12.490
> 
> 标签：python, google-app-engine, google-cloud-datastore

我想在 Google App Engine 中的我的数据库模型上拥有一个属性，但我不确定哪个类别效果最好。我需要它是类似于 SO 上的标签的标签云。文本属性最好还是我应该使用字符串属性并使其重复=真。

第二个对我来说似乎最好，然后我可以用逗号作为分隔符将标签分开。我的目标是能够搜索这些标签并计算每种标签的总数。

这似乎是一个合理的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:46:42.890

这可能很有趣，具体取决于您想要做什么。

[GAE 分片计数器](https://developers.google.com/appengine/articles/sharding_counters)

> 在 Google App Engine 上开发高效的应用程序时，您需要注意实体的更新频率。虽然 App Engine 的数据存储区可扩展以支持大量实体，但请务必注意，您只能期望每秒更新任何单个实体或实体组大约 5 次。这是一个估计值，实体的实际更新率取决于实体的几个属性，包括它有多少属性、有多大以及需要更新多少索引。虽然单个实体或实体组对其更新速度有限制，但 App Engine 擅长处理分布在不同实体中的许多并行请求，我们可以通过使用分片来利用这一点。
> 
> 问题是，如果您有一个实体希望更新速度超过每秒 5 次，该怎么办？例如，您可能会计算投票中的投票数、评论数，甚至是您网站的访问者数。

所以你会创建一个标签，如：

```
increment(tag) 
```

如果它不存在，它也恰好创建它。

数数

```
get_count(tag) 
```

但是，是的，您可以创建一个重复的属性，它本质上是一个列表，然后存储并加载它并计算其中的值。这取决于您将拥有多少，因为数据存储对模型大小有限制，如果您将其存储在单个列表中的单个模型中，它最终会太大。

所以也许每个标签一个模型，都是一种类型？当您遇到 5/sec 的问题时，上述内容会派上用场。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:02:36.757

重复的字符串属性是您的最佳选择。

# nservicebus - 创建 NServiceBus 总线时出现“未设置对象引用”错误

> ID：13241510
> 
> 赞同：0
> 
> 时间：2012-11-05T22:34:41.707
> 
> 标签：nservicebus

我在创建我的巴士时遇到问题。当我从传递给 With() 函数（“MyAssembly.LetterProcessor”）的集合中删除最后一个程序集时，它不会在本节中中断，尽管它稍后会中断。错误消息只是“对象引用未设置为对象的实例”。没有内在的例外。

我正在使用 NSB 3.2.0.0。

```
 NServiceBus.SetLoggingLibrary.Log4Net(log4net.Config.XmlConfigurator.Configure);

    var assemblies = new List<Assembly> { Assembly.Load("NServiceBus"), Assembly.Load("NServiceBus.Core"), Assembly.Load("MyAssembly.LetterProcessor") };
    var cfg = NServiceBus.Configure.With(assemblies);

    cfg = cfg.DefineEndpointName("MyAssembly.letterprocessor");
    cfg = cfg.DefaultBuilder();
    cfg = cfg.DefiningMessagesAs(t => t.Namespace != null &&
                                      (
                                          t.Namespace.Equals("MyAssembly.LetterProcessor.NSB.BatchSaga")
                                          || t.Namespace.Equals("MyAssembly.LetterProcessor.NSB.FileSaga")
                                      )
        );
    cfg = cfg.MessageForwardingInCaseOfFault();
    cfg = cfg.Log4Net();
    cfg = cfg.StructureMapBuilder();
    cfg = cfg.XmlSerializer();
    cfg = cfg.MsmqTransport();
    cfg = cfg.IsTransactional(true);
    cfg = cfg.IsolationLevel(System.Transactions.IsolationLevel.Serializable);
    cfg = cfg.Sagas();
    cfg = cfg.NHibernateSagaPersister();
    var cfgu = cfg.UnicastBus();
    cfgu = cfgu.LoadMessageHandlers();
    var sb = cfgu.CreateBus();  // <-- breaks here.
    var bus = sb.Start(); 
```

...和堆栈跟踪：

```
 at System.Reflection.Emit.CustomAttributeBuilder.EmitValue(BinaryWriter writer, Type type, Object value)
    at System.Reflection.Emit.CustomAttributeBuilder.InitCustomAttributeBuilder(ConstructorInfo con, Object[] constructorArgs, PropertyInfo[] namedProperties, Object[] propertyValues, FieldInfo[] namedFields, Object[] fieldValues)
    at System.Reflection.Emit.CustomAttributeBuilder..ctor(ConstructorInfo con, Object[] constructorArgs, PropertyInfo[] namedProperties, Object[] propertyValues)
    at NServiceBus.MessageInterfaces.MessageMapper.Reflection.MessageMapper.BuildCustomAttribute(Object customAttribute)
    at NServiceBus.MessageInterfaces.MessageMapper.Reflection.MessageMapper.AddCustomAttributeToProperty(Object customAttribute, PropertyBuilder propBuilder)
    at NServiceBus.MessageInterfaces.MessageMapper.Reflection.MessageMapper.CreateTypeFrom(Type t, ModuleBuilder moduleBuilder)
    at NServiceBus.MessageInterfaces.MessageMapper.Reflection.MessageMapper.GenerateImplementationFor(Type interfaceType, ModuleBuilder moduleBuilder)
    at NServiceBus.MessageInterfaces.MessageMapper.Reflection.MessageMapper.InitType(Type t, ModuleBuilder moduleBuilder)
    at NServiceBus.MessageInterfaces.MessageMapper.Reflection.MessageMapper.InitType(Type t, ModuleBuilder moduleBuilder)
    at NServiceBus.MessageInterfaces.MessageMapper.Reflection.MessageMapper.InitType(Type t, ModuleBuilder moduleBuilder)
    at NServiceBus.MessageInterfaces.MessageMapper.Reflection.MessageMapper.Initialize(IEnumerable`1 types)
    at NServiceBus.Serializers.XML.Config.MessageTypesInitializer.Run()
    at NServiceBus.Configure.<Initialize>b__d(IWantToRunWhenConfigurationIsComplete o)
    at System.Collections.Generic.List`1.ForEach(Action`1 action)
    at NServiceBus.Configure.Initialize()
    at NServiceBus.Configure.CreateBus()
    at MyAssembly.LetterProcessor.Service.Tests.Tests.EndpointInit() in C:\svn\MyAssembly\LetterProcessor\trunk\src\MyAssembly.LetterProcessor.Service.Tests\Tests.cs:line 72> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:13:08.703

问题已经找到了。这是由于我在与 IMessage 实现相同的命名空间中混合了 Handler 类。有两种可能的解决方案：(1) 我可以将消息和处理程序分离到不同的命名空间/程序集，或者 (2) 我可以指定 DefiningMessagesAs 函数通过 IMessage 过滤。

第二个选项如下所示：

```
 var bus = NServiceBus.Configure.With(assemblies)
       .DefineEndpointName("myApp.letterprocessor")
       .DefiningMessagesAs(t => t.GetType().GetInterfaces().Contains(typeof(IMessage))) // <-- fixes my problem
       ... etc 
```

# android - 电话 nr 访问在电话中有效，但在平板电脑上崩溃，即使使用 try/catch

> ID：13241513
> 
> 赞同：0
> 
> 时间：2012-11-05T22:35:30.223
> 
> 标签：android

我有一个 Android 手机应用程序可以访问电话号码以获取注册信息，如下所示：

```
 String thisPhoneNumber = "0";
    try {
        TelephonyManager tMgr=(TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
        thisPhoneNumber = tMgr.getLine1Number(); }
    catch (Exception e) { } 
```

它在手机上运行良好。一位朋友在平板电脑上尝试过（最近的一款），应用程序崩溃了。如果我注释掉 try/catch 的 4 行，它工作正常，所以看起来崩溃必须在 getSystemService 调用上。

在一些搜索stackoverflow中，听起来代码应该在任一平台上运行，但这不是我所看到的。

try/catch 不应该防止崩溃并允许处理异常吗？

有没有其他方法可以让 getSystemService 执行而不会在平板电脑上崩溃？还是我不必在平板电脑上拨打电话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:06:25.677

使用 if 语句检查这 2-3 行中的变量是否为空，如果是则停止执行代码，例如

尝试 { TelephonyManager tMgr=(TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE); if(tMgr!=null) thisPhoneNumber = tMgr.getLine1Number(); } 导管（异常 o）{}

或者您可以尝试查找设备是平板电脑还是手机（手机或非手机设备），然后在 if code if(phone) { the code} 中执行两个不同的语句，或者您可以使用抽象类和函数查找电话号码并做一些想像

```
if(device is phone)
{
  apstractClass=new phoneImplementation();
} else
{
  apstractClass= new nonPhoneImplementation();if (((TelephonyManager)getContext().getSystemService(Context.TELEPHONY_SERVICE)).getLine1Number()
== null) 
```

{ // 没有电话 } `enter code here` } thisPhoneNumber=apstarctClass.getPhoneNumber()

其中 phoneImplementation().getPhoneNumber() 将包含您的代码，问题中的代码和 nonPhoneImplementation().getPhoneNumber() 将返回 0

如果设备具有电话功能，您可以检查此

```
if (((TelephonyManager)getContext().getSystemService(Context.TELEPHONY_SERVICE)).getLine1Number()
    == null)
{
    // no phone
} 
```

我的观点是，这将解决您的问题：

```
String thisPhoneNumber = "0";
try
{
    if (((TelephonyManager)getContext().getSystemService(Context.TELEPHONY_SERVICE)).getLine1Number()
        != null)
    {
         thisPhoneNumber = tMgr.getLine1Number();
    } }
catch(Exception o)
{} 
```

# php - 每次点击时 JQuery 备用 div 内容和 AJAX 帖子 url

> ID：13241516
> 
> 赞同：0
> 
> 时间：2012-11-05T22:35:56.917
> 
> 标签：php, jquery, html, ajax

我有一些处理 div 点击的 JQuery。如果 div 被单击，它会隐藏自己并显示另一个 div（并在后台发布到 php 脚本）。如果再次单击它，它应该隐藏新的 div，再次显示新的 div，并将更多数据发布到不同的脚本，等等。

它第一次更改（.f 隐藏，.uf 显示）但是当我单击“.uf”时没有任何反应。

查询：

```
if($('.f').is(":visible")) {
    $('#follow').click(function() {
        var to_follow = $('.name').attr('id');
        $.ajax({  
            type: "POST",  
            url: "/bin/rel_p.php",  
            data: "y=" + to_follow,  
            success: function() {  
                $('.f').hide();
                $('.uf').show();
            }
        });
    });
}
else {
    $('#follow').click(function() {
        var to_unfollow = $('.name').attr('id');
        $.ajax({  
            type: "POST",  
            url: "/bin/relu_p.php",  
            data: "y=" + to_follow,  
            success: function() {  
                $('.uf').hide();
                $('.f').show();
            }
        });
    });
} 
```

HTML：

```
 <div id="follow" class="f">
                <img src="img/icons/Follow.png">
                <h1>Follow</h1>
            </div>
            <div id="follow" class="uf" style="display:none;">
                <img src="img/icons/Unfollow.png">
                <h1>Unfollow</h1>
            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:43:16.343

如果您打算使用选择器两次，请使用一个类，并且不要两次编写相同的代码，除非您必须：

```
$('.follow').on('click', function() {
    var is_f = $('.f').is(":visible"),
        to_follow = $('.name').attr('id'),
        give_me_an_u = is_f?'':'u';
    $.ajax({  
        type: "POST",  
        url: "/bin/rel" + give_me_an_u + "_p.php",  
        data: {y : to_follow}
    }).done(function() {
        $('.f, .uf').toggle();
    });
}); 
```

# sql - sql查询包括月份列？

> ID：13241518
> 
> 赞同：0
> 
> 时间：2012-11-05T22:36:16.763
> 
> 标签：sql, sql-server, tsql

我想知道是否可以在输出列月份的 sql 查询上获得一些想法或方向。这是我当前的查询..

```
select A.assetid, A.Acquisition_Cost, B.modepreciaterate from FA00100 A
inner join FA00200 B on A.assetindex = B.assetindex
where MoDepreciateRate != '0' 
```

我想添加更多看起来像这样的列：

```
select assetid, acquisition_cost, perdeprrate, Dec_2012, Jan_2013, Feb_2013....

where Dec_2012 = (acquisition_cost - MoDepreciateRate*(# of months))
and Jan_2013 = (acquisition_cost - MoDepreciateRate*(# of months)) 
```

其中 # 个月可以更改。

任何帮助将非常感激。谢谢！

这是我希望输出为 '# of months' = 4 的示例

```
assetid SHRTNAME    Acquisition_Cost    perdeprrate Dec_2012    Jan_2013    Feb_2013    Mar_2013
CS-013  GEH INTEG   17490.14            485.83      17004.31    16518.48    16032.65    15546.82
CS-014  WEB BRD     14560               404.4507    14155.5493  13751.0986  13346.6479  12942.1972 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:46:52.357

试试这个：

```
--setup
create table #fa00100 (assetId int, assetindex int, acquisitionCost int, dateAcquired date)
create table #fa00200 (assetIndex int, moDepreciateRate int, fullyDeprFlag nchar(1), fullyDeprFlagBit bit)

insert #fa00100 
      select 1, 1, 100, '2012-01-09'
union select 2, 2, 500, '2012-05-09'
insert #fa00200
      select 1, 10, 'N', 0
union select 2, 15, 'Y', 1 
```

.

```
--solution
create table #dates (d date not null primary key clustered)
declare @sql nvarchar(max)
, @pivotCols nvarchar(max)
, @thisMonth date
, @noMonths int = 4

set @thisMonth = cast(1 + GETUTCDATE() - DAY(getutcdate()) as date)
select @thisMonth
while @noMonths > 0
begin
    insert #dates select DATEADD(month,@noMonths,@thisMonth) 
    set @noMonths = @noMonths - 1
end

select @sql = ISNULL(@sql + NCHAR(10) + ',', '') 
--+ ' A.acquisitionCost - (B.moDepreciateRate * DATEDIFF(month,dateAcquired,''' + convert(nvarchar(8), d, 112) + ''')) ' --Original Line
    + ' case when A.acquisitionCost - (B.moDepreciateRate * DATEDIFF(month,dateAcquired,''' + convert(nvarchar(8), d, 112) + ''')) <= 0 then 0 else A.acquisitionCost - (B.moDepreciateRate * DATEDIFF(month,dateAcquired,''' + convert(nvarchar(8), d, 112) + ''')) end ' --new version

+ quotename(DATENAME(month, d) + '_' + right(cast(10000 + YEAR(d) as nvarchar(5)),4))
from #dates

set @sql = 'select A.assetid
, A.acquisitionCost
, B.moDepreciateRate 
,' + @sql + '
from #fa00100 A
inner join #fa00200 B 
    on A.assetindex = B.assetindex
where B.fullyDeprFlag = ''N''
and B.fullyDeprFlagBit = 0
'
--nb: B.fullyDeprFlag = ''N'' has double quotes to avoid the quotes from terminating the string
--I've also included fullyDeprFlagBit to show how the SQL would look if you had a bit column - that will perform much better and will save space over using a character column

print @sql
exec(@sql)

drop table #dates 
```

.

```
 --remove temp tables from setup
drop table #fa00100
drop table #fa00200 
```

# c - C 错误中的套接字

> ID：13241519
> 
> 赞同：2
> 
> 时间：2012-11-05T22:36:21.120
> 
> 标签：c, sockets, networking

我第一次使用 C 套接字，我的代码遇到了一个小错误。当我编译它工作正常并且编译良好时，它只会抛出一些错误，我想知道如何修复它们。

这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <arpa/inet.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <sys/socket.h>

#define PORTNUM 2343

int main(int argc, char *argv[])
{
    char msg[] = "Hello World !\n";

    struct sockaddr_in dest; /* socket info about the machine connecting to us */
    struct sockaddr_in serv; /* socket info about our server */
    int mysocket;            /* socket used to listen for incoming connections */
    int socksize = sizeof(struct sockaddr_in);

    memset(&serv, 0, sizeof(serv));    /* zero the struct before filling the fields */
    serv.sin_family = AF_INET;         /* set the type of connection to TCP/IP */
    serv.sin_addr.s_addr = INADDR_ANY; /* set our address to any interface */
    serv.sin_port = htons(PORTNUM);    /* set the server port number */    

    mysocket = socket(AF_INET, SOCK_STREAM, 0);

    /* bind serv information to mysocket */
    bind(mysocket, (struct sockaddr *)&serv, sizeof(struct sockaddr));

    /* start listening, allowing a queue of up to 1 pending connection */
    listen(mysocket, 1);
    int consocket = accept(mysocket, (struct sockaddr *)&dest, &socksize);

    while(consocket)
    {
        printf("Incoming connection from %s - sending welcome\n", inet_ntoa(dest.sin_addr));
        send(consocket, msg, strlen(msg), 0); 
        consocket = accept(mysocket, (struct sockaddr *)&dest, &socksize);
    }

    close(consocket);
    close(mysocket);
    return EXIT_SUCCESS;
} 
```

我从一个网站上得到了这个作为一个简单的例子。

这是编译器错误：

```
server.c: In function ‘main’:
server.c:33:46: warning: pointer targets in passing argument 3 of ‘accept’ differ in signedness [-Wpointer-sign]
/usr/include/i386-linux-gnu/sys/socket.h:214:12: note: expected ‘socklen_t * __restrict__’ but argument is of type ‘int *’
server.c:39:46: warning: pointer targets in passing argument 3 of ‘accept’ differ in signedness [-Wpointer-sign]
/usr/include/i386-linux-gnu/sys/socket.h:214:12: note: expected ‘socklen_t * __restrict__’ but argument is of type ‘int *’ 
```

谢谢您的帮助！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T22:45:04.920

C 和 C++ 头文件通常为可​​移植性和强制某些关系定义类型。

如您所见，许多代码将在编译和运行时出现警告。

但是，它们是有原因的警告。

否则，有一天您可能会遇到大小和签名很重要的极端情况，您将不知道为什么它不起作用。始终尝试遵循您正在使用的库的约定。

要修复当前的警告，您需要声明`socksize`为`socklen_t`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T00:53:52.050

```
int socksize = sizeof(struct sockaddr_in); 
```

=>

```
socklen_t           nAddrLen;
nAddrLen = sizeof(struct sockaddr_in); 
```

# google-docs - Google 电子表格多列过滤条件分组语法

> ID：13241520
> 
> 赞同：2
> 
> 时间：2012-11-05T22:36:23.583
> 
> 标签：google-docs, google-sheets

这个问题有点类似于

[使用 OR 的 Google 电子表格多列过滤器](https://stackoverflow.com/questions/2512782/google-spreadsheet-multiple-column-filter-using-or)

但是当他要求相当于：

```
select count(*) 
from Table 
where A is not null and (B is not null or C is not null) 
```

我想要做：

```
select count(*) 
from Table 
where A is not null OR (B is not null AND C is not null) 
```

事实上，我想做的是过滤一个日期，我一直在使用

```
=FILTER(YEAR(Hours!A2:A)=2012,MONTH(Hours!A2:A)>=8) 
```

给我八月继续前进。

但现在我需要为该月的某一天添加​​一个限制。我需要这样的东西：

=FILTER(MONTH(Hours!A2:A)=8, **(** MONTH(Hours!A2:A)=9 **AND** DAY(Hours!A2:A)<=13) **)**

为了有**整个**8 月，然后 9 月**只**到 13 日。

是否有允许这样做的语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:22:50.587

> 有整个 8 月，然后 9 月只到 13 日。

一种方法（这将是在两个日期之间进行过滤的“通用”解决方案）：

`=COUNT(FILTER(Hours!A2:A;Hours!A2:A>=DATE(2012;8;1);Hours!A2:A<=DATE(2012;9;13)))`

# java - 使用 File 在 java gui 中查找文件路径

> ID：13241528
> 
> 赞同：-3
> 
> 时间：2012-11-05T22:37:04.643
> 
> 标签：java

我应该创建一个 gui 来读取文件并使用您输入的路径来执行此操作。我怎样才能从我给出的代码中完成这项工作。我需要从 javapath 变量中获取输入并将其用于`File inFile = new File (getJavapath());`

```
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import java.util.*;
import java.util.logging.*;
import javax.swing.*;

public class P_Supplemental_10 extends JFrame {

private JPanel javapanel = new JPanel();
private JButton javareader = new JButton("Click here to get file");
private JTextField javapath = new JTextField();
private JLabel javalabel = new JLabel("Enter file name here; ");
private JTextArea javacontents = new JTextArea();

P_Supplemental_10() {

    this.setLayout(new BorderLayout(5, 10));
    javapanel.setLayout(new GridLayout(1,2));
    javapanel.add(javalabel);
    javapanel.add(javapath);
    add(javapanel,BorderLayout.NORTH);
    add(javacontents,BorderLayout.CENTER);

    add(javareader,BorderLayout.SOUTH);
    javareader.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent evt){

                        jbtReadFileActionPerformed(evt);
                    }
    });

}//end of constructor

    private void jbtReadFileActionPerformed(ActionEvent evt){
    try {
        File inFile = new File (getJavapath());

        Scanner input = new Scanner (inFile);
        String fileContents = "";
        while(input.hasNext()){
            fileContents += input.nextLine() + "\n";
        }
            getJavacontents().setText(fileContents);

    } catch (FileNotFoundException ex) {
        Logger.getLogger(P_Supplemental_10.class.getName()).log(Level.SEVERE, null, ex);
    }
    }

public static void main(String[] args){
        P_Supplemental_10 frame = new P_Supplemental_10();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setTitle("P_Supplemental_10");
    frame.setSize(625, 60);
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);

}//end of main

/**
 * @return the javapanel
 */
public JPanel getJavapanel() {
    return javapanel;
}

/**
 * @param javapanel the javapanel to set
 */
public void setJavapanel(JPanel javapanel) {
    this.javapanel = javapanel;
}

/**
 * @return the javareader
 */
public JButton getJavareader() {
    return javareader;
}

/**
 * @param javareader the javareader to set
 */
public void setJavareader(JButton javareader) {
    this.javareader = javareader;
}

/**
 * @return the javapath
 */
public JTextField getJavapath() {
    return javapath;
}

/**
 * @param javapath the javapath to set
 */
public void setJavapath(JTextField javapath) {
    this.javapath = javapath;
}

/**
 * @return the javalabel
 */
public JLabel getJavalabel() {
    return javalabel;
}

/**
 * @param javalabel the javalabel to set
 */
public void setJavalabel(JLabel javalabel) {
    this.javalabel = javalabel;
}

/**
 * @return the javacontents
 */
public JTextArea getJavacontents() {
    return javacontents;
}

/**
 * @param javacontents the javacontents to set
 */
public void setJavacontents(JTextArea javacontents) {
    this.javacontents = javacontents;
}

}// end of class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:39:32.007

作为`getJavapath()`回报，`JTextField`这必须是：

```
File inFile = new File(getJavapath().getText()); 
```

如果[不需要](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html)从`JTextfield`.

# flash - 为什么在弹出窗口中打开时我的矩形填充不同的颜色？

> ID：13241530
> 
> 赞同：0
> 
> 时间：2012-11-05T22:37:33.963
> 
> 标签：flash, apache-flex, flex4, flex-spark

我在面板内添加一个包含矩形填充的组。该面板包含两个状态 normal 和 normalWithControlBar。该组位于 normalWithControlBar 中。在隔离测试中，它可以正常工作。当它显示在我的应用程序中时，矩形背景填充不会以正确的颜色出现。

我认为可能在某处设置了 blendMode，但我不确定是否是这样，或者在哪里以及为什么应用它。

我也有 Rotate3D 效果，这可能是它的原因。由于它是一个大型应用程序，我正在努力解决它可能的情况，但在那之前有没有人听说过这个或可能是什么原因造成的？谢谢

示例代码：

在面板中：

```
<MyPanel>
    <s:controlBarContent>
        <local:MyGroup width="500" height="230"/><!--appears tinted-->
    </s:controlBarContent>

    <local:MyGroup width="500" height="230"/><!--appears normal-->
</MyPanel> 
```

在我的群组中：

```
<s:Rect width="100%" height="80"
        top="100"
            >
    <s:fill>
        <s:SolidColor color="#dddddd"/>
    </s:fill>
</s:Rect> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:40:34.160

找到了。发生这种情况的原因是该组未添加到面板皮肤类中的排除列表中，并且在应用程序 CSS 中指定了 chromeColor。

在 MyPanelSkin 中：

前：

```
/* Define the skin elements that should not be colorized. */
static private const exclusions:Array = ["background", "titleDisplay", "contentGroup", "controlBarGroup", "border"]; 
```

后：

```
/* Define the skin elements that should not be colorized. */
static private const exclusions:Array = ["myGroup", "background", "titleDisplay", "contentGroup", "controlBarGroup", "border"]; 
```

一旦我将我的皮肤部分添加到排除列表中，填充颜色就会正确显示。

# css - CSS媒体查询重叠的规则是什么？

> ID：13241531
> 
> 赞同：101
> 
> 时间：2012-11-05T22:37:42.093
> 
> 标签：css, responsive-design, media-queries

我们如何准确地分隔媒体查询以避免重叠？

例如，如果我们考虑以下代码：

```
@media (max-width: 20em) {
    /* for narrow viewport */
}

@media (min-width: 20em) and (max-width: 45em) {
    /* slightly wider viewport */
}

@media (min-width: 45em) {
    /* everything else */
} 
```

在所有支持的浏览器中，恰好 20em 和 45em 会发生什么？

我见过人们使用：799px 和 800px 之类的东西，但是 799.5 px 的屏幕宽度呢？（显然不是在常规显示器上，而是在视网膜显示器上？）

考虑到规范，我对这里的答案非常好奇。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-11-28T18:01:35.093

> CSS媒体查询重叠的规则是什么？

级联。

`@media`规则对级联是透明的，所以当两个或多个`@media`规则同时匹配时，浏览器应该在所有匹配的规则中应用样式，并相应地解析级联。¹

> 在所有支持的浏览器中，恰好 20em 和 45em 会发生什么？

在正好 20em 宽处，您的第一个和第二个媒体查询都将匹配。浏览器将在`@media`规则和级联中应用样式，因此如果有任何冲突的规则需要被覆盖，最后声明的规则获胜（考虑特定的选择器`!important`等）。当视口正好是 45em 宽时，第二个和第三个媒体查询也是如此。

考虑到您的示例代码，添加了一些实际的样式规则：

```
@media (max-width: 20em) {
    .sidebar { display: none; }
}

@media (min-width: 20em) and (max-width: 45em) {
    .sidebar { display: block; float: left; }
} 
```

当浏览器视口正好是 20em 宽时，这两个媒体查询都将返回 true。通过级联，`display: block`覆盖`display: none`并将`float: left`应用于任何具有 class 的元素`.sidebar`。

您可以将其视为应用规则，就好像媒体查询一开始就不存在一样：

```
.sidebar { display: none; }
.sidebar { display: block; float: left; } 
```

当浏览器匹配两个或多个媒体查询时如何发生级联的另一个示例可以在[这个其他答案](https://stackoverflow.com/questions/10306670/css-specificity-media-queries-and-min-width/10322199#10322199)中找到。

但是请注意，如果您的声明在两个规则中*不*重叠`@media`，那么所有这些规则都将适用。这里发生的是两个规则中声明的**联合**`@media`，而不仅仅是后者完全推翻了前者......这让我们想到了你之前的问题：

> 我们如何准确地分隔媒体查询以避免重叠？

如果您希望避免重叠，您只需要编写互斥的媒体查询。

请记住，`min-`and`max-`前缀表示“最小包含”和“最大包含”；这意味着`(min-width: 20em)`并且`(max-width: 20em)`都将匹配正好 20em 宽的视口。

看起来您已经有一个示例，这将我们带到您的最后一个问题：

> 我见过人们使用：799px 和 800px 之类的东西，但是 799.5 px 的屏幕宽度呢？（显然不是在常规显示器上，而是在视网膜显示器上？）

这我不完全确定；CSS 中的所有像素值都是逻辑像素，我一直很难找到一个浏览器可以报告视口宽度的小数像素值。我尝试过使用一些 iframe，但无法提出任何建议。

从我的实验来看，iOS 上的 Safari 似乎会舍入所有小数像素值，以确保`max-width: 799px`和中的任何一个`min-width: 800px`都匹配，即使视口确实是 799.5px（显然与前者匹配）。

* * *

^(1尽管在) [[Conditional Rules 模块](http://www.w3.org/TR/css3-conditional/#at-media)][或][[Cascade 模块](http://www.w3.org/TR/css3-cascade/#at-media-rule)][（后者目前计划重写）][中都没有明确说明，但级联暗示正常发生，因为规范只是说在任何以及与浏览器或媒体匹配的所有规则。`@media`]

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-09-21T15:18:35.973

我已经按照这里的建议尝试过：

```
@media screen and (max-width: calc(48em - 1px)) {
    /*mobile styles*/
}
@media screen and (min-width: 48em) {
    /*desktop styles*/
} 
```

但发现这不是一个好主意，因为它现在不能在我的 Ubuntu 桌面或我的 Android 手机上的 Chrome 上运行。（如此处所述：[calc() 在媒体查询中不起作用](https://stackoverflow.com/questions/23667208/calc-not-working-within-media-queries)）但是，我找到了更好的方法......

```
@media screen and (max-width: 47.9999em) {
    /*mobile styles*/
}
@media screen and (min-width: 48em) {
    /*desktop styles*/
} 
```

和砰！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T19:12:36.713

`calc()`可以用来解决这个问题`(min-width: 50em and max-width: calc(50em - 1px)`将被正确堆叠），但是浏览器支持很差，我不推荐它。

```
@media (min-width: 20em) and (max-width: calc(45em - 1px)) {
    /* slightly wider viewport */
} 
```

信息：

*   [https://developer.mozilla.org/en-US/docs/CSS/calc](https://developer.mozilla.org/en-US/docs/CSS/calc)
*   [http://caniuse.com/calc](http://caniuse.com/calc)
*   [http://www.w3.org/TR/css3-values/#calc](http://www.w3.org/TR/css3-values/#calc)

其他一些人提到，不使用该`em`单元将有助于您的查询堆叠。

# mediawiki - 是否有一个 MediaWiki 扩展可以将文章排队等待管理员批准？

> ID：13241535
> 
> 赞同：1
> 
> 时间：2012-11-05T22:38:19.653
> 
> 标签：mediawiki

> **可能重复：**
> [如何在 Mediawiki 中批准新文章和编辑？](https://stackoverflow.com/questions/12017440/how-to-approve-new-articles-and-edits-in-mediawiki)

我想限制在我的 MediaWiki 站点中创建文章。如果用户正在写一篇文章，它不会立即发布，而是会排队等待管理员批准。有任何扩展可以做到这一点吗？

# xcode - 将 xcode4 与 github、ssh 集成，拉/推时出错

> ID：13241538
> 
> 赞同：2
> 
> 时间：2012-11-05T22:38:36.330
> 
> 标签：xcode, xcode4, github

一切似乎都设置得很好，但是当我尝试从 github 拉取时，我收到错误“git/master/ is not a valid remote branch to pull from”。请选择不同的远程分支。

当我尝试推送时.. 它告诉我工作副本已过时，我应该先拉。该怎么办 ？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:31:47.623

我刚刚使用了 github 的快速 mac 设置，这似乎工作正常，但我没有找到任何解决 xcode 问题的方法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:53:57.203

我遇到了完全相同的问题。我猜你是第一次尝试将此项目代码推送到 Github。在这种情况下，我建议您使用 Github 客户端而不是通过 xcode。Xcode 在某些方面似乎仍然与 Git 不兼容......

# web-applications - 在 Web 开发术语中，“提供静态文件”是什么意思？

> ID：13241539
> 
> 赞同：5
> 
> 时间：2012-11-05T22:38:38.827
> 
> 标签：web-applications

什么是静态文件？“提供静态文件”是什么意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T22:40:36.143

与动态文件相反 :) 这意味着文件内容将按原样发送到客户端（通常是浏览器），而无需服务器干预。相比之下，动态文件由服务器解析，然后根据动态文件模板呈现一组新数据。动态文件通常会使用某种形式的服务器端代码来让服务器知道需要进行什么类型的修改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T22:40:52.133

静态文件类似于：

*   `index.html`
*   `style.css`
*   `script.js`
*   `image.jpg`

基本上，任何不是 PHP 脚本的东西，以及任何不是由您的 Web 服务器动态生成的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T22:40:25.113

这是一个不会改变的文件。没有任何逻辑运行来生成您在具有“动态”内容的页面上看到的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T22:43:30.093

这意味着服务器将不会用于生成文件。

当您请求 *.css 或图像时 - 服务器不会干预，而如果您请求 *.php 文件，服务器需要在返回之前生成它。

[http://support.exsitewebware.com/cgi/page.cgi/articles.html/Content_Management/Static_vs_Dynamic_Content](http://support.exsitewebware.com/cgi/page.cgi/articles.html/Content_Management/Static_vs_Dynamic_Content)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-13T14:11:13.240

当人们谈论静态/动态文件时，他们谈论的是文件是如何生成的。

像这样的文件`index.html`可以是“动态”文件，从某种意义上说，它是动态生成的（使用连接到数据库的服务器、一些 API、一些代码等）

# java - 从另一个类访问 Java Swing GUI

> ID：13241543
> 
> 赞同：0
> 
> 时间：2012-11-05T22:38:58.567
> 
> 标签：java, multithreading, swing, user-interface, updates

我有三个类 - 创建类 2（GUI）的实例的类 1、实现 GUI 的类 2 和尝试更新 GUI 的类 3。

在第 1 课中，我创建了这样的 GUI：

```
s = new ServerSocket(6067);         

//while(true){                              

    Socket ClientSocket = s.accept();   // Accept connections   

    // Create instance of the GUI (class 2) on a new thread     
    work w = cpd.new work();

    Thread t = new Thread(w);
    t.start();

    // Create instance of class 3 that uses the GUI on a new thread             
    Charger cpt = new ChargingPoint(ClientSocket, w.gui);   
    cpt.start();                                                
//}

class work implements Runnable{

    GUI gui;

    public void run(){

        try{

            gui = new GUI();
            gui.setVisible(true);                   
        }

        catch(Exception e){}

    }
} 
```

在第 2 类中，我实现了 GUI，并有一些方法可以对其进行更新，例如：

```
public void updateConsole(String text){
    Console.append(text + "\n");
} 
```

在第 3 类中，我尝试使用如下这些方法，但代码在到达如下语句时会卡住：

```
gui.updateConsole("Data: " + data); 
```

当我将 GUI 类（2 类）作为主要类时，这对我有用。我将它的一个实例传递给所有其他类，他们可以使用它来更新 GUI 而不会出现任何问题。然而，这一次我正在从另一个类（类 1）创建 GUI，这个方法不再有效，我正在努力找出原因。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:53:20.003

我将尝试为您提供自己调试的工具。

尝试使用 eclipse 或类似的调试器。 [http://www.vogella.com/articles/EclipseDebugging/article.html](http://www.vogella.com/articles/EclipseDebugging/article.html)

首先检查 class2 是否确实回调了 gui 类的正确实例。

使用调试器，您可以找到一个“对象 ID”。这将告诉您内存中对象的唯一 ID。它通常是内存指针。检查 ChargingPoint 中的 id 是否与在 Work 类中创建的 id 匹配。在错误的类上运行方法是回调最常见的错误。

然后继续在您的 gui.updateConsole 中放置一个断点并进入代码。

这应该很快揭示问题。

问候

# iphone - 应用程序因异常 NSInvalidArgumentException 而崩溃

> ID：13241544
> 
> 赞同：0
> 
> 时间：2012-11-05T22:38:58.827
> 
> 标签：iphone, ios, xcode, json, exception

我正在从 Web 服务获取数据，但它在 URL 请求时崩溃了，请参阅下面的代码

```
- (void)loadDataSource  
 {

   // Request  
    NSString *URLPath = [NSString stringWithFormat:@"http://imgur.com/gallery.json"];  
    NSURL *URL = [NSURL URLWithString:URLPath];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:URL];

**CRASHED HERE**    [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)  
 {

        NSInteger responseCode = [(NSHTTPURLResponse *)response statusCode];

        if (!error && responseCode == 200) {
            id res = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:nil];
            if (res && [res isKindOfClass:[NSDictionary class]]) {
                self.items = [res objectForKey:@"gallery"];
                [self dataSourceDidLoad];
            } else {
                [self dataSourceDidError];
            }
        } else {
            [self dataSourceDidError];
        }
    }];
} 
```

请帮我

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:41:55.207

您的代码是正确的，但是结果中没有键 @"gallery" 的对象。看起来关键是@“数据”。因此，将您的代码更改为

```
self.items = [res objectForKey:@"data"] 
```

# ruby - 构建用于测试的 ruby c-extension 的推荐方法

> ID：13241547
> 
> 赞同：0
> 
> 时间：2012-11-05T22:39:05.550
> 
> 标签：ruby, ruby-c-extension

我正在使用构建一个 ruby​​gem

```
gem build $gemname.gemspec && gem install $gemname-0.0.1.gem 
```

但是，这似乎不是测试 gem 的最佳方法，因为它将其移出本地环境并进入 ruby​​gems 路径。

是否建议使用构建 gem

```
cd ext/$gemname && ruby extconf.rb && make 
```

? 还是有更好的做法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:41:51.220

我猜像下面这样的 Rakefile 也可以工作（并且比上面的命令更容易）。但是，这对于测试是否必要并不明显。

```
require 'rake/testtask'
require 'rake/clean'

NAME = 'hola'

# rule to build the extension: this says
# that the extension should be rebuilt
# after any change to the files in ext
file "lib/#{NAME}/#{NAME}.so" =>
    Dir.glob("ext/#{NAME}/*{.rb,.c}") do
  Dir.chdir("ext/#{NAME}") do
    # this does essentially the same thing
    # as what RubyGems does
    ruby "extconf.rb"
    sh "make"
  end
  cp "ext/#{NAME}/#{NAME}.so", "lib/#{NAME}"
end

# make the :test task depend on the shared
# object, so it will be built automatically
# before running the tests
task :test => "lib/#{NAME}/#{NAME}.so"

# use 'rake clean' and 'rake clobber' to
# easily delete generated files
CLEAN.include('ext/**/*{.o,.log,.so}')
CLEAN.include('ext/**/Makefile')
CLOBBER.include('lib/**/*.so')

# the same as before
Rake::TestTask.new do |t|
  t.libs << 'test'
end

desc "Run tests"
task :default => :test 
```

# php - php 正态分配奖金

> ID：13241548
> 
> 赞同：0
> 
> 时间：2012-11-05T22:39:10.663
> 
> 标签：php

好吧，假设我有 1000 个点要分配。

我有 200 名排名球员要分配，但我不想平均分配。

相反，我想歪曲它，以便顶部的玩家往往比顶部的玩家少。如此有效地，我需要某种刺激正态分布一侧的函数。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:44:51.727

```
function grantPoints($totalavailpoints, $numusers, $rank){
  $pointstogrant=$totalavailpoints/$numusers;
  if($rank>$numusers/2)//he has a higher number rank, meaning he gets more points
    $pointstogrant++;
  else
    $pointstogrant--;
  return $pointstogrant;
} 
```

有*很多*方法可以根据您的需要进行调整。但这是非常基本的。它计算出要给出的平均分，如果你在下半部分，它会加一，如果你在上半部分，它会减一。

有几个问题要问自己：

*   返回的点必须是整数吗？
*   每个人的积分总和是否必须等于总可用积分？
*   您希望/需要函数返回的数量有多少多样性？

# c# - 在 AS3/C# 中使用盐加密字符串

> ID：13241556
> 
> 赞同：2
> 
> 时间：2012-11-05T22:39:36.500
> 
> 标签：c#, actionscript-3, c#-4.0, encryption, md5

我正在寻找在 Flex/AS3 中加密字符串并在 C# 中读回它的示例。它们的 C# 部分不如 AS3 重要，因为我对 AS3 知之甚少。

理想情况下，我想让它尽可能短——总共 16 个字符会很好。

我尝试使用 as3corelib 中的 EncryptionKeyGenerator，但我得到一个错误，它找不到 EncryptedLocalStore。

我认为因为我需要导入 com.adobe.air.crypto.EncryptionKeyGenerator 并且 air 和 flex 是冲突的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:14:49.137

可以在 AS3 端使用[as3crypto](http://code.google.com/p/as3crypto/)进行加密，在 C# 端使用 AesCryptoServiceProvider 进行解密[。](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aescryptoserviceprovider.aspx)“盐”无关紧要，但您可以将其用作初始化向量。

根据加密的强度和您要加密的输入的长度，您可以达到 16 个字节的长度，但在将它们作为字符串传递时要小心字符编码。通常最好传递一个十六进制字节数组。

# knockout.js - 是否可以在使用 knockout-kendo.js 填充的 Kendo 组合框中使用模板？

> ID：13241557
> 
> 赞同：0
> 
> 时间：2012-11-05T22:39:37.747
> 
> 标签：knockout.js, kendo-ui

这是不使用淘汰赛剑道的组合框，

```
@(Html.Kendo().DropDownListFor(x => x.TaxYear)
.Name("ddTaxYear")
.DataTextField("Year")
.DataValueField("InvestorVersionId")
.BindTo(Model.AvailableVersions)
.HtmlAttributes(new { @class = "input-small", maxLength = 125, @Id = "ddTaxYear" })
.Template("<span>#: data.Year # <i class='#: getIcon(data.InvestorVersionId) #'></i> </span>")
.Events(events => events.Change("onEffectiveYearChange"))) 
```

这是使用 knockout-kendo.js 的新版本

```
<input data-bind="kendoComboBox: { dataTextField: 'Name', dataValueField: 'Id', data: taxYearList, value: taxYear }" /> 
```

但我现在无法设计它。是否可以添加

```
.HtmlAttributes(new { @class = "input-small", maxLength = 125, @Id = "ddTaxYear" })
.Template("<span>#: data.Year # <i class='#: getIcon(data.InvestorVersionId) #'></i> </span>") 
```

到剑道组合框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T00:09:57.030

Knockout-Kendo 绑定将通过您提供给实际小部件的任何选项。

因此，您实际上可以包含一个`template`选项，例如：

```
<input data-bind="kendoComboBox: { dataTextField: 'name', dataValueField: 'id', 
    data: choices, value: selectedChoice, 
    template: '<span>Name: #: data.name # </span>' }" /> 
```

示例：http: [//jsfiddle.net/rniemeyer/jgs9H/](http://jsfiddle.net/rniemeyer/jgs9H/)

# mysql - 使用 GROUP BY、AVG 等对大表进行慢速 mysql 查询

> ID：13241558
> 
> 赞同：0
> 
> 时间：2012-11-05T22:39:49.523
> 
> 标签：mysql, performance, sql-tuning

我对一个大表（超过 200 万行）进行了查询，需要大约 10 秒才能完成。有什么办法可以优化吗？查询如下：

```
SELECT
    DATE_FORMAT(date0, '%Y-%m' ) AS Yr_Mo, 
    DATE_FORMAT(date0, '%p' ) AS AM_PM,
    province AS Province,
    SUM( IF( top_ads + left_ads =0, 1, 0 ) ) AS pagesWithRightAdsOnly, 
    AVG( top_ads ) AS top_ads, 
    AVG( left_ads ) AS left_ads, 
    AVG( right_ads ) AS right_ads
FROM ad_counts
GROUP BY Yr_Mo, AM_PM, Province 
```

表“ad_counts”：

```
date0 (timestamp)
province(varchar)
keyword_id
number_ads(int)
top_ads (int)
left_ads (int)
right_ads (int) 
```

date0 上的索引，但 date0 不是唯一的。

有什么想法吗？

编辑：解释：

```
id select_type table type possible_keys key key_len ref rows Extra
1 SIMPLE baidu_pro_ad_counts ALL NULL NULL NULL NULL 2160752 使用临时；使用文件排序

```

# sqlclr - Sql CLR 函数行作为输入

> ID：13241559
> 
> 赞同：3
> 
> 时间：2012-11-05T22:39:50.643
> 
> 标签：sqlclr

我正在尝试创建一个可以在 Sql 中使用的 CLR 哈希函数。

我要做的是计算`md5 checksum`一行的值。如何定义函数的输入应该是一行？

例如，Sql 原生校验和函数将“表达式”作为参数，它允许您将其调用为：

```
Select CHECKSUM(*) From dbo.SomeTable 
```

我在 C# 中定义什么签名以便它可以`*`作为参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T19:05:37.283

不，这在 SQLCLR 中是不可能的。

SQLCLR 接口不允许在几个内部 T-SQL 函数中找到一些构造，即：

1.  传入“*”作为输入参数
    示例：CHECKSUM(*)
    示例：BINARY_CHECKSUM(*)

2.  相同函数名的可选输入参数
    示例：CONVERT(DATETIME, '2013-04-20', 101) vs CONVERT(DATETIME, '2013-04-20)
    示例：CHARINDEX('o', 'bob', 3) vs CHARINDEX('o', 'bob')

3.  返回相同函数名称的不同数据类型
    示例：CONVERT(INT, '12') vs CONVERT(DATETIME, '2013-04-20')
    示例：COALESCE(@IntVariable, 12) vs COALESCE(@VarcharVariable, 'test')

本质上，没有函数名的重载。

# java - 具有bean名称的spring bean上的“bean名称不能为空”错误

> ID：13241560
> 
> 赞同：2
> 
> 时间：2012-11-05T22:40:03.060
> 
> 标签：java, spring, tomcat, maven

我对尝试使用我的 Maven 构建启动 Tomcat 时遇到的错误感到困惑（如下所示）。在某些情况下，我正在将旧应用程序转换为 maven 项目。当我运行时出现错误：

```
mvn tomcat:run-war 
```

该项目构建良好，但在服务器启动时解析 applicationContext 文件时崩溃。applicationContext-main.xml（如下所示）包含对在 applicationContext-foo.xml 和 applicationContext.shared.xml 中定义的 bean 的引用。

applicationContext 文件在非 Maven 应用程序中按预期工作，这是 applicationContext 文件的直接副本。

我尝试了一些调试，发现对其他应用程序上下文文件的外部引用得到了很好的解析，添加了一个 name 属性导致：一个名为“cacheManager”的bean已经在这个文件中定义了，将id交换为name 属性会导致相同的“bean name must not be empty error”，并使构造函数 arg 为空映射会导致相同的错误。

我很困惑。我确实遇到过这个[帖子](http://forum.springsource.org/archive/index.php/t-26844.html)，它报告了同样的错误，并且是由在 bean 上设置的前缀引起的。我不知道在我的案例中设置了任何前缀。

关于如何解决这个问题的任何想法？提前致谢。

```
Nov 05, 2012 3:10:11 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [com/xactsites/shared/applicationContext-shared.xml]
Nov 05, 2012 3:10:11 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [com/xactsites/foo/applicationContext-foo.xml]
Nov 05, 2012 3:10:11 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [com/xactsites/help/applicationContext-help.xml]
Nov 05, 2012 3:10:11 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/classes/applicationContext-main.xml]
Nov 05, 2012 3:10:11 PM org.springframework.web.context.ContextLoader initWebApplicationContext
SEVERE: Context initialization failed
org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unexpected failure during bean definition parsing
Offending resource: ServletContext resource [/WEB-INF/classes/applicationContext-main.xml]
Bean 'cacheManager'; nested exception is java.lang.IllegalArgumentException: Bean name must not be empty
Caused by: java.lang.IllegalArgumentException: Bean name must not be empty
    at org.springframework.util.Assert.hasText(Assert.java:161)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.registerBeanDefinition(DefaultListableBeanFactory.java:305)
    at org.springframework.beans.factory.xml.UtilNamespaceHandler$MapBeanDefinitionParser.parse(UtilNamespaceHandler.java:163)
    at org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:78)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1147)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseNestedCustomElement(BeanDefinitionParserDelegate.java:1185)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parsePropertySubElement(BeanDefinitionParserDelegate.java:844)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parsePropertySubElement(BeanDefinitionParserDelegate.java:832)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parsePropertyValue(BeanDefinitionParserDelegate.java:828)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseConstructorArgElement(BeanDefinitionParserDelegate.java:734)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseConstructorArgElements(BeanDefinitionParserDelegate.java:641)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseBeanDefinitionElement(BeanDefinitionParserDelegate.java:563)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseBeanDefinitionElement(BeanDefinitionParserDelegate.java:421)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseBeanDefinitionElement(BeanDefinitionParserDelegate.java:390)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseDefaultElement(DefaultBeanDefinitionDocumentReader.java:165)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:142)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:89)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:499)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:407)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:357)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:126)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:142)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:123)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:91)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:94)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:294)
    at org.springframework.web.context.support.AbstractRefreshableWebApplicationContext.refresh(AbstractRefreshableWebApplicationContext.java:156)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:246)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:184)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:49)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4135)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4630)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:785)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:445)
    at org.apache.catalina.startup.Embedded.start(Embedded.java:825)
    at org.codehaus.mojo.tomcat.AbstractRunMojo.startContainer(AbstractRunMojo.java:558)
    at org.codehaus.mojo.tomcat.AbstractRunMojo.execute(AbstractRunMojo.java:255)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352) 
```

applicationContext-main.xml

```
...
<bean id="cacheManager" class="com.foo.bar.commons.caching.MainCacheManager">
    <constructor-arg>
        <util:map>
            <entry key="RIGHTS_CACHES">
                <util:list value-type="com.foo.bar.commons.caching.MainCache">
                    <ref bean="aCache" />
                    <ref bean="gRepository" />
                    <ref bean="gRCache" />
                    <ref bean="uRCache" />
                    <ref bean="userService" />
                    <ref bean="vUService" />
                    <ref bean="rIService" />
                </util:list>
            </entry>
            <entry key="RULES_CACHES">
                <util:list value-type="com.foo.bar.commons.caching.MainCache">
                    <ref bean="gBRService" />
                </util:list>
            </entry>
        </util:map>
    </constructor-arg>
</bean>
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T22:50:26.800

[官方文档中的](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/xsd-config.html#xsd-config-body-schemas-util)所有示例似乎都使用`id=""`了属性，请查看：

```
<util:map id="caches">
    <entry key="RIGHTS_CACHES">
        <util:list id="rightsCaches" value-type="com.foo.bar.commons.caching.MainCache">
            <ref bean="aCache" />
            <!-- ... -->
        </util:list>
    </entry>
    <entry key="RULES_CACHES">
        <util:list id="rulesCaches" value-type="com.foo.bar.commons.caching.MainCache">
            <ref bean="gBRService" />
        </util:list>
    </entry>
</util:map> 
```

并考虑使用 Java `@Configuration`，它比 XML 更易于阅读和维护。

# c# - 如何在 MVC3 中公开身份验证令牌

> ID：13241561
> 
> 赞同：0
> 
> 时间：2012-11-05T22:40:06.297
> 
> 标签：c#, asp.net-mvc-3, repository, membership

我目前在我的基本控制器中有我的身份验证令牌。正因为如此并使用 Membership API，我不得不在我的控制器中调用我的所有存储库。我想在我的模型中接触这些存储库，但需要这个令牌可用。

是否有一个地方可以设置此令牌，该令牌将在每个请求上更新而不会影响所有用户？有没有办法只公开这个，我的视图模型可以在一些基本模型中访问它并用它调用 repos？

这是我在基本控制器中的当前代码：

```
/// <summary>
/// Provide authentication credentials for the current user.
/// </summary>
protected IToken AuthenticatedUserToken
    {
        get
        {
            var userCred = (UsersCredential) this.Session [GlobalContext.UserCredentialsSessionKey];
            if ( userCred != null )
            {
                return userCred.UsersToken;
            }
            if (Request.IsAuthenticated)
            {
                var name = HttpContext.User.Identity.Name;
                var repository = new UserRepository(GlobalContext.ProvisioningApiServiceBase,
                                                               GlobalContext.WebServiceUserAuthenticationToken);
                var usersCredential = new UsersCredential
                {
                    UsersName = name,
                    UsersToken =
                        repository.GetAuthenticationTokenForAuthenticatedUser(name)
                };
                Session[GlobalContext.UserCredentialsSessionKey] = usersCredential;
                return usersCredential.UsersToken;
            }                
            return null;
        }
    }

protected RepositoryCollection _Repositories { get; set; }
protected RepositoryCollection Repositories
    {
        get
        {
            if (_Repositories == null)
            {
                _Repositories = new RepositoryCollection(this.AuthenticatedUserToken);
            }
            return _Repositories;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:36:22.493

Change the access level of the property to public from protected. Protected methods and properties are only visible by the class and it's ancestors.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:54:00.817

如果我理解您的问题：最好在行动中更新您的模型，而不是为您的模型提供对存储库的访问。如果您有一些基本模型并且您想在几乎每个请求上填充一些属性并且您不想复制过去的代码，您可以使用将为您设置此属性的操作过滤器。在这种情况下，您不需要在模型类中包含任何逻辑。像[这样的东西](http://blog.clicktricity.com/2010/08/populating-common-view-model-attributes/)

# ios - 用户单击 UITableView 中的单元格进行重新排序，我如何知道被拖动单元格的索引和位置？

> ID：13241566
> 
> 赞同：0
> 
> 时间：2012-11-05T22:40:33.127
> 
> 标签：ios, uitableview

使用提供的 reorderControls，用户可以点击并按住以拖动单元格以重新排序。我如何知道他们选择拖动哪个单元格以及该当前单元格的位置（即当其他单元格动画为浮动单元格腾出空间时，我想要移动单元格的索引）？

我要做的是滚动视图，以便如果用户希望使用屏幕外单元格重新排序当前单元格，则屏幕外单元格将在屏幕上滚动。我不能使用内置行为，因为我的设置是：

UIScrollView（父）

*   UITableView（子）

并且 UITableView 框架是其 contentSize 的完整大小（它不滚动）。我需要相对于用户拖动单元格的位置滚动外部 UIScrollView 以在 UITableView 中重新排序。

我尝试查看委托和数据源函数，但到目前为止没有运气。还尝试了谷歌搜索和Apple文档......

编辑：似乎我无法阅读文档。`tableView:targetIndexPathForMoveFromRowAtIndexPath:toProposedIndexPath:`在委托协议中给了我我需要的东西。

解决方案：从 tableview 创建一个委托到滚动视图的控制器（我的 tableview 是它自己的委托）。在提议的索引路径函数中，我向代理发送了需要变得可见的providedDestinationIndexPath 附近的单元格。如果 indexpath 为 0 或最大值，这可能是该单元格本身。然后在委托中，我使用 [view convertPoint:FromView:] 函数计算该单元格的位置，并设置滚动视图的内容偏移量以使该单元格可见！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:55:04.333

通常，当您拖动单元格时，表格视图会在您到达顶部或底部时自动滚动。听起来滚动视图的使用阻止了它正常工作，因为表格视图认为它足够大而不能滚动。没有正常的 API 调用可以为您提供所需的答案。

我能想到的唯一能让你接近的事情是`tableView:targetIndexPathForMoveFromRowAtIndexPath:toProposedIndexPath:`表视图委托方法的实现。

这`proposedIndexPath`可能会让您大致了解用户当前拖动行的位置。您可以使用该 indexPath 向表询问`CGRect`路径的。然后将其转换为滚动视图的内容视图中的一个位置。

不过，这远非完美。

另一种可能性可能是将观察者添加到正在移动的单元格的`frame`or`center`属性。

# php - 需要表单发布到两个服务器外 URL，然后使用 PHP 重定向

> ID：13241577
> 
> 赞同：1
> 
> 时间：2012-11-05T22:41:05.060
> 
> 标签：php, asp.net, forms, post

我有一个需要提交到两个单独 URL 的表单：一个是用于存储数据的 Google 电子表格，另一个是非现场 ASP 表单处理程序脚本。当我将表单操作设置为任一 URL 时，它都能完美运行。但是，我需要它提交到两个 URL，然后重定向到一个简单的 success.html 页面。如果它们不是外部脚本，我可以使用 AJAX 轻松完成（[请参阅文章](https://stackoverflow.com/questions/8024490/post-form-to-more-urls)），但由于跨域问题，这不是一个选项。这是我的代码：

```
<form name="apply-now-form" action="somescript.php" method="POST" id="apply-now-form"   class="apply-now-form">
   <label class="form-label" >Full Name</label>
     <input name="FirstName" id="FirstName" type="text">
     <input name="LastName" id="LastName" type="text" >
   <label>Phone Number</label>
     <input name="ResidencePhone" id="ResidencePhone" type="text" > 
   <label>Email Address</label>
     <input name="EmailAddress" id="EmailAddress" type="email" >
</form> 
```

ASP 脚本处理成功重定向，所以我认为它应该被提交到那一秒。有没有办法使用 cURL 或其他方式使用 PHP 将未更改的表单数据发送到多个 URL？或Javascript，如果这是一个选项？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:51:35.447

您可以使用 CURL 执行此操作。

```
1- Create the data array and serialize it:

$fields = array( $k => $v,...);

 foreach ($fields as $key => $value) {
        $fields_string .= $key . '=' . $value . '&';
    }
 rtrim($fields_string, '&'); 
```

2- 将数据发送给 Google：

```
 $ch = curl_init();
  curl_setopt($ch, CURLOPT_URL, 'http://googlesite');
  curl_setopt($ch, CURLOPT_POST, count($fields));
  curl_setopt($ch, CURLOPT_POSTFIELDS, $fields_string);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
  $result = curl_exec($ch);
  curl_close($ch); 
```

3- 将数据发送到 ASP：

```
 $ch = curl_init();
  curl_setopt($ch, CURLOPT_URL, 'http://aspweb');
  curl_setopt($ch, CURLOPT_POST, count($fields));
  curl_setopt($ch, CURLOPT_POSTFIELDS, $fields_string);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
  $result = curl_exec($ch);
  curl_close($ch); 
```

4-重定向

```
 header('Location: http://successpage') 
```

我想就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:44:09.253

你命名它......你必须使用 curl！一个不错的起点可能是 PHP cURL 手册： http: [//php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

# c# - 数据列表中的 ASP.NET CustomValidator OnServerValidate？

> ID：13241581
> 
> 赞同：1
> 
> 时间：2012-11-05T22:41:46.720
> 
> 标签：c#, asp.net, datalist, customvalidator

我需要为数据列表中的一堆文本框使用自定义验证器，但是我不确定如何从数据列表中调用自定义验证器的“OnServerValidate”。

到目前为止，我正在我的数据列表的 ItemDataBound 中动态创建我的自定义验证器（尽管我对另一种方式持开放态度）：

```
protected void dataList_ItemDataBound(object sender, DataListItemEventArgs e)
{
     CustomValidator cv = (CustomValidator) e.Item.FindControl("CustomValidator1");
    cv.ControlToValidate = "txtTextBox1";
    cv.ServerValidate += new EventHandler(CustomValidator1_ServerValidate);
} 
```

但是我的“cv.ServerValidate”行抛出了一个错误。我不完全确定如何正确设置它以确保我们有一个“OnServerValidate”

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:02:07.390

您不需要在运行时创建 CustomValidator，在模板中使用它要容易得多。这是用于在 EditItemTemplate 中验证文本框的示例代码：

```
<asp:DataList ID="DataList1" runat="server">
    <EditItemTemplate>
        <asp:TextBox ID="TextBoxNextActionDate" Text='<%# Bind("NextActionDate") %>' runat="server"
                        CssClass="gridTextBoxEdit140"></asp:TextBox>
        <asp:CustomValidator ID="CustomValidator1" runat="server" ControlToValidate="TextBoxNextActionDate"
                        ErrorMessage='<% $resources:AppResource,NotValidDateTime %>' Display="Dynamic"
                        OnServerValidate="DateTimeCustomValidator_ServerValidate"></asp:CustomValidator>
     </EditItemTemplate>
</asp:DataList> 
```

这是处理程序：

```
 protected void DateTimeCustomValidator_ServerValidate(object source, ServerValidateEventArgs args)
    {
        DateTime d = new DateTime();
        if (!DateTime.TryParse(args.Value, out d))
        {
            args.IsValid = false;
        }
        else
        {
            args.IsValid = true;
        }
    } 
```

希望这可以帮助！

# java - 无法连接到 JReport 中的数据库

> ID：13241582
> 
> 赞同：1
> 
> 时间：2012-11-05T22:41:48.700
> 
> 标签：java, oracle, oracle11g

我在 Windows 7 上使用 JReport 9.1，当我尝试运行我的报告时，我收到此错误：

> 报告引擎：查询执行错误。详细信息：连接 jdbc:oracle:thin:@xxx.xxx.xx.xxx:1521:db_name 时出错，无法初始化类 oracle.jdbc.driver.DMSFactory 确保表名、列名和连接有效，并且可以从类路径加载 JDBC 驱动程序。

Oracle 数据库是 11.2.0.3。我的`CLASSPATH`. 我安装了 JRE6 和 JDK1.6。这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:34:30.053

您可以使用`ojdbc6.jar`而不是`ojdbc6dms_g.jar`. 而 JDBC 驱动程序类是`oracle.jdbc.driver.OracleDriver`. 看起来您的 Oracle DMS 有问题或 CLASSPATH 有问题。

# ios - 获取错误的日期

> ID：13241584
> 
> 赞同：0
> 
> 时间：2012-11-05T22:41:56.603
> 
> 标签：ios, xcode, nsdate, nsdateformatter, nscalendar

我正在尝试获取本周星期一至星期四的日期。但是由于某种原因，这段代码给了我本周日期和前几周日期的混合。

我知道这可能是一种奇怪的做法，但我真的不知道代码有什么问题。

如果有人有更好的方法来获取日期，请给出提示:)

我的代码：

```
NSDate *today = [NSDate date];

//Change first weekday of the week

NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
gregorian.firstWeekday = 2;

NSCalendar *gregorian1 = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
gregorian1.firstWeekday = 3;

NSCalendar *gregorian2 = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
gregorian2.firstWeekday = 4;

NSCalendar *gregorian3 = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
gregorian3.firstWeekday = 5;

NSDateComponents *components = [gregorian components:NSWeekCalendarUnit fromDate:today];

NSUInteger weekOfYear = [components weekOfYear];

//Give the date of the first week day

NSDate *mondaysdate = nil;
[gregorian rangeOfUnit:NSWeekCalendarUnit startDate:&mondaysdate interval:NULL forDate:today];
NSDate *tuesdaysdate = nil;
[gregorian1 rangeOfUnit:NSWeekCalendarUnit startDate:&tuesdaysdate interval:NULL forDate:today];

NSDate *wednesdaysdate = nil;
[gregorian2 rangeOfUnit:NSWeekCalendarUnit startDate:&wednesdaysdate interval:NULL forDate:today];
NSDate *thursdaysdate = nil;
[gregorian3 rangeOfUnit:NSWeekCalendarUnit startDate:&thursdaysdate interval:NULL forDate:today];

//Making the dates into string

NSDateFormatter *formatter2 = [[NSDateFormatter alloc]init];
formatter2.dateFormat = @"yyyy/MM/dd";

NSString *monday = [formatter2 stringFromDate:mondaysdate];
NSString *tuesday = [formatter2 stringFromDate:tuesdaysdate];
NSString *wednesday = [formatter2 stringFromDate:wednesdaysdate];
NSString *thursday = [formatter2 stringFromDate:thursdaysdate]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:49:44.523

您可以使用以下内容获取星期几作为数字，这是伪代码，因此可能无法编译，但它应该给您一个良好的开端。根据数字，您可以生成其他日期，然后稍后将它们作为字符串返回。

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"c"]; //<-  gives you day of week as an integer, 1 for monday, 2 for tuesday, etc

NSDate *today = [NSDate date];
NSInteger dayOfWeek = [[df stringFromDate:today] integerValue]; 
```

然后通过将日期偏移量添加到您的原始今天变量来创建其他 NSDates。

然后将它们格式化。

```
[df setDateFormat:@"yyyy/mm/dd"];
[df stringFromDate:today]; //<-- do this for all the other dates too

[df release]; //<- if you do this method often, consider having the date formatter as global 
```

这是格式化的一个很好的参考。 [http://unicode.org/reports/tr35/tr35-6.html#Date_Format_Patterns](http://unicode.org/reports/tr35/tr35-6.html#Date_Format_Patterns)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:56:41.153

```
NSCalendar *gregorianCalendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *comps = [gregorianCalendar components:(NSYearCalendarUnits | NSMonthCalendarUnits | NSWeekCalendarUnits | NSWeekdayCalendarUnits) fromDate:[NSDate date]];

comps.weekday = 2;
NSDate *monday = [gregorianCalendar dateFromComponents:comps];

comps.weekday = 3;
NSDate *tuesday = [gregorianCalendar dateFromComponents:comps];

comps.weekday = 4;
NSDate *wednesday = [gregorianCalendar dateFromComponents:comps];

comps.weekday = 5;
NSDate *thursday = [gregorianCalendar dateFromComponents:comps]; 
```

# matlab - 如何在 Matlab 中自动创建计数器变量

> ID：13241589
> 
> 赞同：0
> 
> 时间：2012-11-05T22:42:28.317
> 
> 标签：matlab, variables, counter

我正在设计一个需要从没有变量开始的应用程序。但是，在某些时候，用户会输入他想要数的东西，比如橙子。然后他会输入“橙子”。在他写完橘子之后，我想让 Matlab 创建一个变量“orangesCounter”。有谁知道我怎么能做到这一点？

或者也许有人知道我正在尝试做的事情的名称，如果它有一个特定的名称。我只是不知道如何正确地谷歌这个问题，因为我不知道这种类型的变量创建是否有名称。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T23:15:46.920

您正在为自己设置一个巨大的混乱，因为您将如何处理您在代码中不知道名称的变量？无论如何，这是你的脚，所以这是枪：

```
%# ask for input
varName = input('what do you want to count? Please enclose the word in single quotes.\n')

%# make the corresponding counter variable, initialize it to 0
eval(sprintf('%sCounter=0;'varName')); 
```

这是一个更好的方法：

```
variables = struct('name','','value','');

%# ask for the first variable
variables(1).name = input('what do you want to count? Please enclose the word in single quotes.\n');

%# ask for how many things there are
variables(1).value = input(sprintf('how many %s are there?\n',variables(1).name));

%# and return feedback
fprintf('There are %i %s.\n',variables(1).value,variables(1).name); 
```

请注意索引 - 您可以在结构中拥有多个名称/值对。

# magento - magento 开源整页缓存

> ID：13241591
> 
> 赞同：3
> 
> 时间：2012-11-05T22:42:46.157
> 
> 标签：magento, caching

我最近与一位开发人员交谈，他说即使使用默认安装，也没有 magento CE 整页缓存可以完美运行。

我的经验是一样的。

如果你使用 aoe_static 的 awesome 模块和 phoenix 的全页缓存和 varnish 模块，你会接近的。

使用 aoe_static 模块缓存是在每个动作的基础上完成的，这对我来说似乎是明智的。打孔是通过布局 xml 应用的占位符和通过不会被缓存的 ajax 调用请求的动态块来完成的。cookie 也通过此调用设置。他提供了一个默认的 vcl，它适用于 varnish 2（我从未检查过），并且可以很容易地更改为 varnish 3。

phoenix 模块很好地处理了缓存失效。您可以在模块的控制文件夹中看到方法。这会在产品或类别更改时处理缓存失效，并使产品页面和类别页面都失效。但是，分层导航生成的 url 可能会被缓存（取决于您的 vcl）。这些并没有失效，所以要小心。

在我在生产站点上使用这些模块之前，我真的很想知道这些模块是否存在任何其他问题。如果有人能指出我的问题，我很乐意尝试发布解决方案。

但是对于分层导航 url，需要一个模型来记录生成的带有类别 id 的 url。我想拥有一个 2 列模型（url 和类别）会很简单，然后缓存失效需要检查模型并使额外的 url 失效。这应该在主类别 url 完成的同时完成。听起来还不错。如果有人得到我非常简短的解释，请在我浪费时间之前告知我是否遗漏了什么。

我宁愿在一些社区帮助（或领导更有经验的人）的帮助下创建一个开源项目，至少在默认的 1.7 安装中具有（当之无愧的）可靠性声誉。我认为最明智的做法是创建一个包含或记录所有边缘案例（对于默认的 1.7 安装）的模块。

有谁知道如何执行这样的任务？如果有更多的社区支持使用 apc 或 memcached 执行此操作，那么对于更广泛的托管可用性可能更明智。逻辑或开发时间不会有太大变化。

这可以扩展到涵盖应该牢记的块的会话缓存，但我认为关注可靠的整页缓存应该是优先事项。

您还可以在 vcl 中检测设备。这可以添加到想要移动版本的商店[https://github.com/varnish/varnish-devicedetect/blob/master/devicedetect.vcl](https://github.com/varnish/varnish-devicedetect/blob/master/devicedetect.vcl)

我已经为这个项目创建了一个电子邮件，所以如果你想参与它是“magefpc gmail com”。任何有 magento、git 和调试经验的人都会受到欢迎。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:29:51.633

aoe_static 可能遇到的第 1 个问题是，当前扩展程序不记录产品，因此后端中有关查看产品的统计信息不会更新。这是最近作为 TODO 注释添加到 github 中的。

varnish 和 magento 缓存的问题是，magento 缓存部分页面、块和 varnish 确实缓存了整个页面。因此，即使凤凰解决方案有观察者并在产品/类别更新时相应地重置清漆，您仍然在 magento 中有块必须重置。aoe_static 试图解决这个问题，但它只适用于页面上的可见块。但是magento的其他部分，作为分层导航，可能会在产品/类别更新内部重置，但不会在清漆中重置。有2个解决方案。要么在产品/类别更新后识别前端的 magento 的每个部分，什么都不会重置，然后对其应用 aoe_static 解决方案。这意味着您必须通过 ajax 加载分层导航。或者第二种解决方案是，在 phoenix 扩展中添加更多逻辑以使更多清漆页面无效。

我有几个自定义扩展（显示产品的页面），并且我构建逻辑以在每次更新产品/类别时使这些扩展无效。现在我正在研究搜索，因为这也需要失效，但复杂的部分是，解决块和缓存失效逻辑。

总体而言，正确的缓存失效是 Web 开发中最困难的部分之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T01:14:45.507

我希望这篇文章成为一个社区答案，详细说明特定句柄的方法以及建议的缓存和失效逻辑，如果它尚未包含在 phoenix 或 aoe_static 模块中。基本上缓存将通过 aoe_static 模块中的模块/控制器/动作模式完成，并且大部分现有的失效存在于 Phoenix 模块中。

所以我们需要决定哪些块应该通过 ajax 呈现，以及在哪里需要添加缓存失效。就像 gondo 说的那样，您需要为缓存搜索添加更多的失效逻辑。我打算从目录、cms 和 aw 博客页面开始，这里已经做了很多，但还需要更多。如果我们也可以在 gondo 的帮助下添加搜索 :)，那就太好了。

例如 - 小部件实例可能是一个问题，静态块保存也是如此。这可以（据我非常快速的调查显示）仅通过使用 core_model_abstract 方法 _beforeSave() 调度的事件运行完全缓存失效来轻松解决

```
 Mage::dispatchEvent('model_save_before', array('object'=>$this)); 
```

在使整个缓存失效之前，我们需要匹配模型的类型。在缓存失效的其他困难领域，这种模式也将是一个实时节省。使用 instanceof 方法很好，但我们需要知道要检查的模型名称。我想社区参与在这里很棒，因为代码很简单，但缺少模型。

从前端的角度来看，小部件本质上是相同的。带有产品的那个应该加载aoe_static，因为它们经常变化。但是静态的可以被视为静态（html）块。

我们不想在保存产品时使整个缓存无效，并且无法检查该产品是否已包含在小部件中。但是 aoe_static 模块适用于布局渲染。小部件需要通过布局 xml 包含，而不是像通常那样包含在管理员所见即所得中。这些小部件可以添加到呼叫控制器句柄，并将占位符添加到需要的任何句柄中。

全清漆失效，时不时，不是床的事。如果它发生得太频繁，或者如果它在需要时没有发生，那么整个缓存失效是一个问题。主要目标应该是捕获每个失效场景并在管理面板中触发通知，与保存产品时收到的相同类型的消息：“一个或多个缓存类型失效......”这样管理员可以做出决定如果他/她想手动使缓存无效或等待。并且ofc可以根据这种情况内置一些自动失效逻辑。

还必须创建模型来存储由分层导航创建的 url，并且这些应该与类别视图 url 一起失效。

并且考虑到分层导航和一般失效，我们必须在保存属性时使整个缓存失效（我认为）。

我们应该能够在没有 ajax 的情况下将产品评论放在产品页面上，以达到 seo 的目的。

这意味着当保存评论模型时，必须使用 model_save_before 事件对其进行检查，并且我们应该使产品页面 url 无效。此保存更改了评级，但我建议在 ajax 调用中获取此块。这对 seo 来说并不重要。这适用于产品视图和列表页面。

我们还可以缓存和使评论模块页面无效，但这对大多数用户来说并不重要，应该等待。

谁想要标签块。这些不能由 ajax 加载，这违背了它们的目的。同时，他们现在不值得我们努力。

如果您缓存带有会话 ID 的 url，它将导致用户获取彼此的会话，我被告知。我认为这很容易通过基于正则表达式的 vcl_fetch 管道解决。

这个答案越来越混乱，应该很快重新起草。随意添加您的 2 美分！

# uitableview - 获取多个实体之间没有关系

> ID：13241593
> 
> 赞同：2
> 
> 时间：2012-11-05T22:42:56.907
> 
> 标签：uitableview, core-data, nsfetchedresultscontroller, fetch, nsfetchrequest

我有一个包含多个实体的核心数据模型，每个实体对应一个视图控制器，用户为每个实体插入信息，例如：

轮胎（第一个实体） - 类型（第一个属性），成本（第二个属性）。玻璃（第二个实体） - 颜色（第一个属性）、尺寸（第二个属性）、成本（第三个属性）。

对于每个实体，我都有一个带有文本字段的 MVC，用户为每个实体插入信息，所以如果你按下轮胎按钮，你会为其他实体插入一种轮胎、成本……等等。

当我只拉一个实体时一切顺利，我在文本字段中插入信息然后按保存，它很好地出现在我的 tableview 上！但是，正如您已经知道的那样，我希望将其余实体插入到我的 tableview 和不同的部分中。

我试过用“cellForRowAtIndexPath”“弄乱”，也在我的“fetchedResultsController”方法中用“if´s”和“swich´s”但没有成功。我在这里想念什么？！？！？！

谢谢，对不起我的英语。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T05:45:49.323

您需要一个实体才能`NSFetchedResultsController`正常工作并利用其高级内存和性能特性。

因此，修改您的数据模型并创建一个新实体，`Item`即其他实体的**抽象父**实体。（您可以在模型编辑器中分配父实体。）确保所有项目共享的属性（例如名称）属于父实体。这些应该是您希望在表格视图中显示的属性。

现在，您可以为每个子实体添加唯一的`NSString`或`NSNumber`属性，并在.`type``NSFetchedResultsController`

来自 Apple 的 [Core Data Programming guide][1] ：

> 如果您定义实体继承层次结构（请参阅“实体继承”），当您将超实体指定为获取请求的实体时，该请求将返回超实体和子实体的所有匹配实例。在某些应用程序中，您可以将超实体指定为抽象的（请参阅“抽象实体”）。要获取抽象实体的所有具体子实体的匹配实例，请将要获取规范的实体设置为抽象实体。在“抽象实体”中描述的域的情况下，如果您使用 Graphic 实体指定提取请求，则提取将返回 Circle、TextArea 和 Line 的匹配实例。

因此，您获取 all `Items`，按 排序`type`，并为每个单元格确定类型并使用适当的属性填充文本标签。

# assembly - 双缓冲，汇编 x86

> ID：13241594
> 
> 赞同：3
> 
> 时间：2012-11-05T22:43:01.383
> 
> 标签：assembly, x86, drawing, graphic, doublebuffered

好吧，我正在 Assembly x86 ( 8086 ) 上制作 Space Invaders 游戏，到目前为止运行良好。我在图形模式下使用程序集`13h`，这意味着 320x200 像素和 256 色。

对于绘图，我使用 sub-function `0ch`，这意味着我正在逐个像素地绘制。问题是屏幕被清除得很快，并导致一些视觉故障。

我以前编写过一些游戏，解决方案可能是双缓冲绘图。如何在 Assembly x86 中实现这一点？

**编辑**

我正在使用 Windows 8 X64 来测试和运行我的代码 DOSBox Portable、tasm 和 tlink。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:51:06.813

您需要 RAM 中的缓冲区（320*200 = 64000 字节）。这个缓冲区几乎填满了一个段，所以最好确保缓冲区的起始地址是“segment:0x0000”。您可以通过在 RAM 中的此缓冲区中设置像素/字节来绘制内容。例如，要将 (x,y) 处的像素设置为颜色 c，您可以执行以下操作：

```
mov ax,[y]
mov dx,320
mul dx               ;dx:ax = y * 320
mov di,[x]           ;di = x
add di,ax            ;di = y * 320 + x
mov bx,[bufferSeg]   ;bx = segment of video buffer
mov es,bx            ;es:di = address of pixel
mov al,[c]           ;al = colour
mov [es:di],al       ;Store colour in buffer at (x,y) 
```

如您所见，此计算是混乱/缓慢的；而且您不想为每个像素都这样做。幸运的是，您几乎不需要绘制单个像素（通常您正在绘制线条或字符，或“精灵”），通常您可以计算第一个像素的地址，然后向其添加一些东西以找到下一个像素的地址从头开始计算下一个像素的地址。例如，对于绘制一条垂直线，下一个像素的地址是前一个像素的地址 + 320。

对于图形模式 0x13；显示内存位于物理地址 0x000A0000（或 0xA000:0x0000）。绘制完所有内容后，您会将所有内容从缓冲区复制到显示内存。例如：

```
mov ds,ax              ;ds = segment for buffer
xor si,si              ;si:si = address for buffer
mov ax,0xA000          ;ax = segment for display memory
mov di,ax              ;di = segment for display memory
mov es,ax              ;es:di = address for display memory
mov cx,320*200/2       ;cx = number of words to copy
cld                    ;Make sure direction flag is clear
rep movsw              ;Copy 320*200/2 words from buffer to display memory 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:13:52.640

mov es,[bufferSeg] 有效。在进行段/内存和内存/段移动时，您不需要使用额外的寄存器。

# iphone - cocos2d - 重复滚动背景有一条恼人的加入线

> ID：13241599
> 
> 赞同：2
> 
> 时间：2012-11-05T22:43:11.100
> 
> 标签：iphone, cocos2d-iphone

我正在尝试使用垂直滚动的背景。我有一个两倍于屏幕高度的图像。该图像是平面蓝色图像（无缝）。然而，在滚动过程中，一条细黑线仍然存在于滚动时图像连接的位置。

我使用了正常的偏移机制来实现无限滚动。

有人可以帮我删除这条线吗？附上图片。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:47:19.707

采用

```
myImage.scaleY=1.01f; 
```

它通常有效，为您的情况找到合适的值，也许是 1.05，也许是 1.001。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T23:50:09.920

将背景设置为 0.5 像素位置。将每帧的位置更新为 0.5 坐标，例如 (20.5, 100.5)。

另一种方法是让背景图像重叠 1 个像素。

# r - 当我在 R 中使用函数 read.fwf 时，如何在字符中保留零？

> ID：13241600
> 
> 赞同：0
> 
> 时间：2012-11-05T22:43:14.797
> 
> 标签：r, matrix, zero

我的代码是

```
ff <- tempfile()
cat(file=ff,"11220011003","11220011003",sep="\n");
x <- read.fwf(ff,widths=c(2,2,4,3)) 
```

我得到一个这样的矩阵：

```
11 22 11  3
11 22 11  3 
```

但我想要的结果是

```
11 22 0011 003
11 22 0011 003 
```

我应该如何更正我的代码以获得我想要的矩阵？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T23:04:10.153

`read.fwf`返回一个data.frame，而不是一个矩阵；它似乎正在返回一个数字向量的data.frame。如果您想要一个字符向量的 data.frame，请指定`colClasses`（参见参考资料`?read.table`）。

```
x <- read.fwf(ff,widths=c(2,2,4,3), colClasses=rep("character",4))
x
#   V1 V2   V3  V4
# 1 11 22 0011 003
# 2 11 22 0011 003
str(x)
# 'data.frame':   2 obs. of  4 variables:
#  $ V1: chr  "11" "11"
#  $ V2: chr  "22" "22"
#  $ V3: chr  "0011" "0011"
#  $ V4: chr  "003" "003" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T23:08:04.170

试试这个：

```
ff <- tempfile()
cat(file=ff,"11220011003","11220011003",sep="\n");
x <- read.fwf(ff,widths=c(2,2,4,3), colClasses = "character")
x
#   V1 V2   V3  V4
# 1 11 22 0011 003
# 2 11 22 0011 003 
```

然后你可以使用你想要的列转换为整数`as.integer()`

# javascript - 使 extjs textarea 不可编辑

> ID：13241605
> 
> 赞同：8
> 
> 时间：2012-11-05T22:43:40.447
> 
> 标签：javascript, extjs

如何在 extjs 4 中使 textarea 字段不可编辑？我看到 API [extjs textarea](http://www.objis.com/formationextjs/lib/extjs-4.0.0/docs/api/Ext.form.field.TextArea.html)，但我没有看到可编辑的属性。我只需要在文本区域中显示文本消息，但我还希望它在其中有更多文本时自动滚动，这是 textarea 组件可以提供的，但我仍然不希望它可编辑。

或者我应该使用不同的文本组件？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-05T23:05:25.337

我猜你正在寻找配置`readOnly:true`

# objective-c - 离线数据存储/同步选项、Core Data、TouchDB 还是其他？

> ID：13241606
> 
> 赞同：3
> 
> 时间：2012-11-05T22:43:51.783
> 
> 标签：objective-c, ios

我正在创建一个原生 iOS 应用程序，并且我有一组 REST 服务，我利用这些服务从 Web 服务器中提取数据并在本地存储以供离线使用。在开始一天的工作之前，用户每天都会同步大量数据。

起初，我想只使用我以前使用过的 Core Data，但我真的不期待在设备上的 sqllite 中重新创建这么大的模式。

我宁愿将 JSON 直接存储到像 TouchDB 这样的 NOSQL 数据库中，并尽可能从那里查询它，但我担心提取数据时的内存消耗。在这种情况下，Core Data 将允许相对较低的内存使用量，但代价是大量繁重的工作。

这适用于每条记录有 2000 个数据点的数据输入应用程序，其中一些是大文本字段。用户可以离线一整天，并且需要本地的所有内容，以便他们可以在一天结束时返回并同步，以将他们的工作合并回生产并获得第二天的工作清单。

到目前为止，我一直将 TouchDB 和 CouchBase 作为存储 JSON 数据的替代方案。我已经在 SO 上查找了几个关于此的主题，并且我看到很多人使用 TouchDB 和 CouchBase，但是对于非常少量的数据。就像我说的，我离开 Core Data 的舒适区时最大的担忧是查询数据时的性能和内存利用率。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:07:02.643

我最终选择了 Core Data……我相信这是当时最好的选择。

# wordpress - 使用 the_date() 时 WordPress 日期不显示

> ID：13241608
> 
> 赞同：1
> 
> 时间：2012-11-05T22:44:00.603
> 
> 标签：wordpress

我遇到的问题是日期只显示在某些帖子上。我目前正在使用该`the_date`功能来显示日期。

如何解决此问题以将日期应用于所有帖子？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-05T23:18:39.060

我的猜测是你正在使用`the_date()`. 如 WordPress 文档中所述，如果同一天有多个帖子，它只会显示一次。

> *当同一天发布的页面上有多个帖子时，the_date() 仅显示第一个帖子的日期（即 the_date() 的第一个实例）。要为同一天发布的帖子重复日期，您应该使用带有特定日期格式字符串的模板标签 the_time() 或 get_the_date()（自 3.0 起）。用于添加在管理界面中设置的日期。*

使用`the_time`或`get_the_date()`代替。请注意，`the_time`回声 while`get_the_time`不会。

这两个函数都有一个可选参数，让您有机会指定您想要返回的日期格式。该参数遵循 PHP 日期格式，您可以在 php.net 上阅读更多相关信息：http: [//se2.php.net/manual/en/function.date.php](http://se2.php.net/manual/en/function.date.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-09T11:18:52.183

它只出现一次，因为这就是日记的工作方式。它会在顶部显示日期，您将在其下方写下您的条目。使用 echo get_the_date 代替，这将为每个帖子回显，而不是为当天的所有日期回显一次。

```
<?php echo get_the_date(); ?> 
```

有关更多信息，您可以在此处阅读：[WordPress Date Not Showing When Using the_date()](https://jonnyjordan.com/blog/the_date-function-wordpress-shows-once-first-post/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-28T14:12:20.770

解决这个问题的方法很简单，就像前面提到的一样

```
the_time('d/m/y'); 
```

我对这个问题的 50 美分是`is_new_day()`基本上检查是否`global $currentday, $previousday;`相同的功能。

所以用这样一个简单的 if/else 语句：

```
if ( !is_new_day() ) {
  echo '<span>-//-</span>';
} else {
  the_date('d/m/y');
} 
```

因此，根据您的设计（例如，在列表中重复不是很好，在卡片中是强制性的），您可以保持这种小小的良好感觉，避免重复的日期添加符号。

整洁吧？

# javascript - 不能包含多个 js 文件。Onload 事件仅针对最后一个文件触发，但次数与我有文件一样多。如何解决？

> ID：13241610
> 
> 赞同：0
> 
> 时间：2012-11-05T22:44:06.300
> 
> 标签：javascript, include, onload, script-tag, appendfile

我想`js`动态附加几个文件。每个文件都有一个函数定义，我想将其代码保存在对象的属性中。我使用纯 JavaScript 和`script`标签。但`onload`事件无法正常工作。如果我只包含一个文件，一切正常。但如果超过一个，`onload`就出问题了。这是我的代码，它是对象中的方法：

```
// My files I want to include:
one.js
   function one() { alert('one') };

two.js
   function two() { alert('two') };

// My code in the object 
var one = null;
var two = null;   // In these properties I want to save my functions

function inc(files) {   // 'files' is the object {one: 'one', two: 'two'}
                        'one' and 'two' are names of function in my files
    for (key in files) {

       var script = document.createElement('script');
       script.setAttribute('type', 'text/javascript');

       var fullPath = '/path/to/file/' + files[key] + '.js';   // /path/to/file/one.js, /path/to/file/two.js,
       script.setAttribute('src', fullPath);

       // And here's my eventhandler. After the script is loaded,
       // names of my functions are in global scope. So, the task is:
       // to take them and save in properties using setter.
       script.onload = function() {

           setProps(window[files[key]]);   // setProp(window.one / window.two);
           window[files[key]] = null;      // remove them from global scope

           alert(one/two);   // to check if I have functions saved in properties
       }

       document.getElementsByTagName('head').item(0).appendChild(script);

    };
}; 
```

正如我在一开始所说，如果我加载一个文件，一切都会正常工作。但是对于不止一个，`onload`工作两次，但仅适用于我的第二个文件 - 带有函数`'two'`定义。警报触发两次并显示`'two'`. 而且我只有`'two'`我的财产的功能`'two'`，这是我通过参数传递的最后一个功能。并且文件被附加在 DOM 文件中。

我试图在循环`<script>`之外创建标签`for/in`，甚至创建了一个数组并将两个脚本中的每一个保存为该数组的单独元素，但它也无济于事 - 只有最后一个文件在`onload`and 两次。

问题是什么？为什么它不适用于两个文件？有可能解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:04:37.703

很难判断何时不包含完整的代码，但很可能会遇到闭包问题。

您在 for 循环中定义了 onload 函数，这意味着它将绑定对“key”局部变量的引用。当“卸载”函数实际运行时，for 循环已经完成，“key”将是“two”，所以你会在两个警报中看到“two”。

这是同一问题的一个更简单的示例：

```
for (x=0; x< 2; x++) {
   setTimeout(function() {
       alert(x);
   }, 100);
} 
```

当你运行它时，你会得到两个警报，每个警报都显示“2”，这是循环退出后“x”的值。

要解决此问题，您需要调用一个函数，该函数在超时发生时返回您要调用的函数：

```
function create_alerter(z) {
    return function() {
        alert("fixed: " + z);
    }
}

for (x = 0; x < 2; x++) {
    setTimeout(create_alerter(x), 100);
} 
```

如果您不喜欢为此使用单独的函数，则可以定义函数返回函数并内联调用它：

```
for (x = 0; x < 2; x++) {
    setTimeout(function(z) {
       return function() {
          alert(z);
       }
    }(x), 100);
} 
```

# objective-c - 一个空的 CALayer 消耗多少内存？

> ID：13241612
> 
> 赞同：1
> 
> 时间：2012-11-05T22:44:19.637
> 
> 标签：objective-c, ios, calayer

我已经创建了一个 CALayer 实例，`[CALayer layer]`并将其框架设置为屏幕框架（例如 768 x 1024 点）。我没有设置这一层的内容。该层会因为更大的尺寸而占用额外的内存，还是因为没有可绘制的内容而使内存消耗保持不变？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T13:35:32.720

CALayer 基本上只是一些属性和方法。所以 CALayer 本身（几乎）不消耗内存。如果您将图像分配给内容属性，**那么**这将消耗图像以**解压缩**（CGImage）形式使用的内存量。

（Afaik CALayer 仅存储对实际图像的引用，因此准确地说 CALayer 本身仍然几乎没有内存使用）

要在运行时检查应用程序的内存使用情况，请使用（非常酷的）Profiling-Tool：

1.  构建分析
2.  在运行下，选择配置文件
3.  选择“内存使用情况”（或类似的，我现在不坐在我的 MAC 前）
4.  点击左上角的红色“记录”按钮

请享用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-09T17:08:01.503

我只是通过分配大量的空来测量它`CALayer`，看起来每个都需要大约 340 字节的内存。分配一些可笑的大帧并不会改变它。

然而，图层可能会消耗大量内存，这不仅是因为图像内容，而且似乎还因为内部像素缓存。我还没有尝试过这个，但可以肯定的是，一旦它们开始在屏幕上绘制，即使是形状或文本层也不会那么小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T22:53:47.073

如果需要，您可以在创建图层之前和之后检查可用内存。如果你想这样做，请检查：

[确定 iOS 设备上的可用 RAM 量](https://stackoverflow.com/questions/5012886/knowing-available-ram-on-an-ios-device)

# java - 使用 RegEx 查找两个 XML 标记之间的所有内容

> ID：13241615
> 
> 赞同：74
> 
> 时间：2012-11-05T22:44:33.410
> 
> 标签：java, php, regex, xml, perl

在`RegEx`中，我想找到两个 之间的标签和所有内容`XML tags`，如下所示：

```
<primaryAddress>
    <addressLine>280 Flinders Mall</addressLine>
    <geoCodeGranularity>PROPERTY</geoCodeGranularity>
    <latitude>-19.261365</latitude>
    <longitude>146.815585</longitude>
    <postcode>4810</postcode>
    <state>QLD</state>
    <suburb>Townsville</suburb>
    <type>PHYSICAL</type>
</primaryAddress> 
```

我想找到标签和 之间的所有内容`primaryAddress`，然后将其删除。

`primaryAddress`标签之间的所有内容都是一个变量，但我想在获得`primaryAddress`.

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-11-05T22:48:55.640

### 使用正则表达式进行 HTML/XML 解析不是一个好主意...

但是，如果您仍然想这样做，请搜索正则表达式模式

```
<primaryAddress>[\s\S]*?<\/primaryAddress> 
```

并将其替换为空字符串...

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-05T22:48:07.543

您应该能够将其与：`/<primaryAddress>(.+?)<\/primaryAddress>/`

标签之间的内容将在匹配的组中。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2018-11-15T12:03:22.353

使用这种方法不好，但如果你真的想用正则表达式拆分它

```
<primaryAddress.*>((.|\n)*?)<\/primaryAddress> 
```

经过验证的答案返回标签，但这只是返回标签之间的值。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-10-25T16:04:36.757

这可以捕获最外层的标签对，即使在侧面有属性或没有结束标签

```
(<!--((?!-->).)*-->|<\w*((?!\/<).)*\/>|<(?<tag>\w+)[^>]*>(?>[^<]|(?R))*<\/\k<tag>\s*>) 
```

编辑：正如上面评论中提到的，正则表达式总是不足以解析 xml，试图修改正则表达式以适应更多情况只会让它更长但仍然无用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-24T18:24:27.900

在我们的例子中，我们收到一个 XML 作为 a`String`并且需要摆脱具有一些“特殊”字符的值，例如`&<>`等。基本上有人可以以这种形式向我们提供 XML：

```
<notes>
  <note>
     <to>jenice & carl </to>
     <from>your neighbor <; </from>
  </note>
</notes> 
```

所以我需要在其中找到`String`值 `jenice & carl`并`your neighbor <;`正确转义`&`和`<`（否则，如果您稍后将其传递给将重命名为未命名的引擎，这是一个无效的 xml）。

用正则表达式做这件事一开始是一个相当愚蠢的想法，但它既便宜又容易。所以那些想做和我一样的勇敢的人，给你：

```
 String xml = ...
    Pattern p = Pattern.compile("<(.+)>(?!\\R<)(.+)</(\\1)>");
    Matcher m = p.matcher(xml);
    String result = m.replaceAll(mr -> {
        if (mr.group(2).contains("&")) {
            return "<" + m.group(1) + ">" + m.group(2) + "+ some change" + "</" + m.group(3) + ">";
        }
        return "<" + m.group(1) + ">" + mr.group(2) + "</" + m.group(3) + ">";
    }); 
```

# css - 媒体查询在 Iphone 上不起作用，但在浏览器调整大小时很好

> ID：13241617
> 
> 赞同：6
> 
> 时间：2012-11-05T22:44:38.297
> 
> 标签：css, wordpress, media-queries

嗨，我目前在 WordPress 上使用名为 Bones 的 Boilerplate 主题，但我无法让响应式菜单在我的 Iphone 上工作。当我手动调整菜单大小时似乎工作

我使用的媒体查询是

@media only screen and (min-width: 960px) {

我试图开始工作的网站在这里：[链接](http://www.optimise-website-marketing.com)

任何帮助将不胜感激，因为我已经去找了主题作家，但他已经好几天没有回复了

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-06T00:09:50.123

你使用过元视口对象吗？把它放在文件的开头

```
<meta name="viewport" content="initial-scale = 1.0,maximum-scale = 1.0" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T13:43:39.930

我刚刚遇到一个问题，当我用这个加载我的样式表时：

```
<link src="mobile.css" media="only screen and (min-width: 400px)" /> 
```

然后在里面`mobile.css`，我有几个这样的风格：

```
@media screen and (min-width: 400px) {
    body {
        background: red;
    }
}

h1 {
    color: blue;
} 
```

并且一些设备（iPhone、iPad - 当然有不同的断点和 Galaxy Nexus）没有看到`background:red;`规则（“嵌套”媒体查询），只有那些*在*“内联”媒体查询（`h1`）之外的设备。然而，Chrome 和其他浏览器都很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-14T18:57:25.033

这让我很奇怪：

```
@media only screen and (max-width: 480px), only screen and (max-device-width: 480px) { 
    ... 
} 
```

我相信应该是

```
@media only screen and (max-width: 480px), 
@media only screen and (max-device-width: 480px) { 
    ... 
} 
```

或者...

```
@media only screen and (max-width: 480px) and (max-device-width: 480px) { 
    ... 
} 
```

您可能还想考虑将您的文档类型从 XHTML 迁移到 HTML5。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T12:41:54.350

```
You need to mention Media like this  for iphone and smartphones

/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen 
and (min-width : 321px) {
/* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen 
and (max-width : 320px) {
/* Styles */
} 
```

# java - 抽象类需要访问子类属性

> ID：13241618
> 
> 赞同：3
> 
> 时间：2012-11-05T22:44:41.273
> 
> 标签：java, abstract-class

我的代码有问题（编辑：这些类的整个代码）

```
public abstract class SimplePolygon implements Polygon {

  //protected Vertex2D[] varray; //this is wrong in tests
  public double getWidth(){
    double min = varray[0].getX(), max = varray[0].getX();

    for(int i = 0;i<varray.length;i++){
        max = Math.max(max,varray[i].getX());
        min = Math.min(min,varray[i].getX());
    }
    return max - min;
  }

  public double getHeight(){
    double min = varray[0].getY(), max = varray[0].getY();

    for(int i = 0;i<varray.length;i++){
        max = Math.max(max,varray[i].getY());
        min = Math.min(min,varray[i].getY());
    }
    return max - min;
  }

  public double getLength(){
    double distance = 0;
    for(int i = 0;i<varray.length;i++){
        if((i+1)<varray.length){distance += varray[i].distance(varray[i+1]);}
        else{distance += varray[i].distance(varray[0]);}
    }

    return distance;
  }

  public double getArea(){
    double suma = 0;
    for(int i = 0;i<varray.length-1;i++){
        suma += varray[i].getX()*varray[i+1].getY() - varray[i+1].getX()*varray[i].getY();
    }
    return suma/2;
  }

  public String toString(){
    String str = "Polygon: vertices ="; 
    for(int i = 0;i<varray.length;i++){
        str += " ";
        str += varray[i];
    }
    return str;
  }
}

public class ArrayPolygon extends SimplePolygon {

  public ArrayPolygon(Vertex2D[] array){
    varray = new Vertex2D[array.length];
    if (array == null){}
    for(int i = 0;i<array.length;i++){
        if (array[i] == null){}
        varray[i] = array[i];
    }
  }

  public Vertex2D getVertex(int index) throws IllegalArgumentException{
    return varray[index];
  }

  public int getNumVertices(){
    return varray.length;
  }

} 
```

问题是，我不允许向抽象类添加任何属性或方法`SimplePolygon`，所以我无法正确初始化`varray`。它可以简单地用该类中的受保护属性来解决，但由于某些（愚蠢的）原因我不能这样做。有没有人知道如何解决它？感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:11:43.613

考虑到：

*   你的`Polygon`界面作为`java.util.List`界面
*   你的`SimplePoygon`抽象类为`java.util.AbstractCollection`
*   您的`ArrayPolygon`具体课程为`java.util.ArrayList`

我认为你分配的重点是用迭代器实现一个解决方案，这样你就可以在抽象类中实现关于多边形的通用方法，同时在具体类中隐藏包含数据点的实际数据结构；所以：

```
/* 
 *   This class implements generic methods about polygon, like size, area and 
 *   so on, leveraging on the Vertex2D iterator.
 */
public abstract class SimplePolygon implements Polygon {

    // all concrete subclasses must implement iterator
    public abstract Iterator<Vertex2D> iterator();

    // this generic method prints the vertex list
    // using iterator hides the data structure used in implementation
    public String toString() {
       Iterator<Vertex2D> it = iterator();
       if (! it.hasNext())
           return "[]";

       StringBuilder sb = new StringBuilder();
       sb.append('Polygon: vertices = [');
       for (;;) {
           Vertex2D e = it.next();
           if (! it.hasNext())
               return sb.append("]").toString();
           sb.append(' ');
       }
    }
}

// for instance this concrete classes uses an ArrayList
public ArrayPolygon extends SimplePolygon {

    public Iterator<Vertex2D> iterator() {
       return new .....
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T01:06:19.817

如果您需要访问子类变量，您可以通过强制子类通过方法公开该变量来公开该变量。

```
public abstract class SimplePolygon implements Polygon {
  protected abstract Vertex2D[] getArray();

...

public String toString(){
    String str = "Polygon: vertices ="; 
    Vertex2D[] varray = getArray();
    for(int i = 0;i<varray.length;i++){
        str += " ";
        str += varray[i];
    }
    return str;
} 
```

然后在你的课上：

```
public class ArrayPolygon extends SimplePolygon
{
private Vertex2D[] varray;
public ArrayPolygon(Vertex2D[] array){
    super(array.length);
    varray = new Vertex2D[array.length];
    if (array == null){}
    for(int i = 0;i<array.length;i++){
        if (array[i] == null){}
        varray[i] = array[i];
    }

  @Override
  protected Vertex2D[] getArray() {return varray;}
  ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T15:49:29.550

我终于意识到问题出在哪里。答案非常简单……足以在 SimplePolygon 类中将方法 getVertex 和 getNumVertices 声明为抽象。这两种方法从 varray 提供了足够多的信息。所以整个技巧是将 varray.length 和 varray[n] 更改为这些方法。感谢您的时间和帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T23:50:50.027

首先，这个问题与`toString()`- 它无关紧要。

您的问题似乎是“如何`varray`从子类初始化？”。

一种方法是在超类中创建一个构造函数：

```
public abstract class SimplePolygon implements Polygon {

    protected SimplePolygon(int size) { 
        varray = new Vertex2D[size]; // initialization by super class
    }

    protected SimplePolygon() {} // initialization totally by subclass

} 
```

然后调用构造函数必须适合子类：

```
public class ArrayPolygon extends SimplePolygon {

    public ArrayPolygon(Vertex2D[] array) {
        varray = array; // use default constructor and initialize it from parameter
    }
} 
```

其他没有传入数组的子类可以调用特殊的构造函数：

```
public class Square extends SimplePolygon {

    public Square() { // probably pass them in too
        super(4); // we know there's 4 vertices
    }
} 
```

这个问题很笼统，似乎有点毫无意义——目前尚不清楚练习的目标是什么。

# jquery - 从 Wordpress 媒体上传器向图像添加删除按钮

> ID：13241621
> 
> 赞同：0
> 
> 时间：2012-11-05T22:44:59.087
> 
> 标签：jquery, image, wordpress

所以我正在使用 Wordpress Media Uploader 为滑块上传幻灯片。我有一个删除按钮，按下该按钮将清除图像并输入存储 url 的字段。问题是返回媒体上传器时图像仍然可用。

当按下相同的按钮时，有没有办法从媒体上传器中删除图像？会用 jQuery 完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T02:08:23.507

如果您单击每个图像下的“图库”选项卡，则已经有一个删除按钮，但链接是`[POST]`指向`post.php`.

```
$("#DELETEBUTTON").click(function(){
    window.location("post.php?action=delete&amp;post=YOURATTACHMENTID&amp;_wpnonce=YOURNONCEKEY");
}); 
```

# sql - Rails：带条件的外部连接

> ID：13241622
> 
> 赞同：1
> 
> 时间：2012-11-05T22:45:01.570
> 
> 标签：sql, ruby-on-rails

我有 2 个模型显示和预订。一个节目有很多预订。每个预订都有一个 start_date 和 end_date。我想找到 i) 没有预订或 ii) 预订不与时间间隔 [开始，结束] 重叠的节目。到目前为止，我有：

```
Show.joins("LEFT JOIN bookings ON bookings.show_id = shows.id").where("bookings.start_date > ? OR bookings.end_date < ?, end, start) 
```

但它不会返回没有预订的节目。如何在查询结果中包含没有预订的节目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T23:04:23.793

尝试这个：

```
Show.joins("LEFT JOIN bookings ON bookings.show_id = shows.id").where("bookings.id IS NULL OR bookings.start_date > ? OR bookings.end_date < ?", end, start) 
```

# database - 数据库字段中的空格

> ID：13241625
> 
> 赞同：0
> 
> 时间：2012-11-05T22:45:24.063
> 
> 标签：database, whitespace, trim, removing-whitespace

我`Name`在我的数据库中调用了字段。它的类型是`nvarchar(20)`. **当我将数据添加到数据库并用一些“ Foo 数据**”填充该字段时，结果表明该数据库字段中的值不等于“ **Foo 数据**”，因为在数据库中有“ **Foo 数据**            ”（有 8 个空格）。这真的让我很生气，因为我必须`String.Trim()`在从数据库中获取数据后使用。

有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:51:48.290

在某个地方您可能需要“修剪”；在这种情况下，我的猜测是输入数据后面可能有空格。（不过，在不知道输入来自哪里的情况下，很难说）。因此，您需要在插入数据之前修剪掉空格。

您可以运行查询来清理现有数据；确切的方法可能取决于您使用的特定数据库。

除此之外，您可能只需要在检索它时对其进行修剪。

# javascript - 对象匹配的返回值

> ID：13241627
> 
> 赞同：0
> 
> 时间：2012-11-05T22:45:38.977
> 
> 标签：javascript, json, node.js, express, socket.io

我绝不是流利的 JS，所以如果我要求一些非常基本的东西，请原谅我，但我无法找到我的问题的正确答案。

我正在编写我的第一个 Node.js（加上 Extra Framework 和 Socket.io）应用程序，并且我在设置类似 FB 的 Messenger 的服务器端时获得了一些乐趣（惊喜！！！）。

所以，假设我有这个数据结构来存储在线用户（这是一个 JSON 数组，但我不确定这是最好的方法还是应该使用 Javascript 对象）：

```
[
  {
    "site": 45,
    "users": [
        {
            "idUser": 5,
            "idSocket": "qwe87r7w8qwe",
            "name": "Carlos Ray Norris"
        },
        {
            "idUser": 6,
            "idSocket": "v8d9d0fgfs7d",
            "name": "John Connor"
        }
    ]
},
{
    "site": 48,
    "users": [
          {
            "idUser": 22,
            "idSocket": "qwe87r7w8qwe",
            "name": "David Bowie"
          },
          {
            "idUser": 23,
            "idSocket": "v8d9d0fgfs7d",
            "name": "Barack H. Obama"
          }
      ]
  }
] 
```

我想要做的是在数组中搜索给定 y 的 x 值。在这种情况下，检索 idSocket 知道 idUser**而**不必遍历数组值。

所以我基本上有两个问题：首先，在线存储用户的正确方法是什么？其次，如何找到与我已经知道的值匹配的值（找到具有给定 idUser 的 idSocket）。

我想要一个纯 JS 方法（或使用 Node、Socket.io 或 Express 提供的一些工具），但如果这不可能，那么我可以寻找一些 JQuery。

**编辑** 我接受了 chovy 的建议并对结构进行了一些修改，现在看起来像这样

```
{
  45: { // site
    05: { // userId
        "name": "Carlos Ray Norris",
        "socketID": "qwe87r7w8qwe"
    },
    06: {
        "name": "John Connor",
        "socketID": "v8d9d0fgfs7d"
    }
},
48: {
    22: {
        "name": "David Bowie",
        "socketID": "erv7e6v876vr"
    },
    23: {
        "name": "Barack H. Obama",
        "socketID": "brt877brtt87"
    }
  }
} 
```

感谢 Node.js，我可以轻松访问这样的数据（我知道站点和 userId 值）`var socket = data[site]["05"].socketId`。我猜这要归功于 Node.js，但我不完全确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:57:59.990

构建查找表：作为键值映射的 JS 对象，其中键是 id，值是用户对象。*然后，您可以通过 id*`O(n)`选择/匹配用户。

```
var map = {};
for (var i=0; i<arr.length; i++) {
    var site = arr[i].site,
        users = arr[i].users;
    for (var j=0; j<users.length; j++) {
        users[i].site = site; // needed for finding a user's site
        map[ users[i].idUser ] = users[i];
    }
}

// Now,
> map[ 23 ] 
{idUser:23, idSocket:"v8d9d0fgfs7d", name:"Barack H. Obama", site:48} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T23:04:42.720

你可以构造你的数据，让用户 id 是关键，而不是你必须循环的数组吗？

```
var data = {
 45: { user: 'Fred' },
 58: { user: 'Sam' )
};

var userId = 45;
data[userId].user // => 'Fred' 
```

# c++ - 如何重载嵌套类的运算符？

> ID：13241631
> 
> 赞同：7
> 
> 时间：2012-11-05T22:45:58.900
> 
> 标签：c++

我正在编写一个链表，并且我的 List 类中有一个 Iterator 类。我想重载 = 运算符，但我不知道启动它的正确语法。

这就是我的代码中的内容

```
class List{
   //member stuff
   class Iterator{
       private: Node* current;
       public: Iterator& operator=(const Iterator& right);
       }
 } 
```

我正在尝试这个，但我不确定这是否正确。

```
List::Iterator::operator=(const Iterator& right){
 //stuff
} 
```

谁能澄清一下？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T22:51:19.160

澄清一下，您的想法是正确的，但是您忘记了在函数声明中包含返回类型：

```
List::Iterator::operator=(const Iterator& right){
 //stuff
} 
```

需要是

```
List::Iterator& List::Iterator::operator=(const Iterator& right){
 //stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:51:50.707

```
List::Iterator& List::Iterator::operator=(const Iterator& right) {...}
^^^^^^^^^^^^^^^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T22:52:08.587

```
List::Iterator& List::Iterator::operator=(const List::Iterator& right)
{
    //...
} 
```

# java - CXF 动态客户端收到编组错误

> ID：13241638
> 
> 赞同：1
> 
> 时间：2012-11-05T22:46:48.073
> 
> 标签：java, web-services, jaxb, cxf

我正在尝试将静态 CXF 2.5.4 客户端转换为动态生成的客户端。我使用了以下代码：

```
 JaxWsDynamicClientFactory dcf = JaxWsDynamicClientFactory.newInstance();
        logger.info("Dynamically loading wsdl from " + theWsdlLocation);
        dynClient = dcf.createClient(theWsdlLocation, bindingFileList);
        if (dynClient == null) {
            logger.severe("dynClient creation not successful");
        } else {
            logger.info("Successful creation of service client from wsdl at " + theWsdlLocation);
        }
        ......
        http = (HTTPConduit) dynClient.getConduit();
        HTTPClientPolicy httpClientPolicy = new HTTPClientPolicy();
        ClassLoader clAfterClientPolicy = httpClientPolicy.getClass().getClassLoader();
        httpClientPolicy.setConnectionTimeout(36000);
        httpClientPolicy.setAllowChunking(false);
        http.setClient(httpClientPolicy);
        .......
        ClassLoader threadCL = Thread.currentThread().getContextClassLoader();
        Object asrReq = threadCL.loadClass("com.microsoft.schemas.dynamics._2008._01.services.AddressServiceReadRequest").newInstance();
        .......
        Object [] asrRespObjs = dynClient.invoke("read", asrReq); 
```

当客户端启动 dynClient.invoke 方法时，它会抛出以下异常：

```
 org.apache.cxf.interceptor.Fault: Marshalling Error: com.microsoft.schemas.dynamics._2008._01.services.AddressServiceReadRequest is not known to this context
at org.apache.cxf.jaxb.JAXBEncoderDecoder.marshall(JAXBEncoderDecoder.java:261)
at org.apache.cxf.jaxb.io.DataWriterImpl.write(DataWriterImpl.java:169) 
```

谁能解释为什么 JAXB 不能编组 asrReq 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T14:02:20.257

您应该在加载类之前尝试重置上下文类加载器，如下所示：

```
Thread.currentThread().setContextClassloader(threadCL); 
```

如上所述： [这里](http://cxf.547215.n5.nabble.com/How-to-call-2-CXF-dynamic-clients-td5107299.html#a5119876)

# javascript - 在 JavaScript 中将对象键设置为动态值

> ID：13241642
> 
> 赞同：2
> 
> 时间：2012-11-05T22:47:13.123
> 
> 标签：javascript, jquery

我正在循环一个 jQuery 选择器并尝试将表单元素的值分配给一个容器变量，然后该容器变量可以作为 JSON 传递给进一步的操作。

假设有三组复选框，每组在自己的 div 中，名为 group1、group2 和 group3。

这是伪代码，但类似这样：

```
var data = {};
var groups = {
    'group1': obj with a bunch of key val pairs for checkboxes,
    'group2': another obj,
    'group3': and another obj
 }; // these define divs / groups of checkboxes

// create all the checkboxes and divs from the groups object somewhere in here

//now build a function to loop over the groups and get any checked boxes
function getInputs(){
    $.each(groups, function(index, el) {
        // this is where I am stuck
        data.index = $('#' + index + ' input:checked'); // <-- how to do this?
    });
} 
```

所以基本上我想将选中项目的值添加到对象中的正确项目中`data`——例如。如果我们在`group1`div 上循环，那么每个组的复选框将被添加到`data.group1`，`data.group2`等等。

我如何使`data.index`评估为`data.group1`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T22:48:58.493

很简单：

```
data[index] 
```

…………

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-16T11:00:35.073

如果您能够使用 ES6 JavaScript 功能，则可以使用[计算属性名称](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Object_initializer#Computed_property_names)来非常轻松地处理这个问题：

```
var request = {id : 1236};
var responseMessage = 'The response message';

var resp = {responses: {[request.id]: responseMessage}}; 
```

[request.id] 对象键具有动态值

# functional-programming - Erlang中列表的笛卡尔幂

> ID：13241643
> 
> 赞同：5
> 
> 时间：2012-11-05T22:47:17.260
> 
> 标签：functional-programming, erlang

我正在尝试编写一个 erlang Mastermind 求解器作为练习（我是一个完整的新手，但我认为这对于函数式语言来说是一个有趣的练习）

我希望它尽可能通用，所以我觉得我需要一个笛卡尔幂函数。就像是：

```
cart_pow([a,b],2) -> [[a,a],[a,b],[b,a],[b,b]]
cart_pow([a,b],3) -> [[a,a,a],[a,a,b],[a,b,a],[a,b,b],[b,a,a],[b,a,b],[b,b,a],[b,b,b]] 
```

我想不出一个纯粹的功能（递归，映射，折叠......）解决方案。有什么线索吗？如果它是懒惰的奖励。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T00:31:20.160

@Ed'ka 提供的解决方案简洁而漂亮，但尽管如此，它的复杂性是`O(N)`.

我建议您考虑[通过平方方法求幂](http://wikipedia.org/wiki/Exponentiation_by_squaring)，它提供`O(log(N))`了幂计算的复杂性。使用这种技术，笛卡尔幂可以这样实现：

```
%% Entry point
cart(List, N) ->
        Tmp = [[X] || X <- List],
        cart(Tmp, Tmp, N).

cart(_InitialList, CurrList, 1) ->
        CurrList;
cart(_InitialList, CurrList, N) when N rem 2 == 0 ->
        Tmp = mul(CurrList, CurrList),
        cart(Tmp, Tmp, N div 2);
cart(InitialList, CurrList, N) ->
        Tmp = cart(InitialList, CurrList, N - 1),
        mul(InitialList, Tmp).

mul(L1, L2) ->
        [X++Y || X <- L1, Y <- L2]. 
```

PS shell 的使用示例（我已将函数打包`cart`到 mudule 中`my_module`）：

```
1> c(my_module).
{ok,my_module}
2> 
2> my_module:cart([0,1], 2).
[[0,0],[0,1],[1,0],[1,1]]
3> 
3> my_module:cart([0,1], 3).
[[0,0,0],
 [0,0,1],
 [0,1,0],
 [0,1,1],
 [1,0,0],
 [1,0,1],
 [1,1,0],
 [1,1,1]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T23:53:32.707

从 Haskell 实现：

```
cart_pow(Xs, N) -> 
    sequence(lists:duplicate(N, Xs)).

sequence([]) ->
    [[]];
sequence([Xs|Xss]) ->
    [[X|Xs1] || X <- Xs, Xs1 <- sequence(Xss)]. 
```

不过，不确定如何使 Erlang 的列表变得懒惰。

**更新：** 这个版本可以通过简单地使其尾递归来提高性能（尽管我相信这三个之间没有渐近差异）

```
cart_pow(Xs, N) -> 
    sequence(lists:duplicate(N, Xs)).

sequence(Xss) ->
    sequence(Xss, [[]]).

sequence([], Acc) ->
    Acc;
sequence([Xs|Xss], Acc) ->
    sequence(Xss, [[X|Xs1] || X <- Xs, Xs1 <- Acc]). 
```

与@stemm 的版本相比：

```
1> timer:tc(fun() -> length(tmp1:cart([0,1], 20)) end).
{383939,1048576}
2> timer:tc(fun() -> length(tmp1:cart_pow([0,1], 20)) end).
{163932,1048576} 
```

**PS：**甚至更好：

```
sequence(Xss) ->
    lists:foldl(fun(Xs, A) -> [[X|Xs1] || X <- Xs, Xs1 <- A] end, [[]], Xss). 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T22:59:09.137

您可能会发现这个 Stack Overflow 问题很有帮助，它涉及在函数式语言中生成列表的笛卡尔幂。该问题针对 F#，但评论中也有一个 Haskell 示例：[F#: how to find Cartesian power](https://stackoverflow.com/questions/2648532/f-how-to-find-cartesian-power)

# css - 如何为访问多个网站的内容进行 CSS 重置？

> ID：13241646
> 
> 赞同：3
> 
> 时间：2012-11-05T22:47:34.640
> 
> 标签：css

我正在开发一个页面，该页面将分发到我无法控制的数十个网站，并且它将使用 $.load() 显示在 jQuery UI 对话框窗口中。

因此，它受页面上定义的任何 CSS 规则的约束。我一直小心地在我所有内容的 id 的类名前面加上我的公司名称，以避免冲突。但是网站所有者的 CSS 干扰我的页面是很常见的，例如

```
p { margin: 1000000px; } 
```

会让我的生活变得悲惨。我显然可以做类似的事情

```
#myUniqueContainer p { margin: 5px; } 
```

但这并不能涵盖所有可能出现的烦恼。

有没有一种好方法可以只为我的内容重置 CSS，而不影响他们的页面？我正在考虑类似[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)并在所有内容前加上 #myUniqueContainer

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T16:04:33.013

好吧，看起来对元素进行分组并将属性应用于这些组可能是一个好主意。我认为如果容器中的元素具有相同的边距和填充，那将很容易。如何首先设置所有边距、填充等：

```
div #myUniqueContainer * {margin:0; padding:0} 
```

从那里，您将为您的`#myUniqueContainer`ID 下的所有元素设置属性。你

# c# - 谓词通常用于数组/列表这里怎么样？

> ID：13241661
> 
> 赞同：0
> 
> 时间：2012-11-05T22:49:23.923
> 
> 标签：c#

在下面的代码（乔什史密斯关于 MVVM 的文章）中，有人能给我一些关于 **return _canExecute == null 的见解吗？真：_canExecute（参数）；**?

这是一个正常的 if/else 语句，但我没有得到它的最后一部分。

```
public class RelayCommand : ICommand
{
    #region Fields

    readonly Action<object> _execute;
    readonly Predicate<object> _canExecute;        

    #endregion // Fields

    #region Constructors

    public RelayCommand(Action<object> execute)
    : this(execute, null)
    {
    }

    public RelayCommand(Action<object> execute, Predicate<object> canExecute)
    {
        if (execute == null)
            throw new ArgumentNullException("execute");

        _execute = execute;
        _canExecute = canExecute;           
    }
    #endregion // Constructors

    #region ICommand Members

    [DebuggerStepThrough]
    public bool CanExecute(object parameter)
    {
        return _canExecute == null ? true : _canExecute(parameter);
    }

    public event EventHandler CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }

    public void Execute(object parameter)
    {
        _execute(parameter);
    }

    #endregion // ICommand Members
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T23:03:04.657

`_canExecute`是 lambda 函数，它可以为 null，具体取决于哪个构造函数将实例化`RelayCommand`对象。因此，`CanExecute`方法的实现检查是否设置了此函数，如果没有，则返回`true`，如果已分配函数，则对其进行评估（给定`parameter`），并将评估的值作为 的结果返回`CanExecute`。

简而言之：`CanExecute`将使用构造函数中传递的任何谓词进行评估，如果缺少一个 - 将始终返回`true`。

你问过这通常用于数组/列表 - 这是非常相似的情况。谓词只是一个可以传递的函数。当您将此类谓词传递给过滤集合的某个方法时，该方法只是像调用任何其他函数一样调用此谓词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T23:00:51.373

将其视为简写：

```
if(_canExecute == null) 
{
    return true;
} 
else 
{
    return _canExecute(parameter);
} 
```

在上下文中，_canExecute 是您的谓词来自 RelayCommand 的任何内容。

# google-apps-script - 修改最近创建的电子表格

> ID：13241665
> 
> 赞同：0
> 
> 时间：2012-11-05T22:49:47.407
> 
> 标签：google-apps-script

我一直在编写一个脚本，该脚本允许我修改最近创建的电子表格。
这是我想要做的：

1.  创建新电子表格
2.  将当前电子表格中的工作表复制到新电子表格中
3.  在新电子表格中替换新工作表的名称。

这是我创建的代码，但是当我运行它时，我可以创建电子表格，但原始电子表格中的工作表不会复制到新的电子表格中。基本上我可以创建电子表格，但一旦创建，我就无法写在新的。有任何想法吗？？”

```
function dashboards(){
   //creates dashboards
   var ss1 = SpreadsheetApp.getActiveSpreadsheet();
   ss1.setActiveSheet(ss1.getSheetByName("Sheet1"));
   var ssNew = SpreadsheetApp.create("New spreadsheet").getId();
   var ss2 = SpreadsheetApp.openById(ssNew).setActiveSpreadsheet;
   ss1.copyTo(ssNew)
   ssNew.renameActiveSheet("newsheet");;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:18:48.573

看起来你非常接近，但我无法遵循所有变量引用。这是对我有用的重写版本。

我认为主要问题可能是第`setActiveSpreadsheet`6 行中的挂起调用可能破坏了您的变量分配。

另一个关键点是，您可以从`copyTo`调用中获取对新电子表格中工作表的引用

```
function dashboards(){
   var ss1 = SpreadsheetApp.getActiveSpreadsheet();
   var origSheet = ss1.getSheetByName('Sheet1');
   var ssNew = SpreadsheetApp.create('New spreadsheet').getId();
   var ss2 = SpreadsheetApp.openById(ssNew);
   var newSheet = origSheet.copyTo(ss2);
   newSheet.setName('newsheet');
} 
```

# jquery - 如何使用 jQuery $.ajax 将请求参数数组发送到 servlet？

> ID：13241668
> 
> 赞同：17
> 
> 时间：2012-11-05T22:50:21.863
> 
> 标签：jquery, arrays, ajax, servlets

我想使用 jQuery 将 JavaScript 数组发送到 servlet `$.ajax`。

```
var json=[1,2,3,4];
$.ajax({
            url:"myUrl",
            type:"POST",
            dataType:'json',
            success:function(data){
                // codes....
            },
            data:json

        }); 
```

当我使用

```
request.getParameter("json");
request.getParameterValues("json"); 
```

它返回空值。

如何访问这些值？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-05T22:59:48.907

将数组作为 JS 对象的值发送，因此您最终会成为`{json:[1,2,3,4]}`.

```
var json=[1,2,3,4];
$.ajax({
    url:"myUrl",
    type:"POST",
    dataType:'json',
    data: {json:json},
    success:function(data){
        // codes....
    },
}); 
```

在 servlet 中，您需要在请求参数名称后加上`[]`.

```
String[] myJsonData = request.getParameterValues("json[]"); 
```

jQuery 附加它们是为了对PHP 等[弱类型语言友好。](https://stackoverflow.com/questions/3061273/send-an-array-with-an-http-get)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:01:21.750

您必须将数组转换为 JSON 类型，因此需要读取而不是 []

```
 var array = [ 1, 2, 3, 4 ]; 
```

为此，您需要致电

```
 var json = JSON.stringify(array) 
```

然后你可以将它传递给你的ajax调用

```
 $.ajax({ url:"myUrl",
          type:"POST",
          data: json,
          dataType:'json',
          success:function(data){
             // codes....
          }}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-15T07:58:47.440

尝试使用以下脚本 -

```
 jQuery.ajax({
                    url : "your API",
                    type : "POST",
                    dataType:'json',
                    data: JSON.stringify({ jsonData: data }),
                    contentType: "application/json",
                    success : function(response) {
    //do the needful.
    },
                    error : function(jqXHR, textStatus,
                            errorThrown) {
                        var x = 1;
                        closeLoader();  
                    }
                }); 
```

如下处理控制器中的请求 -

```
@RequestMapping(value="your url", method = RequestMethod.POST)
public Map<String, Object> verifyRefundRequested(@RequestBody String data) throws UnsupportedEncodingException{
        Map<String, Object> responseMap = null;
        Gson g = new Gson();
        responseMap = g.fromJson(data, Map.class);
        List<String> s = (List<String>) responseMap.get("jsonData");
//iterate list and process 
// return map
        } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-05T23:00:51.730

您需要像这样发布您的javascript数据对象..

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

```
$.post("test.php", { name: "John", time: "2pm" },
   function(data) {
     alert("Data Loaded: " + data);
   }); 
```

# expressionengine - 获取 cookie 值并在 ExpressionEngine 模板中使用它

> ID：13241672
> 
> 赞同：2
> 
> 时间：2012-11-05T22:50:49.493
> 
> 标签：expressionengine

我想在我的 ExpressionEngine 模板中使用一些存储的 cookie 值，而不使用任何 PHP。

我当前的模板代码

```
{exp:channel:entries channel="favorites" category="<?php echo $COOKIE['favorite']?>"}
{title}
{/exp:channel:entries} 
```

这很丑陋，并且在负载下表现不佳。有什么建议么？也许是一个插件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T23:03:09.690

您必须在 EE 中使用 Functions 类中的 set_cookie() 方法设置 cookie。

[http://expressionengine.com/user_guide/development/reference/functions.html#set-cookie-name-string-value-string-expire-int](http://expressionengine.com/user_guide/development/reference/functions.html#set-cookie-name-string-value-string-expire-int)

```
$this->EE->functions->set_cookie('your_cookie_name', 'some_value', 3600 * 24) // Set a cookie that expires in 1 day

$this->EE->input->cookie('your_cookie_name'); // returns 'some_value'; 
```

来自 Devot:ee 的 EE 附加组件

[http://devot-ee.com/add-ons/cookies](http://devot-ee.com/add-ons/cookies)

# html - 淡入和反射 CSS，不起作用

> ID：13241673
> 
> 赞同：0
> 
> 时间：2012-11-05T22:50:51.083
> 
> 标签：html, css, reflection

我正在尝试做这样的事情**http://designshack.net/tutorialexamples/HoverEffects/Ex5.html**，图像的反射显示在下面，但是它不起作用。我已经完成了检查元素，并相应地使用了他们的代码，但它在我的网站上不起作用。当我在 Chrome 中检查自己计算机上的元素时，就是看到反射的时候。如果您需要任何澄清，请告诉我。这是我的代码[http://jsfiddle.net/srvcm/1](http://jsfiddle.net/srvcm/)

```
.ex img {
    <!--margin: 25px;-->
    opacity: 0.9;
    border: 1px solid #eee;

    /*Transition*/
    -webkit-transition: all 0.5s ease;
    -moz-transition: all 0.5s ease;
    -o-transition: all 0.5s ease;

    /*Reflection*/
    -webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(.7, transparent), to(rgba(0,0,0,0.1)));

}

.ex img:hover {  
   opacity: 1;

   /*Reflection*/
  -webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(.7, transparent), to(rgba(0,0,0,0.7)));

   /*Glow*/
  -webkit-box-shadow: 0px 0px 20px rgba(255,255,255,0.8);
  -moz-box-shadow: 0px 0px 20px rgba(255,255,255,0.8);
  box-shadow: 0px 0px 20px rgba(255,255,255,0.8);
} 
```

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:11:31.633

代码自行完美运行

# python - 在这种情况下进行直方图比较是否安全？

> ID：13241675
> 
> 赞同：5
> 
> 时间：2012-11-05T22:51:18.650
> 
> 标签：python, image-processing, opencv, computer-vision, histogram

由于我不知道直方图比较的极限，所以我决定问问美妙的社区。
我有一些图像，我想根据它们的相似性对它们进行分组。每张图像都有一个独特的彩色线条，从图像的顶部到底部，所以我所做的是通过这些彩色线条进行垂直投影并制作一个每个图像的此投影的直方图。它工作得很好，因为两个相似的图像应该有两个相似的直方图（即上下几乎完全相同的轮次）作为一个人我可以根据那个独特的特征来确定两个直方图是相似的如果一个直方图的峰值不高（即，这是一张微弱图像的直方图）

带有相应直方图的图像：
..................... [1st http://imageshack.us/a/img571/948/onelg.jpg](http://imageshack.us/a/img571/948/onelg.jpg) ..... ..................................[第 2 个 http:// imageshack.us/a/img255/642/twor.jpg](http://imageshack.us/a/img255/642/twor.jpg) .................... ...[第 3 次 http://imageshack.us/a/img577/3931/threeaw.jpg](http://imageshack.us/a/img577/3931/threeaw.jpg) ...... 第 1 次[http://imageshack.us/a/img823/ 4343/onehq.png](http://imageshack.us/a/img823/4343/onehq.png) [2ndh http://imageshack.us/a/img687/3738/twoht.png](http://imageshack.us/a/img687/3738/twoht.png) [3rdh http://imageshack.us/a/img43/9996/threeh.png](http://imageshack.us/a/img43/9996/threeh.png)
......... ..................................................... ............. [2nddarker http://imageshack.us/a/img690/7817/twodark.jpg](http://imageshack.us/a/img690/7817/twodark.jpg)
.... ...................................[2nddarkhist http://img20.imageshack.us/img20/6070/darkerh.png](http://img20.imageshack.us/img20/6070/darkerh.png)

我将这两个图像转换为 gray-scale ，然后对图像进行垂直投影，将其转换为直方图，您可能会注意到前两个直方图相似，但第三个有点不同，因为它具有切换的彩色线条。

注意
：-（1）考虑前两个直方图。虽然最高的喙接近 12，但并非总是如此，有些图像更暗或更暗，但如果可以的话，最后它确实给出了相同的直方图形态说你可以注意到最后一个直方图是第二个更暗的图像。

**我的问题是**：进行任何类型的直方图比较是否安全？直方图比较是否意味着我可以确定两个直方图是否具有相同的峰值？或者换句话说，直方图比较是否告诉我两个直方图是否具有相同的形态？？进行这种比较的最佳库或方法是什么`python`？

**更新**：-（
**1）**作为@PepperoniPizza 和@FedericoCristina 的回复，在我的情况下，完全不同的图像肯定会有不同的直方图（你可以依赖它）每张图像都有一个独特的直方图形态（即独特的峰值）和峰值的数量从一个图像到另一个图像不同，但两个相似的图像应该具有相同数量的峰值（换句话说>如果你看他们的直方图，你可以告诉他们看起来有点像（看看第一个、第二个和最后一个直方图）我的意思。
**（2）**要清楚这一点，我真的不想要如何对图像进行分组的解决方案，但我非常想知道如何确定两个直方图具有相似的形状或形态一般情况!!!!
**(3)**我知道`cv2.CompareHist()`但我不知道这是否是比较直方图的正确方法，因为我不知道如何`cv2.CompareHist()`工作（即我不知道他们在什么基础上进行比较）并且实际上`cv2.CompareHist()`有 4 种类型的直方图比较我不知道不知道什么是最好的，甚至不知道进行这种比较的替代方法是什么。
**（4）**作为@remi的回复，重点是：-我已经有3个库支持直方图比较，这有点模棱两可-至少对我来说-知道*直方图比较*是什么意思，就像有些人喜欢的那样`h1-h2`然后`calcuate(MSE)`它所做的只是比较值而不是这些值在直方图中形成的形状。所以由于我不擅长直方图及其数学工作，我想知道我是否真的可以这样比较直方图。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T00:39:19.250

> 进行任何类型的直方图比较是否安全？

不，这还不够。您可以使用直方图比较来**丢弃**不太相似的图像，但正如@PepperoniPizza 所说，两个完全不同的图像可能具有完全相同的直方图。

如果需要根据相似性对图像进行分组，则需要实现 2D[均方误差](http://en.wikipedia.org/wiki/Mean_squared_error)(MSE)（或[平均绝对误差](http://en.wikipedia.org/wiki/Mean_absolute_error)(MAE)）算法，该算法只是衡量两个图像之间的差异，其中 0 表示它们是平等的。

> 在 python 中进行这种比较的最佳库或方法是什么？

实现这些函数非常容易（涉及到几个 FOR 语句来计算两个像素之间的误差或差异，一个来自图像 A，一个来自图像 B）。您可以使用[Python OpenCV](http://opencv.willowgarage.com/documentation/python/index.html)甚至[Pyhon Imaging Library](http://www.pythonware.com/products/pil/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T10:42:07.783

据我了解，您并没有真正计算图像的直方图，因为您进行了投影。您需要一个描述符，不仅要考虑图像中颜色的频率，还要考虑它们的结构。您可以查看 MPEG7 [ColorStructure](http://cbvr.ims.tuwien.ac.at/user-documentation/csd-desc-1.pdf)或[ColorLayout](http://en.wikipedia.org/wiki/Color_layout_descriptor)描述符。在 C++ 中有一个 MPEG7 描述符的参考实现，我记得开始工作时非常痛苦。ColorStructure 是最容易实现的，您可以根据它们的欧几里德距离比较颜色结构直方图：描述符的距离最短，图像最相似（应该是）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T00:22:15.860

直方图只是对应于相同颜色的像素计数，在这种情况下是灰度。如果您仍然认为直方图足以比较两张图像，两张完全不同的图像可以有相同的直方图，我会先做一个归一化过程。

# jquery - jquery搜索框，单击链接以预填充搜索字段将不起作用

> ID：13241678
> 
> 赞同：0
> 
> 时间：2012-11-05T22:51:22.937
> 
> 标签：jquery, forms, search, onclick, submit

好的，快速提问！

[http://jsfiddle.net/UYtz8/](http://jsfiddle.net/UYtz8/)

如果您在搜索框中输入**orange**或**apple**，您会看到它隐藏了它不是的那个。

这完美无缺。

我想要做的是，如果我点击例如**orange**，我希望它填充该搜索框，然后当你自然地键入 orange 时执行它所做的事情。

现在单击**橙色**将填充搜索框，但它不会使 jquery 工作。

有什么想法或帮助吗？

**HTML**

```
Search: <input id = "searchbox" type = "text"/><br/>

<div class="track">
<h1>Section 1</h1>
<h3><a style="cursor:pointer;" onclick="document.getElementById('searchbox').value='orange';">orange</a></h3>
</div>

<div class="track">
<h1>section 2</h1>
<h3><a style="cursor:pointer;" onclick="document.getElementById('searchbox').value='apple';">apple</a></h3>
</div>​ 
```

**查询**

```
$("#searchbox").on("keydown keyup keypress change", function() {
var query = this.value.toLowerCase();
$(".track").each(function() {
    var cur = $(this);
    if(cur.text().toLowerCase().indexOf(query) == -1) {
        cur.hide("fast");
    }
    else {
        cur.show("fast");
    }
}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:14:19.180

触发 onclick 事件时，您没有执行搜索逻辑。您只是将值分配给搜索输入字段。将您的脚本更改为：

```
function search(query){
    $(".track").each(function() {
        var cur = $(this);
        if(cur.text().toLowerCase().indexOf(query.toLowerCase()) == -1) {
            cur.hide("fast");
        }
        else {
            cur.show("fast");
        }
    });
}        

$("#searchbox").on("keydown keyup keypress change", function() {
    search($(this).val());
});

$(".track h3 a").on("click", function() {
    search($("#searchbox").val());
}); 
```

# magento - Magento 将产品归入某个类别

> ID：13241679
> 
> 赞同：1
> 
> 时间：2012-11-05T22:51:25.323
> 
> 标签：magento, magento-1.7

我认为这很简单，但我已经尝试了一段时间，但一无所获。我有一个类别，我想在 phtml 中显示所有产品，但要进行一些自定义。

但我无法获得某个类别的产品。我有这个代码的类别：

```
$_category = Mage::getModel('catalog/category')->loadByAttribute('name', 'Gifts'); 
```

我试过这个但没有用：

```
$categoryId = 25;
$category = Mage::getModel('catalog/category')->load($categoryId);
$products = Mage::getModel('catalog/product')
    ->getCollection()
    ->addCategoryFilter($category)
    ->load(); 
```

我使用这个糟糕的代码让它工作，但当然有更好的方法：

```
$_category = Mage::getModel('catalog/category')->loadByAttribute('name', 'Gifts');
$collection = Mage::getModel('catalog/product')->getCollection()
    ->addAttributeToSelect('*'); // select all attributes
foreach ($collection as $product) {
  foreach ($product->getCategoryIds() as $category_id) {
      $category = Mage::getModel('catalog/category')->load($category_id);
      if ($category->getName()=='Gifts'){
          echo $product->getName()."<br/>";
      }
  }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:26:03.503

$products = $_category->getProductCollection();

```
foreach ($products as $product) {
    //for full product model
    $product = Mage::getModel('catalog/product')->load($product->getId());
} 
```

# linux - 如何将数字连续的文件名更改为相同的前缀但不同的后缀名？

> ID：13241681
> 
> 赞同：3
> 
> 时间：2012-11-05T22:51:36.417
> 
> 标签：linux, sed, awk

假设我有 4000 个文件：

```
output1
output2
output3
output4
output5
output6
output7
output8 
.....
output3999
output4000 
```

如何更改每两个具有相同前缀但不同后缀的数字连续文件？在示例中，我希望将文件名更改为：

```
output1        -> Type0001_A.abc
output2        -> Type0001_B.abc
output3        -> Type0002_A.abc
output4        -> Type0002_B.abc
output5        -> Type0003_A.abc
output6        -> Type0003_B.abc
output7        -> Type0004_A.abc
output8        -> Type0004_B.abc
.....             .....
output3999     -> Type2000_A.abc
output4000     -> Type2000_B.abc 
```

我做了一个可以解决前缀的简单循环，但不知道如何完成后缀数字和字母。

```
for i in `find . -name "output*"`
do
l=`echo $i |sed 's/output/Type/'`
'$i > $l`
done 
```

有什么建议么？高度赞赏有关“循环”的更多在线参考。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T23:06:51.510

你可以写：

```
for suffix in 000{1..9} 00{10..99} 0{100..999} {1000..2000} ; do
    mv "output$((10#$suffix * 2 - 1))" "Type${suffix}_A.abc"
    mv "output$((10#$suffix * 2))" "Type${suffix}_B.abc"
done 
```

笔记：

*   这里不需要双引号，但是没有它们，Stack Overflow 语法高亮器会变得非常混乱。（特别是，它认为以`#`十为底的算术常数开始注释。）嘿，无论如何，将参数扩展用双引号括起来总是很好的做法。
*   如果你愿意，你可以通过使用外部程序来简化第一行`seq`，而`$(seq -w 1 2000)`不是`000{1..9} 00{10..99} 0{100..999} {1000..2000}`. 就此而言，如果你有 Bash 4.x，你可以只写`{0001..2000}`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T00:15:39.400

这可能对您有用（GNU sed 和并行）：

```
parallel --xapply mv output{1} Type{2}.abc ::: $(seq 4000) ::: $(seq -f '%04g_A' 2000|sed 'h;s/A/B/;H;g') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T02:48:44.093

用 bash：

```
i=0
ab=( [0]=A [1]=B )
for f in output*; do 
    n=${f#output}
    printf -v newname "Type%04d_%c.abc\n" $(( (n+1)/2 )) ${ab[i]}
    i=$(( (i+1)%2 ))
    mv "$f" "$newname"
done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T07:39:32.533

你可以这样做：

```
seq 1 2000 | while read num; do
  echo "output$((num*2-1))" "Type$(printf "%04d" $num)_A.abc"
  echo "output$((num*2+0))" "Type$(printf "%04d" $num)_B.abc"
done 
```

如果您对输出感到满意，请更改`echo`.`mv`

可以在你的 shell 的 man 中找到关于循环的参考。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T21:10:20.673

awk 的另一个解决方案：

```
awk '{if(NR%2){printf "%s%s%04d%s\n",$0, " -> Type",(NR+1)/2,"_A.abc"} else {printf "%s%s%04d%s\n",$0, " -> Type",NR/2,"_B.abc" }}' file 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-11T19:11:21.320

使用 GNU Parallel，您可以这样做：

```
parallel mv output{#} Type{1}_{2}.abc ::: {0001..2000} ::: A B 
```

# entity-framework - 工作单元、通用存储库、EF 5.0 大量记录

> ID：13241682
> 
> 赞同：0
> 
> 时间：2012-11-05T22:51:43.547
> 
> 标签：entity-framework, repository-pattern, unit-of-work

**根据下面的分析器，即使禁用了延迟加载，我的查询也需要很长时间才能返回结果：**

![在此处输入图像描述](../Images/0d26118a75579d376f10342f4f72f517.png)

**这是我的查询：**

![在此处输入图像描述](../Images/306a25641fde1ad04d4d23ebe4dc1889.png)

**这是我的存储库，我正在做一些荒谬的事情，只记录一条记录：**

![在此处输入图像描述](../Images/c7805a6b94548b3fdda70bf310274449.png)

* * *

问题：

* * *

1.  有人能告诉我，100 条记录并尽快返回它们的正确程序是什么，这样用户就不必等待很长时间（在使用工作单元/存储库模式时）？

2.  EF 如何知道如何将此信息分页到网格中，以便用户可以使用下一批 100 条记录，以及下一批，等等？

**我不明白我是否有 .Take(1) 为什么分析器返回 73,722 行？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T00:10:04.777

您`dbSet.ToList()`正在执行 LINQ-to-Entities 查询（它说“请将整个表从数据库加载到内存中”），而不是您的`Take(1)`. 这适用于已加载的结果，而不是数据库查询。

您只需要更改顺序：

```
dbSet.Take(1).ToList() 
```

这将只查询数据库中的一个元素（`TOP 1`在 SQL 中使用）。要获取下一个分页记录，您可以使用`Skip`（连同`Take`），例如：

```
public IEnumerable<T> GetPage(int pageNumber, int entitiesPerPage)
{
    return dbSet
        .Skip((pageNumber - 1) * entitiesPerPage)
        .Take(entitiesPerPage)
        .ToList();
} 
```

# asp.net - 如何将 DevExpress 从 9.3 升级到 12.1 ASP.NET

> ID：13241683
> 
> 赞同：3
> 
> 时间：2012-11-05T22:51:46.883
> 
> 标签：asp.net, devexpress

我们有使用 DevExpress 9.3 版本的 asp.net 应用程序，我们必须升级到 12.1，升级的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T23:47:42.823

为此目的使用[项目转换器工具。](http://help.devexpress.com/#ProjectConverter/CustomDocument2529)

有关详细信息，请参阅[升级说明](http://help.devexpress.com/#GeneralInformation/CustomDocument2221)主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T22:54:34.410

通常你只需安装新版本，然后在新版本中打开解决方案，这就是 Visual Studio 等的工作方式。它们应该并行运行并进行备份，因此尝试不会有任何害处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-07T10:38:00.440

*   在 Visual Studio 中，单击`DevExpress`-> `Project Converter`->`Project Converter v15.2`

[![在 VS 中访问 DevExpress 项目转换器](../Images/99e98d1d7cf5272dc10c0bde7b482f7a.png)](https://i.stack.imgur.com/2PU7U.png)

*   这将打开项目转换器窗口

[![DevExpress 项目转换器窗口](../Images/93c999116f35f9b7cb3eda39ee743f6e.png)](https://i.stack.imgur.com/88McW.png)

*   没有特别需要对**高级设置坐立不安**
*   点击`Upgrade`
*   该`Project converter`工具可能会要求确认更新只读文件
*   单击`Yes to All`，以确保该工具不会在每个下一个文件中打扰您

[![确认升级所有文件](../Images/0f5311e2c425e0c7c8d49d6563437a89.png)](https://i.stack.imgur.com/eyLAe.png)

*   要保存转换日志，请单击`Save Log`（可选）

[![保存转换日志](../Images/c6e281dc46aba8050f02934ff80ac0af.png)](https://i.stack.imgur.com/P3Z7m.png)

*   点击`Finish`

Visual Studio 可能会与某些元素混淆：

> 'XYZ' 是 'namespace ABC' 和 'namespace DEF' 之间的模糊引用

几个例子是：

*   替换`SelectedItemCollection`为`DevExpress.Web.SelectedItemCollection`

[![将 SelectedItemCollection 替换为 DevExpress.Web.SelectedItemCollection](../Images/fe912c2d17e13f6d0de1599c55cfd2ce.png)](https://i.stack.imgur.com/g6vh4.png)

*   替换`Collection`为`System.Collections.ObjectModel.Collection`

[![将 Collection 替换为 System.Collections.ObjectModel.Collection](../Images/17714ad9448b78f92b9c4439bfbbc149.png)](https://i.stack.imgur.com/D6Tzz.png)

*   [按照DevExpress 知识库](https://www.devexpress.com/Support/Center/Question/Details/KA18674)中的说明清除`Bin`和文件夹`Obj`

# objective-c - 如果有菜单，则检测何时单击 NSStatusItem？

> ID：13241687
> 
> 赞同：4
> 
> 时间：2012-11-05T22:52:07.743
> 
> 标签：objective-c, macos, cocoa, menu, nsstatusitem

单击时我有`NSStatusItem`一个下拉菜单：

`[statusItem setMenu:statusMenu];`

由于我使用的是菜单，因此此代码不会检测到单击状态项的时间：

`[statusItem setAction:@selector(isClicked:)];`

如何使用菜单但同时知道状态项被单击？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T22:52:07.743

**为此，您将为菜单设置一个委托。**

首先，在接口文件 (.h) 中将类设置为`NSMenu`. 例如：

```
@interface MyClass : NSObject <NSMenuDelegate>
. . .
@end 
```

然后在初始化你的状态项时在实现文件（.m）中使用这样的代码：

```
//your status item initialization code. Then:
[statusItem setMenu:statusMenu];
[statusMenu setDelegate:self]; 
```

如果你愿意，给你的菜单一个标题（如果你在 Interface Builder 中创建了菜单，可以在 Xcode Interface Builder 中的“Attribute Inspector”下完成）。这样做可以消除与其他菜单的差异。

然后将此方法添加到您的类的实现 (.m) 文件中：

```
-(void)menuWillOpen:(NSMenu *)menu{
    if([[menu title] isEqualToString:@"Menu's title"]){
        //RUN CODE WHEN STATUS ITEM IS CLICKED
    }
} 
```

就是这样！您甚至可以使用以下代码来检测菜单何时关闭：

```
-(void)menuDidClose:(NSMenu *)menu{
    if([[menu title] isEqualToString:@"Menu's title"]){
        //RUN CODE WHEN MENU IS CLOSED
    }
} 
```

您现在可以知道单击状态项的时间，即使您使用的是菜单。

# performance - 使用 OpenCV 库在 C++ 中编程时，无论使用什么 IDE 和编译器，CPU 速度慢 + Windows 资源管理器 + 一切

> ID：13241691
> 
> 赞同：0
> 
> 时间：2012-11-05T22:52:27.180
> 
> 标签：performance, visual-c++, opencv, cpu, mingw32

当我使用 OpenCV 时，我将 build/install 文件夹（即我创建 mingw32-make 和 mingw32-install 文件的位置）添加到 PATH 变量中。但是，在我在 CodeBlocks IDE 上进行了几次构建之后，这让我的 PC 变得非常慢。我没有忘记释放内存或任何可能引起麻烦的东西。即使是一个简单的 hello world 程序，在几次构建之后也需要很长时间才能运行。我正在使用具有 8GB RAM 和 L3 缓存的 i7，我相信这对于任何开发都足够好。从我的 PATH 中删除 OpenCV 目录后，一切正常，但不是永久的。问题可能是什么？

我还检查了我的环境变量，里面没有垃圾变量！我只有 MinGW32 编译器，即 PATH 中的 bin 文件夹。但这是必要的（我认为！）。

令人惊讶的是，我在 Microsoft Visual C++ 2010 Express 上也进行了同样的尝试，当我尝试构建 openCV 库时，它确实降低了 PC 的速度。例如，如果我尝试在 Windows 上打开文件资源管理器，则需要大约 15 秒才能弹出一个窗口。如果我尝试打开 Web 浏览器窗口，大约需要相同的时间。我一直在监视我的任务管理器是否有奇怪的活动，但什么也没有！我不知道它是否与 Windows 7 64 位操作系统有关。

我不确定它是否与 CodeBlocks 本身有关！我有另一台使用 Visual Studio 2010 Professional 的 PC，它没有同样的问题。

我已经设法隔离了使用 MinGW 编译器的问题。原因是只有当我将它与 IDE 一起使用时才会出现问题（尝试使用 Eclipse CDT、Dev CPP 和 CodeBlocks）。我从 sourceforge.net 下载了一个稳定的 MinGW 版本，Windows 平台应该没有任何重大的内存管理问题。实际上，如果我完全使用它就会出现问题（不会立即启动，而是在我运行我的简单程序几次之后！）。

我的 MinGW 编译器来自[http://sourceforge.net/projects/mingw/files/Installer/mingw-get-inst/mingw-get-inst-20120426/](http://sourceforge.net/projects/mingw/files/Installer/mingw-get-inst/mingw-get-inst-20120426/)

我找不到一个非常直接的答案，所以我假设这是一个不寻常的问题？如果这是我错过的重复问题，请在评论中发布链接，我会接受答案。塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:55:15.883

我刚刚发现，即使是我的 Windows 更新搜索/安装也导致了同样的问题......而且 OpenCV [http://answers.opencv.org/question/3996/cannot-do-anything-中也提出了问题描述与-opencv-anymore-on-windows/](http://answers.opencv.org/question/3996/cannot-do-anything-with-opencv-anymore-on-windows/)

我对我的 Windows 7 在 SP1 安装过程中以某种方式损坏并且需要恢复/其他一些工作这一事实感到满意。我已将其移至 superuser.com，因为此处可能已过时。

**更新** 我现在已经设法通过恢复我的笔记本电脑的原始图像构建来修复它（显然）。我希望我不必这样做！微软的烂摊子让我经历了所有这些麻烦！

# c# - HtmlGenericControl("td") 跨度

> ID：13241698
> 
> 赞同：2
> 
> 时间：2012-11-05T22:53:49.387
> 
> 标签：c#, asp.net

我是asp.net c#的新手，所以请任何人都可以帮助我使用以下代码：

```
var td1 = new HtmlGenericControl("td"); 
```

我怎样才能使这个 td colspan 到任何值？

甚至如何添加 id 或 class 值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T22:56:37.967

您需要将其添加到`HtmlGenericControl.Attributes`集合中

> **HtmlControl.Attributes 属性**获取在 ASP.NET 页内的服务器控件标记上表示的所有属性名称和值对的集合。

### 样本

```
var td1 = new HtmlGenericControl("td");
td1.Attributes.Add("colspan", "1"); // replace "1" with the correct value. 
```

### 更多信息

*   [MSDN - HtmlControl.Attributes 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlcontrol.attributes.aspx)
*   [MSDN - AttributeCollection 类](http://msdn.microsoft.com/en-us/library/system.web.ui.attributecollection.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T23:05:08.013

要将`td`控件添加到页面，请使用如下所示的标记（.aspx）

```
<table><tr id="row" runat="server"></tr></table> 
```

然后添加`td1`到页面中，在您的代码中包含以下内容：

```
row.Controls.add(td1); 
```

然后设置`colspan`属性或者使用 dknaack 的方法：

```
td1.Attributes.Add("colspan", 1); 
```

或者你可以在标记中这样做：

```
<td colspan="<%= ValueOfColSpanProperty %>">TableCell</td> 
```

* * *

设置类

```
td1.Attributes.Add("class", "tablecell"); 
```

要设置 id 设置`ID`属性：

```
td1.ID = "id1"; 
```

要控制 ID 在客户端上的呈现方式，请使用该`ClientIDMode`属性（如果可用）：

```
td1.ClientIDMode = System.Web.UI.ClientIDMode.AutoID; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-05T23:01:23.363

HtmlGenericControl 一般用于 div。您应该使用 HtmlTableCell。

```
HtmlTableCell td = new HtmlTableCell();
td.ColSpan = 2; 
```

# android - 对弹丸实施重力 - 增量时间问题

> ID：13241700
> 
> 赞同：1
> 
> 时间：2012-11-05T22:53:57.973
> 
> 标签：android, projectile

我正在尝试在 Android 中实现一个简单的弹丸运动（使用 openGL）。我想在我的世界中添加重力来逼真地模拟球的下落。

我只是用一个增量时间更新我的渲染器，该时间由以下公式计算：

```
 float deltaTime = (System.nanoTime()-startTime) / 1000000000.0f;
    startTime = System.nanoTime();

    screen.update(deltaTime); 
```

在我的`screen.update(deltaTime)`方法中：

```
 if (isballMoving) {
        golfBall.updateLocationAndVelocity(deltaTime);
    } 
```

在`golfBall.updateLocationAndVelocity(deltaTime)`方法中：

```
public final static double G = -9.81;

double vz0 = getVZ0(); // Gets initial velocity(z)
double z0 = getZ0();  // Gets initial height
double time = getS();  // gets total time from act begin
double vz = vz0 + G * deltaTime;  // calculate new velocity(z)
double z = z0 - vz0 * deltaTime- 0.5 * G * deltaTime* deltaTime; // calculate new position

time = time + deltaTime; //  Update time
setS(time); //set new total time 
```

现在问题来了；

*   如果我设置`deltaTime`为`0.07`静态，那么动画运行正常。但由于该`update()`方法尽可能快地运行，因此球的长度和速度因设备而异。

*   如果我不触摸`deltaTime`并运行程序（我的测试设备的 deltaTime 在 0.01 - 0.02 之间）动画长度和球的速度在不同的设备上是相同的。但是动画太慢了！

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:37:20.673

增加每帧更改的数量？这应该使您的动画快 5 倍：

```
double vz = vz0 + G * deltaTime * 5;  // calculate new velocity(z)
double z = z0 - vz0 * deltaTime- 0.5 * G * deltaTime* deltaTime * 5; // calculate new position 
```

# xml - 使用正则表达式解析 HTML/XML 标签

> ID：13241701
> 
> 赞同：-1
> 
> 时间：2012-11-05T22:53:59.427
> 
> 标签：xml, regex, xml-parsing

> **可能重复：**
> [正则表达式匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

为什么使用正则表达式进行 HTML/XML 解析不是一个好主意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T22:55:14.590

因为这些语言不规则。它们不符合正则表达式的预期用途。使用 XPath 之类的东西进行 XML 解析要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:05:44.743

好的，明白了：HTML/XML 是 Chomsky Type 2 语法，而正则表达式是 Chomsky Type 3 语法，因此后者的表达能力不足以解析前者。

# c# - 打印列表成员

> ID：13241703
> 
> 赞同：0
> 
> 时间：2012-11-05T22:54:15.477
> 
> 标签：c#, list, foreach

希望我的最后一个问题有一段时间了。我有一个简单的类，它还包含一个 List 属性。

```
public class MyClass    
{
    public double myProperty1;
    public double myProperty2;
    public List<double> myList { get; private set; }

    public MyClass()
    {    
        myList = new List<double>();
    }    
} 
```

在我的程序中，我创建了一个 MyClass 对象列表，并将其添加到另一个列表中

```
List<MyClass> nMyClassList = new List<MyClass>(); 
```

到目前为止一切正常。现在我有一个 for each 循环，我在其中遍历并更改 nMyClassList 中每个 MyClass 对象的一些属性

```
foreach (MyClass i in nMyClassList )
{
    if x = y
        i.myList.Add(y); // I think this is working fine

    if something else

    foreach (double a in i.mylist)
    {
        Print(a); // problem here
    }      
} 
```

但是当我打印 a 时，我显然正在打印 List 中的所有双打，而不仅仅是与单个对象关联的那些，即使我的 foreach 仍然嵌套在第一个对象中。我在这里做错了什么吗？有任何想法吗。我想我正确地添加了值，也许它只是最后一个 foreach 的东西，我从整个 nMyClassList 打印所有 myList 双打？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:18:29.673

这里缺少一个等号：

```
if x = y 
```

此代码将 y 的值分配给 x 并返回 true（此 if 块将始终被执行）

应该

```
if x == y 
```

# jquery - jquery获取上一张图片的宽度

> ID：13241704
> 
> 赞同：1
> 
> 时间：2012-11-05T22:54:20.453
> 
> 标签：jquery

所以我不能让这个 jquery 正确，无论我尝试什么，它都会返回错误的宽度。我希望使“img-shadow”div中的图像与它之前的图像大小相同。请注意，这将在页面上重复多次。

```
<p>
  <img src="" alt="">
  <span class="img-shadow">
    <img src="" alt="">
  </span>
</p> 
```

我希望你不要在这个问题上对我摇摇头，看起来超级简单，但是 .prev .find .closest 对我不起作用。

谢谢！

解决方案添加：

jQuery

```
$(".img-shadow").each(function(){
    $(this).children("img").width( $(this).parent().find('img').width() );
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:57:49.347

这应该可以，但我没有测试它：

```
$('.img-shadow').width( $('.img-shadow').parent().find('img').width() ); 
```

# c# - 打开一个 ajax modalpopup，其中包含来自 gridview 单元格的详细信息

> ID：13241705
> 
> 赞同：2
> 
> 时间：2012-11-05T22:54:25.847
> 
> 标签：c#, .net, ajax, gridview, modalpopupextender

我有一个带有约会信息的网格视图。我想做的是在每个单元格中都有一个链接按钮（将在运行时创建）并打开一个显示约会详细信息的模式弹出窗口。任何帮助将不胜感激。

到目前为止，我已经有了，但它不会触发链接按钮

```
<asp:GridView ID="Grd" runat="server" AutoGenerateColumns="true" onrowdatabound="Grd_RowDataBound"></asp:GridView><asp:Button ID="btnShowPopup" style="display:none" runat="server"  />
<ajaxToolkit:ModalPopupExtender
ID="ModalPopupExtender1" runat="server" TargetControlID="btnShowPopup" PopupControlID="pnlpopup" CancelControlID="ImgCancel" ></ajaxToolkit:ModalPopupExtender>
<asp:Panel ID="pnlpopup" runat="server" Width="400px" ><!--Show Details--!>
 <asp:ImageButton ID="imgCancel"  AlternateText="cancel"  Height="25" Width="25" runat="server" ImageAlign="Right" />
</asp:Panel> 
```

后面的代码

```
protected void Grd_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            //Split out the visit details & format
            for (int i = 0; i <= e.Row.Cells.Count - 1; i++)
            {

                LinkButton lnk = new LinkButton();
                lnk.Text = "Details for:" + "<br />" + e.Row.Cells[i].Text; 

                lnk.CommandName = "ShowDetails";
                lnk.Command += LinkButton_Command;
                e.Row.Cells[i].Controls.Add(lnk);

            }

        }
    }
    protected void LinkButton_Command(object sender, CommandEventArgs e)
    {
        if (e.CommandName == "ShowDetails")
        {

            LinkButton btndetails = sender as LinkButton;

            GridViewRow gvrow = (GridViewRow)btndetails.NamingContainer;

            this.ModalPopupExtender1.Show();

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:35:49.163

在您的模式弹出窗口中，唯一的内容应该是一个空的 iframe。然后编写一个javascript函数如下：

```
function showPopup(target, link, width, height)
{
    var frame = document.getElementById('popupIframe');
    frame.src = link;
    frame.width = width;
    frame.height = height;
    var location = Sys.UI.DomElement.getLocation(target);
    var popup = $find('Popup');
    popup.set_X(location.x);
    popup.set_Y(location.y);
    popup.show();
} 
```

然后在您的链接按钮中添加：

```
OnClientClick="showPopup(this, your_details_page_with_querystring_params, width, height) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:04:50.043

最重要的是，您需要确保`LinkButton`在回发时重新创建动态控件，以便正确连接事件。由于您`LinkButtons`在`Grd_RowDataBound`处理程序中创建了，它仅在您调用时被调用`BindData()`（并且您不会在回发时调用它），所以您的事件不会连接。因此，如果您的代码看起来像这样：

```
if (!IsPostBack)
{
     Grd.BindData();
} 
```

尝试删除`if(!IsPostBack)`检查，并始终在 Page_Load 上调用 BindData()。

# ruby-on-rails-3.1 - Rails - 我可以同时使用 Ransack 和 CanCan 吗？

> ID：13241707
> 
> 赞同：3
> 
> 时间：2012-11-05T22:54:32.947
> 
> 标签：ruby-on-rails-3.1, cancan, ransack

我正在尝试根据用户的授权获取搜索结果...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-29T18:42:25.583

执行 Ransack 搜索后，只需使用 CanCan 过滤结果。这是我的应用列出提供者的示例。

如果您的能力不使用方块，请使用`accessible_by`：

```
def index
  @search = Provider.sorted.search(params[:q])
  @providers = @search.result.accessible_by(current_ability)
end 
```

如果您的能力正在使用块，则不能使用`accessible_by`：

```
def index
  @search = Provider.sorted.search(params[:q])
  @providers = @search.result.select{|p| can? :read, p}
end 
```

有关更多详细信息和示例，请查看 cancan wiki 上的[Fetching Records](https://github.com/ryanb/cancan/wiki/Fetching-Records)

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-05T09:30:07.633

```
As of 1.4 the index action will load the collection resource using accessible_by 
```

所以现在我们拥有所有可访问的记录`index`。因此以下将起作用

```
def ProvidersController
  before_filter :authenticate_user!
  load_and_authorize_resource

  def index
    @q = @providers.search(params[:q]).page(params[:page])
    @providers = @q.result
  end

end 
```

# jquery - jQuery-UI 自动完成小部件未绑定到 Rails 中加载的 ajax 部分表单

> ID：13241709
> 
> 赞同：1
> 
> 时间：2012-11-05T22:54:36.083
> 
> 标签：jquery, ruby-on-rails, ajax, ruby-on-rails-3, jquery-ui

我有一个带有使用 jQuery-UI 自动完成小部件的文本字段的表单。我正在使用 AJAX 和 Ruby on Rails 将此表单作为部分加载`<li id="activity_<%= activity.id %>"><%= link_to activity.address, edit_activity_path(activity), :remote => true %></li>`

由于表单是在 document.ready 之后加载的，因此自动完成 jQuery 小部件没有绑定到 DOM 元素。

由于这不是 jQuery AJAX 调用，因此我认为在 Ajax 调用之后没有可以用来绑定自动完成小部件的成功回调。

我不确定如何使用我在自动完成小部件中看到的 .on() 函数，因为语法是 $('selector').autocomplete

有人可以帮忙吗？

这是 edit.js.erb 文件：

```
$("#activity_form").html("<%= escape_javascript(render(:partial => "form"))%>"); 
```

这是我将自动完成小部件绑定到我的文本字段的 jQuery 代码。

```
jQuery ->       
$('[type="text"][name*="[geocode_location]"]').autocomplete
  source: (request, response) ->
    $.ajax 
      url: "http://ws.geonames.org/searchJSON"
      dataType: "jsonp"
      data: 
        featureClass: "P"
        style: "full"
        maxRows: 12
        name_startsWith: request.term

      success: (data) ->
        response $.map(data.geonames, (item) ->
          label: item.name + ((if item.adminName1 then ", " + item.adminName1 else "")) + ", " + item.countryName
          value: item.lat + ", " + item.lng
        )
  minLength: 2

  open: ->
    $(this).removeClass("ui-corner-all").addClass "ui-corner-top"

  close: ->
    $(this).removeClass("ui-corner-top").addClass "ui-corner-all"
  focus: (event, ui) ->
    event.preventDefault()
    $(this).val ui.item.label      
  select: (event, ui) ->
    event.preventDefault()
    $(this).val ui.item.label
    $(this).siblings('[name*="[geocode_ll]"]').val ui.item.value 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T22:38:52.250

我在这里读到了每个 Rails Ajax 调用可以绑定到的 6 个自定义事件，包括 ajax:success，只要有成功的 ajax 请求就会触发。

[http://net.tutsplus.com/tutorials/javascript-ajax/using-unobtrusive-javascript-and-ajax-with-rails-3/](http://net.tutsplus.com/tutorials/javascript-ajax/using-unobtrusive-javascript-and-ajax-with-rails-3/)

所以我做了 $(this).bind "ajax:success" ，它允许 $(this) 在这种情况下是整个窗口，在任何 "ajax:success" 事件之后触发一些其他功能。

所以，我最终这样做了：

```
jQuery ->
  $(this).bind "ajax:success", -> 
    jQuery ->       
      $('[type="text"][name*="[geocode_location]"]').autocomplete
       --REST OF CODE-- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T19:09:51.633

我有一个类似的情况，在 ajax 调用后渲染包含自动完成输入字段的部分时，自动完成不再起作用。我正在使用`rails3-jquery-autocomplete`宝石。

问题很简单，所有自动完成输入字段仅在初始文档加载时绑定到自动完成功能。要再次绑定新的自动完成字段，只需调用以下函数：

```
jQuery('input[data-autocomplete]').railsAutocomplete(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:57:50.857

> $('[type="text"][name*="[geocode_location]"]').live("autocomplete", function(){ your code})

请试试。

# ruby-on-rails - 带有 Rails 的 Backbone.js 嵌套模型

> ID：13241710
> 
> 赞同：0
> 
> 时间：2012-11-05T22:54:37.790
> 
> 标签：ruby-on-rails, backbone.js

所以我遇到了这个烦人的嵌套对象问题。我从 rails 模型生成 JSON 数据，并将其传递到这样的主干模型中：

```
board = Board.find(anyid)
covers = [link1, link2]

return_json = {
 board: user,
 covers: covers
}

resond_to do |format|
 format.js { render json: return_json }
end 
```

在我的骨干端，我得到了这样的东西：

![在此处输入图像描述](../Images/d7341419ddd272b52a81b4ef0348b04e.png)

为什么板对象与另一个对象嵌套？我已经多次遇到这种情况，我必须做一些类似`@model.get("board").board.name`检索值的事情。这很烦人。但是，您可以看到该数组按我的预期工作。

如果我没有说清楚，请发表评论！我会在附近。

# database - amazon rds django 重新创建数据库

> ID：13241712
> 
> 赞同：0
> 
> 时间：2012-11-05T22:54:40.970
> 
> 标签：database, django, amazon-web-services, rds

我在 model.py 中做了一些更改，我想让它们反映到数据库中。

据我了解，`syncdb`实际上并没有重新创建数据库，而只是更新它。

因为我修改了一个字段 from`integer`到`biginteger`syncdb 并没有改变数据库结构。

我怎样才能更新我的数据库？

在本地我删除了 sqllite 文件并重新创建了它。现在，我不知道该怎么做，因为我无法删除数据库。然而，我可以删除数据库，但这样做会使 EB 机器停止工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:42:27.553

有一个工具叫做`south`. [http://south.readthedocs.org/en/latest/about.html](http://south.readthedocs.org/en/latest/about.html)

# postgresql - Psql中如何在不同数据库下创建表

> ID：13241718
> 
> 赞同：3
> 
> 时间：2012-11-05T22:55:19.200
> 
> 标签：postgresql, postgresql-9.1, create-table

我的 PSQL 中有 2 个数据库，我想在特定模式中创建一个表。

例子：

我有数据库**test1 /schema b**和**test2 / schema c/d**

我想在**模式 d**下的**test2 数据库中创建一个新表**

 **由于安装设置，我的默认数据库是 test1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T23:19:11.193

为了在 test2 中创建一个新表，您应该首先连接到**test2 数据库**。然后可以在创建语句中指定**d schema ：**

```
CREATE TABLE d.tableName (...) 
```

查看[CREATE TABLE 文档](http://www.postgresql.org/docs/9.1/static/sql-createtable.html)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T06:05:38.083

您能否解释一下您使用的是哪种类型的安装
基于 GUI 或控制台版本
[http://www.postgresql.org/docs/9.1/static/sql-createtable.html](http://www.postgresql.org/docs/9.1/static/sql-createtable.html)

1.  如果您有 GUI，您只需右键单击并创建新表`Table Name , Columns and data type`

2.  如果您有基于控制台的版本，您需要登录并进入您要创建表的特定数据库
    如果您需要完整的代码请告诉我我会发布完整的代码**

# python - 为数组切片赋值很慢

> ID：13241724
> 
> 赞同：8
> 
> 时间：2012-11-05T22:55:50.440
> 
> 标签：python, performance, numpy, cython

我正在尝试通过在 Cython 中实现它来优化 Python 算法。我的问题是关于以下代码中存在的某个性能瓶颈：

```
@cython.boundscheck(False) # turn off bounds-checking for entire function
def anglesToRGB( np.ndarray[double, ndim=2] y, np.ndarray[double, ndim=2] x ):

cdef double angle
cdef double Hp
cdef double C
cdef double X
cdef np.ndarray[double, ndim=3] res = np.zeros([y.shape[0], y.shape[1], 3], dtype=np.float64)

for i in xrange(y.shape[0]):
    for j in xrange(y.shape[1]):
        angle = atan2( y[i,j], x[i,j] )*180.0/PI+180

        C = sqrt(pow(y[i,j],2)+pow(x[i,j],2))/360.0 #Chroma
        Hp = angle/60.0
        X = C*(1-fabs( Hp%2-1))

        C *= 255
        X *= 255

        if (0\. <= Hp < 1.):
            res[i,j,:] = [C,X,0]
        elif (1\. <= Hp < 2.):
            res[i,j,:] = [X,C,0]
        elif (2\. <= Hp < 3.):
            res[i,j,:] = [0,C,X]
        elif (3\. <= Hp < 4.):
            res[i,j,:] = [0,X,C]
        elif (4\. <= Hp < 5.):
            res[i,j,:] = [X,C,C]
        else:
            res[i,j,:] = [C,0,X]

return res 
```

我已经确定了主要瓶颈是当我将值列表分配给 res 数组的切片时，例如

```
res[i,j,:] = [C,X,0] 
```

但是，如果我将作业更改为

```
res[i,j,0] = C
res[i,j,1] = X
res[i,j,2] = 0 
```

然后代码运行速度提高了几个数量级。对我来说这很奇怪，因为 Cython 编译器肯定应该足够聪明来为我做这件事？还是我需要先提供一些提示？我应该注意，将切片更改为 0:3 而不是 : 并将值列表设为 numpy 数组并不会提高性能。

我想知道的是为什么这个操作会严重影响性能，以及是否有任何方法可以解决它而不必牺牲方便的列表和切片符号。

最好的祝福

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T23:32:32.920

不，Cython（用 0.17 测试）不够聪明，无法优化这个切片分配。如果您查看生成的 C 代码（使用`cython -a`并单击 HTML 报告中的任意行以查看生成的代码），那么您可以看到

```
res[i,j,:] = [C,X,0] 
```

编译为

*   C 和 Python 浮点类型之间的转换
*   列表的分配`[C,X,0]`
*   元组的分配`(i, j, slice(None))`
*   打电话给`res.__setitem__`
*   对所有这些进行错误检查
*   分配结构的重新分配

即，几乎所有 CPython 会执行此代码的相同操作。

你可以做些什么来解决这个问题：

1.  声明三个变量，比如说`cdef double v1, v2, v3`；
2.  在条件句中为这些赋值，例如`v1, v2, v3 = C, X, 0`等，优化为三个 C 赋值；
3.  在条件块之后，在三个单独的分配中分配`v1, v2, v3`给等。`res[i,j,0]`

# r - 如何在 R 中使用 system()？

> ID：13241726
> 
> 赞同：0
> 
> 时间：2012-11-05T22:56:00.520
> 
> 标签：r

我想调用系统命令来更改 R 控制台中的目录。

例如，

```
system(paste('"cd C:/Users/Dropbox/RPackages"'),intern = TRUE)
system(paste('"R CMD build test"'))
system(paste('"R CMD check test"'))
system(paste('"R CMD INSTALL test"'))
library(test) 
```

这些命令应该在 Windows 命令提示符中运行。但我想将它们埋在 RGUI 脚本文件中，以允许用户在将其包装到包中之前更改参数。我从 R 控制台得到的错误消息是

```
Error in system(paste("\"cd C:/Users/Dropbox/RPackages"\""), intern = TRUE) : 
'"cd C:/Users/Dropbox/RPackages"' not found 
```

我也试过

```
system("cd C:/Users/Dropbox/RPackages",intern = TRUE) 
```

但收到类似的错误信息

```
Error in system("cd C:/Users/Dropbox/RPackages", intern = TRUE) : 
'cd' not found 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T23:00:17.583

为什么不使用 R 命令`setwd()`来更改目录——请参阅`help(setwd)`——而不是？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T14:33:56.117

`system()`在自己的解释器中运行每个命令。对工作目录所做的任何更改都不会传播。

如果你想在一个工作目录中做几件事，把所有命令放在一个`system`调用中，用分号分隔（这适用于 Linux shell，不确定 Windows）。用 \n 分隔也适用于 Linux，试试看？

比较这些：

```
> getwd()
[1] "/nobackup/rowlings/Downloads/Dirs"
> system("cd Foo; pwd")
/nobackup/rowlings/Downloads/Dirs/Foo
> system("cd Foo") ; system(" pwd")
/nobackup/rowlings/Downloads/Dirs 
```

根据您的实际问题，您最好`setwd()`在 R 中使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T20:17:27.113

你试过双反斜杠吗？

```
'C:\\Users\\Dropbox\\RPackages' 
```

在 Windows 7 中使用 R 时遇到了类似的问题：

```
download.file(url=<url>, destfile='C:\\<dir>\\<dir>\\<file>') 
```

# android - POM 策略多个 Git 存储库和一个库项目

> ID：13241729
> 
> 赞同：0
> 
> 时间：2012-11-05T22:56:33.717
> 
> 标签：android, maven, android-maven-plugin

我已经开始了将我的 Android 项目移植到使用 Maven 的艰巨任务。我在查找有关组织我的 pom 文件和依赖项的最佳方式的信息时遇到了一些麻烦。我有两个 Android 应用程序，它们都使用包含资源和网络代码的同一个 Android 库项目。所有三个项目都使用 git 进行源代码控制，并在 github 上的单独存储库中进行。我将所有 3rd 方库依赖项都放在 Library Project 上，例如 Action Bar Sherlock、View Pager Indicator 等，并使用该库将它们导出到项目中。

我想让我的团队的其他成员尽可能轻松地使用它们的依赖项构建这两个 Android 应用程序。我应该将所有三个 repos 克隆到同一个目录中并使 pom 依赖于假设同一目录的库，还是将一个 git repo 与父 pom 与 git sub modules 和 pom 模块一起使用会更好？但是，我担心这会变得太混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:54:59.210

我会根据两个 Android 项目之间的自然关联来管理我的项目和 github 存储库。

假设它们是鸟类和鸟类的季节，将它们组织为多模块项目并使用单个 github 存储库会更合理：

```
parent/
  birds/
  birds-season/
  common-lib/ 
```

如果它们是鸟和小猪，我会将它们分别放在三个 github 存储库中：

```
birds/

piggies/

common-lib/ 
```

此外，您还应该考虑您的项目发布策略，例如如果您计划使用 maven-release-plugin 并希望鸟和新娘季节有完整的独立发布生命周期（版本号，scm 标签等），那就更有效地将它们分成不同的 github 存储库（以便 maven-release-plugin 可以正确管理自动版本增量和 scm 标记）。

# php - GD：拖放到 PHP 表单中

> ID：13241734
> 
> 赞同：0
> 
> 时间：2012-11-05T22:56:47.890
> 
> 标签：php, forms, gd

我目前正在使用 GD 图像，我允许用户通过 $_GET 自定义很多东西。我想知道是否有可能以某种方式（以一种形式）让用户将标记“拖放”到所需位置，在该位置文本将显示在 510x100 图像上，然后将其发送到页面生成图像。

有任何想法吗？

```
imagefttext($image, $fsize, 0, $mottox, $mottoy, $font_color, './volt.ttf', $motto);
--------------------------------
if(empty($_REQUEST['mottox'])){
    $mottox = '10';
}else{ 
        $mottox =$_REQUEST['mottox'];
}

if(empty($_REQUEST['mottoy'])){
    $mottoy = '60';
}else{ 
        $mottoy =$_REQUEST['mottoy'];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:00:41.887

看看这个可拖动的解决方案[http://jqueryui.com/draggable/#events](http://jqueryui.com/draggable/#events)

您只需要获取文本容器的最终位置并将其发送到网络服务器。

# ios - UIScrollView 在滚动时取消 UIPageViewController 手势

> ID：13241736
> 
> 赞同：4
> 
> 时间：2012-11-05T22:56:57.653
> 
> 标签：ios, scrollview, gesture, uipageviewcontroller

我有一个`UIPageViewController`可以处理我的“书”页的翻页。但是，每个书页都是 a`ViewController`和 a `UIScrollView`as a `subview`。由于. `UIScrollView`_ `contentSize`问题是当用户`scrollview`垂直滚动时，由于`scrollview`仍在滚动/减速，用户无法翻页。一个非常简单的查看方法是滚动页面，然后尝试点击视图的边缘。这通常会更改页面，并且在`scrollview`不移动时确实会更改页面。但是，当它移动时，点击会导致滚动视图停止移动而不是翻页。

`scrollviews`如果`UIPageViewController`尝试使用手势通过点击或平移页面来翻页以导致翻页动画，我该如何取消手势？

有关我想要实现的行为的示例，请查看 iPhone 上的 Twitter 官方客户端。当提要仍在滚动减速时，可以从时间线滑动到发现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-11T02:29:53.903

滚动事件将`UIScrollView`阻止其他`UIView`动画，因此在 Twitter 的情况下，它们可能会在滑动视图之前一瞬间取消滚动。正如您在问题中所问的那样：

*“如果 UIPageViewController 试图使用手势通过点击或平移页面来翻页以导致翻页动画，我该如何取消滚动视图手势？”*

我会建议一个解决方法。

不要依赖`UIPageViewController`'s 固有`UIPanGestureRecognizer`的 ，在页面视图中包含您自己`UIPanGestureRecognizer`的 ，这样当在页面的适当部分检测到平移并以适当的方向执行时， new`UIPanGestureRecognizer`会覆盖`UIPageViewController`' `UIGestureRecognizer`s 并触发必要的操作。具体来说，您需要：

(1) 使用停止滚动动画

```
CGPoint offset = scrollView.contentOffset;
[scrollView setContentOffset:offset animated:NO]; 
```

(2) 使用编程方式翻页

```
- (void)setViewControllers:(NSArray *)viewControllers direction:
  (UIPageViewControllerNavigationDirection)direction animated:
  (BOOL)animated completion:(void (^)(BOOL finished))completion; 
```

这样滚动动画就会停止，并且在一个流畅的平移手势内完成翻页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T18:01:43.007

`UIGestureRecognizer`类可以使用[requireGestureRecognizerToFail:](https://developer.apple.com/library/ios/documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/instm/UIGestureRecognizer/requireGestureRecognizerToFail%3a)方法设置对其他手势识别器的依赖关系。
在您的情况下，可以通过以下方式使用此方法：

```
for (UIGestureRecognizer *gestureRecognizer in pageController.gestureRecognizers) {
    for (ViewController *viewController in viewControllers) {
        for (UIGestureRecognizer *gestureRecognizerForFail in viewController.scrollView.gestureRecognizers) {
            [gestureRecognizerForFail requireGestureRecognizerToFail:gestureRecognizer];
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-08T21:07:30.117

我遇到了同样的问题，我解决了我的问题......在我的情况下，我有启用缩放功能的 pdf。所以我有例如：

```
[scrollView setMaximumZoomScale:6];
[scrollView setMinimumZoomScale:1]; 
```

当我初始化控制器及其滚动视图时，就在那之后，每次我改变方向或页面时，我都会改变缩放以适应页面的宽度，只有当缩放“远离”时

```
CGFloat desiredWidth = scrollView.frame.size.width/pdfRect.size.width;
if (desiredWidth>[self zoomScale]) {
    [scrollView setZoomScale:desiredWidth animated:YES];
} 
```

我希望它有帮助

# php - 浏览器显示 PHP 代码而不是处理它

> ID：13241738
> 
> 赞同：4
> 
> 时间：2012-11-05T22:57:02.927
> 
> 标签：php, xampp

> **可能重复：**
> [未执行 PHP 代码（我可以在页面的源代码上看到它）](https://stackoverflow.com/questions/5121495/php-code-is-not-being-executed-i-can-see-it-on-source-code-of-page)
> [Web 浏览器未将 PHP 代码作为 PHP 代码处理](https://stackoverflow.com/questions/6932913/web-browser-not-processing-php-code-as-php-code)

我已经在我的 Windows 8 pro 电脑上安装了 XAMPP。每次我*`index.php`*在 Windows 8 上运行文件时，我都会使用 Windows 7，它会在浏览器 IE10 上显示代码。

这是我所做的：

1.  我已正确命名文件：*`index.php`*
2.  我已经安装了服务器并将文件保存在里面*`c:/xampp/htdocs/PHP/`*
3.  我曾经`<?php ?>`打开和关闭所有 PHP 标记，其他一切似乎都运行良好，例如 PHPMyAdmin 和 php.ini 文件

我不知道怎么了，这让我发疯......

法里斯

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-05T23:06:58.153

问题是您不是通过 Web 服务器解析文件，而是直接访问它。

您需要使用网址：

```
http://localhost/index.php 
```

或者（根据您上面的路径）它的

```
http://localhost/PHP/index.php 
```

在浏览器中

# c++ - 在 Boost::range 中组合适配器

> ID：13241740
> 
> 赞同：11
> 
> 时间：2012-11-05T22:57:30.890
> 
> 标签：c++, boost, functional-programming, boost-range

我开始使用 Boost::Range 以便[在 C++ 中拥有一个惰性转换管道](https://stackoverflow.com/questions/13144280/lazy-transform-in-c)。我现在的问题是如何将管道分成更小的部分。假设我有：

```
int main(){
  auto map = boost::adaptors::transformed; // shorten the name
  auto sink = generate(1) | map([](int x){ return 2*x; })
                          | map([](int x){ return x+1; })
                          | map([](int x){ return 3*x; });
  for(auto i : sink)
    std::cout << i << "\n";
} 
```

我想用 a 替换前两张地图`magic_transform`，即：

```
int main(){
  auto map = boost::adaptors::transformed; // shorten the name
  auto sink = generate(1) | magic_transform()
                          | map([](int x){ return 3*x; });
  for(auto i : sink)
    std::cout << i << "\n";
} 
```

一个人会怎么写`magic_transform`？我查阅了[Boost::Range 的文档](http://www.boost.org/doc/libs/1_49_0/libs/range/doc/html/range/reference/extending/method_3.html)，但我无法很好地掌握它。

**附录**：我正在寻找这样的类：

```
class magic_transform {
    ... run_pipeline(... input) {
        return input | map([](int x){ return 2*x; })
                     | map([](int x){ return x+1; });
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T03:02:48.557

最困难的问题是找出代码中的返回类型。`decltype`和 lambdas 不能很好地混合（[见这里](https://stackoverflow.com/questions/4846540/c11-lambda-in-decltype)），所以我们必须考虑另一种方法：

```
auto map = boost::adaptors::transformed;

namespace magic_transform
{
   std::function<int(int)> f1 = [](int x){ return 2*x; };
   std::function<int(int)> f2 = [](int x){ return x+1; };
   template <typename Range>
   auto run_pipeline(Range input) -> decltype(input | map(f1) | map(f1))
   {
        return input | map(f1) | map(f2);
   }
}

...
auto sink = magic_transform::run_pipeline(generate(1))
                          | map([](int x){ return 3*x; }); 
```

简单的解决方案是将 lambda 插入其中`std::function`，以便我们可以使用它`decltype`来推断返回类型。我`magic_transform`在示例中使用了命名空间，但如果您愿意，也可以将此代码改编为一个类。[这是](http://liveworkspace.org/code/66609a2ebe8dd2decad0408b678eb82b)使您的代码适应上述内容的链接。

此外，`std::function`在这里使用可能有点过分了。相反，您可以只声明两个普通函数（[示例](http://liveworkspace.org/code/6b6480394ec93927d9a470da5f37bcd2)）。

我也在试验`boost::any_range`，似乎与 C+11 lambdas 等有一些不兼容。我能得到的最接近的是以下（[示例](http://liveworkspace.org/code/b33f529f1a0f8038bfccb3d6f035fca9)）：

```
auto map = boost::adaptors::transformed;
using range = boost::any_range<
               const int,
               boost::forward_traversal_tag,
               const int&,
               std::ptrdiff_t
               >;

namespace magic_transform
{
    template <typename Range>
    range run_pipeline(Range r)
    {
        return r | map(std::function<int(int)>([](int x){ return 2*x; }))
             | map(std::function<int(int)>([](int x){ return x+1; }));
    }
}

int main(){
  auto sink = magic_transform::run_pipeline(boost::irange(0, 10))
                          | map([](int x){ return 3*x; });
  for(auto i : sink)
    std::cout << i << "\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T23:35:39.280

我认为会起作用：

```
auto magic_transform()->decltype(boost::adaptors::transformed(std::function<int(int)>())
{
    std::function<int(int)> retval = [](int x){ return [](int x){ return x+1; }(2*x);
    return boost::adaptors::transformed(retval);
} 
```

但这可能不是您想要的。:) （上面代码中的笑话：2*x+1 的链式 lambda，在基本上实现上使用 decltype 来查找返回类型），

查看 的源代码`http://www.boost.org/doc/libs/1_46_1/boost/range/adaptor/transformed.hpp`，`magic_transform`想要返回的类型是`boost::range_detail::transform_holder<T>`，其中 T 是函数的类型。

当您使用 lambda 在堆栈上执行此操作时，`T`最终会成为一些非常狭窄的类型。如果您想在不暴露所有细节的情况下传递抽象转换，那么使用`std::function<outtype(intype)>`可能是合理的（运行时开销会很小）。

希望有效。

# c# - 将扩展按钮添加到 Stackpanel

> ID：13241742
> 
> 赞同：0
> 
> 时间：2012-11-05T22:57:53.033
> 
> 标签：c#, xaml, stackpanel, windows-store-apps

我想将元素添加到 StackPanel（或 Listbox / Listview，如果它可以更容易的话）并自动添加一个 Button（如“...”）以指示有更多的孩子而不是空间。考虑一个每天都有约会项目的日历。如果约会的数量超过了可以显示的数量，则会显示一个按钮以转到当天的详细视图。

这可以自动完成，或者我如何计算堆栈面板及其项目的位置。

它用于 c# 中的 windows 商店开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:13:55.707

您可以使用行为（`System.Windows.Interactivity`需要参考）。

我抓住了你的想法来计算堆栈面板及其子项的高度（或宽度，如果堆栈面板具有水平方向），并在必要时显示“更多项目”/详细信息按钮

```
public class ChildSpaceBehavior : Behavior<StackPanel>
    {
        public static readonly DependencyProperty ShowDetailsCommandProperty = DependencyProperty.Register("ShowDetailsCommand", typeof(RelayCommand), typeof(ChildSpaceBehavior), new PropertyMetadata());

        public RelayCommand ShowDetailsCommand
        {
            get { return (RelayCommand)GetValue(ShowDetailsCommandProperty); }
            set { SetValue(ShowDetailsCommandProperty, value); }
        }

        private bool _isMoreChildrenItemVisible;

        protected override void OnAttached()
        {
            AssociatedObject.LayoutUpdated += OnLayoutUpdated;
        }

        protected override void OnDetaching()
        {
            AssociatedObject.LayoutUpdated -= OnLayoutUpdated;
        }

        private void OnLayoutUpdated(object sender, EventArgs e)
        {
            var height = AssociatedObject.Height;
            var children = AssociatedObject.Children;
            double childHeighSum = 0;

            var childList = new List<FrameworkElement>();

            foreach (FrameworkElement child in children)
            {
                if (childHeighSum > height)
                {
                    ShowMoreChildrenItem(childList);
                    break;
                }

                if (childHeighSum + child.ActualHeight > height)
                {
                    ShowMoreChildrenItem(childList);
                    break;
                }

                childHeighSum += child.ActualHeight;
                childList.Add(child);
            }
        }

        private void ShowMoreChildrenItem(List<FrameworkElement> childList)
        {
            if (_isMoreChildrenItemVisible) return;

            var moreItem = new Button{ Content = "..." };
            moreItem.Command = ShowDetailsCommand;

            var itemsToRemove = new List<FrameworkElement>();

            foreach (FrameworkElement child in AssociatedObject.Children)
            {
                if(childList.Contains(child) == false) itemsToRemove.Add(child);
            }

            foreach (var element in itemsToRemove)
            {
                AssociatedObject.Children.Remove(element);
            }

            AssociatedObject.Children.Add(moreItem);

            _isMoreChildrenItemVisible = true;
        }
    } 
```

对于 RelayCommand 看[这里](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

xml:

```
<Grid>
        <StackPanel Height="200" Orientation="Vertical">
            <Border BorderBrush="Gray" BorderThickness="1">
                <Label Height="50" Content="Item 1" />
            </Border>
            <Border BorderBrush="Gray" BorderThickness="1">
                <Label Height="50" Content="Item 2" />
            </Border>
            <Border BorderBrush="Gray" BorderThickness="1">
                <Label Height="50" Content="Item 3" />
            </Border>
            <Border BorderBrush="Gray" BorderThickness="1">
                <Label Height="50" Content="Item 4" />
            </Border>
            <Border BorderBrush="Gray" BorderThickness="1">
                <Label Height="50" Content="Item 5" />
            </Border>
                <i:Interaction.Behaviors>
                <StackPanelBehavior:ChildSpaceBehavior ShowDetailsCommand="{Binding ShowDetailsCommand}" />
            </i:Interaction.Behaviors>
        </StackPanel>
    </Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:38:32.490

由于我页面的几乎所有元素都是自动调整大小的，因此对上述解决方案的以下更改有所帮助。包含堆栈面板网格的页面：

```
 public MainPage()
    {
        InitializeComponent();
    }

    private void FillGridWithItems()
    {   
        //Row and ColumnDefinitions
        for (int row = 0; row < 5; row++)
        {
            for (int col = 0; col < 7; col++)
            {
               var item = new MyStackPanel(children)
               Grid.SetColumn(item, col);
               Grid.SetRow(item, row);
               grid.Children.Add(item);
            }
        }
        Loaded+=PageLoaded;            
    }

    /// When page is loaded, ActualHeight of elements are calculated for sure.
    private void PageLoaded(object sender, RoutedEventArgs e)
    {
        foreach (var child in grid.Children)
        {
            var item = child as MyStackPanel;
            if (item != null)
            {
                item.FillInData();
            }
        }
    }

    /// Used instead of constructor, cause a parameter is sent to this page.
    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        FillGridWithItems()
    } 
```

我的堆栈面板：

```
private readonly List<string> _items;
public MyStackPanel(List<string> items) 
{
    _items = items;
    var behavior = new MyBehavior();
    behavior.SetBinding(MyBehavior.ShowDetailsCommandProperty, new Binding
    {
        Path = new PropertyPath("ShowDetailsCommand")
    });
    Interaction.GetBehaviors(this).Add(behavior);
}

public void FillInData() 
{
     foreach (string item in _items)
     {         
         var block = new Button();
         block.Click += ItemClick;
         this.Children.Add(block);
     }
} 
```

MyBehaviour（只是更改的部分）

```
...
private void OnLayoutUpdated(object sender, object o)
{
    var container = (Grid) AssociatedObject.Parent;
    if (container == null) return;
    var height = container.RowDefinitions[Grid.GetRow(AssociatedObject)].ActualHeight;

    // ... The same as above
}
.... 
```

我还没有实现 ShowDetailsCommand，所以我不能说 RelayCommand 是否按预期工作，但为什么不能；）还需要对 Windows 商店进行一些修改，例如使用 WinRtBehaviors 库，可以都可以通过谷歌搜索解决。

# asp.net - 添加查看旧帖子按钮或链接 ASP.NET 转发器控件

> ID：13241745
> 
> 赞同：1
> 
> 时间：2012-11-05T22:58:04.920
> 
> 标签：asp.net, repeater

如何将 ASP.NET 中继器控件设置为仅显示 10 个项目并添加链接或按钮，因此如果您按下它，它会再次显示 10 个项目，我并不是说删除其他 10 个我想保留并在下面添加另外 10 个他们。

PS我知道如何将其设置为仅读取10，但如何使其读取另一个10并在下方显示？

# android - 子类化 ViewPager 中断动画

> ID：13241746
> 
> 赞同：1
> 
> 时间：2012-11-05T22:58:10.907
> 
> 标签：android, android-viewpager, android-animation

在我的 Android 应用程序中，我有一个使用视图寻呼机显示 4 个以上页面（片段）的活动。我通过调用在每个屏幕上实现了在页面之间移动的按钮：

```
pager.setCurrentItem(position, true); 
```

视图寻呼机和片段都按我的意愿工作。然后我开始寻找一种解决方案来禁用用户在页面之间滑动，以便页面之间的转换仅由按钮处理。我发现的解决方案在一些 stackoverflow 文章以及[This Blog](http://blog.svpino.com/2011/08/disabling-pagingswiping-on-android.html)中提到，建议子类化视图寻呼机以拦截触摸事件以禁用滑动。我通过子类化视图寻呼机类来遵循这些示例，如下所示：

```
public class ViewPager extends android.support.v4.view.ViewPager {

    private boolean enabled;

    public ViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.enabled = true;
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (this.enabled) {
            return super.onTouchEvent(event);
        }

        return false;
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent event) {
        if (this.enabled) {
            return super.onInterceptTouchEvent(event);
        }

        return false;
    }

    public void setSwipingEnabled(boolean enabled) {
        this.enabled = enabled;
    }

} 
```

使用子类视图寻呼机并按需要`setSwipingEnabled(false)`进行调用。用户不能再通过滑动手势在页面之间移动，我仍然可以通过调用`setCurrentItem(int position, boolean smoothScroll)`. 但是，使用子类会破坏页面之间的动画。当我`setCurrentItem(position, true)`使用 android.support.v4.view.ViewPager 调用时，我会在页面之间获得非常干净的滚动动画。当我使用子类进行相同的调用时，屏幕有一个非常短暂的“闪光”，然后自动绘制新页面。

我想知道如何修复动画，同时保留禁用用户在页面之间滑动的能力。我非常感谢任何帮助。如果您需要任何其他信息，请告诉我。到目前为止，我已经使用运行 2.3.5 的三星设备和针对 Android 2.3.3 的 AVD 模拟器进行了测试。

**更新：**

我已经尝试了几件事，希望我能走运并找到解决方案。我查看了`android.support.v4.view.ViewPager`我正在扩展的源代码，发现实际滚动代码的“大部分”在`onTouchEvent(MotionEvent event)`方法中。我没有将其子类化，而是尝试使用普通视图寻呼机并调用以下内容来使用触摸事件：

```
pager.setOnTouchListener(new View.onTouchListener() {
    @Override
    public boolean onTouchEvent(MotionEvent event) {
        return true;
    }
}); 
```

这样做部分有效。它可以防止滑动触发滚动到下一个视图。然而，来自 android.support.v4.view.ViewPager 的方法在将触摸事件传递给该方法`onInterceptTouchEvent(MotionEvent event)`之前会进行小滚动作为拦截的一部分。`onTouchEvent()`如果不对 ViewPager 进行子类化，我看不到任何改变这种行为的方法。

# c# - 如何获得窗口标题？

> ID：13241747
> 
> 赞同：2
> 
> 时间：2012-11-05T22:58:23.187
> 
> 标签：c#, winapi

我想获得 spy++ 给出的窗口标题（以红色突出显示）

![在此处输入图像描述](../Images/3083fd144b0b289078083033ec0df27a.png)

我有代码来获取窗口标题。它通过通过调用检查窗口标题的回调枚举所有窗口来做到这一点`GetWindowText`。如果带有标题 = 的窗口`"window title | my application"`是打开的，那么我希望窗口标题包含在枚举中并被发现。

如果窗口计数不为 1，则该函数释放任何窗口句柄并返回 null。在返回 null 的情况下，这被视为失败。在我运行此代码 100 次的一个测试案例中，我的失败计数为 99。

```
public delegate bool EnumDelegate(IntPtr hWnd, int lParam);

        [DllImport("user32.dll")]
        [return: MarshalAs(UnmanagedType.Bool)]
        static extern bool IsWindowVisible(IntPtr hWnd);

        [DllImport("user32.dll", EntryPoint = "GetWindowText", ExactSpelling = false, CharSet = CharSet.Auto, SetLastError = true)]
        static extern int GetWindowText(IntPtr hWnd, StringBuilder lpWindowText, int nMaxCount);

        [DllImport("user32.dll", EntryPoint = "EnumDesktopWindows", ExactSpelling = false, CharSet = CharSet.Auto, SetLastError = true)]
        static extern bool EnumDesktopWindows(IntPtr hDesktop, EnumDelegate lpEnumCallbackFunction, IntPtr lParam);

        static List<NativeWindow> collection = new List<NativeWindow>();

public static NativeWindow GetAppNativeMainWindow()
        {            
            GetNativeWindowHelper.EnumDelegate filter = delegate(IntPtr hWnd, int lParam)
            {
                StringBuilder strbTitle = new StringBuilder(255);
                int nLength = GetNativeWindowHelper.GetWindowText(hWnd, strbTitle, strbTitle.Capacity + 1);
                string strTitle = strbTitle.ToString();

                if (!string.IsNullOrEmpty(strTitle))
                {
                    if (strTitle.ToLower().StartsWith("window title | my application"))
                    {
                        NativeWindow window = new NativeWindow();
                        window.AssignHandle(hWnd);
                        collection.Add(window);
                        return false;//stop enumerating
                    }
                }
                return true;//continue enumerating
            };

            GetNativeWindowHelper.EnumDesktopWindows(IntPtr.Zero, filter, IntPtr.Zero);
            if (collection.Count != 1)
            {
                //log error

                ReleaseWindow();
                return null;
            }                    
            else
                return collection[0];
        }

        public static void ReleaseWindow()
        {
            foreach (var item in collection)
            {
                item.ReleaseHandle();
            }
        } 
```

请注意，我已将 的所有值流式传输`"strTitle"`到一个文件中。然后对我的标题中的关键字进行了文本库搜索，但没有成功。为什么枚举在某些情况下找不到我正在寻找的窗口，而在其他情况下却找到了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T23:35:59.840

你是如何运行它 100 次的？......在一个紧密的循环中，重新启动应用程序等？

根据您的代码，如果您在循环中运行它而不清除集合，您将在找到的第一个条目之后的每个找到的条目上出错，因为错误条件`if (collection.Count != 1)`。

然后在每次`EnumDesktopWindows`调用时，您只需添加到集合中，然后返回给调用者。集合永远不会被清除或重置，因此在添加第二个项目后，失败条件为真。

# mysql - 无法将表类型更改为 MyISAM

> ID：13241748
> 
> 赞同：3
> 
> 时间：2012-11-05T22:58:35.260
> 
> 标签：mysql, phpmyadmin

我正在尝试将表的类型更改为 MyISAM，但它不允许我：

```
ALTER TABLE `mytable` ENGINE = MYISAM 
```

MySQL 说：

> 文档 1217 - 无法删除或更新父行：外键约束失败

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:01:24.253

MISAM 不支持外键

> 对于 InnoDB 以外的存储引擎，MySQL Server 解析 CREATE TABLE 语句中的 FOREIGN KEY 语法，但不使用或存储它。

因此，您必须删除所有外键才能使用 MISAM。例子：

```
ALTER TABLE mytable DROP FOREIGN KEY key_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:06:44.740

将您的 mysql 升级到 5.6.4 或更高版本。

随着 5.6.4 mysql innodb 具有全文支持。

[http://dev.mysql.com/doc/refman/5.6/en/news-5-6-4.html](http://dev.mysql.com/doc/refman/5.6/en/news-5-6-4.html)

InnoDB 笔记

> MySQL 现在支持 InnoDB 表的 FULLTEXT 索引。核心语法与早期版本的 FULLTEXT 功能非常相似，包括 CREATE TABLE 和 CREATE INDEX 语句，以及 SELECT 语句中的 MATCH() ... AGAINST() 子句。新的@ 运算符允许对文档中彼此接近的术语进行邻近搜索。详细的搜索处理由一组新的配置选项控制：innodb_ft_enable_stopword、innodb_ft_server_stopword_table、innodb_ft_user_stopword_table、innodb_ft_cache_size、innodb_ft_min_token_size 和 innodb_ft_max_token_size。您可以通过查询新的 INFORMATION_SCHEMA 表来监控 InnoDB 全文搜索系统的工作情况：innodb_ft_default_stopword、innodb_ft_index_table、innodb_ft_index_cache、innodb_ft_config、innodb_ft_deleted、

# html - 无法将 Div 添加到页面

> ID：13241751
> 
> 赞同：-1
> 
> 时间：2012-11-05T22:58:49.930
> 
> 标签：html, css

我正在尝试向我的网站添加另一个 div，但由于某种原因我不能这样做，我添加了 div 和 css，但它不影响结果。

这是一个jsfiddle：http: [//jsfiddle.net/N8yyz/embedded/result/](http://jsfiddle.net/N8yyz/embedded/result/)

html:

```
<div id="fourthsection1">

</div> 
```

CSS：

```
#fourthsection1{
    width:100%;
    height:500px;
    background-color: blue;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:12:44.640

尝试在 thirdsubsection1&2 之后添加一个 style="clear:both" 的 div！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:09:27.547

我已经能够通过添加到chrome 上`overflow:hidden`的容器元素来解决这个问题。`#thirdsection`

更好的解决方案是使用 clearfix。我会看看[这个](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best)问题的想法。

# ruby - ruby exec 使用我的 ~/.bashrc 中的函数

> ID：13241753
> 
> 赞同：3
> 
> 时间：2012-11-05T22:58:53.327
> 
> 标签：ruby, bash, exec

在我的`~/.bashrc`，我有一个功能：

```
function sayHi() {
    echo "hi, $@"
} 
```

在 Ruby 中，我想：

```
`sayHi "friend"` 
```

但是，`sayHi`在任何上下文 ruby​​ 运行`exec`或`system`.

我怎样才能让 Ruby 使用我的函数`.bashrc`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T23:07:54.927

您`.bashrc`仅针对交互式 shell 运行。在 Ruby 中使用反引号执行命令时，它不会在交互式 shell 中执行命令。

您可以通过运行强制交互式 shell `bash -i`。例如，要在交互式 shell 下运行命令，请使用：

```
`bash -ic 'sayHi "friend"'` 
```

# c# - 如何将列表框中的项目放入 Settings.Default C#

> ID：13241763
> 
> 赞同：0
> 
> 时间：2012-11-05T22:59:48.237
> 
> 标签：c#

我试图将项目保存在 Settings.Default 的列表框中，但它不起作用，这是我到目前为止所拥有的。

```
test.Properties.Settings.Default.list = listBox1.Items; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:06:52.713

如果您之后不调用，对属性的更改将不会持续`Save()`。

```
test.Properties.Settings.Default.list = listBox1.Items;
test.Properties.Settings.Default.Save(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T23:07:49.037

你试过`ArrayList`吗？

```
test.Properties.Settings.Default.list = new ArrayList(listBox1.Items);
test.Properties.Settings.Default.Save(); 
```

然后你可以像这样加载列表：

```
listBox1.Items.AddRange(test.Properties.Settings.Default.list.ToArray()); 
```

我还假设您列表中的项目是可序列化的（实现`ISerializable`或具有`SerializableAttribute`）。

# objective-c - Objective-C FontAwesome

> ID：13241764
> 
> 赞同：1
> 
> 时间：2012-11-05T23:00:05.880
> 
> 标签：objective-c, ios, font-awesome

我正在尝试在 iOS 应用程序上启动并运行 FontAwesome，并且可以使用一些帮助。我有以下适用于 iOS 的代码：

```
UIBarButtonItem * viewDeckButton = [[UIBarButtonItem alloc]
                                    initWithTitle:@"\uf0c9"
                                    style:UIBarButtonItemStyleBordered
                                    target:self.viewDeckController
                                    action:@selector(toggleLeftView)];

NSDictionary * customTextAttrs = [NSDictionary dictionaryWithObjectsAndKeys:
                                  [UIFont fontWithName:@"FontAwesome" size:14.0],
                                  UITextAttributeFont,
                                  nil];

[viewDeckButton setTitleTextAttributes:customTextAttrs forState:UIControlStateNormal]; 
```

`@"\uf0c9"`对应css类，icon-reorder。该字体似乎已安装在我的系统上（请参阅[http://cl.ly/image/2F1x1z2H0i2N](http://cl.ly/image/2F1x1z2H0i2N)）。我得到了标准的框字符，好像没有加载字体（参见[http://madmonkdev.com/badchar.png](http://madmonkdev.com/badchar.png)）。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T00:25:04.827

您需要将字体文件 (.ttf) 添加到应用程序的资源包中，并在 Info.plist 中注册字体。这些事情你做过吗？

在您的系统上安装字体是无关紧要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T23:02:24.473

我无法让 unicode char 正确。

我通过下载 Fontforge ( [http://fontforge.org/](http://fontforge.org/) ) 并在 base10 中找到字形来实现它。然后通过代码访问它

```
unicode aChar = 65451
NSString *iconChar = [NSString stringWithCharacters:&aChar length:1]; 
```

查看此项目以获取字体示例：[https ://github.com/AlexDenisov/FontasticIcons](https://github.com/AlexDenisov/FontasticIcons)

字体名称也可能与其文件名不同。因此，可能需要使用“FontAwesome”在代码中访问字体文件“font-awesome.ttf”

# java - 为什么会发生此 R 故障（Eclipse Android Java）？

> ID：13241769
> 
> 赞同：0
> 
> 时间：2012-11-05T23:00:44.740
> 
> 标签：java, android, eclipse, layout, r.java-file

这是[为什么我的布局无法解决？（Android / Java）](https://stackoverflow.com/questions/13224983/why-is-my-layout-unable-to-be-resolved-android-java)（阅读第一个答案的评论）因为我需要发布大量代码，而在评论中这样做是行不通的。

```
package scouting.form;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.EditText;

public class Scouting extends Activity {

    CheckBox sground,strough,shigh,dground,dtrough,dhigh;
    Button logout,clr;
    EditText TeamNum;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_scouting);
        TeamNum=(EditText) findViewById(R.id.TBTeamNum);
        sground=(CheckBox) findViewById(R.id.CBSGround);
        dground=(CheckBox) findViewById(R.id.CBDGround);
        strough=(CheckBox) findViewById(R.id.CBSTrough);
        dtrough=(CheckBox) findViewById(R.id.CBDTrough);
        shigh=(CheckBox) findViewById(R.id.CBSHigh);
        dhigh=(CheckBox) findViewById(R.id.CBDHigh);
        logout=(Button) findViewById(R.id.Logout);
        logout.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                finish();
            }
        });
        clr=(Button) findViewById(R.id.CLREntries);
        clr.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                sground.setActivated(false);
                strough.setActivated(false);
                shigh.setActivated(false);
                dground.setActivated(false);
                dtrough.setActivated(false);
                dhigh.setActivated(false);
            }
        });
    }
    @Override public void onBackPressed(){}
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_scouting, menu);
        return true;
    }
} 
```

带有“R.xxx.xxx”的每一行都表示“R 不能被解析为变量”。

我试着做一个清理，因为它几乎肯定是 eclipse 中的一个小故障，我尝试导入 android.R，保存和清理，然后取消导入 android.R（导入 android.R 破坏了所有处理它的东西，但我是故意这样做的)，保存和清洁，希望“刷新”它以消除故障。我也尝试重新启动 Eclipse。还是有这个bug。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:30:14.603

我修好了它！所以我在原始文件夹中有这个名为“Gangam Style.mp3”的文件（我不知道它是如何到达那里的）。我注意到一个错误，说这是一个无效的名称。我进入文件夹并删除了该文件，所有错误都消失了。我猜有一个糟糕的文件与 Eclipse 混在一起，无论出于何种原因，它都找不到 R。

对于收到 R 无法解决的错误的任何其他人，请确保您没有导入“android.R”，并确保您的任何文件夹中都没有任何名称无效的文件。

# java - Sencha，GXT 3，在网格中插入超链接

> ID：13241783
> 
> 赞同：4
> 
> 时间：2012-11-05T23:02:27.190
> 
> 标签：java, grid, extjs, gxt

我有一个内联可编辑网格。我需要修改一个列来显示一个超链接，点击它会触发一些 UI 动作。

谢谢。

到目前为止我的代码。链接列中的链接呈现为常规字符串。我知道这是因为下面的*toString()*返回，但这是我需要帮助的地方。不知道如何正确渲染它。

```
linkConf = new ColumnConfig<LinkData, String>(lp.url(), 200, "URL");
...
Anchor myLink = new Anchor();
myLink.addClickHandler(new ClickHandler() {

    @Override
    public void onClick(ClickEvent cEv) {
        someAction();       
    }

    private void someAction() {

    }

});

linkConf.setWidget(myLink, new SafeHtml() {
    @Override
    public String asString() {
        return toString();
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T16:11:25.000

在我的一个项目中，我必须这样做。我建议使用`CellClickHandler`而不是尝试点击锚点。

首先为您的点击操作创建更方便的处理程序：

```
public interface CellClickAction<P> {
  void onCellClick(P proxy);
} 
```

使用这个插件来保存网格中每个 ValueProvider 的映射：

```
public class GridCellClickPlugin<P> implements ComponentPlugin<Grid<P>> {

  private final Map<ValueProvider<P, ?>, CellClickAction<P>> mapping;

  public GridCellClickPlugin() {
    this.mapping = new HashMap<ValueProvider<P, ?>, CellClickAction<P>>();
  }

  @Override
  public void initPlugin(final Grid<P> component) {
    component.addCellClickHandler(new CellClickHandler() {

      @Override
      public void onCellClick(CellClickEvent event) {
        if (!mapping.isEmpty()) {
          final ColumnConfig<P, ?> columnConfig = component.getColumnModel().getColumn(event.getCellIndex());
          final CellClickAction<P> action = mapping.get(columnConfig.getValueProvider());
          if (action != null) {
            final P proxy = component.getStore().get(event.getRowIndex());
            action.onCellClick(proxy);
          }
        }
      }
    });
  }
} 
```

注册此列的点击处理程序并初始化插件：

```
final GridCellClickPlugin<LinkData> plugin = new GridCellClickPlugin<LinkData>();
plugin.getMapping().put(lp.url(), new CellClickAction<LinkData>() {

  @Override
  public void onCellClick(LinkData proxy) {
    //do the desired action here: redirect to some url, show pop-up window, etc
  }  
});
plugin.init(grid); 
```

将您的文本呈现为链接：

```
linkConf = new ColumnConfig<LinkData, String>(lp.url(), 200, "URL");
linkConf.setCell(new AbstractCell<LinkData>() {

  @Override
  public void render(com.google.gwt.cell.client.Cell.Context context, LinkData value, SafeHtmlBuilder sb) {
    final Anchor anchor = new Anchor(value.getSomeText());
    sb.appendHtmlConstant(anchor.getElement().toString());
  }
}); 
```

# php - 如何将信息插入数据库

> ID：13241786
> 
> 赞同：0
> 
> 时间：2012-11-05T23:02:57.503
> 
> 标签：php, mysql, database, insert

对不起，很长的帖子。我让 index.html 与 quiz1.php 一起工作，但我无法让问题和复选框正常工作，这意味着将 index.html 中的其他信息插入到数据库中。它应该插入来自 index.html 的信息和来自 quiz1.php 的信息。需要帮助才能使其正常工作。

这是我到目前为止所做的。

表单 (index.html) 第一页（获取人员信息）

```
<form action="quiz1.php" method="post">
    Full Name: <input type="text" name="full_name" />
    Quiz Name: <input type="text" name="quiz_name" />
    Class Name: <input type="text" name="class_name" />
    Date: <input type="text" name="quiz_taken" />
    <input type="submit" value="Submit" class="flashit">
</form> 
```

测验 (quiz1.php) 第二页（将 index.html 中的信息放在顶部）

```
<?php
// info from index.html
$_SESSION['full_name']  = $_POST['full_name'];
$_SESSION['quiz_name']  = $_POST['quiz_name'];
$_SESSION['class_name'] = $_POST['class_name'];
$_SESSION['quiz_taken'] = $_POST['quiz_taken'];

echo $_SESSION['full_name'];
echo "<br />";
echo $_SESSION['quiz_name'];
echo "<br />";
echo $_SESSION['class_name'];
echo "<br />";
echo $_SESSION['quiz_taken'];
echo "<br />";
echo "<br />";

?>

// quiz info

<?php

$db_host = "localhost"; 
// Place the username for the MySQL database here 
$db_username = "root";  
// Place the password for the MySQL database here 
$db_pass = "";  
// Place the name for the MySQL database here 
$db_name = "test"; 

// Run the actual connection here  
mysql_connect("$db_host","$db_username","$db_pass") or die ("could not connect to mysql");
mysql_select_db("$db_name") or die ("no database");

//retreive questions from database and put into question box
$query2 = "SELECT `id`, `question`, `aee`, `bee`, "
        . "`cee`, `dee`, `quizAnswer` FROM `quiz1question`";

$question2    = mysql_query($query2);
$answerFields = array(
                    'aee'=>'aee', 
                    'bee'=>'bee', 
                    'cee'=>'cee', 
                    'dee'=>'dee'
                );

while ($row = mysql_fetch_array($question2))
{

    $id         = $row['id'];
    $question   = $row['question'];

    echo '<form action="insert.php" method="post">';

    // Print Question
    printf('<div id="ContainerQuestion">');
    printf('<span class="Question">%s. %s</span>', $id, $question);

    // Print Answers
    foreach ($answerFields as $field=>$ans)
    {
        if (array_key_exists($field, $row) && $row[$field])
        {
            $checked = ($row["quizAnswer"] == $ans) ? 'checked' : '';
            printf(
                '<p><input type="checkbox" name="%s" %s value="%s">%s</p>', 
                $id, 
                $checked, 
                $ans, 
                $row[$field]
            );
        }
    }
}

 echo '<input type="submit" value="Submit Quiz"></form>';

?> 
```

results (insert.php) 第三页（将第一页和第二页的信息输入数据库）

```
<?php 

$localhost = "localhost";
$username  = "root";
$password  = "";
$database  = "test";
$table     = "quiz_results";

mysql_connect("$localhost","$username","$password") or die(mysql_error());
mysql_select_db("$database") or die(mysql_error());

// question & answers
$mysql1 = "INSERT INTO $table (question, aee, bee, cee, dee) "
        . "VALUES ('$_POST[question]','$_POST[aee]',"
        . "'$_POST[bee]','$_POST[cee]','$_POST[dee]')";

if(!mysql_query($mysql1)) 
{
    die(mysql_error());
}

// insert Name, quiz name, class name, and quiz taken 
$mysql = "INSERT INTO $table (full_name, quiz_name, class_name, quiz_taken) "
       . "VALUES ('$_POST[full_name]','$_POST[quiz_name]',"
       . "'$_POST[class_name]','$_POST[quiz_taken]')";

if(!mysql_query($mysql))
{
    die(mysql_error());
}

// echo
echo"Thank you!"; // mysql1
echo "<br />";
echo"Your Quiz has been Inserted"; // mysql

mysql_close();

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:27:52.007

在你的 quiz1.php 中试试这个。

实际上，您`</form>`在循环之外，而`<form...>`在循环内。这没有构建正确的 HTML，很可能是这不起作用的原因。

此外，您的第三个脚本期待数组中从未设置或发送的`question`元素。`$_POST`使用隐藏字段可以纠正这一点。

```
$answerFields = array(
                    'aee' => 'aee', 
                    'bee' => 'bee', 
                    'cee' => 'cee', 
                    'dee' => 'dee'
                );

echo "<form action='insert.php' method='post'>";

while ($row = mysql_fetch_array($question2))
{

    $id         = $row['id'];
    $question   = $row['question'];

    echo "<input type='hidden' name='question' value='{$question}' />"

    // Print Question
    printf('<div id="ContainerQuestion">');
    printf('<span class="Question">%s. %s</span>', $id, $question);

    // Print Answers
    foreach ($answerFields as $field=>$ans)
    {
        if (array_key_exists($field, $row) && $row[$field])
        {
            $checked = ($row["quizAnswer"] == $ans) ? 'checked' : '';
            printf(
                '<p><input type="checkbox" name="%s" %s value="%s">%s</p>', 
                $id, 
                $checked, 
                $ans, 
                $row[$field]
            );
        }
    }

}

echo '<input type="submit" value="Submit Quiz">';
echo '</form>'; 
```

最后**请**尝试更改您的代码以使用`PDO`或`mysqli`。mysql* 函数已被弃用，不应使用。这个网站上有很多教程和资源可以帮助你。

# google-plus - Google+ 的自定义 NSSharingService

> ID：13241789
> 
> 赞同：1
> 
> 时间：2012-11-05T23:03:08.370
> 
> 标签：google-plus, osx-mountain-lion, appkit

我需要将 Google+ 添加为 Mountain Lion 应用程序中的自定义 NSSharingService。

任何人都可以请我参考所需的参考资料（Google+ 以及如何编写自定义 NSSharingService）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:10:57.703

最重要的是，有关编写自定义 NSSharingService 的示例，请查看 Apple 的示例：http: [//developer.apple.com/library/Mac/#samplecode/SharingServices/](http://developer.apple.com/library/Mac/#samplecode/SharingServices/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:04:15.027

您可以在[https://developers.google.com/+/找到开始使用 Google+ 平台所需的所有信息](https://developers.google.com/+/)

# java - 超级（）难题

> ID：13241794
> 
> 赞同：1
> 
> 时间：2012-11-05T23:03:24.407
> 
> 标签：java, constructor, superclass, super

在完成一项学校作业时，我有一个抽象类 Person，一个扩展 Person 的抽象类 Student，以及一个扩展 Student 的普通类 CollegeStudent。CollegeStudent 从文件中读取并设置所有变量（包括那些属于抽象超类的变量）。这一切都很好。

但是，我们应该在抽象类中有构造函数，这使事情变得复杂，因为这些类特别不应该能够自己读取输入。所以现在我有一种情况，我（大概）应该使用构造函数来设置它们各自类中的数据字段，但我当然需要先读取输入！这里明显的问题是超构造函数调用必须是CollegeStudent的构造函数中的第一件事。这就是问题。

我可以让一切按原样运行，然后有另一个构造函数方法，它可以将所有需要的字段作为参数。但我不明白这有什么意义——为什么驱动程序创建 CollegeStudent 对象然后再次创建它（使用第一个对象中的变量）只是为了使用构造函数？

除此之外，我不知道如何做到这一点，而且这个选项对我来说很奇怪——我不明白重点是什么。

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T23:20:53.893

好的，让我详细说明我的评论。构造函数不应该读取文件来查找自己的参数。那不是它的工作。如果我理解正确，你的问题是你需要有

```
public CollegeStudent(File f) {
    // get a, b and c from the file, but how?
    super(a, b, c);
} 
```

但是 a、b 和 c 来自一个文件。由于 super 必须是构造函数的第一条指令，所以在调用 super 之前，您无法读取文件，因此您注定要失败。

您应该改用工厂方法：

```
public CollegeStudent(int a, int b, int c) {
    super(a, b, c);
}

public static CollegeStudent createFromFile(File f) throws IOException {
    int a;
    int b;
    int c;
    // TODO: read the file and initialize a, b and c
    return new Student(a, b, c);
} 
```

调用者从文件中构造一个 CollegeStudent，只需调用

```
CollegeStudent cs = CollegeStudent.createFromFile(file); 
```

这是一个典型的OO模式，经常使用。参见`Integer.valueOf()`，例如。

# jquery - $.cookie 无法移除 cookie

> ID：13241795
> 
> 赞同：1
> 
> 时间：2012-11-05T23:03:25.587
> 
> 标签：jquery, cookies

我正在使用 [https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie) 来管理我的 cookie。

当我调用时`$.removeCookie('the_cookie')`，它返回 true，但是当我调用时`$.cookie('the_cookie')`，值仍然存在。

任何人都知道可能出了什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:16:00.853

[看一下这个！](http://jquery-howto.blogspot.com/2010/09/jquery-cookies-getsetdelete-plugin.html)

基本上，该链接提供了一种通过将其时间设置为负时间来删除 cookie 的方法，因此当它过期时，cookie 就消失了。（在 Javascript 中），这是一种以 Jquery 风格进行的方法。

```
//setting the cookie
$.cookie({'myCookie':'myValue'});

// Get a cookie
$.cookie('myCookie');

// Delete a cookie
$.cookie('myCookie', null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:21:01.647

在使用不同浏览器和 jquery 版本时，我发现 jquery-cookie 插件在很多情况下都存在很大问题。从那以后，我决定只使用[这些 W3SCHOOLS cookie 功能](http://www.w3schools.com/js/js_cookies.asp)，这些功能似乎在浏览器中运行良好且始终如一。执行 setCookie(c_name,value,0) 以取消设置 cookie。

# android - Android 浏览器忽略移动设备上的缓存清单 (Galaxy S3)

> ID：13241796
> 
> 赞同：0
> 
> 时间：2012-11-05T23:03:25.857
> 
> 标签：android, browser-cache

我有一个使用缓存清单的 Web 应用程序。简而言之，当我修改缓存清单时，除 Android (Galaxy S3) 之外的所有浏览器都将获取新文件并更新缓存。它与 Iphone 和桌面 Chrome/Safari 浏览器一样工作。即使我将 Chrome 下载到 S3 上，它也可以正常工作。

似乎设备甚至正在缓存清单文件，因此它似乎没有改变。我不确定。

有没有人知道为什么会发生这种情况？还是一种程序化的方式来让它工作？

提前致谢！

这是代码（cache.appcache）。清单文件位于我项目的根目录中：

```
CACHE MANIFEST
# b749e3a4d167d44f1404d777732b5bjkjkf05207c59ab7ca
index.html
app.js

FALLBACK:

NETWORK:
* 
```

我的 index.html 'html' 标签如下所示：

```
<!DOCTYPE HTML>
<html manifest="cache.appcache" lang="en-US"> 
```

清单就是这样。在我的 JS 代码中，我只有一个事件，它在检测到新清单时侦听“updateready”事件。在所有浏览器中，当我更改清单的“版本”时会触发该事件，并获取新代码。在默认的 android 浏览器中，修改清单后它不会触发，我可以看到没有获取新代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:40:32.737

好吧，只是为了好玩，我将清单文件的名称从“cache.appCache”更改为“cache.manifest”，它起作用了！考虑到这不重要，这很奇怪。:0

# html - 在 Mobile Safari/iOS/iPad 中控制捏缩放并将其隔离为一个元素

> ID：13241798
> 
> 赞同：8
> 
> 时间：2012-11-05T23:03:32.963
> 
> 标签：html, ios, ipad, mobile, safari

是否有 Mobile Safari、HTML 或 CSS 标记或属性来限制触摸捏缩放和平移到页面上的一个元素？例如，我希望能够放大和缩小图像或 div 元素，但页面上的各种其他元素都保持原位和相同大小。这可能会通过限制平移和滚动视口元标记来工作，然后说我可以做到，但只能在特定元素上。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-07T18:38:58.907

我很确定你[会这样做](http://jsfiddle.net/R5NmF/)。
代码：
HTML：

```
<div class="zoom">You can zoom here!</div>
<div class="nozoom">No zooming here!</div> 
```

CSS：

```
.zoom{font-size: 36px; overflow: auto; height: 100px; width: 100px; border: 1px solid black}
.nozoom{font-size: 36px; overflow: hidden; height: 100; height: 100px; width: 100px; border: 1px solid black} 
```

# mod-rewrite - 当 url 包含单词 dvd-player - 保留字时，mod_rewrite 给出 404？

> ID：13241801
> 
> 赞同：1
> 
> 时间：2012-11-05T23:03:56.257
> 
> 标签：mod-rewrite, reserved-words

我正在改写 url-s（将子域映射到子目录），除了包含以下单词的 url：“mp3-player”或“dvd-player”外，它工作得很好。在这种情况下，我总是会收到 404 错误。单词是否包含在子域或路径中，无论它们是在开头，中间还是结尾都没有关系：

[http://blahblah-dvd-player-blahblah.example.com/blahblah/somefile.html](http://blahblah-dvd-player-blahblah.example.com/blahblah/somefile.html)

[http://blahblah.example.com/blahblah-mp3-player-blahblah/somefile.html](http://blahblah.example.com/blahblah-mp3-player-blahblah/somefile.html)

所有其他子域和路径都可以正常工作。未重写且包含这些单词的 URL 也很顺利。

这些可能是某种保留字吗？有人能帮帮我吗？我不知道如何调试这个。

问题解决了！这是由 xss 过滤器引起的。谢谢大家。

# internet-explorer - 投影在 ie8 中不起作用并破坏其他浏览器的样式

> ID：13241803
> 
> 赞同：1
> 
> 时间：2012-11-05T23:03:59.220
> 
> 标签：internet-explorer, css

我下面的 css 代码是在我的网站上的主框架周围创建一个投影，它在除 IE 之外的所有浏览器上都可以正常工作。我在网上找到了一个“解决方案”，应用了它，除了一个问题外它都有效。在菜单上，顶线断了（就在“Est.2009”之前，使菜单停止的顶线以及最后你可以看到一个新框被创建，因为它被切断了。它似乎也显示了一个阴影在 IE 上仅在右侧和底部，我怎样才能在左侧得到它？）提前谢谢！ [http://www.stevemoorecpa.dreamhosters.com](http://www.stevemoorecpa.dreamhosters.com)

```
 #wrapperSkm
{
border-left-style: solid;
border-right-style:solid;
border-width: 2px;
border-color: transparent;
-moz-box-shadow: 0px 0px 25px #c3c3c3;
-webkit-box-shadow: 0px 0px 25px #c3c3c3;
box-shadow: 0px 0px 25px #c3c3c3;
width:1069px;
overflow: hidden;
position: relative;
padding: 0 0px 0 0px;
margin-left: auto;
margin-right: auto;

  background-image: url(images/bodyBg.png);
    -ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135,             Color='#000000')";
    filter: progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135,     Color='#000000');
    box-shadow: 0px 10px 15px rgba(0, 0, 0, 0.7);
    -moz-box-shadow: 0px 10px 15px rgba(0, 0, 0, 0.7);
    -o-box-shadow: 0px 10px 15px rgba(0, 0, 0, 0.7);
    -webkit-box-shadow: 0px 10px 15px rgba(0, 0, 0, 0.7);   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:37:55.283

您可以使用 css3 PIE 在 IE 浏览器中处理框阴影。请浏览以下网站：[http ://css3pie.com/about/](http://css3pie.com/about/)

注意：一旦你在你的 css 类中为那个 div 应用了饼图，你需要为 IE 7 和 IE 8 添加 position:relative，如果你在 div 中绘制饼图，你需要添加 position:relative 到父 div 我的意思顶部分区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:29:11.067

> 就在“Est.2009”之前，使菜单停止的顶行以及最后您可以看到创建了一个新框，因为它被切断了。

这是一张图片，请尝试在其上设置边框，或者更好的是，您的`.skmLogo`班级。

对于低于 IE9 的 IE 浏览器，创建一个额外的 div 包装器来查看所有内容并对其应用模糊

```
filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius='15', MakeShadow='true', ShadowOpacity='0.40'); 
```

盒子阴影仅适用于 IE9+。

# c++ - std::function 的移动构造函数的异常规范是什么？

> ID：13241806
> 
> 赞同：7
> 
> 时间：2012-11-05T23:04:10.070
> 
> 标签：c++, c++11

我查看了[cppreference.com](http://en.cppreference.com/w/cpp/utility/functional/function/function)，他们似乎没有`noexcept`指明`std::function(std::function&&)`. 这对我来说似乎很奇怪。在这种情况下，标准是否真的不提供任何保证？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T23:10:49.737

引用标准（根据您的要求）：

> **C++11 §20.8.11.2.1/6**（来自 N3290）：
> `function(function&& f);`
> `template <class A> function(allocator_arg_t, const A& a, function&& f);`
> 效果：如果`!f`，`*this`没有目标；否则，将 的目标移动构造`f`成 的目标`*this`，使其`f`处于具有未指定值的有效状态。

所以，对不起，没有`noexcept`移动构造函数。

有一个相关的[缺陷报告 2062](http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-active.html#2062)仍然开放，但它朝另一个方向发展，可以这么说，即至少有一个`noexcept`显然不应该存在，无论其理由是什么……

其目的**可能**是支持具有抛出移动构造函数的可调用对象。但这只是合理化方向的猜测。例如，想象在此类函数对象的向量中重新分配缓冲区，尝试移动原始对象，其中一个在中间某个地方抛出（我认为这是 Abrahams 等人的原始示例） . 哎呀，他们不能保证被移回去，我们也不能前进。所以重新分配失败，导致重新分配的操作失败，*向量处于无效状态*. 可调用对象的非抛出移动的要求将支持函数对象的这种一般用法，包括优化的向量重新分配（等）。恕我直言，令人怀疑其意图是否真的是进行这种权衡。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-17T12:55:05.830

其他答案对我来说都没有真正意义。 `std::function` *确实*有一个`noexcept`默认构造函数和一个`noexcept` `swap`方法，所以实现者总是可以像这样定义移动构造函数：

```
function(function&& other) noexcept
  : function()
{
  swap(*this, other);
} 
```

鉴于上述情况，我不确定为什么委员会拒绝做出行动 constructor `noexcept`。在任何情况下，您都可以通过创建一个包装器来保存`std::function`并使用此技术移动它来解决此问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T23:08:37.993

我想该`function`对象能够存储任意的、用户定义的、可调用的对象。当您移动`function`对象时，包含的用户定义对象也会被移动，并且无法保证可以毫无例外地完成此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-22T13:09:54.887

正如其他人所说，移动`std::function`构造函数**不是** *C++*标准。`noexcept`

 *正如*Peter Ruderman*所说，实现者可以使用方法（这是标准）定义`noexcept`移动构造函数。`swap``noexcept`

*GCC*实现实际上使用了这种技术并将`std::function`移动构造函数定义为`noexcept`：

```
/**
 *  @brief %Function move constructor.
 *  @param __x A %function object rvalue with identical call signature.
 *
 *  The newly-created %function contains the target of @a __x
 *  (if it has one).
 */
function(function&& __x) noexcept : _Function_base()
{
  __x.swap(*this);
} 
```

所以如果你使用*GCC*，你可以假设`std::function`移动构造函数是`noexcept`. 但是*C++*标准库的其他实现可能有不同的移动构造函数实现。所以你不能依赖它。

最好有`std::function`默认构造（`noexcept`），然后使用`swap`方法：

```
 // the line below could throw
    // std::function<void()> my_function(std::move(the_function_to_move_from));

    // the code below is noexcept
    std::function<void()> my_function;
    my_function.swap(the_function_to_move_from); 
```

它不像使用移动构造函数那样优雅，但至少它是可移植的。

并提防移动语义！！！它可能会做一些您不期望的事情，因为它通常被指定为使从移动的对象处于有效但未**指定**的状态。例如：

```
#include <iostream>
#include <functional>

struct A
{
    void call()
    {
        if (fn) fn();
    }

    std::function<void()> fn;
};

int main()
{
    std::function<void()> hello = []() { std::cerr << "Hello world" << std::endl; };
    A a;
    hello = std::move(a.fn);
    a.call(); // may print "Hello world". Is it what you expect?

    return 0;
} 
```

*GCC*实现不打印" *Hello world"*，但其他实现可能会打印。正确的方法是显式清除从移动的对象：

```
hello = std::move(a.fn);
a.fn = nullptr; 
```

但这使得移动语义使用不便（IMO）。*

# php - PHPUnit存根方法返回NULL？

> ID：13241809
> 
> 赞同：8
> 
> 时间：2012-11-05T23:04:33.310
> 
> 标签：php, unit-testing, phpunit

我正在尝试使用[PHPUnit 的作者描述的这种方法](http://sebastian-bergmann.de/archives/882-Testing-Code-That-Uses-Singletons.html)来模拟单例，并存根它的一种方法：

```
public function setUp() {
    $this->_foo = $this->getMockBuilder('Foo')
        ->disableOriginalConstructor()
        ->getMock();

    $this->_foo->expects($this->any())
        ->method('bar')
        ->will($this->returnValue('bar'));

    var_dump($this->_foo->bar());
} 
```

问题是`NULL`每次都会转储。据我了解，当您模拟一个对象时，所有方法都被替换为返回的存根，`NULL`除非像我正在做的那样显式存根。那么，既然我已经对`bar()`方法进行了存根，为什么它不转储预期的`'bar'`字符串？我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-04T12:27:42.653

我遇到了同样的问题，对我来说，问题原来是我调用的方法在原始对象上不存在，并且正在由`__call`. 解决方案最终看起来像：

```
$this->_foo->expects($this->any())
    ->method('__call')
    ->with($this->equalTo('bar'))
    ->will($this->returnValue('bar')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:31:33.200

我希望这会有所帮助，这是我对您问题的完整复制。它打印出所需的“条”。我建议检查您是否正在运行最新版本的 phpunit 和我运行的 php：

PHPUnit 3.6.10 和 PHP 5.4.6-1ubuntu1。

```
$suite  = new PHPUnit_Framework_TestSuite("TestTest");

class Foo {

    function Bar()
    {
        return null;
    }
}

class TestTest extends PHPUnit_Framework_TestCase 
{
    private $test_max_prod;
    private $initial;

    public function setUp() {
        $this->_foo = $this->getMockBuilder('Foo')
            ->disableOriginalConstructor()
            ->getMock();

        $this->_foo->expects($this->any())
            ->method('bar')
            ->will($this->returnValue('bar'));

        var_dump($this->_foo->bar());
    }

    function tearDown() {

    }

    function testTest(){}

} 
```

输出

```
PHPUnit 3.6.10 by Sebastian Bergmann.

.string(3) "bar"

Time: 0 seconds, Memory: 2.50Mb

OK (1 test, 1 assertion) 
```

我希望这可以帮到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T01:28:50.410

这最终成为我的 PHPUnit 版本的问题。我更新到最新的稳定版本，并且无法复制该问题。

# javascript - Xui.js 父对象

> ID：13241812
> 
> 赞同：1
> 
> 时间：2012-11-05T23:04:45.427
> 
> 标签：javascript, xui

Xui.js 本身不支持`.parent()`，虽然它*可以*用来`x$(this)[0].parentNode`访问它，但是它返回它看起来的文字 DOM 对象。任何有 xui 经验的人告诉我如何将其转换为 xui 对象，以便我可以在其上使用函数（addClass/removeClass）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T10:24:36.570

您可以通过扩展 XUI，尝试：

```
var extendXUI = {
  parent : function () {
    return x$(this[0].parentNode);
  }
}
xui.extend(extendXUI); 
```

# algorithm - 范围树的更详细解释，可能使用 c++ 实现？

> ID：13241813
> 
> 赞同：4
> 
> 时间：2012-11-05T23:04:52.803
> 
> 标签：algorithm

我正在尝试为编程竞赛学习更多数据结构。我已经查看/实现了一个段树，但是 topcoder/其他论坛上的许多解决方案都引用了“范围树”。这些解决方案都没有深入了解他们正在做什么，或者“范围树”如何工作（特别是二维）。我发现的唯一相对有用的链接是（http://www.cise.ufl.edu/class/cot5520fa09/CG_RangeTrees.pdf），但它似乎非常广泛。

很多示例代码都很简洁，因为它是在竞赛环境中编码的，而且库代码也因为模板而难以阅读，等等？

谁能给一个二维范围树的简明解释？（例如，如何存储/表示它、功能等）。

根据我的阅读，我了解到它几乎可以存储有关范围的任何聚合特征，例如段树（？）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T21:30:22.320

我会[带你去 http://courses.csail.mit.edu/6.851/spring12/lectures/的第 3 讲](http://courses.csail.mit.edu/6.851/spring12/lectures/)

# macos - wordcount.scala 错误

> ID：13241814
> 
> 赞同：0
> 
> 时间：2012-11-05T23:05:04.743
> 
> 标签：macos, scala, scalding

我用 OSX Lion 在我的 Mac 上安装了 scalding。当我运行 word count.scala 程序来测试安装时，我收到以下错误消息：

```
scalac -classpath /var/folders/_j/_7d75_hj79133bcm7xrqzvz80000gn/T/maven/hadoop-core-0.20.2.jar:/var/folders/_j/_7d75_hj79133bcm7xrqzvz80000gn/T/maven/log4j-1.2.15.jar:/var/folders/_j/_7d75_hj79133bcm7xrqzvz80000gn/T/maven/commons-httpclient-3.1.jar:/var/folders/_j/_7d75_hj79133bcm7xrqzvz80000gn/T/maven/commons-cli-1.2.jar:/var/folders/_j/_7d75_hj79133bcm7xrqzvz80000gn/T/maven/zookeeper-3.3.4.jar:/Users/BessonPascal/Desktop/scalding/target/scalding-assembly-0.8.0.jar: -d /var/folders/_j/_7d75_hj79133bcm7xrqzvz80000gn/T/script-build /Users/BessonPascal/Desktop/wordCount.scala
error: scala.tools.nsc.MissingRequirementError: object scala not found.
    at scala.tools.nsc.symtab.Definitions$definitions$.getModuleOrClass(Definitions.scala:655)
    at scala.tools.nsc.symtab.Definitions$definitions$.getModule(Definitions.scala:605)
    at scala.tools.nsc.symtab.Definitions$definitions$.ScalaPackage(Definitions.scala:145)
    at scala.tools.nsc.symtab.Definitions$definitions$.ScalaPackageClass(Definitions.scala:146)
    at scala.tools.nsc.symtab.Definitions$definitions$.AnyClass(Definitions.scala:176)
    at scala.tools.nsc.symtab.Definitions$definitions$.init(Definitions.scala:814)
    at scala.tools.nsc.Global$Run.<init>(Global.scala:697)
    at scala.tools.nsc.Main$.process(Main.scala:105)
    at scala.tools.nsc.Main$.main(Main.scala:123)
    at scala.tools.nsc.Main.main(Main.scala)

error: fatal error: object scala not found. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T02:09:29.587

这是我在 OSX 上运行的 Scalding 中 WordCount 的其他几个版本。构建基于 Gradle（必须是 1.3 或更高版本）

[https://github.com/Cascading/Impatient/tree/master/part8](https://github.com/Cascading/Impatient/tree/master/part8)

该`build.gradle`脚本显示了如何从不同的 Maven 存储库中提取所需库的匹配版本。

到目前为止，我发现 Gradle 或 Maven 在这方面比 SBT 更稳定——至少如果您尝试在 Hadoop Standalone 的“--hdfs-local”中运行并生成“fat jars”以在远程 Hadoop 集群。

# javascript - 遍历JSON以获取孩子的名字

> ID：13241816
> 
> 赞同：0
> 
> 时间：2012-11-05T23:05:07.300
> 
> 标签：javascript, json

我想在版本 1 和版本 2 下获取孩子的名字。下面的孩子名字的例子是“客户”和“发票”。

我将如何使用 javascript 获取它？

我试过 Errors.Version1.[0] 获得名字，但这似乎不起作用。我不想使用 Errors.Version1.Customer 因为它可以改变。它可以是“客户”或“发票”。我只想得到它的名字。

谢谢！

**JSON 示例**

```
{
  "Errors": [
    {
      "Version1": {
        "Customer": {
          "BillAddr": {
            "Id": "Id1",
            "Line1": "Line11",
            "Line2": "Line21",
            "Line3": "Line31",
            "Line4": "Line41",
            "Line5": "Line51",
            "City": "City1",

          }
        }
      },
      "Version2": {
        "Invoice": {
          "BillAddr": {
            "Id": "Id1",
            "Line1": "Line11",
            "Line2": "Line21",
            "Line3": "Line31",
            "Line4": "Line41",
            "Line5": "Line51",
            "City": "City1",

          }
        }
      }
    }
  ]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T23:28:20.203

正确的符号是

```
Errors[0].Version1[0] // however still won't work 
```

因为您的 json 中有一个额外的数组包装器并且您混合了符号。
但是，对象属性不能通过它们的索引来访问，因为它们的顺序是不能保证的。因此，您要么需要将`Version1`and转换`Version2`为数组，要么必须按名称访问属性。

```
Errors[0].Version1["Customer"] //works for your current markup 
```

此外，使用点表示法`object.property` **或**括号表示法`object["property"]`- 你不能混合使用。

以下内容适用于您的 Notation `Errors.Version1[0]`：

```
{
  "Errors":
    {
      "Version1": [
        {
          "BillAddr": {
            "Id": "Id1",
            "Line1": "Line11",
            "Line2": "Line21",
            "Line3": "Line31",
            "Line4": "Line41",
            "Line5": "Line51",
            "City": "City1",

          }
        }
      ]
    }
} 
```

作为一个数组，可以保证订单是固定的，但是您会失去信息客户，因为数组没有键，只有索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T23:28:33.613

您不能将对象属性作为索引引用；换句话说，你不能这样做：

```
var foo = {a:1};
foo[0]; // Doesn't work 
```

您可以做的是使用与索引类似的语法来引用该属性：

```
var foo = {a:1};
foo[someBoolean ? 'Customer' : 'Invoice']; // Does work 
```

但是，如果您只想获取对象的任何属性，而不管它们的名称是什么？那么，你需要遍历它们：

```
var foo = {randomName:1};
for (var key in foo) {
    // key=="randomName"
    // foo[key]==foo["randomName"]==foo.randomName==1
    // do whatever you want with foo[key];
} 
```

但是，我建议使用库（Underscore 或 jQuery 都有自己的“每个”函数）而不是本机 JS，因为如果您使用任何添加自定义属性的库，它们可能会搞砸。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T00:42:52.103

如果它只能是一个或另一个，那么只需做一个简单的测试：

```
var type = ("Customer" in Errors[0].Version1) ? "Customer" : "Invoice",
    obj  = Errors[0].Version1[type]; 
```

如果它比这两个可能的结果更动态，那么您需要`for ... in`通过对象的键进行迭代。

也就是说，如果您对这种数据格式拥有 100% 的所有权，并且能够更改它，我是否建议您删除一个级别，并给错误一个`error_type`属性，而不是试图猜测它？

```
{
    Errors : [{
        Version1 : {
            ErrorType : "Customer",
            BillAddr : {
                Id    : "Id1",
                Line1 : "Line11",
                Line2 : "Line21",
                Line3 : "Line31",
                Line4 : "Line41",
                Line5 : "Line51",
                City  : "City1"
            }
        },

        Version2 : { /* ... */ }
    }]
} 
```

或者，您可以创建`VersionX`一个数组，而不是一个对象，为此，您可能有多个错误，作为对象保存（具有自己的错误类型属性），此时，弄清楚您正在处理什么，通过：

```
Errors[0].Version1[0].ErrorType; 
```

变得非常简单。

# ruby-on-rails - Ruby 加载错误无法加载此类文件

> ID：13241817
> 
> 赞同：0
> 
> 时间：2012-11-05T23:05:07.907
> 
> 标签：ruby-on-rails, ruby, require

用一些需要代码测试我的类源代码，我不断收到以下错误：

> “D:/ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in 'require': 无法从 D:/Ruby193/lib 加载此类文件 -- ./xxx.rb (LoadError) /ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in 'require' from xxx.rb:1:in ''

这是我用来测试我的代码的代码：

```
require "./proj6colecio.rb.txt"
print " "
guitar = Guitar.new("Stratocaster", "Fender", "Solid Body", 6, "Black")
print "Guitar Name: #{guitar.name}\n"
print "Guitar Brand: #{guitar.brand}\n"
print "Guitar Type: #{guitar.type}\n"
print "Number of Strings: #{guitar.strings}\n"
print "Guitar Color: #{guitar.color}\n"
print guitar, "\n" 
```

还没有真正接受过 ruby​​ on rails 错误的教育，因为我是一名仍在学习编程基础知识的学生。

非常感谢任何反馈

```
# Guitar class with instance variables @name, @brand, @type @strings @color and
# method take_strings.

class Guitar

  # initialize method is called when user invokes Guitar.new.
  def initialize(the_name, the_brand, the_type, the_strings, the_color)
    @name = the_name
    @brand = the_brand
    @type = the_type
    @strings = the_strings
    @color = the_color
  end

  # Define getters
  def name
    return @name
  end

  def brand
    return @brand
  end

  def type
    return @type
  end
  def strings
    return @strings
  end

  def color
    return @color
  end
# define setters

  def strings=(value)
    @strings = value
  end

  def to_s
    return "The Guitar is a #{name} made by #{brand}. It is a #{type} with #{strings} strings and is #{color}."
  end

  def change_color
    @color = "Blue"
  end

end

guitars = [ ]

guitars << Guitar.new("Stratocaster", "Fender", "Solid Body", 6, "Black")
guitars << Guitar.new("Les Paul", "Gibson", "Solid Body", 6, "Yellow")
guitars << Guitar.new("White Falcon", "Gretsch", "Semi-Hollow", 6, "White")

# Print all guitars
guitars.each do |g|
  print g, "\n"
end

#Change color of guitar to blue
guitars.each do |g|
  g.change_color
end

guitars.each do |g|
  print g, "\n"
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:55:09.790

该语法不起作用`require File.join( File.dirname( __FILE__ ), '..', 'proj6colecio.rb' )`，请改为尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T00:10:04.067

尝试`require_relative`：

```
require_relative "proj6colecio.rb.txt" 
```

此外，Ruby 脚本也不需要 .txt 文件扩展名。

# windows-phone-8 - 在 windows phone 8 中以编程方式设置系统日期和时间

> ID：13241821
> 
> 赞同：2
> 
> 时间：2012-11-05T23:05:17.390
> 
> 标签：windows-phone-8

我一直在查看新的 Windows Phone 运行时 API，但似乎找不到任何用于操作系统设置的 API……特别是系统日期和时间。新的 API 可以做到这一点吗？我知道它不在 WP 7.1 中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T23:15:57.163

> 并且似乎找不到任何用于操作系统设置的 API

当然没有这样的API。第三方应用程序完全没有理由修改系统设置。用户已经可以在操作系统设置中自行执行此操作。

# android - 如何在android的listview中识别URL？

> ID：13241823
> 
> 赞同：0
> 
> 时间：2012-11-05T23:05:25.823
> 
> 标签：android

我正在解析 JSON 并以数组列表的形式取回文本，这个数组列表用于在列表视图中显示文本。我能够获取文本，但是有什么方法可以识别文本中的 url 并使它们可点击，以便它们可以用来跟踪链接？谁能建议一种方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:17:32.860

只需调用`setOnItemClickListener`您的 ListView，然后覆盖`onItemClick`.

编辑 - 使用这样的东西：

```
listView.setClickable(true);
listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

  @Override
  public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {

     String url = listView.getItemAtPosition(position);

     //open url
     startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(url));
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T23:23:37.150

尝试为不同的字符串制作一个适配器和一个 textItem。使用类似 myTextView.setText(Html.fromHtml("

"+你的内容+"

")); 这应该使链接可点击。我希望这不只是用 webView 更改 textView 并进行更多研究并阅读如何将内容添加到 webview 并更改背景，因此看起来像 textView。我知道这是可能的，我已经做到了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T23:41:58.360

知道了，我在列表中添加了一个 textview，对于 textview，有一个名为 autolink 的属性，它可以识别链接，也可以使其可点击

# html - CSS：在浮动内垂直对齐 不工作

> ID：13241826
> 
> 赞同：1
> 
> 时间：2012-11-05T23:05:37.843
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T23:13:15.857

> “vertical-align: middle; 在这里不起作用有什么原因吗？”

是的，原因是“vertical-align”只会在父级是表格单元格（td 或 th）或者如果所述对象`display: table-cell`在 css 中设置为时，才会在其父级内垂直对齐。

Google 'vertical align with CSS' 可以找到各种示例、教程和解决方法。这是一个被广泛讨论的话题。

# python - 即时导入 Python 库的最佳方法是什么？

> ID：13241827
> 
> 赞同：1
> 
> 时间：2012-11-05T23:05:42.540
> 
> 标签：python, python-import

我有一个 Python 程序，它有几个缓慢的导入。我想延迟导入它们，直到需要它们。例如，如果用户只是想打印一条帮助消息，那么导入慢速模块是很愚蠢的。最Pythonic的方法是什么？

我将添加一个我正在使用的解决方案作为答案。不过，我知道你们都可以做得更好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T23:10:28.810

只需将它们导入需要的地方。一个模块被导入一次后，它会被缓存，这样任何后续的导入都会很快。如果你导入同一个模块 20 次，只有第一个会很慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:05:42.540

使用 'sys' 作为示例模块，下面的代码可以工作

```
class Importsys(object):
    def __setattr__(self, name, value):
        global sys
        import sys
        setattr(sys, name, value)
    def __getattribute__(self, name):
        global sys
        import sys
        return getattr(sys, name)
sys = Importsys() 
```

这将确保当我尝试使用 sys 模块时，它会自动导入，并替换 sys 模块变量。但是，我必须为我想要即时导入的每个模块创建单独的类。我想我可以使用 __import__('sys') 函数，但这似乎会产生递归问题。

# c# - 比较 Winform 按钮颜色

> ID：13241832
> 
> 赞同：3
> 
> 时间：2012-11-05T23:05:51.783
> 
> 标签：c#, .net, winforms, visual-studio-2010, button

我的表单中有四个按钮，其中四个三个按钮（btn2 btn3 btn4）颜色相同。

单击 btn1 时，它将检查 btn2 btn3 和 btn4 是否具有相同的颜色，而无需明确说明要比较的颜色。但我的情况似乎不对，我应该说这个

我正在使用的代码是：

```
private void btn1_Click(object sender, EventArgs e)
{
    if (btn2.BackColor.Equals((btn3.BackColor) && (btn4.BackColor)))
       {
         MessageBox.Show("ALL BUTTONS ARE OF SAME COLOR");
       } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T23:12:00.950

使用此代码比较颜色：

```
 if (btn2.BackColor == btn3.BackColor && btn3.BackColor == btn4.BackColor)
        {
            MessageBox.Show("ALL BUTTONS ARE THE SAME COLOR");
        }
        else
        {
            MessageBox.Show("ALL BUTTONS ARE NOT THE SAME COLOR");
        } 
```

# ruby-on-rails - 有什么技术可以更好地分解 Rails 关联吗？（给出具体例子）

> ID：13241834
> 
> 赞同：1
> 
> 时间：2012-11-05T23:05:57.283
> 
> 标签：ruby-on-rails, ruby, associations

谢谢参观！

在阅读了 Depot 书和 Rails 教程并同时工作之后，我正在构建我的第一个“我自己”的应用程序。我发现很难让我的联想得到解决，因为在我目前的实践项目中有很多联想。这是概述，它基本上是一个简单的 NFL pickem 应用程序：

“用户”登录（设计）并看到本周的“游戏”列表。（比如说 NFL 比赛）。
“用户”可以为那些提到第一个屏幕的游戏做出“选择”，并在一周内提交它们。
一个“游戏”有 2 个与之关联的团队。
一个“游戏”有一个“结果”（因为有一个结果模型或者只是在这里使用游戏表中的结果列而被撕裂）。一个“周”中有几个被挑选的“游戏”。

选秀后，他们也可以看到其他人的选秀权，但这在这里并不重要。

因此，正如您在上面看到的，我需要指定几个关系，而且我很难将它们全部解决。此外，我发现自己想为每个人制作脚手架（我知道对吗？）但我认为这不是正确的答案。

另外，一旦制定出来，是否有一个很好的顺序可以随身携带？就像在这种情况下，我认为从“团队”开始是个好主意，这样我就可以在每个星期中添加“周”和“游戏”。但我想我真的很迷茫和不知所措。关于如何开始解决这个问题的任何提示？非常感谢大家的帮助！

（如果您想查看代码，请告诉我，但我认为这更像是一个过程/基本问题，而不是“给我一个解决我的具体问题”的问题。再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:55:45.110

分解所有不同的对象然后问自己每个对象之间的关系通常很方便。您已经按照上面所说的完成了所有这些，因此只需将其转换为代码即可：

*   用户可以选择意味着用户`has_many`选择。
*   Picks are for games 意味着一个选择`belongs_to`一个游戏。
*   一场比赛有两支球队（比如说主场和客场），所以一场比赛`belongs_to`有两支不同的球队。
*   一周有几场比赛所以一周`has_many`比赛。

由于结果可以是关系或列，这意味着游戏`has_one`结果。

然后，您只需为其他模型反转这些关联。`has_one`一端的A意味着`belongs_to`另一端的 A。一端的 A`belongs_to`表示另一端的 a`has_many`或 a `has_one`。

关键是真正理解 3 个不同的关联 - `belongs_to`、`has_many`和`has_one`- 以及它们如何翻译成英语。

结果会是这样的：

```
class User < ActiveRecord::Base
  has_many :picks
end

class Pick < ActiveRecord::Base
  belongs_to :user
  belongs_to :game
end

class Game < ActiveRecord::Base
  has_many :picks
  belongs_to :home_team, :class_name => "Team"
  belongs_to :away_team, :class_name => "Team"
  belongs_to :week
  has_one :result
end

class Week < ActiveRecord::Base
  has_many :games
end

class Team < ActiveRecord::Base
  has_many :home_games, :class_name => "Game"
  has_many :away_games, :class_name => "Game"
end

class Result < ActiveRecord::Base
  belongs_to :game
end 
```

[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

# html - 出现在 kohana 表单输入周围的标签

> ID：13241837
> 
> 赞同：0
> 
> 时间：2012-11-05T23:06:17.650
> 
> 标签：html, tags, kohana

我正在 kohana 3.2 中开发一个表单，我注意到当表单输入呈现时，我在表单输入周围得到一个 html 列表标记。为了测试，为了清楚起见，我删除了所有 CSS。有问题的代码如下。

```
echo $form->open('user/login');
echo '<table>';
echo '<tr><td>'.$form->input('username').'</td>';
echo '<td>';
echo $form->input('password');
echo '</td></tr>';
echo '<tr><td>&nbsp;</td>';
echo '<td>';
echo $form->submit(NULL, __('Login'));
echo '</td></tr></table>';
echo $form->close(); 
```

当这呈现时，我看到输入周围的列表标签。在 Firebug 中，我看到以下内容

```
<form accept-charset="utf-8" method="post" action="/newsite/index.php/user/login">
<table>
<tbody>
<tr>
<td>
<li>
<input type="text" class="text" name="username">
</li>
</td>
<td>
<li>
<input type="text" class="text" name="password">
</li>
</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>
<input type="submit" class="submit" value="Login">
</td>
</tr>
</tbody>
</table>
</form> 
```

我阅读了 kohana API 文档并检查了许多与我自己的代码类似的示例，但我找不到这些不需要的列表标签的原因。

谁能解释他们来自哪里以及如何阻止他们出现？

亲切的问候

理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:00:06.460

No way.

Due to [Kohana 3.2 Form helper Docs](http://kohanaframework.org/3.2/guide/api/Form#input) it only returns `'<input'.HTML::attributes($attributes).' />'`.

Probably you have HTML tag mistype (not-closed tag, excess tag etc.) and browser tries to fix it adding new tags...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T08:53:28.900

请尝试以下代码

```
echo form::open('user/login');
echo '<table>';
echo '<tr><td>'.form::input('username').'</td>';
echo '<td>';
echo form::input('password');
echo '</td></tr>';
echo '<tr><td>&nbsp;</td>';
echo '<td>';
echo form::submit(NULL, __('Login'));
echo '</td></tr></table>';
echo form::close(); 
```

# django - Django：在伪造密钥关系上有所不同

> ID：13241838
> 
> 赞同：0
> 
> 时间：2012-11-05T23:06:18.050
> 
> 标签：django, distinct, django-queryset

我正在 django 开发票证/问题跟踪器，我需要在其中记录每张票的状态。这是我的模型的简化。

```
class Ticket(models.Model):
    assigned_to = ForeignKey(User)
    comment = models.TextField(_('comment'), blank=True)
    created = models.DateTimeField(_("created at"), auto_now_add=True)

class TicketStatus(models.Model):

    STATUS_CHOICES = (
        (10, _('Open'),),
        (20, _('Other'),),
        (30, _('Closed'),),
    )

    ticket = models.ForeignKey(Ticket, verbose_name=_('ticket'))
    user = models.ForeignKey(User, verbose_name=_('user'))
    status = models.IntegerField(_('status'), choices=STATUS_CHOICES)
    date = models.DateTimeField(_("created at"), auto_now_add=True) 
```

现在，获取工单的状态很容易按日期排序并像这样检索第一列。

```
ticket = Ticket.objects.get(pk=1)
ticket.ticketstatus_set.order_by('-date')[0].get_status_display() 
```

但是我也希望能够在管理员中过滤状态，而那些必须通过 Ticket-queryset 获得状态，这使得它突然变得更加复杂。如何获得具有特定状态的所有票证的查询集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:26:04.507

我猜你是想避免一个循环（询问每个票状态）来手动过滤查询集。据我所知，你无法避免那个循环。这里有一些想法：

```
# select_related avoids a lot of hits in the database when enter the cycle
t_status = TicketStatus.objects.select_related('Ticket').filter(status = ID_STATUS)
# this is an array with the result
ticket_array = [ts.ticket for ts in tickets_status] 
```

或者，由于您提到您正在寻找一个 QuerySet，这可能就是您正在寻找的

```
# select_related avoids a lot of hits in the database when enter the cycle
t_status = TicketStatus.objects.select_related('Ticket').filter(status = ID_STATUS)
# this is a QuerySet with the result
tickets = Tickets.objects.filter(pk__in = [ts.ticket.pk for ts in t_status]) 
```

但是，问题可能在于您对数据进行建模的方式。您所说的 TickedStatus 更像是 TicketStatusLog，因为您想跟踪更改状态的用户和日期。

因此，合理的方法是在每次创建新的 TicketStatus 时更新的 Ticket 模型中添加一个字段“current_status”。通过这种方式（1）您不必在每次要票时都订购一张桌子，并且（2）您只需为我认为您所要求的内容执行类似 Ticket.objects.filter(current_status = ID_STATUS) 之类的操作。

# ios - 如何制作更好看的 UISearchBar？

> ID：13241839
> 
> 赞同：0
> 
> 时间：2012-11-05T23:06:22.757
> 
> 标签：ios, uisearchbar

我喜欢委托模式以及 UISearchbar 的工作方式和行为方式，但我只是不喜欢它的外观。UI 定制的最短路径是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T23:14:26.903

您的意思是超出 UISearchBar 参考文档提到的内容？

来自 Apple 的文档：

> 自定义外观
> 
> 在 iOS v5.0 及更高版本中，您可以使用“自定义外观”中列出的方法自定义搜索栏的外观。您可以使用外观代理（[UISearchBar 外观]）自定义所有搜索栏的外观，也可以仅自定义单个栏的外观。

和：

> 自定义外观
> 
> 背景图片
> 
> – imageForSearchBarIcon：状态：
> 
> – setImage：forSearchBarIcon：状态：
> 
> – positionAdjustmentForSearchBarIcon:
> 
> – setPositionAdjustment:forSearchBarIcon:
> 
> 输入附件视图
> 
> 范围栏背景图像
> 
> – scopeBarButtonBackgroundImageForState：
> 
> – setScopeBarButtonBackgroundImage:forState:
> 
> – scopeBarButtonDividerImageForLeftSegmentState:rightSegmentState:
> 
> – setScopeBarButtonDividerImage:forLeftSegmentState:rightSegmentState:
> 
> – scopeBarButtonTitleTextAttributesForState：
> 
> – setScopeBarButtonTitleTextAttributes:forState:
> 
> – searchFieldBackgroundImageForState：
> 
> – setSearchFieldBackgroundImage:forState:
> 
> searchFieldBackgroundPositionAdjustment
> 
> 搜索文本位置调整

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:23:49.563

您可以以不同的方式制作您的搜索栏以使其更好。为此，您必须获取一个文本字段并根据需要获取搜索栏的图像，并将其设置在文本字段上并设置文本字段的属性。

# function - 在指定范围内旋转 glutIdleFunc

> ID：13241846
> 
> 赞同：0
> 
> 时间：2012-11-05T23:06:55.067
> 
> 标签：function, opengl, rotation

假设我有这个 glutIdleFunc 在 OpenGL 场景的背景中运行，其中包含一个小生物，它有多个“脉动”的径向排列的腿：

```
 void PulsateLegs(void)
 {
   lowerLegsRot = (lowerLegsRot + 1)%360;
   glutPostRedisplay();
 } 
```

...在显示功能中使用 lowerLegsRot 值的地方如下：

```
 glRotatef((GLfloat)lowerLegsRot, 1.0, 0.0, 0.0); 
```

不看小家伙到底长什么样子，很难想象，但很明显，这个功能让双腿反复旋转。我想将这种旋转限制在一定范围内（例如，-15 到 50 度），此外，让腿在该范围内来回移动，就像钟摆一样。

由于我要进行 65 度的扫描，因此我尝试将“%360”更改为“%65”作为第一步。但这使得腿走得太快了，如果我想使用模数，我不能使用较低的增量值，它只适用于整数。

是否有另一种方法来实现所需的第一步行为？更重要的是，我怎样才能让腿来回走动？使用多次调用的函数来概念化有点困难（与仅使用处理所有事情的循环结构相比，我在意识到这一点之前尝试过！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:22:37.143

> 如果我想使用仅适用于整数的模数，我不能使用较低的增量值。

无论如何，`%`操作员都坏了。您不应使用整数，而应使用浮点数，并使用 fmod (double) 或 fmodf (float) 函数。

# php - imagick 无法读取文件

> ID：13241848
> 
> 赞同：0
> 
> 时间：2012-11-05T23:06:55.283
> 
> 标签：php, jquery, imagemagick

我在一个文件中有以下 php 代码：

```
$figloc = $_GET['figrl'];

try
{
$image = new Imagick($figloc);
$image->setImageFormat("jpg");
$image->setImageColorSpace(5);  
$image->writeImage("temp.jpg");
}
catch(Exception $e)
{
 echo $e->getMessage();
} 
```

和一个像这样的jquery脚本：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
$(document).ready(function() {
    figurelocation='temp.jpg';
    var fightmlstring='<img src=\"'+figurelocation+'\">';
    $('.figuredisplay').append(fightmlstring);
}); 
```

figuredisplay 是一个 div 元素。$figloc 值是图像在磁盘上的绝对地址，如 '/home/abc/def/ghi/jkl.tiff'。从适当的链接打开 php 文件时，会显示错误消息“imagick 无法打开文件 /home/abc/def/ghi/jkl.tiff”。绝对地址会导致问题吗？

另外，当我将特定的 tiff 文件复制到我的目录时，为了查看绝对地址是否有问题，imagick 着迷地读取了该文件，但未能创建 temp.jpg

```
unable to open image `/var/www/temp.jpg @ error/blob.c/OpenBlob/2489 
```

谁能指出我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:16:36.810

好的，我发现了问题所在。这是一个非常愚蠢的。我正在写作，所以面临同样问题的其他人可能会受益。

代替

```
$image = new Imagick($figloc); 
```

写：

```
$abc= substr ( $figloc , 1, strlen($figloc)-2);
$image = new Imagick($figloc); 
```

因此， figloc 字符串中的单引号被删除。真的很傻:-)

# python - 为什么这可以通过命令行工作，而不是通过网络浏览器？

> ID：13241850
> 
> 赞同：1
> 
> 时间：2012-11-05T23:06:58.720
> 
> 标签：python, html, forms

为什么这可以通过命令行工作，而不是我通过网络浏览器？（python 中的两个文件只加载第二个）

```
import cgi
import cgitb; cgitb.enable()
import BaseHTTPServer
from SimpleHTTPServer import SimpleHTTPRequestHandler
# get the info from the html form
form = cgi.FieldStorage()
#set up the html stuff
reshtml = """Content-Type: text/html\n
<html>
 <head><title>login</title></head>
 <body>
 """

print reshtml 

User_Name = form.getvalue('User_Name')
password = form.getvalue('Pass_Word')
log="info:  "
if User_Name == 'NAME' and password == 'passcode':
    log=log+"login passed "
else:
    log=log+"login failed "
print log
print '</body>'
print '</html>' 
```

我使用传入参数“User_Name”和“Pass_Word”的文件调用它：

```
#!/Python27/python
print "Content-type: text/html"
print
print """
<html><head>
<title>log in</title>
</head><body>
"""
import sha, time, Cookie, os, fileinput, cgi, cgitb 
import sys
import BaseHTTPServer
from SimpleHTTPServer import SimpleHTTPRequestHandler
log = "info:  "
cookie = Cookie.SimpleCookie()
string_cookie = os.environ.get('HTTP_COOKIE')
string_cookie = str(string_cookie)
infoform = """
    <link rel="stylesheet" type="text/css" href="styles/home.css" media="screen" />
    <div id="top" style=" height:50px;width:100%;position:absolute;left:0px;top:0px;" >
    <form action="router.py" method="post" target="_self">
    <div id="form" style="position:absolute;left:15px;top:20px;" >
    <input type="text" name="User_Name" value="User Name">
    <input type="password" name="Pass_Word" value="Password">
    <input type="hidden" name="status_url">
    <input type="submit" value="Log in"> 
    </div>
    </form>
    <div ID"home"></div>
    </div>

    <div id="GBbody" style="position:absolute;left:1px;top:55px;height:100%;width:100%;" >
    <p id="disply">
    <center><h2>
    Hi, and welcome!
    </h2></center>
    <h4>    
    Did you know: just the movie player and code that goes with it takes<br>
    474 lines of code so-far, and may not work many web browsers (for the time being), however <br>
    Google chrome is fully compatible at  this point.
    </h4>
    </p>
    </div>
    """
loginas = """
<form action="home.py" method="post" target="_self">
<input type="submit" value="Continue last session" style="position:absolute;right:15px;top:20px;"> 
</form>
"""
if "sess" in string_cookie:
    infoform = infoform.replace('<div ID"home"></div>',loginas)
    print infoform
else:
    print infoform

print "</body></html>" 
```

但是，它打印出一个内部服务器错误页面，帮助？发布脚本我刚刚重新安装了 python 2.7.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-07T23:51:03.347

尝试使用 Flask，它不仅具有调试支持，而且还具有创建 Web 服务所需的所有工具，如果您不想使用 Flask 也是如此。查看您的服务器（Apache 或 nginx）日志

# php - 使用 [ ] 进行 JSON 编码

> ID：13241851
> 
> 赞同：0
> 
> 时间：2012-11-05T23:07:00.723
> 
> 标签：php, json

我似乎无法让我的 json_encode 包含括号。有什么帮助吗？

**我的代码是：**

```
$th = json_encode(array("4" => "four", "8" => "eight"));
echo $th; 
```

**输出是：**

```
{"4":"four","8":"eight","9":"\n"} 
```

**我需要发送到 api 的输出是：**

```
[{"4":"four","8":"eight","9":"\n"}] 
```

如何获取 JSON 数组中的括号？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T23:10:50.440

你应该这样做：

```
$th = json_encode(array(array("4" => "four", "8" => "eight"))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T03:13:16.880

用这个

```
$th = json_encode(array(array("4" => "four", "8" => "eight", "9" => "\n"))); 
```

# objective-c - 使用 MVC 设计格式化数据

> ID：13241852
> 
> 赞同：0
> 
> 时间：2012-11-05T23:07:10.233
> 
> 标签：objective-c, ios, model-view-controller, core-location

我有一个 TableViewController 和模型类`TripInfo`。当点击单元格附件视图时，我想将当前位置的地址返回到单元格的文本字段。我无法弄清楚如何干净地遵守 MVC 模式。

这是我到目前为止所拥有的：

1.TableViewController 实现：点击附件视图，`locationManager`开始更新 2.TableViewController 实现：`locationManager`调用didUpdateLocation 方法并将当前设置为模型对象属性`self.tripInfo.location`

现在我需要将此位置转换为物理地址。我打算将此代码放在一个模型类方法中，该方法将地址作为字符串返回，例如：

```
- (NSString *)createAddressStringFromLocation: (CLLocation *)location
{

    __block NSString *locationAddress = @"";

    CLGeocoder *gecoder = [[CLGeocoder alloc] init];
    [gecoder reverseGeocodeLocation:location completionHandler:^(NSArray *placemarks, NSError *error) {
        CLPlacemark *placemark = [placemarks lastObject];

        locationAddress = [NSString stringWithFormat:@"%@", ABCreateStringWithAddressDictionary(placemark.addressDictionary, NO)];
    }];

    return locationAddress;
} 
```

然后在 cellForRow 中：

```
cell.textField.text = [NSString stringWithFormat:@"%@", [self.tripInfo createAddressStringFromLocation:self.tripInfo.fromLocation]]; 
```

让 cellForRow 基本上等待这个方法在我的模型类中完成是不是这种糟糕的设计？

# wix - 在 32 位安装上以 64 位运行的自定义操作

> ID：13241856
> 
> 赞同：2
> 
> 时间：2012-11-05T23:07:28.533
> 
> 标签：wix

这个应用程序是一个更大的应用程序的插件。要完成我们的安装，我们需要运行主应用程序提供的批处理脚本。批处理脚本错误说某个注册表项不存在，但它存在于注册表的 WOW6432 部分中。自定义操作似乎以 64 位运行，试图在没有 WOW6432 的情况下获取注册表。我无法访问或控制批处理文件，因此无法更改它来检查注册表的两个部分。

如何确保自定义操作以 32 位运行？

运行批处理文件时，cmd 进程以 64 位模式运行。

**编辑**：为了检查它是否运行 64 和 32，我创建了一个单独的批处理脚本，用于检查在 HKLM/Software/SomeKey 中查找注册表项。该密钥实际上位于 HKLM/Software/Wow6432/SomeKey。使用 %windir%\SysWow64\cmd.exe 手动运行它（任务管理器将此进程标记为 *32）工作正常。使用常规 cmd.exe 运行它找不到注册表项。将此相同的批处理文件作为自定义操作放入 wix 会导致非 *32 cmd 打开并且 regkey 搜索失败。

我在 Wix 中设置了这个批次，如下所示：

```
<CustomAction Id="batchCA" Property="BATCHFILE" ExeCommand="" Execute="deferred" /> 
```

其中 BATCHFILE 是设置批处理文件路径的属性。即“C:\temp\batch.cmd”。它似乎运行良好，但我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:11:30.580

您应该明确指定命令行 exe 为 32 位。因此，不要像“yourScriptName.cmd”那样直接调用你的批处理，你应该使用这个：

```
%windir%\SysWoW64\cmd.exe /c yourScriptName.cmd 
```

# perl - Unix 如何读取带有两个连续斜杠的路径名？（例如 /home/user//mystuff）

> ID：13241857
> 
> 赞同：5
> 
> 时间：2012-11-05T23:07:34.733
> 
> 标签：perl, unix, scripting, filesystems

这就是我问这个问题的原因：我写了很多 bash 和 Perl 脚本，我发现自己不得不经常连接两条路径。这样的事情很典型：

```
my $prefix = "/home/user/";
my $suffix = "/mystuff";
...
chdir $prefix.$suffix; 
```

问题是我并不总是记得我是否在前缀的末尾放了一个斜杠，或者我是否在后缀的开头放了一个斜杠。所以我可能会不小心将两个斜杠连接在一起，就像上面的例子一样。

所以我的主要问题是两个连续的斜线是否会导致任何问题以及为什么。但是，程序员是否对此有约定？在其他人编写的代码中，目录名称是否总是以斜杠结尾？如果有一些我可以遵循的一致规则，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T23:12:24.817

Unix shell 和内核很乐意处理这个问题，以及诸如“/firstpart/./secondpart”之类的东西，但通常你不会将尾部斜杠作为变量值的一部分来使路径连接表达式看起来更好：*${firstpart}/ ${secondpart}*而不是*${firstpart}${secondpart}*。

在 Linux 上的脚本中，*[readlink](http://linux.die.net/man/1/readlink)*命令行工具可用于规范文件名。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T23:17:17.190

完全没问题。重复的斜杠被 Unix 系统视为一个，所以总是加一个。

```
my $prefix = "/home/user";  # Or "/home/user/"
my $suffix = "mystuff";
my $dir = "$prefix/$suffix"; 
```

但是，如果您出于某种原因想要一个规范化的路径（例如，它将显示给用户），您可以使用：

```
use Path::Class qw( dir );
my $prefix = dir("/home/user");  # Or "/home/user/"
my $dir = $prefix->subdir($suffix);
say $dir; 
```

无论您是从 开始`/home/user`，`/home/user/`还是从 开始`///home///user///`，您最终都会：

```
/home/user/mystuff 
```

# c++ - 条件断点修饰符以查看数组是否已更改

> ID：13241858
> 
> 赞同：2
> 
> 时间：2012-11-05T23:07:47.780
> 
> 标签：c++, debugging, breakpoints

我在 Visual Studio 2012 中使用变量更改断点修饰符。据我了解，如果指定的变量值从以前的位置执行发生更改，则变量更改修饰符会导致调试器中断。我认为这对于缩小内存覆盖范围很有用。我非常简单的 C++ 代码是这样的：

```
int main ()
{
    printf("This program converts upper case chars to lower and vice versa\n");

    char str[20]="lowercase";;

    int i;

    for (i=0; i < strlen(str); i++)
    {
        if (str[i]>=97 && str[i]<=122)
        {
            str[i]-=32;
        }
        else
        {
            str[i]+=32;
        }
    }

    str[1] = 'o';
    printf("%s\n",str);
    system("PAUSE");
} 
```

现在我在两行设置条件断点

*   `str[i]=str[i]-32`
*   `printf("%s\n", str)`

`str`在数组更改时命中。为此，我设置了一个位置断点，然后在右键单击时选择“条件”，并在条件文本框中输入 str,20。最后我选择“已更改”单选按钮。

现在我看到的是：

断点每次上线`str[i]-=32`，但从来没有上线`printf("%s\n", str)`，我很好奇为什么。显然数组因为语句前面的行而改变了`printf`，那为什么没有命中断点呢？

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:12:19.773

只有在写入而不是读取内存时，您才会中断。函数 printf 仅读取该内存。

# jsf - h:selectOneListbox + a4j:ajax 不调用 setter

> ID：13241860
> 
> 赞同：1
> 
> 时间：2012-11-05T23:07:48.813
> 
> 标签：jsf, richfaces, ajax4jsf

我面临一个奇怪的问题，我有一个带有 ah:selectOneListbox 的表单：

```
<h:selectOneListbox value="#{webHostingServicesActions.customPackage.storage}" size="1">
    <f:selectItem itemLabel="None" itemValue="#{null}" />
    <f:selectItems value="#{webHostingServicesActions.storagesChoices}" var="item" itemLabel="#{item.name}" />
    <f:converter converterId="productConverter" />
    <a4j:ajax event="valueChange" render="lblTotal" />
</h:selectOneListbox> 
```

*当我从f:selectItems*中选择一项时，设置器*webHostingServicesActions.customPackage.storage*不会被调用。但是当我从*f:selectItem*中选择项目时，setter 会被正确调用。

当然，我使用的是自定义转换器，但它已经过测试并且响应正确。

Every other ajax actions in the form seems blocked when an item from *f:selectItems* is selected. 服务器端没有错误，使用*a4j:log*调试也没有错误。

**编辑 1**：当我从*f:selectItems*中选择一个项目时，会执行应用请求值的服务器端代码，但它会在 setter 之前的某处阻塞。我无法追踪到足够远的地方来查看正在发生的事情。

**编辑 2**：我添加了 BalusC LifeCycleListener ...

当我从*f:selectItem中选择项目时*

```
START PHASE RESTORE_VIEW 1
END PHASE RESTORE_VIEW 1
START PHASE APPLY_REQUEST_VALUES 2
END PHASE APPLY_REQUEST_VALUES 2
START PHASE PROCESS_VALIDATIONS 3
END PHASE PROCESS_VALIDATIONS 3
START PHASE UPDATE_MODEL_VALUES 4
END PHASE UPDATE_MODEL_VALUES 4
START PHASE INVOKE_APPLICATION 5
END PHASE INVOKE_APPLICATION 5
START PHASE RENDER_RESPONSE 6
END PHASE RENDER_RESPONSE 6 
```

当我从*f:selectItems中选择一个项目时*

```
START PHASE RESTORE_VIEW 1
END PHASE RESTORE_VIEW 1
START PHASE APPLY_REQUEST_VALUES 2
END PHASE APPLY_REQUEST_VALUES 2
START PHASE PROCESS_VALIDATIONS 3
END PHASE PROCESS_VALIDATIONS 3
START PHASE RENDER_RESPONSE 6
END PHASE RENDER_RESPONSE 6 
```

我还测试了*更改*而不是*valueChange*，没有什么不同。

任何帮助表示感谢！

亚历山大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T06:37:27.240

现在我找到了解决方案，我对将转换器与 h:selectOneListbox 一起使用有一个误解。我在想转换器可用于从 f:selectItems 转换对象，反之亦然。

我改变了我的代码：

```
<h:selectOneListbox value="#{webHostingServicesActions.selectedStorage}" size="1">
    <f:selectItem itemLabel="Aucun" itemValue="#{null}" />
    <f:selectItems value="#{webHostingServicesActions.storagesChoices}" var="item" itemLabel="#{item.name}" itemValue="#{item.keyProduct}" />
    <f:converter converterId="integerConverter" />
    <a4j:ajax event="valueChange" render="lblTotal" />
</h:selectOneListbox> 
```

现在 setter *selectedStorage*将收到一个*Integer*而不是一个对象*Product*。一切正常。

感谢 kolossus 让我走上了正确的道路和这篇文章：[Object as itemValue in <f:selectItems>](https://stackoverflow.com/questions/4635302/object-as-itemvalue-in-fselectitems)

# java - VIM 问题使用 在映射中

> ID：13241864
> 
> 赞同：1
> 
> 时间：2012-11-05T23:08:18.627
> 
> 标签：java, vim, configuration, mapping

我正在尝试为`vim`使用添加一个漂亮的映射`command-t`。这个想法是我可以将光标放在类名上， hit `<leader>f`，并且该类的相关`.java`文件将立即在新缓冲区中打开（我已`hidden`设置为`on`）。

我的`.vimrc`包含

```
map <leader>f :CommandT<cr>=expand("<cword>")<tab><cr> 
```

效果很好，除了光标词没有扩展，我最终搜索的是`=expand("<cword>")`，而不是光标词本身。

我也简单地尝试过；

```
map <leader>f :CommandT<cr><cword><tab><cr> 
```

效果大致相同（`<cword>`粘贴并搜索）。好消息是，如果我手动执行；

```
map <leader>f :CommandT<cr>MyClassName<tab><cr> 
```

它工作得很好，所以至少这个理论是正确的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T03:20:21.190

您必须使用 feedkeys：

```
nnoremap \f :<C-u>execute'CommandT'<Bar>call feedkeys(expand('<cword>')."\t\<LT>CR>",'t')<CR> 
```

. 其他一些注意事项：`map`除非您确实需要重新映射（因此`nore`，我认为这里不需要）及其所有模式（正常、操作员挂起和可视）（因此领先`n`），否则不要使用。

`\t`inside 双引号字符串是`\<LT>Tab>`or的简写`<C-v><Tab>`（在映射内部，您必须使用其中一个来将文字`\<Tab>`插入字符串（第一个）或文字选项卡（第二个））。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T08:43:30.280

使用[ctags](http://ctags.sourceforge.net/)，这就是它的用途。

1.  安装 ctags。

2.  索引您的项目：

    ```
    :!ctags -R . 
    ```

3.  `tags`确保无论您在项目中的什么位置，Vim 都能找到正确的文件（项目的索​​引）：

    ```
    set tags=./tags,tags:$HOME 
    ```

4.  将光标放在方法或类名上，然后点击以下快捷方式跳转到定义：

    ```
    <C-]> 
    ```

    或者这个打开一个新窗口：

    ```
    <C-w>] 
    ```

    而这个要跳回去：

    ```
    <C-t> 
    ```

    或者这个在一个小的预览窗口中显示签名：

    ```
    <C-w>} 
    ```

查看`:help tags`更多。

# javascript - 将 XML 提要转换为 JSON 以保留 itunes:image 数据

> ID：13241865
> 
> 赞同：1
> 
> 时间：2012-11-05T23:08:22.190
> 
> 标签：javascript, google-api, winjs

我需要将播客提要 XML 转换为 JSON。今天我使用 Google API 将我的提要转换为 JSON，使用以下语句：

```
var jsonUrl = "http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&output=json&num=999&q="
              + encodeURIComponent(xmlUrl);

WinJS.xhr({ url: jsonUrl, responseType: document }).done( ... ) 
```

这行得通，但我也对这些提要大部分时间拥有的 <itunes:image ...> 数据感兴趣，但使用 Google API 时，它只会给我 Atom 和 RSS 元素，而忽略 itunes 的元素。

有什么方法可以修改我的 Google 调用，甚至在我的代码中使用一些 javascript，读取 XML 并自己转换它，以获得标准的 RSS Json 和 itunes 图像信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T02:45:46.727

是[`jQuery.parseXML()`](http://api.jquery.com/jQuery.parseXML/)你要找的吗？

# javascript - 更改当前 URL 的简单方法

> ID：13241866
> 
> 赞同：0
> 
> 时间：2012-11-05T23:08:34.490
> 
> 标签：javascript

我试图找到一种更简单的方法来更改当前 url 上的 2 个变量，而无需拆分 url 并重新构建它。

例如，如果我有一个 url ，并且`http://www.anysite.com/any/12/this/url/10/20`想将最后一个更改为变量，`10`例如，有没有比使用更简单的方法，那么必须重新构建整个 url？ `20``20``30``window.location.href.split("/")`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T23:18:14.317

使用正则表达式函数替换：

```
url.replace(/([0-9]*)\/([0-9]*)$/, function( str , n1 , n2 ){
  var new_n1 = 10 + parseInt( n1 , 10 );
  var new_n2 = 10 + parseInt( n2 , 10 );
  return new_n1 + '/' + new_n2;
}); 
```

这将具有格式的字符串的一部分替换为： [number]/[number] 并且位于字符串 'url' 的末尾（因为在模式的末尾有一个 $ ）格式的字符串：[数字+10]/[数字+10]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T23:11:14.567

如果这是您想要的，使用正则表达式将是避免分裂的最佳方法。

参见（例如）：

*   [https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)
*   [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)

至于替换 URL，这将是一个问题`location.replace(/* new URL here*/)`，实际上是在浏览器历史记录中替换 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T23:13:08.640

您可以使用正则表达式：

```
var url = "http://www.anysite.com/any/12/this/url/10/20";
var newURL = url.replace(/10\/20$/, "20/30"); 
```

此正则表达式在 URL 末尾查找“10/20”并将其替换为“20/30”。根据您想要进行替换的确切情况，您可能会稍微调整正则表达式以允许或禁止某些情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T23:10:46.140

你可以抓住它是一个字符串，然后按照你认为合适的方式修剪和附加。

您可以将其作为字符串抓取并使用搜索和替换。

您可以将其作为字符串抓取并对其运行 GREP。

但是，老实说，只做拆分/数组的事情可能是最简单的。

这完全取决于您必须遵守的格式规则。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T23:59:11.677

好的，这是您可以使用的功能。

```
function amendHref( a, b) {

    var str = window.location.href;

    var newHref = str.replace( /[\d]+\/[\d]+$/, a + "/" + b );
    //                          ^^^^^          digit one or more times
    //                               ^^        ( escaped ) forward slash
    //                                  ^^^^   digit one or more times
    //                                      ^  end of string

    window.location.href = newHref;
} 
```

[在这里](http://jsfiddle.net/TcSa5/)提琴

# ios - 无法识别应用程序委托

> ID：13241870
> 
> 赞同：0
> 
> 时间：2012-11-05T23:09:00.910
> 
> 标签：ios, xcode

我开始了一个项目并很好地编译了它。然后我删除（删除了引用） AppDelegate 类。然后我添加了另一个类 GuardianX3DAppDelegate，主要更改了：

```
int retVal = UIApplicationMain(argc, argv, nil, @"AppDelegate"); 
```

至：

```
int retVal = UIApplicationMain(argc, argv, nil, @"GuardianX3DAppDelegate"); 
```

然后我将文件添加到构建阶段编译区域。我正进入（状态：

```
Unable to instantiate the UIApplication delegate instance. No class named GuardianX3DAppDelegate. 
```

我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:12:50.200

仔细检查是否`GuardianX3DAppDelegate.m`正在编译，和/或在调用`UIApplicationMain`.

# solr - 有没有一种简单的方法可以将 SolrInputDocument xml 解析回骆驼上下文中的对象形式？

> ID：13241873
> 
> 赞同：0
> 
> 时间：2012-11-05T23:09:22.983
> 
> 标签：solr, xml-parsing, apache-camel, solrj

我使用 org.apache.solr.client.solrj.util.ClientUtils 将 SolrInputDocument 转换为 XML 字符串并发送到队列。现在我需要在消费者中操作该 xml，理想情况下我希望将 xml 转换回 SolrInputDocument，因此我可以使用其方法添加/删除几个字段。有没有简单的方法来实现这一目标？或者有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T22:57:55.187

您通常可以为此使用[xstream/marshall](http://camel.apache.org/xstream.html) API 之类的东西……也就是说，从 ClientUtils.toXML() 调用输出的 XML 不适用于这种方法。

根据[这篇文章](https://stackoverflow.com/questions/8839331/parse-solr-xml-files-to-solrinputdocument)...“最好以编程方式完成”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T00:10:13.083

另一种方法是解析您的 xml，然后将其转换为 java 类。您可以为此使用 SaxParser。请参阅此链接。

[使用 SaxParser 进行 XML 解析，代码完整](http://www.javacodegeeks.com/2012/01/xml-parsing-using-saxparser-with.html)

# c - C链表推送功能，只检查是否正确

> ID：13241875
> 
> 赞同：1
> 
> 时间：2012-11-05T23:09:30.217
> 
> 标签：c, list, pointers, linked-list, stack

所以我只是想知道这个将新值推送到链表堆栈顶部的推送函数是否正确

```
void push(node** hd, int v){
node temp;
temp = (node*)malloc(sizeof(node));
temp -> val = v;
temp -> next = *hd;
*hd = temp; 
```

}

提前致谢！

另外我想知道如何制作一个弹出函数，将最近推送的值从堆栈中弹出。

顺便说一句，结构代码看起来像这样......

```
typedef struct nodeStruct
{
int val;
struct nodeStruct* next;
}node;

typedef node* list; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T23:38:58.850

不要定义指针类型。他们令人困惑。定义一个普通类型并显式取消引用它。这是您在没有指针类型的情况下尝试做的事情。

```
#include <stdlib.h>
#include <stdio.h>

typedef struct nodeStruct
{
    int val;
    struct nodeStruct *next;
} node;

static void push(node **head, int v)
{
    node *temp = malloc(sizeof(node));
    temp->val = v;
    temp->next = *head;
    *head = temp;
}

int main(int argc, char **argv)
{
    (void) argv;
    (void) argc;
    node *list = NULL;

    for (int i=0; i<10; ++i) {
        push(&list, i);
    }
    for(node *l = list; l != NULL; l = l->next) {
        printf("%d ", l->val);
    }
    printf("\n");
    return 0;
} 
```

请注意，您应该检查`malloc`. 换句话说，`malloc`可以返回NULL，这应该被处理——留给你。

# java - 如何使用RelativeLayout在Listview中居中Textview？

> ID：13241876
> 
> 赞同：1
> 
> 时间：2012-11-05T23:09:49.297
> 
> 标签：java, android, android-relativelayout, arrays

```
ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(this,R.layout.activity_haltestellen, R.id.tvHaltestellen, HaltestellenListe);
lvH.setAdapter(arrayAdapter); 
```

这就是设置东西和.xml的方式：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ListView
    android:id="@+id/lvHaltestellen"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" >
</ListView>

<TextView
    android:id="@+id/tvHaltestellen"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"

    /> 
```

我从数据库中获取 StringArray。那么如何将电视置于列表视图中？真的很糟糕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:15:49.433

我不太确定你想做什么，但如果你想在`TextView`里面居中`RelativeLayout`然后删除

```
android:layout_alignParentBottom="true"
android:layout_alignParentRight="true" 
```

从电视并尝试添加类似的东西`android:layout_centarInParent="true"`，并在相对布局中更改`match_parent`为`wrap_contents`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:45:57.577

您可以将 锚定`TextView`到顶部和底部`ListView`（也可以选择左右，具体取决于所需的效果）。这将使`TextView`文本同样高（并且可以选择宽），因此使用中心重心将文本定位在中间。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ListView
        android:id="@+id/lvHaltestellen"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" />

    <TextView
        android:id="@+id/tvHaltestellen"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/lvHaltestellen"
        android:layout_alignBottom="@+id/lvHaltestellen"
        android:layout_alignLeft="@+id/lvHaltestellen"
        android:layout_alignRight="@+id/lvHaltestellen"
        android:gravity="center" />

</RelativeLayout> 
```

如果您打算为 添加背景颜色，则`TextView`需要将其包装在另一个透明容器（例如 a `FrameLayout`）中，以避免颜色遮挡列表中显示的内容。就像是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ListView
        android:id="@+id/lvHaltestellen"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" />

    <FrameLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/lvHaltestellen"
        android:layout_alignLeft="@+id/lvHaltestellen"
        android:layout_alignRight="@+id/lvHaltestellen"
        android:layout_alignTop="@+id/lvHaltestellen" >

        <TextView
            android:id="@+id/tvHaltestellen"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:background="@android:color/black" />
    </FrameLayout>

</RelativeLayout> 
```

或者，如果您决定`ListView`填充 的整个高度，`RelativeLayout`则不再需要将 锚定`TextView`到列表中。正如@user1796624 已经指出的那样，您可以将`TextView`.

根据您之前对其他人答案的评论：

> 文本视图显示在列表视图中。

我明白你在这里想说什么，但请注意，`TextView`它*并不*位于 内部`ListView`，而是漂浮在它之上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T23:29:41.867

尝试添加这个：`android:layout_centerInParent="true"`

```
<TextView
    android:id="@+id/tvHaltestellen"
    android:layout_centerInParent="true"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

# pymongo - 将pymongo光标转换为json

> ID：13241878
> 
> 赞同：30
> 
> 时间：2012-11-05T23:09:57.273
> 
> 标签：pymongo

*   我知道这是一个相当普遍的问题。我正在编写一个小型 Flask 应用程序，并试图将一些查询反馈给视图。我已经连接到我的本地 MongoDB 设置，并进行了成功的查询 - 但我无法用它生成 json 对象。

我见过的最常见的解决方案是从 pymongo 导入 json_util 即

```
import json
from pymongo import json_util

results = connection.get_collection('papayas_papaya')
results = results.find({
    'identifier': '1',
})
serialized_results = [json.dumps(result, default=json_util.default, separators=(',', ':')) for result in results] 
```

我已经使用 pip 将 pymongo 安装到了我的 Flask virtualenv 中：

```
pip install pymongo 
```

运行上述代码时，我不断收到以下错误：

```
ImportError: cannot import name json_util 
```

我可以在 pymongo-2.3-py2.6.egg-info/installed-files.txt ../bson/json_util.py 中看到这一行

任何人都有任何提示可以帮助我找出我做错了什么？

**更新**：对此进行了进一步讨论 - 我已经设法让这个工作：

```
import pymongo
from bson.json_util import dumps

connection = pymongo.Connection("localhost", 27017)
db = connection.mydocs

def get():
    cursor = db.foo.find({"name" : "bar"})
    return dumps(cursor) 
```

我遇到的问题之一是尝试独立安装 bson - pymongo 带来了 bson 并单独导入 bson 导致了问题。

感谢@Cagex 为我指明了正确的方向

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-06T01:53:51.740

看起来您想从 bson 而不是 pymongo 导入。我相信 json_util 最近已移至该模块。 [https://pymongo.readthedocs.io/en/stable/api/bson/json_util.html](https://pymongo.readthedocs.io/en/stable/api/bson/json_util.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-01-27T20:44:03.903

我看过很多关于这个问题的帖子，但他们没有为我解决这个问题。对我有用的是使用**dumps()**，然后使用 loading( **)**：

```
import pymongo
from bson.json_util import dumps
from bson.json_util import loads

connection = pymongo.Connection("localhost", 27017)
db = connection.mydocs

def get():
    cursor = db.foo.find({"name" : "bar"})
    return loads(dumps(cursor)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-17T06:20:58.080

您可以使用 list() 将 pymongo 光标转换为 json 对象。

```
import pymongo
from bson.json_util import dumps
from bson.json_util import loads

connection = pymongo.Connection("localhost", 27017)
db = connection.mydocs

def get():
   cursor = list(db.foo.find({"name" : "bar"}))
   return loads(dumps(cursor)) 
```

# jira - JQL 性能 - 自定义文本字段的自然排序

> ID：13241879
> 
> 赞同：1
> 
> 时间：2012-11-05T23:10:03.633
> 
> 标签：jira, jira-plugin, jql

我正在努力处理 JQL 查询。

我们有一个名为“Build Reported”的自定义字段，它是一个文本字段。它具有“4.7.323H”、“5.1.123L”、“3.1.456E”等值。

我需要编写一个简单的查询，它会给我在用户指定的版本之后报告的所有问题。

JQL 函数原型：searchIssues('Build Integrated', '>', '4.7.323B')

为此，我正在触发一个 JQL 查询，它为我提供所有问题的 Build Reported，然后我遍历每个问题并执行逐字符比较以确定当前问题的 Build Reported 版本是否大于用户指定的那个。这似乎需要很长时间才能执行，因为我必须从 jira 数据库中检索所有问题。

有没有更快的方法来实现这一目标？这是我到目前为止所拥有的：

```
// Get all the arguments
java.util.List args = operand.getArgs();
CustomField cf = customFieldManager.getCustomFieldObjectByName((String)args.get(0));
Long cfID = cf.getIdAsLong();
String operator = (String)args.get(1);
String userVersion = (String)args.get(2);
String jiraVersion = "";

java.util.List issues;
Iterator issuesIterator;
Issue issue;

issues = getAllIssues(user, interestedInVersion, cfID);
issuesIterator = issues.iterator();

// Iterate over all the issues
while(issuesIterator.hasNext())
{
    issue = (Issue)issuesIterator.next();

    // Get the Build reported value
    jiraVersion = (String)issue.getCustomFieldValue(cf);

    if(jiraVersion != null &&
       !jiraVersion.equals(""))
    {
        // Compare user-specified version to the one retrieved from database
        if(compareVersions(jiraVersion, userVersion, operator))
        {
            // Add the issue to the result set
            literals.add(new QueryLiteral(operand, issue.getId()));
        }
    }
}

// cfID is the ID for the custom field Build Reported
private java.util.List getAllIssues(User user, Long cfID) throws SearchException, ParseException
{
    JqlQueryBuilder builder = JqlQueryBuilder.newBuilder();
    builder.where().project("SDEV").and().customField(cfID).isNotEmpty();
    Query query = builder.buildQuery();
    SearchResults results = searchService.search(user, query, PagerFilter.getUnlimitedFilter());
    return results.getIssues();
} 
```

请注意，我没有任何其他过滤器可用于 JQL 查询构建器来帮助我减小结果集的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T21:20:23.890

我找到了我在问题中描述的问题的替代方案。我最终没有使用 JQL，而是直接触发了 SELECT，结果证明这要快得多。下面的函数是 JQL 插件的一部分。这是代码：

这就是我最终做的事情：

```
public java.util.List getValues(@NotNull QueryCreationContext queryCreationContext, @NotNull FunctionOperand operand, @NotNull TerminalClause terminalClause)
{
    try
    {
        // User
        User user = queryCreationContext.getUser();

        // Args
        java.util.List args = operand.getArgs();
        CustomField cf = customFieldManager.getCustomFieldObjectByName((String)args.get(0));
        Long cfID = cf.getIdAsLong();
        String operator = (String)args.get(1);
        String userVersion = (String)args.get(2);

        // Locals
        java.util.List literals = new java.util.LinkedList();
        MutableIssue issue = null;
        String issueId = "";
        String jiraVersion = "";

        // DB
        Connection conn = null;
        String url = "jdbc:jtds:sqlserver://*****:*****/jiradb";
        String driver = "net.sourceforge.jtds.jdbc.Driver";
        String userName = "*******";
        String password = "*******";
        String sqlQuery = null;
        Statement statement = null;
        ResultSet resultSet = null;

        Class.forName(driver).newInstance();
        conn = DriverManager.getConnection(url, userName, password);

        // Get all the issues that has the custom field set
        sqlQuery = " SELECT t2.id AS IssueId, t1.stringvalue AS JiraVersion " + "\n" +
                        " FROM   jiradb.jiraschema.customfieldvalue t1 " + "\n" +
                        " INNER JOIN jiradb.jiraschema.jiraissue t2 " + "\n" +
                        " ON     t1.issue = t2.id " + "\n" +
                        " WHERE  t1.customfield = " + Long.toString(cfID) + " " + "\n" +
                        " AND    t1.stringvalue IS NOT NULL " + "\n" +
                        " AND    t1.stringvalue != '' " + "\n" +
                        " AND    t2.pkey LIKE 'SDEV-%' ";

        // Iterate over the result set
        statement = conn.createStatement();
        resultSet = statement.executeQuery(sqlQuery);
        while (resultSet.next()) 
        {  
            issueId = resultSet.getString("IssueId");  
            jiraVersion = resultSet.getString("JiraVersion");

            // Compare the version from jira with the user provided version
            // This is my own function that does char-by-char comparison
            if(compareVersions(jiraVersion, userVersion, operator))
            {
                // Get the issue object to add to the result
                issue = ComponentManager.getInstance().getIssueManager().getIssueObject(Long.parseLong(issueId));

                // Add the issue to the result
                literals.add(new QueryLiteral(operand, issue.getId()));
            }
        }

        // Return all the matching issues here
        return literals;
    }
    catch(Exception e)
    {
        // Exception handling
    }

    return null;
} 
```

这就是插件的使用方式：

```
issue in searchIssues('Build Reported', '>', '5.1.104'); 
```

# c# - Rally API：将用户添加到项目

> ID：13241881
> 
> 赞同：2
> 
> 时间：2012-11-05T23:10:19.190
> 
> 标签：c#, rally

我是 Rally 世界的新手，正在努力研究如何使用 RallyRestAPI。有许多示例说明如何查询 Rally 以获取我认为最有帮助的相关信息。我要做的是创建一个 C# 命令行工具来将用户添加到项目中。看来我使用 RallyRestAPI.Create("projectpermission",some dynamic json object) 接口来完成创建。我的问题是理解“一些动态 json 对象”部分。我不确定如何正确设置它。如果有人有一个如何设置它的小例子，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T16:49:40.720

这是说明如何执行此操作的代码示例。注意：

*   运行代码以创建权限的用户 ID 必须是工作区或订阅管理员
*   用户必须已经拥有 Workspace 中的权限（即成为 Workspace 用户）才能成功创建 ProjectPermission

    命名空间 RestExample_AddUsersToProject { 类程序 { 静态无效 Main(string[] args) {

    ```
     String userName = "user@company.com";
            String userPassword = "topsecret";
            String serverUrl = "https://rally1.rallydev.com";
            String wsapiVersion = "1.38";

            RallyRestApi restApi = new RallyRestApi(
                userName,
                userPassword,
                serverUrl,
                wsapiVersion
            );

            restApi.Headers[RallyRestApi.HeaderType.Vendor] = "Rally Software";
            restApi.Headers[RallyRestApi.HeaderType.Name] = "RestExample_AddUsersToProject";

            // Query for Project for which we want to add permissions
            Request projectRequest = new Request("project");
            projectRequest.Fetch = new List<string>()
            {
                "Name",
                "Owner",
                "State",
                "Description"
            };
            String projectName = "Avalanche Hazard Mapping";

            projectRequest.Query = new Query("Name", Query.Operator.Equals, projectName);
            QueryResult queryProjectResults = restApi.Query(projectRequest);
            var myProject = queryProjectResults.Results.First();
            String myProjectReference = myProject["_ref"];

            Console.WriteLine("Project Name: " + myProject["Name"]);
            Console.WriteLine("State: " + myProject["State"]);

            // Query for User for whom we wish to add ProjectPermission
            Request userRequest = new Request("user");
            userRequest.Fetch = new List<string>()
                {
                    "UserName",
                    "Subscription",
                    "DisplayName"
                };

            // User needing the permissions
            userRequest.Query = new Query("UserName", Query.Operator.Equals, "\"boromir@midearth.com\"");
            QueryResult queryUserResults = restApi.Query(userRequest);

            var myUser = queryUserResults.Results.First();
            String myUserReference = myUser["_ref"];

            Console.WriteLine("Username: " + myUser["UserName"]);
            Console.WriteLine("Display Name: " + myUser["DisplayName"]);
            Console.WriteLine("Subscription: " + myUser["Subscription"]);

            // Setup required ProjectPermission data
            DynamicJsonObject newProjectPermission = new DynamicJsonObject();

            newProjectPermission["User"] = myUser;
            newProjectPermission["Project"] = myProject;
            newProjectPermission["Role"] = "Editor";

            // Create the permission in Rally
            CreateResult addProjectPermissionResult = restApi.Create("ProjectPermission", newProjectPermission);

            DynamicJsonObject fetchedProjectPermission = restApi.GetByReference(addProjectPermissionResult.Reference, "Name");
            Console.WriteLine("Created ProjectPermission with Role: " + fetchedProjectPermission["Name"]);            
        }
    } 
    ```

    }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:10:02.150

这里有一些非常基本的 CRUD + 查询示例：http:
[//developer.rallydev.com/help/rest-api-net](http://developer.rallydev.com/help/rest-api-net)

一般流程总是创建一个新的 DynamicJsonObject，设置适当的字段，然后将该对象传递给 RallyRestApi 的 Create 方法。

# javascript - jQuery Ajax 请求 200 但状态错误

> ID：13241882
> 
> 赞同：0
> 
> 时间：2012-11-05T23:10:22.903
> 
> 标签：javascript, ajax, jquery, coffeescript

我正在测试一个 Ajax 表单，我得到了我没有预料到的行为。请求返回http 200 OK，但是xhr状态为0，错误。我正在针对[requestb.in](http://requestb.in)对此进行测试。

这是我的功能（在咖啡脚本中）：

```
$.ajax
  type: 'POST'
  url: 'http://requestb.in/1fcyas71'
  dataType: 'json'
  data: { foo: "bar" }
  error: (xhr, status, error) ->
    $('div#response').text(error).addClass('error')
    console.log status
    console.log xhr
  success: (data, status, xhr) ->
    $('div#response').text(data).removeClass('error')
    console.log status
    console.log xhr 
```

我的理解是 requestb.in 接受任何请求，那么为什么这会作为错误返回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T23:13:05.737

你不能做跨域请求。可能这就是问题所在，因为不认为您是[http://requestb.in](http://requestb.in)的员工？

# c# - 如何在 C# 中等待线程完成执行？

> ID：13241888
> 
> 赞同：2
> 
> 时间：2012-11-05T23:10:52.753
> 
> 标签：c#, multithreading, concurrency, waithandle

我有一个快速连续调用的函数，它有一个开放的数据库连接。我的问题是，在关闭一个数据库连接之前，调用该函数的另一个实例，我可能会在数据库中收到死锁。

我努力了：

```
private static WaitHandle[] waitHandles = new WaitHandle[]
    {
        new AutoResetEvent(false)
    };

protected override void Broadcast(Data data, string updatedBy)
    {
        Action newAction = new Action(() =>
        {
        DataManagerFactory.PerformWithDataManager( 
            dataManager =>
            {
                // Update status and broadcast the changes
                data.UpdateModifiedColumns(dataManager, updatedBy);

                BroadcastManager.Instance().PerformBroadcast(
                    data,
                    BroadcastAction.Update,
                    Feature.None);
            },
            e => m_log.Error(ServerLog.ConfigIdlingRequestHandler_UpdateFailed() + e.Message));
            }
        );

        Thread workerThread = new Thread(new ThreadStart(newAction));
        ThreadPool.QueueUserWorkItem(workerThread.Start, waitHandles[0]);
        WaitHandle.WaitAll(waitHandles);
    } 
```

但我收到一个线程错误，程序冻结。我相信它与没有参数的线程启动函数有关。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:27:02.747

这就是它的完成方式。创建完成这项工作的类：

```
public class MyAsyncClass
{

    public delegate void NotifyComplete(string message);
    public event NotifyComplete NotifyCompleteEvent;

    //Starts async thread...
    public void Start()
    {
        System.Threading.Thread t = new System.Threading.Thread(new System.Threading.ThreadStart(DoSomeJob));
        t.Start();
    }

    void DoSomeJob()
    {
        //just wait 5 sec for nothing special...
        System.Threading.Thread.Sleep(5000);
        if (NotifyCompleteEvent != null)
        {
            NotifyCompleteEvent("My job is completed!");
        }
    }
} 
```

现在这是来自另一个类的代码，它调用第一个类：

```
 MyAsyncClass myClass = null;

    private void button2_Click(object sender, EventArgs e)
    {
        myClass = new MyAsyncClass();
        myClass.NotifyCompleteEvent += new MyAsyncClass.NotifyComplete(myClass_NotifyCompleteEvent);
        //here I start the job inside working class...
        myClass.Start();
    }

    //here my class is notified from working class when job is completed...
    delegate void myClassDelegate(string message);
    void myClass_NotifyCompleteEvent(string message)
    {
        if (this.InvokeRequired)
        {
            Delegate d = new myClassDelegate(myClass_NotifyCompleteEvent);
            this.Invoke(d, new object[] { message });
        }
        else
        {
            MessageBox.Show(message);
        }
    } 
```

如果我需要解释一些细节，请告诉我。

对此的替代方案是[BackgroudWorker](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)：

# django - 获取请求（和上下文）中传递的项目的长度（django-breadcrumbs）

> ID：13241891
> 
> 赞同：-1
> 
> 时间：2012-11-05T23:11:08.067
> 
> 标签：django, django-templates

我在这里使用这个 django 插件：[https ://github.com/chronossc/django-breadcrumbs](https://github.com/chronossc/django-breadcrumbs)

但是，如果实际上有一系列面包屑，我似乎无法检查模板……我试过了：

```
{%if request.breadcrumbs%} {% if request.breadcrumbs|length > 0%} 
```

等等……但没有什么能真正告诉我是否有一些。

如果我通过面包屑，我希望这个栏出现，而不是在我没有通过一些面包屑的情况下出现：

```
{% if request.breadcrumbs|length > 0 %}
<div class="navbar navbar-fixed-top" style="top:38px;z-index:1029;" id="breadcrumb-sticky-header">
    <div class="container">
        <div class="container-fluid">
            <div class="row-fluid">
                <ul id="breadcrumb-sticky-header-inner" class="breadcrumb">
                    {% for breadcrumb in request.breadcrumbs %}
                    {% if not forloop.last %}
                    <li><a href="{{ breadcrumb.url }}">{{ breadcrumb.name }}</a> <span class="divider">/</span></li> 
                    {% else %}
                    <li class="active">{{ breadcrumb.name }}</li> 
                    {% endif %}
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
</div>
{% endif %} 
```

这是我认为的代码：

```
@login_required
def view(request, t_id):
    try:
        tshoot = Troubleshoot.objects.select_related('category', 'equipment', 'equipment__model').get(pk=t_id)
        request.breadcrumbs([
            (("%s: %s" % (tshoot.equipment.model.name, tshoot.equipment.serial)),
                '/equipment/view/%s/' % (tshoot.equipment.id)),
            (("%s" % (tshoot.category.name)),
                '/troubleshoot/categories/view/%s/' % (tshoot.category.id)),
            ((tshoot.title), '')
        ]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:26:02.343

基于 django-breadcrumbs 项目中的代码（breadcrumbs.py 中的第 191 行： [https](https://github.com/chronossc/django-breadcrumbs/blob/master/breadcrumbs/breadcrumbs.py#L191) ://github.com/chronossc/django-breadcrumbs/blob/master/breadcrumbs/breadcrumbs.py#L191 ），看起来他们'已经实现了一个`.all()`方法。

您应该能够对方法`|length`的结果使用模板过滤器`.all()`来获得所需的结果，如下所示：

```
{% if request.breadcrumbs and request.breadcrumbs.all|length > 0 %} 
```

我没有测试过这个；这就是我的快速代码检查所揭示的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T18:25:12.140

不确定是什么`request.breadcrumbs|length > 0`，但我会使用示例模板：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN""
"http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">

        <title>Breadcrumbs test page | {% for b in request.breadcrumbs %}{{ b.name }}{% if not forloop.last %} > {% endif %}{% endfor %}</title>

    </head>
    <body>
        {{ request.breadcrumbs }}
        <p>Breadcrumb: {% for b in request.breadcrumbs %}<a href="{{ b.url }}">{{ b.name }}</a>{% if not forloop.last %} / {% endif %}{% endfor %}</p>
        <p>Links: <a href='/'>Home</a> | <a href='/someview/'>Breadcrumb in view</a> | <a href='/flat01/'>Flatpages</a>
        <p>Content: <br>
        {% if text %}{{ text }}{% endif %}
        {% if flatpage %}{{ flatpage.content }}{% endif %}
    </body>
</html> 
```

并查看直到您对它的工作方式感到满意：

```
# Create your views here.

from django.shortcuts import render_to_response
from django.template.context import RequestContext

def home(request):
    print request.breadcrumbs
    return render_to_response('home.html',
        {'text': 'Hello, this is home!'},
        context_instance=RequestContext(request))

def someview(request):
    request.breadcrumbs('just a view to show some url', request.path)

    return render_to_response('home.html',
        {'text': 'Hello, this is some second view'},
        context_instance=RequestContext(request)) 
```

（来自：[https](https://github.com/chronossc/django-breadcrumbs/blob/master/breadcrumbs_sample) ://github.com/chronossc/django-breadcrumbs/blob/master/breadcrumbs_sample ）

# c# - 将 TextReader 作为流访问

> ID：13241894
> 
> 赞同：3
> 
> 时间：2012-11-05T23:11:15.843
> 
> 标签：c#, .net, stream

我希望 Stream 具有的 TextReader 具有类似的功能。特别是在流中设置位置的能力。有没有办法将 TextReader 更改为流？

我想接受一个 TextReader 但像 Stream 一样访问它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T23:21:56.710

您可以通过使用 StreamReader 类来获取 Stream。StreamReader 是 TextReader 的子类，因此您可以通过执行以下操作轻松访问其流属性：

```
 TextReader reader = File.OpenText("C:\\todo.txt");
    Stream stream = ((StreamReader)reader).BaseStream; 
```

根据您需要做什么，您也可以只使用 StreamReader 类。

来源：http: [//msdn.microsoft.com/en-us/library/system.io.streamreader.aspx](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T23:46:24.487

在一般情况下你不能这样做。并非所有`TextReader`实例都基于流。

此外， a`TextReader`基于文本行，其中行终止符可能不是您可以备份的那种。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T23:23:16.443

像 StreamReader。

[StreamReader 类](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)

关于编码

[StreamReader 构造函数（字符串，编码）](http://msdn.microsoft.com/en-us/library/ms143456.aspx)

关于流

[StreamReader 构造函数（流）](http://msdn.microsoft.com/en-us/library/yhfzs7at.aspx)

如果您需要将其作为 TextReader 接受，那么您将受到限制。
您真的仅限于 TextReader 作为输入吗？
在评论中，您声明任何类型的文本。

# soap - osgi - 服务的多个实例

> ID：13241897
> 
> 赞同：0
> 
> 时间：2012-11-05T23:11:41.443
> 
> 标签：soap, client, osgi, multiple-instances

如何创建使用外部 Web 服务的捆绑包的多个实例？外部 Web 服务要求客户​​端在使用服务之前登录。我有多个帐户。问题是我希望能够添加多个实例；每个帐户一个。每个实例都是使用外部服务的 osgi 声明式服务。

我必须为每个帐户部署一个新捆绑包吗？这感觉不是解决这个问题的正确方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T08:08:30.577

您需要的是 OSGi 组件或服务的多个实例，而不是捆绑包的多个实例。

我推荐一个服务工厂，您为您的服务创建的每个 OSGi 配置（在您的情况下为帐户参数）都会导致创建一个新的服务实例。

Neil Bartlett 在[http://njbartlett.name/2010/07/19/factory-components-in-ds.html](http://njbartlett.name/2010/07/19/factory-components-in-ds.html)的教程看起来是一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T00:30:23.960

该捆绑包在您的控制之下吗？您可以重构它吗？

如果是，那么公开客户端工厂服务而不是客户端服务本身可能会很有用。然后每个实例可以登录到不同的帐户。

# python - 解释列表值转换

> ID：13241900
> 
> 赞同：0
> 
> 时间：2012-11-05T23:11:50.073
> 
> 标签：python, list, python-3.x

```
x = [1, 2, 3]
y = x

x[1] = 'AB'
y[1] = y[1][0]

print(x, y)
>>>
[1, 'A', 3] [1, 'A', 3] 
```

我们将“AB”值分配给 x 列表的索引 1，因此 y 列表也可以获取该值。然后我们将 y[1][0] 值赋给 y[1]，但是 y[1][0] 表示法是什么意思呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T23:15:12.833

`y[1]`是您列表中的第二项，即“AB”，它是一个字符串。由于字符串允许您使用索引访问其值，`y[1][0]`因此它只是字符串“AB”中的第一项，即“A”。

有关 Python 的字符串和切片表示法[的介绍，](http://docs.python.org/2/tutorial/introduction.html#strings)请参阅此内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:14:07.480

`val = y[1][0]` 得到与你相同的结果

```

 tmp = y[1]
val = tmp[0] 

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T23:14:43.973

`x[1] = "AB"`也赋值`y[1] = "AB"`，因为 x 和 y 是同一个列表

`y[1] = "AB"`所以`y[1][0] = 'A'`

看看这是否有帮助

```
x = [1, 2, 3]
y = x

print "Y",y
print "X",x
x[1] = 'AB'
print "Y[1]",y[1]
print "Y[1][0]",y[1][0]
y[1] = y[1][0] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T23:16:03.730

这是一片一片。

```
>>>a = ["a", ["b", ["c"]]]
>>> print a[1][1][0]
'c' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T23:33:59.193

行前

```
y[1] = y[1][0] 
```

y[1] 等于 'AB'

并且 'AB'[0] 等于 'A'，这意味着字符串 'AB' 的位置 0 处的字母是 'A'。

因此，当您将 y[1] 分配给 y[1][0] 时，您将其分配给“A”。

# javascript - 引导程序中的 javascript 和 jquery 脚本标签

> ID：13241901
> 
> 赞同：0
> 
> 时间：2012-11-05T23:11:54.723
> 
> 标签：javascript, django, twitter-bootstrap

我在引导程序方面遇到了麻烦。我开始遇到[导航](http://twitter.github.com/bootstrap/components.html#navs)组件中的链接不可点击的问题。链接在浏览器中输入时很好，但在单击时却没有。

我在正文底部重新排列了脚本标签的顺序，因此我的 Django 静态目录中指向 jQuery 的链接首先出现，并且链接变为“可点击”，尽管它破坏了其他功能，如菜单下拉菜单和手风琴，不再打开。

我尝试将脚本标签移动到该部分，然后将它们切换回来；尝试了jQuery的开发版本....似乎没有任何效果。

这是怎么回事？我怎样才能同时激活链接和 javascript 功能。

```
 <head>
        {% block head %}
        # ...
        # ...

        {% load static %}

            <link href="{% static 'css/bootstrap.css' %}" rel="stylesheet">
            <link href="{% static 'css/custom.css' %}" rel="stylesheet">

            <style type="text/css">
              body {
                padding-top: 60px;
                padding-bottom: 40px;
              }
            </style>
            <link href="{% static 'css/bootstrap-responsive.css' %}" rel="stylesheet">
        {% endblock head %}

   </head>

   <body id="body">
          {% block body %} 

           #.....
           #.....

            <!-- Le javascript
            ================================================== -->
            <!-- Placed at the end of the document so the pages load faster -->

            <script src="{% static 'js/jquery-1.8.2.min.js' %}"></script>
            <script src="{% static 'js/bootstrap.min.js' %}"></script>

          {% endblock body %}  
  </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:40:01.223

经过大量搜索和下巴抚摸，我意识到在我从我的角度调用的模板中，我有以下内容：

```
 {% for group in class_groups %}
    <li><a data-toggle=**"tab"** href="{% url 'subnav' sub_slug=subj class_grp_slug=group.group_name %}">{{ group.group_name }}</a>
  {% endfor %} 
```

实际上应该是什么时候：

```
 {% for group in class_groups %}
    <li><a data-toggle=**"tabs"** href="{% url 'subnav' sub_slug=subj class_grp_slug=group.group_name %}">{{ group.group_name }}</a>
  {% endfor %} 
```

下拉菜单和导航选项卡现在都在工作。

# php - 如何清除缓存，在给定时间内重新加载当前页面？

> ID：13241903
> 
> 赞同：0
> 
> 时间：2012-11-05T23:12:00.933
> 
> 标签：php, jquery, yii

如何在 yii 框架中清除缓存并在给定时间内自动重新加载页面？例如，在接下来的 5 小时内，页面的内容应该在清除缓存之前更改，然后重新加载页面

```
$time = date('h:i:s A', strtotime("+5 hours")); 
```

然后在接下来的 5 小时内，它会再次清除缓存并重新加载同一页面并显示新内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:33:57.927

如果我很好理解这个问题。

在你的 Yii 视图中，在 javascript 中添加类似这样的内容

```
<script>
 setTimeout(function(){ window.location = "<URL>";}, 5*60*1000);
</script> 
```

这是 5 分钟后的重定向。如果你想要 5 小时，只需使用

```
300*60*1000 
```

并将 URL 指向您想要的 www.example.com/controller/action。

如果您仍然想在 php 中执行此操作，我相信您可以将此行添加到您的视图中。

```
<?php header("Refresh: 18000; URL=http://www.example.com/controller/action"); ?> 
```

这里 18000 以秒为单位。

希望能帮助到你。

但是如果您只更新视图的一小部分.. 为什么不创建一个计时器来向您想要更新数据的控制器/动作发出 ajax 请求？Yii 已经为这种需求做好了准备。

# html - 无序列表元素不应该显示项目符号

> ID：13241904
> 
> 赞同：0
> 
> 时间：2012-11-05T23:12:02.517
> 
> 标签：html, css, dotnetnuke

我有一个 HTML 无序列表元素，应该没有显示项目符号（我使用自己的图像作为项目符号）。

**我的问题：**默认的黑色项目符号点出现在 UL 上，而实际上不应该有。 ![在此处输入图像描述](../Images/f7f797e9f6b4777e22e10df945f7756c.png)

该[网站](http://exds-test.epicservices.com.au/Training.aspx)是一个 Dot Net Nuke 运行网站，看起来皮肤 CSS 导致了此错误。你知道我怎样才能阻止后面的子弹出现吗？

我的 CSS：

```
.infoTab ul {
    list-style-type: none;
    list-style-position: outside; 
    margin-left: 15px;
    padding: 0px;
}

.infoTab li {
    background-image: url("../../Site Images/headingIcon.png");
    background-position: 0px 2px;
    background-repeat: no-repeat;
    padding-left: 30px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T23:18:26.480

在`skin.css`第 281 行，你有

```
ul li {
    list-style-position: outside;
    line-height: 1.2em;
    list-style-type: disc;
} 
```

然后 default.css 第 104 行

```
ul li {
    list-style-type: square;
} 
```

, 覆盖

```
.infoTab ul {
    list-style-type: none;
    list-style-position: outside;
    margin-left: 15px;
    padding: 0px;
} 
```

# node.js - 多个 node.js 程序同时运行

> ID：13241905
> 
> 赞同：1
> 
> 时间：2012-11-05T23:12:06.067
> 
> 标签：node.js, express, port, collapse

我有一个节点应用程序正在运行，我想在节点运行另一个进程时尝试 express 框架，但是当我运行 express 示例应用程序时，它说：

```
Error: listen EADDRINUSE
at errnoException (net.js:776:11)
at HTTPServer.Server._listen2 (net.js:915:14)
at listen (net.js:942:10)
at HTTPServer.Server.listen (net.js:992:5)
at Object.<anonymous> (/home/omar/webServer/app.js:35:5)
at Module._compile (module.js:449:26)
at Object.Module._extensions..js (module.js:467:10)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12)
at Module.runMain (module.js:492:10) 
```

我知道当您尝试在同一个端口上运行两个节点程序时会发生这种情况，但我在一个应用程序端口中使用 3000 和另一个 8080，所以我不知道一个节点实例是否会阻止另一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:06:23.820

您可以在节点应用程序前面安装 nginx（在不同的端口上运行）

否则，只需将不同的端口传递给您的应用程序：

```
$ NODE_PORT=8080 node app.js
$ NODE_PORT=8081 node app2.js 
```

应用程序.js

```
var port = process.env.NODE_PORT; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T01:01:11.847

这意味着您有一个当前通常正在运行的节点进程。尝试杀死所有节点进程，然后再次尝试确保每个应用程序使用不同的端口进行侦听。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T23:31:28.453

使用 Netstat 查看监听端口和进程：

```
netstat -ntlp 
```

您可以为您的`express`示例选择任何其他端口（8081、8082 等）或通过 PID 终止使用 8080 端口的程序。

# php - 使用“fwrite”下载二进制文件时 - “0D”字节消失

> ID：13241912
> 
> 赞同：1
> 
> 时间：2012-11-05T23:12:36.923
> 
> 标签：php, fwrite

我正在测试[此代码](https://stackoverflow.com/questions/4000483/how-download-big-file-using-php-low-memory-usage)以下载 10 MB 块的大文件：

```
/**
 * Copy remote file over HTTP one small chunk at a time.
 *
 * @param $infile The full URL to the remote file
 * @param $outfile The path where to save the file
 */
function copyfile_chunked($infile, $outfile) {
    $chunksize = 10 * (1024 * 1024); // 10 Megs

    /**
     * parse_url breaks a part a URL into it's parts, i.e. host, path,
     * query string, etc.
     */
    $parts = parse_url($infile);
    $i_handle = fsockopen($parts['host'], 80, $errstr, $errcode, 5);
    $o_handle = fopen($outfile, 'wb');

    if ($i_handle == false || $o_handle == false) {
        return false;
    }

    if (!empty($parts['query'])) {
        $parts['path'] .= '?' . $parts['query'];
    }

    /**
     * Send the request to the server for the file
     */
    $request = "GET {$parts['path']} HTTP/1.1\r\n";
    $request .= "Host: {$parts['host']}\r\n";
    $request .= "User-Agent: Mozilla/5.0\r\n";
    $request .= "Keep-Alive: 115\r\n";
    $request .= "Connection: keep-alive\r\n\r\n";
    fwrite($i_handle, $request);

    /**
     * Now read the headers from the remote server. We'll need
     * to get the content length.
     */
    $headers = array();
    while(!feof($i_handle)) {
        $line = fgets($i_handle);
        if ($line == "\r\n") break;
        $headers[] = $line;
    }

    /**
     * Look for the Content-Length header, and get the size
     * of the remote file.
     */
    $length = 0;
    foreach($headers as $header) {
        if (stripos($header, 'Content-Length:') === 0) {
            $length = (int)str_replace('Content-Length: ', '', $header);
            break;
        }
    }

    /**
     * Start reading in the remote file, and writing it to the
     * local file one chunk at a time.
     */
    $cnt = 0;
    while(!feof($i_handle)) {
        $buf = '';
        $buf = fread($i_handle, $chunksize);
        $bytes = fwrite($o_handle, $buf);
        if ($bytes == false) {
            return false;
        }
        $cnt += $bytes;

        /**
         * We're done reading when we've reached the conent length
         */
        if ($cnt >= $length) break;
    }

    fclose($i_handle);
    fclose($o_handle);
    return $cnt;
} 
```

我首先在一个小图像上测试这个代码。该图像已下载到我的帐户，但格式已损坏：所有字节似乎都是正确的，除了“0D”字节已从下载的图像中删除，这使其无法使用。
为什么会发生这种情况，我该如何克服？
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:55:15.643

大家好，感谢您的帮助。
现在问题已经解决，罪魁祸首已经确定。
我一直在阅读一些书籍并发现：
***ftp_get() 将远程服务器上的文件复制到您的计算机。FTP_ASCII 参数像传输 ASCII 文本一样传输文件。在此选项下，当您从一个操作系统移动到另一个操作系统时，会自动转换换行符结尾。另一个选项是 FTP_BINARY，它用于非纯文本文件，因此不会发生换行转换。***
我的问题中提供的代码工作正常，它可以正确下载图像。
当我检查图像时，我正在使用由托管服务提供商提供的 php 编写的文件管理器将其下载到我的计算机上。显然，他们不太擅长 PHP，因为他们使用上面提到的 FTP_ASCII 参数来传输二进制文件。因此图像被破坏了。
当我直接从 FTP 帐户下载图像时，证明图像与原始图像相同。
所以，最终，问题出在 PHP 代码上，而不是我编译的代码上。

# java - 我将如何在 OpenGL 中自动贴图一个球体？

> ID：13241921
> 
> 赞同：0
> 
> 时间：2012-11-05T23:13:21.880
> 
> 标签：java, opengl, mapping, textures

我将使用哪些参数特别是 s 和 t 来对球体进行文本映射？我尝试了各种不同的选项，但无论我为 float[] s 和 t 选择什么值，总会有一小部分失真。我可以做飞机和圆柱体，但我不确定球体。任何帮助，将不胜感激。

```
 gl.glTexGeni(GL2.GL_T, GL2.GL_TEXTURE_GEN_MODE, GL2.GL_OBJECT_LINEAR);
    float[] s = {1f, 0f, 0f, 0};
    gl.glTexGenfv(GL2.GL_S, GL2.GL_OBJECT_PLANE, s, 0);
    float[] t = {0f, 1f, 0f, 0};
    gl.glTexGenfv(GL2.GL_T, GL2.GL_OBJECT_PLANE, s, 0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:25:31.397

您无法使用单个矩形纹理对球体进行纹理映射，而不会在某些地方造成严重的失真。这在数学上是不可能的。话虽如此，您也不应该`glTexGen`为此使用该功能，因为 a) 它已被弃用，并且 b) 仅创建线性平面映射，而对于球体纹理，您需要曲线坐标。*使用顶点着色器从顶点位置生成纹理坐标。*

# ios - 使用 doxygen 在目标 c 中记录类扩展

> ID：13241922
> 
> 赞同：0
> 
> 时间：2012-11-05T23:13:46.330
> 
> 标签：ios, doxygen, doxygen-wizard

我在实现文件中有一个带有类扩展名的 Objective-C 类。此类扩展包含一个属性。当我运行 doxygen 时，在输出中我看不到在类扩展中声明的属性。我只看到在主头文件中声明的属性。

我正在运行 doxygen 版本 1.8.2，它应该支持目标 C 中的类扩展。你知道我在配置方面可能做错了什么吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:17:52.577

扩展名没有在类索引中的类名下列出，但在 ClassName(Private) 下，我只是错过了它。

# java - Java中的泛型类型与ineinterface

> ID：13241924
> 
> 赞同：0
> 
> 时间：2012-11-05T23:14:09.153
> 
> 标签：java, serializable

```
public class ResultContainer<T implements java.io.Serializable>
implements java.io.Serializable{
 int errorCode;
 T result;
 /* ... Few Other variables ... */
} 
```

这段代码有什么问题，我基本上需要一个通用类型（如包装器）来存储我的所有结果，其中包含实际结果和一些其他信息。在这里，我需要实际的 Result 类（即此处的“T”）和 ResultContainer 类都是可序列化的。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T23:16:28.977

当您在泛型中有接口时，您仍然必须使用 extends 关键字。你不应该在泛型中使用 implements 关键字。

```
public class ResultContainer<T implements java.io.Serializable>
implements java.io.Serializable{ 
```

应该

```
public class ResultContainer<T extends java.io.Serializable>
implements java.io.Serializable{ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T23:16:57.937

你必须使用：

```
public class ResultContainer<T extends java.io.Serializable> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T23:17:58.157

你必须写

```
public class ResultContainer<T extends java.io.Serializable> 
```

实现被视为继承，因为您继承了接口的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T23:26:33.767

只是一个简单的错误...如果您问我，您必须说`extends`而不是`implements`在通用类型约束中...但是语言混乱；-)

```
import java.io.Serializable;

public class ResultContainer<TResult extends Serializable> implements Serializable
{
    private static final long serialVersionUID = 1L;
    int errorCode;
    TResult result;
} 
```

现在复习[泛型教程](http://docs.oracle.com/javase/tutorial/java/generics/index.html)可能会对您有所帮助，只是为了提高您的技能，因为我认为您将在这个项目中广泛使用泛型。

通过一个 tut 比在网上单独询问所有这些复杂的事实要快得多。

干杯。基思。

# c# - 在运行时从 asp.net 页面中删除控件

> ID：13241925
> 
> 赞同：0
> 
> 时间：2012-11-05T23:14:17.023
> 
> 标签：c#, asp.net

我有一个 asp.net 仪表板站点，允许用户从下拉列表中加载 HTML 模板。页面上有多种类型的 DevExpress 组件，包括 ASPxDockPanel。如果用户更改模板，我收到停靠面板已存在的错误，我想包含一个递归函数，如下面的函数，检查页面上是否存在任何 ASPxDockPanel，如果存在则删除它们。这仅适用于第一个停靠面板，然后轰炸。我认为这是因为在循环遍历一组可枚举控件时无法对其进行修改。如何在运行时循环控制并删除停靠面板？

```
protected void LoadTableTemplate(string selectedTemplate, int currentMode)
{
   FindAllDockPanels(this);  
}

public void FindAllDockPanels(Control ctrl)
{
    if (ctrl != null)
    {
        foreach (Control control in ctrl.Controls)
        {
            if (control is ASPxDockPanel)
            {
               ctrl.Controls.Remove(control);
               control.Dispose();
            }
            FindAllDockPanels(control);
        }
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:25:26.600

使用临时集合，如下所示：

```
public void FindAllDockPanels(Control ctrl) {
    if (ctrl != null) {
        List<Control> remove = new List<Control>();
        foreach (Control control in ctrl.Controls) {
            if (control is ASPxDockPanel) {
                remove.Add( control );
            }
        }
        foreach(Control control in remove) {
            control.Controls.Remove( control );
            control.Dispose(); // do you really need to dispose of them?
        }
        FindAllDockPanels(control);
    }
} 
```

如果您发现自己经常这样做，可能值得将这些“DelayedDelete”操作移至扩展方法，如下所示：

```
public static void DelayedRemove<T>(this IEnumerable<T item> collection, T itemToRemove) {
    // add it to a private static dictionary bound to the `collection` instance.
}
public static void DelayedRemoveFinish(this IEnumerable<T item> collection) {
    // empty the private static dictionary in here
} 
```

然后你会像这样使用它：

```
 public void FindAllDockPanels(Control ctrl) {
    if (ctrl != null) {

        foreach (Control control in ctrl.Controls) {
            if (control is ASPxDockPanel) control.Controls.DelayedRemove( control );
        }
        control.Controls.DelayedRemoveFinish();

        FindAllDockPanels(control);
    }
} 
```

干净多了，不是吗？:)

# objective-c - 单行 if 语句 Objective-c

> ID：13241926
> 
> 赞同：17
> 
> 时间：2012-11-05T23:14:24.067
> 
> 标签：objective-c

如果在objective-c 中编写一行if 语句，将如何进行？有合适的风格吗？

我知道用于赋值 ( `int a = condition ? b : c`) 的三元运算符，但是说我想调用一个方法是`if(condition){ [self methodCall]; }`推荐的在一行中处理这个问题的方法吗？

此外，那里有任何 objc 样式指南吗？（想想[这个 ruby​​ 风格指南](https://github.com/bbatsov/ruby-style-guide)）在一段时间不接触它之后回到一种语言让我想重新思考我如何设计我的代码。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-05T23:15:39.760

**三元 if 语句**（if - else）

```
condition ? [self methodcall] : [self otherMethodCAll]; 
```

**单一方法调用**

```
if (condition) [self methodcall]; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-05T23:20:17.167

单行 ruby​​ 样式`if`和`unless`语句在 Objective-C 中没有等价物。您可以坚持使用块，也可以只在同一行调用该方法：

```
if (condition) {
    [self method];
} 
```

或者

```
if (condition)
    [self method]; 
```

或者

```
if (condition) [self method]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T23:19:17.757

你不需要括号...

```
if(condition) [self methodCall]; 
```

这是最简洁的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T23:18:57.020

是的，在 Objective-C 中执行“单行`if`语句”的唯一方法是将`if`语句及其主体放在同一行。

# oop - 为什么 Eiffel 的自动类型转换功能没有更受欢迎？

> ID：13241930
> 
> 赞同：2
> 
> 时间：2012-11-05T23:14:30.740
> 
> 标签：oop, programming-languages, type-conversion, overloading, eiffel

我在用 Java 编程时发生了什么：

```
String str

// want to call something(), but signature does not match
something(Foo foo)

// but I have this conversion function
Foo fooFrom(String)

// Obviously I am about to create another method overload.. sigh
something(String s) {
    something(fooFrom(s));
} 
```

但后来我想到了一种“自动类型转换”的可能性，它只使用我定义的转换函数`fooFrom`，每次传入一个字符串，其中一个 Foo 对象除外。

我的搜索把我带到了[关于类型转换的维基百科页面](http://en.wikipedia.org/wiki/Type_conversion)，这个 Eiffel 示例：

```
class STRING_8
    …
create
    make_from_cil
    …
convert
    make_from_cil ({SYSTEM_STRING})
    to_cil: {SYSTEM_STRING}
    … 
```

`convert`如果将 STRING_8 用作 SYSTEM_STRING，则会自动调用后面的方法，反之亦然。令我惊讶的是，我找不到任何其他语言支持这一点。

所以我的问题是：还有其他语言支持这个功能吗？如果没有，是否有任何理由，因为它对我来说似乎很有用？此外，我认为将其作为语言插件实现并不难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T09:30:54.513

有一点可能会使事情变得更复杂一些。目前，Eiffel 有一条规则，即只有在重新附加的源附加到对象时才能应用转换，即不是**Void**（在 Java/C# 中不是**null ）。**

让我们看一下原始示例：

```
something (str); 
```

假设*str*为**null**。我们是否得到*NullPointerException / InvalidArgumentException*，因为代码被转换为

```
something (fooFrom (str)); 
```

和*fooFrom*不期望**null**？或者编译器是否足够聪明，可以将其转换为

```
if (str == null)
    something (null);
else
    something (fooFrom (str)); 
```

?

当前的 Eiffel 标准确保此类问题根本不会发生，并且如果涉及转换，则*str*不为**空。**然而，许多其他语言（如 Java 或 C#）并不能保证这一点，而且额外的复杂性可能不值得他们付出努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:47:30.927

我相信 Eiffel 不是唯一支持转换例程的语言，但我想说它可能是极少数将其与语言定义的其余部分很好地集成的语言之一。

例如，在 .NET 中，您有 op_Explicit 和 op_Implicit 例程，可用于转换支持它们的语言。我相信 C# 确实如此。

马努

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T13:35:36.563

[类型强制](http://en.wikipedia.org/wiki/Type_conversion)（隐式转换）是一种诅咒和一种祝福——在某些情况下很方便，但也可能适得其反。

例如，Javascript 有许多奇怪的强制规则，当将字符串强制转换为数字时可能会导致错误等。

**Scala**有一种叫做“隐式”的东西，它实现了与您在 Eiffel 中描述的类似（至少对我而言）的东西。毫不奇怪，它们可能会导致某些[问题](https://stackoverflow.com/questions/9964071/scala-implicit-conversion-gotchas)。但它们也可以非常方便，例如见文章[Pimp My Library](http://www.artima.com/weblogs/viewpost.jsp?thread=179766)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T12:58:49.180

C++ 有[复制构造函数和赋值运算符](http://www.cplusplus.com/articles/y8hv0pDG/)。

# c# - 将 C# 连接到 MySQL 并打开连接

> ID：13241931
> 
> 赞同：2
> 
> 时间：2012-11-05T23:14:32.023
> 
> 标签：c#, mysql, c, connection, mysqlconnection

这是我的简单代码，只是为了从 MySQL 中读取一些内容。但我想要的是在打开表单时创建连接和命令，并在单击按钮时打开连接并执行其余操作。但它说：

> “当前上下文中不存在名称‘konekcija’”

有人可以解释一下吗。

```
namespace mysql_windows_console
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        public void Form1_Load(object sender, EventArgs e)
        {
            /*========MYSQL KONEKCIJA===========*/
            string baza               = "server=localhost;database=test;user=root;password=;";
            MySqlConnection konekcija = new MySqlConnection(baza);
            MySqlCommand comm         = konekcija.CreateCommand();
            /*========MYSQL KONEKCIJA===========*/
        }

        private void button1_Click(object sender, EventArgs e)
        {
            konekcija.Open();
            string sql               = "SELECT IME,PREZIME FROM tabela";
            MySqlDataAdapter adapter = new MySqlDataAdapter(sql,konekcija);
            DataTable tab            = new DataTable();
            adapter.Fill(tab);
            dataGridView1.DataSource = tab;
            konekcija.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:18:58.860

您将 konekcija 存储为局部变量。使其成为如下属性：

```
private MySqlConnection konekcija { get; set; }

public void Form1_Load(object sender, EventArgs e)
{
    //...
    this.konekcija = new MySqlConnection(baza);
}

private void button1_click(object sender, EventArgs e)
{
    this.konekcija.Open();
    //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:33:28.417

您应该`MySqlConnection`在 EventHandler 之外声明，`Form_Load`以便您可以从其他方法访问它。另外我建议在`Form`构造函数中初始化它。由于您正在使用，因此`DataAdapter`您不需要使用`MySqlCommand`. 这是修改后的代码；

```
namespace mysql_windows_console
{
public partial class Form1 : Form
{
    MySqlConnection konekcija;
    string baza = "server=localhost;database=test;user=root;password=;"; //so you can access it again if you need it b any chance
    public Form1()
    {
        InitializeComponent();
        konekcija = new MySqlConnection(baza);
    }

    private void button1_Click(object sender, EventArgs e)
    {
        konekcija.Open();
        string sql = "SELECT IME,PREZIME FROM tabela";
        MySqlDataAdapter adapter = new MySqlDataAdapter(sql,konekcija);
        DataTable tab = new DataTable();
        adapter.Fill(tab);
        dataGridView1.DataSource = tab;
        konekcija.Close();
    }
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T03:50:36.597

它只是意味着`konekcija`在 的范围内找不到`button1_Click`。

尽可能缩小变量的范围。为什么不只在需要时才连接？例子，

```
const string baza = "server=localhost;database=test;user=root;password=;";  
private void button1_Click(object sender, EventArgs e)
{

    using (MySqlConnection _conn = new MySqlConnection(baza))
    {
        using (MySqlCommand _comm = new  MySqlCommand())
        {
            _comm.Connection = _conn;
            _comm.CommandText = "SELECT IME,PREZIME FROM tabela";
            _comm.CommandType = CommandType.Text;

            using (MySqlDataAdapter _adapter = new MySqlDataAdapter(_comm))
            {
                DataTable _table = new DataTable;
                try
                {
                    _adapter.Fill(_table);
                    dataGridView1.DataSource = _table;
                }
                catch (MySqlException e)
                {
                    MessageBox.Show(e.Message.ToString());
                }
            }
        }
    }
} 
```

# c# - linq to entity 无法将 Icollection 类型转换为 List 类型

> ID：13241934
> 
> 赞同：1
> 
> 时间：2012-11-05T23:14:49.963
> 
> 标签：c#, linq, entity-framework

我正在使用实体框架。我有以下实体：

```
public class Articolo
{
    ..
    public virtual ICollection<Fornitore> Fornitori { get; set; }
}

public class Fornitore
{
  ...
   public virtual ICollection<Articoli> Articoli { get; set; }    } 
```

以下代码：

```
List<Fornitore> result = new List<Fornitore>();
var r = zefiroContext.Articoli.Where(p => p.Id == IdArticolo).Select(p => p.Fornitori).ToList();
result = r; 
```

给出编译器错误：

> 无法将类型“System.Collections.Generic.List < System.Collections.Generic.ICollection < prova2.Model.Fornitore>>”隐式转换为“System.Collections.Generic.List < prova2.Model.Fornitore>”

我怎样才能得到我的`List < Fornitore >`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T23:18:25.153

好吧，您实际上是在尝试选择多个集合，我认为这就是您的问题所在，将您的更改`Select`为`SelectMany`可能会为您解决问题，但我不确定这是否是您想要的功能。将会发生的事情是`SelectMany`将所有单独的结果集压缩到一个集合中，然后可以将其转换为模型类型的列表与模型类型的集合列表。

```
var r = zefiroContext.Articoli.Where(p => p.Id == IdArticolo).SelectMany(p => p.Fornitori).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:22:52.157

每个 Articolo 都有许多 Fornitori - 所以你会得到一个列表列表......

您可能只想获取具有 matchign id 的匹配单个项目...

```
var r = zefiroContext.Articoli.First(p => p.Id == IdArticolo).Select(p => p.Fornitori).ToList(); 
```

# windows-8 - Windows 应用商店应用中的 Google Ads

> ID：13241935
> 
> 赞同：3
> 
> 时间：2012-11-05T23:14:50.213
> 
> 标签：windows-8, microsoft-metro, ads

我可以在我的 Windows 应用商店应用中使用 Google Ads 吗？

如果是，那么如何？Google AdSense 要求我输入网站地址以进行内容审核。我如何告诉他们我正在开发一个应用程序？

如果否，那么我可以使用什么广告政策？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T01:04:41.207

根据[Google 的页面](https://support.google.com/adsense/bin/answer.py?hl=en&answer=68724)

> 在移动应用程序中使用 AdSense 移动版违反了 AdSense 政策。移动应用程序构成任何可下载的应用程序，即使使用 WebView 来显示广告也是如此。在移动应用程序中找到的所有 AdSense 移动广告单元都将被禁用。如果您正在为您的移动应用程序寻找广告解决方案，请注册[AdMob](http://www.google.com/ads/admob/)，这是 Google 领先的移动广告展示产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T08:18:48.640

我目前正在尝试在 Windows Store Apps 中轻松设置的[Microsoft Pub Center 。](http://pubcenter.microsoft.com/ "酒吧中心")

# java - 随机班级表现奇怪？

> ID：13241937
> 
> 赞同：15
> 
> 时间：2012-11-05T23:14:52.430
> 
> 标签：java, random

在这段代码中：

```
Random random = new Random(441287210);
for(int i=0;i<10;i++)
    System.out.print(random.nextInt(10)+" ");
} 
```

输出是`1 1 1 1 1 1 1 1 1 1`, 每次。

为什么是这样？不`Random`应该是……嗯……随机的？我认为`Random`该类使用`System.nanoTime`，因此输出通常应该是随机的。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-05T23:19:24.923

让它再打印几个，前 100 个是

```
1 1 1 1 1 1 1 1 1 1 3 4 7 2 2 6 0 3 0 2 8 4 1 6 0 0 0 2 8 2 9 8 9 2 5 2 1 1 4 5 3 4 1 4 1
8 7 6 6 0 6 5 0 4 5 5 6 0 8 3 8 9 7 4 0 9 9 7 7 9 3 9 6 4 5 0 6 3 7 4 9 8 7 6 2 8 9 8 4 4
8 4 9 0 1 6 9 6 1 5 
```

看起来不错。

每个好的（伪）随机序列都包含重复数字的条纹，这个以一个开头。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-05T23:19:08.020

`Random`类生成的值是**伪随机的**：它们是基于种子值使用确定性算法创建的。通常（例如，如果您使用无参数构造函数）种子使用当前时间初始化，这显然是一个唯一值。因此，生成了一个独特的“随机”序列。

在这里，您使用的是在代码执行之间不会改变的常量种子值。因此，您总是得到相同的序列。恰好这个序列是`1 1 1 1 1 1 ...`针对这个特定的种子的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-05T23:20:53.290

没有什么可以说`1`连续 10 秒的序列是不可能的。给你种子值的人`441287210`恰好发现了这样一个值，该值导致`1`连续 10 秒开始。如果您继续调用`nextInt()`（即超过 10 次），您将看到随机值。应该有可能找到将导致其他“明显非随机”序列的其他种子值。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-05T23:32:03.633

Random 是一个[线性同余生成器](http://en.wikipedia.org/wiki/Linear_congruential_generator)；即它基于以下形式的公式：

```
N <- (N * C1 + C2) % M 
```

其中 C1、C2 和 M 是常数。

这类生成器的特性之一是具有高自相关性。事实上，如果您绘制连续的数字，您可以在数字中看到清晰的剥离模式。

您的测试程序有效地从底层生成器中获取了 10 个连续的数字，计算了它们的模 10 的值......并发现它们都是相同的。实际上，模 10 与发电机的自然周期性“共振”……在短时间内。

这是使用具有高自相关性的 PRNG 的缺点之一。用外行的话来说......它“不是很随机”......如果你在随机性至关重要的情况下使用它，你可能会遇到麻烦。

* * *

笔记：

*   Random 不是随机数生成器。它是一个*伪随机*数生成器。这意味着，如果您知道初始状态，则生成的数字是完全可以预测的。
*   对 Random 使用真正的随机种子并没有真正的帮助。它只会使问题更难重现。
*   Random 的其他种子可能会在此特定测试中为您提供类似的模式。
*   从纯数学的角度来看，十个数字并不比任何其他十个数字的序列更多或更少“随机”。但从数学的角度来看，`Random`根本不是随机的。事实上，一旦你弄清楚当前值`N`是多少，它是完全可以预测的。问题是使序列直观地显示为非随机的自相关。
*   If you want to avoid this kind of intuitive non-randomness, use SecureRandom which should either be a true random number source, or a generator of pseudo-random numbers that are much, much harder to predict.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-05T23:20:35.883

如果使用`for(int i=0;i<100;i++)`，则输出的序列再次“更随机”。连续出现十个随机序列的概率`1`可能很小，但也不是不可能。（只要给定足够的样本，几乎肯定会发生任何序列。）

这只是一个有趣的巧合。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T23:27:22.020

Random 类在调用 nextInt() 时使用**种子**生成随机数，建议使用长数，当您创建随机对象时，您提供的 int 不足以满足随机性。

尝试运行循环 20 次，您会看到随机性或移除种子或提供很长的种子值

# z3 - 我可以使用 declare-const 来消除 forall 通用量词吗？

> ID：13241938
> 
> 赞同：3
> 
> 时间：2012-11-05T23:14:57.033
> 
> 标签：z3, theorem-proving

我对使用通用量词和 declare-const 而不使用 forall 感到有些困惑

```
(set-option :mbqi true)
(declare-fun f (Int Int) Int)
(declare-const a Int)
(declare-const b Int)

(assert (forall ((x Int)) (>= (f x x) (+ x a)))) 
```

我可以这样写：

```
(declare-const x Int)
(assert  (>= (f x x) (+ x a)))) 
```

在这两种情况下，Z3 将探索 Int 类型的所有可能值。那么有什么区别呢？我真的可以使用 declare-const 来消除 forall 量词吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T17:53:41.097

您可以`exists`使用`declare-const`. 也许这就是你困惑的根源？以下两个是等价的：

```
 (assert (exists ((x Int)) (> x 0)))
    (check-sat) 
```

和

```
 (declare-fun x () Int)
   (assert (> x 0))
   (check-sat) 
```

请注意，这仅适用于顶级存在量词。如果您对共相 ( `forall`) 和存在量 ( `exists`) 进行了嵌套量化，那么您可以进行 skolemization 以将存在量浮动到顶层。从逻辑的角度来看，这个过程涉及更多，但相当简单。

没有以这种方式将全称量词浮动到顶层的通用方法，至少在 SMT-Lib 所体现的经典逻辑中没有。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T02:29:57.587

不，说法不一样。Z3 中的常量是 nullary (0 arity) 函数，所以`(declare-const a Int)`只是 的语法糖`(declare-fun a () Int)`，所以这两个语句是相同的。你的第二个语句`(assert (>= (f x x) (+ x a))))`隐含地断言 x 的存在，而不是你第一个语句中的所有 x `(assert (forall ((x Int)) (>= (f x x) (+ x a))))`。为了清楚起见，请注意在您的第二个语句中，只有一个 x 的赋值需要满足断言，而不是所有可能的赋值（还要注意函数 f 的区别，并参见这个 Z3@rise 脚本：[http://rise4fun .com/Z3/4cif](http://rise4fun.com/Z3/4cif)）。

这是该脚本的文本：

```
(set-option :mbqi true)
(declare-fun f (Int Int) Int)
(declare-const a Int)
(declare-fun af () Int)
(declare-const b Int)
(declare-fun bf () Int)

(push)
(declare-const x Int)
(assert  (>= (f x x) (+ x a)))
(check-sat) ; note the explicit model value for x: this only checks a single value of x, not all of them
(get-model)
(pop)

(push)
(assert (forall ((x Int)) (>= (f x x) (+ x a))))
(check-sat)
(get-model) ; no model for x since any model must satisfy assertion
(pop) 
```

此外，这是 Z3 SMT 指南中的一个示例（“未解释的函数和常量”部分下的[http://rise4fun.com/z3/tutorial/guide ）：](http://rise4fun.com/z3/tutorial/guide)

```
(declare-fun f (Int) Int)
(declare-fun a () Int) ; a is a constant
(declare-const b Int) ; syntax sugar for (declare-fun b () Int)
(assert (> a 20))
(assert (> b a))
(assert (= (f 10) 1))
(check-sat)
(get-model) 
```

# scala - 带参数的 Scala 提取器

> ID：13241939
> 
> 赞同：10
> 
> 时间：2012-11-05T23:15:08.963
> 
> 标签：scala, pattern-matching

Scala 中是否有允许提取器采用自定义参数的语法？这个例子有点做作。假设我有一个整数的二叉搜索树，如果它的值可以被某个自定义值整除，我想在当前节点上匹配。

使用 F# 活动模式，我可以执行以下操作：

```
type Tree =
    | Node of int * Tree * Tree
    | Empty  

let (|NodeDivisibleBy|_|) x t =
    match t with
    | Empty -> None
    | Node(y, l, r) -> if y % x = 0 then Some((l, r)) else None

let doit = function
    | NodeDivisibleBy(2)(l, r) -> printfn "Matched two: %A %A" l r
    | NodeDivisibleBy(3)(l, r) -> printfn "Matched three: %A %A" l r
    | _ -> printfn "Nada"

[<EntryPoint>]
let main args =
    let t10 = Node(10, Node(1, Empty, Empty), Empty)
    let t15 = Node(15, Node(1, Empty, Empty), Empty)

    doit t10
    doit t15

    0 
```

在 Scala 中，我可以做类似的事情，但不是我想要的：

```
sealed trait Tree
case object Empty extends Tree
case class Node(v: Int, l: Tree, r: Tree) extends Tree

object NodeDivisibleBy {
  def apply(x: Int) = new {
    def unapply(t: Tree) = t match { 
      case Empty => None
      case Node(y, l, r) => if (y % x == 0) Some((l, r)) else None
    }
  }
}

def doit(t: Tree) {
  // I would prefer to not need these two lines.
  val NodeDivisibleBy2 = NodeDivisibleBy(2)
  val NodeDivisibleBy3 = NodeDivisibleBy(3)
  t match { 
    case NodeDivisibleBy2(l, r) => println("Matched two: " + l + " " + r)
    case NodeDivisibleBy3(l, r) => println("Matched three: " + l + " " + r)
    case _ => println("Nada")
  }
}

val t10 = Node(10, Node(1, Empty, Empty), Empty)
val t15 = Node(15, Node(1, Empty, Empty), Empty)

doit(t10)
doit(t15) 
```

如果我能做到，那就太好了：

```
case NodeDivisibleBy(2)(l, r) => println("Matched two: " + l + " " + r)
case NodeDivisibleBy(3)(l, r) => println("Matched three: " + l + " " + r) 
```

但这是一个编译时错误： '=>' 预期但 '(' 找到。

想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T01:43:16.173

从[规格](http://www.scala-lang.org/docu/files/ScalaReference.pdf)：

> ```
>  SimplePattern ::= StableId ‘(’ [Patterns] ‘)’ 
> ```
> 
> 提取器模式*x(p1, ..., pn)*其中*n ≥ 0*与构造器模式具有相同的句法形式。但是，稳定标识符*x*不是案例类，而是表示一个对象，该对象具有一个名为`unapply`或`unapplySeq`匹配模式的成员方法。

和：

> *稳定标识符*是以标识符结尾的路径。

即，不是像`NodeDivisibleBy(2)`.

所以不，这在 Scala 中不可能以任何直接的方式实现，我个人认为这很好：必须编写以下内容（顺便说一下，我可能会在`NodeDivisibleBy`对象和导入中定义）：

```
val NodeDivisibleBy2 = NodeDivisibleBy(2)
val NodeDivisibleBy3 = NodeDivisibleBy(3) 
```

对于不必破译 case 子句中的任意表达式的可读性增加，这是一个很小的代价。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T06:28:41.097

正如 Travis Brown 所指出的，在 scala 中这是不可能的。

在那种情况下，我所做的只是使用警卫和别名将分解与测试分开。

```
val DivisibleBy = (n: Node, x: Int) => (n.v % x == 0) 

def doit(t: Tree) = t match { 
    case n @ Node(y, l, r) if DivisibleBy(n,2) => println("Matched two: " + l + " " + r)
    case n @ Node(y, l, r) if DivisibleBy(n,3) => println("Matched three: " + l + " " + r)
    case _ => println("Nada")
} 
```

在这种简单的情况下，定义一个单独`DivisibleBy`的显然是完全过分的，但可能会以类似于 F# 活动模式的方式在更复杂的场景中提高可读性。

您还可以将 divisibleBy 定义为 Node 的方法并具有：

```
case class Node(v: Int, l: Tree, r: Tree) extends Tree {
    def divisibleBy(o:Int) = (v % o)==0
}

def doit(t: Tree) = t match { 
    case n @ Node(y, l, r) if n divisibleBy 2 => println("Matched two: " + l + " " + r)
    case n @ Node(y, l, r) if n divisibleBy 3 => println("Matched three: " + l + " " + r)
    case _ => println("Nada")
} 
```

我认为它比 F# 版本更具可读性（如果更详细的话）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T08:08:14.917

将案例类、谓词和参数绑定在一起，然后照常匹配结果。

```
case class Foo(i: Int)

class Testable(val f: Foo, val ds: List[Int])

object Testable {
  def apply(f: Foo, ds: List[Int]) = new Testable(f, ds)
  def unapply(t: Testable): Option[(Foo, List[Int])] = {
    val xs = t.ds filter (t.f.i % _ == 0)
    if (xs.nonEmpty) Some((t.f, xs)) else None
  }
}

object Test extends App {
  val f = Foo(100)

  Testable(f, List(3,5,20)) match {
    case Testable(f, 3 :: Nil)  => println(s"$f matched three")
    case Testable(Foo(i), 5 :: Nil) if i < 50
                                => println(s"$f matched five")
    case Testable(f, ds)        => println(s"$f matched ${ds mkString ","}")
    case _                      => println("Nothing")
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-24T15:46:20.670

迟到的答案，但有一个 scalac 插件提供语法`~(extractorWithParam(p), bindings)`，编译时所有安全：[https ://github.com/cchantep/acolyte/tree/master/scalac-plugin#match-component](https://github.com/cchantep/acolyte/tree/master/scalac-plugin#match-component)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-06T01:29:13.370

据我所知，答案是否定的。

对于这种情况，我也使用以前的方式。

# c++ - 从 HCURSOR 获取游标类型

> ID：13241940
> 
> 赞同：1
> 
> 时间：2012-11-05T23:15:08.557
> 
> 标签：c++, windows, winapi

我从另一个进程中得到一个 HCURSOR。我想找到它的类型。它的资源就是这些[LoadCursor](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648391%28v=vs.85%29.aspx)。

我在 MSDN 网站上环顾四周，没有找到任何关于如何获取 HCURSOR 的资源 ID 的信息。我怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T23:31:26.883

你没有。游标不一定有资源 ID（例如，您可以在内存中创建游标）。

您也许可以尝试从已知资源 ID 创建游标，然后将它们与相关`HCURSOR`问题进行比较。（系统游标应与 一起使用`LoadImage(..., LR_SHARED)`，因此多次调用应返回相同的句柄。）

# sql-server - 什么是 spt_columns_odbc_view，为什么无法访问？

> ID：13241942
> 
> 赞同：2
> 
> 时间：2012-11-05T23:15:12.367
> 
> 标签：sql-server

我确实`sp_helptext 'sys.sp_columns'`看到了基础表`sys.spt_columns_odbc_view`，但我无法执行查询`Invalid object name 'sys.spt_columns_odbc_view'`。

这个系统表是不可查询的还是我没有权限？msdn 中没有提供太多文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T09:59:44.440

您应该先进行 DAC 连接，因为 sys.spt_columns_odbc_view 是内部视图。制作 DAC 后，只需查询它，如下所示：

```
select * from sys.spt_columns_odbc_view 
```

[有关 DAC 的更多信息](http://msdn.microsoft.com/en-us/library/ms178068%28v=sql.105%29.aspx)

# oracle11g - 我可以 ping 数据库，我应该能够使用正确的凭据连接吗？

> ID：13241943
> 
> 赞同：0
> 
> 时间：2012-11-05T23:15:16.667
> 
> 标签：oracle11g, oracle-sqldeveloper

我可以从我的机器上 ping 一个数据库服务器，但连接起来很困难。我应该能够连接还是有其他网络功能阻碍？

我正在尝试将 Oracle SQL 开发人员连接到 Oracle 11g R2 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-04T12:06:46.467

以下是使用 sql developer 连接数据库的说明

*   知道数据库正在监听的端口号（默认为 1521）
*   确保您可以远程登录到主机和端口号
*   有多种连接方式（BASIC、TNS、Advanced 等）
*   对于 Basic，您需要将主机 ip 或可解析名称、端口和 sid 或服务名称作为连接字符串的一部分。同样，对于 JDBC，您需要提供有效的 JDBC url，并且您应该在 sql developer 的适当位置提供 ojdbc jar 文件。

# php - 使用 mod rewrite 将 mysitephp?id=username 更改为 username.php

> ID：13241944
> 
> 赞同：-1
> 
> 时间：2012-11-05T23:15:30.743
> 
> 标签：php, apache, mod-rewrite

假设我有成员，当他们登录时，他们会转到`mysite.php/id=username`，其中用户名总是不同，具体取决于他们的实际用户名。

我可以在 mod rewrite 中使用一行来去除 id= 并留下用户名吗？我该怎么做？

示例：`mysite.php?id=john`- 我希望它是`mysite/john`，对其他人也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:24:18.243

要重写给`/mysite/john`您`/mysite.php?id=john`，请使用：

```
RewriteBase /
RewriteRule ^mysite/([^/]+) mysite.php?id=$1 [L] 
```

你可以在这里测试这个规则：http: [//htaccess.madewithlove.be/](http://htaccess.madewithlove.be/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:21:23.690

尝试：

```
RewriteRule ^([a-zA-Z0-9\-_]+).php$ mysite.php?id=$1 [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T23:19:22.850

当然，只需这样做：

```
RewriteRule ^mysite/([A-za-z0-9-]+).php$ mysite.php?id=$1 [L] 
```

这假设用户 ID 是字母（大写和小写）、数字或破折号。将字符添加到适合您的正则表达式。当然你可以做任何事情`.+`来匹配任何东西，但我不喜欢让事情变得那么开放。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T23:42:11.517

您不能`mod_rewrite`为此使用，您可以尝试`mod_substitute`（确保`mod_filter`也启用）：

```
AddOutputFilterByType SUBSTITUTE text/html
Substitute s|/?index\.php\?id=([a-zA-Z0-9_-]+)|/index/$1/|i 
```

不知道这会有多好，还没有测试过。

然后你可以使用`mod_rewrite`：

```
RewriteBase /
RewriteRule ^index/([a-zA-Z0-9_-]+) index.php?id=$1 [L] 
```

**更新：**

我想我误解了您的问题，如果您尝试将地址栏表单中的 URL 更改`index.php?id=username`为此`index/username`应该可以：

```
RewriteCond %{QUERY_STRING} ^id=([a-zA-Z0-9_-]+)$
RewriteRule ^index\.php$ index/%1/? [R,L] 
```

# performance - magento - 缓慢添加到购物车 - 大量查询

> ID：13241954
> 
> 赞同：3
> 
> 时间：2012-11-05T23:16:13.923
> 
> 标签：performance, magento, cart

我们正在运行一个企业实例，并在添加到购物车时看到一些奇怪的行为，其中交易跟踪显示库存和状态被多次检查 - 即使对于一个很小的篮子（例如 20 件商品）也是如此。我们运行 new-relic 并且可以在跟踪中看到数百个调用，虽然它们响应迅速，但它们加起来，因为它们被调用了很多次。附件显示了一个简单的购物车添加的示例跟踪。我们正在运行 nginx、varnish、apc 作为核心配置。非常感谢任何想法/帮助。以前有人见过类似的吗？

加载时间：14,871

98.82% Mage_Core_Controller_Varien_Action::dispatch

6.13%

156 fast method calls 2.050s 1.0 0.01% catalogrule_product_price - SELECT 2.050s 1.0 catalog_product_entity_group_price - SELECT 2.054 s 0.0 catalog_product_flat_1 - SELECT 2.059 s cataloginventory_stock_status - SELECT 2.061 s catalog_product_flat_1 - SELECT 2.073 s cataloginventory_stock_status - SELECT 2.082 s catalog_product_flat_1 - SELECT 2.087 s cataloginventory_stock_status - SELECT 2.097 s cataloginventory_stock_status - SELECT 2.104 s 等等数百个调用..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T11:01:13.243

尝试在 magento 中进行巧妙的缓存。例如，您可以使用 memcache 来最小化数据库调用。

# javascript - 动态设置对象中的键

> ID：13241956
> 
> 赞同：1
> 
> 时间：2012-11-05T23:16:22.147
> 
> 标签：javascript, node.js, mongodb-query

我正在尝试在[Node.js中为](http://en.wikipedia.org/wiki/Node.js)[MongoDB](http://en.wikipedia.org/wiki/MongoDB)动态构建查询。创建它的函数是：

```
 app.set('searchTerm', function (field, str){
        var i, searchTerm, keywords;
        keywords = str.split(' ');
        searchTerm = {field : str , _keywords : keywords};
        return searchTerm;
    }); 
```

我的问题是构造的对象最终以字符串“字段”作为键，而不是传递的参数。我如何得到它来评估论点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T23:29:17.867

```
app.set('searchTerm', function (field, str){
    var i, searchTerm, keywords;
    keywords = str.split(' ');
    searchTerm = {_keywords: keywords};
    searchTerm[field] = str;
    console.dir(searchTerm);
    return searchTerm;
}); 
```

# fancybox - Fancybox 在包含“&”的 URL 上阻塞

> ID：13241957
> 
> 赞同：0
> 
> 时间：2012-11-05T23:16:25.733
> 
> 标签：fancybox

我有一个脚本可以为我重新调整图像大小并使用它来提供图像：

[http://mysite.com/createthumb.php?filename=mypic.jpg](http://mysite.com/createthumb.php?filename=mypic.jpg)

Fancybox 将使用以下链接提供上述图像：

`<a href='createthumb.php?filename=mypic.jpg' class='fancybox' rel='lightbox[pics]' title=':: [ ]'><span></span><img src='createthumb.php?filename=mypic.jpg' alt='Loading...' /></a>`

但是我需要通过传递参数“size”来重新调整它的大小，使其大小与默认大小不同：

[http://mysite.com/createthumb.php?filename=mypic.jpg&size=2000](http://mysite.com/createthumb.php?filename=mypic.jpg&size=2000)

但是当我将fancybox链接更改为以下内容时：

`<a href='createthumb.php?filename=mypic.jpg&size=2000' class='fancybox' rel='lightbox[pics]' title=':: [ ]'><span></span><img src='createthumb.php?filename=mypic.jpg' alt='Loading...' /></a>`

现在，fancybox 阻塞，链接只是作为没有任何灯箱的图像提供。即使我更改代码以使其甚至不查看大小参数也是如此。换句话说，只是将“&size=2000”添加到我的链接末尾似乎会使fancybox 完全失去平衡。

关于为什么会这样或我如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T08:27:10.100

该脚本无法通过查看您的链接来猜测内容类型。您有 3 个选项：

1）通过在末尾附加图像扩展名来更改链接，以便脚本可以检测到 -

```
<a href='createthumb.php?size=2000&filename=mypic.jpg' class='fancybox' .. 
```

2) 使用 CSS 类名来指定内容类型 -

```
<a href='..' class='fancybox fancybox.image' .. 
```

3) 初始化时设置类型 -

```
$(".fancybox").fancybox({type : 'image'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T23:19:10.150

看起来 fancybox 正在检查 URL 的结尾以确定它是否是图像。将您的网址更改为`createthumb.php?size=2000&filename=mypic.jpg`

[https://github.com/fancyapps/fancyBox/blob/master/source/jquery.fancybox.js](https://github.com/fancyapps/fancyBox/blob/master/source/jquery.fancybox.js) （第767行）

# ios - 动态填充 pathForResource

> ID：13241959
> 
> 赞同：0
> 
> 时间：2012-11-05T23:16:41.893
> 
> 标签：ios, uitableview

我今天有严重的大脑问题。我正在将数据`ViewController`从 a传递到 a 中`UITableView`。基本上我想要实现的是动态地填充`pathForResource@"dynamicallypopulated"`来自的内容`UITableView`（然后它将继续获取关联的 txt 文件）。当我单步执行代码时，`NULL`即使它设置在它上面，我也可以输出它。

编码：

```
 NSString *location = self.animalTitle;

    NSLog(@"path : %@",animalTitle);
    NSLog(@"path : %@",location);

    //initWithFormat:@"Your favorite color is %@", favoriteColorTextField.text

    NSString *path = [[NSBundle mainBundle] pathForResource:[location to be dynamic!!! what should I put here?] ofType:@"txt"]; 
```

提前致谢！

杰里米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T06:53:21.847

呃。

我解决了。代码没有任何问题。它与我带来的文件有关，前提是内容被缓存并且项目需要很好的清理......具有讽刺意味的是，这确实是我首先要做的。不过，下面是已完成且正在运行的代码。

```
 NSString *path = [[NSBundle mainBundle] pathForResource:animalTitle ofType:@"txt"]; 
```

布赖恩放屁解决了。

谢谢！

# bash - 如何在 UNIX 上获得用户的友好用户名？

> ID：13241964
> 
> 赞同：7
> 
> 时间：2012-11-05T23:17:18.640
> 
> 标签：bash, unix

我想获得“友好”名称，而不是用户名，至少如果给定用户存在这样的字符串。我尝试过的事情：

```
whoami
jamesarosen

id -un
jamesarosen

id -p
uid jamesarosen
groups  staff com.apple.access_screensharing ...

id -P
jamesarosen:********:501:20::0:0:James A. Rosen:/Users/jamesarosen:/bin/bash 
```

最后一个有我正在寻找的信息，但我不想把它解析出来，特别是因为我不太相信格式（特别是`:`s 的数量）将在操作系统之间保持一致。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-05T23:24:24.443

### 解析 GECOS 字段以获取用户的全名

/etc/passwd 的格式和大部分[GECOS 字段](http://en.wikipedia.org/wiki/Gecos_field)在类 Unix 系统中都非常标准化。如果您发现异常，请务必告诉我们。同时，在类 Unix 系统上获得所需内容的最简单方法是使用*getent*和*cut*来解析 GECOS 字段。例如：

```
getent passwd $LOGNAME | cut -d: -f5 | cut -d, -f1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T23:23:35.327

我知道的唯一方法是解析它：

```
grep -P "^$(whoami):" /etc/passwd | cut -f5 -d: 
```

您可以非常确定 /etc/passwd 的格式

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T23:47:02.477

您可以使用`finger`以下方式获取该信息：

```
finger `id -un` | head -1 | cut -d: -f3- 
```

它的优点（或缺点，取决于您的要求）也将为非本地用户检索信息。

如果您只想从中获取信息`/etc/passwd`，您很可能必须以一种或另一种方式解析文件，正如其他人已经提到的那样。我个人更喜欢`awk`这项任务：

```
awk -F: -vid=`id -u` '{if ($3 == id) print $5}' /etc/passwd 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T14:20:13.710

看看`/etc/passwd`文件。该文件向您展示了用户信息的存储方式。您的用户信息可能会或可能不会存储在此处（Unix 使用几种不同的数据库来存储用户），但格式是相同的。

基本上，Unix 使用用户 ID (UID) 来存储用户是什么。下一个条目是旧密码条目，然后是 UID、主要组 ID、[GECOS](http://en.wikipedia.org/wiki/Gecos_field)字段、`$HOME`目录和用户的 shell。（在 MacOS 的命令中显示了三个额外的条目`id -P`。我不知道它们是什么，但它们使 GECOS 字段成为第八个字段而不是第五个字段）。

在您的系统上使用该`id -P`命令为您提供了此条目。一些系统使用`getent`甚至`getpwent`作为命令。你需要做的是解析这个条目。每个字段由冒号分隔，因此您需要第五个或第八个条目（取决于您必须使用的命令）。

`awk`and`cut`命令可以很好地做到这一点。`cut`可能更有效，但`awk`更常见，所以我倾向于使用它。

在`awk`中，标准字段分隔符是*空格*，但您可以使用`-F`参数来更改它。在 Awk 中，每行中的每个字段都有一个数字，并且前面有一个美元符号。该`$0`字段是整行。

使用`awk`，你得到：

```
id -P | awk -F: '{print $8}' 
```

这表示接受`id -P`命令，并将`:`用作字段分隔符，并打印出第八个字段。花括号将所有*AWK 程序*括起来，并且需要单引号来防止 shell 解释`$8`.

在 BASH 中，您可以使用`$( )`来运行命令并返回其输出，因此您可以设置环境变量：

```
$USER_NAME=$(id -P | awk -F: `{print $8}`)
echo $USER_NAME 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-13T00:53:48.227

至少在 macOS 上（可能还有其他 *BSD-alikes），您可以使用：`id -F`来获取全名。

# google-apps-script - 跨多次运行处理所有文件和文件夹的算法

> ID：13241965
> 
> 赞同：2
> 
> 时间：2012-11-05T23:17:19.577
> 
> 标签：google-apps-script

我注意到新的 Docslist[令牌](https://developers.google.com/apps-script/class_token)和`get*ForPaging()`现在可用的选项，但我仍在努力使用一种算法来处理任意大文件/文件夹树的“所有文件和文件夹”。

假设一个基于 Google Drive 的网络文件系统有*n 个*文件和文件夹。使用 Google Apps 脚本需要多次运行 6 分钟。每晚我需要在起始文件夹下的子文件夹树中处理超过 30 天的所有文件。我只需要处理每个文件一次（但我的函数是幂等的，所以我不介意我是否再次针对文件运行）。

我有我的递归算法工作，但我缺少的是一种拥有占位符的方法，这样我每次调用脚本时都不必从文件夹树的顶部开始。在六分钟内，我只浏览了几百个文件夹和几千个文件。

我的问题是我可以存储什么索引以及如何从下一次中断的地方开始？

我曾考虑过存储令牌或最后完成的文件夹路径“/mytop/sub4/subsub47/”，但这对我进行另一次调用有何帮助？如果我从那里开始，它会错误地从那里沿着树向下工作并且错过兄弟姐妹和祖先文件夹。

我已经考虑过“查找”方法并使用“之前：2012/10 ...”样式搜索，但没有办法将其限制为我的树中的文件（只有一个文件夹）。

我没有粘贴我的代码，因为它只是标准的递归 getFolders/getFiles，实际上与问题的核心无关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T10:35:22.653

我将创建一个我必须处理的文件夹数组并将其全部保存以备将来运行。既然您说重复处理某些文件/文件夹没有问题，您甚至不需要假停止您的功能。你可以让它每次都超时。

像这样的东西：

```
var folders = null;

//call this to start the process or set the property manually
function start() {
  folders = ['id-of-the-starting-folder'];
  work();
}

//set this to run on the trigger
function work() {
  if( folders == null )
    folders = ScriptProperties.getProperty('folders').split(',');

  while( folders.length > 0 ) {
    workOnFolder(folders[0]);
    folders.shift(); //remove the 1st element
    ScriptProperties.setProperty('folders', folders.join());
  }
  //remove the trigger here
}

function doFolderLater(folder) {
  folders.push(folder.getId());
}

function workOnFolder(id) {
  var folder = DocsList.getFolderById(id);
  folder.getFolders().forEach(doFolderLater);
  folder.getFiles().forEach(workOnFile);
}

function workOnFile(file) {
  //do your thing
} 
```

# java - 使用 java.nio.Files 在 Linux 下更改文件所有者组

> ID：13241967
> 
> 赞同：17
> 
> 时间：2012-11-05T23:17:50.107
> 
> 标签：java, linux, file, permissions

我有一台 Linux 服务器，我正在为我的服务器上的多个网站运行 Java 中的图像调整大小作业。网站文件由不同的操作系统用户/组拥有。新创建的缩略图/预览归运行调整大小作业的用户所有。现在我正在搜索如何在我的调整大小程序中更改新创建的预览/缩略图的文件所有者并遇到了这个问题：

```
java.nio.file.Files.setOwner(Path path, UserPrincipal owner); 
```

如果是 Windows，这确实可以解决我的问题，但是由于 Linux 文件有一个用户和一个组作为所有者，所以我有点麻烦。不幸的是，给定的方法似乎只会改变文件的用户所有权。组所有权仍然属于运行我的 Java 调整大小作业的用户组。

这些网站由不同的组拥有，因此无法将我的调整大小作业用户添加到一个组中。我还想避免系统调用并在我的文件上`ProcessBuilder`执行 a 。`chown`

我确实需要指出，可以通过网站访问创建的文件（预览/缩略图），更改组所有权并不是关键任务，但我希望它尽可能干净。

**关于如何仅使用 Java 更改 Linux 中文件的组所有权的任何建议？**

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-11T20:37:23.070

感谢 Jim Garrison 为我指明了正确的方向。这是代码，它终于为我解决了这个问题。

**检索文件的组所有者**

```
File originalFile = new File("original.jpg"); // just as an example
GroupPrincipal group = Files.readAttributes(originalFile.toPath(), PosixFileAttributes.class, LinkOption.NOFOLLOW_LINKS).group(); 
```

**设置文件的组所有者**

```
File targetFile = new File("target.jpg");
Files.getFileAttributeView(targetFile.toPath(), PosixFileAttributeView.class, LinkOption.NOFOLLOW_LINKS).setGroup(group); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-02-17T19:01:38.880

我错过了一个完整的解决方案，它来了（其他答案和评论的组合）：

```
Path p = Paths.get("your file's Path");
String group = "GROUP_NAME";
UserPrincipalLookupService lookupService = FileSystems.getDefault()
                .getUserPrincipalLookupService();
GroupPrincipal group = lookupService.lookupPrincipalByGroupName(group);
Files.getFileAttributeView(p, PosixFileAttributeView.class,
                LinkOption.NOFOLLOW_LINKS).setGroup(group); 
```

请注意，只有文件的所有者才能更改其组，并且只能更改为他所属的组...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T23:36:30.693

Take a look at the package `java.nio.file.attributes` and class`PosixFilePermissions`. This is where you can manipulate group permissions.

# liferay - Liferay Autologin：映射用户与将用户添加到 Liferay

> ID：13241970
> 
> 赞同：0
> 
> 时间：2012-11-05T23:17:59.127
> 
> 标签：liferay, liferay-6

拜托，你能给我你对这个问题的看法吗？

我已经完成了一个自动登录，它针对我的旧系统验证用户名和密码。

验证用户后，我有两个选择：

1.  将用户（如果不存在）添加到 Liferay（并分配组）或
2.  将经过验证的用户与 3 或 4 个 liferay 用户进行映射。

如果我的数据库大约有 10.000 个用户，但我只有 3 或 4 个角色，我认为第二种选择会更好，但是，一旦用户使用 liferay 用户凭据登录，欢迎消息会发生什么情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T07:17:39.670

伊万，

您需要在 liferay 中创建所有用户，因为登录时我们使用屏幕名称或电子邮件地址（必须是唯一的并且存在于数据库中），而且在登录之前我们无法检查分配给用户的角色并且我们无法获取来自liferay的相同角色的用户（可能会影响liferay的安全措施）。关于欢迎消息它由使用当前loggeIn用户名的主题（速度模板）管理，无法管理，所以我们不能根据角色使用相同的用户登录名显示不同的名称。

谢谢

# c# - 使用可选参数按 ID 获取

> ID：13241971
> 
> 赞同：0
> 
> 时间：2012-11-05T23:17:59.677
> 
> 标签：c#, get, asp.net-web-api

在 ASP.NET Web API 中，我修改了默认的 GET 操作以接受一个可选参数，该参数将声明获取对象的深度：

```
 public ObjectModel Get(int id, int? loadType = 1)
    {
        if (loadType.Value == 1)
        {
            return GetDeepObjectModel(id);
        }
        else
        {
            return GetShallowObjectModel(id);
        }
    } 
```

给定默认路由：

```
 config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional },
            constraints: new { id = @"\d+" }
        ); 
```

我对有效请求有疑问：

```
 https://www.mysite.com/api/objects/1234?loadType=1 
```

会起作用，但我也希望同样的操作适用于基本 get - 考虑 loadType 参数是可选的：

```
 https://www.mysite.com/api/objects/1234 
```

对于第二个请求，我得到一个 404 not found。当 id 与可选参数配对时，它似乎没有被计为匹配变量。

我在这里缺少什么吗？我非常不想开始添加新路由来解决这个问题，因为我使用 MVC 的经验告诉我，添加路由很快就会失控。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:41:47.410

我不能完全确定这一点，但它似乎是我的默认值

```
 int? loadType = 1 
```

参数导致问题。如果我将默认值更改为*null*

```
 int? loadType = null 
```

并检查设置默认值的操作

```
 if (!loadType.HasValue)
    {
        loadType = 1;
    } 
```

请求的两个版本都正确地定向到预期的操作。

# shell - 从 gdb 获取脚本

> ID：13241972
> 
> 赞同：1
> 
> 时间：2012-11-05T23:18:01.430
> 
> 标签：shell, gdb

在工作中在我的系统上调试或执行程序之前，我必须获取一个文件，该文件包含许多特定于每个项目的路径和设置。有没有办法从 gdb 做到这一点？我尝试将其放入工作目录中的 .gdbinit 文件中，但这似乎不起作用。我试图通过键入来查看是否设置了环境变量

(gdb) 外壳回显 $MY_VAR

它是空白的。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T04:06:10.103

基本上要在命令提示符下设置环境变量，可以使用`set environment varname [=value]`. 更多信息在[这里](http://sourceware.org/gdb/onlinedocs/gdb/Environment.html#Environment)。由于您已经记下要设置大量路径，因此您可以将它们添加到文件中`myGdbSrc`，然后使用`source [-s] [-v] filename`. [您可以在此处](http://sourceware.org/gdb/onlinedocs/gdb/Command-Files.html)找到有关加载文件的详细信息。

我已经尝试过它们并且它有效。
HTH。

* * *

PS：我已经在 SUSE Linux 上的 GNU GDB 6.6 版本上尝试过。但是，它必须适用于所有版本，因为它似乎是基本命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T07:03:22.827

在加载 gdb*之前*编写一个包装脚本来获取您的设置如何？

例如一些简单的例子：

```
#!/bin/sh

source my-script-which-sets-up-the-environment
gdb $* 
```

当然，这也可以向 gdb 调用添加参数以设置路径、加载 gdb 脚本等。

# mathematical-optimization - 如何跨时间划分数据？

> ID：13241973
> 
> 赞同：0
> 
> 时间：2012-11-05T21:03:53.647
> 
> 标签：mathematical-optimization, sql-types

实际上，我在使用 T-SQL 时遇到过这个问题，但它根本是一个逻辑和数学问题，所以我决定在这里试试运气。

我所拥有的是以下格式的一些数据：

```
Date                 Score
2012-11-01 12:11:50  12
2012-11-02 15:20:20  42   
...
2012-11-15 20:32:21  21 
```

所以，我们有准确的日期和每条记录的一些分数。接下来，用户输入一个数字 (1,2,3,...)，该数字表示在多少个相等的时间段内对所有记录进行了潜水并对其中的分数求和。

所以，我现在正在做的是（假设用户想要 3 个句点）：

1.  获取第一条和最后一条记录的日期并计算它们之间的天数差异
2.  将结果（假设我们有 30 天）除以期间的数量，以获得每个期间我有多少天。
3.  计算每个周期的第一个日期，如**第一个日期+（周期中的天数 * 周期序列号）**
4.  检查哪个时期是日期并在那里总结分数

起初这是可行的，但后来我遇到了很多问题，在这里我应该说，使用**天**作为周期测量非常重要，但是如果无法使用天来解决，我们可以使用小时或分钟来最小化错误。

以下是问题：

1.  如果我有一条记录和多个时期，我的解决方案不起作用，因为在**第 2 步**中我们有（例如用户想要 3 个时期）1/3=0（因为我们正在处理天数和 1/3=~0.333 days=0（在 T-SQL 和 BIGINT 变量的上下文中）。因此，在**第 3 步**中，每个时期的第一个日期的计算将给我们三个相同的第一个日期。
2.  如果我的间隔天数较小（例如第一个日期是 2012-12-01，最后一个日期是 2012-12-03，差异是三天），那么我将再次遇到同样的问题，如 T-例如 SQL 5/6 又是 0。
3.  如果我有 10 个时期，但 11 天，那么其中一个时期将大 1 天。

因此，任务是将记录划分为相等的时间段，并对每个时间段的得分求和。我知道我的解决方案有多糟糕（使用这些日子）​​，但我很开放，会欢迎每一个想法和建议。

# android - 我怎样才能在左下角获得我的按钮？

> ID：13241974
> 
> 赞同：0
> 
> 时间：2012-11-05T23:18:10.357
> 
> 标签：android, android-relativelayout

我试图让按钮位于左下角。为什么这行不通？我尝试了 2 个小时，但无法实现。:(

```
 RelativeLayout rl = new RelativeLayout(this);
    RelativeLayout.LayoutParams firstImageParams = new RelativeLayout.LayoutParams(
            android.view.ViewGroup.LayoutParams.MATCH_PARENT,
            android.view.ViewGroup.LayoutParams.MATCH_PARENT);
    Button b = new Button(this);
    b.setText("take photo");
    b.setGravity(Gravity.BOTTOM | Gravity.LEFT);
    b.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Toast.makeText(getApplicationContext(), "Select Area of Interest", Toast.LENGTH_SHORT).show();
        }
    });
    rl.addView(mGrabView,firstImageParams);
    rl.addView(b);
    rl.setGravity(Gravity.CENTER_HORIZONTAL | Gravity.CENTER_VERTICAL);
    this.addContentView(rl,new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:32:29.217

您需要将布局参数添加到按钮而不是重力。

```
RelativeLayout rl = new RelativeLayout(this);

Button b = new Button( this );
b.setText( "take photo" );
b.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        Toast.makeText(getApplicationContext(), "Select Area of Interest", Toast.LENGTH_SHORT).show();
    }
});

RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
    RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.FILL_PARENT);
lp.addRule( RelativeLayout.ALIGN_PARENT_BOTTOM, true );
lp.addRule( RelativeLayout.ALIGN_PARENT_LEFT, true );
rl.addView( b, lp ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T23:33:33.520

你为什么不使用 XML 布局呢？它们通常更容易理解和制作。

# ruby - Rails 私信如何创建对话视图？

> ID：13241978
> 
> 赞同：1
> 
> 时间：2012-11-05T23:18:27.650
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.2

我正在将此 gem 用于私人消息：[https ://github.com/jongilbraith/simple-private-messages](https://github.com/jongilbraith/simple-private-messages)

我想创建一个线程对话，而不是脚手架提供的电子邮件对话。

例如，用户 A 向用户 B 发送了 10 条消息。用户 A 也向用户 C 发送了 10 条消息。

而不是遍历所有消息。（电子邮件查看）我想创建一个威胁，例如：

**收件箱**

```
Conversation with User A (10 messages)
Conversation with User C (10 messages) 
```

当点击对话时，消息应该在日期之后排序。所以这就像一次谈话。

消息表：

```
id
sender_id
recipient_id
sender_deleted
recipient_deleted
subject
body
read_at
created_at
updated_at 
```

如何创建这些视图？如何对消息进行分组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T23:45:57.843

简短的回答是：你不能用那个宝石。您必须扩展它并添加一个对话模型，然后在用户和消息之间架起桥梁。

相反，我建议您使用这个 gem：

[https://github.com/ging/mailboxer](https://github.com/ging/mailboxer)

比您当前的宝石更强大，而且它带有开箱即用的对话。我以前用它来模仿类似 gmail 的视图。

从指南：

```
#alfa wants to retrieve all his conversations
alfa.mailbox.conversations

#A wants to retrieve his inbox
alfa.mailbox.inbox

#A wants to retrieve his sent conversations
alfa.mailbox.sentbox

#alfa wants to retrieve his trashed conversations
alfa.mailbox.trash 
```

非常简单：

```
current_user.mailbox.conversations.each do |convo|
  convo.subject
  ...
end 
```

# php - PHP - bindtextdomain 停止在本地化网站的某些页面上工作

> ID：13241981
> 
> 赞同：1
> 
> 时间：2012-11-05T23:18:44.550
> 
> 标签：php, gettext

我希望有人可以帮助我解决这个问题。我的网站已本地化为德语、法语、西班牙语和英语。一切似乎都正常工作，但在测试期间并且经常是零星的，本地化文本不会出现，除了字符串代码出现。变量 $language 已正确设置，因为图像是特定于语言的并且它们始终显示。

我正在使用的代码如下：

```
// I18N support information here
putenv("LANG=" . $language); 
setlocale(LC_ALL, $language);

// Set the text domain as "messages"
$domain = "messages";
bindtextdomain($domain, "./locale"); 
bind_textdomain_codeset($domain, 'UTF-8');

textdomain($domain); 
```

我似乎注意到的一件事是这个问题只发生在以下格式的页面中： [http](http://example.com/product/product_name.php) ://example.com/product/product_name.php 它总是在格式为[http://example.com/page.php的页面中工作](http://example.com/page.php)

任何人都可以帮助我，甚至可以给我有关如何调试的详细信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:50:20.547

您需要确保您的[bindtextdomain](http://php.net/manual/en/function.bindtextdomain.php)路径是正确的。我会在你的引导文件中建议这个：

```
define('ROOT_PATH', dirname(__FILE__)); 
```

然后在你的脚本中

```
bindtextdomain($domain, ROOT_PATH . '/locale'); 
```

这样如果你进入一个子文件夹如`product/product_name.php` `bindtextdomain`不会尝试在`locale`文件夹中找到该文件`product`夹​​。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-30T07:52:33.610

谢谢你，尼古拉斯！我遇到了同样的问题，解决方案是在 bindtextdomain 的第二个参数中始终使用绝对路径

# delphi - 使用整数作为主题

> ID：13241982
> 
> 赞同：-1
> 
> 时间：2012-11-05T23:18:49.333
> 
> 标签：delphi, integer, groupbox

尝试使用一些主模板来根据主编辑框中的数字更改组框的可见性。 `EditDay`是编辑框，里面只有数字

```
day:=DayOfTheYear(Now); 
EditDay.Text:=day; 
```

所以它基本上是一年中的一天。无论如何，我一年中的每一天都需要一个组框（带有一些备忘录）。因为这是一个带有记录的文件，另一个程序会读取每天不同的信息，所以我首先需要那个文件编写器，所以我什至可以制作一个。这就是这个因为我正在做一个记录文件，在我写入文件之前必须先填满所有框，所以我需要让 Groupboxes 一次可见，每个一个我在 main 中指定的那一天`TEdit`。现在我坚持设置分组框的可见性；下面的代码给了我访问冲突错误。

`x`是`TEdit`named中指定的数字`EditDay`。我想`y`每隔一天做一个，但在 EditDay 盒子里的那一天，除了`x`；

```
x : Integer;     
y : Integer;

procedure TWriteForm.DayCheckTimer(Sender: TObject);
begin
  x:=StrToInt(EditDay.Text);
  y:=Not x;
  (FindComponent('GroupBox'+IntToStr(x)) as TGroupBox).Visible := True;
  (FindComponent('GroupBox'+IntToStr(y)) as TGroupBox).Visible := False; 
```

试图设置 y:=[1..365] 而不是 x; [1..365] - x; 和其他几个，但没有一个起作用。

我哪里错了？.. 任何帮助将不胜感激。:))

[我有点初学者，是的..]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:48:43.313

查看y:=不是x；在调试器中 x=1 将是 y=-2，您将找不到具有此名称的 Compoentr。

您将不得不迭代您的组件

```
For i := 1 to mCount 
```

并按条件设置可见性

```
(FindComponent('GroupBox'+IntToStr(i)) as TGroupBox).Visible := y = i; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T01:13:00.110

这里有一个小示例项目来处理很多（365）条记录。

```
unit RecordEdit_ViewU;

interface

uses
  SysUtils,
  Controls, Forms, Dialogs, StdCtrls, System.Classes;

type
  TPerson = record
    Firstname : string[50]; // shortstring !!
    Lastname : string[50];  // shortstring !!
  end;

  TRecordEdit_View = class( TForm )
    Current_Edit : TEdit;
    Data_Firstname_Edit : TEdit;
    Data_Lastname_Edit : TEdit;
    Data_Prev_Button : TButton;
    Data_Next_Button : TButton;
    Data_Save_Button : TButton;
    procedure FormCreate( Sender : TObject );
    procedure Current_EditChange( Sender : TObject );
    procedure Data_Prev_ButtonClick( Sender : TObject );
    procedure Data_Next_ButtonClick( Sender : TObject );
    procedure Data_Save_ButtonClick( Sender : TObject );
  private
    FData :    array [1 .. 365] of TPerson;
    FCurrent : Integer;
    procedure SetCurrent( const Value : Integer );
    procedure InitData;
    procedure StoreCurrent;
    procedure LoadCurrent;
    procedure SaveData;
  public
    property Current : Integer read FCurrent write SetCurrent;
  end;

var
  RecordEdit_View : TRecordEdit_View;

implementation

{$R *.dfm}

procedure TRecordEdit_View.Current_EditChange( Sender : TObject );
begin
  Current := StrToIntDef( Current_Edit.Text, 0 ); // convert text to integer
end;

procedure TRecordEdit_View.Data_Next_ButtonClick( Sender : TObject );
begin
  Current := Current + 1; // next record
end;

procedure TRecordEdit_View.Data_Prev_ButtonClick( Sender : TObject );
begin
  Current := Current - 1; // prev record
end;

procedure TRecordEdit_View.Data_Save_ButtonClick( Sender : TObject );
begin
  SaveData;
end;

procedure TRecordEdit_View.FormCreate( Sender : TObject );
begin
  InitData;
end;

procedure TRecordEdit_View.InitData;
begin
  FCurrent := Low( FData ); // first record
  LoadCurrent;              // load data from record
end;

procedure TRecordEdit_View.LoadCurrent;
begin
  // Data from record to controls
  Data_Firstname_Edit.Text := FData[Current].Firstname;
  Data_Lastname_Edit.Text  := FData[Current].Lastname;
  // Update the Current-Edit
  Current_Edit.Text := IntToStr( Current );
end;

procedure TRecordEdit_View.SaveData;
begin
  ShowMessage( 'Needs to be implemented!' );
end;

procedure TRecordEdit_View.SetCurrent( const Value : Integer );
begin
  // check, if we have a change and if we can change to the new index
  if ( Value <> Current ) and ( Value >= Low( FData ) ) and ( Value <= High( FData ) )
  then
    begin
      StoreCurrent;      // store data from controls
      FCurrent := Value; // change current index
      LoadCurrent;       // load data from record
    end;
end;

procedure TRecordEdit_View.StoreCurrent;
begin
  // Data from controls to record
  FData[Current].Firstname := Data_Firstname_Edit.Text;
  FData[Current].Lastname  := Data_Lastname_Edit.Text;
end;

end. 
```

和形式

```
object RecordEdit_View: TRecordEdit_View
  Left = 0
  Top = 0
  Caption = 'RecordEdit_View'
  ClientHeight = 337
  ClientWidth = 635
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  OnCreate = FormCreate
  PixelsPerInch = 96
  TextHeight = 13
  object Current_Edit: TEdit
    Left = 107
    Top = 16
    Width = 75
    Height = 21
    TabOrder = 0
    Text = 'Current_Edit'
    OnChange = Current_EditChange
  end
  object Data_Firstname_Edit: TEdit
    Left = 80
    Top = 56
    Width = 129
    Height = 21
    MaxLength = 50
    TabOrder = 1
    Text = 'Data_Firstname_Edit'
  end
  object Data_Lastname_Edit: TEdit
    Left = 80
    Top = 83
    Width = 129
    Height = 21
    MaxLength = 50
    TabOrder = 2
    Text = 'Data_Lastname_Edit'
  end
  object Data_Prev_Button: TButton
    Left = 80
    Top = 16
    Width = 21
    Height = 21
    Caption = '<'
    TabOrder = 3
    OnClick = Data_Prev_ButtonClick
  end
  object Data_Next_Button: TButton
    Left = 188
    Top = 16
    Width = 21
    Height = 21
    Caption = '>'
    TabOrder = 4
    OnClick = Data_Next_ButtonClick
  end
  object Data_Save_Button: TButton
    Left = 80
    Top = 118
    Width = 129
    Height = 25
    Caption = 'Save Data'
    TabOrder = 5
    OnClick = Data_Save_ButtonClick
  end
end 
```

[您可以在此处](https://www.dropbox.com/s/08er5pbw15ouhk6/RecordEditDemo.zip)获取完整的源代码和可执行文件

# css - 水平和垂直居中 div

> ID：13241994
> 
> 赞同：0
> 
> 时间：2012-11-05T23:19:34.253
> 
> 标签：css, centering

我将蓝色 div 设置为`display: inline-block;`使其收缩到其内容。我试图将蓝色 div 居中在红色 div 的中间。

```
<a href="www.google.com">hi</a>
<div class="dim">
    <div class="test">
        <div> test </div>
        <div> 2nd </div>        
    </div>
</div>​

.dim {
    height:100%;
    width:100%;
    position:fixed;
    left:0;
    top:0;
    z-index:1 !important;
    background-color:red;
    opacity: 0.5;
}

.test {
    border: solid;
    display: inline-block;
    background-color:blue;
} 
```

[​jsfiddle](http://jsfiddle.net/NVa65/3/) 代码链接

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T00:49:21.427

我在你的小提琴中试过这个。有效。

```
.test {
    border: solid;
    display: inline-block;
    background-color:blue;
    position: fixed;
    margin-top: 50%;
    margin-left:50%
} 
```

​</p>

一旦你调整 div 的大小，它就会中断。如果您没有为您的 div 设置大小，那么它在没有固定大小的情况下保持在中心的唯一方法是使用 JavaScript。

但是，[您不必费力寻找更好的答案。](http://css-tricks.com/quick-css-trick-how-to-center-an-object-exactly-in-the-center/)

# tfs - 在转换中覆盖 system.assignedto 值

> ID：13241997
> 
> 赞同：0
> 
> 时间：2012-11-05T23:19:57.253
> 
> 标签：tfs

我有一条规则，在之前的转换中为 System.AssignedTo 设置了一个默认值。

现在，当状态发生变化时，我想将该值覆盖给不同的用户。

DEFAULT 不起作用，因为那里已经有一个值。我似乎无法覆盖该值。有谁知道这是怎么做到的？我试过空然后默认..但该字段也是必需的，所以空会引发错误。无论如何，这也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:01:32.000

在您的规则中，尝试从 Value 中复制，其中值文本是键入的名称。或者，在 VS 中编辑工作项模板时来自 currentuser 的 DEFAULT（如果这一切都有意义的话）。