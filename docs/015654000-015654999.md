# StackOverflow 问答 15654000-15654999

# d3.js - d3.js 默认axis.tickFormat为24小时制

> ID：15654000
> 
> 赞同：8
> 
> 时间：2013-03-27T07:50:44.310
> 
> 标签：d3.js

我真的很喜欢axis.tickFormat在随时间绘制事物时的默认行为，并且像这样创建我的x轴：

```
var xAxisBottom = d3.svg.axis().scale(xScale); 
```

我正在使用画笔功能，以便用户可以沿 x 轴缩放，因此它的值必须相应更新。如果用户查看一整年的数据，则以月份为单位是好的。如果用户在一天内查看数据，则以小时和分钟为单位是好的。等等。

好在轴的默认行为是这样的。不好的是它以上午/下午显示时间，我想将其更改为 24 小时制。

我知道我可以根据画笔的当前跨度设置自己的 tickFormat，但在这种情况下，我不知道如何获得如下图所示的内容，其中混合了不同的格式。

![在此处输入图像描述](../Images/fbe637317cd6d826feee0070d881899e.png)

那么，有没有一种简单的方法来获得 24 小时制而不是上午/下午？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T08:54:43.400

不像“调用一行代码”那样容易，但是您可以轻松地滚动自己的时间格式。有关示例，请参见[此处。](http://bl.ocks.org/mbostock/4149176)关键思想是您有一个日期格式列表和一个过滤器函数，如果要使用相关格式，则给定日期，返回 true。在您的情况下，您只需要两个级别，一个显示日期（如果日期是午夜）或时间（如果日期是中午 12 点）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-04T18:10:55.577

值得注意的是，如果您在轴上使用 UTC 时间而不是本地时间，则 d3 在内部调用一组不同的格式化程序。你需要这个：

```
 return (d3.utcSecond(date) < date ? formatMillisecond
          : d3.utcMinute(date) < date ? formatSecond
          : d3.utcHour(date) < date ? formatMinute
          : d3.utcDay(date) < date ? formatHour
          : d3.utcMonth(date) < date ? (d3.utcWeek(date) < date ? formatDay : formatWeek)
          : d3.utcYear(date) < date ? formatMonth
          : formatYear)(date); 
```

而不是上面链接示例中引用的调用。更改是将“ **d3.utc** XXX(date)”替换为“ **d3.time** XXX(date)” 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-04T07:30:02.810

对于 d3 v4 及更高版本。以刻度指定axisBottom的时间

```
//Print ticks for every minute
this.xAxis = axisBottom(this.xScale).ticks(timeMinute.every(1));

//Print ticks for every hour
this.xAxis = axisBottom(this.xScale).ticks(timeHour.every(1)); 
```

否则，您可以勾选格式以将值格式化为 PM

# visual-studio-2010 - 如何在 Visual C++ 2010 中将十六进制（浮点数）转换为十进制数

> ID：15654001
> 
> 赞同：0
> 
> 时间：2013-03-27T07:50:46.283
> 
> 标签：visual-studio-2010, visual-c++

我在 Visual c++ 2010 Win Forms Application 中开发应用程序，我将接收十六进制数据（数据包）并将其存储在富文本框中。接收到的十六进制数据将代表浮点数。例如：浮点数 11.62 将被接收为 4139eb85（这是存储在 RichTextBox 中的字符串）。我想将十六进制数转换为其原始值并显示它。我正在努力将（例如）4139EB85 转换为其原始值 11.62

请尽早帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:01:53.347

不是便携式的，但是：

```
int x = 0x4139eb85;
float y = *reinterpret_cast<float *>(&x); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T07:58:06.483

您可以将字符串解析为`UInt32`，然后用于[`BitConverter::ToSingle`](http://msdn.microsoft.com/en-us/library/system.bitconverter.tosingle.aspx)将字节转换为浮点数：

```
// Convert the hex string into a UInt32 (if necessary)
UInt32 bits = UInt32::Parse("4139EB85", System::Globalization::NumberStyles::HexNumber);
// Convert the bytes of the UInt32 to a Single/float
float f = BitConverter::ToSingle(BitConverter::GetBytes(bits), 0); 
```

# msbuild - 从命令行编译时添加额外的库和包含路径

> ID：15654002
> 
> 赞同：15
> 
> 时间：2013-03-27T07:50:46.570
> 
> 标签：msbuild, c++builder

我正在尝试添加其他路径以供我的项目组在编译期间使用。由于*C++ Builder 2010*使用*msbuild*，我尝试查看文档，并根据我可以找到的内容，*AdditionalLibPaths*应该可以作为属性传递。IE

```
msbuild /p:AdditionalLibPaths=C:\FooBar\Libs /t:build foo.groupproj 
```

但它似乎没有使用我添加的路径。我之前注意到**VC++**和**C++ Builder**之间的某些属性名称在传递给*msbuild*时会有所不同，并且想知道*C++ Builder*是否可能使用其他属性名称来添加额外的 lib 和包含文件夹？

我不想*替换*项目中定义的现有路径，而是附加其他路径。这样做的基本原理是，当项目在我们的构建服务器上构建时，一些库驻留在一个标准化的位置，可能与它在开发机器上的安装位置不同。

*msbuild* acutally 调用一个*msbuild 脚本文件*，该文件又调用其他脚本，包括*.groupproj*使用*标签。我知道使用时会创建一个新的*msbuild实例**标记，所以我知道在我的脚本中运行该任务时我必须添加该属性。**

 **```
<MSBuild Targets="Build" Projects="..\Foo.groupproj" Properties="Config=Debug (property to add additional paths here!)" /> 
```

**更新：**

*C++ Builder*似乎正在使用*IncludePath*和*ILINK_LibraryPath*但设置这些会覆盖项目文件中已定义的路径。由于此文件由 IDE 创建和维护，因此任何使其附加而不是覆盖的更改都将被 IDE 覆盖。这有点奇怪，因为它看起来确实应该附加值

```
<IncludePath>..\FooBar\;$(BDS)\include;$(BDS)\include\dinkumware;$(BDS)\include\vcl;Common Components;..\Config\Config32;$(IncludePath)</IncludePath> 
```

**更新 2：**

在*CodeGear.Cpp.Targets*中，我将自己的名为*AdditionalIncludePaths的**属性*添加到了*PropertyGroup*中，用于处理包含路径。

 ***251号线附近*

```
<PropertyGroup>
        <BCC_NoLink>true</BCC_NoLink>
        <ILINK_OSVersion Condition="'$(ILINK_OSVersion)'=='' And '$(NoVCL)'!='true'">5.0</ILINK_OSVersion>
        <DCC_GenerateCppFiles>true</DCC_GenerateCppFiles>
        <ShowStdOut Condition="'$(ShowStdOut)'==''">$(ShowGeneralMessages)</ShowStdOut>

        <!-- _TCHAR mapping for Uni^H^H^H character selection -->
        <StartupObj Condition="'$(_TCHARMapping)'=='wchar_t'">$(StartupObj)w</StartupObj>
        <ILINK_StartupObjs Condition="'$(ILINK_StartupObjs)'==''">$(StartupObj)</ILINK_StartupObjs>
        <BCC_GenerateUnicode Condition="'$(_TCHARMapping)'=='wchar_t'">true</BCC_GenerateUnicode>
        <!-- Include Paths -->
        <Win32LibraryPath Condition="'$(Win32LibraryPath)'==''">$(BDS)\lib</Win32LibraryPath>
        <IncludePath Condition="'$(CBuilderIncludePath)'!=''">$(IncludePath);$(CBuilderIncludePath)</IncludePath>
                <IncludePath Condition="'$(AdditionalIncludePath)'!=''">$(IncludePath);$(AdditionalIncludePath)</IncludePath>
        <BCC_IncludePath Condition="'$(BCC_IncludePath)'!=''">$(BCC_IncludePath);$(IncludePath)</BCC_IncludePath>
        <BCC_IncludePath Condition="'$(BCC_IncludePath)'==''">$(IncludePath)</BCC_IncludePath>
        <BRCC_IncludePath Condition="'$(BRCC_IncludePath)'!=''">$(BRCC_IncludePath);$(IncludePath)</BRCC_IncludePath>
        <BRCC_IncludePath Condition="'$(BRCC_IncludePath)'==''">$(IncludePath)</BRCC_IncludePath>
        <DCC_IncludePath Condition="'$(DCC_IncludePath)'!=''">$(DCC_IncludePath);$(IncludePath)</DCC_IncludePath>
        <DCC_IncludePath Condition="'$(DCC_IncludePath)'==''">$(IncludePath)</DCC_IncludePath>
        <DCC_UnitSearchPath>$(DCC_IncludePath);$(Win32LibraryPath)</DCC_UnitSearchPath>
        <DCC_ResourcePath>$(DCC_IncludePath)</DCC_ResourcePath>
        <DCC_ObjPath>$(DCC_IncludePath)</DCC_ObjPath>
        <TASM_IncludePath Condition="'$(TASM_IncludePath)'!=''">$(TASM_IncludePath);$(IncludePath)</TASM_IncludePath>
        <TASM_IncludePath Condition="'$(TASM_IncludePath)'==''">$(IncludePath)</TASM_IncludePath> 
```

然后我可以打电话

```
msbuild /t:build /p:AdditionalIncludePaths=C:\Foo\Include foo.groupproj 
```

这工作正常，做我想要的。我只需要对库路径做同样的事情。但我不想像这样破解 Embarcaderos 提供的文件之一。这太荒谬了：P ...没有任何官方属性可以设置用于添加包含路径和库路径吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-01-23T05:37:09.127

对于 VS2013，只需在运行 msbuild 之前定义环境变量：

```
set "INCLUDE=%additional_include_path%;%INCLUDE%"
set "LIB=%additional_lib_path%;%LIB%"
REM use environment variables for INCLUDE and LIB values
set UseEnv=true 
```

参考：MSBuild/Microsoft.Cpp/v4.0/V120/Microsoft.Cpp.targets

```
<Target Name="SetBuildDefaultEnvironmentVariables"
        Condition="'$(UseEnv)' != 'true'">
...
    <SetEnv Name   ="INCLUDE"
        Value  ="$(IncludePath)"
        Prefix ="false" >
       <Output TaskParameter="OutputEnvironmentVariable"             PropertyName="INCLUDE"/>
    </SetEnv> 
```

但看起来像是附加在项目属性中指定的附加包含/lib 目录后面的 INCLUDE 和 LIB。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-05-05T06:13:26.853

有关`include`VS2019 的附加信息，请使用开关`/p:IncludePath=C:\Foo`

要包含多个路径，请在开关上使用双引号和分号：

```
/p:IncludePath="C:\Foo;C:\Bar;C:\Another;$(IncludePath)" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-03T20:41:50.057

在 C++Builder 10 Seattle（截至 2016 年的当前版本）中，我能够通过`ILink_LibraryPath`在运行`msbuild`. 这必须通过 来完成`set ILink_LibraryPath=...`，而不是通过传递属性`/p:...`来完成`msbuild`。

这在自动构建环境中实现了额外的路径，无需替换已在 .cbproj 文件中设置的现有路径，并且不需要在 Embarcadero 提供的文件中进行任何修改。

这种方法的唯一问题是不能保证检查单个路径的顺序 - 即通过环境变量提供的自定义路径附加到 .cbproj 路径或可能放在中间，具体取决于项目设置，并且不一定放置在前面，因此您需要注意不要在项目文件中提到的其他目录中存在冲突的库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-04T15:26:46.937

对于VS2019，我已经测试`msbuild`它不会应用 and 的这些环境变量`INCLUDE`，`LIB`即使你已经设置了它们。根本原因可能是`msbuild`覆盖`INCLUDE`和`LIB`加载和编译时`*.sln`或`*.vcxproj`. 但是，这只是我的假设，因为有关 windows/msbuild 的在线文档很难找到底层原因。

解决方案A：
在我的解决方案中，我在构建项目之前使用`CL`和`LINK`环境变量将include目录和lib目录设置为：`msbuild`

```
set $env:CL="/I\C:\users\user\local\include"
set $env:LINK="/LIBPATH:C:\users\user\local\lib"
...
msbuild *.vcxproj 
```

有关[MSVC 编译器环境变量](https://docs.microsoft.com/en-us/cpp/build/reference/cl-environment-variables?view=msvc-160)`CL`的更多 信息 有关[MSVC 链接器环境变量的更多信息](https://docs.microsoft.com/en-us/cpp/build/reference/linking?view=msvc-160#link-environment-variables)
`LINK`

解决方案 B：
对于您已经指出的另一种可能的解决方案，您可以将选项传递给`msbuild`like：

```
msbuild *.vcxproj /nologo /p:AdditionalIncludePaths="C:\users\user\local"
msbuild *.vcxproj /nologo /p:IncludePath="C:\users\user\local" 
```****

# http - xpages，notes 8.5.3 客户端的嵌入式浏览器，http 基本认证

> ID：15654005
> 
> 赞同：0
> 
> 时间：2013-03-27T07:51:11.220
> 
> 标签：http, authentication, xpages

在 xpage 我有打开外部网页的代码：`window.open(pathToSiteWithHTTPBasicAuthentication)`

当用户在注释嵌入式浏览器中单击此链接时：-在注释 9 中按预期工作，弹出窗口显示并且用户可以输入凭据 -在注释 8.5.3 中弹出不显示并且立即打开带有身份验证错误的页面

我似乎无法在注释 8.5.3 中找到启用身份验证弹出窗口的选项。嵌入式浏览器。我该如何配置它才能工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:51:14.567

这似乎是 Notes9 中修复的问题之一。您可以/应该做的是在 names.nsf 中创建一个帐户文档，然后自动进行身份验证。您可以先手动执行此操作以检查它的适合程度，然后再检查代码中的文档并在丢失时自动创建。还要确保仅在使用基本身份验证时才处理 https，否则有人会盗用您的凭据

# c# - 如何获取字节数组中包含的文件数？

> ID：15654006
> 
> 赞同：1
> 
> 时间：2013-03-27T07:51:19.150
> 
> 标签：c#

我正在使用`ICSharpCode.SharpZipLib.Core`库来压缩我的 C# 代码中的文件。压缩后我将返回一个字节数组。有什么方法可以找到字节数组中的文件数？

我的代码看起来像

```
string FilePath ="C:\HELLO";
 MemoryStream outputMemStream = new MemoryStream();
            ZipOutputStream zipStream = new ZipOutputStream(outputMemStream);
            foreach (var file in files)
            {
                FileInfo fi = new FileInfo(string.Concat(FilePath, file));
                if (fi.Exists)
                {
                    var entryName = ZipEntry.CleanName(fi.Name);
                    ZipEntry newEntry = new ZipEntry(entryName);
                    newEntry.DateTime = DateTime.Now;
                    newEntry.Size = fi.Length;
                    zipStream.PutNextEntry(newEntry);

                    byte[] buffer = new byte[4096];
                    var fs = File.OpenRead(string.Concat(FilePath, file));
                    var count = fs.Read(buffer, 0, buffer.Length);
                    while (count > 0)
                    {
                        zipStream.Write(buffer, 0, count);
                        count = fs.Read(buffer, 0, buffer.Length);  
                    }
                }
            }
            zipStream.Close();
            byte[] byteArrayOut = outputMemStream.ToArray();
            return byteArrayOut; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:00:07.490

字节数组就是它的本来面目——一个字节序列。无法仅通过查看字节数组来了解“文件数”。您需要解压缩字节数组。

但是，当您在压缩时遍历一组文件时，很容易为每个处理的文件增加一个变量并返回它。

*为了解释评论，使用`out`参数而不是`Tuple`*

```
numFiles = 0;    // This is an out parameter to the method
foreach (var file in files)
{
    FileInfo fi = new FileInfo(string.Concat(FilePath, file));
    if (fi.Exists)
    {
        numFiles++;
        ...
    }
}

...
return byteArrayOut; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:00:25.083

您可以返回具有 2 个属性的对象：压缩字节数组和文件数。此外，使用 string.Format（或 Path.Combine）而不是 string.Concat

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T08:06:55.290

[http://msdn.microsoft.com/en-us/library/system.io.directory.getfiles(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.io.directory.getfiles(v=vs.80).aspx)

利用

```
var filesCount = 0; 
```

方法外

和

```
filesCount = Directory.GetFiles(path, "*.*", SearchOption.AllDirectories).Length 
```

拉链前

# macos - 更改“最后打开”日期

> ID：15654010
> 
> 赞同：4
> 
> 时间：2013-03-27T07:51:40.033
> 
> 标签：macos

有没有办法更改`kMDItemLastUsedDate`OS X 上文件的“上次打开”日期（我认为）？理想情况下，这将使用 C API 调用，但 Objective-C 很好。当我查找有关如何设置元数据属性的文档时，我得到了有关创建[Spotlight Importers](http://developer.apple.com/library/mac/#documentation/Carbon/Conceptual/MDImporters/Concepts/WritingAnImp.html#//apple_ref/doc/uid/TP40001275-208147)的信息，这似乎不太正确。

这是针对备份程序的——从备份恢复后，“最后打开”的日期应该和原来的一样。

为了澄清，我**不**想要`atime`from `stat()`。那是不同的价值。如果你不相信`touch`，你可以自己做一个实验。`mdls`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-27T07:56:38.220

使用标准的 Unix`utimes()`或`futimes()`函数。从手册页：

> **描述**
> 
> ```
>  The access and modification times of the file named by path or referenced
>  by fildes are changed as specified by the argument times. 
> ```

# scala - 迄今为止的 Scala Unix 时间戳

> ID：15654016
> 
> 赞同：2
> 
> 时间：2013-03-27T07:52:19.620
> 
> 标签：scala, datetime

我正在尝试在 scala 中使用 nscala-time 从 unix 时间戳中获取格式化的日期对象。时间戳来自 Node.js 的 Thrift，它确实返回了一个有效的时间戳。我尝试了多种方法来尝试将时间戳转换为 a `LocalDateTime`or `DateTime`，任何不返回 1970 年的东西。

`scala println(event.uid.toDateTime);`

我得到：

`1970-01-16T11:59:30.603-07:00`

时间戳为`1364370603`.

关于 scala 的时间/数据库的文档很少。我假设我没有正确使用图书馆，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T07:56:19.543

尝试将时间戳乘以 1000。我不知道 nscala-time，但其他日期/时间库（Joda？）使用毫秒，而（通常）unix 纪元以秒为单位返回

# java - Quartz 调度器不工作

> ID：15654017
> 
> 赞同：0
> 
> 时间：2013-03-27T07:52:23.337
> 
> 标签：java, cron, quartz-scheduler, scheduler

我创建了一个调度程序：

```
SchedulerFactory sf = new StdSchedulerFactory();
Scheduler sched = sf.getScheduler();
Trigger trigger1 = (Trigger) 
newTrigger().withSchedule(DailyTimeIntervalScheduleBuilder.dailyTimeIntervalSchedule().startingDailyAt(new TimeOfDay(8,0)).endingDailyAt(new TimeOfDay(11,0)).withInterval(1, IntervalUnit.DAY));

Date ft = sched.scheduleJob(job, trigger1); 
```

但它抛出了一个异常：

```
Exception in thread "main" java.lang.ClassCastException: org.quartz.TriggerBuilder cannot be cast to org.quartz.Trigger 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T07:56:42.623

[您忘记在TriggerBuilder](http://quartz-scheduler.org/api/2.0.0/org/quartz/TriggerBuilder.html)上调用`.build();`方法。代码应如下所示：

```
newTrigger().withSchedule(
 DailyTimeIntervalScheduleBuilder.dailyTimeIntervalSchedule()
    .startingDailyAt(new TimeOfDay(8,0))
       .endingDailyAt(new TimeOfDay(11,0))
          .withInterval(1, IntervalUnit.DAY))
             .build(); 
```

# jsf - 如何更新特定行 DataTable

> ID：15654022
> 
> 赞同：0
> 
> 时间：2013-03-27T07:52:50.147
> 
> 标签：jsf, jsf-2, primefaces, datatable, row

在数据表中，我想动态更新每一行。

我在`p:poll`这里使用自动更新（用于保持数据表更新）。我的主要目标是在数据（记录）发生变化时动态更新它

我试过这个。

```
<p:column headerText="Vehicle Info" width="65" id="vehicleInfo">
           <h:outputText id="txt_count"
                         value="count #{vehicleController.count}"/>
</p:column> 
```

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:33:01.047

您是否尝试过示例中的选择器：http: [//www.primefaces.org/showcase/ui/selectors.jsf](http://www.primefaces.org/showcase/ui/selectors.jsf)

# iphone - 如何设计阅读器应用的应用内购买？

> ID：15654024
> 
> 赞同：-2
> 
> 时间：2013-03-27T07:52:51.257
> 
> 标签：iphone, ios, ipad, in-app-purchase

我正在开发一个阅读器应用程序。现在，我正在尝试使用 IAP 在应用程序中实现支付。我已经阅读了应用内购买编程指南和一些教程。现在我还有一些问题不清楚。

1）在这种情况下我们必须使用IAP付款吗？没有其他人？

2) 如果使用 IAP，我们需要将所有书籍添加到 iTunes Connect 的产品列表中吗？如果有几千本书，我们需要手动添加每个人吗？

3）为了配合IAP，我的服务器端应该怎么做？

任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T08:04:55.600

> 1）在这种情况下我们必须使用IAP付款吗？没有其他人？

如果您打算在您的应用上销售书籍，您必须使用 IAP，否则 Apple 会拒绝您的应用，没有其他选择

> 2) 如果使用 IAP，我们需要将所有书籍添加到 iTunes Connect 的产品列表中吗？如果有几千本书，我们需要手动添加每个人吗？

是的，您必须将所有书籍一一添加到 iTunes Connnect

# android - 来自对话框按钮的不同电子邮件意图

> ID：15654027
> 
> 赞同：0
> 
> 时间：2013-03-27T07:53:24.693
> 
> 标签：android, email, android-intent, dialog

我只有一个带按钮的屏幕（稍后我会添加更多）。但是现在，我想让它在单击按钮时弹出一个带有两个选项的对话框。这两个选项都是电子邮件意图，只是传递给电子邮件客户端的数据不同。这可能吗？我是一名新开发人员，这是我的入门项目之一，所以请多多包涵。提前致谢。

好的，所以我找到了答案（我把它放在 onClick() 方法中）：

```
AlertDialog.Builder alertDialog = new AlertDialog.Builder(AlertDialogActivity.this);

            // Setting Dialog Title
            alertDialog.setTitle("Save File...");

            // Setting Dialog Message
            alertDialog.setMessage("Do you want to save this file?");

            // Setting Icon to Dialog
            alertDialog.setIcon(R.drawable.save);

            // Person presses first option (first email)
            alertDialog.setPositiveButton("YES", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                // User pressed YES button. Write Logic Here
               Intent emailIntent = new Intent(Intent.ACTION_SEND);
                    emailIntent.putExtra(Intent.EXTRA_EMAIL,new String[] { "email@domain.com" });
                    emailIntent.setType("message/rfc822");
                    startActivity(Intent.createChooser(emailIntent, "Send email..."));
                }
            });

            // Person presses second option (second email)
            alertDialog.setNegativeButton("NO", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                Intent emailIntent = new Intent(Intent.ACTION_SEND);
                    emailIntent.putExtra(Intent.EXTRA_EMAIL,new String[] { "example@domain.com" });
                    emailIntent.setType("message/rfc822");
                    startActivity(Intent.createChooser(emailIntent, "Send email..."));
                }
            });

            // Put a "cancel" button
            alertDialog.setNeutralButton("Cancel", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                // User pressed Cancel button. Write Logic Here
                Toast.makeText(getApplicationContext(), "You clicked on Cancel",
                                    Toast.LENGTH_SHORT).show();
                }
            });

            // Show the dialog
            alertDialog.show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:29:16.770

```
CharSequence[] arrayMail = {"first mail option", "second one"};
            builder.setTitle("Mail").setItems(arrayMail, new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    if(which==0)
                    {
                        Intent emailIntent = new Intent(Intent.ACTION_SEND);
                        emailIntent.putExtra(Intent.EXTRA_EMAIL,new String[] { "first data" });
                        emailIntent.setType("text/plain");
                        startActivity(Intent.createChooser(emailIntent, "Send email ..."));
                    }
                    if(which==1)
                    {
                        Intent emailIntent = new Intent(Intent.ACTION_SEND);
                        emailIntent.putExtra(Intent.EXTRA_EMAIL,new String[] { "Second data" });
                        emailIntent.setType("text/plain");
                        startActivity(Intent.createChooser(emailIntent,"Send email"));
                    }
                }
            });
            builder.setPositiveButton("Cancel", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dialog.dismiss();
                }
            });
            AlertDialog dialogSeguin = builder.create();
            dialogSeguin.show(); 
```

当然，字符链最好使用“strings.xml”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:03:23.657

您可以使用一个意图并将**PutExtra()**用于 Intents，并且取决于单击按钮，您可以将数据添加到可在电子邮件客户端中使用的 Extra。

# php - 如何使用 PHP DOMDocument 计算特定类的 div

> ID：15654028
> 
> 赞同：0
> 
> 时间：2013-03-27T07:53:28.893
> 
> 标签：php, domdocument

我有一个 html 字符串

```
html_string = '<div class="quote" post_id="48" 
style="border:1px solid #000;padding:15px;margin:15px;" user_id="1"
user_name="rashidfarooq">This is not True</div>

<div class="quote" post_id="49" style="border:1px 
solid #000;padding:15px;margin:15px;" user_id="1" 
user_name="rashidfarooq">This is good for me</div>

<div class="genuine" post_id="49" style="border:1px 
solid #000;padding:15px;margin:15px;" user_id="1" 
user_name="rashidfarooq">This is good for me</div>'; 
```

我想计算我尝试过的具有类名 = "quote" 的 div

```
 $dom = new DOMDocument;
    $dom->loadHTML($html_string);
    $divs = $dom->getElementsByTagName('div');
    $length = $divs->length; 
```

但是 $length 给出了 div 的总数。我怎样才能只计算类名 = “quote”的 div。是否有任何 PHP Native 函数可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:56:35.007

似乎没有本机 domdocument 功能，但是自己编写很容易：

```
function getElementsByClassName($elements, $className) {
    $matches = array();
    foreach($elements as $element) {
        if (!$element->hasAttribute('class')) {
            continue;
        }
        $classes = preg_split('/\s+/', $element->getAttribute('class'));
        if ( ! in_array($className, $classes)) {
            continue;
        }
        $matches[] = $element;
    }
    return $matches;
}

$dom = new DOMDocument;
$dom->loadHTML($html_string);
$divs = getElementsByClassName($dom->getElementsByTagName('div'), 'quote');
$length = $divs->length; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:59:11.040

尝试

```
$DOMResponse = new \DOMDocument();
$DOMResponse->loadXML($data);
$xpath = new \DOMXPath($DOMResponse);
$length = $xpath->query('/*[@class="quote"]')->length; 
```

`quote`您要查询的课程在哪里

# 笔记

如果您还想在之前过滤 div，则必须在之前查询 div，然后应用我在上面建议的查询

像这样的东西

```
$length = $xpath->query('//div[@class="quote"]')->length; 
```

# php - Laravel - 在视图中处理 if / else 的有效或逻辑设计模式是什么

> ID：15654029
> 
> 赞同：3
> 
> 时间：2013-03-27T07:53:36.477
> 
> 标签：php, design-patterns, laravel

目前我有一个相当大的项目，我需要为不同类型的用户存储不同的数据。

我需要存储模型的身体细节。

我遇到的问题是，女性的身体信息与男性不同，而机构、摄影师不需要身体信息，而且用户是分组的

```
group 3 - Model
group 4 - Agency
group 5 - photographer 
```

在我看来，我目前正在这样做

```
if ($group == 3 && $gender == 2) 
{
    // load female body information (lot of details)
} 
elseif ($group == 3 && $gender == 1) 
{
   // load male body information (lot of details)
} 
else 
{
    // load just work explerience & company info
} 
```

将用户信息存储在 3 个表中

```
users         . login information
users_details - users details, like first last name gender ect
users_body    - Body information for models both female / male 
```

那么为什么我要寻求一种更有效方法的提示，因为我需要在 3 个不同的页面上显示这种类型的信息，而且我认为它会变得混乱并导致大量代码重复

如果有人能给我任何建议的提示，我会很高兴

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T07:58:33.960

在视图之外处理此逻辑，并让逻辑的结果为视图设置一个具有适当结果的变量。至于避免“if-tree”，策略模式可能会根据情况派上用场。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T08:10:23.997

正如已经说过的，您应该在视图之外处理这个问题。
DB 表中的单词`store data`和表示应该是使用模型的提示。您可能有一个父类（可能是抽象类）`Model`，或者`Body`您可能在子类中扩展它，`Male`并且`Female`.
对于处理不同的用户角色，通常 ACL（访问控制级别）是正确的策略。
此外，所有这些都应该由控制器在逻辑上处理，您可以从中将所需的和过滤的信息传递给视图。

# php - 通过 CamanJS 插件更改图像后保存图像

> ID：15654031
> 
> 赞同：12
> 
> 时间：2013-03-27T07:53:44.833
> 
> 标签：php, javascript, html, web

所以我有一些图像，我可以通过使用 CamanJS 插件成功地对它们应用效果。但现在我想保存这些更改的图像并用原始图像替换它们。

文档（[链接](https://github.com/meltingice/CamanJS/wiki/How-to-use#saving-images)）提供有关保存图像的信息。但它被视为下载提示。我希望在没有提示的情况下将图像保存在服务器上，然后单击“保存”按钮。

该文档还说了一些我不理解的关于 base64 编码的内容。我的问题能解决吗？谢谢！。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-27T14:10:02.577

CamanJS 有一个内置函数，可以帮助您获取图像的 Base64 表示。您可以通过 Ajax 将其发送到服务器，解码 base64 字符串，并将其保存为普通图像。

```
Caman("#my-image", function () {
  this.brightness(10);
  this.render(function () {
    var image = this.toBase64();
    saveToServer(image); // your ajax function
  });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T08:16:13.283

正如您在此答案中看到的那样：[https](https://stackoverflow.com/a/6150397/1437005)`<canvas>` ://stackoverflow.com/a/6150397/1437005 您可以使用和 function获取图像的 base64 表示`toDataURL()`。

当您获得 base64 字符串时，您可以使用 AJAX 将图像发送到服务器（您可以使用 jQuery`$.ajax`或`$.post`方法），然后在服务器中您可以将 de base64 字符串解码为图像并存储它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-05T16:49:05.743

或者，您可以在前端本身执行相同的操作，然后上传文件以替换您的图像，而不是将 Base64 版本发送到服务器并进行转换。这样您就不需要编写新服务来转换和替换。获取@Ryan 提到的 Base64 数据，然后使用以下函数将其转换为 File/Blob。

```
export const convertToBlob = (data, successCallBack, errorCallback) => {
  fetch(data)
  .then((res) => res.blob())
  .then((blob) => successCallBack(blob))
  .catch((err) => errorCallback(err))
}

export const successCallBack = (blob) => { uploadBlobToServer(blob) } 
```

如果您的服务只接受 File 对象（不是 Blob 对象），只需使用以下命令将 Blob 转换为 File：

```
const imageFile = new File([blob], "imageFileName") 
```

# mod-rewrite - 未指定 Apache 将域重定向到文件夹

> ID：15654032
> 
> 赞同：0
> 
> 时间：2013-03-27T07:53:44.730
> 
> 标签：mod-rewrite, url-rewriting, apache2, httpd.conf

如果 URL 请求中未指定子文件夹，我需要将我的域重定向到子文件夹。

例如。

a) 如果请求来自“domian.com”或“www.domain.com”，我想将其重定向到“www.domain.com/page”。

b) 但是，如果请求来自“domain.com/page2”或“www.domain.com/page2”，我不希望将请求重定向到“www.domain.com/page”。

我一直在虚拟主机中尝试一些排列，但没有运气。下面是我的代码：

```
<VirtualHost *:80>
ServerName domain.com
ServerAlias www.domain.com

<Directory />
    Options Indexes FollowSymLinks MultiViews
    AllowOverride All
    Order allow,deny
    allow from all
    <IfModule mod_rewrite.c>
      Options +FollowSymLinks
      Options +Indexes
      RewriteEngine On
      RewriteBase /
      RewriteCond %{HTTP_HOST} ^(www\.)?domain\.com$
      RewriteCond %{REQUEST_URI} !^/$1
      RewriteRule ^(.*)$ /Page [L]
    </IfModule>
</Directory>

ProxyPreserveHost On
ProxyPass         /  http://www.domain.com:8080/
ProxyPassReverse  /  http://www.domain.com:8080/
</VirtualHost> 
```

任何指针都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:13:59.420

你可以试试这个：

```
 RewriteEngine On
  RewriteBase /
  RewriteCond %{HTTP_HOST} ^(www\.)?domain\.com [NC]
  RewriteCond %{REQUEST_URI} ^$   [NC]
  RewriteRule .* /Page [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:37:52.220

排除每个请求，因此从不使用。[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)`%{REQUEST_URI} !^/$1``RewriteRule`

如果您只想重写根目录，请改用特定的[正则表达式](http://httpd.apache.org/docs/current/rewrite/intro.html#regex) `^/$`。您还必须将规则包装在适当的 中`<Directory>`，因为包含的所有内容都适用于文件系统目录，*而不是*URL 路径

```
<Directory /path/to/documentroot>
    RewriteEngine On
    RewriteCond %{HTTP_HOST} ^(www\.)?domain\.com$
    RewriteRule ^$ /Page [L]
</Directory> 
```

# ios - Apple iOS BreadCrumb 示例 CGPath 路由和渐变

> ID：15654034
> 
> 赞同：0
> 
> 时间：2013-03-27T07:54:08.773
> 
> 标签：ios, mapkit, cgcontext, cgpath, linear-gradients

我正在使用“Apple iOS Breadcrumb”示例使用 CGPath 创建路线，我知道每个 CGPath 加入创建我的路线，并且每个 CGPath 使用 CGContextSetRGBStrokeColor 填充背景色，但现在，我想用渐变填充整个路线绿色到黄色。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:59:55.280

没有内置支持使用渐变绘制路径。有关详细的分析器，请参阅 [a link] ( [Stroking a CGPath with a gradient?](https://stackoverflow.com/questions/12979029/stroking-a-cgpath-with-a-gradient) )

# mysql - 如何使用spring从Mysql数据库中检索图像？

> ID：15654036
> 
> 赞同：0
> 
> 时间：2013-03-27T07:54:26.170
> 
> 标签：mysql, spring, file-upload, blob

我将图像插入 Mysql 数据库，图像将被存储。

```
File file = new File("G:/photos/New Folder (2)/www.geocities.com_cliknenjoy_lakshmimittal.jpg");

byte[] bFile = new byte[(int) file.length()];

try {

    FileInputStream fileInputStream = new FileInputStream(file);
    fileInputStream.read(bFile);
    fileInputStream.close();
} catch (Exception e) {
     e.printStackTrace();

}
inpatient.setImagefile(bFile); 
```

我在 mysql 中使用 blob 数据类型。

```
private byte[] imagefile;

public byte[] getImagefile() {      
    return imagefile;   
}   

public void setImagefile(byte[] imagefile) { 
    this.imagefile = imagefile;     
} 
```

现在我无法从 mysqldatabase 打开图像文件，我该如何打开这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:06:10.293

如果您使用 JPA 注释，则可以将您的属性注释为`@Lob`

```
@Lob
private byte[] imagefile; 
```

也许还`@Basic(fetch=FetchType.LAZY)`可以避免数据开销。

斯特凡诺

- 编辑

将图像二进制内容保存为 byte[] 后，您有两种显示图像的方法：编写新的 servlet 或新的控制器。第一种增加了不必要的复杂性，所以我通常使用第二种方法。

首先，您必须选择控制器将响应的路径；认为`"/dbresources/images/{id}"`

控制器将类似于

```
@Controller
@RequestMapping(value = "/dbresources/images")
public class PictureImageController {

    @Autowired
    private PictureService pictureService; // a service to retrieve pictures fomr DB

    // getters and setters

@RequestMapping(value = "/{id}")
public void writePicture(@PathVariable("id") String id, HttpServletRequest request, HttpServletResponse response) throws IOException {
        try{
            Picture img = pictureService.findById(id);
            response.setContent(picture.getImagefile());
            response.setContentLength(picture.getImagefile().length);

            //additionally, you should add the mime-type and the last
            //change date (to allow the browsers to use the cache) if these info are available

            response.getOutputStream().write(picture.getImagefile());
            response.setStatus(HttpServletResponse.SC_OK);
        }
        catch(Exception e){
            response.setStatus(HttpServletResponse.SC_NOT_FOUND); // 404\. Add specific catch for specific errors
        }
} 
```

然后在你的 jsp(x) 中你需要写

```
<img src="/dbresources/images/[the id of the image to show]" /> 
```

控制器将拦截此请求并处理它，将图像的二进制内容写入输出流。

希望这足够清楚。并且不要相信代码的正确性，因为我是即时编写的。

斯特凡诺

# ruby-on-rails - 模型间创作

> ID：15654040
> 
> 赞同：0
> 
> 时间：2013-03-27T07:54:41.907
> 
> 标签：ruby-on-rails

我有 4 个模型，软件、硬件、支持和位置。我使用脚手架来创建它们以及它们的属性，这些属性大多都是字符串。

我的问题是，当我调用 new_softwares_path 时，它会呈现一个名为 new.html.erb 的视图，该视图调用由脚手架创建的 _form.html.erb，如您所知，此视图会自动为列出的属性创建带有 text_field 和 text_area 部分的 form_for在软件模型中。

我想知道，如何从软件的_form.html.erb视图中调用硬件模型属性，然后用软件属性创建？我已经设置了模型之间的关系，但只需要帮助以模型间视图的方式调用属性。.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:00:38.943

我认为嵌套属性是您的解决方案。Ryan Bates 在他的一个 railscasts 中解释得很好：

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

# javascript - 我的第一个基于 jQuery 的滑块，需要一些错误处理

> ID：15654041
> 
> 赞同：1
> 
> 时间：2013-03-27T07:54:49.460
> 
> 标签：javascript, jquery, slider

我是一个新手 JS 程序员，我自己制作基于 jQuery 的滑块。这是我到目前为止所做的：

HTML：

```
<div id="keyVisual">

<p id="loading"><span>Loading Content...</span></p>

<ul id="keySlide">
<li id="slideSplash">SPLASH: no pager control on this slide</li>
<li id="slide01"><a href="http://yahoo.com/"></a></li>
<li id="slide02">
<div class="gchild">
    <p>grand child content, feedly is a google reader alternative you might want to think.    
</p>
    <a href="http://feedly.com/" class="link">feedly</a>
</div>
</li>
<li id="slide03">
<div class="gchild">
<p>some grand child content3</p>
<a href="http://yahoo.com" class="link" target="_blank">Yahoo</a>
</div>
</li>
<li id="slide04">
<div class="gchild">
<p>some grand child content4</p>
<a href="http://google.com" class="link" target="_blank">Google</a>
</div>
</li>
</ul>

<div id="btnMoveNext" class="btnSlide"><a href="#">&raquo;</a></div>
<div id="btnMovePrev" class="btnSlide"><a href="#">&laquo;</a></div>
</div><!-- /#keyVisual -->

<!-- pager -->
<ul id="listTopKey" class="cf">
<li><a href="#slide01" class="no1">No.1</a></li>
<li><a href="#slide02" class="no2">No.2</a></li>
<li><a href="#slide03" class="no3">No.3</a></li>
<li><a href="#slide04" class="no4">No.4</a></li>
</ul> 
```

JS请参考[JSFiddle](http://jsfiddle.net/nori2tae/B66zk/)

我有一个希望解决的最后一个问题。在脚本的最后，我制作了一个函数来监视每张幻灯片的背景图像的加载状态。当所有 BG 图像加载完毕后，滑块启动。

这在我第一次访问该页面时看起来不错，但是如果我单击一个链接去某个地方，然后回到这个滑块页面（例如使用浏览器后退按钮），似乎滑块无法继续（只是在加载时堆叠场景）。大多数情况下，这在 Google Chrome 和 Firefox 中都可以正常工作，但在 IE 中则不行。

我想我需要对这种情况进行一些错误处理。我可以想到在大约 15 秒后`setTimeout`触发一个函数。`loader();`有什么建议么？

谢谢你。

PS 随意自定义或实现代码并将其用于您自己的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:22:50.090

这是您的代码的小修复。我还添加了错误处理程序。

```
$.each(_imgURLArr, function(i, val) {
    var _tempImg = $('<img/>').attr('src', val),
        handler = function(event) {
            var img = $(this).off('.preloader');

            console.log(val + 'is loaded!', img);
            _imgCounter++;
            console.log('counter is ' + _imgCounter);
            if (_imgCounter == _childL) {
                loader();
            }
        };

    if (_tempImg[0].complete) {
        handler.call(_tempImg[0], {});
    } else {
        _tempImg
            .on('load.preloader', handler)
            .on('error.preloader', function() {
                var img = $(this).off('.preloader');

                console.log('Error loading img', img);
            });
    }
}); 
```

# android - 在服务运行时创建新的 Activity

> ID：15654050
> 
> 赞同：3
> 
> 时间：2013-03-27T07:55:50.197
> 
> 标签：android, telephony

检测到来电时如何启动新活动。在下面的代码中，我想在`CALL_STATE_RINGING`state开始新的 Activity

```
public String getCurrentCallState(final TelephonyManager mytelMgr) {
        int callState = mytelMgr.getCallState();
        String callStateString = "NOTKNOWN";
        switch (callState) {
            case TelephonyManager.CALL_STATE_IDLE:
                callStateString = "IDLE";
                break;
            case TelephonyManager.CALL_STATE_OFFHOOK:
                callStateString = "OFFHOOK";
                break;
            case TelephonyManager.CALL_STATE_RINGING:
                callStateString = "RINGING";
                break;
         }
} 
```

现在我在***CALL_STATE_RINGING***状态下做了一些更改，但它不起作用。每当来电时，我的应用程序就会退出。实际上，我想在来电响铃时调用该活动。

```
import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.telephony.PhoneStateListener;
import android.telephony.TelephonyManager;
import android.widget.Toast;

public class CallHelper extends Activity
{

    /**
     * Listener to detect incoming calls. 
     */
    private class CallStateListener extends PhoneStateListener
    {

        @Override
        public void onCallStateChanged(int state, String incomingNumber) 
        {

            switch (state) {
            case TelephonyManager.CALL_STATE_RINGING:
                // called when someone is ringing to this phone
                Intent i = new Intent(getApplicationContext(), out.class);
                i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);   //must be provided
                getApplicationContext().startActivity(i);

            Toast.makeText(ctx, "Incoming: "+incomingNumber, Toast.LENGTH_LONG).show();

                break;
            }
        }
    }

    /**
     * Broadcast receiver to detect the outgoing calls.
     */
    public class OutgoingReceiver extends BroadcastReceiver {
        public OutgoingReceiver() {
        }

        @Override
        public void onReceive(Context context, Intent intent) {
            String number = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);

            Toast.makeText(ctx, "Outgoing: "+number, Toast.LENGTH_LONG).show();
        }

    }

    private Context ctx;
    private TelephonyManager tm;
    private CallStateListener callStateListener;

    private OutgoingReceiver outgoingReceiver;

    public CallHelper(Context ctx) {
        this.ctx = ctx;

        callStateListener = new CallStateListener();
        outgoingReceiver = new OutgoingReceiver();
    }

    /**
     * Start calls detection.
     */
    public void start() {
        tm = (TelephonyManager) ctx.getSystemService(Context.TELEPHONY_SERVICE);
        tm.listen(callStateListener, PhoneStateListener.LISTEN_CALL_STATE);

        IntentFilter intentFilter = new IntentFilter(Intent.ACTION_NEW_OUTGOING_CALL);
        ctx.registerReceiver(outgoingReceiver, intentFilter);
    }

    /**
     * Stop calls detection.
     */
    public void stop() {
        tm.listen(callStateListener, PhoneStateListener.LISTEN_NONE);
        ctx.unregisterReceiver(outgoingReceiver);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:01:01.057

`Activity`从 a`Service`或 even启动时没有区别 - 除了一个重要标志`BroadcastReceiver`。*在您的CALL_STATE_RINGING*案例中使用以下内容：

```
Intent i = new Intent(getApplicationContext(), YourActivity.class);
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);   //must be provided
getApplicationContext().startActivity(i); 
```

确保您的启动活动也在**AndroidManifest**中定义。

# c# - xaml WebView：如何捕捉“OnNavigation”事件@Windows Store App

> ID：15654057
> 
> 赞同：0
> 
> 时间：2013-03-27T07:56:15.020
> 
> 标签：c#, xaml, windows-runtime, windows-store-apps, winrt-xaml

我正在使用 C#/xaml 开发 Windows 应用商店应用程序。

我如何注意到我的 WebView 中的链接是否被点击？该 afaik 没有事件。我已经研究过[这个](https://stackoverflow.com/questions/12671047/how-do-i-capture-a-navigation-event-in-a-webview-on-windows-8)和[那个，](https://stackoverflow.com/questions/12703698/open-links-in-external-browser-in-webview-winrt)但它没有为我提供合适的解决方案。

我可以举个例子：我通过 iFrame 将 Facebook 页面的流嵌入到我的 WebView 中。我想阻止该 iFrame 中可能存在的所有链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:35:39.600

您可以使用您自己的一些 Javascript 调用 InvokeScript 来设置一个侦听器，以便在用户离开您的页面时进行监听。这在 C# 中类似于以下内容：

```
var navigationListenerString = @"
(function() {
  function leavingPage() {
    window.external.notify("LEAVING PAGE");
  }
  window.onbeforeunload = leavingPage;
})()";

webView.InvokeScript("eval", new string[] { navigationListenerString }); 
```

然后，您可以使用 ScriptNotify 来监听您的特定消息，以确定页面正在卸载并且用户正在离开。不幸的是，您无法检测到用户的去向。此外，如果超链接在新窗口中打开并且 web 视图未卸载，您也无法检测到。

# jquery - 从 GitHub README.md 文件 Markdown 到 HTML

> ID：15654065
> 
> 赞同：8
> 
> 时间：2013-03-27T07:57:00.113
> 
> 标签：jquery, html, markdown

我的目标是，

`README.md`1)从我的 GitHub 存储库中的文件中读取 Markdown 源代码。
2) 将 Markdown 转换为 HTML 代码。
3) 将输出 HTML 应用到`<div>`.

仅使用客户端技术。

我知道如何使用 jQuery 将 Markdown 代码转换为 HTML，但不知道如何从 GitHub 存储库的 README.md 文件中动态读取 MD 源。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T08:18:12.473

1.  从 GitHub 存储库获取 README.md 文件的原始文件 url。
2.  将 url 格式化为以下格式， `http://markdown.io/<url_readme_file>`. 假设我的 readme.md 文件的 url 是`http://raw.github.com/pankajparashar/nerdy-css/master/README.md`. 因此，新的 url 变为`http://markdown.io/http://raw.github.com/pankajparashar/nerdy-css/master/README.md`
3.  `#md-content`现在使用 jQuery 的 load 方法使用这个新的 url 并从页面的 id 中提取内容。

此处提供上述步骤的完整演示 - 已删除非工作链接

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-20T04:35:59.967

你应该检查一下：

[https://github.com/zmckinnon/jquery-gh-readme](https://github.com/zmckinnon/jquery-gh-readme)

它使用 GitHub API 通过以下调用检索自述文件的内容：

获取 /repos/:owner/:repo/readme

然后它转换 base64 加密内容。

然后它使用标记将降价内容转换为 html。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T17:54:41.470

1.  转到您的 GitHub 项目页面
2.  点击你的`README.md`文件
3.  现在单击**原始**按钮

原始文件是您要加载的实际 URL。

创建一个 PHP（或您使用的任何服务器端语言）文件，`load.php`专门用于加载远程文件（如您的 RAW 文件）。PHP 脚本将接受一个`$_GET['url']`变量。将变量传递给`file_get_contents()`，并输出结果。*请注意，下面的代码是一个非常简单的示例。*

```
echo file_get_contents($_GET['url']); 
```

现在，只需使用`load`jQuery 中的函数从 PHP 文件中引入数据内容。您的 URL 的格式可能与此类似...

```
.load("load.php?url=https://raw.github.com/user/project/master/README.md") 
```

最后，使用您已经描述的任何方式转换为 Markdown。

*   PHP `file_get_contents()`： http: [//php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)
*   jQuery `load()`：[http ://api.jquery.com/load/](http://api.jquery.com/load/)
*   有关绕过同源策略的更多信息：http: [//www.mikazo.com/2010/09/how-to-getting-around-ajax-same-origin.html](http://www.mikazo.com/2010/09/how-to-getting-around-ajax-same-origin.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-05-14T08:27:41.640

值得注意的是，HTML 确实在 ReadMe.md 文件中起作用。有了这个清晰的理解，我想很多这样的问题都会被自动回答，比如 - 如何在自述文件中制作粗体字体，或者如何插入图像等。另外请注意，这在很大程度上取决于您使用的应用程序/文本编辑器和在操作系统上也很多。最近我在 Github 的 Readme.md 文件中插入空行字符时遇到了麻烦。

我个人更喜欢那里的 < br /> 标签，并且我有一篇完整的帖子描述了相同的内容：http: [//www.w3lc.com/2017/05/new-line-in-readme-file-github-fixing.html](http://www.w3lc.com/2017/05/new-line-in-readme-file-github-fixing.html)

我已经在帖子中解释的 Github 存储库中演示了 git commit 的更改。这种理解对于处理这个问题是非常必要的，并且还需要找到为什么你可能需要这样做的许多其他用途！

此外，要直接回答您的问题，您需要两个步骤： 1\. 找到原始版本的 ReadMe.md 文件的 URL。例如看一个：[https](https://raw.githubusercontent.com/Anwar-Faiz/forkrap/master/README.md) ://raw.githubusercontent.com/Anwar-Faiz/forkrap/master/README.md 2.现在如果你想使用服务器端使用php的file_gets_content等，你可以加载url。或者，如果你想使用 jquery，你可以使用 Load()。

请注意，如果您查看原始 URL 页面的源代码，您只会看到纯文本。所以，你也不需要做太多的文本解析工作:) 这是一个好消息。

接下来，您可以使用 unescape 函数或 codebeautify 之类的工具来取消转义可以改变 HTML 外观和感觉的字符，例如“<”等。

# powershell - Get-AzureService 不列出所有云服务（多个订阅）

> ID：15654068
> 
> 赞同：2
> 
> 时间：2013-03-27T07:57:17.870
> 
> 标签：powershell, deployment, azure, cloud

我有两个 azure 订阅（sub1 和 sub2）。在 powershell 中请求云服务`Get-AzureService`仅列出来自 sub1 而不是 sub2 的服务。

`Set-AzureSubscription`我还尝试使用sub2设置 azure 订阅，但没有成功。

如何从 sub2 获取 powershell 中的服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-13T23:24:15.700

这在最近的 PowerShell 版本中实际上发生了变化。-DefaultSubscription 不再作为参数存在。

您现在应该使用 Select-AzureSubscription [http://msdn.microsoft.com/en-us/library/dn495203.aspx](http://msdn.microsoft.com/en-us/library/dn495203.aspx)

> 选择-AzureSubscription -当前“sub2”
> 
> 获取 Azure 订阅 | fl SubscriptionName、SubscriptionId、IsDefault、IsCurrent

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:11:07.170

哦，我明白了：

`Set-AzureSubscription -DefaultSubscription "sub2"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-25T09:31:51.467

其他方法对我不起作用，所以这是我的两分钱：

获取订阅列表：

```
Get-AzureRmSubscription 
```

使用另一个调用提供的订阅 ID 选择订阅

```
Select-AzureSubscription -SubscriptionId "xxxx-xxxx-xxxx-xxxx" -Current 
```

# c - 在 C 中调用函数而不是宏

> ID：15654070
> 
> 赞同：6
> 
> 时间：2013-03-27T07:57:30.350
> 
> 标签：c, macros

我的问题是：如果你有一个宏和一个同名的函数，那么只有宏会被调用，对吗？如果我想调用函数而不是宏怎么办？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-27T08:00:43.863

如果你有一个函数和一个类似函数的宏都命名`foo`并想要调用函数版本，你可以这样做：

```
(foo)(args) 
```

这是有效的，因为类似函数的宏名称必须后跟带括号的参数列表才能进行替换。

这在 ISO C99 标准的第 7.1.4/1 节中提到：

> 头文件中声明的任何函数都可以额外实现为头文件中定义的类函数宏，因此如果在包含头文件时显式声明库函数，则可以使用下面显示的技术之一来确保声明不受这样一个宏的影响。函数的任何宏定义都可以通过将函数的名称括在括号中来在本地抑制，因为该名称后面没有表示宏函数名称扩展的左括号。出于同样的语法原因，即使库函数也被定义为宏，也允许获取库函数的地址。使用`#undef`删除任何宏定义也将确保引用实际函数。

但是，如果您需要这样做，您可能应该在代码中添加注释来解释它，因为它看起来有点奇怪并且不是常见的做法。如果可行，从长远来看，重命名函数以避免名称冲突可能更易于维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:00:04.037

重命名两者之一。或者，如果这不可能，请在定义宏并通过该指针调用函数之前创建指向原始函数的函数指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T08:12:00.257

打电话前提供技巧

```
#ifdef foo
#undef foo
#endif // 
```

因此，在本地调用函数的单个文件中，您将始终具有显式行为

# caching - （服务器）jquerymobile 站点的缓存问题

> ID：15654072
> 
> 赞同：0
> 
> 时间：2013-03-27T07:57:32.823
> 
> 标签：caching, jquery-mobile

我的第一个 jquerymobile 网站 ( [http://backpocketgrower.com/](http://backpocketgrower.com/) ) 缓存过多。我上传了新版本的页面，但只显示旧版本；我可以从服务器物理上删除页面，但随后的浏览器访问会显示它们。我在网站上完全使用了“原始”机器/浏览器，但仍然显示旧版本的页面。我已经从我的所有浏览器（FF、Chrome、Dolphin、Opera、Safari）中删除了缓存/历史记录，向新页面的 a-tag 链接添加了查询字符串 - 但仍然只显示旧版本的页面。

关于下一步我应该从哪里开始寻找解决方案的任何想法？

谢谢/布鲁斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:27:07.220

看来您可以以编程方式禁用缓存。在此链接中查看此[文档](http://msdn.microsoft.com/en-us/library/06bh14hk%28v=vs.71%29.aspx)

根据上面的链接，您应该能够执行以下操作

```
Response.Cache.SetExpires(DateTime.Now.AddSeconds(60)); 
```

或者您可以在页面本身中执行以下操作

```
<%@ OutputCache Duration="60" VaryByParam="None" %> 
```

从[另一个链接中，我了解到](http://www.htmlgoodies.com/beyond/reference/article.php/3472881/So-You-Dont-Want-To-Cache-Huh.htm)您可以执行以下操作

```
// Stop Caching in IE
Response.Cache.SetCacheability(System.Web.HttpCacheability.NoCache);

// Stop Caching in Firefox
Response.Cache.SetNoStore(); 
```

希望这会给你一个良好的开端。

# asp.net-mvc - 如何使用 HiddenField 从 MVC 中的下拉列表 Telerik 获取文本值

> ID：15654075
> 
> 赞同：1
> 
> 时间：2013-03-27T07:57:42.927
> 
> 标签：asp.net-mvc, entity-framework

在我的 MVC(Razor) 项目中，我有一个疑问。我有一个名为 Hierarchy.cshtml 的 Razor 视图

**看法：**

```
@model List<DatabaseModel.SampleWizardModel>
<script>
    $(document).ready(function () {
        $('.chk-act').click(function () {
            if ($(this).is(':checked')) {
                $('#AttributeList' + this.value).data("tDropDownList").enable();
            }
            else {
                $('#AttributeList' + this.value).data("tDropDownList").disable();
            }
        });
    });

    function SetAllCheckBoxes(obj) {
        var c = new Array();
        c = document.getElementsByTagName('input');
        for (var i = 0; i < c.length; i++) {
            if (c[i].type == 'checkbox') {
                c[i].checked = obj.checked;
            }
        }
        $('.chk-act').each(function () {
            if ($(this).is(':checked')) {
                $('#AttributeList' + this.value).data("tDropDownList").enable();
            }
            else {
                $('#AttributeList' + this.value).data("tDropDownList").disable();
            }
        });
    }

    function onAttListChange(e) {
        $('#hdattid').val($("#" + this.id).data("tDropDownList").text());
       // $get("tDropDownList").value = e.get_item().get_value();
    }

</script>

<div>
    <table border="0">
        <tr>
            <th align="center">Colum Name</th>
            <th align="center" width="150px">Import</br>(<input type="checkbox" name="chkselectall" onclick="SetAllCheckBoxes(this)" /><i>Select All </i>)</th>
            <th align="center">Field Mapping</th>
        </tr>
        @using (Html.BeginForm("SampleImport", "Sample", FormMethod.Post, new { enctype = "multipart/form-data" }))
        {
            foreach (var item in Model)
            {
                string checkbox = "actionChk" + item.Index;
            <tr>
                <td>@item.ColumName</td>
                <td align="center">
                    <input type="checkbox" class="chk-act" id="@checkbox" value="@item.Index" name="@checkbox"></td>
                <td>
                    <div id="dd">@(Html.Telerik().DropDownListFor(m => m.FirstOrDefault().DropDownAttributes).Name("AttributeList" + item.Index).BindTo(item.DropDownAttributes).ClientEvents(e =>e.OnChange("onAttListChange")).HtmlAttributes(new { style = "width:235px" }).Enable(false))</div>
                    @Html.Hidden("hdattid" + item.Index, item.DropDownAttributes.FirstOrDefault().Text)
                </td>
            </tr>
            }
            <tr>
                <td></td>
                <td></td>
                <td><b><i>@Html.CheckBox("Allow Duplicate", false) Allow Duplicate</i></b>
                    <input type="submit" value="Start Import" /></td>
            </tr>
        }

    </table>

</div> 
```

我的模型是：

```
#region SampleWizard Model Class
    public class SampleWizardModel
    {
        public int Index { get; set; }

        public string ColumName { get; set; }

        public bool Selected { get; set; }

        public int AttributrId { get; set; }

        public List<SelectListItem> DropDownAttributes { get; set; }

        public int AttributeTypeId { get; set; }

        public string AttributeName { get; set; }

    }
    #endregion 
```

控制器：

```
[HttpPost]
    public ActionResult FinalImport(FormCollection collection)
    {
    List<DatabaseModel.HierarchyWizardModel> model = (List<DatabaseModel.HierarchyWizardModel>)Session["HierarchyWizardModel"];

    foreach (var key in collection.AllKeys)
    {
        if (key.Contains("actionChk"))
        {
            int Index = int.Parse(Request[key].ToString());
            var Item = model.Where(h => h.Index == Index).FirstOrDefault();
            Item.Selected = true;
            string Value = Request["AttributeList" + Index].ToString();
            if (Value == "Category" || Value == "SubCategory" || Value == "CatalogItemNo")
            {
                Item.AttributeName = Request["hdattid" + Index].ToString();
                Item.AttributrId = 0;
                Item.AttributeTypeId = 0;
            }
            else
            {
                Item.AttributeName = Request["hdattid" + Index].ToString();
                if (Request["hdattid" + Index].ToString().Contains("New Attribute"))
                {
                    Item.AttributeTypeId = int.Parse(Value);
                    Item.AttributrId = 0;
                }
                else
                {
                    Item.AttributrId = int.Parse(Value);
                    Item.AttributeTypeId = 0;
                }
            }
        }
    }
    return View();
} 
```

在这里，如果我运行这意味着它将运行，并且我已选中复选框意味着要启用下拉列表。如果我从中选择任何值，则意味着它不返回其他值，只返回第一个值。因此，当我选择其他值时，我需要获取其他值。如何获取在 HiddenField 的 Telerik 下拉列表中选择的文本？？？任何帮助

# php - 警告：第 57 行 C:\wamp\www\whois\whois\whois.gtld.php 中的非法字符串偏移“处理程序”

> ID：15654076
> 
> 赞同：0
> 
> 时间：2013-03-27T07:57:46.260
> 
> 标签：php, class, whois

我正在使用 phpwhois php 类来查找 web 域 ( [http://sourceforge.net/projects/phpwhois/](http://sourceforge.net/projects/phpwhois/) ) 的 whois 详细信息，并且我在我的本地主机上使用这个脚本。当我使用以下代码运行此脚本时，它显示错误。请告诉我哪里出错了

代码

```
<?php
include('whois/whois.main.php');

$whois = new Whois();
$query = 'google.com';
$result = $whois->Lookup($query,false);
echo "<pre>";
var_dump($result);
echo "</pre>";
?> 
```

*   错误是

： **警告：第 57 行 C:\wamp\www\whois\whois\whois.gtld.php 中的非法字符串偏移“处理程序”**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:36:43.300

第 57 行的代码期望 $query 是一个具有元素 'handler'=>? 的数组。
但是原始查询*字符串*被传递给该方法，因此出现非法偏移警告。
在[http://sourceforge.net/tracker/index.php?func=detail&aid=3605711&group_id=31207&atid=401654](http://sourceforge.net/tracker/index.php?func=detail&aid=3605711&group_id=31207&atid=401654)的错误跟踪器中，解决此问题的建议是更改

```
$this->SUBVERSION = sprintf('%s-%s', $query['handler'], $this->HANDLER_VERSION); 
```

至

```
if (isset($query['handler'])) {
  $handler = $query['handler'];
} else {
  $handler = $query;
}
$this->SUBVERSION = sprintf('%s-%s', $handler, $this->HANDLER_VERSION); 
```

但是我没有`SUBVERSION`在项目中发现任何其他出现的字符串，所以我现在就将该行作为注释......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-07-27T08:10:39.800

删除该行不会破坏任何内容，因为该`SUBVERSION`属性未在其他任何地方引用

参考github中的phpwhois

# r - 使用包含 NA 作为参数值的函数的 formula.update 不起作用

> ID：15654086
> 
> 赞同：2
> 
> 时间：2013-03-27T07:58:31.727
> 
> 标签：r, function, na

*   **编辑**：我为同样的情况做了一个更简单的例子：

    我试图`fn`从模型公式中删除与函数相对应的一项。

    ```
    f<-formula(y~x+fn(z=1))
    update(f,.~.-fn(z=1)) #remove the last term
    y ~ x 

    rm(a)
    f<-formula(y~x+fn(z=a))
    update(f,.~.-fn(z=a)) #works
    y ~ x

    #even these work:
    f<-formula(y~x+fn(z=a));update(f,.~.-fn(z=a))
    f<-formula(y~x+fn(a));update(f,.~.-fn(z=a))
    f<-formula(y~x+fn(z=a));update(f,.~.-fn(a))

    f<-formula(y~x+fn(z=NA))
    update(f,.~.-fn(z=NA)) #does not work
    y ~ x + fn(z = NA)

    #Probably something to do with environments, as these do not work:
    update(formula(y~x+fn(z=a)),.~.-fn(z=a)) #works
    y ~ x
    > update(formula(y~x+fn(z)),.~.-fn(z=a)) #nope
    y ~ x + fn(z)
    > update(formula(y~x+fn(z=a)),.~.-fn(z)) #this neither
    y ~ x + fn(z = a) 
    ```

    所以`formula.update`（或`terms.formula`）中发生了一些我不明白的事情。

* * *

*   旧位；更复杂的例子和一些挖掘里面`formula.update`

    我试图弄清楚如何更新`formula`对象，以便我可以删除一些与稍后将使用的函数相关的特殊变量。

    这是一个简单的例子：

    ```
    f<-formula(y~x+fn(z=1))
    vars<-terms(f, c("fn"))
    rmterm<-attr(vars, "variables")[[1 + attr(vars, "specials")$fn]]   
    rmterm
    fn(z = 1)
    update(f, paste(".~.-", deparse(rmterm, width.cutoff = 500L, backtick = TRUE)))
    y ~ x 
    ```

    到目前为止，一切都按预期工作。但是，如果我`NA`用作该术语的参数，`fn`则不会删除：

    ```
    f<-formula(y~x+fn(z=NA))
    vars<-terms(f, c("fn"))
    rmterm<-attr(vars, "variables")[[1 + attr(vars, "specials")$fn]]   
    rmterm
    fn(z = NA)

    update(f, paste(".~.-", deparse(rmterm, width.cutoff = 500L, backtick = TRUE)))
    y ~ x + fn(z = NA) 
    ```

    我想出了一种解决方案来避免这种情况，但是感觉很hacky并且很难概括，因为公式中可以有几个函数包含一个`NA`参数和一些非`NA`参数：

    ```
    rmterm[[2]][[1]]<-1
    f[[3]][[3]][[2]]<-1
    f<-update(f,paste(".~.-",deparse(rmterm, width.cutoff = 500L, backtick = TRUE)))
    f
    y ~ x
    rmterm[[2]][[1]]<-NA #I need the NA back
    rmterm ## NA becomes NA_real, which probably doesn't matter
    fn(z = NA_real_) 
    ```

    所以我的问题是为什么不`update.formula`使用`NA`'s，以及解决这个问题的好方法是什么？

* * *

*   **编辑**：查看`update.formula`函数内部：

    ```
    update.formula
    function (old, new, ...) 
    {
        tmp <- .Internal(update.formula(as.formula(old), as.formula(new)))
        out <- formula(terms.formula(tmp, simplify = TRUE))
        return(out)
    } 
    ```

    *   输出`.Internal`：

        ```
        f<-formula(y~x+fn(z = NA))
        vars<-terms(f, c("fn"))
        rmterm<-attr(vars, "variables")[[1 + attr(vars, "specials")$fn]]   
        old<-f
        new<-paste(". ~ .-", deparse(rmterm, width.cutoff = 500L, backtick = TRUE))
        tmp <- .Internal(update.formula(as.formula(old), as.formula(new)))

        tmp
        y ~ (x + fn(z = NA)) - fn(z = NA)
        attr(,".Environment")
        <environment: R_GlobalEnv> 
        ```

    *   看起来不错。然后输出`terms.formula`：

        ```
        terms.formula(tmp, simplify = TRUE)
        y ~ x + fn(z = NA)
        attr(,"variables")
        list(y, x, fn(z = NA), fn(z = NA))
        attr(,"factors")
                   x fn(z = NA)
        y          0          0
        x          1          0
        fn(z = NA) 0          1
        fn(z = NA) 0          0
        attr(,"term.labels")
        [1] "x"          "fn(z = NA)"
        attr(,"order")
        [1] 1 1
        attr(,"intercept")
        [1] 1
        attr(,"response")
        [1] 1
        attr(,".Environment")
        <environment: R_GlobalEnv> 
        ```

    *   这是不正确的。为了比较，这里是使用时相同的输出`fn(z=1)`：

        ```
        tmp
        y ~ (x + fn(z = 1)) - fn(z = 1)
        attr(,".Environment")
        <environment: R_GlobalEnv>

        terms.formula(tmp, simplify = TRUE)
        y ~ x
        attr(,"variables")
        list(y, x, fn(z = 1))
        attr(,"factors")
                  x
        y         0
        x         1
        fn(z = 1) 0
        attr(,"term.labels")
        [1] "x"
        attr(,"order")
        [1] 1
        attr(,"intercept")
        [1] 1
        attr(,"response")
        [1] 1
        attr(,".Environment")
        <environment: R_GlobalEnv> 
        ```

    所以看来问题出在内部`terms.formula`函数的某个地方。

# javascript - Javascript/JQuery，确定每英寸的像素

> ID：15654091
> 
> 赞同：0
> 
> 时间：2013-03-27T07:58:50.043
> 
> 标签：javascript, jquery, screen, screen-resolution

我用以下命令找到了屏幕的宽度和高度

```
window.screen.width
window.screen.height 
```

我试图用以下命令找出以英寸为单位的物理对角线

```
var dpi_x = document.getElementById('testdiv').offsetWidth;
var dpi_y = document.getElementById('testdiv').offsetHeight;
var width_in = screen.width / dpi_x;
var height_in = screen.height / dpi_y;
var diagonal_in = Math.round(10 * Math.sqrt(width_in * width_in + height_in * height_in)) / 10; 
```

现在的问题是，当我更改屏幕分辨率时它不再起作用。有没有办法通过 javascript/jquery 获取屏幕的物理尺寸？

# sql-server - 使用 On Change 事件进行搜索时，带有 SQL Server 链接表的 Microsoft Access 挂起

> ID：15654095
> 
> 赞同：1
> 
> 时间：2013-03-27T07:59:01.377
> 
> 标签：sql-server, ms-access, ms-access-2010

我想知道是否有人对我有任何建议，基本上我们正在使用文本框进行搜索，但这会导致一些问题。我们有一个列表框，其行源设置为相当于 select * from tblSearch where searchField Like " *" & [Forms]![frmNames]![txtSearch].[Text] & "* "

此查询将 Max Rows 设置为 25，并且所有表都是链接到 SQL Server 的表。在搜索文本框的 On Change 事件中，它在列表框上运行重新查询，一切似乎都像疯了一样，除了数据库每天都在为用户挂起，这让我发疯了！

基本上研究了这一点，我将其归结为 Access 正在将 select 语句发送到 SQL（在同一台服务器上），但没有等待每个查询完成并在继续之前对其进行处理。因此，在 Access 从服务器返回响应之前，用户键入下一个字符并触发对 SQL 的新查询。在 SQL Server 中，您会发现资源等待“ASYNC_NETWORK_IO”的挂起查询，我理解这是客户端不使用来自 SQL Server 的数据。

我必须做的是将用于重新查询的事件从 On Change 更改为 afterupdate，这确实会影响具有排序或“Google Instant”搜索体验的整个用户体验，因为他们必须在看到之前键入并按 Enter结果，不好看！

所以这就是问题所在，只是想知道是否有人有任何建议，我现在已经没有想法了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T17:28:42.707

**这里的想法是保持查询结果精简和平均。** 每次在 Access 中运行此查询时，即使不是数千次（如果不是数千次，也可能是数百次`OnChange`），您希望尽可能少地通过管道。您可以执行许多优化以使 SQL 查询及其结果更快：

1.  更改`SELECT * FROM ...`为`SELECT [column1],[column2],[etc] FROM ...`（其中的列仅是 ListBox 所需的那些列。即使您要查询的表只有您需要的列，这仍然是最佳实践，因为当您再次查看 3-12 个月时会很清楚稍后，它使数据库引擎（在 Access 或 SQL 中）不必查找表中的列。
2.  `searchField`确保您在 SQL Server 数据库中的列上有一个索引。
3.  将查询移动到 SQL Server 中的视图并将其放在`SELECT TOP 25...`那里。即使您将 MAX ROWS 25 放在 Access 中，它仍然可以拉更多（即 ALL）然后过滤到 25。此外，通过将其放在视图中，您可以将其放在`WITH (NOLOCK)`表的末尾（名称/别名）给出SQL Server 提示它不需要为此查询锁定表上的任何内容。这会加快速度，尤其是在有多个用户频繁重新查询的情况下。

还有其他事情取决于您的具体情况，但这些*肯定会*减少您的挂起时间。

# c# - .NET Thread.Sleep 对 StopWatch 计数器进行偏移？

> ID：15654101
> 
> 赞同：0
> 
> 时间：2013-03-27T07:59:22.107
> 
> 标签：c#, multithreading, timer

我写了这个简单的控制台代码，但我无法解释结果。

```
public static void Execute2()
    {
        Stopwatch sw = new Stopwatch();

        sw.Start();
        while (sw.ElapsedMilliseconds  < 1000)
        {
            Console.WriteLine(sw.ElapsedMilliseconds);
            System.Threading.Thread.Sleep(100);
        }
    } 
```

控制台上的输出：

```
0  
127  
228  
328  
429  
530  
630  
731  
831  
931  
Press a key to continue... (no debug) 
```

如您所见，第一次调用后大约有 27 毫秒的偏移量，但在接下来的调用中，此偏移量保持不变。

我认为 27 毫秒是由调用 Thread.Sleep() 的开销造成的，但它只发生在第一次。这种行为在每次构建时都会重复（我在没有调试的情况下运行构建）

我的机器是：core 2 duo @ 2.8Ghz, 2gb ram, windows xp sp3, VS2010 pro

所以问题是：27ms 的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:03:05.430

它可以是很多东西，例如：

1.  JIT 预热
2.  控制台的初始化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:05:44.030

称呼

```
Thread.Sleep(100); 
```

在开始之前。并在您的“真实”代码之前执行任何控制台输出

# oracle - 存储过程中的动态表创建以及插入

> ID：15654103
> 
> 赞同：0
> 
> 时间：2013-03-27T07:59:42.393
> 
> 标签：oracle, plsql, oracle11g, dynamic-sql

我有一个包含动态示例表创建的存储过程，之后我插入到示例表语句中。

当我编译该过程时，它说表或视图不存在。如何处理这种情况？如果有其他替代解决方案，请给我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:29:37.357

是否可以将您的插入语句更改为 EXECUTE IMMEDIATE 'insert into sample values(1)'；它将避免编译问题。

# ruby-on-rails - 我如何在用户部分为设计添加字段：名称？

> ID：15654106
> 
> 赞同：2
> 
> 时间：2013-03-27T07:59:52.567
> 
> 标签：ruby-on-rails, activerecord, devise

我需要添加字段：名称来设计，但我会尝试创建标签，文本字段：名称并添加：名称来设计模型，但我的程序没有显示字段：名称。我不知道如何解决这个问题？

模型用户中的 Mycode

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :name
  # attr_accessible :title, :body

  has_many :events, as: :eventable

  def to_s
    name.present? ? name : email
  end
end 
```

这是 users/registrations/new.html.erb 中的代码

```
<h2>Sign up</h2>

<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
  <%= devise_error_messages! %>

  <div><%= f.label :name %><br />
  <%= f.text_field :name %></div>

  <div><%= f.label :email %><br />
  <%= f.email_field :email %></div>

  <div><%= f.label :password %><br />
  <%= f.password_field :password %></div>

  <div><%= f.label :password_confirmation %><br />
  <%= f.password_field :password_confirmation %></div>

  <div><%= f.submit "Sign up" %></div>
<% end %>

<%= render "devise/shared/links" %> 
```

我试试这个，但什么也没发生。我是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:23:17.427

执行

```
$ rails generate devise:views users 
```

这将`app/views/users`与内部的所有视图一起生成。

还要确保更改此行

```
config.scoped_views = false 
```

至

```
config.scoped_views = true 
```

在里面`config/initializers/devise.rb`（我第 189 行）设计实际使用生成的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:14:09.793

我现在看到了。看起来您的应用显示错误的视图。使用`rails generate devise:views users`命令。我认为你自己提出了这个观点，因为路径是错误`Users/registrations/new.html.erb`的——“用户”不必要地被骆驼化了。

# ruby-on-rails - 从 Carrierwave 中删除数据库依赖项

> ID：15654113
> 
> 赞同：2
> 
> 时间：2013-03-27T08:00:09.090
> 
> 标签：ruby-on-rails, carrierwave

我想要完成的是拥有一个上传器和模型，而不需要将图像字段保存​​到数据库中。

```
class ImageUploader < CarrierWave::Uploader::Base

  def store_dir
    "#{default_path}"
  end

  version :mobile do
    process :resize_to_fit => [118,110]
  end

end

class Item < ActiveRecord::Base

  mount_uploader :image, ImageUploader
  attr_acccessible :image

end 
```

我读过这个：[http](http://blog.endpoint.com/2012/04/using-carrierwave-without-orm.html) ://blog.endpoint.com/2012/04/using-carrierwave-without-orm.html但认为有更好的方法。

我在想的是做一个 before_save 并从对象中删除图像值，但仍然感觉像这样的 hack。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:08:19.397

这在使用载波时是不可能的。Carrierwave 要求您安装上传器，当安装上传器时，会在数据库中创建图像列。

# javascript - 在按钮的 OnClick 事件中执行 Javascriptcode

> ID：15654115
> 
> 赞同：0
> 
> 时间：2013-03-27T08:00:11.130
> 
> 标签：javascript, android, button, layout, webview

我的布局中有一个 webview 和一个 Button（超出 webview）。我想知道当我单击按钮时是否有任何方法可以执行 javascript 代码（例如使用它的 OnClick 事件）

编辑：

我有这个 HTML

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="PruebaAlert.js"></script>
    </head>
    <body>
       <!--Your content here-->

    </body>
</html> 
```

我在 PruebaAlert.js 中有我的函数 JS

```
function myJSFunction(){
           alert('hello, i was hit by Android button'); 
```

}

```
public class MainActivity extends Activity {

int pulsado = 0;

//Controla que estamos usando el layout web_view_not_visible
boolean web_view_not_visible = true;
TextView text;
Button button;

WebView myWebView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.web_view_not_visible);

    myWebView = (WebView)findViewById(R.id.webview);

    myWebView.loadUrl("file:///android_asset/StackOverflow.html");

    WebSettings webSettings = myWebView.getSettings();
    webSettings.setJavaScriptEnabled(true);

    if(true){
        button = (Button)findViewById(R.id.button1);

        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Log.d("WebView Debug" , "Entre en onClick()");
                myWebView.loadUrl("javascript:myJSFunction()");
            }
        });

    }

}

} 
```

我单击按钮（它位于布局的底部）但不显示警报。如果我在 Chrome 或 Firefox 中打开 HTML，它可以正常工作

发生什么事？

* * *

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:07:14.353

**html**

```
<html>
    <head>
        <script type="text/javascript">
            function myJSFunction(){
               alert('hello, i was hit by Android button');
            }
        </script>
        //OR
        <script type="text/javascript" src="yourJSFile.js"></script>
    </head>
    <body>
       <!--Your content here-->
    </body>
</html> 
```

**你的JSFile.js**

```
function myJSFunction(){
    alert('hello, i was hit by Android button');
} 
```

**创建**

```
myWebView.loadUrl("yourHtml.html"); 
```

然后在单击按钮时调用 javascript：

```
myButton.setOnClickListener(new View.OnClickListener(){
   public void onClick(View v){
      myWebView.loadUrl("javascript:myJSFunction();");
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:44:01.397

你可以像这样调用javascript

```
myWebView.loadUrl("javascript:test('arguments')"); 
```

至于您在评论中提出的第二个问题。

```
Where do i put my javascript file? 
```

webview 可以通过两种方式加载页面，一种是从应用程序加载 html 页面，另一种是指向外部站点。在这两种情况下，JS 都应该放在 HTML 将要查找的位置。

# google-oauth - google 用户请求身份验证 Oauth 本地语言更改

> ID：15654116
> 
> 赞同：1
> 
> 时间：2013-03-27T08:00:12.503
> 
> 标签：google-oauth

我使用谷歌的 API 控制台创建了 API 项目。并且每当我运行 gmail 请求身份验证页面时，总是以英文显示。

但我创建了另一个，现在请求身份验证页面是越南语。所以我检查了网址，`hl=vi`。我从不更改谷歌帐户，我的语言是英语。

```
https://accounts.google.com/o/oauth2/auth?&response_type=code&scope=https://www.googleapis.com/auth/userinfo.email+https://www.googleapis.com/auth/userinfo.profile+https://mail.google.com/mail/feed/atom+https://mail.google.com/&access_type=offline&redirect_uri=http://www.test.com/getdata&approval_prompt=force&state=/profile&client_id=123xyz.apps.googleusercontent.com&hl=vi&from_login=1&as=1234&pli=1 
```

我还检查了 API 控制台 ( [https://code.google.com/apis/console/?pli=1#project:123456:access](https://code.google.com/apis/console/?pli=1#project:123456:access) ) 的设置，但没有。

任何想法将家庭语言设置为英语？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:14:08.873

[只需从身份验证 URL https://accounts.google.com/o/oauth2/auth](https://accounts.google.com/o/oauth2/auth)中删除“hl=vi” 。

# css - 我应该如何处理不是 CSS 中给定元素的直接子元素的元素？

> ID：15654121
> 
> 赞同：0
> 
> 时间：2013-03-27T08:00:45.833
> 
> 标签：css, css-selectors

考虑这个片段：

```
<div class="container">
  <input type="text">
  <div class="myList">
   <input type="text">
  </div>
</div> 
```

我认为以下选择器可以处理整个文本输入，除了那些 myList 的直接子项，显然我错了：

```
.container :not(div.myList) input[type="text"] {
} 
```

我该怎么办？在CSS中可能吗？这是我为加快速度而创建的[http://jsfiddle.net/C46tN/ 。](http://jsfiddle.net/C46tN/)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:24:18.350

你有2个问题：

1）你不能这样做：not（div.myList）。你只能做:not(.myList)。

这是正确的语法：

```
.container :not(.myList) input[type="text"] {
    border:2px solid #f00;
} 
```

如果您将此类仅设置为 div，则这不是一个真正的问题。

2）您对这条规则的真正意思是：inouts 是不属于 myList 类的元素的后代，即容器的后代。这意味着您不会选择容器的直接后代。

# sql - PL/SQL SELECT INTO 错误 (ORA-00905)

> ID：15654124
> 
> 赞同：1
> 
> 时间：2013-03-27T08:00:50.487
> 
> 标签：sql, plsql, oracle11g

我知道在 oracle 11g 中使用了 query(select * into A from B)。但是弹出了错误（ORA-00905：缺少关键字）。有我必须配置的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T08:04:32.687

如果`A`是一个表，并且您想将表中的所有记录插入`B`到`A`，您可以使用`INSERT INTO...SELECT`

```
INSERT INTO A
SELECT *
FROM B 
```

如果你想创建一个`A`根据查询结果命名的表，特别是从 table `A`，使用`CREATE TABLE`

```
create table A as 
select * from B 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-23T15:05:31.090

你可以在 PL/SQL 中这样做：

```
 EXECUTE IMMEDIATE 'SELECT...FROM B' INTO A 
```

其中 B 是表 A 是变量

一个完整的例子：

```
DECLARE
    IND NUMBER;
BEGIN
    ...
    EXECUTE IMMEDIATE 'SELECT MAX(ID) FROM USER' INTO IND;
    ...

END; 
```

# mysql - Entity Framework 5 (MySQL) 作为现有 MVC4 解决方案上的项目（类库）

> ID：15654126
> 
> 赞同：1
> 
> 时间：2013-03-27T08:00:55.023
> 
> 标签：mysql, asp.net-mvc, entity-framework, asp.net-mvc-4

我开始从事我的第一个 EF 项目。

我想在我的解决方案中将 EF 作为单独的类库......

这就是它的外观： [http ://shrani.si/f/3/Xh/32C70yts/ef5.jpg](http://shrani.si/f/3/Xh/32C70yts/ef5.jpg)

我已经开始使用现有数据库并将其导入新的类库（作为 DbModel）我已经将所有引用导入到 MVC4 项目中，所以我能够使用现有的实体类（对于 DbModel.tt， - 比如 User.cs。 ..)

只要我使用这些类（数据库表）一切正常......我可以创建新的控制器......编辑数据，写入数据库......

但是当我尝试编写自己的模型类而不是尝试创建新的控制器（具有 R/W 的 MVC 控制器......使用 EF）时，我收到错误 - 不支持的上下文类型

当然可以创建空的控制器。

我没有在 DB 或 Model first 上找到太多信息（只有真正的基础帮助），大多数信息都是关于 Code first 的方法。

我的 Db 最后应该有大约 100 个表……如果这在 EF 中意味着什么的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:32:23.680

您的问题很难理解，但我假设您正在寻找一个将 Mvc4 与实体框架数据库一起使用的小方向。

我不太明白您的错误，但是您的句子“当我尝试编写自己的模型类时……”让我想到了以下几点：

*   使用数据库优先，您不需要编写实体。它们是从 edmx 文件自动为您生成的。
*   如果您正在使用您的实体编写一些额外的实体类，则该类需要从现有实体继承，以便它与上下文中的某些内容相匹配。
*   如果您在 Model 文件夹中编写一个类来表示与数据库完全无关的内容，那么您的上下文应该无关紧要。例如，如果您正在编写一个名为 Status 的类，它表示未存储在数据库中的当前应用程序状态，它不应该关心您的上下文。只有实体框架创建的对象才需要上下文。
*   您不需要首先使用数据库编写上下文对象。上下文的默认名称是`<database name>Entities`. 我通常会更改它，`<database name>_entities`因为我的数据库名称通常带有下划线。该对象应该在与您放置 edmx 文件的位置相同的目录/命名空间中找到。
*   您的错误听起来像是您编写了自己的上下文。如果 edmx 一切顺利，您应该不需要编写一行代码来连接数据库。您需要在您的 Web.config 文件中有一个连接字符串，但是如果您按照下面解释的 edmx 向导进行操作，这应该会自动发生。

你提到了一个类库。我经常这样做，在公共库中共享模型逻辑：

*   模型是否在 Model 命名空间中实际上并不重要。他们可能来自任何地方。以上几点仍然适用于实体框架的东西
*   在您的视图中，您将需要使用在您的库中找到的任何模型的完整命名空间名称。例如，如果您在名为 DbModel 的模型项目中名为 DB 的文件夹中有一个实体，则您的`@model`声明会说该模型是`DbModel.DB.my_entity`.
*   您需要在 Web.config 文件中包含数据库的连接字符串。它不会从库 App.config 文件中复制。复制和粘贴通常是我使用的，但可能有更聪明的方法。

**这是一个关于实体框架和 MVC4 的小说明**

首先，您需要安装 MySQL 数据和实体包。我通常通过 nuget 来做这些，只是为了让事情变得更容易。听起来你已经这样做了，但我把它放在这里只是为了完成。如果您使用的是单独的库。在该库上使用 NuGet。在构建库和 MVC 项目时，应将适当的 dll 复制到 bin 目录中。

接下来，您需要导入数据库。我发现最好的方法是预测你将要上多少节课。你说大约有 100 个表，所以我建议在你的模型文件夹中创建一个名为 DB 的新文件夹，这样它就不会与其他所有内容混淆。您需要右键单击这个新文件夹并添加一个新项目。选择 ADO.Net 数据模型。它应该创建一个 edmx 文件。从连接事物中选择 MySQL 连接器（按钮显示“更改...”或默认 MSSQL 连接器旁边的类似内容）。输入您的数据库信息，然后按照屏幕上的说明导入您的模型。

您现在应该有一个 DB 文件夹，其中包含一个文件，但是当使用 objectbrowser 或其他工具检查命名空间时，您应该会看到所有表类。

在此之后，您有几个选择：

*   直接在您的视图中使用实体对象。这不需要任何额外的代码
*   编写控制器将传递给视图的视图模型。这些都是基于实体框架对象

您的控制器实际上不应该关心它使用什么模型。下面是一个典型控制器的简短示例，它使用您在模型的 DB 文件夹中创建的上下文：

```
public class HomeController : MvcController
{
    private Model.DB.my_database_context context = new Model.DB.my_database_context();

    public ActionResult ShowSomething()
    {
        return this.View(context.users.First()); //assuming you have a table called user
    }
} 
```

这是非常不可靠的（如果表中没有记录，则使用 First() 会引发异常），但如果您的 Views/Home 文件夹中有一个名为 ShowSomething.cshtml 的视图，它应该如下所示：

```
@model Model.DB.a_table

@Model.user_name 
```

它所要做的就是显示用户名

现在，模型的有趣之处在于使用 Web API 控制器：

```
public class ValuesController : ApiController
{
    private Model.DB.my_database_context context = new Model.DB.my_database_context();

    public IEnumerable Get()
    {
        return context.values; //assuming you have a table called values
    }

    public value Get(string id)
    {
        return context.values.Where(v => v.id == id).FirstOrDefault();
    }
} 
```

这些获取您的上下文并直接输出一个实体，该实体根据请求中的某些标头（Accept-Type 或类似的东西）被序列化为 XML、JSON 或其他内容。

# mysql - MySQL中使用带循环触发器的多个插入语句

> ID：15654129
> 
> 赞同：-1
> 
> 时间：2013-03-27T08:01:01.307
> 
> 标签：mysql, database-design, triggers

我有三张桌子A，B和C。

一个表有列 Aid, Aname

B表有Bid、Aid、Aname、Cid、Cname

C表有Cid,Cname

C表是静态表，有6条记录（以后可能会增加）

要求是当数据插入表 A 时，B 表应使用 Aid 更新，并且所有 Cid 的每一行都具有最大 + 1 的 Bid。

A表每插入一条记录，B表应该插入6条记录（因为C表有6条记录）

这在 MySQL 中使用 Trigger 可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:43:05.813

Yes this is possible using a trigger

```
CREATE TRIGGER b_update_trigger BEFORE INSERT ON b
FOR EACH ROW BEGIN
  ...
END 
```

however **you really shouldn't duplicate data**. You should keep `AName` in `table A` and `CName` in `table C`.

Then you can join them to get the same result:

```
SELECT b.bid, a.aid, a.aname, c.cid, c.cname FROM b
INNER JOIN a
  ON a.aid = b.aid
INNER JOIN c
  ON c.cid = b.cid 
```

# regex - sed 从模式中删除编号的内容

> ID：15654131
> 
> 赞同：0
> 
> 时间：2013-03-27T08:01:07.507
> 
> 标签：regex, sed

我有以下模式

```
<number>5645646546545656756756757</number> 
```

我正在尝试删除该号码，但无法使其正常工作。

```
sed 's/.*<number>[0-9]<\/number>.*/replace/g' xml.log 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T08:04:36.740

如果要删除标签和数字：

```
sed 's@<number>[0-9]*</number>@replace@g' xml.log 
```

如果要删除号码：

```
sed 's@<number>[0-9]*</number>@<number></number>@g' xml.log 
```

如果要进行就地替换（在文件中），请添加`-i`：

```
sed -i 's@<number>[0-9]*</number>@replace@g' xml.log 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:49:18.557

如果要删除数字或标签内的任何字符，可以使用以下内容。所以它不只考虑 <number> 和 </number> 作为标签。

```
sed 's@\(<[^>]*>\)[^<]*\(<[^>]*>\)@\1\2@g'
```

如果模式在一行中出现一次，则删除最后一个 g。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T08:04:35.787

尝试类似：

```
echo '<number>5645646546545656756756757</number>' | sed 's/.*<number>\([0-9]*\)<\/number>.*/\1/g' 
```

# batch-file - 如何将文件夹中的最后修改文件移动到另一个文件夹

> ID：15654132
> 
> 赞同：0
> 
> 时间：2013-03-27T08:01:10.040
> 
> 标签：batch-file

如何将最后修改的文件移动到另一个位置？来源列表：

```
F:\MY DOCUMENTS\Vishnu srma CV_045485_20130228.doc  3/22/2013 2:40 PM
F:\MY DOCUMENTS\Vishnu srma CV_024867_20130228.doc  3/23/2013 1:40 PM
F:\MY DOCUMENTS\Vishnu srma CV_023556_20130228.doc  3/23/2013 3:50 PM 
```

目标文件夹：

```
F:\MY DOCUMENTS\zyx 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:06:38.433

好的，这应该工作：

```
@echo off &setlocal
for /f "delims=" %%i in ('dir /b /od "F:\MY DOCUMENTS\*.doc"') do set "source=%%~i"
copy "F:\MY DOCUMENTS\%source%" "F:\MY DOCUMENTS\zyx" 
```

# rest - 如何在将数据发送到数据库之前根据序列号和 passTypeIdentifier 检查身份验证令牌

> ID：15654133
> 
> 赞同：2
> 
> 时间：2013-03-27T08:01:25.693
> 
> 标签：rest, authentication, passbook

我为存折创建通行证。我也有一个 Web 服务器，它使用 MAMP 和带有 3 个标签的数据库，例如设备、注册和 pass_name。当我注册设备并通过时，我需要检查 Authentication Token 和序列号。检查的结果是什么，我们如何检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:52:07.280

除了我的评论 - 你的过程应该是这样的：

*   创建一个 pass 和 store `authenticationToken`，`passTypeIdentifier`以及`serialNumber`您想要存储在 pass_name 表中的任何其他关于 pass 的数据，也包括一个`lastUpdated`标签。
*   安装 pass - 设备注册并提供`authenticationToken`（在标头中）、、`passTypeIdentifier`和 `serialNumber`（`deviceLibraryIdentifier`在 URL 中）和 `pushToken`（在 POST 正文中）。
*   检查您的 pass_table 是否包含匹配的记录`authenticationToken`，`passTypeIdentifier`并由`serialNumber`设备提供
*   如果没有记录，则返回`401 Unauthorized`响应，否则
*   `deviceLibraryIdentifier-serialNumber`在您的设备表中，使用和 字段`deviceLibraryIdentifier`、`pushToken`、`serialNumber`和的键创建记录`passTypeIdentifier`并`authenticationToken`返回`201`响应。

您`authenticationToken`发出的每张通行证都应该是独一无二的。

您需要在您的设备表中添加`serialNumber`、和`deviceLibraryIdentifier`，以便您的 Web 服务可以在您想要推送更新时找到设备记录并响应[Passbook Web 服务规范中详述的其他请求](https://developer.apple.com/library/ios/#documentation/PassKit/Reference/PassKit_WebService/WebService.html#//apple_ref/doc/uid/TP40011988)`passTypeIdentifier``authenticationToken`

# excel - 对 Excel 文件应用过滤器 - VBA

> ID：15654134
> 
> 赞同：1
> 
> 时间：2013-03-27T08:01:32.057
> 
> 标签：excel, autofilter, vba

无论文件是否打开，我都想对名为“SearchData.xlsx”的文件应用过滤器。

我尝试了以下代码，但它给出了异常。

```
Sub ApplyFilterInDataFile()
    IsOpen = False

    For Each wb In Workbooks
        If LCase(wb.Name) = "searchdata.xlsx" Then
            IsOpen = True
        End If
    Next

    If IsOpen Then
        Workbooks("SearchData").ActiveSheet.UsedRange.AutoFilter Field:=42, Criteria1:=Range("SearchName")
    Else
        Set wb = Workbooks.Open(ThisWorkbook.Path & "\SearchData.xlsx")
        Workbooks("SearchData").Activate
        Workbooks("SearchData").ActiveSheet.UsedRange.AutoFilter Field:=42, Criteria1:=Range("SearchName")
        wb.Close SaveChanges:=True
        Set wb = Nothing
    End If
End Sub 
```

我需要专家帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:23:53.913

试试下面的代码：

```
Sub ApplyFilterInDataFile()

    On Error GoTo err_rout
    Dim wkbPath As String, wb As Workbook, wbkName As String

    wbkName = "SearchData.xlsx"
    wkbPath = ThisWorkbook.Path & "\" & wbkName

    If IsOpen(wkbPath) = False Then Workbooks.Open Filename:=wkbPath

    Set wb = Workbooks(wbkName)
    wb.ActiveSheet.UsedRange.AutoFilter Field:=42, Criteria1:=Range("SearchName")

    wb.Close True
    Set wb = Nothing
    Exit Sub
err_rout:
    MsgBox Err.Description
End Sub

Function IsOpen(strWkbNm As String) As Boolean

    On Error Resume Next

    Dim wBook As Workbook
    Set wBook = Workbooks(strWkbNm)

    If wBook Is Nothing Then    'Not open
        IsOpen = False
        Set wBook = Nothing
        On Error GoTo 0
    Else
        IsOpen = True
        Set wBook = Nothing
        On Error GoTo 0
    End If

End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:10:06.243

试试这个代码：

```
Sub ApplyFilterInDataFile()
    Dim IsOpen As Boolean
    Dim wb As Workbook

    Const cStrWBName As String = "SearchData.xlsx"

    On Error Resume Next
    Set wb = Workbooks(cStrWBName)
    On Error GoTo 0

    If wb Is Nothing Then
        IsOpen = True
        Set wb = Workbooks.Open(ThisWorkbook.Path & "\" & cStrWBName)
    End If

    wb.Sheets("YourSheetName").UsedRange.AutoFilter Field:=42, Criteria1:=Range("SearchName")

    If Not IsOpen Then wb.Close SaveChanges:=True

End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T08:04:33.010

如果文件已保存，您必须使用全名（包括扩展名）引用它：

```
Workbooks("SearchData.Xlsx").Activate 
```

# oracle - PL/SQL：3 维关联数组，其中最后一个数组可以是数字的可变数组或 varchar2（可变长度）

> ID：15654136
> 
> 赞同：2
> 
> 时间：2013-03-27T08:01:54.640
> 
> 标签：oracle, plsql, oracleforms

基本上，我正在创建一个包，它将复制 Oracle Form 的 RecordGroup 函数的过程/函数。我很难模拟这些功能。特别是 RecordGroup（第二维）可以有一个数字或 varchar2（任意长度）列（第三维）。

我在想的是包有一个 3 维关联数组以模拟 oracle 表单程序。

**第一维度**- 包会话中定义的所有 RecordGroups 的集合。这将是一个由 varchar2 索引的 RecordGroups 表。

**2nd Dimension** - 这个维度将是 RecordGroup 本身，一个 varray 表，将模拟为记录组的列。该表将由 varchar2 索引，表示列的名称

**第三维**- 这将是一个数字或 varchar2 的可变数组，其长度特定于列。此可变数组将按其行号进行索引。

我的问题是是否有可能有一个表，例如定义的 RecordGroup，它是一个包含不同数据类型的 varray 的表。如果是这样，关于如何做到这一点的任何想法？如果不可能，无论如何我可以实现定义的行为吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:26:26.483

我假设您的意思*是给定的记录组*包含数字行或字符串行，但不能同时包含两者。在这种情况下：创建 SQL 类型来保存数据并使用多态性为不同的数据类型创建通用记录 grtoup 超类型和特定子类型。

```
create or replace type record_group_t as object (
     rg_name varchar2(30)
     , rg_type varchar2(6)  -- i.e. number or string
 ) 
not final not instantiable;
/

create or replace type rg_strings_nt as table of varchar2(128);
/

create or replace type rg_numbers_nt as table of number(38,0);
/

create or replace type record_group_string under record_group_t (
    rg_recs rg_strings_nt
)
final instantiable;
/

create or replace type record_group_number under record_group_t (
    rg_recs rg_numbers_nt
)
final instantiable;
/ 
```

您可能希望更改特定值，甚至允许更专业的子类型。此外，该`record_group_t.rg_type`属性可能不是必需的 - 这取决于 yopu 将如何使用这些东西。

然后您的记录组集合 - 第一个维度 - 变得简单：

```
create or replace type record_group_nt as table of record_group_t;
/ 
```

`record_group_t`Yiou 可以在使用 TREAT() 和 CAST()的子类型之间切换。重温 Object developer's guide 以[了解更多信息](http://docs.oracle.com/cd/B19306_01/appdev.102/b14260/adobjbas.htm#sthref242)。

# testing - 如何将沙盒用于网站支付标准？

> ID：15654137
> 
> 赞同：2
> 
> 时间：2013-03-27T08:02:00.920
> 
> 标签：testing, paypal, paypal-sandbox

所以听说 PayPal Sandbox 提供的测试环境是**PayPal Pro**。我的公司**没有**使用 PayPal Pro，我们使用的是：网站支付标准、ButtonManagerAPI 来创建动态托管按钮和 IPN 侦听器。

如何确保我的沙盒环境准确地代表标准支付？如果我向我的客户提供标准付款但为 PayPal Pro 测试我的网站，这并不好，我可能会错过一些东西！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-18T22:46:50.563

这是PayPal 关于如何测试 PayPal Standard 的说明[的链接。](https://developer.paypal.com/webapps/developer/docs/classic/paypal-payments-standard/ht_test-pps-buttons/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T20:09:18.500

** 谜团已揭开！** 关于缺少卖家网站的退货链接... 清除您的浏览器缓存并重试！！;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T15:39:56.290

这是针对@PP_MTS_Chad（很抱歉从这里开始，但我不知道如何在 StackOverflow 中解决）：我也在沙箱中测试支付标准。奇怪的事情发生了......在验证付款的最后一个显示页面中，曾经有一个链接，我可以单击该链接返回卖家网站。现在沙箱中缺少该链接。它去哪儿了？我该如何取回它？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T12:43:51.393

您可以使用沙盒测试网站支付标准。您只想设置一个测试沙盒业务帐户用作卖方，然后创建一个测试沙盒买方帐户。然后您可以使用网站支付标准和 ButtonManager API 调用进行测试。您不必使用 Website Payments Pro 功能。即使是 Website Payments Pro 帐户，仍然可以使用标准。不会因为 Pro 帐户使用 Pro 帐户而禁用网站付款标准。

# jquery - Jquery追加或添加

> ID：15654139
> 
> 赞同：0
> 
> 时间：2013-03-27T08:02:06.013
> 
> 标签：jquery, html-agility-pack

我从现有（旧）网站创建移动网站。来自原始网站的内容被加载到移动页面 troughout HTML 敏捷包中。

原网站有一个类似这样的页面：

```
<p>
<a href="#">Link1</a>
<a href="#">Link2</a>
<a href="#">Link3</a>
<a href="#">Link4</a>
</p> 
```

我想要做的是在“link1”下面插入“content1”，在“link2”下面插入“content2”等等。我想通过使用 jQuery 来做到这一点。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:04:32.897

您可以使用该[`jQuery`功能](http://api.jquery.com/jQuery/#jQuery1)（通常别名为`$`）选择要在其后添加的锚点，然后在其后[`after`](http://api.jquery.com/after/)插入内容。您需要一个 CSS 选择器作为锚点。我们不能给你一个保证从给定的小标记中工作的东西，但它会是这样的：

```
$("blah blah p a:eq(0)").after("content after link1");
$("blah blah p a:eq(1)").after("content after link2"); 
```

...其中“等等等等”给了我们更多的上下文，所以我们不会在*每个*段落的第一个锚点之后添加该文本，我猜你不会想要的。:-)

如果除了链接的内容之外没有可以使用的上下文，则*可以*使用[`:contains`选择器](http://api.jquery.com/contains-selector)：

```
$("a:contains('Link1')").after("content after link1"); 
```

...但请注意，它将匹配其中任何位置包含文本“link1”的任何锚点*，*并且选择器可能不由底层浏览器提供，这意味着 jQuery 必须在内部进行搜索，这有点慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:13:29.573

如果您想更改所有这些，您也可以尝试 $.each()

```
$.each($('p a'), function(i,e){$(e).after('content'+i+')}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T08:18:48.213

试试这样：

```
var content = {'0' : 'Content 1','1' : 'Content 2','2' : 'Content 3','3' : 'Content 4' };

jQuery("#anyparentId p a").each(function(index){
    jQuery(this).after('<p>'+content[index]+'</p>');
}); 
```

# jquery - codeigniter, jQuery Mobile, jQuery UI - 脚本在第一次加载时不加载，只刷新

> ID：15654140
> 
> 赞同：0
> 
> 时间：2013-03-27T08:02:07.573
> 
> 标签：jquery, css, codeigniter, jquery-mobile, view

我对我的 codeigniter 应用程序感到困惑。

我有一个视图/表单（视图 1），它在提交时会加载另一个视图（视图 2）。查看 1，在初始页面加载时没有加载正确的 js 和 css。它改为从视图 1 加载 js 和 css。如果我在视图 2 上点击刷新，则加载正确的 css 和 js。

为了证明我的观点，我放置了一个测试 js 脚本

```
<script type='text/javascript'>
alert('test');
</script> 
```

作为视图 1 和视图 2 上的第一位代码。在第一次加载视图 1 时，会显示警报，当我单击视图 1 上的提交并加载视图 2 时，不会显示警报。如果我根据需要刷新警报。

因此 js 和 css 在初始加载时无法正确加载，但在刷新时效果很好。

有任何想法吗？

**查看 1**

```
<script type='text/javascript'>
alert('test');
</script>
<html>
   <head>
      <title>
         Capture New Order
      </title>
      <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />

   </head>
<body>
   <div  data-role="page"  data-theme="a">
      <div class="wrap-header">
         <div data-role="header" data-mini="true"  data-ajax="false">
            <a data-icon="grid" data-mini="true"  data-theme="a" onclick="window.location.href='/pointer'">Menu</a>
            <h3>New Order Details</h3>
         </div>
      </div>   
   <div data-role="content">
   <form id="sales_order_details" action="/sales/new_blank_order_lines" method="post">
         <label for="customer">Select Customer</label>
      <div id="autocomplete_dropdown">
         <input type="text" id="customer" name="customer" />
      </div>

   <label for="period">Desired Order Period</label>
   <select id="period" name="period"> 
      <option value="0"></option>
        <?php
          for($i = 0; $i <= 365; $i ++){
            $startdate = strtotime("today + $i day");
            $enddate = strtotime("today + " . ($i + 6) . " day");
            if(date('D', $startdate) == 'Mon'){
                echo '<option value="' . date('Y-m-d', $startdate) . '">' .date('d M y', $startdate) . " to " . date('d M y', $enddate) . "</option>";
            }
          } 
        ?> 
   </select>

<label>Choose an order type below and provide requested details</label>

  <div data-role="collapsible-set">
      <div data-role="collapsible">
          <h3>
              Auto Spread Order
          </h3>
          <label for="asuom">Unit of Measure for Order</label>
            <select id="asuom" name="asuom"> 
              <option value="0"></option>
              <option value="Bundles">Bundles</option>
              <option value="Cubes">Cubes</option>
              <option value="Pieces">Pieces</option>
            </select>
          <label>Number of Cubes to Autospread</label>
          <input type="text" name="ascubes" id="ascubes">
          <label>Products over which to spread</label>
          must work on this...
          <input type="submit" name="previous_order" id="previous_order" value="Continue">
      </div>
      <div data-role="collapsible">
          <h3>
              Previous Order
          </h3>
          <label>Select Order to use as template</label>
          <input type="submit" name="previous_order" id="previous_order" value="Continue">

      </div>
      <div data-role="collapsible">
          <h3>
              Blank Order
          </h3>
          <label for="buom">Unit of Measure for Order</label>
            <select id="buom" name="buom"> 
              <option value="0"></option>
              <option value="cubes">Bundles</option>
              <option value="cubes">Cubes</option>
              <option value="pcs">Pieces</option>
            </select>
          <input type="submit" name="blank_order" id="blank_order" value="Continue">

      </div>
  </div>

   </form>
   </div>

</body>
</html>

<!-- script for page start-->
     <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
     <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script> 
      <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
<script type="text/javascript">
      $(function(){
        $("#customer").autocomplete({
          source: "get_customers",
          messages: {
          noResults: '',
          results: function() {}
      }

        });
      });
</script> 
```

**查看 2**

```
<script type='text/javascript'>
alert('test');
</script>
<?php 
$newperiod = date('Y-m-d',strtotime($period) + (24*3600*6)); 
?>
<html>
   <head>
      <title>
         Capture blank Order
      </title>

     <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
     <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script> 

<script type="text/javascript"> 
 function callAutocomplete(element) 
 { 
 $(element).autocomplete( 
 { 
 source: "get_sku_codes", 
 messages: 
 { 
 noResults: '', 
 results: function() {} 
 }, 
 select: function( event, ui ) 
 { 
 var selectedObj = ui.item; 
 $.post('sales/get_sku_prices', {data:selectedObj.value},function(result) { 
 $(ui).parent('tr').find('input[id^="pricepercube"]').val(result); 
 }); 
 } 
 }); 
 } 

 $(function() 
 { 
 var counter = 1; 
 jQuery("table.authors-list").on('change','input[name^="qty"]',function(event) 
 { 
 event.preventDefault(); 
 counter++; 
 var newRow = jQuery('<tr>'+ 
 ' <td><a class="deleteRow"> <img src="<?php echo base_url() ?>application/assets/images/no.jpg" /></a></td>' + 
 ' <td><input type="text" id="product' + counter + '" name="product' + counter + '"  /></td>' + 
 ' <td><input type="text" id="qty' + counter + '" name="qty' + counter + '"  /></td>'+ 
 ' <td><input type="text" id="price' + counter + '" name="price' + counter + '" /></td>'+ 
 ' <td><input type="text" id="discount' + counter + '" name="discount' + counter + '"  /></td>'+ 
 ' <td valign=top><input type="checkbox" id="treated' + counter + '" name="treated' + counter + '" /></td>'+ 
 ' </tr>'); 
 jQuery('table.authors-list').append(newRow); 
 callAutocomplete("#product"+ counter); 
 }); 

 $("#product").autocomplete( 
 { 
 source: "get_sku_codes", 
 messages: 
 { 
 noResults: '', 
 results: function() {} 
 }, 
 select: function( event, ui ) 
 { 
 var selectedObj = ui.item; 
 $.post('<?=site_url("sales/get_sku_price")?>', {data:value},function(result)

 { 
 $("#price").val(result); 
 }); 
 } 
 }); 

 }); 

 </script>

  </head>
<body >

      <div class="wrap-header">
         <div data-role="header" data-mini="true"  data-ajax="false">
            <a data-icon="grid" data-mini="true"  data-theme="a" onclick="window.location.href='/pointer'">Menu</a>
            <h3>New Blank Order</h3>
         </div>
      </div>   
      <div data-role="content">
         <center>
            <table width=80%><tr><td>
            <input type="text" name="customer" id="customer" value="<?php echo $customer; ?>" disabled>
               </td><td>
            <input type="text" name="period" id="period" value="<?php echo $period." to ".$newperiod; ?>" disabled>
               </td><td>
            <input type="text" name="buom" id="buom" value="<?php echo $buom; ?>" disabled>
               </td></tr></table>
      </center>
      </div>

<table class="authors-list" border=0>
  <tr><td></td><td>Product</td><td>Qty</td><td>Price/Cube</td><td>Discount</td><td>treated</td></tr>
  <tr>
   <td><a class="deleteRow"> <img src="<?php echo base_url() ?>application/assets/images/no.jpg" /></a></td>
   <td><input type="text" id="product" name="product" /></td>
   <td><input type="text" id="qty" name="qty" /></td>
   <td><input type="text" id="price" name="price" /></td>
   <td><input type="text" id="discount" name="discount" /></td>
   <td valign="top" ><input type="checkbox" id="treated" name="treated" /></td>
</tr>
</table>

</body>
</html> 
```

**初始页面加载**- 没有警报或 js/css 工作 - 只有来自视图 1 的 css 和 js ![在此处输入图像描述](../Images/83c331282d840120975f1e7aaeccbb7e.png)

**刷新加载**- 视图 1 中没有 css 或 js，仅加载了视图 2 css 和 js。请注意，我已经从视图 2 中删除了所有样式，只是为了测试和开始工作。所以下面的图片是我想要的。此处显示警报。这是关闭警报后的负载。 ![在此处输入图像描述](../Images/2932c9419c1c6e9e9abe827660045a4c.png)

我在 IE、Firefox 和 Chrome 中都试过这个，结果都一样。

任何建议表示赞赏。谢谢

**更新**

视图 1：

```
<html>
   <head>
      <title>
         Capture New Order
      </title>
      <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
      <!-- script for page start-->
           <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
           <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script> 
            <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
      <script type="text/javascript">
      $(document).on('pageshow', '#pagebody', function(){   
            $(function(){
              $("#customer").autocomplete({
                source: "get_customers",
                messages: {
                noResults: '',
                results: function() {}
            }

              });
            });
          });
      </script>
      <!-- script for page end-->
   </head>
<body>
   <div  data-role="page"  data-theme="a">
      <div class="wrap-header">
         <div data-role="header" data-mini="true"  data-ajax="false">
            <a data-icon="grid" data-mini="true"  data-theme="a" onclick="window.location.href='/pointer'">Menu</a>
            <h3>New Order Details</h3>
         </div>
      </div>   
   <div data-role="content">
   <form id="sales_order_details" action="/sales/new_blank_order_lines" method="post">
         <label for="customer">Select Customer</label>
      <div id="autocomplete_dropdown">
         <input type="text" id="customer" name="customer" />
      </div>

   <label for="period">Desired Order Period</label>
   <select id="period" name="period"> 
      <option value="0"></option>
        <?php
          for($i = 0; $i <= 365; $i ++){
            $startdate = strtotime("today + $i day");
            $enddate = strtotime("today + " . ($i + 6) . " day");
            if(date('D', $startdate) == 'Mon'){
                echo '<option value="' . date('Y-m-d', $startdate) . '">' .date('d M y', $startdate) . " to " . date('d M y', $enddate) . "</option>";
            }
          } 
        ?> 
   </select>

<label>Choose an order type below and provide requested details</label>
<div  data-role="page"  data-theme="a" id="pagebody">
  <div data-role="collapsible-set">
      <div data-role="collapsible">
          <h3>
              Auto Spread Order
          </h3>
          <label for="asuom">Unit of Measure for Order</label>
            <select id="asuom" name="asuom"> 
              <option value="0"></option>
              <option value="Bundles">Bundles</option>
              <option value="Cubes">Cubes</option>
              <option value="Pieces">Pieces</option>
            </select>
          <label>Number of Cubes to Autospread</label>
          <input type="text" name="ascubes" id="ascubes">
          <label>Products over which to spread</label>
          must work on this...
          <input type="submit" name="previous_order" id="previous_order" value="Continue">
      </div>
      <div data-role="collapsible">
          <h3>
              Previous Order
          </h3>
          <label>Select Order to use as template</label>
          <input type="submit" name="previous_order" id="previous_order" value="Continue">

      </div>
      <div data-role="collapsible">
          <h3>
              Blank Order
          </h3>
          <label for="buom">Unit of Measure for Order</label>
            <select id="buom" name="buom"> 
              <option value="0"></option>
              <option value="cubes">Bundles</option>
              <option value="cubes">Cubes</option>
              <option value="pcs">Pieces</option>
            </select>
          <input type="submit" name="blank_order" id="blank_order" value="Continue">

      </div>
  </div>

   </form>
   </div>

</body>
</html> 
```

视图 2：

```
<?php 
$newperiod = date('Y-m-d',strtotime($period) + (24*3600*6)); 
?>
<html>
   <head>
      <title>
         Capture blank Order
      </title>

     <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
     <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script> 

<script type="text/javascript"> 
$(document).on('pageshow', '#pagebody', function(){   

 function callAutocomplete(element) 
 { 
 $(element).autocomplete( 
 { 
 source: "get_sku_codes", 
 messages: 
 { 
 noResults: '', 
 results: function() {} 
 }, 
select: function( event, ui ) 
 { 
 var selectedObj = ui.item; 
 $.post('get_sku_prices', {data:selectedObj.value},function(result) 
 { 
 $(element).parent().parent().find('input[id^="price"]').val(result); 
 }); 
 } 
 }); 
 }

 $(function() 
 { 
 var counter = 1; 
 jQuery("table.authors-list").on('change','input[name^="qty"]',function(event) 
 { 
 event.preventDefault(); 
 counter++; 
 var newRow = jQuery('<tr>'+ 
 ' <td><a class="deleteRow"> <img src="<?php echo base_url() ?>application/assets/images/no.jpg" /></a></td>' + 
 ' <td><input type="text" id="product' + counter + '" name="product' + counter + '"  /></td>' + 
 ' <td><input type="text" id="price' + counter + '" name="price' + counter + '" /></td>'+ 
 ' <td><input type="text" id="qty' + counter + '" name="qty' + counter + '"  class="linetotal" /></td>'+ 
 ' <td><input type="text" id="total' + counter + '" name="total' + counter + '"  /></td>'+ 
 ' <td><input type="text" id="discount' + counter + '" name="discount' + counter + '"  /></td>'+ 
 ' <td valign=top><input type="checkbox" id="treated' + counter + '" name="treated' + counter + '" /></td>'+ 
 ' </tr>'); 
 jQuery('table.authors-list').append(newRow); 
 callAutocomplete("#product"+ counter); 
 }); 

 $("#product").autocomplete( 
 { 
 source: "get_sku_codes", 
 messages: 
 { 
 noResults: '', 
 results: function() {} 
 }, 
 select: function( event, ui ) 
 { 
  var selectedObj = ui.item; 
 $.post('get_sku_prices', {data:selectedObj.value},function(result) { 
 $("#product").parent().parent().find('input[id^="price"]').val(result[0]);
 }); 
 } 
 });

//code to calculate line cost (price*qty)
var total=Number($('input[id^="price"]').val()) + Number($('input[id^="qty"]').val());
$('input[id^="total"]').val(total);

//code to calculate Grand Total of all line costs (sum of all line totals)

 }); 

});
 </script>

  </head>
<body >
  <div  data-role="page"  data-theme="a" id="pagebody">

      <div class="wrap-header">
         <div data-role="header" data-mini="true"  data-ajax="false">
            <a data-icon="grid" data-mini="true"  data-theme="a" onclick="window.location.href='/pointer'">Menu</a>
            <h3>New Blank Order</h3>
         </div>
      </div>   
      <div data-role="content">
         <center>
            <table width=80%><tr><td>
            <input type="text" name="customer" id="customer" value="<?php echo $customer; ?>" disabled>
               </td><td>
            <input type="text" name="period" id="period" value="<?php echo $period." to ".$newperiod; ?>" disabled>
               </td><td>
            <input type="text" name="buom" id="buom" value="<?php echo $buom; ?>" disabled>
               </td></tr></table>
      </center>
      </div>

<table class="authors-list" border=0>
  <tr><td></td><td>Product</td><td>Price/Cube</td><td>Qty</td><td>Line Total</td><td>Discount</td><td>treated</td></tr>
  <tr>
   <td><a class="deleteRow"> <img src="<?php echo base_url() ?>application/assets/images/no.jpg" /></a></td>
   <td><input type="text" id="product" name="product" /></td>
   <td><input type="text" id="price" name="price" /></td>
   <td><input type="text" id="qty" name="qty" onchange="fill()" /></td>
   <td><input type="text" id="total" name="total" class="linetotal" /></td>
   <td><input type="text" id="discount" name="discount" /></td>
   <td valign="top" ><input type="checkbox" id="treated" name="treated" /></td>
</tr>
</table>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:10:49.653

首先，您的代码中有一个大问题。使用 jQuery Mobile 时，初始化 javascript/jquery 代码的唯一正确方法是 jQuery Mobile 页面事件。如果您使用**`document ready`**或**`$(function(){`**初始化您的代码，它很有可能会失败，因为：

*   有时像这样使用的 javascript 会在页面加载到 DOM 之前触发。这就是为什么它在刷新后工作，内容已经在 DOM 中。
*   即使页面被加载到 DOM 中，jQuery Mobile 仍然需要使用自己的样式和标记来增强它们。

为了防止这种情况，强烈建议使用 jQuery Mobile 页面事件。这是一个工作**`jsFiddle`**示例：http: [//jsfiddle.net/Gajotres/tuJEm/](http://jsfiddle.net/Gajotres/tuJEm/)

```
$(document).on('pageshow', '#index', function(){       
    alert('Page loaded');
});

$(document).on('pagebeforeshow', '#second', function(){       
    alert('Page loaded');
}); 
```

为了使其适用于您的情况，您需要为页面容器提供一个 id：

```
<div  data-role="page"  data-theme="a"> 
```

如果您想更好地理解这一点，请查看这篇**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**，或在**[此处](https://stackoverflow.com/a/14469041/1848600)**找到它。

还有一件事，由于 jQM 页面事件，您不再需要在 HTML 文件末尾加载脚本。无论如何，在 jQM 的情况下，您的 jQm js 和 css 应该始终在您的 html 标头中。

**编辑 ：**

在调查了一个有问题的 jQuery Mobile + Codeigniter 之后。我无法确认这是否有效，但您应该尝试一下。显然 codeigniter 在 jQuery Mobile 如何通过 AJAX 处理页面加载方面存在问题。所以基本的建议是关闭它。

您需要做的第一件事是将所有脚本和样式标签移动到 HEAD 中。每个 PHP 文件都应该有相同的一组 jQuery、jQuery Mobile js 文件加载到头部。这样做是因为我们将阻止页面加载到 DOM 中，并且每个页面都将作为一个实体。

第二件事，打开ajax页面加载：

```
<script>
    $(document).bind("mobileinit", function() {
        $.mobile.ajaxEnabled = false;
    });
</script> <!-- Note your script before jqm --> 
```

还有一件事，**`mobilinit`**必须在 jQuery 之后但在 jQuery Mobile 之前初始化事件，如下所示：

```
<script src="jquery.js"></script>
<script>
    $(document).bind("mobileinit", function() {
        $.mobile.ajaxEnabled = false;
    });
</script> <!-- Note your script before jqm -->
<script src="jquery-mobile.js"></script> 
```

# nfc - 带有 NFC 阅读器和 Android 手机的桌面应用程序 - 交换文件

> ID：15654141
> 
> 赞同：2
> 
> 时间：2013-03-27T08:02:17.140
> 
> 标签：nfc, nfc-p2p

我正在尝试构建一个原型 - 基于 Windows 的触摸 Kiosk 应用程序。此应用程序正在尝试使用 ACR122U 或 SCl3711 启用 NFC。我计划将支持 NFC 的 Android 手机与此应用程序连接。

典型的用例是

*   用户可以在自助服务终端中选择一张图片，然后在自助服务终端的 NFC 阅读器上点击手机，将图片导入手机的安卓应用程序。
*   用户可以通过点击信息亭的 NFC 读取器将图像从 android 应用程序返回到信息亭。

通过我有限的研究，我学到了一些东西——只是想知道我是否走上了正轨

1.  我需要一个可以与 ACR122U 一起使用的 Windows Kiosk 应用程序（.NET 或 JAVA）。与 LLCP 和 SNEP 协商连接以发送和接收 NDEF 消息。我可以将图像作为 NDEF 消息发送吗？如何在 .NET 或 JAVA 中为 ACR122U 实现 LLCP 和 SNEP 协议是否有任何库/示例？
2.  我需要一个可以使用 NFC 接收图像并将图像存储在应用程序中的 android 应用程序。
3.  我应该使用 NDEF 推送还是 Android 发送图像传输？

我还得到了一些关于使用带有 NFC 屏蔽的 Arduino 板和 Android 手机来实现上述原型的建议 - 是否可以使用 NFC 屏蔽 (seedstudio.com) 实现文件传输？

# ios - 底层 SQLite DB 更改时更新 UITableView

> ID：15654147
> 
> 赞同：0
> 
> 时间：2013-03-27T08:03:03.567
> 
> 标签：ios, objective-c, xcode, ios6

我有一个`UITableViewController`视图，它使用 SQLLite DB 作为数据源来构建它的行，如下所示。

我还`UIViewController`更新了使用的 SQL Lite DB `UITableViewController`。但是，它不会更新，`UITableView`因为我假设它会在查询 SQLLite 时知道更改。

当我从- 在 SQL lite DB 中添加条目后 -快速**切换**到.`UIViewController``UITableViewController`

我是 Objective C 和 iOS 的新手，但我知道 Java/Android。在这种情况下，我需要通知视图底层数据源发生了变化（使用通知）。否则可能会发生崩溃/错误。

我是否需要在 iOS 中做同样的事情，我该怎么做？

```
- (int)tableView:(UITableView*)tableView numberOfRowsInSection:(NSInteger)section
{  
    MyAPPAppDelegate *appDelegate = (MyAPPAppDelegate *)[[UIApplication sharedApplication] delegate];

    return [appDelegate.dataModel countMessages]  ;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:22:58.810

从数据库中获取记录后，只需编写带有新记录`reloads`的以下行。`table data`

```
[tbl reloadData]; 
```

# web-services - Web 服务 - 将 OAuth 用于私人网站

> ID：15654149
> 
> 赞同：0
> 
> 时间：2013-03-27T08:03:06.203
> 
> 标签：web-services

我有一个私人网站，我想为它编写一个应用程序，以便学习如何创建一个应用程序。是否建议我使用 OAuth 通过该服务对我的应用程序进行身份验证，即使 API 永远不会供公众使用？我应该如何为完全私有的站点编写 Web 服务？我只想将网站的功能作为一个应用程序提供，但我不想让网络服务公开。

# java - 从我的 jar 中访问 pdf 文件

> ID：15654154
> 
> 赞同：1
> 
> 时间：2013-03-27T08:04:11.123
> 
> 标签：java, java-io

我希望能够在鼠标单击时打开帮助 PDF 文件，PDF 文件包含在`.jar`（并导入到 Eclipse）中。

我正在`Help();`使用 mouseListener 调用（通过 windowbuilder 添加）。鼠标事件正常工作。我遇到的问题是我不确定如何访问 PDF 文件，我不断收到`NullPointerException`报告。

我当前的代码是；

```
if (Desktop.isDesktopSupported()) {
    try {     
        java.io.InputStream is = getClass().getResourceAsStream("/nullpdf.pdf");
        InputStreamReader isr = new InputStreamReader(is);
        BufferedReader br = new BufferedReader(isr);
        StringBuffer sb = new StringBuffer();
        String line;

        while ((line = br.readLine()) !=null){
            sb.append(line);
        }

        br.close();
        isr.close();
        is.close();
        File afile =new File(line);
        Desktop.getDesktop().open(afile);
    }

    catch (IOException ex) {
      System.out.println("NO PDF READER INSTALLED");
    }
} 
```

我还尝试了一个更完整的 nullpdf 文件路径（即“package/co/uk/TabSync/nullpdf.pdf”），但具有相同的`NullPointerException`.

我现在已经编辑了代码来编写一个临时文件，但它仍然无法正常工作：

```
public void Help() {
         if (Desktop.isDesktopSupported()) {
              try {
String tempFile = "nullpdf";
              System.out.println(tempFile);
            File temp =File.createTempFile(tempFile, "/home/geeky/Desktop/nullpdf.pdf");
              Desktop.getDesktop().open(temp);
              }
              catch (IOException ex) {
                  ex.printStackTrace();
                  System.out.println("NO PDF READER INSTALLED");
              }
         }
    } 
```

我还尝试了桌面上 pdf 文件的绝对路径以及 nullpdf.pdf。如果我只使用 nullpdf.pdf，那么我会得到一个打开的 Leafpad 窗口，其中没有任何内容。如果我尝试使用我的 dekstop 的直接文件路径，我会得到以下信息：

```
NO PDF READER INSTALLED
java.io.IOException: No such file or directory
    at java.io.UnixFileSystem.createFileExclusively(Native Method)
    at java.io.File.checkAndCreate(File.java:1717)
    at java.io.File.createTempFile0(File.java:1738)
    at java.io.File.createTempFile(File.java:1850) 
```

我是否需要做一些事情来授予应用程序写入我的文件系统的权限（我习惯于 android dev。这通常是一个问题）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:10:27.887

```
InputStream input = getClass().getResourceAsStream("/classpath/to/file"); 
```

路径必须以“ `/`”开头，因为它在您的`classpath`. 因此，如果您的文件在`com.test`并且您的文件在`myPDF.pdf`，那么您的路径应该是`/com/test/myPDF.pdf`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:10:38.417

```
File afile =new File(line);
Desktop.getDesktop().open(afile); 
```

在文件被物理写入磁盘之前，上面的代码不会打开文件。你错过了文件编写代码。

的用法`File(line)`是错误的。`File()`构造函数采用`String`的是**文件路径**而不是**数据**。第`create()`一个文件，在其上写入数据。并传递`File`to`open()`方法

**编辑：** 另外，不是在随机位置创建文件，而是创建一个临时文件

```
File temp = File.createTempFile(tempFile, ".pdf"); 
```

在其上写入数据并将其传递给`Desktop.open()`

**编辑：2** **首先，您不应将阅读器/编写器用于任何非纯文本文件。PDF 不是纯文本。它是格式化的。您应该仅将其作为流阅读。** 下面的代码有效。但请确保将其包含在 jar 文件中。在 Eclipse 中执行此操作的一种方法是转到 project-properties>java-build-path>source 在此处添加一个文件夹并将 pdf 文件保存在其中。

```
public void Help() {
        if (Desktop.isDesktopSupported()) {
            try {
            InputStream is = getClass().getResourceAsStream("/test.pdf");
            byte[] data = new byte[is.available()];
            is.read(data);
            is.close();
            String tempFile = "file";
            File temp = File.createTempFile(tempFile, ".pdf");
            FileOutputStream fos = new FileOutputStream(temp);
            fos.write(data);
            fos.flush();
            fos.close();
            Desktop.getDesktop().open(temp);
        } catch (IOException ex) {
            ex.printStackTrace();
            System.out.println("NO PDF READER INSTALLED");
        }
    }
} 
```

Ps：这里是如何将文件写入磁盘[http://www.mkyong.com/java/how-to-write-to-file-in-java-bufferedwriter-example/](http://www.mkyong.com/java/how-to-write-to-file-in-java-bufferedwriter-example/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-23T01:53:48.467

此代码工作正常使用此

```
try {
    // TODO add your handling code here:
    String path = jTextField1.getText();
    System.out.println(path);
    Path tempOutput = null;
    String tempFile = "myFile";
    tempOutput = Files.createTempFile(tempFile, ".pdf");
    tempOutput.toFile().deleteOnExit();
    InputStream is = getClass().getResourceAsStream("/JCADG.pdf");
    Files.copy(is,tempOutput,StandardCopyOption.REPLACE_EXISTING);
    if(Desktop.isDesktopSupported())
    {
        Desktop dTop = Desktop.getDesktop();
        if(dTop.isSupported(Desktop.Action.OPEN))
        {
            dTop.open(tempOutput.toFile());
        }
    }
} catch (IOException ex) {} 
```

# javascript - 使用 Java Script 在客户端机器上进行基于全文的搜索

> ID：15654155
> 
> 赞同：2
> 
> 时间：2013-03-27T08:04:11.770
> 
> 标签：javascript, jquery, regex, dom, full-text-search

我正在尝试在客户端计算机上实现基于全文的搜索功能。

我发现[Lunr.js](http://lunrjs.com/)部分满足了我的要求，但它必须加载到像 Apache 这样的服务器上，然后才能完美运行。

就我而言，客户端机器不会安装任何服务器或数据库。一个目录中只有一堆静态 HTML 文件，一个索引文件接受来自搜索框的用户输入，该搜索框在这些静态 HTML 文件中搜索此字符串。

谷歌搜索发现了一些有趣的词，这些词（可能）在我的项目中需要：`innerHtml`、、`DOM`和。`iframes``RegExp`

请根据您的回答制定我的疑问。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T14:22:09.823

我可以想到一种方法 - 您可以使用 XMLHttpRequest 获取本地文件。默认情况下不允许这样做，但例如可以使用以下参数启动 chromium：

```
--allow-file-access-from-files 
```

您必须浏览所有要查看的文件并通过[剥离 html 标记](https://stackoverflow.com/questions/1499889/remove-html-tags-in-javascript-with-regex "剥离html标签")并执行正则表达式来手动实现搜索，这应该不难。

我在铬中测试了以下代码：

```
var xmlhttp = new XMLHttpRequest();
var url = "file:///your-file.html";

xmlhttp.open('GET', url, true);
xmlhttp.onerror = function(e) { console.log('Problems' + e); };

xmlhttp.onreadystatechange=function() {
    if (xmlhttp.readyState === 4 && xmlhttp.status === 0) {
        console.log("Fetched: ");
        console.log(xmlhttp.responseText);

    }
    if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
        // ....
    }
    else if (xmlhttp.readyState==4 && xmlhttp.status != 200) {
        // ....
    }
}

xmlhttp.send(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T16:10:19.063

虽然我没有尝试以这种方式使用它，但你可以看看[jIO](http://www.j-io.org/) ( [Github](https://github.com/nexedi/jio) )

jIO 可用于跨多个存储（浏览器 localstorage、webDav、xWiki、S3...）管理和同步 JSON 文档。存储可以被索引，并且 jIO 带有它自己的查询模块，称为 complexQueries，也可以独立使用。

如果您通过 Ajax 请求页面并提取页面的全文/HTML，只需将其作为文档转储到 jIO 中。

**三种方法（[jIO 文档](http://www.j-io.org/documentation)中的所有示例）：**

**1) 使用普通的本地存储和复杂的查询**
在 jIO 中为您想要搜索的每个文档创建一个文档。所以在设置你的 jIO 之后：

```
var mySearchFiles = JIO.newJio({
    "type" : "local",
    "username" : "whatever",
    "application_name" : "fulltextsearch"
 }); 
```

将完整的 HTML/提取文本（本地存储大小限制...）添加为文档，如下所示：

```
mySearchFiles.put({
    "_id": "your_id",
    "search_result_string": "page_title/page_filename",
    "searchable_text": "your_text_to_be_searched_goes_here",
    function (err, response) {
        // console.log(response) =
        // {
        //  "ok": true,
        //  "id": "your_id",
        // }
    } 
```

);

在搜索时使用`_id`或另一个自定义键作为您希望从 jIO 返回的内容。

然后使用 allDocs 方法在你的 jIO 上运行复杂的查询（[这里](https://github.com/nexedi/jio/blob/master/examples/example-queries.html)是一个使用复杂查询的示例页面）：

```
// here you construct your basic query
var query_object = {
    "query":{
        "filter": {
            // records from/to to be returned
            "limit":[0,10],
            // sort direction
            "sort_on":[[search_result_string, "ascending"]],
            // what fields to return
            "select_list":[["search_result_string"]]
        },
        // wildchard
        "wildcard_character":'%'
    }
};

// build your query - if user entered the variable "search_term":
var search = "searchable_text: = %" + search_term + "%"; 

// add to query object
query_object.query.query = search;

// run the search
mySearchFiles.allDocs(
   query_object,
   function (err, response){
      console.log(response);
   }
); 
```

这应该返回`search_result_string`你想要的。我不知道搜索大文本的速度有多快，但是如果需要，您可以使用[JSCC Parser Generator](http://jscc.phorward-software.com/)编写自己的搜索语法。

**2\. 仅使用复杂查询**
您可以单独使用 ComplexQueries中使用的`parse`、`serialize`和方法。`query`查看[上面的示例页面链接，](https://github.com/nexedi/jio/blob/master/examples/example-queries.html)了解它是如何工作的。

基本上，您需要将要搜索的数据作为对象列表提供，并且您的查询必须被序列化。然后只需调用：

```
var result = jIO.ComplexQueries.query(query, object_list); 
```

当然，你需要一些地方来保存你的可搜索数据，所以我可能会和 localStorage 一起使用。

**3\. 在 localStorage 上添加 indexStorage**
您可以在 localStorage 上添加索引，如下所示：

```
 mySearchFiles = JIO.newJio({
    "type": "indexed",
    "indices": [
        {"name":"index_name", "fields":["field_to_be_indexed_1"]},
        {"name":"index_name2", "fields":["field_to_be_indexed_1","field_to_be_indexed_2"]}
    ],
    "field_types": {
      "field_to_be_indexed_1": "string",
      "field_to_be_indexed_2": "string"
    },
    "sub_storage": {
      "type": "local",
      "username": "whatever",
      "application_name": "fulltextsearch"
    }
}); 
```

这将为您添加到本地存储的所有文档创建一个索引，这将允许您在使用 complexQueries 挖掘所有文件之前对文件进行关键字搜索。所以：

```
mySearchFiles.put({
    "_id": "your_id",
    "search_result_string": "page_title/page_filename",
    "index_field": "keyword",
    "index_field2": "another_keyword",
    "searchable_text": "your_text_to_be_searched_goes_here",
    function (err, response) {
        // console.log(response) =
        // {
        //  "ok": true,
        //  "id": "your_id",
        // }
    }
  ); 
```

您可以调用相同的方法，但 JIO 将始终尝试首先查询索引以构建结果。实际上，这更适用于远程存储位置（在 HTTP 请求文件之前搜索索引，例如 ... S3），但尽管如此，也许还是有用的。

如果您有任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T09:28:02.290

听起来您的 html 文件是静态的，如果是这种情况，您实际上还可以拥有一个 json 文件，其中包含每个 html 文件中的文本。

例如，假设您有两个 html 页面，foo.html 和 bar.html，然后您可以从每个页面中提取相关内容并创建一个包含以下内容的 json 文件：

```
[{
    "id": "foo.html",
    "text": "whatever text is in foo.html"
},{
    "id": "bar.html",
    "text": "whatever text is in bar.html"
}] 
```

这将存在于您的 html 所在的目录中，例如

```
- project_dir
-- foo.html
-- bar.html
-- index.json 
```

然后您可以将索引文件与 lunr.js 一起使用。

您如何实际构建 index.json 文件取决于您可以使用哪些工具，尽管类似于[锅炉管道](https://code.google.com/p/boilerpipe/)或可读性。这里讨论了更多选项[http://readwrite.com/2011/03/19/text-extraction](http://readwrite.com/2011/03/19/text-extraction)

# python - 如何从 subprocess.communicate() 在 python 中捕获流输出

> ID：15654163
> 
> 赞同：4
> 
> 时间：2013-03-27T08:04:55.727
> 
> 标签：python, subprocess, popen

目前，我有这样的事情：

```
self.process = subprocess.Popen(self.cmd, stdout=subprocess.PIPE)
out, err = self.process.communicate() 
```

我正在运行的命令流式传输输出，我需要在继续之前阻止该进程。

如何制作它以便我可以捕获流输出并通过标准输出打印流输出？当我设置时`stdout=subprocess.PIPE`，我可以捕获输出，但它不会打印输出。如果我省略`stdout=subprocess.PIPE`，它会打印输出，但`communicate()`会返回`None`。

有没有一种解决方案可以满足我的要求，同时提供阻塞，直到进程终止/完成并避免[此处](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.wait)提到的缓冲区问题和管道死锁问题？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T08:10:11.153

我能想到几个解决方案。

#1：你可以直接进入源[代码`communicate`](http://hg.python.org/cpython/file/3.3/Lib/subprocess.py#l881)，复制并粘贴它，添加代码来打印每一行，以及缓冲。（如果你自己`stdout`的阻塞可能是因为，比如说，一个死锁的父母，你可以使用 a`threading.Queue`或其他东西。）这显然有点hacky，但它很容易，而且很安全。

但实际上，`communicate`这很复杂，因为它需要完全通用，并处理您不需要的情况。您需要的只是核心技巧：在问题上抛出线程。您只需要一个不会在`read`调用之间缓慢或阻塞的专用读取器线程。

像这样的东西：

```
self.process = subprocess.Popen(self.cmd, stdout=subprocess.PIPE)
lines = []
def reader():
    for line in self.process.stdout:
        lines.append(line)
        sys.stdout.write(line)
t = threading.Thread(target=reader)
t.start()
self.process.wait()
t.join() 
```

`reader`您可能需要在线程中进行一些错误处理。而且我不是 100% 确定你可以`readline`在这里安全地使用。但这要么有效，要么接近。

#2: 或者你可以创建一个包装类，它接受一个文件对象并在每次有人从它时发送到`stdout`/ 。然后手动创建管道，并传入包裹的管道，而不是使用 automagic 。这与 #1 有完全相同的问题（意味着没有问题，或者如果可以阻止，您需要使用 a或其他东西）。`stderr``read``PIPE``Queue``sys.stdout.write`

像这样的东西：

```
class TeeReader(object):
    def __init__(self, input_file, tee_file):
        self.input_file = input_file
        self.tee_file = tee_file
    def read(self, size=-1):
        ret = self.input_file.read(size)
        if ret:
            self.tee_file.write(ret)
        return ret 
```

换句话说，它包装了一个文件对象（或类似文件的东西），并像一个文件对象一样工作。（当您使用时`PIPE`， ,`process.stdout`是 Unix 上的真实文件对象，但可能只是在 Windows 上的行为。）您需要委托给的任何其他方法都`input_file`可以直接委托，而无需任何额外的包装。要么试试这个，看看什么方法`communicate`会被`AttributeException`寻找并明确编码那些，或者做通常的`__getattr__`技巧来委托一切。PS，如果您担心这个“文件对象”的概念意味着磁盘存储，请阅读Wikipedia 上[的 Everything is a file](http://en.wikipedia.org/wiki/Everything_is_a_file)。

#3：最后，您可以获取 PyPI 上的“异步子进程”模块之一，或者包含在`twisted`其他异步框架中并使用它。（这*可以避免*死锁问题，但不能*保证*——您仍然必须确保正确地服务管道。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T08:08:05.427

输出进入您的调用进程，本质上是捕获`stdout`from `self.cmd`，因此输出不会进入其他任何地方。

如果您想查看输出，您需要做的是从“父”进程中打印它。

# java - Java：如何知道 XML 文档何时被修改

> ID：15654167
> 
> 赞同：0
> 
> 时间：2013-03-27T08:05:41.903
> 
> 标签：java, xml, listener, document, domdocument

是否有一些干净的方法可以知道何时修改了 DOM 文档的某些内容，而不必递归到其节点并散列大量数据？

我会避免生成完整的 XML 字符串（请参阅 @AdriaanKoster 的回复）

正如@mthmulders 指出的那样，使用监听器或任何“聪明”似乎是正确的方法。

[我在这里](https://stackoverflow.com/questions/2487492/javadom-registering-and-using-modification-listeners-tutorials)找到了一个有趣的 SO 帖子，也许是答案？

任何提示？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:12:53.460

您可以检查您的`Document`也是否是[`EventTarget`](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/events/EventTarget.html). 如果是这样，您可以使用该`addEventListener`方法来处理任何事件。例如，如果正在处理的事件是[`MutationEvent`](http://docs.oracle.com/javase/7/docs/api/org/w3c/dom/events/MutationEvent.html)，您可能会获得有关文档修改的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:47:15.640

我通过将 Document 序列化为 String 并获取其哈希码来完成此操作。我认为这不是一个非常昂贵的手术。它是这样的：

```
private int calculateHashCode(org.w3c.dom.Document document) {
    try { 
        DOMSource source = new DOMSource(document);
        StringWriter writer = new StringWriter();
        StreamResult result = new StreamResult(stringWriter);
        TransformerFactory factory = TransformerFactory.newInstance();
        Transformer transformer = factory.newTransformer();
        transformer.setOutputProperty("indent","no");
        transformer.transform(domSource, result);        
        return stringWriter.toString().hashCode();
    }
    catch(TransformerException e) {
        return -1;
    }
} 
```

如果出现异常，我将返回 -1，因为我不想在确定 hashCode 时给调用代码增加异常处理的负担。这意味着无法正确检测到无法成功转换的文档更改。

# newrelic - NewRelic 流和 writeHeaders

> ID：15654171
> 
> 赞同：3
> 
> 时间：2013-03-27T08:06:00.677
> 
> 标签：newrelic

我们目前正在评估 New Relic，并且有一个我不确定我是否理解正确的跟踪元素“（WPF 客户端和 WCF 后端） - 它通常显示“流 [某些 url ...]writeheaders”。我的猜测是实际将数据传输到服务器，但是我不确定为什么它说 writeheaders？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-08T16:58:26.773

[我相信这是为Browser Monitoring](https://docs.newrelic.com/docs/browser/new-relic-browser/getting-started/troubleshooting-page-view-monitoring)创建页眉的证据。关于这个系统的一个有趣的事情是，由于 New Relic 试图将应用程序代码中的事务与浏览器内的性能联系起来，每个页面标题都会从应用程序监控代理中获取一个 ID。

自 2013 年以来，该系统发生了重大变化，因此更新后的代理可能会发出与浏览器监控相关的略有不同的调用。

# android - 完成异步任务后如何关闭progressDialog

> ID：15654173
> 
> 赞同：0
> 
> 时间：2013-03-27T08:06:10.013
> 
> 标签：android, progressdialog

下面写的方法用来显示progressDialog(Just a spinner)，

我已将 setCancelable 和 setIndeterminate 设置为 false，因为我不希望用户关闭此 progressDailog。我的问题是，我不知道如何在完成 AsyncTask 后关闭此 progressDialog。请帮助我，我在谷歌上搜索了几个小时来解决同样的问题，看到很多类似的问题，但这些都没有解决我的问题！

```
public class ListFriends extends ListActivity { 
         int intStat; 
         private static final int HOME = 0;
            private static final int ADD = 1;
            private static final int LOGOUT = 2;
            private static final int SETTINGS = 3;
            //private String friend;
            private String user;
            private String deviceUser;
            private String friendNameGlobal;
                        ....
                        ....

 public void onCreate(Bundle icicle) {
            super.onCreate(icicle);
                    ........
                    ........
                    loadFromServer(user);
}
private void loadFromServer(String userReceived) {
        //buildToast("Please Wait while Updating The List");
        showProgress();
        String URL = "http://"+server+"/friendlistmob.php?userid="+userReceived;
         new DownloadXmlTask().execute(URL);
        }
  private class DownloadXmlTask extends AsyncTask<String, Void, String> {
                    .....
                    .....
  }

  protected void onPostExecute(String result) {
                    progressDialog.dismiss();//not working
 }
                   ....
                    ....

public void showProgress()
{
ProgressDialog progressDialog = new ProgressDialog(this);   
progressDialog.setCancelable(false);
progressDialog.setIndeterminate(false);
progressDialog.setMessage("Please Wait while updating List");        
progressDialog.show();
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:09:24.790

您将需要调用`progressDialog.dismiss()`以`onPostExecute`关闭progressDialog：

```
 @Override
    protected void onPostExecute(String result) {

           if (progressDialog !=null && progressDialog.isShowing())  
                progressDialog.dismiss(); //<<dismiss progressDialog here
            }
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T08:09:48.120

```
public class ListFriends extends ListActivity { 
ProgressDialog pd;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    pd= new ProgressDialog(ListActivity.this);
    pd.setTitle("Displaying dialog");  
    new DownloadXmlTask().execute();  
  }

class DownloadXmlTask extends AsyncTask<Void,Void,Void>
 {
      protected void onPreExecute()
      {           super.onPreExecute();
                //display progressdialog.
                 pd.show();
      } 

       protected void doInBackground(Void ...params)
      {  
            //http request. do not update ui here

            return null;
      } 

      //can also show progressupdate

       protected void onPostExecute(Void result)
      {     
                super.onPostExecute(result);
                //dismiss progressdialog.
                //update ui
                pd.dismiss(); 
      } 

   }
} 
```

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T08:09:51.887

Dismiss，方法中的对话框`onPostExecute`。

```
 @Override
    protected void onPostExecute(Void unused) {
               progressDialog.dismiss();

               // Update your UI.
                 } 
```

# c - 让 gcc 以“int 0x80”方式编译系统调用？

> ID：15654175
> 
> 赞同：0
> 
> 时间：2013-03-27T08:06:20.660
> 
> 标签：c, linux, gcc, assembly, system-calls

代码在这里：

```
void main()
{
    _exit(0);
} 
```

通过拆卸主要部分：

```
 80483d4:   55                      push   %ebp
 80483d5:   89 e5                   mov    %esp,%ebp
 80483d7:   83 e4 f0                and    $0xfffffff0,%esp
 80483da:   83 ec 10                sub    $0x10,%esp
 80483dd:   c7 04 24 00 00 00 00    movl   $0x0,(%esp)
 80483e4:   e8 17 ff ff ff          call   8048300 <_exit@plt> 
```

据我所知，进行系统调用的方法是使用“int 0x80”，但我可以在这里找到“call 8048300 exit@plt”，那么我该如何更改 gcc 让它以“int 0x80”方式编译系统调用（我需要我的程序以这种方式调用系统调用）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T08:13:34.507

`gcc -Wall`您应该使用（也可能是`-g`标志）进行编译。

^(这会给你更多的警告，并且会指出一些容易的错误，比如缺乏适当的`#include`)

[exit(3)](http://man7.org/linux/man-pages/man3/exit.3.html)函数是一个库函数（使之成为`atexit`可能）。相应的系统调用是[_exit(2)](http://man7.org/linux/man-pages/man2/_exit.2.html)，但在最近的 Linux`exit`上调用的是[exit_group(2)](http://man7.org/linux/man-pages/man2/exit_group.2.html)。所以你的例子错过了一个`#include <stdlib.h>`

当前的 Linux 实现通常不使用`int 0x80`但通过[VDSO](http://en.wikipedia.org/wiki/VDSO)或至少使用`SYSENTER`或`SYSCALL`机器指令。YMMV。

[正如杰里米回答](https://stackoverflow.com/a/15654279/841108)的那样，您可以使用`asm`; （您可以为正在使用的所有系统调用定义自己的标头，并让这些系统调用成为`static inline`执行某些操作的函数`asm`）请注意，对于其他系统调用，您希望捕获它们的失败和`errno`错误代码。

你为什么要问？.... libc（及其启动例程`crt0.o`...）正在使用复杂的技巧来调用`main`...

另请参阅[此答案](https://stackoverflow.com/a/15603192/841108)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T08:14:29.667

对于 32 位

```
asm( "int $0x80" :: "a" (1), "b" (0) ); 
```

对于 64 位

```
asm( "syscall" :: "a" (60), "D" (0) ); 
```

如果你已经`exit`用 attribute 声明了你的函数，你可能还需要这个`noreturn`。

```
__builtin_unreachable(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T02:50:01.643

系统调用由 glibc 包装，它应该使用底层内核使用的任何内容。Linux 不久前放弃了`int 0x80`性能机制......

为什么要以过时的方式进行系统调用？

# java - 如何将窗口放置在 Android 上的自定义位置？

> ID：15654177
> 
> 赞同：0
> 
> 时间：2013-03-27T08:06:30.460
> 
> 标签：java, android

如何在 android OS 中设置窗口在屏幕上的位置？我想将窗口设置在屏幕的左上角。我怎样才能做到这一点？

基本问题是，我正在为我的活动使用对话框主题。然后活动出现在屏幕中央。我希望它出现在屏幕的左上角。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:51:23.407

感谢您的回答。这对我帮助很大。看了你的回复后，我才得到了关于 Gravity 的提示。在那之前我只是忽略了重力。

所以我建议一个更好的方法。视图放置的最顶层容器是“Window”。DecorView 也是一个将放置在 Window 上的视图。所以有一种简单的方法可以实现我的要求。如下

```
 @Override
    public void onWindowFocusChanged(boolean hasFocus) {
        super.onWindowFocusChanged(hasFocus);
        Window win=getWindow();
        WindowManager.LayoutParams para=win.getAttributes();
        para.gravity=Gravity.LEFT | Gravity.TOP;
        para.x=10;
        para.y=10;
        win.setAttributes(para);
    } 
```

任何方式感谢您的回复。这真的很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:22:07.907

如果您将活动用作主题对话框，则可以使用以下代码

```
 @Override
    public void onAttachedToWindow() {
    super.onAttachedToWindow();

    View view = getWindow().getDecorView();
    WindowManager.LayoutParams lp = (WindowManager.LayoutParams) view.getLayoutParams();
    lp.gravity = Gravity.LEFT | Gravity.TOP;
    lp.x = 10;
    lp.y = 10;
    lp.width = 300;
    lp.height = 300;
    getWindowManager().updateViewLayout(view, lp);
} 
```

如果您正在使用警报对话框并想调整设置，那么您可以按照以下代码片段

```
 private CharSequence[] items = {"Set as Ringtone", "Set as Alarm"};
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setItems(items, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int item) {

            if(item == 0) {

            } else if(item == 1) {

            } else if(item == 2) {

            }
        }
    });

     AlertDialog dialog = builder.create();
     dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
     WindowManager.LayoutParams wmlp = dialog.getWindow().getAttributes();

 wmlp.gravity = Gravity.TOP | Gravity.LEFT;
 wmlp.x = 100;   //x position
 wmlp.y = 100;   //y position

 dialog.show(); 
```

# matlab - 计算标准差结果索引超出矩阵尺寸误差

> ID：15654178
> 
> 赞同：0
> 
> 时间：2013-03-27T08:06:34.607
> 
> 标签：matlab, standard-deviation

我正在计算 250x250 图像的标准偏差，但我收到以下错误，有人可以帮忙吗？

```
 210.2683
??? Index exceeds matrix dimensions.
Error in ==> test at 5
std1=std(g(:)); 
```

我的代码片段是

```
 kl=imread('ai427.jpg');
  g=rgb2gray(kl);
  M=mean(g(:));
  disp(M)
  std1=std(g(:));
  disp(std1) 
```

我不知道错误是什么以及如何解决它（我的意思是我将如何得到结果）

任何帮助表示赞赏......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:18:24.983

首先，将图像转换为`double`,

```
 g=double(rgb2gray(kl)); 
```

然后检查你之前没有使用过这个词`std`作为用户变量或函数，或者`clear std`在该行之前添加，看看它是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:21:00.757

要计算`250x250`图像的标准偏差，您还可以执行以下操作：

```
kl=imread('ai427.jpg');
g=rgb2gray(kl);
M=mean(g(:));
disp(M)
std1=std2(g);
disp(std1) 
```

# javascript - 在 for 循环中按顺序显示 div 并延迟

> ID：15654179
> 
> 赞同：0
> 
> 时间：2013-03-27T08:06:36.163
> 
> 标签：javascript, jquery, html

我遇到了 jquery 的问题，我需要按顺序显示 div。我在文档中的所有 div 都有一个`positioned`. 无法确定错误在哪里。任何帮助将不胜感激。

这是我写的代码，但它似乎不起作用。

```
$(document).ready(function(){

      var items = $('.positioned');
      var delays = 0;

      for ( i=0;i<items.length;i++) {
        items[i].delay(delays).slideDown(200);
        delays = delays + 100;
      }
}); 
```

[http://jsfiddle.net/DARbm/](http://jsfiddle.net/DARbm/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:10:43.197

您尝试`delay`在 DOM 对象上执行方法。尝试这个：

```
for ( i=0;i<items.length;i++) {
    $(items[i]).delay(delays).slideDown(200);
    delays = delays + 100;
} 
```

PS我是对的。检查：http: [//jsfiddle.net/DARbm/2/](http://jsfiddle.net/DARbm/2/)

# c++ - C++：对象、对对象的引用、对带有和不带有函数的向量元素的引用——观察到的性能差异

> ID：15654181
> 
> 赞同：0
> 
> 时间：2013-03-27T08:06:45.023
> 
> 标签：c++, performance, vector, reference, double

一个 C++ 初学者的问题，一大早就头疼。如果您想查看，请跳至页面底部的代码。我正在对具有不同标识符但类型相同（即`double`）的几个变量应用一些操作。这些操作要么通过外部函数调用完成，要么在 main 内完成。

我考虑了**6**种情况

**(1) 局部对象不调用函数**

**(2) 引用对象不调用函数**

**(3) 引用向量中的元素不调用函数**

**(4) 局部对象调用函数**

**(5) 引用对象不调用函数**

**(6) 向量调用函数中元素的引用**

我得到了一些有趣的结果（无论如何对我来说）。(1) 和 (2) 平均耗时 574 毫秒，而 (3)、(4)、(5) 和 (6) 均耗时约 2.77 秒。

我承认（4），（5）和（6）可能是由于传入元素而导致函数调用产生的开销。我遇到了一些问题，

*   为什么对向量元素的引用（即（3））的计算也与调用函数花费相同的时间？这是否意味着在调用向量元素的引用和为相似的函数提供值之间存在某种开销？（请注意，这种情况下的函数不取`double&`，而是取`double`）。

*   如果我将函数参数全部更改为`&double`，为什么 (1) 和 (2) 需要 2.7 秒？？？我的意思是，我什至没有调用 (1) 和 (2) 的函数！（其他人可以试试这个 - 因为我觉得这很奇怪）

*   如果有的话，有什么特别的方法可以优化这些吗？

代码：在 Windows MinGW 上使用`g++ 4.7.2`with编译。`g++ -std=c++11 -O3`

```
#include <iostream> // c++ input/output libraries
#include <stdio.h>  
#include <vector> 

#include "timer.h"  

void do_some_calc(double aa, double bb, double cc, double dd, double ee)
{
double total{0}, add{0};
for(int tests=0; tests<5; ++tests) {
    Timer Time;
    Time.start();
    for(int i=0; i<100000; ++i)
    {
        for(int j=0; j<2000; ++j)
        {
            add = aa*bb/cc*dd/ee;
            total += add;
            aa=aa/2;
            bb=bb/2;
            cc=cc/2;
            dd=dd/2;
            ee=ee/2;
            aa=aa*2;
            bb=bb*2;
            cc=cc*2;
            dd=dd*2;
            ee=ee*2;

        }
    }
    cout << total << " with " << add << endl;
    Time.finish("func call");
}
}

int main()
{

// the numbers 12, 13,14,13 and 12 tied to a vector
std::vector<double> ch{12,13,14,13,12};

// the numbers 12, 13,14,13 and 12 tied to independent objects
double a = 12;
double b = 13;
double c = 14;
double d = 13;
double e = 12;

    // reference to objects
double& a_ref = a;
double& b_ref = b;
double& c_ref = c;
double& d_ref = d;
double& e_ref = e;

    // reference to vector elements
double& a_vref = ch[0];
double& b_vref = ch[1];
double& c_vref = ch[2];
double& d_vref = ch[3];
double& e_vref = ch[4];

cout << "1) normal without function (i.e. local):" << endl;
double total{0}, add{0};
for(int tests=0; tests<5; ++tests) {
    Timer Time;
    Time.start();
    for(int i=0; i<100000; ++i)
    {
        for(int j=0; j<2000; ++j)
        {
            add = a*b/c*d/e;
            total += add;
            a=a/2;
            b=b/2;
            c=c/2;
            d=d/2;
            e=e/2;
            a=a*2;
            b=b*2;
            c=c*2;
            d=d*2;
            e=e*2;

        }
    }
    cout << total << " with " << add << endl;
    Time.finish("obj");
}

cout << "\n\n2) reference to double obj without function (i.e. local):" << endl;
total=0, add=0;
for(int tests=0; tests<5; ++tests) {
    Timer Time;
    Time.start();
    for(int i=0; i<100000; ++i)
    {
        for(int j=0; j<2000; ++j)
        {
            add = a_ref*b_ref/c_ref*d_ref/e_ref;
            total += add;
            a_ref=a_ref/2;
            b_ref=b_ref/2;
            c_ref=c_ref/2;
            d_ref=d_ref/2;
            e_ref=e_ref/2;
            a_ref=a_ref*2;
            b_ref=b_ref*2;
            c_ref=c_ref*2;
            d_ref=d_ref*2;
            e_ref=e_ref*2;

        }
    }
    cout << total << " with " << add << endl;
    Time.finish("ref obj");
}

cout << "\n\n3) reference to double obj from vector without function (i.e. local):" << endl;
total=0, add=0;
for(int tests=0; tests<5; ++tests) {
    Timer Time;
    Time.start();
    for(int i=0; i<100000; ++i)
    {
        for(int j=0; j<2000; ++j)
        {
            add = a_vref*b_vref/c_vref*d_vref/e_vref;
            total += add;
            a_vref=a_vref/2;
            b_vref=b_vref/2;
            c_vref=c_vref/2;
            d_vref=d_vref/2;
            e_vref=e_vref/2;
            a_vref=a_vref*2;
            b_vref=b_vref*2;
            c_vref=c_vref*2;
            d_vref=d_vref*2;
            e_vref=e_vref*2;

        }
    }
    cout << total << " with " << add << endl;
    Time.finish("ref vec");
}

//cout << "\n\nreference to obj from vector without function (i.e. local):" << endl;

cout << "\n\n4) normal with function:" << endl;
do_some_calc(a,b,c,d,e);

cout << "\n\n5) reference to double obj with function:" << endl;
do_some_calc(a_ref,b_ref,c_ref,d_ref,e_ref);

cout << "\n\n6) reference to double obj from vector with function:" << endl;
do_some_calc(a_vref,b_vref,c_vref,d_vref,e_vref);

return 0;
} 
```

这是`#include "Timer.h"`我创建的自定义，用于计算时间

```
/*
Timer class for c++11 and pre c++11 (i.e. c++03 and c++99 etc) [version 0.1]
This is currently static and does not include multiple starts
Author:
currently tested on GCC only
*/
#ifndef TIMER_H
#define TIMER_H

#include <string>
#include <iostream>
#if (__cplusplus >= 201103L)
#include <chrono>   // include new c++11 object for timer
#include <ratio>
#else
#include <ctime>    // include pre c++11 object for timer
#endif

class Timer  {

private:
#if __cplusplus >= 201103L
typedef std::chrono::high_resolution_clock::time_point hiResClock;
typedef std::chrono::duration<long double,std::micro> micro_t;
hiResClock store;
#else
long double store;
#endif

public:
    void start(void);                       // [c++11]  method: start     timer
void finish(const std::string& disp);           // [both]   method: finish timer

};  // end of class Timer

inline void Timer::start(void)
{
#if __cplusplus >= 201103L
store = std::chrono::high_resolution_clock::now();
#else
store = (long double)std::clock()/CLOCKS_PER_SEC;
#endif
}

void Timer::finish(const std::string& disp)
{
std::cout << "Time taken: ";
#if __cplusplus >= 201103L
Timer::micro_t out = std::chrono::duration_cast<Timer::micro_t>    (std::chrono::high_resolution_clock::now()-store);
long double temp = out.count();
if(temp<1000)
    std::cout << out.count() << " micro-seconds" << std::endl;
else if(temp<1000000)
    std::cout << out.count()/1000 << " milli-seconds" << std::endl;
else if(temp<1000000000)
    std::cout << out.count()/1000000 << " seconds" << std::endl;
else if(temp<60000000000)
    std::cout << out.count()/60000000L << " minutes" << std::endl;
else
    std::cout << out.count()/3600000000ULL << " hours" << std::endl;
#else
    std::cout << ((long double)std::clock()/CLOCKS_PER_SEC-store) << " seconds" << std::endl;
#endif
    std::cout << "  For: " << disp << std::endl;
}

#endif  // instantiate Timer.h once 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:23:18.600

虽然这在技术上不是一个答案，但我建议在进行性能测量时不要使用时钟，因为在您运行测试时，CPU 可能处于也可能不处于 SpeedStep 模式（即以较低的频率运行以节省力量）。

相反，试试这个 x86 特定的东西：

[http://en.wikipedia.org/wiki/Time_Stamp_Counter](http://en.wikipedia.org/wiki/Time_Stamp_Counter)

你可以像这样使用它：

```
#include <cstdint>

// Read the CPU Time Stamp Counter
::uint64_t getTicks() noexcept
{
     register ::uint32_t lo, hi;
#ifdef SUPPORTS_RDTSCP
     __asm__ __volatile__ ("rdtscp" // On i7 we can remove cpuid and use rdtscp
            : "=a"(lo), "=d"(hi)
            :
            : );
#else
__asm__ __volatile__ ("cpuid \n\t rdtsc" // On lesser chips there is no RDTSCP instruction
            : "=a"(lo), "=d"(hi)    // Works in 32- or 64-bit modes (don't use "=A"!!!)
            :
            : "ebx", "ecx");        // Because of cpuid
#endif
    return (::uint64_t)hi<<32 | lo;
} 
```

如您所见，您需要根据您拥有的芯片类型定义 SUPPORTS_RDTSCP。

无论 CPU 以何种速度运行，在测量给定指令序列经过了多少滴答时，滴答数应该大致相同。请记住，流水线和乱序执行将会和所有这些东西都会使它略有不同，但它比使用您正在使用的时钟东西要接近得多。

# git - 如何禁用直接推送到 Gerrit？

> ID：15654184
> 
> 赞同：6
> 
> 时间：2013-03-27T08:07:00.767
> 
> 标签：git, gerrit

在与 Gerrit 合作时，预期`push`是：

```
git push origin HEAD:refs/for/branch 
```

但是一些坏人似乎以一种简单的方式做到了这一点（他们从一些 Git 手册中学到了）：

```
git push origin 
```

或者

```
git push 
```

这些操作会导致严重的问题：

*   提交直接合并到远程服务器中的主（或某些默认）分支。
*   虽然这些家伙写了一些提交消息，但`git log`找不到它们。
*   也许更多...

有没有办法`push`在 Gerrit 设置中禁用这些操作？还是在客户端禁用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T10:29:54.903

Gerrit 管理 UI 中有权限。权限是从`All-Projects`项目继承的。看看那里（Admin => Project => All-Projects => Access）并删除对 master 上任何人的推送权限。此处文档中的更多详细信息：[访问控制](https://gerrit.wikimedia.org/r/Documentation/access-control.html#category_push)

# paypal - 当我有很多收款人和付款人时，我应该为 Paypal 使用哪个 API

> ID：15654185
> 
> 赞同：2
> 
> 时间：2013-03-27T08:07:14.453
> 
> 标签：paypal, recurring-billing

我正在构建一个可能有点复杂的项目，我必须为此使用贝宝。

该应用程序中有许多用户，他们可以是接收者、付款者或两者兼而有之。收款人/卖家提供某些服务，付款人必须每月向卖家付款。因此，如果用户同意付款，贝宝将按月自动向他收费。用户需要事先注册为贝宝会员并获得贝宝的授权，以便我可以使用他们的电子邮件在应用程序中进行交易。

我正在考虑使用带有重复 api 的 paypal express checkout，但我不确定这是否是正确的决定，也不知道它是否有效。有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:49:15.247

您可以使用 Express Checkout、带有网站支付标准的订阅或带有网站支付标准的增强定期支付。其中任何一个都可以让您设置定期付款。Enhanced Recurring Payments 是唯一一种每月收取费用的付款方式。带有网站付款标准的快速结帐和订阅将不收取月费。但是，增强的定期付款允许买家注册订阅，而无需拥有 PayPal 帐户，他们只需使用信用卡即可。带有网站支付标准的快速结账和订阅要求买家拥有 PayPal 帐户。他们仍然可以通过信用卡收费，但他们必须将信用卡附加到他们的 PayPal 帐户。订阅将向 PayPal 帐户收费，

使用 PayPal 帐户，您的用户可以根据这些帐户所在的国家/地区接收或发送资金。

# c - C - websocket - recv 读取超过有效负载长度

> ID：15654187
> 
> 赞同：0
> 
> 时间：2013-03-27T08:07:15.080
> 
> 标签：c, websocket, recv, payload

我正在用 C 构建一个 websocket 服务器。现在它遵循 rfc6455 规范，并且我已经设法实现了聊天协议，这样连接的客户端就可以相互发送消息。为了测试我的服务器的强度，我运行了一段 javascript 来测试它是否可以每秒处理来自同一客户端的多条消息：

```
i = ''; a = 0; t = setInterval('a++; i += "...................................................................................................."; doSend(a + i);', 20); 
```

上面的代码所做的是每 20 毫秒发送一条消息。此外，每条消息发送的消息大 100 字节。服务器设法获取消息并将其发送到连接的客户端前 360 次，但随后发生了一些奇怪的事情。

对于服务器接收到的每条消息，它都会获取它的有效负载长度，对于消息 360，它是 360*100+3 = 36003。这个值在消息的第一部分中给出，所以我们依赖于消息实际上会长度为 36003 字节。

我使用函数 recv 从套接字连接接收数据，现在我的缓冲区大小为 8192 字节。当我收到大于缓冲区大小的消息时，我只需再次调用 recv 直到收到整个消息。奇怪的是，当我收到 360 号消息时，我应该读取缓冲区 5 次（5*8192 > 40000）才能接收到整个消息。recv 函数返回一个完整的缓冲区，而不是我的读取数 5 是 3235 字节（36003-（4*8192））。8192 字节。有没有人知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:17:42.703

@simonc 你完全正确，当快速收到消息时，它们会合并到recv收到的同一条消息中。因此，如果缓冲区比预期的长，我必须将从 recv 收到的消息拆分为多条消息。非常感谢！:)

# doxygen - 是否可以不在顶层树视图中显示 \xrefitem 页面？

> ID：15654189
> 
> 赞同：1
> 
> 时间：2013-03-27T08:07:30.200
> 
> 标签：doxygen

我正在使用 ALIAS 和 \xrefitem 将特定的评论列表收集到单独的页面中以供参考。这工作正常，但是，这些特定页面中的每一个都出现在顶级树视图中。对于其他页面/子页面层次结构，我构建了一个 MarkDown 索引页面，该页面显示在顶层，然后引用其他页面，从而保持我的树视图整洁。我对外部物品页面做了同样的事情，并且索引页面工作正常，但外部物品页面仍然出现在顶级树视图中。

有什么办法可以阻止这种情况，以保持树视图的清洁？

干杯

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-24T18:31:04.500

在 markdown 文件中尝试此操作（或在您现有的主页中使用）：

```
Scratch                 {#mainpage}
==================================

\subpage custom
\xrefitem xrefitem_subpage "xrefitem Heading" "xrefitem Title" Item to document

\page custom My Custom Pages
\subpage xrefitem_subpage

\page xrefitem_subpage Key Three Page
Some Text 
```

# java - 应用程序主方法是否在终止之前等待线程

> ID：15654191
> 
> 赞同：3
> 
> 时间：2013-03-27T08:07:44.480
> 
> 标签：java

假设我创建了一个 Java 应用程序，它的 main 方法中运行了一个线程。

在 main 方法中的所有代码都被执行之后。应用程序会等待线程直到它完成执行，还是会终止应用程序和 JVM。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T08:15:36.663

从[`java.lang.Thread`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html)文档：

> 当 Java 虚拟机启动时，通常有一个非守护线程（通常调用某个指定类的名为 main 的方法）。Java 虚拟机继续执行线程，直到发生以下任一情况：
> 
> *   已调用 Runtime 类的退出方法，并且安全管理器已允许进行退出操作。
> *   所有不是守护线程的线程都已经死亡，要么通过调用 run 方法返回，要么抛出传播到 run 方法之外的异常。

所以，是的，它会等待，但不会等待标记为守护线程的线程。

您可以看到它使用以下代码：

```
public class ThreadTest {

    public static void main(String[] args) {
        Thread thread = new Thread(new Runnable() {
            public void run() {
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                System.out.println("I'm still here!");
            }
        });
        // uncomment following line to test with daemon thread
        //thread.setDaemon(true);
        thread.start();

        System.out.println("Finished!");
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:09:47.333

> 应用程序会等待线程直到它完成执行

是的，无论主线程是否完全执行，它都会等待执行完成子线程。

它不会等待守护线程。如果线程通过调用设置为守护线程`Thread.setDaemon(true);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T08:20:39.243

这取决于启动的线程是什么类型的线程。当唯一运行的线程都是守护线程时，JVM 退出。

默认情况下，线程不是守护线程。要使线程成为守护线程，请在启动它*之前*调用。[`Thread.setDaemon(true)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#setDaemon%28boolean%29)

# c - 函数指针赋值

> ID：15654192
> 
> 赞同：4
> 
> 时间：2013-03-27T08:07:51.420
> 
> 标签：c, compiler-errors, function-pointers

[在 Visual Studio 2012 中](https://stackoverflow.com/questions/15653604/function-pointer-in-visual-studio-2012/15653714#15653714)的函数指针问题之后，我开始怀疑 C 中对函数指针的某些赋值的合法性。

下面的代码编译时会出现警告，正如我所期望的那样，因为分配的函数需要**的**参数比函数指针声明所描述的参数多（[GCC 4.8](http://liveworkspace.org/code/3mnLvT$2)）：

```
#include <stdio.h>

int test(int x, int y)
{
    printf("%d", x);
    printf("%d", y);
    return 0;
}

int main()
{
    int (*test_ptr)(int);
    test_ptr = test;
    test_ptr(1);
    return 0;
} 
```

如果更改代码以使分配的函数需要**更少的**参数（[GCC 4.8](http://liveworkspace.org/code/3kVPvH$0)），则会出现相同的警告。同样，这是意料之中的。

但是，尽管分配的函数需要 2 个参数而不是 0 ( [GCC 4.8](http://liveworkspace.org/code/2vzpu1$26) )，但以下代码编译时没有任何警告：

```
#include <stdio.h>

int test(int x, int y)
{
    printf("%d", x);
    printf("%d", y);
    return 0;
}

int main()
{
    int (*test_ptr)();
    test_ptr = test;
    test_ptr();
    return 0;
} 
```

任何地方都不涉及铸件。

谁能解释这个编译器行为？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T08:09:44.637

以下：

```
int (*test_ptr)(); 
```

接受*未指定*数量的参数，而不是零参数。

对于后者，写

```
int (*test_ptr)(void); 
```

PS 调用具有零参数的双参数函数会导致未定义的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T08:13:20.680

从函数指针转换为函数指针是合法的。非法的是调用类型与实际指向的函数不兼容的函数指针。

C99 6.3.2.3 标准杆。8：

> 指向一种类型的函数的指针可以转换为指向另一种类型的函数的指针，然后再返回；结果应与原始指针比较。如果转换后的指针用于调用类型与指向的类型不兼容的函数，则行为未定义

如果您的编译器准确警告未定义的行为，它应该在`test_ptr();`. 但是不能期望编译器对所有未定义的行为发出警告或只对未定义的行为发出警告。

* * *

这个静态分析器（我和其他人一起工作）会尽力警告所有未定义的行为，并且只警告未定义的行为。涉及很多妥协，但在这种特殊情况下：

```
$ cat > fp.c

int test(int x, int y)
{
    printf("%d", x);
    printf("%d", y);
    return 0;
}

int main()
{
    int (*test_ptr)();
    test_ptr = test;
    test_ptr();
    return 0;
}
$ frama-c -val fp.c
...
fp.c:13:[value] warning: Function type must match type at call site: assert(function type matches) 
```

第 13 行是`test_ptr();`.

# php - htaccess 重定向带问号

> ID：15654198
> 
> 赞同：-2
> 
> 时间：2013-03-27T08:08:34.867
> 
> 标签：php, .htaccess

我需要通过.htaccess重定向`/search?q=vehicles`到。`/search.php?q=vehicles`

我不是 .htaccess 方面的专家。我尝试了一些代码，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:17:45.217

这是一个简单的[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)

```
RewriteEngine on
RewriteRule ^search$ /search.php 
```

查询字符串[不变地传递](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)。

# mysql - 如何查看数据节点上的数据

> ID：15654202
> 
> 赞同：0
> 
> 时间：2013-03-27T08:08:46.900
> 
> 标签：mysql, cluster-computing

我正在使用 mysql 集群，我知道数据节点上的 mysql 集群自动分片数据（当我使用 engine= ndb 时），我的问题是当我的数据库分片时如何在数据节点机器上显示数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:56:12.607

可以通过挂接到集群的 MySQL Server 查看每个节点上的数据

# php - 反序列化数据的偏移量错误（尝试了通常的解决方案）

> ID：15654203
> 
> 赞同：0
> 
> 时间：2013-03-27T08:08:47.530
> 
> 标签：php, json, serialization

我正在从 Instagram 和 Facebook 提取 2 个图像源。对于这两者，我最终得到了如下所示的数组，我将它们组合并存储在 MySQL 中。

```
 [1] => Array
    (
        [id] => 10151385447249771
        [small] => http://sphotos-b.ak.fbcdn.net/hphotos-ak-prn1/s320x320/602882_10151385447249771_875867185_n.jpg
        [large] => http://sphotos-b.ak.fbcdn.net/hphotos-ak-prn1/s600x600/602882_10151385447249771_875867185_n.jpg
        [date] => 1359526678
        [date_display] => 5:17 pm, 30 Jan 2013
        [name] => Something cool
        [link] => http://www.facebook.com/photo.php?fbid=10151385447249771&set=a.10151385444664771.496088.112462694770&type=1
        [caption] => Photo by Jimbo James
        [type] => facebook
    ) 
```

然后我执行以下操作：

```
$photos = array_merge($facebook_photos,$instagram_photos);

usort($photos, array($this, "sort_photos"));

$photos = array_reverse($photos); 
```

如果我在这里输出数组，那很好。我也可以序列化和反序列化，这很好

但是，在我将其存储在 MySQL 中，然后将其拉出并反序列化后，我收到“偏移错误”消息。

```
return mb_unserialize($feed['data']);

public function mb_unserialize($serial_str) { 
    $out = preg_replace('!s:(\d+):"(.*?)";!se', "'s:'.strlen('$2').':\"$2\";'", $serial_str ); 
    $out = unserialize($out); 
    return  json_decode(stripslashes(json_encode($out)), true);
} 
```

我正在使用 BLOB 列来存储数据。我已经尝试过 base64 编码/解码以及存储为 JSON。还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:14:07.330

简单的解决方案：BLOB 不够大。我将其更改为 LONGBLOB，瞧。

# celery - 我如何使用scrapy来完成一个带有芹菜的分布式刮刀？

> ID：15654206
> 
> 赞同：1
> 
> 时间：2013-03-27T08:09:22.613
> 
> 标签：celery, scrapy

现在我想用scrapy和celery完成一个分布式刮板，我目前的想法是使用主从方法，有人能告诉我这是个好主意吗？有没有一个好的开源项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T11:11:17.627

当我实现分布式爬行设置时，我在 redis 的帮助下实现了这一点。这是我的做法。

我有一个要抓取的域列表。我会将这些域上传到 redis。在我的项目中，我有 30K 域可以从中抓取数据。

使用 redis-py 客户端与 redis 对话，并将每个 url 提供给 scrapy。

# c++ - 在两个不同的 .o 文件中对多个函数进行多重定义。

> ID：15654214
> 
> 赞同：0
> 
> 时间：2013-03-27T08:09:49.840
> 
> 标签：c++, arduino

基本上我有很多这样的错误：

```
 IMU/IMU.cpp.o: In function `MPU6050::dmpInitialize()':
   Projects/Arduino/libraries/IMU/MPU6050_6Axis_MotionApps20.h:281: multiple definition of `MPU6050::dmpInitialize()'  
    Quadcopter.cpp.o:Projects/Arduino/libraries/IMU/MPU6050_6Axis_MotionApps20.h:281: first defined here 
```

但我不确定如何解决这个问题。我研究了其他几个类似的问题，但没有找到与此代码相关的任何答案。

* * *

.ino

```
#include <Wire.h>
#include <IMU.h> 
IMU imuController;
void setup() {
  Wire.begin();
  imuController.init();
} 
```

* * *

IMU.h

```
#include "MPU6050_6Axis_MotionApps20.h" 
```

* * *

MPU6050_6Axis_MotionApps20.h

```
#include "I2Cdev.h"
#include "helper_3dmath.h"
#include "MPU6050.h"
#include <avr/pgmspace.h> 
```

* * *

MPU6050.h

```
#include "I2Cdev.h"
#include <avr/pgmspace.h> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:14:13.167

这可能是因为您的头文件被多次包含。你可以做的是这样定义警卫：

```
#ifndef SOMEVAR - *make sure the file is included only once in the current scope*
#define SOMEVAR
//Symbol definitions
#endif 
```

或者，如果您的编译器支持，您可以在头文件中包含一次#pragma。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:22:36.930

正如 WB 建议的那样，您需要为您定义的每个头文件[包含保护](http://en.wikipedia.org/wiki/Include_guard)。

类似 Ex: Header.h

```
 #ifndef HEADER_H
   #define HEADER_H
   // Header stuff in here...  
   #endif 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-19T23:32:03.343

这已经晚了 7 年，但这就是我所做的

1.  在我自己的`mpu_sensor.h`文件中，我只包括

```
#ifndef MPU_SENSOR_H
#define MPU_SENSOR_H

#include "MPU6050.h"
#include "helper_3dmath.h"
....
#endif 
```

请注意，我没有`MPU6050_6Axis_MotionApps20`，因为大多数数据类型都是

2.  在我的`mpu_sensor.cpp`文件中，这是我的包括：

```
#include "MPU6050_6Axis_MotionApps20.h"
#include "mpu_sensor.h" 
```

请注意，`MPU6050_6Axis_MotionApps20.h`必须在我包含我自己的头文件之前。

现在可以了。我同意图书馆本身应该更新，但似乎作者在过去几年没有更新。

# asp.net - 图像在 Outlook 中始终以其实际尺寸显示

> ID：15654221
> 
> 赞同：0
> 
> 时间：2013-03-27T08:10:22.380
> 
> 标签：asp.net, html, css, email, outlook

我正在通过电子邮件发送一个 asp.net 网页，在 Gmail、Yahoo 和 Hotmail 中一切正常，但在 Outlook 中，徽标图像以其实际宽度和高度显示。自定义宽度和高度不适用。这是[Outlook 视图](http://screencast.com/t/NXHCiMra2h6E) ，这是[gmail 视图](http://screencast.com/t/0wOumfwZ4vgX.) ，这里是标记，url 是从后面的代码中分配的

```
<table border="0" 
       cellpadding="0" 
       cellspacing="0" 
       width="167" 
       style="width: 167px; padding: 3px 0 7px 60px; height: 132px;">
  <tbody>
    <tr>
      <td valign="top" style="width: 127px; height: 104px;">
        <div style="padding-top: 20px;">
          <asp:Image ID="imgLogo" 
                     runat="server" 
                     Width="125" Height="100"  
                     BorderColor="Gray" 
                     BorderStyle="Solid" 
                     BorderWidth="1px" />
        </div>
      </td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:38:06.800

尝试在属性 width 和 height 之后添加“px”。我认为这是问题所在。

# typo3 - 摆脱 TYPO3 中的“csc-frame”div wrap

> ID：15654223
> 
> 赞同：1
> 
> 时间：2013-03-27T08:10:24.373
> 
> 标签：typo3, typoscript

这是我的代码：

```
 lib.navigation{
         10 = RECORDS
            10 {
                 source = uid
                 tables = tt_content
            }
    } 
```

在这里，我只是通过内容元素创建一个菜单，我想从呈现的内容中删除带有 class=csc-frame csc-frame-frame1 的默认 div

我是这样使用的：

```
lib.navigation{
     10 = RECORDS
        10 {
             conf.tt_content.stdWrap.innerWrap.cObject.default = TEXT
             source = uid
             tables = tt_content
        }
} 
```

但这只会删除 csc_default div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:04:11.113

这可能会奏效。确保在导航定义之前包含它。

```
tt_content.stdWrap.innerWrap.cObject.default > 
```

# c# - 将 SQLite 数据库保存到 Documents 文件夹 win Windows Store App

> ID：15654224
> 
> 赞同：0
> 
> 时间：2013-03-27T08:10:25.353
> 
> 标签：c#, sqlite, windows-runtime, windows-store-apps

我一直在使用 XAML 和 C# 编写 Windows 8 应用商店应用程序，目标设备是 Windows Surface 平板电脑。

在我的应用程序中，我使用 SQLite 数据库。

要创建/加载数据库，我使用以下代码：

```
DBPath = Path.Combine(Windows.Storage.ApplicationData.Current.LocalFolder.Path, "MyDatabase.sqlite"); 
```

但是我想将数据库存储在 Documents 文件夹中，所以我尝试了以下代码行来替换我上面的行：

```
DBPath = Path.Combine(Windows.Storage.KnownFolders.DocumentsLibrary.Path, "MyDatabase.sqlite"); 
```

当我尝试这个时，我收到以下错误：

```
WinRT information: Access to the specified location (DocumentsLibrary) requires a capability to be declared in the manifest. 
```

所以我打开 Package.appxmanifest 并在功能下选择 Documents Library，在声明选项卡下我添加了一个文件类型关联。然后在属性下，我在名称框中输入了 sqlite，在文件类型框中输入了 .sqlite。我没有在 Package.appxmanifest 屏幕上输入任何其他信息。

现在，当我运行该应用程序时，我收到以下错误：

```
Could not open database file: MyDatabase.sqlite (CannotOpen) 
```

当我检查 Windows.Storage.KnownFolders.DocumentsLibrary.Path 它等于“”。我本来希望这里有完整的位置路径。

任何人都可以帮忙吗？有人曾经将 SQLite 数据库保存到文档文件夹吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:38:22.807

`KnownFolders.DocumentsLibrary`没有路径，因为它是虚拟位置。请查看[此答案](https://stackoverflow.com/a/11303883/197913)以获取更多详细信息。这可能导致无法在那里打开 SQLite 数据库，至少使用[sqlite-net](https://nuget.org/packages/sqlite-net)库中可用的 API。

此外，在您的 Windows 应用商店应用程序中使用对文档库的访问之前，请记住，要将具有此功能的应用程序发布到应用商店，您[需要有一个公司帐户](http://blogs.msdn.com/b/jennifer/archive/2012/09/18/what-is-the-difference-between-a-company-vs-individual-account-for-the-windows-store.aspx)。对于个人账户，此类申请将被拒绝。

# mongodb - 按嵌入文档排序

> ID：15654228
> 
> 赞同：3
> 
> 时间：2013-03-27T08:10:35.280
> 
> 标签：mongodb, sorting, mongovue

我正在尝试按嵌入文档的日期对某些文档进行排序。我的文件看起来像：

```
[
    {
        name: 'item1',
        slots: [
            {
                date : ISODate("2013-01-18T23:00:00Z")
            },
            {
                date : ISODate("2013-02-05T23:00:00Z")
            },
            {
                date : ISODate("2013-03-24T23:00:00Z")
            },
        ]
    },
    {
        name: 'item2',
        slots: [
            {
                date : ISODate("2013-01-12T23:00:00Z")
            },
            {
                date : ISODate("2013-01-03T23:00:00Z")
            },
            {
                date : ISODate("2013-03-04T23:00:00Z")
            },
        ]
    },
    {
        name: 'item3',
        slots: [
            {
                date : ISODate("2013-03-14T23:00:00Z")
            },
            {
                date : ISODate("2013-02-18T23:00:00Z")
            },
            {
                date : ISODate("2013-03-07T23:00:00Z")
            },
        ]
    }
] 
```

我需要按 slot.date 升序排序的结果。所以结果应该是这样的：

```
[
    {
        name: 'item2',
        slots: [
            {
                date : ISODate("2013-01-03T23:00:00Z")
            },
            {
                date : ISODate("2013-01-12T23:00:00Z")
            },              
            {
                date : ISODate("2013-03-04T23:00:00Z")
            },
        ]
    },
    {
        name: 'item1',
        slots: [
            {
                date : ISODate("2013-01-18T23:00:00Z")
            },
            {
                date : ISODate("2013-02-05T23:00:00Z")
            },
            {
                date : ISODate("2013-03-24T23:00:00Z")
            },
        ]
    },      
    {
        name: 'item3',
        slots: [
            {
                date : ISODate("2013-02-18T23:00:00Z")
            },
            {
                date : ISODate("2013-03-07T23:00:00Z")
            },
            {
                date : ISODate("2013-03-14T23:00:00Z")
            }
        ]
    }
] 
```

第一项 2，因为它包含最早的 slot.date (ISODate("2013-01-03T23:00:00Z"))。第二项1 因为它包含第二个最早的日期（ISODate("2013-01-18T23:00:00Z")) 等等......它也可以对嵌入文档中的日期进行排序？

我试过的：

```
.sort({{slots.date : 1}}) 
```

但我得到一个语法错误。我使用 MongoVUE 测试查询，MongoVUE 可能无法在嵌入式文档上运行排序？这甚至可能是我想做的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T10:00:49.977

您显示的代码：

```
.sort({{slots.date : 1}}) 
```

有语法错误。您的代码中有两个括号，它应该是：

```
.sort({slots.date : 1}) 
```

还有几种方法可以对您的内部子文档进行排序。也许客户端是这里最快的方法，但是，如果它证明在 MongoDB 本身内本地执行它更快，您也可以使用聚合框架：

```
db.col.aggregate([
    {$unwind: '$slots'},
    {$sort: {slots.date:1}},
    {$group: {_id: '$_id', slots: {$push: '$slots'}}
]) 
```

类似的东西会对子文档进行排序。

# sql - 我可以使用 format() 函数转换数字中的 varchar 吗？

> ID：15654231
> 
> 赞同：0
> 
> 时间：2013-03-27T08:10:43.057
> 
> 标签：sql, sql-server, formatting

有没有可能用`format()`函数转换数字中的varchar？

例如，如果我想用`format()`函数转换 varchar 中的数字，我编写以下代码：

```
format(555, '0') 
```

# macos - Mac - 在打印对话框扩展中点击打印按钮显示模式窗口

> ID：15654233
> 
> 赞同：1
> 
> 时间：2013-03-27T08:10:44.750
> 
> 标签：macos, driver, printers, printdialog

当用户点击打印按钮时是否可以执行自定义操作？例如，我可以在打印前显示验证对话框吗？

我是 Mac 打印机开发的新手。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:16:31.427

在 PDE 中，我通过以下方法截取了打印动作：

`- (void)shouldPrint`

在该方法中返回 YES 或 NO 之前，我以模态方式显示了 NSWindow。
（当 NSWindow 模态显示时，“shouldPrint”方法的执行将停止。）

# asp.net-mvc - XMLRPC 服务的路由打破了默认路由

> ID：15654235
> 
> 赞同：0
> 
> 时间：2013-03-27T08:10:52.647
> 
> 标签：asp.net-mvc, asp.net-mvc-4, xml-rpc

我正在尝试使 XML RPC 服务运行，如以下文章所示：http: [//www.cookcomputing.com/blog/archives/Implementing%20an%20xml-rpc-service-with-asp-net-mvc](http://www.cookcomputing.com/blog/archives/Implementing%20an%20xml-rpc-service-with-asp-net-mvc)

一切都很好，除了路由。[这与此 SO question MVC route conflict with service route](https://stackoverflow.com/questions/13036768/mvc-route-conflicts-with-service-route)中讨论的问题类似

我的 RegisterRoutes 代码如下所示：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );

        routes.Add(new Route("wlw/publish", new WLWRouteHandler()));

    } 
```

当我把这条线

```
routes.Add(new Route("wlw/publish", new WLWRouteHandler())); 
```

在 MapRoutes 之前我可以访问该服务，但我的正常路线不起作用。我尝试添加第四个参数：

```
 routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional },
            constraints: new { controller = "regex-for-!=-wlw" }

        ); 
```

但后来我得到一个 403 The Web server is configured to not list the contents of this directory 错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:57:05.113

可以在这里找到一个很好的解决方案：[http ://weblogs.asp.net/jasonconway/archive/2009/10/23/include-and-exclude-constraints-in-asp-net-mvc.aspx](http://weblogs.asp.net/jasonconway/archive/2009/10/23/include-and-exclude-constraints-in-asp-net-mvc.aspx)

我将 MapRoute 更改为以下内容：

```
routes.MapRoute(
            "Default",
            "{controller}/{action}/{id}",
            new { controller = "home", action = "index", id = "" },
            new { controller = new ListConstraint(ListConstraintType.Exclude, "wlw") }
        ); 
```

# javascript - 将 Javascript 字符串或数组转换为 JSON 对象

> ID：15654242
> 
> 赞同：1
> 
> 时间：2013-03-27T08:11:05.140
> 
> 标签：javascript, json

我有一个带有逗号分隔字符串值的 JavaScript 变量 - 即`value1,value2,value3, ......,valueX,`

我需要将此变量的值转换为 JSON 对象。然后我将使用这个对象来匹配用户输入的文本值`filterObj.hasOwnProperty(search)`

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T08:24:46.640

您似乎想要的是从您的字符串构建一个充当映射的 JavaScript 对象，以便您可以有效地测试其中的值。

你可以这样做：

```
var str = 'value1,value2,value3,valueX';
var map = {};
var tokens = str.split(',');
for (var i=tokens.length; i--;) map[tokens[i]]=true; 
```

然后您可以测试是否存在这样的值：

```
if (map[someWord]) {
    // yes it's present
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T08:14:53.573

为什么是 JSON？您可以将其转换为数组`split(",")`。

```
var csv = 'value1,value2,value3';
var array = csv.split(",");
console.log(array); // ["value1", "value2", "value3"] 
```

访问它`array[i]`应该可以完成这项工作。

```
for (var i = 0; i < array.length; i++) {
    // do anything you want with array[i]
} 
```

[JSON 用于数据交换。](https://stackoverflow.com/questions/383692/what-is-json-and-why-would-i-use-it)除非您想与其他语言交流或传递一些数据，否则在单个页面上使用 JavaScript 处理时不需要 JSON。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-04T18:16:39.470

JavaScript has **JSON.stringify()** method to convert an object into JSON string and similarly **JSON.parse()** to convert it back. Read more about it

> [All about JSON : Why & How](http://www.cheezycode.com/2016/07/how-to-create-json-what-is-json.html "All about JSON")

Cheers!!

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-27T09:19:13.073

JSON 格式需要（单维或多维）键、值对列表。您不能只将逗号分隔的列表转换为 JSON 格式。您需要分配密钥。

例子，

```
[
  {"key":"value1"},
  {"key":"value2"},
  {"key":"value3"},
  ...
  {"key":"valueX"}
] 
```

我认为根据您的要求，您可以使用 Array.

# c# - 更新 ClickOnce 应用程序时防止覆盖数据库

> ID：15654248
> 
> 赞同：1
> 
> 时间：2013-03-27T08:11:47.220
> 
> 标签：c#, visual-studio, sqlite, clickonce

我完成了我的 c# Click once 应用程序，所以我发布了它。问题在于，我正在使用一个小型 SQLite 数据库，用于保存设置和许多其他小东西，每次我更新我的应用程序时，它们都会被新的 SQLite 数据库覆盖。

数据库中有一些设置，例如：记住密码和记住用户名，还有一个计数器，用于计算应用程序启动的次数。所有这些都将丢失，用户将不得不再次填写他的用户名和密码，即使他选中了要记住的框，因为数据库将被覆盖。

**问题：**如何防止 SQLite 数据库在我的 Click Once 应用程序中被覆盖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:37:24.400

我使用以下链接来解决我的问题：

[http://robindotnet.wordpress.com/2009/08/19/where-do-i-put-my-data-to-keep-it-safe-from-clickonce-updates/](http://robindotnet.wordpress.com/2009/08/19/where-do-i-put-my-data-to-keep-it-safe-from-clickonce-updates/)

本文解释了如何在 AppData 的漫游文件夹中创建我的数据库，在那里创建一个名为您的公司名称或应用程序名称的文件夹，并将数据库放入该文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:24:55.023

您应该拥有“模板”数据库，该数据库将始终覆盖并使用安装新版本应用程序后不会覆盖的数据创建数据库。

如果应用程序启动时不存在，则应创建包含数据的数据库。

# assemblies - 在 XP 和 Windows 7 PC 中将 .NET 4.0 程序集安装到 GAC

> ID：15654256
> 
> 赞同：0
> 
> 时间：2013-03-27T08:12:45.130
> 
> 标签：assemblies, gac

在 MSI 安装过程中，我需要将 .NET 4.0 程序集安装到 GAC，目标操作系统可以是 XP 和 Windows7。我看到在 XP 和 windows7 中向 GAC 注册 dll 是不同的。

有人可以解释在 GAC 安装期间我应该考虑什么吗？

库鲁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T16:30:40.580

通常 GAC 文件夹路径`64`对于. 而它位于同一文件夹下。但是当通过 MSI 向 GAC 添加程序集时，我们真的不需要担心构建版本。根据构建的版本，MSI 将在 64 或 32 位文件夹下注册它们。`32``Win7``XP`

# javascript - Extjs - 树面板展开事件

> ID：15654257
> 
> 赞同：0
> 
> 时间：2013-03-27T08:12:47.850
> 
> 标签：javascript, extjs, treepanel

我想创建一个树面板并在展开节点时向其中添加一个事件，但代码似乎对我不起作用。我已经在谷歌上搜索了几个小时，但没有运气。谁能看看并告诉我为什么？

这是我的[代码](http://jsfiddle.net/Bayoneda/RDC9W/)：

```
Ext.onReady(function () {
    var store = Ext.create('Ext.data.TreeStore', {
        root: {
            expanded: true,
            children: [{
                text: "detention",
                leaf: true
            }, {
                text: "homework",
                expanded: false,
                children: [{
                    text: "book report",
                    leaf: true
                }, {
                    text: "alegrbra",
                    leaf: true
                }]
            }, {
                text: "buy lottery tickets",
                leaf: true
            }]
        }
    });

    Ext.create('Ext.tree.Panel', {
        title: 'Simple Tree',
        width: 200,
        height: 150,
        store: store,
        rootVisible: false,
        renderTo: Ext.getBody(),
        listeners: {
            afteritemexpand: function ( node, index, item, eOpts ){
                alert('HAHA');
            }
        }
    });
}); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:02:42.757

你使用了错误的事件。您需要使用[afteritemexpand](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.tree.Panel-event-afteritemexpand)事件。

```
afteritemexpand: function ( node, index, item, eOpts ){
    alert('HAHA');
} 
```

这是一个小提琴：

[http://jsfiddle.net/johanhaest/RDC9W/1/](http://jsfiddle.net/johanhaest/RDC9W/1/)

# android - 设置后台操作栏Sherlock

> ID：15654258
> 
> 赞同：0
> 
> 时间：2013-03-27T08:12:49.753
> 
> 标签：android, actionbarsherlock

我曾经`getSupportActionBar().setBackgroundDrawable`为我的操作栏 Sherlock 设置背景。

但是当我使用 ActionMode (ActionMode.Callback) 这不起作用。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:43:00.947

因为 ActionMode 有它自己的风格和背景。如果您可以以编程方式设置它，我不确定在我的脑海中，但如果有我确定您可以轻松找到它。

否则查找并覆盖以下样式；

```
 <style name="Widget.ActionMode">
    <item name="android:background">?android:attr/actionModeBackground</item>
    <item name="android:backgroundSplit">?android:attr/actionModeSplitBackground</item>
    <item name="android:height">?android:attr/actionBarSize</item>
    <item name="android:titleTextStyle">@android:style/TextAppearance.Widget.ActionMode.Title</item>
    <item name="android:subtitleTextStyle">@android:style/TextAppearance.Widget.ActionMode.Subtitle</item>
</style> 
```

# ios - iOS：如何从 AVAsset 或 AVAssetTrack 获取音频采样率

> ID：15654259
> 
> 赞同：4
> 
> 时间：2013-03-27T08:12:51.887
> 
> 标签：ios, avfoundation, core-audio

像这样加载 AVAsset 后：

```
AVAsset *asset = [AVAsset assetWithURL:url]; 
```

我想知道音轨的采样率是多少。目前，我得到这样的音轨：

```
AVAssetTrack *audioTrack = [[asset tracksWithMediaCharacteristic:AVMediaCharacteristicAudible] objectAtIndex:0]; 
```

哪个有效。但我似乎找不到任何类型的属性，即使在使用 Google 后也没有 ;-) ，这给了我采样率。这如何正常工作？甚至可能吗？（我开始越来越怀疑，因为谷歌搜索并没有给我很多信息......）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-02-01T05:56:28.753

```
let asset = AVAsset(url: URL(fileURLWithPath: "asset/p2a2.aif"))
let track = asset.tracks[0]
let desc = track.formatDescriptions[0] as! CMAudioFormatDescription
let basic = CMAudioFormatDescriptionGetStreamBasicDescription(desc)
print(basic?.pointee.mSampleRate) 
```

我正在使用 Swift，所以它看起来有点不同，但它仍然可以与 Obj-C 一起使用。

```
print(track.naturalTimeScale) 
```

似乎也给出了正确的答案，但由于名称，我有点担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:24:51.817

找到了。我使用的是 MTAudioProcessingTap，所以在 prepare() 函数中我可以使用：

```
void prepare(MTAudioProcessingTapRef tap, CMItemCount maxFrames, const AudioStreamBasicDescription *processingFormat)
{
    sampleRate = processingFormat->mSampleRate;
    NSLog(@"Preparing the Audio Tap Processor");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-30T09:09:13.037

使用 Swift 和 AVFoundation ：

```
let url = Bundle.main.url(forResource: "audio", withExtension: "m4a")!
let asset = AVAsset(url: url)
if let firstTrack = asset.tracks.first {
    print("bitrate: \(firstTrack.estimatedDataRate)")
} 
```

要在元数据中查找更多信息，您还可以查阅： [https ://developer.apple.com/documentation/avfoundation/avassettrack](https://developer.apple.com/documentation/avfoundation/avassettrack) [https://developer.apple.com/documentation/avfoundation/media_assets_playback_and_editing/finding_metadata_values](https://developer.apple.com/documentation/avfoundation/media_assets_playback_and_editing/finding_metadata_values)

# raytracing - 光线追踪器对象在偏离中心时会拉伸

> ID：15654267
> 
> 赞同：0
> 
> 时间：2013-03-27T08:13:44.413
> 
> 标签：raytracing, stretch

我正在为我的计算机图形课程编写一个光线追踪程序。到目前为止，我只实现了球体和阴影射线。当前的问题是，当我将球体移离中心时，它会伸展。这是我用来计算光线是否与球体相交的代码：

```
bool Sphere::onSphere(Ray r)
{
    float b = (r.dir*2).innerProduct(r.pos + centre*-1);
    float c = (r.pos + centre*-1).innerProduct(r.pos + centre*-1) - radius*radius;
    return b*b - 4*c >= 0;
} 
```

这是我用来产生每条射线的代码：

```
for(int i = -cam.width/2; i &lt cam.width/2; i++)
    {
        for(int j = -cam.height/2; j &lt cam.height/2; j++)
         {
            float normi = (float)i;
            float normj = (float)j;
            Vector pixlePos = cam.right*normi + cam.up*normj + cam.forward*cam.dist + cam.pos*1;
            Vector direction = pixlePos + cam.pos*-1;
            direction.normalize();
            Vector colour = recursiveRayTrace(Ray(pixlePos, direction), 30, 1, 0);
            float red = colour.getX()/255;
            float green = colour.getY()/255;
            float blue = colour.getZ()/255;
            fwrite (&red, sizeof(float), 1, myFile);
            fwrite (&green, sizeof(float), 1, myFile);
            fwrite (&blue, sizeof(float), 1, myFile);
        }
    } 
```

递归RayTrace：

```
Vector Scene::recursiveRayTrace(Ray r, float maxDist, int maxBounces, int bounces)
{
    if(maxBounces &lt bounces)
        return Vector(0,0,0);
    int count = 0;
    for(int i = 0; i &lt spheres.size(); i++)
    {
        if(spheres.at(i).onSphere(r))
        {
            Vector colour(ambiant.colour);
            for(int j = 0; j &lt lights.size(); j++)
            {
                Vector intersection(r.pos + r.dir*spheres.at(i).getT(r));
                Ray nRay(intersection, lights.at(i).centre + intersection*-1);
                colour = colour + lights.at(i).colour;
        }
        return colour;
        }
    }
    return Vector(0,0,0);
} 
```

我得到的是一个从圆心到圆心在向量方向上拉伸的球体。我不是在寻找任何人来做我的功课。我只是很难调试这个。任何提示表示赞赏:) 谢谢！

编辑：cam.dist 是相机到视图平面的距离

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-03T03:54:16.100

拉伸实际上是透视观察的自然结果，如果你有一个非常宽的视野，它会被夸大。换句话说，将相机从图像平面移回应该使它看起来更自然。

# asp.net-mvc-3 - 实体框架不更新我的表值

> ID：15654268
> 
> 赞同：0
> 
> 时间：2013-03-27T08:13:47.633
> 
> 标签：asp.net-mvc-3, entity-framework

我不明白，我的 model.edmx 有两个表：

![在此处输入图像描述](../Images/b034757ff01a1c564c7f4eaad431bc59.png)

然后我有我的 3 张桌子：

```
CREATE TABLE [Group].[RecommendedUserGroups]
(
 [Groups_GroupId] INT NOT NULL,
 [RecommendedUsers_RecommendedUserId] int NOT NULL,
 CONSTRAINT [PK_GroupRecommendedUser] PRIMARY KEY CLUSTERED ([Groups_GroupId] ASC, [RecommendedUsers_RecommendedUserId] ASC),
 CONSTRAINT [FK_RecommendedUsers_RecommendedUserGroups] FOREIGN KEY ([RecommendedUsers_RecommendedUserId]) REFERENCES [Zinc].[RecommendedUsers] ([RecommendedUserId]),
 CONSTRAINT [FK_Groups_RecommendedUserGroups] FOREIGN KEY ([Groups_GroupId]) REFERENCES [Group].[Groups] ([GroupId])
 )

CREATE TABLE [Group].[Groups]
(
 [GroupId] INT NOT NULL IDENTITY(1, 1), 
 [Customers_CustomerId] INT NOT NULL,
 [Name] NVARCHAR(128) NOT NULL, 
 [IsArchived] BIT NOT NULL,
 [SmallImageUrl]        NVARCHAR (256) NULL,
 [MediumImageUrl]       NVARCHAR (256) NULL,
 [LargeImageUrl]        NVARCHAR (256) NULL,
 [AllowFiltering] BIT NOT NULL DEFAULT 0, 
  [IsSegment] BIT NOT NULL CONSTRAINT DF_Groups_IsSegment DEFAULT 0,
  CONSTRAINT [PK_Groups] PRIMARY KEY CLUSTERED ([GroupId] ASC), 
  CONSTRAINT [FK_Groups_Customers] FOREIGN KEY ([Customers_CustomerId]) REFERENCES [Zinc].[Customers] ([CustomerId]),      
 )

CREATE TABLE [Zinc].[RecommendedUsers]
(
 [RecommendedUserId]                 INT IDENTITY(1,1) NOT NULL,             
 [Firstname]                         NVARCHAR (50)    NOT NULL,
 [Surname]                           NVARCHAR (50)    NOT NULL,
 [Email]                             NVARCHAR (256)   NOT NULL,
 [Department]                        NVARCHAR (256)   NULL,
 [JobTitle]                          NVARCHAR (256)   NULL, 
 [DateAndTimeProcessed]              DATETIME         NULL,
 [Users_UserId]                      INT              NOT NULL, 
 [DateAndTimeRecommended]            DATETIME         NOT NULL,
 [AssignedUserId]                    INT              NULL,  
 CONSTRAINT [PK_RecommendedUsers] PRIMARY KEY CLUSTERED ([RecommendedUserId] ASC),
) 
```

然后是我的实体：

```
namespace Zinc.Entities
{
 public class RecommendedUser
 {
  #region Properties

 public virtual int RecommendedUserId { get; set; }
 public virtual string Firstname { get; set; }
 public virtual string Surname { get; set; }
 public virtual string Email { get; set; }
 public virtual string Department { get; set; }
 public virtual string JobTitle { get; set; }
 public virtual DateTime? DateAndTimeProcessed { get; set; }
 public virtual int Users_UserId { get; set; }
 public virtual DateTime? DateAndTimeRecommended { get; set; }
 public virtual int AssignedUserId { get; set; }
 public virtual ICollection<Group.Group> Groups { get; set; }

#endregion

 }
}

namespace Zinc.Entities.Group 
```

{ 公共类组 { #region 属性

```
public virtual int GroupId { get; set; }
public virtual string Name { get; set; }
public virtual bool IsArchived { get; set; }
public virtual bool IsSegment { get; set; }
public virtual bool AllowFiltering { get; set; }

public virtual string SmallImageUrl { get; set; }
public virtual string MediumImageUrl { get; set; }
public virtual string LargeImageUrl { get; set; }

public virtual Entities.Customer Customer { get; set; }

#endregion

#region ICollections

 //i am only concerned with recommended user so will just put this collection here

  private ICollection<RecommendedUser> _groupRecommendedUsers;
public virtual ICollection<RecommendedUser> RecommendedUsers
{
  get
  {
    if (_groupRecommendedUsers == null)
      _groupRecommendedUsers = new List<RecommendedUser>();

    return _groupRecommendedUsers;
  }
  set
  {
    _groupRecommendedUsers = value;
  }
} 
```

所以当我保存带有推荐用户详细信息的组时，它会写入我的推荐用户表但不会更新我的推荐用户组表？

有人可以帮忙吗？我用mvc3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:32:19.560

RecommendedUserGroups 表的主键应该是表中的两个字段。

表的定义方式每个组只能有一个成员。

# c - 如何在你的 API 中检测线程安全？

> ID：15654269
> 
> 赞同：1
> 
> 时间：2013-03-27T08:13:55.073
> 
> 标签：c, multithreading

通常你需要`extern`一些这样的 C API：

```
set_module_callback(module, some_func, func_args); 
```

但是`module`需要*线程安全*`some_func`，即可能有多个线程来调用这个函数，但我不知道它是否是*线程安全的*，有没有办法在调用时测试它？**`set_module_callback`**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:19:55.087

线程安全是一个非常复杂的领域。您可能会从许多方面获得不安全性，即使是受到良好保护的代码也可能在与另一段代码的通信中存在漏洞。这就是为什么最好假设它`some_func`是不安全的并提供（例如）共享资源的关键部分。所以答案是“不”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:53:13.687

如果您的应用程序是 POSIX 应用程序，您可以尝试使用[Helgrind 工具](http://valgrind.org/docs/manual/hg-manual.html)进行一些并发访问检测。

但这取决于您的软件如何调用 API。因此，如果您的 API 是线程安全的，那么您将不会有一个绝对通用的答案。您只会在给定特定应用程序的情况下获得此答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T08:17:00.100

我认为没有办法自动让一段代码测试另一段代码。

为了让您真正确定 ti 是线程安全的，您必须进入并查看它/分析它的作用以及可能出现副作用的位置/在需要时添加互斥锁。**

# android - 在现有应用中实施 Google 应用内结算

> ID：15654270
> 
> 赞同：0
> 
> 时间：2013-03-27T08:13:56.633
> 
> 标签：android, installation, in-app-billing

一年以来，我开发了 android 应用程序。我认为现在是进行下一步并实施计费系统的时候了。在我的主应用程序中实现这个新功能之前，我认为最好对其进行测试。

上周我开发了一个测试应用程序，与我的主应用程序（没有 v3 计费系统）相同的应用程序（使用 v3 计费系统）。我通过 Google Play 发布并安装在我的三星 Note 上。我能够购买和订阅。而且效果很好。所以我停用了测试应用程序，在我的主应用程序中复制了整个计费方法，更改了 Base64 编码的公共 RSA 密钥并发布了它。

安装并启动后，应用程序每次都崩溃。原因只是计费系统，因为最近的版本在没有计费系统的情况下运行良好。当然，我可以用一个与我的主应用程序相同的新应用程序替换我的主应用程序，但直到现在我都会失去我所有的用户、我的统计数据和评论。你知道为什么我的应用程序无法使用 RSA 密钥安装计费系统吗？还有哪些其他原因可能导致这种情况？

onCreate 会发生什么：

```
 mHelper = new IabHelper(this, base64EncodedPublicKey);

    // enable debug logging (for a production application, you should set this to false).
    mHelper.enableDebugLogging(false);

    // Start setup. This is asynchronous and the specified listener
    // will be called once setup completes.
    Log.d(TAG, "Starting setup.");
    mHelper.startSetup(new IabHelper.OnIabSetupFinishedListener() {
        public void onIabSetupFinished(IabResult result) {
            Log.d(TAG, "Setup finished.");

            if (!result.isSuccess()) {
                // Oh noes, there was a problem.
                complain("Problem setting up in-app billing: " + result);
                return;
            }

            // Hooray, IAB is fully set up. Now, let's get an inventory of stuff we own.
            Log.d(TAG, "Setup successful. Querying inventory.");
            mHelper.queryInventoryAsync(mGotInventoryListener);
        }
    }); 
```

以及第 960 行会发生什么：

```
 public IabHelper.QueryInventoryFinishedListener mGotInventoryListener = new IabHelper.QueryInventoryFinishedListener() {
    public void onQueryInventoryFinished(IabResult result, Inventory inventory) {
        Log.d(TAG, "Query inventory finished .");
        if (result.isFailure()) {
            complain("Failed to query inventory: " + result);
            return;
        }

        Log.d(TAG, "Query inventory was successful.");

        // Purchase premium monthly
        Purchase purchase = inventory.getPurchase(Constants.PREMIUM);
        if(purchase.getPurchaseState() == Purchase.PURCHASED_SUCCESSFULLY && verifyDeveloperPayload(purchase)){
            isPremium = true;
        }else{
            isPremium = false;
            updatePremium(purchase.getPurchaseState());
        }
        Log.d(TAG, "User " + (isPremium ? "HAS" : "DOES NOT HAVE") + " premium surebets for 32 days.");

        Log.d(TAG, "Initial inventory query finished; enabling main UI.");
    }
}; 
```

# java - Linux 上的 JavaFX

> ID：15654271
> 
> 赞同：15
> 
> 时间：2013-03-27T08:13:58.273
> 
> 标签：java, linux, javafx-2, javafx, openjdk

Linux（x86 和 x64）上的 JavaFX 情况如何？

JavaFX 应用程序能否在 Linux 操作系统上毫无问题地执行？

我发现了 2011 年和 2012 年的一些问题，当时应用程序不稳定！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T12:25:58.240

当前发布的 JFX 版本是 2.2.4，在 Linux 上相当稳定。但是，当 Java 8 发布时它会变得更好，因为它将包含 JFX 8 分发。您现在可以使用 java 8 早期访问版本自行尝试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-07T06:17:24.443

根据我的经验，JavaFX 8 在 Linux 上运行良好，唯一的要求似乎是 libgtk 2.18+。有关[Oracle JDK 8 和 JRE 8 认证系统配置](http://www.oracle.com/technetwork/java/javase/certconfig-2095354.html)的完整详细信息。工作 Linux 版本包括：

*   Ubuntu 10.04（可能更早，10.04 有 libgtk 2.20）
*   红帽 6

您可能遇到的可能问题

*   3D 场景支持 - 需要特定的现代 GPU + 最近的驱动程序，请注意没有软件渲染回退，也没有计划 - 请参阅[邮件列表问题](http://comments.gmane.org/gmane.comp.java.openjdk.openjfx.devel/8256)
*   视频播放需要特定版本的 libavcodec
*   OpenJDK 尚不包含 javafx，仅包含 oracle 发行版。2016 年 7 月更新 - openjfx 软件包现已可用。在 Ubuntu 16.04 上...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-07T06:03:29.627

Javafx 像所有其他 Java 应用程序一样在 JVM（Java 虚拟机）上运行。无论您是在 windows 还是 linux 或 mac 上运行 javafx 应用程序都没有关系，毫无疑问它不会运行。这就是为什么java被称为平台无关语言的原因。现在已经发布了具有更多功能的 javafx 8 稳定版本。

# java - Java并发中“程序顺序规则”的解读

> ID：15654276
> 
> 赞同：14
> 
> 时间：2013-03-27T08:14:17.500
> 
> 标签：java, concurrency, java-memory-model

程序顺序规则规定“线程中的每个动作都发生在该线程中的每个动作之前，然后在程序顺序中出现”

[1.我在另一个线程](https://stackoverflow.com/questions/11353274/what-is-the-reasoning-behind-volatile-semantics-in-java-and-c-sharp)中读到一个**动作**是

*   读取和写入变量
*   监视器的锁定和解锁
*   开始和加入线程

这是否意味着读取和写入可以按顺序更改，但读取和写入不能通过第 2 行或第 3 行中指定的操作更改顺序？

2.“节目顺序”是什么意思？

举例说明会很有帮助。

**其他相关问题**

假设我有以下代码：

```
long tick = System.nanoTime(); //Line1: Note the time
//Block1: some code whose time I wish to measure goes here
long tock = System.nanoTime(); //Line2: Note the time 
```

首先，它是一个单线程应用程序，以保持简单。编译器注意到它需要检查两次时间，并且还注意到一个与周围的时间注释行没有依赖关系的代码块，因此它看到了重新组织代码的潜力，这可能导致 Block1 没有被计时调用包围在实际执行期间（例如，考虑这个顺序 Line1->Line2->Block1）。但是，作为程序员，我可以看到 Line1,2 和 Block1 之间的依赖关系。Line1 应该紧接在 Block1 之前，Block1 需要有限的时间才能完成，然后 Line2 紧随其后。

所以我的问题是：我是否正确测量了块？

*   如果是，是什么阻止编译器重新排列顺序。
*   如果不是，（在通过 Enno 的回答后认为是正确的）我能做些什么来防止它。

PS：我从最近在 SO 中提出的[另一个问题](https://stackoverflow.com/questions/15607265/measuring-time-interval-and-out-of-order-execution)中窃取了此代码。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-27T08:50:19.470

这可能有助于解释为什么首先存在这样的规则。

Java 是一种过程语言。即你告诉Java 如何为你做某事。如果 Java 不按照您编写的顺序执行您的指令，它显然不会工作。例如，在下面的示例中，如果 Java 会执行 2 -> 1 -> 3，那么炖菜就会被毁掉。

```
1\. Take lid off
2\. Pour salt in
3\. Cook for 3 hours 
```

那么，为什么规则不简单地说“Java 按照你写的顺序执行你写的东西”？简而言之，因为 Java 很聪明。举个例子：

```
1\. Take eggs out of the freezer
2\. Take lid off
3\. Take milk out of the freezer
4\. Pour egg and milk in
5\. Cook for 3 hours 
```

如果 Java 像我一样，它只会按顺序执行。然而，Java 足够聪明，可以理解它更有效，并且最终结果将是相同的，如果它执行 1 -> 3 -> 2 -> 4 -> 5 （您不必再次走到冰箱，并且这不会改变配方）。

因此，规则“线程中的每个动作都发生-在该线程中的每个动作之前在程序顺序后面出现”试图说的是，“在单个线程中，您的程序将运行**，就好像**它是在确切的你写的顺序。我们可能会改变幕后的顺序，但我们确保这些都不会改变输出。

到目前为止，一切都很好。为什么它不跨多个线程做同样的事情？在多线程编程中，Java 不够聪明，无法自动完成。它将用于某些操作（例如加入线程、启动线程、何时使用锁（监视器）等），但对于其他内容，您需要明确告诉它不要进行会改变程序输出的重新排序（例如`volatile`字段上的标记，使用锁等）。

注意：
关于“发生在关系之前”的快速附录。这是一种奇特的说法，无论 Java 可能做什么重新排序，东西 A 都会发生在东西 B 之前。在我们后面奇怪的炖菜示例中，“第 1 步和第 3 步*发生在*第 4 步“倒入鸡蛋和牛奶”之前。还例如，“第 1 步和第 3 步不需要*发生之前的*关系，因为它们不以任何方式相互依赖”

**关于附加问题和对评论的回应**

首先，让我们确定“时间”在编程世界中的含义。在编程中，我们有“绝对时间”的概念（现在世界上的时间是多少？）和“相对时间”的概念（距离 x 已经过去了多少时间？）。在一个理想的世界里，时间就是时间，但除非我们有一个内置的原子钟，否则绝对时间必须不时地修正。另一方面，对于相对时间，我们不想要更正，因为我们只对事件之间的差异感兴趣。

在 Java 中，`System.currentTime()`处理绝对时间和`System.nanoTime()`处理相对时间。这就是为什么 nanoTime 的 Javadoc 指出，“此方法*只能用于测量经过的时间*，与任何其他系统或挂钟时间概念无关”。

实际上，currentTimeMillis 和 nanoTime 都是本机调用，因此编译器实际上无法证明重新排序是否不会影响正确性，这意味着它不会重新排序执行。

但是让我们想象一下，我们想要编写一个编译器实现，它实际上会查看本机代码并重新排序所有内容，只要它是合法的。当我们查看 JLS 时，它告诉我们的只是“只要无法检测到任何东西，您都可以重新排序”。现在作为编译器编写者，我们必须决定重新排序是否会违反语义。对于相对时间（nanoTime），如果我们重新排序执行，它显然是无用的（即违反语义）。现在，如果我们重新排序绝对时间（currentTimeMillis）会违反语义吗？只要我们可以限制从世界时间来源（比如说系统时钟）到我们决定的任何时间（比如“50ms”）*的差异，我就说不。对于以下示例：

```
long tick = System.currentTimeMillis();
result = compute();
long tock = System.currentTimeMillis();
print(result + ":" + tick - tock); 
```

如果编译器可以证明`compute()`与系统时钟的最大偏差小于我们可以允许的任何最大偏差，那么将其重新排序如下是合法的：

```
long tick = System.currentTimeMillis();
long tock = System.currentTimeMillis();
result = compute();
print(result + ":" + tick - tock); 
```

因为这样做不会违反我们定义的规范，因此不会违反语义。

您还问为什么这不包含在 JLS 中。我认为答案是“保持 JLS 简短”。但我对这个领域知之甚少，因此您可能想为此提出一个单独的问题。

*：在实际实现中，此差异取决于平台。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-27T09:04:39.070

程序顺序规则保证，*在单个线程*中，编译器引入的重新排序优化不会产生与如果程序以串行方式执行时会发生的结果不同的结果。如果线程的状态在没有同步的情况下被那些线程观察到，它不保证线程的操作可能出现在任何其他线程中的顺序。

请注意，此规则仅涉及程序的最终*结果*，而不涉及该程序中各个执行的顺序。例如，如果我们有一个方法对一些局部变量进行以下更改：

```
x = 1;
z = z + 1;
y = 1; 
```

编译器仍然可以自由地重新排序这些操作，但它认为最适合提高性能。一种思考方式是：如果您可以在源代码中重新排序这些操作并且仍然获得相同的结果，那么编译器可以自由地做同样的事情。（事实上​​，它可以更进一步，完全丢弃那些没有结果的操作，比如调用空方法。）

随着您的第二个要点，**监视器锁定规则**开始发挥作用：“监视器上的解锁*发生*在该主监视器锁定上的每个后续锁定之前。” ( *Java Concurrency in Practice* p. 341) 这意味着获取给定锁的线程将在释放该锁之前对其他线程中发生的操作具有一致的视图。但是，请注意，此保证仅适用于两个不同的线程`release`或相同`acquire`的*lock*。如果线程 A 在释放 Lock X 之前做了一堆事情，然后线程 B 获得了 Lock Y，则线程 B 无法保证对 A 的 pre-X 操作有一致的看法。

如果 a.) 这样做不会破坏线程内程序顺序，*并且*b.) 变量没有应用其他“之前发生”线程同步语义，则可以对变量的读取`start`和写入进行重新排序它们，比如将它们存储在字段中。`join`*`volatile`*

 *一个简单的例子：

```
class ThreadStarter {
   Object a = null;
   Object b = null;
   Thread thread;

   ThreadStarter(Thread threadToStart) {
      this.thread = threadToStart;
   }

   public void aMethod() {
      a = new BeforeStartObject();
      b = new BeforeStartObject();
      thread.start();
      a = new AfterStartObject();
      b = new AfterStartObject();

      a.doSomeStuff();
      b.doSomeStuff();
   }
} 
```

由于字段`a`和`b`方法`aMethod()`不会以任何方式同步，并且启动的`thread`操作不会改变写入字段的结果（或对这些字段的操作），编译器可以自由地重新排序`thread.start()`到任何地方方法。唯一*不能*对 of 的顺序做的事情是，在将 an 写入该字段之后`aMethod()`，将写入其中一个`BeforeStartObject`s的顺序移动`AfterStartObject`到该字段，或者在将a写入`doSomeStuff()`该字段之前移动对该字段的调用之一。`AfterStartObject`（也就是说，假设这种重新排序会`doSomeStuff()`以某种方式改变调用的结果。）

这里要记住的关键点是，在没有同步的情况下，启动的线程`aMethod()`理论上可以观察其中一个或两个字段`a`以及`b`它们在执行期间所采取的任何状态`aMethod()`（包括`null`）。

**附加问题答案**

如果要实际用于任何测量，例如通过计算它们之间的差异并将结果打印为输出，则分配`tick`和`tock`不能相对于代码重新排序。`Block1`这种重新排序显然会破坏 Java 的*线程内如同串行的*语义。它改变了通过以指定的程序顺序执行指令所获得的结果。如果分配*不*用于任何测量并且对程序结果没有任何副作用，则它们可能会被编译器优化为无操作而不是重新排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T12:16:21.797

在我回答问题之前，

> 读取和写入变量

应该

> 易失性读取和易失性写入（同一字段）

程序顺序不保证这发生在关系之前，而是发生在关系之前保证程序顺序

对于您的问题：

> 这是否意味着读取和写入可以按顺序更改，但读取和写入不能通过第 2 行或第 3 行中指定的操作更改顺序？

答案实际上取决于首先发生什么动作，然后发生什么动作。查看[JSR 133 Cookbook for Compiler Writers](http://g.oswego.edu/dl/jmm/cookbook.html)。有一个*Can Reorder*网格，列出了可能发生的允许的编译器重新排序。

例如，一个**Volatile Store**可以在**Normal Store**之上或之下重新排序，但**Volatile Store** *不能在***Volatile Load**之上或之下重新排序。这一切都假设线程内语义仍然成立。

> “节目顺序”是什么意思？

这是来自[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.3)

> 在每个线程 t 执行的所有线程间动作中，t 的程序顺序是一个总顺序，它反映了根据 t 的线程内语义执行这些动作的顺序。

换句话说，如果您可以更改变量的写入和加载方式，使其执行方式与您编写它的方式完全相同，那么它可以维护程序顺序。

例如

```
public static Object getInstance(){
    if(instance == null){
         instance = new Object();
    }
    return instance;
} 
```

可以重新订购

```
public static Object getInstance(){
     Object temp = instance;
     if(instance == null){
         temp = instance = new Object();
     }
     return temp;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T08:47:06.773

Java 教程[http://docs.oracle.com/javase/tutorial/essential/concurrency/memconsist.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/memconsist.html)说，happens-before 关系只是保证一个特定语句写入的内存对另一个特定语句可见。这是一个插图

```
int x;

synchronized void x() {
    x += 1;
}

synchronized void y() {
    System.out.println(x);
} 
```

`synchronized`创建一个happens-before关系，如果我们删除它，就不能保证在线程A递增x之后线程B会打印1，它可能会打印0

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T08:32:34.953

它只是意味着虽然线程可以被多路复用，但线程的动作/操作/指令的内部顺序将保持不变（相对）

线程1：T1op1，T1op2，T1op3...线程2：T2op1，T2op2，T2op3...

尽管线程之间的操作顺序（Tn'op'M）可能会有所不同，但`T1op1, T1op2, T1op3`线程内的操作将始终按此顺序进行，因此`T2op1, T2op2, T2op3`

例如：

```
T2op1, T1op1, T1op2, T2op2, T2op3, T1op3 
```*

# c# - 50级灰度

> ID：15654278
> 
> 赞同：3
> 
> 时间：2013-03-27T08:14:28.483
> 
> 标签：c#, colors, hex

我想根据该间隔计数中的数字`intervals`和位置（ ）获得不同的灰色阴影。`index`

所以这个函数会是这样的：

```
public static string GetShade(string StartColour, string EndColour, int Intervals, int Index)
{ ... } 
```

所以它会返回：

```
 GetShade("#aaaaaa", "#eeeeee", 5, 2) = "#bbbbbb"
 GetShade("#333333", "#555555", 3, 3) = "#555555" 
```

（显然，如果我的开始和结束是灰色的，它只会与灰色有关）。

任何指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:20:27.360

好吧，到目前为止，您并没有提及很多关于您尝试的内容，所以我猜您一开始就被卡住了。

我可能会这样处理：

1.  将开始和结束颜色分解为字符串中的数字作为它们的三个组成部分（你不能真正用字符串计算）
2.  通过划分间隔（*开始*，*结束*）并选择正确的分割来找出所需的答案（简单的算术，应该类似于*开始*+（*结束*-*开始*）÷*间隔*·*索引*）
3.  重新组装颜色字符串。注意允许前导零，即使用类似`string.Format("{0:X2}{1:X2}{2:X2}", r, g, b)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T08:18:42.423

颜色的每个组成部分都是 0 到 255 之间数字的十六进制表示。

您需要做的就是：

```
int shade = 255/Intervals * index;
return string.format("{0:X}{0:X}{0:X}", shade); 
```

以上可能存在一些舍入类型的问题，但以上是所需的一般概念。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T08:29:05.600

您需要一些特殊的字符串表示的事实应该放在您的函数之外。处理颜色是一项任务。将颜色格式化为字符串或从字符串格式化是另一项任务，应由另一个函数处理。

详细说明的基本数学如下所示：

```
 public static Color GetShade(Color start, Color end, byte intervals, byte index)
      {
        var deltaR = end.R - start.R;
        var deltaG = end.G - start.G;
        var deltaB = end.B - start.B;

        var intervalR = deltaR / intervals;
        var intervalG = deltaG / intervals;
        var intervalB = deltaB / intervals;

        var finalR = start.R + (index * intervalR);
        var finalG = start.G + (index * intervalG);
        var finalB = start.B + (index * intervalB);

        return new Color { R = (byte)finalR, G = (byte)finalG, B = (byte)finalB };
      } 
```

# ruby-on-rails-3 - Rails：nested_form gem 删除不工作但添加工作

> ID：15654280
> 
> 赞同：6
> 
> 时间：2013-03-27T08:14:30.323
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2, nested-forms, nested-attributes

我的问题有点类似于问题[nested_form gem add works but remove failed...为什么？](https://stackoverflow.com/questions/5422881/nested-form-gem-add-works-but-remove-fails-why).

我有一个产品编辑页面，其中产品的子类别在 product_sub_categories 中链接。为了将子类别分配给产品，我使用了 product_sub_categories 的嵌套属性。因此，产品可以有多个 sub_categories。

在产品模型中，

```
has_many   :product_sub_categories
has_many   :sub_categories, :through => :product_sub_categories
accepts_nested_attributes_for :product_sub_categories, :allow_destroy => true 
```

在产品编辑视图中：

```
 <%= f.fields_for :product_sub_categories do |product_sub_category| %>
 <%= product_sub_category.collection_select :sub_category_id, @sub_categories, :id, :sub_category, {:include_blank => 'Select a Sub Category'} %>
 <%= product_sub_category.link_to_remove "Remove", :class => "subcatlink" %>
 <% end %> 
```

代码适用于添加子类别。但是当我删除子类别时失败。日志给出：

```
 "product_sub_categories_attributes"=>{"0"=>{"sub_category_id"=>"1", "_destroy"=>"false", "id"=>"9"}, "1"=>{"sub_category_id"=>"1", "_destroy"=>"1", "id"=>"17"}},
 ProductSubCategory Load (0.2ms)[0m  [1mSELECT `product_sub_categories`.* FROM `product_sub_categories` WHERE `product_sub_categories`.`product_id` = 8 AND `product_sub_categories`.`id` IN (9, 17) 
```

虽然，我点击删除，它只是传递 _destroy="1"，但不会破坏子类别。

任何人都可以告诉解决方案吗？

更新：

非常抱歉我的愚蠢错误。我没有正确看到代码。在我复制的模型中

```
accepts_nested_attributes_for :product_sub_categories 
```

没有 :allow_destroy => true。当我删除它时，代码工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:18:02.237

您需要在`dependent destroy`关联旁边添加子句，它会破坏产品的子类别。

```
has_many   :product_sub_categories, :dependent => :destroy 
```

# javascript - PhantomJS / Javascript：写入文件而不是控制台

> ID：15654283
> 
> 赞同：24
> 
> 时间：2013-03-27T08:14:58.300
> 
> 标签：javascript, phantomjs

从 PhantomJS，我如何写入日志而不是控制台？

在示例[https://github.com/ariya/phantomjs/wiki/Examples](https://github.com/ariya/phantomjs/wiki/Examples)中，它总是（在我看过的示例中）说的是：

```
console.log('some stuff I wrote'); 
```

这不是那么有用。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-07-25T11:34:02.443

下面可以通过phantomjs直接将内容写入文件：

```
var fs = require('fs');
   try {
    fs.write("/home/username/sampleFileName.txt", "Message to be written to the file", 'w');
    } catch(e) {
        console.log(e);
    }
    phantom.exit(); 
```

当出现一些警告或异常时，user984003 的答案中的命令会失败。有时不符合我们的特定要求，因为在某些代码库中，我总是收到以下消息，该消息也将记录到该文件中。

```
Refused to display document because display forbidden by X-Frame-Options. 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-27T08:46:37.507

所以我想通了：

```
>phantomjs.exe file_to_run.js > my_log.txt 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-05-22T15:27:55.360

您可以覆盖原来的 console.log 功能，看看这个：

```
Object.defineProperty(console, "toFile", {
    get : function() {
        return console.__file__;
    },
    set : function(val) {
        if (!console.__file__ && val) {
            console.__log__ = console.log;
            console.log = function() {
                var fs = require('fs');
                var msg = '';
                for (var i = 0; i < arguments.length; i++) {
                    msg += ((i === 0) ? '' : ' ') + arguments[i];
                }
                if (msg) {
                    fs.write(console.__file__, msg + '\r\n', 'a');
                }
            };
        }
        else if (console.__file__ && !val) {
            console.log = console.__log__;
        }
        console.__file__ = val;
    }
}); 
```

然后你可以这样做：

```
console.log('this will go to console');
console.toFile = 'test.txt';
console.log('this will go to the test.txt file');
console.toFile = '';
console.log('this will again go to the console'); 
```

# logging - 如何在 openerp Web 客户端中显示日志消息？

> ID：15654286
> 
> 赞同：1
> 
> 时间：2013-03-27T08:15:05.187
> 
> 标签：logging, openerp

我尝试在创建产品对象后显示一条消息，告诉用户产品与产品名称创建成功这是代码：

```
def log_prod(self, cr, uid, ids, context=None):
    product=self.pool.get('product.product').browse(cr, uid, ids)
    self.log(cr, uid, ids , _("Product %s has been created") % product.name , context=context)
    return True

def create(self, cr, uid, data, context=None):
    new_id = super(product_product,self).create(cr, uid, data, context)
    self.log_prod(cr,uid,new_id,context)
    return new_id 
```

当我创建产品时没有出现任何东西

但是在我尝试创建收货之后，出现了创建产品的日志消息，我如何在创建后在产品显示页面中显示日志消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-01T06:50:53.647

我遇到过这个问题，但是这种方式对我有帮助并且很棒：来自此[链接](https://www.odoo.com/forum/help-1/question/how-to-display-dialog-box-16506)

创建一个模块来保存消息并以形式显示它们：

```
from osv import osv
from osv import fields
from openerp.tools.translate import _

WARNING_TYPES = [('warning','Warning'),('info','Information'),('error','Error')]

class warning(osv.osv_memory):
    _name = 'warning'
    _description = 'warning'
    _columns = {
        'type': fields.selection(WARNING_TYPES, string='Type', readonly=True),
        'title': fields.char(string="Title", size=100, readonly=True),
        'message': fields.text(string="Message", readonly=True)}
    _req_name = 'title'

    def _get_view_id(self, cr, uid):
        """Get the view id
        @return: view id, or False if no view found
        """
        res = self.pool.get('ir.model.data').get_object_reference(cr, uid, 'osc_integ', 'warning_form')
        return res and res[1] or False

    def message(self, cr, uid, id, context):
        message = self.browse(cr, uid, id)
        message_type = [t[1]for t in WARNING_TYPES if message.type == t[0]][0]
        print '%s: %s' % (_(message_type), _(message.title))
        res = {
            'name': '%s: %s' % (_(message_type), _(message.title)),
            'view_type': 'form', 
            'view_mode': 'form',
            'view_id': self._get_view_id(cr, uid),
            'res_model': 'warning',
            'domain': [],
            'context': context,
            'type': 'ir.actions.act_window',
            'target': 'new',
            'res_id': message.id
        }
        return res

    def warning(self, cr, uid, title, message, context=None):
        id = self.create(cr, uid, {'title': title, 'message': message, 'type': 'warning'})
        res = self.message(cr, uid, id, context)
        return res

    def info(self, cr, uid, title, message, context=None):
        id = self.create(cr, uid, {'title': title, 'message': message, 'type': 'info'})
        res = self.message(cr, uid, id, context)
        return res

    def error(self, cr, uid, title, message, context=None):
        id = self.create(cr, uid, {'title': title, 'message': message, 'type': 'error'})
        res = self.message(cr, uid, id, context)
        return res 
```

创建视图表单 XML：

```
<openerp>
   <data>
        <record id="warning_form" model="ir.ui.view">
            <field name="name">warning.form</field>
            <field name="model">warning</field>
            <field eval="20" name="priority"/>
            <field name="arch" type="xml">
                <form string="Warning" version="7.0">
                    <field name="message"  nolabel="1" />
                    <footer>
                        <button string="OK" class="oe_highlight" special="cancel" />
                    </footer>
                </form>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_warning">
            <field name="name">Warning</field>
            <field name="res_model">warning</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="view_id" ref="warning_form" />
            <field name="target">new</field>
        </record>
    </data>
</openerp> 
```

最后，您可以在需要的任何地方调用方法：

```
return self.pool.get('warning').info(cr, uid, title='Export imformation', message="%s products Created, %s products Updated "%(str(prod_new),str(prod_update))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T05:13:37.967

```
def message_post(self, cr, uid, thread_id, body='', subject=None, type='notification',
                        subtype=None, parent_id=False, attachments=None, context=None,
                        content_subtype='html', **kwargs):
        """ Post a new message in an existing thread, returning the new
            mail.message ID.
        :param int thread_id: thread ID to post into, or list with one ID;
            if False/0, mail.message model will also be set as False
        :param str body: body of the message, usually raw HTML that will
            be sanitized
        :param str type: see mail_message.type field
        :param str content_subtype:: if plaintext: convert body into html
        :param int parent_id: handle reply to a previous message by adding the
            parent partners to the message in case of private discussion
        :param tuple(str,str) attachments or list id: list of attachment tuples in the form
            ``(name,content)``, where content is NOT base64 encoded

        Extra keyword arguments will be used as default column values for the
        new mail.message record. Special cases:
            - attachment_ids: supposed not attached to any document; attach them
                to the related document. Should only be set by Chatter.
        :return int: ID of newly created mail.message
    """
    if context is None:
        context = {}
    if attachments is None:
        attachments = {}
    mail_message = self.pool.get('mail.message')
    ir_attachment = self.pool.get('ir.attachment')

    assert (not thread_id) or \
            isinstance(thread_id, (int, long)) or \
            (isinstance(thread_id, (list, tuple)) and len(thread_id) == 1), \
            "Invalid thread_id; should be 0, False, an ID or a list with one ID"
    if isinstance(thread_id, (list, tuple)):
        thread_id = thread_id[0]

    # if we're processing a message directly coming from the gateway, the destination model was
    # set in the context.
    model = False
    if thread_id:
        model = context.get('thread_model', self._name) if self._name == 'mail.thread' else self._name
        if model != self._name:
            del context['thread_model']
            return self.pool.get(model).message_post(cr, uid, thread_id, body=body, subject=subject, type=type, subtype=subtype, parent_id=parent_id, attachments=attachments, context=context, content_subtype=content_subtype, **kwargs)

    # 0: Parse email-from, try to find a better author_id based on document's followers for incoming emails
    email_from = kwargs.get('email_from')
    if email_from and thread_id and type == 'email' and kwargs.get('author_id'):
        email_list = tools.email_split(email_from)
        doc = self.browse(cr, uid, thread_id, context=context)
        if email_list and doc:
            author_ids = self.pool.get('res.partner').search(cr, uid, [
                                    ('email', 'ilike', email_list[0]),
                                    ('id', 'in', [f.id for f in doc.message_follower_ids])
                                ], limit=1, context=context)
            if author_ids:
                kwargs['author_id'] = author_ids[0]
    author_id = kwargs.get('author_id')
    if author_id is None:  # keep False values
        author_id = self.pool.get('mail.message')._get_default_author(cr, uid, context=context)

    # 1: Handle content subtype: if plaintext, converto into HTML
    if content_subtype == 'plaintext':
        body = tools.plaintext2html(body)

    # 2: Private message: add recipients (recipients and author of parent message) - current author
    #   + legacy-code management (! we manage only 4 and 6 commands)
    partner_ids = set()
    kwargs_partner_ids = kwargs.pop('partner_ids', [])
    for partner_id in kwargs_partner_ids:
        if isinstance(partner_id, (list, tuple)) and partner_id[0] == 4 and len(partner_id) == 2:
            partner_ids.add(partner_id[1])
        if isinstance(partner_id, (list, tuple)) and partner_id[0] == 6 and len(partner_id) == 3:
            partner_ids |= set(partner_id[2])
        elif isinstance(partner_id, (int, long)):
            partner_ids.add(partner_id)
        else:
            pass  # we do not manage anything else
    if parent_id and not model:
        parent_message = mail_message.browse(cr, uid, parent_id, context=context)
        private_followers = set([partner.id for partner in parent_message.partner_ids])
        if parent_message.author_id:
            private_followers.add(parent_message.author_id.id)
        private_followers -= set([author_id])
        partner_ids |= private_followers

    # 3\. Attachments
    #   - HACK TDE FIXME: Chatter: attachments linked to the document (not done JS-side), load the message
    attachment_ids = kwargs.pop('attachment_ids', []) or []  # because we could receive None (some old code sends None)
    if attachment_ids:
        filtered_attachment_ids = ir_attachment.search(cr, SUPERUSER_ID, [
            ('res_model', '=', 'mail.compose.message'),
            ('res_id', '=', 0),
            ('create_uid', '=', uid),
            ('id', 'in', attachment_ids)], context=context)
        if filtered_attachment_ids:
            ir_attachment.write(cr, SUPERUSER_ID, filtered_attachment_ids, {'res_model': model, 'res_id': thread_id}, context=context)
    attachment_ids = [(4, id) for id in attachment_ids]
    # Handle attachments parameter, that is a dictionary of attachments
    for name, content in attachments:
        if isinstance(content, unicode):
            content = content.encode('utf-8')
        data_attach = {
            'name': name,
            'datas': base64.b64encode(str(content)),
            'datas_fname': name,
            'description': name,
            'res_model': model,
            'res_id': thread_id,
        }
        attachment_ids.append((0, 0, data_attach))

    # 4: mail.message.subtype
    subtype_id = False
    if subtype:
        if '.' not in subtype:
            subtype = 'mail.%s' % subtype
        ref = self.pool.get('ir.model.data').get_object_reference(cr, uid, *subtype.split('.'))
        subtype_id = ref and ref[1] or False

    # automatically subscribe recipients if asked to
    if context.get('mail_post_autofollow') and thread_id and partner_ids:
        partner_to_subscribe = partner_ids
        if context.get('mail_post_autofollow_partner_ids'):
            partner_to_subscribe = filter(lambda item: item in context.get('mail_post_autofollow_partner_ids'), partner_ids)
        self.message_subscribe(cr, uid, [thread_id], list(partner_to_subscribe), context=context)

    # _mail_flat_thread: automatically set free messages to the first posted message
    if self._mail_flat_thread and not parent_id and thread_id:
        message_ids = mail_message.search(cr, uid, ['&', ('res_id', '=', thread_id), ('model', '=', model)], context=context, order="id ASC", limit=1)
        parent_id = message_ids and message_ids[0] or False
    # we want to set a parent: force to set the parent_id to the oldest ancestor, to avoid having more than 1 level of thread
    elif parent_id:
        message_ids = mail_message.search(cr, SUPERUSER_ID, [('id', '=', parent_id), ('parent_id', '!=', False)], context=context)
        # avoid loops when finding ancestors
        processed_list = []
        if message_ids:
            message = mail_message.browse(cr, SUPERUSER_ID, message_ids[0], context=context)
            while (message.parent_id and message.parent_id.id not in processed_list):
                processed_list.append(message.parent_id.id)
                message = message.parent_id
            parent_id = message.id

    values = kwargs
    values.update({
        'author_id': author_id,
        'model': model,
        'res_id': thread_id or False,
        'body': body,
        'subject': subject or False,
        'type': type,
        'parent_id': parent_id,
        'attachment_ids': attachment_ids,
        'subtype_id': subtype_id,
        'partner_ids': [(4, pid) for pid in partner_ids],
    })

    # Avoid warnings about non-existing fields
    for x in ('from', 'to', 'cc'):
        values.pop(x, None)

    # Create and auto subscribe the author
    msg_id = mail_message.create(cr, uid, values, context=context)
    message = mail_message.browse(cr, uid, msg_id, context=context)
    if message.author_id and thread_id and type != 'notification' and not context.get('mail_create_nosubscribe'):
        self.message_subscribe(cr, uid, [thread_id], [message.author_id.id], context=context)
    return msg_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-30T07:09:39.453

在我看来，最简单的方法是使用“action_info”或“action_warn”客户端操作。它们都产生类似咆哮的通知，但它们使用不同的图标。要调用其中任何一个，请从您的服务器操作中返回一个字典，如下所示：

```
{
    'type': 'ir.actions.client',
    'tag': 'action_info',
    'name': 'Notification',
    'params': {
       'title': 'Notification Title',
       'text': 'Notification text.',
       'sticky': True
    }
} 
```

`sticky`除了参数之外，大部分内容应该是不言自明的。`sticky`指示通知是否应保留直到用户关闭它。如果设置为`False`，它会在几秒钟后自行消失。

如果您需要[，我的博客上](http://ryepdx.com/2014/12/message-boxes-in-openerpodoo/)有一个更完整的示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T10:11:48.610

这个 AFAIK 没有小部件。你应该开发你自己的。[你可以在这里](https://stackoverflow.com/a/11950556/647924)找到一个起点

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T12:36:50.133

```
def log_prod(self, cr, uid, ids, context=None):
        product=self.pool.get('product.product').browse(cr, uid, ids)
        msg=_("Product %s has been created") % product.name
        self.message_post(cr, uid, ids, body=msg, context=context)
        return True

def create(self, cr, uid, data, context=None):
    new_id = super(product_product,self).create(cr, uid, data, context)
    self.log_prod(cr,uid,new_id,context)
    return new_id 
```

喜欢这个代码试试。

希望这会帮助你。:)

# knockout.js - 在我的模型中对我的属性进行淘汰验证

> ID：15654288
> 
> 赞同：0
> 
> 时间：2013-03-27T08:15:22.923
> 
> 标签：knockout.js, knockout-validation

我尝试在我的页面上添加淘汰赛验证。

我在这里看到一个例子：[如何使用 ko.validation.group 函数](https://stackoverflow.com/questions/13037713/how-to-use-ko-validation-group-function)

但我的代码有些不同，见下文：

```
define(function (require) {

var datacontext = require('services/datacontext'),
    app = require('durandal/app');

var transport = ko.observable(),
    errors = ko.validation.group(transport);

....
....

ko.validation.configure({
    decorateElement: true
});

var vm = {
    transport: transport,
    errors: errors,
    activate: activate,
    canSave: canSave,
    save: save,
    cancel: cancel
};

return vm;
}); 
```

其中“传输”是包含要验证的属性的对象。

在运行时我没有任何错误但它不起作用：如果我的输入元素上确实有错误（缺失值），则错误对象始终是有效事件。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T06:15:21.037

尝试这个

```
vm["errors"] = ko.validation.group(transport); 
```

# batch-file - 为什么我在 dos-batch 文件的声明中得到了相同的时间？

> ID：15654294
> 
> 赞同：0
> 
> 时间：2013-03-27T08:15:39.847
> 
> 标签：batch-file

我写了一个批处理文件来获取 cmd 在 for 语句中的开始时间：

```
for /L %%i in (1,1,3) do (
echo %%i
echo "traceroute %%i start at %date% %time%" >tr%%i.txt
adb shell "/data/local/traceroute smtp.163.com" 2>&1 >>tr%%i.txt
) 
```

但在 3 个结果文件中得到了相同的时间：

```
"traceroute 1 start at 2013/03/27 周三 15:48:47.12"

"traceroute 2 start at 2013/03/27 周三 15:48:47.12" 

"traceroute 3 start at 2013/03/27 周三 15:48:47.12" 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T08:39:36.707

`FOR`循环是从`parsed`到`FOR`其最后的右括号（即`ALL`您发布的代码段。此时，**ANY** `%var%`将被`THEN-CURRENT`变量的（即 PARSE-TIME）值替换。**然后**执行代码。

因此`%date% %time%`在命令被解析时被它们的值替换。

您可以通过至少三种方式克服这个问题：

1/ 使用 DELAYED EXPANSION，由`SETLOCAL ENABLEDELAYEDEXPANSION`指令调用，当 %var% STILL 显示 PARSE-TIME 值，但`!var!`显示 RUN-TIME 值 2/ 通过`%%var%%` CALLing 间接扩展 3/ 使用子例程或外部批处理文件

试试这个代码：

```
@ECHO OFF
SETLOCAL ENABLEDELAYEDEXPANSION
FOR %%i IN (1 2 3) DO (
ECHO START of run %%i
ECHO using ^!time^! : !time! - PARSE TIME was %time%
CALL ECHO using CALL %%%%TIME%%%% : %%TIME%%
CALL :report
timeout /t 5
ECHO using ^!time^! : !time!
CALL ECHO using CALL %%%%TIME%%%% : %%TIME%%
CALL :report
ECHO END of run %%i
ECHO.
)
GOTO :eof

:report
ECHO :report says TIME is %TIME%
GOTO :eof 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:28:09.380

您应该使用延迟扩展`!variable!`：

```
@echo off &setlocal enabledelayedexpansion
for /L %%i in (1,1,3) do (
echo %%i
echo "traceroute %%i start at !date! !time!" >tr%%i.txt
adb shell "/data/local/traceroute smtp.163.com" 2>&1 >>tr%%i.txt
) 
```

# asp.net - 在不使用 MVC 的情况下在网页中渲染部分

> ID：15654295
> 
> 赞同：5
> 
> 时间：2013-03-27T08:15:47.333
> 
> 标签：asp.net, razor, razor-2

我将 Razor 与 WebPages 一起使用，但没有 MVC。我喜欢它的简单性，所以我现在对使用 MVC 不感兴趣。但是，我希望能够将部分内容呈现到我的页面中。如菜单、页脚等。

使用 MVC，您可以这样做：@{ Html.RenderPartial("Footer", Model);}

我想做类似的事情：@{ Html.RenderPartial("footer.cshtml"); }

我怎样才能达到我想要的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T12:26:30.420

看看这个链接[http://www.mikesdotnetting.com/Article/151/Extending-ASP.NET-Web-Pages-Create-Your-Own-Helpers](http://www.mikesdotnetting.com/Article/151/Extending-ASP.NET-Web-Pages-Create-Your-Own-Helpers)

希望对你有帮助

也试试这个：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Main Page</title>
  </head>
  <body>
    @RenderPage("/Shared/_Header.cshtml")
    <h1>Index Page Content</h1>
    <p>This is the content of the main page.</p>
    @RenderPage("/Shared/_Footer.cshtml")
  </body>
</html> 
```

# ios - iOS - 处理指向已释放变量的异步任务

> ID：15654303
> 
> 赞同：1
> 
> 时间：2013-03-27T08:16:21.050
> 
> 标签：ios, memory-management, asynchronous, block

我正在从我的控制器调用一个异步函数，并将一个对错误变量的引用传递给它，比如说：

```
NSError *err=nil;
[self myAsyncTask:&err]; 
```

如果控制器被释放，则 err 变量不再存在，因此应用程序崩溃并出现 BAD_ACCESS 错误（因为函数尝试更改 err 变量的值）。我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:22:24.910

请注意，没有一个内置框架方法使用通过引用传递错误报告和异步调用——它们都使用委托或块来传达错误状态。使用块，您的 API 可以被编写成如下使用：

```
[self doAsyncTaskWithErrorHandler: ^(NSError *error) {
    //Handle error
}]; 
```

方法签名可能看起来像

```
- (void)doAsyncTaskWithErrorHandler:(void (^)(NSError *error))errorHandler; 
```

在实现中，您曾经`*error = someError;`做过类似的事情：

```
NSError *error = ...;
if (errorHandler) {
    errorHandler(error);
} 
```

如果我没记错的话，这并不是对象生命周期的真正问题——如果在设置错误之前弹出堆栈帧，那么问题中的模式也可能会导致崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:36:10.330

> 我该如何处理？

如果您正在处理异步函数，则必须确保它使用的任何变量在该函数完成之前保持有效。Objective-C 的内存管理非常适合这一点——像你这样的方法`-myAsyncTask`可以保留它的参数，直到它不再需要它们。这样，即使控制器（用你的话）被释放，变量引用的对象将保持有效。

另一种方法是使用块来实现异步功能。块会自动保留它们使用的资源，因此它们可以有效地为您解决这个问题。

# mysql - MySQL - 获取前 3 个逗号分隔值

> ID：15654309
> 
> 赞同：1
> 
> 时间：2013-03-27T08:16:43.667
> 
> 标签：mysql, string

我有一个查询，它返回一个带有一组逗号分隔值的字段。我想将这些值中的前三个放入查询结果中的单独列中。

我可以得到第一个，`SUBSTRING_INDEX`但我怎样才能得到另外两个？

```
SELECT 
  'aaaaa, bbbbb, ccccc',
  SUBSTRING_INDEX('aaaaa, bbbbb, ccccc', ',', 1) AS column_one 
```

编辑 - 哎呀，抱歉忘了提。我要拆分的值可能多于（或少于）三个要提取的字符串。

例如，上面的字符串很容易是 'aaaaa' 或 'aaaaa, bbbbb, ccccc, ddddd, eeeee'。

在每种情况下，我只需要前三个（或者存在多少）。

任何建议表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:19:38.160

您可以使用[SUBSTRING_INDEX](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_substring-index)两次，第二次使用 -1 参数：

```
SELECT
  'aaaaa, bbbbb, ccccc',
  SUBSTRING_INDEX('aaaaa, bbbbb, ccccc', ',', 1) AS column_one,
  SUBSTRING_INDEX(SUBSTRING_INDEX('aaaaa, bbbbb, ccccc', ',', 2), ',', -1) AS column_two,
  SUBSTRING_INDEX(SUBSTRING_INDEX('aaaaa, bbbbb, ccccc', ',', 3), ',', -1) AS column_three 
```

如果参数为负数，则返回最终分隔符右侧（从右侧开始计数）的所有内容。例如。

*   `SUBSTRING_INDEX('aaaaa, bbbbb, ccccc', ',', 2)`将返回`aaaaa, bbbbb`
*   `SUBSTRING_INDEX(`aaaaa，然后 bbbbb`, ',', -1)`将返回`bbbbb`

您可能还想使用 ', ' 作为分隔符，或[TRIM](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_trim)结果。

请[在此处](http://sqlfiddle.com/#!2/d41d8/9654)查看小提琴。

**编辑**

如果您想考虑可能具有少于三个值的字符串，您可以使用如下内容：

```
SELECT
  s,
  SUBSTRING_INDEX(s, ',', 1) AS column_one,
  CASE WHEN LENGTH(s)-LENGTH(Replace(s, ',', ''))>0
       THEN SUBSTRING_INDEX(SUBSTRING_INDEX(s, ',', 2), ',', -1)
       ELSE NULL END AS column_two,
  CASE WHEN LENGTH(s)-LENGTH(Replace(s, ',', ''))>1
       THEN SUBSTRING_INDEX(SUBSTRING_INDEX(s, ',', 3), ',', -1)
       ELSE NULL END AS column_three
FROM
  strings 
```

请[在此处](http://sqlfiddle.com/#!2/5e054/1)查看小提琴。

# asp.net - 将值传递给 XML 文件

> ID：15654313
> 
> 赞同：0
> 
> 时间：2013-03-27T08:17:00.463
> 
> 标签：asp.net, xml, vb.net

我有一个将表单内容发送到另一个站点的 Web 应用程序。这另一个我可以毫无问题地传递登录信息，并且页面验证正常，但我不知道如何传递另一端所需的一组信息。该数组包含设置名称及其各自的设置值。我在 PHP 中有这个工作，但不知道如何在 ASP.net 中做到这一点

在 PHP 中，我将它用于数组：

```
 $aParams = array(
    'customeremailaddress' => 'mr.test@test.com',
    'customername' => 'mr test',
    'exlibrisfile' => '@/ePubs/Ex-Libris.png'
); 
```

并发送数组：

```
 curl_setopt($rCurl, CURLOPT_POSTFIELDS, $aParams); 
```

这是我最终得到的 VB 代码，它返回 400 错误请求错误：

```
 Dim postString As String = String.Format("customeremailaddress={0}&customername={1}&referenceid={2}&languagecode={3}&expirydays={4}", customeremailaddress, customername, referenceid, languagecode, expirydays)
    Dim postBytes As Byte() = Encoding.UTF8.GetBytes(postString)

    webRequest__1.ContentLength = postBytes.Length

    Dim requestStream As Stream = webRequest__1.GetRequestStream()
    requestStream.Write(postBytes, 0, postBytes.Length) 
```

完整代码：

```
 Public Sub TestConn()        

    Dim customeremailaddress As String = "mr.test@test.com"
    Dim customername As String = "mr test"
    Dim referenceid As String = "ordertest123"
    Dim languagecode As String = "1043"
    Dim expirydays As String = "30"

    Dim UserName As String = "testusername"
    Dim password As String = "testpassword"
    Dim siteCredentials As New NetworkCredential(UserName, password)

    Dim URLAuth As String = "http://service.someurl.com/process.xml"
    Dim postString As String = String.Format("customeremailaddress={0}&customername={1}&referenceid={2}&languagecode={3}&expirydays={4}", customeremailaddress, customername, referenceid, languagecode, expirydays)
    Dim postBytes As Byte() = Encoding.UTF8.GetBytes(postString)

    Const contentType As String = "application/x-www-form-urlencoded"
    System.Net.ServicePointManager.Expect100Continue = False

    Dim cookies As New CookieContainer()
    Dim webRequest__1 As HttpWebRequest = TryCast(WebRequest.Create(URLAuth), HttpWebRequest)
    webRequest__1.Method = "POST"
    webRequest__1.ContentType = contentType
    webRequest__1.CookieContainer = cookies
    webRequest__1.ContentLength = postBytes.Length
    webRequest__1.UserAgent = "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.1) Gecko/2008070208 Firefox/3.0.1"
    webRequest__1.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"
    webRequest__1.Referer = "http://service.someurl.com/process.xml"
    webRequest__1.Credentials = siteCredentials

    Dim requestStream As Stream = webRequest__1.GetRequestStream()
    requestStream.Write(postBytes, 0, postBytes.Length)

    Dim requestWriter As New StreamWriter(webRequest__1.GetRequestStream())

    Dim responseReader As New StreamReader(webRequest__1.GetResponse().GetResponseStream())
    Dim responseData As String = responseReader.ReadToEnd()

    responseReader.Close()
    webRequest__1.GetResponse().Close()

End sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:34:15.100

这是我将数据发布到另一个 url 的代码。文本是表单 url-econded 字符串。希望这可以帮助

C＃

```
private string PostData(string text)
{
  WebRequest request = WebRequest.Create(url);
  request.Method = "POST";
  byte[] byteArray = Encoding.UTF8.GetBytes(text);
  request.ContentType = "application/x-www-form-urlencoded";
  request.ContentLength = byteArray.Length;

  using (Stream dataStream = request.GetRequestStream())
  {
    dataStream.Write(byteArray, 0, byteArray.Length);
  }

  using(WebResponse response = request.GetResponse())
  using (Stream dataStream = response.GetResponseStream())
  using (StreamReader reader = new StreamReader(dataStream))
  {
    return reader.ReadToEnd();
  }

} 
```

VB.NET

```
Private Function PostData(text As String) As String
Dim request As WebRequest = WebRequest.Create(url)
request.Method = "POST"
Dim byteArray As Byte() = Encoding.UTF8.GetBytes(text)
request.ContentType = "application/x-www-form-urlencoded"
request.ContentLength = byteArray.Length

Using dataStream As Stream = request.GetRequestStream()
    dataStream.Write(byteArray, 0, byteArray.Length)
End Using

Using response As WebResponse = request.GetResponse()
    Using dataStream As Stream = response.GetResponseStream()
        Using reader As New StreamReader(dataStream)
            Return reader.ReadToEnd()
        End Using
    End Using
End Using

End Function 
```

# jquery - JQuery JSON 数据两次附加到表中

> ID：15654316
> 
> 赞同：1
> 
> 时间：2013-03-27T08:17:18.980
> 
> 标签：jquery, ajax, json

我进行了很好的搜索，堆栈溢出似乎与我遇到的问题不符。

我有一个 JQuery ajax 请求，它从我的服务器以 JSON 的形式收集信息。该数据具有以下结构：

```
numreturned: 6
result: "success"
startnumber: 0
tickets: {ticket:[,…]}
ticket: [,…]
0: {id:1504, tid:932632, deptid:4, userid:0, name:customer,…}
1: {id:1503, tid:553074, deptid:5, userid:0, name:customer,…}
2: {id:1502, tid:106861, deptid:4, userid:0, name:customer,…}
3: {id:1500, tid:132776, deptid:4, userid:0, name:sales,…}
4: {id:1499, tid:413148, deptid:4, userid:0, name:sales,…}
5: {id:1498, tid:788415, deptid:4, userid:0, name:sales,…}
totalresults: "6" 
```

这只是从 Chrome 开发工具中复制过来的，目的是为您提供一个想法。首当其冲的工作是由这段 javascript 完成的：

```
$('#click_tickets').click(
    function(){
        link_make_active('#click_tickets', '#tickets');

        $.get('api_tickets.php?get=tickets', function(data) {

            var data = $.parseJSON(data);

            if( data.tickets.ticket.length === 0 ) {
                $('div#tickets tr.nothing').slideDown();
            } else {

                $('div#tickets tbody').html('');

                $( data.tickets.ticket ).each(function(i,d){
                    $('div#tickets table tbody').append(
                        '<tr><td>' + '</td>' +
                        '<td>' + d.priority + '</td>' +
                        '<td>' + d.date + '</td>' +
                        '<td>' + d.name +'</td>' +
                        '<td>' + d.subject +'</td>' +
                        '<td>' + '</td></tr>'
                    );
                });

            }

        });
    }
);

function link_make_active(link, dash) {
    $('ul.nav li').removeClass('active');
    $(link).parent("li").addClass("active");
    $('.dashboard').slideUp();
    $(dash).slideDown();
} 
```

现在的问题是我在运行 javascript 时得到的结果是这样的：

```
Priority    Time Opened Client  Subject
Medium  2013-03-26 18:12:04 OVH OVH: Renewal of your services -     
Medium  2013-03-26 18:02:05 Twitter Tweets from 6 others    
Medium  2013-03-25 19:18:05 OVH OVH: Renewal of your services -     
Medium  2013-03-23 17:03:05 sales@.com  Your thawte SSL123 Certificate Is Approved  
Medium  2013-03-23 16:45:04 sales@.com  SSL123 Certificate Approval 
Medium  2013-03-23 16:44:04 sales@.com  Order Information Request for   
Medium  2013-03-26 18:12:04 OVH OVH: Renewal of your services -     
Medium  2013-03-26 18:02:05 Twitter Tweets from 6 others    
Medium  2013-03-25 19:18:05 OVH OVH: Renewal of your services -     
Medium  2013-03-23 17:03:05 sales@.com  Your thawte SSL123 Certificate Is Approved  
Medium  2013-03-23 16:45:04 sales@.com  SSL123 Certificate Approval 
Medium  2013-03-23 16:44:04 sales@.com  Order Information Request for 
```

注意它是如何复制数据的，就好像它已经迭代了两次一样。现在我不认为它已经迭代了两次，因为我改变了 $.each 方法来包含这个：

```
$( data.tickets.ticket ).each(function(i,d){
    $('div#tickets table tbody').append(
        '<tr><td>' + '</td>' +
        '<td>' + d.priority + '</td>' +
        '<td>' + d.date + '</td>' +
        '<td>' + d.name +'</td>' +
        '<td>' + d.subject +'</td>' +
        '<td>' + '</td></tr>'
    );
    console.log(d); // Added to output to console the individual ticket content on each iteration
}); 
```

但是控制台只显示了一轮数据，而不是你想象的两个。只是为了让您不要以为我创建了两个表格或任何内容是页面上的 HTML：

```
<!-- Tickets Dashboard -->
<div class="dashboard" id="tickets">
    <h1>Ticket Dashboard</h1>
    <table>
        <thead>
            <tr><th>Time Open</th><th>Priority</th><th>Time Opened</th><th>Client</th><th>Subject</th><th>Product</th></tr>
        </thead>
        <tbody></tbody>
        <tr class="nothing"><td colspan="5">No tickets, good work!</td></tr>
    </table>
</div> 
```

这让我困惑了很长一段时间，任何帮助都将不胜感激。谢谢你们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T09:22:12.647

我相信您的表格在您的浏览器中呈现有两个`<tbody>`标签。原因是
`<tr class="nothing"><td colspan="5">No tickets, good work!</td></tr>`标签，您在`<tbody>`.

所以 ...`$('div#tickets table tbody').append(...` 在两个 tbodies 中的每一个中附加表格行。

你可以试试：
`console.log($('div#tickets table tbody').length)`我相信结果会是“2”。为了防止这种情况，请保留此“没有票，干得好！” tbody 内的行或使用 `$('div#tickets table tbody:eq(0)`选择器仅获取第一个 tbody。

# json - 如何使用prototype.js生成如下json数据？

> ID：15654317
> 
> 赞同：2
> 
> 时间：2013-03-27T08:17:28.203
> 
> 标签：json, prototypejs

如何使用prototype.js生成如下json数据？

```
var testData=[{
                name: 'Year 1800',
                data: [107, 31, 635, 203, 2]
            }, {
                name: 'Year 1900',
                data: [133, 156, 947, 408, 6]
            }, {
                name: 'Year 2008',
                data: [973, 914, 4054, 732, 34]
            }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:30:08.403

您可以使用`Object.toJSON(testData);`

# ios - 在 iOS 中更新 SQlite 版本

> ID：15654318
> 
> 赞同：1
> 
> 时间：2013-03-27T08:17:33.777
> 
> 标签：ios, objective-c, ios6

我是 iOS 新手，但是，我知道在 Android 中，如果您将 SQLLite DB 的表结构从旧版本的应用程序更改为另一个。比我需要更改名为**“DATABASE_VERSION”**的东西，以便删除旧表并创建新表。

如何在 iOS 中做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:33:31.160

iOS 版本的 SQLite（实际的 SQLite 库）没有这种便利性。为了跟踪数据库版本，SQLite 提供了一个名为 的良性字段`PRAGMA user_version`，您可以手动使用`UPDATE`它，但它不会像 Android 那样触发数据库升级。相反，你必须要么`DROP TABLE`自己`ALTER TABLE`做。

# regex - 如何更改搜索的输出消息？

> ID：15654319
> 
> 赞同：1
> 
> 时间：2013-03-27T08:17:35.667
> 
> 标签：regex, search, vim, output

我想在搜索完成后更改输出消息。

pe 当我使用很长的正则表达式进行搜索并且没有找到任何内容时 vim 返回消息`E486: Pattern not found: .... very long regex code ...`

我想捕获输出并更改此消息。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T08:36:09.563

该`:s[ubstitute]`命令具有`/e`抑制错误的标志，但 AFAIK 甚至`:silent /foo`不会抑制该错误消息。好吧，你不想压制它，无论如何，你想“捕获”它并展示其他东西。

像每种语言一样，vimscript 也有自己的`try/catch`. 您可以在页面下方阅读有关它的内容`:h :try`。

```
try
  /foo
catch /^Vim\%((\a\+)\)\=:E486/
  let @n = v:exception
  echo "No luck!"
endtry 
```

您可以将您包装`try/catch`在一个函数`noremap`中`/`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T08:35:57.203

我认为您正在谈论在 vimscript 中捕获错误消息。

然后你可能想签出`catch`：`:h catch`

```
 *:cat* *:catch* *E603* *E604* *E605*
:cat[ch] /{pattern}/    The following commands until the next |:catch|,
            |:finally|, or |:endtry| that belongs to the same
            |:try| as the ":catch" are executed when an exception
            matching {pattern} is being thrown and has not yet
            been caught by a previous ":catch".  Otherwise, these
            commands are skipped.
            When {pattern} is omitted all errors are caught.
            Examples: >
        :catch /^Vim:Interrupt$/    " catch interrupts (CTRL-C)
        :catch /^Vim\%((\a\+)\)\=:E/    " catch all Vim errors
        :catch /^Vim\%((\a\+)\)\=:/ " catch errors and interrupts
        :catch /^Vim(write):/       " catch all errors in :write
        :catch /^Vim\%((\a\+)\)\=:E123/ " catch error E123
        :catch /my-exception/       " catch user exception
        :catch /.*/         " catch everything
        :catch              " same as /.*/ 
```

在`try`块中进行搜索，然后您可以捕获错误消息，然后做任何您想做的事情。

# ios - 如何为键设置 iOS 默认可本地化字符串？

> ID：15654329
> 
> 赞同：0
> 
> 时间：2013-03-27T08:18:39.360
> 
> 标签：ios, objective-c, localization, localizable.strings

我`Localizable.strings`用 2 种语言 en & jp 创建了一个文件。

zh:`"key"="english";`

J.P：`"key"="日本";`

使用 en & jp 时效果很好。

```
_title.text = NSLocalizedString(@"key",nil); 
```

但是当我使用其他语言（如德语）时，标签将显示`key`在视图中。我想显示`en`字符串值默认值的键。

`en`当用户使用没有 en & jp 的其他语言时如何设置加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:23:56.750

您可以为“de”创建一个`Localizable.strings`，然后您可以从“en”复制/粘贴（如果“en”是您不需要复制/粘贴的主要语言，它将使用“en”字符串创建) 但很奇怪，我有“en”和“es”的应用程序，默认为“en”。我什么都没做。

# jquery - Jquery Validation Plugin - 如何为每个验证添加一个函数

> ID：15654333
> 
> 赞同：0
> 
> 时间：2013-03-27T08:18:55.143
> 
> 标签：jquery, jquery-validate

是否可以为表单字段的每次验证执行一些功能？我已经启用了验证插件的自动对焦，但问题是我创建的功能发生在验证发生之前。

我的功能：

```
$("select, input").change(function(){
    alert("example");
}); 
```

验证

```
 $(this.initVariables.formId).validate({
        ignore: ":hidden",
        onkeyup: false
    }); 
```

我想要的是：

```
Validate
execute My Function 
```

怎么了：

```
execute My Function
Validate 
```

我的目标：是确定是否循环所有字段以计算错误消息的数量。如果 My Function 在验证之前发生，则错误消息将不可见。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:43:45.300

如果您使用此[http://docs.jquery.com/Plugins/Validation#Options_for_the_validate.28.29_method中的 jquery 验证插件](http://docs.jquery.com/Plugins/Validation#Options_for_the_validate.28.29_method)

您可以在验证器部分使用答案，而不是编写自己的钩子 [http://docs.jquery.com/Plugins/Validation/Validator/numberOfInvalids](http://docs.jquery.com/Plugins/Validation/Validator/numberOfInvalids)

```
// Displays a summary of invalid fields after a invalid submit.
var validator = $("#myform").validate({
  invalidHandler: function() {
    $("#summary").text(validator.numberOfInvalids() + " field(s) are invalid");
  }
}); 
```

希望这有帮助

# android - 用 Google Maps Android API 替换建筑物的地图

> ID：15654337
> 
> 赞同：0
> 
> 时间：2013-03-27T08:19:00.763
> 
> 标签：android, api, google-maps

我使用最新的谷歌地图 API。我想做的是我有一个建筑物的平面图。我想把它放在正确的位置并显示这个图像而不是法线贴图。这有点像如果你在火车站放大很多，你会得到更多细节。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:24:19.627

有一个带有官方 Google Maps for Android API 示例代码（[安装方法](https://developers.google.com/maps/documentation/android/intro#sample_code)）的示例，称为`GroundOverlayDemoActivity.java`.

你可以试试这个并检查它是否是进一步调查的起点。

这是此活动的屏幕截图：

![在此处输入图像描述](../Images/d8dc7526c53f5ba732f71fd90b4e6d12.png)

# java - 使用 HSSF 读取 excel 文件

> ID：15654338
> 
> 赞同：1
> 
> 时间：2013-03-27T08:19:03.857
> 
> 标签：java, eclipse, hssf

Emp ID 姓名 薪水

1.0 约翰 2000000.0

2.0 院长 4200000.0

3.0 山姆 2800000.0

4.0 卡斯 600000.0

我创建了这段代码：

```
import java.io.File;
import java.io.FileInputStream;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import org.apache.poi.hssf.usermodel.HSSFCell;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.poifs.filesystem.POIFSFileSystem;

public class sample2
 {
    public static void main(String[] args) {
    new sample2().sample2();
}
 }

FileInputStream file = new FileInputStream(new File("C:\\test.xls"));
//Get the workbook instance for XLS file 
HSSFWorkbook workbook = new HSSFWorkbook(test);

//Get first sheet from the workbook
HSSFSheet sheet = workbook.getSheetAt(0);

//Get iterator to all the rows in current sheet
Iterator<Row> rowIterator = sheet.iterator();

//Get iterator to all cells of current row
Iterator<Cell> cellIterator = row.cellIterator();

try {

  FileInputStream file = new FileInputStream(new File("C:\\test.xls"));

  //Get the workbook instance for XLS file 
  HSSFWorkbook workbook = new HSSFWorkbook(file);

  //Get first sheet from the workbook
  HSSFSheet sheet = workbook.getSheetAt(0);

  //Iterate through each rows from first sheet
   Iterator<Row> rowIterator = sheet.iterator();
   while(rowIterator.hasNext()) {
     Row row = rowIterator.next();

     //For each row, iterate through each columns
    Iterator<Cell> cellIterator = row.cellIterator();
    while(cellIterator.hasNext()) {

        Cell cell = cellIterator.next();

        switch(cell.getCellType()) {
            case Cell.CELL_TYPE_BOOLEAN:
                System.out.print(cell.getBooleanCellValue() + "\t\t");
                break;
            case Cell.CELL_TYPE_NUMERIC:
                System.out.print(cell.getNumericCellValue() + "\t\t");
                break;
            case Cell.CELL_TYPE_STRING:
                System.out.print(cell.getStringCellValue() + "\t\t");
                break;
        }
    }
    System.out.println("");
   }
   file.close();
   FileOutputStream out = 
     new FileOutputStream(new File("C:\\test.xls"));
  workbook.write(out);
  out.close();

} catch (FileNotFoundException e) {
  e.printStackTrace();
} catch (IOException e) {
  e.printStackTrace(); 
```

}

使用 POI 库从这个 excel 文件中读取内容。我的编辑器是 Eclipse。但是当我运行程序时，我采取了这个：线程“main”java.lang.Error中的异常：未解决的编译问题：方法sample2（）未定义类型sample2

```
at sample2.main(sample2.java:17) 
```

有什么帮助吗？提前谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:20:56.253

```
public class sample2
 {
    public static void main(String[] args) {
    new sample2().sample2(); // This is wrong too.
    }
 } 
```

在此之后的所有代码都是毫无意义的。你的课基本上以第二课结束了`}`。

您可能希望在您的`main()`方法中移动所有这些。

`main()`另外，方法中的这段代码`new sample2().sample2();`是错误的。

应该是这样的

```
sample2 s = new sample2(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:27:23.673

删除代码中的最后一个花括号：

```
{
public static void main(String[] args) {
new sample2().sample2(); 
```

} }

然后创建一个名为 test2() 的方法，如下所示：

```
public void sample2(){ //Put your code here } 
```

# ios5 - 在 iOS 5 和 6 上仅支持在一个选项卡中旋转

> ID：15654339
> 
> 赞同：0
> 
> 时间：2013-03-27T08:19:07.217
> 
> 标签：ios5, ios6, rotation, uitabbar, autorotate

我的应用程序是一个有两个标签的记分员。标签一是实际进行记分的地方，标签二包含过去比赛的历史。只有第一个选项卡支持旋转，并且在旋转时会隐藏其导航栏和选项卡栏（没有足够的垂直空间）。我根本不想在历史选项卡上支持旋转，因为选项卡栏隐藏在计数器中。切换标签然后让标签栏消失是非常不和谐的。

有几种类型的游戏可以显示在第一个标签栏中，都是“CounterBase”的子类。当一个新游戏开始时，标签栏中的第一个视图控制器被换出。所有旋转代码都在 CounterBase 中处理，而不是在其子类中。

我尝试了很多方法来支持轮换，但它们都很不稳定。到目前为止，我得到的最好结果是在第一次加载应用程序时一切正常，但在第一次启动新游戏时停止旋转（交换第一个视图控制器）。

我发现的一件事是，在第一个视图控制器被换出后，应用程序委托中的 supportedInterfaceOrientationsForWindow 不再被调用。

处理这个问题的最佳方法是什么？

**更新**我忘了我在 iPad 上使用标签栏，因为它总是隐藏的。旋转在那里工作得很好，所以现在我很困惑。但是，历史选项卡永远不会显示，这可能是相关的，也可能是不相关的。

**更新 2**我也尝试使用自定义导航控制器并实现 shouldAutorotate。仍然没有工作。

**更新 3**我发现它并没有替换导致问题的第一个选项卡，而是在带有 presentViewController:animated:completion: 的导航控制器中呈现模式视图。我尝试在呈现的视图控制器中覆盖 shouldAutorotate ，但它什么也没做。另外，我在下面的 UINavigationController 上添加了我正在使用的类别。

这是我当前的实现：

**标签栏控制器类别**

```
 -(BOOL)shouldAutorotate{
        if (self.selectedIndex == 0) // First tab is Counter
            return YES;
        else
            return NO;
    }

    - (NSUInteger)supportedInterfaceOrientations{
        if (self.selectedIndex==0) {
            return UIInterfaceOrientationMaskAll;
        }
        else {
            return UIInterfaceOrientationMaskAllButUpsideDown;
        }
    }

    - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
        ALog(@"Tab bar selectedIndex: %d", self.selectedIndex);
        return self.selectedIndex == 0;
    } 
```

**CounterBase**

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    if (UI_USER_INTERFACE_IDIOM_PAD()){
        return YES;
    } else if (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown){
        return YES;
    }
    return NO;
}

- (NSUInteger)supportedInterfaceOrientations {
    if (UI_USER_INTERFACE_IDIOM_PHONE())
        return UIInterfaceOrientationMaskAllButUpsideDown;
    else
        return UIInterfaceOrientationMaskAll;
}

- (BOOL) shouldAutorotate {
    return YES;
} 
```

**历史库**

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
    BilliardsBuddyAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
    return appDelegate.tabBarController.selectedIndex == 0;
}

-(BOOL)shouldAutorotate{
    return NO;
}

-(NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationPortrait;
} 
```

**应用委托**

```
- (NSUInteger) application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window {
    ALog(@"Tab bar selectedIndex: %d", tabBarController.selectedIndex);
    if (tabBarController.selectedIndex == 0 || UI_USER_INTERFACE_IDIOM_PAD()){
        return UIInterfaceOrientationMaskAll;
    } else {
        return UIInterfaceOrientationMaskPortrait;
    }
}

@implementation UINavigationController (autoRotate)
-(BOOL)shouldAutorotate {
    return YES;
}
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:42:51.177

好吧，三天后我终于解决了这个问题。我正在使用 Mugunth Kumar 的出色[UIKit 类别](https://github.com/MugunthKumar/UIKitCategoryAdditions)来展示操作表。显然 UIActionSheet 不喜欢有一个不是 UIViewController 的委托集。（或者甚至可能是最顶层的视图控制器。我不确定。）切换回标准 UIActionSheet showFromTabBar 解决了这个问题。

# c# - 更改 webclient 响应时间

> ID：15654341
> 
> 赞同：0
> 
> 时间：2013-03-27T08:19:16.580
> 
> 标签：c#, asp.net, facebook, webclient

我想在我的网站上使用 facebook like 按钮。由于我的大多数访问者来自伊朗，而 facebook 在伊朗被过滤，如果有人来自伊朗，喜欢按钮会被过滤，页面会变得非常难看。我想防止这种情况是使用 webclient 尝试连接到 facebook。如果成功，我会放置like按钮，否则我不会：

```
string fb_result="failed";
WebClient webclient= new  WebClient();
try{
fb_result=webclient.DownloadString("http://www.fabebook.com");
}
catch{
 fb_result="failed"; //if its being filtered exception is raised
} 
```

在我的 html 中：

```
<%if(fb_result)!="failed"){%>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div class="fb-like" data-href="http://www.mysite.com" data-send="true" data-width="450" data-show-faces="true"></div>
<%}%> 
```

这工作正常，但问题是，当 webclient 无法连接时，引发错误需要很长时间。有什么方法可以让 webclient 尝试更短的时间，如果无法连接更快地引发错误。

顺便说一句，检查是否可以连接到 facebook 的任何其他方法都适用。因为这可能不是检查它的唯一方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:41:05.243

正如我在评论中所说，`WebClient`您编写的代码将不起作用，因为它是在服务器上执行的，因此它将尝试使用您的网络服务器的连接连接到 Facebook，这将始终成功（除非您的虚拟主机离线）。

最好的方法是让您的页面在浏览器中加载时发出 AJAX 请求。它应该请求 Facebook 上的已知资源（例如他们的主页，或“Like”图像本身）。当且仅当响应符合预期时，您的 AJAX 响应处理程序将加载其余的 Facebook 客户端脚本。如果您通过请求 Like 图像来测试它，那么您只需要检查响应的内容类型（即确保它是`image/png`）；如果响应具有非 200 状态代码或请求超时，则不加载 Facebook 脚本。

# lucene - Alfresco 提升网站的结果

> ID：15654345
> 
> 赞同：1
> 
> 时间：2013-03-27T08:19:40.880
> 
> 标签：lucene, full-text-search, alfresco

与其他网站相比，我正在尝试提高特定 Alfresco 网站的结果。我已经编写了以下查询，但它不能正常工作：

```
(((TAG:term or cm:name:term OR cm:title:term )^8 OR (cm:description:term )^6) AND PATH:'/app:company_home/st:sites/cm:Pub/cm:documentLibrary//*')^8    
OR     
(((TAG:term or cm:name:term OR cm:title:term )^4 OR (cm:description:term )^2) AND -PATH:'/app:company_home/st:sites/cm:Pub/cm:documentLibrary//*') 
```

结果总体正确，但 Pub 的结果不是列表中的第一个。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:28:07.607

第一部分查询部分的 ^8 还不够。设置一个像 100 这样的巨大值可以让它完美地工作！

# facebook - 返回用户令牌而不是访问令牌

> ID：15654346
> 
> 赞同：2
> 
> 时间：2013-03-27T08:19:44.053
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我正在使用 php-sdk 在通过 fb 登录我的网站时创建一个会话。登录后，用户将被重定向到名为 fb_redirect.php 的文件。在该页面上，有以下内容：

```
$facebook = new Facebook(array('appId' => '123456789',
                                    'secret' => '123456789',
                                    'cookie' => true));

$access_token = $facebook->getAccessToken();
//$facebook->setAccessToken($access_token); // you do not need to set the token if there is one, so this should be conditional to if your switching tokens or setting a token from an external sdk. 
```

当。。。的时候

```
$access_token 
```

在这里回显，它显示用户令牌。但是，在另一个页面上，我需要利用我的应用程序请求的 publish_actions 权限，并将自定义操作发布到用户的时间轴。为此，我需要将访问令牌设置为用户令牌。但是，由于某种原因，在其他页面上 $access_token 总是设置为访问令牌而不是用户令牌。如何手动将其设置回用户令牌？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:31:35.557

如果您使用服务器端流程，则必须将其保存在某个位置（cookie、服务器端会话或数据库表），并在用户返回时将其加载回来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:34:27.497

快速而肮脏的方法，这不处理到期。

```
if (!$_SESSION['fb_YourAppID_access_token']) {
$access_token = $facebook->getAccessToken();
if ($access_token) {
$_SESSION['your_token'] = $access_token;
}
}else{
$access_token = $_SESSION['fb_YourAppID_access_token'];
$_SESSION['your_token'] = $access_token;
} 
```

这将在浏览器中查找现有令牌，如果找不到，它将询问 php sdk 当前令牌是什么，如果 sdk 中有令牌，它将您的会话令牌设置为当前访问令牌，如果没有，它将保存它空白的。

# jquery - 使用 JQuery 将变量从 html 传输到另一个 html

> ID：15654354
> 
> 赞同：0
> 
> 时间：2013-03-27T08:20:05.710
> 
> 标签：jquery, html

将 javaScript 变量从 html 页面传输到另一个页面是否有变化？我有多个html“子页面”和一个“主页”，我必须通过将它们的变量发送到主页来使这些子页面与主页通信。但是子页面使用相同的变量名称，并且我需要以某种方式计算主页中的总量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:39:27.220

不可以。JavaScript 变量的作用域始终是当前页面。如果要在页面之间保存状态，则必须使用某种服务器状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:56:42.643

或者您可以使用页面标题中包含的单个 javaScript 文件，然后通过 AJAX ( [jQuery.get](http://api.jquery.com/jQuery.get/) ) 加载所有子页面。这样，您的所有 javaScript 变量都将保持不变，始终将值保存在内存中。

[只需在模块](http://www.adequatelygood.com/JavaScript-Module-Pattern-In-Depth.html)中构建您的 JavaScript以防止全局命名空间污染。并使您的控制变量成为**对象**而不是**原始类型**（字符串、数字...），因为您可以在事件、函数中轻松更新引用...原始类型按值进行，这意味着 javaScript 在当前范围内创建副本。

# c# - 将登录源更改为面板登录

> ID：15654357
> 
> 赞同：1
> 
> 时间：2013-03-27T08:20:21.297
> 
> 标签：c#, asp.net, login, modalpopupextender, loginstatus

我在一个面板中创建了一个登录系统，该面板具有当我单击登录链接按钮时显示的模态弹出扩展器。我还设置了登录状态以查看此人是否已登录或注销。

当一个人在弹出模式的面板中使用登录页面登录时，当他登录时，登录状态显示已登录的人..喜欢

**某人 [退出]**

当我单击注销时，会出现一个登录链接按钮，该按钮转到我已删除的页面，即帐户文件夹中自动创建的登录页面（~/accounts/login.aspx）。

我希望它转到面板而不是该页面

怎么能改变这个..

```
<authentication mode="Forms">
  <forms loginUrl="~/Master.Master/panel" timeout="2880"/>
</authentication> 
```

它显示了两个登录链接按钮，一个是我创建的，另一个是单击登录状态中的注销链接后出现的

我想在登录状态中隐藏第二个登录按钮简而言之我只想要一个通过模式弹出面板的登录系统

请给我一个解决方案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:29:25.410

我不认为你可以那样做。

您可以做的是推出自己的解决方案。由于您已经有一个母版页，请让它在加载时检查用户是否已登录（可能在 Page_Load 事件或更早的事件中）。如果用户已登录，则显示他的凭据和注销按钮，否则显示弹出窗口。

# php - 在 php for 循环中返回数据

> ID：15654366
> 
> 赞同：0
> 
> 时间：2013-03-27T08:20:59.760
> 
> 标签：php, for-loop

让我们在变量中获取循环的输出，我试图在 for 循环中返回数据。这是代码：

```
<?php
for($i=0,$j=0; $i<=10, $j<=10; $i++,$j++){
    $data = "$i and $j<br>";
    return $data;
}
echo $data;
?> 
```

这是代码[http://codepad.org/qqnGdjS7](http://codepad.org/qqnGdjS7)
所以，如何在php for循环中返回数据，所以有办法在循环外使用循环数据！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:21:55.663

尝试：

```
$data = '';
for($i=0,$j=0; $i<=10, $j<=10; $i++,$j++){
    $data .= "$i and $j<br/>";
}
echo $data; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:27:14.863

这真的是你想要的循环吗？1 1, 2 2, 3 3 ? 有 1 1, 1 2, 1 3, ... 做：

```
$data = '';
for($i=0; $i<=10; $i++){
    for($j=0; $j<=10; $j++){
        $data .= "$i and $j<br/>";
    }
}
echo $data; 
```

# c# - 如何使用 DI 通过 IValidatableObject 接口向实体提供验证器？

> ID：15654372
> 
> 赞同：3
> 
> 时间：2013-03-27T08:21:23.257
> 
> 标签：c#, .net, validation, dependency-injection

我的业务层有实现 IValidatableObject 的对象。我希望这些实体在外部程序集中的业务规则，然后调用类型的验证器：

```
public IEnumerable<ValidationResult> Validate(ValidationContext vc){} 
```

我打算使用 DI 将验证器注入到实现 IValidatableObject 接口的类型的构造函数中。

```
 public Customer(ICustomerValidator validator)
        {
            this.Validator = validator;
        } 
```

我想我会在类型工厂中调用 Unity 并从那里注入。

但是很多时候实体只是读取而不是修改，即客户实体。它并不总是需要一个验证器，因为它可能只是为了支持一个用例而实际上并没有被它修改。

所以我想我可以：

1.  制作 CustomerEdit 类，然后仅在这些类上使用构造函数注入器，而不是在 CustomerRead 类上使用，但这会导致类爆炸，而我并不真正想要这个应用程序。
2.  有一个客户类并在需要时注入验证器。

对于如上 2 中 IValidatableObject 接口的实现的 Validate 方法似乎是合适的地方。问题是在许多情况下，这个方法是由我自己的代码以外的代码调用的。例如，来自实体框架和某些类型，来自 MVC，因为它们将用作模型类。

所以现在我不得不重写框架代码中的方法，这样我才能进行 DI。这“似乎”不正确，但老实说，我不知道为什么。

我接下来要看的是 ValidationContext 的 GetService() 方法。

```
public IEnumerable<ValidationResult> Validate(ValidationContext vc)
{

var customerValidator = (ICustomerValidator)vc.GetService(typeof(ICustomerValidator));
return customerValidator.Validate();

} 
```

但是如果我开始这样做，我不是刚刚踏入了ServiceLocator反模式的整个领域，打破了Demeter法则，让测试变得痛苦吗？

那么有没有更清洁的方法来解决这个问题，还是只是从我概述的内容中选择我的权衡？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:34:34.273

最重要的原则：[KISS](http://en.wikipedia.org/wiki/KISS_principle)。

因此，除非您要创建 10000 个业务对象，否则不要打扰，并一直注入您的验证服务。

如果这样做会降低性能，请在需要时将类拆分为读取/编辑模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T02:45:29.767

Stevens 对这个问题的评论让我看到了几篇与我的问题相关的博客文章。

这些博客文章的要点是，当注入的依赖项仅“在某些时候使用”时，构造函数注入被过度使用，但是通过将依赖项包含在构造函数中，我们使其“始终需要”。

在本文的情况下，所描述的依赖项是 OrderShipper，但根据我的问题，它可以很容易地成为验证器。

所以它从

[构造函数过度注入反模式 - Jeffrey Palermo](http://jeffreypalermo.com/blog/constructor-over-injection-anti-pattern/)

在这里反驳

[反驳：Mark Seemann 的构造函数过度注入反模式](http://blog.ploeh.dk/2010/01/20/RebuttalConstructorover-injectionanti-pattern/)

然后在这里进一步细化反驳：

[Mark Seemann 为惰性组件启用 DI](http://blog.ploeh.dk/2010/01/20/EnablingDIforLazyComponents/)

所以除了接受答案之外，如果我真的想重新设计我的设计：将验证器注入域类，那么我可以注入一个 AbstractFactory。

> 与往常一样，当依赖项的生命周期可能比消费者短时，解决方案是注入（通过构造函数！）一个抽象工厂 - Mark Seemann

# c++ - 在 C/C++ 或任何其他此类语言中将 & 符号应用于变量或数据类型时返回什么类型的地址？

> ID：15654374
> 
> 赞同：11
> 
> 时间：2013-03-27T08:21:25.170
> 
> 标签：c++, c, memory-management, operating-system

自从我在我的操作系统课上听说虚拟和物理内存概念的那一天起，这是一个非常基本的问题，令人难以置信。现在我知道在加载时和编译时，虚拟地址和逻辑地址绑定方案是相同的，但在执行时它们不同。

首先，为什么在编译和加载时生成虚拟地址是有益的，以及当我们应用 & 运算符获取变量地址、朴素数据类型、用户定义类型和函数定义地址时返回的内容是什么？

当它这样做时，操作系统如何准确地从虚拟地址映射到物理地址？这些问题是出于好奇，考虑到现代操作系统，我希望得到一些好的和深刻的见解，早期操作系统的情况如何。我只是 C/C++ 特定的，因为我对其他语言不太了解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T08:24:15.047

在应用程序级别（例如 Linux 应用程序进程），仅存在虚拟地址。局部变量在堆栈上（或在寄存器中）。堆栈按[调用框架](http://en.wikipedia.org/wiki/Call_stack)组织。编译器在当前调用帧内生成局部变量的偏移量，通常是相对于堆栈指针或帧指针寄存器的偏移量（因此，局部变量的地址，例如在递归函数中，仅在运行时才知道）。

尝试在调试器中逐步执行递归函数`gdb`并显示一些局部变量的地址以了解更多信息。也试试`bt`.`gdb`

类型

```
cat /proc/self/maps 
```

了解执行该命令的进程的地址空间（和[虚拟内存映射）。](http://en.wikipedia.org/wiki/Virtual_memory)`cat`

在内核中，从虚拟地址到物理 RAM 的映射是通过实现[分页](http://en.wikipedia.org/wiki/Paging)和驱动[MMU](http://en.wikipedia.org/wiki/Memory_management_unit)的代码完成的。一些系统调用（尤其是[mmap(2)](http://man7.org/linux/man-pages/man2/mmap.2.html)和其他）可以更改进程的地址空间。

一些早期的计算机（例如 1950 年代或 1960 年代早期的计算机，如[CAB 500](http://en.wikipedia.org/wiki/CAB500)或[IBM 1130](http://en.wikipedia.org/wiki/IBM_1130)或[IBM 1620](http://en.wikipedia.org/wiki/IBM_1620)）没有任何 MMU，甚至最初的[Intel 8086](http://en.wikipedia.org/wiki/8086)也没有任何内存保护。那时（1960-s），*C*还不存在。在没有 MMU 的处理器上，您没有虚拟地址（只有物理地址，包括洗衣机制造商的嵌入式 C 代码）。有些机器可以通过物理开关保护对某些内存库的写入。今天，一些低端廉价处理器（洗衣机中的处理器）没有任何 MMU。大多数便宜的[微控制器](http://en.wikipedia.org/wiki/Microcontroller)没有任何 MMU。通常（但并非总是），程序位于某些 ROM 中，因此不能被错误代码覆盖。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T08:24:41.170

物理地址出现在硬件中，而不是软件中。操作系统内核中存在一个可能/偶然的异常。物理意味着它是系统总线和 RAM 芯片看到的地址。

物理地址不仅对软件无用，而且可能是一个安全问题。能够在没有地址转换的情况下访问任何物理内存，并且知道其他进程的地址，将允许不受限制地访问机器。

也就是说，较小的或嵌入式机器可能没有虚拟内存，并且一些较旧的操作系统确实允许共享库指定它们的最终物理内存位置。此类策略会损害安全性并且已过时。

# jquery - 动态获取值，即 scrollTop() 并存储在数组中

> ID：15654377
> 
> 赞同：0
> 
> 时间：2013-03-27T08:21:37.773
> 
> 标签：jquery, arrays, scrolltop

我正在尝试获取动态值，即 scrollTop() 和 text() - 将它们存储在一个数组中，然后稍后在滚动事件中使用它们。到目前为止，我有这个，这似乎只是在推动第一个值。我确信还有其他一些超级有效的方法可以使用更少的代码来做到这一点，但我对此很陌生，我只是想了解它为什么不起作用。任何帮助将不胜感激！萨米。

```
var $titleName = [];
var $titlePosition = [];

$('#section-title').each(function () {
    $titleName.push($(this).text());
});

$('#section-title').each(function () {
    $titlePosition.push($(this).offset());
});

$(window).scroll(function () {
    windowScroll = $(this).scrollTop();

    if (windowScroll >= $titlePosition[0].top) {
        $tooltip.text($titleName[0]);
    }

    if (windowScroll >= $titlePosition[1].top - 100) {
        $tooltip.text($titleName[1]);
    }

    if (windowScroll >= $titlePosition[2].top - 100) {
        $tooltip.text($titleName[2]);
    }

    if (windowScroll >= $titlePosition[3].top - 100) {
        $tooltip.text($titleName[3]);
    }
}); 
```

[http://jsfiddle.net/userdude/sTNJM/](http://jsfiddle.net/userdude/sTNJM/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:28:22.430

更改`.section-title`为类，因为 ID 是唯一的，`$.map`用于数组，并且每个都用于迭代并执行 if 条件：

```
var elem           = $('.section-title'),
    $titleName     = $.map(elem, function(el,i) { return $(el).text(); }),
    $titlePosition = $.map(elem, function(el,i) { return $(el).offset().top; });

$(window).on('scroll',function() {
    var windowScroll = $(this).scrollTop();

    $.each($titlePosition, function(i, pos) {
        var pad = i>0 ? 100 : 0;
        if ( windowScroll >= (pos - pad) ) $tooltip.text($titleName[i]);   
    });
}); 
```

# python - Python：将函数作为参数传递，并设置选项

> ID：15654390
> 
> 赞同：3
> 
> 时间：2013-03-27T08:22:20.477
> 
> 标签：python, function, parameters

在 Python 中，我需要在**相同的输入参数** `sampleA`上调用许多非常相似的函数，并且`sampleB`. 唯一的问题是，其中一些功能需要设置一个**选项**，而有些则不需要。例如：

```
import scipy.stats
scipy.stats.mannwhitneyu(sampleA, sampleB)
[...some actions...]
scipy.stats.mstats.ks_twosamp(sampleA, sampleB, alternative='greater')
[...same actions as above...]
scipy.stats.mstats.mannwhitneyu(sampleA, sampleB, use_continuity=True)
[...same actions as above...] 
```

因此，我想将此类函数的名称作为更通用函数的输入参数`computeStats`以及`sampleA`and传递`sampleB`，但我不知道如何处理有时必须使用的选项。

```
def computeStats(functionName, sampleA, sampleB, options???):
   functionName(sampleA, sampleB)  #and options set when necessary
   ...some actions...
   return testStatistic 
```

如何指定有时必须设置、有时不需要设置的选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T08:24:16.987

使用[`**kwargs`](https://stackoverflow.com/questions/1415812/why-use-kwargs-in-python-what-are-some-real-world-advantages-over-using-named)：

```
def computeStats(func, sampleA, sampleB, **kwargs):
   func(sampleA, sampleB, **kwargs)
   ...some actions...
   return testStatistic 
```

然后你就可以`computeStats()`像这样使用：

```
computeStats(scipy.stats.mstats.ks_twosamp, sampleA, sampleB, alternative='greater') 
```

也就是说，我并不完全相信你需要这个。简单点怎么样

```
def postprocessStats(testStatistic):
   ...some actions...
   return testStatistic

postprocessStats(scipy.stats.mstats.ks_twosamp(sampleA, sampleB, alternative='greater')) 
```

?

我认为这更容易阅读，同时也更通用。

# android - AlarmManager 使用 onBootReceiver 启动活动

> ID：15654395
> 
> 赞同：1
> 
> 时间：2013-03-27T08:22:32.577
> 
> 标签：android, broadcastreceiver, alarmmanager, android-pendingintent

我开发了一个应用程序来在每天晚上 11 点开始一项活动。我还在上面添加了一个引导接收器。这个应用程序的输出只是一个空白屏幕。请有人帮助我。

这是我的第一堂 OnBootService

```
public class boot extends BroadcastReceiver  {
 @Override
     public void onReceive(final Context context, final Intent bootintent) {
      Intent mServiceIntent = new Intent();
      mServiceIntent.setAction("com.thenga.nilavilak.timer_test001.alarm");
      context.startService(mServiceIntent);
     }
    } 
```

这是我的警报课

```
public class alarm extends boot {
    public void onReceiveboot(final Context context) {
    Calendar vtime = Calendar.getInstance();
    vtime.set(Calendar.HOUR_OF_DAY,23);
    vtime.set(Calendar.MINUTE,0);
    vtime.set(Calendar.SECOND,0);
    ;

    PendingIntent pi = PendingIntent.getService(context, 0,
    new Intent(context, sasi.class),PendingIntent.FLAG_UPDATE_CURRENT);
    AlarmManager am = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
    am.setRepeating(AlarmManager.RTC_WAKEUP, vtime.getTimeInMillis(),
                                AlarmManager.INTERVAL_DAY, pi);

 }
 public IBinder onBind(Intent arg0) {
        return null;
    }
} 
```

这是我想在晚上 11 点上课的第三节课

```
public class sasi extends Activity{
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Toast.makeText(getApplicationContext(),"Output received",Toast.LENGTH_SHORT).show();
}
} 
```

# git - 密码保护主存储库

> ID：15654399
> 
> 赞同：4
> 
> 时间：2013-03-27T08:22:47.630
> 
> 标签：git

我们在裸存储库中使用带有三个主要分支 Development、Test 和 Master 的 Git。

我们有许多开发环境都有 git 存储库。每个人都创建了开发分支并在该分支上工作并将他们的代码推送到裸存储库中的开发分支。

同时我们希望限制开发人员将他们的代码从他们的开发分支推送到测试和主分支。

有没有办法通过使用密码来保护裸存储库分支。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T09:14:32.473

如果您使用 linux 来托管存储库，我强烈建议您使用[gitolite 。](http://gitolite.com/gitolite/master-toc.html)

Gitolite 允许您为每个用户或用户组指定他们可以推送到哪些分支等等。

> Gitolite 在要托管多个 git 存储库的任何服务器中都很有用，每个存储库都有许多开发人员，其中“任何人都可以对任何 repo 做任何事情”不是一个好主意。这里举两个例子来说明。

它使用 ssh 密钥来识别用户，并据此决定允许或不允许什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T09:23:46.973

或者您更改为基于分布式拉取的方法：

他们没有为每个团队设立一个分支，而是*拥有自己的存储库*；可以对那里的所有内容进行写访问。

除了只读的主分支之外，还有一个主存储库，只有选定的一组维护者才具有写入权限。每当您希望将开发存储库中的某些内容合并到主存储库中时，他们都必须通知维护人员并让他们这样做。

我还建议使用 gitolite 或 Gitosis 轻松管理存储库（我自己只使用过 Gitosis，设置和维护起来很容易）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T10:04:43.920

您不能使用“仅 git”对特定分支进行密码保护。这是所有权限，或者没有。

正如 Ikke 所说，您可以使用 gitolite，它非常适合处理权限。

另一种更“手工”的方法是在远程裸存储库中使用预接收挂钩（挂钩/后接收）来询问密码。

您可以使用简单的 shell 脚本或使用任何您想要的语言来做到这一点。

# grails - grails run-app 随机抛出：java.lang.NoClassDefFoundError: Lorg/codehaus/groovy/grails/plugins/web/async/api/ControllersAsyncApi

> ID：15654401
> 
> 赞同：8
> 
> 时间：2013-03-27T08:22:53.537
> 
> 标签：grails, grails-2.2

启动我的 grails 2.2.0 应用程序时，我随机收到如下错误消息，但它也随机成功启动而没有错误。代码没有变化，我只是尝试运行`grails dev run-app`多次。

```
$ grails dev run-app 
```

我之前也尝试`grails clean`过，但这没有什么区别；错误仍然随机发生。

启动错误：

```
| Packaging Grails application.....
webxml.WebxmlGrailsPlugin Loading default config file: class DefaultWebXmlConfig
webxml.WebxmlGrailsPlugin Did not find application config file: WebXmlConfig
webxml.WebxmlGrailsPlugin Loading default config file: class DefaultWebXmlConfig
| Running Grails application
context.GrailsContextLoader [GrailsContextLoader] Loading context. Creating parent application context
context.ContextLoader Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'pluginManager' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.RuntimeException: Unable to locate constructor with Class parameter for class org.codehaus.groovy.grails.commons.DefaultGrailsControllerClass
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.RuntimeException: Unable to locate constructor with Class parameter for class org.codehaus.groovy.grails.commons.DefaultGrailsControllerClass
    ... 5 more
Caused by: java.lang.reflect.InvocationTargetException
    ... 5 more
Caused by: java.lang.NoClassDefFoundError: Lorg/codehaus/groovy/grails/plugins/web/async/api/ControllersAsyncApi;
    at java.lang.Class.privateGetDeclaredFields(Class.java:2291)
    at java.lang.Class.getDeclaredFields(Class.java:1743)
    ... 5 more
Caused by: java.lang.ClassNotFoundException: org.codehaus.groovy.grails.plugins.web.async.api.ControllersAsyncApi
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 7 more
context.GrailsContextLoader Error initializing the application: Error creating bean with name 'pluginManager' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.RuntimeException: Unable to locate constructor with Class parameter for class org.codehaus.groovy.grails.commons.DefaultGrailsControllerClass
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'pluginManager' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.RuntimeException: Unable to locate constructor with Class parameter for class org.codehaus.groovy.grails.commons.DefaultGrailsControllerClass
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.RuntimeException: Unable to locate constructor with Class parameter for class org.codehaus.groovy.grails.commons.DefaultGrailsControllerClass
    ... 5 more
Caused by: java.lang.reflect.InvocationTargetException
    ... 5 more
Caused by: java.lang.NoClassDefFoundError: Lorg/codehaus/groovy/grails/plugins/web/async/api/ControllersAsyncApi;
    at java.lang.Class.privateGetDeclaredFields(Class.java:2291)
    at java.lang.Class.getDeclaredFields(Class.java:1743)
    ... 5 more
Caused by: java.lang.ClassNotFoundException: org.codehaus.groovy.grails.plugins.web.async.api.ControllersAsyncApi
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 7 more 
```

环境：

*   Mac OS X 狮子
*   JDK 1.6.0_31

类似的帖子，但仍然不同，因为我没有运行 Tomcat：

*   [在 Tomcat6 上运行的 Grails 应用程序 - 上下文初始化失败](https://stackoverflow.com/questions/8551707/grails-application-running-on-tomcat6-context-initialization-failed)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-15T19:56:39.043

将 servlet 版本从 3.0 更改为 2.5（反之亦然）后，出现了此异常。

我通过键入以下内容解决了这个问题：

```
grails clean
grails clean-all 
```

已再次获取依赖项并且应用程序开始运行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T10:44:49.030

Try to mark your servlet version as v3.0\. I had the same sporadic issue and solved it by moving to v.3.0

File: BuildConfig.groovy

grails.servlet.version = "3.0" // Change depending on target container compliance (2.5 or 3.0)

After that grails-plugin-async-2.2.0.jar appeared on classpath:

%HOME%.grails\ivy-cache\org.grails\grails-plugin-async\jars\

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-20T14:57:11.663

如果清理不起作用，请尝试手动删除目标。

# vimeo - 使用 API 暂停所有 Vimeo 视频？

> ID：15654402
> 
> 赞同：2
> 
> 时间：2013-03-27T08:22:55.320
> 
> 标签：vimeo, froogaloop

我碰壁了，无法弄清楚如何使这项工作。使用 Vimeo 的高级 API，我可以从带有缩略图的帐户中提取所有视频。单击缩略图时，视频会显示在上方，单击不同的缩略图会隐藏当前显示的视频。问题是即使隐藏视频也会继续播放。我花了几个小时查看 API，但我无法让它在隐藏时暂停。

```
var iframe = $('.video')[0];

  $('.thumbnail a').click(function(e) {

  $f(iframe).api('pause');

  }); 
```

上面的代码只暂停第一个视频。如果我将数字 [0] 更改为 [1]，那么当您单击另一个缩略图时，第二个视频会暂停。有人有想法吗？我在上面的代码中使用了 froogaloop。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-04-12T21:35:22.753

您可以使用此代码暂停页面上的所有 YouTube 和 Vimeo 视频：

```
$('iframe').each(function() {
  this.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*');
  this.contentWindow.postMessage('{"method":"pause","value":""}', '*');
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-28T10:26:48.507

我将它与 jQuery 一起使用：

```
<script type="text/javascript" src="http://a.vimeocdn.com/js/froogaloop2.min.js"></script>
<script type="text/javascript">// <![CDATA[
function pauseAll() {
    $('iframe[src*="vimeo.com"]').each(function () {
        $f(this).api('pause');
    });
}
// ]]></script> 
```

在点击时使用它。

```
<a href="#" onclick="pauseAll(); return false;">pause all</a> 
```

# emacs - emacs忽略关键字后的突出显示

> ID：15654403
> 
> 赞同：1
> 
> 时间：2013-03-27T08:22:56.973
> 
> 标签：emacs, colors, highlight

我正在为 emacs 开发 pamcrash-mode.el 以简化我的生活。通过使用突出显示单个短语可以正常工作

```
(defvar pamcrash-keywords_red
  '("NAME" "SENSOR" "DATACHECK" "UNIT" "TITLE" "TIME" "INCLU"))

(defvar pamcrash-docu
  '("Autor" "Datum" "Basis" "VARIANTE" "BASISVAR." "DATUM" 
    "BEARBEITER" "BESCHREIBUNG" "HISTORY" "VERSION" "CAEBENCH" ))

(defvar pamcrash-font-lock-defaults
  `((
    ( ,(regexp-opt pamcrash-keywords_red 'words) . font-lock-warning-face)
    ( ,(regexp-opt pamcrash-docu 'words) . font-lock-comment-face)
    )))

(define-derived-mode pamcrash-mode fundamental-mode "PAM-Crash mode"
  (setq font-lock-defaults pamcrash-font-lock-defaults) )

(provide 'pamcrash-mode) 
```

但是 Pam-Crash 文件中的某些行如下所示：

```
 NAME This is a string including the keyword SENSOR
    NAME This is a string including the keyword Autor 
```

SENSOR/Autor 通常是关键字，必须突出显示，但这里有字符串的一部分，不应该。如何在 NAME 之后停用关键字的颜色对比？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:40:09.670

*尝试在您的规则之前*添加以下规则：

```
("\\<NAME\\> *\\(.*\\)" 1 font-lock-string-face) 
```

*这将使用字符串*`NAME`的 face 为关键字之后的所有内容着色。

 *此外，将您的规则修改为：

```
( ,(regexp-opt pamcrash-keywords_red 'words) 0 font-lock-warning-face keep)
( ,(regexp-opt pamcrash-docu 'words) 0 font-lock-comment-face keep) 
```

Where`keep`表示如果已经有一种颜色（阅读：字符串颜色），那么这不应该改变它。

注意：这不应与基于语法表中的信息执行的语法着色字体锁定相混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:01:59.777

我认为您应该限制相关的正则表达式仅在关键字处于正确位置或上下文时才匹配，而不是在关键字之后专门停用`SENSOR`/`Autor`突出显示。`NAME`

例如，如果`NAME`and`SENSOR`关键字应该出现在行首，则在正则表达式中强制执行此约束。例如，您可以像这样构建匹配的正则表达式：

```
(defvar pamcrash-font-lock-defaults
  `((
    (,(concat "^[[:space:]]*" (regexp-opt pamcrash-keywords_red 'words)) . font-lock-warning-face)
    (,(concat "^[[:space:]]*" (regexp-opt pamcrash-docu 'words)) . font-lock-comment-face)
    ))) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-09-13T06:49:12.327

如果您切换到 ViM，则可以使用完整的 pamcrash 语法*

# big-o - 面试问题

> ID：15654407
> 
> 赞同：3
> 
> 时间：2013-03-27T08:23:09.227
> 
> 标签：big-o, complexity-theory, asymptotic-complexity

这是一道面试题：

```
Given: f(n) = O(n)
       g(n) = O(n²)
find f(n) + g(n) and f(n)⋅g(n)? 
```

这个问题的答案是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T08:35:43.147

当准备好这个答案时，f(n) 显示为 o(n)，g(n) 显示为 Θ(n²)。

从 f(n) = o(n) 和 g(n) = Θ(n²) 你得到 f(n) + g(n) 的 o(n²) 下限，但你没有得到上限在 f(n) + g(n) 上，因为在 f(n) 上没有给出上限。[注意，在上面，Θ 是一个大 θ 或大 theta]

对于 f(n)·g(n)，您会得到 o(n³) 的下限，因为 Θ(n²) 意味着 g(n) 的 o(n²) 和 O(n²) 的下限和上限。同样，f(n)·g(n) 没有上限，因为 f(n) 可以任意大；对于 f(n)，我们只有一个 o(n) 的下限。

将问题修改为仅给出 f 和 g 的上限，如 f(n) = O(n) 和 g(n) = O(n²)，我们有 f(n)+g(n) 为 O( n²) 和 f(n)·g(n) 是 O(n³)。

严格地展示这一点有点乏味，但很简单。例如，对于 f(n)·g(n) 的情况，假设根据 O(n) 和 O(n²) 的定义，给定 C, X, K, Y 使得 n>X ⇒ C·n > f(n) 并且 n>Y ⇒ K·n² > g(n)。令 J=C·K 且 Z=max(X,Y)。那么 n>Z ⇒ J·n³ > f(n)·g(n) 这证明了 f(n)·g(n) 是 O(n³)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:25:06.553

```
O(f(n) + g(n)) = O(max{f(n), g(n)}) 
```

所以首先

```
f(n) + g(n) = O(max{n, n^2}) = O(n^2) 
```

为了

```
f(n) ⋅ g(n) 
```

我们将有

```
O(f(n) ⋅ g(n)) = O(n ⋅ n^2) = O(n^3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-09T18:50:16.220

这样想吧。

f(n) = cn + d
g(n) = an^2 + bn + p

然后，
f(n) + g(n) = an^2 + (n 的低幂)
并且，
f(n).g(n) = xn^3 + (n 的低幂)

由此得出 O(f(n) + g(n)) = O(n^2)

和 O(f(n).g(n)) = O(n^3)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-13T23:16:09.023

这个问题可以这样理解：-

> f(n)=O(n) 表示计算 f(n) 需要 O(n) 时间。

相似地，

> 对于需要 O(n^2) 时间的 g(n)

所以，

> P(n)=f(n)+g(n) 肯定会占用 O(n)+O(n^2)+O(1)（另外，一旦你知道 f 和 g 的值）

. 因此，这个新功能

**P(n) 需要 O(n^2) 时间**。

情况也是如此

> Q(n) =f(n)*g(n) 这需要 O(n^2) 时间

.

# javascript - 检测浏览器大小并为每个分辨率应用 css

> ID：15654409
> 
> 赞同：0
> 
> 时间：2013-03-27T08:23:15.307
> 
> 标签：javascript, jquery, html, css

我有这个功能，当浏览器调整大小或菜单以不同分辨率呈现时，我可以将一些 CSS 应用于菜单。我的问题是，为什么浏览器没有正确解释我的功能？因为当我从半模式以全模式调整浏览器大小时，浏览器仅解释`'800-1024'`分辨率，但如果我`ctrl+f5`在浏览器中（全部清除）正确解释我的分辨率，那么我的功能有什么问题？

```
function renderMenuCorection(){
                if ($('#containerHeader').exists()) {
                    var resizeObject = {

                        '0-640': '9px,2px,-3px,12px',
                        '640-800': '10px,2px,-5px,12px',
                        '800-1024': '10px,8px,-8px,15px',
                        '1024-1300': '12px,12px,-13px,11px',
                        '1300-2000': ',20px,-21px'
                    }

                    var win = $(window);
                    var win_width = win.width();

                    if (win_width > 0 && win_width <= 640) {
                        var value = getValueByKey(resizeObject, '0-640');
                        modifayMenu(value);
                    }
                    else 
                        if (win_width > 640 && win_width <= 800) {
                            var value = getValueByKey(resizeObject, '640-800');
                            modifayMenu(value);
                        }
                        else 
                            if (win_width > 800 && win_width <= 1024) {
                                var value = getValueByKey(resizeObject, '800-1024');
                                modifayMenu(value);
                                alert("I'm on: 800-1024 ," + win_width);
                            }
                            else 
                                if (win_width > 1024 && win_width <= 1300) {
                                    var value = getValueByKey(resizeObject, '1024-1300');
                                    modifayMenu(value);
                                    alert("I'm on: 1024-1300 ," + win_width);
                                }

                                else 
                                    if (win_width > 1300 ) {
                                       var value = getValueByKey(resizeObject, '1300-2000');
                                        modifayMenu(value);
                                    }
                }
            }
          function modifayMenu(value){
            var vals = value.split(',')
                $('#containerHeader').find('.roundMenuLi').each(function(index, item){
                    $(item).find('a').css('font-size', vals[0]);
                    $(item).css('padding-right', vals[1]);
                    $(item).css('padding-left', vals[1]);
                    $(item).find('#secondUl').css('margin-left', vals[2]);
                    $(item).css('padding-bottom', vals[3]);
              });

            }
          function getValueByKey(obj, myKey){

                $.each(obj, function(key, value){

                    if (key == myKey) {
                        returnValue = value;
                    }
                });
                return returnValue;
            } 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-27T08:30:12.947

使用 CSS3 及其媒体查询。例子：

```
@media (max-width: 500px) {
    /* some CSS for small resolution */
}

@media (min-width: 1000px) {
    /* some CSS for large resolution */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T09:03:09.423

你主要想创建一个响应式设计这个[链接](http://blog.teamtreehouse.com/beginners-guide-to-responsive-web-design)可以帮助你。

构建您必须考虑的响应式设计

*   灵活的网格
*   灵活的图像
*   媒体查询

/* 下面的代码在你的响应式设计中扮演着重要的角色，否则你无法实现你想要的 */

`<meta name="viewport" content="width=device-width" />`/* 把它放在 head 的结束标签之前 */

```
@media (max-width: 320px) {

}

@media (min-width: 720px) {

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T08:38:06.397

正如 Pavel 所说，媒体查询是最好的解决方案，而且它们比您使用代码对 DOM 进行的所有访问都要快得多。可以使用名为[Respond.js](https://github.com/scottjehl/Respond%29)的 JavaScript 插件解决与 IE8 的兼容性问题。没有尝试过，但它似乎可以很好地解决您的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T08:29:04.673

从您的代码中很难分辨，但很可能您只在页面加载时调用该函数一次。为了让它做你想做的事，你必须附加一个事件监听器并在每次调整窗口大小时调用代码。

如上所述，考虑研究响应式网页设计以利用本机浏览器功能，这样您就不必滚动自己的脚本来执行此操作。一个好的起点是同名的 A List Apart 文章。

# iphone - 通过蓝牙从 iOS 应用发送联系人

> ID：15654415
> 
> 赞同：0
> 
> 时间：2013-03-27T08:23:47.663
> 
> 标签：iphone, ios, bluetooth, gamekit, vcf-vcard

我正在尝试允许正在运行我的应用程序的用户通过蓝牙将联系人 vcard (vcf) 发送到另一台 iOS 设备。问题是，不应要求接收设备运行相同的应用程序。

有没有可能做到这一点？

如果没有 - 当接收设备运行相同的应用程序但不需要（接收）用户启动 peerPicker-dialog 时，是否至少可以让 Gamekit 建立会话？

任何帮助和提示表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:05:28.190

第一种选择：似乎是不可能的。

第二种选择：有效。我实现了一个 GKSessionDelegate 来接收传入的连接。此会话与应用程序一起开始。为了建立与接收器的连接，我使用了众所周知的 GKPeerPickerControllerDelegate。

剩下的一个问题是，发送方在可用对等方列表中看到自己（因为它还有一个在后台运行的接收方）。我的解决方案是在发送者启动它的 GKPeerPickerController 时设置它的 GKSession.available=NO。

# sql-injection - 使用 SQLMAP 指定参数

> ID：15654418
> 
> 赞同：9
> 
> 时间：2013-03-27T08:23:55.563
> 
> 标签：sql-injection, sqlmap

我是一名学习 php & mysql 开发的学生。我已经在我的计算机内设置了一个私人实验室 (VM) 来测试和了解 sql 注入的工作原理。当事情变得更难时，我使用 sqlmap 进行利用，然后使用详细模式和通过wireshark 捕获数据包来研究它对我的测试应用程序发出的请求。我遇到了一个小问题，那就是在 URL 中指定要测试的 sqlmap 的参数。

```
http://localhost/vuln/test.php?feature=music&song=1 
```

我想让 sqlmap 扫描参数**歌曲**所以我尝试了这些解决方案

```
-u http://localhost/vuln/test.php?feature=music&song=1 --skip feature
-u http://localhost/vuln/test.php? --data="feature=music&song=1" -p song 
```

通过添加和删除引号和等号尝试了不同的变体，无效。我什至尝试将 --risk 设置为 --level 最大值，但仍然无法获取最后一个参数。

如果专家能帮助我解决这个问题，我将非常感激。谢谢你。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-28T19:56:35.813

p 选项可以通过以下方式使用

`-u "http://localhost/vuln/test.php?feature=music&song=1" -p song`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-07-27T11:28:22.573

我还注意到您可以使用以下方法扫描多个参数：

```
-u "http://localhost/vuln/test.php?feature=music&song=1" -p 'song,feature' 
```

这将扫描`song`参数，然后是`feature`参数。如果`sqlmap`找到易受攻击的参数，它会询问您是否要继续使用其他参数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-17T13:45:35.983

您可以简单地将 * 添加到要扫描的参数值。你试过那个吗？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-26T09:48:09.437

我也遇到了这个问题。我认为 sqlmap 注入了第一个参数。如果您键入：

```
-u http://localhost/vuln/test.php?feature=music&song=1 
```

sqlmap 将注入 'feature' 参数。要使其注入“歌曲”参数，您需要重新排序参数，如下所示：

```
-u http://localhost/vuln/test.php?song=1&feature=music 
```

不要忘记在每个参数之间添加“&”。它对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-07T04:24:55.110

我已经触发了这类问题。您可以简单地跳过“功能”参数。例如 -u http:// localhost/vuln/test.php?feature=music&song=1 --skip=feature 然后它肯定会开始测试'song'参数。

# entity-framework-4 - 实体框架 4 基于代码的迁移在调用 CreateDatabaseIfNotExist 后不起作用

> ID：15654422
> 
> 赞同：1
> 
> 时间：2013-03-27T08:24:10.813
> 
> 标签：entity-framework-4, entity-framework-migrations

我有一个 MVC 3 项目，我将基于代码的迁移与自动迁移一起使用（这可行）。

当我在新服务器上安装这个项目时，数据库是由 CreateDatabaseIfNotExist 初始化程序创建的，因为我使用的是种子方法。执行此操作后，我有一个带有一个条目的 __MigrationHistory 表。此条目的模型哈希与我的开发服务器中的最后一个完全相同。在我的开发服务器上，__MigrationHistory 表中的每个基于代码的迁移都有一个条目。

现在的问题是，当我尝试在新服务器上运行迁移时，我希望他们对我说“无事可做，因为模型哈希是相同的”，但迁移似乎只寻找 MigrationId 在数据库并尝试执行缺少 MigrationId 的每个迁移。当然这会导致异常，导致迁移尝试添加已经存在的数据库结构。

我认为这应该是一个非常常见的情况，那么有没有一种解决方法呢？我目前的解决方法是将开发系统的 __MigrationHistory 中的所有内容复制到新服务器，但这非常棘手，因为将 modelhash 处理为 varbinary。有没有更好的解决方案，或者我是否理解了一些逻辑错误？

# linux - JSch 将目录从本地复制到远程 Linux 机器

> ID：15654423
> 
> 赞同：0
> 
> 时间：2013-03-27T08:24:12.267
> 
> 标签：linux, jsch

在 JSch 中，我发现了一个非常有用的[示例代码](http://www.jcraft.com/jsch/examples/ScpTo.java.html)，它可以将文件从本地机器复制到远程 Linux 机器。有没有办法使用 Jsch 将目录从本地复制到远程 Linux 机器？
或者
我是否需要一个一个循环遍历所有文件并将其复制到远程机器上？

# emacs - Emacs AUCTeX 高亮设置

> ID：15654427
> 
> 赞同：0
> 
> 时间：2013-03-27T08:24:28.470
> 
> 标签：emacs, latex, highlighting, auctex

我在 Windows (7) 下使用 Emacs 24.2 和 AUCTeX，我在语法高亮设置方面遇到了问题。在 Linux 上，我已经习惯了这样的事情：

```
\documentclass[color]{../sty/tudbook}<br/> 
```

很好地突出显示。

但仅在我的 Windows 配置中`\section`，`\textbf`并且喜欢正确突出显示，但诸如`\cite` `\usepackage` `\begin{itemize}`等之类的东西没有。我曾尝试研究 font-latex 但在这里我只找到我看到的已经工作的东西的设置。

我在哪里进行设置和/或启用其他突出显示？

# java - java.lang.NoSuchMethodError powermock

> ID：15654428
> 
> 赞同：4
> 
> 时间：2013-03-27T08:24:28.953
> 
> 标签：java, junit, easymock, powermock, jmock

伙计们的问题：如何模拟定义了其他静态最终类的静态最终类？

问题描述：当我想为最终类 ApplianceRelationshipUtils.java 编写一些单元测试用例时，并且在这个最终类 ApplianceRelationshipUtils.java 中，总是调用另一个静态类 ApplianceUtilities.java。所以我需要使用 powermock 来模拟静态类 ApplianceUtilities.java，如下所示：

```
 // mock the class for one method only
    PowerMock.mockStaticPartialNice(ApplianceUtilities.class,"getApplianceVersion"); 
```

但是在 ApplianceUtilities.java 中定义了许多像这样的静态最终类：

```
private static final IMesUtils m_mesUtils = new MesUtils();
private static final IEndpointUtilities m_endpointUtils = new DefaultEndpointUtilities(m_mesUtils);
private static final ICasUtilities m_casUtils = new  DefaultCasUtilities(m_endpointUtils);
private static final IHAApplianceUtilities m_haUtils = new HAApplianceUtils(m_endpointUtils, m_casUtils); 
```

因此，当我运行测试用例时，会抛出一些异常，如下所示：

```
java.lang.NoSuchMethodError: com.ibm.usmi.services.updates.util.RestartUtilities.<init>(Lcom/ibm/usmi/services/updates/util/IRcsUtilities;Lcom/ibm/usmi/services/updates/util/MesUtils;Lcom/ibm/usmi/services/updates/util/IUpdateUtils;)V
at com.ibm.vmi.updates.appliance.util.HAApplianceUtils.<init>(HAApplianceUtils.java:222)
at com.ibm.vmi.updates.appliance.util.ApplianceUtilities.<clinit>(ApplianceUtilities.java:89)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at net.sf.cglib.proxy.Enhancer.setCallbacksHelper(Enhancer.java:616)
at net.sf.cglib.proxy.Enhancer.setThreadCallbacks(Enhancer.java:609)
at net.sf.cglib.proxy.Enhancer.registerCallbacks(Enhancer.java:578)
at org.easymock.internal.ClassProxyFactory.createProxy(ClassProxyFactory.java:194)
at org.easymock.internal.MocksControl.createMock(MocksControl.java:60)
at org.easymock.internal.MocksControl.createMock(MocksControl.java:98)
at org.powermock.api.easymock.PowerMock.doCreateMock(PowerMock.java:2214)
at org.powermock.api.easymock.PowerMock.doMock(PowerMock.java:2163)
at org.powermock.api.easymock.PowerMock.createMock(PowerMock.java:76)
at org.powermock.api.easymock.PowerMock.createPartialMock(PowerMock.java:762)
at com.ibm.vmi.updates.appliance.relationship.ApplianceRelationshipUtilsTest.test_validateApplianceReqs(ApplianceRelationshipUtilsTest.java:77)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.junit.internal.runners.TestMethod.invoke(TestMethod.java:66)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:312)
at org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:86)
at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:94)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:296)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTestInSuper(PowerMockJUnit47RunnerDelegateImpl.java:112)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTest(PowerMockJUnit47RunnerDelegateImpl.java:73)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:284)
at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:84)
at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:49)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:209)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:148)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:122)
at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)
at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)
at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:120)
at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:102)
at org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:53)
at org.powermock.modules.junit4.PowerMockRunner.run(PowerMockRunner.java:42)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-06-25T12:40:32.970

我可以确认这些错误来自 Mockito 和 PowerMock 之间的版本不匹配。我们应该只在父`pom.xml`文件中定义依赖版本，并在子模块`pom.xml`文件中引用它们。

我在这里提供一个例子。提供的子`pom.xml`文件，

```
<dependency>
  <groupId>org.mockito</groupId>
  <artifactId>mockito-core</artifactId>
  <version>${mockito.version}</version>
</dependency>

<dependency>
  <groupId>org.powermock</groupId>
  <artifactId>powermock-module-junit4</artifactId>
  <version>${powermock.version}</version>
  <scope>test</scope>
</dependency>

<dependency>
  <groupId>org.powermock</groupId>
  <artifactId>powermock-api-mockito2</artifactId>
  <version>${powermock.version}</version>
  <scope>test</scope>
</dependency> 
```

在提供的父`pom.xml`文件中。

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

   ...........................................................

  <properties>
    <powermock.version>1.7.4</powermock.version>
    <powermock-api.version>2.0.2</powermock-api.version>
    <mockito.version>2.8.9</mockito.version>
  </properties>

  .............................

</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-02T13:26:55.237

这似乎是 Mockito 和 PowerMock 之间的兼容性问题，所以我把对我有用的解决方案留在这里，以防其他人遇到同样的错误：

> **JUnit**
> 
> JUnit 4.4 或更高版本 如果您使用的是 JUnit 4.4 或更高版本，请将以下内容添加到您的 pom.xml：
> 
> ```
>  <properties>
>      <powermock.version>1.7.1</powermock.version> 
>    </properties>
>    <dependencies>
>     <dependency>
>      <groupId>org.powermock</groupId>
>      <artifactId>powermock-module-junit4</artifactId>
>      <version>${powermock.version}</version>
>      <scope>test</scope>    
>     </dependency>    
>     <dependency>
>     <groupId>org.powermock</groupId>
>     <artifactId>powermock-api-mockito</artifactId>
>     <version>${powermock.version}</version>
>     <scope>test</scope>    
>    </dependency> 
> ```
> 
> JUnit 4.0-4.3 如果您使用的是 JUnit 4.0-4.3，请将以下内容添加到您的 pom.xml：
> 
> ```
> <properties>
>      <powermock.version>1.7.1</powermock.version> 
> </properties> 
> <dependencies>    
>  <dependency>
>        <groupId>org.powermock</groupId>
>        <artifactId>powermock-module-junit4-legacy</artifactId>
>        <version>${powermock.version}</version>
>        <scope>test</scope>    </dependency>    <dependency>
>        <groupId>org.powermock</groupId>
>        <artifactId>powermock-api-mockito</artifactId>
>       <version>${powermock.version}</version>
>        <scope>test</scope>   
>  </dependency> 
> </dependencies> 
> ```

使用 Mockito 和 Maven 时 PowerMock 的官方文档：[https ://github.com/powermock/powermock/wiki/Mockito-Maven](https://github.com/powermock/powermock/wiki/Mockito-Maven)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T19:13:58.603

您可以尝试@SuppressStaticInitializationFor 看看是否有帮助。 [https://code.google.com/p/powermock/wiki/SuppressUnwantedBehavior](https://code.google.com/p/powermock/wiki/SuppressUnwantedBehavior)

# animation - EaselJS spritesheet 动画使背景消失

> ID：15654437
> 
> 赞同：0
> 
> 时间：2013-03-27T08:25:13.943
> 
> 标签：animation, canvas, mask, sprite-sheet, easeljs

我正在使用 EaselJS 开发一款游戏，我仍在尝试这个很棒的库提供的功能。

我可能需要的是 Alphamaskfilter 类和 Spritesheet 类。

目前，我有一个这样的画布：

```
<canvas id = 'container3' width = 320px; height = 480px; 
style = 'outline: 2px solid; margin-right: 10px;float:left;'></canvas> 
```

在我的脚本中，我画了一个蓝色的矩形：

```
var ctx3 = document.getElementById('container3').getContext('2d');
ctx3.beginPath();
ctx3.rect(0,0,320,480);
ctx3.fillStyle = 'blue';
ctx3.fill(); 
```

所以现在我有一个蓝色的 320*480 画布。现在我有一个精灵表来制作动画，这是我写的精灵和代码：http: [//i.imgur.com/XumDvic.png](http://i.imgur.com/XumDvic.png)

PS：精灵帧是 200*200 仅供参考。

```
stage = new createjs.Stage(document.getElementById('container3'));
var test = new Image();
test.src = 'trans_blackball.png';

test.onload = function(){
            var sprite = new createjs.SpriteSheet({
                images: [test],
                frames: {width: 200, height: 200},
                animations: {
                    born: [0,3,0]
                }
            });

            var animation = new createjs.BitmapAnimation(sprite);
            animation.gotoAndPlay("born");
            animation.x = 10;
            animation.y = 10;
            animation.currentFrame = 0;

            stage.addChild(animation);

            createjs.Ticker.addListener(window);
            createjs.Ticker.useRAF = true;
            createjs.Ticker.setFPS(10);

}

function tick(){
   stage.update();
} 
```

**好的，我的问题是：我希望在蓝色背景（矩形）上放大黑色圆圈的动画，但我得到的是首先画布是蓝色的，但是在某个微秒之后，整个画布变成了白色，并且动画在白色背景上运行，这是什么原因，我该如何解决？**

这里有两点可能会有所帮助：

1.  我正在使用 chrome，我使用 F12 和控制台进行检查，画布的 fillStyle 仍然是蓝色，即使在精灵动画开始后它显示为白色
2.  如果我将画布背景属性设置为蓝色而不是在其上绘制蓝色矩形，一切都很好！

    ```
    <canvas id = 'container3' width = 320px; height = 480px; 
    style = 'background: blue; outline: 2px solid; margin-right:
    10px;float:left;'></canvas> 
    ```

    但显然这不是我想要的......

3.  该问题也可以通过不使用本机画布矩形而是使用 EaselJS 的 Shape 来绘制矩形来解决：

    ```
    var shape = new createjs.Shape();
    shape.graphics.beginFill("#ff0000").drawRect(0, 0, 320, 480);
    stage.addChild(shape); 
    ```

    但我仍然想知道为什么原生矩形绘图代码不起作用......

**请露出我糟糕的英语，感谢您的阅读和任何帮助的尝试......如果情况有任何不清楚的地方，我可以详细说明......谢谢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:07:10.100

我建议改为使用 EaselJS Shape 类来制作你的蓝色盒子。如果它是 EaselJS 显示列表的一部分，它将与其他内容一起绘制。

`javascript var shape = new createjs.Shape(); shape.graphics.beginFill("blue").drawRect(0,0,320,480); stage.addChild(shape);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:03:39.690

`createjs.Stage.update()`在渲染新框架之前，默认情况下会清除画布内容。

这样做的原因一方面是 的技术行为`canvas`，画布基本上只是像素图像，你不能拥有真正的“图层”并说“我只想删除/更新这个对象” - 你可以修改框架的扁平像素或删除所有内容并重新绘制它（这更安全，更容易实现，实际上性能足够快。另一方面，一致地使用像 EaselJS 这样的框架是有意义的，而不是用框架做一些部分，不做一些部分，这最终会导致一团糟。

因此，正确的解决方案是选择***3。***

您可以设置`myStage.autoClear = false;`以防止 Stage[自动清除](http://www.createjs.com/Docs/EaselJS/classes/Stage.html#property_autoClear)每个上的画布，`update()`但我认为这在这种情况下不适合您的需求。

# entity-framework - 实体框架代码迁移 - 卡在初始迁移上

> ID：15654441
> 
> 赞同：23
> 
> 时间：2013-03-27T08:25:43.760
> 
> 标签：entity-framework, ef-code-first, entity-framework-5, code-migration

我已通过 Nuget 将 EF 5 添加到我的项目中，并使用“Enable-Migrations”命令启用了迁移。然后我调用了“Add-Migration”来生成用于生成模式的基本代码。

然后，我向我的一个域对象（称为“TestProperty”的字符串属性）添加了一个属性，并向我的 EntityTypeConfiguration 文件添加了一个映射（我们目前忽略了约定）。

再次调用“Add-Migration”会产生错误：

```
Unable to generate an explicit migration because the following explicit migrations are pending: [201303262144218_Initial]. Apply the pending explicit migrations before attempting to generate a new explicit migration. 
```

但是调用“Update-Database”会产生 sql 异常，因为表已经存在：

```
There is already an object named 'Customer' in the database 
```

在我的 DbContext 构造函数中，我尝试了不同的更新策略，例如：

```
Database.SetInitializer<UnitOfWork>(new DropCreateDatabaseAlways<UnitOfWork>()); 
```

我错过了一些明显的东西吗？我在这里尝试了解决方案，但没有奏效：[ASP.NET 的自动迁移](https://stackoverflow.com/questions/13238203/automatic-migrations-for-asp-net-simplemembershipprovider)

谢谢

编辑：更新通过第一步的关键是创建初始迁移，然后从 Up 和 Down 方法中删除生成的代码（[http://thedatafarm.com/blog/data-access/using-ef-migrations-与现有数据库/](http://thedatafarm.com/blog/data-access/using-ef-migrations-with-an-existing-database/)）。

然后我可以更新模型和 EF 映射，然后运行 ​​Add-Migration。这会使用正确的 Up 和 Down 代码生成迁移。

然后问题是尝试应用更新。Update-Database 产生错误“无法更新数据库以匹配当前模型，因为存在待处理的更改并且自动迁移被禁用...自动迁移。将 DbMigrationsConfiguration.AutomaticMigrationsEnabled 设置为 true 以启用自动迁移。您可以使用 Add-Migration命令将挂起的模型更改写入基于代码的迁移”。好的，所以我再次尝试添加迁移，它会生成另一个迁移，其代码与上一个迁移完全相同。

我运行 Update-Database 并再次得到相同的错误。我尝试“Update-Database -TargetMigration 201304080859556_MyMigration -Force”，但这会产生“指定的目标迁移 '201304080859556_MyMigration' 不存在。确保目标迁移指的是现有的迁移 id” - 它确实存在！

非常令人沮丧！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-05-07T20:28:15.293

我在为具有现有数据库的代码优先模型启用 EF 迁移时遇到了同样的问题，并且以下过程有效：

1.  删除项目中现有的 Migrations 文件夹，并`__MigrationHistory`从现有数据库中删除表。
2.  `enable-migrations`从包管理器控制台运行命令。
3.  运行`add-migration`命令以创建初始迁移。
4.  删除`Up()`初始迁移方法中的所有代码。
5.  运行`update-database`命令以将初始迁移应用到您的数据库。这不会对现有对象进行任何更改（因为该`Up()`方法不包含任何代码），但会将现有数据库标记为已迁移到初始状态。
6.  更改您的代码优先模型。
7.  运行`add-migration`命令以创建新的迁移。`Up()`新迁移方法中的代码将仅包含对您的对象模型的更改。
8.  运行`update-database`命令以将更改应用到您的数据库。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-15T08:51:14.563

> 我运行 Update-Database 并再次得到相同的错误。我尝试“Update-Database -TargetMigration 201304080859556_MyMigration -Force”，但这会产生“指定的目标迁移 '201304080859556_MyMigration' 不存在。确保目标迁移指的是现有的迁移 id” - 它确实存在！

还有一个问题可能会导致您的最后一个错误（也许这是以前错误的根本原因）。我遇到了类似的问题，结果出于某种奇怪的原因，我的一些迁移类位于与我的`MigrationConfiguration`类的命名空间不同的命名空间中。更正命名空间（也在`xxx.Designer.cs`文件中）解决了这个问题（迁移可见并再次工作）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T09:18:54.790

您是否尝试使用**-force**参数来应用更改。

```
Update-Database [-SourceMigration <String>]
  [-TargetMigration <String>] [-Script] [-Force] [-ProjectName <String>]
  [-StartUpProjectName <String>] [-ConfigurationTypeName <String>]
  [-ConnectionStringName <String>] [<CommonParameters>] 
```

**-FORCE** *指定在数据库的自动迁移过程中可以接受数据丢失。*

您可以使用`get-help Update-Database -examples`查看使用示例。

进一步阅读：[EF 代码优先迁移](http://msdn.microsoft.com/en-US/data/jj591621)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-11T01:45:00.383

您不需要手动删除迁移，使用

```
Remove-Migration 
```

然后您可以使用 .重新创建迁移脚本`Add-Migration`。

在您的情况下，更新数据库失败，因为有现有的表，删除它们

```
Drop-Database 
```

然后就可以了`Update-Database`。

这些命令的更详细用法在[这里](https://docs.microsoft.com/en-us/ef/core/miscellaneous/cli/powershell)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-29T11:18:05.097

尝试将旧数据库版本迁移到新模型，数据库与新模型不匹配，或者出现以下错误：

> 成员 'Npgsql.PostgresException,Npgsql, Version=3.2.2.0, Culture=neutral, PublicKeyToken=5d8b90d52f46fda7' 的类型未解析

这是它的工作原理（使用自动迁移）：

1.  删除迁移文件夹
2.  执行启用迁移
3.  在新创建的 Configuration.cs 中将这两个属性设置为 true

    ```
    public Configuration()
    {
        AutomaticMigrationsEnabled = true;
        AutomaticMigrationDataLossAllowed = true;
    } 
    ```

4.  执行更新-数据库-强制

您的数据库将更新为最新方案并准备就绪。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-24T19:45:39.950

这是一种通常有效的一揽子方法：

1.  删除整个 Migrations 文件夹（确保复制您可能从迁移配置文件中的种子方法创建的任何代码）。
2.  删除实际的数据库。如果您使用的是 LocalDb，它通常位于您的 AppData 解决方案文件夹中（右键单击 -> 打开文件夹位置）。确保删除 .mdf 和 .log 数据库文件。
3.  转到包管理器控制台。进入`enable-migrations -projectname yourprojectname`
4.  转到包管理器控制台。输入`add-migration "Initial" -projectname yourprojectname`。
5.  打开迁移配置文件并将您从步骤 1 复制的代码粘贴到种子方法中。
6.  转到包管理器控制台。进入`update-database -projectname yourprojectname`

这应该可以解决问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-12T07:02:33.837

1) 删除项目中现有的 Migrations 文件夹，并从 Migration_History 表中删除现有的迁移（如果有）。

2）从包管理器控制台运行以下命令：

> 添加迁移重置

3）之后从包管理器控制台运行以下命令：

> 移除迁移

4) 之后，从包管理器控制台运行以下命令（InitialMigration 是第一次迁移的名称，您可以根据需要命名）：

> 添加迁移 InitialMigration

# android - 使用数组中的位置设置吐司的文本，该位置是循环的迭代

> ID：15654444
> 
> 赞同：0
> 
> 时间：2013-03-27T08:25:53.350
> 
> 标签：android, arrays, for-loop, toast, final

此代码以编程方式生成一个布局，该布局以数组中定义的方式由视图和 TextViews 组成。但是，我正在尝试使每个 TextView 都可点击，从而显示对该 TextView 更大解释的祝酒词。由于 toast 需要特定于特定的 TextView ，我试图在位置 i 使用另一个解释数组来设置 TextView 。但是，当我尝试执行此操作时，我收到错误“无法引用以不同方法定义的内部类中的非最终变量”。

所以我想知道，我该如何解决这个问题？`i`不能是最终的，因为它在每次循环迭代中都会发生变化？

```
for ( int i = 0; i < formulae.length; i++){
            if (formulae[i].equals("horizontalrule")){

                View rule = new View(FormulaeActivity.this);
                rule.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, 2));
                rule.setBackgroundColor(0xFF000000);

                View spacerbig = new View(FormulaeActivity.this);
                spacerbig.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, 20));
                spacerbig.setBackgroundResource(android.R.color.transparent);

                container.addView(rule);
                container.addView(spacerbig);
            }

        else{
            View spacersmall1 = new View(FormulaeActivity.this);
            spacersmall1.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, 5));
            spacersmall1.setBackgroundResource(android.R.color.transparent);

            tx[i] = new TextView(FormulaeActivity.this);
            tx[i].setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, 50));
            tx[i].setText(Html.fromHtml(formulae[i]));
            tx[i].setTextSize(20);
            tx[i].setPadding(10, 0, 0, 0);

            tx[1].setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    Toast.makeText(getApplicationContext(),   Html.fromHtml(explanations[i]), Toast.LENGTH_SHORT).show();
// ^this is the offending line

                }
            });

            container.addView(tx[i]);   
            container.addView(spacersmall1);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:34:14.540

为什么没有一个最终变量来保存`i`每次迭代的值。

```
for ( int i = 0; i < formulae.length; i++){
    final int pos = i; 
```

并像这样在`onClick()`

```
Toast.makeText(getApplicationContext(),   Html.fromHtml(explanations[pos]).. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:38:20.890

尝试这个，

```
for ( int i = 0; i < formulae.length; i++){
            if (formulae[i].equals("horizontalrule")){

                View rule = new View(FormulaeActivity.this);
                rule.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, 2));
                rule.setBackgroundColor(0xFF000000);

                View spacerbig = new View(FormulaeActivity.this);
                spacerbig.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, 20));
                spacerbig.setBackgroundResource(android.R.color.transparent);

                container.addView(rule);
                container.addView(spacerbig);
            }

        else{
            View spacersmall1 = new View(FormulaeActivity.this);
            spacersmall1.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, 5));
            spacersmall1.setBackgroundResource(android.R.color.transparent);

            tx[i] = new TextView(FormulaeActivity.this);
            tx[i].setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, 50));
            tx[i].setText(Html.fromHtml(formulae[i]));
            tx[i].setTextSize(20);
            tx[i].setPadding(10, 0, 0, 0);
            container.addView(tx[i]);   
            container.addView(spacersmall1);
        }
}

for(int i=0;i<tx.length;i++)
{
if(tx[i]!=null)
{
       tx[i].setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    Toast.makeText(getApplicationContext(),Html.fromHtml(explanations[i]), Toast.LENGTH_SHORT).show();
// ^this is the offending line
                }
            });
        }
} 
```

# validation - MS Access：防止验证子表单

> ID：15654446
> 
> 赞同：0
> 
> 时间：2013-03-27T08:26:03.153
> 
> 标签：validation, ms-access, vba, subform

在激活子表单时，我正在努力避免无意触发验证规则。

在 MS Access 中，我有一个包含患者数据的表单，其中包含一个子表单，其中包含一个属于该患者的医疗设备的记录。患者表有一个 [ID] 字段，医疗设备表有一个 [PatientID] 字段。医疗设备表与患者表具有一对多的关系（一个患者可以拥有许多医疗设备）。

当打开包含子表单的表单时，子表单的`Form_Load()`方法会填充某些字段，例如当前日期。

问题是：只要激活子表单的任何控件（通过选项卡或单击），就会触发医疗设备表的验证规则——一次且仅一次。关闭验证错误消息后，我可以毫无问题地在父窗体和子窗体上的控件之间切换。

当我从`Form_Load()`方法中删除代码时，我可以在不触发验证的情况下激活子表单的控件。

父表单和子表单都链接到表，而不是查询。

如何在不触发验证的情况下使用 VBA 在子表单中填写数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:51:24.963

我建议您使用默认值，而不是实际文本。默认值仅在完成其他某些字段时才变为“真实”。

# c# - 实体框架5：为关联表创建实体类型

> ID：15654447
> 
> 赞同：0
> 
> 时间：2013-03-27T08:26:07.243
> 
> 标签：c#, .net, entity-framework, entity-framework-5

我正在使用实体框架 5 ，问题是 EF5 不会为仅包含外键的表创建 EntityType ，而 EF4 不是这种情况

有谁知道如何解决这个问题？

解决方法，我在只包含外键的表中添加了一个列，我生成了 edmx，然后我从我的 edmx 和数据库中删除了它们

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-28T03:25:58.443

之所以没有创建它们是因为它们是不必要的——您应该直接处理关系每一端的导航属性。

# c++ - 错误 LNK2020：Visual C++ 中未解析的令牌 (06000002)

> ID：15654450
> 
> 赞同：4
> 
> 时间：2013-03-27T08:26:17.453
> 
> 标签：c++, visual-c++, compiler-errors, c++-cli

我在 C++/CLI 中创建一个新的抽象类并遇到了一个奇怪的错误。有许多与此类似的问题，但没有一个答案可以帮助我。

在这个新课程中，我收到以下错误：

```
error LNK2020: unresolved token (06000002) Foo::execute 
```

这是 h 文件：

```
#pragma once
using namespace System::IO::Ports;
using namespace System;

public ref class Foo
{
protected:
    SerialPort^ port;
public:
    Foo(SerialPort^ sp);
    virtual array<Byte>^ execute();
}; 
```

这是 cpp 文件：

```
#include "StdAfx.h"
#include "Foo.h"

Foo::Foo(SerialPort^ sp)
{
    this->port = sp;
} 
```

请注意，当我注释掉该`virtual array<Byte>^ execute();`行时，一切都会完美编译。此外，当我删除修饰符并在 cpp 文件中`virtual`添加实现时，它也可以正常工作。`execute()`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T08:32:52.377

你自己已经给出了答案：

> 此外，当我删除 virtual 修饰符并在 cpp 文件中添加 execute() 的实现时，它也可以正常工作。

您在标头中声明了该方法`execute`，但缺少它的实现。这正是链接器错误告诉您的内容。在这种情况下，声明 as`virtual`无关紧要。

如果你想创建一个抽象类，你可以在许多在线文章中找到更多细节（例如[Wikibooks: Abstract Classes](http://en.wikibooks.org/wiki/C++_Programming/Classes/Abstract_Classes)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T08:29:23.863

您必须实现该方法或从标头中删除声明。（在这种情况下，虚拟关键字无关紧要）

有的话，请教一个问题。

# android - 如何永久覆盖android软键行为并通过显示

> ID：15654452
> 
> 赞同：0
> 
> 时间：2013-03-27T08:26:26.347
> 
> 标签：android

我对 android 比较陌生，想创建一个永久覆盖 android 基本软键行为和视图的应用程序（对于具有软键的设备）。

我想要实现的一些功能是更改底部软键窗口的大小、更改其图像，并可能更改其功能。

例如，用户可以将软键的大小设置为“大”、“中”或“小”。而且我可以更改后退按钮的功能以打开特定应用程序，而不是“返回”。

我基本上是在寻找关于如何做到这一点的高级答案，这是我应该阅读/学习的基本方向，以便能够完成此任务。我意识到这可能需要root访问权限。

请注意，我希望这种行为不仅在我的应用程序中发生变化，而且我希望这种效果存在于所有应用程序中。如果这要求应用程序至少在后端运行，那很好。

在进行了相当多的搜索之后，似乎我必须在 systemUI.apk 中进行更改，或者可能获取其源代码并对其进行修改。这个对吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:56:21.283

我认为即使是 root 也不足以满足您所描述的更改类型。您将需要编辑 Android 源代码并构建您自己的系统映像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:40:38.273

好吧，您不能覆盖系统资源，因为它们是系统映像的一部分。

您正在寻找的东西被称为`Home Application`可以像任何其他*不需要 root 的*Android 应用程序一样开发，您可以在您的 sdk 示例中找到它的示例。 [主页示例应用程序](http://jayxie.com/mirrors/android-sdk/resources/samples/Home/index.html)。

您的应用程序将负责拥有 UI 组件以将用户发送到所有电话功能，其中包括：

*   wegits的地方
*   应用程序列表的地方（菜单）
*   访问电话功能（通话、电话历史记录......）
*   访问设置。

# qt - Qt - 交叉编译

> ID：15654457
> 
> 赞同：3
> 
> 时间：2013-03-27T08:26:55.173
> 
> 标签：qt, 32bit-64bit, cross-compiling, configure

我正在对基于 Qt 和 Qt 的应用程序进行交叉编译 [mips]。两台开发机；一个 64 位和另一个 32 位，用于此目的。通常 Qt 相关的库和二进制文件是在 64 位机器上交叉编译的。基于 Qt 的应用程序，在 32 位机器上交叉编译。

使用此设置，moc/qmake/qrc 等的使用存在一个小问题；这些是在 64 位机器上编译的，不能在 32 位机器上运行。

一种快捷方法是更改​​ mkspec [在 linux-g++-64 中通过 -m32 而不是 -m64 ]。这样问题就解决了。

我想知道的是，如果我们可以将 Qt 本身配置为使用 linux-g++-32 而不是 64，来编译 qmake/moc 等二进制文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T10:44:58.983

尝试`-platform linux-g++-32 -xplatform your-mips-mkspec`

# vba - Excel：如果该行中没有任何单元格着色，则隐藏该行

> ID：15654458
> 
> 赞同：1
> 
> 时间：2013-03-27T08:26:56.840
> 
> 标签：vba, excel

我设置了一个工作簿，其中 Sheet1 可在多列（C 到 T 列）中编辑 A&B 列中某些列出的名称的到期日期；第 1 行和第 2 行是标题，因此数据输入从第 3 行开始。

Sheet2 使用 INDIRECT 公式作为受保护的页面是相同的，具有条件格式，如果到期日期即将到来，则将某些单元格突出显示为红色或黄色。

我对 VBA 缺乏经验，一直在寻找符合以下条件的宏：

仅在 Sheet2 上，如果该行不包含任何红色或黄色的单元格，则隐藏那些非彩色行。

任何帮助将不胜感激。我只找到了基于单列标准隐藏行的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T13:14:46.480

这里有一个小脚本可以帮助您入门。它将遍历每一行的每一列并检查每个单元格的颜色。如果找到任何颜色，则将跳过该行。如果没有找到任何颜色的单元格，则该行将被隐藏。换句话说，**所有全白的行都将被隐藏**。

**代码：**

```
Public Sub HideUncoloredRows()
    Dim startColumn As Integer
    Dim startRow As Integer

    Dim totalRows As Integer
    Dim totalColumns As Integer

    Dim currentColumn As Integer
    Dim currentRow As Integer

    Dim shouldHideRow As Integer

    startColumn = 1     'column A
    startRow = 1        'row 1
    totalRows = Sheet2.Cells(Rows.Count, startColumn).End(xlUp).Row

    For currentRow = totalRows To startRow Step -1
        shouldHideRow = True
        totalColumns = Sheet2.Cells(currentRow, Columns.Count).End(xlToLeft).Column
        'for each column in the current row, check the cell color
        For currentColumn = startColumn To totalColumns
            'if any colored cell is found, don't hide the row and move on to next row
            If Not Sheet2.Cells(currentRow, currentColumn).Interior.ColorIndex = -4142 Then
                shouldHideRow = False
                Exit For
            End If
        Next

        If shouldHideRow Then
            'drop into here if all cells in a row were white
            Sheet2.Cells(currentRow, currentColumn).EntireRow.Hidden = True
        End If
    Next
End Sub 
```

**前**

![在此处输入图像描述](../Images/dcc3a09f4ed6ef1dc2a89c225db8f6e5.png)

**后**

![在此处输入图像描述](../Images/1413eb234f0c2ad553e0456736e48d05.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:10:58.780

```
row = 1    
do
  flag = false
  col = 1
  do
    .cells(row,col).select
    if selection.interior.colorindex <> vbWhite then flag = true
  loop until (col = lastcol) or (flag = true)
  if flag then 
    rows(row).delete
    row = row - 1
  end if
  row = row + 1
loop until row = lastrow 
```

# php - paypal for php中的自定义字段

> ID：15654459
> 
> 赞同：0
> 
> 时间：2013-03-27T08:26:59.560
> 
> 标签：php, paypal, custom-fields

我正在使用 paypal Express 结帐 api。我需要通过 setexpresscheckout.php 中的 api 将我的用户 ID 作为自定义字段传递给 paypal。我上网研究并发现自定义值可以这样发送：

```
<input type=hidden value="Something" name="custom"/> 
```

但问题是我们应该像这样直接将表格发布到贝宝网站

```
<form target="paypal" action="https://www.paypal.com/cgi-bin/webscr" method="post">
.....
</form> 
```

但由于 api 我发布我的表格是这样的：

```
<form id="paypalfrm" name="paypalfrm" action="pay_pal/SetExpressCheckout.php" method="post">
....
</form> 
```

所以上面的自定义方法不起作用。所以有人可以帮我吗？？？我应该如何将我的用户 ID 传递给贝宝网站...？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:50:26.760

为什么需要将您的 userId 传递给 PayPal ？如果您只需要能够在使用 DoExpressCheckoutPayment 处理付款时检索您的用户 ID，您可以使用 PHP 会话将您的用户 ID 存储在您的 SetExpessCheckout.php 脚本中。

# javascript - 从移动网站重定向到桌面网站

> ID：15654460
> 
> 赞同：0
> 
> 时间：2013-03-27T08:27:00.903
> 
> 标签：javascript, jquery, mobile, desktop, device-detection

我使用以下代码进行了设备检测：

```
<script>
if( /Android|webOS|iPhone|iPod|BlackBerry|IEMobile/i.test(navigator.userAgent) ) {

if(window.location.hash == "#desktop"){
    // Stay on desktop website
} else {
    window.location = "<?php bloginfo('url'); ?>/m";
} 
}
</script> 
```

这样做的目的是让用户回到网站的桌面版本，但是，当用户点击桌面网站上的链接然后被重定向到移动网站时，就会出现我的问题。

`#desktop`如果单击查看桌面链接，如何始终将 附加到所有链接？这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:41:56.237

好吧，这只是一个想法，

```
 if(window.location.hash == "#desktop"){
    $(function(){
        $(document).find('a').click(function(e){
           e.preventDefault();
           window.location.replace($(this).attr("href")+"#desktop");
        });
    });
 } 
```

或者

```
 if(window.location.hash == "#desktop"){
     $(function(){
       $(document).find('a').attr("href",$(this).attr()+"#desktop");
     });
   } 
```

我认为最好的解决方案是在服务器端代码上使用 SESSION。

# python - for循环中的python练习帮助空间

> ID：15654467
> 
> 赞同：2
> 
> 时间：2013-03-27T08:27:44.083
> 
> 标签：python

我正在学习python这里是一个示例代码

```
girls = ['alice','bernice','clarice']
boys = ['chris','arnold','bob']
letterGirls = {}
for girl in girls:
    letterGirls.setdefault(girl[0],[]).append(girl)
  print [b+'+'+g for b in boys for g in letterGirls[b[0]]] 
```

我收到以下错误

```
 File "<stdin>", line 3
    print [b+'+'+g for b in boys for g in letterGirls[b[0]]]
                                                           ^
IndentationError: unindent does not match any outer indentation level 
```

1）我想解决上述错误和
2）我想知道如何在 python 中的 for 循环中编写代码块，例如在上面的示例中，我在终端上检查了如果我没有在第一个 for 行下方留下空格，那么语法是错误我不清楚如何在python中的for循环代码块中给出空格是否有一些东西可以在python中留下空格

```
for girl in girls:
    letterGirls.setdefault(girl[0],[]).append(girl)
  print [b+'+'+g for b in boys for g in letterGirls[b[0]]] 
```

**根据下面的建议更新**
我更新了代码打印语句在给出的示例中的 for 循环之外所以我更新了我的 ubuntu 终端上的程序

```
girls = ['alice','bernice','clarice']
boys = ['chris','arnold','bob']
letterGirls = {}
for girl in girls:
    letterGirls.setdefault(girl[0],[]).append(girl)
print [b+'+'+g for b in boys for g in letterGirls[b[0]]] 
```

但我仍然收到上面代码的错误

```
print[b+'+'+g for b in boys for g in letterGirls[b[0]]]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
KeyError: 'c' 
```

因为我正在终端上编写程序，这正是我的终端的样子

```
@ubuntu:~$ python
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> girls = ['alice','bernice','clarice']
>>> boys = ['chris','arnold','bob']
>>> letterGirls = {}
>>> for girl in girls:
...     letterGirls.setdefault(girl[0],[]).append(girl)
... print [b+'+'+g for b in boys for g in letterGirls[b[0]]]
  File "<stdin>", line 3
    print [b+'+'+g for b in boys for g in letterGirls[b[0]]]
        ^
SyntaxError: invalid syntax
>>> print[b+'+'+g for b in boys for g in letterGirls[b[0]]]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
KeyError: 'c' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:29:34.463

同一级别的代码应该使用相同的缩进，所以'for'语句和'print'应该在一个列中（相同的缩进）。建议的方法是使用 4 个空格从级别缩进级别。将您的代码更改为：

```
for girl in girls:
    letterGirls.setdefault(girl[0],[]).append(girl)
print [b+'+'+g for b in boys for g in letterGirls[b[0]]] 
```

我对您的建议是在[PEP8 指南](http://www.python.org/dev/peps/pep-0008/)中阅读更多内容，这将使您的生活更轻松

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:31:04.173

1）你在“打印”语句中有错误的缩进，确保你在 Python 中为同级块缩进 4 个空格。在这种情况下，您不应该在 'print' 之前缩进。

```
girls = ['alice','bernice','clarice']
boys = ['chris','arnold','bob']
letterGirls = {}
for girl in girls:
    letterGirls.setdefault(girl[0],[]).append(girl)
print [b+'+'+g for b in boys for g in letterGirls[b[0]]] 
```

输出：

```
['chris+clarice', 'arnold+alice', 'bob+bernice'] 
```

2）如果要在循环中创建块语句，请确保所有语句具有相同的缩进级别。

```
for girl in girls:
    letterGirls.setdefault(girl[0],[]).append(girl)
    print "This is in the loop"
print "This is not in the loop" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T08:31:04.673

如果你想在循环外打印**语句：**

```
for girl in girls:
    letterGirls.setdefault(girl[0],[]).append(girl)
print [b+'+'+g for b in boys for g in letterGirls[b[0]]] 
```

如果你想在循环内打印**语句：**

```
for girl in girls:
    letterGirls.setdefault(girl[0],[]).append(girl)
    print [b+'+'+g for b in boys for g in letterGirls[b[0]]] 
```

缩进必须对齐。[在这里阅读更多](http://www.python.org/dev/peps/pep-0008/#id9)。每个缩进级别应该使用 4 个空格。

例如，如果您想要代码中的另一个级别：

```
for ():
    print x
    for():
        print x 
```

对于每个缩进级别，空格必须为 4。

PS。即使您使用其他命令（如 while 循环或 if/else 条件），这也是您必须应用的。

# ios - UIWebViewDelegate：页面内导航期间未调用 webViewDidFinishLoad

> ID：15654468
> 
> 赞同：11
> 
> 时间：2013-03-27T08:27:47.347
> 
> 标签：ios, objective-c, uiwebview, navigation, uiwebviewdelegate

我有一个应用程序，用户可以在其中导航一堆本地存储的**HTML**文件。我有一个`UIWebView`, 正确配置了一个`UIWebViewDelegate`. 通常，当用户点击链接时，`shouldStartLoadWithRequest`会调用它，`webViewDidFinishLoad`稍后会调用它。

但是，如果链接指向与当前显示的页面相同的页面上的锚点，`shouldStartLoadWithRequest`则调用 only。`webViewDidFinishLoad`不开火。

从某种意义上说，我认为这可能是预期的行为，因为页面内导航不应该需要重新加载页面。但是，页面内导航完成后，我真的需要一个地方来挂钩调用堆栈。最佳解决方案会在任何类型的导航结束时通知我，无论是从另一个页面、页内还是前进/后退操作。

到目前为止，我最好的解决方法`performSelector: withObject: afterDelay:`是在我的方法结束时调用`shouldStartLoadWithRequest`，但我对此并不满意。

有谁知道我该如何正确解决这个问题？任何见解表示赞赏！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-04T09:39:44.630

您可以尝试使用`NSURLConnectionDataDelegate`，它允许您处理传入的数据。也许您可以通过在 html 文件中添加符号来确定页面是否是手动加载的。

[NSURLConnectionDataDelegate 参考](https://developer.apple.com/library/ios/documentation/Foundation/Reference/NSURLConnectionDataDelegate_protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSURLConnectionDataDelegate)

编辑：[gist.github.com/buranmert/7304047](http://gist.github.com/buranmert/7304047)我写了一段代码，它工作了，这可能不是你想要的工作方式，但也许它有帮助。每次用户单击带有锚点的 URL 时，它都会创建另一个连接，并在连接完成加载 Web 视图时加载数据，这标志着 Web 视图完成加载页面的点。由于您仅使用本地 html 文件，我认为创建连接不会产生问题

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-07T16:28:24.490

您所描述的是预期的行为。就像 AJAX 或资源请求永远不会传递给委托一样，只有根页面更改才会命中`webViewDidFinishLoad:`。但我有一个好消息，这并不涉及在汽车保险上节省一大笔钱。

*在 iFrame DO*中执行的加载会触发完整的委托方法，这为您提供了一个解决方案。您可以使用此机制向本机代码发布通知，就像本文`console.log()`中描述[的那样](https://stackoverflow.com/questions/6508313/javascript-console-log-in-an-ios-uiwebview)。或者，[Native Bridge](https://github.com/ochameau/NativeBridge)可以很好地从 JavaScript 调用您的 Objective C 代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-11T04:08:06.320

只需检查天气你得到了委托函数**DidStartLoading**如果它被调用，毫无疑问**DidFinish**也应该被调用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-09T14:05:18.580

```
if([webView isLoading]==1)
{
    //your webview is loading
}
else
{
   //your webview has loaded
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-05T08:32:16.193

你确定你的**shouldStartLoadWithRequest**总是返回 YES 吗？

我总是加

```
return YES; 
```

在**shouldStartLoadWithRequest**实施结束时。这对我有用。通过返回 YES，它表示 webview 已经加载并会调用 **webViewDidFinishLoad**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-24T12:58:15.737

这是 Mert Buran 代码的 Swift 实现，以防有人在寻找它。（虽然 NSURLConnection 自 iOS 9 起已弃用）

但这并不能解决我的问题。当我单击弹出视频的 jquery 链接时，它不会触发 webViewDidFinishLoad。

```
class WebViewController: UIViewController, UIWebViewDelegate, NSURLConnectionDelegate {

var menuURL: String?

var response: NSURLResponse?
var data = NSData()

// MARK: Properties
@IBOutlet weak var webView: UIWebView!

override func viewDidLoad() {
    super.viewDidLoad()

    webView.delegate = self

    // From Web
    let url = NSURL (string: menuURL!)
    let urlRequest = NSURLRequest(URL: url!)

    let connection = NSURLConnection(request: urlRequest, delegate: self)
    self.data = NSData()
    connection!.start()

    // if this is false, page will be 'zoomed in' to normal size
    webView.scalesPageToFit = false

}

func webView(webView: UIWebView, shouldStartLoadWithRequest request: NSURLRequest, navigationType: UIWebViewNavigationType) -> Bool {
    if navigationType == .LinkClicked && request.URL!.fragment != nil {
        let connection = NSURLConnection(request: request, delegate: self)
        connection!.start()
        return false
    }
    return true
}

func connection(connection: NSURLConnection, didReceiveResponse response: NSURLResponse) {
    self.response = response
}

func connection(connection: NSURLConnection, didReceiveData data: NSData) {
    let oldData = NSMutableData(data: self.data)
    oldData.appendData(data)
    self.data = oldData
}

func connectionDidFinishLoading(connection: NSURLConnection) {
    self.webView.loadData(self.data, MIMEType: self.response!.MIMEType!, textEncodingName: "utf-8", baseURL: self.response!.URL!)
    self.data = NSData()
}

} 
```

# dynamics-crm-2011 - Dynamic CRM 2011 大数据库在线容量

> ID：15654470
> 
> 赞同：1
> 
> 时间：2013-03-27T08:28:01.527
> 
> 标签：dynamics-crm-2011, dynamics-crm, capacity

我们有自己的内置 CRM，但我们计划迁移到 Dynamic CRM Online。功能方面我们没有问题，但是，我们的系统将有数百万条联系人记录，每个人都可以有多个机会记录。

对于我们这种情况，Dynamic CRM Online 是否是推荐的解决方案（性能方面）？它可以扩展以处理数百万条记录吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:46:48.007

我希望如此，我相信它几乎可以在相同的硬件设置上运行。

事实上，您可能会看到更好的性能，因为它在云上运行，而且微软必须为所有客户提供一些非常强大的硬件；它们一起必须代表数百万条记录。

我想确定你应该联系他们。

不过，明显的缺点是您按`gb`. 每月每 GB 10 美元。

# django - Django 模板错误：无法从 'uid' 解析余数：'，'？

> ID：15654472
> 
> 赞同：6
> 
> 时间：2013-03-27T08:28:08.563
> 
> 标签：django, forgot-password, django-errors

我正在使用`forgot_password`带有自定义模板的 Django 框架。我正在使用`Django 1.5`. 我的自定义模板`password_reset_email.html`如下所示：

```
{% autoescape off %}
You're receiving this e-mail because you requested a password reset for your user account at {{ site_name }}.

Please go to the following page and choose a new password:
{% block reset_link %}
{{ protocol }}://{{ domain }}{% url django.contrib.auth.views.password_reset_confirm uidb36=uid, token=token %}
{% endblock %}

Your username, in case you've forgotten: {{ user.username }}

Thanks for using our site!

The {{ site_name }} team.

{% endautoescape %}

#Exception:
Exception Type: TemplateSyntaxError at /accounts/password/reset/
Exception Value: Could not parse the remainder: ',' from 'uid,' 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-27T08:32:50.390

把它放在顶部：

```
 {% load i18n %}{% load url from future %}
 {% autoescape off %}
 .......... 
```

删除`,`，你把它放在旁边`uidb36=uid,`

```
 {% url 'django.contrib.auth.views.password_reset_confirm' uidb36=uid token=token %} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-04T21:45:45.363

我没有足够的声誉点来评论接受的答案，但由于您使用的是 Django 1.5，因此不需要 {% load url from future %}。它仅在 Django 1.3 和 1.4 中需要。 [https://docs.djangoproject.com/en/dev/releases/1.3/#changes-to-url-and-ssi](https://docs.djangoproject.com/en/dev/releases/1.3/#changes-to-url-and-ssi)

# java - 如何下载 Eclipse 的源代码？

> ID：15654475
> 
> 赞同：15
> 
> 时间：2013-03-27T08:28:15.080
> 
> 标签：java, eclipse, eclipse-plugin

花了一段时间后（他们用于 CSV 访问的 wiki 页面不再有效，提供的密码不起作用）并且他们的 SVN 存储库不包含 Eclipse IDE 或核心插件的代码。同样的问题似乎也适用于他们的 GIT 存储库。特别是我正在寻找这个*核心*插件类的源代码（甚至不是java特定的）：

插件：org.eclipse.debug.core

类：org.eclipse.debug.core.model.IProcess

最后，我还尝试将插件作为带有源目录的片段导入。没有打包的源文件。我的最后一个选择是反编译类文件，但请告诉我有一个更好的存储库，我可以通过只读权限访问？同样，他们的 wiki 要么已过时，要么没有将我指向核心代码而是其他项目存储库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T08:37:46.313

[我找到了，棘手的部分是在他们的 git repo 页面（ http://git.eclipse.org/c/](http://git.eclipse.org/c/) ）上列出了这么多 repos ，你必须检查每个页面，它列在类别“平台”，而不是按字母顺序列出所有插件 ID：

对于 org.eclipse.debug.core（IProcess 所在的位置），它在这里：

[http://git.eclipse.org/c/platform/eclipse.platform.debug.git/tree/org.eclipse.debug.core](http://git.eclipse.org/c/platform/eclipse.platform.debug.git/tree/org.eclipse.debug.core)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T10:37:27.390

您还可以查看 Lars Vogel 的最新演示文稿 :)[如何在 20 分钟内成为 Eclipse 提交者并分叉 IDE](http://www.slideshare.net/LarsVogel/eclipse-committerin20minutes)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-27T08:39:41.050

根据您的需要，[Eclipse Common Build Infrastructure](http://wiki.eclipse.org/CBI) (CBI) 可能会有所帮助。

CBI 项目已将 Eclipse 转换为 Tycho 项目，这意味着您可以使用 2-3 个命令[获取所有源代码并将它们编译为可工作的 Eclipse 构建。](http://wiki.eclipse.org/Platform-releng/Platform_Build)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T08:54:39.413

如果您只想查看代码，您可以随时使用[GrepCode](http://grepcode.com/)。

例如，您要求的类的 Eclipse 4.2 版本可在此处找到：[IProcess.java](http://grepcode.com/file/repository.grepcode.com/java/eclipse.org/4.2/org.eclipse.debug/core/3.7.100/org/eclipse/debug/core/model/IProcess.java)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-29T03:29:19.843

使用[此处来自@Aaron Digulla的](https://stackoverflow.com/a/15654653/4561887)[此链接](https://wiki.eclipse.org/Platform-releng/Platform_Build#Building)（请参阅“构建”和“克隆平台源代码树”部分），这似乎是下载所有 Eclipse 源代码的方式。我实际上运行了这些指令，它们似乎有效。我认为这就是一切。

```
# 1 .Clone the whole repo, including all submodules (sub-repos)
git clone -b master --recursive \
git://git.eclipse.org/gitroot/platform/eclipse.platform.releng.aggregator.git 
```

上面的克隆过程花了我大约 30 分钟，下载了 3.9 GB 的东西。

```
# 2\. To update the git clone above, including all submodules
cd eclipse.platform.releng.aggregator
git pull --recurse-submodules
git submodule update 
```

而已！这似乎就是一切（我认为）。这是我在刚刚克隆的“eclipse.platform.releng.aggregator”文件夹的第一级中看到的内容：

```
eclipse.platform.releng.aggregator$ tree -L 1
.
├── cje-production
├── CONTRIBUTING
├── eclipse.jdt
├── eclipse.jdt.core
├── eclipse.jdt.core.binaries
├── eclipse.jdt.debug
├── eclipse.jdt.ui
├── eclipse.pde.build
├── eclipse.pde.ui
├── eclipse.platform
├── eclipse.platform.common
├── eclipse.platform.debug
├── eclipse-platform-parent
├── eclipse.platform.releng
├── eclipse.platform.releng.prereqs.sdk
├── eclipse.platform.releng.tychoeclipsebuilder
├── eclipse.platform.resources
├── eclipse.platform.runtime
├── eclipse-platform-sources
├── eclipse.platform.swt
├── eclipse.platform.swt.binaries
├── eclipse.platform.team
├── eclipse.platform.text
├── eclipse.platform.ua
├── eclipse.platform.ui
├── eclipse.platform.ui.tools
├── Jenkinsfile
├── JenkinsJobs
├── LICENSE
├── NOTICE
├── pom.xml
├── production
├── README.md
├── rt.equinox.binaries
├── rt.equinox.bundles
├── rt.equinox.framework
├── rt.equinox.p2
└── scripts

32 directories, 6 files 
```

# intellij-idea - 如何在 Windows 上从 IntelliJ 启动 Jetty？

> ID：15654476
> 
> 赞同：7
> 
> 时间：2013-03-27T08:28:15.630
> 
> 标签：intellij-idea, jetty

我使用的是 Windows 7 和 IntelliJ 12。我下载了 Tomcat，我可以很好地使用它。我也想使用 Jetty。但我做不到。

Jetty 会与 IntelliJ 一起出现吗？

有人可以指导我如何使用 Jetty 吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T08:51:07.383

是的，IntelliJ 带来了 Jetty 支持，但[仅限于 Ultimate Edition](http://www.jetbrains.com/idea/features/editions_comparison_matrix.html)。

如果你有它，你需要创建 Jetty 运行/调试配置并填写所需的详细信息。

![码头配置](../Images/ea69d0ea99e0a8c34b54a988e14a5961.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-10T03:37:12.243

在修复它之前，我有同样的困惑。鉴于我的解决方案，希望它对某人有所帮助。

我的环境：Jetty 9.1 和 Intellij 13.0.1

**1** . 注意两点：默认端口是 8080，除非你改变它；必须选择 jmx mod。

![intellij13-jetty9-运行-调试-config1](../Images/b46592689b1da97e24f96e6cf9b8ce68.png)

**2** . 选择要在选项卡中部署的战争文件`Deployment`并设置您的上下文路径。

![intellij13-jetty9-运行-调试-config2](../Images/aad566cfd99d248eb01fe03ed3555646.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-28T03:15:42.713

如果您的项目是 maven 项目，您也可以简单地使用 maven 插件。

```
<plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>8.1.9.v20130131</version>
    <configuration>
        <webApp>
            <contextPath>/${project.artifactId}</contextPath>
        </webApp>
        <stopKey>STOP</stopKey>
        <stopPort>9999</stopPort>
        <scanIntervalSeconds>5</scanIntervalSeconds>
    </configuration>
</plugin> 
```

然后只需运行 jetty-run。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-19T22:44:35.400

您可能会看到该错误的一个原因是您忘记指定要部署的工件。转到运行/调试配置部署选项卡并添加您的工件。（使用 IntelliJ IDEA 12.1.4 终极版）

# dynamics-crm-2011 - CRM2011 审核通过后发送邮件的工作流程是什么？

> ID：15654477
> 
> 赞同：0
> 
> 时间：2013-03-27T08:28:20.527
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-online

我创建了一个具有“**发送审批**”状态的广告系列。然后我通过工作流的分配记录转移到批准的权威人员。他打开了该活动并**批准**了该特定记录的状态。我的问题是如何使用 CRM2011 在我的工作流程中获得该**批准状态，或者如何通过我的工作流程检查该活动是否已批准/其他状态？**获得该响应的工作流程是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:36:01.167

我不知道我是否理解你的问题。您希望在状态更改为已批准时启动工作流。因此，您可以在“记录状态更改”时启动您的工作流程，之后您可以检查状态是否为“已批准”。检查这个[例子](http://dynamic-crm.com/crm-dynamics-workflow/)。

# ibm-connections - 从博客媒体条目中检索文件

> ID：15654479
> 
> 赞同：0
> 
> 时间：2013-03-27T08:28:28.613
> 
> 标签：ibm-connections, ibm-sbt

我正在构建的工具需要从 IBM Connections Ideation Blogs 中提取数据。因此，我使用具有基本身份验证的 Connections API 来阅读博客条目。这一切顺利，直到描述包含图像。当我要求 API 为博客提供媒体资源时，它没有显示 /BLOGS_UPLOADED_IMAGES 位置的任何条目——该位置包含通过博客的富文本编辑器上传的图像。我在 API 调用中使用的用户是创建博客条目和上传图片的同一用户。

但是，API 调用确实包含我使用 API 发布的图像和对博客媒体条目集合的 POST 请求。这就是下一个问题出现的地方。这些图像的 Atom 条目包含各种链接，其中一个带有 ref="en​​closure"，其中的 API 文档（[链接](http://www-10.lotus.com/ldd/appdevwiki.nsf/xpDocViewer.xsp?lookupName=IBM%20Connections%204.0%20API%20Documentation#action=openDocument&res_title=File_content_ic40a&content=pdcontent)) 告诉我“使用 href 属性中的网址获取文件的二进制内容”。但是，我对这个地址的呼叫总是得到 404 响应代码。Atom 条目中的另一个 url（这次是元素）由相同的文档（参见上面的链接）描述为：“提供访问文档的媒体。支持以下操作： GET：使用网址获取媒体。 " 当我调用此 url 时，一如既往地附加了基本身份验证凭据，响应包含 Connections 登录表单的 html，因此此 url 似乎不支持 API 身份验证。这仅适用于需要身份验证的非公共社区，当然，如果图片是公开的，则一切正常。

我错过了什么吗？是否有另一种方法可以通过 API 从博客的媒体条目中检索实际图像？手动上传的图片是否从未包含在媒体条目结果中，或者这是一个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:52:58.427

它现在可以使用 atom 条目中带有 ref="en​​closure" 的链接神奇地工作。我猜我的身份验证可能有问题（尽管我实际上并没有意识到我现在所做的与以前不同）。

仍然存在的问题：通过富文本编辑器上传的 /BLOGS_UPLOADED_IMAGES 文件夹中的图片不会出现在博客的媒体源中。

# android - 地图不显示在其他手机上，但出现在我的移动设备上

> ID：15654482
> 
> 赞同：0
> 
> 时间：2013-03-27T08:28:39.623
> 
> 标签：android

我开发了一个使用 Google maps api v2 的 android 应用程序。地图在我的手机上工作得很好，但它甚至不会出现在其他手机上。我在其他手机上安装了 .apk 文件，但出现白屏。地图未显示。任何机构都可以告诉我为什么会这样吗？

# objective-c - Analyzer 的内存泄漏问题？

> ID：15654484
> 
> 赞同：-1
> 
> 时间：2013-03-27T08:28:59.003
> 
> 标签：objective-c, memory-leaks

我是我项目的初学者，在某些方面崩溃了。我在 xcode 的 RUN 子项中的 Analyze 的帮助下进行了检查。这里我有一些问题列表是泄漏对象在这里我添加了两种图像它代表泄漏对象我无法理解发生了什么问题请任何人帮助我

![appdelegate 类中的问题](../Images/e62e8cbbbff3678874458eed62d2c91a.png) ![XMLparse 类中的问题](../Images/afa78efa3c2f1a823eafb096e5c616cd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:39:48.027

很明显，您`create`或`retain`某个对象，但忘记释放它。

从你的两个图像中，你分配`appDelegate.Notify_array`不释放，如果`Notify_array`是`strong-property`，你可以`autorelease`当它`alloc`。

而且您还保留`receivedData`不释放。

可能你释放了里面的所有对象`dealloc`，但是命名风格不好，实例变量有一个下划线前缀就好了。

内存泄漏不会导致崩溃，但访问野指针会。对于你项目的crash，我建议你打开`NSZombie Detect`去抓。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:39:57.933

XCode 分析器仅用于查找任何潜在的泄漏，它并不能准确说明为什么会发生任何崩溃。在屏幕截图中，表示 alloc 语句的连接未在任何地方释放。在屏幕截图 2 中，表示 alloc 语句的 appDelegate.Notify_array 未在任何地方释放。执行路径以蓝色箭头显示。

添加相应的发布声明。该分析仪泄漏将消失。

在 xcode 中添加异常断点并启用僵尸对象，它可以帮助发现大多数崩溃。另请参阅 xcode 控制台中记录的任何错误消息。

# asp.net-mvc - https 和第三方内容

> ID：15654485
> 
> 赞同：0
> 
> 时间：2013-03-27T08:29:01.543
> 
> 标签：asp.net-mvc, http, https

当我在我的网站页脚（例如 YouTube 电影或 Flickr 图片预览或 Google 地图）中插入一些来自 3rd 方网站的内容时，我在 https 页面上遇到问题：所有浏览器都会发出警告说`Only secure content is displayed`。如何在不删除 https 的情况下避免它（某些网站区域需要它）？

该网站基于 ASP.NET MVC 3。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:33:33.707

当链接同时作为 http 和 https 可用并且您希望将其嵌入到同时是 http 和 https 的页面中时，您可以执行以下操作：

```
<img src="//url.tld/path/to/file.png" alt="" /> 
```

（注意 http 和 https 存在：浏览器会选择正确的）

# php - 通过 curl 发布到 Twitter

> ID：15654486
> 
> 赞同：0
> 
> 时间：2013-03-27T08:29:02.903
> 
> 标签：php, curl

我必须允许客户在我正在构建的博客上发布文章，并在 twitter、facebook 和linkedin 上自动发布帖子。我无法为客户创建应用程序 facebook / twitter 甚至给我密码。所以我想使用 curl （或其他方法）从 php 创建一个帖子。我发现了这个： [http](http://www.flameweb.net/using_php_to_update_twitter) ://www.flameweb.net/using_php_to_update_twitter 我输入了我的用户名和密码，运行代码，它返回“成功”，但 twitter 上没有帖子。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:41:30.317

这是来自[360percents.com](http://360percents.com)[的脚本](https://github.com/lukapusic/twitter-bot/blob/master/tweet.sh)的修改版本。它使用移动推特。我用的时候有用，现在没查。

登录.sh：

```
#!/bin/bash

#REQUIRED PARAMS
username=$1
password=$2
cookie="$username.cookie"

#EXTRA OPTIONS
uagent="Mozilla/5.0"
#proxy="--socks5 127.0.0.1:9050"

#INITIAL PAGE
initpage=`curl $proxy -s -b $cookie -c $cookie -L --sslv3 -A "$uagent" "https://mobile.twitter.com/session/new"`
token=`echo "$initpage" | grep "authenticity_token" | sed -e 's/.*value="//' | sed -e 's/" \/>.*//' | tail -n 1`

#LOGIN
loginpage=`curl $proxy -s -b $cookie -c $cookie -L --sslv3 -A "$uagent" -d "authenticity_token=$token&username=$username&password=$password" "https://mobile.twitter.com/session"` 
```

推文.sh：

```
#!/bin/bash

#REQUIRED PARAMS
username=$1
password="$2"
tweet=$3
cookie="$username.cookie"

#EXTRA OPTIONS
uagent="Mozilla/5.0"
#proxy="--socks5 127.0.0.1:9050"

#HOME PAGE
homepage=`curl $proxy -s -b $cookie -c $cookie -L -A "$uagent" "http://mobile.twitter.com/"`
if [ "$homepage" != "${homepage/Sign in/}" ]; then
    echo "Signing $username in"
    ./signin.sh $username $password
fi

echo "Tweeting $tweet by $username"

#TWEET
tweettoken=`echo "$homepage" | grep "authenticity_token" | sed -e 's/.*value="//' | sed -e 's/" \/>.*//' | tail -n 1`
update=`curl $proxy -s -b $cookie -c $cookie -L -A "$uagent" -d "authenticity_token=$tweettoken&tweet[text]=$tweet&tweet[display_coordinates]=false" "http://mobile.twitter.com/"` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:59:15.787

您是否尝试过使用 Twitter API？

[REST API v1.1](https://dev.twitter.com/docs/api/1.1)

# iphone - 如何在 Xcode 的框架中进行调试？

> ID：15654493
> 
> 赞同：16
> 
> 时间：2013-03-27T08:29:26.693
> 
> 标签：iphone, ios, objective-c, xcode

我有两个项目，一个是`networkLib`用于登录和一些其他网络功能，另一个是`usingLibDemo`. 所以我拥有这两个项目的所有源代码。

该`networkLib`项目输出一个名为 的框架，`myNetKit.framework`供`usingLibDemo`.

![在此处输入图像描述](../Images/f68a019e30d3ba398636328eb5291dca.png)

现在我成功用于`myNetKit.framework`登录，但有时它会崩溃，可能在没有堆栈信息的 main() 中，但有时 Xcode 会给我如下堆栈信息：

![在此处输入图像描述](../Images/d78e2df7a83c1f9ba2cfb0683600922d.png)

所以我知道它在哪里崩溃：

![在此处输入图像描述](../Images/d0276f7e354654bebdf124fa246cbf21.png)

但是`Utils.m`没有暴露，**Xcode如何获取堆栈信息和崩溃线，并最终为我打开源文件？**因为我的磁盘中有源代码？

如果是这样，当它没有崩溃时，我该如何`myNetKit.framework`逐步调试？

非常感谢任何提示。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2017-02-07T13:59:12.460

如果将来有人会有同样的问题（现在我使用的是 Xcode 8）：

你可以：

1.  构建您的框架项目（在本例中为“networkLib”）
2.  将项目输出（“myNetKit.framework”）复制到目标项目（“usingLibDemo”）
3.  在您的设备上运行目标项目（“usingLibDemo”）
4.  停止进程
5.  手动从您的设备启动应用程序（“usingLibDemo”）
6.  打开框架项目并附加到应用程序的进程（在步骤 5 中启动）。在 Xcode 8 中：调试->附加到进程->选择您的应用程序的名称。

不要忘记在你的框架项目中设置一些断点。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-23T10:28:29.973

当使用所有符号构建库时，它包含嵌入自身的每个源文件的完整路径。如果您使用十六进制查看器打开 .a，您实际上可以看到这一点。有了这个，XCode 将知道如何访问源文件。

设置断点更具挑战性。您基本上必须通过单步执行这些文件中的方法，让 XCode 从您的库中慢慢发现源文件。XCode 打开文件后，您可以在其中的任何位置设置断点。

这有点痛苦，但它有效，如果您不想，您不必将库项目设为子项目。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-04-10T18:58:29.400

以下工作考虑您单独拥有框架项目并将*a.framework*添加到某个*项目 B的***场景**。

 **1.  转到您的项目 B，在任何地方添加断点。
2.  转到断点视图（所有断点都可以视为列表），右键单击断点并单击将断点移动到用户。
3.  转到*a.framework*并重复步骤 1 和 2，但对于您的框架项目。
4.  现在切换回项目 B 并在模拟器/设备上运行该项目。

您现在将看到程序也停止在框架中设置的断点处。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-27T09:12:58.047

您还可以将整个库 ( `networkLib`) 项目添加到您的项目中，并通过在项目设置中添加依赖项来动态链接库。因此，您可以在项目中拥有所有源代码。所以你可以在运行时调试它。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-27T09:13:35.017

在处理多个框架项目时使用 XCode Workspace。当您使用工作区时，断点将起作用，您可以在没有来回调试负载的情况下找到崩溃。从长远来看，管理您的框架会容易得多。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-27T08:59:22.467

您应该调试单独输出框架的项目 networkLib。该框架没有类似应用程序的结构，因此无法调试其他项目中的框架文件。**

# perl - perl 调试器输出到文件 (Windows)

> ID：15654495
> 
> 赞同：1
> 
> 时间：2013-03-27T08:29:28.727
> 
> 标签：perl, debugging

我尝试使用 perl 调试器列出脚本的所有子例程，并将结果放入外部文件中。但它没有用。

我的代码：

```
perl -d -S myscript.pl > results.txt 
```

*   `-S`= 列出所有子程序
*   `-d`= 调试 perl 脚本

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T03:23:50.167

在您的主目录中，创建一个名为 .perldb 的文件，其内容如下：

`parse_options("NonStop=1 LineInfo=results.txt AutoTrace=1 frame=2");`

然后运行命令

`perl -d myscript.pl`

如果你想扫描并列出 Perl 在运行之前看到的整个子例程：

`perl -MO=Deparse -f myscript.pl`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:53:01.463

-S 不应该用作命令行开关。运行`perl -d`将启动一个调试器进程，您可以使用的命令之一是`S`.

例子：

```
$ perl -d tmp/splithttpdconf.pl 

Loading DB routines from perl5db.pl version 1.28
Editor support available.

Enter h or `h h' for help, or `man perldebug' for more help.

main::(tmp/splithttpdconf.pl:6):        my $basedir = shift;

DB<1> S main::
main::BEGIN
main::debug
main::splitconf

DB<2> 
```

为了获得您想要的输出类型，您可以改用分析器模块 Devel::DProf。它将探查器信息输出到一个文件中，该文件可由 dprofpp 程序读取。这是获取子例程列表的示例：

```
perl -d:DProf perlscript.pl; dprofpp -T 
```

如果您只想要您自己的脚本中的子例程，而不是从其他模块加载的子例程，请添加一个 grep 到它，例如：

```
perl -d:DProf perlscript.pl; dprofpp -T | grep main:: 
```

`grep "sub.*{"`尽管对于了解给定程序中存在哪些子例程的特定问题，但如果您使用一致的编码风格，那么从一开始可能会更容易。

# android - Android从父活动关闭子活动

> ID：15654497
> 
> 赞同：14
> 
> 时间：2013-03-27T08:29:37.627
> 
> 标签：android, parent-child, activity-finish

我想从父活动中关闭子活动。我的流程是这样的：活动 A 已打开，活动 AI 内部正在打开活动 B。但同时我的活动 A 正在执行一些后台任务。当我得到后台任务的结果时，我想从活动 A 中关闭活动 B。

有可能这样做吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-27T08:34:46.850

您可以通过使用启动活动B，`startActivityForResult (Intent intent, int requestCode)`然后您可以通过调用关闭活动 `finishActivity (int requestCode)`B。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T08:42:36.043

你应该做的是开始你的活动`startActivityForResult(yourIntent, childId);`

然后，当您想杀死孩子的活动时，请尝试`finishActivity(childId);`

看到[这里](https://stackoverflow.com/questions/4397987/finish-child-activity-when-parent-activity-stops)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T08:39:32.093

一旦你离开它，你不需要完成（）每个活动，Android会为你做。因此，您只需将 Activity A 重新启动到顶部任务。

# python - 如何检查变量是否是 datetime.datetime 或 datetime.date 的实例

> ID：15654498
> 
> 赞同：9
> 
> 时间：2013-03-27T08:29:49.657
> 
> 标签：python, datetime

我试过了

```
In [16]: import datetime

In [17]: now = datetime.datetime.utcnow()

In [18]: isinstance(now, datetime.date)
Out[18]: True

In [19]: isinstance(now, datetime.datetime)
Out[19]: True 
```

我期望的是第一个 isinstance 应该返回 False。发生了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-27T08:33:06.573

由于`datetime`继承自，因此也的`date`每个实例*都是 的*实例，即您可以在任何要使用实例的地方使用实例。这是面向对象编程的[核心概念。](http://en.wikipedia.org/wiki/Is-a)`datetime`*`date``datetime``date`*

 *要修改检查以执行您想要的操作，您可以`date`使用`type(now) is datetime.date`. `datetime`或者，您可以使用明确排除`isinstance(now, datetime.date) and not isinstance(now, datetime.datetime)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-15T22:47:56.570

**您可以使用任何一种方法，如下所示：**

您可以使用任何随机日期来比较日期和日期时间实例。

**单程：**

```
a = datetime.date(2021,12,30) 
x = datetime.datetime(2020, 5, 17) 

print(isinstance(a,type(datetime.date(2021,12,30)))) #True
print(isinstance(a,type(datetime.datetime(2021,12,30)))) #False 
```

**第二种方式**

```
a = datetime.date(2021,12,30)
x = datetime.datetime(2020, 5, 17)

print(isinstance(a, a.__class__)) # True
print(isinstance(a, x.__class__)) # False 
```*

# android - 如何根据不同的分辨率调整android webview中的图像大小？

> ID：15654499
> 
> 赞同：-1
> 
> 时间：2013-03-27T08:29:51.493
> 
> 标签：android, android-webview, resolution, meta-tags, viewport

当我尝试在 android 浏览器中加载以下 html 页面时，图像未根据分辨率重新调整大小

```
<html>
<header>
    <meta name="viewport"
        content="width=device-width,initial-scale=1.0, maximum-scale=1.0, target-densityDpi=device-dpi" />
    <link rel="stylesheet" href="file:///android_asset/style.css"
        type="text/css">
</header>
<body>
    <p>This is a sample.</p>
    <br />
    <p>This is a sample. this is a sample to test text alignment This is a sample. this is a sample to test text alignment This is a sample. this is a sample to test text alignment This is a sample. this is a sample to test text alignment This is a sample. this is a sample to test text alignment This is a sample. this is a sample to test text alignment This is a sample. this is a sample to test text alignment This is a sample. this is a sample to test text alignment This is a sample. this is a sample to test text alignment This is a sample. this is a sample to test text alignment This is a sample. this is a sample to test text alignment This is a sample. this is a sample to test text alignment </p>
    <br />
    <img align="center" class="centeraligned"
        src="file:///mnt/sdcard/Android/data/com.sample.sample/sample.jpg"
        height="600" width="630" />
    <br />
</body>
</html> 
```

如果我设置视口内容宽度 = 600 图像看起来很好。但文本左对齐。我错过了视口中的任何设置吗？

PS：文本对齐问题仅在 Kindle Fire HD 和 Kindle Fire Classic 中出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:45:49.020

我通常让图像填充 100% 的宽度。所以无论设备宽度高度是多少。像下面这样的东西会做

```
<img src="file:///mnt/sdcard/Android/data/com.sample.sample/sample.jpg" style="width:100%"> 
```

否则动态获取宽度、高度并在运行时更改图像

```
$(window).height();   // returns height of browser viewport
$(document).height(); // returns height of HTML document
$(window).width();   // returns width of browser viewport
$(document).width(); // returns width of HTML document 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T22:13:28.267

出于某些目的，[Sheharyar Naseer 的以下回答](https://stackoverflow.com/a/12327010/383414)将有所帮助：

```
webview.getSettings().setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T08:36:39.473

height="600" width="630" 你已经设置了这个恒定像素，所以图像永远不会调整大小。您可以添加 javascript 来调整图像大小。

# symfony - 如何覆盖 Symfony 上的 ssl (https) 设置

> ID：15654500
> 
> 赞同：0
> 
> 时间：2013-03-27T08:30:02.267
> 
> 标签：symfony

在我的应用程序中，我设置了路由和安全性，以对某些路由使用安全连接：

```
<route id="store_checkout" pattern="/checkout" scheme="https">
    <default key="_controller">Store:Store:checkout</default>
</route>

access_control:
    - { path: ^/checkout, role: IS_AUTHENTICATED_ANONYMOUSLY, requires_channel: https } 
```

但是，由于此应用程序是开源的并且可以在任何服务器（可能没有 SSL）上运行，我希望允许用户禁用/忽略 SSL 要求（如果他们选择这样做，则风险自负）。

目前我可以想到几种方法：

1.  我可以有 2 个路由文件（1 个带 ssl，1 个不带）和 2 个安全文件。然后根据用户在安装时的选择，应用程序可以决定使用哪个文件

2.  或者也许我还可以自定义路由器的生成功能，以根据 _scheme 设置和 SSL 状态生成 http 或 https 链接（如果他们有/没有 SSL 证书，用户可以启用/禁用）

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-16T11:44:01.373

我知道答案很晚，但如果你在谷歌搜索时偶然发现：

只需在 parameters.yml 中添加一个：

```
url_scheme: https 
```

在你的 security.yml 中：

```
- { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY, requires_channel: %url_scheme% } 
```

# internet-explorer-10 - IE10 本地页面无法打开 CSS

> ID：15654503
> 
> 赞同：3
> 
> 时间：2013-03-27T08:30:17.100
> 
> 标签：internet-explorer-10

刚刚安装了 IE10，即使使用“默认重置”，当我打开本地页面（如 C:\Documents\index.html）时，它也拒绝加载简单的链接样式表，直接调用如下：

```
<link href='common.css' type='text/css' rel='stylesheet'> 
```

控制台错误消息是：**SEC7113：由于 mime 类型不匹配，CSS 被忽略**

我已经搜索了安全设置，但似乎没有任何改变行为。

从网络上查看页面，当然没有问题。

有人有线索吗？

（FWIW，我在 Win7/64 台式机和老化的小型 Win7/32 上网本上看到了完全相同的问题。）

编辑：这是一个简单的测试用例。将此 HTML 作为 index.html 保存在 PC 上的文件夹中：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Basic</title>
<link href="common.css" rel="stylesheet" type="text/css">
</head>
<body>
<p>This text should be red.</p>
</body>
</html> 
```

现在将此 CSS 保存在同一个文件夹中，作为 common.css：

```
body {
    color: red;
} 
```

用 Firefox 或 Chrome 打开 index.html - 红色文本，对吗？但是如果我用 IE10 打开它，文本是黑色的 - 没有加载 common.css 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-28T05:17:30.490

我通过几个步骤轻松修复了它：

1.  运行 -> 注册表编辑器
2.  打开 HKEY_LOCAL_MACHINE\SOFTWARE\Classes\.css
3.  修改：“内容类型”从“text/plain”改为“text/css”
4.  退出注册表

IE 10 现在可以正确读取本地 CSS 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T02:38:20.637

我找到了！

可以使用控制面板“默认程序/关联文件类型...”来设置 .css 文件由 Notetab Light（我最喜欢的通用文本编辑器）打开。但是，如果您进入 Notetab Light 本身并选择查看、选项、关联，然后将 css 添加到列表中，则会产生我一直看到的错误。

显然，这会产生一个注册表项，导致 IE10 在从 HTML 页面调用时无法打开本地 CSS 文件。IE9 没有受此困扰（我以前从未遇到过问题，而且我已经使用 Notetab Light 多年了）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T16:57:03.260

由于 MIME 类型不匹配 css 在 ie 10 中被忽略。MIME 类型可以通过一个名为[FIle TypesMan的实用程序来纠正](http://nirsoft.net/utils/file_types_manager.html)它是由 NirSoft 创建的免费软件。事实证明，.css 的 MIME 类型已更改为 text/plain，从而阻止了 ie 渲染我的样式。使用 FileTypesMan 将其改回 text/css 解决了这个问题。从 NirSoft 站点下载 FileTypesMan。使用页面底部附近的链接为您的操作系统选择正确的版本（32 位、64 位和 Windows 98/ME 有不同的版本）。将文件解压缩到本地文件夹，然后双击 FileTypesMan.exe。FileTypesMan 列出所有文件类型后，在顶部窗格中向下滚动以找到 .css。双击以编辑设置。在打开的对话框的 MIME 类型字段中将值更改为 text/css。单击确定。任务完成。IE 10 现在应该表现自己（好吧，至少就呈现样式表而言）。

# jquery - 引导多选两侧

> ID：15654506
> 
> 赞同：2
> 
> 时间：2013-03-27T08:30:38.827
> 
> 标签：jquery, select, twitter-bootstrap

在 Bootstrap 中，是否有用于多选两侧的插件？或教程如何在引导程序中创建多选两侧，从向右或向左移动，向上或向下调整位置。jQuery 中的示例：http: [//www.stevefenton.co.uk/cmsfiles/assets/File/twolateralmultiselect.html](http://www.stevefenton.co.uk/cmsfiles/assets/File/twosidedmultiselect.html)但如何在引导程序中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-07-11T02:47:07.020

您可以使用**[multiselect.js](https://github.com/crlcu/multiselect#multiselect)**。它真的让事情变得简单。

**[带有向上/向下移动按钮](http://crlcu.github.io/multiselect/examples/move-up-down.html)**

```
$('#multiselect').multiselect();
```

```
<link href="https://netdna.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet" />
<script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
<script src="https://netdna.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdn.rawgit.com/crlcu/multiselect/v2.5.1/dist/js/multiselect.min.js"></script>

<div class="row">
  <div class="col-xs-5">
    <select name="from[]" id="multiselect" class="form-control" size="8" multiple="multiple">
      <option value="1">Item 1</option>
      <option value="2">Item 2</option>
      <option value="3">Item 3</option>
      <option value="4">Item 4</option>
      <option value="5">Item 5</option>
    </select>
  </div>

  <div class="col-xs-2">
    <button type="button" id="multiselect_rightAll" class="btn btn-block"><i class="glyphicon glyphicon-forward"></i></button>
    <button type="button" id="multiselect_rightSelected" class="btn btn-block"><i class="glyphicon glyphicon-chevron-right"></i></button>
    <button type="button" id="multiselect_leftSelected" class="btn btn-block"><i class="glyphicon glyphicon-chevron-left"></i></button>
    <button type="button" id="multiselect_leftAll" class="btn btn-block"><i class="glyphicon glyphicon-backward"></i></button>
  </div>

  <div class="col-xs-5">
    <select name="to[]" id="multiselect_to" class="form-control" size="8" multiple="multiple"></select>

    <div class="row">
      <div class="col-xs-6">
        <button type="button" id="multiselect_move_up" class="btn btn-block"><i class="glyphicon glyphicon-arrow-up"></i></button>
      </div>
      <div class="col-xs-6">
        <button type="button" id="multiselect_move_down" class="btn btn-block col-sm-6"><i class="glyphicon glyphicon-arrow-down"></i></button>
      </div>
    </div>
  </div>
</div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:35:06.760

引导网站上有您需要的文档：

[http://twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)

看看内联复选框、内联表单，或者只是使用 boostrap span* 来安排您的选择项目，例如

```
<div class="row">

<div class="span1">select item 1</div>
<div class="span1">select item 2</div>

</div> 
```

这将在两个 span1 div 中并排对齐两个项目。

# c++ - 如何测试迭代器值是否具有整数类型？

> ID：15654507
> 
> 赞同：1
> 
> 时间：2013-03-27T08:30:40.703
> 
> 标签：c++, templates, iterator, integer, typechecking

在编写 C++ 模板函数时，我必须检查此函数使用的变量类型是否为整数。如果是这种情况，它应该会导致编译错误。

```
template <class IT> void foo( IT first, IT last ) {
    // check here that *first has integral type.
} 
```

我遇到的麻烦是，这个函数模板参数不是直接使用的类型，而是迭代器类型。

不幸的是，我目前处于一个无法使用 C++11 或 Boost 的环境中，因此我将不得不尝试自己重新发明这个轮子。

我最终通过使用参数数组大小定义指向数组的指针来测试该类型是否是整数。如果参数类型是非整数，这会产生编译错误。

```
template <class IT> void foo( IT first, IT last ) {
    int ( * fake_array_ptr )[*first]; // Error: size of array has non-integral type
} 
```

我的问题是：还有其他更*明确*的方法来测试一个类型是否是整数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:50:52.750

> 我最终通过使用参数数组大小定义指向数组的指针来测试该类型是否是整数。如果参数类型是非整数，这会产生编译错误。

这不是便携式的。即使参数类型是整数，它也会产生编译错误，因为数组大小必须是整数常量表达式。它目前可能正在编译，因为您的编译器具有 C99 可变长度数组作为扩展，并且默认情况下启用它。

有有限数量的可移植整数类型。其中每一个的显式特化是`is_integral`在 C++03 中实现的一种可移植方式。

```
template <typename T>
struct is_integral { static const bool value = false; };

template <>
struct is_integral<char> { static const bool value = true; };

template <>
struct is_integral<signed char> { static const bool value = true; };

template <>
struct is_integral<unsigned char> { static const bool value = true; };

template <>
struct is_integral<short> { static const bool value = true; };

// and so on

template <>
struct is_integral<unsigned long> { static const bool value = true; }; 
```

为了在此 trait 产生 false 时导致编译错误，可以`static_assert`在 C++11 中使用，或者`BOOST_STATIC_ASSERT`. 之前有一个关于[如何`BOOST_STATIC_ASSERT`自行](https://stackoverflow.com/questions/1980012/boost-static-assert-without-boost)实现的问题。

# iphone - Xcode UIWebView 本地 HTML

> ID：15654509
> 
> 赞同：4
> 
> 时间：2013-03-27T08:30:50.787
> 
> 标签：iphone, html, xcode, uiwebview, local

我知道 HTML、javascript、CSS……但我想使用 HTML5 制作原生/混合 iPhone 应用程序，但不使用 PhoneGap 或 Nimblekit 之类的东西。我以前从未编写过真正的（不是网络应用程序）iPhone 应用程序，所以我对 Xcode 真的一无所知。我已经用我找到的教程制作了 UIWebView，但它显示了一个网站（apple.com）。我怎样才能使它显示一个本地文件（index.html）？

我在 (void)viewDidLoad 下的 ViewController.m 中的代码：

```
 [super viewDidLoad];
    NSString *fullURL = @"html/index.html";
    NSURL *url = [NSURL URLWithString:fullURL];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    [_viewWeb loadRequest:requestObj]; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-27T08:44:06.183

您有 2 个选项：

像这样直接插入 HTML：

```
UIWebView *wv = [[UIWebView alloc] init]; 
[wv loadHTMLString:@"<html><body>YOUR-TEXT-HERE</body></html>" baseURL:nil]; 
```

加载项目中存在的 html 文件：

```
UIWebView *wv = [[UIWebView alloc] init];
NSURL *htmlFile = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"test" ofType:@"html"] isDirectory:NO];
[wv loadRequest:[NSURLRequest requestWithURL:htmlFile]]; 
```

如果您希望您的示例正常工作，请将您发送的代码替换为：

```
[super viewDidLoad];
NSURL *htmlFile = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"index" ofType:@"html"]];
[_viewWeb loadRequest:[NSURLRequest requestWithURL:htmlFile]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-27T15:30:08.887

对于斯威夫特 3：

```
@IBOutlet var webView: UIWebView!
override func viewDidLoad() {
super.viewDidLoad()
let URL = Bundle.main.url(forResource: "file name", withExtension: "html")
let request = NSURLRequest(url: URL! as URL)
webView.loadRequest(request as URLRequest)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T08:37:25.917

您可以从项目包中加载本地 html 文件，如下所示

```
NSURLRequest *requestObj = [NSURLRequest requestWithURL:[[NSBundle mainBundle] URLForResource:@"index" withExtension:@"html"]];
[myweb loadRequest:requestObj]; 
```

# php - 保护公众页面

> ID：15654510
> 
> 赞同：0
> 
> 时间：2013-03-27T08:30:56.850
> 
> 标签：php

在我多年来制作的各种 PHP 登录系统中，我尝试了各种不同的方法来保护页面。

我总是使用 .htaccess，它将所有请求路由到 index.php。但是，如果您直接键入某个页面的地址（如果您知道的话），它将加载，这显然不是很安全。

在一台服务器上，我尝试将所有“安全”页面**放在**public_html 之外。这很好用。这意味着您不能再转到“文件夹/产品/product.php”。伟大的！这意味着我可以将对该页面的所有请求放在一个包含中，并完全控制谁查看该页面。

但是，我在另一台服务器上遇到了问题，基本上它不允许我访问`httpdocs`文件夹之外的任何内容。好吧，严格来说，我可以访问，打开 FastCGI 支持，但我得到会话写入错误。将其关闭，然后将 PHP 作为 Apache 模块打开，我得到`basedir restrictions`.

好的。那么我如何确定一个页面**只能**由我访问呢？即使它在公共文件夹中？是否有某种 .htaccess 我可以放在那里，这会阻止任何人从外部访问它？或者如果我对每个文件夹都设置密码，密码是否有效，这是否意味着我仍然可以包含这些文件？

我真的需要一个好的最终解决方案。一种适用于所有服务器的方法，我可以看到发生这种情况的唯一方法是将所有内容保存在公用文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:49:10.830

如果您想禁止访问一个目录及其所有子目录，您可以添加一个`.htaccess`with `deny from all`。只要这不被“更深”的 htaccess 文件覆盖，就足够了。

此外，您可能想检查“大”框架如何构建其代码。（例如 symfony、zend 等）。

进一步阅读：

*   [http://httpd.apache.org/docs/current/howto/htaccess.html](http://httpd.apache.org/docs/current/howto/htaccess.html)
*   [http://www.kavoir.com/2009/01/htaccess-deny-from-all-restrict-directory-access.html](http://www.kavoir.com/2009/01/htaccess-deny-from-all-restrict-directory-access.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:39:16.207

一种方法是做这样的事情，基本上禁止那些作为顶级脚本运行：

在您希望服务的所有端点中，作为您做的第一件事，设置一个全局标志。

```
<?php
$GLOBALS['INSIDE_AN_ENDPOINT'] = true; 
```

然后，在每个包含文件中，只需确保在继续之前设置了该标志。

```
<?php
if (!isset($GLOBALS['INSIDE_AN_ENDPOINT'])) { header('Status: 403 Forbidden'); exit; } 
```

# c# - 如何创建自定义语句

> ID：15654512
> 
> 赞同：0
> 
> 时间：2013-03-27T08:31:03.030
> 
> 标签：c#, function, c#-4.0, operator-overloading

是否可以编写自己的条件语句或重载当前的条件语句？

我真正想做的是

```
object obj = null;

if(obj) // or something like if(1==1 || obj && obj.Value)
    // do something
else
    // do someotherstuff 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:24:09.373

不完全是，但是对于您提到的特定情况，您可以将如何评估特定类的实例重载到`true`/ `false`：

```
// returns true if the object evaluates to true
public static bool operator true(YourClass x)
{
    return x != null;
}

// returns true if the object evaluates to false
public static bool operator false(YourClass x) 
{
    return x == null;
} 
```

这样，你可以这样做：

```
YourClass x = new YourClass();

if (x) // same as "if (x != null)" (defined in operator true)
    // do something
else if (!x) // same as "if (x == null)" (defined in operator false)
    // do someotherstuff 
```

更多信息：
[真运算符 (MSDN)](http://msdn.microsoft.com/en-us/library/6x6y6z4d.aspx)
[假运算符 (MSDN)](http://msdn.microsoft.com/en-us/library/6292hy1k.aspx)

# jsp - 对页面或服务的请求可能需要比平时更长的时间来加载或响应

> ID：15654516
> 
> 赞同：1
> 
> 时间：2013-03-27T08:31:17.647
> 
> 标签：jsp, tomcat6

似乎在 tomcat 空闲一段时间后，对页面或服务的第一次请求可能需要比平时更长的时间来加载或响应。

我们正在处理的一个可能原因是，当它空闲了一段时间后，tomcat 正在从内存中卸载一些缓存信息，并且第一个请求的延迟是由于它再次恢复而造成的。这是一个可能的情况吗？如果没有，是否有人对可能发生的事情有任何建议？如果是这样，有没有办法告诉tomcat不要清除它可能已清除的任何缓存？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:21:52.690

It just connection pool test connections issues.I put testOnBorrow parameter the issues is settled.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:47:13.390

JSP 在第一次被请求时被编译为 servlet，因此 JSP 页面在第一次被请求时会花费更长的时间来加载。但是，这可能不是您的问题，因为您在 tomcat 闲置一段时间时会遇到这种行为。

但是，在[Tomcat 文档](http://tomcat.apache.org/tomcat-7.0-doc/jasper-howto.html)中，我发现有一个`jspIdleTimeout`：

> JSP 在卸载之前可以空闲的时间量（以秒为单位）。零或更小的值表示从不卸载。默认 -1

这可能是您的问题的原因。

根据[这篇文章](http://blog.techstacks.com/2010/12/tomcat-705-beta-is-out.html)，`jspIdleTimeout`是一个初始化参数：

> JSP 卸载由一个新的配置参数管理，`jspIdleTimeout`. 如果您有在该阈值内未被请求的 JSP，则 tomcat 将卸载该 jsp。

# jquery - jquery xml解析中，如何在不同的div，ul部分中检索不同的一组xml数据

> ID：15654517
> 
> 赞同：0
> 
> 时间：2013-03-27T08:31:18.413
> 
> 标签：jquery, xml, parsing

```
$(xml).find("Tutorial").each(function()
{
  $("#output").append($(this).find("Title").text() + "<br />");
  $(this).find("Category").each(function()
  {
    $("#output").append($(this).text() + "<br />");
  });

  $("#output").append("<br />");
}); 
```

上面的 jQuery xml 解析代码在单个 div #output 上显示如下所示的输出

输出：

```
 Silverlight and the Netflix API  //<div id="output">Silverlight and the Netf...</div>
 Tutorials           //<div id="output">Tutorials</div>
 Silverlight 2.0     //<div id="output">Silverlight 2.0</div>
 Silverlight
 C#
 XAML

 Cake PHP 4 - Saving and Validating Data
 Tutorials
 CakePHP
 PHP 
```

但我需要以下面给出的格式显示输出

输出： //...

```
 Silverlight and the Netflix API  //<li>Silverlight and the Netf...</li>
 Tutorials           //<li>Tutorials</li>
 Silverlight 2.0     //<li>Silverlight 2.0</li>
 Silverlight        
 C#
 XAML                     //<li>XAML</li> </ul>

 Cake PHP 4 - Saving and Validating Data     //<ul> <li>Cake PHP 4 - Saving and..</li>
 Tutorials         //<li>Tutorials</li>
 CakePHP
 PHP               //<li>PHP</li> </ul> 
```

注意：上面的代码仅在单个 div 中显示输出，但我需要在一个`<ul>`标记和另一个`<ul>`标记部分中的另一个 xml 元素部分之间获取 xml 元素的第一部分。

请帮助我...

我从[教程中得到这个](http://tech.pro/tutorial/877/xml-parsing-with-jquery)

提前致谢。

关于查尔斯·B·米歇尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:41:43.003

```
$(xml).find("Tutorial").each(function()
{
  var $ul = $('<ul />'); //create a list for each section
  $ul.prepend($(this).find("Title").text() + "<br />");
  $(this).find("Category").each(function()
  {
    $ul.append($('<li />', {text: $(this).text() + "<br />"})); //append list item for every item in section
  });
  $ul.after('<br />')  
}); 
```

这是你想要达到的目标吗？

# python - 在 Python 中查找具有多个主键的列表中的对象

> ID：15654520
> 
> 赞同：0
> 
> 时间：2013-03-27T08:31:21.930
> 
> 标签：python

我有一个 n 个主键的列表：

```
primary_keys = ['pkey1', 'pkey2', ..., 'pkeyn'] 
```

我有一个键/值的字典：

```
kw = {'pkey1': 123, 'pkey2': 456, ..., 'pkeyn': 789, 'other': 'abc', 'values': 'def'} 
```

我有一个实例列表：

```
instances = [obj, obj, obj] 
```

`kw`我想在实例列表中找到其主键与我的字典中的主键值匹配的实例。

有没有一种简单的方法可以在 Python 中做到这一点？

**注意**：我很确定我不会有超过 2 个 PK，但我想允许更多，以防万一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:48:12.197

如果只有一个匹配的实例，这样的事情应该可以工作。

```
next(inst for inst in instances
          if all(get_key_value(inst, pkey) == kw[pkey] for pkey in primary_keys)) 
```

Where`get_key_value`是一个函数，它返回给定实例的给定键的值。如果键是实例的简单属性，则可以使用`getattr`，而如果实例是`dict`-like，则可以使用`inst[pkey]`.

示例用法（实例简化为其主键集）：

```
>>> instances = [{'a': 5, 'b': 3}, {'a': 7, 'b': 8},  {'a': -1, 'b': 19}]
>>> primary_keys = ['a', 'b']
>>> kw = {'a': 7, 'b': 8}
>>> next(inst for inst in instances
...           if all(inst[pkey] == kw[pkey] for pkey in primary_keys))
{'a': 7, 'b': 8} 
```

如果没有实例与键匹配，`StopIteration`则会引发 a，您可以轻松地用`try`块捕获。如果您想保留所有匹配的实例，您可以简单地将上面的内容转换为列表理解：

```
[inst for inst in instances
      if all(get_key_value(inst, pkey) == kw[pkey] for pkey in primary_keys)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:47:43.640

这样的事情怎么样？

```
match = []
for instance in instances:
    if instance.key in kw:
        match.append(instance) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T08:58:01.867

这是一段带有测试的实际工作代码：

```
primary_keys = ['pkey1', 'pkey2', 'pkey3']

kw = {'pkey1': 123, 'pkey2': 456, 'pkey3': 789, 'other': 'abc', 'values': 'def'}

def obj_matches(obj):
    for key in kw.keys():
        if key.startswith('pkey') and getattr(obj, key) == kw[key]:
            return True
    return False

class Foo(object):    
    def __init__(self, pkey1, pkey2, pkey3):
        self.pkey1, self.pkey2, self.pkey3 = pkey1, pkey2, pkey3

instances = [Foo(123, 0, 0), Foo(0, 456, 0), Foo(0, 0, 789), Foo(1, 2, 3)]

matches = []
for obj in instances:
    if obj_matches(obj):
        matches.append(obj)

for m in matches:
    print m.pkey1, m.pkey2, m.pkey3 
```

# gwt - 使用 hashmap 的智能 gwt ListGrid

> ID：15654525
> 
> 赞同：0
> 
> 时间：2013-03-27T08:31:44.077
> 
> 标签：gwt, smartgwt

任何人都知道使用 hashmap 在 smartgwt 中实现 ListGrid。我正在使用 smart gwt 3.0 并寻找带有 hashmap 的实现 ListGrid ...现在 ListGrid 使用表作为记录容器

我尝试实现我自己的 listgrid，但它对我来说太复杂了：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:18:50.577

“使用哈希图”是什么意思？你的意思是每条记录？

您可以轻松地将 HashMap 转换为 SmartGWT 记录，然后将其插入到列表网格中。

```
 RecordList list = new RecordList();
            ListGrid listGrid = new ListGrid();
            listGrid.setData(list);

            Record record = new Record(hashMap);
            list.add(record); 
```

# php - 处理 JSON 字符串中的转义斜杠

> ID：15654526
> 
> 赞同：1
> 
> 时间：2013-03-27T08:31:54.457
> 
> 标签：php, json, slash

我正在尝试获取数据库的json，代码如下

```
 $path["file_name"] = "www.119.com\/assets\/demo\/large\/".$row["file_name"]; 
```

当我转换为 json 对象时，它显示如下。

```
www.119.com\\\/assets\\\/demo\\\/large\\\/demo1.png 
```

我刚刚申请`\`打印特殊字符`/`，但它不起作用。我应用了很多东西来打印特殊字符。将特殊字符转换为 JSON 是否有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:51:36.383

正如其他人所提到的，正斜杠不是字符串中的特殊字符，在 PHP 或 Javascript 中（并且由于 JSON 是从 Javascript 派生的，因此它遵循相同的字符串插值规则）。但是，如果您正在阅读一些 JSON，您可能会认为它是可以原谅的（尽管您应该*始终*RTM ;-)）。

您认为需要转义斜杠的原因是 PHP 和 Javascript 插入多余的正斜杠的方式存在细微差别。考虑以下字符串声明，在 PHP 和 Javascript 中都有效：

```
"AC\/DC" 
```

在 PHP 中，额外的反斜杠被视为文字，因此：

```
echo "AC\/DC"; // outputs AC\/DC 
```

在 Javascript 中，多余的反斜杠被删除，所以：

```
console.log("AC\/DC"); // logs AC/DC 
```

JSON 要求转义正斜杠，但[`json_encode()`](http://php.net/json-encode)会为您处理这种转义。您不需要自己将反斜杠添加到字符串中。而且由于这些额外的反斜杠的插入方式不同，您不能简单地将 JSON 字符串放入您的 PHP 源代码中 - 因为它将被解释为不同的值。

[从 PHP 5.4.0](http://php.net/json-encode#refsect1-function.json-encode-changelog)开始，您可以在 PHP 中提供`JSON_UNESCAPED_SLASHES`标志`json_encode()`以防止它添加反斜杠。但是，这是不必要的，可能会导致严格的 JSON 解析器拒绝数据。

综上所述，在 PHP 中声明字符串的正确方法是：

```
$path["file_name"] = "www.119.com/assets/demo/large/".$row["file_name"]; 
```

作为旁注，您可能还会`http://`在字符串的开头包含什么并通过`$row['file_name']`，[`urlencode()`](http://php.net/urlencode)因为数据似乎是一个 URL：

```
$path["file_name"] = "http://www.119.com/assets/demo/large/".urlencode($row["file_name"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:36:18.447

应该不需要转义斜线，因为它不被视为特殊字符。

您可能需要将 / 替换为 // 因为某些系统在解析/显示时会去除单个斜杠，因此会想到 windows。

# grails - Grails JasperService：如何将参数传递给报告？

> ID：15654529
> 
> 赞同：0
> 
> 时间：2013-03-27T08:32:01.693
> 
> 标签：grails, jasper-reports, jasper-plugin

我有一个简单的 Jasper 报告和一个使用*jasper*插件生成报告的 Grails 应用程序。该报告有一个带有默认值的参数。说，它的名字是`user_id`当我打印报告时，使用默认值，结果还可以。

现在我希望能够将我自己的参数值传递给报告。这是我用来获取报告的代码：

```
import org.codehaus.groovy.grails.plugins.jasper.JasperExportFormat
import org.codehaus.groovy.grails.plugins.jasper.JasperReportDef
...
{   
    // def user_id = 1
    def reportDef = new JasperReportDef(name:'iResume.jasper', fileFormat:JasperExportFormat.DOCX_FORMAT)
    def file = jasperService.generateReport(reportDef).toByteArray()
} 
```

例如，如何将参数传递`user_id`到报告中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:17:21.290

终于设法用这段代码做到了：

```
 params.put("_file", "iResume.jasper")
    params.put("_format", "DOCX")
    params.put("user_id", 1)

    println params

    def reportDef = jasperService.buildReportDefinition(params, request.getLocale(), [])
    def file = jasperService.generateReport(reportDef).toByteArray() 
```

我从 Jasper taglib 和控制器代码中获取了这个。这是一种 Voodoo 编程，因为我不知道最后一个参数`[]`是干什么用的，但它确实有效。如果有人能澄清这里发生了什么，将不胜感激。

# php - 从外部站点运行网站注册过程

> ID：15654533
> 
> 赞同：5
> 
> 时间：2013-03-27T08:32:29.373
> 
> 标签：php, opencart, vbulletin

我正在为两个单独的站点集成登录信息。每个站点都使用自己的数据库和用户表。

我的问题是：如何通过 PHP 执行远程脚本，就好像我将表单提交到网站一样？

我希望一个站点执行登录脚本，该脚本将外部站点登录脚本作为其自己的登录过程的一部分运行。我应该设置所需的会话 cookie 并重定向回当前站点吗？

我正在使用 Opencart 和 vBulletin。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:01:03.827

以下是使用 cURL 发出 POST 请求的方法：

```
//set POST variables
$fields = array(
    'firstname' => 'Joe',
    'lastname' => 'Smith'
);

//urlify the data for the POST
$fieldsString = join('&', array_map('urlencode', $fields);

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL, 'http://somewebsite.com');
curl_setopt($ch,CURLOPT_POST, count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS, $fieldsString);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch);

// view the results
echo $result; 
```

# asp.net-mvc - 将实体框架与温莎城堡一起使用

> ID：15654536
> 
> 赞同：24
> 
> 时间：2013-03-27T08:32:33.160
> 
> 标签：asp.net-mvc, entity-framework, inversion-of-control, castle-windsor

我使用实体框架数据库优先方法为 MVC 应用程序生成 DbContext / POCO 模型。我想避免在我的控制器中依赖 DbContext 以使我能够根据需要切换到另一个持久性提供程序（例如用于单元测试目的）。

为此，我想使用 Castle Windsor IoC 容器。我计划将 DbContext 注册为 IUnitOfWork 服务并注册一个通用 IRepository 服务，我将使用它的实现来访问和使用模型中的聚合根。

我是 Windsor 的新手，无法找到有关在 EF 中使用它的更多信息，我有几个问题：

*   如果我想将 EF 与应用程序分离，这是一种合理的方法吗？
*   如何安装/注册 IUnitOfWork 和通用 IRepository 服务？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-28T20:06:35.840

所以，一些结论。我想我会写下来，以防其他人尝试一起使用/单元测试 EF、Windsor 和 MVC。

首先，由于 DbContext 实现了 Repository 和 Unit of Work 模式，您需要考虑这些实现是否会提供服务，或者您是否需要创建自己的实现。

我选择创建自己的存储库，遵循 DDD 模式：每个聚合根一个。原因：封装查询代码，防止泄露到应用层，测试应用控制器时更容易mock。我创建了一个基于`IRepository<TEntity>`. 那里有很多例子。我发现这是一个很好的：[http ://architects.dzone.com/articles/implementing-repository](http://architects.dzone.com/articles/implementing-repository)

另一方面，我决定放弃 IUnitOfWork 服务，而选择默认实现。但是，我创建了一个 IDbContext 抽象（不知道为什么微软自己不这样做），以便在测试 Repository 服务时可以模拟 DbContext。

我只给了 IDbContext 我想在存储库中使用的 DbContext 成员。所以：

```
public interface IDbContext: IDisposable
{
    Database Database { get; }
    DbEntityEntry Entry(object entity);
    IDbSet<TEntity> Set<TEntity>() where TEntity : class;
    int SaveChanges();
} 
```

然后，我为我的 IDbContext 和 IRepository 服务创建了 Windsor 工具和安装程序：

```
public class EntityFrameworkFacility: AbstractFacility
{
    protected override void Init()
    {
        Kernel.Register(Component.For<IDbContext>()
                                 .ImplementedBy<MyEntities>()
                                 .LifestylePerWebRequest(),
                        Component.For(typeof(IRepository<>))
                                 .ImplementedBy(typeof(Repository<>))
                                 .LifestylePerWebRequest());
    }
}

public class PersistenceInstaller : IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        container.AddFacility<EntityFrameworkFacility>();
    }
} 
```

最后一步是扩展实体框架上下文类以实现 IDbContext，并隐藏 Set() 方法以返回 IDbSet 而不是 DbSet：

```
public partial class MyEntities : IDbContext
{
    public new IDbSet<TEntity> Set<TEntity>() where TEntity : class
    {
        return base.Set<TEntity>();
    }
} 
```

有了所有这些（以及 Windsor 文档中说明的 ControllerFactory 注册），让 Windsor 根据需要将 IRepository 对象（或 IDbContext）注入控制器构造函数变得微不足道：

```
public ControllerBase(IRepository<Contact> repo)
{
    _repo = repo;
} 
```

在存储库单元测试中，可以使用模拟 IDbContext 支持真实的存储库实例：

```
mocks = new MockRepository();
context = mocks.StrictMock<IDbContext>();
repo = new Repository<Contact>(context); 
```

在 Controller 单元测试中，可以使用模拟存储库：

```
mocks = new MockRepository();
repo = mocks.StrictMock<IRepository<Contact>>();
ContactController controller = new ContactController(repo); 
```

# linux - 仅 tar 目录中的文件

> ID：15654538
> 
> 赞同：0
> 
> 时间：2013-03-27T08:32:38.200
> 
> 标签：linux, archive, tar

如何仅 tar 目录中存在的文件。我曾尝试`tar -cvf /tmp/test.tar /tmp/mylog.doc`在主目录中，但是当我解压它时，内容`tmp`也包含在目录中。我只需要该文件`mylog.doc`存在于 tar 文件中。我看到类似的查询 [Tarring only the files of a directory](https://stackoverflow.com/questions/3710146/tarring-only-the-files-of-a-directory)。但无法从中获得太多帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T08:34:28.123

使用`-C`命令行参数来指示您想要工作的目录。然后，您可以使用您包含的相对于该目录的文件名。

```
tar -cvf /tmp/test.tar -C /tmp mylog.doc 
```

请注意，这不适用于 tar 文件本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:12:33.560

```
cd sourcedir ; tar cvf archive.tar ./file_to_tar 
```

因为使用 "/path/to/file" 或 "./path/to/file" : 将在生成的 tar 文件中添加 "path/to/" （除非特定（也可能是不可移植的）选项告诉 tar 否则）

注意：一些不太老的生产系统在提取时仍然无法摆脱前导的“/”。

在那些“不太老”的系统上：

```
tar cvf /tmp/hosts-backup.tar /etc/hosts
cd /secure/location
tar xvf /tmp/hosts-backup.tar 
```

将*覆盖*文件 /etc/hosts，而不是在 /secure/location 下输出“./etc/hosts”文件！（就像大多数“最近”的 tar 现在所做的那样：他们现在都默默地忽略尾随的“/”，使路径相对而不是绝对，这是 99.9% 的人想要的）

我最近被这个烧毁了：想要提取一个日志，该日志最终覆盖了原始位置（因此覆盖了那里更新的日志文件）。在系统上第一次使用 tar 之前，请务必检查这一点。（有一些解决方法，但不太简单：chroot 和其他命令，例如“sar”）

# php - 如何刷新 div 内的查询

> ID：15654539
> 
> 赞同：4
> 
> 时间：2013-03-27T08:32:43.203
> 
> 标签：php, javascript, jquery, mysql

我正在使用 JavaScript 刷新`div`内容并加载一个 PHP 文件，其中包含从 MySQL 获取数据的查询。

这是我的 jQuery 代码：

```
<script type="text/javascript">
    var auto_refresh = setInterval(
    function ()
    {
    $('#random_notes').load('include/blocks/random_stories.php').fadeIn("slow");
    }, 2000); // refresh every 10000 milliseconds
</script>
<div id="random_notes" class='random'>s</div> 
```

这是我的 PHP 文件：

```
<?php
    include "../../cp/config.php";
    $query = mysql_query("SELECT title FROM stories ORDER BY RAND()");
    $random_story = mysql_fetch_object($query);
    echo $random_story->title;
?> 
```

页面加载并显示一行。刷新不会从数据库中获取另一行。我错过了什么？

是否有另一段很好的代码可以做同样的事情？每当我做任何事情时，这段代码都需要清理缓存。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T11:50:57.657

我刚刚测试了你的逻辑，它对我来说很好，这就是我所拥有的

```
<div id="random_notes">
sdas
</div>

<script>
$(document).ready(function(){
    setInterval(function() {
        $('#random_notes').load('include/blocks/random_stories.php').fadeIn("slow");
    }, 5000)
});
</script> 
```

这应该适合你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T08:35:20.200

您需要在 PHP 中遍历结果

```
while( $random_story = mysql_fetch_object($query) ) {
    echo $random_story->title;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:37:51.467

好的，我得到了修复

```
<script>
 $(document).ready(function() {
     $("#random_notes").load("include/blocks/random_stories.php");
   var refreshId = setInterval(function() {
     $("#random_notes").load("include/blocks/random_stories.php");
   }, 2000);
   $.ajaxSetup({ cache: false });
});
</script>

<div id="random_notes" class='random'>s</div> 
```

这是缓存问题我只是关掉缓存现在一切正常

# jsp - Struts2 如果标签不评估

> ID：15654547
> 
> 赞同：-1
> 
> 时间：2013-03-27T08:33:28.560
> 
> 标签：jsp, if-statement, struts2, iterator, ognl

我有这段代码遍历某个对象集合，我想`instanceof`对每个元素执行类型检查（或）运算符。但是在我的`<s:if>`，它似乎没有评估。我错过了什么？

```
<s:iterator value = "myQuestions" var = "q"  status="key">

        <s:checkbox name="myQuestions[%{#key.index}].chosen" />
        <s:property value = "%{myQuestions[#key.index].question}"/> 

    <s:if test ="%{myQuestions[#key.index].getClass().simpleName} == 'Question'" > 
            THIS IS A QUESTION.
    </s:if> 

</s:iterator> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:31:39.310

实现 if 循环功能的更好方法是在 Action 层上编写一个公共函数，该函数返回一个字符串值（类名）并将 Question 类型作为参数。一些相关的例子可能是这样的

```
public String getClassName(Ouestion question){
  if(question instanceof SomeDerivedQuestion){
    return "someDerivedQuestion";
  }
  //other code comes below
} 
```

现在在 JSP 中你可以做这样的事情

```
<s:if test="%{getClassName(myQuestions[#key.index]).equals('someDerivedQuestion')}> 
  THIS IS A DERIVED QUESTION.
</s:if> 
```

最好让 JSP 处理应用程序的表示部分并覆盖 Java 服务器端所需的编码

# c# - 返回类型的差异

> ID：15654551
> 
> 赞同：0
> 
> 时间：2013-03-27T08:33:46.310
> 
> 标签：c#, variance

**编辑：** 也许这是一个更清晰、更明确的问题表述：

在一些泛型接口`IInterface<T>`中，我想返回一个泛型类型的对象，其中一个类型参数应该是`IInterface<T>`.

```
public class OtherType<T> {}
public interface IInterface<T>
{
    OtherType<IInterface<T>> Operation();
}
public class Impl : IInterface<int>
{
    public OtherType<IInterface<int>> Operation()
    {
        return new OtherType<Impl>();
    }
} 
```

由于`Impl`implements `IInterface<int>`，对我来说我可以这样使用它似乎是合理的。然而，似乎我不能，我得到编译器错误

> 无法将表达式类型转换`OtherType<Impl>`为返回类型`OtherType<IInterface<int>>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:45:19.480

`OtherType<IInterface<int>>`并不意味着“实现” - 它有点意味着“是`OtherType`具有泛型类型参数的类型`Interface<int>`，但这不是你所说的。

如果您只想确保返回类型实现`IInterface<int>`然后将其设置为返回类型：

```
public interface IInterface<T>
{
    IInterface<T> Operation();
}

public class Impl : IInterface<int>
{
    public <IInterface<int>> Operation()
    {
        return new OtherType();
    }
} 
```

在哪里

```
public class OtherType : IInterface<int>
{} 
```

这意味着您可以返回任何实现`IInterface<int>`.

否则，您可以在调用使用泛型类型约束时对其进行更多限制：

```
public interface IInterface<T>
{
    TRet Operation<TRet>() where TRet : IInterface<T>;
}

public class Impl : IInterface<int>
{
    public TRet Operation<TRet>() where TRet : IInterface<int>
    {
        return new OtherType();
    }
} 
```

这意味着您可以约束操作以返回一个特定的类，该类又要实现`IInterface<int>`.

它将被称为：

```
Impl i = new Impl();
OtherType x = i.Operation<OtherType>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T17:45:30.480

问题是这`OtherType<T>`是一个类，泛型类在 C# 中不允许协变/逆变。通用`interfaces`的，只要`out`类型不出现在任何输入位置，并且`in`类型不出现在任何输出位置。在您的代码示例中，您可以通过引入一个标记为协变的附加接口来编译它，然后更改您的返回类型。

```
public interface IOtherType<out T> {} // new
public class OtherType<T> : IOtherType<T> { }

public interface IInterface<T>
{
    IOtherType<IInterface<T>> Operation(); // altered
}
public class Impl : IInterface<int>
{
    public IOtherType<IInterface<int>> Operation()
    {
        return new OtherType<Impl>();
    }
} 
```

鉴于您的代码片段中的细节有限，这是否真的适合您的用例与您的附加方法定义是只有您才能知道的。

# ios - 为 NSFetchedResultsController 的关系创建谓词的正确方法

> ID：15654566
> 
> 赞同：0
> 
> 时间：2013-03-27T08:34:23.623
> 
> 标签：ios, objective-c, core-data

如果我有一张专辑与歌曲的一对多关系，那么设置我的 fetchedresultscontroller 以显示给定专辑的歌曲的正确方法是什么？

是我的实体歌曲和我的谓词：

```
[NSPredicate predicateWithFormat:@"album == %@", albumTitle] 
```

还是我的实体专辑具有不同的谓词，以某种方式延伸到歌曲？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:39:13.733

假设您的歌曲具有属性`album`，而后者又具有属性`title`：

```
[NSPredicate predicateWithFormat:@"album.title == %@", albumTitle] 
```

或者如果你想`malmo`匹配`Malmö`，你需要：

```
[NSPredicate predicateWithFormat:@"album.title CONTAINS[cd] %@", albumTitle] 
```

其中`c`表示*不区分大小写*的搜索，并`d`表示不区分变音符号*的*搜索。

有关详细信息，请参阅[谓词格式字符串语法文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html)。

# python - pymongo 在正则表达式中的指定字符后停止扫描

> ID：15654567
> 
> 赞同：0
> 
> 时间：2013-03-27T08:34:23.720
> 
> 标签：python, mongodb, python-2.7, pymongo

我有这样的mongodb记录：

```
{ "_id" : "age_calculator-python|513216a576b99c26fb004e4d", "status" : "BADGE" }
{ "_id" : "age_calculator|5127d91376b99c457e000246", "status" : "BADGE" }
{ "_id" : "age_calculator|51381ef276b99c5b16002330", "status" : "BADGE" }
{ "_id" : "based|514f525c76b99c2ff7000398", "status" : "BADGE" }
{ "_id" : "binary_search-javascript|514f525c76b99c2ff7000398", "status" : "BADGE" } 
```

我想使用正则表达式（$regex）查找只有“age_calculator”的记录。
我做了这样的事情：

```
db.collection.find({status:'BADGE', "_id" : {'$regex': '^age_calculator'}) 
```

我只想得到结果，`age_calculator`但上面的查询甚至包括`age_calculator-python`。

如何克服这一点？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:36:20.293

在正则表达式的末尾插入一个美元，意思是“结束”：

```
db.collection.find({status: 'BADGE', '_id': {'$regex': '^age_calculator$'}) 
```

虽然，公平地说，匹配一个正则表达式开始结束而没有任何时髦的匹配更像是一个精确匹配：

```
db.collection.find({status: 'BADGE', '_id': 'age_calculator'}) 
```

正如 Sammaye 指出的那样，您还可能意味着以下内容：

```
db.collection.find({status: 'BADGE', '_id': {'$regex': '^age_calculator\\|'}) 
```

这将匹配以“age_calculator|”*开头的任何内容，包括管道。*

# python - 使用 python 脚本加载地图数据类型列作为使用 hive 的 reducer

> ID：15654573
> 
> 赞同：0
> 
> 时间：2013-03-27T08:34:33.423
> 
> 标签：python, amazon-s3, hive, emr

在 Hive 表的一列中，我想存储键值对。Hive 的复杂数据类型映射支持该构造。

（这只是我想要做的一个玩具示例，我还有更多列要像这样压缩）

所以我创建了一个这样的表：

```
hive>DESCRIBE transaction_detailed;
OK
id STRING
time STRING
Time taken: 0.181 seconds

hive>DROP TABLE IF EXISTS transactions;
hive>CREATE EXTERNAL TABLE transactions(
    id STRING,
    time_map MAP<STRING, INT>
    )
partitioned by (dt string) 
row format delimited fields terminated by '\t' collection items terminated by ',' map keys terminated by ':' lines terminated by '\n' 
location 's3://my_loaction/transactions/'; 
```

然后我尝试使用代码中描述的reducer加载地图列：time_map的结构看起来像：{“min”：time，“max”：time，“average”：time，“total”：时间}

```
hive>FROM( FROM transaction_detailed 
MAP transaction_detailed.id, transaction_detailed.time
USING "python unity mapper -- splits the same thing out as it takes it"
AS id, time
cluster by id) transaction_time_map
insert overwrite table transactions partition(dt="2013-27-03")
REDUCE transaction_time_map.id, transaction_time_map.time
USING "python reducer which takes time_stamp sequence for a single id and summarizes them using min, max, average and total and supposed to insert into map"
as id, time_map; 
```

但我收到这样的错误：

```
FAILED: Error in semantic analysis: Line 6:23 Cannot insert into target table because column number/types are different "two_day": Cannot convert column 8 from string to map<string,int>. 
```

如何使用我的 python reducer 加载到地图列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:39:44.440

我认为上述问题的答案是`str_to_map(text[, delimiter1, delimiter2])`在 hive 中使用函数。

# highcharts - highcharts rangeSelectorZoom 标签

> ID：15654582
> 
> 赞同：3
> 
> 时间：2013-03-27T08:35:01.517
> 
> 标签：highcharts, highstock

我想将 highcharts rangeSelectorZoom 更改为另一个文本。我已经尝试了两种方法，但我没有得到结果！

1.

```
 Highcharts.setOptions({
    lang: {
        rangeSelectorZoom: 'myzoom'
    }
}); 
```

2.

```
 lang:{
        rangeSelectorZoom: 'myzoom'
        }, 
```

请帮我...

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T13:33:02.433

您应该使用第一个选项，并且我认为它可以正常工作：

```
 Highcharts.setOptions({
            lang:{
                rangeSelectorZoom:'myownzoom'
            }
        }); 
```

[http://jsfiddle.net/rqs2M/](http://jsfiddle.net/rqs2M/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:40:32.107

我不确定 rangeSelectorZoom 是什么，但我只能在 highcharts API 中找到两个选项：http: [//api.highcharts.com/highcharts#lang.resetZoom](http://api.highcharts.com/highcharts#lang.resetZoom)

```
lang:{
    resetZoom:"reset zoom",
    resetZoomTitle:"Reset zoom level 1:1"
} 
```

其中任何一个都做你想做的事吗？如果没有，请向我们提供有关您要更改的内容的更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-15T13:40:53.343

```
Highcharts.setOptions({
    lang:{
        resetZoom:'ResetZoom!'
    }
}); 
```

# erlang - Erlang 进程的消息接收率

> ID：15654583
> 
> 赞同：3
> 
> 时间：2013-03-27T08:35:06.293
> 
> 标签：erlang

Erlang VM 中是否有针对每个进程接收到的消息的计数器？我需要计算工人的消息率。

如果不是，您将如何测量和计算代码中的消息率​​？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T08:55:47.527

您可以使用：

```
erlang:process_info(Pid, message_queue_len) 
```

结果你会得到类似的东西：

```
{message_queue_len, Number} 
```

但也许这不是你要找的。

如果您使用的是 OTP，您可以像 @Pascal 所说的那样使用观察者，或者您可以将计数器保持在状态，并在每次处理呼叫、信息或演员时更新它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T15:09:36.363

如果您的流程完全符合 OTP（例如，gen_server、gen_event、gen_fsm），您可以使用它[`sys:statistics/2,3`](http://www.erlang.org/doc/man/sys.html#statistics-2)来跟踪 messages_in/messages_out 速率。根据我从文档中收集的信息，您使用 Flag = true 调用它，等待一段时间，然后使用 Flag = get 再次调用它（不确定您是否必须再次使用 Flag = false 调用它）。

话虽如此，如果没有 OTP 合规性，它相对容易做到。设置一个计时器（我建议`erlang:start_timer`在计时器模块上）在 N 毫秒后向您的进程发送一条消息，并计算您收到的消息数量。当您收到来自计时器的消息时，将计数除以 N 得到每毫秒的速率（乘以 1000 得到每秒的速率）。冲洗并重复。

如果您从回调模块执行此操作，或者使用处理各种消息的基于接收块的进程（在这种情况下无论如何都应该将其转换为回调形式），这会变得有点乏味，所以我不完全推荐它。因此，如果您正在使用 OTP 流程，请使用 sys 模块以确保您的理智。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T09:44:33.547

如果您已经构建了 OTP 应用程序，那么我想您可以使用观察者应用程序。

只需在执行 OTP 应用程序的 VM 中运行 observer:start() 即可查看。

# css - @font-face css for Futura Bk BT Bok.ttf 不工作

> ID：15654586
> 
> 赞同：-2
> 
> 时间：2013-03-27T08:35:08.133
> 
> 标签：css, fonts, font-face

如何通过 css @font-face 规则将“Futura Bk BT Bok.ttf”字体添加到我的网站，我的 css 开始像..

```
 @font-face
{

font-family: abcd;

src:url(Futura Bk BT Bok.ttf) format('truetype');

} 

body{

margin:0;

padding:0;

font-family:abcd;

font-size:100%;

} 
```

但这不起作用.. :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:01:26.927

您的 scr: url() 路径看起来不正确。

它应该是字体文件的路径 - 文件名中不应有空格。

尝试重命名您的 ttf 文件并更正 src 声明中的路径。

另外，请注意并非所有浏览器都支持 ttf，因此请确保在支持此格式的浏览器中对其进行测试（在此处查看浏览器支持：http: [//caniuse.com/ttf](http://caniuse.com/ttf)）

# mysql - 如何个性化 ACL 的表名？

> ID：15654589
> 
> 赞同：0
> 
> 时间：2013-03-27T08:35:24.677
> 
> 标签：mysql, symfony, acl

在我的数据库模式中，我通常对所有表使用标准化的命名系统。Symfony，我猜，ACL 本身，在他的模式中为他的表使用一个特定的名称。

这是表的默认名称：

*   acl_security_identities
*   acl_classes
*   acl_object_identities
*   acl_object_identity_ancestors
*   acl_entries

**有什么办法可以更改这些表的名称吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-19T09:57:29.513

**是的！**

可以自定义表名！

[http://symfony.com/doc/2.8/reference/configuration/security.html](http://symfony.com/doc/2.8/reference/configuration/security.html)

```
 acl:
    tables:
        class:                acl_classes
        entry:                acl_entries
        object_identity:      acl_object_identities
        object_identity_ancestors:  acl_object_identity_ancestors
        security_identity:    acl_security_identities 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:50:21.803

不。

除非您想分叉 Symfony 的安全组件并将其破解为您的需要。如果是这样，这是一个很好的起点： [https ://github.com/symfony/Security/tree/master/Acl/Resources/schema](https://github.com/symfony/Security/tree/master/Acl/Resources/schema)

# c# - 如何在事件方法中捕获异常

> ID：15654590
> 
> 赞同：-3
> 
> 时间：2013-03-27T08:35:24.943
> 
> 标签：c#, winforms, exception-handling

当我为 TextBox 制作 LostFocus 事件时，`NotImplementedException()`添加了一个。我如何捕捉到这个异常？我的代码是：

```
void marks_LostFocus(object sender, EventArgs e)
{
    throw new NotImplementedException();
} 
```

已编辑

我很抱歉不清楚我想问的问题是，当我创建 lostFocus 事件时，VS 会自动添加这一行。从学术上讲。我在哪里可以捕捉到这个异常以及它的用途。为什么VS会自动添加这一行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:37:29.330

将它包裹在[try/catch](http://msdn.microsoft.com/en-US/library/0yd65esw%28v=vs.80%29.aspx)周围？

```
void marks_LostFocus(object sender, EventArgs e)
{ 
    try
    {
        throw new NotImplementedException();
    }
    catch(Exception ex)
    {
        // handle ex
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:38:01.557

只有触发事件的方法才能捕获订阅者方法抛出的所有未处理的异常。您还可以使用一个备用解决方案：

订阅[Application.ThreadException](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.threadexception.aspx)事件。

在 Program.cs 中：

```
Application.ThreadException += OnThreadException

private static void OnThreadException(object sender, ThreadExceptionEventArgs e)
{
    MessageBox.Show(e.Exception.ToString());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T08:39:51.570

首先 - 你可以实现这个方法。

但是，如果您想处理未处理的异常，您可以尝试使用您的或任何其他[全局异常处理程序的](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/0412ffc3-5065-4224-ac4f-b40660fd060b/)[未处理异常事件](http://msdn.microsoft.com/library/system.appdomain.unhandledexception.aspx)`AppDomain`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T08:45:15.773

*从*处理程序本身捕获这个异常是没有意义的——通过调用代码来管理它可能是有意义的。但是，您似乎根本不需要它。鉴于我在其中看到的上下文，它完全没有任何用途 - 您可以通过删除代码来防止此异常。

您在此块中所做的是实现您自己的逻辑。也就是说，你实现它。

# jruby - aspectj 防止 loadtime 递归编织

> ID：15654604
> 
> 赞同：0
> 
> 时间：2013-03-27T08:36:10.977
> 
> 标签：jruby, aspectj, liferay-6

稍微概括一下问题：
我们正在为我们的网站使用 liferay 门户解决方案，并添加一些功能并修复我们在门户中使用方面的错误。它本身的方面的数量在启动时不是问题，但它们有时开始编织的类加载器的数量是。
Liferay 使用 JRuby 对 CSS 文件执行 SASS 评估。每个被处理的 CSS 文件都有自己的 jruby 类加载器（我对 jruby 的了解有限，所以我不知道这是否是它应该工作的方式）。其结果是，如果同时执行大量 css/jruby 操作，内存可能会跳跃 1.5GB 并导致 JVM 内存不足。如果 JVM 在这个初始跳转中幸存下来，或者如果没有同时处理很多文件，那么内存使用会在一段时间后恢复正常。所以问题显然是由编织过程的内存开销引起的

在试图找到一个解决方案时，我想出了几个可以做的改变。但我不确定哪个更好，以及某些选项是否可行。

1.  有没有办法排除一些类加载器被aspectj处理。在这种情况下，这将是 jrubyclassloader（从我搜索后发现的内容来看，我认为这是不可能的）
2.  jruby 是否可以以某种方式限制为仅使用 1 个类加载器，因为这会减少编织开销，如果这意味着 jruby 只能进行串行处理，那么这将不是问题
3.  递归地限制由 aspectj 编织的类（不要认为在 aop.xml 中排除是要走的路，而是分别为每个方面添加 cflow 限制）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:25:17.843

我很确定 aop.xml 文件中的配置是可行的方法。请参阅[https://www.eclipse.org/aspectj/doc/next/devguide/ltw-configuration.html](https://www.eclipse.org/aspectj/doc/next/devguide/ltw-configuration.html)您将需要使用排除选项。

文档中的一个示例：

```
 <weaver options="-verbose">
          <!-- Weave types that are within the javax.* or org.aspectj.*
               packages. Also weave all types in the foo package that do
               not have the @NoWeave annotation. -->
          <include within="javax.*"/>
          <include within="org.aspectj.*"/>
          <include within="(!@NoWeave foo.*) AND foo.*"/>

          <!-- Do not weave types within the "bar" pakage -->
          <exclude within="bar.*"/>

          <!-- Dump all types within the "somepack" package,
               both before are after they are woven,
               to the "./_ajdump" folder on disk (for diagnostic purposes) -->
          <dump within="somepack.*" />
        </weaver> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-07T21:05:15.323

对于谁可能需要1的答案。问题是，您可以使用`aj.weaving.loadersToSkip`参数来跳过类加载器。您需要将此参数作为 vm 参数传递。

例如：

```
-Daj.weaving.loadersToSkip=weblogic.utils.classloaders.GenericClassLoader 
```

# javascript - Node.js 同步加载 JS 变量的最佳方式

> ID：15654609
> 
> 赞同：0
> 
> 时间：2013-03-27T08:36:23.863
> 
> 标签：javascript, json, performance, node.js

我想在存储在 /data/projects.js （或 .json 取决于问题的答案）中的 server.js 文件中加载一些数据。

我看到两种可能性：

1.  使用 readFileSync：

    ```
    function readJsonFileSync() {
        var file = fs.readFileSync(__dirname + '/data/projects.json', 'utf8');
        return JSON.parse(file);
    } 
    ```

    和 projects.json 是一个传统的 json 文件

2.  使用要求：

    ```
    function readJsonFileReq() {
        return require('./data/projects.js')['projects'] ;
    } 
    ```

    与 projects.js 包含：

    ```
    exports.projects = {
         // My variable
    }; 
    ```

问题是哪一个是最好的：

*   在性能方面？
*   在节点可写性/哲学方面？（例如 require() 为模块保留）

我猜解决方案 2 更好，因为 require() 可能针对读取 JS 代码进行了优化，而解决方案 1 必须读取文件，然后解析它，但解析它可能比执行它便宜。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T08:45:51.627

在 node.js 中使用同步 fs 函数的主要原因是在应用启动之前加载文件。最常见的原因是加载配置文件。在这种情况下，性能并不重要。

`readFileSync`话虽如此，和之间的主要区别在于`require`require 将缓存文件的内容。我见过无数次`require`用于加载 json 文件，所以我不认为它是保留给模块的（不过，请务必包含`.json`在文件路径中）。

最后别忘了，`module.exports = {..}`如果你想写的话，你可以使用`var projects = require('./data/projects.js');`.

**编辑**：作为参考，我检查了 node.js 的源代码，并且怀疑在内部`require`使用`readFileSync`：

[https://github.com/joyent/node/blob/master/lib/module.js#L472](https://github.com/joyent/node/blob/master/lib/module.js#L472)

```
// .js 的原生扩展
Module._extensions['.js'] = function(module, filename) {
  var content = NativeModule.require('fs').readFileSync(filename, 'utf8');
  module._compile(stripBOM(内容), 文件名);
};

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:01:27.553

根据[http://nodejs.org/api/modules.html#modules_file_modules](http://nodejs.org/api/modules.html#modules_file_modules)，

> .js 文件被解释为 JavaScript 文本文件，而 .json 文件被解析为 JSON 文本文件。.node 文件被解释为使用 dlopen 加载的已编译插件模块。

所以我会这样做，`require("./data/projects.json")`因为它是最短的，并且可能优化得很好。

Laurent 说得很好：require 的结果被缓存了。这可能是一个优点或缺点。如果您在应用程序启动时只读取一次文件，那没关系。

这就是节点的工作方式（除了缓存结果）：

```
Module._extensions['.json'] = function(module, filename) {
 var content = NativeModule.require('fs').readFileSync(filename, 'utf8');
 try {
  module.exports = JSON.parse(stripBOM(content));
 } catch (err) {
   err.message = filename + ': ' + err.message;
   throw err;
 }
}; 
```

[https://github.com/joyent/node/blob/master/lib/module.js#L479](https://github.com/joyent/node/blob/master/lib/module.js#L479)

# ajax - jquery函数的Ajax回调

> ID：15654611
> 
> 赞同：1
> 
> 时间：2013-03-27T08:36:32.527
> 
> 标签：ajax, jquery, asp.net-mvc-4, asp.net-ajax

我正在开发一个 ASP.NET MVC 4 项目，它是某种评估工具。在我的同事看来，我正在用从数据库请求的数据填充数据表。在第一列中，我显示了姓名，在第二列中，我正在显示指向他们个人文件的链接。该视图位于名为“PersoonlijkeFichePartial”的部分中，因此当我单击数据表中的链接时，它必须在数据表下的 div 中打开部分。我通过 ajax 调用来做到这一点。但是我的结果 div 是空的，我不想在我的视图中看到它，所以我用 jquery 做了。现在的问题是，当我单击数据表中的链接（使用 ajax 调用）时，结果 div 不会显示自己（我需要某种回调？）

**编辑** 我不需要发布我的控制器操作，如果我剪切隐藏结果 div 的 jquery 代码，部分视图是可见的（当我点击我的表中的链接时），但我需要代码来隐藏那个 div ，所以在有人点击我表中的链接之前它不存在。

这是代码：

```
<div class="ContentDiv">
    <table id="table_id" class="display">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Naam)
                </th>
                <th>Persoonlijke Fiche
                </th>
                <th>Functiebeschrijving
                </th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                    @Html.DisplayFor(modelItem => item.Naam)
                    <td>
                        @Ajax.ActionLink("Persoonlijke Fiche", "PersoonlijkeFichePartial", new { account = item.Account }, new AjaxOptions { UpdateTargetId = "result"})
                    </td>
                    <td>
                        @Html.ActionLink("Functiebeschrijving", "Details", new { account = item.Account })
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
<div id="generate" class="ContentDiv">
    <div id="result"></div>
</div>

@section scripts {
    <script type="text/javascript" src="~/Scripts/jquery.dataTables.js"></script>
    <script>
        $(document).ready(function () {
            $('#table_id').dataTable({
                "aoColumns": [{ "bSortable": true }, { "bSortable": false }, {     "bSortable": false }]
            }
                );
        });
        $(function () {
            if ($("div#result").html() == "") {
                $("div#generate").hide();
            }
        });
    </script>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:23:35.563

尝试像这样编辑您的代码：

```
<script>
        $(document).ready(function () {
            $('#table_id').dataTable({
                "aoColumns": [{ "bSortable": true }, { "bSortable": false }, {     "bSortable": false }]
            });
            toggleResultDiv()
        });

        function toggleResultDiv() {
            if ($("div#result").html() == "") {
                $("div#generate").hide();
            }
            else $("div#generate").show();
        }
    </script> 
```

并像这样更改您的 ajax 调用：

```
@Ajax.ActionLink("Persoonlijke Fiche", "PersoonlijkeFichePartial", new { account = item.Account }, new AjaxOptions { UpdateTargetId = "result", OnSuccess = "toggleResultDiv"}) 
```

您需要调用显示或隐藏 div 的函数。在你的情况下，它只被调用一次并且总是隐藏`div#generate`

# java - 错误 - “需要数组，但 LinkedList 在java中找到”

> ID：15654612
> 
> 赞同：0
> 
> 时间：2013-03-27T08:36:36.143
> 
> 标签：java, arrays, linked-list, required

我是 JAVA 新手，我正在尝试使用 java.util.LinkedList 库和动态数据类型（类）在 java 中实现一个简单的链接列表代码

代码如下 -

```
import java.util.LinkedList;
import java.util.Scanner;

//defining a custom data-type (class)
class LLObj{
static int NodeInt;
static char NodeChar;
LLObj(int x, char y){
    NodeInt = x;
    NodeChar = y;
    }
}

//main class    
public class LL2{

static int ChosenOption, TempInt, NodeCounter, TempCounter;
static char TempChar;

//creating scanner object
static Scanner ScannerObj = new Scanner(System.in);

//creating a link list
static LinkedList<LLObj> list = new LinkedList<>();

//main function
public static void main(String[] args){

    NodeCounter = 0;

    //driving menu
    for(;;){
    System.out.println("Enter 1 to add a node to linked list");
    System.out.println("Enter 2 to print the current list");
    ChosenOption = ScannerObj.nextInt();
    if(ChosenOption == 1){
        AddNew();
        }
    else if(ChosenOption == 2){
        PrintList();
        }
    else{
        System.out.println("Wrong Input. Try again!");
        }
    }
}

//AddNew function
public static void AddNew(){

    //getting input
    System.out.println("Enter integer");
    TempInt = ScannerObj.nextInt();
    System.out.println("Enter character");
    TempChar = ScannerObj.next().charAt(0);

    //Making a temperory node
    LLObj temp = new LLObj(TempInt,TempChar);

    //adding node to the list
    list.addLast(temp);
    }

public static void PrintList(){
    TempCounter = 0;
    while(TempCounter < NodeCounter){
        System.out.println(list[TempCounter].NodeInt);
        System.out.println(list[TempCounter].NodeChar);
        System.out.println("");
        TempCounter++;
        }
    }       
} 
```

编译时收到的错误是 - “需要数组，但找到了 LinkedList”

请帮助我 1\. 理解为什么会产生这个错误 2\. 消除这个错误

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T08:39:54.977

A`LinkedList`没有`[]`运算符：

```
System.out.println(list[TempCounter].NodeInt);
                     //^^incorrect^^ 
```

使用[`LinkedList.get(int index)`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html#get%28int%29)或[增强`for`循环](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.2)遍历`list`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T08:57:35.667

`list.get(TempCounter).NodeInt`改为使用

# android - Android 上的默认 PCM 格式

> ID：15654613
> 
> 赞同：1
> 
> 时间：2013-03-27T08:36:38.253
> 
> 标签：android, audio, default

有谁知道，这是否是大多数 Android (ARM) 设备上的默认 PCM 格式？

```
2 channels
16 bit
Little Endian 
```

底层的“tinyalsa”可以处理

```
SNDRV_PCM_FORMAT_S32_LE
SNDRV_PCM_FORMAT_S8
SNDRV_PCM_FORMAT_S24_LE
SNDRV_PCM_FORMAT_S16_LE 
```

但我想不出安卓使用不同的配置（？）。

Little Endian 肯定会在 ARM 设备上使用。

那2个频道呢？我发现没有办法播放单声道，所以我认为它总是转换成 2 声道。

是否有支持多通道的设备？

我对这些东西很陌生。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:08:12.723

一般来说，我会说 16 位小端，是的。通道的数量取决于应用程序的请求。尽管某些设备将以立体声配置运行部分/所有输出线程，这与您在测试中发现的类似。如果您要输出到单声道接收器（例如，许多设备只有一个扬声器），通常这将通过模拟编解码器或 DSP 混合回单声道。

> 底层的“tinyalsa”可以处理

许多设备不使用 libtinyalsa。它们对内核空间 ALSA 驱动程序有自己的用户空间接口。例如，最近的 Qualcomm 平台使用自己的 libalsa-intf 进行大部分播放，而 libtinyalsa 仅用于 USB 音频播放（可能还有 A2DP）。

就多声道支持而言，如果将其写入单声道/立体声接收器（即在内部扬声器或 3.5 毫米耳机上），它可能会被下混为立体声，可能借助虚拟器效果创建虚假的感觉环绕。真正的环绕声仅限于支持它的接收器，即 HDMI/MHL，可能还有 USB。应该注意的是，即使在 HDMI/MHL 情况下，某些设备也会下混为立体声。

# javascript - WebRTC 远程视频不流动

> ID：15654616
> 
> 赞同：1
> 
> 时间：2013-03-27T08:36:52.923
> 
> 标签：javascript, html, webrtc

我的示例 WebRTC 应用程序遇到了非常奇怪的问题。该应用程序只是使用 getUserMedia 获取本地摄像头流，使用 RTCPeerConnection 创建连接并将其发送到远程浏览器。在 Mozilla Nightly 中尝试时，它运行良好，但在 Google Chrome（25 和 26beta）中，*onaddstream*事件被触发，但远程视频仍然为空。为了将远程视频流附加到视频元素，我正在使用 createObjectURL 并且当我检查视频元素时，似乎设置了*src*属性中的流 blob（*mediastream:*在 Nightly 中和*blob:http://*在 Chrome 中）。有人知道问题出在哪里吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-06T16:23:31.683

尝试：

```
window.URL = window.webkitURL || window.mozURL || window.URL;
if (moz) video.mozSrcObject = stream;
else {
    video.src = window.URL.createObjectURL(stream) || stream;
}
video.play(); 
```

并检查流的 onended 属性。应该是假的

# eclipse - play framework 1 + eclipse：无语法检查

> ID：15654618
> 
> 赞同：0
> 
> 时间：2013-03-27T08:37:07.763
> 
> 标签：eclipse, playframework-1.x

我创建了一个版本为 1.2.5 的游戏框架项目。在帽子之后，我运行了 Thema eclipsy Commando 并打开了 Wirth eclipse 项目。

自动完成工作，但没有对 java 文件的语法检查。例如，如果我不写 ; 在命令结束时，左侧编辑器的边框不会显示错误。

我认为这是因为根文件夹在 Eclipse 中没有源文件夹。我可以改变吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:58:51.707

您需要导入项目，而不是创建新项目。 [http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Ftasks-importproject.htm](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Ftasks-importproject.htm)

> 您可以使用导入向导将现有项目导入
> 工作区。
> 
> *   从主菜单栏中，选择文件 > 导入...。导入向导打开。
>     
>     
> *   选择 General > Existing Project into Workspace，然后单击 Next。
>     
>     
> *   选择选择根目录或选择存档文件，然后单击相关的浏览以找到包含项目的目录或文件。在项目下选择您要导入的项目。
>     
>     
> *   单击完成开始导入。

# php - PHP循环中的Jquery是独一无二的

> ID：15654620
> 
> 赞同：0
> 
> 时间：2013-03-27T08:37:27.540
> 
> 标签：php, jquery, while-loop

我正在尝试创建一个简单的食品车；选项，即小，中，大和额外的，即奶酪，洋葱，辣椒。

我有一个计算数量的脚本，但是该脚本在每个食物项目的 while 循环内，我在使每个脚本调用都独一无二时遇到了一些困难。

这是我到目前为止所拥有的：http: [//jsfiddle.net/2F8LA/1/](http://jsfiddle.net/2F8LA/1/)

我尝试在 PHP 和 JS 中的每个 id 旁边使用 echo $testnumber 来使它们独一无二，但是它不起作用。想我有点过头了:)

请问如何使每个循环都独一无二？提前致谢。

```
<?php
$testnumber = 5;
?>
<?php do { ?>
<?php $testnumber -= 1;?>
<hr />
<div>
<div> 
<select id="options" name="options" class="options">
<option value="10.00">$10.00</option>
<option value="20.50">$20.50</option>
<option value="30.80">$30.80</option>
</select><span style="margin-left:30px;">TOTAL: $<span id="totalamount"> </span></span>
</div>
<br />
<div>
<input type="checkbox" name="extra" value="0.50" />$0.50
<input type="checkbox" name="extra" value="1.50" />$1.50
<input type="checkbox" name="extra" value="0.80" />$0.80
</div>
</div><br />
<script type="text/javascript">
// for adding the options and extras
function displayVals() { // get option value
  calcUsage();
  var singleValues = $("#options").val();
}

var $cbs = $('input[name="extra"]');
function calcUsage() {
var total = $("#options").val();
$cbs.each(function() {
    if(this.checked)
        total = (parseFloat(total) + parseFloat(this.value)).toFixed(2);
});
$("#totalamount").text(total); // display total
}

$("#options").change(displayVals);

displayVals();

//For  checkboxes           
$cbs.click(calcUsage);
</script>
<?php }while($testnumber > 0); ?>
<hr /> 
```

**谢谢哦，**我现在有以下代码，但是，我不明白如何将“displayVals(ele)”连接到“displayVals($(this))”对不起，我是 Jquery/Javascript 的新手。

如果您没有时间解释，我理解，但是，如果您有某个地方的链接，我可以了解这意味着什么，那就太好了。

```
<head>
<script type="text/javascript" src="scripts/jquery/js/jquery-1.9.1.js"></script>
<script type="text/javascript">
$(function(){
    $(document).on('change', 'select[name^=options]', function(){
        displayVals($(this));
    });

    $(document).on('click', 'input[name^=extra]', function(){
        calcUsage($(this));
    });
});
</script>
</head>
<?php $testnumber = 5; ?>
<?php do {  ?>
<?php $testnumber -= 1; ?>
<hr />
<div>
    <div> 
    <select id="options" name="options-<?php echo $testnumber; ?>" class="options">
    <option value="10.00">$10.00</option>
    <option value="20.50">$20.50</option>
    <option value="30.80">$30.80</option>
    </select><span style="margin-left:30px;">TOTAL: $<span id="totalamount-<?php echo $testnumber; ?>"> </span></span>
    </div>
    <br />
    <div>
    <input type="checkbox" name="extra-<?php echo $testnumber; ?>[]" value="0.50" />$0.50
    <input type="checkbox" name="extra-<?php echo $testnumber; ?>[]" value="1.50" />$1.50
    <input type="checkbox" name="extra-<?php echo $testnumber; ?>[]" value="0.80" />$0.80    
    </div>
</div><br />
<script type="text/javascript">
function displayVals(ele) { // get option value
    calcUsage(ele);
    var singleValues = ele.val();
}

function calcUsage(ele) {
    var total = ele.val(),
    $cbs = ele.parent().parent().find('input[name="^extra"]'),
    cnt = cbs.prop('name').split('-')[1]; // the iteration number
    $cbs.each(function() {
        if(this.checked) total = (parseFloat(total) + parseFloat(this.value)).toFixed(2);
    });
    $("#totalamount-"+cnt).text(total); // display total
}
</script>
<?php }while($testnumber > 0); ?>
<hr /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:47:55.187

用这个：

```
<select id="options" name="options<?php echo $testnumber; ?>" class="options"> 
```

和：

```
<input type="checkbox" name="extra<?php echo $testnumber; ?>[]" value="0.50" />$0.50
<input type="checkbox" name="extra<?php echo $testnumber; ?>[]" value="1.50" />$1.50
<input type="checkbox" name="extra<?php echo $testnumber; ?>[]" value="0.80" />$0.80 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:46:37.523

正如@Barmar 所指出的，将迭代次数添加到选择和输入中。

```
<select id="options" name="options-<?php echo $testnumber; ?>" class="options"> 
```

对输入做同样的事情......

```
<input type="checkbox" name="extra-<?php echo $testnumber; ?>[]" value="0.50" />$0.50
<input type="checkbox" name="extra-<?php echo $testnumber; ?>[]" value="1.50" />$1.50
<input type="checkbox" name="extra-<?php echo $testnumber; ?>[]" value="0.80" />$0.80 
```

别忘了`totalvalue`跨度..

```
<span id="totalamount-<?php echo $testnumber; ?>"> 
```

您想要的一些函数，只需传入元素 as`ele`并使用它来获取值。

```
function displayVals(ele) { // get option value
    calcUsage(ele);
    var singleValues = ele.val();
}

function calcUsage(ele) {
    var total = ele.val(),
    $cbs = ele.parent().parent().find('input[name^="extra"]'),
    cnt = $cbs.prop('name').split('-')[1]; // the iteration number
    $cbs.each(function() {
        if(this.checked) total = (parseFloat(total) + parseFloat(this.value)).toFixed(2);
    });
    $("#totalamount-"+cnt).text(total); // display total
} 
```

现在将事件委托给文档。非静态元素需要利用 jQuery 的`.on()`方法绑定到静态元素。将元素传递`$(this)`给函数以执行计算。

```
$(document).on('change', 'select[name^=options]', function(){
    displayVals($(this));
});

$(document).on('click', 'input[name^=extra]', function(){
    calcUsage($(this));
}); 
```

这一切都应该正常工作。

**编辑**

不要在循环中使用它，只需放在头部，在脚​​本标签中，包裹在`$(function(){//the javascrpit here });`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:08:04.430

感谢用户 Ohgodwhy 和 Fiverr 的某个人，我现在可以让脚本按预期工作。

我正在添加脚本以帮助任何寻找类似内容的人。

```
<head>
<script type="text/javascript" src="scripts/jquery/js/jquery-1.9.1.js"></script>
<script type="text/javascript">
$(function(){
    $(document).on('change', 'select[name^=options]', function(){
        displayVals($(this));
    });

    $(document).on('click', 'input[name^=extra]', function(){
        calcUsage($(this));
    });
});

function displayVals(ele) { // get option value
    calcUsage(ele);
    var singleValues = ele.val();
}

function calcUsage(ele) {
    var total = ele.parent().parent().find('#options').val(),
    $cbs = ele.parent().parent().find('input[name^="extra"]'),
    cnt = ele.prop('name').match(/\d/)[0];
    $cbs.each(function() {
        if(this.checked) total = (parseFloat(total) + parseFloat(this.value)).toFixed(2);
    });
    $("#totalamount-"+cnt).text(total); // display total
}
</script>
</head>
<?php $testnumber = 5; ?>
<?php do {  ?>
<?php $testnumber -= 1; ?>
<hr />
<div>
    <div> 
    <select id="options" name="options-<?php echo $testnumber; ?>" class="options">
    <option value="10.00">$10.00</option>
    <option value="20.50">$20.50</option>
    <option value="30.80">$30.80</option>
    </select><span style="margin-left:30px;">TOTAL: $<span id="totalamount-<?php echo $testnumber; ?>"> </span></span>
    </div>
    <br />
    <div>
    <input type="checkbox" name="extra-<?php echo $testnumber; ?>[]" value="0.50" />$0.50
    <input type="checkbox" name="extra-<?php echo $testnumber; ?>[]" value="1.50" />$1.50
    <input type="checkbox" name="extra-<?php echo $testnumber; ?>[]" value="0.80" />$0.80    
    </div>
</div><br />
<?php }while($testnumber > 0); ?>
<script type="text/javascript">
$('[id^=options]').each(function(){ displayVals($(this)); });
</script>
<hr /> 
```

# php - 提交后jQuery代码重新加载

> ID：15654626
> 
> 赞同：0
> 
> 时间：2013-03-27T08:38:02.907
> 
> 标签：php, jquery, submit

我有一个带有 jQ​​uery 的 php 页面，带有范围滑块。当滑块改变时，jQuery 代码对这些值求和。加载页面时也会发生这种情况。

但是提交后，同样的代码（有其他问题）也需要起作用。该代码在滑块更改时有效，但在提交后重新加载页面时无效。

这是jQuery代码：

```
function countSliders() {
    var SliderValue = parseInt($("#slider0").val()) + parseInt($("#slider1").val()) + parseInt($("#slider2").val());
    if (SliderValue == 10) $("#submit_next").button("enable");
    else $("#submit_next").button("disable");
    $("#lblsum_scores").text(SliderValue + "/10");
}

$(document).ready(function(){
    countSliders();
    $("#sliders").change(function(){
        countSliders();
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:43:20.163

利用`<body onload="countSliders();">`

编辑 1：您的问题中提到的提交按钮在哪里？如果你有你可以`<form>`打电话`countSliders()``<form onsubmit='countSliders()'>`

# css - 相当于 $(this) 的 CSS 选择器

> ID：15654628
> 
> 赞同：0
> 
> 时间：2013-03-27T08:38:05.187
> 
> 标签：css, selector, this

是否有与`$(this)`CSS 中的 Jquery 选择器等效的功能？像这样：

```
.widget h4 { background: black }
.widget:hover h4 { background: white } 
```

在这种情况下，如果将任何*分类*`.widget`元素悬停在上面，则子元素`h4`将更改背景颜色。我在问*CSS*中是否有一种方法可以做到这一点，以便*只有*`h4`单个悬停的`.widget`具有 bg 颜色变化，而不是每个带有 class 的元素`.widget`。是的，我在谷歌上搜索过，没有找到任何答案。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:49:06.687

您发布的代码应该完全按照您描述的方式执行您希望它的行为：

**CSS：**

```
.widget h4 { background: red }
.widget:hover h4 { background: white } 
```

**html:**

```
<div class="widget">
   <h4>Hover here</h4>
   <h3>This won't change</h3>
</div>

<div class="widget">
    <h4>Hover here</h4>
</div> 
```

使用该代码，如果您将鼠标悬停在其中一个 div 上`.widget`，它只会更改直接子元素，`h4`而不是另一个 div 中的子元素。

看到这个[jsfiddle](http://jsfiddle.net/B2VmA/ "jsfiddle")

# delphi - VCL UI 组件绘制一条线并将其划分为“可点击段”？

> ID：15654632
> 
> 赞同：1
> 
> 时间：2013-03-27T08:38:18.847
> 
> 标签：delphi, 2d, delphi-xe2

我正在分析一个在 Delphi 中理想地完成的应用程序（因为我将使用我以前拥有的许多库），但阻止我最终确定 Delphi 选择的唯一原因是我没有找到我需要的图形 UI 组件。

客户想要画线并划分它们。

让我告诉你一个场景：

1）线条是摩天大楼“外层”的二维表示，基本上由框架+玻璃窗组成。

2）用户想要画线（=“墙”）然后说“把它分成6个窗口”，所以我希望我的线由6个可点击的小段组成，所以用户可以点击它们并编辑属性所选窗口（摩天大楼的窗口）。

我不想用 TLine 的低级使用来做到这一点，是否有一些你知道的中间组件来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:03:58.113

我决定使用[TMS Diagram Studio](http://www.tmssoftware.com/site/diagram.asp)，因为我已经拥有这个组件并让用户绘制外墙。绘制完墙壁后，我将启动一个引导程序，允许用户输入一些墙壁属性（例如“窗口数量”，...），然后我将删除该行并重新创建许多行，每个窗口一个，使用原始行的 X、Y 坐标，我基本上会在设计时创建许多线条对象以具有可点击的元素。我不需要以这种方式编写复杂的组件。这是一种解决方法，但我的客户对此表示同意，主要是因为这样我可以以更低的成本提供我的工作......

# javascript - 谷歌地图生成但不显示

> ID：15654635
> 
> 赞同：0
> 
> 时间：2013-03-27T08:38:28.173
> 
> 标签：javascript, css, html, google-maps, google-maps-api-3

我生成了地图（我在控制台中看到了代码），但它实际上并没有在 Chrome 上显示任何内容。它显示在FF中，但看起来很糟糕。

我已经确定推荐了 CSS 之类的设置，但我可能错过了一些东西：

CSS：

```
#maps{
  height: 100%;
  margin: 0;
} 
```

HTML：

```
<details id='geoLocation'>
        <summary>Find Us</summary>
        <div id='maps'></div>
</details> 
```

JS：

```
function getLocation(){
    var geoConfig = {enableHighAccuracy: true, maximumAge: 60000, timeout: 100000}
    var distance = navigator.geolocation.watchPosition(showInfo,showError, geoConfig);
}
function showInfo(position){
   maps(position);
}
function showError(e){
    if (e.code == 2){
          alert("Position unavailable");
    }else{
         alert("Other error");
    }
}

function maps(position){
    var location = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);

    var mapOptions = {
       center: location,
       zoom: 12,
       mapTypeId: google.maps.MapTypeId.ROADMAP
   };

    var map = new google.maps.Map(document.getElementById('maps'), mapOptions);

    var markerOptions = {
       position: location,
       map: map
   };
    var marker = new google.maps.Marker(markerOptions);
    marker.setMap(map);

   distance = (Math.sqrt(Math.pow((position.coords.latitude-45),2)+Math.pow((position.coords.longitude-75),2)))*79;
    var infoWindowOptions = {content: 'Distance to Store = ' + distance};

    var infoWindow = new google.maps.InfoWindow(infoWindowOptions);
    google.maps.event.addListener(marker,'click',function(e){

     infoWindow.open(map, marker);

   });
} 
```

# meteor - 不同模板的相同助手

> ID：15654637
> 
> 赞同：1
> 
> 时间：2013-03-27T08:38:45.903
> 
> 标签：meteor

正如[关于车把的官方流星维基](https://github.com/meteor/meteor/wiki/Handlebars)所说：

> 使一个帮助器对多个模板可见的唯一方法是为每个模板分配相同的函数，或者声明一个全局帮助器。

我正在使用[望远镜](https://github.com/SachaG/Telescope)构建一个应用程序，问题是用户配置文件中的“成员因为”的值丢失，如下图所示。
![在此处输入图像描述](../Images/c13561f693d1141bfa5c04f7ef63a317.png)
因为 /client/views/users/user_profile.js 中的源代码 `Template.user_profile.createdAtFormatted = Template.user_item.createdAtFormatted;` 不能正常工作。

这是 /client/views/users/user_item.js 中的助手`Template.user_item`

```
Template.user_item.helpers({
 createdAtFormatted: function(){
   return this.createdAt ? moment(this.createdAt).fromNow() : '–';
}) 
```

，当我像这样更改 /client/views/users/user_profile.js 中的代码时：

```
Template.user_profile.createdAtFormatted = function() {
     return this.createdAt ? moment(this.createdAt).fromNow() : '–';
} 
```

或像这样制作一个全球帮手

```
Handlebars.registerHelper("createdAtFormatted", function(){
     return this.createdAt ? moment(this.createdAt).fromNow() : '–';
}); 
```

然后，一切正常
![在此处输入图像描述](../Images/191368b950879b6de534d3edc9998bed.png)

我想知道的是为什么作业`Template.user_profile.createdAtFormatted = Template.user_item.createdAtFormatted;`没有按我或作者希望的方式工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:12:32.613

这可能是因为`helper`Meteor 中的 & 有轻微的不一致。我认为助手是后来在 Meteor 中添加的。

基本上有两种方法可以在流星中定义助手。一种是：

```
Template.user_item.createdAtFormatted = function() {...} 
```

下面应该做同样的事情：

```
Template.user_item.helpers({
    'createdAtFormatted':function() {
    ...
    }
}); 
```

但是后者使用`helpers`不会创建`Template.user_item.createdAtFormatted`定义，所以上面的结果是`undefined`. 这很可能是流星中的一个错误，应该修复。我打开了一个问题：[https ://github.com/meteor/meteor/issues/886](https://github.com/meteor/meteor/issues/886)

# configure - sizeof void* 未知

> ID：15654639
> 
> 赞同：2
> 
> 时间：2013-03-27T08:38:49.040
> 
> 标签：configure, fftw, icc

我正在使用 Intel 的 Compiler 13.1 在 Mac OS X 10.7.3 上编译 FFTW 3.1.2，在 align.c 中出现以下错误：

```
ifftw.h(122): warning #147: declaration is incompatible with "void *alloca(size_t={__darwin_size_t={unsigned long}})" (declared at line 36 of "/usr/include/alloca.h")
  void *alloca(size_t);
        ^

ifftw.h(154): catastrophic error: #error directive: sizeof void* is unknown!
  #    error sizeof void* is unknown!
       ^ 
```

配置脚本将其设置为零，并且 config.h 文件包含：

```
#define SIZEOF_VOID_P 0 
```

即使我将其注释掉，我仍然会收到错误消息。该错误由 ifftw.h 和以下代码强制转换：

```
#ifndef HAVE_UINTPTR_T
#  if SIZEOF_VOID_P == 0
#    error sizeof void* is unknown!
#  elif SIZEOF_UNSIGNED_INT == SIZEOF_VOID_P
     typedef unsigned int uintptr_t;
#  elif SIZEOF_UNSIGNED_LONG == SIZEOF_VOID_P
     typedef unsigned long uintptr_t;
#  elif SIZEOF_UNSIGNED_LONG_LONG == SIZEOF_VOID_P
     typedef unsigned long long uintptr_t;
#  else
#    error no unsigned integer type matches void* sizeof!
#  endif
#endif 
```

所以看起来void指针的大小不应该为零，但在我的情况下。在 Linux 上编译代码时并非如此。这里有什么问题？

# c# - 如何在隐藏字段中存储和接收字节数组？

> ID：15654640
> 
> 赞同：5
> 
> 时间：2013-03-27T08:38:51.493
> 
> 标签：c#

我有一个字节数组。我需要将它分配给一个隐藏的文件并检索结果。如何实现这一点？

我试过了

```
var data =(byte[])hiddenField.value ; 
```

但它给出了一个错误

> *无法将字符串转换为字节数组。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T08:40:31.710

您需要将其作为字符串存储在隐藏字段中，因此您可以执行以下操作：

```
hiddenField.Value = Convert.ToBase64String(data); 
```

然后稍后将其转换回来：

```
byte[] data = Convert.FromBase64String(hiddenField.Value); 
```

如果您也可以提供数据示例，那将更加彻底。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T08:40:36.680

尝试这个：

要获取此字节：

```
byte[] bytes = System.Text.ASCIIEncoding.ASCII.GetBytes(hiddenField.Value); 
```

再次获取字符串：

```
string s = System.Text.ASCIIEncoding.ASCII.GetString(bytes); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-11T08:54:17.480

您可以将字节数组转换为字符串，然后将其存储在隐藏字段中。但是，请不要使用编码方法，**Encoding.ASCII.GetString**方法将字节数组转换为字符串。相反，您可以使用以下方法将字节数组转换为字符串：

**Convert.ToBase64String(byteArray)**

此外，您可以从隐藏字段中提取字符串值，然后使用以下方法再次将其转换回字节数组。

**Convert.FromBase64String(string)**

通过这种方式，您将能够在隐藏字段中存储和检索字节数组值。我这样做是为了在**Cookie**中存储字符串值。希望这也适用于 HiddenFields。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-12T15:20:43.090

我正在使用这种方法：

**1\. 在 JavaScript 中**

添加一个 javascript 函数将字节数组 (0..127) 转换为字符串：

```
function byteArrayToString(byteArray) {
    var str = "";
    for (var i = 0; i < byteArray.length; i++) {
        str += byteArray[i] + ',';
    }
    str = str.slice(0, -1);
    return str;
}
function getDataFromJavascript()
{
  var somebinarydata = [18,122,96];
  return byteArrayToString(somebinarydata);
} 
```

通过调用 javascript 函数设置隐藏字段值：

```
$('#<%= HiddenField1.ClientID %>').val(getDataFromJavascript()); 
```

**2\. 在 C# 中**

获取隐藏字段值，即字符串，将其创建一个字符串数组并将其转换为字节数组：

```
byte[] byteArray = HiddenField1.Value.Split(',').Select(byte.Parse).ToArray(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-09T03:40:37.357

您实际上可以按原样存储它，但不能将其存储在一个字段中。您必须执行这样的循环：

```
 if (Model.YourByteArray != null)
 {
    foreach (var item in Model.YourByteArray)
    {
       <input type="hidden" name="YourByteArray" value="@item">
    }
 } 
```

表单会将其发布到字节数组参数中。

# c# - C# 将剪贴板内容粘贴到 Excel 工作表中

> ID：15654641
> 
> 赞同：3
> 
> 时间：2013-03-27T08:39:08.470
> 
> 标签：c#, excel, clipboard, worksheet-function

正如标题所说，我尝试将剪贴板中的内容实际粘贴到 Excel 中。

我有以下代码：

```
Clipboard.SetText(html);
sheet.Range("A1").Value = Clipboard.GetText(); 
```

实际上，变量 html 包含一个 html 代码文件，当我这样做时，我实际上只将 html 内容粘贴到 Range 中，但是，如果我打开 Excel 并手动执行，选择性粘贴...我可以粘贴 html代码，但它将代码转换为真实的表格而不是 html 代码，这是我想要的真实结果，无需手动完成。

[Excel.Range.Copy() 使用 Clipboard.GetText() 粘贴](https://stackoverflow.com/questions/14529483/excel-range-copy-paste-with-clipboard-gettext)

另一种方法是：

```
foreach (Excel.Worksheet sheet in workbook.Sheets)
{
    foreach (Excel.Shape shape in sheet.Shapes)
    {
        Clipboard.SetText(html);

        //doesn't work:                              
        sheet.Range("A1").Value = sheet.PasteSpecial(Clipboard.GetText()); 

        sheet.PasteSpecial(Clipboard.GetText()); //throws error
    }
} 
```

但这种方式也行不通。我可以使用 html -> 图像并粘贴图像，但应该可以访问实际值而不是图片。

希望有人能澄清如何解决它。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T08:56:48.467

您可以尝试使用`SetData`而不是`SetText`：

```
 Clipboard.SetData(DataFormats.Html, html); 
```

将字符串复制到剪贴板并将其标记为 HTML（如果这在您的情况下不起作用，`SetText`可能没问题）。

`PasteSpecial`考虑到您的评论，调用您希望插入的单元格范围：

```
ActiveSheet.Range("A1").PasteSpecial(
         Excel.Enums.XlPasteType.xlPasteAll,
         Excel.Enums.Xl‌​PasteSpecialOperation.xlPasteSpecialOperationNone,
         false, false); 
```

请注意，使用该`Value`属性为单元格分配新值**永远不会**复制任何格式等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-28T11:30:10.103

我简单的 C# 复制和粘贴（从 Input/Sheet[1] 到 Output/Sheet[1]）

```
using System.Reflection;
using System.Runtime.InteropServices;
using Excel = Microsoft.Office.Interop.Excel;

// prepare Input
        Excel.Application xlApp = new Excel.Application();
        xlApp.DisplayAlerts = false;
        Excel.Workbook xlWorkbook = xlApp.Workbooks.Open(fileNameIn);
        Excel._Worksheet xlWorksheet = xlWorkbook.Sheets[1];
        Excel.Range xlRange = xlWorksheet.UsedRange;      //I copy everything
// prepare Output
        Excel.Application oXL = new Excel.Application();
        oXL.DisplayAlerts = false;
        Excel.Workbook mWorkBook = oXL.Workbooks.Open(fileNameOut, 0, false, 5,
                                "", "", false, Excel.XlPlatform.xlWindows,
                                "", true, false, 0, true, false, false);
        Excel.Worksheet mWSheet1 = mWorkBook.Sheets[1];
// make Copy&Paste in PC memory
        xlRange.Copy(Type.Missing);
        Excel.Range targetRange = mWSheet1.Cells[11, 1];   //initial cell for Paste
        mWSheet1.Paste(targetRange);
// save Output
        mWorkBook.SaveAs(fileNameOut, Excel.XlFileFormat.xlWorkbookNormal, 
                                Missing.Value, Missing.Value,
                                Missing.Value, Missing.Value,  
                                Excel.XlSaveAsAccessMode.xlExclusive,
                                Missing.Value, Missing.Value,
                                Missing.Value, Missing.Value, Missing.Value);
// clean the waste !
        mWorkBook.Close(Missing.Value, Missing.Value, Missing.Value);
        mWSheet1 = null; mWorkBook = null; oXL.Quit();
        GC.WaitForPendingFinalizers(); GC.Collect(); GC.WaitForPendingFinalizers();
        GC.Collect(); GC.WaitForPendingFinalizers();
        Marshal.ReleaseComObject(xlRange); Marshal.ReleaseComObject(xlWorksheet);
        xlWorkbook.Close(); Marshal.ReleaseComObject(xlWorkbook);
        xlApp.Quit(); Marshal.ReleaseComObject(xlApp); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-04T12:48:09.587

使用这个：xlWorkSheet.PasteSpecial(Missing.Value, false, false, Missing.Value, Missing.Value, Missing.Value, Missing.Value);

//下面是完整代码

```
 Microsoft.Office.Interop.Excel.Workbook xlWorkBook;
            Microsoft.Office.Interop.Excel.Worksheet xlWorkSheet;

            Excel.Application xlApp = new Microsoft.Office.Interop.Excel.Application();
            xlApp.Visible = true;
            xlApp.UserControl = true;
            xlApp.WindowState = Excel.XlWindowState.xlMaximized;
            xlWorkBook = xlApp.Workbooks.Add(Type.Missing);
           // xlWorkBook = xlApp.Workbooks.Open(excel_filename);
            xlApp.ActiveWorkbook.Sheets[1].Activate();
            xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);
            xlWorkSheet.PasteSpecial(Missing.Value, false, false, Missing.Value, Missing.Value, Missing.Value, Missing.Value);
            xlWorkBook.SaveAs(save_file_name);
            Console.WriteLine("saved file name" + save_file_name);
            xlWorkBook.Close();
            xlApp.Quit(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-23T14:07:26.677

我设法通过使用从剪贴板中获取复制的单元格

```
 Clipboard.GetData("XML Spreadsheet"); 
```

然后，在我通过我的代码做了一些复制粘贴之后，我把它放回去了

```
 Clipboard.SetData("XML Spreadsheet", originalObject); 
```

快乐编码！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-14T11:11:43.860

此代码用于将 html 字符串转储到 excel 中

```
using Microsoft.Office.Interop.Excel;

private void ExcelExport()
{
    var excel = new Application { Visible = true };
    excel.WindowState = XlWindowState.xlMaximized;
    Workbook workbook = excel.Workbooks.Add(XlSheetType.xlWorksheet);
    Worksheet sheet = workbook.Sheets[1];
    sheet.Activate();

    string s = "<html><body><table>";

    for (int i = 1; i <= 100; i++)
    {
        s += "<tr>";

        for (int f = 1; f <= 100; f++)
        {
            s += "<td>" + i.ToString() + "," + f.ToString() + "</td>";
        }

        s += "</tr>";
    }

    s += "</table></body></html>";

    System.Windows.Forms.Clipboard.SetText(s);

    sheet.Range["A1"].Select();
    sheet.PasteSpecial(Type.Missing, false, false, Type.Missing, Type.Missing, Type.Missing, Type.Missing);
    sheet.Range["A1"].Select();
}
```

# javascript - javascript this.form 返回意外的表单

> ID：15654642
> 
> 赞同：0
> 
> 时间：2013-03-27T08:39:12.473
> 
> 标签：javascript, forms, javascript-events

所以我得到了一些封闭形式和两个嵌套形式。两个嵌套表单在 buttonclick 上使用 ajax 进行评估，外部表单有一个提交按钮。

简化标记：

```
<form id="form1" action="default.asp">
    //some fields inside a list with unnecessary text
    <input type="text" name="shortdesc"/>
    <form id="deleteform" action="delete.asp">
       //dynamically generated checkboxes
       <input type="checkbox" name="deleter" value="somedocument.txt">somedocument.txt<br>
       <input type="checkbox" name="deleter" value="some_otherdocument.doc">some_otherdocument.doc<br>
       <input type="button" onclick="console.log(this.form); ajaxcall('delete.asp', this.form);" />
    </form>
    <form id="addfileform" action="upload.asp">
        <input type="file" name="file"/>
        <input type="button" onclick="console.log(this.form); ajaxcall('upload.asp', this.form);" />
    </form>
    <input type="button" value="send" onclick="dataValidation(form1),"/>
</form> 
```

When checking a checkbox and "submitting" the form, console logs outer form, but when chosing a file and "sumbitting" that, the correct form gets logged.

有人可以解释为什么和/或如何解决这个问题吗？

* * *

澄清一下：这应该是某个站点（**不是 HTML5**），您可以在其中提交一些文本字段以要求 CEO 进行一些更改。我现在应该实现文件附加。

表单是用 asp classic 处理和创建的（*哦，痛苦，但是…… ），因为我并不热衷于在***两个**重定向中保留整个表单数据（一个用于上传，一个用于显示上传的文件) 我决定去 AJAX。

仅供参考：console.log(document.getElementById('deleteform')) 返回*未定义*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T08:47:49.913

HTML 表单不能嵌套。这里发生的是浏览器看到您的第一个`<form id="form1">`标签，但它*忽略*了嵌套`<form id="deleteform">`标签。

然后它会看到`</form>`并关闭`<form id="form1">`. 之后，它会看到`<form id="addfileform">`标签并启动一个新表单，该表单被 next 关闭`</form>`。

然后是最后一个`<input type="submit" value="send">`按钮，它按预期进行解析，但根本不在任何表单中。

`</form>`最后，它忽略了一个额外的内容。

换句话说，就像你写的一样：

```
<form id="form1" action="default.asp">
    <input type="checkbox" name="deleter" value="somedocument.txt">somedocument.txt<br>
    <input type="checkbox" name="deleter" value="some_otherdocument.doc">some_otherdocument.doc<br>
    <input type="button" onclick="console.log(this.form); ajaxcall('delete.asp', this.form);" />
 </form>
<form id="addfileform" action="upload.asp">
    <input type="file" name="file"/>
    <input type="button" onclick="console.log(this.form); ajaxcall('upload.asp', this.form);" />
</form>
<input type="button" value="send" onclick="dataValidation(form1),"/> 
```

查看何时发生此类情况的一种简单方法是在浏览器中使用 DOM 检查器。这显示了浏览器从您的 HTML 代码生成的 DOM - 这有时会让您感到惊讶！您还应该像其他人提到的那样验证您的 HTML 代码。

当您尝试`console.log(document.getElementById('deleteform'))`时，该日志会记录下来`undefined`，因为如上所述，您`deleteform`从未将其放入 DOM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:47:19.847

您可以在一个 HTML 中包含多个表单，前提是它们指向不同的操作。禁止嵌套表单标签

请通过此 W3 规范

[http://www.w3.org/TR/xhtml1/#prohibitions](http://www.w3.org/TR/xhtml1/#prohibitions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T09:18:56.370

一般来说，您不应该使用嵌套表单。如果出于任何原因，您需要使用嵌套表单，或许您应该考虑更改 Web 应用程序的架构。

例如，在上面的示例中，您可以用字段集替换嵌套表单，并通过单击事件直接控制它们各自的提交按钮，从而仅获取 ajax 调用的必要信息。

# ruby - 如何在子类中获取包含特定字符串的某些 div 数组元素

> ID：15654645
> 
> 赞同：-2
> 
> 时间：2013-03-27T08:39:16.330
> 
> 标签：ruby, watir

如何获取数组中的每个 div 元素 ID 并包含我需要的特定字符串，其中包含元素子类 theText。

```
<div id="corporaContainer" class="fullList">
  <div id="c-ff7c1098-8183-4c89-b3ec-b2587aa6d372" class="resItem clearfix">
    <div class="resTitle">
      <span id="filter-ready" class="statBall statFile ready" title="Status: ready"></span>
      <span class="theText"></span>
    </div>
  <div class="resType"></div>
  <div class="resSize"></div>
  <div class="resPermission public"></div> 
  <div class="resDomain"></div>
  <div class="resDescr"></div>
  <div class="resDetails clearfix" style="display:none;"></div> 
```

我试图在每个 ID 上创建一个带有循环的数组并检查 .include? 功能。但到目前为止还没有成功。

我需要脚本跳过每个 div 元素并检查它是否包含我需要的字符串，然后将元素 ID 值存储在数组中以供以后使用此 ID。

添加了我到目前为止制作的脚本代码。

```
@b = Watir::Browser.new :chrome, :switches => %w[--disable-plugins --ignore-certificate-errors --disable-popup-blocking --disable-translate --disable-translate]
#-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
require_relative "1_login.rb"

# Ieiet Corpora sadaļā
@b.div(:id, "pageHeader").link(:text, "Corpora").click

lietotajs = @b.div(:class, "userRealName").text
dzesamie_korpusi = @b.div(:id, "corporaContainer", :class => "fullList")

korpusu_id = []
dzesamie_korpusi.each do |korpuss|
    id = korpuss.attribute_value "id"
    id = id[-38..-1]
    korpusu_id.push(id)
end 
```

到目前为止，我尝试让脚本通过 corporacontainer 下的每个 DIV 元素循环并获取 div 元素 id 以将 ir 存储在数组中，但是这个确切的代码返回一个错误，因此它需要 Hash 标记或现在如何处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:48:15.583

当您说“字符串”时，您希望这个已知文本出现在哪里有点不清楚。如果您正在查找 div 中某处的文本（请注意“文本”在页面上（通常）可见。不是元素定义中的字符或元素的某些属性的值）

```
browser.div(:id => "corporaContainer").divs(:text => /TestAuto\s.*/).each do |div|
  puts div.attribute_value("id")
end 
```

如果已知的东西是一个属性的值，并且属性名称是常量，类似于跨度的类，并且跨度总是嵌套在具有您想要的 ID 的容器对象之下的一些可预测级别的容器对象中，那么像这样可能会起作用（我没有简单的方法来测试，所以自己尝试一下，看看你是否得到了你想要的）

```
browser.div(:id => "corporaContainer").spans(:class => /TestAuto\s.*/).each do |span|
  puts span.parent.parent.attribute_value("id")
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:41:05.693

我知道您正在为每个包含后代节点的子节点`div`查找根。你想得到那些子节点的。为此，我会使用它来解析 HTML/XML/CSS 文档。`id=corporaContainer``div``span``class="theText"``id``div``nokogiri`

`file.html`

```
<div id="corporaContainer" class="fullList">
  <div id="c-ff7c1098-8183-4c89-b3ec-b2587aa6d372" class="resItem clearfix">
    <div class="resTitle">
      <span id="filter-ready" class="statBall statFile ready" title="Status: ready"></span>
      <span class="theText"></span>
    </div>
    <div class="resType"></div>
  <div class="resSize"></div>
  <div class="resPermission public"></div>
  <div class="resDomain"></div>
  <div class="resDescr"></div>
  <div class="resDetails clearfix" style="display:none;"></div>
  </div>
  <div id="c-e5f0fe33-06a0-4685-8fe2-f789893bd8e2" class="resItem>clearfix"></div>
</div> 
```

剧本

```
require 'nokogiri'

root_id = 'corporaContainer'
filter = 'theText'

File.open('file.html') do |file|
  nodes = Nokogiri::HTML(file)

  nodes.xpath("//div[@id=\"#{root_id}\"]/div").each do |node|
    puts node['id'] unless node.xpath(".//span[@class=\"#{filter}\"]").empty?
  end
end 
```

结果，您拥有了您正在寻找的 id

```
c-ff7c1098-8183-4c89-b3ec-b2587aa6d372 
```

# android - 使用静态库构建 Android NDK 应用程序以进行分发

> ID：15654646
> 
> 赞同：1
> 
> 时间：2013-03-27T08:39:22.133
> 
> 标签：android, android-ndk, makefile, arm, static-libraries

我有一个 Android 项目，其中包含一些本机代码，它为一些 Poco 库函数使用静态库。我目前在下面的 make 文件中链接了静态库的 arm7 版本。现在，如果我想在 google play 上分发这个应用程序，为了可移植性，我需要在 apk 中包含其他架构。例如，我如何将 arm6 的静态 libPocofoundation.a 和 arm7 的静态 libPocoFoundation.a 包含到 apk 中的共享库中？

```
include $(CLEAR_VARS)
LOCAL_ARM_MODE := arm
LOCAL_MODULE := PocoFoundation
LOCAL_SRC_FILES := Poco/libPocoFoundation.a   #<- How do i set this conditional-
#                                                 or add multiple architectures?
LOCAL_EXPORT_C_INCLUDES := /Users/poco-1.5.1-all/Foundation/include
LOCAL_EXPORT_CFLAGS := -DFOO=1 -fpermissive
LOCAL_EXPORT_LDLIBS := -llog
include $(PREBUILT_STATIC_LIBRARY) 
```

安卓.mk

```
LOCAL_PATH := $(call my-dir)
ROOT_PATH := $(LOCAL_PATH)
include $(call all-subdir-makefiles)
include $(CLEAR_VARS)
LOCAL_PATH = $(ROOT_PATH)

include $(CLEAR_VARS)
#LOCAL_MODULE_TAGS    := eng
LOCAL_ARM_MODE       := arm
LOCAL_MODULE    := JsonPoco # Your own library.
LOCAL_SRC_FILES := JsonPoco.cpp \

 # Your own library source.
LOCAL_WHOLE_STATIC_LIBRARIES := PocoFoundation \
PocoJSON
LOCAL_LDLIBS     := -llog
LOCAL_CFLAGS     := -DPOCO_ANDROID -DPOCO_NO_FPENVIRONMENT -DPOCO_NO_WSTRING -DPOCO_NO_SHAREDMEMORY
LOCAL_CPPFLAGS   := -frtti -fexceptions 
include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T09:07:31.953

如果我理解得很好，你想包含这个静态库的不同版本，位于不同的路径中。

正如 Rajitha 所说，支持多平台的第一步是在`Application.mk`. 例如，要支持 ARMv5/6 和 ARMv7：

```
APP_ABI := armeabi armeabi-v7a 
```

然后在您的 中`Android.mk`，您需要根据当前正在构建的平台更改用于静态库的路径：

```
ifeq ($(TARGET_ARCH_ABI),armeabi-v7a)
    LOCAL_SRC_FILES := /path/to/armv-7/libPocofoundation.a
else
    LOCAL_SRC_FILES := /path/to/armv-6/libPocofoundation.a
endif 
```

例如，如果您想支持 x86，则可以在更多架构上执行此 if/else 条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:41:34.067

修改`APP_ABI`你的`Application.mk`to

```
APP_ABI := all 
```

# javascript - 无法在 Ext JS4 中为用户名字段设置输入类型

> ID：15654647
> 
> 赞同：0
> 
> 时间：2013-03-27T08:39:26.503
> 
> 标签：javascript, extjs4, extjs4.1, extjs4.2

我正在使用 Extjs 4，我想在我的登录页面中自动输入值？

我的代码在下面我正在设置用户名和密码的文本

当我尝试在 GUI 的登录页面中检索时，用户名值未填充标记

相反，Mark 和 Jessey 都在填写并自动输入密码

如何在相应字段中实际设置代码

**登录.js**

```
Ext.onReady(function(){

        Ext.QuickTips.init();

 items: [
               {
                                        xtype: 'textfield',
                                         fieldLabel: 'UserName',
                                        name: 'j_username',
                                        id: 'lf.txt.username', //Trying to pass Value for this id in GUI as Mark
                },

                {
                                        xtype: 'textfield',
                                        inputType: 'password',
                                        fieldLabel: 'Password',
                                        name: 'j_password',
                                        id: 'lf.txt.password',//Trying to pass Value for this id in GUI as Jessey When i Launch Code 
                 }
 ]
}
} 
```

当我尝试在我的 Login.Html 页面中使用上述值时

像下面的索引.js

```
{
 var userName = Ext.getCmp('lf.txt.username');
       alert(userName);
       // alert(lf.txt.password);  // It is Gettin UserName as MArk 
        t.diag(userName.title);
        t.type(userName, 'Mark');

        var password = Ext.getCmp('lf.txt.password');
        alert(password); // It is Gettin password as Jessey Correctly 
        t.diag(password.title);
        t.type(password, 'Jessey');
} 
```

* * *

但我只能在密码字段中打印用户名和密码！

我可以在密码字段中打印 Mark 和 Jessey 但不能打印用户名？

谁能告诉我如何在 .js 页中设置用户名的值？

让我知道如何将用户名和密码值传递给相应的字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:46:53.690

您可以使用功能获得组件本身`Ext.getCmp`。您应该使用 获取输入值`Ext.getCmp(cmpId).getValue()`。顺便说一句，我看不到您的输入字段的任何容器？我认为这段代码不能正常工作。如果您正在处理输入，建议使用表单面板；然后使用表单面板的功能获取输入。

一个工作样本应该是这样的：

```
var form = Ext.create('Ext.form.Panel', {
    title : 'A title',
    items : [{
       xtype : 'textfield',
       name  : 'input1',
       fieldLabel: 'Label1'
    }, {
       xtype : 'textfield',
       name  : 'input2',
       fieldLabel: 'Label2'
    }]
});

form.getForm().findField('input1').getValue(); 
```

# php - 为什么 getID3 中的我的类型发生变化

> ID：15654652
> 
> 赞同：0
> 
> 时间：2013-03-27T08:39:37.430
> 
> 标签：php, getid3

我将此波纹管方法称为 GetID3MIMEtype('test.docx') 该方法将文件类型更改为“application/zip”，但我没有上传任何文件类型不正确的 zip 文件。

```
 function GetID3MIMEtype($filename) {
      $filename = realpath($filename);
      $getID3 = new getID3;
      $ThisFileInfo = $getID3->analyze($filename);
      getid3_lib::CopyTagsToComments($ThisFileInfo);      
      log_error(print_r($ThisFileInfo['mime_type'], true));
      if (empty($ThisFileInfo['error'])) {
         if ($ThisFileInfo['fileformat']) {
            $temp = explode("/", $ThisFileInfo['mime_type']);
            $mime = $temp[0]."/".$ThisFileInfo['fileformat'];
         }
         else
            $mime = $ThisFileInfo['mime_type'];
         return $mime;
      }
      else {
         log_error("ID 3 Error - ".$filename." - ".print_r($ThisFileInfo['error'], true));
         return false;
      }
   } 
```

问题

1.  什么是[getID3](http://www.getid3.org/)类
2.  为什么这个类改变文件我的类型

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T08:49:26.847

文件*是*`.docx`zip文件- 尝试将其重命名为并打开它。您将看到它是 XML 和其他嵌入式文档的集合。*`.zip`*

 *也就是说，`getId3`设计用于多媒体文件类型 - 视频和音频文件 - 正如它在[项目页面上所说](http://sourceforge.net/projects/getid3/)

它是 Mime 类型而不是 Mine 类型。它类似于文件扩展名，但功能更强大。它让不同的应用程序（可能在不同的平台上）知道应该如何处理特定的文件。尝试阅读[此页面](http://www.hunnysoft.com/mime/mime-guide.html)以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:25:40.057

这个 getID3 库中似乎有一个错误；至少在当前版本`getid3-1.9.5-20130220`中。

如果您打开文件`module.archive.zip.php`并更改块

```
if (!empty($ThisFileInfo['zip']['files']['ppt'])) {
  $info['mime_type'] = 'application/vnd.openxmlformats-officedocument.presentationml.presentation';
} elseif (!empty($ThisFileInfo['zip']['files']['xl'])) {
  $info['mime_type'] = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';
} elseif (!empty($ThisFileInfo['zip']['files']['word'])) {
  $info['mime_type'] = 'application/vnd.openxmlformats-officedocument.wordprocessingml.document';
} 
```

至

```
if (!empty($info['zip']['files']['ppt'])) {
  $info['mime_type'] = 'application/vnd.openxmlformats-officedocument.presentationml.presentation';
} elseif (!empty($info['zip']['files']['xl'])) {
  $info['mime_type'] = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';
} elseif (!empty($info['zip']['files']['word'])) {
  $info['mime_type'] = 'application/vnd.openxmlformats-officedocument.wordprocessingml.document';
} 
```

（即更改`$ThisFileInfo`为`$info`）

mime 类型从 更改`application/zip`为`application/vnd.openxmlformats-officedocument.wordprocessingml.document`.docx*

# java - 面向对象编程：动态添加功能

> ID：15654654
> 
> 赞同：3
> 
> 时间：2013-03-27T08:39:45.597
> 
> 标签：java, oop

我正在寻找装饰器模式的替代方案，以使其更具活力。作为一个简单的示例，假设我们有以下代码：

```
interface Resource {
    public String getName();
}

interface Wrapper extends Resource {
    public Resource getSource();
}

interface Readable extends Resource {
    public InputStream getInputStream();
}

interface Listable extends Resource {
    public List<Resource> getChildren();
}

class File implements Readable {
    ...
}

class Zip implements Listable, Wrapper {
    public Zip(Readable source) { ... }
} 
```

如您所见，Zip 并没有直接实现 Readable，但是它正在读取的资源却可以。假设我们构建一个 zip：

```
Zip zip = new Zip(new File()); 
```

我不想（也不能）堆叠所有接口以相互扩展（例如 Listable 扩展 Readable），我也不能构造所有对象来实现所有功能，因为并非所有功能都相互关联，你想要能够通过包装它们来动态“装饰”对象。

我确定这是一个常见问题，但有解决它的模式吗？使用“包装器”界面，您当然可以根据需要探测资源链以检查功能，但我不确定这是否是一种理智的方法。

**更新**

问题如上所述，并非所有功能都相关，因此您无法构建良好的接口层次结构。例如，假设您有这个任意的新功能：

```
interface Rateable extends Resource {
    public int getRating();
}

class DatabaseRateable implements Rateable, Wrapper {
    public DatabaseRateable(Resource resource) { ... }
} 
```

如果你运行：

```
Resource resource = new DatabaseRateable(new Zip(new File)); 
```

生成的资源已经“丢失”了所有添加的功能（可读、可列出......）。让 Rateable 扩展说 Listable 是荒谬的。

我可以再次递归检查 resource.getSource() 并找出所有功能。在立即答复中没有明确的解决方案，所以也许递归检查毕竟是一个不错的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:47:39.827

在我看来，您在这里努力追求的概念是[鸭子类型](https://en.wikipedia.org/wiki/Duck_typing)，而 java 本身并没有这样做（请参阅我关于基于反射的 java 库的评论）。但是，在 JVM 上运行的其他语言当然可以。例如 -[常规](http://groovy.codehaus.org/)：

```
class Duck {
    quack() { println "I am a Duck" }
}

class Frog {
    quack() { println "I am a Frog" }
}

quackers = [ new Duck(), new Frog() ]
for (q in quackers) {
    q.quack()
} 
```

你可以用 groovy 编写你的代码，让它与你的 java 代码的其余部分无缝地一起工作，并在 groovy 中解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T08:49:51.597

我认为您正在寻找的是[混合](http://en.wikipedia.org/wiki/Mixin)

链接的维基百科页面有一个很好的支持它们的 OOP 语言列表。还是您特别与 Java 相关？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T08:47:43.060

装饰对象时，通常只装饰对象的一个​​接口，仅修改或添加其行为的一个方面。您可以使用不同的装饰器装饰对象的另一个接口。这些装饰器可以同时存在。

您可以将一个装饰器传递给一个方法，另一个传递给另一个。

当您希望先用几个装饰器装饰对象然后通过代码传递对象时，这会变得很棘手。

因此，对于您的情况，我建议您再次将装饰器包装到一个对象中，该对象知道资源存在哪种装饰器。

```
class Resource {
    private Readable readable; 
    private Listable listable;
    private Rateable rateable;

    setReadable(Readable readable) {
        this.readable = readable;
    }

    setListable(Listable listable) {
        this.listable = listable;
    }

    setRateable(Rateable rateable) {
        this.rateable = rateable;
    }

    public boolean isRateable(){
        return rateable != null;
    }

    public Rateable getRateable(){
        return rateable;
    }
    // etc
}

File file1 = new File();
Resource resource = new Resource(file1);
resource.setReadable(new ReadableFile(file1));
resource.setListable(new ListableFile(file1));
resource.setRateable(new DatabaseRateableFile(file1)); 
```

然后，您可以传递资源，其用户可以发现该特定资源具有哪些功能。

[Qi4j 框架](http://qi4j.org/latest/ten-minutes-intro.html)允许您使用注释以更简洁的方式执行此操作（以及更多操作）。您将片段组合成组合。不过，这确实需要一些时间来适应。为 Resources 滚动您自己的特定实现的优点是它会更容易向其他人解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T10:02:44.833

我将提供我自己的建议（如原始问题中所述）作为答案。如果有足够多的人认为这是一个有价值的解决方案或没有更好的解决方案，我会接受。

简而言之，我自己的解决方案包括使用 Wrapper 接口向后遍历资源以确定存在哪些功能。举个例子：

```
Resource resource = new DatabaseRateable(new Zip(new File)); 
```

你可以想象这样做：

```
public Readable asReadable(Resource resource) {
    if (resource instanceof Readable)
        return (Readable) resource;
    else if (resource instanceof Wrapper)
        return (asReadable( ((Wrapper) resource).getSource() );
    else
        return null;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T08:50:20.703

也许[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)可以提供帮助：

```
Readable r = zip.adapt( Readable.class ); 
```

这要求方法`adapt()`返回一个`zip`实现`Readable`接口的实例。

实现通常使用“适配器管理器”，它知道如何为所有注册类型构建包装器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-27T08:55:20.340

这里可能不太合适，但动态特征发现：

```
public class Features {

    public <T> lookup(Class<T> intface) 
            throws UnsupportedOperationException {
        return lookup(intface, intface.getSimpleName());
    }

    public <T> lookup(Class<T> intface, String name) 
            throws UnsupportedOperationException {
        return map.get(...);
    }
}

public class X {
    public final Features FEATURES = new Features();
    ...
}

X x;
Readable r = x.FEATURES.lookup(Readable.class); 
```

# c# - RDLC的ReportDataSource为null时如何避免报错？（没有从DB中检索到数据）

> ID：15654658
> 
> 赞同：0
> 
> 时间：2013-03-27T08:39:53.510
> 
> 标签：c#, asp.net, .net, rdlc

Reportview控制器会报错

> 报告处理过程中发生错误。

当其数据源为空时。但我认为这应该是大多数项目中的常见场景。那么，如何在 RDLC reportview 控制器上提醒消息而不是出现错误消息？</p>

环境：VS2010 / Asp.net

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:44:29.867

我找到了解决方案。只需将一个空的 DataTable 对象添加到 ReportDataSource..

# ios - 从 IOS 上已安装的应用程序中删除旧的未使用的 .mom(d) 文件？

> ID：15654660
> 
> 赞同：0
> 
> 时间：2013-03-27T08:39:55.960
> 
> 标签：ios, objective-c, core-data, migration, magicalrecord

我正在处理应用程序更新。我已经从头开始重写了应用程序，并切换到了用于模型控制的magicrecords 这是我的问题：

1.  我创建了一个新的“newdatabase.xcdatamodel”文件，其中包含一个名为“foo”的实体。
2.  在应用程序的第一个版本中，我还有一个“olddatabase.xcdatamodel”，其中还包含一个名为“foo”的实体
3.  当用户从头开始安装应用程序时没有问题。
4.  如果用户有以前版本的应用程序，他的设备有“olddatabase.mom”文件，其中还包含旧的“foo”实体，所以你可以想象，应用程序崩溃并出现错误：

> 无法将模型与名为“foo”的两个不同实体合并

那么是否有可能在加载新的 mom 文件之前检测并删除旧的“olddatabase.mom”文件？

我已经尝试了以下代码，就像我想的那样，我没有对该文件夹的权限:)

```
 NSString *path = [[NSBundle mainBundle]pathForResource:@"olddatabase" ofType:@"mom"];
if(path){
    NSError* error = nil;
    NSFileManager *fileManager = [NSFileManager defaultManager];
    [fileManager removeItemAtPath:path error:&error];
    if(error)
        NSLog(@"Error: %@",[error description]);
}
NSLog(@"path = %@",path); 
```

我开始考虑将我的新“foo”实体名称更改为“foo2”或其他名称，但我真的很着迷于为我使用的东西使用专有名称，所以我很高兴知道是否有办法做它。

感谢您阅读和（可能）回复:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-14T15:19:50.143

好的，我遇到了完全相同的问题，这就是我解决它的方法...

我的新 .xcdatamodelD 有一个不同的名称。我认为这对我来说很重要，因为我可以指定 Magic Record 使用特定的 momd，而不是搜索捆绑包并抱怨：

> 无法将模型与名为“foo”的两个不同实体合并

所以这很简单。我只是告诉 Magic Record 专门使用一个新的 momd，然后使用以下设置调用创建核心数据堆栈...

```
[MagicalRecord setDefaultModelNamed:@"new_name.momd"];
[MagicalRecord setupCoreDataStackWithAutoMigratingSqliteStoreNamed:@"new_foosql.sqlite"]; 
```

如果你愿意，你可以核对你的旧 sql 数据存储，如果这就是你想做的，那么堆栈上有很多关于重置 coredata 的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:03:37.707

你所描述的没有意义：

A. 你不能从你的包中删除任何东西。它是只读的。

B. 当人们更新你的新版本时，你的包中应该没有 olddatabase.mom。它很可能位于应用程序的用户文档文件夹中。

如果我正确阅读了您的问题，那么您需要的是核心数据迁移。 [尝试这个。](https://stackoverflow.com/questions/8641802/core-data-migration-xcode-4-2-is-not-update-the-data-for-app-already-available-i/8641836#8641836)

编辑：仅供参考

重新阅读OP的文字后，上面的B部分不正确。但由于 OP 已接受此作为答案，因此不允许删除答案。

# sql - 带有字符串的 Oracle SQL 无效数字错误

> ID：15654665
> 
> 赞同：0
> 
> 时间：2013-03-27T08:40:23.647
> 
> 标签：sql, oracle

我有一个这样的查询...

```
SELECT 1,2,3 
FROM (SELECT CASE WHEN something THEN TO_CHAR(1)... END,2,3 
      FROM tables WHERE condtions) 
      WHERE 1 NOT LIKE 'String' 
```

所有列都是 varchar2，我在这个查询中得到一个 Invalid Number 错误，指向内部 case 语句。内部查询单独运行良好..如果我删除外部 WHERE 条件，整个查询运行良好。

我知道这与 SQL 优化器有关，但我在这里做错了什么，我该如何解决这个问题？对字符串或外部选择语句使用 To_CHAR 不起作用...

* * *

更新以获得更好的理解，

```
SELECT COL1, COL2, COL3 FROM (
SELECT CASE WHEN LOGIC THEN TO_CHAR(1) ELSE TO_CHAR(0) END AS COL1, 
COUNT(SOME_COL) AS  COL2 , COUNT(SOME_COL2) AS COL3 FROM TABLES WHERE CONDTIONS
) WHERE COL1 NOT LIKE ‘0’ 
```

我被告知 Oracle SQL Optimizer 正在干扰并导致上述错误，并且查询必须以不同的方式编写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:46:05.307

通过用反引号括起来表示 1 是列名。

```
SELECT 1,2,3 FROM (SELECT CASE WHEN something THEN TO_CHAR(1)... END,2,3 
FROM tables
WHERE condtions) WHERE `1` NOT LIKE 'String' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:24:01.327

您需要使用正确的列名（以字母开头） - 1,2,3 不起作用（除非引用）：

```
create table tab1 as 
select 1 as pk from dual
union all
select 2 as pk from dual
union all
select 3 as pk from dual;

SELECT col1,col2,col3 
FROM (SELECT (CASE WHEN 1=2 THEN TO_CHAR(1) else to_char(2) END) as col1 ,
      2 as col2,
      3 as col3
      FROM tab1 WHERE pk > 1) 
      WHERE col1 NOT LIKE '%1%' 
```

# c++ - 提升信号量

> ID：15654674
> 
> 赞同：0
> 
> 时间：2013-03-27T08:40:48.443
> 
> 标签：c++, boost, semaphore

我正在使用`named_semaphore`，我想声明一个信号量，然后询问它的进程数，但目前我得到这个例如：

```
const unsigned N_CORES = boost::thread::hardware_concurrency();
named_semaphore SEMAPHORE(open_or_create, PROCESS_NAME, N_CORES); 
```

我首先要声明 SEMAPHORE，然后再获取内核数。

根据api：

```
 //!Creates a global semaphore with a name, and an initial count. 
  //!If the semaphore can't be created throws interprocess_exception
  named_semaphore(create_only_t, const char *name, unsigned int initialCount);

  //!Opens or creates a global semaphore with a name, and an initial count. 
  //!If the semaphore is created, this call is equivalent to
  //!named_semaphore(create_only_t, ...)
  //!If the semaphore is already created, this call is equivalent to
  //!named_semaphore(open_only_t, ... )
  //!and initialCount is ignored.
  named_semaphore(open_or_create_t, const char *name, unsigned int initialCount); 
```

我试过了：

```
 const unsigned N_CORES = boost::thread::hardware_concurrency();
 named_semaphore SEMAPHORE(create_only, PROCESS_NAME, N_CORES);

 // at other point
 SEMAPHORE(open_or_create, PROCESS_NAME, numberOfCores); 
```

但显示此错误：

```
term does not evaluate to a function taking 3 arguments 
```

# ruby - 如何将 ActiveSupport::SafeBuffer 转换为字符串？

> ID：15654676
> 
> 赞同：12
> 
> 时间：2013-03-27T08:40:58.600
> 
> 标签：ruby

我想从 ActiveSupport::SafeBuffer 中获取字符串对象。方法 to_s 返回相同类型的 ActiveSupport::SafeBuffer。只有 to_sym.to_s 返回 String，但这更像是一种 hack。这是我的控制台播放：

```
irb(main):008:0> s = ActiveSupport::SafeBuffer.new("asdf")
# => "asdf"
irb(main):009:0> s.class
# => ActiveSupport::SafeBuffer
irb(main):010:0> s.to_s.class
# => ActiveSupport::SafeBuffer
irb(main):011:0> s.to_sym.to_s
# => "asdf"
irb(main):012:0> s.to_sym.to_s.class
# => String 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-27T08:58:11.490

实际上有一个方法：[`String#to_str`](http://ruby-doc.org/core-2.0.0/String.html#method-i-to_str)

```
buf = ActiveSupport::SafeBuffer.new("asdf")

str = buf.to_str #=> "asdf"
str.class        #=> String 
```

`String#to_str`工作原理完全一样`String#to_s`：它返回接收者，必要时将其转换为字符串。但与覆盖不同的[`ActiveSupport::SafeBuffer#to_s`](http://api.rubyonrails.org/classes/ActiveSupport/SafeBuffer.html#method-i-to_s)是，没有`ActiveSupport::SafeBuffer#to_str`调用原始方法。

* * *

请注意，它[`ActiveSupport::SafeBuffer`](http://api.rubyonrails.org/classes/ActiveSupport/SafeBuffer.html)是 的子类`String`：

```
s = ActiveSupport::SafeBuffer.new("asdf")
s.is_a? String
# => true 
```

所以通常根本不需要转换它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-27T08:43:17.537

将其插入为字符串：

```
irb(main):001:0> "#{ActiveSupport::SafeBuffer.new("asdf")}".class
=> String 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-24T06:16:14.477

我没有足够的声誉发表评论，但我必须补充一点，有时需要转换`ActiveSupport::SafeBuffer`为`String`.

`gsub`我在`ActiveSupport::SafeBuffer`对象上应用时遇到了这个问题。

```
s = ActiveSupport::SafeBuffer.new("asdf")
s.gsub(/a/) { puts $1.present? } 
```

`$1`将永远为零。您必须将 s 转换为`String`first

```
s = ActiveSupport::SafeBuffer.new("asdf")
s.to_str.gsub(/a/) { puts $1.present? } 
```

这将返回正确的答案。即使`s.to_s`在这里也没有用。

# sql - 为什么 oracle 认为此查询格式错误？

> ID：15654685
> 
> 赞同：2
> 
> 时间：2013-03-27T08:41:33.010
> 
> 标签：sql, oracle

我将以下 sql 发送到 oracle db，并获取`ORA-00907: missing right parenthesis`.

```
SELECT "LOGS"."ID", 
   "LOGS"."USER_ID", 
   "LOGS"."TIMESTAMP", 
   "LOGS"."SESSION_ID"        
FROM "LOGS"
INNER JOIN "USERS" ON ("LOGS"."USER_ID" = "USERS"."USER_ID") 
WHERE ("USERS"."USERNAME" IS NOT NULL 
  AND "LOGS"."TIMESTAMP" <= TO_TIMESTAMP(2013-03-26 23:59:59, 'YYYY-MM-DD HH24:MI:SS.FF')
  AND "LOGS"."TIMESTAMP" >= TO_TIMESTAMP(2013-03-26 00:00:00, 'YYYY-MM-DD HH24:MI:SS.FF') ) 
```

这个问题的原因可能是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T08:43:25.320

您的时间戳文字格式不正确。你忘记了引号。写

```
TO_TIMESTAMP('2013-03-26 23:59:59', 'YYYY-MM-DD HH24:MI:SS.FF') 
```

甚至（因为您使用的是 SQL 标准时间戳文字格式）

```
TIMESTAMP '2013-03-26 23:59:59' 
```

代替

```
TO_TIMESTAMP(2013-03-26 23:59:59, 'YYYY-MM-DD HH24:MI:SS.FF') 
```

# .net - 例外：无法检索此订阅的事件

> ID：15654688
> 
> 赞同：4
> 
> 时间：2013-03-27T08:41:45.423
> 
> 标签：.net, exchange-server

我创建了一个控制台应用程序，用于使用 Exchange 服务器收听发件箱邮箱。每当我向特定 Outlook 帐户发送邮件时，我的应用程序都会读取该邮件并执行一些业务功能。此应用程序的每个功能都运行良好。但是我面临一个问题，当应用程序运行很长时间时，比如一天或更长时间，我尝试发送邮件。那时应用程序无法处理该监听事件。发生异常。 **无法检索此订阅的事件。必须重新创建订阅**

我该如何处理这种情况？我认为这个问题不仅存在于交换服务器的情况下，而且是应用程序长时间运行时的常见问题。

# java - 在java中有时会自动关闭线程

> ID：15654693
> 
> 赞同：0
> 
> 时间：2013-03-27T08:42:16.827
> 
> 标签：java, multithreading, background

我通过扩展 Thread 在 java 中使用 Thread。该线程不断执行一些后台工作。但经过一段时间（大约 15 分钟），线程自动关闭，程序崩溃。请帮助如何在java中创建一个执行一些后台功能的长期运行线程，并且线程必须保持活动状态直到应用程序活动。但我的问题是我的线程甚至在我的应用程序关闭之前就关闭了。

最好的问候， AlenLee MJ

```
> Exception Coming:Execution protection violation
> #
> # A fatal error has been detected by the Java Runtime Environment:
> #
> #  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x1000cb77, pid=1028, tid=11996
> #
> # JRE version: 7.0_10-b18
> # Java VM: Java HotSpot(TM) Client VM (23.6-b04 mixed mode, sharing windows-x86 )
> # Problematic frame:
> # C  0x1000cb77
> #
> # Failed to write core dump. Minidumps are not enabled by default on client versions of Windows
> #
> # An error report file with more information is saved as:
> # E:\alen_project\QrCodeScanningAppForCCD\hs_err_pid1028.log
> #
> # If you would like to submit a bug report, please visit:
> #   http://bugreport.sun.com/bugreport/crash.jsp
> # The crash happened outside the Java Virtual Machine in native code.
> # See problematic frame for where to report the bug.
> # 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:47:56.463

线程在有任何工作要做时不应关闭。您可能会错过一些东西，并且您的线程会因为未处理的异常、内存泄漏或其他原因而停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:50:30.080

代码中一定有问题。你可以使用线程的 isAlive() 方法来查看线程是否还活着或死了。

线程只有在完成执行或抛出运行时异常时才能被杀死。

如果您寻求有关该主题的更多说明，请发布异常跟踪。如果你愿意，你可以使用 sleep(int) 方法或带有标志的 while 循环来显式地保持线程处于活动状态，但这不是一个好主意。

您的 main 方法可能会启动线程然后完成其执行。这会发生，因为两者都是独立的过程。

您可以在 main 中使用 myThreadReference.join() 方法，以便使 main 方法等到您的线程完成执行，然后可能会在您的 main 中使用线程填充的一些变量/数据！

# iphone - 《你的第二个 iOS 应用》：我如何实现一个 Singleton？

> ID：15654696
> 
> 赞同：3
> 
> 时间：2013-03-27T08:42:32.490
> 
> 标签：iphone, ios, objective-c, singleton

我还在努力改进[“我的第二个 iOS 应用”](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/Introduction/Introduction.html)，这是 Apple 提供的教程。这是故事板的图片，并添加了对应该发生的事情的评论。

![故事板的详细信息以及添加的评论](../Images/b32feeace68f7eac310d3d07103cdf1d.png)

单击完成按钮（步骤 3）时，实际屏幕应返回主菜单（3.a），而完成的 BirdSightingObject 应添加到`BirdMasterViewController`（3.b）列表中。所以我想我可以使用 Singleton，因为只能同时添加一个对象，这使得从不同类的访问变得更加容易。

在本教程中，已经为数据处理提供了一个类“ `BirdSighting`”，它可能被用作单例。但由于我只有 OOP 和设计模式的初级知识，我不知道我是否可以使用它，或者我是否必须参考现有的类来编写自己的。

其次：我一点也不知道如何访问方法`BirdMasterViewController`中的`(IBAction)done`以最终将对象保存在列表中。

^(注意：以下源代码部分由 Apple, Inc. 提供。请参阅[此](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/CodeListings/CodeListings.html)查看教程的完整代码列表。无意侵犯版权。)

`BirdSighting.h`：

```
@interface BirdSighting : NSObject

@property (nonatomic, copy) NSString *name;
@property (nonatomic, copy) NSString *location;
@property (nonatomic, strong) NSDate *date;

- (id)initWithName:(NSString *)name location:(NSString *)location date:(NSDate *)date;
- (id)initWithNameOnly:(NSString *)name date:(NSDate *)date;

@end 
```

`BirdSighting.m`：

```
#import "BirdSighting.h"

@implementation BirdSighting

- (id)initWithName:(NSString *)name location:(NSString *)location date:(NSDate *)date
{
    self = [super init];
    if (self)
    {
        _name = name;
        _location = location;
        _date = date;
        return self;
    }
    return nil;
}

-(id)initWithNameOnly:(NSString *)name date:(NSDate *)date
{
    self = [super init];
    if (self)
    {
        _name = name;
        _date = date;
        return self;
    }
    return nil;
}

@end 
```

该`(IBAction)done`方法，在`MainMenuViewController.m`：

```
- (IBAction)done:(UIStoryboardSegue *)segue
{
    if ([[segue identifier] isEqualToString:@"ReturnInput"])
    {
        AddLocationToSighting *addController = [segue sourceViewController];
        if (addController.birdSighting)
        {
            [self.dataController addBirdSightingWithSighting:addController.birdSighting];
            [[self tableView] reloadData];
        }
        [self dismissViewControllerAnimated:YES completion:NULL];
    }
} 
```

概括：

*   **我可以** `BirdSighting` **变成单身人士吗？**如果是这样，缺少什么？（无需为我编写代码，如果您提供提示，我希望我可以自己完成。）
*   **如何将对象保存在** `BirdMasterViewController`**?** 我不知道如何在`(IBAction)done`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T08:51:25.897

> 我可以将 BirdSighting 转换为单例吗？

不。

`BirdSighting`是一个*模型对象*，而不是一个集合，当然也不是一个需要全局访问的变量。但是，您可以创建一个单独的 Bird Sighting Manager，它控制鸟类观测列表，并可以根据需要添加、删除或序列化它们。虽然，请记住单例创建全局状态，这总是一件坏事。

> 如何将对象保存在 BirdMasterViewController 中？

这又回到了上面建议的单例。我还建议在添加控制器和主列表视图之间进行某种形式的委派，但我认为这可能是所有中间视图控制器的挑战。即使是通知也会起作用（使用`info`参数中的新发现）。

# sharepoint-2010 - 将 sharepoint 2010 与 yammer 集成

> ID：15654698
> 
> 赞同：1
> 
> 时间：2013-03-27T08:42:36.147
> 
> 标签：sharepoint-2010, web-parts, yammer

我目前正在使用 yammer Web 部件开发一个共享点站点，当我尝试这样做时。我遇到了一个问题。

我尝试了什么::

站点操作-> 编辑页面-> 插入-> Webpart-> Yammer 应用程序

之后我收到这样的错误

System.IO.FileNotFoundException：无法加载文件或程序集“Microsoft.Office.Server.UserProfiles，Version=14.0.0.0，Culture=neutral，PublicKeyToken=71e9bce111e9429c”或其依赖项之一。该系统找不到指定的文件。文件名：Yammer.SharePoint.Framework.SPUserProfileManager.GetProfile(String accountName, SPSite site) 的 Yammer.SharePoint.Framework 中的“Microsoft.Office.Server.UserProfiles，版本=14.0.0.0，Culture=neutral，PublicKeyToken=71e9bce111e9429c”。 YammerSharePointContentStore.GetUserEmail() 在 Yammer.SharePoint.Framework.DefaultYammerSettingsManager.EnsureYammerSession(String networkId) 在 Yammer.SharePoint.WebParts.YammerAppsWebPart.CreateChildControls()

我安装了共享点文档的 yammer 给定的所有先决条件。

是否有任何dll文件丢失或任何其他问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:00:42.163

问题是我没有正确部署 Yammer for sharepoint wsp。

相反，我尝试了[http://success.yammer.com/integrations/sharepoint/](http://success.yammer.com/integrations/sharepoint/)这个链接，其中选择了在线选项

安装：：

1\. 从 success.yammer.com 下载 Web 部件。

在站点操作中，单击站点设置。从图库中，单击解决方案。单击库。单击解决方案。单击上传。浏览到 Yammer for SharePoint Online wsp 文件。单击激活。之后，您可以轻松地为 yammer 添加 Web 部件

Pre Requisites:: 您的服务帐户需要配置 yammer 凭据希望这会有所帮助

# jquery - jQuery 表单验证 - 在计时器上突出显示字段

> ID：15654699
> 
> 赞同：0
> 
> 时间：2013-03-27T08:42:51.147
> 
> 标签：jquery, forms, validation, timer, highlight

我需要一些关于我的 jQuery 验证表单的帮助。除了错误文本框部分的突出显示之外，我设法让一切正常工作。我需要发生以下情况：

每当某个字段的规则被破坏时，该字段必须应用黄色背景色 3 秒；然后它变回白色。有人可以帮我吗？

这是我在 jsfiddle 的代码：http: [//jsfiddle.net/dawidspamer/qmY5j/](http://jsfiddle.net/dawidspamer/qmY5j/)

或者

```
<!DOCTYPE html>
<html>
<head>

<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.js"></script>
<script ></script>

<script type="text/javascript"> 
    $(document).ready(function() {  
     $("#form1").validate({ 

        rules: { 
          name: {
                  required: true,
                  minlength: 3
                },

          date: {
                  date:true
                },

          email: {// compound rule 
            required: true, 
            email: true 
                 }, 
        url: { 
          url: true 
        },

        }, 
        messages:
        { 
          name: {
          minlength: jQuery.format("At least {0} characters required.")
                }
        }

      }); 
    }); 
  </script> 

<style type="text/css"> 
    * { font-family: Verdana; font-size: 11px; line-height: 14px; } 
    .submit { margin-left: 125px; margin-top: 10px;} 
    .label { display: block; float: left; width: 120px; text-align: right; margin-right: 5px; } 
    .form-row { padding: 5px 0; clear: both; width: 700px; } 
    label.error { width: 250px; display: block; float: left; color: red; padding-left: 10px; } 
    input[type=text], textarea { width: 250px; float: left; } 
    textarea { height: 50px; } 
</style> 

</head>
<body>
  <form id="form1" method="post" action=""> 
        <div class="form-row"><span class="label">Name *</span><input type="text" name="name" /></div>
        <div class="form-row"><span class="label">Birthdate </span><input type="text" name="date" /></div>
        <div class="form-row"><span class="label">E-Mail *</span><input type="text" name="email" /></div>
        <div class="form-row"><span class="label">Home page</span><input type="text" name="url" /></div> 

      <div class="form-row"><input class="submit" type="submit" value="Submit"></div> 
    </form>

</body>
</html> 
```

我不知道从哪里开始，希望有人能够帮助我。我真的很感谢所有的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:45:30.043

您需要的是一个`highlight`临时设置背景颜色的函数，因此您可以将其添加到您的`validate`选项中：

```
 highlight: function (element, errorClass, validClass) {
     $(element).addClass(errorClass).removeClass(validClass).css('background-color','yellow');
     var ele = $(element);
     setTimeout(function () {
         ele.css('background-color','white');
     }, 3000);
 } 
```

结果将如下所示：http: [//jsfiddle.net/ryleyb/bMfsW/1/](http://jsfiddle.net/ryleyb/bMfsW/1/)

# ruby-on-rails - 如何根据多个 where 条件优化计数

> ID：15654704
> 
> 赞同：0
> 
> 时间：2013-03-27T08:43:01.620
> 
> 标签：ruby-on-rails, activerecord, rails-activerecord

```
foo_count = Foo.where(some_id: @some_id, :bar_val => 100).count 
```

这是计算符合特定标准的对象的最佳方法还是可以优化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:01:23.907

如果`@some_id`指的是 ActiveRecord 关联（即`SomeObject`has_many `Foo`），您可以执行以下操作：

```
foo_count = @some_object.foos.where(:bar_val => 100).count 
```

# android - 使用警报管理器时出现 java.lang.NullPointerException 错误

> ID：15654709
> 
> 赞同：1
> 
> 时间：2013-03-27T08:43:31.220
> 
> 标签：android, alarm

`java.lang.NullPointerException`当我使用警报管理器使用接收器发出通知时，正在显示此错误。

我从中选择一个项目，`listView`然后它调用`setNotification`方法，然后将重复警报设置为触发通知。

这是代码：

```
public class TimesActivity extends OptionsMenu {

    ArrayList<String> getTiName = new ArrayList<String>();
    ArrayList<String> getTiTime = new ArrayList<String>();
    ArrayList<String> getTiBroad = new ArrayList<String>();
    ArrayList<String> getTiImg = new ArrayList<String>();

    public DAOTimes timeDatabase = null;
    int minutes;
    String prNameSelected;
    String prTimeSelected;
    Long now, start;
    int period;
    AlarmManager am;

    // =============================================================================

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listvideo);
        timeDatabase = new DAOTimes(this);
        getTimes();
        showTimes();
    }               

    // =============================================================================

    @Override
    protected Dialog onCreateDialog(int id) {

        switch (id) {
        case 0:
            // Create out AlterDialog
            final CharSequence[] array = { "5 min", "10 min", "15 min",
                    "45 min", "60 min" };
            Builder builder = new AlertDialog.Builder(this);

            builder.setCancelable(true);

            builder.setNegativeButton("Cancel",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,
                                int whichButton) {
                        }
                    });
            builder.setSingleChoiceItems(array, -1,
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub
                            if (array[which] == "1 min") {
                                minutes = 1;
                            } else if (array[which] == "10 min") {
                                minutes = 10;
                            } else if (array[which] == "15 min") {
                                minutes = 15;
                            } else if (array[which] == "45 min") {
                                minutes = 45;
                            } else if (array[which] == "60 min") {
                                minutes = 60;
                            }

                            dialog.dismiss();
                        }
                    });
            AlertDialog dialog = builder.create();
            dialog.show();
        }
        return super.onCreateDialog(id);
    }

    // =============================================================================

    public void setNotification() {
        Toast.makeText(TimesActivity.this, "result : ",
                Toast.LENGTH_LONG).show();
        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(System.currentTimeMillis());
        calendar.add(Calendar.MILLISECOND, period);

        Intent intent = new Intent(this, NotAlarm.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0,
                intent, PendingIntent.FLAG_CANCEL_CURRENT);
        am.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(),
                30000, pendingIntent);

    }

    // =============================================================================

    public void showTimes() {
        final ListView listview = (ListView) findViewById(R.id.listView1);

        listview.setOnItemClickListener(new ListView.OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long id) {                

                prNameSelected = getTiName.get(position);
                prTimeSelected = getTiTime.get(position);
                String date = getIntent().getStringExtra("DAY_DATE");

                SimpleDateFormat format = new SimpleDateFormat(
                        "yyyy-MM-dd, HH:mm:ss.SS");
                format.setLenient(false);

                Calendar calendar = Calendar.getInstance();
                int year = calendar.get(Calendar.YEAR);
                int month = calendar.get(Calendar.MONTH);
                int day = calendar.get(Calendar.DAY_OF_MONTH);
                int hour = calendar.get(Calendar.HOUR_OF_DAY);
                int minute = calendar.get(Calendar.MINUTE);
                int second = calendar.get(Calendar.SECOND);
                int millisecond = calendar.get(Calendar.MILLISECOND);

                String time1 = year + "-" + (month + 1) + "-" + day + ", "
                        + hour + ":" + minute + ":" + second + "."
                        + millisecond;
                Date date1;
                try {
                    date1 = format.parse(time1);
                    now = date1.getTime();
                } catch (ParseException e) {                    
                    e.printStackTrace();
                }

                String time2 = date + ", " + prTimeSelected + ":00.00";
                Date date2;
                try {
                    date2 = format.parse(time2);
                    start = date2.getTime();
                } catch (ParseException e) {                    
                    e.printStackTrace();
                }

                int result = (int) (start - now);

                if (start > now) {
                    period = result;
                } else {
                    // period = start + (7 * 24 * 60 * 60 * 1000);
                }               

                Toast.makeText(TimesActivity.this, "result : " + period,
                        Toast.LENGTH_LONG).show();
                setNotification();
//              showDialog(0);
            }
        });

        listview.setAdapter(new TimesAdapter(TimesActivity.this, getTiName
                .toArray(new String[getTiName.size()]), getTiTime
                .toArray(new String[getTiTime.size()]), getTiBroad
                .toArray(new String[getTiBroad.size()]), getTiImg
                .toArray(new String[getTiImg.size()])));
    }
} 
```

接收器活动：

```
package com.shadatv.shada;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class NotAlarm extends BroadcastReceiver {

    NotificationManager nm;

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub

        NotificationManager nm = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);

        Notification.Builder builder = new Notification.Builder(context);
        builder.setSmallIcon(android.R.drawable.btn_star);
        builder.setTicker("notification");

        Notification notify = builder.getNotification();

        CharSequence title = "you have been notified";
        CharSequence details = "bvcburhvurh uhuh hghu hu";

        PendingIntent pending = PendingIntent
                .getActivity(context, 0, new Intent(), 0);
        notify.setLatestEventInfo(context, title, details, pending);

        nm.notify(0, notify);

    }

} 
```

日志猫：

```
03-27 10:39:33.550: E/AndroidRuntime(3890): FATAL EXCEPTION: main
03-27 10:39:33.550: E/AndroidRuntime(3890): java.lang.NullPointerException
03-27 10:39:33.550: E/AndroidRuntime(3890):     at com.shadatv.shada.TimesActivity.setNotification(TimesActivity.java:161)
03-27 10:39:33.550: E/AndroidRuntime(3890):     at com.shadatv.shada.TimesActivity$3.onItemClick(TimesActivity.java:228)
03-27 10:39:33.550: E/AndroidRuntime(3890):     at android.widget.AdapterView.performItemClick(AdapterView.java:292)
03-27 10:39:33.550: E/AndroidRuntime(3890):     at android.widget.AbsListView.performItemClick(AbsListView.java:1179)
03-27 10:39:33.550: E/AndroidRuntime(3890):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2707)
03-27 10:39:33.550: E/AndroidRuntime(3890):     at android.widget.AbsListView$1.run(AbsListView.java:3462)
03-27 10:39:33.550: E/AndroidRuntime(3890):     at android.os.Handler.handleCallback(Handler.java:605)
03-27 10:39:33.550: E/AndroidRuntime(3890):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-27 10:39:33.550: E/AndroidRuntime(3890):     at android.os.Looper.loop(Looper.java:137)
03-27 10:39:33.550: E/AndroidRuntime(3890):     at android.app.ActivityThread.main(ActivityThread.java:4507)
03-27 10:39:33.550: E/AndroidRuntime(3890):     at java.lang.reflect.Method.invokeNative(Native Method)
03-27 10:39:33.550: E/AndroidRuntime(3890):     at java.lang.reflect.Method.invoke(Method.java:511)
03-27 10:39:33.550: E/AndroidRuntime(3890):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
03-27 10:39:33.550: E/AndroidRuntime(3890):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
03-27 10:39:33.550: E/AndroidRuntime(3890):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T08:45:58.627

您忘记初始化`am`警报管理器。

像这样初始化它。

```
AlarmManager am = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE); 
```

# c# - 以其他形式打开表单，C# windows 表单

> ID：15654711
> 
> 赞同：1
> 
> 时间：2013-03-27T08:43:35.787
> 
> 标签：c#, winforms

我试图制作一个主屏幕，我在其中打开所有其他表单，我希望它优雅，所以我做了类似的事情

![在此处输入图像描述](../Images/ea57a2b905fcc58228a75eff949dcd30.png)

代码就是这样

```
 this.IsMdiContainer = true;
            City CityForm = new City();
            CityForm.MdiParent = this;
            CityForm.Show();
            CityForm.WindowState = FormWindowState.Maximized; 
```

但问题是当我打开另一个表格和另一个表格时..所有表格都保留下来，我认为既不有效也不聪明

所以有人有另一种方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T08:49:31.703

您是否考虑过为此使用选项卡式界面？类似于 Visual Studio 的编辑器部分，您将所有打开的文件（源代码和表单）作为单个选项卡？我个人认为这比 MDI 界面优雅得多。

为此，请`UserControl`为您的内容创建 s 而不是表单。当应该打开一个新的“视图”时，添加一个选项卡`TabControl`并创建相应的`UserControl`. 将此添加`UserControl`到选项卡并将`Dock`属性设置为`Fill`。

这很容易，而且今天的用户更熟悉选项卡式界面而不是 MDI 界面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T08:48:44.687

我会使用 TabControl，这是在同一个地方呈现多个表单的一种优雅方式：http: [//msdn.microsoft.com/library/system.windows.forms.tabcontrol.aspx](http://msdn.microsoft.com/library/system.windows.forms.tabcontrol.aspx)

> TabControl 包含选项卡页，这些选项卡页由您通过 TabPages 属性添加的 TabPage 对象表示。此集合中选项卡页的顺序反映了选项卡在控件中出现的顺序。用户可以通过单击控件中的选项卡之一来更改当前的 TabPage。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T08:46:17.133

您必须保留 的单个副本`City CityForm`，并在每次希望创建新表单时重复使用它（作为成员变量）

看看[Form.IsMdiContainer 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.ismdicontainer.aspx)，它的使用`Form mdiChildForm`应该接近你应该如何使用`City CityForm`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T08:54:54.277

您需要将表单“停靠”到 MDI 容器中；

```
City CityForm f1 = new City();
City.MdiParent = this;
City.Dock = DockStyle.Fill;
City.Show(); 
```

然后，您可以在需要时关闭表格。

但是，如果您希望它自动完成，那么我会按照**Thorsten Dittmar**的建议查看选项卡式界面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T08:49:36.633

尝试使用`CityForm.ShowDialog()`而不是`CityForm.Show()`.

# c# - 通过邮件发送时我无法断开字符串

> ID：15654712
> 
> 赞同：1
> 
> 时间：2013-03-27T08:43:36.173
> 
> 标签：c#, asp.net, gmail, smtpclient

当我使用它发送邮件时，我使用的正文字符串不会中断

```
NetworkCredential loginInfo = new NetworkCredential("bhavik778@gmail.com", mypassword);
MailMessage msg = new MailMessage();
msg.From = new MailAddress("bhavik778@gmail.com");
msg.To.Add(new MailAddress(tomyclient));
msg.Subject = "Message from CLB Website.";
msg.Body = "Following message was sent to you :-<br/>" + name + "<br/>" + email_id + "<br/>" + Query;
msg.IsBodyHtml = true;
SmtpClient client = new SmtpClient("smtp.gmail.com", 587);
client.EnableSsl = false;
client.UseDefaultCredentials = false;
client.Credentials = loginInfo;
client.Send(msg); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:46:56.653

标签被转义，`<br/>`因此它们不会影响电子邮件的 HTML 结构。这是为了以防您确实想在您的电子邮件消息中使用这些字符之一。

邮件发件人应将常规换行符 ( `\n`) 转换为电子邮件中的换行符，改为使用这些换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:53:31.683

如果它在一个电子邮件客户端中有效，而在另一个客户端中无效，则可能是与客户端的 HTML 解析有关的问题。尝试使用`<br />`额外的空间。

所有添加换行符的建议都与纯文本邮件有关，在 HTML 邮件中，客户端可以忽略换行符，就像它们在 HTML 页面中没有意义一样。但是，此行为可能会在邮件客户端之间不一致。

# android - 如何在表格中显示菜单项列表以及按钮？

> ID：15654713
> 
> 赞同：0
> 
> 时间：2013-03-27T08:43:36.417
> 
> 标签：android, user-interface

我想从包含 ItemName 和 price 的字符串数组中列出一个菜单。我为此使用了表格布局。从这个表格中，用户应通过为每个项目（行）使用数字选择器来选择他想要订购的数量。还有一个确认按钮，用于在选择数量后确认订单。

问题1-当我从字符串数组动态填充表格时，我作为静态放置的确认按钮出现在第一行，数据行仅出现在确认按钮之后。是否可以为这些按钮使用另一种布局和只有菜单项的表格布局？我尝试了不同的布局，但按钮消失了。

问题 2- 单击确认按钮后，应将选定的菜单项传递给下一个活动进行处理。我怎样才能做到这一点？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:58:40.367

我建议创建一个[自定义组件](http://developer.android.com/guide/topics/ui/custom-components.html)，其中包含表中一行中的所有元素（产品名称、数字选择器、确认按钮等）。然后使用列表视图并用该自定义组件的实例填充它。这有望解决您的许多问题，并使您的代码更容易理解。

尝试类似于本指南的内容： [http ://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

祝你好运！

# python - 一种将 gnu 屏幕输出“管道”到正在运行的 python 进程的方法？

> ID：15654714
> 
> 赞同：2
> 
> 时间：2013-03-27T08:43:39.130
> 
> 标签：python, linux, cherrypy, gnu-screen

我正在开发一个小软件，它能够控制（启动、停止、重启等 - 使用 gnu 屏幕）每个可能的游戏服务器（有命令行），并包括一个带有完整网络界面的小型独立网络服务器（您可以从那里访问 gnu 屏幕，就像您已连接到它一样）在 linux 上。

几乎一切正常，现在需要一些代码清理。

它是用python编写的，独立的网络服务器使用cherrypy作为框架。

问题是，Web 界面上的 gnu 屏幕输出是通过日志文件完成的，这在启用时会导致高 I/O（好的，这取决于正在运行的内容）。

有没有办法将输出直接传送到独立的网络服务器（它必须很快）？也许有套接字的东西，但我还不知道如何处理它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:07:36.113

如果您创建一个 FIFO`mkfifo mypipe.log`并将您的日志写入其中，您应该能够从 python 打开它并读入[。Python 和 FIFO](https://stackoverflow.com/questions/5084210/python-and-fifos)可能会有所帮助。如果您还想要日志的硬拷贝，您可以通过管道输出`tee`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:17:27.213

写入管道会起作用，但这很危险，因为当您从管道读取数据的速度不够快时，您的命令（写入管道的命令）会阻塞。

更好的解决方案是创建一个在套接字上发布标准输入的本地“日志服务器”。现在您可以将命令的输出通过管道传输到从标准输入读取的日志服务器，并将输入的副本发送给连接到它的套接字的任何人。

当没有人连接时，输出将被忽略。

编写这样一个“日志服务器”是微不足道的（我猜在 Python 中大约需要 1 小时）。

另一个优点是您可以将部分日志文件保存在内存中（比如最后 100 行）。当您的命令崩溃时，您仍然可以从日志服务器获取最后的输出。

为此，您不得在 stdin 返回 EOF 时终止日志服务器。缺点是您需要自己清理过时的日志服务器。当您使用套接字时，您可以从您的网络应用程序中向它发送一个“kill”命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-18T02:56:24.730

您可以使用 syslog，甚至更好的是，您可以将其配置为将所有日志发送到数据库！

# asp.net-mvc - 如何在 EditorTemplate 中获取完全限定的成员名称？

> ID：15654716
> 
> 赞同：4
> 
> 时间：2013-03-27T08:43:44.587
> 
> 标签：asp.net-mvc, asp.net-mvc-4, modelmetadata

我有一个 ASP.NET MVC 4 站点，我将一个嵌套属性传递给一个 EditorTemplate 并使用它构建字段名称`ViewData.ModelMetadata.PropertyName`，但这会获取子属性的属性名称，而不是我的属性的完整点符号名称编辑。

一个例子将最好地说明：

给定以下类型

```
public class EditEntityViewModel
{
     // elided
     public Entity Entity { get; set}
}

public class Entity 
{
    // elided
    public string ImageUrl { get; set; }
} 
```

我的编辑和创建视图如下：

```
@model EditEntityViewModel

<div>
    @Html.EditorFor(model => model.Entity.ImageUrl , "_ImageUploader")
</div> 
```

_ImageUploader.cshtml 编辑器模板如下

```
@model System.String

<div class="uploader">
    @Html.LabelFor(model => model)
    @Html.HiddenFor(model => model)
    <div data-rel="@(ViewData.ModelMetadata.PropertyName)">   
        <input type="file" name="@(ViewData.ModelMetadata.PropertyName)Upload" />
    </div>
</div> 
```

呈现的 HTML 看起来像这样

```
<div>
   <div class="uploader">
        <label for="Entity_ImageUrl">Image</label>
        <input id="Entity_ImageUrl" name="Entity.ImageUrl" type="hidden"/>
        <div data-rel="ImageUrl"> <!-- Problem -->
             <input type="file" name="ImageUrlUpload" /><!-- Problem -->
        </div>
    </div>
</div> 
```

请注意，在我调用的第 5 行和第 6 行`ViewData.ModelMetadata.PropertyName`，我只获得了子属性名称`"ImageUrl"`，但我想要`"Entity.ImageUrl"`。如何获得这个完全限定的名称？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T09:15:11.103

使用`@Html.NameFor(model => model)`/`@Html.NameForModel()`而不是`ViewData.ModelMetadata.PropertyName`，此方法应为您提供所需的名称。它是[Mvc3Futures](http://nuget.org/packages/Mvc3Futures/)包的一部分并被添加到 MVC4 中。

# iphone - 如何根据ios中的图像大小保留imageview大小？

> ID：15654721
> 
> 赞同：1
> 
> 时间：2013-03-27T08:43:59.323
> 
> 标签：iphone, uiimageview

嗨，在我的 iPad 应用程序中，我有一个图像视图列表，数据表示我从服务器获取的那些图像视图的图像。我能够毫无问题地在受尊重的图像视图中加载所有图像。但在这里我观察到一个异常现象，即很少有图像在 imageviews 中的分辨率看起来不错，而很少有图像在 imageviews 中看起来被拉伸。据我所知，我觉得这是发生的，因为图像大小大于图像视图大小，所以它发生了。但是我从服务器获取的数据，所以我无法控制大小。因此，任何人都可以展示如何解决此问题的任何解决方案。意味着我不想在图像视图中拉伸图像。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:57:15.997

正如 spynet 提到的，尝试 UIViewContentModeScaleAspectFit

或添加此方法以将图像大小调整为您想要的大小

```
- (UIImage *)scaleAndRotateImage:(UIImage *)imagerotate  { 

        CGImageRef imgRef = imagerotate.CGImage;

    CGFloat width = CGImageGetWidth(imgRef);
    CGFloat height = CGImageGetHeight(imgRef);

    CGAffineTransform transform = CGAffineTransformIdentity;
    CGRect bounds = CGRectMake(0, 0, width, height);

    CGFloat boundHeight;

    boundHeight = bounds.size.height;  
    bounds.size.height = bounds.size.width; 
    bounds.size.width = boundHeight;
    transform = CGAffineTransformMakeScale(-1.0, 1.0);
    transform = CGAffineTransformRotate(transform, M_PI / 2.0); //use angle/360 *MPI

    UIGraphicsBeginImageContext(bounds.size);   
    CGContextRef context = UIGraphicsGetCurrentContext();   
    CGContextConcatCTM(context, transform); 
    CGContextDrawImage(context, CGRectMake(0, 0, width, height), imgRef);
    UIImage *imageCopy = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
// UIImageWriteToSavedPhotosAlbum(imageCopy, nil, nil, nil);
return imageCopy;   

} 
```

并添加它以调用该方法

```
UIImage *imgResized=[self scaleAndRotateImage:imageReceived]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:13:12.973

试试这个，我希望这会有所帮助

```
yourImageView.contentMode=UIViewContentModeScaleAspectFit; 
```

# ios - 如何拦截兄弟视图的手势？

> ID：15654725
> 
> 赞同：0
> 
> 时间：2013-03-27T08:44:09.510
> 
> 标签：ios, uigesturerecognizer

如果有三个视图：

```
视图1
    ---子视图1
    ---子视图2

```

通常，subview2 将处理每个手势，但是，就我而言，我只需要 subview2 来处理捏合手势，而其他手势（如平移和旋转）将传递给 subview1，有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:51:49.930

从[UIGestureRecognizerDelegate-Protocol](http://developer.apple.com/library/ios/documentation/uikit/reference/UIGestureRecognizerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIGestureRecognizerDelegate/gestureRecognizer%3ashouldRecognizeSimultaneouslyWithGestureRecognizer%3a)实现这个方法：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
    return true;
} 
```

# sql - 描述语句中的“空”列是什么？

> ID：15654726
> 
> 赞同：1
> 
> 时间：2013-03-27T08:44:11.777
> 
> 标签：sql, oracle

结果中的“Null”列是什么意思`DESCRIBE`？

前任：

```
decribe table1;

Name                 Null       Type
------------------  ----------  ---------------
Number                          Number(5)
Name                            Varchar2(25)
DeptNo              NotNull     Number(5) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T08:45:08.683

它告诉您是否`NULL`允许在此列中作为值。

如果 describe 语句没有返回该列的`NULL`值，则允许值，如果返回`NotNull`，`NULL`则不允许值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:53:48.107

列名的空值

您可以在创建新表时将列名指定为“可空”或不可空。

CREATE TABLE table_name (col1 VARCHAR2(20) **NULL** ,col2 VARCHAR2(35) **NOT NULL** )

如果您尝试为 col2 插入 NULL 值，您将收到错误消息 [ORA-01400]。

但我们应该记住，这不像 key[primary,unique]。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T11:07:26.043

如果不允许将列设置为 NULL，则 USER_TAB_COLUMNS.NULLABLE 包含“N”，如果允许将列设置为 NULL，则包含“Y”。如果您想对 DESCRIBE 的行为进行建模，您的语句看起来应该类似于：

```
select column_name as Name,
       CASE nullable WHEN 'N' THEN 'NotNull' WHEN 'Y' THEN NULL END AS NULLABLE,
       data_type || '(' || data_length || ')' as TYPE
  from user_tab_columns
  where table_name='EMP' 
```

分享和享受。

# regex - 查找相似字符串的正则表达式

> ID：15654727
> 
> 赞同：-1
> 
> 时间：2013-03-27T08:44:13.997
> 
> 标签：regex

```
$string ='<p>Jane has:&nbsp;{num1} times&nbsp;<img alt="" src="/ckfinder/userfiles/images/shapes/button4.jpg" style="height:59px; width:60px" /></p>

<p>Her Father gives her:&nbsp;{num2} times&nbsp;<img alt="" src="/ckfinder/userfiles/images/shapes/button4.jpg" style="height:59px; width:60px" /></p>

<p>&nbsp;</p>

<p>Total No of Buttons She Have: ans</p>

<p>&nbsp;</p>

<p>&nbsp;</p>
'; 
```

在这个字符串中，我希望提取这两行：

1.  简有：{num1} 次
2.  她的父亲给了她：{num2} 次

另外，我需要提取不匹配两个字符串的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:56:35.767

尝试这个 。它在 python 中完美运行 :)

```
re.findall(r'[\w :]+[\{][a-z]{3}[0-9]*[\}][\w ]*',st) 
```

# jquery - 将连接对象从 jQuery 传递给 ASP.Net Web 服务

> ID：15654728
> 
> 赞同：1
> 
> 时间：2013-03-27T08:44:23.577
> 
> 标签：jquery, asp.net, web-services

我有一个提供 AS400 数据的网络服务。该网络服务有一个固定的连接字符串，我希望将其设为动态。请参见下面的代码：

```
 Public Function GetData(sql As String) As DataTable

            Dim _data As DataTable

            Try

                Dim s As String = "Provider=IBMDA400"

                s &= ";Data Source=" & "x.x.x.x"
                s &= ";User Id=" & "USER"
                s &= ";Password=" & "PASS"
                s &= ";Default Collection=" & "AAABBB"

                con = New OleDbConnection(s)

                Dim cmd As New OleDbCommand

                With cmd
                    .Connection = con
                    .CommandType = CommandType.Text
                    .CommandText = sql
                End With

                Dim dap As New OleDbDataAdapter(cmd)

                con.Open()

                Dim dat As New DataSet

                dap.Fill(dat)

                con.Close()
                con.Dispose()

                _data = dat.Tables(0)

            Catch ex As Exception

                _data = New DataTable

            End Try

            Return _data

        End Function 
```

使用上述内容的示例 Web 服务功能：

```
<WebMethod()> _
        Public Function GetPicklistLines(picklist As String) As List(Of PicklistLine)

            Dim lines As New List(Of PicklistLine)
            Dim line As PicklistLine

            sql = "select " & _
                                    "OLPLNO,OLPLLI,OLORNO,OLLINE,OLPRDC,OLDESC,OLOQTS,OLCQTS,OLUNIT,OLORDS,PGDRNR, AAV01, AAV02, NAV03 " & _
                                    "from SRBSOL " & _
                                    "left outer join SRBPRG on PGPRDC=OLPRDC " & _
                                    "left outer join Z2OOCFGF on F0ERNC=OLORNO and F0A2NB=OLLINE " & _
                                    "where OLPLNO=" & picklist & " and OLSTAT <>' D'"

            data = GetData(sql)

            ' TODO: insert ROW 0 to set active:
            sql = "insert " & _
                    "into SRBSOL " & _
                    "(OLPLNO, OLPLLI) " & _
                    "values " & _
                    "(" & picklist & "," & 0 & ") " & _
                    "where OLPLNO=" & picklist & " and OLSTAT <>' D'"

            For Each dr As DataRow In data.Rows

                ' TODO: get reported quantity:
                sql = "select " & _
                        "RCBAQT " & _
                        "from Z2OOREXC " & _
                        "where RCPLNO='" & picklist & "' and RCPLLI='" & dr("OLPLLI") & "'"

                line = New PicklistLine

                With line
                    .PicklistNumber = picklist
                    .OrderNumber = IIf(TypeOf (dr("OLORNO")) Is DBNull, "", dr("OLORNO"))
                    .PicklistLinenumber = IIf(TypeOf (dr("OLPLLI")) Is DBNull, "", dr("OLPLLI"))
                    .Item = IIf(TypeOf (dr("OLPRDC")) Is DBNull, "", dr("OLPRDC"))
                    .ItemDescription = IIf(TypeOf (dr("OLDESC")) Is DBNull, "", dr("OLDESC"))
                    .InnerColor = IIf(TypeOf (dr("AAV01")) Is DBNull, "", dr("AAV01"))
                    .OuterColor = IIf(TypeOf (dr("AAV02")) Is DBNull, "", dr("AAV02"))
                    .Length = IIf(TypeOf (dr("NAV03")) Is DBNull, "", dr("NAV03"))
                    .Unit = IIf(TypeOf (dr("OLUNIT")) Is DBNull, "", dr("OLUNIT"))
                    .Quantity = IIf(TypeOf (dr("OLCQTS")) Is DBNull, "", CInt(dr("OLCQTS")))
                    .Needed = IIf(TypeOf (dr("OLOQTS")) Is DBNull, "", CInt(dr("OLOQTS")))
                End With

                lines.Add(line)

            Next

            Return lines

        End Function 
```

上面的函数被 jquery 调用：

```
function GetAllPicklists() {
    $('#page_overview_search').addClass('ui-disabled');
    $("#Picklists").html('');
    //$("#MemberList").addClass("loading");
    $.ajax({
        type: "POST",
        url: "http://" + host + "/services/picklists.asmx/GetAllPicklists",
        data: "{'customer':'" + $('#select-customer').val() + "', 'route':'" + $('#select-route').val() + "'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: OnGetAllPicklistsSuccess,
        error: OnError
    });
} 
```

我已经修改了 webservice 函数以提供 JSON，但正在进行中...... :)

一切都按预期工作，但我希望使*GetData*中 的连接字符串**s**动态。我应该如何设置一个（尚未定义的）连接对象，其值为**Data Source** (IP)、**User Id**、**Password**和**Default Collection**。具体如何在 jquery POST**数据**参数中传递该连接对象和服务函数调用参数？以后登录时可以设置这个连接对象吗？

 *******请随时提出问题以澄清您不清楚的事情。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:33:34.163

通过服务调用传递数据不是一个好的选择。您的 sql 连接字符串很容易被黑客入侵。您可以使用 wcf 服务并使用消息契约来传递信息。*******

# .htaccess - htaccess RewriteRule 不处理案例

> ID：15654737
> 
> 赞同：0
> 
> 时间：2013-03-27T08:45:12.033
> 
> 标签：.htaccess, mod-rewrite

平台：Windows 7 Pro 64 位

我的开发机器上安装了 Apache 2.2（基本上是 WAMP 设置）。我在主要的 htdocs 中安装了几个基于 Code Igniter 的网站。但是，我在处理主 htdocs 目录下的子目录时遇到了困难。

这是我遇到 .htaccess 问题的地方（位于 htdocs 下的 /CILearn 目录中）：

```
 RewriteEngine on
    RewriteBase /CILearn/
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ /CILearn/index.php/$1 [NC,L] 
```

子目录是 htdocs 下的 CILearn。所以 URL 看起来像这样：

```
 localhost/CILearn
    localhost/CILearn/site
    localhost/cilearn 
```

现在这可行，并且“站点”是一个控制器，因此 index.php 的重定向正在工作。

这不起作用：

```
 localhost/cilearn/site 
```

有人可以解释这些规则应该在哪里以及为什么不处理案件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:51:06.857

消除

```
RewriteBase /CILearn/ 
```

并再次测试它，请参阅此页面[http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritebase](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritebase)了解更多信息`RewriteBase`

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /CILearn/index.php/$1 [NC,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:25:16.760

当您的文件系统路径区分大小写时，可能会发生这种情况。您在这里有两个选择。

[`mod_speling`](http://httpd.apache.org/docs/2.4/mod/mod_speling.html)在根目录 .htaccess 中使用（*不是*/CILearn/.htaccess）

```
CheckSpelling on
CheckCaseOnly on 
```

确保`mod_speling`使用类似的东西激活

```
LoadModule speling_module /path/to/apache2/modules/mod_speling.dll 
```

或者，您可以[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)为`cilearn`. 这必须在根目录 .htaccess 中完成

```
RewriteEngine on
RewriteRule ^cilearn/(.*) /CILearn/$1 [NC,L] 
```

# regex - 网址正则表达式

> ID：15654738
> 
> 赞同：1
> 
> 时间：2013-03-27T08:45:12.280
> 
> 标签：regex, url

我正在编写一个正则表达式来检查网站 URL，它应该检查以下情况： 通过：-www.example.com-example.com-www.example.com/something-example.com/something 并
阻止 所有

其他 url

除了一个案例（www.example）之外，它对所有事情都非常有效，我该如何处理这个案例
“www.example”不能通过

我的正则表达式：

```
^[a-zA-Z0-9][a-zA-Z0-9]+([.][a-zA-Z0-9]+)+(/.*)?$ 
```

有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:28:05.830

试试这个：

```
^(www\.)?(?!www)[a-zA-Z0-9]+\.[a-zA-Z]{2,6}/?[a-zA-Z0-9]+$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:28:47.793

这是我能得到的最好的

```
(www.){1}[a-zA-Z0-9]+[.]{1}[\w]+[/\w]* 
```

**结果**

```
www.example.com     - true
www.example.com/    - true
www.example.com/xyx     - true
www.example.com/xy/s/   - true
www.example.        - False
www.example         - False 
```

请注意，这不会接受'example.com' Tested @ [http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T18:11:54.000

尝试这个：

```
_^(?:(?:https?|ftp)://)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\x{00a1}-\x{ffff}0-9]+-?)*[a-z\x{00a1}-\x{ffff}0-9]+)(?:\.(?:[a-z\x{00a1}-\x{ffff}0-9]+-?)*[a-z\x{00a1}-\x{ffff}0-9]+)*(?:\.(?:[a-z\x{00a1}-\x{ffff}]{2,})))(?::\d{2,5})?(?:/[^\s]*)?$_iuS 
```

不过，我不能要求信用；我从这里拉了它：

[http://mathiasbynens.be/demo/url-regex](http://mathiasbynens.be/demo/url-regex)

他们有一个合理的图表，其中包含针对每个表达式的每种情况的通过/失败的大量表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-07T17:57:44.820

这是 Django 1.5.1 中使用的实际 URL 验证正则表达式：

```
import re
regex = re.compile(
        r'^(?:http|ftp)s?://'  # http:// or https://
        r'(?:(?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\.)+(?:[A-Z]{2,6}\.?|[A-Z0-9-]{2,}\.?)|'  # domain...
        r'localhost|'  # localhost...
        r'\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}|'  # ...or ipv4
        r'\[?[A-F0-9]*:[A-F0-9:]+\]?)'  # ...or ipv6
        r'(?::\d+)?'  # optional port
        r'(?:/?|[/?]\S+)$', re.IGNORECASE) 
```

这会处理 ipv4 和 ipv6 地址以及 GET 参数。

在这里的[代码](https://github.com/django/django/blob/master/django/core/validators.py)中找到，第 44 行。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-27T09:28:51.023

不是*最好*的正则表达式，但在许多情况下都有效：

```
^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}(/.*)*$ 
```

编辑：

```
^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+(com|org|info|biz|us)/?([^/]*)$ 
```

允许尾部斜杠：

```
^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+(com|org|info|biz|us)/?([^/]*)/?$ 
```

# android - SQLiteOpenHelper 同步

> ID：15654745
> 
> 赞同：9
> 
> 时间：2013-03-27T08:45:47.123
> 
> 标签：android, synchronization, weak-references, sqliteopenhelper

所以我想出了一些想法，我想知道它是否可以实现。

假设我有多个表（数据库模型），每个表都由某个类表示。我不会将单例模式与 open helper 一起使用，所以我创建了一些简单的类来提供数据库的单个实例。我的想法是，只要所有表都包含对 SQLiteDatabase 的引用（由 open helper 返回），它们都将使用相同的数据库实例，并且可能不需要与数据库同步工作，因为 open helper 会这样做。当最后一个表完成它的工作，GC 将收集打开的帮助程序（因为最后一个引用将是弱引用）-> finalize() 被调用，并且我在此方法期间关闭了数据库以防止来自操作系统的任何警告。我的问题是：这可行吗？它会自动关闭数据库吗？它会泄漏或抛出一些异常吗？

这是我的课：

```
public class DatabaseHelper {

private static WeakReference<SomeCustomOpenHelper> sDBOpenHelper;

private void notifyDBCreate(SQLiteDatabase db) {
    for (DBTable table : mTables) {
        table.onDBCreate(db);
    }
}

private void notifyDBUpgrade(SQLiteDatabase db) {
    for (DBTable table : mTables) {
        table.onDBUpgrade(db);
    }
}

public SQLiteDatabase getDatabase(boolean readOnly) {
    SomeCustomOpenHelper dbHelper = sDBOpenHelper.get();
    if (dbHelper == null) {
        dbHelper = new SomeCustomOpenHelper(context, name, factory, version, new DatabaseEventsCallback());
        sDBOpenHelper = new WeakReference<SomeCustomOpenHelper>(dbHelper);
    }
    if (readOnly) {
        return dbHelper.getReadableDatabase();
    } else {
        return dbHelper.getWritableDatabase();
    }
}

private class DatabaseEventsCallback implements IDatabaseEventsCallback {

    @Override
    public void onCreate(SQLiteDatabase db) {
        notifyDBCreate(db);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db) {
         notifyDBUpgrade(db);
    }

}

interface IDatabaseEventsCallback {
    void onCreate(SQLiteDatabase db);

    void onUpgrade(SQLiteDatabase db);
}

private static class SomeCustomOpenHelper extends SQLiteOpenHelper {

    private IDatabaseEventsCallback mCB;

    public SomeCustomOpenHelper(Context context, String name, CursorFactory factory, int version, IDatabaseEventsCallback cb) {
        super(context, name, factory, version);

        mCB = cb;
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        mCB.onCreate(db);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        mCB.onUpgrade(db);
    }

    @Override
    protected void finalize() throws Throwable {
        this.close();
        super.finalize();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:01:46.557

也没有真正知道答案，但感兴趣并查找了它。

答案在此处正确写出； [http://blog.foxxtrot.net/2009/01/a-sqliteopenhelper-is-not-a-sqlitetablehelper.html](http://blog.foxxtrot.net/2009/01/a-sqliteopenhelper-is-not-a-sqlitetablehelper.html)

但基本上信息的核心是；

> 我创建了三个 SQLiteOpenHelper 类，每个表一个，尽管它们都只引用了一个数据库文件。
> 
> 这就是一切崩溃的地方。Android 根据与之关联的包、数据库的名称和您提供的版本号来维护数据库的版本。包和名称决定了设备上的路径，而版本存储在设备上（某处），以便它知道何时需要调用 OpenHelper 的 onUpgrade 事件处理程序。事实证明，如果在 SQLiteOpenHelper 构造函数中，它确定数据库已经存在，它根本不会调用您的 onCreate 或 onUpgrade 方法，即使之前从未调用过进行调用的特定类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T09:56:23.850

当我在做一个项目时，我也遇到过同样的问题。我还怀疑静态实例是否使用了足够的内存并导致了相当大的内存泄漏。

我不确定创建弱引用是否能保证收集数据库实例。然而，一种可能的解决方法是：一旦您的所有数据库事务完成并关闭数据库，就为静态数据库实例分配一个空值。这可以确保数据库实例不再分配任何内存。

让我知道这是否有效，或者是否有更好的解决方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T21:35:06.687

你可以这样做。正如您所说，锁定应该发生在 SQLite 上，而我从未听说过这方面的问题，所以您应该对此没问题。您唯一的限制是所有表都必须进入同一个数据库，因为 Android 目前只允许您拥有一个文件。

关闭数据库是另一回事，这就是为什么使用单例模式实际上很有趣（您避免一直关闭+打开）。尽管如此，使用您的方法，您只需要确保在完成后关闭数据库。就我而言，这不会自动完成。

此外，Lars Vogel 还撰写了有关 Android 中的数据库访问的非常有用且详细的文章。你可能想看看那里。[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T11:58:27.357

您可以对所有表使用一个开放的助手。我在我的应用程序中使用单个实例也是这样。

```
public static synchronized DatabaseHelper getInstance(Context ctx)
    {
        if (dbhelper == null) {

            dbhelper = new DatabaseHelper(ctx);
        }

        return dbhelper ;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T06:25:35.927

> 我的问题是：这可行吗？它会自动关闭数据库吗？它会泄漏或抛出一些异常吗？

不，它不会自动关闭数据库，当您的应用程序需要 DATABASE 对象并且操作系统发现您的一些数据库即时处于活动状态时，Android 框架会尝试连接该对象引用（这可能是弱引用）

我不得不说，我不建议按需或临时打开和关闭 DATABASE。尽早打开数据库并在整个活动期间保持打开状态并在活动完成或暂停时关闭它总是很好的。

# javascript - Bootstrap：单击时将类“折叠”添加到其他按钮

> ID：15654746
> 
> 赞同：0
> 
> 时间：2013-03-27T08:45:48.817
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在尝试将多个可折叠面板添加到导航栏中。到目前为止，当面板 2 打开时，我设法折叠面板 1。但它不会将按钮 1 更改回折叠状态。当单击按钮 2 时，有什么方法可以将“折叠”类添加到按钮 1？

```
 <div id="header">
<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <button type="button" class="btn collapsed" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-remove"></span> button 1
      </button>
      <button type="button" class="btn collapsed" data-toggle="collapse" data-target=".nav-collapse2">
      <span class="icon-remove"></span> button 2
      </button>
      <a class="brand" href="./index.html">Bootstrap</a>
      <div class="nav-collapse collapse">
        <ul class="nav">
          <li class="active">
            <a href="./index.html">Home</a>
          </li>
          <li class="">
            <a href="./getting-started.html">Get started</a>
          </li>
          <li class="">
            <a href="./scaffolding.html">Scaffolding</a>
          </li>
          <li class="">
            <a href="./base-css.html">Base CSS</a>
          </li>
        </ul>
      </div>
      <div class="nav-collapse2 collapse">
        <ul class="nav">
          <li class="active">
            <a href="./index.html">Home</a>
          </li>
          <li class="">
            <a href="./getting-started.html">Get started</a>
          </li>
          <li class="">
            <a href="./scaffolding.html">Scaffolding</a>
          </li>
          <li class="">
            <a href="./base-css.html">Base CSS</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div> 
```

你可以在这里看到演示：http: [//jsfiddle.net/Kierlens/3Uet8/](http://jsfiddle.net/Kierlens/3Uet8/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:05:05.510

```
$(".btn").on("vclick", function(){
    $(".btn").addClass("collapsed");
    $(this).removeClass("collapsed");
    return false;
}); 
```

# python - 获取cs中的所有值（Referer）

> ID：15654748
> 
> 赞同：0
> 
> 时间：2013-03-27T08:45:50.857
> 
> 标签：python

我有一个 IIS 服务器日志文件，您知道它有一个名为 cs(Referer) 的字段。我想获取此列下的所有值？请帮助我？

```
#!/usr/bin/env python
f = open('log.txt','r')
data = f.read()

import re

#print data

def find(pat,text):
        match = re.search(pat,text)
        if match: print match.group()
        else: print 'not found!' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:12:51.500

逻辑如下：

1.  找到“#Fields:”注释并找出列的索引
2.  跳过以“#”开头的注释行
3.  打印我们感兴趣的列

代码：

```
#!/usr/bin/env python
f = open('log.txt','r')

columns = {}

for line in f.readlines():
    if line.startswith('#Fields:'):
        for index, substring in enumerate(line.split(' ')):
            columns[substring] = index
    elif line.startswith('#'):
        continue
    else:
        print line.split(' ')[columns['cs(User-Agent)']] 
```

# ios - NSString sizeWithFont:constrainedToSize: 计算错误的高度

> ID：15654754
> 
> 赞同：0
> 
> 时间：2013-03-27T08:46:00.220
> 
> 标签：ios, uitableview, nsstring, uilabel, sizewithfont

我有一个字幕样式 UITableViewCell，它的高度会根据每个字段的文本长度动态变化。问题是如果标签有多行，则 textLabel 的高度（CGSize 大小）不会增加。

![http://s10.postimg.org/6urher7s9/text_Label.png](../Images/596d8341a2152d0daf1778332cd4c6bc.png)

奇怪的是，detailTextLabel 的高度正在增加（CGSize size2）。计算两个高度的代码是相同的。

![http://s21.postimg.org/m0af4gyw7/detail.png](../Images/32f4c93137431afebb4cc739b1757e32.png)

这是我的功能：

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    SETLISTFMNS0Song *song = [[[selectedSetlist.sets objectAtIndex:indexPath.section] songs]objectAtIndex:indexPath.row];
    CGSize size = [song.name sizeWithFont:[UIFont fontWithName:setlistFont size:labelFontSize] constrainedToSize:CGSizeMake(self.setsTable.bounds.size.width, CGFLOAT_MAX)];
    NSLog(@"Label: \"%@\" \tLabel Size: %f W %f H", song.name, size.width, size.height);

    NSMutableString *detail;
    if ([song cover]) {
        detail = [[NSMutableString alloc] initWithFormat:@"(%@ cover)", [[song cover] name]];
    }
    if ([song with]) {
        if (!detail) {
            detail = [[NSMutableString alloc] initWithFormat:@"(with %@)", [[song with] name]];
        }
        else {
            [detail appendFormat:@" (with %@)", [[song with] name]];
        }
    }
    if ([song info]) {
        if (!detail) {
            detail = [[NSMutableString alloc] initWithFormat:@"(%@)", [song info]];
        }
        else {
            [detail appendFormat:@" (%@)", [song info]];
        }
    }

    if (detail.length != 0) {
        CGSize size2 = [detail sizeWithFont:[UIFont fontWithName:setlistFont size:detailFontSize] constrainedToSize:CGSizeMake(self.setsTable.bounds.size.width, CGFLOAT_MAX)];
        size.height += size2.height;
        NSLog(@"Detail Label: \"%@\" \tDetail Label Size: %f W %f H", detail, size2.width, size2.height);
    }

    return size.height + 5;
} 
```

我还在 cellForRowAtIndexPath 中将 textLabel 的 numberOfLines 属性设置为 0 以支持多行：

```
cell.textLabel.numberOfLines = 0;
cell.detailTextLabel.numberOfLines = 0; 
```

**更新：**感谢@josh，我现在明白为什么会这样了。我将宽度约束设置为 UITableView 的宽度，它太宽了。任何人都知道如何在创建 UILabel 之前找到它的宽度？哈！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:15:37.793

您计算大小的字符串有多长？我问是因为您的`sizeWithFont:constrainedToSize:`功能限制在单元格的全宽，但您的标签可能不是单元格的全宽。

我怀疑正在发生的事情`song.info`只是足够短，如果线条是单元格的全宽，它可以放在一条线上，并且你的歌曲`detail`足够长，它可以计算正确的行数，但不是那么长超过计算高度。

综上所述，我认为您需要做的是找出宽度`textLabel`并将`detailTextLabel`您的约束设置为这些值。

**更新 - 一种计算标签宽度的方法**

由于单元格内标签的宽度取决于单元格的宽度，并且由于当时并未创建单元格`heightForRowAtIndexPath:`，因此我们需要想出一种方法来在标签宽度之前知道它们的宽度被设置。唯一的方法是自己设置宽度。这是我的做法：

MyCell.h

```
#import <UIKit/UIKit.h>

@interface MyCell : UITableViewCell

+ (CGFloat)textLabelWidthForCellOfWidth:(CGFloat)cellWidth;

@end 
```

我的细胞

```
#import "MyCell.h"

@implementation MyCell

- (void)layoutSubviews {
    [super layoutSubviews];

    CGRect frame = self.textLabel.frame;
    frame.size.width = [MyCell textLabelWidthForCellOfWidth:self.frame.size.width];
    self.textLabel.frame = frame;
}

+ (CGFloat)textLabelWidthForCellOfWidth:(CGFloat)cellWidth {
    // This calculation can be as complex as necessary to account for all elements that affect the label
    return cellWidth - 20;
}

@end 
```

然后在您的`heightForRowAtIndexPath:`实现中，您可以调用相同的类方法：

```
CGFloat labelWidth = [MyCell textLabelWidthForCellOfWidth:self.tableView.frame.size.width]; // Since non-grouped cells are the full width of the tableView
CGSize size2 = [detail sizeWithFont:[UIFont fontWithName:setlistFont size:detailFontSize] constrainedToSize:CGSizeMake(labelWidth, CGFLOAT_MAX)]; 
```

您将为需要引用的每个标签创建一个单独的类方法 (+)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:42:13.337

在查看您的代码时，我发现您缺少定义“lineBreakMode”。

```
CGSize theSize = [song.name sizeWithFont:[UIFont fontWithName:setlistFont size:labelFontSize] constrainedToSize:CGSizeMake(self.setsTable.bounds.size.width, CGFLOAT_MAX) lineBreakMode:UILineBreakModeWordWrap]; 
```

用这个更新你的代码。我希望它能解决你的问题。祝你好运

# python - Stratum/Python“未找到服务方法”

> ID：15654760
> 
> 赞同：2
> 
> 时间：2013-03-27T08:46:28.657
> 
> 标签：python, service, methods, mining

我们正在尝试为 minelitecoin.com 建立一个带有 Stratum 协议的莱特币挖矿服务器...

我能够设置服务器和挖掘代理，它们已配置并正在运行，但是当尝试将矿工连接到服务器时（即使使用地层挖掘代理），我们会收到：

```
"Method 'subscribe' not found for service 'mining'." 
```

我们已经按照包内 README 提供的所有克隆/安装说明进行操作，并花费数小时搜索网络并挖掘数千行 Python 代码以尝试找出发生了什么。

在protocol.py中的这个函数中发生了错误：

```
def dataReceived(self, data, request_counter=RequestCounter()):         

lines  = (self._buffer+data).split(self.delimiter)
    self._buffer = lines.pop(-1)
    request_counter.set_count(len(lines))

    for line in lines:
        if self.transport.disconnecting:
            return
        if len(line) > self.MAX_LENGTH:
            return self.lineLengthExceeded(line)
        else:
            self.lineReceived(line, request_counter)
    if len(self._buffer) > self.MAX_LENGTH:
        return self.lineLengthExceeded(self._buffer)
        if self.transport.disconnecting:
            return
        if len(line) > self.MAX_LENGTH:
            return self.lineLengthExceeded(line)
        else:
            self.lineReceived(line, request_counter)
    if len(self._buffer) > self.MAX_LENGTH:
        return self.lineLengthExceeded(self._buffer) 
```

特别是在这一行：

```
 else:
            self.lineReceived(line, request_counter) 
```

此处提供了代理服务的完整调试输出：

```
http://pastebin.com/iTD5LCXD 
```

服务器端的实时输出在这里：

```
http://pastebin.com/3QKRAkbL 
```

来自服务器的记录输出（看起来描述性要差得多）在这里：

```
http://pastebin.com/H7k444RQ 
```

我们已经把头撞在墙上几天了，如果有人能帮忙解决这个问题，将不胜感激！！！

# java - Google App Engine，Java Datastore 查询：如何执行 SQL Like 语句？

> ID：15654763
> 
> 赞同：4
> 
> 时间：2013-03-27T08:46:41.283
> 
> 标签：java, google-app-engine

我有实体：

```
Entity e = new Entity("Item");
e.setProperty("Description", Description); 
```

我正在尝试执行关键字搜索。例如，如果我有“abc”、“eabcd”和“abc block”，当我执行搜索“abc”时，它应该返回所有三个。

如果我使用 SQL，我会这样说：

```
Select * from Item where Description like "%"+keyword+"%" 
```

我知道我可以做到这一点，但这只会返回“abc”。

```
public static Iterable<Entity> SearchItems(String Description) {
    DatastoreService ds = DatastoreServiceFactory.getDatastoreService();
    Query q = new Query("Item").addFilter("Description",
            FilterOperator.EQUAL, Description);
    return ds.prepare(q).asIterable();
} 
```

我应该怎么办？

PS我已经看到了，但这并不是特别有用。[Google App Engine 和 SQL LIKE](https://stackoverflow.com/questions/2340649/google-app-engine-and-sql-like)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T09:32:12.460

您需要的是[全文搜索](http://en.wikipedia.org/wiki/Full_text_search)，而 App Engine 数据存储区不支持。您需要使用[App Engine Search API](https://developers.google.com/appengine/docs/java/search/overview)来执行[此类查询](https://developers.google.com/appengine/docs/java/search/overview#Building_Queries)。

但是，API 不支持将全文查询应用到数据存储区，您需要在[索引文档](https://developers.google.com/appengine/docs/java/search/overview#Working_with_Documents)中构建和存储数据。您可能需要考虑复制数据存储中的数据并将其再次存储在索引文档存储中。

# opencv - 关于 SURF 和跟踪算法的基本问题

> ID：15654764
> 
> 赞同：1
> 
> 时间：2013-03-27T08:46:47.377
> 
> 标签：opencv, implementation, tracking

使用 SURF 检测对象时，如何使用良好匹配和几个关键点绘制误报和命中图？

**(A)**我如何从这么多的线描述符中获得良好匹配的统计数据，即 ROC 图或检测的真阳性与假阳性？有人可以提供用于绘制真阳性与假阳性统计的代码。

****(B)*** *其次，有很多资源[vdo1](http://www.youtube.com/watch?v=YHT46f2244E)，[vdo2](http://robocv.blogspot.ca/2012/02/real-time-object-detection-in-opencv.html)和实现，论文（[Object tracking using Improvement Camshift with SURF method](http://www.deepdyve.com/lp/institute-of-electrical-and-electronics-engineers/object-tracking-using-improved-camshift-with-surf-method-0EENoJXwYA/1) ; [A Study on Moving Object Tracking Algorithm Using SURF Algorithm and Depth Information](http://www.wseas.us/e-library/conferences/2012/Istanbul/ISTISC/ISTISC-12.pdf) ）说 SURF 和 SIFT 可以用于结合 camshift 或 meanshift 进行跟踪。**

 **但是，我不明白的是，我们需要像卡尔曼滤波器这样的预测算法或像 Camshift、均值偏移或模板差分（不确定）这样的跟踪算法来进行跟踪。所以，一些视频实现和教程怎么会说 Lukas Kanade 光流， SIFT，SURF 正在跟踪对象，而论文提到俱乐部要么 camshift 要么 meanshift。我错过了一些概念问题吗？

是否有义务提供关于如何单独使用 SURF 或 SIFT 或基于特征的方法进行跟踪的指针和详细说明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:35:42.697

带有金字塔的 Lucas-Kandae (pyrLK) 是一种在单个特征位置中寻找微小变化的方法。它可以一次对许多功能执行此操作。Camshift 和 meanshift 跟踪一组特征的统计数据。您也可以尝试使用匹配器来查找特征在下一帧中的位置。GoodFeturesToTrack、SIFT 和 SURF 是查找点的算法，这些点应该很容易找到并彼此区分开来。SURF 和 SIFT 还包括描述符，以可以忽略大小变化、方向变化或两者兼而有之的方式来表征这些特征。

卡尔曼滤波器用于细化您的结果。它能够缩小答案应该放置的区域，因为上面的算法并不完美。

至于代码，除了Shi-Thomasi + pyrLK，我没有做过太多的跟踪，所以我觉得帮不上忙。**

# qt - 如何对 QSpinBox 进行子类化，使其具有 int64 值作为最大值和最小值

> ID：15654769
> 
> 赞同：11
> 
> 时间：2013-03-27T08:46:58.190
> 
> 标签：qt, qspinbox

我需要实现一个`QSpinBox`控件，它应该能够处理`int64`最小值和最大值的值。当前实现仅支持`int32`值。

一天结束时，我`QSpinBox`应该接受 9223372036854775807 和 -9223372036854775808 之间的任何值

如果我要通过子类化来实现这一点，我需要做什么`QAbstractSpinbox`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-27T09:13:07.493

1.  源自`QAbstractSpinBox`.
2.  将 a 添加`QValidator`到`QLineEdit`仅允许有效的 int64 值。
3.  添加一个名为的属性`value`，以提供对实际保存该值的 int64 成员的访问。
4.  重新`stepBy(int steps)`实现修改数量。
5.  实现特定于您感兴趣的方法和属性`QSpinBox`（最小/最大限制、前缀、后缀等）。

本质上，您要维护两种状态：一种是实际的 int64 值，另一种是`QLineEdit`. 通常这只是通过以下方式更新：

```
lineEdit()->setText(QString::number(myNumber)); 
```

但如果用户想要前缀或后缀，则必须稍微调整一下。

# javascript - 我正在尝试获得完整的世界地图，而无需重复使用 gmaps 自动调整为 div

> ID：15654773
> 
> 赞同：0
> 
> 时间：2013-03-27T08:47:11.607
> 
> 标签：javascript, jquery, css, wordpress, google-maps

所以我尝试通过使用世界遥远角落的角落来自动调整地图，但这并没有帮助。我不断得到的是重复世界地图。我正在将 gmap3.js 与 wordpress 一起使用。任何帮助将不胜感激。

```
 var markersToBeAdded  = [];
   markersToBeAdded.push([-75, -90]);
   markersToBeAdded.push([75, 90]);
   markersToBeAdded.push([-75, 90]);
   markersToBeAdded.push([75, -90]);
  // markersToBeAdded.push([-90, 180]);
   //markersToBeAdded.push([90, 180]);

    $("#fullmap").gmap3({
         action: 'addMarkers', 
                        markers: markersToBeAdded,
                        //to autofit the map
                        callback:function(m)
                        { //m will be the array of markers
                          var bounds=new google.maps.LatLngBounds();
                          for(var i=0;i<m.length;++i)
                          {
                            bounds.extend(m[i].getPosition());
                          }
                          try{
                               var map=$(this).gmap3({action:'get'});
                                   map.fitBounds(bounds);
                                   map.setCenter(bounds.getCenter())
                              }catch(e){}
                        },
 map:{
    options:{

     draggable:false,   

     zoom:2
    }

 }

});
$("#fullmap").width(($(window).width())+'px').height((($(window).height()-150))+'px').gmap3(); 
//_h = $('#gmap').height();
//$("#fullmap").css("width", _h);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:45:47.303

如果您允许的最小缩放级别为 0，则将地图设为 256 像素宽；如果您允许的最小缩放级别为 1，则将地图设为 512 像素；如果您允许的最小缩放级别为 2，则将地图设为 1024 像素宽的。

谷歌地图只支持离散缩放级别，如果这些尺寸不适合你，你可能不走运。

我不知道如何使用 wordpress 更改 gmap3 的最小缩放（虽然看起来相当明显）；在 Google Maps API v3 中，您可以使用[minZoom mapOption](https://developers.google.com/maps/documentation/javascript/reference#MapOptions)

# image - SSRS 无法在 PDF 中正确渲染 *一些* 图像

> ID：15654779
> 
> 赞同：12
> 
> 时间：2013-03-27T08:47:23.043
> 
> 标签：image, pdf, reporting-services, ssrs-2008

我有一份报告，它呈现从各种来源收集的图像 (jpg)。这在报表查看器中以及通过 Excel 导出时都可以正常工作。

但是，当导出为 PDF 时，大约 5% 的图像渲染不正确，如下图所示，左侧是原始图像，右侧是渲染的内容；

![在此处输入图像描述](../Images/2a6b1fabee1065c936897184b72204e6.png) ![渲染图像图像](../Images/2cef5c2bb170998eadfb27a1ec02c017.png)

**我发现，如果我在 mspaint 中打开其中一张图像，然后单击保存，则在下一次运行报告时，图像现在可以正确呈现。**

对于 SSRS 在 PDF 中正确呈现图像的有效图像属性/格式是否有任何规则？本质上，我想以某种方式找到这些在报告运行之前会错误呈现的图像并事先修复它们......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-07-31T03:17:05.897

# 当前的解决方法

我从来没有最终让 SSRS 按原样显示问题图像，但是，在运行报告之前确定哪些图像将包含在不可显示集中，以便它们可以转换为支持的格式（自动）也是一个解决方案.

就我而言，所有图像都是通过用户上传到网站提供的，因此我能够在图像到达时对其进行识别和转换。对于所有现有图像，我能够运行一个脚本来识别问题图像并进行转换。

## 识别问题图像

从我拥有的数千张图像中，我能够确定无法正确渲染的图像具有以下属性：

1.  图像具有 CMYK 颜色空间或；
2.  图像具有扩展的颜色配置文件或；
3.  以上两种

## 转换图像

我最初使用标准 .NET GDI ( ) 来处理图像，但是在处理具有额外`System.Drawing`数​​据的图像时，API 经常容易崩溃 ( )。`OutOfMemoryException`因此，我切换到使用[ImageMagick](https://magick.codeplex.com/)，对于每个识别的图像，我：

1.  剥离颜色配置文件；
2.  转换为 RGB

请注意，在*不*剥离颜色配置文件的情况下从 CMYK 转换为 RGB 不足以让所有图像正确渲染。

在将上传的图像保存到磁盘之前，我最终只是在从用户那里收到的每个图像字节流上执行这些项目（没有首先确定问题）。之后，我再也没有遇到过渲染问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T09:13:58.007

由于输出看起来的方式，我会说那些 JPEG 图像具有 CMYK 色彩空间，但 SSRS 假设它们使用 RGB 色彩空间并在 PDF 中设置错误的色彩空间。
如果您可以发布 JPEG 图像和示例 PDF，我可以为您提供更多详细信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-18T00:33:50.690

我在屏幕上正确渲染图像时遇到了完全相同的问题，但是当我将报告导出为 PDF 时，它看起来就像问题中的问题一样。这是我解决它的方法。

**问题**

第一个线索是我在 MSDN 上看到的[这篇文章。](https://social.msdn.microsoft.com/Forums/vstudio/en-US/18db6b20-6054-4195-a5bc-b026d999a64c/embeded-image-distorted-in-pdf-while-exporting-from-ssrs-report-viewer?forum=sqlreportingservices)似乎无论原始图像密度如何，SSRS 中的 PDF 渲染器都会将所有图像的大小调整为 96 DPI。如果图像的原始大小大于页面（或容器）的大小，那么您将遇到此问题。

**解决方案**

解决方案是调整源图像的大小，使其适合您的页面。这需要根据您的页面大小和边距设置进行一些计算。

就我而言，我使用的是 A4 纸尺寸，即 21 厘米 x 29.7 厘米。但是，我的左边距为 1.5 厘米，右边距为 0.5 厘米，总内宽为 19 厘米。我允许额外的 0.5 厘米作为误差范围，因此我使用 18.5 厘米的内部宽度。

```
21 cm - 1.5 cm - 0.5 cm - 0.5 cm = 18.5 cm 
```

如前所述，PDF 渲染器生成的分辨率为 96 DPI（每英寸点数）。对于我们这些不在美国或利比里亚共和国的人来说，这是 37.79 DPC（每厘米点数）。所以，要得到我们的宽度：

```
18.5 cm * 37.79 dpc = 699 pixels 
```

您的结果可能会有所不同，具体取决于 (1) 您使用的纸张尺寸，以及 (2) 左右边距。

由于页面高于宽度，我们只需要在保持图像比例的同时调整宽度。如果您使用的纸张尺寸比它的高宽，您可以使用长度。

因此，现在在 Paint（或您选择的图像编辑器）中打开源图像，并按比例将图像大小调整为所需的宽度（或长度）（以像素为单位），保存它，将其导入到您的容器中，并根据视觉调整图像大小容器。它在屏幕上应该看起来一样，现在可以正确呈现为 PDF。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-17T19:37:09.633

这是向 Microsoft Connect 报告的问题。
从[SSRS 2008 如何获得最好的图像质量？](https://connect.microsoft.com/SQLServer/feedback/details/493441/)：

> 您在 PDF 中看到的图像行为是 PDF 渲染器执行的某些图像转换的结果，基于 PDF 规范要求将图像序列化为 PDF 的方式。
> 
> 我们知道这并不理想，我们将图像质量损失归类为产品问题。因此，很难真正说出如何才能获得最佳质量的图像。
> 
> **有趣的是，我听说客户在原始图像是 BMP 时效果很好**

# c++ - 使用双向链表实现稀疏矩阵中的多项式

> ID：15654790
> 
> 赞同：-2
> 
> 时间：2013-03-27T08:48:13.033
> 
> 标签：c++, c, data-structures, sparse-matrix

给定一个 2 次多项式，如何使用双向链表在稀疏矩阵中实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:30:47.900

```
typedef struct node{
   int term;
   int coefficient;
   struct node* next;
   struct node* previous;
}Node;

Node matrix[3]; 
```

# c - 无法访问共享内存内容

> ID：15654791
> 
> 赞同：1
> 
> 时间：2013-03-27T08:48:22.993
> 
> 标签：c, unix

我正在开发一个关于 mmap 和共享内存的示例程序。这是我正在尝试的一段代码，

工艺 B

```
#include<stdio.h>
#include<sys/mman.h>
#include<fcntl.h>
#include<unistd.h>
#include<malloc.h>

typedef struct sh_mem_t{
 int offset;
 char *buffer;
}sh_mem;

int main(){
 int fd;
 sh_mem *shm_obj;

 fd = shm_open("/myshm",O_RDWR,0777);
 if(fd == -1){
  perror("fd:ERROR");
  return -1;
 }

 shm_obj = mmap(0,sizeof(sh_mem),PROT_READ | PROT_WRITE,MAP_SHARED,fd,0);
 if(shm_obj == MAP_FAILED){
  perror("shm_obj:ERROR");
  return -1;
 }

 printf("\n offset : %d \n",shm_obj->offset);
// printf("\n Good work! : %s \n",shm_obj->buffer);

 return 0;
} 
```

过程A

```
#include<stdio.h>
#include<unistd.h>
#include<fcntl.h>
#include<malloc.h>
#include<string.h>
#include<stdlib.h>
#include<sys/mman.h>
#include<sys/sem.h>

typedef struct sh_mem_t{
  int offset;
  char *buffer;
}sh_mem;

int main(int argc,char *argv[]){
  int file_size = 0;
  int fd_sh = 0;
  sh_mem *shmptr = NULL;
  int fd = 0;
  char offset[2];
  int no_bytes_read = 0;
  int read_size = 10;
  int count = 0;
  int ret_val = 0;

  /* Variables for semaphore */
  int ret = 0;
  int semid = 0;
  key_t sem_key = 0;
  struct sembuf op[1];

  union semun{
   int val;
   struct semid_ds *buf;
   unsigned short *array;
  };
  union semun arg;

  /* Validate the i/p parameters */
  if(argc < 3){
   perror("argc:Did u forget the I/P file and the count 0?");
   return -1;
  }
  printf("File : %s",argv[1]);

  count = atoi(argv[2]);

  /* Create a semaphore */
  semid = semget(sem_key,1,IPC_CREAT | 0777);
  if(semid == -1){
   perror("semid:");
   return -1;
  }
  arg.val = 1;
  ret = semctl(semid,0,SETVAL,arg);

  /* Open the file to read the contents */
  fd = open(argv[1],O_RDONLY);

  /* Calculate the total size of the file */
  file_size = lseek(fd,0,SEEK_END);
  lseek(fd,0,SEEK_SET);
  printf("\n File Size is : %d \n",file_size);

  /* Create a new memory object */
  fd_sh = shm_open("/myshm",O_RDWR | O_CREAT,0777);

  /* Set the memory object's size */
  if((ftruncate(fd_sh,sizeof(sh_mem))) == -1){
   perror("ftruncate:ERROR");
   return -1;
  }

  /* Map the Memory object */
 shmptr = mmap(0,sizeof(sh_mem),PROT_READ | PROT_WRITE,MAP_SHARED,fd_sh,0);

  /* Allocate the memory for the buffer */
  shmptr->buffer = malloc((sizeof(char)*file_size));

  printf("\nThe Map address is : 0x%08x\n",shmptr);

 /* Copy the contents to the shared memory */
  read(fd,&offset,1);

  if(count == 0){
   shmptr->offset = 0;
  }

  while(shmptr->offset < file_size){

    /* Semaphore section Start */
    op[0].sem_num=0;
    op[0].sem_op=-1;
    op[0].sem_flg=0;

    semop(semid,op,1);
    printf("\n ProcessA Entering! \n");

    printf("\n initial offset value : %d \n",shmptr->offset);

    if(shmptr->offset > 0){
     shmptr->buffer = shmptr->buffer + shmptr->offset;
     ret_val = lseek(fd,shmptr->offset,SEEK_SET);
    }

    no_bytes_read = read(fd,shmptr->buffer,read_size);

    shmptr->offset = (read_size + shmptr->offset);
    printf("\n offset : %d \n",shmptr->offset);
    printf("\n contents : %s \n",shmptr->buffer);

    sleep(10);

    op[0].sem_op = 1;
    semop(semid,op,1);
    printf("\n ProcessA Leaving ! \n");
    /* Semapore section End*/
  }

  /* Detach from the shared memory */
  shmdt(shmptr);

  close(fd);
  close(fd_sh);

  return 0;
} 
```

我有进程 A，它已将数据放入包含结构值偏移量和缓冲区的共享内存中。进程 B 想要访问存储在共享内存（偏移量、缓冲区）中的内容，但我只能访问偏移量。当试图访问缓冲区时，我遇到了分段错误。为什么我得到一个段错误。由于共享对象被映射到共享内存。

进程 A 会将 10 个字节放入共享内存并进入睡眠状态，然后继续放入接下来的 10 个字节，依此类推。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T08:50:15.380

> 当试图访问缓冲区时，我遇到了分段错误。

`buffer`被声明为`pointer`映射内存的一部分：

```
typedef struct sh_mem_t{
 int offset;
 char *buffer;
}sh_mem; 
```

在进程之间传输指针没有意义，因为指针在从进程中没有任何意义——它指向的数据仍然驻留在主进程中。

您需要包含要从主进程传输到从进程的实际数据：

```
typedef struct sh_mem_t{
 int offset;
 char buffer[BUFSIZE];
}sh_mem; 
```

* * *

使用问题中的更新代码，需要进行以下更改才能使其正常工作：

*   在**A 和 B**中，将共享内存结构的声明更改为类似

```
 typedef struct sh_mem_t{
     int offset;
     char buffer[1024];
   }sh_mem; 
```

*   在**A**中，删除`malloc()`for `shmptr->buffer`。还可以通过添加偏移量 ( ) 删除调整缓冲区的行`shmptr->buffer = shmptr->buffer + shmptr->offset;`- 如果您仍然需要它，则需要以不同方式处理

*   在**B**中，取消注释打印`Good work!`输出的行。

通过这些更改，我能够`A`像`./A data.txt 0`. 然后当我开始该`B`过程时，它会打印偏移量和缓冲区内容，因为它是该`A`过程最后一次打印的。

**一些补充说明**

*   您应该使用头文件来声明`sh_mem`结构，并将此文件包含在您的两个`.c`文件中，以确保声明在 和 之间是一致`A`的`B`。

*   使用我上面发布的解决方案，应用程序将在文件大小 > 1024 时崩溃。您需要相应地处理此问题，以确保不超过缓冲区大小。

* * *

**为什么它不能使用指针**

您不能从从属进程中的主进程访问（非共享）内存，尤其是不能简单地通过共享内存传递一个指针（这将使共享内存概念过时）。您在主进程中分配的内存`malloc()`不是共享内存段的一部分，因此无法从从属进程访问。

此外，`mmap()`默认情况下，不保证在两个进程中返回相同的虚拟地址。因此，即使您传递一个指向主进程共享内存段**内**位置的指针，它也不会指向从进程内任何有用的位置，除非您将特定参数传递给`mmap()`. 有关详细信息，请参阅[mmap(2) 。](http://man7.org/linux/man-pages/man3/mmap64.3.html)

# android - 当我在拨号盘中按下一些数字（例如 645378）时，我们如何提供指向另一个活动的链接？

> ID：15654792
> 
> 赞同：0
> 
> 时间：2013-03-27T08:48:23.137
> 
> 标签：android, android-layout, android-intent, android-widget, android-ui

当我在拨号盘中按下一些数字（例如 645378）时，我们如何提供指向另一个活动的链接？在拨号盘中输入此号码并按下呼叫按钮后，我想进行另一项活动。可能吗？任何人都可以举个例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:12:31.513

是的，通过广播接收器，这似乎是可能的。

[http://android-developers.blogspot.com/2011/01/processing-ordered-broadcasts.html](http://android-developers.blogspot.com/2011/01/processing-ordered-broadcasts.html)

你能从给出的例子中构建你想要的吗？

# java - 片段内的菜单没有被调用

> ID：15654793
> 
> 赞同：1
> 
> 时间：2013-03-27T08:48:27.123
> 
> 标签：java, android

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    Log.d("Does", "get called");
    inflater.inflate(R.menu.menuitem, menu);
    super.onCreateOptionsMenu(menu, inflater);
} 
```

下面是我的 onCreateView 方法，我在这里调用

```
@Override
public View onCreateView(LayoutInflater inflater, 
        ViewGroup container, Bundle savedInstanceState) {   
          setHasOptionsMenu(true);
          return inflater.inflate(R.layout.layout1, container, false);
} 
```

我没有在我的操作栏中调用日志语句或菜单。

**更新**：我尝试从片段的 onCreate 方法调用它，但未显示菜单。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setHasOptionsMenu(true);        
} 
```

菜单.xml

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@+id/section" android:title="@string/section"
        android:icon="@drawable/ic_section"
        android:showAsAction="always" />

    <item android:id="@+id/refresh" android:title="@string/refresh" 
        android:icon="@drawable/ic_refresh"
        android:showAsAction="always" />

    <item android:id="@+id/edit_patient" android:title="@string/edit_patient" 
        android:icon="@drawable/ic_editpatient"
        android:showAsAction="always" />    

    <item android:id="@+id/about" android:title="@string/about"
        android:showAsAction="never" />

    <item android:id="@+id/help" android:title="@string/help"
        android:showAsAction="never" />

    <item android:id="@+id/signout" android:title="@string/signout"
        android:showAsAction="never" />

</menu> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T08:50:41.630

您需要[`setHasOptionsMenu(true);`](https://developer.android.com/reference/android/app/Fragment.html#setHasOptionsMenu%28boolean%29)从 Fragment 的起始生命周期方法之一中进行调用。最好是从内部`onCreate(...)`。

在简约的情况下`onCreate`，您的 Fragment 方法如下所示：

```
@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setHasOptionsMenu(true);
} 
```

`super.onCreateOptionsMenu(menu, inflater);`此外，在您膨胀自定义菜单后调用会将您刚刚膨胀的菜单重置为空菜单。

所以要么打电话：

```
@Override public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    Log.d("Does", "get called");
    super.onCreateOptionsMenu(menu, inflater);
    inflater.inflate(R.menu.menuitem, menu);
} 
```

或者：

```
@Override public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    Log.d("Does", "get called");
    //no super call
    inflater.inflate(R.menu.menuitem, menu);
} 
```

此外，如果您在 Gingerbread 设备上进行测试，如果主机`Activity`不包含它自己的菜单项，则菜单可能不会显示。

# excel - 需要比较两个excel文件中的数据

> ID：15654794
> 
> 赞同：0
> 
> 时间：2013-03-27T08:48:30.533
> 
> 标签：excel, etl, vlookup

我需要比较两个excel文件。一个从数据库中提取并保存为 CSV。其他文件是包含当天所有记录的累积报告。我需要检查累积报告中的所有数据是否都在从数据库中提取的其他 csv 文件中。我知道`VLOOKUP`，但我不确定 VLOOKUP 是否可以比较整个文件记录。许多文件有 4 到 5 千条记录，其中包含 50 列。还有其他选择吗？有什么免费`ETL`工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T10:22:00.817

我决定使用超越比较工具来比较两个文件。

*   在 ID 字段上对两个文件进行排序
*   并使用*Beyond Compare*工具进行比较

这是一个很好的工具。你可以在[这里](http://www.scootersoftware.com/)得到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:12:11.093

您确实可以使用`VLOOKUP`.

解决这个问题的一个简单方法是

**1.**为 Sheet1 中的 CSV 保存数据创建数据库连接。

**2.**将第二个文件（累积报表）复制并链接到 Sheet2 中的该文件。

然后使用`VLOOKUP`or simple`IF statements`来比较数据。

# jquery - 修改此更改函数以使用 (this) 以及与 (this) 的 id 同名的下一个元素

> ID：15654795
> 
> 赞同：0
> 
> 时间：2013-03-27T08:48:40.627
> 
> 标签：jquery, selector, this

选择选项时，此[Dropkick](http://jamielottering.github.com/DropKick/) `change`函数会更新另一个`<select>`元素的值。我在 300 多对`<select>`元素上使用该函数，因此我很想修改该函数，以便不需要为每个元素指定选择器。

由于元素没有彼此相邻，我想结合这种方法来获取与所选输入的 id 同名的下一个元素[stackoverflow.com/a/7734190/1056713](https://stackoverflow.com/a/7734190/1056713)

**编辑 -**为了简化此帖子的示例，我为这些元素使用了通用名称和 id，但第二个元素的名称将与第一个元素的 id 匹配。

该函数的工作示例发布在此处：http: [//jsfiddle.net/chayacooper/yhAX5/6/](http://jsfiddle.net/chayacooper/yhAX5/6/)

JS

```
$('#Select1').dropkick({
    change: function(value) {
        var $select2 = $('#Select2');
        removeDefaultFromSelect($select2);
        $select2.val(value);
    }
}); 
```

HTML

```
<!-- Dropkick styled select element -->
<select name="DropkickSelect" id="Select1" class="dropkick">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
</select> 

<!-- Element who's value will be set  -->
<select name="Select1" id="Select2">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:53:56.163

**下面更新** *（问题已更新）*

**原始答案**：

奇怪的是，`this`在`change`回调中不是选择元素，它是一个数组，其中`select`元素似乎是第一个条目。这很奇怪。

但是使用该信息，您可以通过删除所有非数字并解析它来获取`id`from`this[0]`并从中获取数字，如下所示：`id`

```
var idnum = parseInt(this[0].id.replace(/\D/g, ''), 10); 
```

然后，当然，只需向其中添加一个即可获得下一个选择，因此：

```
$('selector for the dropkick things to hook up').dropkick({
    change: function(value) {
        var idnum = parseInt(this[0].id.replace(/\D/g, ''), 10) + 1;
        var $nextSelect = $('#Select' + idnum);
        removeDefaultFromSelect($nextSelect);
        $nextSelect.val(value);
    }
}); 
```

[更新小提琴](http://jsfiddle.net/yhAX5/7/)

或者，您可以`data-*`在每个选择上使用一个属性来指示它应该使用的另一个选择是什么，但如果您总是按升序对它们进行编号，那么这可能比它的价值更麻烦。

* * *

**更新**：重新编辑：

> ...但是第二个元素的名称将与第一个元素的 id 匹配

这使得它更容易，你可以只使用一个[属性选择器](http://api.jquery.com/attribute-equals-selector/)：

```
$('selector for the dropkick things to hook up').dropkick({
    change: function(value) {
        var $nextSelect = $('select[name="' + this[0].id + '"]');
        removeDefaultFromSelect($nextSelect);
        $nextSelect.val(value);
    }
}); 
```

[更新小提琴](http://jsfiddle.net/yhAX5/8/)

# c - 在 C/C++ 中的“igraph”中创建加权无向图

> ID：15654798
> 
> 赞同：5
> 
> 时间：2013-03-27T08:48:47.577
> 
> 标签：c, graph, igraph, minimum-spanning-tree, weighted

问题：我想`.csv`使用 igraph 从存储在文件中的邻接矩阵制作加权无向图，然后对其进行最小生成树和其他一些算法。

我开始制作一个有 10 个顶点和 5 个边的有向图。默认情况下，igraph 不允许边缘的权重，您必须`igraph_i_set_attribute_table`在文档中使用一些对我没有意义的属性（类似于 ）。

有人可以帮我解决这个问题。

```
void print_vector(igraph_vector_t *v, FILE *f) {
  long int i;
  for (i=0; i<igraph_vector_size(v); i++) {
    fprintf(f, " %li", (long int) VECTOR(*v)[i]);
  }
  fprintf(f, "\n");
}

int main(int argc, char* argv[])
{
  igraph_t g;
  igraph_vector_t v;
  int ret;
  igraph_es_t es;

  /* Initialize the vector for edges */
  igraph_vector_init(&v,10);

  VECTOR(v)[0]=0;VECTOR(v)[1]=1;
  VECTOR(v)[2]=1;VECTOR(v)[3]=3;
  VECTOR(v)[4]=1;VECTOR(v)[5]=5;
  VECTOR(v)[6]=2;VECTOR(v)[7]=3;
  VECTOR(v)[8]=2;VECTOR(v)[9]=5;

  igraph_create(&g,&v,0,IGRAPH_DIRECTED);

  print_vector(&v,stdout);

  /* igraph_i_set_attribute_table(&igraph_cattribute_table); */

  igraph_vector_destroy(&v);
  igraph_destroy(&g);

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:30:03.510

首先，一般来说，使用 R 或 Python 中的 igraph 会更好，属性得到更好的支持。例如，您可以轻松地根据属性值等选择顶点或边。在 C 中，对属性的支持很少，而且在使用它们时，您主要靠自己。所以，除非你真的需要 C，否则我建议使用 R 或 Python。

如果你仍然想要 C，那么首先要记住的是你需要包含

```
igraph_i_set_attribute_table(&igraph_cattribute_table); 
```

在您显式或隐式地对属性执行任何操作之前，在您的代码中。IE。即使您没有显式操作属性，而是创建一个可能具有某些属性的图形，例如。read a graph a GraphML file，之前需要这个调用，否则属性会被丢弃。最好在`main()`函数的开头包含调用。

您必须使用任何属性是不正确的，我不确定您的意思。

至于设置和查询属性，请看`examples/simple`目录下的文件：

[https://github.com/igraph/igraph/blob/master/examples/simple/cattributes.c](https://github.com/igraph/igraph/blob/master/examples/simple/cattributes.c) [https://github.com/igraph/igraph/blob/master/examples/simple/cattributes2.c](https://github.com/igraph/igraph/blob/master/examples/simple/cattributes2.c) [https:// github.com/igraph/igraph/blob/master/examples/simple/cattributes3.c](https://github.com/igraph/igraph/blob/master/examples/simple/cattributes3.c) [https://github.com/igraph/igraph/blob/master/examples/simple/cattributes4.c](https://github.com/igraph/igraph/blob/master/examples/simple/cattributes4.c)

这些示例很大程度上是人为的，因为它们主要用于测试目的，但它们显示了基本用法。

# asp.net - System.Net.WebClient 底层连接已关闭

> ID：15654799
> 
> 赞同：0
> 
> 时间：2013-03-27T08:48:52.343
> 
> 标签：asp.net, windows, iis-6

> 底层连接被关闭：连接被意外关闭

我在使用 WebClient 时收到错误消息。我已经用 asp 代码对此进行了测试，它运行得很好。但是当我尝试运行exe版本的代码时，它运行以下错误，并且我能够从服务器访问请求地址，并且它在内部网络内。

我的服务器设置：- Windows Server 2003 Entrerprise SP2 asp.net 2.0.50727 iis v6.0

这是一些代码：

手动访问

```
protected static String cross_server_req(String strContent, String strPage, String strPrivateKey)
    {
        try
        {
            WebClient wc = new WebClient();
            String strURL = SERVICE_PATH + strPage + "?r=" + DES_.DESEncrypt(strContent);
            byte[] responseArray = wc.DownloadData(strURL);
            String strResData = Encoding.UTF8.GetString(responseArray);
            if (Config.RecordWebService == "1")
            {
                String strLogContent = "Request:" + strContent + "\r\nResponse:" + strResData + "\r\nDateCreated:" + D_Time.DNow + "\r\n\r\n";
                ServiceLog.Logger(strPage, strLogContent);
            }
            if (null != strResData && String.Empty != strResData)
            {
                return strResData.Trim();
            }
        }
        catch (Exception ex)
        {
            ServiceLog.Logger("cross_server_req() Exception:" + ex.Message + "\r\n" + ex.StackTrace);
        }
        return null;
    } 
```

这是来自日志

```
cross_server_req() Exception:The underlying connection was closed: The connection was closed unexpectedly.
at System.Net.WebClient.DownloadDataInternal(Uri address, WebRequest& request)
at System.Net.WebClient.DownloadData(Uri address)
at System.Net.WebClient.DownloadData(String address)
at Account.cross_server_request_curl(String strContent, String strPage, String strPrivateKey) 
```

请让我知道有什么建议可以帮助解决这个问题吗？我环顾了该站点，但没有找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:38:56.190

假设您点击 HTTPS url，我相信此错误可能与 TLS/SSL 连接有关。看看[这个线程](https://stackoverflow.com/questions/536352/webclient-https-issues)。本质上，您需要提供一些代码来验证证书是否有效。这对于存在指纹问题或不完全受信任的 CA 是必需的。希望这有助于解决您的问题。

```
System.Net.ServicePointManager.ServerCertificateValidationCallback += new System.Net.Security.RemoteCertificateValidationCallback(validateSSLCert);

private static bool validateSSLCert(object sender, X509Certificate cert, X509Chain chain, System.Net.Security.SslPolicyErrors error)
{
   return true;
} 
```

# python - [[0 for _ in range(10)] for _ in range(10)] 和 [0 for _ in range(10)] * 10 有什么区别？

> ID：15654800
> 
> 赞同：9
> 
> 时间：2013-03-27T08:48:55.543
> 
> 标签：python, list

```
>>> CM = [[0 for _ in range(10)]] * 10
>>> CM    
[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]
>>> CM[0][0] = CM[0][0] + 1
>>> CM
[[1, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 0, 0, 0, 0, 0, 0, 0, 0, 0], [1, 0, 0, 0, 0, 0, 0, 0, 0, 0]] 
```

我试图创建一个混淆矩阵。它基本上包含 (i, j) 对的计数。我首先创建了一个列表列表，然后增加了相应的变量。但是，它没有按预期工作。CM[i][0] 对于 i 的所有值都增加了。

我找到了解决办法。

```
>>> CM = [[0 for _ in range(10)] for _ in range(10)]
>>> CM
[[0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]
>>> CM[0][0] = CM[0][0] + 1
>>> CM
[[1, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]] 
```

但如果有人能解释第一种方法失败的原因，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T08:51:27.090

```
>>> CM = [[0 for _ in range(10)]] * 10 
```

正在复制对同一对象的引用，十次。它等价于：

```
>>> x = [0 for _ in range(10)]
>>> CM = [x, x, x, x, x, x, x, x, x, x] 
```

所以操纵一个元素会导致副作用。您的解决方法优雅而正确。

**笔记：**

这是因为列表的元素是列表（可变的）。例如，如果它们是不可变的字符串，那么如果在不同的列表中引用相同的字符串就不会成为问题，因为它们无法被操纵。Python 不喜欢浪费内存（除非明确告诉 ie. `deepcopy`），所以复制列表只会复制它们的引用。

# android - 如何将我的应用程序签名为“系统应用程序”android

> ID：15654802
> 
> 赞同：0
> 
> 时间：2013-03-27T08:49:06.187
> 
> 标签：android, access-point

我有一个编写一些 APN 设置的应用程序。由于从 Android 4.0 开始不再允许此操作，但对于系统应用程序，我的问题是：

有什么方法可以将我的应用程序签名为“系统应用程序”，以便可以将其安装在无根设备上并访问 APN 设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:06:47.527

在 IceCreamSandwich 之上的非根设备上，您不能。（除非您拥有用于签署操作系统的签名密钥，即硬件制造商的密钥或您的 ROM 之一）

> signatureOrSystem 权限可用于使用与设备操作系统签名相同的密钥签名的应用程序。

请参阅：[https ://code.google.com/p/android/issues/detail?id=24227](https://code.google.com/p/android/issues/detail?id=24227)

# c++ - 何时使用构造函数和析构函数，尤其是在容器和跨线程中

> ID：15654812
> 
> 赞同：0
> 
> 时间：2013-03-27T08:49:34.187
> 
> 标签：c++, multithreading, class, constructor, destructor

我有一个多线程程序（客户端-服务器程序，但在这个问题中不一定相关），其中多个线程访问全局队列。有两个队列：哪个是 type `msgs_inc`，我的班级在哪里。`clients_msg``queue<msgInfo>``msgInfo`

第一个线程从客户端接收消息，执行以下操作（相关片段）：

```
msgInfo message_processed(message_fr_client); //line 1: takes in string 
msgs_inc.push(message_processed); //line 2 
```

第二个线程应该从 中检索`msgs_inc`、处理它们，然后推入`clients_msg`.

```
msgInfo msg_from_queue(msgs_inc); //line 3: retrieve from front of queue
msgs_inc.pop(); //line 4
clients_msg.push(msg_from_queue); //line 5 
```

第三个线程从 中检索`clients_msg`，之后不再需要它。

```
msgInfo msg_from_queue(clients_msg); //line 6: retrieve from front of queue
clients_msg.pop(); //line 7 
```

我的问题是：

1.  在第 3 行中，这个构造函数（下文详述）是被称为复制构造函数还是标准构造函数？
2.  我是否错误地“实例化”`msgInfo`了两次，即在将其推入之前一次，然后在检索它之前再一次？我应该使用指针或其他东西吗？*感觉*它可能效率低下，但我不知道另一种方法。
3.  我什么时候应用析构函数？我是否只在第 7 行之后应用它，当我不再需要它时，或者我是否需要在第 4 行再次应用析构函数，因为我已经`msgInfo`使用该信息创建了另一个实例？

对于这种乏味，我深表歉意-我找不到有关此的信息，也无法得出一个具体的结论。

* * *

这是我的课：

```
class msgInfo
{
public:
    msgInfo();
    msgInfo(std::string); //creating instance fr string rxed fr client
    msgInfo(std::map<int, std::map<int, std::queue<msgInfo>>>, int, int); //creating instance for string to be sent to client

    ~msgInfo();

private:
    int source_id;
    int dest_id;
    int priority;
    std::string payload;
    std::list<int> nodePath;
}; 
```

第 3 行和第 6 行使用的构造函数：

```
msgInfo::msgInfo(std::queue<msgInfo> outgoing_msg)
{
    source_id = outgoing_msg.front().source_id;
    dest_id = outgoing_msg.front().dest_id;
    priority = outgoing_msg.front().priority;
    payload = outgoing_msg.front().payload;
    nodePath = outgoing_msg.front().nodePath;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:13:15.727

我*不会*使用队列中的构造函数。这令人困惑。写起来要好得多（也更清楚）：

```
msgInfo msg_from_queue( msgs_inc.front() ); 
```

这会调用复制构造函数（因为它会复制）；在您的情况下，编译器提供的复制构造函数就足够了。

至于实例化`msgInfo`两次，您实际上是在实例化它更多，因为它是从原始实例复制到队列中，然后从队列复制到第二个线程。这没有什么问题。C++ 旨在为使用值语义提供特权，否则需要特殊处理。如果后来发现复制是性能瓶颈，那么您可以修复它。`std::list`（可能是通过降低复制成本，而不是通过移动到指针。例如，摆脱它。）

如果确实使用指针，则必须考虑所有权问题。您不能只传递局部变量的地址。如果有人修改数据，让两个或多个线程访问相同的数据是非法的。

至于你的最后一个问题：*你*不调用（我认为这就是你所说的“应用”的意思）析构函数（至少在使用值语义时）。编译器为局部变量自动调用它，当对象从队列中移除时，队列的底层容器调用它。就此而言，您也不调用构造函数：当您定义一个对象时，编译器会为您调用它，而当对象被复制到队列中时，队列会执行复制。

最后，您没有显示任何同步逻辑。我认为这仅仅是因为您将其删除以简化演示，并且您确实知道一旦有多个线程就需要同步访问。

# iphone - 使用 FQL 查询在 Facebook 中获取活动专辑

> ID：15654813
> 
> 赞同：1
> 
> 时间：2013-03-27T08:49:35.627
> 
> 标签：iphone, objective-c, facebook, facebook-fql

我正在使用以下查询来检索专辑名称和专辑 ID，

```
 SELECT aid,name FROM album WHERE owner = me() 
```

但在这些 fql 查询中，它检索所有专辑名称。但有些相册没有照片，它也检索已删除的相册。我不希望 ablum 没有照片且处于非活动状态。

所以请指导我如何在 fql Query 中检索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:46:21.583

要仅获取实际包含照片的相册，请添加`AND photo_count > 0`到 WHERE 子句。

# c - C程序在文件中生成具有替换值的字符串

> ID：15654815
> 
> 赞同：0
> 
> 时间：2013-03-27T08:49:38.593
> 
> 标签：c, design-patterns

我试图用从文件中读取的所有字母替换字符串中的特定字符。

例如，我有一个 replace.txt，其中包含所有替换字符`'#'`，`'&'.` 如果我的字符串是“数组”，则必须替换字符“a”。该程序应生成组合，如

```
#rray
#rr&y
#rr#y
&rr&y
&rr#y
&rray
arr#y 
arr&y 
```

我试过一次，但我得到了不想要的输出。

这是我的代码，

```
int Guess(char str[],char start[],int startPos);
char* replaceChar(char* str, char ch1, char ch2);

void clear(char str[])
{
    strcpy(str, "");
}

int size(char str[])
{
    return strlen(str);
}

void append(char str[], char c)
{
    int len = strlen(str);
    str[len] = c;
    str[len+1] = '\0';
}
char* replace(char* str, char *orig, char rep,int k)
{
    static char buffer[4096];
    char *p;
    int i,count;

    if(!(p = strstr(str, orig)))
        return str;
    strncpy(buffer, str, p-str+(k-2));
    buffer[(p-str)+(k-2)+1] = '\0';
    sprintf(buffer+(p-str)+(k-2), "%c%s", rep, p+strlen(orig)+(k-2));
    return buffer;
}
long int findfirst(char s[], char c, int k)
{
    int i,flag=0;
    char* pch;
    pch=strchr(s+k-1,c);
    return (pch-s+1);
}

char start[1000];
int main()
{
    FILE *fp;
    fp=fopen("replace.txt","r");
    char line[1000];
    int i=0;
    while (fgets(line, sizeof(line), fp))
    {
        start[i] = line[0];
        i++;
    }
    printf("%s",start);
    printf("\n");
    fclose(fp);
    char guess[100];
    /*---------------------Read Input by Character-----------------------*/
    int c;
    while ((c = getchar())!=EOF)
    {
        if (c=='\n')
        {
        Guess(guess,start,0);
        clear(guess);
        }
        else
        {
        char c1=(char)c;
        append(guess,c1);
        }
    }
    if (size(guess)!=0)
    {
        Guess(guess,start,0);
    }
    return 0;
}

int Guess(char* str,char start[],int startPos)
{
    char* baseString = str;
    int match=1;
    int i,j;
    char* res;
    for (i=startPos; i<strlen(str); i++) //go through the rest of the string looking for replacements
    {
        if ((findfirst(baseString,'a',i)-1)==i) //replacement
        {
            for (j=0; j<2; j++) //go through all of the replacements
            {
            res = replace(baseString,"a",start[j],i);
            printf(" res : %s \n",res);//c_str(baseString));
            Guess(res,start,i+1);
            baseString=str;
            }
        }
    }
    return 0;
} 
```

当我输入为“samba”时，我得到的输出是，

```
"#

samba

res : s"mba

res : s"mba (here i need o/p as s"mb")

res : s"mba (here i need o/p as s"mb#)

res : s#mba

res : s#mba (here i need o/p as s#mb")

res : s#mba (here i need o/p as s#mb#)

res : samb"

res : samb# 
```

另外，如果我将输入输入为“arganda”，它会显示，

```
"#

arganda

res : "arganda

res : "ar"

res : "ar#

res : #arganda

res : #ar"

res : #ar#

res : ar"anda

res : ar"an"

res : ar"an#

res : ar#anda

res : ar#an"

res : ar#an#

res : argan"a

res : argan#a 
```

我对这种模式生成完全感到困惑。

任何人都可以提供解决方案吗？

还有关于如何使用 char* 而不是 char[]？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:51:12.387

检查我的代码。它按预期工作。看到我没有使用文本文件来读取符号，我正在全局初始化它。如果需要，您可以按照自己的方式更改它。

```
int Guess(char str[],char start[],int startPos);
char* replaceChar(char* str, char ch1, char ch2);

void clear(char str[])
{
    strcpy(str, "");
}

int size(char str[])
{
    return strlen(str);
}
long int findfirst(char s[], char c)
{
    int i,flag=0;
    char* pch;
    pch=strchr(s,c);
    return (pch-s);
}

char start[1000] = "\"#";
int main()
{
    //FILE *fp;
    //fp=fopen("replace.txt","r");
    char line[1000];
    int i=0;
    //while (fgets(line, sizeof(line), fp))
   // {
    //    start[i] = line[0];
     //    i++;
   // }
    printf("%s",start);
    printf("\n");
    //fclose(fp);
    char guess[100]={0};
    /*---------------------Read Input by Character-----------------------*/
    int c;
    while ((fgets(guess, sizeof(guess), stdin))!=NULL)
    {
        Guess(guess,start,0);
        clear(guess);
    }
    if (size(guess)!=0)
    {
        Guess(guess,start,0);
    }
    return 0;
}

int Guess(char* str,char start[],int startPos)
{
    char* baseString = str;
    int match=1;
    int i,j;
    for (i=startPos,j=0; i<strlen(str) && j < strlen(start); i++) //go through the rest of the string looking for replacements
    {
        if ((findfirst(baseString ,'a'))==i) //replacement
        {
            baseString[i] = start[j++];
            printf(" res : %s \n",baseString);
        }
    }
    return 0;
} 
```

# asp.net-mvc - Kendo UI DatePicker 不允许用户选择日期

> ID：15654817
> 
> 赞同：1
> 
> 时间：2013-03-27T08:49:40.533
> 
> 标签：asp.net-mvc, internet-explorer-7, kendo-ui

我在 IE 7 中使用带有 MVC 3（VB.NET，Razor 语法）的 Kendo DatePicker。当我单击 datepicker 时，它不允许我选择日期。默认情况下，选择今天的日期。如果我在 Google chrome 上运行相同的代码，它工作正常。我还使用 IE 7 的 IE 开发人员工具栏调查了这个问题，它显示日期选择器的“不可选择”设置为“开”。我不知道如何关闭它。我可以在日期选择器中浏览月份或年份，但实际上无法选择日期。我也可以在 datepicker 文本框中手动输入日期。任何帮助将不胜感激。

这是我正在编写的代码示例

```
 <div class="editor-field">
        @Html.Kendo().DatePicker().Name("ExtMailDatePicker").Value(DateTime.Now)
        @Html.ValidationMessageFor(Function(model) model.Day)
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T05:03:19.743

当安装的 kendo 框架版本和安装的 jquery 版本不匹配时，会出现此问题。例如

使用 kendo ui 的 Q2 SP1 2012 程序集以及仅使用 Q2 2012 (1.7.1) 的 JavaScript 文件可能会导致此问题。在确保我拥有正确的文件后，它就可以工作了。

# gdb - 在 gdb 中格式化数据的二进制表示

> ID：15654823
> 
> 赞同：0
> 
> 时间：2013-03-27T08:49:50.007
> 
> 标签：gdb

这些天我经常使用 gdb 的检查内存功能。但是，我发现数据的二进制表示不太可读，因为所有位都挤在一起。我想添加一些间距以使其更具可读性，例如，而不是`01101100011011000110010101001000`我将拥有`0110-1100-0110-1100-0110-0101-0100-1000`或类似的东西。

这可能吗？我得到的最接近的`x/4bt s`是接近，但仍然存在两个问题：数据按字节分组（8 位而不是 4 位），这些字节反向排列（所以它的`01001000 01100101 01101100 01101100`）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:37:26.317

您需要的是类似于 GDB 的漂亮打印机的东西，它们最常用于打印 STL / 链表等。可能有一些解决方案可以满足您的需求，因此请在谷歌上搜索一下漂亮的打印机。

下面的脚本只是一个示例，说明如何使用 python 扩展编写自定义命令，这将适用于 GDB 7.3 版及更高版本，但我在 7.5 版中对其进行了测试。

```
import gdb

class ppbin(gdb.Command):
    def __init__(self):
        super(ppbin, self).__init__("ppbin", gdb.COMMAND_USER)

    def invoke(self, arg, tty):
        print arg

        arg_list = gdb.string_to_argv(arg)

        if len(arg_list) < 2:
            print "usage: <address>, <byte-count>"
            return
        res = gdb.execute("x/%sxt %s" %(arg_list[1], arg_list[0]), False, True)
        res = res.split("\t")
        ii = 0
        for bv in res:
            if ii % 4:
                print "%s-%s-%s-%s-%s-%s-%s-%s" %(bv[0:4],   bv[4:8],
                                                  bv[8:12],  bv[12:16], \
                                                  bv[16:20], bv[20:24], \
                                                  bv[24:28],bv[28:32])
            ii += 1

ppbin() 
```

调用新的 ppbin 命令

```
(gdb) source pp-bin.py 
(gdb) ppbin 0x601040 10
0x601040 10
0000-0000-1010-1010-0011-0011-0101-0101
0000-0000-0000-0000-0000-0000-0000-0000
0000-0000-0000-0000-0000-0000-0000-0000
0000-0000-0000-0000-0000-0000-0000-0000
0000-0000-0000-0000-0000-0000-0000-0000
0000-0000-0000-0000-0000-0000-0000-0000
0000-0000-0000-0000-0000-0000-0000-0000
0000-0000-0000-0000-0000-0000-0000-0000
(gdb) 
```

以上代码共享[https://skamath@bitbucket.org/skamath/ppbin.git](https://skamath@bitbucket.org/skamath/ppbin.git)

PS - 我通常发现以十六进制（x 命令）调试内存比二进制更容易，所以我不会使用我的解决方案。

# button - RelayCommand.CanExecute 不更新 UI 中的 IsEnabled

> ID：15654835
> 
> 赞同：0
> 
> 时间：2013-03-27T08:50:30.507
> 
> 标签：button, windows-phone, mvvm-light, relaycommand

我有一个 Windows Phone 8 应用程序，我有一个`RelayCommand`名为`DiscoverExpansionModulesCommand`. 我有一个`Command`属性绑定到的按钮`DiscoverExpansionModulesCommand`。当应用程序首次加载时，按钮会正确启用或禁用。但是，当在页面上并且我想更改命令是否可以执行时，该方法`CanExecuteDiscoverExpansionModulesCommand()`会正确触发并返回正确的 true 或 false 值，但按钮不会反映它。为什么按钮不更新它的 UI？我在这里找到了关于这个问题的另一篇文章[http://social.msdn.microsoft.com/Forums/en-US/silverlightarchieve/thread/48a341e4-f512-4c33-befd-b614404b4920/](http://social.msdn.microsoft.com/Forums/en-US/silverlightarchieve/thread/48a341e4-f512-4c33-befd-b614404b4920/)

我的视图模型：

```
using GalaSoft.MvvmLight;
using GalaSoft.MvvmLight.Command;
using GalaSoft.MvvmLight.Messaging;
using MAL.Portable.Commands;
using MAL.Portable.Message;
using MAL.Portable.Model;
using System;
using System.Collections.Generic;
using System.Windows.Input;

namespace MAL.Portable.ViewModel
{
    public class SettingsViewModel : ViewModelBase
    {
        // Define an observable collection property that controls can bind to.
        private List<Setting> settings;
        private String controllerUrl;
        private String controllerPort;
        private String temperature;
        private Wifi wifi;
        private Boolean connected;
        private Boolean checkingConnection;

        public SettingsViewModel()
        {
            DiscoverExpansionModulesCommand = new RelayCommand(OnDiscoverExpansionModules, CanExecuteDiscoverExpansionModulesCommand);

            Messenger.Default.Register<RetrieveSettingsMessage>
            (
                 this, (action) => RetrievedListsMessage(action)
            );

            Messenger.Default.Send<GetSettingsMessage>(new GetSettingsMessage());
        }

        public ICommand DiscoverExpansionModulesCommand
        {
            get;
            private set;
        }

        public String ConnectionStatus
        {
            get
            {
                if (checkingConnection) 
                    return "checking";
                else
                    return connected ? "connected" : "not connnected";
            }
        }

        private Boolean CanExecuteDiscoverExpansionModulesCommand()
        {
            return connected;
        }

        private void OnDiscoverExpansionModules()
        {

        }

        private void CheckConnection()
        {
            wifi = null;
            if (!String.IsNullOrWhiteSpace(ControllerUrl) && !String.IsNullOrWhiteSpace(ControllerPort) && !checkingConnection)
            {
                checkingConnection = true;
                wifi = new ReefAngelWifi(controllerUrl, controllerPort);
                wifi.TestConnectionComplete += wifi_TestConnectionComplete;
                wifi.RequestFail += wifi_RequestFail;
                wifi.BeginTestConnection();
            }
        }

        private void wifi_RequestFail(object sender, RequestExceptionEventArgs e)
        {
            connected = false;
            checkingConnection = false;
            RaisePropertyChanged("ConnectionStatus");
        }

        private void wifi_TestConnectionComplete(object sender, TestConnectionEventArgs e)
        {
            connected = e.TestSuccessful;
            checkingConnection = false;
            DiscoverExpansionModulesCommand.CanExecute(null);
            RaisePropertyChanged("ConnectionStatus");
            RaisePropertyChanged("DiscoverExpansionModulesCommand");
        }

        private object RetrievedListsMessage(RetrieveSettingsMessage action)
        {
            settings = action.Settings;
            CheckConnection();
            return null;
        }

        private String GetStringValue(String key)
        {
            if (settings == null) return String.Empty;
            var item = settings.Find(x => x.Key == key);
            if (item == null) return String.Empty;
            else return item.Value;
        }

        private Boolean GetBooleanValue(String key)
        {
            if (settings == null) return false;
            var item = settings.Find(x => x.Key == key);
            if (item == null) return false;
            else return Boolean.Parse(item.Value);
        }
    }
} 
```

和 XAML

```
<phone:PhoneApplicationPage 
    xmlns:ReefAngel="clr-namespace:MAL.WindowsPhone8"  
    xmlns:Controls="clr-namespace:Telerik.Windows.Controls;assembly=Telerik.Windows.Controls.Input" 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
    xmlns:cmd="clr-namespace:GalaSoft.MvvmLight.Command;assembly=GalaSoft.MvvmLight.Platform.WP8"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:telerikPrimitives="clr-namespace:Telerik.Windows.Controls;assembly=Telerik.Windows.Controls.Primitives"
    x:Class="MAL.WindowsPhone8.ReefAngel.SettingsPage"
    xmlns:converter="clr-namespace:MAL.WindowsPhone8.Converters"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    DataContext="{Binding Settings, Source={StaticResource Locator}}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    mc:Ignorable="d"
    shell:SystemTray.IsVisible="True">

    <phone:PhoneApplicationPage.Resources>
        <converter:BooleanToStringConverter x:Key="temperatureConverter" TrueString="Celsius" FalseString="Fahrenheit" />
        <converter:BooleanToStringConverter x:Key="timeFormatConverter" TrueString="24 hour" FalseString="12 hour" />
        <converter:BooleanToStringConverter x:Key="dateFormatConverter" TrueString="dd/mm/yyyy" FalseString="mm/dd/yyyy" />
    </phone:PhoneApplicationPage.Resources>

    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" >
        <phone:Pivot Title="{Binding LocalizedResources.ApplicationTitle, Source={StaticResource LocalizedStrings}, StringFormat='\{0\} Settings'}">
            <phone:PivotItem Header="connection">
                <Grid>
                    <StackPanel Margin="12,0,0,0">
                        <TextBlock Margin="0,20,0,0" TextWrapping="Wrap" Text="Reef Angel Wifi Address"/>
                        <TextBox Height="72" TextWrapping="Wrap" Text="{Binding ControllerUrl, Mode=TwoWay}"/>
                        <TextBlock Margin="0,20,0,0" TextWrapping="Wrap" Text="Reef Angel Wifi Port"/>
                        <TextBox Height="72" TextWrapping="Wrap" Text="{Binding ControllerPort, Mode=TwoWay}"/>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Margin="0,20,0,0" TextWrapping="Wrap" Text="Reef Angel Wifi Status : "/>
                            <TextBlock Margin="0,20,0,0" TextWrapping="Wrap" Text="{Binding ConnectionStatus, Mode=OneWay}"/>
                        </StackPanel>

                    </StackPanel>
                </Grid>
            </phone:PivotItem>
            <phone:PivotItem Header="expansion">
                <Grid>
                    <Button Content="Discover Expansion Modules" x:Name="DiscoverButton" Command="{Binding DiscoverExpansionModulesCommand, Mode=OneWay}" />
                </Grid>
            </phone:PivotItem>

        </phone:Pivot>
    </Grid>

</phone:PhoneApplicationPage> 
```

我正在使用 MVVM Light 便携式类库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T11:27:38.133

`RelayCommand.RaiseCanExecuteChanged()`当您在方法中评估的条件发生变化时，您需要调用`CanExecute`。

**编辑**

```
 private void wifi_RequestFail(object sender, RequestExceptionEventArgs e)
    {
        connected = false;
        checkingConnection = false;
        RaisePropertyChanged("ConnectionStatus");
        DiscoverExpansionModulesCommand.RaiseCanExecuteChanged();
    }

    private void wifi_TestConnectionComplete(object sender, TestConnectionEventArgs e)
    {
        connected = e.TestSuccessful;
        checkingConnection = false;
        DiscoverExpansionModulesCommand.CanExecute(null);
        RaisePropertyChanged("ConnectionStatus");
        RaisePropertyChanged("DiscoverExpansionModulesCommand");
        DiscoverExpansionModulesCommand.RaiseCanExecuteChanged();
    } 
```

这不会导致循环，因为它只会告诉 RelayCommand 重新执行指定的 CanExecute 方法。在您的情况下，这仅意味着`CanExecuteDiscoverExpansionModulesCommand`已读取该属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:49:10.613

这似乎是一个跨线程问题。并且弄清楚如何在 PCL 中调用 Dispatcher 很棘手，但我在这里找到了它： [Update UI thread from portable class library](https://stackoverflow.com/questions/14427340/update-ui-thread-from-portable-class-library)

# asp.net - 如何使用 httpErrors 添加默认错误页面

> ID：15654840
> 
> 赞同：7
> 
> 时间：2013-03-27T08:50:53.293
> 
> 标签：asp.net, visual-studio, iis, custom-error-pages

我已成功添加自定义 404 页面。我想要做的是创建另一个自定义错误页面，当出现 404 以外的任何错误时显示。例如 500、403 等。

这就是我现在在 webconfig 中所拥有的

```
<httpErrors errorMode="Custom" existingResponse="Replace">
      <remove statusCode="404" subStatusCode="-1" />
      <error statusCode="404" path="/404.aspx" responseMode="ExecuteURL"/>
    </httpErrors> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-11-06T10:29:02.117

天啊。我不敢相信我找不到这个简单问题的正确答案！尽管如此，在阅读文档和调试 2 小时后，我找到了它。

```
<httpErrors errorMode="Custom" existingResponse="Auto" defaultResponseMode="ExecuteURL" defaultPath="/App/Error"> <!-- Do not include ~, this was my issue all long -->
  <clear/> <!-- so that IIS provided error pages are skipped -->
  <!-- add those which you like to provide a view of yours -->
  <error path="/App/Http404" responseMode="ExecuteURL" statusCode="404"/>
  <error path="/App/Http503" responseMode="ExecuteURL" statusCode="503"/>
</httpErrors> 
```

请注意`<httpErrors>`配置 IIS，同时`<customErrors>`配置 ASP.NET 和一些旧版本的 IIS (<=6?)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T08:56:57.203

您可以在 webconfig 中使用 customErrors ：

```
<customErrors mode="On" defaultRedirect="~/DefaultError.aspx?msg=SomeMessage">
  <error statusCode="404" redirect="~/PageNotFound.html"/>
  <error statusCode="403" redirect="~/AccessDenied.html"/>
</customErrors> 
```

# asp.net - 如何捕获多个sql异常？

> ID：15654847
> 
> 赞同：1
> 
> 时间：2013-03-27T08:51:28.860
> 
> 标签：asp.net, sql, exception, try-catch

我的数据库中有两个唯一字段，用户可能会尝试通过我的网页添加一个（或两个）列中已经存在的值。从字面上看，有 2 个文本框，它们将引用 SQL 中的 2 列。

我希望捕获错误并向用户显示不允许创建副本的单词（或单词）。

SQL 阻止我输入重复的，但是，它会在第一次尝试时出错。这意味着，如果用户尝试输入 2 个单词并且两个单词都是重复的，那么 SQL 将在第一个文本框上出错，这意味着用户可以更新 textBox1 的值，然后再试一次，然后被告知第二个文本框。这对用户不利，因为它很慢，但我不知道最好的方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:15:22.393

在我看来，您的最后一道防线是数据库！您应该阻止查询到达那里！

对我来说，我会查询数据库并检索这 2 列的所有行的 2 个值。

然后，当用户尝试提交时，我会检查列表以查看它是否存在。这意味着不会抛出异常。然后我可以决定如何在屏幕上显示这些信息。

当然，这取决于你有多少行，如果你有几百万行，这可能不是很好，你可能想先使用一个标量变量来 ping 数据库，看看值是否已经存在！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:57:41.793

`SqlException`非常冗长，您将获得完整的堆栈跟踪，而不是导致异常的一些特定字段。

有时`SqlException`也不会指定足够的内容，例如遇到内部失败的存储过程..

最好的想法是在访问数据库之前对字段值、FK 约束、非空检查等进行各种验证。

完全不建议点击数据库然后由于某些异常而让用户知道，因为这是一个很大的性能瓶颈。

# android - 我需要将 AIDL 文件放在哪里？

> ID：15654849
> 
> 赞同：1
> 
> 时间：2013-03-27T08:51:36.620
> 
> 标签：android, service, aidl

只是关于 AIDL 文件的一个问题，上下文是我正在编写一个使用另一个项目作为库的小项目。在这个库中，实现了一个服务，我正在尝试绑定它。所以我的问题是：如果我的服务在另一个项目中，我是否必须将 AIDL 文件也放入我的项目中，或者来自另一个项目的现有 AIDL 是否足够？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T11:15:52.947

是的，我发现我必须把它放在我使用该服务的项目中。我也必须将它放在与服务器完全相同的包名中。此外，我使用的是 parcelable，我还必须将该 parcelable 实现 (java) 文件粘贴到与服务项目中指定的包相同的包中。

# linux - 非 Root linux 疑难解答

> ID：15654851
> 
> 赞同：1
> 
> 时间：2013-03-27T08:51:43.507
> 
> 标签：linux, apache

不检查 /etc/apache2 或使用 curl 进行测试，怎么可能以简单用户（非 ROOT）的身份检查 apache2 正在运行的端口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:58:36.197

您可以安装[nmap](http://nmap.org)并扫描开放端口：

```
nmap localhost 
```

如果您有许多服务，您可以使用 grep`apache2`或`http`这样：

```
nmap localhost | grep http

80/tcp    open  http 
```

# jquery - 如何像 Facebook 聊天一样折叠 div

> ID：15654856
> 
> 赞同：4
> 
> 时间：2013-03-27T08:52:02.420
> 
> 标签：jquery, css

我尝试做一些类似的事情，比如 facebook 聊天，但这是供个人使用的。除了一些 css 部分外，一切正常。

我尝试使用绝对位置来排列 div，是的，但是当我在 php 中循环聊天框时会出现问题。我需要使用浮动（将 div 框向右浮动）。

[你可以在这里](http://jsfiddle.net/ruslyrossi/mazzt/1/)查看我的 jsfiddle

下面是jquery中的一些代码片段

```
//Close
$('.closed1').click(function () {
    $('.wrap_box1').hide();
    $('.main_chat1').addClass('hide_wrap_box');
});

//Open
$('.open_chat1').click(function () {
    $('.wrap_box1').show();
    $('.main_chat1').removeClass('hide_wrap_box');
}); 
```

如果您看到我的 jsfiddle 聊天框折叠到顶部但如何折叠到底部？，尝试单击关闭按钮。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T09:19:06.690

我会处理这个的方式是这样的：

**脚步：**

*   创建一个围绕聊天框的聊天区域
*   聊天框显示为内联块
*   将用户框定位到底部：0

**在你的例子中：**

我会`display:inline-block`在`chat_box`课堂上使用......这样父母就会响应盒子的大小。

并向右浮动`chat_box`

```
#chat_area {
    float:right;
} 
```

但它`user_box`本身只会与`chat_box`.

```
.user_box {
    ...
    bottom:0;
} 
```

这样，整个聊天区域将向右浮动......并在所有聊天框关闭时缩小到底部。

**这是一个用于说明的小提琴：http: [//jsfiddle.net/mazzt/7/](http://jsfiddle.net/mazzt/7/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-24T15:46:23.107

i've tried to do it starting from your example!

```
 $(document).ready(function () {
        $('.main_chat2').toggle("bounce",{ times: 3 }, "slow");
    $('.user_box').click(function () {
        if ($('.wrap_box2').is(":visible")) {
            $('.wrap_box2').hide();
            $('.main_chat2').addClass('hide_wrap_box');
            $('#icon').html('^');
        }
        else {
            $('.wrap_box2').show();
            $('.main_chat2').removeClass('hide_wrap_box');
            $('#icon').html('x');
        }
    });
   }); 
```

you can see it at this link: [http://jsfiddle.net/ernestoarbitrio/DyfBW/31/](http://jsfiddle.net/ernestoarbitrio/DyfBW/31/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T08:55:07.990

尝试`slideToggle();`和/或`toggleClass();`

# mysql - MySQL“AS”而不是“AS”的性能

> ID：15654864
> 
> 赞同：1
> 
> 时间：2013-03-27T08:52:29.983
> 
> 标签：mysql, performance

以下两个查询之间是否存在**性能**差异？

```
SELECT * FROM users AS u LEFT JOIN parents AS p ON u.id=p.user_id 
```

和

```
SELECT * FROM users u LEFT JOIN parents p ON u.id=p.user_id 
```

（第二个没有`AS`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:59:46.707

与一切一样：*衡量就是知道*。如果您真的想知道运行分析器并进行测量。否则请从我们这里拿走：到目前为止，您对此的想法甚至都不值得。

**如果**有任何差异（相当大）应该a）被认为是MySQL中的一个缺陷，b）是查询*解析*部分的问题，而不是查询执行部分，因此无论如何都可以忽略不计，因为执行而不是解析通常会无论如何占总“查询时间”的 99.99999%（如果不是更多的话）。

**如果**有任何可测量的差异，它~~应该~~非常、非常、非常小，因此 a) 不值得担心差异，因为用户通常不会注意到以纳秒为增量的加速，b) 只有在运行很多很多时才会注意到成千上万的查询在一个紧密的循环中。

如果 MySQL 的贡献者没有搞砸，那么根本没有区别，因为`AS`关键字只是可选的并且存在是为了便于阅读。唯一**确定**的方法是分析。这不是第一次在软件中出现一些奇怪的错误或行为。但是可以（非常）安全地假设`AS`关键字根本没有任何区别，因为很久以前，在您之前的数百万 MySQL 用户中的任何一个（或者他们都没有打扰过）很久以前就已经“发现”了，你永远不知道![普](../Images/eacccfefbdc416930bf64d3a87441bb2.png)）。恕我直言，花任何时间分析这个“问题”都是浪费时间。

阅读[优化俱乐部的规则](http://www.perlmonks.org/?node_id=962631)。

只有当确实**存在**性能问题时，您才开始寻找优化的地方。而且您只优化“低悬的果实”或占相当大负载的东西（无论是 I/O、CPU、网络等）。优化查询删除`AS`关键字以提高性能是一种微优化，永远不会回报您的时间投资（除非出现错误/问题）。作为“思想实验”，尽管您的问题可以（并且应该）通过使用分析而不是猜测、其他人的意见等建立硬数据来回答。

* * *

我*确实*遗漏了诸如查询缓存之类的东西，这些东西*可能*会在每次执行查询时使用/不使用`AS`关键字或`AS`关键字在不同位置执行查询，这将（或者更确切地说：可能）导致（不必要地）重新创建查询执行计划或查询缓存无法被重用等，但现在我们真的在这里谈论边缘情况，为此，再说一遍：*测量就是知道*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:55:49.793

真的是一样的。

`AS`关键字是可选的。就像`OUTER`关键字 on`LEFT JOIN`和`LEFT OUTER JOIN`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T08:56:56.457

当使用标识符为 select_expr 起别名时，AS 关键字是**可选的。**但是，因为 AS 是可选的。MySQL 将第二个解释为别名。因此，在指定列别名时，养成明确使用 AS 的习惯是一种很好的做法。

作者：[http ://dev.mysql.com/doc/refman/5.0/en/select.html#idp56626352](http://dev.mysql.com/doc/refman/5.0/en/select.html#idp56626352)

# events - 这个 GTK 应用每秒左右捕获什么周期性事件和源（X 服务器生成？）？

> ID：15654867
> 
> 赞同：-2
> 
> 时间：2013-03-27T08:52:34.213
> 
> 标签：events, gtk, xserver

以下仅包含一个按钮，单击该按钮可以在控制台上产生输出。（输出只是局部循环计数器和全局变量的值。）

* * *

编辑：关键是代码是研究 gtk_main_interation() 是如何工作的；所以我不想将该调用包装在 gtk_events_pending() 循环中。该代码本质上是纯粹的教学法。

* * *

代码的奇怪部分是“单击”事件处理程序有一个调用 gtk_main_iteration() 的循环。如果没有待处理的事件，则 gtk_main_iteration 应该阻塞。然而，玩这个小应用程序表明 GTK 主循环每秒左右都会捕获一些事件，即使没有发生任何事情。要看到这一点，请尝试单击并释放按钮，然后松开鼠标（根本不移动光标）。

大概这个事件是由 X 服务器（或 GTK 主循环）作为某种计时的东西生成的。我不知道这个事件叫什么，谷歌搜索让我失望。

```
#include <gtk/gtk.h>
#include <glib.h>
#include <gmp.h>
#include <unistd.h>

#define UNUSED(x) (void)(x)

typedef struct _Data {
    GtkWidget *window1,
              *button1;
} Data;

int g=0;

void on_button1_clicked(GtkWidget *widget, Data *data) {
    int l=0;
    UNUSED(widget);
    UNUSED(data);

    for(l=0;l<10;++l) {
        gtk_main_iteration();
        printf("l=%d g=%d|",l,g++);
        fflush(stdout);
    }
    printf("\n\n");

}

int main (int argc, char *argv[]) {
    Data *data;

    gtk_init(&argc, &argv);

    data=g_slice_new0(Data);

    /* add widgets and objects to our structure */

    data->window1=gtk_window_new(GTK_WINDOW_TOPLEVEL);
    gtk_window_set_default_size(GTK_WINDOW(data->window1),250,250);
    data->button1=gtk_button_new_with_label("Start");
    gtk_container_add(GTK_CONTAINER(data->window1),GTK_WIDGET(data->button1));

    gtk_signal_connect(GTK_OBJECT(data->window1), "delete-event",
                       gtk_main_quit, NULL);
    gtk_signal_connect(GTK_OBJECT(data->button1), "clicked",
                           G_CALLBACK(on_button1_clicked), NULL);

    gtk_widget_show_all(GTK_WIDGET(data->window1));

    gtk_main();

    /* Don't forget to free the memory! */
    g_slice_free(Data, data);

    return 0;
} 
```

我正在编译

```
gcc -Wall -Wextra -Wconversion -pedantic `pkg-config --cflags --libs gtk+-2.0` events.c -o events 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:03:47.490

这段代码可能是教学性的，但它完全被破坏了，甚至不是远程惯用的：

`GtkButton::Clicked`信号不是由窗口系统发出的：它完全是自己合成的`GtkButton`；这取决于在一段时间`button-release-event`后接收`button-press-event`到指针仍在`GtkButton`产生压力的指针内；X11 没有“点击”的概念（在这些语义之内或之外）。

这个例子基本上没有说明你可能会或可能不会在 X11 下获得的事件流。如果您想查看事件流，您可以编译 GTK+ 并启用调试消息 ( `./configure --enable-debug=yes`) 并`GDK_DEBUG`在运行应用程序之前设置环境变量。GTK+ 将打印它接收到的每个 X 事件的详细信息，包括事件类型。

# algorithm - 递归和迭代的运行时间

> ID：15654869
> 
> 赞同：1
> 
> 时间：2013-03-27T08:52:54.870
> 
> 标签：algorithm

我知道有一些算法对于递归和迭代策略都需要相同的运行时间。但我无法决定那个基础。

具有递归和迭代策略的算法是否可能总是需要相同的运行时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T08:55:14.417

每个递归算法都可以简化为迭代算法（具有相同的运行时间）。 [http://en.wikipedia.org/wiki/Recursion_(computer_science)#Recursion_versus_iteration](http://en.wikipedia.org/wiki/Recursion_(computer_science)#Recursion_versus_iteration)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T08:55:18.510

是的，如果一个算法可以优化为使用尾递归，那么它可以在没有额外代码的情况下转换为迭代，因此将具有相同的执行时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T08:57:18.507

它可能具有相同的时间复杂度，但恒定的开销可能会有所不同（递归可能会更昂贵）。此外，如果使用迭代方法，递归会增加额外的空间复杂度。

# ios - iOS：备份核心数据并使用较新的模型版本进行恢复

> ID：15654870
> 
> 赞同：1
> 
> 时间：2013-03-27T08:52:55.900
> 
> 标签：ios, core-data, core-data-migration

如何备份在版本 1 中创建的核心数据对象并在版本 2 中恢复它们？如果模型发生变化，简单地复制 .sqlite 文件将不起作用......有没有办法备份文件恢复它然后开始迁移？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:35:43.317

非常感谢您的建议！

通过以下方式使用 MagicalRecord 解决它：

1.  `[MagicalRecord cleanUp];`
2.  将 .sqlite、.sqlite-shm、.sqlite-wal 复制到新位置
3.  `[MagicalRecord setupCoreDataStackWithAutoMigratingSqliteStoreNamed:sqliteFileName];`

完成 - 完美运行！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:08:43.003

您需要使用自动轻量级迁移来迁移数据库。

请参阅：http: [//developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/vmLightweightMigration.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/vmLightweightMigration.html)

[iPhone Core Data“自动轻量级迁移”](https://stackoverflow.com/questions/1830079/iphone-core-data-automatic-lightweight-migration)

# c++ - C++ 文件写入/读取

> ID：15654879
> 
> 赞同：0
> 
> 时间：2013-03-27T08:54:01.287
> 
> 标签：c++, arrays, file, input, output

我正在尝试创建一个数组，将数组写入文件并显示它。它似乎正在工作，但我只得到了输出的一部分（前 3 个元素），或者我得到了超出边界的值。

```
#include <iostream>
#include <fstream>
using namespace std;

int main()
{
      int arr[20];
      int i;

      for (i = 0; i < 5; i++)
      {
            cout << "Enter the value to the array: " << endl;
            cin >> arr[i];
      }
      ofstream fl("numbers.txt");

      if (!fl)
      {
            cout << "file could not be open for writing ! " <<endl;

      }
      for (i = 0; i < arr[i]; i++)
      {
            fl<<arr[i]<<endl;
      }
      fl.close();
      ifstream file("numbers.txt");
      if(!file)
      {
            cout << "Error reading from file ! " << endl;
      }
      while (!file.eof())
      {
             std::string inp;
             getline(file,inp);
             cout << inp << endl;
      }
      file.close();
      return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:02:20.570

循环中的终止条件`for`不正确：

```
for(i=0;i<arr[i];i++) 
```

如果用户输入以下 5`int`秒：

> 1 0 4 5 6

循环将在第二个, the处`for`终止，因为（这将等同于） is 。代码有可能访问超出数组边界的输入：`int``0``1 < 0``i<arr[i]``false`

> 10 11 12 13 14

循环将`for`遍历前 5 个元素并开始处理数组中的未初始化值，`arr`因为它尚未初始化：

```
int arr[20]; 
```

如果其中的元素`arr`恰好总是大于`i`.

一个简单的修复：

```
for(i=0;i<5;i++) 
```

其他要点：

*   始终检查 I/O 操作的结果以确保变量包含有效值：

    ```
    if (!(cin >> arr[i]))
    {
        // Failed to read an int.
        break;
    } 
    ```

`for`循环必须将读取的 s 数存储到`int`中`arr`，因此其余代码仅处理用户提供的值。使用具有固定大小的数组和指示填充元素数量的变量的替代方法是使用[`std::vector<int>`](http://en.cppreference.com/w/cpp/container/vector)仅包含有效`int`s 的 a （并且可以对其进行查询`size()`或使用迭代器进行迭代）。

*   `while (!file.eof())`不正确，因为只有在尝试读取超出文件末尾时才会设置文件结束标志。立即检查 I/O 操作的结果：

    ```
    while (std::getline(file, inp))
    {
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:57:23.543

尝试这个：

```
//for(i=0;i<arr[i];i++)
for(i=0;i<5;i++) 
```

[编辑] 我会像这样用 0 初始化数组： int arr[20] = {0}; 在这种情况下，您可以使用例如：

```
while ((arr[i] != 0 || i < sizeof(arr)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T09:03:20.737

就像hmjd说的

```
for(i=0;i<arr[i];i++) 
```

看起来不对

它应该看起来像这样

```
int size;
size=sizeof(your array);

for(i=0;i<size;i++) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-18T11:42:51.703

```
i<array[i] 
```

这是错误的，因为它与数组的内容相关，它不检查数组的大小。

# ruby - 在 sinatra 中不能要求“graylog2_exceptions”

> ID：15654880
> 
> 赞同：1
> 
> 时间：2013-03-27T08:54:04.537
> 
> 标签：ruby, sinatra, graylog2

我有一个运行在 sinatra 上的应用程序

`ruby 1.9.3-p327with gemset exampleGemset`（.rvmrc 文件）

当我跑步时

`bundle exec gem list`

我得到宝石

`friendlyfashion-graylog2_exceptions (1.3.2)`

但是当我尝试要求它时，`require 'graylog2_exceptions'`我得到了这个错误

`LoadError: cannot load such file -- graylog2_exceptions`

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:28:16.460

`graylog2_exceptions` 通过使用 gem 解决了这个`gem install graylog2_exceptions`问题

# java - ...Java 屏幕分辨率更改

> ID：15654882
> 
> 赞同：3
> 
> 时间：2013-03-27T08:54:07.303
> 
> 标签：java, swing

我们使用 Java Swings 开发了一个巨大的应用程序，这在所有系统上都很好执行和运行，但问题是分辨率，如果分辨率是 1260/768，它运行良好意味着包括滚动条在内的所有组件都将可见，甚至应用程序将适合屏幕的宽度和高度，但是当它低于 1280/768 时它不适合屏幕，我所做的是手动将系统分辨率更改为 1280/768，并编写了可以更改分辨率的程序，但是问题大多数系统不支持超过 1024/768，在旧系统上其最大 VGA Cards-1024/768。

解决这个问题的方法是什么？要更改哪个布局管理器？

**更新** 我们的应用程序将在接下来的 5 天内上线，所以需要更快的东西，尝试使用 FlowLayout，但它不会是好的 UI。

或者如何在最大化或最小化时调整组件的大小？它是如何实现的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:58:52.983

答案基本上取决于您的 GUI 是如何设计的。

在某些情况下， a`FlowLayout`将允许组件环绕。

`JScrollPane`可以在部分周围添加包装器以使它们独立滚动。按照这种思路，可以将整个当前 GUI 放置在 a 中`JScrollPane`并设置为永远不会小于 1280x768，这样滚动条就会出现在较小的显示器上。

`JTabbedPanel`也可用于堆叠不常用的 GUI 部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T10:31:23.150

较小的分辨率可以使用**更小，尤其是更窄的字体**。**用缩放坐标**代替硬坐标是一项艰巨的任务；类似的东西`Scale.x(80)`。但这是一个“愚蠢”的可靠解决方案。*如果您仍然可以使用较小的字体（Arial Narrow？）。*

请注意，较小的分辨率通常显示在相同物理尺寸的显示器上。或者对于今天的平板电脑来说，微小是可以接受的。

# api - 从 Google Analytic 查询和获取数据

> ID：15654885
> 
> 赞同：0
> 
> 时间：2013-03-27T08:54:15.187
> 
> 标签：api, google-analytics

我想通过其[API 参考从谷歌分析中检索数据](https://developers.google.com/analytics/devguides/reporting/core/v2/gdataReferenceDataFeed)

```
https://www.googleapis.com/analytics/v2.4/data

?ids=ga:12345

&dimensions=ga:source,ga:medium

&metrics=ga:visits,ga:bounces

&sort=-ga:visits

&filters=ga:medium%3D%3Dreferral

&segment=gaid::10 OR dynamic::ga:medium%3D%3Dreferral

&start-date=2008-10-01

&end-date=2008-10-31

&start-index=10

&max-results=100

&prettyprint=true 
```

但我找不到我的**?ids=**。你能帮我找到它并给出一个示例查询字符串（如果有的话）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:16:57.490

1.  打开谷歌分析前端
2.  点击管理员（右上角）
3.  点击您要通过 API 查询的 Profile
4.  转到配置文件设置选项卡
5.  复制配置文件 ID 号。它应该类似于 123456789
6.  预先`ga:`考虑。所以它变成`ga:123456789`
7.  用它查询 API。
8.  ...
9.  利润！

# xamarin.android - 我可以使用 Arduino 在 Mono for Android 中创建应用程序吗？

> ID：15654886
> 
> 赞同：1
> 
> 时间：2013-03-27T08:54:23.953
> 
> 标签：xamarin.android, arduino

是否可以在不使用[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)而是使用 Visual Studio 和 C#的情况下使用[Mono](http://en.wikipedia.org/wiki/Mono_%28software%29) for Android创建应用程序并控制[Arduino ？](http://en.wikipedia.org/wiki/Arduino)

我检查了一些示例，但每个人都使用 Java 和 Eclipse。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:09:15.547

简单地说，答案是肯定的，有可能。真正的问题是：如何？我假设你已经[用 Mono 编写了你的​​第一个 Android 应用程序](http://docs.xamarin.com/guides/android/getting_started)。

接下来，您需要决定如何将您的 Android 设备连接到 Arduino。[蓝牙](http://arduino.cc/en/Main/ArduinoBoardBluetooth)？[无线网络](http://arduino.cc/en/Main/ArduinoWiFiShield)？网络？

接下来，只需使用适当的 Android API。查看[适用于 Android 的 Xamarin 文档](http://androidapi.xamarin.com/)。

**更新**

[移植的 MonoDroid 示例应用程序](https://github.com/chrisntr/monodroid-samples/)提供的功能远不止我在下面介绍的。具体来说，您会对[BluetoothChat 示例](https://github.com/chrisntr/monodroid-samples/tree/master/BluetoothChat)感兴趣。

确保您还查看了向清单文件[添加权限](http://docs.xamarin.com/guides/android/advanced_topics/working_with_androidmanifest.xml#3.adding-permissions)，当然还有[Android Developer Guide for Bluetooth](http://developer.android.com/guide/topics/connectivity/bluetooth.html)。

也就是说，这里有一个小东西可以帮助您入门，基于[Android Quick Look：BluetoothAdapter](http://mobile.tutsplus.com/tutorials/android/android-quick-look-bluetoothadapter/)：

```
txtStatus.Text = "Getting Bluetooth adapter...";
BluetoothAdapter bluetooth = BluetoothAdapter.DefaultAdapter;
if( bluetooth == null )
{
    txtStatus.Text = "No Bluetooth adapter found.";
    return;
}

txtStatus.Text = "Checking Bluetooth status...";
if (!bluetooth.IsEnabled )
{
    Toast.MakeText(this, "Bluetooth not enabled. Enabling...", 
        ToastLength.Short).Show();
    bluetooth.Enable();
}

if (bluetooth.State == State.On)
{
    txtStatus.Text = 
        "State: " + bluetooth.State + System.Environment.NewLine +
        "Address: " + bluetooth.Address + System.Environment.NewLine + 
        "Name: " + bluetooth.Name + System.Environment.NewLine; 
} 
else
{
    txtStatus.Text = "State: " + bluetooth.State;
} 
```

# php - 如果匹配存在，PHP正则表达式替换字符串的开头和结尾

> ID：15654887
> 
> 赞同：0
> 
> 时间：2013-03-27T08:54:30.680
> 
> 标签：php, replace, expression

你能帮我解决这个问题吗？如果匹配存在，我想在 PHP 中替换字符串的开头和结尾，例如：

源字符串：
`tr_abcdef_lang`或`tr_abcdef`或`tr_abcdef_cba`
我想替换字符串以使其具有这样的：
`fk_abcdef`或`fk_abcdef_cba`

我的意思是如果字符串以`_lang`或`_language`删除它结尾，并在开始时将第一个之前的所有内容替换`_`为`fk`.

所以更多的例子：

```
tr_abcdef => fk_abcdef
tr_abcdef_language  => fk_abcdef
x_abc_cba => fk_abc_cba
x_abc_cba_lang => fk_abc_cba
t_tablename_languages => fk_tablename 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:22:25.707

感谢所有试图提供帮助的人

我找到了解决方案，它看起来像：

```
$pattern = "/^([a-zA-Z]+?)_(\w+?)(_trans|_translation|_languages)?$/i";             
$replacement    = 'fk_$2';
$fk_field_name = preg_replace($pattern, $replacement, $tbl_name); 
```

再次感谢和最好的问候

韦尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:04:57.600

我解决了你的正则表达式问题

```
$pattern = "/^([a-zA-Z]+?)_(\w+?)([_trans|_translation|_languages]*?)$/i"; 
$replacement = 'fk_$2'; 
$fk_field_name = preg_replace($pattern,$replacement, "x_abc_cba_gsd_lang");
echo $fk_field_name; 
```

我的代码

尝试这个`~(.*?)_(.*)_(.*)~si`

```
preg_match_all( '~(.*?)_(.*)_(.*)~si', "x_abc_cba",$M);
$E='';
if($M[3][0]!="lang" and $M[3][0]!="language" and $M[3][0]!="languages"){
$E="_".$M[3][0];
}
echo ("fk_".$M[2][0].$E); 
```

或者不用php正则表达式试试

```
$String="x_abc_cba_lang";
$xp=explode("_",$String);
$xp[0]="fk";
end($xp);
$Ek=key($xp);
if($xp[$Ek]=="lang" or $xp[$Ek]=="language" or $xp[$Ek]=="languages"){
   unset($xp[$Ek]);
}
echo implode("_",$xp); 
```

# c# - 将 XML 字符串发送到 WCF 时出现“读取 XML 数据时超出最大字符串内容长度配额 (8192)”错误

> ID：15654892
> 
> 赞同：18
> 
> 时间：2013-03-27T08:54:53.550
> 
> 标签：c#, .net, wcf, web-config, quota

我正在使用一个 .NET、C# 应用程序，该应用程序打算将一个长 XML 字符串发送到 WCF 服务方法以进行进一步操作。当我的应用程序尝试在运行时将 XML 字符串发送到 WCF 服务时，我收到一条错误消息：

`"The formatter threw an exception while trying to deserialize the message: There was an error while trying to deserialize parameter http://tempuri.org/:strProdUserDataXML. The InnerException message was 'There was an error deserializing the object of type System.String. The maximum string content length quota (8192) has been exceeded while reading XML data. This quota may be increased by changing the MaxStringContentLength property on the XmlDictionaryReaderQuotas object used when creating the XML reader. Line 131, position 57.'. Please see InnerException for more details."`

我的应用程序端 web.config 我已将“绑定”和“端点”编写为：

```
<binding name="EndPointHTTPGenericPortal" closeTimeout="01:00:00" openTimeout="01:00:00" receiveTimeout="01:00:00" sendTimeout="01:00:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
    <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
    <security mode="None">
    <message clientCredentialType="UserName" algorithmSuite="Default" />
    </security>
    </binding>

    <endpoint address="http://192.168.140.40/WcfGenericPortal_Service/Service1.svc" binding="basicHttpBinding" bindingConfiguration="EndPointHTTPGenericPortal" contract="IService1" name="EndPointHTTPGenericPortal" behaviorConfiguration="Graph" /> 
```

如果任何机构可以帮助我解决这个错误，我将非常感激。提前感谢大家。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-17T15:01:13.133

这是 MSDN 上关于[Reader Quotas](http://msdn.microsoft.com/en-us/library/ms731325.aspx)的文章。

似乎超出了您服务器端的读者配额之一。

具体来说，超出**了 maxStringContentLength**。**maxStringContentLength**的默认值为**8192**个字符，如错误消息所述，已超出此值。

 **但正如其他一些人所建议的那样，将所有值提高到最大值**2147483647**可能不是最好的方法。

正如我链接的 MSDN 文档中所写：

> 复杂性约束提供了对拒绝服务 (DOS) 攻击的保护，这些攻击试图使用消息复杂性来占用端点处理资源。其他复杂性约束包括消息中字符串内容的最大元素深度和最大长度等项目。

再加上您当前将**安全模式**设置为**无**这一事实- 您可能会遇到一些问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-27T09:22:58.673

我得到了这个错误并通过在客户端和服务器配置中为服务添加这个 MaxItemsInObjectGraph 属性来解决。

```
<dataContractSerializer maxItemsInObjectGraph="2147483647" /> 
```

服务器端

```
<system.serviceModel>
  <behaviors>
    <serviceBehaviors>
      <behavior name="Service.Service1Behavior">
        <dataContractSerializer maxItemsInObjectGraph="2147483647" />
      </behavior>
</system.serviceModel> 
```

客户端

```
<behaviors >
  <endpointBehaviors>
    <behavior name="endpointbehaviour">
      <dataContractSerializer maxItemsInObjectGraph="2147483646"/>
    </behavior>
  </endpointBehaviors>
</behaviors> 
```

并且不要忘记将此行为应用于 EndPoint behaviorConfiguration="endpointbehaviour"

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-10-30T12:57:23.043

客户端绑定

```
 <system.serviceModel>
<bindings>
<basicHttpBinding>
<binding name="BasicHttpBinding_IService11" closeTimeout="00:01:00"
openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:10:00"
allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647"
textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true"
messageEncoding="Text">
<readerQuotas maxDepth="128" maxStringContentLength="2147483647"
maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
<security mode="None">
<transport clientCredentialType="None" proxyCredentialType="None"
realm="" />
<message clientCredentialType="UserName" algorithmSuite="Default" />
</security>
</binding>
</basicHttpBinding>
</bindings>

<behaviors>
<endpointBehaviors>
<behavior name="KAMServiceDistributor">
<dataContractSerializer maxItemsInObjectGraph="2147483647" />
</behavior>
</endpointBehaviors>
</behaviors>
<client>
<endpoint address="http://localhost:1234/xxxx/Service.svc"
binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IService11"
contract="yourservice namespae" name="AnyName" />
</client>
</system.serviceModel> 
```

服务配置文件：

```
<system.serviceModel>
<behaviors>

<serviceBehaviors>
<behavior name="ServiceBehaviour">
<serviceDebug includeExceptionDetailInFaults="false" />
<serviceMetadata httpGetEnabled="true" />
<dataContractSerializer ignoreExtensionDataObject="false" maxItemsInObjectGraph="2147483646" />
</behavior>
</serviceBehaviors>
</behaviors>
<bindings>
<basicHttpBinding>
<binding <b>maxReceivedMessageSize="2147483647"</b>>
<readerQuotas maxDepth="128" maxStringContentLength="2147483647" />
</binding>
</basicHttpBinding>
</bindings>
<services>
<service behaviorConfiguration="ServiceBehaviour" name="Service">
<endpoint binding="basicHttpBinding" contract="IService" />
</service>
</services>
</system.serviceModel> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-08-17T09:56:17.180

尝试在绑定中设置以下内容。

```
<readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
    maxArrayLength="2147483647" maxBytesPerRead="2147483647"
    maxNameTableCharCount="2147483647" /> 
```

它解决了我的问题。有关更多参考，请找到以下链接[http://blogfornet.com/2013/08/the-maximum-string-content-length-quota-8192-has-been-exceeded-while-reading-xml-data/](http://blogfornet.com/2013/08/the-maximum-string-content-length-quota-8192-has-been-exceeded-while-reading-xml-data/)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-27T09:11:07.287

皮纳基·卡鲁里，

配额长度不仅取决于客户端的配置 - 它们还取决于服务器的配置。请发布您的 WCF 服务器的 web.config，以便我们对问题有所了解。有可能您已经为**8192**设置了配额，因此您最快的方法是找到并增加其价值。

*更新*

据我所知，您在服务器的 web.config 中缺少“readerQuotas”节点，因此**MaxStringContentLength**将其值设置为默认值（**8192**）。请参阅此链接了解更多信息：http: [//msdn.microsoft.com/en-us/library/system.xml.xmldictionaryreaderquotas.maxstringcontentlength.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmldictionaryreaderquotas.maxstringcontentlength.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-28T11:19:44.780

检查客户端的目标框架是否与服务的目标框架相同。我遇到了这个问题并尝试了上述所有修复，但没有奏效。检查属性并检查目标框架并更改它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-30T15:08:51.753

服务器端

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding maxBufferPoolSize="2147483647"
                     maxReceivedMessageSize="2147483647"
                     maxBufferSize="2147483647">
                <readerQuotas maxDepth="200"
                              maxStringContentLength="2147483647"
                              maxArrayLength="16384"
                              maxBytesPerRead="2147483647"
                              maxNameTableCharCount="16384" />
            </binding>
        </basicHttpBinding>
    </bindings>
    <behaviors>
        <serviceBehaviors>
            <behavior name="">
                <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
                <serviceDebug includeExceptionDetailInFaults="true"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <protocolMapping>
        <add binding="basicHttpsBinding" scheme="https" />
    </protocolMapping>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true"/>
</system.serviceModel> 
```

客户端

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_IRequestService" allowCookies="true"
        maxReceivedMessageSize="2147483647"
        maxBufferSize="2147483647"
        maxBufferPoolSize="2147483647">
                <readerQuotas maxDepth="32"
          maxArrayLength="2147483647"
          maxStringContentLength="2147483647"/>
            </binding>
            <binding name="BasicHttpBinding_IAttachmentService" allowCookies="true"
        maxReceivedMessageSize="2147483647"
        maxBufferSize="2147483647"
        maxBufferPoolSize="2147483647">
                <readerQuotas maxDepth="32"
          maxArrayLength="2147483647"
          maxStringContentLength="2147483647"/>
            </binding>
        </basicHttpBinding>
    </bindings>
</system.serviceModel> 
```**

# symfony - Symfony2 Doctrine Annotations & UNIQ_ 或 FK_ 定制

> ID：15654894
> 
> 赞同：1
> 
> 时间：2013-03-27T08:54:58.863
> 
> 标签：symfony, annotations, doctrine

我使用 Symfony2 和 Doctrine's Annotations 在表之间创建引用。创建表时，它看起来像这样：

```
CREATE TABLE `guardian` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `fos_user_id` int(11) NOT NULL,
  `first_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `last_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `UNIQ_644860558C20A0FB` (`fos_user_id`),
  CONSTRAINT `FK_644860558C20A0FB` FOREIGN KEY (`fos_user_id`) REFERENCES `fos_user` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

这样做的方法是在代码中创建这些注释，然后运行：

```
php app/console doctrine:schema:update --force 
```

这是其中一个参考文献的注释：

```
/**
 * @ORM\OneToOne(targetEntity="SF\UserBundle\Entity\User")
 * @ORM\JoinColumn(name="fos_user_id", referencedColumnName="id")
 */
private $fosUser; 
```

从“show create table;”可以看出 上面，键的名称和约束是相当不人性化的。我猜“UNIQ_644860558C20A0FB”只是“UNIQ_”并随机附加一些东西。

我想做的是给它一个正确的名字，比如“UNIQ_fos_user_id”。这样做的原因是，如果您遇到如下错误，则很难快速查看发生了什么，以及哪个键是问题（特别是如果有多个唯一键或外键：

```
SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '1' for key 'UNIQ_644860558C20A0FB' 
```

我查看了[此处](http://docs.doctrine-project.org/en/2.0.x/reference/annotations-reference.html)的文档，但看不到任何可以让我执行此操作的注释属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:00:53.020

经过一番调查，您无法定义主键或外键的约束。但是，您可以更改唯一约束名称：

```
/**
 * @Entity
 * @Table(name="ecommerce_products",uniqueConstraints={
 *     @UniqueConstraint(name="search_idx", columns={"name", "email"})})
 */ 
```

# actionscript-3 - Actions Script 3.0 if else 语句

> ID：15654897
> 
> 赞同：0
> 
> 时间：2013-03-27T08:55:09.577
> 
> 标签：actionscript-3, flash

需要通过它的点击事件做几件事。我是这方面的初学者，那么还有其他方法可以编写此代码吗？通过单击此按钮，它转到下一帧，根据声明，几个按钮将可见或不可见。我用这种方式编写了代码，它说有语法错误，但我找不到任何。希望你们理解这一点，并会帮助我。：） 谢谢！

```
review_btn.addEventListener(MouseEvent.CLICK, review1)
function review1(event:MouseEvent):void{

if(rvw1 == "Correct"){ 
    gotoAndStop(3627);
    help1.visible = false

    }
else{ 
    gotoAndStop(3627);
    help1.visible = true

}
}

review_btn.addEventListener(MouseEvent.CLICK, review2)
function review2(event:MouseEvent):void{

if(rvw2 == "Correct"){ 
    gotoAndStop(3627);
    help2.visible = false

    }
else{ 
    gotoAndStop(3627);
    help2.visible = true

}
}

review_btn.addEventListener(MouseEvent.CLICK, review3)
function review3(event:MouseEvent):void{

if(rvw3 == "Correct"){ 
    gotoAndStop(3627);
    help3.visible = false

    }
else{ 
    gotoAndStop(3627);
    help3.visible = true

}
}

review_btn.addEventListener(MouseEvent.CLICK, review4)
function review4(event:MouseEvent):void{

if(rvw4 == "Correct"){ 
    gotoAndStop(3627);
    help4.visible = false

    }
else{ 
    gotoAndStop(3627);
    help4.visible = true

}
}

review_btn.addEventListener(MouseEvent.CLICK, review5)
function review5(event:MouseEvent):void{

if(rvw5 == "Correct"){ 
    gotoAndStop(3627);
    help5.visible = false

    }
else{ 
    gotoAndStop(3627);
    help5.visible = true

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:46:48.377

我会尝试一下。看起来唯一的区别是在每种方法中，您需要将“helpX”.visible 与“rvwX”匹配等于字符串“Correct”，其中 X 是 1-5 之间的数字。无论如何，gotoAndStop() 框架是相同的。此外，所有五个都意味着关闭同一个按钮。我将假设剪辑“帮助”是在舞台上定义的电影剪辑，否则如果它们来自其他东西，我会将它们存储在一个数组中以循环遍历而不是“构建”名称并以这种方式查找参考只是为了清楚。

```
function review(event:MouseEvent):void {
    for(var counter:int = 1; counter < 6; counter++){
        this["help" + counter].visible = (this["rvw" + counter] != "Correct");
    }
    this.gotoAndStop(3627);
}
review_btn.addEventListener(MouseEvent.CLICK, review); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T10:44:33.930

我认为你必须做一个有 2 个字段的课程：“帮助”和“rvw”（让我称之为“切换器”）。它还可能包含设置可见性的功能（可能，不是必须，此功能也可以在您的主类中）：

切换器.as:

```
import flash.display.MovieClip;

public class Switcher {
    private var help:MovieClip;
    private var rvw:String;

    public function setVisibility() {
        help.visible = !(rvw == "Correct");
    }
} 
```

然后你必须在你的主类中创建一个 Switcher 对象数组，并且只使用一个“review”处理程序：

```
function review(event:MouseEvent):void {
    for each(var sw:Switcher in switchersArray) {
        sw.setVisibility();
    }
    this.gotoAndStop(3627);
} 
```

上一个答案中的代码可以正常工作，但恕我直言，创建一个类似对象的数组（或向量）比做很多 help1、help2、help3 等变量要好。

# asp.net-mvc - 基于 HTML5 的文档（doc/xls）查看器和编辑器：我有哪些选择？

> ID：15654901
> 
> 赞同：2
> 
> 时间：2013-03-27T08:55:26.870
> 
> 标签：asp.net-mvc, html, ms-word, wysiwyg, google-docs

我打算构建一个基于 HTML5 的文档编辑器，具有 google docs 等功能，文档是存储在服务器中的 word 文档和 excel 文档。后端使用 asp.net MVC。

我找到了一些支持 doc 文件编辑的方法，但找不到 xls 的任何解决方案。

有什么好的策略或解决方案可以做到这一点吗？作为一个单独的项目是可行的还是过于雄心勃勃？

如果有人可以给出一些指示，任何建议或指南都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:01:22.187

这可能会有所帮助：[http ://www.gelsheet.org/](http://www.gelsheet.org/)

它是一个开源的网络电子表格，您可能可以使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:13:12.723

为什么不使用 OpenXML SDK。它是 Microsoft 的一个很棒的 SDK 工具。[http://msdn.microsoft.com/en-us/library/office/bb456488.aspx](http://msdn.microsoft.com/en-us/library/office/bb456488.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:14:56.703

使用可能有帮助的[http://crocodoc.com 。](http://crocodoc.com)这不是开源的，但它可以做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-28T04:20:02.590

请尝试 Office 365 的开源替代方案：

*   [http://www.onlyoffice.org/sources#document](http://www.onlyoffice.org/sources#document) 或百老汇
*   GDK 后端[http://www.golem.de/1108/85594.html](http://www.golem.de/1108/85594.html)或

# php - 从数组中提取信息

> ID：15654902
> 
> 赞同：1
> 
> 时间：2013-03-27T08:55:31.850
> 
> 标签：php, arrays

有没有办法转换一个看起来像这样的数组：

```
Array ( [level-1] => 2 [quarter-1] => 1 [year-1] => 2014 [level-2] => 2 [quarter-2] => 2 [year-2] => 2015 [level-49] => 2 [quarter-49] => 2 [year-49] => 2015 [level-58] => 1 [quarter-58] => 1 [year-58] 
```

并且只取关键字后面的数字以在 sql 表中使用它们。例如，该表如下所示：

```
 ID 1 Level 2 Quarter 1 Year 2014 
 ID 2 level 2 quater 2 Year 2015
 ID 49 level 2 quarter 2 year 2015 
```

ETC

我试过了

```
if(!empty($_POST)){
        print_r ($_POST);
        echo "<br/><br/>";
        $s=$_POST;

        echo $abc= implode(',', $s);
        for($a=0;$a<count($s);$a++){
            $ar=explode(',',$abc);
            echo $var=$ar[$a];

        }
  } 
```

但我得到的结果是这样的：

```
2,1,2014,2,2,2015,2,2,2015... 
```

我还需要出示身份证。但最重要的是我不知道如何解释结果以将它们放入数据库中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T09:10:00.993

尝试这个 ：

```
$array = array ( "level-1" => 2, "quarter-1" => 1, "year-1" => 2014, "level-2" => 2, "quarter-2" => 2, "year-2" => 2015, "level-49" => 2, "quarter-49" => 2, "year-49" => 2015, "level-58" => 1, "quarter-58" => 1, "year-58"=>2016);

foreach(array_chunk($array,3,true) as $val){
    foreach($val as $k=>$v){
       if(strpos($k, "level") !== false){
           $temp    = explode("-",$k);
           $id      = $temp[1];
           $level   = $v;
       }
       if(strpos($k, "quarter") !== false){
           $quarter = $v;
       }
       if(strpos($k, "year") !== false){
           $year    = $v;
       }
    }
    echo "ID ".$id." Level ".$level." Quarter ".$quarter." Year ".$year;
    echo "<br>";
} 
```

输出 ：

```
ID 1 Level 2 Quarter 1 Year 2014
ID 2 Level 2 Quarter 2 Year 2015
ID 49 Level 2 Quarter 2 Year 2015
ID 58 Level 1 Quarter 1 Year 2016 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:09:22.370

我不知道用 PHP 编码，所以我将向您解释这样做的逻辑。

`for(int i=0;i<array.length;i=i+3)` `{`

//`get value from array[i]; get the level-x field and retrieve the x value, then extract integers accordingly from it after keywords. In java StringTokenizer can be used for this, or regex etc`

//`again get value from array[i+1] and extract the integer`

//`get the value from array[i+2] and do the same as above.`

`}`

如果数组被打乱，您可以将其与 level-x 匹配以获取要插入的确切元组。所以 level-x，x 值充当索引，将所有相关值分组。

# android - ORMLite 联合运算符

> ID：15654911
> 
> 赞同：0
> 
> 时间：2013-03-27T08:55:59.953
> 
> 标签：android, ormlite

我有三个表，我必须在一个 Android 中呈现`ListView`。为了获取数据，我使用 SQL`UNION`运算符将所有三个表“合并”在一起，以便在我的 ViewBinder 中，我可以使每个时间线项目看起来不同。

这些项目需要按时间顺序排序。这三个表没有共同的基类。

这是我想到的SQL：

```
SELECT * FROM (
        SELECT id, startTime as time, username, comment, "CustomerInteraction" FROM CustomerInteraction  
        UNION 
        SELECT id, date as time, "" as username, "" as comment, "Sale" FROM Sale
        UNION 
        SELECT id, claimDate as time, username, comment,  "TravelClaim" FROM TravelClaim) 
    ORDER BY time DESC LIMIT 100 
```

如何在 ORMLite 中表达上述查询？

我知道我可以使用`Dao.executeRaw`，但我不想一次性填充我的整个列表。我宁愿使用这个[技巧从 OR​​MLite 获取底层光标](https://stackoverflow.com/questions/7159816)，然后将其传递给我的适配器。（延迟加载，使长列表的初始显示速度更快。）

有没有办法我可以做类似的事情`Dao.getPreparedQueryFromRaw(String statement)`？还是更好`QueryBuilder.union(QueryBuilder qb)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:58:56.353

您可以通过在 SQLiteDatabase 上调用 rawQuery 来获取游标。我做这样的事情：

```
final SQLiteDatabase db = getHelper().getReadableDatabase();

Cursor cursor = db.rawQuery(MY_SQL_QUERY, null); 
```

你不需要做更多的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:25:02.150

> 有没有办法可以做类似 Dao.getPreparedQueryFromRaw(String statement) 的事情？或者更好的是 QueryBuilder.union(QueryBuilder qb)？

使用 ORMLite 执行此操作的最佳方法是使用其中一种[`queryRaw(...)`方法](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/dao/BaseDaoImpl.html#queryRaw%28java.lang.String,%20java.lang.String...%29)。它们返回一个您可以迭代的[`GenericRawResults`类。](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/dao/GenericRawResults.html)迭代器为您提供了[许多不同的方法](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/dao/CloseableIterator.html)来帮助您在列表中移动。

问题是通用结果不是某种类型，所以我不确定你是否可以将它映射到 Android`ListView`中。您可以提供[RawRowMapper](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/dao/RawRowMapper.html)到`queryRaw(...)`. [`dao.getRawRowMapper()`您可以使用方法](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/dao/BaseDaoImpl.html#getRawRowMapper%28%29)获取特定类型的映射器。

希望这里有帮助。

# .net - IE8 CSS Right Float Breaking Parent to the Left

> ID：15654914
> 
> 赞同：0
> 
> 时间：2013-03-27T08:56:18.233
> 
> 标签：.net, css, html, internet-explorer-8

我对以下代码和与 IE8 的兼容性有疑问（原始代码更复杂，但这显示了问题的核心）

```
Protected Sub btnExpand_Click(sender As Object, e As System.EventArgs)
    If btnExpand.Text = "Expand" Then
        btnExpand.Text = "Collapse"
        lblContent.Text = "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
    Else
        btnExpand.Text = "Expand"
        lblContent.Text = "Content"
    End If
End Sub

<style type="text/css">
    div {padding:10px; margin:20px;}
    .Section {width:550px;}
    .ClearBoth {clear:both; padding:0px; width:490px; margin:0px;}
</style>

<div>
    <div class="Section" style="float:left; background-color:Green;"></div>

    <div class="Section" style="float:Right; background-color:Blue;">

        <div style="background-color:Yellow;"></div>

        <div style="background-color:Red; display:inline-block; float:right;">
            <div style="background-color:Orange; display:inline-block;">
                <asp:Button ID="btnExpand" runat="server" Text="Expand" onclick="btnExpand_Click" />
                <br />
                <asp:Label ID="lblContent" runat="server" Text="Content"></asp:Label>
            </div>
            <div class="ClearBoth"></div>
        </div>
        <div class="ClearBoth"></div>

        <div style="background-color:Fuchsia;"></div>
    </div>
</div> 
```

用户点击“展开”按钮，更多信息显示在橙色 DIV 中（注意：橙色 DIV 实际上是不可见的，在本例中我们关心的是红色 DIV）

在实际代码中，单击“展开”按钮会在网格视图中取消隐藏大约 10 列，在此示例中，我们只是将大量 X 放入标签中，但结果是相同的。

红色 DIV 展开（向左）以显示现在可见的内容。

我使用 Chrome 作为我的默认浏览器创建了此代码，此代码在我的备用浏览器 (IE10) 中也可以正常工作，但是此代码在我们公司的浏览器 (IE8) 中不起作用

在 IE8 中，无论红色 DIV 是否设置为 float:right，橙色和红色 DIV 都会扩展到蓝色父 DIV 的右侧。

考虑到这在 Chrome 和 IE10 中有效，我假设我的代码在“开发时间”和转发中的这一刻是正确的，但有人知道有什么方法可以让它在 IE8 上工作吗？昨天我花了 4 个小时阅读有关浮动和显示的 W3C 文档，并在这里和谷歌搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:31:28.107

我假设没有人对此提出答案，这是一个 IE8 问题并且无法解决，尤其是在 IE10 正常工作的情况下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:58:43.087

尝试设置`overflow:auto`为父级。

# c - 如何从字符串中提取指定的字符串

> ID：15654915
> 
> 赞同：-4
> 
> 时间：2013-03-27T08:56:19.467
> 
> 标签：c, string

```
char string[]="DGS021J0W0S1000.0S20000S3000.0S4000.0S50.00S60.00F"; 
```

如何获得`S[1-5]` 感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T08:57:35.973

使用[strncpy()](http://www.cplusplus.com/reference/cstring/strncpy/)标准函数

```
char S[6] = {0};
strncpy(S, string+1 , 5); 
```

如果您想从字符串的开头复制到第 5 个字符，那么您的问题应该是

> 如何获得 S[0-4]

而不是`S[1-5]`因为 C 中的数组索引从 0 开始而不是从 1 开始。这种情况的解决方案将是

```
char S[6] = {0};
strncpy(S, string , 5); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:10:05.527

我认为您正在寻找子字符串方法。您可以在 C 中的两个 for 循环中执行此操作。

# jquery - jquery 验证插件无法正常工作

> ID：15654916
> 
> 赞同：0
> 
> 时间：2013-03-27T08:56:23.483
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery Validation Plugin 1.8.1 进行表单验证，我的问题是它无法正常工作

在这个 html 代码中

```
<input name="Mobile" type="text" class="Input" id="Mobile" placeholder="Type your mobile number" value="<?php echo $activeUser->getMobile();?>" required="true" number="true" /> 
```

`required="true"`工作正常，但`number="true"`不工作

请帮我解决这个问题谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:47:02.603

您的 HTML 代码已用于 HTML 5 验证...

```
<input name="Mobile" type="text" class="Input" id="Mobile"
placeholder="Type your mobile number" value="" required="true" number="true" /> 
```

这对于 jQuery Validate 插件的更新版本（如 1.11.0）来说没有问题。

**工作演示：http: [//jsfiddle.net/5rPGv/2/](http://jsfiddle.net/5rPGv/2/)**

但是，当使用 jQuery Validate 插件的 1.8.0 版本时，您的相同代码会被破坏。

**破碎：http: [//jsfiddle.net/5rPGv/1/](http://jsfiddle.net/5rPGv/1/)**

* * *

要修复您的代码，您只有两个选择：

1) 将 jQuery Validate 插件更新到更高版本。

或者

`.validate()`2) 在任何版本中 声明您的规则。[http://jsfiddle.net/5rpGv/3/](http://jsfiddle.net/5rPGv/3/)

```
$(document).ready(function () {

    $('#myform').validate({
        rules: {
            Mobile: {
                required: true,
                number: true
            }
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:20:26.740

添加`additional-methods.js`到您的页面中。您应该有`mobileUK`验证方法或。尝试使用：

```
<input name="Mobile" type="text" class="Input" id="Mobile" placeholder="Type your mobile number" value="<?php echo $activeUser->getMobile();?>" required="true" mobileUK="true" /> 
```

**编辑**

如果 html 版本不起作用，请尝试使用 JS 进行设置：

```
$("#myform").validate({
  rules: {
    field: {
      required: true,
      mobileUK: true
    }
  }
}); 
```

您可以创建自己的验证类型。示例：[http ://docs.jquery.com/Plugins/Validation/CustomMethods/phoneUS](http://docs.jquery.com/Plugins/Validation/CustomMethods/phoneUS)

```
jQuery.validator.addMethod("phoneUS", function(phone_number, element) {
    phone_number = phone_number.replace(/\s+/g, ""); 
    return this.optional(element) || phone_number.length > 9 &&
        phone_number.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/);
}, "Please specify a valid phone number");

$("#myform").validate({
  rules: {
    field: {
      required: true,
      phoneUS: true
    }
  }
}); 
```

# android - 正确关闭进度对话框

> ID：15654924
> 
> 赞同：3
> 
> 时间：2013-03-27T08:57:08.893
> 
> 标签：android, android-activity, progressdialog, android-lifecycle

我有一个进度对话框，我需要关闭它然后完成应用程序。我这样做的方式是这样的：

```
new AlertDialog.Builder(MainActivity.this)
                            .setMessage("There has been a problem.")
                            .setPositiveButton("OK",
                                    new DialogInterface.OnClickListener() {
                                        public void onClick(
                                                DialogInterface dialog,
                                                int which) {
                                            dialog.dismiss();
                                            finish();
                                        }
                                    }).show(); 
```

尽管如此，我总是得到著名的错误：

```
Caused by: android.view.WindowManager$BadTokenException: Unable to add window -- token android.app.LocalActivityManager$LocalActivityRecord@48189240 is not valid; is your activity running?
05-23 16:56:44.573: ERROR/AndroidRuntime(2494):     at android.view.ViewRoot.setView(ViewRoot.java:505)
05-23 16:56:44.573: ERROR/AndroidRuntime(2494):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:200)
05-23 16:56:44.573: ERROR/AndroidRuntime(2494):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:114)
05-23 16:56:44.573: ERROR/AndroidRuntime(2494):     at android.view.Window$LocalWindowManager.addView(Window.java:424)
05-23 16:56:44.573: ERROR/AndroidRuntime(2494):     at android.app.Dialog.show(Dialog.java:241)
05-23 16:56:44.573: ERROR/AndroidRuntime(2494):     at android.app.ProgressDialog.show(ProgressDialog.java:107)
05-23 16:56:44.573: ERROR/AndroidRuntime(2494):     at android.app.ProgressDialog.show(ProgressDialog.java:90)
05-23 16:56:44.573: ERROR/AndroidRuntime(2494):     at android.app.ProgressDialog.show(ProgressDialog.java:85) 
```

我怎么能没有问题地解雇它？我做对了吗？

提前非常感谢。

编辑：我可以完美地展示它，即使关闭它，用户也看不到任何错误，但在我的 LogCat 中，我可以看到那个讨厌的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:04:31.927

我没有测试过这个，虽然它应该工作。但是，作为替代方案，您可以调用`finish()`对话框`onClick`和活动的`onStop`调用`dialog.dismiss()`。

在 onStop 中调用dismiss 将避免*窗口泄漏*警告消息。

# jsf-2 - 'null Converter' 的转换错误设置值'948'

> ID：15654927
> 
> 赞同：0
> 
> 时间：2013-03-27T08:57:17.213
> 
> 标签：jsf-2, ejb

我想在 URL 中传递一些 ID，这些 ID 稍后将由支持 bean 读取。对于每个 ID，将遵循特定的操作。

*fg URL：localhost:8585/monit/accepted.jsf?acceptMsg=948&acceptMsg=764*

豆子：

```
@ManagedBean
@RequestScoped
public class AcceptedBean {
    @EJB
    private MessageService messageService;

    @ManagedProperty("#{paramValues.acceptMsg}")
    private String[] acceptMsg;

    public String[] getAcceptMsg() {
        return acceptMsg;
    }

    public List<Message> getMessages() {
        return messageService.getAcceptedMessages();
    }

    public void setAcceptMsg(String[] acceptMsgs) {
        this.acceptMsg = acceptMsgs;

        if(acceptMsg != null) {
            try {
                for (String accept: acceptMsg) {
                    final Message o = messageService.find(Integer.parseInt(accept));

                    messageService.accept(o);

                    FacesContext.getCurrentInstance().
                            addMessage(null,
                                    new FacesMessage(FacesMessage.SEVERITY_INFO,
                                            "Message was accepted:", o.getSubject()));
                }

            } catch (Exception e) {
                FacesContext.getCurrentInstance().
                        addMessage(null,
                                new FacesMessage(FacesMessage.SEVERITY_ERROR,
                                        "Error:", e.getMessage()));
            }
        }

    }
} 
```

接受.xhtml：

```
....
<f:metadata>
    <f:viewParam name="acceptMsg" value="#{acceptedBean.acceptMsg}" />
</f:metadata>
.... 
```

当我尝试用.xhtml 中的*绑定替换**值*时，我得到了

 *```
Cannot convert javax.faces.component.UIViewParameter@ee2549 of type class javax.faces.component.UIViewParameter to class [Ljava.lang.String; 
```

任何有关如何解决转换错误的想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:25:18.820

`<f:viewParam>`不支持多个参数值。去掉它。在这种特殊情况下，您不需要它。你已经有一个`@ManagedProperty("#{paramValues.acceptMsg}")`已经设置它们的。

### 也可以看看：

*   [f:viewParam 具有多个值](https://stackoverflow.com/questions/7794149/jsf-2-viewparam-with-multiple-values/7794294#7794294)

* * *

**与具体问题无关**，我只会用一种`@PostConstruct`方法替换 setter 中的业务工作。原则上，getter/setter 不应该做任何事情，只是获取或设置一个属性，这表明设计不好，因为它们只是访问点，并且可以在每个请求的基础上多次调用。*

# android - 当我使用任何配置启动 android 模拟器时，它会发出警告和错误

> ID：15654930
> 
> 赞同：1
> 
> 时间：2013-03-27T08:57:28.350
> 
> 标签：android

AVD 'AVD_for_Nexus_S_by_Google' 的启动模拟器无法创建上下文 0x3005 模拟器：警告：无法使用软件渲染器初始化 OpenglES 模拟。无法获取 wglGetExtensionsStringARB 无法获取 wglGetExtensionsStringARB 无法获取 wglGetExtensionsStringARB 无法获取 wglGetExtensionsStringARB 无法获取 wglGetExtensionsStringARB 无法获取 wglGetExtensionsStringARB 无法获取 wglGetExtensionsStringARB 无法获取 wglGetExtensionsStringARB 模拟器：模拟器窗口不在视野范围内，并且已重新定位 // 我阅读了很多帖子我已经完成了所有的事情，比如内存增加和减少，使用主机 GPU 取消选中，重新安装所有的东西 //但我不明白确切的问题是什么。

# wpf - wpf 调试错误输出 System.WIndows.Data 错误 25

> ID：15654935
> 
> 赞同：6
> 
> 时间：2013-03-27T08:57:36.630
> 
> 标签：wpf, debugging, combobox

我有一个自定义样式的组合框，效果很好。它被放置在用户控件内并绑定到数据结构。我使用 DisplayMemberPath 在 Combobox TextBox 中只显示一个元素。ComboBox Style 取自 MSDN 并多次使用。所以这里不显示。

```
<UserControl x:Class="wpf.projext1.MyComboBox"
         x:Name="MyControl"
         ...
    <ComboBox Style="{StaticResource ComboBoxStyle}"
                  Text="{Binding ElementName=MyControl, Path=Text}"
                  IsEditable="True"
                  IsTextSearchEnabled="False"
                  StaysOpenOnEdit="True"
                  ItemsSource="{Binding ElementName=MyControl, Path=MyItemsSource}"
                  DisplayMemberPath="Name"
    </ComboBox 
```

我在输出窗口中收到以下烦人的错误消息：

```
System.Windows.Data Error: 25 : Both 'ContentTemplate' and 'ContentTemplateSelector' are set;  'ContentTemplateSelector' will be ignored. ComboBoxItem:'ComboBoxItem' (Name='') 
```

如果我省略

```
DisplayMemberPath="Name" 
```

...没有显示关于错误 25 的调试输出。但我绝对需要 DiplayMemberPath="Name"！你有解决这个问题的想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-27T09:21:17.327

`DisplayMemberPath`您不能同时设置两者`ItemTemplate`。

`DisplayMemberPath`用于告诉 ItemsControl 在显示对象时显示哪个属性。如果您已经传递了 custom `ItemTemplate`，则设置此字段没有任何意义，因为您可以选择*如何*在该 ItemTemplate 中显示对象。

由于 MSDN 中的默认 Combobox 样式也设置了 ItemTemplate，这可能是错误的原因。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-27T10:16:11.667

已解决：无论是否启用 TextSearch，都使用 TextSearch 附加属性！

```
TextSearch.TextPath="Name" 
```

# ms-access - 如何在 Access 中的 Application.run 之后关闭文件句柄

> ID：15654939
> 
> 赞同：0
> 
> 时间：2013-03-27T08:57:54.430
> 
> 标签：ms-access, vba, ms-access-2010

我有一种复杂的场景

我们正在开发的访问应用程序调用另一个访问应用程序中的 VBA 函数，然后通过调用“调用”访问应用程序来触发安装例程。两个应用程序要么是 accda（用于 Access-AddIn），要么是编译的 accde 文件。

Admin.accda -> PlugIn.accda (InstallPlugIn) -> Admin.accda (RegisterPlugIn)

Admin.accda 中的对应行如下所示：

```
Application.Run("\\Path\To\PlugIn\PlugIn.InstallPlugin", "Parameters") 
```

除了一件事，一切都按预期工作。Access 使 PlugIn.accda 上的文件句柄保持打开状态，直到我关闭 Admin.accda。

当我调试我的代码时，我可以看到在 Admin.accda 中调用 Application.Run() 后，PlugIn.accda 的 VBA 代码被加载到 Admin.accda 中，并创建了 PlugIn.accda (PlugIn.laccda) 的锁定文件。当我的代码完成时，Lockfile 有 0 字节但仍然存在。

通过使用 Sysinternals 的 ProcessExplorer，我可以看到运行 Admin.accda 的进程仍然有一个对 PlugIn.accda 开放的文件句柄。

我想关闭该文件句柄，因为 PlugIn.accda 与打开的文件句柄无关，并且打开的文件句柄可能会干扰客户端客户端/服务器部署中的进程，例如将插件复制到客户端计算机。

到目前为止，我尝试了两种不同的方法，但没有成功：

首先：我尝试调用 Run on Access-Application-Object 并随后关闭该对象

```
 Dim oApplication As Object
  Set oApplication = CreateObject("Access.Application")
  oApplication.OpenCurrentDatabase Me.txtPathPlugIn
  If oApplication.Run("\\Path\To\PlugIn\PlugIn.InstallPlugin", "Params") Then
     'Do something
  End If
  oApplication.CloseCurrentDatabase
  Set oApplicaton = Nothing 
```

使用这种方法，插件无法调用 Admin.accda 中的 RegisterPlugIn 函数，因为它是在另一个进程中专门打开的。

第二：我尝试在 Admin.accda 中调用 RegisterPlugIn 后关闭插件数据库，方法是：

```
CodeProject.CloseCurrentDatabase 
```

但这没有任何影响:-(

有没有办法通过使用一些 Windows-API 函数来关闭文件句柄？或者有没有人有更好的方法来动态注册额外的 Access 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:46:19.200

也许这是一个愚蠢的解决方案，但只是把它扔在那里，你可以使用 taskkill 命令？ [http://technet.microsoft.com/en-us/library/bb491009.aspx](http://technet.microsoft.com/en-us/library/bb491009.aspx)

# knockout.js - 输入的 valueUpdate 绑定不起作用

> ID：15654945
> 
> 赞同：0
> 
> 时间：2013-03-27T08:58:06.870
> 
> 标签：knockout.js

我有一个包含元素的设置页面。每个元素都绑定到 ViewModel 属性。

我正在尝试实现设置的编辑和保存。

```
function saveSettings() {
    var new_settings = {};
    new_settings.property1 = settingsViewModel.settings.property1();
    new_settings.property2 = settingsViewModel.settings.property2();
    new_settings.property3 = settingsViewModel.settings.property3();
    .........
} 
```

如果 的内容没有被修改 - 那么它运作良好。但是对于用户更改内容的输入，我收到错误“对象的属性 xxx 不是函数”。似乎我的 Viewmodel 和绑定在元素发生更改后被破坏。

我的绑定如下：

```
 <input data-bind="value: settings.property1, valueUpdate: 'afterkeydown'" /> 
```

我还尝试了“keyup”、“keypress”、“input” - 没有任何效果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:00:49.613

如果您只是想将您的视图模型转换为 JSON 发送到服务器，可以在上面使用 ko.toJSON，或者如果您需要更多控制，使用映射插件来做同样的事情？

# java - 在 Glassfish 中设置 Corba 超时

> ID：15654948
> 
> 赞同：0
> 
> 时间：2013-03-27T08:58:13.537
> 
> 标签：java, jakarta-ee, glassfish, corba

从 jar 客户端调用 EJB 中分配的代码，在 EJB 内执行代码 30 分钟后，我收到超时：

```
com.sun.corba.ee.impl.transport.CorbaResponseWaitingRoomImpl waitForResponse
WARNING: "IOP00410219: (COMM_FAILURE) Communications timeout waiting for response.  Exceeded 1,800,000 milliseconds"
org.omg.CORBA.COMM_FAILURE:   vmcid: SUN  minor code: 219 completed: Maybe
            at com.sun.corba.ee.impl.logging.ORBUtilSystemException.communicationsTimeoutWaitingForResponse(ORBUtilSystemException.java:3180)
            at com.sun.corba.ee.impl.logging.ORBUtilSystemException.communicationsTimeoutWaitingForResponse(ORBUtilSystemException.java:3195)
            at com.sun.corba.ee.impl.transport.CorbaResponseWaitingRoomImpl.waitForResponse(CorbaResponseWaitingRoomImpl.java:198)
            at com.sun.corba.ee.impl.transport.SocketOrChannelConnectionImpl.waitForResponse(SocketOrChannelConnectionImpl.java:1196)
            at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.waitForResponse(CorbaMessageMediatorImpl.java:291)
            at com.sun.corba.ee.impl.protocol.CorbaClientRequestDispatcherImpl.marshalingComplete1(CorbaClientRequestDispatcherImpl.java:389)
            at com.sun.corba.ee.impl.protocol.CorbaClientRequestDispatcherImpl.marshalingComplete(CorbaClientRequestDispatcherImpl.java:357)
            at com.sun.corba.ee.impl.protocol.CorbaClientDelegateImpl.invoke(CorbaClientDelegateImpl.java:219)
            at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.privateInvoke(StubInvocationHandlerImpl.java:192)
            at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.invoke(StubInvocationHandlerImpl.java:152)
            at com.sun.corba.ee.impl.presentation.rmi.bcel.BCELStubBase.invoke(BCELStubBase.java:225)

    ...

    javax.ejb.EJBException: nested exception is: java.rmi.MarshalException: CORBA COMM_FAILURE 1398079707 Maybe; nested exception is: 
        org.omg.CORBA.COMM_FAILURE:   vmcid: SUN  minor code: 219 completed: Maybe
    java.rmi.MarshalException: CORBA COMM_FAILURE 1398079707 Maybe; nested exception is: 
        org.omg.CORBA.COMM_FAILURE:   vmcid: SUN  minor code: 219 completed: Maybe
        at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.mapSystemException(Util.java:271)
        at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.privateInvoke(StubInvocationHandlerImpl.java:205)
        at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.invoke(StubInvocationHandlerImpl.java:152)
        at com.sun.corba.ee.impl.presentation.rmi.bcel.BCELStubBase.invoke(BCELStubBase.java:225) 
```

我正在使用 Glassfish 2.1、Java 1.6_20。例如，有没有办法将此超时定义为一小时？这是 Glassfish 依赖吗？一些配置可能？

提前谢谢你的帮助！问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:06:27.453

您可以尝试将属性添加到您的 URL，如下所示：

[http://test.com/Client?prop=](http://test.com/Client?prop=) **com.sun.corba.ee.transport.ORBWaitForResponseTimeout=7200000**

您可以为[本文](https://blogs.oracle.com/ejcorba/entry/more_on_tcp_timeouts_in)中描述的 JVM 设置其他设置，但我不确定它们是否适用于您的 glassfish 版本。

# vb.net - VB.NET WebBrowser 控件 - 如何提交到默认浏览器？

> ID：15654954
> 
> 赞同：2
> 
> 时间：2013-03-27T08:58:42.447
> 
> 标签：vb.net, visual-studio-2010, submit, webbrowser-control

我的 VBForm 中有一个 webbrowser 控件。它在我的网站上查找网站并显示它。

该 WebBrowser1 中有表单提交按钮。我希望这样当他们单击 WebBrowser1 网页中的按钮时，它将打开他们自己的浏览器以提交表单

我该怎么做呢？

（是的，这是我的网站。如果需要，我可以更改服务器上的 HTML。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:26:49.070

答案要归功于：[打开默认 Web 浏览器](https://stackoverflow.com/questions/1562183/opening-default-web-browser) 和：[vb.net WebBrowser 链接到默认 Web 浏览器](https://stackoverflow.com/questions/5253409/vb-net-webbrowser-links-to-default-web-browser)

和一些试验和错误。工作结果如下：

```
Private Sub WebBrowser1_Navigating(ByVal sender As Object, ByVal e As System.Windows.Forms.WebBrowserNavigatingEventArgs) Handles WebBrowser1.Navigating
    'added a match string - if Allow is inside the URL link, then the WebBrowser control is allowed to navigate to it. otherwise use their browser.
    dim Allow as string = "http://mysite.com"
    If InStr(e.Url.ToString(), Allow) = 0 Then
        ' I'm trying here to cancel the event so that the WebBrowser1 control doesn't go there.
        e.Cancel = True
        ' then start a new process with their default browser
        System.Diagnostics.Process.Start(getDefaultBrowser(), e.Url.ToString())
    End If
End Sub

Private Function getDefaultBrowser() As String
    Dim browser As String = String.Empty
    Dim key As RegistryKey = Nothing
    Try
        key = Registry.ClassesRoot.OpenSubKey("HTTP\shell\open\command", False)

        'trim off quotes
        browser = key.GetValue(Nothing).ToString().ToLower().Replace("""", "")
        If Not browser.EndsWith("exe") Then
            'get rid of everything after the ".exe"
            browser = browser.Substring(0, browser.LastIndexOf(".exe") + 4)
        End If
    Finally
        If key IsNot Nothing Then
            key.Close()
        End If
    End Try
    Return browser
End Function 
```

如果 Martin Parkin 没有发布那个重复的警告，我永远不会解决它。

另外 - 必须将我的链接更改为 METHOD = GET，帖子标题并不总是以这种方式翻译。

# php - 使用 Php 和 pdo 创建灵活的更新查询 - bindparam 的问题

> ID：15654957
> 
> 赞同：0
> 
> 时间：2013-03-27T08:58:49.090
> 
> 标签：php, pdo

我正在更新我的 mysql 函数以使用 PDO。我已经掌握了大部分内容，但正在努力使用更新功能来更新记录中的多个字段。该函数在一个类中，我试图保持它的灵活性，以便与其他表等重用。

到目前为止，这是我的功能：

```
 public function dbUpdateRecord($table, $values, $where)
{

    $this->conn();
    $fieldNames = array_keys($values);
    var_dump($fieldNames);
    $set="";
    foreach ($fieldNames as $field) {
        $set .= " $field = :$field,";
    }

    //strip last comma
    $set = substr($set, 0, strlen($set) - 1);

    $wherefields = array_keys($where);
    $whereCondition="";
    foreach ($wherefields as $field) {
        $whereCondition .= " $field = :$field AND";
    }
    //strip last AND
    $whereCondition = substr($whereCondition, 0, strlen($whereCondition) - 3);

    $sql = "UPDATE $table SET $set WHERE $whereCondition";
    var_dump($sql);

    $stmt = $this->db->prepare($sql);

    foreach ($values as $field => $value) {

        $stmt->bindParam(':$field', $value);
    }
    foreach ($where as $field => $value) {
        $stmt->bindParam(':$field', $value);
    }
    return $stmt->execute();
} 
```

问题是记录中的所有字段都被包含在 $where 变量中的记录的 id 更新。

$values 包含一个 (fieldname=>value) 数组。

我认为问题在于绑定参数并试图使字段名/占位符动态化

我认为我需要使用 bindparam 作为最佳实践 - 这是正确的还是我可以去执行（）？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:27:39.253

您正在从错误的一端提起此日志。
您的方法可能不安全，但同时又不灵活。如果您需要基于 JOIN 的更新怎么办？如果您需要 OR 在 WHERE（或 IN）中怎么办？

您真正需要的是一个传统查询，其中只需要生成 SET 语句值。因此，您需要一个[辅助函数来](https://stackoverflow.com/a/3921798/285587)从数据数组中生成这样的语句，返回格式正确的 SET 语句和带有要绑定的变量的数组：

```
$fields = array("name","email");
$sql = "UPDATE users SET ".pdoSet($fields,$values,$data)." WHERE id = :id"
// now we have $values array to be passed into query
$stmt = $dbh->prepare();
$values["id"] = $_POST['id'];
$stmt->execute($values); 
```

使用此代码，您将能够对任意查询进行更新。并使其**安全**。

作为进一步的步骤，您将需要开始使用类型提示的占位符，以使**整个**代码如下所示：

```
$db->query("UPDATE ?n SET ?u WHERE id IN(?a)",$table,$data,$ids); 
```

回到你的问题，ONe 是对的——你需要使用 bindValue 而不是 bindParam （正如它在标签 wiki 中提到的那样）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T09:08:22.630

我相信问题在于您正在使用 foreach 将参数绑定到查询。为什么这是个问题？因为当你绑定一个变量时，你绑定了一个对那个变量的引用，所以如果那个变量改变了，查询中的值也会改变。由于您使用的是 foreach 循环，因此所有参数的值将是变量 $value 引用的最新值。

[您可以在此处](https://stackoverflow.com/questions/4969243/strange-behavior-of-foreach)和[此处](https://stackoverflow.com/questions/8220399/strange-behaviour-after-loop-by-reference-is-this-a-php-bug)阅读有关此 foreach 行为的更多信息。所以基本上，你有两个选择：

*   使用对实际值的引用，而不是使用对 $value 的引用（可以在下一次迭代中更改其值）
*   使用一个辅助变量来引用另一个在循环期间不会改变的内存位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-09T20:50:18.620

我来到这里是因为我遇到了同样的问题，而 YCS 的解决方案正是我所需要的。对于这种情况下的其他任何人，这是我最终使用的辅助函数：

函数 commit_table($record_id, $changed_values) { $db = open_database();

```
$query = 'UPDATE table SET ';
$query_arguments = array();

$is_first = TRUE;

foreach(array_keys($changed_values) as $key)
{
    if($is_first)
    {
        $is_first = FALSE;
    }
    else
    {
        $query .= ', ';
    }
    $value_var = ':' . $key;
    $query .= $key;
    $query .= ' = ';
    $query .= $value_var;
    $query_arguments[$value_var] = $changed_values[$key];
}

$query .= ' WHERE record_id = :record_id';
$query_arguments[':record_id'] = $record_id;

$stmt = $db->prepare($query);
$stmt->execute($query_arguments);

close_database($db); 
```

}

# vbscript - VBS循环简单查询

> ID：15654960
> 
> 赞同：-1
> 
> 时间：2013-03-27T08:58:51.837
> 
> 标签：vbscript

helo 请帮助这是代码

```
Option Explicit

Dim iim1, i, s , shell
dim iret
dim myname, mypath
dim pos

'initialize iMacros instance
set iim1= CreateObject ("iMacros")

'i = iim1.iimOpen ("-fx", false) 'Use open Firefox instance if available
i = iim1.iimOpen ("-fx", true) 'Always open new instance

pos = 2

Do while pos < 10

iret = iim1.iimSet("loopVar",Cstr(pos))
iret = iim1.iimPlay("ecc2.iim")

set shell=createobject("wscript.shell")
shell.Run "%comspec% /c C:\Users\SDFL\Desktop\dc1.bat"

pos = pos + 1
loop 
```

线后

```
iret = iim1.iimPlay("ecc2.iim") 
```

我希望它检查是否`iret < 0`. 如果是，那么我希望它重复该步骤

```
iret = iim1.iimSet("loopVar",Cstr(pos))
iret = iim1.iimPlay("ecc2.iim") 
```

在一个循环中，直到`iret > 0`具有相同`Pos`的值而不干扰主循环，如果`iret > 0`我想让它移动到代码的下一行。

那么这是一个循环里面的一个循环怎么做呢？请注意`Pos`值，例如，如果`Pos`值是 6 `iret < 0`，则使用 重复该步骤`pos = 6`，如果`iret > 0`则继续执行下一行代码，因此在最后一步`pos = 7`，整个代码继续进行。

我希望你能明白

请给代码谢谢

***添加***

```
 >>pos = 2

iret = iim1.iimSet("loopVar",Cstr(pos))
iret = iim1.iimPlay("ecc2.iim")

Do

iret = iim1.iimSet("loopVar",Cstr(pos))
iret = iim1.iimPlay("ecc2.iim")
iret = Rnd() > .5
WScript.Echo pos, CStr(iret)
Loop Until iret

set shell=createobject("wscript.shell")
shell.Run "%comspec% /c C:\Users\SDFL\Desktop\dc1.bat"

pos = pos + 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:22:38.933

在数值范围内循环的选择方法是`For`，而不是`While`：

```
>> For pos = 2 To 9
>>     WScript.Echo "pos", pos
>> Next
>>
pos 2
pos 3
pos 4
pos 5
pos 6
pos 7
pos 8
pos 9 
```

要至少重复一次操作并直到满足某些条件，请使用`Do ... Loop Until`：

```
>> For pos = 2 To 9
>>     Do
>>        ret = Rnd() > .5
>>        WScript.Echo pos, CStr(ret)
>>     Loop Until ret
>> Next
>>
2 True
3 True
4 True
5 False
5 False
5 True
6 False
6 True
7 True
8 True
9 False
9 False
9 True 
```

循环上可能应该有一个上限（计数器/计时器？）`Do`以避免无限循环。

**添加：**

在我的示例中，如果函数返回值 > .5 ，则循环控制布尔变量`ret`设置为`True`（= 请停止循环） 。`Rnd()`给定一个`.iimSet()`返回一些表示成功或失败的数字的函数，您当然可以自己计算出哪个数字 (..-1, 0, +1 ..) 来比较 (=, <, >, <=, >=) 与该返回值以在成功的情况下停止循环。提示：仔细检查您的测试“iret < 0”与“iret > 0”是否`.iimSet()`提供 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:05:27.310

如果你想要一个内循环，只需添加一个内循环：

```
pos = 2

Do while pos < 10
  Do
    iret = iim1.iimSet("loopVar",Cstr(pos))
    iret = iim1.iimPlay("ecc2.iim")
  Loop Until iret > 0

  set shell=createobject("wscript.shell")
  shell.Run "%comspec% /c C:\Users\SDFL\Desktop\dc1.bat"

  pos = pos + 1
loop 
```

当然，由于您的外部循环只是简单地迭代一系列数字，因此最好使用`For`循环。而且我会将`WScript.Shell`对象的创建移到循环之外，这样您就不会浪费系统资源（重新）一遍又一遍地创建对象。

```
set shell=createobject("wscript.shell")

For pos = 2 To 9
  Do
    iret = iim1.iimSet("loopVar",Cstr(pos))
    iret = iim1.iimPlay("ecc2.iim")
  Loop Until iret > 0

  shell.Run "%comspec% /c C:\Users\SDFL\Desktop\dc1.bat"
Next 
```

# html - 在 CSS 中创建垂直居中的水平线以填充标题的宽度

> ID：15654967
> 
> 赞同：0
> 
> 时间：2013-03-27T08:59:14.383
> 
> 标签：html, css

我基本上需要创建一个标题，它有一条垂直居中的水平线填充宽度（左右），但它也支持同一行上的多个文本元素，例如形成如下内容：

**----- 阿尔法 - 贝塔 - 伽玛 -----**

这是我到目前为止所拥有的：

[JSfiddle](http://jsfiddle.net/WkZkt/)

在这里，我的演示工作正常，但它需要背景才能工作，这不是一个好的解决方案，因为我网站上的背景不是静态的单色（它是固定的图片，滚动时不会移动）。

[JSfiddle](http://jsfiddle.net/WkZkt/1/)

所以我需要做的基本上是修复第一个版本，使其像第二个版本一样工作，但不使用背景。

我想过做类似的事情：

```
<div class="content">
  <div class="line"></div>
  <div class="line-text">Some</div>
  <div class="line-gap"></div>
  <div class="line-text">Text</div>
  <div class="line-gap"></div>
  <div class="line-text">In a Line</div>
  <div class="line"></div>
</div> 
```

其中**.line**将是一个自动宽度（填充左侧和右侧），而**.line-gap**只是说 10px 以显示文本之间的线条。

**编辑/更新**

这是另一个演示，但我更喜欢更自动的东西，而不是尝试绝对设置位置，因为它适用于响应式流体设计......

[JSfiddle](http://jsfiddle.net/qMug3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:59:59.990

如果您不想使用背景，可以使用`:before`and`:after`属性做一些小技巧。

这是示例[jsFiddle](http://jsfiddle.net/EXCU8/12/)，您可以将内容/属性更改为您喜欢的任何内容，它会按照您的要求进行操作。

下面的例子。

**HTML：**

```
<ul>
<li class="sub-menu-item" ><a href="#">Example</a></li>
<li class="sub-menu-item" ><a href="#">Example</a></li>
</ul> 
```

**CSS：**

```
li.sub-menu-item:before,  li.sub-menu-item:after {
    content: "\2014 \2014"
}

li { 
    display:inline-block;
} 
```

# javascript - 在加载弹出页面时使用 jquery 或 javascript 隐藏背景网页垂直滚动条

> ID：15654968
> 
> 赞同：0
> 
> 时间：2013-03-27T08:59:16.090
> 
> 标签：javascript, jquery

通过单击`<a>click me</a>`标签，弹出窗口将被加载。此时背景页面垂直滚动条处于可见状态。如何在弹出窗口加载时隐藏并在关闭时可见。

我只使用了下面的脚本：

```
if($("#myModal").is(':visible')){  // here 'myModal' is div of popup.
   $("html").css("overflow", "hidden");  // here 'html' is a background page
   }
   else
  {
   $("html").css("overflow", "visible");
  } 
```

隐藏状态正常工作，但当我关闭弹出窗口时可见状态不起作用。

请给我一个正确的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:28:10.493

取决于您实现模态的方式...例如，如果您使用的是[jQuery UI 对话框小部件](http://api.jqueryui.com/dialog/)，您将执行以下操作：

```
$("a.mylink").dialog({
    open: function() {
        $("html").css("overflow", "hidden");
    },
    close: function() {
        $("html").css("overflow", "visible");
    }
}); 
```

# c++ - DirectX程序在窗口模式下被销毁时抛出异常

> ID：15654969
> 
> 赞同：1
> 
> 时间：2013-03-27T08:59:17.780
> 
> 标签：c++, directx, directx-11

当我尝试使用 Rastertek DirectX 11 教程之一时会出现问题。

*   我将其更改为`const bool fullscreen value`，`false`以便程序在窗口模式下运行
*   我将窗口样式从更改`CLIPPINGWINDOW`为`OVERLAPPEDWINDOW`

它工作正常，只是程序在窗口被销毁时抛出异常：

```
Unhandled exception at 0x779715ee in FrustumCulling.exe: 0xC0000005: Access violation reading location 0xfeeeff5e. 
```

[这是http://www.rastertek.com/dx11tut16.html](http://www.rastertek.com/dx11tut16.html)上的教程 16

我所做的唯一修改是：

在**图形类.h**

`const bool FULL_SCREEN = true //false;`

和

```
SystemClass::InitializeWindows
{

...

m_hwnd = CreateWindowEx(WS_EX_APPWINDOW, m_applicationName, m_applicationName, 
            WS_OVERLAPPEDWINDOW,
            posX, posY, screenWidth, screenHeight, NULL, NULL, m_hinstance, NULL);

...

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:36:20.147

您是否可能仍在全屏模式下设置交换链？当我遇到这个问题时，将它添加到我的 DxClass 的析构函数中解决了它

```
if(_swapChain != nullptr)
{
            _swapChain->SetFullscreenState(false, NULL);  
            _swapChain->Release();
            _swapChain = nullptr;
} 
```

根据其中一篇教程中的 Rastertek 评论之一，交换链必须在发布之前将全屏设置为 false。

当您设置您的`DXGI_SWAP_CHAIN_DESC`保证时，您使用的是`swapChainDesc.Windowed = !FULL_SCREEN`而不是文字 bool 值，并确保您将 FULL_SCREEN 设置为 false，`FULL_SCREEN = true //false;`不会这样做并且不应该编译。

# c# - 来自用户的多个输入以保存在一列中的数据库中

> ID：15654971
> 
> 赞同：0
> 
> 时间：2013-03-27T08:59:26.893
> 
> 标签：c#, asp.net, sql-server, gridview

我不知道如何描述我在寻找什么，但我可以用我绘制的图表来说明它。

下面的第一个是“用户输入”，它将在 gridview 中，它将要求用户输入详细信息。(textbox) 是一个文本框，它旁边的细节是一个输入示例。

```
User Inputs:

Items                 Quantity             Unit Price              Total
(textBox)abc         (textBox)2          (textBox) 100          (textBox) 200
(textBox)def         (textBox)1          (textBox) 150          (textBox) 150 
```

单击保存按钮后（我没有显示按钮，对不起），详细信息将保存在数据库中，如下所示的“保存在数据库中”。

```
Save in Database:

 ID            Items           Quantity      UnitPrice       Total
10001        Abc , def           2,1          100,150       200,150 
```

并且当用户想要显示详细信息时，详细信息应显示在下面的“显示结果”中。

```
Display Results:
ID:10001   
Items     Quantity     Unit Price     Total
Abc          2            100          200
def          1            150          150 
```

我希望这个解释是可以理解的，我在解释和 ASP 方面都很差。请帮我用 C# 或 VB 编写代码，因为我无法选择这样做。太感谢了。

代码示例：

```
string sql = "INSERT INTO Products(Name, ProductImage, OriginalPrice, DiscountPrice, Descriptions,StockQuantity, Category) VALUES (@Name, @ProdImage, @OriPrice, @DisPrice, @Descrp, @Quantity, @Category)";

    try
    {
        conn.Open();
        SqlCommand cmd = new SqlCommand(sql, conn);
        SqlParameter[] param = new SqlParameter[7];

        param[0] = new SqlParameter("@Name", SqlDbType.VarChar,100);
        param[1] = new SqlParameter("@ProdImage", SqlDbType.VarChar, 100);
        param[2] = new SqlParameter("@OriPrice", SqlDbType.Float );
        param[3] = new SqlParameter("@DisPrice", SqlDbType.Float );
        param[4] = new SqlParameter("@Descrp", SqlDbType.VarChar,50);
        param[5] = new SqlParameter("@Quantity", SqlDbType.Int);
        param[6] = new SqlParameter("@Category", SqlDbType.VarChar,50);

        param[0].Value = name;
        param[1].Value = image;
        param[2].Value = OriPrice;
        param[3].Value = disPrice;
        param[4].Value = description;
        param[5].Value = quantity;
        param[6].Value = Category;

        for (int i = 0; i < param.Length; i++)
        {
            cmd.Parameters.Add(param[i]);
        }

        cmd.CommandType = CommandType.Text;
        cmd.ExecuteNonQuery(); 
```

当前代码：

```
private string CreateRow(DataTable data, Int32 index, String ColumnName)
{
String[] quan =   data.Rows[0][ColumnName].ToString().Split(',');
if (quan.Length >= index)

return quan[index].ToString();
else
return "";
}
protected void GridView2_SelectedIndexChanged(object sender, EventArgs e)
{
SqlConnection conn = new SqlConnection("");
string sql = "SELECT * FROM SalesOrder WHERE ID = 10010";
DataSet DataFromDataBase = new DataSet();
SqlDataAdapter adp = new SqlDataAdapter("SELECT * FROM SalesOrder WHERE ID = 10010", conn);
adp.Fill(DataFromDataBase);

DataTable TempData = new DataTable();
TempData.Columns.Add("Quantity", typeof(string));
TempData.Columns.Add("UnitPrice", typeof(string));

for (Int32 i = 0; i < 5; i++)
{
    DataRow row = TempData.NewRow();
    row[0] = CreateRow(DataFromDataBase, i, "Quantity");
    row[1] = CreateRow(DataFromDataBase , i, "UnitPrice");
    TempData.Rows.Add(row);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:12:06.240

您保存值的方式确实不切实际且非规范化。

您应该保存以下值：

```
 ID            Items           Quantity      UnitPrice       Total
10001           Abc                  2          100           200
10001            def                 1          150            150 
```

您可以在 sql 中使用以下查询：

```
select * from table where ID = 10001 
```

它将在数据表或数据集中返回两行（无论您使用什么）。您可以轻松地将其与任何控件（如 GridView、Repeater 和 Datalist）绑定。

通过这种方式，您可以轻松地减少代码以显示所需格式的数据。

也许它会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:06:35.043

**DataFromDataBase**是一个数据表，您可以在其中从数据库中获取数据。最后，您将在**TempData**数据表中获得所需格式的 数据。

您必须将 Grisview 与**TempData**数据表绑定。

我只用两列完成了这项工作，您可以根据您的列进行更改。我已将最大 5 作为您在一个字段中的最大值数。您可以根据您的要求进行修改。

```
 DataTable TempData = new DataTable();
    TempData.Columns.Add("Quantity", typeof(string));
    TempData.Columns.Add("UnitPrice", typeof(string));

    for (Int32 i = 0; i < 5; i++)
    {
        DataRow row = TempData.NewRow();
        row[0] = CreateRow(DataFromDataBase, i, "Quantity");
        row[1] = CreateRow(DataFromDataBase, i, "UnitPrice");
        TempData.Rows.Add(row);

    }

private string CreateRow(DataTable data, Int32 index, String ColumnName)
{
   String[] quan =   data.Rows[0][ColumnName].ToString().Split(',');
   if (quan.Length >= index)

       return quan[index].ToString();
   else
       return "";
} 
```

如果您从数据库中获取**DataSet**中的数据。您可以将参数传递给**CreateRow**函数，如下所示

```
 CreateRow(  DataFromDataBase.Tables[0], i, "UnitPrice"); 
```

**像这样编辑** 你必须在数据集或数据表中获取数据（你的选择）

```
DataSet DataFromDataBase = new DataSet();
    SqlDataAdapter adp = new SqlDataAdapter("select * from tbdep;select * from tbemployee", ConfigurationManager.ConnectionStrings["cn"].ConnectionString);
    adp.Fill(DataFromDataBase); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T09:12:56.643

您尝试实现的目标可以在代码中实现，但在读取和写入存储时需要自定义连接和拆分。

但是，我建议您规范化数据并创建 2 个表：

**标头**

HeaderId CreatedOn 用户名等

**详细信息**

HeaderId 项目数量 UnitPrice Total 等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T09:32:53.903

如果您希望它们使用相同的 ID，为什么不添加另一列，比如 OrderId？

# android - Android 应用内计费：有没有办法为特定帐户购买商品？

> ID：15654973
> 
> 赞同：4
> 
> 时间：2013-03-27T08:59:29.487
> 
> 标签：android, in-app-purchase, in-app-billing

使用 Android In-App Billing IAB 3，API 可以使用 getPurchases() 查询当前购买。

如果设备有多个 Google 帐户，返回什么？

*   所有帐户的所有购买？

*   为其中一个帐户购买？

有没有办法为特定帐户获取 getPurchases()？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:54:15.133

简而言之，答案是“不”。无法控制查询哪个帐户。

在撰写此答案时，用于 getPurchases() 的帐户是添加到设备的最后一个帐户。（顺便说一句，这也是应用内购买时使用的帐户）。根据第一个链接，目前谷歌正在调查这个问题。

一些相关链接：

[https://plus.google.com/111471886409455069782/posts/RognJUHbBfc](https://plus.google.com/111471886409455069782/posts/RognJUHbBfc)

[https://code.google.com/p/android/issues/detail?id=53307](https://code.google.com/p/android/issues/detail?id=53307)

[In App Billing 是否支持多个帐户？](https://stackoverflow.com/questions/15263889/does-in-app-billing-support-multiple-accounts)

# c++ - 在 C++ 中检查迭代器指针

> ID：15654974
> 
> 赞同：3
> 
> 时间：2013-03-27T08:59:31.453
> 
> 标签：c++

我想知道是否需要进行以下检查：

```
std::list<int> myList;
.....
for (std::list<int>::iterator itr = myList.begin(); itr != myList.end(); ++itr)
{
   if (itr != NULL) // Is This Check Necessary?
   {
      // DO SOMTHING.
   }    
} 
```

我在一些地方看到过这个检查，我想知道这是否是必要的检查。如果列表是函数的输入，也许这个检查是必要的？

谢谢，奥弗。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T09:02:54.387

不，这是不必要的检查。您可能想检查`*itr != nullptr`列表是否包含某种指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T09:03:04.530

不，这是没有必要的。我不确定它是否有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T09:05:28.507

相反，您可以使用基于新范围的 for 循环 (C++11)，因此您不需要处理迭代器检查。

```
std::list<int> YourList;
for( auto z : YourList ) {
//
std::cout << z;        // z is int
// amazing codes and fun :)
//
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T09:19:25.923

不需要检查。如果 myList 为空，则 myList.begin() 等于 myList.end()

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-27T09:33:13.907

我认为没有办法测试迭代器是否未初始化，但是您可以将迭代器初始化为容器的 end() 作为默认值。

```
std::list<int>::iterator itr = yourlist.end();
//
if (itr != yourlist.end())
{
    //doSomething
} 
```

# php - 表单提交后调用 PHP 脚本

> ID：15654981
> 
> 赞同：1
> 
> 时间：2013-03-27T09:00:08.517
> 
> 标签：php, mailchimp

我有两个独立的过程，我想知道如何将它们结合起来。

1.  我有一个 PHP 电子邮件注册表单，它将用户电子邮件地址和其他数据发布到 SQL 数据库中。

2.  我有一个同步 PHP 脚本 API，它一旦运行就会将 SQL DB 中的所有信息添加到第 3 方站点（mailchimp）

一旦新用户添加了他们的详细信息，并且提交了表单，PHP API 脚本就会运行，我该如何组合它们。我这样做了，但是它运行脚本并且用户必须等到 API 调用完成：

```
$appUrl = $_SERVER['HTTP_HOST'];
$path = 'newsletter/mailchimp.php';//your path here
$appUrl = 'http://'.$appUrl.'/'.$path;

if (count($_POST)>0) echo file_get_contents($appUrl);?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:19:26.453

找到一个可以将函数绑定到的 HTML 元素，例如表单、按钮、复选框或其他任何东西。有很多不同的方式，比如`$("form").submit(function(){});`，，。之后，您可以使用该函数调用 PHP 文件。`.click``.changed``$.post()`

```
$(document).ready(function(){
    $("#buttonId").click(function(){
        $.post('phpfile1.php');
        $.post('phpfile2.php');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:36:25.367

如果您从远程站点获取内容，那么您无法在获得之前将其发送给客户端。

但是在您的示例中，您正在本地计算机上调用 URL - 如果您包含该文件而不是在新的 HTTP 请求中调用它，那么您的速度会略有提高。

如果您不需要来自其他 URL 的内容，则在脚本生成内容刷新其缓冲区并退出后，从关闭函数中调用它。

如果事务跨越两个代码集，则通过 javascript 调用第二个 url 不是一个好主意 - 您正在让用户控制应用程序中的流程。

# mysql - 这种自左加入返回的记录比我预期的要多

> ID：15654982
> 
> 赞同：0
> 
> 时间：2013-03-27T09:00:13.637
> 
> 标签：mysql, sql, select, greatest-n-per-group

[SQL 小提琴在这里](http://sqlfiddle.com/#!2/00935/1)

希望我的目标很明确：我有一个表格，其中存储“起始”货币、“到”货币、“买入”和“卖出”汇率，以及该汇率应适用的日期。

*我想获取所有货币的最新汇率列表，直到给定的截止日期。*

这意味着：

1.  结果应包括“从”和“到”货币的每个组合*的一行，以及
2.  如果表中有不止一行具有“从”和“到”货币的特定组合，则提取的行应该是最近日期的行。

我正在使用的查询不这样做。事实上，它目前似乎返回了一切。

```
SELECT ce.*
FROM currency_exchange ce
LEFT JOIN currency_exchange newer
    ON (
        newer.currency_from = ce.currency_from
        AND newer.currency_to = ce.currency_to
        AND newer.exchange_date > ce.exchange_date
        AND newer.exchange_date <= '2012-03-27 00:00:00'
    )
WHERE newer.id IS NULL
ORDER BY ce.currency_from, ce.currency_to, ce.exchange_date DESC 
```

*澄清一下：我将“从”和“到”货币计算为互斥的。如果数据库中有一行指定了从货币 ID 123 到货币 ID 321 的汇率，而另一行指定了从货币 ID 321 到货币 ID 123 的汇率，则应返回这两行。是的，从 123 到 321 的买入价在逻辑上等同于从 321 到 123 的卖出价，反之亦然。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T09:04:08.353

如何解决这个特定问题有很多方法。我使用的方法是使用子查询获取*currency_from、currency_to* 的每个组合的当前*交换日期。*子查询的结果只有 3 列，这就是为什么我们需要在原始表中加入它以获取剩余的列，前提是它与：`currency_from`、、`currency_to`和`exchange_date`。

```
SELECT  a.*
FROM    currency_exchange a
        INNER JOIN
        (
            SELECT  currency_from, currency_to, MAX(exchange_date) max_date
            FROM    currency_exchange
            GROUP   BY currency_from, currency_to
        ) b ON  a.currency_from = b.currency_from AND
                a.currency_to = b.currency_to AND
                a.exchange_date = b.max_date 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/00935/2)

输出

```
╔════╦═══════════════╦═════════════╦═════════╦══════════╦═════════════════════╗
║ ID ║ CURRENCY_FROM ║ CURRENCY_TO ║ RATE_IN ║ RATE_OUT ║    EXCHANGE_DATE    ║
╠════╬═══════════════╬═════════════╬═════════╬══════════╬═════════════════════╣
║ 20 ║             1 ║           2 ║ 1.43    ║ 1.65     ║ 2013-03-05 15:55:29 ║
║ 19 ║             1 ║           3 ║ 1.1     ║ 1.26     ║ 2013-03-05 15:49:45 ║
║ 16 ║             2 ║           3 ║ 2       ║ 3        ║ 2012-11-16 15:44:33 ║
╚════╩═══════════════╩═════════════╩═════════╩══════════╩═════════════════════╝ 
```

# android - 在android中用tts改变铃声

> ID：15654983
> 
> 赞同：0
> 
> 时间：2013-03-27T09:00:18.597
> 
> 标签：android, android-intent, text-to-speech

我正在尝试制作一个应用程序，当来电时识别号码并通过使用 android 文本到语音它会说出来电者的联系人姓名。我已经完成了几乎我的问题是当来电而不是默认铃声时，它应该说 TTS.how to override ringtone with TTS here im给出我尝试过的内容。任何人都可以帮助我获得更好的解决方案。我已经尝试了第一个答案，现在铃声音量变小了。但 tts 声音不来。

```
 public class myPhoneStateChangeListener extends PhoneStateListener
{
    int ph_state = 0;
    speechcontact clsspcntct = new speechcontact();
    @Override
    public void onCallStateChanged(int state, String incomingNumber) {
        super.onCallStateChanged(state, incomingNumber);
        if (state == TelephonyManager.CALL_STATE_RINGING)
        {

            String phoneNumber =   incomingNumber;
            String ContactName = objUtility.getContactName2(context,phoneNumber);

            if (RBSpkMde.isChecked())
            {
                speakWords(ContactName);
            }
        } 
    }
     public void speakWords(String speech)
    {
    myTTS.speak("you have call from"+speech, TextToSpeech.QUEUE_FLUSH, null);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:07:48.780

你静音`STREAM_RING`

```
public class myPhoneStateChangeListener extends PhoneStateListener
{
    private int mRingVolume;
    Context context;

    public myPhoneStateChangeListener(Context cxt)
    {
        context = cxt;
    }

    @Override
    public void onCallStateChanged(int state, String incomingNumber) {
        super.onCallStateChanged(state, incomingNumber);
        if (state == TelephonyManager.CALL_STATE_RINGING)
        {
            mRingVolume = mAudioManager.getStreamVolume(AudioManager.STREAM_RING);
            mAudioManager.setStreamMute(AudioManager.STREAM_RING, true);
            String phoneNumber =   incomingNumber;
            String ContactName = objUtility.getContactName2(context,phoneNumber);

            if (RBSpkMde.isChecked())
            {
                speakWords(ContactName);
            }
        } 
        if (state == TelephonyManager.CALL_STATE_IDLE)
        {
             mAudioManager.setStreamMute(AudioManager.STREAM_RING, false);
             mAudioManager.setStreamVolume(AudioManager.STREAM_RING, 
                        mRingVolume, AudioManager.FLAG_ALLOW_RINGER_MODES);
        }
    }
     public void speakWords(String speech)
    {
    myTTS.speak("you have call from"+speech, TextToSpeech.QUEUE_FLUSH, null);

    }

} 
```

# php - 如何通过 getResultSet() 函数从 cypher rest API 检索结果

> ID：15654984
> 
> 赞同：2
> 
> 时间：2013-03-27T09:00:19.387
> 
> 标签：php, neo4j, cypher

```
<?php
require("phar://neo4jphp.phar");

$client      = new Everyman\Neo4j\Client();
$queryString = "START n=node:node_auto_index(name="ashish"),m=node:node_auto_index(city="bhilai"),p=node:node_auto_andex(school="bhilai") RETURN n,m,p";
$query       = new Everyman\Neo4j\Cypher\Query($client, $queryString);
$result      = $query->getResultSet();
foreach ($result as $row) {
    echo $row['x']->getproperty('name'), $row['y']->getproperty('city'), $row['z']->getproperty('school');
}

?> 
```

这没有按预期工作，它提供相同的属性，即：名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:51:42.080

您在查询中返回列“n，m，p”。这些也是结果集中列的名称。

尝试这个：

```
foreach ($result as $row) {
  echo $row['n']->getproperty('name'), $row['m']->getproperty('city'), $row['p']->getproperty('school');
} 
```

[https://github.com/jadell/neo4jphp/wiki/Cypher-and-gremlin-queries](https://github.com/jadell/neo4jphp/wiki/Cypher-and-gremlin-queries)上的文档

文档使用“x”和“y”，因为它们是示例查询中列的名称。来自文档：“如果返回多列数据，则可以按名称在行中访问每一列。” 名称来自`RETURN`查询的子句。

# c++ - RDbms 名称和版本

> ID：15654987
> 
> 赞同：-1
> 
> 时间：2013-03-27T09:00:40.410
> 
> 标签：c++, sql, qt, rdbms

我正在用 c++ 做一个软件，它允许使用 qt 库访问一些 rdbms。该软件仅适用于PC。软件需要知道 rdbms 的名称和版本，因为程序需要选择一些 sql 查询来执行。有没有办法在任何 rdbms 中检索此数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:08:21.487

> 有没有办法在任何 rdbms 中检索此数据？

这特定于每个 RDBMS - 例如，在 Oracle 中，您可以执行

```
select *
from v$version; 
```

但在其他 RDBMS 中不存在此视图。

一些可能的方法：

*   无论如何，您都需要在某处定义连接参数。即使它们通常是特定于 RDBMS 的，所以您可以简单地添加另一个参数，例如`SQLFlavor=Oracle`or`SQLFlavor=MySQL`然后使用`SQLFlavor`代码中的值来确定要使用哪个 SQL 语句

*   您可以使用一些启发式方法来找出 RDBMS。比如查询`v$version`视图——如果它不存在，你会得到一个错误，你知道它不是Oracle，你可以继续下一次尝试（比如`SELECT VERSION()`看看它是否是MySQL）。否则，您可以使用结果找出具体的 Oracle 版本。

# doctrine-orm - 删除关联/引用的实体

> ID：15654989
> 
> 赞同：1
> 
> 时间：2013-03-27T09:00:40.893
> 
> 标签：doctrine-orm

我有一个表**product**，这些表中的项目在诸如**cart_item**和**order_item**以及**shipping_item**等表中被引用。

所有这些引用都是可选的（product_id 在这些表中设置为可为空）。

我需要有一种方法来删除产品并仍然保留其他表的记录。我能想到的一种方法是进入所有这些表，将 product_id 设置为 null，然后返回 product 表进行删除。但是，由于我可能不知道引用**产品**的所有表（许多其他捆绑包可能具有引用此产品的实体），有没有办法让我知道所有这些关联以循环并设置为 null？

（或者也许有更好的方法？）

PS：这是一个购物车的想法，所有者可能希望删除过期产品进行清理，但对于订购的、已发货的物品，他们仍然需要保留记录。

**编辑1：**

这是 OrderItem 实体中产品引用的定义：

```
/**
 * @var \Product
 *
 * @ORM\ManyToOne(targetEntity="Product")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="product_id", referencedColumnName="id")
 * })
 */
private $product; 
```

我得到的错误：

> PDOException：SQLSTATE [23000]：完整性约束违规：1451 无法删除或更新父行：外键约束失败（`test`. `order_item`, C ONSTRAINT `fk_order_item_product1`FOREIGN KEY ( `product_id`) REFERENCES `product`( `id`) ON DELETE NO ACTION ON UPDATE NO ACTION）

**编辑2：**

我最初将 onupdate="SET NULL" 设置为 order_item 实体，并认为这就足够了，但不是：

```
/**
 * @var \Product
 *
 * @ORM\ManyToOne(targetEntity="Product")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="product_id", referencedColumnName="id", nullable=true, onDelete="SET NULL")
 * })
 */
private $product; 
```

之后，我还必须更新数据库模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T09:16:45.430

假设您在拥有实体`product`和其他实体之间建立了适当的关系，例如`cart_item`应该有一个外键，您想要的行为是原则 2 的默认行为。

看看这里的[手册](http://docs.doctrine-project.org/en/latest/reference/working-with-associations.html)

作为一个例子，他们展示了删除一个`User`实体及其对应的`Comments`

```
$user = $em->find('User', $deleteUserId);

foreach ($user->getAuthoredComments() AS $comment) {
    $em->remove($comment);
}
$em->remove($user);
$em->flush(); 
```

该示例指出：

> 如果没有对所有已编写的评论进行循环，Doctrine 将使用 UPDATE 语句仅将外键设置为 NULL，并且在 flush() 操作期间仅将用户从数据库中删除。

这向我表明，在您的情况下，您实际上**想要**这种行为。因此，只需删除`product`实体，学说 2 将自动找到所有其他具有属于该产品的外键的实体并将其设置为`NULL`

**编辑**
您的错误消息表明，在尝试删除`product`实体后，仍然存在 foreign_keys，即 Doctrine 没有将它们正确设置为 null。您需要确保添加`cascade`属性，特别是添加`remove`到您的实体关系中。它看起来像下面这样：

```
<?php
class Product
{
    //...
    /**
     * Bidirectional - One-To-Many (INVERSE SIDE)
     *
     * @OneToMany(targetEntity="Cart", mappedBy="product", cascade={"remove"})
     */
    private $carts;
    //...
} 
```

# servicestack - MVC ServiceStackController 不遵守 ServiceStack 基本身份验证 HtmlRedirect

> ID：15654994
> 
> 赞同：1
> 
> 时间：2013-03-27T09:01:13.693
> 
> 标签：servicestack, basic-authentication

我可能不明白，但我有以下问题：

**应用主机.cs**

```
Plugins.Add(new AuthFeature(
            () => new AuthUserSession(),
            new IAuthProvider[] { new BasicAuthProvider() }) { HtmlRedirect = null }); 
```

**家庭控制器.cs**

```
[Authenticate]
public class HomeController : ServiceStackController 
```

**问题**

问题是当我尝试访问 HomeController 时，我被重定向到`~/login?redirect=....`.

我会假设通过设置`HtmlRedirect`为 null，也会影响 MVC 控制器，但它似乎没有。

**这是预期的行为吗？还是我做错了什么？**

我的最终目标是让浏览器提示带有质询/响应基本身份验证框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:28:32.560

由于[此提交](https://github.com/ServiceStack/ServiceStack/commit/179c4ed2aceef75a1075cf887ae6511f184d3dd0)，您可以在身份验证失败时覆盖默认行为：

```
[Authenticate]
public class HomeController : ServiceStackController
{
    public override ActionResult AuthenticationErrorResult
    {
        get
        {
            //return 401 Unauthorized for example
            return new HttpStatusCodeResult(401);
        }
    }
} 
```

`ServiceStackController.AuthorizationErrorResult`可以用同样的方法修改。

在这种情况下设置`HtmlRedirect`为`null`不起作用，因为`[Authenticate]`与 ASP.net MVC 控制器而不是 ServiceStack 服务一起使用时，属性（以及所有其他 ServiceStack 属性）的行为略有不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:39:01.763

我在`ServiceStack`Jabbr 聊天页面上被告知这是一个错误，今天将进行修复！

[https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.FluentValidation.Mvc3/Mvc/ExecuteServiceStackFiltersAttribute.cs#L25](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.FluentValidation.Mvc3/Mvc/ExecuteServiceStackFiltersAttribute.cs#L25)

# android - 不幸的是 myapp 已停止

> ID：15654997
> 
> 赞同：-1
> 
> 时间：2013-03-27T09:01:19.260
> 
> 标签：android

我得到应用程序已停止。该项目将场景从 MainAplication 更改为 JobList，但是，将 Job List 更改为 ExerciseList，我正在接受这些“不幸的是应用程序已停止”。在模拟器上。这是我的课程。我也在 logcat 上得到了 FATAL EXCEPTİN。

应用程序主程序.java

```
 import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.Button;
    import android.widget.EditText;

    public class ApplicationMain extends Activity {
/** Called when the activity is first created. */
EditText nameEditCtrl;
Button btnCtlr;
String name;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    nameEditCtrl = (EditText) findViewById(R.id.editText1);
    btnCtlr = (Button) findViewById(R.id.button1);
    btnCtlr.setOnClickListener(new ButtonClickHandler());
}

public class ButtonClickHandler implements View.OnClickListener {
    public void onClick(View view) {
        if (nameEditCtrl != null && nameEditCtrl.getText().length() != 0) {
            name = nameEditCtrl.getText().toString();
        } else {
            name = "Guest";
        }
        Intent intObj = new Intent(ApplicationMain.this,
                JobList.class);
        intObj.putExtra("USERNAME", name);
        startActivity(intObj);
    }
}
 } 
```

作业列表.Java

```
 import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.ImageButton;
    import android.widget.TextView;

    public class JobList extends Activity {
TextView greetMsg;
ImageButton ib;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.joblist);
    greetMsg = (TextView) findViewById(R.id.textView1);
    Intent intename = getIntent();
    String uname = (String) intename.getSerializableExtra("USERNAME");
    greetMsg.setText("Welcome " + uname);

    ib = (ImageButton) findViewById(R.id.imageButton1);
    ib.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Intent intObj = new Intent(JobList.this,ExerciseList.class);
            startActivity(intObj);
        }
    });

    }

} 
```

练习列表.Java

```
 import android.app.Activity;
      import android.content.Intent;
      import android.os.Bundle;
      import android.view.View;
      import android.widget.Button;
      import android.widget.EditText;
      import android.widget.ImageButton;
      import android.widget.TextView;

     public class ExerciseList extends Activity {

ImageButton iz;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.exerciselist);

    iz = (ImageButton) findViewById(R.id.imageButton2);
        iz.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            Intent intObj = new Intent(ExerciseList.this,
                    ApplicationMain.class);
            //intObj.putExtra("USERNAME", name);
            startActivity(intObj);
        }
    });

}
 } 
```

AndroidManifest.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.prgguru.android"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="14" android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".ApplicationMain"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".JobList"
        android:label="@string/app_name" >
    </activity>
</application>

     </manifest> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T09:04:24.850

您忘记在 manifest.xml 中注册您的活动

```
<activity
        android:name=".ExerciseList"
        android:label="@string/app_name" >
    </activity> 
```